# StackOverflow 问答 10011000-10011999

# android - 安卓震动事件

> ID：10011000
> 
> 赞同：0
> 
> 时间：2012-04-04T12:22:04.137
> 
> 标签：android, android-widget, accelerometer

我已经在我的应用程序中实现了 Shake Event 监听器，并且 onShake 做了一些逻辑。我想在用户停止摇动手机后显示一个对话框。我需要在哪里实现这个逻辑？如果我这样做 onShake 本身，则会出现多个对话框。有人能帮我吗？

谢谢杰

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T13:52:24.857

因此，考虑到您的问题，我最初考虑“调整”您的侦听器的常量值（MIN_FORCE、MIN_TIME ... 等），以便为事件创建一些“阻力”，因此它不会被过度触发. 然后我意识到这是一个愚蠢的想法，因为有一个更好的解决方案......**只需在发生抖动事件时取消绑定事件处理程序，然后在用户关闭对话框时重新绑定它。**为此，请使用您用于 onResume 和 onPause 方法的答案中提供的相同代码：

这个绑定监听器：

```
 mSensorManager.registerListener(mSensorListener,
    mSensorManager.getDefaultSensor(Sensor.TYPE_ACCELEROMETER),
    SensorManager.SENSOR_DELAY_UI); 
```

这可以解除绑定：

```
mSensorManager.unregisterListener(mSensorListener); 
```

# action - 已批准操作 - publish_actions 仍然无法正常工作

> ID：10011003
> 
> 赞同：2
> 
> 时间：2012-04-04T12:22:20.297
> 
> 标签：action, publish, facebook-opengraph

这个问题以前被问过很多次，但它们似乎都与 Open Graph 被“打开”之前的问题有关。作为一个新用户，我也不能使这个问题有用，即没有图像或链接。如果您想查看我发布的图像，则必须复制和粘贴。

首先，**我的 Action 被批准了**。

[http://i.stack.imgur.com/hAFHr.png](https://i.stack.imgur.com/hAFHr.png)

此外，该操作显示为可供所有用户使用。

[http://i.stack.imgur.com/IrrWW.png](https://i.stack.imgur.com/IrrWW.png)

`publish_actions`已添加到 Auth。

[http://i.stack.imgur.com/PdJiA.png](https://i.stack.imgur.com/PdJiA.png)

我也正确设置了对象和聚合。

身份验证预览还显示了正确的设置（尽管对话框当前没有保持打开状态以查看它，但它曾经是）。

当我尝试通过 FB 连接到该站点时，我没有看到`publish_actions`. 相反，我看到了对话的第二阶段，对于`publish_stream`. 我第一次保存应用程序时错误地设置了这个，但很快就更改了它。

[http://i.stack.imgur.com/n819f.png](https://i.stack.imgur.com/n819f.png)

[http://i.stack.imgur.com/gkXfg.png](https://i.stack.imgur.com/gkXfg.png)

这是我认为它变得更加陌生的地方。如果我查看其中一位应用程序开发人员的 FB 个人资料，并从那里单击该应用程序，但未注册，我会看到正确的权限。

[http://i.stack.imgur.com/SsOVI.png](https://i.stack.imgur.com/SsOVI.png)

另一个让我更难调试的故事是，似乎自从玩了聚合后，尽管被列为应用管理员，我什至无法获得 publish_actions 权限。（我已经读过，在 FB 处理服务器发送的任何操作之前，每个操作都需要一个聚合。）

```
/**/ FB.ApiServer._callbacks.ff2f1615c({"error":{"message":"(#200) Requires extended permission: publish_actions or App must be on whitelist","type":"OAuthException","code":200}}); 
```

这是我在网站上完成操作时遇到的错误， http: [//purple.fr/boutique](http://purple.fr/boutique)

我错过了某个地方的设置吗？我做了不该做的事吗？是否应该在网站上的代码中控制这些？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T08:54:25.650

当用户连接到您的站点时，您应该请求 publish_actions 权限而不是 publish_stream 权限。推荐对话框设置（您已经要求提供 publish_actions）仅在用户单击 Facebook 内的操作时才有效。它不适用于已经在您网站上的用户。

在您的登录功能 ( `FB.login`) 中，确保您添加了权限`publish_actions`。

除此之外，现在看起来一切正常。

[http://i.stack.imgur.com/jAosv.png](http://i.stack.imgur.com/jAosv.png)

[http://i.stack.imgur.com/Wbgf5.png](http://i.stack.imgur.com/Wbgf5.png)

# jsf-2 - 安排活动时间显示问题

> ID：10011008
> 
> 赞同：0
> 
> 时间：2012-04-04T12:22:34.637
> 
> 标签：jsf-2, primefaces

我的日程安排有问题。它没有显示事件的时间。如下图。![在此处输入图像描述](../Images/afbb11ff0bc01e3ab63b5a51b3a95126.png)我正在使用 primefaces3.0M4-snapshot 和 jsf2.0

以下是代码

在豆

```
private ScheduleModel eventModel; 

public ForNewSchedule()
{
System.out.println("KSHITITJ");
Calendar c1=Calendar.getInstance();
c1.set(2012, 04, 01, 05, 05, 05);

Calendar c2=Calendar.getInstance();
c2.set(2012, 04, 01, 06, 06, 06);

Calendar c3=Calendar.getInstance();
c3.set(2012, 04, 04, 10, 10, 10);

Calendar c4=Calendar.getInstance();
c4.set(2012, 04, 04, 11, 11, 11);

eventModel = new DefaultScheduleModel(); 
eventModel.addEvent(new DefaultScheduleEvent("Champions League Match", c1.getTime(), c2.getTime())); 
eventModel.addEvent(new DefaultScheduleEvent("Birthday Party",c3.getTime(),c4.getTime())); 
System.out.println("KSHITITJ-----");
} 
```

在页面上

```
<h:form> 
<p:schedule value="#{forNewSchedule.eventModel}" /> 
</h:form> 
```

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T05:31:45.613

不是 100% 肯定，但几乎......他们在 3.04 rls 之后在调度程序中添加了时间显示，所以如果你升级到更新的版本，你应该得到你想要的......（不像你我没有想要那个功能，所以我不得不在一次 primefaces 升级后自己删除它

我记得是这样做的

```
.fc-event-time{
display:none;
} 
```

所以理论上你应该在你的css中添加类似的东西

```
.fc-event-time {
    display: inline-block;
} 
```

但是再次...我认为您首先应该尝试升级到更新版本的 primefaces

# javascript - 使用 Node.JS，如何将 JSON 文件读入（服务器）内存？

> ID：10011011
> 
> 赞同：769
> 
> 时间：2012-04-04T12:22:40.073
> 
> 标签：javascript, json, node.js

## 背景

我正在对 Node.js 进行一些实验，并且想从文本文件或 .js 文件（哪个更好？？）中读取 JSON 对象到内存中，以便我可以从代码中快速访问该对象。我意识到那里有诸如 Mongo、Alfred 之类的东西，但这不是我现在需要的。

## 问题

如何使用 JavaScript/Node 从文本或 js 文件中读取 JSON 对象并进入服务器内存？

* * *

## 回答 #1

> 赞同：1430
> 
> 时间：2012-04-04T12:27:19.797

同步：

```
var fs = require('fs');
var obj = JSON.parse(fs.readFileSync('file', 'utf8')); 
```

异步：

```
var fs = require('fs');
var obj;
fs.readFile('file', 'utf8', function (err, data) {
  if (err) throw err;
  obj = JSON.parse(data);
}); 
```

* * *

## 回答 #2

> 赞同：453
> 
> 时间：2014-10-19T02:14:04.047

我发现最简单的方法就是使用`require`JSON 文件的路径。

例如，假设您有以下 JSON 文件。

**测试.json**

```
{
  "firstName": "Joe",
  "lastName": "Smith"
} 
```

然后，您可以使用以下方法轻松地将其加载到您的 node.js 应用程序中`require`

```
var config = require('./test.json');
console.log(config.firstName + ' ' + config.lastName); 
```

* * *

## 回答 #3

> 赞同：60
> 
> 时间：2012-04-04T12:33:10.283

异步是有原因的！*向@mihai 扔石头*

否则，这是他在异步版本中使用的代码：

```
// Declare variables
var fs = require('fs'),
    obj

// Read the file and send to the callback
fs.readFile('path/to/file', handleFile)

// Write the callback function
function handleFile(err, data) {
    if (err) throw err
    obj = JSON.parse(data)
    // You can now play with your datas
} 
```

* * *

## 回答 #4

> 赞同：51
> 
> 时间：2017-11-11T03:10:04.747

至少在 Node v8.9.1 中，你可以这样做

`var json_data = require('/path/to/local/file.json');`

并访问 JSON 对象的所有元素。

* * *

## 回答 #5

> 赞同：21
> 
> 时间：2021-03-12T15:25:23.333

## 2021 年的答案，使用 ES6 模块语法和 async/await

在现代 JavaScript 中，这可以一次性完成，无需安装额外的包：

```
import { readFile } from 'fs/promises';

let data = JSON.parse(await readFile("filename.json", "utf8")); 
```

根据需要添加一个`try/catch`块来处理异常。

* * *

## 回答 #6

> 赞同：19
> 
> 时间：2017-08-31T12:36:03.540

在 Node 8 中，您可以使用内置的`util.promisify()`异步读取这样的文件

```
const {promisify} = require('util')
const fs = require('fs')
const readFileAsync = promisify(fs.readFile)

readFileAsync(`${__dirname}/my.json`, {encoding: 'utf8'})
  .then(contents => {
    const obj = JSON.parse(contents)
    console.log(obj)
  })
  .catch(error => {
    throw error
  }) 
```

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2019-05-29T20:30:42.953

使用[fs-extra](https://www.npmjs.com/package/fs-extra)包非常简单：

同步：

```
const fs = require('fs-extra')

const packageObj = fs.readJsonSync('./package.json')
console.log(packageObj.version) 
```

异步：

```
const fs = require('fs-extra')

const packageObj = await fs.readJson('./package.json')
console.log(packageObj.version) 
```

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2019-07-09T13:18:19.707

**使用[node-fs-extra](https://github.com/jprichardson/node-fs-extra) *（异步等待）***

```
const readJsonFile = async () => {
    const myJsonObject = await fs.readJson('./my_json_file.json');
    console.log(myJsonObject);
}

readJsonFile() // prints your json object 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2016-11-02T20:19:39.703

[https://nodejs.org/dist/latest-v6.x/docs/api/fs.html#fs_fs_readfile_file_options_callback](https://nodejs.org/dist/latest-v6.x/docs/api/fs.html#fs_fs_readfile_file_options_callback)

```
var fs = require('fs');  

fs.readFile('/etc/passwd', (err, data) => {
  if (err) throw err;
  console.log(data);
});  

// options
fs.readFile('/etc/passwd', 'utf8', callback); 
```

[https://nodejs.org/dist/latest-v6.x/docs/api/fs.html#fs_fs_readfilesync_file_options](https://nodejs.org/dist/latest-v6.x/docs/api/fs.html#fs_fs_readfilesync_file_options)

**您可以在文件系统文档中找到 Node.js 的所有用法！**
希望这对你有帮助！

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2019-04-20T02:51:31.200

```
function parseIt(){
    return new Promise(function(res){
        try{
            var fs = require('fs');
            const dirPath = 'K:\\merge-xml-junit\\xml-results\\master.json';
            fs.readFile(dirPath,'utf8',function(err,data){
                if(err) throw err;
                res(data);
        })}
        catch(err){
            res(err);
        }
    });
}

async function test(){
    jsonData = await parseIt();
    var parsedJSON = JSON.parse(jsonData);
    var testSuite = parsedJSON['testsuites']['testsuite'];
    console.log(testSuite);
}

test(); 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2020-01-30T07:28:18.020

这么多的答案，没有人做过基准来比较同步、异步和需要。[我在这里](https://stackoverflow.com/questions/35389060/read-json-file-content-with-require-vs-fs-readfile)描述了通过 require、readFileSync 和 readFile 在内存中读取 json 的用例的区别。

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2017-10-05T05:04:43.613

**如果您正在寻找使用错误处理`Async`加载 JSON 文件的完整解决方案`Relative Path`**

```
 // Global variables
  // Request path module for relative path
    const path = require('path')
  // Request File System Module
   var fs = require('fs');

// GET request for the /list_user page.
router.get('/listUsers', function (req, res) {
   console.log("Got a GET request for list of users");

     // Create a relative path URL
    let reqPath = path.join(__dirname, '../mock/users.json');

    //Read JSON from relative path of this file
    fs.readFile(reqPath , 'utf8', function (err, data) {
        //Handle Error
       if(!err) {
         //Handle Success
          console.log("Success"+data);
         // Parse Data to JSON OR
          var jsonObj = JSON.parse(data)
         //Send back as Response
          res.end( data );
        }else {
           //Handle Error
           res.end("Error: "+err )
        }
   });
}) 
```

**目录结构：**

[![在此处输入图像描述](../Images/c088ad0c650ffc989700b19be5d3150a.png)](https://i.stack.imgur.com/Bz7jB.png)

# php - 如何使用 Ajax 调用特定的 PHP 函数并从 JQuery 得到结果

> ID：10011012
> 
> 赞同：1
> 
> 时间：2012-04-04T12:22:43.823
> 
> 标签：php, jquery

我与 Ajax 的第一次接触正在发生，我有点困惑。我已经阅读了许多问题，但我无法阅读答案，这很可能是在某个地方。

情况是，我正在使用 OOP PHP 方法，而我所做的一切都是通过 index.php 和参数进行的。所以我不会在表单帖子、按钮点击中调用任何其他 .php 文件。

我创建了一个 HTML 列表框（我想删除垂直滚动条，但这只是解决问题的一个好处），它提供了我的类别。

现在，通过单击每个类别，我想调用某个函数，然后为另一个 div 生成输出。

```
function swapContent(){
$("#myPresentDiv").html('<img src="../../imgs/ajax-loader-big.gif"/>').show();
var cat = $('#listbox').val();
$("#action").change(alert(cat));
var url = "&s=".cat;
$.post(url, {contentVar: cat} ,function(data) {
   $("#myPresentDiv").html(data).show();
}); 
```

}

所以，我的 JQuery 脚本选择了正确的类别，我提醒它警告对话框，所以我确定这很好，然后使用目前的代码，我重新加载我的整个页面，所以我得到，一页一页在页面...

我试图弄清楚如何编写 JQ ajax 调用，它只会返回结果，而不是整个页面。

我可以输入 URL “index.php&s="cat, 然后以某种方式告诉 ajax “通过索引，调用函数 displayresults ($cat); 吗？

希望我写的一切对你有意义:)

肿瘤坏死因子。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T12:30:59.593

该 url 是您的 ajax 函数调用，必须只返回页面部分而不是整个 html 文档。如果你有

```
$.post('ajax.php',data,function(d){
  $('#responsediv').html(d).show();
}); 
```

该文件`ajax.php`只能返回页面部分，例如

```
<div>This is the new content</div> 
```

所以你不会有页面内页。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T12:26:29.720

If you look at the frameworks or cms out there, they basically have `routes` that map calls to your index.php function to methods of the controller.

This is a complex argument, you could try to start out reading [this](http://www.symfony-project.org/book/1_0/09-Links-and-the-Routing-System) article

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T12:31:25.047

是的，这是有道理的。您的问题基本上是：当您获得 AJAX 操作的结果并将其插入页面时，它会再次插入整个布局，而不是模板。

好的，所以解决方案是调用“无样式”的 PHP 脚本，即没有模板数据。因此，您的 PHP 脚本应该只输出一个简短的 HTML 片段而不是一个页面（您可能有一个可以为此页面删除的“页眉”和“页脚”）。您需要采取什么行动取决于您在服务器端使用什么 - 框架？内容管理系统？自定义 PHP 应用程序？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-04T12:35:40.030

很久以前我为内部应用程序做了确切的事情......发生的事情是我通过ajax变量传递类名，函数名和函数参数并在后端的php中读取相同的内容，然后调用适当的使用这些参数在类中起作用。

PHP代码：

```
$option = trim($_GET['v']);

switch ( $option ) {
    case 1:
        $sid    = trim($_GET['q']);
        $page   = trim($_GET['p']);
        $method = trim($_GET['m']);

        $class  = new $page( $link );
        echo $class->$method( $sid );
    break;
    case 2:
        $page   = trim($_GET['p']);
        $method = trim($_GET['m']);

        $class  = new $page( $link );
        echo $class->$method();
    break;
    default:
        echo '';
    break;
} 
```

**但这是一个内部应用程序，因此不存在注入攻击、xss、xsrf、会话劫持问题......对于您来说，情况可能会有所不同**

希望这可以帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-04T13:08:32.243

我认为您正在寻找一种通用策略来处理 ajax 请求，这取决于您

例如[服务器端 Ajax](http://borkweb.com/story/a-simple-server-side-ajax-handler)

除非您使用的是特定框架（CI、yii 等）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-08T11:14:42.110

您可能想研究一些框架，因为它们可以使您无限容易地实现它：

[http://demo.atk4.com/demo.html?t=20](http://demo.atk4.com/demo.html?t=20)

# android - 如何从我的活动中拨打服务菜单的密码？

> ID：10011013
> 
> 赞同：1
> 
> 时间：2012-04-04T12:22:48.680
> 
> 标签：android, uri

如果我从普通拨号器拨打此代码，*#*#197328640#*#* 它会将我带到 android 的服务菜单，但是当我从我的活动中拨打它时，它会说“USSD 代码被拒绝”，我正在使用ACTION_CALL 在意图中使用 URL String = "tel:XXXXXXXXXX"（其中 XXXX 是代码）...我想知道如何从我的活动中打开服务？

# ajax - 在本地重新创建跨域问题

> ID：10011015
> 
> 赞同：0
> 
> 时间：2012-04-04T12:22:56.060
> 
> 标签：ajax, spring, http, https, cross-domain

我们在 java 中开发了一个应用程序，后端有 springs，前端有 j 查询，在我们的本地运行良好，但是当移动到客户端测试环境时，他们在 Internet Explorer 中面临安全风险警告。它说“此页面包含不受其控制的信息。这会带来安全风险。您要继续吗？” 但在我们当地的环境中，我们从未遇到过这样的问题。该应用程序在每个页面上都有很多 AJAX 调用来加载数据，并不是在所有页面中都会出现错误。只有在某些页面中，客户才会出现错误。我们需要在本地重新创建问题，以便分析根本原因并修复。这里的任何人都可以帮助我如何在本地重新创建跨域问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T08:52:40.003

当您的网络位于 hpps（https url）下但浏览器正在调用 http 以加载部分内容（ajax、图像等）时，问题就出现了。您页面中的所有引用都应该是 https 以避免 IE 中的警报。恐怕没有别的办法了。亲戚 url 将避免您从一个环境到另一个环境从 http 更改为 https。

# c# - 以纯文本形式提供 WCF 服务的 VS 开发服务器

> ID：10011021
> 
> 赞同：1
> 
> 时间：2012-04-04T12:23:23.150
> 
> 标签：c#, .net, wcf

每当我在浏览器中加载 WCF 以查看其是否正常工作时，我都会以纯文本形式获取 .svc 源，例如：

```
<%@ ServiceHost Language="C#" Factory="System.Data.Services.DataServiceHostFactory, System.Data.Services, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" Service="serv.Stocks" %> 
```

而不是正常的输出。但是，如果我将它托管在 IIS 中，则不会发生这种情况。

我尝试成功地重现它，创建一个只有 wcf 服务的全新解决方案，所以我不认为解决方案中的其他问题会导致问题。

我在 Windows 7 中使用 VS 2010。有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T12:54:55.293

您是否有可发布的元数据？

我的意思是这样的端点：

```
<endpoint address="mex"
              binding="mexHttpBinding"
              contract="IMetadataExchange" /> 
```

和这样的行为：

```
<services>
  <service
      name="Metadata.Example.SimpleService"
      behaviorConfiguration="SimpleServiceBehavior">
    ...
  </service>
</services>
<behaviors>
  <serviceBehaviors>
    <behavior name="SimpleServiceBehavior">
      <serviceMetadata httpGetEnabled="True" policyVersion="Policy15" />
    </behavior>
  </serviceBehaviors>
</behaviors> 
```

没有更多可去的地方，我不知道还有什么建议？

# iphone - 如何从通讯录中删除联系方式

> ID：10011024
> 
> 赞同：0
> 
> 时间：2012-04-04T12:23:29.013
> 
> 标签：iphone

我有一个项目，我想删除特定人的通讯录的联系方式......点击按钮......

我尝试修改、添加和编辑记录，并且成功但无法删除记录..

请帮助我...谢谢...提前

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T12:28:11.397

use ABAddressBookRemoveRecord

refer to:- [https://developer.apple.com/library/ios/#documentation/AddressBook/Reference/ABAddressBookRef_iPhoneOS/Reference/reference.html](https://developer.apple.com/library/ios/#documentation/AddressBook/Reference/ABAddressBookRef_iPhoneOS/Reference/reference.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T12:28:27.067

You need to use [ABAddressBookRemoveRecord](http://developer.apple.com/library/ios/#documentation/AddressBook/Reference/ABAddressBookRef_iPhoneOS/Reference/reference.html#//apple_ref/c/func/ABAddressBookRemoveRecord)

# mono - 如何在 Linux mono 的程序集中获取文件 + 行信息调试信息

> ID：10011026
> 
> 赞同：2
> 
> 时间：2012-04-04T12:23:38.663
> 
> 标签：mono, debian

我在 Linux 单声道程序集中出现异常异常。

```
Unhandled Exception: System.ObjectDisposedException: The object was used after being disposed.
at System.Net.Sockets.Socket.ReceiveAsync (System.Net.Sockets.SocketAsyncEventArgs e) [0x00000] in <filename unknown>:0
at cloudBus.TCPConnection.Receive () [0x0003d] in /home/xyz/cloudBus/TCPServer.cs:26
... 
```

我想获取 ReceiveAsync 的行号和文件名。我确实使用-debug 标志编译并使用--debug 执行。我还从 Git 获得了完整的单声道并重新编译它，但我无法获得调试信息。

使用什么选项来获取异常行信息？我认为这是单声道制作选项，但找不到。

找到后我会尝试修复这个错误，只能在 Linux 上重现，并报告更正。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T16:04:39.057

如果您想在 git HEAD 版本上跟踪此问题，您可以[从 source 构建 Mono 。](http://mono-project.com/Compiling_Mono_From_Git)

另一方面，Debian 也应该有 Mono 的调试/开发版本，这将为您提供已安装版本的调试信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T07:37:04.553

我已经找到。

要使用调试信息构建框架，请在文件 mono/mcs/build/config.make 中

添加行

MCS_FLAGS = -调试

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T08:19:49.083

在 Debian 上，软件包 mono-dbg 提供 System.* 的调试信息。对于您自己的代码，请查看[带有 debian 异常的单声道调试信息？](https://stackoverflow.com/questions/5317343/mono-debug-information-with-exceptions-on-debian).

# video-streaming - 从摄像头捕获、从流中捕获、在网页上合并和广播

> ID：10011027
> 
> 赞同：0
> 
> 时间：2012-04-04T12:23:39.363
> 
> 标签：video-streaming, processing, quartz-graphics

我目前正在为一个名为 God is a DJ 的项目工作，该项目将在蒙特利尔双年展和 mai 11 日、12 日、18 日和 19 日的日内瓦制图节上展出。insan-ë 公司有兴趣将技术引入表演艺术，并在蒙特利尔和瑞士日内瓦举办一场演出。如果你有兴趣，你可以检查一下。该应用程序使用通过风景从一个地方到另一个地方的流式视频，视频合成和映射将在 mixologic 中完成，这两个应用程序都是在蒙特利尔的 SAT 开发的。我做更基本的开发、MIDI 接口、机器设置，还有这个。我们希望在每个剧院使用独立的摄像机在线流式传输整个内容。

**问题：**

我需要构建的应用程序将执行以下操作（实际上非​​常简单）：从蒙特利尔获取流，从相机捕获，并排放置两个图像（控制延迟将是一个很好的选择），混合声音，并将其流式传输以通过访问网页进行查看。我首先想到的是通过 JAVA 和 Processing（主要是因为我想做更多的处理，而且我不太喜欢可视化编程），但我想 qc 可能是最好的选择。但是，到目前为止，我发现质量控制方面的文档很差。我也想到了 Threenodes.js，因为它可能更容易

无论如何，如果您能为此指明正确的方向，我将不胜感激。我不是一个经验丰富的程序员，我想到了太多的可能性，却不知道每种可能性的能力或局限性。

任何建议表示赞赏！谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T13:10:12.683

您可以使用简单的 HTML 创建一个网页，其中两个视频播放器组件并排放置（使用[“视频”标签](http://www.w3schools.com/html5/tag_video.asp)或通过“对象”标签的其他播放器），一个播放来自蒙特利尔的流，另一个播放来自蒙特利尔的流本地拍摄的视频。蒙特利尔部分可能已经在使用流媒体服务器，因此您可以将其用于本地流媒体，或者尝试使用[VLC 之类的东西](http://www.videolan.org/vlc/streaming.html)

页面加载后，两个播放器将开始独立流式传输，并且它们的音频将由操作系统正常混合。用户还可以通过每个视频播放器的音量滑块来控制音量。（恐怕在这种情况下没有延迟控制：-（当然除了本地相机和图像采集卡之间有延迟硬件）

如果您现在想处理这两个流并显示处理后的流，那将会更加复杂，因为您必须编写一个包含两个播放器对象的程序，并且能够在它们解码的每一帧上触发一个事件（那就是不是问题，您可以用任何语言轻松找到此类组件）。

在该处理程序中，您可以获得图像和声音流，进行处理并创建混合帧，这些帧现在必须被编码并作为流通过网络发送。最后一部分并不简单。解决这个问题的最简单方法是让您的应用程序全屏显示并在您的计算机主屏幕上绘制它所绘制的任何内容。您现在可以从显卡中获取此输出并将其作为输入传递给图像采集卡。然后，您可以设置视频流服务器（例如 VLC，如上所述）以广播帧捕获器的此输入。

您现在可以通过 HTML 页面内的播放器访问此组合视频，如上所述。

使用此解决方案，您当然可以控制代码中的所有内容（包括延迟）......

就 Processing.org 而言，请查看[http://processing.org/reference/libraries/video/index.html](http://processing.org/reference/libraries/video/index.html)以了解解码视频流的组件

# android - 如何捕捉拨号盘按下按钮的值？

> ID：10011029
> 
> 赞同：0
> 
> 时间：2012-04-04T12:23:46.120
> 
> 标签：android, call, sip

我正在开发一个用于拨打和接听电话的 SIP 应用程序。为此，我对开源项目[SipDroid](http://code.google.com/p/sipdroid/)进行了分析。在该项目中，他们如何捕获`dialpads`发送到特定方法以进行 SIP 呼叫的按下按钮的值。

我试图找到该任务的代码，但我没有得到任何东西。代码驻留在哪个文件中以在[SipDroid](http://code.google.com/p/sipdroid/)项目中捕获该值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T12:38:55.937

拨号盘值称为 DTMF（双音多频信令）。

大多数 SipDroid 的 DTMF 内容都在[dtmf.h](http://code.google.com/p/sipdroid/source/browse/trunk/jni/spandsp/spandsp/dtmf.h)中。

您可以[搜索源代码](http://code.google.com/p/sipdroid/source/search?q=dtmf&origq=dtmf&btnG=Search%20Trunk)以查看它的使用位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T15:26:21.120

SipDroid 中的调用由 SipdroidEngine 处理：

```
org.sipdroid.sipua.SipdroidEngine 
```

处理初始操作的方法是带签名`public boolean call(String target_url,boolean force)`的——它将调用转移到 SipDroid UserAgent 类等等，直到它到达网络传输层。只需检查整个项目中这个调用方法的引用，看看它在哪里使用。

# java - 如何控制线程是否停止或运行时间过长？

> ID：10011030
> 
> 赞同：0
> 
> 时间：2012-04-04T12:23:46.783
> 
> 标签：java, eclipse, multithreading

我是 Java 新手，有一个任务要找出，为什么运行一段时间后服务器会占用 100% 的 CPU。我想我应该看看，线程在这个应用程序中做了什么。由于我想停止服务，第 5605 个线程已经启动。如何控制哪些线程停止或不停止，或运行时间过长？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T12:26:08.967

服务器和客户端 jvm（Java 虚拟机）是不同的。客户的想法基本上是“您将成为尝试使用相同资源的其他人中的一员”。服务器的想法是“去吧，你有自己的游乐场”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T12:40:16.297

如果您在 *nix 环境中，请先尝试查找进程 ID

1.  获取进程 ID。ps -ef | grep “java”
2.  获取线程转储。杀死 -3 进程ID
3.  查看服务器日志那里有哪些线程，如果有任何“阻塞”线程，那么它们就是罪魁祸首。查看堆栈跟踪，它可能会提供一些线索。

# python - 了解 python 记忆装饰器中的参数处理

> ID：10011035
> 
> 赞同：7
> 
> 时间：2012-04-04T12:24:15.417
> 
> 标签：python, decorator, memoization

我一直在使用这个出色的装饰器进行记忆，这是我在网上找到的（此处以斐波那契数列为例）：

```
def memoize(f):
    cache= {}
    def memf(*x):
        if x not in cache:
            cache[x] = f(*x)
        return cache[x]
    return memf

@memoize
def fib(n):
    if n==1 or n==0:
        return 1
    return fib(n-2) + fib(n-1)

print fib(969) 
```

现在我想更好地理解内部工作原理，我还没有通过阅读 Python 中的装饰器或参数处理找到答案。

为什么每次调用装饰函数时都没有重新初始化缓存字典？

*x 如何被识别为发送给修饰函数的参数，即函数调用 fib(969) 中的 969？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-04T12:30:44.843

装饰器只被调用一次，在装饰函数第一次定义之后。因此，这两种技术（使用 @wrap 和 bar = wrap(bar)）是相同的：

```
>>> def wrap(f):
...     print 'making arr'
...     arr = []
...     def inner():
...         arr.append(2)
...         print arr
...         f()
...     return inner
...     
>>> @wrap
... def foo():
...     print 'foo was called'
...     
making arr
>>> foo()
[2]
foo was called
>>> foo()
[2, 2]
foo was called
>>> def bar():
...     print 'bar was called'
...     
>>> bar = wrap(bar)
making arr
>>> bar()
[2]
bar was called 
```

在这两种情况下，很明显 arr 仅在调用 wrap(f) 时创建，而 wrap 仅在首次声明 foo 和 bar 时调用。

至于将参数传递给装饰函数的情况，请记住装饰器将*函数*作为参数并返回该函数的修改版本。因此，装饰器通常采用一个参数，即它正在修改的函数。它返回一个新函数，装饰器可以将它返回的函数定义为接受任意数量的参数（例如，*args）。装饰器甚至可以返回一个为其装饰的方法接受太多参数的函数。

```
>>> def wrap_with_arg(f):
...     def wrap(*args):
...         print 'called with %d arguments' % len(args)
...         f(args)
...     return wrap
...     
>>> @wrap_with_arg
... def baz(arg):
...     print 'called with argument %r' % arg
...     
>>> baz(3)
called with 1 arguments
called with argument 3
>>> baz(3, 4)
called with 2 arguments
Traceback (most recent call last):
  File "<input>", line 1, in <module>
  File "<input>", line 4, in wrap
  File "<input>", line 3, in baz
TypeError: not all arguments converted during string formatting 
```

虽然最终 baz 会引发错误，但请注意在引发错误之前如何正确打印参数的数量。

# c++ - 类模板内静态数据的初始化顺序

> ID：10011039
> 
> 赞同：3
> 
> 时间：2012-04-04T12:24:27.787
> 
> 标签：c++, templates, static, initialization, static-initialization

```
// File: InitFirst.h

#pragma once

template <int val>
struct InitFirst
{
    static float s_dividedByThree;
};

template <int val>
float InitFirst<val>::s_dividedByThree = val / 3.0; 
```

* * *

```
// File: Test.h

#include <conio.h>
#include <tchar.h>

#include "InitFirst.h"

float g_shouldBeOneThird = InitFirst<1>::s_dividedByThree;

int _tmain(int argc, _TCHAR* argv[])
{
    _cprintf("%f\n", g_shouldBeOneThird);
    getch();
    return 0;
} 
```

g_shouldBeOneThird 是否保证初始化为 0.333 左右？换句话说，静态初始化的 InitFirst<1>::s_dividedByThree 是否保证在用于静态初始化 g_shouldBeOneThird 时被初始化？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T12:31:00.600

从标准（3.6.2）：

> 具有静态存储持续时间（3.7.1）的对象应在任何其他初始化发生之前进行零初始化（8.5）。具有静态存储持续时间的引用和具有静态存储持续时间的 POD 类型的对象可以使用常量表达式（5.19）进行初始化；这称为常量初始化。零初始化和常量初始化合称为静态初始化；所有其他初始化都是动态初始化。静态初始化应在任何动态初始化发生之前执行。对象的动态初始化是有序的或无序的。显式专门化的类模板静态数据成员的定义已排序初始化。其他类模板静态数据成员（即，隐式或显式实例化的特化）具有无序初始化。命名空间范围内定义的其他对象已按顺序初始化。在单个翻译单元中定义并具有有序初始化的对象应按照它们在翻译单元中的定义顺序进行初始化。对于具有无序初始化的对象和在不同翻译单元中定义的对象，初始化的顺序是未指定的。

在您的情况下，由于您使用`float InitFirst<val>::s_dividedByThree`常量表达式进行初始化，因此这将在任何动态初始化（fx `float g_shouldBeOneThird`）之前发生。虽然我感觉这个简化的示例可能是对您进行动态初始化的情况的简化，但相关部分是：“在单个翻译单元中定义并具有有序初始化的对象应按照它们在翻译单位。”。

有一个技巧可以确保全局变量（有点）在您使用它们时被初始化。诀窍是将它们保留为全局函数中的静态局部变量。由于局部静态变量在第一次被访问时被初始化，初始化顺序不再是问题：

```
template <int val>
struct InitFirst
{
    static float & s_dividedByThree();
};

template <int val>
float & InitFirst<val>::s_dividedByThree(){
    static float staticVariable = val / 3.0;
    return staticVariable;
} 
```

**然后，您几乎**可以像以前一样访问这些变量：

```
float g_shouldBeOneThird = InitFirst<1>::s_dividedByThree(); 
```

但请注意，局部静态变量的初始化在多线程下是不安全的（在标准中它们不应该是安全的）。如果这对您来说是一个问题，您可能希望使用一些锁来保护初始化。编译器当然可以生成安全代码，这是 gcc 默认所做的（可能其他人也是如此）。

# jsf - JSF 中 JSTL 标记的替代方案

> ID：10011040
> 
> 赞同：4
> 
> 时间：2012-04-04T12:24:28.963
> 
> 标签：jsf, if-statement, jstl

我想在我的数据表中使用条件 CSS。这是我的代码。

```
 <ui:repeat var="myVar" value="#{bean.list}" varStatus="row">
        <c:if test="#{row.index % 2 == 0}">
            <c:set value="RowColorGrid" var="rowClass"></c:set>
            <c:set value="ArticleColor" var="articleClass"></c:set>
        </c:if> 
        <c:if test="#{row.index % 2 != 0}">
            <c:set value="RowColorGrid2" var="rowClass"></c:set>
            <c:set value="ArticleColor2" var="articleClass"></c:set>
        </c:if>
    <tr>
       <td> Some value </td>
       <td class = "#{articleClass}">
           <h:dataTable id="myId" value="#{bean.value}" var="myVO" width="100%"
                    rowClasses="#{rowClass}">

                         ----Some code---
           </h:datatable>
      </td>
 </ui:repeat> 
```

但是在 JSF 中我不想使用 JSTL 标签。还有其他选择吗？使用 JSF 的某些组件？？？

我想在 td 中使用一个类，在数据表的行类中使用一个。

提前致谢。塔伦·马丹

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-04T12:43:35.423

在您的具体情况下，您可以尝试类似

```
rowClasses="#{(row.index % 2 == 0)?'RowColorGrid':'RowColorGrid2'}" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T12:31:12.657

为什么不在托管 bean 中检查服务器端？

然后，您将“rowClass”属性返回为：

```
String getRowClass() {
  [your checks]
  return rowClass;
} 
```

# asp.net - 下拉列表对象数据源

> ID：10011056
> 
> 赞同：0
> 
> 时间：2012-04-04T12:25:26.080
> 
> 标签：asp.net, drop-down-menu, objectdatasource

我有一个连接到对象数据源的下拉列表。如何获得 DataValueField=TypeId ？我使用 onselectedindexchanged 来获取选定的类型，我怎样才能对 TypeId 做同样的事情？

```
 <asp:DropDownList ID="DropDownList" runat="server"  
 DataSourceID="ObjectDataSource" DataTextField="Type"  
 DataValueField="TypeId" AutoPostBack="true"  
 onselectedindexchanged="DropDownList_SelectedIndexChanged">
                        </asp:DropDownList> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T12:27:44.707

不确定我是否理解....你想获得选定的值吗？在这种情况下，这是你必须做的

```
string typeId = DropDownList.SelectedValue 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T12:28:43.800

要获取值：

```
int id = int.Parse(DropDownList.SelectedValue); 
```

# c# - 如何通过 ac# 应用程序调用带有 UI 的外部 Windows 应用程序？

> ID：10011058
> 
> 赞同：0
> 
> 时间：2012-04-04T12:25:27.153
> 
> 标签：c#, web-services, dynamic-data-exchange

我们有一个带有 GUI 的程序 ( **A.exe** ) 和一个工具栏，它用一些文本来处理 NLP 内容。在那个工具栏中，我们有*函数 A*，它通过添加一些 xml 标签来转换文本。*这里有人*（老板）希望我创建一个 Web 服务调用*函数 A*。它告诉我[动态数据交换](http://office.microsoft.com/fr-ca/access-help/dde-fonction-HA001228819.aspx?CTT=3)（他几年前使用过），我看到了类似[SendMessage](http://msdn.microsoft.com/en-us/library/ms644950%28VS.85%29.aspx)的东西。

Web 服务将被 Internet 上的某个人使用：发送文本并以*xml*格式获取结果。当有人调用WS时GUI程序无法启动，因为它太慢了，所以*有人*建议一次性启动这个**A.exe**，WS会通过发送DDE调用来询问这个**A.exe 。**我不知道**A.exe**在并发调用的情况下会如何反应。

网络服务将：

1.  将文本文件保存在目录中
2.  调用**A.exe**
3.  **A.exe**将计算文本文件并创建 xml 文件
4.  WS 将循环直到 xml 文件存在
5.  WS 将获取 xml 并将其作为流发送给原始调用者

我想指出：

1.  DDE 很旧，似乎需要一个支持 DDE 服务器的程序。
2.  SendMessage 有点晦涩，因为我是一名 Java 开发人员。
3.  我没有按照建议尝试*命名或匿名管道*进行调用。

谢谢你。

PS：用UI来构建WS调用服务端程序是异端吧？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T12:32:49.937

这个问题的答案实际上取决于您要完成的工作。您的函数是否更改来自外部数据源（如数据库）的数据，或者您是否在应用程序中调用函数？

我将从以下问题开始。

1）按钮的作用是什么？它的功能可以移动到服务中并在多个应用程序之间共享吗？

2）你能把功能放在一个DLL中并在两个应用程序之间共享吗？

3）这两个应用程序真的需要相互通信吗？

如果两个进程必须相互通信，而您只希望应用程序 A 响应来自应用程序 B 的消息，请考虑使用命名管道进行 TCP/IP 通信。这在 .NET 中非常简单，并提供了进程之间的快速通信。

**更新：** 这里是使用命名管道信息的链接：http: [//msdn.microsoft.com/en-us/library/bb546085.aspx](http://msdn.microsoft.com/en-us/library/bb546085.aspx)。

**更新 2：**这是您更新问题后的更新。您可以访问 A.exe 的源代码吗？如果这样做，您有两个选择：1) 将该逻辑移动到您的服务中或 2) 修改 A.exe 以接受命令行参数，以便您的服务可以调用该过程并返回结果。如果您没有源代码并且无法从命令行调用 A.exe，那么除了您自己以您的 Web 服务可以调用的形式编写该过程之外，您无能为力。

PS 你不必担心并发调用，因为每个服务器请求都会执行一个单独的进程。

# delphi - 如何在 Delphi 中制作泛型/模板函数

> ID：10011063
> 
> 赞同：0
> 
> 时间：2012-04-04T12:25:46.837
> 
> 标签：delphi, templates, delphi-xe2

嗨，我需要一些帮助来创建模板函数（如果我是正确的，它们在 c++ 中是已知的）。我正在使用 Delphi XE2，并且正在使用 MS Access 数据库编写数据库应用程序。

问题是我写的很多函数在不同的表上做同样的事情。所以我认为我可以创建模板函数，然后为不同的表使用不同的参数。

例如，有`Locate`在表或查询中定位特定记录的函数。现在我想为此制作一个模板功能，但我不知道该怎么做。

我想把函数放在我的数据模块的公共部分，所以我在想这个

```
function find(tableName: TADOTable, fieldName: String, fieldValue: String):Boolean 
```

然后...

```
function TDataModule.find(tableName: TADOTable, fieldName: String, fieldValue:String): Boolean;
var SearchOptions : TLocateOptions;
 begin
  SearchOptions := [loCaseInsensitive]; 
  find := DataModule.tableName.Locate('fieldName', fieldValue, SearchOptions);
 end; 
```

但这不想编译...

有什么方法可以制作某种模板函数，我可以将任何表作为参数传递，或者使用 getter 和 setter 函数为每个表创建一个类会更好吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T15:10:01.810

```
function TDataModule2.LocateData(AADOTable: String; AKeyFields: String; 
  AKeyValues: Variant; Options: TLocateOptions): Boolean;
var
  oComp: TComponent;
begin
  Result := False;
  oComp := FindComponent(AADOTable);
  if (oComp is TADOTable) and (oComp as TADOTable).Active then
    Result := (oComp as TADOTable).Locate(AKeyFields, AKeyValues, Options);
end; 
```

# javascript - 创建一个 element with content fails on IE7 and IE8 (jQuery)

> ID：10011064
> 
> 赞同：1
> 
> 时间：2012-04-04T12:25:53.927
> 
> 标签：javascript, jquery, internet-explorer-7

I've seen several threads about reading contents, but nothing on *writing* to noscript.

```
$('body').append('<noscript><div></div></noscript>'); 
```

In Chrome and IE9 I get a noscript-element with a empty div inside like I expect, but in IE7 and IE8 I just get a empty noscript-element without the div inside.

Example: [http://jsfiddle.net/cEMNS/](http://jsfiddle.net/cEMNS/)

Is there a way to add HTML inside the noscript-tag that works in all browsers? What I need is to add some tracking code into a noscript-element at the end of the page, but the info I need isn't available until after document ready.

**Edit:** I'm getting a lot of comments on "why". It's some poorly done tracking library that requires this. We don't have access to the code to change it. Regardless, I find it interesting that it works in some browsers and not in others since jQuery was supposed to work equally in all browsers. Is it simply a bug?

**Edit2:** (2 years later) Adding a noscript on the browser doesn't make sense, I know. My only excuse not the question the task I had was because of lack of sleep, like everyone else in the project. But my rationale was that jQuery should behave the same on all browsers and someone might want to do this on the server.

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-04T13:09:08.140

无论跟踪代码如何，您正在做的（或被要求做的）都是没有意义的！

为什么？这里可能有两种情况：

*   用户启用了 JavaScript，在这种情况下 NOSCRIPT get 被插入到 DOM 中，但被浏览器忽略（什么都不做）
*   用户没有启用 JavaScript，没有插入 NOSCRIPT 也没有“执行”

这两种情况的最终结果是实际上什么都没有发生。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T13:15:36.810

只是一个想法：您可以尝试为您的`noscript`标签提供一个 ID，然后尝试使用本机 js。例如：

```
$('body').append('<noscript id="myTestNoScript"></noscript>');
document.getElementById('myTestNoScript').innerHTML = '<div></div>'; 
```

我会声称，如果它不适用于本机 js，它将不适用于任何库（请随时纠正我的这个问题）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T13:33:48.487

我尝试了以下简单的 HTML 代码：

```
 <html>
    <body>
        <noscript>I'm a noscript tag.</noscript> 
    </body>
</html> 
```

然后我确实用 IE8（在 IE7 模式下）和他的集成代码检查器对此进行了分析。显然 IE7 检查是脚本允许的。如果是这样，他宣布它为空。空标签将被忽略。不幸的是，我无法尝试禁用脚本选项，因为只有系统管理员可以更改设置（在我的工作中）。我可以向你保证，noscript 确实存在。如果你添加

```
alert($('noscript').size()); 
```

创建后，结果将为 1。

# google-app-engine - How to query for direct childs of entity in GAE Datastore(HRD)?

> ID：10011066
> 
> 赞同：2
> 
> 时间：2012-04-04T12:26:03.157
> 
> 标签：google-app-engine, google-cloud-datastore

We can get all children of y (including indirect), by X.all().ancestor(y), but I want to receive only those which are direct children of y.

Is there any way to do it?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T12:31:35.027

尝试：

```
X.all().filter("parent = ", y) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-05T22:41:14.393

使用 Datastore [Query() ，您可以使用](https://cloud.google.com/appengine/docs/java/javadoc/com/google/appengine/api/datastore/Query)[setAncestor()](https://cloud.google.com/appengine/docs/java/javadoc/com/google/appengine/api/datastore/Query#setAncestor(com.google.appengine.api.datastore.Key))方法设置其祖先，但它不保证祖先是直接父级。

您可以通过执行比较操作来确保仅获取直接子级。

```
if( directChildEntity.getKey().getParent().equals( directParentEntity.getKey() ) )
        {
        // directChildEntity is a direct child of directParentEntity
        } 
```

诀窍是使用 Datastore [Key 的 getParent()](https://cloud.google.com/appengine/docs/java/javadoc/com/google/appengine/api/datastore/Key#getParent())方法，因为它可以调解键之间的一步层次结构。

# download - Download button in yii code

> ID：10011072
> 
> 赞同：0
> 
> 时间：2012-04-04T12:26:37.210
> 
> 标签：download, yii

I want the button of download in yii framework when i click on that button then new pop up window will open for to ask to open or save .. plz help me sooon thank you so much....

I have tried like this but it will open in new window only i cant download...

```
echo "<b>".$data->job_related_file->srvr_name."</b> (".CHtml::link("<b>Download</b>",$downloadLink,array('target'=>'_blank')).")"; 
```

![enter image description here](../Images/3d787892223cddc821d669e6c92cc2ec.png)

When I click on word button then see this image

![enter image description here](../Images/a8ea2584b6063fdad69997baa0735186.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T12:50:29.553

您需要在控制器中添加 //action

```
function actionDownload($name){
  $filecontent=file_get_contents('path_to_file'.$name);
  header("Content-Type: text/plain");
  header("Content-disposition: attachment; filename=$name");
  header("Pragma: no-cache");
  echo $filecontent;
  exit;
} 
```

//下载链接在视图中

```
echo "<b>".
  $data->job_related_file->srvr_name."</b> (".
   CHtml::link("Download","CONTROLLER/download/$filename",
      array('class'=>'donwload_link')
   )
  .")"; 
```

我还没有测试过，让我知道这是否有效

# php - 数组到 where 语句

> ID：10011075
> 
> 赞同：2
> 
> 时间：2012-04-04T12:26:58.300
> 
> 标签：php, arrays

我想看看用 PHP 数组创建 where 语句的最佳方法

```
$array = array (
  0 => array (
    'host' => 'aol.com',
    'type' => 'A',
    'ip' => '64.12.89.186',
    'class' => 'IN',
    'ttl' => '2466'
  ),
  1 => array (
    'host' => 'aol.com',
    'type' => 'A',
    'ip' => '205.188.100.58',
    'class' => 'IN',
    'ttl' => '2466'
  ),
  2 => array (
    'host' => 'aol.com',
    'type' => 'A',
    'ip' => '205.188.101.58',
    'class' => 'IN',
    'ttl' => '2466'
  ),
  3 => array (
    'host' => 'aol.com',
    'type' => 'A',
    'ip' => '207.200.74.38',
    'class' => 'IN',
    'ttl' => '2466'
  ),
  4 => array (
    'host' => 'aol.com',
    'type' => 'A',
    'ip' => '64.12.79.57',
    'class' => 'IN',
    'ttl' => '2466'
  ),
  5 => array (
    'host' => 'aol.com',
    'type' => 'NS',
    'target' => 'dns-01.ns.aol.com',
    'class' => 'IN',
    'ttl' => '2466'
  ),
    '6' => 'array (',
    'host' => 'aol.com',
    'type' => 'NS',
    'target' => 'dns-07.ns.aol.com',
    'class' => 'IN',
    'ttl' => '2466'
  ),
  7 => array (
    'host' => 'aol.com',
    'type' => 'NS',
    'target' => 'dns-06.ns.aol.com',
    'class' => 'IN',
    'ttl' => '2466'
  ),
  8 => array (
    'host' => 'aol.com',
    'type' => 'NS',
    'target' => 'dns-02.ns.aol.com',
    'class' => 'IN',
    'ttl' => '2466'
  ),
  9 => array (
    'host' => 'aol.com',
    'type' => 'SOA',
    'mname' => 'dtc-ext3.edns.aol.com',
    'rname' => 'hostmaster.aol.net',
    'serial' => '352455322',
    'refresh' => '43200',
    'retry' => '180',
    'expire' => '2592000',
    'minimum-ttl' => '300',
    'class' => 'IN',
    'ttl' => '1691'
  ),
  10 => array (
    'host' => 'aol.com',
    'type' => 'MX',
    'pri' => '15',
    'target' => 'mailin-04.mx.aol.com',
    'class' => 'IN',
    'ttl' => '2466'
  ),
  11 => array (
    'host' => 'aol.com',
    'type' => 'MX',
    'pri' => '15',
    'target' => 'mailin-01.mx.aol.com',
    'class' => 'IN',
    'ttl' => '2466'
  ),
  12 => array (
    'host' => 'aol.com',
    'type' => 'MX',
    'pri' => '15',
    'target' => 'mailin-02.mx.aol.com',
    'class' => 'IN',
    'ttl' => '2466'
  ),
  13 => array (
    'host' => 'aol.com',
    'type' => 'MX',
    'pri' => '15',
    'target' => 'mailin-03.mx.aol.com',
    'class' => 'IN',
    'ttl' => '2466'
  ),
  14 => array (
    'host' => 'aol.com',
    'type' => 'TXT',
    'txt' => 'v=spf1 ptr:mx.aol.com ?all',
    'class' => 'IN',
    'ttl' => '2465'
  ),
  15 => array (
    'host' => 'aol.com',
    'type' => 'TXT',
    'txt' => 'spf2.0/pra ptr:mx.aol.com ?all',
    'class' => 'IN',
    'ttl' => '2465'
  )
); 
```

这是我的数组，我想在 EX type = NS 上创建一个 where 语句，依此类推，然后将所有内容传递给要显示的变量。

请注意，如果我不回复评论/问题，我将在接下来的几个小时内关闭我的互联网进行维修。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T12:42:19.930

你在使用[dns_get_record](http://php.net/dns_get_record)吗？如果是这样，第二个参数会限制返回的记录类型，因此您可以使用它`DNS_NS`来过滤您的示例。否则使用[array_filter](http://php.net/array_filter)：

```
$wantedType = 'NS';

var_dump(array_filter($records, function($record) use ($wantedType) {
    return ($record['type'] === $wantedType);
})); 
```

您可以进一步概括这一点：

```
// expand as necessary
$requirements = array(
    'type' => 'NS',
);

var_dump(array_filter($records, function($record) use ($requirements) {
    // only include if all the requirements match
    return (array_intersect($requirements, $record) == $requirements);
})); 
```

或按类型分组：

```
$groupedRecords = array();

foreach ($records as $record) {
    if (!array_key_exists($record['type'], $groupedRecords)) {
        $groupedRecords[$record['type']] = array();
    }

    $groupedRecords[$record['type']][] = $record;
}

// $groupedRecords now contains all records nested by record type 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T12:36:06.423

```
$param = array();
$content = array();
foreach ($mainArray as $item) {
  foreach ($item as $key=>$value) {
   $params[] = "AND $key = ?";
   $content[] = $value;
  }
}

$sql = "SELECT .... WHERE " . implode($params, ' ');
$statement = // Create prepared statement with $sql
execute($statement, $content); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T14:05:50.687

如果您可以通过 DAL 访问准备好的语句，我会选择 Churk 的解决方案。否则，我经常发现自己在构建查询时看起来像这样（使用您的 $array 格式）：

```
foreach ( $array as $query_key => $conditions ) {
  $query = array();
  $query[] = 'select * from XXX';
  $query[] = 'where ((1=1)';
  foreach ( $conditions as $key => $value ) {
    $query[] = 'and ' . $key . ' = \'' . $value '\''; 
  }
  $query[] = ')';
  $query = implode(PHP_EOL, $query);
  echo $query, PHP_EOL;
} 
```

这里的“技巧”是以“（1 = 1）”开头的where子句，这始终是正确的，然后所有以下相等条件都可以以“AND ...”开头。

干杯

# c# - 圆形双顶 - C#

> ID：10011079
> 
> 赞同：1
> 
> 时间：2012-04-04T12:27:28.707
> 
> 标签：c#, math, double, rounding

我有一个像 1,01 这样的双数，当它供过于求时我想把它变成 2？

```
double number1 = 1,01
double number2 = 1,1
double number3 = 1,00000001 
```

这些必须是 2

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-04T12:29:07.530

```
double roundedUp = Math.Ceiling(number); 
```

# c++ - C++ Framework for creating servers?

> ID：10011083
> 
> 赞同：0
> 
> 时间：2012-04-04T12:27:36.400
> 
> 标签：c++, io

What is (are) modern frameworks for async IO, threading, etc. on C++?

I'am familiar with [ACE](http://www.cs.wustl.edu/~schmidt/ACE-overview.html) but it was long ago, what is the the weapon of choice now?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T12:29:14.653

[BOOST 库](http://www.boost.org/)呢？它似乎是目前最普遍的选择。

它具有内置的[线程](http://www.boost.org/doc/libs/1_49_0/doc/html/thread.html)和[ASYNC-IO](http://www.boost.org/doc/libs/1_49_0/doc/html/boost_asio.html)以及许多更多的库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T12:45:48.683

Poco C++ 框架及其网络库： http: [//pocoproject.org/documentation/index.html](http://pocoproject.org/documentation/index.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-07-04T06:29:47.917

试试[Pulsar 服务器框架](https://www.pulsarframework.com/)。主要好处是它建立在 libuv 网络库（由 node.js 使用）之上，该库使用基于事件循环的异步 I/O。框架

1.  它是完全可扩展的。随着用户群的增加，您可以添加服务器。

2.  它旨在与服务器场一起使用。

3.  高度可配置且易于使用

目前它已经为 Windows x64 服务器构建。

# android - Android ratingbar size (cant use Widget.RatingBar.Small)

> ID：10011085
> 
> 赞同：4
> 
> 时间：2012-04-04T12:27:49.890
> 
> 标签：android, xml, size, custom-component

Helo,

I've created a custom ratingbar by using to following tutorial: [http://kozyr.zydako.net/2010/05/23/pretty-ratingbar/](http://kozyr.zydako.net/2010/05/23/pretty-ratingbar/)

But now i want to resize my custom rating stars to smaller stars..

i got:

```
 <style name="orangeRatingBar" parent="@android:style/Widget.RatingBar">
           <item name="android:progressDrawable">@drawable/orange_ratingbar</item>
           <item name="android:minHeight">14dip</item>
           <item name="android:maxHeight">14dip</item>
        </style> 
```

When i set the minHeight and the maxHeight i see only part of the stars.. The star image is 14px height and 14 width. Why do i only see a part of the image when i set the minheight 14px or 14dip.. When i set it on 19dip i see the whole star..

How can i create smaller stars (the size of default small ratingBar)?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-12-30T09:25:33.557

对于您的评分栏中的自定义星大小，请在 XML 中使用此标记-

对于小-`style="?android:attr/ratingBarStyleSmall"`

对于大`style="?android:attr/ratingBarStyle"`

对于中`style="?android:attr/ratingBarStyleIndicator"`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T18:42:29.537

我以前遇到过这个

```
<uses-sdk android:minSdkVersion="4"
  android:targetSdkVersion="7"   /> 
```

您可能会在此处找到更多信息 [Android 自定义评分栏图像大小问题](https://stackoverflow.com/questions/5864478/android-custom-rating-bar-image-size-problem)

# debugging - Are there any good OpenGL ES 2.0 Debuggers like gDebugger used to be?

> ID：10011087
> 
> 赞同：2
> 
> 时间：2012-04-04T12:28:03.213
> 
> 标签：debugging, opengl-es, opengl-es-2.0

I tried using gDebugger but apparently it no longer supports OpenGL ES. I saw a question similar to this one, but it was over a year old, so I thought maybe things had changed by now. Any suggestions?

# html - 最简单的博客模板。（博客点）

> ID：10011090
> 
> 赞同：5
> 
> 时间：2012-04-04T12:28:12.990
> 
> 标签：html, css, blogger, blogspot

我正在寻找可以用简单代码制作的最简单的博客模板。我对此一无所知。我不想使用任何 JavaScript、CSS 和所有不必要的东西。

最后一页应该是这样的。

[http://blackberry.falconmediaworks.com/](http://blackberry.falconmediaworks.com/)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-09T17:48:55.613

如果您正在寻找一个空的 Blogspot/Blogger 模板，请将其粘贴为模板 HTML 代码：

```
<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html>
<html b:version='2' class='v2' expr:dir='data:blog.languageDirection' xmlns='http://www.w3.org/1999/xhtml' xmlns:b='http://www.google.com/2005/gml/b' xmlns:data='http://www.google.com/2005/gml/data' xmlns:expr='http://www.google.com/2005/gml/expr'>

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <b:include data='blog' name='all-head-content'/>
    <title><data:blog.pageTitle/></title>
    <b:skin><![CDATA[   ]]></b:skin>
</head>

<body>
    <b:section class='main' id='main' showaddelement='no'><b:widget id='Blog1' locked='true' title='Blog Posts' type='Blog'/></b:section>
</body>

</html> 
```

这为您提供了一个仅包含博客文章的博客。如果您想添加其他元素，例如已归档博客文章的列表，请使用布局编辑器或参考[此页面](http://support.google.com/blogger/bin/answer.py?hl=en&answer=46888)以获取它们的标签。

# c - Why static library cause alignment problems if the same shared library works ok?

> ID：10011096
> 
> 赞同：0
> 
> 时间：2012-04-04T12:28:33.670
> 
> 标签：c, debugging, memory-management, gcc, embedded

I have a very strange problem. I build two libraries from one software source: static (using ar) and dynamic (using gcc). After I link my test application with the dynamic library it works ok. But a test application linked with the static library exists with either "segmentation fault" or with "Unhandled fault: alignment exception ... illegal instruction".

Why? I know that there is a bug in my software code, but is there any difference in the memory alignment if a static library used?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T13:05:21.073

如果您查看静态链接与动态链接的定义，应该清楚这两个二进制文件的内存布局非常不同。

使用静态链接，满足链接器符号表中创建的依赖关系所需的*所有目标代码都包含在生成的二进制文件中。*

通过动态链接，这些依赖关系被重写为加载程序在加载二进制文件时试图满足的占位符。根据动态库存在的对齐要求，实际的目标代码被加载到内存中的某处。

因此，最大的区别在于二进制文件中包含哪些目标代码。静态库中的某些内容会导致执行脱轨。我建议对您的库代码进行一些选择性单元测试以及一些代码检查，以尝试查明问题。

# c++ - 如何使用recv() 接收大数据？

> ID：10011098
> 
> 赞同：-1
> 
> 时间：2012-04-04T12:28:38.673
> 
> 标签：c++, sockets, tcp, client-server, tcpsocket

我使用 C++ 开发了客户端服务器程序，所以我想接收超过 500kb 的数据，我的客户端消息以“！”终止 ，所以我想接收直到我的最后一个字节（！）接收，这是我的代码它不起作用。它有什么问题。

```
do
  {
  int num = recv(*csock,  buf, bytesLeft,0);

if (num == 0)
{
  break;
}
else if (num < 0 && errno != EINTR)
{
  fprintf(stderr, "Exit %d\n", __LINE__);
  exit(1);
}
else if (num > 0)
{
  numRd += num;
  buf += num;
  bytesLeft -= num;
  fprintf(stderr, "read %d bytes - remaining = %d\n", num, bytesLeft);
}

  }

    while (bytesLeft != 0);
   fprintf(stderr, "read total of %d bytes\n", numRd); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-04T12:33:45.700

虽然由于您的问题的措辞，我不确定您的问题到底是什么，但您通常不能使用`strcat`附加通过网络接收的原始缓冲区，除非您明确知道它们将以 NULL 终止，即使那样，那也不是如果您收到意外的数据传输，则真正“安全”。c-strings 的假设是它们是以 NULL 结尾的，但原始网络缓冲区可能不是，`strcat`如果输入缓冲区不是以 NULL 结尾的，使用将导致您过度运行输入缓冲区。代替`strcat`，使用一个已知的大小为 N 字节的固定大小的缓冲区来接收数据，并在缓冲区中增加一个临时指针，直到到达缓冲区的末尾或数据包传输的末尾。这样，您将始终从网络读取最多 N 个字节，并防止发生缓冲区溢出情况。

例如，您可以执行以下操作（由于所有复制，这不是*最快或更有效的解决方案，但它有效）：*

```
unsigned char buf[10000];  //10Kb fixed-size buffer
unsigned char buffer[MAXRECV];  //temporary buffer

unsigned char* temp_buf = buf;
unsigned char* end_buf = buf + sizeof(buf);

do
{       
    iByteCount = recv(GetSocketId(), buffer,MAXRECV,0);   

    if ( iByteCount > 0 )
    {
        //make sure we're not about to go over the end of the buffer
        if (!((temp_buf + iByteCount) <= end_buf))
            break;

        fprintf(stderr, "Bytes received: %d\n",iByteCount);
        memcpy(temp_buf, buffer, iByteCount);
        temp_buf += iByteCount;
    }
    else if ( iByteCount == 0 )
    {
        if(temp_buf != buf)
        {
            //do process with received data
        }
        else
        {
            fprintf(stderr, "receive failed");
            break;
        }
    }
    else
    {
        fprintf(stderr, "recv failed: ");
        break;
    }
} while(iByteCount > 0 && temp_ptr < end_buf);  //check for end of buffer 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T12:47:12.970

您是否需要一个连续字节缓冲区中的所有 1MB+ 数据？如果是这样，并且您坚持使用终止“！”的协议 并且没有包含长度的标头，那么您会经常使用 memcpy() 和 realloc() 或其他一些缓冲区类型，例如 std::vector ，它们实际上只是做同样的事情。

如果您不需要一个字符串中的所有这些字节，则可以以其他方式存储它们，例如。*buffer 的向量，因此避免复制。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-05T00:02:03.620

假设您使用的是阻塞套接字（这是套接字的默认模式），那么`recv()`将阻塞等待全部`MAXRECV`字节数到达。如果客户端发送的字节数少于该字节数，`recv()`将阻塞等待未到达的数据。

要解决此问题，您需要：

1)`recv()`使用 1 字节缓冲区调用，调用`recv()`直到遇到你的`!`字节。

2）在调用`select()`之前调用`recv()`以检测套接字何时实际有数据要读取，然后调用`ioctlsocket(FIONREAD)`以确定实际上可以在`recv()`没有阻塞的情况下读取多少字节，然后`recv()`读取该字节数。

# multithreading - J2ME - Display Alert from a background thread

> ID：10011102
> 
> 赞同：0
> 
> 时间：2012-04-04T12:28:51.700
> 
> 标签：multithreading, java-me, background, alert, lcdui

I have an application that is suspended, and even when it is suspended a thread is working to get some data. What I want to do is, while a user is using the phone for other thing, to display an alert because new data was found, and when I click a button then comes back to my application that was suspended and shows the data.

I know I can make an alert on this way

```
alert = new Alert("alert");
alert.addCommand(new Command("Ok", Command.OK, 0));
alert.addCommand(new Command("Cancel", Command.CANCEL, 0););
alert.setCommandListener(this);
alert.setTimeout(Alert.FOREVER); 
```

but I don't know how to show it when my application is running background?

# ios - 切换到一种语言并在 IOS 中重新加载 ViewController

> ID：10011106
> 
> 赞同：0
> 
> 时间：2012-04-04T12:29:03.887
> 
> 标签：ios

我正在使用下面的代码切换到一种语言：

```
-(void) switchToLanguage:(NSString *)lang{
[[NSUserDefaults standardUserDefaults] setObject:[NSArray arrayWithObjects:lang, nil] 
          forKey:@"AppleLanguages"];
[[NSUserDefaults standardUserDefaults] synchronize];
[sliderViewController refreshView];
} 
```

我不确定它是否正确。之后，在sliderViewController的刷新视图函数中：

```
-(void)refreshView{
slideLabel.text = NSLocalizedString(@"To Menu", @"To Menu");
slogan.text = NSLocalizedString(@"Categories", @"Categories");
} 
```

但它不起作用。我哪里错了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T12:32:39.570

设置`AppleLanguages`密钥仅在您的`main.m`文件中有效，在`UIApplicationMain`调用之前。如果您在任何其他时间尝试更改其值，它将无法正常工作。

如果您希望支持在运行时更改语言，您将不得不推出自己的本地化功能。

# asp.net - 如何在所有 .NET 框架中获得一致的 AJAX 响应？

> ID：10011113
> 
> 赞同：2
> 
> 时间：2012-04-04T12:29:28.410
> 
> 标签：asp.net, ajax, asp.net-3.5

从 ASP.NET 3.5 开始，来自 ASP.NET Web 服务的所有 AJAX 响应都包含在一个`d`对象中。

> 通过 ASP.NET 3.5 中的 ASP.NET AJAX 扩展序列化的所有 ASMX 服务 JSON 都是这种情况。即使您只返回一个标量返回值，例如字符串、整数或布尔值，结果也将始终包含在“d”中。

[*http://encosia.com/a-break-change-between-versions-of-aspnet-ajax/*](http://encosia.com/a-breaking-change-between-versions-of-aspnet-ajax/)

因此，对于 3.5 之前的应用程序，您需要执行以下操作：

```
success(data)
{
   var value = data;
} 
```

使用 3.5+，您必须执行以下操作：

```
success(data)
{
   var value = data.d;
} 
```

我有一个在 3.5 后和 3.5 前运行的应用程序。

如何使这些应用程序的代码保持一致？

这也很有用，这样我就不必在升级 3.5 之前的应用程序时更改它们的代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T12:34:39.890

你可以有一个小助手功能：

```
function GiveMeMyDamnData(data){
   if(data.d)
      return data.d;
   return data;
} 
```

然后...

```
success(data)
{
   var value = GiveMeMyDamnData(data);
} 
```

...只需要确保您从不在 AJAX 响应中使用“d”属性（否则会让人感到困惑！

# java - 良好的 Java 格式化文本字段库

> ID：10011116
> 
> 赞同：1
> 
> 时间：2012-04-04T12:29:44.777
> 
> 标签：java, swing, awt

Java 的默认 JFormattedTextField 不好用。提供高级格式化文本字段的其他可用 Java 库有哪些？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T12:32:06.947

RSyntaxTextArea 对我很有帮助。我在[jOOQ 控制台](http://www.jooq.org/manual/ADVANCED/ExecuteListener/)中使用它：

[http://fifesoft.com/rsyntaxtextarea/](http://fifesoft.com/rsyntaxtextarea/)

虽然，这对你来说可能有点矫枉过正......？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-04T12:45:40.663

使用简单[`JTextField`](http://docs.oracle.com/javase/6/docs/api/javax/swing/JTextField.html)并在其上设置[`DocumentFilter`](http://download.oracle.com/javase/6/docs/api/javax/swing/text/DocumentFilter.html)过滤器。请参阅此[示例](https://stackoverflow.com/a/8017847/597657)。

# php - Zend JSON 服务器不返回内容

> ID：10011117
> 
> 赞同：1
> 
> 时间：2012-04-04T12:29:45.400
> 
> 标签：php, json, zend-framework, frameworks

我有一个 zend JSON 工厂，旨在为服务分发 OTP，但是我无法让服务器实际返回任何内容..

```
<?php

class Application_Model_FrogconnectOTP
{
/**
 * Generates, stores, and returns the OTP for thesupplied user
 * 
 * @param   string  $username
 * @return  string
 */
public function generate($username)
{

     $hash = "Lol";
     return $hash;
}

/**
 * Will clear the OTP for the user.
 * 
 * @param   string  $username
 * @return  int
 */
public function delete($username) 
{
    return 1;
}
/**
 * Takes the supplied username and hash and will calculate new sums and verify the supplied hash.
 * 
 * @param   string  $username
 * @param   string  $hash
 * @return  int
 * 
 */
public function validate($username, $hash) {
    return 1;
}
}
?> 
```

这个类由默认（ish）的zend json服务器加载，如下所示：

```
<?php
$this->_helper->layout->disableLayout();

$server = new Zend_Json_Server();
$OTPEngine = new Application_Model_FrogconnectOTP();
$server->setClass($OTPEngine);

if ('GET' == $_SERVER['REQUEST_METHOD']) {
    // Indicate the URL endpoint, and the JSON-RPC version used:
    $server->setTarget('/frogconnect')
           ->setEnvelope(Zend_Json_Server_Smd::ENV_JSONRPC_2);

    // Grab the SMD
    $smd = $server->getServiceMap();

    // Return the SMD to the client
    header('Content-Type: application/json');
    echo $smd;
    return;
}
$server->handle(); 
```

但是，如果我尝试使用类似于以下内容的 json 字符串发出请求，服务器会以 204 No Content 标头响应，但我没有收到任何内容（我应该期待“Lol”

```
{"method":"generate","params":{"username":"johndoe"}} 
```

任何帮助，将不胜感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T17:41:47.950

万一其他人有这个问题，这里的问题是它看起来你正试图强制 Web 服务通过 Zend MVC 布局（我是根据处理代码顶部的禁用布局来推断的）

建议您在公用文件夹中为 JSON-RPC 服务器创建自定义索引文件。

尝试按如下方式创建文件：

/public/api/v1.0/jsonrpc.php

```
<?php
// Define path to application directory
defined('APPLICATION_PATH')
|| define('APPLICATION_PATH', realpath(dirname(__FILE__) . '/../../../application'));

// Define application environment
defined('APPLICATION_ENV')
|| define('APPLICATION_ENV', (getenv('APPLICATION_ENV') ? getenv('APPLICATION_ENV') : 'production'));

// Ensure library/ is on include_path
set_include_path(implode(PATH_SEPARATOR, array(
    realpath(APPLICATION_PATH . '/../library'),
    get_include_path(),
)));

/** Zend_Application */
require_once 'Zend/Application.php';

// Create application, bootstrap, and run
$application = new Zend_Application(
    APPLICATION_ENV,
    APPLICATION_PATH . '/configs/application.ini'
);

$application->bootstrap();

// Instantiate server, etc.
$server = new Zend_Json_Server();
$server->setClass('Application_Model_FrogconnectOTP');

if ('GET' == $_SERVER['REQUEST_METHOD']) {
    // Indicate the URL endpoint, and the JSON-RPC version used:
    $server->setTarget('/api/v1.0/jsonrpc.php')
       ->setEnvelope(Zend_Json_Server_Smd::ENV_JSONRPC_2);

    // Grab the SMD
    $smd = $server->getServiceMap();

    // Return the SMD to the client
    header('Content-Type: application/json');
    echo $smd;
    return;
}

$server->handle();
?> 
```

这替换了 zend 用于 MVC 内容的普通索引文件“/public/index.php”。

# hadoop - Hbase HMaster 未运行

> ID：10011119
> 
> 赞同：2
> 
> 时间：2012-04-04T12:29:48.303
> 
> 标签：hadoop, hbase

我在 HBase 中遇到了一些问题。当我尝试启动 hadoop 时，它启动时没有任何问题。但 HBase 不起作用。DataNode 、 HRegionServer 、 secondaryNameNode 等都在工作，但 HMaster 没有运行，当我启动 hbase 时。有时它会抛出异常“RegionServer 正在作为进程运行# xyz . 先停止它。另一个奇怪的事情是 HBase 日志正在打印“Matser started”但是当我们检查时，它没有启动。我正在寻找问题，但无法理解。如果你有线索，请指导我。这里HBase 的日志如下

```
Wed Apr  4 17:48:46 PKT 2012 Starting master on hbase
ulimit -n 1024
2012-04-04 17:48:48,804 INFO org.apache.hadoop.hbase.ipc.HBaseRpcMetrics: Initializing RPC Metrics with hostName=HMaster, port=60000
2012-04-04 17:48:49,185 INFO org.apache.hadoop.ipc.HBaseServer: IPC Server Responder: starting
2012-04-04 17:48:49,191 INFO org.apache.hadoop.ipc.HBaseServer: IPC Server listener on 60000: starting
2012-04-04 17:48:49,199 INFO org.apache.hadoop.ipc.HBaseServer: IPC Server handler 0 on 60000: starting
2012-04-04 17:48:49,203 INFO org.apache.hadoop.ipc.HBaseServer: IPC Server handler 1 on 60000: starting
2012-04-04 17:48:49,204 INFO org.apache.hadoop.ipc.HBaseServer: IPC Server handler 2 on 60000: starting
2012-04-04 17:48:49,213 INFO org.apache.hadoop.ipc.HBaseServer: IPC Server handler 3 on 60000: starting
2012-04-04 17:48:49,213 INFO org.apache.hadoop.ipc.HBaseServer: IPC Server handler 4 on 60000: starting
2012-04-04 17:48:49,271 INFO org.apache.hadoop.ipc.HBaseServer: IPC Server handler 9 on 60000: starting
2012-04-04 17:48:49,272 INFO org.apache.hadoop.ipc.HBaseServer: IPC Server handler 5 on 60000: starting
2012-04-04 17:48:49,275 INFO org.apache.hadoop.ipc.HBaseServer: IPC Server handler 8 on 60000: starting
2012-04-04 17:48:49,278 INFO org.apache.hadoop.ipc.HBaseServer: IPC Server handler 7 on 60000: starting
2012-04-04 17:48:49,280 INFO org.apache.hadoop.ipc.HBaseServer: IPC Server handler 6 on 60000: starting
2012-04-04 17:48:49,396 INFO org.apache.zookeeper.ZooKeeper: Client environment:zookeeper.version=3.3.2-1031432, built on 11/05/2010 05:32 GMT
2012-04-04 17:48:49,400 INFO org.apache.zookeeper.ZooKeeper: Client environment:host.name=hbase.ifkaar.com
2012-04-04 17:48:49,400 INFO org.apache.zookeeper.ZooKeeper: Client environment:java.version=1.6.0_20
2012-04-04 17:48:49,400 INFO org.apache.zookeeper.ZooKeeper: Client environment:java.vendor=Sun Microsystems Inc.
2012-04-04 17:48:49,400 INFO org.apache.zookeeper.ZooKeeper: Client environment:java.home=/usr/lib/jvm/java-6-openjdk/jre
2012-04-04 17:48:49,400 INFO org.apache.zookeeper.ZooKeeper: Client environment:java.class.path=/opt/ifkaar/hbase-0.90.4/bin/../conf:/usr/lib/jvm/java-6-openjdk/lib/tools.jar:/opt/ifkaar/hbase-0.90.4/bin/..:/opt/ifkaar/hbase-0.90.4/bin/../hbase-0.90.4.jar:/opt/ifkaar/hbase-0.90.4/bin/../hbase-0.90.4-tests.jar:/opt/ifkaar/hbase-0.90.4/bin/../lib/activation-1.1.jar:/opt/ifkaar/hbase-0.90.4/bin/../lib/asm-3.1.jar:/opt/ifkaar/hbase-0.90.4/bin/../lib/avro-1.3.3.jar:/opt/ifkaar/hbase-0.90.4/bin/../lib/commons-cli-1.2.jar:/opt/ifkaar/hbase-0.90.4/bin/../lib/commons-codec-1.4.jar:/opt/ifkaar/hbase-0.90.4/bin/../lib/commons-configuration-1.6.jar:/opt/ifkaar/hbase-0.90.4/bin/../lib/commons-el-1.0.jar:/opt/ifkaar/hbase-0.90.4/bin/../lib/commons-httpclient-3.1.jar:/opt/ifkaar/hbase-0.90.4/bin/../lib/commons-lang-2.5.jar:/opt/ifkaar/hbase-0.90.4/bin/../lib/commons-logging-1.1.1.jar:/opt/ifkaar/hbase-0.90.4/bin/../lib/commons-net-1.4.1.jar:/opt/ifkaar/hbase-0.90.4/bin/../lib/core-3.1.1.jar:/opt/ifkaar/hbase-0.90.4/bin/../lib/guava-r06.jar:/opt/ifkaar/hbase-0.90.4/bin/../lib/hadoop-core-0.20.205.0.jar:/opt/ifkaar/hbase-0.90.4/bin/../lib/hadoop-gpl-compression-0.2.0-dev.jar:/opt/ifkaar/hbase-0.90.4/bin/../lib/jackson-core-asl-1.5.5.jar:/opt/ifkaar/hbase-0.90.4/bin/../lib/jackson-jaxrs-1.5.5.jar:/opt/ifkaar/hbase-0.90.4/bin/../lib/jackson-mapper-asl-1.4.2.jar:/opt/ifkaar/hbase-0.90.4/bin/../lib/jackson-xc-1.5.5.jar:/opt/ifkaar/hbase-0.90.4/bin/../lib/jasper-compiler-5.5.23.jar:/opt/ifkaar/hbase-0.90.4/bin/../lib/jasper-runtime-5.5.23.jar:/opt/ifkaar/hbase-0.90.4/bin/../lib/jaxb-api-2.1.jar:/opt/ifkaar/hbase-0.90.4/bin/../lib/jaxb-impl-2.1.12.jar:/opt/ifkaar/hbase-0.90.4/bin/../lib/jersey-core-1.4.jar:/opt/ifkaar/hbase-0.90.4/bin/../lib/jersey-json-1.4.jar:/opt/ifkaar/hbase-0.90.4/bin/../lib/jersey-server-1.4.jar:/opt/ifkaar/hbase-0.90.4/bin/../lib/jettison-1.1.jar:/opt/ifkaar/hbase-0.90.4/bin/../lib/jetty-6.1.26.jar:/opt/ifkaar/hbase-0.90.4/bin/../lib/jetty-util-6.1.26.jar:/opt/ifkaar/hbase-0.90.4/bin/../lib/jruby-complete-1.6.0.jar:/opt/ifkaar/hbase-0.90.4/bin/../lib/jsp-2.1-6.1.14.jar:/opt/ifkaar/hbase-0.90.4/bin/../lib/jsp-api-2.1-6.1.14.jar:/opt/ifkaar/hbase-0.90.4/bin/../lib/jsr311-api-1.1.1.jar:/opt/ifkaar/hbase-0.90.4/bin/../lib/log4j-1.2.16.jar:/opt/ifkaar/hbase-0.90.4/bin/../lib/protobuf-java-2.3.0.jar:/opt/ifkaar/hbase-0.90.4/bin/../lib/servlet-api-2.5-6.1.14.jar:/opt/ifkaar/hbase-0.90.4/bin/../lib/slf4j-api-1.5.8.jar:/opt/ifkaar/hbase-0.90.4/bin/../lib/slf4j-log4j12-1.5.8.jar:/opt/ifkaar/hbase-0.90.4/bin/../lib/stax-api-1.0.1.jar:/opt/ifkaar/hbase-0.90.4/bin/../lib/thrift-0.2.0.jar:/opt/ifkaar/hbase-0.90.4/bin/../lib/xmlenc-0.52.jar:/opt/ifkaar/hbase-0.90.4/bin/../lib/zookeeper-3.3.2.jar
2012-04-04 17:48:49,401 INFO org.apache.zookeeper.ZooKeeper: Client environment:java.library.path=/usr/lib/jvm/java-6-openjdk/jre/lib/i386/client:/usr/lib/jvm/java-6-openjdk/jre/lib/i386:/usr/lib/jvm/java-6-openjdk/jre/../lib/i386:/usr/java/packages/lib/i386:/usr/lib/jni:/lib:/usr/lib
2012-04-04 17:48:49,401 INFO org.apache.zookeeper.ZooKeeper: Client environment:java.io.tmpdir=/tmp
2012-04-04 17:48:49,401 INFO org.apache.zookeeper.ZooKeeper: Client environment:java.compiler=<NA>
2012-04-04 17:48:49,401 INFO org.apache.zookeeper.ZooKeeper: Client environment:os.name=Linux
2012-04-04 17:48:49,401 INFO org.apache.zookeeper.ZooKeeper: Client environment:os.arch=i386
2012-04-04 17:48:49,401 INFO org.apache.zookeeper.ZooKeeper: Client environment:os.version=2.6.32-38-generic
2012-04-04 17:48:49,401 INFO org.apache.zookeeper.ZooKeeper: Client environment:user.name=ifkaar
2012-04-04 17:48:49,401 INFO org.apache.zookeeper.ZooKeeper: Client environment:user.home=/home/ifkaar
2012-04-04 17:48:49,401 INFO org.apache.zookeeper.ZooKeeper: Client environment:user.dir=/opt/ifkaar/hbase-0.90.4/bin
2012-04-04 17:48:49,403 INFO org.apache.zookeeper.ZooKeeper: Initiating client connection, connectString=localhost:2181 sessionTimeout=180000 watcher=master:60000
2012-04-04 17:48:49,469 INFO org.apache.zookeeper.ClientCnxn: Opening socket connection to server localhost/127.0.0.1:2181
2012-04-04 17:48:49,506 INFO org.apache.zookeeper.ClientCnxn: Socket connection established to localhost/127.0.0.1:2181, initiating session
2012-04-04 17:48:49,688 INFO org.apache.zookeeper.ClientCnxn: Session establishment complete on server localhost/127.0.0.1:2181, sessionid = 0x1367d66702b0000, negotiated timeout = 180000
2012-04-04 17:48:49,740 INFO org.apache.hadoop.metrics.jvm.JvmMetrics: Initializing JVM Metrics with processName=Master, sessionId=hbase.ifkaar.com:60000
2012-04-04 17:48:49,784 INFO org.apache.hadoop.hbase.metrics: MetricsString added: revision
2012-04-04 17:48:49,784 INFO org.apache.hadoop.hbase.metrics: MetricsString added: hdfsUser
2012-04-04 17:48:49,784 INFO org.apache.hadoop.hbase.metrics: MetricsString added: hdfsDate
2012-04-04 17:48:49,784 INFO org.apache.hadoop.hbase.metrics: MetricsString added: hdfsUrl
2012-04-04 17:48:49,784 INFO org.apache.hadoop.hbase.metrics: MetricsString added: date
2012-04-04 17:48:49,784 INFO org.apache.hadoop.hbase.metrics: MetricsString added: hdfsRevision
2012-04-04 17:48:49,800 INFO org.apache.hadoop.hbase.metrics: MetricsString added: user
2012-04-04 17:48:49,800 INFO org.apache.hadoop.hbase.metrics: MetricsString added: hdfsVersion
2012-04-04 17:48:49,800 INFO org.apache.hadoop.hbase.metrics: MetricsString added: url
2012-04-04 17:48:49,800 INFO org.apache.hadoop.hbase.metrics: MetricsString added: version
2012-04-04 17:48:49,801 INFO org.apache.hadoop.hbase.metrics: new MBeanInfo
2012-04-04 17:48:49,802 INFO org.apache.hadoop.hbase.metrics: new MBeanInfo
2012-04-04 17:48:49,802 INFO org.apache.hadoop.hbase.master.metrics.MasterMetrics: Initialized
2012-04-04 17:48:49,939 INFO org.apache.hadoop.hbase.master.ActiveMasterManager: Master=hbase.ifkaar.com:60000
2012-04-04 17:48:52,204 INFO org.apache.hadoop.ipc.Client: Retrying connect to server: localhost/127.0.0.1:54310\. Already tried 0 time(s).
2012-04-04 17:48:53,205 INFO org.apache.hadoop.ipc.Client: Retrying connect to server: localhost/127.0.0.1:54310\. Already tried 1 time(s).
2012-04-04 17:48:54,206 INFO org.apache.hadoop.ipc.Client: Retrying connect to server: localhost/127.0.0.1:54310\. Already tried 2 time(s).
2012-04-04 17:48:55,207 INFO org.apache.hadoop.ipc.Client: Retrying connect to server: localhost/127.0.0.1:54310\. Already tried 3 time(s).
2012-04-04 17:48:56,207 INFO org.apache.hadoop.ipc.Client: Retrying connect to server: localhost/127.0.0.1:54310\. Already tried 4 time(s).
2012-04-04 17:48:57,208 INFO org.apache.hadoop.ipc.Client: Retrying connect to server: localhost/127.0.0.1:54310\. Already tried 5 time(s).
2012-04-04 17:48:58,209 INFO org.apache.hadoop.ipc.Client: Retrying connect to server: localhost/127.0.0.1:54310\. Already tried 6 time(s).
2012-04-04 17:48:59,210 INFO org.apache.hadoop.ipc.Client: Retrying connect to server: localhost/127.0.0.1:54310\. Already tried 7 time(s).
2012-04-04 17:49:00,211 INFO org.apache.hadoop.ipc.Client: Retrying connect to server: localhost/127.0.0.1:54310\. Already tried 8 time(s).
2012-04-04 17:49:01,212 INFO org.apache.hadoop.ipc.Client: Retrying connect to server: localhost/127.0.0.1:54310\. Already tried 9 time(s).
2012-04-04 17:49:01,216 FATAL org.apache.hadoop.hbase.master.HMaster: Unhandled exception. Starting shutdown.
java.net.ConnectException: Call to localhost/127.0.0.1:54310 failed on connection exception: java.net.ConnectException: Connection refused
    at org.apache.hadoop.ipc.Client.wrapException(Client.java:1095)
    at org.apache.hadoop.ipc.Client.call(Client.java:1071)
    at org.apache.hadoop.ipc.RPC$Invoker.invoke(RPC.java:225)
    at $Proxy6.getProtocolVersion(Unknown Source)
    at org.apache.hadoop.ipc.RPC.getProxy(RPC.java:396)
    at org.apache.hadoop.ipc.RPC.getProxy(RPC.java:379)
    at org.apache.hadoop.hdfs.DFSClient.createRPCNamenode(DFSClient.java:118)
    at org.apache.hadoop.hdfs.DFSClient.<init>(DFSClient.java:222)
    at org.apache.hadoop.hdfs.DFSClient.<init>(DFSClient.java:187)
    at org.apache.hadoop.hdfs.DistributedFileSystem.initialize(DistributedFileSystem.java:89)
    at org.apache.hadoop.fs.FileSystem.createFileSystem(FileSystem.java:1328)
    at org.apache.hadoop.fs.FileSystem.access$200(FileSystem.java:65)
    at org.apache.hadoop.fs.FileSystem$Cache.get(FileSystem.java:1346)
    at org.apache.hadoop.fs.FileSystem.get(FileSystem.java:244)
    at org.apache.hadoop.fs.Path.getFileSystem(Path.java:187)
    at org.apache.hadoop.hbase.util.FSUtils.getRootDir(FSUtils.java:364)
    at org.apache.hadoop.hbase.master.MasterFileSystem.<init>(MasterFileSystem.java:81)
    at org.apache.hadoop.hbase.master.HMaster.finishInitialization(HMaster.java:346)
    at org.apache.hadoop.hbase.master.HMaster.run(HMaster.java:282)
Caused by: java.net.ConnectException: Connection refused
    at sun.nio.ch.SocketChannelImpl.checkConnect(Native Method)
    at sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:592)
    at org.apache.hadoop.net.SocketIOWithTimeout.connect(SocketIOWithTimeout.java:206)
    at org.apache.hadoop.net.NetUtils.connect(NetUtils.java:604)
    at org.apache.hadoop.ipc.Client$Connection.setupConnection(Client.java:434)
    at org.apache.hadoop.ipc.Client$Connection.setupIOstreams(Client.java:560)
    at org.apache.hadoop.ipc.Client$Connection.access$2000(Client.java:184)
    at org.apache.hadoop.ipc.Client.getConnection(Client.java:1202)
    at org.apache.hadoop.ipc.Client.call(Client.java:1046)
    ... 17 more
2012-04-04 17:49:01,221 INFO org.apache.hadoop.hbase.master.HMaster: Aborting
2012-04-04 17:49:01,221 DEBUG org.apache.hadoop.hbase.master.HMaster: Stopping service threads
2012-04-04 17:49:01,222 INFO org.apache.hadoop.ipc.HBaseServer: Stopping server on 60000
2012-04-04 17:49:01,222 INFO org.apache.hadoop.ipc.HBaseServer: IPC Server handler 0 on 60000: exiting
2012-04-04 17:49:01,222 INFO org.apache.hadoop.ipc.HBaseServer: IPC Server handler 1 on 60000: exiting
2012-04-04 17:49:01,222 INFO org.apache.hadoop.ipc.HBaseServer: IPC Server handler 2 on 60000: exiting
2012-04-04 17:49:01,223 INFO org.apache.hadoop.ipc.HBaseServer: IPC Server handler 3 on 60000: exiting
2012-04-04 17:49:01,223 INFO org.apache.hadoop.ipc.HBaseServer: IPC Server handler 4 on 60000: exiting
2012-04-04 17:49:01,223 INFO org.apache.hadoop.ipc.HBaseServer: IPC Server handler 5 on 60000: exiting
2012-04-04 17:49:01,223 INFO org.apache.hadoop.ipc.HBaseServer: IPC Server handler 6 on 60000: exiting
2012-04-04 17:49:01,223 INFO org.apache.hadoop.ipc.HBaseServer: IPC Server handler 7 on 60000: exiting
2012-04-04 17:49:01,224 INFO org.apache.hadoop.ipc.HBaseServer: IPC Server handler 8 on 60000: exiting
2012-04-04 17:49:01,224 INFO org.apache.hadoop.ipc.HBaseServer: IPC Server handler 9 on 60000: exiting
2012-04-04 17:49:01,224 INFO org.apache.hadoop.ipc.HBaseServer: Stopping IPC Server listener on 60000
2012-04-04 17:49:01,228 INFO org.apache.hadoop.ipc.HBaseServer: Stopping IPC Server Responder
2012-04-04 17:49:01,300 INFO org.apache.zookeeper.ClientCnxn: EventThread shut down
2012-04-04 17:49:01,301 INFO org.apache.zookeeper.ZooKeeper: Session: 0x1367d66702b0000 closed
2012-04-04 17:49:01,301 INFO org.apache.hadoop.hbase.master.HMaster: HMaster main thread exiting
Wed Apr  4 17:49:38 PKT 2012 Stopping hbase (via master) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T13:59:16.467

您可以通过以下方式检查您的监听端口

```
netstat -nltp 
```

或者你的防火墙，比如 iptables 也可能导致这种情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T20:16:13.427

我认为，日志中的这一行，

```
2012-04-04 17:48:52,204 INFO org.apache.hadoop.ipc.Client: Retrying connect to server: localhost/127.0.0.1:54310\. Already tried 0 time(s). 
```

说它正在连接到端口 54310 的 namenode 并且失败了。

您能否通过在浏览器中输入来验证并告诉我您使用的准确端口？

```
**http://localhost:50070** 
```

你会看到类似**NameNode 'localhost:?'** 作为第一行和 ' **?** ' 是您的名称节点端口。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-12-04T09:14:32.647

如果您尝试以伪分布式模式在 hbase 中进行设置，最可能的原因是将 hadoop home 添加到 $PATH。

只需从 $PATH 中删除 hadoop home，您就可以在伪分布式模式下启动 hbase。

有些人默认在 .bashrc 中添加 hadoop home。

如果您在 .bashrc 中添加它，请从中删除 hadoop home。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-07T21:04:09.587

有时，即使按照所说的做了所有事情，Hbase 也没有按预期工作..可能有几个原因..有时，我们在进行配置时缺少一些东西，有时即使在做了所有的预防措施之后，它也不起作用..您提供的日志表明HMaster无法与Namenode通信..查看/etc/hosts文件..删除“127.0.1.1”，并将其设为“127.0.0.1”..同时复制“hadoop-将 HADOOP_HOME 中的 core" jar 和 HADOOP_HOME/lib 目录中的 "common-configurations" jar 放入 Hbase/lib 目录中。同时检查 core-site.xml 和 hbase-site.xml 中的属性一次。

# android - Android sqlite 更新行

> ID：10011122
> 
> 赞同：3
> 
> 时间：2012-04-04T12:30:04.607
> 
> 标签：android, sqlite, multiple-value

我试图更新表中的一行，但更新功能似乎没有响应。我的功能一切正常吗，还是我哪里错了？

```
public int editChild(int id, String name, String dob,
            int gender, double weight, double lenght, int color, int status) {
        ContentValues args = new ContentValues();
        args.put("name", name);
        args.put("dob", dob);
        args.put("weight", weight);
        args.put("lenght", lenght);
        args.put("color", color);
        args.put("status", status);
        return database.update(TABLE_CHILDREN, args, "id" + "='" + id
                + "'", null);
    } 
```

现在我看到了 logcat，抛出了这些异常：

```
04-03 22:38:32.984: I/dalvikvm(8803): Uncaught exception thrown by finalizer (will be discarded):
04-03 22:38:32.984: I/dalvikvm(8803): Ljava/lang/IllegalStateException;: Finalizing cursor android.database.sqlite.SQLiteCursor@44c70c20 on children that has not been deactivated or closed
04-03 22:38:32.984: I/dalvikvm(8803):   at android.database.sqlite.SQLiteCursor.finalize(SQLiteCursor.java:596)
04-03 22:38:32.984: I/dalvikvm(8803):   at dalvik.system.NativeStart.run(Native Method)
04-03 22:38:32.984: I/dalvikvm(8803): Uncaught exception thrown by finalizer (will be discarded):
04-03 22:38:32.984: I/dalvikvm(8803): Ljava/lang/IllegalStateException;: Finalizing cursor android.database.sqlite.SQLiteCursor@44c702f8 on children that has not been deactivated or closed
04-03 22:38:32.984: I/dalvikvm(8803):   at android.database.sqlite.SQLiteCursor.finalize(SQLiteCursor.java:596)
04-03 22:38:32.984: I/dalvikvm(8803):   at dalvik.system.NativeStart.run(Native Method)
04-03 22:38:33.004: I/dalvikvm(8803): Uncaught exception thrown by finalizer (will be discarded):
04-03 22:38:33.024: I/dalvikvm(8803): Ljava/lang/IllegalStateException;: Finalizing cursor android.database.sqlite.SQLiteCursor@44c2bc20 on children that has not been deactivated or closed
04-03 22:38:33.024: I/dalvikvm(8803):   at android.database.sqlite.SQLiteCursor.finalize(SQLiteCursor.java:596)
04-03 22:38:33.024: I/dalvikvm(8803):   at dalvik.system.NativeStart.run(Native Method)
04-03 22:38:33.064: I/dalvikvm(8803): Uncaught exception thrown by finalizer (will be discarded):
04-03 22:38:33.084: I/dalvikvm(8803): Ljava/lang/IllegalStateException;: Finalizing cursor android.database.sqlite.SQLiteCursor@44c82e68 on children that has not been deactivated or closed
04-03 22:38:33.084: I/dalvikvm(8803):   at android.database.sqlite.SQLiteCursor.finalize(SQLiteCursor.java:596)
04-03 22:38:33.084: I/dalvikvm(8803):   at dalvik.system.NativeStart.run(Native Method) 
```

数据库助手类：

```
package com.app;

import java.util.ArrayList;

import android.content.ContentValues;
import android.content.Context;
import android.database.Cursor;
import android.database.SQLException;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteOpenHelper;

public class DatabaseHelper extends SQLiteOpenHelper {

    public static final String TABLE_SETTINGS = "settings";
    public static final String TABLE_LOCATIONS = "locations";
    public static final String TABLE_LOCATIONCATEGORIES = "locationcategories";
    public static final String TABLE_CATEGORIES = "categories";
    public static final String TABLE_ARTICLES = "articles";
    public static final String TABLE_DEF_CALENDAR = "DefCalendar";
    public static final String TABLE_USERS = "users";
    public static final String TABLE_CHILDREN = "children";
    public static final String TABLE_DIARY = "diary";
    public static final String DROP_TABLE = "drop table if exists";

    private static final String DATABASE_NAME = "BabyApp.db";
    private static final int DATABASE_VERSION = 1;
    private boolean isOpen = false;
    private Context context;
    private SQLiteDatabase database;
    private DatabaseHelper dbHelper;

    // Database creation sql statements
    private static final String CREATE_TABLE_SETTINGS = "create table "
            + TABLE_SETTINGS
            + " ("
            + "id integer primary key autoincrement, value text, timestamp text);";

    private static final String CREATE_TABLE_LOCATIONS = "create table "
            + TABLE_LOCATIONS
            + " (id text primary key, categoryId integer, name text, "
            + "long numeric, lat numeric, description text, timestamp text, status integer);";

    private static final String CREATE_TABLE_LOCATIONCATEGORIES = "create table "
            + TABLE_LOCATIONCATEGORIES
            + " ("
            + "id integer primary key autoincrement, name text, timestamp text, status integer);";

    private static final String CREATE_TABLE_CATEGORIES = "create table "
            + TABLE_CATEGORIES
            + " ("
            + "id integer primary key autoincrement, parent integer, ageFrom integer, ageTO integer,"
            + " dateFrom text, dateTo text, timestamp text);";

    private static final String CREATE_TABLE_ARTICLES = "create table "
            + TABLE_ARTICLES
            + " ("
            + "id integer primary key autoincrement,parent integer not null, foreign key (parent) references "
            + TABLE_CATEGORIES + " (id), name text, ageFrom integer,"
            + " ageTo integer, dateFrom text, dateTo text, status integer);";

    private static final String CREATE_TABLE_DEF_CALENDAR = "create table "
            + TABLE_DEF_CALENDAR
            + " ("
            + "id integer primary key autoincrement, title text, ageFrom integer, ageTo integer,articleId integer, foreign key (articleId) references "
            + TABLE_ARTICLES + "(id), timestamp text, status integer)";

    private static final String CREATE_TABLE_USERS = "create table "
            + TABLE_USERS
            + " (id integer primary key autoincrement, email text, pass text, timestamp text);";

    private static final String CREATE_TABLE_CHILDREN = "create table "
            + TABLE_CHILDREN
            + " ("
            + "id integer primary key autoincrement, name text, gender integer, dob text, weight numeric, lenght numeric, color integer, status integer, timestamp text);";

    private static final String CREATE_TABLE_DIARY = "create table "
            + TABLE_DIARY
            + " ("
            + "id integer primary key autoincrement, foreign key(child) references"
            + TABLE_CHILDREN
            + " (id), date text, text text, timestamp text, status integer);";

    public DatabaseHelper(Context context) {
        super(context, DATABASE_NAME, null, DATABASE_VERSION);
        this.context = context;
    }

    @Override
    public void onCreate(SQLiteDatabase db) {
        db.execSQL(CREATE_TABLE_SETTINGS);
        // db.execSQL(CREATE_TABLE_ARTICLES);
        db.execSQL(CREATE_TABLE_CATEGORIES);
        db.execSQL(CREATE_TABLE_CHILDREN);
        // db.execSQL(CREATE_TABLE_DEF_CALENDAR);
        // db.execSQL(CREATE_TABLE_DIARY);
        db.execSQL(CREATE_TABLE_LOCATIONCATEGORIES);
        db.execSQL(CREATE_TABLE_LOCATIONS);
        db.execSQL(CREATE_TABLE_USERS);
    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        db.execSQL(TABLE_SETTINGS);
        db.execSQL(TABLE_ARTICLES);
        db.execSQL(TABLE_CATEGORIES);
        db.execSQL(TABLE_CHILDREN);
        db.execSQL(TABLE_DEF_CALENDAR);
        db.execSQL(TABLE_DIARY);
        db.execSQL(TABLE_LOCATIONCATEGORIES);
        db.execSQL(TABLE_LOCATIONS);
        db.execSQL(TABLE_USERS);
        onCreate(db);
    }

    public DatabaseHelper open() throws SQLException {
        dbHelper = new DatabaseHelper(context);
        database = dbHelper.getWritableDatabase();
        return this;
    }

    @Override
    public void onOpen(SQLiteDatabase db) {
        isOpen = true;
        super.onOpen(db);
    }

    public boolean isOpen() {
        return isOpen;
    }

    public DatabaseHelper openToWrite() throws android.database.SQLException {

        dbHelper = new DatabaseHelper(context);

        database = dbHelper.getWritableDatabase();

        return this;

    }

    public void close() {
        database.close();
    }

    public boolean setDefaultBaby(int currentActiveId, int id) {
        ContentValues args = new ContentValues();
        args.put("status", "0");
        ContentValues newargs = new ContentValues();
        newargs.put("status", "1");
        return (database.update(TABLE_CHILDREN, args, "id" + "='"
                + currentActiveId + "'", null) > 0 && database.update(
                TABLE_CHILDREN, newargs, "id" + "='" + id + "'", null) > 0);

    }

    public int editChild(int id, String name, String dob, int gender,
            double weight, double lenght, int color, int status) {
        ContentValues args = new ContentValues();
        args.put("name", name);
        args.put("dob", dob);
        args.put("weight", weight);
        args.put("lenght", lenght);
        args.put("color", color);
        args.put("status", status);
        return database.update(TABLE_CHILDREN, args, "id" + "='" + id + "'",
                null);
    }

    public String getActiveChild(int id) {
        Cursor Activecur = database.query(true, TABLE_CHILDREN, null, "id = "
                + id, null, null, null, null, null);
        if (Activecur.moveToFirst()) {

            return Activecur.getString(Activecur.getColumnIndex("name"));
        } else
            return null;
    }

    public long createChild(String name, int gender, String dob, double weight,
            double lenght, int color, int status, String timestamp) {
        ContentValues initialValues = new ContentValues();
        initialValues.put("name", name);
        initialValues.put("gender", gender);
        initialValues.put("dob", dob);
        initialValues.put("weight", weight);
        initialValues.put("lenght", lenght);
        initialValues.put("color", color);
        Cursor Createcur = database.query(TABLE_CHILDREN, null, null, null,
                null, null, null);
        if (Createcur.getCount() == 0)
            initialValues.put("status", 1);
        else
            initialValues.put("status", 0);
        initialValues.put("timestamp", timestamp);// yyyy-MM-dd HH:mm:ss
        return database.insert(TABLE_CHILDREN, null, initialValues);
    }

    public boolean deleteChild(int id) {

        String where = "id" + "='" + id + "'";
        database.delete(TABLE_CHILDREN, where, null);
        return database.delete(TABLE_CHILDREN, where, null) > 0;
    }

    public ArrayList<Child> getAllChildren() {
        Cursor getAllCursor = database.query(TABLE_CHILDREN, null, null, null,
                null, null, null);
        ArrayList<Child> arr = new ArrayList<Child>();
        getAllCursor.moveToFirst();
        while (getAllCursor.isAfterLast() == false) {
            // name text, gender integer, dob text, weight numeric, lenght
            // numeric, colod integer, status integer, timestamp text);";
            arr.add(new Child(
                    getAllCursor.getInt(getAllCursor.getColumnIndex("id")),
                    getAllCursor.getString(getAllCursor.getColumnIndex("name")),
                    getAllCursor.getInt(getAllCursor.getColumnIndex("gender")),
                    getAllCursor.getString(getAllCursor.getColumnIndex("dob")),
                    getAllCursor.getString(getAllCursor
                            .getColumnIndex("timestamp")),
                    getAllCursor.getInt(getAllCursor.getColumnIndex("status")),
                    getAllCursor.getInt(getAllCursor.getColumnIndex("color")),
                    getAllCursor.getFloat(getAllCursor.getColumnIndex("weight")),
                    getAllCursor.getFloat(getAllCursor.getColumnIndex("lenght"))));
            getAllCursor.moveToNext();
        }
        // getAllCursor.close();
        return arr;
    }

    public int getDefaultBabyID() {
        String where = "status = 1";
        Cursor cur = database.query(true, TABLE_CHILDREN, null, where, null,
                null, null, null, null);
        int id;
        if (cur.moveToFirst())
            id = cur.getInt(cur.getColumnIndex("id"));
        else
            id = 0;
        cur.close();
        return id;
    }

    public int getId() {
        Cursor cur = database.query(true, TABLE_CHILDREN, null, null, null,
                null, null, null, null);
        cur.moveToLast();
        int id = cur.getInt(cur.getColumnIndex("id"));
        cur.close();
        return id;
    }

    public int getIdForName(String name) {
        String where = "name='" + name + "'";
        Cursor cur = database.query(true, TABLE_CHILDREN, null, where, null,
                null, null, null, null);
        cur.moveToLast();
        cur.close();
        return cur.getInt(cur.getColumnIndex("id"));
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-04T12:40:26.483

试试这个代码：

这是在您的 DatabaseHelper 类中，

```
public void updateRow(long rowId, String name, String value1, String value2, String value3, String value4) {
        SQLiteDatabase db = this.getWritableDatabase();

    ContentValues args = new ContentValues();
    args.put("KEY1", name);
    args.put("KEY2", value1);
    args.put("KEY3", value2);
    args.put("KEY4", value3);
    args.put("KEY5", value4);

    db.update(TABLE_DETAILS, args, "id=" + rowId, null);
} 
```

并在要更新行值的任何地方使用它。

```
db.updateRow(id, name, string1, string2, string3, string4); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T12:47:39.413

你的功能`editChild`完全没问题。

现在问题可能来自光标端。或关于数据库打开或关闭。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-04T14:59:06.947

两件事情。

1）您需要关闭光标。就个人而言，我让框架通过使用`startManagingCursor(mYourCursor);`而不是尝试记住自己来处理它。

2) Android 期望您的行 id 为“_id”，因此您可以尝试更改所有表以使用它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-04T12:36:48.977

您需要使用 database.update(TABLE_CHILDREN, args, "id =?",new String{String.valueOf(id)});

# c# - 使用 C# 获取 MOSS 服务器上特定目录中的文档列表

> ID：10011129
> 
> 赞同：1
> 
> 时间：2012-04-04T12:30:49.417
> 
> 标签：c#, xml, web-services, soap, sharepoint-2007

我和我的伙伴必须开发一个系统来上传和管理 Sharepoint Server 上的文件。
为此，我们必须创建一个应用程序，该应用程序可以访问服务器上的特定目录/文件库（将存储文档）来做到这一点，我们希望使用使用 SOAP（Web 服务方法）的方法。我的合作伙伴已经开始了该项目并让服务器做出响应，但这似乎不是正确/最简单的方法，而且我也没有太大的帮助，因为我特别没有 Sharepoint 和 Web 服务的经验肥皂。
到目前为止，我所知道的基本上只是我如何使用 WebServices 列表访问 _vti_bin ，这几乎就是我检查了其他人做过的多个项目，但他们中的大多数都在使用 Sharepoint.Client.dll 参考，这不是

我们遇到的问题：
用户匿名访问被拒绝。
无法访问存储在服务器上的 Client.dll 和其他 DLL。

我们有：
**无法**访问服务器
Visual Studio 2010
Sharepoint 2007

非常感谢和非常需要帮助:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T14:55:07.850

我不太确定我是否理解你的问题。

每个站点在 Sharepoint 中都是“独立的”，例如[http://myMOSSServer/sites](http://myMOSSServer/sites)和[http://myMOSSServer/sites/MySite1](http://myMOSSServer/sites/MySite1)是完全不同的站点 - 您需要分别连接到每个站点。

文档列表中的文件夹/子文件夹主要是为了 UI 的好处 - 在内部，它们存储在平面结构中。

请参阅[包含结果集中文件夹的 CAML 查询，](https://stackoverflow.com/questions/1557675/caml-query-that-includes-folders-in-result-set)了解如何过滤文件夹等

请注意这一点 - 不要将其放入 SPQuery： http: [//moldenco.blogspot.com/2006/11/using-caml-to-filter-infopath-published.html](http://moldenco.blogspot.com/2006/11/using-caml-to-filter-infopath-published.html)

# jquery - 表单展开时移动 DIV（过渡 CSS）

> ID：10011131
> 
> 赞同：0
> 
> 时间：2012-04-04T12:30:56.960
> 
> 标签：jquery, css, html

只需编写一些 CSS，我就有一个非常酷的搜索表单，您可以在其中单击搜索图标，它会使用 CSS 中的“transition: width 0.5 ease-in-out”展开。伟大的。这很好用。

但是，我打算将导航栏放在它右侧的搜索 div 旁边，但是当用户单击搜索按钮时，它当然会重叠。我想知道是否有人知道扩展搜索时导航Div自动向右移动的方式。当表单失去焦点时，我还希望 div 恢复正常（因为搜索栏使用“ease-in-out”功能返回）。

我认为可能有一些 JQuery 可以做到，但如果有的话我真的不知道怎么写？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T14:02:04.167

确实有一个 jQuery 方法可以帮助您解决这个问题。您可以使用[jQuery 的 .animate()](http://api.jquery.com/animate/)为您处理过渡。

```
$('#search').click(function() {
    $('#navigation').animate({width: '100px'}, 500);
} 
```

当您单击搜索元素并在 0.5 秒内为该过渡设置动画时，这会将导航的宽度缩小到 100 像素。

您可能需要使用 CSS 来阻止分页流，但设置溢出属性应该很容易做到这一点。

# android - 自定义微调器动画不够流畅：frameCount 和 frameDuration 错误

> ID：10011138
> 
> 赞同：8
> 
> 时间：2012-04-04T12:31:12.987
> 
> 标签：android, android-layout, android-animation, android-progressbar

我正在开发一个自定义的不确定微调器，我浏览了 SDK 以获取一些指针，并找到了 Google 制作的不确定微调器 xml 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<animated-rotate xmlns:android="http://schemas.android.com/apk/res/android"
android:drawable="@drawable/spinner_black_16"
android:pivotX="50%"
android:pivotY="50%"
android:framesCount="12"
android:frameDuration="100" /> 
```

当我在自己的项目中将其用作可绘制对象时，我收到关于`android:framesCount`和的错误`android:framesDuration`。在谷歌上看了一会儿后，我发现了[这个](http://code.google.com/p/android/issues/detail?id=19248)指向问题报告的链接。

我的问题是：有什么解决方法让我仍然可以使用`android:framesCount`and`android:framesDuration`吗？或者有没有其他方法可以让我的自定义微调器旋转平滑？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T19:44:05.263

你看过这个问题的答案吗？[如何在 Android 中进行平滑的图像旋转](https://stackoverflow.com/questions/1634252/how-to-make-a-smooth-image-rotation-in-android)看来您遇到了同样的问题。他不使用以下内容：

安卓:framesCount="12" 安卓:frameDuration="100"

由于它似乎是内部的，我建议按照他的方式进行。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-10-02T16:20:50.263

我用旋转替换了动画旋转

```
<rotate xmlns:android="http://schemas.android.com/apk/res/android"
android:drawable="@drawable/ic_loading"
android:pivotX="50%"
android:pivotY="50%" /> 
```

# php - 本地 WAMP 服务器的选择 - 添加 php 扩展的可能性

> ID：10011139
> 
> 赞同：1
> 
> 时间：2012-04-04T12:31:14.903
> 
> 标签：php, wamp

我正在寻找在我的局域网中运行的 WAMP 发行版（在本地主机上）

# 现在

我正在使用 usbwebserver，我喜欢它的简单性。但是当我想向 php 添加扩展时，这种简单性成为了瓶颈。这（在大多数情况下）是不可能的。

# 未来

我正在寻找一个 WAMP 服务器，它非常易于配置，但能够向 WAMP 的 php 模块添加额外的扩展。

有人有什么建议吗？或对这个主题的经验？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T12:32:55.087

根据我的经验，*最好*的WAMP 服务器是[wampserver](http://www.wampserver.com/en/)。易于设置，易于使用，简直太棒了。

# cuda - 可同时调度块数

> ID：10011141
> 
> 赞同：0
> 
> 时间：2012-04-04T12:31:21.750
> 
> 标签：cuda

这个问题也是从以下链接开始的：[共享内存优化混淆](https://stackoverflow.com/q/5610793/1292251)

在上面的链接中，从 talonmies 的回答中，我发现计划运行的块数的第一个条件是“8”。我有 3 个问题，如下所示。

1.  是不是意味着条件 2 和条件 3 的块数超过 8 个时，只能同时调度 8 个块？是否不管cuda环境、gpu设备、算法等任何条件？

2.  如果是这样，这确实意味着在某些情况下最好不要使用共享内存，这取决于。然后我们要思考如何判断哪个更好，使用或不使用共享内存。我认为一种方法是检查是否存在全局内存访问限制（内存带宽瓶颈）。这意味着如果没有全局内存访问限制，我们可以选择“不使用共享内存”。这是好方法吗？

3.  加上上面的问题2，我认为如果我的CUDA程序应该处理的数据很大，那么我们可以认为“不使用共享内存”更好，因为在共享内存中很难处理。这也是好方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T14:46:09.403

同时调度的块的数量总是会受到*某些东西*的限制。

使用 CUDA 占用计算器应该清楚它是如何工作的。三种资源的使用会影响并发调度的块数。它们是`Threads Per Block`、`Registers Per Thread`和`Shared Memory Per Block`。

如果您在2.0 上设置使用 1 `Threads Per Block`、 1`Registers Per Thread`和 1的内核，您将受到8 的限制。如果您开始增加，将继续成为您的限制因素，直到您达到成为限制因素的阈值。由于每个 SM 有 49152 字节的共享内存，这发生在大约 8 / 49152 = 6144 字节（它有点少，因为系统使用了一些共享内存并且它以 128 字节的块分配）。`Shared Memory Per Block``Compute Capability``Max Blocks per Multiprocessor``Shared Memory Per Block``Max Blocks per Multiprocessor``Shared Memory Per Block`

换句话说，给定 8 的限制`Max Blocks per Multiprocessor`，使用共享内存是完全免费的（因为它与并发运行的块的数量有关），只要您保持在`Shared Memory Per Block`成为限制因素的阈值以​​下。

寄存器使用也是如此。

# php - 如何使用javascript编写非英文字符cookie并让php正确读取

> ID：10011142
> 
> 赞同：2
> 
> 时间：2012-04-04T12:31:24.393
> 
> 标签：php, javascript, cookies, utf

我的网站有时需要使用 php 读取 javascript cookie，但有时我会从一些用户那里得到奇怪的字符集，例如 `#16 3CFJ) DD%J,'1 而对于某些用户，它可以正确读取。因此，我认为问题出在客户端。我使用这种方法来编写cookie：

```
 var expireDate = new Date();
        expireDate.setMonth(expireDate.getMonth() + 1);
    var value="Sami";
    document.cookie = "name="+value+";path=/;expires="+expireDate.toGMTString(); 
```

并`$_COOKIE['name']`使用 php 读取它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T13:21:56.240

无法使用标头处理 Cookie。所以，

使用对您的 cookie 进行编码`base64_encode()`，并使用对其进行解码`base64_decode()`以读取它。

要在 Javascript 中编码/解码，[这个](https://stackoverflow.com/a/247261/295264)答案可能会有所帮助。

# javascript - 在 Javascript 中迭代数组集合

> ID：10011146
> 
> 赞同：2
> 
> 时间：2012-04-04T12:31:38.677
> 
> 标签：javascript

我在迭代和获取数组集合中的值时遇到问题（我猜是数组数组）

我希望下面的代码会显示一个警报，依次显示每个数组的 3 个值（例如“婴儿”、“0”和“2”），但警报只显示“0”、“未定义”、“未定义” .

我错过了什么？

声明数组：

```
var ageGroups = [["infant", 0, 2], ["child", 3, 18], ["child", 3, 17], ["adult1", 18, 64], ["adult2", 65, 74], ["adult3", 75, 79]]; 
```

迭代数组

```
for (var item in ageGroups) {
    alert(item[0]);
    alert(item[1]);
    alert(item[2]);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T12:35:06.120

使用`console.log`而不是警报，警报将仅显示 [Object ]，如果变量是对象但在控制台中您可以看到什么样的对象，您可以进一步调试

```
for (var item in ageGroups) { 
    console.log(ageGroups[item][0]); 
    console.log(ageGroups[item][1]); 
    console.log(ageGroups[item][2]); 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T12:35:22.633

```
for (var item in ageGroups) {
    alert(ageGroups[item][0]);
    alert(ageGroups[item][1]);
    alert(ageGroups[item][2]);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-04T12:35:46.403

你的问题是那个项目是你数组的关键

试试这个：

```
for (var item in ageGroups) {
    alert(ageGroups[item][0]);
    alert(ageGroups[item][1]);
    alert(ageGroups[item][2]);
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-04T12:46:50.693

使用该死的[`forEach`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/forEach)！:-) 虽然不是跨浏览器，但 shim 很容易实现。

```
// Call forEach and define the callback function
ageGroups.forEach(loopArray)

// Now let's work with the array!
function loopArray(ageGroup) {
    console.log(ageGroup[0])
    console.log(ageGroup[1])
    console.log(ageGroup[2])
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-04T12:34:07.533

不要用于`for in`在 JavaScript 中迭代数组。其目的是迭代对象属性。而是使用增量 for 循环..

```
for (var i=0; i<ageGroups.length; i++) {
  for (var j=0; j<ageGroups[i].length; j++) {
    console.log(ageGroups[i][j]);
  }

  // Or instead of an inner loop access them individually
  console.log(ageGroups[i][0]);
  console.log(ageGroups[i][1]);
  console.log(ageGroups[i][2]);
} 
```

[看到它在行动...](http://jsfiddle.net/MGBwL/)

例如，如果您只定义`for-in`了一个数组项，如`myArr[3] = 123;`. 在这种情况下，JavaScript 将分配项目 0-2，for 循环将迭代它们，但`for-in`不会。`for-in`更重要的是，外部脚本和框架可能会扩展 Array 原型并添加属性，当您真的只需要数组元素时，这些属性会突然包含在您的迭代器中。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-04T12:34:25.840

你应该做

```
for (i = 0; i <ageGroups.length; i++) {
    var item = ageGroups[i];
    alert(item[0]);
    alert(item[1]);
    alert(item[2]);
} 
```

`for..in`在javascript中用于迭代对象的属性

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-04T12:40:03.740

这是一个优化的`for`循环，我在这里存储长度，因此它不会在每次迭代时评估：

```
 for (var i = 0, l = ageGroups.length; i < l; i++){
    alert(ageGroups[i][0]);
    alert(ageGroups[i][1]);  
    alert(ageGroups[i][2]);      
 } 
```

为了使它与您的示例完全一样，您可以将 ageGroup 的迭代存储在一个变量中：

```
for (var i = 0, l = ageGroups.length, item; i < l; i++){
    item = ageGroups[i];  
    alert(item[0]);
    alert(item[1]);
    alert(item[2]);
} 
```

# json - YQL 可靠性 - 使用 Google Weather API 的示例

> ID：10011147
> 
> 赞同：1
> 
> 时间：2012-04-04T12:31:44.710
> 
> 标签：json, api, yql, reliability

我对 YQL 相当陌生，并且在可靠性方面遇到了一些问题。（来自谷歌 XML 源）

我的请求大约有 50% 的时间失败。我想知道为什么会这样以及如何解决。

我最初的想法是；

*   谷歌是否阻止 YQL 发出成功的请求？
*   YQL 本身不是很可靠吗？

这是输出或 YQL 查询（您可以将其放在地址栏中并不断刷新以查看其成功/失败）。

[YQL JSON](http://query.yahooapis.com/v1/public/yql?q=select%20%2a%20from%20xml%0A%20%20%20%20where%20url=%27http://www.google.com/ig/api?weather=CM12QE%27%0A&format=json&callback=)

* * *

这是我正在使用的 YQL 语句

```
select * from xml
    where url='http://www.google.com/ig/api?weather=CM12QE' 
```

我还在[YQL 控制台上选择 JSON 选项。](http://developer.yahoo.com/yql/console/#h=select%20%2a%20from%20xml%0A%20%20%20%20where%20url%3D%27http%3A//www.google.com/ig/api%3Fweather%3DCM12QE%27%0A)

* * *

难道我做错了什么？YQL 在我的应用程序中用作服务不是很可靠吗？有没有很好的方法来保证预期的结果而无需提出其他请求？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T14:10:37.827

**谷歌是否阻止 YQL 发出成功的请求？**

更常见的情况不是 YQL 成为问题，而是数据源（无论可能是什么）是任何问题的根源。在这种情况下，Google 对您和 YQL 期望得到的响应给出了不同的响应；这是因为 YQL 引擎被重定向到包含 CAPTCHA 输入表单（[示例](http://www.google.com/sorry/?continue=http://www.google.com/ig/api%3Fweather%3DCM12QE)）的页面，而不是所需的 XML。

**YQL 本身不是很可靠吗？**

我使用 YQL 已经很多年了，最常见的问题原因不是 YQL，而是外部数据源。然而，YQL 可能会不时倒下。

**我能做些什么？**

第一步是确定问题到底是什么。基本步骤包括打开诊断和调试。控制台中有复选框，或者在 YQL URL 中放置`diagnostics=true`和。`debug=true`这些提供了有关获取哪些外部资源及其状态信息的详细信息。诊断通常足以确定问题，但调试细节也很好，因为它们提供了 YQL 与外部资源交互的最细粒度的细节。

![YQL 控制台诊断和调试复选框位置](../Images/fbb44a49ce821b0ae1e7c517e6a05b8f.png)

**也可以看看**

*   [http://developer.yahoo.com/yql/guide/yql-network-logging.html](http://developer.yahoo.com/yql/guide/yql-network-logging.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T13:29:46.420

在对请求进行了更多调试后，`&diagnostics=true`我发现 Google 正在阻止 YQL 服务器并通过验证码请求人工验证。

例如，请参阅此链接。 [http://www.google.com/sorry/?continue=http://www.google.com/ig/api%3Fweather%3DCM12QE](http://www.google.com/sorry/?continue=http://www.google.com/ig/api?weather=CM12QE)

这里的答案是`&diagnostics=true`在 url 的末尾使用。并获得一些额外的调试信息。

比较有意思的是，通过控制台运行YQL时，成功率在100%左右

# java - 命名空间感知 XML 解析 - 映射不在根标记中

> ID：10011150
> 
> 赞同：1
> 
> 时间：2012-04-04T12:31:47.507
> 
> 标签：java, xml, xpath, xml-namespaces, xerces

我正在使用 Xerces 2.9.1 执行一些 XML 解析。XML 包含命名空间，我将 Xerces 配置为可感知命名空间。

我定义了两个前缀，**rec**和**com**。rec 在根标签中定义，**com**在每个使用它的节点中声明。

```
<rec:root xmlns:rec="...">
   <rec:dummy ...>
      <com:item xmlns:com="..." />
    ... 
```

解析以下 XPath 表达式时出现异常：

```
/rec:root/rec:dummy/com:item 
```

> XPathStylesheetDOM3Exception：前缀必须解析为命名空间：com

我在博客上找到了这个，它谈到了 Xalan，但我观察到 Xerces 具有相同的行为。

> 好吧，你可能会争论一个设计缺陷，因为它只使用在传递给它的节点上找到的映射，即在我们的例子中，到顶级名称空间声明。因此，让我们将命名空间声明移至顶层，以获取以下 XML 输入

[来源](http://blog.davber.com/2006/09/17/xpath-with-namespaces-in-java/)

将**xmlns:com**移动到根标记可以解决问题，但我无法控制该文件。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T12:47:28.713

xpath 前缀与文档中使用的前缀*无关。*您需要为 xpath 处理程序提供“名称空间的前缀”映射。使用标准的 java DOM 工具，您可以为XPath 实例提供一个[NamespaceContext 。](http://docs.oracle.com/javase/6/docs/api/javax/xml/namespace/NamespaceContext.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-04T13:14:26.390

Assuming you use the DOM Level 3 XPath API then you need to write a class implementing [http://xerces.apache.org/xerces2-j/javadocs/api/org/w3c/dom/xpath/XPathNSResolver.html](http://xerces.apache.org/xerces2-j/javadocs/api/org/w3c/dom/xpath/XPathNSResolver.html) which then returns the right namespace URI when a prefix used in the XPath expression needs to be resolved. That XPathNSResolver then needs to be passed as the third argument to the evaluate method [http://xerces.apache.org/xerces2-j/javadocs/api/org/w3c/dom/xpath/XPathEvaluator.html#evaluate%28java.lang.String,%20org.w3c.dom.Node,%20org.w3c.dom.xpath.XPathNSResolver,%20short,%20java.lang.Object%29](http://xerces.apache.org/xerces2-j/javadocs/api/org/w3c/dom/xpath/XPathEvaluator.html#evaluate%28java.lang.String,%20org.w3c.dom.Node,%20org.w3c.dom.xpath.XPathNSResolver,%20short,%20java.lang.Object%29). As already pointed out, the prefixes in the path expression do not need to be the same as in the XML input document, you simply need to make sure the XPathNSResolver maps prefixes used in the path expressions to the namespace URIs used in the XML document.

# facebook - 我正在尝试使用 Graph API 检索特定类型的新闻提要

> ID：10011154
> 
> 赞同：0
> 
> 时间：2012-04-04T12:32:01.827
> 
> 标签：facebook, facebook-graph-api, feed

我想检索某种类型的活动提要，以消除我的代码中的额外处理。

[https://graph.facebook.com/me/home?limit=200&access_token=](https://graph.facebook.com/me/home?limit=200&access_token=) 我从上面的 URL 获得所有类型的提要.. 有没有办法限制它说只是链接或照片？

我尝试添加`&type=link`，但这没有帮助。
如果这是一个选项，我不介意使用 FQL，但我可以让它返回 JSON 而不是表吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T15:21:54.550

如果您尝试获取用户在其供稿上发布的链接，则有一个单独的图形连接。如下：

[https://graph.facebook.com/xxxxx/links](https://graph.facebook.com/xxxxx/links)

其中 xxxxx 可以是：

1.  “我”查看您自己的链接。（例如：[https](https://graph.facebook.com/me/links) ://graph.facebook.com/me/links ）
2.  您自己的个人资料 ID 或您朋友的 ID（例如：[https](https://graph.facebook.com/60912312/links) ://graph.facebook.com/60912312/links ）
3.  您自己的用户名或您朋友的用户名（例如：[https](https://graph.facebook.com/zuck/links) ://graph.facebook.com/zuck/links ）

# apache-flex - 修改 spark.components.DropDownList 以像 mx.controls.PopUpButton

> ID：10011159
> 
> 赞同：0
> 
> 时间：2012-04-04T12:32:30.237
> 
> 标签：apache-flex, flex4, flex4.5, flex4.6, flex-skins

是否可以向 Spark 的 DropDownList 添加“按钮”功能？（即您从列表中选择一个项目，然后单击“主按钮”以调度一个事件）。

这可以通过创建基于[DropDownListSkin](http://opensource.adobe.com/svn/opensource/flex/sdk/trunk/frameworks/projects/spark/src/spark/skins/spark/DropDownListSkin.mxml)的自定义皮肤并用按钮替换标签来实现：

```
<s:Label id="labelDisplay" verticalAlign="middle" maxDisplayedLines="1" 
    mouseEnabled="false" mouseChildren="false"
    left="7" right="30" top="2" bottom="2" width="75" verticalCenter="1" /> 
```

欢迎任何反馈，我还没有定制皮肤的经验。

或者我应该

```
override mx_internal function openButton_buttonDownHandler() 
```

?

# javascript - Firefox 和 IE9 中的 Javascript 事件

> ID：10011160
> 
> 赞同：2
> 
> 时间：2012-04-04T12:32:31.723
> 
> 标签：javascript, asp.net, internet-explorer, firefox

我在我的 ASP.NET 应用程序中将`oncontextmenu` 一个函数附加到一个单元格`string.Format("OnCellContextMenu({0}, '{1}', true, true)", e.VisibleIndex, e.DataColumn.FieldName)`。

在我的 JS 中，我定义了以下函数。

```
function OnCellContextMenu(visibleIndex, fieldName, hasNote, hasValue) {
    currentVisibleIndex = visibleIndex;
    currentFieldName = fieldName;

    if (fieldName == "Name" || fieldName == "TOTAL") {
        EnableMenuItem('AddNote', false);
        EnableMenuItem('EditNote', false);
        EnableMenuItem('RemoveNote', false);
    }
    else {
        EnableMenuItem('AddNote', !hasNote && hasValue);
        EnableMenuItem('EditNote', hasNote);
        EnableMenuItem('RemoveNote', hasNote);
    }

    window.event.returnValue = false;

    gvPrevisions.SetFocusedRowIndex(visibleIndex);
    GridMenu.ShowAtPos(ASPxClientUtils.GetEventX(event), ASPxClientUtils.GetEventY(event));
} 
```

现在，在 IE 上可以正常工作，但在 Firefox`window.event.returnValue = false;` 上没有执行。我四处搜索，看看 Firefox 是如何处理这个返回值的，我知道我应该调用`e.preventDefault();`insdead 的 window.event。问题是在我的函数`e`中是未定义的。

你能帮我找到一个适用于 FF 和 IE 的解决方案吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T12:57:16.363

您可以重构代码以使用 jQuery，它适用于所有浏览器，例如：

```
$('body').bind('contextmenu', function(e) {
    //Stop browser from opening context menu
    e.preventDefault();
    //Do more stuff
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T15:08:16.793

我找到了出去的路。

我以这种方式声明了一个函数：

```
function OnCellContextMenu(e, visibleIndex, fieldName, hasNote, hasValue) 
```

和这样的关联：

```
e.Cell.Attributes.Add("oncontextmenu", string.Format("OnCellContextMenu(event, {0}, '{1}', true, true)", e.VisibleIndex, e.DataColumn.FieldName)); 
```

然后在我得到`var currentEvent = (window.event) ? window.event : e;` 并`currentEvent`在其他函数调用中使用的函数中`ASPxClientUtils.PreventEventAndBubble(currentEvent);`

干杯

# wix - WiX 检查 .NET Framework 4

> ID：10011164
> 
> 赞同：13
> 
> 时间：2012-04-04T12:32:47.947
> 
> 标签：wix, windows-installer, .net-framework-version

我正在尝试检查运行安装程序时是否安装了 .NET 框架。

我添加了以下内容：

```
<Wix xmlns="http://schemas.microsoft.com/wix/2006/wi" xmlns:netfx="http://schemas.microsoft.com/wix/NetFxExtension">

        <PropertyRef Id="NETFRAMEWORK40FULL"/>
        <Condition Message="This application requires .NET Framework 4.0\. Please install the .NET Framework then run this installer again. Contact support at support@Swiftposter.com if you have further issues.">
            <![CDATA[Installed OR NETFRAMEWORK40FUL]]>
        </Condition> 
```

但是，它似乎总是导致错误，因为即使我安装了完整的 .NET 框架（不仅仅是客户端），它也会一直阻止我。

这是怎么回事？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-04-04T13:55:00.610

NETFRAMEWORK40FUL 需要在 FULL 中有双 L :)

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-09-14T21:09:12.237

这是.net版本的列表:-)

[http://wix.sourceforge.net/manual-wix3/wixnetfxextension.htm](http://wix.sourceforge.net/manual-wix3/wixnetfxextension.htm)

# php - Amazon AWS 访问 Feeds.SubmitFeed 被拒绝

> ID：10011166
> 
> 赞同：1
> 
> 时间：2012-04-04T12:32:52.373
> 
> 标签：php, amazon-mws

我的 API 请求是这样的（摘录）：

```
 [method] => POST
    [uri] => Array
        (
            [scheme] => https
            [host] => mws.amazonservices.com
            [port] => 443
            [user] => 
            [pass] => 
            [path] => /
            [query] => Array
                (
                    [AWSAccessKeyId] => xxx
                    [Action] => SubmitFeed
                    [FeedType] => _POST_FLAT_FILE_FULFILLMENT_DATA_
                    [Marketplace] => xxx
                    [Merchant] => xxx
                    [SignatureMethod] => HmacSHA256
                    [SignatureVersion] => 2
                    [Timestamp] => 2012-04-04T11:42:54Z
                    [Version] => 2009-01-01
                    [Signature] => xxx=
                ) 
```

我得到的响应是这个，如果我在那里输入相同的数据，我从[暂存器中得到的响应也是一样的。](https://mws.amazonservices.com/scratchpad/index.html)

```
Array
(
    [ErrorResponse] => Array
        (
            [xmlns] => http://mws.amazonaws.com/doc/2009-01-01/
            [Error] => Array
                (
                    [Type] => Sender
                    [Code] => AccessDenied
                    [Message] => Access to Feeds.SubmitFeed is denied
                )

            [RequestID] => bac7376f-1b2b-41ae-b2d2-de974b217ee7
        )

) 
```

除了来自 API 响应的错误之外，我还收到“用户权限不足”。当我尝试访问此 URL [https://sellercentral.amazon.com/gp/mws/registration/register.html](https://sellercentral.amazon.com/gp/mws/registration/register.html)具有讽刺意味的是，这是亚马逊告诉我在使用联系表后注册的 URL...

为什么我会收到此错误？我错过了什么？在亚马逊数千页和注册的这个该死的混乱中，我忘记了注册或同意某事吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T14:50:08.203

你有在美国区开户吗？

也许你应该改变'host'参数

[主机] => mws-de.amazonservices.com

# firefox - 如何使用 inIDOMUtils::setContentState 为 DOM 元素设置：悬停状态？

> ID：10011172
> 
> 赞同：1
> 
> 时间：2012-04-04T12:33:06.007
> 
> 标签：firefox, firefox-addon, firebug, firefox-addon-sdk

我正在开发一个 firefox 扩展，我想模拟`:hover`像 firebug 这样的元素的状态。

在`my-script-file.js`我将`mousehover`使用`self.port`元素对象发出，例如`$('#myDiv')[0]`注意 [0] 是获取 DOM 元素而不是 jquery 对象。

我的问题是这段代码不起作用，并且会`domUtil.setContentState(step.element, 0x04);`在线引发错误。错误是：

我进入了[setContentState()](https://developer.mozilla.org/en/XPCOM_Interface_Reference/inIDOMUtils#setContentState%28%29)定义的 firefox 文档站点，我注意到我的元素必须是`nsIDOMElement`我的问题的一个实例，这里是如何将我的选择转换`element`为`nsIDOMElement`对象。

或者实际上我的问题是如何强制使用或 jquery函数`:hover`选择的元素？`document.getElementById``$()`

我阅读了萤火虫源代码并提出了这个片段：

```
var {Cc, Ci, Cr} = require("chrome");
var domUtil = Cc["@mozilla.org/inspector/dom-utils;1"].getService(Ci.inIDOMUtils);

exports.main = function() {
    var attachToTab = function(tab)
    {
        if(currentWorker)
            currentWorker.destroy();

        currentWorker = tab.attach({
            contentScriptFile: [data.url("jquery.js"), data.url("my-script-file.js")]
        });

        currentWorker.port.on('mousehover', function(element){
                console.log('doing setContentState :hover');
                domUtil.setContentState(element, 0x04);
        });
    }

    require("widget").Widget({
        id: "MyAddonBtn",
        label: "Sample",
        contentURL: data.url("images/addon.ico"),
        onClick: function(){
            attachToTab(tabs.activeTab);
        }
    });

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T13:02:30.217

这是附加 SDK 工作方式的问题。内容脚本可以访问页面元素，但它们没有高级权限（需要使用`inIDOMUtils`）。扩展脚本具有高级权限，但它们通常无法访问页面元素。而且 - 不，在消息中发送页面元素将不起作用，消息只接受可以 JSON 化的对象。

唯一的解决方案是跳出 SDK 框架，直接从扩展脚本访问页面。像这样的东西：

```
var attachToTab = function()
{
  var browserWindow = require("window-utils").activeBrowserWindow;
  if (browserWindow && "gBrowser" in browserWindow)
  {
    var doc = browserWindow.gBrowser.contentDocument;
    var element = doc.getElementById("foo");
    if (element)
      domUtil.setContentState(element, 0x04);
  }
}; 
```

`window-utils`package 是低级 API 并且文档记录很差（例如文档`activeBrowserWindow`中没有属性） - 使用风险自负。但它可以直接访问当前浏览器窗口。一旦你在那里，`gBrowser`变量会给你[`<xul:tabbrowser> element`](https://developer.mozilla.org/en/XUL/tabbrowser)。

# c# - 如何在jquery自动完成中传递文本框值

> ID：10011177
> 
> 赞同：2
> 
> 时间：2012-04-04T12:33:18.790
> 
> 标签：c#, javascript, jquery

我在我的 Web 应用程序（.Net 3.5）的某些文本框中使用 jquery 自动完成功能。我的问题是前缀文本始终为空白。不会为其分配正确的值。

```
function TextBoxAutoComplete(scope, controlId, contextKeyId) {

var txtbox = null;
var flagValue;
if (scope) {
    txtbox = $('input[id$="' + controlId + '"]', scope);
} else {
    txtbox = $('input[id$="' + controlId + '"]', document);
}

var contextKeyValue = $('input[id$="' + contextKeyId + '"]', document).val();

$(txtbox).autocomplete("../Handlers/MiscHandler.ashx", {
    minChars: 0,
    extraParams: { prefixText: $(this).val(), count: '10', contextKey: contextKeyValue, flag: 'codePart' },
    selectFirst: false,
    width: 49
}).result(function(event, data, formatted) { // result is a separate function
    var dummy = new Object();
    dummy.value = data[1];
    dummy.text = data[0];
    var test = new Test(dummy);
});
} 
```

我在文档准备好时调用上述方法。这里的问题是当我将它传递给变量'prifixText'prefixText时我没有得到文本框值（当前输入的文本） **：$（this）.val（）**

谁能帮我解决这个问题？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T12:47:34.570

尝试使用`search`事件，在您的示例中，您处于错误的范围内。

[http://jqueryui.com/demos/autocomplete/#event-search](http://jqueryui.com/demos/autocomplete/#event-search)

设置选项使用[http://jqueryui.com/demos/autocomplete/#method-option](http://jqueryui.com/demos/autocomplete/#method-option)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T10:43:54.953

终于在朋友的帮助下找到了答案。

从处理程序“../Handlers/MiscHandler.ashx”中，我尝试通过访问“prefixText”的值来访问文本框文本，如下所示。

```
string prefixText = string.Empty;
if (context.Request["prefixText"] != null)
{
prefixText = context.Request["prefixText"].ToString();
} 
```

但它没有用，不允许我获取文本框的值。而不是我访问了查询字符串中的“q”参数，这是默认的。

```
if (context.Request["q"] != null)
{
prefixText = context.Request["q"].ToString();
} 
```

这很完美，jquery 代码没有问题，问题是我如何处理 HTTP 请求。谢谢。

# iphone - 我需要为 iTunesArtwork 文件添加光泽效果吗？

> ID：10011182
> 
> 赞同：1
> 
> 时间：2012-04-04T12:33:41.323
> 
> 标签：iphone, ios, itunesartwork

对于我们的应用程序，我们有一个平面图标，我们*确实*希望操作系统为其添加光泽效果，因此我们*没有*在 Info.plist 中设置 UIPrerenderedIcon 标志。我们的 iTunesArtwork 文件有一个更大的版本，它是一个 PNG。我们是否需要自己为 iTunesArtwork 添加光泽效果，还是应用商店会为我们添加？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T12:38:50.550

应用商店会为您完成，您无需涂抹光泽。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-04T12:39:41.820

如果您设置 UIPrerenderedIcon 标志，您的 iTunesArtwork 将自动获得光泽效果。

# php - 如何递归地构建一个树深度未知我有一个带有树数据结构的 MySQL 表。字段是_id、name 和parentId。当记录没有父记录时，parentId 默认为 0。这样我可以构建一个数组，然后递归打印每条记录。构建的数组如下所示： Array ( [1] => Array ( [parentId] => 0 [name] => countries [_id] => 1 [children] => Array ( [2] => Array ( [paren

> ID：10011194
> 
> 赞同：5
> 
> 时间：2012-04-04T12:34:28.330
> 
> 标签：php, recursion, tree

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-04T12:37:29.693

传递一个参数来计算迭代次数`$pass`

```
function toUL ($arr, $pass = 0) {

    $html = '<ul>' . PHP_EOL;

    foreach ( $arr as $v ) {           

        $html.= '<li>';
        $html .= str_repeat("--", $pass); // use the $pass value to create the --
        $html .= $v['name'] . '</li>' . PHP_EOL;

        if ( array_key_exists('children', $v) ) {
            $html.= toUL($v['children'], $pass+1);
        }

    }

    $html.= '</ul>' . PHP_EOL;

    return $html;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-04T13:03:27.760

您的问题已在 SPL 中解决。[`RecursiveIteratorIterator`^(*文档*)](http://www.php.net/manual/en/class.recursiveiteratoriterator.php)有关于一个人的项目深度的信息：

```
$it = new RecursiveIteratorIterator(new RecursiveArrayIterator($array), SELF_FIRST);
foreach ($it as $key => $element)
{
    if ($key !== 'name') continue;
    $inset = str_repeat('--', $it->getDepth());
    printf('<option>%s %s</option>', $inset, $element);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-04T12:47:52.797

```
function toSelect($arr, $depth = 0) {

    $html = '';

    foreach ( $arr as $v ) {           

        $html.= '<option>' . str_repeat("--", $depth) . $v['name'] . '</option>' . PHP_EOL;

        if ( array_key_exists('children', $v) ) {
            $html.= toSelect($v['children'], $depth++);
        }

    }

    return $html;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-17T21:15:41.227

嗨，伙计们，你可以做这样的事情：我有这个对象`$tree`：

```
 Array
(
    [0] => stdClass Object
        (
            [id] => 1
            [nombre] => Category 1
            [subcategorias] => Array
                (
                    [0] => stdClass Object
                        (
                            [id] => 4
                            [nombre] => Category 1.1
                        )

                )

        )

    [1] => stdClass Object
        (
            [id] => 2
            [nombre] => Category 2
        )

    [2] => stdClass Object
        (
            [id] => 3
            [nombre] => Category 3
            [subcategorias] => Array
                (
                    [0] => stdClass Object
                        (
                            [id] => 5
                            [nombre] => Category 3.1
                            [subcategorias] => Array
                                (
                                    [0] => stdClass Object
                                        (
                                            [id] => 6
                                            [nombre] => Category 3.1.1
                                        )

                                )

                        )

                )

        )

) 
```

然后这里是如何为 HTML 选择创建数组：

```
 $tree=array();// PUT HERE YOUR TREE ARRAY
    $arrayiter = new RecursiveArrayIterator($tree);
    $iteriter = new RecursiveIteratorIterator($arrayiter);
    $lista=array();
    $i=0;
    foreach ($iteriter as $key => $value) 
    {
        $id=$iteriter->current();
        $iteriter->next();
        $nivel=$iteriter->getDepth();
        $nombre=str_repeat('-',$nivel-1).$iteriter->current();
        $lista[$id]=$nombre;
    } 
```

你会得到这样的东西：

```
 Array
(
    [1] => Category 1
    [4] => --Category 1.1
    [2] => Category 2
    [3] => Category 3
    [5] => --Category 3.1
    [6] => ----Category 3.1.1
) 
```

然后，您只需要使用简单的 foreach 为选择创建选项。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-07T09:28:31.127

我的最终解决方案（感谢 Starx 和 varan）：

```
function toSelect ($arr, $depth=0) {    
    $html = '';
    foreach ( $arr as $v ) {

        $html.= '<option value="' . $v['_id'] . '">';
        $html.= str_repeat('--', $depth);
        $html.= $v['name'] . '</option>' . PHP_EOL;

        if ( array_key_exists('children', $v) ) {
            $html.= toSelect($v['children'], $depth+1);
        }
    }

    return $html;
}

echo '<select>';
echo toSelect($array);
echo '</select>'; 
```

甚至`RecursiveIteratorIterator`解决方案也很好（感谢 hakre）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-06-30T15:01:54.210

您可以使用 optgroup 作为迭​​代器。例如：

```
<select name="list">
  <option value=1>1st option</option>
  <optgroup>
    <option value=10>1st on 1st group</option>
  </optgroup>
</select> 
```

如果你想要php，你可以试试这个：

```
<?PHP
function toSELECT($arr,$depth=0)
{
$html="";
if(is_array($arr))
    {
    $html.=($depth==0)?"<select name='html'>\n":"";
    foreach ($arr as $key=>$value)
        {
        if(is_array($arr[$key]))
            {
            $html.=str_repeat("\t",$depth)."<optgroup>\n";
            $html.=str_repeat("\t",$depth).toHTML($arr[$key],$depth+1);
            $html.=str_repeat("\t",$depth)."</optgroup>\n";
            }
        else
            {
            $html.=str_repeat("\t",$depth)."<option value='".$value."'>".$key."</option>\n";
            }
        }
    $html.=($depth==0)?"</select>\n":"";
    }
return $html;
}

?> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-04T12:37:36.340

您可以将长度传递给函数并在递归调用时递增它，然后使用变量`$length`来确定深度

```
function toUL ($arr, $length = 0) {

    $html = '<ul>' . PHP_EOL;

    foreach ( $arr as $v ) {

        $html.= '<li>' . $v['name'] . '</li>' . PHP_EOL;

        if ( array_key_exists('children', $v) ) {
            $html.= toUL($v['children'], $length++);
        }

    }

    $html.= '</ul>' . PHP_EOL;

    return $html;
} 
```

这是我通常用来跟踪递归深度的方法，它通常可以完成工作

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-04-04T12:37:42.387

```
function toUL ($arr, $depth = 0) {
//    ...
$html .= toUL($v['children'], $depth+1); 
```

# java - 带有身份验证的 httpget 请求

> ID：10011205
> 
> 赞同：6
> 
> 时间：2012-04-04T12:35:13.520
> 
> 标签：java, android, http

我试图用代码发出http get请求：

```
String username = "test\\v100";
String host = "1.2.3.4";
String password = "pass";

HttpClient client = new DefaultHttpClient();

AuthScope as = new AuthScope(host, 90);
UsernamePasswordCredentials upc = new UsernamePasswordCredentials(username, password);

((AbstractHttpClient) client).getCredentialsProvider().setCredentials(as, upc);

BasicHttpContext localContext = new BasicHttpContext();

BasicScheme basicAuth = new BasicScheme();
localContext.setAttribute("preemptive-auth", basicAuth);

HttpHost targetHost = new HttpHost(host, 90, "http");

HttpGet httpget = new HttpGet("/");

HttpResponse response = client.execute(targetHost, httpget, localContext); 
```

但是在最后一行得到一个异常“java.net.SocketException：Permission denied”。

带有 Eclipse IDE 的 Android-2.2。

主机系统中的 curl 请求

```
curl -u test\v100:pass "http://1.2.3.4:90" 
```

工作正常。

我怎样才能以正确的方式发出http请求？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T12:48:50.903

您是否在清单文件中添加了互联网权限？

如果没有，请在您的 AndroidManifest.xml 中添加这一行：

```
<uses-permission android:name="android.permission.INTERNET" /> 
```

# c# - 应用程序在 appharbor 上启动时 Ninject 崩溃

> ID：10011214
> 
> 赞同：13
> 
> 时间：2012-04-04T12:35:53.320
> 
> 标签：c#, asp.net-mvc-3, ninject, appharbor

我在部署在 appharbor 上的 MVC 3 项目中使用 Ninject。我注意到应用程序启动时出现异常，看起来 Ninject 内部的某些东西是原因，但我找不到任何答案 - 所以请帮助我:)

将尝试在此处添加完整的异常：

```
Server Error in '/' Application.

Object reference not set to an instance of an object.

Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code. 

Exception Details: System.NullReferenceException: Object reference not set to an instance of an object.

Source Error: 

An unhandled exception was generated during the execution of the current web request. Information regarding the origin and location of the exception can be identified using the exception stack trace below.

Stack Trace: 

[NullReferenceException: Object reference not set to an instance of an object.]
   NewRelic.Agent.Core.AgentShim.GetTracer(String tracerFactoryName, UInt32 level, String metricName, String assemblyName, String className, String methodName, String argumentSignature, Object invocationTarget) +51
   System.AppDomain.CreateDomain(String friendlyName, Evidence securityInfo, AppDomainSetup info) +99
   Ninject.Modules.AssemblyNameRetriever.CreateTemporaryAppDomain() in c:\Projects\Ninject\ninject\src\Ninject\Modules\AssemblyNameRetriever.cs:68
   Ninject.Modules.AssemblyNameRetriever.GetAssemblyNames(IEnumerable`1 filenames, Predicate`1 filter) in c:\Projects\Ninject\ninject\src\Ninject\Modules\AssemblyNameRetriever.cs:47
   Ninject.Modules.CompiledModuleLoaderPlugin.LoadModules(IEnumerable`1 filenames) in c:\Projects\Ninject\ninject\src\Ninject\Modules\CompiledModuleLoaderPlugin.cs:81
   Ninject.Modules.ModuleLoader.LoadModules(IEnumerable`1 patterns) in c:\Projects\Ninject\ninject\src\Ninject\Modules\ModuleLoader.cs:60
   Ninject.KernelBase.Load(IEnumerable`1 filePatterns) in c:\Projects\Ninject\ninject\src\Ninject\KernelBase.cs:236
   Ninject.KernelBase..ctor(IComponentContainer components, INinjectSettings settings, INinjectModule[] modules) in c:\Projects\Ninject\ninject\src\Ninject\KernelBase.cs:97
   Ninject.KernelBase..ctor(INinjectModule[] modules) in c:\Projects\Ninject\ninject\src\Ninject\KernelBase.cs:57
   Ninject.StandardKernel..ctor(INinjectModule[] modules) in c:\Projects\Ninject\ninject\src\Ninject\StandardKernel.cs:46
   Checkin.App_Start.NinjectWebCommon.CreateKernel() in d:\temp\44uvjuob.32m\input\Checkin\App_Start\NinjectWebCommon.cs:43
   Ninject.Web.Common.Bootstrapper.Initialize(Func`1 createKernelCallback) in c:\Projects\Ninject\Ninject.Web.Common\src\Ninject.Web.Common\Bootstrapper.cs:50
   Checkin.App_Start.NinjectWebCommon.Start() in d:\temp\44uvjuob.32m\input\Checkin\App_Start\NinjectWebCommon.cs:26

[TargetInvocationException: Exception has been thrown by the target of an invocation.]
   System.RuntimeMethodHandle._InvokeMethodFast(IRuntimeMethodInfo method, Object target, Object[] arguments, SignatureStruct& sig, MethodAttributes methodAttributes, RuntimeType typeOwner) +0
   System.RuntimeMethodHandle.InvokeMethodFast(IRuntimeMethodInfo method, Object target, Object[] arguments, Signature sig, MethodAttributes methodAttributes, RuntimeType typeOwner) +69
   System.Reflection.RuntimeMethodInfo.Invoke(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture, Boolean skipVisibilityChecks) +242
   System.Reflection.RuntimeMethodInfo.Invoke(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture) +21
   System.Reflection.MethodBase.Invoke(Object obj, Object[] parameters) +19
   WebActivator.BaseActivationMethodAttribute.InvokeMethod() +223
   WebActivator.ActivationManager.RunActivationMethods() +493
   WebActivator.ActivationManager.RunPreStartMethods() +28
   WebActivator.ActivationManager.Run() +55

[InvalidOperationException: The pre-application start initialization method Run on type WebActivator.ActivationManager threw an exception with the following error message: Exception has been thrown by the target of an invocation..]
   System.Web.Compilation.BuildManager.InvokePreStartInitMethods(ICollection`1 methods) +377
   System.Web.Compilation.BuildManager.CallPreStartInitMethods() +267
   System.Web.Hosting.HostingEnvironment.Initialize(ApplicationManager appManager, IApplicationHost appHost, IConfigMapPathFactory configMapPathFactory, HostingEnvironmentParameters hostingParameters, PolicyLevel policyLevel, Exception appDomainCreationException) +690

[HttpException (0x80004005): The pre-application start initialization method Run on type WebActivator.ActivationManager threw an exception with the following error message: Exception has been thrown by the target of an invocation..]
   System.Web.HttpRuntime.FirstRequestInit(HttpContext context) +532
   System.Web.HttpRuntime.EnsureFirstRequestInit(HttpContext context) +90
   System.Web.HttpRuntime.ProcessRequestNotificationPrivate(IIS7WorkerRequest wr, HttpContext context) +172

Version Information: Microsoft .NET Framework Version:4.0.30319; ASP.NET Version:4.0.30319.272 
```

如果我重新加载页面 - 异常消失。这可能与使用 ninject 过滤器有关：

```
this.BindFilter<AdminAuthorizationAttribute>(FilterScope.Controller, -100)
    .When((context, ad) => context.RouteData.DataTokens["area"] != null &&
            ((string)context.RouteData.DataTokens["area"]).ToLower() == "admin" && 
            ((string)context.RouteData.Values["controller"]).ToLower() != "login"); 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-04T22:09:22.300

该问题不是由 Ninject 引起的。罪魁祸首是 NewRelic.Agent.Core.AgentShim（由 AppHarbor 使用）。

虽然查看堆栈跟踪，但我认为您可以通过禁用 Ninject 的自动扩展加载功能并手动加载它们来解决这个问题。

```
var kernel = new StandardKernel(new NinjectSettings { LoadExtensions = false })
kernel.Load(new Ninject.Web.Mvc.MvcModule()); // same for all other extension modules 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T23:02:27.513

我们暂时禁用了 New Relic 插件并从 AppHarbor 服务器中删除了 New Relic 代理。一旦 New Relic 不再对平台上运行的应用程序造成问题，我们将重新添加它。

# ruby-on-rails - 如何使用 Ruby 在远程服务器上运行 shell 命令？

> ID：10011215
> 
> 赞同：0
> 
> 时间：2012-04-04T12:35:59.967
> 
> 标签：ruby-on-rails, ruby, shell, sftp

Ruby 脚本中有没有办法 sftp 到服务器并运行一些命令。

这是我的脚本

```
Net::SFTP.start(IP_ADDRESS, 'root', :keys => ["/Users/user/.ssh/id_rsa"]) do |sftp|
    sftp.mkdir! "/srv/new_dir"
    sftp.dir.foreach("/srv/crm/current") do |entry|
      puts entry.longname
      sftp.file.open("/srv/new_dir", "w") do |f|
        f.puts entry
      end
    end
end 
```

基本上我正在尝试 sftp 到服务器并将一个文件夹复制到一个新文件夹中，我想重新启动 apache。我试过这个：

```
FileUtils::sudo "/etc/init.d/apache2 reload" 
```

但这不起作用。任何想法我做错了什么，或者这是否可能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T14:07:17.240

由于您实际上并没有进行任何文件传输，因此我认为您不需要使用 SFTP。您可以简单地使用[`Net::SSH`](http://net-ssh.github.com/ssh/v2/api/index.html). 然后您就可以正常访问 shell，而您的 Apache 命令只是此过程中的另一个步骤。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T13:37:14.503

我会用[Capistrano](https://github.com/capistrano/capistrano/wiki/)来做。

**更新：**

Capistrano 专为部署 Rails 应用程序而设计，但您可以将其用作管理远程机器的工具。用一个简单的食谱，你就可以完成你的工作。

假设你有一个像这样的 Capfile：

```
desc "sample recipe"
task :sample do
    Dir.glob('**/*') do |f|
        upload f, "tmp/#{f}" 
    end
    run 'ls -lr'
end

role :app, "host name or ip"
set :user, "user_name" 
```

然后您可以运行`cap sample`以上传文件并运行任何命令。

这可能有点矫枉过正，但它比使用 Net API 容易得多。

# c# - 我如何调用返回 List<> 的映射器方法

> ID：10011217
> 
> 赞同：1
> 
> 时间：2012-04-04T12:36:10.427
> 
> 标签：c#, entity-framework, list, mapper

我正在尝试从我的映射器返回一个对象列表并将它们保存到我的实体框架数据库中。我的映射器类看起来像这样

```
 class TimereportMappers
    {        
    public List<Days> dayMap(List<Day> days)
    {
        List<Days> output = new List<Days>();

        foreach (Common.Day input in days)
        {
            output.Add(new Days()
            {
                Date = input.Date,
                Hour = input.Hours
            });
            //output.Date = input.Date;
            //output.Hour = input.Hours;
        }

        return output;
    }

} 
```

我的数据访问类中的问题是我不知道如何将对象保存到我的数据库中，数据访问类中的方法如下所示

```
 public void sendDays(List<Common.Day> days)
        {
            TimereportMappers mapper = new TimereportMappers();
            context.Days.AddObject(mapper.dayMap(days));         
            context.SaveChanges();
        } 
```

但是 AddObject 只能添加 1 个对象？如何添加对象列表？

Visual Studio 给了我错误代码

> 错误 2 参数 1：无法从 'System.Collections.Generic.List' 转换为 'Timereport.BusinessLogic.Data_Access.Days' C:\Users\widde\Documents\Visual Studio 2010\Projects\Timereport\Timereport.BusinessLogic\TimereportDataAccess。 cs 43 37 Timereport.BusinessLogic

和

> 错误 1 ​​'System.Data.Objects.ObjectSet.AddObject(Timereport.BusinessLogic.Data_Access.Days)' 的最佳重载方法匹配有一些无效参数 C:\Users\widde\Documents\Visual Studio 2010\Projects\Timereport\Timereport .BusinessLogic\TimereportDataAccess.cs 43 14 Timereport.BusinessLogic

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T12:53:58.867

这行得通吗？（我不能明显地测试这个，但想法是一次只添加 1 个对象实例而不是整个列表）

sendDays 方法：

```
public void sendDays(List<Common.Day> days)
{
    TimereportMappers mapper = new TimereportMappers();

    foreach (var day in days)
    {
        context.Days.AddObject(mapper.dayMap(day));
    }

    context.SaveChanges();
} 
```

TimereportMappers 类：

```
class TimereportMappers
{
    public Days dayMap(Day input)
    {
        return new Days
        {
            Date = input.Date,
            Hour = input.Hours
        };
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T12:40:31.117

调用`AddObject()`多次并调用`SaveChanges()`一次？

# android - 如何在android中删除保存在DDMS数据中的所有文件？

> ID：10011218
> 
> 赞同：0
> 
> 时间：2012-04-04T12:36:10.753
> 
> 标签：android, file, delete-file, ddms

我通过下面的代码保存了一些 ser 文件

```
OutputStream file = context.openFileOutput(fileName, Context.MODE_PRIVATE);

            BufferedOutputStream buffer = new BufferedOutputStream( file );

            ObjectOutput output = new ObjectOutputStream(buffer);

            try{

              output.writeObject(map1);

            } 
```

现在请告诉我如何删除通过此代码保存的所有文件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T05:22:33.520

您可以这样做，获取要删除所有文件的文件夹的路径，然后将所有文件一一删除。

```
File dir = new File("/data/directory_name/");

if (dir.isDirectory()) {
        String[] children = dir.list();
        for (int i = 0; i < children.length; i++) {
            new File(dir, children[i]).delete();
        }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T12:52:40.167

试试这个代码

```
File file = new File(Environment.getExternalStorageDirectory()+"/filenameWithExtenstion");
file.delete(); 
```

# iphone - 如何从另一个 NSMutableArray 中删除一个 NSArray 的对象？

> ID：10011219
> 
> 赞同：-1
> 
> 时间：2012-04-04T12:36:12.823
> 
> 标签：iphone, arrays, logic

我有2个数组，

我想从另一个中删除一个。

我不能使用 removeObject: 因为指针不同。

我正在根据它们的属性删除对象（xa == ya）

如何根据对象的属性从另一个数组中删除对象？

谢谢，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T13:15:08.513

试试这个

```
NSMutableArray *arrFirst = [NSMutableArray arrayWithObjects:[NSDictionary dictionaryWithObjectsAndKeys:@"1",@"topic_id",@"abc",@"topic_name",nil],
                     [NSDictionary dictionaryWithObjectsAndKeys:@"2",@"topic_id",@"opq",@"topic_name",nil],
                     [NSDictionary dictionaryWithObjectsAndKeys:@"3",@"topic_id",@"xyz",@"topic_name",nil], nil];

NSArray *arrSec = [NSArray arrayWithObject:[NSDictionary dictionaryWithObjectsAndKeys:@"2",@"topic_id",@"opq",@"topic_name",nil]];

NSArray *temp = [arrFirst filteredArrayUsingPredicate:[NSPredicate predicateWithFormat:@"SELF IN %@",arrSec]];
[arrFirst removeObjectsInArray:temp];
NSLog(@"%@",arrFirst); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T12:44:19.757

试试这个例子

```
for(int i = 0; i< firstArray.count ; i++){
   NSString *first = [firstArray objectAtIndex:i];
   for(int j = 0; j< secondArray.count; j++){
      NSString *second = [econdArray objectAtIndex:j];
      if([first isEqualToString:second]){

         /// Do your methods

      }
   }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T12:46:31.957

单个 for 循环就足够了，因为另一个想法是通过子类化或创建自己的类别来覆盖 removeobject 方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-04T12:51:42.347

```
BOOL GotOne = NO;

for(int i =0; i < mutableArray.count; i++)
{
    NSArray *temp = [mutableArray objectAtIndex:i];

    for(int j = 0; j < temp.count; j++)
    {
      //Do what u want with temp or check any condition
        if(success)
         {
           GotOne = YES;
           break;
         }
     }
     if(GotOne)
      {
          [mutableArray removeObjectAtIndex:i];
          GotOne = NO;
      }
} 
```

# objective-c - 初始化 bool 数组 - 返回 null

> ID：10011221
> 
> 赞同：0
> 
> 时间：2012-04-04T12:36:17.643
> 
> 标签：objective-c, ios, arrays, boolean

我在初始化一个布尔数组时遇到了很多问题。使用时，`NSLog`我不断得到`(null)`. 我正在尝试设置`piecesInPlace`具有 40 个 NO 的可变数组。我已经尝试更改`setupArrayWithFalses`为以`YES`进行测试，但仍然得到`(null)`.

```
BOOL setupArrayWithFalses = NO;
for (int i=0; i<40; i++) {
    [piecesInPlace addObject:[NSNumber numberWithBool:setupArrayWithFalses]];
}
NSLog(@"Value of object: %@", [piecesInPlace objectAtIndex:0]); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-04T12:38:17.207

你在初始化你的数组吗？

```
piecesInPlace = [[NSMutableArray alloc] init]; 
```

# gcc - gcov 不生成 gcda 文件

> ID：10011222
> 
> 赞同：5
> 
> 时间：2012-04-04T12:36:23.783
> 
> 标签：gcc, gcov

我尝试使用`-fprofile-arcs`&运行 gcov，`-ftest-coverage`但没有任何链接。

它给出了这个错误： -

```
 hidden symbol `__gcov_init' in /home/mojave/tools/gcc-4.4.1/amd64/bin/../lib/gcc/x86_64-unknown-linux-gnu/4.4.1/libgcov.a(_gcov.o) is referenced by DSO 
```

和程序退出。

编译命令——

```
bsub -g /mojave/build/"DummyDate" -J compile-obj/linux24rhel3_x86_64_GCOV64/DXp.o -I -q DFM -S 8192 -R "(model==OPTERON_250)" '/usr/bin/time --format="          ...finished DXp [`hostname`] [%E s with %P CPU]"  /home/mojave/tools/gcc-4.4.1/amd64/bin/g++ -fPIC -Wall -Wno-deprecated -DTCL_8_5 -m64 -march=opteron -DLITTLE_ENDIAN_PLATFORM -DARCH=amd64 -DARCH_amd64 -DARCH_BITS=64 -DARCH_BITS_64 -fsigned-char -msse3 -D__DISABLE_MULTITHREAD__ -D_CPP_NUMERIC_LIMITS -mfpmath=sse,387 -mmmx -m3dnow -pipe -Dgcc -DLICENSE_ALWAYS_GOOD -I/home/mojave/tools/flexlm/include/v8.4 -DNO_SUPPORT_STABIE -DGCOV -I../dxpclient -I/home/mojave/tools/bzip2-1.0.2/amd64/include -I/home/mojave/tools/zlib-1.2.3/amd64/include -I/home/mojave/tools/tcltk8.5.2/amd64//include -I/home/mojave/tools/tcltk8.5.2/amd64//include -g -fprofile-arcs -ftest-coverage -DBUILD_DATE=\""UNSET"\" -DVERSION_NUMBER=\"Dum.Dum.Dum.Dummy\" -DEXT_VERSION_NUMBER=\"Dum.Dum.Dum.Dummy\" -DLAST_RELEASE_VERSION=\"1.1614\" -Wreturn-type -DTCL_8_5 -DGOOGLE_MALLOC -L../dx/linux24rhel3_x86_64_GCOV64/ -ldx -o obj/linux24rhel3_x86_64_GCOV64/DXp obj/linux24rhel3_x86_64_GCOV64/DXp.o -Wl -lgcov /home/mojave/tools/zlib-1.2.3/amd64/lib/libz.a  -L/home/mojave/tools/bzip2-1.0.2/amd64/lib -lbz2    -ldl' 
```

任何帮助将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-16T04:09:13.433

`-fprofile-arcs`用和编译`-ftest-coverage`。`-lgcov`在生成共享对象期间链接。它会起作用的。

您也可以使用`--coverage`option 作为所有三个步骤的同义词

查看：[gcc 检测选项](https://gcc.gnu.org/onlinedocs/gcc-6.1.0/gcc/Instrumentation-Options.html#Instrumentation-Options)以获取更多信息

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-02-01T19:06:15.400

我刚刚发现，如果我向我的程序发送 sig kill 或 sig term，则只会生成 GCNO 文件，没有 gcda 文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-10-13T11:08:43.400

在考虑编译标志后，如上面[crazy_prog 所述](https://stackoverflow.com/users/738737/crazy-prog)，检查“路径”。在使用 lcov/gcov 进行覆盖时，路径起着重要作用。

因此，您创建二进制文件的路径（完整路径字符串）和运行二进制文件的路径应该完全相同。

出于我的目的，由于二进制文件的创建和二进制文件的执行在不同的地方（一个在开发环境中，另一个在实际板中），所以使用软链接/快捷方式，我创建了类似的路径，因此运行可执行文件。最后，可以在开发环境中生成报告（通常，因为板载的实际平台可能不支持 lcov 工具）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-02-18T04:55:44.137

除了上面的编译选项和链接选项，我的输入是如果你用非优雅的方式杀死一个程序，比如ctrl-c，程序不会干净退出，不会生成gcda文件。

所以解决这个问题，即使你使用 ctrl-c 也会生成 gcda 文件，执行以下操作：

```
void handler(int signum)
{
     /* SIGTERM dnd clean up (close file descriptors, etc).  */

     exit(0);
}

int main(int argc, char *argv[])
{
    signal(SIGTERM, handler);
    signal(SIGHUP, handler);
    signal(SIGINT, handler);
    ....
} 
```

# php - 使用 url 参数发布到 twitter

> ID：10011224
> 
> 赞同：0
> 
> 时间：2012-04-04T12:36:45.787
> 
> 标签：php, twitter

我为骑自行车创建了一个慈善网站，当有人报名参加骑行时，我想发布到 facebook twitter 等。只需制作一个分享按钮就可以让 facebook 工作，但 twitter 有一个小问题

我要发送到 twitter 的链接中有一个“&”，以便用户被定向到 twitter 帖子的赞助页面，但 twitter 链接会删除“&”之后的所有内容

[http://twitter.com/home?status=](http://twitter.com/home?status=Sponser)请赞助我+http://www. ***** .co.uk/index.php?mode=sponser&id=$id"

我已经删除了该网站的网址，因为我还没有完全保护它并上线。&

如何在 twitter 提要中获取 '&id='

在此先感谢巴里

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T12:39:02.557

`&`在查询字符串中具有特殊含义（它指示下一个键值对的开始）。

用于[`urlencode`](http://php.net/urlencode)转义数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T12:40:25.457

您需要正确编码 URL

```
http://twitter.com/home?status=Sponser+Me+Please%2Bhttp%3A%2F%2Fwww.%2A.co.uk%2Findex.php%3Fmode%3Dsponser%26id%3D%24id 
```

示例代码：

```
echo "<a href=\"http://twitter.com/home?status=" . urlencode('Sponser Me Please+http://www.*.co.uk/index.php?mode=sponser&id=$id') . "\"> Twitter Status </a>"; 
```

# wpf - 如何设置 TabItem 的 Header Foreground？

> ID：10011229
> 
> 赞同：1
> 
> 时间：2012-04-04T12:37:04.117
> 
> 标签：wpf

我有一个 TabControl，在其他选项卡中，我有一个名为“错误”的选项卡。当某个名为“ErrorsExist”的属性设置为 true 时，我需要它的标题前景变为红色。这是我的代码：

```
 <TabControl >
            <TabControl.Resources>
                <conv:ErrorsExistToForegroundColorConverter x:Key="ErrorsExistToForegroundColorConverter"/>

                <Style TargetType="{x:Type TabItem}">
                    <Setter Property="HeaderTemplate">
                        <Setter.Value>
                            <DataTemplate>
                                <TextBlock Foreground="{Binding  Path=ErrorsExist, Converter={StaticResource ErrorsExistToForegroundColorConverter}}" Text="{Binding}"/>
                            </DataTemplate>
                        </Setter.Value>
                    </Setter>
                </Style>
            </TabControl.Resources>

            <TabItem x:Name="ErrorsTab" Header="Errors"> 
```

这是我的转换器：

```
 public class ErrorsExistToForegroundColorConverter: IValueConverter
{

public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
    {
       switch ((bool)value)
       {
          case true:
             return Brushes.Red;
          case false:
             return Brushes.Black;
          default:
             return Binding.DoNothing;
       }
    } 
```

我有两个问题。

首先，这会将所有选项卡标题设置为红色，我只需要为 ErrorsTab 选项卡执行此操作。

其次，它只是不起作用。我的意思是，转换器的 Convert() 方法永远不会被调用。你能帮我解决这个问题吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T13:07:30.280

仅将样式分配给您想要更改的 TabItem 并更好地使用 DataTrigger 来完成这个简单的任务：

```
<TabItem x:Name="ErrorsTab" Header="Errors">
    <TabItem.Style>
      <Style TargetType="{x:Type TabItem}">
        <Style.Triggers>
          <DataTrigger Binding="{Binding ErrorsExist}" Value="True">
              <Setter Property="Foreground" Value="Red"/>
          </DataTrigger>
         </Style.Triggers>
       </Style>
    </TabItem.Style>
  </TabItem> 
```

**编辑：**

问题是 TabItem Header 没有继承父 TabItem 的 DataContext。如果您想让它与转换器一起使用，请手动设置 TabHeader DataContext：

```
 <TextBlock DataContext="{Binding DataContext, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type TabItem}}}" 
                     Foreground="{Binding ErrorsExist,Converter={StaticResource ErrorsExistToForegroundColorConverter}}" Text="{Binding}"/> 
```

# c# - 相当于 30 分钟的计时器滴答声是多少？

> ID：10011230
> 
> 赞同：4
> 
> 时间：2012-04-04T12:37:04.333
> 
> 标签：c#, timer

我有一个计时器滴答，我想每 30 分钟启动一次我的后台工作人员。计时器滴答的 30 分钟的等效值是多少？

下面是代码：

```
 _timer.Tick += new EventHandler(_timer_Tick);
        _timer.Interval = (1000) * (1);              
        _timer.Enabled = true;                       
        _timer.Start();       

    void _timer_Tick(object sender, EventArgs e)
    {
        _ticks++;
        if (_ticks == 15)
        {
            if (!backgroundWorker1.IsBusy)
            {
                backgroundWorker1.RunWorkerAsync();
            }

            _ticks = 0;
        }
    } 
```

我不确定这是否是最好的方法，或者是否有人有更好的建议。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-04T12:39:40.740

计时器的[Interval](http://msdn.microsoft.com/en-us/library/system.timers.timer.interval.aspx)属性以毫秒为单位，而不是滴答声。

因此，对于每 30 分钟触发一次的计时器，只需执行以下操作：

```
// 1000 is the number of milliseconds in a second.
// 60 is the number of seconds in a minute
// 30 is the number of minutes.
_timer.Interval = 1000 * 60 * 30; 
```

但是，我不清楚`Tick`您使用的事件是什么。我想你的意思是[Elapsed](http://msdn.microsoft.com/en-us/library/system.timers.timer_events.aspx)？

**编辑**CodeNaked 明确表示，您说的是[System.Windows.Forms.Timer](http://msdn.microsoft.com/en-us/library/xdh6857z.aspx)，而不是[System.Timers.Timer](http://msdn.microsoft.com/en-us/library/0tcs6ww8.aspx)。幸运的是，我的回答适用于两者:)

最后，我不明白你为什么`_ticks`在你的方法中维护一个计数（）`timer_Tick`。你应该重写它如下：

```
void _timer_Tick(object sender, EventArgs e)
{
    if (!backgroundWorker1.IsBusy)
    {
        backgroundWorker1.RunWorkerAsync();
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-03-16T09:26:45.550

为了使代码更具可读性，您可以使用`TimeSpan`该类：

```
_timer.Interval = TimeSpan.FromMinutes(30).TotalMilliseconds; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T13:07:00.253

没有很好地回答问题。但如果你只想要 30 分钟的间隔，那么给 timer1.interval = 1800000;

// 一毫秒有 10,000 个滴答声（不要忘记这个）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-10-24T02:31:51.727

```
using Timer = System.Timers.Timer;

[STAThread]

static void Main(string[] args) {
    Timer t = new Timer(1800000); // 1 sec = 1000, 30 mins = 1800000 
    t.AutoReset = true;
    t.Elapsed += new System.Timers.ElapsedEventHandler(t_Elapsed);
    t.Start(); 
}

private static void t_Elapsed(object sender, System.Timers.ElapsedEventArgs e) {
// do stuff every 30  minute
} 
```

# php - 循环使用 PHP 和 MySQL 更新表数据

> ID：10011232
> 
> 赞同：0
> 
> 时间：2012-04-04T12:37:12.730
> 
> 标签：php

我正在开发一个应用程序，它根据从另一个表中选择的值更新表中的数据。我已经搜索了网络，并尝试修改一些示例以满足我的需要，但仍然无法正常工作。

下面是我的一些代码：

```
$sync_2 = "
  select pin,ddt_1
  from purchases
  where (amount_to_repay-amount_repaid)>0
    and status like 'U%'
    and counter=1
";
$sync_2_res = mysqli_query($link, $sync_2);
$row = mysqli_fetch_assoc($sync_2_res);
$data = mysqli_num_rows($sync_2_res);

$i;
for ($i = 0; $i <= $data; $i++) {
  $pin = $row['pin'];
  $ddt = $row['ddt_1'];
  $sql = "
    update deductions
    set amount = '$ddt_1'
    where pin = '$pin';
  $result = mysqli_query($link,$sql);
} 
```

什么都没有填充。我必须更改循环的类型吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T12:55:16.120

试试这个代码，它应该在一个查询中完成整个操作：

```
$query = "
  UPDATE `deductions` `d`
  JOIN `purchases` `p` ON `p`.`pin` = `d`.`pin`
  SET `d`.`amount` = `p`.`ddt_1`
  WHERE
    (`p`.`amount_to_repay` - `p`.`amount_repaid`) > 0
    AND `p`.`status` LIKE 'U%'
    AND `p`.`counter` = 1
";
$result = mysqli_query($link, $query); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T12:46:47.420

正如您所给出的，您的变量在 sql 语句中将 $ddt_1 更改为 $ddt 可能存在问题

```
 for($i=0;$i<=$data;$i++)

 {
 $pin=$row['pin'];
 $ddt=$row['ddt_1];
 $sql="update
  deductions
 set amount='$ddt'
 where pin='$pin';
$result=mysqli_query($link,$sql);
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T12:48:50.160

改进的 PHP 示例

```
$mysqli = new mysqli ( "localhost", "root", "", "test" );
$sql  = "SELECT pin , ddt_1  from purchases WHERE  amount_to_repay-amount_repaid  >  0  AND  status like 'U%' AND counter = 1";
$sql2 = "update deductions  set amount = '%s'  where pin = '%s'; ";
$result = $mysqli->query($sql);
$row = null ;
while ($row = $result->fetch_assoc())
{
     $mysqli->query(sprintf ( $sql, $row ['pin'], $row ['ddt_1'] ));
} 
```

**旧帖子**

代替

```
 $ddt=$row['ddt_1]; 
```

和

```
 $ddt=$row['ddt_1']; 
```

代替

```
set amount='$ddt_1' 
```

和

```
set amount='$ddt' 
```

我希望这有帮助

谢谢

:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-04T13:17:32.567

首先要注意的是**mysqli_fetch_assoc()**只获取一行，即光标所在的行。然后它将光标移动一行。当游标到达数据末尾时**mysqli_fetch_assoc()**返回**NULL**。

因此，要遍历一组结果，人们通常使用**while 循环**，因为这是最简洁的：

```
$sync_2_res = mysqli_query($link, $sync_2);

if($sync_2_res == null) {
    echo "The sync2 query failed: " . mysqli_error($link);
    exit();
}

while($row = mysqli_fetch_assoc($result) {
    // do something with $row
} 
```

检查查询是否有效并返回结果而不是 FALSE 也是一个好主意。

接下来，我认为第二个查询中有一个错字：`$dtt_1`应该是`$dtt`，您真的确定该`amount`字段应该设置为字符串吗？

无论如何，这就是我将如何重写您的代码：

```
$sync_2= "select pin,ddt_1 from purchases "
    . "where (amount_to_repay-amount_repaid)>0 "
    . "and status like 'U%' and counter=1";

$sync_2_res=mysqli_query($link,$sync_2);

// check the query worked
if(!$sync_2_res) {
    echo "The sync2 query failed: " . mysqli_error($link);
    exit();
}

while($row = mysqli_fetch_assoc($result) {
    // do something with $row
    $pin=$row['pin'];
    $ddt=$row['ddt_1'];
    // note change from $ddt_1 to $dtt
    $sql="update deductions set amount='$ddt' where pin='$pin';";

    $result=mysqli_query($link,$sql);
    // check query worked
   if(!$result) {
      echo "The 2nd query failed: " . mysqli_error($link);
   }
} 
```

# hash - 哈希上的多次迭代：它不会减少熵吗？

> ID：10011233
> 
> 赞同：6
> 
> 时间：2012-04-04T12:37:12.990
> 
> 标签：hash, md5, iteration, sha1

我看到在很多地方（包括堆栈）都推荐了这种技术，我不能忘记这会减少熵！毕竟，您正在再次散列一些已经被散列并且有碰撞机会的东西。碰撞机会超过碰撞机会不会导致更多的碰撞机会吗？经过研究，似乎我错了，但为什么呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T04:01:08.187

由于您标记了 md5，我将使用它作为示例。来自[维基百科](http://en.wikipedia.org/wiki/Md5#Collision_vulnerabilities)：

> 如果可以构造具有相同哈希的两个前缀，则可以向两者添加一个共同的后缀，以使使用它的应用程序更有可能将冲突作为有效数据接受。此外，当前的冲突查找技术允许指定任意前缀：攻击者可以创建两个以相同内容开头的冲突文件。攻击者生成两个冲突文件所需的只是一个模板文件，其中包含一个 128 字节的数据块，对齐在 64 字节的边界上，可以通过冲突查找算法自由更改。一个示例 MD5 冲突，两条消息的 6 位不同，是：

然后他们给出的示例明文长度为 256 个字节。由于碰撞攻击依赖于 128*字节*的数据块，而哈希摘要只有 128*位*，因此在第一次迭代之后，碰撞攻击成功的风险实际上并没有增加——也就是说，你真的不能影响超出第一个哈希的冲突的可能性。

还要考虑哈希的熵是前面提到的 128 位。即使考虑到总碰撞几率仅为 2^20.96（再次来自[wikipedia](http://en.wikipedia.org/wiki/Comparison_of_cryptographic_hash_functions)），也需要大量迭代才能导致两个输入发生碰撞。我认为你成为受害者的第一眼推理是：

*   任意两个任意输入都有 x% 的碰撞机会。
*   第一个哈希的输出本身就是两个这样的输入。
*   因此，每次迭代都会增加 x% 的碰撞机会。

这可以很容易地通过反例来反驳。再次考虑 MD5：

*   两个输入发生冲突的几率是 1:2^21（取自维基百科对 MD5 的密码学分析的最坏情况）
*   再次哈希会导致同样可能的碰撞机会复合，因此第二轮碰撞的机会是 1:2^20
*   因此，对于任何两个输入的散列次数等于摘要的熵，都保证会发生冲突。

MD5 任意两个连续输入 128 次，你会发现这不是真的。您可能不会在它们之间找到一个重复的哈希值 - 毕竟，您只在可能的 2^128 个哈希值中创建了 256 个，剩下 2^120 个可能性。每轮之间的碰撞概率[独立](http://www.mathgoodies.com/lessons/vol6/independent_events.html)于所有其他轮。

有两种方法可以理解为什么会这样。首先是每次迭代本质上都是试图击中一个移动的目标。我认为您可以基于生日悖论构建一个证明，即散列迭代的次数非常少，您可能会看到来自一个输入的一个散列摘要与不同输入的散列摘要匹配。但它们几乎肯定会发生在迭代的*不同步骤中。*一旦发生这种情况，它们在同一次迭代中永远不会有相同的输出，因为哈希算法本身是确定性的。

另一种方法是意识到哈希函数在运行时实际上会增加熵。考虑一个空字符串有一个 128 位的摘要，就像任何其他输入一样；如果没有在算法步骤中添加熵，这是不可能发生的。这实际上是加密散列函数的必要部分：必须销毁数据，否则可以从摘要中恢复输入。对于比摘要更长的输入，是的，熵总体上会丢失；它必须是为了适合摘要长度。但也增加了一些熵。

对于其他散列算法，我没有准确的数字，但我认为我所做的所有要点都可以推广到其他散列函数和单向/映射函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-03-11T13:42:18.567

它确实减少了熵。

在 Flajolet 和 Odlyzko 的一篇名为[*Random Mapping Statistics*](https://hal.inria.fr/file/index/docid/75445/filename/RR-1114.pdf)的论文中，一个定理（定理 2）表明：

“如果一个*n*位随机函数迭代*k*次，预期的图像点数为 ( *1 - t_k* ) * *2^n* (对于大*n* )，其中*t_k*满足递归关系*t_0 = 0*和*t_{k+1 "* _ *_* _ *_* _

进一步参考如下：

*   Gligoroski, D. 和 Klima, V.，2010 年 9 月。窄管散列设计偏离理想随机函数的实际后果。在 ICT 创新国际会议上（第 81-93 页）。施普林格柏林海德堡。

*   Bhaumik, R.、Dutta, A.、Guo, J.、Jean, J.、Mouha, N. 和 Nikolić, I.，2015 年。[更多轮次，更少安全性？](https://hal.inria.fr/hal-01241075/document)

*   Dinur, I. 和 Leurent, G.，2014 年 8 月。改进了针对基于哈希的 MAC 和 HAIFA 的通用攻击。在国际密码学会议上（第 149-168 页）。施普林格柏林海德堡。

从上一篇参考论文中，我们会发现以下两个引理： [关于熵损失](https://i.stack.imgur.com/yeJ6m.png)的两个引理。*因此，如果使用k*个独立的随机函数，而不是使用一个迭代*k*次的随机函数，对熵损失的观察也成立。

# actionscript-3 - Actionscript 3 - 有没有办法将对象保存到数组中？

> ID：10011234
> 
> 赞同：1
> 
> 时间：2012-04-04T12:37:17.887
> 
> 标签：actionscript-3, flash-builder, flash-cs5

是否可以将 Sprite 保存到数组中？

我想要的是自动生成 Sprites（通过使用 for 循环）然后将每个 Sprites 存储到一个数组中，这样我以后就可以控制它们了。

所以我不需要这样做一百万次：

```
var s:Sprite = new Sprite(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T12:43:04.983

首先，声明一个属性`sprites`来保存精灵：

```
var sprites:Array = []; 
```

然后创建精灵并将它们添加到数组中：

```
var s:Sprite;
for (var i:int = 0; i < 100; i++) {
    s = new Sprite();
    sprites.push(s);
    // ...
} 
```

现在，您可以使用它们在数组中的索引来检索精灵：

```
var s:Sprite = sprites[23];
// ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T12:40:01.897

是的你可以。

```
var s:Sprite;
var sprites:Array = [];
for (var i:int=0; i<200; i++)
{
  s = new Sprite();
  sprites.push(s);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T16:42:39.227

```
//put iteration no here how many you want

var no_sprit:int = 10;    
var sprite_array = [];

for (var i:int = 0; i < no_sprit:int; i++) {    
    var my_sprite:Sprite = new Sprite();    
    sprite_array[i] = my_sprite;    
}

// you can get these sprite     
your_sprite = sprite_array[0]; 
```

# ruby-on-rails - 带有“as”参数的 Rails 命名空间路由

> ID：10011235
> 
> 赞同：1
> 
> 时间：2012-04-04T12:37:17.987
> 
> 标签：ruby-on-rails, ruby, namespaces, routes

我想`:as`在命名空间路由上使用参数，如下所示：

**路线.rb**

```
map.namespace :banana, :as => 'apple', do |banana|
  ...
end 
```

但似乎该`:as`参数仅适用于`map.resources`. 我错过了什么，我应该重构我的路线吗？

对于这种情况，我被困在 Rails 2.3.8 上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T12:48:04.633

:as 仅适用于 map.resource，因为它被用作覆盖路由的一种方式，而不是使用模型的类名。这是[2.3 Rails 文档](http://guides.rubyonrails.org/v2.3.8/routing.html)

为什么要打扰`:as => 'apple'`并只使用苹果作为命名空间？

```
map.namespace :apple do |apple|
  ...
end 
```

# c# - 按键是什么？

> ID：10011238
> 
> 赞同：1
> 
> 时间：2012-04-04T12:37:23.223
> 
> 标签：c#, visual-studio-2010

我今天有一个案例，我正在移动一些 C# 代码，而我的胖手指无意中碰到了一些键。我有一行写着：

```
List<IntSite> siteList = ... 
```

在键盘摸索之后，它就像这样隔开：

```
List < IntSite > siteList = ... 
```

我似乎找不到这样做的捷径……有人知道吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T12:46:09.507

如果您的样式设置为以这种方式插入空格，它看起来像`CTRL`- `K`+ `CTRL`- `D`，或者`CTRL`- `K`+ `CTRL`-`F`如果您选择了文本。

如果他们自己做的话，你的手指可能会做一些事情！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T12:40:28.327

代码的自动布局可以做到这一点。例如，如果您复制并粘贴一些代码，它会自动为您布局，前提是代码在语法上是正确的。

现在，如果您`Ctrl-Z`在这样的复制/粘贴之后立即点击 (Undo)，或者在您点击`;`，`Enter`或`}`任何其他执行自动布局的键之后，布局将被恢复。

假设我采用以下代码段：

```
List < int > x = new List < int > () ; 
```

我将它复制并粘贴到 Visual Studio 中，它看起来像：

```
List <int> x = new List <int>(); 
```

如果我现在点击`Ctrl-Z`它，它将恢复到原来的 spacy 布局。

当然，这是一个猜测，但也许你不经意间撞到了`Ctrl-Z`。

# assembly - 在 x86 AT&T 汇编中将命令行参数视为整数

> ID：10011246
> 
> 赞同：1
> 
> 时间：2012-04-04T12:37:52.283
> 
> 标签：assembly, x86, intel

这个（Linux、AT&T、Intel）x86 程序旨在读取三个参数并将最大的参数存储在 %ebx 中作为存在状态。当我将参数弹出到寄存器中时，结果值似乎是字节。如何获得 int 值？

[编辑——感谢哈罗德在下面的评论，我认为问题是我如何使用`atoi`来获取 args 的 int 值。]

```
.section .text

.globl _start           

_start:
popl    %edi        # Get the number of arguments
popl    %eax        # Get the program name
popl    %ebx        # Get the first actual argument 
movl    (%ebx), %ebx    # get the actual value into the register (?) 
popl    %ecx        # ;
movl    (%ecx), %ecx
popl    %edx        #
movl    (%edx), %edx

bxcx:   
cmpl    %ebx,%ecx
jle     bxdx
movl    %ecx,%ebx
bxdx:
cmpl    %ebx,%edx
jle end
movl    %edx,%ebx

end:
movl    $1,%eax         
int $0x80 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T15:17:17.817

为了能够调用`atoi`，您需要链接到 libc。例如：

```
ld -lc foo.o 
```

要实际进行调用，您需要遵循 cdecl 调用约定：

1.  函数的参数在堆栈上传递，最左边的参数最后被压入。
2.  函数的返回值将放在累加器中（在本例中为 %eax）。
3.  寄存器 %ebp、%esi、%edi 和 %ebx 在调用之间保留，因此您可以将它们用于临时存储。
4.  任何其他需要的寄存器必须由调用代码保存（在上面的被调用者保存的寄存器中，在参数之前的堆栈中，或内存中的其他位置）。

的签名`atoi`是

```
int atoi(const char *nptr); 
```

所以要获得第一个命令行参数的整数值，我们可以这样做

```
.section .text

.globl _start           

_start:
popl    %edi        # Get the number of arguments
popl    %eax        # Get the program name
call    atoi        # Try to read the first argument as an integer and clobber %eax with the value 
```

# opencv - BGR 到 YCrCb 和返回到 BGR 之间的转换

> ID：10011248
> 
> 赞同：2
> 
> 时间：2012-04-04T12:37:54.023
> 
> 标签：opencv

我试图从 BGR 转换为 YCrCb 以增加亮度并将其转换回 BGR

cvSplit(亮度, y, cr, cb, 0); << 拆分不需要按顺序吧？

...对亮度分量做一些事情

cvMerge(temp_y, cr, cb, 0, luma); << 亮度、Cr 和 Cb 的正确顺序是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-04T14:47:09.033

要在不同的颜色空间之间进行转换，您需要使用[cvtColor](http://opencv.willowgarage.com/documentation/cpp/imgproc_miscellaneous_image_transformations.html#cvtColor)。要从 BGR 到 YCC，您应该传递参数`CV_BGR2YCrCb`（然后再返回是`CV_YCrCb2BGR`）。正确的用法是：

```
cvtColor(src, dest, CV_BGR2YCrCb) 
```

您的源框架在哪里`src`，并且`dest`将是您处理的框架（您可以将其放在`src`这里以进行适当的更改）。

`cvSplit`这不是您需要的，因为它只是将多通道阵列拆分为几个单通道阵列（其组件）。所以如果你有一个 BGR 帧的视频，`cvSplit`可以只给你单独的 B、G、R 通道。

如果您想单独处理 Y 通道，您可以转换颜色空间，然后拆分然后合并回来，如下所示：

```
cvtColor(frame, frame, CV_BGR2YCrCb)
cvSplit(frame, Y, Cr, Cb, NULL)
#Process the Y channel here.
cvMerge(Y, Cr, Cb, NULL, frame)
cvtColor(frame, frame, CV_YCrCb2BGR) 
```

如果你只是想增加图像的亮度，一个更简单的方法（你不需要使用亮度）是为每个通道添加一个缩放器：

```
cvAddS(frame, cvScalar(30,30,30), frame) 
```

# c - 使用 epoll_create1() 代替 epoll_create() 有什么好处

> ID：10011252
> 
> 赞同：10
> 
> 时间：2012-04-04T12:38:18.017
> 
> 标签：c, asynchronous, network-programming, epoll

我正在重写一个多线程 Linux-2.6.32+ 应用程序以替换[`select`](https://www.kernel.org/doc/man-pages/online/pages/man2/select.2.html)为[`epoll`](https://www.kernel.org/doc/man-pages/online/pages/man4/epoll.4.html).

[epoll_create1(2)](https://www.kernel.org/doc/man-pages/online/pages/man2/epoll_create1.2.html)的手册页声明：

> 如果 flags 为 0，则除了删除**过时的大小参数**之外，epoll_create1() 与 epoll_create() 相同。

然而，这个*过时的大小参数*不是在[`epoll_wait(2)`](https://www.kernel.org/doc/man-pages/online/pages/man2/epoll_wait.2.html)as 中使用`maxevents`吗？

```
epoll_wait(int epfd, struct epoll_event *events,
                  int maxevents, int timeout); 
```

这意味着在使用 epoll 时，我们可以避免声明最大事件数，`epoll_create1`但迟早我们必须在调用时引用它`epoll_wait`？如果是这样，那么带入`epoll_create1`游戏的意义何在？

感谢您在这个问题上启发我。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-04T12:44:19.153

使用`epoll_wait()`,`maxevents`告诉您将*返回*给您的最大事件数。它与内核中维护了多少无关。

旧版本的`epoll_create()`使用大小来设置某些限制，但不再这样做，因此该`size`参数已过时的评论。源代码（[`fs/eventpoll.c`](https://github.com/torvalds/linux/blob/master/fs/eventpoll.c#L2093)截至本答案时）表明了这一点：

```
SYSCALL_DEFINE1(epoll_create1, int, flags) {
    return do_epoll_create(flags);
}
SYSCALL_DEFINE1(epoll_create, int, size) {
    if (size <= 0) return -EINVAL;
    return do_epoll_create(0);
} 
```

您可以看到它们几乎相同，除了：

*   `epoll_create1()`接受标志，将它们传递给`do_epoll_create()`;
*   `epoll_create()`接受大小，检查它，否则忽略它；
*   `epoll_create()`将默认标志（无）传递给`do_epoll_create()`.

因此 using 的优点是它允许您指定标志，我认为目前仅限于 close-on-exec （以便在-ing 另一个程序`epoll_create1()`时自动关闭文件描述符）。`exec`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-04T12:52:07.650

`epoll_create1()`提供一种设置标志的方法。现在无需设置大小。

实际上在内核源代码中：/fs/eventpoll.c

```
SYSCALL_DEFINE1(epoll_create, int, size)
{
    if (size <= 0)
        return -EINVAL;

    return sys_epoll_create1(0);
} 
```

该`epoll_wait()`参数`max_events`用于控制返回 fd 计数而不是整个`eventpoll`结构中的总 fd 计数

# android - 如何将可搜索项的 EditText 中的文本小写？

> ID：10011261
> 
> 赞同：14
> 
> 时间：2012-04-04T12:38:44.020
> 
> 标签：android

我在我的 Android 项目中使用带有建议的可搜索项目。它本质上是一个 EditText

```
<searchable xmlns:android="http://schemas.android.com/apk/res/android"
    android:label="@string/app_name"
    android:hint="@string/search.hint" 
    android:includeInGlobalSearch="true"
    android:searchSettingsDescription="@string/search.hint"
    android:searchSuggestAuthority="com.xxx.android.provider.SearchSuggestionsProvider"
    android:searchSuggestSelection=" ?"
    android:inputType="text"
    android:imeOptions="actionSearch">
</searchable> 
```

当我开始输入时，它显示为首字母大写。为什么？我希望它以小写字母开头。可能吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2017-05-01T15:12:31.890

我很惊讶还没有一个好的答案。或者也许是我找不到的另一个问题。

所以这是我的解决方案。

```
editText.setFilters(new InputFilter[] {
    new InputFilter.AllCaps() {
        @Override
        public CharSequence filter(CharSequence source, int start, int end, Spanned dest, int dstart, int dend) {
            return String.valueOf(source).toLowerCase();
        }
    }
}); 
```

`editText`无论如何，所有文本都是小写的。

您可以随意修改字符串。
例如：您希望所有文本都是小写并且不允许有空格（假设它是一个电子邮件输入字段）

你可以`return ...`像这样替换它：

```
return String.valueOf(source).toLowerCase().replace(" ", ""); 
```

您可以允许或拒绝单个字符的相同方式。
此示例将 all`e`或`E`替换为`3`。

```
return String.valueOf(source).replace("e", "3").replace("E", "3"); 
```

等等。

我希望这可以帮助别人。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-04-04T14:05:34.697

如果您希望第一个字符默认为小写，您可以使用 - `android:capitalize="none"`。然后您将需要手动单击一个按钮以大写第一个字符。否则请点击[此链接。](https://stackoverflow.com/questions/4462797/making-sure-edittext-only-returns-single-lowercase-letters)

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2018-10-30T21:01:40.317

不确定建议的答案是否有效，但我发现了一个影响我之前使用的解决方案的错误。在某些键盘（特别是三星键盘）中，当启用“智能文本”时，字符会被重复。

最好的解决方案是创建一个 AllLowerInputFilter 类，我基本上改编自 Android 自己的 AllCaps 实现。它适用于我测试过的每个键盘，无论是否启用“智能文本”。

```
class AllLowerInputFilter : InputFilter {

    override fun filter(source: CharSequence, start: Int, end: Int, dest: Spanned?, dstart: Int, dend: Int): CharSequence? {

        for (i in start until end) {
            if (source[i].isUpperCase()) {
                val v = CharArray(end - start)
                TextUtils.getChars(source, start, end, v, 0)
                val s = String(v).toLowerCase()

                return if (source is Spanned) {
                    val sp = SpannableString(s)
                    TextUtils.copySpansFrom(source, start, end, null, sp, 0)
                    sp
                } else {
                    s
                }
            }
        }

        return null // keep original
    }
} 
```

并且会像这样使用：

```
editText.filters = arrayOf(AllLowerInputFilter()) 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2019-09-17T22:49:35.910

***kotlin***中的解决方案：

```
editText.filters = arrayOf<InputFilter>(object : InputFilter.AllCaps() {
        override fun filter(source: CharSequence?, start: Int, end: Int, dest: Spanned?, dstart: Int, dend: Int) = 
              source.toString().toLowerCase()
        }) 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2013-10-03T13:34:14.500

尝试 ，

```
android:digits="qwertyuiopasdfghjklzxcvbnm" 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2012-04-04T13:17:45.250

有多种 inputType 选项，但没有一个专门用于保持文本小写。

您可能想在此处查看它们的完整列表：http: [//developer.android.com/reference/android/widget/TextView.html#attr_android :inputType](http://developer.android.com/reference/android/widget/TextView.html#attr_android:inputType)

我希望“textUri”会做你想做的事。

输入文本后，您始终可以对文本使用 String.toLowerCase() 函数。

否则，您可以添加一个 TextWatcher 到您的 EditText，并根据您的特定条件验证每个输入事件。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2020-01-23T12:33:45.457

如果你想让第一个字符变小

```
android:inputType="text" 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-02-07T11:04:23.967

提供我的`Kotlin`解决方案

```
editText.filters = arrayOf(
        yourFilter01(), // if you have
        yourFilter02(),  // if you have
        InputFilter { source, _, _, _, _, _ ->
            source.toString().toLowerCase()
        }
) 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-11-15T13:33:46.720

我的解决方案：如果`android:inputType`设置为，`"textPassword"`那么一切都是小写的。所以如果它设置为`"textVisiblePassword"`那么一切都是小写的。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-02-03T16:58:25.117

基于@THEPATEL 的回答并丢弃 AllCaps 类，这是一个更紧凑的版本（前提是您使用 Java 8）：

```
editText.setFilters(new InputFilter[] {
            (src, start, end, dest, dstart, dend) -> src.toString().toLowerCase()
    }); 
```

# objective-c - 如何将 iphone/ipad 与远程 MSSQLSERVER 数据库连接？

> ID：10011267
> 
> 赞同：1
> 
> 时间：2012-04-04T12:39:02.127
> 
> 标签：objective-c, ios, sql-server-2008

有人有想法吗？我一直在谷歌搜索，但没有找到太多：/

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T12:46:08.650

您必须创建一个 Web 服务并从您的 Ipad/Iphone 客户端调用它。

Web 服务将负责获取和设置数据库上的数据。

# sql - 如何找到具有已定义列的表？

> ID：10011269
> 
> 赞同：4
> 
> 时间：2012-04-04T12:39:05.937
> 
> 标签：sql, db2

我正在使用 db2，我想查找具有名为“person_name”的列的表。我听说过一个 syscat 表或类似的东西。

我该如何使用它，是否可以这样做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T12:55:30.603

```
select 
    *
from 
  syscat.columns
where
 colname = 'person_name' 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-04T12:46:55.450

```
 select 
  tabname,
  colname,
  typename,
  length,
  scale,
  default,
  nulls,
  identity,
  genereted,
  remark,
  keyseq 
from 
  syscat.columns 
```

# c# - 从 2D 到 3D 的移动

> ID：10011274
> 
> 赞同：16
> 
> 时间：2012-04-04T12:39:35.940
> 
> 标签：c#, 3d, xna, 2d

谁能给我一些意见或建议

我需要找出照片中的物体从一个位置移动到另一个位置的程度（实际上，我需要计算相机在两张图像之间移动了多少，但是因为该物体将保持静止并且仅在其 Y 轴上旋转我认为移动图像会更容易）。与此示例几乎相同，但没有那么复杂。 ![在此处输入图像描述](../Images/1f2d616a064c6a4ee1e05c4e285f02c2.png)

因此，我拍摄了魔方的第一张照片，并按照此处的示例在立方体上选择 4 个点。 ![在此处输入图像描述](../Images/383bed4ef1165502d64a1244668cfb27.png) 图像是 Texture2D，蓝色圆圈代表用户选择的立方体正面的 4 个点。这 4 个点存储在列表中，并加载下一个看起来像这样 ![在此处输入图像描述](../Images/6670bd3ad13b984e232ee62125781485.png) 的图像 用户必须再次选择与前一个相同的人脸（白脸）的 4 个点。然后将这 4 个点存储到一个新列表中。

所以现在我有两个列表，我需要计算“整个正面”从图像 1 移动（旋转/缩放/平移）到图像 2 的程度，如下所示 ![在此处输入图像描述](../Images/74d831d8457c8863d85f1b1faf988635.png)

但更重要的是，我需要在 3D 中计算这个运动！所以对于第一张图像，我假设 z 分量 = 0。例如，我假设图像 1 的左上角 = 例如 (10, 10, 0)。

有没有一种方法可以“假设”如果图像 2 的面以某种方式旋转/缩放/平移，那么它可以在 3D 空间中移动？因此，如果图像 2 的左上角在图像 1（起始图像）左上角的右侧，则相机必须向右移动。分数的上升或下降也是如此？至于旋转，我是否可以计算图像 1 的点之间的角度和图像 2 的点之间的角度，并以某种方式计算相机旋转了多少？

对于我的代码，我在想这样的事情吗？

```
// Image 1 coordinates for the front face 
// Assume z = 0 
cube1 = new List<Vector3>(); 
cube.Add(new Vector3(10, 10, 0)); 
cube.Add(new Vector3(20, 10, 0)); 
cube.Add(new Vector3(10, 20, 0)); 
cube.Add(new Vector3(20, 20, 0)); 

// Get image 2 coordinates 
cube2 = new List<Vector3>(); 
cube.Add(new Vector3(newX, newY, ?)); // Keep Z = 0?
cube.Add(new Vector3(newX, newY, ?)); 
cube.Add(new Vector3(newX, newY, ?)); 
cube.Add(new Vector3(newX, newY, ?)); 
```

对于向左或向右移动，只需计算每个点移动了多少

```
//Translation 
Matrix translating = Matrix.CreateTranslation(new Vector3(amountMovedX, amountMovedY,   0)); 
List<Vector3> imageAfterTranslating = transformListOfVertices(imageAfterScaling, translating); 
```

对于歪斜（我有点卡住了）....

```
// Rotation 
Matrix rotation = Matrix.CreateFromAxisAngle( 
Vector3.Normalize(new Vector3(?, ?, ?)), MathHelper.ToRadians(?));   // Not sure here 
List<Vector3> imageAfterRotation = transformListOfVertices(cube, rotation); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T15:55:32.587

世界矩阵*（相机的）视图矩阵*（相机的）投影=变换矩阵

假设 cube1 = 初始位置。
渲染期间发生的情况是：cube1 * transformMatrix = 输出矩阵

如果我理解你是正确的：你的输入只允许用户改变相机矩阵（视图），
（和相机=视图*投影）并且你想在相机更新后找出立方体的新变换。

所以你需要做反转操作：

**outputmatrix / transformMatrix = cube1 矩阵（你需要的新矩阵）**

从新的 cube1 结果矩阵中，您可以提取角度、运动等。

因此，您的问题更多与要实施的“什么”有关 - 而不是如何实施。
（我看到你熟悉你需要的命令和代码）

我希望这有帮助。

# foxpro - FoxPro SET DEFAULT TO Command

> ID：10011278
> 
> 赞同：1
> 
> 时间：2012-04-04T12:39:41.843
> 
> 标签：foxpro, visual-foxpro

I am walking through a Visual FoxPro program trying to document the code in an effort to understand the process *(I am not a FoxPro developer and have very little experience looking at the code)* and I came across the "SET DEFAULT TO" command used without any drive designation specified. I checked the documentation and there are several examples on how to use it but none of them show it being used without the drive designation. The statement is literally written like this:

```
SET DEFAULT TO 
```

and that's it. I am curious what this does. The documentation from Microsoft does show that the drive is optional (at least in the typical shown in square brackets [ ] way) as seen here:

![enter image description here](../Images/c497168773a38724152444fe4984a456.png)

but then they don't elaborate on what happens when the cPath parameter is left off.

Any insight would be truely appreciated.

Thanks,
Doug

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T14:26:46.857

`SET DEFAULT TO` without a path will reset the default directory to the one specified in the 'Default Directory' setting in the Tools -> Options -> File Locations dialog.

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-17T17:15:54.017

Some Examples from the command window:

SET DEFAULT TO C:\MyProgramDir\MySubDir\ (enter) SET DEFAULT TO "C:\Program Files\MyApp\" (enter)

-or use the CD command

CD C:\MyProgramDir\MySubDir\ (enter) CD "C:\Program Files\MyApp\" (enter)

# javascript - 在javascript中覆盖

> ID：10011279
> 
> 赞同：-1
> 
> 时间：2012-04-04T12:39:42.707
> 
> 标签：javascript

```
<div id='tbl'> </div>

<script lang="Javascript">
var gd = new Array(16);
var a=0;
for(a=0; a<16; a++)
    gd[a] = new Array(16);
var sd = new Array(16);
for(a=0; a<16; a++)
    sd[a] = new Array(16);

var b1=0, b2=0;
for(b1=0; b1<16; b1++)
{
    for(b2=0; b2<16; b2++)
    {
        gd[b1][b2]="A";
        sd[b1][b2]="A";
    }
}

var c1=0, c2=0;
var score=0;

ble = "<center><table>";
for(c1=0; c1<16; c1++)
{
    ble += "<tr>";
    for(c2=0; c2<16; c2++)
    {
        ble += "<td onClick='changeColor(this)'>" + gd[c1][c2] + "</td>";
    }
    ble += "</tr>";
}
ble += "</table></center>";

document.getElementById('tbl').innerHTML = ble;

function changeColor(tdd)
{
    if(tdd.bgColor=='white')
    {
        tdd.bgColor='red'; 

        alert(c1);
        /*if (gd[c1][c2] == sd[c1][c2])
            score+=5;
        else
            score-=2;*/
    }
    else
    {
        tdd.bgColor='white'; 
    }
}
function scc()
{
    document.getElementById('scf').innerHTML = score;
}
</script>
<br><br><center><button type='button' onclick='scc()'> Click to see current score</button> <div id="scf">0</div> </center>
</body> 
```

在上面给出的代码中，有没有办法在 changeColor 函数中获取当前值`c1`而`c2`不是 =16。

否则，有没有办法写入文档，以免每次都被覆盖？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T12:45:01.513

是的，您可以将它们传递给您的函数调用：

```
ble += "<td onClick='changeColor(this, " + c1 + ", " + c2 + ")'>" + gd[c1][c2] + "</td>"; 
```

不要忘记在函数中声明新参数：

```
function changeColor(tdd, c1, c2) 
```

# javascript - 在长页面上的用户可视区域内垂直居中图层

> ID：10011281
> 
> 赞同：1
> 
> 时间：2012-04-04T12:39:59.793
> 
> 标签：javascript, jquery

我试图在一个很长的页面上的可视区域中垂直居中一个 div。在这种情况下，页面的真正垂直中心远高于用户的可视区域。

我已将用户单击的链接的 scrollTop() 长度添加到有帮助的公式中，但仍将 div 放置在可视区域的中心上方。

代码摘录：

```
$('.' + layer).css({
    display:'block',
    left:( $(window).width() - $('.' + layer).width() )/2,
    top:( $(this).scrollTop() + $(window).height() - $('.' + layer).height() )/2 -20,
    position:'absolute'
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T03:55:06.073

也许你需要 CSS 解决方案？

如果您的 DIV 的高度 = H，则 css 将是：

```
div{ position:fixed; left:0; top:50%; margin-top:(-0.5 * H) } 
```

# google-maps-api-3 - 来自 Internet 的 Google Map HTML 示例无法在我的计算机上打开，但我可以在 Internet URL 上打开

> ID：10011282
> 
> 赞同：0
> 
> 时间：2012-04-04T12:40:00.277
> 
> 标签：google-maps-api-3

我正在尝试 从我的计算机打开 html 文件[http://www.geocodezip.com/v3_MW_example_map3.html 。](http://www.geocodezip.com/v3_MW_example_map3.html)我可以在互联网上打开它，但如果我查看页面源并将其另存为 HTML 文件，我无法打开或者我可以但不显示标记。使用的 XML 位于[http://econym.org.uk/gmap/example.xml](http://econym.org.uk/gmap/example.xml)的位置，所以我也下载了它并将其放在与 html 文件相同的文件夹中。如何解决这个问题？因为我想更改此文件以适应我的需要谢谢

我的 HTML（没有必要的东西，如 css，添加..）现在看起来像这样：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<head> 

<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script> 

<script type="text/javascript"> 
//<![CDATA[
      // this variable will collect the html which will eventually be placed in the side_bar 

      // arrays to hold copies of the markers and html used by the side_bar 
      // because the function closure trick doesnt work there 
      var gmarkers = []; 

     // global "map" variable
      var map = null;
// A function to create the marker and set up the event window function 
function createMarker(latlng, name, html) {
    var contentString = html;
    var marker = new google.maps.Marker({
        position: latlng,
        map: map,
        zIndex: Math.round(latlng.lat()*-100000)<<5
        });

    google.maps.event.addListener(marker, 'click', function() {
        infowindow.setContent(contentString); 
        infowindow.open(map,marker);
        });
    // save the info we need to use later for the side_bar
    gmarkers.push(marker);

}

// This function picks up the click and opens the corresponding info window
function myclick(i) {
  google.maps.event.trigger(gmarkers[i], "click");
}

function initialize() {
  // create the map
  var myOptions = {
    zoom: 8,
    center: new google.maps.LatLng(43.907787,-79.359741),
    mapTypeControl: true,
    mapTypeControlOptions: {style: google.maps.MapTypeControlStyle.DROPDOWN_MENU},
    navigationControl: true,
    mapTypeId: google.maps.MapTypeId.ROADMAP
  }
  map = new google.maps.Map(document.getElementById("map_canvas"),
                                myOptions);

  google.maps.event.addListener(map, 'click', function() {
        infowindow.close();
        });
      // Read the data from example.xml
      downloadUrl("example.xml", function(doc) {
        var xmlDoc = xmlParse(doc);
        var markers = xmlDoc.documentElement.getElementsByTagName("marker");
        for (var i = 0; i < markers.length; i++) {
          // obtain the attribues of each marker
          var lat = parseFloat(markers[i].getAttribute("lat"));
          var lng = parseFloat(markers[i].getAttribute("lng"));
          var point = new google.maps.LatLng(lat,lng);
          var html = markers[i].getAttribute("html");
          var label = markers[i].getAttribute("label");
          // create the marker
          var marker = createMarker(point,label,html);
        }
        // put the assembled side_bar_html contents into the side_bar div
        //document.getElementById("side_bar").innerHTML = side_bar_html;
      });
    }

var infowindow = new google.maps.InfoWindow(
  { 
    size: new google.maps.Size(150,50)
  });

//]]>
</script> 

  </head> 
<body style="margin:0px; padding:0px;" onload="initialize()"> 

    <!-- you can use tables or divs for the overall layout --> 
    <table border="1"> 
      <tr> 
        <td> 
           <div id="map_canvas" style="width: 1050px; height: 1050px"></div> 
        </td> 

      </tr> 
    </table> 

    <noscript><p><b>JavaScript must be enabled in order for you to use Google Maps.</b> 
      However, it seems JavaScript is either disabled or not supported by your browser. 
      To view Google Maps, enable JavaScript by changing your browser options, and then 
      try again.</p>
    </noscript> 

//--></script>
  </body> 
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T12:44:30.087

你不可以做这个。HTML 将呈现，但由于所有资源不在本地计算机上（css、js、图像等），您将遇到大量错误。您将需要使用 Maps API 来构建您自己的解决方案。

# javascript - javascript 或 jquery 获取给定元素的背景位置属性，然后动态地对其进行 +/-

> ID：10011286
> 
> 赞同：5
> 
> 时间：2012-04-04T12:40:17.663
> 
> 标签：javascript, jquery, dom

我有一些想要设置翻转的元素，我希望如何即时进行计算，而不是每次为每次翻转手动设置位置，因为随着时间的推移会有很多。目前我正在使用一个精灵，随着时间的推移，我会添加更多内容。始终并排，并且始终为它的每个图像方面提供 10px 的填充。

所以我知道我的默认仓位是否总是 0 100 并且我想为此翻转，然后我知道它将是 50 100 我怎样才能有一种方法来获取它的 2 个值，但只有添加到其中之一

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-04T13:46:21.183

您需要获取背景位置并将其分成两个值，执行计算，将值设置为字符串。

例如

```
myPos = $('.selection').css("background-position").split(" ")

myPos[0] <-- will contain the X-value, "50px"
myPos[1] <-- will contain the Y-value, "100px" 
```

然后你需要把它们变成整数：（假设你对 myPos[1] 做同样的事情）

```
myPos[0] = parseInt(myPos[0].replace("px","")) 
```

然后你做数学并将它们分配回来：

```
myPos[0] = myPos[0] + 100

$('.selection').css("background-position", myPos[0]+'px ' + myPos[1] + 'px') 
```

# version-control - 如何监视特定文件的 Mercurial 更改？

> ID：10011288
> 
> 赞同：1
> 
> 时间：2012-04-04T12:40:21.917
> 
> 标签：version-control, mercurial, notify

我已经建立了一个包含大型 Java 项目的远程 Mercurial (Hg) 存储库。我想监视对项目的 pom 文件所做的任何更改，并在对 pom 进行更改时接收电子邮件。

我想从通知中排除所有其他文件更改，因为我只对监视任何可能的依赖项更改感兴趣（因此是 POM）。是否有任何使用 Jenkins 的 Mercurial 扩展或解决方法来订阅 Mercurial 存储库中单个文件的更改历史记录？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T12:50:43.287

[通知扩展](http://mercurial.selenic.com/wiki/NotifyExtension)会发送有关 repo 更改的电子邮件。

[Change Context](http://mercurial.selenic.com/wiki/MercurialApi) （参见第6 节）为您提供了一种迭代变更集中文件的方法。

将这两件事放在一个自定义挂钩中应该相当简单。查看上下文，仅在提及您的特殊文件时发送电子邮件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-09T17:21:44.757

@Ed.ward

我最近不得不这样做（将通知扩展名与更改上下文结合起来）仅在某些文件更改时才通知。为了从您自己的钩子中调用通知钩子，您需要导入 hgext，然后调用 hgext.notify.hook。我的python工作示例：

```
import re, traceback
import hgext
def check_changegroup(ui, repo, hooktype, node=None, source=None, **kwargs):
    ui.note("Checking for files in %s with path: %s\n" % (repo.__class__.__name__, repo.root))
    file_match = ".*base.*" #ui.config('monitor_files', 'file_match')
    ui.note("file_match: %s\n" % file_match)
    file_match_re = re.compile(file_match, re.I)
    monitored_file_changed = False
    for rev in xrange(repo[node].rev(), len(repo)):
        changectx = repo[rev]       
        for f in changectx.files():
            if file_match_re.match(f):
                ui.note("  matched: %s\n" % f)
                monitored_file_changed = True
        if monitored_file_changed:
            ui.note("rev: %s from user: %s has changes on monitored files\n" % (rev, changectx.user()))
    if monitored_file_changed:
        ui.note("calling notify hook\n")
        try:
            hgext.notify.hook(ui, repo, hooktype, node, source)
        except Exception as exc:
            ui.warn(('%s error calling notify hook: %s\n') % (exc.__class__.__name__, exc))
            traceback.print_exc()
            raise 
```

# sql-server-2008 - Management Studio 中 SQL Server 2008 标准版数据库上的白圈？

> ID：10011297
> 
> 赞同：0
> 
> 时间：2012-04-04T12:40:40.243
> 
> 标签：sql-server-2008

当我的服务器在 SQL Server Management Studio 中出现白色圆​​圈而不是带有白色箭头的绿色圆圈时，这意味着什么？

连接需要明显更长的时间（5-10 秒），如果我右键单击它，启动和停止选项将显示为灰色。如何将其更改为绿色？

注意：我正在从公共域连接到本地域，并且似乎没有连接问题。两台服务器上的 1433 端口也都是开放的。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T12:44:29.683

这意味着 Management Studio 无法确定服务是否正在运行。这可能不一定是连接问题，也可能是权限之一。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T14:28:44.003

当我们将服务器移动到更严格​​的防火墙后面时，我已经看到了这种行为。此时我不记得防火墙中需要哪个实际端口异常，但我记得它与 SQL 引擎的端口不同（默认 1433 端口）。

# android - 为服务进行回调

> ID：10011299
> 
> 赞同：0
> 
> 时间：2012-04-04T12:40:40.340
> 
> 标签：android, service, in-app-billing

我在这里使用本教程[Tut](http://blog.blundell-apps.com/simple-inapp-billing-payment/)进行 inApp 购买。我的问题是，一旦连接了服务，我似乎无法弄清楚如何在我的主要活动中调用函数。我试图检查服务连接后是否需要恢复事务。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T13:21:17.293

实现这一点的最简单方法是在您的活动中创建一个**广播**接收器，并让服务使用带有自定义意图的 sendBroadcast。可以使用 Intent 的 putExtra() 方法传输数据。确保在活动的 onResume() 中注册接收器并在 onPause() 中取消注册。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T01:42:24.313

您遵循的教程具有 FAIL 设计：

```
public class BillingService extends Service implements ServiceConnection {

  ... ...

  @Override
  public void onServiceConnected(ComponentName name, IBinder service) {
    ... ...
  }

  @Override
  public void onServiceDisconnected(ComponentName name) {
    ... ...
  }

} 
```

啊，看来博主正在尝试进行一些代码重构，他认为通过将 ServiceConnection 从 Activity 中移出并与 Service 实现一起实现它会更聪明。这绝对是一个有效的代码重构，但却是一个失败的设计，因为它失去了 Activity 和 Service 之间 IPC（进程间通信）的好处和便利性。当从 OOP 的角度谈论代码重构时，更多地从问题抽象层面思考，而不是粗暴地从代码层面剥离内部类。

您应该遵循[官方开发指南](http://developer.android.com/guide/topics/fundamentals/bound-services.html#Binder)中的正确设计模式，将 ServiceConnection 定义和实现为 Activity 的内部类，您将重新获得 IPC 的好处和便利，只需在 onServiceConnected 回调中调用您在该 Activity 中定义的任何方法，一旦服务准备就绪：

```
public class BindingActivity extends Activity {

  ... ...

  /** Defines callbacks for service binding, passed to bindService() */
  private ServiceConnection mConnection = new ServiceConnection() {

    @Override
    public void onServiceConnected(ComponentName name, IBinder service) {
      ... ...
      // call a function in my main activity once the service is connected:
      this.foo();
    }

    @Override
    public void onServiceDisconnected(ComponentName name) {
      ... ...
    }
  };

} 
```

请注意，官方开发指南建议的做事方式始终是最合理和最有效的。Android 开发者编写官方开发指南并不是为了好玩。希望这可以帮助。

# backbone.js - 简单的主干示例不更新视图

> ID：10011301
> 
> 赞同：1
> 
> 时间：2012-04-04T12:40:53.897
> 
> 标签：backbone.js

我开始用这个简单的例子来学习 Backbone：

```
<div id="counter">unkown</div>
<button id="add-button">ADD</button>

(function($){

   var Counter = Backbone.Model.extend({
     defaults: {
        count: 0            
     }
   });

   var CounterView = Backbone.View.extend({
       el: "#counter",

       events: {
            "click #add-button": "add"
       },

       add: function() {
           this.model.count++;
           render();
       },

       render: function() {
           $(this.el).text(this.model.get("count"));
           return this;
       },

       initialize: function(){              
           this.render();
       }
   });

   var counterItem = new Counter();
   var counterView = new CounterView({model: counterItem});              

}(jQuery));  // function($) 
```

因此，当按下“添加”按钮时，计数器应该会增加并且视图应该会更新。我已经绑定了视图和模型，并将点击事件与添加功能链接起来，但不知何故这不起作用。

所以我想我做错了什么或者我只是缺少一些约束力？

**编辑：已按照建议修复...仍然无法正常工作：**

```
<div class="list">
        <div id="counter">unkown</div>
        <button id="add-button">ADD</button>
</div>  

    (function($){

       var Counter = Backbone.Model.extend({
         defaults: {
            count: 0            
         }
       });

       var CounterView = Backbone.View.extend({
           el: "#counter",

           events: {
                "click #add-button": "add"
           },

           add: function() {
               alert("ADD");
               this.model.set("count", this.model.get("count") + 1);
               this.render();
           },

           render: function() {
               $(this.el).text(this.model.get("count"));
               return this;
           },

           initialize: function(){               
               this.render();
           }
       });

       var counterItem = new Counter();
       var counterView = new CounterView({model: counterItem});                     

    }(jQuery));  // function($) 
```

**编辑：固定和工作**

```
<div id="counterHolder">
        <div id="counter">
            <span>unknown</span>
           <button id="add-button">ADD</button>
       </div>
    </div>

    <script>

    (function($){

       var Counter = Backbone.Model.extend({
         defaults: {
            count: 0            
         },

         increase: function(){
             this.set("count", this.get("count") + 1);
         }
       });

       var CounterView = Backbone.View.extend({

           el: "#counter",

           events: {
                "click #add-button": "add"
           },

           add: function() {
               this.model.increase();               
           },

           render: function() {
               $("#counter span").text(this.model.get("count"));
               return this;
           },

           initialize: function(){
               this.render = _.bind(this.render, this); 
               this.render();
               this.model.bind('change:count', this.render);
           }
       });

       var counterItem = new Counter();
       var counterView = new CounterView({model: counterItem});                     

    }(jQuery));  // function($)

    </script> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-04T13:11:41.387

按钮必须是视图的后代`el`

像下面一样更新您的html，它应该可以工作

```
<div id="counter">
  <button id="add-button">ADD</button>
</div> 
```

如果您仍想显示计数，请添加一个额外的`span`

```
<div id="counter">
  <span id="count" />
  <button id="add-button">ADD</button>
</div> 
```

并更新您的渲染方法

```
render: function() {
  this.$('#count').text(this.model.get("count"));
  return this;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T12:48:14.393

骨干模型必须通过`get`and`set`方法处理其数据，而不是作为常规的 javascript 对象。尝试

```
this.model.set("count", this.model.get("count") + 1); 
```

或者更好的是，`increment`向您的模型类添加一个方法，该方法通过更好的封装来更新`get`属性`set`。

另外，只是一个关于约定的注释，通常视图更改或绑定到的 DOM 的每一块都应该包含在父`el`元素中。您的视图绑定到未包含在视图的 parent 中的 add 按钮`div`。它似乎正在工作，但它基本上是相当于全局变量的事件处理。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T12:50:10.783

我认为你的错误是一个简单的 javascript 错误。在`add`你需要调用`this.render()`不只是`render()`。

# python - python numpy arange 意外结果

> ID：10011302
> 
> 赞同：20
> 
> 时间：2012-04-04T12:40:59.653
> 
> 标签：python, numpy

我正在使用 arange 函数来定义我的 for 循环迭代并得到意想不到的结果。

```
i = arange(7.8,8.4,0.05)
print i 
```

产生以下内容：

```
[ 7.8   7.85  7.9   7.95  8\.    8.05  8.1   8.15  8.2   8.25  8.3   8.35 8.4 ] 
```

然而使用 8.35 的停止值如下

```
i = arange(7.8,8.35,0.05) 
```

产生以下

```
[ 7.8   7.85  7.9   7.95  8\.    8.05  8.1   8.15  8.2   8.25  8.3 ] 
```

但我希望我的范围以 8.35 结束！我知道我可以使用 > 8.35 和 < 8.4 的停止值来实现我的结果，但是为什么它不同并且在我看来不一致？

编辑：我使用的是 2.7 版

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-04-04T12:52:47.120

我猜您正在看到浮点舍入的效果。

`numpy.arange`与 python 做同样的事情`range`：它不包括“端点”。（例如`range(0, 4, 2)`将产生`[0,2]`而不是`[0,2,4]`）

但是，对于浮点步骤，舍入误差会累积，有时最后一个值实际上会包括端点。

如文档中所述`arange`：

> 当使用非整数步长（例如 0.1）时，结果通常会不一致。最好`linspace`用于这些情况。

`numpy.linspace`在起点和终点之间生成指定数量的点。顺便说一句，默认情况下它确实包括端点。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-04-04T12:57:30.153

也许它与浮点数的限制有关。由于机器精度，不可能将每个可能的值完美地存储为浮点数。例如：

```
>>> 8.4
8.4000000000000004
>>> 8.35
8.3499999999999996 
```

因此，作为浮点数的 8.4 略大于 8.4 的实际值，而作为浮点数的 8.35 则略小一些。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-04T12:54:08.380

范围功能的帮助说

```
 For floating point arguments, the length of the result is
    ``ceil((stop - start)/step)``.  Because of floating point overflow,
    this rule may result in the last element of `out` being greater
    than `stop`. 
```

对于 python 2.7，浮点数和字符串之间的转换现在在大多数平台上都可以正确舍入。

在 2.7

```
>>> float(repr(2.3))
2.3 
```

在 2.6

```
>>> float(repr(2.3))
2.2999999999999998 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-05-31T13:31:23.030

我遇到了同样的问题，我实现了自己的函数来纠正这个与 numpy.arange 的舍入问题：

```
import numpy as np
def my_arange(a, b, dr, decimals=6):
    res = [a]
    k = 1
    while res[-1] < b:
        tmp = round(a + k*dr,decimals)
        if tmp > b:
            break   
        res.append(tmp)
        k+=1

    return np.asarray(res) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-03-15T15:44:36.417

向端点添加一点校正器浮点数：

```
import numpy as np

step = 0.05
corr = 0.01 if step == 0.05 else 0.0

i = np.arange(7.8,8.35+corr,step)
print(i) 
```

**输出：**

$ python a.py [7.8 7.85 7.9 7.95 8\. 8.05 8.1 8.15 8.2 8.25 8.3 8.35]

# iphone - 删除应用程序后，我可以使用相同的捆绑 ID 吗？

> ID：10011305
> 
> 赞同：1
> 
> 时间：2012-04-04T12:41:03.627
> 
> 标签：iphone, ios, xcode, bundle

XCODE 4.3.2 Mac OS X 10.7.3

`developer reject`由于注册应用程序后出现小错误，我已经完成了。当我再次尝试注册时，出现“ *`An error occurred uploading to the iTunes Store`*”，提交失败。所以，我删除了应用程序并尝试再次注册应用程序。

然后，有这样的错误消息：

```
The following error(s) occurred:
- The Bundle ID you entered has already been used.
- The App Name you entered has already been used. 
```

我可以用相同的名字重新注册吗？我该怎么做？

我将 App ID 设为“com.www.aaabbb”以使用 PUSH。删除应用程序后，我找不到这个 Bundle ID。并发生错误。

我如何使用此捆绑包 ID？

这对我来说是一个非常严重的问题。请帮我。谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T13:20:38.323

如果你有`rejected Binary`，那么你可以通过点击再次上传`"Ready To upload Binary"`。

如果您使用相同的捆绑包 ID 来创建应用程序时遇到了`deleted the application`比这更严重的问题，**`APPLE does not allow`**因为它会将该捆绑包视为已使用。

您必须`create new Bundle ID`为推送通知配置它。

# objective-c - 在 splitviewcontroller 中将数组从 masterview 发送到 detailview

> ID：10011306
> 
> 赞同：0
> 
> 时间：2012-04-04T12:41:13.220
> 
> 标签：objective-c, arrays, uisplitviewcontroller, send

如何将数组从 masterViewController 发送到 splitviewController 中的 DetailViewController？

编辑我的主视图中有按钮，当您选择按钮时，这些按钮的标题将“保存”在数组中。当您单击“确定”按钮时，数组中“保存”的字符串需要显示在详细视图中（我使用的是标签）。所以我希望将数组“发送”到详细视图。

我确信这是非常基本的，我是目标 c 的新手，我只是在测试如何使主视图和详细视图之间的通信正常工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T13:22:04.627

当您从主视图初始化数据时，通常会将数据传递给详细视图控制器。将数组类型属性添加到详细视图控制器并在您创建它后立即传递您的数组（或者如果您使用故事板，则从 segue 请求）。然后，您可以根据在加载视图时准备好的传递的数据配置详细视图。

# android - 如何从android中的mysqldatabase提供自定义列表的setOnItemClickListener

> ID：10011308
> 
> 赞同：0
> 
> 时间：2012-04-04T12:41:17.447
> 
> 标签：android

我正在自定义列表视图中从数据库中获取图像和文本。现在我可以单击文本意味着它导航另一个页面。现在我想要 listview 的 setonitemclicklistener 取决于它从一页导航到另一页的代码

```
 Main.jaga
           JSONArray json = jArray.getJSONArray("mainmenu");
        list=(ListView)findViewById(R.id.mainmenulist);
         adapter=new MainMenulist(this, json);
         list.setAdapter(adapter);
              MainMenulist.java
            public class MainMenulist extends BaseAdapter {
protected static Context Context = null;
int i;
public String editnewmainmenu,menuname;
String qrimage;
Bitmap bmp, resizedbitmap;
Bitmap[] bmps;
Activity activity = null;
private LayoutInflater inflater;

private ImageView[] mImages;
String[] itemimage;
TextView[] tv;
String itemname,itemcode;
public String[] itemnames,itemcodes;
HashMap<String, String> map = new HashMap<String, String>();

public MainMenulist(Context context, JSONArray imageArrayJson) {
    Context = context;
    // inflater =
    // (LayoutInflater)activity.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    // imageLoader=new ImageLoader(activity);
    inflater = LayoutInflater.from(context);
    this.mImages = new ImageView[imageArrayJson.length()];
    this.bmps = new Bitmap[imageArrayJson.length()];
    this.itemnames = new String[imageArrayJson.length()];
    this.itemcodes=new String[imageArrayJson.length()];

    try {

        for (i = 0; i < imageArrayJson.length(); i++) {
            JSONObject image = imageArrayJson.getJSONObject(i);
            qrimage = image.getString("menuimage");
            itemname = image.getString("menuname");
            itemcode=image.getString("menucode");
            itemnames[i] = itemname;
            itemcodes[i]=itemcode;

            byte[] qrimageBytes = Base64.decode(qrimage.getBytes());

            bmp = BitmapFactory.decodeByteArray(qrimageBytes, 0,
                    qrimageBytes.length);
            int width = 100;
            int height = 100;
            resizedbitmap = Bitmap.createScaledBitmap(bmp, width, height,
                    true);
            bmps[i] = bmp;

            mImages[i] = new ImageView(context);
            mImages[i].setImageBitmap(resizedbitmap);

            mImages[i].setScaleType(ImageView.ScaleType.FIT_START);

            // tv[i].setText(itemname);
        }
        System.out.println(itemnames[i]);
        System.out.println(map);

    } catch (Exception e) {
        // TODO: handle exception
    }
}

public int getCount() {
    return mImages.length;
}

public Object getItem(int position) {
    return position;
}

public long getItemId(int position) {
    return position;
}

public View getView(final int position, View convertView, ViewGroup parent) {

    View vi = convertView;

    vi = inflater.inflate(R.layout.mainmenulistview, null);

final   TextView text = (TextView) vi.findViewById(R.id.menutext);
    ImageView image = (ImageView) vi.findViewById(R.id.menuimage);

    System.out.println(itemcodes[position]);
    image.setImageBitmap(bmps[position]);

    text.setText(itemnames[position]);
    text.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {
            // TODO Auto-generated method stub
            if(itemcodes[position].equals("1"))
            {
                Intent intent = new Intent(Context, FoodMenu.class);
                System.out.println("prakash");

                Context.startActivity(intent);
            }
            else {
                Toast.makeText(Context, "This Feauture is not yet Implemented",4000).show();
            }

        }
    });       

    return vi;

}

   } 
```

请告诉我如何将 setonitemclick 监听器提供给我的列表视图。取决于项目它导航不同的页面..请帮助我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T11:40:32.157

```
listView.setOnItemClickListener(new OnItemClickListener() {
        @Override
        public void onItemClick(AdapterView<?> adapter, View view,int pos, long id) 
    {
        if(pos == 1)
         startActivity(intent);
    }
} 
```

在您的主要活动类（Main.java）中而不是在适配器类中

# pydev - 如何在linux上的eclipse中手动安装pydev plugin 2.4.0

> ID：10011311
> 
> 赞同：2
> 
> 时间：2012-04-04T12:41:28.743
> 
> 标签：pydev

我已经在 linux Red hat 4.4 X84_64 bit 中安装了 eclipse

我必须在我无法访问互联网的 linux 服务器中应用 pydev 插件 2.4.0 并且它是孤立的网络

那就是我无法使用帮助->安装新软件->通过指定 URL

是否有任何特定的 pydev 插件 2.4.0 可用于 linux 以及 linux 中的程序安装插件是什么

谢谢古纳

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T16:13:16.200

您可以从 .zip 文件安装 PyDev（主要是获取它并将内容提取到 dropins 文件夹）。

有关正确链接，请参见：[http](http://pydev.org/download.html) ://pydev.org/download.html （http://pydev.org/manual_101_install.html 有更详细的说明）。

# emacs - 长时间等待后，Emacs 在 ssh 上停止响应

> ID：10011313
> 
> 赞同：5
> 
> 时间：2012-04-04T12:41:33.690
> 
> 标签：emacs, ssh

我最近注意到了这一点，我不知道这是否是 Arch Linux 或 Emacs 的问题。

如果我在远程机器上找到一个文件，然后将其保持打开状态并执行任何操作，当我返回该文件时，Emacs 没有响应。我找到的唯一解决方案是杀死 Emacs 并重新打开它。

有没有更人性化的方法来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T14:54:25.400

您可以使用 ServerAliveInterval 配置属性将 ssh 连接配置为在空闲时保持活动状态。你可以在你的 ~/.ssh/config 中加入这样的东西：

```
 Host *
           ServerAliveInterval 5 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-11-30T14:55:49.713

```
M-x tramp-cleanup-connection 
```

这将重新启动连接，即使您已经更改了网络。我可以解释这个答案很难找到的唯一原因是它是如此明显（但前提是你知道......）

# maven - 如何在 Maven 中使用 hbm2ddl 工具？

> ID：10011315
> 
> 赞同：2
> 
> 时间：2012-04-04T12:41:41.883
> 
> 标签：maven, maven-3, hbm2ddl, hibernate-tools

我想使用 Maven 的 Hibernate3 插件（由 Codehaus 开发），但根据上次发布日期（2009-01-21），它似乎没有得到积极支持。我需要使用 Hibernate 提供的 hbm2ddl 工具。你怎么看？

hbm2ddl 工具在哪里提供？我猜这不是包含它的 Hibernate3 Maven 插件，而是包含在 hibernate 依赖项中？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T13:07:22.587

可能您已经找到了以 2.2 版本结尾的旧插件站点。看看这个网站：http: [//mojo.codehaus.org/hibernate3-maven-plugin/](http://mojo.codehaus.org/hibernate3-maven-plugin/)

如您所见，2 个月前发布了 3.0 版本。我们在 Hibernate 3.5 的项目中使用它，它工作得很好，做它应该做的事情。

Hibernate 不需要提供给插件（至少直接提供），因为在幕后，这些东西使用了 Hibernate3 Ant Tasks（来自`hibernate-tools`工件）和 Maven AntRun 插件。所以该插件依赖于 Hibernate（3.3.2.GA 版本）本身。然而，正如我所说，到目前为止，我们将它与 Hibernate 3.5 一起使用没有任何问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-10-19T07:31:21.217

如果您想将 hbm2ddl 用于当前休眠 (5.+) 并生成质量更好的架构，请查看项目：

[https://github.com/Devskiler/hbm2ddl-maven-plugin](https://github.com/Devskiller/hbm2ddl-maven-plugin)

简单用例

```
<build>
    <plugins>
        <plugin>
            <groupId>com.devskiller.hbm2ddl-maven-plugin</groupId>
            <artifactId>hbm2ddl-maven-plugin</artifactId>
            <version>0.9.2</version>
            <extensions>true</extensions> <!-- required to run automatically -->
            <configuration>
                <packages>
                    <package>com.test.model</package>
                </packages>
            </configuration>
        </plugin>
    </plugins>
</build> 
```

# android - 如何通过 Android 应用程序跟踪网站

> ID：10011317
> 
> 赞同：0
> 
> 时间：2012-04-04T12:41:56.283
> 
> 标签：android, oauth, google-analytics

有使用[Google Analytics](http://code.google.com/apis/analytics/docs/mobile/Android.html)跟踪 Android App 的给定解决方案。有没有办法通过 Android 应用程序跟踪网站？因此我们可以在我们的 Android 设备中查看报告，例如网站点击次数。这个问题的任何解决方案？

**更新**

```
public class AnalyticsTest {

      private static final String CLIENT_ID = "MY_CLIENT_ID";
    private static final String CLIENT_SECRET = "MY_CLIENT_SECRET";
    private static final String REDIRECT_URL = "urn:ietf:wg:oauth:2.0:oob";
    private static final String APPLICATION_NAME = "test";
    private static final String SCOPE = "https://www.googleapis.com/auth/analytics";
// TRIED AS WELL private static final String SCOPE = "https://www.google.com/analytics/feeds";
    private static final String TABLE_ID = "MY_TABLE_ID";

    public static void main() throws IOException {
            NetHttpTransport netHttpTransport = new NetHttpTransport();
            JacksonFactory jacksonFactory = new JacksonFactory();
            // Generate the URL to send the user to grant access.
            String authorizationUrl = new GoogleAuthorizationRequestUrl(CLIENT_ID, REDIRECT_URL, SCOPE).build();

            // Direct user to the authorization URI.
            System.out.println("Go to the following link in your browser:");
            System.out.println(authorizationUrl);

            // Get authorization code from user.
            BufferedReader in = new BufferedReader(new InputStreamReader(System.in));
            System.out.println("What is the authorization code?");
            String authorizationCode = null;
            authorizationCode = in.readLine();

            // Use the authorization code to get an access token and a refresh
            // token.
            AccessTokenResponse response = null;
            try {
                    response = new GoogleAccessTokenRequest.GoogleAuthorizationCodeGrant(netHttpTransport, jacksonFactory, CLIENT_ID, CLIENT_SECRET, authorizationCode, REDIRECT_URL).execute();
                    System.out.println("Responseeeeeeeeee "+response);
            } catch (IOException ioe) {
                    ioe.printStackTrace();
            }

            // Use the access and refresh tokens to get a new
            // GoogleAccessProtectedResource.
            GoogleAccessProtectedResource googleAccessProtectedResource = new GoogleAccessProtectedResource(response.accessToken, netHttpTransport, jacksonFactory, CLIENT_ID, CLIENT_SECRET, response.refreshToken);
            System.out.println("================== "+googleAccessProtectedResource.getClientId());

            Analytics analytics = Analytics
                            .builder(netHttpTransport, jacksonFactory)
                            .setHttpRequestInitializer(googleAccessProtectedResource)
                            .setApplicationName(APPLICATION_NAME).build();
            //System.out.println(analytics.management().accounts().list().execute());

            Get apiQuery = analytics.data().ga().get(TABLE_ID, // "ga:" + Profile
                            // Id.
                            "2011-09-01", // Start date.
                            "2011-12-23", // End date.
                            "ga:visits"); // Metrics.

            try {
                    GaData gaData = apiQuery.execute();
                    // Success. Do something cool!

            } catch (GoogleJsonResponseException e) {
                    // Catch API specific errors.
                    e.printStackTrace();

            } catch (IOException e) {
                    // Catch general parsing errors.
                    e.printStackTrace();
            }
    }
} 
```

我正在使用上面的代码从谷歌分析网站获取分析报告。我从[这里](http://code.google.com/p/google-api-java-client/wiki/Setup)得到了所有 jar 文件但是无法找到**Analytics**的 jar，它向我显示错误。请告诉我我做错了什么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T02:55:44.800

您可以安装如下应用程序之一：

*   [g分析](https://play.google.com/store/apps/details?id=com.e6bapps.ganalytics)
*   [DroidAnalytics](https://play.google.com/store/apps/details?id=com.droidanalytics)

你是这个意思吗？

更新

要使用 Google Analytics API 推出您自己的应用程序，请从此处开始：[http](http://code.google.com/apis/analytics/docs/) ://code.google.com/apis/analytics/docs/ 。

只需单击几下，您就可以到达[Core Reporting API 概述](http://code.google.com/apis/analytics/docs/gdata/v3/gdataGettingStarted.html)。那可能有你正在寻找的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T12:56:40.683

有很多服务可供您选择：

1\. [Flurry](http://www.flurry.com/index.html)：Flurry Analytics 提供了对消费者如何与您的移动应用程序进行实时交互的强大洞察力。超过 60,000 家公司选择 Flurry Analytics 用于 iOS、Android、Blackberry、Windows Phone、JavaME 和 HTML5 的 150,000 多个应用程序。

2.[谷歌分析移动](http://code.google.com/intl/zh-CN/apis/analytics/docs/mobile/overview.html)

3.[混合面板](https://mixpanel.com/)

# c - 为什么#include 指令在语句末尾没有分号？

> ID：10011318
> 
> 赞同：6
> 
> 时间：2012-04-04T12:42:02.367
> 
> 标签：c, include

在 C 语言中，分号 ( `;`) 用于表示语句的结束。为什么`#include`行不需要分号？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-04T12:44:23.100

`#include``#`（以及所有其他以like开头的行`#define`）是[*预处理器*](http://en.wikipedia.org/wiki/C_preprocessor)的一部分。这实际上是一个单独的程序，在主编译器之前运行，并执行诸如*将*文件包含到源代码和宏扩展之类的事情。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-04T12:44:30.320

`#include`由预处理器处理，编译器看不到这些语句。因此`;`在语句末尾不需要。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-04T12:49:16.840

因为预处理指令不是语句。

甚至不是所有的语句都必须有一个 final `;`。例如：

```
int bla = 1;

if (bla) {
} 
```

在声明之后`bla`我们有两个语句：一个`if`语句和一个空的复合语句。没有`;`，但程序是有效的。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-04T12:57:12.627

该指令由预处理器处理它不是编译器，它是一个简单的文本替换处理器。它使用行尾`(\n)`作为重要字符，不像 C 编译器将其视为空格。也是`\`行尾有影响的原因。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-04T12:46:53.487

```
#include "whatever.h" 
```

它只是用“whatever.h”替换源文件中的那一行。所以你不需要放在`;`“whatever.h”的末尾。预处理器会给你一个警告并忽略它。

# silverlight - 以编程方式丢弃 DataForm 中的更改

> ID：10011324
> 
> 赞同：0
> 
> 时间：2012-04-04T12:42:35.253
> 
> 标签：silverlight, silverlight-toolkit, dataform

我有一个来自 System.Windows.Controls.Data.DataForm.Toolkit 的 DataForm，我需要以编程方式获得与单击此 DataForm 上的取消后相同的结果。

我需要它，因为此 DataForm 在 ChildWindow 中，如果我在 DataForm 中更改某些内容并关闭 ChildWindow，则将提交更改。这不应该以这种方式工作。当我关闭 ChildWindow 时，我想放弃所有更改，就像单击取消按钮后一样。

我试过了

```
protected override void OnClosing(System.ComponentModel.CancelEventArgs e)
{
    dfColumnInfo.CancelEdit();

    base.OnClosing(e);
} 
```

但它不起作用。

先感谢您。

bugfinder 建议添加一个保存更改的代码。没有这样的东西，因为 childWindow 有一个editedObject 作为 DataContext

```
childWindow.DataContext = table;
childWindow.MyDataForm.DataContext = table.Items;
childWindow.Show(); 
```

我不知道怎么做，但是 DataForm 的取消按钮会还原我在 DataForm 中所做的所有更改，这是一个很棒的想法。但是如何通过使用 childWindow 的其他按钮或仅通过关闭 childWindow 来获得相同的效果？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T10:52:15.013

我搜索了你，在这里找到了一些有用的东西： [http ://forums.silverlight.net/t/112449.aspx/1](http://forums.silverlight.net/t/112449.aspx/1)

然后像这样测试：

```
void dform_EditEnded(object sender, DataFormEditEndedEventArgs e)
{
    if (e.EditAction != DataFormEditAction.Commit)
    {
        (dform.CurrentItem as MyEntity).RejectChanges();
        return;
    }
} 
```

为了实现这个目标，MyEntity 必须是公开的，因为我在下面编写了它的部分代码。我正在从 silverlightnet 论坛分享单词**“为了能够调用 RejectChanges（这是 System.Windows.Ria.Entity 类的受保护方法，我们必须将其公开”**

```
public partial class MyEntity:Entity
{
   public void RejectChanges()
   {
       if (HasChanges)
           base.RejectChanges();
   }
} 
```

希望这可以帮助。

# objective-c - 释放 UIPopoverController 对象时的 EXC_BAD_ACCESS

> ID：10011325
> 
> 赞同：1
> 
> 时间：2012-04-04T12:42:36.113
> 
> 标签：objective-c

当我试图释放的对象时`UIPopoverController`，应用程序会因消息而崩溃`EXC_BAD_ACCESS`。请参见下面的代码片段：

```
UITableViewCell *tblcell=(UITableViewCell*)[heatsv viewWithTag:500+sender.tag];
ResourceDetail *objRDPopup=[[ResourceDetail alloc] init];
UIPopoverController *aPopover1 = [[UIPopoverController alloc]  initWithContentViewController:objRDPopup]; 
[aPopover1 setPopoverContentSize:CGSizeMake(300, 195)]; 
[aPopover1 presentPopoverFromRect:sender.frame inView:tblcell permittedArrowDirections:UIPopoverArrowDirectionAny animated:YES];
[objRDPopup release];
[aPopover1 release] 
```

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T12:48:08.180

弹出窗口在您展示时不会保留，因此当它们仍在屏幕上时释放它们是不安全的。

将弹出框分配给 viewController 类中的保留属性，然后正常在 viewDidUnload/dealloc 中释放它。

# vb6 - DeleteFile 和 CreateTextFile 上的 FileSystemObject“权限被拒绝”

> ID：10011327
> 
> 赞同：1
> 
> 时间：2012-04-04T12:42:55.390
> 
> 标签：vb6

我正在调查一个旧的 VB6 应用程序的问题，该应用程序刚刚开始在它运行的专用 XP 机器上发生。应用程序处理电子邮件消息，并为每个项目将文件写入本地目录，将文件路径传递给另一个函数进行处理，然后通过 Kill 命令删除文件。

这一切似乎都有效，直到处理过程中发生错误。错误处理程序中没有明确的 Kill 或 DeleteFile，错误只是被处理并继续处理下一条消息。一旦发生这种情况，CreateTextFile 方法对于每个后续项目都会失败，并出现“权限被拒绝”错误，因为文件已经存在（即使 CreateTextFile 调用传递 True 以进行覆盖）。

我尝试了各种方法，最值得注意的是在错误处理程序中放置 Kill、FSO.DeleteFile 或对 DeleteFile API 的调用，但这些都不起作用（前两个因权限被拒绝而失败，API 不会出错但不会删除文件）。

我已经在机器上安装了 Unlocker，唯一锁定文件的进程是有问题的应用程序。一旦问题发生，Filemon 就会在“IRP_MJ_CREATE”之后报告文件上的“共享冲突”，所以我想这可能指向问题，但我看不出问题到底是什么。

简化代码如下：

```
Do While objMessages.Count > 0
    Set fsObj = CreateObject("Scripting.FileSystemObject")
    Set tsObj = fsObj.CreateTextFile("C:\Temp\MyFile.txt", True)
    ...
    tsObj.Close
    Set tsObj = Nothing
    Set fsObj = Nothing
    ...
    <some processing which may raise an error>
    ...
    Kill ("C:\Temp\MyFile.txt")    ' Works if no error raised & processing continues ok
    ...
    ...
Loop

ErrorHandler:
    Kill ("C:\Temp\MyFile.txt")                             ' Permission Denied
    Set fsObj = CreateObject("Scripting.FileSystemObject")
    fsObj.DeleteFile("C:\Temp\MyFile.txt", True)            ' Permission Denied 
    Dim lRet As Long
    lRet = DeleteFile(gstrBodyTextFile)                     ' Nothing done
    ' After error, processing returns to calling procedure 
    ' which is in a loop and calls back into here and starts
    ' to fail on CreateTextFile 
```

这让我很难过，我不得不承认，如果有人能建议它可能是什么，我将不胜感激。我应该补充一点，McAfee 已安装在机器上，但我已将其删除以排除其干扰（即使 Unlocker 不应该干扰文件），但错误仍然存​​在。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-05-15T09:13:32.157

尝试以下问题可能是您的错误的原因：

1.  当您请求删除该文件时，该程序（或其他程序）仍在使用该文件。您必须先正确关闭与文件的连接。

2.  在创建/删除文件之前首先检查分配的路径/文件是否存在。如果您确定该文件确实存在，请尝试确定该程序是否有权访问该路径。您可以使用`fso.fileexists()` 或`fso.folderexists()`来执行此操作。

3.  您可能无权访问其他用户帐户下的系统文件或路径。

4.  如果仍然无法正常工作，请检查文件是否已损坏。最有可能损坏的文件拒绝从您的程序访问。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-04T13:10:42.660

我认为这不能解决所有问题，但我认为值得尝试：

```
Dim fl As File
If fso.FileExists(FileName) Then
    Set fl = fso.GetFile(FileName)
    If (fl.Attributes And ReadOnly) Then
      fl.Attributes = fl.Attributes - ReadOnly
    End If
End If 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-05T09:21:59.060

您可能应该在错误处理程序之前添加一个 Exit Function 或 Exit Sub。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-30T03:46:36.307

我知道这是旧的，但偶然我在我支持的一些古老的 VB6 代码中遇到了类似的错误，原因可能会帮助像我一样登陆此页面的人。问题出在使用 FreeFile 打开的文件句柄的数量上。如果 FreeFile 返回的数字达到 255（这是最大值），如果您打开另一个文件（也将具有 255 的文件句柄号）然后尝试删除它，则会开始收到“权限被拒绝”错误。就我而言，错误只是文件在打开后没有被关闭。

# .net - 信任自签名证书来验证服务器（Windows 上的 .NET 客户端）

> ID：10011328
> 
> 赞同：1
> 
> 时间：2012-04-04T12:42:59.587
> 
> 标签：.net, windows, ssl, self-signed

我有一个通过 SSL 连接到远程服务器的 .NET 应用程序。在测试环境中，远程服务器使用自签名证书。默认情况下，SSL 连接失败。如果我将证书安装到受信任的根证书颁发机构存储中，则连接成功。

但是，由于它现在是受信任的证书颁发机构，因此此证书可用于为任何其他站点签署证书，并且我计算机上的应用程序（例如 Internet Explorer）将信任这些证书。我希望信任此证书以验证特定网站，但不信任该证书作为证书颁发机构。有什么办法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T14:41:54.180

您可以实施自己的证书验证机制，该机制还允许某些自签名或自定义证书。

查看[RemoteCertificateValidationCallback Delegate](http://msdn.microsoft.com/en-us/library/system.net.security.remotecertificatevalidationcallback.aspx)。在此回调中，您可以检查验证是否已成功 ( `sslPolicyErrors == SslPolicyErrors.None`)，然后您无需执行任何操作。否则，您可以检查给定证书是否等于您要在此上下文中信任的自定义证书。如果证书匹配返回 true。

使用您自己的 RemoteCertificateValidationCallback 委托可以完成面向连接（使用例如这个[SslStream 构造函数](http://msdn.microsoft.com/en-us/library/ms145056.aspx)）。

# android - Android：从线程定期更新 UI

> ID：10011329
> 
> 赞同：0
> 
> 时间：2012-04-04T12:42:59.980
> 
> 标签：android

猜猜我有一个 TextView 我想在某些情况下更新它。我希望有一个线程每隔一两秒检查一次情况并在必要时更新 TextView 的文本。任何想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-03T01:50:15.037

我做这样的事情：

```
public class MyClass {
  private Handler  hUpdate;
  private Runnable rUpdate;

  public MyClass() { // Constructor
    hUpdate = new Handler();
    rUpdate = new Runnable() {
      // Do your GUI updates here
    };

    Thread tUpdate = new Thread() {
      public void run() {
        while(true) {
          hUpdate.post(rUpdate);
          sleep(500);
        }
      }
    }
    tUpdate.start();
  }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-04T12:50:05.600

您可以在 GUI 中使用 Handler：

```
Handler hnd = new Handler() {
    public void handleMessage(Message msg) {
        if ( msg.what == 101 ) {
           //update textview
        }
    }
} 
```

将 hnd 传递给您的线程，并在您的线程中执行以下操作：

```
Message m = new Message();
m.what = 101;
hnd.sendMessage(m); 
```

这假设在您的单独线程中您正在做一些需要向 GUI 线程报告的工作，您还可以发送短信

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-04T12:46:19.367

您必须使用处理程序从另一个线程更新视图。使用 postDelayed 您可以设置延迟。见文档：

[handler.postDelayed](http://developer.android.com/reference/android/os/Handler.html#postDelayed%28java.lang.Runnable,%20long%29)

# c# - 如何更正引用 .dll 以显示在模块中以在 vs2008 中进行调试？

> ID：10011332
> 
> 赞同：0
> 
> 时间：2012-04-04T12:43:11.723
> 
> 标签：c#, visual-studio-2008, debugging, dll, linker

我有从 ac dll 调用一些函数的 ac# 项目，这些 dll 函数被正确调用。在 c# 项目所在的解决方案中添加了 c dll 项目。

当我尝试调试 dll 时，将无法到达断点，因为“..没有加载符号”我将所有 pdb 文件与 dll 放在同一目录中。

当我启动调试器并转到模块选项卡时，引用的 dll 不显示。像 mscorlib.dll 这样的其他 dll 在那里，但不是我要调试的 dll。

调试器设置处于混合模式，我取消选中唯一调试自己的代码选项。

最好的问候地精

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T12:46:53.500

啊，我刚刚找到了我没有激活的最后一个选项，在项目选项卡“调试非托管代码”下还有另一个复选框

现在所有的dll都出现了

# html - 缩小时过大的图像模糊

> ID：10011335
> 
> 赞同：5
> 
> 时间：2012-04-04T12:43:22.317
> 
> 标签：html, css, image

这是我第一次尝试响应式设计，如果这是一个愚蠢的简单问题，请原谅。

我创建了一个图像并将其最大宽度设置为不大于图像的实际宽度，因为我知道按比例放大图像会导致模糊不清。

我有点困惑的是，当我收缩窗户并且img开始缩小时，它也变得模糊......

这是正确的行为吗？有没有办法解决这个问题？

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-04T13:27:33.373

如果您使用 Fire Fox，据报道在缩小图像时会出现问题。

[为什么 Firefox 在调整图像大小方面如此糟糕？](https://stackoverflow.com/questions/5918595/why-is-firefox-so-bad-at-resizing-images)

[当通过外部 CSS 或内联样式缩放时，Firefox 会模糊图像。](https://stackoverflow.com/questions/388492/firefox-blurs-an-image-when-scaled-through-css-or-inline-style)

显然将以下内容添加到 CSS 已经解决了一些问题

```
image-rendering: -moz-crisp-edges; 
```

# sql - 如何设计数据库表以强制执行不重复的唯一键记录

> ID：10011337
> 
> 赞同：0
> 
> 时间：2012-04-04T12:43:29.123
> 
> 标签：sql, sql-server, tsql, sql-server-2008-r2, constraints

我有一个 SQL Server 表：

```
+----+-------------+-------------------+
| ID | CompanyID   | CompanyCode       |
+----+-------------+-------------------+
| 1  | 1           | AAAA-123          |
| 2  | 2           | BBBB-111          |
| 3  | 1           | AAAA-123          |
| 4  | 3           | CCCC-999          |
| 5  | 3           | CCCC-999          |
| 6  | 1           | AAAA-123          |
+----+-------------+-------------------+ 
```

`ID`领域是PK 。

`CompanyID`和`CompanyCode`字段指定一个独特的公司，其中 a will`CompanyID`总是具有相同的`CompanyCode`（反之亦然），并且没有两家公司将具有相同的`CompanyID`和/或`CompanyCode`。

我想在表上创建一个规则，如果/当 a与'匹配的现有位置`CompanyCode`不匹配时，将永远不允许将记录添加到表中。`CompanyCode``CompanyID`

以下是我不允许在桌子上发生的示例：

```
+----+-------------+-------------------+
| ID | CompanyID   | CompanyCode       |
+----+-------------+-------------------+
| 1  | 1           | AAAA-123          |
| 2  | 1           | BBBB-111          |<<<< This record should not be allowed
| 3  | 1           | AAAA-123          |
| 4  | 3           | CCCC-999          |
| 5  | 3           | CCCC-999          |
| 6  | 1           | AAAA-123          |
+----+-------------+-------------------+ 
```

请注意带有 的记录 与带有`ID=2`的`CompanyCode BBBB-111`现有记录不匹配`CompanyCode of AAAA-123`。

我希望这条规则以某种方式存在于表中——即我不希望这条规则成为查询和/或存储过程必须管理的业务规则。

我想你可以说当且仅当表中存在和/或存在时，我想强制执行重复记录（on`CompanyID`和）。`CompanyCode``CompanyID``CompanyCode`

这可以在表格设计级别进行吗？还是我不得不在我的脚本中管理这个？

**更新**

虽然这与我的 OP 并不真正相关，但从我收到的反馈来看，我想我应该提供一点关于 CompanyID/CompanyCode 表设计的背景知识。

首先，这只是一个模拟表设计，试图解释我的问题——我的真实表与公司无关。

其次，我的真实表是两个 Web 服务之间的中间人，其中 Service1 创建一个`DeviceID`，Service2*收集*一个`SerialNumber`存在于微设备中的。此外，我的真实表包含该中间人服务器必须处理的许多其他列。

关于这个中间人服务的一个奇怪的事情是，我正在谈论的表必须允许 DeviceID 和 SerialNumber 为 NULL - 这完全取决于哪个服务首先发送了一条记录......我是谈论太多并且偏离了我原来的问题的主题，但我认为我必须澄清我的表格示例，因为我对打破正常化感到非常不满。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T12:46:48.030

```
 CREATE UNIQUE INDEX idx_name ON TableName(CompanyID, CompanyCode) 
```

（假设您的表名为 TableName）。

但是，您应该知道，这种设计违反了数据库规范化的原则。正确规范化的数据库将有一个单独的表，其中仅包含 CompanyID 和 CompanyName 字段。然后，您将修改示例中的表以仅包含 CompanyID 字段；CompanyCode 将在需要时“查找”（使用 VIEW）。

这种设计有以下好处：

1.  从字面上看，不可能拥有具有不同名称的相同公司 ID。

2.  如果公司更改其代码，您只需更新单个表中的一条记录，这样可以防错且速度更快。

3.  您节省存储空间。

它有一个小缺点，您必须加入 Company 表才能获取代码。在关系数据库中，这不一定是一个真正的缺点（加入规范化数据是关系数据库的*用途*），但您甚至可以通过摆脱 CompanyID 并将代码用作公司的主键来消除这种情况。如果代码是不可变的（对于给定的公司，它不会随着时间的推移而改变），我只会考虑这一点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-04T12:48:12.333

我建议您不要将 CompanyID 和 CompanyCode 存储在表中。相反，您应该有另一个表，该表为每个 CompanyId 存储 1 行，并且还具有相应的代码。然后，您可以设置一个外键以确保该表中的 CompanyId 存在于另一个表中。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-04T12:49:36.837

我不知道制定规则来强制执行此操作，但您正在为同一件事使用两个单独的外键（这将始终匹配）......在此表中没有公司代码会是一个更好的主意全部并在需要数据时将其连接到不同的表中，或以其他方式重新设计

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-04T14:42:02.063

好的，这不是最漂亮的代码，但我认为它确实强制执行了约束。诀窍是创建一个索引视图，其中定义了两个唯一索引：

```
create table dbo.ABC (
    Col1 int not null,
    Col2 int not null
)
go
create view dbo.ABC_Col1_Col2_dep
with schemabinding
as
    select Col1,Col2,COUNT_BIG(*) as Cnt
    from
        dbo.ABC
    group by
        Col1,Col2
go
create unique clustered index IX_Col1_UniqueCol2 on dbo.ABC_Col1_Col2_dep (Col1)
go
create unique nonclustered index IX_Col2_UniqueCol1 on dbo.ABC_Col1_Col2_dep (Col2)
go 
```

现在我们插入一些初始数据：

```
insert into dbo.ABC (Col1,Col2)
select 1,3 union all
select 2,19 union all
select 3,12 
```

`Col1`我们可以为and添加另一行具有完全相同的值`Col2`：

```
insert into dbo.ABC (Col1,Col2)
select 1,3 
```

但是，如果我们选择一个`Col2`已用于另一个的值`Col1`，反之亦然，我们会得到错误：

```
insert into dbo.ABC (Col1,Col2)
select 2,3
go
insert into dbo.ABC (Col1,Col2)
select 1,5 
```

* * *

这里的诀窍是观察这个查询：

```
 select Col1,Col2,COUNT_BIG(*) as Cnt
    from
        dbo.ABC
    group by
        Col1,Col2 
```

将只有一行用于特定`Col1`值，并且只有一行具有特定`Col2`值，前提是您要强制执行的约束没有被破坏 - 但只要将不匹配的行插入基表，此查询返回多行。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-04T13:50:06.793

你违反了第三范式。一个非键依赖于另一个非键。CompanyCode 取决于 CompanyID。其他人所说的补救措施是创建一个CompanyID，CompanyCode表，其中CompanyID是PK。从您的表中删除 CompanyCode 并在 ComanyID 上创建指向您新表的 FK 关系。 [http://www.phlonx.com/resources/nf3/](http://www.phlonx.com/resources/nf3/) http://en.wikipedia.org/wiki/Third_normal_form

# java - 我可以定义多个静态块吗？

> ID：10011340
> 
> 赞同：17
> 
> 时间：2012-04-04T12:43:46.010
> 
> 标签：java, static, block

我可以定义多个静态块吗？

如果可能，我为什么要定义多个静态块？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-04-04T12:47:07.340

是的，您还可以制作多个初始化块。

这允许您在事物初始化的情况下放置代码。

```
private static final Map<String, String> map;
static {
   // complex code to initialise map
}

private static final DbConnection conn;
static {
  // handle any exceptions and initialise conn
} 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-06-18T08:29:35.557

```
public class TryInitialisation {
static int[] values = new int[10];
static{
    System.out.println("running initialisation block");
    for (int i=0; i< values.length; i++)
        values[i] = (int) (100.0 * i);
}
static{
    System.out.println("running initialisation block");
    for (int i=0; i< values.length; i++)
        values[i] = (int) (200.0 * i);
}
static{
    System.out.println("running initialisation block");
    for (int i=0; i< values.length; i++)
        values[i] = (int) (300.0 * i);
}
void listValues(){
    for (int i=0; i<values.length; i++)
        System.out.println(" " + values[i]);
}
public static void main(String[] args) {

TryInitialisation example = new TryInitialisation();
example.listValues(); 
example = new TryInitialisation(); // referencing a new object of same type
example.listValues();
}

} 
```

这是输出：

```
running initialisation block
running initialisation block
running initialisation block
0
300
600
900
1200
1500
1800
2100
2400
2700
0
300
600
900
1200
1500
1800
2100
2400
2700 
```

静态块按照它们声明的顺序依次执行，前两个静态块分配的值被最后一个（第三个静态块）替换。

还要观察的另一件事是静态初始化块只运行一次，即当类由 JVM 加载时，与创建的对象数量无关。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-04-04T12:45:53.643

您可以定义多个静态块。但我认为这不是真的必要。但是，如果您要定义，那么它们将按顺序执行。我的意思是首先定义的静态块将首先执行，下一个块将接下来执行。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-04-04T12:57:42.897

是的。可以在 java 类中定义多个静态块。它有助于初始化代码的模块化，进而有助于更好地理解代码的可读性和可读性（正如彼得提到的）。

# asp.net-mvc - 刷新页面会重置输入 - 是否可以避免这种情况？

> ID：10011341
> 
> 赞同：0
> 
> 时间：2012-04-04T12:43:50.080
> 
> 标签：asp.net-mvc, asp.net-mvc-3, serialization, controller

我正在使用 MVC 4 和 MVC Futures`[Serializable]`功能通过多步骤向导来保存数据。向导本身只是从用户那里收集信息，然后根据这些输入生成自动响应。我不需要将输入永久存储到数据库中。

现在，我遇到了一个可以在向导的“确认”页面上处理的问题，但我想知道是否可以避免这样做的需要。我的问题是，如果用户点击“刷新/F5”（你知道他们会这样做）他们在特定步骤上的所有输入，并且所有先前的步骤都将被删除。如果他们在确认之前处于最后一步，他们将不会意识到他们已经清除了他们在先前步骤中输入的所有内容。处理这个问题的方法是在确认页面上放置一个验证摘要，然后显示每个输入都需要重做。这带来了一个问题，因为它破坏了用户体验（他们必须返回所有步骤并重新输入）。

这是我的控制器代码示例：

```
//This is the serialization:
private MyData myData;
    protected override void OnActionExecuting(ActionExecutingContext filterContext)
    {
        var serialized = Request.Form["myData"];
        if (serialized != null) //Form was posted containing serialized data
        {
            myData = (MyData)new MvcSerializer().Deserialize(serialized, SerializationMode.Signed);
            TryUpdateModel(myData);
        }
        else
            myData = (MyData)TempData["myData"] ?? new MyData();
    }
    protected override void OnResultExecuted(ResultExecutedContext filterContext)
    {
        if (filterContext.Result is RedirectToRouteResult)
            TempData["myData"] = myData;
    }
...
//This shows a mid-step in the wizard - only as an example:
public ActionResult Step2(string backButton, string nextButton)
{
    if (backButton != null)
        return RedirectToAction("Step1");
    else if ((nextButton != null) && ModelState.IsValid)
        return RedirectToAction("Step3");
    else
        return View("Step2", myData); 
```

我昨天和今天早上一直在研究与`[Serializable]`、`TempData`、`Session`等相关的各种事情`OutputCache`，包括刷新页面和持久化数据，但找不到任何正确的东西。

唯一有意义的是在`return`调用中，它发生在特定的所有内容之后`ActionResult`。我不知道这是否正确，但在这种情况下，页面刷新会导致所有输入的数据消失是有道理的，因为模型直到最后才被击中。但是，如果这就是问题所在，我无法弄清楚如何在不破坏已有代码的情况下解决它。

我很感激任何指导。

PS MVC 4 没有标签，所以我只选择了 MVC 和 MVC 3。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T06:02:18.487

问题出在 TempData 上。存储在其中的数据仅适用于单个请求，在您的情况下是重定向。

第一种可能性是在 TempData 中将数据保留更长时间：

```
...
else
{
    myData = (MyData)TempData["myData"] ?? new MyData();
    TempData.Keep();
} 
```

哪个更将其同化为 Session。所以你可以使用 Session 而不是 TempData。

另一种解决方案是将每个步骤的数据存储在数据库中的某个临时表中，以便您可以在每个步骤中检索它。我猜你在每一步都有这个问题，不仅仅是在最后一个显示摘要。无论如何，如果您只关心最后一步，为什么不将数据保存到数据库中呢？

# php - selenium 2 无法连接到主机

> ID：10011343
> 
> 赞同：2
> 
> 时间：2012-04-04T12:44:08.870
> 
> 标签：php, selenium

我在 facebook php webdriver 上工作，我在 Ubuntu 上使用 selenium 独立服务器与 webdriver 库位于同一目录中。

我使用本地 IP 地址作为 192.168.xx 连接到 linux，当我执行以下代码时

```
<?
require '__init__.php';
$wd_host = 'http://localhost:4444/wd/hub'; 

$web_driver = new WebDriver($wd_host);

$session = $web_driver->session('firefox'); 

?> 
```

我经常收到此错误“未捕获的异常 'UnhandledWebDriverError' 并带有消息'在 45000 毫秒后无法连接到端口 7055 上的主机 127.0.0.1。Firefox 控制台输出：错误：未指定显示”

有人可以指出我哪里出错了？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T15:03:13.517

我刚刚开始研究 PHPUnit Selenium 测试套件，并且在我们的开发服务器上设置时遇到了同样的错误。

检查您是否安装了 Xserver，如果已安装，请确保服务器正在运行。然后确保在您启动 Firefox 的环境中设置了 DISPLAY 变量。“错误：未指定显示”是 Firefox 抱怨它无法找到用于显示浏览器窗口的服务器的方式。

以供参考：

*   [如何指定显示器？](https://stackoverflow.com/questions/784404/how-can-i-specify-a-display)（stackoverflow.com）

*   [Ubuntu 软件包：xser​​ver-xorg-core](http://packages.ubuntu.com/lucid/xserver-xorg-core) (packages.ubuntu.com)

*   [Xserver 手册页](http://manpages.ubuntu.com/manpages/lucid/man1/Xserver.1.html)(manpages.ubuntu.com)

如果您对端口 7055 消息感到好奇，这可能是由于没有显示而导致的级联故障：

*   [FirefoxDriver 内部](http://code.google.com/p/selenium/wiki/FirefoxDriverInternals)（code.google.com Selenium 项目）

祝好运并玩得开心点。

。大卫

# xcode - Xcode 4.3.2 10.7.3 应用程序在启动时崩溃

> ID：10011347
> 
> 赞同：1
> 
> 时间：2012-04-04T12:44:18.167
> 
> 标签：xcode, ios5, ios-simulator

我有一个在 Xcode 4.2 上运行良好的应用程序。升级到 Xcode 4.3.2 后，该应用程序在 5.1 模拟器上在启动时崩溃。

0x44e5c3: jmp 0x0044e63d ; Poco::MutexImpl::lockImpl() + 317

在这里获取 SIGABRT。

```
Incident Identifier: CC84E826-5B79-4F66-9182-4C779CAF865B
CrashReporter Key:   98f4ee80ecae8f5500ce329f80122c35d6e7a4b7
Hardware Model:      iPad3,3
Process:         DataQuery [211]
Path:            /var/mobile/Applications/BF9857DC-CDD1-40D2-9660-              EB2187E28224/DataQuery.app/DataQuery
Identifier:      DataQuery
Version:         ??? (???)
Code Type:       ARM (Native)
Parent Process:  launchd [1]

Date/Time:       2012-03-28 14:38:50.936 +0100
OS Version:      iPhone OS 5.1 (9B176)
Report Version:  104

Exception Type:  EXC_CRASH (SIGABRT)
Exception Codes: 0x00000000, 0x00000000
Crashed Thread:  0

Thread 0 name:  Dispatch queue: com.apple.main-thread
Thread 0 Crashed:
0   libsystem_kernel.dylib        0x36b81848 __kill + 8
1   libsystem_c.dylib             0x3156d2ae abort + 110
2   libc++abi.dylib               0x36a4af64 abort_message + 40
3   libc++abi.dylib               0x36a48346 _ZL17default_terminatev + 18
4   libobjc.A.dylib               0x36665368 _objc_terminate + 164
5   libc++abi.dylib               0x36a483be _ZL19safe_handler_callerPFvvE + 70
6   libc++abi.dylib               0x36a4844a std::terminate() + 14
7   libc++abi.dylib               0x36a49798 __cxa_throw + 116
8   DataQuery                     0x002dc45a Poco::MutexImpl::lockImpl() (Mutex_POSIX.h:82)
9   DataQuery                     0x003b67f6 Poco::FastMutex::lock() (Mutex.h:257)
10  DataQuery                     0x003b6820 Poco::ScopedLock<Poco::FastMutex>::ScopedLock(Poco::FastMutex&) (ScopedLock.h:59)
11  DataQuery                     0x003b49c6 Poco::Thread::uniqueId() (Thread.cpp:157)
12  DataQuery                     0x003b6228 Poco::Thread::Thread(std::string const&) (Thread.cpp:69)
13  DataQuery                     0x003116f8 com::pcbsys::foundation::fbase::fInternalTimer::fInternalTimer(com::pcbsys::foundation::fbase::fTimer*) (fTimer.cpp:77)
14  DataQuery                     0x00311276 com::pcbsys::foundation::fbase::fInternalTimer::fInternalTimer(com::pcbsys::foundation::fbase::fTimer*) (fTimer.cpp:67)
15  DataQuery                     0x003111e0 com::pcbsys::foundation::fbase::fTimer::fTimer() (fTimer.cpp:31)
16  DataQuery                     0x0031111e com::pcbsys::foundation::fbase::fTimer::fTimer() (fTimer.cpp:30)
17  DataQuery                     0x003127d8 __cxx_global_var_init + 144
18  DataQuery                     0x0031299c _GLOBAL__I_a + 0
19  dyld                          0x2fe8df64     ImageLoaderMachO::doModInitFunctions(ImageLoader::LinkContext const&) + 160
20  dyld                          0x2fe8dc6a ImageLoaderMachO::doInitialization(ImageLoader::LinkContext const&) + 14
21  dyld                          0x2fe8b866 ImageLoader::recursiveInitialization(ImageLoader::LinkContext const&, unsigned int, ImageLoader::InitializerTimingList&) + 318
22  dyld                          0x2fe8c826 ImageLoader::runInitializers(ImageLoader::LinkContext const&, ImageLoader::InitializerTimingList&) + 34
23  dyld                          0x2fe83a3a dyld::initializeMainExecutable() + 266
24  dyld                          0x2fe87c16 dyld::_main(macho_header const*, unsigned long, int, char const**, char const**, char const**) + 1430
25  dyld                          0x2fe822c8 dyldbootstrap::start(macho_header const*, int, char const**, long, macho_header const*) + 572
26  dyld                          0x2fe82058 _dyld_start + 48

Thread 0 crashed with ARM Thread State:
    r0: 0x00000000    r1: 0x00000000      r2: 0x00000001      r3: 0x3fad4fbc
    r4: 0x2fdfe740    r5: 0x36665301      r6: 0x00000002      r7: 0x2fdfe74c
    r8: 0x000000e3    r9: 0x00000000     r10: 0x0000000d     r11: 0x0031299d
    ip: 0x00000025    sp: 0x2fdfe738      lr: 0x3156d2b5      pc: 0x36b81848
  cpsr: 0x00000010 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T16:52:19.750

Not being as "expert" as you all seem to be, given the debug information provided, here are my 10 cents.

Context: I was experiencing the same kind of problem. I had a previous version of Xcode that was based on "Install Xcode" app from the app store, so i'm guessing 4.1 or 4.2. Wanting to install 4.3.2, I found on the net a terminal command to uninstall Xcode completely which I chose to do, before installing 4.3.2 that I knew did not use the "Install Xcode" app. Having uninstalled, the previous version, I then installed via App Store version 4.3.2. And then, impossible to launch apps. Even the default templates from the "new project" wizard, compiled fine, but whether on simulator or the devices themselves, Xcode would crash straight after trying to launch the app.

Solution: What I did. I uninstalled 4.3.2 => Trash. Downloaded via the apple developper website 4.2.1 that I installed. (The download is actually the "Install Xcode" app). Installed. Tested creating a default app. And it worked. I then installed 4.3.2 via again a downloaded package from the developer website (not the app store). Launched it ... and it asked if I wanted to uninstall the 4.2.1 version. Say yes. Now it works.

Does this help ?

# ios - 在空中退出 ios 应用程序

> ID：10011352
> 
> 赞同：1
> 
> 时间：2012-04-04T12:44:28.120
> 
> 标签：ios, apache-flex, air, soft-keyboard

我无法找到退出/关闭在 air 3.2 中为 ios 开发的 flex 应用程序的方法

我也无法使用 requestSoftKeyboard() 方法来提高软键盘，因为它不存在于 ios ，那么有没有其他方法来处理这个问题？

我已经使用可用的最新 air 3.2 版本尝试了这些。在 flex 中为 ios 开发东西似乎并不容易，因为许多功能不可用。

谁能告诉我如何管理这两件事？

期待它。

# sql-server - 使用 INSTEAD OF 触发器的 SQL Azure MVC3 主键冲突

> ID：10011357
> 
> 赞同：0
> 
> 时间：2012-04-04T12:44:37.137
> 
> 标签：sql-server, asp.net-mvc, asp.net-mvc-3, linq-to-sql, azure-sql-database

我最近开始使用 SQL Server 2008R2 后端开发 MVC3 应用程序。应用程序从 Web 查询接收流数据，然后在收到新数据时将数据插入表中。应用程序有时可以接收已经插入的数据（正在接收的数据包括一个预先生成的主键 - 在我的应用程序接收它之前已经生成了这个键）在这种情况下我不想将它插入到表中因为它已经存在。我意识到我可以生成自己的主键，但是我不希望数据库中有任何重复的行。

我能想到的最简单的解决方案是在每次插入时触发的表上的 INSTEAD OF 触发器，然后如果该行已经存在则忽略插入（我当时的想法是 MVC 应用程序不需要检查记录是否在尝试插入之前已经存在）。

这工作正常，但是当我将它移植到 SQL Azure 时，我现在每次 MVC 尝试插入已经存在的行时都会收到主键冲突错误 - 就好像触发器不起作用一样。如果我连接到 SSMS 中的 SQL Azure 实例并尝试使用表中已经存在的键进行插入，我不会收到任何错误，因此我知道触发器存在并且正在运行。

在 MVC 代码中，我使用从数据库生成的 LINQ to SQL 类和这些类的 InsertOnSubmit 方法。

有谁知道为什么会发生这种情况？或者为我想要实现的目标提出一个更好的解决方案（我相信在 LINQ 或其他东西中可能有更好的方法）。我对 Azure、LINQ 和 MVC 还很陌生，所以欢迎提出任何建议！

提前致谢。

**编辑**：触发器代码现在在下面 - 正如我所说的，当我在本地 SQL DB 上运行它时它工作正常 - 如果我尝试使用管理工作室中 Azure DB 上已经存在的主键进行插入，它工作正常。该错误仅发生在针对 Azure DB 运行的 MVC 应用程序中。

```
CREATE TRIGGER [dbo].[IO_Trig_INS_User] ON [dbo].[STRM_User]
INSTEAD OF INSERT
AS
BEGIN
SET NOCOUNT ON
--Check for existing user. If there is no duplicate, do an insert.
IF (NOT EXISTS (SELECT P.UserId
      FROM dbo.STRM_User P, inserted I
      WHERE P.UserId = I.UserId))
   INSERT INTO dbo.STRM_User
      SELECT *
      FROM inserted
END
GO 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T15:49:57.940

由于错误仅发生在应用程序中，因此我会分析以准确查看正在发送的内容。也许您认为插入的表中的内容不是实际进入的内容。如果它发送一批两条记录，它们是相同但当前不在表中，它可能会出现此错误。

# asp.net - 从 gridview 编辑文件服务器上的 Excel 文件

> ID：10011359
> 
> 赞同：0
> 
> 时间：2012-04-04T12:44:41.553
> 
> 标签：asp.net, vb.net

我需要允许用户浏览我们的文件服务器上的目录，并允许用户导航到打开它的 excel 文件，可能会更新它并保存它。我有它的工作。我有 2 个网格视图 - 第一个绑定到 DirectoryInfo 数组，第二个绑定到 FileInfo 数组。我将文件名呈现为网格中的链接，如下所示：

a href='file:///<%# Eval("FullName") %>' target="_blank" >'<%# Eval("Name") %>'

单击链接时，将在浏览器中打开 excel 文件。为了保存，他们似乎必须“另存为……”，这很令人困惑。这是我的问题所在。在浏览器中打开 excel 文件与使用 excel 打开文件有什么区别？我可以像上面那样在我的网格中有一个指向文件的链接，但让它使用 Excel 应用程序而不是浏览器打开吗？excel文件在文件服务器上是否重要？我认为我的用户会更舒服地在 Excel 中编辑文件 - 而不是在浏览器中。我怎样才能做到这一点？

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T14:01:39.160

在浏览器中或使用 excel 打开 excel 文件是用户机器上设置的选项。打开文件夹选项找到 xls 文件并使用“在同一窗口中浏览”选项。[更多信息](http://support.microsoft.com/kb/162059)

如果您使用完整的 UNC 路径（看起来像），则文件在服务器上并不重要。假设用户有权访问共享，他们应该没问题。

# drag-and-drop - 通过侧边栏中的应用程序名称直接拖放

> ID：10011364
> 
> 赞同：0
> 
> 时间：2012-04-04T12:45:06.810
> 
> 标签：drag-and-drop, spotify, sidebar

我已经找到了一个帮助演示应用程序“kitchensink”来介绍如何在我的应用程序页面上处理 HTML 元素上的拖放，但我更愿意在侧边栏中放置我的应用程序应用程序名称时直接触发事件在左侧 - 就像 last.fm 在拖动单个轨道时所做的那样。

任何人都可以帮助实现这一目标吗？

最好的问候T。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T18:09:33.210

有关在清单键中添加内容的详细信息，请参阅 Spotify[集成指南](https://developer.spotify.com/technologies/apps/guidelines/)的“应用程序清单”部分`AcceptedLinkTypes`。完成此操作后，您需要处理`EVENT.LINKSCHANGED`应用程序类上的事件以对下降做出反应。可以在[此处](https://developer.spotify.com/technologies/apps/docs/beta/2edfee4d46.html)找到相关文档。

# ruby-on-rails - Twitter Gem 和 Rails 问题保存用户

> ID：10011365
> 
> 赞同：1
> 
> 时间：2012-04-04T12:45:08.290
> 
> 标签：ruby-on-rails, ruby, twitter

我正在构建一个使用 twitter 提取所有提及的应用程序，我有一个 Profile 模型，我想在其中保存所有发送提及的用户。在该表上，我有 twitter_id 字段，我想在其中存储通过 twitter API 检索到的 id .. 以及具有相同名称的其他字段，如 description、screen_name 等。

```
 # a.tc is a Twitter object already authenticated
  tws = a.tc.mentions({:count => 200})

  # foreach mention
  tws.each do |t|
    # Check if we already have it saved
    p = Profile.find_by_twitter_id t.user.id
    if p.nil?
      # Profile doesnt exist, try to save it
      p = Profile.new(t.user.to_hash) # ERROR!
      p.twitter_id = t.user.id
      p.save
    end 
```

我已经尝试了很多东西，但一切都会出错......我是一个红宝石菜鸟=P

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T12:48:23.593

您需要删除 ID 或仅分配以下可用的属性`Profile`：

```
 usr = t.user.to_hash
  usr.delete :id # or "id", I'm not sure how the Hash looks like exactly
  ## delete all the other keys that are not neccessary
  p = Profile.new usr 
```

或**使用这种方式**。这是更好的方法，因为您不能意外分配属性

```
 p = Profile.new (:screen_name => t.user.screen_name, ... and so on... ) 
```

# java - 帧中重叠的 JLabel

> ID：10011367
> 
> 赞同：1
> 
> 时间：2012-04-04T12:45:09.097
> 
> 标签：java, swing, jlabel

我正在用 Java Swing 编写代码，其中在单击按钮时在框架中添加了一个标签。并添加标签，使其相互重叠以创建类似堆栈的视图。

我正在使用 label.setbouds(x,y,100,100) 函数创建自己的布局。每次在其动作侦听器中单击按钮时，都会添加一个新标签。例如

```
 if(e.getSource()==button){
                   label.setBounds(x+5,y+5,100,100);
                   frame.add(label);
                   frame.repaint();
              } 
```

现在的问题是，当绘制这些标签时，添加的第一个标签始终保留在顶部，并且新添加的标签被奇数标签所掩盖。

如果有人可以解释我如何绘制框架，以便新添加的框架出现在顶部并且旧标签重叠，我需要帮助。任何建议表示赞赏

问候

编码器

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-04T12:49:39.787

将您的标签插入`JLayeredPane`具有适当索引的 a 中。还要确保将您的设置`JLabel`为不透明（`setOpaque(true)`），以便它实际上会掩盖下面标签的内容。但是，如果下面的标签比上面的标签大，你仍然会看到它的一部分

# c# - 最新的反应式扩展 (Rx) 教程

> ID：10011369
> 
> 赞同：52
> 
> 时间：2012-04-04T12:45:15.343
> 
> 标签：c#, .net, system.reactive

我对 Reactive Extensions 很感兴趣，但我找不到最新的教程。我从使用[Reactive Extensions for .NET 治愈异步忧郁](http://go.microsoft.com/fwlink/?LinkId=208528)开始， 但它已经过时了。我可以找出一些变化，但我无法得到很多例子。

我在网上找到了很多文章，主要来自 2009,2010，但它们也与当前版本不兼容。我对将 Rx 与 Windows Phone 和 WebClient 一起使用特别感兴趣：

```
WebClient wc = new WebClient();

var o = Observable.FromEvent<DownloadStringCompletedEventArgs>(wc, "DownloadStringCompleted").Select(newString => newString.EventArgs.Result);

// Subscribe to the observable, and set the label text
o.Subscribe(s => myLabel.Text = s);

// Start the download
wc.DownloadStringAsync(new Uri("http://www.data.com/service")); 
```

不再工作，替换`FromEvent`为`FromEventPattern`是不够的。

有人可以指出我最新的资源吗？

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-04-04T13:26:16.090

学习 Rx 时，首先要了解 IObservable 背后的理念，以及它与 IEnumerable 相比如何基于推送的性质。我建议以下一个很好的解释：[A[nother] Simpler Tutorial for Reactive Extensions](http://web.archive.org/web/20140204230626/http://notabeta.com/2011/01/07/another-simpler-tutorial-rx/)

Lee Campbell 有很好的系列解释 api 以及何时使用它们。~~他还尝试使其与最新版本保持同步：[.NET 的反应式扩展和简介](http://leecampbell.blogspot.com/2010/08/reactive-extensions-for-net.html)~~ 该系列现在可作为一本书在[Introduction to Rx](http://www.introtorx.com/)

顺便说一句，我还写了一篇关于使用 rx 解决现实生活问题的博客文章：[Using Reactive Extensions for Streaming Data from Database](http://www.giorgi.dev/reactive-extensions/using-reactive-extensions-for-streaming-data-from-database/)

希望这可以帮助。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2013-03-07T22:15:31.530

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2013-04-03T01:52:35.180

到目前为止，帮助我了解 Rx 的最佳资源是：http: [//www.introtorx.com/](http://www.introtorx.com/)

我认为这种情况发生在很多人身上，但是在搜索关键字“Rx 教程”时找不到该网站。认为有人需要在网站上添加一些标签！

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-04-25T01:53:41.660

逐行（每一行）阅读这本在线书籍并练习。这很好，当我开始使用 Rx 时我就这样做了。

[http://www.introtorx.com/](http://www.introtorx.com/)

# continuous-integration - 是否可以在单台计算机上为 Atlassian Bamboo 安装多个远程代理？

> ID：10011370
> 
> 赞同：9
> 
> 时间：2012-04-04T12:45:28.073
> 
> 标签：continuous-integration, bamboo

我们公司生产跨平台软件，我们有 Bamboo 实例，可以在各种不兼容的环境（linux、win、os x）下构建项目。每个环境下都配置了一个用于构建的 VM。那么是否可以在每个 VM 上运行多个远程代理来执行不同项目的并发构建？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-05T02:26:27.183

是的，这是可能的。[请参阅Bamboo 远程代理安装指南](http://confluence.atlassian.com/display/BAMBOO40/Bamboo+remote+agent+installation+guide)的“更改远程代理存储数据的位置”部分。

为了使这项工作正常进行，对于您在同一台机器上运行的每个远程代理，您需要指定为代理定义的不同位置来存储其数据（否则构建将无法尝试写入同一位置）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-15T21:27:59.060

是的，可以在基于 Windows 和 linux 的主机上运行多个远程代理。我目前管理 linux 主机的远程代理，因此我无法评论 Windows 服务远程代理。

我实施了多个远程代理购买，首先为每个代理创建一个文件夹，然后在安装每个代理时指定每个代理的竹子.home 的位置。

在竹主服务器上，您可以重命名远程代理，以便区分运行您构建作业的代理。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-05-01T09:04:06.527

我不能对 linux 发表评论，但在 Windows 上，是的，你可以。

如果您通过以下方式将 Windows 服务名称从默认的“Bamboo Remote Agent”更改为“Bamboo Remote Agent 1”、“Bamboo Remote Agent 2”之类的名称：

1.  使用 bin/uninstall-ntservcice 卸载
2.  编辑 conf/wrapper.conf 以更改服务名称和显示名称
3.  使用 bin/install-nt-service 重新安装

完成此操作后，您应该能够正常运行多个代理。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-10-14T21:17:47.657

我能够在同一台服务器上创建两个代理。在这种情况下，我实际上想要相同的竹屋集，以便任何一个代理都可以构建到相同的位置......只是当我的一些构建需要更长的时间时，我有第二个代理坐在那里等待更快的构建，否则会排队. 在bamboo-agent.sh中，我改变了：

```
APP_NAME, APP_LONG_NAME, and REAL_DIR 
```

我没有改变任何东西`conf/wrapper.conf`。在 GUI 中，我通过单击代理功能页面上的“编辑详细信息”来更新代理的名称。

以防万一，我还把bamboo-agent.cfg.xml 中的agentUuid 标记设为空，以为在我启动代理时它会被覆盖。我不想代理以相同的 Uuid 开头，即使我不知道该字段已经用于什么。

据我所知，这按我的预期工作。我可以从 GUI 中看到两个代理并同时启动了两个构建。FWIW，我不知道这是否被认为是一种被黑客入侵的方式。

# asp.net - aspnet_regiis 不存在

> ID：10011371
> 
> 赞同：6
> 
> 时间：2012-04-04T12:45:34.360
> 
> 标签：asp.net, iis-7.5, web-deployment, aspnet-regiis.exe

我遇到[了这个](https://stackoverflow.com/questions/87107/how-do-i-fix-404-17-error-on-win-server-2k8-and-iis7)问题，但是在尝试按照建议的答案修复它时，我在我的计算机中找不到 aspnet_regiis，我按照[此处](http://msdn.microsoft.com/en-us/library/k6h9cz8h.aspx#FindingTheCorrectVersion)所述检查了匹配的 .NET 库，但该文件不存在。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2017-05-08T17:53:04.790

我确定您没有安装 .NET Framework 或没有将其包含在您的**Environment Variables**中。请安装，然后将其路径添加到环境变量中。

的默认位置`aspnet_regiis`是：

`C:\Windows\Microsoft.NET\Framework\v3`或者`v4`无论你的框架是什么。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-04T12:52:17.457

[这家伙](http://forums.iis.net/p/1175490/1971354.aspx)有一个`aspnet_regiis`文件丢失的问题。

他通过**修复他的 .Net 框架安装解决了这个问题。**

那可能值得一试？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-02-28T07:59:54.473

**以管理员身份**运行 Visual Studio ，然后重试 :)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-04T12:53:47.373

尝试安装 Microsoft .NET Framework 4

# c++ - C++ 下溢和上溢

> ID：10011372
> 
> 赞同：6
> 
> 时间：2012-04-04T12:45:34.877
> 
> 标签：c++

嗨，我是新来的，所以如果有什么问题请告诉我，下次我会努力做得更好。

我试图了解下溢和上溢在 C++ 中的工作原理。我的理解是，如果超出变量的范围，它将从范围的另一端开始。因此，如果 short 的最小值是 -32768 并且我们对其执行 -1 ，则新值应该是 SHRT_MAX 。（32767）这是我的代码：

```
#include<iostream.h>
#include<limits.h>
#include<conio.h>
int main ( void )
{
 int testpositive =INT_MIN ;
 short testnegative = SHRT_MIN ; 
 cout<< SHRT_MIN<<"\n";
 cout << testnegative-1<<"\n";
 cout << INT_MIN << "\n";
 cout << testpositive-1 << "\n"; 
 cout<<testpositive-2;
 getch();
 return 0;
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-04T12:51:26.927

上溢/下溢的确切行为仅针对`unsigned`类型指定。

> 无符号整数应遵守算术模 2^n 的定律，其中 n 是该特定整数大小的值表示中的位数。

来源：[草案 N3690 §3.9.1 第 4 句](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2013/n3690.pdf)

> 这意味着无符号算术不会溢出，因为不能由得到的无符号整数类型表示的结果以比得到的无符号整数类型可以表示的最大值大一的数字为模减少。

资料来源：[N3690 草案第 3.9.1 条注释 47](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2013/n3690.pdf)

对于普通的有符号整数类型，C++ 标准只是简单地说，任何事情都可能发生。

> 如果在计算表达式期间，结果未在数学上定义或不在其类型的可表示值范围内，则行为未定义

资料来源：[草案 N3690 §5 第 4 句](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2013/n3690.pdf)

如果我们谈论的是 x86 处理器（或大多数其他现代处理器），那么行为确实正是您所描述的，对于 CPU，有符号值或无符号值之间没有区别（有有符号和无符号*操作*，但值本身只是位）。

请注意，编译器可以假设（并且大多数现代优化编译器实际上确实假设）在正确的程序中不会发生有符号整数溢出，例如在如下代码中：

```
int do_something();
int do_something_else();

void foo() {
    int x = do_something();
    int y = x + 1;
    if (x < y) {
        do_something();
    } else {
        do_something_else();
    }
} 
```

编译器可以完全跳过`else`生成代码中的测试和分支，因为在有效程序中，带符号的 int`x`始终小于`x+1`（因为不能将带符号的溢出视为有效行为）。但是，如果您替换`int`为`unsigned int`，编译器必须为 test 和 else 分支生成代码，因为对于无符号类型，它可能是`x > x+1`.

例如clang编译代码`foo`为

```
foo():                                # @foo()
        push    rax
        call    do_something()
        pop     rax
        jmp     do_something()       # TAILCALL 
```

您可以在其中看到 ode 只调用`do_something`了两次（除了对 的奇怪处理）并且实际上`rax`没有提及。`do_something_else`或多或少相同的代码由`gcc`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-04T13:08:05.537

有符号溢出是 C++ 中未定义的行为。

例如：

`INT_MIN - 1`

`-INT_MIN`

是调用未定义行为的表达式。

`SHRT_MIN - 1`并且`-SHRT_MIN`在具有 16 位`short`和 32 位的环境中不是未定义的行为，`int`因为通过整数提升操作数被提升到`int`第一个。在具有 16 位`short`and的环境中`int`，这些表达式也是未定义的行为。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-04T12:47:31.770

通常是的。但由于这是 C++，而且 C++ 受 C++ 标准规范，所以您必须知道溢出是**未定义的行为**。

尽管您所说的可能适用于大多数平台，但不能保证，所以不要依赖它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-04T12:47:38.960

新值不一定`SHRT_MAX`是未定义的。

# yii - Yii 从数据库中获取最旧的对象 - findByAttributes

> ID：10011373
> 
> 赞同：1
> 
> 时间：2012-04-04T12:45:39.727
> 
> 标签：yii

使用 FindByAttributes 查询我想从我的数据库中获取最旧的元素。

我的代码：

```
$oMemberLocked = MembersLocked::model()->findByAttributes(array(
        'lockedid' => $this->id,
        'request' => 2,
    )); 
```

对象 MembersLocked 具有属性“日期”。

如何获取日期最大的元素？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-04T13:45:58.857

您可以按日期升序对查询进行排序。

```
$criteria = new CDbCriteria;
$criteria->order = 'date ASC';
$oMemberLocked = MembersLocked::model()->findByAttributes(array(
    'lockedid' => $this->id,
    'request' => 2,
), $criteria); 
```

# html - 字体，弄乱了 Opera 浏览器中的自动完成下拉列表

> ID：10011378
> 
> 赞同：9
> 
> 时间：2012-04-04T12:45:54.610
> 
> 标签：html, css, opera, font-face, webfonts

正如我在标题中提到的，当使用 css font-family，自定义字体（font-face）时，它会在 Opera 中弄乱（黑色背景，黑色文本（我猜））自动完成下拉列表。

```
input[type='text'], input[type='password'], input[type='email'], input[placeholder] {
    font-size: 1.2em;
    font-family:  sans-serif;
    color: #2A873A;
    padding-left: 25px;
} 
```

上面的代码工作正常，但如果我替换“font-family:sans-serif;” 使用一些字体字体（谷歌网络字体也是如此），然后问题就开始了。

这是“错误”的截图。

![在此处输入图像描述](../Images/14f7d38e1976a89e2c06b0a514e1f09f.png)

PS 我应该提到的是 Opera 的本机自动完成，而不是自定义 js，下拉列表。

**编辑：http:** [//jsfiddle.net/burCR/](http://jsfiddle.net/burCR/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-05T23:16:35.163

同上直接指定字体。您可能还想尝试使用 base64 编码，根据我的经验，它工作得很好，并且具有很好的跨浏览器兼容性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T08:21:53.733

您是否尝试过直接在 CSS 中指定字体？例如：

```
div.magicsomething {font-family:CustomFont,Customfont2,sans-serif;} 
```

请记住，嵌套元素会被自定义字体卡住，因此，如果您不执行上述操作，您可能还非常需要`font-family:inherit`“嵌套元素”。

如需额外帮助，请提及自定义字体的名称、完整的 CSS 和指向您网站的实时链接

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-02-25T22:10:14.323

您可以分别为背景和文本指定颜色。

```
input   {
    background-color: white;
    color: black;
    font-family: "My Fontface Font", Verdana, ms serif;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-06-24T03:50:14.577

尽管这可能很明显，但请检查以确保您的字体与 Opera 兼容。这是一些网络安全字体的列表。

[http://www.w3schools.com/cssref/css_websafe_fonts.asp](http://www.w3schools.com/cssref/css_websafe_fonts.asp)

如果这不起作用，请尝试从 microsoft word 中获取您想要的字体并使用 @fontface 插入您的自定义字体，而不是使用网络安全字体。

最后尝试在表单上使用您的字体系列并让输入继承字体。希望这有帮助。

# c# - xx.xx.xx 格式的 C# Timer 计数器

> ID：10011384
> 
> 赞同：6
> 
> 时间：2012-04-04T12:46:21.050
> 
> 标签：c#, timer, formatting, int

我有一个计数器每 1 秒计数一次并将 1 添加到 int。

**问题**
如何格式化我的字符串，使计数器看起来像这样：

> 00:01:23

代替：

> 123

**我尝试过**
的事情到目前为止我尝试过的事情：

```
for (int i = 0; i < 1; i++)
        {
            _Counter += 1;
            labelUpTime.Text = _Counter.ToString();
        } 
```

我的计时器的间隔设置为：1000（所以它每秒增加 1）。
我确实读过一些关于 string.Format("") 的东西，但我不知道它是否适用。
谢谢你能指导我完成这个：D！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-04T12:52:08.757

使用时间跨度：

```
_Counter += 1;
labelUpTime.Text = TimeSpan.FromSeconds(_Counter).ToString(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-04T12:50:14.150

你可以把它做成一个`TimeSpan`（因为它是一个时间跨度），然后格式化：

```
labelUpTime.Text = TimeSpan.FromSeconds(_Counter).ToString(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-04T12:51:55.607

不要使用计数器，也不要依赖计时器每秒钟准确地触发一次。它不会。做这样的事情。

```
class TimerTest
{
    private DateTime _start = DateTime.Now;
    private Timer _timer = new Timer(1000);

    public TimerTest()
    {
        // (DateTime.Now - _start) returns a TimeSpan object
        // Default TimeSpan.ToString() returns 00:00:00
        _timer.Elapsed = (o, e) => labelUpTime.Text = (DateTime.Now - _start).ToString();
    }
} 
```

[`TimeSpan.ToString`](http://msdn.microsoft.com/en-us/library/1ecy8h51.aspx)您可以使用该方法调整格式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-04T12:51:21.453

```
TimeSpan timer = new TimeSpan(0); 
```

在你的时间间隔内：

```
timer += TimeSpan.FromSeconds(1); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-04T12:54:45.550

使用时间跨度。添加第二次使用

```
mytimespan.Add(new TimespanFromSeconds(1));
Console.WriteLine(mytimespan);    //Output in the form of xx:xx:xx 
```

[http://www.dotnetperls.com/timespan](http://www.dotnetperls.com/timespan)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-04-07T14:42:10.990

对我来说效果很好

```
 public TimeSpan ElapsedTimeFormatted
    {
        get
        {
            if (FinishedOn != null &&
                StartedAt != null)
            {
                TimeSpan durationCount = new TimeSpan();

                int hours = 0;
                int minutes = 0;
                int seconds = 0;

                var times = Segments.Select(c => c.ElapsedTimeFormatted).ToList();

                foreach (var time in times)
                {
                    TimeSpan timeParse = TimeSpan.Parse(time);

                    hours = hours + (int)timeParse.Hours;
                    minutes = minutes + (int)timeParse.Minutes;
                    seconds = seconds + (int)timeParse.Seconds;

                    durationCount = new TimeSpan(hours, minutes, seconds);
                }

                return durationCount;
            }

            return new TimeSpan();
        }
    } 
```

# jquery - 静态 HTML 页面中的 JQuery 搜索，突出显示找到的单词

> ID：10011385
> 
> 赞同：27
> 
> 时间：2012-04-04T12:46:26.033
> 
> 标签：jquery, html, css, search, highlight

我一直在尝试使用 JQuery 在静态 HTML 页面中进行简单搜索。不得不提的是，这只是我第一次使用 JQuery。

我正在尝试更改页面中找到的单词的背景，这是我迄今为止尝试过的：

**我的Javascript.js：**

```
$(document).ready(function(){

     $('#searchfor').keyup(function(){
         page = $('#all_text').text();
         searchedText = $('#searchfor').val();
         $("p:contains('"+searchedText+"')").css("color", "white");
    });
}); 
```

这里也是 HTML 代码：

**page.html：**

```
<html>
<head>
    <title>Test page</title>
</head>
<body bgcolor="#55c066">
<input type="text" id="searchfor"></input>
    <p id="all_text">Lorem ipsum dolor sit amet, consectetuer adipiscing elit, sed diam nonummy nibh euism modo typi, qui nunc nobis videntur parum clari, fiant sollemnes in futurum.
    <font color="red">Lorem ipsum dolor sit amet, consectetuer adipiscing elit, sed diam nonummy nibh euismod tinci futurum.</font>
    </p>
</body>
    <script src="jquery-1.7.2.min.js"></script>
    <script src="myJavascript.js"></script>
</html> 
```

使用 Firebug 检查页面后，我可以看到 JQuery 中的变量确实从输入字段中获取了值，但我想我搞砸了突出显示部分。

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2016-05-21T14:42:48.970

# 为什么使用自制的突出显示功能是个坏主意

从头开始构建自己的突出显示功能可能不是一个好主意，因为您肯定会遇到其他人已经解决的问题。挑战：

*   您需要删除带有 HTML 元素的文本节点以突出显示您的匹配项，而不会破坏 DOM 事件并一遍又一遍地触发 DOM 重新生成（例如，就是这种情况`innerHTML`）
*   如果要删除突出显示的元素，则必须删除 HTML 元素及其内容，并且还必须组合拆分的文本节点以进行进一步搜索。这是必要的，因为每个荧光笔插件都会在文本节点内搜索匹配项，如果您的关键字将被拆分为多个文本节点，它们将不会被找到。
*   您还需要构建测试以确保您的插件在您没有考虑过的情况下工作。我说的是跨浏览器测试！

听起来很复杂？如果您想要一些功能，例如忽略突出显示中的某些元素、变音符号映射、同义词映射、iframe 内搜索、分隔词搜索等，这将变得越来越复杂。

# 使用现有插件

使用现有的、良好实现的插件时，您不必担心上述命名的事情。Sitepoint 上的文章**[10 jQuery text highlighter plugins比较了流行的荧光笔插件。](https://www.sitepoint.com/10-jquery-text-highlighter-plugins/)**这包括这个问题的答案插件。

# 看看[mark.js](https://markjs.io/)

[mark.js](https://markjs.io/)就是这样一个用纯 JavaScript 编写的插件，但也可以作为 jQuery 插件使用。它的开发目的是提供比其他插件更多的机会，并提供以下选项：

*   单独搜索关键字而不是完整的术语
*   地图变音符号（例如，如果“justo”也应该匹配“justò”）
*   忽略自定义元素内的匹配项
*   使用自定义突出显示元素
*   使用自定义突出显示类
*   映射自定义同义词
*   也在 iframe 内搜索
*   收到未找到的条款

**[演示](https://markjs.io/configurator.html)**

或者你可以看到[这个 fiddle](https://jsfiddle.net/julmot/vpav6tL1/)。

**用法示例**：

```
// Highlight "keyword" in the specified context
$(".context").mark("keyword");

// Highlight the custom regular expression in the specified context
$(".context").markRegExp(/Lorem/gmi); 
```

它是在 GitHub 上免费开发的开源软件（[项目参考](https://github.com/julmot/mark.js)）。

# 使用您的代码突出显示 mark.js 关键字的示例

```
$(function() {
  $("input").on("input.highlight", function() {
    // Determine specified search term
    var searchTerm = $(this).val();
    // Highlight search term inside a specific context
    $("#context").unmark().mark(searchTerm);
  }).trigger("input.highlight").focus();
});
```

```
mark {
  background: orange;
  color: black;
}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/mark.js/7.0.0/jquery.mark.min.js"></script>
<input type="text" value="test">
<div id="context">
  Lorem ipsum dolor test sit amet
</div>
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-04-04T13:00:24.153

做这样的事情

```
 $("p:contains('"+searchedText+"')").each( function( i, element ) {
      var content = $(element).text();
      content = content.replace( searchedText, '<span class="search-found">' + searchedText + '</span>' );
      element.html( content );
 });

 .search-found {
     text-decoration: underline;
 } 
```

ps这仅在每个“元素”仅具有纯文本内容时才有效，否则它将删除子节点

`each`编辑：在回调中删除了额外的 ')'

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-04-04T14:36:00.937

这是我的：http: [//jsfiddle.net/x8rpY/1/](http://jsfiddle.net/x8rpY/1/)

JS：

```
$('#searchfor').keyup(function(){
         var page = $('#all_text');
         var pageText = page.text().replace("<span>","").replace("</span>");
         var searchedText = $('#searchfor').val();
         var theRegEx = new RegExp("("+searchedText+")", "igm");    
         var newHtml = pageText.replace(theRegEx ,"<span>$1</span>");
         page.html(newHtml);
    }); 
```

CSS：

```
#all_text span
{
    text-decoration:underline;
    background-color:yellow;    
} 
```

也适用于重复搜索。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2017-04-20T10:19:41.177

```
$(function() {
  $("input").on("input.highlight", function() {
    // Determine specified search term
    var searchTerm = $(this).val();
    // Highlight search term inside a specific context
    $("#context").unmark().mark(searchTerm);
  }).trigger("input.highlight").focus();
});
```

```
mark {
  background: orange;
  color: black;
}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/mark.js/7.0.0/jquery.mark.min.js"></script>
<input type="text" value="test">
<div id="context">
  Lorem ipsum dolor test sit amet
</div>
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-12-17T17:07:17.620

纯 JS，因为它也可以帮助其他搜索的人。
使用与文本`regex`匹配的a `input`（不区分大小写 - `i`，所有出现 - `g`）

```
var searchQuery = document.querySelector("#inputSearch");
var context = document.querySelector("#context");

searchQuery.addEventListener('input', searchQueryResults)

function searchQueryResults() {
  context.innerHTML = context.textContent.replace(new RegExp(searchQuery.value, "gi"), (match) => `<u>${match}</u>`);
}
```

```
<input type="text" value="" id="inputSearch">
<div id="context">
  Lorem ipsum dolor test sit amet
</div>
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-04-04T12:56:05.383

（对于你想要使用背景颜色而不是颜色作为背景的一件事）

我将为普通创建一个 css 类，为突出显示的文本创建一个单独的（继承的）css 类，然后在找到所需内容时使用 JQuery 更改 css 类。

只是我最初的想法，不确定是否有更好的方法。

编辑：如果您只想更改特定单词，则必须修改 innerHTML 以将其放在单独的标签中。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-04-04T13:19:22.190

这是我快速破解的另一个示例：http: [//jsfiddle.net/VCJUX/](http://jsfiddle.net/VCJUX/)

# ruby - '救援 rbuf_fill': Timeout::Error (Timeout::Error)

> ID：10011387
> 
> 赞同：10
> 
> 时间：2012-04-04T12:46:38.800
> 
> 标签：ruby

相同的脚本不同的错误。这可能更多地与我的网络而不是我的代码有关。脚本如下：

```
#!/usr/bin/env ruby -rubygems

require File.join(File.dirname(__FILE__), 'authentication')

require "csv" # faster_csv (ruby 1.9)

lines = CSV.read(File.join(File.dirname(__FILE__), 'karaoke.csv')) # Exported an Excel file as CSV

lines.slice!(0) # remove header line

collection = StorageRoom::Collection.find('collection ID')
Song = collection.entry_class

lines.each do |row|
  karaoke = Song.new(:artist => row[0], :song => row[1], :genre => row[2], :file => StorageRoom::File.new_with_filename("#{karaoke.artist}#{karaoke.song}.mov"))

  if karaoke.save
    puts "Song saved: #{karaoke.artist}, #{karaoke.song}, #{karaoke.genre}"
  else
    puts "Song could not be saved: #{karaoke.errors.join(', ')}"
  end
end 
```

错误是：

```
/usr/local/lib/ruby/1.9.1/net/protocol.rb:140:in `rescue in rbuf_fill': Timeout::Error (Timeout::Error)
from /usr/local/lib/ruby/1.9.1/net/protocol.rb:134:in `rbuf_fill'
from /usr/local/lib/ruby/1.9.1/net/protocol.rb:116:in `readuntil'
from /usr/local/lib/ruby/1.9.1/net/protocol.rb:126:in `readline'
from /usr/local/lib/ruby/1.9.1/net/http.rb:2219:in `read_status_line'
from /usr/local/lib/ruby/1.9.1/net/http.rb:2208:in `read_new'
from /usr/local/lib/ruby/1.9.1/net/http.rb:1191:in `transport_request'
from /usr/local/lib/ruby/1.9.1/net/http.rb:1177:in `request'
from /usr/local/lib/ruby/1.9.1/net/http.rb:1170:in `block in request'
from /usr/local/lib/ruby/1.9.1/net/http.rb:627:in `start'
from /usr/local/lib/ruby/1.9.1/net/http.rb:1168:in `request'
from /usr/local/lib/ruby/gems/1.9.1/gems/httparty-0.8.1/lib/httparty/request.rb:73:in `perform'
from /usr/local/lib/ruby/gems/1.9.1/gems/httparty-0.8.1/lib/httparty.rb:391:in `perform_request'
from /usr/local/lib/ruby/gems/1.9.1/gems/httparty-0.8.1/lib/httparty.rb:359:in `post'
from /home/hanleyhansen/Desktop/thriventures-storage_room_gem-f7015ed/lib/storage_room/model.rb:69:in `block (2 levels) in create'
from /usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.2.2/lib/active_support/callbacks.rb:403:in `_run__3801264735883484179__create__2558870880708463764__callbacks'
from /usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.2.2/lib/active_support/callbacks.rb:405:in `__run_callback'
from /usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.2.2/lib/active_support/callbacks.rb:385:in `_run_create_callbacks'
from /home/hanleyhansen/Desktop/thriventures-storage_room_gem-f7015ed/lib/storage_room/model.rb:68:in `block in create'
from /usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.2.2/lib/active_support/callbacks.rb:403:in `_run__3801264735883484179__save__2558870880708463764__callbacks'
from /usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.2.2/lib/active_support/callbacks.rb:405:in `__run_callback'
from /usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.2.2/lib/active_support/callbacks.rb:385:in `_run_save_callbacks'
from /home/hanleyhansen/Desktop/thriventures-storage_room_gem-f7015ed/lib/storage_room/model.rb:67:in `create'
from /home/hanleyhansen/Desktop/thriventures-storage_room_gem-f7015ed/lib/storage_room/model.rb:61:in `save'
from import_csv.rb:17:in `block in <main>'
from import_csv.rb:14:in `each'
from import_csv.rb:14:in `<main>' 
```

我有兴趣了解为什么会发生此错误以及解决方案。提前致谢！

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-04T22:36:49.363

在浏览网络时发现了这个。希望它可以帮助某人！[设置更长的超时时间](http://userprimary.net/posts/2008/04/13/setting-a-longer-timeout-for-nethttp-requests-in-ruby/)

以下是在 Net::HTTP API 中调整超时的方法：

```
require 'net/http' 

http = Net::HTTP.new(@host, @port)
http.read_timeout = 500 
```

# html - 在 HTML5 中设置视频高度

> ID：10011389
> 
> 赞同：16
> 
> 时间：2012-04-04T12:46:42.397
> 
> 标签：html, video, height, width

可能是一个简单的问题，但它真的让我发疯。我只想设置 HTML5 视频的高度和宽度。

我正在使用这段代码：

```
 <video controls="controls" width="1000" id="video">
            <source src="sintel-trailer.ogv" type='video/ogg; codecs="theora, vorbis"'>
            <source src="sintel-trailer.mp4" type='video/mp4; codecs="avc1.42E01E, mp4a.40.2"'>
  </video> 
```

结果： ![在此处输入图像描述](../Images/0d5d6e643580ff4580ab810d0680340a.png)

如果我添加高度属性

```
<video controls="controls" width="1000" height="300" id="video">
                <source src="sintel-trailer.ogv" type='video/ogg; codecs="theora, vorbis"'>
                <source src="sintel-trailer.mp4" type='video/mp4; codecs="avc1.42E01E, mp4a.40.2"'>
 </video> 
```

结果： ![在此处输入图像描述](../Images/8ac2f12a3b850ba704f82a07a5a657ce.png)

那么我在这里错过了什么吗？

任何人都可以纠正我正在做的错误。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2016-01-25T11:04:49.520

这是简单的 CSS 技巧，您不需要添加任何 JavaScript 或 jQuery 代码。`object-fit`在视频标签上使用CSS 属性。

**HTML**

```
<video controls="controls" id="video">
<source src="sintel-trailer.ogv" type='video/ogg; codecs="theora, vorbis"'>
<source src="sintel-trailer.mp4" type='video/mp4; codecs="avc1.42E01E, mp4a.40.2"'>
</video> 
```

**CSS**

```
#video{
  object-fit: initial;
  width: 400px;
  height: 300px;
} 
```

[**见小提琴**](https://jsfiddle.net/kab5409f/)

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-04-04T12:57:34.690

您无法更改`<video>`标签中的纵横比。

但是，您可以阅读视频内容并将其写入`<canvas>`元素。

例如：

```
<canvas id="canvas" height="768" width="1024"></canvas> 
```

和 JS：

```
function updateVideo( ) {
    var canvas = document.getElementById( 'canvas' );
    var ctx = canvas.getContext( '2d' );
    var myVideo = document.getElementById( 'video' );
    ctx.drawImage( myVideo, 0, 0, 640, 480 );
}
setInterval ( updateVideo, 24 ); 
```

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-04-04T13:05:00.200

您可以使用 css 来解决。

```
#video {
   width:1000px;
   height:auto;
} 
```

# slickgrid - 禁用 slickgrid 水平滚动条

> ID：10011393
> 
> 赞同：3
> 
> 时间：2012-04-04T12:46:48.310
> 
> 标签：slickgrid

我需要禁用 slickgrid 水平滚动条。我只有一列并且有 forceFitColumns ：是的。

有可能吗？

谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-10T20:46:32.590

你可以用一点 CSS 来做到这一点。尝试将此添加到您的页面。

```
 .slick-viewport {
    overflow-x: hidden !important;
} 
```

请注意，!important 很重要，因为样式被网格代码内联，所以这会覆盖它......

高温高压

# android - Android ICS 小部件（开关）和旧版本

> ID：10011394
> 
> 赞同：2
> 
> 时间：2012-04-04T12:46:48.773
> 
> 标签：android, android-widget

是否可以为 ICS 版本提供开关小部件，但为 ICS 之前提供复选框？如果是这样，怎么做？

我不担心其他组件，只需切换。

***我的解决方案***

看到开关和复选框都继承自 CompoundButton，我只是这样做了

```
((CompoundButton)findViewById(R.id.swTax)).setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {

        public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
            calculateValues();
        }
    }); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-10T18:28:24.147

通过将其放置在单独的布局文件夹中，为 ICS 版本创建单独的布局 XML 文件，例如`layout-v14`. 为防止出现大量重复的 XML，请使用一个主布局文件并包含小部件。生成的文件结构如下所示：

*   布局
    *   我的布局.xml
    *   小部件.xml
*   布局-v14
    *   小部件.xml

在`mylayout.xml`你会有类似的东西：

```
<include layout="@layout/widget" /> 
```

在`Activity`此布局中，您还必须在设置与`CheckBox`或`Switch`小部件的任何交互之前检查版本：

```
int version = android.os.Build.VERSION.SDK_INT;
if (version >= 14) {
    // get your Switch view and set up listeners etc
}
else {
    // get your CheckBox view and set up listeners etc
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T02:54:55.473

我已经尝试了我找到的所有解决方案，但没有一个适合我的需求，所以我创建了自己的小部件，它使用了来自 NineOld 兼容性库的 ObjectAnimator，并且在任何 android API 上都可以正常工作。

```
import android.widget.RelativeLayout;
import com.myapp.utilities.AppUtils;
import com.nineoldandroids.animation.Animator;
import com.nineoldandroids.animation.AnimatorListenerAdapter;
import com.nineoldandroids.animation.ObjectAnimator;

public class SwitchButton extends RelativeLayout {

public static final int TEXT_SIZE = 11;

public float HANDLE_SHIFT = -40f;
public float TEXT_RIGHT_SHIFT = 40f;
public static int BUTTON_ID = 0x00009999;
public static int TEXT_ID = 0x00008888;

private Button handleButton;
private RoboTextView textView;
private boolean switchEnabled;
private String yesStr;
private String noStr;
private int TEXT_LEFT_PADDING = 13;

private ObjectAnimator animateHandleLeftShift;
private ObjectAnimator animateHandleRightShift;
private int HANDLE_BUTTON_HEIGHT = 22;
private int HANDLE_BUTTON_WIDTH = 42;
private ObjectAnimator animateTextLeftShift;
private ObjectAnimator animateTextRightShift;

public SwitchButton(Context context) {
    super(context);
    onCreate(context);
}

private void onCreate(Context context) {

    float density = context.getResources().getDisplayMetrics().density;

    TEXT_LEFT_PADDING *= density;

    HANDLE_BUTTON_HEIGHT *= density;
    HANDLE_BUTTON_WIDTH *= density;

    HANDLE_SHIFT *= density;
    TEXT_RIGHT_SHIFT *= density;

    yesStr = getContext().getString(R.string.yes).toUpperCase();
    noStr = getContext().getString(R.string.no).toUpperCase();

    {// Button
        handleButton = new Button(getContext());
        RelativeLayout.LayoutParams buttonParams = new LayoutParams(HANDLE_BUTTON_WIDTH, HANDLE_BUTTON_HEIGHT);
        buttonParams.addRule(RelativeLayout.CENTER_VERTICAL);
        buttonParams.addRule(RelativeLayout.ALIGN_PARENT_RIGHT);

        handleButton.setBackgroundResource(R.drawable.button_switch_handle_selector);
        handleButton.setId(BUTTON_ID);

        addView(handleButton, buttonParams);
    }

    {// Text
        textView = new RoboTextView(getContext());
        LayoutParams textParams = new LayoutParams(ViewGroup.LayoutParams.WRAP_CONTENT, ViewGroup.LayoutParams.WRAP_CONTENT);
        textParams.addRule(RelativeLayout.CENTER_VERTICAL);

        textView.setText(yesStr);
        textView.setTextColor(getContext().getResources().getColor(R.color.new_normal_gray));
        textView.setTextSize(TypedValue.COMPLEX_UNIT_DIP, TEXT_SIZE);
        textView.setPadding(TEXT_LEFT_PADDING, 0, 0, 0);
        textView.setFont(RoboTextView.ROBOTO_BOLD_FONT);
        textView.setId(TEXT_ID);
        float shadowRadius = 0.5f ;
        float shadowDx = 0;
        float shadowDy = 1;
        textView.setShadowLayer(shadowRadius, shadowDx, shadowDy, Color.BLACK);

        addView(textView, textParams);
    }
    initFlipAnimation();

}

@Override
public void setOnClickListener(OnClickListener l) {
    handleButton.setOnClickListener(l);
    textView.setOnClickListener(l);
}

public void toggle(View view){
    if (AppUtils.HONEYCOMB_PLUS_API && view.getId() == TEXT_ID) { // ignore text clicks
        return;
    }

    switchEnabled = !switchEnabled;

    if (switchEnabled) {
        // animate handle to the left
        animateHandleLeftShift.start();
        animateTextLeftShift.start();

        textView.setText(noStr);
    } else {
        animateHandleRightShift.start();
        animateTextRightShift.start();

        textView.setText(yesStr);
    }
}

private android.view.animation.Interpolator accelerator = new LinearInterpolator();
private static final int DURATION = 70;

private void initFlipAnimation() {

    animateHandleLeftShift = ObjectAnimator.ofFloat(handleButton, "translationX", 0f, HANDLE_SHIFT);
    animateHandleLeftShift.setDuration(DURATION);
    animateHandleLeftShift.setInterpolator(accelerator);

    animateHandleRightShift = ObjectAnimator.ofFloat(handleButton, "translationX", HANDLE_SHIFT, 0f);
    animateHandleRightShift.setDuration(DURATION);
    animateHandleRightShift.setInterpolator(accelerator);

    animateHandleLeftShift.addListener(new AnimatorListenerAdapter() {
        @Override
        public void onAnimationEnd(Animator anim) {
            // TODO
        }
    });

    animateTextLeftShift = ObjectAnimator.ofFloat(textView, "translationX", 0f, TEXT_RIGHT_SHIFT);
    animateTextLeftShift.setDuration(DURATION);
    animateTextLeftShift.setInterpolator(accelerator);

    animateTextRightShift = ObjectAnimator.ofFloat(textView, "translationX", TEXT_RIGHT_SHIFT, 0f);
    animateTextRightShift.setDuration(DURATION);
    animateTextRightShift.setInterpolator(accelerator);
} 
```

}

在 XML 中

```
<com.chess.SwitchButton
    android:id="@+id/ratedGameSwitch"
    android:layout_width="@dimen/button_switch_width"
    android:layout_height="@dimen/button_switch_height"
    android:background="@drawable/button_switch_back"
    /> 
```

在 Activity/Fragment 中，您只需要 findViewById 并将 clickListener 设置为它，然后在 onClick 回调中处理它：

```
switchButton = (SwitchButton) optionsView.findViewById(R.id.ratedGameSwitch);
switchButton.setOnClickListener(this);

@Override
public void onClick(View view) {
    if (view.getId() == SwitchButton.BUTTON_ID  || view.getId() == SwitchButton.TEXT_ID){
        switchButton.toggle(view);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T09:26:23.137

我使用类似分段控件（单选按钮的扩展）的 iOS，而不是开关，然后您可以对旧 SDK 和新 SDK 使用相同的代码。

这里有一个很好的示例项目，其中包含所有代码：

[https://github.com/makeramen/android-segmentedradiobutton](https://github.com/makeramen/android-segmentedradiobutton)

它有文本和图形样本。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-01T13:04:02.117

发生了！

[http://developer.android.com/tools/support-library/index.html](http://developer.android.com/tools/support-library/index.html)

v7 appcompat 库的更改：添加了 SwitchCompat，这是在 Android 4.0（API 级别 14）中添加的 Switch 小部件的反向移植。

# xpages - 在 Xpages 中使用 SSJS 将焦点设置为字段？

> ID：10011397
> 
> 赞同：1
> 
> 时间：2012-04-04T12:46:50.617
> 
> 标签：xpages

我正在使用提交按钮中的 SSJS 验证我的表单。为了向用户显示错误，我正在使用扩展库对话框。

如何使用 SSJS 将焦点设置到验证失败的字段？

我可以做的一件事是在对话框的 OK 按钮中使用 CSJS。我用 OK 按钮关闭它，如下所示：

```
var errorField = '#{javascript:viewScope.get("errorField")}'; 
```

我尝试了以下方法，但似乎不起作用。

```
if (errorField != null &&  errorField != "")
{   
var ef = document.getElementsByName("#{id:" + errorField + "}");
ef.focus();

} 
```

当我进行实际验证时，我正在设置范围变量 errorField。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-05T08:08:00.737

是的，我对丢失的结肠不好。好的，试了一下，当我分解 id 表达式时，它似乎对我也不起作用。

您将 viewScope 设置为错误字段的 id，是否可以将其设置为：

```
getComponent('...').getClientId(); 
```

如果你能做到这一点，你将能够运行：

```
var errorField = '#{javascript:viewScope.get("errorField")}';

var ef = dojo.byId(errorField);
ef.focus(); 
```

这对我来说很好。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-04T13:39:59.670

尝试使用：

```
var ef = dojo.byId('#{id'+errorField+'}');
ef.focus(); 
```

getElementsByName 正在寻找具有 name="..." 的多个元素并返回一个数组。您不能将焦点设置为一组控件。

在 XPages 中，所有控件都有唯一的 id，因此使用 dojo 搜索 id 将返回单个元素

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-04T18:04:21.810

尝试在部分（或全部）刷新完成后设置焦点。

```
 <xp:eventHandler event="onClientLoad" submit="false">
        <xp:this.script><![CDATA[ var ef = dojo.byId('#{javascript:getClientId(viewScope.get("errorField"))}');
                    ef.focus();]]></xp:this.script>
    </xp:eventHandler> 
```

# c - 嵌入式 linux，应用程序状态冻结，重新启动

> ID：10011398
> 
> 赞同：1
> 
> 时间：2012-04-04T12:46:50.943
> 
> 标签：c, linux, embedded, arm, embedded-linux

我们有一个嵌入式应用程序，现在它需要保存和重新加载它的状态。就像在 PC 游戏中一样，您必须在外出呼吸新鲜空气之前保存它。该产品本质上是安静的进化，没有适当的设计，因此无法识别要保存的数据。

该软件在 C 语言中，因此所有数据都有固定地址（.data 段），它也是确定性的，a 并且没有动态内存分配。所以理论上我会在一个文件中备份这个数据段，并在重新启动应用程序时从文件中更新它。这种方法可能会节省比所需更多的数据，但我可以接受。

我怎样才能在很短的执行时间内做到这一点？
另外，如何在运行时识别 .data 段的开始和结束？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T20:06:12.340

您需要[应用程序检查点](http://en.wikipedia.org/wiki/Application_checkpointing)，因此[Berkley Lab Checkpoint Restart](https://ftg.lbl.gov/projects/CheckpointRestart/)库可能会对您有所帮助。

如果您确定所有数据都有固定地址等，您也许可以使用[mmap(2)](http://linux.die.net/man/2/mmap)系统调用...

要了解您当前的内存段和映射，请（从您的应用程序）读取该`/proc/self/maps` 文件。还有`/proc/self/smaps`等。了解更多关于[proc(5)](http://linux.die.net/man/5/proc)，即`/proc/`

# java - Android 传感器接收到套接字

> ID：10011410
> 
> 赞同：0
> 
> 时间：2012-04-04T12:47:21.850
> 
> 标签：java, android, multithreading, sockets

我一直无法处理从传感器接收数据并通过其自己线程中的套接字发送它们而不会丢失数据的问题。

我有一个需要从传感器接收数据的 Android 服务。我想打开一个连接到 PC 的 TCP 套接字来发送收集到的数据。我的问题是接收数据比套接字任务更胖，它无法发送传感器收集的所有数据，因为套接字服务正在使用接口做事。

请知道我在哪里可以找到与数据接收同步的套接字示例？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T13:56:30.643

这可能会有所帮助：[使用 iOS 设备控制浏览器上的游戏](http://www.webdigi.co.uk/blog/2012/using-an-ios-device-to-control-a-game-on-your-browser/)

由于他们使用标准的[html5](http://www.html5rocks.com/en/tutorials/device/orientation/)，我认为可以在 andorid 中实现相同的功能。加上[nodejs](http://nodejs.org/)和[socket.io](http://socket.io/)很棒。

# wordpress - 如何将非www站点重定向到www站点？

> ID：10011412
> 
> 赞同：0
> 
> 时间：2012-04-04T12:47:29.833
> 
> 标签：wordpress, redirect

我创建了一个 wordpress 网站。当我写没有www的域名时，它会正确打开，但是当我写www时。在 url 它没有显示该网站。

请帮助我..提前谢谢你。

我编辑了我的问题并添加了以下部分：

以下是我的文件： 我必须把你提供的代码放在哪里？我在“开始 Wordpress”行之前尝试过，但仍然无法正常工作。

.htaccess

“＃ -首页-”

IndexIgnore .htaccess */.??* *~ *# */HEADER* */README* */_vti*

命令拒绝，允许

否认一切

允许所有人

命令拒绝，允许

否认一切

AuthName example.com

AuthUserFile /home/example/public_html/_vti_pvt/service.pwd

AuthGroupFile /home/example/public_html/_vti_pvt/service.grp

“#开始 WordPress”

重写引擎开启

RewriteBase /

重写规则 ^index.php$ - [L]

RewriteCond %{REQUEST_FILENAME} !-f

RewriteCond %{REQUEST_FILENAME} !-d

重写规则。/index.php [L]

“#结束WordPress”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T17:53:51.063

当您的 DNS 配置不足时，就会发生这种情况。您的站点已经有一条 A 记录（“example.com”指向某个 IP）。

但是您还需要通过添加 CNAME 记录来使 www-part 工作。CNAME 可以通过两种基本方式进行配置：

*   *.example.com - 处理所有流量，例如“www.example.com”或“foo.example.com”。
*   www.example.com - 仅处理带有 www.example.com 子域的流量。

所以你有了：

一个记录

```
Host: example.com
IP: 5.5.5.5 
```

CNAME

```
Host: *.example.com (or www.example.com) 
```

如果要配置邮件域，还记得添加 MX 记录。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-11-29T10:44:39.727

在您的 .htaccess 文件中写入以下代码

```
RewriteCond %{HTTP_HOST} ^example.com$
RewriteRule (.*) http://www.example.com/$1 [R=301,L] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-03-26T06:30:20.410

尝试按照以下步骤操作：

1）为www添加CNAME记录并将值/点设置为@。或者您可以反之亦然
2) 在 Wordpress 下，在主页和站点 URL 下使用 www 设置您的域。例如 www.example.com
3) 在 .htaccess 中添加重定向代码

```
RewriteEngine On
RewriteCond %{HTTP_HOST} !^www\.
RewriteRule ^(.*)$ http://www.%{HTTP_HOST}/$1 [R=301,L] 
```

在 Wordpress 中，#3 是可选的。如果您按照 #2 进行设置，Wordpress 将自动使用 www 打开站点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-04-30T19:11:38.890

您需要添加带有 www 的 DNS A 记录

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-04-04T12:50:02.173

将其写入您的 .htaccess 文件中：

```
RewriteEngine On
RewriteCond %{HTTP_HOST} ^www.domain.com$ [NC]
RewriteRule ^(.*)$ http://domain.com/$1 [R=301,L] 
```

# drupal - Drupal 7-从外部表单传递上下文过滤器

> ID：10011415
> 
> 赞同：0
> 
> 时间：2012-04-04T12:47:36.170
> 
> 标签：drupal, drupal-7, drupal-views

这是我正在尝试做的事情：

我有一个包含两个字段的表单，该字段显示在网站的每个页面上，一个视图具有两个相应的上下文过滤器（参数）。

我的问题是我似乎无法在表单字段和上下文过滤器之间建立联系，因为 Drupal 视图希望它们像`/path/filter_value_1/filter_value_2`.

我已经搜索或尝试过以下方法

1.  获取上下文过滤器从 $_POST 或 $_GET 变量中获取它们的值
2.  使用 URL 别名路由`/path?filter_1=value_1&filter_2=value_2`到`/path/value_1/value_2`
3.  设置操作以将我定向到一个 php 文件，该文件使标头重定向（这实际上有效，但我不喜欢这个解决方案）

欢迎任何想法！

谢谢，彼得

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T18:13:21.800

行。

最初我认为暴露的过滤器只能在与视图相同的页面上使用。

然后我发现“块中的公开形式”选项似乎可以解决问题。

现在开始自定义暴露的过滤器表单:-)

# java - 打印多维数组的内容

> ID：10011418
> 
> 赞同：0
> 
> 时间：2012-04-04T12:47:40.500
> 
> 标签：java, arrays, multidimensional-array, foreach

我有一个二维数组

```
 public class TwoDimensions {

public static void main(String[] args){
    String[][] names = new String[3][3]; 
        names[0][0] = "Joe";
        names[1][1] = "Jane";
        names[2][2] = "Herkimer";
    for(String[] output:names){
        System.out.println(names);
    }
    }
} 
```

如何打印其所有内容。对于位置`[0][1]`，我一无所有。所以它应该打印`null`什么的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T12:49:32.397

这似乎是家庭作业问题，所以我会给你一个提示......尝试阅读嵌套的 for 循环。

祝你好运！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-04T12:55:52.577

如果您想将其打印为网格，您可以使用

```
for (String[] row : names)
    System.out.println(Arrays.toString(row)); 
```

印刷

```
[Joe, null, null]
[null, Jane, null]
[null, null, Herkimer] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T12:50:28.007

如果您不想打印空值，请使用 if 条件进行检查。如果为空，则继续。

您可以使用 continue 语句。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-04-02T00:57:18.600

@doNotCheckMyBlog 提到的方法很好，但仅从标题中询问。谷歌也用这个标题标识了 n 维数组，所以我将在这里发布一个为需要它的每个人打印 n 维数组的解决方案：

该方法由两个函数构成。一个打印数组，另一个从基元和普通对象创建一个数组对象。（`java.lang.ClassCastException`如果你这样做的解决方法`(Object[])(new int[]{1,2,3})`）

```
public static String printNdimArray(Object[] in) {
    String ret = "[";
    for(Object obj : in ) {
        if( obj.getClass().isArray() )
            ret += printNdimArray( createArrayFromArrayObject(obj) );
        else
            ret += obj.toString();
        ret += ", ";
    }
    ret = ret.substring(0, ret.length() - 2);
    return ret +"]";
} 
```

其他函数将对象或原始数组转换为可用于再次调用上述函数的普通对象数组，直到原始数组树的叶子。（原始代码来自：[https](https://stackoverflow.com/a/6427453) ://stackoverflow.com/a/6427453 ）

```
public static Object[] createArrayFromArrayObject(Object o) {
    if(!o.getClass().getComponentType().isPrimitive())
        return (Object[])o;

    int element_count = Array.getLength(o);
    Object elements[] = new Object[element_count];

    for(int i = 0; i < element_count; i++)
        elements[i] = Array.get(o, i);          
    return elements;
} 
```

在非常大的阵列中，结构显然不再清晰，但可以通过一些调整来解决。数组中有少量对象，它看起来像这样：

```
out: [Mad Max: Fury Road, 7200, [600, 3600, 4000], [EN], [DE, EN, FR], sci_fi] 
```

它在显示一维数组方面也做得很好：

```
out: [FR, EN, DE, CA] 
```

# objective-c - NSTimer 在 xCode 的 CMD 项目中不起作用

> ID：10011420
> 
> 赞同：0
> 
> 时间：2012-04-04T12:47:46.663
> 
> 标签：objective-c, timer, nstimer

`NSTimer`我在 Objective-C 中有问题。这是我的源代码：Main.m

```
#import <Foundation/Foundation.h>
#import "TimerTest.h"

int main(int argc, const char * argv[]) {
    @autoreleasepool {
        TimerTest *timerTest = [[[TimerTest alloc] init] autorelease];
    }
    return 0;
} 
```

定时器测试.h

```
#import <Foundation/Foundation.h>

@interface TimerTest : NSObject {
    NSTimer *_timer;
}
@property (nonatomic, retain) NSTimer *timer;
- (id) init;
@end 
```

定时器测试.m

```
#import "TimerTest.h"

@implementation TimerTest
@synthesize timer = _timer;
- (id) init {
    if (self = [super init]) {
        [NSTimer timerWithTimeInterval:0.5f 
                                target:self 
                              selector:@selector(tick:) 
                              userInfo:nil 
                               repeats:YES];
    }
    return self;
}

- (void) tick: (NSDate *) dt {
    NSLog(@"Tick!  \n");
}

- (void) dealloc {
    self.timer = nil;    
    [super dealloc];
}
@end 
```

我的程序应该每 0.5 秒记录一次“Tick！\n”。但是后来我的程序完成了，xcode 控制台清晰了，也就是说`NSLog`in `-(void)tick:(NSDate *)dt`method didn't work 。我的错误在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T12:58:46.690

> 我的程序应该每 0.5 秒记录一次“Tick！\n”。

不，不应该（至少根据您发布的代码不应该）。你需要一个[运行循环](http://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/Multithreading/RunLoopManagement/RunLoopManagement.html)。计时器仅作为运行循环上的事件触发。所以，在你的主要，你需要设置一个并运行它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T13:23:06.450

您不仅需要一个事件循环，而且您已经创建了一个计时器，而且您还没有在所述运行循环中安排它。代替：

```
 [NSTimer timerWithTimeInterval:0.5f 
                            target:self 
                          selector:@selector(tick:) 
                          userInfo:nil 
                           repeats:YES]; 
```

做这个：

```
 [NSTimer scheduledTimerWithTimeInterval:0.5f 
                                     target:self 
                                   selector:@selector(tick:) 
                                   userInfo:nil 
                                    repeats:YES]; 
```

我在 Cocoa 应用程序的上下文中设置了您的代码（因为它带有一个运行循环），在委托的 applicationDidFinishLaunching 中执行 TimerTest 分配，否则您的代码可以工作。

其他几件事：其选择器传递给 scheduleTimerWithTimerInterval:... 的方法应该是形式

```
- (void)timerMethod:(NSTimer *)aTimer 
```

当您完成计时器时，只需使其无效：

```
[timer invalidate]; 
```

尽管您必须保留对计时器的引用才能执行此操作，但您似乎没有这样做。

# r - 向量化函数以避免循环

> ID：10011425
> 
> 赞同：2
> 
> 时间：2012-04-04T12:48:06.323
> 
> 标签：r, matrix, vectorization

我正在尝试加快我的代码速度，因为它运行时间很长。我已经发现问题出在哪里了。考虑以下示例：

```
x<-c((2+2i),(3+1i),(4+1i),(5+3i),(6+2i),(7+2i))
P<-matrix(c(2,0,0,3),nrow=2)
out<-sum(c(0.5,0.5)%*%mtx.exp(P%*%(matrix(c(x,0,0,x),nrow=2)),5)) 
```

我有一个带有复数值的向量 x，该向量有 12^11 个条目，然后我想计算第三行的总和。（我需要函数 mtx.exp 因为它是一个复杂的矩阵幂（该函数在包 Biodem 中）。我发现 %^% 函数不支持复杂的参数。）

所以我的问题是，如果我尝试

```
sum(c(0.5,0.5)%*%mtx.exp(P%*%(matrix(c(x,0,0,x),nrow=2)),5)) 
```

我收到一个错误：“pot %*% pot 中的错误：不符合要求的参数。” 所以我的解决方案是使用循环：

```
tmp<-NULL
for (i in 1:length(x)){
  tmp[length(tmp)+1]<-sum(c(0.5,0.5)%*%mtx.exp(P%*%matrix(c(x[i],0,0,x[i]),nrow=2),5))
} 
```

但如前所述，这需要很长时间。您对如何加快代码速度有任何想法吗？我也试过 sapply 但这需要和循环一样长的时间。

我希望你能帮助我，因为我必须运行这个函数大约 500 次，而且第一次尝试需要 3 个多小时。这不是很令人满意..

十分感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T13:19:10.930

代码可以通过预先分配你的向量来加速，

```
tmp <- rep(NA,length(x)) 
```

但我真的不明白你要计算什么：在第一个例子中，
你试图利用非方阵的力量，在第二个例子中，你正在利用对角矩阵的力量（可以做到与`^`）。

以下似乎等同于您的计算：

```
sum(P^5/2) * x^5 
```

编辑

如果`P`不是对角线且`C`不是标量，我看不到`mtx.exp( P %*% C, 5 )`.

你可以尝试类似的东西

```
y <- sapply(x, function(u) 
  sum( 
    c(0.5,0.5) 
    %*% 
    mtx.exp( P %*% matrix(c(u,0,0,u),nrow=2), 5 )
  )
) 
```

但如果你的向量真的有 12^11 个条目，那将需要很长的时间。

或者，由于您有大量非常小的 (2*2) 矩阵，您可以明确计算乘积`P %*% C` 及其 5 次方（使用一些计算机代数系统：Maxima、Sage、Yacas、Maple 等）并使用结果公式：这些只是（50 行）对向量的直接操作。

```
/* Maxima code */ 
p: matrix([p11,p12], [p21,p22]);
c: matrix([c1,0],[0,c2]);
display2d: false;
factor(p.c . p.c . p.c . p.c . p.c); 
```

然后我将结果复制并粘贴到 R 中：

```
c1 <- dnorm(abs(x),0,1); # C is still a diagonal matrix
c2 <- dnorm(abs(x),1,3);
p11 <- P[1,1]
p12 <- P[1,2]
p21 <- P[2,1]
p22 <- P[2,2]
# Result of the Maxima computations: 
# I just add all the elements of the resulting 2*2 matrix,
# but you may want to do something slightly different with them.

          c1*(c2^4*p12*p21*p22^3+2*c1*c2^3*p11*p12*p21*p22^2
                                +2*c1*c2^3*p12^2*p21^2*p22
                                +3*c1^2*c2^2*p11^2*p12*p21*p22
                                +3*c1^2*c2^2*p11*p12^2*p21^2
                                +4*c1^3*c2*p11^3*p12*p21+c1^4*p11^5)
          +
          c2*p12
            *(c2^4*p22^4+c1*c2^3*p11*p22^3+3*c1*c2^3*p12*p21*p22^2
                        +c1^2*c2^2*p11^2*p22^2+4*c1^2*c2^2*p11*p12*p21*p22
                        +c1^3*c2*p11^3*p22+c1^2*c2^2*p12^2*p21^2
                        +3*c1^3*c2*p11^2*p12*p21+c1^4*p11^4)
         +
         c1*p21
            *(c2^4*p22^4+c1*c2^3*p11*p22^3+3*c1*c2^3*p12*p21*p22^2
                        +c1^2*c2^2*p11^2*p22^2+4*c1^2*c2^2*p11*p12*p21*p22
                        +c1^3*c2*p11^3*p22+c1^2*c2^2*p12^2*p21^2
                        +3*c1^3*c2*p11^2*p12*p21+c1^4*p11^4)
         +
         c2*(c2^4*p22^5+4*c1*c2^3*p12*p21*p22^3
                        +3*c1^2*c2^2*p11*p12*p21*p22^2
                        +3*c1^2*c2^2*p12^2*p21^2*p22
                        +2*c1^3*c2*p11^2*p12*p21*p22
                        +2*c1^3*c2*p11*p12^2*p21^2+c1^4*p11^3*p12*p21) 
```

# java - 用于比较 2 个 pdf 文档的基于 Web 的应用程序

> ID：10011432
> 
> 赞同：1
> 
> 时间：2012-04-04T12:48:16.420
> 
> 标签：java, pdf, web-applications, document

我们需要集成到现有的 java web 应用程序中，这是一个允许用户比较 2 个 pdf 文档并查看差异的新功能。所以，我开始搜索一些已经存在的库或工具（开源或商业），可以帮助我解决这个请求。有谁知道是否存在这种应用程序？那需要2个pdf，比较它们并显示差异？

在此先感谢，马达琳娜

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T12:56:20.393

我的回答可能不令人满意，但这个项目来自 apache -> [http://pdfbox.apache.org/](http://pdfbox.apache.org/)

可以帮助你。您可以将 pdf 转换为文本文件并进行比较。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-26T07:30:52.670

Hello i made a PDF comparision project built on PDFBOX you can donwload source code from [link](https://drive.google.com/file/d/0B09BIsDTY_AuV25yaWRNTk5wdHc/view?usp=sharing)

Example Usage is mentioned below it performs three levels of comparison you can simply add a loop by saving target and source files name in a list and then calling its comparison functionalities .

```
 pdfComparison cmp=new pdfComparison();
      //Text Comparision page by page         if(cmp.textComparision("ReferencePDF\\PDF2_302.pdf","C:\\\PDF2_305.pdf"))
              {
        System.out.print("\n********PDF text is identical******* ");

              }
              else 
              {
                  System.out.print("\n********PDF text is  not identical******* ");

              }

//Extract all images in PDF and compare   
    cmp.extract_ALL_Images_ThenCompare("PDF2_302.pdf","PDF2_302.pdf");

//Convert Both PDF pages into JPG and perform image comparison 
        cmp.PDF_Convert_To_Jpeg_Comparision("PDF2_302.pdf","PDF2_302.pdf"); 
```

You will see all image differences in folder Differences in the project . If any issue just put a message for me

# 3d - 从透视的 3d 投影

> ID：10011433
> 
> 赞同：1
> 
> 时间：2012-04-04T12:48:17.090
> 
> 标签：3d, lua, 2d

我正在为现有游戏开发一个库，对于这个项目，我想做一些 3d 投影映射，但是我确实有一些困难使任务变得更加困难。

我对这个世界了解很多，只是不了解相机。

*   我有鼠标屏幕位置
*   我有鼠标世界位置，与屏幕位置同时捕获。
*   我可以在游戏世界中获得相机 X、Y 和 Z。
*   我无法获得相机的 FOV。

前两个我可以随时使用函数获得。

从这里我需要找到一个我只有世界坐标的对象的二维屏幕位置。

我尝试获取从相机到地面物体的距离，然后从获取相机到屏幕的距离，然后使用本文中的图表：

[http://en.wikipedia.org/wiki/3D_projection](http://en.wikipedia.org/wiki/3D_projection)

但是世界是一个角度，相机稍微倾斜。这意味着与我得到的点的距离以及对象本身在显示器顶部与底部相比是父亲的距离。

还要注意的是，Z 总是向上（在监视器上），相机没有旋转。

我确信这不是一个很难解决的问题，但我无法将所有信息都放在脑海中。

任何有关此事的帮助将不胜感激。

# android - 在 CustomAdapter 中未调用 getview

> ID：10011442
> 
> 赞同：0
> 
> 时间：2012-04-04T12:49:12.440
> 
> 标签：android, android-listview, adapter

在第 1 类中，我有一个哈希图，我将它发送到我的 CustomAdapter。

```
map.put("year", "Apple");    
map.put("make", "Mango");     
map.put("model", "Grape");    
map.put("style", "Orange");     
map.put("series", "Peach"); 

//link to my adapter
setListAdapter(new MyCustomAdapter(DynamicLists.this, R.layout.row, map)); 
```

但是在第 2 类中，我的 MyCustomAdapter`getView`函数没有被调用，你能帮助理解为什么吗？

谢谢

代码

```
//class 1 
public class DynamicLists extends ListActivity { 

   //class 2 
   public class MyCustomAdapter extends BaseAdapter { 
       String my_VALUES;
       public MyCustomAdapter(Context context, int textViewResourceId,
                              HashMap<String, String> map) {

           String[][] array = new String[map.size()][2];
           int count = 0;
           String combined="";
           for(Map.Entry<String, String> entry : map.entrySet()){
               combined=""+entry.getKey()+""+entry.getValue();
               count++;
           }
           my_VALUES = combined;
       }

       @Override
       public View getView(int position, View convertView, ViewGroup parent) {
           View row=convertView;

           if (row==null){
               LayoutInflater inflater=getLayoutInflater();
               row=inflater.inflate(R.layout.row, null);
           }

          TextView label =(TextView)row.findViewById(R.id.blocked);
          label.setText(my_VALUES);

          return row;         
       }

       @Override
       public int getCount() {
           return 0;
       }

       @Override
       public Object getItem(int position) {            
           return null;
       }

      @Override
      public long getItemId(int position) {
          return 0;
      }  
   }  //end of class 2 

   private static final String TAG = "Example";

   public static  HashMap<String, String> map = new HashMap<String, String>(); 

   @Override
   public void onCreate(Bundle savedInstanceState) {
     super.onCreate(savedInstanceState);
     //tie data to list, call constructor MyCustomAdapter 
     //populate the list. ArrayAdapter takes current class, layout and array
     map.put("year", "Apple");    
     map.put("make", "Mango");     
     map.put("model", "Grape");    
     map.put("style", "Orange");     
     map.put("series", "Peach"); 
     //link to my adapter
     setListAdapter(new MyCustomAdapter(DynamicLists.this, R.layout.row, map));         

   }

   @Override
   protected void onListItemClick(ListView l, View v, int position, long id) {
      //super.onListItemClick(l, v, position, id);
      String selection = l.getItemAtPosition(position).toString();
      Toast.makeText(this, selection, Toast.LENGTH_LONG).show();        
   }        

} //end of class 1 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T12:51:57.960

```
getCount() 
```

此 Adapter 表示的数据集中有多少项。 [http://developer.android.com/reference/android/widget/Adapter.html](http://developer.android.com/reference/android/widget/Adapter.html)

```
 @Override
    public int getCount() {
        // TODO Auto-generated method stub
        return size;// more than zero
    } 
```

`getItem()`必须返回一些东西

```
@Override
    public Object getItem(int position) {
        // TODO Auto-generated method stub
        return my_VALUES;// may be in your case
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T04:18:20.437

必须声明尺寸。您的`GetCount()`函数必须声明大小... 将返回值设置为 1，您的列表将由一项填充。所以如果你传入一个游标，只需返回`cursor.getCount();`

Soo... 你的列表将被正确填充。

```
@Override
public int getCount() {
   return cursor.getCount();
} 
```

在您的情况下，返回地图的大小。

# mysql - 从字符串列表中打印 user_id 列表

> ID：10011443
> 
> 赞同：1
> 
> 时间：2012-04-04T12:49:13.423
> 
> 标签：mysql, subquery

我有一个问题，我有一个查询，它只是在集合中显示用户 ID，为了检索用户 ID，我正在调用该函数，它给了我下面的列表作为字符串

```
SELECT u.user_id
FROM user u
WHERE u.user_id
IN (
'2, 3, 4, 5, 6, 7, 22, 33, 44, 55, 66, 77, 13, 23, 43, 53, 63, 73'
) 
```

但是当我执行这个查询时，它只显示第一个 user_id 即：2 并且所有用户 id 都存在于数据库中所以非常感谢任何帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T12:53:34.500

你的代码：

```
SELECT u.user_id FROM user u WHERE u.user_id IN ( '2, 3, 4, 5, 6, 7, 22, 33, 44, 55, 66, 77, 13, 23, 43, 53, 63, 73' ) 
```

[http://forums.mysql.com/read.php?10,217174](http://forums.mysql.com/read.php?10,217174)

我几乎对你有任何匹配感到惊讶.. 列表中的每个数字都需要是单独的字符串，例如“1”、“2”、“3”等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T13:21:24.390

删除这样的单引号并再次尝试代码 -

```
SELECT u.user_id FROM user u WHERE u.user_id IN ( 2, 3, 4, 5, 6, 7, 22, 33, 44, 55, 66, 77, 13, 23, 43, 53, 63, 73); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-04T12:53:05.500

删除单引号：

```
IN ( 2, 3, 4, 5, 6, 7, 22, 33, 44, 55, 66, 77, 13, 23, 43, 53, 63, 73 ) 
```

# php - CodeIgniter 尝试使用父级

> ID：10011446
> 
> 赞同：0
> 
> 时间：2012-04-04T12:49:22.287
> 
> 标签：php, codeigniter

我有一个具有此属性的 MY_Controller 类：

```
class MY_Controller extends CI_Controller
{
    public $_template;
    protected $_view;
    ...
    //Some methods here
} 
```

我有配置文件控制器：

```
class profile extends MY_Controller {

    protected $_view = 'consultoria/profile';
    public function __construct() {
        parent::__construct();
    }
    public function index() {
        $this->_template->build($this->_view);
    }
} 
```

问题是当我尝试在 index() 上使用 parent:: 而不是 $this

```
parent::_template->build($this->_view) 
```

错误信息：

```
Parse error: syntax error, unexpected T_OBJECT_OPERATOR in C:\xampp\htdocs\officeprime\application\controllers\consultoria\profile.php on line 18 
```

为什么我不能使用父母？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T13:41:20.590

静态、常量属性或方法的双冒号`::`。使用`$this->`而不是`parent::`. 对于 CI 中的每个父类元素，只需使用`$this->`

# javascript - 当所有表单项都有效时启用提交

> ID：10011448
> 
> 赞同：-1
> 
> 时间：2012-04-04T12:49:31.523
> 
> 标签：javascript

我需要一些帮助...说我有以下表格...

```
<form name="" id="" method="" action="">

    <input type="text" id="text1" name="text1" />
    <br />
    <br />

    <input type="text" id="text2" name="text2" />
    <br />
    <br />

    <input type="text" id="text3" name="text3" />
    <br />
    <br />

    <input type="text" id="text4" name="text4" />
    <br />
    <br />
    <input type="submit" value="let's go" disabled="disabled" />

</form> 
```

现在我想要一个简单的脚本来在文本框的值不是空字符串或 null 时启用提交...

所以我有这样的东西..我将绑定到 window.onload

```
 function enableButton(){

    var formitemsArray = ['text1','text2','text3','text4'],
       i;

        // Loop through all items
        for(i=0;i<formitemsArray.length;i++){

            // validate the length on the keypress...
            formitemsArray.onkeypress = function(){

                // loop through all the items again
                for(j=0;j<formitemsArray.length;j++){

                    if(formitemsArray[j] == "" || formitemsArray[j] == null ){
                        // return false or something???
                    }else{
                        document.getElementById("submitButton").disabled = false;
                    }

                }
            }

        }

} 
```

现在我认为我的解决方案是正确的，但是当我试图确保所有项目都大于零长度字符串时我迷失了，因为我太快返回 false。有人可以让我直截了当吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T13:06:47.010

欢迎来到事件冒泡！

这将执行以下操作：监听整个元素及其所有子元素的事件（onkeypress）！这意味着您可以执行以下操作：

```
document.getElementById('form-id').onkeypress = function(e) {
    var text1 = document.getElementById('text1'),
        text2 = document.getElementById('text2'),
        text3 = document.getElementById('text3'),
        text4 = document.getElementById('text4')

    if (text1.value.length > 0 &&
        text2.value.length > 0 &&
        text3.value.length > 0 &&
        text4.value.length > 0) {
        document.getElementById('submit-button').disabled = false
    }

    // As an aside, for later: if you want to get the element
    // that triggered the event, you have to do the following
    // to be cross-browser:
    var evt = e || window.event, // IE doesn't get the event passed by argument
        target = e.target || e.srcElement // 'target' is official, old versions of FF used 'srcElement'

    // With the 'target' variable, you can now play.
} 
```

还有另一种更通用的解决方案，但它可能不适合您的需求（请注意，它需要一个`forEach`shim：

```
// Declare a counter variable
var count = 0
document.getElementById('form-id').onkeypress = function(e) {
    // Get all the inputs!
    var inputs = this.getElementsByTagName('input')

    // Now loop through all those inputs
    // Since a NodeList doesn't have the forEach method, let's borrow it from an array!
    [].forEach.call(inputs, loopThroughInputs)
}
function loopThroughInputs(input) {
    // First check the type of the input
    if (input.type === 'text') {
        // If the value is correct, increase the counter
        if (input.value.length > 0) {
            count++
        }
        // If the 4 inputs have increased the counter, it's alright!
        if (count === 4) {
            document.getElementById('submit-button').disabled = false
        }
    }
} 
```

现在这段代码是由[@Esailija](https://chat.stackoverflow.com/transcript/message/3173326#3173326)提出的，它**更好**更干净。但是，它还需要[ES5-Shim](https://github.com/kriskowal/es5-shim)（用于该[`every`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/every)方法）：

```
document.getElementById('form-id').onkeypress = function(e) {
    var inputs = [].slice.call( this.querySelectorAll( '[type=text]') );
    document.getElementById('submit-button').disabled = !inputs.every(function(input){
        return !!input.value;
    });
} 
```

*（这家伙很聪明，只是不要告诉他）*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T13:19:26.670

有几种方法可以做到这一点......一种是保持按钮启用，但使用 javascript 在提交时检查表单数据的有效性。这样做的好处是验证代码只运行一次，当用户单击提交并期望他的数据被验证时（至少我这样做）。

```
function validateForm() {
  var formElement = document.forms[0]; // you didn't give me a name
  for(var i = 0, l = formElement.elements.length; i < l; i++ ) {
      if( formElement.elements[i].value.length === 0 ) {
         return false;
      }
      return true;
  }
} 
```

另一种方法是*实时验证*，它将验证每个输入 onBlur（焦点丢失）。这种方法的好处是可以实时向用户显示哪些值是错误的，但是这可能会占用大量资源，具体取决于表单元素的数量和引入检查的方式。

就我个人而言，我会接受我的第一个建议；但是话虽如此，如果您选择验证每个元素，我会这样做：

```
 var formElement = document.forms[0]; // you didn't give me a name
  for(var i = 0, l = formElement.elements.length; i < l; i++ ) {
      formElement.elements[i].addEventListener('blur', function() {
           if( this.value.length === 0 ) {
              alert('this input is invalid');
           }
      }, false);
  } 
```

后一种方法还要求您保留一个“状态”变量来确定表单在提交时是否有效，或者再次检查所有值。

希望这能有所帮助，我希望我的代码示例能有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T12:54:04.957

如果可能的话，使用 jquery 验证插件而不是重新发明代码，[http://docs.jquery.com/Plugins/Validation](http://docs.jquery.com/Plugins/Validation)它很容易使用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-04T13:17:07.797

在[这个 jsfiddle 中](http://jsfiddle.net/KooiInc/9ssKZ/)，您将找到一种监控表单内容进度的方法。如果满足所有字段条件，则会显示一个提交按钮。也许它对你有用。请记住，表单的客户端检查可能会被篡改，因此如果您的数据需要遵守某些要求，您也总是需要服务器端检查。换句话说：客户端表单检查仅仅是可用性增强。

# php - 1and1 上的 Cron 作业

> ID：10011450
> 
> 赞同：1
> 
> 时间：2012-04-04T12:49:35.013
> 
> 标签：php, cron

我想知道是否有人可以帮助我。

我已经为此工作了好几天，查看了一大堆文档，但我似乎无法做到正确。

我正在尝试将 php 脚本作为 cron 作业运行，该文件包含在以下地址下的服务器上：

`mapmyfinds.co.uk/development/cronfile.php`

我了解数字值，或者`*`我需要在代码行的开头输入，但这是我正在努力解决的问题。

我正在使用带有 1and1 的 Linux 服务器，目前我的代码行显示为： `* * * * * /usr/local/bin/php /development/cronfile.php`. 我尝试将其更改为`usr/bin/php`，而不是将代码的第二部分更改为`mapmyfinds/development/cronfile.php`，但均未成功。

我只是想知道是否有人可以对此有所了解，以便我可以使工作正常运行。

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T12:52:52.837

您是否指定了要运行脚本的用户？

正确的语法是

```
*  *  * * *    root    /usr/bin/php /path/to/your/script.php 
```

每分钟，以 root 身份运行。

另外，就像 lexalizer 建议的那样，尝试从 shell 手动运行脚本，看看它输出了什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T12:52:27.710

尝试使用 phpinfo() 的输出获取完整的生产 PHP 路径；还要放置 cronfile.php 文件的完整路径，而不仅仅是相对路径。

最后，在运行 cron 作业之前，尝试手动运行该命令以查看它的作用/输出。

# c# - 动态 CRM 2011 实体

> ID：10011453
> 
> 赞同：3
> 
> 时间：2012-04-04T12:49:47.523
> 
> 标签：c#, wcf, dynamics-crm-2011

我对 Dynamics CRM 非常陌生，并且开始学习如何开发使用 CRM Web 服务的自定义应用程序。

我有 Dynamics CRM SDK，并从 Microsoft 提供的实验室开始，所以我现在有一个小型测试应用程序，可以列出已登录用户的组织。

这个测试应用程序可以创建新的帐户记录，但我真正感兴趣的是访问 incedent 实体。

我有以下

```
Entity location1 = new Entity("account");
location1["name"] = LocationName.Text;
location1.Id = this.OrgService.Create(location1);
MessageBox.Show("New Location ID is " + location1.Id.ToString()); 
```

但我真正想做的是

```
Entity location1 = new Entity("incedent");
location1["title"] = LocationName.Text;
location1.Id = this.OrgService.Create(location1);
MessageBox.Show("New Location ID is " + location1.Id.ToString()); 
```

但是我得到一个例外，指出没有这样的实体，但是当我通过 IE 登录到 CRM 时，我可以创建一个没有问题的案例。

我假设我的方法是错误的，所以我希望有人能指出我使用这些 WCF 服务的正确方向以及我可以以这种方式创建的可用实体列表，以及如何创建新的案例/事件实体.

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-04T13:10:41.763

我认为你有一个错字。

案例实体的名称`incident`不是`incedent`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-04T13:13:01.897

“事件”在您的示例中拼写错误。看看是不是这个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T20:18:21.960

好吧！，您应该将实体名称写为“事件”而不是“事件”

一旦你有了**记录**的指导，你就可以通过组织访问它

服务如下：

```
//   To retrieve  all columns  from contact entity for example
ColumnSet cols = new ColumnSet({ Allcolumns = true });
Entity retrievedIncident = OrgService.Retrieve("contact", id, cols);

//   To retrieve  specific columns 
ColumnSet cols = new ColumnSet(new String[] { "name", "address1_postalcode", "    lastusedincampaign", "versionnumber" });
Entity retrievedIncident = OrgService.Retrieve("contact", id, cols); 
```

# ember.js - 删除在 Ember.View 中创建的 Ember.Object

> ID：10011457
> 
> 赞同：0
> 
> 时间：2012-04-04T12:50:09.600
> 
> 标签：ember.js

按照文档，我可以`person`在`sayHelloView`. 现在我想知道如何触发 else 条件来查看绑定的运行情况。有没有办法`person`使用浏览器控制台删除，或者我是在吠叫错误的树吗？

JsFiddle - [http://jsfiddle.net/PhSRx/](http://jsfiddle.net/PhSRx/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T13:40:12.187

您可以有一个将视图的人员设置为空的操作。

因此，在您的视图模板中，您将拥有如下内容：

```
<a href="#" {{action logout}}>Log out</a> 
```

单击它时，它将触发`logout`视图的方法，然后您可以设置`this.person`为 null：

```
logout: function() {
    this.set("person", null);
} 
```

我已经分叉了你的小提琴并更新了它，还添加了一个设置人员的登录操作，这样你就可以在它们之间切换并查看正在运行的绑定：http: [//jsfiddle.net/rlivsey/atzfx/](http://jsfiddle.net/rlivsey/atzfx/)

您可能希望将其委托给控制器，而不是视图处理登录和注销。

这是一个处理持有当前登录人的示例的小提琴`App.sessionController`，并且视图具有与人的绑定，因此即使架构发生了变化，模板也保持不变 - [http://jsfiddle.net/rlivsey/QKa3N /](http://jsfiddle.net/rlivsey/QKa3N/)

# c++ - 链接错误 LNK2005 几个 CUDA 文件

> ID：10011460
> 
> 赞同：1
> 
> 时间：2012-04-04T12:50:12.453
> 
> 标签：c++, linker, cuda

我遇到了一些错误“链接错误 LNK2005 ... 已定义”的问题。文件如下：

```
// File Bitmap4.cu
#include "Bitmap4.h" // header
#include "Bitmaps_cuda.h" // header with just the definitions of the kernels

..... // I call 3+2 kernel functions (3 in one method, 1 in another and 1 in another one) 
```

然后我有这个：

```
// File Bitmap8.cu
#include "Bitmap8.h" // header
#include "Bitmaps_cuda.h" // the same as above

..... // I call 4 kernel functions (4 in the same method) 
```

然后我有内核头文件：

```
#ifndef __BITMAPS_KERNEL__
#define __BITMAPS_KERNEL__

......  // 9 kernels definitions

#endif 
```

最后，我有这个：

```
// File Bitmaps_cuda.h
#include <cuda.h>
#include <cuda_runtime.h>
#include <device_launch_parameters.h>
#include <device_functions.h>
#include <stdio.h>

// Inside here there all the kernel functions that the files 
// Bitmap4.cu and Bitmap8.cu are using 
```

问题是，如果我没有在 Bitmap*.cu 之一中包含**#include "Bitmaps_cuda.h"**，当然，编译器会说我错过了内核函数的定义。我阅读了很多帖子，并且已经包含了“其他依赖项”和所需的路径。当我添加文件 Bitmap8.cu 及其相关内核时，问题就开始了，因为在此之前，应用程序工作正常。

无论如何，这些是我的错误：

```
1>Bitmap8.cu.obj : error LNK2005: "void * __cdecl big_random_block(int(?big_random_block@@YAPAXH@Z) already defined in Bitmap4.cu.obj
1>Bitmap8.cu.obj : error LNK2005: "int * __cdecl big_random_block_int(int(?big_random_block_int@@YAPAHH@Z) already defined in Bitmap4.cu.obj
1>Bitmap8.cu.obj : error LNK2005: "unsigned char __cdecl value(float,float,int(?value@@YAEMMH@Z) already defined in Bitmap4.cu.obj
1>Bitmap8.cu.obj : error LNK2005: "void * __cdecl start_thread(unsigned int(__stdcall*)(void *),void *)" (?start_thread@@YAPAXP6GIPAX@Z0@Z) already defined in Bitmap4.cu.obj
1>Bitmap8.cu.obj : error LNK2005: "void __cdecl end_thread(void *)"(?end_thread@@YAXPAX@Z) already defined in Bitmap4.cu.obj
1>Bitmap8.cu.obj : error LNK2005: "void __cdecl destroy_thread(void *)"(?destroy_thread@@YAXPAX@Z) already defined in Bitmap4.cu.obj
1>Bitmap8.cu.obj : error LNK2005: "void __cdecl wait_for_threads(void * const *,int)"(?wait_for_threads@@YAXPBQAXH@Z) already defined in Bitmap4.cu.obj
1>Bitmap8.cu.obj : error LNK2005: "void __cdecl__device_stub__Z14float_to_colorPhPKf(unsigned char *,float const *)"(?__device_stub__Z14float_to_colorPhPKf@@YAXPAEPBM@Z) already defined in Bitmap4.cu.obj
1>Bitmap8.cu.obj : error LNK2005: "void __cdecl float_to_color(unsigned char *,float_const *)" (?float_to_color@@YAXPAEPBM@Z) already defined in Bitmap4.cu.obj
1>Bitmap8.cu.obj : error LNK2005: "void __cdecl__device_stub__Z14float_to_colorP6uchar4PKf(struct uchar4 *,float const *)"(?__device_stub__Z14float_to_colorP6uchar4PKf@@YAXPAUuchar4@@PBM@Z) already defined in Bitmap4.cu.obj
1>Bitmap8.cu.obj : error LNK2005: "void __cdecl float_to_color(struct uchar4 *,float_const *)" (?float_to_color@@YAXPAUuchar4@@PBM@Z) already defined in Bitmap4.cu.obj

1>C:\Users\dberdin\documents\visual studio 2010\Projects\gpuSPAM\Debug\gpuSPAM.exe : fatal error LNK1169: one or more multiply defined symbols found 
```

我尝试了不同的解决方案，但有任何结果。

先感谢您！

**编辑**

在网站（[http://msdn.microsoft.com/en-us/library/72zdcz6f.aspx](http://msdn.microsoft.com/en-us/library/72zdcz6f.aspx)）上，我发现这些错误的原因之一是：
*- 绝对值被定义了两次，每个定义中的值不同.*
好吧，实际上，正如我在底部所写的那样，我有这些定义，但我不能做不同的事情。知道如何解决吗？

再次感谢您

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T06:49:47.563

出现这些错误是因为我双重包含了一个文件。问题解决了！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T15:57:06.563

> ```
> Then I have the kernel header:
> 
> #ifndef __BITMAPS_KERNEL__
> #define __BITMAPS_KERNEL__
> 
> ......  // 9 kernels definitions
> 
> #endif 
> ```

你的意思是说你有 9 个内核声明，而不是定义？

您不能在头文件中包含内核定义。

确保所有 .cu 文件都链接到相同的运行时（打开每个 .cu 文件的属性表并比较`CUDA C/C++ | Host | Runtime Library`设置。）还要确保与常规 cpp 文件使用的运行时相同。

# java - Java：在套接字编程中从 InputStream 接收不同类型的文件

> ID：10011462
> 
> 赞同：1
> 
> 时间：2012-04-04T12:50:15.497
> 
> 标签：java, sockets, file-io

在我的项目客户端中，向服务器发送一些文本、一些图像。服务器需要处理所有这些事情，即如果存在文本，则需要在框架上的 TestArea 上显示，如果存在图像文件，则服务器需要将该图像文件存储在计算机上。我创建了一个处理字符串（文本）或图像文件的应用程序，但是当客户端同时发送这些内容时，我不知道如何存储所有这些内容。

我知道当我添加此代码时： **InputStream in = socket.getInputStream();**

那么客户端发送的所有数据都在这个**InputStream**中 所以我如何识别这么多范围的数据是图像文件，所以需要存储在字节数组中，最多是测试或字符串，所以需要在TextAreea中显示。如果客户端一次向服务器发送两个或多个图像，那么服务器如何理解这么多数据这是第一个图像，这么多数据这是第二个图像文件。

我尝试使用此代码发送图像：

客户代码：

```
public void sendPhotoToServer(String str){ // str is image location
try {
    InputStream input = new FileInputStream(str);
    byte[] buffer=new byte[1024];
    int readData;
    while((readData=input.read(buffer))!=-1){
    dos.write(buffer,0,readData); // dos is DataOutputStream
    }
} catch (FileNotFoundException e) {

} catch (IOException e) {

}       
} 
```

这个方法在循环中，所以客户端发送他文件夹中的所有图像。

现在是服务器代码，它在线程中，并且每次都有 while 循环来监听客户端数据：

```
public void run() {
while (true) {
        try {
            byte[] buffer = new byte[8192];
            fis = new FileOutputStream("C:\\"+(s1++)+".jpg"); // fis is FileOutputStream
            while ((count = in.read(buffer)) > 0){ //count is a integer and 'in' is InputStream
            fis.write(buffer, 0, count); 
            fis.flush();    
            }
            } catch (Exception e) {}
}
} 
```

但是通过此代码，服务器接收到第一张图像之后它不会显示其他图像。

以及服务器如何理解客户端是否发送了简单的字符串。在服务器端应用程序中，它打开一个端口来监听客户端发送的所有数据

**FileOutputStream fis = socket.getInputStream();**

现在它如何区分所有这些文件和简单的字符串。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T13:54:20.390

如果您事先知道数据类型，为什么不直接使用`ObjectInputStream`and 。`ObjectOutputStream`

这里是发送：

```
import java.io.*;

public class Client {

  public static void main(String[] args) throws IOException {
    // write string
    ObjectOutputStream out = new ObjectOutputStream(
      new BufferedOutputStream(
        new FileOutputStream("test-string.data")));
    try {
      out.writeObject("Hello");
    } finally {
      out.close();
    }
    // write byte arrays
    out = new ObjectOutputStream(
      new BufferedOutputStream(
        new FileOutputStream("test-byteArrays.data")));
    try {
      out.writeObject(new byte[] { 'H', 'e', 'l', 'l', 'o' });
      out.writeObject(new byte[] { 'W', 'o', 'r', 'l', 'd' });
    } finally {
      out.close();
    }
  }

} 
```

这里是接收：

```
import java.io.*;
import java.util.*;

public class Server {

  public static void main(String[] args) throws IOException, ClassNotFoundException {
    // write string
    ObjectInputStream in = new ObjectInputStream(
      new BufferedInputStream(
        new FileInputStream("test-string.data")));
    try {
      Object o = null;
      while ((o = in.readObject()) != null) {
        System.out.printf("Class: %s, toString: %s\n", o.getClass(), o.toString());
      }
    } catch (EOFException e) {
      // finished
    } finally {
      in.close();
    }
    // write byte arrays
    in = new ObjectInputStream(
      new BufferedInputStream(
        new FileInputStream("test-byteArrays.data")));
    try {
      Object o = null;
      while ((o = in.readObject()) != null) {
        System.out.printf("Class: %s, toString: %s\n", o.getClass(), o.toString());
      }
    } catch (EOFException e) {
      // finished
    } finally {
      in.close();
    }
  }

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-04T13:02:16.060

没有自动处理数据边界。服务器代码无法知道一个文件/消息在哪里结束而另一个在哪里开始。您必须提出自己的协议。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-04T13:30:35.387

您正在做的是通过套接字发送原始数据。这就是你所拥有的：一个字节流。为了确保接收端能够理解哪个部分属于哪个文件，以及该文件的类型，您需要想出一种方法将其编码到字节流中，以便实际数据不受干扰，发送者/接收者都“理解”这个结构。这就是所谓的协议。

在某些情况下，提出自己的协议可能很有用，但要知道，根据您想要实现的目标，它可能非常复杂。很可能已经存在非常适合您需求的协议。您可以将 HTTP 与标头字段中指示的 MIME 类型一起使用。这可以让您确定文件类型，如果是文本，则可以确定编码。FTP适用于文件传输，文件名的扩展名可以用来检测文件的类型。SOAP 允许您以独立于客户端或服务器的实现语言的方式发送复杂的数据结构。

TL;DR 版本：不要重新发明轮子，四处寻找现有的东西以满足您的需求。最有可能的是，合适的协议支持开箱即用的 Java 或通过第三方库。Apache 的 Commons Net 可以在这里为您提供帮助。

# inno-setup - 推迟所有文件替换，直到在 Inno Setup 中重新启动

> ID：10011464
> 
> 赞同：1
> 
> 时间：2012-04-04T12:50:17.920
> 
> 标签：inno-setup

我有一个使用 Inno Setup 创建的应用程序安装程序，它为我的应用程序部署多个二进制文件和支持文件。

当我执行升级安装时（例如，在已安装版本 1.0 时运行 setup-1.5.exe），以前版本中的一些文件经常被使用，并且在下次重新启动之前无法替换。没关系，Inno 正确处理了这种情况。

但是，我真正想要的逻辑是：如果在下次重新启动之前无法替换任何文件，那么我希望在下次重新启动时替换*所有*文件。否则，正在使用的二进制文件不会被替换，但某些支持文件可能会被替换，从而使应用程序在重新启动之前处于不稳定状态。

有没有一种干净的方法可以做到这一点？我找不到一个，没有自己明确锁定所有支持文件，这很丑陋。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T13:01:06.460

Inno 本身无法做到这一点。这就是为什么它提供`AppMutex`和朋友确保一切都清楚的原因，如果有任何遗漏，它会告诉用户他们必须重新启动。

然后，您可以在您的应用程序中对此进行扩展，并在重新启动替换操作未决时拒绝启动。

# objective-c - 在 ios xcode 4.3（故事板）中弹出 facebook feed 对话框（用于墙贴）

> ID：10011465
> 
> 赞同：1
> 
> 时间：2012-04-04T12:50:20.083
> 
> 标签：objective-c, ios, facebook

我正在制作一个应用程序，我需要在其中集成一个 facebook 共享（提要）对话框。我在[https://developers.facebook.com/docs/mobile/ios/build/](https://developers.facebook.com/docs/mobile/ios/build/)上阅读了所有内容，并且在应用程序完成启动后，我能够加载 facebook 共享（提要）对话框。但我的问题是我使用的是 xcode 4.3 即故事板，我想在按钮操作上加载 facebook 提要对话框。

我制作了另一个视图控制器并粘贴了 AppDelegate 函数的所有内容 `(BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions`

在其中`-(void) viewDidload`并能够加载“登录页面”，然后是我的“Facebook 应用程序”页面。

之后，当我允许我的 Facebook 应用程序获得许可时，它不会显示“提要对话框”

这是我的 viewController.h 文件

```
 #import "FBConnect.h"

@interface ViewController : UIViewController<FBSessionDelegate,FBDialogDelegate>
{
    Facebook *facebook;
}
@property (nonatomic, retain) Facebook *facebook;

@end 
```

- 这是我的 ViewController.m 文件

```
#import "ViewController.h"

@interface ViewController ()

@end

@implementation ViewController

@synthesize facebook=_facebook;
- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
    facebook = [[Facebook alloc] initWithAppId:@"284727404938450" andDelegate:self];

    NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
    if ([defaults objectForKey:@"FBAccessTokenKey"] 
        && [defaults objectForKey:@"FBExpirationDateKey"]) {
        facebook.accessToken = [defaults objectForKey:@"FBAccessTokenKey"];
        facebook.expirationDate = [defaults objectForKey:@"FBExpirationDateKey"];
    }

    if (![facebook isSessionValid]) {
        [facebook authorize:nil];
    }        
}    

- (void)fbDidLogin {
    NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
    [defaults setObject:[facebook accessToken] forKey:@"FBAccessTokenKey"];
    [defaults setObject:[facebook expirationDate] forKey:@"FBExpirationDateKey"];
    [defaults synchronize];

    [facebook dialog:@"feed" andDelegate:self];    
} 
```

但这里有两种在 AppDelegate 文件中使用的方法

```
- (BOOL)application:(UIApplication *)application openURL:(NSURL *)url
  sourceApplication:(NSString *)sourceApplication annotation:(id)annotation {
    return [ facebook] handleOpenURL:url]; 
}

- (BOOL)application:(UIApplication *)application handleOpenURL:(NSURL *)url {
    return [ facebook] handleOpenURL:url]; 
} 
```

我知道在 xib 中这些方法应该是：

```
 - (BOOL)application:(UIApplication *)application handleOpenURL:(NSURL *)url {
        return [[_ViewController facebook] handleOpenURL:url]; 
    }

// For iOS 4.2+ support
- (BOOL)application:(UIApplication *)application openURL:(NSURL *)url
  sourceApplication:(NSString *)sourceApplication annotation:(id)annotation {
    return [[_ViewController facebook] handleOpenURL:url]; 
} 
```

这些方法负责为当前的“facebook”实例（Facebook *facebook）弹出一个提要对话框。

我的问题是在情节提要中我们没有“窗口”和视图控制器实例，所以我的猜测是我当前的视图控制器的“facebook”实例没有调用这两种方法。如何为我的“facebook”实例调用这两个函数，其中我的 viewController 不是 AppDelegate 文件的实例？

请帮帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T13:03:13.857

请小心，因为您正在定义一个名为“facebook”的 ivar 和一个名为“facebook”的属性，该属性会创建另一个名为“_facebook”的 ivar。然后在您的代码上，您正在使用 ivar“facebook”，因此当您调用时，`[_ViewController facebook]`您正在访问属性 (ivar _facebook)，而不是您初始化的 ivar“facebook”。

我认为这不是您正在寻找的答案，但指出这一点似乎很重要。

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T13:56:23.347

看起来您缺少一些与 Facebook 相关的代表，并且您没有按照在线教程的指示将它们全部放在您的主应用程序代表中：

请参阅[https://developers.facebook.com/docs/mobile/ios/build/](https://developers.facebook.com/docs/mobile/ios/build/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T15:36:36.167

一种解决方案可以在 AppDelegate 中实现 Facebook 委托方法，然后在 viewController 中的 viewDidLoad 方法或您喜欢的方法中使用

```
AppDelegate *appDelegate= (AppDelegate *)[[UIApplication sharedApplication] delegate];
[appDelegate.facebook authorize:permissions]; 
```

其中权限是具有您需要的权限的数组。那应该工作和方法

```
- (BOOL)application:(UIApplication *)application openURL:(NSURL *)url
sourceApplication:(NSString *)sourceApplication annotation:(id)annotation {
    return [ facebook] handleOpenURL:url]; 
 }

 - (BOOL)application:(UIApplication *)application handleOpenURL:(NSURL *)url {
return [ facebook] handleOpenURL:url]; 
 } 
```

执行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-11T19:25:45.403

在使用 Facebook（或调用这些委托函数）之前，您可以在应用程序委托的 _viewcontroller 中传递您的视图控制器的引用。

您的视图控制器的 viewdidload() 将如下所示：

```
-(void)viewDidLoad{ 

[[UIApplication sharedApplication] delegate]._viewComtroller = self; // pass reference to the appdalegate

//   Other code (or call the facebook function here) 
```

}

它会工作

# javascript - 序列化 Paper.js 中的项目

> ID：10011470
> 
> 赞同：4
> 
> 时间：2012-04-04T12:50:34.907
> 
> 标签：javascript, paperjs

有没有办法用 paper.js 序列化项目中的所有当前项目？那么他们的位置，风格等？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-15T17:21:36.503

当被问到这个问题时，没有办法不深入研究对象的结构并编写自己的序列化器/反序列化器函数。

paper.js 库此后添加了对[JSON](http://paperjs.org/reference/project/#exportjson)的支持。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-21T17:38:02.357

[如http://paperjs.org/about/roadmap/ 所示](http://paperjs.org/about/roadmap/)，实现了用于持久性的 JSON 数据格式

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-07-05T10:48:59.170

```
var myString = new XMLSerializer().serializeToString(myObject); 
```

# c# - 带有 var 内容的 WPF showdialog 文本框

> ID：10011473
> 
> 赞同：1
> 
> 时间：2012-04-04T12:50:41.253
> 
> 标签：c#, wpf, showdialog

我尝试完成以下工作：

一个 WPF 应用程序，我有多个按钮，您可以在其中设置通知消息。根据按钮，您可以设置不同的消息。

我所做的是在消息按钮上我放了这段代码：

```
private void button1_Click(object sender, RoutedEventArgs e)
 {
    CounterMessage msgOne = new CounterMessage();
    msgOne.ShowDialog();
 } 
```

这将打开一个新的 WPF 窗口，这里只有一个文本框和一个退出按钮。在此消息窗口中退出时，它会将消息保存到参数中。

但这是诀窍。我想将此消息窗口用于多个通知，如果应用程序中的字符串上已有任何文本内容，它将在文本框中显示任何文本内容。

例如：在主应用程序中，我有按钮 A 和 B 来设置通知。我点击按钮A，弹出显示对话框，在文本框中已经有“你点击按钮A”如果是按钮B被点击，它应该显示“你点击按钮B”

所以我应该用 ShowDialog 发送一些额外的信息，这样我就可以使用每个消息窗口。有人可以帮我一下吗？

我必须说我觉得很难体面地描述我想要的东西，所以我希望我让自己足够清楚。

编辑所以我想要将字符串参数的内容（确切地说：Properties.Settings.Default.XXX）显示到 Countermessage 窗口中的文本框中

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T13:47:06.560

我不完全确定你在问什么，但听起来你想要这样的东西。我假设 CounterMessage 是一个窗口，并且有一些绑定机制或属性可以显示消息是什么。

```
public class CounterMessage : Window
{
    public CounterMessage(string message)
    {
        this.Message = message;
    }

    public string Message
    {
        get;
        set;
    }
} 
```

然后，您的按钮事件将类似于以下内容：

```
private void button1_Click(object sender, RoutedEventArgs e)
{
     Button btn = sender as Button;
     CounterMessage msgOne = new CounterMessage(btn.Text);
     msgOne.ShowDialog();      
} 
```

关键是您不向 ShowDialog 方法发送内容，而是向作为对话框本身的类发送内容。我还假设对话框不仅仅显示消息 - 否则，您只需使用`MessageBox.Show(....)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T13:03:14.180

```
 Button btn = (Button)sender;
        Debug.WriteLine(btn.Name); 
```

# java - 游戏包的编码方法？

> ID：10011474
> 
> 赞同：0
> 
> 时间：2012-04-04T12:50:41.553
> 
> 标签：java, c++, package, encode

对不起最后一个问题。（我讨厌谷歌 traductor）。

我在 MMO（大型多人在线）游戏中工作，但我多次看到一些服务器模拟器，例如 Lineage 2 或 NCSoft 的 Aion。

我的游戏是基于 C++ 的，服务​​器模拟器是 Java 的。

然后，我猜是 URL 编码方法，因为可以在两种编程语言中编码和解码，但很容易解码。

另一个想法是创建像 uint values 0x00000 + Action Parameters(URLEncoded) 这样的包，但我认为这不是一个好主意，因为它很容易解码。

另一种是创建一种简单的加密方法，将字符替换为另一个字符。一个例子：

```
To encode: Hello
Encoded: 72S/101NK&108-ASK+108P$I111?TRY 
```

解码非常简单，拆分为没有数字字符并将其删除。是每个字符的 ASCII 简单编码，但会大大增加包的大小。

有人知道可以在 C++ 和 Java 中解码的编码方法吗？

感谢您阅读。祝你有美好的一天，马科斯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T13:09:54.013

我假设您需要一种加密和解密数据的方法（我相信这些是您正在寻找的术语，而不是编码/解码）。还是您正在寻找代码混淆？

如果这是关于加密/解密的，那么有很多算法在许多编程语言中都有实现。出于对善良的热爱，不要使用 URL 编码或简单的替代密码之类的东西，因为它们很容易被破解。

在加密和安全方面，您的游戏用户依赖开发人员做出稳健的行业标准选择，以保护他们的个人信息和他们在角色构建上投入的时间。因此，我建议您要么认真阅读加密和身份验证的概念，然后做出可靠的选择，要么让该领域的专家来处理。

不要在这里自己动手，因为这通常是使某些东西易于破解的最佳方法。AES 等加密标准、SSL 和 TLS 等安全协议以及基于证书的身份验证都已完善，经过多年使用的全面测试并正确记录。如果客户端和服务器使用的语言有所不同，这可能无关紧要，但如果有适当的抽象，任何网络通信实际上都是如此。

# set - 一个集合可以有重复的元素吗？

> ID：10011475
> 
> 赞同：19
> 
> 时间：2012-04-04T12:50:41.770
> 
> 标签：set

我被问到一个对我的课程作业来说有点模棱两可的问题。

```
The array of strings is regarded as a set, i.e. unordered. 
```

我不确定是否需要从此数组中删除重复项？

我试过谷歌搜索，但一个地方会告诉我与下一个地方不同的东西。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-04-04T13:01:49.860

来自维基百科的集合（数学）

> 集合是定义明确且不同的对象的集合。

也许混淆源于这样一个事实，即集合不依赖于其元素的显示方式。如果据称其元素被重复或重新排列，则集合保持不变。

因此，如果元素已经属于某个元素，我所知道的编程语言不会将元素放入集合中，或者如果它已经存在，它们会替换它，但绝不允许重复。

**编程语言示例**

让我举几个不同编程语言的例子。

**在 Python 中**

Python 中的集合被定义为“*唯一元素*的无序集合”。如果你声明一个这样的集合，`a = {1,2,2,3,4}`它只会添加`2`一次到集合中。

如果你这样做`print(a)`，输出将是`{1,2,3,4}`.

**哈斯克尔**

在 Haskell 中，集合的插入操作被定义为：“[...] 如果集合已经包含一个等于给定值的元素，*则将其替换*为新值。”

因此，如果您这样做：`let a = fromList([1,2,2,3,4])`，如果您打印`a`到主输出，它将呈现`[1,2,3,4]`.

**爪哇**

在 Java 中，集合被定义为：“一个不包含*重复元素*的集合。”。它的添加操作被定义为：“如果指定的元素尚不存在，则将其添加到此集合中 [...] 如果此集合已包含该元素，则调用*使集合保持不变*”。

```
Set<Integer> myInts = new HashSet<>(asList(1,2,2,3,4));
System.out.println(myInts); 
```

与其他示例一样，此代码将输出`[1,2,3,4]`.

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2017-04-21T04:30:26.783

一个集合的定义不能有重复的元素。允许重复元素的正确结构是[Multiset 或 Bag](https://en.wikipedia.org/wiki/Multiset)：

> 在数学中，多重集（或袋子）是对集合概念的概括，与集合不同，它允许多重集元素的多个实例。例如，{a, a, b} 和 {a, b} 是不同的多重集，尽管它们是相同的集。然而，顺序并不重要，所以 {a, a, b} 和 {a, b, a} 是同一个多重集。

编程中一个非常常见且有用的 Multiset 示例是对象值的集合：

```
values({a: 1, b: 1}) //=>  Multiset(1,1) 
```

这里的值是无序的，但不能减少到`Set(1)`例如破坏对象值的迭代。

此外，引用链接的维基百科文章（参见那里的参考资料）：

> 多重集已成为数据库中的重要工具。[18][19][20] 例如，多集通常用于在数据库系统中实现关系。多重集在计算机科学中也发挥着重要作用。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-06-20T20:59:47.190

让 A={1,2,2,3,4,5,6,7,...} 和 B={1,2,3,4,5,6,7,...} 那么任何元素A 在 B 中，B 中的任何元素在 A ==> A 包含 B 且 B 包含 A ==> A=B。所以当然集合可以有重复的元素，只是具有重复元素的集合最终会与没有重复元素的集合完全相同。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-01-30T19:19:47.837

“集合是不包含重复元素的可迭代对象。” [https://docs.scala-lang.org/overviews/collections/sets.html](https://docs.scala-lang.org/overviews/collections/sets.html)

# z3 - 量词与非量词

> ID：10011478
> 
> 赞同：4
> 
> 时间：2012-04-04T12:50:44.160
> 
> 标签：z3

我有一个关于量词的问题。

假设我有一个数组，我想为这个数组计算数组索引 0、1 和 2 -

```
(declare-const cpuA (Array Int Int))
(assert (or (= (select cpuA 0) 0) (= (select cpuA 0) 1))) 
(assert (or (= (select cpuA 1) 0) (= (select cpuA 1) 1))) 
(assert (or (= (select cpuA 2) 0) (= (select cpuA 2) 1))) 
```

或者，我可以使用 forall 构造指定相同的 -

```
(assert (forall ((x Int)) (=> (and (>= x 0) (<= x 2)) (or (= (select cpuA x) 0) (= (select cpuA x) 1))))) 
```

现在我想了解他们两个之间的区别。第一种方法执行速度很快，并给出了一个简单易读的模型。相比之下，第二个选项的代码量非常小，但程序需要时间来执行。而且解决方案也很复杂。

我想使用第二种方法，因为我的代码会变小。但是，我想找到一个可读的简单模型。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-05T21:02:33.260

量词推理通常非常昂贵。在您的示例中，量化公式等效于您提供的三个断言。但是，这不是 Z3 决定/解决您的公式的方式。Z3 使用称为基于模型的量词实例化 (MBQI) 的技术解决您的公式。这种技术可以决定许多片段（参见[http://rise4fun.com/Z3/tutorial/guide](http://rise4fun.com/Z3/tutorial/guide)）。它主要对本指南中描述的片段有效。它支持未解释的函数、算术和位向量理论。它还对数组和数据类型的支持有限。这足以解决您的示例。Z3 生成的模型似乎更复杂，因为使用相同的引擎来决定更复杂的片段。该模型应该看起来像一个小的功能程序。您可以在以下文章中找到有关此方法如何工作的更多信息：

*   [量化 SMT 公式的完整实例化](http://research.microsoft.com/en-us/um/people/leonardo/ci.pdf)

*   [有效求解量化位向量公式](http://research.microsoft.com/en-us/um/people/leonardo/fmcad10.pdf)

请注意，数组理论主要用于表示/建模无界或大数组。也就是说，数组的实际大小未知或太大。所谓大，我的意思是公式中的数组访问次数（即`selects`）远小于数组的实际大小。我们应该问自己：“我们真的需要数组来建模/解决问题 X 吗？”。您可以考虑以下替代方案：

*   （未解释的）函数而不是数组。您的示例也可以编码为：

    > (declare-fun cpuA (Int) Int)
    > 
    > (assert (or (= (cpuA 0) 0) (= (cpuA 0) 1)))
    > (assert (or (= (cpuA 1) 0) (= (cpuA 1) 1)))
    > (assert (or (= (cpuA 2) 0) (= (cpuA 2) 1)))

*   程序化 API。我们已经看到了许多使用数组（和函数）来提供紧凑编码的示例。紧凑而优雅的编码不一定更容易解决。实际上，通常情况正好相反。您可以使用 Z3 的编程 API 实现两全其美（性能和紧凑性）。在以下链接中，我为“数组”的每个位置使用一个“变量”对您的示例进行了编码。宏/函数用于编码约束，例如：表达式是 a`0`或`1`。 [http://rise4fun.com/Z3Py/JF](http://rise4fun.com/Z3Py/JF)

# java - 如何将 EasyMock 模拟注入测试类私有字段

> ID：10011480
> 
> 赞同：5
> 
> 时间：2012-04-04T12:50:48.040
> 
> 标签：java, reflection, junit, easymock

我正在使用 EasyMock 创建模拟，它是测试类中的私有参数之一（没有设置器）。我尝试使用反射 - 但它无法正常工作。

```
public class TestedClassTest{
    @Test
    public void test(){
      TestedClass instance = new TestedClass();
      MockedClass mocked = EasyMock.createMock(MockedClass.class);
      Data data = new Data();

      //Void setter
      DataType dataType = (myDataType.DataType) EasyMock.anyObject();
      mocked.setDataType(dataType);
      EasyMock.expectLastCall();

      //expect
      EasyMock.expect(mocked.getData()).andReturn(data);
      EasyMock.replay(mocked);

      Field field = instance.getClass().getDeclaredField("mockedClass")
      field.setAccessible(true);
      field.set(instance, mocked);

      //run tested method
      instance.someAction();

      EasyMock.verify(mocked);
   }
} 
```

我得到失败的信息：

```
Unexpected method call MockedClass.setDataType(myData.MyData@104306d75):
MockedClass.getData(): expected: 1, actual: 0
junit.framework.AssertionFailedError: 
Unexpected method call MockedClass.setDataType(myData.MyData@132006d75):
MockedClass.getData(): expected: 1, actual: 0 
```

我确定在测试“instance.someAction()”期间在“MockedClass”对象上触发此方法

如何解决这个问题？

已编辑 - 答案：在更正双倍之后，`replay.mocked()`我发现（很简单！）应该使用声明另一个 void 方法 `EasyMock.expectLastCall()`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T12:57:38.303

您的反射代码看起来不错。

自从我使用 EasyMock 以来已经有很长时间了，但`replay`在测试中不应该只调用一次模拟吗？您正在调用它两次。尝试摆脱第一个`replay`电话。

在这种情况下，将包含模拟的字段公开是否有意义？一般来说，协作者应该通过构造函数或设置器来设置，完全不需要反射。

编辑——根据你的更新——错误表明`setDataType`在模拟上被调用，但模拟并不期望它被调用。也许你的类调用了它两次，也许它被无序调用，或者用你没想到的参数调用它（尽管我希望在这种情况下错误会有所不同）。

# python - 在 pythonnet 中使用 OWdotNET.dll (python for .NET)

> ID：10011484
> 
> 赞同：4
> 
> 时间：2012-04-04T12:50:59.167
> 
> 标签：python, .net, dll, ironpython, python.net

我的办公桌上有一个 USB 转单线适配器，我想自动使用它。我用它来编程 dallaskeys，这是通过单线编程和读取的徽章。

有一个提供 API 的托管 DLL，我喜欢 python，所以我想使用来自“python for .NET”又名 pythonnet 的第三方托管 DLL。

我的脚本如下所示，运行没有问题：

```
import os
import clr
from clr import System

oneWireLibrary = clr.FindAssembly("OWdotNET")
System.Reflection.Assembly.LoadFile(os.path.abspath(oneWireLibrary)) 
```

但是，我不知道如何使用库中的类。我已经尝试过`clr.OWdotNET` ，但这给了我一个属性错误。我也试过`clr.AddReference("OWdotNET")`了。

链接：

[http://files.maxim-ic.com/sia_bu/softdev/owdocs_400beta2/Docs/OW.NET/OW.NET_Primer.html](http://files.maxim-ic.com/sia_bu/softdev/owdocs_400beta2/Docs/OW.NET/OW.NET_Primer.html)

[http://pythonnet.github.io/](http://pythonnet.github.io/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T14:49:45.320

我从 IronPython 的角度回答这个问题，但我相信它在 Python for .NET 中是相似的。

可以认为 clr.AddReference 调用类似于将 .NET 程序集路径添加到 sys.path，您是在告诉运行时它，但是您仍然需要将命名空间导入当前范围。

```
import clr
clr.AddReference("OWdotNET")
from com.dalsemi.onewire import OneWireAccessProvider

adapter = OneWireAccessProvider.getDefaultAdapter() 
```

# android - 为什么 getPointerCount() 总是返回 1？

> ID：10011485
> 
> 赞同：0
> 
> 时间：2012-04-04T12:50:59.383
> 
> 标签：android, multi-touch

学习Android的一个实验是检测两指按压。我有一个应用程序，可以通过触摸将自定义 ImageView 更改为随机图片。这很好用。我现在希望它只在两个或更多手指按下时更改图片。我有一个 IF 语句，仅在 pointerCount>1 时才随机化图片。它什么也没做。

我将 ASUS Transformer TF101 连接到 PC。我有一个带有 onTouch 事件的简单自定义 ImageView。

```
public boolean onTouchEvent(MotionEvent event) {
    int number =event.getPointerCount();
    if (number > 1){
        *randomise pic* 
```

我在调试步骤中检查了“数字”的值（从这个华硕:() 对我来说，Log.d 不起作用，无论我用多少手指触摸它总是 1。

有任何想法吗？

* * *

## 回答 #1

> 赞同：-3
> 
> 时间：2013-01-02T14:15:25.630

(X) 返回错误；

(X) return super.onTouchEvent(event);

(O) 返回真；

# vim - 如何使用正则表达式将文件一分为二

> ID：10011487
> 
> 赞同：1
> 
> 时间：2012-04-04T12:51:23.243
> 
> 标签：vim

我有一个包含两种或多种行的文本文件。我想把它分成两个不同的文件。我用这个命令列表来做到这一点：

```
:%g/myregexpforlinetype1/ . w >> file1
:%g/myregexpforlinetype1/d
:w file2 
```

但我认为这不是最优的。我怎样才能使它更通用、更健壮、更高效？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T13:56:37.070

您可以使用`:v`匹配所有不匹配搜索表达式的行的事实与`//`将重复先前搜索的事实相结合：

```
:%g/myregexpforlinetype1/ . w >> file1
:%v// . w >> file2 
```

# jquery - jQuery post on window.unload（窗口或浏览器关闭）

> ID：10011491
> 
> 赞同：4
> 
> 时间：2012-04-04T12:51:39.367
> 
> 标签：jquery

当用户以任何方式离开页面时，我需要发送一个发布请求。到目前为止，这就是我所拥有的，但它不起作用：

```
$(window).unload(function(){        
 $.post("http://localhost/project/quizTime.php",{action:"updateTime",userID:userid,quizID:quizid,newTime:currentTime*1000,rand:Math.random()},function(time)
    {
    });
}); 
```

通过将 window.unload 替换为 click 函数来测试 PHP 代码。这可以完美运行并根据需要更新所有内容，这意味着问题出在 $(window).unload 触发器上。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-04T13:14:29.480

您必须使用带有异步选项设置为 false 的 ajax 方法，如下所示：

```
$.ajax({
    type: 'POST',
    async: false,
    url: 'YOUR_URL',
    data: 'YOUR_DATA'
}); 
```

通过这种方式，浏览器在执行任何其他操作之前等待请求完成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T12:56:29.653

因为 $.post 是一个异步任务浏览不会等到响应到来，请按照此解决方案中给出的答案 - [$(window).unload 等待 AJAX 调用完成，然后再离开网页](https://stackoverflow.com/questions/3138498/window-unload-wait-for-ajax-call-to-finish-before-leaving-a-webpage)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-04T12:58:30.927

来自 jQuery API 文档

> 卸载事件的确切处理因浏览器版本而异。例如，某些版本的 Firefox 会在点击链接时触发该事件，但不会在窗口关闭时触发。在实际使用中，应该在所有支持的浏览器上测试行为，并与专有的 beforeunload 事件进行对比。

您似乎正在使用以不同方式处理此事件的 Firefox 版本之一。尝试[文档](http://api.jquery.com/unload/)中提到的**beforeUnload**事件。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-04-04T13:04:12.307

如果你更换

```
$(window).unload(function(){        
 $.post("http://localhost/project/quizTime.php",{action:"updateTime",userID:userid,quizID:quizid,newTime:currentTime*1000,rand:Math.random()},function(time)
    {
    });
}); 
```

有了这个：

```
$(window).unload( function () { alert("Bye now!"); } ); 
```

和测试，会发生什么？如果出现警告，则问题出在 $.post...

# javascript - Mouseover 和 Mouseout 之间触发的事件顺序

> ID：10011493
> 
> 赞同：4
> 
> 时间：2012-04-04T12:51:48.900
> 
> 标签：javascript, jquery, mouseevent

假设我的鼠标从 elementA 移出并悬停在 elementB 上。

触发事件的顺序是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T12:55:35.647

`mousemove`, `mouseleave`, `mouseout`, `mousemove`x X, `mouseenter`, `mouseover`,`mousemove`更多等等...

这是我最好的猜测...

但我错了。这应该会为您完成：添加您需要的事件（该示例使用 jQuery，您也可以使用纯 JavaScript 执行此操作，但我不想在此花费大量时间）。

好的，代码如下：

```
$(document).ready(function(e) {
    $('.canary').on('mouseout mouseleave mouseenter mouseover', function(event){
        $('#test').text($('#test').text() + ', ' + event.type)      });
}); 
```

这是你的 CSS：

```
.canary{
    width:200px;
    height:100px;
    background-color:#066
    } 
```

你的 HTML

```
<textarea name="test" id="test" cols="200" rows="10"></textarea>
<div class='canary'></div>
<br /><br />
<div class='canary'></div> 
```

这是**[一个现场演示](http://jsfiddle.net/wUNhU/1/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-11-20T17:16:14.707

规范对这些事件的顺序提出了一些要求，但在某些情况下，顺序显然取决于浏览器。请参阅[https://www.w3.org/TR/DOM-Level-3-Events/#events-mouseevent-event-order](https://www.w3.org/TR/DOM-Level-3-Events/#events-mouseevent-event-order)。

本规范中定义的某些鼠标事件必须以相对于彼此的一组顺序发生。下面显示了当指针设备的光标移动到元素上时必须发生的事件序列：

```
Event Type  Element Notes
1   mousemove       Pointing device is moved into element A...
2   mouseover   A   
3   mouseenter  A   
4   mousemove   A   Multiple mousemove events

Pointing device is moved out of element A...
5   mouseout    A   
6   mouseleave  A 
```

当指针设备移入元素 A，然后移入嵌套元素 B，然后再次移出时，必须发生以下事件序列：

```
Event Type  Element Notes
1   mousemove       
Pointing device is moved into element A...
2   mouseover   A   
3   mouseenter  A   
4   mousemove   A   Multiple mousemove events

Pointing device is moved into nested element B...
5   mouseout    A   
6   mouseover   B   
7   mouseenter  B   
8   mousemove   B   Multiple mousemove events

Pointing device is moved from element B into A...
9   mouseout    B   
10  mouseleave  B   
11  mouseover   A   
12  mousemove   A   Multiple mousemove events

Pointing device is moved out of element A...
13  mouseout    A   
14  mouseleave  A 
```

They go on to indicate that if elements are nested in the DOM, but occupy the same space, mouseover and mouseout events occur for the innermost DOM element. It is not clear to me whether the spec means to exclude the possibility of mouseover and mouseout events for the ancestor DOM nodes, not shown in their example event sequence.

# android - 部分图像消失并且使用矩阵运算无法进行旋转

> ID：10011498
> 
> 赞同：2
> 
> 时间：2012-04-04T12:51:58.733
> 
> 标签：android, android-imageview, image-rotation

我正在尝试使用 imageview 矩阵随机缩放和旋转图像，请参见下面的代码。我遇到了两个问题，可能相关也可能不相关。

第一：旋转不起作用，图像出现没有任何旋转。

第二：缩放起作用，在图像被重新缩放的范围内。但是，如果比例常数大于 1，则图像的一部分被切掉，因此只有部分图像出现在屏幕上。我认为这与 imageView 的边框有关，但我该如何解决呢？

在此先感谢您的帮助！

```
 final ImageView imageView = getImageView(); //Help function that provides imageViews
    if(imageView == null) return;

    Matrix imageMatrix = imageView.getImageMatrix(); 
    imageMatrix.postRotate(randGen.nextFloat()*360);
    float randomScale = randGen.nextFloat()*1.5f + 0.5f;
    imageMatrix.postScale(randomScale, randomScale);
    imageView.setImageBitmap(usedBitmap);
    imageView.setImageMatrix(imageMatrix);
    imageView.setScaleType(ScaleType.MATRIX);

    RelativeLayout.LayoutParams layPar = new RelativeLayout.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
    layPar.leftMargin = pCenter.x; //pCenter is the point where the image is drawn.
    layPar.topMargin = pCenter.y;
    relativeLayout.addView(imageView, layPar); 
```

更新：这个问题我已经有一段时间了，我没有找到使用上述方法的解决方案，所以我尝试子类化 View 。这是我的 View 子类，图像既不旋转也不缩放。我真的不明白为什么这些解决方案不起作用。任何人？

```
import android.content.Context;
import android.graphics.Bitmap;
import android.graphics.Canvas;
import android.graphics.Matrix;
import android.graphics.Paint;
import android.view.View;

public class ScaleRotateView extends View {

    Bitmap image;
    float rotation;
    float scaleX;
    float scaleY;

    public ScaleRotateView(Context context, Bitmap image, float rotation, float scaleX, float scaleY) {
        super(context);
        this.image = image;
        this.rotation = rotation;
        this.scaleX = scaleX;
        this.scaleY = scaleY;

    }

    @Override
    public void draw(Canvas canvas) {
        super.draw(canvas);
        canvas.drawBitmap(image, 0, 0, new Paint());
        Matrix matrix = canvas.getMatrix();
        matrix.preRotate(rotation, image.getWidth()/2, image.getHeight()/2);
        matrix.setScale(scaleX, scaleY);
        canvas.setMatrix(matrix);

                //I also tried using canvas.rotate() and canvas.scale, but to no avail.
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T05:19:25.217

您可以在自定义视图的 onDraw 方法中尝试

```
 Matrix transform = new Matrix();
 transform.setTranslate(dx, dy);//
 transform.preRotate(degree,PivotX ,PivotY);
 canvas.drawBitmap(bitmap, transform, null); 
```

# android - 方法不关闭

> ID：10011500
> 
> 赞同：0
> 
> 时间：2012-04-04T12:52:03.513
> 
> 标签：android, android-alertdialog

我有个问题。在我的活动中，我有一个按钮，当我单击它时，我会调用一个方法。此方法向我显示一个带有列表视图的警报对话框，我想将项目单击保存到一个变量，然后我想关闭该方法但它没有关闭！！！为什么？？我发布了该方法的代码。我的 logcat 没有给我任何错误。谁能帮我？？请

```
private void getValuta() {

    // AlertDialog creation
    AlertDialog.Builder miaAlert = new AlertDialog.Builder(this);

    final ListView lV = new ListView(this);

    Cursor c = null;

    // Set the title of the dialogBox
    miaAlert.setTitle("Choose Valuta");

    // I call the Query 
    c = vdb.fetchValuteListView("0");

    // handle of the cursor
    startManagingCursor(c);

    // I create the SimpleCursorAdapter
    SimpleCursorAdapter adapter = new SimpleCursorAdapter(this, // Context
            android.R.layout.simple_list_item_1, // row/product layout
            c, // the cursor
            new String[] {
                    ValuteDb.ValuteMetaData.VALUTE_NAME_KEY},
                                                                        // the colums
            new int[] { android.R.id.text1});// views

    stopManagingCursor(c);

    // The listView is filled using the adapter created above
    lV.setAdapter(adapter);

    miaAlert.setView(lV);

    miaAlert.setCancelable(false);

    // list view listener
    lV.setOnItemClickListener(new OnItemClickListener() {
        public void onItemClick(AdapterView<?> parent, View v,
                int position, long id) {

            String riga = String.valueOf(id);
            String confr = vdb.getRecord(riga,2);
            System.out.println("position= " + position + "/id= " + id+"/nome= "+confr);
            new_valuta = vdb.getRecord(riga,2);
            listdb.update("9", "Valuta", new_valuta, "2");
            c_list.requery();

            return;

        }
    });

    // I create the AlertDialog
    AlertDialog alert = miaAlert.create();

    // I showw the AlertDialog
    alert.show(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T13:16:57.747

尝试这个：

```
private void getValuta() {

    // Creo l'alert Dialog
    AlertDialog.Builder miaAlert = new AlertDialog.Builder(this);

    final ListView lV = new ListView(this);

    Cursor c = null;

    // Setto il titolo del mio alert
    miaAlert.setTitle("Choose Valuta");

    // Chiamo la Query che in questo caso è un all
    c = vdb.fetchValuteListView("0");

    // Comincio a fare il management del cursore
    startManagingCursor(c);

    // Semplice cursor adapter
    SimpleCursorAdapter adapter = new SimpleCursorAdapter(this, // Contesto
            android.R.layout.simple_list_item_1, // il layout di ogni riga/prodotto
            c, // Il cursore
            new String[] {
                    ValuteDb.ValuteMetaData.VALUTE_NAME_KEY},// questi
                                                                        // colonne
            new int[] { android.R.id.text1});// in
                                                                    // queste
                                                                    // views

    stopManagingCursor(c);

    // Ora la list view si prende questo adapter appena creato sopra
    lV.setAdapter(adapter);

    miaAlert.setView(lV);

    miaAlert.setCancelable(false);

    // Listener della list view
    lV.setOnItemClickListener(new OnItemClickListener() {
        public void onItemClick(AdapterView<?> parent, View v,
                int position, long id) {

            AlertDialog alert = miaAlert.create();
            alert.show();

            String riga = String.valueOf(id);
            String confr = vdb.getRecord(riga,2);
            System.out.println("position= " + position + "/id= " + id+"/nome= "+confr);
            new_valuta = vdb.getRecord(riga,2);
            listdb.update("9", "Valuta", new_valuta, "2");
            c_list.requery();

            alert.dismiss();

            return;

        }
    }); 
```

# c# - DateTimePicker 应该只显示当前日期

> ID：10011501
> 
> 赞同：2
> 
> 时间：2012-04-04T12:52:04.563
> 
> 标签：c#, .net, datetimepicker

> **可能重复：**
> [限制 C# win 表单 DateTimePicker 中的日期](https://stackoverflow.com/questions/8353801/limiting-the-dates-within-a-c-sharp-win-form-datetimepicker)

在 C# 中，是否可以仅将 DateTimePicker 设置为当前日期？用户不能选择回到以前或将来的日期。DateTimePicker 将仅显示或具有当前日期。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-04T12:54:37.427

您应该能够设置[MinDate](http://msdn.microsoft.com/en-us/library/system.windows.forms.datetimepicker.mindate.aspx)和[MaxDate](http://msdn.microsoft.com/en-us/library/system.windows.forms.datetimepicker.maxdate.aspx)属性。

```
 dateTimePicker1.MinDate = dateTimePicker1.MaxDate = DateTime.Now; 
```

根据一些人的说法，这实际上应该抛出一个`DoesntMakeSenseException`，但是......也许它应该被报告为一个错误......

# c# - 通用存储库和事务

> ID：10011504
> 
> 赞同：6
> 
> 时间：2012-04-04T12:52:11.257
> 
> 标签：c#, asp.net-mvc-3, transactions, repository

我已经在 MVC 应用程序中实现了我的第一个通用存储库。工作正常，但如何将存储库放在事务范围内？

```
 public interface IRepository<TEntity> where TEntity : class
    {
        List<TEntity> FetchAll();
        IQueryable<TEntity> Query { get; }
        void Add(TEntity entity);
        void Delete(TEntity entity);
        void Save();
    }

    public class Repository<T> : IRepository<T> where T : class
    {
        private readonly DataContext _db;

        public Repository(DataContext db)
        {
            _db = db;
        }

        #region IRepository<T> Members

        public IQueryable<T> Query
        {
            get { return _db.GetTable<T>(); }
        }

        public List<T> FetchAll()
        {
            return Query.ToList();
        }

        public void Add(T entity)
        {
            _db.GetTable<T>().InsertOnSubmit(entity);
        }

        public void Delete(T entity)
        {
            _db.GetTable<T>().DeleteOnSubmit(entity);
        }

        public void Save()
        {
            _db.SubmitChanges();
        }

        #endregion
    }

        private void RegisterDependencyResolver()
        {
            var kernel = new StandardKernel();         
            var connectionString = ConfigurationManager.ConnectionStrings["ConnectionString"].ConnectionString;
            kernel.Bind(typeof(DataContext)).ToMethod(context => new DataContext(connectionString));
            kernel.Bind(typeof(IRepository<>)).To(typeof(Repository<>));            
            DependencyResolver.SetResolver(new NinjectDependencyResolver(kernel));
        }

    public class AdminController : Controller
    {

        private readonly IRepository<User> _userRepository;
        private readonly IRepository<Order> _orderRepository;

public AdminController(IRepository<User> userRepository, IRepository<Order> orderRepository)
        {
            _userRepository = userRepository;
            _orderRepository = orderRepository;
        }

 public ActionResult InsertUser(UserViewModel model)
        {

//Skip Code
//Do not commit data to database if _orderRepository is failed to save data
       _userRepository.Add(user);
            _userRepository.Save();

//Skip Code
      _orderRepository.Add(order);
            _orderRepository.Save();

}

} 
```

在 InsertUser 操作中使用 Transaction 范围包装存储库代码的最佳方法是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-04T13:18:09.320

您在这里缺少抽象。您应该将所有业务逻辑放在命令处理程序中，并创建一个实现事务行为的命令处理程序装饰器。[本文](https://cuttingedge.it/blogs/steven/pivot/entry.php?id=91)描述了如何做到这一点，但简而言之：

1.  定义一个`ICommandHandler<TCommand>`接口：

    ```
    public interface ICommandHandler<TCommand>
    {
        void Handle(TCommand command);
    } 
    ```

2.  创建定义业务操作合同的命令。命令只是[DTO](https://en.wikipedia.org/wiki/Data_transfer_object)（只有数据，没有行为）。例如：

    ```
    public class ShipOrderCommand
    {
        public int OrderId { get; set; }

        public ShippingInfo Info { get; set; }
    } 
    ```

3.  实现将包含这些命令的业务逻辑/行为的命令处理程序：

    ```
    public class ShipOrderCommandHandler 
        : ICommandHandler<ShipOrderCommand>
    {
        private readonly IRepository<Order> repository;

        public ShipOrderCommandHandler(
            IRepository<Order> repository)
        {
            this.repository = repository;
        }

        public void Handle(ShipOrderCommand command)
        {
            // do some useful stuf with the command and repository.
        }
    } 
    ```

4.  让您的 MVC 控制器依赖于`ICommandHandler<T>`抽象：

    ```
    public ShipOrderController : Controller
    {
        private readonly ICommandHandler<ShipOrderCommand> handler;

        public ShipOrderController(
            ICommandHandler<ShipOrderCommand> handler)
        {
            this.handler = handler;
        }

        public void Ship(int orderId, ShippingInfo info)
        {
            this.handler.Handle(new ShipOrderCommand
            {
                OrderId = orderId,
                Info = info
            });
        }
    } 
    ```

5.  定义一个实现事务逻辑的通用装饰器：

    ```
    public TransactionalCommandHandlerDecorator<TCommand>
        : ICommandHandler<TCommand>
    {
        private ICommandHandler<TCommand> decoratedHandler;

        public TransactionalCommandHandlerDecorator(
            ICommandHandler<TCommand> decoratedHandler)
        {
            this.decoratedHandler = decoratedHandler;
        }

        public void Handle(TCommand command)
        {
            using (var scope = new TransactionScope())
            {
                this.decoratedHandler.Handle(command);
                scope.Complete();
            }
        }
    } 
    ```

6.  确保每个`ShipOrderCommandHandler`都用 a 装饰`TransactionalCommandHandlerDecorator`并注入`ShipOrderController`. 您可以使用您最喜欢的 DI 容器或手动执行此操作：

    ```
    protected override IController GetControllerInstance(
        RequestContext requestContext, Type controllerType)
    {
        if (controllerType == typeof(ShipOrderController))
        {
            return new ShipOrderController(
                new TransactionalCommandHandlerDecorator<ShipOrderCommand>(
                    new ShipOrderCommandHandler(
                        new OrderRepository())));
        }

        return base.GetControllerInstance(requestContext, controllerType);
    } 
    ```

有了这个，您可以在事务中运行所有业务逻辑，而无需业务逻辑意识到这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T14:02:48.990

有一种称为工作单元的模式。这里有[一个解释](http://www.asp.net/mvc/tutorials/getting-started-with-ef-using-mvc/implementing-the-repository-and-unit-of-work-patterns-in-an-asp-net-mvc-application)。

# c# - TextBox 最大字符数（不是 MaxLength）

> ID：10011508
> 
> 赞同：8
> 
> 时间：2012-04-04T12:52:23.783
> 
> 标签：c#, .net, winforms

我正在使用一个`System.Windows.Forms.TextBox`. 根据文档，该`MaxLength`属性控制输入的字符数量，用户可以键入或粘贴到文本框中（即，可以通过使用`AppendText`函数或`Text`属性以编程方式添加更多字符）。当前的字符数量可以从`TextLength`属性中获取。

1.  有什么方法可以设置最大字符数，而无需在`Clear()`达到自定义限制时调用自定义限制器？
2.  无论如何，它可以容纳的绝对最大值是多少？是否仅受内存限制？
3.  当达到最大值/内存已满时会发生什么？碰撞？前 x 行已清除？
4.  仅手动清除前 x 行的最佳方法是什么？子串操作？

编辑：我已经测试它可以容纳超过 600k 个字符，不管`MaxLength`，此时我手动停止了程序并问了这个问题。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-04T14:17:54.643

1.  当然。覆盖/阴影`AppendText`并`Text`在派生类中。请参阅下面的代码。
2.  该`Text`属性的支持字段是一个普通的旧字符串（私有字段`System.Windows.Forms.Control::text`）。所以最大长度是字符串的最大长度，即“2 GB，或大约 10 亿个字符”（参见[System.String](http://msdn.microsoft.com/en-us/library/system.string.aspx)）。
3.  你为什么不试试看呢？
4.  这取决于您的性能要求。您可以使用该`Lines`属性，但请注意，每次调用它时，您的全部`text`内容都会在内部解析为行。如果您要突破内容长度的限制，这将是一个坏主意。因此，更快的方法（就执行而言，而不是编码而言）是压缩字符并计算 cr / lfs。您当然需要决定您正在考虑的行尾是什么。

**`MaxLength`代码：即使以编程方式设置文本也强制执行属性：**

```
using System;
using System.Windows.Forms;
namespace WindowsFormsApplication5 {
    class TextBoxExt : TextBox {
        new public void AppendText(string text) {
            if (this.Text.Length == this.MaxLength) {
                return;
            } else if (this.Text.Length + text.Length > this.MaxLength) {
                base.AppendText(text.Substring(0, (this.MaxLength - this.Text.Length)));
            } else {
                base.AppendText(text);
            }
        }

        public override string Text {
            get {
                return base.Text;
            }
            set {
                if (!string.IsNullOrEmpty(value) && value.Length > this.MaxLength) {
                    base.Text = value.Substring(0, this.MaxLength);
                } else {
                    base.Text = value;
                }
            }
        }

        // Also: Clearing top X lines with high performance
        public void ClearTopLines(int count) {
            if (count <= 0) {
                return;
            } else if (!this.Multiline) {
                this.Clear();
                return;
            }

            string txt = this.Text;
            int cursor = 0, ixOf = 0, brkLength = 0, brkCount = 0;

            while (brkCount < count) {
                ixOf = txt.IndexOfBreak(cursor, out brkLength);
                if (ixOf < 0) {
                    this.Clear();
                    return;
                }
                cursor = ixOf + brkLength;
                brkCount++;
            }
            this.Text = txt.Substring(cursor);
        }
    }

    public static class StringExt {
        public static int IndexOfBreak(this string str, out int length) {
            return IndexOfBreak(str, 0, out length);
        }

        public static int IndexOfBreak(this string str, int startIndex, out int length) {
            if (string.IsNullOrEmpty(str)) {
                length = 0;
                return -1; 
            }
            int ub = str.Length - 1;
            int intchr;
            if (startIndex > ub) {
                throw new ArgumentOutOfRangeException();
            }
            for (int i = startIndex; i <= ub; i++) {
                intchr = str[i];
                if (intchr == 0x0D) {
                    if (i < ub && str[i + 1] == 0x0A) {
                        length = 2;
                    } else {
                        length = 1;
                    }
                    return i;
                } else if (intchr == 0x0A) {
                    length = 1;
                    return i;
                }
            }
            length = 0;
            return -1;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-08-12T12:58:57.207

理论上的限制是一个字符串，~2GB。但是，实际上，这取决于您运行过程中的条件。它等于字符串在任何给定时间可以分配的最大可用连续内存部分的大小。我在应用程序中有一个文本框，错误大小约为 450MB。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-04T13:11:48.697

的Text属性`System.Windows.Forms.TextBox`是一个字符串，所以理论上可以是[一个字符串的最大长度](https://stackoverflow.com/questions/140468/what-is-the-maximum-possible-length-of-a-net-string)

# android - MediaPlayer如何停止播放多个声音

> ID：10011515
> 
> 赞同：1
> 
> 时间：2012-04-04T12:52:46.417
> 
> 标签：android, media-player, audio

我有一个播放声音的按钮。当我多次按下按钮时，它会多次播放声音。没关系，我想要这个。但是当我单击停止按钮时，它必须停止当前播放的所有声音。我用了：

```
 while (mediaPlayer.isPlaying()){mediaPlayer.stop();} 
```

但它不起作用，声音继续播放。有人能帮我吗？这是我的完整代码：

```
public class HelloSoundboard extends Activity {
MediaPlayer mediaPlayer;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    Button item1 = (Button)findViewById(R.id.item1);
    item1.setOnClickListener(new View.OnClickListener() {
       public void onClick(View view) {
           mediaPlayer = MediaPlayer.create(getBaseContext(), R.raw.atyourservice);
           mediaPlayer.start();
       }
    });

    Button stop = (Button)findViewById(R.id.stop);
    stop.setOnClickListener(new View.OnClickListener() {
       public void onClick(View view) {
          while (mediaPlayer.isPlaying()){mediaPlayer.stop();}
        //  mediaPlayer.stop();
       }
     });
 }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T12:57:44.957

我不确定这一点，但我认为如果你使用 SoundPool 会更好。

“SoundPool 专为短片而设计，这些短片可以保存在内存中解压缩以便快速访问，这最适合应用程序或游戏中的音效”。

“MediaPlayer 专为较长的声音文件或流而设计，最适合音乐文件或较大的文件”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-04T12:59:43.937

您可以使用`MediaPlayer`s 列表：

```
List<MediaPlayer> mps = new ArrayList<MediaPlayer>();
Button item1 = (Button)findViewById(R.id.item1);
item1.setOnClickListener(new View.OnClickListener() {
   public void onClick(View view) {
       MediaPlayer mp = MediaPlayer.create(getBaseContext(), R.raw.atyourservice);
       mp.start();
       mps.add(mp);
   }
});

Button stop = (Button)findViewById(R.id.stop);
stop.setOnClickListener(new View.OnClickListener() {
   public void onClick(View view) {
      for (int i = mps.size() - 1; i >= 0; --i) { //changed ++i to --i
          if (mps.get(i).isPlaying()) {
              mps.get(i).stop();
          }
          mps.remove(i);
      }
   }
 }); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-04T14:38:44.217

`SoundPool`是为此目的更好的选择。我强烈警告不要实例化多个`MediaPlayer`实例，因为大多数系统没有资源来生成许多并行活动实例。您会在许多设备上发现，按 5 次以上的按钮会导致基于内存的崩溃。

至于停止所有活动流，没有内置功能，但很容易以类似于您现有代码的方式完成。附带说明一下，有一种`autoPause()`方法可以停止所有流，但它并没有真正结束它们的播放（正如方法名称所暗示的那样）。这是一个管理音频流的简单示例：

```
//SoundPool initialization somewhere
SoundPool pool = new SoundPool(10, AudioManager.STREAM_MUSIC, 0);
//Load your sound effect into the pool
int soundId = pool.load(...); //There are several versions of this, pick which fits your sound

List<Integer> streams = new ArrayList<Integer>();
Button item1 = (Button)findViewById(R.id.item1);
item1.setOnClickListener(new View.OnClickListener() {
   public void onClick(View view) {
       int streamId = pool.play(soundId, 1.0f, 1.0f, 1, 0, 1.0f);
       streams.add(streamId);
   }
});

Button stop = (Button)findViewById(R.id.stop);
stop.setOnClickListener(new View.OnClickListener() {
   public void onClick(View view) {
      for (Integer stream : streams) {
          pool.stop(stream);
      }
      streams.clear();
   }
}); 
```

管理 streamID 值列表比管理`MediaPlayer`实例的内存效率高得多，您的用户会感谢您的。另外，请注意，`SoundPool.stop()`即使 streamID 不再有效，调用也是安全的，因此您无需检查现有播放。

高温高压

# c - llvm 优化

> ID：10011516
> 
> 赞同：3
> 
> 时间：2012-04-04T12:52:46.563
> 
> 标签：c, optimization, llvm

[此处描述了可用的 LLVM 通行证列表](http://llvm.org/docs/Passes.html)。我有兴趣了解不同优化级别包含哪些通道。例如，对于 -O2 包括哪些通行证。是否有任何网站或文件提供该信息。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T18:13:30.027

它在[PassManagerBuilder.cpp](http://llvm.org/svn/llvm-project/llvm/trunk/lib/Transforms/IPO/PassManagerBuilder.cpp)文件中可见。看一下 populateModulePassManager 方法，其中 OptLevel 是跟随 -O 选项的整数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T17:42:23.390

从命令行您可以使用：

```
echo "" | opt -O3 -disable-output -debug-pass=Arguments 
```

# c# - 使用接口的 UI BLL 通信

> ID：10011523
> 
> 赞同：0
> 
> 时间：2012-04-04T12:53:18.867
> 
> 标签：c#, architecture

发现这个[问题](https://stackoverflow.com/questions/800161/handing-exception-in-bll-and-return-to-client-either-winforms-or-webforms)解释了一种在层之间进行通信的方式。然而还有一方面。

假设我使用接口将消息从 BLL 发送到 UI，如下例所示：

```
public interface IUiCallbacks
{
  void SendMessage(string message);
  void SendException(string message, Exception ex);
}

public class WinFormsUiCallbacks : IUiCallbacks
{
  public void SendMessage(string message)
  {
    MessageBox.Show(message);
  }

  public void SendException(string message, Exception ex)
  {
    MessageBox.Show(string.Format("Unfortunately, the following errror has occurred:{0}{1}", Environment.NewLine, ex.Message));
  }
}

public class OrderService
{
  private IUiCallbacks _iUiCallbacks;
  ...
  public OrderService() { ... }
  public OrderService(IUiCallbacks iUiCallbacks)
  {
    _iUiCallbacks = iUiCallbacks;
  }
  ...
  public void AddOrder(Order order)
  {
    ...
    if(OrderAlreadyExists(order))
    {
      if(_iUiCallbacks != null)
        _iUiCallbacks.SendMessage("The order can not be added, because it is already accepted.");
      return;
    }
    ...
  }
  ...
} 
```

我想要一个确认框来确认覆盖现有订单，而不是信息消息。

在这种情况下如何处理确认框的结果？

谢谢，亚历克斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T13:23:53.360

只需`SendMessage`返回 DialogResult，并添加所有必要的参数：

```
 public DialogResult SendMessage(string message, string caption, MessageBoxButtons buttons)
  {
    return MessageBox.Show(message, caption, buttons);
  } 
```

并使用它。

如果您不想在 IUiCallbacks 接口中引用 DialogResult 类型，请创建您自己的 DialogResult 类型并提供代码以在 WPF DialogResult 和您的 DialogResult 之间进行映射（例如强制转换）。

您可以查看[In The Box MVVM Training](http://karlshifflett.wordpress.com/2010/11/07/in-the-box-ndash-mvvm-training/)中的 IDialogService - 即使它是针对 WPF+MVVM 的（顺便说一句：MVVM 是一个很棒的模式，真的值得学习），它已经包含了您需要的一切。

# django - django 内容类型和字符串比较

> ID：10011524
> 
> 赞同：2
> 
> 时间：2012-04-04T12:53:19.543
> 
> 标签：django, django-templates, content-type

我有一个带有 ContentType 字段的模型。

在任何模型方法中，我都可以将其与字符串进行比较：

```
self.content_type == "construction" # True if ContentObject points to Construction model. 
```

但是，这样的事情似乎不适用于模板。

我尝试的第一件事

```
{% if object.content_type == "construction" %} 
```

第二：

```
def __unicode__(self): 
    return str(self.content_type)
`{% if object == "construction" %}` 
```

它是假的，但 {{ object }} 打印`construction`。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-04T13:07:48.847

unicode 方法`ContentType`只是显示名称，这就是为什么`{{ object }}`显示`construction`在模板中。

```
class ContentType(models.Model):
    ...
    def __unicode__(self):
        return self.name 
```

但是，`object.content_type`是一个`ContentType`实例，而不是字符串，因此将其与“构造”进行比较将始终返回`False`. 尝试比较内容类型`model`。

```
{% if object.content_type.model == "construction" %} 
```

# php - 贝宝不在防火墙下工作

> ID：10011526
> 
> 赞同：4
> 
> 时间：2012-04-04T12:53:38.860
> 
> 标签：php, paypal, firewall

我有一个 php 应用程序，我正在尝试与 paypal 支付网关集成，我的电脑在 fortinet 防火墙下，现在我正在努力解决一个问题，当我尝试使用 paypal 付款时它总是会返回错误

[L_ERRORCODE0] => 81002
[L_SHORTMESSAGE0] => 未指定方法
[L_LONGMESSAGE0] => 未指定方法

但是相同的应用程序和数据库被复制到另一台不在防火墙下的电脑上工作正常。

我认为这是我的防火墙的问题。我已经在我的防火墙上打开了 443 端口，还有什么可以在防火墙上做的吗？请任何人都可以提供一些建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T13:00:26.287

打开 443 应该就足够了，因为 https 使用端口 443。我不详细了解 paypal api 的工作原理。在交换您的应用程序 - paypal api 期间是否可能涉及其他端口？尝试 tcpdump 或查看防火墙日志，以查看其他端口上是否有数据包交换，因此被防火墙阻止。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-29T19:30:45.423

我的应用程序在 .NET 中，并且集成了 paypal。当我使用我的 Visual Studio 运行“实时”代码时，它可以轻松连接到 Paypal 站点。但是当在服务器上发布相同的包时，它无法连接。

我已将paypal的所有IP列入白名单，但仍然面临这个问题。

# ruby-on-rails - 如何在 Rails 表单中仅列出集合中的一种语言？

> ID：10011532
> 
> 赞同：0
> 
> 时间：2012-04-04T12:54:03.433
> 
> 标签：ruby-on-rails, ruby-on-rails-3, forms, collections

我有一些代码可以在 Rails 表单中显示一长串语言，并且希望只显示一种语言作为可选项目。其余的不应该列出，但仍然在集合中（它是一个包含所有国家的数据库表）

我有这个代码：

```
 = f.input :state_id,
              :label => "Your country",
              :collection => DataCountry.all,
              :value => @city,
              :id => "city_id",
              :name => "city_id" 
```

我怎么能只列出一种语言呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T13:05:48.977

> 我怎么能只列出一种语言呢？

通过选择您想要的国家，而不是将所有这些国家作为`:collection`. 这只会使用第一个，但您也可以使用`[DataCountry.find_by_whatever...]`：

```
= f.input :state_id,
          :label => "Your country",
          :collection => [DataCountry.all.first]
          :value => @city,
          :id => "city_id",
          :name => "city_id" 
```

请注意，由于您选择的是单个`DataCountry`，因此必须将其包装起来，`[]`以便将数组作为`:collection`.

# iphone - App Store 能不能接受这个流程

> ID：10011533
> 
> 赞同：-1
> 
> 时间：2012-04-04T12:54:03.787
> 
> 标签：iphone, facebook, appstore-approval

我已将 Facebook 功能集成到我的应用程序中。通过使用链接`https://github.com/facebook/facebook-ios-sdk`，我已经集成了 Facebook。在这个应用程序中，在登录时，它正在打开[Safari](http://en.wikipedia.org/wiki/Safari_%28web_browser%29)，同时应用程序进入后台，然后再次登录后又回到应用程序。我的意图是这个流程可以接受或不接受应用程序商店。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T12:59:05.083

这是官方的 Facebook iOS [SDK](http://en.wikipedia.org/wiki/Software_development_kit)，App Store 中的许多应用程序已经在使用它。所以你可以在你的应用程序中使用它。

此外，您问题中的流程正是该库的[文档](http://developers.facebook.com/docs/mobile/ios/build/#implementsso)所描述的内容，并且再次被 App Store 中已有的应用程序使用：

> 如果设备在支持多任务处理的 iOS 版本中运行，但没有安装 3.2.3 或更高版本的 Facebook 应用程序，**SDK 将在 Safari 中打开授权对话框**。在用户授予或撤销授权后，**Safari 将重定向回调用应用程序**。类似于基于 Facebook 应用的授权，这允许多个应用通过 Safari cookie 共享同一个 Facebook 用户 access_token。

所以，是的，这个流程没有任何问题。

# android - 如何设置android wifihotspot的高级设置

> ID：10011543
> 
> 赞同：5
> 
> 时间：2012-04-04T12:54:50.717
> 
> 标签：android, android-wifi

我通过以下代码打开便携式 wifi 热点：

```
 private void createWifiAccessPoint() {
    WifiManager wifiManager = (WifiManager)getBaseContext().getSystemService(Context.WIFI_SERVICE);
    if(wifiManager.isWifiEnabled())
    {
        wifiManager.setWifiEnabled(false);          
    }       
    Method[] wmMethods = wifiManager.getClass().getDeclaredMethods();   //Get all declared methods in WifiManager class     
    boolean methodFound=false;
    for(Method method: wmMethods){
        if(method.getName().equals("setWifiApEnabled")){
            methodFound=true;
            WifiConfiguration netConfig = new WifiConfiguration();
            netConfig.allowedAuthAlgorithms.set(WifiConfiguration.AuthAlgorithm.OPEN);
            netConfig.allowedProtocols.set(WifiConfiguration.Protocol.RSN);
            netConfig.allowedProtocols.set(WifiConfiguration.Protocol.WPA);
            netConfig.allowedKeyManagement.set(WifiConfiguration.KeyMgmt.WPA_PSK);
            netConfig.allowedPairwiseCiphers.set(WifiConfiguration.PairwiseCipher.CCMP);
            netConfig.allowedPairwiseCiphers.set(WifiConfiguration.PairwiseCipher.TKIP);
            netConfig.allowedGroupCiphers.set(WifiConfiguration.GroupCipher.CCMP);
            netConfig.allowedGroupCiphers.set(WifiConfiguration.GroupCipher.TKIP);
            try {
                boolean apstatus=(Boolean) method.invoke(wifiManager, netConfig,true);          
                //statusView.setText("Creating a Wi-Fi Network \""+netConfig.SSID+"\"");
                for (Method isWifiApEnabledmethod: wmMethods)
                {
                    if(isWifiApEnabledmethod.getName().equals("isWifiApEnabled")){
                        while(!(Boolean)isWifiApEnabledmethod.invoke(wifiManager)){
                        };
                        for(Method method1: wmMethods){
                            if(method1.getName().equals("getWifiApState")){
                                int apstate;
                                apstate=(Integer)method1.invoke(wifiManager);
                                //                    netConfig=(WifiConfiguration)method1.invoke(wifi);
                                //statusView.append("\nSSID:"+netConfig.SSID+"\nPassword:"+netConfig.preSharedKey+"\n");
                            }
                        }
                    }
                }
                if(apstatus)
                {
                    System.out.println("SUCCESSdddd");  
                    //statusView.append("\nAccess Point Created!");
                    //finish();
                    //Intent searchSensorsIntent = new Intent(this,SearchSensors.class);            
                    //startActivity(searchSensorsIntent);
                }else
                {
                    System.out.println("FAILED");   
                    //statusView.append("\nAccess Point Creation failed!");
                }
            } catch (IllegalArgumentException e) {
                e.printStackTrace();
            } catch (IllegalAccessException e) {
                e.printStackTrace();
            } catch (InvocationTargetException e) {
                e.printStackTrace();
            }
        }      
    }
    if(!methodFound){
        //statusView.setText("Your phone's API does not contain setWifiApEnabled method to configure an access point");
    }
} 
```

它对我有用.......热点打开......但也有通过单击“菜单”按钮进行高级设置......这是一个问题...... DHCP在LanSettings和电源模式仅工作 5 分钟....我希望启用 DHCP 并且 PowerMode -“始终开启”...我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T09:56:01.887

您可能需要查看 Android 源代码才能找到答案。使用您的代码是能够连接并获取 IP 地址的设备吗？如果是这种情况，则 AP 的 DHCP 工作正常。

就我个人而言，我什至没有启用或禁用 DHCP 选项或 ICS 上的 PowerMode。

# matlab - 在 Matlab 中求解一个系数非常小的二次方程

> ID：10011544
> 
> 赞同：0
> 
> 时间：2012-04-04T12:54:51.377
> 
> 标签：matlab, numerical-methods

我在matlab中实现一个代码来求解二次方程，使用解析公式：

![在此处输入图像描述](../Images/3f8def483d633896fdc0eeceed99318c.png)

这是代码：

```
clear all 
format short 
a=1; b=30000000.001; c=1/4; 
rdelta=sqrt(b^2-4*a*c); 
x1=(-b+rdelta)/(2*a);
x2=(-b-rdelta)/(2*a);
fprintf(' Roots of the polynomial %5.3f x^2 + %5.3f x+%5.3f \n',a,b,c)  
fprintf ('x1= %e\n',x1)
fprintf ('x2= %e\n\n',x2)
valor_real_x1= -8.3333e-009;
valor_real_x2= -2.6844e+007;

error_abs_x1 = abs (valor_real_x1-x1);
error_abs_x2 = abs (valor_real_x2-x2);

error_rel_x1 = abs (error_abs_x1/valor_real_x1);
error_rel_x2 = abs (error_abs_x2/valor_real_x2);

fprintf(' absolute_errorx1 = |real value - obtained value| = |%e - %e| = %e \n',valor_real_x1,x1,error_abs_x1)  
fprintf(' absolute_errorx2 = |real value - obtained value| = |%e - %e| = %e \n\n',valor_real_x2,x2,error_abs_x2) 

fprintf(' relative error_x1 = |absolut error / real value| = |%e / %e| = %e \n',error_abs_x1,valor_real_x1,error_rel_x1 ) 
 fprintf(' relative_error_x2 = |absolut error / real value|  = |%e / %e| = %e \n',error_abs_x2,valor_real_x2,error_rel_x2) 
```

我遇到的问题是它给了我一个精确的解决方案，即对于值a = 1，b = 30000000,001 c = 1/4，根的值是：

```
Roots of the polynomial 1.000 x^2 + 30000000.001 x+0.250 
 x1= -9.313226e-009
 x2= -3.000000e+007 
```

知道多项式根的精确值为：

```
x1= -8.3333e-009
x2= -2.6844e+007 
```

这给了我在计算的绝对和相对精度方面的以下错误：

```
 absolute_errorx1 = |real value - obtained value| = |-8.333300e-009 - -9.313226e-009| = 9.799257e-010 
 absolute_errorx2 = |real value - obtained value| = |-2.684400e+007 - -3.000000e+007| = 3.156000e+006 

 relative error_x1 = |absolut error / real value| = |9.799257e-010 / -8.333300e-009| = 1.175916e-001 
 relative_error_x2 = |absolut error / real value|  = |3.156000e+006 / -2.684400e+007| = 1.175682e-001 
```

我的问题是：是否有获得二次方程根的最佳方法？即我可以更改我的代码以减少预期解决方案和结果解决方案之间的相对误差？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-04T13:53:26.947

在这种情况下直接使用二次公式会因减去两个幅度非常相似的值而导致数值精度的大量损失。这是因为表达式

```
sqrt(b*b - 4*a*c) 
```

与 b 几乎相同。所以你应该只使用这两个根中的一个，一个不涉及减去两个非常接近的值，而对于另一个根，你可以使用（例如）二次根的乘积是 c/a 的事实。我会让你填补空白。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-04T13:46:33.573

为什么这听起来像是数值分析第一堂课的家庭作业？

自从我年轻时已经有一段时间了，但我记得有一个技巧。无论如何，你错了。该多项式的真根是

```
solve('x^2 + 30000000.001*x + 0.25')
ans =
          -30000000.000999991666666666944442
 -0.0000000083333333330555578703796293981491 
```

根在这里做得如何？

```
p = [1 30000000.001 1/4];
format long g
roots(p)
ans =
             -30000000.001
     -8.33333333305556e-09 
```

这实际上看起来还不错。HPF 是怎么做的？

```
DefaultNumberOfDigits 64
a = hpf(1);
b = hpf('30000000.001');
c = hpf('0.25');

r1 = (-b + sqrt(b*b - 4*a*c))/(2*a)
r1 =
-0.000000008333333333055557870379629398149125529835186899898569329967

r2 = (-b - sqrt(b*b - 4*a*c))/(2*a)
r2 =
-30000000.000999991666666666944442129620370601850874470164813100101 
```

是的，HPF 也可以很好地工作。

那么当你使用双精度数字和标准公式时会发生什么？是的，克拉波拉来了。

```
a = 1;
b = 30000000.001;
c = 0.25;

>> r1 = (-b + sqrt(b*b - 4*a*c))/(2*a)
r1 =
     -7.45058059692383e-09

>> r2 = (-b - sqrt(b*b - 4*a*c))/(2*a)
r2 =
             -30000000.001 
```

同样，大量的减法抵消会侵蚀结果。（我似乎记得那是您在上一个问题中遇到的问题。）

您可以使用一个技巧。看到大解被很好地估计了，而不是接近于零的解。那么，如果您使用二次公式求解 Fliplr(p) 的根，会发生什么情况？这如何解决您的问题？当你这样做时，隐含地做了什么转换？（对不起，我不会做你的功课。我认为上面的提示已经足够了。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-04T13:41:03.260

我认为您的“真实”值可能是错误的（或者可能是精确的事情......我不知道）

```
a*(valor_real_x1^2)+b*(valor_real_x1)+c

ans =

   9.9999e-07

a*(valor_real_x2^2)+b*(valor_real_x2)+c

ans =

  -8.4720e+13 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-11-03T15:44:03.690

这个问题的一个很好的公式：

```
var q = sqrt(c*a)/b;
var f = .5 + .5 *sqrt(1-4*q*q);
var x1=-b*f/a;
var x2=-c/(f*b); 
```

# android - 通过列表视图上的上下文菜单设置来自资源的通知

> ID：10011548
> 
> 赞同：1
> 
> 时间：2012-04-04T12:55:05.773
> 
> 标签：android, listview, notifications

我有两个字符串数组：

```
String[] name ={ “Sound 1″, “Soundname 2″, “Chainsaw!”};
int[] sounds = {R.raw.sound1, R.raw.sound2, R.raw.chainsaw}; 
```

和一个列表视图：

```
list.setOnItemClickListener(new OnItemClickListener() {

     public void onItemClick(AdapterView<?> parent, View view, int position, long id) {

         switch(position) {

            case 0: if(isplaying){audio.stop();} audio = MediaPlayer.create(context, R.raw.sound1); playSound(); 
                    break;

            case 1: if(isplaying){audio.stop();} audio = MediaPlayer.create(context, R.raw.sound2); playSound(); 
                    break;

            case 2: if(isplaying){audio.stop();} audio = MediaPlayer.create(context, R.raw.sound3); playSound(); 
                    break;

            case 3: if(isplaying){audio.stop();} audio = MediaPlayer.create(context, R.raw.sound4); playSound(); 
                    break;
                         }

           }

     }); 
```

我使用此功能将资源声音文件设置为通知：

```
 public boolean saveas(int ressound){  
 byte[] buffer=null;  
 InputStream fIn = getBaseContext().getResources().openRawResource(ressound);  
 int size=0;  

 try {  
  size = fIn.available();  
  buffer = new byte[size];  
  fIn.read(buffer);  
  fIn.close();  
 } catch (IOException e) {  
  // TODO Auto-generated catch block  
  return false;  
 }  

 String path="/sdcard/media/audio/ringtones/";  
 String filename="examplefile"+".ogg";  

 boolean exists = (new File(path)).exists();  
 if (!exists){new File(path).mkdirs();}  

 FileOutputStream save;  
 try {  
  save = new FileOutputStream(path+filename);  
  save.write(buffer);  
  save.flush();  
  save.close();  
 } catch (FileNotFoundException e) {  
     Toast.makeText(this, "ERRORE", Toast.LENGTH_SHORT).show();  
  return false;  
 } catch (IOException e) {  
     Toast.makeText(this, "ERRORE", Toast.LENGTH_SHORT).show(); 
  return false;  
 }      

 sendBroadcast(new Intent(Intent.ACTION_MEDIA_SCANNER_SCAN_FILE, Uri.parse("file://"+path+filename)));  

 File k = new File(path, filename);  

 ContentValues values = new ContentValues();  
 values.put(MediaStore.MediaColumns.DATA, k.getAbsolutePath());  
 values.put(MediaStore.MediaColumns.TITLE, "exampletitle");  
 values.put(MediaStore.MediaColumns.MIME_TYPE, "audio/ogg");  
 values.put(MediaStore.Audio.Media.ARTIST, "cssounds ");  
 values.put(MediaStore.Audio.Media.IS_RINGTONE, true);  
 values.put(MediaStore.Audio.Media.IS_NOTIFICATION, true);  
 values.put(MediaStore.Audio.Media.IS_ALARM, true);  
 values.put(MediaStore.Audio.Media.IS_MUSIC, false);  

 //Insert it into the database  
 this.getContentResolver().insert(MediaStore.Audio.Media.getContentUriForPath(k.getAbsolutePath()), values);  

 return true;  
} 
```

此函数由上下文菜单调用，该菜单在长按列表视图的项目后显示。该函数将像这样调用：

```
 saveas(R.raw.soundfile); 
```

我的问题是：如何通过单击列表视图的哪个项目来获取不同的 id 或 R.raw.soundfile 到 saveas 函数？

# wcf - wcf超时异常，在一台服务器上不规律发生

> ID：10011549
> 
> 赞同：1
> 
> 时间：2012-04-04T12:55:06.477
> 
> 标签：wcf, timeout

错误代码：“请求通道在 00:09:59.6320000 之后等待回复时超时。增加传递给 Request 调用的超时值或增加 Binding 上的 SendTimeout 值。”

此错误在调用 Wcf 服务方法时很少发生。不管是什么方法。我创建了返回简单字符串的测试方法。有时它会超时，有时它工作得很好。奇怪的是，当 WCF 服务在一台服务器上发布时（出于测试目的） - 没有超时。当我在另一台服务器（实时/公共）上发布它时，这些超时很少发生。如上所示，我已将超时设置为 10 分钟。

webconfig 设置应该是正确的，因为它适用于一台服务器。唯一的改变是IP地址。我知道这很难回答，而且有点模棱两可。我确定这个问题太高了，我无法解决，或者我犯了一个简单的错误，而且太明显了，我没有注意到。如果您能就这个问题给我一个指示或只是友好的建议，我将非常感激。我在这里在黑暗中拍摄。我感谢您的兴趣，您阅读到这里证明了这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T07:26:01.837

第一次调用服务时会发生这种情况吗？如果不是，但随后确实如此，可能是服务实例已被调用线程锁定 - 查看多个实例或允许并发使用，显​​然考虑到代码的线程安全要求

# php - 我可以用 PHP 编辑二进制（十六进制）文件，替换字符串并保存而不损坏二进制文件吗？

> ID：10011551
> 
> 赞同：4
> 
> 时间：2012-04-04T12:55:11.547
> 
> 标签：php, binary

我有一个小问题:)

1.  我有一个二进制文件 -executable- 我想编辑和替换一个字符串
2.  我用 PHP 打开文件，执行替换并保存
3.  保存的二进制文件已损坏。

如果我使用 SED 或任何十六进制编辑器执行此操作，则可以正常工作。

我可以使用 PHP 打开、编辑（替换字符串）和保存二进制文件吗？

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T13:06:38.377

在区分二进制文件和文本文件的系统（即 Windows）上，必须使用 fopen() 模式参数中包含的“b”打开文件。然后对文件使用 fread 和 fwrite。

```
<?php
$fp = fopen('binary_file.bin', 'w+b');
fwrite($fp, '1');
fclose($fp);
?> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-04T12:58:00.657

您可以逐字节读取文件，进行二进制比较和逐字节替换。编写看起来像 C 代码的 PHP 代码：D

# jquery - 验证失败时无法获取所需输入元素周围的红色矩形

> ID：10011555
> 
> 赞同：1
> 
> 时间：2012-04-04T12:55:17.680
> 
> 标签：jquery, asp.net-mvc-3, validation

首先，下面是我的两个模型类。

```
public class DataModel
    {
        [Required]
        public string                  SubscriptionName    { get; set; }

        [Required]
        public SubscriptionDateModel SubscriptionExpiry { get; set; }

        public DataModel()
        {
            SubscriptionExpiry = new SubscriptionDateModel();
        }
    }

    public class SubscriptionDateModel
    {
        public int Year { get; set; }
        public int Month { get; set; }

        public IEnumerable<SelectListItem> Months
        {
            get
            {
                var Months = new List<SelectListItem>();
                Months.Add(new SelectListItem() { Text = "-----", Value = "0" });
                string[] MonthList = new string[12] { "01", "02", "03", "04", "05", "06", "07", "08", "09", "10", "11", "12" };
                int MonthIndex = 0;
                for (var i = 0; i < MonthList.Length; i++)
                {
                    MonthIndex = i + 1;
                    var item = new SelectListItem()
                    {
                        Selected = (Month == MonthIndex),
                        Text = MonthList[i],
                        Value = MonthIndex.ToString()
                    };
                    Months.Add(item);
                }
                return Months;
            }
        }

        public IEnumerable<SelectListItem> Years
        {
            get
            {
                var Years = new List<SelectListItem>();
                Years.Add(new SelectListItem() { Text = "-----", Value = "0" });
                string[] YearList = new string[9] { "2012", "2013", "2014", "2015", "2016", "2017", "2018", "2019", "2020" };
                int YearIndex = 0;
                for (var i = 0; i < YearList.Length; i++)
                {
                    YearIndex = i + 1;
                    var item = new SelectListItem()
                    {
                        Selected = (Month == YearIndex),
                        Text = YearList[i],
                        Value = YearIndex.ToString()
                    };
                    Years.Add(item);
                }
                return Years;
            }
        }
    } 
```

然后我有一个名为 SubscriptionDate.cshtml 的编辑器模板

```
@model MvcApplication1.Models.SubscriptionDateModel
@Html.DropDownListFor(m => m.Year, Model.Years, new { id = "Year"})&nbsp;@Html.DropDownListFor(m => m.Month, Model.Months, new { id = "Month"})&nbsp; 
```

> 我在 Index.cshtml 中使用这个模板如下

```
@model MvcApplication1.Models.DataModel
@{
    ViewBag.Title = "Home Page";
Layout = "~/Views/Shared/_Layout.cshtml";

}

<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>
<h2>@ViewBag.Message</h2>
@using (Html.BeginForm())
{
    @Html.ValidationSummary(true, "Required field")
    <br />
     @Html.Label("Subscription Name: ")
    @Html.TextBoxFor(m => m.SubscriptionName)
    <br />
    @Html.Label("Subscription Expiry: ")
    @Html.EditorFor(m => m.SubscriptionExpiry, "SubscriptionDate")

    <input type="submit" value="Check" />
} 
```

最后在控制器中，我的操作方法定义如下。

```
 public ActionResult Index()
        {
            ViewBag.Message = "Welcome to ASP.NET MVC!";

            return View(new DataModel());
        }

        [HttpPost]
        public ActionResult Index(DataModel model)
        {
            if (ModelState.IsValid)
            {
                ViewBag.Message = "Hello world";
            }
            return View(model);
        } 
```

我的问题是，如果用户在没有输入任何信息的情况下点击 Check 按钮，我需要在两个输入元素周围获得那个红色矩形，但它没有发生。有什么我想念的想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T17:16:53.750

添加`!important`到输入验证错误类。Site.css 中的`input[type="text"]`具有更高的特异性，因此胜过验证边界。

```
.input-validation-error { 
   border: 1px solid #ff0000 !important; 
   background-color: #ffeeee; } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-04T13:00:41.050

你链接生成的`site.css`？在那里，有一些 css 类，比如`input-validation-error`，它提供了红色边框。

如果无效的输入字段获得了类，请使用 firebug 之类的工具进行检查`input-validation-error`。如果是这样，那就是 css 不匹配，您可能没有链接到该类`Site.css`或删除了`input-validation-error`该类。在这些情况下，在您的 css 中定义 css 类应该可以解决问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-04T13:05:36.580

还需要在页面中放入 Site.css 和 jQuery 库。

```
<link href="@Url.Content("~/Content/Site.css")" rel="stylesheet" type="text/css" />
<script src="@Url.Content("~/Scripts/jquery-1.5.1.min.js")"
type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.min.js")"
type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")"
type="text/javascript"></script> 
```

**更新：**

> 我需要在两个输入元素周围放置那个红色矩形，但它没有发生。

您可以在 CSS 中修复。Visual Studio 默认模板随附于 Site.css（包括 Intranet/Internet）下方。文本框的无效验证“红色”边框被“ `border: 1px solid #ccc`”覆盖。所以只需注释掉这一行，它应该没问题。

```
/* FORM LAYOUT ELEMENTS 
.....
input[type="text"], 
input[type="password"] {
    /* border: 1px solid #ccc; */
    padding: 2px;
    font-size: 1.2em;
    color: #444;
    width: 200px;
} 
```

# .net - VB.NET 如何检测迷宫中的碰撞

> ID：10011556
> 
> 赞同：1
> 
> 时间：2012-04-04T12:55:20.320
> 
> 标签：.net, vb.net, collision

我正在用 Visual Basic 构建一个迷宫应用程序。游戏依赖于两个变量，X 和 Y，它们是整数。有一个计时器基本上使整个表单无效以进行重绘。现在我的问题是，表格周围点缀着各种正方形和矩形。我将如何创建一个处理程序或类似的东西来检测表单绘制的正方形是否接触这些对象？

代码：

```
Public Class Form1
    Const W As Integer = 35 'Width
    Const H As Integer = 35 'Height

    Dim X As Integer
    Dim Y As Integer

    Private Sub Form1_KeyDown(ByVal sender As Object, ByVal e As System.Windows.Forms.KeyEventArgs) Handles Me.KeyDown
        'Handles if a key is pressed
        Select Case e.KeyCode
            Case Keys.Up
                Y -= 2
            Case Keys.Down
                Y += 2
            Case Keys.Left
                X -= 2
            Case Keys.Right
                X += 2

            Case Keys.Escape
                Me.Close()
        End Select
    End Sub

    Private Sub Form1_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load
        Me.Text = "Maze"
        TmrRedraw.Start()
        MsgBox("Press ESC to quit")
        Cursor.Position = Me.Location
    End Sub

    Private Sub TmrRedraw_Tick(ByVal sender As Object, ByVal e As System.EventArgs) Handles TmrRedraw.Tick
        If CollisionDetect() = False Then
            Me.Invalidate()
            CheckForWin()
        End If
    End Sub

    Private Function CollisionDetect()
        Dim Collision As Boolean = False

        'Here is where the problem lies 

        Return Collision
    End Function

    Private Sub Form1_Paint(ByVal sender As Object, ByVal e As System.Windows.Forms.PaintEventArgs) Handles Me.Paint
        e.Graphics.FillRectangle(Brushes.Blue, X, Y, W, H)

    End Sub

    Private Sub CheckForWin()
        Dim WinSqX As Integer = WinSquare.Location.X
        Dim WinSqY As Integer = WinSquare.Location.Y

        If X = WinSqX And Y = WinSqY Then

            TmrRedraw.Stop()
            MsgBox("Congratulations! You won!")
            Me.Close()
        End If

    End Sub
End Class 
```

哦，是的——玩家必须使用箭头键来改变 X 和 Y，当它重绘时，它会移动。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T13:59:56.010

在您的示例中，我认为不需要计时器，因为您只需要在用户按下键盘时使其无效。

对于对象碰撞，您需要一个具有矩形坐标的对象列表，然后只测试相交：

```
Public Class Form1
  Dim block As New Rectangle(0, 0, 35, 35)  
  Dim listOfThings As New List(Of Rectangle)

  Public Sub New()
    InitializeComponent()
    Me.DoubleBuffered = True

    listOfThings.Add(New Rectangle(40, 40, 35, 35))
  End Sub

  Private Sub Form1_KeyDown(ByVal sender As Object, ByVal e As KeyEventArgs) Handles MyBase.KeyDown
    Select Case e.KeyCode
      Case Keys.Up
        MoveBlock(0, -2)
      Case Keys.Down
        MoveBlock(0, 2)
      Case Keys.Left
        MoveBlock(-2, 0)
      Case Keys.Right
        MoveBlock(2, 0)
      Case Keys.Escape
        Me.Close()
    End Select
  End Sub

  Private Sub MoveBlock(ByVal moveX As Integer, ByVal moveY As Integer)
    block.X += moveX
    block.Y += moveY

    For Each r As Rectangle In listOfThings
      If r.IntersectsWith(block) Then
        MessageBox.Show("Game Over")
      End If
    Next

    Me.Invalidate()
  End Sub

  Private Sub Form1_Paint(ByVal sender As Object, ByVal e As PaintEventArgs) Handles Me.Paint
    e.Graphics.Clear(Color.White)

    For Each r As Rectangle In listOfThings
      e.Graphics.DrawRectangle(Pens.Red, r)
    Next

    e.Graphics.FillRectangle(Brushes.Blue, block)
  End Sub
End Class 
```

# java - 如何让两个 JPanel 监听同一个事件？

> ID：10011564
> 
> 赞同：4
> 
> 时间：2012-04-04T12:55:52.237
> 
> 标签：java, swing

我有一个`JFrame`and，里面`JFrame`有两个`JPanel`s。当我按下一个键时，它们都必须听这个键事件并采取行动。我想获取所有键盘事件，并将它们传递给两个`JPanel`s。你知道怎么做吗？

编辑：由于他们必须做不同的事情，我需要两个不同的听众，抱歉没有具体说明。

Edit2：我做了一个简单的代码来告诉你这个问题。当我按向上键时，`JPanel`显示的两个 s 都必须更改它们的字符串；在这段代码中，只有其中一个真正做出反应！

```
import java.awt.Color;
import java.awt.Font;
import java.awt.Graphics;
import java.awt.GridBagConstraints;
import java.awt.GridBagLayout;
import java.awt.event.ActionEvent;
import java.awt.event.KeyEvent;
import javax.swing.AbstractAction;
import javax.swing.ActionMap;
import javax.swing.InputMap;
import javax.swing.JComponent;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.KeyStroke;

/**
*
 * @author antonioruffolo
 */
public class TwoPanelsTest extends JFrame {

public TwoPanelsTest() {

    setDefaultCloseOperation(EXIT_ON_CLOSE);
    setResizable(false);
    setSize(800, 600);

    PanelTest panelTest1= new PanelTest();
    PanelTest panelTest2= new PanelTest();

    GridBagLayout layout= new GridBagLayout();
    this.setLayout(layout);

    GridBagConstraints c = new GridBagConstraints();

    c.ipadx = 220;
    c.ipady = 390;
    c.insets.right= 0;
    c.insets.left=30;
    layout.setConstraints(panelTest1, c);
    this.add(panelTest1);

    layout.setConstraints(panelTest2, c);
    c.ipadx = 220;
    c.ipady = 390;
    c.insets.right=250;
    c.insets.left=50;
    this.add(panelTest2);

    setVisible(true);
    setLocationRelativeTo(null);
    setTitle("Test");
    setFocusable(false);
}

private class PanelTest extends JPanel{

    private String string="I'm not called by the event";
    private InputMap inputmap;
    private ActionMap actionmap;

    public PanelTest(){
        setFocusable(false);
        setDoubleBuffered(true);

        this.setBackground(Color.WHITE);
        inputmap = getInputMap(JComponent.WHEN_IN_FOCUSED_WINDOW);
        inputmap.put(KeyStroke.getKeyStroke(KeyEvent.VK_UP, 0), "up");
        actionmap = getActionMap();
        actionmap.put("up", new ActionController(this));
    }

    public void setString(String string){
        this.string=string;
    }

    @Override
    public void paintComponent( Graphics g){
        super.paintComponent(g);

        Font infoFont= new Font("OCR A Std", Font.BOLD, 10);
        g.setFont(infoFont);
        g.drawString(string, 10, 50);
    }
}//PanelTest

private class ActionController extends AbstractAction{

    private PanelTest panel;

    public ActionController (PanelTest panel){
        this.panel=panel;
    }

    @Override
    public void actionPerformed(ActionEvent ae) {
        panel.setString("Action performed");
        panel.repaint();
    }

}

public static void main(String[] args) {
    TwoPanelsTest t = new TwoPanelsTest();
}
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-04T16:19:22.730

代替`KeyListener`，使用[*Key Bindings*](http://docs.oracle.com/javase/tutorial/uiswing/misc/keybinding.html)并[`Action`](http://docs.oracle.com/javase/tutorial/uiswing/misc/action.html)为每个面板提供不同的实现。通过使用`WHEN_ANCESTOR_OF_FOCUSED_COMPONENT`输入映射，两个面板都可以响应。

附录：因为搜索在找到有效的键绑定后结束，所以下面的示例将事件*转发*到 a 的元素`List<MyPanel>`，每个元素都可以通过 available 做出不同的响应`Action`。

```
import java.awt.EventQueue;
import java.awt.GridLayout;
import java.awt.event.ActionEvent;
import java.awt.event.KeyEvent;
import java.util.Arrays;
import java.util.List;
import javax.swing.AbstractAction;
import javax.swing.Action;
import javax.swing.BorderFactory;
import javax.swing.JComponent;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.KeyStroke;

/** @see http://stackoverflow.com/q/10011564/230513 */
public class TwoPanelsTest extends JFrame {

    private MyPanel one = new MyPanel("One");
    private MyPanel two = new MyPanel("Two");
    private List<MyPanel> list = Arrays.asList(one, two);

    public TwoPanelsTest() {
        super("TwoPanelsTest");
        this.setDefaultCloseOperation(EXIT_ON_CLOSE);
        JPanel panel = new JPanel(new GridLayout(0, 1, 10, 10));
        panel.setBorder(BorderFactory.createEmptyBorder(10, 10, 10, 10));
        panel.add(one);
        panel.add(two);
        panel.getInputMap(JComponent.WHEN_ANCESTOR_OF_FOCUSED_COMPONENT)
            .put(KeyStroke.getKeyStroke(KeyEvent.VK_UP, 0), "up");
        panel.getActionMap().put("up", new AbstractAction() {

            @Override
            public void actionPerformed(ActionEvent e) {
                for (MyPanel panel : list) {
                    panel.getAction().actionPerformed(e);
                }
            }
        });
        this.add(panel);
        this.pack();
        this.setLocationRelativeTo(null);
        this.setVisible(true);
    }

    private static class MyPanel extends JPanel {

        private String string = " will be updated though its action.";
        private Action action = new UpdateAction(this);
        private String name;
        private JLabel label;

        public MyPanel(String name) {
            this.name = name;
            this.label = new JLabel(name + string, JLabel.CENTER);
            this.setLayout(new GridLayout());
            this.setFocusable(true);
            this.add(label);
        }

        public Action getAction() {
            return action;
        }

        private void update() {
            label.setText(name + ": " + System.nanoTime());
        }

        private static class UpdateAction extends AbstractAction {

            private MyPanel panel;

            public UpdateAction(MyPanel panel) {
                this.panel = panel;
            }

            @Override
            public void actionPerformed(ActionEvent ae) {
                panel.update();
            }
        }
    }

    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {

            @Override
            public void run() {
                TwoPanelsTest t = new TwoPanelsTest();
            }
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-04T13:13:35.737

其中一种方法是使用[SwingUtilities for Java6](http://docs.oracle.com/javase/6/docs/api/javax/swing/SwingUtilities.html)中的方法（注意[SwingUtilities for Java7](http://docs.oracle.com/javase/7/docs/api/javax/swing/SwingUtilities.html)有一些更改，但在这种情况下并不重要）可以重定向、分发来自[Standard Swing Listeners的多个事件，](http://docs.oracle.com/javase/tutorial/uiswing/events/index.html)[关于重定向鼠标](https://stackoverflow.com/a/9967953/714968)的简单示例从一个容器到另一个容器的[事件，](https://stackoverflow.com/a/9967953/714968)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-04T12:58:45.510

您应该创建一个`XXListener`实现并将该侦听器添加`.addXXListener`到您需要的所有组件中。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-04T13:00:39.690

您可以为此使用观察者模式。 [http://en.wikipedia.org/wiki/Observer_pattern](http://en.wikipedia.org/wiki/Observer_pattern)

```
MyKeyEventListener listener = new MyKeyEventListener();
JPanel one = new JPanel();
one.addKeyListener(listener);//method might be wrong
JPanel two = new JPanel();
two.addKeyListener(listener);
listener.addObserver(one);
listener.addObserver(two); 
```

# php - 使用批量插入插入的文档数

> ID：10011568
> 
> 赞同：1
> 
> 时间：2012-04-04T12:56:09.170
> 
> 标签：php, mongodb

您能否告诉是否可以使用批量删除来获取插入文档的数量？对于某些人来说，因为 batchInsert 它总是返回： array 'err' => null 'n' => int 0 'ok' => float 1

使用 mongodb shanty 的代码是这样的：

```
$result = Model_Mongodb::insertBatch($importData, array('safe' => true)); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T15:43:00.907

不幸的是，MongoDB 不返回插入操作插入的文档数。这是一个已知问题 - 请参阅[https://jira.mongodb.org/browse/SERVER-4381](https://jira.mongodb.org/browse/SERVER-4381)，如果这对您的用例很重要，请投票支持该问题。

但是，我会注意，如果您使用`insertBatch`安全模式并且没有得到错误结果，您可能会认为所有文档都已成功插入。

**编辑**（回答评论中的问题）：

1.  默认情况下，如果出现错误，批量插入将停止（并在返回结果中返回错误信息）。您可以在 MongoDB 2.0+ 中使用标志覆盖此行为`continueOnError`，在这种情况下，返回结果将仅提供有关最后一个错误的信息；不会报告任何早期的错误。

2.  不，您不能进行批量更新插入。要执行 upsert（如果丢失则创建，否则更新），您必须使用将标志设置为 true的`update`方法。`upsert`

3.  这张票并不是严格意义上的`batchInsert`，不——所有`insert`命令当前在`getLastError`结果中都返回 n==0 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-15T09:06:05.553

我知道我的回答可能有点晚了——但谁知道呢，它可以帮助别人。

我找到了一种获取插入文档数量的黑客方法，它是这样的：

1-计数文件。
2- BatchInsert()...
3- 再次计数文档。
4- 用第 1 步减去第 3 步的结果

当然，为了有效地重用这种方法，我不得不放入一个函数，这增加了一点复杂性。

此函数的好处是它返回插入文档的*实际*数量，从而消除了删除的重复文档（使用`ensureIndex`and `dropDups`）和由于错误等而未插入的文档......

这是代码::

```
/**
 * A hack for batchInsert() function to count inserted documents.
 * PHP 5.3+ is required for callback functions.  

 * @param MongoDBCollection $collection
 * @param  callable $batchInsertFunction The actual batchInsert code.
 * @return int Number of inserted documents.
 */
 function countedBatchInsert($collection, $batchInsertFunction)
{
    //Count current documents (before inserting)
    $countDocuments['before'] = $collection->count();

    //Execute batchInsert
    $batchInsertFunction();

    //Count documents again.
    $countDocuments['after'] = $collection->count();

    //Simple arithmetic operation to determine the number of inserted documents.
    return $countDocuments['after'] - $countDocuments['before'];

} 
```

这是一个例子：

```
/*Example*/

//Specify collection.
$collection = $this->myDatbase->myCollection;
//Data to batchInsert
$batchData = /*Array of stuff*/
//Create callback function.
$batchInsertFunction = function() use ($collection, $batchData)
{
    //Do the actual batchInsert
    $collection->batchInsert($batchData, $myOptions);
}
//call countBatchInsert().
countBatchInsert($collection, $batchInsertFunction); 
```

# c++ - C++ 编译时条件运行时语句

> ID：10011569
> 
> 赞同：1
> 
> 时间：2012-04-04T12:56:09.737
> 
> 标签：c++, template-meta-programming, boost-mpl

有没有办法在编译时决定两个运行时代码路径之一？我知道可以使用函数重载来完成这一壮举，但随后代码大小会增加，因为我的两个函数都被编译并链接到程序中。有没有办法避免这种大小的开销？

本质上，我想做的是：

```
#include <boost/mpl/if.hpp>
#include <boost/type_traits/is_abstract.hpp>

template <class T>
    class X
{
    public:
        void copy_t(T &old_t)
        {
            //
            // if T is abstract, (meaning that t is a pointer)
            //
            t = old_t.clone();

            //
            // else
            //
            t = old_t;
        }   

    private: 
        typename boost::mpl::if_<boost::is_abstract<T>, T *, T>::type t;
}; 
```

我知道的唯一方法涉及重载成员函数：

```
template <class T>
    class X
{   
    public:
        void copy_t(T &old_t)
        {   
            t = make_copy(old_t, t); 
        }   

    private:
        T *make_copy(T &old_t, T *t) 
        {   
            return old_t.clone();
        }   

        T &make_copy(T &old_t, T &t) 
        {   
            return old_t;
        }   

        typename boost::mpl::if_<boost::is_abstract<T>, T *, T>::type t;
}; 
```

但是现在，两个`make_copy`成员函数被编译并链接到程序中，尽管`X`可能只使用抽象类模板参数实例化，在这种情况下，只需要其中一个。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T13:00:46.810

从您的示例中，看起来这些函数是类模板的成员。如果是这样，它们只有在实际使用时才会被实例化；如果重载决议总是选择其中之一，则永远不会实例化另一个。

这是许多元编程技术的关键规则。在这种情况下，未实例化的函数如果被实例化会导致编译时错误，这种情况并不少见。

# wpf - 在组合框中排列文本

> ID：10011576
> 
> 赞同：0
> 
> 时间：2012-04-04T12:56:34.043
> 
> 标签：wpf, silverlight, xaml, combobox

我尝试创建一些正确的 XAML**以将文本排列在`ComboBox`右侧**，但我不能。

这是我的 XAMl ......任何线索我错过了什么？谢谢！

```
 <ComboBox Height="25"
           HorizontalAlignment="Left" 
           ItemsSource="{Binding NonArchivedSequences}"  
           SelectedItem="{Binding SelectedSequence}"
           Margin="0,0,0,4" 
           Name="cbSequences" 
           VerticalAlignment="Top" 
           Width="504"                   
           HorizontalContentAlignment="Stretch" 
           SelectionChanged="cbSequences_SelectionChanged"
           Grid.Column="1">
            <ComboBox.Resources>
                <DataTemplate x:Key="DataTemplateSequenceData">
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>
                        <TextBlock Margin="4,2,2,4"
                                   TextWrapping="Wrap"
                                   Text="{Binding Interval}" 
                                   d:LayoutOverrides="Width, Height"
                                   VerticalAlignment="Center" 
                                   HorizontalAlignment="Left" />
                        <TextBlock Margin="4,2,2,4"
                                   TextWrapping="Wrap"
                                   Text="{Binding Name}" 
                                   d:LayoutOverrides="Width, Height" Grid.Column="1"
                                   VerticalAlignment="Center"
                                   HorizontalAlignment="Left" />
                    </Grid>
                </DataTemplate>
            </ComboBox.Resources>
            <ComboBox.ItemTemplate>
                <StaticResource ResourceKey="DataTemplateSequenceData"/>
            </ComboBox.ItemTemplate>
        </ComboBox> 
```

![在此处输入图像描述](../Images/723dd6c5479010555b8b49cee36edcf0.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T12:57:56.023

也许 Horizo​​nalAllalignment="Right" 你已经离开了

# java - 扩展 Log4JLogger 并在运行时调用子类

> ID：10011579
> 
> 赞同：0
> 
> 时间：2012-04-04T12:56:41.737
> 
> 标签：java, inheritance, log4j

我目前正在使用`SocketAppender`Log4J 并且在将数据传递到远程主机时遇到了一些问题，特别是在丢失`LocationInfo`（类名、行号等）方面。我所做的如下：

```
import org.apache.commons.logging.impl.Log4JLogger;

public class MyLogger extends Log4JLogger  
{  
    ...
       public void debug(Object message)  
       {   
           String extra = "Extra!";  
           super.debug(message + extra);
       }   
    ...
} 
```

在运行时如何将以下代码更改为抓取`MyLogger`而不是`Log4JLogger`？

```
private static Log logger = LogFactory.getLog(Test.class); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T13:06:52.033

您不必扩展 Logger 而是实现您自己的 Appender 或扩展您需要的基本 Log4J Appender。例如，您可以扩展[AppenderSkeleton](http://logging.apache.org/log4j/1.2/apidocs/org/apache/log4j/AppenderSkeleton.html)。

我无法想象你为什么需要它。另一种可能性是使用 Log4J [Mapped Diagnostic Context](http://veerasundar.com/blog/2009/11/log4j-mdc-mapped-diagnostic-context-example-code/)。

# mysql - 这些统计数据告诉我什么？

> ID：10011586
> 
> 赞同：0
> 
> 时间：2012-04-04T12:57:24.513
> 
> 标签：mysql, performance

我今天进行了测试。查看 innodb 表上插入性能的变体，该表为空，源文件具有 10K 记录。

我使用“ mysql -uuname -pxxxxxx -Ddbanme < insert_file.sql ”

以下是不同的统计数据。

```
 BINARY LOGGING IS ENABLED
    innodb_flush_log_trx_commit = 1     Time: 25 minutes
    innodb_flush_log_trx_commit = 2     Time: 4 seconds

    BINARY LOGGING IS DISABLED
    innodb_flush_log_trx_commit = 1     Time: 6 minutes
    innodb_flush_log_trx_commit = 2     Time: 3 seconds 
```

我不确定从中可以理解什么。请分享您对此测试细节的看法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T13:19:58.073

看看[here，](http://dev.mysql.com/doc/refman/4.1/en/innodb-parameters.html#sysvar_innodb_flush_log_at_trx_commit)您会看到`innodb_flush_log_trx_commit`1 MySQL 何时更频繁地写入刷新日志。正如您在文档中看到的，它必须为 1 才能实现 ACID 合规性。在您的情况下，当从文件导入数据时，如果您的值为 1 并且某些内容中断，则您的整个事务将失败（表将保持为空），值为 2，如果某些内容中断，您的表将包含成功的记录（在导入之前失败的）。

关于`BINARY LOGGING`，当没有二进制日志记录时，您的插入工作得更快。如果您没有从属服务器并且不想从主服务器复制命令，则不需要二进制日志记录，因此您可以将其关闭，因为这会提高您的性能。

# java - Spring，在异常或 404 上显示发生错误的视图

> ID：10011587
> 
> 赞同：0
> 
> 时间：2012-04-04T12:57:26.243
> 
> 标签：java, spring, jakarta-ee, spring-mvc

我有

```
@Controller
@RequestMapping(value="core/*")
public class CoreController {

    public static String exceptionOccurredView = "/core/exceptionOccurred";

    @ExceptionHandler(Throwable.class)
    public ModelAndView exceptionOccurred(Throwable exception, HttpServletResponse response, HttpServletRequest request) {
        ModelAndView mv = new ModelAndView();
        mv.setViewName ( exceptionOccurredView );
        mv.addObject   ( "requestedUrl", Core.getCurrentUrlWithParams() );
        mv.addObject   ( "exception", exception );

        System.out.println( "aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa" + Core.getCurrentUrlWithParams() );
        return mv;
    }   

    @RequestMapping
    public void test0(HttpServletResponse response, HttpServletRequest request) throws IOException {
        throw new IOException();
    } 

} 
```

这适用于核心 url 下发生的所有异常。

如果我去网址

**本地主机：8080/core/test0**

显示错误页面。另外，如果我去：

**本地主机：8080/核心/actionDoesNotExist**

但如果我使用：

**本地主机：8080/controllerDoesNotExist/test0**

没有显示错误，因为注释 @ExceptionHandler 仅对每个控制器有效。

那么如何实现一个全局的、非控制器附加的异常/错误处理程序呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T13:14:28.767

一种方法是使用`HandlerExceptionResolver`.

例如，要使用 `SimpleMappingExceptionResolver，请将其放在您的上下文中：

```
<bean class="org.springframework.web.servlet.handler.SimpleMappingExceptionResolver">
    <property name="exceptionMappings">
      <map>
         <entry key="IOException" value="io-error" />
      </map>
    </property>
    <property name="defaultErrorView" value="default-error"/>
</bean> 
```

这样，您就可以定义从异常到错误页面的全局映射。如果您需要一些更复杂的错误处理，请实现您自己的解析器。

# php - PHP 数组变量被赋值

> ID：10011592
> 
> 赞同：0
> 
> 时间：2012-04-04T12:57:36.180
> 
> 标签：php, codeigniter

我对 PHP 和 Codeigniter 还很陌生，所以我确信这很简单。

我有以这种格式存储的联系方式，其中类型是（1、2、3、4）映射到（facebook、mobile、bbm、msn、twitter）：

```
ID | USERID | TYPE | VALUE
1  |    8   |  2   | 076773635 
```

我已经建立了一个模型来访问这些联系方式，可能没有，或者最多每种类型都有一个；

```
function getContactDetails($userid) {
    $query = $this->db->query("SELECT * FROM who_user_contact_info WHERE userid=".$userid);

    foreach ($query->result() as $row)
    {
        switch ($row->type) {
            case 1:
                $contact['facebook'] = $row->value;  
            case 2:
                $contact['mobile'] = $row->value; 
            case 3:
                $contact['bbm'] = $row->value; 
            case 4:
                $contact['msn'] = $row->value;  
            case 5:
                $contact['twitter'] = $row->value; 
        }

    }

    return $contact;
} 
```

然后我的控制器将这些数据传递给我的视图；

```
<h3>Contact Info</h2>
<?php   
    echo "Facebook: ". $facebook ."<br />";
    echo "mobile:".  $mobile ." <br />";
    echo "bbm:".  $bbm ." <br />";
    echo "msn:".  $msn ." <br />";
    echo "Twitter:".  $twitter ." <br />";
?> 
```

这似乎几乎可以工作，但肯定有一个错误，例如说类型 3 和 5 不存在，mobile 和 twitter 不应该被分配任何东西！然而在我的输出中，它给出了之前的值，例如 bbm=mobile 和 twitter=msn。

当案例没有设置它们时，这些数组怎么可能存在？还是我的逻辑错了？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-04T13:00:50.253

您不需要在每种情况下都休息一下吗？

```
case 1:
$contact['facebook'] = $row->value;  
break; 
```

ETC

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T13:02:07.600

`break;`设置变量后，您在每种情况下都需要 a 。

# java - RegExpr 与否定字符类混淆？

> ID：10011597
> 
> 赞同：0
> 
> 时间：2012-04-04T12:57:52.267
> 
> 标签：java, regex, pattern-matching

我有以下方法：

```
protected BigDecimal stringToBigDecimal(String value) throws ParseException
{
    if (Pattern.matches("[\\d,.]+", value))
    {
        Number n = NumberFormat.getInstance().parse(value);

        return new BigDecimal(n.doubleValue());
    }
    else
    {
        throw new ParseException("Invalid String", -1);
    }
} 
```

此值引发异常（如预期），因此此 regExpr 有效：

```
String wrongAmount = "1,U35,345.43"; 
```

但是当我尝试这个时：

```
protected BigDecimal stringToBigDecimal(String value) throws ParseException
{
    if (Pattern.matches("[\\D&&[^.,]]+", value))
    {
        throw new ParseException("Invalid String", -1);
    }

    Number n = NumberFormat.getInstance().parse(value);

    return new BigDecimal(n.doubleValue());
} 
```

没有抛出异常，但为什么呢？首先，我认为“except for”表达式存在逻辑问题，所以我用这种模式尝试了这个值：

```
String wrongAmount = "1U3534543";

protected BigDecimal stringToBigDecimal(String value) throws ParseException
{
    if (Pattern.matches("[\\D]+", value))
    {
        throw new ParseException("Invalid String", -1);
    }

    Number n = NumberFormat.getInstance().parse(value);

    return new BigDecimal(n.doubleValue());
} 
```

...但这不匹配？我对“非数字表达”有什么理解错误`\\D.`。该值包含一个“U”，为什么它不匹配？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T13:08:12.167

让我们剖析您的每一种模式：

```
Pattern.matches("[\\d,.]+", value) 
```

匹配由一个或多个数字、逗号和点组成的任何字符串。

```
Pattern.matches("[\\D&&[^.,]]+", value) 
```

你不能像你在这里做的那样“组合”字符类。你真正想说的`[\\D&&[^.,]]`是“匹配任何非数字字符，*除了*点和逗号。” 编写该正则表达式的正确方法是：

```
[^\\d,.]   # match anything but digits, comma and dot 
```

最后但并非最不重要的：

```
Pattern.matches("[\\D]+", value) 
```

这意味着：“匹配一个非空字符串*完全*由非数字字符组成。”

`Pattern.matches()`尝试将*整个*字符串与正则表达式进行匹配。`Matcher.find()`如果您尝试仅匹配字符串的一部分，则希望使用。

最后，您误解了`+`工作原理。`+`是一个量词，表示“1 或更多”。它没有做你认为它正在做的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T13:10:22.213

你没有正确地否定你的表达。

在第一个示例中，您说“如果我的输入仅匹配数字、逗号和点”，那么就可以了。

在您的第二个示例中（我不确定它是否符合您的意思，但那是另一回事），您的意思是说“如果输入仅匹配非数字、非逗号、非点字符”，但您的输入包含数字，所以匹配不起作用。

在你的最后一个例子中，同样的事情，你说“如果输入只匹配非数字字符”但是你的输入中再次有数字

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T13:18:36.857

我想你想要这个：

```
if (value.matches(".*[^\\d.,].*")) {
    throw new ParseException("Invalid String", -1);
} 
```

注意添加`".*"`到前面和后面，因为仅当模式与*整个*输入匹配时才`String.matches()`返回。`true`

 *但是我会将其更改为否定匹配，因为它更易于阅读：

```
if (!value.matches("[\\d.,]+")) {
    throw new ParseException("Invalid String", -1);
} 
```*

# c# - 如何识别活动的子窗体并触发一个通用方法（每个子窗体中都存在）？

> ID：10011600
> 
> 赞同：1
> 
> 时间：2012-04-04T12:57:57.947
> 
> 标签：c#, .net, winforms, mdi

我有一个主（MDI）表单和大约 70 个子表单，它们在运行时初始化并显示。一次可能会显示超过 1 个子窗体。在每个子窗体中都有一个名为“OK”的按钮及其事件“btnOk_click(object sender, EventArgs e)”。在父窗体中有一个名为“Save”的按钮，如果我们单击它，在运行时中的 activeMDI子窗体事件 (btnOk_click) 应该被触发。

请在这个问题上帮助我。

目前我通过使用以下代码来解决这个问题

```
 switch (ActiveMdiChild.GetType().Name)
            {
                case "frmSalesOrder":
                case "frmPurchaseOrder":
                case "frmSizeRatio":
                    break;
                case "frmUserGroup":
                    var _frmUserGroup = (frmUserGroup)this.ActiveMdiChild;
                    _frmUserGroup.btnOK.PerformClick();
                    _frmUserGroup = null;
                    break;
                case "frmUser":
                    var _frmUser = (frmUser)this.ActiveMdiChild;
                    _frmUser.btnOK.PerformClick();
                    _frmUser = null;
                    break; 
```

谢谢约瑟夫·J

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-04T13:33:04.400

接口在这里真的可以帮助你：

```
interface IChildSave {
  void SaveAction();
} 
```

然后在您的每个子表单中，实现它：

```
public partial class Form1 : Form, IChildSave {

  public void SaveAction() {
    saveButton.PerformClick();
  }

  private void saveButton_Click(object sender, EventArgs e) {
    // save routine
  }
} 
```

那么您的 MDI Parent 表单将不再需要 Switch 语句：

```
if (this.ActiveMdiChild is IChildSave) {
  ((IChildSave)this.ActiveMdiChild).SaveAction();
} else {
  MessageBox.Show("Child Form does not implement IChildSave.");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T13:17:17.153

有很多方法可以做到这一点。你的就是其中之一（但很难用 60 种表格来跟上！）..

无论如何，您可以让每个孩子订阅一个在您按下保存时引发的事件。

# tomcat - 从 Tomcat 上下文中提供文件

> ID：10011602
> 
> 赞同：3
> 
> 时间：2012-04-04T12:58:00.370
> 
> 标签：tomcat, web-applications, contextpath

我有一个 Web 应用程序作为 WAR 文件部署到 Tomcat 6。在应用程序中，我想从该上下文中提供目录中的文件。例如，我部署`myapp.war`到`/mydir/webapps`并通过以下方式访问我的应用程序：

```
http://myhost:myport/myapp/ 
```

我想通过以下方式提供文件：

```
http://myhost:myport/myapp/files/somefile.txt 
```

我怎样才能做到这一点？到目前为止，我只能在应用程序上下文**之外提供文件：**

```
http://myhost:myport/files/somefile.txt 
```

文件位于`/mydir/webapps/files`而不是`/mydir/webapps/myapp/files`目录中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T18:35:24.230

使用指向外部目录的子上下文。

根据示例中的路径，您要添加以下文件：$CATALINA_BASE/<enginename>/<hostname>/myapp#files.xml（通常为 $CATALINA_BASE/Catalina/localhost/myapp#files.xml

有以下内容

```
<Context docBase="/mydir/webapps/files" /> 
```

请注意，为了安全运行，/mydir/webapps/files 必须位于启用了 autoDeploy 的任何主机的 appBase 之外。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-04T13:09:41.420

您是否已 `<display-name>myapp</display-name>` 在 /mydir/webapps/myapp/META-INF/web.xml 中设置？

# c# - 同一解决方案 Visual Studio 中每个项目的不同测试设置

> ID：10011606
> 
> 赞同：6
> 
> 时间：2012-04-04T12:58:02.633
> 
> 标签：c#, visual-studio, unit-testing

****工具：****

1.Visual Studio 2010

2.Visual Studio 单元测试。

****故事：****

我们开发了一个包含**多个项目**的解决方案，每个项目都有一个测试项目。每个测试项目都有它需要的**部署项**。这就是为什么每个测试项目都有**自己的测试设置**。

**问题：**

我希望能够一次运行所有测试项目以获取所有解决方案的统计信息（代码覆盖率等）。

有没有办法在不将所有测试设置合并为一个的情况下做到这一点（这个解决方案可能有问题）？

**已编辑**

任何其他测试所有解决方案的解决方案都将受到高度赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T04:24:18.013

不幸的是，不支持项目特定的测试设置。我经常采用的一种解决方案是将所有项目的输出文件夹更改为一个公共位置。这也是构建性能优化，因为依赖项不会被多次复制。

此策略简化了部署策略，因为我的所有测试项目都写入公共文件夹（即 TestData），并且我可以添加单个部署项来复制整个目录以进行测试运行。

# ruby-on-rails - 仅从某个 ip 进行身份验证可能吗？

> ID：10011609
> 
> 赞同：1
> 
> 时间：2012-04-04T12:58:29.323
> 
> 标签：ruby-on-rails, ruby-on-rails-3, authentication

我正在尝试基于某个 ip 进行身份验证，如果 ip 不正确，则不应允许访问。

我在 application_controller 中使用：

```
before_filter :authenticate
  def authenticate
    authenticate_or_request_with_http_basic do |username, password|
      username == "admin" && password == "talkmate"
    end
  end 
```

如果 ip 不是特定值，添加检查 IP 并禁止访问的正确方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T13:00:32.610

检查`request.remote_ip`。如果不正确，则呈现错误消息，或重定向到错误页面（或其他内容）。

# python - python curl urllib2源接口地址

> ID：10011613
> 
> 赞同：0
> 
> 时间：2012-04-04T12:58:47.337
> 
> 标签：python, linux

我正在使用 urllib2 使用代理服务器发出 http 请求，如何在发出类似于 curl 的请求时使用源接口 ipaddress

curl --interface xx.xx.xx.xx -x yy.yy.yy.yy:8080 www.google.com

```
#!/usr/bin/env python

import urllib2

proxy = urllib2.ProxyHandler({'http': 'xx.xx.xx.xx:8080'})
opener = urllib2.build_opener(proxy)
urllib2.install_opener(opener)
result = urllib2.urlopen('http://www.google.com')

for line in result:
    print line.rstrip("\n") 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T16:52:00.643

有一个类似的答案[可能对您有所帮助](https://stackoverflow.com/a/1150423/315306)。无需在此处粘贴答案，但基本上 API 不会给您任何钩子，因此您必须深入 API 堆栈并修改源代码或猴子补丁代码

```
import socket
true_socket = socket.socket
def bound_socket(*a, **k):
    sock = true_socket(*a, **k)
    sock.bind((sourceIP, 0))
    return sock
socket.socket = bound_socket 
```

我希望我已经理解了你的问题。

# ios - 在哪里可以找到用于创建 iPad 应用程序的 Delphi 资源？

> ID：10011615
> 
> 赞同：6
> 
> 时间：2012-04-04T12:58:49.770
> 
> 标签：ios, delphi, delphi-xe2, firemonkey

我一直在使用 Delphi（之前的 Turbo Pascal）并且一直是 Windows 专家。我的妻子为我的生日买了一台新 iPad，昨晚我第一次使用它。哇！...我不知道那东西有多上瘾。

所以，现在我需要考虑为这款 ​​iPad 编写一两个应用程序。我猜我需要从 Delphi 2010 升级到 Delphi XE2，并且我正在寻找关于开发和分发 iPad 应用程序的良好 Delphi 资源。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-04T14:19:06.030

如果您想采用 Delphi 方式，则必须升级到 XE2。Google for (FireMonkey iOS)。

一些资源：

[http://blogs.embarcadero.com/ao/2011/10/26/39188](http://blogs.embarcadero.com/ao/2011/10/26/39188)

[http://www.embarcadero.com/coderage/sessions](http://www.embarcadero.com/coderage/sessions)

[http://www.andreanolanusse.com](http://www.andreanolanusse.com)

[http://www.felix-colibri.com/papers/firemonkey/firemonkey.html](http://www.felix-colibri.com/papers/firemonkey/firemonkey.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-04T14:55:51.083

Bob Swart 有一本名为“ [*Delphi XE2 native iPhone/iPad Development*](http://www.ebob42.com/courseware/) ”的课程手册。它不是免费的，我没有库存，但我可以推荐它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-04T13:09:22.163

查看：

[http://op4js.optimalesystemer.no/](http://op4js.optimalesystemer.no/)

和

[http://www.unigui.com](http://www.unigui.com)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-04T13:45:04.823

我认为要为 iPad 编译程序，您要么需要 Delphi Prism，它会创建一个可以在 Mono（跨平台 .NET 框架）中运行的 .NET 应用程序。

或者，如果您想编写本机代码，我认为您将需要一台 Mac ~~Book~~来编译最后一步并将其发布到您的 iPad。我认为 Delphi XE2 没有包含在 Windows 中运行并为 iPad 创建可执行文件的编译器。iOS 的编译器（Delphi 2 附带的 FreePascal 编译器）需要在 Mac 上运行。

# php - 计时器上的随机报价脚本？

> ID：10011620
> 
> 赞同：0
> 
> 时间：2012-04-04T12:59:07.803
> 
> 标签：php, random, timer, timer-jobs

嗨，我有这个基本的随机报价脚本，但我希望它以数组的形式输出页面，即代替“echo $quote”，使用“include('text.php, text2.php, text3\. php');" 等等

不太确定该怎么做。有任何想法吗？

我还希望计时器成为突出的选择功能，以便它从循环的列表中进行选择，而不是随机拉出。

谢谢 ：）

```
<?php
$cachefile = './current_t_id';
$time = $id = null; 
$change_every = 3600; 
include('text.php');

if(is_file($cachefile)) {
list($time, $id) = explode(' ', file_get_contents($cachefile));
}

if(!$time || time() - $time > $change_every) {
srand ((double) microtime() * 100000);
$id = rand(0,count($quotes)-1);
file_put_contents($cachefile, time().' '.$id); // update cache
}

echo ($quotes[$id]);
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T13:13:51.090

将您的页面保存在一个数组中。然后用 foreach 遍历它。将 $siteId 替换为应包含的站点编号

```
$pages = array(1 => 'text.php1', 2 => 'text.php2', 3 => 'text3.php', 4 => 'text4.php');

foreach($pages as $pagekey => $page){
    if($pagekey == $siteId){
        include($page);
    }
} 
```

# python - 探索迷宫（使用 python 2.7）

> ID：10011621
> 
> 赞同：0
> 
> 时间：2012-04-04T12:59:14.790
> 
> 标签：python

除了一步之外，我已经完成了我的所有作业。

我以不同的方式做到了，但它以某种方式给出了正确的答案。无论如何，我必须探索一个迷宫，所以我一路走来，一切都完全正确，除了这个任务的一部分（Q COMMAND）。

我需要使用字符串方法`.upper()`

2.2.6 顶级界面 `interact()`是定义文本基础用户界面的顶级功能，如介绍中所述。请注意，当用户退出或找到完成方块时，交互功能应该退出。

```
def interact():
    mazefile = raw_input('Maze File: ')
    maze = load_maze(mazefile)
    position = (1, 1)
    poshis = [position]

    while True:
        #print poshis, len(poshis)
        print 'You are at position', position
        command = raw_input('Command: ')
        #print command

        if command == '?':
            print HELP
        elif command == 'N' or command == 'E' or command == 'S'or command == 'W':
            mov = move(maze, position, command)
            if mov[0] == False: #invalid direction
                print "You can't go in that direction" 
            elif mov[1] == True:#finished
                print 'Congratulations - you made it!'
                break
            else: #can move, but not finished
                position = mov[2]
                poshis.append(position) 

        elif command == 'R': # reseting the maze to the first pos
            position = (1, 1)
            poshis = [position]
        elif command == 'B': # back one move
            if len(poshis) > 1:
                poshis.pop()
                position = poshis[-1]

        elif command == 'L': # listing all possible leg dir
            toggle = 0
            result = ''
            leg_list = get_legal_directions(maze, poshis[-1])
            for Legal in leg_list:
                if toggle:
                    result += ', '
                    result += Legal
                else:
                    result += Legal
                if not toggle:
                    toggle = 1
            print result

        elif command == 'Q': #quiting 
            m = raw_input('Are you sure you want to quit? [y] or n: ')
            if m == 'y':
                break

            #print 'Are you sure you want to quit? [y] or n: '
            #if raw_input == 'y':
              #  break

        else: #invalid input
            print 'Invalid Command:', command 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T15:23:50.607

你的问题不是特别清楚，但我猜“问题”是如果用户在被问及是否确定要退出时回答“Y”而不是“y”，那么循环将继续.

如果这是问题所在，您应该只替换该行：

```
if m == 'y':
    break 
```

和：

```
if m.upper() == 'Y':
    break 
```

因为无论用户键入“y”还是“Y”，循环仍然会被打破。

# sql - 具有对等关系的递归查询

> ID：10011627
> 
> 赞同：5
> 
> 时间：2012-04-04T12:59:32.040
> 
> 标签：sql, sql-server, recursive-query

假设有一张关系表（entity_id、relationship、related_id）

```
1, A, 2     
1, A, 3      
3, B, 5 
1, C, null 
12, C, 1 
100, C, null 
```

我需要一个可以提取所有相关行的查询。例如，如果我查询 entity_id = 1，则应拉出以下行

```
1, A, 2     
1, A, 3      
3, B, 5 
1, C, null 
12, C, 1 
```

实际上，如果我查询 entity_id = 1、2、3、5 或 12，结果集应该是相同的。

这与标准的经理-雇员范式不同，因为没有层次结构。关系可以朝任何方向发展。

* * *

**编辑** 迄今为止发布的答案都没有奏效。

我能够想出一个可行的解决方案。

我会将解决方案归功于能够将这个怪物清理成更优雅的东西的人。

```
with tab as ( 
-- union for reversals
 select id, entity_id, r.related_id, 1 level
 , cast('/' + cast(entity_id as varchar(1000)) + '/'  as varchar(1000)) path 
  from _entity_relation r 
  where not exists(select null from _entity_relation r2 where r2.related_id=r.entity_id) 
    or r.related_id is null 
 union
 select id, related_id, r.entity_id, 1 level
 , cast('/' + cast(related_id as varchar(1000)) + '/' as varchar(1000)) path 
  from _entity_relation r 
  where not exists(select null from _entity_relation r2 where r2.related_id=r.entity_id) 
    or r.related_id is null 

-- create recursive path
union all 
 select r.id, r.entity_id, r.related_id, tab.level+1
 , cast(tab.path + '/' + cast(r.entity_id as varchar(100)) + '/' + '/' + cast(r.related_id as varchar(1000)) + '/' as varchar(1000)) path 
  from _entity_relation r 
  join tab 
  on tab.related_id = r.entity_id   
) 

select x.id
    , x.entity_id
    ,pr.description as relation_description
    ,pt.first_name + coalesce(' ' + pt.middle_name,'') + ' ' + pt.last_name as relation_name
    ,CONVERT(CHAR(10), pt.birth_date, 101) as relation_birth_date   
from (

select entity_id, MAX(id) as id from (
select distinct tab.id, entity_id
from tab 
join( 
    select path 
    from tab  
    where entity_id=@in_entity_id
) p on p.path like tab.path + '%' or tab.path like p.path + '%'
union
select distinct tab.id, related_id
from tab 
join( 
    select path 
    from tab  
    where entity_id=@in_entity_id
) p on p.path like tab.path + '%' or tab.path like p.path + '%'
union
select distinct tab.id, entity_id
from tab 
join( 
    select path 
    from tab  
    where related_id=@in_entity_id
) p on p.path like tab.path + '%' or tab.path like p.path + '%'
union
select distinct tab.id, related_id
from tab 
join( 
    select path 
    from tab  
    where related_id=@in_entity_id
) p on p.path like tab.path + '%' or tab.path like p.path + '%'
) y
group by entity_id
) x
join _entity_relation pr on pr.id = x.id
join _entity pt on pt.id = x.entity_id
where x.entity_id <> @in_entity_id; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T13:44:25.953

请注意您的数据，因为要完成您的任务，您必须避免循环引用。可以优化以下查询，但可以肯定它会起作用

```
;with tab as (
 select entity_id, relationship, related_id, 1 level, cast('/' + cast(entity_id as varchar(1000)) as varchar(1000)) path
  from #r r
  where not exists(select null from #r r2 where r2.related_id=r.entity_id)
    or r.related_id is null
union all
 select r.entity_id, r.relationship, r.related_id, tab.level+1, cast(tab.path + '/' + cast(r.entity_id as varchar(100)) as varchar(1000)) path
  from #r r
  join tab
  on tab.related_id = r.entity_id  
)
select distinct tab.* 
    from tab
    join(
select path
    from tab 
    where entity_id=1) p
    on p.path like tab.path + '%' or tab.path like p.path + '%' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T13:16:10.713

## 使用两个 CTE 的解决方案

我首先创建了一个具有双向关系的表，然后创建了一个递归 CTE，它使用这两种方式的结果来构建具有祖先路径的整个层次结构......

```
with both as
(
    select *, 0 as rev
    from t
    where related_id is not null

    union

    select *, 1
    from t
),
recurs as
(
    select *, cast('/' as varchar(100)) as anc
    from both
    where entity_id is null

    union all

    select b.*, cast(re.anc + cast(b.entity_id as varchar) + '/' as varchar(100))
    from both b
        join recurs re
        on (re.related_id = b.entity_id)
    where charindex('/'+cast(isnull(b.entity_id,'') as varchar)+'/', re.anc) = 0
)
select *
/*
    THIS ONE SHOULD BE USED TO RETURN TO ORIGINAL
    case when is_reverse = 1 then related_id else entity_id end as entity_id,
    relationship,
    case when is_reverse = 0 then related_id else entity_id end as related_id
*/
from recurs
where related_id = xXx or
      charindex('/'+cast(xXx as varchar)+'/', anc) != 0 
```

替换`xXx`为实际值。

此查询假定根元素是带有 的元素`entity_id = null`，因此它从那里构建整个递归。如果不是这种情况，您将不得不相应地更改它。

我添加了循环检查，循环是 1、2、3、4、5、1**或**1、2、3、4、5、3 **......**所以是全部或部分循环。两者都会起作用。

# asp.net - linq to entity 更新记录到数据库

> ID：10011632
> 
> 赞同：0
> 
> 时间：2012-04-04T12:59:57.303
> 
> 标签：asp.net, linq, entity-framework, linq-to-entities

这是我找到的更新代码：

```
using (TestDBEntities ctx = new TestDBEntities())
{
    //Get the specific employee from Database

    Emp e = (from e1 in ctx.Emp
         where e1.Name == "Test Employee"
         select e1).First();

    //Change the Employee Name in memory
    e.Name = "Changed Name";

    //Save to database
    ctx.SaveChanges();
} 
```

现在我正在做的是这样的：

```
 using(CRNNSTestEntities crnnsupContext = new CRNNSTestEntities())
 {
     CPersonalInfo t = ((IQueryable<CPersonalInfo>)Cache["personquery"]).First();

     t.Tombstone.Address = Address1.Text;
     System.Windows.Forms.MessageBox.Show(crnnsupContext.SaveChanges()+"");
 }; 
```

这是行不通的。所以我的问题是我必须写类似`CPersonalInfo t = from t in ....`

为什么我的方法不起作用？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T13:43:21.907

您还可以将对象附加到之前的上下文中。

更多信息如何使用附加[在这里](http://blogs.msdn.com/b/adonet/archive/2011/01/29/using-dbcontext-in-ef-feature-ctp5-part-4-add-attach-and-entity-states.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T13:04:40.580

您需要`CPersonalInfo t`从您的实体`crnnsupContext`而不是您的实体`Cache`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-06-02T15:03:03.623

你能改变这个吗

```
using (TestDBEntities ctx = new TestDBEntities())
{
    //Get the specific employee from Database

    Emp e = (from e1 in ctx.Emp
         where e1.Name == "Test Employee"
         select e1).First();

    //Change the Employee Name in memory
    e.Name = "Changed Name";

    //Save to database
    ctx.SaveChanges();
}
```

进入

```
using (TestDBEntities ctx = new TestDBEntities())
{
    //Get the specific employee from Database

    Emp e = (from e1 in ctx.Emp
         where e1.Name == "Test Employee"
         select e1).First();
    var entity = ctx.Emp.Find(e);
    //Change the Employee Name in memory
    entity.Name = "Changed Name";

    //Save to database
    ctx.SaveChanges();
}
```

# java - 上传到 iTunes Store 时出错 - 请升级 Java

> ID：10011635
> 
> 赞同：12
> 
> 时间：2012-04-04T12:59:59.953
> 
> 标签：java, xamarin.ios, app-store-connect, itunes-app

昨天在“软件更新”中更新了 Jave (1.6.0_31)，但现在当我尝试发送更新后的应用程序时，我收到此错误“上传到 iTunes Store 时出错”。

控制台写入此错误...需要 Java 1.5、1.6 或 1.7。目前，java 是默认的 java 版本。请升级。

知道如何解决这个问题吗？

谢谢！

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-04-04T19:06:09.623

我遇到了同样的“上传到 iTunes Store 时出错”问题，我花了整整一夜！

解决方法来了：

```
cd /System/Library/Frameworks/JavaVM.framework/Versions
sudo ln -s CurrentJDK /System/Library/Frameworks/JavaVM.framework/Versions/1.5
sudo ln -s CurrentJDK /System/Library/Frameworks/JavaVM.framework/Versions/1.5.0 
```

线程：[https ://devforums.apple.com/thread/147231](https://devforums.apple.com/thread/147231)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-10-24T14:33:28.357

我在夏天遇到过一次这个问题，并且能够通过在 Java Preferences 中重新排序我的 JRE 来解决这个问题。今天我在尝试提交应用程序时遇到此错误，但现在 Java 首选项消失了。我怀疑这与[Apple 最近从 OSX 中删除 Java 插件](http://prod.lists.apple.com/archives/security-announce/2012/Oct/msg00001.html)有关。

我的默认 java`/usr/bin/java`当时使用的是 1.7

```
$ java -版本
java版本“1.7.0_04”
```

我签到了`/System/Library/Frameworks/JavaVM.framework/Versions`，所有链接的日期都是 10 月 18 日：

```
lrwxr-xr-x 1 根轮 10 Oct 18 09:57 1.4 -> CurrentJDK
lrwxr-xr-x 1 根轮 10 Oct 18 09:57 1.4.2 -> CurrentJDK
lrwxr-xr-x 1 根轮 10 Oct 18 09:57 1.5 -> CurrentJDK
lrwxr-xr-x 1 根轮 10 Oct 18 09:57 1.5.0 -> CurrentJDK
lrwxr-xr-x 1 根轮 10 Oct 18 09:57 1.6 -> CurrentJDK
lrwxr-xr-x 1 根轮 10 Oct 18 09:57 1.6.0 -> CurrentJDK
drwxr-xr-x 8 根轮 272 Oct 18 10:00 A
lrwxr-xr-x 1 根轮 1 Oct 18 09:57 Current -> A
lrwxr-xr-x 1 根轮 59 Oct 18 09:57 CurrentJDK -> /System/Library/Java/JavaVirtualMachines/1.6.0.jdk/Contents

```

我将 Current 更改为链接到 CurrentJDK：

`sudo rm Current`

`sudo ln -s CurrentJDK Current`

并检查了版本

```
$ java -版本
java版本“1.6.0_37”
```

此时，我可以再次从 Xcode 提交到 App Store。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-04T19:08:02.260

重新创建旧的 Java 1.5 符号链接：

```
sudo ln -s CurrentJDK /System/Library/Frameworks/JavaVM.framework/Versions/1.5
sudo ln -s CurrentJDK /System/Library/Frameworks/JavaVM.framework/Versions/1.5.0 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-08T09:04:42.927

如果 Xcode 在控制台中给你以下错误

> 错误：需要 Java 1.5、1.6 或 1.7。目前，java 是默认的 java 版本。请升级。

检查是否有软件更新。就我而言，有一个：Java for OSX 2012-002

> Java for OS X 2012-002 通过将 Java SE 6 更新到 1.6.0_31 提供了改进的兼容性、安全性和可靠性。
> 
> 请在安装此更新之前退出所有 Web 浏览器和 Java 应用程序。
> 
> 有关此更新的更多详细信息，请参阅[http://support.apple.com/kb/HT5055](http://support.apple.com/kb/HT5055)。
> 
> 有关此更新的安全内容的信息，请参阅[http://support.apple.com/kb/HT1222 。](http://support.apple.com/kb/HT1222)

更新后，我可以毫无错误地提交我的应用程序。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-01T23:07:26.240

由于 Oracle 的最新 Java 版本（我的系统上有 1.7）而开始出现此错误：

```
Error: Java 1.5, 1.6, or 1.7 is required. Currently, java is the default java version. Please upgrade. 
```

我正在使用：

```
OSX 10.7.4
Xcode 4.4.1 
```

~~~~~~~~~~~~~~~~~~~~~ 更新~~~~~~~~~~~~~~~~~~~~~~

Oracle Java Update 1.7 肯定会破坏 Xcode 上传器。这是一个公认的错误，并在 ADC 中报告（由我和其他人）。

您可以通过以下两种方式之一修复它：

1.  鉴于最近 1.7 的安全问题，只需卸载该版本的 Java 并回退到 Apple 最新的 1.6.35。哪个工作正常。
2.  如果您的 Mac 上必须安装 1.7，请进入 Applications > Utilities > Java Preferences 并暂时取消选择 1.7。做你的上传，然后重新选择......或不:)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-07-19T00:28:21.240

我刚刚遇到了同样的问题，这个解决方案对我有用。我还使用 Apple OS 软件更新工具升级到最新版本。

```
cd /System/Library/Frameworks/JavaVM.framework/Versions
sudo rm Current
sudo ln -s CurrentJDK Current 
```

# python - 带有 NAO 的 While 循环和 Python

> ID：10011637
> 
> 赞同：0
> 
> 时间：2012-04-04T13:00:17.903
> 
> 标签：python, while-loop, nao-robot

所以我有一个 Python 代码，我正试图让它与 NAO (Aldebaran Robotics) 一起工作

```
import time
class MyClass(GeneratedClass):
    def __init__(self):
        GeneratedClass.__init__(self)
        self.motion = ALProxy("ALMotion")
        self.maxTour = 3
        self.reponse = False

    def onLoad(self):
        #~ puts code for box initialization here
        self.tournerDroite()
        time.sleep(5)
        #detect ball
        self.tournerCentre()
        time.sleep(5)
         #detect ball
        self.turnLeft()
         #detect ball
        #self.notInCenter()
        #self.redBall()
        pass

    def onUnload(self):
        #~ puts code for box cleanup here
        pass

    def onInput_onStart(self, ):
        #~ self.onStopped() #~ activate output of the box
        pass

    def onInput_onStop(self):
        self.onUnload() #~ it is recommanded to call onUnload of this box in a onStop method, as the code written in onUnload is used to stop the box as well
        pass

    def turnRight(self):
        self.motion.setStiffnesses("HeadYaw", 0)
        self.motion.setAngles("HeadYaw", -0.5, 0.05)
        self.motion.setStiffnesses("HeadYaw", 1)
        pass
    def turnLeft(self):
        self.motion.setStiffnesses("HeadYaw", 0)
        self.motion.setAngles("HeadYaw", 0.5, 0.05)
        self.motion.setStiffnesses("HeadYaw", 1)
        pass
    def turnCenter(self):
        self.motion.setStiffnesses("HeadYaw", 0)
        self.motion.setAngles("HeadYaw", 0, 0.05)
        self.motion.setStiffnesses("HeadYaw", 1)
        pass

    def notInCenter(self):
        if(self.motion.getAngles("HeadYaw", True) != 0):
            self.turnCenter()
            return True
        else:
            return False
        pass

    def redBall(self):
        while self.reponse == False:
            self.turnRight()
            time.sleep(5)
            #detect ball

            self.turnCenter()
            time.sleep(5)
             #detect ball
            self.turnLeft()
             #detect ball
        pass 
```

问题是在 中`onLoad()`，机器人转头向右，然后是中心，然后是向左，但是当我使用 时`redBall()`，它没有，它只是向右和中心转，然后来回走。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T13:51:19.930

应该有in`time.sleep(5)`之后。`self.turnLeft()``redBall`

当您调用 turnLeft 时，循环立即继续并再次调用 turnRight。这意味着它没有时间向左转弯。这就是为什么它会右转和中转，但不会左转。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-29T08:27:37.187

似乎您正在以相反的方式使用 setStiffnesses：0 移除电机的电源，1 设置电源。

所以： self.motion.setStiffnesses("HeadYaw", 0) self.motion.setAngles("HeadYaw", -0.5, 0.05) self.motion.setStiffnesses("HeadYaw", 1)

正在移除电源，然后转头，但什么也不做，因为没有电源，然后设置电源 => 什么都不做

# ios - 推送 UIViewController 而不链接到 UINavigationBar 上的上一个

> ID：10011638
> 
> 赞同：0
> 
> 时间：2012-04-04T13:00:18.757
> 
> 标签：ios, uiviewcontroller, uinavigationcontroller, uinavigationbar

我有 UINavigationController 和 UIViewController，然后我推送另一个视图控制器，但我不需要链接到 NavigationBar 上的前一个。对这种事情做正确的方法是什么？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T13:03:25.927

使用 UINavigationBar 的属性

```
@property(nonatomic,assign) BOOL hidesBackButton; // If YES, this navigation item will hide the back button when it's on top of the stack. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T13:05:56.207

这取决于您在显示控制器后要对控制器执行的操作。如果它将以其他方式被解雇，您可以使其成为模态而不是推动它。如果它将成为导航堆栈中的新第一项，您可以替换现有的控制器。

# scala - 如何将隐式参数获取到匿名函数中

> ID：10011643
> 
> 赞同：4
> 
> 时间：2012-04-04T13:00:35.133
> 
> 标签：scala

如何将隐式 val myConnection 纳入 execute(true) 函数的范围

```
def execute[T](active: Boolean)(blockOfCode: => T): Either[Exception, T] = {
  implicit val myConnection = "how to get this implicit val into scope"
  Right(blockOfCode)
}

execute(true){
// myConnection is not in scope
  useMyConnection()   // <- needs implicit value
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-04T13:30:28.113

你不能直接这样做。`myConnection`你打电话之前真的没有确定的价值`execute`吗？在这种情况下，您可以这样做：

```
def execute[T](active: Boolean)(blockOfCode: String => T): Either[Exception, T] = {
  val myConnection = "how to get this implicit val into scope"
  Right(blockOfCode(myConnection))
}

execute(true) { implicit connection =>
  useMyConnection() 
} 
```

基本上，您将参数传递给评估函数，但是您必须记住在调用站点将其标记为隐式。

如果你有几个这样的隐式，你可能想把它们放在一个专用的“隐式提供者”类中。例如：

```
class PassedImplicits(implicit val myConnection: String)

def execute[T](active: Boolean)(blockOfCode: PassedImplicits => T): Either[Exception, T] = {
  val myConnection = "how to get this implicit val into scope"
  Right(blockOfCode(new PassedImplicits()(myConnection)))
}

execute(true) { impl =>
  import impl._
  useMyConnection() 
} 
```

如果你想避免`import`，你可以为你的每个字段提供“隐式getter”`PassedImplicits`并编写如下内容，然后：

```
implicit def getMyConnection(implicit impl: PassedImplicits) = impl.myConnection

execute(true) { implicit impl =>
  useMyConnection() 
} 
```

# clearcase - 将项目从 clearcase 源代码控制导入 RTC 源代码控制

> ID：10011644
> 
> 赞同：1
> 
> 时间：2012-04-04T13:00:35.050
> 
> 标签：clearcase, rtc

我正在尝试将 clearcase 项目导入 rtc 源代码管理，我正在关注本教程：

[https://jazz.net/library/article/50](http://Using%20the%20ClearCase%20Importer%20to%20Import%20ClearCase%20History)

本教程是否足够？当代码签入 clearcase 时，它​​是否也会自动签入 rtc 源代码管理？

欢迎任何常见的陷阱/在线教程

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T14:27:07.857

老实说，对于几个基线，我只是创建了一个导入 RTC 流（即专用于导入的流），然后我手动复制了一些从动态视图中选择的基线（它有一个配置规范，您可以轻松地按顺序更改选择适当的基线）

无论您最终使用何种工具进行此导入，常见的陷阱是：

*   直接在用于开发的 RTC 流中导入：最好将导入隔离在专用流中，这将允许您开始处理 RTC 开发流中导入的基线之一，同时稍后完成进一步的导入在导入流中。
*   导入*所有*历史记录（而不是仅几个选定的基线）
*   导入而不先清理（即，您可能意识到您在 ClearCase 中存储了很多您可能希望通过`.jazzignore`导入文件忽略的二进制文件、库或其他生成的文件）
*   在不重构组件的情况下导入：UCM ClearCase 组件可能在一年中被用作多个项目代码库的一个巨大桶。
    导入另一个 VCS 是将其拆分为几个较小组件的好时机。
*   导入后完全关闭 ClearCase：因为您没有导入所有历史记录，也不是每个版本的所有所有者，您可能需要不时查阅存储在 ClearCase 中的历史记录。
    不过不要忘记锁定 vobs，以确保只读访问。

# c# - 将选定的 ViewModel 从 WPF 数据网格传递到新的 TabItem MVVM

> ID：10011659
> 
> 赞同：0
> 
> 时间：2012-04-04T13:01:41.303
> 
> 标签：c#, wpf, mvvm

我有一个选项卡控件，它在第一个选项卡中加载 WPF 数据网格。数据网格中的行由 MemberViewModel 填充。当数据网格 selectItem 发生更改时，我已经设法获取选定的 MemberViewModel，但是如何将它传递给我想使用命令将其添加到 TabItems 集合的 RibbonViewModel？RibbonViewModel 是我的 Ribbon 的 ViewModel。在该功能区上有一个按钮，可以将新的 MemberViewModel 添加到 tabItemsCollection，这很好用。但是，我想从我的数据网格中添加选定的 MemberViewModel，以添加为新的 tabitem。

RibbonViewModel 中的代码（命令）将新的 MemberViewModel 添加到 TabItemsCollection

```
private void AddSelectedMemberTabItem(object notUsed)
{
  _tabViewModel.TabItems.Add(new MemberViewModel{ Header = "Member" }); // OK, this works fine
  _tabViewModel.TabItems.Add(SelectedMemberViewModel); // this doesnt work, DP SelectedMemberViewModel is never filled, don't know how to retrieve it from the selected datagrid item.
 _addOverview.RaiseCanExecuteChanged();
} 
```

从选定的 datagriditem 中检索选定的 MemberViewModel 的代码（在 OverviewViewModel 中）：

```
public static readonly DependencyProperty SelectedItemProperty = DependencyProperty.Register("SelectedItem", typeof(MemberViewModel), typeof(OverviewViewModel), new UIPropertyMetadata(OnSelectedMemberPropertyChanged));
public MemberViewModel SelectedItem
{
   get { return (MemberViewModel)GetValue(SelectedItemProperty); }
   set { SetValue(SelectedItemProperty, value); }
}

private static void OnSelectedMemberPropertyChanged(DependencyObject m, DependencyPropertyChangedEventArgs args)
{
  var selectedMember = m.GetValue(SelectedItemProperty) as MemberViewModel;
  _ribbonViewModel.SelectedMemberViewModel = selectedMember; // error: cannot access non-static field (_ribbonViewModel) in static contect
} 
```

如何从 OverviewViewModel 上的 OnSelectedMemberPropertyChanged 方法填充 _ribbonViewModel.SelectedMemberViewModel？还是我走错了路？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T08:26:15.390

这是我必须这样做的方式，这样我可以将选定的 MemberViewModel 从 DataGrid 传递给另一个 var。

```
private static void OnSelectedMemberPropertyChanged(DependencyObject m, DependencyPropertyChangedEventArgs args)
{
  var b = m as OverviewViewModel;
  if (b == null)
    return;
  var selectedMember = m.GetValue(SelectedItemProperty) as MemberViewModel;
  b.selectedMemberChanged(selectedMember);
} 
```

# php - str_replace 的问题

> ID：10011664
> 
> 赞同：0
> 
> 时间：2012-04-04T13:02:00.467
> 
> 标签：php, xml, wordpress, str-replace

首先，字符串是从 XML 文件中提取的。

我要替换一个特殊字符：'£'

当我像这样使用 str_replace 时：

```
$ability1 = str_replace("£", "", $ability); 
```

这就是 var_dump 显示的内容：

```
string(138) "Argothian Pixies can't be blocked by artifact creatures.�Prevent all damage that would be dealt to Argothian Pixies by artifact creatures." 
```

一旦 $ability1 被传递并且 wordpress 将它插入到帖子中。这就是结果。

```
Argothian Pixies can’t be blocked by artifact creatures. 
```

它会删除 � 字符之后的所有内容。

当它应该是“”时，为什么要更改为�。我不太确定我错过了什么

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T13:04:52.150

确保字符串使用正确的编码，尝试[编码](http://php.net/manual/es/function.utf8-encode.php)或[解码](http://php.net/manual/es/function.utf8-decode.php)为 UTF8，然后应用 str_replace。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T13:05:36.647

XML 文件是如何编码的？我怀疑它可能是UTF-8。在这种情况下，您需要查看诸如 utf_decode() 之类的函数才能在代码中正确处理它（假设您的代码是 ANSI 格式）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-04T13:06:49.593

也许你的字符串是 UTF-8 的？php。你必须做这样的事情：

```
$ability1 = utf8_decode($ability);
$ability1 = preg_replace("/[£ ]/","", $ability1);
$ability1 = utf8_encode($ability1); 
```

# ajax - jquery load() 不适用于同位素插件

> ID：10011665
> 
> 赞同：3
> 
> 时间：2012-04-04T13:02:06.203
> 
> 标签：ajax, jquery, jquery-plugins

`load()`我对 AJAX函数有疑问。我正在使用同位素插件为我的 div 部分设置动画。

我需要通过 AJAX 加载 Div 的内容`load()`。当我`.load()`在应用同位素插件的同一个 div 上应用时，它不起作用。另一方面，当我对`.load()`其他 div 应用相同的功能时，它工作正常。

我已经搜索了很多来解决这个问题，但没有任何成功。你能帮我吗？

以下是链接：[http ://demo.webhole.net/load-a-page-with-jquery](http://demo.webhole.net/load-a-page-with-jquery)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T13:37:57.460

加载后可能需要将插件重新绑定到 div 吗？当您将内容加载到 div 中时，您会使用旧的绑定事件回调破坏此 div 的旧内容。

# javascript - 如何在java脚本中绘制图形？

> ID：10011668
> 
> 赞同：0
> 
> 时间：2012-04-04T13:02:08.673
> 
> 标签：javascript, jquery

我想在 java 脚本中绘制图形。让我用简单的例子分享我的问题。

```
Ind vs Aus cricket match.
     X axis- Overs
     Y axis- Runs 
```

我想在同一张图中显示两支球队在每场比赛中的得分。我可以一起展示它们吗？

你的经验对我有用。希望得到帮助。

将不胜感激...提前谢谢，，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T13:13:07.593

试试[谷歌可视化 API：](https://developers.google.com/chart/)

它包括用于构建数据表并使用不同类型的图表将其可视化的类：

来自[Google Visualiation Code Playground](http://code.google.com/apis/ajax/playground/?type=visualization#line_chart)的示例：

```
function drawVisualization() {
  // Create and populate the data table.
  var data = new google.visualization.DataTable();
  data.addColumn('string', 'x');
  data.addColumn('number', 'Cats');
  data.addColumn('number', 'Blanket 1');
  data.addColumn('number', 'Blanket 2');
  data.addRow(["A", 1, 1, 0.5]);
  data.addRow(["B", 2, 0.5, 1]);
  data.addRow(["C", 4, 1, 0.5]);
  data.addRow(["D", 8, 0.5, 1]);
  data.addRow(["E", 7, 1, 0.5]);
  data.addRow(["F", 7, 0.5, 1]);
  data.addRow(["G", 8, 1, 0.5]);
  data.addRow(["H", 4, 0.5, 1]);
  data.addRow(["I", 2, 1, 0.5]);
  data.addRow(["J", 3.5, 0.5, 1]);
  data.addRow(["K", 3, 1, 0.5]);
  data.addRow(["L", 3.5, 0.5, 1]);
  data.addRow(["M", 1, 1, 0.5]);
  data.addRow(["N", 1, 0.5, 1]);

  // Create and draw the visualization.
  new google.visualization.LineChart(document.getElementById('visualization')).
      draw(data, {curveType: "function",
                  width: 500, height: 400,
                  vAxis: {maxValue: 10}}
          );
} 
```

这将创建一个带有 X 和 Y 轴的折线图，这是您尝试做的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T13:32:57.310

[gRaphael](http://g.raphaeljs.com/)是 Web 图表的绝佳选择。它使用 javascript 在 SVG 和旧版本的 IE、VML 中生成图形，这使其成为一个很好的跨浏览器起点 - 它可以在 IE6 及更高版本中运行，并且不需要 Flash。另一个好处是，使用由 javascript 对象控制的 SVG/VML DOM 元素意味着您的图形元素可以随时在 javascript 中进行高度交互和操作。

示例代码（[来自 doc barchart examples](http://g.raphaeljs.com/barchart2.html)）：

```
r.hbarchart(10, 250, 300, 220, [[55, 20, 13, 32, 5, 1, 2, 10], [10, 2, 1, 5, 32, 13, 20, 55]]).hover(fin, fout); 
```

该行创建了一个双变量条形图，它在每个元素上调用 mousein 和 mouseout 回调函数，您可以使用这些函数来显示相关信息，例如，在他们的示例中，确切的值。两个变量的条形图可能是表示两支球队在一局比赛中得分的好方法。如果有多个回合和多个局 - 每支球队一个，那么[图形点图可能是一个更好的选择。](http://g.raphaeljs.com/dotchart.html)还支持其他图表类型 - 请参阅上面主项目页面上的演示示例。

# polling - 计算长轮询应用程序的系统要求

> ID：10011671
> 
> 赞同：0
> 
> 时间：2012-04-04T13:02:09.780
> 
> 标签：polling

我正在开发一个应用程序，它使用长轮询来即时通知对基础所做的更改。

应用结构如下：

有一个问题库，管理员正在实时回答它们。我有一个动作表，其中动作与时间戳一起存储。因此，每个管理员浏览器都在轮询方法来查询数据库以获取这些操作，如果上次检查出现新操作，它会使用 ajax 发出问题更新。

我遇到了 2 个无法找到答案的问题，所以我来到了这里。

1.  我有多个客户端正在轮询一个数据库。在长轮询技术的帮助下，我能够减少进程的延迟，但服务器负载仍然相同，因为它每 2 秒要求数据库更改一次。有没有办法以某种方式减少数据库查询的数量，因为目前假设 10 个客户端每 2 秒询问基本相同的信息似乎是错误的。也许有减少服务器负载的技术。

2.  无论是否有第一个问题的解决方案，我都需要以某种方式计算这种应用程序的服务器需求，因为我可能需要增加使用它的管理员数量。我怎么能那样做。

# javascript - extjs 3.4 如何动态添加复选框到工具栏

> ID：10011674
> 
> 赞同：2
> 
> 时间：2012-04-04T13:02:24.500
> 
> 标签：javascript, extjs, extjs3

我有一个带有`BottomToolbar`. 我想动态添加和删除 a `checkbox/checkboxgroup`or `radio/radiogroup`。我看到我们有方法`addItem`，`Ext.Toolbar`但复选框没有扩展 Item... 有没有办法做到这一点？

我的代码预览和我想要实现的目标：

```
var myCheckboxGroup = new Ext.form.CheckboxGroup({
        id:'displayParamCheckGroup',
        xtype: 'checkboxgroup',
        columns: 1,
        items: checkboxArray
    });
Ext.getCmp('siteChartPanel').getBottomToolbar().add(myCheckboxGroup); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T13:12:56.707

添加后忘记调用 doLayout() 方法：

```
Ext.getCmp('siteChartPanel').getBottomToolbar().doLayout(); 
```

# objective-c - 在处理枚举时如何避免 if else 或 switch case？

> ID：10011676
> 
> 赞同：0
> 
> 时间：2012-04-04T13:02:36.817
> 
> 标签：objective-c

我有一个成员变量，它告诉我测量的值的单位，如厘米、公里、秒、小时等。

现在这些是枚举，当我显示相应的字符串时，我创建了一个方法，为这些枚举返回相应的字符串。

与 Java 不同，这里的枚举不能有其他相关的属性。

所以我必须明确地做一个 if-else-if 链或一个 switch case 来返回正确的字符串。

我是 Objective C 的新手。在这种情况下我应该遵循什么好的做法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T13:07:15.520

afaik Objective-C 枚举只是老式的 C 枚举......所以也许你可以为它们使用整数值？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T13:25:07.867

我猜如果您的枚举值从 0 开始并增加，您可以使用某种数组访问：

```
const char *distanceUnitToString2(enum DistanceUnit unit)
{
    const char *values[] = {
            "cm",
            "m",
            "km"
    };

    // do some sanity checking here
    // ...

    return values[unit];
} 
```

但这对我来说有点片状。如果您有负值，或者您使用的是位掩码样式的枚举值，例如`1 << 8`怎么办？您最终将使用一个非常大的数组。

您也可以使用开关并通过宏对其进行一些改进。像这样的东西：

```
const char *distanceUnitToString(enum DistanceUnit unit)
{
#define CASE(UNIT, STRING) case (UNIT): return (STRING)
    switch (unit) {
            CASE(kCentimeters, "cm");
            CASE(kMeters, "m");
            CASE(kKiloMeters, "km");

        default:
            // should not get here
            assert(0);
            break;
    }
#undef CASE
} 
```

但是与不使用宏相比，您并没有真正节省那么多。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T13:28:39.130

马丁詹姆斯的评论是正确的答案。并使用枚举的定义，例如：

```
enum units { cm = 0, m, km }; 
```

这样您就可以确保您的枚举转换为正确的索引值。

# r - 如何通过从多个 CSV 文件中提取某些单元格来创建单个表格

> ID：10011684
> 
> 赞同：0
> 
> 时间：2012-04-04T13:03:26.420
> 
> 标签：r

我想知道是否可以使用工作目录中每个文件的某些单元格创建一个新的数据框。例如说如果我有 2 个这样的数据框（请忽略这些数字，因为它们是随机的）：

![在此处输入图像描述](../Images/08aaeb33dead425344b62661601c4f39.png)

假设在每个数据集中，第 4 行是我的值的总和，第 5 行是缺失值的数量。如果我将缺失值的数量表示为“M”，将列总和表示为“N”，那么我想要实现的是下表：

![在此处输入图像描述](../Images/ae09c705e94adf0c3461f341d60f3d14.png)

所以每个文件“N”和“M”都在 1 行中。

我在目录中有很多文件，所以我在列表中阅读了它们，但不确定在文件列表中执行此类任务的最佳方法是什么。

这是我显示的表格的示例代码以及我如何在列表中阅读它们：

```
 ##Create sample data

df = data.frame(Type = 'wind', v1=c(1,2,3,100,50), v2=c(4,5,6,200,60), v3=c(6,7,8,300,70))
df2 =data.frame(Type = 'test', v1=c(3,2,1,400,40), v2=c(2,3,4,500,30), v3=c(6,7,8,600,20))

# write to directory
write.csv(df, file = "sample1.csv", row.names = F)
write.csv(df2, file = "sample2.csv", row.names = F)

# read to list
mycsv = dir(pattern=".csv")
n <- length(mycsv) 

mylist <- vector("list", n) 
for(i in 1:n) mylist[[i]] <- read.csv(mycsv[i],header = TRUE) 
```

如果你能给我一些关于这是否可能以及我应该如何处理的建议，我会非常感激？

非常感谢，
阿扬

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T13:39:01.047

这应该有效：

```
processFile <- function(File) {
    d <- read.csv(File, skip = 4, nrows = 2, header = FALSE, 
                  stringsAsFactors = FALSE)
    dd <- data.frame(d[1,1], t(unlist(d[-1])))
    names(dd) <- c("ID", "v1N", "V1M", "v2N", "V2M", "v3N", "V3M") 
    return(dd)
}

ll <- lapply(mycsv, processFile)
do.call(rbind, ll)
#     ID v1N V1M v2N V2M v3N V3M
# 1 wind 100  50 200  60 300  70
# 2 test 400  40 500  30 600  20 
```

（一个有点棘手/不寻常的位出现在第三行`processFile()`。这是一个代码片段，可以帮助您了解它是如何完成它的工作的。）

```
(d <- data.frame(a="wind", b=1:2, c=3:4))
#      a b c
# 1 wind 1 3
# 2 wind 2 4
t(unlist(d[-1]))
#      b1 b2 c1 c2
# [1,]  1  2  3  4 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T13:56:45.857

警告：我不确定我是否完全理解你想要什么。我认为您正在阅读一个列表，并希望从该列表中选择具有该列表中相同行的某些数据框。然后，您要创建这些行的数据框并从长格式变为宽格式。

```
LIST <- lapply(2:3, function(i) {
        x <- mylist[[i]][4:5, ]
        x <- data.frame(x, row = factor(rownames(x)))
        return(x)
    }
)

DF <- do.call("rbind", LIST)  #lets you bind an unknown number of rows from a list
levels(DF$row) <- list(M =4, N = 5) #recodes rows 4 and 5 with M and N

wide <- reshape(DF, v.names=c("v1", "v2", "v3"), idvar=c("Type"),
    timevar="row", direction="wide") #reshape from long to wide

rownames(wide) <- 1:nrow(wide) #give proper row names
wide 
```

这产生：

```
 Type v1.M v2.M v3.M v1.N v2.N v3.N
1 wind  100  200  300   50   60   70
2 test  400  500  600   40   30   20 
```

# java - 如何使用 android 应用程序编辑输入文件属性？

> ID：10011686
> 
> 赞同：0
> 
> 时间：2012-04-04T13:03:46.590
> 
> 标签：java, android

我想制作一个可以添加用户输入的歌曲文件的文件属性的应用程序。喜欢添加歌曲的专辑名称..我仍然是android应用程序开发的新手...谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T13:09:41.740

我假设您正在寻找编辑 MP3 文件的[ID3 标签](http://en.wikipedia.org/wiki/ID3#Editing_ID3_tags)（其他格式，包括 MP4，通常具有不同的元数据系统）。

基本上，你会想要：

*   打开 MP3 文件
*   从 MP3 文件中读取现有的 ID3 标签
*   用数据填充文本视图
*   当用户保存时，将新的 ID3 标签写入 MP3 文件。

看起来有[一个相当老的库](http://javamusictag.sourceforge.net/)来处理 Java 中的 id3 标签，所以你甚至可以在这条路上节省很多精力。

# c# - C# 规范化（像一个向量）

> ID：10011687
> 
> 赞同：1
> 
> 时间：2012-04-04T13:03:47.553
> 
> 标签：c#, vector, normalize

我的移动对象中的代码：

```
ObjectX.Location.Add(Velocity * Utils.GetMoveDir(start, destination)); 
```

实用功能：

```
 public static PointF GetMoveDir(PointF start, PointF destination)
    {
        PointF substraction = destination.SubStract(start);
        if (substraction == PointF.Empty) // If-statement is needed because normalizing a zero value results in a NaN value
            return PointF.Empty;
        else
            return substraction.Normalize(); // <<<< I need something for this
    } 
```

我无法工作的扩展：

```
 public static PointF Normalize(this PointF A)
    {
        throw new NotImplementedException(); // How do I solve this to make it like: http://msdn.microsoft.com/en-us/library/microsoft.xna.framework.vector2.normalize.aspx
    } 
```

请注意，我不使用 XNA 框架。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-04T13:09:38.907

```
public static PointF Normalize(this PointF A)
{
    float distance = Math.Sqrt(A.X * A.X + A.Y * A.Y);
    return new PointF(A.X / distance, A.Y / distance);
} 
```

[另请参阅此处](http://en.wikipedia.org/wiki/Unit_vector)的第一段以了解什么是归一化向量（单位向量）以及如何计算它。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-04T13:09:39.750

```
public static PointF Normalize(this PointF A)
{
    float length = Math.Sqrt( A.X*A.X + A.Y*A.Y);
    return new PointF( A.X/length, A.Y/length);
} 
```

# android - Roboguice 辅助注释

> ID：10011688
> 
> 赞同：1
> 
> 时间：2012-04-04T13:03:57.550
> 
> 标签：android, roboguice, android-testing

我使用 Roboguice 1.1.2 和 guice-no-aop 2.0。我尝试使用辅助注入，这需要 @Assisted 注释。我的问题是 guice-2.0-no_aop.jar 不包含 Assisted 注释。那正确吗？roboguice wiki 声称我可以使用辅助注射。guice 2.0 页面也没有提到这是 no aop 版本中缺少的功能。任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T09:09:14.500

guice-assistedinject-2.0.jar 位于 guice-2.0.zip 档案中。

[http://code.google.com/p/google-guice/wiki/Guice20](http://code.google.com/p/google-guice/wiki/Guice20)

我没有在 2.0 文档中看到它，但它在 3.0 文档中：

[http://google-guice.googlecode.com/svn/trunk/javadoc/com/google/inject/assistedinject/package-summary.html](http://google-guice.googlecode.com/svn/trunk/javadoc/com/google/inject/assistedinject/package-summary.html)

# c# - 客户端兼容性检查管理

> ID：10011690
> 
> 赞同：2
> 
> 时间：2012-04-04T13:04:06.210
> 
> 标签：c#, .net, wcf, c#-4.0, client-server

我正在开发一个必须支持向后兼容性的客户端-服务器应用程序（.NET 4，WCF）。换句话说，旧客户端应该与新服务器兼容，反之亦然。结果，我们的客户端代码中充斥着以下语句：

```
if (_serverVersion > new Version(2, 1, 3))
{
    //show/hide something or call method Foo()...
}
else
{
   //show/hide something or call method Foo2()...
} 
```

显然，这在某种程度上变成了维护的噩梦。幸运的是，我们被允许打破与每个次要版本的向后兼容性。当我们达到可能破坏兼容性的地步时，我想清理上面示例形式的代码。

我的问题：

（1）当它们不再“有效”时，有没有办法轻松识别这些代码块？我最初的想法是根据程序集的版本以某种方式有条件地应用 Obsolete 属性。当我们得到一个新的次要版本时，Obsolete 属性会“启动”，突然间我们会有几个指向这些代码块的编译器警告......有没有人做过这样的事情？或者有没有更好的方法来管理这个？

(2) 每次看到硬编码的版本，例如`new Version(2, 1, 3)`. 更糟糕的是，在开发过程中，我们不知道发布的最终版本，所以版本检查是基于当前版本号 + 1 时开发人员添加检查。虽然这有效，但它不是很干净。关于如何改进的任何想法？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T13:10:24.893

我建议至少创建一个可以执行如下逻辑的方法：

```
public static class ServerUtilities
{
    public static bool IsValidToRun(Version desiredVersion)
    {
        if (_serverVersion >= desiredVersion)
            return true;
        else if (/* your other logic to determine if they're in some acceptable range */)
            return true;

        return false;
    }
} 
```

然后，像这样使用：

```
if (ServerUtilities.IsValidToRun(new Version(2, 1, 3)))
{
    // Do new logic
}
else
{
    // Do old logic
} 
```

如果您需要集中版本，请拥有一个静态的功能存储库到版本映射，以便您可以调用：

```
if (ServerUtilities.IsValidToRun(ServerFeatures.FancyFeatureRequiredVersion))
{
    ...
}

public static class ServerFeatures
{
    public static Version FancyFeatureRequiredVersion
    {
        get { return new Version(2, 1, 3); }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T14:16:29.420

另一种方法是实现服务合同的版本控制：此时您可以利用 WCF 自己的功能来忽略不会破坏客户端的微小更改，如此[版本控制策略](http://msdn.microsoft.com/library/ff384251.aspx)页面中所列。

在图 1 中，您可以看到在向操作签名中添加新参数、从操作签名中删除参数以及添加新操作时，客户端不受影响。

如果仍然存在重大更改或您的客户端必须支持这两个版本（如果我错了，请纠正我，因为我不知道您的部署策略），您可以在不同的端点上提供不同版本的服务并拥有 WCF客户端代码中的客户端工厂，然后可以将其配置为为适当的端点返回客户端。

至此，您已经隔离了不同客户端中的不同实现，这可能比现在更干净，也更少维护噩梦。

* * *

非常基本的示例实现来解决问题：假设我们的服务有两个不同的合同，一个旧合同和一个新合同。

```
[ServiceContract(Name = "Service", Namespace = "http://stackoverflow.com/2012/03")]
public interface IServiceOld
{
    [OperationContract]
    void DoWork();
}

[ServiceContract(Name = "Service", Namespace = "http://stackoverflow.com/2012/04")]
public interface IServiceNew
{
    [OperationContract]
    void DoWork();

    [OperationContract]
    void DoAdditionalWork();
} 
```

请注意这两个服务如何具有相同的名称但不同的命名空间。

让我们处理一个客户端必须能够同时支持扩展服务和新服务以及旧服务的问题。假设我们想在之前调用 DoWork 时调用 DoAdditionalWork 方法，并且我们想在客户端处理这种情况，因为假设 DoAdditionalWork 可能需要来自客户端的一些额外参数。那么服务的配置可能是这样的：

```
<service name="ConsoleApplication1.Service">
    <endpoint address="http://localhost:8732/test/new" binding="wsHttpBinding" contract="ConsoleApplication1.IServiceNew" />
    <endpoint address="http://localhost:8732/test/old" binding="wsHttpBinding" contract="ConsoleApplication1.IServiceOld" />
    ...
</service> 
```

好的，我们有服务端，现在是有趣的部分：我们希望使用相同的接口与服务进行通信。在这种情况下，我将使用旧的，但您可能需要在两者之间放置一个适配器。理想情况下，在我们的客户端代码中，我们会这样做：

```
IServiceOld client = *Magic*

client.DoWork(); 
```

在这种情况下，魔术是这样一个简单的工厂：

```
internal class ClientFactory
{
    public IServiceOld GetClient()
    {
        string service = ConfigurationManager.AppSettings["Service"];
        if(service == "Old")
            return new ClientOld();
        else if(service == "New")
            return new ClientNew();

        throw  new NotImplementedException();
    }
} 
```

我将使用哪个客户端的决定委托给 app.config，但您可以在此处插入版本检查。ClientOld 的实现只是 IServiceOld 的常规 WCF 客户端：

```
public class ClientOld : IServiceOld
{
    private IServiceOld m_Client;

    public ClientOld()
    {
        var factory = new ChannelFactory<IServiceOld>(new WSHttpBinding(), "http://localhost:8732/test/old");
        m_Client = factory.CreateChannel();
    }

    public void DoWork()
    {
        m_Client.DoWork();
    }

    ...
} 
```

ClientNew 实现了我们希望的行为，即调用 DoAdditionalWork 操作：

```
public class ClientNew : IServiceOld
{
    private IServiceNew m_Client;

    public ClientNew()
    {
        var factory = new ChannelFactory<IServiceNew>(new WSHttpBinding(), "http://localhost:8732/test/new");
        m_Client = factory.CreateChannel();
    }

    public void DoWork()
    {
        m_Client.DoWork();
        m_Client.DoAdditionalWork();
    }
    ...
} 
```

就是这样，现在我们的客户端可以像下面的例子一样使用：

```
var client = new ClientFactory().GetClient();
client.DoWork(); 
```

我们取得了什么成就？使用客户端的代码是从实际的 WCF 客户端必须做的额外工作中抽象出来的，并且关于使用哪个客户端的决定委托给工厂。我希望这个样本的一些变化/扩展能够满足您的需求。

# c++ - 有什么工具可以为 Windows 目标编译 C++2011 代码？

> ID：10011691
> 
> 赞同：5
> 
> 时间：2012-04-04T13:04:10.483
> 
> 标签：c++, windows, linux, c++11, cross-compiling

我在 C++2011 中创建了一个程序，它实际上使用了 C++2011 的特性：`mutex`、`unique_lock`、`condition_variable`和.`future``async`

我已经在 Debian Linux 64 位机器上对其进行了测试，它的编译和运行就像一个魅力。

* * *

现在，我想为 Windows 编译它。

我尝试了 Visual C++ Express 2010，但它不支持 C++ 的新功能。（Visual C++/Studio 2012 的 Beta 版只能在 Windows 8 上运行。）

我尝试使用 mingw-g++ (4.6) 进行交叉编译，但 Windows 目标似乎不支持这些新功能。（尽管 Linux 目标的 g++-4.6 支持它们）。

到目前为止，是否有任何（免费？）解决方案可以为 Windows 目标编译 C++2011 程序？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-04T14:17:58.663

我的（商业）[Just::Thread 库](http://www.stdthread.co.uk)为 MSVC 2005/2008/2010 和 Windows 上的 mingw-gcc 4.5/4.6 的 TDM 端口提供`std::thread`,和朋友。`std::mutex`不过，它不是免费的。

或者，为 mingw 寻找 gcc 4.7 的构建。对 Windows 上的线程库的支持应该可以在 gcc 4.7 中开箱即用，但它还没有正式发布。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-04T13:17:47.327

我还没有尝试过，但是来自项目网站的这句话听起来很有希望：

“构建支持以下技术：

```
OpenMP
LTO
Graphite
std_threads
std_atomics 
```

……”

[http://code.google.com/p/mingw-builds/](http://code.google.com/p/mingw-builds/)

希望这可以帮助

# arrays - 向量中的 J2ME 文本字段？

> ID：10011693
> 
> 赞同：0
> 
> 时间：2012-04-04T13:04:15.663
> 
> 标签：arrays, java-me, lcdui

我想要一个可以添加或删除文本字段的表单。

到目前为止，我正在创建一个数组并调整大小（实际上是将原始数组复制到一个新的更大的数组），然后删除所有表单元素，然后再次添加所有内容 + 这个新的 TextFields 数组，

但我认为这会减慢程序的速度许多 TextFields
将 TextFileds 添加到 Vector 不起作用。当它即将向表单添加 TextField 时，

```
form.append(vector.elementAt(i)); 
```

它说元素不是它。

```
method Form.append(Item) is not applicable
  (actual argument Object cannot be converted to Item by method invocation conversion)
method Form.append(Image) is not applicable
  (actual argument Object cannot be converted to Image by method invocation conversion)
method Form.append(String) is not applicable
  (actual argument Object cannot be converted to String by method invocation conversion) 
```

我应该重新调整数组大小，还是有更好的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T19:44:57.420

根据表单文档“可以使用追加、删除、插入和设置方法编辑表单中包含的项目。” 而且你还有一个 get 方法，所以我认为你根本不需要 Vector。假设你有：

```
    表单 form = new Form("多个字段");

    // 如果要添加新的 TextField
    form.append(new TextField("label", "text", 10/*maxSize*/, TextField.ANY));

    // 如果要删除最后一个TextField：
    form.delete(form.size() - 1);

    // 遍历所有字段：
    for (int i = 0; i < form.size(); i++) {
        TextField textField = (TextField) form.get(i);
    }

```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T13:32:41.127

为避免在添加到 Form 时出现编译错误，请将 Vector 元素显式转换为所需的类型（Item）：

```
form.append((Item)(vector.elementAt(i))); 
```

[请注意，如果您习惯使用 Java SE 5 或更高版本 - 请记住 Java ME 基于**更**旧的版本（JDK 1.3）。结果，您会看到更明确的演员表，因为泛型不是一种选择。]

# java - Hessian 将 java.lang.Character 反序列化为字符串

> ID：10011696
> 
> 赞同：3
> 
> 时间：2012-04-04T13:04:29.460
> 
> 标签：java, serialization, hessian

我已经使用 Hessian 一段时间了，但只是注意到以下行为。如果您在 Hessian 中序列化 java.lang.Character，它将反序列化为字符串。

```
public class TestHessianChar {
    public static void main(String... args) throws IOException {
        // Serialize
        Character c = new Character('x');
        ByteArrayOutputStream byteArrayOutputStream = new ByteArrayOutputStream();
        Hessian2Output hessian2Output = new Hessian2Output( byteArrayOutputStream );
        hessian2Output.startMessage();
        hessian2Output.writeObject(c);
        hessian2Output.completeMessage();
        hessian2Output.close();
        byte[] dataBytes = byteArrayOutputStream.toByteArray();

        // Deserialize
        Hessian2Input hessian2Input = new Hessian2Input( new ByteArrayInputStream(  dataBytes ) );
        hessian2Input.startMessage();
        Object o = hessian2Input.readObject();
        hessian2Input.completeMessage();
        hessian2Input.close();

        System.out.println(o.getClass().getName());
    }
} 
```

此代码的输出是：

```
java.lang.String 
```

我假设它与与语言无关的原语序列化有关，但这很烦人。我正在编写一个 JMS 驱动程序并且需要区分 char 和 String，因为规范需要不同的行为。我正在考虑编写我自己的类来表示一个字符（并放弃自动装箱），但我想知道在我开始经历这种扭曲之前是否有适当的方法让 Hessian 将一个字符视为一个字符。

# mysql - MySQL中存储社区的表结构

> ID：10011699
> 
> 赞同：0
> 
> 时间：2012-04-04T13:04:42.680
> 
> 标签：mysql, database, database-schema

我有一个社区列表。每个社区都有一个成员列表。目前，我将每个社区存储在一行中，成员名称用逗号分隔。这对较小的不可变社区有好处。但是随着社区变得越来越大，让我们假设拥有 75,000 名成员，社区的加载速度变得越来越慢。社区的部分加载（让我们说随机 10 个成员）也不是很优雅。在这种情况下，社区表的最佳表结构是什么？如果有这样做的理由，使用多个表也不是问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T13:10:46.223

使用三个表

```
`community`

| id | name | other_column_1 | other_column_2 ...

`user`

| id | name | other_column_1 | other_column_2 ...

`community_user`

| id (autoincrement) | community_id | user_id | 
```

然后要获取社区中所有用户的用户信息，您可以执行以下操作

```
SELECT cu.id AS entry_id, u.id, u.name FROM `community_user` AS cu
    LEFT JOIN `user` AS u 
    ON cu.user_id = u.id 
WHERE cu.community_id = <comminuty id> 
```

# xslt - BizTalk 映射名称值对到分层架构

> ID：10011700
> 
> 赞同：2
> 
> 时间：2012-04-04T13:04:49.867
> 
> 标签：xslt, biztalk

我将使用 MS AX2010。通过 AX WCF 服务访问数据时，响应是包含名称/值对的 XML - 称为键数据列表。我将在 BizTalk 中收集此 XML，并需要将其转换为规范的分层架构。例如，如果我读取带有“OrderNumber”的源*名称*元素，那么我会将关联的*值*映射到目标模式中的 OrderNumber 元素。有没有人发现使用 BizTalk 地图的好方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T09:58:03.473

我承认您更喜欢使用图形 functoid，但如果您可以接受 xslt 路线，那将非常简单（请参阅[此处](https://stackoverflow.com/questions/3716608/biztalk-2010-mapping-an-xsd-with-a-lot-of-elements-with-the-same-name/3718014#3718014)将可视地图转换为 xslt）。例如。以下 XSLT

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="1.0" 
                xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
                xmlns:ns0="inputxmlns"
                xmlns:ns1="outputxmlns"
                exclude-result-prefixes="ns0"
                >
    <xsl:output method="xml" indent="yes"/>
    <xsl:template match="/ns0:Root">
        <ns1:Root>
            <ns1:Elements>
                <xsl:for-each select="ns0:Elements/ns0:Element">
                    <xsl:element name="ns1:{normalize-space(*[local-name()='Name']/text())}">
                        <xsl:value-of select="ns0:Value/text()"/>
                    </xsl:element>
                </xsl:for-each>
            </ns1:Elements>
        </ns1:Root>
</xsl:template>
</xsl:stylesheet> 
```

将转换一个准 EAV 模式：

```
<?xml version="1.0" encoding="utf-8"?>
<Root xmlns="inputxmlns">
    <Elements>
        <Element>
            <Name>
                NameOfElement1
            </Name>
            <Value>
                ValueOfElement1
            </Value>
        </Element>
        <Element>
            <Name>
                NameOfElement2
            </Name>
            <Value>
                ValueOfElement2
            </Value>
        </Element>
    </Elements>
</Root> 
```

对此：

```
<?xml version="1.0" encoding="utf-8"?>
<ns1:Root xmlns:ns1="outputxmlns">
  <ns1:Elements>
    <ns1:NameOfElement1>
                ValueOfElement1
            </ns1:NameOfElement1>
    <ns1:NameOfElement2>
                ValueOfElement2
            </ns1:NameOfElement2>
  </ns1:Elements>
</ns1:Root> 
```

# xsd - 需要帮助从 XSD 架构创建 XML 文件

> ID：10011703
> 
> 赞同：0
> 
> 时间：2012-04-04T13:04:52.697
> 
> 标签：xsd, schema

我正在学习使用 XML 模式。我想基于“address.xsd”模式文件创建一个 XML 文件：

**“地址.xsd”**

```
<?xml version="1.0" encoding="utf-8" ?>
<xs:schema 
    elementFormDefault="qualified" 
    targetNamespace="com.namespace.address" 
    xmlns:xs="http://www.w3.org/2001/XMLSchema">
    <xs:complexType name="AddressDetails">
        <xs:sequence>
            <xs:element name="building" type="xs:string" />
            <xs:element name="street" type="xs:string" />
            <xs:element name="city" type="xs:string" />
            <xs:element name="country" type="xs:string" />
        </xs:sequence>
    </xs:complexType>
</xs:schema> 
```

**地址.xml**

```
 <?xml version="1.0" encoding="utf-8"?>

    <a:AddressDetails 
       xmlns:a="com.namespace.address" 
       xsi:schemaLocation="D:/Prac/XML/address.xsd"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" >    
        <a:building>Crosswords</a:building>
        <a:street>MainStreet</a:street>
        <a:city>LA</a:city>
        <a:country>USA</a:country>    
    </a:AddressDetails> 
```

我不明白为什么这不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T08:21:59.170

好的，我已经找到了问题所在。命名空间存在一些问题。在这里，我发布了“address.xsd”架构文件以及有效的“address.xml”。

**地址.xsd**

```
<?xml version="1.0" encoding="utf-8" ?>
<xs:schema elementFormDefault="qualified" targetNamespace="com.namespace.address" xmlns:xs="http://www.w3.org/2001/XMLSchema">
    <xs:complexType name="AddressDetails">
        <xs:sequence>
            <xs:element name="building" type="xs:string" />
            <xs:element name="street" type="xs:string" />
            <xs:element name="city" type="xs:string" />
            <xs:element name="country" type="xs:string" />
        </xs:sequence>
    </xs:complexType>
    <xs:element name="address" xmlns:q1="com.namespace.address" type="q1:AddressDetails" />
</xs:schema> 
```

**地址.xml**

```
<?xml version="1.0" encoding="utf-8"?>            
<a:address xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"  xsi:schemaLocation="com.namespace.address address.xsd" xmlns:a="com.namespace.address">
    <a:building>Crosswords</a:building>
    <a:street>Main Street</a:street>
    <a:city>LA</a:city>
    <a:country>USA</a:country>   
</a:address> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T13:10:36.220

实际上 XSD 用于验证 xml 而不是用于生成 XML

# python - 当我除以零时如何得到 NaN

> ID：10011707
> 
> 赞同：74
> 
> 时间：2012-04-04T13:05:00.513
> 
> 标签：python

当我在 Python 中进行浮点除法时，如果我除以零，则会出现异常：

```
>>> 1.0/0.0
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
ZeroDivisionError: float division 
```

我真的很想得到`NaN`or `Inf`（因为`NaN`or`Inf`将正确地传播到我的其余计算中，而不是杀死我的程序）。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：79
> 
> 时间：2012-04-04T13:09:33.327

获得此行为的最简单方法是使用`numpy.float64`而不是 Python 默认`float`类型：

```
>>> import numpy
>>> numpy.float64(1.0) / 0.0
inf 
```

当然，这需要 NumPy。您可以使用[`numpy.seterr()`](http://docs.scipy.org/doc/numpy-1.6.0/reference/generated/numpy.seterr.html)来微调错误处理。

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2012-04-04T13:12:21.637

**方法一：**

```
try:
    value = a/b
except ZeroDivisionError:
    value = float('Inf') 
```

**方法二：**

```
if b != 0:
    value = a / b
else:
    value = float('Inf') 
```

但请注意，该值也可能是`-Inf`，因此您应该进行更独特的测试。尽管如此，上面的内容应该让您知道如何去做。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-04-04T13:13:27.347

您可以尝试使用“十进制”模块：

```
>>> from decimal import *
>>> setcontext(ExtendedContext)
>>> inf = Decimal(1) / Decimal(0)
>>> print(inf)
Infinity
>>> neginf = Decimal(-1) / Decimal(0)
>>> print(neginf)
-Infinity
>>> print(neginf + inf)
NaN
>>> print(neginf * inf)
-Infinity
>>> print(dig / 0)
Infinity 
```

* * *

## 回答 #4

> 赞同：-5
> 
> 时间：2012-04-04T13:19:49.210

如果我正确理解您的问题，那么这应该是解决方案：

```
try:
   1.0/0.0
except:    
   return 'inf' 
```

您可以根据可用的各种python异常处理方法对其进行修改

* * *

## 回答 #5

> 赞同：-5
> 
> 时间：2015-07-15T12:03:24.883

我在我的一个 python 程序中使用了一个包装函数，用于一个简单的除法，当我使用的传感器没有插入时，它返回 ZeroDivisionError。它只返回 0（零），这在现实世界中是我想要的。可能会因为更多的变量而变得混乱，但是......

```
def calculation(a, b):
    if a == 0:
        return 0
    elif b == 0:
        return 0
    else:
        return a/b 
```

# wcf - i:nil="true" WCF REST 请求

> ID：10011710
> 
> 赞同：1
> 
> 时间：2012-04-04T13:05:08.530
> 
> 标签：wcf, wcf-data-services, wcf-ria-services, wcf-client, wcf-rest-starter-kit

我在 WCF 中使用数据协定，但在 xml 文件中发送了一些不需要的响应标签，我不确定如何修改数据协定类以避免发送不需要的响应字段。在下面的 XML 文件中，所有粗体和斜体的文本都是不需要的。谢谢。

我在 xml 请求中有小问题，数据以以下格式出现

```
<resller i:nil="true"> 
```

这是什么原因...

# django - 将图像显示为缩略图

> ID：10011711
> 
> 赞同：2
> 
> 时间：2012-04-04T13:05:19.450
> 
> 标签：django, django-models, django-templates, django-views

我想在我的模板中将我上传的图像显示为缩略图。我已在已安装的应用程序中安装了 sorl-thumbnail。当我执行我的应用程序时，我收到这样的模板错误：

> 语法错误。预期：`thumbnail source geometry [key1=val1 key2=val2...] as var` 异常位置：/usr/local/lib/python2.7/dist-packages/sorl_thumbnail-11.12 py2.7.egg/sorl/thumbnail/templatetags/thumbnail.py **init**，第 65 行

请帮我找到解决方案。我的代码如下

```
class Photo(models.Model):
   image = models.ImageField(upload_to='/home/forent/sites1/dreamaddress/media/uploads/properties/image')
   tag=models.CharField(max_length=255, null=True,blank=True)
   caption=models.CharField(max_length=755, null=True,blank=True)
   prop=models.ForeignKey(Property,blank=True,null=True) 
```

看法 ：

```
def img_all(request):
    imgs = Photo.objects.all()
    return render_to_response('details.html',{'imgs':imgs},context_instance=RequestContext(request)) 
```

设置.py

```
# Django settings for dreamaddress project.

DEBUG = True
TEMPLATE_DEBUG = DEBUG
AUTH_PROFILE_MODULE = 'properties.UserProfile'

ADMINS = (
    # ('Your Name', 'your_email@example.com'),
)

MANAGERS = ADMINS

DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.sqlite3', # Add 'postgresql_psycopg2', 'postgresql', 'mysql', 'sqlite3' or 'oracle'.
        'NAME': 'dreamaddress',                      # Or path to database file if using sqlite3.
        'USER': '',                      # Not used with sqlite3.
        'PASSWORD': '',                  # Not used with sqlite3.
        'HOST': '',                      # Set to empty string for localhost. Not used with sqlite3.
        'PORT': '',                      # Set to empty string for default. Not used with sqlite3.
    }
}

# Local time zone for this installation. Choices can be found here:
# http://en.wikipedia.org/wiki/List_of_tz_zones_by_name
# although not all choices may be available on all operating systems.
# On Unix systems, a value of None will cause Django to use the same
# timezone as the operating system.
# If running in a Windows environment this must be set to the same as your
# system time zone.
TIME_ZONE = 'America/Chicago'

# Language code for this installation. All choices can be found here:
# http://www.i18nguy.com/unicode/language-identifiers.html
LANGUAGE_CODE = 'en-us'

SITE_ID = 1

# If you set this to False, Django will make some optimizations so as not
# to load the internationalization machinery.
USE_I18N = True

# If you set this to False, Django will not format dates, numbers and
# calendars according to the current locale
USE_L10N = True

# Absolute filesystem path to the directory that will hold user-uploaded files.
# Example: "/home/media/media.lawrence.com/media/"
MEDIA_ROOT ='/home/forent/sites1/dreamaddress/media/'

# URL that handles the media served from MEDIA_ROOT. Make sure to use a
# trailing slash.
# Examples: "http://media.lawrence.com/media/", "http://example.com/media/"
MEDIA_URL = '/media/'

# Absolute path to the directory static files should be collected to.
# Don't put anything in this directory yourself; store your static files
# in apps' "static/" subdirectories and in STATICFILES_DIRS.
# Example: "/home/media/media.lawrence.com/static/"
STATIC_ROOT = '/home/forent/sites1/dreamaddress/sitestatic/'

# URL prefix for static files.
# Example: "http://media.lawrence.com/static/"
STATIC_URL = '/sitestatic/'

# URL prefix for admin static files -- CSS, JavaScript and images.
# Make sure to use a trailing slash.
# Examples: "http://foo.com/static/admin/", "/static/admin/".
ADMIN_MEDIA_PREFIX = '/static/admin/'

# Additional locations of static files
STATICFILES_DIRS = (
    # Put strings here, like "/home/html/static" or "C:/www/django/static".
    # Always use forward slashes, even on Windows.
    # Don't forget to use absolute paths, not relative paths.
    '/home/forent/sites1/dreamaddress/properties/static/',
)

# List of finder classes that know how to find static files in
# various locations.
STATICFILES_FINDERS = (
    'django.contrib.staticfiles.finders.FileSystemFinder',
    'django.contrib.staticfiles.finders.AppDirectoriesFinder',
#    'django.contrib.staticfiles.finders.DefaultStorageFinder',
)

# Make this unique, and don't share it with anybody.
SECRET_KEY = 'gl=@6g+m6yw_j8-ybqme0-3w+iz81ib185twqh9-l%m32a6=_j'

# List of callables that know how to import templates from various sources.
TEMPLATE_LOADERS = (
    'django.template.loaders.filesystem.Loader',
    'django.template.loaders.app_directories.Loader',
#     'django.template.loaders.eggs.Loader',
)

MIDDLEWARE_CLASSES = (
    'django.middleware.common.CommonMiddleware',
    'django.contrib.sessions.middleware.SessionMiddleware',
    'django.middleware.csrf.CsrfViewMiddleware',
    'django.contrib.auth.middleware.AuthenticationMiddleware',
    'django.contrib.messages.middleware.MessageMiddleware',
)

ROOT_URLCONF = 'dreamaddress.urls'

TEMPLATE_DIRS = (
    # Put strings here, like "/home/html/django_templates" or "C:/www/django/templates".
    # Always use forward slashes, even on Windows.
    # Don't forget to use absolute paths, not relative paths.
    '/home/forent/sites1/dreamaddress/template/'
)

INSTALLED_APPS = (
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.sites',
    'django.contrib.messages',
    'django.contrib.staticfiles',
    'django.contrib.admin',
    'properties',
    'south',
    'sorl.thumbnail',
    # Uncomment the next line to enable the admin:
    # 'django.contrib.admin',
    # Uncomment the next line to enable admin documentation:
    # 'django.contrib.admindocs',
)

# A sample logging configuration. The only tangible logging
# performed by this configuration is to send an email to
# the site admins on every HTTP 500 error.
# See http://docs.djangoproject.com/en/dev/topics/logging for
# more details on how to customize your logging configuration.
LOGGING = {
    'version': 1,
    'disable_existing_loggers': False,
    'handlers': {
        'mail_admins': {
            'level': 'ERROR',
            'class': 'django.utils.log.AdminEmailHandler'
        }
    },
    'loggers': {
        'django.request': {
            'handlers': ['mail_admins'],
            'level': 'ERROR',
            'propagate': True,
        },
    }
} 
```

详细信息.html：

```
 {% load thumbnail %}
                        <div>

                                 {% for img in imgs %}
                    <div class="slide">
                        <a href="#"><li><img src="{% thumbnail img.image 480x312 crop,sharpen,quality=90 %}" alt=""></li></a>
                <div class="caption" style="bottom:0">
                <p>{{ img.caption }}</p>
                </div>
  {% endfor %}
</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T13:15:53.380

[查看文档中的示例](http://thumbnail.sorl.net/template.html#thumbnail)

您需要引用您的几何值：

```
<img src="{% thumbnail img.image '480x312' crop="center" quality="90" %}" alt=""> 
```

# wpf - WPF 用户控件命令绑定到窗口视图模型

> ID：10011715
> 
> 赞同：1
> 
> 时间：2012-04-04T13:05:25.833
> 
> 标签：wpf, binding, mvvm

我有一个包含 UserControl1 和 UserControl2 的窗口。这些用户控件有自己的视图模型。此外，这些用户控件使用 UserControl3 来显示数据。因此，当 UserControl1 使用 UserControl3 时，UserControl3 与 UserControl1 具有相同的视图模型。

我在 UserControl3 中有一个绑定，我希望调用位于 UserControl1 的视图模型上的命令。

但我找不到让它工作的方法。欢迎任何帮助。非常感谢。

这是我的绑定不起作用：

```
<UserControl x:Class="MyNamespace.UserControl3"             
         xmlns:local="clr-namespace:MyNamespace">    
<UserControl.Resources>        
    <DataTemplate DataType="{x:Type g:GraphNode}"> 
        <StackPanel>               
            <StackPanel.ContextMenu>
                <ContextMenu>
                    <MenuItem Header="My Command" Command="{Binding Path=DataContext.MyCommand, RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type local:UserControl3}}}"/>
                </ContextMenu>
            </StackPanel.ContextMenu>               
            <Grid>
                <ContentControl Content="{Binding Data}"/>                      
            </Grid> 
        </StackPanel>             
    </DataTemplate>       
</UserControl.Resources> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T08:38:19.797

这适用于我的应用程序：

```
<DataTemplate DataType="{x:Type g:GraphNode}">
        <StackPanel Tag="{Binding}">
            <StackPanel.ContextMenu>
                <ContextMenu>
                    <MenuItem Header="My Command" Command="{Binding Path=PlacementTarget.Tag.MyCommand, RelativeSource={RelativeSource Mode=FindAncestor, AncestorType=ContextMenu}}" />
                </ContextMenu>
            </StackPanel.ContextMenu>
        </StackPanel>
    </DataTemplate> 
```

关键是 ContextMenus 位于不同的窗口中，因此您无法像通常那样访问数据上下文。
您将不得不对此进行调整，以便将包含`Command`您所寻找的对象设置为`StackPanel`（即`PlacementTarget`您的`ContextMenu`）的标签。

# java - MySQL对同一张表的多次更新超时

> ID：10011719
> 
> 赞同：2
> 
> 时间：2012-04-04T13:05:39.357
> 
> 标签：java, mysql, timeout

我正在运行一个用 Java 编写的带有 MySQL 数据库的 MMORPG 服务器。几个月来它运行得很好，但是随着我们变得越来越流行并且数据库变得越来越大，我们开始遇到问题。查询都在处理数据包的同一线程中运行（是的，它的设计很糟糕），这导致了严重的延迟——我们通过实现一个保存工作程序来伪造这一点，它定期保存 10 分钟未保存的字符在 5 个线程中。此外，还有五个其他线程处理在游戏过程中需要即时处理的数据库查询。

我们的问题是访问包含字符一般信息的表的更新由于某种原因需要很长时间然后超时。

[进程列表： http](http://i.imgur.com/Fr0kD.png) ://i.imgur.com/Fr0kD.png

`characters`更新包含大约 30 个字段，并以 WHERE id = *?* .

进程列表中出现的表格布局：

```
TABLE `characters` ( -- Contains about 300.000 rows
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `accountid` int(10) unsigned NOT NULL DEFAULT '0',
  `world` int(11) NOT NULL DEFAULT '0',
  `name` varchar(13) NOT NULL DEFAULT '',
  `level` int(11) NOT NULL DEFAULT '0',
  `exp` int(11) NOT NULL DEFAULT '0',
  `str` int(11) NOT NULL DEFAULT '0',
  `dex` int(11) NOT NULL DEFAULT '0',
  `luk` int(11) NOT NULL DEFAULT '0',
  `int` int(11) NOT NULL DEFAULT '0',
...
  `job` int(11) NOT NULL DEFAULT '0',
...
  PRIMARY KEY (`id`),
  KEY `accountid` (`accountid`),
  KEY `ranking1` (`level`,`exp`),
  KEY `ranking2` (`job`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;

TABLE `items` ( -- contains 34 million rows
  `id` bigint(20) unsigned NOT NULL AUTO_INCREMENT,
  `type` tinyint(3) unsigned NOT NULL,
  `inventoryType` tinyint(4) NOT NULL,
  `characterId` int(10) unsigned DEFAULT NULL,
  `accountId` int(10) unsigned DEFAULT NULL,
  `itemId` int(10) unsigned NOT NULL,
...
  PRIMARY KEY (`id`),
  KEY `FK_items_1` (`characterId`),
  KEY `FK_items_2` (`accountId`),
  CONSTRAINT `FK_items_1` FOREIGN KEY (`characterId`) REFERENCES `characters` (`id`) ON DELETE CASCADE,
  CONSTRAINT `FK_items_2` FOREIGN KEY (`accountId`) REFERENCES `accounts` (`id`) ON DELETE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=latin1;

TABLE `wishlists` ( -- contains ~75.000 rows
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `characterId` int(10) unsigned NOT NULL,
  `serialNumber` int(10) unsigned NOT NULL,
  PRIMARY KEY (`id`),
  KEY `FK_wishlists_1` (`characterId`),
  CONSTRAINT `FK_wishlists_1` FOREIGN KEY (`characterId`) REFERENCES `characters` (`id`) ON DELETE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=latin1; 
```

它是运行 WS2008 R2、MySQL 5.5.22 和 Java 7 的专用服务器。Java 通过 JDBC（MySQL 连接器 5.1.18）连接到数据库，并且这些查询的 autoCommit 设置为 false，isloation 为 TRANSACTION_READ_UNCOMMITTED。服务器有 32 GB RAM，其中 24 个用于 Java，其余用于 MySQL。一些设置：

```
innodb_buffer_pool_size=8G
innodb_log_file_size=1024M
innodb_thread_concurrency=10 
```

这种行为的原因可能是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T13:10:45.860

访问表时是否正确使用了锁？我不知道您的访问设置，但听起来您可能会遇到读/写饥饿。

# string - 查找 alnum 且可以包含 _ 或 # 的字符串

> ID：10011724
> 
> 赞同：0
> 
> 时间：2012-04-04T13:05:51.080
> 
> 标签：string, filter, sed, grep

我已经尝试过几次让 grep 或 sed 做我想做的事，但到目前为止都失败了，所以如果有人能提供帮助，我将不胜感激！

我有一个文本文件，其中填充了我使用 sysinternals strings.exe 从内存转储中提取的字符串行。我现在需要将此文件过滤为单个字符串，因为其中很多是无用的垃圾（例如：&644*/;@）或附加在一行上的多个字符串，例如：

```
&644*/;@
string1
string2;@%string3*£""^string4 
```

我需要的字符串可以由字母数字、下划线 (_) 和哈希 (#) 组成，因此 string_string#1 或 examplestring 或 example_string。

总之，使用上面的示例我需要能够过滤 string1、string2、string3 和 string4。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T13:12:17.090

目前尚不清楚您到底想要什么，但也许您只是在寻找：

```
 < path-to-text-file tr \; '\012' | tr -d -c 'A-Za-z0-9_#' 
```

这将删除您不需要的所有字符并将分号转换为换行符。

或者也许你只是想要

```
< path-to-text-file tr -sc 'a-zA-Z0-9_#' '\012' 
```

这将使用单个换行符转换您要忽略的每个连续字符序列。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T13:28:38.053

你可以使用 sed：

```
sed 's/[^[:alnum:]_#]\+/\n/g' dump > strings 
```

或者内联，如果您的 sed 支持它：

```
sed -i 's/[^[:alnum:]_#]\+/\n/g' dump 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T13:47:49.467

由于您要排除“644”（这是一个字母数字字符串），我建议

```
grep -o '[[:alpha:]][[:alnum:]_#]*' 
```

# openssl - 如何从 X509 证书中获取 Keyusage 值？

> ID：10011730
> 
> 赞同：2
> 
> 时间：2012-04-04T13:06:11.450
> 
> 标签：openssl, certificate, ssl-certificate, x509certificate, x509

我想从 X509 结构化证书中检索密钥使用值，我尝试了以下代码

```
 X509* lcert=NULL;
 lCert=PEM_read(filename); // function will return the certificate in X509
unsigned long lKeyusage= lCert->ex_kusage; 
```

当我打印 lKeyusage 值时 .. 有时我得到 128 ......有时我得到同一个证书的 0 .. 谁能告诉我错误是什么.? 如果我做错了，请给我一些示例代码或正确的 API ..

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-13T15:24:18.943

我认为最简单的方法是使用内存 BIO：

```
...
X509 *lcert = NULL;
BUF_MEM *bptr = NULL;
char *buf = NULL;
int loc;

FILE *f = fopen("your cert goes here", "rb");
if( (lcert = PEM_read_X509(f, &lcert, NULL, NULL)) == NULL){
    // error handling...
}

loc = X509_get_ext_by_NID( lcert, NID_key_usage, -1);
X509_EXTENSION *ex = X509_get_ext(lcert, loc);

BIO *bio = BIO_new(BIO_s_mem());
if(!X509V3_EXT_print(bio, ex, 0, 0)){
    // error handling...
}
BIO_flush(bio);
BIO_get_mem_ptr(bio, &bptr);

// now bptr contains the strings of the key_usage, take 
// care that bptr->data is NOT NULL terminated, so
// to print it well, let's do something..
buf = (char *)malloc( (bptr->length + 1)*sizeof(char) );

memcpy(buf, bptr->data, bptr->length);
buf[bptr->length] = '\0';

// Now you can printf it or parse it, the way you want...
printf ("%s\n", buf);

... 
```

就我而言，对于 teste 证书，它打印了“数字签名、不可否认性、密钥加密”

还有其他方法，例如使用 ASN1_BIT_STRING *。如果以上不符合您的需求，我可以告诉您。

问候。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-16T11:00:45.350

我使用下面的代码来获取密钥使用值。方法1；

```
 //iCertificate is in X509 format
   ASN1_BIT_STRING* lASN1UsageStr;
   lASN1UsageStr=(ASN1_BIT_STRING *)X509_get_ext_d2i(iCertificate,NID_key_usage,NULL,NULL);
    if(lASN1UsageStr == NULL)
    {
        cout<<" get ext_d2i function returns errors";
    }
    else if(lASN1UsageStr->length > 0) 
    {
        lKeyUsage = lASN1UsageStr->data[0];
        if(lASN1UsageStr->length > 1)
        { 
               lKeyUsage |= lASN1UsageStr->data[1] << 8;
        }// else{}     
    } else 
    {
        lKeyUsage = -1;    //invalid keyusage
    } 
```

方法二：

```
 X509_check_ca(lcert) ;       
     //need to call before the 
     unsigned long lKeyusage= lCert->ex_kusage; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-10T00:59:33.850

从`ssl\ssl_lib.c`第 2365 行，OpenSSL v 1.0.2d：

```
/* This call populates extension flags (ex_flags) */

X509_check_purpose(x, -1, 0); 
```

所以 OpenSSL 开发者使用这种方式。

如果深入挖掘，您可能会发现`x509v3_cache_extensions`填充标志的调用，由锁保护。

# html - 没有列表的水平滚动图像行

> ID：10011732
> 
> 赞同：0
> 
> 时间：2012-04-04T13:06:16.707
> 
> 标签：html, css

我想在（较小的）容器 div 中创建一个带有缩略图的可滚动行。

如果不将 img 包装在列表中，这可能吗？我试过了

```
float:left
display: inline-block; 
```

对于图像

和/或

```
overflow: auto; 
```

在容器 div 中。

但是 div 出现在一列中，并且没有出现水平滚动条（仅在使用溢出时垂直滚动：自动）。

jsfiddle：http: [//jsfiddle.net/8qJSr/1/](http://jsfiddle.net/8qJSr/1/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T13:19:53.440

通过将图像保存在一个在外包装内滚动的包装内，您可以很容易地实现这一点。

jsfiddle链接：[这里](http://jsfiddle.net/3KQYy/2/)；

的HTML：

```
 <div id="wrapper">
   <div id="innerwrapper">
    <img />
    <img />
    <img />
    <img />
    <img />
    <img />
    <img />
   </div>
 </div>​ 
```

CSS：

```
#wrapper { height: 100px; overflow: auto; width: 500px; overflow-y: hidden;}
img {height: 100px; width: 200px;float: left;}
#innerwrapper { width: 1200px;}​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T13:12:10.987

如果您将图像包含在一个椭圆形的 div 中，那么上面的 css 应该可以工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T13:15:32.997

`float:left;`会正常工作。对于这样的标记

```
<div id="collection">
   <img ... />
   ...
</div> 
```

CSS

```
#collection {
    height: 200px;
    overflow: auto;
}
#collection img { float:left } 
```

# c++ - 在 C++ 中创建线程池的最简单方法？

> ID：10011733
> 
> 赞同：2
> 
> 时间：2012-04-04T13:06:18.440
> 
> 标签：c++, multithreading, c++11, threadpool

创建线程池的最简单方法（或者，至少获取工作线程的代码）是否来自 C++11？

我在工作中访问库时遇到问题，在获取 C++11 编译器时遇到问题。从 boost 中找到线程池示例会更容易/更难吗？我也许可以安装 boost 库。如果没有，我将不得不尝试找到一种方法来获得 C++11 编译器。

（如果有人想知道我为什么要问，我安装了 VS2010，但没有 C++11，由于 TCP 端口的工作限制，我无法更新 cygwin）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T13:16:03.863

C++11 没有任何特别的内置线程池。我认为您想要基于 Boost 的[线程池](http://threadpool.sourceforge.net/)实现。

# php - Amazon s3 使用存储桶策略放置存储桶

> ID：10011734
> 
> 赞同：0
> 
> 时间：2012-04-04T13:06:27.673
> 
> 标签：php, curl, amazon-s3, amazon, policy

我正在尝试添加我正在阅读亚马逊 s3 文档的存储桶策略。 [http://docs.amazonwebservices.com/AmazonS3/latest/dev/setpolicyonbucket.html](http://docs.amazonwebservices.com/AmazonS3/latest/dev/setpolicyonbucket.html)

在文档中它说要运行此代码。

```
PUT /?policy HTTP/1.1
Host: bucket.s3.amazonaws.com  
Date: Tue, 04 Apr 2010 20:34:56 GMT  
Authorization: AWS AKIAIOSFODNN7EXAMPLE:VGhpcyBSAMPLEBieSBlbHZpbmc= 

{
"Version":"2008-10-17",
"Id":"aaaa-bbbb-cccc-dddd",
"Statement" : [
    {
        "Effect":"Allow",
        "Sid":"1", 
        "Principal" : {
            "AWS":["1111-2222-3333","4444-5555-6666"]
        },
        "Action":["s3:GetObject*"],
        "Resource":"arn:aws:s3:::mybucket/*"
    }
 ] 
} 
```

这正是我需要做的，我正在努力解决的是我如何运行 php curl 请求来做到这一点我从哪里开始？对此我很陌生，因为到目前为止我一直在使用未经设计的亚马逊 s3 类。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T13:41:06.647

[setAccessControlPolicy](http://undesigned.org.za/2007/10/22/amazon-s3-php-class/documentation#setAccessControlPolicy)方法是您要查找的方法吗？它允许您像上面的示例一样设置访问控制。从文档：

> setAccessControlPolicy (string $bucket, [string $uri = ''], [array $acp = array()]) 返回顶部
> 
> $uri = '' 时为对象或桶设置访问控制策略
> 
> 例子：

```
<?php

    if (($acp = S3::getAccessControlPolicy($bucket, $uri)) !== false) {
        // Here you would modify the $acp array...
        // For example, grant access to the S3 LogDelivery system:
        $acp["acl"][] = array(
            "type" => "Group", "uri" => "http://acs.amazonaws.com/groups/s3/LogDelivery", "permission" => "WRITE"
        );
        $acp["acl"][] = array(
            "type" => "Group", "uri" => "http://acs.amazonaws.com/groups/s3/LogDelivery", "permission" => "READ_ACP"
        );
        // Then update the policy using the modified $acp array:
        if (S3::setAccessControlPolicy($bucket, $uri, $acp)) {
            echo "Policy updated";
        }
    }
?> 
```

# websocket - 多个 ClientBootstrap 问题

> ID：10011741
> 
> 赞同：1
> 
> 时间：2012-04-04T13:07:00.420
> 
> 标签：websocket, netty

我正在编写一个用于 websocket 服务器负载测试的工具。我需要创建很多（数万个）到服务器的客户端连接。

所以我有一个客户端类。在这个类中，我创建了以下新版本：

1.  ChannelPipelineFactory（与我的处理程序和 webscoket 客户端握手）
2.  客户端引导

在 run() 方法中，我有以下代码：

```
public void run() {
    clientBootstrap.setPipelineFactory(clientChannelPipelineFactory);

    ChannelFuture future = clientBootstrap.connect(
        new InetSocketAddress(
            clientConfiguration.getHost(),
            clientConfiguration.getPort()
        )
    );

    try {
        future.awaitUninterruptibly().rethrowIfFailed();

        WebSocketClientHandshaker handshaker = clientChannelPipelineFactory.getHandshaker();

        channel = future.getChannel();
        handshaker.handshake(channel).awaitUninterruptibly().rethrowIfFailed();
    } catch (Exception e) {
        log.error("Error in the client channel", e);
        stop();
    }
} 
```

ChannelFuture 返回的通道保存为客户端中的字段。

然后我做我的工作并尝试关闭所有打开的频道。stop() 方法：

```
public void stop() {
    log.debug(String.format("Close channel for client(%s)", id));
    if (channel != null) {
        if (channel.isWritable()) {
            log.debug(String.format("Channel for client(%s) is writable", id));
            ChannelFuture writeFuture = channel.write(new CloseWebSocketFrame());
            writeFuture.addListener(ChannelFutureListener.CLOSE);
        }
    }

    clientBootstrap.releaseExternalResources();
} 
```

但是，当在任何客户端上调用 stop() 时，它会关闭所有通道！？

ps 关闭所有通道的代码（单线程）：

```
for (FSBBridgeServerClient client : clients) {
        for (FSBBridgeServerClient subClient : clients) {
            log.debug("c:" + subClient.getChannel());
            log.debug("c:" + subClient.getChannel().isOpen());
        }
        client.stop();
} 
```

一些调试日志：

```
2012-04-04 17:19:29,441 DEBUG [main] ClientApp - c:[id: 0x2344b18f, /127.0.0.1:38366 => localhost/127.0.0.1:5544]
2012-04-04 17:19:29,441 DEBUG [main] ClientApp - c:true
2012-04-04 17:19:29,442 DEBUG [main] ClientApp - c:[id: 0x01c20eb7, /127.0.0.1:38367 => localhost/127.0.0.1:5544]
2012-04-04 17:19:29,442 DEBUG [main] ClientApp - c:true

2012-04-04 17:19:34,414 DEBUG [main] ClientApp - c:[id: 0x2344b18f, /127.0.0.1:38366 :> localhost/127.0.0.1:5544]
2012-04-04 17:19:34,414 DEBUG [main] ClientApp - c:false
2012-04-04 17:19:34,414 DEBUG [main] ClientApp - c:[id: 0x01c20eb7, /127.0.0.1:38367 :> localhost/127.0.0.1:5544]
2012-04-04 17:19:34,414 DEBUG [main] ClientApp - c:false 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T23:04:16.983

我认为你的问题是打电话`clientBootstrap.releaseExternalResources();`。

根据[文档](http://netty.io/docs/stable/api/org/jboss/netty/bootstrap/Bootstrap.html#releaseExternalResources%28%29)...此方法只是将调用委托给 ChannelFactory.releaseExternalResources()。

# javascript - 如何显示带有文本区域和几个单选按钮的 jquery 弹出窗口？

> ID：10011743
> 
> 赞同：0
> 
> 时间：2012-04-04T13:07:06.537
> 
> 标签：javascript, jquery, html

我需要显示一个弹出窗口，要求用户从给定的单选按钮选项中选择一个（比如说 3 个单选按钮选项）。或者在给定的文本区域输入一些东西（**只能做一个**）

一旦用户在弹出窗口中单击“确定”按钮，我想将文本区域中选定的单选按钮值或文本传递给变量。

谁能告诉我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T13:11:19.633

我建议采用灯箱方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T13:14:55.780

您可以使用灯箱或 jquery 工具[覆盖](http://jquerytools.org/demos/overlay/modal-dialog.html)来创建表单，然后将变量放回回调中。

# wpf - 如何设置 TemplateBinding 以解决 WPF 错误“如果不在模板中，则无法设置 TemplateBinding。”？

> ID：10011747
> 
> 赞同：1
> 
> 时间：2012-04-04T13:07:22.670
> 
> 标签：wpf, templatebinding

我正在尝试实现此处概述的示例：

[http://www.codeproject.com/Articles/30994/Introduction-to-WPF-Templates](http://www.codeproject.com/Articles/30994/Introduction-to-WPF-Templates)

作者声明“该`ContentPresenter`控件可用于显示 WPF 控件的内容。”

使用以下代码：

```
<ContentPresenter VerticalAlignment="Center" HorizontalAlignment="Center" 
Content="{TemplateBinding Button.Content}" /> 
```

我已将其添加到我的窗口中，如下所示：

```
<Window x:Class="HKC.Desktop.Window1"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="Window1" Height="487" Width="765.924" Loaded="Window_Loaded">

    <Grid x:Name="mainGrid" Background="#FF252525">
        <Button Content="Push Me" Template="{StaticResource buttonTemplate}" Name="button1" Height="100" Width="100"></Button>

        <ContentPresenter VerticalAlignment="Center" HorizontalAlignment="Center"  Content="{TemplateBinding Button.Content}" />
    </Grid>

</Window> 
```

但我收到以下错误：

```
Cannot set a TemplateBinding if not in a template. 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T13:23:38.697

您需要将 ContentPresent 放在 ControlTemplate 中，就像这样

```
<ControlTemplate x:Key="buttonTemplate" TargetType="{x:Type Button}">
            <Grid>
                <Ellipse Name="el1" Fill="Orange" Width="100" Height="100">
                </Ellipse>
                <ContentPresenter VerticalAlignment="Center" HorizontalAlignment="Center" 
                        Content="{TemplateBinding Button.Content}" />
            </Grid>
</ControlTemplate> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T13:24:25.670

问题是你没有模板。您的 XAML 应该看起来像这样：

```
<Window x:Class="HKC.Desktop.Window1" 
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" 
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" 
    Title="Window1" Height="487" Width="765.924" Loaded="Window_Loaded">
    <Window.Resources>
        <ControlTemplate x:Key="buttonTemplate" TargetType="{x:Type Button}">      
            <Ellipse Name="el1" Fill="Orange" Width="100" Height="100">            
            <ContentPresenter VerticalAlignment="Center" HorizontalAlignment="Center" Content="{TemplateBinding Button.Content}" /> 
        </ControlTemplate>
    </Window.Resources> 

    <Grid x:Name="mainGrid" Background="#FF252525"> 
        <Button Content="Push Me" Template="{StaticResource buttonTemplate}" Name="button1" Height="100" Width="100"/>  
    </Grid> 
</Window> 
```

# php - 在 PHPCrawl 中的大型网站上恢复爬行

> ID：10011752
> 
> 赞同：0
> 
> 时间：2012-04-04T13:07:45.320
> 
> 标签：php, session

有什么方法可以将爬虫会话保存在 mysql 数据库中或以任何方式使用 PHP 恢复此会话？[http://phpcrawl.cuab.de/](http://phpcrawl.cuab.de/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T13:11:05.663

不，没有内置的方法可以做到这一点，但是是的，您可以通过扩展现有类来自行添加会话管理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T10:16:50.167

由于 0.81 版 phpcrawl 能够恢复爬行过程 (http://phpcrawl.cuab.de/resume_aborted_processes.html)

# java - 排查“类型参数 T 隐藏类型 T”警告

> ID：10011758
> 
> 赞同：51
> 
> 时间：2012-04-04T13:08:15.917
> 
> 标签：java, generics, warnings

我在 eclipse（最新版本）中收到以下代码的警告。

```
public interface A<T> extends B<T> {
     public T getObject();
} 
```

警告出现在“A”中的“T”处，内容为：“类型参数 T 正在隐藏类型 T”。

奇怪的部分是以下代码不会产生错误或警告。

```
public interface A extends B<T> {
     public T getObject();
} 
```

但是现在我不能扩展 A 而告诉它什么类型`T`。

我完全糊涂了。有谁知道为什么会这样？

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2012-04-04T13:20:43.047

您是否在某处有一个名为 的类或接口`T`，或者您是否在某处`T`用作具体类型名称而不是类型参数（这意味着您可能忘记了其他地方，例如在封闭类中，以指定这`T`是一个类型参数)? 我可以用这个重现你的问题：

```
class T {  // A concrete type T
}

interface B<T> {  // warning: The type parameter T is hiding the type T
}

interface A<T> extends B<T> {  // warning: The type parameter T is hiding the type T
    T getObject();
} 
```

如果我删除 class `T`，它就会消失。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-12-13T15:56:12.707

只是为了扩展最后一个答案（我知道问题已经过时且已关闭），我将提供一个最简单的案例，您可以在其中理解错误：

想象一个具有通用方法的接口，例如：

```
<T> Output<T> doSomething(Input<T> input); 
```

如果您尝试将其覆盖为：

```
@Override
public <Object> Output<Object> soSomething(Input<Object> input){
    /*..*/
} 
```

编译器会警告您：

> 类型参数 Object 隐藏了类型 Object

它的意思是“Object”在这里是一个通用标签，它不是java.lang.Object。如果您将对象类型更改为 V 或任何任意字母，则不会发生这种情况。但是您正在使用与实际定义的类发生冲突的 appelative，因此编译器会警告您，您的这个 Object 隐藏了原本会被理解为公共 Object 类的东西。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-08-16T15:44:32.690

即使这个问题已经回答了，因为主题行是关于 ("The type parameter T is hidden the type T") ，只是想补充一点，这个警告并不总是意味着有一个类或实际类型“T”正如所有答案/评论所建议的那样，在类路径（或内部类）中的某处声明。

考虑以下：

```
public class Cache<K extends Comparable<K>,V> {

  private final  ConcurrentHashMap<K,V> _concurrentMap =  new ConcurrentHashMap<K,V>();

  public <K,V> void add(K key ,V  value){ // Compiler warning - The type parameter V is hiding type V (as also for K)

    _concurrentMap.put(key, value); //Compiler error - K and V passed to add are now being considered different
                                    //from whats declared for _concurrentMap variable
  }

  public V get(K key){
    return _concurrentMap.get(key);
  }

  public int size(){
    return _concurrentMap.size();
  }
} 
```

因为 K ,V 是在类级别声明的，所以方法 add 也“继承”它。所以你最终会得到同样的警告。

下面当然删除了警告和编译器错误

```
public <E,F> void add(K key ,V  value){ 
    _concurrentMap.put(key, value); 
} 
```

而我原来的方法是这样的。（我的方法不需要额外的泛型类型）

```
public void add(K key ,V  value){ 
    _concurrentMap.put(key, value); 
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-04T13:22:09.693

我尝试：

```
public interface B<T> {
    T getObject();

    public  interface A<T> extends B<T>{
        T getObject();
    }
} 
```

在 Eclipse Indigo Service Release 2 上，没有警告或错误

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-04-07T16:03:47.553

**`<T>`**只是删除返回类型前面的泛型删除了警告。

这是较早的代码：

```
private <T> LocalDate convertToDate(Root<T> root, String name, String value) {
    ..........
    ..........
    return LocalDate.parse(value, dtf);
} 
```

警告消失在下面

```
private LocalDate convertToDate(Root<T> root, String name, String value) {
    ..........
    ..........
    return LocalDate.parse(value, dtf);
} 
```

# ios - RMMapView 缩小到坐标

> ID：10011759
> 
> 赞同：1
> 
> 时间：2012-04-04T13:08:22.713
> 
> 标签：ios, xcode, map, route-me

我正在尝试在 iPhone 应用程序中设置离线地图，但结果不是很好。

我正在使用 route-me 框架，我有一个离线文件 .db（由 tiles2sqlite 创建），并且地图视图受坐标约束（使用 setConstraintsSW:NE:)。

缩小（捏合手势）时出现我的问题，此错误消息“缩放将使地图超出范围：无缩放”始终存在，并且当您不在地图的真实中心附近时很难缩小。

是否有与地图具有良好滚动视图行为的 Offmaps（iOS 应用程序）具有相同结果的解决方案？

干杯。

西里尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T12:19:16.987

相反，您可以使用设置 setConstraintsSW:NE：我们可以将 RMMapview 设置为，

```
RMDBMapSource *mapSrc = [[[RMDBMapSource alloc] initWithPath:@"mapDB.sqlite"] autorelease];

[[RMMapContents alloc] initWithView:mapView tilesource:mapSrc centerLatLon:mapSrc.centerOfCoverage zoomLevel:17 maxZoomLevel:18 minZoomLevel:15 backgroundImage:image  screenScale:10 ]; 
```

这将使您能够根据设置的参数进行缩放

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T14:59:49.540

我不得不编辑 RMMapView.m 源代码来快速修复。查找`- (void)zoomByFactor: (float) zoomFactor near:(CGPoint) center animated:(BOOL)animated`方法（靠近 300 行）。它具有约束逻辑，我将其关闭：

```
- (void)zoomByFactor: (float) zoomFactor near:(CGPoint) center animated:(BOOL)animated   
{
    if ( _constrainMovement && false ) // turn constraint checks off 
    {
        //check that bounds after zoom don't exceed map constraints
        //the logic is copued from the method zoomByFactor,
        float _zoomFactor = [self.contents adjustZoomForBoundingMask:zoomFactor];
        float zoomDelta = log2f(_zoomFactor);
        ...
    }
    ...
} 
```

现在地图可以平滑缩放，但此修复可能会产生副作用。

# ruby - Typhoeus Hydra 内存不足

> ID：10011762
> 
> 赞同：0
> 
> 时间：2012-04-04T13:08:44.060
> 
> 标签：ruby, hydra, typhoeus

我编写了一个从文件中检查 url 的脚本（使用 ruby​​ gem Typhoeus）。我不知道为什么当我运行我的代码时内存使用量会增加。通常在 10000 个 url 脚本崩溃之后。有什么解决办法吗？在此先感谢您的帮助。我的代码：

```
require 'rubygems'
require 'typhoeus'

def run file
  log = Logger.new('log')
  hydra = Typhoeus::Hydra.new(:max_concurrency => 30)
  hydra.disable_memoization
  File.open(file).each do |url|
    begin
      request = Typhoeus::Request.new(url.strip, :method => :get, :follow_location => true)
      request.on_complete do |resp|
        check_website(url, resp.body)        
      end
      puts "queuing #{ url }"
      hydra.queue(request)
      request.destroy
    rescue Exception => e
      log.error e
    end
  end
  hydra.run
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T15:24:43.250

正如您建议的那样，我已经对我的代码进行了改进，我正在批量处理 hydra 的 url。它适用于正常的内存使用，但我不知道为什么在大约 1000 个 url 之后它就停止获取新的。这很奇怪，没有错误，脚本仍在运行，但它不发送/获取新请求。我的代码：

```
def run file, concurrency
      log = Logger.new('log')
      log.info '*** Hydra started ***'
      queue = []
      File.open(file).each do |uri|
        queue << uri
          if queue.size == concurrency * 5
          hydra = Typhoeus::Hydra.new(:max_concurrency => concurrency)
          hydra.disable_memoization
          queue.each do |url|
            request = Typhoeus::Request.new(url.strip, :method => :get, :follow_location => true, :max_redirections => 2, :timeout => 5000)
            request.on_complete do |resp|
            check_website(url, resp.body)
              puts "#{url} code: #{resp.code} curl_msg #{resp.curl_error_message}"
            end
            puts "queuing #{url}"
            hydra.queue(request)
          end
          puts 'hydra run'
          hydra.run
          queue = []
        end
        end
      log.info '*** Hydra finished work ***'
    end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T13:31:51.407

一种方法可能是调整您的文件处理 - 而不是从文件中读取一行并立即创建请求对象，而是尝试分批处理它们（例如一次 5000 个）并限制您的请求率/内存消耗。

# javascript - jqPlot 在 DateAxisRenderer 上挂断

> ID：10011763
> 
> 赞同：1
> 
> 时间：2012-04-04T13:08:44.600
> 
> 标签：javascript, jquery, date, jqplot

今天我下载了最新版本的jqPlot并用数据填充了一个Plot，我遇到了DateAxisRenderer“挂断”问题。至少我认为这可能是问题所在。

我尝试注入此修补程序（http://www.cefolger.net/2012/02/jqplot-crashhanginfinite-loop-in.html），但它仍然无法正常工作。

我的设置如下。

```
<div id="history_chart" stlye="height: 300px; width: 500px;">

</div>

<script type="text/javascript">
    $(function(){
        var history_data = <?php echo json_encode($history_data); ?>;
        var historyDataRenderer = function(){
            console.log(history_data);
            return history_data;
        }
        var history_plit = $.jqplot('history_chart',[], {
            title: "Tarifhistorie",
            dataRenderer: historyDataRenderer,
            axes: {
                xaxis:{
                    renderer: $.jqplot.DateAxisRenderer,
                    tickOptions: '%e.%#m.%Y (%#H:%#M:%#S)'
                },
                yaxis:{}
            }
        });
    });
</script> 
```

我通过的数据：

```
[["29.02.2012 16:11", "1"], ["26.03.2012 15:56", "2"], ["26.03.2012 15:57", "6"], ["26.03.2012 15:57", "1"], ["27.03.2012 11:33", "3"], ["27.03.2012 11:36", "1"], ["27.03.2012 11:36", "3"], ["27.03.2012 11:36", "2"], ["27.03.2012 11:36", "1"], ["28.03.2012 11:35", "1"], ["28.03.2012 11:38", "1"], ["28.03.2012 11:59", "1"], ["28.03.2012 12:03", "1"]] 
```

格式化为列表：

*   29.02.2012 16:11,1
*   26.03.2012 15:56,2
*   26.03.2012 15:57,6
*   26.03.2012 15:57,1
*   27.03.2012 11:33,3
*   27.03.2012 11:36,1
*   27.03.2012 11:36,3
*   27.03.2012 11:36,2
*   27.03.2012 11:36,1
*   28.03.2012 11:35,1
*   28.03.2012 11:38,1
*   28.03.2012 11:59,1
*   28.03.2012 12:03,1

删除 tickOptions 并直接添加 history_data + 在 history_data 周围添加括号有效，但我不太高兴，因为日期刻度为 4 天，我需要更精确的刻度。

```
<script type="text/javascript">
    $(function(){
        $.jqplot.config.enablePlugins = true;
        var history_data = <?php echo json_encode($history_data); ?>;

        var historyDataRenderer = function(){
            //console.log(history_data);
            for(var i=0;i<history_data.length;i++){
                var randString = (""+Math.random(1568));
                history_data[i][0] = history_data[i][0] + ":"+randString.substring(2, 4);
            }
            console.log(history_data);
            return history_data;
        }
        historyDataRenderer();
        var history_plot = $.jqplot('history_chart', [history_data], {
            title: "Tarifhistorie",
            /*dataRenderer: historyDataRenderer,*/
            axes: {
                xaxis:{
                    renderer: $.jqplot.DateAxisRenderer
                },
                yaxis:{
                    min: 0,
                    max: 10
                }
            },
            highlighter: {
                show: true,
                sizeAdjust: 7.5
            },
            cursor: {
                show: false
            }
        });
    });
</script> 
```

# jquery - Jquery选项卡和导航z-index定位

> ID：10011766
> 
> 赞同：1
> 
> 时间：2012-04-04T13:08:53.037
> 
> 标签：jquery, z-index, jquery-tabs

![在此处输入图像描述][1]在我的两个演示和屏幕截图中，您可以理解到目前为止我已经成功了，但我需要更多帮助。tab **3**需要在 z-index 中，tab **2**应该刚好在 content number 2 的上面。希望容易理解。

[http://jsfiddle.net/QxgDr/2/](http://jsfiddle.net/QxgDr/2/)

或者更好的例子是绝对位置的导航：

[http://jsfiddle.net/QxgDr/12/](http://jsfiddle.net/QxgDr/12/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T13:29:12.500

恐怕`z-index`只会在兄弟姐妹之间工作，而不是堂兄弟。选项卡应该是页面的兄弟姐妹来实现这一点。您也可以使页面本身成为`<li>`'s 的一部分，这在解决问题的同时还可以改善语义。那么你应该只处理`<li>`'`z-index`和利润！

编辑：

```
<ul id="tabs">
    <li id="tab_1">
        <figure><img alt="..."></figure>
        <article>...</article>
    </li>    
    <li id="tab_2">
        <figure><img alt="..."></figure>
        <article>...</article>
    </li>
    <li id="tab_3">
        <figure><img alt="..."></figure>
        <article>...</article>
    </li>
</ul> 
```

从这里只需`figures`放置您喜欢的位置（您甚至可以添加`z-index:1`以将它们堆叠在 上`<articles>`），然后`<li>`像处理制表符一样使用 's。

# informatica-powercenter - 从 DEV 将工作流导入 QA 环境时出错

> ID：10011767
> 
> 赞同：0
> 
> 时间：2012-04-04T13:08:59.457
> 
> 标签：informatica-powercenter, informatica

我在尝试将工作流从 DEV 环境导入到 QA 时遇到错误。成功后我可以导入，但有人删除了它，现在我再次尝试，然后它给出了错误：

> 04/04/2012 16:56:46 *** * 导入映射：m_BTTC_Load_T3_T1 ...
> ：找不到转换定义：TEMP_BTTC_TABLE_1
> ** 导入失败：m_BTTC_Load_T3_T1

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T13:33:44.883

这通常发生在您的映射指的是发现丢失的可重用组件（转换）时。不一定是捷径，但它们也可能是这种行为的原因。

我的建议是，从 Repository Manager 重新导出（以便在导出文件中刷新更改的依赖项）工作流，然后重新导入它。

# php - 我可以使用 PDO 执行并发请求和修改吗

> ID：10011772
> 
> 赞同：0
> 
> 时间：2012-04-04T13:09:32.040
> 
> 标签：php, pdo

我有一个mysql表，里面有很多数据。此表中的所有行都需要以一种在纯 SQL 中不易表达的方式修改一个字段。

我希望能够逐行遍历表格，并一一更新所有条目。但是要做到这一点，我会做类似的事情：

```
$sql = "SELECT id,value FROM objects";
foreach ($dbh->query($sql) as $row)
{
    $value = update_value( $row['value'] );
    $id = $row['id'];
    $update_sql = "UPDATE objects SET value='$value' WHERE id=$d";
    $dbh->query( $update_sql );
} 
```

这会做坏事吗？（除了可能很慢？）

澄清：特别是我担心第一次选择使用游标，而不是在foreach中一次点击检索所有数据，然后我不知道循环内更新导致游标失效。如果有一些规则，比如“不要在用另一个游标扫描同一个表时更新它”，它很可能只会出现在大表上，所以我执行一个小测试用例几乎没有用。

如果有人可以向我指出这样做是可以的文档，而不是以这种方式工作的特定问题，那也很好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T12:54:14.457

似乎您一开始就有两个选择：

1.  （直截了当）：在开始循环之前使用类似 'fetchAll' 来获取第一个查询的所有结果。这将帮助您避免光标重叠。
2.  （更模糊）：将其更改为使用存储函数（代替“update_value”），这样您就可以将两个查询变成一个“更新对象集值=some_function（id）”

根据此操作的大小和持续时间，您可能需要事先锁定所有内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T13:02:07.970

单个查询的结果是一致的，所以更新不会影响它。要牢记：

1.  使用准备好的语句；它将减少您的进程和数据库之间的流量，因为每次只传输值而不是整个查询。

2.  如果您担心其他进程同时运行，您应该使用事务和适当的锁定，例如

    ```
    // transaction started
    SELECT id,value 
    FROM objects 
    LOCK IN SHARE MODE

    // your other code

    // commit transaction 
    ```

# eclipse - 如何将本地文件夹复制到 Subclipse / Eclipse 文件夹结构？

> ID：10011775
> 
> 赞同：0
> 
> 时间：2012-04-04T13:09:36.647
> 
> 标签：eclipse, svn, subclipse

我可以将包含许多子目录甚至 .svn 子目录的主文件夹中的文件夹拖放到我的子剪辑 Ecplipse 中的导航器视图中吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T14:40:31.807

如果您想使用 Subversion 存储库中的文件，为什么不从 Eclipse 中再次检出它们呢？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T13:13:59.390

通过尝试找到答案 - 是的，你可以。您必须右键单击新文件夹并选择“添加到版本控制”。

如果您的文件夹/子文件夹包含旧的 .svn 文件夹，您可以再次从 eclipse 中删除该文件夹，再次提交并复制。

或者，只需在 eclipse 中手动重新创建文件夹/子文件夹并将文件拖放到

无论哪种方式，您都会失去对旧文件的版本控制。如果要保留版本控制，则必须使用 SVNAdmin 工具进行迁移。

# c# - 使用属性防止在 ASP.NET MVC 中缓存特定操作

> ID：10011780
> 
> 赞同：207
> 
> 时间：2012-04-04T13:09:47.830
> 
> 标签：c#, jquery, .net, asp.net-mvc, asp.net-mvc-3

我有一个 ASP.NET MVC 3 应用程序。此应用程序通过 jQuery 请求记录。jQuery 回调一个以 JSON 格式返回结果的控制器操作。我无法证明这一点，但我担心我的数据可能会被缓存。

我只希望将缓存应用于特定操作，而不是所有操作。

是否有一个属性可以让我执行操作以确保数据不会被缓存？如果没有，我如何确保浏览器每次都获得一组新记录，而不是缓存组？

* * *

## 回答 #1

> 赞同：313
> 
> 时间：2012-04-04T13:15:56.110

为确保 JQuery 不缓存结果，请在您的 ajax 方法中输入以下内容：

```
$.ajax({
    cache: false
    //rest of your ajax setup
}); 
```

或者为了防止在 MVC 中缓存，我们创建了自己的属性，您也可以这样做。这是我们的代码：

```
[AttributeUsage(AttributeTargets.Class | AttributeTargets.Method)]
public sealed class NoCacheAttribute : ActionFilterAttribute
{
    public override void OnResultExecuting(ResultExecutingContext filterContext)
    {
        filterContext.HttpContext.Response.Cache.SetExpires(DateTime.UtcNow.AddDays(-1));
        filterContext.HttpContext.Response.Cache.SetValidUntilExpires(false);
        filterContext.HttpContext.Response.Cache.SetRevalidation(HttpCacheRevalidation.AllCaches);
        filterContext.HttpContext.Response.Cache.SetCacheability(HttpCacheability.NoCache);
        filterContext.HttpContext.Response.Cache.SetNoStore();

        base.OnResultExecuting(filterContext);
    }
} 
```

然后用 . 装饰你的控制器`[NoCache]`。或者为所有你做这件事，你可以把属性放在你继承你的控制器（如果你有一个）的基类的类上，就像我们在这里一样：

```
[NoCache]
public class ControllerBase : Controller, IControllerBase 
```

如果您需要它们不可缓存，您还可以使用此属性装饰一些操作，而不是装饰整个控制器。

如果您的类或动作`NoCache`在浏览器中呈现时没有，并且您想检查它是否正常工作，请记住在编译更改后您需要在浏览器中执行“硬刷新”（Ctrl+F5）。在您这样做之前，您的浏览器将保留旧的缓存版本，并且不会使用“正常刷新”(F5) 来刷新它。

* * *

## 回答 #2

> 赞同：269
> 
> 时间：2013-09-04T18:12:48.470

您可以使用内置的缓存属性来防止缓存。

对于 .net 框架：`[OutputCache(NoStore = true, Duration = 0)]`

对于 .net 核心：`[ResponseCache(NoStore = true, Duration = 0)]`

请注意，无法强制浏览器禁用缓存。你能做的最好的就是提供大多数浏览器都会接受的建议，通常以标题或元标记的形式。此装饰器属性将禁用服务器缓存并添加此标头：`Cache-Control: public, no-store, max-age=0`。它不添加元标记。如果需要，可以在视图中手动添加这些。

此外，JQuery 和其他客户端框架将尝试通过向 url 添加内容（如时间戳或 GUID）来欺骗浏览器，使其不使用资源的缓存版本。这在使浏览器再次请求资源方面很有效，但并不能真正阻止缓存。

最后一点。您应该知道，资源也可以缓存在服务器和客户端之间。ISP、代理和其他网络设备也缓存资源，它们经常使用内部规则而不查看实际资源。对于这些，您无能为力。好消息是它们通常会缓存较短的时间范围，例如几秒钟或几分钟。

* * *

## 回答 #3

> 赞同：49
> 
> 时间：2014-08-05T16:47:56.633

所有你需要的是：

```
[OutputCache(Duration=0)]
public JsonResult MyAction( 
```

或者，如果您想为整个控制器禁用它：

```
[OutputCache(Duration=0)]
public class MyController 
```

尽管此处的评论存在争议，但这足以禁用浏览器缓存 - 这会导致 ASP.Net 发出响应标头，告诉浏览器文档立即过期：

![OutputCache Duration=0 响应标头：max-age=0, s-maxage=0](../Images/f2714c2d13b8f61e63d963b49de5def5.png)

* * *

## 回答 #4

> 赞同：17
> 
> 时间：2013-09-16T14:08:46.480

在控制器操作中，将以下几行附加到标题

```
 public ActionResult Create(string PositionID)
    {
        Response.AppendHeader("Cache-Control", "no-cache, no-store, must-revalidate"); // HTTP 1.1.
        Response.AppendHeader("Pragma", "no-cache"); // HTTP 1.0.
        Response.AppendHeader("Expires", "0"); // Proxies. 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2015-02-26T12:55:19.613

这是`NoCache`mattytommo 提出的属性，通过使用 Chris Moschini 的回答中的信息进行了简化：

```
[AttributeUsage(AttributeTargets.Class | AttributeTargets.Method)]
public sealed class NoCacheAttribute : OutputCacheAttribute
{
    public NoCacheAttribute()
    {
        this.Duration = 0;
    }
} 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2016-05-17T08:17:30.310

对于 MVC6 ( **DNX** )，没有`System.Web.OutputCacheAttribute`

注意：设置`NoStore`Duration 参数时不考虑。可以为首次注册设置初始持续时间并使用自定义属性覆盖它。

但是我们有`Microsoft.AspNet.Mvc.Filters.ResponseCacheFilter`

```
 public void ConfigureServices(IServiceCollection services)
        ...
        services.AddMvc(config=>
        {
            config.Filters.Add(
                 new ResponseCacheFilter(
                    new CacheProfile() { 
                      NoStore=true
                     }));
        }
        ...
       ) 
```

可以使用自定义属性覆盖初始过滤器

```
 [AttributeUsage(AttributeTargets.Class | AttributeTargets.Method)]
    public sealed class NoCacheAttribute : ActionFilterAttribute
    {
        public override void OnResultExecuting(ResultExecutingContext filterContext)
        {
            var filter=filterContext.Filters.Where(t => t.GetType() == typeof(ResponseCacheFilter)).FirstOrDefault();
            if (filter != null)
            {
                ResponseCacheFilter f = (ResponseCacheFilter)filter;
                f.NoStore = true;
                //f.Duration = 0;
            }

            base.OnResultExecuting(filterContext);
        }
    } 
```

这是一个用例

```
 [NoCache]
    [HttpGet]
    public JsonResult Get()
    {            
        return Json(new DateTime());
    } 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2020-03-13T21:27:31.007

ASP.NET MVC 5 解决方案：

1.  在中心位置缓存预防代码：`App_Start/FilterConfig.cs`的`RegisterGlobalFilters`方法：

```
 public class FilterConfig
    {
        public static void RegisterGlobalFilters(GlobalFilterCollection filters)
        {
            // ...
            filters.Add(new OutputCacheAttribute
            {
                NoStore = true,
                Duration = 0,
                VaryByParam = "*",
                Location = System.Web.UI.OutputCacheLocation.None
            });
        }
    } 
```

2.  一旦你有了它，我的理解是你可以通过在或级别应用不同的`OutputCache`指令来覆盖全局过滤器。对于常规控制器，它是`Controller``View`

```
[OutputCache(NoStore = true, Duration = 0, Location=System.Web.UI.ResponseCacheLocation.None, VaryByParam = "*")] 
```

或者如果它`ApiController`是

```
[System.Web.Mvc.OutputCache(NoStore = true, Duration = 0, Location = System.Web.UI.OutputCacheLocation.None, VaryByParam = "*")] 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2018-01-31T14:42:24.677

**Asp.Net MVC Core**防止浏览器缓存（包括**Internet Explorer 11** ）的正确属性值为：

```
[ResponseCache(Location = ResponseCacheLocation.None, NoStore = true)] 
```

如 Microsoft 文档中所述：

[ASP.NET Core 中的响应缓存 - NoStore 和 Location.None](https://docs.microsoft.com/en-us/aspnet/core/performance/caching/response#nostore-and-locationnone)

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2015-10-01T06:59:04.207

**MVC 中的输出缓存**

```
[OutputCache(NoStore = true, Duration = 0, Location="None", VaryByParam = "*")]

或者
[OutputCache(NoStore = true, Duration = 0, VaryByParam = "None")]

```

# php - 从 Mysql 数据库格式化到 iPhone 应用程序

> ID：10011786
> 
> 赞同：0
> 
> 时间：2012-04-04T13:10:11.063
> 
> 标签：php, iphone, mysql, formatting

我为网站创建了一个后端，使用不同的 url 参数，您可以从 mysql 数据库中获取信息/文本。一个 iPhone 应用程序抓取了这个文本，但不幸的是它不是 wwll 格式的（缺少换行符等）。

如何获得更好的格式？

iPhone 应用使用**NSISOLatin1StringEncoding**

在照片中，“艺术家”部分没有换行符。那么我应该
用 \n 替换 iPhone 吗？![在此处输入图像描述](../Images/f6f2d1ced46ef4b3ad18695514e7c5cc.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T14:10:54.493

你如何将文本传递到你的应用程序中？通过xml？尝试将文本封装到 CData 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T13:31:10.443

使用预先格式化的纯文本可能不是最好的主意，尤其是在移动应用程序中，但如果您的应用程序将文本显示为 HTML，您可以尝试以下操作：

```
$text = "Your\nText\nWith\nLinebreaks";
// transform your text with a simple function or a more sophisticated regular expression
echo nl2br($text); 
```

这将输出：

带有换行符的
文本

但是，如果您的应用演示文稿不是基于 HTML 的，这可能无关紧要，因此请提供更多详细信息。

# extjs - extjs 将记录加载到表单中

> ID：10011789
> 
> 赞同：0
> 
> 时间：2012-04-04T13:10:19.380
> 
> 标签：extjs

ProductStore 由几个产品及其描述组成。我从组合中选择的产品项目，从 textarea 中选择的描述。

如何将它们加载回表单（组合，文本区域）。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T14:04:58.710

我假设组合是从商店加载的，因此组合框具有产品的 id。当从组合框中选择产品时，在组合框上放置一个侦听器以获取其 ID。在商店中查找id并获取记录。获取该记录并获取您需要的数据并用它填充字段。这是您需要将其适应您的代码的基本思想。

```
var productId = combo.getValue(); //the id from the selected product in the combo box.
var rec = store.getById(productId );
//You can also use rec.get('description');
var desc = rec.data.description;
var productName= rec.data.name;
var id= rec.data.id;
//Now take these values and use them to fill in your form
textField.setValue(desc); 
```

# python - 按日期值对 gtk.TreeColumn 进行排序

> ID：10011790
> 
> 赞同：1
> 
> 时间：2012-04-04T13:10:21.213
> 
> 标签：python, sorting, gtk, pygtk, gtktreeview

我有一个`gtk.ListStore`附加到一个`gtk.Treeview`

第一列`gtk.ListStore`是`str`类型并且包含一个日期值（dd/mm HH:MM:SS）

我想`gtk.TreeviewColumn`按日期对第一个进行排序，所以我写道：

```
listStore = gtk.ListStore(str, str, str, str, str, str, str, str)
treeview = gtk.TreeView()
treeview.set_model(listStore)

cell = gtk.CellRendererText()
column = gtk.TreeViewColumn('Date', cell, text=0)
column.set_sort_column_id(0)
treeview.append_column(column) 
```

但是排序不能正常工作：它按天排序，而不是按日期排序。

如何按日期进行排序？

谢谢

编辑 ：

为了使排序更容易，月份值存储为数字（从 01 到 12）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T14:23:43.753

我使用以下方法找到了解决方案`Gtk.TreeSortable.set_sort_func()`：

```
listStore = gtk.ListStore(str, str, str, str, str, str, str, str)
listStore.set_sort_func(0, date_compare, None)
treeview = gtk.TreeView()
treeview.set_model(listStore)

cell = gtk.CellRendererText()
column = gtk.TreeViewColumn('Date', cell, text=0)
column.set_sort_column_id(0)
treeview.append_column(column)
... 
```

我写了我的`date_compare`函数：

（也许它有一种最优雅的方式来编写这个`date_compare`函数：我很高兴听到你的:-)）

```
def date_compare(model, row1, row2, user_data):
    # Returns : 
    # - a negative integer if iter1 sorts before iter2,
    # - zero if they are equal,
    # - a positive integer if iter2 sorts before iter1.

    sort_column, _ = model.get_sort_column_id()
    date1 = model.get_value(row1, sort_column)
    date2 = model.get_value(row2, sort_column)

    # We split the date string to an array : 
    #  0  |   1   |   2  |    3    |    4
    # day | month | hour | minutes | seconds
    values1 = re.split("[ /:]", date1)
    values2 = re.split("[ /:]", date2)

    if values1[1] < values2[1] :
        return -1
    elif values1[1] == values2[1] : # same month => we compare by day
        if values1[0] < values2[0] :
            return -1
        elif values1[0] == values2[0] : # same month and day => we compare by hour
            if values1[2] < values2[2] :
                return -1
            elif values1[2] == values2[2] : # same month, day and hour => we compare by minute
                if values1[3] < values2[3] :
                    return -1
                elif values1[3] == values2[3] : # same month, day, hour and minute => we compare by second
                    if values1[4] < values2[4] :
                        return -1
                    elif values1[4] == values2[4] : # same month, day, hour, minute and second => it's same date !
                        return 0
                    else :
                        return 1
                else :
                    return 1
            else :
                return 1
        else :
            return 1
    else :
        return 1 
```

# powershell - 将密码硬编码到PowerShell“New-PSSession”中

> ID：10011794
> 
> 赞同：18
> 
> 时间：2012-04-04T13:10:24.337
> 
> 标签：powershell, passwords

我有一个脚本可以为给定用户在其他计算机上获取和设置用户的 Windows 环境变量。是否可以对该用户的密码进行硬编码，这样我每次运行脚本时都不必输入密码？

我的脚本看起来像这样：

```
$s5 = New-PSSession -computername testauto2, testauto3 -Credential
Domain\testautouser

invoke-command -session $s5[0] -scriptblock {[Environment]::GetEnvironmentVariable("TestBrowser", "user")} 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-04-04T14:12:43.353

是的-只要您对安全隐患感到满意（某处文件中的密码），您就可以完全做到这一点...

这是一个例子：

```
 $pw = convertto-securestring -AsPlainText -Force -String <insert pw here>
 $cred = new-object -typename System.Management.Automation.PSCredential -argumentlist "Domain\User",$pw
 $session = new-pssession -computername <computer> -credential $cred 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-04-04T17:45:51.617

我在类似的情况下使用过这种方法。这当然不是完美的，但它让我比在文件中硬编码密码更不紧张。我在第一次运行时读取并存储了密码，然后从 DPAPI 加密的文件中读取。我通常从内部网络上的共享位置运行脚本，并将加密的密码文件存储在本地计算机上的私有文件夹中。

```
$user = "Domain\testautouser"
$passwdFile = "$env:USERPROFILE\myscript-$user"
if ((Test-Path $passwdFile) -eq $false) {
  $cred = new-object system.management.automation.pscredential $user,
        (read-host -assecurestring -prompt "Enter a password:")
    $cred.Password | ConvertFrom-SecureString | Set-Content $passwdFile
}
else {
  $cred = new-object system.management.automation.pscredential $user,
        (Get-Content $passwdFile | ConvertTo-SecureString)
} 
```

# actionscript-3 - MouseEvent.RIGHT_CLICK 在运行时未定义？

> ID：10011796
> 
> 赞同：2
> 
> 时间：2012-04-04T13:10:26.470
> 
> 标签：actionscript-3, flash, mouseevent, undefined, right-click

**回答**要使用此功能以及 11.2 中的任何新功能，需要将 swf 版本一直调到 15。

我的设置：

*   FlashBuilder 4.6 构建指令包括“-swf-version=13”
*   Flex SDK 版本 4.6.0 (build 23201) playerglobal.swc（当前来自 Adob​​e 页面， [http://www.adobe.com/support/flashplayer/downloads.html](http://www.adobe.com/support/flashplayer/downloads.html)，据说也是 11.2）
*   独立调试器投影仪 (11.2.202.228)
*   浏览器 flash 播放器插件 (11.2.202.228)

因此，据我估计，我在任何我应该去的地方都是最新的，能够使用 MouseEvent.RIGHT_CLICK（Adobe 文档： [http ://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash /events/MouseEvent.html#RIGHT_CLICK](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/events/MouseEvent.html#RIGHT_CLICK)）但是，如果我这样做

![发生的例子](../Images/db1923bbd7eb13f227f3677b2618c51d.png)

我知道右键单击最初应该只是 AIR，但据说已经改变了，这得到了网站文档和 MouseEvent 的类定义中的支持，

![MouseEvent 类定义](../Images/785683ecdab95291f8e964b455988cff.png)

我想在 Flash 中使用一些右键单击的东西，但似乎某些东西肯定不能正常工作。有人对出了什么问题有所了解吗？

我对一些评论有点困惑，所以如果我解释不清发生了什么，所以这是我的代码运行和编译的示例，附有源代码， [http://www.tymonrovers.com/seaders/ asdf.html](http://www.tymonrovers.com/seaders/asdf.html)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T00:56:16.503

构建说明中的 SWF 版本需要达到 15...详细[http://helpx.adobe.com/flash-player/release-note/release-notes-developer-flash-player.html#main_authoring_flash_player](http://helpx.adobe.com/flash-player/release-note/release-notes-developer-flash-player.html#main_authoring_flash_player)

该死的！我知道现在看起来很明显，但我认为他们可能也应该在文档中详细说明，他们有针对 AIR 和 Flash 的 SDKS 的特定版本，但没有 swf 版本信息，虽然这听起来可能有点矫枉过正，当您忘记需要为新功能做一点调整时，肯定会解决这样的烦恼。嗯，现在一切正常。：/

![在此处输入图像描述](../Images/7b1af1d64740fe3a1c31ff95ad97ea54.png)

-swf-版本=15

# c++ - OpenCV 2.1：ostream operator<< for cv::Mat 在哪里？

> ID：10011797
> 
> 赞同：4
> 
> 时间：2012-04-04T13:10:30.790
> 
> 标签：c++, opencv

在[这个问题](https://stackoverflow.com/questions/7970988/print-out-the-values-of-a-mat-matrix-in-opencv-c)之后，我试图将 a 的内容打印`cv::Mat`到标准输出：

```
#include <iostream>
#include <opencv/cv.h>
#include <opencv/cv.hpp>
#include <opencv/cxcore.h>
#include <opencv/cxcore.hpp>

int main() {

  cv::Mat m = cv::Mat::ones(10, 10, CV_32S);
  std::cout << m << "\n";

} 
```

这会导致错误

```
error: no match for ‘operator<<’ in ‘std::cout << m’ 
```

我在 Ubuntu 11.10 上使用 gcc 4.6.1，并按照[这些说明](https://help.ubuntu.com/community/OpenCV)安装了 opencv，不包括示例。我的问题是，该运算符在 2.1 中是否可用，如果是，我如何获得它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-04T15:10:22.273

更新到 OpenCV 2.2（或更高版本）和`#include <opencv2/opencv.hpp>`

它定义在`modules/core/include/opencv2/core/operations.hpp`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-04T16:06:19.603

如果未定义运算符，您可能需要升级到 2.2 或更高版本。记录[在这里](https://code.ros.org/trac/opencv/browser/trunk/opencv/modules/core/include/opencv2/core/operations.hpp?rev=7199)您可以在其中找到重载的运算符代码。

# javascript - 如何在 jQuery 中获取 $(this) 选择的选项？

> ID：10011802
> 
> 赞同：111
> 
> 时间：2012-04-04T13:10:37.117
> 
> 标签：javascript, jquery

以下代码有效：

```
$("#select-id").change(function(){
  var cur_value = $('#select-id option:selected').text();
  . . .
}); 
```

如何将第二行重构为：

```
var cur_value = $(this).***option-selected***.text(); 
```

你有什么用`***option-selected***`？

* * *

## 回答 #1

> 赞同：132
> 
> 时间：2012-04-04T13:13:35.027

对于选定的值：`$(this).val()`

如果您需要选定的选项元素，`$("option:selected", this)`

* * *

## 回答 #2

> 赞同：121
> 
> 时间：2012-04-04T13:12:47.343

```
 $(this).find('option:selected').text(); 
```

* * *

## 回答 #3

> 赞同：61
> 
> 时间：2014-12-12T10:00:24.420

在我看来，下拉列表中的 onchange 事件的最佳和最短方法是获取所选选项：

```
$('option:selected',this); 
```

获取值属性：

```
$('option:selected',this).attr('value'); 
```

获取标签之间的显示部分：

```
$('option:selected',this).text(); 
```

在您的示例中：

```
$("#select-id").change(function(){
  var cur_value = $('option:selected',this).text();
}); 
```

* * *

## 回答 #4

> 赞同：47
> 
> 时间：2016-04-03T03:16:21.387

```
var cur_value = $('option:selected',this).text(); 
```

* * *

## 回答 #5

> 赞同：14
> 
> 时间：2012-04-04T13:12:48.420

这应该有效：

```
$(this).find('option:selected').text(); 
```

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2012-04-04T13:13:46.203

您可以使用它`find`来查找当前 jQuery 对象指向的节点的后代的选定选项：

```
var cur_value = $(this).find('option:selected').text(); 
```

由于这可能是直接的孩子，我实际上建议使用`.children`：

```
var cur_value = $(this).children('option:selected').text(); 
```

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2012-04-04T13:13:07.797

```
var cur_value = $(this).find('option:selected').text(); 
```

由于`option`很可能是`select`您的直系子女，因此也可以使用：

```
var cur_value = $(this).children('option:selected').text(); 
```

[http://api.jquery.com/find/](http://api.jquery.com/find/)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-04-04T13:13:46.843

最佳的揣测：

```
var cur_value = $('#select-id').children('option:selected').text(); 
```

在这种情况下，我更喜欢孩子，因为你知道你只会沿着 DOM 树走一个分支......

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-06-12T16:05:05.210

只是

```
$(this).val(); 
```

我认为 jQuery 足够聪明，知道你需要什么

# c# - 一段未知的代码，它叫什么？

> ID：10011806
> 
> 赞同：-10
> 
> 时间：2012-04-04T13:10:43.737
> 
> 标签：c#

我在 C# 的一个随机 doxygen 示例中看到了这一点，所有在谷歌上搜索它的尝试都失败了，因为我不知道它叫什么或它做什么。

```
int test(int a, string b);       
int i = test(1, "b"); 
```

任何人有任何见解？

编辑

所以这是一个有趣的尝试。我把它放到一个新程序中，但它不能编译，除非我在它前面放了一个静态。现在它编译了。

```
namespace ConsoleApplication1
{
    class Program
    {
        static int test(int a, string b);
        static void Main(string[] args)
        {
            int i = test(1, "b");
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T13:13:41.447

第一行看起来像一个接口声明。就是说一个类有一个接受整数和字符串并返回整数的方法。

然后它调用该方法。但是，这目前无效。由于您没有链接到源，我不确定其余部分是否已被删除。有效代码如下所示：

```
public interface ISomeInterface
{
    int test(int a, string b);       
}

ISomeInterface instance = GetInstance();

int i = instance.test(1, "b"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-04T13:19:28.683

这不是真实的或不完整的代码。

您发布的代码无法编译，原因有两个：

1.如果你把它放在一个方法中，它不会因为第一行而编译：

> 只有赋值、调用、递增、递减和新对象表达式可以用作语句。

2.如果你把它放在一个方法之外它不会因为两行而编译：

> 'Test.Program.test(int, string)' 必须声明一个主体，因为它没有被标记为抽象、外部或部分。
> 
> 字段初始值设定项不能引用非静态字段、方法或属性“Test.Program.test(int, string)”

**编辑**：即使是新的代码版本也无法编译：

> 'Test.Program.test(int, string)' 必须声明一个主体，因为它没有被标记为抽象、外部或部分。

# java - 如何在调用另一个 JFrame 时删除一个 JFrame

> ID：10011809
> 
> 赞同：1
> 
> 时间：2012-04-04T13:10:50.900
> 
> 标签：java, swing, jframe, jbutton

如果我创建了一个带有 2 个 JButton 的 JFrame。两个按钮都通过调用另一个 JFrame `actionPerformed(ActionEvent event)` （所以总共 3 个 JFrame，主要的一个和从它调用的两个）。

我将 JFrame 与 JButton 的 main 命名，两者分别称为 JFrame 的 frame1 和 frame2。

我从主要的 JButton 之一调用 frame1。然后我按下调用 frame2 的第二个 JButton。

我希望 frame1 在调用 frame2 时自动关闭，反之亦然。

我一直在寻找解决方案，但找不到，但我希望它相当简单。

谢谢，感谢您的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-04T13:12:48.420

我不建议使用多个容器。相反，使用适当的布局管理器（例如[`CardLayout`](http://docs.oracle.com/javase/tutorial/uiswing/layout/card.html)）。这样，您将拥有一个包含多个视图的容器。

...似曾相识...

# ruby-on-rails - 带有自定义标头的 Ruby 中的 HTTP.post_form

> ID：10011810
> 
> 赞同：2
> 
> 时间：2012-04-04T13:11:04.980
> 
> 标签：ruby-on-rails, ruby, http, post

我正在尝试使用 Nets/HTTP 来使用`POST`和放入自定义用户代理。我通常使用`open-uri`，但它不能做`POST`可以吗？

我用

```
resp, data = Net::HTTP.post_form(url, query) 
```

我将如何更改它以放入自定义标头？

编辑我的查询是：

```
query = {'a'=>'b'} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-04T13:17:15.550

你可以试试这个，例如：

```
http = Net::HTTP.new('domain.com', 80)
path = '/url'

data = 'form=data&more=values'
headers = {
  'Cookie' => cookie,
  'Content-Type' => 'application/x-www-form-urlencoded'
}

resp, data = http.post(path, data, headers) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-04T13:16:56.310

你不能`post_form`这样做，但你可以这样做：

```
uri = URI(url)
req = Net::HTTP::Post.new(uri.path)
req.set_form_data(query)
req['User-Agent'] = 'Some user agent'

res = Net::HTTP.start(uri.hostname, uri.port) do |http|
  http.request(req)
end

case res
when Net::HTTPSuccess, Net::HTTPRedirection
  # OK
else
  res.value
end 
```

（阅读[net/http 文档](http://ruby-doc.org/stdlib-1.9.3/libdoc/net/http/rdoc/index.html)了解更多信息）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-04-29T02:42:17.317

我需要将 json 发布到具有自定义标头的服务器。我查看的其他解决方案对我不起作用。这是我的解决方案。

```
uri = URI.parse("http://sample.website.com/api/auth")
params = {'email' => 'someemail@email.com'}
headers = {
    'Authorization'=>'foobar',
    'Date'=>'Thu, 28 Apr 2016 15:55:01 MDT',
    'Content-Type' =>'application/json',
    'Accept'=>'application/json'}

http = Net::HTTP.new(uri.host, uri.port)
response = http.post(uri.path, params.to_json, headers)
output = response.body
puts output 
```

感谢 Mike Ebert 的 tumblr： http: [//mikeebert.tumblr.com/post/56891815151/posting-json-with-nethttp](http://mikeebert.tumblr.com/post/56891815151/posting-json-with-nethttp)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2017-08-09T15:12:37.320

```
require "net/http"

uri = URI.parse('https://your_url.com')
http = Net::HTTP.new(uri.host, uri.port)
http.use_ssl = true
http.ca_path='/etc/pki/tls/certs/'
http.ca_file='/etc/pki/tls/certs/YOUR_CERT_CHAIN_FILE'
http.cert = OpenSSL::X509::Certificate.new(File.read("YOUR_CERT)_FILE"))
http.key = OpenSSL::PKey::RSA.new(File.read("YOUR_KEY_FILE"))

#SSLv3 is cracked, and often not allowed
http.ssl_version = :TLSv1_2

#### This is IMPORTANT
http.verify_mode = OpenSSL::SSL::VERIFY_NONE

#Crete the POST request
request = Net::HTTP::Post.new(uri.request_uri)
request.add_field 'X_REMOTE_USER', 'soap_remote_user'
request.add_field 'Accept', '*'
request.add_field 'SOAPAction', 'soap_action'
request.body = request_payload

#Get Response
response = http.request(request)

#Review Response
puts response.body 
```

# php - 对象缓存 - 存储克隆对象还是序列化数据更有效？

> ID：10011812
> 
> 赞同：1
> 
> 时间：2012-04-04T13:11:12.977
> 
> 标签：php, performance, serialization

假设我正在从数据库中加载大量对象。这些是普通的、普通的 PHP 对象，没有从任何花哨的东西继承。假设我可能会更改其中一些对象并希望将它们写回数据库，但只使用在 UPDATE ... SET ... 查询中实际不同的字段。还假设我事先不知道要更改哪些对象。

我在想我需要复制所有加载的对象，并保留以供参考和比较，如果我需要将对象写回数据库。

我看到两种可能的方法：

*   我可以克隆所有加载的对象并存储在单独的列表中。保存时，使用索引在列表中查找对象，然后比较值。
*   或者，我可以简单地将加载到字符串中的所有内容序列化，然后保留。保存时，在字符串中找到序列化的对象（以某种方式），将其反序列化，比较值，然后就可以了。

在效率方面（主要是内存，但速度也是一个考虑因素），哪个是有利的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T13:17:45.330

那么你实际上需要一些东西来比较对象的状态是否发生了变化。如果您不仅要跟踪哪个对象已更改，还要跟踪哪个成员，您需要为每个成员设置一个状态。

由于您不想扩展原始对象（例如，它们可能具有在更改时无效的标志），因此您需要从外部跟踪状态。我会说序列化可能是最好的选择。克隆将占用更多内存。

# ruby-on-rails - 在 Rails 命名空间模型中丢失命名空间信息

> ID：10011821
> 
> 赞同：4
> 
> 时间：2012-04-04T13:12:04.960
> 
> 标签：ruby-on-rails, activerecord, namespaces

当您使用 rails 脚手架创建命名空间模型时，您会得到两个文件。例如，这个脚手架：

```
rails generate model Staff::Location name:string address:string 
```

生成这些文件：

```
/app/models/staff.rb    
module Staff
  def self.table_name_prefix
    "staff_"
  end
  ...

/app/models/staff/location.rb
class Staff::Location < ActiveRecord::Base
  ... 
```

在开发模式下，rails 卸载 Staff 模块并且从不重新加载它时，我遇到了问题。这会导致一些烦人的错误，例如 Location 由于缺少 table_name_prefix 而无法访问它的表。当我不直接访问模型时，问题似乎出现了，例如通过多态关系。

我似乎无法以一致的方式加载模块。这是做命名空间模型的最佳实践方式吗？如果是，我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T01:02:07.117

尽管我无法在 Rails 3.2.2 中重现该问题，但我之前遇到过类似的情况。在开发模式下解决此问题的通用方法是通过`ActionDispatch`回调。将此添加到`config/environments/development.rb`：

```
MyApp::Application.configure do
  ActionDispatch::Callbacks.before do
    load Rails.root.join('app', 'models', 'staff.rb')
  end
end 
```

您在该块中所做的任何事情都将在每个请求之前执行，因此请**确保您仅在开发模式下执行此操作**。†否则，您将在生产中遭受性能影响。

我在`staff.rb`文件和`Staff`模块本身中记录了一条消息，两条消息都出现在每个请求的日志中。

* * *

†我尝试使用`to_prepare`回调，因为这似乎是[在每个请求之前执行代码的记录方式，只有当`cache_classes`是 false](http://guides.rubyonrails.org/configuring.html#configuring-action-dispatch)时。但这似乎只有在重新启动应用程序后才会执行。至少还有[一个关于此的其他未解决的 Stack Overflow 问题](https://stackoverflow.com/questions/9542600/using-rails-to-prepare-event)，尽管他使用的语法与我使用的略有不同。如果您可以`to_prepare`上班，我建议您不要使用`before`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T15:01:35.823

大约一年后，我终于找到了这个问题的答案。这个答案专门针对rails 3.1。我不确定这是否是 rails 3.2 中的问题。

设置模型时会出现问题。如果使用脚手架，则不会生成帮助文件。这通常位于 /app/helpers/staff/location_helper.rb 中。有两种方法可以设置此文件：

```
module Staff::LocationHelper
  ...
end

module Staff
  module LocationHelper
    ...
  end
end 
```

在 rails 3.1 中，特别是对于助手，您必须使用第一个解决方案。您不必将它用于在 rails 项目的其他部分中使用命名空间的其他模块。事实上，ruby 中的某些结构需要第二种解决方案。

如果在声明助手时使用第二种解决方案，在某些情况下，助手文件中的 Staff 模块将覆盖 /app/models/staff.rb 中的模块。它将默默地用文件中的空 Staff 模块替换它。这不会 100% 发生，因为助手并不总是被加载。

# html - 对网格视图中的字段进行编码

> ID：10011824
> 
> 赞同：2
> 
> 时间：2012-04-04T13:12:14.790
> 
> 标签：html, vb.net, gridview, encoding

我的 gridview 自定义编码中有一些这些事件。但这里真正的问题是我存储了以前的记录，即正在更改的记录，或者 old.value 并将其存储在另一列中。因此，当用户输入不带引号的“< newValue >”时，aspx 验证器会将输入视为危险而拒绝。

我可以禁用验证，并在将值写入数据库时​​对值进行 html 编码，但是当我在“上一个值”列的 gridview 中显示该值时，它看起来像这样...... < 中性 > 缺少分号因为这个网站解码。

如何在 ASPX 中内联编码和解码？

我如何编码这个进入gridview的模板字段？

```
<EditItemTemplate>
    <asp:TextBox ID="TextBox1" runat="server" Text='<%# Bind("lang_String") %>'></asp:TextBox>
</EditItemTemplate> 
```

我想只允许在此字段中输入某些 html 字符而不关闭整个站点的验证。

我确实需要将其应用于整个专栏。

谢谢你，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T13:08:48.167

我找到了一个可行的解决方案来解决这个问题。在后面的代码中，输入如下调用一个函数来处理html编码......

```
<Columns> 
<asp:TemplateField> 
  <ItemTemplate> 
      <asp:Label ..... Text='<%# DecodeIT(Eval("FirstName").ToString())%>' /> // for "decoding" 
 </ItemTemplate> 
 <EditTemplate> 
      <asp:TextBox id="TextBox1" runat="server" /> // for "encoding" 
```

这里是函数...

```
Private Function DecodeIT(firstName As String) As String
Return HttpUtility.HtmlDecode(firstName)
End Function 
```

大多数其他解决方案建议在 Page 指令或 web.config 中禁用验证，这不是解决此问题的最佳实践。

使用这样的功能是最好的方法。

# php - blueimp 的 jQuery-File-Upload - 附加标头

> ID：10011828
> 
> 赞同：16
> 
> 时间：2012-04-04T13:12:20.027
> 
> 标签：php, jquery, file-upload, blueimp

我已经通过[wiki](https://github.com/blueimp/jQuery-File-Upload/wiki)进行了搜索，但找不到答案我应该将我的附加标头（例如`Authorization`标头）放在 JS 脚本中的哪个位置？某处`onSend`/`beforeSend`或？

**小部件链接：** [https ://github.com/blueimp/jQuery-File-Upload](https://github.com/blueimp/jQuery-File-Upload)

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-05-07T17:32:13.423

这就是我将文件名添加为标题的方式：

```
$('#upload_btn').fileupload({
    singleFileUploads: true,
    beforeSend: function(xhr, data) {
        var file = data.files[0];
        xhr.setRequestHeader('X-FileName', file.name);
    },
}); 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-04-05T16:55:10.410

您是否尝试通过“options.headers”对象设置其他标题？

如果使用**forceIframeTransport: true**选项（IE 不支持 XHR 文件上传，您需要使用隐藏的 iframe 方法），那么修改标题不是一个选项：[https ://github.com/blueimp/jQuery-File-Upload /问题/654](https://github.com/blueimp/jQuery-File-Upload/issues/654)

### Options.headers：[http ://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

> 为文件上传插件设置的选项被传递给 jQuery.ajax() 并允许定义任何 ajax 设置或回调。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-04-05T16:34:51.403

试试这样的..

```
beforeSend: function(xhr) {
    xhr.setRequestHeader("Accept", "application/json");
    xhr.setRequestHeader("Content-type", "application/json; charset=utf-8");
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-10-12T13:37:46.543

答案很简单：只需在添加部分添加您的自定义标题

```
 add: function (e, data) {         

                data.headers={'X-Session-Id' : data.files[0].name.hashCode()};

                data.context = $('<button/>').text('Upload')
                .appendTo(document.body)

                .click(function () {
                    data.context = $('<p/>').text('Uploading...').replaceAll($(this));

                   // naam = naam.hashCode();
                    data.submit();
                });
        }, 
```

或在初始化中：

```
$('#fileupload').fileupload({
        dataType: 'json',
        multipart : false,
        maxChunkSize: 10 * 1024 * 1024,
        headers:data.headers={'X-Session-Id' : "TEST-HEADER"}, 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-05T20:40:23.250

这是我的实现

```
onSend: function(e, options) {
  var accessToken = ...;

  options.headers = {
    'Authorization': 'Bearer ' + accessToken
  };
}, 
```

# windows - 升级安装后 Vista/Win7 资源管理器快捷方式中的应用程序图标损坏

> ID：10011831
> 
> 赞同：3
> 
> 时间：2012-04-04T13:12:22.770
> 
> 标签：windows, windows-7, windows-vista, inno-setup, explorer

> **可能重复：**
> [Windows 7 上的错误桌面快捷方式图标（Inno Setup）](https://stackoverflow.com/questions/4400472/wrong-desktop-shortcut-icon-on-windows-7-inno-setup)

我有一个使用 Inno Setup 安装程序部署的应用程序。当我执行升级安装时（即在已安装 1.0 版时运行 install-1.5.exe），如果我的应用程序二进制文件正在使用中（我的应用程序正在运行，或者其他进程可能已锁定图像文件），我重新启动后在资源管理器中遇到图标缓存损坏。资源管理器在桌面和开始菜单上显示我的应用程序的空白/默认快捷方式图标。

我们在互联网上搜索并发现了各种用于刷新 Explorer 图标缓存的“厨房水槽”方法，但似乎没有一种方法在所有操作系统上都是完全可靠的。因此，我们宁愿首先找出导致这种腐败的原因并治愈疾病而不是治疗症状。

这会在 Windows Vista 和 Windows 7 中发生，但不会在 Windows XP 中发生。

特别是，只要资源管理器刷新文件关联，损坏就会“生效”。这可能是即时的（如果 ChangesAssociations=yes 在 Inno 脚本中设置），或者稍后。

有没有人遇到过这个？我们不明白为什么会出现此图标缓存损坏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T21:27:39.890

尽管需要`explorer.exe`重新启动，但以下批处理脚本不需要重新启动即可生效：

**重建图标-cache.bat**

```
@echo off
taskkill /IM explorer.exe /F
cd /d %userprofile%\AppData\Local
del IconCache.db /a
start explorer.exe 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T16:26:33.067

执行以下步骤以清除 Windows 7 的图标缓存
1）在命令行中写入“cleanmgr”
2）选择您的 Windows 所在的本地磁盘。（默认为“C:\”）
3）等待...
4）选中复选框“缩略图”并取消选中所有其他复选框
5）从“任务管理器”结束进程“explorer.exe”（默认为 Ctrl+Shift+Esc )
6) 单击 cleanmgr 中的“确定”按钮，然后等待。

如果这篇文章对你有帮助，请投票！

# mysql - Entity Framework Code First 4.3 + Sql Log

> ID：10011832
> 
> 赞同：0
> 
> 时间：2012-04-04T13:12:26.690
> 
> 标签：mysql, entity-framework, ef-code-first, logging

我无法找到使用 EF Code First 4.3.1（我正在使用 MySql）记录 sql 请求的好方法。

提前致谢。

问候，

埃里克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T07:12:00.970

您可以通过这种方式获取从 EF 生成的 sql 语句：

```
var query = from u in context.Users      // linq query
            select u;

var sql_statement = ((ObjectQuery<User>)query).ToTraceString(); 
```

# javascript - 如何为 Telerik MVC [JQuery] 事件处理程序发送附加参数

> ID：10011836
> 
> 赞同：1
> 
> 时间：2012-04-04T13:12:38.370
> 
> 标签：javascript, jquery, asp.net-mvc, jquery-ui, telerik-mvc

我现在是 jQuery 新手，我正在使用 Telerik asp.net MVC 控件和 Razor 视图引擎。这是我认为的代码片段。

```
 Html.Telerik().ComboBox().Name("cmb")                
    .AutoFill(true)
    .DataBinding(binding => binding.Ajax().Select("_loadData", "MyController").Cache(false))
    .ClientEvents(ce => ce.OnLoad("cmbLoaded"))

    function cmbLoaded(e) {            
        var ComboBox = $("#cmb").data("tComboBox");
        //do stuff here
    } 
```

好的，这就是我想要做的我想向 Telerik Combobox 事件发送额外的参数，比如 cmbLoaded 事件处理程序。我怎样才能做到这一点。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T22:39:29.423

已经有一段时间了，但遇到了类似的情况。作为参数传递给 OnLoad 事件的字符串是 Javascript 函数引用，因此您可以传递如下内容：

```
.ClientEvents(ce => ce.OnLoad("function(e) { cmbLoaded.call(this,e," + Model.Id + "); }")) 
```

然后您的 Javascript 函数签名将更改为：

```
function cmbLoaded(e, id) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-04T13:53:10.427

当您的组合从服务器获取数据时，您想提交额外的参数吗？[然后您可以在OnDataBinding](http://www.telerik.com/help/aspnet-mvc/telerik-ui-components-combobox-client-api-and-events.html#OnDataBinding)事件的帮助下发送它。例如：

 `````
function onComboBoxDataBinding(e){
 e.data={extraParameter:"Cool"};
} 
````  `* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-21T00:46:43.090

您可以通过在代码块中定义一些变量来做到这一点，然后在您的 javascript 事件处理程序中使用它们。这是一个例子：

```
@{
   string myPar1 = "some text";
   int myPar2 = 10;
}

<script type="text/javascript">

function cmbLoaded(e, '@myPar1' @myPar2) {            
        var ComboBox = $("#cmb").data("tComboBox");
        //do stuff here
    }

</sciprt> 
`````

# msbuild - 在 Azure 项目中缩小和包含 js 和 css 文件

> ID：10011837
> 
> 赞同：1
> 
> 时间：2012-04-04T13:12:39.967
> 
> 标签：msbuild, azure, minify, yui-compressor

我在 Azure 项目中使用 YUI Compressor 作为 MsBuild 任务。它在本地运行良好，但是当我尝试发布它时，我无法将缩小的包插入到我的 azure 应用程序包中。虽然我已经尝试了很多关于在我的 .csproj 文件上修改包的事情，但我无法解决。我怎样才能做到这一点？

**编辑：** 我的项目不是 MVC 或 Webforms 应用程序。只是 ASP.NET 项目中的 HTML 和 Javascript。我的问题不是缩小。它只是在发布它时将缩小的外部文件放在 Azure 包中，但如果有任何其他方法可以解决这个天蓝色问题，我可以用 ajaxmin 或谷歌关闭来更改 YUI 压缩器......没关系。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T11:16:47.963

我认为不支持修改服务包（您也在修改清单）。这就是为什么我会从另一个角度看待它。我假设你有这样的设置：

> *   解决方案
>     *   空的 ASP.NET 项目
>         *   索引.html
>         *   应用程序.js

现在，在您编译（并且 MSBuild 任务运行）之后，您将拥有如下内容：

> *   解决方案
>     *   空的 ASP.NET 项目
>         *   索引.html
>         *   应用程序.js
>         *   *App.min.js*（不包含在项目中，但在文件系统中可用）

现在，只需在项目中包含 App.min.js 文件，在打包或发布您的应用程序时，它将包含在服务包中。除此之外，每次编译时都会运行 MSBuild 任务，这意味着每次打包应用程序之前都会更新文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T13:35:29.243

由于您尚未指定它是 WebForms 还是 MVC，我想指出对[ASP.net MVC4](http://weblogs.asp.net/scottgu/archive/2012/02/19/asp-net-mvc-4-beta.aspx)中的[捆绑和缩小](http://weblogs.asp.net/scottgu/archive/2011/11/27/new-bundling-and-minification-support-asp-net-4-5-series.aspx)的开箱即用支持。[Scott Gu](http://weblogs.asp.net/scottgu/)在 MVC4[预览演示](http://weblogs.asp.net/scottgu/archive/2012/02/19/asp-net-mvc-4-beta.aspx)中对其进行了解释。

您也可以在 ASP.net MVC3 中调整它以实现该目的。一旦实现了这一点，您也可以在 Azure 中实现这一点。

附加文章：

*   [ASP.NET MVC3 中的 ASP.NET MVC4 捆绑](http://jclaes.blogspot.com/2012/02/aspnet-mvc4-bundling-in-aspnet-mvc3.html)
*   [ASP.NET MVC4 中的新功能：捆绑和缩小](http://www.beletsky.net/2012/04/new-in-aspnet-mvc4-bundling-and.html)

# java - Playframework jpa分页每隔一页跳过一次

> ID：10011845
> 
> 赞同：1
> 
> 时间：2012-04-04T13:13:04.567
> 
> 标签：java, mysql, jpa, playframework

我正在使用 jpa 和 mysql 运行 playframework 1.2.4。

我有一个从数据库中检索前 20 个活动的作业，将状态设置为活动以停止其他作业实例执行它们，执行活动然后获取活动的下一页并重复直到所有活动完成。但是，它似乎每隔一页跳过一次，或者我的页面大小为 20 的 20 条记录。我的逻辑如下。

```
long total = Activity.count(q, params);
int page = 1;
int pageSize = 20;

int pages = ...

while (page <= pages) {

JPAPlugin.startTx(false);
Collection<Activity> activities = Activity.find(query, params).fetch(page, pageSize);

for (Activity activity : activities) {
    activity.status = ActivityStatus.ACTIVE;
    activity.save();
}
JPAPlugin.closeTx(false);

JPAPlugin.startTx(false);
for (Activity activity : activities) 
    longProcessActivityInAnotherTransaction(activity);
JPAPlugin.closeTx(false);

page++;
} 
```

但是在数据库中，我看到状态为 ACTIVE 的记录 1-20，没有状态 ACTIVE 的 21-40，状态为 ACTIVE 的 61-80 等等。

这似乎与交易有关。如果我在 while 循环中注释掉所有事务启动/关闭代码，并打印出所选活动的 ID，我可以看到所有活动都已正确选择。

另外，如果我在调试模式下运行并暂停执行中间循环，并直接针对 mysql 数据库运行生成的查询，我会看到与代码中相同的行为。当循环未执行时，sql 查询按预期执行。

我的连接字符串是：

mysql://root:pass@localhost/dbname

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T07:44:46.717

我的问题归结为我在分页查询期间如何更改活动。我选择了状态为 PENDING 的前 20 个页面。然后在那个页面中，我会将这 20 个的状态设置为 FINISHED。然后我会得到 20 PENDING 的第二页。这个后续查询显然会忽略我设置为 FINISHED (id 1-20) 的前 20 个，并将 id 为 21-40 的活动视为第 1 页，因此将选择第 2 页，即 id 为 41-60 的活动。

因此，解决方法是不使用分页，而是每次将结果限制为前 20 个（页面大小），并在 page <= pages 时循环此查询

# algorithm - 如何找到一棵树的最低共同祖先？

> ID：10011857
> 
> 赞同：1
> 
> 时间：2012-04-04T13:13:51.837
> 
> 标签：algorithm, tree

有没有办法不使用额外空间来查找 nary tree 的 LCA。我使用一个字符串来保存两个节点的预排序并找到公共前缀

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T13:19:57.167

如果节点“知道”它们的深度——或者你愿意让空间来计算节点的深度，你可以从较低的节点备份到较高节点的相同深度，然后再上一层直到他们见面的时间。

取决于在这种情况下“额外空间”的含义。你可以用一个整数来做到这一点——两个节点的深度差。是不是空间太大了？

另一种可能性是您没有父指针，您可以使用指针反转 - 每次遍历指针时，记住您来自的位置，记住您将下一次遍历的指针，然后在下一次指针遍历之前, 将该指针替换为后退指针。上树时必须扭转这一点才能恢复它。这将一个指针的空间作为临时空间。另一个整数可以在您上下工作时保持深度。对您寻找的两个节点同步执行此操作，以便您可以从较低的节点向上工作，直到您在两次遍历中处于相同高度，然后从两个节点向上工作直到您位于公共节点. 这需要三个额外的内存 - 每个当前深度一个，一个用于指针反转期间使用的临时。非常节省空间。这值得么？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-08-21T20:08:21.503

返回并为二叉树做这件事。如果您可以为二叉树执行此操作，则可以为 n 叉树执行此操作。

这[是二叉树中 LCA 的链接](http://www.fusu.us/2013/06/p2-lowest-common-ancestor-in-binary-tree.html)：

以下是将其转换为 n 叉树 LCA 后的样子：

```
 public class LCA {

    public static <V> Node<V> 
                lowestCommonAncestor(Node<V> argRoot, Node<V> a, Node<V> b) {

      if (argRoot == null) {
        return null;
      }

      if (argRoot.equals(a) || argRoot.equals(b)) {
        // if at least one matched, no need to continue
        // this is the LCA for this root
        return argRoot;
      }

      Iterator<Node<V>> it = argRoot.childIterator();
      // nr of branches that a or b are on, 
      // could be max 2 (considering unique nodes)
      int i = 0; 
      Node<V> lastFoundLCA = null;
      while (it.hasNext()) {
        Node<V> node = lowestCommonAncestor(it.next(), a, b);
        if (node != null) {
          lastFoundLCA = node;
          i++ ;
        }
        if (i >= 2) {
          return argRoot;
        }
      }

      return lastFoundLCA;
    }

  } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T13:25:56.103

对两个节点进行同步遍历。

*   从 LCA=root 开始；
*   环形：
*   找到 A 的步骤和 B 的步骤
*   如果这些相等 { LCA= 步骤；下降A；下降 B; 转到循环；}
*   完成：LCA 现在包含 A 和 B 的 LCA

C中的伪代码：

```
struct node {
        struct node *offspring[1234];
        int payload;
        };

        /* compare function returning the slot in which this should be found/placed */
int find_index (struct node *par, struct node *this);

struct node *lca(struct node *root, struct node *one, struct node *two)
{
struct node *lca;
int idx1,idx2;

for (lca=root; lca; lca=lca->offspring[idx1] ) {
    idx1 = find_index(lca, one);
    idx2 = find_index(lca, two);
    if (idx1 != idx2 || idx1 < 0) break;
    if (lca->offspring[idx1] == NULL) break;
    }
return lca;
} 
```

# domain-driven-design - 状态模式和领域驱动设计

> ID：10011859
> 
> 赞同：7
> 
> 时间：2012-04-04T13:13:56.903
> 
> 标签：domain-driven-design, state-pattern

我们经常使用简单的枚举来表示实体的状态。当我们引入很大程度上取决于状态的行为时，问题就出现了，或者状态转换必须遵守某些业务规则。

举个例子（使用枚举来表示状态）：

```
public class Vacancy {

    private VacancyState currentState;

    public void Approve() {
        if (CanBeApproved()) {
            currentState.Approve();
        }
    }

    public bool CanBeApproved() {
        return currentState == VacancyState.Unapproved
            || currentState == VacancyState.Removed
    }

    private enum VacancyState {
        Unapproved,
        Approved,
        Rejected,
        Completed,
        Removed
    }
} 
```

你可以看到这个类很快就会变得非常冗长，因为我们添加了 Reject、Complete、Remove 等方法。

相反，我们可以引入状态模式，它允许我们将每个状态封装为一个对象：

```
public abstract class VacancyState {

    protected Vacancy vacancy;

    public VacancyState(Vacancy vacancy) {
        this.vacancy = vacancy;
    }

    public abstract void Approve(); 
    // public abstract void Unapprove();
    // public abstract void Reject();
    // etc.

    public virtual bool CanApprove() {
        return false;
    }
}

public abstract class UnapprovedState : VacancyState {

    public UnapprovedState(vacancy) : base(vacancy) { }

    public override void Approve() {
        vacancy.State = new ApprovedState(vacancy);
    }

    public override bool CanApprove() {
        return true;
    }
} 
```

这使得在状态之间转换、基于当前状态执行逻辑或在需要时添加新状态变得容易：

```
// transition state
vacancy.State.Approve();

// conditional
model.ShowRejectButton = vacancy.State.CanReject(); 
```

这种封装看起来更简洁，但给定足够多的状态，这些也可能变得非常冗长。我读了[Greg Young 关于状态模式滥用的帖子，](http://codebetter.com/gregyoung/2010/03/09/state-pattern-misuse/)它建议改用多态性（所以我会有 ApprovedVacancy、UnapprovedVacancy 等类），但看不出这对我有什么帮助。

我应该将这种状态转换委托给域服务，还是在这种情况下我使用状态模式是否正确？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-04T14:44:58.093

要回答您的问题，您不应将此委托给域服务，并且您对状态模式的使用几乎是正确的。

详细地说，维护对象状态的责任属于该对象，因此将其委托给域服务会导致模型贫乏。这并不是说不能通过使用其他模式来委派状态修改的责任，但这应该对对象的使用者是透明的。

这导致我使用状态模式。在大多数情况下，您正确使用了该模式。你有点偏离的部分是你违反了德墨忒耳法则。您的对象的使用者不应进入您的对象并调用其状态的方法（例如`vacancy.State.CanReject()`），而是您的对象应该将此调用委托给 State 对象（例如`vacancy.CanReject()`-> `bool CanReject() { return _state.CanReject(); }`）。您的对象的使用者不必知道您甚至在使用状态模式。

要评论您引用的文章，状态模式依赖于多态性，因为它是促进机制。封装 State 实现的对象能够将调用委托给当前分配的任何实现，无论该实现是什么都不做、抛出异常或执行某些操作。此外，虽然通过使用状态模式（或任何其他模式）肯定有可能导致违反里氏替换原则，但这不是由对象可能抛出异常的事实决定的，而是由是否对对象进行修改来决定可以根据现有代码制作（阅读[此](http://aspiringcraftsman.com/2011/12/31/solid-javascript-the-liskov-substitution-principle/)内容以进行进一步讨论）。

# android - 警报对话框不关闭

> ID：10011861
> 
> 赞同：1
> 
> 时间：2012-04-04T13:14:01.850
> 
> 标签：android, android-alertdialog

我有个问题。在我的活动中，我有一个按钮，当我单击它时，我会调用一个方法。此方法向我显示一个带有列表视图的警报对话框，我想将项目单击保存到一个变量，然后我想关闭该方法但它没有关闭！！！为什么？？我发布了该方法的代码。我的 logcat 没有给我任何错误。谁能帮我？？请

```
private void getValuta() {

AlertDialog.Builder miaAlert = new AlertDialog.Builder(this);

final ListView lV = new ListView(this);

Cursor c = null;

miaAlert.setTitle("Choose Valuta");

c = vdb.fetchValuteListView("0");

startManagingCursor(c);

SimpleCursorAdapter adapter = new SimpleCursorAdapter(this, 
        android.R.layout.simple_list_item_1, 
        c, 
        new String[] {
                ValuteDb.ValuteMetaData.VALUTE_NAME_KEY}, 
        new int[] { android.R.id.text1});

stopManagingCursor(c);

lV.setAdapter(adapter);

miaAlert.setView(lV);

miaAlert.setCancelable(false);

lV.setOnItemClickListener(new OnItemClickListener() {
    public void onItemClick(AdapterView<?> parent, View v,
            int position, long id) {

        String riga = String.valueOf(id);
        String confr = vdb.getRecord(riga,2);
        System.out.println("position= " + position + "/id= " + id+"/nome= "+confr);
        new_valuta = vdb.getRecord(riga,2);
        listdb.update("9", "Valuta", new_valuta, "2");
        c_list.requery();

        return;

    }
});

AlertDialog alert = miaAlert.create();

alert.show();} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T13:18:47.997

您缺少的是实际关闭对话框的调用：

```
AlertDialog.Builder miaAlert = new AlertDialog.Builder(this);

final ListView lV = new ListView(this);
miaAlert.setTitle("Choose Valuta");
miaAlert.setView(lV);
miaAlert.setCancelable(false);

final AlertDialog alert = miaAlert.create();

lV.setOnItemClickListener(new OnItemClickListener() {
    public void onItemClick(AdapterView<?> parent, View v,
            int position, long id) {

        String riga = String.valueOf(id);
        String confr = vdb.getRecord(riga,2);
        System.out.println("position= " + position + "/id= " + id+"/nome= "+confr);
        new_valuta = vdb.getRecord(riga,2);
        listdb.update("9", "Valuta", new_valuta, "2");
        c_list.requery();

        alert.dismiss();

    }
});

alert.show(); 
```

当然，这是对您的光标管理代码的补充。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T13:18:19.540

我认为你必须在方法`alert.dismiss()`内调用`onItemClick(...)`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T05:44:54.587

使用 alert.dismiss() 关闭对话框

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-04T13:18:05.767

您无需执行任何操作来关闭对话框。如果您设置按钮，默认行为是在单击时关闭对话框，但在这种情况下，您使用的是带有自定义 OnItemClickListener 的自定义视图。

`alert.dismiss();`您可以通过调用-方法显式关闭对话框`onItemClick()`。

# sql - PostgreSQL IF-THEN-ELSE 控制结构

> ID：10011862
> 
> 赞同：10
> 
> 时间：2012-04-04T13:14:02.787
> 
> 标签：sql, postgresql, plpgsql

为什么我总是从 Postgres 收到以下错误？

`syntax error at or near "IF"`

我阅读了[PostgreSQL：文档：8.3：控制结构](http://www.postgresql.org/docs/8.3/static/plpgsql-control-structures.html#PLPGSQL-CONDITIONALS)。首先，我尝试执行一个困难的查询（使用子查询），但随后我尝试执行一个像这样的简单查询：

```
IF 2 <> 0 THEN select * from users; END IF; 
```

错误仍然相同。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-04-04T14:20:08.217

```
IF 2 <> 0 THEN select * from users; END IF; 
```

您不能在 plpgsql 函数之外使用 PL/pgSQL 语句。如果这个片段来自 plpgsql 函数，那么它也是无稽之谈。您不能像 T-SQL 那样直接返回查询结果。

```
CREATE OR REPLACE FUNCTION test(p int)
RETURNS SETOF users AS $$
BEGIN
  IF p = 1 THEN
    RETURN QUERY SELECT * FROM users;
  END IF;
  RETURN;
END;
$$ LANGUAGE plpgsql; 
```

当你从函数中得到一些结果时，你必须使用 RETURN 语句——plpgsql 只知道函数，它不支持过程——所以无界 SELECT 没有意义。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-04T13:45:21.820

您没有将 PL/pgSQL 控制结构封闭在[匿名块](http://www.postgresql.org/docs/current/static/sql-do.html)或 PL/pgSQL 函数中。

有关此控制结构的 SQL 版本，请参阅[`CASE`](http://www.postgresql.org/docs/current/static/functions-conditional.html#FUNCTIONS-CASE).

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-11-28T16:06:32.040

你没有封闭那个 PL/pgSQL。它们需要用[匿名代码块](http://www.postgresql.org/docs/current/static/sql-do.html)括起来。您的代码示例：

```
DO $$ BEGIN

    IF 2 <> 0 THEN select * from users; END IF;

END$$; 
```

# hibernate - 在多对一关系上仅选择非空集

> ID：10011864
> 
> 赞同：1
> 
> 时间：2012-04-04T13:14:05.473
> 
> 标签：hibernate, hql

我的数据库中有 3 个表，例如具有这样的名称：

```
TableA, TableB, Table_A_B 
```

在我的 TableA 映射文件中，我有这个：

```
<set name="tableBSet" table="Table_A_B" cascade="all" fetch="select" lazy="true">
<key column="tableAId"/>
<many-to-many column="junctionId" class="..."/>
</set> 
```

如何使用 HQL 仅选择那些 tableBSet 不为空或不为空的记录？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T13:40:10.177

你能提供更多的映射或结构吗？就你所写的而言，我建议你想要没有空或空 B 的 A。所以我会说

```
select ab.a 
from tableAB ab 
where (ab.b not null || ab.b not empty) 
```

作为伪

# c++ - 使用 boost::bind 和 boost::function 的问题

> ID：10011866
> 
> 赞同：3
> 
> 时间：2012-04-04T13:14:26.127
> 
> 标签：c++, class, templates, boost-bind, boost-function

从这个问题开始

[如何将类成员函数传递给 3rd 方库中的方法？](https://stackoverflow.com/questions/9997299/how-to-pass-class-member-functions-to-a-method-in-a-3rd-party-library)

快速回顾一下，我需要将指向函数的指针传递给第 3 方库中名为 moveset 的类的构造函数，其定义为

```
template <class Space>
moveset<Space>::moveset(particle<Space> (*pfInit)(rng*),
          void (*pfNewMoves)(long, particle<Space> &,rng*),
          int (*pfNewMCMC)(long,particle<Space> &,rng*)) 
```

该库提供的示例是简单地为 pfInit 等定义全局函数，我们称它们为 f、g 和 h。然后从控制器类中调用 smc::moveset Moveset(f,g,h)；

我试图使用 boost:bind 来实现这个建议。不幸的是，我正在努力让它发挥作用。

```
class IK_PFWrapper
{
 public:

 IK_PFWrapper(Skeleton* skeleton, PFSettings* pfSettings) ;
 smc::particle<cv_state> fInitialise(smc::rng *pRng);

... 
} ; 
```

在控制器类中

```
IK_PFWrapper testWrapper (skeleton_,pfSettings_);
boost::function<smc::particle<cv_state> (smc::rng *)>  f = boost::bind(&IK_PFWrapper::fInitialise, &testWrapper,_1) ; 

// the 2nd and 3rd argument will be eventually be defined in the same manner as the 1st
smc::moveset<cv_state> Moveset(f, NULL, NULL); 
```

产生的编译器错误是，

```
Algorithms\IK_PFController.cpp(88): error C2664: 'smc::moveset<Space>::moveset(smc::particle<Space> (__cdecl *)(smc::rng *),void (__cdecl *)(long,smc::particle<Space> &,smc::rng *),int (__cdecl *)(long,smc::particle<Space> &,smc::rng *))' : cannot convert parameter 1 from 'boost::function<Signature>' to 'smc::particle<Space> (__cdecl *)(smc::rng *)'
with
[
 Space=cv_state
]
and
[
 Signature=smc::particle<cv_state> (smc::rng *)
]
and
[
 Space=cv_state
]
No user-defined-conversion operator available that can perform this conversion, or the operator cannot be called 
```

非常感谢任何帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T21:58:34.863

请参阅[将 boost::function 降级为普通函数指针。](https://stackoverflow.com/questions/282372/demote-boostfunction-to-a-plain-function-pointer)

`boost::function`（您创建的`boost::bind`不会自动转换为普通的旧函数指针。

我建议创建一个使用 的包装器接口`boost::function`，即您的示例（简化为一个参数）看起来像：

```
template <class Space>
moveset<Space>::moveset(boost::function<particle<Space> (rng*)> pfInit)
{
    library_namespace::moveset<Space>(
        pfInit.target<particle<Space>(rng*)>()    // parameter 1
    );
} 
```

创建包装器意味着您只需在一个地方处理原始函数指针。希望对您有所帮助，并对代码片段中的任何和所有错误表示歉意！

# blackberry - java.lang.SecurityException：不允许对此连接进行 JSR 177 访问

> ID：10011871
> 
> 赞同：0
> 
> 时间：2012-04-04T13:14:36.393
> 
> 标签：blackberry, securityexception, sim-card, apdu

我正在尝试使用带有 SAT 目标的 APDUConnection 与 SIM 卡通信，但我得到了这个异常：

“java.lang.SecurityException：不允许对此连接进行 JSR 177 访问”

```
public void Test() {
 APDUConnection acn = null;
 try     {
    //Create an APDUConnection object
    acn = (APDUConnection)  Connector.open("apdu:0;target=SAT");        
    // ...      
 }
 catch( SecurityException e) {
    String exceptionMsg = "SecurityException: " + e.toString();
    System.err.println(exceptionMsg);
 }
 // ...
} 
```

我尝试与之通信的 SIM 卡存在此问题，但在其他 SIM 卡上，例如我的运营商 (Rogers)，我可以很好地打开 APDU 连接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T12:48:41.170

您的 SIM 卡的 ACF（访问控制文件）有一些 Roger 的 SIM 卡没有的限制。您必须使用 MNO（SIM 所有者）提供的证书路径对 midlet 进行签名才能访问 SAT。

# html - 如何在 Play Framework 中安装和使用 JFreeChart

> ID：10011874
> 
> 赞同：0
> 
> 时间：2012-04-04T13:14:48.653
> 
> 标签：html, playframework, jfreechart

我正在使用 play 1.2.4，我想将[JFreeChart](http://www.jfree.org/jfreechart/)添加到我的项目中

有谁知道如何安装和简单使用？我尝试用谷歌搜索示例，但没有找到任何带有播放框架的示例。

提前致谢

依赖文件

```
require:
    - play
    - jfree ->jfreechart 1.0.13 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T13:57:08.697

Play 项目的依赖项在`conf/dependencies.yml`文件中配置（请参阅[有关依赖项管理的 Play 文档](http://www.playframework.org/documentation/1.2.4/dependency)）。

由于可以从中央 Maven 存储库中找到各种版本的 JFreeChart，因此您只需将以下（最后）行添加到您的依赖项文件中：

```
# Application dependencies

require:
    - ...
    - org.jfree -> jfreechart 1.0.14 
```

之后，运行`play dependencies`命令，它将下载所需的 JAR 并将它们安装到`lib`项目的文件夹中。您现在应该设置为在您的项目中使用 JFreeChart 类。

# c# - 无法从数据库中获取不同的 NULL

> ID：10011880
> 
> 赞同：2
> 
> 时间：2012-04-04T13:15:07.153
> 
> 标签：c#, sql, sqldatareader

我想从数据库中提取一列并将其保存到列表中。现在它可以工作但 NULL 值。原始数据库中的列 vlues 是：

```
19506
19022
117037
NULL
1680
70659
1666
NULL
NULL
NULL
NULL
NULL
NULL
NULL
NULL
NULL
NULL
8113
NULL 
```

你看有很多“NULL”。我只想得到一个“NULL”。我的代码结果有很多空字符串。

```
"19506"
"19022"
"117037"
""
"1680"
"70659"
"1666"
""
""
""
""
""
""
""
""
""
""
"8113"
"" 
```

我想要的是：

```
"19506"
"19022"
"117037"
""
"1680"
"70659"
"1666"
"8113" 
```

我的代码：

```
public static List<string> ExecuteReader(string commandtext,string col)
    {
        List<string> sRetVal = new List<string>();
        try
        {
            using (SqlConnection cnn = new SqlConnection(conn))
            {
                cnn.Open();
                using (SqlCommand cmd = new SqlCommand())
                {
                    cmd.Connection = cnn;
                    cmd.CommandType = CommandType.Text;
                    cmd.CommandText = commandtext;

                    using (SqlDataReader reader = cmd.ExecuteReader())
                    {
                        while (reader.Read())
                        {
                            sRetVal.Add(reader[col].ToString());
                        }

                    }
                }
                cnn.Close();
            }
        }
        catch (Exception ex)
        {

        }
        return sRetVal.ToList().Distinct().ToList();
    } 
```

谢谢。更新： `string commandtext = "select QO FROM [T1]";`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T13:22:38.557

在数据库中执行[`DISTINCT`](http://msdn.microsoft.com/en-us/library/ms187831%28v=sql.105%29.aspx)，它会自动为您处理：

```
select DISTINCT COALESCE(QO,'NULL') FROM [T1] 
```

> 对于`DISTINCT`关键字，空值被视为彼此重复。当`DISTINCT`被包含在`SELECT`语句`NULL`中时，无论遇到多少空值，结果都只返回一个。

[`COALESCE`](http://msdn.microsoft.com/en-us/library/ms190349.aspx)：

> 返回其参数中的第一个非空表达式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T13:20:42.740

您可以使用`ISNULL`（或`IFNULL`在 MySql 中）：

```
SELECT DISTINCT ISNULL(QO, '') FROM [T1] 
```

[http://msdn.microsoft.com/en-us/library/aa933210%28v=SQL.80%29.aspx](http://msdn.microsoft.com/en-us/library/aa933210%28v=SQL.80%29.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-04T13:22:21.033

你为什么不指定你想要一个不同的结果？

```
string commandtext = "select DISTINCT QO FROM [T1]"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-04T13:22:48.633

更改您的 SQL 命令文本（您尚未发布）以包含“DISTINCT”关键字。请注意，这也会对非 NULL 数据进行重复数据删除。如果您只想要一个 NULL 但否则重复，您可以更改查询以执行两个子集的 UNION。

所以要么：

```
SELECT DISTINCT QO FROM [T1] 
```

或者

```
SELECT QO FROM [T1] WHERE QO IS NOT NULL
UNION
SELECT DISTINCT QO FROM [T1] WHERE QO IS NULL -- at most one row 
```

至于使用 LINQ Distinct() 对您不起作用 - 我相信比较 DBNull.Value 时存在问题，因为它在其平等比较器中从未将它们视为平等。在 ANSI SQL NULL 处理中，这也被视为不相同，但基于上下文的 DISTINCT、GROUP BY 存在异常。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-04-04T13:26:39.820

如果你能`SELECT DISTINCT ISNULL (MyColumn, '') FROM MyTable`像 Sohne 说的那样做，那么你应该这样做。否则......这很丑陋，但给你

```
while (reader.Read())
{
    if (reader[col] == DBNull){
        str = "";
        if(!blNullFound){            
            sRetVal.Add(str);
        }
        blNullFound = true;
    } else {
        str = reader[col].ToString(); 
    }
} 
```

# android - RingtonePreference 未触发 OnPreferenceChangeListener

> ID：10011883
> 
> 赞同：5
> 
> 时间：2012-04-04T13:15:27.210
> 
> 标签：android, android-widget

我拥有的所有其他首选项都会触发其 OnPreferenceChangeListener。但是，我的 RingtonePreference 它没有：

```
p = getPreferenceScreen().findPreference("pref_tone");
String rname = preferences.getString("pref_tone",Settings.System.DEFAULT_RINGTONE_URI.toString());
String name = ringtoneToName(rname);
p.setSummary(name);
p.setOnPreferenceChangeListener(new OnPreferenceChangeListener() {
public boolean onPreferenceChange(Preference preference, Object newValue) {
    // Never hits here!
    String v = (String) newValue;
    preference.setSummary(ringtoneToName(v));           
    return true;
}
}); 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-04T22:54:57.803

onActivityResult 必须调用 super.onActivityResult 是修复

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-08-10T06:03:10.353

请注意，RingtonePreference 使用 Activity 作为铃声选择器。

如果您在支持 PreferenceFragment( `android.support.v4.preference.PreferenceFragment`) 中使用 RingtonePreference，那么 RingtonePreference 在调用时会错误地使用父 Activity 而不是 PreferenceFragment `startActivityForResult`。这意味着`onActivityResult`回调也会在父 Activity 上被调用。解决此问题的最简单解决方法是`onActivityResult`在父 Activity 中覆盖并确保它将回调转发到 PreferenceFragment。例如像这样：

```
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);

    Fragment f = getSupportFragmentManager().findFragmentByTag(PREFERENCE_FRAGMENT_TAG);
    if (f != null) {
        f.onActivityResult(requestCode, resultCode, data);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-22T18:58:25.683

那些仍然面临问题的人，如果您正在使用首选项片段，请在首选项片段中添加以下代码`

```
findPreference(getString(R.string.notification_key)).setOnPreferenceChangeListener(this);

@Override
public boolean onPreferenceChange(Preference preference, Object newVal) {

    if (preference.getKey().equals(getString(R.string.notification_key))) {

        Ringtone ringtone = RingtoneManager.getRingtone(getActivity(), Uri.parse(newVal.toString()));
        String name = ringtone.getTitle(getActivity());
        preference.setSummary(name);
    }

    return false;
}

 @Override
public void onActivityResult(int requestCode, int resultCode, Intent data) {

        super.onActivityResult(requestCode,resultCode,data);
    } 
```

在此之后你的 onPreferenceChange 方法应该被调用

# openjpa - 使用 OpenJPA 重新创建查询

> ID：10011884
> 
> 赞同：0
> 
> 时间：2012-04-04T13:15:31.073
> 
> 标签：openjpa, wid

这是一个我正在尝试使用 OpenJPA 重新创建的 oracle 查询。我正在 Websphere 集成开发人员中编写服务，并且我使用 OpenJPA 作为我选择的 ORM 工具。以前，此查询是使用存储过程执行的，使用了 ref 游标并像这样检索信息。现在我们正在尝试使用 OpenJPA 作为我们选择的工具。所以我想我应该使用 OpenJPA 重建存储的过程......

```
SELECT DISTINCT
   P.col1 as ID,
   P.col2,
   P.col3,
   P.col4,
   P.col5,
   S.col6,
   PC.col7,
   P.col8,
   A.ADDRESS_1,
   A.ADDRESS_2,
   A.ADDRESS_3,
   A.CITY,
   A.COUNTY,
   A.STATE,
   A.ZIP_CODE,
   P.CONFIRMED_BY,
   P.CONFIRMED_DATE,
   P.MOD_USERID,
   P.MOD_DATE
FROM   EPCD13.PROVIDER P, EPCD13.provider_channel PC, EPCD13.provider_channel_link pcl,
   EPCD13.provider_specialty ps, EPCD13.SPECIALTY S, EPCD13.Address A, EPCD13.ADDRESS_LINK AL
WHERE P.RESOURCE_ID = personID
  AND P.RESOURCE_ID = PS.RESOURCE_ID (+)
  AND 1 = PS.PRIMARY_SPECIALTY_ID (+)
  AND PS.SPECIALTY_ID = S.SPECIALTY_ID (+)
  AND P.RESOURCE_ID = PCL.RESOURCE_ID (+)
  AND PCL.PROVIDER_CHANNEL_ID = PC.PROVIDER_CHANNEL_ID
  AND 1 = PCL.PREFERENCE (+)
  AND 9 = pc.channel_type_id (+)
  AND PC.CHANNEL_ADDRESS NOT LIKE '%@%'
  AND P.RESOURCE_ID = AL.RESOURCE_ID (+)
  AND AL.ADDRESS_ID = A.ADDRESS_ID (+)
  AND 1 = A.ADDRESS_TYPE_ID (+) 
  AND 1 = AL.PREFERENCE (+); 
```

注意所有那些内部连接等等。我现在正在考虑将命名查询放入我的方法中，该方法将返回与上述相同的结果。正如您可能注意到的那样，有多个表在那里被调用并在各个点连接......我想我可以将此查询放入 createNamedQuery() 函数中进行微小的更改......但我认为必须是一种更简单的方法吗？也许不吧。我可以使用 JPA 调用存储过程吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T03:34:57.893

因为你的 SQL 非常复杂，转换为 JPQL 并不容易，我建议保留它。您可以使用 OpenJPA 的 NativeQuery，它可以进行 SQL 查询。如果您的 SQL 不是以 SELECT 开头的，它将被视为存储过程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T18:43:19.717

您可以为每个表创建一个 JPA 实体，然后通过执行类似以下操作来连接实体：http: [//openjpa.apache.org/builds/1.1.1-SNAPSHOT/docs/jpa_overview_mapping_full.html](http://openjpa.apache.org/builds/1.1.1-SNAPSHOT/docs/jpa_overview_mapping_full.html) 查看`@OnetoMany and @ManytoOne and @ManytoMany`注释一些想法的例子。

# c++ - 覆盖虚拟方法时无法返回派生类指针

> ID：10011886
> 
> 赞同：0
> 
> 时间：2012-04-04T13:15:34.877
> 
> 标签：c++, g++

这个问题是关于用不同的返回类型覆盖派生类中的虚拟方法。对于以下代码：

```
class father {
public:
  virtual father* ref() { return this; }
};

class child : public father {
  virtual child* ref() { return this; }
}; 
```

当我尝试直接获取指针时，g++ (F15, g++4.5) 报告“从父亲到孩子的无效转换”

```
child m_child;
father* pf = &m_child;
child* pc = pf->ref(); 
```

我了解使用了子类中的 ref() 方法，这可能只是编译时类型不匹配。

但是，有没有办法在不显式使用类型转换的情况下做到这一点？

额外说明：我理解编译器报这个错误的原因。我需要的是开箱即​​用的东西，它可以访问派生对象中的数据，而无需显式转换指针。

父类用于将不同的派生子对象放入列表或向量中，因此当从列表或向量中获取项目时，无法分辨它属于哪个子类。

我有内部方法来记录和检查子类类型。但我不想显式转换指针。

例如，我想做这样的事情：

```
// assuming pf is pointer pointed to an item fetch from a vector
switch(fp->get_type()) {
case child_type1: fp->ref()->list1.push(data); break;
case child_type2: fp->ref()->list2.push(data); break;
case child_type3: fp->ref()->list3.push(data); break;
} 
```

现在，我需要在每种情况下以及每次需要访问派生类中的数据时显式声明一个新变量或显式将 fp 转换为正确的类型，这既乏味又令人困惑。

我期望的是：可能是一些 boost 库可以以我还不知道的另一种方式做类似的事情，或者可能是 c++11 标准允许它但需要设置一个特殊的编译参数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T13:41:03.227

简单的答案是“不”。

通过将 s 类型信息存储为指向基 ( ) 的指针，您丢失了有关 何时丢弃s 类型信息的额外信息 (`child*`而不是)。`father*``ref``m_child``pf`

没有演员表就永远不可能的一个原因是这个例子：

```
class father {
public:
  virtual father* ref() { return this; }
};

class childA : public father {
  virtual childA* ref() { return this; }
};

class childB : public father {
  virtual childB* ref() { return this; }
};

void should_never_compile(int i)
{
   childA a;
   childB b;
   father pf;
   if( i ) { pf=&a; }
   else { pf=&b; }

   // This is evil and will not compile
   childA * pa = pf->ref();

   //But this is OK:
   childA * pa = dynamic_cast<childA*>(pf->ref() );
} 
```

如果你真的想在没有动态演员表的情况下做到这一点，你可以隐藏动态演员表（但这让我有点害怕）

```
class father {
public:
  virtual father* ref() { return this; }
  template<typename T> T* as() { return dynamic_cast<T*>(ref()); }
};

child m_child;
father* pf = &m_child;
child* pc = pf->as<child>(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T13:25:03.903

你的函数做你所期望的和你告诉它的。线

```
child* pc = pf->ref(); 
```

是问题所在。您在指向父亲的指针上调用函数“ref()”，它返回（按类型）父亲 *。您将其分配给子 *. 该函数的实现返回一个子 *，但是*从你调用它的地方，你不知道该信息，*因为你只知道它是一个父亲 *。因此，返回类型是一个父亲 *（如父类中所示），并且您将其分配给子 * 而不转换。你**可以**这样做：

```
child *pc = m_child.ref();
father *pf = m_child.ref();
father *pf2 = pf->ref(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-04T13:26:23.123

问题是在 call`pf->ref()`中，类型`ref`是：`father* (father::*)()`。

也就是说，*静态*`ref`解析为具有给定签名的方法。这个签名表明它返回一个.*`virtual``father*`*

 *因此：

```
int main() {
  father f;
  father* pf = &f;

  child c;
  child* pc = &c;

  child* xf = pf->ref(); // compile-time failure
  child* xc = pc->ref(); // okay
} 
```

问题是，一般来说，从 a 开始`father*`你不知道你是否会得到 a `child*`，这取决于实例的动态类型。所以编译器假设最坏的情况：它必须至少是`father`.*

# debugging - node.js 中的节点检查器：我在脚本列表中看不到我的源文件，但我可以在调用堆栈中看到它们

> ID：10011888
> 
> 赞同：0
> 
> 时间：2012-04-04T13:15:36.640
> 
> 标签：debugging, node.js, node-inspector

我在脚本列表中看不到我的源文件，但我可以在调用堆栈中看到它们。

我在我的源文件中设置了一个断点，但有时它只是不想在节点检查器中显示我的源文件.. 但只是有时：s 这就是问题所在

有人知道如何使这项工作顺利进行吗？多谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T14:19:59.213

您必须刷新已启动节点检查器的浏览器。我想我有同样的问题。

# python - 有效地从其兄弟中减去列表中的项目

> ID：10011891
> 
> 赞同：0
> 
> 时间：2012-04-04T13:15:43.040
> 
> 标签：python, map, lambda

> **可能的重复：**
> [列表或元组的成对遍历](https://stackoverflow.com/questions/3849625/pairwise-traversal-of-a-list-or-tuple)

我有这个清单：`[(0, 'set'), (1, 'of'), (4, 'coloured'),(5, 'eels')]`

我想有效地迭代并实现 item+1[0] - item[0]

如 1 - 0、4 - 1、5 - 4

我目前有：

```
search_list = [(0, 'set'), (1, 'of'), (4, 'coloured')] 
[search_list[i+1][0]-search_list[i][0] for i in range(0,len(search_list)-1)] 
```

但是我的代码没有我想要的那么高效。map 和 lambda 能达到结果吗？

我想避免导入模块（当然，如果 lambda 和 map 无法实现这一点）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T13:22:32.550

我不确定是否有效率：

```
>>> search_list = [(0, 'set'), (1, 'of'), (4, 'coloured'),(5, 'eels')]
>>> [y[0]-x[0] for x,y in zip(search_list,search_list[1:])]
[1, 3, 1] 
```

`itertools`大众需求的版本：

```
>>> from itertools import izip, islice
>>> search_list = [(0, 'set'), (1, 'of'), (4, 'coloured'),(5, 'eels')]
>>> [y[0]-x[0] for x,y in izip(search_list, islice(search_list, 1, None))]
[1, 3, 1] 
```

# javascript - 将多个系列加载到图表中

> ID：10011892
> 
> 赞同：5
> 
> 时间：2012-04-04T13:15:46.767
> 
> 标签：javascript, extjs, extjs4, extjs-mvc

我想在我的 ExtJS4 图表之一中有许多 LineSeries。

我有一家看起来像这样的商店：

```
Ext.define('DayStatistics', {
    extend:'Ext.data.ArrayStore',
    fields:[ 'date', 'count_impressions', 'count_clicks', 'count_conversions' ]
}); 
```

并且根据我在网格视图中选择的条目数，我想为每个条目绘制三条线（'count_impressions'、'count_clicks'、'count_conversions'），这意味着网格视图中的每个条目都会有几个商店中的条目。

目前，我有以下函数，每次选择更改都会调用它：

```
loadChart: function (Model, records) {
    var removeChart = function (chart) {
        var series = chart.series.items, surface = chart.surface,
            length = series.length, len = surface.groups.keys.length,
            array = [];
        for (var i = 0; i < length; i++)
            array = Ext.Array.merge(array, series[i].group.keys);
        chart.series.clear();
        for (var j = 0; j < array.length; j++)
            surface.items.getByKey(array[j]).destroy();
        for (var t = 0; t < len; t++)
            surface.groups.items[t].destroy();
    };

    var chart = Ext.getCmp('advertiserstatisticlist.advertiserChart');
    removeChart(chart);

    for (var record in records) {
        chart.series.add({
            type:'line',
            xField:'date',
            yField:'count_impressions'
        });
        chart.store.loadData(records[record].data.days, true);
        chart.refresh();
    }
} 
```

有了它，我可以将网格视图中的哪个条目更改为图表。但这不是我想要的。如何显示“多个商店”？

我想到了一种解决方案，我必须尝试：通过执行类似 { date : 'impressions_1', 'impressions_2', ... } 的操作来“线性化”商店。但这种解决方案只会将黑客的复杂性从图表转移到商店。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T20:04:03.423

问题的前半部分是有道理的，但是这一段把它扔掉了：

> 有了它，我可以将网格视图中的哪个条目更改为图表。但这不是我想要的。如何显示“多个商店”？

我假设您的意思是多个*系列*。

使用问题中包含的处理程序应该很简单`selectionchange`：

```
loadChart: function (selModel, records) {

    var chart = Ext.getCmp('advertiserstatisticlist.advertiserChart');

    chart.series.clear();

    for (var record in records) {
        chart.series.add({
            type:'line',
            xField:'date',
            yField: record.get(/*[whatever you named the "series name" field in the grid store]*/)
        });
    }
    chart.redraw();
} 
```

# java - 包括库，同时避免使用您的代码的代码冲突

> ID：10011897
> 
> 赞同：3
> 
> 时间：2012-04-04T13:15:59.743
> 
> 标签：java

**具体示例：**

我正在编写一个库来提供给定的功能。在编写我的库时，我想使用 Apache Commons（即 StringUtils 等），而不是重新发明轮子。不幸的是，如果我将该库包含在我的库中，无论是作为单独的 jar 还是内置到我自己的 jar 中（build-with-dependencies），我都会强制使用我的库的任何人使用 Apache Commons ......另外我强制使用我使用的版本在他们。

**问题：**

有没有办法在 Java 中创建一个依赖于第 3 方库的库/jar，而不会强制使用您的库的人使用该库（或更糟糕的是，该库的版本）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T13:21:53.363

你知道 jarjar 吗？[https://code.google.com/p/jarjar/](https://code.google.com/p/jarjar/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T13:35:54.523

如果您打算通过 Maven 分发二进制 jar，则不必担心“强制”依赖于使用该 jar 的任何人。任何使用 Maven 的人都完全习惯于被拖入传递依赖项。Maven 也有许多用于解决版本冲突的奇特代码。

如果你对此过于偏执，你可以使用 shade 插件创建一个带有依赖项的 uber-jar 并重命名所有依赖项的包：[http ://maven.apache.org/plugins/maven-shade-plugin/ examples/class-relocation.html](http://maven.apache.org/plugins/maven-shade-plugin/examples/class-relocation.html)但这并不是真的必要。

# jquery - 有没有更好的方法来编写这个 jQuery？

> ID：10011900
> 
> 赞同：0
> 
> 时间：2012-04-04T13:16:10.073
> 
> 标签：jquery

我有以下 jQuery 行，但使用`.each()`.

```
$('span[data-private]').each(function () { 
    $(this).text($(this).attr("data-hidden")); 
}); 
```

有没有更好的方法来编写这个看起来像这样的 jQuery：

```
// This doesn't work as $(this) refers to document not the current selector
// but it gives the idea of what I'm looking for.  I want to reference the current
// selector
$('span[data-private]').text($(this).attr("data-hidden")); 
```

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T13:17:51.627

`each()`循环遍历元素时应使用该方法。如果您有几个元素要应用此功能，则使用此功能：

```
$('span[data-private]').each(function () { 
    $(this).text($(this).attr("data-hidden")); 
}); 
```

或者，如果您只将此函数应用于一个元素，则只需在`text()`方法上使用回调，如下所示：

```
$('span[data-private]').text(function () { 
    return $(this).attr("data-hidden"); 
}); 
```

**无论如何，这两种方法都不会征税，但是，这种方法的税收略低一些，因为它不会遍历元素**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-04T13:22:05.310

[`.text`](http://api.jquery.com/text/)可以传递一个回调函数。

```
$('span[data-private]').text(function(){
    return $(this).attr("data-hidden");
}); 
```

演示：http: [//jsfiddle.net/9w69E/](http://jsfiddle.net/9w69E/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T13:19:37.353

嗯，也许可以尝试这样的事情：

```
(function(){
    var $self = $('span[data-private]');
    $self.text($self.data('hidden'));
})() 
```

# mysql - 加入/合并两个表，即兴创作/弥补“缺失”的条目

> ID：10011902
> 
> 赞同：2
> 
> 时间：2012-04-04T13:16:10.853
> 
> 标签：mysql, sql, database, missing-data

我有两个表，`tbl_foo`和`tbl_bar`，我想`tbl_foo.foo_id = tbl_bar.foo_id`在 on-clause 中加入这些表。但是，对于每个都`tbl_bar.baz_id`应该有一行`tbl_foo.foo_id`（即使不`tbl_bar`存在这样的条目）。我该如何编写这样的查询？

下面有关于架构和我想要的结果的更多信息。

*   **编辑：**每一行**必须**有一个`foo_id`and `baz_id`。
*   **编辑2：**在下面添加`tbl_baz`。

## 期望的结果

```
+--------+--------+--------+------------+
| bar_id | baz_id | foo_id | some_field |
+--------+--------+--------+------------+
|      1 |    101 |      1 | foo        |
|      2 |    101 |      2 | bar        |
|      3 |    101 |      3 | baz        |
|   NULL |    101 |      4 | bin        |
|      4 |    102 |      1 | foo        |
|   NULL |    102 |      2 | bar        |
|      5 |    102 |      3 | baz        |
|   NULL |    102 |      4 | bin        |
+--------+--------+--------+------------+ 
```

## 表：tbl_foo

```
+--------+------------+
| foo_id | some_field |
+--------+------------+
|      1 | foo        |
|      2 | bar        |
|      3 | baz        |
|      4 | bin        |
+--------+------------+ 
```

## 表：tbl_bar

```
+--------+--------+--------+
| bar_id | baz_id | foo_id |
+--------+--------+--------+
|      1 |    101 |      1 |
|      2 |    101 |      2 |
|      3 |    101 |      3 |
|      4 |    102 |      1 |
|      5 |    102 |      3 |
+--------+--------+--------+ 
```

## 表：tbl_baz

```
+--------+
| baz_id |
+--------+
|    101 |
|    102 |
+--------+ 
```

## SQL 架构

```
CREATE TABLE tbl_foo (
    foo_id INT,
    some_field VARCHAR(255),
    PRIMARY KEY (foo_id)
);

INSERT INTO tbl_foo VALUES
(1, 'foo'),
(2, 'bar'),
(3, 'baz'),
(4, 'bin');

CREATE TABLE tbl_bar (
    bar_id INT,
    baz_id INT,
    foo_id INT,
    PRIMARY KEY (bar_id, baz_id),
    FOREIGN KEY (baz_id) REFERENCES tbl_baz (baz_id),
    FOREIGN KEY (foo_id) REFERENCES tbl_foo (foo_id)
);

INSERT INTO tbl_bar VALUES
(1, 101, 1),
(2, 101, 2),
(3, 101, 3),
(4, 102, 1),
(5, 102, 3);

CREATE TABLE tbl_baz (
    baz_id INT,
    PRIMARY KEY (baz_id)
);

INSERT INTO tbl_baz VALUES
(101),
(102); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T13:30:42.530

就像 mwigdalh 说的那样，没有办法用给定的表来实现那个输出。如果有另一张 baz 表，那就有办法了。问题是下面突出显示的记录基本上是凭空捏造的，毫无意义。你可以很容易地把“meh”放在每一个中，输出也会很有意义。

```
+--------+--------+--------+------------+
| bar_id | baz_id | foo_id | some_field |
+--------+--------+--------+------------+
|      1 |    101 |      1 | foo        |
|      2 |    101 |      2 | bar        |
|      3 |    101 |      3 | baz        |
|   NULL |   *101*|      4 | bin        |
|      4 |    102 |      1 | foo        |
|   NULL |   *102*|      2 | bar        |
|      5 |    102 |      3 | baz        |
|   NULL |   *102*|      4 | bin        |
+--------+--------+--------+------------+ 
```

如果您在更接近真实世界的示例中提供一些上下文，则可能会发现完全不同的输出可以达到您想要的结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T13:53:29.747

您*可能*正在寻找这样的查询：

**更新**

基于新的 tbl_baz：

```
select y.bar_id, x.baz_id, x.foo_id, x.some_field
from (
    select a.foo_id, a.some_field, b.baz_id
    -- Cross foo_id with all baz_id
    from tbl_foo as a, tbl_baz as b
) as x
    -- Get the bar_id where it exists for each foo_id/baz_id combo
    left join tbl_bar as y on x.foo_id = y.foo_id
        and x.baz_id = y.baz_id
order by x.baz_id, x.foo_id 
```

这是基于您希望查看每个 baz_id 的每个 foo_id 的假设，而不管多对多表中有什么。

**为什么您可能不想要这个，或者可能想要更新您的多对多表的**示例：****

 **如果我们用“person”和“car”替换“foo”和“baz”，这个查询本质上是说每个人都拥有每辆车。可能是这种情况，但肯定不会在“所有权”多对多表（条形图）中表示。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T13:26:45.197

模糊，你不能从这里到达那里。您正在要求一个结果，该结果指定一个`baz_id`for 行，其中没有相应的行 from `tbl_bar`。在这种情况下，根本没有办法构造缺失的数据。

您的架构不正确，或者您需要一些自定义默认逻辑来处理在`tbl_bar`.**

# python - Django：调用自己的模型方法时出现AttributeError

> ID：10011904
> 
> 赞同：3
> 
> 时间：2012-04-04T13:16:28.200
> 
> 标签：python, django, django-models

我最近在我的模型“News”中添加了一个新方法：

```
def slug(self):
    return slugify(self.title) 
```

但是我似乎无法从任何地方调用它。想象一下，我有一个名为 n 的 News 对象。尝试打电话时

```
n.slug() 
```

我总是收到如下错误：

```
AttributeError: 'News' object has no attribute 'slug' 
```

我是 Django 和 Python 的初学者，我确信这只是我的一个愚蠢的错误。顺便说一句，我在添加方法后尝试重新启动开发服务器并同步数据库，两者都没有改变。请注意，我以前使用过这样的模型方法没有问题：S

**编辑：**

这是模型：

```
from django.template.defaultfilters import slugify

class News(models.Model):
    title = models.CharField(max_length=100)
    [...]
    def slug(self):
        return slugify(self.title) 
```

这是一些关于我如何调用该方法的示例代码。我首先尝试在模板中调用它，但它不起作用。然后我改变了我的看法，所以它只返回 slug，但错误仍然存​​在。当我在shell中尝试时也是如此。

```
from fbki.models import News

def news_detail(request, slug, news_id):
    news = News.objects.get(id = news_id)
    return HttpResponse(news.slug()) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-18T02:26:21.900

我有一些类似的错误。

我认为问题在于您的模型与数据库中的实际模式之间存在不一致。

运行`manage.py sql myapp`并验证内容是否与 sql> show schema (etc.) 中的内容匹配

如果它们不匹配，则必须使用 SQL 客户端并删除旧表，以便重新运行`manage.py syncdb`以使它们再次匹配。

一旦模式存在，您的方法应该可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T07:46:36.950

有，没有错误。请检查您的班级

```
 from fbki.models import News 
```

看起来您在项目中有两个副本，并修改了其他类。您通过将类 News 重命名为 News1 来检查。你会犯同样的错误 - 我是对的。

# php - 如何区分 CSV 文件中的数据

> ID：10011907
> 
> 赞同：1
> 
> 时间：2012-04-04T13:16:35.993
> 
> 标签：php, csv, filecompare

我有两个 csv 文件，并且都具有相同的数据结构。

```
ID - Join_date - Last_Login 
```

我想根据此示例比较并获取完全匹配的记录编号：

> 第一个文件有 100 条记录，其中 20 条不包含在第二个文件中。
> 
> 第二个文件有 120 条记录。

我想要一个 PHP 脚本来比较这两个文件并构建两个单独的 CSV 文件。

我想从第二个文件中删除第一个文件中不包含的所有额外记录。
并从第一个文件中删除不包含在第二个文件中的所有记录。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T13:26:23.717

有一个 GNU 实用程序`comm`可以很容易地做到这一点。您可以`exec`通过 php 或直接执行此操作。如果您无权访问`comm`，最简单的做法是将两个文件存储在一个数组中（可能通过`file()`）并使用`array_intersect()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T13:27:59.597

您可以尝试使用有限数量的 CSV 文件.. 如果您有一个非常大的 CSV，我建议您将其直接导入 MySQL

```
function csvToArray($csvFile, $full = false) {
    $handle = fopen ( $csvFile, "r" );
    $array = array ();
    while ( ($data = fgetcsv ( $handle )) !== FALSE ) {
        $array [] = ($full === true) ? $data : $data[0]; // Full array or only ID 
    }

    return $array;
}

$file1 = "file1.csv" ;
$file2 = "file2.csv" ;

$fileData1 = csvToArray($file1);
$fileData2 = csvToArray($file2);

var_dump(array_diff($fileData1,$fileData2));
var_dump(array_intersect($fileData1,$fileData2)); 
```

# jquery - jquery .find 总是有用的吗？

> ID：10011908
> 
> 赞同：5
> 
> 时间：2012-04-04T13:16:38.343
> 
> 标签：jquery

我有一些这样的 HTML：

```
<div id="MyDiv">

  <div class="Class1">
    <div class="SClass1"></div>
  </div>
  <div class="Class2"></div>

</div> 
```

有没有区别

```
$('#MyDiv').find('.SClass1').show(); 
```

和

```
$('#MyDiv .SClass1').show(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T13:25:02.250

[http://api.jquery.com/jquery/#selector-context](http://api.jquery.com/jquery/#selector-context)指出：

> 在内部，选择器上下文是用 .find() 方法实现的，所以 $('span', this) 等价于 $(this).find('span')。

意思是

```
$('#MyDiv .SClass1').show(); 
```

距离 jQuery 仅一步之遥

```
$('#MyDiv').find('.SClass1').show(); 
```

[查看这个 jsPerf 测试用例，看看速度上的差异](http://jsperf.com/test-jquery-find-speed/3)

* * *

正如@Dominic 在评论中提到的，在他的[jQuery Anti-Patterns for Performance & Compression 演示文稿](http://www.slideshare.net/paul.irish/perfcompression)中，Paul Irish 指出：

> 选择器优化
> 
> 当然，从#id 下降是最好的

```
// #id-based selector 
var arms = $('#container div.robotarm');

// hyper-optimized #id case first, then find: 
var arms = $('#container').find('div.robotarm'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-04T13:20:22.380

在你的情况下，使用`find()`是非常没有意义的（除了可读性 - 但任何人都会对此有不同的看法）。我只`find()`在真正需要的情况下使用，例如：

```
$('#MyDiv').show().find('.SClass1').css(...); 
```

首先必须对父元素进行某些操作，然后对其一个或多个子元素进行其他操作。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-04T13:21:19.850

本质上没有区别。但`find()`如果您将它与作用域变量和`this`.

例如：

```
$(document).ready( function() {
    $('.action').click( function() {
        $(this).find('p').text("hello world");
    });
}); 
```

它将所有`p`内容设置为具有名为`action`“hello world”的类的所有内容。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-04T13:22:01.753

它们都是等价的。第一个会稍微慢一些，因为您正在执行两个查询。速度上的差异可能并不明显。

您可以`find`在创建插件/组件时使用，该插件/组件在构造函数中获取它的容器，然后将其用作搜索的根，`find`以确保您没有在容器之外获取任何元素。

# iphone - 代码在模拟器上工作，但在 iPhone 上不行？

> ID：10011916
> 
> 赞同：0
> 
> 时间：2012-04-04T13:17:19.883
> 
> 标签：iphone, ios, cocoa-touch

我对此感到困惑：我已经在 iPhone Simulator 4.3 和 5.0 中测试了我的应用程序的过滤器功能，一切正常，但在 iPhone 上，谓词让我得到了错误的结果。（我怀疑它与正则表达式有关，但我没有看到错误。）

```
if (!selectionDidChange)
    return;
[matches release];
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"meta LIKE[c] %@",
                          UniversalKeyword];
NSPredicate *regional = [NSPredicate predicateWithFormat:@"regional == NIL OR regional == NO OR "
                         @"(regional == YES AND title.%K != NIL)", CurrentLanguage];
NSPredicate *exclusive = (exclusiveUpgrade ? [NSPredicate predicateWithValue:YES] :
                          [NSPredicate predicateWithFormat:@"exclusive == NIL OR exclusive == NO"]);
NSMutableArray *predicates = [[[NSMutableArray alloc] initWithCapacity:5] autorelease];
for (int i = 0; i < L(keywords); i++)
{
    int selection = [D(A(keywords, i), @"selection") intValue];
    if (selection >= 0)
        A_ADD(predicates, ([NSPredicate predicateWithFormat:@"meta MATCHES[c] %@",
                            S(S(@".*\\b", D(A(D(A(keywords, i), @"values"), selection), @"name")), @"\\b.*")]));
}
NSPredicate *compound = [NSCompoundPredicate andPredicateWithSubpredicates:predicates];
[predicates removeAllObjects];
[predicates addObject:predicate];
[predicates addObject:compound];
predicate = [NSCompoundPredicate andPredicateWithSubpredicates:A_NEW(regional, exclusive,
            [NSCompoundPredicate orPredicateWithSubpredicates:predicates])];
matches = [[entries filteredArrayUsingPredicate:predicate] retain];
selectionDidChange = NO; 
```

**为了澄清：**

*   `entries`并且`keywords`是字典数组，虽然`keywords`有点复杂。重要的是，其中的每个字典都`entries`包含一个名为的字符串，其名称`meta`可能类似于：“A、B、C、D”。如果用户搜索“C”，则正则表达式应该匹配。还有其他标准似乎不是问题，因为我检查了编译的谓词，它看起来很好。
*   我应该提一下，谓词 ( ) 的第一部分也`meta LIKE[c] %@`给了我在 iPhone 上的预期结果。
*   我在这里有一些使用过的便利宏：`A_ADD = addObject:`, `D = objectForKey:`, `A = objectAtIndex:`, `A_NEW = arrayWithObjects:`,`L = count`和`S = stringByAppendingString:`. （是的，我很懒：D）

我在这里俯瞰什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T23:21:57.973

以下是其他人遇到类似问题的关键点：

1.  `NSPredicate`iPhone 上的实现与 iOS 模拟器上的相应实现之间没有功能差异。
2.  如果您的应用在实际设备上的行为与在模拟器上的行为不同，请仔细检查文件名和其他字符串的大小写，就像*jmstone*所说的那样。
3.  如果问题仍然存在，请从模拟器和设备中删除该应用程序。Xcode 有许多自动行为，但它不会清理模拟器或设备上的任何内容。

# web-services - z/OS 如何调用 Web 服务？

> ID：10011917
> 
> 赞同：2
> 
> 时间：2012-04-04T13:17:20.383
> 
> 标签：web-services, cobol, mainframe, zos

我有一个需要从 Web 服务获取数据的 COBOL 程序。如果不使用 CICS，我最好的选择是什么？我认为 C 程序可以读取 Web 服务并将其保存到文件中，然后 COBOL 可以读取该文件。COBOL 可以调用 Web 服务吗？数据大小约为 300mb。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-06T14:09:10.700

Use the IBM TCP/IP 'EZASOKET' modules

I work for a company with a z/OS system running mostly COBOL, batch (JCL) and CICS. To call webservices, we wrote a module to implement HTTP 1.0 using TCP/IP. With modules

*   EZASOKET
    *   GETHOSTBYNAME
    *   SOCKET
    *   CONNECT
    *   WRITE
    *   FCNTL
    *   READ
    *   CLOSE
    *   SELECTEX

supplementary modules:

*   EZACIC04 translates EBCDIC to ASCII
*   EZACIC05 translates ASCII to EBCDIC
*   EZACIC06 convert character to bit mask
*   EZACIC08 decode IP address

Since I wrote this for my company, I can't just give out the code. But for reference, it took me 3 days to write the module, and that was with an example to start with that did a partial hacky way of doing it.

You'll need to read through IBM's references to know how to use the EZA modules.

*   [http://publib.boulder.ibm.com/infocenter/zos/v1r11/index.jsp?topic=/com.ibm.zos.r11.halc001/sampcs.htm](http://publib.boulder.ibm.com/infocenter/zos/v1r11/index.jsp?topic=/com.ibm.zos.r11.halc001/sampcs.htm)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-30T16:33:15.503

可以从 z/os 上的 COBOL 程序调用 java。
我们公司已经做到了。

1.  您必须指定它是 RECURSIVE
2.  你必须导入类

HelloJ 类是
“com.ibm.zos.batch.container.test.HelloJ”
JavaException 类是“java.lang.Exception”
BCDTranHelper 类是
“com.ibm.batch.spi.UserControlledTransactionHelper”。

1.  你必须包括 JNI。链接部分。复制 JNI

* *** *然后您可以在您的 PROCEDURE DIVISION 中从 COBOL 调用 java：
Invoke HelloJ "sayHello"

另请查看 Java Exception Check * 以了解如何处理异常。

如果您想从 z/os 上的 COBOL 程序调用 Web 服务，这将非常有用。

有关更多详细信息，请参阅此链接。

[http://pic.dhe.ibm.com/infocenter/zos/v1r13/index.jsp?topic=%2Fcom.ibm.zos.r13.iean500%2Fcodeexm.htm](http://pic.dhe.ibm.com/infocenter/zos/v1r13/index.jsp?topic=%2Fcom.ibm.zos.r13.iean500%2Fcodeexm.htm)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T15:48:19.893

也许看看[这篇文章](http://www.ibm.com/developerworks/systems/library/es-webservicesrpg/)。它建议为 Web 服务创建一个 C/C++ 包装器接口。虽然本文是针对 iSeries 的，但您可能能够在 zSeries 下使用 BPXBATCH 实现非常相似的东西

基本上，他们建议在您的 COBOL 代码和与 Web 服务接口的 C++ 代码之间使用 C 包装器。此解决方案允许 COBOL 以相对直接的方式调用 C 函数。C 函数通过使用 C++ 代理实现对 Web 服务的调用来模仿 C++ 行为。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-05T17:15:05.537

如果您可以在您的站点使用 Java 从 cobol 程序调用 Java 来访问 Web 服务，则可能是一种选择。假设您使用 Enterprise cobol，请查看[z/OS Volume II 上的 Java 独立应用程序的第 6.44 节](http://www.redbooks.ibm.com/abstracts/sg247291.html?Open)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-03-24T12:57:34.583

如果您使用的是 z/OS 2.1 或更高版本，请使用 z/OS 客户端 Web 支持工具包。

查看**SYS1.SAMPLIB(HWTHXCB1)**中的 Cobol 示例。

如果您的 Cobol 在 DB2 DSN 命令下运行，您还可以使用 SOAPHTTP* 标量函数。

# javascript - 如何在回调中调用对象的键？

> ID：10011919
> 
> 赞同：5
> 
> 时间：2012-04-04T13:17:29.867
> 
> 标签：javascript, oop, closures

如何在*obj*的*处理*函数中获取*变量*？没有引用*MyClass*中的*obj*。

 ***```
 var obj = {
        func: function(){
            var myClass = new MyClass();
            myClass.handler = this.handler;
            myClass.play();        
        },

        handler: function(){
            //Here i don't have access to obj
            console.log(this); //MyClass
            console.log(this.variable); //undefined
        },

        variable:true
    };

    function MyClass(){
        this.play = function(){
            this.handler();
        };

        this.handler = function(){};
    };

    obj.func(); 
```

​ 如果你使用 Base.js 或其他类似的 oop 方式，那就是构建需要你。

_.bindAll(obj)（下划线方法）也不适合。它是 Base.js 中的中断覆盖。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T13:34:40.697

使用变量来引用原始上下文：

```
...
var self = this;
myClass.handler = function(){ self.handler(); };
... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-04T13:35:36.603

仅绑定处理程序方法：http: [//jsfiddle.net/uZN3e/1/](http://jsfiddle.net/uZN3e/1/)

```
var obj = {
    variable:true,

    func: function(){
        var myClass = new MyClass();
        // notice Function.bind call here
        // you can use _.bind instead to make it compatible with legacy browsers
        myClass.handler = this.handler.bind(this);
        myClass.play();        
    },

    handler: function(){
        console.log(this.variable);
    }
};

function MyClass(){
    this.play = function(){
        this.handler();
    };

    this.handler = function(){};
};

obj.func();
​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T13:22:56.390

`variable`之前声明`handler`：

```
var obj = {
    variable: true, 

    func: function(){
        // ...       
    },

    handler: function(){
        console.log(this.variable); //true
    }
}; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-04T13:38:03.897

使用在作用域 var 中声明的来自 obj 的函数调用来解决它。

```
var obj = {
    func: function(){
        var self = this;
        var myClass = new MyClass();
        myClass.handler = function() { return this.handler.call(self); };
        myClass.play();        
    },

    handler: function(){
        //Here i don't have access to obj
        console.log(this); //MyClass
        console.log(this.variable); //undefined
    },

    variable:true
}; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-04T13:41:13.257

您无权访问*obj*，因为*它*绑定到 MyClass 构造函数的实例 - myClass。如果在*处理程序*中您想通过*this访问**myClass*并访问*obj*，则必须直接使用*obj*名称，这样：

 ***```
console.log(this); // myClass
console.log(obj.variable); // true 
```

如果您想*将此*绑定到*obj* ，请使用 Juan Mellado 或 gryzzly 建议的内容。******

# c - 无法使用 libpng 读取 png 文件

> ID：10011925
> 
> 赞同：1
> 
> 时间：2012-04-04T13:17:40.977
> 
> 标签：c, libpng

我是 libpng 的新手，文档对我来说真的很困惑。以下是我的代码不起作用，我看不出原因。有人可以指出我正确的方向吗？或建议不同的（“更容易”）库？

我如何理解 libpng：

1.  `fopen`在`rb`模式下打开文件

2.  创建`png_structp`与`png_create_read_struct`

3.  创建`png_infop`与`png_create_info_struct`

4.  分配空间

5.  读取数据

    ```
    #include <stdio.h>
    #include <png.h>

    int main( int argc, char **argv )
    {
        int x, y;
        int height, width;

        png_structp png_ptr;
        png_infop info_ptr;

        png_bytep *row_pointers;

        FILE *fp = fopen( "test.png", "rb");
        {
            if (!fp)
                printf("File could not be opened for reading");

            png_ptr = png_create_read_struct(PNG_LIBPNG_VER_STRING, NULL, NULL, NULL);

            info_ptr = png_create_info_struct(png_ptr);

            png_read_info(png_ptr, info_ptr);
            width = png_get_image_width(png_ptr, info_ptr);
            height = png_get_image_height(png_ptr, info_ptr);

            row_pointers = (png_bytep*) malloc(sizeof(png_bytep) * height);
            for (y=0; y<height; y++)
                row_pointers[y] = (png_byte*)malloc(png_get_rowbytes(png_ptr,info_ptr));

            png_read_image(png_ptr, row_pointers);

            fclose(fp);
        }

        for (y=0; y<height; y++) 
        {
            png_byte *row = row_pointers[y];
            for (x=0; x<width; x++) 
            {
                png_byte* ptr = &(row[x*4]);
                printf("Pixel at position [ %d - %d ] has RGBA values: %d - %d - %d - %d\n", x, y, ptr[0], ptr[1], ptr[2], ptr[3]);
            }
        }
    } 
    ```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-02-05T15:26:40.893

我同样在**png_create_read_struct**中失败了。没有更多信息很难调试（在我的情况下，stderr 无处可去），但幸运的是您可以提供自己的错误和警告功能：

```
void user_error_fn(png_structp png_ptr, png_const_charp error_msg);
void user_warning_fn(png_structp png_ptr, png_const_charp warning_msg); 
```

使用它，libpng 打印出有用的错误，说明应用程序使用的标头版本与运行时找到的 libpng 不同。谜团已揭开。

因此，虽然个别问题可能不同，但使用 libpng 的错误报告应该可以提供洞察力。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T13:55:36.463

显然，没有关于在哪里/如何读取图像块的信息传递给 libpng。利用：

... png_init_io(png_ptr, fp); png_read_info..

# windows-phone-7 - 如何自动调整listboxitem的大小？

> ID：10011926
> 
> 赞同：1
> 
> 时间：2012-04-04T13:17:42.003
> 
> 标签：windows-phone-7

我创建了一个水平方向的列表框。当我加载内容时，在stackpanel中stackpanel的大小会自动调整到里面存储的内容的大小。如何在列表框中实现这一点？

这是我在 XAML 中的列表框代码：

```
<ListBox Name="WebScrollView" 
             Grid.Row="2" 
             ScrollViewer.HorizontalScrollBarVisibility="Auto" 
             SelectionMode="Multiple" 
             ScrollViewer.VerticalScrollBarVisibility="Disabled"
             VerticalContentAlignment="Stretch"
             HorizontalContentAlignment="Stretch" >
        <ListBox.ItemContainerStyle>
            <Style TargetType="ListBoxItem">
                <Setter Property="VerticalContentAlignment" Value="Stretch"/>
                <Setter Property="Height" Value="Auto" />
            </Style>
        </ListBox.ItemContainerStyle>
        <ListBox.ItemsPanel>
            <ItemsPanelTemplate>
                <StackPanel Orientation="Horizontal"
                            VerticalAlignment="Top"
                            HorizontalAlignment="Center"
                            />
            </ItemsPanelTemplate>
        </ListBox.ItemsPanel>           
    </ListBox> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T13:56:47.513

WebBrowser 对于 CPU 和内存来说都是一个非常昂贵的控件。仅出于这个原因，为 ListBox 中的每个项目创建一个单独的 WebBrowser 实例似乎是个坏主意。我建议您使用 Html Agility Pack 来提取您想要的字段并将它们绑定到 TextBlocks 和其他控件中。您还可以更好地控制每个项目的显示。

[http://htmlagilitypack.codeplex.com/](http://htmlagilitypack.codeplex.com/)

# google-cloud-datastore - 存储使用量是否会随着类名长而增加？

> ID：10011933
> 
> 赞同：1
> 
> 时间：2012-04-04T13:17:54.237
> 
> 标签：google-cloud-datastore, objectify

我正在为一个带有通知表的应用程序创建一个服务器，该表将有很多记录（大约 1 亿条记录），但每条记录中只有两个小值。据我了解，Datastore Entity 的名称是 Entity 键的一部分，并且看起来键会随着更长的 Entity 名称而变长，所以我猜它不会散列到所有名称的相同长度？这是真的？长名称会增加存储空间吗？

如果是这样，我可以告诉 Objectify (3.x) 数据存储中的实体名称是什么，还是我需要重命名我的类？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T22:55:06.450

最初我写道，键使用的空间不计入您的配额，因为我在 Google I/O 视频之一中听到了类似的内容。经过广泛的谷歌搜索，我找不到任何可以证实这一点的[信息。](https://developers.google.com/appengine/kb/billing#indexes)所以我认为我们应该假设您的实体名称越长，您支付的费用就越多。

您可以在注释的属性中定义实体的名称

```
@Retention(RetentionPolicy.RUNTIME)
@Target({ElementType.TYPE})
public @interface Entity
{
    /**
     * Controls the actual kind name used in the datastore.
     */
    String name() default "";
} 
```

# oracle10g - 如何从 oracle 数据库中获取 24 小时格式的日期时间？

> ID：10011935
> 
> 赞同：29
> 
> 时间：2012-04-04T13:17:56.107
> 
> 标签：oracle10g

有没有其他方法可以从 oracle 数据库中以 24 小时格式获取日期时间字段？比如 ->“select getxsddate(col_name) from tab_name”将使您的日期时间格式为“2012-04-04T12:31:00”...我想知道是否还有其他方法，因为我对这种格式不满意。

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-04-04T13:21:33.377

```
select to_char(col_name, 'yyyy-mm-dd hh24:mi:ss') from tab_name 
```

[您可以在此处](http://docs.oracle.com/cd/B19306_01/server.102/b14200/functions180.htm#i1009324)阅读有关`to_char`功能的更多信息

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-10-21T17:32:55.557

另一个很简单的方法是在数据库nls参数中设置参数date_format='DD-MM-YYYY HH24:MI:SS'

# c# - 查找 BigInteger 的最高有效位

> ID：10011938
> 
> 赞同：1
> 
> 时间：2012-04-04T13:18:13.223
> 
> 标签：c#, biginteger

我已经阅读了许多用于识别 32 位和 64 位整数的最高有效位的精细算法（包括 SO 上的其他帖子）。但我使用的是 BigIntegers，并且将处理长达 4000 位的数字。（BigInteger 将把希尔伯特索引保存到希尔伯特空间填充曲线中，该曲线蜿蜒穿过分形深度为 4 的 1000 维超立方体。）但是大部分案例将涉及可以放入 64 位整数内的数字，所以我想要一个最适合常见情况但可以处理极端情况的解决方案。

天真的方法是：

```
BigInteger n = 234762348763498247634; 
int count = 0; 
while (n > 0) {
    n >>= 1;
    count++;
} 
```

我正在考虑将常见案例转换为 Longs 并在这些案例上使用 64 位算法，否则对非常大的数字使用不同的算法。但我不确定转换为 Long 的成本有多高，以及这是否会淹没在 64 位数量上进行剩余计算的效率。有什么想法吗？

此函数的一个预期用途是帮助优化逆格雷码计算。

更新。我编写了两种方法并运行了一个基准测试。

*   如果数字低于 Ulong.MaxValue，则转换为 Ulong 并执行二进制搜索方法的速度是使用 BigInteger.Log 的两倍。
*   如果这个数字非常大（我高达 10000 位），那么 Log 的速度会快 3.5 倍。

    对 MostSignificantBitUsingLog（可转换为 Long）的一百万次调用经过了 96 毫秒。

    100 万次调用 MostSignificantBitUsingBinarySearch（可转换为 Long）耗时 42 毫秒。

    对 MostSignificantBitUsingLog 的一万次调用经过了 74 毫秒（太大而无法转换）。

    对 MostSignificantBitUsingBinarySearch 的一万次调用经过了 267 毫秒（太大而无法转换）。

下面是使用 Log 的代码：

```
public static int MostSignificantBitUsingLog(BigInteger i)
{
    int bit;
    if (i == 0)
        bit = -1;
    else
        bit = (int)BigInteger.Log(i, 2.0);

    return bit;
} 
```

这是我的二进制搜索方法。可以改进将二进制除法扩展到 BigInteger 范围。接下来我会尝试的。

```
public static int MostSignificantBitUsingBinarySearch(BigInteger i)
{
    int bit;
    if (i.IsZero)
        bit = -1;
    else if (i < ulong.MaxValue)
    {
        ulong y = (ulong)i;
        ulong s;
        bit = 0;
        s = y >> 32;
        if (s != 0)
        {
            bit = 32;
            y = s;
        }
        s = y >> 16;
        if (s != 0)
        {
            bit += 16;
            y = s;
        }
        s = y >> 8;
        if (s != 0)
        {
            bit += 8;
            y = s;
        }
        s = y >> 4;
        if (s != 0)
        {
            bit += 4;
            y = s;
        }
        s = y >> 2;
        if (s != 0)
        {
            bit += 2;
            y = s;
        }
        s = y >> 1;
        if (s != 0)
            bit++;
    }
    else
        return 64 + MostSignificantBitUsingBinarySearch(i >> 64);

    return bit;
} 
```

更新 2：我更改了我的二进制搜索算法以针对 BigIntegers 最多一百万个二进制数字，而不是在 64 位块中递归地调用自身。好多了。现在运行我的测试需要 18 毫秒，比调用 Log 快四倍！（在下面的代码中，MSB 是我的 ulong 函数，它做同样的事情，循环展开。）

```
public static int MostSignificantBitUsingBinarySearch(BigInteger i)
{
    int bit;
    if (i.IsZero)
        bit = -1;
    else if (i < ulong.MaxValue)
        bit = MSB((ulong)i);
    else
    {
        bit = 0;
        int shift = 1 << 20; // Accommodate up to One million bits.
        BigInteger remainder;     
        while (shift > 0)
        {
            remainder = i >> shift;
            if (remainder != 0)
            {
                bit += shift;
                i = remainder;
            }
            shift >>= 1;
        }
    }
    return bit;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-04T13:24:20.223

您可以计算表示所需位数的 log2：

```
var numBits = (int)Math.Ceil(bigInt.Log(2)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-04T13:26:38.257

您可以将其视为二进制搜索问题。

您的上限为 4000（可能会增加一些空间）

```
int m = (lo + hi) / 2;
BigInteger x = BigInteger(1) << m;

if (x > n) ...
else  ... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-01-06T01:44:40.493

在 .Net 5 中，这[现在是内置的](https://docs.microsoft.com/en-us/dotnet/api/system.numerics.biginteger.getbitlength?view=net-5.0&viewFallbackFrom=netcore-3.1)......

```
int log2 = myBigInt.GetBitLength() 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-18T20:48:22.803

如果您可以使用 Java 而不是 C#，那么您可以在[http://uzaygezen.googlecode.com](http://uzaygezen.googlecode.com)找到一个用于任意精度希尔伯特曲线索引的库。对于格雷码逆的实现，您可能需要仔细查看上述项目中的 LongArrayBitVector.grayCodeInverse 或 BitSetBackedVector.grayCodeInverse。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-09-30T05:52:19.287

8 年后，为了找到 MSB 最高位（又名 Log2），我想出了这个快速方法......

```
static int GetTopBit(BigInteger value)
{
    if (value < 0)
        BigInteger.Negate(value);
    int lowerBytes = value.GetByteCount(true) - 1;
    int t = value.ToByteArray(true)[lowerBytes];
    int top = t > 127 ? 8 : t > 63 ? 7 : t > 31 ? 6 : t > 15 ? 5 : t > 7 ? 4 : t > 3 ? 3 : t > 1 ? 2 : 1;
    int topbit = (top + lowerBytes * 8);
    return topbit;
} 
```

# sitefinity - 将小部件模板映射到 SiteFinity 5 中的用户控件

> ID：10011942
> 
> 赞同：1
> 
> 时间：2012-04-04T13:18:22.070
> 
> 标签：sitefinity, sitefinity-5

（交叉张贴在[SiteFinity 的论坛](http://www.sitefinity.com/devnet/forums/sitefinity/developing-with-sitefinity/mapping-a-widget-template-to-a-user-control-in-sitefinity-5.aspx)中）

我正在使用 SiteFinity 5.0。我使用名为 Promos 的模块构建器创建了一个自定义模块。它的内容类型称为促销。

接下来，我创建了一个名为 PromoFlexSpace 的新小部件模板。我基本上复制了单个促销显示的自动生成模板并对其进行了一些更改。

我想做的是将此小部件模板全局映射到用户控件，以便在选择该模板时，它实际上使用我的用户控件。我找到了如何为单个项目执行此操作： http: [//www.sitefinity.com/documentation/documentationarticles/designer-s-guide/widget-templates/using-external-widget-template-file](http://www.sitefinity.com/documentation/documentationarticles/designer-s-guide/widget-templates/using-external-widget-template-file) [http:// www.sitefinity.com/blogs/joshmorales/posts/11-05-10/mapping_external_templates_for_sitefinity_4_widgets.aspx](http://www.sitefinity.com/blogs/joshmorales/posts/11-05-10/mapping_external_templates_for_sitefinity_4_widgets.aspx)

我发现了一些几乎可以解释我在全球范围内尝试做的事情： [http ://www.sitefinity.com/blogs/joshmorales/posts/11-07-26/customizing_sitefinity_4_controls_with_the_viewmap.aspx](http://www.sitefinity.com/blogs/joshmorales/posts/11-07-26/customizing_sitefinity_4_controls_with_the_viewmap.aspx)

但是我还没有找到一种方法来完成我正在尝试做的事情（如果最后一个链接确实解释了它，我很抱歉 - 如果确实如此，我需要一个更好的细分）。

到目前为止，我尝试进入高级设置 > 控件 > 查看地图并在那里添加一个条目，但我找不到有效的 HostType 值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T21:11:25.513

如果您转到管理 > 设置 > 高级 > 工具箱 > ... > [您的小部件控件]，则有一个“布局模板”设置，您可以在其中输入 .ascx 文件的路径。

# jquery - 如果 Jquery .is(":hover") 在 IE8 中不起作用

> ID：10011953
> 
> 赞同：1
> 
> 时间：2012-04-04T13:19:06.810
> 
> 标签：jquery, internet-explorer, internet-explorer-8

我有这段代码在 IE8 中不起作用：

```
$("#intro-screenshot").hover(
   function(){
      $(".img-action").show();
   },
   function(){
      if(!$(".img-action").is(":hover")) {
         $(".img-action").hide();
      }
   }
); 
```

它打破了这一行：`if(!$(".img-action").is(":hover"))`

HTML：

```
<a href="#">
   <img src="#" alt="" id="intro-screenshot" />
   <span class="img-action" style="top:90px; left:115px;">
   See Features
   </span>
</a> 
```

我不认为这是一个已知的 Jquery 问题，但我可能错了..

[JSFIDDLE](http://jsfiddle.net/QeLSJ/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T13:54:18.540

你可以只使用CSS。它可以处理您要解决的确切问题，而且也更优雅。

```
#inner {
    display: none;
}

#outer:hover #inner {
    display: block;
} 
```

jsfiddle：http: [//jsfiddle.net/7xMpr/](http://jsfiddle.net/7xMpr/)

**编辑：**

还有一个 jsFiddle 使用你的代码[http://jsfiddle.net/QeLSJ/1/](http://jsfiddle.net/QeLSJ/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T13:40:43.433

如果你试试这个怎么办：

```
$("#intro-screenshot").hover(
   function(){
      $(".img-action").show();
   },
   function(){
       if($(".img-action:hover").length == 0) {
         $(".img-action").hide();
      }
   }
); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T06:05:12.523

```
try{
    jQuery('body').live('click', function(){
    var booleans=0; 
    try{
        booleans=jQuery("#loginForm:hover").length;
        //booleans=jQuery('#loginForm').is(':hover');
    }catch(e){}
    if(booleans==0){
        document.getElementById("d1").style.display = 'none';
    }
  });       
}catch(e){} 
```

# c# - 在非托管 C++ 代码中使用 C# 属性

> ID：10011956
> 
> 赞同：5
> 
> 时间：2012-04-04T13:19:19.533
> 
> 标签：c#, c++, word-wrap

我们有一个主要用 C# 编写的大型项目（服务、多线程等）。但是，核心数字运算算法是用非托管 C++ 编写的，速度很快（OpenMP 等）。

不幸的是，目前我们必须做很多努力才能在这两个世界之间交换数据。即，我们必须在 C++/CLI 中为每个 C++ 类编写包装类。对于 C#-“世界”中的（实际上）任何必需的设置（属性），在 C++ 世界（头文件）中都有一个副本，并且在包装类中来回显式转换。这种架构看起来效率很低，而且很容易出错。

主要问题：有没有办法在非托管 C++ 中以某种方式自动共享具有属性的 C# 类？（我们必须阅读和写作！）

第二个问题：您能否就如何在上述案例中改进架构提供任何建议。我们的一个考虑是完全切换到 C++，但必须为我们目前在 .NET 中所做的所有（系统）事情找到合适的库并编写干净的代码感觉并不好。

非常感谢您的帮助和问候，雅各布

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T21:59:24.743

我在工作中处理类似的问题，我的主要任务是为某些高性能、低延迟 dll 编写托管接口，这涉及一些简单的情况，我必须使用包含指向原始指针的简单 c++/cli 包装本机类本机类或更复杂的问题，其中本机代码是服务器端发布者并且托管代码必须使用委托订阅它，即它们必须转换为本机回调。据我所知，.NET 是一个复杂的 COM 服务器。可以编写 ComVisible 属性设置为 true 的 .net 程序集，然后它充当经典 COM 组件，然后可以从本机 C++ 代码中将其用作 COM 组件。[http://msdn.microsoft.com/en-us/library/system.runtime.interopservices.structlayoutattribute.aspx](http://msdn.microsoft.com/en-us/library/system.runtime.interopservices.structlayoutattribute.aspx)）和 MarshalAsAttribute（[http://msdn.microsoft.com/en-us/library/system.runtime。 interopservices.marshalasattribute.aspx](http://msdn.microsoft.com/en-us/library/system.runtime.interopservices.marshalasattribute.aspx)）我有时也会使用 unsafe 关键字。我必须处理高性能代码，所以在某些情况下，在分析之后我知道哪个是最好的解决方案。无论是您提到的 warpper 类解决方案还是经典的 COM 方式，或者是某种具有缓存、对象池等的混合方式。

希望有帮助。:)

抱歉，如果这看起来有点杂乱无章。这里已经很晚了。:)

# xml - 无法编辑主窗口 jEdit

> ID：10011964
> 
> 赞同：0
> 
> 时间：2012-04-04T13:19:33.223
> 
> 标签：xml, edit, jedit

我无法再在 OS X 10 上编辑 jEdit 4.5.1 的主窗口。java 1.6.0_29

我正在编辑的最后一个文件出现了，但我无法单击它。我正在使用 XML 插件。

我已经尝试卸载并重新安装并重新启动，但没有结果。

我也尝试找到设置删除这些设置并重新安装，但我不是 mac 专家，不知道如何找到 ~/.jedit

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T03:46:58.153

`~/.jedit`可能在您的 Unix 主目录中。（对不起，没有mac）。

*   [在 OS X 中打开终端。](http://macapper.com/2007/03/08/the-terminal-an-introduction/)
*   输入命令：`cd ~/`
*   移动`~/.jedit`文件夹`mv ~/.jedit ~/.jedit.bak`

如果命令失败，则使用以下命令在整个计算机上`mv`搜索该文件夹：`.jedit`

```
find / -type d -name .jedit 
```

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T08:15:59.847

Apple 的最新更新似乎可以解决问题，问题解决了。

# jquery - 如何在jquery的IOS safari中使用手势事件找到捏合或捏合？

> ID：10011966
> 
> 赞同：0
> 
> 时间：2012-04-04T13:19:40.080
> 
> 标签：jquery, jquery-plugins

我想为 IPAD 实现 Pinch In 和 Out 功能。我一直在使用[http://developer.apple.com/library/IOs/#documentation/AppleApplications/Reference/SafariWebContent/HandlingEvents/HandlingEvents.html](http://developer.apple.com/library/IOs/#documentation/AppleApplications/Reference/SafariWebContent/HandlingEvents/HandlingEvents.html)上列出的这些事件。

```
$('div.mainContainer').live("gesturestart", function(e){
   alert("start " + e.originalEvent.scale);
});
$('div.mainContainer').live("gesturechange", function(e){
   alert("change " + e.originalEvent.scale);
   e.preventDefault();
}); 
```

上面的代码有效，但无法弄清楚捏入/捏出。

PS我已经尝试过[jGestures](http://jgestures.codeplex.com/)，但它根本不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T07:11:54.467

这似乎是重复的

[用于移动捏合/缩放操作的 javascript 事件](https://stackoverflow.com/questions/8509799/javascript-event-for-a-mobile-pinch-zoom-action)

也看看

[http://chillburn.com.au/blog/enabling-the-pinch-zoom-for-the-ipad-iphone-while-using-jquery-mobile/](http://chillburn.com.au/blog/enabling-the-pinch-zoom-for-the-ipad-iphone-while-using-jquery-mobile/)

和

[http://developer.apple.com/library/ios/#DOCUMENTATION/AppleApplications/Reference/SafariWebContent/HandlingEvents/HandlingEvents.html#//apple_ref/doc/uid/TP40006511-SW8](http://developer.apple.com/library/ios/#DOCUMENTATION/AppleApplications/Reference/SafariWebContent/HandlingEvents/HandlingEvents.html#//apple_ref/doc/uid/TP40006511-SW8)

# php - PHP foreach() 正在修改数组

> ID：10011969
> 
> 赞同：2
> 
> 时间：2012-04-04T13:19:49.760
> 
> 标签：php, arrays, foreach

以下显示数组中的值的代码在包装在 foreach() 中时呈现不同的结果，而不是在我使用简单的 for 循环时。for 循环提供了正确的数据，但 foreach() 似乎在每次迭代时都在修改输入数组。

```
$arr = array_merge($arr1, $arr2);

for ($x = 0; $x < count($arr); $x++) {
    echo $arr[90]['circread_value'];
}

foreach ($arr as $unused) {
    echo $arr[90]['circread_value'];
} 
```

for 循环的输出一遍又一遍地是相同的值（如预期的那样）：

```
1382429.00
1382429.00
1382429.00
1382429.00
... 
```

foreach() 的输出显示数组中的第 91 个元素随着每次迭代而变化：

```
56256.00
45652.00
50726.00
317896.00
... 
```

怎么会这样？

注意：我知道上面的代码是人为的（显然在 foreach() 中我实际上想要做进一步的处理并引用我正在迭代的数组的每个元素，而不仅仅是查看第 91 个元素。）我已经简单地将代码缩减为一些简单的东西（作为我调试的一部分，就像在这里发布一样！）

一些进一步的信息：

*   $arr 已通过 array_merge 将两个 91 元素数组创建为一个 182 元素数组。
*   我看到的行为只发生在第 91 个元素上——如果我回显 $arr[89]['circread_value'] 或 $arr[91]['circread_value']，我也会从 foreach() 中获得一致的值。
*   我在 foreach() 中看到的（看似随机的）值实际上是来自数组中其他元素的值（数组在开始 foreach 之前的样子）

输入数组（$arr1 和 $arr2）可以在这里找到：http: [//pastebin.com/wQN8XXu2](http://pastebin.com/wQN8XXu2)

感谢您的任何见解。不要犹豫，询问更多信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T16:45:51.317

发现问题。数组的第 91 个元素实际上是对数组的*引用*。然后 foreach 使用相同的变量名称（引用相同的数组 - 在我在问题中给出的示例片段中命名为 $unused ），因此两者都在查看相同的数组。

在这里为你们发布后，我们注意到数组转储中的“&”，因此 StackOverflow 帮助了我们的调试过程......感谢大家的投入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T13:29:19.770

foreach 修改内部数组指针，for 不会，因为它希望您提供整数偏移量，如此处[所示 http://us3.php.net/manual/en/control-structures.foreach.php](http://us3.php.net/manual/en/control-structures.foreach.php)

“由于 foreach 依赖于内部数组指针，在循环内更改它可能会导致意外行为。”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T13:29:42.343

你的代码兄弟有问题。

我刚刚[测试过这个](http://codepad.org/vAPW75mq)：

```
$arr = array(
    0 => array('blah' => 123.42),
    1 => array('blah' => 5488.87),
    90 => array('blah' => 669874.923)
);

for ($x = 0; $x < count($arr); $x++) {
    echo $arr[90]['blah'] . PHP_EOL;
}

foreach ($arr as $unused) {
    echo $arr[90]['blah'] . PHP_EOL;
} 
```

它输出良好：

```
669874.923
669874.923
669874.923
669874.923
669874.923
669874.923 
```

您介意向我们展示更多您的代码吗？

# ruby-on-rails - simple_form 错误地呈现单选按钮

> ID：10011970
> 
> 赞同：1
> 
> 时间：2012-04-04T13:19:51.443
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rendering, simple-form

使用 simple_form 我呈现一些单选按钮以在注册页面上选择 Gender。

代码：

```
 = f.input :gender,
              :collection => gender,
              :as => :radio_buttons,
              :item_wrapper_class => 'inline' 
```

这给出了如下输出：

![在此处输入图像描述](../Images/0a8b8fb2250e19eaf6d967173771f732.png)

有没有办法让第一个单选按钮在男性后面，第二个单选按钮在女性后面？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-06T02:11:10.647

这是比我下面的原始解决方案更好的解决方案。

从代码：

```
#   form_for @user do |f|
#     f.collection_radio_buttons(
#       :options, [[true, 'Yes'] ,[false, 'No']], :first, :last
#     ) do |b|
#       b.label { b.radio_button + b.text }
#     end
#   end 
```

我认为这就是你要找的：

```
<%= f.collection_radio_buttons(
    :gender, [['Male', 'Male'], ['Male', 'Male']], :first, :last
  ) do |b|
    b.label { b.text + b.radio_button }
  end
%> 
```

你甚至可以`image_tag`在其中添加其他助手：

```
<%= f.collection_radio_buttons(
    :gender, [['Male', 'Male'], ['Male', 'Male']], :first, :last
  ) do |b|
    b.label { image_tag("#{b.text}.png") + b.radio_button }
  end
%> 
```

此解决方案不是普通的自定义组件。此自定义组件继承自 CollectRadioButtonsInput，而不是普通的 CollectionInput 类。我修改了2个相关方法。

里面`app/inputs/radio_buttons_left_label_input.rb`

```
class RadioButtonsLeftLabelInput < SimpleForm::Inputs::CollectionRadioButtonsInput
  def input
    label_method, value_method = detect_collection_methods

    @builder.send("collection_radio_buttons",
      attribute_name, collection, value_method, label_method,
      input_options, input_html_options, &collection_block_for_nested_boolean_style
    )
  end

  protected

  def build_nested_boolean_style_item_tag(collection_builder)
    collection_builder.text.html_safe + collection_builder.radio_button.html_safe
  end
end 
```

可以这样使用

```
<%= form.input :gender,
  :as => :radio_buttons_left_label,
  :collection => %w[Female Male]
%> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T20:10:27.220

不确定确切的东西，但是有一种叫做 order 的东西可以分配首先显示哪个标签，例如 [:label, :input] 和内联可能在这里有所帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-04T18:34:57.807

您是否尝试过按您想要的顺序简单地创建或排序集合？

有人这样想：

```
= f.input :gender,
    :collection => gender.reverse,
    :as => :radio_buttons,
    :item_wrapper_class => 'inline' 
```

显然，这不是更好的解决方案。您应该以正确的顺序创建列表。

# javascript - 在javascript中为innerHTML添加一个复选框

> ID：10011975
> 
> 赞同：0
> 
> 时间：2012-04-04T13:20:03.687
> 
> 标签：javascript, checkbox, innerhtml

我有一个包含 10 个项目（格式化列表）的页面。在此页面中，我需要为每个项目添加复选框并将该项目作为值添加到每个复选框。当用户单击复选框时选择的值应该传递到一个新页面。任何人都可以帮助我如何在java脚本中为innerHTML添加一个复选框。

代码：

```
 var newsletter=document.getElementById("block-system-main");
    var districolumn=getElementsByClassName('view-id-_create_a_news_letter_',newsletter,'div'); 
  if(districolumn!=null)
 {
  var newsletterall=newsletter.getElementsByTagName('li');
 alert(newsletterall[0].innerHTML);
 var all=newsletter.innerHTML;
newsletter.innerHTML="<input type='button' onclick='changeText()' value='Change Text'/>";
}
    function changeText()
    {
       alert("dfgsdg");
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-16T17:06:47.777

我不完全了解您的代码的每个部分在做什么，但我会尝试给出一个一般性的答案：

在您的 HTML 中，执行以下操作：

```
<form id="myForm" action="nextPage.com">
    <div id="Boxes"></div>
</form> 
```

将上述名称更改为您希望写入复选框的任何位置。

你的功能：

```
function changeText()
{
    for(var i=0 ; i < newsletterall.length ; i++)
    {
        var inner = document.getElementById("Boxes").innerHTML;
        var newBox = ('<input type="checkbox" name="item[]" value="' + newsletter[i] + '>' + newsletterall[i]);
        document.getElementById("Boxes").innerHTML = inner + newBox;
    }
document.getElementById("myForm").submit();
} 
```

最后一行代码自动提交复选框。如果您不想这样，请删除该行，然后在表单中添加一个提交按钮`myForm`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T14:03:52.157

​</p>

```
$('ul​​​#list li').each(
    function() {
        var me = $(this),
            val = me.html(),
            ckb = $('<input type="checkbox" />');

        ckb.click(function() {
            var where=val;
            window.location.href='http://google.com/?'+where; 
        });

        me.html('');
        me.append(ckb).append($('<span>'+val+'</span>'));
    }
);​​​​ 
```

# jquery - jQuery重置表单值+无效错误

> ID：10011983
> 
> 赞同：1
> 
> 时间：2012-04-04T13:20:51.007
> 
> 标签：jquery, reset

我的 jquery 验证脚本中有这段代码：

```
resetForm: function() {
        if ( $.fn.resetForm )
            $( this.currentForm ).resetForm();
        this.submitted = {};
        this.prepareForm();
        this.hideErrors();
        this.elements().removeClass( this.settings.errorClass );
    } 
```

这正是我需要的，因此我想使用它。我试图通过点击绑定它，但没有成功。我只需要一个调用此函数的按钮/链接。你能给我建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T14:23:07.593

如果你尝试这个，它应该可以工作（假设你有一个 id 为 myButton 的按钮和一个名为 myForm 的表单）：

```
$("#myButton").click(function () {
    var validator = $("#myform").validate();
    validator.resetForm();
}); 
```

# javascript - 如何定位 Internet Explorer 脚本错误？

> ID：10011984
> 
> 赞同：2
> 
> 时间：2012-04-04T13:20:53.890
> 
> 标签：javascript, css, internet-explorer, ietester

我正在完成我的网站。注意到我在 IE7 和 IE8 中有一些脚本问题。使用~~IETester（有什么更好的替代方法吗？）~~ IE9 的调试工具，我可以测试我的网站是否有不同的 IE 版本。

更新示例：

![在此处输入图像描述](../Images/a75696a1c0935b1df67063bc26cc5593.png)

我使用 JQuery 和一些第 3 方 htc 文件进行 IE css hack。“第 87 行”只是一个 html 行，所以这不是发生错误的地方。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T13:23:31.180

IE 开发人员工具（内置于 IE8+）有一个 JS 调试器，它会在错误时中断。

点击`F12`打开它，选择脚本选项卡，然后单击开始调试按钮。

# javascript - 从 javascript 中捕获 window.open

> ID：10011986
> 
> 赞同：2
> 
> 时间：2012-04-04T13:21:05.390
> 
> 标签：javascript, html, iframe

我有一个网页变成了一个html iframe，网页有一个javascript函数来打开链接，那个函数使用window.open方法打开一个新窗口。

我无法修改 javascript 函数（页面是用 mapguide 制作的），所以我想在 iframe 之外捕获该调用，以将新窗口的内容放入 ajax 模态框架中，而不是打开一个新窗口，这可能吗?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T13:38:25.537

虽然我一般不建议这样做，但您可以覆盖`window.open`iframe 中函数的定义，假设您的页面和 iframe 在同一个域中，以避免 XSS 安全错误。

HTML：

```
<iframe id="myFrame" src="...">
</iframe> 
```

父窗口中的javascript：

```
var frame = document.getElementById('myFrame');

if (frame) {
    frame.contentWindow.open = function (url, windowName, windowFeatures) {
        // do whatever you want here (e.g. open an ajax modal frame)
    };
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T13:37:52.100

我假设“地图指南”内容来自与包含 iframe 的页面不同的域。

如果是这种情况，您需要“代理”“地图指南”内容——即：您的 iframe 将需要从您的服务器上的另一个脚本 URL（我将假设为 PHP）加载地图指南内容，其代码将从它真正来自的任何地方获取“地图指南”软件。这部分很简单，服务器端代码可能如下所示：

```
<? 
    $content = file_get_contents('http://mapguide.domain/path/to/contents');

    // alter content here

    print $content;
?> 
```

iframe`src`属性应指向服务器上包含该代码的 PHP 文件（而不是“地图指南”服务器）。

如果“地图指南”内容包含 HTML 链接、加载 CSS/JavaScript 文件或进行 AJAX 调用，那么您需要让服务器端代码重写这些 URL 以引用您的服务器。这部分不是很容易，实际上取决于“地图指南”JavaScript 的复杂程度。

因此，在上面的评论之后`alter content here`，您需要对包含在`$content`其中的 HTML 进行一些糟糕的正则表达式替换（或解析和重新生成），目的是更改每个 URL 以通过您的“代理”PHP 脚本和从“地图指南”服务器上的适当位置加载。

如果您设法取消所有这些，那么您的 iframe 将是与包含 HTML 页面相同域的服务器，因此外部页面的 JavaScript 将能够替换`window.open`iframe 的功能 - 以防止弹出，或者做不管你想要什么——正如@jbabey 在另一个答案中所说。

所有这些都假定“地图指南”内容不附带禁止“抓取”（自动复制）他们（“地图指南”内容的作者）内容的用户协议和/或版权政策。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-13T16:31:58.880

这是我一直在研究的类似片段......正确设置 contentWindow 很棘手，但也许这提供了一些见解？

```
//get a reference to the iframe DOM node
var node_iframe = document.getElementById("myiframe");

//get a reference to the iframe's window object
var win_iframe = node_iframe.contentWindow;

//override the iframe window's open method
win_iframe.open = function(strUrl,strName,strParams){

    /* create an object (to substitute for the window object) */
    var objWin = new Object;

    /* save the open arguments in case we need them somewhere */
    objWin.strUrl = strUrl;   
    objWin.strName = strName; 
    objWin.strParams = strParams; 

    /* create a blank HTML document object, so any HTML fragments that 
     * would otherwise be written to the popup, can be written to it instead */
    objWin.document = document.implementation.createHTMLDocument(); 

    /* save the object (and document) back in the parent window, so we 
     * can do stuff with it (this has an after-change event listener that 
     * pops a YUI Panel to act as a kind of popup) -- NOTE: the object in 
     * the parent window that we're saving this to has YUI Attribute installed
     * and listens to changes to the objPopupWindow attribute... when it 
     * gets changed by this .set() operation, it shows a YUI Panel. */
    parent.MyCustomClassObjectWithYUIAttributes.set('objPopupWindow', objWin); 

    /* return the object and all its members to whatever was trying to 
     * create a popup window */
    return objWin; 
    };//end override method definition 
```

# vb.net - InvalidCastException 未处理？

> ID：10011987
> 
> 赞同：3
> 
> 时间：2012-04-04T13:21:05.560
> 
> 标签：vb.net, exception, casting

```
 Dim CustID As String = txtSrchCustID.Text
    Dim FirstName As String = txtNewCustFName.Text
    Dim SecondName As String = txtNewCustSName.Text

    If CustID And FirstName And SecondName = "" Then
        MsgBox("Please enter a term to search by")
    EndIf 
```

这将返回“从字符串“转换为类型 'Long' 无效。” 我想知道错误是什么以及如何修复它？我看过的其他问题主要与分配不正确类型的变量有关，但我认为这不是问题。它发生在所有变量为空时。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T13:28:58.177

你想让我做什么。你想检查**所有**的都是`""`. 然后这样做：

```
If string.isNullOrEmpty(CustID) and _  
    string.isNullOrEmpty(FirstName) And string.isNullOrEmpty(SecondName) Then
        MsgBox("Please enter a term to search by")
    End If 
```

或者您是否要检查**其中之一**是否为`""`. 然后这样做：

```
If string.isNullOrEmpty(CustID) orelse _  
    string.isNullOrEmpty(FirstName) orelse string.isNullOrEmpty(SecondName) Then
        MsgBox("Please enter a term to search by")
    End If 
```

# java - android图像上传到快速基础数据库

> ID：10011988
> 
> 赞同：0
> 
> 时间：2012-04-04T13:21:07.637
> 
> 标签：java, android

我正在开发一个android应用程序来根据快速基础API将图像上传到快速基础数据库（https://www.quickbase.com），图像应该以base64格式上传，并且它应该通过xml格式的发布请求发送并且没有允许的 MIME 标头和类型 (http://www.quickbase.com/api-guide/whnjs.htm)。每个文本数据都进入数据库但图像没有上传到服务器，这是我的代码，任何人都可以帮我吗？

```
String tempXml = "<?xml version='1.0' ?><qdbapi><udata>mydata</udata>"
+ "<ticket>6_bg4at2ksw_bzazsh_b_cmti6qddhsrvgqds7cqmgbt32t6wcdkcse2c8j8ypyb</ticket>"
+ "<apptoken>cwfcy7gdzqrsyncqbi2bn4u4kr</apptoken>"
+ "<field fid='6'>sample data</field><field fid='7'>sample data</field>"
+ "<field fid='8'>sample data</field><field fid='9'>sample data</field>"
+ "<field fid='10'>sample data</field><field fid='12'>sample data</field>"
+ "<field name='message' filename='testImage.jpg'>"
+ testImageName + "</field></qdbapi>";

DefaultHttpClient httpclient = new DefaultHttpClient();
String strURL = "https://www.quickbase.com/db/bgtc5pacu?act=API_AddRecord";
HttpPost httpPost = new HttpPost(strURL);
httpPost.addHeader("Content-Type", "application/xml");
StringBuilder sb = new StringBuilder();
sb.append(tempXml);
StringEntity entity = new StringEntity(sb.toString(), "UTF-8");
httpPost.setEntity(entity);
HttpResponse res = httpclient.execute(httpPost); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T13:29:19.783

使用 base64 类从图像的字节数组中获取 base64 字符串。

[base64.java](http://svn.l2jserver.com/branches/L2_GameServer_T2.5/java/com/l2jserver/Base64.java)

方法名：encodeBytes(byte[] source)

# php - 引号不在数组的正确位置

> ID：10011997
> 
> 赞同：0
> 
> 时间：2012-04-04T13:21:31.523
> 
> 标签：php, header

我不断收到此错误，我尝试在实际数组、句点周围加上引号，但没有任何效果。

解析错误：语法错误，意外的 T_ENCAPSED_AND_WHITESPACE，在第 8 行需要 T_STRING 或 T_VARIABLE 或 T_NUM_STRING

```
$id = $_GET['id'];
$record = "SELECT `Name`, `Type`, `Size`, `Content` FROM election_candidates WHERE `ID` = '$id'";
$result = $db->query($record);

foreach ($result as $results) {
    header("Content-length: $results['Size']");  <---Line 8
    header("Content-type: $results['Type']");
    header("Content-Disposition: attachment; filename=$results['Name']");

    // echo $results['Size'];

    echo $results['Content'];
}

exit(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T13:23:33.843

尝试[复杂（卷曲）语法](http://www.php.net/manual/en/language.types.string.php#language.types.string.parsing.complex)、[简单语法](http://www.php.net/manual/en/language.types.string.php#language.types.string.parsing.simple)或[连接运算符](http://php.net/manual/en/language.operators.string.php)：

```
// Added isset() and intval()
$id = isset($_GET['id']) ? intval($_GET['id']) : 0;
// Removed quotes from 'id'=...
$record = "SELECT `Name`, `Type`, `Size`, `Content` FROM election_candidates WHERE `ID` = $id";
$result = $db->query($record);

foreach ($result as $results) {
    // complex (curly) syntax
    header("Content-length: {$results['Size']}");
    // simple syntax (without quotes)
    header("Content-type: $results[Type]");
    // using concatenation operator
    header('Content-Disposition: attachment; filename='.$results['Name']);

    // echo $results['Size'];

    echo $results['Content'];
}

exit(); 
```

此外，您应该转义`$_GET['id']`，并且在 MySQL 中您不需要为整数加上引号。我已经在上面的代码中纠正了这两个“问题”。

您还可以添加`LIMIT 1`到 SQL 查询并删除`foreach`循环；）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T13:36:09.470

由于键是文字字符串，您可以删除内部引号：

```
header("Content-length: $results[Size]"); 
```

[请参阅简单语法](http://www.php.net/manual/en/language.types.string.php#language.types.string.parsing.simple)部分中的示例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T13:23:54.893

代替

```
header("Content-length: $results['Size']"); 
```

你必须写

```
header("Content-length: ".$results['Size']); 
```

或者

```
header("Content-length: {$results['Size']}"); 
```

你必须在第 9 行和第 10 行做同样的事情

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-04T13:24:12.033

您不能在插值字符串中使用数组下标。你有两个选择：

```
'Content-Length: ' . $results['Size']
"Content-Length: {$results['Size']}" 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-04T13:24:39.307

由于您将数组访问器嵌套在字符串中，因此我认为您需要以下语法：

```
"Content-length: {$results['Size']}" 
```