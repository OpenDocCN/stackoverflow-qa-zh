# StackOverflow 问答 11031000-11031999

# tfs - TFS 将值从一个字段“复制”到另一个字段

> ID：11031007
> 
> 赞同：7
> 
> 时间：2012-06-14T10:15:00.733
> 
> 标签：tfs, workitem

我需要从 PlainText -> String 更改工作项字段。由于我无法更改工作项的类型，因此创建一个新字段并从另一个字段更新它的值是我的方法。

我已经尝试过 TFS/Web 中的“批量编辑选定的工作项..”，但我不确定您是否可以引用该模板中的另一个字段值。

如何设置 [Work Item].[FieldNew].Value = [Work Item].[FieldOriginal].Value ？

这甚至可能无需使用 TFD API 吗？

![在此处输入图像描述](../Images/b6e992a742b3c3a928137b5350098430.png)

我需要将项目字段类型从 PlainText 更改为 String 的原因是我想使用列运算符进行查询以测试该字段是否具有值。

对于纯文本字段，唯一允许的运算符是包含/不包含。我可以覆盖它以允许 ">" 吗？ ![在此处输入图像描述](../Images/ab6ecf3386be0ccf6070e2f82304b89c.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-12-03T22:52:44.253

KMoraz 的解决方案对我也不起作用，因为 HTML 字段在导出到 Excel 时变为只读。因此，我使用 Powershell 脚本将一个字段的值复制到另一个字段中（只需将“$wiFieldNewValue”变量替换为您要复制的源字段）

代码参考：[使用 Powershell 批量更新 TFS 工作项](http://realalm.com/2015/04/08/bulk-update-tfs-work-items-using-powershell/)

[链接到代码](https://github.com/KeesV/RealALMScripts/blob/master/TFS/TfsBulkUpdateWi.ps1)

嵌入代码：

```
#This script sets a specific field to a specified value for all work items in a specific project

Function LoadTfsAssemblies() {
Add-Type –AssemblyName "Microsoft.TeamFoundation.Client, Version=12.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a"
Add-Type -AssemblyName "Microsoft.TeamFoundation.WorkItemTracking.Client, Version=12.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a"

}

##### SETTINGS
#The TFS Team Project Collection to connect to
$tfsUri = "http://tfsserver:8080/tfs/DefaultCollection"

#The TFS Team Project from which to select the work items
$tfsProject = "Test Project"

#The work item type of the work items to update
$wiType = "Test Case"

#The reference name of the field to update
$wiFieldRefName = "Microsoft.VSTS.Common.Priority"

#The value to set the field to
$wiFieldNewValue = "1"
##### END SETTINGS

LoadTfsAssemblies
$tfs = [Microsoft.TeamFoundation.Client.TfsTeamProjectCollectionFactory]::GetTeamProjectCollection($tfsUri)
$tfs.EnsureAuthenticated()
if($tfs.HasAuthenticated)
{
Write-Output "Successfully authenticated to TFS server [$tfsUri]"
$workItemStore = $tfs.GetService([Microsoft.TeamFoundation.WorkItemTracking.Client.WorkItemStore])
$query = "SELECT [System.Id], [System.Title] FROM WorkItems WHERE [System.TeamProject] = '{0}' AND [System.WorkItemType] = '{1}'" -f $tfsProject, $wiType
Write-Output("Using query [$query]")

$workItems = $workItemStore.Query($query)
Write-Output("Going to update [{0}] work items" -f $workItems.Count)
$successCount = 0
$failureCount = 0
ForEach($wi in $workItems) {
Write-Output("Updating work item [{0}]" -f $wi.Title)

try {
$wi.Open()
$wi.Fields[$wiFieldRefName].Value = $wiFieldNewValue
Write-Output("Set field [{0}] to [{1}]" -f $wiFieldRefName, $wiFieldNewValue)
$validationMessages = $wi.Validate()

if($wi.IsValid() -eq $true)
{
$wi.Save()
Write-Output("Successfully updated work item [{0}]" -f $wi.Title)
$successCount++
} else {
Write-Error("Work item is not valid!")
ForEach($validationMessage in $validationMessages)
{
Write-Error("Error: {0}" -f $validationMessage)
}
$failureCount++
}
} catch {
Write-Error("Couldn't set field [{0}] to [{1}] for work item [{2}]" -f $wiFieldRefName,$wiFieldNewValue,$wi.Title)
Write-Error $_
$failureCount++
}
}

Write-Output("Finished!")
Write-Output("Successfully updated: {0}" -f $successCount)
Write-Output("Failed to update: {0}" -f $failureCount)

} else {
Write-Error("Couldn't authenticate to TFS server [$tfsUri]")
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-14T11:25:46.547

我不可能通过 Excel。

1.  创建一个新旧字段列都可见的查询。
2.  将查询导出到 Excel。
3.  将旧字段列中的数据复制并粘贴到新字段。
4.  在 Excel 中，从团队菜单中单击发布以更新 TFS 中的更改。

# node.js - 通过 NPM 安装 CoffeeScript 时出现连接错误

> ID：11031008
> 
> 赞同：1
> 
> 时间：2012-06-14T10:15:18.237
> 
> 标签：node.js, coffeescript, npm

尝试在 Websense 代理后面的 PC 上的 Windows XP (SP3) 机器上安装 CoffeeScript，在 Node.js（版本 0.6.19）上使用 npm（版本 1.1.24）。

我使用以下命令安装

```
npm install -g coffee-script 
```

我收到以下错误日志

```
info it worked if it ends with ok
verbose cli [ 'C:\\Program Files\\nodejs\\\\node.exe',
verbose cli   'C:\\Program Files\\nodejs\\node_modules\\npm\\bin\\npm-cli.js',
verbose cli   'install',
verbose cli   '-g',
verbose cli   'coffee-script' ]
info using npm@1.1.24
info using node@v0.6.19
verbose C:\Program Files\nodejs\\node.exe node symlink
verbose config file C:\Documents and Settings\peter.campbell\.npmrc
verbose config file C:\Program Files\nodejs\etc\npmrc
verbose config file C:\Program Files\nodejs\node_modules\npm\npmrc
verbose cache add [ 'coffee-script', null ]
silly cache add: name, spec, args [ undefined, 'coffee-script', [ 'coffee-script', null ] ]
verbose parsed url { pathname: 'coffee-script',
verbose parsed url   path: 'coffee-script',
verbose parsed url   href: 'coffee-script' }
verbose addNamed [ 'coffee-script', '' ]
verbose addNamed [ null, '' ]
silly name, range, hasData [ 'coffee-script', '', false ]
verbose raw, before any munging coffee-script
verbose url resolving [ 'https://registry.npmjs.org/', './coffee-script' ]
verbose url resolved https://registry.npmjs.org/coffee-script
http GET https://registry.npmjs.org/coffee-script
ERR! Error: connect ENETUNREACH
ERR!     at errnoException (net.js:670:11)
ERR!     at Object.afterConnect [as oncomplete] (net.js:661:19)
ERR! You may report this log at:
ERR!     <http://github.com/isaacs/npm/issues>
ERR! or email it to:
ERR!     <npm-@googlegroups.com>
ERR! 
ERR! System Windows_NT 5.1.2600
ERR! command "C:\\Program Files\\nodejs\\\\node.exe" "C:\\Program Files\\nodejs\\node_modules\\npm\\bin\\npm-cli.js" "install" "-g" "coffee-script"
ERR! cwd Y:\
ERR! node -v v0.6.19
ERR! npm -v 1.1.24
ERR! syscall connect
ERR! code ENETUNREACH
ERR! message connect ENETUNREACH
ERR! errno {}
verbose exit [ 1, true ] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T12:36:17.387

看起来工作场所代理阻止了安装。我现在已经成功地使用 npm 在 2 台没有该站点的限制性代理的 Windows 7 PC 上安装 coffeescript。

# php - cUrl cookie 在外部服务器上不起作用，但在本地服务器上起作用

> ID：11031012
> 
> 赞同：1
> 
> 时间：2012-06-14T10:15:49.533
> 
> 标签：php, cookies, curl

这是我的 cUrl 代码，

```
function curl_cookieset() {
  $fp = fopen("cookie.txt", "w");
  fclose($fp);
  /*visit the homepage to set the cookie properly */
  $ch = curl_init ("http://www.autoscout24.de/ListGN.aspx?vis=1&state=A&atype=C&cy=D&page=1&results=20&ustate=N,U&sort=price&rfde=True&custtype=P&zipc=D");
  curl_setopt($ch, CURLOPT_COOKIEJAR, "cookie.txt");
  curl_setopt($ch, CURLOPT_COOKIEFILE, "cookie.txt");
  curl_setopt($ch, CURLOPT_USERAGENT, "Mozilla/5.001 (windows; U; NT4.0; en-US; rv:1.0) Gecko/25250101");
  curl_setopt($ch, CURLOPT_HEADER, 0);
  $output = curl_exec ($ch);
}

function curl_download($Url ){
    if (!function_exists('curl_init')){
        die('Sorry cURL is not installed!');
    }   
    $ch = curl_init();
    curl_setopt($ch, CURLOPT_URL, $Url);
    curl_setopt($ch, CURLOPT_COOKIEJAR, "cookie.txt");
    curl_setopt($ch, CURLOPT_COOKIEFILE, "cookie.txt");
    curl_setopt($ch, CURLOPT_USERAGENT, 'Mozilla/5.001 (windows; U; NT4.0; en-US; rv:1.0) Gecko/25250101');
    curl_setopt($ch, CURLOPT_HEADER, 0);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
    curl_setopt($ch, CURLOPT_TIMEOUT, 10);
    $output = curl_exec($ch);
    curl_close($ch);
    return $output;
} 
```

这就是我使用它的方式，

```
curl_cookieset();
while(true) {
   //some other process
   $result = curl_download($url);
   //some other process
} 
```

这可以在本地主机上正常工作，但是当我尝试在外部服务器上运行时，它没有设置 cookie，我也没有得到相同的结果。

注意：它创建 cookie.txt

```
cookie.txt chmod = 666 
```

应该是什么问题？

# qt - Qt 小部件 setStyleSheet

> ID：11031014
> 
> 赞同：4
> 
> 时间：2012-06-14T10:15:55.117
> 
> 标签：qt, qtstylesheets

由于我正在为平板电脑环境编程，因此某些小部件太小而无法进行可触摸交互。我想让 QSpinBox 按钮特别大。

经过一番搜索，我发现唯一的方法出现了 setStyleSheet 函数，但是并没有很好地解释如何使用它。在这个[指向 Qt 参考](http://doc.qt.nokia.com/4.7-snapshot/stylesheet-examples.html#customizing-qspinbox)的链接中，描述了我应该将什么传递给 setStyleSheet 函数，但不清楚我是否可以使用它的一部分，或者即使我只想更改一件事，我也应该使用它的全部。

无论如何，使用它的一部分或整个文本，我的 QDoubleSpinBox 在应用此设置后看起来是默认的。当我在 mi ui 文件中绘制时，它甚至比现在更大。当然，它不会将背景涂成黄色（只是为了检查它是否正常工作）或使按钮变大。

我正在使用这个功能：

```
customizeSpinBox(ui.doubleSpinBoxDistanciaLocalizador);
                ui.doubleSpinBoxDistanciaLocalizador->setVisible(true);

void MyClass::customizeSpinBox(QDoubleSpinBox *spinBox){

qApp->setStyleSheet("QSpinBox { border: 3px solid red; border-radius: 5px; background-color: yellow; }"
                       "QSpinBox::up-arrow { border-left: 17px solid none;"
                       "border-right: 17px solid none; border-bottom: 17px solid black; width: 0px; height: 0px; }"
                       "QSpinBox::up-arrow:hover { border-left: 17px solid none;"
                       "border-right: 17px solid none; border-bottom: 17px solid black; width: 0px; height: 0px; }"
                       "QSpinBox::up-button { width: 80px; height: 77px; background-color: yellow; }"
                       "QSpinBox::up-button:hover { width: 80px; height: 77px; background-color: yellow; }"

                       "QSpinBox::down-arrow { border-left: 17px solid none;"
                       "border-right: 17px solid none; border-top: 17px solid black; width: 0px; height: 0px; }"
                       "QSpinBox::down-arrow:hover { border-left: 17px solid none;"
                       "border-right: 17px solid none; border-top: 17px solid black; width: 0px; height: 0px; }"
                       "QSpinBox::down-button { width: 80px; height: 77px; background-color: yellow; }"
                       "QSpinBox::down-button:hover { width: 80px; height: 77px; background-color: yellow; }"
    ); 
```

}

有什么帮助吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-14T10:56:32.383

首先 - 这个样式表代码不能工作。在某些行中缺少结束“}”。

为了设置 QSpinBox 的最小尺寸，试试这个： `QSpinBox { border: 3px solid red; border-radius: 5px; background-color: yellow; min-width: 200px; min-height: 200px; }`

使用这种方法，我得到了具有这种样式的又大又丑的旋转框：

```
"QSpinBox { border: 3px solid red; border-radius: 5px; background-color: yellow; min-height: 150px; min-width: 150px; }"
"QSpinBox::up-arrow { border-left: 17px solid none;"
"border-right: 17px solid none; border-bottom: 17px solid black; width: 0px; height: 0px; }"
"QSpinBox::up-arrow:hover { border-left: 17px solid none; "
"border-right: 17px solid none; border-bottom: 17px solid black; width: 0px; height: 0px; }"
"QSpinBox::up-button { min-width: 80px; min-height: 77px; background-color: yellow; }"
"QSpinBox::up-button:hover { min-width: 80px; min-height: 77px; background-color: yellow; }"
"QSpinBox::down-arrow { border-left: 17px solid none;"
"border-right: 17px solid none; border-top: 17px solid black; width: 0px; height: 0px; }"

"QSpinBox::down-arrow:hover { border-left: 17px solid none;"
"border-right: 17px solid none; border-top: 17px solid black; width: 0px; height: 0px; }"
"QSpinBox::down-button { min-width: 80px; min-height: 77px; background-color: yellow; }"
"QSpinBox::down-button:hover { min-width: 80px; min-height: 77px; background-color: yellow; }" 
```

![在此处输入图像描述](../Images/07b20bf9458bb8655ebb49ac98bb5091.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T11:10:25.470

将分号放在样式表字符串的最后一行。

利用

```
"QSpinBox::down-button:hover { width: 80px; height: 77px; background-color: yellow; };" 
```

代替

```
"QSpinBox::down-button:hover { width: 80px; height: 77px; background-color: yellow; }" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-27T15:13:44.753

对不起，我来晚了。[检查这个](http://qt-project.org/doc/qt-4.8/stylesheet-examples.html#customizing-qspinbox)。我意识到“subcontrol-origin: ...”和“subcontrol-position: ...”都必须设置在向下按钮和向上按钮上。我正在使用 python+pyqt。希望它可以帮助你。

# c# - Automapper - 将 2 个枚举值映射到 1 个值

> ID：11031016
> 
> 赞同：3
> 
> 时间：2012-06-14T10:16:03.057
> 
> 标签：c#, automapper

我完全是 Automapper 的菜鸟，我想知道是否可以将源中的 2 个枚举值映射到目标中的 1。

在下面的示例中，我想将 VisaCredit 和 VisaDebit 都映射到 Visa。

来源：

```
public enum CardType { VisaCredit, VisaDebit, MasterCard, AmericanExpress, SwitchMaestro } 
```

目的地：

```
public enum CardType { Visa, MasterCard, AmericanExpress, SwitchMaestro } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T10:44:36.613

您可以为这些类型创建一个映射，然后定义一个自定义转换器：

```
Mapper.CreateMap<X.CardType, Y.CardType>().ConvertUsing(CardTypeConverter.Convert); 
```

您的卡片类型映射函数看起来与此类似（为简洁起见，省略了其他映射）：

```
public class CardTypeConverter
{
    public static Y.CardType Convert(X.CardType cardType)
    {
        switch(cardType)
        {
            ...

            case X.CardType.VisaCredit:
            case X.CardType.VisaDebit:
                return Y.CardType.Visa;

            ...
        }
    }
} 
```

这可能不是将两个枚举值映射到一个的最简洁的方法，但它应该可以工作。

# c# - MySql过程中表的一些列的更新

> ID：11031018
> 
> 赞同：2
> 
> 时间：2012-06-14T10:16:08.937
> 
> 标签：c#, asp.net, mysql

我有一个程序，可以从 asp.net 应用程序访问。我对表的某些列进行了更新和插入查询，并且我希望保留的列值保持原样。我该怎么办？请帮助..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T10:44:34.823

您应该检查下面的链接，其中包含完整的详细信息。

[http://wiki.asp.net/page.aspx/387/connecting-to-sap-data-from-aspnet/](http://wiki.asp.net/page.aspx/387/connecting-to-sap-data-from-aspnet/)这与 VS 2003 和 VS 2005 连接

要使用 VS 2008 进行连接，请查看[http://www.codeproject.com/Articles/35876/Connection-to-SAP-from-Visual-Studio-2008-with-SAP](http://www.codeproject.com/Articles/35876/Connection-to-SAP-from-Visual-Studio-2008-with-SAP)

# c# - 如何显示 Excel 保存更改对话框

> ID：11031020
> 
> 赞同：0
> 
> 时间：2012-06-14T10:16:18.673
> 
> 标签：c#, excel

我正在处理 OnWorkbookBeforeClose 事件，需要提示用户保存更改。有很多关于如何禁用“保存更改”对话框的内容，但没有关于如何显示它的内容......

（我需要整理一些东西。如果这样做，然后让 Excel 放置此框并且用户按下取消，则不会出现用户尚未保存工作簿并且它仍处于打开状态且处于活动状态的情况）。

由于 SaveDontSaveCancel 的标准对话框没有 DialogBu​​ttons（最接近的是 YesNoCancel），有没有办法显示这个保存更改对话框？

（要清楚我对保存或另存为对话框不感兴趣，只有“保存更改”对话框提示：“您要将更改保存到 Book1.xks 吗？并有 3 个按钮：保存、不保存、取消）

XlBuiltInDialog.xlDialogSaveWorkbook 仅显示提示输入文件名的保存对话框（暗示用户已经选择了“保存”）。

或者，如果在工作簿关闭后引发了一个事件，那么这将允许我做我需要的事情。

我宁愿向用户展示正确的 Excel 对话框，所以我真的不想自己动手。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T13:37:00.233

您可以在事件`Saved`中将工作簿的属性设置为。这将强制 Excel 显示事件返回后提到的“保存/不保存/取消”对话框@Siddharth。如果用户选择取消，工作簿将保持打开状态。那是你要的吗？`False``Workbook_BeforeClose`

# c# - 在视图中指定自定义格式

> ID：11031021
> 
> 赞同：1
> 
> 时间：2012-06-14T10:16:24.477
> 
> 标签：c#, asp.net-mvc-3

[Django 有过滤器的概念，允许您在视图中格式化值。](https://docs.djangoproject.com/en/1.2/ref/templates/builtins/)

例如，如果您的文件大小为 123456789 字节，那么您可以在视图中使用

```
{{ value|filesizeformat }} 
```

显示 117.7 MB。

（这是一个例子——还有很多其他的例子，比如复数、人性化、timesince、timeuntil 等）。

在 ASP.NET MVC3 中执行此操作的最佳方法是什么，其中**视图将确定要使用的格式**（例如，某些视图将以字节显示文件大小，其他视图以更易于阅读的格式显示）。

说清楚 - 我知道您可以在自定义模板中执行此操作，但无法弄清楚如何为相同的值使用不同的模板并在视图中指定要使用的模板。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T10:26:49.230

如果你打电话给你`DisplayTemplate`的例子`Pinguin.cshtml`，你可以打电话给`Html.DisplayFor(m => m.MyProperty, "Pinguin")`它，它会利用你的模板（使用参数`additionalViewdata`）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T12:17:27.010

查看显示/编辑器模板。这应该是你正在寻找的。关于这个问题的一些好帖子：

1) [ASP.NET MVC 2 模板，第 1 部分：简介](http://bradwilson.typepad.com/blog/2009/10/aspnet-mvc-2-templates-part-1-introduction.html)

2) [asp.net MVC DisplayTemplates 和 EditorTemplate 命名约定](https://stackoverflow.com/q/2317039/1437962)

3)[编辑器模板/显示模板如何识别分配给它们的任何属性？](https://stackoverflow.com/q/7313284/1437962)

# android - 使 ScrollView 显示最后一个可见视图

> ID：11031022
> 
> 赞同：0
> 
> 时间：2012-06-14T10:16:29.203
> 
> 标签：android, scrollview

在我的滚动视图中有一个相对布局，其中包含 EditTextView 和 Button，在按钮上单击第 2 个 EditTextView 和第 2 个按钮将变为可见，依此类推，直到第 5 个 EditTextView 和 Button。现在如何在屏幕上显示最后一个可见视图（第二个按钮），现在它没有显示，我需要向下滚动才能看到它

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T08:34:13.930

我想找到了你问题的答案。首先初始化你的滚动视图（findViewById(int)）然后在一个按钮上点击写下这段代码：

`scroll.fullScroll(ScrollView.FOCUS_DOWN);`

在我的活动中：

```
public class SampleScrollviewActivity extends Activity  {
Button b1;
Button b2;
ScrollView scroll;
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    b2=(Button) findViewById(R.id.btn2);
    b1=(Button) findViewById(R.id.btn1);
    scroll=(ScrollView) findViewById(R.id.scrlView1);

    b2.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            scroll.fullScroll(ScrollView.FOCUS_DOWN);

        }
    });
    b1.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            scroll.fullScroll(ScrollView.FOCUS_UP);
        }
    });
} 
```

}

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-09T07:58:15.750

我解决此问题的一般方法是 - 使用以下代码查找（第二个按钮）的位置

```
View secondButton = findViewById(R.id.secondButtonID);
//Use getLocation on screen API to find exact location (2nd Button) View

int location[] = new int[2];
secondButton.getLocationOnScreen(location);
//Now you have X,Y location of second View on screen
int x = location[0];
int y = location[1];
ScrollView scrollView = findVieById(R.id.scrollViewID);
//Move to X,Y position
scrollView.scrollTo(x,y);  //you can add some offset eg. y +- offset 
```

# android - 恢复到同一活动时如何擦除 EditText 字段？

> ID：11031024
> 
> 赞同：1
> 
> 时间：2012-06-14T10:16:38.800
> 
> 标签：android, android-edittext

我有两个编辑字段“用户名”和“密码”，每次我返回到包含这些字段的页面时，这些值都不会被删除。我尝试使用以下代码，但没有帮助：

```
 username = (EditText) findViewById(R.id.enterUsername);
            password = (EditText) findViewById(R.id.enterPassword);
          username.setOnClickListener(new View.OnClickListener() 
    {
           @Override
           public void onClick(View v) 
           {
               username.setText("");
           }

 });

    password.setOnClickListener(new View.OnClickListener() 
    {
           @Override
           public void onClick(View v) 
           {
               password.setText("");
           }

 }); 
```

当返回相同的活动时，可以做些什么来删除 EditText 字段的先前条目？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-14T10:23:08.073

在您的 Activity onResume() 中，您这样做是为了清除 EditText 数据。

```
protected void onResume() {
        // TODO Auto-generated method stub
        super.onResume();
        password.setText("");
        username.setText("");

    } 
```

谢谢

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-14T10:20:49.033

你为什么要设置`setOnClickListener`？
只有用户*点击*这些字段才会有用。

而是在您的`onCreate()`.
因此，当您返回活动时，该活动将被重新创建，因此`onCreate()`将被调用。

```
username.setText("");
password.setText(""); 
```

**注意：**
确保您在使用之前已通过编写以下方式初始化它们：

```
 username = (EditText) findViewById(R.id.enterUsername);
        password = (EditText) findViewById(R.id.enterPassword); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-14T10:53:00.897

我想你应该

```
password.setText("");
username.setText(""); 
```

仅当按下某个确认/提交按钮并且登录成功时。

这

> 恢复

即使您从最小化状态恢复您的应用程序也会调用。

当假设我输入我的用户名、密码并且 VoiceCall 来时，这将破坏用户体验。我参加/拒绝电话，我很惊讶我必须再次输入所有这些东西？？？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-14T10:18:42.593

您需要在登录活动`setText(null)`的方法中调用您的 EditText`onResume`

# data-structures - 引导集合以提高性能

> ID：11031027
> 
> 赞同：25
> 
> 时间：2012-06-14T10:16:43.523
> 
> 标签：data-structures, collections, bootstrapping

在他的开创性[论文](http://www.cs.cmu.edu/~rwh/theses/okasaki.pdf)中，Chris Okasaki 描述了数据结构引导技术。已经做了哪些工作（如果有的话）来使用这种技术来改善数据结构中的局部性？

例如，平衡二叉树通常用于创建纯函数集和字典，但由于改进了局部性，小数组的哈希树通常更快。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-25T14:56:44.560

您可以尝试参考 Haskell 或 Clojure 的书，而不仅仅是 CMU pdf：例如，

[http://www.amazon.com/Purely-Functional-Structures-Chris-Okasaki/dp/0521663504](https://rads.stackoverflow.com/amzn/click/com/0521663504)

这里有一个关于 SO 的问题：

[纯函数式数据结构有什么好处？](https://stackoverflow.com/questions/4399837/what-is-the-benefit-of-purely-functional-data-structure)

这里还有 Clojure 区域：

[https://github.com/viksit/clojure-datastructures](https://github.com/viksit/clojure-datastructures)

SE上有这个：

[https://cstheory.stackexchange.com/questions/1539/whats-new-in-purely-functional-data-structures-since-okasaki](https://cstheory.stackexchange.com/questions/1539/whats-new-in-purely-functional-data-structures-since-okasaki)

希望那里的某些东西为具有结果的搜索提供基础:-)

您可能必须使用学术或商业参考搜索引擎，并且您可能希望在 conf 中查看海报会话，因为在这里搜索并不明显，例如，Mercury 可以生成 Erlang 代码......因此搜索缓存和位置方面的性能在一些处理延迟的硬件领域的函数式编程中。

Canada'a National Research Council (NRC) 正在进行一些工作......你可以尝试搜索他们的酒吧/通知/报告

但请注意：搜索

大数据延迟位置 NRC 2012

给出了相当不同的结果

大数据功能延迟位置 NSF 2012

（接下来我会放弃 2012 并尝试使用谷歌搜索工具的日期范围选项来获取最近的结果）

# authentication - Facebook 登录验证 PHP BUG

> ID：11031029
> 
> 赞同：0
> 
> 时间：2012-06-14T10:17:00.033
> 
> 标签：authentication, facebook-login

我们正在使用 PHP 将 Facebook 登录系统集成到我们的网站中。我们注意到了一个问题，不知道是facebook的bug还是我们这边的bug。场景是当用户点击使用facebook登录时，facebook在登录后第一次请求权限。如果用户在权限页面上按取消，那么它会被重定向到我们的网站，如果用户再次点击登录使用 facebook 按钮，然后再次取消页面的权限，而不是重定向到我们的网站，重定向到 facebook.com。有没有人有什么建议？这是 Facebook 的错误吗？您可以通过登录在[http://test.brightspyre.com](http://test.brightspyre.com)上查看问题。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T10:22:16.717

这是停止身份验证对话框循环的预期行为，这不是错误 - 您不应该连续多次重新提示用户获得相同的权限 - 将它们带到一个错误页面，解释您为什么需要权限，如果描述在身份验证对话框中本身是不够的

# android - 在我的 Android 程序中从服务器获取图像？

> ID：11031032
> 
> 赞同：0
> 
> 时间：2012-06-14T10:17:09.560
> 
> 标签：android

如何从服务器访问图像并将其显示在我的 android 应用程序中。请帮帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T11:02:06.340

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T17:46:59.380

我也是android开发的新手，但我是在我的一个学习应用程序上做到的。如果它是一个 URL，那么您执行以下操作：

```
 Drawable picture;
                      try {
                   URL picurl = new URL("some URL");
                   InputStream content = (InputStream)picurl.getContent();
                   picture = Drawable.createFromStream(content , "src"); 
               }
               catch(Exception e){
                           //handle the Exception 
                       } 
```

# java - 无法使用浏览器从远程计算机访问 Tomcat Apache 服务器

> ID：11031037
> 
> 赞同：2
> 
> 时间：2012-06-14T10:17:26.760
> 
> 标签：java, apache, tomcat, remote-access

我在远程机器上安装了 Apache Tomcat 5.5 版本。应用程序正在使用 Java servlet 和 mysql 数据库。我需要在任何系统上使用特定的 IP 地址（http://192.168.2.2:8080/myapps）访问这些页面。

请提供参考链接或访问远程服务器网页的步骤。

问候，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T11:24:01.320

Sounds like you have either a firewall on the machine with tomcat on it, you have its IP address wrong, or you are on a network which cant connect to it.

Can you access it on the machine it is on (ie, the one where you can access it as localhost:8080/myapps) with the remote address - `http://192.168.2.2:8080/myapps`? If not the address is wrong.

If the browser can't access 192.168.2.2 at all it means you have a firewall on that machine or that you are trying it from an address that doesn't start 192.168.

**EDIT**:

the address 192.168.x.x is a 'private address', which means nothing outside that address range can connect to it, and it can't go onto the internet. If you want to access it from the internet, you need a way to translate a public address (such as the one you listed xxx.125.xxx.158) to your private address, such as a router with port forwarding set up.

Without that you won't be able to connect to it.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-02-04T06:50:26.697

我在我的 Windows 2012 服务器操作系统中遇到了同样的问题，我只是在运行 tomcat apache 的端口上添加了一个异常。

要向端口添加异常，请使用以下步骤

1) 单击开始按钮的开始按钮的图片，然后单击控制面板，打开 Windows 防火墙。在搜索框中，键入防火墙，然后单击 Windows 防火墙。

2) 在左侧窗格中，单击高级设置。需要管理员权限 如果系统提示您输入管理员密码或确认，请键入密码或提供确认。

3) 在具有高级安全性的 Windows 防火墙对话框中，在左窗格中单击入站规则，然后在右窗格中单击新建规则。

4）现在选择端口并单击下一步，现在在特定的本地端口中输入您的端口或检查所有本地端口。就这样

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-05-11T11:08:34.353

请更改**context.xml**文件中的`allow`属性值，该文件位于**webapps/manager/meta-inf**文件夹中。

 ****旧配置

```
<Valve className="org.apache.catalina.valves.RemoteAddrValve"
         allow="127\.\d+\.\d+\.\d+|::1|0:0:0:0:0:0:0:1" /> 
```

更改为新配置

```
<Valve className="org.apache.catalina.valves.RemoteAddrValve"
         allow="\d+\.\d+\.\d+\.\d+" /> 
```

**这将允许从所有 IP 地址远程**访问管理器以进行登录。此外，您将不会获得 403 访问被拒绝页面****

# python - 在使用字符串键构建字典时，我应该在 Python 中编写 dict 还是 {}？

> ID：11031039
> 
> 赞同：6
> 
> 时间：2012-06-14T10:17:33.197
> 
> 标签：python, coding-style

这只是您建议的约定的一个小问题。最近，我看到很多人写的例子，`dict(key1=val1, key2=val2)`而不是我认为更惯用的`{"key1": val1, "key2": val2}`。我认为原因是为了避免使用`""`钥匙，但我不确定。也许`dict()`- 语法看起来更接近其他语言？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-14T10:41:34.897

`{"key1": val1, "key2": val2}`更地道；我几乎从来没有遇到`dict`过关键字参数，我当然也从来没有想过要写它。它也更通用，因为关键字参数必须是 Python 标识符：

```
>>> {"foo bar": 1}
{'foo bar': 1}
>>> dict(foo bar=1)
------------------------------------------------------------
   File "<ipython console>", line 1
     dict(foo bar=1)
                ^
SyntaxError: invalid syntax

>>> dict("foo bar"=1)
------------------------------------------------------------
   File "<ipython console>", line 1
SyntaxError: keyword can't be an expression (<ipython console>, line 1) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-14T10:59:57.827

我将在这里逆流而上：

如果适合您，请使用该`dict()`方法，但请记住其他答案中概述的限制。这种方法有一些优点：

*   在某些情况下看起来不那么杂乱
*   每个键值对少 3 个字符
*   在难以打字的键盘布局上`{`（此处为 AltGr-7 和 AltGr-0），打字速度更快`}`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-14T10:32:31.973

当然，使用 {}，保持代码简单和少输入始终是我的目标

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-14T12:32:38.117

大括号 { } 有一些歧义。考虑：

```
>>> x = {'one','two','three'}
>>> type(x)
<type 'set'>
>>> x = {}
>>> type(x)
<type 'dict'> 
```

`set()`而使用or没有歧义`dict()`。

# android - 从 IBinder (SyncAdapterBinder) 获取服务实例

> ID：11031040
> 
> 赞同：1
> 
> 时间：2012-06-14T10:17:37.127
> 
> 标签：android, android-service, android-binder

我有一个用来同步我的联系人的服务，我想向它添加更多方法（我没有创建这个服务，我只是扩展它，我有点迷茫）。我会在某些情况下调用这些方法，所以我需要服务实例来执行这些调用。我看到在 Android 开发人员中，他们使用获取此实例`LocalBinder`的方法创建了类`getService()`，但我使用的是`AbstractThreadedSyncAdapter`：

```
private AbstractThreadedSyncAdapter mSyncAdapter = null;

public IBinder onBind(Intent intent) {
    return getSyncAdapter().getSyncAdapterBinder();
}

private synchronized AbstractThreadedSyncAdapter getSyncAdapter() {
    if (mSyncAdapter == null) {
        mSyncAdapter = new MyContactSync(this, true);
    }
    return mSyncAdapter;
} 
```

首先，我应该创建另一个服务来实现这些方法，还是可以使用与同步相同的服务？如果我可以使用相同的，我怎样才能获得服务实例？

# c# - 内存泄漏：根引用的 TimerCallbacks 对象

> ID：11031041
> 
> 赞同：2
> 
> 时间：2012-06-14T10:17:40.110
> 
> 标签：c#, memory-leaks

遗留应用程序中存在内存泄漏，因此我不太了解代码。我用 MemProfiler 分析，发现越来越多的对象被对象引用`TimerCall`。这些`TimerCallback`s 被`_TimerCallback`对象引用，它们是根的孩子。该图看起来像`Root`-> `_TimerCallback`-> `TimerCallback`-> `MyObject`。

由于在其构造函数中`MyObject`需要 a `TimerCallback`，因此有几个调用，例如：

```
new MyObject(int timeout, new TimerCallback(SomeCallbackMethod)); 
```

老实说，这样做对我来说看起来很尴尬，但当我写它时，它是一个遗留应用程序，它是用“C 风格”C# 编写的，有很多空赋值和`Dispose()`调用......

那么如何`TimerCallback`从根目录中删除这些引用呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T10:39:30.347

这看起来像您`TimerCallback`正在一个`Timer`对象中使用。找出为什么有很多计时器处于活动状态。它们很可能是让您的回调保持活力的真正根源。

**我只是在Reflector**中环顾`_TimerCallback`全班，虽然我不完全理解发生了什么，但我认为这门课是红鲱鱼。我认为**根本原因是计时器**（甚至可能是禁用的）。

# android - 没有 GPL 许可的 Android PDF 查看器库

> ID：11031043
> 
> 赞同：7
> 
> 时间：2012-06-14T10:18:01.497
> 
> 标签：android, pdf

我正在寻找一个没有 GPL 许可证的 Android 版 PDF 查看器库，有人知道是否有任何可用的免费许可证库吗？

因为我一直在漫游，发现一些开源库，如 MuPDF、Android PDF Viewer、DroidReader 正在使用 GPL 许可证，我无法将其用于我即将开发的商业应用程序。

不，我也不想使用 google docs 选项；-)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-20T11:28:33.530

MuPDF 是 GPL 版的，是的。

在您的软件中使用 GPL 版的第三方组件并不禁止其商业用途（它只需要您发布软件的源代码）。所以......你的问题不是 GPL 本身，而是你不愿意发布你的源代码，对吧？

但是... [Artifex](http://artifex.com/)（MuPDF、Ghostscript、GhostXPS 和 GhostPCL 背后的公司）愿意为您提供 MuPDF （及其其他产品）**的商业使用****许可**，这样就不需要发布您的源代码东西。

 *** * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-14T10:34:40.393

[http://www.pdftron.com/pdfnet/index.html](http://www.pdftron.com/pdfnet/index.html)这是一个完整的 PDF 工具包（商业）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-14T10:23:40.807

您可以购买 MuPDF 的商业许可证。

根据他们的网页联系 sales@artifex.com（我与他们没有任何关联）。由于 DroidReader 使用他们的库，我猜他们的阅读器相当不错。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-20T11:14:00.913

我找到了一个很好的解决我们公司需求的解决方案（我们采用了[Radaee PDF ），我们](http://www.androidpdf.mobi)[在这里](https://stackoverflow.com/questions/4665957/pdf-parsing-library-for-android/4766335#4766335)开始了我们的评估和侦察：我认为这是这里最完整的解决方案之一。**

# javascript - 移入和移出跨度时的tinyMCE插入符号定位

> ID：11031044
> 
> 赞同：1
> 
> 时间：2012-06-14T10:18:05.677
> 
> 标签：javascript, css, tinymce, caret

## 介绍

我正在使用 tinyMCE 来编辑标记样式语法（类似 TeX 的方程）。为了表示从 tinyMCE 提交内容后需要处理的地方，我添加了 span 元素以允许自定义 CSS 突出显示标记并将 id 属性附加到它。在跨度和封闭段落之间移动时，我在获得明智的插入符号定位行为时遇到了一些困难——从跨度的开头移动到跨度之外时，插入符通常会跳过一个字符。

## 一个具体的例子

（我在 MacBook 上运行 Firefox 12）

test.html： http: [//pastebin.com/m8nAmetz](http://pastebin.com/m8nAmetz)

eqn 和内联类的 CSS 样式：http: [//pastebin.com/cQVRGVMS](http://pastebin.com/cQVRGVMS)

将插入符号定位在 CSS 呈现 '$' 之前按下右箭头会导致插入符号移动到 'moreinterestingeqnstuff' 中的第一个 m 之后，并且在 '...stuff' 结果中的第二个 f 之后重复相同的过程在插入符号中跳过跨度后的第一个空格。单击以选择插入符号位置会在插入符号被推入上述错误状态之一之前正确定位插入符号。

## 问题

我在这里做错了吗？如果不是，有谁知道这是一个 tinyMCE 错误还是浏览器错误，以及在这两种情况下是否存在解决方法？

**更新：**好的，我想我必须输入处理伪元素（见下文）作为 tinyMCE 人员的功能请求。但是，即使没有伪元素，插入符号处理也存在问题。在这个小提琴[http://fiddle.tinymce.com/EGbaab](http://fiddle.tinymce.com/EGbaab)我已经删除了内联类，它删除了之前和之后的样式。如果我想在跨度之后直接插入一个字符，我不能，因为将插入符号移动到 '...stuff' 中的最后一个 f 之后立即将它放在跨度内。有没有办法在 tinyMCE 中禁用此功能，或者实现此行为的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T14:45:56.340

嗯，这里你没有做错什么，但是你需要知道插入符号的移动并没有照顾到像 after 和 before 这样的 css 伪元素。它们在这里被使用。所以这显然不是错误。

# iphone - xml填充的TableView需要对数据进行分段并在表的右侧创建AZ索引

> ID：11031046
> 
> 赞同：0
> 
> 时间：2012-06-14T10:18:12.493
> 
> 标签：iphone, ios, uitableview, nsindexpath

基本上，我的 tableview 填充了街道名称列表，该列表是从 XML 解析的数据，街道按字母顺序排序。

XML 有多个用于 A、B、C 等的街道。（基本上超过 1 个，每个大小不同）

问题是：基本上它将整个数组添加到 A 节、B 节等。

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
if (tableView == self.searchDisplayController.searchResultsTableView)
{
    return [self.filteredListContent count];
}
else
{
    return [xmlDataArray count];
}  
} 
```

我需要一种方法将 XML 分解为多个数组，以将 A、B、C 等中包含的街道填充到正确的部分中。

我已阅读有关创建字典和创建键的多篇文章，但我不知道如何从解析的 XML 中执行此操作。一旦我在字典中有它，我如何填充 tableView？我有一个单独的 indexTitles 数组，AZ 索引显示在右侧。但是这当然行不通，因为数据需要根据 AZ 分类到自己的部分中。

非常感谢任何帮助或建议。

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T18:45:29.990

有很多很好的教程来学习如何正确解析 XML，这里有一个快速的：

在.h

```
@interface ObjectName : ObjectSuperclass <NSXMLParserDelegate> {
    NSMutableString *currentElement;
    NSMutableString *childElement;
    NSMutableDictionary *dictionary;
}

@end 
```

在 .m 中，插入这些 NSXMLParser 委托方法：

```
- (void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName attributes:(NSDictionary *)attributeDict{    
  currentElement = nil;
  currentElement = [elementName copy];
  if ([elementName isEqualToString:@"xmlParentElement"]) {
    //This means the parser has entered the XML parent element named: xmlParentElement
    //All of the child elements that need to be stored in the dictionary should have their own IVARs and declarations.
    childElement = [[NSMutableString alloc] init];
  }
}

- (void)parser:(NSXMLParser *)parser foundCharacters:(NSString *)string{
  //For all child elements, run this if statement.
  if (currentElement isEqualToString:@"childElement") {
    [childElement appendString:string];
  }
}

- (void)parser:(NSXMLParser *)parser didEndElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName{   
  if ([elementName isEqualToString:@"parentElement"]) {
    [dictionary addObject:childElement forKey:@"childElement"];
    //And devise a system for indexing (this could be converting the address string in to an array and taking objectAtIndex:0.. any way you choose, add that object below:
    [dictionary addObject:@"A" forKey@"index"];
  }
} 
```

现在已经完成了，使用常规的 UITableViewController 委托方法来创建表，此外，使用这些委托方法来创建侧索引：

```
- (NSArray *)sectionIndexTitlesForTableView:(UITableView *)tableView {
  return [dictionary objectForKey:@"index"];
}

- (NSInteger)tableView:(UITableView *)tableView sectionForSectionIndexTitle:(NSString *)title atIndex:(NSInteger)index{
  return index;
} 
```

# c# - IPersistStream 保存上的 COM 互操作编组错误

> ID：11031049
> 
> 赞同：1
> 
> 时间：2012-06-14T10:18:24.877
> 
> 标签：c#, marshalling, com-interop

我正在开发一个带有两个工具栏的 Windows 资源管理器扩展（我没有编写原始代码），它使用了[此处](http://www.codeproject.com/Articles/2219/Extending-Explorer-with-Band-Objects-using-NET-and)找到的 IPersistStream 和 BandObject 的定义。当我使用 VS 2010 附加到资源管理器时，出现以下错误：

> 托管调试助手“InvalidMemberDeclaration”在“C:\WINDOWS\explorer.exe”中检测到问题。
> 
> 附加信息：确定如何封送类型为“BandObjectLib.IPersistStream”的成员“Save”的参数时发生以下错误：System.Runtime.InteropServices.MarshalDirectiveException：无法封送“返回值”：托管/非托管类型组合无效（Int /UInt 必须与 SysInt 或 SysUInt 配对）。这很可能是由于其中一个参数的 MarshalAs 属性不兼容。

我认为这意味着 C# 方法签名之间存在一些不匹配：

```
//(no PersistSig)
void Save([In, MarshalAs(UnmanagedType.Interface)] IntPtr pStm, [In, MarshalAs(UnmanagedType.Bool)] bool fClearDirty); 
```

以及 IPersistStream::Save 的预期签名：

```
HRESULT Save(
  [in]  IStream *pStm,
  [in]  BOOL fClearDirty
); 
```

该方法在实现类中的实现如下所示：

```
public virtual void Save(IntPtr pStm, bool fClearDirty) {} 
```

一个完整的答案会很好，但是关于我如何调试和解决这个问题的任何想法也会有所帮助（请记住，我对 COM 互操作有一个最小且非常理论的理解）。

# google-maps - ElasticSearch geo-database: geo_distance filter returns geo pins in ellipse not in circle

> ID：11031050
> 
> 赞同：5
> 
> 时间：2012-06-14T10:18:26.143
> 
> 标签：google-maps, elasticsearch

i have elasticsearch database of geo objects. I want to search the nearest objects around some `geo_point` in custom distance and then display them on google map. using default elasticsearch filters - `geo_distance` filter, it works fine, but the problem is that returned pins are in eliptical range, not in circular range (as usually when you search anything in X km RADIUS) maybe screenshots would help to understand.

I don't know where the problem can be, google maps only takes the result that elastic returns - set of pins to display

Does anybody know anything about this issue?

![map without filtering](../Images/d60789957b0196619134151ea0be305e.png)

![filtered map, the red circle shows actual border of searching](../Images/1704a2292b3e6343cc0e1c365b4b8a33.png)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-14T17:22:40.763

When geo points are represented as arrays in elasticsearch they are following GeoJSON format, which is `[lon, lat]`. So, from elasticsearch perspective, your center pin is not in Paris but just off the coast of Somalia.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-14T12:25:56.993

Based on your screenshots I came up with a couple of points in your circle.

Assuming we have centre coordinate of lat:48.853647, lon:2.347894, and a point at lat:48.853647 lon:2.32 (a point at the same lat but further west):

Using distance_type:plane the distance calculated is ~ 3.1km, while using distance_type:arc the distance is ~ 2km.

If we use a different point, lat:48.8717 lon:2.347894 (further north of the centre point, but some lon), using distance_type:plane the distance is ~ 2km and using distance_type:arc it is also ~ 2km.

Consequently if the filtered distance was say 2.5km, then using distance_type:arc would correctly include both points, while using distance_type:plane would only include the northern point, giving the elliptical shape.

# google-app-engine - 奇怪的appengine查询结果

> ID：11031053
> 
> 赞同：0
> 
> 时间：2012-06-14T10:18:31.707
> 
> 标签：google-app-engine, google-cloud-datastore

我在这个查询中做错了什么？

```
SELECT * FROM TreatmentPlanDetails 
WHERE 
   accountId = 'ag5zfmRvbW9kZW50d2ViMnIRCxIIQWNjb3VudHMYtcjdAQw' AND 
   status = 'done' AND 
   category = 'chirurgia orale' AND
   setDoneCalendarEventStartTimestamp >= [timestamp for 6 june 2012]  AND 
   setDoneCalendarEventStartTimestamp <= [timestamp for 11 june 2012]  AND 
   deleteStatus = 'notDeleted' 
ORDER BY setDoneCalendarEventStartTimestamp ASC 
```

我没有得到任何记录，我确信有记录满足 where 子句条件。为了获得正确的记录，我必须将时间戳间隔扩大 1 毫秒。正常吗？此外，如果我通过删除类别过滤器来修改此查询，我会得到正确的结果。这绝对是奇怪的。我也在谷歌群组上问过，但我没有得到答案。无论如何，有关详细信息： [https ://groups.google.com/forum/?fromgroups#!searchin/google-appengine/query/google-appengine/ixPIvmhCS3g/d4OP91yTkrEJ](https://groups.google.com/forum/?fromgroups#!searchin/google-appengine/query/google-appengine/ixPIvmhCS3g/d4OP91yTkrEJ)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T14:56:18.190

让我们具体谈谈创建时间戳以进入查询。您使用什么代码来创建时间戳记录？显然这很重要，因为对其进行模糊测试会影响查询。可能相关的是，在数据存储中，时间戳被记录为整数，表示以微秒为单位的 posix 时间戳，即自 1970 年 1 月 1 日以来的微秒数（不包括闰秒）。*日期*（即没有时间）表示为午夜也很重要，即当天最早的时间。但请告诉我们确切的代码。（显示您尝试检索的记录的实际内容也可能很重要。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T15:58:31.513

An aside that is not specific to your question: Entity property names count as part of your storage quota. If this is going to be a huge dataset, you might pay more $$ than you'd like for property names like setDoneCalendarEventStartTimestamp.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T11:23:16.333

因为你写：

> 如果我通过删除类别过滤器来修改此查询，我会得到正确的结果

这可能意味着在您将匹配记录写入数据存储时，该类别没有被索引。如果要将记录添加到新创建的索引中，则必须将记录重新写入数据存储。

# wpf - 旋转 DataGrid，如何旋转方向/箭头键

> ID：11031054
> 
> 赞同：1
> 
> 时间：2012-06-14T10:18:36.317
> 
> 标签：wpf, wpfdatagrid, rotation, arrow-keys

我们已经`DataGrid`成功地将我们的“-90”旋转了。但是，箭头键保持未旋转。

例如，当我们按下向上箭头键时，它会向左移动，而不是向上，等等。

我们如何旋转箭头键来反映屏幕的实际方向？

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T08:28:11.770

无法想象您旋转了 dataGrid 是为了什么，但您可以捕获 keypress 事件并将其转换为另一个按键（例如，左转换为向上），就像在这个线程中一样：

[模拟按键 c#](https://stackoverflow.com/questions/3047375/simulating-key-press-c-sharp)

# knockout.js - 敲除“if”绑定不适用于可排序列表中的表达式？

> ID：11031057
> 
> 赞同：7
> 
> 时间：2012-06-14T10:18:49.140
> 
> 标签：knockout.js, knockout-sortable

我刚刚在使用 Knockout 和 Knockout-sortable 插件制作的类似待办事项的可排序列表中遇到了另一个问题。

我需要在当前时间放置的元素下放置一个红色定界符，如果在该定界符之前删除了一个元素，则取消排序。

我尝试使用“可见”绑定，它以某种方式工作，但可见绑定只是隐藏了 DOM 元素，它弄乱了可排序的 arrayIndex，向其中添加了不必要的元素。

```
<div class="delimiter" data-bind="visible: time() == $root.limit()"></div> 
```

“if”绑定会更好，因为它仅在必要时插入 DOM 元素，但我与 visible 一起使用的表达式总是被评估为 true，我不知道为什么......

```
<div class="delimiter" data-bind="if: time() == $root.limit()"></div> 
```

这是小提琴：http: [//jsfiddle.net/ingro/VaqqF/](http://jsfiddle.net/ingro/VaqqF/)

任何帮助表示赞赏，谢谢！

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-14T10:32:29.767

您只是误解了 if 绑定：它删除了已应用的节点的内容，而不是节点本身。如果你想删除一个节点而不在它周围创建一个包装器（你可以使用它来添加绑定），还有 if-binding 的注释版本，称为无*容器控制流语法*：

```
<!-- ko if: time() == $root.limit() -->
  <div class="delimiter"></div>
<!-- /ko --> 
```

[http://jsfiddle.net/VaqqF/11/](http://jsfiddle.net/VaqqF/11/)

参考： http: [//knockoutjs.com/documentation/if-binding.html](http://knockoutjs.com/documentation/if-binding.html)

# android - 关于使用 EditText 的建议

> ID：11031058
> 
> 赞同：1
> 
> 时间：2012-06-14T10:18:54.927
> 
> 标签：android, android-edittext

一旦用户按下“Enter”，我需要一种从“EditText”中获取文本的方法，如果它失去焦点，它也应该调用一个方法。

我像这样创建了 EditText：

```
 <EditText
        android:id="@+id/editText1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:layout_toRightOf="@+id/button2"
        android:ems="10" > 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T10:26:13.600

使用 EditText 动作监听器。参考这个问题，大概是一样的：[Handle Enter in EditText](https://stackoverflow.com/questions/1489852/android-handle-enter-in-an-edittext)

用于检测焦点丢失：

```
if(!(et.isFocused)){
  //call your method here
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T10:32:59.477

要接收按键，您的 EditText 需要获得焦点：

```
editText1.setFocusableInTouchMode(true);
editText1.requestFocus(); 
```

然后设置 onkeylistener():

```
editText1.setonKeyListener(new OnKeyListener(

@override onKey(View v, int keyCode, KeyEvent event) {
if(event.getAction()==KeyEvent.ACTION_UP && keyCode==KeyEvent.KEYCODE_ENTER){
// what you need to do when Enter is pressed
return true;

}else return false;

} 
```

对于失去焦点，您需要实现接口并`View.onFocusChange`检查`hasFocus``false`

# javascript - 如何隐藏临时列表项并在重新出现后切换按钮

> ID：11031060
> 
> 赞同：0
> 
> 时间：2012-06-14T10:19:09.577
> 
> 标签：javascript, list, hide

如何隐藏临时列表项并在重新出现切换按钮后？当有隐藏物品时，可以通过它的ID找到它吗？

```
function action(x) {
    var parag = document.getElementById("li" + x);
    if(parag.style.visibility = "hidden"){
        parag.style.visibility = "visible";
    }else{
        parag.style.visibility = "hidden";
    }
} 
```

要么使用以下不起作用？

```
<head>

<script type="text/javascript">

function action(x){ 
var parag=document.getElementById("li"+x); 
    if(parag.style.display=="none"){ 
        parag.style.display="block"; 
    }else{ 
        parag.style.display="none"; 
    } 
} 

</script>
</head>
<body>

<ul> 
     <li id="li1">Item1</li>
     <li id="li2">Item2</li>
     <li id="li3">Item3</li>
</ul>
<form name="myform"><input type="button" onclick="alert(document.myform.select.value);action(document.myform.select.value)" value="show/hide"/><label>
  <select name="select" id="select">
    <option value="1">1</option>
    <option value="2">2</option>
    <option value="3">3</option>
  </select>
</label></form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T08:22:04.030

您在第一个代码中有错误：

```
if(parag.style.visibility="hidden"){ 
```

应该

```
if(parag.style.visibility=="hidden"){ 
```

, 否则`parag.style.visibility`将**始终**设置为`hidden`并且表达式将**始终**计算为`true`.

# php - PHP 5.1 之前的 session_regenerate_id

> ID：11031061
> 
> 赞同：0
> 
> 时间：2012-06-14T10:19:10.590
> 
> 标签：php, login, security

我一直在研究在我一直在开发的登录类中使用 session_regenerate_id，并且从阅读 PHP 文档和其他一些站点来看，它似乎创建了一个新会话，其中新生成的 ID 携带了以前的数据，因为该函数是在 PHP 4.3.2 中添加。

从 PHP 5.1 开始，它有一个 delete_old_session 参数，如果设置为 true，它也会破坏之前的会话，但在之前的版本中不会。

我的问题是，如果我要在运行低于 5.1 的 PHP 版本的服务器上使用 session_regenerate_id，那么使用 session_regenerate_id 并销毁前一个会话的最佳方法是什么？

我不认为 session_destroy() 会起作用，因为如果我在 session_regenerate_id 之前使用它，那么它将无法携带以前的会话数据，如果在它之后使用它只会破坏新会话。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T11:41:40.090

这应该可以解决您的问题：

```
session_start();
// gets current (previous) session
$previousID = session_id();
session_regenerate_id();
// get the new session id
$newID = session_id();
// close session related files
session_write_close();

// set the old session id
session_id($previousID);
// start the old session
session_start();
// clear the old session
session_destroy();
// save the old session state (destroyed session)
session_write_close();

// set the regenerated session id
session_id($newID);
// start the new session
session_start(); 
```

现在您的旧会话数据将被删除并转移到新的会话 ID。

# c++ - C++预处理器：避免成员变量列表的代码重复

> ID：11031062
> 
> 赞同：64
> 
> 时间：2012-06-14T10:19:23.023
> 
> 标签：c++, templates, arguments, c-preprocessor

我有多个类，每个类都有不同的成员变量，这些变量在构造函数中被简单地初始化。这是一个例子：

```
struct Person
{
    Person(const char *name, int age)
        :
        name(name),
        age(age)
    {
    }
private:
    const char *name;
    int age;
}; 
```

每个都有相关的`print<>()`功能。

```
template <>
void print<Person>(const Person &person)
{
    std::cout << "name=" << name << "\n";
    std::cout << "age=" << age << "\n";
} 
```

此代码容易出错，因为参数列表在四个位置复制。如何重写代码以避免这种重复？我想使用预处理器和/或模板。

例如，我可以使用 X-args 预处理器技术——像这样吗？

```
#define ARGUMENTS \
    ARG(const char *, name) \
    ARG(int, age)

struct Person
{
    Person(LIST_TYPE_NAME_COMMA(ARGUMENTS))
       :
       LIST_NAME_INIT(ARGUMENTS)
    {
    }
private:
    LIST_TYPE_NAME_SEMICOLON(ARGUMENTS)
};

template <>
void print<Person>(const Person &person)
{
   LIST_COUT_LINE(ARGUMENTS)
}

#undef ARGUMENTS 
```

或者更好的是，基于模板的方法？

请不要质疑我为什么要这样做，有合理的设计决策导致了多个具有命名参数的相似对象。出于性能原因，参数需要命名为成员变量。我只是在探索是否可以只列出一次参数及其类型。

* * *

## 回答 #1

> 赞同：207
> 
> 时间：2012-07-31T16:29:42.357

您需要做的是让预处理器生成有关字段的反射数据。此数据可以存储为嵌套类。

首先，为了在预处理器中更容易和更清晰地编写它，我们将使用类型化表达式。类型化表达式只是将类型放在括号中的表达式。所以`int x`你会写而不是写`(int) x`。这里有一些方便的宏来帮助输入表达式：

```
#define REM(...) __VA_ARGS__
#define EAT(...)

// Retrieve the type
#define TYPEOF(x) DETAIL_TYPEOF(DETAIL_TYPEOF_PROBE x,)
#define DETAIL_TYPEOF(...) DETAIL_TYPEOF_HEAD(__VA_ARGS__)
#define DETAIL_TYPEOF_HEAD(x, ...) REM x
#define DETAIL_TYPEOF_PROBE(...) (__VA_ARGS__),
// Strip off the type
#define STRIP(x) EAT x
// Show the type without parenthesis
#define PAIR(x) REM x 
```

接下来，我们定义一个`REFLECTABLE`宏来生成每个字段的数据（加上字段本身）。这个宏将被这样调用：

```
REFLECTABLE
(
    (const char *) name,
    (int) age
) 
```

因此，使用[Boost.PP](http://www.boost.org/doc/libs/1_49_0/libs/preprocessor/doc/index.html)我们遍历每个参数并生成如下数据：

```
// A helper metafunction for adding const to a type
template<class M, class T>
struct make_const
{
    typedef T type;
};

template<class M, class T>
struct make_const<const M, T>
{
    typedef typename boost::add_const<T>::type type;
};

#define REFLECTABLE(...) \
static const int fields_n = BOOST_PP_VARIADIC_SIZE(__VA_ARGS__); \
friend struct reflector; \
template<int N, class Self> \
struct field_data {}; \
BOOST_PP_SEQ_FOR_EACH_I(REFLECT_EACH, data, BOOST_PP_VARIADIC_TO_SEQ(__VA_ARGS__))

#define REFLECT_EACH(r, data, i, x) \
PAIR(x); \
template<class Self> \
struct field_data<i, Self> \
{ \
    Self & self; \
    field_data(Self & self) : self(self) {} \
    \
    typename make_const<Self, TYPEOF(x)>::type & get() \
    { \
        return self.STRIP(x); \
    }\
    typename boost::add_const<TYPEOF(x)>::type & get() const \
    { \
        return self.STRIP(x); \
    }\
    const char * name() const \
    {\
        return BOOST_PP_STRINGIZE(STRIP(x)); \
    } \
}; \ 
```

这样做是生成一个常量`fields_n`，该常量是类中可反射字段的数量。然后它专门`field_data`针对每个领域。它也是`reflector`类的朋友，这样即使它们是私有的，它也可以访问这些字段：

```
struct reflector
{
    //Get field_data at index N
    template<int N, class T>
    static typename T::template field_data<N, T> get_field_data(T& x)
    {
        return typename T::template field_data<N, T>(x);
    }

    // Get the number of fields
    template<class T>
    struct fields
    {
        static const int n = T::fields_n;
    };
}; 
```

现在迭代我们使用访问者模式的字段。我们创建一个从 0 到字段数的 MPL 范围，并访问该索引处的字段数据。然后它将字段数据传递给用户提供的访问者：

```
struct field_visitor
{
    template<class C, class Visitor, class T>
    void operator()(C& c, Visitor v, T)
    {
        v(reflector::get_field_data<T::value>(c));
    }
};

template<class C, class Visitor>
void visit_each(C & c, Visitor v)
{
    typedef boost::mpl::range_c<int,0,reflector::fields<C>::n> range;
    boost::mpl::for_each<range>(boost::bind<void>(field_visitor(), boost::ref(c), v, _1));
} 
```

现在，在关键时刻，我们将它们放在一起。下面是我们如何定义`Person`类：

```
struct Person
{
    Person(const char *name, int age)
        :
        name(name),
        age(age)
    {
    }
private:
    REFLECTABLE
    (
        (const char *) name,
        (int) age
    )
}; 
```

这是广义`print_fields`函数：

```
struct print_visitor
{
    template<class FieldData>
    void operator()(FieldData f)
    {
        std::cout << f.name() << "=" << f.get() << std::endl;
    }
};

template<class T>
void print_fields(T & x)
{
    visit_each(x, print_visitor());
} 
```

一个例子：

```
int main()
{
    Person p("Tom", 82);
    print_fields(p);
    return 0;
} 
```

哪个输出：

```
name=Tom
age=82 
```

瞧，我们刚刚用 C++ 实现了反射，代码不到 100 行。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-29T17:51:38.180

我用我的通用结构到 JSON 代码解决了同样的问题。

定义一个宏： REFLECT( CLASS_NAME, MEMBER_SEQUENCE ) 其中 MEMBER_SEQUENCE 是 (name)(age)(other)(...)

将 REFLECT 扩展为类似于：

```
template<>
struct reflector<CLASS_NAME> {
  template<typename Visitor>
  void visit( Visitor&& v ) {
     v( "name" , &CLASS_NAME::name );
     v( "age",   &CLASS_NAME::age  );
     ... 
  }
} 
```

您可以使用 BOOST_PP_SEQ_FOREACH 将 SEQ 扩展到访问者。

然后定义您的打印访问者：

```
template<typename T>
struct print_visitor {
  print_visitor( T& s ):self(s){}

  template<typename R>
  void operator( const char* name, R (T::*member) )const {
     std::cout<<name<<"= "<<self.*member<<std::endl;
  } 
  T& self;
}

template<typename T>
void print( const T& val ) {
   reflector<T>::visit( print_visitor<T>(val) );
} 
```

[http://bytemaster.github.com/mace/group_ *mace* _reflect__typeinfo.html](http://bytemaster.github.com/mace/group__mace__reflect__typeinfo.html)

[https://github.com/bytemaster/mace/blob/master/libs/reflect/include/mace/reflect/reflect.hpp](https://github.com/bytemaster/mace/blob/master/libs/reflect/include/mace/reflect/reflect.hpp)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-01T18:22:34.730

恐怕您的解决方案对于这种减少的用例来说是非常理想的。我们可以提供帮助的地方是，如果您还有其他功能`print`，则可以从迭代字段中受益。

这是[Boost.Fusion](http://www.boost.org/doc/libs/1_50_0/libs/fusion/doc/html/index.html) [Fusion Sequences](http://www.boost.org/doc/libs/1_50_0/libs/fusion/doc/html/fusion/introduction.html)的完美示例；它们可用于引入编译时反射。在它之上，您可以生成更通用的运行时行为。

因此，例如，您可以使用 Fusion.Map（将您限制为每种类型的一次出现）或其他此类幻想来声明您的元素。

如果您的类型不符合融合序列（或者您不想干预其内部结构），则在[改编](http://www.boost.org/doc/libs/1_50_0/libs/fusion/doc/html/fusion/adapted.html)部分中有适配器，例如[`BOOST_FUSION_ADAPT_STRUCT`](http://www.boost.org/doc/libs/1_46_1/libs/fusion/doc/html/fusion/adapted/adapt_struct.html). 当然，由于不是所有东西都是一个`struct`（或有公共成员），还有一个更通用的类版本，它很快就会变得丑陋：[`BOOST_FUSION_ADAPT_ADT`](http://www.boost.org/doc/libs/1_50_0/libs/fusion/doc/html/fusion/adapted/adapt_adt.html).

从[快速开始](http://www.boost.org/doc/libs/1_50_0/libs/fusion/doc/html/fusion/quick_start.html)窃取：

```
struct print_xml {
    template <typename T>
    void operator()(T const& x) const {
        std::cout
            << '<' << typeid(x).name() << '>'
            << x
            << "</" << typeid(x).name() << '>'
            ;
    }
};

int main() {
    vector<int, char, std::string> stuff(1, 'x', "howdy");
    int i = at_c<0>(stuff);
    char ch = at_c<1>(stuff);
    std::string s = at_c<2>(stuff);

    for_each(stuff, print_xml());
} 
```

适配器会让你“适应”一个类型，所以你会得到：

```
struct Foo { int bar; char const* buzz; };

BOOST_FUSION_ADAPT_STRUCT(
    Foo,
    (int, bar)
    (char const*, buzz)
) 
```

接着：

```
int main() {
    Foo foo{1, "Hello");
    for_each(foo, print_xml());
} 
```

这是一个令人印象深刻的图书馆:)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-01T06:19:49.170

为什么需要使用预处理器？boost.fusion 库的介绍有一个与您的用例有些相似的示例。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-12-11T09:50:54.513

这是我的 2 美分，作为`REFLECTABLE`对保罗伟大宏的补充。我需要有一个空的字段列表，即`REFLECTABLE()`正确处理继承层次结构。以下修改处理这种情况：

```
// http://stackoverflow.com/a/2831966/2725810
#define REFLECTABLE_0(...)                                                     \
    static const int fields_n = BOOST_PP_VARIADIC_SIZE(__VA_ARGS__);           \
    friend struct reflector;                                                   \
    template <int N, class Self> struct field_data {};                         \
    BOOST_PP_SEQ_FOR_EACH_I(REFLECT_EACH, data,                                \
                            BOOST_PP_VARIADIC_TO_SEQ(__VA_ARGS__))

#define REFLECTABLE_1(...)                                                     \
    static const int fields_n = 0;

#define REFLECTABLE_CONST2(b, ...) REFLECTABLE_##b(__VA_ARGS__)

#define REFLECTABLE_CONST(b, ...) REFLECTABLE_CONST2(b,__VA_ARGS__)

#define REFLECTABLE(...)                                                      \
    REFLECTABLE_CONST(BOOST_PP_IS_EMPTY(__VA_ARGS__), __VA_ARGS__) 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-31T23:46:20.953

你需要一个元组，而不是一个类。这将轻松解决您的所有问题，而无需求助于预处理器骇客。

# css - 使小字体更粗

> ID：11031064
> 
> 赞同：4
> 
> 时间：2012-06-14T10:19:31.233
> 
> 标签：css, bold

我想知道是否有人有一个聪明的 js 或 css 技巧来使小字体更大胆。

对于客户端，我们使用字体大小为 12px/15px 和 text-transform 大写的 Courier 字体。我在文本中添加了更粗的字体粗细，但文本仍然没有 Photoshop 设计文件中的粗体。

有谁知道使小字体看起来更粗的任何技巧？

我当前的 CSS：

```
.block.project p {
    font-family: "Courier New",Courier,monospace;
    font-size: 12px;
    line-height: 15px;
    font-weight: bolder;
} 
```

我尝试使用文本阴影执行一些技巧，但这并没有给出令人满意的效果。

提前致谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-14T10:42:51.390

您可以尝试使用与字体颜色相同的颜色阴影的字体阴影。

以下其中一项可能会做到这一点：

为每个边缘添加一个模糊的字体阴影

```
text-shadow: 0px 0px 1px #000000; 
```

或者在每个字母的垂直粗细上加一个像素

```
text-shadow: 0px 1px 0px #000000; 
```

或者在每个字母的水平粗细上加一个像素

```
text-shadow: 1px 0px 0px #000000; 
```

我认为其中的第二个将是我个人的偏好。

但是，不能保证支持是 CSS3（尽管我相信这是更好支持的功能之一）并且可能会降低可读性。

[在这里找到发电机](http://css3generator.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T10:35:05.810

尝试设置`font-weight: 900;`- 它是 的最大值`font-weight`。如果没有帮助，请尝试增加`font-size;`.

此外，Photoshop 和浏览器使用**不同的渲染模型**，这就是为什么始终存在差异差异的原因。

# osgi - Nexus OSS 可以压缩虚拟 OBR 元数据吗？

> ID：11031065
> 
> 赞同：1
> 
> 时间：2012-06-14T10:19:35.603
> 
> 标签：osgi, nexus, sonatype, obr

我正在尝试使用 OBR 和 Felix 提供客户端摇摆应用程序。它可以工作，但即使在修剪了许多未使用的包之后，obr.xml 文件仍然约为 1MB。

该文件将被下载多次，即使它不是*那么*动态的。

如果我可以 gzip 那个文件，它会以大于 20 的系数压缩，剩下不到 50kb。

Nexus 可以为我做到这一点吗？我可以使用类似的东西：

[https://nexus.dexels.com/nexus/content/groups/obr/.meta/obr.gz](https://nexus.dexels.com/nexus/content/groups/obr/.meta/obr.gz)

代替：

[https://nexus.dexels.com/nexus/content/groups/obr/.meta/obr.xml](https://nexus.dexels.com/nexus/content/groups/obr/.meta/obr.xml)

我找不到任何关于此的信息，我认为这很有意义。

我正在使用 nexus-obr-plugin-2.0.1-SNAPSHOT

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T17:24:39.500

您可以通过将以下行添加到 ${nexus_root}/conf/nexus.properties 来为响应启用 gzip 压缩：

启用-restlet-编码器=真

如果 felix 客户端发送“Accept-Encoding: gzip, deflate”标头，那么响应将被压缩。

# iphone - 当我单击 iOS 中 uitableviewcell 中已经存在的文本框时，如何创建一个新单元格？

> ID：11031066
> 
> 赞同：0
> 
> 时间：2012-06-14T10:19:36.753
> 
> 标签：iphone, ios, uitableview

我正在尝试在 iPhone 中创建一个地址簿，类似于 iPhone 地址簿。当我想创建一个新联系人时，在输入值`UITextField`以输入电话号码时，它正在创建一个新的单元格`TableView`。我已经尝试了下面的代码，但它正在创建多个单元格。

```
(void)textFieldDidBeginEditing:(UITextField *)textField
{
 UITableViewCell *parentCell = (UITableViewCell *)[self.tview indexPathsForSelectedRows];        NSIndexPath *currRow = [self.tview indexPathForCell:parentCell];

[self addRow:currRow text:textField.text];    

}

(void)addRow:(NSIndexPath *)indexPath text:(NSString *)text
{
  NSIndexPath *nextRow;

    if(indexPath.section==0)
       i++;
    nextRow = [NSIndexPath indexPathForRow:i-1 inSection:indexPath.section];

        [self.tview beginUpdates];
        //    [self.tview reloadRowsAtIndexPaths:[NSArray arrayWithObject:indexPath]    withRowAnimation:UITableViewRowAnimationAutomatic];
        [self.tview insertRowsAtIndexPaths:[NSArray arrayWithObject:nextRow] withRowAnimation:UITableViewRowAnimationAutomatic];
        [self.tview endUpdates];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T10:56:16.120

```
in your code [self.tview indexPathsForSelectedRows];  
does not return the selected cell while it returns the array of index path ... that's why its creating a multiple row 
```

制作一个自定义 UITextViewClass 并拥有一个带有 NSIndexPath 的属性；
并将其分配给索引路径的行的单元格...

```
yourTextView.yourIndexPath = indexPath;

//the try to use this method

(void)textFieldDidBeginEditing:(UITextField *)textField {

    [self addRow:indexPath text:textField.text];
}

// then add your row as you want.... 
```

希望对你有帮助

# android - 关于getContentResolver()查询CallLog

> ID：11031067
> 
> 赞同：3
> 
> 时间：2012-06-14T10:19:39.107
> 
> 标签：android, calllog, resolver

```
 Cursor c = getContentResolver().query(CallLog.Calls.CONTENT_URI, null, null, null, null);
    for (int i = 0; i < c.getColumnCount(); i++) {
        Log.i(getClass().getName(), "retrieveCall(): " + c.getColumnName(i));
    } 
```

我可以在 4.0.x 中获得所有列名，但在 4.0.x 下只能获得 _id。我的代码怎么了？提前谢谢！

```
 Cursor c = getContentResolver().query(CallLog.Calls.CONTENT_URI, null, null, null, null);
    for (int i = 0; i < c.getColumnCount(); i++) {
        Log.i(getClass().getName(), "retrieveCall(): " + c.getColumnName(i));
    }

    while (c.moveToNext()) {
        for (int i = 0; i < c.getColumnCount(); i++) {
            Log.i(getClass().getName(), "retrieveCall(): " + c.getColumnName(i) + " = " + c.getInt(i) + "/" + c.getString(i));
        } ... 
```

上面的代码在 4.0.x 中运行良好，我猜数据库有一些差异？

@Anu，这是我的完整代码，如果发现有问题请告诉我：

```
private void retrieveCall()
{
    Cursor c = getContentResolver().query(CallLog.Calls.CONTENT_URI, null, null, null, null);

    if (c != null) {
        while (c.moveToNext()) {
            String number = c.getString(c.getColumnIndex("number"));
            String name = c.getString(c.getColumnIndex("name"));
            long date = c.getLong(c.getColumnIndex("date"));

            if (number.length() > 0) {
                LogDetail log = null;
                if (_callTable.containsKey(number)) {
                    log = (LogDetail) _callTable.get(number);
                    log.name = name;
                    log.date = date;
                    log.amount++;
                } else {
                    log = new LogDetail();
                    log.name = name;
                    log.date = date;
                    log.amount = 1;
                }
                _callTable.put(number, log);
            }
        }
        c.close();
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T11:19:39.547

试试这个.....它对我有用......

```
 Cursor c1 = getContentResolver().query(CallLog.Calls.CONTENT_URI,null,null,null,null); 
  for(int i=0;i<c1.getColumnCount();i++){
    Log.i("Column name", ""+c1.getColumnName(i));
         } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T10:27:06.783

不要忘记移动的位置`Cursor`

利用：

```
Cursor c = getContentResolver().query(CallLog.Calls.CONTENT_URI, null, null, null, null);
while (c.moveToNext()) {
    Log.i(getClass().getName(), "retrieveCall(): " + c.getColumnName(i));
} 
```

# c++ - c++ winapi线程

> ID：11031068
> 
> 赞同：1
> 
> 时间：2012-06-14T10:19:46.193
> 
> 标签：c++, multithreading

这些天来，我正在尝试了解有关 Windows 中线程的更多信息。我想过做这个实际的应用程序：

假设按下“开始”按钮时启动了多个线程。假设这些线程是密集的（它们一直在运行/总是有一些工作要做）。

这个应用程序还有一个“停止”按钮。当按下此按钮时，所有线程都应该以一种很好的方式关闭：释放资源并放弃工作并返回它们在按下“开始”按钮之前的状态。

该应用程序的另一个要求是线程运行的函数不应包含任何检查“停止”按钮是否被按下的指令。线程中运行的函数不应该关心停止按钮。

语言：C++

操作系统：Windows

问题：

```
WrapperFunc(function, param)    
{
     // what to write here ?
     // if i write this:
     function(param);
     // i cannot stop the function from executing
} 
```

*   我应该如何构造包装函数以便可以正确停止线程？（不使用 TerminateThread 或其他一些功能）

*   如果程序员动态分配一些内存怎么办？如何在关闭线程之前释放它？（请注意，当我按下“停止按钮”时，线程仍在处理数据）我想重载新运算符或只是强加使用预定义函数以在动态分配内存时使用. 然而，这意味着使用这个 api 的程序员受到了限制，这不是我想要的。

谢谢

编辑：骨架来描述我想要实现的功能。

```
struct wrapper_data
{
      void* (*function)(LPVOID);
      LPVOID *params;
};

/* 
this function should make sure that the threads stop properly
( free memory allocated dynamically etc )
*/
void* WrapperFunc(LPVOID *arg)    
{
     wrapper_data *data = (wrapper_data*) arg;
     // what to write here ?
     // if i write this:
     data->function(data->params);
     // i cannot stop the function from executing
     delete data;
}

// will have exactly the same arguments as CreateThread
MyCreateThread(..., function, params, ...)
{
    // this should create a thread that runs the wrapper function
    wrapper_data *data = new wrapper_data;
    data->function = function;
    data->params = params;

    CreateThread(..., WrapperFunc, (LPVOID) wrapper_data, ...);
}

thread_function(LPVOID *data)
{
   while(1)
   {
        //do stuff
   }
}

// as you can see I want it to be completely invisible 
// to the programmer who uses this
MyCreateThread(..., thread_function, (LPVOID) params,...); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T10:55:15.283

请参阅我对这个类似问题的回答：

[如何保证快速关闭我的 win32 应用程序？](https://stackoverflow.com/questions/209086/how-do-i-guarantee-fast-shutdown-of-my-win32-app)

基本上，您可以使用 QueueUserAPC 对引发异常的 proc 进行排队。异常应该一直冒泡到您的线程过程中的“捕获”。

只要您使用的任何库都具有合理的异常感知能力并使用 RAII，它就非常有效。但是，我还没有成功地使用 boost::threads 进行此操作，因为它不会将挂起的线程置于可警报的等待状态，因此 QueueUserAPC 无法唤醒它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T10:55:33.920

如果您不希望线程将执行的函数的“程序员”处理“停止”事件，请让线程执行处理“停止”事件的“你”函数以及该事件何时发生t 发出信号执行“程序员”功能...

换句话说，“while(!event)”将在一个调用“job”函数的函数中。

代码示例。

```
typedef void (*JobFunction)(LPVOID params); // The prototype of the function to execute inside the thread

struct structFunctionParams
{
    int iCounter;
    structFunctionParams()
    {
        iCounter = 0;
    }
};

struct structJobParams
{
    bool bStop;
    JobFunction pFunction;
    LPVOID pFunctionParams;
    structJobParams()
    {
        bStop = false;
        pFunction = NULL;
        pFunctionParams = NULL;
    }
};

DWORD WINAPI ThreadProcessJob(IN LPVOID pParams)
{
    structJobParams* pJobParams = (structJobParams*)pParams;
    while(!pJobParams->bStop)   
    {
        // Execute the "programmer" function
        pJobParams->pFunction(pJobParams->pFunctionParams);
    }   

    return 0;
}

void ThreadFunction(LPVOID pParams)
{
    // Do Something....
    ((structFunctionParams*)pParams)->iCounter ++;
}

int _tmain(int argc, _TCHAR* argv[])
{   
    structFunctionParams stFunctionParams;

    structJobParams stJobParams;
    stJobParams.pFunction = &ThreadFunction;
    stJobParams.pFunctionParams = &stFunctionParams;

    DWORD dwIdThread = 0;
    HANDLE hThread = CreateThread( 
        NULL,
        0, 
        ThreadProcessJob,
        (LPVOID) &stJobParams, 0, &dwIdThread);
    if(hThread) 
    {   
            // Give it 5 seconds to work
        Sleep(5000);
        stJobParams.bStop = true; // Signal to Stop
        WaitForSingleObject(hThread, INFINITE); // Wait to finish
        CloseHandle(hThread);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T10:24:34.133

一种解决方案是使用某种信号告诉线程停止工作。通常这可以是一个全局布尔变量，通常是`false`，但当设置为`true`它时，它会告诉线程停止。至于清理，在线程主循环完成后再从线程返回之前进行。

即是这样的：

```
volatile bool gStopThreads = false;  // Defaults to false, threads should not stop

void thread_function()
{
    while (!gStopThreads)
    {
        // Do some stuff
    }

    // All processing done, clean up after my self here
} 
```

* * *

至于清理位，如果您将数据保存在结构或类中，则可以从线程外部强行杀死它们，`delete`如果动态分配它们，则可以只杀死实例，或者如果在堆栈上创建，则让系统处理它或作为全局对象。当然，你的线程分配的所有数据（包括文件、套接字等）都必须放在这个结构或类中。

* * *

在包装器中保留停止功能的一种方法是在包装器中包含实际的主循环，以及对停止信号的检查。然后在主循环中调用一个类似`doStuff`的函数来进行实际处理。但是，如果它包含可能需要时间的操作，您最终会再次遇到第一个问题。

# mysql - 查询形成

> ID：11031071
> 
> 赞同：0
> 
> 时间：2012-06-14T10:19:52.527
> 
> 标签：mysql, sql, mybatis

我想编写一个查询以从 x 表和 y 表中删除，其中 object id="123" 从 z 表中为 'z' 表中的给定名称选择对象 id。如何为此编写 sql 查询？

请告诉我 。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T10:23:36.610

您不能同时从两个表中删除。您需要两个删除语句。

```
DELETE
  x
WHERE
  object_id IN (SELECT object_id FROM z WHERE name = 'whatever')

DELETE
  y
WHERE
  object_id IN (SELECT object_id FROM z WHERE name = 'whatever') 
```

我用过`IN`以防万一您有多个具有相同名称的对象。您可能希望更改该行为以满足您的需要。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-14T10:41:50.120

尝试这个..

```
delete t1,t2 from x t1 inner join y t2 on t1.id=t2.id where t1.id in 
(SELECT object_id FROM z WHERE name = 'YourName'); 
```

经测试`Mysql`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T02:56:02.673

从单个批次（池）中的不同表中删除是一个同步过程，即它一个一个地执行，因此您需要编写2个不同的查询来根据您的要求删除任何数据。

假设给定名称只有 1 个数据
DELETE X
WHERE object_id = object_id FROM Z WHERE name = 'name'
DELETE y
WHERE object_id = object_id FROM z WHERE name ='name'

这提供了比“IN”更好的性能

好吧，如果您对一个名称有多个记录，那么您必须使用“IN”

# shell - 如何在 shell 脚本中的选项之前有一个位置参数？

> ID：11031072
> 
> 赞同：1
> 
> 时间：2012-06-14T10:19:54.900
> 
> 标签：shell, unix, arguments, sh, getopts

我想要一个 shell 脚本，它将文件名作为第一个位置参数，后跟选项（`./test.sh <file> [options]`）。但是，当我在选项之前给出位置参数时，getopts 不起作用。我有以下代码：

```
while getopts "h" opt; do
  case $opt in
    h) 
      echo usage
      ;;
      ;;
  esac
done

echo $1 
```

`./test.sh -h`在外壳上打印`usage`，但在外壳上`./test.sh test -h`打印`test`。因此，当我在选项之前给出位置参数时，它不会对该选项做任何事情。在选项后面有位置参数时它确实有效（更改`echo $1`为`echo $BASH_ARGV`和调用`./test.sh -h test`）。我怎样才能在选项之前有位置参数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T13:20:51.190

shell 内置 getopts 不支持重新排序参数。如果您想要参数重新排序，您需要使用增强的 getopt 变体之一（例如 gnu getopt 或 bsd getopt）。请注意，默认的 bsd getopt 不支持长选项（例如在 Mac OS X 上使用时）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T10:26:57.560

尝试将“h”替换为h

```
while getopts h opt; do... 
```

而且您还必须在您的情况下添加减号

```
case "$opt" in
 -h)... 
```

如果您知道，您的 [file] 将始终存在，您可以使用

```
filename="$1"
shift 
```

而不是解析其他参数

# ruby-on-rails-3 - 空气制动似乎没有在生产中记录错误

> ID：11031074
> 
> 赞同：0
> 
> 时间：2012-06-14T10:20:01.453
> 
> 标签：ruby-on-rails-3, airbrake

我在我的应用程序中设置了 airbrake，但它似乎没有记录我在生产中遇到的任何 500 错误。该错误很可能是动作邮件问题，但 Airbrake 没有发现此错误。

此时我的应用程序中没有自定义错误处理将其删除。什么是确定它为什么不记录的好方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T00:16:14.267

首先，请确保您使用的是最新的 GEM [http://rubygems.org/gems/airbrake](http://rubygems.org/gems/airbrake)。

请将支持票发送至 support@airbrake.io，我们将尽最大努力为您解决此问题。

# c# - 如何将击键发送到应用程序 UI 自动化 -C#

> ID：11031081
> 
> 赞同：3
> 
> 时间：2012-06-14T10:20:17.427
> 
> 标签：c#, c#-4.0, automation

我需要找出关键板值的自动化ID？如何将击键发送到应用程序 UI 自动化？我需要自动化键盘中的向上翻页和向下翻页功能。最好的方法是什么？

**编辑：** 在我的申请中遵循这个过程。假设最终用户打开了 5 页的 MS Word 文档，并且他按下向上翻页和向下翻页按钮在这些页面内移动。我想使用 c# 自动化这个场景。目前我使用 UIAutomationClient.dll 和 UIAutomationTypes.dll。我可以用这些吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T10:26:48.120

[AutoIt 自动化和脚本语言](http://www.autoitscript.com/site/autoit/)是自动发送各种击键的一个非常好的方法。可以用它做很多事情，尤其是向上翻页和向下翻页发送。

我建议使用 autoit 编写一个 EXE，它将自身连接到它将发送击键的程序。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-03-12T17:14:55.020

1.  使用 P/Invoke 激活应用程序的窗口。
2.  `SendWait("C")`用任何字符调用。

例如

```
// Get a handle to an application window.
[DllImport("USER32.DLL", CharSet = CharSet.Unicode)]
public static extern IntPtr FindWindow(string lpClassName, string lpWindowName);

// Activate an application window.
[DllImport("USER32.DLL")]
public static extern bool SetForegroundWindow(IntPtr hWnd);

// Send a series of key presses to the Calculator application. 
private void button1_Click(object sender, EventArgs e)
 {
    // Get a handle to the Calculator application. The window class 
    // and window name were obtained using the Spy++ tool.
    IntPtr calculatorHandle = FindWindow("CalcFrame","Calculator");

    // Verify that Calculator is a running process. 
    if (calculatorHandle == IntPtr.Zero)
    {
        MessageBox.Show("Calculator is not running.");
        return;
    }

    // Make Calculator the foreground application and send it  
    // a set of calculations.
    SetForegroundWindow(calculatorHandle);
    SendKeys.SendWait("111");
    SendKeys.SendWait("*");
    SendKeys.SendWait("11");
    SendKeys.SendWait("=");
} 
```

请参阅[如何：在代码中模拟鼠标和键盘事件](http://msdn.microsoft.com/en-us/library/ms171548%28v=vs.110%29.aspx)>“将击键发送到不同的应用程序”

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-14T10:25:17.333

我认为您想将击键发送到您没有源代码的应用程序。
我无法帮助您告诉您如何直接在 C# 中执行此操作。
但是您可以使用[AutoIt](http://www.autoitscript.com/site/autoit/)轻松完成；它有一个你可以在 C# 中引用的 DLL 来完全满足你的需要。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-14T11:32:48.293

您是否阅读过 [如何向进程发送密钥而不是字符？](https://stackoverflow.com/questions/2274668/how-to-send-keys-instead-of-characters-to-a-process)

这会准确地告诉您如何将密钥发送到应用程序。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-10-31T05:09:53.437

// 使用 Windows 窗体并将此列表与发送键一起使用 [https://www.autoitscript.com/autoit3/docs/appendix/SendKeys.htm](https://www.autoitscript.com/autoit3/docs/appendix/SendKeys.htm) 我很确定他只是在询问他的 SendKey.Send 的键值("{}");

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-18T10:51:32.457

在这种情况下，将 word 文档置于前台，然后在屏幕键盘上
`System.Diagnostics.Process.Start("osk.exe");`使用并使用鼠标输入单击向上和向下翻页按钮，因为鼠标单击需要向上和向下翻页按钮的屏幕坐标。

（我尝试使用 UI 自动化检测屏幕键盘。但它没有检测到屏幕的键 [。https://stackoverflow.com/questions/11077738/windows-sdk-inspect-tool-what-are-the-reasons -on-screen-keyboard-does-not-disp](https://stackoverflow.com/questions/11077738/windows-sdk-inspect-tool-what-are-the-reasons-on-screen-keyboard-does-not-disp)找不到此问题的解决方案。因此，我使用此移动单击方法单击按钮。）

# linux - 仅将修改后的文件从一台主机复制到另一台主机

> ID：11031083
> 
> 赞同：2
> 
> 时间：2012-06-14T10:20:21.887
> 
> 标签：linux, copy-paste

我正在使用 scp 将文件从一台主机复制到另一台主机。但目前它正在复制所有文件并覆盖现有文件。

如何仅复制那些修改过的文件。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T15:35:46.277

使用 rsync - 查看手册页了解更多信息： http: [//linux.die.net/man/1/rsync](http://linux.die.net/man/1/rsync)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-14T11:46:36.043

似乎`scp`无法做到这一点，但`rsync`可以通过使用 parameter `-a`。它还提供了各种其他有趣的选项。我总是试图更喜欢`rsync`，`scp`但这只是我个人的看法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-27T12:11:55.003

```
rsync -rut /your/diectory user@targetip:/target/location 
```

它可能会有所帮助。

# javascript - 在 UIWebView 中的位置获取 HTML 元素

> ID：11031084
> 
> 赞同：0
> 
> 时间：2012-06-14T10:20:27.173
> 
> 标签：javascript, iphone, objective-c, ios, uiwebview

我试图在 UIWebView 的视图中获取最顶层的元素。

我一直在努力

```
NSString *topElementInView = [self.webView stringByEvaluatingJavaScriptFromString: @"document.elementFromPoint(0, 0);"]; 
```

但它没有返回任何东西。代码在 WebView 加载完成后运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-15T19:19:35.877

here is an example ViewController.m:

```
#import "ViewController.h"

@interface ViewController () <UIWebViewDelegate>

@property (nonatomic) UIWebView *webView;

@end

@implementation ViewController

- (void)viewDidLoad {
    [super viewDidLoad];

    NSString *HTML = @"<!DOCTYPE html> <html> <head> <title></title> <meta http-equiv=\"content-type\" content=\"text/html; charset=“utf-8\"> <!-- Internal CSS --> <style type=\"text/css\"> </style> <!-- Extrernal CSS --> <link rel=\"stylesheet\" href=\"css/normalize.css\"> <!-- jQuery  --> <script src=\"http://code.jquery.com/jquery.min.js\" type=\"text/javascript\"></script> <!-- Internal JavaScripts --> <script type=\"text/javascript\"> </script> </head> <body> <a href=\"https://www.google.com/images/srpr/logo11w.png\"> <img src=\"https://www.google.com/images/srpr/logo11w.png\" alt=\"google\"> <p>This is a Google image.</p> </a> </body> </html>";

    self.webView = [[UIWebView alloc] initWithFrame:CGRectMake(0, 0, self.view.frame.size.width, self.view.frame.size.height)];
    [self.view addSubview:self.webView];

    self.webView.delegate = self;

    [self.webView loadHTMLString:HTML baseURL:nil];

}

- (void)webViewDidFinishLoad:(UIWebView *)webView {
    NSString *htmlInner = [self.webView stringByEvaluatingJavaScriptFromString:@"document.body.innerHTML"];
    NSLog(@"inner\n%@",htmlInner);

    NSString *htmlOuter = [self.webView stringByEvaluatingJavaScriptFromString:@"document.documentElement.innerHTML"];
    NSLog(@"outer\n%@",htmlOuter);
} 
```

* * *

## 回答 #2

> 赞同：-6
> 
> 时间：2012-06-14T10:46:37.753

```
- (void)viewDidLoad {   
 js=dic;
//NSString *js;  (.h)
[self.myWebView loadHTMLString:js baseURL:nil];
} 
```

//代表

```
- (void)webViewDidFinishLoad:(UIWebView *)webView {
[myWebView stringByEvaluatingJavaScriptFromString:js];
} 
```

# symfony - Symfony2 路由在 prod 环境中的行为不同

> ID：11031085
> 
> 赞同：1
> 
> 时间：2012-06-14T10:20:27.867
> 
> 标签：symfony, routing, production-environment

我想不通这个。

首先让我说我的缓存被清除了。我什至删除了 app/cache 中的 prod 和 dev 目录。所以这不是未更新的产品路线的问题。

这是我的路由器：调试输出：

**产品：**应用程序/控制台路由器：调试 --env=prod：

```
[router] Current routes
Name            Method Pattern
instrumentlabel ANY    /backend/instrumentlabel/{page}/{filter}
marketmapping   ANY    /backend/marketmapping/{page}/{filter} 
```

**开发：**应用程序/控制台路由器：调试 --env=dev

```
[router] Current routes
Name            Method Pattern
instrumentlabel ANY    /backend/instrumentlabel/{page}/{filter}
marketmapping   ANY    /backend/marketmapping/{page}/{filter} 
```

两者都是相同的（我的配置没有区别）。

访问`/backend/instrumentlabel`在两种环境中都有效。但是当我尝试访问`/backend/marketmapping`它时，它只能在开发环境中工作。

在 prod 环境中，我总是`/backend/marketmapping/`无缘无故地被重定向到（注意前导斜杠）。

我`prod.log`简单地说：

```
 request.ERROR: [...]: No route found for "GET /backend/marketmapping/" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T10:35:21.347

事实证明，**这实际上是浏览器缓存问题**。

我意识到 FireFox 声明`/backend/marketmapping`永久移动（HTTP 301）到`/backend/marketmapping/`.

一周前，我不得不更改路由。在此之前，Symfony2 必须已经`/backend/marketmapping`使用 301 来响应请求`/backend/marketmapping/`。我的 FireFox 缓存了该信息（但仅在 prod 环境中，在 dev 中这是一个 302，浏览器不得缓存）。

在我检查了 Opera 中一切正常的路线后，我意识到了这一点。

敬启者：

要强制 FireFox 忘记缓存重定向，您可以按照以下说明进行操作：

[http://forums.mozillazine.org/viewtopic.php?f=38&t=1995719](http://forums.mozillazine.org/viewtopic.php?f=38&t=1995719)

* * *

有趣的是，您的大多数问题在您提出问题后立即得到了自己的回答。

# html - 如何使用 .htaccess 从同一 URI 提供单独的移动和桌面页面？

> ID：11031091
> 
> 赞同：7
> 
> 时间：2012-06-14T10:20:51.573
> 
> 标签：html, .htaccess, redirect, mobile

我的网络服务器上有两个 html 页面

```
www.example.com/desktop.html

www.example.com/mobile.html 
```

原则上两者的内容和功能是相同的，尽管标记不同（mobile.html 是在 jquery mobile 上构建的）。

我想做的是为所有移动访问者提供服务（`www.example.com/mobile.html`如果他们是移动的），`www.example.com/desktop.html`否则请保留`www.example.com`在地址栏中，而与设备无关。

此外，一旦访问者在任一页面上，我想提供指向另一个版本的链接，并将此首选项另外存储在 cookie 中，如果/当他们在后续访问中返回时默认提供它。

**我怎样才能做到这一点？**

我也想借此机会说明我是多么喜欢堆栈溢出，它解决了我遇到的许多问题。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-17T15:43:55.527

将此添加到您的 .htaccess 文件中：

```
RewriteEngine On

RewriteCond %{HTTP_USER_AGENT} (android|avantgo|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge\ |maemo|midp|mmp|opera\ m(ob|in)i|palm(\ os)?|phone|p(ixi|re)\/|plucker|pocket|psp|symbian|treo|up\.(browser|link)|vodafone|wap|windows\ (ce|phone)|xda|xiino) [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^(1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a\ wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r\ |s\ )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1\ u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp(\ i|ip)|hs\-c|ht(c(\-|\ |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac(\ |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt(\ |\/)|klon|kpt\ |kwc\-|kyo(c|k)|le(no|xi)|lg(\ g|\/(k|l|u)|50|54|e\-|e\/|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(di|rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-|\ |o|v)|zz)|mt(50|p1|v\ )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v\ )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-|\ )|webc|whit|wi(g\ |nc|nw)|wmlb|wonu|x700|xda(\-|2|g)|yas\-|your|zeto|zte\-) [NC]
RewriteRule ^$ /mobile.html [L]
RewriteRule ^$ /desktop.html [L] 
```

我`%{HTTP_USER_AGENT}`在 Rob W 的评论中从该链接中获取了匹配项。您可能想修改它或尝试在某个地方的谷歌上找到更完整的。这实质上检查了用户代理是否是移动的，如果是，则在`/`内部将请求重写为`/mobile.html`，否则将其重写为`/desktop.html`。由于这是内部重写，因此浏览器上的 URL 位置栏仍然是`www.example.com`.

# iphone - ios5.1在iphone状态栏顶部添加一个UIView

> ID：11031094
> 
> 赞同：3
> 
> 时间：2012-06-14T10:21:01.600
> 
> 标签：iphone, ios5, uikit

我正在尝试在状态栏顶部添加一个视图。我一直在关注这个 SO 帖子：[在 iPhone 中的 StatusBar 上添加视图](https://stackoverflow.com/questions/2833724/adding-view-on-statusbar-in-iphone)

出于某种原因，当我创建窗口并将隐藏设置为 NO 时，视图似乎不会显示在状态栏的顶部。这个实现在 ios5.1 中仍然有效吗？

谢谢！

这是我的自定义 UIWindow 类：

```
@implementation StatusBarOverlay

- (id)initWithFrame:(CGRect)frame
{
self = [super initWithFrame:frame];
if (self) {
    // Place the window on the correct level and position
    self.hidden = NO;
    self.windowLevel = UIWindowLevelStatusBar+1.0f;
    self.frame = [[UIApplication sharedApplication] statusBarFrame];

    // Create an image view with an image to make it look like a status bar.
    UIImageView *backgroundImageView = [[UIImageView alloc] initWithFrame:self.frame];
    backgroundImageView.image = [UIImage imageNamed:@"bar_0.png"];
    backgroundImageView.animationImages = [NSArray arrayWithObjects:[UIImage     imageNamed:@"bar_1.png"],
                                           [UIImage imageNamed:@"bar_2.png"],
                                           [UIImage imageNamed:@"bar_3.png"],
                                           nil];
    backgroundImageView.animationDuration = 0.8;
    [backgroundImageView startAnimating];
    [self addSubview:backgroundImageView];
}
return self;
} 
```

在我的视图控制器中，我创建了新窗口并在 viewDidLoad 中调用它：

```
StatusBarOverlay *overlayWindow = [[StatusBarOverlay alloc] initWithFrame:CGRectZero];
[overlayWindow makeKeyAndVisible]; 
```

但是，视图仍然没有显示。知道为什么吗？

![使用私有 api 显示错误的屏幕截图](../Images/d1400de0a18a3a29f6b30b739be5bbc6.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-26T10:41:41.207

将应用程序的窗口级别设置为 UIWindowLevelStatusBar：

```
self.window.windowLevel = UIWindowLevelStatusBar; 
```

然后将您自己的视图添加到应用程序窗口的任何位置：

```
[[[UIApplication sharedApplication]delegate].window addSubview:yourview]; 
```

这个问题最近来找我，我就是通过这种方式解决的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T10:45:19.573

您可以创建一个新的`UIWindow`并将您的视图添加到其中。将窗口框架设置为`[[UIApplication sharedApplication] statusBarFrame]`并调用`makeKeyAndVisible`以使其可见。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T12:16:01.543

最后，我对 UIWindow 进行了子类化，并将其作为应用程序 AppDelegate 中的主要 UIWindow。我添加了任何自定义视图并将窗口级别设置为 UIWindowLevelStatusBar 以显示在状态栏的顶部。

# php - “使用 $_GET 而不是新文件”的机制是什么？

> ID：11031095
> 
> 赞同：0
> 
> 时间：2012-06-14T10:21:02.210
> 
> 标签：php, methods, get

我看到一些网站（例如）：如果你想查看你的消息框，那么它是：`example.com/file.php?action=pm`如果你想再次发送消息，地址和文件是相同的，但`$_GET`不同：`example.com/file.php?action=sendpm`

它是如何工作的？

仅仅是：

```
if ($_GET['action'] == "pm")
{
    //lots of html code(divs, forms, etc) paste here for action=pm.
}
else
{
    //lots of html code paste here for action=send
} 
```

而不是有文件：pm.php，send.php ...？或者机制不同？

我看到 SMF 使用这种机制，我也看到了 facebook.com/?ref=something 的类似内容。

它是如何工作的？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-14T10:23:54.347

最简单的方法是这样的：

```
$action = isset($_GET['action']) ? $_GET['action'] : 'default';
if(!in_array($action, array('list', 'of', 'allowed', 'pages')))
    $action = 'default';
include($action . '.php'); 
```

请注意，验证步骤**非常重要**。未正确验证该值会导致令人讨厌的安全漏洞，因为用户能够读取您的脚本可以访问的任何文件，而用户能够执行任意代码。

像您在问题中建议的那样将所有代码放在一个文件中是一个坏主意，因为它会导致代码不可读。尤其是在您建议的问题中将 PHP 和 HTML 混合在同一个文件中时（提示：使用模板引擎！）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T10:31:47.000

这称为路由，允许单个入口点访问单个应用程序中的许多功能。

请求被接受、处理并路由到更正功能。这种路由模式非常适合用于组织代码的模型视图控制器 (MVC) 模式。

看看 Zend 框架如何描述 MVC 和路由： http: [//framework.zend.com/manual/en/learning.quickstart.intro.html#learning.quickstart.intro.mvc](http://framework.zend.com/manual/en/learning.quickstart.intro.html#learning.quickstart.intro.mvc)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T10:24:57.020

你可以有一个 switch 语句。例如

```
 example.com/file.php?action=pm or example.com/file.php?action=sendpm

if (isset($_REQUEST['action'])) {
$param = $_REQUEST['action'];
    switch($param) {
    case "pm":
        // Code goes here
        break;
    case "sendpm":
        // Do something here
        break;
    default:
        // handle the default case
        break;
    }
} else {
    // Handle it here
} 
```

好吧，甚至还有其他方法可以做到！切换是最简单的方法之一！

# python - 如何定义引用它自己的模型的django外键limit_choices_to约束？

> ID：11031097
> 
> 赞同：1
> 
> 时间：2012-06-14T10:21:10.747
> 
> 标签：python, django-models, foreign-key-relationship, limit-choices-to

这是模型。我需要避免在 FilterValue 模型中引用 FilterValue 模型中已经在 FilterValue 模型中引用的对象。

```
 class Filter(models.Model):
        name = models.CharField('Name', max_length=255)

    class FilterValue(models.Model):
        name = models.CharField('Name', max_length=255)
        filter = models.ForeignKey(Filter, limit_choices_to=Q(***?***)) 
```

我正在寻找什么可以代替***？***.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T13:11:59.453

你不能那样做，但你可以把它作为表单的一部分。具体来说，在`__init__`表单的方法中，您可以更改相关字段的查询集。

[我在 django.contrib.admin 表单](http://schinckel.net/2011/07/20/filtering-querysets-in-django.contrib.admin-forms/)中过滤查询集的管理员中写了如何做到这一点

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T15:31:39.380

正如我从 OP 的评论中了解到的那样，这个想法是禁止添加重复的条目。

但是有一种更安全的方法：

```
class FilterValue(models.Model):
    name = models.CharField('Name', max_length=255)
    filter = models.ForeignKey(Filter)

    class Meta:
        unique_together = (("name", "filter"),) 
```

最初的解决方案将仅在表单中的管理员中显示过滤器列表，但实际上并不会禁止以编程方式添加重复项。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T06:48:40.563

我以另一种方式通过在管理员**中使 FilterValueAdmin只编辑并在****FilterAdmin**模型中添加与内联相同的内容来做到这一点。

```
class FilterValueInline(admin.StackedInline):
   formset = FilterValueInlineFormset
   model = FilterValue
   max_num = 1
   can_delete = False

class FilterAdmin(admin.ModelAdmin):
   list_display = ('id', 'name')
   inlines = [FilterValueInline]

class FilterValueAdmin(admin.ModelAdmin):
   """Filter value has to be added via the filter table"""
   def has_add_permission(self, request):
       return False
   def has_delete_permission(self, request, obj=None):
       return False
   actions = None
   list_display = ('id', 'name', 'filter') 
```

# iphone - 如何添加下拉列表？

> ID：11031098
> 
> 赞同：0
> 
> 时间：2012-06-14T10:21:19.047
> 
> 标签：iphone, ios

我需要创建一个包含一些语言的下拉列表。通过选择此列表中的任何语言，它应该列出相应的语言详细信息，例如，如果我选择英语，那么它将列出英语歌曲。所有细节都来自一个网址。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T10:26:33.420

我认为你需要手风琴视图，看看[这个](https://stackoverflow.com/questions/1944428/how-to-implement-an-accordion-view-for-an-iphone-sdk-app)问题，[这个](http://developer.apple.com/library/ios/#samplecode/TableViewUpdates/Introduction/Intro.html#//apple_ref/doc/uid/DTS40010139-Intro-DontLinkElementID_2)样本也会给出正确的想法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T10:40:12.007

您可以为此使用弹出窗口。在弹出窗口中，创建一个表格视图来显示各种选项。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T11:19:09.080

使用 a`UIPickerView`作为下拉列表。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-01T16:53:37.130

如果您考虑一下，操作表基本上是一个下拉列表。如果你继续向 UIActionSheet 添加按钮，它最终会变成一个表格。因此，只需让您的按钮调用 UIActionSheet。

尝试将 7 个或更多按钮添加到 UIActionSheet 并观察它变成一个列表。它方便。

![在此处输入图像描述](../Images/f755adcd66be4756e46c55fb9565c784.png)

# jquery - 对 HTTPS 的 Ajax 调用失败

> ID：11031099
> 
> 赞同：4
> 
> 时间：2012-06-14T10:21:22.150
> 
> 标签：jquery, ajax, spring-mvc, https, spring-security

我正在尝试调用我的 Spring-MVC 控制器，该控制器将负责使用 Spring 安全性继续使用登录/授权机制。

这是要求

1.  Spring security 需要有来自 HTTPS 的请求，否则会抛出错误。

我按照以下教程完成了这个[/implementing_ajax_authentication_using_jquery](http://raibledesigns.com/rd/entry/implementing_ajax_authentication_using_jquery)。

这是我的一段 Jquery 代码

```
jQuery("#loginForm").submit(function(e) {
        e.preventDefault();
        jQuery.ajax({
            url: "https://localhost:9002/myApp/springSecurity/login.json",
            beforeSend: function(xhr) {
                xhr.withCredentials = true;
            },
            type: "POST",
            data: jQuery("#loginForm").serialize(),
            dataType: 'application/json',

            success: function(data, status) {

                if (data.loggedIn) {
                   // location.href = getHost() + '${ctx}/users';
                    //login_pannel
                    alert("jai ho");
                } else {
                    loginFailed(data);
                }
            },
            error: loginFailed
        });

    }); 
```

为了处理跨域问题，我创建了一个过滤器并将其放在我的 web.xml 中，并带有以下条目

```
response.setHeader("Access-Control-Allow-Origin", "http://" + req.getServerName());
response.setHeader("Access-Control-Allow-Methods", "GET,POST");
response.setHeader("Access-Control-Max-Age", "360");
response.setHeader("Access-Control-Allow-Headers", "x-requested-with");
response.setHeader("Access-Control-Allow-Credentials", "true"); 
```

## 弹簧控制器

```
@RequestMapping(method = RequestMethod.POST)
@ResponseBody
public SpringSecurityLoginStatus login(@RequestParam("j_username") final String username,
            @RequestParam("j_password") final String password, final HttpServletRequest request, final HttpServletResponse response)
    {

        LOG.info("Starting login process");
        return springSecurityLoginService.login(username, password, request, response);
    } 
```

但是我遇到了一个奇怪的问题，当我点击提交按钮时，浏览器正在向安全 URL 发送请求，`https://localhost:9002/myApp/springSecurity/login.json`但我的控制器方法从未被调用，实际上这是我在 Mozilla 错误控制台中看到的错误

![在此处输入图像描述](../Images/11322b93e3b38175af48d46d3f5419db.png)

查看控制台后，浏览器似乎再次使用 GET 方法调用，这似乎是一个重定向。

我不确定为什么会发生这种情况以及为什么浏览器使用 GET 请求静默地从 HTTPS 重定向到 HTTP

这是 Mozila 网络面板的输出

## 响应标头view source

```
Access-Control-Allow-Cred...    true
Access-Control-Allow-Head...    x-requested-with
Access-Control-Allow-Meth...    GET,POST
Access-Control-Allow-Orig...    https://localhost
Access-Control-Max-Age  360
Content-Length  0
Date    Thu, 14 Jun 2012 11:12:36 GMT
Location    http://localhost:9001/myapp/springSecurity/login.json
Server  Apache-Coyote/1.1
Set-Cookie  _system.tenantID_=""; Expires=Thu, 01-Jan-1970 00:00:10 GMT; Path=/
Request Headersview source
Accept  text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Accept-Encoding gzip, deflate
Accept-Language en-us,en;q=0.5
Connection  keep-alive
Cookie  JSESSIONID=26BEEB7DC056D2A5F08D107E3D4BCDDB; __atuvc=4|22; secureGUID=60be684d748027c1f567eadead08f28771ab7d25; JSESSIONID=4E2300220697C799AF4539ABCB9108DD
Host    localhost:9002
Referer http://localhost:9001/myapp/
User-Agent  Mozilla/5.0 (Windows NT 6.1; WOW64; rv:12.0) Gecko/20100101 Firefox/12.0 
```

## 来自缓存的响应标头

```
Access-Control-Allow-Cred...    true
Access-Control-Allow-Head...    x-requested-with
Access-Control-Allow-Meth...    GET,POST
Access-Control-Allow-Orig...    https://localhost
Access-Control-Max-Age  360
Content-Length  0
Date    Thu, 14 Jun 2012 11:12:36 GMT
Location    http://localhost:9001/myapp/springSecurity/login.json
Server  Apache-Coyote/1.1
Set-Cookie  _system.tenantID_=""; Expires=Thu, 01-Jan-1970 00:00:10 GMT; Path=/ 
```

附带说明一下，如果我将 URL 更改`http://localhost:9001/myapp/springSecurity/login.json`为 HTTP 协议，它就可以调用我的控制器。

## 响应类

```
public class SpringSecurityLoginStatus
{

    private final boolean loggedIn;
    private final String username;

    public SpringSecurityLoginStatus(final boolean loggedIn, final String username)
    {
        this.loggedIn = loggedIn;
        this.username = username;
    }

    public boolean isLoggedIn()
    {
        return loggedIn;
    }

    public String getUsername()
    {
        return username;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T11:33:19.103

看起来您还没有为 url 'login.json' 实现 'GET' 方法。

如果您查看控制器，它仅实现`POST`请求方法，但您的请求类型`GET`就是您收到此错误的原因。

你能分享你的`login`方法的返回值吗？

看起来您正在`302 moved temporarily`从登录方法返回一个状态。

# android - (XYZ) 帐户未链接到 YouTube 帐户：Android 中的 YoutTubeException

> ID：11031100
> 
> 赞同：1
> 
> 时间：2012-06-14T10:21:31.343
> 
> 标签：android, exception, youtube

从我的 android 应用程序上传视频时，我遇到了以下问题。

例外：**（XYZ）帐户未链接到 YouTube 帐户**

这是我开始上传时遇到的异常。

请让我知道，任何相同的解决方案。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T10:23:59.750

当您尝试使用尚未配置 youtube 的帐户时，会发生此异常。

使用该帐户登录 youtube 后。尝试[一次](https://accounts.google.com/ServiceLogin?uilel=3&service=youtube&passive=true&continue=http://www.youtube.com/signin?action_handle_signin=true&feature=header&nomobiletemp=1&hl=en_US&next=%252F&hl=en_US&ltmpl=sso)，然后在 android 上尝试

# java - 如何指示杰克逊序列化一个对象内的字段而不是它自己的对象？

> ID：11031110
> 
> 赞同：29
> 
> 时间：2012-06-14T10:22:19.217
> 
> 标签：java, serialization, jackson

我有一`Item`堂课。`itemType`该类中有一个 ItemType 类型的字段。

大致是这样的。

```
class Item
{
   int id;
   ItemType itemType;
}

class ItemType
{
   String name;
   int somethingElse;
} 
```

当我`Item`使用 Jackson序列化类型对象时`ObjectMapper`，它将对象序列化为`ItemType`子对象。这是预期的，但不是我想要的。

```
{
  "id": 4,  
  "itemType": {
    "name": "Coupon",
    "somethingElse": 1
  }
} 
```

我想做的是在序列化时显示`itemType`'`name`字段。

像下面的东西。

```
{
  "id": 4,  
  "itemType": "Coupon"
} 
```

反正有没有指示杰克逊这样做？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-06-14T18:12:30.617

签出`@JsonValue`注释。

编辑：像这样：

```
class ItemType
{
  @JsonValue
  public String name;

  public int somethingElse;
} 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-06-14T10:35:15.357

您需要创建和使用[自定义序列化](http://wiki.fasterxml.com/JacksonHowToCustomSerializers)程序。

```
public class ItemTypeSerializer extends JsonSerializer<ItemType> 
{
    @Override
    public void serialize(ItemType value, JsonGenerator jgen, 
                    SerializerProvider provider) 
                    throws IOException, JsonProcessingException 
    {
        jgen.writeString(value.name);
    }

}

@JsonSerialize(using = ItemTypeSerializer.class)
class ItemType
{
    String name;
    int somethingElse;
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-11-16T11:22:09.933

由于 OP 只想序列化一个字段，您还可以使用`@JsonIdentityInfo`and`@JsonIdentityReference`注释：

```
class Item {
    int id;
    @JsonIdentityInfo(generator=ObjectIdGenerators.PropertyGenerator.class, property="name")
    @JsonIdentityReference(alwaysAsId=true)
    ItemType itemType;
} 
```

有关详细信息，请参阅[如何使用 Jackson 仅序列化孩子的 ID](https://stackoverflow.com/questions/17542240/how-to-serialize-only-the-id-of-a-child-with-jackson)。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-06-25T19:43:34.507

要返回简单的字符串，您可以使用默认的 ToStringSerializer 而不定义任何额外的类。但是你必须定义 toString() 方法只返回这个值。

```
@JsonSerialize(using = ToStringSerializer.class)
class ItemType
{
   String name;
   int somethingElse;
   public String toString(){ return this.name;}
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-14T10:35:23.030

`Item`也许一个快速的解决方法是在return上添加一个额外的 getter `ItemType.name`，并将 getter 标记`ItemType`为`@JsonIgnore`?

# facebook - 我可以将翻译从一个 fb-app 导入到另一个吗？

> ID：11031111
> 
> 赞同：3
> 
> 时间：2012-06-14T10:22:21.150
> 
> 标签：facebook, translation, facebook-opengraph

我正在开发一个 facebook 应用程序，我有一个处于“沙盒模式”（我的测试应用程序）和另一个完全相等的生产应用程序。

我一直在翻译其中一个应用程序，因为我创建了一些 Open Graph 出版物，现在我想将我所做的翻译导入另一个应用程序。我看到了“导出”链接，但在其他应用程序中没有看到“导入”链接。

你能帮助我吗？

谢谢！

# asp.net-mvc-3 - 如何验证 IP 地址以响应来自 HttpWebResonse 的响应？

> ID：11031113
> 
> 赞同：0
> 
> 时间：2012-06-14T10:22:25.550
> 
> 标签：asp.net-mvc-3, c#-4.0, httpwebresponse, system.net.httpwebrequest

我正在为基于 ASP.NET MVC3(C#) 的大型电子商务网站开发支付网关。我有 PG 服务器 IP 地址，他们提供给我进行验证。
但我担心响应。

我通过以下代码向 PG 请求。

```
 HttpWebRequest myHttpWebRequest = (HttpWebRequest)WebRequest.Create(url);
   HttpWebResponse myHttpWebResponse = (HttpWebResponse)myHttpWebRequest.GetResponse();
   myHttpWebResponse.Close(); 
```

那么，当我收到响应时如何验证 IP 地址？或者有什么技术可以验证吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T10:52:34.163

没有 IP 地址作为响应。当您向给定 url 发送 HTTP 请求时，DNS 服务器会将此 url 中的域名解析为 IP 地址。因此，如果您确定将 HTTP 请求发送到正确的地址，则无需验证：`http://pg.com`. 没有办法从与您发送 HTTP 请求的 IP 地址不同的 IP 地址获得响应。

# entity-framework - 获取类别和子类别

> ID：11031114
> 
> 赞同：0
> 
> 时间：2012-06-14T10:22:31.267
> 
> 标签：entity-framework

![在此处输入图像描述](../Images/eb40a12122a35a99d43dbed09c109aae.png)

我有一个 tbl_SBAem_event 表和 tbl_SBAem_PricePackages 表。每个 tbl_SBAem_event 都由一个或多个 tbl_SBAem_PricePackages 组成。我需要获取 tbl_SBAem_event 以及相应的 tbl_SBAem_PricePackages 。我使用 MVC3 和 EF 作为 ORM。有人有这个示例代码吗？

# sql - SQL 需要基于数量来获得最受欢迎的产品

> ID：11031115
> 
> 赞同：3
> 
> 时间：2012-06-14T10:22:32.430
> 
> 标签：sql, sql-server

我目前正在尝试从我的 MSSQL 数据库中获取最受欢迎的 productID。这就是表格的样子（带有一些虚拟数据）：

订单项：

```
+--+-------+--------+---------+
|ID|OrderID|Quantity|ProductID|
+--+-------+--------+---------+
| 1|      1|       1|        1|
| 2|      1|       1|        2|
| 3|      2|       1|        1|
| 4|      2|      50|        2| 
```

OrderID 字段可以忽略，但我需要从该表中找到最流行的 ProductID，并按照它们出现的频率对其进行排序。结果集应如下所示：

```
+--------+
|PoductID|
+--------+
|       2|
|       1| 
```

由于 ProductID 2 的总数为 51，因此需要先出来，然后是 ProductID 1，它的总数仅为 2。

（注：查询需要兼容回 MSSQL-2008）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-14T10:25:39.013

```
SELECT
  productID
FROM
  yourTable
GROUP BY
  productID
ORDER BY
  SUM(Quantity) DESC 
```

`GROUP BY`允许`SUM()`，但您不必在 中使用它`SELECT`才能被允许在 中使用它`ORDER BY`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-14T10:25:48.590

```
select ProductID
from OrderItems
group by ProductId
order by sum(Quantity) desc; 
```

# sql - SQL - 不同的一个列，选择多个其他？

> ID：11031119
> 
> 赞同：1
> 
> 时间：2012-06-14T10:22:34.427
> 
> 标签：sql, sql-server-2005, distinct

我一直试图低估编写 MS SQL 2005 查询的最佳方法，该查询几乎可以执行以下操作...

```
select distinct col1, col2, col3
from table1 
```

基本上我想在 col1 上执行 Distinct，但我不想在 Col2/3 上执行 Dististinc，我只想要那里的值。

我知道不可能以这种方式编写查询，因为我认为我读到 Distinct 应用于行而不是 col？

谁能指出我正确的方向？我确实尝试将值重新加入，但这没有用，因为我必须在不同的选择中指定额外加入的列，这反过来又在这些上执行不同的，即。

```
select distinct t1.col1, t2.col2, t3.col3
from table1 t1
right join (select col1, col2, col3 from table1) t2
on t1.col1 = t2.col1 
```

编辑以更好地解释..

```
select distinct t1.Hostname, t2.IP, t2.ActionDateTime, t2.Action
from tblUserActions t1
right join (select Hostname, IP, ActionDateTime from tblUserActions) t2
on t1.Hostname = t2.Hostname 
```

基本上，这张表是数千个用户操作的列表，我试图在主机名上列出不同的列表，所以我应该只收到 10 行，因为这就是有多少不同的主机名。然后基于这些主机名，我还想将最近的记录数据加入到返回的行中，所以我想返回：

```
 Hostname, IP, ActionDateTime, Action
1 Host1, 165.123.123.1, 2012-06-14 02:07:08, Logon
2 Host2, 165.123.123.2, 2012-06-14 03:07:08, Logoff
3 Host3, 165.123.123.3, 2012-06-14 04:07:08, Logon
4 Host4, 165.123.123.4, 2012-06-14 05:07:08, Logoff
etc... 
```

任何帮助/指针都会很棒！干杯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T11:09:51.783

从它的声音来看，我认为这就是你所追求的：

```
WITH CTE AS
(   SELECT  HostName,
            IP,
            ActionDate,
            Action,
            ROW_NUMBER() OVER(PARTITION BY HostName ORDER BY ActionDate DESC) AS RowNumber
    FROM    Table
)
SELECT  HostName,
        IP,
        ActionDate,
        Action
FROM    CTE
WHERE   RowNumber = 1 
```

这将只返回主机名的唯一值，然后返回其他列的值基于窗口函数`ORDER BY`中的子句。`ROW_NUMBER()`

您可能需要更改`ORDER BY`以适合您的确切要求，我认为最近的操作可能是最有可能的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T11:16:54.923

您只想要每个主机名/IP 的最新操作吗？

你可以这样做：

```
with latestAction as (
select  hostname,
        ip,
        max(ActionDate) as latestActionDate
from    tblUserActions
group by hostname,
        ip)
select  la.hostName,
    la.ip,
    tua.ActionDate,
    tua.Action
from    tblUserActions tua join latestAction la on
        tua.hostname = la.hostname and
        tua.ip = la.ip and
        tua.ActionDate = la.latestActionDate 
```

# scala - Scala-IDE - 具有不同签名的对象`apply`方法混合在一起？

> ID：11031128
> 
> 赞同：2
> 
> 时间：2012-06-14T10:23:01.297
> 
> 标签：scala, scala-ide

编码：

```
object Link {

  //TYPE-1 (purely functional)
  def apply(name: String, target: Page, f: () => Unit, isExclusive: Boolean) = new Link(name, target, f, isExclusive)
  //..

  //TYPE-2 (purely side-effect)
  def apply(source: Page, target: Page, f: () => Unit, isExclusive: Boolean): Link = {
    val link = Link("LINK [" + source.getName + "]->[" + target.getName + "]", target, f, isExclusive)
    source += link
    link
  }

  //type-2 too
  def apply(source: Page, target: Page, isExclusive: Boolean): Link = Link (source, target, () => Unit, isExclusive)

} 
```

解释：有两种类型的`apply`方法 - type-1 仅返回伴随类构造函数返回的内容，而 type-2 不返回任何内容，而只是对新实例执行某些操作。因此，他们有两组不同的论据。但是，我在用下划线标记的*第二种*类型 2 应用方法上收到错误（见帖子底部） ：`_Link_`

```
 def apply(source: Page, target: Page, isExclusive: Boolean): Link = _Link_ (source, target, () => Unit, isExclusive) 
```

第一个类型 2 应用方法做了一些工作，在第二个（以及第三和第四个......）类型 2 应用方法中，我只想引用第一个，而不是复制那里写的内容。*但是，除非*所有类型 1 的应用方法都被注释掉，否则Scala-IDE 不允许我这样做。似乎 Scala-IDE 在签名中迷失了方向，看不到我明显的意图。还是我做错了什么？

错误：第二种`apply`方法显示错误，内容如下：

> 重载方法值适用于替代方案：（来源：org.app.Page，目标：org.app.Page，f：（）=> Unit，isExclusive：Boolean）org.app.meta.Link <和>（名称：字符串,target: org.app.Page,f: () => Unit,isExclusive: Boolean)org.app.meta.Link 不能应用于 (org.app.Page, org.app.Page, () => Unit .type，布尔值）

**更新**

请注意，从第一个 type-2 调用 type-1 apply 方法时没有问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T11:28:11.413

~~这看起来像是 Scala 编译器中的一个错误（可以使用 scalac 2.9.2 在 Eclipse 之外重现该错误）。~~

~~如果这是一个已知问题，请检查[Scala 问题跟踪器](https://issues.scala-lang.org/browse/)（如果需要，请打开票证）。~~

**更新**

正如 Harald Meland [here](https://groups.google.com/forum/?fromgroups#!topic/scala-user/BGDkkx9JdI0)所解释的，这不是编译器中的错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-15T11:03:23.183

这不是bug，仔细检查错误信息（有趣的部分是下面的黑体字），你会看到最后一个apply方法实际上传递了一个错误类型签名的函数，`() => Unit.type`而不是简单`() => Unit`的。

> 重载方法值适用于替代方案：（来源：org.app.Page，目标：org.app.Page，f：（）=> Unit，isExclusive：Boolean）org.app.meta.Link <和>（名称：字符串,target: org.app.Page,f: () => Unit,isExclusive: Boolean)org.app.meta.Link 不能应用于 (org.app.Page, org.app.Page, () => **Unit .type** , 布尔值)

原因是只有一个 Unit 类型的值，即`()`，但是，在您的情况下，当您调用`() => Unit`最后一个 apply 方法时，您将返回 Unit 类型的伴随对象而不是它的值。

要修复您遇到的错误，只需在您的最后一个应用方法中替换`() => Unit`为。`() => ()`

然后它应该看起来像这样：

```
def apply(source: Page, target: Page, isExclusive: Boolean): Link = Link (source, target, () => (), isExclusive) 
```

# android - 在android中设置不同区域设置后的日期格式异常

> ID：11031129
> 
> 赞同：0
> 
> 时间：2012-06-14T10:23:02.743
> 
> 标签：android, locale, date-parsing

我的申请中有一个问题。我正在为 6 种不同的语言开发我的应用程序：
1）英语 2）俄语 3）法语 4）意大利语 5）葡萄牙语 6）印地语

现在我的应用程序适用于英语，但是当我设置其他语言的语言环境时，使用此功能*在日期解析和十进制格式上给了我例外*

```
SimpleDateFormat sdfSource = new SimpleDateFormat("yyyy-MM-dd hh:mm:ss aa");
Date date = sdfSource.parse(data.getCdate());
SimpleDateFormat sdfDestination = new SimpleDateFormat("yyyy-MM-dd");

   and with this **function**

DecimalFormat twoDForm = new DecimalFormat("#.##");
return Double.valueOf(twoDForm.format(d)); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T09:54:21.697

抽象适配器

```
package pl.polidea.coverflow;

import java.lang.ref.WeakReference;
import java.util.HashMap;
import java.util.Map;

import android.content.Context;
import android.graphics.Bitmap;
import android.util.Log;
import android.view.View;
import android.view.ViewGroup;
import android.widget.BaseAdapter;
import android.widget.ImageView;

/**
 * This class is an adapter that provides base, abstract class for images
 * adapter.
 *
 */
public abstract class AbstractCoverFlowImageAdapter extends BaseAdapter {

    /** The Constant TAG. */
    private static final String TAG = AbstractCoverFlowImageAdapter.class.getSimpleName();

    /** The width. */
    private float width = 0;

    /** The height. */
    private float height = 0;

    /** The bitmap map. */
    private final Map<Integer, WeakReference<Bitmap>> bitmapMap = new HashMap<Integer, WeakReference<Bitmap>>();

    public AbstractCoverFlowImageAdapter() {
        super();
    }

    /**
     * Set width for all pictures.
     *
     * @param width
     *            picture height
     */
    public synchronized void setWidth(final float width) {
        this.width = width;
    }

    /**
     * Set height for all pictures.
     *
     * @param height
     *            picture height
     */
    public synchronized void setHeight(final float height) {
        this.height = height;
    }

    @Override
    public final Bitmap getItem(int position) {
        final WeakReference<Bitmap> weakBitmapReference = bitmapMap.get(position);
        if (weakBitmapReference != null) {
            final Bitmap bitmap = weakBitmapReference.get();
            if (bitmap == null) {
         //       Log.v(TAG, "Empty bitmap reference at position: " + position + ":" + this);
            } else {
          //      Log.v(TAG, "Reusing bitmap item at position: " + position + ":" + this);
                return bitmap;
            }
        }
        Log.v(TAG, "Creating item at position: " + position + ":" + this);
        final Bitmap bitmap = createBitmap(position);
        bitmapMap.put(position, new WeakReference<Bitmap>(bitmap));
    //    Log.v(TAG, "Created item at position: " + position + ":" + this);
        return bitmap;
    }

    /**
     * Creates new bitmap for the position specified.
     *
     * @param position
     *            position
     * @return Bitmap created
     */
    protected abstract Bitmap createBitmap(int position);

    /*
     * (non-Javadoc)
     *
     * @see android.widget.Adapter#getItemId(int)
     */
    @Override
    public final synchronized long getItemId(final int position) {
        return position;
    }

    /*
     * (non-Javadoc)
     *
     * @see android.widget.Adapter#getView(int, android.view.View,
     * android.view.ViewGroup)
     */
    @Override
    public final synchronized ImageView getView(final int position, final View convertView, final ViewGroup parent) {
        ImageView imageView;
        if (convertView == null) {
            final Context context = parent.getContext();
         //   Log.v(TAG, "Creating Image view at position: " + position + ":" + this);
            imageView = new ImageView(context);
            imageView.setLayoutParams(new CoverFlow.LayoutParams((int) width, (int) height));
        } else {
          //  Log.v(TAG, "Reusing view at position: " + position + ":" + this);
            imageView = (ImageView) convertView;
        }
        imageView.setImageBitmap(getItem(position));
        return imageView;
    }

} 
```

主要的.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android" android:orientation="vertical"
        android:layout_width="fill_parent" android:layout_height="fill_parent" android:background="@android:color/white">
        <!-- <view class="pl.polidea.coverflow.CoverFlow" xmlns:coverflow="http://schemas.android.com/apk/res/pl.polidea.coverflow"
                coverflow:imageWidth="100dip" coverflow:imageHeight="150dip" android:id="@+id/coverflow" android:layout_width="fill_parent"
                android:layout_height="wrap_content" android:layout_marginTop="5dip">
        </view> -->
    <TextView android:text="STATUS" android:layout_width="fill_parent" android:layout_height="wrap_content"
                android:layout_gravity="bottom"
                android:textColor="#ffffff"

                android:padding="5dip" android:id="@+id/statusText"></TextView>

        <pl.polidea.coverflow.CoverFlow xmlns:coverflow="http://schemas.android.com/apk/res/pl.polidea.coverflow"
                coverflow:imageWidth="170dp" coverflow:imageHeight="170dp" coverflow:withReflection="true"
                coverflow:imageReflectionRatio="0.4" coverflow:reflectionGap="4dp" android:id="@+id/coverflowReflect"
                android:layout_width="fill_parent" android:layout_height="fill_parent" android:layout_marginTop="25dp"
                android:layout_marginBottom="20dp" />

</LinearLayout> 
```

attrs.xml

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
     <declare-styleable name="CoverFlow">
        <attr name="imageWidth" format="dimension" />
        <attr name="imageHeight" format="dimension" />
        <attr name="withReflection" format="boolean" />
        <attr name="reflectionGap" format="dimension" />
        <attr name="imageReflectionRatio" format="float" />
    </declare-styleable>
</resources> 
```

# jquery - 在 jsf 2.0 中使用 jquery 更改与 h:outputText 映射的整数的值

> ID：11031131
> 
> 赞同：0
> 
> 时间：2012-06-14T10:23:04.633
> 
> 标签：jquery, jsf-2, web

我已将 Integer 映射到 h:outputText (JSF 2.0)

```
<h:outputText id="txt_pay_days" value="#{articleBean.noOfDays}"/> 
```

并使用 jquery 更改了值

```
$("#txt_pay_days").text("123"); 
```

在 bean（在服务器端）中 integer 的值没有更改为 123。

我究竟做错了什么。或者这不是正确的方法。

有什么建议么 ？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T12:07:04.377

如果你想在服务器端进行更改，你需要一个 ajax 调用。您可以使用 f:ajax

```
<h:commandButton value="My ajax button">
    <f:setPropertyActionListener target="#{articleBean.noOfDays}" value="123" />
    <f:ajax  execute="txt_pay_days" update="txt_pay_days" />
</h:commandButton> 
```

执行告诉您要在 ajax 调用中处理哪些组件，并更新告诉您要在视图中更新哪些组件。

setPropertyActionListener 将设置 #{articleBean.noOfDays} 的值。

[您可以在此处](http://javaserverfaces.java.net/nonav/docs/2.0/pdldocs/facelets/f/ajax.html)找到更多信息：

# php - 在 Clean Codeigniter 2.1.1 上防止页面/控制器/方法缓存

> ID：11031134
> 
> 赞同：0
> 
> 时间：2012-06-14T10:23:28.393
> 
> 标签：php, codeigniter, codeigniter-2

我的 CMS 中有一个**激活**按钮，允许用户快速切换新闻文章的活动/非活动标志。单击切换时，会向 url 发出 POST 请求`/news/toggle_active/$id`，之后`news_model`更新数据库中特定文章 ID 的布尔变量，控制器重定向回索引。

## 控制器

```
function toggle_active()
{
    $url = $this->uri->uri_string();
    $last_segment = count($this->uri->segment_array());
    $id = $this->uri->segment($last_segment);

    $row = $this->news_model->set_active($id);

    redirect('news/index', 'refresh');
} 
```

## 模型

```
function set_active($id)
{
    $data = array(
           'display_flg' => 'NOT display_flg'
    );

    $this->db->where('id', $id);
    $this->db->update($this->tbl_news, $data);
} 
```

第一次单击**激活**按钮时它可以工作，但随后的单击什么也不做。如果我关闭浏览器窗口并重新打开页面，该按钮将再次起作用，但只需单击一次。

我没有专门启用任何缓存，所以我不确定发生了什么。

如果我从`toggle_active()`方法的末尾删除重定向，并输出变量的当前值`display_flg`，并且 POST 到`/news/toggle_active/$id`它似乎对第一个请求没有任何作用。但是，在每次后续刷新时，变量都会更改值。为什么第一次点击链接时它没有做任何事情？

尽管没有可靠的解决方案，但我在[codeigniter](http://codeigniter.com/forums/viewthread/191464/)论坛上发现了一些人似乎有类似的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T03:35:12.890

我不认为这最终是一个缓存问题。我做了两个主要的改变来解决这个问题。

首先，我在重定向之前不检查数据库请求是否成功。

我还重写了我的模型`set_active()`方法。将 SET 子句作为数组传递给更新函数的第二个参数不起作用。我需要使用 set functions 第三个参数来阻止查询转义查询的`NOT`一部分。

我调整了我的功能如下：

# 控制器

```
function show_toggle($id)
{
    if($this->news_model->set_active($id)) 
    {
        redirect('news/index', 'refresh');
    }
} 
```

# 模型

```
function set_active($id)
{
    $this->db->where('id', $id);
    $this->db->set('display_flg', 'NOT display_flg', FALSE);
    $query = $this->db->update($this->tbl_news);    

    return $query;
} 
```

# android - 在单个查询中获取联系人的详细信息

> ID：11031136
> 
> 赞同：4
> 
> 时间：2012-06-14T10:23:29.390
> 
> 标签：android, android-contacts, android-contentprovider

大家好，我正在尝试使用 ContentResolver 从联系人数据库中获取联系人信息，这些字段希望在一个查询中获取联系人的姓名、号码、FORMATTED_ADDRESS、PHOTO 详细信息。

所以基本上我需要对每个联系人进行 3 次查询才能获得这些详细信息。

我想知道的是，有没有一种更简单、更有效的方法来实现这一目标。

但是使用下面的代码我得到了异常。

```
java.lang.IllegalArgumentException: Invalid column data1 
```

任何机构都可以帮助我找到相同的解决方案。

```
Uri uri                = ContactsContract.Contacts.CONTENT_URI;
String[] projection    = new String[] { ContactsContract.Contacts._ID,
                                        ContactsContract.Contacts.DISPLAY_NAME,
                                        ContactsContract.CommonDataKinds.Phone.NUMBER,
                                        ContactsContract.CommonDataKinds.StructuredPostal.FORMATTED_ADDRESS,
                                        ContactsContract.CommonDataKinds.Photo.PHOTO};
String selection       = ContactsContract.Contacts.HAS_PHONE_NUMBER + " = '1'";
String[] selectionArgs = null;
String sortOrder       = ContactsContract.Contacts.DISPLAY_NAME + " COLLATE LOCALIZED ASC";

Cursor contacts          = getContentResolver().query(uri, projection, selection, selectionArgs, sortOrder); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T10:31:23.660

也许问题会出现在`selection`. 用我的方法代替你的方法。

```
Uri uri = ContactsContract.CommonDataKinds.Phone.CONTENT_URI;
String[] projection = new String[] { ContactsContract.Contacts._ID,
                                        ContactsContract.Contacts.DISPLAY_NAME,
                                        ContactsContract.CommonDataKinds.Phone.NUMBER,
                                        ContactsContract.CommonDataKinds.StructuredPostal.FORMATTED_ADDRESS,
                                        ContactsContract.CommonDataKinds.Photo.PHOTO};
String selection = ContactsContract.Contacts.HAS_PHONE_NUMBER  + " = ?";
String[] selectionArgs = { String.valueOf(1) }; 
String sortOrder = ContactsContract.Contacts.DISPLAY_NAME + " COLLATE LOCALIZED ASC";

Cursor contacts = getContentResolver().query(uri, projection, selection, selectionArgs, sortOrder); 
```

您应该始终使用`parametrized statements`. 你的方法很危险。而且你的 URI 很糟糕。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T10:43:39.580

干得好

代替

```
ContactsContract.Contacts.CONTENT_URI; 
```

和

```
ContactsContract.CommonDataKinds.Phone.CONTENT_URI; 
```

# database - akinator 使用数据库运行？

> ID：11031143
> 
> 赞同：4
> 
> 时间：2012-06-14T10:23:50.853
> 
> 标签：database, algorithm, search-engine

Akinator[可以](http://akinator.com)找到一切。我可以猜到 akinator 的算法，但我不明白，akinator 使用数据库或任何搜索引擎，因为找到一切。如果使用数据库，数据库的逻辑是什么？创始人如何找到所有知识？

现在就足够了:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T10:32:18.203

我将在这里进行推测，但不确定，因为我不是编写这个神奇机器人的人之一。

我想它一开始并没有现在那么聪明，但请记住：每次它得到一个错误的答案时，它都会要求您提出另一个问题，以区分 Akinator 的建议与您想到的实际人。因此，它建立在自己的知识库之上。

我想 Akinator 使用决策树，甚至[C4.5 算法](http://en.wikipedia.org/wiki/C4.5_algorithm)来选择每次查询的内容。它根据之前的答案提出问题，这更接近于 C4.5 算法，而不是经典的决策树。Akinator 真正令人惊奇的是，它甚至可以猜出你在一个甚至两个答案中犯错的一些情况。我想，这是机器人作者开发的算法的附加组件。

只需计算它是否包含数十万个问题，并且每个问题都有 5 个可能的答案，它可以猜出多少种不同的性格。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-12-20T11:45:30.030

我不知道 Akinator 的原始算法究竟是如何实现的，但我们已经使用数据库解决了类似的任务。[您可以在https://github.com/nesterovsky-bros/KB](https://github.com/nesterovsky-bros/KB)了解它的实现。

**编辑：**

建议的解决方案是一种算法，它将带有答案的问题列表作为输入，并提供下一个问题。该问题及其答案被添加到问题和答案集中。当没有更多问题时，实体列表由一组问题确定，这些问题具有这些问题的答案。

本质上，SQL 解决方案是这样工作的：

1.  定义表：

表“实体”定义对象：

```
create table Data.Entity
(
  EntityID int not null primary key, -- Object key.
  Name nvarchar(256) -- Object name
); 
```

表“PredicateType”定义了问题类型：

```
create table Data.PredicateType
(
  PredicateID int not null primary key, -- question id
  Name nvarchar(128) not null unique -- question name.
); 
```

表“谓词”存储谓词为真的实体：

```
create table Data.Predicate
(
  PredicateID int not null,
  EntityID int not null,
  constraint PK_Predicate primary key clustered(PredicateID, EntityID),
  constraint IX_Predicate_Entity unique(EntityID, PredicateID)
); 
```

2.  解决方案是为一组输入问题和答案构建一个选择，在输出上提供一个新问题。

例如，如果我们有 P(i) - 问题，A(i) - 答案，i = 1..5，并且
A(1) = A(3) = 1，A(2) = A(4) = A(5) = 0 那么选择将如下所示：

```
 with P1 as -- P(1), A(1) = 1
  (
    select EntityID from Data.Predicate where PredicateID = @p1
  ),
  P2 as -- P(2), A(2) = 0
  (
    select EntityID from Data.Predicate where PredicateID = @p2
  ),
  P3 as -- P(3), A(3) = 1
  (
    select EntityID from Data.Predicate where PredicateID = @p3
  ),
  P4 as -- P(4), A(4) = 0
  (
    select EntityID from Data.Predicate where PredicateID = @p4
  ),
  P5 as -- P(5), A(5) = 0
  (
    select EntityID from Data.Predicate where PredicateID = @p5
  ),
  M as
  (
    select EntityID from Data.Entity
    intersect
    select EntityID from P1
    intersect
    select EntityID from P3
    except
    select EntityID from P2
    except
    select EntityID from P4
    except
    select EntityID from P5
  ),
  P as
  (
    select
      P.PredicateID,
      count(*) EntityCount,
      (select count(*) from M) TotalCount
    from
      Data.Predicate P
      inner join
      M
      on
        P.EntityID = M.EntityID
    where
      P.PredicateID not in (@p1, @p2, @p3, @p4, @p5)
    group by
      P.PredicateID
  )
  select top(5) PredicateID from P order by abs(TotalCount - EntityCount  * 2); 
```

返回的结果集最好是下一个最佳谓词。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-10-10T15:03:49.387

Akinator 是一个非常接近搜索引擎的东西。我认为数据库的可扩展性不足以实现 Akinator 之类的东西（至少：不是标准的类似 SQL 的关系数据库）。如果我尝试实现 Akinator，我会改用发布列表、倒排索引和类似的数据结构。

# .net - 将多个具有一对多关系的表映射到单个对象

> ID：11031144
> 
> 赞同：2
> 
> 时间：2012-06-14T10:23:52.977
> 
> 标签：.net, one-to-many, fluent-interface, entity-framework-4.3

我试图弄清楚如何使用 Fluent API 将以下数据库表映射到我的域模型。有可能吗？

我在数据库中有什么：

```
table Person
{ Id
  Name
  Surname }

table Contact
{ Id
  PersonId
  ContactType
  ContactDesc }

e.g. of the data: 
Person {Id: 1, Name: "John", Surname: "Sutherland"}
Contact {Id: 1, PersonId: 1, ContactType: "Work", ContactDesc: "000 0000 000"}
Contact {Id: 2, PersonId: 1, ContactType: "Home", ContactDesc: "000 0000 001"}
Contact {Id: 3, PersonId: 1, ContactType: "Cell", ContactDesc: "000 0000 002"} 
```

我的领域模型：

```
public class Person
{
  public int Id { get; set; }
  public string Name { get; set; }
  public string Surname { get; set; }
  public string WorkTelephoneNumber { get; set; }
  public string HomeTelephoneNumber { get; set; }
  public string CellphoneNumber { get; set; }
} 
```

目前我正在使用 Fluent 映射到单独的 Person 和 Contact POCO，然后手动将其展平到我的域模型中。我试图摆脱额外的 POCO 层并直接映射到我的域模型。

我将不胜感激！

# c# - 动态删除事件处理程序的解决方案（使用反射）。有一个更好的方法吗？

> ID：11031149
> 
> 赞同：4
> 
> 时间：2012-06-14T10:23:59.560
> 
> 标签：c#, reflection

我需要从我没有代码的 dll 加载的控件中删除事件处理程序。由于似乎没有“官方”（即受 .NET Framework 的公共方法支持），因此我能够创建几个扩展方法，使用反射完全可以做到这一点。

有关所有详细信息，请参阅此博客文章：[使用反射从 WinForm ListView 控件中删除事件](http://diniscruz.blogspot.co.uk/2012/06/removing-event-from-winform-listview.html)

这是如何删除 SelectedIndexChanged 事件的代码示例（动态且无需访问原始处理程序）

```
//for a UserControl (in fact any control that implements System.ComponentModel.Component)
var userControl = new UserControl();
//we can get the current mapped event handlers
userControl.eventHandlers();
//its signature
userControl.eventHandlers_MethodSignatures();
//remove one by using the static field name
userControl.remove_EventHandler("EVENT_SELECTEDINDEXCHANGED");
//or use this one specifically mapped to the SelectedIndexChanged event
userControl.remove_Event_SelectedIndexChanged 
```

我的问题是：“还有其他方法吗？”

虽然我的解决方案有效并且看起来很稳定，但我正在进行内部 .NET 对象操作，所以也许有更好的解决方案（在 4.0 或 4.5 中）？

相关文章：

*   [这怎么可能删除按钮的 Click 事件的所有事件处理程序？](https://stackoverflow.com/questions/6828054/how-would-that-be-possible-to-remove-all-event-handlers-of-the-click-event-of-a)- 使用与我类似的解决方案，但我认为他们的解决方案不起作用

# css - 将内联块的底部与文本的底部对齐（不包括下降器）

> ID：11031150
> 
> 赞同：0
> 
> 时间：2012-06-14T10:23:59.923
> 
> 标签：css, vertical-alignment

如何在父元素（称为“PE”）中将内联块的底部（称为“IB”）与文本的底部对齐 - 不包括像“g”上的下降线？这应该以一种概括文本大小的方式 - 我不想硬编码特定于大小的像素值。

这是我将使用的 HTML 示例，其中包含我需要 CSS 的类：

```
<div class="pe">
    Parent text line
    <span class="ib" style="display: inline-block;">
        - and child text line
    </span>
</div> 
```

这就是我希望它看起来的样子：

![http://imgur.com/S1l7Y](../Images/b8c84911678dcb77fc6141ef5d68aa32.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T10:56:30.477

您可以将以下 css 添加到 ib。并更改下边距以控制对齐。

```
.ib{
     display: inline-block;
     font-size: 10px; 
     vertical-align: bottom;
     margin:0 0 1px 0;
}​ 
```

@Rorok_89 我知道我正在添加一行 css，但这只是一种以不同方式完成的方法。你的答案很完美。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T11:41:25.043

OP 更新说：“谢谢，但我已经编辑了问题以澄清我不想硬编码特定大小的像素值。”

在那种情况下，恐怕没有一种解决方案可以自动修复具有不同文本大小的不同行。我提供的另一个解决方案在所有具有某些字体大小组合的浏览器中甚至都不是完美的，因为 Chrome/Opera 舍入的不精确值与 Firefox/IE 不同，所以即使使用我的解决方案，您也需要使用一些浏览器-特定的 css。唯一类似于通用解决方案的方法是设置 vertical-align: middle; 但我不相信它会始终如一地工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T10:41:03.307

这似乎对我有用：http: [//jsfiddle.net/Rorok_89/Z8TWH/](http://jsfiddle.net/Rorok_89/Z8TWH/)

```
.ib{
 display: inline-block;
 font-size: 10px; 
 vertical-align: 1px;
} 
```

# android - SMS广播接收器接收多次？

> ID：11031151
> 
> 赞同：4
> 
> 时间：2012-06-14T10:24:02.233
> 
> 标签：android, sms, broadcastreceiver

我在我的应用程序中使用短信广播接收器。当我发送第一条短信时，它会弹出一条短信作为发送的短信。当我发送第二个请求时，弹出消息会加倍。在第三次它增加了两倍，依此类推。我正在使用以下代码发送和接收广播。

```
 private void sendRequest()
    {        
        String SENT = "SMS_SENT";
        String DELIVERED = "SMS_DELIVERED";

        PendingIntent sentPI = PendingIntent.getBroadcast(this, 0,
            new Intent(SENT), 0);

        PendingIntent deliveredPI = PendingIntent.getBroadcast(this, 0,
            new Intent(DELIVERED), 0);

        //---when the SMS has been sent---
        registerReceiver(new BroadcastReceiver(){
            @Override
            public void onReceive(Context arg0, Intent arg1) {
                switch (getResultCode())
                {
                    case Activity.RESULT_OK:
                        Toast.makeText(getBaseContext(), "SMS sent", 
                                Toast.LENGTH_SHORT).show(); 
                        break;
                    case SmsManager.RESULT_ERROR_GENERIC_FAILURE:
                        Toast.makeText(getBaseContext(), "Invalid PhoneNumber", 
                                Toast.LENGTH_SHORT).show();
                        break;
                    case SmsManager.RESULT_ERROR_NO_SERVICE:
                        Toast.makeText(getBaseContext(), "No service", 
                                Toast.LENGTH_SHORT).show();
                        break;
                    case SmsManager.RESULT_ERROR_NULL_PDU:
                        Toast.makeText(getBaseContext(), "Null PDU", 
                                Toast.LENGTH_SHORT).show();
                        break;
                    case SmsManager.RESULT_ERROR_RADIO_OFF:
                        Toast.makeText(getBaseContext(), "Radio off", 
                                Toast.LENGTH_SHORT).show();
                        break;
                }
            } 
        }, new IntentFilter(SENT));

       SmsManager sms = SmsManager.getDefault();
        sms.sendTextMessage(sms_phonenumber, null, sms_message, sentPI, null); 
```

我不确定这是否正在发生。我正在从 mainactivity 发送短信。

谢谢你们的帮助。。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-14T10:31:49.477

看起来是因为你每次打电话`sendRequest`都会多注册`BroadcastReceiver`一次......

您应该`BroadcastReceiver`只注册一次，并且应该在进行活动之前取消注册......

只在[链接](http://android-coding.blogspot.in/2011/11/create-our-own-service-and.html)中注册和未注册的工作`onStart`一次`onStop`

# xml - 转换为有条件地屏蔽输入中的元素和属性

> ID：11031153
> 
> 赞同：0
> 
> 时间：2012-06-14T10:24:06.520
> 
> 标签：xml, xslt-1.0

我的输出 xml 应该基于变量 flag 被一些元素掩盖。如果 flag 的值为“1”，则输出 xml 应该只有元素“a”（包括其所有属性和子元素）。如果标志为 2，则输出 xml 应包含元素 a 和 b。如果为 3，则输入中存在的所有元素和属性都应存在于输出中

我的输入xml

```
<Root>

<a ref="t">
<s id="2">value</s>
</a>
<b ref="t">
<s id="2">value</s>
</b>
<c ref="t">
<s id="2">value</s>
</c>
</Root> 
```

我想要的输出（当标志为 1 时）

```
<Root>

<a ref="t">
<s id="2">value</s>
</a>
</Root> 
```

xslt 我试过了

```
<xsl:stylesheet version="1.0"

xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output omit-xml-declaration="yes" indent="yes"/>
<xsl:variable name="flag" select="'1'"/>

<xsl:strip-space elements="*"/>

<xsl:template match="node()|@*">

<xsl:copy>

<xsl:apply-templates select="node()|@*"/>

</xsl:copy>

</xsl:template>

<xsl:if test ="$flag ='1'">
<xsl:template match="b"></xsl:template>
<xsl:template match="c"></xsl:template>
</xsl:if>

</xsl:stylesheet> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T11:15:19.597

下面的 xslt 正在工作。

```
<xsl:stylesheet version="1.0"

xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output omit-xml-declaration="yes" indent="yes"/>
<xsl:variable name="flag" select="'1'"/>

<xsl:strip-space elements="*"/>

<xsl:template match="node()|@*">

<xsl:copy>

<xsl:apply-templates select="node()|@*"/>

</xsl:copy>

</xsl:template>

<xsl:template match="b">
<xsl:if test="$flag ='3' or $flag='2'">
  <xsl:copy>
<xsl:apply-templates select="node()|@*"/>
</xsl:copy>
</xsl:if>
</xsl:template>

<xsl:template match="c">
<xsl:if test="$flag ='3'">
  <xsl:copy>
<xsl:apply-templates select="node()|@*"/>
</xsl:copy>
</xsl:if>
</xsl:template>

</xsl:stylesheet> 
```

# google-apps-script - 是否会自动删除过期的基于时间的触发器，还是应该手动删除它们？

> ID：11031155
> 
> 赞同：2
> 
> 时间：2012-06-14T10:24:27.917
> 
> 标签：google-apps-script, triggers

我以编程方式在 Google Apps 脚本中设置触发器，以便在其他地方处理作业时将获取数据的时间推迟几分钟。

我注意到在脚本编辑器的“查看当前脚本的触发器”中，旧的（过期的）触发器仍然存在 - 我怀疑它们也计入触发器的最大数量限制。

Google Apps 脚本会删除这些过期的触发器，还是我必须查看触发器列表并删除过期的触发器？如果是，有人想分享一个代码示例吗？（我建议，这也应该包含在文档中）。

我使用 .at 创建触发器

```
 var d = new Date();
  d.setMinutes(d.getMinutes() + 5);

  try {
    ScriptApp.newTrigger("retrieveOrder")
      .timeBased()
      .at(d)
      .create();
  } catch(e) {
    sendErrorMail(e + " \n \n"  + "Date: " + d);
    return false;
  } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2017-02-01T20:06:04.700

如果您知道从哪里调用它，那么您可以通过处理函数删除......调用函数“updateGmailPhotoFromDriveBatcher”然后调用自身

```
// this is called by a daily trigger. I don't want it deleted
function runPhotoUpdates() {
  // NEEDS to be a separate fnc so it doesn't get deleted
  updateGmailPhotoFromDriveBatcher()
}

// this function does a job, then reschedules itself until a blank is returned
function updateGmailPhotoFromDriveBatcher() {
  var ss = SpreadsheetApp.getActiveSpreadsheet(); //fetches the   spreadsheet that the script is running in
  var sheet = ss.getSheetByName("Groups");

  var sgfrom = sheet.getRange(10, 21).getValue(); 
  var npt = sheet.getRange(11, 21).getValue();  

  var oneJob = oneBatch(npt,sgfrom)
  var currTime = (new Date()).getTime();
  // WRITE THE new values; oneJob[0] is blank when completed; npt is a next page token of something that times out if you run the whole user base
  sheet.getRange(10, 21).setValue(oneJob[1]);
  sheet.getRange(11, 21).setValue(oneJob[0]);
  sheet.getRange(12, 21).setValue(oneJob[2]);
  sheet.getRange(13, 21).setValue(currTime)

  SpreadsheetApp.flush();

  if (oneJob[0] != "") {
  // SCHEDULE NEW JOB

   ScriptApp.newTrigger("updateGmailPhotoFromDriveBatcher")
           .timeBased()
           .at(new Date(currTime+(20*1000))) // 20 seconds from NOW
           .create();
   } else { // FINISHED
      // KILL TRIGGERS
      deleteTriggers()
   }

}

function deleteTriggers() { // cleans up the triggers made above
    var triggers = ScriptApp.getProjectTriggers();
    for (var i = 0; i < triggers.length; i++) {
       var thf = triggers[i].getHandlerFunction()   //String    Returns the function that will be called when the trigger fires.
       // if it's the one I kept making above
       if (thf == "updateGmailPhotoFromDriveBatcher") {
            ScriptApp.deleteTrigger(triggers[i]);
       }

    }

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-14T11:30:41.770

您必须删除触发器。查看[文档](https://developers.google.com/apps-script/guide_events#ScriptService)以获取示例

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-02-14T02:28:57.943

我将触发器的唯一 ID 连同设置为过期时间的时间戳一起放入 ScriptDb 中。然后我用这个杂物清除它：

```
/**
 * @param {ScriptDbInstance} db
 */
function clearExpiredTimeTriggers(db){

  var now = new Date();
  var nts = now.getTime();
  var res = db.query({trigId:db.anyValue(), trigExpiration: db.lessThan(nts)});
  var expiredTriggers = [];
  while (res.hasNext()){
    var item = res.next();
    expiredTriggers.push(item.trigId);
    db.remove(item);
  }

  var triggers = ScriptApp.getProjectTriggers();
  for (var i = 0; i < triggers.length; i++) {
    if (expiredTriggers.indexOf(triggers[i].getUniqueId()) > -1){
      ScriptApp.deleteTrigger(triggers[i]);
    }
  }
} 
```

# c++ - C++：将十六进制转换为十进制

> ID：11031159
> 
> 赞同：14
> 
> 时间：2012-06-14T10:24:36.110
> 
> 标签：c++, algorithm, hex, decimal

我正在寻找一种将`hex`^(（十六进制)）轻松转换为`dec`^(（十进制）的方法。)我找到了一个简单的方法来做到这一点：

```
int k = 0x265;
cout << k << endl; 
```

但是这样我就不能输入了`265`。无论如何它是否可以这样工作：

输入： `265`

输出： `613`

反正有这样做吗？

**注意：**我试过了：

```
int k = 0x, b;
cin >> b;
cout << k + b << endl; 
```

它不起作用。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-06-14T10:50:01.810

```
#include <iostream>
#include <iomanip>
#include <sstream>

int main()
{
    int x, y;
    std::stringstream stream;

    std::cin >> x;
    stream << x;
    stream >> std::hex >> y;
    std::cout << y;

    return 0;
} 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-06-14T10:34:20.487

使用[`std::hex`](http://en.cppreference.com/w/cpp/io/manip/hex)机械手：

```
#include <iostream>
#include <iomanip>

int main()
{
    int x;
    std::cin >> std::hex >> x;
    std::cout << x << std::endl;

    return 0;
} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-06-14T11:57:20.800

好吧，C方式可能类似于......

```
#include <stdlib.h>
#include <stdio.h>

int main()
{
        int n;
        scanf("%d", &n);
        printf("%X", n);

        exit(0);
} 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2014-12-06T17:46:38.603

这是一个使用字符串并使用 ASCII 表将其转换为十进制的解决方案：

```
#include <iostream>
#include <string>
#include "math.h"
using namespace std;
unsigned long hex2dec(string hex)
{
    unsigned long result = 0;
    for (int i=0; i<hex.length(); i++) {
        if (hex[i]>=48 && hex[i]<=57)
        {
            result += (hex[i]-48)*pow(16,hex.length()-i-1);
        } else if (hex[i]>=65 && hex[i]<=70) {
            result += (hex[i]-55)*pow(16,hex.length( )-i-1);
        } else if (hex[i]>=97 && hex[i]<=102) {
            result += (hex[i]-87)*pow(16,hex.length()-i-1);
        }
    }
    return result;
}

int main(int argc, const char * argv[]) {
    string hex_str;
    cin >> hex_str;
    cout << hex2dec(hex_str) << endl;
    return 0;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-01-14T16:47:58.370

我用这个：

```
template <typename T>
bool fromHex(const std::string& hexValue, T& result)
{
    std::stringstream ss;
    ss << std::hex << hexValue;
    ss >> result;

    return !ss.fail();
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-09-17T07:33:43.703

```
 std::cout << "Enter decimal number: " ;
    std::cin >> input ;

    std::cout << "0x" << std::hex << input << '\n' ; 
```

如果您添加一个可以是布尔值、浮点数或整数的输入，它将在 int 主函数调用中传回......

使用函数模板，基于参数类型，C 生成单独的函数来适当地处理每种类型的调用。所有函数模板定义都以关键字模板开头，后跟用尖括号 < 和 > 括起来的参数。单个形式参数 T 用于要测试的数据类型。

考虑以下程序，其中要求用户输入一个整数，然后输入一个浮点数，每个程序都使用 square 函数来确定平方。使用函数模板，基于参数类型，C 生成单独的函数来适当地处理每种类型的调用。所有函数模板定义都以关键字模板开头，后跟用尖括号 < 和 > 括起来的参数。单个形式参数 T 用于要测试的数据类型。

考虑以下程序，其中要求用户输入一个整数，然后输入一个浮点数，每个程序都使用 square 函数来确定平方。

```
#include <iostream>
 using namespace std;
template <class T>      // function template
T square(T);    /* returns a value of type T and accepts                  type T     (int or float or whatever) */
  void main()
{
int x, y;
float w, z;
cout << "Enter a integer:  ";
cin >> x;
y = square(x);
cout << "The square of that number is:  " << y << endl;
cout << "Enter a float:  ";
cin >> w;
z = square(w);
cout << "The square of that number is:  " << z << endl;
}

template <class T>      // function template
T square(T u) //accepts a parameter u of type T (int or float)
{
return u * u;
}

Here is the output:

Enter a integer:  5
The square of that number is:  25
Enter a float:  5.3
The square of that number is:  28.09 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-12-13T22:07:50.230

仅使用：

`cout << dec << 0x;`

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-09-25T02:52:41.123

这也应该有效。

```
#include <ctype.h>
#include <string.h>

template<typename T = unsigned int>
T Hex2Int(const char* const Hexstr, bool* Overflow)
{
    if (!Hexstr)
        return false;
    if (Overflow)
        *Overflow = false;

    auto between = [](char val, char c1, char c2) { return val >= c1 && val <= c2; };
    size_t len = strlen(Hexstr);
    T result = 0;

    for (size_t i = 0, offset = sizeof(T) << 3; i < len && (int)offset > 0; i++)
    {
        if (between(Hexstr[i], '0', '9'))
            result = result << 4 ^ Hexstr[i] - '0';
        else if (between(tolower(Hexstr[i]), 'a', 'f'))
            result = result << 4 ^ tolower(Hexstr[i]) - ('a' - 10); // Remove the decimal part;
        offset -= 4;
    }
    if (((len + ((len % 2) != 0)) << 2) > (sizeof(T) << 3) && Overflow)
        *Overflow = true;
    return result;
} 
```

'Overflow' 参数是可选的，因此您可以将其保留为 NULL。

例子：

```
auto result = Hex2Int("C0ffee", NULL);
auto result2 = Hex2Int<long>("DeadC0ffe", NULL); 
```

# c# - 使用泛型来简化许多非常相似的方法

> ID：11031160
> 
> 赞同：0
> 
> 时间：2012-06-14T10:24:45.193
> 
> 标签：c#, generics

我有许多类（超过 40 个），每个类都有许多字段（通常是字符串或列表）。然后我有大约 8-10 个函数可以在每个类上运行（但是这些函数不是相关类的一部分......），除了它所处理的字段名称之外，每个函数都几乎相同。所以：

```
public static class CMix{

    private static List<CType1> gListType1;
    private static List<CType2> gListType2;

    //...

    public static Tuple<bool, String> FetchType1F1(int aIndex){
        //Bounds checking + return item from gListType1.
    }

    public static Tuple<boo, String> FetchType1F2(int aIndex){
        //Bounds checking + return item from gListType1.
    }

    //...

    public static Tuple<bool, ulong> FetchType2AB2(int aIndex){
        //Bounds checking + return item from gListType2.
    }

}

public class CType1{
    public String mF1;
    public String mF2;
    public ulong mF3;
}

public class CType2{
    public String mAB1;
    public ulong mAB2;
} 
```

上面的代码表明这些方法只是 get/set 方法，它们比这更复杂一些，尽管为简洁起见，我忽略了这一点。这也是方法不属于匹配类的原因（即类 CType1 中的 FetchType1F1）。

困扰我的是，除了正在处理的字段和 List 之外，每个方法的内容几乎相同。我想我也许可以使用泛型来创建几个基本方法，但是我正在努力研究如何引用正确的字段：

```
public static String FetchGenericString <ListType> (List<ListType> aList, int aIndex) {
    //For now return empty string.
    return "";
}

public static Tuple<bool, String> FetchType1F1(int aIndex){
    String mResult=FetchGenericString(gListType1, 0);
} 
```

我不确定如何将字段名称传递给 FetchGenericString 以便我可以调用它：

```
String mResult=FetchGenericString(gListType1, 0, mF1); 
```

这甚至可能不是解决问题的最佳方法，所以我会听取任何建议。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T10:33:41.630

您可以修改方法以包含要查找的属性的访问器：

```
 public static TValue FetchValue<TList, TValue>(List<TList> aList, int aIndex, Func<TList, TValue> valueSelector)
    {
        return valueSelector(aList[aIndex]);
    } 
```

然后打电话

```
String mResult=FetchGenericString(gListType1, 0, a => a.mF1); 
```

但是必须添加，变量名的这些前缀不会使您的代码非常容易阅读。您应该考虑删除它们。

# c - 有效内存区域内的无效读取

> ID：11031162
> 
> 赞同：3
> 
> 时间：2012-06-14T10:25:02.263
> 
> 标签：c, pthreads, valgrind

我正在使用 Ptreads 开发一个简单的 OCR 程序，但由于某些奇怪的原因，该程序在一个简单的任务上崩溃了。

导致崩溃的行是一个简单的赋值： `int **y=(mask->imdata);` 所有指针都正常（在 malloc 时检查以及传递给此函数时它们是相同的）

Valgrind 给出以下输出：

```
==28948== Thread 2:
==28948== Invalid read of size 4
==28948==    at 0x804913A: PearsonCorrelation (ocr_pool.c:239)
==28948==    by 0x8049342: PearsonCorrelator (ocr_pool.c:275)
==28948==    by 0x80497BF: characterSegmentation (ocr_pool.c:407)
==28948==    by 0x8049A33: lineSegmentation (ocr_pool.c:489)
==28948==    by 0x8049D64: doPage (ocr_pool.c:575)
==28948==    by 0x4076954: start_thread (pthread_create.c:300)
==28948==    by 0x41565ED: clone (clone.S:130)
==28948==  Address 0x49d18f8 is 8 bytes inside a block of size 12 free'd
==28948==    at 0x4023B6A: free (vg_replace_malloc.c:366)
==28948==    by 0x80489ED: freeImage (ocr_pool.c:77)
==28948==    by 0x8049F33: main (ocr_pool.c:610) 
```

如您所见，报告的无效读取大小为 4，在 12 个字节的区域中偏移量为 8，这怎么会是段错误的原因？

编辑：没有 Pthreads（执行与 pthreads_create() 调用相同的函数）它可以正常工作。即使在运行一个线程时，它仍然会给出段错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T15:26:15.680

我相信您可能`free`在读取之前正在读取您正在读取的内存，因为我希望这会像上面那样从 Valgrind 产生一个错误（尽管不要直接看到它本身会如何导致崩溃。 )

如果您正在写入之前使用`free`.

# wordpress - 为什么我在使用 WordPress WP_HTTP 时会收到“406 Not Acceptable”？

> ID：11031167
> 
> 赞同：2
> 
> 时间：2012-06-14T10:25:33.770
> 
> 标签：wordpress

我正在编写一个使用 WP_HTTP 进行 API 调用的 WordPress 插件。

代码如下：

```
$request = new WP_Http;
$headers = array(
    'Content-Type: application/x-www-form-urlencoded', // required
    'accesskey: abcdefghijklmnopqrstuvwx', // required - replace with your own
    'outputtype: json' // optional - overrides the preferences in our API control page
);
$response = $request->request('https://api.abcd.com/clients/listmethods', array( 'sslverify' => false, 'headers' => $headers )); 
```

但我得到的响应是“406 Not Acceptable”。

当我尝试对上述请求使用 cURL 时，请求成功。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-19T00:35:54.390

406 错误表明 Web 服务可能无法识别您的 Content-Type 标头，因此它不知道它响应的格式。您的`$headers`变量应该是一个关联数组，如下所示：

```
$headers = array(
  'Content-Type' => 'application/x-www-form-urlencoded', 
  'accesskey' => 'abcdefghijklmnopqrstuvwx',
  'outputtype' => 'json'); 
```

或看起来像原始标题（包括换行符）的字符串，如下所示：

```
$headers = "Content-Type: application/x-www-form-urlencoded \n 
  accesskey: abcdefghijklmnopqrstuvwx \n
  outputtype: json"; 
```

WP_Http 类会将原始标头字符串转换为关联数组，因此您名义上最好先将数组传递给它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-04T21:15:47.933

我知道这个答案很晚，但肯定会帮助其他人。

WP_Http 函数应该像下面这样使用

```
$url = http://your_api.com/endpoint;
$headers = array('Content-Type: application/json'//or what ever is your content type);
$content = array("first_name" => "Diane", "last_name" => "Hicks");
$request = new WP_Http;
$result = $request->request( $url, array( 'method' => 'POST', 'body' => $content, 'headers' => $headers) );

if ( !is_wp_error($result) ) {$body = json_decode($result['body'], true);} 
```

另请参阅[http://planetozh.com/blog/2009/08/how-to-make-http-requests-with-wordpress/](http://planetozh.com/blog/2009/08/how-to-make-http-requests-with-wordpress/)了解更多信息。

# php - Twitter Bootstrap 工具提示 (PHP) 在 Wordpress 中不起作用

> ID：11031170
> 
> 赞同：0
> 
> 时间：2012-06-14T10:25:47.263
> 
> 标签：php, jquery, wordpress, twitter-bootstrap, tooltip

我正在尝试使用 Twitter Bootstrap Popover / Tooltip，但我在控制台中收到以下错误：

```
Uncaught TypeError: Object #<Object> has no method 'popover' 
```

我的函数文件中有以下内容以包含文件，这些文件可以在源代码中看到，并在单击时指向正确的脚本：

```
add_action('wp_enqueue_scripts','dcr_enqueue_scripts');

if(!function_exists('dcr_enqueue_scripts')):
function dcr_enqueue_scripts(){

    wp_register_script('tooltip',get_template_directory_uri().'/js/bs-tooltip.js','jquery');
    wp_register_script('popover',get_template_directory_uri().'/js/bs-popover.js',array('jquery','tooltip'),'1.0');
    wp_enqueue_script('tooltip');
    wp_enqueue_script('popover');

}
endif; 
```

使用以下元素期待弹出窗口：

```
<th><span>Description:</span><img class="popoverthis" src="<?php bloginfo('template_url')?>/images/info.png" data-content="This is the content" title="Title"></th> 
```

而页面中包含的调用popover函数的jQuery是这样的：

```
<script type="text/javascript">
jQuery(document).ready(function() {
    jQuery('.popoverthis').popover({
        placement: "bottom"
    });
}); 
```

任何有关解决此问题的想法将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T10:55:05.020

几件事情要检查：

*   `jquery.popover.js`页面加载顺序 - 您的弹出框是否在调用 jquery 或插件之前执行？

如果这是问题，您将不得不提高/降低 enque 脚本的优先级，如下所示：

`add_action('wp_enqueue_scripts','dcr_enqueue_scripts', **5**); // default is 10`

*   你有正确的 jQuery 版本吗（wordpress 捆绑了一个，有时它可能比外部脚本所需的版本更旧）？

*   打开 firebug/web 检查器并手动运行：
    `jQuery('.popoverthis').popover({ placement: "bottom" });`

看看出了什么问题

**更新**：还有一些可能出错的事情（这是如何解决问题的列表）：

*   您在网站上包含了两个**jQuery**（可能由另一个插件） - 1.4.2 出现在 1.7.2 之后并破坏了基本的引导 javascript。
*   您缺少此插件所需的**Bootstrap CSS信息。**它确实有效，但它会在网站底部显示工具提示信息，因为没有**CSS**让它看起来很漂亮。

**解决方案**：使用来自 crowdfavorite 的独立 popovover 插件： [https](https://github.com/crowdfavorite/jquery-popover) ://github.com/crowdfavorite/jquery-popover并包含其**CSS**文件。

（您也可以引入 bootstrap 的**CSS**，但它可能会破坏您的网站**CSS**）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T14:19:25.157

我看不到任何对 $.noConflict(); 的调用

[http://api.jquery.com/jQuery.noConflict/](http://api.jquery.com/jQuery.noConflict/)

在站点关闭之前，我从控制台尝试了 jQuery('.popoverthis').hide() ，结果相同。

# maven - mvn 包失败，缺少必需的工件，即使它存在于我的远程存储库中

> ID：11031171
> 
> 赞同：5
> 
> 时间：2012-06-14T10:25:48.170
> 
> 标签：maven, maven-2, repository, artifact

我正在尝试在我的 Maven 项目上运行*mvn clean package*并失败并显示以下消息：

**工件 net.ezswitch:ResourcesComponent:jar:0.0.14 的“所需工件丢失”**

我已经配置了我的*settings.xml*以包含我的远程存储库，如果我在浏览器上导航，我实际上可以在我的存储库中找到这个 Jar，但 Maven 不知何故不能。

我检查了我正在运行的 Maven 版本是我编辑的 settings.xml 文件生效的版本，因为如果我禁用我在那里配置的配置文件，Maven 会失败并显示不同的消息。

我在 MAC OS X Lion 上使用 Maven 2.2.1。

这是我的settings.xml：

```
<localRepository>/Users/hordine/.m2/repository</localRepository>
<servers>
  <server>
      <id>LiquixRepository</id>
      <username>henrique</username>
      <password>xxxxx</password>
      <configuration>
          <httpConfiguration>
              <put>
                  <params>
                      <param>
                          <name>http.authentication.preemptive</name>
                          <value>%b,true</value>
                      </param>
                  </params>
              </put>
          </httpConfiguration>      
      </configuration>
  </server>

  <server>
      <id>dev.liquix.eu</id>
      <username>henrique</username>
      <password>xxxxx</password>
  </server>
  <server>
      <id>ezpay-dev.liquix.eu</id>
      <username>henrique</username>
      <password>xxxxx</password>
  </server>
</servers>
<profiles>
  <profile>
      <id>ezswitch</id>

      <properties>
          <tomcat.home>/System/Library/tomcat</tomcat.home>
          <subversion.user>henrique</subversion.user>
          <subversion.password>xxxxx</subversion.password>
      </properties>

      <activation>
          <jdk>1.6</jdk>
      </activation>

      <repositories>
          <repository>
              <id>central</id>
              <name>EzSwitch Cache</name>
              <layout>default</layout>
              <url>http://ezpay-dev.liquix.eu:9998/repository</url>
          </repository>
          <repository>
            <id>central_maven1</id>
            <name>EzSwitch Cache2</name>
            <layout>legacy</layout>
            <url>http://ezpay-dev.liquix.eu:9998/repository</url>
          </repository>
      </repositories>

      <pluginRepositories>
          <pluginRepository>
              <id>central</id>
              <name>EZswitch</name>
              <url>http://ezpay-dev.liquix.eu:9998/repository</url>
              <snapshots>
              </snapshots>
              <releases>
              </releases>
          </pluginRepository>
      </pluginRepositories>

  </profile>
</profiles>
<activeProfiles>
    <activeProfile>ezswitch</activeProfile>
</activeProfiles> 
```

我得到的整个错误消息是：

```
[INFO] ------------------------------------------------------------------------
[INFO] Trace
org.apache.maven.lifecycle.LifecycleExecutionException: Missing:
----------
1) net.ezswitch:ResourcesComponent:jar:0.0.14

  Try downloading the file manually from the project website.

  Then, install it using the command: 
      mvn install:install-file -DgroupId=net.ezswitch -DartifactId=ResourcesComponent -Dversion=0.0.14 -Dpackaging=jar -Dfile=/path/to/file

  Alternatively, if you host your own repository you can deploy the file there: 
      mvn deploy:deploy-file -DgroupId=net.ezswitch -DartifactId=ResourcesComponent -Dversion=0.0.14 -Dpackaging=jar -Dfile=/path/to/file -Durl=[url] -DrepositoryId=[id]

  Path to dependency: 
    1) eu.liquix:RegistrationSolution:war:0.4.60-SNAPSHOT
    2) net.ezswitch:ResourcesComponent:jar:0.0.14

----------
1 required artifact is missing.

for artifact: 
  eu.liquix:RegistrationSolution:war:0.4.60-SNAPSHOT

from the specified remote repositories:
  central (http://ezpay-dev.liquix.eu:9998/repository),
  central_maven1 (http://ezpay-dev.liquix.eu:9998/repository)

    at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoals(DefaultLifecycleExecutor.java:711)
    at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoalWithLifecycle(DefaultLifecycleExecutor.java:556)
    at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoal(DefaultLifecycleExecutor.java:535)
    at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoalAndHandleFailures(DefaultLifecycleExecutor.java:387)
    at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeTaskSegments(DefaultLifecycleExecutor.java:348)
    at org.apache.maven.lifecycle.DefaultLifecycleExecutor.execute(DefaultLifecycleExecutor.java:180)
    at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:328)
    at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:138)
    at org.apache.maven.cli.MavenCli.main(MavenCli.java:362)
    at org.apache.maven.cli.compat.CompatibleMain.main(CompatibleMain.java:60)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.codehaus.classworlds.Launcher.launchEnhanced(Launcher.java:315)
    at org.codehaus.classworlds.Launcher.launch(Launcher.java:255)
    at org.codehaus.classworlds.Launcher.mainWithExitCode(Launcher.java:430)
    at org.codehaus.classworlds.Launcher.main(Launcher.java:375) 
```

但是，如果我通过浏览器导航到该位置，我可以在以下位置看到工件：

[http://ezpay-dev.liquix.eu:9998/repository/net/ezswitch/ResourcesComponent/0.0.14/ResourcesComponent-0.0.14.jar](http://ezpay-dev.liquix.eu:9998/repository/net/ezswitch/ResourcesComponent/0.0.14/ResourcesComponent-0.0.14.jar)

我会很感激任何帮助。提前致谢。

恩里克·奥尔丁

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T09:06:44.513

显然错误消息“缺少所需的工件”隐藏了实际的根本原因，这在消息中不可见。在（-X 选项）上运行带有调试消息的 Maven 将打印出附加信息，这些信息可以更详细地了解问题所在。

为了将来参考，这次错误是

```
[WARNING] Unable to get resource 'net.ezswitch:ResourcesComponent:pom:0.0.14' from repository central (ezpay-dev.liquix.eu:9998/repository):
Specified destination directory cannot be created: /Users/hordine/.m2/repository/net/ezswitch/ResourcesComponent/0.0.14 
```

没有调试标志是不可见的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T12:53:58.787

刚遇到这个问题。在我的 Mac 上经历了这么多解决方案。最后改变了我的

~/.m2/settings.xml

改变了这个：

```
 <localRepository>${USER.HOME}/.m2/repository</localRepository> 
```

对此：

```
 <localRepository>${env.HOME}/.m2/repository</localRepository> 
```

您可以通过在终端中输入来查看必须在 Mac 上使用的所有属性

```
 export 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-15T15:22:26.717

如果您还没有，请尝试：

```
mvn -U clean package 
```

除了更新所有快照版本外，如果它们在 Maven 每天一次快照检查后被新部署到存储库，这也将迫使 Maven 更新其其他缓存的 repo 分辨率，例如 404 的。

# javascript - 闭包库在窗格之间拖动一个 goog.fx.DragListGroup 项

> ID：11031173
> 
> 赞同：2
> 
> 时间：2012-06-14T10:25:51.417
> 
> 标签：javascript, html, google-closure, google-closure-library

我目前正在使用 google 闭包库，但遇到了问题。我尝试在自己的选项卡上使用多个 DragListGroups。但现在我想在这些列表之间进行拖放，并尝试在选项卡之间进行拖动。

我的想法是让选项卡栏中的按钮可放置，这样我就可以将项目拖到页面的选项卡按钮上，页面被选中，我可以将元素放在我想要的位置。

遗憾的是 DragListGroup 无法添加不是 DragListGroups 的目标。

有人能帮我一下吗？这是我的代码： http: [//pastebin.com/r2iywr9j](http://pastebin.com/r2iywr9j) 这是css文件： http: [//pastebin.com/EBFdNhgS](http://pastebin.com/EBFdNhgS)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T20:57:26.050

DragListGroup 是一个专门的类，用于通过删除和重新插入列表项来移动它们。如果您想将项目放在非列表上，您最好直接在 goog.fx.DragDrop 之上构建，而不是尝试绕过它的假设。

请参阅此演示的源代码，其中包括将列表项拖放到按钮上：[http ://closure-library.googlecode.com/svn/trunk/closure/goog/demos/dragdrop.html](http://closure-library.googlecode.com/svn/trunk/closure/goog/demos/dragdrop.html)

Closure wiki 有一个很好的概述：[http ://code.google.com/p/closure-library/wiki/DragDrop](http://code.google.com/p/closure-library/wiki/DragDrop)

# objective-c - 表格视图选择和更新单元格值的示例

> ID：11031174
> 
> 赞同：0
> 
> 时间：2012-06-14T10:25:56.733
> 
> 标签：objective-c, ios5

我有两个表视图，当用户单击第一个表的一个单元格时，会出现第二个表视图。但我不知道如何用第二个中的选定值更新第一个视图控制器。拜托，你能分享任何链接或例子吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T10:42:00.197

您可以像这样区分 tableView...这里我采用两个 tableView 即 tblMain1 和 tableDetail

```
 - (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    // Return the number of rows in the section.
    if (tableView==tblMain) 
    {
        return [arrOfProfileView count];
    }
    else
    {
        return [arrOfProfileView2 count];
    }
 }

 - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:nil];
    if (cell == nil) 
    {
        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:nil] autorelease];
    }
    if (tableView==tblMain) 
       {
           //write code here for your mainTable.
       }
       else
       {
           //write code here for your detailTable.
       }

      return cell
 }

-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    if (tableView==tblMain1) 
    {
        //write code here
        [tableDetail reloadData];
    }
    else{
         //write code here
         [tblMain1 reloadData];
    }
} 
```

# joomla - Joomla 创建模板，如 http://launchrock.com/features

> ID：11031177
> 
> 赞同：1
> 
> 时间：2012-06-14T10:26:07.893
> 
> 标签：joomla

[http://launchrock.com/features](http://launchrock.com/features)

我想创建一个模板，如[http://launchrock.com/features](http://launchrock.com/features) ..

我想知道它是如何实现的，如何创建他们使用的滑动效果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T13:58:42.730

好吧，那个网站不是 joomla，我认为用有限的知识构建一个复杂的模板将是一场噩梦。

我强烈建议使用现有的模板框架，如[RocketTheme](http://www.rockettheme.com/)或其他入门。 [JoomlaXTC](http://joomlaxtc.com/)还有一些非常酷的滑动/图形模板。您可以在那里看到库和图形是如何合并到 Joomla 框架中以获得您想要的效果的。祝你好运

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T14:07:45.767

正如@GDP 所说，为 Joomla 创建模板会很困难。我已经使用 Joomla 多年，但仍然没有为 Joomla 制作模板，因为它需要很多时间，不像典型的 CSS 模板。我的建议如下：

1.  如果您正在寻找厚重、时尚、专业和功能丰富的东西，请从 Yootheme、Rockettheme、Joomlart 等知名公司购买模板。
2.  [如果您真的有时间，请在此处](http://extensions.joomla.org/extensions/tools/design-tools/18381)下载空白模板广告从头开始构建。
3.  下载免费模板，例如 Yootheme Master 主题。
4.  使用 YouGrids、T3 或 Construct5 等框架来辅助

# facebook - 在单个 fql 中为每个朋友获取 Facebook Friend 照片 2

> ID：11031189
> 
> 赞同：0
> 
> 时间：2012-06-14T10:26:59.103
> 
> 标签：facebook

我在尝试

```
SELECT object_id, src_big,owner
    FROM photo WHERE pid
        IN ( SELECT pid FROM photo WHERE aid
        IN ( SELECT aid FROM album WHERE owner
        IN ( SELECT uid2 FROM  friend WHERE uid1 = me()))) ORDER BY created DESC LIMIT 20 
```

但它只给了 2 张照片，但不是给每个朋友。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T10:37:32.323

也许这应该工作！

```
SELECT src_big_width,src_big_height, caption, owner, pid, src_big , src_small ,aid, created FROM photo WHERE aid IN (SELECT aid FROM album WHERE owner IN (SELECT uid2 FROM friend WHERE uid1=me())) 
```

您需要`friends_photos`获得访问权限。此外，通过使用 Graph API 资源管理器检查您是否可以在 Graph API 中查看照片，以检查那里是否有可以通过您的 access_token 访问的数据。这将有助于排除 FQL 查询的问题。

# jquery - 如何使用淡出效果更改表格行的背景颜色？

> ID：11031190
> 
> 赞同：0
> 
> 时间：2012-06-14T10:27:03.400
> 
> 标签：jquery, css

从表中删除行时，我想更改行的背景颜色（变为红色）。

到目前为止，这是我的代码：

```
$('.delete').click(function(){
    $id=$(this).attr('id');
    $row = $(this).parents('tr:first');
    $.ajax({
        url:'admin/delete_post',
        dataType:'json',
        type:'POST',
        data:'id=' + $id,
        error:function(){
            alert('There was an error');
        },
        success:function(data){
            $row.fadeOut(600,function(){
                $(this).remove();
            });
        }

    })
}); 
```

**编辑：包括标记。**

```
<tr>
    <td>abc</td>
    <td>
       <div class="controls ">
         <textarea class="input-xlarge span10" name="content" id="textarea" rows="5"                       
         cols="45">text</textarea>
       </div></td>
    <td>
      <a class="btn delete" id="58"><i class="icon-trash"></i> Delete</a>
      <a class="btn save" ><i class="icon-ok"></i> Save</a>
    </td>
</tr> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T10:28:42.473

```
success:function(data){
     $row.find('td').css('backgroundColor', 'red').end().fadeOut(600,function(){
          ...
     });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T10:28:37.013

在你的帖子里没有唱的`$this`，我觉得应该的`this`。

```
$row.css('background', 'red')
    .fadeOut(600,function(){
          $(this).remove();
    }); 
```

# c# - 通过在 C# 中导入 DLL 来重用 C++ 函数

> ID：11031196
> 
> 赞同：0
> 
> 时间：2012-06-14T10:27:17.610
> 
> 标签：c#, c++, dllimport

在将 C++ 创建的 DLL 导入 C# 时，我遇到了一些一般性问题。

1) 我编写了使用指针的 C++ 函数，例如双指针、指针数组等。例如`static int someFunc(char *var[])` ，我如何重新使用它们，因为 C# 不支持指针。

2) 我需要在 C# 中通过 [DllImport()] 公开所有函数吗？即我有一个名为 someFunc 的函数，它在内部调用其他函数。我是否应该在“DllImport”下也公开这些功能

3) 谁能解释为什么我需要在 C# 中处理非托管代码，尤其是当我从 C++ 导入 dll 时？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T10:41:29.100

第 1 点答案：在 C# 中的函数声明中使用 unsafe 关键字

```
static unsafe int someFunc(char* var[]); 
```

第2点答案：不需要导入所有功能。只导入 someFunc()

第 3 点答案：C# 使用类型安全的托管代码并引用一些有效的内存位置。然而，C++ 中的指针可能引用也可能不引用任何有效的内存位置。所以你需要在 C# 中处理非托管代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T10:48:44.287

C# 确实支持不安全区域中的指针，但是，您也可以使用类似于 C++ 的 void* DllImport 的 IntPtr，并将 IntPtr 作为参数或返回值。

然而，正确的做法是使用[封送处理](http://msdn.microsoft.com/en-us/library/s97shtze.aspx)将 char* 自动转换为 System.String，反之亦然。（并将[char* 数组转换为字符串数组](http://www.codeproject.com/Articles/17450/Marshal-an-Array-of-Zero-Terminated-Strings-or-Str)。）

# web-services - 从 web 服务调用批处理文件以写入文本文件

> ID：11031198
> 
> 赞同：1
> 
> 时间：2012-06-14T10:27:22.317
> 
> 标签：web-services, mercurial, mercurial-hook

这可能看起来有点疯狂，但如果你能告诉我更好的方法，请这样做。我需要一个 web 服务来显示当前版本的 mercurial 修订号。

我有一个非常简单的批处理文件，可以将此数字写入文本文件

```
cd C:\inetpub\wwwroot\MyWebsite
hg identify --num > services\version.txt 
```

和一个*应该*调用批处理文件的方法，然后读取文件的内容，现在，写入屏幕（我在网页中执行此操作，但稍后将迁移到一个简单的服务）

```
Private Sub GetVersionNumber()
    Dim versionFile = Server.MapPath("~/services/version.txt")
    Dim batchFile = Server.MapPath("~/services/version.bat")
    Process.Start(batchFile)

    Dim revision As String = String.Empty
    Using reader As New StreamReader(versionFile)
        Do While reader.Peek() <> -1
            revision = reader.ReadLine()
        Loop
    End Using
    Response.Write(revision)
End Sub 
```

我已授予每个人对服务目录的写入权限，并明确授予 version.txt，但是当我点击页面时，version.txt 文件始终为空。如果我在记事本++中打开了文件，那么我会收到一条消息，说文件已被另一个程序修改，我想重新加载它吗？当我这样做时，它是空的。如果我在文件中设置一些文本并保存，然后再次访问网页，我的文本文件的内容就会被清除。

我在 try/catch 块中有这个，但没有抛出异常，所以我删除了它（为了清楚起见）。

最终，我只需要获取
hg identify --num的结果，
以在网页/服务上显示为字符串，该字符串将由单独的 SharePoint 站点调用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T10:36:31.627

批处理文件为空的原因是，以这种方式启动并运行的进程只有在父线程处于活动状态时才能处于活动状态。此外， using`Process.Start`不会等待该过程完成。如[文档](http://msdn.microsoft.com/en-us/library/e8zac0ca.aspx)中所述，此方法的返回值是一个布尔值，指示该过程是否开始。由于您将其视为无效，因此一旦进程启动，您的程序就会继续运行并完成（因为它是一个 Web 服务）。

一旦您的 Web 服务退出子程序，线程就会终止，所有子进程也会随之终止。具体来说，当前正在运行批处理文件的 cmd.exe 在它真正开始之前就被终止了，因为您的流读取器正在读取一个空文件。

如果您可以保证您的批处理文件将很快处理，您​​可能会尝试避免使用`Thread.Sleep`导致 Web 服务调用暂停足够长的时间以使该批处理文件完成处理，但这始终是一个竞争条件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T14:05:00.237

我会直接调用 Mercurial 并从其标准输出流中读取：

```
var hg = new ProcessStartInfo("C:\Program Files\Mercurial\hg.exe", "identify --num -R c:\inetpub\webroot");
hg.RedirectStandardOutput = True;
hg.RedirectStandardInput = True;
hg.UseShellExecute = False;
hg.CreateNoWindow = True;

var hgProc = New Process()
hgProc.StartInfo = hg
hgProc.Start()

var repoID = hgProc.StandardOutput.ReadToEnd() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T10:35:09.187

您可以配置 Mercurial 更新挂钩以在每次工作副本更新时自动调用您的识别命令，而不是每次请求页面时都从 Web 服务器手动调用批处理文件。

例如，将其添加到存储库的`.hg\hgrc`文件中：

```
[hooks]
update.writeversion = hg identify --num > services\version.txt 
```

一些带有钩子附加信息的链接：

*   [http://hgbook.red-bean.com/read/handling-repository-events-with-hooks.html](http://hgbook.red-bean.com/read/handling-repository-events-with-hooks.html)
*   [https://www.mercurial-scm.org/wiki/Hook](https://www.mercurial-scm.org/wiki/Hook)
*   [http://www.selenic.com/mercurial/hgrc.5.html#hooks](http://www.selenic.com/mercurial/hgrc.5.html#hooks)

# windows-7 - 如何为通过 SSL 进行双向身份验证的本地测试创建客户端证书？

> ID：11031200
> 
> 赞同：26
> 
> 时间：2012-06-14T10:27:34.037
> 
> 标签：windows-7, iis-7, ssl-certificate, client-certificates

我正在尝试在 IIS7 上运行的 Web 应用程序上设置双向身份验证。客户将主要是移动设备，首先我试图让一个使用第三代 iPad 运行的演示。我想我会先让它在我的工作站（也运行 IIS）上运行，然后在 iPad 上复制工作证书。

但是我碰壁了。

我已经让网站通过 https 安全运行并安装了自签名服务器证书，但是我似乎无法弄清楚如何生成可以安装在 iPad 上的*客户端证书。*当我在运行 Windows 7 的本地工作站上工作时，我不能使用通常`http://machinename/CertSvr`的方法来执行此操作。

~~所以我想知道是否有办法`makecert`生成测试客户端证书，或者我是否可以更改服务器证书中的使用标志以使其适合在客户端上使用。或者也许有一些工具在谷歌搜索的最后一天还没有发现？~~

更新：

我找到[了这个指南](http://www.digitallycreated.net/Blog/38/using-makecert-to-create-certificates-for-development)，并按照它来写信。一切似乎都正常，没有错误，最后我得到了两个 pfx 文件，一个用于服务器，一个用于客户端（我使用这些文件生成这些文件`pvk2pfx`并保留原始文件`.pvk`和`.cer`文件以防万一）。

我在.下安装了服务器证书，在.下`Certificates (Local Computer) > Trusted Root Certification Authority`安装了客户端证书`Certificates (Current User) > Personal`。我还将服务器证书（CA 证书）导入 IIS。当 IIS 配置为接受或忽略客户端证书时，一切正常。但是，一旦将其设置为“要求”，我在请求站点时就会得到 403.7。我还尝试将客户端证书导入 IE/Chrome 中的证书存储区，但还是没有骰子。

有什么明显的我做错了吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-10-18T19:16:31.763

当你问这个问题时，也许这并不存在，但微软现在有一个[指南](http://msdn.microsoft.com/en-us/library/ff650751.aspx)可以做到这一点。易于理解，对我来说非常完美！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2019-08-01T14:26:47.713

**在本地 IIS Express**上启用客户端证书：

将 \YourSlnFolder\.vs\config\applicationhost.config ->`<section name="access" overrideModeDefault="Deny" />`更改为`<section name="access" overrideModeDefault="Allow" />`

```
<sectionGroup name="system.webServer">
...
  <sectionGroup name="security">
  ...
    <section name="access" overrideModeDefault="Allow" /> 
```

然后像这样编辑您的 Web.config：

```
<configuration>
    <system.webServer>
        <security>
            <access sslFlags="SslRequireCert" />
        </security>
    </system.webServer>
</configuration> 
```

**在IIS**上启用客户端证书：

转到 IIS 管理器中的网站，然后单击 SSL 设置。然后将应用程序设置为需要 SSL 和需要客户端证书。

[![在此处输入图像描述](../Images/1cce1eef447cac16c03cd3ec89cb016b.png)](https://i.stack.imgur.com/y67EC.png)

## 创建新证书：

启动 VS 开发者命令提示符

### 根证书：

```
makecert.exe -r -n "CN=TestRootCertificate" -pe -sv TestRootCertificate.pvk -a sha1 -len 2048 -b 01/01/2017 -e 01/01/2030 -cy authority TestRootCertificate.cer 
```

输入您的密码。

创建证书吊销列表 (CRL)

```
makecert -crl -n "CN=TestRootCertificate" -r -sv TestRootCertificate.pvk TestRootCertificate.crl 
```

捆绑到 .pfx（pvk2pfx.exe 需要为 VS2017 安装“使用 C++ 进行桌面开发”）

```
pvk2pfx.exe -pvk TestRootCertificate.pvk -pi {password} -spc TestRootCertificate.cer -pfx TestRootCertificate.pfx 
```

### 来自根证书的客户端证书：

```
makecert.exe -ic TestRootCertificate.cer -iv TestRootCertificate.pvk -pe -sv localtestclientcert.pvk -a sha1 -n "CN=localtestclientcert" -len 2048 -b 01/01/2015 -e 01/01/2030 -sky exchange localtestclientcert.cer -eku 1.3.6.1.5.5.7.3.2 
```

输入您的密码。

```
pvk2pfx.exe -pvk localtestclientcert.pvk -pi {password} -spc localtestclientcert.cer -pfx localtestclientcert.pfx 
```

**导入证书。**

启动 mmc.exe。

```
File -> Add or Remove Snap-ins -> Certificates -> Add -> Computer account -> Local computer

Certificates (Local Computer) -> Personal -> Certificates -> Right click -> All tasks -> Import -> localtestclientcert.pfx

Certificates (Local Computer) -> Trusted Root Certification Authorities -> Certificates -> Right click -> All tasks -> Import -> RootCertificate.cer 
```

用于在浏览器中进行身份验证：

```
File -> Add or Remove Snap-ins -> Certificates -> Add -> My user account

Certificates - Current User -> Personal -> Certificates -> Right click -> All tasks -> Import -> localtestclientcert.pfx 
```

现在访问您的站点需要服务器信任的客户端证书：

[![在此处输入图像描述](../Images/e65e1aeeb0276a8fc8f6cb0e4ebf7d86.png)](https://i.stack.imgur.com/fjx1B.png)

**如果您已遵循本指南并收到如下错误：**

```
HTTP Error 500.19 - Internal Server Error
The requested page cannot be accessed because the related configuration data for the page is invalid. 
```

或者

```
HTTP Error 403.7 - Forbidden
The page you are attempting to access requires your browser to have a Secure Sockets Layer (SSL) client certificate that the Web server recognizes. 
```

您可能需要重新启动计算机。请注意，仅关闭 iisexpress 进程或 Visual Studio 是不够的。`500.19`无需重新启动即可解决，但证书很棘手，因此推荐的方法是重新启动计算机。

如果您收到错误`The request was aborted: Could not create SSL/TLS secure channel`，可能是由于应用程序池无权访问特定证书。

证书（本地计算机） -> 个人 -> 证书 -> localtestclientcert -> 右键单击​​ -> 所有任务 -> 管理私钥 -> 添加`IIS APPPOOL\YourWebSite`并授予它完全控制权。

# maven - 如何从ant中的pom文件中获取值

> ID：11031205
> 
> 赞同：0
> 
> 时间：2012-06-14T10:27:44.910
> 
> 标签：maven, ant, pom.xml

嗨，这是我的 pom 文件

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">

    <modelVersion>4.0.0</modelVersion>
    <parent>
        <groupId>mycompany.com</groupId>
        <artifactId>mercury</artifactId>
        <version>1249</version>
    </parent>

    <groupId>mycompany.com.tools.mm</groupId>
    <artifactId>parent</artifactId>
    <version>1249</version>
    <packaging>pom</packaging>
    <name>parent</name>
    <description>The parent to all MM projects</description>

    <properties>
        <mercury.version>@product.version@</mercury.version>
        <abc.version>7.0</abc.version>
    <metamodel.test>true</metamodel.test>
    </properties>
</project> 
```

在 ant 中，我想获得 abc.version 的值> 我正在编写这段代码

```
<artifact:pom id="mypom" file="C:\work\build\pom.template.xml" />

<echo>The version is ${mypom.properties.version}</echo> 
```

但它不起作用，有人可以帮忙吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T11:22:31.030

您应该将其更改为：

```
<echo>The version is ${mypom.properties.abc.version}</echo> 
```

# netbeans - 避免在 netbeans 中重新部署

> ID：11031206
> 
> 赞同：1
> 
> 时间：2012-06-14T10:27:56.437
> 
> 标签：netbeans, jboss, liferay, icefaces, redeploy

我最近开始使用带有以下堆栈 Liferay 的 Netbeans，带有 jBoss 的 icefaces。每次在 java 文件或 jsp 文件中更改代码时，都需要清理重建和重新部署应用程序。有没有办法像在 Eclipse 中那样自动执行此操作。只需保存文件构建并部署即可。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T11:06:58.670

我对 JBoss 不是很熟悉，但是在 Tomcat 中具有某些设置，您可以直接在 Tomcat 中编辑 JSP，并在页面重新加载后查看更改。

还有一个名为 JRebel 的商业工具，它允许您在不重新部署的情况下进行更改。这适用于 JSP、Java 文件和支持的框架（例如，对于 Spring，它允许重新加载配置文件）。

# javascript - jquery 中的 .remove() 不会立即删除 DOM

> ID：11031207
> 
> 赞同：-1
> 
> 时间：2012-06-14T10:27:57.420
> 
> 标签：javascript, jquery

我有以下功能来删除 DOM 元素“div”，

```
$('#emDiv').on("click", ':button[data-emp-del="true"]', function (evt) {
        evt.preventDefault();
        // Get Row - "emp0" or "emp1" etc ...
        var rowId = "#" + $(this).data('emp-id');

        // Remove the DIV
        $(rowId).fadeOut('normal', function () {
            $(this).remove();
        });

        // The results below returns even the one that was removed
        // $('div[id^="emp"]')

        return false;
    }); 
```

当我想遍历剩余的 DIV 更改其 ID 时，如何立即完全删除上面的 DIV。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T10:30:47.667

将剩余代码也放在淡出回调函数中。javascript 语句异步执行，这就是你获得元素的原因。相反，您的元素会在 1 秒后被删除。

# kernel - 没有堆分配内存（内核地址）

> ID：11031208
> 
> 赞同：1
> 
> 时间：2012-06-14T10:28:04.767
> 
> 标签：kernel, malloc, heap-memory, object-address

当我在内核中找到地址时，我有一个问题。我在内核中插入了一个 hello 模块，在这个模块中，我使用[了这个解决方案](https://stackoverflow.com/questions/10959225/the-address-in-kernel)。

现在我可以使用`kmalloc`通过`virt_to_phys`.

```
char *mystring = kmalloc(19, GFP_KERNEL);
strcpy(mystring, "this is my address"); 
printk("<1>The address of mystring is %p", virt_to_phys(mystring)); 
```

但我想知道如何找到`char mystring[]="this is my address";`. 这不是堆分配的内存，对吧？如何通过某些功能找到它？

PS：我使用了一个工具来转储整个内存，物理地址。

# spring-mvc - @ResponseBody 返回类型；接受标头的 406 错误

> ID：11031218
> 
> 赞同：1
> 
> 时间：2012-06-14T10:28:43.897
> 
> 标签：spring-mvc, annotations, http-status-code-406

我正在使用 Spring MVC

```
<mvc:annotation-driven/> 
```

在我的配置文件中。

我的控制器方法是

```
public @ResponseBody ArrayList<AccountDetails> create(UploadItem uploadItem)   {  
..............
return list;
} 
```

使用jre1.7

仍然收到接受标头的 HTTP 状态 406 错误..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T21:48:34.483

您的问题在细节上非常稀疏，但这是在黑暗中拍摄的。

请求中传递了哪些接受标头？

您期望返回什么（XML？JSON？）以及您期望它如何发生。

如果您在类路径上有 JAXB，并且客户端指定它接受 xml，那么 spring 将为您将其转换为 XML。

如果您在类路径中有 Jackson，并且客户端指定它接受 JSON，那么 spring 将为您将其转换为 JSON。

你满足这些条件中的任何一个吗？

[Spring MVC 3：通过@ResponseBody 返回XML](https://stackoverflow.com/questions/4856298/spring-mvc-3-returning-xml-through-responsebody)可能会为您提供更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T21:38:42.597

我认为为了让这个工作你必须明确声明消息转换器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-16T17:10:41.150

当接受标头正确但 JAXB 配置缺少编组对象所在的包名称时，我们遇到了类似的 Spring 406 返回代码（该 jar 在该包中有一个 jaxb.in​​dex 文件，但 Spring/JAXB 不知道它。

<oxm:jaxb2-marshaller id="jaxbMarshaller" contextPath="colon-separated-list-of-packages" />

这是 Spring 3.20

# shell - 在 ubuntu 的 shell 脚本中调整图像大小

> ID：11031222
> 
> 赞同：1
> 
> 时间：2012-06-14T10:29:03.413
> 
> 标签：shell, ubuntu

我有两张图片。我创建了一个 .sh 文件来操作它。首先，我为此使用for循环..

我的导演结构：-

测试图像文档 newimage angelimage test.sh 5elements10.png boltonclinics5.png

现在我希望将 2 个图像与 3rd.png 合成并存储在**newimage**中，之后我希望将**newimage**文件夹中的图像转换为特定的天使。所以我尝试使用代码

```
 #!/bin/bash
for f in $( ls *.png ); do
  composite -gravity center $f ./doc/back.png ./newimage/new$f
done 
for f in `ls ./newimage`; do

  convert $f -rotate -7 ./angelimage/ang$f
done 
```

现在我发现 for 循环可以正常工作，但是第二个循环会出现如下错误

```
convert: unable to open image `new-5elements10.png':  @ error/blob.c/OpenBlob/2587.
convert: unable to open file `new-5elements10.png' @ error/png.c/ReadPNGImage/3234.
convert: missing an image filename `new-5elements10.png' @ error/convert.c/ConvertImageCommand/3011.
convert: unable to open image `new-boltonclinics5.png':  @ error/blob.c/OpenBlob/2587.
convert: unable to open file `new-boltonclinics5.png' @ error/png.c/ReadPNGImage/3234.
convert: missing an image filename `new-boltonclinics5.png' @ error/convert.c/ConvertImageCommand/3011. 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-14T10:40:01.250

不要使用 ls(1) 生成提供给命令的文件列表。简单的 glob 扩展就足够了（如下所示）。

引用您的变量以防止出现空格问题。

如果您的代码中没有任何其他逻辑错误，则应该可以：

```
#!/bin/bash

for f in *.png;
do
    composite -gravity center "$f" ./doc/back.png "./newimage/new${f}"
done 

for f in ./newimage/*;
do
    convert -rotate -7 "$f" "./angelimage/ang$(basename "$f")"
done 
```

# jquery - jquery 调用正在返回 $ 是未定义的错误

> ID：11031223
> 
> 赞同：0
> 
> 时间：2012-06-14T10:29:09.560
> 
> 标签：jquery

我在运行我的 jsp 页面时遇到问题。

我的 jsp 页面引用了一些 .js 文件，比如（file1.js），在 file1.js 中，我正在调用 jquery 调用，例如`$(document).ready`. IE浏览器报错：

> 脚本5009：`'$' is undefined file1.js, line 225 character 1`

我在 Firefox 上也看到了同样的异常。

我已经在我的jsp中包含了`<script src="http://code.jquery.com/jquery-latest.js"></script>` and 。`<script type="text/javascript" src="/js/file1.js"></script>`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T10:31:19.163

*   检查您是否包含 jQuery 库
*   `file1.js`在 jQuery 库加载后附加到文档（如果您已经添加它）。

在任何其他 js 加载之前添加 jQuery 库，如下所示

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script> 
```

### 还有一个重要的注意事项

不要忘记将所有 jQuery 代码放入其中

```
$(document).ready(function() {
  // your code
}); 
```

简而言之

```
$(function() {
   // your code
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T10:31:53.750

`<head>`在部分中添加此 jquery 库

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script> 
```

或尝试`jQuery.noConflict()`

[http://api.jquery.com/jQuery.noConflict/](http://api.jquery.com/jQuery.noConflict/)

# nhibernate - 多个数据库提供程序 - 没有可用的数据库提供程序

> ID：11031224
> 
> 赞同：3
> 
> 时间：2012-06-14T10:29:11.060
> 
> 标签：nhibernate, spring.net

我在我的 spring 配置中像这样配置了两个数据库提供程序（分布在两个不同的文件中）

```
<db:provider id="FirstDbProvider"
                   provider="MySql"                   connectionString="Database=xxxxxxx;Host=xxxxxxx;Username=xxxxxxx;Password=xxxxxxxxx"/>

  <db:provider id="SecondDbProvider"
                   provider="MySql"                   connectionString="Database=xxxxxxx;Host=xxxxxxx;Username=xxxxxxx;Password=xxxxxxxxx"/> 
```

但是当我尝试运行我的应用程序时，它会在创建使用 SecondDBProvider 的 sessionFactory 时失败。我明白了

在“文件 [Second.Dao.xml] 第 21 行”中定义的 SecondSessionFactory'：对象初始化失败：没有可用的 DB 提供程序，无法创建连接

我应该可以以这种方式使用两个数据库提供程序吗？任何可能导致此错误的想法。我可以使用我的数据库提供程序中指定的凭据等从命令行连接到数据库。

如果我回到只有一个数据库，它会完美运行。我可以将第二个 db:provider 添加到我的 spring.dao.xml 文件中，它仍然可以工作（即我可以从第一个数据库中检索实体）。只有当我添加第二个 sessionFactory 时它才会停止工作并且我无法检索任何内容，甚至从第一个数据库中也无法检索。

所以，我猜某处可能正在共享某些东西并导致冲突

更新

这是配置（出于明显的原因，我重命名了一些东西）

```
<?xml version="1.0" encoding="utf-8" ?>
<objects xmlns="http://www.springframework.net"
         xmlns:db="http://www.springframework.net/database">

  <!-- Referenced by main application context configuration file -->
  <description>
    Config for Database 1
  </description>

  <!-- Property placeholder configurer for database settings -->
  <object type="Spring.Objects.Factory.Config.PropertyPlaceholderConfigurer, Spring.Core">
    <property name="ConfigSections" value="databaseSettings"/>
  </object>

  <!-- Database Configuration -->
  <db:provider id="FirstDbProvider"
                   provider="MySql"
                   connectionString="Database=xxxxx;Host=xxxxxxx;Username=xxxxxx;Password=xxxxxx"/>

  <!-- NHibernate Configuration -->
  <object id="FirstSessionFactory" type="Utils.Hibernate.CustomLocalSessionFactoryObject, Utils">
    <property name="DbProvider" ref="FirstDbProvider"/>
    <property name="MappingAssemblies">
      <list>
        <value>FirstDao.Dao</value>
      </list>
    </property>
    <property name="HibernateProperties">
      <dictionary>
        <entry key="hibernate.connection.provider" value="NHibernate.Connection.DriverConnectionProvider"/>
        <entry key="dialect" value="NHibernate.Dialect.MySQLDialect"/>
        <entry key="connection.driver_class" value="NHibernate.Driver.MySqlDataDriver"/>
        <entry key="use_proxy_validator" value="false" />
        <entry key="show_sql" value="true"/>
        <entry key="format_sql" value="false"/>
        <entry key="generate_statistics" value="false"/>
        <entry key="adonet.batch_size" value="20"/>
        <entry key="hbm2ddl.auto" value="update"/>
        <entry key="prepare_sql" value="true"/>
      </dictionary>
    </property>
    <property name="ExposeTransactionAwareSessionFactory" value="true" />
  </object>

  <!-- Transaction Management Strategy - local database transactions -->
  <object id="transactionManager"
        type="Spring.Data.NHibernate.HibernateTransactionManager, Spring.Data.NHibernate32">

    <property name="DbProvider" ref="FirstDbProvider"/>
    <property name="SessionFactory" ref="FirstSessionFactory"/>

  </object>

  <!-- Exception translation object post processor -->
  <object type="Spring.Dao.Attributes.PersistenceExceptionTranslationPostProcessor, Spring.Data"/>

  <!-- Data Access Objects -->
  <object id="firstDao" type="FirstDao.Dao.MyDao, HRDataCheck.Dao">
    <property name="SessionFactory" ref="FirstSessionFactory"/>
  </object>

</objects> 
```

这是我的第二个文件（用于其他 DBProvider）

```
<?xml version="1.0" encoding="utf-8" ?>
<objects xmlns="http://www.springframework.net"
         xmlns:db="http://www.springframework.net/database">

  <!-- Database Configuration -->
  <db:provider id="SecondDbProvider"
                   provider="MySql"
                   connectionString="Database=xxxxxx;Host=xxxxxx;Username=xxxxx;Password=xxxxxxxx"/>

  <!-- NHibernate Configuration -->
  <object id="SecondSessionFactory" type="Utils.Hibernate.CustomLocalSessionFactoryObject, Utils">
    <property name="DbProvider" ref="SecondDbProvider"/>
    <property name="MappingAssemblies">
      <list>
        <value>SecondDao.Dao</value>
      </list>
    </property>
    <property name="HibernateProperties">
      <dictionary>
        <entry key="hibernate.connection.provider" value="NHibernate.Connection.DriverConnectionProvider"/>
        <entry key="dialect" value="NHibernate.Dialect.MySQLDialect"/>
        <entry key="connection.driver_class" value="NHibernate.Driver.MySqlDataDriver"/>
        <entry key="use_proxy_validator" value="false" />
        <entry key="show_sql" value="true"/>
        <entry key="format_sql" value="false"/>
        <entry key="generate_statistics" value="false"/>
        <entry key="adonet.batch_size" value="20"/>
        <entry key="prepare_sql" value="true"/>
      </dictionary>
    </property>
    <property name="ExposeTransactionAwareSessionFactory" value="true" />
  </object>

  <!-- Data Access Objects -->
  <object id="secondDao" type="Blah.SecondDao, SecondDaoAssembly">
    <property name="SessionFactory" ref="SecondSessionFactory"/>
  </object>

</objects> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T15:39:04.977

这是您的问题：您的 SecondSessionFactory 没有事务管理设置。

```
<object id="transactionManager"
         type="Spring.Data.NHibernate.HibernateTransactionManager, Spring.Data.NHibernate32">
     <property name="DbProvider" ref="FirstDbProvider"/>
     <property name="SessionFactory" ref="FirstSessionFactory"/>

   </object> 
```

尝试 `<!--Transaction Management Strategy - local database transactions--> <object id="transactionManager" type="Spring.Data.Core.TxScopeTransactionManager, Spring.Data"> <property name="TransactionSynchronization" value="Always"/> </object>`

# ruby - 如何在 ruby 中以非常短的方式处理 xml

> ID：11031226
> 
> 赞同：1
> 
> 时间：2012-06-14T10:29:29.203
> 
> 标签：ruby, xml, rexml

我要处理的 xml 是这样的（来自 dict api）。它给了我一个 xml 文件。所以我想从这个xml中得到一个解决方案。

```
<?xml version="1.0" encoding="UTF-8"?>
<dict num="219" id="219" name="219">
    <key>renown</key>
    <ps>riˈnaun</ps>
    <pron>http://res.iciba.com/resource/amp3/0/0/d5/7a/d57a74f04be82105a2e51d1bed71a667.mp3</pron>
    <ps>rɪˈnaʊn</ps>
    <pron>http://res.iciba.com/resource/amp3/1/0/d5/7a/d57a74f04be82105a2e51d1bed71a667.mp3</pron>
    <pos>n.</pos>
    <acceptation>名望，声誉；</acceptation>
    <sent>
        <orig>
            His renown has spread throughout the country.
        </orig>
        <trans>
            他的名声已传遍全国。
        </trans>
    </sent>
    <sent>
        <orig>
            It's just these heart-thrilling chapters that brought his work world renown.
        </orig>
        <trans>
            正因这些扣人心弦的篇章才使得他的作品举世闻名。
        </trans>
    </sent>
</dict> 
```

我这样处理这个xml

```
require 'rexml/document' 
include REXML 
def parse  
    doc = Document.new(@result)  
    doc.elements.each("dict/key") { |e| puts e.text }  
    doc.elements.each("dict/ps") { |e| puts "[" + e.text + "]" }  
    pos_array = Array.new()  
    doc.elements.each("dict/pos") { |e| pos_array.push(e.text) }  
    acc_array = Array.new()  
    doc.elements.each("dict/acceptation") { |e| acc_array.push(e.text) }  
    pos_array.each_index { |i| puts pos_array[i] + " " + acc_array[i] }  
    pos_array.clear  
    doc.elements.each("dict/sent/orig") { |e| pos_array.push(e.text) }  
    acc_array.clear  
    doc.elements.each("dict/sent/trans") { |e| acc_array.push(e.text) }  
    pos_array.each_index { |i| puts "例句" + (i+1).to_s + "：" + pos_array[i] + " " + acc_array[i] }  
  end 
```

我想要一个简短的解决方案，有什么简短的解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T10:37:04.467

您可以使用 gem *xml-simple*

```
server_config = XmlSimple.xml_in(server_config_path,
                             {'keyAttr' => 'name', 'ForceArray' => false}) 
```

将返回带有 xml 结构的哈希。

# javascript - 35 个字符后在多行文本框中自动换行

> ID：11031229
> 
> 赞同：0
> 
> 时间：2012-06-14T10:29:41.927
> 
> 标签：javascript, jquery, asp.net

```
<asp:TextBox CssClass="txt" ID="TextBox1" runat="server"
             onkeyup="CountChars(this);" Rows="20" Columns="35" 
             TextMode="MultiLine" Wrap="true">
</asp:TextBox> 
```

我需要在多行文本框中实现自动换行。我不能让用户每行写超过 35 个字符。我正在使用以下代码，它在每一行的指定字符处精确中断，将单词切成两半。我们能否解决这个问题，如果当前行没有足够的空间放置单词，我们将整个单词移动到下一行？

```
function CountChars(ID) {
    var IntermediateText = '';
    var FinalText = '';
    var SubText = '';
    var text = document.getElementById(ID.id).value;
    var lines = text.split("\n");
    for (var i = 0; i < lines.length; i++) {
        IntermediateText = lines[i];
        if (IntermediateText.length <= 50) {
            if (lines.length - 1 == i)
                FinalText += IntermediateText;
            else
                FinalText += IntermediateText + "\n";
        }
        else {
            while (IntermediateText.length > 50) {
                SubText = IntermediateText.substring(0, 50);
                FinalText += SubText + "\n";
                IntermediateText = IntermediateText.replace(SubText, '');
            }
            if (IntermediateText != '') {
                if (lines.length - 1 == i)
                    FinalText += IntermediateText;
                else
                    FinalText += IntermediateText + "\n";
            }
        }
    }
    document.getElementById(ID.id).value = FinalText;
    $('#' + ID.id).scrollTop($('#' + ID.id)[0].scrollHeight);
} 
```

## 编辑 - 1

**我必须在没有特定分词的情况下最多显示 35 个字符，并且需要从右侧保留两个字符的边距。同样，限制应为 35 个字符，但总共需要 37 个字符（仅针对可见性问题。）**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T18:58:25.800

我在 asp.net Web 应用程序中使用以下 Jquery 插件。将此代码放在开始脚本标记下：

```
jQuery.fn.limitMaxlength = function(options){

var settings = jQuery.extend({
attribute: "maxlength",
onLimit: function(){},
onEdit: function(){}
}, options);

// Event handler to limit the textarea
var onEdit = function(){
var textarea = jQuery(this);
var maxlength = parseInt(textarea.attr(settings.attribute));

if(textarea.val().length > maxlength){
  textarea.val(textarea.val().substr(0, maxlength));

  // Call the onlimit handler within the scope of the textarea
  jQuery.proxy(settings.onLimit, this)();
}

// Call the onEdit handler within the scope of the textarea
jQuery.proxy(settings.onEdit, this)(maxlength - textarea.val().length);
}
this.each(onEdit);
return this.keyup(onEdit)
    .keydown(onEdit)
    .focus(onEdit);
} 
```

然后在准备好的文档中添加：

```
$(document).ready(function () {

//give the user feedback while typing
var onEditCallback = function(remaining){
$(this).siblings('.charsRemaining').text("Characters remaining: " + remaining);

if(remaining > 0){
    $(this).css('background-color', 'white');
    }
}

var onLimitCallback = function(){
    $(this).css('background-color', 'red');
}

$('textarea[maxlength]').limitMaxlength({
    onEdit: onEditCallback,
    onLimit: onLimitCallback
});

});//end doc ready 
```

然后在每个 textarea 上确保 maxlength='35' 像这样并添加一个反馈占位符......

```
<textarea id="TextBox1" class="txt" runat="server" placeholder="Some Text"  maxlength="35" cols="35" rows="2" ></textarea> 
```

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T19:27:41.757

这是一个测试练习。这将在 35 个字符处换行。确保设置`cols="35"`

我希望这有帮助。

更新：2012 年 6 月 26 日

删除了我的 JSFiddle 链接。除非您开始回答我自己和其他人提出的问题，否则我不会解决问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T08:23:42.537

让 JakeJ 的评论更进一步，

> 如果一行中有超过 35 个字符会破坏某些内容，那么进行 javascript 验证并不是一个好主意。您可能会遇到有人禁用了 javascript，或者知道如何在他们是恶意的情况下打破检查的问题。有可能做这个服务器端吗？也许有关您为什么需要这个的一些信息，我们可以帮助您提供可能的替代解决方案？

*   如果每行不超过 35 个字符对业务逻辑很重要，你肯定*要*在服务器上做！您只能使用 JavaScript 来改进用户界面。但是 JavaScript 不会保护您的服务器端逻辑免受“格式错误”的输入。

*   对于演示文稿，您可以使用您已经从所有其他人那里获得的建议，并将输入字段的大小限制为 35 列。这不会更改发送到服务器的输入值，但无论如何您都必须在服务器上执行此操作。就像您正确注意到的那样，在较新的浏览器中，用户可以重新调整文本区域的大小。这完全类似于网络：用户有权根据自己的喜好调整演示文稿。**如果-且仅当-**您确实需要限制它，因为背后有业务逻辑，您可以[禁用重新调整大小功能](http://brett.batie.com/website_development/no-resize-textarea-in-chrome-safari/)。

*   如果它对业务逻辑*不重要*而只是表示问题，那么您*肯定*希望使用普通样式来代替：使用 35 列大小的文本区域，并留给用户调整它的大小。

评论：

*   请注意，如果您使用 JavaScript 通过添加换行符来换行，您将处理用户更改已换行的用例。您是重新合并并重新包装它们，还是它们会变得越来越难看？使用我刚才提到的方法，您将不必应对这种情况。试试[Brett Holt 发布的 jsfiddle](http://jsfiddle.net/g4Kez/6/)。写一些文字，直到它换行。然后回到第一行并删除一些字符（使用退格，删除键对我使用 FireFox 不起作用）。你会明白我的意思。用户必须能够删除原始包装并让您的应用程序在不同的位置重新包装该行。

*   默认情况下，textareas 具有固定宽度的字体，因此每行将被限制为 35 个字符，无论它是“m”还是“l”。但是您可能希望安全起见，另外将字体设置为 CSS 中的固定字体。

*   对于“2空白”的要求-老实说，这对我来说听起来很愚蠢。看看浏览器为你做了什么。它适用于所有其他网站和 Web 应用程序。使用 CSS 设置样式（例如考虑添加填充），但请不要开始添加 JavaScript hack。如果要求来自您的客户，我相信您可以与他们交谈并解释为什么它不能按照他们想要的方式运作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-21T20:30:28.000

[http://jsfiddle.net/g4Kez/4/](http://jsfiddle.net/g4Kez/4/)

此代码应根据需要将文本包装为 35 个字符。这是一种限制输入的奇怪方式，但它应该可以工作。（以前的版本中存在错误。我认为这个最终大部分都可以使用）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-10-30T01:41:06.560

感谢所有的例子。我致力于此，因为最终我需要在 SVG xml 中自动换行文本（我目前的规范不支持自动换行）。

这也是我的编辑。 [https://jsfiddle.net/vr_driver/7kr1vfq5/50/](https://jsfiddle.net/vr_driver/7kr1vfq5/50/)

```
function columncorrector() {
  var text = document.getElementById("TextBox1").value;
  var maxcolumnwidth = 40;
  var lengthSinceNewLine = function(input) {
    var lastNewLine = input.lastIndexOf("\n");
    if (lastNewLine == -1) {
      return input.length;
    } else {
      console.log("lnl: " + lastNewLine);
      console.log("input.length: " + input.length);
      return input.length - lastNewLine;
    }
  };

  console.log(lengthSinceNewLine(text));
  lines = text.split("\n").length;
  console.log("lines: " + lines);

  if (lines == 1) // without this, the first line always comes out one character longer
  {
    maxcolumnwidth_fix = maxcolumnwidth - 2;
  } else {
    maxcolumnwidth_fix = maxcolumnwidth - 1;
  }

  if (lengthSinceNewLine(text) >= maxcolumnwidth_fix) {
    if (text[text.length - 1] == " ") {
      text = text + "\n";
    } else {
      console.log("length:" + text.length);
      console.log(text.lastIndexOf(" "));
      if (text.lastIndexOf(" ") == "-1") {
        console.log("here 1");
        text = text + "-\n"; // a forced hyphen            
        document.getElementById("TextBox1").value = text;
      } else {
        var space = text.lastIndexOf(" ");
        text = text.substring(0, space) + "\n" + text.substring(space + 1, text.length);
        document.getElementById("TextBox1").value = text;
      }

    }
  }
};
```

```
.txt {
  width: 400px;
}
```

```
<textarea id="TextBox1" class="txt" rows="30" onkeydown="columncorrector()" onkeyup="columncorrector()"></textarea>
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-06-28T14:15:35.563

这是一个简单的函数，可以在 35 个字符处（或之前）换行。目前唯一会失败的情况是，如果您有超过 35 个没有空格的字符。如果您想在这种情况下进行硬中断，请告诉我，我会添加。

您可以看到它在[JS Fiddle](http://jsfiddle.net/Sohnee/MMWXg/)上运行- 只需点击 GO 即可查看结果。

```
var breakLines = function () {
    var i, limit = 35, lines = [], result = '', currentLine = '';
    var textBox = document.getElementById('example');
    var text = textBox.value;
    var words = text.split(' ');

    for (i = 0; i < words.length; i++) {
        var extendedLine = currentLine + ' ' + words[i];
        if (extendedLine.length > limit) {
            lines.push(currentLine);
            currentLine = words[i];
        } else {
            currentLine = extendedLine;
        }
    }

    if (currentLine.length > 0) {
        lines.push(currentLine);
    }

    for (i = 0; i < lines.length; i++) {
        result += lines[i] + '\r\n';
    }

    textBox.value = result;
}; 
```

* * *

## 回答 #7

> 赞同：-3
> 
> 时间：2012-06-28T06:22:36.573

```
<script type="text/javascript">
    function CountChars(ID) {
        var IntermediateText = '';
        var FinalText = '';
        var SubText = '';
        var Splitted;
        var Concatenated;
        var text = document.getElementById(ID.id).value;
        var lines = text.split("\n");
        for (var i = 0; i < lines.length; i++) {
            IntermediateText = lines[i];
            if (IntermediateText.length <= 50) {
                if (lines.length - 1 == i)
                    FinalText += IntermediateText;
                else
                    FinalText += IntermediateText + "\n";
            }
            else {
                Splitted = IntermediateText.split(' ');
                for (var index = 0; index < Splitted.length; index++) {
                    Concatenated = Splitted[index].length;
                    if (Concatenated + SubText.length <= 50) {
                        if (index + 1 != Splitted.length) {
                            SubText += Splitted[index] + " ";
                        }
                        else {
                            SubText += Splitted[index];
                        }
                    }
                    else {
                        FinalText += SubText + "\n";
                        SubText = "";
                        if (index + 1 != Splitted.length) {
                            SubText = Splitted[index] + " ";
                        }
                        else {
                            SubText = Splitted[index];
                        }
                    }
                }
                if (SubText != '') {
                    FinalText += SubText;
                }
            }
        }
        document.getElementById(ID.id).value = FinalText;
        $('#' + ID.id).scrollTop($('#' + ID.id)[0].scrollHeight);
    }

</script>

<asp:TextBox ID="txt" onkeyup="CountChars(this);" Width="60%" runat="server" Rows="20"
                    Columns="50" TextMode="MultiLine" MaxLength="1000"></asp:TextBox> 
```

# asp.net - Assembly.GetExecutingAssembly() 性能

> ID：11031233
> 
> 赞同：3
> 
> 时间：2012-06-14T10:29:51.027
> 
> 标签：asp.net, performance, c#-4.0

我正在研究创建一种自动化方式来检查我们系统的运行版本。每当我们发布代码来测试我们的版本正在使用

```
[assembly: AssemblyVersion("1.21.0.13329")]
[assembly: AssemblyFileVersion("1.21.0.13329")] 
```

我现在想扩展我们的 ASP.Net **Web 表单**和**Web 服务**来显示这个版本号。因此，Web 表单应用程序会将其放在主页上的某个位置，并且 Web 服务可能会有一个返回版本号的 Web 方法。

我正在考虑使用

```
Version version = Assembly.GetExecutingAssembly().GetName().Version; 
```

去做这个。但我担心因为这是使用反射，它可能会给我的代码增加性能开销。它可能会被多次调用，尤其是在主页上，我不希望这会减慢响应时间。

我有另一个解决方案，所以我不想要替代方案，我只想知道是否有人知道这是否会导致性能开销相对显着？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-14T10:33:56.887

性能开销以及它是否重要的​​问题实际上取决于访问它的数量。在单页点击中，可能不是 - 以几毫秒为单位测量的代码执行时间。如果服务器负载过重，命中率很高，那很有可能。

但是你不能只打一次（即仍然使用反射，但不是每次都使用）：

我假设这不会在 Web 应用程序实例的整个生命周期内发生变化 - 那么为什么不捕获这些信息并存储它呢？

也许创建一个类来捕获这一点，例如：

```
public class AppVersion
{
    private static readonly Version _applicationVersion = Assembly.GetExecutingAssembly().GetName().Version;

    public static Version ApplicationVersion
    {
        get { return _applicationVersion; }
    }
} 
```

您现在可以通过以下方式在代码中访问它：

```
var version = AppVersion.ApplicationVersion 
```

# javascript - 可变属性作为 jQuery 插件中的参数

> ID：11031236
> 
> 赞同：1
> 
> 时间：2012-06-14T10:30:39.883
> 
> 标签：javascript, jquery, binding

我正在编写一个插件，我需要“绑定”一个参数。有时我需要 this.checked 的值，但有时我需要的是 $(this).val()，而且当我需要检查其他属性时也有一些极端情况。

我需要一个用于初始化的“输入参数”，它以某种方式确定要检查的值。

我可以用 eval 做到这一点，但它是邪恶的。我可以用开关盒做到这一点，但我不确定我是否可以为一切做好准备。

做这个的最好方式是什么？

```
$.fn.formSwitch = function (options) {

    var settings = $.extend({
        visibleholder: '#visible_holder',
        hiddenholder: '#hidden_holder',
        reparseform: this.closest('form')
    }, options);

    this.change(function () {
        switchFormPart(settings.visibleholder, 
            settings.hiddenholder, 
            ********this.checked, *********** <- I would like this as a parameter
            settings.reparseform
        );
    });
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T10:38:24.123

您可以传递一个类似`"checked"`或`"val"`作为参数的字符串，然后：

```
this.change(function () {
    switchFormPart(settings.visibleholder, 
        settings.hiddenholder, 
        param in this ? this[param] : $(this)[param](),
        settings.reparseform
    );
}); 
```

如果 param 是`"checked"`，它将等同于`this.checked`

如果 param 是`"val"`，它将等同于`$(this).val()`

等等。

查看[括号符号](https://developer.mozilla.org/en/JavaScript/Reference/Operators/Member_Operators#section_3)、[条件运算符](https://developer.mozilla.org/en/JavaScript/Reference/Operators/Conditional_Operator)和[in 运算符](https://developer.mozilla.org/en/JavaScript/Reference/Operators/in)

# c# - 检查十进制是否指定为 2 dp 或更小

> ID：11031237
> 
> 赞同：1
> 
> 时间：2012-06-14T10:30:40.473
> 
> 标签：c#, c#-4.0

我有一个`mystring`用户输入的字符串。我检查它是否是一个有效的小数，因此

```
decimal val;
bool validDecimal = decimal.TryParse(mystring, out val);
if (!validDecimal)
   isvalid = false; 
```

但这不是我需要做的唯一验证。我还需要检查这个小数是否指定为 2 个小数位或更少

所以，

```
23, 23.1, 23.45 
```

都是有效的

但

```
23.345, 23.450 
```

不是。

最好的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T10:35:35.107

字符串解析怎么样。

```
static bool LessThan2DecimalPlaces(string mystring, out decimal val)
{
    bool validDecimal = decimal.TryParse(mystring, out val);
    if (!validDecimal)
    {
       return false;
    }

   var index = mystring.LastIndexOf(NumberFormatInfo.CurrentInfo.NumberDecimalSeparator);
   if(index == -1)
   {
       return true;
   }
   return mystring.Substring(index).Count() < 3
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-14T10:46:17.500

您可以使用正则表达式来验证您的原始字符串：

```
Regex.Match(string.Format(@"^\d*({0}\d\d?)?$", CultureInfo.CurrentCulture.NumberFormat.NumberDecimalSeparator), mystring) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-14T10:48:47.800

由于`23.450`不允许，尽管产生的数字与 with 相同`23.45`，但您无法测试数字本身。

相反，您必须测试字符串：

```
decimal val = 0m;
isvalid = isvalid &&
  Regex(@"^\d+(\.\d{1,2})?$").IsMatch(mystring) &&
  decimal.TryParse(mystring, out val); 
```

我采取了初始化的方法`val`，所以它不会导致`TryParse`未达到的问题，并且仅在`isvalid`当前为真时才进行测试，假设如果它已经为假，则整个操作将拒绝继续其他原因。变体当然是可能的。

如果您还在 之前限制允许的字符数`.`，那么您可以使用`Parse`而不是`TryParse`，但我留下了它，因为它仍然处理对于数据类型来说太大的数字的情况`decimal`。

编辑：

值得看看我更详细地使用的正则表达式。

`^`匹配字符串开头 `\d+`匹配一位或多位数字 `.`匹配 a`.` `\d{1,2}`匹配一位或两位数字 `(\.\d{1,2})?`匹配 a`.`后跟一位或两位数字，或者空字符串 `$`匹配字符串结尾

所以合在一起，`^\d+(\.\d{1,2})?$`意味着整个字符串必须是一个或多个数字，或者一个或多个数字后跟`.`一个或两个数字。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-14T10:40:37.473

```
var decimalpos = mystring.ToString().Contains(CultureInfo.CurrentCulture.NumberFormat.NumberDecimalSeparator) ? mystring.ToString().IndexOf(CultureInfo.CurrentCulture.NumberFormat.NumberDecimalSeparator) : 0;
   int numberofdecimals 
if decimalpos >0 then    
{
 numberofdecimals = mystring.ToString().Substring(decimalpos,mystring.ToString().Length)
}

if numberofdecimals > 2 then False else True 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-14T10:41:03.263

查看[Decimal.GetBits](http://msdn.microsoft.com/en-us/library/system.decimal.getbits.aspx)。

> 返回数组的第四个元素包含比例因子和符号。它由以下部分组成：
> 
> ...
> 
> 位 16 到 23 必须包含 0 到 28 之间的指数，表示整数除以 10 的幂。

这行得通。

```
public int PlacesSpecified(decimal d)
{
    var lastInt = decimal.GetBits(d)[3];
    return (lastInt >> 16) & 255
} 
```

# weblogic - 在 weblogic server 12c 上部署 ejb2.0 时出错

> ID：11031240
> 
> 赞同：1
> 
> 时间：2012-06-14T10:30:51.410
> 
> 标签：weblogic, ejb-2.x, weblogic12c

我正在尝试在 weblogic server 12c 上部署 ejb2.0。在部署 ejb2.0 时，它不会给我任何错误，但后来在进行查找时会引发异常。

javax.ejb.EJBException：javax.ejb.EJBException：javax.naming.LinkException：[根异常是 javax.naming.NameNotFoundException：无法解析“ejb.MyManager”。解决了'ejb'；剩下的名字'MyManager']; 链接剩余名称：'ejb/MyManager'

这来自 getContext().lookup(name); 任何线索为什么它会出现以及为什么它没有出现 ejb 部署时间？

谢谢，拉胡尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T12:39:00.623

如果部署顺利，您应该能够在管理控制台的 jndi 树中找到 bean。你试过这个吗？名字和你想象的一样吗？

# c# - 为什么 Request.Cookies 为空？

> ID：11031243
> 
> 赞同：0
> 
> 时间：2012-06-14T10:31:28.420
> 
> 标签：c#, cookies, request

这是我正在运行的另一个线程的跟进，它是[Reading cookie in c#](https://stackoverflow.com/questions/11029643/reading-cookie-in-c-sharp)。但是，该帖子中的答案似乎在拐弯抹角，所以我想在这里简化我的问题。我认为回答这个问题，我就能解决这个问题。卡住了将近两天，现在试图读取一个 cookie，因此感谢您的帮助。

什么可能导致此行出现 NullReferenceException：

```
HttpCookie aCookie = Request.Cookies["UserSettings"]; 
```

我确信存在一个名为“UserSettings”的 cookie，正如我在开发人员工具栏上看到的那样。所以 Request 或 Request.Cookies 必须为空，对吧？

为什么我不能使用 Request.Cookies？我看到的每一个 cookie 教程都是这样的。

**编辑：**在 index.aspx 中添加了 cookie 创建代码，顺便说一句，我试图读取 HomeController.cs 中的 cookie，不知道这是否重要，但我想我会提到它。

```
<script type="text/javascript">
    function setLanguage() {
    cname = "language";
    cvalue =           document.getElementById('language').options[document.getElementById('language').selectedInd    ex].value;
    cexpire = new Date();
    cexpire.addDays(1);
    document.cookie = cname + '=' + escape(cvalue) +
(typeof cexpire == 'date' ? 'expires=' + cexpire.toGMTString() : '') +
',path=/;';
}
</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T12:58:12.713

这不是添加 cookie 的地方。当您谈论用户设置时，它尤其不是添加 cookie 的地方。用户设置通常在用户的操作下建立，例如用户单击德语链接以切换到德语设置。正是在此控制器方法、事件中，或者您的应用程序正在处理应该将 cookie 设置到响应中并建立其持久性的单击行为。

另外，请记住几件事。在此方法中，您将此 cookie 添加到每个**响应**中。在随后的控制器调用`hc.getLang()`中，您正在访问从 cookie 中检索语言的请求。在第一次调用中，这将始终为空，因为 cookie 还没有存在于请求中。您只是将其添加到响应中。然而，在下一次调用中，cookie 应该存在，但它总是以设置为“nl”的语言存在，因为你为**每个请求**强制它。

我建议您从这个 global.asax 事件中取出 cookie 生成代码，并将其放置在使用接口设置它的页面中（链接、按钮等）。然后，您的控制器将从该点开始访问请求 cookie。永远记住，请求和响应在页面的生命周期中是完全独立的对象，无论它是 webforms 还是 mvc。

**编辑：** 因为您提到使用控制器，所以我假设您使用的是 MVC，所以我将针对我的代码示例以这种方式工作。由于已确定在 cookie 中设置 cookie`Application_BeginRequest`是个坏魔法，因此您需要在应用程序中的某个其他位置参考用户操作来建立它。假设您有一个名为的控制器`SettingsController`，它有一个名为 的动作`SetLanguage`。

```
[Authorize]
public class SettingsController : Controller
{

    // ... skipping other constructor and method code

    [Authorize]
    [HttpPost]
    public ActionResult SetLanguage(MyLanguageModel model)
    {
        HttpCookie myCookie = new HttpCookie("UserSettings");
        myCookie.Value = model.AssignedLanguage;
        myCookie.Expires = DateTime.Now.AddDays(1);
        Response.Cookies.Add(myCookie);

        return View(model);
    }

} 
```

这将假定编写视图以`AssignedLanguage`从模型中获取属性并使用它来确定即时请求的语言。但是，所有后续请求都应该可以访问 UserSettings cookie。此时，您应该能够`Request.Cookies["UserSettings"]`从请求管道中的任何位置调用后续请求。

# java - JGIT 验证存储库是否有效

> ID：11031244
> 
> 赞同：8
> 
> 时间：2012-06-14T10:31:31.723
> 
> 标签：java, validation, jgit

有没有一种方法可以在中途终止克隆操作？我将只使用克隆来验证存储库吗？有没有其他方法可以测试远程 url/repository 是否有效？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2016-03-04T09:58:22.547

您可以使用 JGIT 调用“git ls-remote”。看[这里](https://superuser.com/questions/227509/git-ping-check-if-remote-repository-exists)

示例代码如下：

```
 final LsRemoteCommand lsCmd = new LsRemoteCommand(null);
    final List<String> repos = Arrays.asList(
            "https://github.com/MuchContact/java.git",
            "git@github.com:MuchContact/java.git");
    for (String gitRepo: repos){
        lsCmd.setRemote(gitRepo);
        System.out.println(lsCmd.call().toString());
    } 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-04T14:17:29.143

我正在使用以下启发式方法（有待进一步改进）：

```
private final static String INFO_REFS_PATH = "info/refs";

public static boolean isValidRepository(URIish repoUri) {
  if (repoUri.isRemote()) {
    return isValidRemoteRepository(repoUri);
  } else {
    return isValidLocalRepository(repoUri);
  }
}

private static boolean isValidLocalRepository(URIish repoUri) {
  boolean result;
  try {
    result = new FileRepository(repoUri.getPath()).getObjectDatabase().exists();
  } catch (IOException e) {
    result = false;
  }
  return result;
}

private static boolean isValidRemoteRepository(URIish repoUri) {
  boolean result;

  if (repoUri.getScheme().toLowerCase().startsWith("http") ) {
    String path = repoUri.getPath();
    String newPath = path.endsWith("/")? path + INFO_REFS_PATH : path + "/" + INFO_REFS_PATH;
    URIish checkUri = repoUri.setPath(newPath);

    InputStream ins = null;
    try {
      URLConnection conn = new URL(checkUri.toString()).openConnection();
      conn.setReadTimeout(NETWORK_TIMEOUT_MSEC);
      ins = conn.getInputStream();
      result = true;
    } catch (Exception e) {
      result = false;
    } finally {
      try { ins.close(); } catch (Exception e) { /* ignore */ }
    }

  } else if (repoUri.getScheme().toLowerCase().startsWith("ssh") ) {

    RemoteSession ssh = null;
    Process exec = null;

    try {
      ssh = SshSessionFactory.getInstance().getSession(repoUri, null, FS.detect(), 5000);
      exec = ssh.exec("cd " + repoUri.getPath() +"; git rev-parse --git-dir", 5000);

      Integer exitValue = null;
      do {
        try {
          exitValue = exec.exitValue();
        } catch (Exception e) { 
          try{Thread.sleep(1000);}catch(Exception ee){}
        }
      } while (exitValue == null);

      result = exitValue == 0;

    } catch (Exception e) {
      result = false;

    } finally {
      try { exec.destroy(); } catch (Exception e) { /* ignore */ }
      try { ssh.disconnect(); } catch (Exception e) { /* ignore */ }
    }

  } else {
    // TODO need to implement tests for other schemas
    result = true;
  }
  return result;
} 
```

这适用于裸存储库和非裸存储库。

请注意，URIish.isRemote() 方法似乎存在问题。当您从文件 URL 创建 URIish 时，主机不是 null 而是一个空字符串！但是，如果主机字段不为空，URIish.isRemote() 将返回 true...

编辑：向 isValidRemoteRepository() 方法添加了 ssh 支持。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-14T10:46:04.463

我查看了 JGit 源代码，似乎没有一种方法可以检查远程仓库的有效性。

这是`call`方法`CloneCommand`：

```
public Git call() throws JGitInternalException {
    try {
        URIish u = new URIish(uri);
        Repository repository = init(u);
        FetchResult result = fetch(repository, u);
        if (!noCheckout)
            checkout(repository, result);
        return new Git(repository);
    } catch (IOException ioe) {
        throw new JGitInternalException(ioe.getMessage(), ioe);
    } catch (InvalidRemoteException e) {
        throw new JGitInternalException(e.getMessage(), e);
    } catch (URISyntaxException e) {
        throw new JGitInternalException(e.getMessage(), e);
    }
} 
```

为了获取远程 URL 是否无效，在捕获 a 时，`JGitInternalException` `e`您可能会得到真正的原因`e.getCause()`来寻找`InvalidRemoteException`or `URISyntaxException`，但正如您所指出的，如果它实际上是有效的，您最终会克隆；库不允许您中断操作。

更深入地研究 JGit 代码，`TransportLocal`该类具有`open(URIsh,Repository,String)`您可以用来检查是否`InvalidRemoteException`抛出 an 的方法，但它的构造函数不是公共的。唉，需要一个自己动手的解决方案。您也许可以从`TransportLocal.open`我提到的方法的内容开始。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-23T20:51:24.417

AFAIK JGit 还没有实现`git fsck`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-19T16:39:38.193

对于任何人来说，我正在使用以下更通用的方法来验证远程存储库（代码在 C# 中，但将其转换为 java 应该不难）。

```
public static bool IsValidRemoteRepository(URIish repoUri, CredentialsProvider credentialsProvider = null)
{
    var repoPath = Path.Combine(Path.GetTempPath(), Path.GetFileNameWithoutExtension(Path.GetRandomFileName()));

    Directory.CreateDirectory(repoPath);

    var git = Git.Init().SetBare(true).SetDirectory(repoPath).Call();

    var config = git.GetRepository().GetConfig();
    config.SetString("remote", "origin", "url", repoUri.ToString());
    config.Save();

    try
    {
        var cmd = git.LsRemote();

        if (credentialsProvider != null)
        {
            cmd.SetCredentialsProvider(credentialsProvider);
        }

        cmd.SetRemote("origin").Call();
    }
    catch (TransportException e)
    {
        LastException = e;
        return false;
    }

    return true;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-11-29T08:24:15.940

用于验证远程存储库的 API

```
public boolean validateRepository(String repositoryURL, String username, String password) throws Exception {
    boolean result = false;
    Repository db = FileRepositoryBuilder.create(new File("/tmp"));
    Git git = Git.wrap(db);
    final LsRemoteCommand lsCmd = git.lsRemote();
    lsCmd.setRemote(repositoryURL);
    if (username != null && password != null) {
        lsCmd.setCredentialsProvider(new UsernamePasswordCredentialsProvider(username, password));
    }
    if (null != lsCmd.call()){
        result = true;
    }
    return result;
} 
```

注意：jgit 的 ls-remote api 会抛出已知错误的 NPE。因此添加了错误评论中提到的解决方法。
[https://bugs.eclipse.org/bugs/show_bug.cgi?id=436695](https://bugs.eclipse.org/bugs/show_bug.cgi?id=436695)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-08-16T14:43:21.933

JGit 正在研究该命令的实现，但据我所知，该`git fsck`命令尚未在[mvnrepository.com上发布。](http://mvnrepository.com/artifact/org.eclipse.jgit/org.eclipse.jgit "mvn存储库")

有关它的外观示例，请查看此[测试用例](https://github.com/eclipse/jgit/blob/b0695e5b7b639797280916201e49076784377bd5/org.eclipse.jgit.test/tst/org/eclipse/jgit/internal/storage/dfs/DfsFsckTest.java "测试用例")。

```
@Test
public void testHealthyRepo() throws Exception {
    RevCommit commit0 = git.commit().message("0").create();
    RevCommit commit1 = git.commit().message("1").parent(commit0).create();
    git.update("master", commit1);

    DfsFsck fsck = new DfsFsck(repo);
    FsckError errors = fsck.check(null);

    assertEquals(errors.getCorruptObjects().size(), 0);
    assertEquals(errors.getMissingObjects().size(), 0);
    assertEquals(errors.getCorruptIndices().size(), 0);
} 
```

# android - 显示来自 MediaStore.Audio.Albums.ALBUM_ART 的专辑封面

> ID：11031250
> 
> 赞同：1
> 
> 时间：2012-06-14T10:31:52.397
> 
> 标签：android, android-imageview, android-mediaplayer, albumart, android-cursorloader

我在带有自定义 CursorAdapter 的 LoaderManager 中使用 CursorLoader。我已经实现了显示专辑和相关的艺术家，现在我想显示封面。

这是我的自定义 CursorAdapter ：

```
public class AlbumsAdapter extends CursorAdapter {

    private final LayoutInflater mInflater;

     public AlbumsAdapter(Context context, Cursor c) {
        super(context, c);
        mInflater=LayoutInflater.from(context);

    }
    @Override
    public void bindView(View view, Context context, Cursor cursor) {

        TextView albumTitle =(TextView)view.findViewById(R.id.albumTextView);
        albumTitle.setText(cursor.getString(cursor.getColumnIndex(MediaStore.Audio.Albums.ALBUM)));

        TextView artistName=(TextView)view.findViewById(R.id.artistTextView);
        artistName.setText(cursor.getString(cursor.getColumnIndex(MediaStore.Audio.Albums.ARTIST)));

        ImageView albumCover=(ImageView)view.findViewById(R.id.artistTextView);
        // Here what should I do ?

    }
    @Override
    public View newView(Context context, Cursor cursor, ViewGroup parent) {
        final View view=mInflater.inflate(R.layout.albums_row,parent,false); 
        return view;
    }   
} 
```

我尝试了以下但没有成功：

```
 String path = cursor.getString(cursor.getColumnIndex(MediaStore.Audio.Albums.ALBUM_ART));
    File imgFile = new  File(path);
    if(imgFile.exists()){

        Bitmap myBitmap = BitmapFactory.decodeFile(imgFile.getAbsolutePath());

        ImageView albumCover=(ImageView)view.findViewById(R.id.album_cover);
        albumCover.setImageBitmap(myBitmap);

    } 
```

MediaStore.Audio.Albums.ALBUM_ART 返回什么以及如何使用它来使 ImageView 脱离封面？谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-15T09:53:11.743

我已经实现了在`ImageViews`with 中加载专辑封面：

```
 String coverPath = cursor.getString(cursor.getColumnIndex(MediaStore.Audio.Albums.ALBUM_ART));
    Drawable img = Drawable.createFromPath(coverPath);
    ImageView coverAlbum=(ImageView)view.findViewById(R.id.album_cover);
    coverAlbum.setImageDrawable(img); 
```

问题是列表非常慢。我想我应该缩小封面的分辨率以消耗更少的内存。

# java - 如何使 Web 应用程序始终从给定页面开始

> ID：11031257
> 
> 赞同：0
> 
> 时间：2012-06-14T10:32:21.397
> 
> 标签：java, javascript, client, zk

在我的上下文中：

```
Context
 |
 |->  Login.zul
 |->  Home.zul
 |->  page1.zul
 |->  page2.zul 
```

如果我点击 Home.zul 的链接，如果未通过身份验证，我希望它重定向到登录，同样对于所有 zul，如果未完成身份验证，我会将其重定向到登录屏幕

我的解决方案：在每个控制器中进行身份验证检查，如果未通过身份验证重定向到 Login.zul。

但是我有许多 zul 和许多控制器，我不想进入每个控制器并做同样的事情，有人可以想到任何想法，而无需去每个班级并进行更改。可能在 web.xml 或 zk.xml 中可以添加任何我不知道的标签以获得相同的结果，或者执行一些客户端脚本以获得相同的结果。任何可以减少工作量的聪明的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T10:48:20.587

您应该能够使用[请求拦截器](http://books.zkoss.org/wiki/ZK_Developer%27s_Reference/Internationalization/Locale#The_Request_Interceptor)。

与您的评论相关，看起来有：[DesktopInit](http://www.zkoss.org/javadoc/6.0.0/zk/org/zkoss/zk/ui/util/DesktopInit.html)和[SessionInit](http://www.zkoss.org/javadoc/6.0.0/zk/org/zkoss/zk/ui/util/SessionInit.html)类，您可以使用它们。但是，除非用户的会话无限期地持续，如果没有请求拦截器，我不确定您是否能够处理会话超时（除非您明确检查以确保用户在访问它的任何地方都有一个有效的会话）。这也是一个安全问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T10:53:46.440

答案是`Filters`
过滤器将被编写一次并在`web.xml`.
您可以为 Web 应用程序中的所有资源或选定资源设置过滤器。过滤器可以拦截对资源的每个请求。使用过滤器，您可以通过检查浏览器发送的内容来验证用户身份，`cookie`也可以使用它修改内容。 有用的链接：[http ://www.javaworld.com/jw-06-2001/jw-0622-filters.html](http://www.javaworld.com/jw-06-2001/jw-0622-filters.html)`request``response`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T10:53:53.320

这是一个 Java Web 应用程序吗？如果是这样，您可以在 web-inf/web.xml 文件中进行配置。

您还可以创建一个 Servlet 过滤器，以在请求到达任何控制器之前检查用户的登录状态。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-14T15:13:36.263

为此，您可以使用[Spring Security 。](http://static.springsource.org/spring-security/site/)

# php - stream_socket_client 失败

> ID：11031258
> 
> 赞同：0
> 
> 时间：2012-06-14T10:32:26.860
> 
> 标签：php, sockets

我正在构建一个 Drupal 站点，作为其中的一部分，我需要使用 Aggregator 和 Media 模块从 Facebook、Twitter 和 YouTube 获取内容。但是我无法获取内容，因为这两个模块都调用了 drupal_http_request 函数，该函数使用 PHP stream_socket_client 函数尝试打开与远程套接字的连接。

例如，当我尝试获取它`tcp://gdata.youtube.com:80`在尝试打开与 YouTube 的连接时使用的 YouTube 内容时。当我在大学计算机上构建站点时，这将返回 FALSE，但是当我在家用计算机上时它工作正常。

任何想法为什么它不起作用？这似乎很奇怪，因为显然大学计算机可以访问互联网。

顺便说一句，IRC 也不适合我...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T01:01:54.450

`stream_socket_client`has`errno`和`errstr`参数，它们应该能够为您提供有关失败原因的更多信息。

如果我不得不猜测问题出在哪里，您的大学可能有一个严格的防火墙，拒绝访问大多数端口，例如 IRC 端口。可能它有一个所有学生都必须使用的 HTTP 代理。可以使用流上下文为流套接字设置 HTTP 代理。

*   [流套接字选项](http://php.net/manual/en/context.http.php)
*   [流上下文代理选项示例](https://github.com/composer/composer/blob/master/src/Composer/Util/StreamContextFactory.php)

# css - 如何用css覆盖两种字体

> ID：11031262
> 
> 赞同：4
> 
> 时间：2012-06-14T10:32:44.257
> 
> 标签：css, fonts

我有两种字体，Cooper Black 和 Cooper Hilite。我想把它们放在一起，如下图：http: [//viewerslikeu.squarespace.com/storage/720x360_1.png](http://viewerslikeu.squarespace.com/storage/720x360_1.png)

有接盘侠吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-14T10:40:36.993

好吧，纯粹使用 CSS 的一种方法是使用`:after`伪元素。

检查这个小提琴：http: [//jsfiddle.net/4xgdv/](http://jsfiddle.net/4xgdv/)

原始元素 is`relative`和it `pseudo child`is `absolute`at`0, 0`以确保它正确地覆盖原始元素。

**HTML**

```
<div class="doublefont">HELLO</div> 
```

**CSS** *你可以删除 div。部分使其适用于所有元素*

```
div.doublefont {
    position: relative;
    color: red;
    font-family: arial;
}
div.doublefont:after {
    content: "HELLO";
    color: blue;
    font-family: tahoma;
    position: absolute;
    top: 0;
    left: 0;
} 
```

**使其通用**

您可以添加一点 JS 以自动使页面上的所有元素都带有一个类`doublefont`以显示叠加字体。也就是说，你只需要简单地放入类似`<div class="doublefont">My text..</div>`的元素，下面的 JS 结合上面的 CSS 就可以完成剩下的工作。您可以将以下 JS 放入`<head>`您的页面中。

```
$('.doublefont').each(function() {
     $(this).attr('content', $(this).html());
}); 
```

更新小提琴：http: [//jsfiddle.net/4xgdv/1/](http://jsfiddle.net/4xgdv/1/)

另外，看看这个相关的答案。这是我得到`attr(content)`提示的地方。

[使用 jQuery 选择和操作 CSS 伪元素，例如 ::before 和 ::after](https://stackoverflow.com/questions/5041494/manipulating-css-before-and-after-pseudo-elements-using-jquery)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-14T10:41:25.043

添加`position:relative`到您的第一个和第二个字体并添加`top:-20px`或任何（值应该是负数）是字体的大小并指定`z-index:2`您想要高于`z-index:1`的字体和您想要低于的字体......

例子

```
.first {
font-size:20px;
position:relative;
z-index:2;
}
.second {
position:relative;
top:-20px;
z-index:1;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-14T10:41:55.273

将具有不同字体的两个文本放在单独的 Div 中并添加 css position:absolute 到两个 div 并用绝对位置的 div 包装这两个 div。

```
<div style="position:relative">
  <div style="position:absolute; z-index:2;">Content with different fonts(On Bottom)</div>
  <div style="position:absolute; z-index:3;">Content with different fonts (On top)</div>
</div> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-14T11:11:15.120

这在不改变 HTML 的情况下是可能的，但您必须使用一些 javascript (jQuery)。

```
$('p.layerfont').each(function(index) {
    $(this).wrap('<div class="layerwrap" />');
    var ptext = $(this).text();
    $(this).css('position: absolute;');
    $(this).after('<p class="toplayer">'+ptext+'</p>');
}); 
```

这将每个段落包装在一个包含的 div 中，然后添加另一个具有相同文本的段落，这两个段落绝对位于彼此之上。

[http://jsfiddle.net/zxaEh/](http://jsfiddle.net/zxaEh/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-14T10:49:01.527

绝对定位两个`<div>`元素（或类似元素）会产生效果，但不要忘记给一个更高的 z-index 以使其成为“叠加”字体。

[JSFiddle](http://jsfiddle.net/keNw2/)

**HTML**

```
<html>
    <head></head>
    <body>
        <div class="first-font-positioned">This is my Frankenfont</div>
        <div class="second-font-positioned">This is my Frankenfont</div>
    </body>
</html> 
```

**CSS**

```
.first-font-positioned{
    font-family: Cooper Hilite;
    font-size:30px;
    position:absolute;
    top:100px;
    left:100px;
    z-index:100;
}

.second-font-positioned{
    font-family: Cooper Black;
    font-size:30px;
    position:absolute;
    top:100px;
    left:100px;
} 
```

# jquery - Rails 3.2.1 redirect_to 在使用 AJAX 时不呈现页面

> ID：11031265
> 
> 赞同：1
> 
> 时间：2012-06-14T10:32:59.367
> 
> 标签：jquery, ruby-on-rails-3.1

抱歉，如果这是一个非常愚蠢的问题，或者我做了一些非常愚蠢的事情，我还是个新手。我正在尝试实现会话超时机制，并且为此在 SO 中找到了一些有用的问题/答案，我已经遵循了。我添加了一个 last_seen 时间作为会话变量，我在我的应用程序控制器的 before_filter 中检查它，如果超过设置的时间间隔，则将用户发送回登录页面。

应用控制器

```
reset_session if session[:last_seen] < 1.minutes.ago

if session[:user_id] == nil
  redirect_to login_path, notice: "Please log in"
  return
end

session[:last_seen] = Time.now 
```

这在大多数页面上都可以正常工作，但是我有一些带有标签的页面，使用 jquery 来更改内容，因为选择了标签。

链接代码：

```
<li class="<%=get_active('index_audit','ultra')%>"><%= link_to 'Load  IT Estate', ultraaudit_path, remote: true %> </li> 
```

控制器代码：

```
def index_audit

  @subscription = current_subscription

  respond_to do |format|
    format.js
  end

end 
```

有一个 index_audt.js 有 JS 用渲染的部分替换 div

如果发生超时并且下一个操作是单击选项卡以呈现下一页，它会通过代码但不会在浏览器中显示登录页面

我在 RubyMine 中进行调试，控制台显示它正在尝试呈现登录页面，即会话/新页面：

```
Processing by UltraController#index_audit as JS
Parameters: {"locale"=>"en-GB"}
Redirected to http://localhost:3000/?locale=en-GB
Filter chain halted as :logged_in rendered or redirected    
Completed 302 Found in 6ms (ActiveRecord: 0.0ms)

Started GET "/?locale=en-GB" for 127.0.0.1 at 2012-06-14 11:28:44 +0100
Processing by SessionsController#new as JS
Parameters: {"locale"=>"en-GB"}
Rendered sessions/new.html.erb within layouts/application (16.0ms)
Completed 200 OK in 323ms (Views: 320.6ms | ActiveRecord: 0.0ms) 
```

但它只是没有出现在浏览器中

我尝试在 index_audit 控制器方法的顶部放置一个重定向，这也有同样的问题。我的理论是远程：真实是原因，但我不知道该怎么做才能解决它。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T02:13:42.177

对于遇到此问题的任何人（就像我在将 rails 3.0 升级到 3.1 后所做的那样），建议的修复不起作用或与您自己的不同。

从 form_for 标记中删除`:remote => true`允许提交和重定向通过。这是有道理的，因为最后一个表单没有使用 ajax 来获得响应。

希望这对其他人有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T12:29:27.080

如果用户的会话仍然有效，则该`index_audit`操作将返回 JS，但如果用户的会话过期，它将返回登录页面的 HTML。据推测，您的远程处理程序需要 JS 格式，因此它看不到它可以对包含登录页面的 HTML 响应做任何事情。

最好的方法可能是添加一个`format.js`选项`SessionsController.new`，并创建必要的`new.js.erb`视图，这样如果您请求 javascript 格式，无论会话是否过期，您总是会得到 javascript。

# java - 这个 Java 构造在 JRuby 中等同于什么？

> ID：11031266
> 
> 赞同：0
> 
> 时间：2012-06-14T10:33:04.877
> 
> 标签：java, ruby, constructor, jruby, processing

我正在将一些 Java[处理代码](http://glgraphics.sourceforge.net/examples/Integration/Neon/Neon.pde)移植到[ruby](https://github.com/jashkenas/ruby-processing) ​​-processing ，我被这个 Java 构造难住了：

```
new GLTexture[]{tex2, tex4, tex8, tex16} 
```

tex2、tex4 等都是 GLTexture 的[实例](http://glgraphics.sourceforge.net/reference/codeanticode/glgraphics/GLTexture.html)。

它显然以某种方式将这些参数映射到 GLTexture 构造函数，但我看不到任何不需要*processing.core.PApplet*实例的构造函数。谷歌没有太多帮助，因为搜索标点符号 []{...} 非常困难。

在 JRuby 中这个构造的等价物是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T12:07:46.997

在红宝石中，这只是`[tex2, tex4, tex8, tex16]`

# session - 过时的会话数据 - websphere

> ID：11031267
> 
> 赞同：0
> 
> 时间：2012-06-14T10:33:06.327
> 
> 标签：session, websphere, session-replication

我在 Websphere 6 中的 http 会话有一个陈旧的属性，可能与内存会话复制有关。

脚步：

1.  对象 A.0 - 放置在 ID 为“ABC”的会话中
2.  从会话中删除 A.0..
3.  对象 A.1（新实例） - 放入 ID 为“ABC”的会话中
4.  从会话中检索 ID 为“ABC”的对象 - 结果：A.1（正确）
5.  执行 Servlet 转发或重定向（在这两个函数上都看到了问题）..
6.  从会话中检索“ABC” - 结果：A.0，从会话中删除的对象..

备注 -

*   步骤 1-5 中使用的相同 Session 对象（哈希码/会话 ID）在 2 个 JVM（单集群）中使用内存复制
*   第 2 步和第 5 步之间的持续时间总共为 4 秒
*   在此期间没有其他外部线程访问过该会话。
*   仅注意到 1 个特定用例；在其他用例中没有遇到过这个
    ..

在从 websphere 应用程序服务器返回过时数据之前，任何人都见过这样的事情吗？

谢谢，

伊恩。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T13:54:18.947

在转发/重定向之前，您是否明确将更改的对象写回会话？至少在 WebSphere 的某些版本中，在某些配置中，您必须这样做以确保“提交”更改。

（如果我找到明确的参考，我会更新我的答案。）

# windows-phone-7 - 单击app.xaml.cs页面中的布局时如何导航到另一个页面？

> ID：11031270
> 
> 赞同：0
> 
> 时间：2012-06-14T10:33:14.173
> 
> 标签：windows-phone-7, windows-phone-7.1

单击图钉布局中的箭头时如何导航到另一个页面？

App.xaml 页面代码：

```
<Application.Resources>
        <Style x:Key="MenuItemsStyle" TargetType="sltkit:MenuItem">
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="sltkit:MenuItem">
                        <StackPanel>
                            <TextBlock Text="{Binding Name}" 
                                       TextWrapping="Wrap" 
                                       Margin="24,0" 
                                       FontSize="26"/>
                            <TextBlock Text="{Binding Description}" 
                                       TextTrimming="WordEllipsis" 
                                       Margin="24,0" 
                                       FontSize="22"/>
                            <TextBlock Text="{Binding DatetimeAdded}" 
                                       TextTrimming="WordEllipsis" 
                                       Margin="24,0" 
                                       FontSize="22"/>
                            <Image  Source="/MyBuddies;component/Images/decline.png" Height="20" Width="20" Margin="200,0" Stretch="Fill" Name="imgDecline"  >
                            </Image>
                        </StackPanel>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
        <Style x:Key="MenuStyle" TargetType="sltkit:ContextMenu">
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate>
                        <Border CornerRadius="8" Margin="24" 
                               BorderBrush="Green" BorderThickness="2">
                            <Border.Background>
                                <LinearGradientBrush 
                                   StartPoint="0.5,0" EndPoint="0.5,1">
                                    <GradientStop Color="White" 
                                                 Offset="0.0"/>
                                    <GradientStop Color="LightBlue" 
                                                 Offset="0.5"/>
                                </LinearGradientBrush>
                            </Border.Background>
                            <ItemsPresenter />
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </Application.Resources>

in mainpage.xaml 

<my:MapItemsControl.ItemTemplate>
                        <DataTemplate>
                         <my:Pushpin
                          Background="Blue"
                           Location="{Binding Location}" Tap="Pushpin_Tap">
                                <sltkit:ContextMenuService.ContextMenu>
                                    <sltkit:ContextMenu IsZoomEnabled="False">
                                        <sltkit:MenuItem Style="{StaticResource MenuItemsStyle}"/>
                                    </sltkit:ContextMenu>
                                </sltkit:ContextMenuService.ContextMenu>
                            </my:Pushpin>
                        </DataTemplate>
                    </my:MapItemsControl.ItemTemplate>
                </my:MapItemsControl> 
```

点击显示描述的图钉。点击时需要在该布局中放置一个箭头，将一些值传递到另一个页面。如何实现这一点？请告诉我...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T11:46:48.037

在 App.xaml 中编写一些 UI 代码不是一个好习惯。App.xaml 和 App.xaml.cs 旨在处理应用程序生命周期事件，例如启动、关闭、激活和停用事件，并用于共享一些全局数据。

如果你还想使用，那么在后面的代码中你可以使用下面的代码从 App.xaml 导航到另一个页面

```
(Application.Current.RootVisual as PhoneApplicationFrame).Navigate(new Uri("/AnotherPage.xaml", UriKind.RelativeOrAbsolute)); 
```

# java - 错误：无法访问 OOPTutorial 类型的封闭实例

> ID：11031272
> 
> 赞同：2
> 
> 时间：2012-06-14T10:33:17.340
> 
> 标签：java

我是 Java 新手，正在尝试做一个简单的程序来帮助我进一步了解面向对象的编程。

我决定做一个电话程序。但是，在以下程序的第 5 行，我尝试创建电话类的实例，但出现以下错误：

“没有 OOPTutorial 类型的封闭实例是可访问的。必须使用 OOPTutorial 类型的封闭实例来限定分配（例如的实例`x.new A()`在哪里）。”`x``OOPTutorial`

这是程序：

```
public class OOPTutorial {

    public static void main (String[] args){

        phone myMobile = new phone();           // <-- here's the error
        myMobile.powerOn();
        myMobile.inputNumber(353851234);
        myMobile.dial();

   }

   public class phone{
       boolean poweredOn = false;
       int currentDialingNumber;

       void powerOn(){
           poweredOn = true;
           System.out.println("Hello");
       }
       void powerOff(){
           poweredOn = false;
       System.out.println("Goodbye");
       }
       void inputNumber(int num){
       currentDialingNumber = num;
       }
       void dial(){
           System.out.print("Dialing: " + currentDialingNumber);
       }
   }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T10:37:03.733

如果您是 Java 新手，这可能对您没有意义，但实例化非静态内部类 ( `phone`) 需要封闭类 ( `OOPTutorial`) 的实例。

用简单的英语，这大致意味着你要么

1.  只能`new phone()`在未标记为的 OOPTutorial-method 中执行`static`，或

2.  您需要创建`phone`一个顶级课程（即将其移到 的范围之外`OOPTutorial`），或者

3.  您需要将内部类`phone`设为静态（通过放在`static`类声明的前面）

# php - 如何让多个位置块使用相同的命名@location

> ID：11031274
> 
> 赞同：9
> 
> 时间：2012-06-14T10:33:29.117
> 
> 标签：php, nginx

我正在尝试创建一个几乎没有重复的 nginx conf 文件。我正在使用 nginx 来提供静态文件，并将 404 或 php 内容代理到命名位置 @varnish：

```
location @varnish {
    proxy_redirect off;
    proxy_set_header Host $host;
    proxy_set_header X-Real-IP $remote_addr;
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_pass_header Set-Cookie;
    proxy_pass http://localhost:6081;
    proxy_set_header Request-URI $request_uri;
} 
```

对于 nginx 应该检查它是否有文件然后传递到后端的“标准”情况，以下工作正常：

```
location ~* \.(js|css|png|jpg|jpeg|gif|ico)$ {
    access_log        off;
    add_header      Pragma public;
    add_header Cache-Control "public, must-revalidate, proxy-revalidate";
    expires           max;
    open_file_cache_valid 120m;
    try_files $uri @varnish;
} 
```

但是，对于 PHP，我什至不希望它尝试该文件，它应该立即将请求重定向到 @varnish：

```
location ~ \.php$ {
    rewrite . @varnish last;
} 
```

但是，这似乎不起作用。有两个独立的几乎相同的块（一个用于@backend，一个用于php）都引用相同的代理似乎很痛苦，并且是人类可能忘记将某些东西放在一个而不是另一个的问题。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-14T12:54:51.297

如果您将代理设置放入服务器上下文并让位置继承它们，那么复制的内容并不多。您还可以设置一个上游块，以便在需要时更轻松地更改代理目标：

```
upstream _varnish {
  server localhost:6081;
}

server {
  proxy_redirect off;
  proxy_set_header Host $host;
  proxy_set_header X-Real-IP $remote_addr;
  proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
  proxy_set_header Request-URI $request_uri;
  proxy_pass_header Set-Cookie;

  location @varnish {
    proxy_pass http://_varnish;
  }

  location ~* \.(js|css|png|jpg|jpeg|gif|ico)$ {
    access_log off;
    add_header Pragma public;
    add_header Cache-Control "public, must-revalidate, proxy-revalidate";
    expires max;
    open_file_cache_valid 120m;
    try_files $uri @varnish;
  }

  location ~ \.php$ {
    proxy_pass http://_varnish;
  }
} 
```

# javascript - V8 速度图

> ID：11031275
> 
> 赞同：4
> 
> 时间：2012-06-14T10:33:34.250
> 
> 标签：javascript, performance, google-chrome, v8

是否有任何图表显示 V8 JavaScript 引擎的性能如何随时间演变？

类似[http://speed.pypy.org/](http://speed.pypy.org/)

# php - php real_escape_string()，查询不再工作

> ID：11031276
> 
> 赞同：0
> 
> 时间：2012-06-14T10:33:37.790
> 
> 标签：php, mysql, database, mysql-real-escape-string

我希望能够添加和更新某些信息。现在一切正常，直到我发现当文本中有引号发送到数据库时脚本不再工作。

所以我做了一些研究，发现我不得不使用这个`mysql_real_escape_string()`函数来忽略引号。我已经这样做了，但是脚本现在根本不起作用了。我认为问题出在查询部分，但我没有看到问题。下面是代码：

```
<?php
if(isset($_POST['bevestiging']))
{   
    $ID = (int)$_GET['ID'];

    $titel = mysql_real_escape_string($_POST['Titel']);
    $ondertitel = mysql_real_escape_string($_POST['ondertitel']);
    $wanneer = mysql_real_escape_string($_POST['wanneer']);
    $datum = mysql_real_escape_string($_POST['datum']);
    $afbeelding = mysql_real_escape_string($_POST['afbeelding']);
    $intro = mysql_real_escape_string($_POST['intro']);
    $main = mysql_real_escape_string($_POST['main']);

    $query = "UPDATE voorstellingen 
              SET '$titel','$ondertitel','$wanneer','$datum','$afbeelding','$intro','$main' 
              WHERE id = $ID";

    mysql_query($query) or die('Error, bewerken van voorstelling is mislukt');  
    $query ="FLUSH PRIVILEGES"; 
    echo"De voorstelling is succesvol bewerkt";
}
else{

    $ID = (int)$_GET['ID'];
    $query="SELECT * FROM voorstellingen WHERE id = $ID";
    $result = mysql_query($query) or die('Error, bewerken van voorstelling is     mislukt');;
?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T10:35:00.953

您的更新查询应如下所示：

```
$query = "UPDATE voorstellingen SET title = '".$titel."' ....."; 
```

请参阅：[更新语法](http://dev.mysql.com/doc/refman/5.0/en/update.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T10:58:21.667

`mysql_real_escape_string`函数返回`FALSE`错误。您可以检查以下行的返回类型

```
$titel = mysql_real_escape_string($_POST['Titel']); 
```

看看它是否成功。您无需检查下一行。如果第一次函数调用出错，很可能意味着在调用函数之前不存在 SQL 连接。因为在使用之前需要一个 MySQL 连接，`mysql_real_escape_string()`否则会产生一个级别的错误`E_WARNING`，并`FALSE`返回。

如果上述建议不能解决您的问题，请详细说明您到底面临什么错误以及在哪一行。

# php - 我想知道如何在表格之间的字幕中回显多个新闻

> ID：11031277
> 
> 赞同：-2
> 
> 时间：2012-06-14T10:33:37.917
> 
> 标签：php, mysql

> **可能重复：**
> [如何使用 php 在 mysql 的字幕中显示多个新闻](https://stackoverflow.com/questions/11014769/how-to-show-multiple-news-in-marquee-from-mysql-using-php)

我想知道如何在表格之间的 marquee 中回显多个新闻，我只能回显一个新闻，我想使用 marquee 在表格内的主页中查看超过 4 条新闻，新闻已经发布在数据库中。我正在使用这段代码：

```
<?php

include("connect.php");

$select="SELECT newsid, headlines from news WHERE uploaddate order by uploaddate desc limit 4";

$rsd=mysql_query($select);

while($row = mysql_fetch_array($rsd))
{
    $newsid=$row['newsid'];
    $tittle=$row['headlines'];
}

?> 
```

在设计中我使用这个代码

```
<table >
<tr>
    <td width="87%">
    <marquee style="color: #FF0000; font-family: Verdana; font-variant: small-caps; font-size: 10pt; font-weight: bold" scrollAmount="2" scrollDelay="20" width="840" bgColor="#CCCCFF" height="24">
     <?php echo $tittle; ?></marquee></td>
</tr>
</table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T10:42:46.843

问题出在你的循环上......
执行此操作的部分：

```
<?php echo $tittle; ?>
//should be in the loop like below:

<!--starting from the above the loop-->
<table>
<?php
    while($row = mysql_fetch_array($rsd)){
        $tittle = $row['headlines'];
        echo '<tr><td>';
        echo '<marquee style="color:#ff0000; .......>';
        echo $tittle;
        echo '</marquee>';
        echo '</td></tr>';
    }
?>
</table> 
```

希望这对你有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T11:17:48.957

```
<marquee >
 <table>
 <?php

 $sql="SELECT newsid,headlines FROM `news` ORDER BY uploaddate DESC LIMIT 4 ";
 $res=func_query($sql);
 foreach($res as $key=>$val)
 {
?>
<tr><td><?=$val['headlines']?>: </h5></td></td>
<tr><td><hr style="border: 1px dotted #B8B8B8;"/></td></tr>

 <?php
  } 
    ?>
</table>
</marquee> 
```

# c# - 水晶报表多表问题

> ID：11031278
> 
> 赞同：0
> 
> 时间：2012-06-14T10:33:41.350
> 
> 标签：c#, crystal-reports

我有一个使用 Crystal Reports for VS 2010 的 C# 2010 应用程序。我的报告的目的是显示一个人在一周或数周内的每一天应该在哪里。格式是这样的：

![在此处输入图像描述](../Images/2ac6b22e73558ef1a3ca62b966e38234.png)

请注意，它是成对显示的，而不是带有通用标题的表格。

它使用一个包含两个数据表的数据集，一个用于标题日期，一个用于位置。

问题是，如果我在每个 DataTable 中有 n 个项目，则报告会显示 n^2 对标题/位置，而不仅仅是 n。该模式类似于两个表的笛卡尔积。

我认为这可能与报告的数据库专家中的链接部分有关，但我无法修复它。它现在不包含任何链接。

我使用的数据集如下所示：

![在此处输入图像描述](../Images/c289388fd2434be235f2a612b8f25a22.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T15:58:09.513

为什么你需要一个表头？你想达到什么目的？

为什么不向表示一周开始日期的 WeekTable 添加一个日期 (StartOfWeek)？如果您有该日期，则每个列标题将是一个公式字段，该字段根据 StartOfWeek 字段计算日期。如此简单，它消除了您正在经历的笛卡尔积。

** 编辑 **

将有 7 个标题公式（每天一个）：

```
//{@Sunday}
DateAdd("d", 0, {WeekTable.StartOfWeek})

...

//{@Saturday}
DateAdd("d", 7, {WeekTable.StartOfWeek}) 
```

将每个字段添加到页眉部分并根据需要设置格式（它们是日期值）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T14:39:38.683

您需要链接表以仅获取`n`行。

理想情况下：

*   向表中添加一个唯一`ID`列`Headers`。使其成为一个主键和一个自动递增的标识。
*   向表中添加一`HeaderID`列`WeekTable`，并使其成为该列上`Headers`表的外键`ID`。

该`Headers`表现在应该每周只包含一行，因此如果您有四名员工，他们在`HeaderID`给定的一周内都将拥有相同的数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T11:53:21.433

您可能需要进一步解释您的“标题日期”是什么。但是从您所说的来看，它们没有链接到主要数据，在这种情况下，我可能会在标题中使用子报表。

# c - c标准库中是否有验证功能？

> ID：11031281
> 
> 赞同：0
> 
> 时间：2012-06-14T10:33:48.510
> 
> 标签：c, standard-library

标准c库中是否有`verify()`函数（例如[`VERIFY()`](http://msdn.microsoft.com/en-us/library/fcatwy09%28v=vs.71%29.aspx)msvc）或类似函数，还是我必须自己编写？如果是这样，它在哪个标题下？

**编辑：** assert 和 verify 之间的区别在于，verify 仍然会在发布版本中执行该函数，而 assert 中的语句不会在发布版本中编译。

IE

```
assert( printf("assert ") );

verify( printf("verify") ); 
```

在 debug 中会打印`"assert verify"`，但在 release 中会打印`"verify"`。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T10:43:41.407

在运行时，C`assert`在`assert.h`.

在编译时，C（自 C11 起）`static_assert`在`assert.h`.

有关信息，对于`static_assert`某些 C89/C99 编译器，还包括它作为编译器扩展。例如 IAR 编译器`static_assert`在`intrinsics.h`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T10:36:21.487

您可以使用[CUnit](http://cunit.sourceforge.net/)进行单元测试。它是 Java 的旧 JUnit 库的 C 端口。

稍后编辑：似乎有一个我不知道的类似宏。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T10:36:49.507

您可以使用 assert.h 中定义的断言宏

# .htaccess - 缺少第二个变量时出现 .htaccess 重写问题

> ID：11031284
> 
> 赞同：2
> 
> 时间：2012-06-14T10:34:02.200
> 
> 标签：.htaccess

我已经编写了这段需要 2 个变量名称和 id 的简短 php 代码，现在代码本身可以按预期工作，这不是我的问题，问题是我想从“http://”缩短到该文件的链接www.mypage.org/folder/index.php?name=name&id=0' 到 'http://www.mypage.org/folder/name;0'，像这样：

```
RewriteRule ^([a-zA-Z0-9]+);(.*)$ index.php?name=$1&id=$2 
```

但是，如果有人输入了一个没有“;”的链接，例如“http://www.mypage.org/folder/name” 分隔符他们得到一个 404 页面。

**有没有办法编写一种 if 语句来检查没有“;”的链接？**

php 页面可以通过默认为“0”以及缺少名称来处理缺少的 id。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T10:52:56.610

使`;0`部分或 URL 可选：

```
RewriteRule ^([a-zA-Z0-9]+)(?:;(.*))?$ index.php?name=$1&id=$2 
```

或像这样（如果上述方法在 Apache 中不起作用）

```
RewriteRule ^([a-zA-Z0-9]+)(;(.*))?$ index.php?name=$1&id=$3 
```

# android - 我想把媒体播放器和listView的每一行放在一起？

> ID：11031286
> 
> 赞同：1
> 
> 时间：2012-06-14T10:34:04.280
> 
> 标签：android, android-layout, android-intent, android-widget

我想将媒体播放器与 listView 的每一行一起放置，你们中的任何人都可以帮我制作它吗....实际上它出现在我的屏幕前面，但我希望它与 ListView 的每一行一起播放和暂停具有所有功能，所以你们中的任何人都可以帮助我吗？

# sql-server - 将另一个组添加到递归 CTE

> ID：11031287
> 
> 赞同：3
> 
> 时间：2012-06-14T10:34:19.787
> 
> 标签：sql-server, tsql

回顾这个[SO 帖子](https://stackoverflow.com/questions/373490/insert-dates-in-the-return-from-a-query-where-there-is-none)

如果有一个分组类别“类别”，为简单起见，可以是 X 或 Y - 修改此脚本是否是一件小事，以便为每个类别添加缺失的日期？

我认为该类别需要添加到 CTE 中吗？

换句话说，如果我有以下初始表：

![在此处输入图像描述](../Images/ad46688ff525b0a5536da190a27f938e.png)

...我如何获得以下信息：

![在此处输入图像描述](../Images/045170f83476d3d95ee8de1b1be200c7.png)

将很快上传我的尝试

我已经调用了初始表#x。我希望适应如下递归 CTE 查询以包含字段类别：

```
DECLARE @MinDate DATETIME; 
SET @MinDate =  (SELECT Min(DATE) FROM #x)

DECLARE @MaxDate DATETIME; 
SET @MaxDate =  (SELECT Max(DATE) FROM #x)

;WITH times AS 
    ( 
    SELECT @MinDate dt , 1 depth 
    UNION ALL 
    SELECT 
            DATEADD(d, depth, @MinDate) dt 
            , 1 + depth as depth 
    FROM times 
    WHERE DATEADD(d, depth, @MinDate) <= @MaxDate
    ) 
SELECT 
    * 
FROM 
    TIMES t
    LEFT OUTER JOIN #X x
        ON 
        t.dt = x.Date 
```

好的 - 我已经绑定了一个 CROSS JOIN 但它错误地扩展了内容：

```
SELECT DISTINCT Category INTO #Cat FROM #x

DECLARE @MinDate DATETIME; 
SET @MinDate =  (SELECT Min(DATE) FROM #x)

DECLARE @MaxDate DATETIME; 
SET @MaxDate =  (SELECT Max(DATE) FROM #x)

;WITH times AS 
    ( 
    SELECT 
            Category
            , @MinDate dt 
            , 1 depth 
    FROM #Cat
    UNION ALL 
    SELECT 
            c.Category
            , DATEADD(d, depth, @MinDate) dt 
            , 1 + depth as depth 
    FROM 
            times t
            CROSS JOIN #Cat c
                --ON c.Category IS NOT NULL
    WHERE DATEADD(d, depth, @MinDate) <= @MaxDate
    ) 
SELECT 
    * 
FROM 
    TIMES 
```

这似乎工作正常：

```
SELECT DISTINCT Category INTO #Cat FROM #x

DECLARE @MinDate DATETIME; 
SET @MinDate =  (SELECT Min(DATE) FROM #x)

DECLARE @MaxDate DATETIME; 
SET @MaxDate =  (SELECT Max(DATE) FROM #x)

;WITH times AS 
    ( 
    SELECT 
            Category
            , @MinDate dt 
            , 1 depth 
    FROM #Cat
    UNION ALL 
    SELECT 
            Category
            , DATEADD(d, depth, @MinDate) dt 
            , 1 + depth as depth 
    FROM 
            times t
    WHERE DATEADD(d, depth, @MinDate) <= @MaxDate
    ) 
SELECT 
    * 
FROM 
    TIMES 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T10:41:40.390

这样的事情应该可以解决问题：

```
declare @curDate datetime, @maxDate datetime
declare @count tinyint

select @curDate = convert(datetime, '20120101', 112), @maxDate = getdate()
select @count = 0

while @curDate < @maxDate
begin
  select @count = count(1) from tablename where Category = 'X' and convert(varchar(8), Date, 112) = convert(varchar(8), @curDate, 112)

  if @count > 0
  begin
    insert into tablename
    select 'X', @curDate, 0
  end

  select @curDate = dateadd(dd, 1, @curDate)
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T11:07:24.610

这是一个没有日历表的解决方案（这是生产中的必需品）。您可能在变量中有日期范围，或者您可能会从`the_table`.

编辑：将类别合并到日期范围生成中的较短版本

```
declare @startdate datetime = '2012-1-1'
declare @enddate datetime = '2012-1-5'

; with dates([date], category) as (
  select distinct @startdate, category
    from the_table
   union all
  select dateadd (day, 1, [date]), category
    from dates
   where [date] < @enddate
)
select dates.date, 
       dates.category, 
       isnull(the_table.amount, 0) Amount
  from dates
  left join the_table
    on dates.date = the_table.date
   and dates.category = the_table.category
 order by dates.category, dates.date
option (maxrecursion 0) 
```

[有现场测试@Sql Fiddle](http://sqlfiddle.com/#!3/7f9c8/8)。 [新的 Sql 小提琴](http://sqlfiddle.com/#!3/7f9c8/19)。

# http - 如何配置 nginx 以代理在不同端口上提供 http 和 https 的另一个服务？

> ID：11031291
> 
> 赞同：0
> 
> 时间：2012-06-14T10:34:25.513
> 
> 标签：http, redirect, https, proxy, nginx

用例：

*   使用 nginx 作为在 80 和 443（多个虚拟主机）上运行的多个网站/服务的前端。
*   在服务于 http:8090 和 https:8099 的 localhost 上运行服务 x

我需要如何配置 nginx，以便人们可以仅使用名称访问，而无需指定端口。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T13:28:10.297

这是一个相当正常的设置。像往常一样配置直接在 Nginx 上服务的主机。由于他们需要同时监听 80 和 443，因此每个主机条目都将包含以下内容：

```
server {
    listen  80;
    listen  443 ssl;
} 
```

[Nginx SSL 文档](http://wiki.nginx.org/HttpSslModule)有完整的细节。

然后将一个定义的流量代理`server{}`到后端服务：

```
server {
     server_name  example.com;
     location / { proxy_pass http://127.0.0.1:8090; }
} 
```

您只需要一个到后端服务器的代理连接，“http”或“https”。如果两台服务器之间的连接是安全的，您可以使用“http”，即使对于通过 https 到达 nginx 的连接也是如此。如果服务在同一台机器上，这可能是合适的。否则，如果需要保护 nginx 和后端服务器之间的连接，则可以通过 https 代理所有流量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-23T10:27:12.027

我们在主机上使用以下内容：

```
http {
    server {
      server_name ~^(www\.)?(?<domain>.+)$;
      listen *:80;

      location / {
          proxy_pass $scheme://<origin>$uri$is_args$args;
          include basic-proxy-settings.conf;
      }
    }
    server {
      server_name ~^(www\.)?(?<domain>.+)$;
      listen *:443 ssl;

      location / {
          proxy_pass $scheme://<origin>$uri$is_args$args;
          include basic-proxy-settings.conf;
      }
      include ssl-settings.conf;
    }
} 
```

这允许我们的上游代理在客户端请求不安全资源时通过 HTTP 与源服务器通信，并在请求安全资源时通过 SSL/HTTPS 与源服务器通信。它还允许我们的源服务器负责强制重定向到安全连接等。

下一次，为什么不提供一个代码示例，详细说明您尝试过的、有效的以及无效的？

# c# - 如何在windows窗体应用程序c#中中止当前任务

> ID：11031293
> 
> 赞同：0
> 
> 时间：2012-06-14T10:34:30.193
> 
> 标签：c#, windows, forms, task, abort

我想提供一个取消当前任务的按钮，

假设我要执行以下任务，大约需要 30 分钟

```
 private void CaptureSignal()
  {
        // Capture Signal Code ......
  } 
```

我需要显示一个取消当前任务的按钮（在此过程中的任何时间）。

有什么建议么...？

提前致谢...：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T10:37:59.507

如果您的捕获是在主线程内完成的，请尝试以下操作：

```
bool abort = false;

private void CaptureSignal()
{
    while (!abort) {
    {
        // Capture Signal Code ......
    }
}

private void OnButtonClick(.............)
{
    abort = true;
} 
```

如果您使用的是[BackgroundWorker](http://msdn.microsoft.com/en-us/library/4852et58)，您可以发送取消请求。

# git - Git - 如何查看一个分支是否已合并到另一个分支？

> ID：11031294
> 
> 赞同：9
> 
> 时间：2012-06-14T10:34:36.010
> 
> 标签：git, branching-and-merging

如果我有一个功能分支 F 和一个主分支 M，那么

```
git branch --merged 
```

虽然在 master 上会显示 F 是否已完全合并到 M 中，但我如何判断它是否已合并？

我已经尝试过查看 git-log 手册以及我所知道的

```
git log M..F 
```

将向我显示尚未合并到 M 中的 F 上的转速。我希望看到与之相反的情况，即已合并到 M 中的 F 上的转速。

有一大堆问题与此接近，但似乎并未涵盖这种特殊情况。 2

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-14T11:27:58.107

使用`git log`：

```
git log feature_branch master --oneline --date-order --merges --reverse -1 
```

这将向您展示 feature_branch 和 master 之间的所有合并。`--reverse`将以相反的顺序输出提交。并且`-1`意味着只显示`one`提交。因此，您只会看到第一个合并的提交。

如果这是一个空输出，则意味着没有合并任何内容。如果您愿意，您可以删除`-1`最后的 以显示所有从最新开始的合并提交。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T10:40:51.413

**1.**列出已经合并的分支

```
git branch --merged 
```

**2.**列出尚未合并的分支（如果不存在则表示已合并）

```
git branch --no-merged 
```

# java - 如何在更改为横向模式android时继续播放视频

> ID：11031295
> 
> 赞同：24
> 
> 时间：2012-06-14T10:34:37.027
> 
> 标签：java, android, orientation, android-videoview

我正在`VideoView`以纵向模式（不是全屏）播放视频（打开），当我更改为

横向模式视频停止。

当我将其更改为横向时，该视频将全屏显示并继续播放。

有什么建议吗？

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2012-06-14T11:05:08.947

您需要做的就是将其添加到 AndroidManifest.xml 中的活动中：

```
 android:configChanges="orientation" 
```

您的视频活动应如下所示。

```
 <activity android:name=".VideoPlayerActivity" 
  android:configChanges="orientation" /> 
```

`screenSize`如果您的目标 API 级别为 13 或更高，则除了[此处](http://developer.android.com/guide/topics/resources/runtime-changes.html#HandlingTheChange)`orientation`描述的值之外，您还必须包含该值。您的视频活动应如下所示。

```
 <activity android:name=".VideoPlayerActivity" 
  android:configChanges="orientation|screenSize" /> 
```

然后在 VideoPlayerActivity 中添加以下方法：

```
@Override
public void onConfigurationChanged(Configuration newConfig) {
    super.onConfigurationChanged(newConfig);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-06-05T04:31:35.733

**全屏横向视频**

AndroidManifext.xml（设置方向）

```
 <activity
        android:name=".Video1"
        android:screenOrientation="landscape" /> 
```

Video1.xml 代码：

```
<?xml version="1.0" encoding="utf-8"?>
<android.support.constraint.ConstraintLayout
xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
xmlns:app="http://schemas.android.com/apk/res-auto"
android:layout_width="match_parent"
android:layout_height="match_parent"
tools:context=".Video1">

<VideoView
    android:id="@+id/videoView"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_gravity="center"
    app:layout_constraintLeft_toLeftOf="parent"
    app:layout_constraintRight_toRightOf="parent"
    app:layout_constraintTop_toTopOf="parent"
    app:layout_constraintBottom_toBottomOf="parent">
</VideoView> 
```

Video1.java 代码：

```
import android.net.Uri;
import android.os.Bundle;
import android.support.v7.app.AppCompatActivity;
import android.view.WindowManager;
import android.widget.MediaController;
import android.widget.VideoView;

public class Video1 extends AppCompatActivity {

private VideoView videoView;
private MediaController mediaController;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_video1);

    videoView = findViewById(R.id.videoView);
    String fullScreen =  getIntent().getStringExtra("fullScreenInd");
    if("y".equals(fullScreen)){
        getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,
                WindowManager.LayoutParams.FLAG_FULLSCREEN);
        getSupportActionBar().hide();
    }

    Uri videoUri = Uri.parse("android.resource://"+getPackageName()+"/"+R.raw.YOUR_VIDEO_NAME);

    videoView.setVideoURI(videoUri);

    mediaController = new FullScreenMediaController(this);
    mediaController.setAnchorView(videoView);

    videoView.setMediaController(mediaController);
    videoView.start();
    }
} 
```

FullScreenMediaControler.java 代码：

```
import android.app.Activity;
import android.content.Context;
import android.content.Intent;
import android.view.Gravity;
import android.view.View;
import android.widget.FrameLayout;
import android.widget.ImageButton;
import android.widget.MediaController;

public class FullScreenMediaController extends MediaController {

private ImageButton fullScreen;
private String isFullScreen;

public FullScreenMediaController(Context context) {
    super(context);
}

@Override
public void setAnchorView(View view) {

    super.setAnchorView(view);

    //image button for full screen to be added to media controller
    fullScreen = new ImageButton (super.getContext());

    FrameLayout.LayoutParams params = new FrameLayout.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
    params.gravity = Gravity.RIGHT;
    params.rightMargin = 80;
    addView(fullScreen, params);

    //fullscreen indicator from intent
    isFullScreen =  ((Activity)getContext()).getIntent().
            getStringExtra("fullScreenInd");

    if("y".equals(isFullScreen)){
        fullScreen.setImageResource(R.drawable.ic_fullscreen_exit);
    }else{
        fullScreen.setImageResource(R.drawable.ic_fullscreen);
    }

    //add listener to image button to handle full screen and exit full screen events
    fullScreen.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {

            Intent intent = new Intent(getContext(),Video1.class);

            if("y".equals(isFullScreen)){
                intent.putExtra("fullScreenInd", "");
            }else{
                intent.putExtra("fullScreenInd", "y");
            }
            ((Activity)getContext()).startActivity(intent);
        }
    });
  }
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-14T10:42:29.377

除非您另外指定，否则配置更改（例如屏幕方向、语言、输入设备等的更改）将导致您当前的活动被破坏，并通过 onPause()、onStop() 和onDestroy() 视情况而定。如果活动在前台或对用户可见，则在该实例中调用 onDestroy() 后，将创建活动的新实例，其中包含前一个实例从 onSaveInstanceState(Bundle) 生成的任何已保存实例状态。

那么幕后发生了什么： currnet VideoView Activity（横向）被销毁，由于 screenOrientation 配置已更改，创建了一个新的 VideoView Activity（纵向），并立即销毁（您可以在屏幕上看到效果），堆栈中的最后一个活动显示。

尝试处理此方法并检查

```
 @Override
protected void onResume() {
    mVideoView.resume();
    super.onResume();
}

@Override
protected void onPause() {
    mVideoView.suspend();
    super.onPause();
}

@Override
protected void onDestroy() {
    mVideoView.stopPlayback();
    super.onDestroy();
} 
```

# mysql - 如何在 MySQL 中进行随机排序。我应该使用 random() 还是 uuid()

> ID：11031307
> 
> 赞同：1
> 
> 时间：2012-06-14T10:35:40.107
> 
> 标签：mysql

我想获得查询的随机结果。我读到使用`RAND()`速度很慢。我可以使用`order by uuid_short()`吗？那会更好吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T10:38:00.227

`uuid_short()`大约比 慢两倍`rand()`，所以不，你不应该**使用**而`uuid_short()`不是`rand()`.

```
mysql> select benchmark(100000000, rand());
1 row in set (3.25 sec)

mysql> select benchmark(100000000, uuid_short());
1 row in set (6.04 sec) 
```

# xcode - UIView 转换方向错误

> ID：11031308
> 
> 赞同：0
> 
> 时间：2012-06-14T10:36:04.780
> 
> 标签：xcode, uiview, orientation, storyboard

我有这段代码（Book1 是 UIViewController 类）

```
Book1 *book = [self.storyboard instantiateViewControllerWithIdentifier:@"Book1ID"];    
[UIView transitionFromView:self.view toView:book.view duration:1 options:UIViewAnimationOptionTransitionCurlDown completion:nil]; 
```

ViewController 加载但它的方向是错误的。它以纵向视图加载，但我希望它以横向加载。

我已经在 Book1 中有以下代码，但是一旦加载了视图，所有自动旋转似乎都失败了。

```
 - (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation{
return interfaceOrientation == UIInterfaceOrientationLandscapeLeft || interfaceOrientation == UIInterfaceOrientationLandscapeRight;} 
```

如何在横向中加载此视图？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T08:29:15.347

我以前的方法没有发现问题，但我找到了另一种方法。

这是如何：

```
book = [self.storyboard instantiateViewControllerWithIdentifier:@"Book1ID"];
book.modalTransitionStyle = UIModalTransitionStyleCoverVertical;
[self presentViewController:book animated:YES completion:^(void){}]; 
```

特别感谢 Aalok Parikh 的所有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T06:44:01.670

所以请执行以下操作：

**第一的**

![支持的设备方向](../Images/6c86113b78fbccd2a21744af2ecbf621.png)

只需选择这两个方向作为支持的设备方向:)

**第二**

![plist 文件密钥条目](../Images/5948b8ab0919d974cfc0f1255122c26e.png)

现在添加**图像中的最后一个** `Initial interface orientation`键和列表中两个横向值中您想要的值

**第三**

现在将以下函数添加到所有控制器的 .m 文件中

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation == UIInterfaceOrientationLandscapeLeft || interfaceOrientation == UIInterfaceOrientationLandscapeRight);
} 
```

**向前**

只需构建并运行您的项目 :)

就是这样，您的应用程序仅限于横向模式

快乐编码:)

# dojo - Dgrid：ColumnHider 插件的“隐藏”属性未生效

> ID：11031310
> 
> 赞同：0
> 
> 时间：2012-06-14T10:36:06.793
> 
> 标签：dojo, dgrid

我有一列将“隐藏”和“不可隐藏”都设置为 true。但是，该列并没有隐藏....在进行一些测试后，我发现它仅在 unhidable 设置为 false 时才会隐藏。

IE，

```
hidden: true,
unhidable: true 
```

不工作

```
hidden: true,
unhidable: false 
```

作品

不可能同时隐藏和不可隐藏吗？

仅供参考，我也在使用 ColumnResizer 和 DijitRegistry 插件。这是网格模板中的列定义：

```
<th data-dgrid-column='{
        field: "order",
        hidden: true,
        unhidable: true,
        sortable: false
        }'>
        Order
</th> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T15:11:05.603

也许如果您以后不需要取消隐藏它，您可以使用 CSS 方法解决它？

```
<style type="text/css">
    .field-order {
        display: none;
    }
</style> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T08:46:45.987

这是 dgrid 插件的一个错误，现已修复：

[https://github.com/SitePen/dgrid/issues/199](https://github.com/SitePen/dgrid/issues/199)

# java - 如何在textview中显示阿拉伯文字

> ID：11031312
> 
> 赞同：0
> 
> 时间：2012-06-14T10:36:15.170
> 
> 标签：java, android, arabic, textview

我想知道每个阿拉伯字母的唯一代码，以将阿拉伯文本显示为文本视图。

当我直接作为字符串给出时，它不会像阿拉伯文本格式那样显示。它显示分隔的每个字母。我尝试了一些来自谷歌的链接。但我没有得到我正在寻找的东西。

实际上，我正在寻找每个阿拉伯字母的唯一代码。这样我就可以以阿拉伯语文本格式显示我的句子。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T10:43:47.623

[这](http://unicode.org/charts/PDF/U0600.pdf)是每个阿拉伯字母的 uni-code。可能您还需要使用不同的字体。

# c# - 如何在 C# 中将 [TYPE] 转换为可为空的<[TYPE]>？

> ID：11031315
> 
> 赞同：5
> 
> 时间：2012-06-14T10:36:22.533
> 
> 标签：c#, .net, reflection, nullable, activator

问题：

我编写了一个方法来检索作为类列表而不是数据表的 SQL 结果。问题是，我在数据库中有一个 int 字段，它可以为空。

如果我用 a 击中一行`NULL` `int`，则`DataReader`返回`DbNull.Value`而不是 null。所以`System.Convert.ChangeType(objVal, fi.FieldType)`抛出一个异常，因为它不能转换`DbNull`为`int`.

到目前为止很糟糕。我以为我已经解决了这个问题，当我只是比较并且如果为真时，改为这样做 `objVal`：`DbNull.Value``System.Convert.ChangeType(null, fi.FieldType)`

不幸的是，我刚刚意识到，结果整数类型是 0 而不是 NULL。

所以我只是尝试将我的类中的 int 类型更改为`Nullable<int>`，但现在我遇到的问题是，当值不是时`DbNull.Value`，`ChangeType`会引发异常，因为它无法转换`int`为`nullable<int>`...

所以现在我尝试检测返回的对象的类型`datareader`，并将其转换为可为空的值。

`tTypeForNullable` 正确显示为`Nullable<int>`。但是当我查看结果类型时，我得到：`int`.

这是为什么 ？更重要的是：我怎样才能正确地做到这一点？

**请注意，因为 type 是一个对象，所以我不能使用泛型方法来创建`Nullable<int>`.**

```
bool bisnull = IsNullable(objVal);
bool bisnullt = IsNullable(fi.FieldType);

if (bisnullt)
{
    Type tTypeForNullable = typeof(Nullable<>).MakeGenericType(objVal.GetType());

    //object result = Activator.CreateInstance(tTypeForNullable, new object[] { objVal });
    //object result = Activator.CreateInstance(typeof(Nullable<int>), new object[] { objVal });
    object result = Activator.CreateInstance(tTypeForNullable, objVal);
    Type tres = result.GetType();
    fi.SetValue(tThisValue, System.Convert.ChangeType(result, fi.FieldType));
} 
```

这是完整的例程供参考：

```
public virtual System.Collections.Generic.IList<T> GetList<T>(System.Data.IDbCommand cmd)
        {
            System.Collections.Generic.List<T> lsReturnValue = new System.Collections.Generic.List<T>();
            T tThisValue = default(T);
            Type t = typeof(T);

            lock (cmd)
            {
                using (System.Data.IDataReader idr = ExecuteReader(cmd))
                {

                    lock (idr)
                    {

                        while (idr.Read())
                        {
                            //idr.GetOrdinal("")
                            tThisValue = Activator.CreateInstance<T>();

                            // Console.WriteLine(idr.FieldCount);
                            for (int i = 0; i < idr.FieldCount; ++i)
                            {
                                string strName = idr.GetName(i);
                                object objVal = idr.GetValue(i);

                                System.Reflection.FieldInfo fi = t.GetField(strName);
                                //Type tttttt = fi.FieldType;
                                if (fi != null)
                                {
                                    //fi.SetValue(tThisValue, System.Convert.ChangeType(objVal, fi.FieldType));
                                    if (objVal == System.DBNull.Value)
                                    {
                                        objVal = null;
                                        fi.SetValue(tThisValue, null);
                                    }
                                    else
                                    {
                                        //System.ComponentModel.TypeConverter conv = System.ComponentModel.TypeDescriptor.GetConverter(fi.FieldType);

                                        bool bisnull = IsNullable(objVal);
                                        bool bisnullt = IsNullable(fi.FieldType);

                                        if (bisnullt)
                                        {
                                            Type tTypeForNullable = typeof(Nullable<>).MakeGenericType(objVal.GetType());

                                            //object result = Activator.CreateInstance(tTypeForNullable, new object[] { objVal });
                                            //object result = Activator.CreateInstance(typeof(Nullable<int>), new object[] { objVal });
                                            object result = Activator.CreateInstance(tTypeForNullable, objVal);
                                            Type tres = result.GetType();
                                            fi.SetValue(tThisValue, System.Convert.ChangeType(result, fi.FieldType));
                                        }
                                        fi.SetValue(tThisValue, System.Convert.ChangeType(objVal, fi.FieldType));
                                    }
                                }
                                else
                                {
                                    System.Reflection.PropertyInfo pi = t.GetProperty(strName);
                                    if (pi != null)
                                    {
                                        //pi.SetValue(tThisValue, System.Convert.ChangeType(objVal, pi.PropertyType), null);

                                        if (objVal == System.DBNull.Value)
                                        {
                                            objVal = null;
                                            pi.SetValue(tThisValue, null, null);
                                        }
                                        else
                                        {
                                            pi.SetValue(tThisValue, System.Convert.ChangeType(objVal, pi.PropertyType), null);
                                        }

                                    }
                                    // Else silently ignore value
                                } // End else of if (fi != null)

                                //Console.WriteLine(strName);
                            } // Next i

                            lsReturnValue.Add(tThisValue);
                        } // Whend

                        idr.Close();
                    } // End Lock idr

                } // End Using idr

            } // End lock cmd

            return lsReturnValue;
        } // End Function GetList 
```

有了这个：

```
public System.Data.IDataReader ExecuteReader(System.Data.IDbCommand cmd)
        {
            System.Data.IDataReader idr = null;

            lock(cmd)
            {
                System.Data.IDbConnection idbc = GetConnection();
                cmd.Connection = idbc;

                if (cmd.Connection.State != System.Data.ConnectionState.Open)
                    cmd.Connection.Open();

                idr = cmd.ExecuteReader(System.Data.CommandBehavior.CloseConnection);
            } // End Lock cmd

            return idr;
        } // End Function ExecuteReader 
```

**请注意，因为 type 是一个对象，所以我不能使用泛型方法来创建`Nullable<int>`.**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T10:38:45.700

您正在装箱 - 可空值类型的装箱操作的结果*永远不是*该类型的装箱值。它是 null 或不可为 null 的值类型。有关详细信息，请参阅[MSDN](http://msdn.microsoft.com/en-us/library/ms228597.aspx)。

# r - 使用系统命令打开具有特定路径的 Windows 资源管理器

> ID：11031317
> 
> 赞同：3
> 
> 时间：2012-06-14T10:36:33.290
> 
> 标签：r, system

我发现可以使用以下命令通过 cmd.exe 程序以预定义的路径打开 Windows 资源管理器：

```
explorer PATH 
```

使用以下命令返回 R 会打开 Windows 资源管理器：

```
system("explorer", intern=TRUE) 
```

但是，当我指定路径时，R 返回以下警告消息，并且不会在指定路径打开资源管理器：

```
> system("explorer C:\\Users\\xxx", intern=TRUE) 
character(0) 
attr(,"status") 
[1] 1 
Warning message: 
running command 'explorer C:\Users\xxx' had status 1 
```

我引用了 \ 否则 R 抱怨无法从 \Users 识别 \U。

但是，当命令按我们预期的方式执行时，双 \ 仅被替换为一个 。

当我将资源管理器 C:\Users\xxx 位从 R 警告消息复制粘贴到 cmd.exe 程序中时，资源管理器将在指定路径打开。

有人知道为什么会失败吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-14T11:03:54.767

尝试

```
shell("explorer C:\\Users\\xxx", intern=TRUE) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-12-28T12:19:04.620

我已经创建了这个简单的功能......我希望它会有用！

```
wopen <- function(x){
  y <- getwd()
  y <- gsub("/", "\\\\", y)
  shell(paste0("explorer ", y), intern = TRUE) 
} 
```

简而言之：它获取当前目录，更改斜线方向并调用 cmd.exe 打开它。问候。

# c# - 正则表达式查找输入值属性

> ID：11031318
> 
> 赞同：0
> 
> 时间：2012-06-14T10:36:34.303
> 
> 标签：c#, regex

我有一个 input type="text" 字段我想从中获取 value 属性，但条件是输入标签的 id 必须包含“PlaceHolderSearchArea”这个词

输入字段的html是这样的

```
<input name="ctl00$PlaceHolderSearchArea$SearchBox$S633C1122_InputKeydummywords" type="text" value="something something" maxlength="200" id="ctl00_PlaceHolderSearchArea_SearchBox_S622C1022_InputKeywords" accesskey="S" title="something..." class="ms-sbplain" alt="something..." onkeypress="javascript: return S633C1122_OSBEK(event);" onfocus="if (document.getElementById('ctl00_PlaceHolderSearchArea_SearchBox_ctl04').value =='0') {this.value=''; if (this.className == 's4-searchbox-QueryPrompt') this.className = ''; else this.className = this.className.replace(' s4-searchbox-QueryPrompt',''); document.getElementById('ctl00_PlaceHolderSearchArea_SearchBox_ctl04').value=1;}" onblur="if (this.value =='') {this.value='Enter Search Term'; if (this.className.indexOf('s4-searchbox-QueryPrompt') == -1) this.className += this.className?' s4-searchbox-QueryPrompt':'s4-searchbox-QueryPrompt'; document.getElementById('ctl00_PlaceHolderSearchArea_SearchBox_ctl04').value = '0'} else {document.getElementById('ctl00_PlaceHolderSearchArea_SearchBox_ctl04').value='1';}" style="width:170px;" /> 
```

有人可以建议一个正则表达式来实现这一点

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T11:56:57.843

试试这个——但我不太相信它是完美的。

```
/(?:id=('|")[^\1]*PlaceHolderSearchArea[^\1]*\1[^>]*)value=('|")(.*?\2)/ 
```

唯一的事情是它假设 ID 属性在值之前。

在这个例子中工作（JS）

```
'<input name="ctl00$PlaceHolderSearchArea$SearchBox$S633C1122_InputKeydummywords" type="text" value="something something" maxlength="200" id="ctl00_PlaceHolderSearchArea_SearchBox_S622C1022_InputKeywords" accesskey="S" value="hello" title="something..." class="ms-sbplain" alt="something..." style="width:170px;" />'.match(/(?:id=('|")[^\1]*PlaceHolderSearchArea[^\1]*\1[^>]*)value=('|")(.*?\2)/); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T11:57:15.983

```
@"(<input)([^>]*)(type=\"")(text)(\"")([^>]*)(value=\"")([^\""]*)(\"")([^>]*)(id=\"")(\w*PlaceHolderSearchArea\w*)(\"")([^>]*)(/>)" 
```

上面的表达式对我有用

# jquery - jQuery UI - addClass/removeClass 的问题：不需要的白色背景

> ID：11031319
> 
> 赞同：3
> 
> 时间：2012-06-14T10:36:35.140
> 
> 标签：jquery, jquery-ui, css, css-transitions

我正在尝试使用 jqueryUI 的 addClass() 和 removeClass() 设置悬停效果。
这就是我想出的：http: [//jsfiddle.net/5aS77/](http://jsfiddle.net/5aS77/)。
正如你所看到的，'onmouseout'，背景会变白一段时间，然后又会“跳”成蓝色。
我只希望动画从蓝色变为粉红色，反之亦然，没有任何“中断”。

我知道使用 CSS3 是可能的，尽管它有 2 个主要缺点，但我已经尝试过：
1) 并非所有浏览器都支持过渡属性。
2）它没有鼠标退出效果。（虽然它可以用一些 JS 来实现。）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T11:08:45.683

*白色闪烁*是因为 jQuery 没有用于动画的基色，因为 background-color 是在类上设置的，而`.nav`不是在`<a>`元素上设置的。

您可以按如下方式编辑规则以消除白色闪光。

```
.nav a {
    background-color:blue;
    ...
}

.nav .a_hover { // <--- need the .nav here otherwise CSS specificity results in blue still winning
    ...
} 
```

此外，如果您愿意，这里有一个更简洁的 jQuery 实现：

```
$('a').on({
    mouseenter:function() {
        $(this).stop().animate({backgroundColor:'#f89ed5'}, 250);
    },
    mouseleave:function() {
        $(this).stop().animate({backgroundColor:'blue'}, 250);
    }
}); 
```

有了这个，`.a_hover`类可以被删除，虽然你仍然需要`background-color:blue`on`.nav a`规则来避免最初的白色闪烁。`.a_hover`不需要中的其他属性，因为它们已经退出`.nav a`规则。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-14T10:39:30.410

**演示：** [Jsfiddle](http://jsfiddle.net/5aS77/2/)

```
 var links = document.getElementsByTagName("a");
    for(var i = 0; i < links.length; i++) {
        links[i].onmouseover = hoverHandler;
        links[i].onmouseout = outHandler;
    }

    function hoverHandler() {
        $(this).addClass("a_hover",250);
    }

    function outHandler() {
        $(this).removeClass("a_hover");
    }​ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-14T10:48:54.413

如果您查看 jquery 文档，您会看到有一个悬停事件 - 如果您要使用 jquery，则值得充分利用它。（http://api.jquery.com/hover/）。

说不用js也能达到同样的效果：

```
.nav a {
    display:block;
    float:left;
    text-decoration:none;
    text-shadow:1px 1px #FFF;
    height:31px;
    width:auto;
    color: #000;
    padding: 11px 20px 0 20px;
    overflow:hidden;
}
.nav a:hover{
    display:block;
    overflow:hidden;
    background-color:#f89ed5;
    text-shadow:1px 1px #FFF;
    padding: 11px 20px 0 20px;
}​ 
```

回答问题：

删除数字，例如

```
function hoverHandler() {
                $(this).addClass("a_hover");
            }

            function outHandler() {
                $(this).removeClass("a_hover");
            }​ 
```

[http://api.jquery.com/addClass/](http://api.jquery.com/addClass/)

# tridion - Content Deployer 在安装 SmartTarget 后给出错误消息

> ID：11031332
> 
> 赞同：2
> 
> 时间：2012-06-14T10:37:29.053
> 
> 标签：tridion, tridion-2011, tridion-content-delivery

我已经为 SmartTarget 配置了 Deployer（.NET 网站）。当我尝试发布动态组件模板时，它在部署时给了我一个错误。

1.  区域已在 TBB 中定义，包含在 CT 中
2.  添加到 Smarttarget TBB 也添加到 CT。

错误是：

> 2012-06-14 15:39:53,296 调试部署处理程序-部署 tcd:pub[14]/componentmeta[1300]。
> 2012-06-14 15:39:53,296 调试部署处理程序-活动线程事务：tcm:0-1731-66560。2012-06-14 15:39:53,296 DEBUG DeploymentHandler - 将来自：tcd:pub[14]/componentmeta[1300] 的引用处理到：1 项 2012-06-14 15:39:53,296 DEBUG DeploymentHandler - 跟踪的引用总数：15 2012-06-14 15:39:53,296 调试 HandlerFactory - 检索 itemURI 的 typeHandler：tcd:pub[14]/componentmeta[1300] 2012-06-14 15:39:53,312 调试部署处理程序 - 部署 tcd:pub[0]/酒吧[14]。2012-06-14 15:39:53,312 调试 HandlerFactory - 检索 itemURI 的 typeHandler：tcd:pub[0]/pub[14] 2012-06-14 15:39:53,312 调试 MetaDataFactory - 从文件中为 type=ComponentPresentations 创建 MetaDataFile C:\tridion\incoming\testRD\Zip\tcm_0-1731-66560.Content\component_presentations.xml 2012-06-14 15:39:53,
> 在 com.tridion.tcdl.TagDispatcher.endTag(TagDispatcher.java:358) ~[cd_tcdl.jar:na]
> 在 com.tridion.tcdl.TCDLParser.parse(TCDLParser.java:156) ~[cd_tcdl.jar:na]
> 在 com.tridion.tcdl.TCDLTransformer.nonRELTransform(TCDLTransformer.java:122) ~[cd_tcdl.jar:na]
> 在 com.tridion.tcdl.TCDLTransformer.process(TCDLTransformer.java:83) ~[cd_tcdl.jar:na]
> 在 com.tridion.deployer.TCDLTransformer.transform(TCDLTransformer.java:118) ~[cd_deployer.jar:na]
> 在 com.tridion.deployer.TCDLTransformer.transform(TCDLTransformer.java:89) ~[cd_deployer.jar:na]
> 在 com.tridion.deployer.TransformProcessor.transformItem(TransformProcessor.java:185) ~[cd_deployer.jar:na]
> 在 com.tridion.deployer.modules.ComponentPresentationDeploy.processComponentPresentation(ComponentPresentationDeploy.java:123) ~[cd_deployer.jar:na]
> 在 com.tridion.deployer.modules.ComponentPresentationDeploy.processItem(ComponentPresentationDeploy.java:105) ~[cd_deployer. jar:na]
> 在 com.tridion.deployer.SectionVisitor.processSection(SectionVisitor.java:83) ~[cd_deployer.jar:na]
> 在 com.tridion.deployer.SectionVisitor.process(SectionVisitor.java:60) ~[cd_deployer. jar:na]
> 在 com.tridion.deployer.Processor.process(Processor.java:109) ~[cd_deployer.jar:na]
> 在 com.tridion.deployer.workers.ProcessorWorker.doWork(ProcessorWorker.java:74) ~[ cd_deployer.jar:na]
> 在 com.tridion.deployer.phases.ProcessingPhase.execute(ProcessingPhase.java:73) ~[cd_deployer.jar:na]
> 在 com.tridion.deployer.phases.DeployPipelineExecutor.runMainExecutePhase(DeployPipelineExecutor.java:186) [cd_deployer.jar :na]
> 在 com.tridion.deployer.phases.DeployPipelineExecutor.doExecute(DeployPipelineExecutor.java:97) [cd_deployer.jar:na] 在 com.tridion.deployer.phases.DeployPipelineExecutor.execute(DeployPipelineExecutor.java:61) [cd_deployer .jar:na]
> 在 com.tridion.deployer.TransactionManager.handleDeployPackage(TransactionManager.java:80) [cd_deployer.jar:na]
> 在 com.tridion.deployer.queue.QueueLocationHandler$1.run(QueueLocationHandler.java:176) [ cd_deployer.jar:na]
> 在 java.util.concurrent.Executors$RunnableAdapter.call(Unknown Source) [na:1.6.0_11]
> at java.util.concurrent.FutureTask$Sync.innerRun(Unknown Source) [na:1.6.0_11]
> at java.util .concurrent.FutureTask.run(Unknown Source) [na:1.6.0_11]
> at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(Unknown Source) [na:1.6.0_11]
> at java.util.concurrent.ThreadPoolExecutor$Worker .run(Unknown Source) [na:1.6.0_11]
> at java.lang.Thread.run(Unknown Source) [na:1.6.0_11]
> 2012-06-14 15:39:53,312 INFO TransactionPersistence - 删除部署事务信息： tcm:0-1731-66560
> 2012-06-14 15:39:53,312 错误 DeployPipelineExecutor - 无法使用 transactionId 开始处理部署包：tcm:0-1731-66560
> 2012-06-14 15:39:53,312 调试 DeployPipelineExecutor - 检查事务是否完成：tcm:0-1731-66560 为真
> 2012-06-14 15:39:53,312 信息 DeployPipelineExecutor - 事务已完成：tcm:0-1731 -66560
> 2012-06-14 15:39:53,312 INFO DeployPipelineExecutor - 在 94 毫秒内完成执行部署管道：tcm:0-1731-66560。
> 2012-06-14 15:39:53,312 INFO TransactionManager - 为事务清理部署包：tcm:0-1731-66560 和类型：内容
> 2012-06-14 15:39:53,328 INFO TransactionManager - 部署包的完成处理： tcm:0-1731-66560，类型：CONTENT
> 2012-06-14 15:39:53,328 DEBUG QueueLocationHandler - 删除部署包的排他锁：tcm:0-1731-66560，类型：CONTENT。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T11:02:41.240

```
java.lang.NoClassDefFoundError: org/apache/commons/lang/StringUtils 
```

看起来您还没有安装第三方库文件。

# cookies - 为什么在 Safari 中删除 cookie 文件不起作用？

> ID：11031338
> 
> 赞同：3
> 
> 时间：2012-06-14T10:37:49.817
> 
> 标签：cookies, safari

我想在 Mac OS 下删除 Safari 中的 cookie 文件。关闭浏览器后，我删除：

```
rm -rf '~/Library/Caches/Metadata/Safari/*'                                  
rm -rf '~/Library/Caches/com.apple.Safari/*'                                 
rm -rf '~/Library/Safari/*'                                                  
rm -rf '~/Library/Cookies/Cookies.binarycookies'                             
rm -rf '~/Library/Saved Application State/com.apple.Safari.savedState/*' 
```

但是当我启动 Safari 并运行[测试页面](http://www.html-kit.com/tools/cookietester/)时，**我仍然可以看到 cookie**。貌似没有删。。。

知道为什么吗？当我通过 Safari 选项（清除浏览器数据）删除 cookie 时，一切正常。虽然，我有兴趣手动删除它们。

禁用 cookie 不是解决方案 -*我想接受 cookie*，然后我想删除它们。这是因为我正在使某些过程自动化，并且每次都需要一个干净的浏览器

# javascript - 如何连接点？（点是随机定位的 HTML 元素）

> ID：11031340
> 
> 赞同：1
> 
> 时间：2012-06-14T10:37:52.563
> 
> 标签：javascript, html

我正在使用以下代码生成与页面中另一个元素的最大距离的随机点：

```
function drawPoints (maxdistance, npoints) {
  var start = $('#startingPoint').position();
  var draw = document.getElementById('draw');

  var i = npoints;
  while(i--) {
    var n = document.createElement('div');
    n.style.position = 'absolute';
    n.style.top = ( - (Math.random() * maxdistance) -10 + start.top).toString() + 'px';
    n.style.left = ( - (Math.random() * maxdistance) + 50 + start.left).toString() + 'px';
    n.style.width = '6px';
    n.style.height = '6px';
    n.style.backgroundColor = 'black';
    n.style.borderRadius = '6px';
    draw.appendChild(n);
  }
} 
```

例如，`drawPoints(150, 20);`将绘制 20 个点，距离起点的最大距离为 150。

问题是，我如何绘制某种弧线或线条来连接这些点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T12:50:49.520

使用画布和其他新功能非常好，但我认为*几乎*所有的东西都可以用非常简单的内置函数重新编程（当然不用 jQuery）。

这是连接点的跨浏览器功能：

```
function connectDots(xA,yA,xB,yB)
{
    var a=document.createElement("div");
    var r=180*Math.atan2(yB-yA,xB-xA)/Math.PI;
    a.setAttribute("style","width:"+Math.sqrt(Math.pow(xA-xB,2)+Math.pow(yA-yB,2))+"px;height:1px;position:absolute;background-color:black;top:"+yA+"px;left:"+xA+"px;-moz-transform:rotate("+r+"deg);-moz-transform-origin:0px 0px;-webkit-transform:rotate("+r+"deg);-webkit-transform-origin:0px 0px;transform:rotate("+r+"deg);transform-origin:0px 0px;-ms-transform:rotate("+r+"deg);-ms-transform-origin:0px 0px;");
    document.body.appendChild(a);
} 
```

四行。

小提琴：http: [//jsfiddle.net/mageek/3aG5H/2/](http://jsfiddle.net/mageek/3aG5H/2/)

# javascript - WMD - 获取降价文本

> ID：11031344
> 
> 赞同：2
> 
> 时间：2012-06-14T10:38:03.800
> 
> 标签：javascript, jquery, markdown, wmd, wmd-editor

我在我的应用程序中使用[降价编辑器](http://code.google.com/p/pagedown/)。

```
$(document).ready(function () {
    var converter = Markdown.getSanitizingConverter();
    var editor = new Markdown.Editor(converter);
    editor.run();
});

<div class="wmd-panel">
    <div id="wmd-button-bar"></div>
    <textarea class="wmd-input" id="wmd-input" rows="7" cols="30"></textarea>        
</div>
<div id="wmd-preview" class="wmd-panel wmd-preview" name="Content"></div> 
```

最初，textarea 字段为空。在我输入一些文本后，一切都按预期工作：

![在此处输入图像描述](../Images/9b6e858069f65dd51455d198f1972eb5.png)

Firebug 显示了这样的 html 结构：

![在此处输入图像描述](../Images/8a7279c488506098419d41b5d58accae.png)

现在我需要输入纯降价文本：`**where** is it ?`. 我需要它，因为我认为它应该存储在数据库中（稍后从数据库中检索并在向用户显示时转换为 html）。我不知道怎么才能达到。我怎么才能得到它 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T10:48:34.117

他们有一些可能对您有帮助的[文档。](http://code.google.com/p/pagedown/wiki/PageDown)

奇特的方法可能是`preConversion`在事件链中捕获事件：

```
converter.hooks.chain('preConversion', function(markdown) {
  // Do something wonderful with you markdown variable, and then return it.
  return markdown;
}); 
```

不那么花哨但按预期工作的方法是只检索 textarea 的 value 参数的值。

```
var textarea = document.getElemetById('wmd-input');
var markdown = textarea.value; 
```

# jsf-2 - 如何从jsf中的selectOneMenu获取所选项目值的ID？

> ID：11031345
> 
> 赞同：0
> 
> 时间：2012-06-14T10:38:20.653
> 
> 标签：jsf-2

我有类别的下拉列表。在选择特定类别时，我呈现了该类别子类别的另一个下拉列表。我想要选定子类别的 id。但我没有得到它。我的代码是：

```
 <tr>
     <td align="right">
          <h:outputText value="Select Main Category:"></h:outputText>
     </td>
     <td>
          <h:selectOneMenu id="cmbcategory" value="#{categoryBean.categoryID}" required="true" requiredMessage="Select Category" >
               <f:selectItem itemLabel="--Select Category--" itemValue="0"></f:selectItem>
               <f:selectItems value="#{categoryBean.categories}" var="item" itemLabel="#{item.categoryName}" itemValue="#{item.categoryID}"></f:selectItems>
               <f:ajax event="valueChange" render="cmbsubcategory"  immediate="true" listener="#{categoryBean.SubcategoriesByCategory()}"/>
          </h:selectOneMenu>
     </td>
     <td><h:message for="cmbcategory"></h:message></td>
 </tr>
 <tr>
      <td align="right">
          <h:outputText value="Select Sucategory:"></h:outputText>
      </td>
      <td>
           <h:selectOneMenu id="cmbsubcategory" value="#{categoryBean.subCategoryID}" required="true" requiredMessage="Select Subcategory">
                <f:selectItem itemLabel="--Select Subcategory--" itemValue="0"></f:selectItem>
                <f:selectItems value="#{categoryBean.SubcategoriesByCategory()}" var="item" itemLabel="#{item.subcategoryID}" itemValue="#{item.subcategoryID}"></f:selectItems>

           </h:selectOneMenu>
      </td>
      <td><h:message for="cmbsubcategory"></h:message></td>
 </tr> 
```

我的豆子是：

```
public int getCategoryID() {
        return CategoryID;
    }

    public void setCategoryID(int CategoryID) {
        this.CategoryID = CategoryID;
    }

    public String getCategoryName() {
        return CategoryName;
    }

    public void setCategoryName(String CategoryName) {
        this.CategoryName = CategoryName;
    }

    public Collection<Category> getCategories() {
        categories=abr.getAllCategory();
        return categories;
    }

    public Collection<Subcategory> SubcategoriesByCategory()
    {
        System.out.print("catid...... "+CategoryID);
        subcats= abr.searchAllSubcategoriesByCategory(CategoryID);

        return subcats;

//            +"size....."+ subcats.size());
     }

    public String getSubCatName() {
        return SubCatName;
    }

    public void setSubCatName(String SubCatName) {
        this.SubCatName = SubCatName;
    }

    public int getSubCategoryID() {
        System.out.print("subcatid...... "+SubCategoryID);
        return SubCategoryID;
    }

    public void setSubCategoryID(int SubCategoryID) {
        this.SubCategoryID = SubCategoryID;
    }

    public Collection<Subcategory> getSubcats() {
        return subcats;
    }

    public void setSubcats(Collection<Subcategory> subcats) {
        this.subcats = subcats;
    }

    public void setCategories(Collection<Category> categories) {
        this.categories = categories;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T11:49:22.347

您正在将属性获取器与操作方法混为一谈。getter 应该返回属性，而 action 方法应该是`void`或返回一个`String`.

改变

```
public Collection<Subcategory> SubcategoriesByCategory() {
  ..
} 
```

至

```
public void searchSubcats() {
  subcats= abr.searchAllSubcategoriesByCategory(CategoryID);
} 
```

并在您的 ajax 请求中调用此方法：

```
<f:ajax .. listener="#{categoryBean.searchSubcats}"/> 
```

然后，第二个下拉列表中的 selectItems 需要引用子猫的 getter：

```
<f:selectItems value="#{categoryBean.subcats}" ... /> 
```

# android - 如何在默认浏览器或 webview 中打开按钮单击 url

> ID：11031348
> 
> 赞同：3
> 
> 时间：2012-06-14T10:38:26.993
> 
> 标签：android, android-layout, android-intent

`webview`单击按钮后，如何在默认浏览器或默认浏览器中打开 url ？目前，当我单击该`btn1`按钮时，它会提示我从手机中选择一个浏览器。我想在默认浏览器或`webview`.

这是我的java代码：

```
 public class myactivity extends Activity {

@Override
    public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    Button bt1 = (Button) findViewById(R.id.btn_click_login);
    btn_login.setOnClickListener(new OnClickListener() {
         public void onClick(View v) {
             Intent myWebLink = new Intent(android.content.Intent.ACTION_VIEW);
             myWebLink.setData(Uri.parse("http://google.com"));
             startActivity(myWebLink);
          }
         }
     );
} 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-06-14T10:54:01.463

干得好。

确保包含`<uses-permission android:name="android.permission.INTERNET"/>`在清单中

```
Intent internetIntent = new Intent(Intent.ACTION_VIEW,
Uri.parse("http://www.google.com"));
internetIntent.setComponent(new ComponentName("com.android.browser","com.android.browser.BrowserActivity"));
internetIntent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
context.startActivity(internetIntent); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-14T10:53:26.080

可以试试这个你的意图

```
intent.setComponent(new ComponentName("com.android.browser", "com.android.browser.BrowserActivity")); 
```

在你的代码中

```
 public void onClick(View v) {
             Intent myWebLink = new Intent(android.content.Intent.ACTION_VIEW);
             myWebLink.setComponent(new ComponentName("com.android.browser", "com.android.browser.BrowserActivity"));
             myWebLink.setData(Uri.parse("http://google.com"));
             startActivity(myWebLink);
       } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-14T19:21:50.330

在您的布局 xml 中放置一个 WebView

```
<RelativeLayout
  xmlns:android="http://schemas.android.com/apk/res/android"
  android:orientation="vertical"
  android:layout_width="match_parent"
  android:layout_height="match_parent"

  android:gravity="center"  
  >

  <WebView 
  android:layout_width="match_parent"
  android:layout_height="match_parent"
  android:id="@+id/web"
/>

</RelativeLayout> 
```

在您的活动中获取对它的引用

```
WebView mWeb = (WebView) findViewById(R.id.web); 
```

调用 loadUrl() 就可以了。

```
mWeb.loadUrl("http://google.com"); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-14T10:47:21.887

在 android 中有两种类型的意图：

显式意图：明确指定目标组件的位置。隐式 Intents：没有指定目标组件，而是提供了一些其他字段，即 Data、Action、Category.. 并根据这些字段（属性）android 系统过滤活动或组件来处理意图。

并且您正在使用 Implicit Intent，它将列出所有可以在 Action_VIEW 上工作的活动，以及指定的 URI。为避免这种情况，您只能选择通过其他参数限制 Android 系统进一步过滤，或将其更改为 Explicit Intent。并且要将其更改为显式意图，您需要目标组件名称。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-06-05T07:53:37.273

这对我有用

```
 public void onClick(View v) {
            Intent browserIntent = new Intent(Intent.ACTION_VIEW, Uri.parse("http://google.com"));
            startActivity(browserIntent);
        } 
```

# ios5 - 单元可重用导致在 iOS5 中重复数据

> ID：11031349
> 
> 赞同：0
> 
> 时间：2012-06-14T10:38:30.127
> 
> 标签：ios5, uitableview, reuseidentifier

我正在为我的表格视图使用自定义单元格。在我的单元格中，我有图像视图和按钮。我在单行中显示 3 张图像。当我选择 button 时，我使用的是复选框图像，当再次点击 button 时，它会取消选择复选框图像。当我选择第一行中的按钮并滚动 tabelview 时，它还会检查第 3 行或第 4 行的按钮。我认为这是由于细胞的重用。这是我的 cellForRowAtIndexPath 代码：

```
 - (UITableViewCell *)tableView:(UITableView *)tableView1 cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"LibraryElementsCell";
    LibraryElementsCell *cell = (LibraryElementsCell *) [tableView1 dequeueReusableCellWithIdentifier:CellIdentifier];

    if (cell == nil)
    {
        NSArray *cellArray=[[NSBundle mainBundle] loadNibNamed:@"LibraryElementsCell" owner:self options:nil];
        cell=[cellArray objectAtIndex:0];

        [cell.firstElementButton setImage:[UIImage imageNamed:CHECKBOX_UNCHECKED_IMAGE] forState:UIControlStateNormal];
        [cell.firstElementButton addTarget:self action:@selector(checkBoxSelectedOnLibraryElement:event:) forControlEvents:UIControlEventTouchUpInside];

        [cell.secondElementButton setImage:[UIImage imageNamed:CHECKBOX_UNCHECKED_IMAGE] forState:UIControlStateNormal];
        [cell.secondElementButton addTarget:self action:@selector(checkBoxSelectedOnLibraryElement:event:) forControlEvents:UIControlEventTouchUpInside];

        [cell.thirdElementButton setImage:[UIImage imageNamed:CHECKBOX_UNCHECKED_IMAGE] forState:UIControlStateNormal];
        [cell.thirdElementButton addTarget:self action:@selector(checkBoxSelectedOnLibraryElement:event:) forControlEvents:UIControlEventTouchUpInside];

        tableView1.backgroundColor = [UIColor clearColor];
        tableView1.separatorStyle = UITableViewCellSeparatorStyleNone;
        cell.selectionStyle = UITableViewCellSelectionStyleNone;
    }

    NSMutableArray *tempArray = [self.categoriesArray objectAtIndex:indexPath.section];

    int row = indexPath.row * 3;

    if (row <= [tempArray count]) 
    {
        LibraryElement *libElement = [tempArray objectAtIndex:row];
        cell.firstElementImageView.image = [UIImage imageNamed:libElement.imageName];
    }

    if ((row + 1) < [tempArray count]) 
    {
        LibraryElement *libElement = [tempArray objectAtIndex:row+1];
        cell.secondElementImageView.image = [UIImage imageNamed:libElement.imageName];
    }
    else {
        [cell.secondElementImageView setHidden:YES];
        [cell.secondElementButton setHidden:YES];
    }

    if ((row + 2) < [tempArray count]) 
    {
        LibraryElement *libElement = [tempArray objectAtIndex:row+2];
        cell.thirdElementImageView.image = [UIImage imageNamed:libElement.imageName];
    }
    else {
        [cell.thirdElementImageView setHidden:YES];
        [cell.thirdElementButton setHidden:YES];
    }

    return cell;
} 
```

有时隐藏按钮和图像视图的逻辑也会变得混乱。即使数据可用，它也会隐藏图像视图和按钮。

非常感谢任何帮助。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T12:08:45.123

您需要每次刷新单元格组件，例如在单元格内创建一个刷新方法，该方法获取您的数据并绘制单元格组件

> refreshCellView:(NSDictionary)数据

并在 cellForRowAtIndexPath 内部调用 refreshCellView: 获取单元格后

# perl - 如何在 Perl 中创建一个新文件？

> ID：11031350
> 
> 赞同：2
> 
> 时间：2012-06-14T10:38:32.860
> 
> 标签：perl, serialization, perl-io

我在变量`$a`, `$b`,中存储了一些值`$c`。现在我必须将这些值加载到新文件中（创建文件并加载）。我是 Perl 的新手，我该怎么做？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-14T11:42:47.773

```
#!/usr/bin/env perl
use strict;
use warnings FATAL => 'all';
use autodie qw(:all);

my $a = 5;
my $b = 3;
my $c = 10;

#### WRITE ####
{
    open my $fh, '>', 'output.txt';
    print {$fh} $a . "\n";
    print {$fh} $b . "\n";
    print {$fh} $c . "\n";
    close $fh;
}

#### READ ####
{
    open my $fh, '<', 'output.txt';
    my ($a, $b, $c) = <$fh>;
    print $a;
    print $b;
    print $c;
    close $fh;
} 
```

您应该阅读[perlpentut](http://p3rl.org/opentut)和[Beginner Perl Maven 教程：写入文件](http://perlmaven.com/writing-to-files-with-perl)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T10:55:23.007

看看方法`LoadFile`和模块`DumpFile`。[`YAML`](https://metacpan.org/module/YAML)它们非常易于使用，因为您只需要针对它们抛出文件名和实际数据。

如果不与这些相处，请提出具体问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T13:31:26.787

另一种选择：[File::Slurp](https://metacpan.org/module/File%3a%3aSlurp)提供方便`read_file`和`write_file`功能

# wolfram-mathematica - 以编程方式关闭 Mathematica 中的所有单元组？

> ID：11031365
> 
> 赞同：0
> 
> 时间：2012-06-14T10:39:39.173
> 
> 标签：wolfram-mathematica, mathematica-8, mathematica-frontend

是否可以折叠当前笔记本中的所有单元组？我试过了

```
nb = SelectedNotebook[];
SelectionMove[nb, Before, CellGroup]
FrontEndTokenExecute["OpenCloseGroup"] 
```

但没有任何改变。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T14:53:55.550

你可以使用

```
nb = SelectedNotebook[];
SelectionMove[nb, All, Notebook];
FrontEndTokenExecute[nb, "OpenCloseGroup"] 
```

尽管它仅适用于笔记本以单元组开头而不是单独的单元格时。（菜单项的行为方式相同。）

如果您知道有`cellGroupCount`组，您还可以执行以下操作：

```
nb = SelectedNotebook[];
SelectionMove[nb, Before, Notebook]
Do[SelectionMove[nb, Next, CellGroup];
 FrontEndTokenExecute[nb, "OpenCloseGroup"], {cellGroupCount}] 
```

# iphone - 使用单例时 EXC_BAD_ACCESS 代码=2

> ID：11031369
> 
> 赞同：1
> 
> 时间：2012-06-14T10:40:04.230
> 
> 标签：iphone, ios, tableview

我有一个 Singleton 来管理我在应用程序的各个位置需要的一些变量。这是单例，称为 General：

```
#import "General.h"

static General *sharedMyManager = nil;

@implementation General

@synthesize user;
@synthesize lon;
@synthesize lat;
@synthesize car;
@synthesize firstmess;
@synthesize firstfrom;
@synthesize numcels;

#pragma mark Singleton Methods

+ (id)sharedManager {
static dispatch_once_t onceToken;
dispatch_once(&onceToken, ^{
    if (sharedMyManager == nil) {
        sharedMyManager = [[self alloc] init];
    }
});

return sharedMyManager;
}

- (id)init {
if (self = [super init]) {
    user = [[NSString alloc] initWithString:@"vacio"];
    numcels=0;
}
return self;
}

- (void)dealloc {
// Should never be called, but just here for clarity really.
}

@end 
```

我在 TableView 中使用它，该 TableView 显示在我的应用程序一部分的屏幕消息中，该部分是聊天。我的意思是，每次应用程序接收或发送消息时，我都会将 1 添加到 var“numcels”，这就是 numberOfRowsInSection 方法返回的值。

```
-(NSInteger) tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
General *general = [General sharedManager];
return *(general.numcels); //It freezes here
} 
```

问题是，当我运行程序时，它冻结在注释行，说 EXC_BAD_ACCESS 代码 = 2。我想问题可能出在单身人士身上，但不知道它到底在哪里。

有什么帮助吗？先感谢您。

- - - -编辑 - - - -

```
-(UITableViewCell *) tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
NSLog(@"Hemos entrado en cellForRowAtIndexPath");
UITableViewCell *cell=[tableView dequeueReusableCellWithIdentifier:@"UITableViewCell"];
if(!cell){
UITableViewCell *cell=[[UITableViewCell alloc]initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:@"UITableViewCell"];
}
General *general = [General sharedManager];
NSString *text=general.firstmess;//it crashes now here
NSString *remite=general.firstfrom;
[[cell textLabel]setText:remite];
[[cell detailTextLabel] setText:text];

return cell;
} 
```

和 General.h，应要求：

```
#import <Foundation/Foundation.h>

@interface General : NSObject {
NSString *user;
double lat;
double lon;
}

@property (nonatomic, retain) NSString *user;
@property (assign, nonatomic) double lat;
@property (assign, nonatomic) double lon;
@property (assign, nonatomic) Boolean car;
@property (assign, nonatomic) NSString *firstmess;
@property (assign, nonatomic) NSString *firstfrom;
@property (assign, nonatomic) int numcels;

+ (id)sharedManager;

@end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T10:43:14.523

它应该如下所示：

`return general.numcels;`

`numcels`是一个整数，您不能将`*`运算符应用于它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T11:35:03.067

解决第一个问题后（感谢 Ankit 的帮助），它在我在 EDIT 下方评论的行中崩溃了。我只是改变了

```
@property (nonatomc, assign) NSString *firstmess; 
```

到

```
@property (retain, nonatomic) NSString *firstmess; 
```

而且它不再崩溃了。

谢谢！

# c# - asp.net mvc 4 获取访问者数量

> ID：11031373
> 
> 赞同：0
> 
> 时间：2012-06-14T10:40:18.450
> 
> 标签：c#, asp.net, iis, asp.net-mvc-4

我正在寻找在我的 asp.net mvc 4 Web 应用程序上获取唯一访问者数量的最佳方法。

我在[这个链接中找到了这个方法](http://www.it-notebook.org/iis/article/log_parser_unique_visitors.htm)

有这个查询：

```
SELECT DISTINCT date, c-ip 
INTO tmp.txt 
FROM 'C:\LogFiles\web\ex*' 
```

但我找不到`C:\LogFiles\`目录。

这是我解决方案的好方法吗？如果有人知道更好的方法请指教

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T10:46:26.907

看看[http://www.google.com/analytics/](http://www.google.com/analytics/)，你会得到一个包含非常好的统计数据的仪表板。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T10:49:54.430

我的笔记本电脑上有一个默认安装/设置，它可能在 c:\inetpub\logs 下

# jquery - 具有相同提交功能的多个表单

> ID：11031375
> 
> 赞同：0
> 
> 时间：2012-06-14T10:40:30.367
> 
> 标签：jquery, forms, post

我的页面上有很多产品的多个表单，并希望对所有这些产品都使用此提交代码：

```
$('#myform').submit(function() { 
    var queryString = $(this).formSerialize(); 

alert(queryString);
$.ajax
            ({
                type: "POST",
                url: someurl,
                dataType: "jsonp",
                contentType:"charset=utf-8",
                data: queryString

             });
    return false; 
}); 
```

这适用于像 #myform 这样的 id，但它不适用于类。（仅适用于页面上的第一个表单）我宁愿不给每个表单一个唯一的 id。

即使我有所有表单的 ID，我也需要添加大量 jquery 代码以使其动态工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T10:43:12.197

利用

```
$('form').submit(function(){
// your code
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T10:49:06.190

选择元素而不是使用 ID 有很多替代方法，例如`eq()`：

```
$('form:eq(0)').submit(function(){ // it selects first form on the page
   ...
}); 
```

[http://api.jquery.com/category/selectors/](http://api.jquery.com/category/selectors/)

# entity-framework-4 - 实体框架：如何向我的实体添加字段以匹配存储过程结果

> ID：11031376
> 
> 赞同：0
> 
> 时间：2012-06-14T10:40:33.810
> 
> 标签：entity-framework-4

我的实体框架中有一个实体 (Org)，该实体具有一个外键，其中一个表位于另一个数据库 (BusinessUnit) 中。我们需要外键来获取与 Org 链接的 BusinessUnit 的描述。过去（没有实体框架的旧项目）我们使用存储过程来返回有关此实体的所有信息，包括业务单元描述，使用连接。所以现在我的问题是如何显示与使用实体框架之前相同的信息。

我试过，一旦我从数据库加载我的 Org 实体，循环访问 BusinessUnit 以获取每个 Org 的描述，但这太慢了。我的另一个想法是使用存储过程，但是我的实体上需要一个额外的字段，而 Entity Frameworks 给了我一个 3004 错误：没有为我的属性指定映射。我正在考虑使用复杂类型，但我不确定这是否是我需要记住的我必须向我的实体添加一个字段。在这种情况下，我是否可以将复杂类型仅用于“选择”操作并保留我的原始实体用于其余的 CRUD 操作？

我应该如何进行？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T08:02:24.660

EF 无法跨多个数据库执行查询。如果您需要执行此类查询，您必须使用数据库视图并将视图映射为新实体（它将是只读的 - 使其可更新需要映射插入、更新和删除存储过程）或将数据查询分为两个单独的部分以从两个数据库加载数据。分割查询可以使用两个上下文，也可以使用存储过程从第二个数据库中获取数据。

您收到错误的原因是您在 EDMX 中添加了该属性。EDMX 只能包含映射到您的第一个数据库的属性。EDMX 将实体代码生成为部分类 如果您需要从第二个数据库手动填充属性，则必须为实体创建部分部分（部分类）并在代码中添加属性。

# grails - 使用 netbeans 在 grails 中进行集成测试

> ID：11031385
> 
> 赞同：0
> 
> 时间：2012-06-14T10:41:10.373
> 
> 标签：grails, integration-testing

我正在使用 netbeans 作为开发 grails Web 应用程序的 ide，并且在集成测试中遇到问题。我在 netbeans 中为域类 ProgressData 创建了一个集成测试作为 ProgressDataIntegration，它生成了一个充满错误的代码

```
package main
import static org.junit.Assert.*
import org.junit.*

class ProgressDataIntegrationTests{

@Before
void setUp() {
    // Setup logic here
}

@After
void tearDown() {
    // Tear down logic here
}

@Test
void testSomething() {
    fail "Implement me"
}
} 
```

需要有关如何消除这些错误的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T12:59:50.380

每当您[创建一个 grails 域类](http://grails.org/doc/2.0.x/ref/Command%20Line/create-domain-class.html)时，还将为您创建一个包含您发布的代码的集成测试。默认情况下，测试失败，作为为您的新域类编写一些测试的提示，即该行：

```
fail "Implement me" 
```

如果您删除此行，您的测试将通过，但它也无法实际测试任何内容。

# c - 试图将字符串分成几部分

> ID：11031389
> 
> 赞同：1
> 
> 时间：2012-06-14T10:41:17.787
> 
> 标签：c

我有 2 个数组：

```
data[256] = "1@2@3@4@5"
question[256][256]; 
```

我需要将之前的数字拆分`@`成一个数组..例如：

```
question[0][] = 1
question[1][] = 2
question[2][] = 3
question[3][] = 4
question[4][] = 5 
```

我有没有进入`@`并不重要。

这就是我写的：

```
int i = 0, j = 0;
 data = "1@2@3@4@5";

 for (i = 0 ; i < strlen(data) ; i++)
 {
     for (j ; data[j] != '@' ; j++)
     {
         question[i][j] = data[j];
     }
     j++
 }

 printf ("%s\n", question); 
```

问题是，它一直工作到第一个`@`，然后停止。它只会`@`质疑第一个，然后停止。（基本上我应该得到相同的输出来打印数据和问题）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T10:52:13.273

有几个问题。

首先，`printf`只打印字符串直到第一个终止零字符（`'\0'`），这发生在第一个“部分”之后`question`（即使还有其他部分。相反，您需要打印全部：

```
for (i=0; i<255; ++i) {
  printf("%s\n", question[i]);
} 
```

`'\0'`确保对之前的行进行空终止 ( ) `question`，这样就不会为未初始化的行打印垃圾。或者只是维护最后一个好行的索引并迭代直到那个

此外，循环

```
for(j; data[j]!='@', j++) 
```

将在第一个停止`'@'`，并且外部循环的所有后续迭代都将评估相同`j`（这是 的索引`'@'`，因此在进一步的迭代中将跳过循环。您需要`j`在内部循环之后前进

您还需要`j`在 last 之后维护一个 last-position`'@'`以便能够`j`从 last计算位置`'@'`，以便您可以正确索引`question[i]`。设置`lastj`为`j`after 的值是上一段中建议的额外进步。另外，第二个索引`question`应该是`j-lastj`从现在开始。

关于内部循环的另一件事：事实上，它会`data`在 last 之后通过字符串`'@'`，因此您还必须检查 noll-termination。

另外，请确保您以空值终止 中的字符串`question`，否则`printf`会产生垃圾（并且在到达未分配给程序的内存时可能会出现段错误）。写吧

```
question[i][j-lastj] = '\0'; 
```

在内循环之后。（`j`将指向内部循环末尾的最后一个写入索引之后）

还有一件事：不要迭代`i`直到长度，`data`因为您不需要接触那么多元素（并且可能会`data`在内部循环中过度索引）。改用`while`循环，`i`只增加直到你覆盖`data`了`j`内部循环

*注意*：查找[`strtok`](http://www.cplusplus.com/reference/clibrary/cstring/strtok/)以使您更轻松地进行标记化

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T11:01:42.887

我会使用类似的东西`strchr`来获取下一个的位置`'@'`。

算法是这样的：你得到 next 的位置`'@'`，如果没有找到，则设置`next`到字符串的末尾。`beginning`然后从字符串的当前位置复制`next`到您想要的位置。记得终止复制的字符串！将`beginning`字符串的 设置为超过 1 `next`。重复直到`beginning`超出数据的末尾。

**编辑：**我的解决方案的代码：

```
char *beg = data;
char *end = data + strlen(data);  /* Points to one beyond the end of 'data' */

for (int i = 0; beg < end; i++)
{
    char *next = strchr(beg, '@');  /* Find next '@' */
    if (next == NULL)
        break;  /* No more '@' */

    memcpy(question[i], beg, next - beg);  /* Copy to array */
    question[i][next - beg] = '\0';  /* Remember to terminate string */

    beg = next + 1;  /* Point to next possible number */
} 
```

注意：未经测试。可能是与复制之一，可能必须是`next - beg - 1`。（即使经过 25 年的 C 编程，我似乎总是在第一次尝试时就弄错了...... :)）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T13:52:12.330

有一种更简单的方法可以做到这一点。用于`strtok`将字符串标记化`"@"`，然后用于`strcpy`将标记化的字符串复制到您的`question`数组中。例如（未测试）：

```
char *pcur = data;
int i = 0;

do
{
  if ((pcur = strtok(pcur, "@")) != NULL)
  {
    strcpy(question[i], pcur++);
    printf ("%s\r\n", question[i++]);
  }
}
while (pcur != NULL); 
```

如上例所示，递增`i`将`question`数组索引移动到下一个位置，递增`pcur`将标记化的字符串指针移过空标记，以通过循环进行下一次迭代。

也可以看看：

*   [http://msdn.microsoft.com/en-us/library/2c8d19sb.aspx](http://msdn.microsoft.com/en-us/library/2c8d19sb.aspx)
*   [http://msdn.microsoft.com/en-us/library/kk6xf663.aspx](http://msdn.microsoft.com/en-us/library/kk6xf663.aspx)

# clearcase - 为什么即使某个活动已过时也会触发依赖关系？

> ID：11031396
> 
> 赞同：2
> 
> 时间：2012-06-14T10:41:36.210
> 
> 标签：clearcase, clearcase-ucm

在 UCM 项目中，我们试图将活动传递到默认流。

它显示活动与另一个活动有依赖关系。

由于依赖活动没有有用的信息，我们将其废弃。但它仍然不允许我们继续，它迫使我们交付？

为什么即使活动已过时也会触发依赖关系？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T10:57:17.513

如果出现以下情况，该活动将与您的交付（无选择）相关联：

*   与其他活动有一个公共文件（文件依赖关系）
*   您之前已交付到*另一个*流（在这种情况下，它会自动将所有剩余活动链接在一起）

如果活动足够小，最好的做法仍然是交付所有内容，并取消不需要的内容。

如果*确实没有公用文件，那么在这个*[2003 年的旧线程](http://www.ibm.com/developerworks/forums/thread.jspa?threadID=46267#2930236)中提到的一个选项是尝试**更改活动的所有者**（仅由 ClearCase 管理员）。
请参阅[cleartool 项目](http://publib.boulder.ibm.com/infocenter/cchelp/v7r0m0/index.jsp?topic=/com.ibm.rational.clearcase.cc_ref.doc/topics/ct_protect.htm)：

```
cleartool protect -chown aNewOwner activity:anActivity@\aPvob 
```

`cleartool unlock activity:anActivity@\aPvob`（如果是“ ” ，您可能必须先“ `lock -obsolete`”）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T10:05:39.233

@Samselvaprabu 我以前见过这种情况，这有超链接的味道。不能 100% 确定您的问题是否完全相同，但它们过去曾为我工作过：

1.  *   checkvob -ucm activity:@\PVOB 这可能会指向错误的超链接

    *   checkvob - 修复

2.  使用 ucmutil 做类似的工作

请小心，总是存在与超链接混淆的风险，因此在实际运行 checkvob -fix 或其他侵入性内容之前，请阅读手册和/或技术说明。

# oracle - 不带 dbms_fga 的导出

> ID：11031398
> 
> 赞同：1
> 
> 时间：2012-06-14T10:41:38.303
> 
> 标签：oracle, oracle9i

我使用 DBMS_FGA.ADD_POLICY，例如我有一些表的策略。现在我必须使用 oracle 的 exp/imp 将这些表中的数据导出到另一个数据库。在传输过程中，数据策略也会被传输。如何在不传输策略的情况下传输数据？我使用甲骨文 9.2

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T06:32:29.250

您应该授予执行 expot 系统权限豁免访问策略的用户，该策略应该可以解决问题

# join - python join方法的输入不能是数字列表？

> ID：11031399
> 
> 赞同：0
> 
> 时间：2012-06-14T10:41:39.440
> 
> 标签：join

这给了我一个错误：

```
 a = [1,2,3]
   '\t'.join(a) 
```

这是因为列表元素是整数吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T10:47:24.230

确实。Python 需要显式类型转换，因为它是强类型的。

```
>>> a = [1,2,3]
>>> '\t'.join(map(str, a))
'1\t2\t3' 
```

函数[映射](http://docs.python.org/library/functions.html#map)应用于`function`（作为第一个参数传递）到`iterable`（作为第二个参数传递）。

在这种情况下，它将 ( [str](http://docs.python.org/library/functions.html#str) ) 的每个元素`a`转换为字符串并返回结果列表，然后将其传递给`join`object的方法`'\t'`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T10:46:48.950

见[http://docs.python.org/library/stdtypes.html#str.join](http://docs.python.org/library/stdtypes.html#str.join)

返回一个字符串，它是**可迭代迭代中字符串的串联。**元素之间的分隔符是提供此方法的字符串。

所以目标应该是字符串数组。

# xml - 使用未知大小数组中的项目作为选项在powershell中创建菜单

> ID：11031403
> 
> 赞同：2
> 
> 时间：2012-06-14T10:41:56.193
> 
> 标签：xml, arrays, powershell, menu

我正在寻找在 powershell 中创建一个命令行菜单，其中的选项来自一个未知大小的数组。

我以前一直在使用 switch 语句，但当时我知道会有多少选项。现在，选项是从一个 XML 文件中解析出来的，并且一直在变化，所以旧的方法行不通了。

这是旧方法：

```
switch ($a) 
{ 
    1 {
       Write-Host $USR_ID  "on SERVER "$SERVER_NAME"`n"
       $query = $USR_ID
      } 
    2 {
       Write-Host $PRFL_NM  "on SERVER "$SERVER_NAME"`n"
       $query = $PRFL_NM
      } 
    3 {
        Write-Host $APP_NM  "on SERVER "$SERVER_NAME"`n"
        $query = $APP_NM
      }
    4{
        Write-Host $COMBO "on SERVER " $SERVER_NAME"`n"
        $query = $COMBO
        confirm
     }
    default {
      "** Invalid Input **";
      exit
      }
} 
```

有人有什么想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T10:45:32.727

创建一个数组，其中包含您需要的相应信息并索引到数组中的对象，而不是使用`switch`.

我不知道您的 XML 是什么样子以及您的各种变量是什么，因此很难给出更准确的答案。

# vim - Vim 乱码

> ID：11031404
> 
> 赞同：4
> 
> 时间：2012-06-14T10:41:56.567
> 
> 标签：vim, ssh, vi

我在使用 Vim 时遇到了问题（我之前遇到过很多次，现在我终于必须发布它了）。我不相信它只是一个 vim 的东西，但也许是在 ssh 上运行它的组合。这是一个显示我的问题的视频：

[http://screencast.com/t/gGoOuJ7wcLA5](http://screencast.com/t/gGoOuJ7wcLA5)

我不知道如何解释它，所以我拍了视频。如果你不知道，在视频中我所做的就是用 vim 的 j 和 k 键上下移动光标。出于某种原因，当我的光标在 { 符号上时，vim 添加了其他 { 符号。Vim 会混淆我编写的许多其他代码，但我希望这个示例足够好。顺便说一句，vim 实际上并没有改变这一点。如果我退出 vim 并重新打开文本，则写入的字符不存在。它与我的 $TERM 有什么关系吗？我有 xterm-256color。我最初也尝试过 xterm 。

我在 Mac OSX Lion 10.7 上的 iTerm 中运行它，通过 ssh 访问具有 Debian 操作系统的机器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T18:18:36.767

问题是我正在访问的 Debian 操作系统中的 $TERM 与 iTerm 的 $TERM 不同。一旦我使它们相同（在我的情况下为 xterm-256color），我遇到的奇怪问题就消失了。

如果有人不知道如何更改它，我在我的 Debian/Ubuntu 机器上运行了以下命令：

```
导出 TERM=xterm-256color

```

对于 Mac 上的 iTerm，我转到首选项 -> 配置文件 -> 终端 -> 报告终端类型 -> 选择 xterm-256color 或 xterm。

由于在开始登录 ubuntu 时会检查 TERM，因此您可能希望将 export 命令包含到 bashrc（或另一个终端 shell 的等效文件）中。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-06-14T11:15:54.690

是否`:redraw!`删除垃圾字符？

如果是这样，我会尝试通过尝试下载 matchparen.vim 插件的源代码（在 google 上很容易找到）来解决您的问题，添加`redraw!`到它，就在关键位之后，其中显示“设置匹配突出显示”并尝试加载它并使用它而不是原始的。

# java - 禁止所有使用 JDBC 的删除/更新/插入？

> ID：11031407
> 
> 赞同：1
> 
> 时间：2012-06-14T10:42:07.337
> 
> 标签：java, jdbc

在我的一个应用程序中，我为用户提供了针对数据库发出直接 SQL 查询的能力。他们将 SQL 文本输入到文本框中，然后我完全按照使用 JDBC 的方式运行它。

显然我非常信任这些用户。但我想以编程方式将它们限制为仅发出 SELECT 语句。他们不应该删除/更新/插入。我想也许 JDBC 本身可以帮助我。我在 java.sql.Statement 类中找到了 executeQuery() 方法。但是该方法允许我调用 DELETE（也可能是 UPDATE 和 INSERT）。它确实抛出了一个异常，因为没有返回 ResultSet，但只有在删除记录之后才会返回。

所以，我在这里问，在 JDBC 中是否有任何方法可以确保 SQL 语句仅在它是查询时才被执行？还是我必须自己解析声明并确保它符合我的意愿？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T10:45:36.470

我建议您使用缺少 DELETE / UPDATE 和 INSERT 权限的用户连接到 DBMS。

# javascript - JavaScript 文本字段验证：发回焦点

> ID：11031408
> 
> 赞同：0
> 
> 时间：2012-06-14T10:42:14.737
> 
> 标签：javascript, jquery, events

我正在使用 JQuery 和 JavaScript 作为时间值的输入表单，我无法让 JavaScript 对不正确的输入格式提供预期的反应。

我做错了什么...？

我有一组 3 个带有“azeit”类的文本输入（以及在这些“projekt”类中的其他一些）。全部用于输入时间值。一旦用户退出该字段，我将验证格式，对其进行计算并将结果显示在 ID 为“summe1”的字段中。这行得通。如果格式不正确，我会显示一个警报，我*想做*的是在清空字段后将焦点返回到该字段。但是，焦点永远不会返回（尽管它会被清空）。就是这个：

```
var kalkuliere_azeit = function(e) {

  var anf = $("#anfang");
  var ende = $("#ende");
  var pause = $("#pause");
  var dauer_in_min = 0;
  var ungueltiges = null;

  if (nonempty(anf.val(), ende.val()), pause.val()))
  {
    if (!is_valid_date(make_date(anf.val()))){
      ungueltiges = anf;
    };
    if (!is_valid_date(make_date(ende.val()))){
      ungueltiges = ende;
    };
    if (!is_valid_date(make_date(pause.val()))){
      ungueltiges = pause;
    };
    if (ungueltiges)
    {
      alert("invalid time"); //This is where I am stuck
      ungueltiges.val("");
      ungueltiges.focus();
    }
    else {
      dauer_in_min = hourstring_to_min(ende.val())
      - hourstring_to_min(anf.val())
      - hourstring_to_min(pause.val());
      $("#summe1").text(min_to_hhmm(dauer_in_min));
    };
  };

};
....

$(document).ready(function() {
  $(".projekt").change( kalkuliere_summe);
  $(".azeit").focusout(kalkuliere_azeit);
}); 
```

具有类“projekt”的字段低于具有类“azeit”的字段，因此当用户离开类“azeit”的第三个字段时，它们将获得焦点。

对于提供不完整的源代码，我深表歉意。我希望有人能*看到*什么是错的。

我想提到的一点是，我尝试将处理程序绑定到 onblur 和 onfocus。当我将它绑定到 onfocus 时，焦点确实会重置到该字段，但用户输入的最后一个字段不会正确更新字段 $("#summe1") （因为这需要关注同一类的另一个字段）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T10:51:30.897

我不确定你的代码有什么问题，但一种方法是将焦点放在一个函数上。

所以 ...

```
function focusIt()
{
  var mytext = document.getElementById("divId");
  mytext.val("");
  mytext.focus();
} 
```

并从 if/else 语句中调用它...

```
if (ungueltiges)
{
alert("invalid time");
focusIt()      

} 
```

# oracle - 小数（s，p）还是数字（s，p）？

> ID：11031409
> 
> 赞同：19
> 
> 时间：2012-06-14T10:42:24.120
> 
> 标签：oracle, db2, ansi, type-conversion

最近，在进行 db2 -> oracle 迁移项目时，我们遇到了这种情况。开发人员无意中使用十进制（s，p）列创建了新的表结构。我不记得 Oracle 支持这一点，但后来一些挖掘表明它是一个 ANSI 数据类型，因此被 oracle 支持。

然而，对我来说，问题仍然存在——

1.  这些数据是如何在内部处理的？
2.  使用 ANSI 类型而不是 Oracle 的内置类型有成本吗？
3.  如果目标类型是Oracle内置类型，在数据迁移过程中会不会有影响？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-14T11:00:54.130

在 Oracle 中，[它们是相同的](https://docs.oracle.com/database/121/SQLRF/sql_elements001.htm#SQLRF00213)：

> 创建表和集群的 SQL 语句也可以使用来自 IBM 产品 SQL/DS 和 DB2 的 ANSI 数据类型和数据类型。Oracle 识别不同于 Oracle 数据库数据类型名称的 ANSI 或 IBM 数据类型名称。它将数据类型转换为等效的 Oracle 数据类型，将 Oracle 数据类型记录为列数据类型的名称，并根据下表所示的转换将列数据存储在 Oracle 数据类型中。

此引用下方的表格显示在`DECIMAL(p,s)`内部被视为`NUMBER(p,s)`：

```
SQL> create table t (a decimal(*,5), b number (*, 5));

Table created

SQL> desc t;
Name Type        Nullable Default Comments 
---- ----------- -------- ------- -------- 
A    NUMBER(*,5) Y                         
B    NUMBER(*,5) Y 
```

但是，对于 ，比例默认为 0 `DECIMAL`，这意味着将`DECIMAL(*)`其视为`NUMBER(*, 0)`，即`INTEGER`：

```
SQL> create table t (a decimal, b number, c decimal (5), d decimal (5));

Table created

SQL> desc t;
Name Type      Nullable Default Comments 
---- --------- -------- ------- -------- 
A    INTEGER   Y                         
B    NUMBER    Y                         
C    NUMBER(5) Y                         
D    NUMBER(5) Y 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-12-19T03:31:09.587

实际上，十进制和数字之间是有区别的。十进制将截断超出比例的值，数字将舍入该值。

# java - Java GregorianCalendar 时区

> ID：11031413
> 
> 赞同：6
> 
> 时间：2012-06-14T10:42:41.967
> 
> 标签：java, timezone, gregorian-calendar

我对 Java 公历有一个奇怪的问题：

```
SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss:S Z");
sdf.setTimeZone(TimeZone.getTimeZone("US/Pacific"));

GregorianCalendar cal1 = new GregorianCalendar(TimeZone.getTimeZone("US/Pacific"));
cal1.setTimeInMillis(1320566400000L);

GregorianCalendar cal2 = new GregorianCalendar(TimeZone.getTimeZone("US/Pacific"));
cal2.setTimeInMillis(1320570000000L);

System.out.println(sdf.format(cal1.getTime()));
System.out.println(sdf.format(cal2.getTime())); 
```

我在默认时区 = 美国太平洋的机器上执行了上面给定的代码，但机器在德国运行。

结果如下：

```
2011-11-06 01:00:00:0 -0700
2011-11-06 01:00:00:0 -0800 
```

我真的不明白，为什么结果中有不同的时区......我还在另一台机器上测试了代码（默认时区 = GMT），它工作正常。

有人知道，为什么会出现这个问题？

最好的，迈克尔

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-14T10:51:32.510

将这些行添加到您的程序中：

```
for (int i=0; i<24; i++) {
    cal1.add(Calendar.MINUTE, i*5);
    System.out.println(" : " + sdf.format(cal1.getTime()));
} 
```

你会看到：

```
 : 2011-11-06 01:00:00:0 -0700
 : 2011-11-06 01:05:00:0 -0700
 : 2011-11-06 01:15:00:0 -0700
 : 2011-11-06 01:30:00:0 -0700
 : 2011-11-06 01:50:00:0 -0700
 : 2011-11-06 01:15:00:0 -0800
 : 2011-11-06 01:45:00:0 -0800
 : 2011-11-06 02:20:00:0 -0800
 : 2011-11-06 03:00:00:0 -0800 
```

因此，您似乎正在将夏令时更改为冬令时。我的时区是 CET (UTC+01:00)，所以我不知道为什么它在你的第二台机器上工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-14T12:44:17.120

2011 年 11 月 6 日是美国夏令时结束的时间。因此，您所看到的是时钟在 11 月 6 日凌晨 2 点响起，然后它回滚到凌晨 1 点，回落到标准时间一个小时。因此，我相信太平洋时间的偏移量也会从 GMT 的 -7 变为 -8。因此，从我所看到的情况来看，它工作正常。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-14T10:46:08.660

我建议您[在 Joda-Time 中使用公历年表](http://joda-time.sourceforge.net/cal_gregorian.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-14T12:48:05.963

请在您的控制面板中检查您尚未激活夏令时。这个bug可能是因为这个

# html - 使用css背景将图像水平对齐到下拉菜单

> ID：11031417
> 
> 赞同：0
> 
> 时间：2012-06-14T10:42:57.927
> 
> 标签：html, css, background, background-image

我有一个容器，它是页面上的弹出窗口，它有很多控件，其中一个是下拉列表，现在我想动态加载这个下拉列表，为此我需要在加载时在下拉列表旁边添加一个图标.

我怎样才能使用css专门使用背景属性来实现相同的目标。这是最好的解决方案吗？

此外，一旦加载下拉内容并且图像消失，我还需要更新下拉宽度。

我正在努力在下拉列表旁边的页面上获取图像..

这是我创建的小提琴：http: [//jsfiddle.net/jxWCu/1](http://jsfiddle.net/jxWCu/1)

现在我想让图像与下拉菜单水平对齐..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T11:00:08.823

CSS 伪元素也可以在这里提供一个简洁的解决方案：[ [http://jsfiddle.net/jxWCu/14/](http://jsfiddle.net/jxWCu/14/) ]

**HTML：**

```
<div class="loading">
    <select> 
        <option>Loading</option>
    </select>
</div>​ 
```

**CSS：**

```
.loading select { width: 260px; } /* Width of your dropdown */
.loading:after {
    content: url(http://ajaxload.info/cache/FF/FF/FF/00/00/00/1-0.gif);
    vertical-align: middle;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T10:49:10.447

选择框和加载图像需要是单独的实体。另外，我不建议使用 320x320 的 gif。[http://jsfiddle.net/jxWCu/11/](http://jsfiddle.net/jxWCu/11/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T10:50:20.030

您可以将加载样式应用于容器 div [http://jsfiddle.net/jxWCu/7/](http://jsfiddle.net/jxWCu/7/)

# java - 这是跳过java序列化的apt java关键字

> ID：11031420
> 
> 赞同：3
> 
> 时间：2012-06-14T10:43:15.740
> 
> 标签：java

在学习java序列化概念的过程中，我一度感到困惑。在java序列化过程中，我们使用2个关键字来防止序列化，即transient和static。如果我不想保存实例变量，我应该使用哪个关键字，两者的作用完全相同。

```
Class A implements Serializable{
  private static int x;
  private transient int y;
  private transient static int x;
} 
```

在上面的代码中，所有三个实例变量都没有保存在序列化过程中。建议使用哪个关键字来防止序列化。为什么两个关键字具有几乎相同的功能。防止序列化的推荐声明方式是什么。如果我错了，请纠正我，我还在学习。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-14T10:45:16.080

关键字将`static`实例变量转换为静态变量。副作用是该字段不再序列化......因为它不再是一个字段。

静态变量是类的变量。实例变量是对象的变量，或类的实例。你不能盲目地从一个转到另一个。

阅读有关实例和静态变量的[教程页面。](http://docs.oracle.com/javase/tutorial/java/javaOO/classvars.html)

当然，`transient`关键字是要使用的正确关键字。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-14T10:44:19.347

你很困惑：`static`字段*不是实例变量*，它们是类范围的变量。通过声明一个 field `static`，这个类的所有实例共享*同一个*字段——它不再是任何特定对象的一部分，这导致它不被序列化。

为了专门防止序列化仅`transient`适用...

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-14T10:47:06.553

瞬态（在 JAXB XmlTransient 中）表示数据是短暂的而不是永久重要的，因此在涉及持久性问题时应该忽略。

静态意味着该值适用于类级别，因此对多个实例进行序列化/反序列化将是不安全的，因为值会发生冲突。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-14T10:58:10.493

好吧，让我再次定义序列化。

```
A serialization is a process in which we persist state of an object. 
```

那么，任何静态变量都是对象状态的一部分吗？..绝对不是。它是一个类的所有对象之间共享的数据。很明显，任何静态变量都不应该与对象的状态一起序列化。

假设，我们被允许持久化一个对象的状态。稍后，如果此变量被其他对象/类本身更改，并且如果我们尝试反序列化该对象，那么该静态变量将保持什么值。会有冲突。

因此，如果您想防止任何**实例变量**被序列化，请使用瞬态。当您反序列化对象时，它将使用默认值初始化。

# java - HibernateSystemException：找到同一个集合的两个表示

> ID：11031430
> 
> 赞同：0
> 
> 时间：2012-06-14T10:44:02.047
> 
> 标签：java, hibernate, mapping

我有一个奇怪的例外。我的映射：

```
public class ConcreteProduct {

...

 @OneToMany(mappedBy = "concreteProduct")
    public Set<ExternalClient> getExternalClients() {
        return externalClients;
    }
....

}

public class ExternalClient {
 ...
@ManyToOne
    @JoinColumn(name = "id_concrete_product")
    public ConcreteProduct getConcreteProduct() {
        return concreteProduct;
    }
..
} 
```

我想使用 Hibernate 操作对 ConcreteProduct 进行简单的操作。我使用 crudDAO：

```
 ConcreteProduct concreteProduct = (ConcreteProduct) crudDAO.getById( ConcreteProduct.class, list.get( 0 )
                .getId() );
            if ( concreteProduct != null ) {
                finishCalculation( concreteProduct );
                crudDAO.save( concreteProduct );
            } 
```

还有一个例外：

> 线程“Thread-33”中的异常 org.springframework.orm.hibernate3.HibernateSystemException：找到同一个集合的两个表示：pl.eo.apps.mops.product.bo.ConcreteProduct.externalClients；嵌套异常是 org.hibernate.HibernateException：找到同一个集合的两个表示：pl.eo.apps.mops.product.bo.ConcreteProduct.externalClients 原因：org.hibernate.HibernateException：找到同一个集合的两个表示：pl.eo .apps.mops.product.bo.ConcreteProduct.externalClients

也许重要的是整个操作都在一个线程中处理。是什么导致了这里的问题？

# mysql - 是否有类似于 WAMP 的 mySQL 服务器 + JSP 服务器包？

> ID：11031432
> 
> 赞同：1
> 
> 时间：2012-06-14T10:44:19.063
> 
> 标签：mysql, jsp, vps

是否有同时支持 JSP 和 MySQL 的服务器包？

我喜欢 WAMP 的打包方式，以便 PHP 和 MySQL 在一个包中，是否有一个包含 JSP 而不是 PHP 的包？如果不是，您会推荐哪些 VPS 主机用于 JSP 和 MySQL 开发？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-31T18:34:33.270

XAMPP [https://www.apachefriends.org/index.html](https://www.apachefriends.org/index.html) - 有 PHP、MySQL、Perl 的服务器，虽然没有在主页上宣传一个 tomcat 服务器以及运行 JSP

# amazon-web-services - Cloudwatch 中“Avg Replica Lag”指标的机制是什么？

> ID：11031436
> 
> 赞同：2
> 
> 时间：2012-06-14T10:44:47.703
> 
> 标签：amazon-web-services, amazon-cloudwatch

对于 Amazon RDS，Cloudwatch 中有一个名为“Avg Replica Lag”的指标。意思很清楚。它代表主从之间的平均复制延迟。

但是，我不确定这个指标的机制，即 Amazon RDS 如何检测到这种滞后？以 MySQL 数据库为例，Amazon RDS 是否有一些特定的方法来检测延迟？或者它只是使用 MySQL 报告的“落后于 master”的结果？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T17:47:13.970

Cloudwatch 的 Replica Lag 是当您对所有从站执行“SHOW SLAVE STATUS”查询时“Seconds Behind Master”返回的结果的平均值。

# iphone - 在 iPhone 中将两张图片合并为一张图片

> ID：11031440
> 
> 赞同：2
> 
> 时间：2012-06-14T10:45:27.000
> 
> 标签：iphone, objective-c, uiimageview, uiimage

我需要将两张图片合并为一张图片，这是我的代码：

```
-(UIImage*)mergeImage:(UIImage*)mask overImage:(UIImage*)source inSize:(CGSize)size
{
    //Capture image context ref

    UIImageView *totalimage=[[UIImageView alloc] initWithFrame:CGRectMake(0, 0, 200, 200)];

    UIImageView *firstImage=[[UIImageView alloc] initWithImage:mask];
    UIImageView *secondImage=[[UIImageView alloc] initWithImage:source];

    [totalimage addSubview:firstImage];
    [totalimage addSubview:secondImage];

    UIGraphicsBeginImageContext(totalimage.bounds.size);
    [totalimage.layer renderInContext:UIGraphicsGetCurrentContext()];
    UIImage *viewImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();

    //Draw images onto the context
    [source drawInRect:CGRectMake(0, 0, source.size.width, source.size.height)]; 
    [mask drawInRect:CGRectMake(0, 0, mask.size.width, mask.size.height)]; 

    return viewImage;

} 
```

我称这个方法如下：

```
UIImage *totalImage = [self mergeImage:self.Apicimage overImage:questionImage inSize:CGSizeMake(100, 100)]; 
```

但在执行时我得到这个输出：

```
Jun 15 16:11:06 iPad-2 VueGuides[9195] <Error>: CGContextSaveGState: invalid context 0x0
Jun 15 16:11:06 iPad-2 VueGuides[9195] <Error>: CGContextSetBlendMode: invalid context 0x0
Jun 15 16:11:06 iPad-2 VueGuides[9195] <Error>: CGContextSetAlpha: invalid context 0x0
Jun 15 16:11:06 iPad-2 VueGuides[9195] <Error>: CGContextTranslateCTM: invalid context 0x0
Jun 15 16:11:06 iPad-2 VueGuides[9195] <Error>: CGContextScaleCTM: invalid context 0x0
Jun 15 16:11:06 iPad-2 VueGuides[9195] <Error>: CGContextConcatCTM: invalid context 0x0
Jun 15 16:11:06 iPad-2 VueGuides[9195] <Error>: CGContextDrawImage: invalid context 0x0
Jun 15 16:11:06 iPad-2 VueGuides[9195] <Error>: CGContextRestoreGState: invalid context 0x0
Jun 15 16:11:06 iPad-2 VueGuides[9195] <Error>: CGContextSaveGState: invalid context 0x0
Jun 15 16:11:06 iPad-2 VueGuides[9195] <Error>: CGContextSetBlendMode: invalid context 0x0
Jun 15 16:11:06 iPad-2 VueGuides[9195] <Error>: CGContextSetAlpha: invalid context 0x0
Jun 15 16:11:06 iPad-2 VueGuides[9195] <Error>: CGContextTranslateCTM: invalid context 0x0
Jun 15 16:11:06 iPad-2 VueGuides[9195] <Error>: CGContextScaleCTM: invalid context 0x0
Jun 15 16:11:06 iPad-2 VueGuides[9195] <Error>: CGContextConcatCTM: invalid context 0x0
Jun 15 16:11:06 iPad-2 VueGuides[9195] <Error>: CGContextDrawImage: invalid context 0x0
Jun 15 16:11:06 iPad-2 VueGuides[9195] <Error>: CGContextRestoreGState: invalid context 0x0 
```

谁能指导我。如何合并两个图像？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T10:56:41.220

你的代码

```
[source drawInRect:CGRectMake(0, 0, source.size.width, source.size.height)]; 
    [mask drawInRect:CGRectMake(0, 0, mask.size.width, mask.size.height)]; 
```

应该写在前面

```
UIImage *viewImage = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext(); 
```

# javascript - 可以上传表单提交等待文件处理完成吗？

> ID：11031445
> 
> 赞同：0
> 
> 时间：2012-06-14T10:45:47.303
> 
> 标签：javascript, jquery, python, forms, web2py

可以上传表单提交等待文件处理完成吗？

我正在使用 web2py 及其 sqlform 上传视频，同时将视频转换为 flv 。使用此代码的两个进度条显示上传和编码的进度（http://www.web2pyslices.com/slice /show/1337/upload-progress-in-web2py)。一旦检测到视频上传，编码就会在后端开始。编码和转换都完成后，用户可以播放转换后的视频。

问题是上传完成但编码未完成时接受的表单。我尝试了 event.preventDefault() 但进度条不显示。上传完成时似乎无法停止默认提交。如何防止提交并等待转换过程完成然后提交？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T14:09:33.257

您可以在不进行数据库插入的情况下验证表单（请参阅[此处](http://web2py.com/books/default/chapter/29/7#SQLFORM-without-database-IO)）。然后验证后，运行一个循环不断检查编码是否完成，编码完成后进行数据库插入和返回。

```
def video_upload():
    upload_form = SQLFORM(db.encodeupload)
    if upload_form.validate():
        session._unlock(response)
        [while loop checking to see if file encoding is complete]
        db.encodeupload.insert(**db.encodeupload._filter_fields(form.vars))
    [rest of code] 
```

在 while 循环中，您还可以检查编码过程中的错误并在这种情况下中止插入（并返回错误消息）。

请注意，`session._unlock(response)`在进入循环之前解锁会话文件——这是必要的，因此锁定的会话文件不会阻止页面为更新编码进度条而发出的 Ajax 请求。在 Ajax 请求调用的控制器操作中，您还应该添加`session.forget(response)`该操作不会锁定或写入会话。

# visual-studio - 如何在没有 UI（即来自 PsExec）的情况下临时（不作为服务）运行 Visual Studio 2010 远程调试器（msvsmon.exe）？

> ID：11031449
> 
> 赞同：0
> 
> 时间：2012-06-14T10:45:57.657
> 
> 标签：visual-studio, remote-debugging

有没有办法在没有 UI（即来自 PsExec）的情况下临时（而不是作为服务）运行 Visual Studio 2010 远程调试器（msvsmon.exe）？

我希望能够在不通过远程桌面登录服务器的情况下运行 msvsmon。将 msvsmon 作为服务运行也太冒险了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T17:47:58.590

msvsmon.exe 可以从命令行运行并使用命令行参数进行设置。您可以使用 /? 获取这些列表。

所以答案是肯定的。PsExec 只会远程执行命令。您必须将远程调试器安装/xcopy 到远程计算机，然后使用 PsExec 以及合适的 msvsmon.exe 命令行来启动它。

# c# - 显示来自 subfrom 的主要隐藏表单

> ID：11031451
> 
> 赞同：-1
> 
> 时间：2012-06-14T10:46:00.420
> 
> 标签：c#, winforms

我有 2 个表单 Form1 主表单 Form2 子表单 当我打开 form2 时，我想隐藏 form1 <- 主表单 当我关闭 form2 时，我想显示 form1

我试过了

```
Form1 mform = new Form1();
mform.Show(); 
```

但它的开放新形式不是隐藏形式

找到解决方案

在表格 2 中

```
Form Main;
public Form2(Form MainForm)
{
    Main = MainForm;
    InitializeComponent();
} 
```

在表格 1

```
Form2 SubForm = new Form2(this);
SubForm.Show();
this.Hide(); 
```

所以我可以通过 Main.Show(); 从 form2 中显示隐藏的 form1；

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T10:52:21.903

没有必要保留参考。在子窗体中使用以下代码

```
if (this.ParentForm != null)
this.ParentForm.Show(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T10:47:37.983

您必须在 Form2 中保留对 Main 表单的引用，而不是创建新的 From。

在您的 Form2 中，您应该有一个属性来保持对 Form1 的引用，例如：

```
public Form MainForm { get; set; } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T10:47:39.300

只需将主窗体的引用传递给 Form1 并保留它以供以后访问。

```
Form1 mform = new Form1(MainForm mform);
mform.Show(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-14T10:49:51.103

当您打开一个新的子表单 FORM2 时，您只需使用 隐藏主表单`form1.Hide()`并显示新的`Form2.Show()`。

当您关闭子窗体时，您只需调用`form1.Show()`.

要实现这一点，你必须参考主要形式。

# jquery - 自定义事件上的委托 jquery

> ID：11031453
> 
> 赞同：2
> 
> 时间：2012-06-14T10:46:03.527
> 
> 标签：jquery, ajax, tipsy

**这是我的自定义事件委托**

```
 $(".main_cont").delegate(".live-tipsy-3", "tipsy", function(){
    $('.live-tipsy-3').tipsy(
     {
         delayIn: 100,      // delay before showing tooltip (ms)
         delayOut: 300,     // delay before hiding tooltip (ms)
         fade: true,     // fade tooltips in/out?
         gravity: 'w',    // gravity
         html: true,     // is tooltip content HTML?
         offset: 10,       // pixel offset of tooltip from element
         opacity: 0.8,    // opacity of tooltip
         title: 'title',  // attribute/callback containing tooltip text
        trigger: 'hover' // how tooltip is triggered - hover | focus | manual
     });    
 }); 
```

我可以在不调用的情况下运行此活动吗`this`

```
 $(".live-tipsy-3").trigger("tipsy"); 
```

*   我需要它，因为在 ajax 请求后，此自定义事件不起作用
*   有任何想法吗

# ffmpeg - ffmpeg 异步使用

> ID：11031462
> 
> 赞同：1
> 
> 时间：2012-06-14T10:46:22.273
> 
> 标签：ffmpeg

如何在 ffmpeg（或 avconv）中使用新的异步？哪个是正确的语法？

> ffmpeg -i 1.mp4 -i 2.wav -vcodec 复制 -strict 实验性 -acodec libmp3lame -ab 128k -f flv -map 0:0 -map 1:0 -filter_complex "asyncts=max_comp" 3.mp4

生成：

> [asyncts filter @ 0x2a58640] key 'max_comp' 后缺少 key 或找不到 key/value 分隔符 [asyncts @ 0x2952380] 解析选项字符串'max_comp'时出错。使用参数“max_comp”初始化过滤器“asyncts”时出错

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T23:24:12.377

从[docs](http://ffmpeg.org/ffmpeg.html#asyncts)看来，它`max_comp`需要一个参数：

> 'max_comp'<br> 每秒样本的最大补偿。

因此，您应该像设置任何其他过滤器参数一样设置它：

```
ffmpeg -i 1.mp4 -i 2.wav ... -filter_complex "asyncts=max_comp=44100" 3.mp4 
```

^(（当然我不知道你的情况实际上是一个合适的值。）)

# android - ListView 中行的选定项

> ID：11031463
> 
> 赞同：0
> 
> 时间：2012-06-14T10:46:25.817
> 
> 标签：android, android-layout, android-listview

嗨，我`Listview`在我的应用程序中使用了一个，我为它的每一行的布局创建了单独的 xml `ListView`。每行包含两个`ImageView`和一个 One `TextView`。我想获得`ImageView`在该行上单击的那个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T10:50:13.493

您可以`OnClickListener`在`Adapter`类本身中进行设置，`getView()`并让 Click Listener 为这两个图像工作。因为，您还没有发布任何无法猜测的代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T11:01:30.227

将每个 imageView 的标签放在适配器的 getView 函数中......

```
imageView.setTag(Postion); 
```

并在 onclick 中看到您收到的视图......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T11:14:05.977

```
convertView.setOnClickListener(new View.OnClickListener() {
                @Override
                public void onClick(View v) {
                        system.out.println("position"+position)
                             }}); 
```

# sql-server - hibernate - 在 FK 上允许空值

> ID：11031465
> 
> 赞同：0
> 
> 时间：2012-06-14T10:46:27.873
> 
> 标签：sql-server, hibernate, jsf

我有两个由 FK 关联的表。

表**学生**的映射如下：

```
@Entity
@Table(name="student")
public class Student implements Serializable {
  ...
  @Id
  @GeneratedValue
  private int id; 

  @ManyToOne(fetch = FetchType.LAZY, optional = true) 
  @JoinColumn(name = "school_ID", nullable = true, insertable = false, updatable = false)
  private School school;

  private Integer school_ID; 

  @Transient
  private boolean editable = false;
} 
```

表**学校**：

```
@Entity
@Table(name="school")
public class School implements Serializable {
  ...
  @OneToMany(fetch = FetchType.LAZY, mappedBy = "school")
  private Set<Student> student = new HashSet<Student>(0); 
```

当我尝试插入/更新不在任何学校（`student.school_ID is null`）的学生时，它会报告：

```
Exception: java.lang.Exception: org.hibernate.exception.ConstraintViolationException:
could not update: [tables.Student#556758]
...
Caused by: com.microsoft.sqlserver.jdbc.SQLServerException: The UPDATE statement
conflicted with the FOREIGN KEY constraint "FK__student__school_ID__57378E7F". The 
conflict occurred in database "DB", table "dbo.school", column 'id'. 
```

我是否有可能`null`在 FK 上也插入值？

我应该定义它：

*   实体级别或
*   数据库级别？

**更新：**

我已经更改了`private School school = new School()`，但是当我尝试插入/更新行时，它仍然报告：

```
SEVERE: Servlet.service() for servlet [Faces Servlet] in context with path [/DB] threw exception [javax.el.PropertyNotFoundException: /view.xhtml @183,102 value="#{item.school.id}": Target Unreachable, 'school' returned null] with root cause
javax.el.PropertyNotFoundException: /view.xhtml @183,102 value="#{item.school.id}": Target Unreachable, 'school' returned null 
```

**视图.xhtml：**

```
<rich:column>
  <h:outputText value="#{item.school != null ? item.school.name : null}" rendered="#{!item.editable}"/>
  <h:selectOneMenu id="som" tabindex="1" value="#{item.school.id}"  rendered="#{item.editable}">
    <f:selectItems value="#{myDials.schoolList}"/> 
  </h:selectOneMenu>
</rich:column>
<rich:column> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T11:03:35.860

您在同一`school_id`列上映射了两个不同的字段：

```
private School school;
private Integer school_ID; 
```

删除 school_ID 字段。您不需要它，因为您已经与 School 实体建立了关联。

并且还`insertable = false, updatable = false`从关联映射中删除。您应该使用该`school`字段来创建、更新或删除关联。

# android - Android 位图始终以 72dpi 保存

> ID：11031471
> 
> 赞同：0
> 
> 时间：2012-06-14T10:46:51.623
> 
> 标签：android, bitmap, dpi

我正在制作位图（稍后将打印在纸上）并使用画布在其上绘图。但保存后它总是有 72 dpi 的分辨率。我尝试使用`bitmap.setDensity(96);`，但它似乎不起作用。

这就是我制作位图并保存它的方式，没什么特别的

```
Bitmap outBitmap = Bitmap.createBitmap(378,559,Bitmap.Config.RGB_565);
         OutputStream outStream = null;
         File file = new File(Environment.getExternalStorageDirectory(),
         "96dpiBitmap.png");
         try {
         outStream = new FileOutputStream(file);
         outBitmap.compress(Bitmap.CompressFormat.PNG, 100, outStream);
         outStream.flush();
         outStream.close();
         } catch (FileNotFoundException e) {
         // doh
         } catch (IOException e) {
         // doh
         } 
```

所以。如何保存 dpi > 72 的位图？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T18:05:40.483

您必须为 ex 创建原始位图的缩放位图：

```
MyNewBitmap = Bitmap.createScaledBitmap(myOldOne,612,612,false); 
```

其中 612 宽度和 612 高度的结果将是图像平方。我正在使用这种方法来防止 instagram 缩放或剪切我的图像，使其完全适合 instagram 图像裁剪:)。无论如何，您必须找到正确的方法来缩放图像以适合 72dpi。我想 800x600 可以解决问题。尝试创建新位图并缩放旧位图，然后保存新位图。祝你好运

# reporting-services - SSRS多值参数显示

> ID：11031475
> 
> 赞同：1
> 
> 时间：2012-06-14T10:47:20.403
> 
> 标签：reporting-services, ssrs-2008

让我知道如何在 SSRS 中执行此操作：- 如果用户选择多值参数的多个值，则在文本框中显示“多个”，否则如果用户仅选择一个值，则在文本框中显示该值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T00:56:26.413

有几种方法可以做到这一点。首先您可以检查特定参数是否为多值：

```
 =Parameters! <MultivalueParameterName> .IsMultiValue 
```

如果上面返回 True，您可以检查有多少选择，如下所示：

```
=Parameters! <MultivalueParameterName> .Count 
```

最后，如果上面的行返回大于 1，那么您知道选择了多个值并将“多个”设置为结果，如果结果为 1，则显示确切的值作为结果。该函数如下所示：

```
If parameter.IsMultiValue then
    if parameter.count() > 1
             s = "Multiple" 
Else
     s = parameter.Value
End If
Return s 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-19T13:32:39.683

您可以使用以下表达式： =iif(Parameters!ParameterName.Count>1,"Multiple",Parameters!ParameterName.Value(0))

# javascript - Backbone.js 安全性

> ID：11031481
> 
> 赞同：6
> 
> 时间：2012-06-14T10:47:44.397
> 
> 标签：javascript, security, backbone.js

我现在正在学习 Backbone.js，如果我的问题是 nooby 的话，很抱歉：-P

在我的程序中，我在服务器端检查我的数据是否正确等等......但我想知道如果用户使用 FireBug 中的控制台更改存储在模型中的数据并尝试 .save() 或 .fetch( ）。

有没有办法阻止这种行为？

考虑到我所有的数据都将存储在模型中并且可以被用户轻松检索到我不太习惯使用backbone.js，是我自己还是这里有什么问题？！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-14T10:50:22.773

> 但我想知道如果用户使用 FireBug 中的控制台更改存储在模型中的数据并尝试 .save() 或 .fetch() 会发生什么。

然后将编辑后的数据提交到服务器

> 有没有办法阻止这种行为？

不，您只需要以与处理任何请求相同的方式处理它们：执行身份验证/授权以确保允许发出请求的用户这样做。

> 考虑到我所有的数据都将存储在模型中并且可以被用户轻松检索到我不太习惯使用backbone.js

然后不要使用它。

但是，如果您不使用诸如 backbond 之类的客户端框架，那么如果您将向用户显示这些数据，请不要偏执于保密数据。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-14T14:00:46.897

> 考虑到我所有的数据都将存储在模型中并且可以被用户轻松检索到我不太习惯使用backbone.js，是我自己还是这里有什么问题？！

您没有做错任何事，但不使用 Backbone 不会使您的网站更加安全。即使您不使用 Backbone，我也可以在您的站点上启动控制台并向您的服务器发出任何我想要的 ajax 请求。如果我想更进一步，我可以构建一个应用程序来发出我想要的任何请求。

客户端无法实现真正​​的安全性。无论您是否使用诸如 Backbone 之类的东西，这都是服务器的责任。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-10-06T17:09:25.807

一种简单而安全的方法是将用户凭据（用户名和密码）包含到您的模型中，并在服务器端对每个 AJAX 调用进行检查。

To avoid so much bdd requets, you can also generate an associated array of `id => serial key` to each logged user on the server side and return it by `fetch()` during the auth proccess, then, check if the id and the serial key you generated match to each AJAX calls.

# jquery - 一起使用 jquery validate 和 $.ajax 的正确方法是什么？

> ID：11031482
> 
> 赞同：1
> 
> 时间：2012-06-14T10:47:54.130
> 
> 标签：jquery, ajax

一起使用 jquery validate 和 $.ajax 的正确方法是什么？一旦表单通过验证，我将尝试通过 Ajax 保存数据：

```
jQuery(document).ready(function() {
    $('#np-submit').click(function() {

        if($("#newsletter-subscription").validate()) {

            var name = $("input#fullname").val();
            var email = $("input#email").val();
            var interest = $("select#interest").val();
            var dataString = 'name=' + name + '&email=' + email + '&interest=' + interest;
            //alert (dataString);return false;
            $.ajax({
                type: "POST",
                url: "../save_address.php",
                data: dataString,
                success: function() {
                    alert("Contact Form Submitted!");
                }
            });
        });

    $("#newsletter-subscription").validate({
        rules: {
            fullname: "required",
            email: {
                required: true,
                email: true,
            },
            interest: "required"
        },
        messages: {
            fullname: "Please enter a your first name.",
            email: "Please enter a valid email address.",
            interest: "Please select your area of interest."
        }
    });
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T10:57:07.587

您应该为验证器属性提供回调`submitHandler`，并启动 AJAX 请求。

[这是一个为submitHandler](http://docs.jquery.com/Plugins/Validation/validate)提供回调并启动表单的 AJAX 提交的示例：

```
$.validator.setDefaults({   
    submitHandler: function(form) {
        $(form).ajaxSubmit(); 
    }
}); 
```

`.ajaxSubmit`不是 jQuery 的核心功能。它由[jQuery 表单插件](http://jquery.malsup.com/form/)提供。

[您可以在jQuery 验证器插件手册](http://docs.jquery.com/Plugins/Validation/validate)中阅读有关`submitHandler`和其他选项`.validator`对象可能会收到的信息。

# java - 从没有 HibernateTemplate 的 LocalSessionFactoryBean 获取 SessionFactory

> ID：11031483
> 
> 赞同：0
> 
> 时间：2012-06-14T10:47:56.007
> 
> 标签：java, spring, hibernate

我正在使用 Spring 3.1.1.RELEASE 和 4.0.1.Final 并且读到我必须避免使用 HibernateTemplate。我在网上没有找到完整的示例，所以我写了这段代码，但不起作用。

道类

```
@Repository("userDao")
public class UserDaoImpl implements UserDao {

    @Autowired
    private SessionFactory sessionFactory;

    public void setSessionFactory(SessionFactory sessionFactory) {
        this.sessionFactory = sessionFactory;
    } 
```

弹簧配置

```
 <bean id="sessionFactory"
    class="org.springframework.orm.hibernate4.LocalSessionFactoryBean">
        <property name="dataSource">
                <ref bean="dataSource" />
        </property>
        ...
    </bean> 
```

但是抛出了一个异常：我认为这很正常，因为 sessionFactory 它不是 LocalSessionFactoryBean，但我不知道如何修复它。

```
Could not autowire field: private org.hibernate.SessionFactory com.test.dao.impl.UserDaoImpl.sessionFactory; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No matching bean of type [org.hibernate.SessionFactory] found for dependency: expected at least 1 bean which qualifies as autowire candidate for this dependency.

The complete stacktrace : <br />
`org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'userDao': Injection of autowired dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Could not autowire field: private org.hibernate.SessionFactory com.test.dao.impl.UserDaoImpl.sessionFactory; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No matching bean of type [org.hibernate.SessionFactory] found for dependency: expected at least 1 bean which qualifies as autowire candidate for this dependency. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true)}
        at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:287)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1106)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:517)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
        at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
        at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
        at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
        at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
        at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:585)
        at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:913)
        at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:464)
        at org.springframework.web.servlet.FrameworkServlet.configureAndRefreshWebApplicationContext(FrameworkServlet.java:631)
        at org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:588)
        at org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:645)
        at org.springframework.web.servlet.FrameworkServlet.initWebApplicationContext(FrameworkServlet.java:508)
        at org.springframework.web.servlet.FrameworkServlet.initServletBean(FrameworkServlet.java:449)
        at org.springframework.web.servlet.HttpServletBean.init(HttpServletBean.java:133)
        at javax.servlet.GenericServlet.init(GenericServlet.java:160)
        at org.apache.catalina.core.StandardWrapper.initServlet(StandardWrapper.java:1266)
        at org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:1185)
        at org.apache.catalina.core.StandardWrapper.load(StandardWrapper.java:1080)
        at org.apache.catalina.core.StandardContext.loadOnStartup(StandardContext.java:5015)
        at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5302)
        at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
        at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1566)
        at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1556)
        at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)
        at java.util.concurrent.FutureTask.run(FutureTask.java:166)
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
        at java.lang.Thread.run(Thread.java:722)
    Caused by: org.springframework.beans.factory.BeanCreationException: Could not autowire field: private org.hibernate.SessionFactory com.test.dao.impl.UserDaoImpl.sessionFactory; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No matching bean of type [org.hibernate.SessionFactory] found for dependency: expected at least 1 bean which qualifies as autowire candidate for this dependency. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true)}
        at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:506)
        at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:87)
        at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:284)
        ... 30 more
    Caused by: org.springframework.beans.factory.NoSuchBeanDefinitionException: No matching bean of type [org.hibernate.SessionFactory] found for dependency: expected at least 1 bean which qualifies as autowire candidate for this dependency. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true)}
        at org.springframework.beans.factory.support.DefaultListableBeanFactory.raiseNoSuchBeanDefinitionException(DefaultListableBeanFactory.java:924)
        at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:793)
        at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:707)
        at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:478)
        ... 32 more
` <br /> 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-13T18:14:53.680

有同样的问题，无法进行注射。

我的问题是“顺序”。必须首先调用 Hibernate xml。

调度程序-servlet.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:p="http://www.springframework.org/schema/p"
xmlns:context="http://www.springframework.org/schema/context"
xmlns:mvc="http://www.springframework.org/schema/mvc"
xsi:schemaLocation="http://www.springframework.org/schema/beans
    http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
    http://www.springframework.org/schema/context
    http://www.springframework.org/schema/context/spring-context-3.1.xsd
    http://www.springframework.org/schema/mvc
    http://www.springframework.org/schema/mvc/spring-mvc-3.1.xsd">

<!-- init hibernate first -->
<import resource="classpath:HibernateContext.xml"/>

<bean id="viewResolver"
    class="org.springframework.web.servlet.view.InternalResourceViewResolver">
    <property name="prefix" value="/WEB-INF/pages/" />
    <property name="suffix" value=".jsp" />
</bean>
<mvc:annotation-driven />
<context:component-scan base-package="com.xxx.yyy" /> 
```

# javascript - Require.js 正在伤害我的大脑。关于它加载脚本/模块的方式的一些基本问题

> ID：11031485
> 
> 赞同：45
> 
> 时间：2012-06-14T10:48:00.510
> 
> 标签：javascript, jquery, module, requirejs

假设这是我的 config.js 或 main.js：

```
require.config({
    // paths are analogous to old-school <script> tags, in order to reference js scripts
    paths: {
        jquery: "libs/jquery-1.7.2.min",
        underscore: "libs/underscore-min",
        backbone: "libs/backbone-min",
        jquerymobile: "libs/jquery.mobile-1.1.0.min",
        jquerymobilerouter: "libs/jquery.mobile.router.min"
    },
    // configure dependencies and export value aliases for old-school js scripts
    shim: {
        jquery: ["require"],
        underscore: {
            deps: ["jquery"],
            exports: "_"
        },
        backbone: {
            deps: ["underscore", "jquery"],
            exports: "Backbone"
        },
        jquerymobilerouter: ["jquery", "backbone", "underscore"],
        jquerymobile: ["jquery", "jquerymobilerouter", "backbone", "underscore"]
    }
});
require(["jquery", "backbone", "underscore", "app/app.min", "jquerymobilerouter", "jquerymobile"], function ($, Backbone, _, App) {
    console.log($);
    console.log(Backbone);
    console.log(_);
    $("body").fadeIn(function () {
        App.init();
    });
}); 
```

1.  如果我理解正确，`paths`配置选项允许您引用脚本，即`<script>`HTML 中的标记。假设是这种情况，我是否仍然需要在下面的实际 require 语句中为 jQuery 之类的脚本加上 a`$`或下划线 a的别名？`_`我不得不这样做似乎很奇怪，因为如果您使用标准`<script>`标签引用 jQuery，`$`则可以在整个脚本中自动使用。使用 不应该是一样的`paths`吗？

2.  我是`shim`config 选项的新手，我知道它已经取代了不推荐使用的`order!`插件。`exports`该物业实际上是做什么的？它似乎没有为脚本创建别名；例如，如果我将`exports`for 下划线设置为`"whatever"`，然后尝试设置为`console.log(whatever)`，则它是未定义的。那么有什么意义呢？

3.  如何“全局”正确使用 jQuery 之类的脚本？也就是说，能够`$`在我的 App.js 模块或我的“app”文件夹中的任何其他模块中使用别名的正确方法是什么？我每次都必须在每个单独的模块和别名中都需要 jQuery`$`吗？或者我在这里做的方式是否正确？

我也非常感谢对这个特定脚本的任何其他批评；在我看来，Require.js 的文档还有很多不足之处；我真正想了解更多的事情似乎被掩盖了，让我摸不着头脑。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-02-26T20:33:20.133

只是为了澄清关于 的任何混淆`exports`，假设任何 shim 库都将属性附加到全局上下文（`window`或`root`），或修改已经存在的全局属性（例如 jQuery 插件）。当 requireJS 获取加载填充依赖项的命令时，它会检查与`exports`该填充配置的值匹配的属性的全局上下文，如果找到它，则将其作为该模块的值返回。如果它没有找到它，那么它会加载相关的脚本，等待它执行，然后找到全局符号并返回它。

要记住的一个重要事实是，除非 shim 配置包含一个`exports`值，`init`否则不会执行该配置上的任何方法。依赖加载器必须在初始化该模块之前找到该模块的值（这是`exports`指定的），这就是如果`init`该模块有填充程序则需要该属性的原因。

更新：我还需要指出，如果有问题的模块在`define`任何地方调用，您为该模块拥有的任何 shim 配置都将被忽略。这实际上让我有些头疼，因为我想使用 shim 配置来调用 jQuery 的`jQuery.noConflict(true)`方法来取消全局化 jQuery 并将其范围限定为需要它的模块，但无法让它工作。（有关如何使用 map config 而不是 shim config 轻松执行此操作的信息，请参阅底部的更新。）

更新 2：requireJS 谷歌组最近的一个问题让我意识到我的解释可能有点误导，所以我想澄清一下。*RequireJS 只会在至少一次通过 requireJS 加载*的情况下重新使用已填充的依赖项。也就是说，如果您只是`<script>`在托管页面上有一个标签（例如，下划线），就像这样：

```
<script src='lib/underscore.js'></script>
<script src='lib/require.js' data-main='main.js'></script> 
```

...并且您的 requireJS 配置中有类似的内容：

```
paths: {
    'underscore': 'lib/underscore'
},
shim: {
    'underscore': {
        exports: '_'
    }
} 
```

那么第一次执行`define(['underscore'], function (_) {});`or`var _ = require('underscore');`时，RequireJS 将重新加载下划线库，而不是重新使用之前定义的`window._`，因为据 requireJS 所知，您之前从未加载过下划线。当然，它可以检查是否`_`已在根范围上定义，但它无法验证`_`已经存在的与`paths`配置中定义的相同。例如，默认情况下两者都`prototype`分配`jquery`给自己`window.$`，如果 requireJS 假定 'window.$' 是 jQuery，而实际上它是原型，那么你将处于糟糕的境地。

所有这一切都意味着，如果你混合搭配这样的脚本加载样式，你的页面最终会变成这样：

```
 <script src='lib/underscore.js'></script>
 <script src='lib/require.js' data-main='main.js'></script>
 <script src='lib/underscore.js'></script> 
```

第二个下划线实例是由 requireJS 加载的实例。

基本上，必须通过 requireJS 加载一个库，以便 requireJS 了解它。然而，*下*一次你需要下划线时，requireJS 会说“嘿，我已经加载了它，所以只要交回任何`exports`值，不用担心加载另一个脚本。”

这意味着您有两个真正的选择。一种是我认为的反模式：根本不使用 requireJS 来表达全局脚本的依赖关系。也就是说，只要库将全局附加到根上下文，您就可以访问它，如果没有明确要求该依赖关系。您可以看到为什么这是一种反模式——您基本上只是消除了使用 AMD 加载程序的大部分优势（显式依赖项列表和可移植性）。

另一个更好的选择是使用 requireJS 加载所有内容，以至于您应该自己创建的唯一实际脚本标签是最初加载 requireJS 的标签。您可以使用 shims，但 95% 的情况下，将 AMD 包装器添加到脚本中并不难。将所有非 AMD 库转换为与 AMD 兼容可能需要更多的工作，但是一旦您完成一两个，它就会变得容易得多 - 我可以使用任何通用 jQuery 插件并将其转换为 AMD 模块不到一分钟。通常只是添加的问题

```
define(['jquery'], function (jQuery) { 
```

在顶部，并且

```
 return jQuery;
}); 
```

在底部。我将'jquery'映射到`jQuery`而不是`$`我注意到这些天大多数插件都包装在这样的闭包中的原因是：

```
(function ($) {
    // plugin code here
})(jQuery); 
```

注意预期的范围是个好主意。您当然可以`$`直接将“jquery”映射到，假设插件不希望找到`jQuery`而不是`$`. 这只是基本的 AMD 包装器 - 更复杂的包装器通常会尝试检测正在使用的加载器类型（commonJS 与 AMD 与常规 ol' 全局变量）并根据结果使用不同的加载方法。只需几秒钟，您就可以在 google 上轻松找到这方面的示例。

更新：我过去支持`jQuery.noConflict(true)`与 RequireJS 一起使用的解决方法有效，但它需要对 jQuery 源代码进行非常小的修改，此后我找到了一种更好的方法来完成同样的事情而无需修改 jQuery。幸运的是，RequireJS 的作者 James Burke 也是如此，他已将其添加到 RequireJS 文档中：[http ://requirejs.org/docs/jquery.html#noconflictmap](http://requirejs.org/docs/jquery.html#noconflictmap)

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-06-14T15:02:53.217

1.  当您需要该依赖项时，路径告诉 require.js 在哪里查找。

    例如我有这样配置的东西：

    ```
    "paths": { 
        "jquery": "require_jquery"
    },
    "shim": {
        "jquery-cookie"  : ["jquery"],
        "bootstrap-tab"  : ["jquery"],
        "bootstrap-modal": ["jquery"],
        "bootstrap-alert": ["jquery"]
    }, 
    ```

    这意味着我每次在模块中

    ```
    define( ['jquery'] 
    ```

    requirejs`require_jquery`从主路径加载文件，而不是尝试加载 jquery.js。在您的情况下，它将加载 jQuery 源文件，然后该文件将在全球范围内可用。我个人不喜欢这种方法，因此在 require_jquery.js 文件中我这样做：

    ```
    define( ["jquery_1.7.2"], function() {
        // Raw jQuery does not return anything, so return it explicitly here.
        return jQuery.noConflict( true );
    } ); 
    ```

    这意味着 jQuery 将仅在我的模块中定义。（这是因为我编写了 Wordpress 插件，所以我可以包含我自己的 jQuery 版本而无需触及外部版本）

2.  导出（从文档中读取应该是您正在使用的模块的名称，以便可以检测加载是否正确。[这里](http://requirejs.org/docs/api.html#config-shim)解释了。因此，如果您想为下划线设置导出，它应该是`_`

3.  正如我所解释的，jQuery 应该是全局的，如果你只是导入它，文件就会被执行并且 jQuery 是全局的

编辑 - 回答评论。

1.  是的，我的意思是，您必须为 jQuery 导出 $ 或 jQuery，为骨干网导出 _。根据我从文档中得到的信息，这仅在某些边缘情况下需要，并且对于在全局命名空间中将自己声明为 jQuery 的库来说不是必需的。

    我认为 requirejs 在必须从 CDN 加载 jQuery 时需要它们。我认为 requirejs 首先尝试从 CDN 加载 jQuery，然后通过检查“导出”变量是否存在来检查它是否正确加载，如果不存在，它会从本地文件系统加载它（如果你当然，已经配置了后备）。当 requirejs 看不到 404 返回时，这是需要的。

2.  jQuery 是全局可用的，因为它被声明为全局的。如果你只是加载并执行 jQuery 脚本，你最终会得到两个全局变量，`$`并且`jQuery`（或者你可以像我一样做并避免这种情况）。在`define()`函数内部，您可以将 jQuery 别名为您想要的任何内容。

    ```
    define( [ 'jquery' ], function( jq ) {
        // jq is jquery inside this function. if you declared it 
        // globally it will be also available as $ and jQuery
    } ); 
    ```

# sql - 复杂的sql更新需要帮助

> ID：11031490
> 
> 赞同：0
> 
> 时间：2012-06-14T10:48:24.817
> 
> 标签：sql, sql-server

我有一张有很多记录的表。我将 html 数据存储在该表的称为**数据**的特定字段中。每条记录中的 html 数据都有许多 IMG 标签，如`<img src='test.gif' />`. 作为示例页面网址[http://www.bba-reman.com/content.aspx?content=bba_reman_diagnostics_tools](http://www.bba-reman.com/content.aspx?content=bba_reman_diagnostics_tools)

去那里看到一个页面显示了许多产品图像，所有数据都来自表格。我想使用lazyload jquery 插件，IMG 标签应该是这样的`<img src="img/grey.gif" data-original="img/example.jpg" >`。所以我需要更新我的表格 html 数据。

所以我需要编写一个 sql 更新语句，它将迭代所有行中的所有 html 数据，并在特定 div 中找到 img 标签，通过 ID 查找并更改 IMG 标签的 src url，如 src 将像`src="img/grey.gif"`所有图像一样固定并添加一个属性对所有 img 标签之类的`data-original="img/example.jpg"`

我知道我的情况对于更新声明来说有点可怕。请提出一个更新所有 IMG 标签编写 sql 的好方法。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T11:29:31.367

假设您的所有标签实际上都以 结尾`/>`，那么这将起作用

```
UPDATE myTable
SET tag = LEFT(tag, CHARINDEX('/', tag) - 1) + 'data-original=''example.gif'' />' 
```

但是，这不会像您在问题中所做的那样更改引号，并且不会像您在问题中所做的那样在标签结束之前删除右斜杠。

# android - 从android中的html数据获取图像？

> ID：11031497
> 
> 赞同：1
> 
> 时间：2012-06-14T10:48:49.280
> 
> 标签：android

您好我已经通过链接[Android HTML ImageGetter as AsyncTask](https://stackoverflow.com/questions/7424512/android-html-imagegetter-as-asynctask)为 html 数据设置图像。当我执行下面的代码时，它会将 o/p 显示为 Hello This is a test，然后再次将“This is a test”替换为 img1，并且第二张图像也未显示。请建议我如何将图像放在文本旁边？

提前致谢

我的代码：

```
 main.xml

<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <TextView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="@string/hello" />

     <TextView
            android:id="@+id/tv_pw"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:layout_marginLeft="10dip"
            android:layout_marginRight="9dip"
            android:layout_marginTop="15dip"
            android:text=""
            android:textColor="#ffffffff"
            android:textSize="10pt" >
        </TextView>

</LinearLayout>

Myclass.java

public class SamplehtmlActivity extends Activity {
    /** Called when the activity is first created. */

    TextView textView;
    String html = "Hello " +
    "<img src='http://server.com/img1.png'/>" +
    " This is a test " +
    "<img src='http://server.com/img2.png'/>";

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        this.textView = (TextView)this.findViewById(R.id.tv_pw);
        URLImageParser p = new URLImageParser(textView, this);
        Spanned htmlSpan = Html.fromHtml(html, p, null);
        textView.setText(htmlSpan);

    }

    public class URLDrawable extends BitmapDrawable {
        // the drawable that you need to set, you could set the initial drawing
        // with the loading image if you need to
        protected Drawable drawable;

        @Override
        public void draw(Canvas canvas) {
            // override the draw to facilitate refresh function later
            if(drawable != null) {
                drawable.draw(canvas);
            }
        }
    }

    public class URLImageParser implements ImageGetter {
        Context c;
        View container;

        /***
         * Construct the URLImageParser which will execute AsyncTask and refresh the container
         * @param t
         * @param c
         */
        public URLImageParser(View t, Context c) {
            this.c = c;
            this.container = t;
        }

        public Drawable getDrawable(String source) {
            URLDrawable urlDrawable = new URLDrawable();

            // get the actual source
            ImageGetterAsyncTask asyncTask = 
                new ImageGetterAsyncTask( urlDrawable);

            asyncTask.execute(source);

            // return reference to URLDrawable where I will change with actual image from
            // the src tag
            return urlDrawable;
        }

        public class ImageGetterAsyncTask extends AsyncTask<String, Void, Drawable>  {
            URLDrawable urlDrawable;

            public ImageGetterAsyncTask(URLDrawable d) {
                this.urlDrawable = d;
            }

            @Override
            protected Drawable doInBackground(String... params) {
                String source = params[0];
                return fetchDrawable(source);
            }

            @Override
            protected void onPostExecute(Drawable result) {
                // set the correct bound according to the result from HTTP call
                urlDrawable.setBounds(0, 0, 0 + result.getIntrinsicWidth(), 0 
                        + result.getIntrinsicHeight()); 

                // change the reference of the current drawable to the result
                // from the HTTP call
                urlDrawable.drawable = result;

                // redraw the image by invalidating the container
                URLImageParser.this.container.invalidate();
            }

            /***
             * Get the Drawable from URL
             * @param urlString
             * @return
             */
            public Drawable fetchDrawable(String urlString) {
                try {
                    InputStream is = fetch(urlString);
                    Drawable drawable = Drawable.createFromStream(is, "src");
                    drawable.setBounds(0, 0, 0 + drawable.getIntrinsicWidth(), 0 
                            + drawable.getIntrinsicHeight()); 
                    return drawable;
                } catch (Exception e) {
                    return null;
                } 
            }

            private InputStream fetch(String urlString) throws MalformedURLException, IOException {
                DefaultHttpClient httpClient = new DefaultHttpClient();
                HttpGet request = new HttpGet(urlString);
                HttpResponse response = httpClient.execute(request);
                return response.getEntity().getContent();
            }
        }
    }

} 
```

# asp.net - sql server 表中的 tinyint 转换为 edmx 中的字节

> ID：11031498
> 
> 赞同：-1
> 
> 时间：2012-06-14T10:48:52.450
> 
> 标签：asp.net, sql-server-2008, entity-framework

我正在研究 asp.net 应用程序，并且我已经从数据库生成了实体模型（edmx）。我看到数据库中所有 tinyint 的字段都转换为字节。当我尝试使用属性窗口修复模型并更改类型时，我开始收到模型验证错误。

请告诉我如何解决它

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-14T10:54:31.290

tinyInt会变成**byte**，**smallInt****会**变成**int16**

 ******[http://msdn.microsoft.com/en-us/library/bb896344.aspx](http://msdn.microsoft.com/en-us/library/bb896344.aspx)******

# php - Magento - 自定义管理网格问题

> ID：11031502
> 
> 赞同：0
> 
> 时间：2012-06-14T10:49:06.520
> 
> 标签：php, magento, attributes, grid, admin

我一直在为 magento 后端编写一个自定义的缺货模块，我有批量操作、导出等工作。但是，当我执行任何类型的搜索功能（例如在产品名称字段中输入内容）并确实尝试更改为下一页（或在该字段中输入特定页面）或页面上出现多少产品时。它立即将我重定向到仪表板。

谁能指出我处理此功能的代码在哪里的正确方向？我将假设它是控制器的一部分，但我一直在寻找最后一个小时，现在是时候寻求帮助了！

感谢您的任何帮助，您可以提供！

准备列功能：

```
protected function _prepareColumns()
{
    $this->addColumn('sku',
        array(
            'header'=> Mage::helper('catalog')->__('SKU'),
            'width' => '80px',
            'index' => 'sku',
    ));

    $sets = Mage::getResourceModel('eav/entity_attribute_set_collection')
        ->setEntityTypeFilter(Mage::getModel('catalog/product')->getResource()->getTypeId())
        ->load()
        ->toOptionHash();

    $this->addColumn('set_name',
        array(
            'header'=> Mage::helper('catalog')->__('Attrib. Set Name'),
            'width' => '60px',
            'index' => 'attribute_set_id',
            'type'  => 'options',
            'options' => $sets,
    ));

    $store = $this->_getStore();
    if ($store->getId()) {
        $this->addColumn('custom_name',
            array(
                'header'=> Mage::helper('catalog')->__('Name in %s', $store->getName()),
                'index' => 'custom_name',
        ));
    }

    $this->addColumn('name',
        array(
            'header'=> Mage::helper('catalog')->__('Name'),
            'index' => 'name',
    ));

    $this->addColumn('stock_status',
        array(
            'header'=> 'Availability',
            'width' => '60px',
            'index' => 'stock_status',
            'type'  => 'options',
            'options' => array('1'=>'In stock','0'=>'Out of stock'),
    )); 

    $this->addColumn('custom_stock_status',
    array(
        'header' => 'Custom Stock Status',
        'width' => '60px',
        'index' => 'custom_stock_status',
        'type' => 'options',
        'editable' => 'true',));

     $this->addColumn('eol',
     array(
        'header'=> Mage::helper('catalog')->__('EoL'),
        'width' => '20px',
        'type'  => 'checkbox',
        'index' => 'eol',
        'onclick'   => 'this.value = this.checked ? 1 : 0;',
        'values'    => array('1','2'),
        'editable' => 'true',
    ));

    $store = $this->_getStore();
    $this->addColumn('qty',
        array(
            'header'=> Mage::helper('catalog')->__('Qty'),
            'width' => '25px',
            'type'  => 'number',
            'index' => 'qty',
    ));

    $this->addColumn('status',
        array(
            'header'=> Mage::helper('catalog')->__('Status'),
            'width' => '70px',
            'index' => 'status',
            'type'  => 'options',
            'options' => Mage::getSingleton('catalog/product_status')->getOptionArray(),
    ));

    $this->addColumn('action',
        array(
            'header'    => Mage::helper('catalog')->__('Action'),
            'width'     => '90px',
            'type'      => 'action',
            'getter'     => 'getId',
            'actions'   => array(
                array(
                    'caption' => Mage::helper('catalog')->__('Edit Product'),
                    'url'     => array(
                        'base'=>'store_admin/catalog_product/edit',
                        'params'=>array('store'=>$this->getRequest()->getParam('store'))
                    ),
                    'field'   => 'id'
                )
            ),
            'filter'    => false,
            'sortable'  => false,
            'index'     => 'stores',
    ));

    $this->addRssList('rss/catalog/notifystock', Mage::helper('catalog')->__('Notify Low Stock RSS'));

    return parent::_prepareColumns();
} 
```

此外，我正在尝试按属性进行过滤，我需要两次过滤相同的属性才能输出 null 和 no 属性，但不是。有没有办法做到这一点？

```
->addAttributeToFilter('eol', array('null' => true), 'left')
->addAttributeToFilter('eol', array('No' => true)); 
```

这就是我目前正在尝试做的事情，但是，它丝毫不起作用。两者都可以单独工作！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T15:16:32.673

```
Mage_Adminhtml_Block_Widget_Grid 
```

有方法

```
_addColumnFilterToCollection($column) 
```

您可以覆盖它以实现自定义网格的过滤逻辑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T21:42:46.603

对于 CE 1.6.2，这对我有用：

1) 复制`app/code/core/Mage/Adminhtml/Block/Catalog/Product/Grid.php`到`app/code/local/Mage/Adminhtml/Block/Catalog/Product/Grid.php`

2）从`app/code/local/Mage/Adminhtml/Block/Catalog/Product/Grid.php`里面/下面添加下面的代码`_prepareCollection()`

之后`->addAttributeToSelect('type_id');`和之前`if (Mage::helper('catalog')->isModuleEnabled('Mage_CatalogInventory')) {`

代码：

```
$collection->joinTable( 'cataloginventory/stock_item',
'product_id=entity_id', array("stock_status" => "is_in_stock") )
->addAttributeToSelect('stock_status'); 
```

3）在第180行之后添加以下内容 `'index' => 'price', ));`

代码：

```
$this->addColumn('stock_status',
    array(
        'header'=> 'Stock Status', // this is the title of the column
        'width' => '60px',         // this is the width of the column
        'index' => 'stock_status',
        'type'  => 'options',
        'options' => array('1'=>'In Stock','0'=>'Out Of Stock'),
    )
); 
```

# php - symfony2 权限的后备路由被拒绝

> ID：11031505
> 
> 赞同：0
> 
> 时间：2012-06-14T10:49:14.037
> 
> 标签：php, symfony

如果用户缺少访问请求的路由所需的角色，是否有办法为路由指定回退路由？

Tor 示例，登录用户可以访问我网站的许多页面。当该用户请求在我的网站上使用它缺乏权限的功能（即需要角色 ROLE_SUBSCRIBING）时，我想显示一个描述请求功能的页面，并显示付款选项以成为 ROLE_SUBSCRIBING。重定向到登录表单在这里没有意义，因为用户已正确验证。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T12:25:33.887

结帐[http://symfony.com/doc/current/reference/configuration/security.html](http://symfony.com/doc/current/reference/configuration/security.html)你想要的：

```
# app/config/security.yml
security:
    access_denied_url: /foo/error403 
```

您也可以按防火墙执行此操作：

```
# app/config/security.yml
security:

#...

    firewalls:
        somename:
            #...
            access_denied_url: /foo/error403 
```

# python - 如何避免使用元组，如果没有列表理解，这会是什么样子

> ID：11031508
> 
> 赞同：0
> 
> 时间：2012-06-14T10:49:18.127
> 
> 标签：python

我应该用 Python 编程，而我只使用 Python 3 周。我必须解决各种问题并编写函数作为训练。对于我的一个功能，我使用这条线。

```
theDict = dict( [(k,v) for k,v in theDict.items() if len(v)>0]) 
```

但是我不能使用任何我不完全理解或不能完全解释的东西。我理解这条线的要点，但是，我无法真正解释它。所以我的导师告诉我，要使用它，我必须学习有关元组的一切并完全理解列表理解，或者我必须用纯 Python 编写。

该行基本上查看字典，在字典内部，它应该查找等于空列表的值并删除这些键/值。

所以，我的问题是，这条线在纯非列表理解 python 中会是什么样子？我会尝试写它，因为我想尽力而为，这不是一个可以免费获得答案的网站，但是你们纠正我并帮助我完成它，如果它不起作用。

另一个问题是，字典的“值”中的空列表，如果它们是空的，那么它们将不会在循环内被处理。该循环应该删除等于空值的键。那么你应该如何检查列表是否为空，检查是否在循环内，并且循环的主体中不会包含空数组？

```
for key,value in TheDict.items(): #i need to add 'if value:' somewhere, 
#but i don't know how to add it to make it work, because 
#this checks if the value exists or not, but if the value 
#doesn't exist, then it won't go though this area, so 
#there is no way to see if the value exists or not. 
     theDict[key]=value 
```

如果有更好的方法来删除具有空列表值的字典值。请告诉我。

以及将如何

```
theDict = dict( [(k,v) for k,v in theDict.items() if len(v)>0]) 
```

看起来如果它没有使用发电机？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-14T10:52:01.137

```
result = dict([(k,v) for k,v in theDict.items() if len(v)>0]) 
```

看起来像（如果你想要新字典）

```
result = {}
for key, value in theDict.items():
    if len(value) > 0:
        result[key] = value 
```

如果要修改现有字典：

```
for key, value in theDict.items():
    if not len(value) > 0:
        del theDict[key] 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-14T10:53:18.843

`if v`表示是否`v`有某个值，如果`v`没有任何值，控制将不进入条件并跳过该值

```
In [25]: theDict={'1':'2','3':'', '4':[]}

In [26]: for k,v in theDict.items():
   ....:     if v:
   ....:         newDict[k]=v
   ....:

In [27]: newDict
Out[27]: {'1': '2'} 
```

===========================

```
In [2]: theDict = { 1: ['e', 'f'], 2: ['a', 'b', 'c'], 4: ['d', ' '], 5: [] }

In [3]: newDict = {}

In [4]: for k,v in theDict.items():
   ...:     if v:
   ...:         newDict[k]=v
   ...:

In [5]: newDict
Out[5]: {1: ['e', 'f'], 2: ['a', 'b', 'c'], 4: ['d', ' ']} 
```

根据您的输入更新了答案...

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-14T10:55:53.707

要从字典中删除元素，可以使用`del`关键字：

```
>>> d = {1: 2, 3: 4}
>>> d
{1: 2, 3: 4}
>>> del d[1]
>>> d
{3: 4}
>>> 
```

这可能比生成一个全新的字典更有效。然后，您可以使用与上面类似的结构：

```
for k in theDict:
    if len(theDict[k]) == 0:
        del theDict[k] 
```

那有意义吗？

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-06-14T11:11:10.893

只是为了好玩：

```
from operator import itemgetter
theDict = dict(filter(itemgetter(1), theDict.items())) 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-06-14T13:30:29.873

```
theDict = dict( [(k,v) for k,v in theDict.items() if len(v)>0]) 
```

*但是我不能使用任何我不完全理解或不能完全解释的东西。我理解这条线的要点，但是，我无法真正解释它。*

* * *

**背景**

在 python 中理解或演示行为的最简单方法是使用交互式解释器：
`python -i`

在交互式解释器中有两个非常有用的命令：

*   `dir`- 接受对象的可选参数，返回对象的属性列表。
*   `help`- 访问内联文档

例如，您可以使用`dir`来找出对象具有哪些方法，然后使用`help`.

* * *

**解释有问题的行**

这是一个示例字典：

```
>>> theDict = dict(a=[1,2],b=[3,4],c=[])
>>> theDict
{'a': [1, 2], 'c': [], 'b': [3, 4]} 
```

[列表推导](http://docs.python.org/tutorial/datastructures.html#list-comprehensions)返回一个键值对列表作为元组：

```
>>> [(k,v) for k,v in theDict.items()]
[('a', [1, 2]), ('c', []), ('b', [3, 4])] 
```

该`if`语句过滤结果列表。

```
>>> [(k,v) for k,v in theDict.items() if len(v) > 0]
[('a', [1, 2]), ('b', [3, 4])] 
```

[dict](http://docs.python.org/tutorial/datastructures.html#dictionaries)可以用一系列键值对实例化：

```
>>> dict([(k,v) for k,v in theDict.items() if len(v) > 0])
{'a': [1, 2], 'b': [3, 4]} 
```

把它们放在一起：

```
>>> theDict = dict(a=[1,2],b=[3,4],c=[])
>>> theDict
{'a': [1, 2], 'c': [], 'b': [3, 4]}
>>> theDict = dict([(k,v) for k,v in theDict.items() if len(v) > 0])
>>> theDict
{'a': [1, 2], 'b': [3, 4]} 
```

原始的 dict 对象被替换为使用列表理解过滤的键值对列表实例化的新对象。

如果您遵循所有这些（并自己在交互式解释器中使用它），您将了解您询问的这行代码中发生了什么。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-14T12:54:44.603

您可能想要的是[`defaultdict`](http://docs.python.org/library/collections.html#collections.defaultdict)a`list`作为空值。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-06-14T13:26:03.633

这是您的功能或多或少可读的方式：

```
def clean_whitespace(dct):
    out = {}
    for key, val in dct.items():
        val = map(str.strip, val)
        val = filter(None, val)
        if val:
            out[key] = val
    return out 
```

或者，使用理解，

```
def clean_whitespace(dct):
    out = {}
    for key, val in dct.items():
        val = [x.strip() for x in val]
        val = [x for x in val if x]
        if val:
            out[key] = val
    return out 
```

如果您需要评论或解释，请告诉我们。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-06-14T13:26:56.710

解决方案就在我的眼皮底下。对不起大家。谢谢大家的帮助+1

```
def CleanWhiteSpace(theDict) :
    for k,v in theDict.items():
        if not v:
            del theDict[k]
    return theDict 
```

# c# - Unity IoC 解析通用服务和通用存储库

> ID：11031510
> 
> 赞同：1
> 
> 时间：2012-06-14T10:49:32.887
> 
> 标签：c#, entity-framework, dependency-injection, unity-container, repository-pattern

当使用 ASP.NET MVC 和实体框架，并尝试实现通用存储库和通用服务，并让 Unity Ioc 解决所有问题时：

我正在尝试让 Unity Ioc 使用参数注入将通用服务注入控制器，但类型解析失败并出现此错误消息：

> 尝试获取 ISupplierService 类型的实例时发生激活错误当前的构建操作（构建密钥 Build Key[MyApp.Services.Implementation.SupplierService, null]）失败：尝试获取 IGenericRepository 类型的实例时发生激活错误`1, key \"\" Resolution of the dependency failed: The current type, MyApp.Repository.Interfaces.IGenericRepository`1[Entities.Supplier ]，是一个接口，不能构造。您是否缺少类型映射？（策略类型 BuildPlanStrategy，索引 3）

我可以理解错误消息意味着它正在尝试创建 IGenericRepository 的实例，而我实际上是在尝试让它创建 SupplierService 的实例，但我不明白为什么它会以这种方式解决。根据最初的答案，这可能是因为类型未注册

控制器的服务注入是：

```
public class SupplierController : Controller
{
    private readonly ISupplierService _service;
    public SupplierController() : this (null) { }
    public SupplierController(ISupplierService service) 
    {
        _service = service; 
    }
    // .. injection fails, service is NULL
} 
```

供应商服务是一个空接口加空类（如果需要，以后可以添加自定义方法）

```
public partial interface ISupplierService : IGenericService<Supplier> {} 
```

IGenericService 只是重新呈现 IGenericRepository 的方法：

```
public interface IGenericService<T> : IDisposable where T : BaseEntity {} 
```

在 Global.asax.cs 中，IoC 容器由

```
var container = new UnityContainer();
var uri = new Uri(Assembly.GetExecutingAssembly().CodeBase);
string path = System.IO.Path.GetDirectoryName(uri.AbsolutePath);
var assemblyPaths = new List<string> 
{
    Path.Combine(path, "MyApp.Repository.Interfaces.dll"),
    Path.Combine(path, "MyApp.Repository.Implementation.dll"),
    Path.Combine(path, "MyApp.Services.Interfaces.dll"),
    Path.Combine(path, "MyApp.Services.Implementation.dll")
};

container
    .ConfigureAutoRegistration()
    .LoadAssembliesFrom(assemblyPaths)
    .ExcludeSystemAssemblies()
    .Include(If.Any, Then.Register())
    .ApplyAutoRegistration();

var serviceLocator = new UnityServiceLocator(container);
ServiceLocator.SetLocatorProvider(() => serviceLocator); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T11:38:16.233

在最新版本仍然“新鲜”的时候尝试了 UnityAutoRegistration，我对此并不满意。[codeplex 上](http://tecx.codeplex.com/wikipage?title=AdvancedConfigurationEngineForUnity&referringTitle=Documentation)的TecX 项目包含 StructureMap 配置引擎的一个端口，它为您提供对可以让您的生活更轻松的约定的支持。

就像是

```
ConfigurationBuilder builder = new ConfigurationBuilder();
builder.Scan(s =>
{
  s.AssembliesFromApplicationBaseDirectory();
  s.With(new ImplementsIInterfaceNameConvention());
}
var container = new UnityContainer();
container.AddExtension(builder);
container.RegisterType(typeof(IGenericRepository<>), typeof(GenericRepository<>));
var serviceLocator = new UnityServiceLocator(container);
ServiceLocator.SetLocatorProvider(() => serviceLocator); 
```

应该注册所有的接口/服务和接口/存储库对。约定注册`SupplierService`为 etc 的实现。使用两个开放的通用类型 (和)`ISupplierService`的附加调用将您的通用存储库接口映射到通用存储库类。Unity 将自动为您关闭类型定义（即将映射到）。`RegisterType``IGenericRepositoy<>``GenericRepository``IGenericRepository<Supplier>``GenericRepository<Supplier>`

# android - 在 ICS 4.0.4 的 Android 应用程序中绕过 KSoap 2 中的代理

> ID：11031511
> 
> 赞同：3
> 
> 时间：2012-06-14T10:49:41.980
> 
> 标签：android, proxy, ksoap2, android-4.0-ice-cream-sandwich, android-ksoap2

我有一个 Android 应用程序，它通过 KSOAP2 的 HttpTransportSE 类连接到 HTTPS 连接。

从 ICS 4.0.4 开始，一些 3G 运营商一直在推送不正确的定义（即代理服务器 ip 作为发送到我们服务器的标头中的请求域），这意味着连接被我们的服务器阻止（为了我们的认证，我们无法禁用此）。

例如，Apache 错误是：通过 SNI 提供的主机名和通过 HTTP 提供的主机名不同

有什么方法可以绕过安卓应用程序中的手机代理 3g 设置（来自 APN）进行直接连接？我到处找，找不到任何答案。

鉴于 ICS 4.0.4 中的此错误以及迁移到此版本的手机数量，修复此错误会很好:)

谢谢！:)

# iphone - 5.x 推特应用问题

> ID：11031512
> 
> 赞同：0
> 
> 时间：2012-06-14T10:49:43.600
> 
> 标签：iphone, ios, twitter

我正在尝试触发对 twitter 应用程序的调用，并从我的手机中发布一些有用的信息。

当我已经在 5.x 手机上配置了 twitter 时，它运行良好，没有出现任何问题。在同一行，如果 twitter 尚未配置，它不会做任何事情，没有任何响应。

**你有什么建议可以打开推特应用程序，用户仍然可以发推文。**谢谢。

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T05:31:44.257

归功于@david Ronnqvist。这很简单，只需删除 canSendTweet 它有一个故障保护，可将用户带到 settings->twitter

# mysql - mysql union的问题

> ID：11031513
> 
> 赞同：0
> 
> 时间：2012-06-14T10:49:46.220
> 
> 标签：mysql, union

我在优化一些非常慢的查询时遇到了一些麻烦（技术和概念上的）。

这是我的原始查询：

```
select Con_Progr,
    Pre_Progr
from contribuente,
    preavviso_ru,
    comune,
    via
where [lots of where clauses]
    and ((Via_Progr = Con_Via_Sec) or (Via_Progr = Con_Via_Res and (Con_Via_Sec is null or Con_Via_Sec = '0')))
order by Con_Cognome,
    Con_Nome asc; 
```

这个查询大约需要 38 秒来执行，这是一个非常慢的时间。我对其进行了一些操作，并设法加快了大约 0.1 秒，现在查询看起来像这样：

```
(select Con_Progr,
    Pre_Progr
from preavviso_ru
    join contribuente
        on Pre_Contribuente = Con_Progr
    join via
        on Via_Progr = Con_Via_Sec
    join comune
        on Via_Comune = Com_CC
where [lots of where clauses]
order by Con_Cognome,
    Con_Nome asc
)
union
(
select Con_Progr,
    Pre_Progr
from preavviso_ru
    join contribuente
        on Pre_Contribuente = Con_Progr
    join via
        on Via_Progr = Con_Via_Res
    join comune
        on Via_Comune = Com_CC
where [lots of where clauses]
    and (Con_Via_Sec is null or Con_Via_Sec = '0')
order by Con_Cognome,
    Con_Nome asc
) 
```

如您所见，我在原始查询中拆分了 where 子句，该子句在`OR`两个不同的子查询中使用了运算符，然后将它们合并。这解决了速度问题。结果虽然并不完美，因为我失去了订购。我尝试选择子查询中的列，然后对该结果执行排序，如下所示：

```
select Con_Progr,
        Pre_Progr
from (
    [FIRST SUBQUERY]
) as T1 union (
    [SECOND SUBQUERY]
) as T2
order by Con_Cognome,
        Con_Nome asc 
```

但我在“”附近收到语法错误`union`。有什么建议吗？

这是技术问题。现在对于概念，我认为这两个子查询非常相似（它们仅在连接子句和 where 子句上有所不同），有没有办法以更优雅的方式重新排列第二个查询（快速查询）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T07:14:33.760

我解决了技术问题，我放错了括号：

```
select Con_Progr,
    Pre_Progr
from (
    [FIRST SUBQUERY]
union
    [SECOND SUBQUERY]
) as T
order by Con_Cognome,
    Con_Nome asc 
```

现在它几乎可以完美地工作了（排序中仍然存在一些差异，但这不是问题。

关于查询的效率，我发现问题出`OR`在两个不同列上的条件，因为 MySQL 4.0（我使用它来解决向后兼容性问题）只允许一个表索引。但是，为什么它不至少使用这些索引之一。我再测试一下...

# actionscript-3 - Flex DataGrid - 按下回车键时编辑选定的单元格

> ID：11031521
> 
> 赞同：0
> 
> 时间：2012-06-14T10:50:24.303
> 
> 标签：actionscript-3, apache-flex, datagrid, flex4.5

我正在使用 flex 应用程序。当我在选定的单元格上按 ENTER 键时，我想启用我的 Flex DataGrid 单元格可编辑。特定单元格包含一个 itemRender。我知道 F2 键会做的事情。但我想覆盖该功能。

任何人都可以帮助我完成这项工作......

提前致谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T09:25:04.453

您可以创建一个扩展 spark 数据网格的类并像这样覆盖 editKey：

```
package mypackage
{
    import flash.ui.Keyboard;

    import mx.core.mx_internal;

    import spark.components.DataGrid;

    use namespace mx_internal;

    public class CustomDataGrid extends DataGrid
    {
        public function CustomDataGrid()
        {
            super();
            super.mx_internal::editKey = Keyboard.ENTER;
        }
    }
} 
```

# c# - 无法使用 asp.net 在服务器端位置（C 驱动器或 D 驱动器）写入文件？

> ID：11031524
> 
> 赞同：1
> 
> 时间：2012-06-14T10:50:44.083
> 
> 标签：c#, asp.net, c#-4.0, iis

我正在为我的 Web 应用程序使用 ASP.NET。我可以使用这种方法在服务器路径中写入一个文本文件`Server.MapPath()`。但我也想在不同的位置创建一个文本文件，比如`C:\`or `D:\`。我正在使用 IIS 5.1 版。

`C:\`这是我在驱动器中写入文件的代码。

```
 string text="Welcome";
    StreamWriter sw = new StreamWriter("C:\\sample.txt", true);
    sw.WriteLine(text);
    sw.Close(); 
```

当我运行应用程序时，它会引发运行时异常，说

```
UnauthorizedAccessException. Access to Path C:\sample.txt is denied. 
```

请指导我如何在`C:\`驱动器中写入文本文件...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T10:53:47.250

很明显，您需要获得权限才能在磁盘上的任何位置创建/写入/删除等文件。

这里的提示是您的 asp.net 应用程序在一个池下运行，并且该池在特定用户下运行 - 该用户必须具有正确的权限。

## 更新

在 asp.net 页面上有两种用户一起“运行”。一个与 IIS 的许可有关，这就是 KBoek 所说的。例如，用户从 IIS 请求一个页面，而 IIS 使用 USER A 来查看是否可以读取此文件并将其发送回 Web - 或者是否具有运行权限。

第二种类型的用户是池。从 IIS 有权运行池的那一刻起，然后使用池用户运行它。因此，如果文件要由池读取，则池必须具有读取权限，而不是 iis。

为什么这里有两种用户。因为一个代表看到数据的用户，另一个代表我们制作的程序。

例如，如果我们有一个自动化工具可以删除一组文件，那么我们不会让远程客户端直接访问这个文件，如果他愿意的话也可以删除 - 但只有我们必须有这个权限才能做编程。所以我们的asp.net程序与连接和查看页面的用户有不同的权限，所以我们这里有两种用户。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-14T10:53:16.610

服务器进程在特定用户（取决于您的 IIS 版本）下运行，该用户必须对您要保存文件的文件夹具有写入权限。告诉我您的 IIS 版本，然后给我一分钟，我会为您查找用户名。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-14T10:54:29.497

为了写入某个位置，Web 服务器用户必须具有对该位置的写入权限。您必须为此设置文件夹权限才能工作。确切的用户取决于您的 IIS 版本。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-14T10:59:07.380

首先我会使用`Server.Mappath("C:\\sample.txt");`.

其次，异常说明了一切，试图在服务器中写入文件的用户没有写入权限。

检查[在 IIS 服务器上检查并设置正确的权限以](http://www.webwiz.co.uk/kb/asp-tutorials/server-permissions.htm)获得权限

找到您的用户并允许其写入。

# java - sqlserver2010的maven依赖？

> ID：11031525
> 
> 赞同：2
> 
> 时间：2012-06-14T10:50:44.897
> 
> 标签：java, sql-server, spring, maven

我正在使用 Maven。我正在使用 sqlserver2010 数据库。使用 com.microsoft.sqlserver.jdbc.SQLServerDriver 的相应 maven 依赖项是什么？另外在哪个存储库中我可以找到它来下载？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T10:54:08.483

我认为这是一个。

```
<dependency>
   <groupId>com.microsoft.sqlserver</groupId>
   <artifactId>sqljdbc4</artifactId>
   <version>3.0</version>
</dependency> 
```

[从这里](http://maven.apache.org/guides/mini/guide-3rd-party-jars-local.html)下载 jar 。

添加到存储库。

```
mvn install:install-file -Dfile=sqljdbc4.jar -DgroupId=com.microsoft.sqlserver -DartifactId=sqljdbc4 -Dversion=3.0 -Dpackaging=jar 
```

希望这对您有所帮助。干杯。

**已更新**此处编辑的新依赖项。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-14T10:56:43.227

下载官方驱动程序并将其作为 3rd 方的东西安装到您的私有内部存储库（如 Nexus）中，或者通过`mvn install:install-file ...`.

或者使用[jTDS](http://jtds.sourceforge.net/)并从 Maven Central 获取工件：

```
<dependency>
    <groupId>net.sourceforge.jtds</groupId>
    <artifactId>jtds</artifactId>
    <version>1.2.4</version>
    <scope>runtime</scope>
</dependency> 
```

# c - 发送：无效参数

> ID：11031526
> 
> 赞同：0
> 
> 时间：2012-06-14T10:50:50.357
> 
> 标签：c, sockets, send, packet, sendto

我对这行代码有疑问。我必须将一个数据包带到一个端口并重新发送到接口（例如：eth0）。我的程序成功地从端口获取数据包，但是当我重新发送（使用`send()`）到接口时出现错误：
**发送：无效参数**

代码行是：

```
 sock1=socket(AF_INET6,SOCK_DGRAM,0);
    sock2=socket(AF_INET6,SOCK_DGRAM,0);
    fd=fopen("port.txt","r+");
    if(fd) {
    while(!feof(fd)){
    fscanf(fd,"%d",&port);
    fscanf(fd, "%s",interface);
    }
}

memset(&source_addr,0,sizeof(struct sockaddr_in6));
source_addr.sin6_family=AF_INET6;
source_addr.sin6_port=htons(port);
source_addr.sin6_addr=in6addr_any;

if(bind(sock1,(struct sockaddr*)&source_addr,sizeof(struct sockaddr_in6))==-1){perror("bind");}
//if(connect(sock1,(struct sockaddr*)&source_addr,sizeof(struct sockaddr_in6))==-1){perror("connect");}

//Device dove inviare
memset(&freq,0,sizeof(struct ifreq));
strncpy(freq.ifr_name,interface,IFNAMSIZ);

if(ioctl(sock2,SIOCGIFINDEX,&freq)==-1){perror("ioctl");}
 memset(&destination_addr,0,sizeof(struct sockaddr_in6));
 destination_addr.sin6_family=AF_INET6:
 destination_addr.sin6_scope_id=htonl(2)      
 inet_pton(AF_INET6,"2001::620:40b:555:110",(void*)&destination_addr.sin6_addr.s6_addr);
 if(bind(sock2,(struct sockaddr*)&destination_addr,sizeof(struct sockaddr_in6)==-1)
 {perror("bind");}

if((buff=malloc(BUFFER_LENGTH))==NULL){ perror("malloc");}

packet_length=recv(sock1,buff,BUFFER_LENGTH,0);

if(packet_length<0){perror("recv");}

printf("La lunghezza è %d\n",packet_length);

packet=(unsigned char*)buff;

Sniffer(packet,packet_length,' ');

packet_length2=send(sock2,buff,BUFFER_LENGTH,0); 
```

**buff**是我从端口获取的数据包！错误在哪里？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T12:30:53.623

您没有调用`connect()`您的 UDP 套接字，因此它没有默认目标（供 使用`send()`）。要么调用`connect()`设置默认目的地，要么`sendto`与显式目的地一起使用。

你也不应该发送超过你实际收到的（即。`packet_length`）

# facebook - 将我的网站帖子分享到 Facebook 时间线的问题

> ID：11031528
> 
> 赞同：1
> 
> 时间：2012-06-14T10:50:53.970
> 
> 标签：facebook, facebook-sharer

我正在使用 JavaScript SDK 来实现提要功能。这是我的问题，如果用户登录并单击分享按钮，Facebook 能够在时间轴中看到帖子，但它没有反映在主页中。
我该如何解决这个问题？
我正在使用此代码-

```
FB.init({appId: "XXXXXXXXX",show_error:true, status: true, cookie: true}); 

function postToFeed() { 

  // calling the API ... 
  var obj = { 
    method: 'feed', 
    link: 'https://developers.facebook.com/docs/reference/dialogs/', 
    picture: 'http://fbrell.com/f8.jpg', 
    name: 'Facebook Dialogs', 
    caption: 'Reference Documentation', 
    description: 'Using Dialogs to interact with users.' 
  }; 

  FB.ui(obj, callback); 
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T10:52:59.593

您无法决定主页上显示的内容。这取决于用户设置以及 Facebook 如何决定推广某些类型的内容。

主页只是您所有朋友/订阅/页面时间线的浓缩。当您共享 URL 时 - 您在时间轴上**共享**它，而不是将其共享到主页。

**这是预期的行为。**

* * *

如果您的应用程序将某些内容发布到用户时间线，他/她的朋友很可能**会**在他们的主页上看到它，但目前无法确保这一点。举个例子，你的一个用户分享了一个 URL，但他们的朋友在 2 天后才进入 Facebook——你不能指望这个故事在这么长时间过去后仍然出现在他们的主页上。就像我说的 - 它可能会在某个阶段出现在主页上 - 但你无法控制它。

# jquery - remove() 之后的回调，以避免同时发生效果

> ID：11031541
> 
> 赞同：1
> 
> 时间：2012-06-14T10:52:08.983
> 
> 标签：jquery, callback

如何将这两个语句串在一起，以便在项目淡出时不会发生加载器的淡入。删除后的回调？

```
$(pager).css('margin-top', '180px');
content.find('div.item').fadeTo(500, 0.2, function () {
    content.find('div.item').remove();
})
$("#content-lader").fadeIn(1000, function () {
    content.html('<div id="content-lader">&nbsp;</div>' + data.content);
    $(pager).css('margin-top', '0px');
}); 
```

谢谢，理查德

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T10:57:19.607

尝试：

```
var c = 0;
var totItem = content.find('div.item').length;

content.find('div.item').fadeTo(500, 0.2, function () {
    $(this).remove();
    c++;
    if(c == totItem){
        $("#content-lader").fadeIn(1000, function () {
           content.html('<div id="content-lader">&nbsp;</div>' + data.content);
           $(pager).css('margin-top', '0px');
        });
    }
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-10T21:05:07.443

我看不出为什么要使用 if 和 var 作为 mgraph 的答案。我相信从fadeOut 的回调中调用你的fadeIn 方法也应该可以正常工作。

又名：

```
content.find('div.item').fadeTo(500, 0.2, function () {
    $(this).remove();

    $("#content-lader").fadeIn(1000, function () {
           content.html('<div id="content-lader">&nbsp;</div>' + data.content);
           $(pager).css('margin-top', '0px');
    });

}) 
```

jsFiddle：http: [//jsfiddle.net/w45p/mZWUW/](http://jsfiddle.net/w45p/mZWUW/)

# google-plus - google+ 的 +1 键盘快捷键？

> ID：11031547
> 
> 赞同：1
> 
> 时间：2012-06-14T10:52:24.973
> 
> 标签：google-plus

有没有办法将自定义键盘快捷键添加到特定页面？在这种情况下，我希望 Google+ 的行为有点像 Google 阅读器，并使用快捷方式“v”在新的浏览器选项卡中打开 Google+ 帖子中的链接。我还希望能够通过按键为帖子“+1”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T11:00:58.603

根据 Google 的[+ 按钮政策](http://www.google.com/intl/en_uk/webmasters/+1/button/policy.html)，

> 发布者不得更改或混淆 Google+ 按钮，[...]

这意味着你可能不被允许做你想做的事。如果您仍然想这样做，您应该先询问 Google，他们可能会授权您使用键盘快捷键，并可能会为您提供一个 URL 来执行此操作（当然，前提是他们同意）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T15:14:09.297

如果您使用的是 Chrome，这很有用：

[https://chrome.google.com/webstore/detail/nafbdgpajdhkjnaeafkboodleapnpjbg?hl=en-US](https://chrome.google.com/webstore/detail/nafbdgpajdhkjnaeafkboodleapnpjbg?hl=en-US)

# c# - 防止调用下一个事件处理程序

> ID：11031548
> 
> 赞同：3
> 
> 时间：2012-06-14T10:52:30.637
> 
> 标签：c#, .net, event-handling

我有两个事件处理程序连接到 Windows 窗体中的按钮单击，如下所示：

```
this.BtnCreate.Click += new System.EventHandler(new RdlcCreator().FirstHandler);
this.BtnCreate.Click += new System.EventHandler(this.BtnCreate_Click); 
```

两者都被正确调用。

但是有可能在内部`FirstHandler()`防止`BtnCreate_Click()`被执行吗？就像是：

```
void FirstHandler(object sender, EventArgs e)
{
   if (ConditionSatisfied)
     //Prevent next handler in sequence being executed

} 
```

我知道我可以取消订阅该事件，但这可以通过编程方式（在方法内）完成吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-14T10:57:42.553

据我所知，没有解决方案。这是因为无法保证事件发生时调用事件处理程序的顺序。

因此，您不应该以任何方式依赖他们的订单。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-14T11:02:09.700

为什么不直接用一个事件处理程序替换它们？像这样的东西：

```
var rdlc = new RdlcCreator();
this.BtnCreate.Click += (sender, e) => {
    rdlc.FirstHandler(sender, e);
    if (!rdlc.HasHandledStuff) { // <-- You would need some kind of flag 
        this.BtnCreate_Click(sender, e);
    }
}; 
```

这样你也可以保证处理程序的顺序。或者，使用上述实现，但更改 FirstHandler 的签名以返回指示条件的布尔值（因为在这种情况下，它实际上不再需要事件的签名）：

```
 if (!rdlc.FirstHandler(sender, e)) { 
        this.BtnCreate_Click(sender, e);
    } 
```

**编辑**：或者，您只需将第二个处理程序传递给 FirstHandler。
将 FirstHandler 的签名更改为：

```
void FirstHandler(object sender, EventArgs e, EventHandler nextHandler) {
    if (ConditionSatisfied) {
        // do stuff
    }
    else if (nextHandler != null) {
        nextHandler(sender, e);
    }
} 
```

进而：

```
this.BtnCreate.Click += 
    (s, e) => new RdlcCreator().Firsthandler(s, e, this.BtnCreate_Click); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-14T11:34:36.607

`System.ComponentModel`命名空间包含一个[`CancelEventHandler`](http://msdn.microsoft.com/en-us/library/system.componentmodel.canceleventhandler.aspx)用于此目的的委托。它提供的参数之一是一个[`CancelEventArgs`](http://msdn.microsoft.com/en-us/library/system.componentmodel.canceleventargs)包含布尔`Cancel`属性的实例，该属性可以设置为任何处理程序，以指示调用列表的执行应该停止。

但是，要将其附加到普通`EventHandler`委托，您需要创建自己的包装器，例如：

```
public static class CancellableEventChain
{
    public static EventHandler CreateFrom(params CancelEventHandler[] chain)
    {
        return (sender, dummy) =>
        {
            var args = new CancelEventArgs(false);
            foreach (var handler in chain)
            {
                handler(sender, args);
                if (args.Cancel)
                    break;
            }
        };
    }
} 
```

对于您的示例，您可以像这样使用它：

```
this.BtnCreate.Click += CancellableEventChain.CreateFrom(
    new RdlcCreator().FirstHandler,
    this.BtnCreate_Click
    /* ... */
); 
```

当然，如果您稍后需要取消订阅（分离）它，则需要在字段中捕获创建的链处理程序。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-14T10:59:59.527

在 this.BtnCreate_Click 中添加以下条件，这是第二个事件

```
BtnCreate_Click(object sender, EventArgs e)  
{     
   if (!ConditionSatisfied)       //Prevent next handler in sequence being executed 
   {
     // your implementation goes here
   }   
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-14T11:03:54.690

我建议您创建某种类包装器。因此，您可以在那里存储某种**事件标志组**（例如 16 位整数）和一些设置或取消设置单个位的方法（其中每个都意味着调用或不特定`EventHandler`）。您可以轻松地在类中存储任何计数`Eventhandlers`或什`Actions`至 , 并以您想要的任何顺序调用。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-06-13T00:28:23.260

正在寻找相同问题的解决方案，但没有运气。所以只好自己解决。可取消事件参数的基类

```
public class CancelableEventArgs
{
    public bool Cancelled { get; set; }
    public void CancelFutherProcessing()
    {
        Cancelled = true;
    }
} 
```

接下来定义 EventHandler 的扩展方法，注意 Invocation List 订阅者以倒序调用（在我的例子中，UI 元素在添加到组件时订阅事件，因此稍后呈现的元素具有最高的可见性和更高的优先级）

```
public static class CommonExtensions
{
    [MethodImpl(MethodImplOptions.AggressiveInlining)]
    public static void SafeInvokeWithCancel<T>(this EventHandler<T> handler, object sender, T args) where T : CancelableEventArgs
    {
        if (handler != null)
        {
            foreach (var d in handler.GetInvocationList().Reverse())
            {
                d.DynamicInvoke(sender, args);
                if (args.Cancelled)
                {
                    break;
                }
            }
        }
    } 
```

这是用法

```
public class ChessboardEventArgs : CancelableEventArgs
{
    public Vector2 Position { get; set; }
} 
```

因此，如果 UI 元素对事件有一些行为，它会取消进一步的处理

```
 game.OnMouseLeftButtonDown += (sender, a) =>
        {
            var xy = GetChessboardPositionByScreenPosition(a.XY);
            if (IsInside(xy))
            {
                var args = new ChessboardEventArgs { Position = xy };
                OnMouseDown.SafeInvokeWithCancel(this, args);
                a.CancelFutherProcessing();
            }
        }; 
```

# jsf - 如何通过即时行选择在数据表中进行复选框选择？

> ID：11031552
> 
> 赞同：1
> 
> 时间：2012-06-14T10:52:39.657
> 
> 标签：jsf, primefaces

我使用 primefaces 3.0.1，但我的数据表有问题。

我将我的数据表与即时行选择一起使用。这很好用。但我希望同时使用复选框选择（例如，选择一些行并删除选定的行）

当我使用

```
<p:column selectionMode="multiple" /> 
```

复选框已显示，但我无法选中任何复选框....

有人有解决方案吗？

谢谢。

PS：我的代码

```
<p:dataTable id="rows" var="row" value="#{myBean.row}" selection="#{myBean.selectedRow}" selectionMode="single">
    <p:ajax event="rowSelect" listener="#{myBean.onRowSelect}" update="@form"/>

    <p:column selectionMode="multiple" style="width:18px" />
    <p:column>
        <h:outputText value="#{row.subject}" />
    </p:column>
</p:dataTable> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T13:45:43.550

复选框将用于多行选择，但您仍然声明了您`<p:dataTable>`的单行选择。`selectionMode="single"`从 中删除`<p:dataTable>`并确保将`#{myBean.selectedRow}`更改为数组。

例如

```
<p:dataTable ... selection="#{myBean.selectedRows}"> 
```

和

```
private Row[] selectedRows; 
```

# javascript - 如何拥有一个包含多个 div 的 div 它可能是 4-6-8 我如何使用 Jquery 在页面加载中适合它们

> ID：11031553
> 
> 赞同：0
> 
> 时间：2012-06-14T10:52:48.423
> 
> 标签：javascript, jquery, html, css

如何拥有一个包含多个 div 的 div 它可能是 4-6-8 我如何使用 Jquery 在页面加载中适应它们。

```
<div id="main">
 <div class="box"></div>
 <div class="box"></div>
 <div class="box"></div>
 <div class="box"></div>
</div> 
```

我想创建一个 jquery 函数，它可以通过在页面加载时捕获它们的高度和宽度来使子 div 适合父 div。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T11:03:44.800

我要试一试，希望我*认为*你想要的就是你*真正*想要的。我假设您想在页面加载时向元素中插入动态数量的`<div class="box">`元素。`<div id="main">`如果是这种情况，这应该有效：

HTML

```
<div id="main"></div> 
```

jQuery

```
function createBoxes(numberOfBoxes) {
    var $box = $('<div/>').addClass('box');
    var $container = $('#main');
    for(var i = 1; i <= numberOfBoxes; i++) {
        $container.append($box.clone().text(i));   
    }
}

$(function() { // calls createBoxes() when the DOM is ready
               // shortened version of $(document).ready(function() {
    createBoxes(4);
}); 
```

[**演示**](http://jsfiddle.net/zQ4We/)

# c - 内核模块参数更改（使用 /sys/module）

> ID：11031554
> 
> 赞同：6
> 
> 时间：2012-06-14T10:52:53.033
> 
> 标签：c, linux, linux-kernel, kernel-module

我有一些关于`/sys/module/`in linux的问题

1.  是否`/sys/module`包含内核的所有模块

2.  是否`/sys/module/xxx/parameters`包含内核模块xxxx的所有参数

3.  是否`/sys/module/xxx/parameters/yyyy`包含内核模块 xxxx 的参数 yyyy 的实时值

4.  如果在给定的内核模块中更改了参数，如何在实时中检测到这种更改？我想开发一个 C 应用程序（用户空间）或一个 shell 脚本来实时检测给定内核模块参数的变化。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-13T06:02:59.103

1) 是的，/sys/module 确实拥有所有模块。

2）不，/sys/module/xxx/parameters只有模块要导出的参数，也就是说如果你想从你的模块中导出一些内核模块参数，你应该使用：

```
module_param(test, bool, 0600); 
```

其中最后一个参数不为零，表示文件“/sys/module/xxx/parameters/test”的权限。

3）不，内核模块参数的值几乎是静态的，很少被其他地方改变。

4）您的内核模块应通知用户空间应用程序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-07T08:26:22.633

参数是输入值而不是状态值。在参数的接收者启动后，您不能更改参数。

如果你想在运行时改变内核的行为，你必须使用 /proc/sys。见这里：[http ://tournasdimitrios1.wordpress.com/2011/02/07/passing-parameters-to-the-kernel-at-run-time-time-on-linux/](http://tournasdimitrios1.wordpress.com/2011/02/07/passing-parameters-to-the-kernel-at-run-time-time-on-linux/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-11-11T16:22:19.830

“最后（这一点很重要），如果您选择定义可写参数并在加载模块时确实写入它们，则不会通知您的模块值已更改。也就是说，没有回调或通知修改参数的机制；当您的代码继续运行时，该值将在您的模块中悄然改变，而忽略了该变量中有一个新值的事实。

如果您确实需要对模块的写入权限和某种通知机制，您可能不想使用参数。有更好的方法来获得该功能。” [1]

基本上，您需要一种机制来不断地轮询更改，或者您应该开发一种 IOCtl 方法并将您的设备注册为 char 设备，同时与您注册的其他设备同时注册（Linux 在这方面是精神病）。

Bryan Wilcutt “如果你不珍惜自己的时间，Linux 就是免费的。” -- 未知

[1] [https://www.linux.com/learn/linux-training/28065-the-kernel-newbie-corner-everything-you-wanted-to-know-about-module-parameters](https://www.linux.com/learn/linux-training/28065-the-kernel-newbie-corner-everything-you-wanted-to-know-about-module-parameters)

# java - 带有接口的“不能降低继承方法的可见性”的含义

> ID：11031562
> 
> 赞同：7
> 
> 时间：2012-06-14T10:53:18.080
> 
> 标签：java, interface, access-specifier

我有两个文件：

```
public interface PrintService {
    void print(PrintDetails details);
    class PrintDetails {
        private String printTemplate;
    }
    public interface Task {
        String ACTION = "print";
    }
} 
```

和

```
public class A implements PrintService {
    void print(PrintDetails details) {
        System.out.println("printing: " + details);
    }
    String action = PrintService.Task.ACTION;   
} 
```

我认为代码看起来没问题，但我在第二个文件中遇到错误，`void print(PrintDetails details) {`其中指出：

> 无法降低从 继承的方法的可见性`PrintService`。

有人可以解释这对我意味着什么吗？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-06-14T10:54:54.763

在 Java 接口中，默认情况下每个方法都是`public`：

> 接口主体中的每个方法声明都是隐式抽象的，因此它的主体始终由分号表示，而不是块。
> 
> 接口主体中的每个方法声明都是隐式公共的。[[..]](http://docs.oracle.com/javase/specs/jls/se5.0/html/interfaces.html)

在实现类中，您不能通过不指定访问修饰符来降低可见性：

```
void print(){..} 
```

您正在指定访问级别[*default*](https://stackoverflow.com/questions/3530065/which-is-the-default-access-specifier-in-java)，其可见性低于`public`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-06-16T11:20:47.313

在实现接口的类中将方法设为公共，因为在接口中默认每个方法都是公共的和抽象的。

# apache - Mod从http://重写为https://

> ID：11031565
> 
> 赞同：0
> 
> 时间：2012-06-14T10:53:30.667
> 
> 标签：apache, .htaccess, mod-rewrite

> **可能重复：**
> [使用 .htaccess 和 mod_rewrite 强制 SSL/https](https://stackoverflow.com/questions/4398951/force-ssl-https-using-htaccess-and-mod-rewrite)

嗨，我是 mod rewrite htaccess 的新手，谁能帮我将每个 http:// 请求重定向到 https:// 提前谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T10:55:27.330

简单的说：

```
RewriteEngine On
# Rewrite all non-HTTPS requests to HTTPS.
RewriteCond %{HTTPS} off
RewriteRule ^ https://%{HTTP_HOST}%{REQUEST_URI} [R,L] 
```

# android - 从电子邮件链接启动活动

> ID：11031566
> 
> 赞同：1
> 
> 时间：2012-06-14T10:53:32.710
> 
> 标签：android, android-intent, uri

我拼命想要实现的是在用户单击通过电子邮件发送的链接时启动我的应用程序。用户将打开他/她的 android gmail 应用程序（截至今天，我的 2.3.3 Android 手机中的版本是 2.3.6）并指示点击链接，以便我的应用程序可以启动并开始工作。

我已经从 android 网站的开发者角落阅读了大量文档，并且在 SO 中也有类似的问题，当然也使用过 google-fu，但迄今为止还没有给出*有效*的答案，甚至没有来自 Android 工作人员本身的答案。事实是使用 SO 作为事实上的 Q/A 地方。

我已经尝试将这个配置放入清单文件中：

 ````
 <activity android:name=".MyApp" > 
        <intent-filter> 
             <action android:name="com.my.actions.MY_CUSTOM_ACTION" /> 
             <category android:name="android.intent.category.DEFAULT" /> 
             <category android:name="android.intent.category.BROWSABLE" />
        </intent-filter> 
    </activity></code> 
```

它没有用，所以我也尝试编写我的自定义方案，即使 hackbod[说不这样做](https://stackoverflow.com/a/3472228/1455932)，但也根本没有用。另一种选择是拥有一个自定义网站，以便可以在指定 http 方案和主机的意图过滤器中使用“数据”标签，但这对于许多*没有*网站的人来说是一个阻碍。

也许我错过了一些东西。我在做什么有可能吗？即：是否可以从 gmail android 应用程序的电子邮件中写入的链接启动活动？如果是，那么这种链接必须遵循什么结构/语法？我不敢相信这会*如此*奇怪。它在BB和iOS中使用没有任何问题。

任何帮助表示赞赏。提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-14T11:42:14.980

> 用户将打开他/她的 android gmail 应用程序

你没有办法知道这一点。用户可能正在使用任意数量的电子邮件客户端。它们不会都具有相同的行为，尽管大多数希望`http:`相当一致地处理链接。

> 但迄今为止没有给出有效的答案

是的，他们有。我个人就是这样做的。

> 另一种选择是拥有一个自定义网站，以便可以在指定 http 方案和主机的意图过滤器中使用“数据”标签，但这对于许多没有网站的人来说是一个阻碍。

建立一个网站需要几分钟和几美元。此外，无论如何，他们都需要这样做，才能拥有一个营销相关应用程序的网站。如果他们负担不起，他们就负担不起在 Play 商店上架应用程序的 25 美元或其他市场的类似费用。而且，如果他们正在为一家企业编写这个应用程序，那么该企业应该已经有一个网站。而且，归根结底，如果开发人员不介意用户在没有应用程序的地方点击电子邮件时收到 404，则 URL 不需要实际解析为 Internet 上的任何真实内容。

因此，如果这是一个“表演停止者”，那么呼吸也是如此。

> 我在做什么有可能吗？

是的。

> 如果是，那么这种链接必须遵循什么结构/语法？

[http://www.this-so-does-not-exist.com/something](http://www.this-so-does-not-exist.com/something)可以很好地启动[这个示例应用程序](https://github.com/commonsguy/cw-advandroid/tree/master/Introspection/URLHandler)，通过以下方式`<intent-filter>`：

```
 <intent-filter>
    <action android:name="android.intent.action.VIEW" />
    <category android:name="android.intent.category.DEFAULT" />
    <category android:name="android.intent.category.BROWSABLE" />
    <data android:scheme="http" android:host="www.this-so-does-not-exist.com" android:path="/something" />
  </intent-filter> 
```

您会注意到此 URL 导致了 404，这表明您实际上不需要花任何钱来使此技术起作用。另请注意，此技术已在 StackOverflow 上的几个地方和其他地方的许多地方编写。

但是，`intent:`Gmail 似乎没有采用该方案，即使在 HTML 电子邮件中使用时也是如此。`

# php - 在cake php中获取上传文件的扩展名

> ID：11031567
> 
> 赞同：0
> 
> 时间：2012-06-14T10:53:32.993
> 
> 标签：php, cakephp, file-upload, file-extension, cakephp-2.1

我正在使用 cakephp 2.1，我正在尝试上传文件，如何检索文件的扩展名。

## 数据库/用户

```
Id Auto_Increment
username
file_name 
```

## 控制器/UsersController.php

```
public function register(){
            if ($this->request->is('post')){
                $filename = $this->data['User']['file_name']['name'];
                //$temp_ext = $this->data['User']['resume_file']['ext'];

                $this->Session->setFlash('Extension : ' . $temp_ext);
            }
} 
```

当尝试上面的代码时，得到扩展。它只给出像 L 这样的单个字母，即文件名的第一个字符，而不是扩展名

现在我怎样才能得到文件的扩展名..我通过这个链接

```
http://api.cakephp.org/class/file 
```

但无法理解检索文件。

* * *

**向@Julian Hollmann 添加调试报告**

```
array(
    'User' => array(
        'file_name' => array(
            'name' => '550992_234300256686731_213914803_n.jpg',
            'type' => 'image/jpeg',
            'tmp_name' => 'D:\xampp\tmp\php866F.tmp',
            'error' => (int) 0,
            'size' => (int) 42292
        )
    )
) 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-14T12:07:21.177

首先，您的数据应该在`$this->request->data`

如果你想看看里面有什么，就去做`debug($this->request->data);`

**编辑：** 正确答案是：

```
$filename = $this->request->data['User']['file_name']['name'];
$extension = pathinfo($filename, PATHINFO_EXTENSION); 
```

另见[php 手册](http://php.net/manual/en/function.pathinfo.php)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-14T12:39:16.390

```
$filename = $this->data['User']['file_name']['name'];
$this->request->data['User']['file_name'] = $filename;

$fileExt = explode(".", $filename);
$fileExt2 = end($fileExt); 
```

试试这个...它会给你扩展

# jquery - 在 div 中定位元素

> ID：11031568
> 
> 赞同：0
> 
> 时间：2012-06-14T10:53:36.223
> 
> 标签：jquery, html, css, positioning

```
<td id="name_3869-0_0" style="position: relative; " colspan="4">
    <div style="float:left;width:100%">
        <img src="/img/1.gif" align="middle" style="margin-right: 10px;" class="company_symbol" border="0">
        <strong style="margin: auto 5px auto auto; ">yyyy</strong>
        <a href="#"><span title="xxxx">xxxx</span></a>
        <span class="mm_msg_ident"><img onclick="mm_Msg.sel('[1]730228')" src="/view/new_design/img/msg_unchecked.gif" border="0" align="top" alt="Private message to the owner of subdivision" title="Private message to the owner of subdivision"></span>
        <span><a href="#" title="Cancel the contract" alt="Cancel the contract" onclick="return contractDestroy(1510428, 'xxxxx')"><img src="/img/smallX.gif" alt="Cancel the contract" border="0" align="top" style="margin-right: 1px"></a></span>
        <input type="hidden" name="supplyContractData[selected][]" value="1510428">
    </div>
</td> 
```

我需要确保两个跨度（一个具有 mm_msg_ident 类，一个紧随其后）始终位于 div 的右上角。问题是 div 的大小是可变的，并且必须保持可变。我可以访问 jquery 1.6.4。关于如何设计这些元素的样式以实现这一目标的任何建议？

编辑：假设所关注的两个跨度各有 20x20 的大小。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T11:02:06.263

设置`position: relative;`并`<div>`给它一个类，例如`container`

然后在你的CSS中：

```
.container span {
    position: absolute;
    top: 0;
    right: 0;
}
.mm_msg_ident {
    right 20px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T11:03:59.493

嘿，现在只需在你的 CSS 中添加一个属性，就像这样

```
.wrapper:hover .description {
    cursor: pointer;
    display: block;
} 
```

* * *

* * *

嘿，现在你可以像这样在没有 jquery 的情况下做到这一点

**CSS**

```
.wrapper {
    background-color: #FFFFFF;
    border: 1px solid #0D5A2C;
    height: 250px;
    margin: 0 auto;
    padding: 8px;
    position: relative;
    width: 250px;
}

.description {
    background-color: #000000;
    color: #FFFFFF;
    display: none;
    font-size: 1em;
    left:8px;
    right:8px;
    top:8px;
    bottom:8px;
    padding: 120px 0 0;
    position: absolute;
    text-decoration: none;
    text-align:center;
}
.wrapper:hover .description{
display:block;
} 
```

**HTML**

```
<div class="wrapper">
<img alt="Hamster on Swing" src="http://www.webdesignlondon-tristar.co.uk/tutorials/jquery/imagedivrollover/hamster.jpg">

<a class="description" title="Click for More" href="#">
<img alt="Search" src="http://www.webdesignlondon-tristar.co.uk/tutorials/jquery/imagedivrollover/search.png">Want to read more?
</a>

</div> 
```

现场演示[http://jsfiddle.net/svkQx/1/](http://jsfiddle.net/svkQx/1/)

* * *

如果你现在想要不透明度而不是习惯

只需在您的 css 代码中替换一个 css

```
.description {
    background:rgba(0,0,0,0.7);
} 
```

不透明的现场演示[http://jsfiddle.net/svkQx/2/](http://jsfiddle.net/svkQx/2/)

# java - xvfb 与硒。显示器已在使用错误

> ID：11031581
> 
> 赞同：1
> 
> 时间：2012-06-14T10:54:21.980
> 
> 标签：java, linux, selenium, headless, xvfb

我想在不显示的情况下在 Linux 服务器上使用 Maven 从 TeamCity 运行硒测试。

在运行 Selenium 测试时，我在 TeamCity 中收到以下错误：

```
Failed to execute goal org.codehaus.mojo:selenium-maven-plugin:2.3:xvfb (xvfb) on project my-project:
It appears that the configured display is already in use: :1 
```

我安装了 x11-fonts*、xvfb、firefox，提取了 DISPLAY=localhost:1，启动了 xvfb

在 pom.xml 我添加了以下插件：

```
 <plugin>
                    <groupId>org.codehaus.mojo</groupId>
                    <artifactId>selenium-maven-plugin</artifactId>
                    <version>2.3</version>
                    <executions>
                        <execution>
                            <id>xvfb</id>
                            <phase>pre-integration-test</phase>
                            <goals>
                                <goal>xvfb</goal>
                            </goals>
                            <configuration>
                                <display>:1</display>
                            </configuration>
                        </execution>

                        <execution>
                            <id>selenium</id>
                            <phase>pre-integration-test</phase>
                            <goals>
                                <goal>start-server</goal>
                            </goals>
                            <configuration>
                                <background>true</background>
                            </configuration>
                        </execution>
                    </executions>
                </plugin> 
```

您对如何解决此问题有任何想法吗？

**UPD：** xvfb 正在使用命令运行

```
Xvfb :1 -screen 0 1920x1200x24 > /dev/null 2>&1 & 
```

**UPD：**在我尝试在运行测试之前不运行 xvfb 之前，但得到：

```
Execution xvfb of goal org.codehaus.mojo:selenium-maven-plugin:2.3:xvfb failed: Execute failed: java.io.IOException: Cannot run program "xauth": java.io.IOException: error=2, No such file or directory 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T11:00:47.313

错误消息告诉您已经有一个 X 服务器在 1 号显示器上运行。根据您的说法：

> 我安装了 x11-fonts*、xvfb、firefox，解压 DISPLAY=localhost:1，启动 xvfb ...我添加了以下插件

似乎您启动了一个服务器，然后插件尝试再次启动它（应该如此）。我会尝试*不*事先启动 xvfb （确保它不运行）。

或者干脆去掉插件配置中的显示编号，它会尝试寻找一个空闲的显示编号。不过，它不会使用*您的*xvfb 实例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T05:09:15.427

我从 pom.xml 中删除了插件声明（据了解它是用于以前版本的 Selenium），安装了 xauth（不确定是否有必要），一切都开始工作了。

# c# - 如何将 scorm 集成到 LMS（共享点）

> ID：11031587
> 
> 赞同：0
> 
> 时间：2012-06-14T10:54:35.457
> 
> 标签：c#, asp.net, sharepoint, integration, scorm

我有一个用 Sharepoint 和 c# 编码的 LMS。我想使用 scorm，但我对 scorm 和 scorm 集成一无所知。我也希望它可以在移动设备上播放。关于scorm 我应该知道什么？任何人都可以对此进行解释或提供一些建议吗？或者有没有关于这个的文件？我真的对此一无所知，这就是为什么我想要一个文件一步一步。此外，我真的不想使用 Flash、Flash 内容或 Flash 播放器等。

感谢所有的答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T13:36:36.003

深入了解 SCORM 是什么以及它如何工作的最佳地点是 scorm.com 的[SCORM Explained](http://scorm.com/scorm-explained/)部分

Microsoft 发布了一个包含基本 SCORM 播放器的 Sharepoint 学习工具包。我听到的评论褒贬不一，但如果您只是在寻找基础知识，这可能不是一个糟糕的解决方案。

如果这不适合您，那么[SCORM Cloud](http://scorm.com/scorm-solved/scorm-cloud-features/)就是我接下来要看的地方。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T16:00:29.633

这是一个可能对[http://slk.codeplex.com/有所帮助的学习工具包](http://slk.codeplex.com/)

# postgresql - 比较 PostgreSQL 中的文本值

> ID：11031588
> 
> 赞同：6
> 
> 时间：2012-06-14T10:54:35.813
> 
> 标签：postgresql, select, conditional-statements

说，有两张桌子。一个包含具有长文本值的字段（例如`foobarbaz`），另一个包含较短的值（`foobar`和`someothertext`）。我想从具有以下条件的两个表中检索值：文本不能相等，但长字符串的开头必须与短字符串匹配。在 Postgres 中是否有一种（简洁的）方法可以做到这一点？提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T11:11:19.420

怎么样：

```
SELECT <whatever>
  FROM <your tables>
 WHERE one_field <> the_other_field
   AND position(the_other_field in one_field) = 1; 
```

请参阅[字符串函数和运算符](http://www.postgresql.org/docs/9.1/static/functions-string.html)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-14T11:13:58.507

正如另一个答案所说，可以使用“位置”......但我会使用正则表达式。

```
postgres=> create database test;
CREATE DATABASE
postgres=> \c test
You are now connected to database "test".
test=> create table long (long varchar);
CREATE TABLE
test=> create table short (short varchar);
CREATE TABLE
test=> insert into long values ('foobarbaz');
INSERT 0 1
test=> insert into long values ('qfoobarbaz');
INSERT 0 1
test=> insert into long values ('now this is a long text');
INSERT 0 1
test=> insert into short values ('foobar');
INSERT 0 1
test=> insert into short values ('someothertext');
INSERT 0 1
test=> select long.long from long join short on long.long <> short.short and long.long ~ ('^' || short.short);
   long    
-----------
 foobarbaz
(1 row) 
```

警告，short 可能必须被转义以防它包含正则表达式的东西。

（后期编辑） - 这是使用 LIKE 时的样子（未测试）：

```
select long.long 
from long 
join short on 
    long.long <> short.short and 
    long.long LIKE (short.short || '%'); 
```

# android - 如何获得拨出电话连接状态

> ID：11031590
> 
> 赞同：3
> 
> 时间：2012-06-14T10:54:43.943
> 
> 标签：android, telephony

在我的应用程序开发中，我需要在拨出电话连接时做振动，但我无法获得电话应答状态。我已阅读有关此问题的一些主题，例如： [拨出电话状态](https://stackoverflow.com/questions/2099782/outgoing-call-status)

但实际上，这些问题并没有得到正确的回答。使用 BroadcastReceiver 只能接收空闲、摘机、振铃状态，而不能接收活动状态。

在内部框架的 Call.java 中定义的活动状态，我不知道如何获得这个状态。我确实使用了反射方法，几乎​​与[https://stackoverflow.com/questions/5652660/accessing-callmanager-in-android](https://stackoverflow.com/questions/5652660/accessing-callmanager-in-android)相同，但也失败了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T12:24:19.040

我从未尝试过拨出电话，但在拨入电话时，您可以使用您提到的三种状态。

1.  STATE_RINGING：呼叫正在响铃。
2.  STATE_OFF_HOOK：如果之前的状态是 RINGING，则呼叫已连接。
3.  STATE_IDLE：如果上一个状态是 RINGING：呼叫被拒绝。如果上一个状态是 OFF_HOOK 呼叫连接然后断开连接（即完成）。

我有这个实现来电的代码。既然您提到您也可以在拨出电话中访问这些状态，我认为这也适用于拨出电话。如果你愿意，我可以发布我的代码。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-14T11:34:19.053

在网上思考并花了很多时间之后，我找到了实现这一目标的方法......

只需根据您上次拨打电话的时间查询设备的通话记录，获取该通话的持续时间，如果发现大于 0，则表示您的通话已被接受并且工作正常。

如果有人无法得到它，让我知道我会用代码详细说明它。

# tridion - 在 SDL Tridion 2011 SP1 的架构中设计 Tridion 中的动态下拉菜单

> ID：11031592
> 
> 赞同：3
> 
> 时间：2012-06-14T10:55:04.083
> 
> 标签：tridion, tridion-2011

我正在 SDL Tridion 2011 SP1 中创建模式。我打击了一件事。

我必须向用户显示三个下拉菜单。

1.  列表：国家
2.  列表：状态
3.  列表：位置

如果用户在下拉列表中选择一个国家，则需要根据它填充州。根据所选状态，我必须填充位置。

我想通过类别来实现。

1.  为国家/地区创建类别
2.  在每个国家/地区创建了国家作为抽象关键字。
3.  在每个州作为普通关键字创建位置作为普通关键字。

任何人都可以建议如何实现以下目标：

1.  我将有三个下拉菜单，分别是国家、州、地点。
2.  如果用户选择任何国家，则应相应地填充州，并且应根据所选州填充位置。

我需要对 tridion 进行任何自定义还是可以直接在 Tridion 中实现？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T12:13:55.670

你真的需要选择国家和州吗？如果从分类结构中选择 Location 关键字，则间接选择 Country 和 State。我会将其实现为单个树型关键字字段。

例如选择“Dallas”，这意味着您选择了“Texas”和“USA”

这样你只需要一个字段。在 CME 中，您将看到能够通过包含子关键字查看针对 USA 分类的项目，并且在内容交付方面，您将能够查询内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T11:05:14.797

> 我是否需要对 tridion 进行任何自定义...

是的。如果您希望在组件编辑屏幕中实现这种精确行为，则需要在 GUI 扩展中实现它。

# java - 组 REGEX 的向左贪婪

> ID：11031594
> 
> 赞同：0
> 
> 时间：2012-06-14T10:55:05.237
> 
> 标签：java, regex, regex-greedy

下一个正则表达式表示任何 1 到 3 位数字的可选组以及 4 个非空白字符的任何可选组。

```
^([\d]{1,3})?(\S{4})?$ 
```

我的问题是，如果我输入 444EEE，Java 将其匹配为 44 + 4EEE，而不是首先将第一组匹配为 444 并退出，因为尾随 EEE 不是由 4 个字符组成的。那么如何避免最后一组的向左贪婪，所以倒数第二个首先消耗。是“？+”

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T11:08:24.927

采用

```
boolean foundMatch = subjectString.matches("(\\d{0,3}+)(\\S{4})"); 
```

`+`量词之后的额外`{0,3}`内容告诉正则表达式引擎不要回溯到第一组（所谓的[所有格量词](http://www.regular-expressions.info/possessive.html)）。

# sql - SQL 表值函数优化/改进

> ID：11031595
> 
> 赞同：1
> 
> 时间：2012-06-14T10:55:07.237
> 
> 标签：sql, sql-server

我们有一个查询需要很长时间才能完成一个大型数据集。我想我已经将它追踪到 SQL 服务器中的表值函数。

该查询旨在返回两个日期之间的打印使用差异。因此，如果打印机在日期 x 使用 100，在日期 ya 使用 200，则需要返回行，这反映了它的使用更改为 100。

这些读数会定期（但不是每天）采集并存储在名为 MeterReadings 的表中。表值函数的代码如下。然后从另一个 SQL 查询中调用它，该查询将设备表上的返回表与内部连接连接起来，以获取额外的设备信息。

任何有关如何优化以下内容的建议将不胜感激。

```
ALTER FUNCTION [dbo].[DeviceUsage]
-- Add the parameters for the stored procedure here
( @StartDate DateTime , @EndDate DateTime )
RETURNS table
AS
RETURN
(

SELECT      MAX(dbo.MeterReadings.ScanDateTime) AS MX,
        MAX(dbo.MeterReadings.DeviceTotal - reading.DeviceTotal) AS TotalDiff, 
        MAX(dbo.MeterReadings.TotalCopy - reading.TotalCopy) AS CopyDiff,
        MAX(dbo.MeterReadings.TotalPrint - reading.TotalPrint) AS PrintDiff,
        MAX(dbo.MeterReadings.TotalScan - reading.TotalScan) AS ScanDiff,
        MAX(dbo.MeterReadings.TotalFax - reading.TotalFax) AS FaxDiff,
        MAX(dbo.MeterReadings.TotalMono - reading.TotalMono) AS MonoDiff,
        MAX(dbo.MeterReadings.TotalColour - reading.TotalColour) AS ColourDiff, 
        MIN(reading.ScanDateTime) AS MN, dbo.MeterReadings.DeviceID

FROM        dbo.MeterReadings INNER JOIN (SELECT * FROM dbo.MeterReadings WHERE     
        (dbo.MeterReadings.ScanDateTime > @StartDate) AND 
        (dbo.MeterReadings.ScanDateTime < @EndDate) ) 
        AS reading ON dbo.MeterReadings.DeviceID = reading.DeviceID

WHERE       (dbo.MeterReadings.ScanDateTime > @StartDate) AND (dbo.MeterReadings.ScanDateTime < @EndDate)

GROUP BY    dbo.MeterReadings.DeviceID); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T11:04:25.817

您的查询似乎计算每个特定设备的时间范围内所有读数的叉积。这在语义上有效，因为 MIN 和 MAX 聚合不关心重复。但这非常慢。如果您将 100 个日期与其自身进行比较，则需要处理 10,000 行。

我建议您计算整个时间间隔内每个指标/列的 MIN 和 MAX 值，然后减去它们。这样你就不需要加入，你需要单次传递数据。像这样：

```
select Diff = MAX(col) - MIN(col)
from readings
group by DeviceID 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T11:19:22.247

假设一个值只能随着时间的推移而增加，它当然可以被简化。

```
SELECT
  DeviceID,
  MIN(ScanDateTime)                      AS MN,
  MAX(ScanDateTime)                      AS MX,
  MAX(DeviceTotal ) - MIN(DeviceTotal)   AS TotalDiff,
  MAX(TotalCopy   ) - MIN(TotalCopy  )   AS CopyDiff,
  MAX(TotalPrint  ) - MIN(TotalPrint )   AS PrintDiff,
  MAX(TotalScan   ) - MIN(TotalScan  )   AS ScanDiff,
  MAX(TotalFax    ) - MIN(TotalFax   )   AS FaxDiff,
  MAX(TotalMono   ) - MIN(TotalMono  )   AS MonoDiff,
  MAX(TotalColour ) - MIN(TotalColour)   AS ColourDiff
FROM
  dbo.MeterReadings
WHERE
      ScanDateTime > @StartDate
  AND ScanDateTime < @EndDate
GROUP BY
  DeviceID 
```

这假设如果您阅读日期`1, 3, 5, 7, 9`并且想要报告，`2 -> 8`那么您想要`reading 7`- `reading 3`。我会以为你想要`reading 7`- `reading 1`？

上述查询对于相对较小的范围应该没问题。如果您的时间范围很大，`MAX() - MIN()`则将在大量行上运行。然后可以通过以下方式进一步改进这一点（使用相关的子查询来查找您想要的两行）。

作为一个附带的好处，即使值可以上下波动，这也有效。

*（我假设存在一个 Device 表以获得更简单的查询和更快的性能。）*

```
SELECT
  Device.DeviceID,
  start.ScanDateTime                      AS MN,
  finish.ScanDateTime                     AS MX,
  finish.DeviceTotal - start.DeviceTotal  AS TotalDiff,
  finish.TotalCopy   - start.TotalCopy    AS CopyDiff,
  finish.TotalPrint  - start.TotalPrint   AS PrintDiff,
  finish.TotalScan   - start.TotalScan    AS ScanDiff,
  finish.TotalFax    - start.TotalFax     AS FaxDiff,
  finish.TotalMono   - start.TotalMono    AS MonoDiff,
  finish.TotalColour - start.TotalColour  AS ColourDiff
FROM
  dbo.Device                 AS device
INNER JOIN
  dbo.MeterReadings          AS start
    ON  start.DeviceID = device.DeviceID
    AND start.ScanDateTime = (SELECT MIN(ScanDateTime)
                                FROM dbo.MeterReadings
                               WHERE DeviceID = device.DeviceID
                                 AND ScanDateTime > @startDate
                                 AND ScanDateTime < @endDate)
INNER JOIN
  dbo.MeterReadings          AS finish
    ON  finish.DeviceID     = device.DeviceID
    AND finish.ScanDateTime = (SELECT MAX(ScanDateTime)
                                FROM dbo.MeterReadings
                               WHERE DeviceID = device.DeviceID
                                 AND ScanDateTime > @startDate
                                 AND ScanDateTime < @endDate) 
```

如果需要，这也可以修改为将开始日期作为@startDate 或之前的第一个日期。

**编辑：**修改以将开始读数选择为@startDate 上或之前的第一个日期。

```
SELECT
  Device.DeviceID,
  start.ScanDateTime                                                AS MN,
  finish.ScanDateTime                                               AS MX,
  COALESCE(finish.DeviceTotal, 0) - COALESCE(start.DeviceTotal, 0)  AS TotalDiff,
  COALESCE(finish.TotalCopy  , 0) - COALESCE(start.TotalCopy  , 0)  AS CopyDiff,
  COALESCE(finish.TotalPrint , 0) - COALESCE(start.TotalPrint , 0)  AS PrintDiff,
  COALESCE(finish.TotalScan  , 0) - COALESCE(start.TotalScan  , 0)  AS ScanDiff,
  COALESCE(finish.TotalFax   , 0) - COALESCE(start.TotalFax   , 0)  AS FaxDiff,
  COALESCE(finish.TotalMono  , 0) - COALESCE(start.TotalMono  , 0)  AS MonoDiff,
  COALESCE(finish.TotalColour, 0) - COALESCE(start.TotalColour, 0)  AS ColourDiff
FROM
  dbo.Device                 AS device
LEFT JOIN
  dbo.MeterReadings          AS start
    ON  start.DeviceID = device.DeviceID
    AND start.ScanDateTime = (SELECT MAX(ScanDateTime)
                                FROM dbo.MeterReadings
                               WHERE DeviceID = device.DeviceID
                                 AND ScanDateTime < @startDate)
LEFT JOIN
  dbo.MeterReadings          AS finish
    ON  finish.DeviceID     = device.DeviceID
    AND finish.ScanDateTime = (SELECT MAX(ScanDateTime)
                                FROM dbo.MeterReadings
                               WHERE DeviceID = device.DeviceID
                                 AND ScanDateTime < @endDate) 
```

# codeigniter - 如何在codeigniter中使用重定向显示验证错误？

> ID：11031596
> 
> 赞同：17
> 
> 时间：2012-06-14T10:55:11.370
> 
> 标签：codeigniter, validation, codeigniter-2, validationerror

我一直在处理一个问题。如何在函数中使用重定向设置验证错误？这是我在控制器中的代码：

```
function send()
{
    $this->form_validation->set_rules('e-mail', 'Email', 'trim|required|valid_email');
    $this->form_validation->set_rules('cellphone', 'Cellphone Number', 'trim|required|is_natural');
    $this->form_validation->set_message('required', '%s is required.');
    $this->form_validation->set_message('valid_email', '%s is not a valid Email Address');
    $this->form_validation->set_message('is_natural', '%s can only contain numbers.');
    $this->form_validation->set_error_delimiters('<li>', '</li>');

    if($this->form_validation->run() == FALSE)
    {
        redirect ('/');
    }
    else
    {
        echo '<pre>';
        print_r($_POST);
        echo '<pre>';
    }
} 
```

这是我在视图文件中使用的代码：

```
<? if (validation_errors())
{   
echo '<div id="validation_errors" title="Error:">';
echo '<div class="response-msgs errors ui-corner-all"><span>Errors:</span><br /><ul>';
echo validation_errors();
echo '</ul></div>';
echo '</div>';
}
?> 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-06-14T17:17:36.703

我找到了方法。重定向不会保留要显示的数据。我使用下面的代码来解决问题：

```
if($this->form_validation->run() == FALSE)
{
    $this->index();
} 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2015-01-15T14:09:52.057

我知道这有点晚了，但这种方法对我来说很有效。

如果您在与加载表单的函数不同的函数中验证表单，则可以通过传递方法将您的表单发送到您`validation_errors()`的任何页面，如下所示：`redirect()``validation_errors()``$this->session->set_flashdata()`

```
if ($this->form_validation->run() == FALSE) {

    $this->session->set_flashdata('error', validation_errors());

    redirect('/');
} 
```

在您希望接收错误或消息的控制器函数中，您可以将它们设置为`$data`数组，如下所示：

```
if (!empty($this->session->flashdata('message'))) {

    $data['message'] = $this->session->flashdata('message');
} elseif (!empty($this->session->flashdata('error'))) {

    $data['error'] = $this->session->flashdata('error');
} 
```

在我的观点中，我通常包括：

```
<?php if (isset($message)) {

    echo '<p class="alert alert-info">'.$message.'</p>';
} elseif (isset($error)) {

    echo '<p class="alert alert-danger"><strong>Error: </strong>'.$error.'</p>';
}?> 
```

使用 twitter 引导类来格式化消息有助于区分它们。

我包含了`message`flashdata，以便您可以查看要发送的任何类型的消息或错误，您可以为所有信息、警告、成功和错误消息设置不同的格式。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-14T11:14:07.227

根据我的评论：

```
function index()
{
    $this->load->library('form_validation');
    $data = array
    (
        'Param' => 'Value'
    );
    if($this->input->post('cellphone', true) !== false)
    {
        if($this->form_validation->run() != FALSE)
        {
            echo '<pre>' . print_r($_POST, true) . '</pre>';
        }
    }
    $this->load->view('index', $data);
} 
```

首先，您需要更改表单，使其指向当前页面，即`current_url()`或`site_url('controller/index')`。

当您`index`不发帖时，它只会跳过验证。提交表单后，它将运行验证。

然后，您可以使用内置方法`form_error`或方法在视图`validation_errors`中显示错误。`index`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-19T09:34:58.063

最后我得到了一个带有validation_errors的重定向解决方案

这是用来传递会话数据中的validation_errors，我这样做

```
if ($this->form_validation->run()) {
        $data = array(
            'email' => $this->input->post('email'),
            'is_login' => true
        );
        $this->session->set_userdata($data);
        redirect($this->input->post('redirect'));
    }
    else
    {
        $data = array (
            'errors' => validation_errors(),
            'is_login' => false
        );
        $this->session->set_userdata($data);
        redirect($this->input->post('redirect'));
    } 
```

在我使用的页面中

```
 $this->session->set_flashdata('redirectToCurrent', current_url());

    if ($this->session->userdata('is_login'))
    {
        echo "You are using this as : </br>" . $this->session->userdata('email');
        echo "</br><a href='/logout'>Logout</a>";
    }
    else
    {
        echo form_open('login');
        echo "" . $this->session->userdata('errors');
        echo "email : " . form_input('email');
        echo "Password : " . form_password('password');
        echo form_submit('submit', 'Login');
        echo form_hidden('redirect',$this->uri->uri_string());
        echo form_close();
    } 
```

我希望你喜欢这个快速的解决方案

# java - 导入由 Sparx Enterprise Architect 导出的 XMI 文件 - EAJAVA... 类型

> ID：11031598
> 
> 赞同：0
> 
> 时间：2012-06-14T10:55:18.197
> 
> 标签：java, eclipse, uml, eclipse-emf, xmi

有没有办法处理 EAJAVA_.. Eclipse emf 插件中的 EAJAVA_INT 等类型？

导入 xmi 文件时抛出异常：

org.eclipse.emf.ecore.xmi.UnresolvedReferenceException：未解析的引用“EAJava_int”。

提前谢谢了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T21:43:19.417

针对类似问题提出了建议：[如何将 SysML 模型（XMI 格式）导入 Papyrus？](https://stackoverflow.com/questions/5651380/how-do-i-import-a-sysml-model-in-xmi-format-to-papyrus)

这种方法需要创建一个新的*EMF*项目，并在该项目的创建过程中导入一个 XMI 文件。我正在使用 Eclipse Juno，但我没有看到当前 EMF 捆绑包出现该选项。

我读过[Papyrus 目前不支持 XMI 导入](http://www.eclipse.org/forums/index.php/mv/msg/238299/813124/)。

作为替代方案，对于 Eclipse 平台中的 UML 建模，有显然基于 Eclipse的[Modelio（可用免费版） 。](http://sourceforge.net/projects/modeliouml)[Modelio 通过添加特定的 Modelio 模块支持 XMI 导入/导出](http://archive.modeliosoft.com/en/support/forum/1-general/545-the-modelio-free-xmi-exportimport-feature.html)。

我对 Modelio 的唯一担心是，虽然它似乎基于 Eclipse，但它并不通过更新站点安装 - 必须安装整个 Modelio 包，并将其与主 Eclipse IDE 分开维护。至少，它是 Eclipse IDE 中 UML 建模的免费替代方案，可以支持 XMI 导入/导出。还有[一个可用的视频教程，演示如何在同一个项目中同时使用 Eclipse 独立和 Modelio。](http://archive.modeliosoft.com/video/tutorial-1.2.html)

我在尝试回答我自己遇到的类似问题时发现了这个问题。我正在研究在项目中使用[Sparx Systems XSD Datatypes Package](http://www.sparxsystems.com/uml_tool_guide/xml_technologies/xsd_datatype_package.htm)的想法。Sparx Systems 的该软件包以 XMI 格式提供。这是一个信息丰富的过程，以确定答案，我想我也可以分享我的发现。我想我很快就会切换到 Modelio。希望能帮助到你 ;）

# vb.net - VB.NET 定时器间隔 1 = 1 毫秒？

> ID：11031600
> 
> 赞同：0
> 
> 时间：2012-06-14T10:55:24.363
> 
> 标签：vb.net, timer, milliseconds

我有一个间隔 = 1 的计时器

间隔 1 = 1 毫秒？

如果间隔 1 不是 1 毫秒，
那么告诉我哪个控制间隔 = 1 毫秒

代码：

```
Imports System.Globalization

Public Class Form1
    'Default Time To Start From
    Dim time As String = "00:00:00,000" 'Start From Here

    'Label
    Private Sub Label1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Label1.Click
        Timer1.Start() 'Run The Timer On Click
    End Sub

    'TIMER
    Private Sub Timer1_Tick(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Timer1.Tick

        'Timer Interval = 1

        Dim ci = CultureInfo.InvariantCulture

        Dim original As TimeSpan = TimeSpan.ParseExact(time, "hh\:mm\:ss\,fff", ci) 'ParseExact

        Dim difference As TimeSpan = TimeSpan.FromMilliseconds(1) ' = 1  Millisecond

        Dim final = original

        final = original + difference ' connect between original to difference !(00:00:00,000 + 1 MS = 00:00:00,001)!

        Dim output As String = final.ToString("hh\:mm\:ss\,fff", ci) 'convert to the format (  = 00:00:00,001  ) (Back It To The Right Format)

        time = output '!!Update!! the Time String from 00:00:00,000 To 00:00:00,001 |||| And in the Next Time 00:00:00,001 + 1 = 00:00:00,002

        Label1.Text = time 'Show the Time String in the label

    End Sub

End Class 
```

如您所见-我使用间隔为 1 的**常规计时器**
，但我认为它已磨损，因为

如果您有建议，计时器不计算毫秒，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T11:04:59.623

来自 MSDN 的区间属性的描述是：

> 获取或设置在引发 Tick 事件之前相对于最后一次发生 Tick 事件的时间（以毫秒为单位）。

然而（正如史蒂夫在他的评论中指出的那样）：

> Windows 窗体计时器组件是单线程的，精度限制为 55 毫秒。如果您需要更准确的多线程计时器，请使用 System.Timers 命名空间中的 Timer 类

取自[http://msdn.microsoft.com/en-us/library/system.windows.forms.timer.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.timer.aspx)

`System.Timers.Timer`所指的类在此处描述：http: [//msdn.microsoft.com/en-us/library/system.timers.timer.aspx](http://msdn.microsoft.com/en-us/library/system.timers.timer.aspx)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2017-09-20T12:09:46.950

```
 Imports System.Globalization

Public Class Form1
    Dim time As String = "00:00:00:00"
    Private Sub Form1_Load(sender As Object, e As EventArgs) Handles MyBase.Load

    End Sub

    Private Sub Button1_Click(sender As Object, e As EventArgs) Handles Button1.Click
        Timer1.Start()
    End Sub

    Private Sub Timer1_Tick(sender As Object, e As EventArgs) Handles Timer1.Tick

        Dim ci = CultureInfo.InvariantCulture

        Dim original As TimeSpan = TimeSpan.ParseExact(time, "dd\:hh\:mm\:ss", ci) 'ParseExact

        Dim difference As TimeSpan = TimeSpan.FromSeconds(1) ' = 1  Millisecond

        Dim final = original

        final = original + difference ' connect between original to difference !(00:00:00,000 + 1 MS = 00:00:00,001)!

        Dim output As String = final.ToString("dd\:hh\:mm\:ss", ci) 'convert to the format (  = 00:00:00,001  ) (Back It To The Right Format)

        time = output '!!Update!! the Time String from 00:00:00,000 To 00:00:00,001 |||| And in the Next Time 00:00:00,001 + 1 = 00:00:00,002

        Label1.Text = time 'Show the Time String in the label

    End Sub
End Class 
```

这是工作脚本。IDK 为什么它有效，但它有效！:)

# jquery - 使用 jquery 和 css 的图像上的文本

> ID：11031602
> 
> 赞同：3
> 
> 时间：2012-06-14T10:55:27.827
> 
> 标签：jquery, html, css, hover

我正在使用教程[http://www.webdesignlondon-tristar.co.uk/website-design-london/insane-jquery-image-rollover](http://www.webdesignlondon-tristar.co.uk/website-design-london/insane-jquery-image-rollover)。

我想要在翻转时图像褪色/变暗，并且文本显示在教程中。但是由于某种原因，即使在启动空白文档时，我似乎也无法让它工作。

这不是我第一次使用 jquery，所以我很困惑为什么我不能让它工作。

我已经一起使用了所有代码；

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>

<style type="text/css">
.wrapper            { padding: 8px; background-color: #fff; border: 1px #0d5a2c solid; position: relative; width:300; height: 300; margin: 0 auto; }
.wrapper:hover      { cursor: pointer; }
.description        { display: none; background-color: #000; color: #000; position: absolute; left: 8px; top: 8px; text-decoration: none; font-size: 1.5em; width: 250px; height: 130px; padding: 120px 0 0 0; }
.description img    { vertical-align: middle; margin: 0 2px 1px 0; }

</style>

<script src="jquery-1.3.1.min.js" type="text/javascript">
$(document).ready(function(){
    $('.wrapper').hover(function(){
        $(this).children('.description').stop().fadeTo(200, 0.8);
    },function(){
        $(this).children('.description').stop().fadeTo(200, 0);
    });
});
</script>

</head>

<body>
<div class="wrapper">
<img src="http://www.compuhex.co.uk/Version2/products2/blue.PNG" alt="Product 1" />
<a href="#" title="Click for More" class="description">
Want to read more?
</a>
</div>

</body>
</html> 
```

可以在[http://www.compuhex.co.uk/Version2/hovertext/上看到实时链接](http://www.compuhex.co.uk/Version2/hovertext/)

抱歉，如果代码混乱。

感谢所有的帮助家伙

所以总结一下，我想看看为什么代码不起作用，即使它是教程网站的副本。显示的技术正是我想要对我的网站做的事情。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T11:03:34.487

您使用旧版本的 jQuery (1.3.1) 它将按预期工作 (就目前而言) 版本 > 1.4;

[http://jsfiddle.net/dwrUj/](http://jsfiddle.net/dwrUj/)

在您的示例中，您将`ready`代码包装在`<script src=..`元素中，您需要将两者分开，即：

```
<script src="jquery-1.7.2.min.js" type="text/javascript">
    $(document).ready(function(){
    ...
</script> 
```

至：

```
<script src="jquery-1.7.2.min.js" type="text/javascript"></script>
<script type='text/javascript'>
    $(document).ready(function(){
    ...
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T12:25:34.430

将您的代码替换为

```
<script src="jquery-1.3.1.min.js" type="text/javascript"></script>

<script type="text/javascript">

$(document).ready(function(){  

 $('.wrapper').hover(function(){

 $(this).children('.description').stop().show().fadeTo(200, 0.8);
},function(){
    $(this).children('.description').stop().hide().fadeTo(200, 0);
});

  });
</script> 
```

它工作正常..版本不是问题

# php - json无法用php提取孩子

> ID：11031606
> 
> 赞同：-1
> 
> 时间：2012-06-14T10:55:48.500
> 
> 标签：php, json

我尝试从 json 文件中获取两条信息：“Principal”和 WiFiMAC。我需要它来导出名称和 MAC 以导出到数据库中。

```
{
"messages":
          {"message":"150 devices(s) returned."},
           "devices":
                   {"device":
            [
                    {"@id":"121","uuid":"xxx-xxx-xxxxxxxxx-xxx-x-xxxxx","principal":"John Rambo","blockReason":0,"clientId":"anything","compliance":0,"countryCode":49,"countryId":68,"countryName":"Germany","details":
                            [
                            {"entry":[
                                    {"key":"Model","value":"anything"},
                                    {"key":"AvailableDeviceCapacity","value":57.360877990722656},
{"key":"WiFiMAC","value":"123456789012"}]}]}]}} 
```

和更多的键。

我可以像这样提取主体：

```
$json = file_get_contents("test.xml");
$json = json_decode($json);
echo $json->messages->message;
echo $json->devices->device[1]->principal; 
```

但我没有机会提取 WiFiMAC。对于json中的任何设备，我都需要这个，我想我可以用foreach加载每个设备......但第一个是提取WiFiMAC。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T11:04:38.467

已复制您的要求，请访问以下链接： [http ://codepad.org/MhgkTloe](http://codepad.org/MhgkTloe)

```
$ret = json_decode($json, true);
// the principal
echo $ret['devices']['device'][0]['principal'];
// This is the path to WiFiMac
echo $ret['devices']['device'][0]['details'][0]['entry'][2]['key']; 
```

# java - Java 日期到毫秒

> ID：11031608
> 
> 赞同：16
> 
> 时间：2012-06-14T10:55:57.953
> 
> 标签：java, date, time, amazon-web-services

我正在存储来自亚马逊云的消息，并在排序的地图中按时间戳对它们进行排序。

我正在使用以下代码从云中解析时间戳：

```
Date timestamp = new SimpleDateFormat("yyyy-MM-dd'T'hh:mm:ss.SSS'Z'", Locale.ENGLISH).parse(time); 
```

然后我将它们存储在一个排序的地图中，关键是日期。问题是日期只能归结为秒精度。我可以在 1 秒内发送多条消息，因此我需要以毫秒精度对它们进行排序。是否有允许这样做的数据结构？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-06-14T11:03:18.090

好吧，只要您的源具有高于 1 秒的分辨率。从模式看起来像这样，但您没有向我们展示任何输入示例。

`Date``long`自 1970-01-01 以来，它只是一个毫秒左右的包装器。所以你已经有了。`Date.getTime()`将以毫秒精度返回。

为什么你会认为 Date 只有一秒的精度？`Date.compareTo(Date anotherDate)`在毫秒级别上进行比较。所以你的 SortedMap 应该可以正常工作，除非你在做一些奇怪的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T11:04:35.817

我不确定你是否已经这样做了，但你可以创建自己的比较器并使用它。

附带说明一下，根据您的应用程序设置，您可能需要小心使用[SimpleDateFormat](http://karul.org/blog/2012/01/thread-safety-issues-with-java-simpledateformat-clas/)的方式，它存在一些问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-04-06T12:29:05.903

## java.time

我提供了现代答案：使用 java.time，现代 Java 日期和时间 API，为您的日期和时间工作。首先是因为它比旧的日期和时间类（如`Date`和（哦，恐怖））好用得多`SimpleDateFormat`，这些类设计得很糟糕。我们很幸运，它们早已过时。另一个优点是：您的日期时间字符串采用 ISO 8601 格式，java.time 的类将这种格式解析为默认格式，即没有任何显式格式化程序。

```
 String stringFromCloud = "2014-06-14T08:55:56.789Z";
    Instant timestamp = Instant.parse(stringFromCloud);
    System.out.println("Parsed timestamp: " + timestamp); 
```

输出：

> 解析时间戳：2014-06-14T08:55:56.789Z

现在可以清楚地看到字符串已以完整的毫秒精度`Instant`解析（可以以纳秒精度解析，秒数最多为 9 位小数）。`Instant`对象将作为您的`SortedMap`.

极端情况：如果秒 i 的分数为 0，则不打印。

```
 String stringFromCloud = "2014-06-14T08:56:59.000Z"; 
```

> 解析时间戳：2014-06-14T08:56:59Z

您需要相信，当没有打印分数时，那是因为它是 0。`Instant`仍然可以很好地满足您的目的，在分数 .001、.002 等的瞬间之前进行排序。

## 你的解析出了什么问题？

首先，您遇到了一个比错过毫秒更糟糕的问题：您正在解析错误的时区。传入字符串中的尾随`Z`是 0 的 UTC 偏移量，需要这样解析。您的代码中发生的情况是`SimpleDateFormat`使用 JVM 的时区设置而不是 UTC，从而导致长达 14 小时的错误。在大多数情况下，您的排序仍然是正确的。在您当地时区的夏令时 (DST) 转换前后，时间会不明确，因此解析可能不正确，从而导致错误的排序顺序。

正如 Mattias Isegran Bergander 在他的回答中所说，毫秒的解析应该在您的代码中起作用。您不这么认为的原因可能是旧`Date`类的众多设计问题中的一个小问题：即使在内部它具有毫秒精度，但它的`toString`方法只打印秒，它忽略了毫秒。

## 链接

*   [Oracle 教程：日期时间](https://docs.oracle.com/javase/tutorial/datetime/)解释如何使用 java.time。
*   [维基百科文章：ISO 8601](https://en.wikipedia.org/wiki/ISO_8601)

# file - 查找和替换不适用于批处理文件

> ID：11031616
> 
> 赞同：1
> 
> 时间：2012-06-14T10:56:34.757
> 
> 标签：file, batch-file, replace, find

好的，所以我正在使用内置更新程序创建一个脚本，它使用以下代码创建一个新文件并更新几个变量，但由于某种原因，这不起作用任何人都知道如何修复它或类似的脚本做大致相同的事情。

```
@echo off
setlocal enabledelayedexpansion

set /p "findthis"="1"
set /p "replacewith"="1.2.3"
call:updater
set /p "findthis"="2"
set /p "replacewith"="2.3.4"
call:updater
set /p "findthis"="3"
set /p "replacewith"="3.4.5"
call:updater
goto:eof

:updater
for /f "tokens=*" %%a in (updateme.bat) do (

   set write=%%a
   if %%a==%findthis% set write=%replacewith%

   echo !write! 
   echo !write! >>%~n1.replaced%~x1
)
goto:eof 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T12:18:27.367

这个 BAT 有几个错误。

有些是明显的语法错误。

1.  阅读`help set`并更正所有`set /p "this"="value"`（提示：不要使用 /p 选项并更正变量名中“的使用”）

2.  您尝试在 CALLed 标签中使用 %1。这是一个传递的参数，您没有在 CALL 中传递它。阅读`HELP CALL`。

有些是逻辑错误。

1.  :updater 代码将更新后的字符串附加到输出文件中。它这样做了三遍，所以最终的代码是更改字符串后的原始代码的三倍。

2.  此外，代码确实尝试将字符串作为整行查找，BAT 文件中仅包含“1”的行对我来说没有太大意义。您可能希望找到任何出现“1”的文本。

3.  另外，当你修复前面的问题时，如果我正确理解代码的意图，你最终会将所有“1”替换为“1.2.3”，然后将所有“2”替换为“2.3.4”，所以原来的 "1" 将被 "1.2.3.4.3" 取代.. 之后又会被 "1.2.3.4.5.4.3.4.5" 取代。小心点。

# ios - 我可以设置 `UILabel` 的 `attributedText` 属性吗

> ID：11031623
> 
> 赞同：49
> 
> 时间：2012-06-14T10:57:03.927
> 
> 标签：ios, objective-c, nsattributedstring

我可以设置对象的`attributedText`属性`UILabel`吗？我尝试了以下代码：

```
UILabel *label = [[UILabel alloc] init];
label.attributedText = @"asdf"; 
```

但它给出了这个错误：

> 在“UILabel *”类型的对象上找不到属性“attributedText”

`#import <CoreText/CoreText.h>`不工作

* * *

## 回答 #1

> 赞同：203
> 
> 时间：2013-05-30T05:39:17.957

以下是如何在标签上使用属性文本的完整示例：

```
NSString *redText = @"red text";
NSString *greenText = @"green text";
NSString *purpleBoldText = @"purple bold text";

NSString *text = [NSString stringWithFormat:@"Here are %@, %@ and %@", 
                  redText,  
                  greenText,  
                  purpleBoldText];

// If attributed text is supported (iOS6+)
if ([self.label respondsToSelector:@selector(setAttributedText:)]) {

    // Define general attributes for the entire text
    NSDictionary *attribs = @{
                              NSForegroundColorAttributeName: self.label.textColor,
                              NSFontAttributeName: self.label.font
                              };
    NSMutableAttributedString *attributedText = 
        [[NSMutableAttributedString alloc] initWithString:text
                                               attributes:attribs];

    // Red text attributes
    UIColor *redColor = [UIColor redColor];
    NSRange redTextRange = [text rangeOfString:redText];// * Notice that usage of rangeOfString in this case may cause some bugs - I use it here only for demonstration
    [attributedText setAttributes:@{NSForegroundColorAttributeName:redColor}
                            range:redTextRange];

    // Green text attributes
    UIColor *greenColor = [UIColor greenColor];
    NSRange greenTextRange = [text rangeOfString:greenText];// * Notice that usage of rangeOfString in this case may cause some bugs - I use it here only for demonstration
    [attributedText setAttributes:@{NSForegroundColorAttributeName:greenColor}
                            range:greenTextRange];

    // Purple and bold text attributes
    UIColor *purpleColor = [UIColor purpleColor];
    UIFont *boldFont = [UIFont boldSystemFontOfSize:self.label.font.pointSize];
    NSRange purpleBoldTextRange = [text rangeOfString:purpleBoldText];// * Notice that usage of rangeOfString in this case may cause some bugs - I use it here only for demonstration
    [attributedText setAttributes:@{NSForegroundColorAttributeName:purpleColor,
                                    NSFontAttributeName:boldFont}
                            range:purpleBoldTextRange];

    self.label.attributedText = attributedText;
}
// If attributed text is NOT supported (iOS5-)
else {
    self.label.text = text;
} 
```

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2012-06-14T11:04:42.960

~~不幸的是，`UILabel`不支持属性字符串。~~您可以改用[OHAttributedLabel](https://github.com/AliSoftware/OHAttributedLabel)。

*更新：*从 iOS6 开始，`UILabel`确实支持属性字符串。有关更多详细信息，请参阅[UILabel 参考](http://developer.apple.com/library/ios/documentation/uikit/reference/UILabel_Class/Reference/UILabel.html#//apple_ref/occ/instp/UILabel/attributedText)或 Michael Kessler 的回答。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2014-06-11T18:06:36.160

```
NSString *str1 = @"Hi Hello, this is plain text in red";

NSString *cardName = @"This is bold text in blue";

NSString *text = [NSString stringWithFormat:@"%@\n%@",str1,cardName];

// Define general attributes for the entire text
NSDictionary *attribs = @{
                          NSForegroundColorAttributeName:[UIColor redColor],
                          NSFontAttributeName: [UIFont fontWithName:@"Helvetica" size:12]
                          };
NSMutableAttributedString *attributedText = [[NSMutableAttributedString alloc] initWithString:text attributes:attribs];

UIFont *boldFont = [UIFont fontWithName:@"Helvetica-Bold" size:14.0];
NSRange range = [text rangeOfString:cardName];
[attributedText setAttributes:@{NSForegroundColorAttributeName: [UIColor blueColor],
                                NSFontAttributeName:boldFont} range:range];

myLabel = [[UILabel alloc] initWithFrame:CGRectZero];

myLabel.attributedText = attributedText; 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2018-07-03T06:26:03.217

对于斯威夫特 4：

iOS 11 和 xcode 9.4

```
 let str = "This is a string which will shortly be modified into AtrributedString"

  var attStr = NSMutableAttributedString.init(string: str)

  attStr.addAttribute(.font,
                value: UIFont.init(name: "AppleSDGothicNeo-Bold", size: 15) ?? "font not found",
                range: NSRange.init(location: 0, length: str.count))

  self.textLabel.attributedText = attStr 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2015-01-15T07:20:52.160

对于使用 swift 的人，这里有一个单行：

```
myLabel.attributedText = NSMutableAttributedString(string: myLabel.text!, attributes: [NSFontAttributeName:UIFont(name: "YourFont", size: 12), NSForegroundColorAttributeName: UIColor.whiteColor()]) 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2015-01-20T11:41:01.673

所以，这是一个字符串的子字符串具有不同属性的代码。

```
 NSString *str=@"10 people likes this";
    NSString *str2=@"likes this";
    if ([str hasSuffix:str2])
    {
        NSMutableAttributedString * string = [[NSMutableAttributedString alloc] initWithString:str];

    // for string 1 //

        [string addAttribute:NSForegroundColorAttributeName value:[UIColor blueColor] range:NSMakeRange(0,str.length-str2.length)];
         [string addAttribute:NSFontAttributeName value:[UIFont boldSystemFontOfSize:14] range:NSMakeRange(0,str.length-str2.length)];
  // for string 2 //

        [string addAttribute:NSForegroundColorAttributeName value:[UIColor greenColor] range:NSMakeRange((str.length-str2.length),str2.length)];
        [string addAttribute:NSFontAttributeName value:[UIFont italicSystemFontOfSize:12] range:NSMakeRange((str.length-str2.length),str2.length)];
        label.attributedText=string;
    }
    else
    {
        label.text =str;

    } 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-06-14T11:02:02.473

希望这可以帮助 ;）

```
NSMutableAttributedString* attrStr = [NSMutableAttributedString attributedStringWithString:@"asdf"];
[attrStr setFont:[UIFont systemFontOfSize:12]];
[attrStr setTextColor:[UIColor grayColor]];
[attrStr setTextColor:[UIColor redColor] range:NSMakeRange(0,5)];
lbl.attributedText = attrStr; 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-01-05T06:38:39.190

```
UIFont *font = [UIFont boldSystemFontOfSize:12];
NSDictionary *fontDict = [NSDictionary dictionaryWithObject: font forKey:NSFontAttributeName];
NSMutableAttributedString *attrString = [[NSMutableAttributedString alloc] initWithString:@" v 1.2.55" attributes: fontDict];

UIFont *fontNew = [UIFont boldSystemFontOfSize:17];
NSDictionary *fontDictNew = [NSDictionary dictionaryWithObject: fontNew forKey:NSFontAttributeName];
NSMutableAttributedString *attrStringNew = [[NSMutableAttributedString alloc] initWithString:@“Application” attributes: fontDictNew];
[attrStringNew appendAttributedString: attrString];
self.vsersionLabel.attributedText = attrStringNew; 
```

# android - 我可以在同一个活动中使用标签栏和自定义标题栏吗

> ID：11031625
> 
> 赞同：0
> 
> 时间：2012-06-14T10:57:12.133
> 
> 标签：android, tabbar, custom-titlebar

我在同一个活动中有标签栏和自定义标题栏。在静态模式下，我能够在同一个活动中显示标签栏和自定义标题栏。但是当我为自定义标题栏属性分配动态值时，它显示错误为

AndroidRuntimeException：您不能将自定义标题与其他标题功能结合使用请提供任何建议。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T11:02:33.177

尝试：

```
this.getActionBar().setDisplayShowCustomEnabled(true);
this.getActionBar().setDisplayShowTitleEnabled(false);
this.getActionBar().setDisplayUseLogoEnabled(true);

final LayoutInflater inflator = (LayoutInflater)this.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        final View v = inflator.inflate(R.layout.header_bar, null);

        //if you need to customize anything else about the text, do it here.
        //I'm using a custom TextView with a custom font in my layout xml so all I need to do is set title
        ((TextView)v.findViewById(R.id.header_bar_title)).setText(this.getTitle());
        //assign the view to the actionbar
        this.getActionBar().setCustomView(v); 
```

并确保在`setContentView()`方法之前执行此操作。

# castle-windsor - 什么取代了 ASP.NET WebAPI RC 中的 ServiceResolver.GetFilterProviders()？

> ID：11031637
> 
> 赞同：2
> 
> 时间：2012-06-14T10:57:52.787
> 
> 标签：castle-windsor, asp.net-web-api

我有一些代码使用自定义过滤器提供程序在 WebAPI 项目中的操作过滤器上使用 Windsor 执行属性注入。

我只是将它从 WebAPI beta 升级到 WebAPI RC，并且我的容器注册中有一个方法用于读取：

```
container.Register(
  Component
    .For<IEnumerable<IFilterProvider>>()
    .UsingFactoryMethod(
      () => GlobalConfiguration.Configuration.ServiceResolver.GetFilterProviders()
    )
); 
```

这将允许我获取过滤器提供程序的“默认”集合并将其传递给我的自定义过滤器提供程序，这反过来会从每个默认提供程序中检索过滤器，通过属性注入注入任何缺少的依赖项，并返回具有已解决依赖项的过滤器.

在 ASP.NET WebAPI RC 中，ServiceResolver 现在是 DependencyResolver 并且不再具有 GetFilterProviders() 方法 - 我应该使用什么来代替它？

**编辑：**是的，下面的注册语法正在工作 - 例如，它通过了所有单元测试并且似乎没有泄漏内存或任何东西 - 但我不确定显式绑定到 Services.FilterProviders 返回的实例() 是个好主意...

```
var filterProviders = GlobalConfiguration.Configuration.Services.GetFilterProviders();
container.Register(
   Component.For<IEnumerable<IFilterProvider>>().Instance(filterProviders),
   Component.For<IFilterProvider>().ImplementedBy<WindsorFilterProvider>()
); 
```

而且，为了完整起见，WindsorFilterProvider 看起来像这样：

```
public class WindsorFilterProvider : IFilterProvider {
  private readonly IWindsorContainer container;
  private readonly IEnumerable<IFilterProvider> filterProviders;

  public WindsorFilterProvider(IWindsorContainer container, IEnumerable<IFilterProvider> filterProviders) {
    this.container = container;
    this.filterProviders = filterProviders;
  }

  public IEnumerable<FilterInfo> GetFilters(HttpConfiguration configuration, HttpActionDescriptor actionDescriptor) {            
    var filters = filterProviders.SelectMany(fp => fp.GetFilters(configuration, actionDescriptor)).ToList();
    foreach (var filter in filters) container.Inject(filter.Instance);
    return filters;
  }
} 
```

我想问题是 - 这是这样做的好方法，还是我应该使用推荐的方法？

# mysql - 总列和部分列 / 列作为总列

> ID：11031639
> 
> 赞同：0
> 
> 时间：2012-06-14T10:58:02.553
> 
> 标签：mysql, partial

我有下表列出了所有获奖的杯子：

* * *

```
Name: Cups
Columns: Month, Cup, User

Example:
Month | Cup__ | User__
_____ | _____ | ______
Febru | Cup_1 | User_1
Febru | Cup_2 | User_1
March | Cup_1 | User_1
March | Cup_2 | User_2
April | Cup_2 | User_2

*There are only 2 different cups 
```

* * *

我知道如何获得每个用户有多少奖励（COUNT），即使是某种类型（WHERE Cup=Cup_1），但我如何在同一个查询中获得所有这些？

基于上表的示例：

* * *

```
User__ | Total | Cup_1 | Cup_2
______ | _____ | _____ | _____
User_1 | __3__ | __2__ | __1__
User_2 | __2__ | __0__ | __2__

User_1 has 3 cups, 2 of Cup_1 and 1 Cup_2.
User_2 has 2 cups, 2 of Cup_2. 
```

* * *

基本上，总列是其他列的总和。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T11:03:31.383

这有点乏味，但它看起来像这样

```
SELECT User, COUNT(*) AS Total, SUM(IF(Cup = "Cup_1", 1, 0)) AS Cup_1, SUM(IF(Cup = "Cup_2", 1, 0)) AS Cup_2 FROM Cups GROUP BY User 
```

我将 SUM 与条件语句一起使用，以确定杯子是否与我正在寻找的值匹配。如果有匹配则加 1，如果没有则加 0。如前所述，这有点乏味，但它肯定会奏效！

# c# - Linq to XML 查询未获取任何值

> ID：11031640
> 
> 赞同：0
> 
> 时间：2012-06-14T10:58:07.360
> 
> 标签：c#, asp.net, linq, linq-to-xml

我有一个要搜索的 XML 文档。主要结构如下：

```
<?xml version="1.0"?>
<!DOCTYPE ONIXMessage SYSTEM "http://www.editeur.org/onix/2.1/reference/onix-international.dtd">
<ONIXMessage xmlns="http://www.editeur.org/onix/2.1/reference" release="2.1">
  <Header>
    <FromCompany>MyCo</FromCompany>
    <FromPerson>Joe Bloggs</FromPerson>
    <FromEmail>joe@bloggs.com</FromEmail>
    <SentDate>20120522</SentDate>
  </Header>
  <Product>
    <ProductForm>DG</ProductForm>
    <Title>
      <TitleType>01</TitleType>
      <TitleText>Blogg</TitleText>
    </Title>
    <WorkIdentifier>
      <WorkIDType>15</WorkIDType>
      <IDValue>PI3564231</IDValue>
    </WorkIdentifier>
    <Language>
      <LanguageRole>01</LanguageRole>
      <LanguageCode>eng</LanguageCode>
    </Language>
  </Product>
</ONIXMessage> 
```

为了简单起见，它显然被缩短了，但在“产品”标签中，有更多信息。一个文件也可以有任意数量的“产品”标签。

我正在使用 linq to xml 搜索此文档并将内容放入我的数据库中，但是我的问题是我的查询没有在文件中提取任何“产品”标签。这是应该提取产品的代码片段：

```
 XElement onix = XElement.Load(fs);
    // Get all the product information.
    //
    var products = from prod in onix.Elements("Product") select prod;

    foreach (var product in products)
    {
            //Process product
    } 
```

通过代码调试后，我可以看到正在填充变量“onix”。我可以在该变量中看到文件的全部内容。然而，“产品”没有被填充。

谁能看看我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T11:10:33.610

没有命名空间：

```
var products = onix.Descendants()
             .Where(m => m.Name.LocalName == "Product")
             .ToList(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T11:08:41.660

您需要添加命名空间

```
XElement onix = XElement.Load("test.xml");
XNamespace ns = "http://www.editeur.org/onix/2.1/reference";
var products = from prod in onix.Elements(ns+"Product") select prod; 
```

# mysql - 将 LEFT JOIN 与 GROUP BY 结合，同时还包括 NULL

> ID：11031643
> 
> 赞同：1
> 
> 时间：2012-06-14T10:58:11.927
> 
> 标签：mysql, sql, group-by, left-join

我在使用 LEFT JOIN 和 GROUP BY 组合具有一对多映射的表时遇到问题。

我有下表具有唯一 ID（在说明性示例中，这是 house_number）

房屋：

```
|house_number| bedrooms|
|0           | 4       |
|1           | 3       |
|2           | 1       | 
```

而且我想使用唯一 ID 与第二个表进行 LEFT JOIN，其中第二个表可能有也可能没有每个唯一 ID 的多个条目。例如，

住户：

```
| house_number | occupant_id | type    |
| 0            | 3           | 19      |
| 0            | 1           | 20      |
| 0            | 2           | 21      |
| 2            | 7           | 20      | 
```

现在我想要实现的是每个门牌号只有一个条目，但在 LEFT JOIN 中优先考虑类型为 20 的居住者，同时保留那些没有列出任何居住者的房屋，例如，

```
|house_number| bedrooms| occupant_id | type    |
|0           | 4       | 1           | 20      |
|1           | 3       | null        | null    |
|2           | 1       | 7           | 20      | 
```

我可以使用 GROUP BY 来实现每栋房屋只有一个条目，但是，我需要确保与其一起返回的占用行（如果存在）具有`type = 20`.

如果我只使用 a `WHERE (type = 20)`，那么我不会得到 house_number = 1 的返回条目。

我将如何进入决赛桌？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T11:01:57.433

那么尝试`WHERE (type = 20 OR type is null)`条件呢？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-14T11:14:59.487

```
SELECT h.house_number,h.bedrooms
        , o.occupant_id,o.ztype
FROM houses h
LEFT JOIN occupants o ON h.house_number = o.house_number
        AND o.ztype =20
        ; 
```

顺便说一句，我不得不将“type”替换为“ztype”，因为 type 是 Postgres 中的保留字。

# android - 我们可以让可滚动的 Listview（使用 hashmap 实现）的一部分不可滚动吗？

> ID：11031651
> 
> 赞同：-1
> 
> 时间：2012-06-14T10:58:39.423
> 
> 标签：android

我使用 textview 和 edittexts 制作 listview 并使用 hashmap 复制粘贴布局。现在我如何从编辑文本中获取值？我试过了，但它不起作用，因为每次我们使用一个新的 hashmap 变量来创建一个副本，我没有找到任何类似 hashmap 变量数组的东西。需要帮助。我的 xml 文件：

MarksList>res>layout>marks_list_main ：

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T11:36:32.537

假设您添加了一个 LinearLayout 作为列表项，并且在该布局上有一个 edittext 和一个 textview

```
LinearLayout layout=(LinearLayout) listView.getItemAtPosition(0);
EditText text = (EditText) layout.getChildAt(0); //Assuming you added EditText first
String s=text.getText().toString() 
```

# wso2 - WSO2 ESB 代理停止用 & 替换 %26

> ID：11031652
> 
> 赞同：0
> 
> 时间：2012-06-14T10:58:39.810
> 
> 标签：wso2, wso2esb

我需要将这些参数发送到域

> 域/页面？param1=xxx¶m2=yyy%26zzz

我在 wso2 中使用代理作为域

> localhost:8280/services/proxyfordomain/page?param1=xxx¶m2=yyy%26zzz

proxyfordomain 的端点是 domain

代理正在用 & 替换 %26

要登录控制台的实际 URL 是：

```
To domain/page?param1=xxx&param2=yyy%26zzz 
```

但是登录控制台的 URL 是：

```
To domain/page?param1=xxx&param2=yyy&zzz 
```

这里 param2 将采用`yyy%26zzz`格式值但不是`yyy&zzz`

如何阻止 WSO2 替换？

感谢您花费宝贵的时间

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T13:57:13.863

您可以使用以下脚本中介配置将“yyy&zzz”替换为“yyy%26zzz”。

```
<script language="js">var url = mc.getTo().toString();
var newURL = url.replace("yyy&amp;zzz","yyy%26zzz");
mc.setTo(newURL);</script> 
```

# iphone - MKMapView中的MKAnnotation随机顺序

> ID：11031653
> 
> 赞同：0
> 
> 时间：2012-06-14T10:58:46.017
> 
> 标签：iphone, objective-c, mkmapview, mkannotation

我有一个带有有序对象列表的表格视图，按我和对象之间的距离排序。我需要在地图中显示注释以向用户显示对象的位置，但我需要以与表格顺序相同的顺序显示，因为那时我需要按下一个以显示每个对象的信息。

问题是，当我每次将注释放入地图时，注释的标签号都是不同的。就像地图以随机顺序添加注释一样。

我有一个注释数组，然后将该数组添加到地图中：

```
 MKPointAnnotation* tallerAnnotation = [[MKPointAnnotation alloc] init];
    [tallerAnnotation setCoordinate:CLLocationCoordinate2DMake([taller getLatitudTaller],       [taller getLongitudTaller])];
    [tallerAnnotation setTitle:[taller getNombre]];
    [tallerAnnotation setSubtitle:[taller getDomicilio]];
    [annotations addObject:tallerAnnotation]; 
```

然后将数组添加到地图中：

```
 [mapa addAnnotations:annotations]; 
```

这是我自定义注释的代码：

```
 - (MKAnnotationView *) mapView: (MKMapView *) mapa viewForAnnotation: (id <MKAnnotation>) annotation_ {

    MKPinAnnotationView *pin = (MKPinAnnotationView *) [self.mapa dequeueReusableAnnotationViewWithIdentifier: @"YourPinId"];
    if (pin == nil) {
    pin = [[MKPinAnnotationView alloc] initWithAnnotation:annotation_ reuseIdentifier: @"YourPinId"];

    }
    else {
    pin.annotation = annotation_;
    }
    if ([[annotation_ title]isEqualToString:@"Tu posición"])
    pin.pinColor = MKPinAnnotationColorRed;
    else
    {
    [pin setCanShowCallout:YES];
    pin.pinColor = MKPinAnnotationColorGreen;
    UIButton *rightButton = [UIButton buttonWithType:UIButtonTypeDetailDisclosure];
    [rightButton addTarget:self action:@selector(getInfoTalleres:) forControlEvents:UIControlEventTouchUpInside];
    [rightButton setTag:posicionActualTaller]; 
    pin.rightCalloutAccessoryView = rightButton;

    UILabel *l1=[[UILabel alloc] init];
    l1.frame=CGRectMake(0, 5, 50, 15);
    l1.backgroundColor = [UIColor clearColor];
    l1.textColor = [UIColor whiteColor];
    l1.font=[UIFont fontWithName:@"Arial Rounded MT Bold" size:(10.0)];
    l1.text=[[[mainDelegate getTalleres]objectAtIndex: posicionActualTaller]getDistancia];
    posicionActualTaller +=1;
    UIView *leftCAV = [[UIView alloc] initWithFrame:CGRectMake(0,0,50,15)];
    [leftCAV  addSubview : l1];
    pin.leftCalloutAccessoryView = leftCAV;
    }

    pin.animatesDrop = YES;
    return pin;
    } 
```

我想做这样的事情：

```
 - (void)mapView:(MKMapView *)mapView annotationView:(MKAnnotationView *)view calloutAccessoryControlTapped:(UIControl *)control
    {
    NSLog(@"Tag del taller = %i",[control tag]);
    [mainDelegate setTallerActual:[[mainDelegate getTalleres]objectAtIndex:[control tag]]];
    [self detalleTaller];
    } 
```

每次我进入地图视图时，[控制标签]都有不同的值，这样就不可能做类似 [objects objectAtIndex:[control tag]];

请我需要帮助。

提前致谢。

**好的，我终于找到了解决方案。**

当我创建

```
UIButton *rightButton = [UIButton buttonWithType:UIButtonTypeDetailDisclosure];
[rightButton addTarget:self action:@selector(getInfoTalleres:) forControlEvents:UIControlEventTouchUpInside]; 
```

对于注释，我以这种方式将注释标题分配给按钮：

```
[rightButton setTitle:[annotation_ subtitle] forState:UIControlStateNormal]; 
```

然后：

```
-(void)getInfoTalleres:(UIButton* )sender
{   
for (int i = 0; i < [[mainDelegate getTalleres]count]; i++)
{
    if ([[sender currentTitle] isEqualToString:[[[mainDelegate getTalleres]objectAtIndex:i]getDomicilio]])
    {
        [mainDelegate setTallerActual:[[mainDelegate getTalleres]objectAtIndex:i]];
        [self detalleTaller];
        break;
    }
} 
```

}

希望有人可以使用这个解决方案。

非常感谢可可。

问候。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T11:37:16.043

在此处检查答案它访问标题属性[确定选择了哪个 MKPinAnnotationView？](https://stackoverflow.com/questions/10739335/determine-which-mkpinannotationview-was-selected)和教程[http://www.scribd.com/doc/91629556/192/The-MKAnnotationView-class](http://www.scribd.com/doc/91629556/192/The-MKAnnotationView-class)

如果您仍然找不到答案，请告诉我

# xml - Coldfusion xml解析地址类型

> ID：11031656
> 
> 赞同：0
> 
> 时间：2012-06-14T10:58:56.673
> 
> 标签：xml, coldfusion

给定以下 XML：

```
<Contact>
   <ContactID>41111-f15a-4fa1-b643-47877608f557</ContactID>
   <ContactStatus>ACTIVE</ContactStatus>
   <Name>ABC Ltd</Name>
   <EmailAddress>xxx@xxx.co</EmailAddress>
   <SkypeUserName>xxxdemo</SkypeUserName>
   <Addresses>
      <Address>
         <AddressType>STREET</AddressType>
         <AddressLine1>Radio XXX</AddressLine1>
         <AddressLine2>4388 Ballarat Highway</AddressLine2>
         <City>Melbourne</City>
         <PostalCode>3133</PostalCode>
      </Address>
      <Address>
         <AddressType>POBOX</AddressType>
         <AddressLine1>Radio xx House</AddressLine1>
         <AddressLine2>P O Box 1111</AddressLine2>
         <City>Melbourne</City>
         <Region>VIC</Region>
         <PostalCode>3133</PostalCode>
      </Address>
   </Addresses>
   <Phones>
      <Phone>
         <PhoneType>MOBILE</PhoneType>
      </Phone>
      <Phone>
         <PhoneType>DEFAULT</PhoneType>
         <PhoneNumber>1112222</PhoneNumber>
         <PhoneAreaCode>03</PhoneAreaCode>
      </Phone>
      <Phone>
         <PhoneType>FAX</PhoneType>
      </Phone>
      <Phone>
         <PhoneType>DDI</PhoneType>
      </Phone>
   </Phones>
   <UpdatedDateUTC>2012-07-26T20:06:00.75</UpdatedDateUTC>
   <IsSupplier>false</IsSupplier>
   <IsCustomer>true</IsCustomer>
</Contact>
<Contact>
   Another contact...
</Contact> 
```

我可以通过以下方式访问联系人 ID：

```
<cfset aContacts = XmlSearch(sResponse,"//Contact") />
<cfloop index="i" from="1" to="#arrayLen(aContacts)#">
  <cfset sContactID = aContacts[i].ContactID>
</cfloop> 
```

但是我如何解析各种地址类型，例如如下：

```
<cfloop index="i" from="1" to="#arrayLen(aContacts)#">
  <cfset sContactID = aContacts[i].ContactID>
  <cfset sStreetAddressLine1 = ??>
  <cfset sStreetAddressLine2 = ??>
  <cfset sStreetAddressCity = ??>
  <cfset sStreetAddressPostalCode = ??>
  <cfset sPOBoxAddressLine1 = ??>
  <cfset sPOBoxAddressLine2 = ??>
  <cfset sPOBoxAddressCity = ??>
  <cfset sPOBoxAddressPostalCode = ??>
</cfloop> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T15:59:15.263

这应该这样做： -

```
<cfset aContacts = XmlSearch(sResponse,"//Contact")>

<cfloop index="i" from="1" to="#arrayLen(aContacts)#">
    <cfset sContactID = aContacts[i].ContactID>
    <cfset aAddresses = aContacts[i].addresses.xmlChildren>
    <cfset sStreetAddressLine1 = aAddresses[1].AddressLine1>
    <cfset sStreetAddressLine2 = aAddresses[1].AddressLine2>
    <cfset sStreetAddressCity = aAddresses[1].City>
    <cfset sStreetAddressPostalCode = aAddresses[1].PostalCode>
    <cfset sPOBoxAddressLine1 = aAddresses[2].AddressLine1>
    <cfset sPOBoxAddressLine2 = aAddresses[2].AddressLine2>
    <cfset sPOBoxAddressCity = aAddresses[2].City>
    <cfset sPOBoxAddressPostalCode = aAddresses[2].PostalCode>
</cfloop> 
```

请记住，假设第二个地址是邮政信箱地址可能与创建此 XML 的人的意图不完全一致，因此您可能在那里做出了一些不正确的假设。此外，您应该真正检查数组的长度`aAddresses`以避免任何运行时错误。希望这会让你继续前进。

# php - 如何在 pdf 文件 php 中嵌入签名

> ID：11031659
> 
> 赞同：0
> 
> 时间：2012-06-14T10:59:12.680
> 
> 标签：php, pdf, tcpdf

在应用程序中，用户将上传 PDF 文件，然后上传使用数字笔创建的个人签名。如何将此签名嵌入到 pdf 文件中？

我尝试使用 TCPDF，但似乎该库用于创建新的 pdf 文件。

就我而言，我有自己的 PDF 文件，由不同的用户上传。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T11:06:22.567

检查以下链接..希望它对您有用

```
http://www.mindfiresolutions.com/How-write-to-an-existing-PDF-using-PHP-1073.php

http://stackoverflow.com/questions/4299315/writing-drawing-over-a-pdf-template-document-in-php 
```

编写/创建 PDF 文件

```
http://www.fpdf.org/ 
```

# php - PHP parse_ini_file 错误

> ID：11031661
> 
> 赞同：2
> 
> 时间：2012-06-14T10:59:18.530
> 
> 标签：php, parsing, ini

我正在使用 parse_ini_file 来读取文件的内容，但它并不总是成功的。

例如，此文件工作正常：

```
[playlist]
numberofentries=3
File1=http://scfire-dtc-aa05.stream.aol.com:80/stream/1010
Title1=(#1 - 168/11500) Absolutely Smooth Jazz - SKY.FM - the world's smoothest jazz 24 hours a day
Length1=-1
File2=http://scfire-ntc-aa06.stream.aol.com:80/stream/1010
Title2=(#2 - 171/11500) Absolutely Smooth Jazz - SKY.FM - the world's smoothest jazz 24 hours a day
Length1=-1
File3=http://scfire-mtc-aa04.stream.aol.com:80/stream/1010
Title3=(#3 - 175/11500) Absolutely Smooth Jazz - SKY.FM - the world's smoothest jazz 24 hours a day
Length1=-1
Version=2 
```

但是，当我使用 parse_ini_file 读取以下文件时，我收到一条错误消息，指出它无法解析该文件：

```
[playlist]
numberofentries=3
File1=http://87.230.82.17:80
Title1=(#1 - 365/1400) DEFJAY.DE - 100% R&B! (GERMANY)
Length1=-1
File2=http://87.230.56.25:80
Title2=(#2 - 370/1400) DEFJAY.DE - 100% R&B! (GERMANY)
Length1=-1
File3=http://87.230.56.32:80
Title3=(#3 - 375/1400) DEFJAY.DE - 100% R&B! (GERMANY)
Length1=-1
Version=2 
```

这是我读取文件的代码：

```
$file = "test.pls";
$ini_array = parse_ini_file($file, true);
$audiostream = $ini_array['playlist']['File1'];
echo "stream is: ".$audiostream; 
```

我看不出文件之间有太大区别。有谁知道出了什么问题？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T11:14:22.647

首先，您需要将**非字母数字字符括起来**

从手册：

> 如果 ini 文件中的值包含任何非字母数字字符，则需要将其括在双引号 (") 中。

[PHP.net - parse_ini_file](http://php.net/manual/en/function.parse-ini-file.php)

所以：

```
[playlist]
 numberofentries=3
 File1="http://87.230.82.17:80"
 Title1="(#1 - 365/1400) DEFJAY.DE - 100% R&B! (GERMANY)"
 Length1=-1
 File2="http://87.230.56.25:80"
 Title2="(#2 - 370/1400) DEFJAY.DE - 100% R&B! (GERMANY)"
 Length1=-1
 File3="http://87.230.56.32:80"
 Title3="(#3 - 375/1400) DEFJAY.DE - 100% R&B! (GERMANY)"
 Length1=-1
 Version=2 
```

另请注意，有保留字：

> 有一些保留字不能用作 ini 文件的键。其中包括：null、yes、no、true、false、on、off、none。值 null、no 和 false 导致“”，yes 和 true 导致“1”。字符 ?{}|&~![()^" 不得在键中的任何位置使用，并且在值中具有特殊含义

# drupal-7 - Drupal 7 - Webform 不发送一些电子邮件

> ID：11031665
> 
> 赞同：0
> 
> 时间：2012-06-14T10:59:43.460
> 
> 标签：drupal-7

我创建了一个联系网络表单。它运行完美，但发生了一些奇怪的事情：如果消息是：它不会发送任何电子邮件：

> 格言 vitae urna。Nam sit amet tortor ut augue tempor feugiat quis vulputate ante。”

这是来自 Firefox 扩展的复制粘贴虚拟消息。如果我将此消息复制到表单中，网络表单会说消息已发送，但没有电子邮件到达我的 gmail 帐户（检查垃圾邮件文件夹；等待一小时）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T06:02:25.097

我会查看外发邮件服务器的日志以及 Drupal 数据库日志。

如果什么都没找到，我会安装[SMTP](http://drupal.org/project/smtp)模块，并使用像[Mandrill](http://mandrill.com/)这样的免费 SMTP 服务注册，原因有两个。

1) 您可以确定问题是在 Drupal 级别还是您之前使用的传出服务器的问题。

2) Mandrill 确实提供了一个日志，因此您可以确认您的电子邮件已发送。

# google-apps - 谷歌浏览器应用脚本要求另存为 userAppPanel

> ID：11031670
> 
> 赞同：0
> 
> 时间：2012-06-14T11:00:01.273
> 
> 标签：google-apps, google-apps-script

我在谷歌应用程序脚本中使用 UIApplication 时遇到问题，但仅在 Chrome 18.0.1025.142 m 上，我的应用程序在 Firefox 3.6 和 chrome 16.xx 上运行良好，我将我的 chrome 版本更新为 19.0.1084.56 m。并且问题仍然存在。

在 Chrome 18.0.1025.142 m 和 19.0.1084.56 m 上，我有以下行为：当我尝试显示 UI 应用程序时，我的电子表格上会显示一个空白框，并且要求我对对象执行“另存为”操作用户应用面板。

在 Chrome 16.xx 或 Firefox 3.6 上，我有一个带有面板、文本框和按钮的 UI 应用程序。

这是我的应用程序创建代码：

```
// Create my application
  var mydoc = SpreadsheetApp.getActiveSpreadsheet(); 
  var myapp = UiApp.createApplication();
  myapp.setTitle("Translation selector");
  // create panels, text boxes and widgets
  var mypanel = myapp.createVerticalPanel();
  // Create input boxes and button
  var textBoxA = myapp.createTextBox();
  textBoxA.setName('Input search filter here').setId('SearchText');
  var MyButton = myapp.createButton("Fill the tables");
  mypanel.add(textBoxA);
  mypanel.add(MyButton);
  // create handler to respond to events
  var clickHandler = myapp.createServerClickHandler("respondToSubmit");
  MyButton.addClickHandler(clickHandler);
  clickHandler.addCallbackElement(mypanel);
  // assemble everything in app
  myapp.add(mypanel);
  //mydoc.show(myapp);
  //return myapp;
  var doc = SpreadsheetApp.getActive();
  // show the app
  doc.show(myapp);

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T07:25:18.643

我在 OSX 的 Chrome 21.0.1180.89 上遇到了类似的问题。使用一个[邮件合并脚本](http://www.labnol.org/internet/personalized-mail-merge-in-gmail/20981/)，它在几个小时前在 Win8 上的类似最新的 chrome 上完美运行。

我很确定这是一个安全问题。

取消对应用程序的授权（在帐户-> 安全下），然后重新加载脚本并重新授权它会有所帮助。不确定它是在每个浏览器级别上还是其他..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-10T08:30:55.713

请添加此代码，

根据您的问题，它适用于 chrome。

```
function saveTextAsFile()
{
    var textToWrite = document.getElementById('area').value;
    var textFileAsBlob = new Blob([textToWrite], {type:'text/plain'});
    var fileNameToSaveAs = "ecc.plist"/*Your file name*/;

var downloadLink = document.createElement("a");
downloadLink.download = fileNameToSaveAs;
downloadLink.innerHTML = "Download File";
if (window.webkitURL != null)
{
    // Chrome allows the link to be clicked
    // without actually adding it to the DOM.
    downloadLink.href =   
window.webkitURL.createObjectURL(textFileAsBlob);
}
else
{
    // Firefox requires the link to be added to the DOM
    // before it can be clicked.
    downloadLink.href = window.URL.createObjectURL(textFileAsBlob);
    downloadLink.onclick = destroyClickedElement;
    downloadLink.style.display = "none";
    document.body.appendChild(downloadLink);
}

downloadLink.click();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-07T04:59:36.863

我也有同样的问题 ：

经过几次测试后，有关此的更多详细信息。这似乎是由于用户触发脚本执行，以及触发器的特性： - 如果从电子表格中的自定义菜单调用函数，那么每个人都可以正常工作 - 如果调用函数 onOpen()，对每个人来说一切都很好——如果在函数上设置了可安装的 onEdit 或 onOpen 触发器，那么对设置它的人来说一切正常，而对其他人不利。无论该人是否是所有者，都会观察最后的行为。

基本上，它似乎唯一不能正常工作的时候是有人打开或编辑电子表格并且该功能由其他人安装的可安装触发器触发。

这是一种痛苦。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-14T17:30:22.053

我开发的脚本[FormEmailer](http://sites.google.com/site/formemailer)（在脚本库中提供）的一些用户也遇到了这个问题。但是我们还不能确定产生这种情况的情况。

你正在测试的电子表格是你的吗？或者它是共享的，而您不是所有者？您在同一个电子表格上还有其他脚本项目吗？您是所有脚本的所有者吗？

（我认为如果你改变你编辑你的问题和我的答案，而不是在“有限”的评论中说话会更好）。

# jquery - 执行动态加载的 jQuery 代码

> ID：11031673
> 
> 赞同：1
> 
> 时间：2012-06-14T11:00:06.913
> 
> 标签：jquery

我正在开发使用 .load 函数动态加载页面的网站。例如：index.php 包含链接，点击后加载其他页面。其他页面包含 html 和一些 jQuery 代码（插件初始化等）。问题是动态加载后 jQuery 代码不起作用。索引.php 代码：

```
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Example</title>

<script type="text/javascript">
    $(document).ready(function(){
        $(".load-page").click(function(){
            $('.loaded-page-container').load('some_page_url', function(data, status, xhr) {
                alert('page is loaded');
            });
        });     
    });
</script>

</head>

<body>

<a href="#" class="load-page">Load page</a>

<div class="loaded-page-container"></div>

</body>
</html> 
```

和加载页面的代码：

```
<script type="text/javascript" src="autoNumeric-1.7.4.js"></script>

<script type="text/javascript" src="selectmenu/ui/jquery.ui.core.js"></script>
<script type="text/javascript" src="selectmenu/ui/jquery.ui.widget.js"></script>
<script type="text/javascript" src="selectmenu/ui/jquery.ui.position.js"></script>
<script type="text/javascript" src="selectmenu/ui/jquery.ui.selectmenu.js"></script>

<script type="text/javascript">
    $('#number').autoNumeric({mDec:0,vMax:'9999999'});  //these statements doesn't work 
    $('#select').selectmenu({
        width: 289
    });     
</script>

<div class="some-content">
    HTML code that appears after current page loading. 
    <input type="text" value="" name="number" id="number" />
    <select id="select">
        <option value="some-val">Some value</option>
    </select>
</div> 
```

所以页面加载了，但遗憾的是 jQuery 插件不起作用。有任何想法吗？
您的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T11:07:12.313

您需要将所有 JS 代码保留在第一页，而不是在第二页。

在 AJAX 调用完成和填充完成后，您可以触发 javascript。

```
<!--ALL scripts linked in this page-->
$.ajax({
    url: "some_page_url",
    success: function( data ) {
        <!--LOADING ONLY THE HTMLs-->
        $('.loaded-page-container').html(data);
        alert('page is loaded');
    },
    complete: function( data ) {
        $('#number').autoNumeric({mDec:0,vMax:'9999999'});  
        $('#select').selectmenu({
            width: 289
        }); 
    }
}); 
```

此外，您需要检查插件是否可以在动态生成的 html 上工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T11:08:14.140

您可以`jQuery.getScript()`按照此处所述使用：

[jQuery.getScript 参考@api.jquery.com](http://api.jquery.com/jQuery.getScript/)

# asp.net - 在 ASP.NET 中使用 MAPI 读取 oulook 时出错

> ID：11031676
> 
> 赞同：2
> 
> 时间：2012-06-14T11:00:16.453
> 
> 标签：asp.net, outlook, imap, mapi

我使用 VS2010、C#、ASP.NET 来阅读 Outlook 电子邮件。我已经用我的 gmail (IMAP) 设置了 Outlook Express 6，我在第一行遇到了一个奇怪的异常，我的 COM 对象正在这里创建，这是我的代码：

```
Microsoft.Office.Interop.Outlook.Application app = null;
Microsoft.Office.Interop.Outlook._NameSpace ns = null;
Microsoft.Office.Interop.Outlook.PostItem item = null;
Microsoft.Office.Interop.Outlook.MAPIFolder inboxFolder = null;
Microsoft.Office.Interop.Outlook.MAPIFolder subFolder = null;

try
{
    app = new Microsoft.Office.Interop.Outlook.Application();
    ns = app.GetNamespace("MAPI");
    ns.Logon("gmail_id", "gmail_pass", false, true);

    inboxFolder = ns.GetDefaultFolder(Microsoft.Office.Interop.Outlook.OlDefaultFolders.olFolderInbox);
    subFolder = inboxFolder.Folders["MySubFolderName"]; //folder.Folders[1]; also works
    Console.WriteLine("Folder Name: {0}, EntryId: {1}", subFolder.Name, subFolder.EntryID);
    Console.WriteLine("Num Items: {0}", subFolder.Items.Count.ToString());

    for (int i = 1; i <= subFolder.Items.Count; i++)
    {
        item = (Microsoft.Office.Interop.Outlook.PostItem)subFolder.Items[i];
        Console.WriteLine("Item: {0}", i.ToString());
        Console.WriteLine("Subject: {0}", item.Subject);
        Console.WriteLine("Sent: {0} {1}", item.SentOn.ToLongDateString(), item.SentOn.ToLongTimeString());
        Console.WriteLine("Categories: {0}", item.Categories);
        Console.WriteLine("Body: {0}", item.Body);
        Console.WriteLine("HTMLBody: {0}", item.HTMLBody);
    }
}
catch (System.Runtime.InteropServices.COMException ex)
{

}
finally
{
    ns = null;
    app = null;
    inboxFolder = null;
} 
```

这是我的例外：

```
Retrieving the COM class factory for component with CLSID {0006F03A-0000-0000-C000-000000000046} failed due to the following error: 80040154 Class not registered (Exception from HRESULT: 0x80040154 (REGDB_E_CLASSNOTREG)). 
```

在第一行创建此异常：

```
app = new Microsoft.Office.Interop.Outlook.Application(); 
```

我使用`Microsoft.Office.Interop.Outlook.dll`文件作为互操作参考，这里出了什么问题？我可以在 Outlook Express 6 中阅读我的 Gmail 收件箱，但在我的 ASP.NET Web 应用程序中没有运气

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T13:41:12.787

尝试为 Office 应用配置[适当的 COM 激活权限以在 ASP.NET 下运行。](https://stackoverflow.com/a/6833718/175679)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T17:58:16.443

Firstly, you should not ever use any Office app (Outlook included) in a service (such as IIS). No exceptions, it is simply not supported. Secondly, if you are using the Outlook Object Model (not in a service), you need to have Outlook (the real one) intalled. OE has nothing in common witt Outlook 2010/2007/2003/etc., except for the word "Outlook" in the name.

# wso2 - WSO2 小工具服务器：servlet 过滤器中的 url 模式无法按预期工作

ID：11031688

赞同：2

时间：2012-06-14T11:01:01.803

标签：wso2, wso2carbon

# java - JVM Clustering 如何进行负载平衡。

> ID：11031689
> 
> 赞同：2
> 
> 时间：2012-06-14T11:01:05.160
> 
> 标签：java, memory, jvm, cluster-computing

默认 JVM 使用最大 1.5 GB RAM/JVM Java 应用程序。但我的服务器有 8 GB。应用程序仍然需要更多 RAM。如何启动 JVM 单机服务器集群。

如果内存增加，单个 JVM 垃圾收集器和其他 JVM 恶魔速度变慢......对此有什么解决方案.. JVM 集群是正确的吗？

应用工作高配置。当请求启动时 JVM 变慢并且内存使用率从 95% 到 99%

我的服务器配置。Linux 4 核多处理器 8 GB RAM 对 HDD 空间没有问题。

这个问题有什么解决办法吗？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T11:20:22.607

有许多解决方案。

*   使用更大的堆大小（可能是 64 位 JVM）
*   使用更少的堆和更多的堆外内存。堆外内存可以扩展到 TB。
*   将 JVM 拆分为多个进程。这对于某些应用程序来说比其他应用程序更容易。我倾向于避免这种情况，因为我的应用程序不容易拆分。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-14T11:27:11.630

您可能想查看内存网格，例如：

*   Oracle 一致性：[http ://www.oracle.com/technetwork/middleware/coherence/overview/index.html](http://www.oracle.com/technetwork/middleware/coherence/overview/index.html)
*   网格增益：http : [//www.gridgain.com/](http://www.gridgain.com/)
*   兵马俑：[http ://terracotta.org/](http://terracotta.org/)

我们使用 Coherence 在 1 台机器上运行 3 个 JVM，每个进程使用 1 Gb 的 RAM。

# jpa - Criteria API：获取列表返回重复的主要实体

> ID：11031690
> 
> 赞同：11
> 
> 时间：2012-06-14T11:01:10.650
> 
> 标签：jpa, jpa-2.0, criteria-api

我有以下实体；Ticket 包含一组 0,N 个 WorkOrder：

```
@Entity
public class Ticket {

  ...

  @OneToMany(mappedBy="ticket", cascade = CascadeType.ALL, fetch = FetchType.LAZY)
  private List<WorkOrder> workOrders = null;

  ...
}

@Entity
public class WorkOrder {
  ...
  @ManyToOne
  @JoinColumn(nullable = false)
  private Ticket ticket;
} 
```

我正在加载门票并获取属性。所有 0,1 属性都没有问题。对于 workOrders，我使用[此答案](https://stackoverflow.com/questions/5024158/criteria-api-root-fectch-how-to-fetch-a-collection)获取以下代码。

```
CriteriaBuilder criteriaBuilder = this.entityManager.getCriteriaBuilder();
CriteriaQuery<Ticket> criteriaQuery = criteriaBuilder
  .createQuery(Ticket.class);
Root<Ticket> rootTicket = criteriaQuery.from(Ticket.class);

ListAttribute<? super Ticket, WorkOrder> workOrders =
  rootTicket.getModel().getList("workOrders", WorkOrder.class);
rootTicket.fetch(workOrders, JoinType.LEFT);

    // WHERE logic
    ...

criteriaQuery.select(rootTicket);
TypedQuery<Ticket> query = this.entityManager.createQuery(criteriaQuery);
return query.getResultList(); 
```

结果是，在一个应该返回我 1 个工单和 5 个工作订单的查询中，我检索了同一个工单 5 次。

如果我只是将 workOrders 设为 Eager Fetch 并删除 fetch 代码，它就可以正常工作。

谁能帮我？提前致谢。

更新：

关于为什么我对 JB Nizet 的回答不满意的一种解释（即使最终它有效）。

当我只是使关系急切时，JPA 正在检查与我使它变得懒惰并将 fetch 子句添加到 Criteria / JPQL 时完全相同的数据。`ListAttribute`正如我为 Criteria 查询定义的那样，各种元素之间的关系也很清楚。

对于JPA在两种情况下都没有返回相同数据的原因，有一些合理的解释吗？

更新赏金：虽然 JB Nizet 的回答确实解决了这个问题，但我仍然觉得这毫无意义，给定两个具有相同含义的操作（“Get `Ticket`and fetch all `WorkOrder`inside `ticket.workOrders`”），通过急切加载执行它们不需要进一步更改，同时指定fetch 需要一个`DISTINCT`命令

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-06-29T06:38:24.017

1.  急切加载和获取连接之间存在差异。急切加载并不意味着数据是在同一个查询中加载的。它只是意味着它会立即加载，尽管是通过额外的查询。

2.  条件总是被转换为 SQL 查询。如果您指定连接，它将是 SQL 中的连接。根据 SQL 的性质，这也会乘以根实体的数据，从而产生您得到的效果。（请注意，您多次获得相同的实例，因此根实体不会在内存中相乘。）

有几种解决方案：

*   采用`distinct(true)`
*   使用不同的根实体转换器 ( `.setResultTransformer(Criteria.DISTINCT_ROOT_ENTITY)`)。
*   当您不需要按子属性过滤时，请避免加入
*   当您需要按子属性进行过滤时，请按子查询 ( `DetachedCriteria`) 进行过滤。
*   使用[batch-size优化N+1问题](http://docs.jboss.org/hibernate/annotations/3.5/reference/en/html_single/#entity-hibspec-collection)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-14T11:10:17.157

您是否尝试过调用`distinct(true)`CriteriaQuery？

JPA 2 规范，第 161 页，说：

> DISTINCT 关键字用于指定必须从查询结果中消除重复值。
> 
> 如果未指定 DISTINCT，则不会消除重复值。

javadoc还说：

> 指定是否消除重复的查询结果。真值将导致消除重复。错误值将导致保留重复项。如果未指定 distinct，则必须保留重复的结果。

急切加载关联时不需要 distinct 的原因可能只是关联没有使用 fetch join 加载，而是使用附加查询。

# objective-c - UIGestureRecogniser 没有调用委托方法

> ID：11031695
> 
> 赞同：0
> 
> 时间：2012-06-14T11:01:34.087
> 
> 标签：objective-c, ios, uigesturerecognizer

我正在继承 UIGestureRecogniser，但由于某种原因，该方法

```
- (BOOL)canBePreventedByGestureRecognizer:(UIGestureRecognizer *)preventingGestureRecognizer{ 
```

没有被调用

有任何想法吗

[PastBin 链接](http://pastebin.com/bfkF18DW)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T11:55:45.693

我认为您正在混合两种方法来实现 canBePreventedByGestureRecognizer 的行为：

1.  使用委托类
2.  正如您所做的那样覆盖方法

但是在您的界面中，您定义：

```
UIGestureRecognizer <UIGestureRecognizerDelegate> 
```

***尝试删除协议 UIGestureRecognizerDelegate？***

# android - android-maven-plugin 3.2.0 和 maven 3.0.4 不能编译它

> ID：11031709
> 
> 赞同：3
> 
> 时间：2012-06-14T11:02:23.283
> 
> 标签：android, eclipse, maven

当我尝试使用 maven 3.0.4 编译时，Eclipse 给了我这个错误：

> 无法在项目 Proyect 上执行目标 com.jayway.maven.plugins.android.generation2:android-maven-plugin:3.2.0:generate-sources (default-generate-sources)：插件 com.jayway.maven.plugins。 android.generation2:android-maven-plugin:3.0.0 需要 Maven 版本 [3.0.3,) -> [帮助 1] [错误]

我不明白，因为我有 maven 3.0.4、m2Eclipse 插件，当我使用 2.x 版本进行测试时，可以编译它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T11:19:02.007

您确定要使用 Maven 3.0.4 进行编译吗？也许您的磁盘上有 Maven 3.0.4，但使用 m2e 的嵌入式 Maven 3.0.2（这是默认设置）。转到`Window -> Preferences -> Maven -> Installations`检查您设置的 Maven 版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T08:39:01.320

在那之后也许[这](http://rgladwell.github.com/m2e-android/)会有所帮助，android连接器存在问题，有一个[修复程序](https://github.com/rgladwell/m2e-android/issues/89)。至少它对我有用！

# jquery - 将内容放入 div

> ID：11031710
> 
> 赞同：0
> 
> 时间：2012-06-14T11:02:25.500
> 
> 标签：jquery

如果我已经喜欢

```
<div class="key-element"></div>
<div class="key-element"></div>
<div class="key-element"></div>
<div class="key-element"></div>
<div class="key-element"></div>
<div class="key-element"></div> 
```

是否可以给这些元素之一赋值？我是否需要为每个 div 赋予某种独特的价值才能处理它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-14T11:04:20.507

您可以使用[`:eq`](http://api.jquery.com/eq-selector/)选择器。例如，如果您想更改第四个 div 的 html：

```
$('.key-element:eq(3)').html('hello'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T11:06:09.387

你的意思是在 Javascript/JQuery 中？

如果是这样，那么你最好的选择是给每个 Div 一个可以被脚本语言获取的 id。

如果您不想这样做，并且它们是唯一的 Div 或者它们在容器中，则可以执行 foreach 循环并将它们存储在数组中。

最后你可以使用 eq 选择器[http://www.w3schools.com/jquery/sel_eq.asp](http://www.w3schools.com/jquery/sel_eq.asp)（编辑：如上所述）

这真的取决于你想做什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T11:18:00.417

**如果您想使用 javascript 更改第四个 div 的 html：**

```
function setContent(content){
    var divs = document.getElementsByClassName("key-element");
    for(var i=0 ; i < divs.length; i++) {
        divs.innerHTML = content;
    }
}

setContent("Hello"); 
```

# vb.net - 该进程无法访问该文件，因为它正被另一个进程使用。-在 vb.net 中写入文件时出错

> ID：11031715
> 
> 赞同：2
> 
> 时间：2012-06-14T11:02:41.473
> 
> 标签：vb.net

在我的 vb.net 代码中，我使用 streamwriter 写入已作为表单输入的文件。

```
 Dim strContents As String
        Dim objReader As StreamReader
        Try

            objReader = New StreamReader("C:\test.txt")
            strContents = objReader.ReadToEnd()
            objReader.Close()

        Catch Ex As Exception

        End Try
        Dim Contents As String
        Dim bAns As Boolean = False
        Dim objWriter As StreamWriter
        Dim FileStream As System.IO.FileStream
        Try

            FileStream = New FileStream("C:\test.txt", FileMode.Open, FileAccess.ReadWrite)

            objWriter = New StreamWriter("C:\test.txt")
            objWriter.Write("fdgdfgdjkljljklg")
            objWriter.Close()
            bAns = True
        Catch Ex As Exception

        End Try 
```

在某些系统中，它工作正常，但在其他一些工作站中，它显示主题中提到的错误。

是什么限制了对此处文件的访问？谁可以帮我这个事？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T11:08:41.020

> 是什么限制了对此处文件的访问？

您尚未处理流的事实，因此该过程正在锁定文件。A`StreamWriter`持有文件的非托管句柄。如果您不处理此句柄，其他线程/进程将无法打开该文件。

我建议您始终将[`IDisposable`](http://msdn.microsoft.com/en-us/library/system.idisposable.aspx)资源包装在[`Using`](http://msdn.microsoft.com/en-us/library/htd05whh.aspx)语句中以确保正确处理（即使在块内引发异常）：

```
Using filestream As New StreamWriter(Inifile, True, System.Text.Encoding.UTF8)
    ' ... use the filestream here to write to the file
End Using 
```

# asp.net - Umbraco 多色菜单选项卡

> ID：11031716
> 
> 赞同：0
> 
> 时间：2012-06-14T11:02:43.957
> 
> 标签：asp.net, css, content-management-system, umbraco, menubar

我正在使用 Asp.Net CMS Umbraco 并希望得到一些帮助来确定 Umbraco CMS 是否有特定的东西可能使创建多色菜单栏的任务......不同于标准的 html 和 css操纵。

我使用的菜单条码基于 Umbraco 附带的友好幽灵主题。

现在在菜单中使用不同颜色的正常方法是这样的

```
 div # menu ul.rMenu li.page-item-(some number) {background-color: # (whatever);}

        ...

        ...

<li class "rMenu-expand page-item-(the same number as above)"><a href="(link to whatever site on the menu)">
    <span> Wording for the particular tab </span></a></li> 
```

宾果游戏......（一些数字）选项卡具有（无论如何）颜色！

* * *

但是，Umbraco 似乎使用了与上述策略不完全兼容的不同设置。我应该查看 *umbTextpage id *parentID *nodeType ... 还是我尚未注意到的完全不同的东西？

我相信 nodeName 被用于特定选项卡的措辞......那么我应该接受它，那个 nodeType 是指选项卡本身吗？

* * *

太好了，谢谢。但是，菜单是使用 xslt 动态生成的。你认为我应该尝试将该代码（转换为 xslt）插入到菜单生成过程中吗？

```
 <xsl:for-each select="$currentPage/ancestor-or-self::* [@level=$level]/* [@isDoc and string(umbracoNaviHide) != '1']">

     <li>

       <xsl:if test="@id = $currentPage/@id">

          <xsl:attribute name="class">current</xsl:attribute>

       </xsl:if>

      <a class="navigation" href="{umbraco.library:NiceUrl(@id)}">

       <span><xsl:value-of select="@nodeName"/></span>

      </a>

    </li> 
```

...或尝试在事后使用剃须刀代码（即​​创建菜单并随后循环遍历菜单元素，为每个节点提供数字“标签”）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T12:22:04.437

Umbraco 的美妙之处在于您可以完全控制布局。你可以让它随心所欲地构建你的菜单。

我不知道您是使用 xslt 还是 razor 来生成菜单，但是如果您正在寻找一个唯一的数字来附加到“page-number-”，那么使用节点的 ID，这甚至不会改变如果节点的名称被编辑。

使用 Umbraco 4.7 剃须刀，您可以执行以下操作：

```
@{
    <ul>
    @foreach (var node in Model.AncestorOrSelf().Children.Where("Visible"))
    {
        <li class="rMenu-expand page-item-@node.Id">
            <a href="@node.Url">
                <span>@node.Name</span>
            </a>
        </li>
    }
    </ul>
} 
```

# jquery - Knockoutjs 中的 BindingHandler。构建自己的 ListView

> ID：11031719
> 
> 赞同：0
> 
> 时间：2012-06-14T11:03:07.110
> 
> 标签：jquery, knockout.js

我想用 selectedItem 和 Itemsource 构建自己的 listView。

我已经开始了一个 jsFiddle [http://jsfiddle.net/andersb79/53xRL/1/](http://jsfiddle.net/andersb79/53xRL/1/)

您能否帮助我正确地了解我应该如何构建它。我还没有看到这样做的 bindingHanlder。

我想要的是这样的东西。

```
data-bind="myListView : { items : comments, selectedItem : selectedComment}" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T11:36:33.520

在您的自定义绑定中，您需要：

1.  为列表中的每个项目创建一个元素
2.  将该元素附加到父元素
3.  向在原始视图模型上设置 selectedItem 的每个元素添加一个单击处理程序

为了清楚起见，我还突出显示了当前选定的项目。

```
ko.bindingHandlers.myListView = {
    update: function(element, valueAccessor) {
        var value = ko.utils.unwrapObservable(valueAccessor()),

            //get the list of items
            items = value.items(),
            //get a reference to the selected item observable
            selectedItem = value.selectedItem,
            //get a jQuery reference to the element
            $element = $(element),
            //get the currently selected item
            currentSelected = selectedItem();

        //clear the parent of any existing children
        $element.html("");

        for (var index = 0; index < items.length; index++) {
            (function() {
                //get the list of items
                var item = ko.utils.unwrapObservable(items[index]),

                    //create a child element with a click handler
                    $childElement = $("<li>")
                    .text(item.id() + " " + item.text())
                    .click(function() {
                        //remove selected class on all siblings
                        $(this).siblings().removeClass("selected");
                        //add selected class on this item
                        $(this).addClass("selected");
                        //set the observable 'selected item' property on the source view model
                        selectedItem(item);
                    });

                //add the selected class if this item is the current selected item
                if (item == currentSelected) {
                    $childElement.addClass("selected");
                }

                //add the child to the parent
                $element.append($childElement);
            })();
        }

    }
}; 
```

这是一个[工作示例](http://jsfiddle.net/stevegreatrex/53xRL/5/)

注意：由于我使用的是更新评论列表时将使用的方法`update`而不是该方法`init`

**更新**

如果要使用原始 DIV 的内容作为每个创建项目的模板，则需要两个额外的步骤：

1.  初始化时获取元素的原始内容并使用它来代替上面的硬编码内容
2.  在将创建的元素添加到 DOM 之前将绑定应用到创建的元素

    ```
     ko.bindingHandlers.myListView = {
    init: function(element) {
        var $element = $(element),
            originalContent = $element.html();

        $element.data("original-content", originalContent);
        return { controlsDescendantBindings: true }
    },
    update: function(element, valueAccessor) {
        var value = ko.utils.unwrapObservable(valueAccessor()),

            //get the list of items
            items = value.items(),
            //get a reference to the selected item observable
            selectedItem = value.selectedItem,
            //get a jQuery reference to the element
            $element = $(element),
            //get the currently selected item
            currentSelected = selectedItem(),
            //get the current content of the element
            elementContent = $element.data("original-content");

        $element.html("");

        for (var index = 0; index < items.length; index++) {
            (function() {
                //get the list of items
                var item = ko.utils.unwrapObservable(items[index]),

                    //create a child element with a click handler
                    $childElement = $(elementContent)
                    .click(function() {
                        //remove selected class on all siblings
                        $(this).siblings().removeClass("selected");
                        //add selected class on this item
                        $(this).addClass("selected");
                        //set the observable 'selected item' property on the source view model
                        selectedItem(item);
                    });

                ko.applyBindings(item, $childElement[0]);

                //add the selected class if this item is the current selected item
                if (item == currentSelected) {
                    $childElement.addClass("selected");
                }

                //add the child to the parent
                $element.append($childElement);
            })();
        }

    } 
    ```

    };

`{ controlsDescendantBindings: true }`请注意，我们必须通过从我们的`init`方法返回来防止 div 的内容被敲除处理。

这是一个[更新的示例](http://jsfiddle.net/stevegreatrex/53xRL/9/)

# android - android 两个具有等效分区的线性布局通过 android:layout_weight not in line

> ID：11031720
> 
> 赞同：0
> 
> 时间：2012-06-14T11:03:09.810
> 
> 标签：android, textview, alignment, android-linearlayout

我想显示分配给两个不同标题的三个不同值，换句话说，第一个标题有一个值，第二个标题有两个值

我的方法是拆分“标题线性布局”40/60 和“值线性布局”40/30/30。为了不显示从边框开始的文本，我在任何地方都放了一个`android:layout_marginLeft="15dp"`in，所以最后它应该保持比例。

在我的 XML 中，我声明了以下内容：

```
<LinearLayout 
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal">
    <TextView 
        android:layout_weight="4"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_marginLeft="15dp"
        android:text="@string/txt_price_chf"
        />
    <TextView 
        android:layout_weight="6"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_marginLeft="15dp"
        android:text="@string/txt_price_offshore_chf"
        />
</LinearLayout>

<LinearLayout 
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal">
    <TextView android:id="@+id/tv_price_ch"
        android:layout_weight="4"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_marginLeft="15dp"
        android:text="Value1"
        />

    <TextView android:id="@+id/tv_price_off_chf"
        android:layout_weight="3"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_marginLeft="15dp"
        android:text="Value2"
        />

    <TextView android:id="@+id/tv_price_off_eur"
        android:layout_weight="3"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_marginLeft="15dp"
        android:text="Value3"
        />
</LinearLayout> 
```

结果如下输出：

![在此处输入图像描述](../Images/a5dba232d3eefbc9dde86f4fe25aa00c.png)

为什么“离岸价格：”-TextView 和“Value2”-TextView 不对齐？请注意，“离岸价格”保存在我的 strings.xml 中，没有空格之类的错误。首先我想，这是由 引起的`android:layout_marginLeft="15dp"`，但是

*   我如何理解“dp”是特定分辨率的相对值（因此拆分不`android:layout_weigth`应该影响这一点）和

*   如果我删除边距，它们仍然不符合要求。

有人有想法吗？我忽略了一些明显的东西吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T11:33:15.573

```
<TextView 
        android:layout_weight="4"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_marginLeft="15dp"
        android:layout_marginRight="-10dp"
        android:text="@string/txt_price_chf"
        /> 
```

这将为您工作...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T11:12:27.897

不过，这并不是你应该做的事情`LinearLayout`。

我建议使用 a `RelativeLayout`，你可以说这两个应该对齐。

在这种特殊情况下，无需深入研究细节，它可以是 marginRight、padding 等，也可以只是非等宽字体的副作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T11:39:46.760

或者另一种选择是：

```
 <LinearLayout
       android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_marginLeft="10dp"
    android:layout_weight=".60"
    android:orientation="vertical" >

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="txt_price_chf" />

    <TextView
        android:id="@+id/tv_price_ch"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Value1" />
    </LinearLayout>

      <LinearLayout
          android:layout_width="fill_parent"
          android:layout_height="wrap_content"
          android:layout_marginLeft="10dp"
          android:layout_weight=".40"
          android:orientation="vertical" >

        <TextView
              android:layout_width="wrap_content"
              android:layout_height="wrap_content"
              android:text="txt_price_offshore_chf" />

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal" >

        <TextView
            android:id="@+id/tv_price_off_chf"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="Value2" />

        <TextView
            android:id="@+id/tv_price_off_eur"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="Value3" />
    </LinearLayout>
</LinearLayout> 
```

# jquery - 如果看到元素，做点什么

> ID：11031724
> 
> 赞同：2
> 
> 时间：2012-06-14T11:03:17.530
> 
> 标签：jquery, slider

我有一个滑块。它为层内的事物设置动画。它还为图层设置动画。所以; 我想要的是当视频层出现时，它会从滑块区域之外对视频本身进行动画处理；我需要做点什么。

这就是我到目前为止所做的。但它不起作用。

```
if ($(".homeBannerVideoBg").live().is(":inView")) {
    $("body").addClass("YEEHA");
}
else {
    $("body").addClass("VUUHUU");
} 
```

homeBannerVideoBg 是我的视频元素。

我可以在这里帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T11:07:09.607

[https://github.com/protonet/jquery.inview](https://github.com/protonet/jquery.inview)

有一个很棒的插件，用于确定当用户滚动页面时元素何时进入视图。它采用事件的形式，因此您可以使用回调来执行您的操作，就像“点击”一样

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T11:05:26.027

尝试`:visible`

```
 if ($(".homeBannerVideoBg").is(":visible")) { 
        $("body").addClass("YEEHA"); 
   } 
   else { 
        $("body").addClass("VUUHUU"); 
   } 
```

# sql - 在 sql server 2008 的更新语句中使用替换时出错

> ID：11031727
> 
> 赞同：0
> 
> 时间：2012-06-14T11:03:31.213
> 
> 标签：sql, sql-server, sql-server-2008

在 sql server 2008 的更新语句中使用替换时出现错误。我尝试运行的语句是：

```
 update table US14-HSS-SQUARE_AISC14-HSS-SQUARE set Designation = replace(Designation,'HSSSQUARE','HSS') where Designation like 'HSSSQUARE%'; 
```

想要在“Designation”列的每一行中将“HSSSQUARE”更改为“HSS”。例如“HSSSQUARE16X16X5/8”到“HSS16X16X5/8”。

sql server 2008 中还有其他语法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T11:06:10.833

您不需要`table`在更新语句中，如果要在其中放入非法字符，还需要将表名括在方括号中。

```
UPDATE  [US14-HSS-SQUARE_AISC14-HSS-SQUARE] 
SET     Designation = REPLACE(Designation,'HSSSQUARE','HSS') 
WHERE   Designation like 'HSSSQUARE%' 
```

# iphone - 原始数据类型与非原始数据类型（苹果定义的数据类型）有什么区别？

> ID：11031732
> 
> 赞同：-4
> 
> 时间：2012-06-14T11:03:36.420
> 
> 标签：iphone, objective-c, ios, primitive-types, nsinteger

两者之间的基本区别是什么..？如果有人可以使用 NSInteger 和 NSNumber 的示例进行解释，那就太好了。谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-14T11:06:42.907

主要区别在于它们在内存中的位置，对象存储在堆中，而值类型直接存储在堆栈中......

**heap**：是用于动态内存分配的内存区域。

**stack**：是为函数内的自动变量分配的内存部分。数据使用后进先出 (LIFO) 方法存储在堆栈中。

关于 NSInteger 和 NSNumber ：

*NSInteger 只不过是长整数的同义词，而 NSNumber 是一个 Objective-C 类，具体来说是 NSValue 的子类。*

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-14T11:11:28.040

对象是：成员数据+对数据进行操作的函数

所以，原始数据类型只是数据，没有直接相关的方法。

对象就像一个模块，包括数据和功能（方法在这里）。

NSInteger 是原始数据类型。NSNumber 是对象，它的成员数据可能是 NSInteger。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-14T11:10:09.443

原始数据类型存储直接值，例如 NSInteger 存储整数值（32 位整数或 64 位整数，具体取决于编译的架构），对象是类的实例，具有方法、属性等。

为了从 NSNumber 中获取 NSInteger，您可以使用

```
[aNumber intValue]; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-07T01:55:29.603

原始数据类型用于存储基本类型的数据，例如字符串、整数和实数。因此，当您声明一个值类型变量时，编译器会留出或分配一块足够大的内存用于该变量。引用类型的工作方式不同。当您使用引用类型时，您将使用两件事，一个在内存中创建的对象和一个引用该对象的变量。该变量不包含您的程序将使用的实际数据。相反，它拥有一个称为引用的特殊值，它将变量链接到对象。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-14T11:15:40.300

原始数据类型只是数据，而对象类型称为引用类型。
这是一个有两个行为数据成员和成员函数的类。

# python - MongoDB 日期和删除对象

> ID：11031745
> 
> 赞同：0
> 
> 时间：2012-06-14T11:04:25.733
> 
> 标签：python, mongodb, datetime, twisted, pymongo

昨天我对 MongoDB 有一些奇怪的经历。我正在使用 twisted 和[txmongo](https://github.com/fiorix/mongo-async-python-driver) - mongodb 的异步驱动程序（类似于 pymongo）。

我有一个休息服务，它接收一些数据并将其放入 mongodb。一个字段是以毫秒为单位的时间戳，13 位。

首先，在 python 中将毫秒时间戳转换为 python 日期时间并非易事。我最终得到了这样的结果：

```
def date2ts(ts):
    return int((time.mktime(ts.timetuple()) * 1000) + (ts.microsecond / 1000))

def ts2date(ts):
    return datetime.datetime.fromtimestamp(ts / 1000) + datetime.timedelta(microseconds=(ts % 1000)) 
```

问题是，当我将数据保存到 mongodb 时，检索日期时间并使用我的函数将其转换回时间戳，我在毫秒内没有得到相同的结果。

我不明白为什么会这样。日期时间作为 ISODate 对象保存在 mongodb 中。我试图从 shell 查询它，确实有一秒或几毫秒的差异。

**问题1：有人知道为什么会这样吗？**

但这还没有结束。我决定不使用 datetime 并直接保存时间戳。在此之前，我从集合中删除了所有数据。当我尝试保存相同的字段而不是日期时，我感到非常惊讶，它在 shell 中表示为 ISODate。当检索到时，仍然存在几毫秒的差异。

我试图删除集合和索引。当它没有帮助时，我试图删除整个数据库。当它没有帮助时，我尝试删除整个数据库并重新启动 mongod。在此之后，我猜它开始将其保存为 Long。

**问题2：有人知道为什么会这样吗？**

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T09:31:10.873

可能是不同时区的情况。请使用下面提到的功能来纠正它。

```
function time_format(d, offset) {
    // Set timezone
    utc = d.getTime() + (d.getTimezoneOffset() * 60000);
    nd = new Date(utc + (3600000*offset));
    return nd;
}

searchdate = time_format(searchdate, '+5.5'); 
```

'+5.5' 这里是从本地时间到 GMT 时间的时区差异。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T23:52:24.897

Python 的时间戳从 1970 年 1 月 1 日的 Unix 纪元开始以**秒**为单位计算。另一方面，JavaScript（以及 MongoDB）中的时间戳以**毫秒为单位**。

也就是说，如果您手头只有时间戳，您可以将 Python 值乘以 1000 以获得毫秒并将该值存储到 MongoDB 中。同样，您可以从 MongoDB 中获取值并将其除以 1000 以使其成为 Python 时间戳。请记住，Python 似乎只关心小数点后的两位有效数字而不是三位（因为它通常不关心毫秒）所以如果您仍然有 < 10 毫秒的差异，请记住这一点。

通常我会建议使用元组来代替，但是每种语言的值范围的约定是不同的（JavaScript 是不直观的，因为它以 0 而不是 1 开始一个月的几天）并且可能会导致问题。

# c# - 是否可以在 emgucv 中找到“斑点”区域的边缘？

> ID：11031748
> 
> 赞同：11
> 
> 时间：2012-06-14T11:04:35.893
> 
> 标签：c#, .net, opencv, image-processing, emgucv

我有一个看起来像这样的图像：

![原来的](../Images/81f806f885c8813342ed75870315fd6b.png)

我想像这样找到黑暗部分的边缘（红线是我要找的）：

![必需的](../Images/5bcaaf974a594e9471c5eca598855113.png)

我尝试了一些方法，但都没有奏效，所以我希望那里有一位 emgu 大师愿意帮助我......

## 方法一

*   将图像转换为灰度
*   去除噪音并反转
*   删除任何不是很亮的东西
*   获取精明和多边形

代码（我知道我应该正确处理东西，但我保持代码简短）：

```
var orig = new Image<Bgr, byte>(inFile);

var contours = orig
    .Convert<Gray, byte>()
    .PyrDown()
    .PyrUp()
    .Not()
    .InRange(new Gray(190), new Gray(255))
    .Canny(new Gray(190), new Gray(255))
    .FindContours(CHAIN_APPROX_METHOD.CV_CHAIN_APPROX_SIMPLE,
                  RETR_TYPE.CV_RETR_TREE);

var output = new Image<Gray, byte>(orig.Size);    
for (; contours != null; contours = contours.HNext)
{
    var poly = contours.ApproxPoly(contours.Perimeter*0.05,
                                   contours.Storage);
    output.Draw(poly, new Gray(255), 1);
}
output.Save(outFile); 
```

这是结果：

![方法 1 结果](../Images/e42a30f5de0497142653b4287d340677.png)

## 方法二

*   将图像转换为灰度
*   去除噪音并反转
*   删除任何不是很亮的东西
*   得到精明，然后线条

代码：

```
var orig = new Image<Bgr, byte>(inFile);

var linesegs = orig
    .Convert<Gray, byte>()
    .PyrDown()
    .PyrUp()
    .Not()
    .InRange(new Gray(190), new Gray(255))
    .Canny(new Gray(190), new Gray(255))
    .HoughLinesBinary(
        1,
        Math.PI/45.0,
        20,
        30,
        10
    )[0];

var output = new Image<Gray, byte>(orig.Size);    
foreach (var l in linesegs)
{
    output.Draw(l, new Gray(255), 1);
}
output.Save(outFile); 
```

这是结果：

![方法 2 结果](../Images/903bfd5444540b28a8d3d8853b9d7784.png)

*笔记*

我已经尝试调整这两种方法的所有参数并添加平滑，但我永远无法获得我需要的简单边缘，因为我想，较暗的区域不是纯色。

我也尝试过膨胀和腐蚀，但我必须为它们输入的参数太高才能获得单一颜色，以至于我最终会在右侧包含一些灰色的东西并失去准确性。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-06-14T14:59:56.997

**是的，这是可能的**，您可以这样做：

*   改变图像的对比度，使较亮的部分消失：

![在此处输入图像描述](../Images/e60b48060c3e41a3d59b0b50a3ab8080.png)

*   然后，将其转换为 HSV 以对 Saturation 通道执行阈值操作：

![在此处输入图像描述](../Images/b1b4dfd6c5b9e6c6078c67c23b312a5c.png)

*   并执行侵蚀和扩张操作以消除噪音：

![在此处输入图像描述](../Images/877363658ec7d437a1ac16f5f36603a9.png)

此时，您将获得您正在寻找的结果。出于测试目的，最后我执行[了](https://stackoverflow.com/a/10239600/176769) [边界框](https://stackoverflow.com/a/10317919/176769)技术来展示如何检测感兴趣区域的开始和结束：

![在此处输入图像描述](../Images/c023cec38a38cfe06ae8964a46c15c74.png)

我没有时间调整参数并做出完美的检测，但我相信你能弄清楚。这个答案提供了实现这一目标的路线图！

这是我想出的 C++ 代码，我相信您能够将其转换为 C#：

```
#include <cv.h>
#include <highgui.h>

int main(int argc, char* argv[])
{
    cv::Mat image = cv::imread(argv[1]);
    cv::Mat new_image = cv::Mat::zeros(image.size(), image.type());

    /* Change contrast: new_image(i,j) = alpha*image(i,j) + beta */

    double alpha = 1.8;     // [1.0-3.0]
    int beta = 100;         // [0-100]
    for (int y = 0; y < image.rows; y++)
    { 
        for (int x = 0; x < image.cols; x++)
        { 
        for (int c = 0; c < 3; c++)
        {
            new_image.at<cv::Vec3b>(y,x)[c] = 
            cv::saturate_cast<uchar>(alpha * (image.at<cv::Vec3b>(y,x)[c]) + beta);
        }
        }
    }
    cv::imshow("contrast", new_image);

    /* Convert RGB Mat into HSV color space */

    cv::Mat hsv;
    cv::cvtColor(new_image, hsv, CV_BGR2HSV);
    std::vector<cv::Mat> v;
    cv::split(hsv,v);

    // Perform threshold on the S channel of hSv    
    int thres = 15;
    cv::threshold(v[1], v[1], thres, 255, cv::THRESH_BINARY_INV);
    cv::imshow("saturation", v[1]);

    /* Erode & Dilate */

    int erosion_size = 6;   
    cv::Mat element = cv::getStructuringElement(cv::MORPH_CROSS,
                          cv::Size(2 * erosion_size + 1, 2 * erosion_size + 1), 
                          cv::Point(erosion_size, erosion_size) );
    cv::erode(v[1], v[1], element);
    cv::dilate(v[1], v[1], element);    
    cv::imshow("binary", v[1]);

    /* Bounding box */

    // Invert colors
    cv::bitwise_not(v[1], v[1]);

    // Store the set of points in the image before assembling the bounding box
    std::vector<cv::Point> points;
    cv::Mat_<uchar>::iterator it = v[1].begin<uchar>();
    cv::Mat_<uchar>::iterator end = v[1].end<uchar>();
    for (; it != end; ++it)
    {
        if (*it) points.push_back(it.pos());
    }    

    // Compute minimal bounding box
    cv::RotatedRect box = cv::minAreaRect(cv::Mat(points));

    // Draw bounding box in the original image (debug purposes)
    cv::Point2f vertices[4];
    box.points(vertices);
    for (int i = 0; i < 4; ++i)
    {
        cv::line(image, vertices[i], vertices[(i + 1) % 4], cv::Scalar(0, 255, 0), 2, CV_AA);
    }

    cv::imshow("box", image);    
    cvWaitKey(0);

    return 0;
} 
```

# spring - 在 applicationContext.xml 和 Tomcat 中给出 AnnotationSessionFactoryBean 错误：java.lang.IncompatibleClassChangeError：实现类

> ID：11031753
> 
> 赞同：4
> 
> 时间：2012-06-14T11:04:47.343
> 
> 标签：spring, hibernate

为了集成 spring 和 hibernate，我将 sessionFactory bean 添加到 applicationContext.xml 中。

最初我使用了**org.springframework.orm.hibernate3.LocalSessionFactoryBean**并将映射资源作为 test.hbm.xml 文件。

现在我想使用带注释的实体类作为映射资源。为此，我将 sessionFactory 类更改为**org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean**。

## 应用程序上下文.xml

```
<bean id="sessionFactory" class="org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean">

<property name="dataSource" ref="dataSource"/>

<property name="annotatedClasses">
   <list>
       <value>org.droidaceapps.contractortimeflow.User</value>           
   </list>
</property>

<property name="hibernateProperties">
  <props>
    <prop key="hibernate.dialect">org.hibernate.dialect.MySQLDialect</prop>
    <prop key="hibernate.hbm2ddl.auto">update</prop>        
  </props>
</property> 
```

但是 Tomcat 抛出了下面的异常，

```
 **Caused by: java.lang.IncompatibleClassChangeError: Implementing class**
at java.lang.ClassLoader.defineClass1(Native Method)
at java.lang.ClassLoader.defineClass(ClassLoader.java:791)
at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:142)
at org.apache.catalina.loader.WebappClassLoader.findClassInternal(WebappClassLoader.java:2823)
at org.apache.catalina.loader.WebappClassLoader.findClass(WebappClassLoader.java:1160)
at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1655)
at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1533)
at java.lang.Class.getDeclaredConstructors0(Native Method)
at java.lang.Class.privateGetDeclaredConstructors(Class.java:2404)
at java.lang.Class.getConstructor0(Class.java:2714)
at java.lang.Class.getDeclaredConstructor(Class.java:2002)
at org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:104)
at org.springframework.orm.hibernate3.LocalSessionFactoryBean.newConfiguration(LocalSessionFactoryBean.java:779)
at org.springframework.orm.hibernate3.LocalSessionFactoryBean.buildSessionFactory(LocalSessionFactoryBean.java:561) 
```

我错过了什么吗？

谢谢

# android - 按下时，ActionBar 更改 menuitem 按钮的颜色

> ID：11031759
> 
> 赞同：3
> 
> 时间：2012-06-14T11:05:00.683
> 
> 标签：android, android-actionbar, actionbarsherlock

按下时如何更改菜单项按钮的颜色。我使用 SherlockActionBar，但是当它按下时，它会改变颜色，这对我的设计来说并不是很好。我需要改变这个颜色。

**更新：**

关键是当我设置drawable时，我放置在背景上，当按下按钮时，我的drawable更改附近的bckground发生变化。我可以更改可绘制对象，但背景仍会将其颜色更改为丑陋的颜色。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-14T14:55:10.913

`actionBarItemBackground`您可以通过在主题中设置属性来更改背景。这应该是一个状态列表drawable，它反映了诸如按下和聚焦等状态。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T11:18:02.943

这是您在单击菜单项时将图标更改为新图标的方式。好的，首先创建一个成员变量，并在 onCreateOptionsMenu() 中获取对菜单项的引用。

然后，当您单击该项目时，将该项目设置为一个新的可绘制对象（您的颜色）

```
MenuItem mMenuItem;

.....

menu.add("Map").setShowAsAction(MenuItem.SHOW_AS_ACTION_IF_ROOM  |     MenuItem.SHOW_AS_ACTION_WITH_TEXT);
mMenuItem = menu.getItem(0); 

......
mMenuItem.setIcon(android.R.drawable.ic_menu_set_as); 
```

希望这可以帮助。

# php - 如何保护我的网站

> ID：11031760
> 
> 赞同：5
> 
> 时间：2012-06-14T11:05:07.780
> 
> 标签：php, security

我知道保护任何网站都是一个非常艰难和广泛的话题，但我想将这个问题与我一直在努力的特定网站联系起来。它是在 2004 年左右由其他一些程序员用 php 编码的，我负责它的管理。我的问题是它一次又一次地被黑客入侵。当它被黑客入侵时，我注意到了以下事情。

1.  `.htaccess`文件已被修改
2.  `index.php`和`config.php`文件被修改
3.  管理员密码已更改
4.  在服务器中上传文件
5.  更改文件和文件夹的文件权限

我已经处理过代码，它已被正确转义，我认为没有 sql 注入的可能性。由于大部分问题与文件和权限有关，我对服务器安全性有疑问，但由于它是在 2004 年左右编码的原因，它肯定会缺乏一些安全性，所以我需要在我的代码中处理哪些其他事情防止我的网站因上述问题而被黑客入侵？

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-14T11:16:10.983

由于文件已被修改，由于 SQL 注入错误，这不太可能发生。

获取文件的可能性：

*   猜测/窃取您的 FTP 密码
*   破解服务器（您对此无能为力）
*   服务器上的隔离不足，这意味着其他客户可以更改您的文件（您也无能为力）
*   远程代码执行错误

现在，既然您说该网站是从 2004 年开始的，它可能是`eval`用于模板或`include`类似的东西`site.php?section=foo`，然后包含`foo.php`在某处的代码中，这两者都在 2004 年经常完成。所以我会做一个快速的文件搜索 eval 和正则表达式`include(.*\$.*)`以及`require(.*\$.*)`. 这些是主要嫌疑人，具体取决于它们的使用方式。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-14T11:08:25.560

有人可能直接访问服务器，而不是特别是（a）脚本。这听起来不像是源于代码库的安全问题。

如果这种情况一次又一次地发生，您可能需要考虑将整个站点转移到另一个提供商。从其他地方重新开始，使用新密码、访问控制等。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-14T12:05:03.750

[OWASP top 10](https://www.owasp.org/index.php/Top_10_2010-Main)非常好读。我的一些猜测。

*   有漏洞的过时操作系统。
*   MySQL 注入，可能所有密码都以纯文本形式存储，这非常非常糟糕。对于身份验证，您应该改用 openID 之类的东西。此外，当您进行 MySQL 注入时，您应该尽可能更新代码以使用 PDO（准备好的语句）。
*   读/写权限设置不正确或 APACHE/PHP 在更高级别运行？

我给你的建议是：

*   阅读有关 OWASP 的信息。然后清楚地寻找代码中的缺陷。每条线都可能是源问题。也许你应该抛弃旧代码，因为非常不安全？
*   重新安装你的操作系统，因为你甚至可以有一个rootkit？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-30T04:46:39.413

*   永远不要只使用共享主机，至少使用托管服务器/保持系统最新
*   检查您的 php.ini 是否存在安全问题（您可以用谷歌搜索）
*   检查您的 Apache/Nginx/... 配置是否有覆盖
*   永远不要与服务器进行未加密的通信（使用 SFTP、SSH、...）
*   永远不要相信外部值（也来自 Cookie），总是逃避/转换那些
*   过滤用户输入（删除换行符，0x00 字符，标签，......在不需要的地方）
*   检查服务器/数据库/...的所有可能存在的用户帐户
*   检查所有服务是否以正确的用户身份运行
*   检查您的网络文件夹中的文件（写入/执行）权限
*   转义您在网站上显示的所有内容，甚至不相信您的数据库数据以任何方式安全
*   如果您使用第 3 方软件，请注意安全建议
*   重新安装服务器，你可能已经root了
*   使用准备好的语句

就是这样；）这将大大增强您的安全性，但有经验的攻击者是强硬的。

# javascript - 在 jQuery textarea 中编辑 Div 内容

> ID：11031761
> 
> 赞同：0
> 
> 时间：2012-06-14T11:05:07.760
> 
> 标签：javascript, jquery, html-editor

我正在使用 Dmxzones Advanced HTML Editor 3，它插入以下代码：

```
<textarea id="advHTMLEdit1" name="advHTMLEdit1" class="dmxEditor" style="width:700px;height:300px"></textarea>

 jQuery(document).ready(
   function()
     {
       jQuery("#advHTMLEdit1").dmxEditor(
         {"width": 700, "lineBreak": "p", "allowUpload": true, "uploadPath": "tmp", "subFolder": "1", "uploadProcessor": "php", "allowResize": true, "includeCss": "tutorial.css", "skin": "blue"
       );
     }
 ); 
```

它使用 javascript execCommand() 插入元素，并将类样式应用于这些元素。

和：`jQuery("#advHTMLEdit1")[0]`

我似乎能够访问它，但我尝试过的任何东西都没有让我访问 childNodes。我希望能够遍历编辑器创建的每个 childNode，查询类，如果它是特定的 className，则替换该元素上的 HTML。

我不使用 jQuery，虽然我自己尝试了很多事情，但我似乎无法访问编辑器创建的任何这些元素。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T11:44:29.990

[从这个](https://stackoverflow.com/questions/997986/write-elements-into-a-child-iframe-using-javascript-or-jquery)答案中借用一点，并根据您提供的链接，您应该执行以下操作：

如果要`css`对所有匹配的类应用一致：

```
var ifrm = $("#advHTMLEdit1").prev(".dmx-editor-frame-wrapper").find("iframe")[0];
ifrm = (ifrm.contentWindow) ? ifrm.contentWindow : (ifrm.contentDocument.document) ? ifrm.contentDocument.document : ifrm.contentDocument;
ifrm = $(ifrm.document);
ifrm.find(".yourClass").css("cssProperty", "cssValue"); 
```

如果要`css`对所有元素应用不同的：

```
var ifrm = $("#advHTMLEdit1").prev(".dmx-editor-frame-wrapper").find("iframe")[0];
ifrm = (ifrm.contentWindow) ? ifrm.contentWindow : (ifrm.contentDocument.document) ? ifrm.contentDocument.document : ifrm.contentDocument;
ifrm = $(ifrm.document);
var elem;
ifrm.find("body *").each(function(){
    elem = $(this);        
    if(elem.hasClass("yourClass") && elem.is("span")) {
        //elem.css("cssProperty", "cssValue");                
        elem.text("new text");
    }
}); 
```

如果要更改具有特定类的所有跨度的文本，可以使用更短的代码执行以下操作，无需循环：

```
ifrm.find("span.myClass").text("new text"); 
```

`span`仅当 的新文本取决于名称时才使用第二个示例`class`。

**编辑：** 根据您在页面中提供的示例，您可以编写：

```
ifrm.find("p.codeblock").text("new text"); 
```

# android - 如果包含 RatingBar，列表项变得不可点击？

> ID：11031763
> 
> 赞同：8
> 
> 时间：2012-06-14T11:05:12.180
> 
> 标签：android, android-listview

我使用了**自定义**列表视图和**自定义**评分栏。

如果*我将该自定义添加`RatingBar`为子`List item`*项，**则列表项将变为不可点击**。

如果*我删除该 Ratingbar 视图，则它变为可点击*的。

我使用了自定义评分栏。这是[链接](http://android-helper.blogspot.in/2011/06/android-custom-ratingbar-example.html)。

谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-14T11:25:36.297

如果您希望您的评分栏执行评分，您可以添加

```
 android:focusable="false"
 android:focusableInTouchMode="false" 
```

查看您的`row.xml`

如果你想要一个保持其速率的静态评级栏，你可以给[setIsIndicator(boolean isIndicator)](http://developer.android.com/reference/android/widget/RatingBar.html#setIsIndicator%28boolean%29)

```
ratingbar.setIsIndicator(true); 
```

在您的适配器类中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-16T15:08:42.930

行。我终于可以做到了。在适配器类放休闲

RatingBar ratingBar=(RatingBar)view.findViewById(R.id.ratingBarSummaryChild);

ratingBar.setFocusable(false);

返回视图；

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-14T11:07:55.637

为评分栏设置 android:focusable="false"

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-14T11:23:03.850

设置 RatingBar 属性a Focusable = false; 可点击=假；

# codeigniter - Codeigniter：在 CI_Lang 子类中加载模型

> ID：11031766
> 
> 赞同：0
> 
> 时间：2012-06-14T11:05:18.430
> 
> 标签：codeigniter, instance

我正在使用 Jérôme Jaglale 编写的 i18n 库：http: [//maestric.com/doc/php/codeigniter_i18n](http://maestric.com/doc/php/codeigniter_i18n)

在那里，语言存储在库中，在这样的数组中：

```
 // languages
  var $languages = array(
    'de' => 'german',
    'en' => 'english'
  ); 
```

我想要做的是从数据库表中获取这些语言，如下所示：

```
 function __construct()
  {
    parent::__construct();

    $CI =& get_instance();
    $CI->load->model("language_model");
    $languages = $CI->language_model->find_all();

    ...
  } 
```

但这会在尝试获取 CI 实例时出现错误：

```
PHP Fatal error:  Class 'CI_Controller' not found in .../system/core/CodeIgniter.php on line 233 
```

知道如何在语言库中获取 CI 实例吗？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T13:13:01.193

最后，我根本没有加载模块。我只是获取了 DB 对象并直接执行了查询，如下所示：

```
$db =& DB();
$db->where('active', 1);
$languages = $db->get('language')->result(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-18T08:35:24.250

不试试这个..对我有用

```
 $CI =& get_instance();

      $CI->load->database();
      $CI->load->model('language_model');
      $lang['welcome_txt_description']=$CI->language_model->get_site_description_language(5,'german'); 
```

来自 Buddhika Perera >>>>>> 斯里兰卡

# ruby-on-rails - 如何以编程方式将用户 X509 证书转发到另一台服务器？

> ID：11031770
> 
> 赞同：0
> 
> 时间：2012-06-14T11:05:35.187
> 
> 标签：ruby-on-rails, ruby, openssl, jruby, x509

我有一个部署到 Tomcat 的 JRuby on Rails 应用程序，该应用程序设置为使用 SSL 进行双向/相互身份验证。当请求进入我的 Rails 应用程序时，它会向外部服务器发出请求。该外部服务器需要发起请求的人的证书。我需要从我的 Rails 应用程序中获取证书并在向外部服务器（另一个 Rails 应用程序）发出请求时将其转发。

我可以在 Rails 应用程序的控制器中获取 X509Certificate (java) 对象。然后我可以获得 DER 字符串（X509CertificateImpl#getEncoded，类似的东西），如果需要，我可以构建一个 PEM 字符串......但是在向外部 Rails 应用程序发出请求时如何转发它？

我尝试将 urlsafe base64 编码的 PEM 版本粘贴到标头中，但是当我在外部 rails 应用程序上拉出该标头时，它似乎只得到了一部分（60 个字符，而不是发送的 2095 个字符）。

关于如何做到这一点的任何想法/想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T11:35:59.663

如果外部服务器需要客户端 SSL 身份验证而不仅仅是证书，那么您就不走运了。原因是 SSL 认证是使用私钥执行的，而不是证书本身。并且私钥不会传输到服务器。所以拿证书不会给你任何东西。

# mobile - 移动应用架构与其他应用架构

> ID：11031771
> 
> 赞同：1
> 
> 时间：2012-06-14T11:05:37.297
> 
> 标签：mobile, architecture

我是移动开发世界的新手，所以我想知道移动应用程序**架构**和其他简单应用程序架构（没有移动应用程序）之间的区别。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T12:39:56.320

移动应用程序在所有重要方面都类似于富客户端架构。

# c++ - 阿特金筛分仪在非常高的限制下出现故障

> ID：11031783
> 
> 赞同：3
> 
> 时间：2012-06-14T11:06:36.323
> 
> 标签：c++, sieve-of-atkin

我正在尝试解决[Project Euler 问题 10](http://projecteuler.net/problem=10)，其中要求用户计算小于 200 万的所有素数的总和。我通过研究[Wikipedia 上的伪代码](http://en.wikipedia.org/wiki/Sieve_of_Atkin#Pseudocode)编写了以下内容，但它生成的答案似乎不正确，至少根据该网站，每当我尝试输入它时：

```
int main()
{
   int limit = 2000000;
   int answer = 5;

   std::vector<bool> isPrime;
   for( int i = 0; i < limit; ++i ){
      isPrime.push_back( false );
   }

   int n = 0;
   for( int x = 1; x <= ceil( sqrt( limit ) ); ++x ){
      for( int y = 1; y <= ceil( sqrt( limit ) ); ++y ){

         n = 4*x*x + y*y;
         if( (n <= limit) && ( n%12 == 1 || n%12 == 5 ) ){
            isPrime.at(n) = ! isPrime.at(n);
         }

         n = 3*x*x + y*y;
         if( (n <= limit) && ( n%12 == 7 ) ){
            isPrime.at(n) = ! isPrime.at(n);
         }

         n = 3*x*x - y*y;
         if( (x > y) && (n <= limit) && (n%12 == 11) ){
            isPrime.at(n) = ! isPrime.at(n);
         }
      }
   }

   for( n = 6; n <= ceil( sqrt( limit ) ); n += 2 ){
      if( isPrime.at(n) ){
         for( int m = n*n; m < limit; m += n*n ){
            isPrime.at(m) = false;
         }
      }
   }

   for( int i = 5; i < limit; i += 2 ){
      if( isPrime.at(i) ){
         answer += i;
      }
   }

   std::cout << "The sum of the primes below " << limit << " is " << answer << std::endl;

   return 0;
} 
```

生成以下输出：

```
The sum of all the primes below 2000000 is 1179908154 
```

我已经用较小的限制对其进行了测试，我可以手动验证，并且代码对于这些数字确实可以正常运行。我发现其他人的实现表明答案应该是`142913828922`，但我无法弄清楚他们的代码与我的不同之处。

谁能看到我在这里做错了什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-14T11:10:40.413

您只有一个带符号的 32 位整数作为答案。实际答案*远*高于 32 位，因此您必须转而使用 64 位整数。尝试`unsigned long long`改用。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-14T11:15:50.377

您可以创建自己的类来存储大数字。或者您可以使用整数数组来存储您的答案并将每个数字存储在每个索引处。（即使 unsigned long long 不起作用）:)

# unix - UNIX 中 txt 文件中的序列号

> ID：11031784
> 
> 赞同：1
> 
> 时间：2012-06-14T11:06:37.463
> 
> 标签：unix, awk

我想为unix文件中的每一行生成一个唯一的序列号。我无法在数据库中创建标识列，因为它还有一些其他来源也可以在其中插入数据。我尝试在 awk 中使用 NR 编号，但由于我的脚本中有过滤器，它可能会跳过文件中的行，因此我可能无法获得序列号。我的要求是 - 这个序列号需要保持不变，因为我每天都会收到这个文件，并且应该从我离开的地方开始。对于文件中的每一行，数字还需要以“EMP_”开头。

请建议。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T11:15:48.543

要在 UNIX 中获取唯一 id，您可以使用 file 来存储和读取该值。但是这种方法非常繁琐，并且需要文件 IO 锁定机制。最简单的方法是使用日期时间来获取唯一 ID 示例：

```
#!/bin/sh

uniqueVal = `date '+%Y%m%d%H%M%S'` 
```

# map - Hadoop：键和值在输出文件中以制表符分隔。如何做到分号分隔？

> ID：11031785
> 
> 赞同：12
> 
> 时间：2012-06-14T11:06:38.603
> 
> 标签：map, hadoop, mapreduce, reduce

我认为标题已经在解释我的问题。我想改

```
key (tab space) value 
```

进入

```
key;value 
```

在所有输出文件中，reducer 都是从映射器的输出生成的。

我无法使用谷歌找到关于此的好的文档。谁能提供一些关于如何实现这一目标的代码？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-14T12:05:07.510

将配置属性设置`mapred.textoutputformat.separator`为`";"`

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-09-08T17:38:19.283

由于缺乏更好的文档，以下是我收集的内容：

```
 setTextOutputFormatSeparator(final Job job, final String separator){
            final Configuration conf = job.getConfiguration(); //ensure accurate config ref

            conf.set("mapred.textoutputformat.separator", separator); //Prior to Hadoop 2 (YARN)
            conf.set("mapreduce.textoutputformat.separator", separator);  //Hadoop v2+ (YARN)
            conf.set("mapreduce.output.textoutputformat.separator", separator);
            conf.set("mapreduce.output.key.field.separator", separator);
            conf.set("mapred.textoutputformat.separatorText", separator); // ?
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-14T12:10:12.193

您可以使用“KeyValueLineRecordReader”的“KEY_VALUE_SEPERATOR”属性来指定您选择的分隔符。

# c - 将字符串存储在 char 指针数组中的错误

> ID：11031798
> 
> 赞同：0
> 
> 时间：2012-06-14T11:07:16.017
> 
> 标签：c

我知道这个问题可能听起来很傻，但我不知何故发现自己陷入困境并需要帮助。我有一个`char*`变量`char* address="/a/asdasd/c/sdfsdf/adsd";`，我声明了一个 char 指针数组`char* store[5];`。我试图`address`通过跟踪斜杠（`/`）来划分变量中的内容，并尝试`store`通过执行以下操作将每个部分存储在 char 指针变量中

```
char* store[5];
char* address="/a/asdasd/c/sdfsdf/adsd";
int k=0;
int j=0;
char* b=NULL;
for(int i=0;i<5;i++)
{
    if(b==0)
    {
        b=strchr(address,'/');
    }
    else
    {
        b=strchr(b,'/');
    }
    j=b-address;
    strncpy(store[i],address+k,j-k);
    k=j;
} 
```

但我看到代码`strncpy(store[i],address+k,j-k)`中有一个错误。编译器似乎不明白这`store[i]`是一个字符指针，而是认为它是一个字符。你能看看我如何解决这个问题吗？

感谢所有的帮助。我已经解决了。解决方案代码如下：

```
char* address="/a/asdasd/c/sdfsdf/adsd/asfsd";

     char store[5][100];
     char* b=NULL;
     int k=0;
     int j=0;
     for(int i=0;i<5;i++)
     {
         if(b==0)
         {
             b=strchr(address+1,'/');
         }
         else
         {
             b=strchr(b+1,'/');
         }
         j=strlen(address)-strlen(b);
         strncpy(store[i],address+k+1,j-k-1);
         store[i][j-k-1]='\0';
         printf("%s\n",store[i],j-k);
         k=j;
     } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T11:16:58.613

```
char *store[5] 
```

这只是一个 char 指针数组。要在此数组的每个元素中存储字符串，您需要 malloc 内存并将其分配给相应的指针。

对于 Ex，您可以将代码更改为

```
store[i] = malloc ((j-k)+ 1); // +1 is for the null terminator. Pls check return value of malloc also.
strncpy(store[i],address+k,j-k); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T11:08:42.410

如果要复制指针，则不应调用`strncpy()`，因为它会复制字符。

你要：

```
store[i] = address + (j - k); 
```

假设`address + (j - k)`是零件的所需起点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T11:35:44.720

如果您不想拥有字符串标记的副本，如果您只想保留指针，那么就像@unwind 指出的那样，只需将地址存储在 store[i] 中。否则，您也可以探索 strtok () 。唯一的想法是您需要有单独的数组来根据您的代码保留字符串的每个长度。希望这可以帮助。

# python - 这个方法是怎么调用的？(Pyglet)

> ID：11031809
> 
> 赞同：0
> 
> 时间：2012-06-14T11:07:59.773
> 
> 标签：python, pyglet

以下代码是 pyglet 使用的通常样式（使用装饰器）的替代方案。

谁能解释这里如何调用 on_draw() 方法？

```
import pyglet

class HelloWorldWindow(pyglet.window.Window): 
    def __init__(self):
        super(HelloWorldWindow, self).__init__() 
        self.label = pyglet.text.Label('Hello, world!') 

    def on_draw(self):
        self.clear() 
        self.label.draw() 

if __name__ == '__main__':
    window = HelloWorldWindow() 
    pyglet.app.run() 
```

使用装饰器编写的代码可以在[这里](http://vidyadev.com/wiki/index.php?title=Pyglet_Tutorial)找到。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T11:15:36.080

您只需挖掘[源代码](http://code.google.com/p/pyglet/source/browse/pyglet)即可找到答案。

EventLoop类（您使用它）[定期](http://code.google.com/p/pyglet/source/browse/pyglet/app/base.py)`pyglet.app.run()`调度`on_draw`事件。

从来源：

> 调用`run`开始应用程序事件循环，它处理操作系统事件、调用`pyglet.clock.tick`调度函数和调用`pyglet.window.Window.on_draw`以及 `pyglet.window.Window.flip`更新窗口内容。

[Window](http://code.google.com/p/pyglet/source/browse/pyglet/window/__init__.py)类订阅此事件：

```
BaseWindow.register_event_type('on_draw') 
```

因此，通过子类化`Window`，您可以确保`on_draw`调用您的方法。

查看[编程指南](http://www.pyglet.org/doc/programming_guide/setting_event_handlers.html)，了解 pyglet 的事件系统如何工作的示例。

# android - Maven 不会因引入的编译错误而失败

> ID：11031812
> 
> 赞同：0
> 
> 时间：2012-06-14T11:08:09.840
> 
> 标签：android, maven, compilation, compiler-errors, jenkins

只是将我的 Android 项目转移到 Maven / Jenkins 并正在探索构建 / 编译 / 测试程序。

问题：我在 java 代码中引入了一个简单的编译错误，但是当我运行 mvn clean install package 时，我得到了构建成功。只有当我将应用程序部署到我的设备时，它才会崩溃和失败。

我的 POM 有问题吗？

附言。我已经 XXXXX 提供了一些信息。别担心。

```
 <?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
    <modelVersion>4.0.0</modelVersion>

  <parent>
    <groupId>xxxxx</groupId>
    <artifactId>xxxxxx</artifactId>
    <version>1.0.0</version>
  </parent>

   <groupId>xxxxx</groupId>
    <artifactId>xxxx</artifactId>
    <version>1.0.0</version>
    <packaging>apk</packaging>
    <name>Android App</name>

    <dependencies>
        <dependency>
            <groupId>com.google.android</groupId>
            <artifactId>android</artifactId>
            <version>4.0.1.2</version>
            <scope>provided</scope>
        </dependency>

       <dependency>
            <groupId>com.actionbarsherlock</groupId>
            <artifactId>library</artifactId>
            <version>4.0.0</version>
            <type>apklib</type>
        </dependency>   
    </dependencies>

    <build>
    <plugins>
      <plugin>
        <groupId>com.jayway.maven.plugins.android.generation2</groupId>
        <artifactId>android-maven-plugin</artifactId>
        <configuration>
          <androidManifestFile>${project.basedir}/AndroidManifest.xml</androidManifestFile>
          <assetsDirectory>${project.basedir}/assets</assetsDirectory>
          <resourceDirectory>${project.basedir}/res</resourceDirectory>
          <nativeLibrariesDirectory>${project.basedir}/src/main/native</nativeLibrariesDirectory>
          <sdk>
            <platform>15</platform>
            <path>/Users/aidenfry/android-sdks</path>
          </sdk>
          <undeployBeforeDeploy>true</undeployBeforeDeploy>
        </configuration>
        <extensions>true</extensions>
      </plugin>
      <plugin>
        <artifactId>maven-compiler-plugin</artifactId>
        <configuration>
          <source>1.5</source>
          <target>1.5</target>
        </configuration>
      </plugin>
    </plugins>
  </build>
</project> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T11:31:28.263

我怀疑，您没有看到错误的原因很可能是因为 Maven 一开始甚至没有费心编译您的类。

Maven 有各种约定，其中之一是它希望您的源代码位于`src/main/java`.

我敢打赌，您刚刚将上述`pom.xml`内容放入您的项目根区域并运行`mvn clean install`. Maven 会很高兴地运行它，但是由于您可能将源文件留在了默认的 IDE 位置，因此 Maven 会跳过它。看看你的目标目录，你会发现它没有为你编译任何类

您有 2 个选项：

1.  在上面 pom的标签内添加这个`<build>`： ${basedir}/src
2.  重新排列您的源文件，使它们遵循`src/main/java`结构。

就个人而言，我会选择2号。

PS，也有`src/main/test`，测试班应该去那里:)

[您可以在此处](http://maven.apache.org/pom.html)阅读有关 pom 文件配置的更多信息

# android - 如何在单击后立即禁用按钮

> ID：11031814
> 
> 赞同：6
> 
> 时间：2012-06-14T11:08:16.497
> 
> 标签：android, button

我有一个按钮，单击时会加载另一个活动，但在它加载另一个活动之前，如果我连续点击它，它会启动该活动，但相同的活动会加载两次或更多次。我在 button.setOnClickListener...onClick 之后不久尝试了 button.setEnabled(false) 但这并没有禁用按钮，我也在点击按钮后立即记录文本，因此根据我的点击它会记录文本 2或 3 次，即使我已经点击了 10 次。我在这里的感觉是在按钮可以收听点击事件之前，我点击它的速度非常快，以至于它在我点击它时会多次收听所有这些事件。

因此，我需要一些按钮可以只听一击然后禁用它的东西。

请帮忙

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-14T11:17:49.487

它的已知问题。基本上你可以设置标志。

```
int flag=1;

 @Override
        public void onClick(View v) 
           {

                if(flag)
                 {
                   button.setEnabled(false);
                   Log.d("ins", "called");
                 }
                flag=0;
            } 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-09-17T23:54:24.810

更优选的解决方案是，

```
onclick(){
  btn.setEnabled(false);
  btn.setClickable(false);
  //yourwork
  myWork();
}

myWork(){
 //your tasks.
 btn.setEnabled(true);
 btn.setClickable(true);
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-14T11:17:02.573

这可以被认为是一个android-bug。您的假设是正确的，即单击事件被系统捕获，并且如果连续单击可单击事件，则可能为时已晚。您可以尝试通过插入这样的`boolean`值来解决此问题

```
private boolean handledClick = false;

public void onClick(View v){
    if (!handledClick){
        handledClick = true;
        startActivity(...);
    }
} 
```

这将确保即使`onClick`多次触发，内部的代码也只会执行一次......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-14T11:15:39.987

我也有类似的问题，但我能够`onClick()`通过使用按钮的 button.setEnabled(false) 在侦听器的回调方法中禁用按钮。`onResume()`我在,`onRestart()`和`onWindowFocusChanged()`具有该按钮的活动中启用按钮。

我认为这是禁止用户（连续）点击按钮的方法之一。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-14T11:16:35.697

如果 go 指的是你需要的按钮，

```
 go.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
    //    your code here
          go.setEnabled(false);
        }
    }); 
```

编辑：既然它还在排队，怎么样。

```
s.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
            s.setEnabled(false);
            if(flag == 1){
                flag=0;
                //your code here
            }
        }
    }); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-14T11:33:58.527

我也有同样的问题，这就是我解决它的方法：

```
int flag = 1;

 private OnClickListener btnNextActivity = new OnClickListener(){
    public void onClick(View v) {

            if(flag){
          Intent nextActivity = new Intent(getApplicationContext(),NextActivity.class);
          nextActivity.setClassName(". . .",". . ." );
          . . .
          startActivity(nextActivity);
          flag = 0;
            }

           else{
            Show Toast Message Here
              }
      }
}; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-01-28T06:43:22.437

# javascript - 表格未显示

> ID：11031822
> 
> 赞同：0
> 
> 时间：2012-06-14T11:08:47.327
> 
> 标签：javascript, html-table

我想按照下面代码中的方式显示表格，但不显示在屏幕上，代码仅使用 html 和 Javascript

```
<body id="page">
 <center>
    <table id="tables" border="1px" cellspacing="50px" style="margin-top:70px" >
    <script type="text/javascript">
     var row=2;

        for(var j=1;j<=2;j++){          
            $('#tables').append("<tr id='row"+j+"' style='margin-bottom:50px'>");
            for(var k=1;k<=5;k++){
                $("#row"+j).append("<td id='table"+k+"' class='button'  width='150' height='150' onclick='printBill("+k+")' background='images/green.png' align='center'>"+
                                            "<font size='+8'><b>"+k+"</b></font>"+
                                            "<br><font id='clock"+k+"' size='+1'> 0:0:0 </font>"+
                                        "</td>");
                }
            $('#tables').append("<tr id='row"+j+"' style='margin-bottom:50px'>");
        }

    </script>

    </table>
</center>
</body> 
```

任何人都可以帮助找出这段代码有什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T12:34:57.943

您可以使用两种典型的方式在页面加载时修改文档：

虽然 html 仍在加载：

```
<table id="tables">
  <tbody>
    <script type="text/javascript">
      document.write('<tr>......</tr>');
    </script>
  </tbody>
</table> 
```

加载 html 页面后（更具体地说，当 DOM 准备好时）：

```
<table id="tables">
  <tbody>
  </tbody>
</table>
<script type="text/javascript">
  $(function(){ // see http://api.jquery.com/jQuery/#jQuery3
    // the full DOM is ready now, you can start modifying it.
    $('#tables > tbody').append('<tr>......</tr>');
  });
</script> 
```

正如你所看到的，我在 s和它的 s`tbody`之间插入了一个标签：浏览器通常会创建这个标签，即使你的源代码不包含它。通过始终添加（或如果您愿意），您可以避免一些潜在的麻烦。`table``tr``tbody``tbody``thead/tfoot`

参见例如[我可以依赖 `tbody` 标签的隐式创建吗？](https://stackoverflow.com/questions/7372243/can-i-rely-on-the-implicit-creation-of-the-tbody-tag)或搜索`implicit tbody`。

我清理了你的代码：http: [//jsfiddle.net/6332Q/1/](http://jsfiddle.net/6332Q/1/)

# c# - 如何将数据从 Excel 导出为 png？

> ID：11031824
> 
> 赞同：0
> 
> 时间：2012-06-14T11:09:05.220
> 
> 标签：c#, .net, excel

我有一组带有多个选项卡的 Excel 电子表格，其中包含我需要在自动化过程中导出为图片的每个表格（我有几十个这样的文件要处理）。

虽然我可以“手动”选择表格，将它们作为图像复制并粘贴到另一个软件中，但我需要将这个过程工业化以节省时间。

使用 .Net 或任何内置 Excel 功能的最佳方法是什么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T11:14:01.737

检查这个问题。 [以编程方式 (C#) 将 Excel 转换为图像](https://stackoverflow.com/questions/1287879/programmatically-c-convert-excel-to-an-image)

看起来他们正在做你需要的？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T13:07:38.237

想我会用一个小的 C# apop 来做这件事——假设你有一个一次性的任务，不想弄乱 Excel 模板或全局 excel 宏并打开每个电子表格等。

我会这样做：

1.  将我所有的 excel 文档转储到一个文件夹中。
2.  在 C# 应用程序中打开文件夹中的每个文档
3.  迭代每个选项卡
4.  如果数据捕获所有使用范围的数据（从 A1 到右下角的任何单元格） - 对于任何嵌入式图表，也将它们拉出
5.  如果图表把它拉下来
6.  将每个文件作为图像转储到文件夹中，前缀为 excel 文档名称和一些迭代后缀，如 _chat01 _data01

如何将其 rwead 并转换为图像？见这里 => [http://csharp.net-informations.com/excel/csharp-excel-chart-picturebox.htm](http://csharp.net-informations.com/excel/csharp-excel-chart-picturebox.htm)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-27T02:11:03.117

1.  复制所有需要的单元格
2.  打开 MS-Paint
3.  粘贴
4.  另存为PNG。

# python - 在 Python 中连接具有相同第一列值的 CSV 文件的所有行

> ID：11031832
> 
> 赞同：2
> 
> 时间：2012-06-14T11:09:53.063
> 
> 标签：python, csv

我有一个 CSV 文件，它是这样的：

> ['Name1','','','','','','','','','','','','','','','', '', '', '', '', '+']
> ['Name1', '', '', '', '', '', 'b', '', '', '', ' ', '', '', '', '', '', '', '', '', '', '']
> ['Name2', '', '', '', '', ' '，''，''，''，''，''，''，''，''，''，''，''，''，''，'a'，'']
> ['名称3', '', ''，''，''，'+'，''，''，''，''，''，''，''，''，''，''，''，''，'' , '', '']

现在，我需要一种方法将具有相同第一列名称的所有行加入一列，例如：

> ['Name1','','','','','','b','','','','','','','','','' , '', '', '', '', '+']
> ['Name2', '', '', '', '', '', '', '', '', '', ' ', '', '', '', '', '', '', '', '', 'a', '']
> ['Name3', '', '', '', '', '+', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '']

我可以通过对 CSV 进行排序然后遍历每一行和每一列并比较每个值来想办法做到这一点，但可能应该有一种更简单的方法来做到这一点。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T11:43:33.033

您应该使用 itertools.groupby：

```
t = [ 
['Name1', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '+'],
['Name1', '', '', '', '', '', 'b', '', '', '', '', '', '', '', '', '', '', '', '', '', ''],
['Name2', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', 'a', ''],
['Name3', '', '', '', '', '+', '', '', '', '', '', '', '', '', '', '', '', '', '', '', ''] 
]

from itertools import groupby

# TODO: if you need to speed things up you can use operator.itemgetter
# for both sorting and grouping
for name, rows in groupby(sorted(t), lambda x:x[0]):
    print join_rows(rows) 
```

很明显，您将在单独的函数中实现合并。例如像这样：

```
def join_rows(rows):
    def join_tuple(tup):
        for x in tup:
            if x: 
                return x
        else:
            return ''
    return [join_tuple(x) for x in zip(*rows)] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T11:25:57.330

```
def merge_rows(row1, row2):
    # merge two rows with the same name
    merged_row = ...
    return merged_row

r1 = ['Name1', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '+']
r2 = ['Name1', '', '', '', '', '', 'b', '', '', '', '', '', '', '', '', '', '', '', '', '', '']
r3 = ['Name2', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', 'a', '']
r4 = ['Name3', '', '', '', '', '+', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '']
rows = [r1, r2, r3, r4]
data = {}
for row in rows:
    name = row[0]
    if name in data:
        data[name] = merge_rows(row, data[name])
    else:
        data[name] = row 
```

您现在拥有所有行，`data`其中该字典的每个键是名称，对应的值是该行。您现在可以将此数据写入 CSV 文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T12:38:43.817

您还可以使用`defaultdict`：

```
>>> from collections import defaultdict
>>> d = defaultdict(list)
>>> _ = [d[i[0]].append(z) for i in t for z in i[1:]]
>>> d['Name1']
['', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '+', '', '', '', '', '', 'b', '', '', '', '', '', '', '', '', '', '', '', '', '', ''] 
```

然后加入你的专栏

# weblogic - 从 Weblogic 10.3.5 中删除 Logback 配置文件

> ID：11031834
> 
> 赞同：0
> 
> 时间：2012-06-14T11:09:57.447
> 
> 标签：weblogic, logback

我在 weblogic 10.3.5 上部署了一个 ADF 应用程序

我将 logback 添加到此应用程序，并添加`logback.xml`到`WEB-INF/classes`

一旦我部署了应用程序，它就会开始正常登录到我在`logback.xml`.

几个小时后，logback 开始在控制台中显示日志！虽然我没有“STDOUT”附加程序，但它会停止将日志添加到我在 logback.xml 中定义的文件中

似乎 logback.xml 以某种方式被删除，并且 logback 正在使用它的基本配置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T11:43:33.363

当 logback 遇到问题时，[如果指示这样做，](http://logback.qos.ch/manual/configuration.html#automaticStatusPrinting)可以在控制台上打印内部消息。这些内部消息可能是跟踪 logback 行为的非常有用的信息来源。另请注意，为了响应 I/O 故障，logback 可能会暂时暂停相关的 appender，并在 I/O 恢复正常时无缝恢复。

# jquery - WAFileLibrary 替代方案

> ID：11031836
> 
> 赞同：1
> 
> 时间：2012-06-14T11:10:03.737
> 
> 标签：jquery, smalltalk, pharo, seaside

1）我在特定的目录结构中有一组“.js”文件。2）我需要将它们与我的 smalltalk 图像一起存储在本地，并且不需要单独托管它们。3) 我不需要使用 WAFileLibrary 将它们保存在 smalltalk 图像中。

请让我知道如何根据我的要求修改以下代码。

**anHtmlRoot javascript 网址：'http://www.google.com/jsapi'。**

像下面这样的东西..？

**anHtmlRoot javascript url：“/myfolder/MyFile.js”**

帮助

瓦伦·艾萨克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T11:45:57.833

你确实可以写：

```
anHtmlRoot javascript url: '/myfolder/MyFile.js' 
```

但最好使用：

```
 anHtmlRoot javascript resourceUrl: 'MyFile.js' 
```

它允许您将路径设置为配置参数。更多关于[海边的书](http://book.seaside.st/book/in-action/serving-files/images)。

要提供实际文件，有两个选项：

*   使用外部网络服务器（在同一台机器上）从磁盘提供文件
*   使用内部 Smalltalk 网络服务器从磁盘提供文件

对于后一个选项，您可以从[Seaside30LGPL 存储库](http://www.squeaksource.com/Seaside30LGPL/)加载 Seaside-Filesystem 包。加载后，您可以使用 Seaside 配置工具为您的“myFolder”目录定义一个“外部目录”处理程序，该处理程序将从磁盘提供文件。

# jquery - 如何在同位素中设置砌体水平布局

> ID：11031837
> 
> 赞同：1
> 
> 时间：2012-06-14T11:10:04.613
> 
> 标签：jquery, jquery-masonry, jquery-isotope

我只是 jquery 的新手，所以我只是通过修改来编辑我的脚本。我在实验中使用了同位素，结果如下： [http ://rvflores.com/SM-SCROLL/](http://rvflores.com/SM-SCROLL/)

我需要帮助容器以 masonryHorizo​​ntal 布局模式出现，而无需单击顶部的按钮来更改它。我阅读了文档，但似乎找不到他们是如何设置的，所以我只是从他们的网站上复制了脚本。

欢迎任何帮助和建议，谢谢:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T19:36:32.737

## 对于任何错过评论中*实际*答案的人：

[masonryHorixontal](http://isotope.metafizzy.co/docs/layout-modes.html#masonryhorizontal)的文档缺少该`layoutMode`属性。
正确的代码是：

```
$('#container').isotope({
    layoutMode: 'masonryHorizontal',
    masonryHorizontal: {
        rowHeight: 360
    }
}); 
```

这个问题也是[这个问题](https://stackoverflow.com/questions/13155985/jquery-isotope-plugin-horizontal-scrolling)的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T11:20:23.893

```
$('#makeMeScrollable').isotope({
  masonryHorizontal: {
    rowHeight: 360
  }
}); 
```

[http://isotope.metafizzy.co/docs/layout-modes.html](http://isotope.metafizzy.co/docs/layout-modes.html)

# php - 表单使用方法 get 而不是 post 重定向

> ID：11031838
> 
> 赞同：0
> 
> 时间：2012-06-14T11:10:08.243
> 
> 标签：php

我有一个名为contact.php的文件，里面有表格：

```
<form method="post" name="kontakt" action="send_mail.php">
  <fieldset class="formularz_kontaktowy">
    <legend>Formularz kontaktowy</legend>
    <div><label id="lblStatus"></label></div>
    <div><input type="text" name="txtName" title="Imię i nazwisko" id="txtName" class="text"></div>
    <div><input type="text" name="txtEmail" title="Email" id="txtEmail" class="text"></div>
    <div><input type="text" name="txtTitle" title="Tytuł" id="txtTitle" class="text"></div>
    <div><textarea cols="30" rows="10" name="txtMessage" id="txtMessage" class="text" title="Treść wiadomości"></textarea></div>
    <input type="submit" name="btnSendmail" value=Send">
  </fieldset>
</form> 
```

在浏览器中单击 btnSendmail 后，我有 URL，例如：localhost/contact.php?txtName=Mary+Smith&txtEmail=mailMail%40gmail.com&txtTitle=dfd&txtMessage=fgdf&btnSendmail=Send，但我认为应该是 localhost/send_mail.php。它的原因是什么？

编辑：send_mail.php

```
<?php
  require_once "Mail.php";

    $from = "<mailaddress@gmail.com>";
    $to = "<mail2@gmail.com>";
    $subject = "Hi!";
    $body = "Hi,\n\nHow are you?";

    $host = "ssl://smtp.gmail.com";
    $port = "465";
    $username = "<mailaddress@gmail.com>";
    $password = "password";

    $headers = array ('From' => $from,
      'To' => $to,
      'Subject' => $subject);
    $smtp = Mail::factory('smtp',
      array ('host' => $host,
        'port' => $port,
        'auth' => true,
        'username' => $username,
        'password' => $password));

    $mail = $smtp->send($to, $headers, $body);

    if (PEAR::isError($mail)) {
      echo("<p>" . $mail->getMessage() . "</p>");
     } else {
      echo("<p>Message successfully sent!</p>");
     }

?> 
```

# jquery - 插入和淡入后jquery行闪烁

> ID：11031840
> 
> 赞同：1
> 
> 时间：2012-06-14T11:10:13.297
> 
> 标签：jquery

我正在将行插入表中。插入后，我希望行只是淡入。为此我正在使用

```
myrow.hide();
myrow.fadeIn(2000); 
```

问题是我使用 fadeIn 命令后整行闪烁。我该怎么办？谢谢

我在下面添加了部分代码

```
var myrow = $('#'+row_above);
var myrow_html = "";
myrow_html += "<tr>";
myrow_html += some more html...

myrow.after(myrow_html);
var newrow = myrow.next();
newrow.hide();
newrow.fadeIn(2000); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T11:47:50.413

```
var myrow = $('#'+row_above);    
var myrow_html = $("<tr>");

myrow_html.html('some more html...');
myrow_html.css('display', 'none');
myrow .after(myrow_html);

myrow_html.fadeIn(2000); 
```

那这个呢...

# api - 基于 API 的应用程序的分析工具

> ID：11031841
> 
> 赞同：0
> 
> 时间：2012-06-14T11:10:16.153
> 
> 标签：api, google-analytics, analytics, google-analytics-api

我正在开发一个基于 SAAS 并将服务公开为 API 的应用程序。我想为 API 使用、使用预测和成本估算等开发有效的分析平台。有没有像 Google Analytic 一样可以利用的分析服务？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T22:23:14.967

API 使用通常使用[statsd + 石墨](http://mat.github.com/statsd-railscamp2011-slides)等内部（自托管）工具进行跟踪。
Etsy 也使用这种组合：
[http ://codeascraft.etsy.com/2011/02/15/measure-anything-measure-everything/](http://codeascraft.etsy.com/2011/02/15/measure-anything-measure-everything/)

另一个似乎处于测试阶段的替代方案是[StatHat](http://www.stathat.com/)。

通常，这些解决方案不允许对数据进行太多切片/切块，但它们可以帮助您跟踪总体容量和使用情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-11T20:24:46.157

您还可以查看更重的 API 管理解决方案，例如[Mashery](http://www.mashery.com/)

# java - 继承与组合

> ID：11031843
> 
> 赞同：2
> 
> 时间：2012-06-14T11:10:18.960
> 
> 标签：java, inheritance, composition

> **可能重复：**
> [更喜欢组合而不是继承？](https://stackoverflow.com/questions/49002/prefer-composition-over-inheritance)

我想知道，当有这么多缺点时，为什么（或在哪些情况下）应该考虑继承而不是组合：

*   如果我们在调用超类方法的子类中实现/覆盖一个方法，则不能保证我们的超类的另一个版本（可能是某个库）不会破坏我们的代码
*   如果超类中出现新方法，其签名与子类方法具有相同的签名，但返回类型不同，则我们的类将无法编译。

因此，我无法想象，我们究竟如何依赖它。超类作者可能想要提高性能，而我们的客户端代码可能会崩溃。

**所以我的问题是：**

*   这些问题是如何解决的（例如在标准 Java 库中）？
*   何时使用继承和组合？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-14T11:18:23.003

您的第一个反对意见也适用于组合：如果您调用的方法的实现发生更改，则无法保证您的代码不会中断。

第二个反对意见实际上是一件好事，因为您会立即注意到新版本的 API 存在问题。

这个问题与继承/组合没有太大关系。如果一个类的公共契约从一个版本到另一个版本发生变化，您将不得不在您的代码中进行更改以适应这些变化。通过避免向后不兼容的更改来解决该问题。提供新的 API 可能是解决方案（例如，参见 io，然后是 nio，然后是 nio2）。否则，发行说明和迁移文档可以帮助从一个 API 版本过渡到另一个版本。

当您的类和其他类之间存在 is-a 关系时，使用继承。当您的班级和其他班级之间存在具有关系时，使用组合。

# javascript - 如何使用javascript获取html元素的子索引

> ID：11031852
> 
> 赞同：0
> 
> 时间：2012-06-14T11:11:04.887
> 
> 标签：javascript, jquery, html, parent-child

我正在尝试获取其父级的子级索引。例如：-

```
<div>
    <table>
        <tr id="rahul">
            <td> Hi this is ABC </td>
            <td> Hi this is XYZ </td>
        </tr>
    </table>
</div> 
```

我的java脚本代码是： -

```
<script>
    $(document).ready(function() {
        document.onmousedown = mouseDown;
        function mouseDown(e) {
            var element =  document.elementFromPoint(e.clientX,e.clientY);
            console.log("Clicked element is:" + element.tagName);
            var i=1;
            while (element.nextSibling != null) {
                element = element.nextSibling;
                console.log('Sibling No:' + (i++) + " " + element.tagName);
            }
        }
    });
</script> 
```

据我说，当我点击“嗨，这是 ABC”时，它应该打印出来

```
Sibling No.1 TD 
```

但实际上是打印

```
Clicked element is:TD jsoupTest.html:10
Sibling No:1 undefined jsoupTest.html:14
Sibling No:2 TD jsoupTest.html:14
Sibling No:3 undefined 
```

有人怀疑为什么这打印未定义为 TD 的兄弟？我的想法是找到被点击元素的兄弟姐妹的数量，我可以找出它的父母拥有的孩子的总数。所以现在我可以通过从其父级的总子级中减去没有兄弟级来找到单击元素的索引。

请告诉我是否有更好的选择来获得这个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T11:19:14.027

如果您想知道子**元素**相对于其兄弟**元素**的索引，jQuery 可以通过以下方式为您做到这一点[`index`](http://api.jquery.com/index)（如果您想考虑非元素节点，请参阅下文）：

```
$(document).ready(function() {
    document.onmousedown = mouseDown;
    function mouseDown(e) {
        var element =  document.elementFromPoint(e.clientX,e.clientY);
        console.log("Clicked element is:" + element.tagName);
        console.log("Index: " + $(element).index());
    }
}); 
```

[实例](http://jsbin.com/ojimoj)| [资源](http://jsbin.com/ojimoj/edit)

请注意，仅考虑**了元素**，而不考虑可能存在的其他类型的节点（特别是[文本节点](http://www.w3.org/TR/DOM-Level-3-Core/core.html#ID-1312295772)）。这可能是您在大约 90% 的时间里想要的，甚至可能更多。:-) 如果您真的想考虑其他节点类型，而不仅仅是元素，请使用`$.inArray(element, $(element).parent().contents())`而不是`$(element).index()`，例如：

```
$(document).ready(function() {
    document.onmousedown = mouseDown;
    function mouseDown(e) {
        var element =  document.elementFromPoint(e.clientX,e.clientY);
        console.log("Clicked element is:" + element.tagName);
        console.log("Index: " + $.inArray(element, $(element).parent().contents()));
        // ^--- this is the only line that changed
    }
}); 
```

[现场复制](http://jsbin.com/ojimoj/2)| [资源](http://jsbin.com/ojimoj/2/edit)

* * *

旁注：我很确定你可以更换你的线路

```
var element =  document.elementFromPoint(e.clientX,e.clientY); 
```

...和

```
var element =  e.target; 
```

...`target`当按下按钮时，它将是鼠标下方的最上面的元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T11:30:40.400

首先，您应该使用`click`事件而不是`mousedown`. 然后，您不应该使用`on<event>`-property 而是使用正确的方法来添加侦听器，jQuery（您已经加载）提供了一种简单且跨浏览器的方式。

接下来，不要使用`document.elementFromPoint`鼠标事件的坐标 - 只需使用事件的`target`属性。

```
$(document).on("click", function(e) {
     var element = e.target;
     ...
}); 
```

然后，你的循环：

```
 var i=1;
        while (element.nextSibling != null) {
            element = element.nextSibling;
            console.log('Sibling No:' + (i++) + " " + element.tagName);
        } 
```

此代码打印`element`. 这似乎不是你想要的。你要数它之前的兄弟姐妹，对吧？那就用`.previousSibling`吧。

此外，它还包括文本节点，记录`undefined`它们的`nodeName`. 为了解决这个问题，您可以使用`[previous|next]ElementSibling`.

> ...找出其父母拥有的孩子总数

哦，这是一个更容易的任务：

```
element.parentNode.children.length;
// or even
element.parentNode.childElementCount;
// to include text nodes:
element.parentNode.childNodes.length; 
```

# php - HTML5 PHP 表单不会发送

> ID：11031853
> 
> 赞同：0
> 
> 时间：2012-06-14T11:11:05.627
> 
> 标签：php, forms, html

我已经从以前工作正常的表单构建中调整了新字段。客户端验证工作正常，但它们似乎是一个 php 问题，因为电子邮件没有发送。

我还在学习 PHP 和表单，所以任何帮助都是王牌！

请从页面和下面的php中获取相关代码；

这页纸

```
 <div id="contact-form" class="clearfix">
        <h1>SWPEE certificate</h1><br>
        <?php
        //init variables
        $cf = array();
        $sr = false;

        if(isset($_SESSION['cf_returndata'])){
            $cf = $_SESSION['cf_returndata'];
            $sr = true;
        }
        ?>
        <ul id="errors" class="<?php echo ($sr && !$cf['form_ok']) ? 'visible' : ''; ?>">
            <li id="info">There were some problems with your form submission:</li>
            <?php 
            if(isset($cf['errors']) && count($cf['errors']) > 0) :
                foreach($cf['errors'] as $error) :
            ?>
            <li><?php echo $error ?></li>
            <?php
                endforeach;
            endif;
            ?>
        </ul>
        <p id="success" class="<?php echo ($sr && $cf['form_ok']) ? 'visible' : ''; ?>">Thanks you. Your information has been submitted.</p>
        <form method="post" action="process2.php">
            <label for="firstname">First Name: <span class="required">*</span></label>
            <input type="text" id="firstname" name="first name" value="<?php echo ($sr && !$cf['form_ok']) ? $cf['posted_form_data']['first name'] : '' ?>" placeholder="First Name" required autofocus />

            <label for="surname">Surname: <span class="required">*</span></label>
            <input type="text" id="surname" name="surname" value="<?php echo ($sr && !$cf['form_ok']) ? $cf['posted_form_data']['surname'] : '' ?>" placeholder="Surname" required autofocus />

            <label for="jobtitle">Job title: <span class="required">*</span></label>
            <input type="text" id="jobtitle" name="job title" value="<?php echo ($sr && !$cf['form_ok']) ? $cf['posted_form_data']['job title'] : '' ?>" placeholder="Job title" required autofocus />

            <label for="office">Office location:</label>
            <select id="office" name="office">
                <option value="Birmingham" <?php echo ($sr && !$cf['form_ok'] && $cf['posted_form_data']['office'] == 'Birmingham') ? "selected='selected'" : '' ?>>Birmingham</option>
                <option value="Chippenham" <?php echo ($sr && !$cf['form_ok'] && $cf['posted_form_data']['office'] == 'Chippenham') ? "selected='selected'" : '' ?>>Chippenham</option>
                <option value="Croyden" <?php echo ($sr && !$cf['form_ok'] && $cf['posted_form_data']['office'] == 'Croyden') ? "selected='selected'" : '' ?>>Croyden</option>
                <option value="Glasgow" <?php echo ($sr && !$cf['form_ok'] && $cf['posted_form_data']['office'] == 'Glasgow') ? "selected='selected'" : '' ?>>Glasgow</option>
                <option value="Hornsey" <?php echo ($sr && !$cf['form_ok'] && $cf['posted_form_data']['office'] == 'Hornsey') ? "selected='selected'" : '' ?>>Hornsey</option>
                <option value="London" <?php echo ($sr && !$cf['form_ok'] && $cf['posted_form_data']['office'] == 'London') ? "selected='selected'" : '' ?>>London</option>
                <option value="Swanley" <?php echo ($sr && !$cf['form_ok'] && $cf['posted_form_data']['office'] == 'Swanley') ? "selected='selected'" : '' ?>>Swanley</option>
                <option value="York" <?php echo ($sr && !$cf['form_ok'] && $cf['posted_form_data']['office'] == 'York') ? "selected='selected'" : '' ?>>York</option>
            </select>

            <label for="emp_con">Employee or Contractor:</label>
            <select id="emp_con" name="emp_con">
            <option value="Employee" <?php echo ($sr && !$cf['form_ok'] && $cf['posted_form_data']['cmp_con'] == 'Employee') ? "selected='selected'" : '' ?>>Employee</option>
                <option value="Contractor" <?php echo ($sr && !$cf['form_ok'] && $cf['posted_form_data']['cmp_con'] == 'Contractor') ? "selected='selected'" : '' ?>>Contractor</option>
            </select>

            <label for="course_module">Course or Module: <span class="required">*</span></label>
            <input type="text" id="course_module" name="course module" value="<?php echo ($sr && !$cf['form_ok']) ? $cf['posted_form_data']['course module'] : '' ?>" placeholder="Course or Module name" required autofocus />

            <label for="date">Date Course or Module was completed: <span class="required">*</span></label>
            <input type="text" id="date_completed" name="date completed" value="<?php echo ($sr && !$cf['form_ok']) ? $cf['posted_form_data']['date completed'] : '' ?>" placeholder="23/7/2012" required autofocus />

            <label for="line_manager">Line Manager: <span class="required">*</span></label>
            <input type="text" id="line_manager" name="line manager" value="<?php echo ($sr && !$cf['form_ok']) ? $cf['posted_form_data']['line manager'] : '' ?>" placeholder="Line Manager" required autofocus />

            <span id="loading"></span>
            <input type="submit" value="Submit" id="submit-button" />
            <p id="req-field-desc"><span class="required">*</span> indicates a required field</p>
        </form>
        <?php unset($_SESSION['cf_returndata']); ?>
    </div> 
```

处理器 (process2.php) 我在这里有一个虚拟电子邮件地址，这不仅仅是一个错字！

```
//form validation vars
$formok = true;
$errors = array();

//sumbission data
$ipaddress = $_SERVER['REMOTE_ADDR'];
$date = date('d/m/Y');
$time = date('H:i:s');

//form data
$first_name = $_POST['first_name'];
$surname = $_POST['surname'];
$job_title = $_POST['job_title'];
$office = $_POST['office'];
$emp_con = $_POST['emp_con'];
$course_module = $_POST['course_module'];
$date_completed = $_POST['date_completed'];
$line_manager = $_POST['line_manager'];

//validate form data

//validate name is not empty
if(empty($first_name)){
    $formok = false;
    $errors[] = "You have not entered your first name";
}

if(empty($surename)){
    $formok = false;
    $errors[] = "You have not entered your surname";
}

if(empty($job_title)){
    $formok = false;
    $errors[] = "You have not entered a job title";
}

if(empty($course_module)){
    $formok = false;
    $errors[] = "You have not entered a course module";
}

if(empty($line_manager)){
    $formok = false;
    $errors[] = "You have not entered the name of your line manager";
}

if(empty($date_completed)){
    $formok = false;
    $errors[] = "You have not entered the date you completed your module";
}

//send email if all is ok
if($formok){
    $headers = "From: website@invensysgrad.com" . "\r\n";
    $headers .= 'Content-type: text/html; charset=iso-8859-1' . "\r\n";

    $emailbody = "<p>You have received a new message from the enquiries form on your website.</p>
                  <p><strong>First Name: </strong> {$first_name} </p>
                  <p><strong>Surname: </strong> {$surname} </p>
                  <p><strong>Job title: </strong> {$job_title} </p>
                  <p><strong>Office: </strong> {$office} </p>
                  <p><strong>Employee or Contractor: </strong> {$emp_con} </p>
                  <p><strong>Course or Module title: </strong> {$course_module} </p>
                  <p><strong>Date Course or Module was completed: </strong> {$date_completed} </p>
                  <p>This message was sent from the IP Address: {$ipaddress} on {$date} at {$time}</p>";

    mail("myemail@address.com","SWPEE Certificate form",$emailbody,$headers);

}

//what we need to return back to our form
$returndata = array(
    'posted_form_data' => array(
        'first_name' => $first_name,
        'surname' => $surname,
        'job_title' => $job_title,
        'office' => $office,
        'emp_con' => $emp_con,
        'course_module' => $course_module,
        'date_completed' => $date_completed,
        'line_manager' => $line_manager
    ),
    'form_ok' => $formok,
    'errors' => $errors
);

//if this is not an ajax request
if(empty($_SERVER['HTTP_X_REQUESTED_WITH']) && strtolower($_SERVER['HTTP_X_REQUESTED_WITH']) !== 'xmlhttprequest'){
    //set session variables
    session_start();
    $_SESSION['cf_returndata'] = $returndata;

    //redirect back to form
    header('location: ' . $_SERVER['HTTP_REFERER']);
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-25T08:02:04.920

```
if(empty($surename)){
    $formok = false;
    $errors[] = "You have not entered your surname";
} 
```

尝试将 $surename 更改为 $surname

```
if(empty($surname)){
    $formok = false;
    $errors[] = "You have not entered your surname";
} 
```

编辑：哇没有看到这个发布多久前抱歉只是与我的问题有关，所以快速浏览并注意到一个错误。

# java - 将 *.xml 文件从 zip 复制到另一个目录，而无需使用 java 解压缩 zip

> ID：11031857
> 
> 赞同：0
> 
> 时间：2012-06-14T11:11:14.903
> 
> 标签：java

大家好，

我是不是有一堆 *.zip 文件在这个文件中有很多 *.log 文件和其他东西和一个 *.xml 文件。

我需要找到该文件并将其复制到另一个目录。

到目前为止，我在 *.zip 文件夹中找到了该文件，但现在我卡住了。希望你们能帮助...谢谢

以下代码我到目前为止：

```
public static void main(String[] args) 
    {
        String sPath = "c:/results/";
        //String sFiles;
        File folder = new File(sPath);
        File[] aListOfFiles = folder.listFiles();

        try
        {
            //get all files in the folder 
            for (int i = 0; i < aListOfFiles.length; i++)
            {
                if (aListOfFiles[i].isFile())
                {
                    //get path an file name
                    String sZipPath = aListOfFiles[i].getAbsolutePath();
                    //System.out.println("Absolute Path: " + sZipPath);

                    //open zip find the xml
                    ZipFile sourceZipFile = new ZipFile(sZipPath);
                    Enumeration e = sourceZipFile.entries();

                    while(e.hasMoreElements())
                    {
                        ZipEntry entry = (ZipEntry)e.nextElement();
                        String isXML = entry.getName();

                        if (isXML.endsWith(".xml"))
                        {
                            System.out.println(isXML);
                            //copieFile(File isXML,)
                        }
                    }

                }
            }
        }
        catch (IOException ioe)
        {
            System.out.println("Error while opening zip file " + ioe);
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T11:14:17.447

不解压就无法复制。它必须完成，并且文件需要存储在内存中或保存到磁盘中。

难怪你被困在那里。

要提取文件，请使用：

```
InputStream stream = sourceZipFile.getInputStream(entry); 
```

`InputStream`然后，您可以`OutputStream`通过`FileOutputStream`自己编写整个复制逻辑或使用[`IOUtils.copy`](http://commons.apache.org/io/api-2.0/org/apache/commons/io/IOUtils.html#copy%28java.io.InputStream,%20java.io.OutputStream%29).

# vector - 如何在 OpenLayers 中将矢量点从一个 LonLat 移动到另一个？我正在使用 OSM

> ID：11031864
> 
> 赞同：2
> 
> 时间：2012-06-14T11:11:41.063
> 
> 标签：vector, position, openlayers, point, openstreetmap

这是我使用的代码。我应该在函数 moveFeature() 中编写什么代码，以使该点从一个位置移动到另一个位置。

```
 <script>
  function init() {
    map = new OpenLayers.Map("basicMap");
    var mapnik         = new OpenLayers.Layer.OSM();
    var fromProjection = new OpenLayers.Projection("EPSG:4326");   // Transform from WGS 1984
    var toProjection   = new OpenLayers.Projection("EPSG:900913"); // to Spherical Mercator Projection
    var position       = new OpenLayers.LonLat(0,0).transform( fromProjection, toProjection);
    var zoom           = 15; 

    map.addLayer(mapnik);
    map.setCenter(position, zoom );
        var style_blue = OpenLayers.Util.extend({}, OpenLayers.Feature.Vector.style['default']);
    style_blue.strokeColor = "blue"; 
    style_blue.fillColor = "blue"; 

        var vectorLayer = new OpenLayers.Layer.Vector("Simple Geometry");

    // create a point feature
    var point = new OpenLayers.Geometry.Point(0,0).transform( fromProjection, toProjection);
    pointFeature = new OpenLayers.Feature.Vector(point, null, style_blue);

        map.addLayer(vectorLayer);
    map.setCenter(new OpenLayers.LonLat(point.x, point.y), zoom);
        vectorLayer.addFeatures([pointFeature]);
        window.setInterval(function() {moveFeature(pointFeature)}, 1000);
      }
      function moveFeature(feature){
        var newLonLat = new OpenLayers.LonLat(1,1).transform( fromProjection, toProjection);
        //how do I move the feature to the new LonLat here
      }
</script> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T09:33:04.387

如何将该功能移动到新的 LonLat？这是答案：

```
feature.move( newLonLat ); 
```

# selenium - 数据驱动框架 -> 从 .ods 文件中读取

> ID：11031865
> 
> 赞同：0
> 
> 时间：2012-06-14T11:11:56.587
> 
> 标签：selenium, webdriver, selenium-webdriver, testng, openoffice.org

TestNG 内置了对 DATADRIVEN 框架的支持。我通过使用 jxl api 从 excel 文件中读取数据来实现数据驱动框架。但是现在我想从 .ods 格式文件（OpenSourceData 电子表格）中读取数据，这种格式有没有可用的支持/代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T15:26:51.277

我建议你使用 ODFtoolkit 库：http: [//incubator.apache.org/odftoolkit/](http://incubator.apache.org/odftoolkit/)

也可以解压ods文件，然后解析content.xml...

# thunderbird - 用于新邮件通知的 Thunderbird 插件

> ID：11031866
> 
> 赞同：1
> 
> 时间：2012-06-14T11:12:06.360
> 
> 标签：thunderbird, thunderbird-addon

我正在使用雷鸟 12.0.1。在我的Win7。Thunderbird 是否有任何插件，例如 gmail 通知程序，它会在右下角的屏幕上弹出一个弹出窗口来提醒我。如果我关闭 Thunderbird，我希望它在系统托盘上工作并在新消息时用摘要警告我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T11:16:45.753

[这](http://kb.mozillazine.org/Minimize_to_system_tray_%28Thunderbird%29)就是我使用的，工作正常...（最小化到系统托盘插件）。

编辑：这真的应该在 SU 中，因为它与编程毫无关系。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T11:21:48.843

据我所知，Thunderbird 已经内置了新的消息通知功能。我的 Win7 上出现了一条新消息警报，带有主题和邮件正文。

如果您通过完全退出应用程序来表示“当我关闭 Thunderbird”时，我认为在应用程序未运行时无法继续接收通知。

如果你在 Mac 上，你可以试试Thunderbird[的 Growl Notifications 插件](https://addons.mozilla.org/en-US/thunderbird/addon/growl-new-message-notification/)

# php - PHP zip文件类错误？

> ID：11031868
> 
> 赞同：0
> 
> 时间：2012-06-14T11:12:16.387
> 
> 标签：php, class

我发现了这个很棒的课程，除了...我指定了输出目录，一切都很好，如下所示：

```
$outputDir = "/backup/"; 
```

但它不会在那里输出 zip，它会在站点根目录上输出它。

这是该课程的链接，您可以查看它:)

[http://www.phpclasses.org/browse/file/9525.html](http://www.phpclasses.org/browse/file/9525.html)

我很感激任何帮助！

* * *

这是我调用类的整个代码：

```
include('scripts/zip.php');

$fileToZip = "License.txt"; 
$fileToZip1 = "CreateZipFileMac.inc.php"; 
$fileToZip2 = "CreateZipFile.inc.php"; 

$directoryToZip = "./"; // This will zip all the file(s) in this present working directory 

$outputDir = '/backup/'; //Replace "/" with the name of the desired output directory. 
$zipName = "test.zip"; 

$createZipFile = new CreateZipFile; 

/* 
// Code to Zip a single file 
$createZipFile->addDirectory($outputDir); 
$fileContents=file_get_contents($fileToZip); 
$createZipFile->addFile($fileContents, $outputDir.$fileToZip); 
*/ 

//Code toZip a directory and all its files/subdirectories 
$createZipFile->zipDirectory($directoryToZip,$outputDir); 
$fd=fopen($zipName, "wb"); 
fwrite($fd,$createZipFile->getZippedfile()); 
fclose($fd); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T11:19:37.380

我的猜测是`$outDir`指的是文件系统路径，因此您正在查找文件`/backup`系统根目录中的文件夹（而不是相对于您的域的根文件夹）。

PHP 可能无法在此处写入，因此可能默认为它可以写入的位置。

你有没有试过`/var/www/path/to/you/site/backup`看看是否有预期的效果？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T11:51:36.350

没有可以将输出文件保存到目录的**代码。**使用 $outputDir，您只需定义输出文件名的一部分。

如果你想保存这个文件，你必须自己做。尝试在演示中添加类似这样的内容：

```
$fs = fopen($outputDir."/".$zipName, "wb");
fwrite($fs, $createZipFile->getZippedfile()); 
fclose($fs); 
```

# java - Java - 可编辑的文本区域

> ID：11031869
> 
> 赞同：-1
> 
> 时间：2012-06-14T11:12:22.643
> 
> 标签：java, drag-and-drop, textarea

我想知道除了使用jTextArea（或jTextField）之外是否还有其他方法可以在Java中制作一些可编辑的文本区域？

我必须能够拖放这个区域，这主要是我不能使用 jTextArea 的原因，当我点击它时，他获得了焦点（小光标闪烁）所以我无法检测到 mousePressed 事件例如。

感谢您的帮助，对不起我的英语。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T12:18:06.493

当您说拖放区域时，您是指整个组件还是拖放到组件中？

如果您指的是组件本身，您将不得不有点创意。如果是后者，我没有太多经验。

一种可能的解决方法可能是按下一个键，而不是单击鼠标按钮开始拖动组件。为了争论，让我们说 alt。您将鼠标移动到要拖动到的位置，然后释放 alt。

并不是说它实际上可以帮助您解决问题，但也有一个 JEditorPane。但是，当您在其中单击时，它仍然会获得焦点。

# html - 在容器底部定位标题

> ID：11031870
> 
> 赞同：0
> 
> 时间：2012-06-14T11:12:27.773
> 
> 标签：html, css

我正在尝试将标题标签浮动到 li 标签的底部，如下图所示。所以即使文本很短，它也总是停留在底部，只延伸到上面。

标题似乎从里溢出。非常感谢任何帮助。请参阅[http://jsfiddle.net/noscirre/JtVGp/1/](http://jsfiddle.net/noscirre/JtVGp/1/)

```
<ul style="list-style:none;">
  <li style="float:left; width:70px; height:90px; margin:0 10px 10px 0; -moz-border-radius: 10px; -webkit-border-radius: 10px; border-radius: 10px; -khtml-border-radius: 10px; border: 4px solid #0CF; padding:10px; position:relative;"> 
      <a title href="#">
            <div style="background:#9F0; width: 50px; height: 50px; float:left; display:block"></div>
            <h2 style="font-family:Arial, Helvetica, sans-serif; font-size:12px; text-align:right; bottom: 10px; position:absolute ">ANOTHER APP</h2>
      </a> 
    </li>
</ul> 
```

![在此处输入图像描述](../Images/da9ecad012d87ac309af878f0bbb4e20.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T11:14:52.250

嘿，在您的代码中添加一行 css

像这样在你的css中定义空白

```
 white-space: pre; 
```

现场演示[http://jsfiddle.net/JtVGp/2/](http://jsfiddle.net/JtVGp/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T11:17:08.753

如果我正确理解了您想要的内容：

添加`right: 5px`到您的标题 - 这会将其与 li 的右边缘隔开，因此看起来不会溢出

您可以使用 的值`right`并`width`获得所需的正确结果。

# python - 使用 CherryPy 工具会话时出错

> ID：11031875
> 
> 赞同：0
> 
> 时间：2012-06-14T11:13:09.613
> 
> 标签：python, eclipse, cherrypy

我有一个使用 CherryPy 库的 python 项目。我从 Eclipse 运行项目。在一个虚拟机上，代码运行正常，但在另一台虚拟机上，完全相同的代码给了我一个错误：

```
cherrypy.tools.sessions.on = True 
```

错误本身是：

```
File "/usr/local/lib/python2.6/dist-packages/cherrypy/_cptools.py", line 68, in _set_on
    raise AttributeError(_attr_error)
AttributeError: CherryPy Tools cannot be turned on directly. Instead, turn them on via config, or use them as decorators on your page handlers.
*** glibc detected *** /usr/bin/python2.6: munmap_chunk(): invalid pointer: 0x0000000002aacee9 *** 
```

然后是回溯。由于代码在另一台机器上运行没有错误，我认为这是一些配置问题，但我找不到它。

**编辑**我不知道它是否与我的问题有关，但我注意到代码运行正常的机器上的 CherryPy 版本是 3.1.2，而在我收到错误的机器上是 3.2.2

**编辑 2**我不是 python 程序员，我被迫（根据情况）从离开公司的服务器人员那里继承代码。很抱歉，如果我的问题非常（非常）基本。这些设置存在于代码和配置文件中，这样就可以在 3.1.2 版本中正常工作。我只是想确保在使用 3.2.2 版本时从代码中删除导致错误的行是安全的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T16:54:27.080

错误消息告诉您您的代码行无效。根据您要打开会话的上下文，将其移至 config.update：

```
cherrypy.config.update({"tools.sessions.on": True}) 
```

...或配置文件：

```
[/path]
tools.sessions.on = True 
```

...或`_cp_config`属性：

```
class Root:
    _cp_config = {"tools.sessions.on": True} 
```

有关配置声明的更多信息，请参阅[http://docs.cherrypy.org/dev/refman/_cpconfig.html#declaration](http://docs.cherrypy.org/dev/refman/_cpconfig.html#declaration)。

# javascript - Flot（时间数据），xaxis - 如果有更多数据，标签会消失

> ID：11031876
> 
> 赞同：1
> 
> 时间：2012-06-14T11:13:20.240
> 
> 标签：javascript, charts, flot

我的图表看起来像这样，我喜欢它（xaxis 依次为：Feb3、Feb4、Feb5 等）：

[图表确定](http://ulewa.com/img/flot1.jpg)

但是当我添加更多时间数据时，每隔一个月就会消失：（不会有更多数据，每个月都适合！但它消失了..）

[图表错误](http://ulewa.com/img/flot2.jpg)

我希望每个月都像第一张图片一样显示。我不能扩大占位符：

```
<div id="placeholder1" style="width: 700px; height: 300px;"></div> 
```

（它必须有 700 像素）

**我的代码：**

```
var data = [

    [1328223600000, 5],
    [1328310000000, 15],
    [1328396400000, 30],
    [1328482800000, 17],
    [1328655600000, 7],
    [1328742000000, 33],
    [1328828400000, 40],
    [1328914800000, 22],
    [1329001200000, 40],
    [1329087600000, 33],
    [1329174000000, 33],

]; 

var ds = new Array();

ds.push({
    data:data,
    bars: {
        show: true, 
        align: "center",
        barWidth: 1000*60*60*24, 
        fill: true,
    },
    color: "#aae0f0",
});

$.plot($("#placeholder1"), ds, {

grid:{ hoverable:true, clickable: true },

xaxis:
{
    mode: "time",
    minTickSize: [1, "day"],

    font: {
         size: 7,
         style: "italic",
         weight: "bold",
         family: "sans-serif",
         variant: "small-caps"
       },

    tickLength: 0,
    alignTicksWithAxis: 1,
},

series:
 {
    //stack: 1, // - not work too
    //bandwidth: { active: true , lineWidth: 8 },
 }

}); 
```

提前感谢您的任何回复。

PS。为什么我的**font: {}**方法也不起作用？:(

*// 我不是以英语为母语的人，所以请原谅我的语法错误。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T11:36:09.807

您的字体选项不起作用，因为 Flot 不支持这些选项；在[API 文档](http://people.iola.dk/olau/flot/API.txt)中搜索“xaxis”。您应该在 CSS 中的 .tickLabel 类下设置它们。

至于标签消失，您可能可以通过设置 tickSize 而不是 minTickSize 来解决它，但是在某个点上，您的标签会重叠并开始看起来很难看。由于 Flot 不支持旋转/多行标签，避免这种情况的唯一方法是减小字体大小。

# java - 导入在类似的类中不起作用

> ID：11031877
> 
> 赞同：0
> 
> 时间：2012-06-14T11:13:29.397
> 
> 标签：java, eclipse, import, constructor, undefined

所以我在 Eclipse 中有一个项目，有 2 个类，它们都包含另一个名为 Bucket 的库的导入。一切正常，但是在我创建的第三个类中，导入似乎不起作用，当我创建新对象时，它说构造函数未定义，而这三个类的代码相似。

我确定这是一个愚蠢的 Eclipse 问题，是什么原因造成的？谢谢

*编辑 - 这是代码：*

**这个类工作正常：**

```
import java.util.*;
import unit4.bucketLib.Bucket;

public class Buck2
{
    static Scanner reader = new Scanner(System.in);
    public static void main(String [ ] args)
    {
        int n, i;
        System.out.println("Type a number of buckets to create");
        n = reader.nextInt();

        Bucket[] bucks = new Bucket[n];

        for (i = 0; i < n; i++)
            bucks[i] = new Bucket(20, "Bucket" + (i+1)); 
```

**这个类有错误：**

```
import java.util.*;
import unit4.bucketLib.Bucket;
public class Buck3
{
    static Scanner reader = new Scanner(System.in);
    public static void main(String [ ] args)
    {
        int n, i;
        System.out.println("Type a number of buckets to create");
        n = reader.nextInt();

        Bucket[] bucks = new Bucket[n];

        double rdmcap, rdmfill;

        for (i = 0; i < n; i++)
        {
            rdmcap = (Math.random() * 10);
            bucks[i] = new Bucket(rdmcap, "Bucket" + (i+1));
            rdmfill = (Math.random() * rdmcap);
            bucks[i].fill(rdmfill);
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T11:17:31.070

您应该显示有问题的代码，但我可以冒险猜测：

你确定导入不起作用？大多数情况下，如果它说构造函数是未定义的，它确实找到了你引用的类（否则你会得到找不到类的错误）

您对构造函数的调用可能没有正确的参数：如果它需要一个整数，而您提供了一个字符串，它就找不到请求字符串的构造函数。检查您的构造函数调用！

# modx - MODX Revo 2.2.2 上的 lang.js.php 和 modx.config.js.php 出现错误问题“Unexpected token <”

> ID：11031878
> 
> 赞同：0
> 
> 时间：2012-06-14T11:13:41.470
> 
> 标签：modx, modx-revolution

在管理器中安装 modx Revo 2.2.2 后只有菜单，没有任何内容。Chrome 中的开发工具显示错误：

*   Uncaught SyntaxError: **Unexpected token <** /connectors/lang.js.php?ctx=mgr&topic=topmenu,file,resource,dashboards&action=53:1
*   Uncaught SyntaxError: **Unexpected token <** /connectors/layout/modx.config.js.php?action=53&wctx=mgr:1
*   未捕获的ReferenceError: **_ 未定义**/manager/min/index.php?f=/manager/assets/modext/widgets/modx.treedrop.js,/manager/assets/modext/widgets/windows.js,/manager/assets /modext/widgets/resource/modx.tree.resource.js,/manager/assets/modext/widgets/element/modx.tree.element.js,/manager/assets/modext/widgets/system/modx.tree.directory .js,/manager/assets/modext/core/modx.view.js,/manager/assets/modext/core/modx.layout.js:103（匿名函数）
*   /manager/min/index.php?f=/manager/assets/modext/widgets/modx.treedrop.js,/manager/assets/modext/widgets/windows.js,/manager/assets/modext/widgets/resource/ modx.tree.resource.js,/manager/assets/modext/widgets/element/modx.tree.element.js,/manager/assets/modext/widgets/system/modx.tree.directory.js,/manager/assets /modext/core/modx.view.js,/manager/assets/modext/core/modx.layout.js:103
*   未捕获的ReferenceError：**_ 未定义**index.php:1
    *   MODx.util.JSONReader index.php:1
    *   h.Event.name ext-all.js:7
    *   b ext-all.js:7
*   Uncaught TypeError: **undefined is not a function** ext-all.js:7
    *   创建 ext-all.js:7
    *   Ext.extend.load modx.js:74
    *   （匿名函数）/manager/?a=53:21
    *   h.Event.name ext-all.js:7
    *   b ext-all.js:7
*   未捕获的ReferenceError：**_ 未定义**index.php:8
    *   MODx.page.Dashboards index.php:8
    *   创建 ext-all.js:7
    *   Ext.extend.load modx.js:74
    *   （匿名函数）/manager/?a=53:26
    *   h.Event.name ext-all.js:7

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-24T11:28:19.860

我遇到了同样的问题，似乎问题出在服务器配置上。

打开`zlib.output_compression`，并设置它的水平来`5`解决我的问题。

这可以在您的或在您的 webroot 中`php.ini`添加以下行来完成：`.htaccess`

```
php_flag zlib.output_compression On
php_value zlib.output_compression_level 5 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T23:35:09.260

这个错误：

> Uncaught SyntaxError: Unexpected token < /connectors/lang.js.php?ctx=mgr&topic=topmenu,file,resource,dashboards&action=53:1

表示 lang.js.php 文件中存在破坏语法的 PHP 错误。第一步应该是找出错误是什么——打开文件或检查错误日志（core/cache/logs/error.log）。_ 函数是在该文件中定义的，会导致级联错误，所以如果我们能解决这个问题，我们可能会帮您解决问题。

# ruby-on-rails-3 - 验证来自另一个模型的字段是否存在

> ID：11031879
> 
> 赞同：1
> 
> 时间：2012-06-14T11:13:53.280
> 
> 标签：ruby-on-rails-3, validation, activerecord, model

**我尝试验证属于另一个模型的属性的存在，但无济于事。**

有

*   用户模型
*   轮廓模型

使用这种形式：

```
= simple_form_for(resource, :as => resource_name, :html => { :class => 'form-horizontal' }   , :validate => true , :url => registration_path(resource_name)) do |f|

= f.input :username,                  :label  => t(:username)
= f.input :email,                     :label  => t(:email),
                                      :hint   => t(:hint_email_visible)
= f.input :password,                  :label  => t(:password), :require => true
= f.input :password_confirmation,     :label  => t(:password_confirm)

- resource.build_profile
= f.fields_for :profile do |f|

 #render
   = f.hidden_field :form, :value => "signup"

    .clear
    = f.input :gender,
              :label => t(:your_gender),
              :collection => gender,
              :item_wrapper_class => 'inline',
              :as => :radio_buttons

.clear
= f.button :submit, t(:submit, :scope => :register) + " »" 
```

如何使用上述表单设置验证性别字段的存在？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T13:48:41.877

可能以下代码可以帮助您。

控制器/users_controller.rb

```
class UsersController < ApplicationController
def new
    @user = User.new
    @user.build_profile
  end
end 
```

模型/用户.rb

```
class User < ActiveRecord::Base
  has_one :profile, dependent: :destroy
  accepts_nested_attributes_for :profile, :allow_destroy => true
end 
```

模型/profile.rb

```
class Profile < ActiveRecord::Base
   validates_presence_of :gender
end 
```

可能您需要从视图中删除以下行。

```
- resource.build_profile 
```

这是您认为有帮助的链接

[http://railscasts.com/episodes/196-nested-model-form-part-1](http://railscasts.com/episodes/196-nested-model-form-part-1)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-17T10:48:57.263

尽管上面是正确的答案并且我已经实现了它，但性别字段似乎仍然没有得到验证。所以有点还是在同一个问题上。是否可以重新打开问题？

# php - 系统找不到指定的路径...简单的php目录

> ID：11031883
> 
> 赞同：1
> 
> 时间：2012-06-14T11:14:07.070
> 
> 标签：php, directory

这是显示缩略图的脚本的开头，工作正常，但我已经破坏了它指向的位置，现在出现了一些错误。谢谢你的帮助。

```
$dir = "localhost/mysite/images/thumbnails/";
echo "dir is $dir";
$dh = opendir($dir); 
```

> 警告：opendir(localhost/mysite/images/thumbnails/,localhost/mysite/images/thumbnails/) [function.opendir]: 系统找不到指定的路径。（代码：3）在第 82 行的 C:\xampp\htdocs\mysite\pages\design.php

目录是 localhost/mysite/images/thumbnails/string(54)

*文件*是“C:\xampp\htdocs\mysitee\pages\design.php”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T11:18:37.287

```
$dir = "localhost/mysite/images/thumbnails/"; 
```

这条线被评估为相对路径。因此，它会尝试在您的当前目录中查找名为“localhost”的文件夹，但找不到该文件夹​​。

如果您希望它被评估为绝对路径，您需要在它前面加上 http://

```
$dir = "http://localhost/mysite/images/thumbnails/"; 
```

正如 Ianzz 正确指出的那样，您无法打开远程目录。

如果您想要来自根目录的路径，请这样做：

```
$dir = "/images/thumbnails/"; 
```

最初的反斜杠很重要。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T18:35:44.197

`$dir = "../images/thumbnails/";`实际上最终工作了

# concurrency - Clojure 是否使用无锁算法实现无锁？

> ID：11031886
> 
> 赞同：10
> 
> 时间：2012-06-14T11:14:14.077
> 
> 标签：concurrency, clojure, locking, lock-free, lockless

我的 Clojure 任务正在取得进展（在 4clojure.com 上解决了大约 80 个问题），我继续阅读和编码并尝试“得到它”。

现在我对 Clojure 被设计为“无锁并发”感到有点困惑。我对死锁非常了解（例如：*“我编写的 Java 代码很糟糕，最终陷入死锁”*，而不是*“我是并发专家”*）。我也读过这个：

[为什么无锁并发如此重要（在 Clojure 中）？](https://stackoverflow.com/questions/1360729/why-is-lockless-concurrency-such-a-big-deal-in-clojure)

我意识到 Clojure 程序不能死锁是多么的棒。

但我有点困惑：这样的壮举是通过在后台实现无锁算法实现的，还是使用了潜在的“可死锁”算法，但使用正确的实现保证永远不会死锁（这会以某种方式对 Clojure 程序员“隐藏” )?

最近有一个关于无锁算法的黑客新闻讨论：

[http://news.ycombinator.com/item?id=4103921](http://news.ycombinator.com/item?id=4103921)

*参考1024cores.net*上的以下*“无锁算法”*页面：

 *[http://www.1024cores.net/home/lock-free-algorithms](http://www.1024cores.net/home/lock-free-algorithms)

我不明白这篇文章和 Clojure 下并发如何工作之间的关系。

这让我完全困惑：当我在 Clojure 中开发并发程序时，这是否意味着“锁和无锁算法”对我来说不是问题？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-14T20:25:02.063

一般来说，Clojure 通过**正确处理时间**来避免锁定问题在许多系统中，对象的时间是一个非常松散的概念，因为时间 1（更新前）的对象被编辑到时间 2（更新后）成为该对象)，在该过程中它既不是第一也不是第二，因此我们使用锁来确保它仅在此转换之前或之后可见。协调锁由此而来，而死锁则来自那......

它是算法、数据结构和时间的组合。

Clojure 通过**结合不可变数据结构、函数式编程和协调时间模型**（参考、原子、代理等）来做到这一点。在这个模型中，一个函数获取一些东西并产生它的下一个版本，同时保留过去，只要有人在看它（直到 GC 得到它）

*   不可变数据结构：Clojure 的集合在 FP 的意义上是持久的。制作新版本后，旧副本“仍然存在”。这样观察者就不需要锁定对象，因为它们永远不会从它们下面变出来。可能存在基于他们正在查看的版本的较新版本，尽管没有任何内容会改变他们的副本。

*   函数式编程：纯粹（或尽可能接近没有区别）函数在一个时间点获取一个集合并生成下一个版本，而不共享它们的内部状态，因此不需要锁定。这还有许多其他好处。

*   [协调时间](http://www.infoq.com/presentations/Are-We-There-Yet-Rich-Hickey)：当确实需要协调多个对象时，就像任何有趣的系统一样，那么 Clojure 的时间模型就会发挥作用。不同的目的有不同的机制。这有一个内部用于计算时间增量的锁，因此恰好有一个时间零，一个时间一和一个时间 N。所以它不是严格无锁的。**STM 包含您永远*不需要与之交互的锁**

* * *

*好吧...几乎从来没有;-)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-15T06:10:46.300

如果您搜索 Clojure 源代码，特别是 .java 文件，您会发现很多对该`java.util.concurrent`包的引用。该`java.util.concurrent`软件包是纽约州立大学奥斯威戈分校的 Doug Lea 数十年来对并发性研究的结晶。具体来说，存在对`AtomicReference`允许访问“比较和交换”（也称为“比较和设置”或 CAS）[指令](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/atomic/AtomicReference.html#compareAndSet%28V,%20V%29)的原子变量类（例如）的引用。CAS 指令有点难以解释（我在下面提供了参考），但正确使用 CAS 是算法“无锁”（至少在 Java 世界中）意味着什么的核心。无锁算法最终会为高并发应用程序带来更高的吞吐量和更少的争用；正是 Clojure 所针对的域。

要深入了解这个主题，请阅读Brian Goetz 的*Java Concurrency in Practice*。另请参阅同一作者的这篇[文章。](http://www.ibm.com/developerworks/java/library/j-jtp11234/)

作为旁注，我总是发现很难`java.util.concurrent`直接使用这个包，即使它已经进化了。对我来说只是感觉太低级了。Clojure 的美妙之处在于它提供了对专家并发库的访问，但通过非常易于使用的软件事务内存 (STM) 抽象来实现。这真的是一个很大的成就。*

# excel - 如何使用 VBA 重新定义命名范围？

> ID：11031891
> 
> 赞同：14
> 
> 时间：2012-06-14T11:14:26.413
> 
> 标签：excel, vba

我有一个名为“X”的命名范围，它有 1000 行，我想动态地将其减少到 100。

我尝试过`Range("X").Resize(100,1)`，`.Resize(-900,0)`但当我通过从范围下拉菜单中选择范围来签入 Excel 时，似乎都没有改变命名范围的大小。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-06-14T12:28:59.653

假设您有一个名为“myRange”的命名范围。如果你这样做：

```
Dim r As Range
Set r = Range("myRange")
Debug.Print r.Resize(10, 1).Address 
```

你的意思是：我有这个范围`r`。`myRange`将其设置为与其初始状态匹配。然后调整大小`r`到别的东西。你所做的是你调整了大小`r`，而不是`myRange`.

要调整命名范围的大小，您需要执行以下操作：

```
Dim wb As Workbook
Dim nr As Name

Set wb = ActiveWorkbook
Set nr = wb.Names.Item("myRange")

' give an absolute reference:
nr.RefersTo = "=Sheet1!$C$1:$C$9"

' or, resize relative to old reference:
With nr
    .RefersTo = .RefersToRange.Resize(100, 1)
End With 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-01-30T18:57:46.883

感谢您的贡献。根据您的帮助，我能够将这段代码放在一起来调整范围的大小并将 n 行从一个数组发布到它。

```
Sub PostArrayLinesToRange(ByVal rngName As String, ByRef arr As Variant, ByVal r As Long)
    Dim wb As Workbook
    Dim rng As Range
    Dim nr As Name          'Variable to change named range size definition

    Set wb = ThisWorkbook
    Set rng = Range(rngName)

    rng.Clear
    Set nr = wb.Names.item(rngName)
    With nr
        .RefersTo = .RefersToRange.Resize(r, UBound(arr, 2))
    End With
    Set rng = Range(rngName)
    rng = arr
    Erase arr
    Set nr = Nothing
    Set rng = Nothing
    Set wb = Nothing
End Sub 
```

# grails - 如何在gsp中显示域值

> ID：11031892
> 
> 赞同：0
> 
> 时间：2012-06-14T11:14:30.587
> 
> 标签：grails, groovy

我有三个域类

```
class Stock
{
   Product product
} 
```

和

```
class Product
{
   ProductName productName
} 
```

和

```
class ProductName
{
   String name
} 
```

在 Stock 域的 create.gsp 中，这是默认代码生成：-

```
<tr class="prop">
  <td valign="top" class="name">
    <label for="name">
      <g:message code="stock.name.label" default="Product Name" />
    </label>
  </td>
  <td valign="top" class="value ${hasErrors(bean: stockInstance, field: 'name', 'errors')}">
    <g:select name="product.id"
              from="${com.ten.hp.his.pharmacy.Product.list()}"
              optionKey="id"
              optionValue="productName"
              value="${stockInstance?.product?.id}"  />
  </td>
</tr> 
```

我的要求是在下拉列表中显示产品名称，但通过使用 optionValue，它显示的`productName`id 类似于`com.ten.ProductName:1`. 我如何在下拉列表中显示产品名称。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T11:16:52.793

`toString()`在类中覆盖`ProductName`以仅返回`productName`

像

```
class ProductName
{
   String name

   @Override
   public String toString(){ return name } 
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-14T16:05:52.580

根据您的数据模型，Jigar 的答案是正确的。grails select 标记期望 optionValue 是您的元素（产品）的 bean 属性的名称。select 标记将对该值调用 toString()，因此要使用它，您需要覆盖 ProductName 类的 toString() 方法。

也可以通过传递闭包代码作为 optionValue 在 gsp 中指定您想要 ProductName 的“名称”属性。

```
optionValue="${{it.productName.name}}" 
```

# wpf - 尝试开始在 WPF 应用程序中更改属性的情节提要

> ID：11031895
> 
> 赞同：5
> 
> 时间：2012-06-14T11:14:47.797
> 
> 标签：wpf, xaml, animation, properties, storyboard

我有一个简单的 MVVM 应用程序。它包含一个属性，当方法正确执行时，我将其更改为 true，如果现在执行，则更改为 false。当这个属性发生变化时，我想在我的 WPF 应用程序的状态栏上显示“通过”或“失败”几秒钟，然后让它消失。

所以我已经阅读了 StackOverflow，并用谷歌搜索，但无济于事。我想我误解了我需要如何构建故事板。

在我的状态栏中，我添加了一个故事板，我试图在`<UserControl.Resources>`我的 XAML 文件的开头触发它。这个对吗 ？目前我正在使用 0/1 的虚拟值，我认为正确的做法是使用我可以制作的 BooleanToString 转换器，或者也许有更好的方法？

所以我的状态栏包含：

```
<StatusBar >
  <StatusBar.Resources>
    <Storyboard x:Key="StatusBar" >
      <DoubleAnimationUsingKeyFrames 
                    Storyboard.TargetProperty="(UIElement.Opacity)" 
                    Storyboard.TargetName="statusBarItem">
        <EasingDoubleKeyFrame KeyTime="0" Value="0"/>
        <EasingDoubleKeyFrame KeyTime="0:0:0.5" Value="1"/>
        <EasingDoubleKeyFrame KeyTime="0:0:3" Value="1"/>
        <EasingDoubleKeyFrame KeyTime="0:0:4" Value="0"/>
      </DoubleAnimationUsingKeyFrames>
    </Storyboard>
  </StatusBar.Resources>
</StatusBar> 
```

我正在尝试注册以在我的 UserControl.Resources 中调用它：

我的结构完全倒退了吗？它不会编译，我得到错误：

```
A value of type 'BeginStoryboard' cannot be added to a collection or dictionary of type 'SetterBaseCollection'. 
```

任何帮助、资源或信息将不胜感激。非常感谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-14T12:15:31.860

这是一个例子。您需要使用触发器来启动情节提要。

```
<Grid>
    <Grid.DataContext>
        <WpfApplication1:MainViewModel/>
    </Grid.DataContext>

    <Grid.Resources>
        <Style x:Key="statusStyle" TargetType="StatusBar">
            <Setter Property="Opacity" Value="0"/>
            <Style.Triggers>
                <DataTrigger Binding="{Binding Pulse}" Value="True">
                    <DataTrigger.EnterActions>
                        <BeginStoryboard>
                            <Storyboard>
                                <DoubleAnimationUsingKeyFrames 
                                    AutoReverse="True" 
                                    Storyboard.TargetProperty="(UIElement.Opacity)" >
                                    <EasingDoubleKeyFrame KeyTime="0" Value="0"/>
                                    <EasingDoubleKeyFrame KeyTime="0:0:0.5" Value="1"/>
                                    <EasingDoubleKeyFrame KeyTime="0:0:3" Value="1"/>
                                    <EasingDoubleKeyFrame KeyTime="0:0:4" Value="0"/>
                                </DoubleAnimationUsingKeyFrames>
                            </Storyboard>
                        </BeginStoryboard>
                    </DataTrigger.EnterActions>
                </DataTrigger>
            </Style.Triggers>
        </Style>
    </Grid.Resources>
    <Grid.RowDefinitions>
        <RowDefinition/>
        <RowDefinition Height="auto"/>
    </Grid.RowDefinitions>

    <StatusBar Style="{StaticResource statusStyle}" 
                       Grid.Row="1" ItemsSource="{Binding Items}" />
    <CheckBox Content="CheckBox" Height="16" 
                      HorizontalAlignment="Left" Margin="41,30,0,0" 
                      IsChecked="{Binding Pulse}" VerticalAlignment="Top" />
</Grid> 
```

查看模型

```
public class MainViewModel : ViewModelBase
{
    private bool _pulse;

    public MainViewModel()
    {
        Items = new[] {"Passed"};
    }

    public IList<string> Items { get; private set; }

    public bool Pulse
    {
        get { return _pulse; }
        set { Set(()=>Pulse, ref _pulse, value); }
    }
} 
```

# android - 无法获得正确的视频路径

> ID：11031899
> 
> 赞同：0
> 
> 时间：2012-06-14T11:15:00.813
> 
> 标签：android, video, media

我希望我的应用程序从图库中选择一个视频。它使用以下代码来获取路径。

```
Intent i = new Intent(Intent.ACTION_GET_CONTENT); 
i.setType("video/*"); 
startActivityForResult(i,2); 
```

接着

```
 @Override
 protected void onActivityResult(int requestCode, int resultCode, Intent data) {
 // TODO Auto-generated method stub

  if(resultCode==RESULT_OK){

      str = data.getData().getPath();
   //this.go();
      this.ko();
  }
 } 
```

`str`存储路径。对于测试运行，它的值是`/external/video/media/10`，但它应该类似于`/sdcard/DCIM/a.mp4`使用`MediaMetaDataRetriever`. 怎么做 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T11:19:25.523

就您而言，（据我了解您的问题）

```
if(resultCode==RESULT_OK){
      str = getRealPathFromURI(data.getData());
   //this.go();
      this.ko();
  } 
```

使用此函数从 Uri 获取真实路径..

**功能：**

```
public String getRealPathFromURI(Uri contentUri)
    {
        try
        {
            String[] proj = {MediaStore.Video.Media.DATA};
            Cursor cursor = managedQuery(contentUri, proj, null, null, null);
            int column_index = cursor.getColumnIndexOrThrow(MediaStore.Video.Media.DATA);
            cursor.moveToFirst();
            return cursor.getString(column_index);
        }
        catch (Exception e)
        {
            return contentUri.getPath();
        }
    } 
```

# c# - 使用 c# 在 AVG 或 Norton 防病毒软件的允许列表中添加项目

> ID：11031901
> 
> 赞同：0
> 
> 时间：2012-06-14T11:15:03.077
> 
> 标签：c#, asp.net, operating-system, antivirus

是否可以使用 c# asp.net 允许或限制项目？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T11:16:42.170

使用 ASP.Net 你不能修改客户端的系统资源。我不确定你是否可以使用带有 C# 的桌面应用程序来做到这一点

# iphone - 如何在 adobe app measure 或 adobe omniture 中注册应用程序？

> ID：11031904
> 
> 赞同：0
> 
> 时间：2012-06-14T11:15:15.907
> 
> 标签：iphone, objective-c, xcode, ipad, adobe-analytics

我有以下关于 adobe omniture 的问题

1.  我们如何注册 iPhone 应用程序
2.  我们如何查看我们的 iPhone 应用程序的所有曲目或报告
3.  什么是 s.account 以及我们如何从 omiture 中获取它

    omn​​iture = [[AppMeasurement alloc] init];

    ```
    omniture.account = @"mykey";
    omniture.ssl = YES;
    omniture.trackingServerSecure = @"myserver";
    omniture.trackingServer = @"myserver";
    omniture.currencyCode = @"USD";
    omniture.debugTracking = YES;
    omniture.OfflineThrottleDelay = [NSNumber numberWithInt:0];
    omniture.offlineLimit = [NSNumber numberWithInt:300];
    omniture.trackOffline = true;
        NSDictionary *chrumMeasureDict = [configData objectForKey:@"churnMeasure"];
        ChurnMeasurement *c = [omniture getChurnInstancePopulateDefaults:NO];
        [c setValuesForKeysWithDictionary:chrumMeasureDict];
        omniture.useBestPractices = YES; 
    ```

    然后当然是我的事件

    NSMutableDictionary *trackData = [[NSMutableDictionary alloc]init]; for (NSDictionary *datadict in eventData) {

    ```
     [trackData setValue:[datadict objectForKey:@"value"] forKey:[datadict objectForKey:@"event"]];

    }
    [omniture track:trackData]; 
    ```

任何小的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T22:52:36.433

To answer your questions:

1.  You do not need to register an iPhone app with Omniture. Implementing code to send data to SiteCatalyst is enough to populate their reports.
2.  In order to view reports that your app is sending to Adobe's data collection servers, you must login to the Digital Marketing Suite interface at [http://my.omniture.com](http://my.omniture.com).
3.  The s.account variable determines the report suite ID you send data to. A report suite ID tells Adobe's servers which reports to populate. To locate the report suite ID, login to SiteCatalyst and go to Admin | Admin Console | Report Suites. From there you will see the full list of report suites with their associated IDs.

# ios - 处理应用购买 - 从我自己的服务器获取产品标识符

> ID：11031913
> 
> 赞同：1
> 
> 时间：2012-06-14T11:15:43.940
> 
> 标签：ios, in-app-purchase

我正在尝试在应用程序购买中实现销售歌曲。

歌曲文件存储在我们的服务器中。我们还将通过我们的网络应用程序添加新歌曲。在这个实现中，我有以下问题，因为我不知道如何处理。

**从 Apple 文档中**：- Apple 建议您从服务器检索产品标识符，而不是将它们包含在属性列表中。这使您可以灵活地添加新产品，而无需更新您的应用程序。

**我的问题**：- 如果我从我的服务器存储和获取所有产品标识符，那么 iTunes 如何知道我的应用内购买？例如，我在我的网络应用程序中添加了 100 首歌曲。我需要添加以下信息100次吗

> **参考名称**：产品的通用名称。此名称不可编辑，并且不会显示在 App Store 中。
> 
> **产品 ID**：您的应用的唯一 ID。通常是 com.company.appname.product 的形式，但它可以是任何你想要的。
> 
> **类型**：您有 3 个选择： 非消耗品：只需支付一次（如果您想要免费升级产品，请使用此选项） 消耗品：为每次下载付费订阅：定期付款

请为我阐明这一点

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-14T11:19:26.530

如果您想销售 100 个产品，那么是的，您必须在 iTunesConnect 上创建 100 个应用内购买。

iTunes 上的信息可能如下所示：

> **参考**：歌曲101
> 
> （这应该与您的服务器匹配，并且是您的应用程序应该从该服务器下载的内容） **ProductID** :com.companyName.appName.song101
> 
> **类型**：非消耗品

您发布的苹果文档表明您不必再次提交您的应用程序。

> 这使您可以灵活地添加新产品，而无需更新您的应用程序。

# javascript - 如何检索树形面板的节点？

> ID：11031919
> 
> 赞同：0
> 
> 时间：2012-06-14T11:15:51.553
> 
> 标签：javascript, extjs, tree, extjs4, treepanel

我正在使用 ExtJS 4。我创建了一个树面板

```
var treeStore = Ext.create('Ext.data.TreeStore', {
        root: {
            text:'Reports',
            expanded: true,
            children: [
                {
                    id: 'operationalNode',
                    text: 'Operational',
                    children: [{ text: "report1", leaf: true }]
                },
                {
                    id: 'managementNode',
                    text: 'Management',
                    children: [{ text: "report2", leaf: true }]
                },
                {
                    id: 'inventoryNode',
                    text: 'Inventory'
                }
            ]
        }
    });
var treePanel = Ext.create('Ext.tree.TreePanel',{
    animate:true,
    layout:'fit',
    height:400,
    store:treeStore
    }); 
```

现在我想检索 'Operational' 孩子作为

```
Ext.getCmp('operationalNode'); 
```

但它返回null。

**为什么会这样？**

**如何检索该节点？**

**有没有办法通过它的名字来检索节点？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T11:25:24.487

节点是具有节点接口的实际模型。所以你应该只使用 treestore 中的 getNodeById

```
var node = treeStore.getNodeById('operationalNode') 
```

您的数据在 node.data 中，就像在任何其他模型中一样

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T11:22:19.933

你需要这样的东西：

```
Ext.getCmp('id-of-the-view').getView().getSelectionModel().getSelection()[0]; 
```

# machine-learning - 向词袋模型添加新术语

> ID：11031923
> 
> 赞同：3
> 
> 时间：2012-06-14T11:16:17.193
> 
> 标签：machine-learning, nlp, data-mining, cluster-analysis

我正在使用 k-means 聚类对一组新闻项目进行分组。我使用词袋模型来表示文档，更具体地说，每个文档都表示为词频向量。

我的问题：如何添加新文档而无需重新计算所有术语频率向量（看到包含所有文档的所有术语的词汇表会改变）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-14T13:42:17.860

简单的解决方案是使用您已经看过的文档中的词汇，忽略任何新术语；这是文件分类的惯例。

近年来流行的另一种解决方案是完全抛弃词汇表并使用[特征散列](https://en.wikipedia.org/wiki/Feature_hashing)。

第三种可能性是在特征向量中为将来的术语保留空间。例如，假设您正在对具有大小为*N*的词汇表的一堆文档进行向量化，然后您实际上将它们转换为大小为*N* + *K*的向量，最终的*K*最初设置为零，因此您最多可以将*K*项添加到以后的词汇。

（可能不是解决方案是直接在哈希表上计算点积、均​​值等。这将是最灵活的方法，但通常*很*慢。）

# iphone - 如何检查 Core Data 是否已经有值？

> ID：11031930
> 
> 赞同：1
> 
> 时间：2012-06-14T11:16:42.217
> 
> 标签：iphone, ios, xcode, core-data

我有这段代码，它从一个单元格中获取 id 和 name.. 然后当我选择一行时，我必须保存这个选择并将其发送到 Core Data ......但是例如：如果我已经有一个重复的城市名称..我怎样才能停止添加它？

```
AppDelegate *appDelegate = [[UIApplication sharedApplication] delegate];

NSManagedObjectContext *context = [appDelegate managedObjectContext];
NSManagedObject *villesR = [NSEntityDescription
                                   insertNewObjectForEntityForName:@"Ville"
                                   inManagedObjectContext:context];

[villesR setValue:idVille forKey:@"idV"];
[villesR setValue:nomville forKey:@"nom"];

[self.navigationController pushViewController:detailView animated:YES]; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-14T13:08:58.263

泰达内，

当您需要检查一个对象是否已经存在时，您需要设置一个获取请求并使用特定的谓词。在你的情况下，你可以简单地获取反对`Ville`，看看你是否 `idV`已经有了。我想`idV`这就像您的`Ville`. 检查`nom`可能是相同的，但您可以`cities`在世界上两个不同的地方有两个同名。

**@alpz**解决方案没问题。此外，您还可以将 fecth 限制设置为 1：

```
[request setFetchLimit:1]; 
```

否则你可以简单地做

```
NSUInteger count = [context countForFetchRequest:request error:&error];    
if(count == 0) {

     // add the new city here
} 
```

代替

```
NSArray *results = [context executeFetchRequest:request error:nil]; 
```

**@Phillip Mills**说您可以使用`NSManagedObject`子类而不是使用键值编码访问。我认为使用类的属性而不是纯字符串键更容易。

所以，一旦你创建了一个`Ville`子类（[organising-core-data-for-ios](http://blog.chrismiles.info/2011/06/organising-core-data-for-ios.html)），你就可以为它创建一个类别，叫做`Ville+Extension`，然后创建一个类似下面的方法：

```
+ (Ville *)villeWithUniqueName:(NSString *)name withManagedObjectContext:(NSManagedObjectContext*)context
{
    NSFetchRequest * request = [[NSFetchRequest alloc] init];
    [request setEntity:[NSEntityDescription entityForName:@"Ville" inManagedObjectContext:context]];
    [request setPredicate:[NSPredicate predicateWithFormat:@"nom = %@", name];
    [request setFetchLimit:1];

    NSArray *results = [context executeFetchRequest:request error:nil];        

    Ville* theVille = nil;  

    if ([results count] == 0)
    {
        theVille = // create the new here
    }
    else
    {
        theVille = (Ville*)[results objectAtIndex:0];
    }

    [request release]; // if you don't use ARC

    return theVille;
} 
```

然后，使用该类别（在导入后），例如：

```
Ville* theVille = [Ville villeWithUniqueName:@"yourName" withManagedObjectContext:yourContext]; 
```

希望有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T11:35:28.947

在保存之前，您必须检查核心数据是否存在。这就是我处理相同情况的方式。

```
NSFetchRequest * request = [[NSFetchRequest alloc] init];
NSManagedObjectContext* context=[Server serverInfo].context;
[request setEntity:[NSEntityDescription entityForName:@"Coupon" inManagedObjectContext:context]];
[request setPredicate:[NSPredicate predicateWithFormat:@"Upc=%@",[[ar objectAtIndex:i]valueForKey:@"upc_code"]]];
NSArray *results = [context executeFetchRequest:request error:nil]; 
[request release];

if ([results count] == 0)
{
    //core data does not have an entry with the upc code(in my case) that i am searching
}
else
{
    // core data have already an entry with that upc code
} 
```

此结果数组将显示该条目是否存在。如果您有任何疑问，请告诉我。祝您编码愉快！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T11:37:57.917

您最好的选择可能是为其创建一个 City 类和一个类方法，例如：

```
+ (City *)cityWithUniqueName:(NSString *)name; 
```

在那里，您将查找具有名称的现有核心数据对象并将其返回。如果没有找到，使用创建一个`insertNewObjectForEntityForName`并返回它。

# javascript - jquery 对话框在 Internet Explorer 中加载时不显示 CSS 样式

> ID：11031940
> 
> 赞同：0
> 
> 时间：2012-06-14T11:17:08.067
> 
> 标签：javascript, jquery

我有一个加载外部 php 页面的 jQuery 对话框。一切正常，除了在 Internet Explorer (8) 中，当加载对话框时 css 被打开然后再次关闭。这意味着对话框是透明的！当我拖动对话框时，样式会再次应用，并且会继续应用。

这是对话框加载方法。

```
<script>
        $(document).ready(function() {

            //select all the a tag with name equal to modal
            $('a[name=eventform]').click(function(e) {
                //Cancel the link behavior
                e.preventDefault();

                $("#dialog").load(e.target.href).dialog({
                    title : 'Activity'
                });

            });

        });
    </script> 
```

这是外部页面。在 Firefox 中一切正常，但在 Internet Explorer 中加载时以某种方式删除了该样式。

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
    <title><?php echo $pgtitle ?></title>

    <script type="text/javascript" src="js/jquery-1.7.1.min.js"></script>
    <script type="text/javascript" src="js/jquery-ui-1.8.21.js"></script>
    <link rel="stylesheet" type="text/css" href="calendar/css/popwin.css" />

    </head>
<body>
          ...... 
```

我尝试使用@import 来获取样式表，但这没有什么区别。

同样的问题出现在 Internet Explorer 9 上，但有时也会出现 (????)。

谢谢，科恩

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T11:38:26.780

尝试在页面底部包含 javascript，就在 end body 标记之前。这可以防止在页面加载之前对 DOM 进行任何修改。

例子：

```
<html>
<head>
</head>
<body>
CONTENT
...
...
<script type="text/javascript" src="js/jquery-1.7.1.min.js"></script>
<script type="text/javascript" src="js/jquery-ui-1.8.21.js"></script>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T11:43:26.730

试试这个：

```
<script>
    $(document).ready(function() {

        //select all the a tag with name equal to modal
        $('a[name=eventform]').click(function(e) {
            //Cancel the link behavior
            e.preventDefault();

            $("#dialog").load(e.target.href, function(){
              $('#dialog').dialog({
                 title : 'Activity'
              })
            });

        });

    });
</script> 
```

# php - 我可以使用 PHP date() 测试夏令时 (DST) 吗？

> ID：11031943
> 
> 赞同：0
> 
> 时间：2012-06-14T11:17:14.307
> 
> 标签：php

我正在查看 PHP`date()`文档，并认为这`'I'`会告诉我提供的日期是否在 DST 中。所以我期待以下内容：

```
$d = strtotime('2012-07-01 12:30:00, Europe/London'); // this is in DST
$bool = date('I',$d); // 1 
```

但得到了这个：

```
$bool = date('I',$d); // 0 
```

显然我读错了文档。我知道我可以使用`dateTimeZone()`转换来做到这一点，但这不是一个功能`date()`吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T11:20:11.600

当你这样做时，`strtotime`你会得到一个整数。您丢失了时区、夏令时等的所有信息，您只得到一个整数。见[http://php.net/manual/en/function.strtotime.php](http://php.net/manual/en/function.strtotime.php)

如果你想使用这类信息，你应该使用`DateTime`类和函数： http: [//php.net/manual/en/class.datetime.php](http://php.net/manual/en/class.datetime.php)

您可以，但我认为您最好使用`DateTime`，将当前时区设置为您希望从中获取信息的任何位置：

```
date_default_timezone_set('UTC'); 
```

（来自`date()`手册，示例1：[http](http://www.php.net/manual/en/function.date.php) ://www.php.net/manual/en/function.date.php ）

# mysql - 仅使用一次时出现“在 DEFAULT 或 ON UPDATE 子句中只有一个带有 CURRENT_TIMESTAMP 的 TIMESTAMP 列”错误

> ID：11031946
> 
> 赞同：3
> 
> 时间：2012-06-14T11:17:41.013
> 
> 标签：mysql, sql, timestamp

我正在使用以下 sql 创建一个数据库表：

```
CREATE  TABLE `cs3_ds1` (
`ID` INT NOT NULL ,
`TIME` TIMESTAMP NOT NULL ,
`USER` VARCHAR(45) NOT NULL ,
`TIME1` TIMESTAMP NOT NULL ,
`TIME2` TIMESTAMP NOT NULL ,
`INSERT_TIME` TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ,
 PRIMARY KEY (`ID`) )
 ENGINE = InnoDB 
```

虽然我只在一列中使用当前时间戳作为默认值，但我收到以下错误：

```
ERROR 1293: Incorrect table definition; there can be only one TIMESTAMP column with    CURRENT_TIMESTAMP in DEFAULT or ON UPDATE clause 
```

为什么我会收到此错误？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-14T11:40:48.913

MySQL 使用 自动初始化 TIMESTAMP 列`DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP`，因此您的第一列`TIME`默认添加了 CURRENT_TIMESTAMP。因此，当您将 DEFAULT 显式添加到列时，一列已经存在。您要么需要更改列的定义顺序：

```
CREATE  TABLE `silas`.`cs3_ds1` (
`ID` INT NOT NULL ,
`INSERT_TIME` TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ,
`TIME` TIMESTAMP NOT NULL ,
`USER` VARCHAR(45) NOT NULL ,
`TIME1` TIMESTAMP NOT NULL ,
`TIME2` TIMESTAMP NOT NULL ,
 PRIMARY KEY (`ID`) )
 ENGINE = InnoDB 
```

或者将默认值添加到您的其他时间戳列：

```
CREATE  TABLE `silas`.`cs3_ds1` (
`ID` INT NOT NULL ,
`TIME` TIMESTAMP NOT NULL DEFAULT 0,
`USER` VARCHAR(45) NOT NULL  DEFAULT 0,
`TIME1` TIMESTAMP NOT NULL DEFAULT 0 ,
`TIME2` TIMESTAMP NOT NULL DEFAULT 0 ,
`INSERT_TIME` TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ,
 PRIMARY KEY (`ID`) )
 ENGINE = InnoDB 
```

有关更多信息，请参阅[MySQL 文档](http://dev.mysql.com/doc/refman/5.0/en/timestamp-initialization.html)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-10-14T02:25:17.563

请检查您的 MYSQL 版本。您的 MYSQL 版本可能不是 5.6。由于 MYSQL 版本 5.5 中的限制而发生此问题。您需要将版本更新到 5.6。

以下是我如何查询这个问题

我在 MYSQL 中添加表时遇到此错误

表定义不正确；在 DEFAULT 或 ON UPDATE 子句中只能有一个带有 CURRENT_TIMESTAMP 的 TIMESTAMP 列 我的新 MYSQL 表看起来像这样。

创建表 table_name (col1 int(5) auto_increment 主键, col2 varchar(300), col3 varchar(500), col4 int(3), col5 tinyint(2), col6 timestamp default current_timestamp, col7 timestamp default current_timestamp on update current_timestamp, col8 tinyint(1) 默认为 0，col9 tinyint(1) 默认为 1)；经过一段时间阅读不同 MYSQL 版本的变化和一些谷歌搜索。我发现在 MYSQL 5.6 版中对 5.5 版进行了一些更改。

本文将帮助您解决问题。[http://www.oyewiki.com/MYSQL/Incorrect-table-definition-there-can-be-only-one-timestamp-column](http://www.oyewiki.com/MYSQL/Incorrect-table-definition-there-can-be-only-one-timestamp-column)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-29T20:06:45.913

我最近也遇到了这个错误，但那是因为我运行的是 < PHP 5.6.5。根据 PHP 5.6.5 的文档，此限制已被取消：

> 以前，每个表最多可以有一个 TIMESTAMP 列可以自动初始化或更新为当前日期和时间。这个限制已经解除。任何 TIMESTAMP 列定义都可以具有 DEFAULT CURRENT_TIMESTAMP 和 ON UPDATE
> CURRENT_TIMESTAMP 子句的任意组合。此外，这些子句现在可以与 DATETIME 列定义一起使用。有关详细信息，请参阅 TIMESTAMP 和 DATETIME 的自动初始化和更新。

有关更多信息，请参阅 MySQL 的文档。如果您点击此链接，特别是在“数据类型节点”部分下：[MySQL 5.6.5 中的更改](http://dev.mysql.com/doc/relnotes/mysql/5.6/en/news-5-6-5.html)

# c# - 导航系统并保持屏幕位置

> ID：11031947
> 
> 赞同：3
> 
> 时间：2012-06-14T11:17:42.653
> 
> 标签：c#, xaml, windows-8

我想知道如何在 w8 项目的页面之间更改我的导航系统。

例如，我有第 1 页，带有项目列表的全景图。如果我水平滚动直到屏幕中间并单击一个项目，我将转到第 2 页。当我单击返回时，调用 Frame.GoBack() 方法。然后它将重新创建一个页面，因此用户将看到全景图的开头。

我想知道如何保持屏幕位置？如果有人有任何链接或想法，欢迎他们！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T14:24:16.017

你可以设置

```
this.NavigationCacheMode = NavigationCacheMode.Enabled; 
```

在页面 1 的构造函数中。通常页面是在每次导航到时构造的。如果设置`NavigationCacheMode`，它们将被构造一次[1]。如果您稍后导航回它，您将不会获得新实例。

[1] 如果运行时刷新缓存，或者您通过将`CacheSize`Frame设置为 来刷新缓存`0`，页面将被重建。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T13:06:27.417

Here is a bolgpost that does exactly that. It also handels invalidation of cache

[http://www.jayway.com/2012/05/25/clearing-the-windows-8-page-cache/](http://www.jayway.com/2012/05/25/clearing-the-windows-8-page-cache/)

# php - 缩小 php - 禁用 css uri 的重写不起作用

> ID：11031949
> 
> 赞同：1
> 
> 时间：2012-06-14T11:17:47.270
> 
> 标签：php, minify

根据[http://code.google.com/p/minify/wiki/UriRewriting上的文档](http://code.google.com/p/minify/wiki/UriRewriting)

```
$min_serveOptions['rewriteCssUris'] = false; 
```

我应该能够将以上内容添加到我的配置文件中，它将禁用 uri 重写。我想禁用它的原因是因为我不需要它。我所有的 css/js 文件都在一个文件夹中，根本没有嵌套。它正在重写网址。例如

例子：

```
min_extras/cli/minify.php -o ../../css/all.css ../../css/phppos.css ../../css/menubar.css ../../css/general.css ../../css/popupbox.css ../../css/register.css ../../css/receipt.css ../../css/reports.css ../../css/tables.css ../../css/thickbox.css ../../css/datepicker.css ../../css/editsale.css ../../css/footer.css ../../css/css3.css ../../css/jquery-ui-1.8.14.custom.css ../../css/jquery.loadmask.css ../../css/jquery.ui.all.css ../../css/paginate.css 
```

前：

```
background-image: url("../images/header/header_empty.png"); 
```

后：

```
background-image:url("s/header/header_empty.png"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T12:20:12.693

可能是你的“$min_serveOptions['rewriteCssUris'] = false;” 放在错误的地方。

在第 84 行的文件 minify.php（版本 2.1.5）中更改：

```
$combined = Minify::combine($sources) . "\n"; 
```

至：

```
$min_serveOptions = array('rewriteCssUris'=>false);
$combined = Minify::combine($sources,$min_serveOptions) . "\n"; 
```

然后一切正常

# vb.net - 为什么我只能从此代码中获得一个输出值（并且没有调试输出）？

> ID：11031950
> 
> 赞同：0
> 
> 时间：2012-06-14T11:17:49.120
> 
> 标签：vb.net, debugging, loops, console-application

我只是将我所有的代码都扔在这里，以防“SelectName()”子中的一段代码有问题。

```
Module Module1
    Dim selectednames As String = ""
    Dim index As Short = 0
    Dim inarray As Boolean = False
    Dim amountofkeys As Short
    Dim namesarray() As String
    Dim names As String = ""
    Dim input As String = ""
    Dim totalnames As Short = 0
    Dim indexofcomma As Short = 0

    Sub Main()
        Console.Write("Howmany keys are there to be given away? ")
        amountOfKeys = CShort(Console.ReadLine())
        Start()
        While Not amountofkeys = -1
            SelectName(names, totalnames)
            amountofkeys = amountofkeys - 1
        End While
        Console.Write("The winners are: " & selectednames)
        Console.ReadLine()
    End Sub

    Sub SelectName(ByVal names As String, ByVal totalnames As Short)
        ReDim namesarray(totalnames - 1)
        If inarray = False Then
            For x = 0 To totalnames - 1
                indexofcomma = InStr(names, ",")
                namesarray(x) = Left(names, indexofcomma - 1)
                names = Mid(names, indexofcomma + 1, (Len(names)))
            Next
            inarray = True
        End If
        Randomize()
        index = Int(Rnd() * (totalnames - 1))
        For x = 0 To totalnames - 1
            Debug.Print("namesarray(" & x & ") = " & namesarray(x))
        Next
        selectednames &= namesarray(index) & " "
        movenames()
    End Sub

    Sub movenames()
        For x = index To totalnames - 1
            namesarray(index) = namesarray(index + 1)
        Next
        totalnames -= 1
    End Sub

    Sub Start()
        Console.WriteLine("Enter all the viewer's names, one by one.")
        Console.WriteLine("Once all names have been entered, press 0.")
        input = Console.ReadLine()
        While Not input = "0"
            names &= input & ","
            totalnames += 1
            input = Console.ReadLine()
        End While
    End Sub
End Module 
```

这是它的作用的图像（我想你可以看到出了什么问题）

13 个输入，预期 3 个输出，仅给出 1 个输出。 ![错误的输出](../Images/bfe928614dc35cfc2e7ffebff9de7a60.png)

你们有没有机会帮我找出问题所在？

据我目前所了解的，它正在执行正确数量的循环等。它一旦开始为第二个游戏密钥生成“获胜者”，它就不会从名称数组中获得字符串值。

还有，为什么

```
For x = 0 To totalnames - 1
            Debug.Print("namesarray(" & x & ") = " & namesarray(x))
        Next 
```

不给我调试输出？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T12:00:16.403

简化您的问题。

将 names 设为 List(Of String)，而不是在字符串中添加“,name”，而是使用`names.Add(namereadfromconsole)`. 一个简单的 names.Contains(thename) 可以替换`inArray`您正在使用的标志，而不是遍历名称字符串。而不是`movenames()`调用，而是一个简单的`names.Remove(nametoremove)`.

至于 Debug.Print() 调用不显示任何内容，请尝试在 Options->Debugging->General->[x] Redirect all Output Window text to the Immediate Window 下进行检查。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T12:10:59.570

主要错误在这里

```
 For x = index To totalnames - 1
        namesarray(index) = namesarray(index + 1)
    Next 
```

我认为你应该这样做

```
 For x = index To totalnames - 1
        namesarray(x) = namesarray(x + 1)
    Next 
```

请记住，如果随机索引等于名称数组中的最大值，它将导致您的代码崩溃。（例如：`totalnames=6`并且`index = Int(Rnd() * (totalnames - 1))`导致 index=5，然后 movenames 崩溃）

Debug.Print 输出进入即时窗口或输出窗口，而不是代码打开的控制台窗口。为此使用 Console.Writeline。

# java - Java Runtime exec 不抛出此类文件或权限被拒绝

> ID：11031954
> 
> 赞同：7
> 
> 时间：2012-06-14T11:17:51.857
> 
> 标签：java, ubuntu, runtime.exec

我的程序在 ubuntu 10.04 上运行，代码如下：

```
Process process=Runtime.getRuntime().exec("ls",null,null); 
```

它抛出一个异常：

```
Cannot run program "ls": java.io.IOException: error=2, No such file or directory, 
```

我试图将“ls”更改为“chmod”“pwd”，我发现没有一个shell命令可以工作，都遇到了同样的问题。（我也试过“/bin/sh -c ls”）

然后我将代码更改为：

```
Process process=Runtime.getRuntime().exec("/bin/ls",null,null); 
```

它抛出一个异常：

```
Cannot run program "/bin/ls": java.io.IOException: error=13, Permission denied 
```

我已将所有相关文件和目录的权限更改为 777，所以我真的不知道它有什么问题。

谢谢您的回复 。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T12:59:40.500

```
Process process=Runtime.getRuntime().exec("ls",null,null); 
```

这是预期的`No such file or directory`例外，因为`ls`很可能不在程序的当前工作目录中。当您`ls`从 Linux shell 提示符键入时，它会使用`PATH`环境变量转换`ls`为`/bin/ls`. `Runtime`不会为您执行此操作。

您需要指定完整路径`"/bin/ls"`。您应该使用该`Runtime.exec("/bin/ls")`方法而不是传入空参数。

```
Process process=Runtime.getRuntime().exec("/bin/ls"); 
```

您的评论似乎表明，即使您使用此调用，您也会遇到`Permission denied`异常。这适用于标准 Java 可执行文件。我假设您可以`/bin/ls`成功地从 Linux 命令行执行操作？ `/bin/ls`（以及相关的目录）应该是 755 而*不是*777，这将是一场安全噩梦。但是777应该可以。

也许您正在运行某种受保护的 JDK？例如，出于安全原因，Applet 没有执行 Unix 命令的权限。也许您有一个限制性的[Java 策略文件](http://docs.oracle.com/javase/1.5.0/docs/guide/security/permissions.html#FilePermission)并且您需要添加`execute`权限？

# javascript - bootstrap scrollspy 加载后突出显示最后一个导航链接按钮

> ID：11031955
> 
> 赞同：14
> 
> 时间：2012-06-14T11:17:52.060
> 
> 标签：javascript, jquery, css, twitter-bootstrap, twitter-bootstrap-2

我在顶部构建了一个带有 5 个链接的导航栏。在页面本身，我根据元素中 # 标记后的名称添加了 5 个带有 id 的部分。问题是最后一个导航链接按钮被突出显示（“活动”类在开始时在运行时添加到它，尽管在代码本身中第一个导航栏项设置为“活动”。我有最新的引导程序版本，它是 v2 .0.4 出了什么问题？

```
<div class="navbar" id="MenuBar">
    <div class="topHeadContentLogo"></div>
    <ul class="nav nav-pills" id="MenuUl">
        <li class="active"><a href="#Weekly">Weekly</a></li>
        <li class=""><a href="#Post">Post</a></li>
        <li class=""><a href="#Audience">Audience</a></li>
        <li><a href="#Website">Website</a></li>
        <li><a href="#FAQ">FAQ</a></li>
    </ul>
</div>

<div id="contentDiv">
    <section id="Weekly">
        <h1>weekly</h1>
    </section>

    <section id="Post">
        <h1>Post</h1>
    </section>

    <section id="Audience">
        <h1>Audience</h1>
    </section>

    <section id="Website">
        <h1>Website</h1>
    </section>

    <section id="FAQ">
        <h1>FAQ</h1>
    </section>
</div>

$('#MenuBar').scrollspy(); after document ready 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-15T07:43:59.683

如果您在元素上有`data-spy`set `body`，请确保该`body`元素未设置为`height: 100%;`. 这就是我的问题。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-14T13:29:48.050

您是否已添加`data-spy="scroll"`到`<body>`标签（或任何其他相关标签）？

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-03T03:27:12.717

这只是发生在我身上，我在我试图滚动的那个元素中的一个额外元素上有 data-spy="scroll" （它是从某事遗留下来的，不应该在那里）。删除这个解决了这个问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-03T03:47:22.173

最新的引导文档建议如下

添加`data-spy="scroll"`到要监视的元素（通常是正文）并`data-target=".navbar"`选择要使用的导航

通过数据属性

```
<body data-spy="scroll" data-target=".navbar">...</body>

$(function () {
    $('#MenuUl a:first').tab('show');
  }) 
```

我希望这会有所帮助

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-10-07T11:34:05.013

这对我有用。我在 body 和我想被监视的 div 上都添加了 data-spy="scroll" 。删除它解决了这个问题

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-03-07T21:43:47.287

有同样的问题。将 bootstrap.min.js 更改为 bootstrap.js

似乎引导程序最小化版本使您的最后一个标识符成为活动页面。

# mysql - 从两个表中选择不同的

> ID：11031956
> 
> 赞同：1
> 
> 时间：2012-06-14T11:17:54.120
> 
> 标签：mysql

鉴于下表

```
 orders
      +----+---------+---------+
      | id | user_id | details |
      +----+---------+---------+  
      | 1  |    2    | blue    | 
      +----+---------+---------+
      | 2  |    1    | red     | 
      +----+---------+---------+
      | 3  |    2    | yellow  | 
      +----+---------+---------+
      | 4  |    2    | cyan    | 
      +----+---------+---------+

      users
      +---------+---------+---------+
      | user_id |    ph   |   name  | 
      +---------+---------+---------+
      |   1     |   123   |   fred  | 
      +---------+---------+---------+
      |   2     |   456   |   Stan  | 
      +---------+---------+---------+
      |   3     |   189   |   Levi  | 
      +---------+---------+---------+ 
```

我知道如何使用 distinct 在第一个表中只选择每个用户的一次出现

```
 SELECT DISTINCT user_id FROM orders 
```

我怎么能只从用户那里提取电话号码？

我可能会去循环并挑选出每个数字，比如......

```
 SELECT ph from users WHERE user_id = user_id 
```

不禁想到我可以使用一个单行查询。

结果是

```
 123
     456 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T11:29:58.077

从 Orders 表中选择 Distinctively 可能是一项繁重的操作。取决于该表将变得有多大。

也许这个会更快：

```
Select u.ph 
  from users u 
  where exists (select id from orders where user_id = u.user_id); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T11:32:29.963

如果您定义了相关子查询，则相关子查询将比使用`JOIN`可以连接索引的方法慢得多：

```
SELECT
    a.ph
FROM
    users a
INNER JOIN
    orders b ON a.user_id = b.user_id
GROUP BY
    a.user_id,
    a.ph 
```

# maven - maven中不同分类器的不同依赖关系

> ID：11031961
> 
> 赞同：3
> 
> 时间：2012-06-14T11:18:04.630
> 
> 标签：maven

我有一个带有几个依赖项的 Maven 工件。我想像往常一样发布内置到 jar 中的模块，但我也想使用 maven shade 插件发布一个包含其依赖项的 jar。这个 uber jar 有一个不同的分类器。

这一切都很好，除非有人使用它的分类器拉入 uber jar，他们仍然可以获得原始的所有依赖项，这是他们不需要的。

如何根据分类器排除某些依赖项？我尝试过使用配置文件，但我不知道如何根据工件的分类器激活配置文件。

我知道我可以将 uber jar 作为一个全新的工件进行排除，但这有点混乱，我希望有更好的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-15T02:15:57.493

尝试[可选](http://maven.apache.org/guides/introduction/introduction-to-optional-and-excludes-dependencies.html)依赖。您必须在 uber jar 工件的可选值中将所有依赖项声明为 true。

此外，您可能希望创建另一个工件，而不是使用分类器。您可以从 mockito 调整它。请参阅[mockito-core 与 mockito-all](https://code.google.com/p/mockito/wiki/DeclaringMockitoDependency)。

# ruby-on-rails - 用于 rails 3.2 和 mongoid 的 hit count gem

> ID：11031962
> 
> 赞同：0
> 
> 时间：2012-06-14T11:18:12.623
> 
> 标签：ruby-on-rails, ruby-on-rails-3, mongoid, impressions

我看到了这个宝石：

[https://github.com/charlotte-ruby/impressionist](https://github.com/charlotte-ruby/impressionist)和[用于 Rails 中页面视图的简单计数器](https://stackoverflow.com/questions/4815713/simple-hit-counter-for-page-views-in-rails)

但它不支持 mongodb 和 mongoid。

**是否有一些宝石作为印象派支持 mongoid？**

# javascript - jQuery removeAttr('type') 不起作用

> ID：11031966
> 
> 赞同：8
> 
> 时间：2012-06-14T11:18:29.953
> 
> 标签：javascript, jquery, html

我的问题很简单

```
$('#button').removeAttr('type'); 
```

在 firebug 上触发错误

```
type property can't be changed 
```

我有两个问题：

*   如何解决这个问题？
*   是否有无法更改的属性列表的参考？

谢谢

**编辑**

我想做的是：

阻止按钮提交表单。

注意：我的按钮是作为 html 模板包含的，我无法访问表单代码。
就像是：

```
include 'form.php';
include 'buttons.php'; 
```

我只能控制**buttons.php**

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-14T11:19:39.593

插入 DOM 后，您无法更改 IE (<9?) 中的`input`'s 。`type`因此，jQuery 会为所有浏览器引发错误。

从来源：

```
 set: function( elem, value ) {
            // We can't allow the type property to be changed (since it causes problems in IE)
            if ( rtype.test( elem.nodeName ) && elem.parentNode ) {
                jQuery.error( "type property can't be changed" ); 
```

**我不知道（或 jQuery 知道）其他情况**，如何解决这个问题在很大程度上取决于您首先要尝试做什么。例如，考虑创建一个具有不同类型的新元素并使用它。

编辑：要防止按钮提交表单，您可以使用：

```
$("#button").click(function(e){
    e.preventDefault();
}); 
```

或者（信用 Tim Down）：

```
$("#button").prop("disabled", true); 
```

* * *

为了防止通过任何方式提交表单，您可以使用：

```
$("#form").submit(function(e){
    e.preventDefault();
}); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-14T11:27:50.790

你可以替换它：

```
$('#button').replaceWith('<input type="text" value="text"/>'); 
```

或使用`event.preventDefault()`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-14T11:33:51.127

由于您只想禁用提交按钮：

如果您使用的是 jQuery < 1.6，请执行以下操作：

```
$("#button").attr("disabled", 'disabled'); 
```

如果您使用的是 jQuery 1.6+：

```
$("#button").prop("disabled", true); 
```

请参阅此问题：[.prop() vs .attr()](https://stackoverflow.com/questions/5874652/prop-vs-attr) 以获取参考原因。

# c# - 请参阅 C# XML 文档注释中的另一部分

> ID：11031971
> 
> 赞同：1
> 
> 时间：2012-06-14T11:18:38.020
> 
> 标签：c#, xml-comments, cross-reference

有谁知道是否可以从另一部分的文本中引用另一部分，例如从“摘要”部分引用“返回”部分，反之亦然（在给定方法的文档中），并具有由生成的超链接编译器？（我最初的问题是如何从“摘要”中引用返回值，对于带有“paramref”的参数或带有“cref”的其他成员/类等已经可能。然后我意识到这个问题只是一个我的问题中描述的更一般的情况的特殊情况）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T12:12:59.287

没有这种可能性。只有 paramref 和 typeref。

也许您需要自己的带有自定义标签的 xml 注释处理器。或者尝试使用其他工具搜索自定义标签的可扩展性。

例如 NDoc（或者也许 sandcastle 也有可扩展点，但无论如何，对于 sandcastle 源代码是开放的）：

[http://ndoc.sourceforge.net/usersguide.html](http://ndoc.sourceforge.net/usersguide.html)

# android - VideoView MP4 不工作

> ID：11031972
> 
> 赞同：0
> 
> 时间：2012-06-14T11:18:41.763
> 
> 标签：android

我一直在努力让 VideoView 处理 mp4 文件。问题是，对于某些 mp4 文件（分辨率较低），它可以工作，但在更高分辨率 480x268 的情况下，它会拒绝播放。[这个问题跟我这里](https://stackoverflow.com/questions/2910292/android-playing-mp4)的情况差不多。据说安卓只能播放特定分辨率以下的mp4文件。是否适用于今天？

PS我正在针对Android 2.3进行构建。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T11:38:20.820

您是否在创建用于播放视频和音频的模拟器时添加了硬件支持。也许就是这样，它不起作用

# url-rewriting - wso2 esb rewriterule 在查询中用 %26 替换 &

> ID：11031973
> 
> 赞同：0
> 
> 时间：2012-06-14T11:18:46.507
> 
> 标签：url-rewriting, wso2, wso2esb, ampersand

这是实际查询：

```
?param1=xxx&param2=yyy&zzz 
```

param2 取 yyy&zzz 值

现在我需要替换`yyy&zzz`为`yyy%26zzz`. 但不要在查询中用 %26 替换第一个 &。如何使用 urlrewrite 在 wso2 esb 中实现这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T13:36:37.253

您可以使用WSO2 ESB 中的[脚本调解](http://docs.wso2.org/wiki/display/ESB403/Script+Mediator)器对 url 进行此更改。例如，以下脚本中介配置将获取soap标头的“To”属性的url并进行您想要的替换。

```
<script language="js">var url = mc.getTo().toString();
var newURL = url.replace("yyy&amp;zzz","yyy%26zzz");
mc.setTo(newURL);</script> 
```

同样，您可以在消息上下文中获取任何 url 并对其进行转换。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-25T08:20:33.047

您只需使用 xpath 函数 fn:replace(index,index) 替换 url

# iphone - 如何在 iTunes 连接中测试我的 inapppurchase

> ID：11031975
> 
> 赞同：3
> 
> 时间：2012-06-14T11:18:53.513
> 
> 标签：iphone, ios, xcode

我正在 iOS sdk 中的 inapp-purchase 中工作，我已完成所有步骤，例如在 iTunes 中创建应用程序和在 iTunes connect 上的 manage-inapppurchase 中创建**非消耗性应用程序。我的应用程序状态为****等待上传，**如下面的屏幕截图：

![在此处输入图像描述](../Images/a749e255414933ff2957525afa1d718b.png)

我的未购买状态已**准备好提交**

![在此处输入图像描述](../Images/47ee87317bb2347ac6c84005e858f89a.png)

代码明智的应用程序购买功能已完成，但是，我测试我的应用程序是**SKProductsRequest**返回未找到产品...！

我的主要应用程序包 id 像**com.mycompany.myapp**，

和我的应用内捆绑 ID，如**com.mycompany.paidapp**。

他们如何测试应用内购买步骤，任何人都可以指导我，请..！

我的示例代码在这里：

```
- (void)loadStore {

    if ([SKPaymentQueue canMakePayments]) {
        NSLog(@"Parental-controls are disabled");

        request = [[SKProductsRequest alloc] initWithProductIdentifiers:[NSSet setWithObject:@"com.mycompany.paidapp"]];
        //request.delegate = self;
        [request setDelegate:self];
        [request start];

    }
    else {
        NSLog(@"Parental-controls are enabled");
    }

}

- (void)productsRequest:(SKProductsRequest *)request didReceiveResponse:(SKProductsResponse *)response {

    SKProduct *validProduct = nil;
    int count = [response.products count];
    if (count > 0) 
    {
        validProduct = [response.products objectAtIndex:0];
        NSLog(@"Products found!");
        [[NSNotificationCenter defaultCenter] postNotificationName:kProductsLoadedNotification object:@"Product Found..!"];

    } else if (!validProduct) 
    {
        NSLog(@"No products available");
        [[NSNotificationCenter defaultCenter] postNotificationName:kProductsLoadedNotification object:@"Product Not Found..!"];

    }

} 
```

命令提示符总是在输出下方返回 nslog：

**`No products available`**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T13:46:12.527

为了测试应用内您可以创建一个 AppID 以及一些应用内内容，在发布应用程序之前您应该检查它。

出于这个原因，我遵循的政策如下： 1\. 首先上传一个应用程序。2.添加应用内容。3\. 自己拒绝二进制文件。一旦您对应用内测试感到满意，然后将新的二进制文件重新加载到 iTunes。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T11:37:00.850

应用程序包名称和 iTunes 应用程序包名称应相同。并且产品必须存在于 iTunes 上。试试下面的代码：

```
[productIdentifierList addObject:@"CB001"];
[productIdentifierList addObject:@"CB002"];
[productIdentifierList addObject:@"CB003"];

        SKProductsRequest *request = [[SKProductsRequest alloc] initWithProductIdentifiers:[NSSet setWithArray:productIdentifierList]];
        request.delegate = self;
        [request start]; 
```

CB001、CB002 是您在 iTunes 上的产品 ID。

这对我来说可以。

# reportingservices-2005 - 如何在 SQL Reporting Services 中隐藏某些值

> ID：11031976
> 
> 赞同：0
> 
> 时间：2012-06-14T11:19:00.423
> 
> 标签：reportingservices-2005

我正在 SSRS 2005 中创建一个报告，表中应该有一个 NULL 值，它正在返回一个值（“Alle”[这些表大多是德语]）。这不是一个真正的问题，因为我认为我可以隐藏这里解释的值：

[如何在 SQL Reporting Services 2005 上隐藏某些内容](https://stackoverflow.com/questions/1227565/how-to-hide-certain-on-sql-reporting-services-2005?answertab=active#tab-top)

但是，当我添加`=Replace(Fields!LengthofFunding.Value,"Alle","")`到字段中的表达式框时，我想隐藏该值，因为它返回的是 FALSE 值而不是空白。

谁能告诉我如何让这个字段返回一个空白值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T08:09:36.060

**我认为您可以使用Iif**而不是替换，如下所示：

```
=Iif(Fields!LengthofFunding.Value = "Alle", " " , Fields!LengthofFunding.Value ) 
```

这意味着如果它等于“Alle”替换为空白，否则保留原始值。

# visual-studio-2010 - 是否可以创建一个在类构造函数中显式添加代码的 Visual Studio 片段？

> ID：11031978
> 
> 赞同：1
> 
> 时间：2012-06-14T11:19:02.760
> 
> 标签：visual-studio-2010, visual-studio, code-snippets

我想设置一个代码片段（在本例中为 C#）来创建一个在类构造函数中另外初始化的属性，其中包括该代码不仅插入到类主体中，而且还显式地插入到构造函数中。只剪一个有可能吗？如果是的话：怎么做？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T12:38:44.223

我不确定我是否完全理解了您的问题，但您可以使用此工具：

[http](http://snippeteditor.codeplex.com/ "片段编辑器")

://snippeteditor.codeplex.com/ 您可以为包含类构造函数中设置的一个属性的类编写一个片段
看看在**课堂**和**道具**或**道具**片段中，它应该对您有所帮助

# github - GitHub：企业在其中存储解决方案是常见的做法吗？

> ID：11031979
> 
> 赞同：1
> 
> 时间：2012-06-14T11:19:05.673
> 
> 标签：github

我在看 Github，它看起来很棒。我看到您可以设置一些企业帐户来对您的工作进行版本控制。我知道那里有很多开源的东西，但是企业在其中存储解决方案是常见的做法吗？更重要的是，它安全吗？因为解决方案不被其他人查看。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T18:24:14.653

值得一提的是，我刚刚使用私有存储库将我公司的源代码转移到了 GitHub。另外，一段时间以来，我一直以同样的方式在 GitHub 上保留我自己的商业产品

它工作得很好。您的帐户有每个存储库的“贡献者”列表，该列表控制谁可以查看/提交每个存储库。

如果您不想将代码存储在其他人的服务器上，GitHub 上的企业帐户适合您。如果您想通过在您自己的服务器上安装软件来将您的存储库“置于防火墙之后”，请注册此服务。

参考：

*   [GitHub Enterprise](https://enterprise.github.com/)（这是“商业”计划）
*   [GitHub 安全](https://help.github.com/security/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T18:45:17.310

关于安全 - 几个月前有一个类似的问题。
检查它（以及我的答案:-)：
[在 github、bitbucket 等存储库站点上托管敏感数据有多安全？](https://stackoverflow.com/questions/7926744/how-safe-is-it-to-host-sensitive-data-on-repository-sites-like-github-bitbucket)

我不*知道*公司在网上存储他们的代码是否普遍……但我猜很多公司不喜欢在第三方托管他们的知识产权的想法。

可能“公司文化”占了很大一部分。
我想说“时髦”的互联网初创公司比“保守”的企业/“非技术”公司更有可能在网上托管他们的东西。

一些“时髦的互联网”公司（例如[Facebook](https://github.com/facebook)、[Twitter](https://github.com/twitter)、[GitHub](https://github.com/github) ......）至少有部分内容是开源的，但我不知道其中哪些还在那里托管他们的私有内容，哪些没有吨。
*（除了 GitHub，我在某处读到他们自己托管所有的东西……很有意义 :-)*

另一个例子：Headspring Software（不少知名的 .NET 开发人员都在此工作）[几乎完全在在线服务上运行](http://jeffreypalermo.com/blog/running-headspring-systems-on-cloud-services/)。
链接的博客文章没有明确提到他们托管源代码的位置，但我还是想提一下这个例子，因为他们已经外包了所有其他东西。
许多“保守”公司甚至不希望他们的电子邮件/日历/销售数据在云中的某些第三方提供商处获得……更不用说他们的源代码了。

# android - 如何擦除画布颜色并显示背景图像

> ID：11031980
> 
> 赞同：2
> 
> 时间：2012-06-14T11:19:07.097
> 
> 标签：android, android-layout, android-canvas, android-gesture

在我的应用程序中，我需要实现两个分层视图。一个包含位图图像，另一个是普通的背景颜色。当用户进行任何触摸事件时，它将擦除颜色，背景图像将逐渐出现在前面。为此，我实现了 Canvas。但我不能这样做。请指导我这种方法是否好或有其他方法可以做这种事情。

这是我的代码，

```
package com.drawline.view;
        import com.drawline.R;
        import android.content.Context;
        import android.graphics.Bitmap;
        import android.graphics.BitmapFactory;
        import android.graphics.Canvas;
        import android.graphics.Color;
        import android.graphics.Paint;
        import android.graphics.Paint.Style;
        import android.graphics.Path;
        import android.graphics.PorterDuff;
        import android.graphics.PorterDuffXfermode;
        import android.util.Log;
        import android.view.Menu;
        import android.view.MenuItem;
        import android.view.MotionEvent;
        import android.view.View;

        public class imageview extends View
        {

            private Paint paint;

           Context ctx;
           Bitmap bmpImg;
           private Canvas  mCanvas;
           private Path    mPath;
            public imageview(Context context)
            {
                super(context);
                this.ctx=context;
                mCanvas = new Canvas();
                mPath=new Path();
                init(ctx);    
            }

            private void init(Context ctx)
            {

                paint = new Paint();
                paint.setColor(Color.RED);
                paint.setStyle(Style.STROKE);
                paint.setStrokeWidth(6);
                paint.setAntiAlias(true);
                paint.setXfermode(new PorterDuffXfermode(PorterDuff.Mode.CLEAR));
                android.content.res.Resources res = ctx.getResources();
                bmpImg=BitmapFactory.decodeResource(res, R.drawable.priyanka);      
            }
            @Override
            protected void onDraw(Canvas canvas)
            {

                canvas.drawColor(Color.BLUE); 
                canvas.drawPath(mPath, paint);
            }
            public int  getLineArrayIndex(){
                return lineArrIndex;
            }
            float endPosX; 
            float endPosY ; 
            float startPosX;
            float startPosY;
            int lineArrIndex = 0;
            float prevX=0;
            private float mX, mY;
            private static final float TOUCH_TOLERANCE = 4;

            private void touch_start(float x, float y) {
                mPath.reset();
                mPath.moveTo(x, y);

                mX = x;
                mY = y;
            }
            private void touch_move(float x, float y) {
                float dx = Math.abs(x - mX);
                float dy = Math.abs(y - mY);
                if (dx >= TOUCH_TOLERANCE || dy >= TOUCH_TOLERANCE) {
                    mPath.quadTo(mX, mY, (x + mX)/2, (y + mY)/2);
                               mX = x;
                    mY = y;
                }
            }

            private void touch_up() {
                mPath.lineTo(mX, mY);
                mCanvas.drawPath(mPath, paint);
                mCanvas.drawColor(Color.TRANSPARENT);
                // kill this so we don't double draw
                mPath.reset();
            }
            public boolean onTouch(View v,MotionEvent event)
            {
                float x = event.getX();
                float y = event.getY();

                switch (event.getAction()) {
                    case MotionEvent.ACTION_DOWN:
                        touch_start(x, y);
                        invalidate();
                        break;
                    case MotionEvent.ACTION_MOVE:
                        touch_move(x, y);
                        invalidate();
                        break;
                    case MotionEvent.ACTION_UP:
                        touch_up();
                        invalidate();
                        break;
                }
                return true;
            }

        } 
```

# .net - 如何在 Visual Studio 设计器的属性部分的多行文本框中添加换行符

> ID：11031983
> 
> 赞同：0
> 
> 时间：2012-06-14T11:19:16.927
> 
> 标签：.net, vb.net, visual-studio, newline

这是一个 WinForm VB.NET 应用程序。请看下图：

![在此处输入图像描述](../Images/57f57b96c3fdc39b49d3b9b00462e2b1.png)

如何在 Visual Studio 设计器的属性部分的多行文本框中添加换行符？

我尝试使用`abc & Environment.NewLine & def`，但这不起作用。

### 更新：

如何在 VS 2008、VS 2005 和 VS 2003 中做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-14T11:34:47.277

在 Text 属性的右侧应该有一个下拉框（至少 Visual Studio 2010 是这样），如果单击它，您应该能够插入多行文本。

或者手动编辑 .Designer 文件。

设计器生成的代码如下所示

```
Me.textBox1.Text = "AAA" & Global.Microsoft.VisualBasic.ChrW(13) & Global.Microsoft.VisualBasic.ChrW(10) & "BBB" & Global.Microsoft.VisualBasic.ChrW(13) & Global.Microsoft.VisualBasic.ChrW(10) & "CCC" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-14T11:43:43.780

![在此处输入图像描述](../Images/df43cc31196076545a9e7799ef9c0a7b.png)

正如@SchlaWiener 所描述的那样

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-17T13:09:24.570

Just use **\r\n** in the properties box or **Environment.NewLine** in the code

# sql-server - 小时的 SQL Server PIVOT 表

> ID：11031989
> 
> 赞同：2
> 
> 时间：2012-06-14T11:19:34.940
> 
> 标签：sql-server, tsql, sql-server-2008-r2, pivot

我有一个如下的 T-SQL 查询，它查询一个包含搜索数据的表并获取搜索时间和该搜索时间的行数。

```
SELECT DATEPART(HOUR, aps.CreatedOn) AS SearchHour, COUNT(*) AS ItemCOUNT 
FROM ASearches aps
GROUP BY DATEPART(HOUR, aps.CreatedOn)
ORDER BY SearchHour; 
```

如您所见，这不会产生很好的结果。但是，我知道如果为此使用数据透视表并将小时数作为列名，那会更好。我试过了，但到目前为止我一直失败。

知道怎么做吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-14T11:37:44.797

像这样的东西：

```
SELECT *
  FROM (SELECT DATEPART(HOUR, CreatedOn) AS SearchHour 
          FROM ASearches) aps
 PIVOT (COUNT([SearchHour]) FOR SearchHour IN 
         ( [0],  [1],  [2],  [3],  [4],  [5], 
           [6],  [7],  [8],  [9], [10], [11], 
          [12], [13], [14], [15], [16], [17], 
          [18], [19], [20], [21], [22], [23])) as pvt 
```

# text - 二维码压缩

> ID：11031990
> 
> 赞同：5
> 
> 时间：2012-06-14T11:19:36.677
> 
> 标签：text, compression, zip, qr-code

二维码可以存储大约 20 000 个字符吗？（或者更多？[http://blog.qr4.nl/page/QR-Code-Data-Capacity.aspx](http://blog.qr4.nl/page/QR-Code-Data-Capacity.aspx)）

我只想存储 ascii 符号（带有额外破折号的字符和数字等）。

据我所知，可以以 80-98% 的比率压缩不复杂的文本，这听起来很有希望：http: [//www.maximumcompression.com/index.html](http://www.maximumcompression.com/index.html)

你有更多的经验吗？感谢分享！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-14T12:22:27.807

如果您的问题是：“是否**可以**在 QR 码中存储 20K 个字符？”，那么答案是*肯定*的，*可以*。

如果您的问题是：“是否可以**保证**您始终能够在 QR 码中存储 20K 个字符*进行压缩*？”，答案是**否定**的。[由于鸽巢](http://en.wikipedia.org/wiki/Pigeonhole_principle)原理，无法保证这一点。

如果您的问题是：“是否有一个“舒适区”，其中最大大小为 20K 的文本输入很可能适合 QR 码？”，正确的答案是：这取决于您的输入数据。一个更有风险的答案是：如果您正在处理“普通文本”数据，例如书籍内容，您可能要求太多。

你提到的80-90%的压缩率是可能的，因为输入数据非常大（几MB），而且解压算法很慢。对于“小”输入数据，例如 20K 字符，“普通文本”的压缩率更可能在 50-70% 范围内，具体取决于算法强度（例如 PPM，非常适合此类输入数据）。

显然，如果您的输入数据是一种“日志文件”，具有大量重复，那么是的，压缩率 > 95% 很容易获得。

但压缩比并不是唯一需要考虑的因素。对于“现实生活”中的使用，您还必须考虑 QR 尺寸，以及 QR 打印的合理校正水平。至少在现实生活场景中，押注“最大容量和最低可能的修正”是一个相当错误的赌注。您必须询问周围的人以了解您的 QR 码的“合理限制”是什么。最有可能的是，打印功能会妨碍您，您将不得不接受低于最大值的东西。

最后一点，不要忘记压缩数据是“二进制”，而不是“字母数字”。因此，您的 QR 码的最终容量位于最后一列。这比“字母数字”列少得多。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-14T12:34:29.923

QR 码对字母数字数据具有特殊的编码模式（仅大写，加上数字和一些符号）。每个字符使用少于 8 位，在这种模式下最多可以存储 4,296 个字符。

这应该接近最优。对于更简单的数据（如所有 alpha），像 gzip 这样的压缩算法可能能够实现每字节更少的位数。当然，没有标准阅读器会这样解释压缩后的有效负载。只有特殊的读者才能做到。

您可以通过这种方式将 5 倍以上的数据放入 QR 码中吗？不，几乎可以肯定不是，除非是像 20,000 个“a”这样的微不足道的情况。

即使可以，它也会创建一个大而复杂的二维码。在实践中，任何超过几百字节的东西都很难扫描。最大的版本 40 在现实世界中毫无用处。甚至版本 20 也是。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-04-22T22:02:56.990

在实践中，当您想使用 QR 存储大量数据时，您只需存储一个指向数据位置的 URL。

当您必须支持现实生活中的设备时，理论上可能的情况与实际可能的情况大不相同。祝你好运，用低端智能手机摄像头扫描高于版本 10（57x57 模块）的任何东西。

# android - 找不到 startActivity 源

> ID：11031997
> 
> 赞同：1
> 
> 时间：2012-06-14T11:19:55.210
> 
> 标签：android, android-intent, android-activity

```
public void openOptions()
{
    Intent intent=new Intent(this,Game.class);
    //intent.putExtra("razmer", level);
   startActivity(intent);

 // Intent intent=new Intent(this,Options.class);
 // intent.putExtra("level", level);
 // startActivity(intent);
} 
```

输出错误日志：

```
 06-14 10:27:15.049: W/dalvikvm(539): threadid=1: thread exiting with uncaught exception (group=0x409c01f8)
    06-14 10:27:15.078: E/AndroidRuntime(539): FATAL EXCEPTION: main
    06-14 10:27:15.078: E/AndroidRuntime(539): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{your.KrestikiNolikiActivity.namespace/your.KrestikiNolikiActivity.namespace.Game}: 
    java.lang.InstantiationException: can't instantiate class your.KrestikiNolikiActivity.namespace.Game; no empty constructor
    06-14 10:27:15.078: E/AndroidRuntime(539):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1880)
    06-14 10:27:15.078: E/AndroidRuntime(539):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
    06-14 10:27:15.078: E/AndroidRuntime(539):  at android.app.ActivityThread.access$600(ActivityThread.java:123)
    06-14 10:27:15.078: E/AndroidRuntime(539):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
    06-14 10:27:15.078: E/AndroidRuntime(539):  at android.os.Handler.dispatchMessage(Handler.java:99)
    06-14 10:27:15.078: E/AndroidRuntime(539):  at android.os.Looper.loop(Looper.java:137)
    06-14 10:27:15.078: E/AndroidRuntime(539):  at android.app.ActivityThread.main(ActivityThread.java:4424)
    06-14 10:27:15.078: E/AndroidRuntime(539):  at java.lang.reflect.Method.invokeNative(Native Method)
    06-14 10:27:15.078: E/AndroidRuntime(539):  at java.lang.reflect.Method.invoke(Method.java:511)
    06-14 10:27:15.078: E/AndroidRuntime(539):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
    06-14 10:27:15.078: E/AndroidRuntime(539):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
    06-14 10:27:15.078: E/AndroidRuntime(539):  at dalvik.system.NativeStart.main(Native Method)
    06-14 10:27:15.078: E/AndroidRuntime(539): Caused by: java.lang.InstantiationException: can't instantiate class your.KrestikiNolikiActivity.namespace.Game; no empty constructor
    06-14 10:27:15.078: E/AndroidRuntime(539):  at java.lang.Class.newInstanceImpl(Native Method)
    06-14 10:27:15.078: E/AndroidRuntime(539):  at java.lang.Class.newInstance(Class.java:1319)
    06-14 10:27:15.078: E/AndroidRuntime(539):  at android.app.Instrumentation.newActivity(Instrumentation.java:1023)
    06-14 10:27:15.078: E/AndroidRuntime(539):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1871)
    06-14 10:27:15.078: E/AndroidRuntime(539):  ... 11 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T11:22:28.000

您需要在 Game 类中添加一个空白构造函数。

IE

```
public class Game extends Activity {

    public Game(){

    }

} 
```

所以发生这种情况是因为您已经覆盖了构造函数

IE

```
public Game(String something){
    this.something = something;
} 
```

您不应该在活动中执行此操作，因为您无法使用构造函数实例化活动，因此无论如何它都不会产生影响

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-06T02:58:57.313

将此添加到您的清单文件中。每个类都应该有一个清单中提到的活动。

```
<activity  android:name=".Game"  
           android:label="@string/app_name">  
</activity> 
```