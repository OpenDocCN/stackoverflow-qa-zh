# StackOverflow 问答 11419000-11419999

# c++ - boost：线程不执行接收到信号后发布的处理程序

> ID：11419002
> 
> 赞同：0
> 
> 时间：2012-07-10T17:50:06.163
> 
> 标签：c++, boost, boost-thread

我开始熟悉 boost 线程和信号。因此，我正在实现这个简单的示例，我只发布了一个示例类的 cpp 文件，该类实现了一个能够在触发 Signal1 时执行方法的线程。该信号是在 Package1Signals 单例中定义的（请原谅这些名称，它们是从模型生成的）

Class1.hpp

```
#ifndef CLASS1_HEADER
#define CLASS1_HEADER
#include <boost/asio/io_service.hpp>
#include <boost/asio/ip/udp.hpp>
#include <boost/asio/signal_set.hpp>
#include "Package1.hpp"
#include <boost/thread.hpp>

class Class1{
private:
    boost::asio::io_service service;
public:
    boost::thread  thread;
    Class1();
    void classifierBehavior();
    void Reception1(Signal1 signal1);
    void Reception1Behavior();
};

#endif 
```

Class1.cpp

```
#include "Class1.hpp"
#include <boost/thread.hpp>
#include <boost/date_time.hpp>
#include "Package1.hpp"
#include "Package2.hpp"
#include "Package1.hpp"

Class1::Class1(){
 //boost::thread thread(boost::bind(&Class1::classifierBehavior,boost::ref(*this)));
 //thread.join();
 thread = boost::thread(&Class1::classifierBehavior,this);
};

void Class1::classifierBehavior(){
  Package1Signals::getInstance()->signal1.connect(boost::bind(&Class1::Reception1, 
  this,_1));
  service.run();

};

 void Class1::Reception1(Signal1 signal1){
std::cout<<"Signal received\n";
service.post(boost::bind(&Class1::Reception1Behavior, this));
 }

 void Class1::Reception1Behavior(){
std::cout<<"Behavior executed\n";
 } 
```

包1.hpp

```
#ifndef PACKAGE1_HEADER
#define PACKAGE1_HEADER
#include <boost/signal.hpp>

struct Signal1{   };

class Package1Signals{
private:
    Package1Signals();
    static Package1Signals * instance;
public:
    boost::signal<void(Signal1)> signal1;
    static Package1Signals * getInstance();
 };
 #endif 
```

包1.cpp

```
 #include "Package1.hpp"
 Package1Signals * Package1Signals::instance = NULL;
 Package1Signals::Package1Signals(){}
 Package1Signals * Package1Signals::getInstance(){
    if(!instance){
            instance = new Package1Signals();
        }
    return instance;
 } 
```

这是执行它的代码

```
int main() {
    Class1 test;
    Package1Signals::getInstance()->signal1();
    test.thread.join();
    int k =0;
    std::cin>>k;
    return 0;
 } 
```

我可以看到线程运行，信号被拦截但未执行发布的处理程序。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T18:21:25.877

> 我可以看到线程运行，信号被拦截

你确定吗？我不认为信号是事件发送的。

> 但未执行发布的处理程序。我究竟做错了什么？

您的构造函数创建一个新线程，然后等待它完成，因此构造函数在新线程退出之前不会返回。这意味着`main`在接收者线程退出之前，这条线不会执行：

```
 Package1Signals::getInstance()->signal1(); 
```

也许您希望`boost::thread`成为您的类的成员，因此它与您的类具有相同的生命周期，而不是构造函数中的局部变量。

出于样式考虑，您不需要使用`boost::ref(*this)`，您可以只传递`this`，并且您不需要使用`boost:bind`来创建线程，请阅读[文档](http://www.boost.org/doc/libs/1_47_0/doc/html/thread/thread_management.html#thread.thread_management.thread.multiple_argument_constructor)，它告诉您构造`thread`带有多个参数的 a 等效于将这些参数传递给`bind`并构造结果的线程，即你可以说

```
thread(&Class1::classifierBehavior, this); 
```

这更简单，更容易阅读！

**更新**：现在您已经修复了构造函数，因此它不会阻止您在将接收器连接到信号（发生在新线程中）和发布信号（发生在主线程中）之间的竞争条件构造函数完成。如果新线程需要几毫秒才能开始执行，那么为时已晚并错过信号，因为在主线程中，构造函数已经完成并且信号已经发出。

在开始新线程*之前*尝试连接接收器：

```
Class1::Class1(){
  Package1Signals::getInstance()->signal1.connect(boost::bind(&Class1::Reception1,   this,_1));
 thread = boost::thread(&Class1::classifierBehavior,this);
};

void Class1::classifierBehavior(){
  service.run();
}; 
```

这样接收器在信号发出之前就已连接。

我*认为*`io_service`即使在服务运行之前发布了事件，仍然会收到该事件，但您可能需要检查一下，否则那里还有另一个竞争条件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T18:00:25.870

该`thread.join();`语句基本上等到线程退出。所以本质上发生的是你的构造函数在线程退出之前不会完成，这相当于在你的构造函数中运行线程代码。

解决方法是创建线程并将其句柄保留在类中。`thread.join();`在您想等待线程完成并加入主线程之前不要调用。

如果您的线程被创建为由 运行`service`，您需要运行该服务才能让您的线程开始工作。因此，您必须`service.run();`在构造函数中而不是在线程正在运行的函数中进行操作。

另外，如果我没记错的话，服务只能在创建它的同一线程中运行。

# java - JTree：如何检查当前节点是否为文件

> ID：11419004
> 
> 赞同：1
> 
> 时间：2012-07-10T17:50:13.343
> 
> 标签：java, swing, file, directory, jtree

我正在使用以下代码来填充一个运行良好的 JTree

```
File [] children = new File(directory).listFiles(); // list all the files in the directory
for (int i = 0; i < children.length; i++) { // loop through each
    DefaultMutableTreeNode node = new DefaultMutableTreeNode(children[i].getName());
    // only display the node if it isn't a folder, and if this is a recursive call
    if (children[i].isDirectory() && recursive) {
        parent.add(node); // add as a child node
        listAllFiles(children[i].getPath(), node, recursive); // call again for the subdirectory
    } else if (!children[i].isDirectory()){ // otherwise, if it isn't a directory
        parent.add(node); // add it as a node and do nothing else
    }
} 
```

给出一个目录字符串，它将该目录中的所有文件添加到 JTree，我的问题是我无法从每个节点获取文件......我知道你可以使用

```
jtree.getLastSelectedPathComponent() 
```

获取最后一个选择的组件，但我真正要检查的是选择的组件是否属于类型`File`，如果是，则返回该文件的路径...有人知道该怎么做吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T18:13:08.337

您正在使用的`DefaultMutableTreeNode`包含一个“userObject”，在您的情况下是`String`代表名称：

```
DefaultMutableTreeNode node = new DefaultMutableTreeNode(children[i].getName()); 
```

如果您将 存储`File`在节点中（或 a 的任何唯一标识符），您可以使用[可用的 getter](http://docs.oracle.com/javase/7/docs/api/javax/swing/tree/DefaultMutableTreeNode.html#getUserObject%28%29)`File`检索它。

如果您选择这种方法，您可能必须更改树上的渲染器。可以通过扩展`DefaultTreeCellRenderer`和覆盖来实现具有等效行为的渲染器，`getTreeCellRendererComponent`如下所示

```
@Override
public Component getTreeCellRendererComponent(JTree tree, Object value, boolean sel, boolean expanded, boolean leaf, int row, boolean hasFocus){
  Component result = super.getTreeCellRendererComponent( tree, value, sel, expanded, leaf, row, hasFocus );
  if ( value instanceof DefaultMutableTreeNode && ((DefaultMutableTreeNode)value).getUserObject() instanceof File ){
     ((JLabel)result).setText( (File)((DefaultMutableTreeNode)value).getUserObject()).getName() );
  }
} 
```

注意：上面的代码未经测试。我希望我没有在括号中犯任何错误，...（懒得启动我的 IDE）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T18:28:41.110

这是一个看起来或多或少像您的小片段（如果您可以提供[SSCCE](http://sscce.org)会更容易）。`DefaultMutableTreeNode`基本上，我将与a关联的用户对象更改`String`为 a `File`。我还添加了一个`TreeCellRenderer`只显示名称`File`（而不是其绝对路径）的自定义项，以及一个将当前选定对象`TreeSelectionListener`输出到控制台的选项。`File`

```
import java.awt.Component;
import java.io.File;

import javax.swing.JFrame;
import javax.swing.JScrollPane;
import javax.swing.JTree;
import javax.swing.SwingUtilities;
import javax.swing.event.TreeSelectionEvent;
import javax.swing.event.TreeSelectionListener;
import javax.swing.tree.DefaultMutableTreeNode;
import javax.swing.tree.DefaultTreeCellRenderer;

public class TestTreeFile {

    protected void initUI() {
        JFrame frame = new JFrame(TestTreeFile.class.getSimpleName());
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        final JTree tree = new JTree(createTreeModel(new File(System.getProperty("user.dir")), true));
        tree.setCellRenderer(new DefaultTreeCellRenderer() {
            @Override
            public Component getTreeCellRendererComponent(JTree tree, Object value, boolean sel, boolean expanded, boolean leaf, int row,
                    boolean hasFocus) {
                super.getTreeCellRendererComponent(tree, value, sel, expanded, leaf, row, hasFocus);
                if (value instanceof DefaultMutableTreeNode) {
                    DefaultMutableTreeNode node = (DefaultMutableTreeNode) value;
                    if (node.getUserObject() instanceof File) {
                        setText(((File) node.getUserObject()).getName());
                    }
                }
                return this;
            }
        });
        tree.getSelectionModel().addTreeSelectionListener(new TreeSelectionListener() {

            @Override
            public void valueChanged(TreeSelectionEvent e) {
                Object object = tree.getLastSelectedPathComponent();
                if (object instanceof DefaultMutableTreeNode) {
                    Object userObject = ((DefaultMutableTreeNode) object).getUserObject();
                    if (userObject instanceof File) {
                        File file = (File) userObject;
                        System.err.println("Selected file" + file.getAbsolutePath() + " Is directory? " + file.isDirectory());
                    }
                }
            }
        });
        JScrollPane pane = new JScrollPane(tree);
        frame.add(pane);
        frame.setSize(400, 600);
        frame.setVisible(true);
    }

    private DefaultMutableTreeNode createTreeModel(File file, boolean recursive) {
        DefaultMutableTreeNode node = new DefaultMutableTreeNode(file);
        if (file.isDirectory() && recursive) {
            File[] children = file.listFiles(); // list all the files in the directory
            if (children != null) {
                for (File f : children) { // loop through each
                    node.add(createTreeModel(f, recursive));
                }
            }
        }
        return node;
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                new TestTreeFile().initUI();
            }
        });
    }
} 
```

您可能还想看看这个[文件浏览器 GUI](https://codereview.stackexchange.com/questions/4446/file-browser-gui)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-30T19:02:21.973

我正在使用这样的东西：

```
private boolean isFileSelected()
{
    TreePath treePath = tree.getSelectionPath();
    Object lastPathComponent = treePath.getLastPathComponent();
    DefaultMutableTreeNode node = (DefaultMutableTreeNode) lastPathComponent;

    return node.getUserObject() instanceof MyNodeObject;
} 
```

`MyNodeObject`应该与文件夹数据类型不同，以便您可以识别节点是否为文件。

# ruby-on-rails - 将 I18n 与 Rails 一起使用时的重定向将正斜杠编码为 %2F

> ID：11419006
> 
> 赞同：3
> 
> 时间：2012-07-10T17:50:18.203
> 
> 标签：ruby-on-rails, internationalization, url-routing, i18n-gem

我最近[在 I18n 上关注 Ryan Bate 的 Railscast](http://railscasts.com/episodes/138-i18n-revised)添加多个位置并从 URL 参数设置语言环境，例如

www.example.com/en/
www.example.com/fr/

通常它是一种享受，但是我注意到，如果我手动尝试从 url 中删除位置，则生成的重定向不会正确形成，似乎将 / 编码为 %2F。例如，如果我从

www.example.com/fr/animals/horses
所以它是 www.example.com/animals/horses

然后重定向产生以下网址：
www.example.com/fr/animals%2Fhorses

这是我的路线的一部分.rb

```
scope ":locale", locale: /#{I18n.available_locales.join("|")}/ do
 resources animals
end

match '*path', to: redirect("/#{I18n.default_locale}/%{path}"), constraints: lambda { |req| !req.path.starts_with? "/#{I18n.default_locale}/" }
match '', to: redirect("/#{I18n.default_locale}") 
```

我试图找出一种将 CGI::escape 放入 {path} 的方法，但到目前为止我尝试过的任何方法都没有奏效。有谁知道解决此问题的正确代码？

导轨 3.2.6 / Ruby 1.9.2

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-10T18:06:44.450

我想你需要做的是使用一个块：

```
match '*path', to: redirect {|params| "/bla/#{CGI::unescape(params[:path])}" } 
```

查看指南以获取更多信息[http://guides.rubyonrails.org/routing.html#redirection](http://guides.rubyonrails.org/routing.html#redirection)

# quartz-scheduler - 使用带有 MisfireHandlingInstructionIgnoreMisfires 的石英时出现问题

> ID：11419008
> 
> 赞同：0
> 
> 时间：2012-07-10T17:50:24.887
> 
> 标签：quartz-scheduler

我有一份每小时运行第一分钟的工作。

作业将获取当前时间并查询数据库以查看该小时要发送的任何通知，如果有，它将发送电子邮件通知。

现在的问题是处理失火。

说当调度程序在上午 8:30 到 10:30 之间关闭时，我错过了 2 个触发器。当调度程序在 10:30 出现时，我需要这 2 个错过的触发器才能被触发。所以我正在使用带有 MisfireHandlingInstructionIgnoreMisfires 触发器的石英。

由于我的工作具有根据当天当前时间进行查询的逻辑，因此两个失火触发器都将查询仅在上午 10 点发送的通知（而不是上午 8 点和上午 9 点）

我将如何处理这种情况？

石英是否有检查工作内部的失火计数？

感谢你的帮助 ！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T21:14:43.860

在您的情况下，您应该获得预定日期，而不是依赖当前系统日期：

```
void execute(JobExecutionContext context) {
    context.getScheduledFireTime()
    //...
} 
```

通常，当前系统时间应该非常接近预定的触发时间。但是在失火情况下或在重负荷下，预定的火灾时间比当前时间早得多（我们会遇到延迟）。

准确地说，在您的情况下，在 10:30，作业将触发两次，`getScheduledFireTime()`并将返回 9:00 和 10:00。

# sql - 将 EXEC 语句的结果返回到 SQL Server 字符串内的变量时出错

> ID：11419011
> 
> 赞同：-1
> 
> 时间：2012-07-10T17:50:33.780
> 
> 标签：sql, sql-server, dynamic-sql

以下代码不起作用，我不确定为什么。

```
DECLARE @TableName varchar(100)
DECLARE @DBName varchar(50)
DECLARE @FinalTableName varchar(500)
DECLARE @TempDB  varchar(50)

SET @DBName=(select db_name())
SET @TableName = 'tbl_Product'
SET @FinalTableName = @DBName + '-' + @TableName +'-' + cast(CONVERT (date, GETDATE()) as varchar(100))
SET @TempDB = 'MiscDB.sys.objects'

Declare @SQL VarChar (250)
Declare @tableExist VarChar (200)

SET @SQL = 'select @tableExist =  OBJECT_ID FROM ' + @TempDB + ' WHERE object_id = OBJECT_ID(''' + @TableName + ''') AND type in (N''U'')'
exec @SQL 
```

我收到这个错误

> 消息 911，级别 16，状态 4，第 15 行
> 数据库 'select @tableExist = OBJECT_ID FROM MiscDB' 不存在。确保输入的名称正确。

但是，如果我直接运行 SQL 语句，它确实可以工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T18:01:58.977

您的查询可能应该是：

```
DECLARE 
  @dbname      SYSNAME,
  @tablename   SYSNAME,
  @tableExists INT,
  @sql         NVARCHAR(MAX);

SELECT 
  @dbname    = N'Misc',
  @tablename = N'tbl_product';

SET @sql = N'SELECT @tableExists = [object_id]
    FROM ' + QUOTENAME(@dbname) + '.sys.tables 
    WHERE name = @tablename;';

EXEC sp_executesql @sql,
    N'@tableExists BIT OUTPUT, @tablename SYSNAME',
    @tableExists OUTPUT, @tablename;

PRINT @tableExists; 
```

如果数据库名称是固定的（您似乎已硬编码`Misc`），则稍微容易一些：

```
DECLARE 
  @tablename   SYSNAME,
  @tableExists INT,
  @sql         NVARCHAR(MAX);

SELECT 
  @tablename = N'tbl_product';

SET @sql = N'SELECT @tableExists = OBJECT_ID(@tablename, N''U'');';

EXEC Misc..sp_executesql @sql,
    N'@tableExists BIT OUTPUT, @tablename SYSNAME',
    @tableExists OUTPUT, @tablename;

PRINT @tableExists; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T18:05:41.460

有几个问题-

首先是用动态 SQL 编写的任何内容都在不同的范围内——在动态 SQL 内部，您不能设置在动态 SQL 之外声明的变量。

第二个是 OBJECT_ID() 是由数据库决定的——您在一个可能没有名为 tbl_Product 的表的数据库上执行此操作。

尝试以下操作：

```
SET @SQL = 'USE ' + @TempDB + ' select OBJECT_ID FROM ' + @TempDB + ' WHERE object_id = OBJECT_ID(''' + @TableName + ''') AND type in (N''U'')'
exec @SQL 
```

这基本上是从顶部开始的“从现在开始使用@TempDB”，因此您不必处理其中一些范围问题（试图从当前连接的数据库中找到 ObjectId），我们还删除了设置范围内的变量，因为这不起作用。

# android - 如何在演示应用程序中从库项目中导入一些资源，而另一些则不是

> ID：11419014
> 
> 赞同：0
> 
> 时间：2012-07-10T17:50:42.217
> 
> 标签：android, eclipse

我正在创建我的应用程序的两个版本；完整版和演示版。**完整的原始**文件夹中有 500 多个声音文件。理想情况下，演示应该从资源中导入所有内容，但我只需要大约 33% 的声音文件，否则演示的大小将与完整的相同。

有没有办法使用库项目来做到这一点，这样我就不必克隆几乎所有东西，因为这会使以后编辑代码或图像资源变得更加困难？

之前用过library项目，不知道能不能部分导入资源。一种想法是根本不导入资源，而只导入库中的代码，而资源将在这两个版本中重复。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T18:30:17.070

您可能无法使用 Eclipse 来执行此操作，但如果您使用 ant 构建应用程序，您可能只使用一个主项目来执行此操作，而无需使用库项目。

这是我的做法，设置项目以便您可以从命令行构建应用程序。例如，“ant release”应该自动为您构建并签署发布应用程序。

接下来在 build.xml 文件中添加两个新目标：'release_full'、'release_demo'。“release_demo”目标将首先清理原始文件夹，然后将演示声音文件复制到那里，然后继续正常的“发布”构建。'release_full' 目标做同样的事情，但它会将所有声音文件复制到原始文件夹中。在新目标中，确保在构建后重命名 apk 文件。例如，从 MyApp.apk 重命名为“MyAppFull.apk”或“MyAppDemo.apk”。

当您准备好发布您的应用程序时，发出“ant release_demo”和“ant release_full”，您将拥有两个 apk，一个用于演示，一个用于发布。

当然，您需要设置 build.xml 以便它知道在哪里可以找到不属于您的 Android 源文件夹的声音文件，以及将它们复制到哪里。所有这些都可以通过 ant 属性任务来定义。

```
To copy files use <copy> task, to delete files use <delete> task. 
```

# ios - 自定义 UITableViewCell 以创建 Grid 布局

> ID：11419016
> 
> 赞同：0
> 
> 时间：2012-07-10T17:50:51.823
> 
> 标签：ios, xcode, uitableview, grid-layout

我正在尝试创建一个 UITableView，其中每个 UITableViewCell 并排有三个 UIButton 对象，所有对象都可点击。

我想隐藏 tableViewCell 的轮廓并使其不可点击（只允许用户单击单元格顶部的 UIView 对象）。

我正在尝试创建一个网格布局——我知道 GMGridView 和其他网格布局，但我不想在我的项目中添加更多依赖项。

如何使用 UITableView 创建这个自定义网格布局？具体来说，你如何 1）隐藏 tableViewCell 轮廓 2）使单元格不可点击，但顶部的子视图对象可点击。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T17:55:25.950

作为部分答案，您可以通过在 tableviewcontroller/tableviewdelegate 中实现此功能来使所有单元格无法选择

```
- (NSIndexPath *)tableView:(UITableView *)tableView willSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    return nil;
} 
```

并将单元格的选择样式设置为无

**编辑**

至于隐藏“大纲”，您只需要将表格视图的分隔符样式也设置为“无”。

最后，最困难的部分：使其成为网格布局。在以前的项目中，我已经尝试过实现这一目标。我最终做的只是拥有一个`UITableViewCell`具有均匀间隔标签的自定义，并相应地设置它们的显示。虽然让它水平滚动，但我从未掌握过。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T17:57:45.237

在 UITableView 中没有很好的方法来做到这一点。我知道有人做过这件事，但他们花了很长时间才让它正常工作。我强烈建议使用图书馆。否则，请等待下一个 iOS 版本。

# objective-c - 从 [self.view viewWithTag:n] 获取 UIButton 时无法获取 UIButton 图像；

> ID：11419018
> 
> 赞同：0
> 
> 时间：2012-07-10T17:50:55.630
> 
> 标签：objective-c, uiview, casting, uiimage, uibutton

我无法得到这段代码，它只是让图像`UIButton`工作。错误消息一直说 tempButt 是 a`UIView`并且它不会响应调用`imageForState:`。
有人可以告诉我为什么以及如何正确地做到这一点吗？
最终，我想将我得到的这张图片与另一张图片进行比较，看看它们是否相同。

```
UIButton* tempButt = (UIButton*)[self.view viewWithTag:tagNum];
UIImage* tempImage = [tempButt imageForState:UIControlStateNormal]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T01:45:50.180

您确定您已将按钮作为子视图添加到 self.view（在 xib 或代码中）并将其标签属性设置为 tagNum 持有的值吗？只需检查一次..

我想你可能在上面提到的一种情况下出错了..

如果它碰巧是一个按钮，那么我确信这些调用中的任何一个都应该让你得到按钮图像..

一个按钮有两个属性 image 和 backgorundImage..

用于获取图像使用

```
 tempButt.currentImage  (or) [tempButt  imageForState:UIControlStateNormal]; 
```

用于获取 backgroundImage 使用

```
 tempButt.currentBackgroundImage 
```

请注意，imageForState 方法仅在您将图像设置为按钮图像时才有效。

希望这可以帮助！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T10:13:11.047

确保您已将图像设置为背景图像或图像，如果您将图像设置为背景图像试试这个

```
UIImage * img = [btn backgroundImageForState:UIControlStateNormal]; 
```

您可以将图像设置为 contant 并将另一个图像设置为背景 此代码将获取背景图像

# jquery - 使用 jQuery fadeIn 进行字体抗锯齿

> ID：11419021
> 
> 赞同：0
> 
> 时间：2012-07-10T17:50:57.923
> 
> 标签：jquery, css

现在，当鼠标悬停在不同的 div 上时，我会发生多个 fadeIn() 和 fadeOut() 事件。div 中淡入淡出的文本看起来非常像素化，直到 fadeIn 事件完成后，它才会“弹出”成看起来更平滑的文本。

我想知道是否可以在实际淡入之前告诉 div 平滑字体，或者我只能通过使 div 成为图像来实现这种效果？

查看维恩图悬停在[http://www.daemondeveloper.com](http://www.daemondeveloper.com)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T19:54:40.507

这曾经是一个更广泛的问题，但它仍然是 IE 的问题。您可以采取一些措施来解决此问题。首先，确保你的淡入淡出元素有背景。

更大的问题是 IE 如何通过其不透明度过滤器呈现文本渲染。除了明显的抗锯齿外，字母形状实际上也可以发生很大变化。一种解决方案是将 IE 的不透明度过滤器预先应用到 99% 的元素。这本质上是不透明的，但它确保元素将在您的 jQuery 效果期间一致地呈现。

建立在 Ivan 的 jsfiddle 之上，这个演示了背景对淡化文本的影响（在 IE8 中测试）：http: [//jsfiddle.net/joemaller/WLjXW/](http://jsfiddle.net/joemaller/WLjXW/)

关键是这样的css规则：

```
#sometext {
  background: #fff;
  -ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=99)";
  filter: alpha(opacity=99);
} 
```

类似的问题： [即文本淡入问题](https://stackoverflow.com/questions/4780430/ie-problem-with-fading-in-text)
更多关于 IE 不透明度规则：[http ://www.quirksmode.org/css/opacity.html](http://www.quirksmode.org/css/opacity.html)

# android - Android 模拟器崩溃 - 递增不起作用

> ID：11419024
> 
> 赞同：0
> 
> 时间：2012-07-10T17:51:19.073
> 
> 标签：android

有人可以告诉我为什么它不起作用吗？eclipse 在我编译时没有显示任何错误，但 android 模拟器在第 76 行崩溃：“ intrebare.setText("Intrebarea " + i+1 + ": " + intrebari[i]);" 整个程序如下所示：

```
package com.example.testpsiho1;
import android.os.Bundle;
import android.app.Activity;
import android.content.pm.ActivityInfo;
import android.view.View;
import android.widget.Button;
import android.widget.TextView;
import android.app.AlertDialog;
import android.support.v4.app.NavUtils;
public class TestPsiho extends Activity {
 public static Button btna, btnb, btnc;
 public static TextView titlu, intrebare;
 public static String[] intrebari = {"intrebare 1", "intrebare 2", "intrebare 3"};
 public static String[] raspunsuriA = {"rasp a 1", "rasp a 2", "rasp a 3"};
 public static String[] raspunsuriB = {"rasp b 1", "rasp b 2", "rasp b 3"};
 public static String[] raspunsuriC = {"rasp c 1", "rasp c 2", "rasp c 3"};
 public static String[] rezultate = {"rezultatul pentru cele mai multe rasp a", "rezultatul pentru cele mai multe rasp b", "rezultatul pentru cele mai multe rasp c"};
 public static int a=0, b=0, c=0, i=1;
 public static String rezultat="";
 AlertDialog.Builder alert;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_test_psiho);
    setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);

}
public void click(View v){
        btna=(Button)findViewById(R.id.btna);
        btnb=(Button)findViewById(R.id.btnb);
        btnc=(Button)findViewById(R.id.btnc);
        intrebare=(TextView)findViewById(R.id.intrebare);
        if(i<4){
        if (v.equals(btna)) a++;
        if (v.equals(btna)) b++;
        if (v.equals(btna)) c++;

         intrebare.setText("Intrebarea " + i+1 + ": " + intrebari[i]);
         btna.setText(raspunsuriA[i]);
         btnb.setText(raspunsuriB[i]);
         btnc.setText(raspunsuriC[i]);

        }
        if(i==4){

            if (a >= b && a >= c){
                alert=new AlertDialog.Builder(this);

                  alert.setTitle("bla bla bla");
            }

    }
        i++;

}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T17:53:42.213

你需要包装你的增量：

```
(i + 1) 
```

如：

```
intrebare.setText("Intrebarea " + (i+1) + ": " + intrebari[i]); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T18:11:47.123

它不起作用，因为您的 "i+1" 被假定为字符串。

我不知道它是否是最好的选择，但您可以解决您的问题，将您的 setText 方法替换为：

```
intrebare.setText(String.formatString("Intrebarea %s: ", i+1).concat(intrebari[i])); 
```

# database - HTMLHelper 中的数据库操作，可以吗？

> ID：11419025
> 
> 赞同：1
> 
> 时间：2012-07-10T17:51:22.650
> 
> 标签：database, asp.net-mvc, partial-views, html-helper

**你好，**

我有一个 ASP.NET MVC 3 网站，我需要构建一个带有 ID 列表的图像墙，然后基于此列表构建图像墙。

图像墙将是一个部分视图。

首先想到的是在当前 ViewClass 上放置一个列表，其中包含将显示的图像的 ID，但我不确定这是一个好的解决方案，尤其是如果这个图像墙被移动到另一个 parentView 时。

所以问题是。我可以从 HTML 帮助程序中进行数据库操作吗？什么是最佳实践？

这种局部观点可能会受到追捧。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T18:00:13.407

为什么你会首先这样做？

我认为您应该从控制器操作中返回一个列表，然后在您的视图中对其进行迭代，例如：

```
foreach(var image in @Model.Images)
{
    // output some HTML code here using each image file path...
    <img src="@image.Path" />
} 
```

在这种情况下，您可以使用[@Html.RenderAction 。](http://www.asp.net/mvc/videos/mvc-2/how-do-i/aspnet-mvc-2-render-action)你这样称呼它：

```
@Html.RenderAction("GetImages", "ImageWall"); 
```

ImageWall 是您的新 ImageWall `Controller`，GetImages 是您的`Action`.

这将允许您在另一个控制器的视图中使用您的 ImageWall 控制器。

# regex - 正则表达式提取括号中的数据

> ID：11419026
> 
> 赞同：2
> 
> 时间：2012-07-10T17:51:26.637
> 
> 标签：regex, excel, openoffice-calc

我在 openoffice 中有一个大约 3000 行的数据集，每组可能包含 (XXXv) 括号内的数据，其中 XXX 可以是任何 3 位数字（通常是 110、220、115、120）

我需要简单地忽略该字段中的所有其他内容，并仅查找/替换为该值。

数据中可能存在其他括号。大多数数据都是 HTML 格式，目前在 csv 文件中。某些字段也可能不包含值。

```
EX: ITEM NUMBER 38 (115v) - (SKU)
(simplified, many will be 100-1000 characters in length, in html) 
```

=IF 语句也可能有效？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T17:57:49.427

乍一看，正则表达式似乎是最好的方法。正则表达式应该类似于`.*\(([0-9][0-9][0-9])v\).*`. 捕获的组将是您正在寻找的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T17:59:27.210

`(?<=\()\d{3}(?=v\))` 如果您的正则表达式引擎不知道后向，请使用此正则表达式进行替换，请使用`=\(\d{3}v\)`替换 ( `value`v)

# wordpress - 从 add_menu_page 重定向

> ID：11419028
> 
> 赞同：5
> 
> 时间：2012-07-10T17:51:29.677
> 
> 标签：wordpress

我已经使用 add_menu_page 添加了一个菜单，该菜单一切正常，但是当单击时，我希望此菜单页面打开特定帖子 ID 的帖子编辑器。

作为概念证明，我尝试将 javascript 重定向到 do 函数中，就像这样......

```
// Load up the menu page
 function register_availability_custom_menu_page() {
   add_menu_page('custom menu title', 'Availability', 'add_users', 'options',             'options_do_page');
}

function options_do_page() {
echo "<script type=\"text/javascript\">";
echo "window.location = '/whatever_page.php';";
echo "</script>";
} 
```

这种方法确实有效，但我想知道它是否是最好的方法，有没有更好的方法来重定向到我所追求的页面？

## 更新

我现在也尝试使用 wp_redirect 和这段代码......

```
add_action( 'admin_menu' , 'admin_menu_new_items' );

function admin_menu_new_items() {
    wp_redirect( home_url() );
    exit;
} 
```

这给了我一个 Headers already sent 错误，任何人都可以建议我哪里出错了吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T13:44:14.757

如果我理解正确，则不需要重定向。`$menu_slug`不要在函数中使用 a ，而是[`add_menu_page`](http://codex.wordpress.org/Function_Reference/add_menu_page)放置目标页面的地址，例如：

```
$the_post_title = 'The Portfolio';

add_action( 'admin_menu', 'wpse_59050_add_menu' );

function wpse_59050_add_menu() 
{
    global $the_post_title;
    $our_page = get_page_by_title( $the_post_title );

    $settings_page = add_menu_page( 
        'Edit '.$our_page->post_title, 
        'Edit '.$our_page->post_title, 
        'add_users', 
        '/post.php?post='.$our_page->ID.'&action=edit', 
        '', 
        '', 
        2
    );
} 
```

此功能来自以下 WordPress 答案：[**Highlighting a Menu Item by Post Name**](https://wordpress.stackexchange.com/q/59050/12615)。您将需要一些 jQuery 来正确突出显示此顶级菜单，检查我和 TheDeadMedic 在那个 Q 中的答案。

这另一个也很有用：[**向新的 Admin Dashboard Menu Item 添加突出显示**](https://wordpress.stackexchange.com/q/58567/12615)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-13T18:43:07.643

我找到了一个不使用 JS/JQ 的两步解决方案。

**第 1 步：**
在您的脚本顶部附近，放置以下 PHP 以显示隐藏您的第一页的 CSS：

```
add_action('admin_head', 'hide_my_first_page');

function hide_my_first_page(){
    echo '<style>
        a[href="admin.php?page=admin_menu_slug"] + ul > li.wp-first-item{
            display: none;
        }
    </style>';
} 
```

第`admin_menu_slug`4 个参数传递给`add_menu_page();`.

**第 2 步：**
获取要运行的页面的函数并将其作为第 5 个参数传递`add_menu_page();`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-14T05:00:23.160

最近为[pootle page builder](https://wordpress.org/plugins/pootle-page-builder/)做了这个，这个 AFAIK 是最好的方法，

```
/**
 * Redirecting from Page Builder > Add New page
 * @since 0.1.0
 */
function add_new() {
    global $pagenow;

    if ( 'admin.php' == $pagenow && 'page_builder_add' == filter_input( INPUT_GET, 'page' ) ) {
        header( 'Location: ' . admin_url( 'whatever-page.php' ) );
        die();
    }
}
add_action( 'admin_init', 'add_new' ); 
```

替换`page_builder_add`为您的页面 slug 和`admin_url( 'whatever-page.php' )`您想要重定向到的 url。

我们始终使用 scrutinizer-ci 进行最佳代码实践并保持代码分数大于 9.5/10，因此所有代码（包括此代码）都是安全和优化的；）

让我知道它是如何为你工作的。

干杯

# php - PHP GD imagettftext字符编码，符号丢失

> ID：11419036
> 
> 赞同：3
> 
> 时间：2012-07-10T17:52:12.087
> 
> 标签：php, encoding, utf-8, gd

我有一个字符串来找我，格式如下

```
Ciel Spa at SLSâ„¢ is a celestial dreamscape 
```

我有一个格式化脚本，将其更改为

```
Ciel Spa at SLS™ is a celestial dreamscape 
```

脚本更改编码

```
return iconv("UTF-8", "ISO-8859-1//TRANSLIT//IGNORE", $str) 
```

上面的 iconv() 通常会将商标符号作为普通字符 TM 返回。这对我不起作用，因此我将符号替换为稍后可以捕获的字符串。

```
str_replace("(TM)","™",$str); 
```

当我在浏览器中查看源代码时效果很好，但是当我将此文本推送到 imagettftext() 时，商标符号被忽略，有效地制作了字符串

```
Ciel Spa at SLS is a celestial dreamscape 
```

但当然渲染为图像。

我知道我使用的字体支持商标符号，但我不确定它为什么会消失。mb_detect_encoding() 返回 null，而对于我的大多数字符串，它返回 UTF-8。

我已经准备好接受一个坚韧不拔、肮脏的解决方法，因为到目前为止还没有任何效果。我尝试使用 html_entity_decode() 和 str_replace() 的组合无济于事。相同格式化脚本的早期版本组合了长数组 UTF 垃圾字符替换，而不更改字符串的编码，然后将其提供给 imagettftext() 并且看起来很好。我似乎无法找回...任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T18:19:48.420

iso-8859-1 字符编码中根本没有包含商标符号。您没有显示任何内容的原因是因为您将有效 iso-8859-1 字符串的一部分替换为此字符集范围之外的符号。

您可以尝试使用 utf-8 到 iso-8859-1 编码更改

```
function decode_characters($info) 
{ 
    $info = mb_convert_encoding($info, "HTML-ENTITIES", "UTF-8"); 
    $info = preg_replace('~^(&([a-zA-Z0-9]);)~',htmlentities('${1}'),$info); 
    return($info); 
} 
```

此代码来自对 php 手册页的一些快速研究。

# java - 使用AJAX配置tomcat超时

> ID：11419040
> 
> 赞同：1
> 
> 时间：2012-07-10T17:52:25.347
> 
> 标签：java, ajax, tomcat, configuration, timeout

web.xml 中的 session-timeout 设置已正确设置，并且 tomcat 在指定值处超时。问题是超时是如何发生的。

导航到新页面时会重置超时，但是激活浏览器（通过密钥库或鼠标单击）或进行 AJAX 调用不会重置超时。我尝试了一些 tomcat 属性无济于事，是否有处理这种类型的超时配置的属性？

先感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T18:03:55.760

您是否尝试过删除 server.xml 文件中的 connectionTimeout 参数？

即：如果你有这个：

```
<Connector port="8080" protocol="HTTP/1.1"  connectionTimeout="20000" URIEncoding="UTF-8"            redirectPort="8443" /> 
```

将其更改为：

```
<Connector port="8080" protocol="HTTP/1.1"  connectionTimeout="<A VERY LARGE NUMBER>" URIEncoding="UTF-8"            redirectPort="8443" /> 
```

或者：

```
<Connector port="8080" protocol="HTTP/1.1" URIEncoding="UTF-8"            redirectPort="8443" /> 
```

您是否在 server.xml 文件中尝试过类似的操作？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T19:53:52.403

HttpSession 是一个服务器端对象，因此 Web 浏览器中的击键和鼠标事件不会自动重置超时。但是，您可以监视客户端上的键盘和鼠标事件，并定期对服务器进行 RPC 调用以保持会话处于活动状态。

但是您还说 Ajax 调用不会重置服务器上的会话超时。这很奇怪，因为我已经做过很多次了，它确实为我重置了它。您使用的是 GWT RPC 还是其他序列化机制？

我不确定，但也许您还需要从 Ajax 调用实现*访问*会话以重置超时，例如通过调用`getThreadLocalRequest().getSession()`（如果使用 GWT RPC）。

# windows - 如何从批处理文件中的函数返回值？

> ID：11419046
> 
> 赞同：20
> 
> 时间：2012-07-10T17:52:43.187
> 
> 标签：windows, batch-file

我有以下批处理文件

```
@echo off
setlocal EnableDelayedExpansion
for /f "delims==" %%J in (File_List.txt) do (
call :setDate %%J MYD
echo/Date is: %MYD%
)
endlocal &goto :eof

:setDate
SETLOCAL ENABLEEXTENSIONS
echo %1
echo %~2
set NAME=%1
set NAME=%NAME:~-11%
echo %NAME%
echo %~2
endlocal&set %2=%NAME%&goto :eof 
```

但 File_List.txt 包含 file2012-05.csv

我明白了

```
file2012-05.csv
MYD
2012-05.csv
MYD
Date is: 
```

我如何真正让函数 setDate 返回我想要的值？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2015-06-08T14:32:12.703

由于我从您的脚本中不明白您想要实现什么，因此我（为了完整性）回复原始主题：从函数返回一个值。

这是我的做法：

```
@echo off

set myvar=
echo %myvar%
call :myfunction myvar
echo %myvar%
goto :eof

:myfunction
set %1=filled
goto :eof 
```

结果是：

```
empty 
filled 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-07-10T18:16:44.097

批处理解释器在解析时进行评估`%MYD%`，当时它是空的。这就是您[延迟扩展](http://ss64.com/nt/delayedexpansion.html)的原因。更改此行：

```
echo/Date is: %MYD% 
```

对此：

```
echo/Date is: !MYD! 
```

它会像你想要的那样工作，因为它会告诉解释器`MYD`在运行时进行评估。

# c# - 如何检查类实例是否已创建或为空 C#

> ID：11419048
> 
> 赞同：4
> 
> 时间：2012-07-10T17:52:50.270
> 
> 标签：c#, class

你如何检查是否`classinstance`已经创建/初始化或者是`null`？

```
private MyClass myclass;

if(!check class has been initialised)      //<- What would that check be?
    myclass = new MyClass(); 
```

提前致谢

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-10T17:54:06.327

只需检查它是否为空

```
if (myclass == null) 
```

正如您在评论中提到的，

```
if (myclass.Equals(null)) 
```

将不起作用，因为如果 myclass 为空，则将其转换为

```
if (null.Equals(null)) 
```

这导致`NullReferenceException`.

顺便说一句，在类范围内声明的对象会被编译器自动初始化为 null，所以你的行：

```
private MyClass myclass; 
```

是相同的

```
private MyClass myclass = null; 
```

在方法中声明的对象被强制分配一些初始值（即使该初始值为空）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T17:54:58.023

```
if (myclass == null)
    myclass = new MyClass(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T18:10:33.893

你可以使用这个结构来避免检查

```
 public class SomeClass
    {
        private MyClass _myClass;
        public MyClass MyClass
        {
            get { return _myClass ?? (_myClass = new MyClass()); }
            set { _myClass = value; }
        }
    }

    public class SomeClass
    {
        private readonly MyClass _myClass = new MyClass();
        public MyClass MyClass
        {
            get { return _myClass; }
        }
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-10T17:59:20.270

如果您希望将类限制为单个实例，请查看 Singleton 设计模式：http: [//msdn.microsoft.com/en-us/library/ff650316.aspx](http://msdn.microsoft.com/en-us/library/ff650316.aspx)

# apache-flex - 如何在 flex 中基于 mvc 架构的应用程序中使用模型

> ID：11419049
> 
> 赞同：0
> 
> 时间：2012-07-10T17:52:50.683
> 
> 标签：apache-flex, model-view-controller, model

在 MVC 架构中，模型用于存储应用程序中使用的数据。我创建了一个类并使用一些静态属性来存储数据，以便可以在整个应用程序中使用它。例如，如果有一个数据网格，我在模型类中使用一个静态数组集合。每当调用服务时更新它，并通过使用数据绑定更新数据网格的数据提供者。我读过单例类也可以用来完成这个任务。我用于模型类的方式更好还是存在其他方式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T23:54:44.507

正如天神所指的讨论所指出的，一堆静态变量和一个单例之间几乎没有任何区别。两者都可以看作是全局变量的一种形式，具有所有伴随的缺点。我不会在这里争论单身人士有多邪恶。已经有很多关于该主题的文章，您可以[在网上轻松找到它们](http://www.google.be/search?q=singleton%20evil)。

但是，我想提出一个替代方案：[控制反转](http://en.wikipedia.org/wiki/Inversion_of_control)(IoC)，也称为[依赖注入](http://en.wikipedia.org/wiki/Dependency_injection)(DI)。我将简要解释这种模式，但您也可以为自己找到大量信息。从您的示例中获取 ArrayCollection；如果您想避免使用静态变量或单例模式，则必须创建一个实例并在整个应用程序中从一个对象到另一个对象传递该实例，甚至可能必须通过一个没有真的需要它，它也不会很干净。
引入了 IoC 容器（对于 Flex 应用程序，它将采用您添加到项目中的库的形式）：使用这样的库，您可以在一个地方创建/配置该 ArrayCollection 并让 IoC “注入”该单个实例任何需要它的班级。

一个具体的例子：我们可能有一个像这样的配置文件

```
<fx:Object>
    <s:ArrayCollection id="myLetters">
        <fx:String>A</String>
        <fx:String>B</String>
    </s:ArrayCollection>
</fx:Object> 
```

和这样的课

```
public class MyClass {

    [Inject(id="myLetters")]
    public var letters:IList;

} 
```

每当实例化 a 时，IoC 容器就会注入`myLetters`ArrayCollection 实例`MyClass`。还有很多其他的注入技术，但这个例子只是为了给你一个想法。

在撰写本文时，我相信[Parsley](http://www.spicefactory.org/parsley/)是 Fl​​ex 使用最广泛的 IoC 容器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T18:06:47.957

您可以阅读比较[Singleton 和 Static的](https://stackoverflow.com/questions/519520/difference-between-static-class-and-singleton-pattern)[讨论](https://stackoverflow.com/questions/519520/difference-between-static-class-and-singleton-pattern)。虽然它是在 C# 中，但类似的面向对象的哲学也适用。

简而言之，Singleton 为您提供了更好的灵活性。如果您为 Flex 应用程序使用 Databinding，则使用 Singleton 将允许您继承 EventDispatcher，您可以使用它来调度自定义更改事件。自定义更改事件将为您的应用程序提供更好的性能。

# c# - 报告查看器配置错误 - 在查看网页源

> ID：11419059
> 
> 赞同：13
> 
> 时间：2012-07-10T17:53:16.923
> 
> 标签：c#, reportviewer

当我检查网页的查看源时，我发现了以下错误消息，但网页工作正常。我们的测试主管在执行断言测试时发现了错误。

报告查看器配置错误：

> 报告查看器 Web 控制 HTTP 处理程序尚未在应用程序的 web.config 文件中注册。添加
> 
> ```
> <add verb=" * " path="Reserved.ReportViewerWebControl.axd" 
>      type="Microsoft.Reporting.WebForms.HttpHandler,Microsoft.ReportViewer.WebForms, Version=10.0.0.0, Culture=neutral,PublicKeyToken=b03f5f7f11d50a3a" /> 
> ```
> 
> 到 web.config 文件的 system.web/httpHandlers 部分，或添加
> 
> ```
> <add name="ReportViewerWebControlHandler" preCondition="integratedMode"
>      verb="*" path="Reserved.ReportViewerWebControl.axd"
>      type="Microsoft.Reporting.WebForms.HttpHandler,Microsoft.ReportViewer.WebForms, Version=10.0.0.0, Culture=neutral,PublicKeyToken=b03f5f7f11d50a3a" /> 
> ```
> 
> Internet Information Services 7 或更高版本的 system.webServer/handlers 部分

为什么在查看源代码中出现此错误消息..

**注意**：此错误消息周围有一个 div 标签，其 style="display:none"

我试图找出原因，但每个人都只讨论了这个错误消息，因为它是在网页中抛出的。建议对 web.config 进行的更改已经存在于我们的配置文件中。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2016-04-04T18:15:40.390

以下是我的解决方案：

```
<system.web>
  <httpHandlers>
    <add verb=" * "  path="Reserved.ReportViewerWebControl.axd" 
         type="Microsoft.Reporting.WebForms.HttpHandler,
               Microsoft.ReportViewer.WebForms, Version=10.0.0.0, Culture=neutral,
               PublicKeyToken=b03f5f7f11d50a3a" />
  </httpHandlers>
</system.web>
<system.webServer>
  <handlers>
    <add name="ReportViewerWebControlHandler" preCondition="integratedMode"
         verb="*" path="Reserved.ReportViewerWebControl.axd" 
         type="Microsoft.Reporting.WebForms.HttpHandler, 
               Microsoft.ReportViewer.WebForms, Version=10.0.0.0, Culture=neutral,
               PublicKeyToken=b03f5f7f11d50a3a"/>
  </handlers>
</system.webServer> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-11T15:13:29.763

我刚刚签入了一个包含 ReportViewer 控件的应用程序，该应用程序已经投入生产近一年没有任何问题，并且在 HTML 内容中找到了相同的内容。

因此，考虑到它`div`没有显示（CSS 属性`display:none`）这一事实，人们可以猜测它是一条错误消息，如果错误实际发生，它只是为了便于显示而存在。如果错误涉及客户端的某些内容，那么以这种方式实现它会容易得多：显示消息所要做的所有客户端脚本就是更改样式属性——无需操纵 DOM 来附加错误消息，并且不需要在 javascript 中以适当的语言获取本地化错误消息（鉴于 ReportViewer 通过语言包的本地化支持，每种语言都有不同版本的此错误消息 - 在 ASP.NET 上更容易处理与所有其他本地化内容并排放置，而不是在 javascript 中的浏览器中）。是的，我在这里做心理学！：

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-11T09:38:35.487

为了安全起见，添加 IIS6 和 IIS7 的配置。

IIS6：

```
<system.web>
    <httpHandlers>
        <add verb=" * "
             path="Reserved.ReportViewerWebControl.axd"
             type="Microsoft.Reporting.WebForms.HttpHandler,
                   Microsoft.ReportViewer.WebForms, Version=10.0.0.0, Culture=neutral,
                   PublicKeyToken=b03f5f7f11d50a3a" />
    </httpHandlers>
</system.web> 
```

IIS7：

```
<system.webServer>
   <handlers>
      <add verb=" * "
           path="Reserved.ReportViewerWebControl.axd"
           type="Microsoft.Reporting.WebForms.HttpHandler,
                 Microsoft.ReportViewer.WebForms, Version=10.0.0.0, Culture=neutral,
                 PublicKeyToken=b03f5f7f11d50a3a" />
   </handlers>
</system.webServer> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-10-06T16:20:04.710

以下代码如下

```
<system.webServer>
<validation validateIntegratedModeConfiguration="false"/>
<handlers>
  <add name="ReportViewerWebControlHandler" preCondition="integratedMode" verb="*" path="Reserved.ReportViewerWebControl.axd" type="Microsoft.Reporting.WebForms.HttpHandler, Microsoft.ReportViewer.WebForms, Version=11.0.0.0, Culture=neutral, PublicKeyToken=89845dcd8080cc91"/>
</handlers> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-10T19:31:48.777

这就是我在 web.config 中声明报表查看器控件的样子。确保你有类似的东西在那里。如果没有，请添加。控件的版本可能不一样。

```
<configuration>
    ...
    </system.web>
        ...
        <httpHandlers>
            ...
            <add verb="*" path="Reserved.ReportViewerWebControl.axd" type="Microsoft.Reporting.WebForms.HttpHandler, Microsoft.ReportViewer.WebForms, Version=9.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a"/>
            ...
        </httpHandlers>
        ...
    </system.web>
    ...
</configuration> 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-07-12T17:08:24.223

对于 IIS 7，在 web.config 中使用以下代码

```
 <system.webServer>
            <handlers>
                   <add name="ReportViewerWebControlHandler" preCondition="integratedMode" verb="*" path="Reserved.ReportViewerWebControl.axd" type="Microsoft.Reporting.WebForms.HttpHandler, Microsoft.ReportViewer.WebForms, Version=10.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a" />
            </handlers>
      </system.webServer> 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-06-22T09:28:21.137

我也面临同样的报告查看器不显示的问题。从浏览器设置显示属性后，我的错误为“报告查看器配置错误”。

我发现对于某些参数，我发送了不正确的值，即“string .empty”。我更改了代码以向参数发送一些值或空值。现在我的报告可以正常显示。我通过发送正确的报告参数值来报告解决了我的问题。不要错过任何参数来分配正确的值或空值。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-01-06T14:40:44.897

根据 IIS 版本更改 web.config 文件后，尝试添加此代码部分：

```
 if(!IsPostBack){
        // Here codes about ReportViewer1 
    } 
```

你可以检查这个[类似的问题](https://stackoverflow.com/questions/12580016/vs2010-reportviewer-keeps-loading-with-windows-azure-reporting-service)。

# php - 复选框选择和数组

> ID：11419061
> 
> 赞同：0
> 
> 时间：2012-07-10T17:53:32.967
> 
> 标签：php

我的 select.php 中有 9 个复选框

```
<form method="post" action="test.php">
<input type="checkbox" name="g1[]" id="c1" value="c1">
<input type="checkbox" name="g1[]" id="c2" value="c2">
<input type="checkbox" name="g1[]" id="c3" value="c3">

<input type="checkbox" name="g2[]" id="h1" value="h1">
<input type="checkbox" name="g2[]" id="h2" value="h2">
<input type="checkbox" name="g2[]" id="h3" value="h3">

<input type="checkbox" name="g3[]" id="d1" value="d1">
<input type="checkbox" name="g3[]" id="d2" value="d2">
<input type="checkbox" name="g3[]" id="d3" value="d3">
</form> 
```

好的，我的 test.php 现在看起来像这样：

```
error_reporting(E_ALL);

$g1 = $_POST['g1']; 
$g2 = $_POST['g2']; 
$g3 = $_POST['g3'];

//Connect to DB

$ng1 = count($g1);
$ng2 = count($g2);
$ng3 = count($g3);

 $sum = 0; 
 for ($i = 1; $i <= 3; $i++) 
 { 
     $arr = "g$i"; 
     if (!isset($_POST[$arr])) 
         ${$arr} = array(); 
     else 
         ${$arr} = $_POST[$arr]; 
     if (!is_array(${$arr})) 
         die("Error in input parameter $arr"); 
     ${"ng$i"} = count(${$arr}); 
     if (${"ng$i"} < 1) 
         die("At least one $arr checkbox must be checked"); 
     $sum += ${"ng$i"}; 

     ${"g$i"."_sql"} = implode(',', array_map(${$arr}, 'mysql_real_escape')); 
 } 

 $query="INSERT INTO ch_lg (g1, g2, g3) VALUES ('$g1_sql','$g2_sql','$g3_sql')"; 

 mysql_query($query) or die(mysql_error()); 
 mysql_close(); 

//echo message
} 
```

**修改问题**

我需要检查一下：

1.  用户从每个数组中选择了 1 个复选框（您的代码执行此操作）

2.  他没有选择超过 4 个复选框（您的代码执行此操作）

3.  他从 JUST 一个数组中又选择了 1 个复选框（这意味着他必须总共选择 4 个，并且每个只有 1 个是不可接受的） - 我认为这在您的代码中没有发生。可以？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T18:03:04.590

“两个都不超过3个”是指2个头发+1个颜色就可以了，但是2个头发+2个颜色不是因为会给出4个吗？然后：

```
$ncolor = count($color);
$nhair   = count($hair);
if (($ncolor >= 1) && ($nhair >=1) && (($ncolorn+$nhair)<=3))
   // OK
else
   // No good. 
```

> 然后将我的值插入到 db 列颜色/头发中。

您必须解释您的数据库的结构以及您想要数据的方式。如果我得到 2 种头发和 1 种颜色，你想要：

*   3排，一带颜色，两排带毛
*   2排，一个有颜色和头发的，一个有头发的
*   1 行颜色和毛发与分隔符合并：

    $color_sql = implode(',', array_map($color, 'mysql_real_escape')); $hair_sql = implode(',', array_map($hair, 'mysql_real_escape'));

    INSERT INTO mytable (..., color, hair, ...) VALUES (...,'$color_sql','$hair_sql', ...);

另外，在 test.php 的开头，我假设有类似的东西：

```
<?php
     error_reporting(E_ALL);
     $g1 = $_POST['g1'];
     $g2 = $_POST['g2'];
     $g3 = $_POST['g3'];

     ... 
```

验证可以在一个循环中完成：

```
<?php
     error_reporting(E_ALL);
     $sum = 0;
     for ($i = 1; $i <= 3; $i++)
     {
         $arr = "g$i";
         if (!isset($_POST[$arr]))
             ${$arr} = array();
         else
             ${$arr} = $_POST[$arr];
         if (!is_array(${$arr}))
             die("Error in input parameter $arr");
         ${"ng$i"} = count(${$arr});
         if (${"ng$i"} < 1)
             die("At least one $arr checkbox must be checked");
         $sum += ${"ng$i"};

         ${"g$i"."_sql"} = implode(',', array_map(${$arr}, 'mysql_real_escape'));
     }

     // NOTICE: 'NULL' between quotes? Should't it be NULL without quotes?
     // If ID is autoincrement, just omit it: (g1, g2, g3) VALUES ('$g1_sql',...)

     $query="INSERT INTO ch_lg (ID, g1, g2, g3) VALUES ('NULL','$g1_sql','$g2_sql','$g3_sql')";

     mysql_query($query) or die(mysql_error());
     mysql_close(); 
```

# python - 如何在第一次出现数字之前在最后一个字母处截断字符串？

> ID：11419065
> 
> 赞同：2
> 
> 时间：2012-07-10T17:53:50.487
> 
> 标签：python, string, parsing, indexing

我正在尝试在字符串中查找内容-所有内容都在数字之前，例如：

```
"Diablo Lord Of Destruction 9.2" 
```

这是来自文件的索引，使得`file[2] = "Diablo Lord Of Destruction 9.2"`

如何编写仅选择文本并在这些数字之前省略数字和任何空白的代码（如下所示）？

```
"Diablo Lord Of Destruction" 
```

我知道您可以通过执行以下操作轻松做到这一点：

```
contents = file[2]
print contents[0:-2] 
```

由于值会发生变化，我需要一个更强大的解决方案来处理不同大小的数字和不同长度的空白。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-10T17:56:50.567

这会从您的字符串中删除任何数字和句号：

```
import re
>>> filtered = re.sub('[0-9.]*','',"Diablo Lord Of Destruction 9.2  111" )
>>> filtered
'Diablo Lord Of Destruction   '
>>> filtered.strip()           # you might want to get rid of the trailing space too!
'Diablo Lord Of Destruction' 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-10T17:58:20.163

如果数字前总是有一个空格，则可以[拆分](http://docs.python.org/library/stdtypes.html#str.split)字符串。例如：

```
contents = file[2].split() # Gives a list split by whitespace
contents.pop() # Dump the number
finalStr = ' '.join(contents) 
```

从运行测试：

```
>>> test = "Diablo Lord Of Destruction 9.2"
>>> contents = test.split()
>>> contents
['Diablo', 'Lord', 'Of', 'Destruction', '9.2']
>>> contents.pop()
'9.2'
>>> finalStr = ' '.join(contents)
>>> finalStr
'Diablo Lord Of Destruction 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-10T18:00:13.780

这是正则表达式的完美工作。具体来说，您可以使用以下代码提取数字前面的所有文本：

```
import re
s = "Diablo Lord Of Destruction 9.2"
print 'Text: ', re.match('([^0-9]+)',s).group(1) 
```

正则表达式很难掌握，但值得努力。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-10T18:04:39.203

您可以使用[正则表达式](http://docs.python.org/library/re.html)和[sub()](http://docs.python.org/library/re.html#re.sub)方法：

> 返回通过替换 repl 替换 string 中最左边的不重叠出现的模式获得的字符串。如果未找到该模式，则字符串原封不动地返回。repl 可以是字符串或函数；如果它是一个字符串，则处理其中的任何反斜杠转义。

```
>>> import re
>>> re.sub('[0-9.]*', '', 'Diablo Lord of Destruction 9.2')[:-1]
'Diablo Lord of Destruction'
>>> re.sub('[\d.]*', '', 'Diablo Lord of Destruction 9.2')[:-1]
'Diablo Lord of Destruction' 
```

上面的代码将找到所有出现的数字，[0-9.] 或 [\d.]，并将它们替换为 ''。此外，它会修剪最后一个字符，即空格。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-07-10T17:57:32.070

怎么样...

```
filter(lambda ch: not ch.isdigit(), "Diablo Lord Of Destruction 9.2") 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-10T18:13:37.810

要获取所有文本，直到遇到第一个数字：

```
import re

s = "Diablo Lord Of Destruction 9.2"
print(re.match(r'\D*', s).group(0)) 
```

# ios - iOS TextInput displayAsPassword 不显示AsPassword

> ID：11419068
> 
> 赞同：2
> 
> 时间：2012-07-10T17:54:03.973
> 
> 标签：ios, apache-flex, actionscript, flex-spark

我正在构建一个应用程序以同时在 Android、iOS 和桌面上启动。该应用程序包含一个附加到 vBulletin 系统的登录信息，我遇到了一个重大问题（客户坚持必须修复）。在 iOS 上，如果您输入的 TextInput 的 displayAsPassword 设置为 true，它会在输入时显示纯文本。一旦您单击 TextInput，它就会正确显示。

这是我在 Flex 中使用的代码

```
<s:TextInput id="inputField" width="100%" styleName="loginFields" text="Password" focusAlpha="0" focusEnabled="false" autoCorrect="false" /> 
```

然后我将焦点事件附加到运行这些函数的输入字段。

```
private var defaultText:String = 'Password';

private var passwordDisplay:Boolean = true;

private function focusIn (e:FocusEvent = null):void {
     if (this.inputField.text == this.defaultText){
            this.inputField.text = '';
      }
     if (this.passwordDisplay){
               this.inputField.displayAsPassword = true;
     }
}

private function focusOut (e:FocusEvent = null):void {
     if (this.inputField.text == ''){
               this.inputField.text = this.defaultText;
               if (this.passwordDisplay){
                      this.inputField.displayAsPassword = false;
             }
      }
} 
```

文件中有更多代码，但这是唯一相关的。基本上，在聚焦时，它会检查文本是否 == 默认文本。如果是这样，它将清空该字段。然后它将 displayAsPassword 设置为 true。聚焦时，它会检查该字段是否为空。如果是，它会将字段重置为默认值并将 displayAsPassword 重置为 false。我知道默认文本是内置的，但我需要的功能比它提供的更多。

现在，此问题（当焦点位于字段上时密码显示为纯文本）**仅存**在于 iOS中，并且不会出现在模拟器中。它可以在 Android 和桌面上完美运行并符合预期。我尝试手动重新创建功能（可能但不理想，因为 caretIndex 不是 TextInput 属性），我尝试隐藏 TextInput 并覆盖与输入长度匹配的“•”字段（不可能，因为 TextInput 是舞台文字）。我不确定我还能在这里尝试什么。有任何想法吗？

在此先感谢您的任何帮助。

眼镜：

*   使用 FlashBuilder 4.6 构建和编译（但我也有 4.5.1 可用）
*   使用空气 3.1
*   在 OS X Lion 上编译
*   在第一代和第三代 iPad 上测试
*   使用 Flex SDK 4.6.0

# akka - 将 Java 线程转换为 AKKA 演员

> ID：11419075
> 
> 赞同：2
> 
> 时间：2012-07-10T17:54:34.467
> 
> 标签：akka

我确实有带有大量线程和线程池的 Java 应用程序。我们可以使用 AKKA 来代替线程和线程池吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T02:15:38.610

这取决于你的线程在做什么。他们是在做阻塞 IO 还是在自己之间获取锁和共享可变数据？如果是这样，akka 可能不太适合，因为演员通常应该避免阻塞 io 或锁。另一方面，如果线程做独立的非阻塞工作，并且可以通过消息传递进行通信，akka 可能是一个不错的选择。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-13T06:25:39.953

是的，你绝对可以。请注意上述海报的回应。这并不完全准确。Actor 可以阻塞 I/O。您只需使用子角色来表示每个阻塞连接。新手的错误是像对待线程一样对待演员......在这种情况下，上面的海报的答案是正确的。但是，如果您将阻塞传递给较低的参与者并每次都使用临时参与者，您将永远不必阻塞主要吞吐量。

但是，请原谅我。我已经偏离了轨道。简而言之，是的，你可以。但请记住，会有一个学习曲线。Actors 编程是一种不同的范式，需要以不同的方式处理。

然而，使用 actor 进行并发编程比使用线程和锁定（字面意思）要容易得多。只需让您的应用程序响应式而不是基于时间的，许多并发问题就会停止存在。

查看他们网站上的 AKKA 文档。他们非常彻底。还有 Akka 并发和有效 Akka 的书籍。把它们放在桌子上作为参考。

# php - PHP：使用变量值作为变量名：对语法问题感到好奇

> ID：11419076
> 
> 赞同：3
> 
> 时间：2012-07-10T17:54:37.120
> 
> 标签：php

假设我有以下内容：

```
$foo = "bar";
$bar = "hello"; 
```

然后字符串“hello”可以作为以下任一方式回显到标准输出：

```
echo $$foo; 
```

或者

```
echo ${$foo}; 
```

我想知道这两个陈述之间一般有什么区别。也就是说，在上面显示的第二种语法中，计算变量名称周围的大括号的目的是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-10T17:56:34.613

使用 ${$foo} 的唯一原因是能够将 $foo 与其他东西结合起来，例如：

```
$idx = 4;
$bar3 = 20;
$bar4 = 7;
echo ${$foo.$idx} 
```

这将返回 $bar4 中的值，因为 $idx 值 4；

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-10T17:57:03.660

两者在您的示例中所做的没有区别。

第一个示例是概念称为**[变量变量](http://php.net/manual/en/language.variables.variable.php)**，而第二个大括号示例允许您根据指定值生成**[动态变量。](http://php.net/manual/en/language.variables.php)**

您可能还想结帐：

*   [PHP 变量名称：花括号疯狂](http://cowburn.info/2008/01/12/php-vars-curly-braces/)
*   [可访问性和动态变量名称](http://chimpy.wordpress.com/2009/08/19/accessibility-and-dynamic-variable-names/)

# php - 如何比较动态创建的单选按钮的值

> ID：11419084
> 
> 赞同：0
> 
> 时间：2012-07-10T17:55:26.837
> 
> 标签：php

我正在从 MySQL 动态生成一组单选按钮。按钮正在创建，分配给它们的变量正在填充，就像我执行 echo print_r 一样，它显示了变量的数组。我现在想比较由此生成的值，如果值为“0”，我想插入一个分数并显示一个绿色检查图形和正确的单词。如果值为“1”，我希望它为分数输入不同的值并显示不正确和红色 X 图形。这是我到目前为止所拥有的（一切都以单选按钮的形式动态填充问题和答案）：

```
<?php
echo '<form id="frmQuestion" name="frmQuestion" method="post" action="QuizQuestion1.php">';

// Connect to the Database
require_once('mysqli_connect.php');

//create the query for the question
$q = "SELECT `Question` FROM tbl_Question WHERE QuestionID = 1";

//Create the query for the Answers
$q2 = "SELECT `Answer`,`AnswerStatusID`,`AnswerResponse` FROM tbl_Answer WHERE QuestionID = 1";

//Run the query
$r = mysqli_query($conn,$q);

//run the answer query
$r2 = mysqli_query($conn,$q2);

while($row = mysqli_fetch_array($r,MYSQLI_ASSOC)){
    echo '<div id="Question1"><p> ' . $row['Question'] . '</div></p>';
}

//Declare the variables as a array
$AnswerResponse = array();
$AnswerStatusID = array();

while($row2 = mysqli_fetch_array($r2,MYSQLI_ASSOC)){
    echo '<div id="Question1"><input name="q1" type="radio" value="'.$AnswerStatusID.'"/>' . $row2['Answer'] . '</div><br/>';

    //Assign the AnswerStatusID to a var
    $AnswerStatusID[] = $row2['AnswerStatusID'];

    //Assign the AnswerResponse to a var
    $AnswerResponse[] = $row2['AnswerResponse'];
}

//Create the submit button 
echo '<input type="submit" value="Submit Answer" name="submit"/>';
echo '</form>';

//Logic for correct or incorrect answers
if (isset($_POST['q1']) && ($_POST['q1'] == '0'))
{
    //create the query for the score
    $q3 = "INSERT INTO tbl_Score (`Score`,`QuestionID`) VALUES ('100%','1')";   

    //Run the query 
    $r = @mysqli_query ($conn,$q3);

    if($r){

        //Confirm message data was entered with a correct response and a graphic
        echo '<h1>Correct!!</h1><img src="/images/green_Check_Low.jpg" alt="Green Check"/>';
        echo '<a href="QuizQuestion2.php">Click here for the next question</a>';
    }
    else
    {
        //there was an error
        echo'<h1>System error</h1>';

        //Debugging message
        echo'<p>' . mysqli_error($conn) . '<br/><br/>Query:' . $q3 . '</p>';

    }//End of nested IF
}
else{
    //create the query for the score
    $q4 = "INSERT INTO tbl_Score (`Score`,`QuestionID`) VALUES ('0%','1')"; 

    //Run the query 
    $r2 = @mysqli_query ($conn,$q3);

    if($r2){

        //Confirm message data was entered with a correct response and a graphic
        echo '<h1>Incorrect!!</h1><img src="/images/red_X_Low.jpg" alt="Red X"/>';
        echo '<a href="QuizQuestion2.php">Click here for the next question</a>';
    }
    else
    {
        //there was an error
        echo'<h1>System error</h1>';

        //Debugging message
        echo'<p>' . mysqli_error($conn) . '<br/><br/>Query:' . $q3 . '</p>';

    }//End of nested IF

}

//Free up the results for the Question query
mysqli_free_result($r);

//Free up the results from the Answer query
mysqli_free_result($r2);

//close the DB connection
mysqli_close($conn); 

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T18:18:30.263

这是答案并按预期工作。感谢大家的意见。

```
//Declare the variables as a array
$AnswerResponse = array();
$AnswerStatusID = array();

while($row2 = mysqli_fetch_array($r2,MYSQLI_ASSOC)){
echo '<div id="Question1"><input name="q1" type="radio" value="'.$row2['AnswerStatusID'].'"/>' . $row2['Answer'] . '</div><br/>';

//Assign the AnswerStatusID to a var
$AnswerStatusID[] = $row2['AnswerStatusID'];

//Assign the AnswerResponse to a var
$AnswerResponse[] = $row2['AnswerResponse'];
}

//Create the submit button 
 echo '<input type="submit" value="Submit Answer" name="submit"/>';
echo '<input type="hidden"name="submitted"value="TRUE"/>';
echo '</form>';

if($_POST['submitted']) { 

//Logic for correct or incorrect answers
if (isset($_POST['q1']) && ($_POST['q1'] == '0'))
{
//create the query for the score
$q3 = "INSERT INTO tbl_Score (`Score`,`QuestionID`) VALUES ('100%','1')";   

//Run the query 
$r3 = @mysqli_query ($conn,$q3);

//Confirm message data was entered with a correct response and a graphic
echo '<h1>Correct!!</h1><img src="/images/green_Check_Low.jpg" alt="Green Check"/>';
echo '<a href="QuizQuestion2.php">Click here for the next question</a>';

}       
else{
//create the query for the score
$q4 = "INSERT INTO tbl_Score (`Score`,`QuestionID`) VALUES ('0%','1')"; 

//Run the query 
$r4 = @mysqli_query ($conn,$q4);

//Confirm message data was entered with a correct response and a graphic
echo '<h1>Incorrect!!</h1><img src="/images/red_X_Low.jpg" alt="Red X"/><br/>';
echo '<a href="QuizQuestion1.php">Click here to try again</a>';

}

} 
```

# javascript - 管理表单状态的最简单方法是什么？

> ID：11419086
> 
> 赞同：0
> 
> 时间：2012-07-10T17:55:35.400
> 
> 标签：javascript, jquery, design-patterns, object

我有多个下拉列表，所有下拉列表都包含我需要制作的相同选项，以便只能在一个列表中选择每个项目（如果我在一个列表中选择红色，则在所有其他列表中都是灰色的）
如果该项目未选中，则其兄弟姐妹未显示为灰色

所有列表都有一个默认的空白选项，当然可以在所有列表中选择它，但是列表是从服务器填充的，因此没有恒定的默认选项。

我从简单`if`的 s 开始，但是当`if`s 的数量变得非常大时，我意识到我需要一种更好的方法，一种能够不断反映列表状态的结构。

我不知道该怎么做，我正在寻找方向/模式/框架

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T19:55:12.933

我建议不要让下拉列表引用数据源，而是让数据源项引用下拉列表。即每个项目都有一个名为`relatedDropDown`. 所以每个下拉菜单的可用项目将是它们`relatedDropDown`为空或等于它自己的项目。当下拉列表的值发生变化时，选择的值属性应该设置为下拉列表（如果它有一个旧值，旧项目的属性应该设置为空），并且所有其他下拉列表都应该重新绑定.

# php - PHP SOAP 客户端到 WCF

> ID：11419087
> 
> 赞同：2
> 
> 时间：2012-07-10T17:55:36.367
> 
> 标签：php, zend-framework, soap

我需要在我的 Zend 应用程序中开发一个 SOAP 客户端，但我真的很困惑如何让它工作。我尝试了几乎所有可能的方法，在谷歌上搜索了十亿次，但没有办法让那个该死的网络服务调用正常工作。

客户端应该允许我流式传输图像和少量字符串，以便获取证书和对象作为响应。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T21:02:12.480

根据我对 Zend_Soap 的经验，您需要将参数作为数组传递，例如：

```
$client->ControlMRZ(array('file' => $file, 'filestream' => 'test.jpg', 'anothervar' => 0); 
```

要传递 SOAP 标头，您可以将`SOAPHeader`对象附加到您的 soap 请求，如下所示：

```
/**
 * Generate the auth token and create a soap header
 * 
 * @return SoapHeader
 */
private function generateAuthHeader()
{
    $ns = 'http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd';

    $token = new stdClass ();
    $token->Username = new SOAPVar ( $this->_vendor, XSD_STRING, null, null, null, $ns );
    $token->Password = new SOAPVar ( $this->_password, XSD_STRING, null, null, null, $ns );

    $wsec = new stdClass ();
    $wsec->UsernameToken = new SoapVar ( $token, SOAP_ENC_OBJECT, null, null, null, $ns );

    $headers = array(new SOAPHeader ( $ns, 'Security', $wsec, true ));

    return $headers;
}

    $this->_client->getSoapClient()->__setSOAPHeaders ( $this->generateAuthHeader () ); 
```

PS。我讨厌肥皂

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T20:20:43.133

最后这是正确的方法：

```
$client = new Zend_Soap_Client($myWebServiceUri,array(
                                    'encoding' => 'UTF-8'
                                    ));
$client->setSoapVersion(SOAP_1_1);        
$url = '/var/www/upload/test.jpg';
$file = fread(fopen($url, "r"), filesize($url));

function generateHeader() {

    $headers[] = new SoapHeader( $ns , 'AccountName', new SoapVar( 'login', XSD_STRING, null, null, null, $ns ), false );
    $headers[] = new SoapHeader( $ns , 'AccountPassword', new SoapVar( 'password', XSD_STRING, null, null, null, $ns ), false );
    $headers[] = new SoapHeader( $ns , 'Agency', new SoapVar( 'agency', XSD_STRING, null, null, null, $ns ), false );
    $headers[] = new SoapHeader( $ns , 'FileName', new SoapVar( 'filename', XSD_STRING, null, null, null, $ns ), false );
    $headers[] = new SoapHeader( $ns , 'Options', new SoapVar( options, XSD_STRING, null, null, null, $ns ), false );

    return $headers;
}

$soapHeaders = generateHeader();
$client->getSoapClient()->__setSoapHeaders( $soapHeaders );
$result = $client->ControlMRZ(array('FileStream'=>$file));
Zend_Debug::dump($result); 
```

感谢@aporat 和 Sebastien Lorber 的帮助！

# silverlight - 如果证书来自 CA，我是否需要在 SilverLight 客户端计算机上安装证书

> ID：11419091
> 
> 赞同：3
> 
> 时间：2012-07-10T17:55:47.233
> 
> 标签：silverlight, silverlight-5.0

如果证书来自 CA（例如 GoDaddy、Verisign），是否需要将证书安装在客户端计算机上？

我有一个 SilverLight 应用程序，它需要提升权限并将安装在许多客户端站点上。我还试图最小化每个站点的安装（每个站点有 100 个部署，应用程序在每个站点本地托管）。

我相信可以通过组策略更新来部署注册表更改。

如果仍然需要部署证书，那么当主要目标是最小化本地站点管理时，从 CA 获得证书而不是自签名应用程序是否有价值？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T18:23:23.173

是的，如果证书来自 CA，则证书确实需要安装在客户端计算机上。尽管如此，微软确实已经安装了许多根证书，并通过根证书更新使该列表保持最新。请参阅[根证书成员列表](http://social.technet.microsoft.com/wiki/contents/articles/2592.aspx)

GoDaddy 和 Verisign 目前不在此列表中，因此在最新的计算机上应该不需要执行额外的步骤。情况并非总是如此，因此在某些机器上可能仍然需要它。

综上所述，要在提升权限模式下运行 Silverlight，用户必须在安装时简单地单击他们“信任”应用程序。请参阅 MSDN[受信任的应用程序](http://msdn.microsoft.com/en-us/library/ee721083%28v=VS.95%29.aspx)

花时间从 CA 获取签名只会让您的用户在单击按钮时更加安心

他们会看到：

![已验证的发布者](../Images/0f1d414fb462f8a0230fcce972d30bb4.png)

代替：

![未经验证的发布者](../Images/c00fe4e99ec4240a33c26ed85663ea7d.png)

如果目标是最小化本地站点管理，那么我认为通过获取证书来签署您的应用程序的麻烦不会达到该目标，它只是为了帮助为您的用户提供一些安全性，这听起来并不就像这将是一个问题。

# iphone - 实用程序模板：如何从反面视图刷新 UIPickerView

> ID：11419092
> 
> 赞同：0
> 
> 时间：2012-07-10T17:55:49.817
> 
> 标签：iphone, objective-c, ios

我正在使用带有核心数据的实用程序应用程序模板。在反面视图中，用户可以添加项目，这些项目的品牌和模型在主视图上提供 UIPickerView。

当用户添加项目时，除非她或他关闭应用程序，否则此添加的项目不会出现在选择器行标题中。

如何在不关闭应用程序的情况下加载此标题？谢谢

编辑以添加代码：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.

    //retrieving data from iGear.xcdatamodeld
    iGearAppDelegate *iGearDelegate = [[UIApplication sharedApplication]delegate];
    NSManagedObjectContext *context = [iGearDelegate managedObjectContext];
    NSError *error;

    if (managedObjectContext !=nil) {
        if ([managedObjectContext hasChanges] && [managedObjectContext save:&error]) {
            //NSLog(@"Retrieving: unresolved error %@, %@",error, [error userInfo]);
            abort();
         }
    }

    NSFetchRequest *fetchRequest = [[NSFetchRequest alloc]init];
    NSEntityDescription *entity = [NSEntityDescription entityForName:@"Cogset"     inManagedObjectContext:context];

    [fetchRequest setEntity:entity];
    fetchedObjects = [context executeFetchRequest:fetchRequest error:&error];

//#pragma mark UIPickerView

- (NSInteger)numberOfComponentsInPickerView:(UIPickerView *)pickerView
    {
        return 1;
    }
- (NSInteger)pickerView:(UIPickerView *)pickerView numberOfRowsInComponent: (NSInteger)component
 {
    return [fetchedObjects count];
 }

- (NSString *)pickerView:(UIPickerView *)pickerView titleForRow:(NSInteger)row forComponent:(NSInteger)component
{
    if (component == 0) 
    {
        cogset = [fetchedObjects objectAtIndex:row];
        return [NSString stringWithFormat:@"%@ %@",cogset.brand,cogset.model];
    }
    return @"";
}

-(void)pickerView:(UIPickerView *)pickerView didSelectRow:(NSInteger)row inComponent:(NSInteger)component
{
    cassette = [fetchedObjects objectAtIndex:[_chooseCogsetPickerView  selectedRowInComponent:0]];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T18:11:25.813

你应该`UIPickerViewDelegate`为你的 UIPickerView 实现一个。

然后，使用这个委托函数来填充你的选择器视图：

```
- (NSString *)pickerView:(UIPickerView *)pickerView titleForRow:(NSInteger)row forComponent:(NSInteger)component ]
{
 return someValue;
} 
```

如果您发布一些当前正在发生的事情的实际代码，我可以尝试更具体地帮助您。

# android - 用于发送到视频的增强现实框架

> ID：11419095
> 
> 赞同：0
> 
> 时间：2012-07-10T17:55:55.137
> 
> 标签：android, image, video, augmented-reality

我是增强现实的新手，我想知道是否已经有适用于我的情况的现有框架。我想制作一个扫描非编码图像（瓶子、笔、电话等）的应用程序，并根据图像将用户发送到特定视频。

目前有这样的东西吗？我认为这将更加基于标记，但我并不完全确定。提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T18:07:19.040

我在我的应用程序中使用了[这个](https://developer.qualcomm.com/mobile-development/mobile-technologies/augmented-reality)。我发现它很简单，并且在我的应用程序中做得很好。其摩托罗拉的增强现实框架。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T00:41:47.853

如果您只想在跟踪图像时显示视频，则应使用此功能：[https](https://dev.metaio.com/creator/getting-started/) ://dev.metaio.com/creator/getting-started/ 您只需将所需的视频拖到要触发的图像上即可然后部署它。

如果您更喜欢在框架中实际编写代码，您可以尝试使用 metaio sdk，它还允许您使用 3D 对象进行跟踪——即您说跟踪笔的图像，但为什么不跟踪笔本身呢？教程和更多信息：metaio sdk 教程：[https](https://dev.metaio.com/sdk/getting-started/) ://dev.metaio.com/sdk/getting-started/ 3D 对象跟踪工具：[https ://dev.metaio.com/toolbox/](https://dev.metaio.com/toolbox/)

# regex - Perl Regex 替换并保存到变量

> ID：11419096
> 
> 赞同：1
> 
> 时间：2012-07-10T17:55:57.573
> 
> 标签：regex, perl, variables, extract

```
$LDAP = ldap://sspdir.managed.entrust.com/ou=Entrust Managed Services SSP CA,ou=Certification Authorities,o=Entrust,c=US?cACertificate;binary,crossCertificatePair;binary 
```

我正在尝试从此代码 ldap 目录中提取 2 个字符串。我想要的第一个：

```
$LDAP_host = sspdir.managed.entrust.com 
```

第二...

```
$LDAP_base = ou=Entrust Managed Services SSP CA,ou=Certification Authorities,o=Entrust,c=US 
```

我的代码如下，它在我的输出中产生持续的不匹配，我不知道为什么：

```
my $LDAP_host = $LDAP;
my $LDAP_base = $LDAP;
$LDAP_host =~ s|^ldap:\/\/(.*)\/|$1|i;
$LDAP_base =~ s|"\/"(.*)\?|$1|i; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T18:08:30.720

我会使用：

```
 my ($LDAP_host, $LDAP_base) = $LDAP=~ m{ // ([^/]+) / (ou=[^?]+) }x; 
```

或者，如果您也想检查字符串的开头：

```
 my ($LDAP_host, $LDAP_base) = $LDAP=~ m{ ^ldap:// ([^/]+) / (ou=[^?]+) \? }x; 
```

问候

rbo

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T18:11:35.033

```
use strict;
use warnings;

my $LDAP='ldap://sspdir.managed.entrust.com/ou=Entrust Managed Services SSP CA,ou=Certification Authorities,o=Entrust,c=US?cACertificate;binary,crossCertificatePair;binary';

my($LDAP_host, $LDAP_base) = $LDAP =~ m{ldap://([^/]+?)/(.*?)\?.*};
print $LDAP_host, "\n";
print $LDAP_base, "\n"; 
```

生产

```
sspdir.managed.entrust.com
ou=Entrust Managed Services SSP CA,ou=Certification Authorities,o=Entrust,c=US 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-10T18:10:11.577

```
my $str = "ldap://sspdir.managed.entrust.com/ou=Entrust Managed Services SSP CA,ou=Certification    Authorities,o=Entrust,c=US?cACertificate;binary,crossCertificatePair;binary";
my ($LDAP_host, $LDAP_base) = ($str =~ m!ldap://([^/]+)/([^?]+)!);
print "$LDAP_host  $LDAP_base\n"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-10T18:11:03.427

如果您不想更改原始字符串，可以尝试以下操作：

```
my ($host) = $LDAP =~ /^ldap:\/\/(.*)\//i; 
```

此外，如果在搜索和替换中使用 // 以外的分隔符，则不需要转义正斜杠。

```
$LDAP_host =~ s{^ldap://(.*)/.*}{$1}i; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-10T18:00:06.717

这应该做你想要的：

```
my $LDAP_host = $LDAP;
my $LDAP_base = $LDAP;
$LDAP_host =~ s|^ldap:\/\/(.*)\/.*|$1|i;
$LDAP_base =~ s|^ldap:\/\/.*\/(.*)\?.*|$1|i; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-03-25T15:27:37.443

请在下面找到一种使用 perl 实现相同功能的成熟方法。

```
my $LDAP = "ldap://sspdir.managed.entrust.com/ou=Entrust Managed Services SSP CA,ou=Certification Authorities,o=Entrust,c=US?cACertificate;binary,crossCertificatePair;binary";
$LDAP =~ '^\w+\W+(.*)/(.*)\?.*$';
$LDAP_host = $1;
$LDAP_base = $2;
print "\$LDAP_base => $LDAP_base\n\$LDAP_host => $LDAP_host\n"; 
```

输出如下：

$LDAP_base => ou=Entrust Managed Services SSP CA,ou=Certification Authorities,o=Entrust,c=US $LDAP_host => sspdir.managed.entrust.com

# javascript - 将 .on() 用于动态加载的内容时，是否可以从元素中获取属性？

> ID：11419101
> 
> 赞同：2
> 
> 时间：2012-07-10T17:56:27.693
> 
> 标签：javascript, jquery, jquery-on

在我为某人构建的网站上，我正在使用大多数内部链接，`pushState`因为它是一种更快的用户体验。我`href`从动态加载的锚`<a>`元素获取属性时遇到问题。人们总是告诉我使用`.on()`而不是`.live()`因为`.live()`已弃用，但后来我遇到了这样的问题。

这是我的代码：

```
$('#artists').on('click', '.artist a', function(e) {
        SM.config.loader.show();
        var href = $(this).attr('href');
        SM.loadContent(href,'artist');
        history.pushState('', 'New URL: ' + href, href);
        e.preventDefault();
}); 
```

没有`href`返回属性（显然），所以 URL 没有改变。

基本上我的问题是**如何从事件`href`的第二个参数中的元素获取属性`on`？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T18:07:02.353

这段代码对我有用：http: [//jsfiddle.net/NcZ22/2/](http://jsfiddle.net/NcZ22/2/)

**HTML**

```
<div id="artists"></div>​ 
```

**JS**

```
//Bind an event
$('#artists').on('click', '.artist', function(e) {
        e.preventDefault();    
        var href = $(this).attr('href');
        console.log(href);
});​

//Add the element to the dom
$('<a />', {
    href: 'http://stackoverflow.com',
    text: 'SO',
    class: 'artist'
}).appendTo('#artists'); 
```

另外，请确保您使用的是 jQuery 1.7+ 您可以在此处阅读有关`.on`vs的更多信息[http://api.jquery.com/delegate/](http://api.jquery.com/delegate/)`.delegate`

语法简单对比：

```
$(selector).live(events, data, handler);                // jQuery 1.3+
$(elements).delegate(selector, events, data, handler);  // jQuery 1.4.3+
$(elements).on(events, selector, data, handler);        // jQuery 1.7+ 
```

# c# - 按钮点击事件什么都不做

> ID：11419109
> 
> 赞同：3
> 
> 时间：2012-07-10T17:56:53.403
> 
> 标签：c#, asp.net-mvc-3

## 看法

```
@{
    ViewBag.Title = "Index";
}

<h2>Index</h2>

<p>
    @Html.ActionLink("Create New", "Create")
</p>
<fieldset>
    <br />
    <br />
    <br />

     <div align="center">

     @{

        @(Html.Telerik().Grid<SmartTrack.Web.DAL.SysUserList>()
        .DataBinding(dataBinding => dataBinding.Ajax().Select("Index", "User"))
        .Name("UserList")
        .DataKeys(keys => keys
            .Add(c => c.UserName)
            .RouteKey("UserName"))
        .Columns(columns =>
        {
            columns.Bound(o => o.UserName).Width(100);
            columns.Bound(o => o.FirstName).Width(200);
            columns.Bound(o => o.LastName).Width(250);
            columns.Bound(o => o.Active).ClientTemplate("<input type='checkbox' disabled='disabled' name='Active' <#=Active? checked='checked' : '' #> />").Width(70).HtmlAttributes(new { style = "text-align:center" }); ;

        })
        .Pageable(pagerAction => pagerAction.PageSize(20))
        .Sortable()
        .Selectable()
        .Scrollable()
        .Groupable()
        .Filterable()
        .HtmlAttributes(new { style = "width:50%;" })
       )
         }
       </div>
       <br/>
       <div align="center">
        <table>
        <tr>
        <td>
            <button id="btnAdd" type="submit" style="height:40px;width:70px" ">Add</button>
            </td>
            <td>
            <button style="height:40px;width:70px" ">Edit</button>
            </td>
            <td>
            <button style="height:40px;width:70px" ">Delete</button>
            </td>
        </tr>
        </table>   
       </div>
       </fieldset>

<script type="text/javascript">
    $(function () {
        $('#btnAdd').click(function () {
            $.ajax({
            type: "POST",
            url: '@Url.Action("Create","User")',
            success: function (result) {
                $('#cuscreate').html(result)
            }
            });
        });
    });
    </script> 
```

此视图包含一个脚本，当单击添加按钮时，将从该脚本调用 UserController Create 方法

## 控制

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.Mvc;
using SmartTrack.Web.Attributes;
using SmartTrack.Web.Models;
using SmartTrack.Web.DAL;
using Telerik.Web.Mvc;
namespace SmartTrack.Web.Controllers
{
    public class UserController : Controller
    {
        SMARTTrackerEntities db = new SMARTTrackerEntities();

        //
        // GET: /User/
        [GridAction]
        public ActionResult Index()
        {
            //ViewData["UserGroup"] = DisplayContentEngine.getUserGroupList();

            return View(new GridModel(UserListEngine.getAllSystemUser()));
        }

        [HttpPost] 
        public ActionResult Create()
        {

            ViewData["Location"] = DisplayContentEngine.getLocationList();
            ViewData["Branch"] = DisplayContentEngine.getBranchList();
            //var v = ViewData.Model = UserListEngine.getAllSystemUser();
            var user = new SysUserList();

            return View(user);
        }

        [HttpPost]
        public ActionResult Create(SysUserList user)
        {
            try
            {
                // TODO: Add insert logic here
                if (ModelState.IsValid)
                {

                    //Save Registration
                    db.SysUserLists.AddObject(user);
                    db.SaveChanges();

                    return RedirectToAction("Index");
                }
                return View(user);
            }
            catch
            {
                return View();
            }

        }

        public ActionResult Edit(string username)
        {
            SysUserList sysuserlist = db.SysUserLists.Single(s => s.UserName == username);
            return View(sysuserlist);

        }
    }
} 
```

这个控制器被称为

## 创建视图

```
@model SmartTrack.Web.DAL.SysUserList

@{
    ViewBag.Title = "Create";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<h2>Create</h2>

@using (Html.BeginForm())
{
    <div id="cuscreate">
        <fieldset>

        <table>
            <tr>
                <td>
                    <label>First Name</label>
                </td>
                <td>
                    @Html.TextBoxFor(model => model.FirstName)
                </td>
                <td>
                    <label>Last Name</label>
                </td>
                <td>
                    @Html.TextBoxFor(model => model.LastName)
                </td>
            </tr>
            <tr>
                <td>
                    <label>User Name</label>
                </td>
                <td>
                    @Html.TextBoxFor(model => model.UserName)
                </td>
                <td>
                    <label>Password</label>
                </td>
                <td>
                    @Html.PasswordFor(model => model.userPwd)
                </td>
            </tr>
            <tr></tr>
            <tr>
                <td>
                    <label>Location</label>
                </td>
                <td>
                    @(Html.Telerik().DropDownList()
                    .Name("ddLocation")
                    .BindTo((IEnumerable<DropDownItem>)ViewData["Location"])
                    .CascadeTo("ddlBranch")
                    )
                </td>
                <td>
                     <label>Branch</label>
                </td>
                <td>
                    @(Html.Telerik().DropDownList()
                    .Name("ddlBranch")
                    .BindTo((IEnumerable<DropDownItem>)ViewData["Branch"])
                    )
                </td>
            </tr>

        </table>

        </fieldset>
    </div>
} 
```

当单击添加按钮时，什么都没有发生，有人可以告诉我我的问题是什么吗？

提前致谢

问候库尔特

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T18:02:15.383

您的 ajax 请求中没有**数据**元素，因此您没有发布任何内容。

如果你想从表单中获取数据，你可以使用 .serialize()：

```
$.ajax({
    type: "POST",
    data: $('form').serialize(),
    url: '@Url.Action("Create","User")',
    success: function (result) {
        $('#cuscreate').html(result)
    }
}); 
```

请记住，这**仅**在页面上唯一的情况下才有效，否则您应该使用另一个选择器，但您明白了。

**来自 HatSoft 的回答更新（赞成！）**：****

 **通常在你的标签内你应该有标签，在 MVC 中做到这一点：

```
<fieldset>
    @using(Html.BeginForm())
    {
        <p>your form</p>
    }
</fieldset> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T18:02:28.690

确保通过从单击处理程序返回 false 来取消提交按钮的默认操作，以便让您的 AJAX 调用有机会执行：

```
<script type="text/javascript">
    $(function () {
        $('#btnAdd').click(function () {
            $.ajax({
                type: "POST",
                url: '@Url.Action("Create", "User")',
                success: function (result) {
                    $('#cuscreate').html(result)
                }
            });
        });

        return false; // <!-- That's the important bit
    });
</script> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-10T17:59:49.550

我在您的 html 中看不到表单标签，这可能是它不知道在哪里发布的原因

带有操作链接 Create New 的视图和 telerik 网格中没有表单标签

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-11T16:22:39.493

在纠正我的问题时，我必须修改我的索引视图以包含 div id = cuscreate 这导致 CreateUser 视图显示

```
@{
    ViewBag.Title = "Index";
}

<h2>Index</h2>

<p>
    @Html.ActionLink("Create New", "Create")
</p>

<div id="cuscreate" align="center">
 <fieldset>
    <br />
    <br />
    <br />

      @using (Html.BeginForm())
      {
        //@{

        @(Html.Telerik().Grid<SmartTrack.Web.DAL.SysUserList>()
        .DataBinding(dataBinding => dataBinding.Ajax().Select("Index", "User"))
        .Name("UserList")
        .DataKeys(keys => keys
            .Add(c => c.UserName)
            .RouteKey("UserName"))
        .Columns(columns =>
        {
            columns.Bound(o => o.UserName).Width(100);
            columns.Bound(o => o.FirstName).Width(200);
            columns.Bound(o => o.LastName).Width(250);
            columns.Bound(o => o.Active).ClientTemplate("<input type='checkbox' disabled='disabled' name='Active' <#=Active? checked='checked' : '' #> />").Width(70).HtmlAttributes(new { style = "text-align:center" }); ;

        })
        .Pageable(pagerAction => pagerAction.PageSize(20))
        .Sortable()
        .Selectable()
        .Scrollable()
        .Groupable()
        .Filterable()
        .HtmlAttributes(new { style = "width:50%;" })
       )}

 </fieldset>  
       <br/>
       <div align="center">
        <table>
        <tr>
        <td>
            <button id="btnAdd" type="submit" style="height:40px;width:70px" ">Add</button>
            </td>
            <td>
            <button style="height:40px;width:70px" ">Edit</button>
            </td>
            <td>
            <button style="height:40px;width:70px" ">Delete</button>
            </td>
        </tr>
        </table>   
       </div>
  </div>     

    <script type="text/javascript">
        $(function () {
            $('#btnAdd').click(function () {
                $.ajax({
                    type: "POST",
                    data: $('form').serialize(),
                    url: '@Url.Action("CreateUser", "User")',
                    success: function (result) {
                        $('#cuscreate').html(result)
                    }
                });
            });

            return false; // <!-- That's the important bit 
        }); 
</script> 
```

感谢您的帮助非常感谢

问候库尔特**

# php - 没有 PHP 的电子邮件联系表

> ID：11419118
> 
> 赞同：8
> 
> 时间：2012-07-10T17:57:20.937
> 
> 标签：php, jquery, linux, forms, email

我想为我正在创建的网站使用联系表格，但 PHP 不是一个选项，因为客户不希望使用它。是否有一种聪明的方法可以通过发送电子邮件参数（这是非标准的）或者通过使用外部联系表格以某种方式解决这个问题？有没有不使用广告并且很容易修改为不同语言的好方法？

谢谢你。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2015-02-16T07:05:39.923

查看表格。

[https://github.com/asm-products/formspree](https://github.com/asm-products/formspree)

对于行动，您只需提出：

```
<form action="http://formspree.io/you@email.com" method="post">
<input type="text" name="name">
<input type="email" name="_replyto">
<input type="submit" value="Send"> 
```

在第一次发送后验证您的电子邮件后，这将通过电子邮件将表格的内容发送给您。要记住的一件事是，这将采用输入名称。如果您不包含输入名称，则不会向您发送该表单字段。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-10T18:01:13.220

有数百种可嵌入（最有可能`iframe`基于）联系表单的解决方案，这将使您能够使用像 PHP 这样的服务器端语言来解决问题。只是一个[快速的谷歌搜索](http://www.google.co.uk/?q=email%20form%20for%20site)会给你一些。

或者，您可以在 HTML 中制作一个表单，并有一个实际上是一个`mailto:`链接的提交按钮，并且您可以在表单输入更改时修改该 mailto 的参数。

唯一的缺点是它对用户来说并不方便，因为它打开了他们的电子邮件客户端，他们必须实际发送它。

就个人而言，我会尝试说服客户，但如果那是不可能的，那么这些就是你的选择。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2016-09-05T14:54:10.963

查看[www.enformed.io](http://www.enformed.io)。

有一些 formspree 没有的有趣选项（例如开箱即用的重定向和 html 电子邮件编辑器）。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-01-07T09:47:50.310

我使用了 Formspree，但 formspree 不允许 ajax，除非你有黄金版。它在基础上不起作用，所以我计划在 enformed.io 上创建一个帐户。我还没有使用它，但我听说它非常好。您还可以使用成功和错误消息的警报。

```
<form style="margin-left: 6%;" class="email" action="https://www.enformed.io/YOUR_TOKEN" method="post">
  <p>Name:</p>
  <input type="text" name="first_name" />
  <div id="margin" style="height: 0.5%;"></div>
  <p>E-mail:</p>
  <div id="margin" style="height: 0.5%;"></div>
  <input type="text" name="email" />
  <div id="margin" style="height: 0.5%;"></div>
  <p>Subject:</p>
  <div id="margin" style="height: 0.5%;"></div>
  <input type="text" name="subject" />
  <div id="margin" style="height: 0.5%;"></div>
  <p>Message:</p>
  <div id="margin" style="height: 0.5%;"></div>
  <textarea name="message"></textarea>
  <div id="margin" style="height: 0.5%;"></div>
  <button type="submit" class="btn btn-default">Submit Form</button>
</form>
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-10T17:59:59.540

像[mailto form](http://webdesign.about.com/od/forms/ss/how-to-create-a-simple-mailto-form.htm)这样简单的东西会起作用吗？

# php - Magento Store Community edition v1.7首页展示最佳产品

> ID：11419124
> 
> 赞同：0
> 
> 时间：2012-07-10T17:57:41.767
> 
> 标签：php, magento

我正在尝试在主页上显示演示商店社区版 v1.7 的最佳产品，首先我尝试从该链接[http://www.magentocommerce.com/magento-connect安装一个名为](http://www.magentocommerce.com/magento-connect/bestseller-products-7401.html)**Magento Bestseller Products Extension的扩展**[/bestseller-products-7401.html](http://www.magentocommerce.com/magento-connect/bestseller-products-7401.html)，但它没有用

所以我决定自己输出最好的产品，

为此，我创建了两个文件：

```
app/code/core/Mage/Catalog/Block/Product/MyBestSeller.php
app/design/frontend/default/my_theme/template/catalog/product/mybestseller.phtml 
```

我将此行添加到主页：

```
{{block type="catalog/product_mybestseller" template="catalog/product/mybestseller.phtml"}} 
```

然后我刷新了缓存

我的问题是什么都没有输出！在主页输出数据的方式是否正确？

这是 MyBestSeller.php 的代码

```
class Mage_Catalog_Block_Product_MyBestSeller extends Mage_Catalog_Block_Product_Abstract{
public function __construct()
{
    parent::__construct();

    $storeId    = Mage::app()->getStore()->getId();

    $products = Mage::getResourceModel('reports/product_collection')
        ->addAttributeToSelect('*')
        ->setStoreId($storeId)
        ->addStoreFilter($storeId)
        ->setOrder('ordered_qty', 'desc');

    Mage::getSingleton('catalog/product_status')->addVisibleFilterToCollection($products);
    Mage::getSingleton('catalog/product_visibility')->addVisibleInCatalogFilterToCollection($products);

    $products->setPageSize(6)->setCurPage(1);

    $this->setProductCollection($products);
} 
```

}

mybestseller.phtml 是这样开始的（我认为其余的代码并不重要，这就是我没有包含它的原因）：

```
<h2 style="background-color: red">from myestseller.phtml</h2><!-- just a test -->

<?php if (($_products = $this->getProductCollection()) && $_products->getSize()): ?>

<?php $_collectionSize = count($_products->getItems()) ?>
<table class="products-grid" id="products-grid-table">
<?php $i=1; foreach ($_products->getItems() as $_product): ?> 
```

在此先感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T15:07:44.810

最后我通过从 System->Tools->Compilation->Disable 关闭编译来解决我的问题

# mysql - 将 MySQL 解释计划转换为字符串

> ID：11419125
> 
> 赞同：-1
> 
> 时间：2012-07-10T17:57:44.893
> 
> 标签：mysql, explain, sql-execution-plan

我需要转换这个

```
+----+-------------+---------+------+---------------+------+---------+------+------+-------+
| id | select_type | table   | type | possible_keys | key  | key_len | ref  | rows | Extra |
+----+-------------+---------+------+---------------+------+---------+------+------+-------+
|  1 | SIMPLE      | prueba2 | ALL  | NULL          | NULL | NULL    | NULL | 9791 |       |
+----+-------------+---------+------+---------------+------+---------+------+------+-------+
1 row in set (0.03 sec) 
```

将字符串导入 mysql DBM 以在外部系统中读取此字符串。

我至少需要这部分作为字符串

```
|  1 | SIMPLE      | prueba2 | ALL  | NULL          | NULL | NULL    | NULL | 9791 |       | 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T19:28:08.557

您可以通过命令行将结果导出到文件中，但您需要对其进行解析并完全按照您的需要进行格式化：

```
mysql -e "EXPLAIN SELECT * FROM tbl" -D db -h host -u usr -p pwd > myfile.txt 
```

# jquery - html链接到页面顶部

> ID：11419135
> 
> 赞同：0
> 
> 时间：2012-07-10T17:57:58.870
> 
> 标签：jquery, html

我的页面上有许多链接，它们调用一些 jquery 代码来打开视频。页面上的链接列表可能会很长。当有人点击链接时，我希望它能够将您定位到视频打开的页面部分 ( `<div id="player">`)。我认为投入`<a href="#player"...`会奏效。我错过了什么？

```
<div id="player"></div>
<a href="#player" onclick="DoNav('<?php echo $url; ?>');"> <?php echo $result_videos[$i]["camera_name"]; ?> </a>

<script type="text/javascript">
function DoNav(theUrl)
{
  // only add the player if it doesn't yet exist
  if($('#myfileplayer').length == 0) {
    var mydiv = $("#player");
    var myvideo = $("<video id='myfileplayer' src='"+ theUrl + "' width='320' height='240' controls></video>");
    mydiv.append(myvideo);
  } else {
    $('#myfileplayer').attr("src",theUrl); 
  }

} 
</script> 
```

上面的代码有点适用于视频的第一次点击，尽管它会将您定位在视频播放器下方而不是顶部。第二次我在链接列表中单击一个，它根本没有做任何事情。

我还尝试`<a name="blah"></a>`在 div 上方添加（即 html4），然后将 href 更改为：`<a href="#blah"...`。那也行不通。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T18:09:25.277

如果我理解正确，您希望您的窗口在单击链接时滚动到 div#player 顶部？

然后您可以在打开视频时通过 jQuery 执行此操作

这样的事情应该可以解决问题：

```
$("yourLinkSelector").live('click', function(evnt){
    evnt.preventDefault();
    $('html, body').animate({scrollTop:$("div#player").offset().top - 50}, "slow");
    //then your code to open the video
}); 
```

# android - 使用 AnimationUtils.loadAnimation 在 Android 中淡入文本

> ID：11419141
> 
> 赞同：7
> 
> 时间：2012-07-10T17:58:04.310
> 
> 标签：android, android-animation

如果有人能向我解释为什么这样做，我将不胜感激：

```
private void startAnimating() {
    TextView logo1 = (TextView) findViewById(R.id.Shizzle);   
        final Animation fade1 = new AlphaAnimation(0.0f, 1.0f);  
        fade1.setDuration(3000);
        logo1.startAnimation(fade1);
        } 
```

但这对我根本不起作用：

```
private void startAnimating() {
    TextView logo1 = (TextView) findViewById(R.id.Shizzle);   
        Animation fade1 = AnimationUtils.loadAnimation(this,R.anim.fade_in);  
    logo1.startAnimation(fade1);    
    } 
```

与上面关联的fade_in.xml是：

```
 <?xml version="1.0" encoding="utf-8"?>
<set
    xmlns:android="http://schemas.android.com/apk/android"
    android:shareInterpolator="false">
    <alpha
        android:fromAlpha="0.0"
        android:toAlpha="1.0"
        android:duration="3000">
    </alpha> 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-04T06:22:27.983

**对我有用：在文件夹/res/anim** - **fadein.xml**，**fadeout.xml**中创建两个文件

 **淡入：

```
<?xml version="1.0" encoding="utf-8"?>
<set xmlns:android="http://schemas.android.com/apk/res/android"
    android:shareInterpolator="false" >

    <alpha
        android:duration="500"
        android:fromAlpha="0.0"
        android:toAlpha="1.0" >
    </alpha>

</set> 
```

消退：

```
<?xml version="1.0" encoding="utf-8"?>
<set xmlns:android="http://schemas.android.com/apk/res/android"
    android:shareInterpolator="false" >

    <alpha
        android:duration="200"
        android:fromAlpha="1.0"
        android:toAlpha="0.0" >
    </alpha>

</set> 
```

初始化代码：

```
Animation animFadeIn, animFadeOut;
...
animFadeIn=AnimationUtils.loadAnimation(this, R.anim.fadein);
animFadeOut=AnimationUtils.loadAnimation(this, R.anim.fadeout); 
```

... 使用：

```
case R.id.imgBtnShowContent:
    rlOrderBtns.startAnimation(animFadeIn);
    rlOrderBtns.setVisibility(View.VISIBLE);
break;

case R.id.imgBtnHideContent:
    rlOrderBtns.startAnimation(animFadeOut);
    rlOrderBtns.setVisibility(View.INVISIBLE);
break; 
```**

# ruby-on-rails - 如何在 Rails 3 中验证日期？以及为什么 validate 看到 Date 而不是 String

> ID：11419142
> 
> 赞同：0
> 
> 时间：2012-07-10T17:58:15.477
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我正在尝试编写一个日期验证器。我遇到的问题是我的验证器将 date_of_birth 视为 Date 对象，但它被设置为字符串。(1) 为什么在应用验证之前将其视为日期而不是字符串，以及 (2) 我应该怎么做才能将其读取为字符串而不是日期。我遇到的问题是我想接受`%m/%d/%Y`日期，但是当我输入 2010 年 7 月 5 日时，我将其转换为日期，其中将 05 视为月份，将 07 视为日期。我正在使用 Devise，所以我不确定它是否对控制器中的日期有任何影响，我对此表示怀疑。

```
class User < ActiveRecord::Base
  devise :database_authenticatable, :registerable,
         :recoverable, :rememberable, :trackable, :validatable

  # Setup accessible (or protected) attributes for your model
  attr_accessible :email, :first_name, :last_name, :password, :password_confirmation, :remember_me, :address, :date_of_birth, as: [:default, :admin]
  attr_accessible :active, :role, as: [ :admin ]

  validates_presence_of :email, :first_name, :last_name, :address
  validate :valid_date_of_birth

  def date_of_birth=(date_of_birth)
    Rails.logger.info("set date_of_birth: #{date_of_birth}")
    Rails.logger.info("set date_of_birth class: #{date_of_birth.class}")
    self[:date_of_birth] = date_of_birth
  end

  private
  def valid_date_of_birth
    Rails.logger.info "the date of birth: #{date_of_birth}"
    Rails.logger.info "the date of birth class: #{date_of_birth.class}"
    errors.add(:date_of_birth, 'must be a valid datetime') if ((DateTime.strptime(date_of_birth, "%m/%d/%Y") rescue ArgumentError) == ArgumentError)
  end
end 
```

所以，设置 date_of_birth，我得到 String。 `valid_date_of_birth`将其视为 Date，即 date_of_birth 的 DB 类型。我在这里做错了什么使这变得过于复杂吗？我唯一的选择是维护一个额外的字符串字段吗？这如何与编辑一起工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T19:16:29.957

如果您的**date_of_birth**属性是从参数/表单中设置的 - 那么它会以**String**的形式出现。问题出现在它被设置为对象的地方——它被转换为数据库中对象的数据类型。

因此，在您的**users_controller**中的**create**操作中： **params[:user][:date_of_birth]**以字符串形式出现

但是，只要将其设置为用户对象： **@user.date_of_birth = params[:user][:date_of_birth]** ## 它就会转换为数据库中的类型（日期类型）。

解决方案： 1）在分配之前验证控制器中的date_of_birth。2）在分配给用户对象之前，为 date_of_birth_input 定义一个 attr_accessor 并在模型中进行验证，就像您目前正在做的那样。

# java - 守护进程和脚本的 CAS 身份验证

> ID：11419143
> 
> 赞同：2
> 
> 时间：2012-07-10T17:58:15.697
> 
> 标签：java, ruby, cas, rubycas

我们正在使用[CAS](http://www.jasig.org/cas/)为我们的许多 Java 和 Ruby 应用程序提供身份验证。我们的大多数 Ruby 应用程序都是带有 Java 的 Web 应用程序，通过 API 提供后端服务。我们使用代理授予票证对 API 的所有请求进行身份验证。当用户登录 Web 应用程序、请求代理授权票并将其传递给后端 API 时，这非常有用。[这里](https://wiki.jasig.org/display/CAS/Proxy+CAS+Walkthrough)有一个很好的过程概述。

问题是当我们有一个想要访问 API 的守护进程或 rake 任务时会发生什么？守护程序或 rake 任务能够通过登录票证和提供有效凭据对 CAS 服务器进行身份验证，但是如果没有守护程序或 rake 任务侦听端口以供 CAS 回调，则无法生成代理授予票证。有没有人遇到过这个问题，你是如何解决的？也欢迎提出一般性建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T16:37:08.970

I think that you can use the CAS REST API to get a granting ticket and then a service ticket to pass it to your backend services : [https://wiki.jasig.org/display/CASUM/RESTful+API](https://wiki.jasig.org/display/CASUM/RESTful+API). Best regards, Jérôme

# mysql - 为具有相同 ID 的多行选择不同的值

> ID：11419145
> 
> 赞同：5
> 
> 时间：2012-07-10T17:58:20.790
> 
> 标签：mysql, sql

我有一个看起来像这样的表：

```
ID | FIELD_NAME   | VALUE
23 |  sign_up     |  yes
23 |  first_name  |  Fred
23 |  street      |  Barber Lane
24 |  sign_up     |  no
24 |  first_name  |  Steve
24 |  street      |  Camaro St.
25 |  sign_up     |  yes
25 |  first_name  |  Larry
25 |  street      |  Huckleberry Ave 
```

我想运行一个查询，它将选择唯一 ID 和值作为命名列，因此它看起来像这样：

```
ID   |   SIGN_UP   | FIRST_NAME  |  STREET           |
23   |     yes     |    Fred     |  Barber Lane      |
24   |     no      |    Steve    |  Camaro St.       |
25   |     yes     |    Larry    |  Huckleberry Ave. | 
```

任何帮助将非常感激！！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-10T18:10:02.260

您可以使用这个简单的解决方案：

```
SELECT DISTINCT
    a.id,
    b.value AS SIGN_UP,
    c.value AS FIRST_NAME,
    d.value AS STREET
FROM tbl a
LEFT JOIN tbl b ON a.id = b.id AND b.field_name = 'sign_up'
LEFT JOIN tbl c ON a.id = c.id AND c.field_name = 'first_name'
LEFT JOIN tbl d ON a.id = d.id AND d.field_name = 'street' 
```

为了安全起见，我做了 joins`LEFT JOIN`因为我不知道 id 是否可以*缺少*字段，在这种情况下，它们将显示`NULL`在我们的派生列中。

* * *

[SQL-Fiddle 演示](http://sqlfiddle.com/#!3/bd3c2/2/0)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-10T19:31:15.947

You could also try pivoting with the help of grouping and conditional aggregating:

```
SELECT
  ID,
  MAX(CASE FIELD_NAME WHEN 'sign_up'    THEN VALUE END) AS SIGN_UP,
  MAX(CASE FIELD_NAME WHEN 'first_name' THEN VALUE END) AS FIRST_NAME,
  MAX(CASE FIELD_NAME WHEN 'street'     THEN VALUE END) AS STREET
FROM atable
GROUP BY
  ID
; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-10T19:17:21.660

改编自我的[另一个答案](https://stackoverflow.com/a/11332913/1468366)：

```
SELECT ids.ID AS ID,
       sign_up.VALUE AS SIGN_UP,
       first_name.VALUE AS FIRST_NAME,
       street.VALUE AS STREET
FROM (SELECT DISTINCT ID FROM tableName) AS ids
     LEFT JOIN tableName AS sign_up
            ON (sign_up.ID = ids.ID AND
                sign_up.FIELD_NAME = 'sign_up')
     LEFT JOIN tableName AS first_name
            ON (first_name.ID = ids.ID AND
                first_name.FIELD_NAME = 'first_name')
     LEFT JOIN tableName AS street
            ON (street.ID = ids.ID AND
                street.FIELD_NAME = 'street') 
```

The left joins will ensure that missing values will result in `NULL` cells, instead of an omission of the whole row. Not sure whether that is important in your application. If it is not, you can use an inner join and in particular get rid of the subquery to select all unique IDs. See my [original answer](https://stackoverflow.com/a/11332913/1468366) from which I derived this.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-10T18:06:32.653

我不确定 MySQL 中是否有 Pivot/Unpivot 功能。试试这个：

```
SELECT a.ID, 
       c.FIELD_NAME AS SIGN_UP,
       a.FIELD_NAME AS FIRST_NAME,
       b.FIELD_NAME AS STREET

  FROM <YOUR-TABLE> a LEFT JOIN <YOUR-TABLE> b
        ON a.ID = b.ID 
     AND a.FIELD_NAME = 'first_name'
     AND b.FIELD_NAME = 'street' LEFT JOIN <YOUR-TABLE> c
        ON c.ID = a.ID
     AND c.FIELD_NAME = 'sign_up' 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-10T18:11:04.477

一种方法是使用相关子查询将每个字段值作为列返回，

```
SELECT t.id
     , (SELECT f1.value FROM mytable f1 
         WHERE f1.id = t.id AND f1.field_name = 'sign_up' 
         ORDER BY f1.value LIMIT 1
       ) AS SIGN_UP
     , (SELECT f2.value FROM mytable f2 
         WHERE f2.id = t.id AND f2.field_name = 'first_name' 
         ORDER BY f2.value LIMIT 1
       ) AS FIRST_NAME
     , (SELECT f3.value FROM mytable f3 
         WHERE f3.id = t.id AND f3.field_name = 'street'
         ORDER BY f3.value LIMIT 1
       ) AS STREET
  FROM (SELECT s.id
          FROM mytable s
         GROUP BY s.id
         ORDER BY s.id
       ) t 
```

这不是唯一的方法，但它是一种可行的方法，特别是如果您担心您将得到恰好返回的四列，并且它们将以特定的顺序返回。

请注意，当特定 ID“缺少”特定字段名称时，此方法有效（它将返回 NULL 代替值）。如果特定 ID 多次出现相同的 field_name，它也可以工作。（此查询将只返回其中一个，而忽略另一个。）

同样的结果集也可以通过这样的查询获得：

```
SELECT t.id          AS ID
     , f1.sign_up    AS SIGN_UP
     , f2.first_name AS FIRST_NAME
     , f3.street     AS STREET       
  FROM (SELECT s.id
          FROM mytable s
         GROUP BY s.id
         ORDER BY s.id
       ) t
   LEFT      
   JOIN (SELECT s1.id
              , MIN(s1.value) AS sign_up
           FROM mytable s1
          WHERE s1.field_name = 'sign_up'
            AND s1.value IS NOT NULL 
          GROUP BY s1.id
        ) f1
     ON f1.id = t.id   
   LEFT
   JOIN (SELECT s2.id
              , MIN(s2.value) AS first_name
           FROM mytable s2
          WHERE s2.field_name = 'first_name'
            AND s2.value IS NOT NULL
          GROUP BY s2.id
        ) f2
     ON f2.id = t.id
   LEFT
   JOIN (SELECT s3.id
              , MIN(s3.value) AS street
           FROM mytable s3
          WHERE s3.field_name = 'street'
            AND s3.value IS NOT NULL
          GROUP BY s3.id
        ) f3
     ON f3.id = t.id 
```

对于其他查询，请确保在`field_name`给定 ID“缺少”a、给定 ID 有重复项`field_name`或表中存在您不关心的其他 field_name 值时获得所需的行为。

# visual-c++ - 如何在Windows应用程序中将键盘快捷键“全选”（CTRL + A）映射到“选择待办事项”（CTRL + E）？

> ID：11419146
> 
> 赞同：0
> 
> 时间：2012-07-10T17:58:21.110
> 
> 标签：visual-c++

我的桌面应用程序正在使用快捷方式 (CTRL+A) 从当前焦点窗口中选择所有文本。我的应用程序以不同的本地化运行，包括西班牙语。但在西班牙语中，它不是使用 (CTRL+A) 来选择所有文本。(CTRL+A) 在西班牙语中是“打开的”。“CTRL+E”用于从西班牙语（记事本）中选择所有文本。谁能告诉我如何在 Windows 桌面应用程序中映射这两个快捷方式？（操作系统：Windows XP、Windows 7（32 和 64）位）

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T18:00:56.493

您可以拥有多个快捷键表资源，每个语言环境一个。资源编辑器应该允许您将每个快捷键表分配给特定的语言环境。

[该文档](http://msdn.microsoft.com/en-us/library/windows/desktop/gg153544%28v=vs.85%29.aspx)特别提到本地化是加速器表的一个好处。

# xaml - 方向更改后列表框内控件的宽度不变

> ID：11419149
> 
> 赞同：0
> 
> 时间：2012-07-10T17:58:26.820
> 
> 标签：xaml, layout, windows-phone-7.1, device-orientation

我在列表框内的堆栈面板中有一个网格。这个网格有一些控制元素，如矩形和文本块。它们在纵向上延伸到整个宽度，但在横向上却没有。

[模拟器快照](http://techcrank.com/adityamoghe/Image.png)

这是 XAML：

```
<ListBox Name="PassList" VerticalAlignment="Stretch" HorizontalAlignment="Stretch">

                        <ListBox.ItemTemplate>
                            <DataTemplate>
                                <StackPanel HorizontalAlignment="Stretch">
                                    <Grid Name="StackPanelWidth" Width="{Binding ElementName=PassList, Path=ActualWidth}">
                                        <Grid.RowDefinitions>
                                            <RowDefinition Height="40"/>
                                            <RowDefinition Height="40"/>
                                            <RowDefinition Height="40"/>
                                            <RowDefinition Height="40"/>
                                            <RowDefinition Height="20"/>
                                        </Grid.RowDefinitions>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="10"/>
                                            <ColumnDefinition Width="{Binding ElementName=StackPanelWidth, Path=ActualWidth}"/>
                                            <ColumnDefinition Width="10"/>
                                        </Grid.ColumnDefinitions>

                                        <Rectangle Fill="White"
                                                   Grid.Row="0"
                                                   Grid.Column="1"
                                                   HorizontalAlignment="Stretch"
                                                   VerticalAlignment="Stretch"
                                                   RadiusX="10"
                                                   RadiusY="10"
                                                   />

                                        <Rectangle Fill="White"
                                                   Grid.Row="0"
                                                   Grid.Column="1"
                                                   HorizontalAlignment="Stretch"
                                                   VerticalAlignment="Stretch"
                                                   Margin="0,10,0,0"
                                                   />

                                        <Rectangle Fill="DarkGray"
                                                   Grid.Row="0"
                                                   Grid.Column="1"
                                                   Height="1"
                                                   VerticalAlignment="Bottom"
                                                   />

                                        <TextBlock Name="Country"
                                                   Grid.Row="0"
                                                   Grid.Column="1"
                                                   HorizontalAlignment="Left"
                                                   Margin="10,0,0,0"
                                                   VerticalAlignment="Center"
                                                   Text="{Binding Country}"
                                                   Foreground="Black"
                                                   FontWeight="Bold"
                                                   />

                                        .............
                                        .............

                                    </Grid>
                                </StackPanel>
                            </DataTemplate>
                        </ListBox.ItemTemplate>
                    </ListBox> 
```

我的代码有什么问题吗？任何帮助将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T09:15:48.917

你为什么做这个？

<Grid.ColumnDefinitions> <ColumnDefinition Width="10"/> <ColumnDefinition Width="{Binding ElementName=StackPanelWidth, Path=ActualWidth}"/> <ColumnDefinition Width="10"/> </Grid.ColumnDefinitions>

在这里，您以某种方式指定了宽度，因此它没有调整大小。

此外，stackpanel 将自动调整到其子宽度，因此如果您尝试这样做，则无需指定绑定。

# caching - 使用 symfony2 clear cache 命令不刷新静态资产

> ID：11419151
> 
> 赞同：13
> 
> 时间：2012-07-10T17:58:32.060
> 
> 标签：caching, symfony, sass, compass-sass, assetic

我正在使用带有罗盘过滤器的 Assetic 来传递和编译 .scss 文件。这部分设置似乎工作正常。然而，我的理解是，在 app_dev 环境中，Symfony 2 将为每个页面加载重新编译所有资产（包括 css），而不使用它用于 prod 环境的缓存系统。

这似乎没有发生。

当我对 .scss 文件进行更改时，它只有在我使用时才会生效：

```
 app/console cache:clear 
```

我认为开发环境的重点是避免每次都这样做？！

我已经检查了缓存文件夹的权限（为了安全起见，我已经设置它们以便任何人都可以读写）。有人有什么建议吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-12T10:11:44.833

如果您在开发中使用 symfony 2 资产。环境，只需使用[以下命令](http://symfony.com/doc/2.1/cookbook/assetic/asset_management.html#dumping-asset-files-in-the-dev-environment)：

```
php app/console assets:install
php app/console assetic:dump --watch 
```

由于版本 2.4[`--watch`已弃用](https://github.com/symfony/AsseticBundle/commit/33532c75b898f4b658a315dfb6047868455afb5e)，并已替换为：

```
php app/console assetic:watch 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-07-11T10:52:55.280

我想我在这里找到了答案：

[资产指南针过滤器，更改导入文件时css不更新（谷歌小组讨论）](https://groups.google.com/forum/?fromgroups#!topic/symfony2/l8P3W22dUqw)

似乎如果对导入的文件进行了更改而不对父文件进行任何更改，则不会重新编译父文件。在您强制重新编译之前，不会看到更改的结果。

谷歌组的海报通过编辑 AsseticController 提出了一个可能的修复（hack！）。我还没有尝试过，但即使它有效，我也不想编辑供应商包。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-10T18:11:10.367

资产编译不是缓存系统的一部分。无论环境如何，您都需要在进行更改时重新安装资产。

```
app/console assets:install web 
```

如果您所在的文件系统支持符号链接，您可以避免每次更改都运行此命令，而只需安装资产

```
app/console assets:install web --symlink 
```

但是由于您使用的是 Sass，因此这可能不适合您。

高温高压

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-11-01T14:49:40.103

我知道这是一个老话题，但我唯一能接受的答案是 CompassElephantBundle 和上面的 AsseticController hack。我有一种方法，本质上但意味着我不必编辑供应商包。

我这样做的方法是编辑复制原始 AsseticController，然后从参数链接到配置中的那个。

```
parameters:
    assetic.controller.class: Acme\RandomBundle\Controller\AsseticController 
```

复制的 AsseticController 只是对源路径中的文件类型进行 preg_match 并从那里更正缓存。

```
<?php

/* Original Assetic Controller */

public function render($name, $pos = null)
{
    if (!$this->enableProfiler && null !== $this->profiler) {
        $this->profiler->disable();
    }

    if (!$this->am->has($name)) {
        throw new NotFoundHttpException(sprintf('The "%s" asset could not be found.', $name));
    }

    $asset = $this->am->get($name);
    if (null !== $pos && !$asset = $this->findAssetLeaf($asset, $pos)) {
        throw new NotFoundHttpException(sprintf('The "%s" asset does not include a leaf at position %d.', $name, $pos));
    }

    $bustCache = preg_match('/\.(scss|sass|less)$/', $asset->getSourcePath());

    $response = $this->createResponse();
    $response->setExpires(new \DateTime());

    if ($bustCache) {
        $lastModified = time();
        $date = new \DateTime();
        $date->setTimestamp($lastModified);
        $response->setLastModified($date);
    }
    else
    {
        // last-modified
        if (null !== $lastModified = $asset->getLastModified()) {
            $date = new \DateTime();
            $date->setTimestamp($lastModified);
            $response->setLastModified($date);
        }
    }

    // etag
    if ($this->am->hasFormula($name)) {
        $formula = $this->am->getFormula($name);
        $formula['last_modified'] = $lastModified;
        $response->setETag(md5(serialize($formula)));
    }

    if ($response->isNotModified($this->request)) {
        return $response;
    }

    if ($bustCache) {
        $response->setContent($asset->dump());
    }
    else {
        $response->setContent($this->cachifyAsset($asset)->dump());
    }

    return $response;
}

/* Rest of controller */ 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-01-10T16:06:17.577

我已经在本地开发中解决了这个问题，在我的 parameters.yml 末尾添加了一行，这基本上阻止了任何资产缓存的发生。

```
# parameters.yml
...

assetic.cache.class: Assetic\Cache\ArrayCache 
```

这**不**应该包含在生产环境中，因为我们希望缓存发生！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-06-19T08:10:08.277

我用不同的方式。我在开发过程中添加了所有 .scss 文件

```
 {% block stylesheets %}
        {% stylesheets filter='?uglifycss' filter='cssrewrite' filter="compass"
            "@TESTSSassBundle/Resources/public/css/_vars.scss" <-- this will be removed
            "@TESTSSassBundle/Resources/public/css/main.scss"
            "@TESTSSassBundle/Resources/public/css/header.scss"
            "@TESTSSassBundle/Resources/public/css/footer.scss"
         %}
            <link rel="stylesheet" href="{{ asset_url }}" />
        {% endstylesheets %}
    {% endblock %} 
```

在我完成开发后，我将它们删除。这样我就不需要清除我的缓存和添加/更改任何设置。它总是对我有用。

# jquery - 谷歌图片 API

> ID：11419157
> 
> 赞同：5
> 
> 时间：2012-07-10T17:59:04.547
> 
> 标签：jquery, image, api

我需要通过 url 在 Google 图片上搜索图片，所有这些我都需要在 jQuery 上完成。它的外观：我设置图像 url 和脚本返回图像 url 和标题。但我有一个问题，在 google api 中我没有找到如何通过图像 url 运行搜索。我看到[https://ajax.googleapis.com/ajax/services/search/images?q=Google](https://ajax.googleapis.com/ajax/services/search/images?q=Google)这个，但在 api 中没有关于使用图像 url 的说法。然后我希望我可以加载简单的谷歌图片搜索，并在谷歌搜索图片网址中替换我的图片网址，但谷歌编码图片网址。请帮忙。对不起，我的英语不好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-18T16:07:55.863

我意识到这是一个非常古老的问题，但我认为这里的这篇文章很好地解释了需要发生的事情： [Google Image Search How Do I Construct A Reverse Image Search URL](https://stackoverflow.com/questions/7584808/google-image-search-how-do-i-construct-a-reverse-image-search-url)

# c - 新手：将 getch() 的输入转换为 int

> ID：11419160
> 
> 赞同：0
> 
> 时间：2012-07-10T17:59:25.917
> 
> 标签：c

```
// get user's input
int ch = getch();

switch (ch)
    {
        //input a number
        case '1':
        case '2':
        case '3':
        case '4':
        case '5':
        case '6':
        case '7':
        case '8':
        case '9':
            {

            int i = atoi(ch);

            g.board[g.y][g.x] = i;

            }
} 
```

在我要添加的代码中，ch 被声明为 int。但是，函数 getch 将输入保存为字符串，对吗？如何将字符串 ch 转换为 int 以便我可以使用它？我尝试使用 atoi() 函数，但不断收到这些错误消息。

```
sudoku.c: In function 'main':
sudoku.c:247:17: error: passing argument 1 of 'atoi' makes pointer from integer without a cast [-Werror]
/usr/include/stdlib.h:148:12: note: expected 'const char *' but argument is of type 'int'
sudoku.c:252:17: error: expected ';' before 'g'
sudoku.c:244:21: error: unused variable 'y' [-Werror=unused-variable]
cc1: all warnings being treated as errors 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-10T18:01:27.837

> 函数 getch 将输入保存为字符串，对吗？

不，`getch`读取一个字符并返回一个 int （您确实正确定义`ch`为`int`）。将其转换为实整数的最简单方法是减去`'0'`. 因此，在验证之后`getch`，您可以将大部分代码替换为：

```
if (isdigit(ch))
    g.board[g.y][g.x] = ch - '0'; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-10T18:01:46.977

尝试以下

```
int i = (int)((char)ch - '0'); 
```

数字 0-9 以字符代码的升序排列。因此，从值中减去“0”`char`将产生一个等于实际数字的偏移量

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-10T18:01:47.020

`atoi`需要一个 C 字符串（一个`\0`/nul 终止的字符串）。在您的示例中，您传递给它一个字符。

相反，利用 ASCII 表格布局的好处：

```
/* Assuming (ch >= '0' && ch <= '9') */
int value = ch - '0';
/* Borrows from the fact that the characters '0' through '9' are laid
   out sequentially in the ASCII table. Simple subtraction allows you to 
   glean their number value.
 */ 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-10T18:14:17.650

```
 int i = atoi(ch); 
```

替换下面的代码

```
int i = atoi((const char *)&ch); 
```

你可以在手册中找到这个（Linux）

```
# man atoi 
```

原型是

```
#include <stdlib.h>

int atoi(const char *nptr); 
```

# ios - iOS 应用程序中的内置 SSH 终端/控制台？

> ID：11419166
> 
> 赞同：1
> 
> 时间：2012-07-10T17:59:52.620
> 
> 标签：ios, ssh, terminal

在 SO 和 Google 中搜索，但没有发现任何有用的东西。
在我的 iOS 应用程序中实现 SSH 控制台的最简单方法是什么？

已经有很多应用程序这样做了，比如[SSH Terminal](http://itunes.apple.com/us/app/ssh-terminal/id369875227?mt=8)或[Diet Coda](http://itunes.apple.com/us/app/diet-coda/id500906297?mt=8)，但我想知道是否有开源组件或任何类似性质的东西我可以直接放入我的项目中，如果没有 - 任何你可以指出我的资源建立我自己的实现将不胜感激。

**更新：**到目前为止，我只从 Chilkat 找到了一个解决方案，但不幸的是，单个开发人员许可证的成本高达 150 美元......欢迎任何其他建议。

# c# - 使用 Windows 身份验证从 C# 应用程序调用 ASMX 服务？

> ID：11419175
> 
> 赞同：2
> 
> 时间：2012-07-10T18:00:16.677
> 
> 标签：c#, .net, authentication, asmx

我创建了从 .NET Web 应用程序调用的简单 .NET Web 服务 (ASMX)。该服务和 Web 应用程序都使用 Windows 身份验证。

```
com.mydomain.MyWebService webSrvc = new com.mydomain.MyWebService();
string output = webSrvc.MyServiceMethod(); 
```

我现在正在使用 C# 创建 Windows 应用程序，并希望从那里调用相同的 Web 服务。我在我的项目中向服务添加了一个 Web 引用，我可以毫无问题地调用服务 Web 方法。问题是，在 web 方法中，我试图检索用户的 windows 用户名。

```
string username = User.Identity.Name; //always blank 
```

这在我从我的网络应用程序调用网络服务时有效，但是当我从我的 Windows 应用程序调用它时，它总是返回空白，并且 User.Identity.IsAuthenticated 总是假的，如果这是相关的。我在这里想念什么。我只需要获取运行控制台应用程序（称为 Web 服务）的 Windows 用户用户名。我尝试将 webSrvc 的凭据设置为 ClientCache 默认凭据，但这并不能解决问题。

更新：我不知道这是否有用，但我了解到，如果我使用 Environment.UserName，它将给出“NETWORK_SERVICE”，然后如果我启用模拟，它将给出“IUSR_[host_name]”。好像我只是错过了一些非常简单的东西。我只想获取正在运行 Windows 应用程序（调用 Web 服务）的当前 Windows 用户。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-05T10:31:39.357

放

```
UseDefaultCredentials = true; 
```

这将验证当前用户（或当前进程正在运行的帐户）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T18:57:12.757

您是否在调用它之前将网络凭据传递给您的 Web 服务对象？就像是：

```
NetworkCredential credentials = new
NetworkCredential(UserName,SecurelyStroredPassword,Domain);

// Add the NetworkCredential to the CredentialCache.
credentialCache.Add(new Uri(webSrvc.Url), 
                   "Basic", credentials); 
```

抄自：http: [//msdn.microsoft.com/en-us/library/bfazk0tb.aspx](http://msdn.microsoft.com/en-us/library/bfazk0tb.aspx)

基本上，当从 Web 应用程序调用 Web 服务时，您已经拥有所有 cookie 和会话信息。当你编写一个独立的应用程序时，它将无法访问 cookie、表单数据等。

# android - 将视图放置在带有叠加层的操作栏下方

> ID：11419179
> 
> 赞同：19
> 
> 时间：2012-07-10T18:00:34.637
> 
> 标签：android, android-actionbar, actionbarsherlock

我想在带有[叠加层](http://wagagate.appspot.com/EfrpZdqgurlgZghyhorshu/http/reference/android/R.attr.html#windowActionBarOverlay)的操作栏下方放置一个视图。有没有办法通过 XML 布局做到这一点？

我想避免使用常量，因为已经至少有[4 个可能的值](https://stackoverflow.com/a/7181591/143378)，而且这个数字可能会增长。

[与ActionBarSherlock](http://actionbarsherlock.com/)的兼容性是一个加号。

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-07-10T18:39:06.567

`android:layout_marginTop="?attr/actionBarSize"`

这将根据屏幕配置自动考虑大小的变化。您可以在 ActionBarSherlock 附带的“Demos”示例的“Overlay”示例中看到它的使用演示。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-10T18:43:08.143

如果您正在处理配置更改，杰克沃顿的[回答](https://stackoverflow.com/a/11419742/143378)不起作用。

这就是我通过代码解决这个问题的方法，以防它帮助任何人：

```
@Override
public void onWindowFocusChanged(boolean hasFocus) {
    super.onWindowFocusChanged(hasFocus);
    layoutTheView();
}

@Override
public void onConfigurationChanged(Configuration newConfig) {
    super.onConfigurationChanged(newConfig);
    layoutTheView();
}

private void layoutTheView() {
    ActionBar actionBar = this.getSupportActionBar();
    ViewGroup.MarginLayoutParams params = (ViewGroup.MarginLayoutParams) mTheView.getLayoutParams();
    int actionBarHeight = actionBar.getHeight();
    params.setMargins(0, actionBarHeight, 0, 0);
    mTheView.setLayoutParams(params);
    mTheView.requestLayout();
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-06-24T12:15:22.250

使用填充顶部

android:paddingTop="50dp"

# c# - 在 Metro 应用程序中将网格视图的每一列分配给不同的宽度

> ID：11419180
> 
> 赞同：2
> 
> 时间：2012-07-10T18:00:37.207
> 
> 标签：c#, xaml, windows-8, windows-runtime

我正在使用 C# 和 XAML 开发 Metro 应用程序，我坚持使用网格视图，默认情况下，我的网格视图由多个网格组成，网格视图为所有网格分配相等的宽度，但我想为每个网格提供不同的宽度。示例代码是以下

```
<GridView x:Name="ObjGridView">
            <Grid Background="Black" Height="400" Width="464">

            </Grid>
            <Grid Background="Blue" Height="400" Width="464">

            </Grid>
            <Grid Background="Blue" Height="400" Width="464">

            </Grid>
         <!--Up to n Grids-->
</GridView> 
```

那么，有没有办法手动为网格指定宽度，或者可以更改网格视图的列宽。请帮我。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T18:08:38.403

也许这可以解决您的问题：

[如何：创建可变大小的分组 GridView（如商店）](http://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/966aa897-1413-46f0-bef7-663de36f9423)

[在msdn上讨论这个](http://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/21d227cf-feec-4c32-a01e-257ac1e81643/)

# cuda - 在 CUDA Profiler 的命令行模式下获取 DRAM_Reads 和 DRAM_Writes

> ID：11419184
> 
> 赞同：0
> 
> 时间：2012-07-10T18:01:09.613
> 
> 标签：cuda, profiler

我正在尝试在命令行中使用 CUDA Profiler；我对 DRAM_Reads 和 DRAM_Writes 感兴趣 - 我在我的 CUDA_PROFILE_LOG 文件中提供了以下计数器：

```
fb_subp0_read_sectors
fb_subp0_write_sectors
fb0_subp0_read_sectors
fb0_subp0_write_sectors
fb1_subp0_read_sectors
fb1_subp0_write_sectors 
```

但我注意到在我的 cuda_profile 文件中，有如下错误：

```
NV_Warning: Ignoring the invalid profiler config option: fb0_subp0_read_sectors
NV_Warning: Ignoring the invalid profiler config option: fb0_subp0_write_sectors
NV_Warning: Ignoring the invalid profiler config option: fb1_subp0_read_sectors
NV_Warning: Ignoring the invalid profiler config option: fb1_subp0_write_sectors 
```

我从 fb_subp0_read_sectors 和 fb_subp0_write_sectors 计数器获得的值不等于我从 NVidia Visual Profiler 获得的值，这可能是因为我没有将正确的计数器传递给配置文件。GPU是Tesla M2050，使用的是CUDA 4.1。如何在命令行中获取 DRAM_Reads 和 DRAM_Writes？

编辑：在做了一些阅读之后，我认为 GPU 可以有 fb0/1... 或 fb... 计数器。但即使我有：

```
fb_subp0_read_sectors
fb_subp0_write_sectors
fb_subp1_read_sectors
fb_subp1_write_sectors 
```

我收到警告：

```
NV_Warning: Counter 'fb_subp1_read_sectors' is not compatible with other selected counters and it cannot be profiled in this run.
NV_Warning: Counter 'fb_subp1_write_sectors' is not compatible with other selected counters and it cannot be profiled in this run. 
```

谢谢，萨扬

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T03:49:28.593

Not all counters can be profiled in a single run, due to hardware constraints.

According to the warning message, you may try profiling the first two counters in the first run, and then the last two in the second run.

# php - 如何使用涉及 cookie 的 PHP 制作 Curl 帖子

> ID：11419185
> 
> 赞同：2
> 
> 时间：2012-07-10T18:01:10.827
> 
> 标签：php, curl

我正在开发一个涉及 Php Curl 的脚本，以使用[http://www.gysms.com/freesms.php](http://www.gysms.com/freesms.php)发送短信。 该页面存储一个 cookie PHPSESSID，并且在发布期间传递了一个名为 token 的隐藏字段。

我编写了一个涉及两个 curl 请求的脚本。第一个 curl 请求解析页面并获取令牌值。

这是代码：

```
<?php

$phone = '9197xxxxxxx';
$msg = 'Hi this is curlpost';
$get_cookie_page = 'http://www.gysms.com/freesms.php';

$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, $get_cookie_page);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
$sabin = curl_exec($ch);
$html=explode('<input  type="hidden" name="trigger" value="',$sabin);
$html=explode('"/>',$html[1]);
//store the token value to $html[0]
?> 
```

卷发是使用以下代码完成的：

```
<?php
$fields = array(
                            'trigger'=>urlencode($html[0]), //token value
                            'number'=>urlencode($phone),  //phone no
                            'message'=>urlencode($msg) //message

                );

//posting curl request
foreach($fields as $key=>$value) { $fields_string .= $key.'='.$value.'&'; }
rtrim($fields_string,'&');
$url = 'http://www.gysms.com/freesms.php';
curl_setopt($ch, CURLOPT_URL, $url);
curl_setopt($ch, CURLOPT_POST, true);
curl_setopt($ch, CURLOPT_POSTFIELDS, $fields_string);
curl_setopt($ch, CURLOPT_COOKIEJAR, 'cookie.txt');
curl_setopt($ch, CURLOPT_COOKIEFILE, 'cookie.txt');

//execute post
$result = curl_exec($ch);
echo $result;
curl_close($ch);
?> 
```

使用上面的代码没有发送短信。如果发送短信它应该显示短信发送到 - 否。我不知道我哪里出错了。请帮忙，我是 PHP 新手。最后，此尝试仅用于我的教育目的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T18:49:45.430

这是我想出的一些有效的代码。希望能帮助到你。以下是有关您的代码的一些解释和反馈。

```
<?php

$number     = '14155556666';
$message    = 'This is my text in all its glory.';

$url        = 'http://www.gysms.com/freesms.php';
$cookieFile = tempnam(null, 'SMS');
$userAgent  = 'Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:11.0) Gecko/20100101 Firefox/11.0';

if (strlen($message) > 100) {
    die('Message length cannot exceed 100 characters.');
}

$ch = curl_init($url);
curl_setopt($ch, CURLOPT_COOKIEFILE, $cookieFile);
curl_setopt($ch, CURLOPT_COOKIEJAR,  $cookieFile);
curl_setopt($ch, CURLOPT_USERAGENT,  $userAgent); // empty user agents probably not accepted
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 1);
curl_setopt($ch, CURLOPT_AUTOREFERER,    1); // enable this - they check referer on POST

$html = curl_exec($ch);

// <input  type="hidden" name="trigger" value="CXXrtmqVC7KbUnJ22UBodFy1kBj4ign5PsQ3qNR91nH2055307b4xP4"/>
if (!preg_match('/name=.trigger.\s+value=.([^\'"]+)/i', $html, $trigger)) {
    die('Failed to locate hidden input value');
}

sleep(5);  // without a slight delay, i often would not receive sms

$trigger = $trigger[1];

// build array of post values - all are important
$post = array('number'  => $number,
              'trigger' => $trigger,
              'message' => $message,
              'remLen'  => 100 - strlen($message),
              $trigger  => 'Send Message');

// switch request to POST, use http_build_query to encode post data for us
curl_setopt($ch, CURLOPT_POST, 1);
curl_setopt($ch, CURLOPT_POSTFIELDS, http_build_query($post));

$html = curl_exec($ch);

if (strpos($html, '<b>Message sent to</b>') !== false) {
    echo "Message sent!";
} else {
    echo "<b>Message not sent :(</b><br /><br />";
    echo $html;
} 
```

我想你可能有几个原因：

*   应在请求中指定用户代理，如果您将其留空，他们似乎会拒绝
*   我使用[http_build_query](http://php.net/http_build_query)构建 POST 字符串（首选项）
*   您在请求中缺少 2 个字段`remLen`，以及作为提交按钮的触发器值
*   如果我在获得触发值后发送消息前几秒钟没有睡觉，我经常不会收到消息。

在我没有收到消息的大多数情况下，它仍然在屏幕上显示“消息已发送到电话#”，即使它从未收到。一旦我结合了所有正确的东西（睡眠时间、用户代理、有效的帖子字段），我会看到成功消息，但也会得到响应。

我认为您的代码中遗漏的最关键的事情是，在您获取触发器值的第一个请求中，它们还设置了`PHPSESSID`您需要捕获的 cookie ( )。如果没有在 POST 请求中发送它，它可能是一个自动拒绝。

要解决此问题，请确保在第一个请求以及后续请求中捕获 cookie。我选择为这两个请求重新使用相同的 curl 句柄。您不必这样*做*，但您*必须*在请求之间使用相同的 cookie 文件和 cookie jar。

希望有帮助。

# javascript - jQuery 按钮显示在菜单顶部

> ID：11419195
> 
> 赞同：2
> 
> 时间：2012-07-10T18:01:53.203
> 
> 标签：javascript, jquery, css, jquery-ui, button

在我的按钮上调用 .button() 后，它们将显示在我的子菜单顶部。为了更好地解释，这是一个屏幕截图：

![在此处输入图像描述](../Images/f5d4fee4e733a9d83e9f89b8bdef6b77.png)

我在 MasterPage 上调用我的 jQuery：

```
 <script type="text/javascript">
    $(function (e) {
        $("button, input[type='button'], input[type='submit']").button(); 
    });
</script> 
```

我引用了 google 的 jQuery 的 1.5 和 1.8 jquery 脚本。（否则我的 .button() 不起作用并出现脚本错误，例如“对象 [对象对象] 没有方法按钮”）

为什么会发生这种情况，我该如何改变它？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-10T18:04:26.830

HTML 元素所涉及的深度由它们各自的`z-index`值控制。您需要通过 CSS 来调整这些值（或使用 jQuery 动态更改它们）。

**参考**：[https ://developer.mozilla.org/en/CSS/Understanding_z-index](https://developer.mozilla.org/en/CSS/Understanding_z-index)

# html - Scala HTML解析器对象使用

> ID：11419197
> 
> 赞同：2
> 
> 时间：2012-07-10T18:02:09.897
> 
> 标签：html, parsing, scala

我正在使用 HTML 解析器来解析 HTML 字符串：

```
import nu.validator.htmlparser.{sax,common}
import sax.HtmlParser
import common.XmlViolationPolicy

val source = Source.fromString(response)
val html = new models.HTML5Parser
val htmlObject = html.loadXML(source) 
```

如何提取对象中特定元素的值？我可以使用以下方法获取孩子和标签：

```
val child = htmlObject.child(1).label 
```

但我不知道如何获取孩子的内容。另外，我不知道如何遍历子对象。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T00:48:46.200

目前尚不清楚您的`HTML5Parser`课程来自何处，但我将假设它是[本示例](http://www.hars.de/2009/01/html-as-xml-in-scala.html)中的课程（或类似内容）。在这种情况下，您`htmlObject`的只是一个[`scala.xml.Node`](http://www.scala-lang.org/api/current/scala/xml/Node.html). 首先进行一些设置：

```
val source = Source.fromString(
  "<html><head/><body><div class='main'><span>test</span></div></body></html>"
)

val htmlObject = html.loadXML(source) 
```

现在您可以执行以下操作，例如：

```
scala> htmlObject.child(1).label
res0: String = body

scala> htmlObject.child(1).child(0).child(0).text
res1: String = test

scala> (htmlObject \\ "span").text
res2: String = test

scala> (htmlObject \ "body" \ "div" \ "span").text
res3: String = test

scala> (htmlObject \\ "div").head.attributes.asAttrMap
res4: Map[String,String] = Map(class -> main) 
```

等等。

# sql - 统计历史报告的日期和时间

> ID：11419199
> 
> 赞同：0
> 
> 时间：2012-07-10T18:02:15.827
> 
> 标签：sql, sql-server-2005

我目前正在研究一个查询，该查询将与共享点结合使用以运行报告。我有一个查询，我知道可以使用 Oracle，但我工作的公司正在运行 SQL Server 2005。

报告将做的是让人们能够选择任何日期和时间，并为该特定操作提供计数。问题是时间戳有很大的差距（因为产品需要一点时间才能进入下一个操作）。日期类型是 varchar，所以我使用子字符串来解析出年、月、日和时间。我有可用的[样本数据](https://docs.google.com/spreadsheet/ccc?key=0AhNG3dN_hTHIdElnUnhMRkE3eFFYOGhRcC1QdzJtcHc)。

查看报告的人希望能够在这个时间和日期说出有多少单位经历了这次行动。

我知道这很令人困惑，如果您需要任何澄清，请告诉我。

这是oracle语法

```
SELECT T3.PAYMENT_DATE, T3."Hr", T3."Min", 
       (SELECT COUNT(*) 
        FROM INVOICE_ARCHIVE T4 
        WHERE TO_NUMBER(TO_CHAR(T4.PAYMENT_DATE, 'MM')) <= T3."Hr" 
        AND TO_NUMBER(TO_CHAR(T4.PAYMENT_DATE, 'DD')) <= T3."Min") AS "NUM"
FROM(SELECT T1.PAYMENT_DATE, T2."Hr", T2."Min"
     FROM (SELECT (FLOOR((LEVEL + 359)/60)) AS "Hr", 
                  MOD((LEVEL + 359), 60) AS "Min"
           FROM dual CONNECT BY LEVEL <= 961) T2, INVOICE_ARCHIVE T1
     ORDER BY T1.PAYMENT_DATE, T2."Hr", T2."Min") T3 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T18:53:48.590

您的问题的答案是 SQL Server 中的 datepart() 函数。这将允许您从日期中提取分钟和小时。

较难的部分是“按级别连接”部分。这是如何使用的？您可能需要使用递归 CTE 来处理此问题。

有了斯宾塞的一点提示，以下内容可能足以满足您的查询：

```
SELECT T3.PAYMENT_DATE, T3."Hr", T3."Min",
       (SELECT COUNT(*)
        FROM INVOICE_ARCHIVE T4
        WHERE datepart(month, T4.PAYMENT_DATE) <= T3."Hr" AND
              datepart(day, T4.PAYMENT_DATE, 'DD') <= T3."Min"
       ) AS "NUM"
FROM (SELECT T1.PAYMENT_DATE, T2."Hr", T2."Min"
      FROM (SELECT top 961 (FLOOR((LEVEL + 359)/60)) AS "Hr",
                    MOD((LEVEL + 359), 60) AS "Min"
            FROM (select top 961 row_number() over (order by (select NULL)) as level
                  from invoice_archive
                 ) t
           ) T2 cross join
           INVOICE_ARCHIVE T1
     ) T3
 ORDER BY T3.PAYMENT_DATE, T3."Hr", T3."Min" 
```

我做了以下更改：

1.  将日期算术更改为使用 datepart() 而不是 to_char() 。
2.  替换了获取数字列表的方法，使用 row_number() 而不是按级别连接
3.  使交叉连接显式
4.  将 order by 移动到外部查询，因为 SQL Server 和 Oracle 都不保证子查询中 order by 的结果（并且 SQL Server 不允许它，除非您有“TOP”查询）

# wif - TCP 联合和 ADFS

> ID：11419201
> 
> 赞同：1
> 
> 时间：2012-07-10T18:02:18.847
> 
> 标签：wif

我希望有人可以帮助我。如何通过 TCP 进行联合？我使用 ADFS 作为我的 STS。我的 WCF 服务（依赖方）通过 net.tcp 绑定公开其端点。STS 将通过 wsHttp 端点访问。我该怎么做？有什么建议么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T12:36:51.810

我只是想知道我这样做是否正确。我创建了一个自定义绑定。这是针对服务器端的。

```
<!-- STS Binding -->
<ws2007HttpBinding>
 <binding name="STSBinding">
  <security mode="TransportWithMessageCredential">
    <transport clientCredentialType="Windows">
    <extendedProtectionPolicy policyEnforcement="Never" />
      </transport>
     <message clientCredentialType="Windows" negotiateServiceCredential="true"
    algorithmSuite="Default" establishSecurityContext="false"/>
   </security>
  </binding>
</ws2007HttpBinding>

<customBinding>
<binding name="WCFTestServiceLibrary.IService1_FederationNetTcpBinding">
<security authenticationMode="SecureConversation" requireSecurityContextCancellation="true">
<secureConversationBootstrap authenticationMode="IssuedToken">
<issuedTokenParameters tokenType="http://docs.oasis-open.org/wss/oasis-wss-saml-token-profile-  1.1#SAMLV2.0">
  <issuer address="https://test/adfs/services/trust/13/issuedtokenmixedasymmetricbasic256"
   binding="ws2007HttpBinding" bindingConfiguration="STSBinding">
  </issuer>
  <issuerMetadata address="https://test/adfs/services/trust/mex" />
  <claimTypeRequirements>
  <add claimType="http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name" isOptional="true" />
  <add claimType="http://schemas.microsoft.com/ws/2008/06/identity/claims/role" isOptional="true" />
  </claimTypeRequirements>
  </issuedTokenParameters>
  </secureConversationBootstrap>
  </security>
  <binaryMessageEncoding  />
  <tcpTransport  />
  </binding>
</customBinding> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T20:06:25.633

从来没有这样做过，但从我读过的内容来看：

检查您的端点是否已在 ADFS 中启用。

然后将 tcp 添加到 ADFS IIS 站点的“启用的协议”。

请参阅[启用 net.tcp](https://stackoverflow.com/questions/3188618/enabling-net-tcp)

# android - ListActivity 中的 AndroidAnnotations 和上下文菜单

> ID：11419205
> 
> 赞同：1
> 
> 时间：2012-07-10T18:02:29.347
> 
> 标签：android, contextmenu, listactivity, android-annotations

我有一个从**ListActivity**继承并使用 AndroidAnnotations 的活动。虽然`.onListItemClick`工作正常，但列表项的上下文菜单根本不会出现，甚至`.onCreateContextMenu`没有被调用，而是`.onListItemClick`在长按列表项后触发。这是我的代码：

```
@OptionsMenu(R.menu.places)
@EActivity(R.layout.places)
public class PlacesPicker extends ListActivity {

    private static String[] DATA_SOURCE = { PlacesDB.PLACE_NAME, PlacesDB.PLACE_DESC };
    private static int[] DATA_DESTINATION = { R.id.place_name, R.id.place_desc };

    public static ListView lv;

    @Bean
    PlacesDB db;

    Cursor cursor;

    @AfterInject
    public void init() {

        cursor = db.getPlaces(null, null);
        startManagingCursor(cursor);

        SimpleCursorAdapter adapter = new SimpleCursorAdapter(this, R.layout.place_item, cursor, DATA_SOURCE, DATA_DESTINATION);
        setListAdapter(adapter);

        lv = getListView();

        registerForContextMenu(lv);

    }

    @Override
    public void onListItemClick(ListView l, View v, int position, long id) {
                // It works fine
                // It works even after long tap instead of context menu!
        Toast.makeText(this, "Item clicked!", Toast.LENGTH_SHORT).show();
    }

    @OptionsItem
    public void addPlace(){
                // It works OK too
        startActivity(new Intent(this, PlaceEditor_.class));

    }

    public void editPlace() {
        // ...skipped for brevity...
    }

    public void deletePlace() {
            // ...skipped...
    }

    @Override
    public void onCreateContextMenu(ContextMenu menu, View v, ContextMenuInfo menuInfo) {
                // This isn't ever called!
        super.onCreateContextMenu(menu, v, menuInfo);

        MenuInflater inflater = getMenuInflater();
        inflater.inflate(R.menu.place_options, menu);
    }

    @Override
    public boolean onContextItemSelected(MenuItem item) {
        // ...skipped...
    }

} 
```

谁能告诉我这里有什么问题？感谢提前。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-11T07:31:18.230

我知道了！这是我自己的错误：`.init()`方法必须注释为`@AfterViews`，而不是`@AfterInject`。它的工作原理是这样的：**ListActivity**在创建时有一个默认的**ListView**，然后我的 bean **PlacesDB**被注入，然后触发`@AfterInject`方法，即*默认的***ListView**为上下文菜单注册的地方，然后`.init()`我*被*设置为与*另一个*活动的内容视图未注册*的***ListView**！因此，将注释更改为make*之后*运行，然后运行我自己的**ListView** ****`R.layout.places` ****`@AfterViews``.init()` *`.setContentView(R.layout.places)`**从布局注册上下文菜单，一切开始工作:)***********

# matlab - 在 MATLAB 中，如何清除绘制到图形的最后一件事？

> ID：11419209
> 
> 赞同：8
> 
> 时间：2012-07-10T18:02:35.653
> 
> 标签：matlab, matlab-figure

在 MATLAB 中，我将许多不同的向量绘制成一个图形。现在，我想做的只是撤消我绘制到该图的*最后一个*向量，而不清除其他所有内容。如何实现？可以实现吗？

谢谢

编辑：

```
figure(1); clf(1);
N = 100;
x = randn(1,N);
y = randn(1,N);
z = sin(1:N);
plot(x); hold on;
plot(y,'r');
plot(z,'k'); 
```

现在在这里，我想删除图 z，这是我制作的最后一个图。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-10T18:15:26.880

如果您在绘制之前知道以后要再次删除它，则可以保存返回的句柄，然后再将其`plot`删除`delete`。

```
figure;
h1 = plot([0 1 2], [3 4 5]);
delete(h1); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-10T18:05:37.987

尝试

```
items = get(gca, 'Children');
delete(items(end)); 
```

（或者也许`delete(items(1))`）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-10T18:37:07.390

@groovingandi 给出的答案是最好的方法。您还可以使用[FINDALL](http://www.mathworks.com/help/techdoc/ref/findall.html)根据对象的属性查找句柄：

```
h = findall(gca, 'type', 'line', 'color', 'k');
delete(h); 
```

这会在当前坐标区中搜索所有黑色的线对象（绘图生成线对象）。

要在图 9 上执行此操作，您需要找到图 9 的轴。图句柄只是图号，因此：

```
ax = findall(9, 'axes');
h = findall(ax, 'type', 'line', 'color', 'k');
delete(h); 
```

# wpf - 在 MultiDataTrigger 中组合 DataTrigger 和 Trigger

> ID：11419210
> 
> 赞同：22
> 
> 时间：2012-07-10T18:02:44.710
> 
> 标签：wpf, xaml, data-binding, triggers

我从一些例子中看到可以组合这种触发器：

```
<Trigger Property="IsMouseOver" Value="True"> 
```

使用这种数据触发器：

```
<DataTrigger Binding="{Binding IsHighlightable}" Value="True" /> 
```

通过使用这样的 MultiDataTrigger：

```
<MultiDataTrigger>
    <MultiDataTrigger.Conditions>
        <Condition Binding="{Binding RelativeSource={RelativeSource Self}, Path=IsMouseOver}" Value="True"/>
        <Condition Binding="{Binding IsHighlightable}" Value="True" />
    </MultiDataTrigger.Conditions>
    <MultiDataTrigger.Setters>
        <Setter Property="BorderThickness" Value="1"/>
        <Setter Property="BorderBrush" Value="#BF6DBDD1"/>
        <Setter Property="Background" Value="{StaticResource SelectedItemBackgroundBrush}"/>
    </MultiDataTrigger.Setters>
</MultiDataTrigger> 
```

但是，这不适用于附加属性。此触发器有效：

```
<Trigger Property="UI:TreeViewHelper.IsMouseDirectlyOverItem" Value="True"> 
```

但这不起作用：

```
<MultiDataTrigger>
    <MultiDataTrigger.Conditions>
        <Condition Binding="{Binding RelativeSource={RelativeSource Self}, Path=UI:TreeViewHelper.IsMouseDirectlyOverItem}" Value="True"/>
        <Condition Binding="{Binding IsHighlightable}" Value="True" />
    </MultiDataTrigger.Conditions>
    <MultiDataTrigger.Setters>
        <Setter Property="BorderThickness" Value="1"/>
        <Setter Property="BorderBrush" Value="#BF6DBDD1"/>
        <Setter Property="Background" Value="{StaticResource SelectedItemBackgroundBrush}"/>
    </MultiDataTrigger.Setters>
</MultiDataTrigger> 
```

有没有办法让触发器在 MultiDataTrigger 中正常工作？IsMouseDirectlyOverItem 属性取自这里[http://blogs.msdn.com/b/mikehillberg/archive/2006/09/21/mytreeviewhelperismousedirectlyoveritem.aspx](http://blogs.msdn.com/b/mikehillberg/archive/2006/09/21/mytreeviewhelperismousedirectlyoveritem.aspx)。

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-10T18:06:00.613

附加属性的[语法不同：](http://msdn.microsoft.com/en-us/library/system.windows.data.binding.path.aspx)

```
Path=(UI:TreeViewHelper.IsMouseDirectlyOverItem) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-12-02T09:19:46.797

```
<MultiDataTrigger>
    <MultiDataTrigger.Conditions>
        <Condition Binding="{Binding IsHighlightable}" Value="True"/>
        <Condition Binding="{Binding RelativeSource={RelativeSource Self}, Path=IsMouseOver}" Value="True"/>
    </MultiDataTrigger.Conditions>
    <MultiDataTrigger.Setters>
        <Setter Property="BorderThickness" Value="1"/>
        <Setter Property="BorderBrush" Value="#BF6DBDD1"/>
        <Setter Property="Background" Value="{StaticResource SelectedItemBackgroundBrush}"/>
    </MultiDataTrigger.Setters>
</MultiDataTrigger> 
```

# php - PHP表单重新提交

> ID：11419212
> 
> 赞同：0
> 
> 时间：2012-07-10T18:02:47.573
> 
> 标签：php, forms

我有一个我一直在做的小项目。我必须使用一个文件或 PHP_SELF 创建一个面积转换计算器。我遇到的问题是表单正在工作并输出数字，但无论我选择哪种转换方法，它都只会输出最后一个 if 语句。它将始终输出 Sq.Miles。

```
if (!empty($_POST['con'])) {
    $con = $_POST['con'];
} else {
    $error .= "You need to select a conversion Method. <br>";
}
if (!empty($_POST['number'])) {
    $num = $_POST['number'];
    } else {
    $error .= "You need to type in a number. <br>";
} 
if (empty($error)) {
    if ($con = "SFSM") {
        $result = $num * 0.093 . " Sq. Meters";
    }
    if ($con = "SYSM") {
        $result = $num * 0.84 . " Sq. Meters";
    }
    if ($con = "SMSK") {
        $result = $num * 2.6 . " Sq. Kiometers";
    }
    if ($con = "SMSF") {
        $result = $num * 10.76 . " Sq. Feet";
    }
    if ($con = "SMSY") {
        $result = $num * 1.2 . " Sq. Yards";
    }
    if ($con = "SKSM") {
        $result = $num * 0.38 . " Sq. Miles";
    }
}
}
?>
<form method="post" action="area2.php">
<table border="1" cellspacing="0" cellpadding="0">
<tr>
<td colspan="2">Area Conversions</td>
</tr>
<tr>
<td>Conversion Method</td>
<td>Number</td>
</tr>
<tr>
<td>
<select name="con">
 <option selected="selected" style="color:#CCC"></option>
 <option value="SFSM">Square Feet to Square Meters</option>
 <option value="SYSM">Square Yards to Square Meters</option>
 <option value="SMSK">Square Miles to Square Kilometers</option>
 <option value="SMSF">Square Meters to Square Feet</option>
 <option value="SMSY">Square Meters to Square Yards</option>
 <option value="SKSM">Square Kilometers to Square Miles</option>
 </select>
 </td>
 <td>
  <input type="text" name="number" size="10" value = "<?php if ($num){ echo $num; } else           {           echo "Insert Number"; } ?>" onfocus="this.value==this.defaultValue?this.value='':null"/><br />
  </td>
  </tr>
  <tr>
  <td colspan="2">
       <input type="submit" value="Calculate" name="submit" />
       <input type="reset" value="reset" name="reset" />
</td>
</tr>
<?php
if (!empty($error)) {
echo $error;
}elseif (!empty($result)) {
echo "<tr><td colspan=\"2\">Result: " . $result . " </td></tr>";
}
?>
</table>
</form> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-10T18:03:42.310

尝试：

```
if ($con == "SFSM") { 
```

`=`运算符是赋值；`==`是比较。

本质上，您的 if 语句都评估为 true；并且由于他们都设置了变量，因此它只是实际出现的最后一个调用

# webmatrix - 通过 Web Deploy 在 Azure VM 上发布 Webmatrix 站点

> ID：11419216
> 
> 赞同：2
> 
> 时间：2012-07-10T18:03:03.173
> 
> 标签：webmatrix, microsoft-web-deploy

我无法通过 Webmatrix 2 发布我的 Web 应用程序。有人能说明一下吗？

我按照以下步骤操作：

a) 通过 Azure 门户创建 VM

b) 在端口 8172 和 tcp 端口 80 上为 Web 部署创建端点

c) RDPed 到 Win Server-08-R2-Sp1-Jun-12 并安装 Web Platform 4.0

d) 已安装的 IIS 7 推荐配置

e) 在服务器上安装了 Webmatrix 2，而服务器又安装了 Dot Net 4.0、Web Deploy

f) 安装 IIS Role Services - Management Services 并将属性更改为 [Auto Start] 并重新启动

g) 编辑了默认网站文件夹的[权限]并添加了[网络服务]并设置了[读/写/管理]权限。

h) 验证 Web 部署和 Web 管理服务正在服务中运行。

i) 从浏览器查看网站，可以看到 IIS 启动页面

j) 在服务器上运行 ServerValidator UI 应用程序并确认 Web 管理服务等运行良好

k) 在这些步骤之后，当我在 Webmatrix 发布设置中输入所有参数（我的 ac/ 是服务器上的管理员）时，我收到“无法建立连接”错误。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T15:32:51.080

我的猜测是未安装 Web Deploy“处理程序”（或 WMSvc）组件，因为在安装 Web Deploy 时尚未启用 WMSvc（管理服务）。安装程序仅在已安装 WMSvc 时尝试处理程序组件。您应该能够通过更改 Web 部署安装（从添加删除程序）并选择“IIS 7 部署处理程序”（使用子组件配置非管理员发布和管理服务委派 UI）来解决此问题。

将来避免这种情况的一种方法是在 WebPI（一个非常大的服务器端项目包）中安装“托管服务器的推荐配置”产品，或者至少使用“托管服务器的 Web 部署”产品（它将自动确保首先安装带有管理服务的 IIS）。如果默认情况下您没有看到“Web Deploy for Hosting Servers”，请尝试使用搜索框搜索带有“Web Deploy”的产品。

# matlab - MATLAB：使用逻辑索引提取子矩阵

> ID：11419220
> 
> 赞同：8
> 
> 时间：2012-07-10T18:03:09.670
> 
> 标签：matlab, matrix, indexing, addressing, submatrix

我正在寻找一个优雅的解决方案来解决 MATLAB 中这个非常简单的问题。假设我有一个矩阵

```
>> M = magic(5)

M =

    17    24     1     8    15
    23     5     7    14    16
     4     6    13    20    22
    10    12    19    21     3
    11    18    25     2     9 
```

和形式的逻辑变量

```
I =

     0     0     0     0     0
     0     1     1     0     0
     0     1     1     0     0
     0     0     0     0     0
     0     0     0     0     0 
```

如果我尝试检索与in 中的值`M`关联的元素，我会得到一个列向量`1``I`

```
>> M(I)

ans =

     5
     6
     7
    13 
```

`[5 7 ; 6 13]`从这个逻辑索引中获取矩阵的最简单方法是什么？

如果我知道 的非零元素的形状`I`，我可以在索引后使用重塑，但这不是一般情况。

另外，我知道 MATLAB 中这种类型的索引的默认行为对于非零值`I`不形成矩阵的情况强制保持一致性，但我想知道是否有针对这种特殊情况的简单解决方案.

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-10T18:14:47.623

这是一种方法。假设所有行的`I`个数相同。还假设`I`具有相同编号的所有列都有一个，因为`Submatrix`必须是矩形。

```
%# Define the example data.

M = magic(5);
I = zeros(5);
I(2:3, 2:3) = 1;

%# Create the Submatrix.

Submatrix = reshape(M(find(I)), max(sum(I)), max(sum(I'))); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-26T15:08:01.780

这是一个非常简单的解决方案：

```
T = I(any(I'),any(I));
T(:) = M(I); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-10T18:14:38.263

```
M = magic(5);
I = [ ... ];

ind = find(I); %# find indices of ones in I
[y1, x1] = ind2sub(size(M), ind(1));   %# get top-left position
[y2, x2] = ind2sub(size(M), ind(end)); %# get bottom-right position
O = M(y1:y2, x1:x2); %# copy submatrix 
```

# java - java arraylists比较A和B

> ID：11419222
> 
> 赞同：-4
> 
> 时间：2012-07-10T18:03:29.530
> 
> 标签：java

我在 java 中有两个数组列表 A 和 B。Arraylist A 有重复项，但 Arraylist B 具有唯一且并非来自 arraylist A 的所有元素。我想计算 arraylist A 中存在于 arraylist B 中的元素的频率

小例子

```
A = {Red, Black, Red, Black, Green, Green, Brown, Black, Brown, Green}
B=  {Red, Brown, Green} 
```

结果应该是红色 = 2，棕色 = 2 绿色 = 3

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T18:10:05.083

更新：

```
 List<String> listA = Arrays.asList("Red", "Black", "Red", "Black", "Green", "Green", "Brown", "Black", "Brown", "Green");
    List<String> listB = Arrays.asList("Red", "Brown", "Green");

    for (String color : listB) {
        System.out.println(string + " " + Collections.frequency(listA, color));
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T19:57:36.943

您能不能用 Map<K, V> 替换列表 A，其中 K 是您在 A 中拥有的对象的类类型（如字符串），而 V 是整数或长整数等数字。然后，不是简单地将相同的旧值添加到 A 中（当您首先构造列表时），您可以这样做，例如：

```
Map<String, Integer> countMap = new HashMap<String, Integer>();
Integer currentCount = countMap.get("Red");
countMap.put("Red", (currentCount == null ? 1 : currentCount.intValue() + 1)); 
```

然后要获取列表 B 中找到的每个对象的计数，您只需遍历地图，依次检查 B 中的每个对象：

```
List<String> listB = new List<String>();
listB.add("Red");
listB.add("Brown");
listB.add("Green");
for(String s : listB) {
    Integer quantityFoundInA = countMap.get(s);
    System.out.println("String <"+s"> found in list (map) 'A' "+(quantityFoundInA == null ? 0 : quantityFoundInA.intValue())+" times");
} 
```

我猜测这种结构比简单地将相同对象的多个副本存储在 List 中更有效（只要您存储在 A 中的对象在它们共享相同名称时完全相同）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T03:01:58.170

看一下google guava中的“MultiSet”界面：

```
MultiSet<String> multiSet = HashMultiSet.create(listA);
for (String s : listB) {
   multiSet.count(s);
} 
```

通过将元素直接存储在 multiSet 而不是 List 中，您总是可以获得更好的性能。但这取决于您还想用它做什么，因为 MultiSet 实现了 Collection 接口，而不是 List。

# php - 从分解的字符串中删除空数组元素

> ID：11419224
> 
> 赞同：4
> 
> 时间：2012-07-10T18:03:39.673
> 
> 标签：php, arrays, explode

> **可能重复：**
> [删除空数组元素](https://stackoverflow.com/questions/3654295/remove-empty-array-elements)

我想从数组中删除空元素。我有一个字符串，它被设置为一个数组`explode()`。然后我`array_filter()`用来删除空元素。但这不起作用。请参阅下面的代码：

```
$location = "http://www.bespike.com/Packages.gz";
$handle = fopen($location, "rb");
$source_code = stream_get_contents($handle);
$source_code = gzdecode($source_code);
$source_code = str_replace("\n", ":ben:", $source_code);
$list = explode(":ben:", $source_code);
print_r($list); 
```

但它不起作用，`$list`仍然有空元素。我也尝试过使用该`empty()`功能，但结果是一样的。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-10T18:10:28.843

如果文件有`\r\n`一个回车符，就像那个文件一样，拆分 with`\n`会给你一个*显示*为空但不是的元素——它包含一个`\r`.

```
$source_code = gzdecode($source_code);
$list = array_filter(explode("\r\n", $source_code));
print_r($list); 
```

您也可以尝试使用现有代码，替换“\r\n”而不是“\n”（您仍然需要在某处使用 array_filter）。

一个可能**更慢但更灵活**的选项使用`preg_split`和匹配任何换行符的特殊正则表达式元字符`\R`，包括 Unix 和 Windows：

```
$source_code = gzdecode($source_code);
$list = array_filter(preg_split('#\\R#', $source_code));
print_r($list); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T18:07:58.683

```
$arr = array('one', '', 'two');
$arr = array_filter($arr, 'strlen'); 
```

请注意，这不会重置键。以上将为您留下一个由两个键组成的数组 -`0`和`2`. 如果您的数组是索引的而不是关联的，您可以通过以下方式解决此问题

```
$arr = array_values($arr); 
```

键现在是`0`和`1`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T18:26:28.347

这就是你需要的：

```
$list = array_filter($list, 'removeEmptyElements');

function removeEmptyElements($var)
{
  return trim($var) != "" ? $var : null;
} 
```

如果未提供回调，则将删除所有等于 FALSE 的输入条目。但是在您的情况下，您有一个长度为 1 的空字符串，这不是 FALSE。这就是为什么我们需要提供回调

# java - 使用 Java 访问其他窗口

> ID：11419226
> 
> 赞同：1
> 
> 时间：2012-07-10T18:03:42.093
> 
> 标签：java

基本上我的想法是使用 Java 开发一个简单的应用程序，该应用程序在后台作为守护进程运行，但在按下热键时会弹出一个窗口。并且该应用程序访问屏幕上的内容（例如，如果打开 PDF 文档，应用程序应该能够访问打开的文档的内容）。

该应用程序的行为可以与字典应用程序进行比较，我们通常在任何窗口中选择文本并使用热键，字典会显示所选文本的含义。

我正在使用[Jintellitype](http://code.google.com/p/jintellitype/)来听热键。但我不知道如何访问任何其他窗口的内容。因为应用程序的行为取决于窗口的内容，所以我被困在这里。所以，我的问题是是否有可能获取其他窗口的内容（当然不像间谍软件），如果可以，如何？

谢谢！

# css - 特定 div 上的 Ipad 中的边距

> ID：11419231
> 
> 赞同：1
> 
> 时间：2012-07-10T18:04:03.870
> 
> 标签：css, ipad, html, width

除了主导航栏和旋转横幅外，我已将 ipad 上的所有内容都居中并保持全宽。尽我所能尝试编码适用于除这些之外的所有内容。

网址是：[www.madcatz.com](http://www.madcatz.com)

```
#topNav {
    width: 900px;
    margin: 0 auto;
    background-color: #000000;
    opacity: 0.9;
    height: 50px;
    position: relative;
    top: 5px;
    display: inline-block;
    /* bottom: 1000px; */
    border-radius: 5px;
    -moz-border-radius: 5px;
    z-index: 9951;
  }
.bgstretcher ul li a span{
    background-image: url(images/bg-front-title.png);
    bottom: 100px;
    display: block;
    font-family: "UniversLTW01-85ExtraBkO"!important;
    font-size: 32px;
    line-height: 35px;
    padding: 15px 35px 15px 85px;
    position: absolute;
    text-transform: uppercase;
    width: 45%;
    margin:0 auto;
    text-shadow: 3px 3px 0px rgba(0, 0, 0, 0.2);
    -moz-border-radius-topright: 20px;
    -webkit-border-top-right-radius: 20px;
    border-top-right-radius: 20px;
    -moz-border-radius-bottomright: 20px;
    -webkit-border-bottom-right-radius: 20px;
    border-bottom-right-radius: 20px;
    text-align: right;
    font-weight: normal;
} 
```

# php - CodeIgniter 缺少参数重定向到 404

> ID：11419232
> 
> 赞同：0
> 
> 时间：2012-07-10T18:04:04.407
> 
> 标签：php, codeigniter, redirect

如果用户键入`/apple/`而不是`/apple/1`，也就是未定义的 URL，它应该重定向到 404 页面。但是它会转到控制器并输出一条`Missing Argument1`消息。

我不想改变：

```
public function index(){...} 
```

至：

```
public function index($id = null){...} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T18:36:26.160

嗯，我没有测试它，但你可以这样做：

在 routes.php 中

```
$route['apple/(:any)'] = "apple";
$route['apple'] = "apple"; 
```

在 apple.php

```
function index()
{
  if(!$this->uri->segment(1))
  {
    show_404();
  }
} 
```

# java - 如何在 Android 中取消 HttpRequest

> ID：11419238
> 
> 赞同：3
> 
> 时间：2012-07-10T18:04:44.640
> 
> 标签：java, android, httpclient

我有一个用于整个应用程序的线程安全 HttpClient，并且我有一个服务和一个活动，它们在不同的线程中非常频繁地进行各种 REST API 调用。有时我需要取消已启动的 HttpRequest，因为我已经需要使用更新的数据启动另一个。我不想让用户等待第一个请求完成，然后等待第二个请求，也许此时用户会再次更新数据，我需要调用第三个请求。所以我想做的是用旧数据取消请求并开始一个新数据。我尝试取消 AsyncTask，但由于某种原因它没有取消已启动的请求。这是我的代码：

```
if (getAlbumImage != null && getAlbumImage.getStatus() == AsyncTask.Status.RUNNING) {
    Log.d(VibesApplication.VIBES, "cancelling image loader");
    getAlbumImage.cancel(true);
}
getAlbumImage = new GetAndSetAlbumImage();
getAlbumImage.execute(performer, name); 
```

我也尝试关闭连接管理器。正如这里所建议的那样：[https](https://stackoverflow.com/a/7311393/1032286) ://stackoverflow.com/a/7311393/1032286 但是我只有一个客户和经理，我不想在每次进行 REST 调用时都创建它们。我该怎么办？如果有办法取消所有正在运行的请求，我会很高兴，但如果有办法取消单独的请求，那就太好了。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-10T18:13:09.963

尝试`yourHttpRequest.abort()`

两者都`HttpGet`实现`HttpPost`，`AbortableHttpRequest`它有`abort()`方法

[http://developer.android.com/reference/org/apache/http/client/methods/AbortableHttpRequest.html](http://developer.android.com/reference/org/apache/http/client/methods/AbortableHttpRequest.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T18:13:06.340

取消异步任务只会将任务的 IsCanceled 标志设置为 true。如果您希望停止后台任务，则必须在 runInBackground 函数的基本不同里程碑中明确检查 IsCanceled 标志。我记得以前遇到过这个问题，但找不到停止 HTTPRequest 的明确方法。我所做的是我基本上忽略了第一个 AsyncTask 并启动了一个新的。由于第一个任务被取消，只要它完成运行，我只需通过检查 IsCanceled 标志来丢弃信息。

# .net - .net 中的垃圾收集

> ID：11419242
> 
> 赞同：0
> 
> 时间：2012-07-10T18:05:15.753
> 
> 标签：.net, garbage-collection, double

Line 类引用了 Point 类的两个对象（如 start_Point 和 end_Point）。考虑以下场景：线 l1 和 l2 共享某个点（例如 l1.end_Point = l2.start_Point）。

现在，如果 l1 已经超出范围（不再引用 l1 的对象）但仍然引用 l2，如果是，l1 的对象是否会被垃圾收集，那么 l1 持有的点的对象会发生什么。

* * *

没有从 GCRoot 到 l1.start_Point 的路径，但对于 l1.end_Point 有一条路径，即通过 l2。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T18:12:21.157

每条线都是一个对象，有两个指针（可能）指向两个点对象，因此如果两条线引用同一个点对象并且其中一个超出范围，则点对象不会，因为第二行仍然包含对它的引用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T18:41:26.253

如果我理解正确，那么 Line 类的单独实例中的 Point 对象将不会发生任何事情，前提是它们位于类声明中，如下所示：

```
class Program
{
    static void Main(string[] args)
    {
        Point a = new Point(0,0);
        Point b = new Point(2,2);
        Line line1 = new Line(a.X,a.Y, b.X, b.Y);
        Line line2 = new Line(a.X, a.Y, b.X, b.Y);          
    }
}

class Point
{
    public int X { get; set; }
    public int Y { get; set; }
    public Point(int x1, int y1)
    {
        X = x1;
        Y = y1;
    }
}

class Line
{
    public Point StartPoint { get; set; }
    public Point EndPoint { get; set; }
    public Line(int x1, int y1, int x2, int y2)
    {
        StartPoint = new Point(x1, y1);
        EndPoint = new Point(x2, y2);
    }
} 
```

如果 line1 超出范围，您仍然可以完全访问 line2 中的点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T18:07:32.907

l1 引用将得到 GC，但只要引用仍然指向它，它所指向的内容就不会 - 在您的示例中为 l2。

换句话说，l1 和 l2 只是对一个对象（在这种情况下为 Point 类型）的引用，所以只要 l1 和 l2 真的指向*同一个*对象，如果 GC 忽略了存在仍然是一个指向对象的指针。

# scala - 如何在 Scala 中将覆盖与可堆叠特征结合起来？

> ID：11419244
> 
> 赞同：1
> 
> 时间：2012-07-10T18:05:25.777
> 
> 标签：scala, inheritance, traits

在 Swing 和 Wicket 应用程序中，覆盖框架提供的类中的方法是正常的。例如：

```
val form = new Form("form") {
  override def onSubmit() { println("Form was submitted") }
} 
```

示例 Form 可以定义为：

```
abstract class Form(id: String) {
  def onSubmit()
  def error(msg: String) { println(msg) }
} 
```

许多表单实现需要错误处理。为此，我创建了一个可堆叠的特征：

```
trait FormErrorHandler extends Form {
  abstract override def onSubmit() {
    try super.onSubmit()
    catch { case e: Exception => error("error during submit " + e.getMessage) }
  }
} 
```

如果我现在尝试将其结合起来，则会出现编译器错误：

```
val form = new Form("form") {
  override def onSubmit() { println("Form was submitted") }
} with FormErrorHandler // DOES NOT COMPILE 
```

我解决了这个问题：

```
class MyForm extends Form("form") {
  override def onSubmit() { println("Form was submitted") }
}
val form = new MyForm with FormErrorHandler 
```

但它只是读起来不太好；我必须命名一个通常是匿名的类。

有什么建议可以让这个看起来不错吗？我尝试的语法结构对未来的 Scala 版本有意义吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T18:18:31.990

您是正确的，您不能同时创建一个覆盖方法的匿名类，然后再混合一个特征。但是有一个简单的方法：在 trait（例如`abstract def mySubmit`）中定义另一个方法，然后将其填充到孩子中（或者默认情况下让它做一些有用的事情，如果你愿意，可以覆盖它）。

然后您可以先混合错误处理程序并覆盖匿名块中的新方法。

# python - 按 Counter 对象的顺序迭代

> ID：11419249
> 
> 赞同：0
> 
> 时间：2012-07-10T18:05:43.813
> 
> 标签：python

我有一个看起来像这样的 Counter 对象：

```
counts = Counter({'foo': 10, 'baz': 5, 'biff': 3, 'bonk': 1})

for k, v in counts.items(): 
    print k, v

    bonk 1
    foo 10
    baz 5
    biff 3 
```

通过降低值的频率来迭代 Counter 对象的最佳方法是什么？速度很重要。文档中有一个 OrderCounter 类，但我正在寻找更简单的东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T18:16:41.353

采用[`Counter.most_common()`](http://docs.python.org/library/collections.html#collections.Counter.most_common)

```
>>> counts = Counter({'foo': 10, 'baz': 5, 'biff': 3, 'bonk': 1})
>>> for k, v in counts.most_common():
    print k, v
foo 10
baz 5
biff 3
bonk 1 
```

# c++ - 将 char 转换为无符号字符

> ID：11419251
> 
> 赞同：0
> 
> 时间：2012-07-10T18:05:58.520
> 
> 标签：c++

转换如何工作？例如：char[-128, 127] 的作用域，unsigned char[0, 255] 的作用域

```
char x = -128;
unsigned char y = static_cast<unsigned char>(x);
cout<<y; //128 
```

为什么不是 0 ？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-10T18:10:30.173

无符号算术，包括从有符号类型的转换，是模块化的，模数为 2 ^n（其中`n`是位数）。

假设`char`有 8 位，则 -128 等于 128，模 256；所以这就是转换的结果。

更新：如评论中所述，这假设 -128 是 type 的有效值`char`，但不一定如此。`char`具有至少`[0..127]`和`signed char`至少的范围`[-127..127]`。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-10T18:08:56.237

无符号算术和到无符号的转换以 2 ^N为模进行。你有一个 8 位字符，所以 N 是 8，而 2 ^N是 256。

-128 和 128 以 256 为模全等。

以下是第 4.7 节 ( `[conv.integral]`) 中的实际规则：

> *   如果目标类型是无符号的，则结果值是与源整数一致的最小无符号整数（模 2 ^n 其中 n 是用于表示无符号类型的位数）。[ 注意：在二进制补码表示中，这种转换是概念性的，位模式没有变化（如果没有截断）。——尾注]
> *   如果目标类型是有符号的，则如果它可以在目标类型（和位域宽度）中表示，则值不变；否则，该值是实现定义的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-10T18:11:39.690

转换通过以不同方式重新解释相同的位模式来工作，而不是通过添加 +128 来偏置范围。阅读[二进制补码](http://en.wikipedia.org/wiki/Two%27s_complement)以了解更多信息。

# jquery - sj：struts 2中的选择无法解析JSON

> ID：11419254
> 
> 赞同：0
> 
> 时间：2012-07-10T18:06:08.120
> 
> 标签：jquery, json, struts2, firebug

我正在用struts + spring + hibernate构建一个页面。我有一个 jQuery 选择小部件，它应该从数据库中加载值列表，但它没有填充。这是该线程的延续：[<sj:select> 未调用操作](https://stackoverflow.com/questions/11334673/sjselect-not-calling-action)，因为我正在慢慢缩小导致此问题的原因。

这是我的代码：

**struts.xml**

```
<action name="getListOfCities" class="cityActions">
    <result type="json" name="SUCCESS">
        <param name="root">cities</param>
    </result>
</action> 
```

**页面.jsp**

（地图）

```
<s:url id="cityList" action="getListOfCities"/>
  <sj:select name="select" href="%{cityList}" list="cities" headerKey="-1" emptyOption="true" headerValue="Pick one"/> 
```

**CityAction.java**

```
public class CityActions extends ActionSupport implements ModelDriven<CityVO> {

public void setCityService(CityService cityService) {
    this.cityService = cityService;
}

public CityVO getModel(){
    System.out.println("Executing getModel()");
    return city;
}

public String execute() {
    System.out.println("Executing cities");
    return "SUCCESS";
}   

public String getJSON(){
    return execute();
}
public String addCity(){
    try{
        cityService.addCity(city);
        return "SUCCESS";}
    catch(Exception e){
        return "ERROR";
    }catch(Throwable t){
        return "ERROR";
    }
}
public Map<String, String> getCities() {
    List<CityVO> cityList = cityService.listCities();

    Iterator<CityVO> iterator = cityList.iterator();
    while (iterator.hasNext()) {
        CityVO fac = iterator.next();
        cities.put(fac.getCityName(), Integer.toString(fac.getCityId()));
    }
    System.out.println("Cities: " + cities);

    return cities;
}   

public List<CityVO> getCityList2(){
    System.out.println("Getting list of cityVOs");
    cityList2 = cityService.listCities();
    return cityList2;
}

} 
```

我的动作类支持将 JSON 对象作为 VO 或作为 Map 返回。当前的 page.jsp 代码用于地图功能。

我正在使用萤火虫试图找出问题所在。我可以看到我的 JSON 对象被正确返回。看起来像：

```
{"Foo":"3","Bar":"4","Hello":"2"} 
```

我收到一个错误，我知道它来自 sj:select 小部件；如果我删除它，错误就会消失。

```
a is undefined
f()jquery....min.js (line 2)
a = undefined
c = function()
d = undefined 
```

谷歌让我相信这表明解析 JSON 值存在问题，但我找不到任何与 struts2-jquery 插件相关的示例。我尝试将 dataType="json" 添加到我的 sj:select 中，但这并不能解决问题。

如果有人有建议，那将不胜感激。我已经坚持了好几天了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-21T18:22:06.050

您应该尝试执行此操作：

```
<action name="getListOfCities" class="cityActions">
    <result type="json"/>
</action> 
```

# javascript - JavaScript 阻塞 CSS

> ID：11419261
> 
> 赞同：0
> 
> 时间：2012-07-10T18:06:37.637
> 
> 标签：javascript, css

我有一组按钮，当鼠标悬停时，它们会改变颜色。这些的 CSS 以这种方式运行：

```
#navsite ul li button
{
    height: 60px;
    width: 60px;
    background-image: -moz-linear-gradient(bottom, black, #4D4D4D);
    box-shadow: 2px 3px 3px 2px #888888;
    border-radius: 15px;
    border-color: 359ABC;
    cursor: pointer;
    margin-left: 5px;
    margin-right: 5px;
    vertical-align: bottom;
}

#navsite ul li button:hover
{
    height: 60px;
    width: 60px;
    background-image: none;
    background-color: #00054C;
    box-shadow:  2px 3px 3px 2px #888888;
    border-radius: 15px;
    border-color: 359ABC;
    cursor: pointer;
    margin-left: 5px;
    margin-right: 5px;
    vertical-align: bottom;
} 
```

然后，JavaScript 在点击时更改颜色（下面的示例涵盖了五个按钮之一，每个按钮都有一个函数，请原谅大容量）：

```
function dude()
{
    document.getElementById("dude").hidden=false;
    document.getElementById("bob").hidden=true;
    document.getElementById("ted").hidden=true;
    document.getElementById("joe").hidden=true;
    document.getElementById("fred").hidden=true;
    document.getElementById("button1").style.background='#00054C';
    document.getElementById("button2").style.background='-moz-linear-gradient(bottom, black, #4D4D4D)';
    document.getElementById("button3").style.background='-moz-linear-gradient(bottom, black, #4D4D4D)';
    document.getElementById("button4").style.background='-moz-linear-gradient(bottom, black, #4D4D4D)';
    document.getElementById("button5").style.background='-moz-linear-gradient(bottom, black, #4D4D4D)';
} 
```

我现在的问题是这个脚本激活后，CSS规则`#navsite ul li button:hover`不再适用，根本没有鼠标悬停效果。如何修复脚本，使其不会阻止 CSS 正常运行？

编辑：我是否应该考虑将该 CSS 子句转换为脚本本身的一部分？我发现将脚本转换为 CSS 子句是不可能的，我希望使用最少的资源。

* * *

我已经更改了脚本，以便它列出活动和非活动类，而不是列出颜色本身。不过，它仍然相当笨重。关于如何浓缩它的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T18:17:00.040

不要将样式直接添加到使用 javascript 的元素中，而是创建一个类 .active 并将其附加到单击的元素中。然后在不再活动时删除该类。

```
.active{-moz-linear-gradient(bottom, black, #4D4D4D)} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T18:25:25.987

> 我是否应该考虑将该 CSS 子句转换为脚本本身的一部分？

不。将演示从行为中移开。

> 我发现无法将脚本转换为 CSS 子句

不。在你的 CSS 中使用类，你可以用 JavaScript 动态改变它们：

```
button.active, button:hover {
    background: #00054C;
    /* forget about all the other properties, they are inherited!
    You know what the "C" in "CSS" stands for? */
} 
```

JS：

```
document.getElementById("button1").className = "active"; 
```

顺便说一句，我猜你不应该使用 IE 不支持的[`hidden`属性](http://www.whatwg.org/specs/web-apps/current-work/multipage/editing.html#the-hidden-attribute)来隐藏你的内容。改用内联样式：

```
document.getElementById("dude").style.display = "none"; 
```

# ruby-on-rails - 在 ruby on rails 中将数据保存到 CSV 文件

> ID：11419266
> 
> 赞同：1
> 
> 时间：2012-07-10T18:06:52.390
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我想将使用 html 表单从用户那里获得的一些数据添加到 ruby​​ on rails 中的 CSV 文件中。我怎样才能做到这一点？这是我的代码

```
<p>
<h2>Register using form below</h2>
<p class="error"></p>
<form action="" method="post" class="scrum-form">
<p><h3>Participant information</h3></p>
<div>
<label>Full name<span class="mandatory">*</span></label>
<input type="text" name="full_name" class="full_name" />
</div>
<div>
<label>Email<span class="mandatory">*</span></label>
<input type="text" name="email" class="email" />
</div>
<div>    
<label>Phone number<span class="mandatory">*</span></label>
<input type="text" name="phone" class="phone" />
</div>
<div>
<label>Organization name<span class="mandatory">*</span></label>
<input type="text" name="organization" class="organization" />
</div>
<div>
<label>Job title<span class="mandatory">*</span></label>
<input type="text" name="job" class="job" />
</div>
<div>
<label>Special diet<span class="mandatory">*</span></label>
<input type="text" name="diet" class="diet" />
</div>
<p><h3>Billing information</h3></p>
<div>
<label>Address<span class="mandatory">*</span></label>
<textarea cols="40" rows="5" name="address" name="address" class="address"></textarea>
</div>
<div>
<label>Postal code<span class="mandatory">*</span></label>
<input type="text" name="code" class="code" />
</div>
<div>
<label>City<span class="mandatory">*</span></label>
<input type="text" name="city" class="city" />
</div>
<div>
<label>Cost pool or reference<span class="mandatory">*</span></label>
<input type="text" name="cost_pool" class="cost_pool" />
</div>
<div>
<input type="button" name="register" value="Register" onclick="registration();" />
</div>
</form>
</p> 
```

这是我的操作代码

```
full_name = params["full_name"]
email = params["email"]
phone = params["phone"]
organization = params["organization"]
job = params["job"]
diet = params["diet"]
address = params["address"]
code = params["code"]
city = params["city"]
cost_pool = params["cost_pool"] 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-10T18:25:37.647

我给你举个例子：

```
@file = "example.csv"

CSV.open(@file, "wb") do |csv|
  csv << ["data"]
  csv << ["data2", "data3"]
end 
```

这里我们有一个`csv`文件，我们用`CSV.open`. `csv`我们必须在always里面添加`arrays`一些数据。每次我们调用`csv << array`都会在`csv`文件中换行。此外，文件中的元素`array`将用逗号分隔。

因此，返回到示例，或者`"example.csv"`文件将`"data"`在它的第一行，`"data2,data3"`在它的第二行。

检查@phoet 在他的答案上发布的链接。将帮助您理解示例以及您可能需要的任何其他内容。

**已编辑**

`"wb"`您可以通过更改内部`CSV.open`调用来解决您的评论问题。

如果您通过`"ab"`，我相信它会解决您的问题，如下所示：

```
 CSV.open(@file, "ab") do |csv|
      csv << ["your_new_next_line_data"]
    end 
```

无论如何，这里有一个链接，其中包含您可以传递的所有选项：[http](http://ruby-doc.org/core-1.9.3/IO.html) ://ruby-doc.org/core-1.9.3/IO.html 。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-10T18:14:57.333

看看 rubies CSV 库（又名 FasterCSV）[http://apidock.com/ruby/CSV](http://apidock.com/ruby/CSV)

或观看最新的 railscast 之一：[http: //railscasts.com/episodes/362-exporting-csv-and-excel](http://railscasts.com/episodes/362-exporting-csv-and-excel)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-10T18:17:29.383

使用 ruby​​ 中的内置 CSV 类写入 csv 文件很简单：[http ://ruby-doc.org/stdlib-1.9.2/libdoc/csv/rdoc/CSV.html](http://ruby-doc.org/stdlib-1.9.2/libdoc/csv/rdoc/CSV.html)

但是，我建议不要将控制器耦合到此文件，而是在填写表单时坚持更新模型（并使用标准数据库）的 rails 范例的方法。然后，您可以拥有 rake 任务或管理页面，可以将您想要的数据从数据库导出到 csv 中。许多人非常喜欢[ActiveAdmin](http://activeadmin.info/)的这种功能。

# backbone.js - 将项目添加到 Backbone.js 模板中的嵌套列表

> ID：11419269
> 
> 赞同：0
> 
> 时间：2012-07-10T18:07:04.473
> 
> 标签：backbone.js

我有两个模板：

```
<script type="text/template" id="todo-template">    
      <label class="todo-content"><%= content %></label>
      <ul class="comment-list" style="margin-left: 2em"></ul>
</script>

<script type="text/template" id="comment-template">    
      <label class="comment-content"><%= content %></label>      
</script> 
```

帖子的模板和帖子项目列表中的评论模板。如果有许多不同的帖子，我如何向正确的帖子添加评论。我不能只使用

```
$("ul.comment-list").append(commentView.render().el); 
```

为了将评论附加到帖子，因为它会为所有帖子添加评论。如何处理不同待办事项模板的相应评论列表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T18:18:33.217

这取决于您如何跟踪您的帖子。如果您对每个帖子都有一个视图，那么在该视图中您可以`ul`通过它来引用权利`$el`，

编辑：

查看您的代码，我看到每个 Todo 都有一个子集合视图，因此您可以做的就是在实例化集合视图时简单地传入正确的 el，

```
var commentCollectionView =  new CommentCollectionView({collection: commentCollection, el: this.$el.find('"ul.comment-list") }; 
```

然后在您的收藏视图中，您可以将其附加到它的 el

```
this.$el.append(commentView.render().el); 
```

# android - 在暂停/恢复时删除文本框的内容

> ID：11419270
> 
> 赞同：0
> 
> 时间：2012-07-10T18:07:16.950
> 
> 标签：android, eclipse

我有一个应用程序，允许用户从文本框和按钮拨打电话号码。如您所知，电话号码是非常私密的。当用户没有杀死应用程序而只是按下主页按钮时，前一个用户的电话号码会留在那里。我想要 onPause 方法做的是从 onPause/onResume 方法的文本框中删除电话号码。在实践中似乎很简单，但我不确定是否可能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T18:11:10.220

实际上，这是一个相当简单的过程：

```
@Override
public void onPause() {
    TextView tv = (TextView) findViewById(R.id.your_text_view_id);
    tv.setText("");

    super.onPause();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T18:11:05.377

```
@Override
public void onPause()
{
    super.onPause();
    textBox.setText("");
} 
```

假设您的文本框是 EditText 或 TextView，此代码将满足您的需要。

# git - pre-receive 钩子以防止错误的修订再次出现

> ID：11419271
> 
> 赞同：0
> 
> 时间：2012-07-10T18:07:18.293
> 
> 标签：git, githooks

假设我不得不使用[`git filter-branch`](http://www.kernel.org/pub/software/scm/git/docs/git-filter-branch.html)从修订历史中删除文件。我想确保我的所有合作者在再次推送之前更新他们所有的本地副本。执行此操作的明显方法似乎是在主存储库上使用 pre-receive 挂钩，以确保引入问题文件的修订的原始修订 ID 永远不会再次出现。

我怎么写那个钩子？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T03:51:17.303

我强烈支持偏执狂。写到这，我希望你的贡献者会注意到“你的分支已经分歧”的警告，或者他们的合并提交突然引入了数百个新的 SHA1 哈希。

像下面这样的东西应该能让你大部分时间到达那里。不幸的是，我现在无法对其进行测试，但是[`git-receive-pack`](http://www.kernel.org/pub/software/scm/git/docs/git-receive-pack.html)and[`githooks`](http://www.kernel.org/pub/software/scm/git/docs/githooks.html)的手册页很有帮助，[就像这个例子一样：](http://www.ioncannon.net/system-administration/1362/example-git-pre-receive-and-post-receive-hooks-to-avoid-a-signal-13-error/)

```
#!/bin/sh
while read oldrev newrev refname
do
    git rev-list ^$oldrev $newrev | grep "<problem-hash>"
    if test $? = 0; then
        echo "Problematic hash found. Please contact the maintainer."
        exit 1
    fi
done 
```

使用预接收搜索文件本身：

```
#!/bin/sh
while read oldrev newrev refname
do
    git diff $oldrev $newrev --name-only | grep "<full_file_path>"
    if test $? = 0; then
        echo "Problematic hash found. Please contact the maintainer."
        exit 1
    fi
done 
```

# css - 更改图形标签中的边距

> ID：11419275
> 
> 赞同：1
> 
> 时间：2012-07-10T18:07:26.213
> 
> 标签：css, html

我刚开始在项目中使用 figure 和 figcaption 标签，但遇到了一个我似乎无法解决的问题。

使用图形标签，以下图像和标题会自动缩进。我有一排带有 h 标签的垂直附加媒体，看起来不错且呈线性，并希望保持这种状态。图形标签的自动缩进会以一种令人不快的方式摆脱它。我正在使用 Django，所以图片是用户提交的（将图片大小与标题匹配是另一个问题）。

有没有办法（可能使用 CSS）来删除自动缩进？非常感谢任何见解或经验。

```
 {% if story.pic %}
            <h2>Image</h2>
              <figure>
            <img class="image"src="{{ story.pic.url }}" alt="some_image_alt_text"/>
            {% if story.caption %}
                <figcaption>{{story.caption}}</figcaption>
            {% endif %}
            {% endif %} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T18:26:26.863

似乎浏览器通常会增加一个边距。尝试设置边距：0，如下所示：

```
figure {margin:0} 
```

# android - Android HttpPost 超时异常不起作用

> ID：11419278
> 
> 赞同：1
> 
> 时间：2012-07-10T18:07:38.233
> 
> 标签：android, android-asynctask, http-post

我正在尝试将我的应用程序设置为在 HttpPost 上 3 秒后引发超时异常。我正在从 ASyncTask 执行此请求。出于某种原因，即使我给它一个不存在的域，它也会挂起大约一两分钟，然后抛出最后一个异常。为什么我的超时异常不起作用？

```
protected Void doInBackground(String... params) {
            HttpPost httpPost = new HttpPost("http://hgfdhgfdhgfdhfgdhgfdhgfdhfgd.com");
            HttpParams httpParameters = new BasicHttpParams();
            HttpConnectionParams.setConnectionTimeout(httpParameters, 3000);
            HttpConnectionParams.setSoTimeout(httpParameters, 3000);
            DefaultHttpClient httpClient = new DefaultHttpClient(httpParameters);
            try {
                httpPost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
                HttpResponse httpResponse = httpClient.execute(httpPost);
                HttpEntity httpEntity = httpResponse.getEntity();
                is =  httpEntity.getContent();  

            } catch(ConnectTimeoutException e){
                Log.e("Timeout Exception: ", e.toString());
            } catch(SocketTimeoutException ste){    
                Log.e("Timeout Exception: ", ste.toString());
            } catch (Exception e) {
                Log.e("log_tag", "Error in http connection "+e.toString());
            }

            try {
                BufferedReader br = new BufferedReader(new InputStreamReader(is));
                StringBuilder sb = new StringBuilder();
                String line = "";
                while((line=br.readLine())!=null){
                    sb.append(line+"\n");
                }
                is.close();
                result=sb.toString();
            } catch (Exception e) {
                Log.e("log_tag", "Error converting result "+e.toString());
            }
            return null;

        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T18:11:38.730

不要在那里调用完成。

为什么在抛出带有特定错误消息的异常时不返回 null 。

在 postexecute 方法中，当结果为空时，做任何需要做的事情。

# java - 在不同的类中使用 hashmap

> ID：11419279
> 
> 赞同：0
> 
> 时间：2012-07-10T18:07:38.717
> 
> 标签：java

我在单例类中创建了一个哈希图，我们将其称为 A 类。我还创建了一个扩展 AbstractTableModel 的 TableModel 类，我们将其称为 B 类。在 C 类中，我想使用哈希图中的值来填充一个jtable。

我的问题是如何获得 B 类的哈希图？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T18:13:57.943

使用组合......

`A a = A.getInstance();` **// 我假设 getInstance() 是返回类 A 的 Singleton 引用的方法。**

`a.myHash.getKey();` **// 调用任何你想要的方法......**

`B b = new B();` **// 由于 B 不是单例，我们可以使用 "new"**

**现在用 HashMap 中的数据填充 B 中的表**

# android - Android 对话框和按钮

> ID：11419280
> 
> 赞同：-1
> 
> 时间：2012-07-10T18:07:40.703
> 
> 标签：android, android-dialog

我已经在android中开发了一个对话框，我正在使用两个按钮。但是我不知道单击按钮时如何调用另一个 XML 布局。请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T18:15:40.690

您想要做的是调用一个分配给它的 xml 布局的活动。看看这个[http://developer.android.com/guide/topics/ui/dialogs.html#ShowingADialog](http://developer.android.com/guide/topics/ui/dialogs.html#ShowingADialog)你会想把这样的东西放在一个 onclick 事件中。

```
Intent i = new Intent(SettingsActivity.this, Traffic_DroidActivity.class);
startActivity(i); 
```

# bash - iptables Bash 函数中的错误参数“ACCEPT”

> ID：11419283
> 
> 赞同：1
> 
> 时间：2012-07-10T18:07:53.633
> 
> 标签：bash, function, iptables

**我正在尝试创建一个 bash 函数，它将远程 VPS 上的 IP 列入白名单：**

```
function whitelist-ip () { ssh vps-01 '/usr/bin/sudo /sbin/iptables -v -I INPUT 1 -s $1 -j ACCEPT'; } 
```

> [jdorfman@mba.local]:~$ 白名单-ip 192.0.43.10
> 
> 错误的论点“接受”
> 
> 尝试 iptables -h' 或 'iptables --help' 以获取更多信息。

**它在 CLI 中工作：**

> [jdorfman@mba.local]:~$ ssh vps-01 '/usr/bin/sudo /sbin/iptables -v -I INPUT 1 -s 192.0.43.10 -j ACCEPT'
> 
> ACCEPT all opt -- in * out * 192.0.43.10 -> 0.0.0.0/0

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T18:12:15.347

您硬引用了命令，因此`$1`不会扩展。改用软引号：

```
 function whitelist-ip () { ssh vps-01 "/usr/bin/sudo /sbin/iptables -v -I INPUT 1 -s $1 -j ACCEPT"; } 
```

# continuous-integration - 在 Jenkins 上配置 yslow

> ID：11419284
> 
> 赞同：1
> 
> 时间：2012-07-10T18:07:58.567
> 
> 标签：continuous-integration, jenkins, yslow

我可以在配置 Jenkins 以使用 yslow 方面获得一些帮助吗？

我在 yslow 的闪电演讲中看到它可以用 CI 实现，但它并没有提供太多关于如何去做的信息。我在谷歌上搜索了很多 yslow 和 CI 或 jenkins，但一直找不到任何东西。

谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-11T19:50:53.577

抱歉，好像[有人破坏了 PahntomJS wiki 页面](https://twitter.com/marcelduran/status/223132634807668736)的 YSlow，但它又回来了，请查看：[https ://github.com/marcelduran/yslow/wiki/PhantomJS](https://github.com/marcelduran/yslow/wiki/PhantomJS)

有 Jenkins 屏幕截图，但没有逐步集成，我刚刚用以下内容更新了 wiki：

* * *

一旦你安装了 Jenkins、PhantomJS 和 YSlow for PhantomJS 并正常工作，只需将以下 shell 命令添加到你的构建过程中：

`phantomjs /tmp/yslow.js -i grade -threshold "B" -f junit http://built-page-here > yslow.xml`

在上面的行中：

*   PhantomJS 脚本的 YSlow 位于`/tmp/yslow.js`
*   `-i grade`指定将测试所有规则
*   `-threshold "B"`指定所有规则的最低可接受分数以及总分
*   `-f junit`指定 Jenkins 的输出格式
*   `http://built-url-here`是您项目的可访问的构建页面 url
*   `yslow.xml`是junit格式的输出结果

如果您安装了 TAP 插件（通过 Jenkins 插件管理器），您可以替换上面的行或添加另一个测试，如下所示：

`phantomjs /tmp/yslow.js -i grade -threshold "B" -f tap http://built-page-here > yslow.tap` 在上面的行中：

*   PhantomJS 脚本的 YSlow 位于`/tmp/yslow.js`
*   `-i grade`指定将测试所有规则
*   `-threshold "B"`指定所有规则的最低可接受分数以及总分
*   `-f tap`指定 TAP Jenkins 插件的输出格式
*   `http://built-url-here`是您项目的可访问的构建页面 url
*   `yslow.tap`是 TAP 格式的输出结果

确保在指向输出测试结果文件的构建后操作中发布 JUnit 和/或 TAP 结果报告，例如：yslow.xml、yslow.tap 等。

* * *

# jquery - 如何使用jquery查找从子到父的元素计数？

> ID：11419287
> 
> 赞同：2
> 
> 时间：2012-07-10T18:08:10.777
> 
> 标签：jquery

我有一个小问题，我需要计算元素的嵌套级别。问题是父元素可以包含多个子元素，而子元素可以有自己的子元素。

请查看我想从哪里开始计数（标有文字“我从这里开始”）。

HTML：

```
<div class="main_set">
    <div class="child_set">
        <div class="child_set">
            <div class="child_set">I start here!</div>
        </div>
        <div class="child_set"></div>
    </div>
    <div class="child_set">
        <div class="child_set"></div>    
    </div>
</div> 
```

我已经尝试了几件事来获得计数 3。
例如我的最后一次尝试：

```
$(this).closest('.main_set').find('.child_set'); 
```

这显然返回 6 计算所有 child_sets。

如何计算从开始位置到仅考虑嵌套`child_set`的元素。`main_set`所以基本上在我的例子中如何获得计数 3？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-10T18:11:37.880

您可以使用[parents()](http://api.jquery.com/parents/) from`this`查找所有父母（使用特殊选择器）；对于长度，您必须为当前添加一个。

```
alert($(this).parents('.child_set').length + 1); 
```

另请参阅[此示例](http://jsfiddle.net/G8WtL/1/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T18:13:29.940

如果你想计算`child_set`从 div 开始的所有内容`I start here!`，你可以这样做：

```
$(this).parents('.child_set').length + 1 
```

这会给你`3`。`1`添加 是因为您的带有文本的 div也`I start here!`具有`child_set`类。

**文档：**

*   [http://api.jquery.com/parents/](http://api.jquery.com/parents/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-10T18:17:26.953

您必须调用 stopPropagation 否则它将调用父事件，因为它们具有相同的 class `child_set`。

```
 $('.main_set').on('click', '.child_set', function(e) {
        e.stopPropagation();
        console.log($(this).parents('.child_set').andSelf().length);
    }); 
```

[工作演示](http://jsfiddle.net/ricardolohmann/LHqY2/)

看看这个其他演示：[**链接**](http://jsfiddle.net/ricardolohmann/LHqY2/1/%3Cbr%3E)
在这里你可以看到它适用于任何 div。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-10T18:10:29.933

使用`.children()`而不是`.find()`

[这里明确说](http://api.jquery.com/children/)

> .children() 方法与 .find() 的不同之处在于 .children() 仅沿 DOM 树向下移动一个级别，而 .find() 也可以向下遍历多个级别以选择后代元素（孙子等）。

# c# - web.config 中的嵌套部分

> ID：11419290
> 
> 赞同：-3
> 
> 时间：2012-07-10T18:08:28.577
> 
> 标签：c#, web-config

我需要在我的 Web.config 文件中创建嵌套部分，我找不到任何符合我要求的示例。

```
<IPTests>
    <Environment environment="DEV">
      <Machine machine="Web01">
        <SiteIP site="Sitecore" ip="10.10.2.191">
        </SiteIP>
      </Machine>
    </Environemnt>
</IPTests> 
```

这用于不同应用程序/站点的“健康检查”。我需要检查不同站点使用的所有资源是否正常工作。我已经使用 DNS 完成了这项工作，但是我现在需要在不同的环境中为我们的不同服务器执行此操作，方法是使用 IP 地址访问不同的服务器。

任何帮助都会很棒！

这就是我到目前为止所拥有的。

```
public class IPTests : ConfigurationSectionGroup
    {
        [ConfigurationProperty("codeEnvironment")]
        public CodeEnvironmentSection CodeEnvironment
        {
            get { return (CodeEnvironmentSection)base.Sections["codeEnvironment"]; }
        }
    }

    public class CodeEnvironmentSection : ConfigurationSection
    {
        [ConfigurationProperty("environemnt")]
        public ValueElement To
        {
            get { return (ValueElement)base["environemnt"]; }
        }
    }

    public class MachineSection : ConfigurationSection
    {
        [ConfigurationProperty("machine")]
        public ValueElement To
        {
            get { return (ValueElement)base["machine"]; }
        }
    }

    public class SiteIPSection : ConfigurationSection
    {
        [ConfigurationProperty("site")]
        public ValueElement To
        {
            get { return (ValueElement)base["site"]; }
        }

        [ConfigurationProperty("ip")]
        public ValueElement To
        {
            get { return (ValueElement)base["ip"]; }
        }
    }

    public class ValueElement : ConfigurationElement
    {
        [ConfigurationProperty("value")]
        public string Value
        {
            get { return (string)base["value"]; }
            set { base["value"] = value; }
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T18:12:18.380

查看[配置部分设计器](http://csd.codeplex.com/)。我用它来生成配置类，然后花了一些时间了解 API 和设计。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T18:22:30.797

看起来您正在尝试在 web.config 中存储信息数据库。如果这可能完全改变，那么你不应该将它存储在这里。

问题是对 web.config 的任何更改都会导致您的网站重新启动并重置用户会话缓存等。

如果您致力于添加自己的部分，那么您可以通过创建自定义`ConfigurationSection`类来做到这一点：

*   [http://msdn.microsoft.com/en-us/library/system.configuration.configurationsection.aspx](http://msdn.microsoft.com/en-us/library/system.configuration.configurationsection.aspx)

您可以在网上搜索更多信息，因为那里有很多教程。

# php - CURL 仅在特定主机上的特定站点上不返回任何内容

> ID：11419291
> 
> 赞同：2
> 
> 时间：2012-07-10T18:08:28.970
> 
> 标签：php, curl

自去年 1 月以来，我一直在使用 curl 从支付网关获取 xml 响应，而在另一个使用相同代码的网关之前大约 5 年。上周五它停止工作，代码没有被修改，主机和支付网关都告诉我也没有任何改变。

我已经进行了多次测试以使用 curl、fopen 和 file_get_contents 访问 url 以尝试使其工作。我似乎能够访问 Google、Facebook 和 php.net 等常见网站，但不能访问我想要的网站和我工作过的其他网站。

我用于测试的代码是：

```
$ch = curl_init();
curl_setopt($ch, CURLOPT_VERBOSE, 1); // comment once in production
if(!curl_setopt($ch, CURLOPT_URL, $url)) {echo 'CURLOPT URL Error<p>';}
if(!curl_setopt($ch, CURLOPT_HEADER, 1)) {echo 'CURLOPT Header Error<p>';}
if(!curl_setopt($ch, CURLOPT_HTTPHEADER, array('POST /AUTHORIZE HTTP/1.0', 'MIME-Version: 1.0', 'Content-type: application/PTI21',
'Content-transfer-encoding: text', 'Request-number: 1', 'Document-type: Request'))) {echo 'CURLOPT HTTPHEADER Error<p>';}
if(!curl_setopt($ch, CURLOPT_TIMEOUT, 90)) {echo 'CURLOPT TIMEOUT Error<p>';} 
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1); // gives error, but keeps xml formatting

$result=curl_exec ($ch);
curl_close ($ch);
echo $result;
$options = array(
    'return_info'   => true,
    'method'        => 'post'
);
$result = file_get_contents($url);
print_r($result);

$fd = fopen( $url, "r" );
if( !$fd )
{
    echo "Cannot open URL";
} else {
    while ( !feof( $fd ) ) {
        $buffer = fgets( $fd, 4096 );
        echo $buffer;
    }
    fclose ( $fd );
} 
```

我想知道它是否有任何问题，因为在另一台主机上它每次都有效，并且它所在的主机只适用于我尝试的一半网站。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T18:25:09.520

在不知道实际 URL 的情况下很难给出有效的响应。

一个问题可能是 URL 正在重定向，例如当某些人将 domain.com 重定向到 www.domain.com 时。

对于那些你可以使用的场景。

```
 curl_setopt($ch, CURLOPT_FOLLOWLOCATION, true); 
```

请运行以下命令以获取有关所发生情况的更多信息。

```
print_r(curl_info($ch)); 
```

将该代码放在 curl_exec 的正下方

# javascript - 更改父元素的类

> ID：11419292
> 
> 赞同：-1
> 
> 时间：2012-07-10T18:08:29.453
> 
> 标签：javascript, jquery, html

我有一个填充表格的网络应用程序，我需要根据存储在其中的值设置一些单元格的背景颜色。我用谷歌搜索了各种 javascript 和 jQuery 解决方案，但似乎没有什么是我想要的。

编辑：

HTML 是微不足道的。相关部分只是：

```
<td class="green"><asp:Literal runat="server" ID="t3r3c3" /></td> 
```

在代码隐藏中我有这个：

```
string controlIndex = tableIndex + "r" + row.ToString() + "c" + col.ToString();
Literal cellTarget = (Literal)form1.FindControl(controlIndex);
cellTarget.Text = cellValue;
if (controlIndex.Equals("t3r3c3") && Convert.ToDouble(dr[dc]) >= 0.7)
{
    // Code to change class of parent element <td> to red here.
} 
```

有问题的单元格的值是不可预测的。默认情况下，背景颜色为绿色，但我可能需要根据单元格中的值将其切换为黄色或红色。

编辑：

这是相关行的渲染 HTML。超过 70% 我需要将类更改为黄色或红色。

```
<tr><td class="green">40%</td><td class="green">30%</td><td class="green">70%</td><td class="green">48%</td><td class="green">43%</td><td class="green">90%</td></tr> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T18:10:09.527

由于您的帖子没有代码，因此很难提供适当的帮助，但是要直接回答您的问题，您可以`$(this).parent().addClass('yourClass');`使用 , 设置父元素类来更改，您可以使用`$(this).parent().attr("class", "yourClass");`

# visual-c++ - 无法打开包含文件 config.h

> ID：11419294
> 
> 赞同：7
> 
> 时间：2012-07-10T18:08:36.680
> 
> 标签：visual-c++, include, compiler-errors, file-not-found

头文件之一使用

```
#include <config.h> 
```

但我不断收到错误

> 致命错误 C1083：无法打开包含文件：'config.h'：没有这样的文件或目录

我不知道为什么。config.h 位于项目的 headers 文件夹中，当我右键单击它时，我实际上也可以打开该文件，但在构建项目时仍然出现此错误。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-10T18:10:31.620

这一定意味着该目录未添加到项目属性中的额外包含目录选项卡中。如果标头与源文件不在同一位置，则是否将其添加到项目中都没有关系。

转到**项目属性**（右键单击项目）->**配置属性**-> **C/C++** ->**常规**->**附加包含目录**并添加标题所在的目录（可能类似于“./headers”）。

# javascript - html 表单数组到 JSON

> ID：11419298
> 
> 赞同：2
> 
> 时间：2012-07-10T18:09:04.420
> 
> 标签：javascript, arrays, json

我有一个包含多个值的动态 html 表单，我需要将表单数据添加到 JSON 并将其发布到 php 页面以插入 mysql。

形式：

```
<input type="text" name="name[]" id="p" />
<input type="text" name="manuf[]" id="k" size="3" />
<input type="text" name="item_pr[]" id="ka" size="10" />
<input type="text" name="price" id="su" size="10" disabled="disabled"/><br /> 
```

首先尝试创建 JS 数组，但无法弄清楚如何在一个代码行中获取所有值以及如何转换为 json 并发布到 php：

```
var elementai = document.getElementsByName('name[]');
          for (var i = 0, j = elementai.length; i < j; i++) {
          var elementas = elementai[i];
          alert(elementas.value);
          } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T18:22:48.000

好吧，您可以使用 jQuery，因为它易于使用且编写的代码更少。虽然我在这里给出了两种解决方案。

**在 JavaScript 中：**

```
$.fn.extractObject = function() {
  var accum = {};
  function add(accum, namev, value) {
    if (namev.length == 1)
      accum[namev[0]] = value;
    else {
      if (accum[namev[0]] == null)
        accum[namev[0]] = {};
      add(accum[namev[0]], namev.slice(1), value);
    }
  }; 
  this.find('input, textarea, select').each(function() {
    add(accum, $(this).attr('name').split('.'), $(this).val());
  });
  return accum;
}
// ...

var object = $('#testformId').extractObject();
console.log(object); 
```

​这里是[演示](http://jsfiddle.net/G2XVq/)：http: [//jsfiddle.net/G2XVq/](http://jsfiddle.net/G2XVq/)

**在 jQuery 中：**

```
$.fn.serializeObject = function()
{
    var o = {};
    var a = this.serializeArray();
    $.each(a, function() {
        if (o[this.name] !== undefined) {
            if (!o[this.name].push) {
                o[this.name] = [o[this.name]];
            }
            o[this.name].push(this.value || '');
        } else {
            o[this.name] = this.value || '';
        }
    });
    return o;
};

$(function() {
    $('form').submit(function() {
        $('#result').text(JSON.stringify($('form').serializeObject()));
        return false;
    });
});​ 
```

（jQuery 部分取自[这里](https://stackoverflow.com/questions/1184624/convert-form-data-to-js-object-with-jquery)）

这是[演示](http://jsfiddle.net/sxGtM/3/)：http: [//jsfiddle.net/sxGtM/3/](http://jsfiddle.net/sxGtM/3/)

**用于通过 javascript 将数据发布到 php：**

```
 var str_json = JSON.stringify(myObject) //gives me the JSON string.

// AJAX XMLHttpRequest object in Javascript to send data to the server:
request= new XMLHttpRequestObject()
request.open("POST", "Phppage.php")
request.setRequestHeader("Content-type", "application/json", true)
request.send(str_json) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T18:18:26.307

下面的解决方案利用 jQuery 的[.map()](http://api.jquery.com/map/)函数来最大限度地减少准确达到所需结果所需的代码量。

**HTML：**

```
<input type="text" name="name" id="p" /> 
<input type="text" name="manuf" id="k" size="3" /> <input type="text" name="item_pr" id="ka" size="10" /> 
<input type="text" name="price" id="su" size="10" disabled="disabled"/>
<br /> 
<input type="button" id="go" value="Go >>" onclick="createJSONObject()" /> 
```

**jQuery：**

```
function createJSONObject(){
    var formValues = $('input[type=text]');
    var obj = {};
    $.map(formValues, function(n, i) {
        obj[n.name] = $(n).val();
    });

    console.log(JSON.stringify(obj));
} 
```

演示：http: [//jsfiddle.net/mBLkH/](http://jsfiddle.net/mBLkH/)

上面的代码创建了一个元素的 jQuery 对象，然后将每个元素的属性和`input`映射到对象变量。然后它利用将对象格式化为可视上下文。`name``value``obj``JSON.stringify(obj)`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T18:47:00.557

如果您只想获取文本输入并且知道表单的 ID：

```
var inputs = document.getElementById('myForm').getElementsByTagName('input');
var params = {};
for(var i=0; i < inputs.length; i++){
    var curr = inputs[i];
    if(curr.getAttribute('type')==='text')){
        params[curr.getAttribute('name')] = curr.value;
    }
} 
```

使用 jQuery 发布：

```
$.post('myUrl',params,function(data){ console.log(data); }); 
```

或直接使用 javascript： [https ://stackoverflow.com/a/8567146/1081941](https://stackoverflow.com/a/8567146/1081941)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-10T18:30:05.447

jQuery 在这方面完胜了。

证明：http: [//jsfiddle.net/iambriansreed/nTnhW/](http://jsfiddle.net/iambriansreed/nTnhW/)

纯 JavaScript：

```
var input_ids = ['p','k','ka','su'];

for (var i = 0, j = input_ids.length; i < j; i++) {
    var element = document.getElementById(input_ids[i]);
    alert(element.value);
}​ 
```

# serial-port - 串口：无法发送/接收数据

> ID：11419299
> 
> 赞同：0
> 
> 时间：2012-07-10T18:09:10.340
> 
> 标签：serial-port, serial-communication, hyperterminal

我一直在用 Visual C# 编写一个程序，最终将通过串行端口输入数据流来填充数据库。

我在通过串口发送和接收数据时遇到问题。为了消除我可能的错误编码，我正在使用 Hilgraeve 的 HyperTerminal。我目前实际上并没有使用串行端口，出于测试目的，这是我的设置：

PC1 - USB 到 RS232 转换器 - 母到母 RS232 耦合 - RS232 到 USB 转换器 - PC2

（两个转换器都有公 RS232 端，所以我不得不使用中间的耦合器）。

我使用此设置只是为了确保在开始测试与 C# 应用程序的串行端口通信之前正确发送和接收数据（并且我拥有的任何计算机上都没有 COM 端口）。两台计算机都有与 USB-to-RS232 转换器相关的驱动程序；转换器在设备管理器中显示为两台 PC 上的 COM 端口。设备管理器说它们都工作正常（如果这意味着什么）。

当我打开超级终端时，我使用 COMx 进行连接（其中 x 是与转换器关联的 COM 端口号）。对于端口设置，我使用每秒 9600 位、8 个数据位、无奇偶校验、1 个停止位和无流量控制。然后我通过单击工具栏上的“呼叫”连接到端口。我为两台电脑做这一切。当我在一台 PC 上键入键时，另一台 PC 上没有显示任何内容。

有没有人知道会发生什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-22T17:49:39.133

错误的连接器，您需要一个[空调制解调器](http://en.wikipedia.org/wiki/Null_modem)。

（从 Hans Passant 的评论中复制，以允许问题按照[协议](https://meta.stackexchange.com/questions/54718/how-should-i-handle-questions-which-are-answered-in-the-comments)显示为已回答。）

# jquery - jQuery 动画持续时间

> ID：11419300
> 
> 赞同：1
> 
> 时间：2012-07-10T18:09:12.210
> 
> 标签：jquery, jquery-animate, duration

我正在尝试为来自 margin: 0 auto; 的表格的过渡设置动画。到保证金：0 0 0 0；使用以下脚本，但是无论我将参数设置为持续时间，动画都会立即发生。我该如何解决？

```
function select(box) {
  $("table td").not("#" + box).hide("slow");
  $("#" + box).animate({ height: 60, width: 60 }, "slow");
  $("table").animate({ "margin": "0px 0px 0px 0px" }, 1900);      //<--- problem here

  if(box != "help")
      $(".sideLinks").show("slow");
  else
      $(".sideLinks").not("#show_help_links").show("slow");
  } 
```

编辑：这是html

```
<!DOCTYPE html>

<html>
<head>
    <meta http-equiv='X-UA-Compatible' content='IE=edge' />
<title>SAPUI5 First Test</title>

<link rel="Stylesheet" type="text/css" href="funStyle.css" />

<script id="sap-ui-bootstrap"
      src="resources/sap-ui-core.js"
      data-sap-ui-theme="sap_platinum"
      data-sap-ui-libs="sap.ui.commons, sap.ui.table">
</script>

    <!--<script src="pageAnimation.js"></script>-->
    <script src="Menu2.js"></script>
    <!--<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js">-->
    </script>
</head>
<body id="body">
    <nav>
        <table class="links">
            <tr>
                <td id="HR_forms" class="homeLinks" onclick="select(this.id);">
                    <a href="#">
                    <!--<img src="images/HR.gif" /><br />HR forms-->
                    </a>
                </td>
                <td id="finance_forms" class="homeLinks" onclick="select(this.id);">
                    <a href="#">
                    <!--<img src="images/money.jpg" /><br />Finance forms-->
                    </a>
                </td>
            </tr>
            <tr>
                <td id="find_forms" class="homeLinks" onclick="select(this.id);">
                    <a href="#">
                   <!-- <img src="images/form.jpg" /><br />Other forms-->
                    </a>
                </td>
                <td id="all_forms" class="homeLinks" onclick="selectAll();">
                    <a href="#">
                    <!--<img src="images/list.jpg" /><br />All forms-->
                    </a>
                </td>
            </tr>
            <tr>
                <td id="help" class="homeLinks" onclick="select(this.id);">
                    <a href="#">
                    <!--<img src="images/help.png" /><br />Help-->
                    </a>
                </td>
                <td id="contact_us" class="homeLinks" onclick="select(this.id);">
                    <a href="#">
                    <!--<img src="images/phone.jpg" /><br />Contact Us-->
                    </a>
                </td>
            </tr>
        </table>
</nav>

<div id="show_all_links" class="sideLinks" style="display: none" onClick="reset();">Show All Links</div>

</body>
</html> 
```

- 风格 -

```
body {
    /*background-color: #AAAAAA;*/
    background: url("images/black-honeycomb.jpg");
}

canvas {
    background-color: #7AC3E9;
    position: absolute;
    top: 0;
    left: 0;
    display: block;
    margin: 0 0px 0 0px;
    z-index: -1;
}

footer {
    background: url("images/marvelBar.png") no-repeat;
    background-size: 100%;
    position: absolute;
    bottom: 0;
    margin: 0px -13px -0px -10px;
    width: 100%;
    height: 83px;
}

.topBar {
    background: url("images/iPhone_toolbar_black.png");
    background-repeat: repeat-x;
    height: 43px;
    margin: -10px -8px 0px -10px;
    text-align: center;
    font: bold 24px helvetica;
    line-height: 2; 
    color: White;
}

.logo {
    position: absolute;
    right: 0;
    height: 40px;
    margin-right: 25px;
}

.back {
    background: url("images/backButton.png") no-repeat;
    background-size: 80px 33px;
    position: absolute;
    left: 0;
    top: 0;
    margin: 5px 0 10px 5px;
    width: 80px;
    height: 43px;
    font: bold 12px helvetica;
    color: White;
    text-align: center;
}

.login {
    background-color: #7AC3E9;
    position: absolute;
    left: 50%;
    top: 40%;
    margin-left: -171px;
    border: 1px solid black;
    border-radius: 15px;
}

.welcome {
    background-color: #7AC3E9;
    color: #3E4B61;
    text-align: center;
    position: absolute;
    left: 50%;
    top: 50px;
    margin-left: -81px;
    border: 1px solid black;
    border-radius: 15px;
    padding: 10px;
}

table {
    border-spacing: 5px;
}

ul {
    display: block;
    margin: -204px 0 0 0;
}

.HR_forms_links {
    display: none;
    list-style-type: none;
    background-color: White;
    border: 1px solid #C0C0C0;
    border-top-width: 0;
    border-left-width: 0;
    border-right-width: 0;
    text-align: left;
    padding: 10px 56px 10px 0;
    margin: 0px -8px 0 50px;
    background-image: url("images/listArrow.png") center;
}

.HR_forms_links a {
    display: block;
    margin: -10px 0px -10px 0px;
    text-decoration: none;
    font: bold 24px arial;
    color: Black;
    padding: 10px 46px 10px 10px;
    width: 100%;
    z-index: 10;
}

.finance_forms_links {
    display: none;
    list-style-type: none;
    background-color: White;
    border: 1px solid #C0C0C0;
    border-top-width: 0;
    border-left-width: 0;
    border-right-width: 0;
    text-align: left;
    padding: 10px 56px 10px 0;
    margin: 0px -8px 0 50px;
    background-image: url("images/listArrow.png") center;
}

.finance_forms_links a {
    display: block;
    margin: -10px 0px -10px 0px;
    text-decoration: none;
    font: bold 24px arial;
    color: Black;
    padding: 10px 46px 10px 10px;
    width: 100%;
    z-index: 10;
}

.help_links {
    display: none;
    list-style-type: none;
    background-color: White;
    border: 1px solid #C0C0C0;
    border-top-width: 0;
    border-left-width: 0;
    border-right-width: 0;
    text-align: left;
    padding: 10px 56px 10px 0;
    margin: 0px -8px 0 50px;
    background-image: url("images/listArrow.png") center;
}

.help_links a {
    display: block;
    margin: -10px 0px -10px 0px;
    text-decoration: none;
    font: bold 24px arial;
    color: Black;
    padding: 10px 46px 10px 10px;
    width: 100%;
    z-index: 10;
}

.contact_us_links {
    display: none;
    list-style-type: none;
    background-color: White;
    border: 1px solid #C0C0C0;
    border-top-width: 0;
    border-left-width: 0;
    border-right-width: 0;
    text-align: left;
    padding: 10px 56px 10px 0;
    margin: 0px -8px 0 50px;
}

.contact_us_links a {
    display: block;
    margin: -10px 0px -10px 0px;
    text-decoration: none;
    font: bold 24px arial;
    color: Black;
    padding: 10px 46px 10px 10px;
    width: 100%;
    z-index: 10;
}

#alt_help_menu {
    margin: 0;
}

#help_menu {
    margin-top: -140px;
}

#allForms {
    display: block;
    margin-top: -140px; 
}

.sideLinks {
    border-radius: 15px;
    text-align: center;
    height: 60px;
    width: 60px;
    background: #FFFF80;
    margin: 5px 0 0 7px;
}

.listArrow {
    padding: 0;
    height: 30px;
    margin: 0px -40px 0 0;
    float: right;
    border: none;
}

.subBar {
    background-image: url("images/iPhone_subtoolbar_black.png");
    height: 20px;
    text-align: left;
    color: White;
    font: bold 16px arial;
    text-shadow: 0 1px #999;
    margin: 0px -8px 0 50px;
    padding-right: 46px;
    list-style-type: none;
}

.subBar:hover {
    cursor: pointer;
}

.formsubBar {
    margin-top: -20px;
}

.logoText {
    margin: 0px 0 0 105px;
    position:relative;
    top: -54px;
}

h1 {
    color: Fuchsia;
}

h2 {
    font-size: small;
}

nav {
    margin: 0 auto;
    display: block;
}

nav li {
    list-style-type: none;
    padding: 0 10px 0 10px;
}

/*---------------Form Style----------------*/
.simple_hire {
    width: 100%;
    text-align: left;
    border: 1px solid #000000;
    }

.Simple_Hire_left {
    text-align: left;
    width: 50%;
    padding: 10px
    }

.Simple_Hire_right {
    text-align: left;
    width: 50%;
    padding: 10px;
    }

.Simple_Hire_mid {
    text-align: left;
    width: 100%;
    }

.Simple_Hire_left_2 {
    text-align: left;
    width: 50%;
    padding: 10px;
    }

.Simple_Hire_right_2 {
    text-align: left;
    width: 50%;
    padding: 10px;
    }

.submit1 {
    top: 550px;
    left: 550px;
    }

.reset {
    top: 550px;
    left: 440px;
    }

.right {
    float: right;
}

.textarea {
    float: right;
    width: 99%;
    margin: 0 0 0 -10px;
}

.formTable {
    display: none;
    margin-top: 224px;
    max-width: 850px;
    margin-left: 90px;
    margin-right: -8px;
    background: #7AC3E9;
}

.formTable ul {
    margin-left: -90px;
    margin-right: 8px;
}

.form {
    margin: 0 -8px 0 50px;
}

#send_reset {
    margin: -17px 0px 0 -30px;
    position: relative;
    left: 50%;
    max-width: 150px;
}

/*----------tabled app---------------*/

.links {
    margin: 0 auto 0 auto;
}    

.homeLinks {
    border: 1px solid #999999;
    border-radius: 15px;
    text-align: center;
    height: 150px;
    width: 150px;
    background: #FFFF80;
}
/*
.homeLinks {
    margin: 10px 0 0 0;
}
*/
.homeLinks img {
    height: 90%;
    width: 90%;
}

#HR_forms {
    background: url("images/HRtext.png") no-repeat 50% 50%; 
    background-size: 40%;
    background-color: #FFFF80;
} 

#finance_forms {    
    background: url("images/financeText.png") no-repeat 50% 50%; 
    background-size: 40%;
    background-color: #E01B6A;
}

#find_forms { 
    background: url("images/findform.png") no-repeat 50% 50%; 
    background-size: 40%;
    background-color: #1CE3ED;
}

#all_forms {
    background: url("images/Form.jpg") no-repeat 50% 50%; 
    background-size: 40%;
    background-color: #3BFF62;
}

#help {
    background: url("images/helpText.png") no-repeat 50% 50%; 
    background-size: 40%;
    background-color: #ff3300;
}

#contact_us {
    background: url("images/phone.jpg") no-repeat 50% 50%; 
    background-size: 40%;
    background-color: #FFFF80;
}

#loadingSpinner {
    background: #999999;
    height: 150px;
    width: 150px;
    border-radius: 15px;
    display: none;
    margin-top: 50%;
    margin-left: 50%;
} 
```

更新：所以我通过将动画包装在 a 中并为 div 设置动画来使动画与表格一起使用，但这不适用于我上面的示例，对此的任何见解将不胜感激

编辑：我发现我有 2 个 jquery 库，其中一个没有正确动画，感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T18:16:08.780

你可以试试`animate`回调函数：

```
$("#" + box).animate({ height: 60, width: 60 }, "slow", function(){
   $("table").animate({ "margin": "0px"}, 1900); 
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T18:20:51.047

也许您期望另一个启动速度。选择缓动类型。我认为默认值是线性的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T18:14:03.097

如果你想在第一个动画之后开始第二个动画，你可以实现一个完成事件一个回调函数在动画完成后调用。 [http://api.jquery.com/animate/](http://api.jquery.com/animate/) 您设置的参数是动画长度的持续时间。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-10T18:14:55.140

是的，这是正确的行为。`auto`是 CSS 属性的一个特殊值，它不是任何数字，而`.animate`只能与数值一起使用。所以，当你开始你的动画时，**表格边距**变成`0 0 0 0`了……就这样。摆脱`auto`边距并使用一些数值来获得正确的插值，从而获得平滑的动画。

# children - hCard 属性元素必须是子元素还是子元素？

> ID：11419301
> 
> 赞同：0
> 
> 时间：2012-07-10T18:09:16.313
> 
> 标签：children, microformats, descendant, hcard

基本上我想知道这是否仍然有效作为 hcard。

```
<div class="vcard">
<h2>Phone Number: <span class="tel">800-288-3875</span></h2>
</div> 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T22:10:47.247

hCard 属性不需要是直接后代，它们可以嵌套几层深（如您的示例以及 Microformats wiki 上的许多示例，例如参见[hCard 创作技巧页面](http://microformats.org/wiki/hcard-authoring)）。

但是，您示例中的 hCard 是不完整的，因为它缺少一些[必需的属性](http://microformats.org/wiki/hcard#Property_List)，因此某些解析器可能无法识别它。

# java - 这是使用哪个版本的 AES？

> ID：11419302
> 
> 赞同：0
> 
> 时间：2012-07-10T18:09:18.580
> 
> 标签：java, aes

```
Cipher cipher = Cipher.getInstance("AES"); 
```

和

```
Key key = new SecretKeySpec(keyValue, "AES"); 
```

这使用的是什么版本的 AES，我如何指定 128/256 位？

编辑：'keyValue 是一个 string.getBytes()，我很确定它决定了 128/256 位，那么我的 'keyValue' 应该多长时间才能使其成为 256 位加密？

编辑2：更多细节：

```
final String key = "TrIlGnUmAkUkQkPe";
  final byte[] keyValue = key.getBytes(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T18:20:35.403

[该文档](http://docs.oracle.com/javase/6/docs/technotes/guides/security/StandardNames.html#algspec)说它是 128。您可以从[Java 文档](http://docs.oracle.com/javase/6/docs/api/javax/crypto/spec/SecretKeySpec.html#SecretKeySpec%28byte%5B%5D,%20int,%20int,%20java.lang.String%29)中的几个链接导航到它，该链接从[Java Cryptography Architecture Reference Guide](http://docs.oracle.com/javase/6/docs/technotes/guides/security/crypto/CryptoSpec.html#AppA)开始。

# arrays - 如何通过ado参数对象将javascript数组传递给oracle存储过程

> ID：11419308
> 
> 赞同：1
> 
> 时间：2012-07-10T18:10:03.053
> 
> 标签：arrays, oracle, asp-classic, ado, jscript

我正在开发一个 asp+oracle web 项目，我需要一个多用户选择功能。

1、使用javascript建立一个字符串数组：

```
 var userArray = ["Simon","Sheng","Cheng"]; 
```

2，通过ado参数对象传递它，但我不知道如何填充参数ojbect：

```
var cmd = Server.CreateObject("ADODB.Command");
var param = cmd.CreateParameter("par",????????????)<--I don't know how to fill; 
```

3、在oracle中创建存储过程

```
 create or replace package demo_pkg
    as
       type charArray is table of varchar2(255) index by binary_integer;
       type t_cursor is ref cursor;
    procedure p_test(p_id in charArray,p_cursor out t_cursor );
    end;

    create or replace package body demo_pkg
    as
    procedure p_test (p_id in charArray,p_cursor out t_cursor )
    AS
v_cursor t_cursor;
    BEGIN
open v_cursor for
      select last_name from employees where last_name in (select * from table(cast(p_id as charArray)))
p_cursor := s_test;
    end;
    end; 
```

谷歌3天后，我还在这里，谁能帮帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T09:14:14.763

格式为：

```
CreateParameter( name, type, direction, size, value ) 
```

您需要的值是：

```
adVarChar = 200
AdArray = 0x2000
adParamInput = 1 
```

你会这样称呼它：

```
var param = cmd.CreateParameter( 'par', adVarChar + AdArray, adParamInput, 255, userArray ) 
```

# php - fputcsv 和整数类型转换为字符串

> ID：11419319
> 
> 赞同：16
> 
> 时间：2012-07-10T18:10:37.907
> 
> 标签：php, excel, csv, fputcsv

所以我有一条线我想做一个 fputcsv 有一些整数（我需要被视为字符串，但它们是数字）。这些整数的前导零在我执行 fputcsv 时会被截断，但我不希望这种情况发生，有什么办法解决这个问题吗？我尝试将变量键入为（字符串）并将我的变量放在引号中，但到目前为止我发现的唯一方法是在整个数字周围加上引号，这导致引号在我打开它时显示在 csv 文件中excel，我不想发生。有谁知道让这个工作的方法？我认为 fputcsv 只是出于某种原因自动为这个变量分配一个类型，并使它成为一个整数或其他东西......

编辑示例文本：

我的 fputcsv：

```
02305109 
```

我在 excel 中打开的 csv 文件中得到了什么：

```
2305109 
```

但是当我只使用 vi 打开所述 csv 文件时，前导零仍然存在。真的很奇怪。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2016-12-08T21:16:00.480

对于我想要作为字符串的长数字，我遇到了同样的问题。用单引号括起来并使其可评估。

'="' . $yourNumber . '"'

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-07-02T15:20:56.717

尝试在前导零整数前添加（或附加）一个空字符。

```
$csv[0] = 02392398."\0"; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-10T18:38:38.350

Excel 将值解释为数字并将其格式化。这与php无关。

这个 SU 帖子有一些信息：[https ://superuser.com/questions/234997/how-can-i-stop-excel-from-eating-my-delicious-csv-files-and-excreting-useless-da](https://superuser.com/questions/234997/how-can-i-stop-excel-from-eating-my-delicious-csv-files-and-excreting-useless-da)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-10-03T11:43:21.527

将其输出为公式，例如：

$line["phone"]= "=\"" .$line["phone"]. "\"";

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-04-26T07:49:26.850

我的代码太简单了

```
//header utf-8
fprintf($fh, chr(0xEF).chr(0xBB).chr(0xBF));
fputcsv($fh, $this->_head);
$headerDisplayed = true;
//put data in file
foreach ( $this->_sqlResultArray as $data ) {
    // Put the data into the stream
    fputcsv($fh, array_map(function($v){
        //adding "\r" at the end of each field to force it as text
        return $v."\r";
    },$data));
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-10-25T13:04:04.820

将单引号添加到数据的开头将解决问题。

即 '930838493828584738 而不是 930838493828584738 转换为此 934E+n

如果 csv 文件是由第三方提供的，这可能是个问题。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-07-10T18:43:29.523

使用格式化列`"00000000"`

这样做的好处是它会在保存时保留格式

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2013-11-11T11:17:46.623

您只需要在数字的开头添加一个引号：

```
'123456 
```

并且excel不会将此单元格格式化为数字。

* * *

## 回答 #9

> 赞同：-2
> 
> 时间：2012-07-10T18:25:16.583

尝试使用前导撇号（单引号）。IIRC 保留前导零但不出现在 Excel 中。

# smtp - CentOS 服务器 - 监控 SMTP 进程的数量，如果通过 X 发送电子邮件？

> ID：11419322
> 
> 赞同：1
> 
> 时间：2012-07-10T18:10:47.127
> 
> 标签：smtp, centos, ps

我的公司有一个托管的 CentOS 服务器，托管了十几个网站。我们使用 Plesk 进行管理，但我个人主要通过终端工作。本周末，我们客户的一个域的电子邮件帐户遭到入侵，服务器开始发送垃圾邮件。我们因垃圾邮件而被列入黑名单，这导致我们的一些网站在我弄清楚发生了什么时关闭。

显然，我想避免这种情况再次发生。我一开始没有设置服务器——在同一个 IP 上为多个网站运行 http 托管和邮件托管可能不是最好的设置，因为只需要一个愚蠢的客户端，用一个弱电子邮件密码来管理多个网站.

作为一个短期修复，我想知道是否可以让脚本监控 SMTP 进程的数量，如果超过某个阈值则给我发电子邮件？当服务器发送垃圾邮件时，它正在运行大约 80 个 SMTP 进程，这让我知道它被用作垃圾邮件服务器。另外，对长期处理这种情况有什么想法吗？服务器有一个 8 个 IP 块。

感谢您的帮助，欢迎任何建议/意见。我是 LAMP 开发人员，而不是全职 *nix 管理员。我在想

每 5 分钟触发一次 cron 作业
管道 #ps -A 输出到文件
读取文件并通过正则表达式计算字符串“SMTP”的出现次数
如果需要发送电子邮件

但是该死，这似乎有点令人费解：/

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T19:34:49.420

搞定了 这是计算 SMTP 进程数的 shell 脚本，如果超过 10 个，则发送带有计数的电子邮件：

```
#!/bin/bash  <- change as appropriate for your shell
NUMSMTP = $(ps ax | grep 'smtp' | wc -l)
if [[ $NUMSMTP -gt 10 ]] ; then
    echo "the server has $NUMSMTP processes running" | mail -s "subject" admin@example.com
fi 
```

通过 cron 安排它通过 /etc/crontab 中的 crontab 每五分钟运行一次，使用

```
*/5 * * * * /path/to/script.sh 
```

并赢得:)

# php - 自定义变量的 Piwik 过滤器图

> ID：11419324
> 
> 赞同：29
> 
> 时间：2012-07-10T18:10:59.000
> 
> 标签：php, mysql, graph, analytics, matomo

在 piwik 中，是否可以根据来自跟踪器的自定义变量过滤访问者图表？我想`70`在第一个自定义变量槽中显示所有访问的演变图。我试过这个电话

> index.php?module=API&method=ImageGraph.get&idSite=1&apiModule=VisitsSummary&apiAction=get&token_auth=anonymous&graphType=evolution&period=day&date=2012-01-01,2012-07-10&width=500&height=250&filter_column=custom_var_v1&filter_pattern=70

但得到了

> 此图没有数据。

当我删除`filter_pattern`我得到一个图表。我检查了`piwik_log_visit`数据库中的表，我有访问记录的值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-01T21:38:15.143

使用 custom_var_v1 = 70 创建一个细分（我建议将其设置为预存档，以防您有大量流量）。

# r - 从R中的矩阵创建变量名

> ID：11419329
> 
> 赞同：0
> 
> 时间：2012-07-10T18:11:09.160
> 
> 标签：r

我是 R 新手，并试图在数据集（“数据”）中创建许多新变量。

在这个数据集中，这些列是问题是否被回答的二分编码。问题编号用下标表示（“Q_1”、“Q_2”）。每个问题都有几个属性，我想使用相同的下标（即“Q_Attribute1_1”、“Q_Attribute2_1”）来命名，因为我需要重塑将数据转换成多级分析的长格式。但是因为我总共有 30 个问题，每个问题都有 18 个问题级别的属性，所以手动创建 540 个变量（30x18）似乎并不聪明。另外一个问题是，每个问题都与单个值，例如 0/1。

创建了两个向量（一个带有变量名称，一个带有关联值）后，我需要将每个唯一变量名称作为*列*添加到包含 20,000 个案例的更大数据集（“main.data”）中。我希望这个变量的值与上面数据中列出的所有情况下的值相同。这将如何实施？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T19:04:22.363

你能不能把你的数据放在一个数据框中：

```
data<-matrix(rbinom(18*30,1,.5),nrow=18,ncol=30)
questions<-paste("Q",1:30,sep="_")
attributes<-paste("Attribute",1:18,sep="")
df<-data.frame(data,row.names=attributes)
names(df)<-questions 
```

然后您可以访问所有 Q_1 答案：

```
> df[,'Q_1']
 [1] 0 1 0 1 1 1 1 0 1 1 0 0 1 1 1 0 1 1 
```

所有具有属性 2 的问题：

```
> df['Attribute2',]
           Q_1 Q_2 Q_3 Q_4 Q_5 Q_6 Q_7 Q_8 Q_9 Q_10 Q_11 Q_12 Q_13 Q_14 Q_15
Attribute2   1   0   0   0   1   1   0   1   0    1    1    1    1    1    0
           Q_16 Q_17 Q_18 Q_19 Q_20 Q_21 Q_22 Q_23 Q_24 Q_25 Q_26 Q_27 Q_28
Attribute2    1    1    1    0    0    1    1    0    1    0    0    1    1
           Q_29 Q_30
Attribute2    1    0 
```

或问题 1 属性 18

```
> df['Attribute1','Q_18']
[1] 1 
```

编辑：

如果您只想创建 540 个变量，那么：

```
test<-paste("Q_Attribute",c(1:18),sep="")
test<-c(sapply(test,function(x,y){paste(x,y,sep="_")},y=c(1:30)))
lapply(test,function(x){assign(x,NA,envir = .GlobalEnv)}) 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-11T16:11:39.290

**解决我的问题的代码：**

```
You may use "melt" function in reshape2 package to transform the data to 
long format. Hope the following example helps! 
> set.seed(1) 
> data <- matrix(rbinom(15, size = 1, 0.5), 3, 5) 
> colnames(data) <-  paste("attribute", 1 : 5, sep = "") 
> data <- data.frame(question = 1 : 3, data) 
> data

  question attribute1 attribute2 attribute3 attribute4 attribute5 
1        1          0          1          1          0          1 
2        2          0          0          1          0          0 
3        3          1          1          1          0          1 
> library(reshape2) 
> melt(data, "question") 

  question   variable value 
1         1 attribute1     0 
2         2 attribute1     0 
3         3 attribute1     1 
4         1 attribute2     1 
5         2 attribute2     0 
6         3 attribute2     1 
7         1 attribute3     1 
8         2 attribute3     1 
9         3 attribute3     1 
10        1 attribute4     0 
11        2 attribute4     0 
12        3 attribute4     0 
13        1 attribute5     1 
14        2 attribute5     0 
15        3 attribute5     1 `

#Then, concatenate two variables into a unique name.
> data_long$varnames <-paste(data_long$variable, data_long$W1Qs, sep="")  

#Next, create a vector of all of the unique variable names
> myvars <-c(data_long$varnames)
#Also create a vector of the values corresponding to the unique variable names
> myvalues <-c(data_long$value)

#Then, just add in use the vector of var names to create new columns in main dataset
> main.data[myvars] <-0
#Replace the values assigned to those columns FOR ALL ROWS with the values in 2nd vector
> main.data=rep(myvalues, each=NROW(main.data)) 
```

# scala - Managing 2 connections in Scala-esque fashion

> ID：11419335
> 
> 赞同：0
> 
> 时间：2012-07-10T18:11:22.903
> 
> 标签：scala

I'm connecting to a vendor API using 2 TCP connections. On one connection I make synchronous requests; the second connection is used for the API to push out responses.

I'm currently using the [ganymed-ssh-2](https://github.com/hudson/ganymed-ssh-2) library to establish the two connections with the server. I perform a handshake when making the connections: on establishing the sync connection, I receive a token, which I use to authenticate on the async channel. I'm currently simply printing out all messages received on the async channel once I'm authenticated.

What steps should I take to keep making requests on the sync channel (simply using stdin at the moment), and continuing to print the responses from the async channel on stdout? I'm not sure whether I should be using an Actor (I've struggled to find an example of an Actor which can read from a input stream and parse messages correspondingly), or whether there's some other Scala-esque construct I should be using.

```
class SyncConnection {
  def connect(): String = {
    // Establish connection    
    ...    
    val out = new PrintStream(outputStream)
    val in = new BufferedSource(inputStream).getLines()

    // Make login request, receive token
    out.println("loginRequest")
    out.flush()

    val token = in.next()

    token
  }
}

class AsyncConnection {
  def connect(token: String) {
    // Establish connection    
    ...    
    val in = new BufferedSource(inputStream).getLines()
    val out = new PrintStream(outputStream)

    // Authenticate using token
    out.println(token)
    out.flush()

    // Print all messages received on input stream
    for (line <- in) println(line)    
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T15:02:18.110

I ended up using a combination or regular Scala actors and Akka actors to accomplish this task. The actors can easily pass messages to one another to perform the handshake:

*   sync requestor actor makes login request
*   sync listener receives token needed to establish async connection
*   sync listener forwards token to async requestor
*   async requestor makes authentication request
*   async listener receives confirmation of successful authentication

I hooked 2 regular actors up to the input streams of the two connections:

```
class InputStreamReaderActor(lines: Iterator[String], listener: ActorRef) extends Actor {
  def act() {
    for (line <- lines) {
      listener ! line
    }
  }
} 
```

This would read any incoming messages on the two connections, and immediately forward the response to a listener actor. These listener actors looked like the following:

```
class SyncListenerActor() extends Actor {
  def receive: Receive = {
    // respond to incoming messages
  }
} 
```

And to make requests on the connections, I simply hooked the output streams of each connection to an Akka actor:

```
class SyncRequestorActor(out: PrintStream) extends Actor {
  def receive: Receive = {
    //    
  }

  def sendRequest(request: String) {
    println("Making request: " + request)
    out.println(request)
    out.flush()
  }
} 
```

# php - 我应该使用哪个 HTTP 动词来将许多项目添加到集合中？

> ID：11419343
> 
> 赞同：0
> 
> 时间：2012-07-10T18:11:39.440
> 
> 标签：php, ruby-on-rails, rest, crud

在 REST 中，如果您想替换您使用的整个集合：

```
PUT with /resourses
params=[{name:'Daniel', age:'19'}, {name: 'John', age: '17'}] 
```

如果要创建一个新项目，请使用：

```
POST with /resources
params={name:'Daniel', age:'19'} 
```

我不想要它们，我想要的是在资源中添加许多项目而无需调用

```
POST /resources 
```

很多次

我正在寻找类似的东西：

```
STRANGEVERB /resources
params=[{name:'Daniel', age:'19'}, {name: 'John', age: '17'}] 
```

将它们添加到现有集合中

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T18:18:39.620

使用`POST`，只需在服务器端检查是否已发布数组或单个对象。不要尝试编造 HTTP 动词。

如果您觉得有必要在此处分隔路由，请使用不同的 URL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T19:33:15.610

我建议不要编造 HTTP 动词。如果您正在创建新对象，请使用`POST`动词。此外，批处理`POST`并不是一个好主意，因为每个对象都可能由于不同的原因而失败或成功，这会发出不同的消息。现在你必须处理这些。

许多 SaaS 提供商（包括像 37 Signals 这样的顶级提供商）实现单个 object 是有原因`POST`的。这样你就可以单独处理每一个。

如果您真的打算做批处理`POST`，那么请遵循 RESTful 方法并创建一个代表批处理的资源并在内部运行对象处理，但是您仍然会在成功创建时返回单个代码，如 201 或 207 如果它是多状态响应。

祝你好运。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T21:40:07.767

我会遍历散列数组并单独创建每个对象。大卫，这是最好的做法是有原因的。

```
persons = [{:name => "Joe", :age => 10},{:name => "Blow", :age => 10}]
persons.each do |person|
  Person.create(person)
end 
```

# jquery - 显示从数据库检索到的图像到图像控件

> ID：11419345
> 
> 赞同：2
> 
> 时间：2012-07-10T18:11:42.557
> 
> 标签：jquery, asp.net, image, download

我需要帮助来显示数据库中的图像。我读过使用处理程序将图像从数据库加载到处理程序是有效的。但我不想使用处理程序，因为我假设当您将 imageUrl 设置为处理程序时，图像只会在 pageLoad 时加载。就我而言，我的 img 标签中存在一个现有图像，然后在上传后，我需要更改该图像。我使用 ajaxFileUploader 插件并成功上传并将图像保存到数据库。我现在的问题是检索它。

在成功调用 jquery ajax 后，我将使用 ajax 调用 webmethod。这是我的代码：

```
$.ajaxFileUpload
(
    {
        url: 'AjaxFileUploader.ashx',
        secureuri: false,
        fileElementId: 'uploadControl',
        dataType: 'json',
        data: '{}',
        success: function () {
            $.ajax({

                type: "POST",

                url: "UserProfile.aspx/displayImage",

                data: jsonData,

                contentType: "application/json; charset=utf-8",

                dataType: "json",

                success: function (mydata) {
                }
            });
        },
        error: function () {

        }
    }
) 
```

在我的 ImageRetrieval 中，存在以下代码：

```
 public void ProcessRequest(HttpContext context)
    {
    string userid = context.Request.QueryString["user"];
        DBAccess dbacc = new DBAccess();
        DataTable dt = dbacc.getImage(userid);
        byte[] image = ((byte[])dt.Rows[0]["UserImage"]);
        System.Drawing.Image img = byteArrayToImage(image);

        MemoryStream stream = new MemoryStream();
        img.Save(stream, System.Drawing.Imaging.ImageFormat.Jpeg);
        img.Dispose();
        stream.Position = 0;
        byte[] data = new byte[stream.Length];
        stream.Read(data, 0, (int)stream.Length);
        stream.Dispose();
        context.Response.Clear();
        context.Response.ContentType = "image/jpeg";
        context.Response.BinaryWrite(data);
} 
```

我的字节到图像转换：

```
 public Image byteArrayToImage(byte[] byteArrayIn)
    {
        MemoryStream ms = new MemoryStream(byteArrayIn);
        Image returnImage = Image.FromStream(ms);
        return returnImage;
    } 
```

我的数据库访问：

```
 public DataTable getImage(string userid)
    {
        DataTable dtGetImage = new DataTable();

        using (SqlConnection cn = MySqlDataAccess.sqlDataAccess.MySqlConnection())
        {
            using (SqlCommand cmd = MySqlDataAccess.sqlDataAccess.MySqlCommand(cn, CommandType.Text, "SELECT * FROM Images WHERE UserId = @userid"))
            {
                cmd.Parameters.Add("@userid", SqlDbType.NVarChar).Value = userid;

                using (SqlDataAdapter da = MySqlDataAccess.sqlDataAccess.MySqlAdapter(cmd))
                {
                    da.Fill(dtGetImage);
                }
            }
        }

        return dtGetImage;
    } 
```

FileUploader.ashx 代码：

```
 public void ProcessRequest(HttpContext context)
    {
       string path = context.Server.MapPath("~/Temp");
            if (!Directory.Exists(path))
                Directory.CreateDirectory(path);

            var file = context.Request.Files[0];

            string userid = context.Request.QueryString["user"];

            string fileName;

            if (HttpContext.Current.Request.Browser.Browser.ToUpper() == "IE")
            {
                string[] files = file.FileName.Split(new char[] { '\\' });
                fileName = files[files.Length - 1];
            }
            else
            {
                fileName = file.FileName;
            }
            string fileType = file.ContentType;
            string strFileName = fileName;

            int filelength = file.ContentLength;
            byte[] imagebytes = new byte[filelength];
            file.InputStream.Read(imagebytes, 0, filelength);
            DBAccess dbacc = new DBAccess();
            dbacc.saveImage(imagebytes, userid);

            var serializer = new System.Web.Script.Serialization.JavaScriptSerializer();
            var result = new { name = file.FileName };
            context.Response.Write(serializer.Serialize(result));
    } 
```

请帮忙！谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T18:23:13.453

您有一些不错的总体思路，但缺乏整体结构。你最好的选择是使用一个[使用处理程序](http://www.dotnetperls.com/ashx)，但在你的成功函数中引用处理程序。例子：

```
var userId = 'MyUserIdFromSomewhere';
$.ajaxFileUpload
(
    {
        url: 'AjaxFileUploader.ashx',
        secureuri: false,
        fileElementId: 'uploadControl',
        dataType: 'json',
        data: '{}',
        success: function () {
            $('.ImageId').attr('src', '/ImageRetrieval.ashx?user=' + userId);
        },
        error: function () {

        }
    }
) 
```

您可能希望修改您的处理程序，使其看起来更像：

```
using System;
using System.Web;
using System.Configuration;
using System.IO;
using System.Data;
using System.Data.SqlClient;

public class DisplayImg : IHttpHandler
{

    public void ProcessRequest(HttpContext context)
    {
        Int32 userId;
        if (context.Request.QueryString["userId"] != null)
            userId = Convert.ToInt32(context.Request.QueryString["userId"]);
        else
            throw new ArgumentException("No parameter specified");

        context.Response.ContentType = "image/jpeg";
        Stream strm = getImage(userId);
        byte[] buffer = new byte[2048];
        int byteSeq = strm.Read(buffer, 0, 2048);
        //Test File output. IIS_USR *SHOULD* have write access to this path, but if not you may have to grant it
        FileStream fso = new FileStream( Path.Combine(Request.PhysicalApplicationPath, "test.jpg"), FileMode.Create);

        while (byteSeq > 0)
        {
            fso.Write(buffer, 0, byteSeq);
            context.Response.OutputStream.Write(buffer, 0, byteSeq);
            byteSeq = strm.Read(buffer, 0, 2048);
        }

        fso.Close();
    }

    public Stream getImage(string userid)
    {

        using (SqlConnection cn = MySqlDataAccess.sqlDataAccess.MySqlConnection())
        {
            using (SqlCommand cmd = MySqlDataAccess.sqlDataAccess.MySqlCommand(cn, CommandType.Text, "SELECT UserImage FROM Images WHERE UserId = @userid"))
            {
                cmd.Parameters.Add("@userid", SqlDbType.NVarChar).Value = userid;

                object theImg = cmd.ExecuteScalar();

                try
                {
                    return new MemoryStream((byte[])theImg);
                }
                catch
                {
                    return null;
                }
            }
        }
    }

    public bool IsReusable
    {
        get
        {
            return false;
        }
    }
} 
```

DataAdapter 可能会错误地编码/解释数据块并损坏您的图像。

# algorithm - 四 (2 tris) 索引的算法

> ID：11419348
> 
> 赞同：0
> 
> 时间：2012-07-10T18:12:03.933
> 
> 标签：algorithm, computational-geometry

我有一个随机数量的顶点列表，我想获得四边形形状的 2 个三角形的索引。每四个顶点应构成 2 个三角形。例如：

```
0,1,2,  0,2,3,
4,5,6,  4,6,7,
8,9,10, 8,10,11 
```

我确信这很简单，但不知道如何生成它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T18:20:25.777

```
For quad : int from 0 To VertexCount / 4
    //First triangle
    index[6 * quad + 0] = 4 * quad
    index[6 * quad + 1] = 4 * quad + 1
    index[6 * quad + 2] = 4 * quad + 2

    //Second triangle
    index[6 * quad + 3] = 4 * quad;
    index[6 * quad + 4] = 4 * quad + 2
    index[6 * quad + 5] = 4 * quad + 3
Next 
```

# php - 在 phpbb3 论坛脚本上添加元标记

> ID：11419350
> 
> 赞同：0
> 
> 时间：2012-07-10T18:12:04.550
> 
> 标签：php, phpbb3

我正在尝试在 phpbb3 论坛脚本上添加机器人元标记。我确实将它添加到了overall_header.html 文件中，但它根本没有出现在任何页面上。还有其他主要模板文件吗？请建议您知道完成此任务的最佳方法。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T12:05:04.013

需要通过管理面板停止缓存以立即查看我们的自定义更改。

# extjs - 使用 ComponentQuery.query() 设置标签的值

> ID：11419358
> 
> 赞同：2
> 
> 时间：2012-07-10T18:12:42.007
> 
> 标签：extjs, extjs4, extjs4.1

我创建了一个窗口，并添加了一个标签。现在我想使用该标签访问该标签`query`并将文本设置为该标签。我该怎么做？我需要使用 更改标签 ( `firstlabel`) 的文本`Ext.ComponentQuery.query`。有人能帮助我吗 ？

```
Ext.define('ProjectExample.view.ex.FirstWin', {
    extend: 'Ext.window.Window',
    alias : 'widget.firstW',
    items: [
            xtype: 'panel',
            title: 'First Panel',
            items: [{
                xtype: 'label',
                name: 'firstlabel',
                text: 'THIS IS A LABEL'
                }]
    ];  
    var panelArr = Ext.ComponentQuery.query('panel');
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T20:32:12.853

你可以做：

```
var label = Ext.ComponentQuery.query('window > panel > label')[0];
label.setText('new label text'); 
```

这是一个例子：http: [//jsfiddle.net/dbrin/XuQg4/](http://jsfiddle.net/dbrin/XuQg4/)

# jquery - 为每个 Raphael 对象设置事件处理程序

> ID：11419368
> 
> 赞同：1
> 
> 时间：2012-07-10T18:13:24.103
> 
> 标签：jquery, raphael

我有一个简单的脚本，它从一个数组创建几个 Raphael 对象，然后为每个对象分配事件处理程序。问题是只有最后一个事件处理程序正在为所有对象执行。我在这里做错了什么？

```
var blockDiagram = {
    "block" :[
     {
        "width": 100,
        "height": 100,
        "text" : "this is block 1",
        "cx": 10,
        "cy": 10,
        "fill" : "blue"
     },
     {
        "width": 100,
        "height": 100,
        "text" : "this is block 2",
        "cx": 120,
        "cy": 10,
        "fill" : "yellow" 
     },
     {
        "width": 100,
        "height": 100,
        "text" : "this is block 3",
        "cx": 230,
        "cy": 10,
        "fill" : "red" 
     }
    ]
 };

var paper = new Raphael("holder", 700, 700)

for ( i=0;  i< blockDiagram.block.length; i++)
{
     ms = 500;
    width = blockDiagram.block[i].width;
    height = blockDiagram.block[i].height;
    text = blockDiagram.block[i].text;
    cx = blockDiagram.block[i].cx;
    cy = blockDiagram.block[i].cy;
    fill = blockDiagram.block[i].fill;
    p = paper.rect(cx,cy, width, height).attr({"fill": fill});
    txt = paper.text(cx ,cy, text).attr({fill: 'black', stroke: "none", opacity: 0, "font-size": 15});
    p.mouseover(function () {               
            txt.stop().animate({opacity: 1}, ms);
        }).mouseout(function () {
            txt.stop().animate({opacity: 0}, ms);
        });

 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T20:01:04.790

您可以使用[`Paper.set()`](http://raphaeljs.com/reference.html#Paper.set)

```
var set = paper.set();

for(var i = 0; i< blockDiagram.block.length; i++) {
  var width = blockDiagram.block[i].width,
    height = blockDiagram.block[i].height,
    text = blockDiagram.block[i].text,
    cx = blockDiagram.block[i].cx,
    cy = blockDiagram.block[i].cy,
    fill = blockDiagram.block[i].fill;

  var p = paper.rect(cx,cy, width, height).attr({
    block: blockDiagram.block[i], // here the custom attribute gets set (block object)
    fill: fill
  });
  set.push(p);
} 
```

我添加的属性`block`是使用创建的自定义属性[`Paper.customAttributes`](http://raphaeljs.com/reference.html#Paper.customAttributes)。因此，您可以将信息附加到任何元素。

这就是我创建`block`属性的方式：

```
paper.customAttributes.block = function(block) {
  return {
    block: block
  };
}; 
```

因此，当使用参数调用属性时，它将被设置，否则它返回之前设置的值

现在，最好的部分是，我们可以将处理程序附加到整个集合并在额外属性中获取信息集合！

```
var txt;
set.mouseover(function (e) {
  var block = this.attr('block'); // getting the attribute (the block object with the data)

  txt = paper.text(block.cx ,block.cy, block.text).attr({fill: "black", stroke: "none", opacity: 0, "font-size": 15});
  txt.stop().animate({opacity: 1}, ms);
}).mouseout(function (e) {
    txt.stop().animate({opacity: 0}, ms);
}); 
```

我做了一个[**小提琴**](http://jsfiddle.net/4Y4kw/)让你检查一下。当然它可以改进，但我希望你明白。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T21:41:41.447

根据[这个](http://raphaeljs.com/pie.html)例子找到了另一个解决方案。对于其他可能感兴趣的人。

```
var blockDiagram = {
    "block" :[
     {
        "width": 100,
        "height": 200,
        "text" : "this is block 1",
        "cx": 10,
        "cy": 10,
        "fill" : "blue"
     },
     {
        "width": 100,
        "height": 100,
        "text" : "this is block 2",
        "cx": 120,
        "cy": 10,
        "fill" : "yellow" 
     },
     {
        "width": 100,
        "height": 100,
        "text" : "this is block 3",
        "cx": 230,
        "cy": 10,
        "fill" : "red" 
     }
    ]
 };

Raphael.fn.BlockDiagram = function (blockDiagram) {
var paper = this,      
    Blocks = this.set();

function square(cx, cy, width, height, params) {       
    return paper.rect(cx, cy, width,height).attr(params);
 }

var process = function (i) {
        var width = blockDiagram.block[i].width,
            height = blockDiagram.block[i].height,
            text = blockDiagram.block[i].text,
            cx = blockDiagram.block[i].cx,
            cy = blockDiagram.block[i].cy,
            fill = blockDiagram.block[i].fill,               
            ms = 500,                
            p = square(cx, cy, width, height,{fill: fill}),
            txt = paper.text(cx , cy, text).attr({fill: fill, stroke: "none", opacity: 0, "font-size": 20});
        p.mouseover(function () {
            p.stop().animate({transform: "s1.1 1.1 " + cx + " " + cy}, ms, "gradient");
            txt.stop().animate({opacity: 1}, ms, "gradient");
        }).mouseout(function () {
            p.stop().animate({transform: ""}, ms, "gradient");
            txt.stop().animate({opacity: 0}, ms);
        });
        Blocks.push(p);
        Blocks.push(txt);
    };

for (i = 0; i < blockDiagram.block.length; i++) {
    process(i);
}
return Blocks;
};

$(function () { 
Raphael("holder", 500, 500).BlockDiagram(blockDiagram);
}); 
```

# java - Blackberry Banner 类导致 jvm 104 错误

> ID：11419373
> 
> 赞同：0
> 
> 时间：2012-07-10T18:13:45.867
> 
> 标签：java, blackberry, banner-ads

以前有没有其他人遇到过这个问题？我有一段基本上什么都不做的代码。它只是一个带有标题的空白屏幕，但是当我将占位符添加到 Banner 对象时，我收到 104 错误。

此时我什至没有初始化对象，它只是 public Banner adBanner = null;

解决方案：

实际上有两个问题，第一个是我很傻。我忘了告诉 eclipse 将外部 rim Ad 库与应用程序的其余部分一起导出。一旦我修复了构建路径，它就很好了。

第二个问题显然是将 Banner 对象设置为 null 的问题（即使它没有被执行。尽管包括库，但行

```
Banner myBanner = null; 
```

会导致问题。一旦我将其更改为

```
Banner myBanner; 
```

一切正常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T18:10:20.940

JVM 104 出现在 BlackBerry 智能手机模拟器中（在真实设备上不应该看到它），当抛出未捕获的异常时。这可能会或可能不会在您的应用程序中发生。这并不一定意味着存在重大问题，但它会提醒您您有一个应该处理的异常。

# sql-server - CROSS APPLY 风格与性能

> ID：11419380
> 
> 赞同：2
> 
> 时间：2012-07-10T18:14:18.933
> 
> 标签：sql-server, cross-apply

我应该为每个别名表达式使用单独的 CROSS APPLY 还是在可能的情况下在同一个 CROSS APPLY 中定义多个表达式？

我正在重构代码中生成的许多非常复杂的 SQL 查询（通常是四五页长的十几个 JOIN）。通常它们嵌套了五六个查询，因为某些部分在不同情况下被重用。嵌套查询的一个典型原因是一个查询提取一些值，执行计算，并为该值分配一个别名。然后封闭查询使用别名值等进行进一步计算。这是必要的，因为别名表达式只能在外部查询中引用，而不能在定义它的查询中的其他地方引用。（另一种方法，也存在于代码中，是在整个查询中重复相同的冗长子表达式十几次。）

为了简化这个意大利面条 SQL，我开始使用 CROSS APPLY 折叠这些伸缩查询。通过使用 CROSS APPLY，我可以分配一个别名并在同一查询的其他地方使用它。请注意，我的 CROSS APPLY 子句都没有通过子选择或调用 UDF 引入新表。

一开始，我把很多表达式放在同一个 CROSS APPLY 里。但是，我的代码需要模块化。在不同的情况下将需要不同的字段，因为用户可以为过滤器选择字段，并且我们为不同的列生成相似的统计信息，因此创建许多相似的查询，它们彼此之间只有一点点不同。由于有些字段建立在其他字段之上，而有些则依赖于查询中前面定义的某些 JOIN，因此我不能将所有内容放在同一个 CROSS APPLY 中。因此，CROSS APPLY 的数量可能会有所不同。

此外，从中提取的某些字段被新别名遮蔽并重新定义（通常用于删除 NULL、提供默认值等）。因此，当在其他地方引用 CROSS APPLY 定义的字段时，需要将 CROSS APPLY 的表别名指定为消除歧义。

这样做的结果是，我需要一种合乎逻辑的方式来命名我的 CROSS APPLY，并且我关心性能。如果 CROSS APPLY 的数量发生变化，那么如果 CROSS APPLY 使用简单的计数器进行编号（例如，computed1、computed2 等），那么给定字段可能会看到其名称引用从 computed3.[FIELD NAME] 更改为 computed4.[FIELD NAME]，它在查询的其余部分产生连锁反应，可能是通过调用不同的 C# 过程来组装的。这是一个维护问题。

我正在考虑的替代方法是将每个计算表达式放在单独的 CROSS APPLY 中，并且 CROSS APPLY 的名称将从表达式的别名派生。例如：

使用一个 CROSS APPLY：

```
CROSS APPLY (
    SELECT
          [TIV_BLDG] = (CASE [COVERAGE] WHEN 'TIV_BLDG' THEN VALUEAMT ELSE 0 END)

        , [TIV_OSTR] = (CASE [COVERAGE] WHEN 'TIV_OSTR' THEN VALUEAMT ELSE 0 END)

        , [TIV_CONT] = (CASE [COVERAGE] WHEN 'TIV_CONT' THEN VALUEAMT ELSE 0 END)

        , [TIV_TIME] = (CASE [COVERAGE] WHEN 'TIV_TIME' THEN VALUEAMT ELSE 0 END)

) computed2 
```

使用四个 CROSS APPLY：

```
CROSS APPLY (SELECT [TIV_BLDG] = (CASE [COVERAGE] WHEN 'TIV_BLDG' THEN VALUEAMT ELSE 0 END)) AS [TIV_BLDG_COMP]

CROSS APPLY (SELECT [TIV_OSTR] = (CASE [COVERAGE] WHEN 'TIV_OSTR' THEN VALUEAMT ELSE 0 END)) AS [TIV_OSTR_COMP]

CROSS APPLY (SELECT [TIV_CONT] = (CASE [COVERAGE] WHEN 'TIV_CONT' THEN VALUEAMT ELSE 0 END)) AS [TIV_CONT_COMP]

CROSS APPLY (SELECT [TIV_TIME] = (CASE [COVERAGE] WHEN 'TIV_TIME' THEN VALUEAMT ELSE 0 END)) AS [TIV_TIME_COMP] 
```

如果我使用这种多重 CROSS APPLY 方法，我可以轻松生成在添加新应用或删除它们时不会更改的名称，并且我可以在引用字段的代码中预测表别名将是什么。但是，这意味着更多的 CROSS APPLY 语句。性能影响是什么？有没有更好的方法来做到这一点，使用 CROSS APPLY 或其他一些 SQL Server 功能？（我不需要它是跨数据库的，所以只有 Microsoft 的功能就可以了。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T20:33:57.913

如果存在性能劣势，则必须在查询执行的编译阶段。由于执行计划在查询执行的第二秒被缓存，因此不会有性能损失。

SQL Server 可以看穿 CROSS APPLY 并将它们转换为简单的、堆叠的“计算标量”。

另一个潜在问题可能是查询的大小。不确定在 AST 节点或连接数量方面是否存在任何相关限制（我猜 CROSS APPLY 在涉及内部限制时算作连接）。

除了这些问题，我认为 CROSS APPLYs 是一个非常好的和快速的解决方案。

# wpf - 显示隐藏字段

> ID：11419382
> 
> 赞同：0
> 
> 时间：2012-07-10T18:14:21.797
> 
> 标签：wpf, xaml

我正在尝试设置一个我希望在单击按钮时出现的隐藏文本块。我正在使用 XAML 和 Caliburn.Micro。

看似简单的任务，但我必须先学会它！

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T18:18:25.027

**隐藏**

[可见性.折叠](http://msdn.microsoft.com/en-us/library/system.windows.visibility.aspx)

```
<TextBlock Visibility="Collapsed"> 
```

**显示**

```
<TextBlock Visibility="Visible"> 
```

在您的按钮单击中以编程方式进行类似的操作

```
textboxid.Visibility = 
    ( textboxid.Visibility == Visibility.Visible ) ? 
       Visibility.Collapsed : Visibility.Visible; 
```

# css - 响应式 CSS - 两种尺寸？

> ID：11419405
> 
> 赞同：0
> 
> 时间：2012-07-10T18:16:20.983
> 
> 标签：css, responsive-design

我希望有人可以阐明我将如何在 jQuery、css 等中做到这一点。

我有一个宽度为 900 像素的网站。但是，如果用户在那里展开宽度为 1140 像素或更大的窗口，我希望网站设置宽度为 1440 像素。两者之间没有任何关系，原因是因为我使用的是 jQuery 流沙插件，我希望一切都完美契合。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T18:27:40.760

媒体查询确实是要走的路；在没有链接或代码示例的情况下，类似这样的内容应该可以帮助您开始，在您的 css 中：

```
#someSelector {width:900px;}//all the css here for less than 1140px

@media all and (min-width:1139px) {//css here for 1140 and up
    #someSelector {width:1140px;}
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T18:19:14.537

我会使用媒体查询，你可以[在这里找到信息](http://webdesignerwall.com/tutorials/css3-media-queries)。他们很漂亮。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T18:22:23.277

如果你只想用 jQuery 和 CSS 来做这件事，你可以尝试以下方法（这非常简单，不是最好的方法，但可以满足你的要求）

```
$(document).ready(function(){
  $(window).resize(function(){
    if($(window).width() >= '1440'){
      $("#wrapper").css('width','1440px');
    } else {
      $("#wrapper").css('width','900px');
    }
  });
}); 
```

*或者，您也可以尝试这样做，通过嵌套 css 可以更轻松地更改布局的其他方面：*

**CSS**

```
#wrapper_small { width: 900px; }
#wrapper_large { width: 1440px; } 
```

**jQuery**

```
$(document).ready(function(){
  $(window).resize(function(){
    if($(window).width() >= '1440'){
      $("#wrapper_small").attr('id','wrapper_large');
    } else {
      $("#wrapper_large").attr('id','wrapper_small');
    }
  });
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-10T18:30:29.353

通过在您的 css 中放置类似的内容来创建媒体查询：

```
@media screen and (min-width:1400px;) 

{
   #div {
   max-width:1440px;
   width:100%;
   }
} 
```

# javascript - 将查询字符串参数与 google maps api v3 服务一起使用

> ID：11419407
> 
> 赞同：2
> 
> 时间：2012-07-10T18:16:26.513
> 
> 标签：javascript, google-maps, google-maps-api-3

我试图将带有标签参数的字符串传递给方向渲染器。没有运气。它似乎忽略了我尝试通过我的数组传递的任何字符串参数。我知道我可以使用数组以外的东西。但我更喜欢它，因为它让我很容易更新它。

```
function include(filename)
{
    var head = document.getElementsByTagName('head')[0];

    script = document.createElement('script');
    script.src = filename;
    script.type = 'text/javascript';

    head.appendChild(script)
}

include('geoxml3.js');
include('v3_epoly.js');

  var geoXml = null;
    var map = null;
    var geocoder = null;
    var toggleState = 1;
    var infowindow = null;
    var marker = null;
    var Ploc = null;
    var directionDisplay;
    var directionsService = new google.maps.DirectionsService();
//Voting Locations: Array element id = voting pct!
    var Vloc = new Array();
        Vloc[1] = '3790 S Houston St Kaufman tx 75142 (Kaufman County Library)';
        Vloc[2] = '6787 FM 741 Hartland tx 75126 (community center)';
        Vloc[3] = '7865 W Lewis FM 3039 Crandall tx 75114(School admin)';
        Vloc[4] = '678 fm 1895 kemp 75147 (Billlock church)';  

function initialize() {
    directionsDisplay = new google.maps.DirectionsRenderer();  
    geocoder = new google.maps.Geocoder();
    infowindow = new google.maps.InfoWindow({size: new google.maps.Size(150,50)}); 
    var latlng = new google.maps.LatLng(32.5890, -96.308871);

    var myOptions = {
      zoom: 10,
      center: latlng,
      mapTypeControl: true,
        mapTypeControlOptions: {style: google.maps.MapTypeControlStyle.DROPDOWN_MENU},
        navigationControl: true,
        mapTypeId: google.maps.MapTypeId.ROADMAP
    }

     map = new google.maps.Map(document.getElementById('map_canvas'),
        myOptions);
    directionsDisplay.setMap(map);
    directionsDisplay.setPanel(document.getElementById('directionsPanel')); 
    geoXml = new geoXML3.parser({
        map: map,
        suppressInfoWindows: true,
        polygonOptions: {clickable: false} 
        });
    geoXml.parse('qvote.kml');
    // exml = new EGeoXml({map: map, singleInfoWindow: true, createpolygon: createPoly});
  }

function showAddress(address) {
    var contentString = '';
    Ploc = null;
    geocoder.geocode( { 'address': address}, function(results, status) {
        if (status == google.maps.GeocoderStatus.OK) {
      var point = results[0].geometry.location;
          map.setCenter(point);
          if (marker && marker.setMap) marker.setMap(null);
          marker = new google.maps.Marker({
              map: map, 
              position: point,
          });
        for (var i=0; i<geoXml.docs[0].gpolygons.length; i++) {
          if (geoXml.docs[0].gpolygons[i].Contains(point)) {
            contentString = address+'<br>'+geoXml.docs[0].placemarks[i].name;
    //      contentString += '<br>'+point+'<br>polygon#'+i;
            Ploc = geoXml.docs[0].placemarks[i].name;
            i = 999; 
          }
        }

        google.maps.event.addListener(marker, 'click', function() {
        infowindow.setContent(contentString); 
        infowindow.open(map,marker);
        if (Ploc) calcRoute(address);
        });
    google.maps.event.trigger(marker,'click');
      } else {
        alert('Geocode was not successful for the following reason: ' + status);
      }
    });
}
function calcRoute(addy) {
  var start = addy;
  var end = Vloc[parseInt(Ploc)];
  var request = {
    origin:start, 
    destination:end,
    travelMode: google.maps.DirectionsTravelMode.DRIVING
  };
  directionsService.route(request, function(response, status) {
    if (status == google.maps.DirectionsStatus.OK) {
      directionsDisplay.setDirections(response);
    }
  });
}

google.setOnLoadCallback(initialize); 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-10T19:09:25.607

你的意思是[这样](https://maps.google.com/maps?q=Nebraska+(Jane%27s+House)+to:+Oklahoma+(Fred%27s+House)&saddr=Nebraska+(Jane%27s+House)&daddr=Oklahoma+(Fred%27s+House)&hl=en&ll=40.111689,-98.492432&spn=6.711851,9.667969&sll=37.0625,-95.677068&sspn=54.928982,77.34375&geocode=FTkgeQIdi54L-int_Ay1yI2ThzHECvMPDJAnoQ%3BFQgtFgId83o2-imdT6yxETmshzFI6gpAM88cXQ&t=m&z=7&iwloc=ddw0)吗？

见[谷歌地图参数](http://mapki.com/wiki/Google_Map_Parameters)

更新：mapki 似乎已过期。这是列表：

```
Query Translation
q=  “q” stands for “query” and anything passed in this parameter is treated as if it had been typed into the query box on the maps.google.com page.
EX.
http://maps.google.com/?q=New+York
near=   “near” can be used as the location part of a query instead of putting the entire string into q=. Also needed/useful for disambiguation.
EX.
http://maps.google.com/?q=shelton;near=new+york
http://maps.google.com/?q=shelton;near=seattle
g=  “g” is an address or location that provides extra context for the “q” parameter. Google Maps stores the last run search here, but if it is the first search it can only contain your starting location. This is a potential information leak, so make sure you do actually mean to share the content of this parameter.
mrt=    “mrt” specifies a type of search. The default is blank, which searches for everything. Other options are:
mrt=yp  –  Yellow pages
mrt=realestate — real estate listings
mrt=ds — Related maps
mrt=websearch  — local web pages (synonym for ‘yp’ ?)
mrt=loc — Locations search
Many uses will require the ‘q’ option and/or the ‘near’ option
EX.
http://maps.google.com/?q=phoenix&mrt=yp&near=tempe
start=  “start” skips the first (start-1) matches.
num=    “num” displays, at most, the given number of matches. The valid range is 0 to 20.
ll= “ll” stands for Latitude,longitude of a Google Map center – Note that the order has to be latitude first, then longitude and it has to be in decimal format.
sll=    “sll” Latitude,longitude of the point from which the business search should be performed.
spn=    “spn” Approximate lat/long span. The zoom level will be adjusted to fit if there’s no z= parameter.
latlng= “latlng” takes three numbers separated by commas. The first two numbers (presumably representing latitude and longitude multiplied by 1000000) are ignored. The third number seems to be a Google internal “Company ID” number for a particular business.
cid=    “cid” is similar to “latlng,” but generating a different map size. It takes three numbers separated by commas. The first two numbers (presumably representing latitude and longitude multiplied by 1000000) are ignored. The third number seems to be a Google internal “Company ID” number for a particular business.
geocode=    “geocode” is a concatination of “geocode” encoded values for waypoints used in directions.
radius= “radius” localizes results to a certain radius. Requires “sll” or similar center point to work.
t=  “t” is Map Type. The available options are “m” map, “k” satellite, “h” hybrid, “p” terrain.
z=  “z” sets the zoom level.
layer=  “layer” Activates overlay. Current option is “t” traffic.
lci=    “lci” activates layers of tiles and needs to be comma-separated.
view=   “view” can be used to select text view (view=text) or the normal map view (view=map).
saddr=  “saddr” source address. Use this when asking for driving directions.
daddr=  “daddr” Destination address(es). Use this when asking for driving directions.
mrad=   “mrad” gives you additional destination address.
dirflg= “dirflg” is the route type: dirflg=h Switches on “Avoid Highways” route finding mode. dirflg=t Switches on “Avoid Tolls” route finding mode. dirflg=r Switches on “Public Transit” – only works in some areas. dirflg=w Switches to walking directions – still in beta.
via=    “via” gives a comma separated list of intermediate addresses for directions, that should be ‘via points’.
doflg=  “doflg” Distance Units. (Defaults to prevalent units in country of origin.) doflg=ptk outputs directions in metric (km) and doflg=ptm outputs directions in imperial (miles).
cbll=   “cbll” is latitude,longitude for Street View.
cbp=    “cbp” Street View window that accepts 5 parameters: 1) Street View/map arrangement, 11=upper half Street View and lower half map, 12=mostly Street View with corner map 2) Rotation angle/bearing (in degrees) 3) Tilt angle, -90 (straight up) to 90 (straight down) 4) Zoom level, 0-2 5) Pitch (in degrees) -90 (straight up) to 90 (straight down), default 5
panoid= “panoid” is the panorama ID, which is the ID of the current nearby panorama object in Street View.
hl= “hl” stands for “host language”.
om= “om” stands for “overview map.” The presence of this parameter with a value other than 1 causes the overview map to be closed. If the parameter is omitted, or present with the value 1, then the overview map is open.
ie= “ie” stands for “input encoding” and can be used to specify the input character encoding set.
oe= “oe” stands for “output encoding” and can be used to specify the input character encoding set.
output= “output” is for output format (blank is default).
f=  “f” stands for “form” and controls the style of query form to be displayed. f=d Displays the “directions” form (two input boxes: from, to). f=l Displays the “local” form (two input boxes: what, where). f=q (or no parameter) The default search form is displayed (single input).
pw= “pw” stands for “print window.” It activates the print mode and initiates printing. Example, pw=2.
iwloc=  “iwloc” stands for “info window location” and specifies where the infowindow will be displayed. In a business search iwloc=A to iwloc=J will open the info window over the corresponding business marker, and iwloc=near will place it over the big green arrow if that’s currently displayed. iwloc=addr can be used on map search to explicitly request the info window to be open on the address, but that’s the default anyway. Directions search supports iwloc=start, iwloc=end and iwloc=pause1
iwd=1   “iwd” stands for “info window display” and specifies that the infowindow displayed (iwloc=) will be a detailed (expanded) view.
iwstate1=   iwstate1=ssaddfeatureinstructioncard Specifies that the infowindow is in add place mode. Use with ssp=addf and iwloc=SS.  iwstate1=sscorrectthiscard Specifies the infowindow is in edit mode. iwstate1=sscorrectthiscard:ssmovemarkercard The infowindow is in Move marker mode, with the marker bouncing and draggable. iwstate1=sscorrectthiscard:ssedithistorycard The infowindow is in View history mode, displaying a graphical list of marker moves.
msa=    “msa” is involved in My Maps processing. It does nothing without the “/ms” and “/ms” does nothing without the msa=. msa=0 Used with msid= to show a particular My Map.
msa=b Activates the “My Maps” sidebar when used in conjunction with “maps.google.com/ms”.  msa=1 shows the My Maps tab directly (like msa=b did). msa=2 Jumps directly to create new My Map form.
msid=   “msid” specifies a My Maps identifier. When used in conjunction with “maps.google.com/ms” and msa=0, the corresponding My Map is displayed.
vp= “vp” stands for “view point” and the presence of this parameter causes maps.google.com to switch into Copyright Service mode. Instead of returning the html that draws a map, it returns information about the copyright ownership in Javascript format. The vp= parameter specifies the viewpoint (i.e. the centre of the map). Copyright Service only works when the spn= and z= parameters are also supplied, indicating the span and the zoom. Optional parameters are t=, which specifies the map type, and key= which specifies the API key of the site performing the request.
sspn=   “sspn” stands for “Screen span”. Map bounds dimensions in Degrees, to calculate this use:newGLatLng(map.getBounds().getNorthEast().lat() - map.getBounds().getSouthWest().lat(),map.getBounds().getNorthEast().lng() - map.getBounds().getSouthWest().lng()).toUrlValue() 
```

# xml - 如何使用 XSLT 将这个子元素组合在一起？

> ID：11419408
> 
> 赞同：1
> 
> 时间：2012-07-10T18:16:33.550
> 
> 标签：xml, xslt

如果我有这个输入：

```
<root> 
    <library id="L1">
        <shelf1 id="1">
            <book id="1" category="science">
                <attributes>                    
                    <year>2000</year>
                </attributes>
                <attributes>
                    <author>xx</author>
                    <year>2010</year>
                    <isbn>001</isbn>
                </attributes>
                <attributes>
                    <author>yy</author>
                    <publisher>zz</publisher>
                    <isbn>002</isbn>
                </attributes>
                <other>y</other>
            </book>  
            <book id="2" category="science">
                ...
            </book>
        </shelf1>

        <shelf2>...</shelf2>
    </library>
</root> 
```

预期输出：

```
<root> 
    <library id="L1">
        <shelf1 id="1">
            <book id="1" category="science">
                <attributes>
                    <author>yy</author>                    
                    <publisher>zz</publisher>
                    <isbn>002</isbn>
                    <year>2010</year>
                </attributes>
                <other>y</other>
            </book>  
            <book id="2" category="science">
                ...
            </book>
        </shelf1>

        <shelf2>...</shelf2>
    </library>
</root> 
```

我需要将元素“属性”组合在一起。如果存在两个或多个属性，当属性的子属性以前不存在时，我们将子属性保留为新信息，但如果它以前存在，我们只需使用最新值。

如何在 XSLT 1.0 或 2.0 中进行这种转换？非常感谢您的帮助。

约翰

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T04:34:49.503

**这种转换（XSLT 2.0）：**

```
<xsl:stylesheet version="2.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>

 <xsl:template match="node()|@*">
  <xsl:copy>
   <xsl:apply-templates select="node()|@*"/>
  </xsl:copy>
 </xsl:template>

 <xsl:template match="book[attributes]">
  <xsl:copy>
    <xsl:apply-templates select="@*"/>
    <attributes>
      <xsl:for-each-group select="attributes/*" group-by="name()">
        <xsl:sort select="current-grouping-key()"/>
        <xsl:apply-templates select="."/>
      </xsl:for-each-group>
    </attributes>
    <xsl:apply-templates select="*[not(self::attributes)]"/>
  </xsl:copy>
 </xsl:template>
</xsl:stylesheet> 
```

**应用于提供的 XML 文档时：**

```
<root>
    <library id="L1">
        <shelf1 id="1">
            <book id="1" category="science">
                <attributes>
                    <year>2000</year>
                </attributes>
                <attributes>
                    <author>xx</author>
                    <year>2010</year>
                    <isbn>001</isbn>
                </attributes>
                <attributes>
                    <author>yy</author>
                    <publisher>zz</publisher>
                    <isbn>002</isbn>
                </attributes>
                <other>y</other>
            </book>
            <book id="2" category="science">
            ...
            </book>
        </shelf1>
        <shelf2>...</shelf2>
    </library>
</root> 
```

**产生想要的正确结果**：

```
<root>
      <library id="L1">
            <shelf1 id="1">
                  <book id="1" category="science">
            <attributes>
               <author>xx</author>
               <isbn>001</isbn>
               <publisher>zz</publisher>
               <year>2000</year>
            </attributes>
            <other>y</other>
         </book>
                  <book id="2" category="science">
            ...
            </book>
            </shelf1>
            <shelf2>...</shelf2>
      </library>
</root> 
```

**说明**：

1.  正确使用和覆盖身份规则。

2.  `xsl:for-each-group`正确使用带有属性的 XSLT 2.0 指令`group-by`。

3.  正确使用 XSLT 2.0 函数`current-grouping-key()`和 XPath 函数`name()`。

# bison - 由于冲突，bison 规则在解析器中无用

> ID：11419409
> 
> 赞同：0
> 
> 时间：2012-07-10T18:16:35.983
> 
> 标签：bison, rule

我写了一个语法，但是当我编译它时，我遇到了冲突（由于冲突，规则在解析器中无用）。我不知道如何解决它。我不明白“emtpy”的问题。

谢谢，九

```
axdef : BBEGIN GKLAMMERLINKS AXDEF GKLAMMERRECHTS def END GKLAMMERLINKS AXDEF GKLAMMERRECHTS
      |
      ;

def : BEZEICHNER Doppelpunkt typ def_next
    ;

def_next : def
         |
         ;

typ : basistyp
    | typ_power
    | FINSET basistyp
    | typ_function
    ;

basistypen : NAT
           | INTEGER
           | REAL
           | BOOL
           | BEZEICHNER
           ;

typ_power : POWER basistyp
          ;

typ_function : BEZEICHNER FUN BEZEICHNER
             | BEZEICHNER FUN POWER BEZEICHNER
             | KLAMMERAUF BEZEICHNER TIMES BEZEICHNER KLAMMERZU fun POWER BEZEICHNER
             ;  

fun : PFUNCTION
    | PINJ
    | PSUR
    | TFUNCTION
    | TINJ
    | SURJ
    | FFUN
    | FINJ
    | BIJ
    ; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T21:03:29.130

你的作品`def`在`def_next`我看来是错误的。很难正确编码重复项目列表的递归定义。我会这样做：

```
axdef : BBEGIN GKLAMMERLINKS AXDEF GKLAMMERRECHTS defs END GKLAMMERLINKS AXDEF GKLAMMERRECHTS
      |
      ;

defs : def defs
     | def
     ;

def : BEZEICHNER Doppelpunkt typ
    ; 
```

# sql - 在 SQL 中显示员工姓名（老板）和员工人数（下属）

> ID：11419413
> 
> 赞同：2
> 
> 时间：2012-07-10T18:16:45.830
> 
> 标签：sql, sql-server, sql-server-2008, join

我有一个表 emp 有以下数据：

```
EmpID    EmpName   MgrID 

100     King        NULL
101     Smith       100
102     Shine       100
103     Racy        102 
```

现在我想显示这样的员工姓名（老板）和员工人数（下属）

```
BOSS       SUBORDINATES 
```

* * *

```
BLAKE                 5

CLARK                 1

FORD                  1

JONES                 2

KING                  3

SCOTT                 1 
```

请指导如何在 SQL Server 2008 中查询此表。

尝试查询：

```
select e.first_name as ename,m.first_name as mname from employees e,employees m where e.manager_id=m.employee_id 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-10T18:22:53.650

*   从自我加入开始`EmpID=MgrID`
*   `MgrID`按和分组`EmpName`
*   选择`EmpName`和`count(*)`

将其转换为 SQL 是机械的：

```
SELECT b.EmpName, COUNT(*)
FROM Employee e
JOIN Employee b ON b.EmpID=e.MgrID
GROUP BY b.EmpID, b.EmpName 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T18:31:08.043

```
CREATE TABLE test (
   EmpID INT,
   EmpName VARCHAR(100),
   MgrID INT)

INSERT INTO test VALUES (100, 'King', NULL),
                        (101, 'Smith', 100),
                        (102, 'Shine', 100),
                        (103, 'Racy', 102)

SELECT t1.EmpName AS Boss, 
       COUNT(*) AS Subordinates
FROM test AS t1 INNER JOIN test AS t2 ON t1.EmpID = t2.MgrID
GROUP BY t1.EmpName 
```

# docx4j - docx4j 差异器显示出比预期更多的差异

> ID：11419418
> 
> 赞同：0
> 
> 时间：2012-07-10T18:17:09.843
> 
> 标签：docx4j

我有两个文件：

1.  [文件 1（输入）](https://docs.google.com/open?id=0B6_h2TfqvEdebnlsUVd1NXJHTXc)
2.  [文件 2（输出）](https://docs.google.com/open?id=0B6_h2TfqvEdeZ0pGamNiY3FNX2s)

文档 2 是通过转换过程传递文档 1 的结果，该过程使任何内容和格式保持不变（通过 Word 中的并排比较验证）。

但是，该过程会从 .docx 文件中删除许多 ID 号。

例如，

```
      <w:pw:rsidP="00B600D6" w:rsidR="00F55D78" w:rsidRDefault="00B600D6">

```

变成

```
      <w:p>

```

通过以下代码根据每个文档的转储：

```
正文 = ((Document)newerPackage.getMainDocumentPart().getJaxbElement()).getBody();
节点 node = org.docx4j.XmlUtils.marshaltoW3CDomDocument(body).getDocumentElement();
TransformerFactory tf = TransformerFactory.newInstance();
变压器变压器 = tf.newTransformer();
transformer.setOutputProperty(OutputKeys.OMIT_XML_DECLARATION, "no");
transformer.setOutputProperty(OutputKeys.METHOD, "xml");
transformer.setOutputProperty(OutputKeys.INDENT, "是");
transformer.setOutputProperty(OutputKeys.ENCODING, "UTF-8");
transformer.setOutputProperty("{http://xml.apache.org/xslt}indent-amount", "4");
transformer.transform（新 DOMSource（节点），
             新的 StreamResult(新的 OutputStreamWriter(System.out, "UTF-8")));

```

使用[此处推荐的 docx4j Differencer 比较方法](https://stackoverflow.com/questions/11347961/obtain-details-of-docx4j-comparison)，所有内容（除了没有应用格式的第一行）都显示为修改。

问题是：差异是由于缺少 id、格式还是其他原因造成的？

如果它很重要，我们在这种情况下使用 docx4j 对我们的往返过程执行自动健全性/回归测试（即应用“无损”过程并期望没有差异）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T12:48:50.427

**披露：我在 docx4j 上工作**

如果段落之间的唯一区别是 rsid 属性，它们仍将被检测为不同。

您可以在执行比较之前“清理”文档，这样 docx 都没有 rsid 属性。请参阅[过滤器示例](https://github.com/plutext/docx4j/blob/master/src/main/java/org/docx4j/samples/Filter.java)。

顺便说一句，查看对象（例如，单个段落或整个正文）的 XML 的更简单方法是使用 XmlUtils.marshaltoString

# jquery - 如何制作动态变量？

> ID：11419421
> 
> 赞同：0
> 
> 时间：2012-07-10T18:17:22.960
> 
> 标签：jquery, html, css

我有一个小问题，我无法解决；

我有一个 div，onTouchEnd 应该运行一些 jquery 代码（它做得很好）。运行此函数时，它将发送特定 div 的 ID。

```
<div id="tapme1" class="subject hold" onTouchEnd="goes(this.id)"></div> 
```

它运行这个函数：

```
function goes(e) {
   var now = new Date().getTime();
   var lastTouch = $(this).data('lastTouch') || now + 1 /** the first time this will make delta a negative number */;
   var lement = e
   var delta = now - lastTouch;
   if(delta<300 && delta>0) {
      if($('#tapme1').hasClass("hold")) {
          $('#tapme1').removeClass("hold");
      }
      else {
      $('#tapme1').addClass("hold");
      }
   }
   else {
      // A click/touch action could be invoked here but we need to wait half a second before doing so.
   }
   $(this).data('lastTouch', now);
}
function goes(e) {
   var now = new Date().getTime();
   var lastTouch = $(this).data('lastTouch') || now + 1 /** the first time this will make delta a negative number */;
   var lement = e
   var delta = now - lastTouch;
   if(delta<300 && delta>0){
      if($('#tapme1').hasClass("hold")) {
          $('#tapme1').removeClass("hold");
      }
      else {
           $('#tapme1').addClass("hold");
      }
    }
    else {
       // A click/touch action could be invoked here but we need to wait half a second before doing so.
    }
    $(this).data('lastTouch', now);
} 
```

如您所知，这非常有效。现在问题来了。我希望它改变被点击的 div。当我变成`$('#tapme1')`它`$(lement)`时，它什么也没做。我尝试了很多可能性。

希望你们中的任何人都可以帮助我，不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T18:19:26.450

您缺少`#`id 选择器之前的。

更改`$(lement)`为`$("#" + lement)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T18:19:46.180

你必须使用：$('#' + lement)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-10T18:21:48.287

你不见了`'#'`

将其更改为：

```
$('#' + lement) 
```

代替：

```
$(lement) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-10T18:22:04.917

你为什么不只发送`this`而不是`this.id`作为参数发送？

```
<div id="tapme1" class="subject hold" onTouchEnd="goes(this)"></div> 
```

比你可以使用

```
$(lement) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-10T18:23:59.877

您正在传递 id，例如`tapme1`. jQuery 想要一个 CSS 选择器，例如`#tapme1`. `$("#"+lement)`因此，更改您的代码以寻找`var lement = "#" + e;`.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-10T18:19:29.670

既然你已经通过了`id`，你将不得不改变：

```
$('#tapme1') 
```

到：

```
$('#' + lement) 
```

`lement`作为你的函数的参数，例如`id`你正在传递的。

# cakephp - 在 CakePHP 中使用前缀而不是扩展

> ID：11419427
> 
> 赞同：2
> 
> 时间：2012-07-10T18:17:41.040
> 
> 标签：cakephp, routing, formats, prefixes

我正在尝试`parseExtension`在我的应用程序中实现 REST 和类似功能，在 CakePHP 2 上运行。

`http://myapp.dev/controller/action.json`而不是拥有像我想使用的 URL `http://myapp.dev/json/controller/action`。

这样做的原因是，有时将扩展名放在类似`http://myapp.dev/controller/index/show:10/page:2.json`.

`:type`虽然这可以在自定义路由中实现，但我已经有很多自定义路由，并且出于维护原因不想在其中创建每个带有字段的重复项。

理想的做法是将其设置为首先将带有 /json /xml /html 等的任何 url 视为 json、xml、html 等作为扩展名。

虽然前缀路由看起来很适合这个，但它需要新的方法（例如 json_index、html_index 等，我必须将每种格式指定为单独的前缀）。

有什么好的方法可以做到这一点吗？我只是想`parseExtensions`成为一种`parsePrefixes`方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T17:05:00.857

您应该尝试以下操作：

```
Router::connect('/:ext/', array(':ext'), array('pass' => 'ext'));
Router::connect('/:ext/:controller/*', array(':ext'), array('pass' => 'ext'));
Router::connect('/:ext/:controller/:action/*', array(':ext'), array('pass' => 'ext')); 
```

然后，路由器将在路由参数的“ext”值中传递 :ext 参数。为您的所有规则添加它！

如果要使用传统路由工作，则需要使用自定义 CakeRoute。在您的应用程序文件夹中创建一个文件“/libs/routes/RestRoute.php”，将以下内容添加到其中：

```
class RestRoutes extends CakeRoute {
    function parse($url) {
        $params = parent::parse($url);

        if (empty($params)) {
            return false;
        }

        if(!in_array($params['ext'], Router::extensions())) {
            return false;
        }

        return $params;
    }
} 
```

在您的 /core/routes.php 中：

```
App::import('Lib', 'routes/RestRoute');
Router::connect('/:ext/', array(':ext'), array('pass' => 'ext', 'routeClass' => 'RestRoute'));
Router::connect('/:ext/:controller/*', array(':ext'), array('pass' => 'ext', 'routeClass' => 'RestRoute'));
Router::connect('/:ext/:controller/:action/*', array(':ext'), array('pass' => 'ext', 'routeClass' => 'RestRoute')); 
```

因此，当您的自定义路由无法传递 url 时，它会尝试使用默认 url，不带 ext 参数。否则，参数的顺序就不正常了。

也许不是最好的或更清洁的解决方案，但这是一个好的开始。

# sql - 如何汇总 SQL 表以有条件地返回值

> ID：11419428
> 
> 赞同：2
> 
> 时间：2012-07-10T18:17:43.363
> 
> 标签：sql, sql-server

我有一个有几行和几列的表。它看起来像这样：

```
Name    Description
X         PASS
X         PASS
X         FAIL 
```

我希望它只返回一行。如果都是PASS，则返回PASS。如果其中一个或多个失败，则返回 FAIL。

在 SQL Server 2008 中实现这一目标的最佳方法是什么？

编辑：名称列中的值将始终相同。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T18:29:30.203

根据数据库索引，假设您希望每个唯一名称返回一行，我会看看性能

```
select 
  name, 
  min([description]) as description
from 
    tableA
group by
name 
```

与其他解决方案相比

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-10T18:26:28.903

```
SELECT TOP 1 CASE Description WHEN 'FAIL' THEN 'FAIL' ELSE 'PASS' END
FROM DaTable
ORDER BY Description 
```

OP：桌子可能是空的吗？在那种情况下，这个查询显然不会返回任何行。

**编辑**

根据阿奎那的评论，我创建了一个修改后的查询，没有排序：

```
SELECT CASE COUNT(Description) WHEN 0 THEN 'FAIL' ELSE 'PASS' END
FROM DaTable
WHERE Description = 'FAIL' 
```

如果 DaTable 为空，此查询将返回 PASS。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-10T18:30:25.940

这是您会发现的最简单的解决方案：

```
SELECT MIN(Description) FROM tbl 
```

如果至少有一个`FAIL`，那么我们的`result`列将包含`FAIL`，否则，它将包含`PASS`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-10T18:19:40.687

您可以使用`EXISTS`来获取包含“FAIL”的行的存在。

您也可以尝试以下方法：

```
SELECT TOP 1 COALESCE(tFail.Description,t.Description)
FROM myTable AS t
LEFT JOIN myTable AS tFail ON tFail.Name = t.Name AND tFail.Description = 'FAIL' 
WHERE t.Name = 'x' 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-11T08:57:34.417

这是查询：

```
--DROP TABLE result
CREATE TABLE result(Name varchar(10),Description varchar(20))
--select * from result 
INSERT INTO result 
VALUES('X','PASS'),('X','PASS'),('X','FAIL')

;WITH CTE(descp,cnt) as (SELECT  [description],COUNT(*)  as cnt FROM result group by [description])
SELECT CASE WHEN COUNT(*) > 1 then 'FAIL'  when COUNT(*)=1  then MAX(descp) else 'PASS' END FROM CTE 
```

# java - 抑制超类的功能，是好的设计吗？

> ID：11419429
> 
> 赞同：0
> 
> 时间：2012-07-10T18:17:48.900
> 
> 标签：java, gwt, interface

我正在阅读“GWT in action 2”一书，作者提到（在开发人员可以通过扩展另一个小部件创建自定义小部件的部分中）关于如何停止/抑制超类的某些功能的提示，即方法由实现的接口给出。

作者提供的方式是重写该方法，并为开发者在 GWT 日志中添加异常。例子：

```
public HandlerRegistration addClickHandler(ClickHandler handler){ 
    GWT.log("", new Exception("Cannot add ClickHandler to ReportSizeLabel"));                      
    return null;                                                  
} 
```

我为什么要这样做，这是一个好的设计吗？

如果你必须做这样的事情，为什么不只返回一个 null 呢？

可能是我想太多了，谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T19:36:10.330

我认为这基本上是不好的。返回 null 对程序员没有帮助（最好是抛出异常），并且整个事情打破了多态性的想法。

因此，正确的答案是创建一个替代的接口链，以获取您需要但不包含的所有功能`HasClickHandlers`。但是，实际上，这可能需要很多时间。如果此函数抛出异常而不是返回 null，我愿意将其放入内部使用的代码中，但我不会发布此代码以供其他人使用。

PS：正确的答案可能是正确实施该方法-在这种情况下并不难。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-10T19:55:28.257

我看不出这有什么本质上的错误。如果来自父母的功能对孩子来说没有逻辑意义，那么禁用它似乎是一件合理的事情。记录错误可以让您知道它发生了。

返回 null 作为禁用方法是否是一个好主意取决于函数的作用。如果调用者正在检查 null 返回，然后调用恐慌中止函数，则抛出异常会更有意义。但是，如果函数“通常”返回某个填充到集合中的对象，那么返回 null 并让调用者将 null 放入集合中可能是合理的做法。

当然，如果您发现自己禁用了父类或接口的许多功能，那么在某些时候您必须询问您是否真的实现了这个接口，或者只是实现了一些恰好类似于这个接口的其他接口。但是，如果接口声明了 100 个函数并且您禁用了其中的 2 个，我认为为子集定义一个新接口是一个坏主意：这意味着现在必须维护这 98 个函数中的每一个函数的两个定义。如果它不是接口而是父类，那就更糟了。这意味着现在将有 98 个函数的两个副本。重复代码比禁用功能更糟糕。

# php - 全文搜索分数相关性分析

> ID：11419430
> 
> 赞同：3
> 
> 时间：2012-07-10T18:17:50.617
> 
> 标签：php, mysql, full-text-search, statistics

我在尝试实现全文搜索时遇到了问题。对我来说，它更像是数学/统计，而不是任何东西。从数据库中提取的数据是书名，因此查询返回的分数可能具有非常接近的值（例如：9.98；9.97；9.78 - 这些都是非常相关的结果）或分布广泛（例如：9.99；8.2；2.1 -前两个是相关的，第三个是噪音）。我不知道如何操纵查询结果来删除不相关的。标准偏差不起作用，因为它在我的第一个示例中过滤了好的结果，各种归一化方法要么省略相关结果，要么包含不相关的结果。请有任何想法或想法。

谢谢。胜利者

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T18:41:53.023

我只是在处理类似这样的问题，但使用的是基于时间的数据而不是全文。我发现了[68-95-99.7 规则](http://en.wikipedia.org/wiki/68-95-99.7_rule)，其中指出，在真正的钟形曲线中，大约 95% 的结果在均值的 2 个标准差以内。我接受了这些知识，并决定将 5% 的结果作为异常值丢弃。您可以做类似的事情——省略 5% 的相关性得分最低的全文结果。

另一种选择可能是选择某个阈值相关性分数，或您要显示的某个最小结果数。或两者兼而有之——您可以按产生更多结果的任何标准进行显示。

# matlab - matlab 多个绘图大小

> ID：11419443
> 
> 赞同：0
> 
> 时间：2012-07-10T18:18:43.697
> 
> 标签：matlab, plot, size, width

我对绘图的宽度和高度有疑问。如果我们在同一个图中有多个图，我们如何自己设置每个图的大小。

还有一种方法可以在不使用子图的情况下拥有多个图吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T18:31:48.447

从子图开始（调用`subplot`会返回一个轴句柄）。然后`Position`在每个子图轴句柄上设置属性。

在开始移动它们之前创建所有子图，因为之后创建子图将自动删除与新子图的默认位置重叠的任何现有子图。

# url - 重定向 url 会导致我的 url 中的信息丢失

> ID：11419446
> 
> 赞同：0
> 
> 时间：2012-07-10T18:19:04.047
> 
> 标签：url, url-redirection

我正在尝试从我的主机重定向：[http://www.carthera.com](http://www.carthera.com)到[http://www.carthera.eu](http://www.carthera.eu)，

一切看起来都很好，但是当我尝试使用 carthera.eu 进入另一个页面时，我有这个：

```
http://carthera.eu/index.php?page=carthera&ssmenu=0 
```

但是有了carthera.com，我只有

```
http://carthera.com 
```

有谁知道它来自哪里，我该如何解决？

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-20T21:28:41.640

有关信息，问题在于主机使用 iframe 来显示 carthera.com。所以基本上当我访问 carthera.com 时，我会拥有一个带有 carthera.eu 的 iframe。因此获取的信息不会显示在 carthera.com 中，而是显示在 iframe carthera.eu 中...

# git - Git Workflow：在计算机之间共享代码而不推送到公共仓库

> ID：11419448
> 
> 赞同：20
> 
> 时间：2012-07-10T18:19:07.067
> 
> 标签：git, workflow

我在一家使用 Git 进行版本控制的公司工作。我们使用托管回购服务（Beanstalk）作为我们的内部“公共”（我的意思是整个开发团队都可以访问）回购。我有两台通常用于编写代码的计算机。我喜欢使用 Git 的一些历史重写功能，特别是变基和修改提交，但我真的不喜欢在将某些内容推送到已发布的分支后使用它们。然而，我需要能够在这两台计算机之间共享代码，最好不要在其他计算机之间共享。

我想要的是一种在两台计算机之间共享我的代码的简单方法，而不必与其他人共享。我考虑过 Airdrop（两台电脑都是 Mac）和 ssh。在利用 git 的分布式特性的同时，建议的实现方式是什么？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-07-10T18:46:54.377

假设您在机器之间具有 ssh 访问权限，您可以在机器之间自由推送、获取和拉取：

```
git push computer2:projects/prog HEAD:tmp 
```

或者，如果您在计算机 2 上：

```
git pull computer1:projects/prog HEAD 
```

或者

```
git fetch computer1:prj/prog branch1:t1
git fetch computer1:prj/prog branch2:t2
git merge t1 t2 
```

或者

```
git fetch computer1:prj/prog branch1 branch2 branch3
git merge FETCH_HEAD 
```

等等...`git help fetch`更多示例请参见。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T18:33:59.490

您可以在其中一台机器上运行即时 git 服务器，使用 git-daemon 或类似的东西：[https ://gist.github.com/1525217](https://gist.github.com/1525217)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-10T18:36:17.137

我不明白为什么你不能创建在远程仓库中明确指出的临时工作分支，但如果你想要一个替代方案并且两台计算机都通过网络连接并通过 ssh 访问，你可以设置其中一个或两个它们作为额外的遥控器，并在任何方向上从一个推到另一个。尽管您不想推送到错误的遥控器，但第一次就正确可能会令人困惑。

# audio - 信号/声音处理：使文本随着音乐振动

> ID：11419449
> 
> 赞同：0
> 
> 时间：2012-07-10T18:19:09.047
> 
> 标签：audio, signal-processing, html5-audio

我正在做一个简单的音乐可视化。可能不相关，但我正在使用新的 WebKit 音频数据 API 和 dsp.js 库进行声音处理。

我想让文本随着音乐的节奏振动（扩大/缩小）。做这个的最好方式是什么？

到目前为止，我所做的是通过 FFT 运行信号。我查看底部 10% 的频率（低音？），当幅度超过某个阈值时，我会为文本设置动画。

这听起来对吗？还是我完全关闭了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T18:50:38.857

你说你已经做到了，然后你问你是否还有路要走？好吧，您告诉我们：它适用于您的应用程序吗？

一个潜在的问题是 FFT 很慢，因为您的输入和输出之间可能存在延迟，并且会使用大量 CPU。我不认为这对您的应用程序很重要，但一般来说，您最好使用低通滤波器。当低通的输出超过某个水平时，您可以使用它在短时间内触发某些东西。

另一个问题很简单，这只是一个非常基本的节拍检测算法。它可能适用于重低音的“地板上四人”音乐，但您需要弄清楚阈值的位置以及在低音停止或其他情况下如何保持阈值移动。您可能想研究节拍检测算法。开源音频有一些。

[http://aubio.org/](http://aubio.org/)

# jquery - Django 和 Ajax 安全问题

> ID：11419454
> 
> 赞同：1
> 
> 时间：2012-07-10T18:19:29.143
> 
> 标签：jquery, python, ajax, django

我有这个“模型”

```
class messages(models.Model):
    status_choices = (
        (u'read',u'read'),
        (u'unread',u'unread')
        )
    user = models.ForeignKey(User)
    message = models.TextField()
    status = models.CharField(max_length=6,choices=status_choices,default='unread')
    sender = models.ForeignKey(User,related_name="sender") 
```

这是我的观点，它获取用户消息并将其传递给 javascript。

```
@login_required
def ajax_fetch_messages(request):
    if request.is_ajax():
        print(request.POST['user'])
        # first check that user himself asked for his/her messages
        requested_user = get_object_or_404(User,id=request.POST['user'])
        if requested_user == request.user:
            # do processing of messages
            user_messages = messages.objects.filter(user=requested_user,status='unread')
            '''try:
                response = dumps(messages)
            except:
                print("Unable to dump messages")'''
            return HttpResponse(user_messages)
        else:
            return HttpResponse("You're not authorised to do that")
    else:
        return HttpResponse("This method can't be called this way") 
```

现在我有以下担忧

1.  我无法对上述视图返回的对象进行 jsonify。所以我必须将视图返回的“消息”对象发送到 javascript。
2.  将 python 对象传递给 javascript 而不在 django 端对对象进行 jsonfying 是否安全？如果不是，那么可能出现的问题是什么？

那么，你对我的问题有什么想说的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T19:39:25.190

为什么你不能 jsonify 你的对象？如果您发送对象（我怀疑您是否可以，除非有一些中间件处理转换），它将腌制它并将其作为字符串发送，因此无论如何您始终可以对任何对象进行 jsonify。

例如，如果我想从名为“Company”的对象发送所有信息：

```
comp = Company.objects.all()[0]
info = {"name": comp.name, "url": comp.url, "created_on": datetime.strftime(comp.created_on, "%d-%m-%Y")}
return HttpResponse(json.dumps(info)) 
```

考虑到您发送的所有内容都应该是一个字符串（或将自动转换为字符串的整数）。

在您的 javascript 中发送 json 后，您只需要获取对象并解析它：

`obj = JSON.parse(response)`

就是这样！现在关于安全问题，我想到的唯一问题是您发送的信息可能不会像对象ID那样使用，此外没有真正的安全风险。

现在，如果您想要发送一个渲染视图，以便您可以使用模板的强大功能，您可以这样做：

```
from django.template import Context, loader

context = Context({'user': UserObject, 'company': CompanyObject})
html_t = loader.get_template(HTML_TEMPLATE_PATH)
html = html_t.render(context)

return HttpResponse(html) 
```

现在在您的 ajax 中，您将收到渲染的模板，您可以立即使用它而无需任何 json。

# git - git 恢复到已经在分支历史中但被撤消的特定提交

> ID：11419456
> 
> 赞同：0
> 
> 时间：2012-07-10T18:19:32.673
> 
> 标签：git, diff, patch

假设我有 A--B--C--D--E--F--G

在提交 C 上有“水平滚动功能”。后来我们改变了主意，在提交 D 上出现了“垂直滚动”。然后 E、F、G 是不影响视图的后端数据库迁移更改。

但是现在我们决定再给水平滚动一次机会，我们如何恢复水平滚动呢？我不想回到 C，因为我想保留 E、F、G。我想转发合并 C ......我猜合并不是正确的术语，因为 C 已经存在于这个分支的历史中。我想我可以将 C 中的特定文件检出到我当前的工作目录中，但这似乎是手动的，我必须记住修改了哪些视图文件和 css 文件。

有没有办法在 C 和 G 之间生成补丁差异，然后将其应用到当前工作目录？那行得通吗？我怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T18:38:11.343

除了已经提到的cherry-pick（@titaniumdecoy）之外，还有交互式rebase：（`git rebase -i C`这意味着您有机会重写历史，就好像没有D一样）。如果您已经发布了历史记录，它当然会导致合并问题（如果已经有人拥有历史记录，例如示例）。在这种情况下，如果 D 是 C 的 revert ( `git revert C`)，cherry-pick 可能会起作用。否则，您最好还原 D: `git revert D`。

# visual-c++ - C++ 在本机代码中声明托管变量

> ID：11419459
> 
> 赞同：11
> 
> 时间：2012-07-10T18:19:58.477
> 
> 标签：visual-c++, variables, native, global, managed

我的 Visual Studio 中有一个 .NET 表单和一个本机代码。问题是：我无法在本机代码中声明 .NET 表单的全局实例，如下所示：

```
Editor^ maineditor; 
```

它给了我这个问题：

```
error C3145: 'EditorEntry' : global or static variable may not have managed type 'Cube3D::Editor ^' 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-10T18:24:17.783

而不是使用全局静态尝试使其成为容器类型中的静态方法

```
ref class ManagedGlobals {
  public:
  static Editor^ maineditor = nullptr;
}; 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2016-03-30T14:24:19.417

用 gcroot<> 结构包裹句柄

```
gcroot<Editor^> maineditor; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-10T15:49:11.190

你有你的静态类（参考：[可以在 C++ 中声明一个类是静态的吗？](https://stackoverflow.com/questions/1635068/can-a-class-be-declared-static-in-c)）

```
ref class ManagedGlobals abstract sealed {
public:
    static Excel::Application^ xl;
}; 
```

现在只需引用该类

```
ManagedGlobals::xl = gcnew Excel::Application(); 
```

# asp.net - 如何在 div 上显示 Menu 的 NavigationUrl

> ID：11419460
> 
> 赞同：-1
> 
> 时间：2012-07-10T18:20:01.170
> 
> 标签：asp.net, aspmenu

我有一个这样设计的 ASP.net 页面，如下所示：

```
<%@ Page Title="" Language="C#" MasterPageFile="~/Site.master" AutoEventWireup="true" CodeFile="MyAccount.aspx.cs" Inherits="MyAccount" %>

<asp:Content ID="Content1" ContentPlaceHolderID="HeadContent" Runat="Server">
</asp:Content>
<asp:Content ID="Content2" ContentPlaceHolderID="MainContent" Runat="Server">
    <div style="width: 100%; height:100%;">

        <div style="float: left; height:100%; width: 80%;">
            xxxx
            <!-- Set Div As your requirement -->
        </div>
        <div style="float: right; width: 20%; height:100%; margin-left: 10px;">
        <asp:Menu dir="rtl" ID="NavigationMenu" runat="server" CssClass="menu" EnableViewState="false" IncludeStyleBlock="false" Orientation=Vertical>
                    <Items>
                        <asp:MenuItem NavigateUrl="~/Default.aspx" Text="xxxxxxxxxxxxxx"/>
                        <asp:MenuItem NavigateUrl="~/About.aspx" Text="yyyyyyyyyyyyyy "/>

                    </Items>
                </asp:Menu>
            <!-- Set Div As your requirement -->
        </div>

    </div>
</asp:Content> 
```

我希望用户选择任何菜单项，并在左侧 div 中显示页面。

任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T18:49:00.507

如果您使用客户端代码，您可以在您的 navigateurl 或 onclick 中调用 javascript 函数

看这个例子

[http://jsfiddle.net/UnGNc/1/](http://jsfiddle.net/UnGNc/1/)

# android - USB 连接 Galaxy Nexus Mac OS 不工作

> ID：11419461
> 
> 赞同：1
> 
> 时间：2012-07-10T18:20:06.060
> 
> 标签：android, galaxy-nexus

在我测试使用 eclipse 的所有设备中..

我的三星 Galaxy Nexus 是唯一一个似乎无法连接到我的 Mac 的。

我尝试安装 android 文件传输软件，但这没有帮助..

当我在 adb 中检查设备时，它也没有显示出来..

USB 调试已启用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T23:28:16.320

我的电缆很好..需要更好的闪存 ROM.. 升级到 Vicious-JellyBean-V5

# python - Python eval 在函数中不起作用

> ID：11419463
> 
> 赞同：2
> 
> 时间：2012-07-10T18:20:14.560
> 
> 标签：python, function, eval

我正在使用[此](http://lybniz2.sourceforge.net/safeeval.html)代码来评估字符串中的数学表达式。它有效：

```
#!/usr/bin/env python
from __future__ import division
from math import *

expression = raw_input()

# Math functions
safe_list = ['math', 'factorial', 'acos', 'asin', 'atan', 'atan2', 'ceil', 'cos', 'cosh', 'degrees', 'e', 'exp', 'fabs', 'floor', 'fmod', 'hypot', 'log', 'log10', 'modf', 'pi', 'pow', 'radians', 'sin', 'sinh', 'sqrt', 'tan', 'tanh'] 

# Create safe directory
safe_dict = dict([(key, locals().get(key, None)) for key in safe_list]) 
safe_dict['abs'] = abs

result = eval(expression, {"__builtins__": None}, safe_dict)
print result 
```

我将它包装在这样的函数中：

```
#!/usr/bin/env python
from __future__ import division
from math import *

def calculate(expression):
    # Math functions
    safe_list = ['math', 'factorial', 'acos', 'asin', 'atan', 'atan2', 'ceil', 'cos', 'cosh', 'degrees', 'e', 'exp', 'fabs', 'floor', 'fmod', 'hypot', 'log', 'log10', 'modf', 'pi', 'pow', 'radians', 'sin', 'sinh', 'sqrt', 'tan', 'tanh'] 

    # Create safe directory
    safe_dict = dict([(key, locals().get(key, None)) for key in safe_list]) 
    safe_dict['abs'] = abs

    result = eval(expression, {"__builtins__": None}, safe_dict)
    if isinstance(result, float) and result.is_integer():
        result = int(result)
    print result

expr = raw_input()
calculate(expr) 
```

它仍然适用于基本操作，但其中定义的功能`safe_dict`都不起作用。`5**5`适用于这两个程序，但适用`sin(pi)`于第一个代码示例，它不适用于第二个代码示例。追溯是

```
Traceback (most recent call last):
  File "stack.py", line 20, in <module>
    calculate(expression)
  File "stack.py", line 14, in calculate
    result = eval(expression, {"__builtins__": None}, safe_dict)
  File "<string>", line 1, in <module>
TypeError: 'NoneType' object is not callable 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-10T18:29:37.637

它失败的原因是您从数学模块导入的函数不是函数内部的局部变量；它们是全球性的。因此，当您阅读 locals() 并插入到字典中时，它会为每一个插入 None 。如果您删除`get(key, None)`并直接访问，您会看到这一点`locals()[key]`。

更好的方法是在数学模块上使用 getattr。做`import math`（不`from math import *`）然后做`safe_dict = dict((k, getattr(math, k)) for k in safe_list)`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-10T18:29:00.983

在您的`calculate()`函数中，`locals()`不包括从`math`. 因此， `safe_dict`人口众多`None`。

您可以构建 . 的`safe_dict`外部`calculate()`，如果您多次调用`calculate()`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-10T18:25:45.487

这可能是因为您有`'math'`in `safe_list`，并且`math`是一个模块。对我来说，这似乎`eval`是在做`math()`，这将导致它窒息它正在做的事情。

尝试从中删除`'math'`，`safe_list`看看是否有帮助。

附带说明：我不确定这真的是做你想做的事情的最佳方式。我认为需要进行设计更改。

# linux - iptables：重定向到8080端口，只接受一个I P地址

> ID：11419470
> 
> 赞同：-1
> 
> 时间：2012-07-10T18:21:05.403
> 
> 标签：linux, firewall, iptables

背景信息：我已经植根了一部 android 手机并安装了 droidwall 以访问 iptables。内核版本为 2.6.35.7-perf。

目标：通过比较使用和不使用代理的流量来测试代理（在端口 8080 上）的效率。

我可以在不通过代理的情况下通过[这里的规则进行测试](https://serverfault.com/questions/218707/iptables-rules-to-allow-http-traffic-to-one-domain-only)

方法：我在单个 IP 地址上创建了一个测试网站。我正在使用一个应用程序来监控手机发送和接收了多少数据包/字节。

问题：由于未知的背景流量，正在发送和接收不需要的数据包。

解决方案：使用 iptables 只允许连接到一个网站，这样我就可以正确监控流量。

我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T18:50:05.397

尝试以下操作：

```
iptables -t nat -A PREROUTING -p tcp -s 1.2.3.4 -j REDIRECT --to-port 8080
iptables -A INPUT -p tcp -s 1.2.3.4 --dport 8080 -j ACCEPT 
```

第一条规则应将所有流量从 1.2.3.4 重定向到端口 8080，而第二条规则表示接受此类数据包。

现在您应该在 DROP 上设置 INPUT 的默认策略，以便丢弃所有其他数据包：

```
iptables -P INPUT DROP 
```

当心。这是一个非常严格的规则。

# javascript - jquery 在上下文中调用 JS 方法

> ID：11419472
> 
> 赞同：0
> 
> 时间：2012-07-10T18:21:21.393
> 
> 标签：javascript, jquery

我们`jQuery`在我们的应用程序中使用进行 AJAX 调用。如何在特定上下文中使用 inovke 方法`jQuery`？在`dojo`我们曾经使用`dojo.hitch()`. jQuery中有类似的东西吗？下面是我们正在使用的示例代码。我需要`success`在`SampleMethod`. 下面的代码应该给我例外，因为`resultSetHandler`在窗口上下文中不可用。你能告诉我吗。

我们使用的是**1.3.2**`jQuery`版本

 **```
function SampleMethod(){
    this.invokeProcedure=function(procedurePath){
        $.ajax({
                type: "GET",
                url: procedurePath,
                dataType: "json",
                success: resultSetHandler,
                error: errorHandler
            });
    }

    this.resultSetHandler=function(args){
        //Handle the result
    }

    this.errorHandler=function(args){
        //Handle the result
    }

}

var sampleObj=new SampleMethod();
sampleObj.invokeProcedure('url'); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T18:23:24.037

那个版本的 jQuery 在这一点上已经过时了，你应该升级。您正在寻找的功能是[`jQuery.proxy`](http://api.jquery.com/jQuery.proxy/)并且仅在 1.4+ 中可用

如果您正在升级，但您应该考虑升级到最新版本，那么您现在只落后 4 个主要版本。

如果您在不允许升级 3.5 年前的库的环境中工作，请考虑为自己复制[源代码`jQuery.proxy`](https://github.com/jquery/jquery/blob/8f01b92b8fd85a66f2cba671f8b9ff6f7095c34b/src/core.js#L738-765)并使其正常工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T18:23:24.607

只需`this`将它们保存并包装在函数中：

```
this.invokeProcedure=function(procedurePath){
        var savedThis = this;
        $.ajax({
                type: "GET",
                url: procedurePath,
                dataType: "json",
                success: function() { savedThis.resultSetHandler(); },
                error: function() { savedThis.errorHandler(); }
            });
    } 
```

（可能也应该将“success”函数参数传递给“resultSetHandler”。）

* * *

*编辑*——上面将在一般情况下处理这类问题，但@Blaster 在评论中正确指出 jQuery`$.ajax`机制提供了一个更简单的解决方案。可以在传入的`context`参数对象中设置属性，该值将用作回调的上下文。也就是说，添加：

```
context: this, 
```

到`$.ajax`参数对象会使事情像你最初写的那样工作。**

# linux - 阻止 MPlayer 在 Awesome WM 中使用浮点数

> ID：11419475
> 
> 赞同：3
> 
> 时间：2012-07-10T18:21:44.193
> 
> 标签：linux, window-managers, tiling, awesome-wm

我知道 MPlayer 调用了“configurerequest”，因此，它完全忽略了我在 Archlinux、AwesomeWM 中的窗口管理器的规则，它不是平铺的，而是浮动的。有没有办法阻止这种情况发生？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-03T23:56:08.740

您想找到以下代码块，然后更改`floating = false`：

```
awful.rules.rules = {
    ...
    { rule = { class = "MPlayer" }, properties = { floating = false } },
    ...
} 
```

确定`class`零件，在终端窗口中执行以下操作：

```
% xprop | grep WM_CLASS 
```

然后单击您要确定其类名的窗口。您必须经历过才能相信的那些美妙的 UNIX 事物之一。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-09T01:17:10.203

也可以通过按 ctrl+Mod+space 来切换浮动（在我的情况下，我认为这是很棒的默认设置，windowskey 是 Mod 键）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T12:21:28.507

我对“configurerequest”一无所知，我认为`mplayer`这只是一个普通的窗口，就像其他窗口一样。阅读时`/etc/xdg/awesome/rc.lua`，我发现 MPlayer 是专门配置为浮动的。

删除该配置`rc.lua`可能会有所帮助。

# windows-phone-7 - TabIndex 似乎不适用于 windows phone 的 vs2010 表达式

> ID：11419480
> 
> 赞同：0
> 
> 时间：2012-07-10T18:21:53.843
> 
> 标签：windows-phone-7

我有几个控件，我为要停止的控件设置了 tabindex。我使用模拟器来测试它。在键盘上输入回车键后，光标停留在文本框上。有人会告诉我链接或代码以使其工作吗？提前致谢。

以下是我的控件代码：

```
<TextBox x:Name="txtUser" Grid.Row="1" Grid.Column="2" IsTabStop="True" TabIndex="1" Style="{StaticResource txtStyle_24}" FontSize="32"   />
 <TextBlock x:Name="Password" Text="Password :" Grid.Row="2" Grid.Column="1"    Style="{StaticResource LabelStyle_24}" HorizontalAlignment="Left" VerticalAlignment="Center" FontSize="32" Foreground="{StaticResource PhoneAccentBrush}" />
  <PasswordBox x:Name="psd" PasswordChar="*" Grid.Row="2" Grid.Column="2"   IsTabStop="True" 
                  TabIndex="2"  Style="{StaticResource PasswordBoxStyle_24}" FontSize="32"/> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T18:35:40.670

`TabIndex`没有意义`Windows Phone`

如果要将焦点移至下一个`TextBox`，请订阅`KeyUp`事件并检查`e.Key == Keys.Enter`。比移动焦点`textBox.Focus()`

我看到了这个行为，但现在找不到链接

# php - 表单不呈现

> ID：11419487
> 
> 赞同：0
> 
> 时间：2012-07-10T18:22:18.710
> 
> 标签：php, model-view-controller, oop, zend-framework, zend-form

我正在使用 zend 框架，并尝试使用 zend 表单、MVC 和 OOP 输出一个简单的登录表单。

我的代码如下：控制器 IndexController.php

```
class IndexController extends Zend_Controller_Action
{

    public function init()
    {
        /* Initialize action controller here */
    }

    public function indexAction()
    {
        $this->view->loginForm = $this->getLoginForm(); 
    }

    public function getLoginForm()
    {
        $form = new Application_Form_Login;
        return $form;
    }
} 
```

这是形式：Login.php

```
class Application_Form_Login extends Zend_Form
{

    public function init()
    {
        $form = new Zend_Form;

        $username = new Zend_Form_Element_Text('username');
        $username
            ->setLabel('Username')
            ->setRequired(true)
        ;

        $password = new Zend_Form_Element_Password('password');
        $password
            ->setLabel('Password')
            ->setRequired(true)
        ;

        $submit = new Zend_Form_Element_Submit('submit');
        $submit->setLabel('Login');

        $form->addElements(array($username, $password, $submit));

    }
} 
```

和视图： index.phtml

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
    <head>

    </head>

    <body>

        <div id="header">
            <div id="logo">
                <img src="../application/images/logo.png" alt="logo">
            </div>
        </div>

        <div id="wrapper">
            <?php echo $this->loginForm; ?>
        </div>
    </body>
</html> 
```

我是 Zend 框架、MVC 和 OOP 的新手，所以这是我对以下在线建议、教程等的最佳尝试。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-10T18:27:11.063

您无意中创建了一个没有元素的表单，这就是没有出现任何内容的原因。在表单对象的 init 方法中，您正在创建 的新实例`Zend_Form`，`$form`然后您什么也不做，而不是将元素添加到当前实例。将您的课程更改为：

```
class Application_Form_Login extends Zend_Form
{
    public function init()
    {
        $username = new Zend_Form_Element_Text('username');
        $username
            ->setLabel('Username')
            ->setRequired(true)
        ;

        $password = new Zend_Form_Element_Password('password');
        $password
            ->setLabel('Password')
            ->setRequired(true)
        ;

        $submit = new Zend_Form_Element_Submit('submit');
        $submit->setLabel('Login');

        $this->addElements(array($username, $password, $submit));
    }
} 
```

它应该可以工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T18:27:08.460

尝试做这样的事情：

[http://framework.zend.com/manual/en/zend.form.forms.html](http://framework.zend.com/manual/en/zend.form.forms.html)

# android - 为自定义视图创建视图时出错

> ID：11419488
> 
> 赞同：1
> 
> 时间：2012-07-10T18:22:21.033
> 
> 标签：android, android-custom-view, xml-layout

我创建了一个自定义视图类，它采用路径，然后将其填充为白色并将其边缘着色为红色：

**中风填充.java：**

```
package com.kf.pathshape;
...

public class StrokeFill extends View{
private Path shapePath;

public StrokeFill(Context context, Path path) {
    super(context);
    this.shapePath = path;

    // TODO Auto-generated constructor stub
}

public StrokeFill(Context context, AttributeSet attrs, Path shapePath) {
    super(context, attrs);
    this.shapePath = shapePath;
}

protected void onDraw(Canvas canvas) {
    // TODO Auto-generated method stub
    //canvas.drawColor(Color.BLACK);
    super.onDraw(canvas);

    //Sets paints and draws the shapes
    Paint fillPaint = new Paint();
    fillPaint.setColor(android.graphics.Color.WHITE);
    fillPaint.setStyle(Paint.Style.FILL);
    fillPaint.setStrokeWidth(0);
    Paint strokePaint = new Paint();
    strokePaint.setColor(android.graphics.Color.RED);
    strokePaint.setStyle(Paint.Style.STROKE);
    strokePaint.setStrokeWidth(2);

    canvas.drawPath(shapePath, fillPaint);
    canvas.drawPath(shapePath, strokePaint);
}
} 
```

我的布局 XML (main.xml) 非常简单：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >
<com.kf.pathshape.StrokeFill
    android:id="@+id/pathshape"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" />
</LinearLayout> 
```

活动：

```
setContentView(R.layout.main);
shapeView = (StrokeFill) findViewById(R.id.pathshape);
shapeView = new StrokeFill(this, testpath); 
```

testpath 是一个有效的路径。即使我注释掉定义“shapeView”的行，它也会给我错误。日志猫：

```
07-11 01:50:17.150: E/AndroidRuntime(24321): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.kf.pathshape/com.kf.pathshape.PathshapeActivity}: android.view.InflateException: Binary XML file line #6: Error inflating class com.kf.pathshape.StrokeFill
07-11 01:50:17.150: E/AndroidRuntime(24321):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1651)
07-11 01:50:17.150: E/AndroidRuntime(24321):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1667)
07-11 01:50:17.150: E/AndroidRuntime(24321):    at android.app.ActivityThread.access$1500(ActivityThread.java:117)
07-11 01:50:17.150: E/AndroidRuntime(24321):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:935)
07-11 01:50:17.150: E/AndroidRuntime(24321):    at android.os.Handler.dispatchMessage(Handler.java:99)
07-11 01:50:17.150: E/AndroidRuntime(24321):    at android.os.Looper.loop(Looper.java:130)
07-11 01:50:17.150: E/AndroidRuntime(24321):    at android.app.ActivityThread.main(ActivityThread.java:3691)
07-11 01:50:17.150: E/AndroidRuntime(24321):    at java.lang.reflect.Method.invokeNative(Native Method)
07-11 01:50:17.150: E/AndroidRuntime(24321):    at java.lang.reflect.Method.invoke(Method.java:507)
07-11 01:50:17.150: E/AndroidRuntime(24321):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:912)
07-11 01:50:17.150: E/AndroidRuntime(24321):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:670)
07-11 01:50:17.150: E/AndroidRuntime(24321):    at dalvik.system.NativeStart.main(Native Method)
07-11 01:50:17.150: E/AndroidRuntime(24321): Caused by: android.view.InflateException: Binary XML file line #6: Error inflating class com.kf.pathshape.StrokeFill
07-11 01:50:17.150: E/AndroidRuntime(24321):    at android.view.LayoutInflater.createView(LayoutInflater.java:508)
07-11 01:50:17.150: E/AndroidRuntime(24321):    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:570)
07-11 01:50:17.150: E/AndroidRuntime(24321):    at android.view.LayoutInflater.rInflate(LayoutInflater.java:623)
07-11 01:50:17.150: E/AndroidRuntime(24321):    at android.view.LayoutInflater.inflate(LayoutInflater.java:408)
07-11 01:50:17.150: E/AndroidRuntime(24321):    at android.view.LayoutInflater.inflate(LayoutInflater.java:320)
07-11 01:50:17.150: E/AndroidRuntime(24321):    at android.view.LayoutInflater.inflate(LayoutInflater.java:276)
07-11 01:50:17.150: E/AndroidRuntime(24321):    at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:234)
07-11 01:50:17.150: E/AndroidRuntime(24321):    at android.app.Activity.setContentView(Activity.java:1679)
07-11 01:50:17.150: E/AndroidRuntime(24321):    at com.kf.pathshape.PathshapeActivity.onCreate(PathshapeActivity.java:73)
07-11 01:50:17.150: E/AndroidRuntime(24321):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1050)
07-11 01:50:17.150: E/AndroidRuntime(24321):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1615)
07-11 01:50:17.150: E/AndroidRuntime(24321):    ... 11 more
07-11 01:50:17.150: E/AndroidRuntime(24321): Caused by: java.lang.NoSuchMethodException: StrokeFill(Context,AttributeSet) 
```

我搜索了论坛，但没有找到我需要的东西。我已经定义了带有上下文和属性的构造函数。我在这里想念什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T18:32:22.087

在扩展视图时，需要实现 3 个构造函数：

```
public class StrokeFill extends View{
    private Path mShapePath;

    public StrokeFill(Context context) {
        super(context);
        init();
    }

    public StrokeFill(Context context, AttributeSet attrs) {
        super(context, attrs);
        init();
    }

    public StrokeFill(Context context, AttributeSet attrs, int defstyle) {
        super(context, attrs, defstyle);
        init();
    }

    private void init(){
        //some code... or not =)
    }

    public void setPath(Path path){
        mShapePath = path;
    }
    /* rest of your code */
} 
```

然后在您的活动中：

```
shapeView = (StrokeFill) findViewById(R.id.pathshape);
shapeView.setPath(yourPath); 
```

希望这可以帮助你

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T18:43:29.253

当您从 xml android 调用`StrokeFill(Context,AttributeSet)`构造函数创建自定义视图时。如果要从 xml 扩展视图，则必须创建该构造函数。您还可以在代码中创建视图，然后从 xml 中删除它，在这种情况下您不需要`StrokeFill(Context,AttributeSet)`构造函数。

例如：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/myLayout"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >
</LinearLayout> 
```

活动：

```
setContentView(R.layout.main);
LinearLayout v = (LinearLayout)findViewById(R.id.myLayout);
shapeView = new StrokeFill(this, testpath);
v.addView(shapeView); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T18:34:11.920

无需再次创建

```
shapeView = new StrokeFill(this, testpath); 
```

像这样修改

```
setContentView(R.layout.main);
shapeView = (StrokeFill) findViewById(R.id.pathshape); 
```

# android - Android - 有效地显示来自互联网的大位图

> ID：11419495
> 
> 赞同：2
> 
> 时间：2012-07-10T18:22:50.567
> 
> 标签：android, android-layout, android-intent, android-emulator, android-widget

给定图像 url，我需要下载它并在 ImageView 中显示。
一切正常，除了图像很大并且**抛出 OutOfMemoryException**的情况。

希望 Android 文档可以解决这个问题：http: [//developer.android.com/training/displaying-bitmaps/load-bitmap.html](http://developer.android.com/training/displaying-bitmaps/load-bitmap.html)

我试图调整这段代码以接受 InputStream，而不是 Resource。
但是，似乎我在那里遗漏了一些东西，因为没有显示图像，也不例外，但是我在 LogCat 中看到了这个：**SkImageDecoder::Factory returned null**

以下是我如何解码图像并将其缩小（基于 Android 文档）：

```
public static Bitmap decodeBitmapFromInputStream(InputStream inputStream,
            int reqWidth, int reqHeight) {
        BitmapFactory.Options options = new BitmapFactory.Options();
        options.inJustDecodeBounds = true;
        BitmapFactory.decodeStream(inputStream, null, options);

        options.inSampleSize = calculateInSampleSize(options, reqWidth, reqHeight);

        options.inJustDecodeBounds = false;
        return BitmapFactory.decodeStream(inputStream, null, options);
    }

    public static int calculateInSampleSize(BitmapFactory.Options options,
            int reqWidth, int reqHeight) {
        final int height = options.outHeight;
        final int width = options.outWidth;
        int inSampleSize = 1;

        if (height > reqHeight || width > reqWidth) {
            if (width > height) {
                inSampleSize = Math.round((float) height / (float) reqHeight);
            } else {
                inSampleSize = Math.round((float) width / (float) reqWidth);
            }
        }
        return inSampleSize;
    } 
```

现在，在我的位图下载器方法中，我这样称呼它：

```
inputStream=entity.getContent();
return decodeBitmapFromInputStream(inputStream, 320, 480); 
```

这是完整的方法，以防万一：

```
static Bitmap downloadBitmap(String url){
        AndroidHttpClient client=AndroidHttpClient.newInstance("Android");
        HttpGet getRequest=new HttpGet(url);

        try{
            HttpResponse response=client.execute(getRequest);
            int statusCode=response.getStatusLine().getStatusCode();

            if(statusCode!=HttpStatus.SC_OK){
                Log.d("GREC", "Error "+statusCode+" while retrieving bitmap from "+url);
                return null;
            }

            HttpEntity entity=response.getEntity();
            if(entity!=null){
                InputStream inputStream=null;
                try{
                    inputStream=entity.getContent();
                    return decodeBitmapFromInputStream(inputStream, 320, 480);
                }catch (Exception e) {
                    Log.d("GREC", "Exception occured in BitmapDownloader");
                    e.printStackTrace();
                }
                finally{
                    if(inputStream!=null){
                        inputStream.close();
                    }
                    entity.consumeContent();
                }
            }
        }catch (Exception e) {
            getRequest.abort();
            Log.d("GREC", "Error while retriving bitmap from "+url+", "+e.toString());
        }finally{
            if(client!=null){
                client.close();
            }
        }
        return null;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T08:33:19.347

问题在于，一旦您使用了来自 HttpUrlConnection 的 InputStream，您就不能倒带并再次使用相同的 InputStream。因此，您必须为图像的实际采样创建一个新的 InputStream。否则我们必须中止 http 请求。请参阅[decodeStream 返回 null](https://stackoverflow.com/questions/10730520/decodestream-returns-null)

# mysql - 分组依据有元素

> ID：11419500
> 
> 赞同：2
> 
> 时间：2012-07-10T18:23:19.717
> 
> 标签：mysql, if-statement, group-by

我正在尝试使用以下内容进行查询。出于问题的目的，我已尽可能简化了查询。它基本上适用于我正在编写的电子邮件计划应用程序。

两张桌子。一封电子邮件可以属于一个特定的时间表。一个时间表包括几封电子邮件。每封已发送的电子邮件都标有特定的步骤编号。第 1 步、第 2 步、第 3 步、第 4 步、第 5 步

```
email_schedular (id, datecreated, recipient)
email(id, email_schedular_id, text, subject, sent, stepNumber) 
```

现在我要做的是在报告中确定是否已发送步骤。我已经尝试过了，但我不确定我是否以正确的方式进行？

```
SELECT
  ed.id,
  ed.datecreated
  ed.recipient
  if(e.stepNumber= 1, 'Y', 'N')  AS step_1_sent,
  if(e.stepNumber= 2, 'Y', 'N')  AS step_2_sent,
  if(e.stepNumber= 3, 'Y', 'N')  AS step_3_sent,
  if(e.stepNumber= 4, 'Y', 'N')  AS step_4_sent
FROM 
  email_echedular ed
JOIN email e ON (e.email_echedular_id = ed.id)
GROUP BY ed.id 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T18:28:05.010

不要使用`N`for not sent，而是使用`NULL`. 然后，当您对它们进行分组时，您可以获取`MAX()`每个值并将 NULL 消除到一行。最终结果应该是每行`ed.id`一个`Yes`，用于已发送的步骤和`NULL`未发送的步骤。

```
SELECT
  ed.id,
  ed.datecreated
  ed.recipient
  MAX(if(e.stepNumber= 1, 'Y', NULL)) AS step_1_sent,
  MAX(if(e.stepNumber= 2, 'Y', NULL)) AS step_2_sent,
  MAX(if(e.stepNumber= 3, 'Y', NULL)) AS step_3_sent,
  MAX(if(e.stepNumber= 4, 'Y', NULL)) AS step_4_sent
FROM 
  email_schedular ed
  LEFT JOIN email e ON (e.email_schedular_id = ed.id)
GROUP BY ed.id 
```

如果您真的不希望 a`NULL`用于未发送的列，则可以将它们包装起来`COALESCE()`以替换`NULL`为`N`：

```
SELECT
  ed.id,
  ed.datecreated
  ed.recipient
  COALESCE(MAX(if(e.stepNumber= 1, 'Y', NULL)), 'N') AS step_1_sent,
  COALESCE(MAX(if(e.stepNumber= 2, 'Y', NULL)), 'N') AS step_2_sent,
  COALESCE(MAX(if(e.stepNumber= 3, 'Y', NULL)), 'N') AS step_3_sent,
  COALESCE(MAX(if(e.stepNumber= 4, 'Y', NULL)), 'N') AS step_4_sent
FROM 
  email_schedular ed
  LEFT JOIN email e ON (e.email_schedular_id = ed.id)
GROUP BY ed.id 
```

**编辑**更改为`LEFT JOIN`并固定连接条件...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T18:37:42.667

```
SELECT
  ed.id,
  ed.datecreated
  ed.recipient
  if(e.stepNumber= 1, 'Y', 'N')  AS step_1_sent,
  if(e.stepNumber= 2, 'Y', 'N')  AS step_2_sent,
  if(e.stepNumber= 3, 'Y', 'N')  AS step_3_sent,
  if(e.stepNumber= 4, 'Y', 'N')  AS step_4_sent
FROM 
  email_echedular ed
JOIN email e ON (e.email_echedular = e.id)
GROUP BY ed.id 
```

在这条线上`JOIN email e ON (e.email_echedular = e.id)`谁是`e.email_Echedular`？将其更改为`JOIN email e ON (e.email_Schedular = e.id)`

# java - 将位转换为整数

> ID：11419501
> 
> 赞同：1
> 
> 时间：2012-07-10T18:23:20.067
> 
> 标签：java, bytearray, endianness

我收到一个包含字节数组的数据包，我必须从中获取一些整数值。这是文档的一部分。有人能帮助我吗？

这是一个 4 字节的数组。

> 年从 1990 到 2052（6 位），月从 1 到 12（4 位），日从 1 到 31（5 位），小时从 0 到 23（5 位），分钟从 0 到 59（6 位），秒从 0 到 59（6 位） 默认值：2000 年 1 月 1 日，12:00:00

消息的格式是小端。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T18:38:39.420

您需要的是一些按位运算。首先，用字节构造一个 int ：

```
int n = b[0] | (b[1] << 8) | (b[2] << 16) | (b[3] << 24); 
```

然后，将 int 切成组件。现在，您的问题没有指定字段的方向是从右到左还是从左到右。该问题与字节顺序有关，但不完全相同。所以让我们假设字段从左到右。

良好的感觉建议从左到右。这样可以比较时间值的整数表示 - 年位的重要性大于月位等，因此当您比较对应于两个时间点的整数时，您会得到按时间顺序正确的结果。

这是给你的心理图像。这是一个整数变量，由位组成：

```
f e d c b a 9 8 7 6 5 4 3 2 1 0
            -----
              offset is 6, length is 3 
```

让我们定义一个函数，该函数在给定偏移量（以位为单位）处从 int 获取任意块，并具有给定的长度（以位为单位）。

```
int bits(int n, int offset, int length)
{
    //shift the bits rightward, so that the desired chunk is at the right end
    n = n >> (31 - offset - length); 

    //prepare a mask where only the rightmost `length`  bits are 1's
    int mask = ~(-1 << length);

    //zero out all bits but the right chunk
    return n & mask;
} 
```

本来可以是单行的，但我想让它有点指导意义。通过手动为每个块指定移位因子和掩码，以下答案中的人们有效地内联了此函数。

现在让我们分解。假设 n 来自最上面的片段：

```
int year  = bits(n, 0,  6),
    month = bits(n, 6,  4),
    day   = bits(n, 10, 5),
    hour  = bits(n, 15, 5),
    min   = bits(n, 20, 6),
    sec   = bits(n, 26, 6); 
```

我们通过将先前字段的总长度组合在一起来获得偏移量的值。这是在字段从左到右的假设下；如果他们反过来，偏移值会不同。

这有意义吗？

编辑：如果位块从右到左，那么它是这样的：

```
int sec   = bits(n, 0,  6),
    min   = bits(n, 6,  6),
    hour  = bits(n, 12, 5),
    day   = bits(n, 17, 5),
    month = bits(n, 22, 4),
    year  = bits(n, 26, 6); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T18:43:02.720

首先，我将其转换为整数：

```
import java.nio.ByteBuffer;
import java.nio.ByteOrder;

int timestamp = ByteBuffer.wrap(byte_array).order(ByteOrder.LITTLE_ENDIAN).getInt(); 
```

接下来，我将其拆开：

```
int yearCode  = (timestamp >> 26) & 0b111111;
int monthCode = (timestamp >> 22) & 0b1111;
int dayCode   = (timestamp >> 17) & 0b11111;
int hourCode  = (timestamp >> 12) & 0b11111;
int minCode   = (timestamp >> 6)  & 0b111111;
int secCode   = (timestamp >> 0)  & 0b111111; 
```

第一行的掩蔽和最后一行的移位不是绝对必要的，但为了清楚起见，将其保留。

最后一步是将 1900 添加到 中`yearCode`，您就完成了！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T18:32:28.197

假设您有 java 7，您应该能够将年份读取为

```
 int year = 1990
    + ((b[0] & 0b1000_0000) << 5)
    + ((b[0] & 0b0100_0000) << 4)
    + ((b[0] & 0b0010_0000) << 3)
    + ((b[0] & 0b0001_0000) << 2)
    + ((b[0] & 0b0000_1000) << 1)
    + ((b[0] & 0b0000_0100)); 
```

月份为

```
 int month = 1 
    + ((b[0] & 0b1000_0010) << 3)
    + ((b[0] & 0b0100_0001) << 2)
    + ((b[1] & 0b1000_0000) << 1)
    + ((b[1] & 0b0100_0000)); 
```

我让你以同样的方式做其他整数。

我没有java7，现在不能测试，希望没有错。字节的顺序也可能是相反的。

# wpf - 将焦点放在 WPF ComboBox 上并不总是有效

> ID：11419506
> 
> 赞同：2
> 
> 时间：2012-07-10T18:23:25.647
> 
> 标签：wpf, combobox, focus

我有一个解决方案，它有两个项目，一个主要项目和一个也使用的小型共享控件。在我们的应用程序中，某个功能会在新窗口中打开此共享控件。我想在窗口打开时将焦点设置到此控件中的第一个组合框。

在我的代码中，在加载共享控件的窗口上，在 _Loaded 事件结束时，我将焦点设置到此组合框。但是在运行代码时 - 我仍然必须点击标签才能将“键盘”焦点放在框上（如，我必须点击标签然后开始输入列表中项目之一的名称）。

如果我在这里设置一个断点，点击它，然后继续 - 它实际上是按照它应该的方式设置的。如果我使用 WPF 检查器 - 还设置了 IsFocused。

其他注意事项：

*   如果我点击选项卡（得到我想要的），然后返回选项卡，它会将我带到表单上的最后一个控件，而不是这个未知的控件。这让我相信焦点设置正确，但由于某种原因没有正确的键盘焦点。
*   如果我尝试在代码中使用 MoveNext，它实际上会选择控件之外的窗口中的下一项。

如何在此处正确设置焦点？在“主”项目中的另一个组合框上，只需调用 .Focus() 即可正常工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T11:23:28.193

在处理完所有事件并使用 QueueUserWorkItem 更新绑定后，尝试推迟 focus()。像这样的东西：

```
 public  delegate void  VoidDelegate();

    private void Window_Loaded(object sender, RoutedEventArgs e)
    {
        // Some other things to do here.
        System.Threading.ThreadPool.QueueUserWorkItem
                       (x => this.Dispatcher.Invoke(
                                  new VoidDelegate(SetFocus), null));
    }

    private void SetFocus()
    {
        MyControlIWantToSetFocusOn.Focus();
    } 
```

# jquery - 不同元素类型的名称属性的jQuery选择器

> ID：11419513
> 
> 赞同：3
> 
> 时间：2012-07-10T18:24:06.913
> 
> 标签：jquery, jquery-selectors

我有一个行表。在其中一列中，一些行具有静态文本的跨度，一些行具有可供选择的值的选择。这一列中的所有元素都具有相同的名称属性。在我的表单提交中，我遍历行并希望获取所有列的值。我希望有一个 jQuery 选择器语句来从该元素中获取值（跨度或选择名称属性为“materialValue”）。我将如何使用 jQuery 来做到这一点？下面是 html 片段。

```
<table>
  <tr><td>
      <span id="materialValue1" name="materialValue>ONE</span>
  </td></tr>
  <tr><td>
      <span id="materialValue2" name="materialValue>TWO</span>
  </td></tr>
  <tr><td>
      <select id="materialValue3" name="materialValue>
        <option>ONE</option>
        <option>TWO</option>
        <option>THREE</option>
      </select>
  </td></tr>
  <tr><td>
      <select id="materialValue4" name="materialValue>
        <option>ONE</option>
        <option>TWO</option>
        <option>THREE</option>
      </select>
  </td></tr>
</table> 
```

编辑：我习惯于指定元素类型，然后用属性名称/值指定方括号。我不确定如何指定没有元素类型名称的 jquery 选择器。例如`$('span[name="materialValue"]', this)`。指定是否合法`$('[name="materialValue"]', this)`？我觉得很奇怪。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-10T18:28:06.803

您只需要一个属性选择器：

```
$("[name='MaterialValue']") 
```

此外，您`name`在 html 中的属性之后缺少右引号

在这里查看参考： [http ://api.jquery.com/attribute-equals-selector/](http://api.jquery.com/attribute-equals-selector/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-10T18:28:04.557

像这样...

```
$("[name=materialValue]")    // Select element with name attribute with a specific value 
```

使用括号选择属性。你也可以在其他情况下像这样使用它......

```
$("div[id]")      // Select element with an id attribute

$("[name*=test]") // Select all elements with *test* in the name attribute (partial) 
```

ETC..

# matlab - 单击鼠标从轴获取值

> ID：11419516
> 
> 赞同：0
> 
> 时间：2012-07-10T18:24:19.310
> 
> 标签：matlab, matlab-guide

我正在 Matlab 中开发一个图形用户界面，它呈现一个图（在一个轴对象中）。单击绘图中的一个点时，GUI 将为该数据点打开一些其他绘图。

我在我的图形中添加了一个轴对象并实现了 WindowButtonDownFcn 来获得按钮点击。我可以得到鼠标位置

```
 pos=get(hObject,'CurrentPoint'); 
```

但是如何将其转换为我的情节中的值？（即点击了哪个x值）

谢谢。

（我很高兴听到是否有一些更简单的方法来做到这一点，而不是编写我自己的 GUI）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T19:08:37.333

尝试查找有关 ginput 的帮助，然后将其设置为某个变量。然后绘制您已完成的 ginput 数量的点。

很多都在这里解释：http: [//www.mathworks.com/help/techdoc/ref/ginput.html](http://www.mathworks.com/help/techdoc/ref/ginput.html)

# ios - Storyboard - viewcontroller 中的导航控制器

> ID：11419517
> 
> 赞同：0
> 
> 时间：2012-07-10T18:24:28.830
> 
> 标签：ios, uinavigationcontroller, storyboard

我是故事板的新手，在我的故事板中，我在视图控制器上有一个按钮。单击按钮时，我试图将导航控制器视图添加为子视图，但当我尝试使用导航控制器推送时，应用程序崩溃了。请帮我解决这个问题。我已经上传了源代码，请从以下网址下载

[http://www.darrr.com/skyparts/test.zip](http://www.darrr.com/skyparts/test.zip)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T00:10:39.170

故事板的最大优点是可以在 Interface Builder 中完成很多工作。因此，要使您的代码正常工作，您接下来应该执行以下操作：

1.  打开故事板并进行以下更改：
    1.  单击“viewCtrl”按钮上的右键并在弹出菜单中删除对该方法的引用`-(IBAction)bttnTapped:(id)sender`。而不是在按钮触摸上调用操作方法，您应该通过从“viewCtrl”按钮到导航控制器的 ctrl 拖动来添加一个 segue，然后选择“模态”类型的 segue。
    2.  选择导航控制器并打开一个属性检查器。然后在“顶部栏”字段中选择导航栏。
    3.  在“Ctrl1”视图中单击“ctrl1”按钮上的右键并在弹出菜单中删除对该方法的引用`-(IBAction)bttnTapped:(id)sender`。
    4.  将对象库中的视图控制器添加到情节提要。然后在身份检查器的“类”字段中输入“ctrl2”。之后 ctrl-drag 从“ctrl1”按钮到“Ctrl2”控制器视图并选择“Push”类型的 segue。

Interface Builder 中的故事板视图应如下所示： [storyboard view](http://imageshack.us/photo/my-images/42/screenshot20120711at025.png/)

2.转到 ViewController.h 和 .m 并删除方法`- (IBAction)bttnTapped:(id)sender`。

3.转到ctrl1.h和.m并删除方法`- (IBAction)bttnTapped:(id)sender`。

代码应该可以工作。但我建议把方法`- (void)viewDidLoad`和`- (void)viewDidUnload`ctrl1.m 放回去。

如果您想在触摸按钮时但在加载视图之前运行一些代码，您应该重写该方法`- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender`。

# java - 枚举 - 静态和实例块

> ID：11419519
> 
> 赞同：41
> 
> 时间：2012-07-10T18:24:40.653
> 
> 标签：java, enums, static-block

我了解到，在 Java 中，静态块在类初始化时执行，而实例块在类的每个实例构造之前执行。我总是看到要在实例块之前执行的静态块。为什么情况相反`enums`？

谁能解释一下示例代码的输出：

```
enum CoffeeSize {

    BIG(8), LARGE(10),HUGE(12),OVERWHELMING();
    private int ounces ;

    static {
        System.out.println("static block ");
    }
    {
        System.out.println("instance block");
    }

    private CoffeeSize(int ounces){
        this.ounces = ounces;
        System.out.println(ounces);
    }
    private CoffeeSize(){
        this.ounces = 20;
        System.out.println(ounces);
    }

    public int getOunces() {
        return ounces;
    }
} 
```

输出：

实例块
8
实例块
10
实例块
12
实例块
20
静态块

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-07-10T18:29:08.270

您需要知道枚举值是包含该枚举类型实例的静态字段，并且静态字段的初始化顺序取决于它们的位置。看这个例子

```
class SomeClass{
    public SomeClass() { System.out.println("creating SomeClass object"); }
}

class StaticTest{
    static{ System.out.println("static block 1"); }
    static SomeClass sc = new SomeClass();
    static{ System.out.println("static block 2"); }

    public static void main(String[] args) {
        new StaticTest();
    }
} 
```

输出

```
static block 1
creating SomeClass object
static block 2 
```

现在由于枚举值总是放在枚举类型的开头，所以它们总是在任何静态初始化块之前被调用，因为其他所有东西都只能在枚举值之后声明。
但是枚举值的初始化（发生在类初始化时）它们的构造函数被调用，正如你所说的，非静态初始化块在每个构造函数开始时执行，这就是你看到它们的原因：

*   对于每个枚举值
*   在任何静态初始化块之前。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-07-10T19:17:10.213

有点晚了，并建立在[Pshemo 的答案](https://stackoverflow.com/a/11419587/95033)上。下面（编译）代码的输出如下：

```
8
10
Foo
static block 
Bar 
```

因此，首先执行枚举常量初始化（正如 Pshemo 所说，它们总是隐式的`static`and `final`，请参阅第二个块引用），然后`static`初始化所有显式声明为的字段。如前所述，语言规范说明了类初始化期间的执行顺序和枚举常量：

> [**接下来，按文本顺序**执行类的类变量初始化程序和静态初始化程序，或者接口的字段初始化程序，就好像它们是一个块一样。](http://docs.oracle.com/javase/specs/jls/se7/html/jls-12.html#jls-12.4.2)
> 
> [除了枚举类型 E 从 Enum 继承的成员之外，对于每个声明的名称为 n 的枚举常量，枚举类型都有一个**隐式声明的名为 n 的类型为 E 的公共静态最终字段**。这些字段被认为以与相应枚举常量相同的顺序声明，在枚举类型中显式声明的任何静态字段之前。](http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.9.2)

* * *

```
class StaticTest {
    enum CoffeeSize {
        BIG(8), LARGE(10);
        private int ounces;

        static Foo foo = new Foo();
        static { System.out.println("static block "); }
        static Bar bar = new Bar();

        private CoffeeSize(int ounces){
            this.ounces = ounces;
            System.out.println(ounces);
        }
    }
    public static void main(String[] args) {
        CoffeeSize cs = CoffeeSize.LARGE;
    }
}

class Foo { public Foo() { System.out.println("Foo"); } }
class Bar { public Bar() { System.out.println("Bar"); } } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-04-19T07:18:41.273

使用字节码来解决这个问题。

```
import java.util.ArrayList;
import java.util.List;

public enum EnumDemo {
    ONE(1), TWO(2);

    private final static List<Integer> vals;
    static {
        System.out.println("fetch instance from static");
        vals = new ArrayList<>();
        EnumDemo[] values = EnumDemo.values();
        for (EnumDemo value : values) {
            vals.add(value.val);
        }
    }

    private int val;
    EnumDemo(int val){
        this.val = val;
        System.out.println("create instance:" + val);
    }

} 
```

使用 javac 编译到类文件，然后`javap -c EnumDemo.class`，得到这个：

```
Compiled from "EnumDemo.java"
public final class EnumDemo extends java.lang.Enum<EnumDemo> {
  public static final EnumDemo ONE;

  public static final EnumDemo TWO;

  public static EnumDemo[] values();
    Code:
       0: getstatic     #1                  // Field $VALUES:[LEnumDemo;
       3: invokevirtual #2                  // Method "[LEnumDemo;".clone:()Ljava/lang/Object;
       6: checkcast     #3                  // class "[LEnumDemo;"
       9: areturn       

  public static EnumDemo valueOf(java.lang.String);
    Code:
       0: ldc_w         #4                  // class EnumDemo
       3: aload_0       
       4: invokestatic  #5                  // Method java/lang/Enum.valueOf:(Ljava/lang/Class;Ljava/lang/String;)Ljava/lang/Enum;
       7: checkcast     #4                  // class EnumDemo
      10: areturn       

  static {};
    Code:
       0: new           #4                  // class EnumDemo
       3: dup           
       4: ldc           #16                 // String ONE
       6: iconst_0      
       7: iconst_1      
       8: invokespecial #17                 // Method "<init>":(Ljava/lang/String;II)V
      11: putstatic     #18                 // Field ONE:LEnumDemo;
      14: new           #4                  // class EnumDemo
      17: dup           
      18: ldc           #19                 // String TWO
      20: iconst_1      
      21: iconst_2      
      22: invokespecial #17                 // Method "<init>":(Ljava/lang/String;II)V
      25: putstatic     #20                 // Field TWO:LEnumDemo;
      28: iconst_2      
      29: anewarray     #4                  // class EnumDemo
      32: dup           
      33: iconst_0      
      34: getstatic     #18                 // Field ONE:LEnumDemo;
      37: aastore       
      38: dup           
      39: iconst_1      
      40: getstatic     #20                 // Field TWO:LEnumDemo;
      43: aastore       
      44: putstatic     #1                  // Field $VALUES:[LEnumDemo;
      47: getstatic     #8                  // Field java/lang/System.out:Ljava/io/PrintStream;
      50: ldc           #21                 // String fetch instance from static
      52: invokevirtual #15                 // Method java/io/PrintStream.println:(Ljava/lang/String;)V
      55: new           #22                 // class java/util/ArrayList
      58: dup           
      59: invokespecial #23                 // Method java/util/ArrayList."<init>":()V
      62: putstatic     #24                 // Field vals:Ljava/util/List;
      65: invokestatic  #25                 // Method values:()[LEnumDemo;
      68: astore_0      
      69: aload_0       
      70: astore_1      
      71: aload_1       
      72: arraylength   
      73: istore_2      
      74: iconst_0      
      75: istore_3      
      76: iload_3       
      77: iload_2       
      78: if_icmpge     109
      81: aload_1       
      82: iload_3       
      83: aaload        
      84: astore        4
      86: getstatic     #24                 // Field vals:Ljava/util/List;
      89: aload         4
      91: getfield      #7                  // Field val:I
      94: invokestatic  #26                 // Method java/lang/Integer.valueOf:(I)Ljava/lang/Integer;
      97: invokeinterface #27,  2           // InterfaceMethod java/util/List.add:(Ljava/lang/Object;)Z
     102: pop           
     103: iinc          3, 1
     106: goto          76
     109: return        
} 
```

因此，枚举实例是静态实例，并且位于头部。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-10T18:35:42.423

**1.****枚举类型是其字段由一组固定的常量组成的**类型。常见示例包括指南针方向（NORTH、SOUTH、EAST 和 WEST 的值）和星期几。

**2.**它们是**静态的最终常量**，因此所有字母都大写。

**3.** JVM一加载类，静态变量就被初始化。

有关更多详细信息，请参阅此链接：

[http://docs.oracle.com/javase/1.5.0/docs/guide/language/enums.html](http://docs.oracle.com/javase/1.5.0/docs/guide/language/enums.html)

# iphone - iPhone 倒数计时器用于选定的持续时间

> ID：11419521
> 
> 赞同：-2
> 
> 时间：2012-07-10T18:24:58.270
> 
> 标签：iphone, ios, ios5, timer, nstimer

我希望在我的应用程序中创建一个倒数计时器，以便我可以给出一定的持续时间（如 15 分钟或 15:00），并且它从一个动作开始。

我还需要该倒计时计时器从外部 Web 服务获取经过的持续时间和总持续时间信息，并开始倒计时剩余时间。

这实际上是针对一个测验应用程序，其中将向用户展示一系列问题，并且计时器将放置在问题屏幕上（针对整个测验，而不仅仅是一个问题）。用户可以设置测验的持续时间，倒计时将在用户开始参加测验后立即开始。还有一个暂停功能，用户可以暂停测试，经过的时间和总持续时间的信息将在网络服务中注册。用户可以随时恢复测验，倒计时计时器从暂停时间开始（即从 Web 服务获取此信息）。

提前致谢。

PS：老实说，我不知道该怎么做。关于将时间存储在 Web 服务中的格式以及许多其他内容（例如在 NSTimer 循环运行后程序是否会继续执行等），存在太多的混淆。所以你知道我的意思。是的，NSTimer 确实解决了 Alex 所说的问题，并提供了示例代码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T18:34:52.997

查看[NSTimer](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/nstimer_Class/Reference/NSTimer.html)的文档。

通常，您会创建一个每秒调用一个方法的 NSTimer，如下所示：

```
NSTimer *theTimer = [NSTimer scheduledTimerWithTimeInterval:1.0 target:self selector:@selector(tick) userInfo:nil repeats:YES]; 
```

然后在滴答声中，您将减少一个保存剩余时间的变量，并更新显示屏上的标签。

此外，如果您想要一些工作示例代码，[请查看我](https://github.com/alexcoplan/countdown)在 GitHub 上的小倒计时应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-06T07:21:38.553

试试这些代码，我已经在我的应用程序中实现了它。最适合重新发送 OTP 类型的功能。

```
int secondsLeft;
int hours, minutes, seconds;

secondsLeft = 60;
[self countdownTimer];

-(void)countdownTimer {
//    secondsLeft = hours = minutes = seconds = 0;
timer = [NSTimer scheduledTimerWithTimeInterval:1.0f target:self selector:@selector(updateCounter:) userInfo:nil repeats:YES]; 
```

}

```
- (void)updateCounter:(NSTimer *)theTimer {
if(secondsLeft > 0 ) {
    secondsLeft -- ;
    hours = secondsLeft / 3600;
    minutes = (secondsLeft % 3600) / 60;
    seconds = (secondsLeft %3600) % 60;
    labelSeconds.text = [NSString stringWithFormat:@"%02d seconds left.",seconds];
} else {

    [timer invalidate];
    return;
} 
```

}

# iphone - 获取 SSCollectionViewItem 的 frame.size

> ID：11419527
> 
> 赞同：2
> 
> 时间：2012-07-10T18:25:21.203
> 
> 标签：iphone, ios, sstoolkit

我正在使用 SSToolkit/SSCollectionView 并且我有一个自定义 SSCollectionViewItem 但我很难获得由 SSCollectionView 代表设置的该视图的帧大小：

```
- (CGSize)collectionView:(SSCollectionView *)aCollectionView itemSizeForSection:(NSUInteger)section {
return CGSizeMake(280.0f, 280.0f);
} 
```

这是正在初始化的项目：

```
#pragma mark - Initializer

- (id)initWithReuseIdentifier:(NSString *)aReuseIdentifier {
    if ((self = [super initWithStyle:SSCollectionViewItemStyleImage reuseIdentifier:aReuseIdentifier])) {
        if([aReuseIdentifier isEqualToString:@"featuredIdentifier"]) {
            NSLog(@"Frame: %f", self.frame.size.width);
            return self;
        } else {
            self.imageView.backgroundColor = [UIColor colorWithWhite:0.95f alpha:1.0f];
            return self;
        }

        self.imageView.backgroundColor = [UIColor colorWithWhite:0.95f alpha:1.0f];
    }
    return self;
} 
```

`NSLog(@"FRAME Width:%f", self.frame.size.width);`总是返回 0

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T18:49:28.830

这是预期的行为。所有集合视图项始终使用 CGRectZero 初始化，因为它们可以在具有不同项大小的部分中重用。

SSCollectionView 在项目显示之前自动调整它们的大小。`layoutSubviews`如果您需要根据项目的大小进行布局，您应该实施。

此外，您似乎正在尝试根据标识符进行不同的绘图。我强烈建议您为每个标识符创建一个不同的类，以保持内容清晰易懂。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T18:47:44.773

在大多数（全部？）Cocoa 框架中，直到某个时间之后，当视图出现在屏幕上时，才会设置框架。如果您在视图内`willMoveToWindow`，我认为这可能会迟到。在大多数情况下，视图几何图形应该由 ViewController 在`viewWillLayoutSubviews`或类似期间设置，并且可以（应该）设置子视图以使用适当的“支柱和弹簧”（即`autoresizingMask`）。[请参阅UIView 参考页面](http://developer.apple.com/library/ios/#documentation/uikit/reference/uiview_class/uiview/uiview.html)的各个部分。

# ruby-on-rails - 从 JQuery-UI 1.8rc3 升级到 1.8.6 后，我的应用程序的功能受到严重影响

> ID：11419529
> 
> 赞同：1
> 
> 时间：2012-07-10T18:25:32.337
> 
> 标签：ruby-on-rails, jquery-ui

我将我们的 JQuery-UI 从 1.8rc3 升级到 1.8.6，现在我在创建我们所谓的 step 对象时遇到了重大问题。

在我升级之前，如果您添加了一个步骤，用户看到的是这样的：

![在此处输入图像描述](../Images/f71df958b90ebe226722297bbf0e3011.png)

从选择列表中进行选择后（例如“输入文本”），该步骤自动更改为：

![在此处输入图像描述](../Images/523e66e805e18d3eaff21c9d7f778f77.png)

但是，现在，在升级之后，如果我尝试创建一个步骤并从选择列表中选择某些内容，它不会改变。相反，它看起来像这样：

![在此处输入图像描述](../Images/7793a382dbcefc498ceab9ec5ea10d51.png)

有谁知道升级 JQuery-UI 是如何导致这种情况的？我想我可以将 1.8.6 文件一个接一个地添加到我的应用程序中，以找出究竟是什么导致了这种情况，但这显然非常耗时。谢谢！

这是生成步骤的代码：

```
%li.step.new_step.inline_edit{ :id => dom_id(step), :class => 'template step_template'}

  - form_for [container, step], :html => {:class => 'edit_step editing_only show_progress'} do |f|
    = f.hidden_field :insertion_point

    .action_selector
      = f.text_field :action_description, :maxlength => 255, 'data-help-id' => 'action_description', :placeholder => 'Choose an action...'
      = image_tag 'disclosure_triangle_open.gif', :class => 'autocomplete_triangle'

    .step_types
      - Step.strategy_classes.each do |strategy_class|
        = fields_for_step_type(strategy_class, f)
    .submit
      %button.save_continue.default_action{ :type => 'submit', :id => 'element_savecontinue' } Save and Continue
      %button.save_step_close{ :class => 'button gray save_close', :type => 'button', :id => 'element_save' } Save and Close
      %button.cancel_edit{ :type => 'button',:id => 'element_cancel' } Cancel
      %button.reset_new_step_type{ :type => 'reset', :id => 'reset_step' } Reset 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T19:56:55.363

好的，如果我继续使用我原来的 jquery-ui.autocomplete.js 文件但升级每个其他 jquery-ui。*** .js 文件，一切正常，看起来很棒。接受。

# php - 从 PHP 中检索数组值

> ID：11419535
> 
> 赞同：0
> 
> 时间：2012-07-10T18:25:48.503
> 
> 标签：php, geoip

我有这个功能：

```
print_r(geoip_record_by_name('php.net')); 
```

这导致：

```
Array ( 
   [continent_code] => NA 
   [country_code] => US
   [country_code3] => USA 
   [country_name] => United States 
   [region] => CA [city] => Sunnyvale 
   [postal_code] => 94089 
   [latitude] => 37.424900054932 
   [longitude] => -122.0074005127 
   [dma_code] => 807
   [area_code] => 408 
) 
```

我想检索区域值，但是

```
geoip_record_by_name('php.net')['region']; 
```

给出空白结果。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-10T18:28:22.973

以下语法仅在**PHP >= 5.4**中受支持：

```
geoip_record_by_name('php.net')['region']; 
```

如果您使用的是其他版本，则必须执行以下操作：

```
$arr = geoip_record_by_name('php.net');
echo $arr['region']; 
```

**文件：**

*   [http://php.net/manual/en/language.types.array.php#language.types.array.syntax.accessing](http://php.net/manual/en/language.types.array.php#language.types.array.syntax.accessing)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T18:28:08.127

你不能在 PHP (< 5.4) 中做到这一点。您需要先将数组保存为变量。

```
$geoip = geoip_record_by_name('php.net');
echo $geoip['region']; 
```

数组文档： http: [//php.net/manual/en/language.types.array.php#language.types.array.syntax.accessing](http://php.net/manual/en/language.types.array.php#language.types.array.syntax.accessing)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-10T18:27:54.090

```
$arrayName = geoip_record_by_name('php.net');
echo $arrayName['region']; 
```

您只能使用您在 PHP 5.4 中使用的语法

# postgresql - Postgresql 截断速度

> ID：11419536
> 
> 赞同：68
> 
> 时间：2012-07-10T18:25:50.637
> 
> 标签：postgresql, database-performance, truncate

我们`Postgresql 9.1.4`用作我们的数据库服务器。我一直在努力加快我的测试套件的速度，所以我盯着数据库分析了一下，看看到底发生了什么。我们正在使用[database_cleaner](https://github.com/bmabey/database_cleaner)在测试结束时截断表。是的，我知道交易更快，在某些情况下我不能使用它们，所以我不关心。

我关心的是为什么 TRUNCATION 需要这么长时间（比使用 DELETE 更长）以及为什么在我的 CI 服务器上需要更长的时间。

现在，在本地（在 Macbook Air 上）一个完整的测试套件需要 28 分钟。拖尾日志，每次我们截断表时......即：

```
TRUNCATE TABLE table1, table2  -- ... etc 
```

执行截断需要超过 1 秒。在我们的 CI 服务器（Ubuntu 10.04 LTS）上跟踪日志，截断表需要整整 8 秒，构建需要 84 分钟。

当我切换到该`:deletion`策略时，我的本地构建需要 20 分钟，而 CI 服务器下降到 44 分钟。这是一个*显着*的差异，我真的很惊讶为什么会这样。我已经在 CI 服务器上[调整](http://thebuild.com/presentations/not-your-job.pdf) [了](http://wiki.postgresql.org/wiki/Tuning_Your_PostgreSQL_Server)数据库，它有 16gb 系统内存、4gb shared_buffers...和一个 SSD。所有的好东西。这怎么可能：

**一种。**它比我的带有 2gb ram
**b 的 Macbook Air 慢得多。**[当postgresql 文档](http://www.postgresql.org/docs/9.1/static/sql-truncate.html) [明确](http://www.postgresql.org/docs/9.1/static/sql-truncate.html#AEN75996)指出它应该更快时，TRUNCATION 比 DELETE 慢得多。

有什么想法吗？

* * *

## 回答 #1

> 赞同：155
> 
> 时间：2012-07-11T00:24:39.190

这在 SO 和 PostgreSQL 邮件列表上都出现了几次。

最后两点的*TL;DR ：*

(a) 较大的 shared_buffers 可能是 CI 服务器上 TRUNCATE 较慢的原因。不同的 fsync 配置或使用旋转介质而不是 SSD 也可能有问题。

(b)`TRUNCATE`具有固定成本，但不一定比 慢，而且`DELETE`它做更多的工作。请参阅下面的详细说明。

**更新：**这篇文章引起了关于 pgsql 性能的[重要讨论。](http://archives.postgresql.org/pgsql-performance/2012-07/msg00123.php)看到[这个线程](http://archives.postgresql.org/pgsql-performance/2012-07/threads.php#00123)。

**更新 2：** 9.2beta3 中添加了改进，应该对此有所帮助，请参阅[这篇文章](http://archives.postgresql.org/message-id/CAMkU=1x36-xLdUORNZCXZh4yt+qC0z+Qqcyj7Y-gfPgFt2w2FA@mail.gmail.com)。

**`TRUNCATE`vs的详细解释`DELETE FROM`**：

虽然不是该主题的专家，但我的理解是`TRUNCATE`每张表的成本几乎是固定的，而`DELETE`对于 n 行至少是 O(n)；如果有任何外键引用正在删除的表，则更糟。

我一直认为 a 的固定成本`TRUNCATE`低于`DELETE`在几乎空的桌子上 a 的成本，但事实并非如此。

**`TRUNCATE table;`超过`DELETE FROM table;`**

a 之后的数据库状态与`TRUNCATE table`您改为运行时大致相同：

*   `DELETE FROM table;`
*   `VACCUUM (FULL, ANALYZE) table;` （仅限 9.0+，见脚注）

...虽然当然`TRUNCATE`实际上并没有通过 a`DELETE`和 a实现其效果`VACUUM`。

关键是做不同的事情`DELETE`，`TRUNCATE`所以你不只是比较两个具有相同结果的命令。

A`DELETE FROM table;`允许保留死行和膨胀，允许索引携带死条目，不更新查询计划器使用的表统计信息等。

A`TRUNCATE`为您提供了一个全新的表和索引，就好像它们刚刚被`CREATE`编辑过一样。就像您删除了所有记录，重新索引表并执行了`VACUUM FULL`.

如果您不关心表中是否还有残留物，因为您将要再次将其填满，那么您最好使用`DELETE FROM table;`.

因为您没有运行`VACUUM`，您会发现死行和索引条目累积为必须扫描然后忽略的膨胀；这会减慢您的所有查询速度。如果您的测试实际上并没有创建和删除您可能不会注意到或关心的所有数据，那么`VACUUM`如果您这样做了，您总是可以在测试运行的中途进行一两次。更好的是，让积极的 autovacuum 设置确保 autovacuum 在后台为您执行此操作。

*在整个*测试套件运行后，您仍然可以`TRUNCATE`使用所有表，以确保在多次运行中不会产生任何影响。在 9.0 和更高版本上，全局在桌面上至少是一样好，如果不是更好的话，而且要容易得多。*`VACUUM (FULL, ANALYZE);`*

 *IIRC Pg 有一些优化，这意味着它可能会注意到您的事务是唯一可以看到表并立即将块标记为空闲的事务。在测试中，当我想创建膨胀时，我必须有多个并发连接才能做到这一点。不过，我不会依赖这个。

**`DELETE FROM table;`对于没有 f/k refs 的小桌子来说非常便宜**

对于`DELETE`没有外键引用的表中的所有记录，所有 Pg 都必须执行顺序表扫描并设置`xmax`遇到的元组。这是一个非常便宜的操作——基本上是线性读取和半线性写入。AFAIK 它不必触及索引；它们继续指向死元组，直到它们被稍后清理，`VACUUM`这也将表中仅包含死元组的块标记为空闲。

`DELETE`如果有*很多*记录，如果有很多必须检查的外键引用，或者如果`VACUUM (FULL, ANALYZE) table;`您`TRUNCATE`在`DELETE`.

在我在这里的测试中，a通常比0.5ms 和 2ms`DELETE FROM table;`快 4 倍。`TRUNCATE`那是 SSD 上的测试数据库，正在运行，`fsync=off`因为我不在乎我是否会丢失所有这些数据。当然，`DELETE FROM table;`不是在做所有相同的工作，如果我跟进`VACUUM (FULL, ANALYZE) table;`它是一个更昂贵的 21 毫秒，所以`DELETE`如果我实际上不需要原始的桌子，这只是一个胜利。

**`TRUNCATE table;`做更多的固定成本工作和家务比`DELETE`**

相比之下，a`TRUNCATE`必须做很多工作。它必须为表、它的 TOAST 表（如果有）以及表的每个索引分配新文件。必须将标头写入这些文件，并且系统目录也可能需要更新（在这一点上不确定，尚未检查）。然后它必须用新文件替换旧文件或删除旧文件，并且必须确保文件系统通过同步操作（fsync() 或类似操作）赶上更改，这通常会将所有缓冲区刷新到磁盘. 如果您使用 (data-eating) option 运行，我不确定是否会跳过同步`fsync=off`。

我最近了解到，`TRUNCATE`还必须刷新所有与旧表相关的 PostgreSQL 缓冲区。对于巨大的`shared_buffers`. 我怀疑这就是为什么它在您的 CI 服务器上较慢的原因。

**余额**

无论如何，您可以看到`TRUNCATE`具有关联 TOAST 表（大多数都有）和多个索引的表可能需要一些时间。不长，但比`DELETE`一张几乎空无一人的桌子要长。

因此，您最好做一个`DELETE FROM table;`.

--

注意：在 9.0 之前的数据库上，`CLUSTER table_id_seq ON table; ANALYZE table;`或者`VACUUM FULL ANALYZE table; REINDEX table;`更接近于`TRUNCATE`. impl 在 9.0中`VACUUM FULL`更改为更好的。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-14T10:50:25.820

布拉德，只是为了让你知道。我已经相当深入地研究了一个非常相似的问题。

相关问题：[30 个表，几行 - TRUNCATE 清空它们并重置附加序列的最快方法？](https://stackoverflow.com/questions/11311079/30-tables-with-few-rows-truncate-the-fastest-way-to-empty-them-and-reset-attac/11466456#11466456)

另请查看此问题和此拉取请求：

[https://github.com/bmabey/database_cleaner/issues/126](https://github.com/bmabey/database_cleaner/issues/126)

[https://github.com/bmabey/database_cleaner/pull/127](https://github.com/bmabey/database_cleaner/pull/127)

还有这个线程： http: [//archives.postgresql.org/pgsql-performance/2012-07/msg00047.php](http://archives.postgresql.org/pgsql-performance/2012-07/msg00047.php)

我很抱歉写这个作为答案，但我没有找到任何评论链接，可能是因为那里已经有太多评论了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-04-28T09:45:29.017

我最近遇到了类似的问题，即：

1.  运行使用 DatabaseCleaner 的测试套件的时间在具有可比硬件的不同系统之间差异很大，
2.  更改 DatabaseCleaner 策略以`:deletion`提供约 10 倍的改进。

缓慢的根本原因是用于数据库存储的带有日志 (ext4) 的文件系统。在 TRUNCATE 操作期间，日志守护程序 (jbd2) 使用了大约 90% 的磁盘 IO 容量。在这些情况下，我不确定这是错误、边缘情况还是实际上是正常行为。然而，这解释了为什么 TRUNCATE 比 DELETE 慢得多——它产生了更多的磁盘写入。因为我不想实际使用 DELETE，所以我求助于设置`fsync=off`，这足以缓解这个问题（在这种情况下，数据安全并不重要）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-10T18:39:29.660

需要考虑的几种替代方法：

*   创建一个包含静态“夹具”数据的空数据库，并在其中运行测试。完成后，只需删除数据库，这应该很快。
*   创建一个名为“test_ids_to_delete”的新表，其中包含表名和主键 ID 列。更新您的删除逻辑以在此表中插入 ids/表名称，这将比运行删除快得多。然后，编写一个脚本以“离线”运行以实际删除数据，无论是在整个测试运行完成后，还是在一夜之间。

前者是一种“洁净室”方法，而后者意味着会有一些测试数据会在数据库中保留更长时间。带有脱机删除的“脏”方法是我用于具有大约 20,000 个测试的测试套件的方法。是的，由于开发数据库中有“额外”的测试数据，有时会出现问题。但有时这种“肮脏”帮助我们找到并修复了错误，因为“混乱”更好地模拟了真实世界的情况，以一种洁净室方法永远不会的方式。*

# javascript - 延迟加载不会加载可见图像

> ID：11419537
> 
> 赞同：8
> 
> 时间：2012-07-10T18:25:53.547
> 
> 标签：javascript, jquery, html, lazy-loading

我正在尝试使用延迟加载来仅加载可见的图像（因为我的网站是响应式的，并且某些内容通过 display:none 隐藏在较小的屏幕上的客户端上）。

基本上，lazyload 有效，但只有在我稍微滚动页面之后。

这是我正在使用的延迟加载设置，即使将阈值设置为 2000 像素（超过整个页面高度），它仍然只在用户滚动页面后加载图像（甚至 1 像素）。此错误仅出现在 webkit 浏览器中。

```
$(document).ready(function () {
    $("img").lazyload({threshold : "2000", effect : "fadeIn", effectspeed: 2000,});
}); 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-10T18:58:53.070

我认为这可能是`threshold`参数的一些不当行为，但您仍然可以根据[此页面](http://www.appelsiini.net/projects/lazyload)手动触发加载：

```
<script type="text/javascript">
  $(document).ready(function () {
      $("img")
         .lazyload({
             event: "lazyload",
             effect: "fadeIn",
             effectspeed: 2000
           })
         .trigger("lazyload");
  });
</script> 
```

但是如果你想加载所有图像`ready`，为什么需要延迟加载呢？你可以只使用`$.animate`.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-16T11:21:00.803

只需在 .lazyload() 之后添加它，它就会触发滚动并显示图像

```
$(window).trigger('scroll'); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-17T09:38:07.467

您需要为图像设置宽度和高度。

如果未设置宽度和高度，jQuery 将在 document.load 事件上报告 Webkit 浏览器中不可见的图像。`skip_invisible`什么时候`true`延迟加载将忽略图像，这意味着它不会尝试确定是否应该加载图像。它们将在您第一次滚动时加载。

如果您设置`skip_invisible`为`false`插件，将尝试确定是否应加载图像。但是，由于您没有设置宽度和高度，所有图像的大小都是 0x0 或 1x1。因此，当插件启动时，所有图像都在视口中（因为它们的大小）。因为图像在视口中，所以延迟加载将指示全部加载它们。

简而言之：为图像添加宽度和高度。没有它们，延迟加载将无法正常工作。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-12-04T07:24:34.763

我不确定何时添加，但您可以手动触发“出现”事件以部分或全部（取决于 css 选择器）出现：

```
$("img.lazy").trigger('appear'); 
```

从这里得到这个：http: [//yuji.wordpress.com/2014/05/14/force-jquery-lazyload-to-appear/](http://yuji.wordpress.com/2014/05/14/force-jquery-lazyload-to-appear/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-12-12T14:53:52.243

我遇到过同样的问题。它们位于滚动 div 中，但只会在初始滚动后加载。

除非您对其进行限制，否则使用“出现”将显示所有内容。就我而言，我只想在加载时显示前 3 个。其余的像往常一样懒加载。

```
$("img.lazy:lt(3)").trigger('appear'); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-02-22T19:10:59.950

我对隐藏元素有同样的问题，这是一个简单的解决方法，但它有效。当我点击页面时，我触发滚动事件来强制延迟加载脚本。您可以对事件调整大小做同样的事情

```
$(document).ready(function () {
    $("img").lazyload({
        event: "lazyload",
        effect: "fadeIn",
        effectspeed: 2000
    });
    $(window).resize(function () {
        $(this).trigger("scroll");
    }); 
}); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-12T17:36:23.907

尝试传递附加参数。

跳过不可见：假

此参数默认为 true，因此当插件启动它的工作时，您的图像似乎不可见。当您在网站上使用任何预加载器时，可能会发生这种情况。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-05-15T13:55:37.523

我遇到了同样的问题，并找到了解决方案。请注意，我的图像放置在通过 ajax 调用填充的 div 中。

只需在 1.8.4 版本的延迟加载源（第 147-150 行）中更改一行代码：

```
/* Force initial check if images should appear. */
        $(document).ready(function() {
            update();
        }); 
```

代替

```
/* Force initial check if images should appear. */
        $(window).load(function() {
            update();
 }); 
```

或者最终将对“update()”的调用添加到任何其他需要的事件中。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-09-06T01:59:54.157

我有一个类似的问题，在我滚动之前，在 ajax 调用之后图像不会加载（即使我只是滚动 1px 它也会加载）。我发现我需要像 Mika Tuupola 所说的那样为我的图像添加高度和宽度。我的图像是动态加载的，图像大小不同，并且是从 foreach 循环加载的。我向图像标签添加了通用宽度和高度属性，然后在延迟加载加载图像后，我删除了这些属性，以便它显示正确的图像大小。

```
<img class="lazy" src="img/placeholder.gif" data-original="img/image.gif" width="1000" height="600">

$('img.lazy').lazyload({
    skip_invisible: false
}).removeClass('lazy').removeAttr('width').removeAttr('height'); 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-06-25T07:34:16.503

简而言之：为图像添加宽度和高度。没有它们，延迟加载将无法正常工作。

你应该提前加载占位符；像这样：</p>

```
<img src="./images/grey.gif" alt="" style="display:none"> 
```

接着

```
$("img.lazy").lazyload({placeholder : "images/grey.gif"}); 
```

如果将图像的宽度设置为 100%，这将提供宽度和高度。这解决了我的问题。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2017-08-23T12:25:03.657

增加**failure_limit**。

滚动页面插件循环通过卸载图像后。循环检查图像是否可见。默认情况下，当找到视口外的第一个图像时，循环会停止。这是基于以下假设。页面上的图像顺序与 HTML 代码中的图像顺序相同。在某些布局假设下，这可能是错误的。

将 failure_limit 设置为 10 会导致插件在找到首屏下方的 10 张图像后停止搜索要加载的图像。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2017-01-20T17:30:43.297

这是可行的解决方案，但由于某种原因不是很好：

```
$("img").lazyload({
    /* Image loaded callback function */
    load: function() {
        $(window).trigger('scroll');
    }
}); 
```

每次延迟加载插件加载图片时，都会调用此函数并模拟窗口触发器“滚动”，所以这对我来说是一个解决方案

* * *

## 回答 #13

> 赞同：-1
> 
> 时间：2012-08-09T12:03:26.737

我正在处理同样的问题，我注意到这个问题只发生在图像放置在最初隐藏的 div 中时（即显示：无；）

# c# - 使用可空值 MS SQL 数据库表中的外键

> ID：11419539
> 
> 赞同：1
> 
> 时间：2012-07-10T18:25:55.773
> 
> 标签：c#, sql-server-2008, nullable

我有两张表，为简单起见，假设它们是这样定义的

```
Stack 
{
    ID       int  Primary Key
    Name     varchar(255), not null
}

User
{
    ID           int  Primary Key
    Name         varchar(255), not null
    Stack_ID     int, Foreign Key to Stack.ID nulls are allowed
} 
```

我用于插入用户的存储过程看起来像这样

```
CREATE PROCEDURE usp_insertUser
    @id int,
    @name varchar(255),
    @stackID int
AS
    INSERT INTO User (ID, Name, Stack_ID) VALUES (@id, @name, @stackID)
GO 
```

在我的模型层我的用户类中，我使用可空值来保存 StackID

```
public class User
{
     public int ID {get; set;}
     public string Name {get; set;}
     int? Stack_ID {get; set;}
} 
```

我认为我的数据访问层非常标准，但我遇到了麻烦，我的 InsertUser 方法看起来与此类似

```
 public void InsertUser(User entity)
 {
     ...
     using (SqlCommand command = new SqlCommand())
     {
         command.Connection = conn;
         command.CommandType = System.Data.CommandType.StoredProcedure;
         command.CommandText = "usp_insertUser";

         command.Parameters.AddWithValue("@id", entity.ID);
         command.Parameters.AddWithValue("@name", entity.Name);
         command.Parameters.AddWithValue("@stackID", entity.Stack_ID);
         conn.Open();
         ...
         //real stored proc returns the id of the item inserted so i use a reader
         SqlDataReader reader = command.ExecuteReader();
         ....
    }
 } 
```

我的问题是，当我将 User.Stack_ID 保留为 null 时，它不会在数据库中插入 null，而是出现错误，说 @stackID 是预期的，但不存在。为什么我不能直接将这个可为空的 int 插入数据库？

另外，有没有一种方法可以让我从数据库中读取这个可能的 null int ？

当我这样做时，我认为这会起作用。

```
User.Stack_ID = (int?)reader["Stack_ID"]; 
```

这显然行不通，我必须做一些草率的事情

```
try {
   User.StackID = (int)reader["Stack_ID"];
}
catch {
   User.StackID = null;
} 
```

使用这些 Nullable 类型的任何帮助将不胜感激。抱歉，对于菜鸟问题​​，过去当我有整数并想要一个空值或 w/e 我会将它们设置为 -1 或 0 或其他东西时，当它们是外键时这不起作用:-(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T18:29:12.573

```
command.Parameters.AddWithValue("@stackID", entity.Stack_ID ?? (object) DBNull.Value); 
```

要读取空值，您可以这样做：

```
User.StackID = reader.Field<int?>("Stack_ID"); 
```

这使用了[`Field`扩展方法](http://msdn.microsoft.com/en-us/library/bb360891.aspx)。来自 MSDN：

> Field 方法支持将列作为可空类型访问。如果 DataSet 中的基础值为 [DBNull.]Value，则返回的可为 null 类型将具有 null 值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T18:29:42.833

有一种特殊的类型称为`DBNull`将空值插入数据库。

尝试

```
command.Parameters.AddWithValue("@stackID", entity.Stack_ID.HasValue ? entity.StackId : DBNull.Value); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T18:30:16.990

最简单的方法是使用`as`.

```
int? myNullableInt = reader["Stack_ID"] as int?; 
```

需要注意的是，如果`reader["Stack_ID"]`是不同的数据类型（例如字符串、十进制等），那么您将得到 null 而不是异常。

编辑：至于插入到数据库中，如果使用 插入`command.Parameters.Add`，则不需要更改数据类型，它将支持可为空的值。

# html - 如何摆脱表格单元格之间的这一像素空间？

> ID：11419541
> 
> 赞同：1
> 
> 时间：2012-07-10T18:26:05.523
> 
> 标签：html, html-table, html-email

我正在设计一个电子邮件活动，我的要求不要求 CSS。不要让我开始。

除了下面提到的表格外，一切正常。角落部分与表格的其余部分偏移了一个像素，我一生都无法弄清楚我在哪里放错了分号或其他东西。

角落部分是相同的 15x15 图像，只是根据角落旋转 90 度。但是您可以看到线条一直延伸到边缘，因此图像上没有额外的填充。

![一个角落，放大到 3200%](../Images/6af8f2fde58ebc25d38c2b3cbec628e2.png)

我尝试了各种迭代，`<t*`属性越来越少，在表格、行和单元格级别设置内容，99% 的在线搜索都引导我进行问答，以确保跨度正常工作——我认为我的是。当我使用border=1 属性时，上限仍然存在，导致我不怀疑边界是罪魁祸首。

我使用 4 列 x 3 行，最外面的列和行包含 15px X 15px 角图像 (gif)，角之间的单元格具有白色背景，1px X 1px gif 间隔对齐并拉伸给我角落图像之间的一条线。

中间部分是一个带有图标的单元格，后面是一个文本单元格。我需要创建 5 个这样的要点；我添加了第二个空白框来显示当其中两个相互对接时会发生什么。

任何人对我可以查看的内容、需要添加的内容或需要从代码中减去的内容有任何想法吗？

![在此处输入图像描述](../Images/887148f300d4d7846ee56daf07f8e784.png)

```
<html>
 <body style='background:f3f7f8'>
     <table border=0 width=430 style='font-size=12px;cellpadding=0;cellspacing=0;border-collapse:collapse;'>
       <tr>
        <td width=15 height=15><img src="644810_tl.png" width=15 height=15 ></td>
        <td colspan=2 valign="top" style='background:ffffff'><img src="dkgray.gif" width=400 height=2></td>
        <td width=15 height=15><img src="644810_tr.png" width=15 height=15></td>  
       </tr>

       <tr>
        <td style='background=ffffff' align=left><img src="dkgray.gif" width=2 height=100></td>
        <td style='background=ffffff' width=75 align=center valign=center><img src="icon-pdf.gif"></td>
        <td style='background=ffffff' width=325 align=left valign=cener><strong>Lorem Ipsum<br></strong>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nunc dignissim risus at quam hendrerit aliquet. Nunc et felis elit. Fusce pharetra adipiscing velit vel pharetra. Donec ornare velit sed massa tempor at tempor sem lacinia. Quisque enim nisl, auctor sit amet volutpat eget, porttitor sit amet tortor. Nulla ut sodales magna. Morbi adipiscing est urna, ac gravida erat.</td>
        <td style='background=ffffff' align=right><img src="dkgray.gif" width=2 height=100></td>
       </tr>

       <tr>
        <td width=15 height=15 style='background=ffffff'><img src="644810_bl.png" width=15 height=15></td>
        <td colspan=2 valign="bottom" style='background:ffffff;cellpadding=0;cellspacing=0;border-collapse:collapse'><img src="dkgray.gif" width=400 height=2></td>
        <td width=15 height=15 style='background=ffffff'><img src="644810_br.png" width=15 height=15></td>
       </tr>

       <tr>
        <td width=15 height=15><img src="644810_tl.png" width=15 height=15 ></td>
        <td colspan=2 valign="top" style='background:ffffff'><img src="dkgray.gif" width=400 height=2></td>
        <td width=15 height=15><img src="644810_tr.png" width=15 height=15></td>  
       </tr>

       <tr>
        <td width=15 height=15 style='background=ffffff'><img src="644810_bl.png" width=15 height=15></td>
        <td colspan=2 valign="bottom" style='background:ffffff;cellpadding=0;cellspacing=0;border-collapse:collapse'><img src="dkgray.gif" width=400 height=2></td>
        <td width=15 height=15 style='background=ffffff'><img src="644810_br.png" width=15 height=15></td>
       </tr>
     </table>
   </body>
  </html> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-10T18:27:58.610

使用边框折叠，这会将单元格的边框折叠到一个边框。

```
table
{
    border-collapse:collapse;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-10T18:30:11.543

您正在指定`cellpadding`并且`cellspacing`好像它们是 CSS 属性。它们不是——它们是必须存在于`table`标签上的属性。

此外，十六进制颜色参考应该`#`在它们之前。

# wpf - 在对列进行排序时编辑 WPF 数据网格组合框列时，对象未设置为对象的实例

> ID：11419543
> 
> 赞同：2
> 
> 时间：2012-07-10T18:26:10.780
> 
> 标签：wpf, wpfdatagrid

我有一个数据网格，其中我使用绑定到整数属性的 TextColumn。我可以编辑 TextColumn 中的值，直到单击列标题。单击时该列将正确排序，但是当我随后尝试编辑一个值时，当我通过单击其他地方导致 LostFocus 事件时，我得到一个异常。

（问题更改为所需的最低设置以使其可重现）

XAML：

```
<DataGridTextColumn Binding="{Binding CompStrength}"/> 
```

堆栈跟踪：

```
bij System.Windows.Controls.DataGrid.UpdateRowEditing(DataGridCell cell)
bij System.Windows.Controls.DataGrid.OnExecutedCommitEdit(ExecutedRoutedEventArgs e)
bij System.Windows.Controls.DataGrid.OnExecutedCommitEdit(Object sender, ExecutedRoutedEventArgs e)
bij System.Windows.Input.CommandBinding.OnExecuted(Object sender, ExecutedRoutedEventArgs e)
bij System.Windows.Input.CommandManager.ExecuteCommandBinding(Object sender, ExecutedRoutedEventArgs e, CommandBinding commandBinding)
bij System.Windows.Input.CommandManager.FindCommandBinding(CommandBindingCollection commandBindings, Object sender, RoutedEventArgs e, ICommand command, Boolean execute)
bij System.Windows.Input.CommandManager.FindCommandBinding(Object sender, RoutedEventArgs e, ICommand command, Boolean execute)
bij System.Windows.Input.CommandManager.OnExecuted(Object sender, ExecutedRoutedEventArgs e)
bij System.Windows.UIElement.OnExecutedThunk(Object sender, ExecutedRoutedEventArgs e)
bij System.Windows.Input.ExecutedRoutedEventArgs.InvokeEventHandler(Delegate genericHandler, Object target)
bij System.Windows.RoutedEventArgs.InvokeHandler(Delegate handler, Object target)
bij System.Windows.RoutedEventHandlerInfo.InvokeHandler(Object target, RoutedEventArgs routedEventArgs)
bij System.Windows.EventRoute.InvokeHandlersImpl(Object source, RoutedEventArgs args, Boolean reRaised)
bij System.Windows.UIElement.RaiseEventImpl(DependencyObject sender, RoutedEventArgs args)
bij System.Windows.UIElement.RaiseEvent(RoutedEventArgs args, Boolean trusted)
bij System.Windows.Input.RoutedCommand.ExecuteImpl(Object parameter, IInputElement target, Boolean userInitiated)
bij System.Windows.Input.RoutedCommand.Execute(Object parameter, IInputElement target)
bij System.Windows.Controls.DataGrid.EndEdit(RoutedCommand command, DataGridCell cellContainer, DataGridEditingUnit editingUnit, Boolean exitEditMode)
bij System.Windows.Controls.DataGrid.OnCurrentCellChanged(DependencyObject d, DependencyPropertyChangedEventArgs e)
bij System.Windows.DependencyObject.OnPropertyChanged(DependencyPropertyChangedEventArgs e)
bij System.Windows.FrameworkElement.OnPropertyChanged(DependencyPropertyChangedEventArgs e)
bij System.Windows.DependencyObject.NotifyPropertyChange(DependencyPropertyChangedEventArgs args)
bij System.Windows.DependencyObject.UpdateEffectiveValue(EntryIndex entryIndex, DependencyProperty dp, PropertyMetadata metadata, EffectiveValueEntry oldEntry, EffectiveValueEntry& newEntry, Boolean coerceWithDeferredReference, Boolean coerceWithCurrentValue, OperationType operationType)
bij System.Windows.DependencyObject.SetValueCommon(DependencyProperty dp, Object value, PropertyMetadata metadata, Boolean coerceWithDeferredReference, Boolean coerceWithCurrentValue, OperationType operationType, Boolean isInternal)
bij System.Windows.DependencyObject.SetCurrentValueInternal(DependencyProperty dp, Object value)
bij System.Windows.Controls.DataGrid.set_CurrentCellContainer(DataGridCell value)
bij System.Windows.Controls.DataGrid.set_FocusedCell(DataGridCell value)
bij System.Windows.Controls.DataGridCell.OnAnyGotFocus(Object sender, RoutedEventArgs e)
bij System.Windows.RoutedEventHandlerInfo.InvokeHandler(Object target, RoutedEventArgs routedEventArgs)
bij System.Windows.EventRoute.InvokeHandlersImpl(Object source, RoutedEventArgs args, Boolean reRaised)
bij System.Windows.UIElement.RaiseEventImpl(DependencyObject sender, RoutedEventArgs args)
bij System.Windows.UIElement.RaiseEvent(RoutedEventArgs e)
bij System.Windows.FrameworkElement.OnGotFocus(RoutedEventArgs e) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T20:11:20.737

在煞费苦心地重建项目后，我终于找到了这个异常的原因：令人惊讶的是，在将 PresentationFramework.Classic.dll 中的 classc.xaml 主题作为资源添加到 WPF 项目后出现了错误。我就此事联系了微软，我们会看看会发生什么......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-09-19T15:01:15.687

实际上，我发现我自己的问题是来自 CellEditEnding 事件处理程序的回调试图更新网格数据源，这导致了该行为。添加标志以通知网格正在更新解决了我的问题

# android - Android - 将位置保存到地图

> ID：11419544
> 
> 赞同：0
> 
> 时间：2012-07-10T18:26:14.893
> 
> 标签：android, maps

我正计划开发一个应用程序，以扫描（使用 NFC，类似于 QR 码）地理位置/地址并将其保存到“地图”上的“我的地点”，还可以选择获取到该位置的路线。我需要 Maps API 密钥吗？我是否使用 Google 地方 API？

有没有类似的样本？

非常感谢任何帮助。

问候苏雷卡

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T18:37:53.837

您将需要使用[Google Places API](https://developers.google.com/places/documentation/)并且需要来自[Google API Console](http://code.google.com/apis/console/)的 API 密钥，但这表示我不知道如何将地点添加到用户的 My Places... 您可以将它们转发到 Google Maps带有该地点详细信息的应用程序...

# slickgrid - 将 slickgrid 放入紧凑的屏幕空间的“最佳实践”是什么？

> ID：11419553
> 
> 赞同：2
> 
> 时间：2012-07-10T18:26:40.137
> 
> 标签：slickgrid

我们希望使用 slickgrid 在数百个由业务表单构建的现有网页上覆盖笨重且不灵活的数据表。一些表格仅用于显示，其他表格用于用户输入/更新。因此，不动产（和列/行计数）是具体设置的。为避免与父页面样式冲突，网格放置在 iframe 中。该方法必须考虑标题栏、仅查询表上的可选过滤器栏、列标题栏和页脚栏（仅在需要时）。获得正确的总体高度是最困难的。看起来可用的工具是：

1.  iframe 的几何形状
2.  iframe 中网格容器 div 的几何形状
3.  options.rowHeight
4.  options.headerRowHeight（如果查询）
5.  行高 CSS 样式
6.  字体大小的 css 样式。

似乎有一些神秘的算法在计算显示的行数、画布大小和视口大小；并直接使用脚本设置其中一些项目会破坏网格。
举个简单的例子，假设可用高度为 H 像素，并且必须包含 R 行数据。是否有任何公式或指南可以为上面列出的项目赋值？还是我们必须与试错作斗争才能很好地适应？

# iphone - 只更新可见的表格视图单元格？

> ID：11419554
> 
> 赞同：1
> 
> 时间：2012-07-10T18:26:49.283
> 
> 标签：iphone, objective-c, cocoa-touch, uitableview

我正在尝试加载包含从 Internet 下载的图像的单元格的表格视图。我只想对当前可见的单元格执行下载操作，而不是在用户快速向下滚动时下载每个图像。

我找到了 indexPathsForVisibleRows 方法，它应该很好地满足我的需求，但我需要一种方法来确定表格视图何时不再滚动。我的想法是在表格视图不滚动时使用 indexPathsForVisibleRows，以便加载当前屏幕上的所有图像而无需加载图像。

是否有任何我可以覆盖的方法或订阅通知，当表格视图不再滚动时会提醒我？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T18:30:08.063

看看这里列出的方法：http: [//developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIScrollViewDelegate_Protocol/Reference/UIScrollViewDelegate.html](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIScrollViewDelegate_Protocol/Reference/UIScrollViewDelegate.html)

如果您的视图控制器是 UITableView 的委托，这些也将被触发，因为 UITableView 是 UIScrollView 的子类。

特别要注意：`scrollViewDidEndDecelerating`。这是我曾经做过的几乎你所要求的事情。

# objective-c - 在 debian (Apache) 的后台运行 php 脚本

> ID：11419556
> 
> 赞同：2
> 
> 时间：2012-07-10T18:27:08.020
> 
> 标签：objective-c, apache, apache2, push-notification, debian

我正在尝试在我的 debian vps（apace2，mysql）上进行推送通知。

我使用本教程中的 php 脚本 (http://www.raywenderlich.com/3525/apple-push-notification-services-tutorial-part-2)。

基本上，该脚本被放置在一个不定式循环中，每隔几秒钟检查一个 mysql 表中的新记录。该教程说它应该作为后台进程运行。

```
// This script should be run as a background process on the server. It checks
// every few seconds for new messages in the database table push_queue and 
// sends them to the Apple Push Notification Service.
//
// Usage: php push.php development & 
```

所以我有四个问题。

1.  如何从终端启动脚本？我应该输入什么？服务器上的脚本位置是：

    /var/www/development_folder/scripts/push2/push.php

2.  如果需要（无需重新启动），我该如何杀死它？

3.  由于推送通知是必不可少的，我需要一种方法来检查脚本是否正在运行。代码（来自教程）调用函数出现问题：

    ```
    function fatalError($message)
    {
     writeToLog('Exiting with fatal error: ' . $message);
     exit;
    } 
    ```

也许我可以在那里放一些东西来重新启动脚本？但是如果脚本正在运行，如果有一个 cron 作业或每隔 5 分钟左右检查一次，如果它没有运行则启动它也很好。

4 - 我可以让脚本在 apace 或 mysql 重启后自动启动吗？如果服务器崩溃或发生其他需要快速重启的事情？

非常感谢提前

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-11T18:56:15.017

1.  您可以使用以下命令运行脚本：

    ```
    nohup php /var/www/development_folder/scripts/push2/push.php > /dev/null & 
    ```

    nohup 意味着当您关闭终端窗口时，该命令不应退出（它忽略挂断信号）。如果你不关心这个，你可以用“php /var/www/development_folder/scripts/push2/push.php &”开始这个过程。PS！nohup 默认将脚本输出记录到名为 nohup.out 的文件中，如果您不希望这样做，只需添加 > /dev/null ，就像我在这里所做的那样。末尾的 & 表示进程将在后台运行。我只建议在测试代码时像这样启动推送脚本。该脚本应该在系统启动时作为守护进程运行（参见 4.），如果它一直运行很重要的话。

2.  只需键入

    ```
    ps ax | grep push.php 
    ```

    你会得到进程ID（pid）。它看起来像这样：

    ```
    4530 pts/3    S      0:00 php /var/www/development_folder/scripts/push2/push.php 
    ```

    pid 是您将看到的第一个数字。然后，您可以运行以下命令来终止脚本：

    ```
    kill -9 4530 
    ```

    如果你运行 ps ax | grep push.php 再次该过程现在应该消失了。

3.  我建议您创建一个 cronjob 来检查 php 脚本是否正在运行，如果没有，则启动它。您可以在 shell 脚本中使用 ps ax 和 grep 检查来执行此操作。这样的事情应该这样做：

    ```
    if ! ps ax | grep -v grep | grep 'push.php' > /dev/null
    then
      nohup php /var/www/development_folder/scripts/push2/push.php > /dev/null &
    else
      echo "push-script is already running"
    fi 
    ```

4.  如果您希望脚本在启动系统后启动，您可以在 /etc/init.d 中创建一个文件（例如 /etc.init.d/mypushscript，其中包含以下内容：

    ```
    php /var/www/development_folder/scripts/push2/push.php 
    ```

    （你可能应该在这个文件中有更多）

    您还需要运行以下命令：

    ```
    chmod +x /etc/init.d/mypushscript
    update-rc.d mypushscript defaults 
    ```

    使脚本在启动时启动。我没有对此进行测试，所以请在制作自己的初始化脚本之前做更多的研究！

# mysql - 通过加入一个或两个其他表来更新 tweets.spam 列

> ID：11419559
> 
> 赞同：4
> 
> 时间：2012-07-10T18:27:19.137
> 
> 标签：mysql

考虑以下三个 MySQL 表：

```
tweets                        urls                    tweets_urls
---------------------------   ---------------------   ----------------
tweet_id text          spam   url_id  host     spam   tweet_id  url_id
---------------------------   ---------------------   ----------------
   1     I love cnn.com  0      16    cnn.com    0        1       16
   2     fox.com is fuk  0      17    fox.com    1        2       17
   3     love me!        0                                4       16
   4     blah cnn.com    0
   5     nice fox.com    0 
```

我想根据 tweets_urls 更新 tweets.spam，这意味着查询的输出应该是

```
tweets
---------------------------
tweet_id text          spam
---------------------------
   1     I love cnn.com  0  <-- tweets_urls tells me tweet_id 1 has url_id 16
   2     fox.com is fuk  1      in it, and the urls-table tells me that url 16
   3     love me!        0      is not spam (spam = 0)
   4     blah cnn.com    0
   5     nice fox.com    1 
```

我希望我清楚自己。我一直在摆弄它，现在有这样的东西。我知道这不可能是正确的，但不知道如何重新开始。你？

```
UPDATE tweets SET spam = (
  SELECT spam FROM urls
  LEFT JOIN tweets_urls
  WHERE urls.url_id = tweets_urls.url_id
) 
```

任何帮助，将不胜感激 ：-）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T18:33:41.097

您忘记将子选择关联回`tweets`表和联接中的`ON`子句：

```
UPDATE tweets SET spam = (
  SELECT spam FROM urls
  LEFT JOIN tweets_urls ON urls.url_id = tweets_urls.url_id
  WHERE tweets_urls.tweet_id = tweets.tweet_id
) 
```

您还没有定义在以下情况下要做什么：

*   `tweets_urls`tweet_id没有条目
*   `tweets_urls`tweet_id中有多个条目

最后，作为旁注，您*确定*要像这样进行更新吗？这听起来更像是您想使用视图或存储过程生成的东西 - 除非`urls`并且`tweets_urls`只是您现在添加的表以帮助填充`tweets`表，然后稍后再删除。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T19:08:17.703

对于您给定的数据，此查询返回结果集...

```
SELECT t.tweet_id
     , t.text
     , IFNULL(s.spam,t.spam) AS spam
  FROM tweets t
  LEFT
  JOIN ( SELECT tu.tweet_id, MAX(u.spam) AS spam
           FROM tweets_urls tu
           JOIN urls u ON u.url_id = tu.url_id
          WHERE u.spam = 1
          GROUP BY tu.tweet_id
       ) s
    ON s.tweet_id = t.tweet_id 
```

但是对于给定的 tweet_id，当 tweets_url 中的行超过一行，或者没有匹配的 url 等时，我们已经做了一些假设。

如果您想要的是将推文标记为“垃圾邮件=1”，只要发现该推文与任何标记为“垃圾邮件=1”的网址相关，否则，推文应标记为“垃圾邮件= 0"...

这将根据该规则为推文中的每一行设置垃圾邮件列......

```
UPDATE tweets t
  LEFT
  JOIN ( SELECT tu.tweet_id, MAX(u.spam) AS spam
           FROM tweets_urls tu
           JOIN urls u ON u.url_id = tu.url_id
          WHERE u.spam = 1
          GROUP BY tu.tweet_id
       ) s
    ON s.tweet_id = t.tweet_id
   SET t.spam = IFNULL(s.spam,0) 
```

* * *

如果您想单独保留垃圾邮件列（将其设置为任何设置）并且只想更新值当前设置为 0 且应设置为 1 的行，根据“匹配 url 有垃圾邮件=1”，你可以这样做：

```
UPDATE tweets t
  JOIN ( SELECT tu.tweet_id
           FROM tweets_urls tu
           JOIN urls u ON u.url_id = tu.url_id
          WHERE u.spam = 1
          GROUP BY tu.tweet_id
       ) s
    ON s.tweet_id = t.tweet_id
   SET t.spam = 1
 WHERE t.spam = 0 
```

请注意，推文表上的谓词，我们只会更新垃圾邮件当前设置为零的行。请注意，我们不需要从 urls 表中引用 spam 列的值，我们已经在测试它是否等于 1，因此我们可以在将值分配给 tweets.spam 时使用文字 1柱子。另请注意，我们正在执行 INNER JOIN（而不是 LEFT OUTER JOIN），因此，我们将只更新将被分配值 1 的行。

* * *

# android - 识别停止 AudioTrack

> ID：11419566
> 
> 赞同：1
> 
> 时间：2012-07-10T18:27:36.790
> 
> 标签：android

如何检测 AudioTrack 是否已完成播放？不简单！！！我需要在另一个（入队）之后立即触摸此代码不起作用...当按 2 次时，第一个不结束，同时播放两个声音...

```
private void getNextAudio() {
    try{            

        byte[] buffer = playlist.poll();
        if (buffer != null) {

            AudioTrack myatrack = getAudioTrack(buffer);                
            myatrack.setPlaybackPositionUpdateListener( new OnPlaybackPositionUpdateListener() {            

                public void onPeriodicNotification(AudioTrack track) {

                }

                public void onMarkerReached(AudioTrack track) {             
                    Log.d(TAG, "onMarker - estado: " + track.getPlayState());

                    if(track.getPlayState() == AudioTrack.PLAYSTATE_STOPPED){

                        track.flush();
                        track.stop();
                        track.release();

                        getNextAudio();
                    }                               
                }
            });             

            if (myatrack != null) {
                // toco o audio.
                myatrack.play();
            }
        }else{
            Log.d(TAG,"Finish");
        }
    }catch(NoSuchElementException ex){
        Log.d(TAG,"No such element");           
    }
} 
```

再次感谢！马特乌斯

# python - 如何在使用 python 的 HTTPServer 时设置 DocumentRoot？

> ID：11419572
> 
> 赞同：8
> 
> 时间：2012-07-10T18:28:03.473
> 
> 标签：python, python-3.x, httpserver

我有以下代码作为我的 python 服务器：

```
#!/usr/bin/python3
from http.server import HTTPServer, CGIHTTPRequestHandler

port = 8080
host_name = "localhost"
httpd = HTTPServer((host_name, port), CGIHTTPRequestHandler)
print("server started, to quit press <ctrl-c>")
httpd.serve_forever() 
```

您如何设置服务器从中提供页面的 DocumentRoot。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-10T18:34:45.357

内置[`CGIHTTPRequestHandler`](http://docs.python.org/py3k/library/http.server.html#http.server.CGIHTTPRequestHandler)类从当前工作目录提供服务，该目录通常是您调用 Python 的目录。

> 此类用于提供来自当前目录及以下目录的文件或 CGI 脚本的输出。

您可以使用[`os.chdir()`](http://docs.python.org/library/os.html#os.chdir)来更改当前工作目录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T18:37:48.163

当您处理 GET 请求时，您需要将其转换为相对于当前运行脚本的目录的路径。

查看[http://docs.python.org/library/simplehttpserver.html#module-SimpleHTTPServer](http://docs.python.org/library/simplehttpserver.html#module-SimpleHTTPServer)和**do_GET**部分。您应该能够根据您的目的进行调整

# c# - 如何告诉 AutoMapper 在我的目标类型上使用方法？

> ID：11419578
> 
> 赞同：3
> 
> 时间：2012-07-10T18:28:36.253
> 
> 标签：c#, .net, asp.net-mvc, automapper

我有以下两个基本视图模型类，我所有的视图模型（曾经）都来自：

```
public class MappedViewModel<TEntity>: ViewModel
{
    public virtual void MapFromEntity(TEntity entity)
    {
        Mapper.Map(entity, this, typeof (TEntity), GetType());
    }
}

public class IndexModel<TIndexItem, TEntity> : ViewModel
    where TIndexItem : MappedViewModel<TEntity>, new()
    where TEntity : new()
{
    public List<TIndexItem> Items { get; set; }
    public virtual void MapFromEntityList(IEnumerable<TEntity> entityList)
    {
        Items = Mapper.Map<IEnumerable<TEntity>, List<TIndexItem>>(entityList);
    }
} 
```

在我知道 AutoMapper 可以自己做所有列表之前，就像上面的一样`MapFromEntityList`，我曾经运行一个循环并为每个列表项调用`MapFromEntity`一个新实例。`MappedViewModel`

现在我失去了重写的机会，只是`MapFromEntity`因为 AutoMapper 不使用它，而且我还必须重写`MapFromEntityList`回显式循环来实现这一点。

在我的应用启动中，我使用如下映射配置：

```
Mapper.CreateMap<ClientCourse, ClientCourseIndexItem>(); 
```

我如何告诉 AutoMapper 总是调用`MapFromEntity`例如 every `ClientCourseIndexIte`？或者，有没有更好的方法来完成这一切？

顺便说一句，我仍然经常`MapFromEntity`在编辑模型中使用显式调用，而不是索引模型。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T18:56:09.233

您可以实现一个调用 MapFromEntity 方法的转换器。这是示例：

```
public class ClientCourseConverter<TSource, TDestination>: ITypeConverter<TSource, TDestination>
       where TSource :  new()
       where TDestination : MappedViewModel<TEntity>, new()
{
    public TDestination Convert(ResolutionContext context)
    {
        var destination = (TDestination)context.DestinationValue;
        if(destination == null)
            destination = new TDestination();
        destination.MapFromEntity((TSource)context.SourceValue);
    }
}

// Mapping configuration
Mapper.CreateMap<ClientCourse, ClientCourseIndexItem>().ConvertUsing(
 new ClientCourseConverter<ClientCourse, ClientCourseIndexItem>()); 
```

# javascript - jQuery - 构建树样式列表

> ID：11419580
> 
> 赞同：0
> 
> 时间：2012-07-10T18:28:41.467
> 
> 标签：javascript, jquery, html, ajax, dom

我的DOM如下

```
<ul>
    <li id="Browse">
        Browse
        <ul id="browse-one">
        </ul>
    </li>
</ul> 
```

我在页面底部的 jQuery 是：

```
$("#Browse").click(function() {
     $("#browse-one").html('<div class="ui-widget">Loading...</div>');
     $("#browse-one").load('../api/browse.php?do=getFirst');
}); 
```

该脚本进入数据库并输出原始 LI。运行后，DOM 修改如下

```
<ul>
    <li id="Browse">
        Browse
        <ul id="browse-one">
            <li id="one-1" data-id="1">SOMETHING</li>
            <li id="one-2" data-id="2">SOMETHING</li>
            <li id="one-3" data-id="3">SOMETHING</li>
            <li id="one-4" data-id="4">SOMETHING</li>
            .
            .
            .
            <li id="one-N" data-id="N">SOMETHING</li>
        </ul>
    </li>
</ul> 
```

什么是正确的 jqueryish 方式来跟踪这些 LI 的点击。我想提取单击元素的数据 ID 并进行第二次 API 调用以构造树的第二部分。例如，如果单击 data-id="1" 的 LI，则 DOM 应为：

```
<ul>
    <li id="Browse">
        Browse
        <ul id="browse-one">
            <li id="one-1" data-id="1">SOMETHING
                <ul id="Something Here">
                    <li id="two-1" data-id="1">HMM</li>
                    <li id="two-2" data-id="2">HMM</li>
                    <li id="two-3" data-id="3">HMM</li>
                    .
                    .
                    .
                    <li id="two-M" data-id="M">HMM</li>     
                </ul>
            </li>
            <li id="one-2" data-id="2">SOMETHING</li>
            <li id="one-3" data-id="3">SOMETHING</li>
            <li id="one-4" data-id="4">SOMETHING</li>
            .
            .
            .
            <li id="one-N" data-id="N">SOMETHING</li>
        </ul>
    </li>
</ul> 
```

我无法思考如何让每个内部 UL 的 ID 保持唯一。当然我可以像在“two-1”中那样做“LEVEL-ID”，但我觉得这是hackish而不是正确的jquery方式。

编辑：

但是现在我如何跟踪孩子的点击？这似乎无效，但我希望你明白我想要做什么

```
$("#Browse").click(function() {
     $("#locations-browse").html('<div class="ui-widget">Loading...</div>');
     $("#locations-browse").load('../api/browse.php?do=getFirst');

     //Child is tracked
     $("#locations-browse").delegate("li","click",function(evt){
        var inner = $(this).append("<ul></ul>");
        inner.html('<div class="ui-widget">Loading...</div>');
        inner.load('../api/browse.php?do=getSecond');

        $(this).delegate("li","click", function(evt) {
            alert("Child ". $(this).data("id") . " is clicked";
        });
    });
}); 
```

编辑2：

嗯，这仍然不起作用：

```
$("#Browse").click(function() {
     $("#locations-browse").html('<div class="ui-widget">Loading...</div>');
     $("#locations-browse").load('../api/browse.php?do=getFirst');

     //Child is tracked
     $("#locations-browse").delegate("li","click",function(evt){
        $(this).append("<ul></ul>");
        $(this).children("ul").load('../api/browse.php?do=getSecond?location-id='.$(this).data("id"));

        $(this).delegate("li","click", function(evt) {
            alert($(this).data("id"));
        });
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T18:35:10.683

通过委托事件`li#Browse`并引用与`data-id`事件的上下文元素相关的属性。

```
$('#Browse').on('click', 'li', function(evt) {
    alert($(this).data('id'));
}); 
```

顺便说一句，有几个开箱即用的插件可以满足您的需要，以防万一您不想构建自己的插件，例如[YUI Treeview](http://developer.yahoo.com/yui/treeview/)或[我写](http://www.mitya.co.uk/scripts/XML-Tree---visualise-and-traverse-your-XML-186#tree0:0;)的那个。

# c - eclipse cygwin printf 调试时没有输出

> ID：11419584
> 
> 赞同：3
> 
> 时间：2012-07-10T18:29:00.403
> 
> 标签：c, eclipse, console, cygwin, eclipse-cdt

我设法让 cygwin 与 eclipse 一起工作，并制作了默认的 hello world 程序。运行程序很好，它在控制台中正确输出。但是当我调试并单步执行程序时，printf 语句不会出现在控制台中。我需要更改某个设置吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T19:57:48.033

您应该添加一次或之后`printf`

```
fflush(stdout); 
```

由于我不太清楚的原因，程序输出只会在程序结束时出现。每次有**printf时，调用此调用将强制输出**

# opengl - glMapBuffer 是否占用 GPU 时间？

> ID：11419586
> 
> 赞同：0
> 
> 时间：2012-07-10T18:29:04.913
> 
> 标签：opengl, pbo

glMapBuffer 的一个常见用法是

```
previousPBO.render();
bindNextPBO();
GLubyte* src = (GLubyte*)glMapBuffer(GL_PIXEL_PACK_BUFFER, GL_READ_ONLY);
if(src) {
    doSomeWork(src);
    glUnmapBuffer(GL_PIXEL_PACK_BUFFER);
} 
```

有 2 个 PBO 以替代方式工作。

但是，有时 doSomeWork(.) 可能在另一个线程中。如果应用了上面的代码，当前线程必须等待 doSomeWork() 完成。另一种解决方案是：

```
previousPBO.render();
bindNextPBO();
if(currentPBO.mapped) {
    currentPBO.mapped = false;
    glUnmapBuffer(GL_PIXEL_PACK_BUFFER);
}
GLubyte* src = (GLubyte*)glMapBuffer(GL_PIXEL_PACK_BUFFER, GL_READ_ONLY);
if(src) {
    currentPBO.mapped = true;
    doSomeWork(src);
} 
```

在这种情况下，同一个 PBO 的 map->unmap 过程跨越两个帧。

*   PBO 的未映射状态是否会停止 GPU 的渲染？
*   对性能有什么不好的影响吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T18:35:13.420

第二个代码片段是错误的。如果`doSomeWork`没有按时完成怎么办？现在它正在访问您未映射的内存，并将导致访问冲突（或更糟）。

更好的方法是等待其他线程完成并在之前的帧结束时取消映射缓冲区`SwapBuffers`。

# vb.net - VB.Net - Lockbits - 大于/小于函数

> ID：11419588
> 
> 赞同：0
> 
> 时间：2012-07-10T18:29:08.590
> 
> 标签：vb.net, rgb, lockbits

以下代码适用于我正在做的事情。但是，它需要的时间比我需要的要长。问题是它迭代每个大于/小于函数，这需要时间。我已经进行了一些研究，但无法弄清楚如何将其全部缩小以使其运行得更快。

像素 RGB 值必须经过以下测试- (1) 如果一个值大于 250，则其他值必须小于 5 (2) 如果一个值小于 5，则其他值必须大于 250 (3) 如果一个值等于 0，其他值必须大于 0 (4) 任何 2 个值之间的差必须小于 15（或我设置的任何其他阈值） (5) 看两个值是否等于 0

另外，在每个这些功能之后执行“退出”会有所帮助吗？

```
 ' Create new bitmap from filepath in TextBox1
    Dim bmp As New Bitmap(TextBox1.Text)

    ' Lock the bitmap's pixels
    Dim rect As New Rectangle(0, 0, bmp.Width, bmp.Height)
    Dim bmpData As System.Drawing.Imaging.BitmapData = bmp.LockBits(rect, _
            Drawing.Imaging.ImageLockMode.ReadWrite, _
            Imaging.PixelFormat.Format24bppRgb)

    ' Get the address of the first line
    Dim ptr As IntPtr = bmpData.Scan0

    ' Declare an array to hold the bytes of the bitmap
    Dim bytes As Integer = Math.Abs(bmpData.Stride) * bmp.Height
    Dim rgbValues(bytes - 1) As Byte
    System.Runtime.InteropServices.Marshal.Copy(ptr, rgbValues, 0, bytes)

    ' Retrieve RGB values
    Dim RedValue As Int32
    Dim GreenValue As Int32
    Dim BlueValue As Int32
    Dim l As Integer = 0                   
    For x = 0 To bmp.Width  
        For y = 0 To bmp.Height - 1
            l = ((bmp.Width * 3 * y) + (x * 3))
            RedValue = rgbValues(l)
            GreenValue = rgbValues(l + 1)
            BlueValue = rgbValues(l + 2)

            If RedValue < 5 AndAlso GreenValue < 5 AndAlso BlueValue > 250 Then
            ElseIf RedValue < 5 AndAlso GreenValue > 250 AndAlso BlueValue < 5 Then
            ElseIf RedValue > 250 AndAlso GreenValue < 5 AndAlso BlueValue < 5 Then
            ElseIf RedValue > 250 AndAlso GreenValue > 250 AndAlso BlueValue < 5 Then
            ElseIf RedValue > 250 AndAlso GreenValue < 5 AndAlso BlueValue > 250 Then
            ElseIf RedValue < 5 AndAlso GreenValue > 250 AndAlso BlueValue > 250 Then
            ElseIf RedValue > 0 AndAlso GreenValue > 0 AndAlso BlueValue.Equals(0) Then
            ElseIf RedValue > 0 AndAlso GreenValue.Equals(0) AndAlso BlueValue > 0 Then
            ElseIf RedValue.Equals(0) AndAlso GreenValue > 0 AndAlso BlueValue > 0 Then
            ElseIf (RedValue - GreenValue) < 15 AndAlso (RedValue - BlueValue) < 15 AndAlso _
                (GreenValue - RedValue) < 15 AndAlso (GreenValue - BlueValue) < 15 AndAlso _
                (BlueValue - RedValue) < 15 AndAlso (BlueValue - GreenValue) < 15 Then
            ElseIf RedValue.Equals(GreenValue) Then
            ElseIf RedValue.Equals(BlueValue) Then
            ElseIf GreenValue.Equals(BlueValue) Then
            ElseIf RedValue.Equals(BlueValue) AndAlso RedValue.Equals(GreenValue) _
                AndAlso BlueValue.Equals(GreenValue) Then
            Else
                MsgBox("Image is color.")
                Exit Sub
            End If
        Next
    Next
    MsgBox("Image is grayscale.")

    ' Unlock the bitmap
    bmp.UnlockBits(bmpData) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T10:38:09.687

灰度颜色始终具有此规范**(R=G=B)**。例如。**#cccccc** = **[R:204 G:204 B:204]**

```
If Not R = G And G = B Then
 MsgBox("colored")
 Exit Sub
End If 
```

# magento - 产品无法正常工作的 Magento 自定义布局更新

> ID：11419590
> 
> 赞同：0
> 
> 时间：2012-07-10T18:29:26.287
> 
> 标签：magento, layout, e-commerce, product, magento-1.6

我的问题类似于[这个问题](https://stackoverflow.com/questions/9006734/magento-product-specfic-designs-through-custom-layout-update/)

但我没有高兴地尝试了解决方案。目前我的magento商店里有所有可配置的产品，并且catalog/product/view.html文件根据它进行了修改。但是我想添加一些简单的产品，我需要一个不同的 view.phtml 文件。我尝试像上面问题中提到的那样在产品中进行布局更新。

我还尝试了在类别中进行布局更新并将“应用于产品”设置为“是”的解决方案，但仍然无法修复它。Everything(header,sidebar,footer) 加载新视图文件的内容。

但是，如果我使用它进行布局更新，`<template>catalog/product/view.phtml</template>`则会加载 view.phtml 文件。我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T20:08:50.960

在您的`local.xml`布局文件中（如果您还没有创建），您可以执行以下操作：

```
<PRODUCT_TYPE_simple>
    <reference name="product.info">
        <action method="setTemplate">
            <tpl>your/template.phtml</tpl>
        </action>
    </reference>
</PRODUCT_TYPE_simple> 
```

参见[`Mage_Catalog_Helper_Product_View::initProductLayout()`](https://github.com/LokeyCoding/magento-mirror/blob/1.7.0.2/app/code/core/Mage/Catalog/Helper/Product/View.php#L46)添加这些句柄的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T07:09:05.353

如果产品类型是简单产品，则将条件放入 view.phtml 文件中，然后显示您的逻辑，否则显示可配置的产品逻辑，这样您就不需要在产品的管理面板中进行新的布局更新

# css - 网站内容出现在标题中但最后加载

> ID：11419596
> 
> 赞同：-2
> 
> 时间：2012-07-10T18:29:47.940
> 
> 标签：css, layout, seo

我试图清理我的标题，以便它只包含对 seo 重要的内容。但是，我有许多项目（广告、联系信息）我想在标题区域显示，但在页面的最后加载。

也许我在搜索查询中遗漏了一些明显的东西，但我找不到答案，这很奇怪，因为这似乎很常见。我错过了什么？

我认为这是最好的方法（css或javascript ...或）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T18:34:56.653

你的头标签和头标签不是一回事。你所有的 SEO 内容都应该放在你的 head 标签中。您的广告和联系信息应该放在您的标题标签中。

# c# - 如何防止在数据绑定上自动选择 GridView 中的第一项？

> ID：11419606
> 
> 赞同：2
> 
> 时间：2012-07-10T18:30:25.470
> 
> 标签：c#, gridview, data-binding, windows-runtime, winrt-xaml

当我将 GridView 数据绑定到 ObservableCollection 时，会自动选择集合的第一项。GridView的`SelectionMode`属性设置为`multiple`. 有什么方法可以防止这种自动选择吗？或者我应该听什么事件，以便我可以将`SelectedIndex`GridView 重置回-1？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-12-22T03:34:02.633

在 xaml 中的 gridview 上设置`IsSynchronizedWithCurrenItem`属性`false`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T17:25:51.317

有一个非常简单的解决方案。我在 XAML`SelectionMode`中将 GridView设置为。`None`然后，在创建页面时，我将其更改`SelectionMode`为`Multiple`.

```
 publicPage()
        {
            this.InitializeComponent();
            itemListView.SelectionMode = ListViewSelectionMode.Multiple;
        } 
```

但是，我遇到的问题似乎是由我自己的程序引起的。这是我遇到的问题的解决方法，自动选择不是默认行为。

[http://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/da7e9f3b-9a3e-47ca-8223-b50539293f5f](http://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/da7e9f3b-9a3e-47ca-8223-b50539293f5f)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-24T03:38:36.233

我的情况正好相反。我有一个`GridView`绑定到 的`ObservableCollection`，我希望选择第一个项目，但它没有！我想通了为什么会这样。有两种方法可以生成我的`ObservableCollection`，根据我选择的方法，第一项是否被选中。

例如，我的视图模型中有一个变量 ItemList，我绑定到我的 GridView

```
public ObservableCollection<Item> ItemList { get; private set; } 
```

方法1（未选择）

```
public void getData()
{
    var myList = // get your list here
    for (int i = 0; i < myList.Count; i++)
    {
        this.ItemList.add(myList[i]);
    }
} 
```

方法 2（自动选择第一项）

```
public void getData()
{
    var myList = // get your list here
    this.ItemList = myList
} 
```

# forms - 提交按钮操作

> ID：11419608
> 
> 赞同：0
> 
> 时间：2012-07-10T18:30:27.053
> 
> 标签：forms, button, onclick, submit, action

```
<FORM ID='htmlform' action="" onsubmit="return valforms(this)">
.....
<INPUT TYPE="submit" NAME="submit" VALUE="Submit"> 
```

当用户填写完表单并单击提交按钮时，我希望将所有表单信息发送给我。我该怎么做呢？这只是部分代码，整个代码太长了，我在这里输入。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T18:37:56.963

表单元素的`action`一部分告诉浏览器将信息发布到哪个 URL。您需要使用一些服务器端代码指定一些页面，这些代码将获取该信息并将其存储或通过电子邮件发送。表单元素的`onsubmit`一部分会触发可以在客户端机器上处理的 JavaScript 事件。如果不将数据发送回服务器，您将无法在客户端机器上做很多事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T14:05:26.357

要回答您的问题：

> 哦，就像通过电子邮件发送数据的页面是一个 html 页面，我可以有一条消息说：“感谢您的关注，您很快就会收到我们的回复。” 然后让页面再次重定向到主页？我希望我不会对此感到太复杂

你几乎是对的。让我给你解释一下：

*   用户获得一个用 PHP、ASP、.. 制作的 HTML 页面，用于在表单中填写一些数据
*   用户填写数据并点击按钮
*   按钮上的操作告诉服务器处理该页面，或者让另一个页面来处理它。我们称这个页面为 PageX
*   PageX（用 PHP、ASP 等编写）会将数据通过电子邮件发送给您
*   您还可以让 pageX 向用户的浏览器返回一些文本，说“感谢您的关注，....”。您还可以从此页面重定向到另一个页面

这回答了你的问题了吗？

# c# - 将 lambda 用于构建器模式

> ID：11419612
> 
> 赞同：2
> 
> 时间：2012-07-10T18:30:32.390
> 
> 标签：c#, lambda, telerik, builder

Telerik 网格在绑定到列时使用 lambda 语法来增强构建器模式。

```
.Columns(cols =>
    {
        cols.Bound(e => e.Tag);
        cols.Bound(e => e.Name);
     }); 
```

我想在我的代码中做一个类似的功能。我已经掌握了 Bound() 函数的语法。但是 Columns() 函数的语法是什么样的呢？

这是我想要完成的一个更好的例子：

```
class SubList
{
    private List<string> _items;

    public AddItem(string item)
    {
        _items.Add(item);
    }
}

class MyCollections
{
    private Dictionary<string, SubList> _subs = new Dictionary<string,SublList>();

    public SubList AddList(string name)
    {
        var newSub = new SubList();
        _subs[name] = newSub;
        return newSub;
    }
}

class Other
{
    public void DoStuff()
    {
        var collections = new MyCollections();

        //if add item throws error, I don't know which one it is as.
        //it is also hard to put a break point in here.
        collections.AddList("one")
            .AddItem("1")
            .AddItem("un")
            .AddItem("uno");

        //I would like to have something like this:
        collections.AddList("two") { s =>
            s.AddItem("1");
            s.AddItem("un"); //yay! can put breakpoint here
            s.AddItem("uno");
        };

        //or perhaps
        collections.AddList("two").Sub( s => {
            s.AddItem("1");
            s.AddItem("un"); //yay! can put breakpoint here
            s.AddItem("uno");
        });
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-10T18:34:03.480

它可以是扩展方法或实例方法，可能按以下顺序：

```
// Assuming some grid type TDataGrid and some column building type TColumnBuilder
public TDataGrid Columns(Action<TColumnBuilder> applyColumns)
{
    // Ask the user what they'd like to do with our columns
    TColumnBuilder placeholder = new TColumnBuilder();
    applyColumns(placeholder);

    // do something with what we've learned
    // this.columns = placeholder.CreateColumns();
} 
```

# sql - 将具有不同行类型的多个查询显示为一个结果

> ID：11419613
> 
> 赞同：0
> 
> 时间：2012-07-10T18:30:49.087
> 
> 标签：sql, postgresql, select, procedure

在 Ubuntu 上的 PostgreSQL 8.3 中，我确实有 3 个不同模式的表，比如 T1、T2、T3。它们中的每一个都包含（一些）与我知道的 ID 对象相关的记录。使用'psql'，我经常做3个操作：

```
SELECT field-set1 FROM T1 WHERE ID='abc';

SELECT field-set2 FROM T2 WHERE ID='abc';

SELECT field-set3 FROM T3 WHERE ID='abc'; 
```

只看结果；对我来说，这已经足够了。

是否有可能有一个过程/函数/宏等，带有一个参数'id'，只是一个接一个地运行三个SELECTS，在屏幕上显示结果？

field-set1、field-set2 和 field-set 3**完全不同**。

没有合理的方法来加入表 T1、T2、T3；这些是不相关的数据。我不想加入。我想在屏幕上看到三个结果集。

有什么提示吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T18:42:20.860

### 快速而肮脏的方法

如果行类型（序列中所有列的数据类型）不匹配，`UNION`将失败。
但是，在 PostgreSQL 中，您可以*将整行*转换为其`text`表示形式：

```
SELECT t1:text AS whole_row_in_text_representation FROM t1 WHERE id = 'abc'

UNION ALL
SELECT t2::text FROM t2 WHERE id = 'abc'

UNION ALL
SELECT t3::text FROM t3 WHERE id = 'abc'; 
```

最后只有一个`;`，一个是可选的，带有单个语句。

* * *

### 更精致的替代品

但也需要更多的代码。首先选择列最多的表，将每个单独的列转换为文本并给它一个通用名称。`NULL`为列较少的其他表添加值。您甚至可以在表格之间插入标题：

```
SELECT '-t1-'::text AS c1, '---'::text AS c2, '---'::text AS c1  -- table t1
UNION ALL
SELECT '-col1-'::text, '-col2-'::text, '-col3-'::text  -- 3 columns
UNION ALL
SELECT col1::text, col2::text, col3::text FROM t1 WHERE id = 'abc'

UNION ALL
SELECT '-t2-'::text, '---'::text, '---'::text  -- table t2
UNION ALL
SELECT '-col_a-'::text, '-col_b-'::text, NULL::text  -- 2 columns, 1 NULL
UNION ALL
SELECT col_a::text, col_b::text, NULL::text FROM t2 WHERE id = 'abc'

... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T18:34:38.253

在两者之间放一个`union all`并将所有列命名为相等

```
 SELECT field-set1 as fieldset FROM T1 WHERE ID='abc';
 union all
 SELECT field-set2 as fieldset FROM T2 WHERE ID='abc';
 union all
 SELECT field-set3 as fieldset FROM T3 WHERE ID='abc'; 
```

并立即执行。

# regex - 使用 Perl 从文件中提取证书

> ID：11419614
> 
> 赞同：1
> 
> 时间：2012-07-10T18:30:53.330
> 
> 标签：regex, perl, variables, certificate

下面是一个文本文件，我想使用正则表达式来保存之后开始的证书

> “crossCertificatePair;二进制::”

这象征着一个新证书的开始，并一直运行到最后。每个文件都有多个以相同方式开头的证书，我想要一种方法来提取每个证书并将其保存到一个变量中。

```
># extended LDIF
#
# LDAPv3
># base <cn=Federal Bridge CA,ou=FPKI,o=U.S. Government,c=US> with scope subtree
># filter: (objectclass=*)
># requesting: crossCertificatePair
>#

># Federal Bridge CA, FPKI, U.S. Government, US
dn: cn=Federal Bridge CA,ou=FPKI,o=U.S. Government,c=US
crossCertificatePair;binary:: MIINq6CCB2IwggdeMIIGRqADAgECAhAEBsw2n1386M2IP4F9
 Y9f9MA0GCSqGSIb3DQEBCwUAMGQxCzAJBgNVBAYTAlVTMRUwEwYDVQQKEwxEaWdpQ2VydCBJbmMxG
 TAXBgNVBAsTEHd3dy5kaWdpY2VydC5jb20xIzAhBgNVBAMTGkRpZ2lDZXJ0IEZlZGVyYXRlZCBJRC
 BDQS0xMB4XDTExMTIwNzEyMDAwMFoXDTE0MTIwNzEyMDAwMFowUjELMAkGA1UEBhMCVVMxGDAWBgN
 VBAoTD1UuUy4gR292ZXJubWVudDENMAsGA1UECxMERlBLSTEaMBgGA1UEAxMRRmVkZXJhbCBCcmlk
 Z2UgQ0EwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQC5M26e4VUSlib2braFWKYhaUs3Q
 SR9JwuQQHZQTmuhTOQScPO7g/JAdNvTFymOIHnXrinkPmOG+YyqxQQemNdIq3yi5AAUt+I6VOhsfS
 NhZTZJsSKoNsZ72TxqOVkLMvKWNyZxvcZK3bG1wx5eErtKqlRMjTovxGXwVktB4/J+iu975SIxT1m
 IaNsNWtyQOUF3T4P7K8/u1VwPmZ2SjMNYjKnFQU7E0Vfo1OEGWUrR0KrSBUT2Vu6PSj2OwkGr5ep6
 rr+2vjboHpWG64qOoBQHyGwd7u6f/2TPkoD5OOqGdKOD4byifwi4L5arausnxY+Yy7jMM+ifG1qKD
 GgupMJjAgMBAAGjggQcMIIEGDAPBgNVHRMBAf8EBTADAQH/MA4GA1UdDwEB/wQEAwIBhjB8BggrBg
 EFBQcBAQRwMG4wJAYIKwYBBQUHMAGGGGh0dHA6Ly9vY3NwLmRpZ2ljZXJ0LmNvbTBGBggrBgEFBQc
 wAoY6aHR0cDovL2NhY2VydHMuZGlnaWNlcnQuY29tL2FpYURpZ2lDZXJ0RmVkZXJhdGVkSURDQS0x
 LnA3YzCBgQYDVR0fBHoweDA6oDigNoY0aHR0cDovL2NybDMuZGlnaWNlcnQuY29tL0RpZ2lDZXJ0R
 mVkZXJhdGVkSURDQS0xLmNybDA6oDigNoY0aHR0cDovL2NybDQuZGlnaWNlcnQuY29tL0RpZ2lDZX
 J0RmVkZXJhdGVkSURDQS0xLmNybDCBowYDVR0gBIGbMIGYMAwGCmCGSAGG/WwEAQEwDAYKYIZIAYb
 9bAQBAjALBglghkgBhv1sBAIwDAYKYIZIAYb9bAQDATAMBgpghkgBhv1sBAMCMAwGCmCGSAGG/WwE
 BAEwDAYKYIZIAYb9bAQEAjAMBgpghkgBhv1sBAUBMAwGCmCGSAGG/WwEBQIwDAYKYIZIAYb9bAQFA
 zALBglghkgBhv1sAQswggEpBgNVHSEEggEgMIIBHDAYBgpghkgBhv1sBAEBBgpghkgBZQMCAQMBMB
 gGCmCGSAGG/WwEAQIGCmCGSAFlAwIBAwEwFwYJYIZIAYb9bAQCBgpghkgBZQMCAQMCMBgGCmCGSAG
 G/WwEAwEGCmCGSAFlAwIBAwMwGAYKYIZIAYb9bAQDAgYKYIZIAWUDAgEDDjAYBgpghkgBhv1sBAQB
 BgpghkgBZQMCAQMMMBgGCmCGSAGG/WwEBAIGCmCGSAFlAwIBAw8wGAYKYIZIAYb9bAQFAQYKYIZIA
 WUDAgEDEjAYBgpghkgBhv1sBAUCBgpghkgBZQMCAQMTMBgGCmCGSAGG/WwEBQMGCmCGSAFlAwIBAx
 QwFwYJYIZIAYb9bAELBgpghkgBZQMCAQMIMIHfBggrBgEFBQcBCwSB0jCBzzA/BggrBgEFBQcwBYY
 zaHR0cDovL2h0dHAuZnBraS5nb3YvYnJpZGdlL2NhQ2VydHNJc3N1ZWRCeWZiY2EucDdjMIGLBggr
 BgEFBQcwBYZ/bGRhcDovL2xkYXAuZnBraS5nb3YvY249RmVkZXJhbCUyMEJyaWRnZSUyMENBLG91P
 UZQS0ksbz1VLlMuJTIwR292ZXJubWVudCxjPVVTP2NBQ2VydGlmaWNhdGU7YmluYXJ5LGNyb3NzQ2
 VydGlmaWNhdGVQYWlyO2JpbmFyeTAdBgNVHQ4EFgQUxJ38nV06XQV6vwKB7NtJcBXHsnIwHwYDVR0
 jBBgwFoAU0Cs7/2hx1pAM98RzeceZcADlR0AwDQYJKoZIhvcNAQELBQADggEBAKDvyX5eyrDFTt6b
 trs0yB05nbjyeuF7ldfHoFWHhBYdLsKzmR5YdiTMDUBAGCGc7hpANkp1qLI2vjKlLPT9SU/OVa91m
 p9vH5YlxEqx5DtxhhWDxxhu1h1zcSanCJ89IMyiLvzJgQo9wrwcKbiFlfo02J/qPf3L8AHw3NAqCU
 MeSCL6dt/zIBlkKsaaGhVt8Rk5qnV92uTsNNlQ6t7Wb5Kb2hF6uB7/YAR2TzM6vLNKHIZPzc5vp0q
 MqlUvEliPCBfEcfEVCq4vMFHYsfP5bGuEu7lzWPkfKf5GEBu8W5z1URUeBS/oFY4W48CSit34JnKO
 piydiZ+jsEBRoXLZOZmhggZBMIIGPTCCBSWgAwIBAgICCDkwDQYJKoZIhvcNAQELBQAwUjELMAkGA
 1UEBhMCVVMxGDAWBgNVBAoTD1UuUy4gR292ZXJubWVudDENMAsGA1UECxMERlBLSTEaMBgGA1UEAx
 MRRmVkZXJhbCBCcmlkZ2UgQ0EwHhcNMTIwMjA5MTUxNTQzWhcNMTQxMDI2MTQxMjIxWjBkMQswCQY
 DVQQGEwJVUzEVMBMGA1UEChMMRGlnaUNlcnQgSW5jMRkwFwYDVQQLExB3d3cuZGlnaWNlcnQuY29t
 MSMwIQYDVQQDExpEaWdpQ2VydCBGZWRlcmF0ZWQgSUQgQ0EtMTCCASIwDQYJKoZIhvcNAQEBBQADg
 gEPADCCAQoCggEBAMJ4XArNzTmP4QFtzBT1MxQnTsOuyl/U6suW+5PA9BxpUEed1283vK/HatTaZ9
 WrYSM6p6h0iJF3Wc2E6LUVuHq9EfB5mYSXUadDHjkQOKmQZiZ6K2nt6ZwPFM0maD/DL7qD4ALeve3 ENxKR9/pdvewNWLLl4UWehkg8lJNuMOJ/6bLm54TNxooVzrg4mJbCVHYEqnvRZMWWTfuAisiRm9AJ
 A3E0Wb8h4tylCCYks/BddhHpa+MjZNuJ79KpxCKKPvOD6ZJ5Rz/qLESLngv5RKZ3EhlepbXh5xD3d
 +gTFW3vHdrhAK3FjhfO60U5sv/1POGpqLsaFTLwwHz76rtM0A4zygKNgf3X45tOyhI+mzaj9fM37M
 eWU=
crossCertificatePair;binary::MIIOIaCCBykwggclMIIGDaADAgECAhA1NaRHZsnFhU4oae9B
 MGFBMA0GCSqGSIb3DQEBCwUAMDYxCzAJBgNVBAYTAlVTMRAwDgYDVQQKEwdPUkMgUEtJMRUwEwYDV.....etc 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T20:11:40.390

虽然它可以通过环视来解决，但我认为这不是正则表达式的任务：

```
open my $fh, '<', $filename or die $!;
my $binary = do { local $/ = undef; <$fh>; };
close $fh;

my @certs = split /\ncrossCertificatePair;binary::/, $binary;
shift @certs; # you don't need the first part 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T19:46:19.023

如果我理解了你的问题，那么我想你需要使用[前瞻断言](http://www.regular-expressions.info/lookaround.html) `?=`来匹配重叠的东西。

这会做到：

```
open my $fh, "<", $filename or die $!;
{local $/; $content = <$fh>;}
close $fh;
my $content =~ s/\s+//g;
my @certs = ($content =~ /crossCertificatePair;binary::(.*?)(?=$|crossCertificatePair;binary::)/g); 
```

虽然它确实做了一些主要的假设，即 a) 你想丢失空格和换行符（如果没有，去掉第四行），和 b) 一旦你开始阅读证书，唯一可以接下来是另一个证书或文件的结尾。

希望这足以让你继续前进。

# php - 如何只允许登录用户访问图像

> ID：11419617
> 
> 赞同：1
> 
> 时间：2012-07-10T18:31:01.270
> 
> 标签：php, codeigniter

目前使用 Codeigniter/PHP 和 IIS 7

我目前正在研究“盗链”，但这只能保护图像不被放到其他网站上。它不会阻止最终用户直接将图像 URL 粘贴到地址栏中并在未登录的情况下访问图像。

我不太确定解决这个问题的最佳方法是什么。如何保护图像，使其只能由登录用户访问？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T18:32:12.247

将图像放在站点的 webroot**之外的某个位置。**

**有一个获取图像并仅**在登录时显示图像的 php 脚本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T19:28:53.437

最好的方法是，如果您停止在整个站点上使用真实的图像 url 并始终通过 php 脚本（控制器函数）检索图像，这可以帮助您检查用户身份验证和其他人员，如调整大小/裁剪/缓存等。

在这种情况下，您甚至可以在根目录中使用任何 url，这根本不为外界所知。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-02-18T04:03:05.887

上述答案存在性能问题。您可以每小时/每天重命名包含图像的文件夹.... 例如

`images/a8s7d5r7w9/33229.png`至`images/g2j3s3l1p2t/33229.png`

# c# - Inherited Window不能有名字吗？

> ID：11419620
> 
> 赞同：12
> 
> 时间：2012-07-10T18:31:04.570
> 
> 标签：c#, wpf, xaml, inheritance

我在命名从其基本窗口继承的窗口时遇到问题，当我尝试为窗口命名时，出现以下错误。

> BaseWindow 类型不能有 Name 属性。值类型和没有默认构造函数的类型可以用作 ResourceDictionary 中的项。

**XAML：**

```
<log:BaseWindow 
   x:Class="EtraabMessenger.MainWindow"
   x:Name="main"
   xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
   xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" 
   xmlns:log="clr-namespace:EtraabMessenger.MVVM.View.Controls" 
   xmlns:VMCore="clr-namespace:EtraabMessenger.MVVM.VMCore" 
   VMCore:WindowClosingBehavior.Closing="{Binding DoCloseMainWindowCommand}"
   Height="464" Width="279">

</log:BaseWindow> 
```

**编辑**：这是我的 BaseWindow 类

```
public abstract class BaseWindow : Window, INotifyPropertyChanged
{
    protected BaseWindow()
    {
        // Note (Important) : This message should register on all windows
        // TODO : I'm planning to move this registeration to BaseWindow class
        Messenger.Register<bool>(GeneralToken.ClientDisconnected, DisconnectFromServer);
    }

    protected abstract void DisconnectFromServer(bool isDisconnected);
    protected abstract void RegisterTokens();
    protected abstract void UnRegisterTokens();

    ....
    ....
    ....

} 
```

任何建议都会有所帮助。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-07-10T18:36:34.623

正如错误所述，您的基本窗口显然需要一个公共默认构造函数（一个没有参数的构造函数），它也可能不是抽象的，因为需要创建它的一个实例。

# javascript - 节点非持久网络连接

> ID：11419624
> 
> 赞同：0
> 
> 时间：2012-07-10T18:31:24.573
> 
> 标签：javascript, node.js, tcp

我有一个连接到服务器的节点应用程序，因此我的代码可以轻松地向它发送数据，因为我只是保持连接不断打开。但问题是应用程序永远不会退出，因为连接仍然处于活动状态，即使在使用完成后也是如此。

问题是没有一个可靠的代码路径，所以没有一个地方可以结束连接。有没有办法告诉节点在所有其他代码完成后立即退出，即使连接仍然打开？

我要找[fs.watchFile 之类的东西](http://nodejs.org/api/fs.html#fs_fs_watchfile_filename_options_listener)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T18:33:45.063

`process.exit(exitCode)`

[http://nodejs.org/api/process.html#process_process_exit_code](http://nodejs.org/api/process.html#process_process_exit_code)

旁白：这听起来确实像是代码应该进行重构，并考虑到清晰的套接字处理。尽早重构，经常重构。

# google-app-engine - 如何分离 RPC 客户端和服务器，使服务器运行在应用引擎上，客户端运行在我的计算机上？

> ID：11419625
> 
> 赞同：0
> 
> 时间：2012-07-10T18:31:28.580
> 
> 标签：google-app-engine, gwt, rpc

我对这一切都很陌生，所以请多多包涵。我刚刚完成[了](https://developers.google.com/web-toolkit/doc/latest/tutorial/RPC)GWT 中的 RPC 教程。在本教程中，您将创建一个显示股票信息的 stockwatcher 应用程序。应用程序使用 RPC 从服务器获取数据。我将项目部署到应用引擎，效果很好。

现在我想要一个单独的、普通的 java 项目，它在我的计算机上运行并显示它使用 rpc 从应用引擎服务器检索的股票。在 stockwatcher 教程中，有一个客户端和服务器包。我将客户端包重构为一个新项目以开始。我知道我需要给它适当的网址，但我不知道该怎么做。StockPriceService 具有注释 @RemoteServiceRelativePath("stockPrices") 所以我的第一个想法是以某种方式将其更改为正确的应用程序引擎 url。是否有允许我输入整个网址的注释？如果有人能指出我处理这个问题的教程的方向，我将不胜感激。

谢谢你！！！:)

**编辑**

我正在尝试制作一个将在我的计算机上运行的客户端，另一个将在我的手机上运行的客户端，以及一个将存储一些数据的简单应用引擎服务器。完成 RPC 教程后，使用 RPC 似乎是我发送和接收数据的好方法。我只是不知道如何跨多个项目设置 RPC 服务。

**编辑 2**

我刚看到[这个](https://stackoverflow.com/questions/2116870/how-can-i-call-a-gwt-rpc-method-on-a-server-from-a-non-gwt-but-java-gapplicati?rq=1)，所以我想我想做的事情是不可能的。我想我的新问题是，在应用引擎和非 gwt 项目之间发送和接收数据的最佳方式是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T19:47:20.347

请查看以下链接 [https://developers.google.com/appengine/docs/java/gettingstarted/](https://developers.google.com/appengine/docs/java/gettingstarted/) [https://developers.google.com/web-toolkit/doc/1.6/tutorial/appengine](https://developers.google.com/web-toolkit/doc/1.6/tutorial/appengine) 一个 appengine 项目将运行您的机器，你真的可以部署它，但你需要一个帐户。

# c# - WCF WebInvoke POST - 方法不允许错误

> ID：11419627
> 
> 赞同：6
> 
> 时间：2012-07-10T18:31:38.707
> 
> 标签：c#, asp.net, ajax, wcf, post

我有一种`OperationContract`方法，我试图查询并将数据插入数据库。我正在使用一种`POST`方法并从浏览器中的 javascript 调用该服务。WCF 服务在同一个域中，所以我不应该使用`JSONP`. 我也在修改数据，所以它应该是`POST`请求而不是`GET`请求。但是我仍然收到“方法不允许错误”。有没有人遇到过这种情况？

我的服务正在调用

```
http://some_url.com/services/ProfileService.svc/json/CurrentUser 
```

奇怪的是，`GET`即使我指定了一个`POST`. 但是，在页面加载时，它似乎正在尝试`POST`请求。

访问 url 时的浏览器响应：

```
Request URL:http://some_url.com/services/ProfileService.svc/json/CurrentUser
Request Method:GET
Status Code:405 Method Not Allowed
Request Headersview parsed
GET /services/ProfileService.svc/json/CurrentUser HTTP/1.1 
```

这是我试图调用的方法：

```
[OperationContract]
[WebInvoke(Method = "POST", RequestFormat = WebMessageFormat.Json)]

public HIPUser GetCurrentUser()
{
    string[] domainUser;
    string Auth_User = HttpContext.Current.User.Identity.Name.ToString().ToLower();
    domainUser = Auth_User.Split('\\');
    string user = domainUser[1];
    Debug.WriteLine(user);

    ProfileManager pm = new ProfileManager();
    var results = pm.GetUserByUserName(user);

    if (results.Length > 0)
    {
        return results.First();
    }
    else
    {
        Debug.WriteLine("IS NULL");
        var x = pm.CreateUser(user, null, null);
        Debug.WriteLine(x.UserName);
        return x;
    }
} 
```

客户：

```
function getCurrentUser() {

$.ajax({
    type: "POST",
    url: "services/ProfileService.svc/json/GetCurrentUser",
    contentType: "application/json; charset=utf-8",
    data: null,
    dataType: "json",
    error: function (request, error, u) {
        alert('blargherror: ' + error);
    },
    success: function (result, status) {
        alert(result.d);
    }
});
} 
```

不确定是否需要，但`Web.Config`：

```
<behaviors>
   <endpointBehaviors>
        <behavior name="jsonBehavior">
            <enableWebScript />
        </behavior>
    </endpointBehaviors>

    <serviceBehaviors>
        <behavior name="metaBehavior">
            <serviceDebug includeExceptionDetailInFaults="true" />
            <serviceMetadata httpGetEnabled="true" />
        </behavior>
    </serviceBehaviors>
</behaviors>

<serviceHostingEnvironment 
    aspNetCompatibilityEnabled="true"
    multipleSiteBindingsEnabled="true" />

<services>
    <service name="ProfileService" behaviorConfiguration="metaBehavior">
        <endpoint address="/json" 
            behaviorConfiguration="jsonBehavior"
            binding="webHttpBinding" 
            bindingConfiguration="secure" 
            contract="ProfileService" />
        <endpoint address="" 
            binding="basicHttpBinding" 
            bindingConfiguration="secure" 
            contract="ProfileService" />
    </service>
</services> 
```

编辑到 Web.Config - 添加绑定

```
<bindings>
        <webHttpBinding>
            <binding name="secure">
                <security mode="TransportCredentialOnly">
                    <transport clientCredentialType="Windows"/>
                </security>
            </binding>
        </webHttpBinding>
        <basicHttpBinding>
            <binding name="secure">
                <security mode="TransportCredentialOnly">
                    <transport clientCredentialType="Windows" />
                </security>
            </binding>
        </basicHttpBinding>
    </bindings> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T15:02:59.510

我能够弄清楚这一点。返回对象为未知类型存在问题，因此无法将其序列化为`JSON`对象。不知道如何序列化对象以使其与我的方法一起使用，所以我最终只是更改方法以返回构造我自己的自定义`JSON`字符串的字符串，并使用该`eval()`函数将其转换为`JSON`对象。

# c# - 使用标签遍历 GridView 行

> ID：11419635
> 
> 赞同：0
> 
> 时间：2012-07-10T18:32:11.513
> 
> 标签：c#, asp.net, .net, gridview

在 C# (ASP.NET) 中使用 GridView，我正在尝试迭代单行。通常，如果我可以提取每个单元格中的文本，这不会太困难：

```
string text = SecGrpGridView.Rows[0].Cells[i].Text; 
```

但是，我的行中的一些字段包含标签，我相信提取值的唯一方法是使用 FindControl() 并将其转换为标签：

```
Label myLabel = (Label)SecGrpGridView.Rows[0].Cells[i].FindControl("Label5");
string text = myLabel.Text; 
```

如您所见，第二个示例我需要知道标签的 ID，因此除非我按顺序命名标签，否则很难迭代。我知道未来需要在我的行中添加更多列，所以我正在寻找一种方法来迭代这一行，而不必按顺序命名标签。（即'Label1'，'Label2'，'Label3'）有没有更好的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T18:50:16.870

您可以使用以下代码收集 GridView 中的所有标签

```
public static List<Label> FindLabelRecursive(Control root)
{
    List<Label> labels = new List<Label>();
    if (root is Label)
    {
        labels.Add(root as Label);
        return labels;
    }

    foreach(Control c in root.Controls)
    {
        if (c is Label)
        {
            labels.Add(c);
        }
        else
        {
            List<Label> childLabels = FindLabelRecursive(c);
            labels.AddRange(childLabels);
        }
    }

    return labels;
} 
```

然后根据返回的标签进行处理。

# xcode4.3 - 我是否正确安装了 Xcode？

> ID：11419638
> 
> 赞同：0
> 
> 时间：2012-07-10T18:32:19.710
> 
> 标签：xcode4.3

经过多年在 AIX 和 Linux 上的自定义内部编程，我对 OS X 完全陌生，所以我有一些非常幼稚的问题，我相信任何 Mac 开发人员都能回答。

我下载了 Xcode，但没有指定它应该安装在哪里。.dmg 文件出现在我的 ~/Downloads 目录中，一个磁盘映像图标出现在我的桌面上，一个名为 Xcode 的可弹出设备出现在 Finder 中。我打开桌面图标，看到一个名为 Xcode.app 的图标，然后将它拖到 Dock 上。单击它会打开 Xcode IDE，我可以在那里编写和运行程序。到目前为止一切看起来都不错，但我只是觉得我没有以标准方式安装 Xcode，因为： 1\. 机器的根目录不包含我所读到的 /Developer 目录。2\. 在 /Applications 中没有提到 Xcode，我看到 OpenOffice.org.app、Safari.app、TextEdit.app 等。 3\. 重新登录后，当我从 Dock 启动 Xcode 时，出现 Xcode 磁盘图标在桌面上，

问题 1：我是直接从下载的图像中运行 Xcode 吗？

问题 2：如果确实安装了，它是从哪里提取的？

问题3：如果不是，我该如何正确安装它。

问题 4：如何让 Xcode 显示为应用程序或 Launchpad？

谢谢，

布赖恩

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T18:43:36.910

您只需要执行以下步骤即可解决此问题：-

1) 每当您单击 Dock 中的 xcode 图标时，它都会打开一个包含 xcode.app 的新窗口

2) 将此 xcode.app 图标拖到 MAC 系统上驱动器“OSX”的“应用程序”文件夹中。

3) 将 xcode 复制到应用程序文件夹需要一些时间。一旦完成，您将永远不会再面对这个问题。

干杯！！！

# python - Python子流程模块使用

> ID：11419643
> 
> 赞同：2
> 
> 时间：2012-07-10T18:32:43.940
> 
> 标签：python, subprocess

如何指定 python 模块子进程用于执行命令的目录？我想运行一个 C 程序并在 Python 中近乎实时地处理它的输出。

我想执行命令（这将为我的 C 程序运行我的 makefile：

```
make run_pci 
```

在：

```
/home/ecorbett/hello_world_pthread 
```

我还想用 Python 处理 C 程序的输出。我是 Python 新手，因此将不胜感激示例代码！

谢谢，爱德华

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T18:38:03.590

使用、或的`cwd`参数。例如`Popen``call``check_call``check_output`

```
subprocess.check_output(["make", "run_pci"],
                        cwd="/home/ecorbett/hello_world_pthread") 
```

**编辑**：好的，现在我明白你所说的“近实时”是什么意思了。尝试

```
p = subprocess.Popen(["make", "run_pci"],
                     stdout=subprocess.PIPE,
                     cwd="/home/ecorbett/hello_world_pthread")
for ln in p.stdout:
    # do processing 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T18:39:27.847

阅读[文档](http://docs.python.org/library/subprocess.html#popen-constructor)。您可以使用`cwd`参数指定它，否则它使用父进程的当前目录（即运行子进程的脚本）。

# objective-c - 无法将对象添加到 NSMutableDictionary（iOS，Objective-C）

> ID：11419644
> 
> 赞同：1
> 
> 时间：2012-07-10T18:32:46.980
> 
> 标签：objective-c, ios, nsmutabledictionary

我正在尝试`NSMutableDictionary`使用该`setObject:forKey:`函数向一个对象添加一个对象，但是无论出于何种原因，当我在 iPhone 模拟器中运行我的应用程序并尝试执行该操作时，如果我试图将对象添加到字典。程序卡住的行如下：

```
[_dict setObject:_tf.text forKey:[NSString stringWithFormat:@"keywords_%i", [_keywordsArray count]]]; 
```

其中“_dict”是一个`NSMutableDictionary`对象，“_tf”是一个`UITextField`，“_keywordsArray”是一个`NSMutableArray`。

总体而言，我使用字典中的对象（又名键）来填充`NSMutableArray`用于填充`UIPickerView`. 最初，我从 .plist 文件加载字典，我可以告诉`NSMutableDictionary`和`NSMutableArray`都被正确填充/填充，并且`UIPickerView`工作正常，唯一不工作的部分是将对象添加到`NSMutableDictionary`（当用户按下 UI 中的按钮）。此外，我确实收到了一个错误，说它`NSMutableArray`的计数为 0（零），而显然它没有。

任何帮助/建议将不胜感激！

# ember.js - emberjs Uncaught 当关联模型处于当前状态时，您无法将数据加载到存储中

> ID：11419646
> 
> 赞同：0
> 
> 时间：2012-07-10T18:33:18.377
> 
> 标签：ember.js, ember-data

我在 emberjs 0.9.8.1 中遇到此错误

```
Uncaught You cannot load data into the store when its associated model is in its current state 
```

我只是想像这样获取我的数据

```
App.myController.get('content').get('someProperty'); 
```

并发生该错误。数据已经加载到控制器的内容中，我只是想抓住它。我正在使用 ember 数据，这是我的模型有问题

```
App.MemberInfo = DS.Model.extend({
        primaryKey: 'level',
        levelCopy: DS.attr('string'),
        level: DS.attr('string'),
        contactInfo: DS.hasOne('App.ContactInfoModel', { embedded: true })
    }); 
```

我正在使用 App.store.find 方法（ember 数据）重新加载控制器内容。对同一模型进行第二次查找后发生错误。当 contactInfo 属性不存在时。没有问题。添加contactInfo时会发生这种情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T08:55:16.687

您使用的是哪个版本的 ember-data？这种`hasOne`关系已经不存在了，因为很长一段时间......

您应该`belongsTo`在拥有方（带有 id 参考的模型）使用关系。

* * *

顺便说一下，一些更惯用的代码的提示：

```
App.myController.get('content').get('someProperty'); 
```

应该写成：

```
App.myController.getPath('content.someProperty'); 
```

或带有余烬边缘

```
App.myController.get('content.someProperty'); 
```

而且，如果`myController`是一个`ObjectController`实例，那么作为一个代理，你也可以这样写：

```
App.myController.get('someProperty'); 
```

# r - 来自 anova 输出的 x 和 y 变量的 p 值矩阵

> ID：11419648
> 
> 赞同：4
> 
> 时间：2012-07-10T18:33:35.843
> 
> 标签：r, loops, anova

我有很多 X 和 Y 变量（比如 500 x 500）。以下只是小数据：

```
yvars <- data.frame (Yv1 = rnorm(100, 5, 3), Y2 = rnorm (100, 6, 4),
  Yv3 = rnorm (100, 14, 3))
xvars <- data.frame (Xv1 = sample (c(1,0, -1), 100, replace = T),
 X2 = sample (c(1,0, -1), 100, replace = T), 
 Xv3 = sample (c(1,0, -1), 100, replace = T), 
 D = sample (c(1,0, -1), 100, replace = T)) 
```

我想提取 p 值并制作这样的矩阵：

```
 Yv1    Y2     Yv3   
Xv1
X2
Xv3
D 
```

这是我尝试循环该过程：

```
prob = NULL
   anova.pmat <- function (x) {
            mydata <- data.frame(yvar = yvars[, x], xvars)
            for (i in seq(length(xvars))) {
              prob[[i]] <- anova(lm(yvar ~ mydata[, i + 1],
              data = mydata))$`Pr(>F)`[1]
              }
              }
    sapply (yvars,anova.pmat)
    Error in .subset(x, j) : only 0's may be mixed with negative subscripts
What could be the solution ? 
```

**编辑：**

对于第一个 Y 变量：

对于第一个 Y 变量：

```
prob <- NULL
 mydata <- data.frame(yvar = yvars[, 1], xvars)
for (i in seq(length(xvars))) {
              prob[[i]] <- anova(lm(yvar ~ mydata[, i + 1],
              data = mydata))$`Pr(>F)`[1]
              }

prob 
[1] 0.4995179 0.4067040 0.4181571 0.6291167 
```

再次编辑：

```
for (j in seq(length (yvars))){
        prob <- NULL
        mydata <- data.frame(yvar = yvars[, j], xvars)
         for (i in seq(length(xvars))) {
                  prob[[i]] <- anova(lm(yvar ~ mydata[, i + 1],
                  data = mydata))$`Pr(>F)`[1]
                  }
}

Gives the same result as above !!! 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T20:18:06.607

这是一种方法，用于为每个and`plyr`循环遍历数据帧的列（将其视为列表），返回适当的 p 值，将其排列成矩阵。添加行/列名称只是额外的。`xvars``yvars`

```
library("plyr")

probs <- laply(xvars, function(x) {
    laply(yvars, function(y) {
        anova(lm(y~x))$`Pr(>F)`[1]
    })
})
rownames(probs) <- names(xvars)
colnames(probs) <- names(yvars) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T20:10:59.943

这是一种解决方案，它包括生成 Y 和 X 变量的所有组合来测试（我们不能使用`combn`）并在每种情况下运行线性模型：

```
dfrm <- data.frame(y=gl(ncol(yvars), ncol(xvars), labels=names(yvars)),
                   x=gl(ncol(xvars), 1, labels=names(xvars)), pval=NA)
## little helper function to create formula on the fly
fm <- function(x) as.formula(paste(unlist(x), collapse="~"))
## merge both datasets
full.df <- cbind.data.frame(yvars, xvars)
## apply our LM row-wise
dfrm$pval <- apply(dfrm[,1:2], 1, 
                   function(x) anova(lm(fm(x), full.df))$`Pr(>F)`[1])
## arrange everything in a rectangular matrix of p-values
res <- matrix(dfrm$pval, nc=3, dimnames=list(levels(dfrm$x), levels(dfrm$y))) 
```

**旁注：**对于高维数据集，依靠 QR 分解来计算线性回归的 p 值非常耗时。更容易计算每个成对比较的 Pearson 线性相关矩阵，并使用关系 F = ν [a] r ² /(1-r ² ) 将 r 统计量转换为 Fisher-Snedecor F，其中定义了自由度如 ν [a] =(n-2)-#{(x [i] =NA),(y [i] =NA)} （即 (n-2) 减去成对缺失值的数量——如果没有缺失值，这个公式是回归中的常用系数 R ²）。

# xul - XUL 为 Thunderbird 添加工具栏

> ID：11419649
> 
> 赞同：1
> 
> 时间：2012-07-10T18:33:37.630
> 
> 标签：xul, thunderbird, thunderbird-addon

我是 XUL 和雷鸟开发的新手。我需要在 messengercompose.xul 文件中添加一个工具栏。我应该如何为此编写 XUL 文件？

# ios - iOS AddressBook 框架设计背后的基本原理是什么？

> ID：11419652
> 
> 赞同：1
> 
> 时间：2012-07-10T18:33:44.407
> 
> 标签：ios, abrecord, abrecordcopyvalue

我正在阅读有关[如何使用 iOS AddressBook](http://developer.apple.com/library/ios/#DOCUMENTATION/ContactData/Conceptual/AddressBookProgrammingGuideforiPhone/Introduction.html)的文档。虽然到目前为止我了解它的一般机制，但我很难理解这个框架是如何构建的背后的基本原理。我刚刚完成了我的第二个应用程序，所以虽然我看到了几个 iOS 框架，但我并没有那么有经验。这个框架与我目前所看到的有何不同完全让我感到困惑。

我确信 Apple 的工程师有他们这样做的理由，但我之所以这么问是因为我认为理解或至少尝试理解其背后的思维过程非常有价值。

这是从地址簿记录中获取字符串值的记录方法：

```
NSString* name = (__bridge_transfer NSString*)ABRecordCopyValue(person, kABPersonFirstNameProperty); 
```

这是获取联系人价值的记录方式，在本例中为电话号码（如果有）：

```
ABMultiValueRef phoneNumbers = ABRecordCopyValue(person, kABPersonPhoneProperty); 
```

最后，您可以像这样计算电话号码：

```
ABMultiValueGetCount(phoneNumbers) 
```

**我的问题是...**

当与其他框架一起工作时，所有这些小功能（如`ABRecordCopyValue()`,等）背后的基本原理是完全不同的。`ABMultiValueGetCount()`我的意思是，为什么使用 AddressBook 看起来不像这样？

```
NSAddressBookContact *person = [[NSAddressBookContact alloc] initWithRecordReference:myRecord];
NSString *name = person.name;
NSLog(@"Phone number count: %i", [person.phoneNumbers count]); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T18:42:01.963

一些框架有一个 Objective-C API；其他人有一个 C API。例如，Core Foundation 都是 C，而 Cocoa 和 Cocoa Touch 都是 Objective-C。

None of us knows for certain why Apple chose to write a C API instead of an Objective-C API for AddressBook specifically, but one might guess that they had a need to access data in the address book from lower levels. For example, the software component that handles incoming phone calls is probably pretty low-level (at least compared to third party apps) and might require a C API.

# java - 使用按钮数组调试 JFrame

> ID：11419654
> 
> 赞同：2
> 
> 时间：2012-07-10T18:33:50.757
> 
> 标签：java, swing, jframe

我无法为我的班级的战舰克隆生成一系列按钮，并且似乎无法弄清楚为什么它不起作用。任何建议都会有所帮助......我让主类创建 jFrame，然后是网格类，更具体地说，生成器方法构建按钮数组。

```
import java.awt.*;

import javax.swing.*;

public class warship {

/**
 * @param args
 */

public static void main(String[] args) {
    JFrame gui = new JFrame();
    gui.setSize(700, 350);
    gui.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    gui.setLayout(new FlowLayout());
    grid oceanGrid = new grid();
    oceanGrid.Generator();
    gui.add(oceanGrid);
    gui.setVisible(true);

}

} 
```

网格.java

```
 import java.awt.Dimension;
     import java.awt.GridLayout;
     import java.awt.LayoutManager;

     import javax.swing.ImageIcon;
     import javax.swing.JButton;
     import javax.swing.JPanel;
     import javax.swing.border.TitledBorder;

     @SuppressWarnings("serial")
public class grid extends JPanel{
private static int rows = 7;
private static int col = 10;

public void Generator(){

    ImageIcon wIcon = new ImageIcon    ("H:\\workspace\\Warship\\src\\images\\water.jpg");
    JPanel jPan1 = new JPanel();
    jPan1.setLayout((LayoutManager) new GridLayout(rows,col,1,1));
    jPan1.setSize(350,350);

    //Set Border 
    TitledBorder bdr = javax.swing.BorderFactory.createTitledBorder(null, "Targeting Grid",
            javax.swing.border.TitledBorder.DEFAULT_JUSTIFICATION,
            javax.swing.border.TitledBorder.DEFAULT_POSITION,
            new java.awt.Font("Arial", 0, 16));
    bdr.setTitleColor(java.awt.Color.RED);
    jPan1.setLayout((LayoutManager) new GridLayout(rows,col,1,1));      
    jPan1.setBorder(bdr);

    //Creates the array of buttons
    JButton b[]=new JButton[rows*col];
    for (int i = 0, j= rows*col; i < j; i++){
        b[i] = new JButton(wIcon);
        b[i].setSize(20, 20);
        b[i].setMaximumSize(new Dimension(20,20));
        b[i].setPreferredSize(new Dimension(20,20));
        System.out.println("loop test " + i);
        jPan1.add(b[i]);
    }
}
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T18:53:17.020

我认为这是您犯的错误：
您的类网格扩展`JPanel`，但是您声明并初始化了另一个`JPanel`添加按钮的类。因此，您实际上并没有将按钮添加到您的网格，而是添加到您不使用的另一个面板。

解决方案是删除此行

```
JPanel jPan1 = new JPanel(); 
```

并将所有出现的 替换`jPan1`为`this`

这样您就可以将按钮添加到网格中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T18:49:43.043

我相信您在 setVisible(true) 之前缺少 pack() 命令。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-10T18:59:30.623

1 不需要网格中的JPanel。
2 网格中的 JPanel 未使用 .add() 方法添加到任何内容。
然而，似乎其他人已经做到了这一点。

如前所述，您应该删除“JPanel jPan1 = new JPanel();”行
并替换单词“jPan1”。用“这个”这个词。所有小写​​字母。

这是您编辑的代码的正确缩进，或者至少是更易于阅读的缩进。

```
import java.awt.Dimension;
import java.awt.GridLayout;
import java.awt.LayoutManager;
import javax.swing.ImageIcon;
import javax.swing.JButton;
import javax.swing.JPanel;
import javax.swing.border.TitledBorder;

@SuppressWarnings("serial")
public class grid extends JPanel{
    private static int rows = 7;
    private static int col = 10;

    public void Generator(){

        ImageIcon wIcon = new ImageIcon ("H:\\workspace\\Warship\\src\\images\\water.jpg");

        this.setLayout((LayoutManager) new GridLayout(rows,col,1,1));
        this.setSize(350,350);

        //Set Border 
        TitledBorder bdr = javax.swing.BorderFactory.createTitledBorder(null,         "Targeting Grid",
            javax.swing.border.TitledBorder.DEFAULT_JUSTIFICATION,
            javax.swing.border.TitledBorder.DEFAULT_POSITION,
            new java.awt.Font("Arial", 0, 16));
        bdr.setTitleColor(java.awt.Color.RED);

        this.setLayout((LayoutManager) new GridLayout(rows,col,1,1));      
        this.setBorder(bdr);

    //Creates the array of buttons
        JButton b[]=new JButton[rows*col];
        for (int i = 0, j= rows*col; i < j; i++){
            b[i] = new JButton(wIcon);
            b[i].setSize(20, 20);
            b[i].setMaximumSize(new Dimension(20,20));
            b[i].setPreferredSize(new Dimension(20,20));
            System.out.println("loop test " + i);
                this.add(b[i]);
        }
    }
} 
```

请注意，在此之后的任何内容至少只是对风格的有益批评。

我会在网格中使用构造函数，因此您不必调用该方法。像这样：

```
public Generator(){
    super();

    //code in Generator() here.
} 
```

现在你不需要调用方法“Generator()”

这两行

```
javax.swing.border.TitledBorder.DEFAULT_JUSTIFICATION,
javax.swing.border.TitledBorder.DEFAULT_POSITION, 
```

可以像这样更短。

```
TitledBorder.DEFAULT_JUSTIFICATION,
TitledBorder.DEFAULT_POSITION, 
```

# sql-server - 用于安全 SQL 插入的正则表达式

> ID：11419655
> 
> 赞同：0
> 
> 时间：2012-07-10T18:33:51.147
> 
> 标签：sql-server, regex, vbscript

我有一个将一些字符串插入数据库的 vbscript。通常，这些字符串有奇怪的字符、引号、撇号、和号等。我目前正在使用以下字符串来替换除某些字符之外的所有字符，但它正在替换分号和其他一些我希望保留的东西（包括空格）。所以我基本上是在寻找限制最少的正则表达式，它仍然会生成一个 sql 安全字符串。

值得一提的是，这些字符串是 Windows 安装的应用程序（正如您在添加/删除程序中看到的那样）。

```
Function CleanUp (input)
  Dim objRegExp, outputStr
  Set objRegExp = New Regexp

  objRegExp.IgnoreCase = True
  objRegExp.Global = True
  objRegExp.Pattern = "((?![a-zA-Z0-9]).)+"
  outputStr = objRegExp.Replace(input, "-")

  objRegExp.Pattern = "\-+"
  outputStr = objRegExp.Replace(outputStr, "-")

  CleanUp = outputStr
End Function 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T19:30:02.847

为什么字符串必须是 SQL 安全的？使用参数并完成它。[对您的应用程序进行防黑客攻击](http://msdn.microsoft.com/en-us/magazine/hh580736.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T20:14:18.903

到目前为止，这在我的测试中似乎很有效：

> objRegExp.Pattern = "[^\x20-\x26,^\x28-\x7E]" '空格通过&，跳过'，然后（通过~

我不知道您可以指定一系列 ascii 值。这涵盖了 Space 和 ~ 之间的所有内容，不包括单引号 (')。

# perl - 如何在 perl 中访问变量的值，其中我有多个变量及其值并以 ; 结尾

> ID：11419659
> 
> 赞同：0
> 
> 时间：2012-07-10T18:34:01.177
> 
> 标签：perl, variables, mod-perl, perl-data-structures

我有一个这样的 txt 文件
$CHUNK_QTY = "50000";
$CLIENT = "大家好";
$CLIENT_CODE = "NMB";
$COMPOSER = "对话";
$CONTROL_FILE_NAME = "NMBM725.XML";
$COPY_BASE = "01";
$CSITE = "NSH";
$DATA_TYPE = "MET";
$DIALOGUE_VERSION = "V7R0M624";
$禁用 = "N";
$DPI = "300";
$DP_BAR_START = "A";
$DP_BAR_STOP = "Z";
$双工 = "N";
$Dialogue_Version = "V7R0M624";
$EMAIL_ERROR = "Y";
$EMAIL_ON = "N";

我有很多变量，最多 500 个。我想访问相应变量的值。例如，如果我想访问 $DPI 它应该打印 300 。我如何在 perl 中做到这一点。任何帮助将不胜感激。我想要一些不同于正则表达式的东西。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T18:49:13.950

不正确、错误、坏和危险的方式：

```
eval qx{cat filename.txt};
print "$DPI\n"; 
```

或者

```
do "filename.txt";
print "$DPI\n"; 
```

所以不要这样做。

例如使用正则表达式更好地解析和清除文件...

如果不想要基于正则表达式的解决方案，您至少可以使用 Safe.pm 模块：

```
use Safe;
my $sandbox = new Safe;
$sandbox->rdo( "filename.txt"  ) or die "safe problem $@";

#more safe now
do "filename.txt";
print "$DPI\n"; 
```

`rdo`就像但在安全的`do`环境中，特别是它可以捕捉到`$X = qx {rm -rf /};`建筑物。如果文件通过了`rdo`它**可能**可以**做**-ed。

当然，上面的也是错误的，因为你不能`use strict;`像已经告诉过的 TLP 那样使用。最好的方法是解析文件。

对于基于正则表达式的解决方案，您可以使用：

```
use strict;
use warnings;
my $re = qr /^\s*\$(\w+)\s*=\s*"(.*)"\s*;\s*$/o;
my %conf = map { m/$re/;($1,$2) } grep {$re} <DATA>;
__END__
$CHUNK_QTY = "50000";
$CLIENT = "hi all";
$CLIENT_CODE = "NMB";
$COMPOSER = "DIALOGUE";
$CONTROL_FILE_NAME = "NMBM725.XML";
$COPY_BASE = "01";
$CSITE = "NSH";
$DATA_TYPE = "MET";
$DIALOGUE_VERSION = "V7R0M624";
$DISABLE = "N";
$DPI = "300";
$DP_BAR_START = "A";
$DP_BAR_STOP = "Z";
$DUPLEX = "N";
$Dialogue_Version = "V7R0M624";
$EMAIL_ERROR = "Y";
$EMAIL_ON = "N"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T18:55:48.030

您可以使用`do`文件来运行它：

```
do "yourfile";
print $DPI; 
```

但是，如果您在 下运行`use strict`，您应该首先使用 声明变量`our`：

```
use strict;
use warnings;

our $DPI; # plus any other variables you want to use
do "yourfile";
print $DPI; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-10T18:59:46.223

您可以使用[hashes](http://www.cs.mcgill.ca/~abatko/computers/programming/perl/howto/hash/)，这样您就可以将名称和值写入哈希列表并根据它们的名称检索它们。

这是一种读取文件内容并将内容放入哈希结构的方法：

```
my $hash = ();
open FILE, "<", "stuff.txt" or die $!;

while(<FILE>)
{
    my @attr  = split(/=/);
    #this is actually a regexp, but you can read the data in any way you want

    my $key   = $attr[0];
    my $value = $attr[1];
    #only splitting up so that it becomes easier to read

    $hash{$key} = $value;#insert key and value  
}
close (FILE);
print 'Content of $CLIENT:'.$hash{'$CLIENT'};
print 'Content of $CHUNK_QTY:'.$hash{'$CHUNK_QTY'}; 
```

文件“stuff.txt”的内容

```
$CLIENT="hi all"
$CHUNK_QTY="50000" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-10T21:19:10.327

这是一个简单的示例，展示了如何以您在上面给出的格式获取行并将它们放入哈希中：

```
#!/usr/bin/env perl    

use strict;
use warnings;

my %vars;
while (my $line = <DATA>) {
  chomp $line;          # remove linebreak
  $line =~ s/^\$//;     # Optional: remove $ from start of variable name

  my ($key, $value) = $line =~ /^(\w+)\s*=\s*(.*)$/;
  $value =~ s/;$//;     # Remove trailing semicolon
  $value =~ s/^"//;     # Remove leading double-quotes
  $value =~ s/"$//;     # Remove trailing double-quotes
  $vars{$key} = $value;
} 

for my $key (sort keys %vars) {
  print "$key has value $vars{$key}\n";
}

print "CLIENT says $vars{CLIENT}\n";

__DATA__
$CHUNK_QTY = "50000";
$CLIENT = "hi all";
$CLIENT_CODE = "NMB";
$COMPOSER = "DIALOGUE";
$CONTROL_FILE_NAME = "NMBM725.XML";
$COPY_BASE = "01";
$CSITE = "NSH";
$DATA_TYPE = "MET";
$DIALOGUE_VERSION = "V7R0M624";
$DISABLE = "N";
$DPI = "300";
$DP_BAR_START = "A";
$DP_BAR_STOP = "Z";
$DUPLEX = "N";
$Dialogue_Version = "V7R0M624";
$EMAIL_ERROR = "Y";
$EMAIL_ON = "N"; 
```

这里应该有足够的内容可以帮助您入门，但是您需要自己阅读如何打开实际文件（而不是`__DATA__`像我在这里所做的那样使用该部分）。我建议检查[`perldoc open`](http://perldoc.perl.org/functions/open.html)示例和完整的详细信息。

# c# - NHibernate 复合关键问题

> ID：11419661
> 
> 赞同：0
> 
> 时间：2012-07-10T18:34:05.413
> 
> 标签：c#, nhibernate

在 NHibernate 中，我定义了一个类及其映射。我不确定复合键定义和 equals/GetHashCode 是否正确？

```
[DataMember]
public virtual int EXCEPTION_ID { get; set; }

[DataMember]
public virtual int RUNID { get; set; }

[DataMember]
public virtual int ROW_ID { get; set; }

[DataMember]
public virtual string FIELD_NAME { get; set; }

[DataMember]
public virtual string FIELD_VALUE { get; set; }

public override bool Equals(object obj)
{
   if (obj == null)
   {
      return false;
   }

   var t = obj as ExceptionFld;

   if ((EXCEPTION_ID == t.EXCEPTION_ID) && (RUNID == t.RUNID) && (ROW_ID == t.ROW_ID) && (FIELD_NAME == t.FIELD_NAME))
   {
      return true; 
   }     

   return false;
}        

public override int GetHashCode()
{
    return (EXCEPTION_ID + "|" + RUNID + "|" + ROW_ID + "|" + FIELD_NAME).GetHashCode();
} 
```

映射文件是

```
 <composite-id>
      <key-property name="EXCEPTION_ID"/>
      <key-property name="RUNID"/>
      <key-property name="ROW_ID"/>
      <key-property name="FIELD_NAME"/>
    </composite-id>

    <property name="EXCEPTION_ID" type="System.Int32, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" not-null="true">
      <column name="EXCEPTION_ID" />
    </property>

    <property name="RUNID" type="System.Int32, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" not-null="true">
      <column name="RUNID" />
    </property>

    <property name="ROW_ID" type="System.Int32, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" not-null="true">
      <column name="ROW_ID" />
    </property>

    <property name="FIELD_NAME" type="System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" not-null="true">
      <column name="FIELD_NAME" />
    </property>

    <property name="FIELD_VALUE" type="System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" not-null="true">
      <column name="FIELD_VALUE" />
    </property> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T19:42:56.340

据我所知，您不应该**重新**`composite-id`声明标签之外的属性（参见[示例](http://dotnetslackers.com/Community/blogs/antrad/archive/2008/02/10/how-to-map-composite-key-in-nhibernate.aspx)）。

我会像这样重写 Equals 实现：

```
public override bool Equals(object obj)
{
    var t = obj as ExceptionFld;

    if (t == null) return false;

    return EXCEPTION_ID == t.EXCEPTION_ID
         && RUNID == t.RUNID
         && ROW_ID == t.ROW_ID
         && FIELD_NAME == t.FIELD_NAME;
} 
```

因为我相当确定您当前的实现在这样调用时会抛出 NullReferenceException：

```
var instance = new ExceptionFld();
instance.Equals(""); 
```

当它真的应该返回false时。

操作员会`as`尝试从`string`to强制转换`ExceptionFld`，注意强制转换会失败，然后 t 将为空。

我不确定你`GetHashCode`的性能或哈希码分布，但除此之外，它看起来是可行的。

# c# - 如何托管 Web 服务，以便连接到同一网络的其他客户端可以访问

> ID：11419666
> 
> 赞同：3
> 
> 时间：2012-07-10T18:34:22.100
> 
> 标签：c#, asp.net, web-services, web, hosting

我正在使用 Visual Studio 2008 在一台机器上托管 Web 服务。我尝试从我在同一解决方案中创建的网站访问 Web 服务，并成功调用它。现在我想从远程客户端访问 Web 服务。

我最初开发了用于 android 应用程序的 Web 服务。正如您所看到的，如果我想访问我必须托管的 Web 服务是使用静态 IP 的。因此，至少要测试*我想通过将服务器和 android 手机连接到一个 wifi 网络来从 android 手机访问 Web 服务*的应用程序。对于初始测试，我将两台笔记本电脑（一台是服务器）连接到 wifi 路由器。我从客户端机器上ping了服务器，它成功地pingd了。但是当我尝试从浏览器访问具有给定端口的 Web 服务时，它不允许我连接。我试过`http://localhost:26796/`通过用服务器的 ip 替换本地主机，我也尝试制作一个小型网站（asp）并尝试通过 IP 从客户端访问它。两者都没有工作。我在这里搜索过，在网上找不到正确的答案。为了，

1.  如何托管网络服务，以便同一网络中的其他客户端可以访问..？
2.  可以用VSD服务器实现..？
3.  是否必须使用iis..？
4.  我应该如何实现这一目标..？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T08:18:21.690

**注意：**根据用户建议从评论移至回答。

将 Web 服务作为应用程序发布到本地计算机的 IIS。然后，您可以从网络中的任何位置访问该站点。直接从 VS 运行它意味着它托管在 VS 的 ASP.NET 开发服务器中（默认情况下只能在本地访问）。您可以尝试打开在您机器的本地防火墙上启动的 ASP.NET 开发服务器中指定的端口，然后您可以访问托管的调试实例

# bash - 在字符串内的bash中转义方括号以获取if

> ID：11419668
> 
> 赞同：2
> 
> 时间：2012-07-10T18:34:31.687
> 
> 标签：bash, escaping

我正在尝试做一个简单的`if`陈述，但其中一个字符串包含方括号。

我试过了`\ ' " +`，一切都在我脑海中浮现。

我基本上是这样的：

```
if [ $MESSAGE = "username [$USERNAME] is already taken" ] 
```

在这种情况下，我想抛出一条错误消息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T18:41:16.490

引用 $MESSAGE 为好。如果该变量确实包含 [，它将影响解析。

```
if [ "$MESSAGE" = "username [$USERNAME] is already taken" ] 
```

# java - 消极环顾四周的理解不佳

> ID：11419669
> 
> 赞同：0
> 
> 时间：2012-07-10T18:34:33.830
> 
> 标签：java, regex

我正在尝试改进正则表达式。

我有这个字符串：

```
String myString = 
    "stuffIDontWant$KEYWORD$stuffIWant$stuffIWant$KEYWORD$stuffIDontWant"; 
```

我这样做是为了只减去我想要的东西：

```
 String regex = "\\$KEYWORD\\$.+\\$.+\\$KEYWORD\\$";

    Pattern p = Pattern.compile(regex);
    Matcher m = p.matcher(myString);

    if(m.find()){
        String result = stuff.substring(m.start(), m.end());
    } 
```

目标是获取`stuffIWant$stuffIWant`然后将其拆分为 character `$`，因此，为了改进它并避免将 Patter 和 Matcher 导入我的 java 源代码，我阅读了有关环视的内容，所以我的第二种方法是：

```
//Deletes what matches regex
    myString.replaceAll(regex, ""); 
// Does nothing, and i thought it was just the opposite of the above instruction.
    myString.replaceAll("(?! "+regex+")", ""); 
```

什么是正确的方法，我的概念在哪里错了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T18:48:51.097

你快到了！但大多数会使用*捕获组*。

```
\\$KEYWORD\\$(.+)\\$(.+)\\$KEYWORD\\$
             ^  ^   ^  ^ 
```

这些括号将存储它们所包含的内容，即*capture*。第一个集合的索引为 1，第二个集合的索引为 2。您可以使用上面的表达式尝试一下，看看发生了什么。

```
if (m.find()) {
    int count = m.groupCount();
    for (int i=0; i<count; i++) {
        System.out.println(m.group(i));
    }
} 
```

也可以通过环视来解决，但没有必要：

```
(?<=\\$KEYWORD\\$).+?\\$.+?(?=\\$KEYWORD\\$)
^^^^             ^  ^     ^^^^             ^ 
```

# ios - 为什么在将核心数据属性从整数 16 更改为字符串时会看到此错误？

> ID：11419677
> 
> 赞同：4
> 
> 时间：2012-07-10T18:35:10.513
> 
> 标签：ios, core-data

我有一个核心数据模型，其中一个属性当前设置为整数 16。我现在想要更改属性名称并更改其类型，但保留当前数据。我已经对名称更改进行了排序，并且它运行没有问题。

在尝试更改数据类型时，我收到以下非常长的错误，我该怎么做才能解决它？

```
2012-07-10 19:33:06.298 Medicine Tracker[5170:707] Unresolved error Error Domain=NSCocoaErrorDomain Code=134140 "The operation couldn‚Äôt be completed. (Cocoa error 134140.)" UserInfo=0x2ae140 {reason=Can't find or automatically infer mapping model for migration, destinationModel=(<NSManagedObjectModel: 0xf694e20>) isEditable 0, entities {
Log = "(<NSEntityDescription: 0xf6947b0>) name Log, managedObjectClassName Log, renamingIdentifier Log, isAbstract 0, superentity name (null), properties {\n    date = \"(<NSAttributeDescription: 0xf6941d0>), name date, isOptional 1, isTransient 0, entity Log, renamingIdentifier date, validation predicates (\\n), warnings (\\n), versionHashModifier (null)\\n userInfo {\\n}, attributeType 900 , attributeValueClassName NSDate, defaultValue (null)\";\n    medicine = \"(<NSRelationshipDescription: 0xf694410>), name medicine, isOptional 1, isTransient 0, entity Log, renamingIdentifier medicine, validation predicates (\\n), warnings (\\n), versionHashModifier (null)\\n userInfo {\\n}, destination entity Medicine, inverseRelationship logs, minCount 1, maxCount 1, isOrdered 0, deleteRule 1\";\n    note = \"(<NSAttributeDescription: 0xf694220>), name note, isOptional 1, isTransient 0, entity Log, renamingIdentifier note, validation predicates (\\n), warnings (\\n), versionHashModifier (null)\\n userInfo {\\n}, attributeType 700 , attributeValueClassName NSString, defaultValue (null)\";\n}, subentities (null), userInfo {\n}, versionHashModifier (null)";
Medicine = "(<NSEntityDescription: 0xf694810>) name Medicine, managedObjectClassName Medicine, renamingIdentifier Medicine, isAbstract 0, superentity name (null), properties {\n    active = \"(<NSAttributeDescription: 0xf694270>), name active, isOptional 1, isTransient 0, entity Medicine, renamingIdentifier active, validation predicates (\\n), warnings (\\n), versionHashModifier (null)\\n userInfo {\\n}, attributeType 800 , attributeValueClassName NSNumber, defaultValue (null)\";\n    dose = \"(<NSAttributeDescription: 0xf6942c0>), name dose, isOptional 1, isTransient 0, entity Medicine, renamingIdentifier amountToTake, validation predicates (\\n), warnings (\\n), versionHashModifier (null)\\n userInfo {\\n}, attributeType 700 , attributeValueClassName NSString, defaultValue (null)\";\n    hoursBetween = \"(<NSAttributeDescription: 0xf694310>), name hoursBetween, isOptional 1, isTransient 0, entity Medicine, renamingIdentifier hoursBetween, validation predicates (\\n), warnings (\\n), versionHashModifier (null)\\n userInfo {\\n}, attributeType 100 , attributeValueClassName NSNumber, defaultValue 0\";\n    logs = \"(<NSRelationshipDescription: 0xf694470>), name logs, isOptional 1, isTransient 0, entity Medicine, renamingIdentifier logs, validation predicates (\\n), warnings (\\n), versionHashModifier (null)\\n userInfo {\\n}, destination entity Log, inverseRelationship medicine, minCount 0, maxCount 0, isOrdered 0, deleteRule 1\";\n    name = \"(<NSAttributeDescription: 0xf694360>), name name, isOptional 1, isTransient 0, entity Medicine, renamingIdentifier name, validation predicates (\\n), warnings (\\n), versionHashModifier (null)\\n userInfo {\\n    \\\"com.apple.syncservices.Syncable\\\" = NO;\\n}, attributeType 700 , attributeValueClassName NSString, defaultValue (null)\";\n}, subentities (null), userInfo {\n    \"com.apple.syncservices.Syncable\" = NO;\n}, versionHashModifier (null)"; }, fetch request templates { }, sourceModel=(<NSManagedObjectModel: 0x2adbb0>) isEditable 1, entities {
Log = "(<NSEntityDescription: 0x2ac700>) name Log, managedObjectClassName Log, renamingIdentifier Log, isAbstract 0, superentity name (null), properties {\n    date = \"(<NSAttributeDescription: 0x294ac0>), name date, isOptional 1, isTransient 0, entity Log, renamingIdentifier date, validation predicates (\\n), warnings (\\n), versionHashModifier (null)\\n userInfo {\\n}, attributeType 900 , attributeValueClassName NSDate, defaultValue (null)\";\n    medicine = \"(<NSRelationshipDescription: 0x294a60>), name medicine, isOptional 1, isTransient 0, entity Log, renamingIdentifier medicine, validation predicates (\\n), warnings (\\n), versionHashModifier (null)\\n userInfo {\\n}, destination entity Medicine, inverseRelationship logs, minCount 1, maxCount 1, isOrdered 0, deleteRule 1\";\n    note = \"(<NSAttributeDescription: 0x2ac810>), name note, isOptional 1, isTransient 0, entity Log, renamingIdentifier note, validation predicates (\\n), warnings (\\n), versionHashModifier (null)\\n userInfo {\\n}, attributeType 700 , attributeValueClassName NSString, defaultValue (null)\";\n}, subentities {\n}, userInfo {\n}, versionHashModifier (null)";
Medicine = "(<NSEntityDescription: 0x294b10>) name Medicine, managedObjectClassName Medicine, renamingIdentifier Medicine, isAbstract 0, superentity name (null), properties {\n    active = \"(<NSAttributeDescription: 0x2adaa0>), name active, isOptional 1, isTransient 0, entity Medicine, renamingIdentifier active, validation predicates (\\n), warnings (\\n), versionHashModifier (null)\\n userInfo {\\n}, attributeType 800 , attributeValueClassName NSNumber, defaultValue (null)\";\n    dose = \"(<NSAttributeDescription: 0x2adaf0>), name dose, isOptional 1, isTransient 0, entity Medicine, renamingIdentifier amountToTake, validation predicates (\\n), warnings (\\n), versionHashModifier (null)\\n userInfo {\\n}, attributeType 100 , attributeValueClassName NSNumber, defaultValue 0\";\n    hoursBetween = \"(<NSAttributeDescription: 0x2adb40>), name hoursBetween, isOptional 1, isTransient 0, entity Medicine, renamingIdentifier hoursBetween, validation predicates (\\n), warnings (\\n), versionHashModifier (null)\\n userInfo {\\n}, attributeType 100 , attributeValueClassName NSNumber, defaultValue 0\";\n    logs = \"(<NSRelationshipDescription: 0x2ada40>), name logs, isOptional 1, isTransient 0, entity Medicine, renamingIdentifier logs, validation predicates (\\n), warnings (\\n), versionHashModifier (null)\\n userInfo {\\n}, destination entity Log, inverseRelationship medicine, minCount 0, maxCount 0, isOrdered 0, deleteRule 1\";\n    name = \"(<NSAttributeDescription: 0x2ad9f0>), name name, isOptional 1, isTransient 0, entity Medicine, renamingIdentifier name, validation predicates (\\n), warnings (\\n), versionHashModifier (null)\\n userInfo {\\n    \\\"com.apple.syncservices.Syncable\\\" = NO;\\n}, attributeType 700 , attributeValueClassName NSString, defaultValue (null)\";\n}, subentities {\n}, userInfo {\n    \"com.apple.syncservices.Syncable\" = NO;\n}, versionHashModifier (null)"; }, fetch request templates { }, NSUnderlyingError=0x2b0140 "The operation couldn‚Äôt be completed. (Cocoa error 134190.)"}, {
NSUnderlyingError = "Error Domain=NSCocoaErrorDomain Code=134190 \"The operation couldn\U2019t be completed. (Cocoa error 134190.)\" UserInfo=0x2b0160 {reason=Source and destination attribute types are incompatible, entity=Medicine, property=dose}";
destinationModel = "(<NSManagedObjectModel: 0xf694e20>) isEditable 0, entities {\n    Log = \"(<NSEntityDescription: 0xf6947b0>) name Log, managedObjectClassName Log, renamingIdentifier Log, isAbstract 0, superentity name (null), properties {\\n    date = \\\"(<NSAttributeDescription: 0xf6941d0>), name date, isOptional 1, isTransient 0, entity Log, renamingIdentifier date, validation predicates (\\\\n), warnings (\\\\n), versionHashModifier (null)\\\\n userInfo {\\\\n}, attributeType 900 , attributeValueClassName NSDate, defaultValue (null)\\\";\\n    medicine = \\\"(<NSRelationshipDescription: 0xf694410>), name medicine, isOptional 1, isTransient 0, entity Log, renamingIdentifier medicine, validation predicates (\\\\n), warnings (\\\\n), versionHashModifier (null)\\\\n userInfo {\\\\n}, destination entity Medicine, inverseRelationship logs, minCount 1, maxCount 1, isOrdered 0, deleteRule 1\\\";\\n    note = \\\"(<NSAttributeDescription: 0xf694220>), name note, isOptional 1, isTransient 0, entity Log, renamingIdentifier note, validation predicates (\\\\n), warnings (\\\\n), versionHashModifier (null)\\\\n userInfo {\\\\n}, attributeType 700 , attributeValueClassName NSString, defaultValue (null)\\\";\\n}, subentities (null), userInfo {\\n}, versionHashModifier (null)\";\n    Medicine = \"(<NSEntityDescription: 0xf694810>) name Medicine, managedObjectClassName Medicine, renamingIdentifier Medicine, isAbstract 0, superentity name (null), properties {\\n    active = \\\"(<NSAttributeDescription: 0xf694270>), name active, isOptional 1, isTransient 0, entity Medicine, renamingIdentifier active, validation predicates (\\\\n), warnings (\\\\n), versionHashModifier (null)\\\\n userInfo {\\\\n}, attributeType 800 , attributeValueClassName NSNumber, defaultValue (null)\\\";\\n    dose = \\\"(<NSAttributeDescription: 0xf6942c0>), name dose, isOptional 1, isTransient 0, entity Medicine, renamingIdentifier amountToTake, validation predicates (\\\\n), warnings (\\\\n), versionHashModifier (null)\\\\n userInfo {\\\\n}, attributeType 700 , attributeValueClassName NSString, defaultValue (null)\\\";\\n    hoursBetween = \\\"(<NSAttributeDescription: 0xf694310>), name hoursBetween, isOptional 1, isTransient 0, entity Medicine, renamingIdentifier hoursBetween, validation predicates (\\\\n), warnings (\\\\n), versionHashModifier (null)\\\\n userInfo {\\\\n}, attributeType 100 , attributeValueClassName NSNumber, defaultValue 0\\\";\\n    logs = \\\"(<NSRelationshipDescription: 0xf694470>), name logs, isOptional 1, isTransient 0, entity Medicine, renamingIdentifier logs, validation predicates (\\\\n), warnings (\\\\n), versionHashModifier (null)\\\\n userInfo {\\\\n}, destination entity Log, inverseRelationship medicine, minCount 0, maxCount 0, isOrdered 0, deleteRule 1\\\";\\n    name = \\\"(<NSAttributeDescription: 0xf694360>), name name, isOptional 1, isTransient 0, entity Medicine, renamingIdentifier name, validation predicates (\\\\n), warnings (\\\\n), versionHashModifier (null)\\\\n userInfo {\\\\n    \\\\\\\"com.apple.syncservices.Syncable\\\\\\\" = NO;\\\\n}, attributeType 700 , attributeValueClassName NSString, defaultValue (null)\\\";\\n}, subentities (null), userInfo {\\n    \\\"com.apple.syncservices.Syncable\\\" = NO;\\n}, versionHashModifier (null)\";\n}, fetch request templates {\n}";
reason = "Can't find or automatically infer mapping model for migration";
sourceModel = "(<NSManagedObjectModel: 0x2adbb0>) isEditable 1, entities {\n    Log = \"(<NSEntityDescription: 0x2ac700>) name Log, managedObjectClassName Log, renamingIdentifier Log, isAbstract 0, superentity name (null), properties {\\n    date = \\\"(<NSAttributeDescription: 0x294ac0>), name date, isOptional 1, isTransient 0, entity Log, renamingIdentifier date, validation predicates (\\\\n), warnings (\\\\n), versionHashModifier (null)\\\\n userInfo {\\\\n}, attributeType 900 , attributeValueClassName NSDate, defaultValue (null)\\\";\\n    medicine = \\\"(<NSRelationshipDescription: 0x294a60>), name medicine, isOptional 1, isTransient 0, entity Log, renamingIdentifier medicine, validation predicates (\\\\n), warnings (\\\\n), versionHashModifier (null)\\\\n userInfo {\\\\n}, destination entity Medicine, inverseRelationship logs, minCount 1, maxCount 1, isOrdered 0, deleteRule 1\\\";\\n    note = \\\"(<NSAttributeDescription: 0x2ac810>), name note, isOptional 1, isTransient 0, entity Log, renamingIdentifier note, validation predicates (\\\\n), warnings (\\\\n), versionHashModifier (null)\\\\n userInfo {\\\\n}, attributeType 700 , attributeValueClassName NSString, defaultValue (null)\\\";\\n}, subentities {\\n}, userInfo {\\n}, versionHashModifier (null)\";\n    Medicine = \"(<NSEntityDescription: 0x294b10>) name Medicine, managedObjectClassName Medicine, renamingIdentifier Medicine, isAbstract 0, superentity name (null), properties {\\n    active = \\\"(<NSAttributeDescription: 0x2adaa0>), name active, isOptional 1, isTransient 0, entity Medicine, renamingIdentifier active, validation predicates (\\\\n), warnings (\\\\n), versionHashModifier (null)\\\\n userInfo {\\\\n}, attributeType 800 , attributeValueClassName NSNumber, defaultValue (null)\\\";\\n    dose = \\\"(<NSAttributeDescription: 0x2adaf0>), name dose, isOptional 1, isTransient 0, entity Medicine, renamingIdentifier amountToTake, validation predicates (\\\\n), warnings (\\\\n), versionHashModifier (null)\\\\n userInfo {\\\\n}, attributeType 100 , attributeValueClassName NSNumber, defaultValue 0\\\";\\n    hoursBetween = \\\"(<NSAttributeDescription: 0x2adb40>), name hoursBetween, isOptional 1, isTransient 0, entity Medicine, renamingIdentifier hoursBetween, validation predicates (\\\\n), warnings (\\\\n), versionHashModifier (null)\\\\n userInfo {\\\\n}, attributeType 100 , attributeValueClassName NSNumber, defaultValue 0\\\";\\n    logs = \\\"(<NSRelationshipDescription: 0x2ada40>), name logs, isOptional 1, isTransient 0, entity Medicine, renamingIdentifier logs, validation predicates (\\\\n), warnings (\\\\n), versionHashModifier (null)\\\\n userInfo {\\\\n}, destination entity Log, inverseRelationship medicine, minCount 0, maxCount 0, isOrdered 0, deleteRule 1\\\";\\n    name = \\\"(<NSAttributeDescription: 0x2ad9f0>), name name, isOptional 1, isTransient 0, entity Medicine, renamingIdentifier name, validation predicates (\\\\n), warnings (\\\\n), versionHashModifier (null)\\\\n userInfo {\\\\n    \\\\\\\"com.apple.syncservices.Syncable\\\\\\\" = NO;\\\\n}, attributeType 700 , attributeValueClassName NSString, defaultValue (null)\\\";\\n}, subentities {\\n}, userInfo {\\n    \\\"com.apple.syncservices.Syncable\\\" = NO;\\n}, versionHashModifier (null)\";\n}, fetch request templates {\n}"; } 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-10T22:11:15.437

您将现有的 SQL 或任何持久存储连同表明相关属性具有特定名称和类型的新模式一起交给 Core Data。当 Core Data 然后查看存储时，它发现存储的格式不适合当前模式。这会导致它抛出您看到的错误。

如果您还没有发布该应用程序，那么只需删除您当前的存储空间（如果您使用的是 iOS，请删除该应用程序）并再次启动。一切都应该没问题。

如果您确实需要执行迁移——例如，如果旧模式已经部署——那么您显然需要考虑迁移。

基于浏览，[这](http://mipostel.com/index.php/home/66-core-data-migration-standard-part-1)看起来像是很好的信息。

你最终会在项目中得到你的模式的两个版本，并为 Core Data 提供了足够的信息来在它们之间进行映射。If you were just talking about a field rename then you could achieve that with just the schemas (check out the 'Renaming ID' field under 'Versioning' in the right hand utilities pane of Xcode when a property is selected and you've clicked to查看数据模型检查器，最右边的选项卡）但我不确定这是否可以强制类型。如果不能，那么您还将得到一个映射模型，这是您可以在 Xcode 中编辑的另一个图形化的东西，它肯定可以强制执行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-05-11T11:41:47.313

如果您遇到此类问题，请尝试在您以前未使用过的另一台设备的模拟器中运行该应用程序，看看它是否对您有帮助（即**iPhone SE**而不是 iPhone 7）。如果是这样，那么删除损坏的文件夹应该会有所帮助。**打开终端**并运行以下命令：

```
sudo rm -rf ~/Library/Developer/CoreSimulator/Devices 
```

删除可能已损坏的模拟器数据，

```
sudo rm -rf ~/Library/Developer/XCode/DerivedData/ 
```

删除您应用的数据。

它解决了我的问题。希望能帮助到你！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-08-28T05:56:57.157

我在 Xcode 10 和 Swift 4.2 中遇到了同样的问题。

当我更改`String to Int16`CoreData 的实体时，我会从设备上卸载该应用程序并重新安装它。

它对我有用。

# ruby-on-rails - ruby on rails - 自动化表单信息和填充数据库

> ID：11419679
> 
> 赞同：0
> 
> 时间：2012-07-10T18:35:11.140
> 
> 标签：ruby-on-rails, automation

我创建了一个 ruby​​ on rails 应用程序，并希望自动创建新模型实例。我目前正在使用 python 脚本在许多机器上记录信息，并希望找到一种将这些日志结果发送到 rails 服务器的方法。我需要用我的日志内容填充表单，以便生成相关的数据库条目。

是否有一种简单的方法可以发送包含我想要的日志属性的 HTTP Post 请求，以便创建这些新的模型实例和数据库条目？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T18:46:54.290

```
require "net/http"
require "uri"

uri = URI.parse("http://example.com/search")

# Shortcut
response = Net::HTTP.post_form(uri, {"q" => "My query", "per_page" => "50"}) 
```

[http://www.rubyinside.com/nethttp-cheat-sheet-2940.html](http://www.rubyinside.com/nethttp-cheat-sheet-2940.html)

# php - PHP Shopify 致命错误：未捕获的异常“ShopifyClientCurlException”和消息“SSL 连接超时”

> ID：11419682
> 
> 赞同：2
> 
> 时间：2012-07-10T18:35:17.637
> 
> 标签：php, ssl, ssl-certificate, shopify

刚从 shopfiy 开始，这是我的第一个堆栈帖子！

我正在尝试设置 Sandeeps Shetty 的“PHP 中的简单 Shopify API 客户端”，可在此处找到：

[https://github.com/sandeepshetty/shopify_client](https://github.com/sandeepshetty/shopify_client)

我在日志中不断看到以下错误（我已删除完整路径和 api 凭据）：

> PHP 致命错误：在 shopify_client/shopify_client.php:67\n堆栈跟踪：\n#0 shopwriters/shopify_client/shopify_client.php(36): shopify_api('POST', ' https://baumbac...', NULL, Array)\n#1 /home/matt/public_html/projects/shopwriters/public_html/index.php(20): oauth_access_token('shopurl...', 'xxx. ..', 'xxx...', 'xxx...')\n#2 {main}\n 在第 67 行的 shopify_client/shopify_client.php 中抛出

有人有类似的问题吗？我在 Ubuntu 12.04 上。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T20:05:30.623

解决此问题的方法是添加：

CURLOPT_SSLVERSION => 3

到 $default_curl_opts 数组中的 wcurl.php。

感谢所有帮助过的人！

# add-in - 如何在PowerPoint文本框中将宽度设置为未定义

> ID：11419683
> 
> 赞同：0
> 
> 时间：2012-07-10T18:35:22.807
> 
> 标签：add-in, powerpoint

我正在尝试将文本框的宽度设置为未定义，因此它将在 PowerPoint 2007 中表现为自动调整我使用以下内容：

```
shape = slide.Shapes.AddTextbox(Office.MsoTextOrientation.msoTextOrientationHorizontal, left, top, 0f, 0f); 
```

它在 pp-2007 中的幻灯片上看起来很好但是当我在 pp-2010 中打开演示文稿时，我得到了文本的所有字符。当您将宽度设置为 0 时，这可能是意料之中的，但在 pp-2007 中看起来不错。我也使用以下方法，但无济于事：

```
shape.AutoSize = PpAutoSize.ppAutoSizeShapeToFitText; 
```

我也试过这样：

```
shape = slide.Shapes.AddTextbox(Office.MsoTextOrientation.msoTextOrientationHorizontal, left, top, float.NaN, 0f); 
```

但这只会给我一个很长的文本框

谁可以帮我这个事？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T05:03:54.877

您应该禁用自动换行，然后 PowerPoint 将根据需要调整文本框的大小：

```
shape.TextFrame.AutoSize = ppAutoSizeShapeToFitText
shape.TextFrame.WordWrap = msoFalse
shape.TextFrame.TextRange.Text = "Text" 
```

# regex - 用于替换多个元素的通用 RegEx 模式

> ID：11419684
> 
> 赞同：0
> 
> 时间：2012-07-10T18:35:23.300
> 
> 标签：regex, perl

在我的 Perl 程序中，我在数组中有以下要消除的变量：

```
$array[0] = "--_000_41DADE848657754488503BD616F1ADE607250A88abmail2k7adventure_--";
$array[1] = "--_000_41DADE848657754488503BD616F1ADE607317EE6abmail2k7adventure_";
$array[2] = "--_000_41DADE848657754488503BD616F1ADE6073C5F3Babmail2k7adventure_--"; 
```

对于不同的输入数据，我得到与此相似的不同元素。如何通过使用单个正则表达式来消除它们？我是正则表达式的初学者，我尝试了以下方法，但它按预期工作。

```
$array =~ s/--_000_ .* adventure_--//g; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T18:50:02.603

如果要从列表中删除特定类型的元素，可以使用[`grep`](http://perldoc.perl.org/functions/grep.html)：

```
my @new = grep !/^--_000_ .* adventure_--/, @array; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T18:53:03.077

我猜您想删除与该模式匹配的所有元素？

还有其他速记方法可以做到这一点，但最容易理解的可能是在清空旧数组的同时创建一个新数组，或者使用循环：

```
my @newarray= ();
while ($elem = shift @array) {
    push @newarray, $elem if ($elem !~ /^--_000_ .* adventure_--/);
} 
```

或使用 grep：

```
my @newarray = grep !/^--_000_ .* adventure_--/, @array; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T18:53:13.003

好吧，这听起来可能很愚蠢。但是下面的模式奏效了！

```
$array=~ s/--_000_.*adventure_//g; 
```

我刚刚删除了 .* 周围的空格

# jquery - 使用 Jquery mobile for web app 像 Android 一样发出警报和通知

> ID：11419686
> 
> 赞同：4
> 
> 时间：2012-07-10T18:35:40.203
> 
> 标签：jquery, jquery-mobile

我想使用 HTML5、CSS3、JQuery Mobile 开发一个 Web 应用程序（以便它应该在所有平台上运行）。

我的要求是，当用户打开选项卡/ipad 等时，用户应该收到警报和通知，如 Android/ios。例如，如果我配置了 Gmail 帐户（或任何其他电子邮件），则在选项卡上，然后当我打开设备时我得到通知我在系统栏中有新的未读消息。然后查看实际消息，将我带到电子邮件。

同样，我想要我的网络应用程序的通知，假设一些批准正在等待，那么即使他没有登录到网络应用程序，它也应该提醒用户。

我们真的可以使用 Jquery Mobile 实现 Web 应用程序的系统警报和通知吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-10T20:37:40.243

目前还没有 API 可以从网站访问移动设备上的通知系统。Mozilla 实际上正在通过他们的 Book to Gecko 项目将其作为标准 API：[https ://wiki.mozilla.org/B2G](https://wiki.mozilla.org/B2G)

如果您创建可以通过设备上的应用商店下载的本机应用程序，那么您可以将通知推送到与您的应用程序用户相关的各个设备。这些通常称为“推送通知”。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-10T19:10:21.200

最简洁的答案是不。与移动操作系统上的所有应用程序一样，浏览器应用程序以“暂停”状态在后台运行。

因此，如果浏览器不是前端运行的应用程序，用户将不会在浏览器中看到您的 Web 应用程序生成的通知。此外，您的 Web 应用程序将无法访问操作系统的功能，就像浏览器一样，无法创建本地通知。

长答案是您可以编写一个 phonegap 应用程序，如@sachleen 建议的那样连接到您的 Web 服务或使用消息推送（从服务器到设备）来通知用户。

您可能会考虑创建一些小部件，例如小部件，其唯一目的是轮询消息并通知用户，从而在单击时打开浏览器。

# bash - 每当输入被击中时调用脚本

> ID：11419689
> 
> 赞同：-2
> 
> 时间：2012-07-10T18:35:47.917
> 
> 标签：bash

每次有人按 Enter 时，如何让 bash 调用（bash）脚本？

我希望每次显示时都会更改提示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T18:39:01.513

有关 PROMPT_COMMAND，请参见 bash 手册页。听起来您将希望在设置 PROMPT_COMMAND 的任何函数中设置 PS1 的值。

# html - 放大和缩小时页脚被剪切

> ID：11419690
> 
> 赞同：0
> 
> 时间：2012-07-10T18:35:51.917
> 
> 标签：html, css

我的网页设计有问题。如果我将包装器的宽度设置为`1280px`，那么如果我放大，页脚将被剪切。但如果我不设置包装器的宽度，那么页脚会在我缩小时被剪切。

关于如何处理这个问题的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T18:58:23.560

尝试为`display: table; width:100%;`您的页脚块设置样式。我希望它会帮助你

# oracle - 左外连接上的 Oracle 索引

> ID：11419692
> 
> 赞同：2
> 
> 时间：2012-07-10T18:35:57.050
> 
> 标签：oracle, optimization, oracle10g, oracle11g

因此，我在 Oracle 11Gr2 中正确/任何使用索引时遇到了一些问题，我试图更好地了解我的解释计划如何与我的查询相关联，以便我可以正确应用索引。运行以下查询时：

```
 SELECT JLOG1.JLOG_KEY,
            JLOG1.SRC_CD,
            JLOG1.JRNL_AMT,
            CASD.CONT_NO,
            SUM (NVL (VJLOG.TDTL_AMT, 0)) TDTL_SUM
       FROM GL_Journal_Logs JLOG1,
            GL_JLOG_Details VJLOG,
            CASE_DATA CASD
      WHERE  VJLOG.JLOG_KEY(+) = JLOG1.JLOG_KEY
            AND CASD.CASE_KEY(+) = JLOG1.CASE_KEY
            AND JLOG1.JRNL_CD = '0'
            AND JLOG1.SRC_CD = '2'
            AND JLOG1.ACCT_IF_CD = '0'
   GROUP BY JLOG1.JLOG_KEY, JLOG1.SRC_CD,JLOG1.JRNL_AMT, CASD.CONT_NO
    HAVING JLOG1.JRNL_AMT <> SUM (NVL (VJLOG.TDTL_AMT, 0)); 
```

我得到以下解释细节：![在此处输入图像描述](../Images/ce04c72db1f7df940777a4c95814eb01.png)

我可以理解，我的联接“键”（JLOG_KEY 或 CASE_KEY）上的索引不一定适用，因为它是外部联接（或者应该是？），但是在 JLOG1（JRNL_CD、SRC_CD、ACCT_IF_CD）上创建索引时，技术上考虑到我的“where”条款，这些会生效吗？

鉴于这种情况，我应该创建任何索引还是有更好的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T21:49:23.353

根据谓词中列的基数，可以在 GL_JLOG_DETAILS 表上使用适当的索引，从而避免全表扫描。覆盖索引可能完全避免访问数据页：

```
ON GL_JOURNAL_LOGS (JRNL_CD,SRC_CD,ACCT_IF_CD,JLOG_KEY,CASE_KEY,JRNL_AMT) 
```

（您可能希望在该索引中首先具有最具选择性的谓词的列）

此外，您的查询可能能够有效利用索引

```
ON GL_JLOG_DETAILS (JLOG_KEY, TDTL_AMT) 
```

和

```
ON CASE_DATA (CASE_KEY, CONT_NO) 
```

此外，请确保有关表和索引的统计信息是最新的。

* * *

此外，用于 OUTER JOIN 的 (+) 表示法可能会限制优化器。
Oracle 现在支持 ANSI 样式的连接，这可以让优化器在制定执行计划时有更大的自由度，例如

```
 FROM GL_Journal_Logs JLOG1
  LEFT
  JOIN GL_JLOG_Details VJLOG ON VJLOG.JLOG_KEY = JLOG1.JLOG_KEY
  LEFT
  JOIN CASE_DATA CASD ON CASD.CASE_KEY = JLOG1.CASE_KEY
 WHERE JLOG1.JRNL_CD = '0'
       AND JLOG1.SRC_CD = '2'
       AND JLOG1.ACCT_IF_CD = '0' 
```

# linux - 将 git status 的结果传递给后续命令

> ID：11419698
> 
> 赞同：1
> 
> 时间：2012-07-10T18:36:19.207
> 
> 标签：linux, git, bash, pipe

我的 Git 存储库中有大量活动文件。我所做的一项更改是删除多个目录中的大量图像。我想立即提交该更改，但我不想包含所有活动文件，也不想`git rm myfile.png`为每个图像手动输入。

所以基本上我想做的是`git rm`在所有以`.png`. 我正在尝试通过将结果传递给`git status`into来完成此操作，`git rm`但我无法隔离文件名并使其按我的意愿工作。

这是对管道的正确使用吗？如果是，我需要什么语法？

任何帮助表示赞赏，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T18:39:18.180

如果您已经删除了文件，您可以键入：

`git add -u`

它们将从 git 存储库中删除。

来自`git help add`：

```
-u, --update
           Only match <filepattern> against already tracked files in the index
           rather than the working tree. That means that it will never stage
           new files, but that it will stage modified new contents of tracked
           files and that it will remove files from the index if the
           corresponding files in the working tree have been removed. 
```

# javascript - 显示不再存在的图像？

> ID：11419699
> 
> 赞同：1
> 
> 时间：2012-07-10T18:36:19.557
> 
> 标签：javascript, html, css, image, path

我有一个功能可以在点击时改变一些样式：

```
$('#button1').click(function() { 
        $('#button1').css("background-image","url(../img/menuicons/button1pr.gif)");
        $('#button2').css("background-image","url(../img/menuicons/button2un.gif)");
        return false;
    }); 
```

奇怪的是，当我单击它时，它会返回我本地服务器上甚至不再存在的旧版本按钮的图像。这里发生了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T18:37:42.893

它们很可能保存在浏览器的缓存中。尝试清除浏览器的缓存。

# git - Git GUI 每次打开存储库时都会崩溃

> ID：11419700
> 
> 赞同：16
> 
> 时间：2012-07-10T18:36:21.347
> 
> 标签：git, dll, msysgit

从前几天开始，每次我在存储库中启动 Git GUI 时，它都会显示这个可怕的错误消息并在我单击 OK 后退出：

```
prepare-commit-msg hook failed:

      0 [main] us 0 init_cheap: VirtualAlloc pointer is null, Win32 error 487
AllocationBase 0x0, BaseAddress 0x68560000, RegionSize 0x260000, State 0x10000
C:\Program Files (x86)\Git\bin\sh.exe: *** Couldn't reserve space for cygwin's heap, Win32 error 0

You must correct the above errors before committing. 
```

它仅在 Git GUI 中发生，并且仅在存储库（旧的或新创建的）中发生。Git Bash 中的常用命令（包括提交）工作正常。

卸载并使用较新的软件包重新安装（仅次要版本更改）并没有解决问题。它仍然发生在旧存储库以及新创建的存储库中。

在干净的机器上，这个问题不会重现，所以我猜这是我的盒子上的东西，但我不记得安装了任何有趣的东西。我确实记得在很长一段时间后关闭了我的盒子，所以也许一些 Windows 更新可能触发了这个 - 这也可以解释为什么另一台机器不会受到影响 - 自上次 Win 更新以来已经 2-3 个月了。

任何想法如何阐明这一点？（因为我只能在单机上看到它，所以在我知道这不是我/其他应用程序的错之前，我不想将它提交给官方跟踪器......）

* * *

**第一次评论后**更新：****

 ***   > 如果您删除或重命名挂钩脚本，它是否有效？

    很有趣，但钩子脚本实际上根本不存在（没有钩子脚本存在——.git\hooks 中只有 *.sample 文件）。甚至在其他地方也没有（git 程序目录等）

*   > 跟踪它，这样你就知道它运行了哪些命令——来自 git-bash run`git gui --trace`

    可悲的是，这不会向外壳输出任何内容。行为是一样的。

*   > 也许在那里得到gdb。

    我试过了，但 gdb 没有输出任何有用的东西。但是，我对 GDB 没有任何经验，我可能做错了。我得到了一个[MinGW 的 gdb](http://sourceforge.net/projects/mingw/files/)，从命令提示符运行它，并使用 git.exe 作为参数，然后运行`run gui`​​. gdb 没有输出任何有趣的东西：

    ```
    (gdb) run gui
    Starting program: C:\Program Files (x86)\Git\bin\git.exe gu
    [New Thread 8264.0x1ce4]
    [New Thread 8264.0x394]
    [Inferior 1 (process 8264) exited with code 01]
    (gdb) 
    ```

    但我几乎可以肯定我做错了，所以建议非常受欢迎:)

*   > 确保您没有安装 cygwin，或者至少它根本不存在于您的 PATH 中

    我确实安装了 cygwin（就像我一直安装的那样，在 git 崩溃之前）。在 Cygwin 中，我在路径中只有一些 *.bat 启动器和一些 *.dll 文件，但我已经与 ProcMon 确认它没有触及它们，即使我将它们从路径中删除，我仍然会遇到同样的崩溃。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-04-07T10:45:55.930

这对我有用。

> [http://www.trinitycore.org/f/topic/5194-msysgit-couldnt-reserve-space-for-cygwins-heap/](http://www.trinitycore.org/f/topic/5194-msysgit-couldnt-reserve-space-for-cygwins-heap/)
> 
> 解决方案：
> 
> 更改 msysgit.dll 的基地址
> 
> `c:\msysgit\bin>rebase.exe -b 0x50000000 msys-1.0.dll`

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-05-20T17:13:59.647

我也遇到过这个问题

我已经解决了

[http://support.code-red-tech.com/CodeRedWiki/VirtualAllocPointerNull](http://support.code-red-tech.com/CodeRedWiki/VirtualAllocPointerNull)

显然这是由某些功能引起的，替换 dll 可以为大多数人修复它

如果网站关闭 -

* * *

**虚拟分配指针为空**

在极少数情况下，运行 make 可能会导致类似于以下的错误：

```
0 [main] us 0 init_cheap: VirtualAlloc pointer is null, Win32 error 487
AllocationBase 0x0, BaseAddress 0x71110000, RegionSize 0x350000, State 0x10000
\msys\bin\make.exe: *** Couldn't reserve space for cygwin's heap, Win32 error 0 
```

这是一个影响极少数客户的问题，并且取决于他们同时运行的其他应用程序。

这是由我们用来为产品提供构建环境的 MSYS 二进制文件中的一个特性引起的。

如果发生这种情况，您可以将文件 \msys\bin\msys-1.0.dll 替换为附加 zip 文件中的文件。[msys-1.0.zip](http://support.code-red-tech.com/CodeRedWiki/VirtualAllocPointerNull?action=AttachFile&do=view&target=msys-1.0.zip)

请注意，这并不能解决问题，而是移动 DLL 基地址。不幸的是，这个替换 DLL 也可能发生错误，这再次取决于正在运行的其他应用程序。

* * *

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-12T08:41:10.603

在另一个 Windows 更新和操作系统重新启动后，问题消失了。

似乎其中一个更新引入了一个已在另一个更新中修复的错误。或者它可能是一个“月相”错误。

我想我们永远不会知道...

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-06-25T10:28:34.887

我有同样的问题。对我有用的解决方案与 XandrGuard 建议的解决方案几乎相同

```
c:\msysgit\bin>rebase.exe -b 0x50000000 msys-1.0.dll 
```

解决方案在这里解释[http://jakob.engbloms.se/archives/1403](http://jakob.engbloms.se/archives/1403)

对我来说，解决方案略有不同。它是

```
C:\Program Files (x86)\Git\bin>rebase.exe -b 0x50000000 msys-1.0.dll 
```

希望它可以帮助那些试图用谷歌搜索问题的人

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-11-04T16:48:47.090

我也遇到了这个问题，这是因为 MacType 干扰了 bash.exe 和 msys1.0.dll。（MacType 是一个用于 Windows 的字体平滑程序，它试图模拟 OS-X 样式字体光栅化。）仅在我需要它的程序上启用 MacType，而不是在试图加载 bash.exe 的 Console2 窗口上启用 MacType 解决了这个问题。

也许这会帮助其他人修复错误。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-01-21T12:38:14.763

在 Win64 机器上安装 1.8.0 后，我遇到了同样的问题。我通过删除 1.8.0 并安装 1.7.11 解决了这个问题

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-01-03T16:09:14.553

`msys-1.0.dll`只需在您的驱动器上搜索所有内容`C:\`，然后将 Git 使用的内容放在第一位。

就我而言，我只是更改了以下顺序：

```
C:\prgs\Gow\Gow-0.7.0\bin\msys-1.0.dll
C:\prgs\git\PortableGit-1.8.5.2-preview20131230\bin\msys-1.0.dll 
```

通过使 Git 路径`C:\prgs\git\PortableGit-1.8.5.2-preview20131230\bin\`在 my 中排在第一位`%PATH%`，错误消息消失了！

无需重新启动，甚至无需更改 DOS 会话。
一旦`%PATH%`在那个 DOS 会话中更新，git 命令就可以工作了。

* * *

旁注，关于 gdb：

随着 Git 2.25.2（2020 年 3 月）增加了更好的 gdb 调试体验。

请参阅[Johannes Schindelin ( ) 的](https://github.com/dscho)[提交 08809c0](https://github.com/git/git/commit/08809c09aa1351b603e9c55734105cd2e3c24c41)（2020 年 2 月 13 日[）](https://github.com/dscho)。^(（由)^([Junio C Hamano 合并 --](https://github.com/gitster)) ^([--](https://github.com/gitster))^在^([提交 e154451](https://github.com/git/git/commit/e154451a2feb7aa8c265aa7b9b0a67c7676e12c6))^(中，2020 年 2 月 17 日）)[`dscho`](https://github.com/dscho)
^([`gitster`](https://github.com/gitster))

> ## [`mingw`](https://github.com/git/git/commit/08809c09aa1351b603e9c55734105cd2e3c24c41): 添加辅助函数以将 GDB 附加到当前进程
> 
> ^(签字人：约翰内斯·辛德林)
> 
> 在调试 Git 时，进程的交叉生成可能会使事情变得相当困难，尤其是当一个 Unix shell 脚本被混入调用 a`git.exe`然后段错误的混合中时。
> 
> 为了帮助调试这些事情，我们引入了`open_in_gdb()`可以在发生段错误的代码位置（或尽可能接近）调用的函数；这将打开一个新的 MinTTY 窗口，其中包含已附加到当前进程的 GDB。
> 
> 灵感来自 Derrick Stolee。

然后[新功能`open_in_gdb()`](https://github.com/git/git/blob/08809c09aa1351b603e9c55734105cd2e3c24c41/compat/mingw.h#L594-L602)有评论：

```
/*
 * For debugging: if a problem occurs, say, in a Git process that is spawned
 * from another Git process which in turn is spawned from yet another Git
 * process, it can be quite daunting to figure out what is going on.
 *
 * Call this function to open a new MinTTY (this assumes you are in Git for
 * Windows' SDK) with a GDB that attaches to the current process right away.
 */ 
```**

# libxml2 - 使用 libxml2 在 XML 节点中存储字符串以外的数据类型

> ID：11419701
> 
> 赞同：0
> 
> 时间：2012-07-10T18:36:21.547
> 
> 标签：libxml2

看起来，libxml2 只有 4 种数据类型，即 xmlChar、xmlDoc、xmlNodePtr 和 xml-Node。我想在 XML 的节点中保留整数和双精度，我是否必须每次都将它们转换为字符串，或者有没有其他方法可以在没有任何转换的情况下做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T22:28:33.140

您必须将它们转换为字符串。XML 没有“整数”或“浮点”的概念，它都是文本。有一些技术可以将这些概念置于顶层（如 XSD），但 XML 本身不能。

同样，在解析 XML 并获取节点的内容时，只能获取必须自己转换的字符串。

# c++ - 获取所选子菜单项的值

> ID：11419702
> 
> 赞同：0
> 
> 时间：2012-07-10T18:36:23.027
> 
> 标签：c++, mfc

我在 C++ 中使用 MFC 开发了一个菜单、子菜单。子菜单是动态的并且不断变化。选择动态子菜单后，如何获取其值？我真的被困在这里了。我会很感激的！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T19:02:11.153

保留您分配给每个子菜单项的一系列连续资源 ID。然后用于[`ON_COMMAND_RANGE`](http://msdn.microsoft.com/en-us/library/9ab3z9tb.aspx)响应项目选择。

# javascript - 在条件 .js.erb 文件中使用控制器设置变量

> ID：11419705
> 
> 赞同：3
> 
> 时间：2012-07-10T18:36:26.427
> 
> 标签：javascript, ruby-on-rails, ruby-on-rails-3

我有一个控制器，其动作被远程击中，之后我的`controller_action.js.erb`文件运行。

在我的控制器的操作中，我设置了一个变量`@successful = true|false`（true|false 基于函数的返回值）。

在我的 javascript 文件中，我想说`if @successful`并提醒操作成功或提醒操作不成功。

知道怎么做吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T18:47:19.370

尝试这个

```
<%- if @successful %>
   alert('Blabla');
<%- else %>
   alert('Blabal');
<%- end %> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T18:40:30.733

我通常说 HAML，所以这可能不完全正确：

```
if(<%= @successful %>) {
  // do stuff
} else {
  // do other stuff
} 
```

在 HAML 中，它将是：

```
:javascript
  if(#{@successful}) {
    // do stuff
  } else {
    // do other stuff
  } 
```

或者，您可以这样做：

(再培训局)

```
<%- if @successful %>
  // JS code if true
<%- else %>
  // JS code if false
<%- end %> 
```

(哈姆勒)

```
- if @successful
  :javascript
    // JS code if true
- else
  :javascript
    // JS code if false 
```

第一个选项将始终在客户端呈现所有 JS 代码，唯一的区别是 if`true`或`false`is 在`if`子句中。

第二个选项将有条件地仅呈现真假情况的 JS 代码。

# opencart - 隐藏产品描述

> ID：11419706
> 
> 赞同：1
> 
> 时间：2012-07-10T18:36:33.920
> 
> 标签：opencart

当Opencart（产品页面）中的描述很长时如何隐藏产品描述以减少产品页面的负载，但是在单击详细链接后会出现完整的描述。在图片中您可以看到示例，抱歉我的英语不好，谢谢！这是示例图像[示例的链接](http://imglink.ru/pictures/10-07-12/cc935fe9b5c14a7b7bc65932e3b9d623.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T15:24:15.240

**为什么不直接截断它？它将迫使它每次都是适合您的长度！**

转到 catalog/controller/product/category.php 当你看到

```
foreach ($results as $result) {
    if ($result['image']) {
        $image = $this->model_tool_image->resize($result['image'], $this->config->get('config_image_product_width'), $this->config->get('config_image_product_height'));
    } else {
        $image = false;
    } 
```

接下来添加：

```
function truncate($description, $tLimit="20", $break=" ", $pad="...")
{
  if(strlen($string) <= $tlimit) return $string;

  if(false !== ($breakpoint = strpos($string, $break, $tlimit))) {
    if($breakpoint < strlen($string) - 1) {
      $string = substr($string, 0, $breakpoint) . $pad;
    }
   }

   return $description;
 } 
```

随意更改变量：

**$tLimit**是您要允许的字母数。

**$break**是您希望它切断的地方，现在它被设置为在下一个空格处切断。如果你愿意的话，你可以通过放置 $break="" 让它打断单词

**$pad**是您希望它在切断文本后显示的内容。

**如果你真的不想显示任何描述**那么我建议仍然做一些类似于原始脚本的事情。

```
function getDescriptionLength($description, $tLimit="20")
{
  if(strlen($string) <= $tlimit) return $string;

  else {
    $description = NULL;
  }

  return $description;
} 
```

# css - 仅使用 CSS 定位浏览器大小

> ID：11419709
> 
> 赞同：0
> 
> 时间：2012-07-10T18:37:00.373
> 
> 标签：css, internet-explorer

是否有用于浏览器大小的 CSS 选择器。因此，如果浏览器的实例大于 500 像素，我可以设置元素的样式。

**我的目标浏览器是标准模式下**的 IE9 和 IE10 ；所以我只关心这两个浏览器。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T18:45:27.113

当然，您可以使用媒体查询，如下所示：

```
@media screen and (min-width: 500px) { your css goes here } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T18:45:26.750

你不能为此使用css[媒体查询吗？](http://css-tricks.com/css-media-queries/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T18:47:16.023

CSS 中没有用于判断屏幕大小的选择器。但是，如果您不必这样做，我也不会走 Javascript 路线。也许您应该更多地研究 CSS 媒体查询。

> CSS 3 通过更精确地标记样式表来增强对依赖于媒体的样式表的支持。媒体查询由媒体类型和至少一个表达式组成，该表达式通过使用媒体特征（例如宽度、高度和颜色）来限制样式表的范围。媒体查询让内容的呈现可以针对特定范围的输出设备进行定制，而无需更改内容本身。

**参考：**

[https://developer.mozilla.org/en/CSS/Media_queries/](https://developer.mozilla.org/en/CSS/Media_queries/)

[http://www.w3.org/TR/css3-mediaqueries/](http://www.w3.org/TR/css3-mediaqueries/)

[http://css-tricks.com/css-media-queries/](http://css-tricks.com/css-media-queries/)

# asp.net - 在登录控件上加载 gif

> ID：11419710
> 
> 赞同：0
> 
> 时间：2012-07-10T18:37:01.393
> 
> 标签：asp.net

我希望我的登录控件在用户登录时显示“正在加载...” gif。

为了让我的登录控件显示我想要的方式，我将其转换为模板。然后我按照这里看到的指导：[here](https://stackoverflow.com/questions/7235722/display-a-gif-while-asp-net-page-loads)和[here](http://www.ezzylearning.com/tutorial.aspx?tid=8964873)在回发期间显示gif。

我现在有几个问题。当我尝试提交无效登录时，页面会按预期执行：它显示加载 gif，然后在确定登录无效后 gif 消失。但是现在即使我输入了有效的登录名，它也会说它无效。我在编辑登录模板时是否搞砸了？

我的另一个问题是我有风格化的“keepLo​​gged”复选框。样式是由 JQuery 在头部添加的。当您第一次进入页面时它会正确显示，但在回发之后，当登录显示无效时，不会应用样式并且它是一个正常的复选框。

这是代码：

```
<script>

    $(document).ready(function () {

        $("input[type=checkbox]").addClass("mini-switch");

    });

</script>

<form id="form1" runat="server" class="form with-margin" name="login-form">
            <div>
                <asp:ScriptManager ID="ScriptManager1" runat="server"></asp:ScriptManager>

                <asp:UpdatePanel ID="updateLogin" runat="server" DefaultButton="mainLogin$LoginButton">
                <ContentTemplate>
                <asp:Login ID="mainLogin" runat="server" RenderOuterTable="False" onloginerror="mainLogin_LoginError">
                    <LayoutTemplate>
                        <div class="block-header">Please login</div>
                        <asp:ValidationSummary ID="LoginUserValidationSummary" runat="server"  
                        ValidationGroup="mainLogin"  CssClass="message error no-margin"
                        DisplayMode="List"/>

                        <input type="hidden" name="a" id="a" value="send">
                        <p class="inline-small-label">
                            <asp:Label ID="UserNameLabel" runat="server" AssociatedControlID="UserName"><span class="big">User name</span></asp:Label>

                            <asp:TextBox ID="UserName" runat="server" CssClass='full-width'></asp:TextBox>

                            <asp:RequiredFieldValidator ID="UserNameRequired" runat="server" 
                                ControlToValidate="UserName" ErrorMessage="User Name is required." 
                                ToolTip="User Name is required." ValidationGroup="mainLogin" 
                                Display="None" />
                        </p>
                        <p class="inline-small-label">
                            <asp:Label ID="PasswordLabel" runat="server" AssociatedControlID="Password"><span class="big">Password</span></asp:Label>

                            <asp:TextBox ID="Password" runat="server" TextMode="Password" CssClass='full-width'></asp:TextBox>

                            <asp:RequiredFieldValidator ID="PasswordRequired" runat="server" 
                                ControlToValidate="Password" ErrorMessage="Password is required." 
                                ToolTip="Password is required." ValidationGroup="mainLogin" 
                                Display="None" />                
                        </p>

                        <asp:Button ID="LoginButton" runat="server"  CommandName="Login" 
                        Text="Log In" type="button"
                        ValidationGroup="mainLogin" onclick="LoginButton_Click" CSSClass='button float-right'/>

                        <p class="input-height">
                            <asp:CheckBox ID="keepLogged" runat="server" Checked="True"/> 

                            <asp:Label ID="Label1" runat="server" Text="Keep me logged in" AssociatedControlID="keepLogged" CssClass="inline"></asp:Label>
                        </p>

                    </LayoutTemplate>

                </asp:Login>
                </ContentTemplate>
                </asp:UpdatePanel>

          </div>
            <asp:UpdateProgress ID="UpdateProgress1" runat="server">
                    <ProgressTemplate>
                      <img alt="" src="images/lock.gif" /> <strong>Logging In...</strong>
                   </ProgressTemplate>
            </asp:UpdateProgress> 
</form> 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T19:12:53.933

我认为内置的 ASP.NET 登录控件不能在 UpdatePanel 中正常工作。不过，还有其他方法可以达到相同的效果。这里有[一篇文章](http://weblogs.asp.net/andrewfrederick/archive/2008/02/18/a-client-side-ajax-login-for-asp-net.aspx)可以帮助您入门。

# c++ - devkitPPC (Wii) 开发的不同语言

> ID：11419711
> 
> 赞同：1
> 
> 时间：2012-07-10T18:37:05.633
> 
> 标签：c++, c, programming-languages, devkitpro

[到目前为止， devkitpro](http://devkitpro.org/)非常适合开发。但是，我想知道是否有任何其他库，无论是独立的还是基于 devkitpro 的，可以包含其他语言供我探索

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T18:39:56.160

`wii.py`: Wii 的 Python 扩展。不幸的是缺乏足够的文档（就像大多数开源社区项目一样），但仍然可以正常工作。

**参考**：[https ://github.com/icefire/Wii.py](https://github.com/icefire/Wii.py)

`luafwii`: Wii 的 Lua 播放器。由于它是 Lua，因此最适合涉及 C 基础但在顶部包含插件或脚本的项目。尽管 Lua 包含一个内置的垃圾收集器，但这个库还包含对图像和声音的显式释放。

**参考**： http: [//luafwii.googlecode.com/svn/trunk/](http://luafwii.googlecode.com/svn/trunk/)

享受和好运！

# c# - 动作和功能 没有显式转换

> ID：11419716
> 
> 赞同：7
> 
> 时间：2012-07-10T18:37:24.933
> 
> 标签：c#, generics, signature, void

我有一个类必须接收方法才能调用它们以及执行其他执行。这些方法必须多次使用，并且适用于许多不同的用户，所以越简单越好。

为了解决这个问题，我有两种方法：

```
 void Receive(Action func)
    {
        // Do some things.
        func();
    }

    T Receive<T>(Func<T> func)
    {
        // Do some things.
        return func();
    } 
```

（实际上我有 34 种方法可以接收定义的任何不同的 Action 或 Func。）

然后，我希望能够将任何方法作为参数传递给 Receive 函数，以便能够执行以下操作：

```
 void Test()
    {
        Receive(A);
        Receive(B);
    }

    void A()
    {
    }

    int B()
    {
        return 0;
    } 
```

就像这样，它在 Receive(B) 中给了我一个错误：

```
The call is ambiguous between the following methods or properties: 'Class1.Receive(System.Action)' and 'Class1.Receive<int>(System.Func<int>)' 
```

好的，签名是相同的（尽管如果我不使用这些方法则不会显示错误）。

如果我删除 Receive(Action) 方法，我会在 Receive(A) 中收到以下错误：

```
The type arguments for method 'Class1.Receive<T>(System.Func<T>)' cannot be inferred from the usage. Try specifying the type arguments explicitly. 
```

但是在这种情况下我的类型是无效的，并且禁止将其用作泛型参数。

那么，有没有办法让我的 Receive 方法不使用任何明确的 Action 或 Func 转换？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T18:46:01.590

不，您不能这样做 -`void`不是`Func<T>`. 你能做的最好的就是把它包装在一个`Func<object>`：

```
Receive(() => { A(); return null; }); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-10T18:42:49.317

尝试明确指定泛型类型参数：

```
Receive<int>(B); 
```

# c# - ORA-06550: 在 ASP.NET 中调用 oracle 包内的函数时出现错误的参数数量或类型错误

> ID：11419722
> 
> 赞同：1
> 
> 时间：2012-07-10T18:37:45.653
> 
> 标签：c#, asp.net, oracle, plsql

我在 Oracle 10g 数据库中名为 TEST 的 Oracle 包中有一个函数

```
FUNCTION GetEname(P_ename IN VARCHAR2) RETURN VARCHAR2 AS
retVal VARCHAR2(10);
BEGIN
retVal := SUBSTR(P_ename, 3, INSTR(P_ename, ':', 1, 2) - 3);

RETURN RetVal;

END GetEntDefIEIDFromEname; 
```

我创建了一个 ASP.net 页面，并且在 page_load 中有以下代码：

```
String strResult = "";
        try
        {   
            oracleConn.ConnectionString = ConfigurationManager.ConnectionStrings["OracleDatabase"].ConnectionString;
            oracleConn.Open();
            OracleCommand orclCmnd = new OracleCommand();
            orclCmnd.Connection = oracleConn;
            orclCmnd.CommandText = "TEST.GetEname";
            orclCmnd.CommandType = CommandType.StoredProcedure;

            OracleParameter ename = new OracleParameter();
            ename.ParameterName = "ename";
            ename.OracleType = OracleType.VarChar;
            ename.Direction = ParameterDirection.Input;
            ename.Value = "0:490330";
            orclCmnd.Parameters.Add(ename);

            strResult = (String)orclCmnd.ExecuteOracleScalar();

            oracleConn.Close();
            oracleConn.Dispose();

            lbl1.Text = "Result of  " + strResult;
        }                
        catch (Exception ex)
        {
            Console.Out.WriteLine(ex.ToString());
            oracleConn.Close();
        } 
```

当我运行代码时，我收到以下错误消息：

> "ORA-06550：第 1 行，第 7 列：\nPLS-00306：调用 'GETENAME' 时参数的数量或类型错误\nORA-06550：第 1 行，第 7 列：\nPL/SQL：语句被忽略\n"} System.Exception {System.Data.OracleClient.OracleException}

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-10T19:08:50.013

您在代码中为参数使用了不同的名称。尝试改变

```
ename.ParameterName = "ename"; 
```

到

```
ename.ParameterName = "P_ename"; 
```

还

您需要为输出值添加一个参数：

```
OracleParameter result = new OracleParameter();
result.OracleType = OracleType.VarChar;
result.Direction = ParameterDirection.ReturnValue;
orclCmnd.Parameters.Add(result); 
```

并在使用 ExecuteNonQuery 调用函数后从参数中获取值：

```
orclCmnd.ExecuteNonQuery();
strResult = result.Value.ToString(); 
```

# jquery - jQuery：如何对后端进行 ajax 调用，而不是在单击按钮时提交表单？

> ID：11419728
> 
> 赞同：1
> 
> 时间：2012-07-10T18:38:04.850
> 
> 标签：jquery

我在这里有一个 jsfiddle：http: [//jsfiddle.net/rDe9V/](http://jsfiddle.net/rDe9V/)

**重现步骤 ：**

1.  在文本框中输入
2.  单击“添加到播放列表”并在文本框中添加一些文本
3.  点击“新建”

警告框似乎不起作用。相关的jQuery函数在这里

```
$(function() {
    $('form input[type="text"]').live('keyup', function() {
        var val = $.trim(this.value);
        $('form .create-playlist-button').prop('disabled', val.length == 0)
    });
    $('form .create-playlist-button').click(function(e) {
        var title = $(e.target).closest('.video-detail').find('.title').text();
        alert(title);
    });
}); 
```

请帮助理解为什么这不起作用。

* * *

**更新**

所以不允许每天问超过 6 个问题。所以我在这里更新

我对小提琴进行了更改，现在就在这里-http: [//jsfiddle.net/rDe9V/2/](http://jsfiddle.net/rDe9V/2/)

```
 $('form input[type="text"]').live('keyup', function() {
        var val = $.trim(this.value);
        $('form .create-playlist-button').prop('disabled', val.length == 0).click(function(e){
            var title = $(e.target).closest('.video-detail').find('.title').text();
            alert(title);
        });
    }); 
```

**需要**

*   单击按钮时，不应发布表单

* * *

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T18:43:14.520

“新建”按钮正在提交表单。

您必须终止提交该表单的事件，否则它将被提交并且您的页面将自行刷新，发布（或获取）表单数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T18:55:28.477

您的点击事件未注册，您应该将按钮定义为按钮而不是提交。

```
var clickAdded = false;

// creating new playlist
$(function() {
        $('form input[type="text"]').live('keyup', function() {
            var val = $.trim(this.value);
            $('form .create-playlist-button').prop('disabled', val.length == 0);
            if (val.length > 0 && !clickAdded) {
                $('form .create-playlist-button').click(function(e){
                     var title = $(e.target).closest('.video-detail').find('.title').text();
                     alert(title); return false;
                 });
                clickAdded = true;
            }

        });}); 
```

# java - Eclipse 在构造方法中说“未处理的异常” - 如何避免这种情况？

> ID：11419729
> 
> 赞同：1
> 
> 时间：2012-07-10T18:38:10.467
> 
> 标签：java, android, eclipse, exception

在 C# .NET 领域呆了很长时间后，我将回到 Java (Android)，并试图记住各种特质。

让我陷入困境的一个是这个；如果我的类未能正确初始化，我将在构造函数中抛出异常，如下所示：

```
 // Constructor
    public CountdownDictionary(JSONArray jsValues, ArrayList<String> returnFieldList)
{
    this.DictionaryType = getDictionaryTypeFromValues(jsValues);
    if (this.DictionaryType == CountdownDictionaryTypes.Unknown)
    {
        throw new Exception("Unknown dictionary type");
    }
} 
```

Eclipse 给出编译时错误

> **未处理的异常类型Exception**

这让我很困惑；因为我该如何处理异常？我*不想*处理此类中的异常，我希望它不被处理，以便它冒泡到调用者并且他们可以处理它！

我错过了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T18:39:58.373

您在构造函数中抛出异常，但没有在方法签名中指定 throws 子句，这是编译时错误，这就是 eclipse 抱怨的原因。以下代码段将解决该问题。

```
 public CountdownDictionary(JSONArray jsValues, ArrayList<String> returnFieldList) throws Exception 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T18:40:12.273

~~在方法~~构造函数`throws`的头部添加子句：

 ~~```
public CountdownDictionary(JSONArray jsValues, ArrayList<String> returnFieldList) throws Exception 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-10T18:43:10.100

您需要通过附加到您的方法签名来指示您的构造函数可以抛出异常的编译器`throws Exception`，因此任何调用者都知道他们必须处理它。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-10T18:43:30.360

另一种选择是抛出运行时异常而不是检查异常——尽管这取决于此异常是否仅由于程序员错误而引发。

如果不是程序员错误，通常是在构造函数中抛出异常的错误调用。只抛出异常类型的异常通常也是一个糟糕的调用。这是因为您应该在更高级别提供特定于应用程序的行为来处理这种不良行为。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-10T18:40:28.890

只需`throws Exception`在您的左大括号之前添加。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-10T18:40:33.017

如果您希望`Exception`由调用方法处理，请使用：

```
public CountdownDictionary(JSONArray jsValues, ArrayList<String> returnFieldList) throws Exception {
    // ...
} 
```

这样，此方法显示为抛出`Exception`并强制任何调用代码处理它。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-07-10T18:41:18.170

以下行：`throw new Exception("Unknown dictionary type");`抛出一个在程序中任何地方都没有被捕获的异常。

相反，请执行以下操作：

```
try {
    throw new Exception("Unknown dictionary type");
}catch(Exception e) {
    e.printStackTrace();
} 
```

或者

```
public CountdownDictionary(JSONArray jsValues, ArrayList<String> returnFieldList) throws Exception 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-07-10T18:49:44.057

试试这个...

我通常使用它并记住如下：

投掷和投掷的结合。

该方法**抛出错误的异常**。

在条件内部，它会**抛出新的异常对象。**

例如：

```
public CountdownDictionary(JSONArray jsValues, ArrayList<String> returnFieldList) throws Exception
{
    this.DictionaryType = getDictionaryTypeFromValues(jsValues);
    if (this.DictionaryType == CountdownDictionaryTypes.Unknown)
    {
        throw new Exception("Unknown dictionary type");
    }
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-07-10T19:24:10.043

我会这样做：

```
// Constructor
public CountdownDictionary(JSONArray jsValues, List<String> returnFieldList)
{
    if (jsValues == null) {
        throw new IllegalArgumentException("JSON array cannot be null");
    }
    if (returnFieldList == null) {
        throw new IllegalArgumentException("Return field list cannot be null");
    }
    this.DictionaryType = getDictionaryTypeFromValues(jsValues);
    if (this.DictionaryType == CountdownDictionaryTypes.Unknown)
    {
        throw new IllegalArgumentException("Unknown dictionary type");
    }
} 
```

不需要 throws 子句，因为它是未经检查的异常。~~

# php - 直播不工作

> ID：11419730
> 
> 赞同：1
> 
> 时间：2012-07-10T18:38:10.590
> 
> 标签：php, ffmpeg, video-streaming, html5-video

我正在使用 FFmpeg 来捕获我的屏幕：

```
ffmpeg -f dshow -i video="UScreenCapture" -r 5 -s 640x480 -acodec libmp3lame -ac 1 -vcodec mpeg 4 -vtag divx -q 10 -f mpegts tcp://127.0.0.1:1234 
```

所以让它流到某个地方。接受者脚本：

```
 error_reporting(E_ALL); /* Allow the script to hang around waiting for connections. */
 set_time_limit(30); /* Turn on implicit output flushing so we see what we're getting as it comes in. */
 ob_implicit_flush();

$address = '127.0.0.1';
$port = 1234;
$outfile = dirname(__FILE__)."/output.flv";
$ofp = fopen($outfile, 'wb');

 if (($sock = socket_create(AF_INET, SOCK_STREAM, SOL_TCP)) === false) { echo "socket_create() failed: reason: " . socket_strerror(socket_last_error()) . "\n"; sleep (5); die; }
 if (socket_bind($sock, $address, $port) === false) { echo "socket_bind() failed: reason: " . socket_strerror(socket_last_error($sock)) . "\n"; sleep (5); die; }
 if (socket_listen($sock, 5) === false) { echo "socket_listen() failed: reason: " . socket_strerror(socket_last_error($sock)) . "\n"; sleep (5); die; }
 if (($msgsock = socket_accept($sock)) === false) { echo "socket_accept() failed: reason: " . socket_strerror(socket_last_error($sock)) . "\n"; sleep (5); break; }
 do {
    $a = '';
    socket_recv ($msgsock, $a, 65536, MSG_WAITALL);
    fwrite ($ofp, $a);
    //echo strlen($a)."\r\n";
 } while (true); 
```

它似乎将这些东西保存到磁盘上。现在来了html：

我真的不知道该怎么做，但基于一个例子：

```
<video src="/output.flv"></video> 
```

但它什么也没做。如果我想流式传输实时传入的内容，那又是怎么回事？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T06:37:09.393

HTML 5 视频将不支持 Flv 格式 HTML5 将仅支持以下格式视频

```
.mp4 = H.264 + AAC
.ogg/.ogv = Theora + Vorbis
.webm = VP8 + Vorbis 
```

在以下站点中学习 HTML5 视频基础知识 [HTML5 视频基础知识](http://www.html5rocks.com/en/tutorials/video/basics/)

如果你想播放 flv，你必须使用 flash 或 Flex 程序或一些 flv 播放器，如 flowplayer

# perl - 选项输入的值无效（预期数字）

> ID：11419733
> 
> 赞同：-1
> 
> 时间：2012-07-10T18:38:24.423
> 
> 标签：perl, command-line-arguments, getopt-long

我通过命令行传递输入文件位置和输出文件位置，我收到这些错误：

> 值“C:\Users\Mruppe2\workspace\Perl”对选项输入无效（预期数字）
> 值“C:\temp\output.csv”对选项输出无效（预期扩展数字）
> 
> 5MinInterval2.pl 第 154 行没有这样的文件或目录。

命令行输入如下所示：

> perl 5MinInterval2.pl -i C:\Users\Mruppe2\workspace\Perl 5 Essential Training\MPMStats Project\error_log -o C:\temp\output.csv

这是我的代码：

```
# This program parses a error_log for necessary information and outputs a CSV file with the highest busy value for each 5 minute interval.  

use strict;
use warnings;
use Getopt::Long;  

#Define argument types
my $input = '';
my $output = '';
GetOptions('input=i' => \$input,'output=o' => \$output); 

# Ignore theses values
my %ignorables = map { $_ => 1 } qw([notice mpmstats: rdy bsy rd wr ka log dns cls bsy: in);  

# Subroutine to pull the line containing AP22,SM22, and Apache stats
sub findLines {
    my($item,@result)=("");

    # Iterates over the lines in the file, putting each into $_ 
    while ($input) {      

        # Select only those fields that have the word 'notice'
        if (/\[notice/) {          

            # Place those lines with the word 'rdy' on the next line
            if (/\brdy\b/){
                push @result,"$item\n";
                $item="";

            }
            else {
                $item.=",";
            }

            # Split the line into fields, separated by spaces, skip the %ignorables         
            my @line = grep { not defined $ignorables{$_} } split /\s+/;    

            # More cleanup         
            s/|^\[|notice|[]]//g for @line; # remove unnecessary elements from the array

            # Output the line.  
            @line = join(",", @line);          
            s/,,/,/g for @line;
            map $item.=$_, @line;
            }
        } 
        @result
    }  

# Place the subroutine contents into an array
my @array = &findLines;
my $line;

# Create an subroutine to place the contents of AP22, SM22, and Apache in the correct order
sub Program{
    my @return = ();
    chomp @array;

    my ($dow,$mon,$day,$time,$year,$rdy,$bsy,$rd,$wr,$ka,$log,$dns,$cls,$dow2,$mon2,$day2,$time2,$year2,$val1,$mod1,$val2,$mod2,$val3,$mod3,$ap22,$sm22,$apache);
    foreach $line (@array){
    ($dow,$mon,$day,$time,$year,$rdy,$bsy,$rd,$wr,$ka,$log,$dns,$cls,$dow2,$mon2,$day2,$time2,$year2,$val1,$mod1,$val2,$mod2,$val3,$mod3) = ((split /[,]/, $line),("")x24); 
    $line = "$dow,$mon,$day,$time,$year,$rdy,$bsy,$rd,$wr,$ka,$log,$dns,$cls";

    # For lines with no variables
    if ($mod1 eq ""){
        $line = $line.","."0".","."0".","."0";
    }

    # For lines with only SM22
    if ($mod1 eq "mod_sm22.cpp" && $mod2 eq ""){
        $line = $line.",".$val1.","."0".","."0";
    }

    # For lines with only AP22
    if ($mod1 eq "mod_was_ap22_http.c" && $mod2 eq "" && $mod3 eq ""){
        $line = $line.",".$val1.","."0".","."0";
    }

    # For lines with AP22-SM22-Apache
    if ($mod1 eq "mod_was_ap22_http.c" && $mod2 eq "mod_sm22.cpp" && $mod3 eq "ApacheModule.cpp"){
        $line = $line.",".$val1.",".$val2.",".$val3;
    }

    # For lines with SM22-AP22-Apache
    if ($mod1 eq "mod_sm22.cpp" && $mod2 eq "mod_was_ap22_http.c" && $mod3 eq "ApacheModule.cpp"){
        $line = $line.",".$val2.",".$val1.",".$val3;
    }

    # For lines with AP22-SM22
    if ($mod1 eq "mod_was_ap22_http.c" && $mod2 eq "mod_sm22.cpp" && $mod3 eq ""){
        $line = $line.",".$val1.",".$val2.","."0";
    }

    # For lines with SM22-AP22
    if ($mod1 eq "mod_sm22.cpp" && $mod2 eq "mod_was_ap22_http.c" && $mod3 eq ""){
        $line = $line.",".$val2.",".$val1.","."0";
    }

    # For lines with SM22-Apache
    if ($mod1 eq "mod_sm22.cpp" && $mod2 eq "ApacheModule.cpp" && $mod3 eq ""){
        $line = $line.","."0".",".$val2.",".$val2;
    }

    # For lines with AP22-Apache
    if ($mod1 eq "mod_was_ap22_http.c" && $mod2 eq "ApacheModule.cpp" && $mod3 eq ""){
        $line = $line.",".$val1.","."0".",".$val2;
    }

    # Push the array out of the subroutine
    ($dow,$mon,$day,$time,$year,$rdy,$bsy,$rd,$wr,$ka,$log,$dns,$cls,$ap22,$sm22,$apache) = ((split/[,]/, $line),("")x16);
    push @return, ("$line\n");
    }
    return @return;
}

# Initialize the hashes
my %interval; 
my %month; @month{qw/ jan feb mar apr may jun jul aug sep oct nov dec /} = '01' .. '12';  

# Put the contents of the subroutine into an array
my @finalArray = &Program;

# Delete the first line of the array
$finalArray[0] = "";

# Create a new array without the first line
my @lastArray = @finalArray;

# Select only those lines with the highest busy count in each 5 minute interval
my @maxima;  
for my $record (@lastArray) {    
    my @fields = $record =~ /([^,\s]+)/g;   
    next unless @fields;    
    my @range = @fields[1..4];
    $range[2] =~ s|(\d+):\d\d$|5*int($1/5)|e;  
    my $range = join ' ', @range;   
    my $value = $fields[5];  
    my ($dow, $mon, $day, $time, $year, $rdy, $by, $rd, $wr, $ka, $log, $dns, $cls, $ap22, $sm22, $apache) = split /[,]/, $record;
    my $record2 = "$range,$rdy,$by,$rd,$wr,$ka,$log,$dns,$cls,$ap22,$sm22,$apache";
    if (@maxima == 0 or $range ne $maxima[-1][0]) {     
        push @maxima, [$range, $value, $record2];   
    }   
    else {     
        @{$maxima[-1]}[1,2] = ($value, $record2) if $maxima[-1][1] > $value;   
    } 
} 

# Print the contents to the CSV file
open my $fh, ">", $output or die $!;
print $fh "Time Interval,rdy,bsy,rd,wr,ka,log,dns,cls,ap22,sm22,apache\n";
print $fh $_->[2] for @maxima; 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T19:03:53.083

好吧，从外观上看，您确实将“输入”声明为整数：

```
... 'input=i' ... 
```

也许您正在寻找字符串：

```
... 'input=s' .... 
```

# c# - 使用正则表达式在匹配前后拆分 XML 字符串

> ID：11419734
> 
> 赞同：2
> 
> 时间：2012-07-10T18:38:27.630
> 
> 标签：c#, regex, string, split

我正在尝试格式化 XML 文档，所以我将一个字符串传递给一个方法，例如：

```
"<foo><subfoo><subsubfoo>content</subsubfoo></subfoo><subfoo/></foo>" 
```

我正在尝试根据找到标签来拆分它。我想将每个元素（标签或内容）拆分为一个唯一的字符串，例如：

```
"<foo>", "<subfoo>", "<subsubfoo>", "content", "</subsubfoo>", "</subfoo>", "<subfoo/>", "</foo>" 
```

为此，我使用以下代码：

```
string findTagString = "(?<=<.*?>)";
Regex findTag = new Regex(findTagString);
List<string> textList = findTag.Split(text).ToList(); 
```

上面的代码工作正常，除了它没有将“内容”拆分成自己的字符串，而是：

```
"<foo>", "<subfoo>", "<subsubfoo>", "content</subsubfoo>", "</subfoo>", "<subfoo/>", "</foo>" 
```

有没有办法重写正则表达式来完成这一点，将不匹配项拆分成自己的字符串？

或者，改写：是否可以在正则表达式匹配之前和之后拆分字符串？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T18:48:14.440

使用此正则表达式`(<.*?>)|(.+?(?=<|$))` 并将匹配项转换为`List<string>`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T20:03:15.483

由于忽略了 html 规范，`<>`因此没有任何意义。

可以简单地通过拆分来完成 this `(?<=>)|(?=<)`。

这产生

```
<foo>
<subfoo>
<subsubfoo>
content
</subsubfoo>
</subfoo>
<subfoo/>
</foo> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-10T18:51:41.043

XML 不是正则语言（可以用 Pumping Lemma 证明），因此 XML 不能用正则表达式解析。

我建议你找到一个好的 XML 库并使用它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-10T19:05:40.423

您可以通过 regex 或 xpath 执行此操作，具体取决于 xml 的复杂性。

如果你想使用正则表达式，你可能想做这样的事情：

```
public static string xml = "<foo><subfoo><subsubfoo>content</subsubfoo></subfoo><subfoo/></foo>";
public static Regex re = new Regex(@"\<([A-Za-z0-9]*)\b[^>]*\>(.*?)\</\1\>");

static string GetContentViaRegex()
{
    string content = xml;
    while (re.IsMatch(content))
    {
        Match match = re.Match(content);
        if (!match.Success)
            break;

        content = match.Groups[2].Value;
    }
    return content;
} 
```

正则表达式基本上搜索匹配的开始/结束标签（你不想匹配类似的东西`<foo>stuff here, possibly including more tags</bar>`），并且你不断钻研匹配的标签，直到你找到最里面的内容。此正则表达式假定任何标签上都没有属性。

如果您想通过 xpath 执行此操作，您可以执行以下操作：

```
static string GetContentViaXPath()
{
    var nav = new XPathDocument(new StringReader(xml)).CreateNavigator();
    return nav.SelectSingleNode("//text()").Value;
} 
```

它基本上抓住了它在文档中命中的第一个文本节点。（除非您确定输入始终有效，否则您需要添加错误检查）

# javascript - Javascript'对象没有方法'错误

> ID：11419735
> 
> 赞同：2
> 
> 时间：2012-07-10T18:38:32.310
> 
> 标签：javascript, node.js, prototype, runtime-error

这似乎是本网站上的一个热门问题，但以前的答案并没有解决这个问题的实例。

我在 node.js 服务器上有一个游戏引擎的开始，但是当我设置它时，我在`loop`方法中出现以下错误：`Object #<Timer> has no method update`.

我以为我正在将原型设置为具有更新方法`GameEngine.prototype.update = function(){ ... };`

解决这个问题的任何帮助将不胜感激。谢谢你。

这是整个代码：

```
function GameEngine(){
    this.fps = 1000/60;
    this.deltaTime = 0;
    this.lastUpdateTime = 0;
    this.entities = [];
}

GameEngine.prototype.update = function(){
    for(var x in this.entities){
        this.entities[x].update();
    }
}

GameEngine.prototype.loop = function(){
    var now = Date.now();
    this.deltaTime = now - this.lastUpdateTime;
    this.update();
    this.lastUpdateTime = now;
}

GameEngine.prototype.start = function(){
    setInterval(this.loop, this.fps);
}

GameEngine.prototype.addEntity = function(entity){
    this.entities.push(entity);
}

var game = new GameEngine();
game.start(); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-10T18:42:33.013

> 这似乎是这个网站上的一个热门问题

是的。

> 但以前的答案并没有解决这个问题的实例。

真的吗？你找到了哪些？

* * *

*当函数*由超时/事件侦听器/等执行时，“方法”（[`this`](https://developer.mozilla.org/en/JavaScript/Reference/Operators/this)）的上下文会丢失。

 *```
GameEngine.prototype.start = function(){
    var that = this;
    setInterval(function(){
       that.loop();
    }, this.fps);
} 
```

或者

```
GameEngine.prototype.start = function(){
    setInterval(this.loop.bind(this), this.fps);
} 
```*

# javascript - 在javascript函数中调用Jsp页面

> ID：11419736
> 
> 赞同：0
> 
> 时间：2012-07-10T18:38:36.443
> 
> 标签：javascript, jquery, jsp

我想在不使用此代码的情况下在 javascript 函数中调用 jsp 页面

```
<form method="post" action="createxml.jsp"> 
```

我使用这样的电话，但它不工作。

```
function questype()
{
createxml.jsp
} 
```

帮我调用这个页面。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T18:50:26.233

你在使用任何框架吗？

如果没有，“Action”值就是返回 JSP 的 JSP url。

示例：在您的 xml 文件中，您有如下内容：

```
 <servlet>
        <servlet-name>createXml.jsp</servlet-name>
        <jsp-file>/createXml.jsp</jsp-file>
    </servlet>
    <servlet-mapping>
        <servlet-name>createXml.jsp</servlet-name>
        <url-pattern>/createXml.jsp</url-pattern>
    </servlet-mapping> 
```

稍后，您需要执行以下操作：

```
function questype()
{

    $.each($('form[action='createXml.jsp']').serializeArray(), function(i, field) {
        values[field.name] = field.value;
    });
    $("<DIV WHENEVER YOU WANT TO PUT THE JSP RESULT>").load("createxml.jsp", values);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T18:40:21.823

由于您使用的是 jQuery：

```
function questype()
{
    var postVars = {};
    $.post("createxml.jsp", postVars, function(data){
         /** DO SOMETHING WITH RETURN INFO **/
    });
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T18:40:37.793

好吧，要么您需要创建一个 ajax 查询、一个锚标记或某种形式。

# ruby - 禁用 Ruby 代码的代码辅助

> ID：11419739
> 
> 赞同：1
> 
> 时间：2012-07-10T18:38:57.970
> 
> 标签：ruby, autocomplete, aptana

我看到了许多禁用 Ruby 以外语言的代码辅助的解决方案（一个[示例](https://stackoverflow.com/questions/6988785/disable-code-assist-in-aptana-studio-3)，它不起作用），但是在使用 Ruby 时我找不到任何禁用它的方法。这是与 Aptana Studio 3.2.0 一起使用的。

有没有办法，即使在引擎盖下，把它关掉，我错过了？

# css - 更少的 CSS：具有可变数量参数的 Mixins

> ID：11419741
> 
> 赞同：26
> 
> 时间：2012-07-10T18:39:02.450
> 
> 标签：css, less, css-transitions, less-mixins

LESS 允许参数混合，例如：

```
.transition(@property, @duration){
    transition:         @property @duration;
    -moz-transition:    @property @duration; /* Firefox 4 */
    -webkit-transition: @property @duration; /* Safari and Chrome */
    -o-transition:      @property @duration; /* Opera */
} 
```

但是，这并不总是适用于转换等属性。如果您尝试进行多个转换并尝试多次调用 mixin，则最后一个 mixin 会覆盖所有先前定义的转换。这是因为定义多个转换的正确 CSS3 语法是：

```
... {
    transition: @property1 @duration1, @property2 @duration2, ...;
} 
```

我能想到的将多个转换定义为 mixin 的唯一方法是重载 mixin：

```
.transition(@property, @duration){...}
.transition(@property, @duration, @prop2, @dur2){...}
.transition(@property, @duration, @prop2, @dur2, @prop3, @dur3){...} 
```

有没有更健壮和简洁的方法来定义过渡混合以接受可变数量的参数并构造适当的过渡 CSS？

***背景：**有时我想在多个属性上进行转换；例如，a`:hover`可能会触发背景颜色、框阴影、文本颜色等的转换...*

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-11-21T09:57:13.270

在此处查看我的答案：[多个属性在 mixins 中被视为单独的参数](https://stackoverflow.com/questions/5510568/problems-with-arguments-in-css-mixins-using-less/13490523#13490523)

摘要：将此mixin用于可变数量的参数：

```
.transition (@value1,@value2:X,...)
{
    @value: ~`"@{arguments}".replace(/[\[\]]|\,\sX/g, '')`;

    -webkit-transition: @value;
    -moz-transition: @value;
    -ms-transition: @value;
    -o-transition: @value;
    transition: @value;
} 
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-07-19T01:22:46.110

## LESS 1.3.3+ 的更新

输出是相同的，但请注意在新版本的 LESS 中如何通过使用分号而不是转义字符串来传递属性的区别：

```
@prop1: color;
@prop2: opacity;
@dur1: 3s;
@dur2: 4s;

.transition(@transString: 0) when not (@transString = 0) {
    transition:         @transString;
    -moz-transition:    @transString; /* Firefox 4 */
    -webkit-transition: @transString; /* Safari and Chrome */
    -o-transition:      @transString; /* Opera */
}

.class1 {.transition();}
.class2 {.transition(width 2s, height 2s;);}
                                        ^
                                   semicolon here
.class3 {.transition(@prop1 @dur1, @prop2 @dur2;);}
                                               ^
                                         semicolon here 
```

分号强制将逗号作为列表分隔符而不是参数分隔符进行评估。

## LESS pre 1.3.3 的一种解决方案

我们将正确的属性参数构建为 的字符串`transition`，然后使用转义值 ( `~`) 运算符将其转换为所需的专有语法。通过使用字符串插值 ( `@{variableName}`)，我们甚至可以将变量嵌入到进程中，但实际输入需要采用转义字符串的形式。

**更少的代码**

```
@prop1: color;
@prop2: opacity;
@dur1: 3s;
@dur2: 4s;

.transition(@transString: 0) when not (@transString = 0) {
    transition:         @transString;
    -moz-transition:    @transString; /* Firefox 4 */
    -webkit-transition: @transString; /* Safari and Chrome */
    -o-transition:      @transString; /* Opera */
}

.class1 {.transition();}
.class2 {.transition(~" width 2s, height 2s");}
.class3 {.transition(~" @{prop1} @{dur1}, @{prop2} @{dur2}");} 
```

**CSS 输出**

注意： no`.class1`是输出，因为保护表达式确保输入了某些内容（尽管它不能防止不正确的输入）。

```
.class2 {
  transition: width 2s, height 2s;
  -moz-transition: width 2s, height 2s;
  -webkit-transition: width 2s, height 2s;
  -o-transition: width 2s, height 2s;
}
.class3 {
  transition: color 3s, opacity 4s;
  -moz-transition: color 3s, opacity 4s;
  -webkit-transition: color 3s, opacity 4s;
  -o-transition: color 3s, opacity 4s;
} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-10-04T06:46:35.130

> **注意：**添加此答案并不是为了说明现有答案不正确或已过时。所有答案都是有效的，并且仍然有效。这只是提供了一种不同的方法，在我看来，它更复杂一点，但在如何将每个参数称为键值对方面也更灵活。

**使用此方法的优点：**当需要对值执行任何额外操作（例如添加`unit`as或执行任何额外数学运算等）或为也动态添加供应商前缀时`deg`，此方法将变得更加有用。例如，有时您可能只想将输入属性作为输入属性传递给 mixin，但想为 the和为etc添加。`px``@property``transform``-webkit-transform``-webkit-transition``-moz-transform``-moz-transition`

在这个方法中，我们利用了`...`允许我们向 mixin 传递可变数量的参数、循环传递`extract`的每个参数、属性名称以及附加参数（如持续时间、旋转度等）的特性然后使用 Less 提供的[**合并功能**](http://lesscss.org/features/#merge-feature)来连接为属性指定的值。

*   用[`+:`](http://lesscss.org/features/#merge-feature-comma)逗号连接属性值，并在 Less v1.5.0 中引入
*   用[`+_:`](http://lesscss.org/features/#merge-feature-space)空格连接属性值，并在 Less v1.7.0 中引入。

```
.transition(@args...){
    .loop-args(@argCount) when (@argCount > 0) {
        .loop-args(@argCount - 1);
        @arg: extract(@args, @argCount);
        @property: extract(@arg,1);
        @duration: extract(@arg,2);
        -webkit-transition+: @property @duration;
        -moz-transition+: @property @duration;
        -o-transition+: @property @duration;
        transition+: @property @duration;
    }
    .loop-args(length(@args));    
}

div{
    .transition(background, 1s; border-color, 2s; color, 2s);
}

.transform(@args...){
    .loop-args(@argCount) when (@argCount > 0) {
        .loop-args(@argCount - 1);
        @arg: extract(@args, @argCount);
        @property: extract(@arg,1);
        @param: extract(@arg,2);
        -webkit-transform+_: ~"@{property}(@{param})";
        -moz-transform+_: ~"@{property}(@{param})";
        -o-transform+_: ~"@{property}(@{param})";
        transform+_: ~"@{property}(@{param})";
    }
    .loop-args(length(@args));    
}

div#div2{
    .transform(rotate, 20deg; scale, 1.5; translateX, 10px);
} 
```

编译后的上述代码将产生以下输出：

```
div {
    -webkit-transition: background 1s, border-color 2s, color 2s;
    -moz-transition: background 1s, border-color 2s, color 2s;
    -o-transition: background 1s, border-color 2s, color 2s;
    transition: background 1s, border-color 2s, color 2s;
}
div#div2 {
    -webkit-transform: rotate(20deg) scale(1.5) translateX(10px);
    -moz-transform: rotate(20deg) scale(1.5) translateX(10px);
    -o-transform: rotate(20deg) scale(1.5) translateX(10px);
    transform: rotate(20deg) scale(1.5) translateX(10px);
} 
```

**相关答案：**

*   [这](https://stackoverflow.com/q/21061361/2712740)是来自[7-phases-max](https://stackoverflow.com/users/2712740/seven-phases-max)的答案，它更多地解释了如何使用此方法自动添加供应商前缀，就像我在优势段落中提到的那样。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-05-13T21:00:43.120

在 LESS 中，您可以使用逗号或分号分隔参数。对于包含逗号的单个值，您可以用分号终止该单个值，以便将列表作为单个值发送，如下所示：

```
.class {
  .background-size(100%, auto;);
} 
```

对于多个值，只需使用以下语法：

```
/* Example mixin */
.set-font-properties(@font-family, @size) {  
  font-family: @font-family;
  font-size: @size;
}
/* Usage with comma-separated values */
.class {
  .set-font-properties(Arial, sans-serif; 16px);
}

/* Output */
.class {
  font-family: Arial, sans-serif;
  font-size: 16px;
} 
```

十分简单！

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-01-07T14:29:49.863

This should work, I think:

```
.transition(...) {
    transition:         @arguments;
    -moz-transition:    @arguments; /* Firefox 4 */
    -webkit-transition: @arguments; /* Safari and Chrome */
    -o-transition:      @arguments; /* Opera */
} 
```

`...` - is a valid less syntax, not something to be replaced.

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2014-06-10T15:02:44.297

从 LESS 1.4 开始，文档 ( [http://lesscss.org/features/#mixins-parametric-feature-mixins-with-multiple-parameters](http://lesscss.org/features/#mixins-parametric-feature-mixins-with-multiple-parameters) ) 提出了处理此问题的正确方法：

> 使用逗号作为 mixin 分隔符使得无法创建逗号分隔的列表作为参数。另一方面，如果编译器在 mixin 调用或声明中看到至少一个分号，它假定参数用分号分隔并且所有逗号都属于 css 列表：

具体来说，**mixin**：

```
.transition(@prop-or-props) {
    -webkit-transition: @prop-or-props;
       -moz-transition: @prop-or-props;
         -o-transition: @prop-or-props;
            transition: @prop-or-props;
} 
```

**用法**：

```
.transition(opacity .2s, transform .3s, -webkit-transform .3s;); 
```

请注意，多个属性用逗号分隔，结尾的分号导致逗号分隔的列表在 mixin 中被视为单个参数。

`rest...`使用参数定义 mixin 并能够提取任意长度参数的每个元素以进行单独处理会更好，但我正在考虑的用例是添加供应商前缀来转换转换（所以我可以调用它只是简单地自动添加`.transition(opacity .2s, transform .3s)`并`-webkit-transform`自动添加位），也许这最好由不同的实用程序来处理（例如，gulp-autoprefixer）。

# java - JNI UnsatisfiedLinkError .jnilib 不喜欢

> ID：11419746
> 
> 赞同：2
> 
> 时间：2012-07-10T18:39:27.073
> 
> 标签：java, macos, java-native-interface, unsatisfiedlinkerror

我在 java 中链接 jnilib 时遇到了一些问题。我收到 `Exception in thread "main" java.lang.UnsatisfiedLinkError: no ***.jnlib in java.library.path`。通过我的研究，我发现这可能是由于 java 不知道该文件是什么引起的。所以，我告诉它它在 Mac 文件夹中。我还将该文件添加到项目中的每个其他文件夹中。这些都没有帮助。该项目是跨平台的，所以当我告诉java查看windows文件夹时，我在windows上尝试了dll加载得很好。我不明白为什么这会在 Windows 而不是 Mac 上工作。欢迎任何想法或想法。

异常输出为：

```
 Exception in thread "main" java.lang.UnsatisfiedLinkError: no libhidapi-jni-64.jnilib in java.library.path
        at java.lang.ClassLoader.loadLibrary(ClassLoader.java:1758) 
        at java.lang.Runtime.loadLibrary0(Runtime.java:823)
        at java.lang.System.loadLibrary(System.java:1045)
        at webstart.OmronIO.<init>(OmronIO.java:30)
        at webstart.Omron.main(Omron.java:13) 
```

java.library.path 是：/Volumes/UNTITLED/javahidapi/mac。

jinlib 的路径是：/Volumes/UNTITLED/javahidapi/mac。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T19:21:36.850

在 OSX 上，环境变量 DYLD_LIBRARY_PATH 用于查找共享库（包括 .jnilib）。该变量用于初始化 java.library.path。

如果您在尝试 System.loadLibrary() 时输出 java.library.path 的值，您将看到为您尝试加载的库搜索的目录列表。

**编辑**

另请参阅[http://create-lab-commons.googlecode.com/svn-history/r222/trunk/java/lib/HIDAPI/README.txt](http://create-lab-commons.googlecode.com/svn-history/r222/trunk/java/lib/HIDAPI/README.txt)，这似乎适用于您尝试加载的特定库（hidapi )，以及您尝试加载它的方式 (webstart)。

# c# - 在源的可见属性中隐藏gridview超链接，而不是隐藏代码

> ID：11419749
> 
> 赞同：0
> 
> 时间：2012-07-10T18:39:31.597
> 
> 标签：c#, asp.net

我有一个带有 itemtemplate 的 gridview，其中有一个超链接控件。如果数据库中的项目返回 null，我想隐藏超链接控件：

```
 <ItemTemplate>
                                   <asp:HyperLink ID="hlSugar" Visible=<% DataBinder.Eval(Container, "DataItem.CaseID")==null %> ToolTip="View the issue in SugarCRM." Target="_blank" runat="server" NavigateUrl='<%# "http://myPath&record=" + DataBinder.Eval(Container, "DataItem.CaseID") %>' Text="Issue"></asp:HyperLink>
                            </ItemTemplate> 
```

不确定我可以做的语法

```
Visible = <% iif(databinder.eval(container, "dataItem.caseid")==null, false, true) %> 
```

不知道如何使语法正确。我基本上想检查我的 `DataItem.CaseID 是否为空，如果是则隐藏此字段。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T18:52:38.387

我最终使用了这个： `Visible='<%# Eval("SugarCaseID") != DBNull.Value %>'`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T18:45:25.533

`visible='<%# Eval("dataItem.caseid") != null) %>'`

试一试

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T18:45:30.327

你可以这样做

```
bool ShowLink(obj data)
{ 

   if(data!=null) {return true; } return false;
} 
```

aspx：

```
<asp:HyperLink ID="hlSugar" Visible='<%# ShowLink(Eval("CaseID"))%>' 
 ToolTip="View the issue in SugarCRM." Target="_blank" runat="server" 
 NavigateUrl='<%# "http://myPath&record=" 
 + DataBinder.Eval(Container, "DataItem.CaseID") %>' Text="Issue">
</asp:HyperLink> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-10T18:49:04.500

用这个

```
<asp:HyperLink ID="hlSugar" Visible='<%# Convert.ToBoolean(Eval("DataItem.CaseID").ToString() == "0") %>' ToolTip="View the issue in SugarCRM." Target="_blank" runat="server" NavigateUrl='<%# "http://myPath&record=" + DataBinder.Eval(Container, "DataItem.CaseID") %>' Text="Issue" /> 
```

参考： [ListView ItemTemplate 的 .aspx 文件中的条件](https://stackoverflow.com/questions/5072061/conditions-within-aspx-file-for-listview-itemtemplate)

# asp.net-mvc - 对象引用未设置为对象的实例 - 部分视图

> ID：11419753
> 
> 赞同：0
> 
> 时间：2012-07-10T18:39:51.470
> 
> 标签：asp.net-mvc, partial-views, strongly-typed-view, html.renderpartial

我有一个强类型的局部视图，当我启动主视图时，它给了我“对象引用未设置为对象的实例”错误。我知道我还没有传递任何参数，但是有没有办法处理这个错误？

主视图：

```
<%@ Page Title="" Language="C#" MasterPageFile="~/Views/Shared/Site.Master" Inherits="System.Web.Mvc.ViewPage<dynamic>" %>

<asp:Content ID="Content1" ContentPlaceHolderID="TitleContent" runat="server">
    Test Form
</asp:Content>

<asp:Content ID="Content2" ContentPlaceHolderID="MainContent" runat="server">

<div id="partial">
<% Html.RenderPartial("DisplayPartial"); %>
</div>

</asp:Content> 
```

局部视图：

```
<%@ Control Language="C#" Inherits="System.Web.Mvc.ViewUserControl<IEnumerable<Student.Models.vwStudent>>" %>

<% foreach (var item in Model) {
           if (item == null) continue; %>

        <tr>            
            <td>
                <%: item.Item1%>
            </td>
            <td>
                <%: item.Item2%>
            </td>
        </tr>

    <% } %>

    </table> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T18:42:47.197

您必须将一些模型传递给您的部分视图，因为它需要一个实例`IEnumerable<Student.Models.vwStudent>`

```
<% Html.RenderPartial("DisplayPartial", model); %> 
```

或者，如果模型不为空，您可以检查局部视图。

```
<%@ Control Language="C#" Inherits="System.Web.Mvc.ViewUserControl<IEnumerable<Student.Models.vwStudent>>" %>

<% if (Model != null) {
     foreach (var item in Model) {
           if (item == null) continue; %>

        <tr>            
            <td>
                <%: item.Item1%>
            </td>
            <td>
                <%: item.Item2%>
            </td>
        </tr>

    <% }
} %>

    </table> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T18:44:15.160

如果在没有 Model 的情况下需要渲染这个局部视图，当然可以在 foreach 循环之前测试 Model 不为空

```
if (Model != null)
    foreach (...) 
```

# load-balancing - 使用 Apache Traffic Server 进行负载平衡

> ID：11419754
> 
> 赞同：0
> 
> 时间：2012-07-10T18:39:51.743
> 
> 标签：load-balancing, apache-traffic-server

我希望将 Apache Traffic Server 用于其反向代理功能，但我还需要它在服务器集群之间进行负载平衡。该文档提到了负载平衡，但我找不到有关它的任何详细信息。有人可以确认一种或另一种方式，如果它支持它，请您提供指向文档的指针。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T18:42:11.230

[根据文档](http://httpd.apache.org/docs/2.2/mod/mod_proxy_balancer.html)，您将需要 mod_proxy 和 mod_proxy_balancer

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-10T15:13:41.353

开箱即用的 Apache Traffic Server 仅支持使用 dns 解析到多个来源的循环负载平衡。

有一个插件可以提供更高级的平衡功能：

[https://github.com/apache/trafficserver/tree/master/plugins/experimental/balancer](https://github.com/apache/trafficserver/tree/master/plugins/experimental/balancer)

# objective-c - 前向声明

> ID：11419756
> 
> 赞同：0
> 
> 时间：2012-07-10T18:39:57.910
> 
> 标签：objective-c, forward-declaration

当我遇到一些错误时，我正在构建一个应用程序。在做了一些研究后，我发现原因是因为我正在使用 2 个文件，彼此`#import`之间。我读到解决这个问题的方法是使用前向声明，但我找不到一个很好的例子来说明如何做到这一点。

这就是我所拥有的。

RootViewController.h

```
#import <UIKit/UIKit.h>
#import "FirstDetailViewController.h"

@protocol SubstitutableDetailViewController
- (void)showRootPopoverButtonItem:(UIBarButtonItem *)barButtonItem;
- (void)invalidateRootPopoverButtonItem:(UIBarButtonItem *)barButtonItem;
@end

@interface RootViewController : UITableViewController <UISplitViewControllerDelegate, FirstDetailViewControllerDelegate>{

    UISplitViewController *splitViewController;

    UIPopoverController *popoverController;    
    UIBarButtonItem *rootPopoverButtonItem;

    NSMutableArray *logMessages;
}

@property (nonatomic, assign) IBOutlet UISplitViewController *splitViewController;

@property (nonatomic, retain) UIPopoverController *popoverController;
@property (nonatomic, retain) UIBarButtonItem *rootPopoverButtonItem;

@end 
```

FirstViewDetailController.h

```
#import <UIKit/UIKit.h>
#import "RootViewController.h

//test2
@protocol FirstDetailViewControllerDelegate <NSObject>
- (void)addItemViewController:(FirstDetailViewController *)controller didFinishEnteringItem:(NSString *)item;
@end
//end test2

@interface FirstDetailViewController : UIViewController <SubstitutableDetailViewController> {

    //for the output
    IBOutlet UITextView *outputView;

    UIToolbar *navigationBar;

}

@property (nonatomic, retain) IBOutlet UIToolbar *navigationBar;

//test
@property(nonatomic, retain) NSString *message;
//end test

@property (nonatomic, retain) id <FirstDetailViewControllerDelegate> delegate;

@end 
```

我知道我需要替换`#import`为`@class`，但我是否对这两种情况都这样做？另外，我已经`#import "FirstDetailViewController.h"`在 RootViewController.m 文件中，所以我也将其切换到那里吗？

我有点困惑，所以任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T18:45:03.840

如果它只是您需要的指针，那么前向声明将是解决方案，但是您正在每个类中实现另一个标头的协议。

我的建议是在其他一些头文件中声明您的协议，例如`MyProtocols.h`并将其包含在您的两个 .h 文件中，而不是控制器的头文件中。

附带说明一下，对一个委托人进行强引用或保留引用并不是真正的标准做法，因为这很容易导致保留周期，从而导致内存泄漏

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T18:47:26.523

代替

`#import "FirstDetailViewController.h"` 和

`@class FirstDetailViewController;`

* * *

代替

`#import "RootViewController.h"`和

`@class RootViewController;`

* * *

在 RootViewController.m 中，确保你有

```
#import "RootViewController.h"

#import "FirstDetailViewController.h" 
```

* * *

在 FirstDetailViewController.h 确保你有

```
#import "FirstDetailViewController.h"

#import "RootViewController.h" 
```

编辑：哎呀错过了协议参考...... Dan F的答案是正确的

# nginx - nginx proxy_pass 和 couchdb 的问题

> ID：11419759
> 
> 赞同：2
> 
> 时间：2012-07-10T18:40:09.203
> 
> 标签：nginx, couchdb, proxypass

我想使用 nginx 在端口 80 上服务 couchdb。我基本上像这样设置nginx conf文件：

```
upstream couchdb {
    server 127.0.0.1:5984;
}

server {
    listen 0.0.0.0:80;
    server_name example.com;
    access_log /path/to/log/couchdb.log;

    location / {
        add_header 'Access-Control-Allow-Origin' '*';
        proxy_pass http://couchdb;
        proxy_set_header Host $host;
        proxy_redirect off;
    }
} 
```

除特殊情况外，该配置似乎有效。当我输入时，`http://example.com/_utils/`我进入了 couchdb 实例，但是如果我输入`http://example.com/_utils`（注意缺少尾部斜杠），我什么也得不到，因为我被重定向到`http://couchdb/_utils`. 请注意，两者都`http://example.com:5984/_utils/`可以`http://example.com:5984/_utils`正常工作。

我的 WAG 是 nginx 配置的问题，但我不确定是怎么回事。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T19:46:34.733

看来罪魁祸首是`proxy_redirect off;`。你为什么关掉它？

# jquery - 使用 jQuery 更改默认单选按钮

> ID：11419764
> 
> 赞同：0
> 
> 时间：2012-07-10T18:40:22.970
> 
> 标签：jquery, radio-button, onload

我有一个带有插件的 wordpress 站点，它给了我 2 个单选按钮。它们是 Yes 和 No。因为 Yes 的值高于 No，所以插件默认选择 No。对于我网站的访问者来说，是的将是最常见的答案。这就是为什么我正在寻找一些在页面加载后选择另一个单选按钮的代码。在谷歌搜索、复制和粘贴之后，我想出了这个：

```
<script type='text/javascript'>
            $(document).ready(function(){
            var $radios = $('input:radio[name=vraag]');
                $radios.filter('[value=Yes]').attr('checked', true);
            });
        </script> 
```

我已经把它放在我的 wordpress 模板中，但它什么也没做。我对 jquery 或 javascript 一无所知，我只知道一点基本的 HTML，所以我迫切需要一些指导。任何人都可以指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-04-26T11:32:14.407

**在document.ready 函数**中使用以下代码作为默认选择选项

 **```
$("input:radio[value='PM']").attr("checked","checked"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T18:49:26.350

在 jQuery 中你可以做到这一点。

HTML

```
<input type='radio' name='type' class='radio-buttons' id='yes'>Yes
<input type='radio' name='type' class='radio-buttons' id='no'>No 
```

Javascript

```
$(function(){ //shorthand for $(document).ready(function(){
   $('#no').removeAttr("checked"); // selects id no and unchecks it
   $('#yes').attr('checked', true);  // selects id yes and checks it
}); 
```

编辑：

Javascript

```
$(function(){
   // This will switch all radio buttons on the page, assuming you only have those 2.
   $radio_buttons = $('input:radio');
   $radio_buttons.each(function(){
      if ($(this).is(':checked')){
         $(this).prop('checked', false);
      }
      else{
         $(this).prop('checked', true);
      }
   }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T18:29:24.427

让我回答我自己的问题。不幸的是，FERMIS 的解决方案对我不起作用。通过更多的搜索，我发现了一些不仅有效的东西，bit 使用单选按钮的值，因此甚至应该使用超过 2 个单选按钮。这是代码

$(document).ready(function(){ $('input[value="Yes"]').attr('checked', 'checked');

简单而简短，但有效:)**

# c# - 类设计：如何创建具有嵌套对象的类？

> ID：11419765
> 
> 赞同：0
> 
> 时间：2012-07-10T18:40:23.123
> 
> 标签：c#

我目前正在开发一个客户端库，用于使用 Newegg 提供的文档连接到 Newegg，并且对类设计有疑问。

在使用各种 API（即 NetSuite 和亚马逊的 MWS）时，我遇到了这样使用的类：

```
 recToFulfill.packageList = new ItemFulfillmentPackageList();
 recToFulfill.packageList.package = new ItemFulfillmentPackage[ifitemlist.item.Length];
 recToFulfill.packageList.package[i] = new ItemFulfillmentPackage();
 recToFulfill.packageList.package[i].packageWeightSpecified = true;
 recToFulfill.packageList.package[i].packageTrackingNumber = "trackingNumber"; 
```

我的问题是：如何*正确*设计上面的嵌套对象？我以前从来没有担心过这个，所以我不确定从哪里看，或者从哪里开始。

我需要弄清楚的一点是这样的（取自提供的 API 文档）：

```
<UpdateOrderStatusInfo>
    <IsSuccess></IsSuccess>
    <Result>
        <OrderNumber></OrderNumber>
        <SellerID></SellerID>
        <OrderStatus></OrderStatus>
    </Result>
</UpdateOrderStatusInfo> 
```

所有字段都是字符串类型，除了订单号是一个整数。

我目前有这个：

```
 public class UpdateOrderStatusInfo
{
    public string IsSuccess { get; set; }
    public int OrderNumber { get; set; }
    public string SellerID { get; set; }
    public string OrderStatus { get; set; }
} 
```

但是返回的 XML Response 将 Results 作为父节点，在我看来它应该在类本身中表示。我会这样做吗？

```
public UpdateOrderStatusInfo results {get; set;} 
```

如果是这样，子节点到哪里去？

我需要的是能够说的是：

```
UpdateOrderStatusInfo updateInfo = new UpdateOrderStatusInfo();
if(updateInfo.IsSuccess.Equals("true")
{
     Console.WriteLine(updateInfo.Results.OrderStatus);
} 
```

任何帮助或有关从何处获取此信息的建议表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T18:51:50.273

轻松活泼的。如果它没有孩子，它是一个标量属性。如果是这样，它就是它自己的类，并相应地在父类中引用。如果它重复，它就是一个集合，并且像一个类一样被引用（这些是复杂类型，而不是原始类型）。确保在构造函数中初始化它们）。

```
class Program
{
    static void Main(string[] args)
    {
        var myOrder = new UpdateOrderStatusInfo();
        myOrder.IsSuccess = "true";
        myOrder.OrderResult.OrderNumber = 1001;
        myOrder.OrderResult.OrderStatus = "Pending";
        myOrder.OrderResult.SellerID = "69";
    }
}

public class UpdateOrderStatusInfo
{
    public string IsSuccess { get; set; }
    public Result OrderResult { get; set; }
    public UpdateOrderStatusInfo()
    {
        OrderResult = new Result();
    }
}

public class Result
{
    public int OrderNumber { get; set; }
    public string SellerID { get; set; }
    public string OrderStatus { get; set; }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T18:54:03.317

您需要将 定义`Result`为一个单独的类，无论您想要什么，然后添加一个`Result`属性作为该类型。Result 类可以在命名空间级别定义，或者，如果您不太可能在其他任何地方单独使用它，您可以将类定义嵌套在`UpdateOrderStatusInfo`类中：

```
public class UpdateOrderStatusInfo
{
    public class UpdateOrderResult
    {
        public int OrderNumber { get; set; }
        public string SellerID { get; set; }
        public string OrderStatus { get; set; }
    }

    public UpdateOrderStatusInfo()
    {
        Result = new UpdateOrderResult();
    }

    public string IsSuccess { get; set; }
    public UpdateOrderResult Result { get; set; }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T18:58:57.267

简单的方法是使用 xsd.exe 工具。

该命令`xsd response.xml`将生成文件`response.xsd` 该命令`xsd response.xsd /C`将生成`response.cs`包含序列化/反序列化发布的 xml 所需的类的文件。

# python - 响应对象没有属性编码，scrapy错误

> ID：11419773
> 
> 赞同：2
> 
> 时间：2012-07-10T18:40:43.733
> 
> 标签：python, web-scraping, scrapy

我在scrapy中遇到这个错误

```
 File "/usr/lib/pymodules/python2.7/scrapy/selector/factories.py", line 20, in body_as_utf8
   if response.encoding in utf8_encodings:
   exceptions.AttributeError: 'Response' object has no attribute 'encoding' 
```

导致它的代码只是scrapy spider中的以下代码

```
 def parse(self, response):
    hxs = HtmlXPathSelector(response) 
```

我正在尝试解析网址

```
 http://itunes.apple.com/WebObjects/MZStore.woa/wa/customerReviews?id=382034404%0A 
```

使用用户代理字符串

```
 iTunes/10.2 (Macintosh; U; PPC Mac OS X 10.2) 
```

知道可能是什么错误吗？对我来说似乎很奇怪，这段代码总是在我所有的其他蜘蛛中工作

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T04:08:58.070

我没有时间调试它，但我的猜测是`response`这种特殊情况下的论点不是 a `HtmlResponse`or `TextResponse`。

在回调中做`print response.__class__`

如果类是`scrapy.http.response.Response`，那么我猜想该 url 返回一个非文本响应，这显然是没有任何 的字节流`encoding`，并且您不能在其上使用 xpath。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-04-17T19:43:04.867

不确定这是否超级有用，但也许它可以帮助指导您或其他人。

我遇到了类似的错误：

> 'Response' 对象没有属性 'elapsed'

通过更新`requests`依赖项解决了它：

```
sudo apt-get install python-pip
sudo pip install --upgrade requests 
```

所以也许你有一个提供属性的依赖项`encoding`？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-05T15:13:57.513

请尝试这种方式：

```
def parse(self, response):
    hxs = HtmlXPathSelector(text=response.body) 
```

# java - GAE 中的列表访问同步

> ID：11419777
> 
> 赞同：0
> 
> 时间：2012-07-10T18:41:06.377
> 
> 标签：java, google-app-engine, synchronization, jdo, datanucleus

我刚刚同步了我的 java 代码以避免多次访问同一个列表。这是我的代码：

```
List<Category> list = Collections.synchronizedList(listCat); 
..
pm.currentTransaction().begin();
..
synchronized (list) {
    for (Category category : list) {
        category.setKey(null);
        tempUser.addToCategories(category);
    }
}
..
pm.currentTransaction().commit(); 
```

..但我继续得到

```
java.util.ConcurrentModificationException: too much contention on these datastore entities. please try again.
at com.google.appengine.api.datastore.DatastoreApiHelper.translateError(DatastoreApiHelper.java:39)
at com.google.appengine.api.datastore.DatastoreApiHelper$1.convertException(DatastoreApiHelper.java:76)
at com.google.appengine.api.utils.FutureWrapper.get(FutureWrapper.java:106)
at com.google.appengine.api.utils.FutureWrapper.get(FutureWrapper.java:90)
at com.google.appengine.api.utils.FutureWrapper.get(FutureWrapper.java:90)
at com.google.appengine.api.datastore.FutureHelper.getInternal(FutureHelper.java:72)
at com.google.appengine.api.datastore.FutureHelper.quietGet(FutureHelper.java:33)
at com.google.appengine.api.datastore.TransactionImpl.commit(TransactionImpl.java:116)
at org.datanucleus.store.appengine.jdo.DatastoreJDOTransaction.commit(DatastoreJDOTransaction.java:68)
at (the row where the transaction is committed) 
```

..当不同的实例访问该列表时。有没有办法避免这种情况？我的意思是与此处指定的方式不同的方式： [Uses for Transactions](https://developers.google.com/appengine/docs/java/datastore/transactions#Uses_for_Transactions)。

我使用 JDO 2.3，但我认为它不会影响这种行为

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T19:07:00.017

GAE 事务不做锁定：它们使用[乐观并发控制](https://developers.google.com/appengine/docs/java/datastore/transactions#What_Can_Be_Done_In_a_Transaction)，这意味着如果多个事务更改同一个实体组，第一个事务将成功，其他事务将失败并需要重试。

# infopath - Microsoft InfoPath 错误？无法打开

> ID：11419787
> 
> 赞同：0
> 
> 时间：2012-07-10T18:41:36.000
> 
> 标签：infopath

只是想知道是否有人可以帮助我解决我遇到的 InfoPath 问题。我有一个无法打开的表单，最初显示下面的消息。

表单定义 (.xsf) 文件包含无效的元素、属性或结构。

错误详细信息：keyref 'ruleSet_41' 无法解析为身份约束 '{http://schemas.microsoft.com/office/infopath/2003/solutionDefinition}ruleset_name_key' 的密钥。第 1539 行，位置 3 --^

我已设法通过从 manifest.xsf 文件中删除 ruleSet_41 来清除此问题，但我现在收到的消息如下所示。

以下文件在 .xsf 文件中被引用，但不是表单的一部分：myschema.xsd  

这阻止我打开表格。

有没有人有任何想法，任何事情都会非常感激。

非常感谢，杰米。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T12:56:23.120

删除包含 RuleSetAction 的按钮。

还有会看，打开文件“myschema.xsd”会一直引用“ruleSet_41”。同时从 .xsd 中删除它

# asp.net-mvc - 使用网络爬虫的 asp.net mvc 站点搜索

> ID：11419788
> 
> 赞同：1
> 
> 时间：2012-07-10T18:41:40.433
> 
> 标签：asp.net-mvc

我正在尝试为我的 asp mvc 网站建立搜索。我已经检查了 Lucene.net，但它会在数据库中搜索文本，据我所知，它不会抓取网站来获取 URL。谁能指出我正确的方向来实现这一目标？我一直在网上搜索一些例子，但很难找到我需要的东西。我已经将 sphider 用于 php 网站，但找不到任何可与 asp mvc 相媲美的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T18:44:06.597

如果您不想投资创建自己的搜索，简单但有效： [http ://www.google.com/enterprise/search/products_gss.html](http://www.google.com/enterprise/search/products_gss.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-05T21:15:01.637

您也可以试用我们的产品[“SearchUnit”](https://keyoti.com/products/search/dotNetWeb/index.html)，有免费社区版和付费版。这里有一个 MVC 特定的入门指南[https://keyoti.com/products/search/dotNetWeb/tutorials/setup-MVC-search-engine/](https://keyoti.com/products/search/dotNetWeb/tutorials/setup-MVC-search-engine/)

# wordpress - 标题中的 Wordpress 代码注入

> ID：11419790
> 
> 赞同：0
> 
> 时间：2012-07-10T18:41:55.433
> 
> 标签：wordpress

我目前的 Wordpress 安装有问题。

已经有大量代码被注入到标头中，我不确定它来自哪里。我查看了 wp-content 文件夹中的所有文件，但没有找到任何内容。

我在这里粘贴了源代码：http: [//pastebin.com/cLS6s9V8](http://pastebin.com/cLS6s9V8)。它从第 96 行开始。

所有页面都发生这种情况。我怎样才能摆脱它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T18:50:32.890

根据位置，我会说一些与您的 wordpress 站点的 wp_head() 调用有关的内容。也许是一个流氓插件？

[http://codex.wordpress.org/Function_Reference/wp_head](http://codex.wordpress.org/Function_Reference/wp_head)

# xamarin.ios - MonoTouch：用于外部附件的 ESSession

> ID：11419791
> 
> 赞同：0
> 
> 时间：2012-07-10T18:41:59.653
> 
> 标签：xamarin.ios, external-accessory

我正在将代码从 Objective C 移植到 MonoTouch 以使用外部附件。这是超级基本的编码，但是当我创建 EASession 并尝试使用 InputStream 或 OutputStream 时，它们都是 NULL。我在 Objective-C 中使用过它，所以我知道这不应该发生。

我能够反复连接/断开设备并检测到它。现在，由于这个空问题，我似乎无法从设备中读取数据。下面是我的编码：

session = new EASession(acc, "com.idtechproducts.reader");

session.OutputStream.Delegate = streamDel; // 崩溃说 OutputStream 为空

session.OutputStream.Schedule (NSRunLoop.Current , "NSDefaultRunLoopMode");

session.OutputStream.Open();

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T23:11:41.963

您需要在 Info.plist 中列出要使用的外部附件。

苹果网站上有一些关于此的文档：http: [//developer.apple.com/library/ios/#featuredarticles/ExternalAccessoryPT/Introduction/Introduction.html#//apple_ref/doc/uid/TP40009502](http://developer.apple.com/library/ios/#featuredarticles/ExternalAccessoryPT/Introduction/Introduction.html#//apple_ref/doc/uid/TP40009502)

这是如何在 Info.plist 中设置此值的屏幕截图：http: [//screencast.com/t/AYmOWjf8wkL](http://screencast.com/t/AYmOWjf8wkL)

# sql - 动态检测 Postgresql 中的角色

> ID：11419793
> 
> 赞同：0
> 
> 时间：2012-07-10T18:42:04.480
> 
> 标签：sql, postgresql, postgresql-9.1

我一直在尝试创建一个脚本来检测一个角色已经存在，如果它存在，它应该撤销所有特权。这样做很好：

```
DO $$DECLARE count int;
BEGIN
SELECT count(*) INTO count FROM pg_roles WHERE rolname = 'superman';
IF count > 0 THEN
    REVOKE ALL PRIVILEGES ON TABLE FROM superman;
END IF;
END$$; 
```

但是现在我希望每个环境都是动态的，因为我将在每个环境中使用不同的角色名称。所以我尝试使用 \set 机制，但是在使用 pl/sql 时这似乎不起作用，所以如果我会做类似以下的事情 Postgresql 抱怨语法错误：

```
/set environment _int

DO $$DECLARE count int;
BEGIN
SELECT count(*) INTO count FROM pg_roles WHERE rolname = 'superman';
IF count > 0 THEN
    REVOKE ALL PRIVILEGES ON TABLE FROM superman:environment;
END IF;
END$$; 
```

虽然如果我不在 pl/sql 中这样做，撤销语句就可以正常工作。所以我的问题是如何通过将参数传递给它来使我的脚本动态化，以便它们被替换？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T19:05:35.243

您必须使用[`EXECUTE`](http://www.postgresql.org/docs/current/interactive/plpgsql-statements.html#PLPGSQL-STATEMENTS-EXECUTING-DYN)动态 SQL。此外，`DO`语句不能带参数。创建一个 plpgsql 函数：

```
CREATE OR REPLACE FUNCTION f_revoke_all_from_role(_role text)
  RETURNS void AS
$BODY$
BEGIN

IF EXISTS (SELECT 1 FROM pg_roles WHERE rolname = _role) THEN
    EXECUTE 'REVOKE ALL PRIVILEGES ON TABLE x FROM ' || quote_ident(_role);
END IF;

END;
$BODY$ LANGUAGE plpgsql; 
```

称呼：

```
SELECT f_revoke_all_from_role('superman'); 
```

*   `IF`使用 .block 更简单`EXISTS`。

*   我[`quote_ident()`](http://www.postgresql.org/docs/current/interactive/functions-string.html#FUNCTIONS-STRING-OTHER)用来避免 SQLi。

*   表名可以是函数的第二个参数...

# java - 为什么 Java 中的 Float.MIN_VALUE 是正值？

> ID：11419797
> 
> 赞同：9
> 
> 时间：2012-07-10T18:42:28.037
> 
> 标签：java, floating-point

你认为 Float.MIN_VALUE 等于什么？

下一个代码解释了我过去 5 个小时的去向，试图解决一个错误。

```
public static void main(String[] args) {
    compareToZero(Float.MIN_VALUE); // Out = true false false
    compareToZero(Float.MAX_VALUE); // Out = true false false

    System.out.println("Float minimum " + Float.MIN_VALUE); // Out = 1.4E-45
    System.out.println("Float maximum " + Float.MAX_VALUE); // Out = 3.4028235E38
}

private static void compareToZero(float value1) {
    System.out.print((value1 > 0) + " ");
    System.out.print((value1 < 0) + " ");
    System.out.print((value1 == 0) + "\n");
} 
```

我没想到浮动的最小值会是一个正值……找不到任何用处。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-07-10T19:07:39.680

[根据Float.MIN_VALUE](http://docs.oracle.com/javase/6/docs/api/java/lang/Float.html#MIN_VALUE)的文档：

> 一个保持浮点类型的最小正非零值的常量，2-149。它等于十六进制浮点文字 0x0.000002P-126f，也等于 Float.intBitsToFloat(0x1)。

`float`虽然名称作为 a的“真正最小值”值得商榷`-Float.MAX_VALUE`，但我怀疑`MIN_VALUE`选择它是为了与其他数字类型保持一致。使用名称`MIN_RANGE_VALUE`和`MAX_RANGE_VALUE`（或类似名称）可能会使差异更加明显。

要理解为什么这是“最小值”，需要了解一点 Java（或[IEEE-754](http://en.wikipedia.org/wiki/IEEE_floating_point)）浮点值的工作原理。有了这个见解，在阅读了文档之后，很明显这`Float.MIN_VALUE`是可以*由 float 的尾数和指数分量表示的最小非零值*。或者，浮点数可以表示的*最小正值。*

“真正的最小值”是`-Float.MAX_VALUE`因为`Float.MAX_VALUE`表示浮点数的尾数和指数分量可以表示的最大值。由于浮点数的*符号*存储为离散位，因此此*范围限制*对于正数和负数都是相同的。

这与 Java（以及大多数 CPU）中整数的工作方式不同：它们使用[二进制补码](http://en.wikipedia.org/wiki/Two's_complement)进行编码。（一些计算机系统使用离散符号位，称为“一个补码”，它有两个零整数值：0 和 -0！）

快乐研究！

# qt - 将 QtQuickComponents 用于 S60 第 5 版手机

> ID：11419799
> 
> 赞同：1
> 
> 时间：2012-07-10T18:42:31.517
> 
> 标签：qt

如何将 QtQuickComponents 用于 S60_5th 设备？我有一个使用 QtQuickComponents 的项目，它适用于 Symbian_Anna 设备，但该应用程序无法在 S60_5th 设备上运行，任何人都可以帮助我

# sparql - Sparql 键与不同的值

> ID：11419800
> 
> 赞同：7
> 
> 时间：2012-07-10T18:42:32.530
> 
> 标签：sparql, semantic-web

我有一个返回重复项的 sparql 查询，我希望它仅在其中一个值（subjectID）上清理它们。与 DISTINCT 不同，它似乎为所选值的组合找到唯一值，而不是只为其中一个参数。我在这里看到有人提出 group by，但这似乎只有在我列出 group by 之后的所有参数时才适用（我的 sparql 端点抱怨，例如 SELECT 中的非组键变量：？职业）。我尝试运行内部选择，但它似乎不适用于这个特定的查询。那么可能是查询本身的问题（liveIn 可选的值似乎导致了重复）？

虽然在使用 SPARQL 的学习曲线早期对关系数据库感到满意，但请随意为不熟悉的人解释显而易见的事情！:)

```
select distinct  
  ?subjectID ?englishName ?sex ?locatedIn15Name 
  ?dob ?dod ?dom ?bornLocationName ?occupation 
  where { 
      ?person a hc:Person ;
      hc:englishName ?englishName ;
      hc:sex ?sex; 
      hc:subjectID ?subjectID; 
       optional { ?person hc:livedIn11 ?livedIn11 .
           ?livedIn11 hc:englishName ?lived11LocationName . 
           ?livedIn11 hc:locatedIn11 ?locatedIn11 .
           ?locatedIn11 hc:englishName ?locatedIn11Name .
           ?locatedIn11 hc:locatedIn15 ?locatedIn15 .
 ?locatedIn15 hc:englishName ?locatedIn15Name .
 } . 
       optional {?person hc:born ?dob } .
       optional {?person hc:dateOfDeath ?dod } .
       optional {?person hc:dateOfMarriage ?dom } .
       optional { ?person hc:bornIn ?bornIn . 
       ?bornIn hc:englishName ?bornLocationName . 
             ?bornIn hc:easting ?easting . 
             ?bornIn hc:northing ?northing } .
       optional {  ?person hc:occupation ?occupation } 
       FILTER regex(?englishName, "^FirstName LastName")
      } 
  GROUP BY 
  ?subjectID ?englishName  ?sex 
   ?locatedIn15Name ?dob ?dod ?dom 
  ?bornLocationName ?occupation 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-10T18:58:31.993

重新错误信息：

> SELECT 中的非组键变量：?occupation

您可以通过使用`SAMPLE()`聚合来避免这种情况 - 这将允许您只对其余变量进行分组`?subjectID`但仍然为其余变量选择值，前提是您只关心为其他变量获取一个值。

这是一个简单的例子：

```
SELECT ?subjectID (SAMPLE(?dob) AS ?dateOfBirth)
WHERE
{
  ?person a hc:Person ;
          hc:subjectID ?subjectID .
  OPTIONAL { ?person hc:born ?dob }
}
GROUP BY ?subjectID 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-07-11T21:21:23.520

首先要注意的是，在 RDF/SPARQL 中实际上没有键这样的东西。您正在查询一个图表，并且`?subjectID`可能只是为您选择的其他变量提供了几种可能的值组合。这是由您查询的图形的形状引起的：也许您的人有多个英文名字，或者实际上相反：同一个英文名字可以由多个人共享。

SPARQL SELECT 查询是一种奇怪的野兽：它查询一个图形结构，但将结果显示为一个平面表（从技术上讲，它是一组变量绑定的序列，但它相当于同一件事）。之所以会出现重复，是因为可以通过基本上遵循图表中的不同路径来找到变量值的不同组合。

因此，您在结果中获得重复值的事实`?subjectID`是不可避免的，因为从 RDF 图的角度来看，这些是您查询的唯一解决方案。您无法在不实际丢失信息的情况下过滤掉结果，因此通常很难在不知道您想要丢弃*哪些*“重复项”的情况下为您提供解决方案：您是否只需要每个主题的一个可能的英文名称，或者一个可能的出生日期（即使您的数据中可能有多个）？

但是，这里有一些技巧可以更轻松地处理/处理此类结果：

首先，您可以选择对变量使用`ORDER BY`子句。`?subjectID`这仍然会为您提供具有相同值的几行`?subjectID`，但它们都会按顺序排列，因此您可以更有效地处理结果。

另一种解决方案是将您的查询分成两部分：执行第一个查询，*仅*选择所有唯一主题（可能还有您事先知道的所有其他值，在给定主题的情况下它们将是唯一的），然后遍历结果并*对于每个单独的 subjectID 值*，执行单独的查询以获取您感兴趣的其他值。这个解决方案可能听起来像异端（尤其是如果您来自 SQL 背景），但实际上它可能比尝试在一个巨大的查询中完成所有事情更快、更容易。

RobV 提出的另一种解决方案是：使用`SAMPLE`特定变量的聚合来仅选择一个（随机）唯一值。一种变体是使用`GROUP_CONCAT`聚合，它通过将所有可能的值连接到单个字符串中来创建单个值。

# sql - 存储过程返回的别名列 [SQL Server 2008]

> ID：11419806
> 
> 赞同：2
> 
> 时间：2012-07-10T18:42:55.263
> 
> 标签：sql, sql-server-2008, tsql, stored-procedures, alias

我对一般的存储过程和 SQL Server/T-SQL 不太熟悉。我想知道是否有一种方法可以在不修改存储过程本身的情况下对存储过程返回的列进行别名或重命名。

这是我现在拥有的存储过程调用。

```
EXEC sp_GetNearbyLocations 38.858907, -77.261358 
```

它返回具有以下列的记录：

```
State
Zip
Phone
StartDate
Directions
Hours
Latitude
Longitude
Distance 
```

但是我希望它们都是小写的，而不是驼峰式的。可悲的是，我不控制存储过程，所以我无法更改它，只能调用它。这在 SQL Server 2008 中可行吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-10T18:46:57.397

如果 SQL Server 2012 可以使用该[`WITH RESULT SETS`](http://www.mytechmantra.com/LearnSQLServer/With-Result-Set-Feature-SQL-Server-2012.html)功能。

否则这是不可能的，它需要您将结果插入到某种中间临时表中，然后从中进行选择。

（您可以在不使用显式创建临时表的情况下执行此操作[`OPEN ROWSET`](https://dba.stackexchange.com/a/12745/3690)）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T18:53:07.760

您可以编写自己的过程，只需调用另一个过程，为列加上别名并返回它。

附带说明 - 为什么列名的大小写对您很重要？

# php - 从 JSON 格式的 PHP 中的 API 链接中整理出原始数据

> ID：11419807
> 
> 赞同：1
> 
> 时间：2012-07-10T18:43:01.530
> 
> 标签：php, api, formatting, explode, json

希望这对您来说很容易。

无论如何，我在使用 fread() 时遇到了很多麻烦，所以决定使用我能够找到的 api 链接。

该脚本只是将提取的游戏服务器数据转换为可读格式。

“序列化”数据的链接是：[http ://api.typefish.co.uk/monitor/sa-mp/80.86.81.14:6969/?info&masterlist&rules&players](http://api.typefish.co.uk/monitor/sa-mp/80.86.81.14:6969/?info&masterlist&rules&players)

简而言之，我对如何处理这些数据几乎没有任何想法。

到目前为止，这就是我所拥有的，尽管我可能离我很远：

```
$content = file_get_contents("http://api.typefish.co.uk/monitor/sa-mp/80.86.81.14:6969/?info&masterlist&rules&players");
trim($content, "{");
trim($content, "}");
foreach(exlpode(",", $content) as $pieces){
  explode(":", $pieces);
} 
```

现在我被困住了。有人可以告诉我一种更好的方法，或者帮助我用一些想法完成脚本吗？

谢谢

这是我在 2 个答案后得到的代码：

```
 $newarray = json_decode($content);
    var_dump($newarray);
    echo "<br><br>";
    echo $newarray->{"mapname"}; 
```

问题是我无法以这种格式显示变量，如何重建它以便查看变量。

我改变了这个：

```
echo $newarray->{"mapname"}; 
```

对此：

```
echo $newarray->data->rules->mapname; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T18:46:33.583

此数据为 json 格式。将其转换为 php 数组所需的全部内容是`json_decode($content)`

参考：[http](http://us3.php.net/json_decode) ://us3.php.net/json_decode 并在此处阅读有关 json 的更多信息：http: [//www.json.org/](http://www.json.org/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T18:49:46.373

你做错了，它不是 PHP 序列化字符串，它的 json 输出你可以使用[json_decode](http://php.net/manual/en/function.json-decode.php)将字符串放入 PHP 数组。

喜欢：

```
var_dump(json_decode($content, true)); 
```

# mysql - Zend db 更新值未设置

> ID：11419809
> 
> 赞同：0
> 
> 时间：2012-07-10T18:43:05.410
> 
> 标签：mysql, database, zend-framework

我不确定此更新调用缺少什么，这是我的代码：

```
$table = new Application_Model_DbTable_ProductContaminant();
$db = $table->getAdapter();

$db->getProfiler()->setEnabled(true);
$data = array('value' => '999');
$where[] = $db->quoteInto('product_id = ?', $q['product_id']);
$where[] = $db->quoteInto('contaminant_id = ?', $k);
$table->update($data, $where);

print $db->getProfiler()->getLastQueryProfile()->getQuery(); 
```

探查器输出是：

```
UPDATE `product_contaminants` SET `value` = ? WHERE (product_id = '4802') AND (contaminant_id = 69) 
```

为什么没有填充“价值”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T18:52:59.500

未填充值，因为 getQuery 将仅返回带有参数占位符的准备好的语句。如果您想要更新时使用的参数，请尝试以下操作：

```
$db->getProfiler()->getLastQueryProfile()->getQueryParams() 
```

更多信息[在这里](http://framework.zend.com/manual/en/zend.db.profiler.html)。

# html - 使用 CSS 反向悬停图像

> ID：11419813
> 
> 赞同：1
> 
> 时间：2012-07-10T18:43:10.917
> 
> 标签：html, css, webkit, hover, opacity

我有一个css图像悬停效果，其中div中的图像变为0不透明度，然后显示背景图像。这意味着当您悬停时，一个图像会淡出，而另一个图像会出现。

此效果使用 CSS 和 webkit。

但问题是，当您将鼠标悬停在图像上时，效果会发生但不会反转，这意味着当您离开图像时它不会淡入。但这就是我想要的效果。

这是 HTML 标记...

```
<div id="info"><img src="infow1.png" width="800" height="800" /></div> 
```

这是CSS标记...

```
#info   {
background: url(infow2.png) 0 0 no-repeat; 
position: fixed; 
top: 50%; 
left: 50%; 
margin-top: -400px;
margin-left: -400px;
width: 800px; 
height: 800px;
z-index:100;
opacity: 1;
-webkit-transition: opacity;
-webkit-transition-timing-function: ease-out;
-webkit-transition-duration: 500ms;
}
#info img:hover{
opacity:0;
-webkit-transition: opacity;
-webkit-transition-timing-function: ease-out;
-webkit-transition-duration: 500ms;
} 
```

所以总的来说，我希望 infow.png 淡出，当您将鼠标悬停在图像上时，然后在您离开时淡入。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-10T18:51:02.610

这是你想要的？

HTML：

```
<img src="infow1.png" class="fadeOut"> 
```

CSS3：

```
.fadeOut {
    opacity: 1;
    transition: opacity .25s ease-in-out;
    -moz-transition: opacity .25s ease-in-out;
    -webkit-transition: opacity .25s ease-in-out;
}

.fadeOut:hover {
    opacity: 0;
} 
```

JS 小提琴：http: [//jsfiddle.net/AXQW4/1/](http://jsfiddle.net/AXQW4/1/)

编辑：如果您想在悬停时显示不同的图像，可以将其添加为`background-image`原始图像后面：http: [//jsfiddle.net/8qzcY/](http://jsfiddle.net/8qzcY/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T18:51:55.157

您没有创建适用于未悬停图像的规则，因此如果您创建一些规则，如下所示：

```
#info img {
    opacity: 1;
    -webkit-transition: opacity;
    -webkit-transition-timing-function: ease-out;
    -webkit-transition-duration: 500ms;
} 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/DyRJt/2)。

它应该如你所愿。

相比之下，没有悬停`#info img`规则的相同演示：[JS Fiddle demo](http://jsfiddle.net/davidThomas/DyRJt/3)，这似乎与您的描述相符。

# .htaccess - 通过 .htaccess 替换查询字符串中的字符

> ID：11419825
> 
> 赞同：7
> 
> 时间：2012-07-10T18:43:38.140
> 
> 标签：.htaccess, mod-rewrite, query-string

我的客户想要在某些页面上修改查询字符串（通过将 % 更改为 A）。

例如，我可以通过以下方式在所需页面上完全删除查询字符串：

```
RewriteCond %{QUERY_STRING} !="" 
RewriteCond %{REQUEST_URI} ^/SpecialPage(.*) 
RewriteRule ^(.*)$ /$1? [R=301,L] #remove query string 
```

这是我认为应该删除查询字符串上的 % 并替换为 A 的内容，但事实并非如此：

```
RewriteCond %{QUERY_STRING} ^(.*)\%(.*)$
RewriteCond %{REQUEST_URI} ^/SpecialPage(.*)
RewriteRule ^(.*)$ /$1?%1A%2  [L] 
```

我在这做错了什么？我就是看不出来。感谢专家的眼睛！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T03:43:55.297

你真的很亲近。

这里的问题是你有一个条件并且你的规则的匹配应该在一起。您对前一个的反向引用`RewriteCond`已损坏，因为它是针对**REQUEST_URI**而*不是*您想要的**QUERY_STRING 。**

```
RewriteCond %{REQUEST_URI} ^/SpecialPage(.*)
RewriteRule ^(.*)$ /$1?%1A%2  [L] 
```

在这里，**%1**反向引用匹配URI`(.*)`末尾的。`/SpecialPage`您的查询字符串匹配中的反向引用会丢失，而这正是您真正想要的。您可以将条件与 REQUEST_URI 与以下中的正则表达式模式相匹配`RewriteRule`：

```
RewriteCond %{QUERY_STRING} ^(.*)\%(.*)$
RewriteRule ^SpecialPage(.*)$ /SpecialPage$1?%1A%2  [L] 
```

在这里，**%1**和**%2**反向引用正确地引用了查询字符串，并且`SpecialPage`URI 中的条件符合正则表达式模式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-11-10T07:25:50.443

# 重定向查询字符串

RewriteEngine On
RewriteCond %{QUERY_STRING} ^(. *)=(.* )$
RewriteRule ^(. *)?(.* )$ /$1--%0? [R=301,L]

从网址：[http://localhost/sholay-slide.jsp?slide=2](http://localhost/sholay-slide.jsp?slide=2)
到网址：[http://localhost/sholay-slide.jsp--slide=2](http://localhost/sholay-slide.jsp--slide=2)

# java - 为什么设置currencyCode时jstl的formatNumber货币符号语言环境特定

> ID：11419827
> 
> 赞同：2
> 
> 时间：2012-07-10T18:43:47.773
> 
> 标签：java, jsp, jstl, locale

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T18:49:30.623

Locale is taken into acount so the output makes sense to the user.

As a silly American (who lives in the en_US locale) I have no idea what that funky symbol means.

EUR makes perfect sense to me.

A [quick google](http://www.tutorialspoint.com/jsp/jstl_format_formatnumber_tag.htm) suggests you can set the `currencySymbol` attribute to whatever you want:

```
<fmt:formatNumber value="${amount}" type="currency" currencySymbol="FOO" currencyCode="${currencyCode}" var="amt" /> 
```

# php - not_null 没有意义吗？

> ID：11419829
> 
> 赞同：2
> 
> 时间：2012-07-10T18:43:55.257
> 
> 标签：php

我继承了一些代码，以前的编码员在其中写了这个：

```
 if (!not_null($page)) {
       die('<b>Error!</b><br><b>Unable to determine the page link!<br><br>');
    } 
```

这有什么好处，而不是仅仅说： if (is_null($page))

这对我来说似乎是不必要的混乱。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-10T18:46:50.087

`not_null`必须是本地函数。

它**不是**标准的 PHP 函数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T18:51:39.197

不知道做什么`not_null`，是不可能说的。由于`not_null`是用户定义的函数，它可以做**任何事情**

如果，在检查之后，你发现这`not_null`是在做一个简单的比较，你*可以*以可读性的名义重构代码：

```
if (is_null($page))
    die('<p><strong>Error!</strong><br>Unable to determine the page link!</p>') 
```

或者

```
if ($page === null)
    die('<p><strong>Error!</strong>Unable to determine the page link!</p>') 
```

PS - 不要使用`<b>`-`<strong>`改为使用。此外，当您需要多个换行符时，请使用 a`<p>`而不是 multiple `<br>`。您的示例代码`<b>`在错误消息上有一个未关闭的标签。

**文档**

*   [http://php.net/manual/en/function.is-null.php](http://php.net/manual/en/function.is-null.php)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-10T18:47:57.020

我相信 PHP中没有`not_null`函数。

**你应该用什么？**

使用`=== null`or`!== null`代替显式***调用函数***。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-10T18:54:36.020

这样做实际上看起来更糟，因为可以简单地写在 if 语句中： `if($page==null)`它的计算速度比使用这个函数快。您也可以尝试`if(!$page)`快速评估。

# database - private void connectToDatabase() 被调用两次？

> ID：11419832
> 
> 赞同：1
> 
> 时间：2012-07-10T18:44:07.750
> 
> 标签：database, embedded

这可能是一个愚蠢的问题，因为我是一个初学者，但无论如何：我有一个程序使用名为 connectToDatabase() 的方法连接到嵌入式数据库。我在 JFrameForm 中使用它，每次调用它都会被调用两次。这是代码：

```
private void connectToDatabase() {

    String DRIVER = "org.apache.derby.jdbc.EmbeddedDriver";
    String CONNECTION = "jdbc:derby:db";

    try {
        Class.forName(DRIVER).newInstance();
    } catch (InstantiationException | IllegalAccessException | ClassNotFoundException ex) {
        JOptionPane.showMessageDialog(this, "Fatal Error: " + ex.getMessage(), "Fatal Error!", JOptionPane.ERROR_MESSAGE);
    }

    try {

        connection = DriverManager.getConnection(CONNECTION);

        statement = connection.createStatement();

        statement.executeUpdate("create table USERACCOUNTS (ID INTEGER NOT NULL PRIMARY KEY, USERNAME VARCHAR(32), PASSWORD VARCHAR(32))");

        resultset = statement.executeQuery("SELECT * FROM USERACCOUNTS");

    } catch (SQLException ex) {
        JOptionPane.showMessageDialog(this, "Fatal Error: " + ex.getMessage(), "Fatal Error!", JOptionPane.ERROR_MESSAGE);
    }

} 
```

这里在构造函数中调用它：

```
public SetupAccounts() {
    initComponents();
    this.setLocationRelativeTo(null);
    connectToDatabase();
} 
```

真的很迷茫，有大神帮忙吗？

我知道它被调用了两次，因为我收到两条内容相同的错误消息“USERACCOUNTS 表已存在于模式“app”中。

从这里调用构造函数：

```
public void runsetupaccounts() {

    try {

        UIManager.setLookAndFeel("com.sun.java.swing.plaf.windows.WindowsLookAndFeel");

    } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException err) {

        JOptionPane.showMessageDialog(null, "Look and feel not set: " + err.getMessage());

    }

    java.awt.EventQueue.invokeLater(new Runnable() {

        public void run() {
            new SetupAccounts().setVisible(true);
        }
    });
} 
```

从另一个名为 StartUp 的类：

```
SetupAccounts sa = new SetupAccounts();
sa.runsetupaccounts(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T19:31:52.833

你帖子的最后两行讲述了这个故事。首先，您构造 的实例`SetupAccounts`，然后构造函数调用`connectToDatabase()`。然后调用`runsetupaccounts()`该实例，并`runsetupaccounts()`构造 的*第二个*实例`SetupAccounts`，其构造函数*也*调用`connectToDatabase()`。

也许您应该创建`runsetupaccounts()`一个静态方法，这样您就可以在不先创建`SetupAccounts`对象的情况下调用它。

# c - 将结构指针转换为另一个嵌入式结构

> ID：11419833
> 
> 赞同：2
> 
> 时间：2012-07-10T18:44:13.310
> 
> 标签：c, pointers, struct, stack

我正在实现一个不需要内存分配的堆栈，只要它嵌入一个特殊的结构就可以采用任何结构。类似于[GNU 的 List](http://lists.gnu.org/archive/html/pspp-dev/2004-12/txtGDUqftYIk8.txt)实现。

任何结构必须嵌入才能在堆栈中工作的结构是：

```
struct stack_elem {
  struct stack_elem *next;
}; 
```

我想与堆栈一起使用的结构是：

```
struct node {
  double number;
  char character;
  int isNumber;
  struct stack_elem elem;
}; 
```

所以堆栈看起来像这样：

```
node:            node:
+---------+      +---------+
|number   |      |number   |
+---------+      +---------+
|character|      |character|
+---------+      +---------+
|isNumber |      |isNumber |
+---------+      +---------+
|elem     |      |elem     |
| *next   |----->| *next   |     
+---------+      +---------+ etc.... 
```

我正在编写一个宏`stack_entry`，用于将嵌入式`elem`结构转换为其容器`node`结构。这是我到目前为止所尝试的。`stack_entry`将按如下方式使用：

```
struct stack_elem *top = peek(&stack);
struct node *converted_node = stack_entry(top, struct node, elem); 
```

`stack_entry`将采用指向 的指针，`stack_elem`要转换为的节点的类型以及该节点中元素的成员字段的名称。我尝试了几种方法来做到这一点，但都没有奏效。我意识到这`STACK_ELEM`指向该`next`项目，因此我尝试仅减去`elem`from的偏移量`struct node`，但这不起作用。以下是我尝试过的一些也不起作用的事情：

```
#define stack_entry(STACK_ELEM, STRUCT, MEMBER)       \
         ((STRUCT *) &(STACK_ELEM) - offsetof (STRUCT, MEMBER))

#define stack_entry(STACK_ELEM, STRUCT, MEMBER)       \
         ((STRUCT *) ((uint8_t *) &(STACK_ELEM)->next \
         - offsetof (STRUCT, MEMBER))) 
```

什么是正确的算术？如果它是结构中的最后一个元素，为什么不减去 的偏移量，从而产生节点`next`的偏移量？`elem`

GNU List`list_entry`宏定义为：

```
#define list_entry(LIST_ELEM, STRUCT, MEMBER)           \
        ((STRUCT *) ((uint8_t *) &(LIST_ELEM)->next     \
                     - offsetof (STRUCT, MEMBER.next))) 
```

这是如何运作的？`next`当它应该在同一个节点而不是那个节点中获取容器结构时，为什么会涉及到这里`next`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T18:59:32.980

GNU 的工作原理是从字段的地址中`list_entry`减去从结构开头到字段的偏移量。它实际上并没有取消引用指针。在 Linux 源代码中有一个用于此的通用宏，称为，您可能会发现它很有帮助。链接的文章信息量很大。`next``next``next`[`container_of`](http://www.kroah.com/log/linux/container_of.html)

在您第二次尝试定义`stack_entry`时，您减去了错误的偏移量（将其与 GNU`list_entry`宏进行比较）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T01:44:05.540

您的实现实际上不是堆栈，而是单链表或向量，具体取决于您的数据结构是否可以具有任意大小。

仅供您参考：

*   why do you need a next pointer if your elements are the same size. shouldn't they all be in the same offset to each other? Assume your structure is of size 16 bytes. the first element will be at address *base* and the next will be at address *base + 16* and the *n*-th element will be at *base + (n-1)* * *16* (Then you call it a vector)

*   if your data structures have arbitrary size you need two things: some magic to find out which object it is and a *fixed* offset to where your next pointer will be. two good hints:

And the best thing for you: it has already been implemented by someone else: you can use `#include <sys/queue.h>` the `SLIST` then you just have to take care of on where to put your data.

# windows - 使用 XP 批处理文件将 p12 证书导入证书（本地计算机）\个人存储

> ID：11419836
> 
> 赞同：2
> 
> 时间：2012-07-10T18:44:15.970
> 
> 标签：windows, batch-file, certificate

我正在尝试使用 Windows XP 批处理文件将 .p12 证书自动导入到 MMC“证书”管理单元调用的证书（本地计算机）\Personal\Certificates

certmgr.msc 可能是用于此目的的正确工具，但我已经尝试过

```
a:\certmgr.msc /add /c /s /r localMachine a:\<certname>.p12

importpfx -f a:\certs\<certname>.* -p <cert pw> -t MACHINE -s My 
```

还有一些没有成功。通常，MMC 只是在证书卡入的情况下打开。我没有看到任何证书实际上被移动或导入到任何地方。

我也尝试过不带环境变量和通配符的证书路径\名称，但我得到的证书可能只是也可能不是工作站名称.p12 ..

有什么建议么？

-粘土

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-11-02T20:33:23.550

以下代码适用于 Windows 8 和 Windows Server 2012 R2。我在批处理文件中使用了以下命令：

```
certutil -f -sid 22 -p [Password1] -importpfx "My"  "%~dp0\whatever.pfx" NoRoot

-sid WELL_KNOWN_SID_TYPE -- Numeric SID
22 -- "Local System", 23 -- "Network Service", 24 -- "Local Service" 
```

# c# - 会话即将到期和授权 cookie 剩余

> ID：11419843
> 
> 赞同：1
> 
> 时间：2012-07-10T18:45:09.690
> 
> 标签：c#, asp.net, asp.net-mvc-3, session, forms-authentication

我遇到了会话即将到期的问题，

```
Session["UserId"] = userId; 
```

但是身份验证 cookie 仍然存在，因此 [authorize] 属性仍然允许用户导航系统，直到系统尝试读取会话变量和错误。空异常

会话到期时如何使 auth cookie 消失有什么想法吗？由于我是 ASP.NET MVC 3 的新手，因此我当然会很感激任何见解。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T19:00:52.580

这是不好的做法，请参阅[此链接](http://www.troyhunt.com/2010/07/owasp-top-10-for-net-developers-part-3.html)以获得更深入的解释。基本上，通过以任何人身份登录，然后获取其他人的会话密钥，您就可以窃取该身份。

我建议您将用户的 id 嵌入到身份验证 cookie 中，请参阅有关该主题的[这个问题](https://stackoverflow.com/questions/1070411/asp-net-store-user-data-in-auth-cookie)。然后，如果您愿意，您可以仅将会话用作缓存，只需将会话 ID 与存储在 auth cookie 中的 ID 进行比较。例如，在 global.asax 中执行此操作，这样您就不必更改您的应用程序

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T18:56:19.510

有很多方法可以做到这一点。这里只是一个想法。

```
public class ControllerBase : Controller
{
    public ControllerBase()
        : base()
    {
        this.VerifySession();  
    }

    /// <summary>
    /// Indicates whether the session must be active and contain a valid customer.
    /// </summary>
    protected virtual bool RequiresActiveSession
    {
        get { return true; }
    }

    public void VerifySession()
    {
        if (this.RequiresActiveSession && Session["UserId"] == null)
        {
            Response.Redirect(Url.Action("LoginPage"));
        }
    }

}

public class HomeController : ControllerBase
{
    protected override bool RequiresActiveSession
    {
        get
        {
            return true;
        }
    }

    public ActionResult Index()
    {
        return View();
    }
} 
```

基本上你有一个控制器库来处理验证会话。任何从它继承的控制器都可以指定是否要验证会话。

或者

您可以创建一个自定义[操作过滤器](http://msdn.microsoft.com/en-us/library/dd381609.aspx)，它允许您在执行控制器操作之前将您的控制器或操作归类并挂钩您的代码到处理管道中。

# linq-to-sql - LINQ to SQL 删除外键引用的记录

> ID：11419844
> 
> 赞同：1
> 
> 时间：2012-07-10T18:45:09.603
> 
> 标签：linq-to-sql

我有一个 Customers 表、一个 Sports 表和 Customers_Sports 连接表。最后一张表告诉我哪些客户玩什么运动，即包含其他两张表的外键。

强制外键约束，外键不能为空。

使用 LINQ，是否有一种简单的方法可以删除客户并同时删除连接表中引用该客户的所有记录？

我可以做到这一点，即先从连接表中删除相关记录，然后从客户中删除客户的记录。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T05:39:07.307

*简单*是真正的踢球者。 [没有一种自动的方法可以做到这一点。](http://msdn.microsoft.com/en-us/library/bb386931.aspx) 您基本上无法从 Customer_Sports 表中删除与给定客户匹配的所有内容，然后自己删除客户。我相信如果您在执行之前删除两者，您不`SubmitChanges()`应该遇到任何外键约束违规。

如果你想变得非常花哨，你可以使用反射来创建一个通用函数，只要有一种外键，比如[Linq 到 SQL 级联删除和反射](https://stackoverflow.com/questions/6531693/linq-to-sql-cascading-delete-with-reflection)，就可以做到这一点。

为您设置数据库来执行此操作可能不会容易出错。性能可能也更好，但除非您知道自己有性能问题，否则您不应该担心性能。

# c# - 交易时段的间隔时间

> ID：11419847
> 
> 赞同：0
> 
> 时间：2012-07-10T18:45:24.027
> 
> 标签：c#, session, datetime

我无法确定任何特定时间处于哪个交易时段。

有四个可能的会话，显示在这张取自 ForexFactory.com 的图片中

![在此处输入图像描述](../Images/c83635a4c7160a77020ea2d93bb6471c.png)

我有这个方法，我需要检查当前时间是否在指定的交易时段内。

```
public bool IsTradingSession(TradingSession tradingSession, DateTime currentTime)
{

    //Regular session is 5PM - next day 5PM, this is the session in the picture.
    //Irregular sessions also occur for example late open (3AM - same day 5PM)  or early close (5PM - next day 11AM)
    DateTime sessionStart = Exchange.CurrentSessionOpen;
    DateTime sessionEnd = Exchange.CurrentSessionClose;

    if(tradingSession == TradingSession.Sydney)
        return ....... ? true : false;
    if(tradingSession == TradingSession.Tokyo)
        return ....... ? true : false;        
    if(tradingSession == TradingSession.London)
        return ....... ? true : false;
    if (tradingSession == TradingSession.NewYork)
        return ....... ? true : false;

    return false;
} 
```

利用：

```
 bool isSydneySession = IsTradingSession(TradingSession.Sydney, CurrentTime);
    bool isTokyoSession = IsTradingSession(TradingSession.Tokyo, CurrentTime);
    bool isLondonSession = IsTradingSession(TradingSession.London, CurrentTime);
    bool isNewYorkSession = IsTradingSession(TradingSession.NewYork, CurrentTime); 
```

谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T18:57:08.873

首先，您需要每个市场的 DateTimes（开始和结束）的数据源。然后，根据参数`currentTime`，您可以通过执行简单的检查来检查它是否在其中：

```
if (currentTime.Ticks >= marketOpen.Ticks && currentTime.Ticks <= marketClose.Ticks)
{
    //Market is open!
} 
```

`currentTime`以上是与市场处于同一时区的假设。如果不是，那么我建议将所有有问题的时间都转换为 UTC，这样就不存在您是否拥有正确的时区的问题。

# java - NotSerializableException，不可预测？

> ID：11419850
> 
> 赞同：1
> 
> 时间：2012-07-10T18:45:26.787
> 
> 标签：java, notserializableexception

```
java.io.WriteAbortedException: writing aborted; java.io.NotSerializableException: java.lang.reflect.Constructor
    at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1351)
    at java.io.ObjectInputStream.defaultReadFields(ObjectInputStream.java:1964)
    at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:1888)
    at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1771)
    at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1347)
    at java.io.ObjectInputStream.defaultReadFields(ObjectInputStream.java:1964)
    at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:1888)
    at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1771)
    at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1347)
    at java.io.ObjectInputStream.readObject(ObjectInputStream.java:369)
    at javax.swing.event.EventListenerList.readObject(EventListenerList.java:272)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at java.io.ObjectStreamClass.invokeReadObject(ObjectStreamClass.java:991)
    at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:1866)
    at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1771)
    at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1347)
    at java.io.ObjectInputStream.defaultReadFields(ObjectInputStream.java:1964)
    at java.io.ObjectInputStream.defaultReadObject(ObjectInputStream.java:498)
    at javax.swing.JComponent.readObject(JComponent.java:5478)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at java.io.ObjectStreamClass.invokeReadObject(ObjectStreamClass.java:991)
    at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:1866)
    at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1771)
    at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1347)
    at java.io.ObjectInputStream.readArray(ObjectInputStream.java:1685)
    at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1341)
    at java.io.ObjectInputStream.access$300(ObjectInputStream.java:205)
    at java.io.ObjectInputStream$GetFieldImpl.readFields(ObjectInputStream.java:2126)
    at java.io.ObjectInputStream.readFields(ObjectInputStream.java:537)
    at java.awt.Container.readObject(Container.java:3712)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at java.io.ObjectStreamClass.invokeReadObject(ObjectStreamClass.java:991)
    at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:1866)
    at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1771)
    at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1347)
    at java.io.ObjectInputStream.readObject(ObjectInputStream.java:369)
    at javax.swing.event.EventListenerList.readObject(EventListenerList.java:272)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at java.io.ObjectStreamClass.invokeReadObject(ObjectStreamClass.java:991)
    at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:1866)
    at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1771)
    at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1347)
    at java.io.ObjectInputStream.defaultReadFields(ObjectInputStream.java:1964)
    at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:1888)
    at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1771)
    at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1347)
    at java.io.ObjectInputStream.readObject(ObjectInputStream.java:369)
    at projectserver.SQLHandler.listener(SQLHandler.java:156)
    at projectserver.SQLHandler.<init>(SQLHandler.java:27)
    at projectserver.Client.run(Client.java:82)
    at java.lang.Thread.run(Thread.java:722)
Caused by: java.io.NotSerializableException: java.lang.reflect.Constructor
    at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1180)
    at java.io.ObjectOutputStream.defaultWriteFields(ObjectOutputStream.java:1528)
    at java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1493)
    at java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1416)
    at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1174)
    at java.io.ObjectOutputStream.defaultWriteFields(ObjectOutputStream.java:1528)
    at java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1493)
    at java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1416)
    at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1174)
    at java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:346)
    at javax.swing.event.EventListenerList.writeObject(EventListenerList.java:257)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at java.io.ObjectStreamClass.invokeWriteObject(ObjectStreamClass.java:962)
    at java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1480)
    at java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1416)
    at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1174)
    at java.io.ObjectOutputStream.defaultWriteFields(ObjectOutputStream.java:1528)
    at java.io.ObjectOutputStream.defaultWriteObject(ObjectOutputStream.java:438)
    at javax.swing.JComponent.writeObject(JComponent.java:5525)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at java.io.ObjectStreamClass.invokeWriteObject(ObjectStreamClass.java:962)
    at java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1480)
    at java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1416)
    at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1174)
    at java.io.ObjectOutputStream.writeArray(ObjectOutputStream.java:1362)
    at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1170)
    at java.io.ObjectOutputStream.access$300(ObjectOutputStream.java:161)
    at java.io.ObjectOutputStream$PutFieldImpl.writeFields(ObjectOutputStream.java:1687)
    at java.io.ObjectOutputStream.writeFields(ObjectOutputStream.java:478)
    at java.awt.Container.writeObject(Container.java:3681)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at java.io.ObjectStreamClass.invokeWriteObject(ObjectStreamClass.java:962)
    at java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1480)
    at java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1416)
    at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1174)
    at java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:346)
    at javax.swing.event.EventListenerList.writeObject(EventListenerList.java:257)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at java.io.ObjectStreamClass.invokeWriteObject(ObjectStreamClass.java:962)
    at java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1480)
    at java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1416)
    at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1174)
    at java.io.ObjectOutputStream.defaultWriteFields(ObjectOutputStream.java:1528)
    at java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1493)
    at java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1416)
    at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1174)
    at java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:346)
    at projectclient.ConnectionPane.sendToServer(ConnectionPane.java:131)
    at projectclient.AddRecordFrame.btnAddRecordActionPerformed(AddRecordFrame.java:144)
    at projectclient.AddRecordFrame.access$000(AddRecordFrame.java:20)
    at projectclient.AddRecordFrame$2.actionPerformed(AddRecordFrame.java:94)
    at javax.swing.AbstractButton.fireActionPerformed(AbstractButton.java:2018)
    at javax.swing.AbstractButton$Handler.actionPerformed(AbstractButton.java:2341)
    at javax.swing.DefaultButtonModel.fireActionPerformed(DefaultButtonModel.java:402)
    at javax.swing.DefaultButtonModel.setPressed(DefaultButtonModel.java:259)
    at javax.swing.plaf.basic.BasicButtonListener.mouseReleased(BasicButtonListener.java:252)
    at java.awt.Component.processMouseEvent(Component.java:6504)
    at javax.swing.JComponent.processMouseEvent(JComponent.java:3321)
    at java.awt.Component.processEvent(Component.java:6269)
    at java.awt.Container.processEvent(Container.java:2229)
    at java.awt.Component.dispatchEventImpl(Component.java:4860)
    at java.awt.Container.dispatchEventImpl(Container.java:2287)
    at java.awt.Component.dispatchEvent(Component.java:4686)
    at java.awt.LightweightDispatcher.retargetMouseEvent(Container.java:4832)
    at java.awt.LightweightDispatcher.processMouseEvent(Container.java:4492)
    at java.awt.LightweightDispatcher.dispatchEvent(Container.java:4422)
    at java.awt.Container.dispatchEventImpl(Container.java:2273)
    at java.awt.Window.dispatchEventImpl(Window.java:2713)
    at java.awt.Component.dispatchEvent(Component.java:4686)
    at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:707)
    at java.awt.EventQueue.access$000(EventQueue.java:101)
    at java.awt.EventQueue$3.run(EventQueue.java:666)
    at java.awt.EventQueue$3.run(EventQueue.java:664)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:87)
    at java.awt.EventQueue$4.run(EventQueue.java:680)
    at java.awt.EventQueue$4.run(EventQueue.java:678)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
    at java.awt.EventQueue.dispatchEvent(EventQueue.java:677)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:211)
    at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:128)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:117)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:113)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:105)
    at java.awt.EventDispatchThread.run(EventDispatchThread.java:90) 
```

我不确定您需要什么代码，所以发表评论，我会发布。我不能一直重现这个问题，但有时它会在重新启动后消失，有时它不会。我真的不知道是什么原因造成的。有什么`AbstractTableModel`不可序列化的吗？我检查了我的表中没有空值，并且`SQLTableModel`类中没有静态成员：

```
package projectcommon;

import java.io.Serializable;
import java.util.ArrayList;
import javax.swing.table.AbstractTableModel;

/**
 * This class is used by both the server and client, and it defines how the data
 * from the database is organised and stored. Because it is serializable it
 * provides an easy means of communicating data with the server.
 *
 * @author Logan Dam
 */
public class SQLTableModel extends AbstractTableModel implements Serializable {

    /**
     * The variable used to store the table's column names.
     */
    String[] colNames;
    /**
     * The variable used to store the table's data.
     */
    ArrayList<Object[]> data;
    /**
     * An array defining the datatypes for the columns in the table.
     */
    Class<?>[] types;
    /**
     * A variable defining whether the user using the table is an admin or not.
     */
    private boolean isAdmin;
    /**
     * An array defining which columns in the table are editable.
     */
    private boolean[] isEditable;
    /**
     * A boolean variable that dictates whether the table is editable or not.
     * This is only used in special cases, such as when adding a new record to
     * the database.
     */
    private boolean addFrame = false;

    /**
     * Initialises a new {@code SQLTableModel} object based on predetermined data.
     *
     * @param colNames A {@code String} array containing the table's column names
     * @param types A {@code Class} array containing the table's data types.
     * @param data An {@code ArrayList} object containing the table's data.
     * @param isAdmin A {@code boolean} dictating whether the user is an admin or not.
     * @param isEditable A {@code boolean} array that defines which columns are editable
     * in the table.
     */
    public SQLTableModel(String colNames[], Class<?>[] types, ArrayList<Object[]> data, boolean isAdmin, boolean[] isEditable) {
    this.colNames = colNames;
    this.types = types;
    this.data = data;
    this.isAdmin = isAdmin;
    this.isEditable = isEditable;

    }

    /**
     * Get the data type of the given column.
     * @param columnIndex the index of the column.
     * @return A {@code Class} object representing the given column's type.
     */
    @Override
    public Class<?> getColumnClass(int columnIndex) {
//  System.out.println("columnindex " + columnIndex + ": " + types[columnIndex]);
    return types[columnIndex];
    }
    /**
     * Get a column's name by index.
     * @param column the index of the column.
     * @return A {@code String} object containing the column's name.
     */
    @Override
    public String getColumnName(int column) {
    return colNames[column];
    }
    /**
     * Gets all the column names in the table.
     * @return a {@code String} array containing all the column names in the table. 
     */

    public String[] getColumnNames() {
    return this.colNames;
    }

    /**
     * Get the data contained at the specified cell.
     * @param rowIndex the row the cell lies in.
     * @param columnIndex the column the cell lies in.
     * @return an {@code Object} containing the data in the specified cell.
     */

    @Override
    public Object getValueAt(int rowIndex, int columnIndex) {
//  System.out.println("rowindex: " + rowIndex);
//  System.out.println("columnIndex: " + columnIndex);
//  System.out.println("column length: "+ colNames.length);
//  System.out.println("num rows: "+ + data.size());
//
//  for (int i = 0; i < colNames.length; i++) {
//      System.out.println("Column " + i + ": "+ colNames[i]);
//      
//  }
//  for (int i = 0; i < data.size(); i++) {
//      System.out.println("row " + i + ": " + data.get(i));
//      
//  }
    return this.data.get(rowIndex)[columnIndex];
    }

    /**
     * Gets the number of columns in the table.
     * @return the number of columns in the table.
     */

    @Override
    public int getColumnCount() {
    return colNames.length;
    }

    /**
     * Gets the number of rows in the table.
     * @return the number of rows in the table.
     */

    @Override
    public int getRowCount() {
    return data.size();
    }
    /**
     * Sets the value of the specified cell.
     * @param aValue the new value to set the cell to.
     * @param rowIndex the row the cell lies in.
     * @param columnIndex the column the cell lies in.
     */
    @Override
    public void setValueAt(Object aValue, int rowIndex, int columnIndex) {
    Object[] update = this.data.get(rowIndex);
    update[columnIndex] = aValue;
    this.data.set(rowIndex, update);
    fireTableCellUpdated(rowIndex, columnIndex);
    }
    /**
     * Gets an entire row of data.
     * @param row the index of the row to fetch.
     * @return an {@code Object} array containing the row's data.
     */

    public Object[] getRowData(int row) {
    return data.get(row);
    }

    /**
     * Gets all the data types for each column in the table.
     * @return A {@code Class} array containing the types for each column.
     */
    public Class<?>[] getTypes() {
    return types;
    }
    /**
     * Only used in special cases, sets whether the table is editable at all or not.
     * @param addFrame [@code boolean} defining if the table is editable.
     */

    public void setAddFrame(boolean addFrame) {
    this.addFrame = addFrame;
    }

    /**
     * Checks whether the specified cell is editable or not.
     * @param rowIndex The row the cell lies within.
     * @param columnIndex The column the cell within.
     * @return True if the cell is editable, otherwise false.
     */
    @Override
    public boolean isCellEditable(int rowIndex, int columnIndex) {
    if (addFrame) {
        if (isAdmin) {
        if (isEditable[columnIndex]) {
            //System.out.println("col " + columnIndex + " editable: true");
            return true;
        } else {
            //System.out.println("col " + columnIndex + " editable: false");
            return false;
        }
        } else {
        //System.out.println("col " + columnIndex + " editable: false");
        return false;
        }
    } else {
        return false;
    }
    }
    /**
     * Adds a row of data to the table.
     * @param data The row to be added.
     */

    public void add(Object[] data) {
    this.data.add(data);
    fireTableRowsInserted(this.data.size(), this.data.size());
    }

    /**
     * Checks if the table is empty.
     * @return true if the table is empty, otherwise false.
     */
    public boolean isDataEmpty() {
    return this.data.isEmpty();
    }
} 
```

当我创建我的类时，注释的位用于调试，这个类有一段时间没有改变，所以它们不再需要了。

编辑：`sendToServer()`就在那里，所以我不必输入`flush()`，`reset()`每次我向流中写一些东西时：

```
static void sendToServer(Object obj) throws IOException {
out.writeObject(obj);
out.flush();
out.reset();
} 
```

其中 out 是`ObjectOutputStream`与服务器建立连接的。

编辑 2：这是我将 SQLTableModel 的实例发送到服务器的地方：

```
 ConnectionPane.sendToServer("add");
    ConnectionPane.sendToServer(lblTableName.getText());
    ConnectionPane.sendToServer(addTable.getModel());
    String response = (String) ConnectionPane.in.readObject();
    if (response.equals("done")) {
    closeFrame();
    } 
```

这是在服务器端接收它的位：

```
 else if (cmd.equals("add")) {
    String tableName = (String) client.in.readObject();
    String exec = "add " + tableName + " (";
    SQLTableModel data = (SQLTableModel) client.in.readObject(); //this is where the exception is thrown
    ... 
```

`addTable`是一个空表，其中包含用户填写信息的列名。完成后，他们单击添加，这就是它发送该表模型的地方。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T19:04:58.340

在`projectclient.ConnectionPane.sendToServer(ConnectionPane.java:131)`您调用某些对象的序列化时，最终会导致`EventListenerList`. 该对象的代码尝试传递序列化 a `java.lang.reflect.Constructor`，这就是失败的原因。但是，这是根本原因，近因是**反序列**化时的异常。*序列化因异常而中止，但显然您在写入*端没有检测到它，并且您看到异常已转移到读取端。

正如您在编辑中解释的那样，`sendToServer`序列化其参数。然后问题在于`projectclient.AddRecordFrame.btnAddRecordActionPerformed(AddRecordFrame.java:144)`哪个决定将什么对象发送到服务器。

如果您确实在尝试序列化整个`SQLTableModel`，那显然是一种误导的方法，因为这是一个 Swing GUI 类并且包含大量的簿记代码——除其他外，`EventListenerList`这在您的情况下是失败的。您可能只想传输表的内容，这是您控制的集合 - `ArrayList<Object[]> data`. 仅将该集合发送到服务器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T18:51:40.140

只需查看您的堆栈跟踪，这一行就说明了：

```
at javax.swing.event.EventListenerList.writeObject(EventListenerList.java:257) 
```

换句话说，`AbstractTableModel`保留一个任意事件侦听器对象的列表，这些对象可以是任何类，也可以`Serializable`不是，当它`AbstractTableModel`被序列化时，也会尝试序列化这些事件侦听器。当听众自己不是时，这将失败`Serializable`。这可以解释为什么这是一个暂时的问题，因为事件侦听器可以随着程序的运行来来去去。

但肯定还有其他问题：特别是，您没有对`data`数组的内容进行任何特殊安排，并且不能保证它包含的对象就是它们`Serializable`自己。

# actionscript-3 - 临时影片剪辑容器 as3

> ID：11419855
> 
> 赞同：1
> 
> 时间：2012-07-10T18:45:38.630
> 
> 标签：actionscript-3, containers, movieclip, temporary

假设我的舞台上有几个 MovieClip 类型的对象，当`MouseEvent.MOUSE_DOWN`事件在舞台上触发时，我希望所有这些对象都成为新创建的 Movieclip 的子对象。所以一个伪代码看起来像这样：

1.  当 mouse_down 发生时，从舞台上移除对象（`removeChild`？）
2.  创建一个新的 MovieClip 并将其添加到舞台。
3.  将步骤 1 中删除的所有对象添加到新创建的影片剪辑中。

对此有何指导方针？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T18:50:30.083

尝试：

```
var newMc:MovieClip;
function downEvent(e:MouseEvent){

    newMc = new MovieClip(); // create new MC

    newMc.addChild(the_old_movieClips);// add old MCs to the new MC

    stage.addChild(newMc); // add newMc to the stage
}
function getBack(){
    stage.addChild(the_old_movieClips);
    removeChild(newMc);
} 
```

不要删除孩子，使用`addchild`会将旧电影剪辑作为新电影剪辑的孩子

# android - 在 Eclipse 上安装 ADT

> ID：11419858
> 
> 赞同：19
> 
> 时间：2012-07-10T18:46:05.377
> 
> 标签：android, eclipse, plugins

这种说法不言自明……

无法完成安装，因为找不到一项或多项所需项目。

**正在安装的软件：Android Native Development Tools 20.0.0.v201206242043-391819** (com.android.ide.eclipse.ndk.feature.group 20.0.0.v201206242043-391819)

**缺少要求：Android 原生开发工具 20.0.0.v201206242043-391819** (com.android.ide.eclipse.ndk.feature.group 20.0.0.v201206242043-391819) 需要 'org.eclipse.cdt.feature.group 0.0.0 '但找不到

其他人有同样的问题吗？谷歌告诉我手动安装插件。

[ADT 安装](http://developer.android.com/sdk/installing/installing-adt.html)

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-08-24T10:22:38.883

我也遇到了这个问题，我通过下一个方法解决了。

1.  转到帮助，“安装新软件...”
2.  单击“可用的软件站点”
3.  搜索`http://download.eclipse.org/releases/indigo`并启用它
4.  搜索`http://download.eclipse.org/tools/cdt/releases/indigo`并启用它
5.  返回帮助，“安装新软件...”
6.  勾选“安装过程中联系所有更新站点以查找所需软件”
7.  安装 ADT 插件
8.  它必须工作！！！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-24T16:34:09.263

以防万一有人需要它，我遇到了同样的问题并解决了它。问题在于缺少的存储库。对于 Juno，我只是转到“安装新软件”> 单击“添加”并输入 Juno 作为名称，并在位置输入“http://download.eclipse.org/releases/juno”。之后一切正常。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-10T20:26:02.300

我见过这个。您是否完全安装了 Android SDK（您的平台文件夹中有任何内容）？我意识到我缺少一些东西，因为我无法访问 https 源。我必须启动 Android SDK 管理器并选中“强制 https://... 使用 http:// 获取源”框，以确保我看到了我需要为 SDK 安装的所有文件。

另外，在 Eclipse Help->Install New Software 中，确保选中“Show only software applicable to target environment”

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-10T20:15:23.913

如果您从 Eclipse IDE for C Developers 开始，安装可能会更顺利。该软件包已经包含 CDT 插件。

或者，尝试以下方法：

1.  在安装向导中，查找“可用软件站点”链接。点击它。确保您看到列出的存储库带有“http/download.eclipse.org/releases/juno”之类的 URL。并且该列表已启用。URL 的最后一段可能取决于您拥有的 Eclipse 版本... ganymede、helios、indigo、juno。

2.  返回安装对话框，确保选中“联系所有更新站点...”复选框。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-12T17:19:41.100

您可以使用 Eclipse for Java！只需确保您已选中“联系所有更新...”选项。它将完美无缺！

# vb.net - VB.Net Linq to Entities Null 比较 - “什么都没有”或“= 什么都没有”？

> ID：11419859
> 
> 赞同：7
> 
> 时间：2012-07-10T18:46:09.527
> 
> 标签：vb.net, linq-to-entities, nullable, vb.net-2010, nothing

我们在 VB.Net 中有几个项目，使用 .Net Framework 4 和 Linq to Entities 进行许多 SQL 查询。迁移到 EF 对我们来说是一个新的转变（已经使用了大约 4-6 个月），并且得到了高层管理人员的支持，因为我们可以更快地编写代码。我们仍然使用大量存储过程，但我们甚至还通过 Linq to Entities 执行这些过程。

我希望消除一些困惑，但我找不到一个有意义的直接答案。我们有一些查询，我们想要特定字段具有 NULL 值的记录。这些是简单的选择查询，没有聚合或左连接等。微软建议查询看起来像这个[MSDN 链接](http://msdn.microsoft.com/en-us/library/bb738687.aspx)：

```
dim query = from a in MyContext.MyTables
Where a.MyField = Nothing
Select a 
```

我有几个项目正是这样做的，而且效果很好，IDE 中没有警告。最近，另一个开发人员创建了一个新项目，当他像上面那样进行 null 检查时，我们都会在 IDE 中收到以下警告：

警告 1 此表达式将始终计算为 Nothing（由于来自 equals 运算符的 null 传播）。要检查该值是否为空，请考虑使用“无”。

比较项目，选项显式和选项严格对每一个都是打开的。如果我们忽略警告，我们会在应用程序运行时获得我们正在寻找的确切记录集。如果我将 = 符号更改为 IS，警告就会消失。但是为什么这个警告出现在一个项目中而不是其他项目中呢？即使在 MSDN 上也有使用等号运算符的示例，这令人困惑。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-10T19:24:06.717

生成的列应该是`Nullable(Of T)`

因此，您可以像这样检查该字段是否具有值：

```
dim query = from a in MyContext.MyTables
Where Not a.MyField.HasValue
Select a 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T18:52:23.407

我相信你在这里看到的`MyField`是一种`Nullable(Of T)`类型。可能是原始`Integer`的 ,`Single`等...

您看到此警告的原因是编译器将原始类型的正常相等运算符提升到`Nullable(Of T)`版本。它基本上执行以下操作

```
Dim myField As Integer? = a.MyField
Dim other As Integer? = Nothing
If myField = other Then
 ...
End If 
```

但问题是，当`Integer?`它的价值`Nothing`不等于任何东西时。因此，上述`Where`子句将始终返回`False`。编译器试图警告您这个有问题的角落，`Nullable(Of T)`并推动您进行`Is Nothing`检查，以确定是否`a.MyField`具有非空值。

这篇博客文章非常详细地解释了为什么会产生这个警告以及它背后的所有机制。本文是为 C# 编写的，但基本前提也适用于 VB.Net。

*   [http://blogs.msdn.com/b/abhinaba/archive/2005/12/14/503533.aspx](http://blogs.msdn.com/b/abhinaba/archive/2005/12/14/503533.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-10-11T13:31:52.367

至少在 LINQ to 对象中，您可以改用它：

```
Nullable(Of Integer).Equals(a, b) 
```

这适用于两者，或者两个值都不是 Nothing。

# iphone - 更改手势识别器的索引

> ID：11419866
> 
> 赞同：0
> 
> 时间：2012-07-10T18:46:41.943
> 
> 标签：iphone, indexing, uigesturerecognizer

我有 6 个手势识别器，每个手势识别器都与 ScrollView 内的 UIView 对象相关联，我想知道在识别手势时如何更改每个视图的索引。我应该更改每个 UIView 对象的索引还是可以从识别器对象本身更改索引？

感谢您的答复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T18:58:43.663

当你得到一个手势时，只需调用

```
[self.view bringSubviewToFront:gesture.view]; 
```

或者类似的东西，我不知道你的确切层次结构

# c# - C#，Emgu 网络摄像头 - 选择捕获大小

> ID：11419873
> 
> 赞同：8
> 
> 时间：2012-07-10T18:47:07.590
> 
> 标签：c#, video-capture, emgucv

我正在使用 Emgu 库在 C# 中集成开放式 CV 网络摄像头功能。

我使用此代码选择捕获设备并设置其大小：

```
camera = new Capture(0);
camera.SetCaptureProperty(CAP_PROP.CV_CAP_PROP_FRAME_WIDTH, videoSettings.width);
camera.SetCaptureProperty(CAP_PROP.CV_CAP_PROP_FRAME_HEIGHT, videoSettings.height); 
```

然后我将它显示在一个 imageBox 中，如下所示：`imageBox1.Image = camera.QueryFrame();`

然后要捕获当前帧的快照，我使用以下代码：

```
Image<Bgr, byte> snapshot = camera.QueryFrame();
snapshot.Save("snapshot.jpg"); 
```

虽然我希望能够以比预览窗口更高的分辨率保存快照。

但问题是，据我所知，我无法使用同一个网络摄像头创建新的“捕获”对象。所以我想知道是否可以将`camera.setCaptureProperty`高度和宽度设置为 1028x720，然后以某种方式裁剪它以将其显示在分辨率为 514x360 的 imageBox 中？

或者有没有其他方法可以做到这一点？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-11T08:00:47.500

我通过使用解决了这个问题

```
imageBox1.SizeMode = PictureBoxSizeMode.StretchImage; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T14:22:33.977

我通过使用**QueryFrame()中的****Resize()**方法解决了这个问题

 **```
currentFrame = grabber.QueryFrame().Resize(320, 240, Emgu.CV.CvEnum.INTER.CV_INTER_CUBIC); 
```**

# android - MediaPlayer 从服务器播放 mp4

> ID：11419882
> 
> 赞同：0
> 
> 时间：2012-07-10T18:47:43.037
> 
> 标签：android

我在服务器上有一些 mp4 文件，我需要使用该应用程序。这是我的代码：

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.watch);  
    VideoView videoView = (VideoView) findViewById(R.id.videoView1);
    MediaController mediaController = new MediaController(this);
    mediaController.setAnchorView(videoView);
    Uri video = Uri.parse("http://php page that return the mp4");
    videoView.setMediaController(mediaController);
    videoView.setVideoURI(video);
    videoView.start();
} 
```

我在真机 2.3.5 LogCat 上尝试了代码：

```
07-10 19:33:26.409: D/MediaPlayer(1432): Couldn't open file on client side, trying server side
07-10 19:33:26.479: D/VideoView(1432): onMeasure()
07-10 19:33:26.479: I/VideoView(1432):     Setting size: 320x202
07-10 19:33:33.379: D/VideoView(1432): onMeasure()
07-10 19:33:33.379: I/VideoView(1432):     Setting size: 320x180
07-10 19:33:33.419: I/VideoView(1432): start()
07-10 19:33:33.469: E/MediaPlayer(1432): error (1, -2147483648)
07-10 19:33:33.479: E/MediaPlayer(1432): Error (1,-2147483648)
07-10 19:33:33.489: D/VideoView(1432): Error: 1,-2147483648
07-10 19:34:12.809: W/KeyCharacterMap(1432): No keyboard for id 0
07-10 19:34:12.809: W/KeyCharacterMap(1432): Using default keymap: /system/usr/keychars/qwerty.kcm.bin 
```

# regex - Bash 正则表达式在句子中查找特定单词

> ID：11419885
> 
> 赞同：3
> 
> 时间：2012-07-10T18:47:45.890
> 
> 标签：regex, string, bash, scripting

我有这样一句话：

```
"The dog jumped over the moon because he likes jumping" 
```

我想找到所有匹配的单词`jump.*`，即`jumped`和`jumping`。我怎样才能做到这一点？

目前我有一个变量中的句子，`$sentence`. 而且我知道我想测试的匹配词，例如`$test`is `jump`。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T19:06:10.563

### 无管道 Bash 解决方案

如果您想纯粹在 Bash 中执行此操作，您可以使用正则表达式匹配运算符和内置的**BASH_REMATCH**变量来保存结果。例如：

```
re='\bjump[[:alpha:]]*\b'
string="The dog jumped over the moon because he likes jumping"
for word in $string; do
    [[ "$word" =~ $re ]] && echo "${BASH_REMATCH}"
done 
```

给定您的语料库，这将正确返回以下结果：

```
jumped
jumping 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-10T18:53:06.017

试试这个正则表达式：

```
/\bjump.*?\b/ 
```

见[这里](http://rubular.com/r/tv3ei80kFj)。`\b`匹配单词边界以及以 .`jump.*?`开头的所有内容`jump`。

在 bash 中，您可以将其与 grep 一起使用：

```
echo $sentence | grep -oP "\b$test.*?\b" 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-10T18:53:21.460

```
echo $sentence | tr ' ' '\n' | grep "^$test" 
```

更彻底：

```
echo $sentence | tr '[[:space:]]' '\n' | grep "^$test" 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-10T18:52:10.257

[http://www.linuxjournal.com/content/bash-regular-expressions](http://www.linuxjournal.com/content/bash-regular-expressions)

看起来它可能会帮助你。（我不擅长正则表达式或 bash，抱歉）

# visual-studio-2010 - 如何暂时排除正在构建的文件

> ID：11419886
> 
> 赞同：2
> 
> 时间：2012-07-10T18:47:50.700
> 
> 标签：visual-studio-2010, perforce

我的项目文件由 Perforce 控制，并且我已经安装了 SCC 插件，以便我可以在 Visual Studio 2010 中直接使用 Perforce。

这是我遇到的问题：

在项目内部，我在构建项目时不想考虑几个文件。如果我使用上下文菜单“从项目中排除”，我会看到以下警告消息：

> 您的源代码管理提供商无法删除已签出的项目。如果继续更改，您可能需要手动删除源代码管理数据库中的 xxx.‌h。

有我可以使用的解决方法吗？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T18:52:16.823

如果您只是不希望它们编译，请选择代码文件并查看“属性”窗口。将**Build Action**设置为 content 或其他一些非编译设置。

# c# - 读取 XML 文件中的属性

> ID：11419888
> 
> 赞同：0
> 
> 时间：2012-07-10T18:48:08.813
> 
> 标签：c#, xml, linq, linq-to-xml

我正在尝试读取一个看起来像这样的文件：

```
<tasks>
  <task name="Project Management" mode="Automatic" start="07/01/2012 00:00" duration="21" id="954471332"></task>
  <task name="Conception/Approval" mode="Automatic" start="07/01/2012 00:00" duration="6" percentComplete="1" id="1905425539"></task>
  <task name="Define Initial Scope" start="07/04/2012 00:00" finish="07/18/2012 00:00" percentComplete="0.31" id="1154759651"></task>
</tasks> 
```

我只想要, 和or的值`name`，以存在者为准。`start``finish``duration`

这是我到目前为止所拥有的：

```
XElement allData = XElement.Load(dlg.FileName);
if (allData != null)
{
    IEnumerable<XElement> tasks = allData.Descendants("task");
    foreach (XElement task in tasks)
    {

    }
} 
```

我确定我必须使用 Attribute 方法，但我不确定如何使用它或语法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T18:58:17.743

我建议在循环之前只获取您需要的元素和值：

```
XElement allData = XElement.Load(dlg.FileName);
if (allData != null)
{
  var tasks = allData.Descendants("task")
                     .Where(e => e.Attribute("name") != null
                                 && (e.Attribute("start") != null
                                     || e.Attribute("finish") != null))
                     .Select(e => new 
                     {
                       Name = e.Attribute("name").Value,
                       Start = e.Attribute("start").Value,
                       Finish = e.Attribute("finish").Value,
                     });
  foreach(var task in tasks)
  {
    // task.Name will have a value
    // task.Start and/or task.Finish will have a value.
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T18:53:06.860

您可以这样做来获取属性：

```
XElement allData = XElement.Load(dlg.FileName);
if (allData != null)
{
    IEnumerable<XElement> tasks = allData.Descendants("task");
    foreach (XElement task in tasks)
    {
        task.Attribute("name").Value;
        task.Attribute("start").Value;
        task.Attribute("finish").Value;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T19:07:59.440

你可以这样做：

```
var doc = XDocument.Load(dlg.FileName);
var query = doc.Descendants("task")
    .Select(task => new
    {
        Name = (string)task.Attribute("name"),
        Start = (DateTime)task.Attribute("start"),
        Finish = (DateTime?)task.Attribute("finish"),
        Duration = (long?)task.Attribute("duration"),
    }); 
```

如果相应的属性不存在，or 字段将为空`Finish`。`Duration`

然后只需遍历查询中的项目即可按照您的意愿进行操作。

```
foreach (var item in query)
{
    var app = c1Schedule1.DataStorage.AppointmentStorage.Appointments.Add();
    app.Subject = item.Name;
    app.Start = item.Start;
    if (item.Finish != null)
    {
        app.Finish = item.Finish.Value;
    }
    if (item.Duration != null)
    {
        app.Duration = item.Duration.Value;
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-10T18:56:09.170

假设您有一个对象任务，那么类似：

```
 XDocument doc = XDocument.Load(dlg.FileName);
  List<Task> infos = from c in doc.Descendants("task")
              select new Task (c.Element("name").Value, c.Element("start).Value, 
              c.Element("finish").Value); 
```

# caching - 乐观并发模型下如何处理AppFabric中的数据争用？

> ID：11419890
> 
> 赞同：0
> 
> 时间：2012-07-10T18:48:30.413
> 
> 标签：caching, appfabric

根据[这个](http://msdn.microsoft.com/en-us/library/ee790915.aspx)MSDN 页面，“Put 通过将版本信息作为可选参数来支持乐观并发；只有当要替换的对象是相同版本时，Put 才会成功。”

当版本确实不同时，有什么好的解决方案？缓存客户端是 WCF 服务。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T22:17:33.830

如果版本不同，则表明另一个客户端在您之前进入并更新了缓存的对象。您可以通过捕获`DataCacheException`您对 Put 的调用中将抛出的 that 并检查enum 来检测这一点 -`ErrorCode`是要测试的特定条目。捕获此错误表明*当前*客户端正在使用的缓存项目已过时，您可能应该从客户端获取最新版本（您可能希望或可能不希望向用户显示），然后再尝试再次进行更改.`DataCacheErrorCode``CacheItemVersionMismatch`

 *这就是为什么在乐观并发场景中，您希望获取缓存的对象，进行更改，然后尽快将其返回到缓存中——您不希望在任何类型的长时间运行的进程中保留一个版本或你开始看到这些问题。*

# c++ - 单一可执行文件和不同的服务

> ID：11419891
> 
> 赞同：1
> 
> 时间：2012-07-10T18:48:33.660
> 
> 标签：c++, windows-services

我想拥有多个服务的单个可执行部分。即服务的名称会不同，但可执行文件会不同。如何识别调用了哪个服务`ServiceMain`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T21:24:45.963

你不能。您应该为每个服务提供自己的 ServiceMain 功能。

[http://msdn.microsoft.com/en-us/library/windows/desktop/bb540475%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/bb540475%28v=vs.85%29.aspx)上给出了一个示例。

当使用“INSTALL”参数运行此应用程序时，它使用 CreateService 函数将自己注册为服务。如果您的可执行文件提供多种服务，则需要多次调用 CreateService。

当应用程序在没有“INSTALL”参数的情况下运行时，它会填充一个 DispatchTable 并将其传递给 StartServiceCtrlDispatcher。如果您的可执行文件支持多个服务，您的 DispatchTable 将包含多个条目。给每个条目一个不同的 ServiceMain 函数，Windows 将调用正确的函数。

# html5-canvas - 在 THREE.js 中绘制椭圆

> ID：11419896
> 
> 赞同：1
> 
> 时间：2012-07-10T18:48:54.080
> 
> 标签：html5-canvas, three.js

我正在尝试用 THREE.js 绘制一个 3D 椭圆。

我注意到在开发版本 (r50-dev) 中添加了`EllipseCurve`( [extras/core/Curve.js](https://github.com/mrdoob/three.js/blob/dev/src/extras/core/Curve.js) ) 和`path.ellipse`( [extras/core/Path.js](https://github.com/mrdoob/three.js/blob/dev/src/extras/core/Path.js) )。

不幸的是，我是 THREE.js 的新手，虽然我可以做一些基本的事情，但我找不到关于 Curve 的教程，更不用说关于仍在开发中的 EllipseCurve 的教程了。

我也知道我可以用多条贝塞尔曲线来做到这一点。

任何指针将不胜感激！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T05:32:44.023

尝试使用[此示例](http://mrdoob.github.com/three.js/examples/webgl_geometry_shapes.html)作为参考并查看[EllipseCurve](https://github.com/mrdoob/three.js/blob/dev/src/extras/core/Curve.js#L439)代码。

# r - 二维链表 R 编程语言

> ID：11419897
> 
> 赞同：0
> 
> 时间：2012-07-10T18:48:56.363
> 
> 标签：r, linked-list

如何在 R 中构建二维链表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T19:48:52.560

对于链表，您需要指针，而 R 没有（尽管在 C++ 中，链表可以不[使用指针来实现](https://stackoverflow.com/questions/3002764/using-c-is-a-linked-list-implementation-without-using-pointers-possible-or-not)）。基本的 R 数据结构是列表、data.frames、数组等，链表对于 R 来说似乎有点低级。如果你提供更多关于你想要什么的背景，我们也许可以在 R 中建议一个合适的数据结构。

# c# - 带参数的文件上传？

> ID：11419902
> 
> 赞同：2
> 
> 时间：2012-07-10T18:49:07.917
> 
> 标签：c#, asp.net, .net, post, file-upload

我正在尝试使用 C# 和 .NET Framework 4.0 制作一个程序，该程序可以通过 HTTP POST 请求上传本地文件以及一些额外的请求参数。

基本上它会导致这样的请求：

```
http:\\example.com\upload.html?file=<filedata goes here>&private=1&type=archive 
```

它应该是 POST 请求，但不是 GET 请求。

ASP.NET 4.0 是否提供任何方法来做到这一点？

为清楚起见进行编辑：我想用我的程序将本地文件上传到服务器，我的程序不会**在**服务器上运行。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-10T19:09:50.360

是的，您可以使用[System.Net.HttpWebRequest](http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.aspx)类。将 Method 属性设置为“POST”以使用 POST 而不是 GET。[这个问题](https://stackoverflow.com/questions/566462/upload-files-with-httpwebrequest-multipart-form-data)似乎已经涵盖了。

# c# - 绑定到视图模型 WPF 中对象的属性

> ID：11419906
> 
> 赞同：0
> 
> 时间：2012-07-10T18:49:28.307
> 
> 标签：c#, wpf, xaml, binding

在我的课程“ScheduleViewModel”中，我有以下属性：

```
private ReminderFilter filter;
public ReminderFilter Filter
{
 get { return filter; }
 set
 {
     filter = value;
     NotifyPropertyChanged("Filter");
 }
} 
```

我想做的是绑定到这个对象的属性，而不需要在视图模型中公开它们。我尝试了以下 XAML，但没有成功：

```
<CheckBox IsChecked="{Binding Filter.Complete, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}" Content="Show Completed"></CheckBox> 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T19:17:41.363

我认为您需要双向绑定。Oneway 只会更新视图。如果您选中该复选框，则该值不会向下传播回对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-19T16:19:23.447

如果您想避免在视图模型中公开该属性，则必须在 ReminderFilter 模型中实现 INotifyPropertyChanged。

[模型属性更改时获取通知的类似 SO 讨论](https://stackoverflow.com/questions/9931323/get-notified-when-properties-change-in-the-model)

我知道您说过您宁愿不在视图模型中公开该属性，但如果您反对在模型中实现 INotifyPropertyChanged：

```
 private ReminderFilter filter;
    public bool FilterComplete
    {
        get
        {
            return filter.Complete;
        }
        set
        {
            if (value == filter.Complete)
                return;
            filter.Complete = value;
            NotifyPropertyChanged("FilterComplete");
        }
    } 
```

xml:

```
<CheckBox IsChecked="{Binding FilterComplete}" Content="Show Completed"></CheckBox> 
```

# jquery - 如何在jQuery中对连续执行的函数调用进行分组？

> ID：11419914
> 
> 赞同：1
> 
> 时间：2012-07-10T18:49:52.357
> 
> 标签：jquery

我有许多 jQuery 动画效果应用于页面上的某些元素。现在我的代码如下所示：

```
jQuery("#bgd_balance").animate({backgroundPositionY: "0px",},800,"swing");
jQuery(".balance_left_box").delay(2000).slideDown(200,"easeInCirc");
jQuery(".balance_left_box p.first-line").delay(2400).slideDown(600,"easeInCirc");
jQuery(".balance_left_box").delay(1000).animate({height:"270px",top:"64px",100,"easeInCirc"); 
```

**我面临的问题**是，当我调整某个元素的延迟时，我必须经历所有事情并相应地调整所有其他延迟。

是否有可能有这样的东西（**伪代码**）：

```
queue.add(
       delay(2000),
       jQuery(".balance_left_box").slideDown(200,"easeInCirc"),
       delay(2000),
       jQuery(".balance_left_box p.first-line").slideDown(600,"easeInCirc");
       delay(1000),                         
       jQuery(".balance_left_box").animate({height:"270px", top:"64px"},100,"easeInCirc");
).run(); 
```

我希望代码不言自明。

我知道我可以通过添加回调函数来调用来实现这种“排队”，`animate()`但是生成的代码将非常庞大且难以阅读 IMO。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T18:56:00.480

你可能想看看我对[Can有人也向我解释 jQuery.queue 的](https://stackoverflow.com/questions/1058158/can-somebody-explain-jquery-queue-to-me/3314877#3314877)回答，但这里有一个快速示例，说明如何在空对象上使用队列来创建一个非常简单的队列：

```
var tempQueue = jQuery({});

tempQueue.delay( 2000 );
tempQueue.queue( function( next ) {
    // note using the callback on the animation to call the "next" function in the queue
    jQuery( ".balance_left_box" ).slideDown( 200, "easeInCirc", next );
});

tempQueue.delay( 2000 );
tempQueue.queue( function( next ) {
    jQuery( ".balance_left_box p.first-line" ).slideDown( 600, "easeInCirc", next );
});
tempQueue.delay( 1000 );
tempQueue.queue( function( next ) {
    jQuery( ".balance_left_box" ).animate({
        height: "270px",
        top: "64px"
    }, 100, "easeInCirc", next );
}); 
```

# c++ - 允许开发人员为每个输入定义独特的通用程序逻辑，而无需硬编码

> ID：11419915
> 
> 赞同：0
> 
> 时间：2012-07-10T18:49:55.810
> 
> 标签：c++

我有一些代码正在阅读并处理数十个输入源。目前，输入主要是带有一些特殊字段的 CSV，但 CSV 文件的完整结构和内容取决于输入源。有人建议，每种输入类型有时都需要特殊处理来“修复”输入的某些已知问题。但是，需要做什么（如果有的话）将根据每个输入源的独特问题而有所不同，需要为每个输入源进行的错误检测之间没有共同点。我的代码最终将希望能够进行这些类型的错误更正，如果我遇到新问题，我应该也能够让我的代码开始更正新问题。

显然，这并不容易解决，因为在将其交给我之前，我并不确切知道需要运行什么逻辑。我的经理（不是开发人员）暗示他会在收到的每个独特逻辑中硬编码，但显然我不喜欢这个选项。但是，如果我想避免大量晦涩难懂的硬编码逻辑，我需要某种配置方法，它允许开发人员定义某种通用概念来测试输入并可能修改/纠正已知的错误字段。

此外，我的程序将在流数据上连续运行。理想情况下，我有一种方法可以在代码中添加一种新形式的纠错，*而无需*停止/重新启动它。

那么，让我的代码为每个源配置此类通用逻辑的最佳方法是什么？想到的选项是在我的配置文件中有某种“语言”，这将允许开发人员说“如果 field3 > field2 丢弃”之类的话，这似乎很难开发并且仍然不会自动更新，除非我时不时有我的代码，然后返回并检查配置文件是否有更改。或者可能有一个共享对象，其中包含这些类型的检查，开发人员可以在每次有人向我们提供需要解决的新问题时添加新的错误检查功能；但这仍然仅比硬编码逻辑高出一步。

关于最佳设计方法的任何建议？任何现有的图书馆可以为我做部分工作吗？我正在使用纯 C++（不是 C++11）。

编辑：谢谢大家的意见，但我没有提到一个主要细节。这一切都发生在重负载的流处理期间。所以我需要确保我选择的任何方法都没有太大的开销来运行。我会考虑尝试合并脚本语言，但我担心它可能会“花费”太多。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T19:31:16.993

你不想在你的程序中混淆这个特殊的“修复”处理。它很可能会导致代码混乱。

有一个预处理步骤，将您的待固定输入转换为您的实际程序的固定输入。这样，您的真实程序只做一件事并保持简单。

您可以有单独的程序来处理每个特定的输入来进行转换。这些程序可以利用跨不同输入可能需要的通用例程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T21:22:56.237

我最终决定使用插件架构。每个输入都会在运行时加载它自己的插件。这速度很快，可以很好地封装代码，并且我可以在程序运行时检测新插件和新代码中的热插拔。

# node.js - URL 表示

> ID：11419921
> 
> 赞同：1
> 
> 时间：2012-07-10T18:50:20.537
> 
> 标签：node.js, mongodb, performance, url, database

我想知道如何有效地将网站 URL 存储在数据库中（在我的例子中是 mongoDB）......

问题：它应该被索引以实现快速查询性能，但 mongo 只允许对小于 1024 字节的字段进行索引。

我考虑过散列或 base64 来缩小 URL……但由于我使用单线程网络服务器（node.js），我不想在上面做繁重的工作……

关于实现这一目标的其他方法是否有任何好主意（替代表示应该是唯一的......）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T19:17:58.347

这个问题在 10gen 的 MongoDB 培训期间出现，并且散列被作为可行的解决方案提出。为 URL 生成 MD5 散列不应该是计算密集型的。我绝对不建议使用 base64 编码，因为那只会扩展 URL 字符串。

目标是创建一个具有高基数的索引，但这并不意味着哈希值必须是唯一的。如果您在查询中同时包含哈希和 URL，您将利用高度选择性的哈希索引，然后 MongoDB 将在索引命中中匹配 URL。在以下示例中，我们假设两个 URL 都存在哈希冲突：

```
$ mongo --quiet
> db.urls.insert({_id: 1, url: "http://google.com", hash: "c7b920f"});
> db.urls.insert({_id: 2, url: "http://yahoo.com", hash: "c7b920f"});
> db.urls.find({hash: "c7b920f"})
{ "_id" : 1, "url" : "http://google.com", "hash" : "c7b920f" }
{ "_id" : 2, "url" : "http://yahoo.com", "hash" : "c7b920f" }

> db.urls.find({hash: "c7b920f", url: "http://google.com"})
{ "_id" : 1, "url" : "http://google.com", "hash" : "c7b920f" }

> db.urls.ensureIndex({hash: 1})
> db.urls.find({hash: "c7b920f", url: "http://google.com"}).explain()
{
    "cursor" : "BtreeCursor hash_1",
    "nscanned" : 2,
    "nscannedObjects" : 2,
    "n" : 1,
    "millis" : 0,
    "nYields" : 0,
    "nChunkSkips" : 0,
    "isMultiKey" : false,
    "indexOnly" : false,
    "indexBounds" : {
        "hash" : [
            [
                "c7b920f",
                "c7b920f"
            ]
        ]
    },
    "server" : "localhost:27017"
} 
```

我不确定您是否有额外的业务要求来保证整个集合中的 URL 唯一性，但上面的示例只是为了表明从查询的角度来看这不是必需的。当然，任何散列算法都会有一定的冲突机会，但您有比 MD5 更好的选择，仍然可以满足 1024 字节的限制。

# python - request.accept_language 在 python 中始终为空

> ID：11419922
> 
> 赞同：0
> 
> 时间：2012-07-10T18:50:20.507
> 
> 标签：python, pylons

在 pylons 项目中，当我执行 request.accept_language.best_matches() 时，它返回 Null。通过转到 firefox 中的 Preferences-Content-Languages，我在浏览器中设置了 2 种语言（en-us 和 es-ar）。

如何获取浏览器中指定的语言？

`repr(request.accept_language)`给`<NilAccept: <class 'webob.acceptparse.Accept'>>`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T19:54:44.977

尝试查看`request.headers['accept-language']`，或者实际上是整个`request.headers`对象。我怀疑您的浏览器没有提供这些标题。

另外，看一下wireshark中的浏览器请求，以及服务器上的客户端请求。

# android - 从 logcat 输出中禁用 WebView 消息

> ID：11419923
> 
> 赞同：10
> 
> 时间：2012-07-10T18:50:20.593
> 
> 标签：android, webview, logcat, android-logcat

我们使用 WebViews 在 https 方案后面显示网页，并故意在其上显示“不安全内容”（非 https 资源）以提高性能，但 WebView 不断输出 logcat 警告消息。反正有禁用/隐藏它们吗？

从技术上讲，它可以将敏感 URL 泄漏到可以读取 logcat 输出的任何内容，因此能够隐藏它真的很棒。

`07-10 11:42:56.198: W/Web Console(32423): The page at https://secure_url displayed insecure content from http://insecure_url.`

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-15T10:57:32.303

这是可能的。

只需像这样为您的 WebView 覆盖 WebViewClient ：

```
webView.setWebChromeClient(new WebChromeClient() 
{
   @Override
   public boolean onConsoleMessage(ConsoleMessage cm) {
      Log.d("TAG", cm.message() + " at " + cm.sourceId() + ":" + cm.lineNumber());
      return true;
   }
}); 
```

您当然可以注释掉日志行，或者只创建一个 Log 类并在进行发布构建时禁用日志记录。

# java - Eclipse 插件：检查界面是否已加载

> ID：11419929
> 
> 赞同：0
> 
> 时间：2012-07-10T18:50:45.827
> 
> 标签：java, eclipse, plugins

我正在构建一个在编辑器中执行各种操作的 Eclipse 插件 - 问题是我的代码在 UI 代码加载之前加载和启动（我相信），因此在启动时出现空指针错误。

我找不到一个“isTheInterfaceLoaded()”方法，所以我使用下面的代码来检查接口是否启动。

```
public static boolean areWeOnline() {
    IFile file = null;
    IWorkbenchWindow win = getWorkBenchWindow();
    IWorkbenchPage page = win.getActivePage();
    if (page != null) {
        IEditorPart editor = page.getActiveEditor();
        if (editor != null) {
            IEditorInput input = editor.getEditorInput();
            if (input instanceof IFileEditorInput) {
                file = ((IFileEditorInput) input).getFile();
            }
        }
    }
    if (file == null) {
        return false;
    }
    else
    {
        return true;
    }
//JR got to be a better way - stackoverflow it?
} 
```

（评论确实在代码中） - 现在这有效，但我确信必须有其他一些更优雅的方式来做到这一点 - 有什么想法吗？

# c# - 使用转换器增加选定的 ListViewItem 高度

> ID：11419932
> 
> 赞同：1
> 
> 时间：2012-07-10T18:51:07.557
> 
> 标签：c#, wpf, xaml, listview

我正在尝试以下方法将**列表视图中选定列表视图项的大小增加 25%**：

```
<Style x:Key="ListView.AlternatingColors_HeightIncreaseIfSelected" 
    TargetType="ListViewItem">
    <Style.Triggers>
        <Trigger Property="IsSelected" Value="True">
            <Setter Property="Height">
                <Setter.Value>
                    <Binding Path="ActualHeight" 
                        ConverterParameter="@VALUE*1.25" 
                        RelativeSource="{RelativeSource Self}">
                        <Binding.Converter>
                            <Converters:MathConverter />
                        </Binding.Converter>
                    </Binding>
                </Setter.Value>
            </Setter>
        </Trigger>
        ... 
```

但是，我得到一个无限循环，即使触发器是`IsSelected`. 我尝试使用`Path="Height"`，但将 NaN 作为转换器的值。

以上来自 ListView 上设置的样式`ItemContainerStyle`，以防我`RelativeSource`可能不正确，但我确实尝试了几种变体。

知道我怎么能做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T20:56:38.203

无限循环被创建，因为绑定目标修改了绑定源。因此，绑定值将被反复计算。由于您只想增加一次高度，因此只需设置

```
Mode=OneTime 
```

装订上。当源更改时，这将停止刷新绑定。

# java - Java 搜索二维字符串数组

> ID：11419934
> 
> 赞同：0
> 
> 时间：2012-07-10T18:51:14.360
> 
> 标签：java

我正在尝试在java中对二维数组实现顺序搜索。

我目前有两个班。在第一类中，用户将数据值输入到数组中并输入他希望搜索的词（在他刚刚输入的数组/数据值中）。

此搜索由一种方法（第二类）处理，该方法进行顺序搜索，然后将结果传递回第一类。

我曾尝试使用以下代码，但顺序搜索不起作用......

**文件#1（输入文件）：**

```
static public void s_2d_string () {
            int counter,x;
            counter = 2;

            String[][] sortValues = new String[counter+1][2];

            for (x=0;x<counter;x++) {
                    System.out.print("Enter book name: ");
                sortValues[x][0] = readLine();
                    System.out.print("Enter book author: ");
                sortValues[x][1] = readLine();

            }
            System.out.print("Which column would you like to sort by? 1 or 2? ");
            String sortBystring = readline();
            int sortBy;
            sortBy = Integer.parseint(sortBystring);
            sortBy = sortBy-1;

            System.out.print("Enter search term: ");
            String searchterm = readLine();

            sortValues = s.sort(sortValues,counter, sortBy, searchterm);

            int flagcounter_int = Integer.parseInt(sortValues[0][0]);

            System.out.println(flagcounter_int + " results found.");

            for (x=0;x<flagcounter_int;x++) {
                    System.out.println(sortValues[x+1][0] + ", " + sortValues[x+1][1]);
            }
    } 
```

**文件#2：**

```
static public String[][] sort (String data[][], int totalNo, int sortBy, String searchterm)  {
        boolean found = false;    
        int flagcounter = 0;
            if (sortBy == 0) {
                    for (int x=0; x<totalNo;x++) {
                            if (searchterm.equals(data[x][0])) {
                                    found = true;
                                    flagcounter = flagcounter+1;
                                    data[flagcounter] = data[x];
                            }
                    }
            }
            if (sortBy == 1) {
                    for (int x=0; x<data.length;x++) {
                            if (searchterm.compareTo(data[x][1]) == 0) {
                                    found = true;
                                    flagcounter = flagcounter+1;
                                    data[flagcounter] = data[x];
                            }
                    }
            }
            String flagcounter_string = Integer.toString(flagcounter);
            data[0][0] = flagcounter_string;
                    return data;
                    } 
```

具体问题是，如果我尝试在“n”列中搜索术语“k”并且术语“k”出现在第一行（无论哪一列），搜索功能将列出数组结果中的行数找到并列出结果：行数，k（重复数组中有多少行）。如果第一行没有出现“k”，则不会出现此问题（搜索功能完美运行）。

如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T19:03:50.657

不确定错误在哪里，您应该提供所有代码。

但可能的原因是

1）你同时使用`for(int x=0; x<totalNo;x++)`and `for(int x=0; x<data.length;x++)`，我只会坚持第二种方式，那么你甚至不需要 totalNo 参数

2）对于字符串比较，你同时使用`searchterm.equals(data[x][0])`and `searchterm.compareTo(data[x][1]) == 0`，我会坚持第一种方式

3）不要将搜索例程称为“排序”，人们会期望一个称为排序的例程，嗯，排序..

4）考虑使用`if (searchterm.equals(data[x][sortBy ])) {`，因为你不需要区分这两种类型的搜索。

T。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T18:58:28.297

您有一个错误：在该`sort`方法中，第一个 for 循环（when `sortBy == 0`）在 when 终止`x<totalNo`，但它应该是`x<data.length`（就像您的第二个循环一样）。

作为一般性评论，您的代码很糟糕，无论它是否有效。我建议：

*   尽可能使用集合而不是数组
*   而不是有两个循环，有一个循环并简单地`sortBy`用作索引，而不是将列索引硬编码为`0`或`1`
*   使用`.equals()`而不是`.compareTo() == 0`
*   使用类返回排序结果，而不是将数据塞进数组

# android - 同时使用前置和后置摄像头android

> ID：11419940
> 
> 赞同：24
> 
> 时间：2012-07-10T18:51:39.657
> 
> 标签：android, android-camera

我知道这个问题已经被问过很多次了。一年多前我曾寻找过它，但没有找到任何东西，所以再次发布这个问题以收集是否有任何新的想法/方法或黑客。

我希望能够从 Android 设备中的两个摄像头（正面和背面）捕获视频。

到目前为止，我唯一的想法是如何每 0.1 秒在前后之间切换一次，但是我从来没有能够编写这个代码。请任何人对此提供任何帮助。

另一个想法是 - 视频通常以每秒 15 或 30 帧的速度捕获。假设它是每秒 30 帧。如果有一种方法可以将这些帧前后交替，那么我们可以拥有每秒 15 帧的正面视频和每秒 15 帧的背面视频。这可能吗？如果是，那怎么办？请建议。音频会发生什么？也许我们可以将音频限制为仅其中一个视频记录（正面或背面）。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2015-03-02T13:42:45.050

据我测试，在 HTC m8、OnePlusOne 和摩托罗拉 Nexus 6 上是可能的。更多的手机可能支持它，但您只需要在手机上进行测试，看看应用程序是否崩溃。

您为每个可用的摄像头创建一个摄像头对象，并将每个摄像头附加到预览回调。

-edit- 到目前为止，我发现这适用于基于 Snapdragon 801 的手机。不知道他们是否都这样做或其他 SOC 支持它，但这就是我到目前为止所发现的。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-16T16:41:08.223

这*是*可能的，但到目前为止，只有即将推出的三星 Galaxy S4 才有可能。

它具有[双摄像头功能](http://www.samsung.com/global/microsite/galaxys4/fun.html "双摄像头 - 看到故事的两面。")，但在这个阶段谁知道它是硬件依赖还是三星的软件修改。

![双摄像头 - 看到故事的两面。](../Images/3d21bc8b8624234ec89cb93414f05cdf.png)

希望它可以移植到其他手机，如果它只是软件的话。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-07-10T19:46:16.067

您不能同时使用两者，并且每 0.1 秒在每个相机之间切换一次效果不佳。获取和释放相机对象非常昂贵，而且效果并不理想。

# silverlight - 如何在 Silverlight 中刷新图像？

> ID：11419943
> 
> 赞同：1
> 
> 时间：2012-07-10T18:51:41.037
> 
> 标签：silverlight, cache-control

我尝试动态加载图像。XAML 是：

加载图像的代码是：（由后面代码中的按钮单击事件触发）

```
Image myimage = new Image() { Source = new BitmapImage(new Uri(url)) };
this.myPlayer.Content = myimage; 
```

URL 指向图像的站点。假设我有如下 URL 的图像：

```
"http://mysite/myfolder/my.jpg" 
```

然后我运行应用程序，单击按钮，我可以毫无问题地获取图像并将其显示在 UI 中。

然后我用相同的名称覆盖服务器上的图像文件，然后再次单击按钮，图像没有刷新。我需要为新的图像显示重新加载整个 SL 应用程序。如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-01-23T17:50:18.517

解决该问题的最简单方法是在图像 URL 的末尾放置一个随机数。

```
Random random = new Random();
int randomValue = random.Next(1000000);  // will return value between 0 & 1,000,000
string base = "http://mysite/myfolder/my.jpg";
string url = base + "?unused=" + randomValue;
//Note url now equals: "http://mysite/myfolder/my.jpg?unused=####"

Image myimage = new Image() { Source = new BitmapImage(new Uri(url)) };
this.myPlayer.Content = myimage; 
```

这是有效的，因为 Web 服务器会自动忽略`?unused=`附加到图像名称的部分。

每次滚动此函数时，您应该会收到一个新的随机值，`random.Next(...)`该值将指示“新”图像请求，并将绕过可能正在进行的任何缓存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T10:10:53.847

`BitmapImage.CacheOption`您可以使用以下属性指定缓存行为：http: [//msdn.microsoft.com/fr-fr/library/system.windows.media.imaging.bitmapimage.cacheoption.aspx](http://msdn.microsoft.com/fr-fr/library/system.windows.media.imaging.bitmapimage.cacheoption.aspx)

`OnLoad`您可以先尝试：http `None`: [//msdn.microsoft.com/fr-fr/library/system.windows.media.imaging.bitmapcacheoption.aspx](http://msdn.microsoft.com/fr-fr/library/system.windows.media.imaging.bitmapcacheoption.aspx)

# android - 为什么 Sonar 没有在 Jenkins 上读取我的 JUnit XML 结果？

> ID：11419948
> 
> 赞同：4
> 
> 时间：2012-07-10T18:52:03.407
> 
> 标签：android, junit, jenkins, sonarqube

我正在尝试从我们的 Jenkins为我们的 Android 项目构建到[Sonar中的持续集成中获取 JUnit 测试报告。](http://sonarsource.org)我离成功只有一步之遥，我想不出最后一步。

构建是使用 Ant 完成的。

我正在使用[Jenkins 启动的模拟器](https://wiki.jenkins-ci.org/display/JENKINS/Android+Emulator+Plugin)并使用[缺少的 android XML JUnit test runner](http://code.google.com/p/the-missing-android-xml-junit-test-runner)运行测试。测试运行，并且我使用测试运行程序作者提供的说明成功地将 JUnit XML 结果文件（`com.my.package.thing-TEST.xml`等）从设备中提取到指定目录中。

声纳分析是使用[Jenkins Sonar 插件](http://docs.codehaus.org/display/SONAR/Hudson+and+Jenkins+Plugin)提供的“调用独立声纳分析”构建步骤完成的。我已经设置了项目属性，以便所有静态源分析等都成功推送到 Sonar 服务器。

我的问题是它不会将 JUnit 测试结果与所有其他分析一起推送。我已经按照[Sonar 关于重复使用测试报告](http://docs.codehaus.org/display/SONAR/Code+Coverage+by+Unit+Tests#CodeCoveragebyUnitTests-ReusingExistingReports)的说明进行操作。值得注意的是，我设置了这些属性：

```
sonar.dynamicAnalysis=reuseReports
sonar.surefire.reportsPath=android/REDACTED-test/junit-results 
```

我可以在构建输出中看到它应该解析结果的位置：

```
17:52:28.013 INFO        org.sonar.INFO - Execute Findbugs 2.0.0 done: 25446 ms
17:52:28.378 INFO  p.PhasesTimeProfiler - Sensor FindbugsSensor done: 25812 ms
17:52:28.378 INFO  p.PhasesTimeProfiler - Sensor SurefireSensor...
17:52:28.379 INFO  s.p.s.SurefireSensor - parsing /jenkins/jobs/REDACTED/workspace/android/REDACTED-test/junit-results
17:52:28.383 INFO  p.PhasesTimeProfiler - Sensor SurefireSensor done: 5 ms
17:52:28.383 INFO  p.PhasesTimeProfiler - Sensor CpdSensor...
17:52:28.384 INFO   o.s.p.cpd.CpdSensor - SonarEngine is used 
```

我已经登录到构建机器来查看提到的目录，并且我已经确认那里有几个 JUnit XML 文件，但是由于某种原因，Sonar 服务器仍然报告零测试。由于 SurefireSensor 只需要 5 毫秒，我很确定它没有看到和/或打开结果文件，但我不知道为什么。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-14T16:55:04.240

运行程序以以下格式生成测试结果名称：

`android.package.name-TEST.xml`

emma surefire 插件仅查找名称以 .xml 开头的 .xml 文件`"TEST-"`。不幸的是，缺少的 android XML 测试运行器仅提供后缀功能，因此您必须通过添加`"TEST-"`到前面来手动更改每个文件名。

# validation - 值对 Seam 和 JFS 无效

> ID：11419951
> 
> 赞同：1
> 
> 时间：2012-07-10T18:52:11.100
> 
> 标签：validation, jsf, seam

我必须创建一个名为 listaInformacaoMista 的数组列表，然后将一个对象放入其中，然后放入另一个数组列表，如下面的代码：

listaInformacaoMista.add(informacao); listaInformacaoMista.addAll(informacoes);

但是“informacao”是我单独创建的对象，“informacoes”是我使用服务方法从数据库中获得的列表。问题是：当我在我的 XHTML 中使用一个组件并选择“informacao”（我单独创建的）时，我的应用程序发生错误：“值无效”。详细信息：我已经使用了 Seam 的转换器，并且已经覆盖了 equals 和 hashcode 方法。

我需要一些帮助，请。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T10:07:43.820

您需要在 arraylist 中的对象上实现 equals 方法。

# c# - log4net 不工作，没有创建文件，收到异常消息

> ID：11419959
> 
> 赞同：1
> 
> 时间：2012-07-10T18:52:41.980
> 
> 标签：c#, log4net

我试图让 log4net 在旧应用程序中工作，但是当它启动时我得到了这个异常（来自 DbgView）：

> log4net:ERROR XmlHierarchyConfigurator: 对象类型 [log4net.Appender.FileAppender] 不可分配给类型 [log4net.Appender.FileAppender+LockingModelBase]。没有可接受的类型转换。
> 
> log4net：错误 XmlHierarchyConfigurator：无法创建对象以设置参数：lockingModel

这是什么意思，更重要的是，我如何消除此错误并使其正常工作？如果这有什么不同，这在 Outlook 插件上。这是我的 app.config 文件（由于机密性，一些非必要部分已编辑）：

```
<configuration>
  <configSections>
    <section name="log4net" type="log4net.Config.Log4NetConfigurationSectionHandler,Log4net"/>
  </configSections>
  <log4net>
    <root>
        <level value="DEBUG" />
        <appender-ref ref="LogFileAppender" />
    </root>
    <appender name="LogFileAppender" type="log4net.Appender.RollingFileAppender" >
        <param name="File" value="c:\errlog.txt" />
        <param name="AppendToFile" value="true" />
        <rollingStyle value="Size" />
        <maxSizeRollBackups value="10" />
        <maximumFileSize value="10MB" />
        <staticLogFileName value="true" />
        <lockingModel type="log4net.Appender.FileAppender+MinimalLock" />
        <layout type="log4net.Layout.PatternLayout">
            <param name="ConversionPattern" value="%-5p%d{yyyy-MM-dd hh:mm:ss} – %m%n" />
        </layout>
    </appender>
  </log4net>    
  <system.diagnostics>
    <sources>
        <source name="System.Net" tracemode="includehex" maxdatasize="1024">
            <listeners>
                <add name="System.Net"/>
            </listeners>
        </source>
        <source name="System.Net.Sockets">
            <listeners>
                <add name="System.Net"/>
            </listeners>
        </source>
        <source name="System.Net.Cache">
            <listeners>
                <add name="System.Net"/>
            </listeners>
        </source>
    </sources>
    <switches>
        <add name="System.Net" value="Verbose"/>
        <add name="System.Net.Sockets" value="Verbose"/>
        <!--add name="System.Net.Cache" value="Verbose"/-->
    </switches>
    <sharedListeners>
        <add name="System.Net"
          type="System.Diagnostics.TextWriterTraceListener"
          initializeData="network.log" />
    </sharedListeners>
    <trace autoflush="true"/>
  </system.diagnostics>
  </appSettings>
</configuration> 
```

我发现许多其他帖子说添加该行`<lockingModel type="log4net.Appender.FileAppender+MinimalLock" />`应该可以解决这个问题，但它不能解决任何问题。我正在寻找的最终结果是一个日志文件，其中包含允许我调试这个应用程序的信息，我如何让这个东西工作？

另外，我已经阅读了关于 stackoverflow 的所有其他相关问题（其中有几十个），这是我见过的唯一一个甚至有相同异常消息的问题，并且没有提供对我有用的答案：[无法使用值 [MinimalLock] 在对象 [log4net.Appender.RollingFileAppender] 上设置属性 [lockingModel]](https://stackoverflow.com/questions/4076727/unable-to-set-property-lockingmodel-on-object-log4net-appender-rollingfileapp)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T19:30:48.373

我手头没有编译器，但是当我将纯文本配置与我的工作配置集进行比较时，我相信你会错过

```
<file value="PATHTOFILE\error.log" /> 
```

你有

```
<param name="File" value="PATHTOFILE\error.log" /> 
```

这种差异似乎是可能的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-18T03:00:37.717

您将某些内容保存到 C: 的根目录，请检查您是否有权限这样做。我遇到了同样的问题，但我通过将文件保存到 D: 或 C: 中的某些文件夹解决了这个问题，在 root 配置下尝试一下：

```
<!--log to file-->
<system.diagnostics>
  <trace autoflush="true">
    <listeners>
      <add
        name="textWriterTraceListener"
        type="System.Diagnostics.TextWriterTraceListener"
        initializeData="C:\Users\Klaus\Documents\log4net.txt" />
    </listeners>
  </trace>
</system.diagnostics> 
```

# sql - 如何在sql查询中平均一列结果

> ID：11419964
> 
> 赞同：0
> 
> 时间：2012-07-10T18:53:02.757
> 
> 标签：sql

我有一个查询，它会提取活跃客户的数量并找到客户活跃的总天数......我想找到这个列的平均值......

是否可以在这样的查询中提取平均值并将其显示在 1 行上？或者这需要在报告方面完成吗？我目前的查询是：

```
SELECT        
   dtCreated, bActive, dtLastUpdated, dtLastVisit, 
   DATEDIFF(d, dtCreated, dtLastUpdated) AS Difference
FROM 
   Customers
WHERE        
   (bActive = 'true') 
   AND (dtLastUpdated > CONVERT(DATETIME, '2012-01-01 00:00:00', 102)) 
```

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T18:56:49.420

使用 AVG：http: [//msdn.microsoft.com/en-us/library/ms177677](http://msdn.microsoft.com/en-us/library/ms177677)

```
SELECT         
   dtCreated, bActive, dtLastUpdated, dtLastVisit,  
   DATEDIFF(d, dtCreated, dtLastUpdated) AS Difference,
   AVG(DATEDIFF(d, dtCreated, dtLastUpdated)) OVER() AS AvgDifference
FROM  
   Customers 
WHERE         
   (bActive = 'true')  
   AND (dtLastUpdated > CONVERT(DATETIME, '2012-01-01 00:00:00', 102)) 
```

将其更新为使用 OVER()：http: [//msdn.microsoft.com/en-us/library/ms189461.aspx](http://msdn.microsoft.com/en-us/library/ms189461.aspx)

# c - 不确定 int regs = 0, i, *regs 是什么意思

> ID：11419970
> 
> 赞同：-1
> 
> 时间：2012-07-10T18:53:12.270
> 
> 标签：c

我正在维护和扩展诊断测试套件的功能，这段代码多次出现，我不确定它的作用：

```
int ret = 0, i, *reg;
int size = sizeof(Regs)/sizof(Reg);
for(i = 0; i<size; i++) {
    reg= (uint*)Regs[i].Number;
    *reg=0;
}
return ret; 
```

其中 i 是循环变量，而 reg 是指向 32 位 int 的指针（Number 是指向该 32 位 int 的地址）。这个特殊的测试会清除寄存器，但它是否意味着改变 ret？

编辑：我想我的问题有点模棱两可，我想知道具体是什么片段：

```
int ret = 0, i, *regs; 
```

是否有效，或者为什么有效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T18:59:49.793

是的，我认为你是对的。假设 Regs 是 Reg 对象的数组，那么它将每个 Reg.Number 指向的内容归零，然后返回 0。如果代码库遵循返回状态码的范式，在这种情况下为 0，这似乎是合理的做法通常意味着成功。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T19:08:57.767

`int ret = 0, i, *reg;`

定义了三个变量：一个`int`被调用`ret`，一个`int`被调用`i`和一个`int*`被调用`reg`。只有`ret`被初始化（到`0`）。

原因是声明的语法（稍微简化）是：

```
declaration: 
    declaration-specifiers init-declarator-list[_opt_]
init-declarator-list:
    init-declarator
    init-declarator-list , init-declarator
init-declarator:
    declarator
    declarator = initializer 
```

这里的声明说明符是 just `int`，那么我们有一个由三个 init-declarator 组成的 init-declarator 列表。其中一个有初始化程序，另外两个没有。声明`*reg`器定义了一个“指向-whatever-type-the-declaration-specifiers-say 的指针”。有关血腥细节（以及我在上面语法中遗漏的部分），请参见标准中的 6.7“声明”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T18:57:09.453

不，`ret`永远为零。这个函数只是清除`uint`数组中结构指向的一些 s `Regs`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-10T19:00:01.353

看起来总是返回 0。除非我只看到相关代码的一部分。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-10T20:10:49.633

我个人的看法：

```
int ret = 0, i, *reg; 
int size = sizeof(Regs)/sizof(Reg); 
for(i = 0; i<size; i++) 
{
     reg= (uint*)Regs[i].Number;
     *reg=0;
} 
return ret; 
```

该行`int ret = 0, i, *reg;`相当于

```
int ret;
ret = 0; //return value, if nothing changes it while running the sub, the return is (positive) as every C routine should do
int i; // i is what it is, no initialisation is performed
int* reg; //reg is what it is, no initialisation is performed. 
```

该行`int size = sizeof(Regs)/sizof(Reg);` 定义`size`为称为缓冲区`Regs`及其类型的基本数据字段之间的原子维度`Reg`。用于迭代结构本身（注意：在 C 中，Regs 不一定是缓冲区/数组/流，就 Sizeof 而言它比 regs 大是必要的。

循环从`for`Reg 内 Number 字段的位置开始在每次迭代中将 n 字节归零（假设`Number`是 32bits = 4 bytes long integer 从 byte 4 到 byte 7 inside `Reg`）。

(uint*) 转换在 C 中是正常的，因为在处理内存时，简单的 (uint) 可能不足以跨越整个可寻址堆。我很少发现 (int*) 强制转换来迭代堆。

最后，在没有任何失败之后（在这种情况下没有任何代码可以失败，因为甚至没有使用 ret），返回值是 0 = 正返回。

为了更好地解释 for 循环中所做的事情，假设 Regs 是一个结构，其中包含一行中的 4 个 Reg 实例（某种数组），每个 Reg 是 32 字节宽，第二个字段（从 4 到 7 的字节）被称为`Number`（例如 32 位整数字段）。在 for 循环运行之前和之后，内存的逐字节可视化（为便于使用和读取的 DECIMAL 格式）可以是：

```
before:     111910460 §     721672678 §     1941200806 §    -1183627007 §   1586684153 §    1875498315 §    1260999030 §    1325944862 §    1065932391 §    1844134883 §    1605637187 §    -1318663956 §   233262241 §     1220589880 §    1712611369 §    -2095694326 §   -1982972241 §   1536475566 §    1550414594 §    60661453 §      1920891323 §    1052971320 §    151058183 §     -693448823 §    -763585993 §    -1546059240 §   -638901203 §    1592652624 §    -26126893 §     359938920 §     730403663 §     -2119128428 §   22506289 §      329168535 §     1888110366 §    -1324425487 §   -2128177580 §   -1447190387 §   -2102707104 §   -834692095 §    233601466 §     -2368015 §      -1247566469 §   -496146592 §    1399945760 §    -433672213 §    -1874762262 §   -240141582 §    1361991330 §    -2100310671 §   -1716316415 §   1113810979 §    837914061 §     -2004720198 §   -499664162 §    -581537344 §    -1876582939 §   -855186203 §    -477447744 §    609476093 §     -1551962613 §   1342130125 §    -1245085596 §   70042099 §      853203728 §     -1216264601 §   -821207587 §    -663767272 §    1811963624 §    -1359626002 §   587239161 §     412800157 §     1308828835 §    -484000995 §    1196157114 §    1554729984 §    -588907472 §    -862275327 §    2141670903 §    -496863553 §    -1461319540 §   2011880048 §    724185989 §     -523083707 §    535075127 §     -1252818631 §   -1535682266 §   1731550626 §    -1513281783 §   2056573089 §    542455754 §     -1663652432 §   209157746 §     -917714063 §    -62336558 §     -335893804 §    -455431912 §    -1338920623 §   966843505 §     698158966 §     -1748732016 §   -710422429 §    429351988 §     1404039358 §    1828069719 §    -1849911876 §   -1756314151 §   1046003361 §    -1124626131 §   422202 §        608265685 §     1538084062 §    -1342247255 §   1734342148 §    -2095965518 §   544674987 §     -12582890 §     1365311130 §    1104188373 §    688131395 §     -1615783097 §   755406204 §     -151161805 §    1955152994 §    -427907710 §    700996102 §    
after:  111910460 §     721672678 §     1941200806 §    -1183627007 §   0 §             0 §             0 §             0 §             1065932391 §    1844134883 §    1605637187 §    -1318663956 §   233262241 §     1220589880 §    1712611369 §    -2095694326 §   -1982972241 §   1536475566 §    1550414594 §    60661453 §      1920891323 §    1052971320 §    151058183 §     -693448823 §    -763585993 §    -1546059240 §   -638901203 §    1592652624 §    -26126893 §     359938920 §     730403663 §     -2119128428 §   22506289 §      329168535 §     1888110366 §    -1324425487 §   0 §             0 §             0 §             0 §             233601466 §     -2368015 §      -1247566469 §   -496146592 §    1399945760 §    -433672213 §    -1874762262 §   -240141582 §    1361991330 §    -2100310671 §   -1716316415 §   1113810979 §    837914061 §     -2004720198 §   -499664162 §    -581537344 §    -1876582939 §   -855186203 §    -477447744 §    609476093 §     -1551962613 §   1342130125 §    -1245085596 §   70042099 §      853203728 §     -1216264601 §   -821207587 §    -663767272 §    0 §             0 §             0 §             0 §             1308828835 §    -484000995 §    1196157114 §    1554729984 §    -588907472 §    -862275327 §    2141670903 §    -496863553 §    -1461319540 §   2011880048 §    724185989 §     -523083707 §    535075127 §     -1252818631 §   -1535682266 §   1731550626 §    -1513281783 §   2056573089 §    542455754 §     -1663652432 §   209157746 §     -917714063 §    -62336558 §     -335893804 §    -455431912 §    -1338920623 §   966843505 §     698158966 §     0 §             0 §             0 §             0 §             1828069719 §    -1849911876 §   -1756314151 §   1046003361 §    -1124626131 §   422202 §        608265685 §     1538084062 §    -1342247255 §   1734342148 §    -2095965518 §   544674987 §     -12582890 §     1365311130 §    1104188373 §    688131395 §     -1615783097 §   755406204 §     -151161805 §    1955152994 §    -427907710 §    700996102 § 
```

# java - 使用 Java 图形处理自定义支持

> ID：11419971
> 
> 赞同：1
> 
> 时间：2012-07-10T18:53:12.330
> 
> 标签：java, graphics, drawing

我正在创建一个在 Java 中编辑 SNES GFX 文件的程序，我通过将字节数组绘制到 a 来将数据绘制到屏幕上`BufferedImage`，然后将其绘制到屏幕上。问题是，我希望能够编辑图像。由于我不想每次都重新绘制整个图像，所以我使用`BufferedImage.createGraphics()`绘制到屏幕的同时更新数据`byte[]`。

这在绘制矩形时非常容易，因为我可以手动重新创建需要在我的自定义数据数组中更新的像素，如下所示：

```
for (int i = rect.x; i < rect.x + rect.width + 1; i++) {
    for (int j = rect.y; j < rect.y + rect.height + 1; j++) {
        panel.setPixelColor(new Point(i, j), palette.getCurrentColor());
    }
} 
```

但是，我不知道如何绘制椭圆。我希望能够只使用`Graphics.drawOval()`，但我不知道是否有办法遍历修改后的像素以查找我需要更新的值。显然，我可以使用自定义的椭圆绘图算法，但不必重新发明轮子真是太好了。

# templates - 播放 2.x 空安全合并（避免模板中的 NPE）

> ID：11419976
> 
> 赞同：4
> 
> 时间：2012-07-10T18:53:27.207
> 
> 标签：templates, scala, playframework-2.0, null-coalescing-operator

在 Play 1.x 中，您可以执行诸如`&{task?.server?.name}`打印服务器名称（如果存在）或不打印任何内容（如果`task`或`task.server`为空）之类的操作。如何在 2.x scala 模板中获得相同的结果？

我发现了一些关于使用 Scala 执行此操作的问题：

*   [如何在 Scala 中简洁地检查 null 或 false？](https://stackoverflow.com/questions/6416925/how-to-check-for-null-or-false-in-scala-concisely)
*   [如何在 scala 中编写正确的空安全合并运算符？](https://stackoverflow.com/questions/1364361/how-to-write-a-proper-null-safe-coalescing-operator-in-scala)

但这些解决方案要么相当冗长，要么需要定义您自己的运算符。Play 是否提供了一种快速的方法来做到这一点？或者如果我需要自己定义运算符，我应该把它放在哪里以便 Play 找到它？（此时我对 Scala 几乎一无所知，尽管我正在努力学习）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T09:24:34.400

这里已经有许多与 null 处理相关的问题和答案，所以我将只专注于您的 Play-2 相关问题。

我做了一个快速测试，似乎模板系统将空值的直接取消引用转换为空字符串。如果您尝试在作为 null 传入的对象上调用某些方法，这仍然无法将您从 NPE 中拯救出来。为此，您需要使用所有其他答案中描述的一些方法。如果你定义了一个新的操作符，你可以把它放在你喜欢的任何包中，然后将这一行添加到你的模板中：

```
@import some.package._ 
```

这将使 some.package 中的所有内容都可以在模板中访问。

通常的良好做法警告仍然适用：尝试仅在与 java 的互操作中使用空值。对于其他一切，都有选项。

# c# - 必须声明标量变量“@imgPicture”

> ID：11419979
> 
> 赞同：0
> 
> 时间：2012-07-10T18:53:41.477
> 
> 标签：c#, asp.net, sql

ASP.Net 上的超级新手，很抱歉，如果这个问题被问了无数次，我已经在这里和谷歌上阅读了很多类似问题的答案，但我找不到适用于我的代码的解决方案，我想要要将图像 url 保存到数据库中，这是不起作用的代码：

```
if (imgPicture.ImageUrl != null)
                {
                    String strConn = "Data Source=TOSHI;Initial Catalog=prueba;Integrated Security=True";
                    SqlConnection conn = new SqlConnection(strConn);
                    SqlCommand cmd = new SqlCommand();
                    cmd.Connection = conn;
                    string strQuery = "Insert into curriculum (imagen) values      (@imgPicture)";
                    cmd.CommandText = strQuery;
                    cmd.CommandType = CommandType.Text;
                    cmd.Parameters.AddWithValue("@imagen", imgPicture.ImageUrl);
                    conn.Open();
                    cmd.ExecuteNonQuery();
                    conn.Close();
                } 
```

在 cmd.parameters 我也试过

```
cmd.Parameters.Add("imagen", SqlDbType.VarChar).Value = imgPicture.ImageUrl; 
```

但都没有奏效

编辑：数据库上的字段名称是 imagen，ASP 上的图像字段是 imgPicture

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T18:57:35.363

您为参数使用了错误的名称。它应该是`@imgPicture`，从查询：

```
cmd.Parameters.AddWithValue("@imgPicture", imgPicture.ImageUrl); 
```

**更新**

根据对此问题的评论，我认为`if`可以删除整个块的内容，您可以将以下内容放入主插入中：

```
cmd.Parameters.AddWithValue("@imgPicture", (imgPicture.ImageUrl == null ? (object)DBNull.Value : (object)imgPicture.ImageUrl)); 
```

您还需要将 imagen 添加到要插入查询的列列表的末尾，并将 @imgPicture 添加到参数中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T18:58:36.303

不幸的是，这与 asp.net 无关，与您的查询有关。

您的查询是：

```
Insert into curriculum (imagen) values      (@imgPicture) 
```

它定义了参数`@imgPicture`。

然后你添加一个名为`@imagen`（将被忽略）的参数，但*更重要的是不添加参数`@imgPicture`*。

你确定你不是那个意思`cmd.Parameters.AddWithValue("@imgPicture", imgPicture.ImageUrl);`？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-10T18:59:50.127

您的查询是这样的：

```
string strQuery = "Insert into curriculum (imagen) values (@imgPicture)"; 
```

你在哪里声明`@imgPicture`你的变量。

您需要在代码中使用该变量：

```
cmd.Parameters.Add("@imgPicture", SqlDbType.VarChar).Value = imgPicture.ImageUrl; 
```

# c# - 如何生成从 Postback 上的另一个 Link_Command 事件创建的 LinkBut ton？

> ID：11419980
> 
> 赞同：1
> 
> 时间：2012-07-10T18:53:44.170
> 
> 标签：c#, asp.net, linkbutton

好的，所以我有一个 LinkBut​​ton 的列表，点击后会在表格内创建更多 LinkBut​​ton 以进行回发。例如，每个用户都有一个活动或工作列表。因此，当单击该用户时，它会在表格中创建他们的工作列表。然后，这些工作需要进行回发以获取其受人尊敬的内容。

**C#代码：**

```
protected void Page_Load(object sender, EventArgs e) {
    try {
        lstUsers = GetUsers();
        AddLinkButton("all", "All", tabList, link_Command);
        foreach (var item in lstUsers) {
            AddLinkButton(item.UID.ToString(), item.Name, tabList, link_Command);
        }
    } catch (Exception ex) { 

    }
}

void link_Clicked(object sender, CommandEventArgs e) {
    List<Job> jList = GetJobs(e.CommandArgument.ToString());
    foreach (Job job in jList) {
        HtmlTableRow row = new HtmlTableRow();
        AddCell(job.JobID.ToString(), job.Name, row);
        jobsTable.Rows.Add(row);
    }
} 

void AddCell(string id, string text, HtmlTableRow row) {
    HtmlTableCell cell = new HtmlTableCell();
    LinkButton link = new LinkButton();
    link.ID = id;
    link.Text = text;
    link.Command += new CommandEventHandler(job_Command);
    link.CommandArgument = id;
    link.Style.Add("color", "black");
    cell.Controls.Add(link);
    row.Cells.Add(cell);
}

void AddLinkButton(string id, string text, HtmlGenericControl list, CommandEventHandler handler) {
        LinkButton link = new LinkButton();
        link.ID = id;
        link.Text = text;
        link.Command += new CommandEventHandler(handler);
        link.CommandArgument = id;
        HtmlGenericControl li = new HtmlGenericControl("li");
        li.Controls.Add(link);
        list.Controls.Add(li);
    } 
```

在上面的 Page_Load 事件中，我正在创建用户列表。单击用户时，它会触发 link_Clicked。link_Clicked 然后创建与该用户有关的行列表，因此活动或工作链接。

我的问题是我需要在 Page_Load 中确定在 link_Clicked 中创建的链接之一是否被实际点击。如果有人对我这样做的方式有更好的建议，我绝对会全神贯注。我对 asp.net 开发非常陌生，因此可能有更好的途径。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T19:18:42.110

您必须编写自己的自定义方法来跟踪事件

这里给出了一个很好的例子[http://www.codeproject.com/Tips/82086/How-to-know-which-control-has-raised-a-postback](http://www.codeproject.com/Tips/82086/How-to-know-which-control-has-raised-a-postback)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T19:08:21.387

知道了！

```
string test1234 = Page.Request.Params.Get("__EVENTTARGET"); 
```

这会将控件的 ID 传回给我，这正是我所需要的。

[我在这里](http://ryanfarley.com/blog/archive/2005/03/11/1886.aspx)找到了一个教程。

# php - 使 imagettftext 识别 HEX 颜色

> ID：11419983
> 
> 赞同：1
> 
> 时间：2012-07-10T18:54:02.993
> 
> 标签：php, hex, gd

简单的问题，我在那里搜索并没有找到制作这个的方法。

我有一个字符串（变量），可以是这样的：

```
#FF9900Hel#FFFFFFlo 
```

我需要一种方法让 imagettftext 函数识别这些颜色并使用这些颜色绘制文本。例如，在我之前提到的示例中，文本应该是：红色：Hel 和白色：lo。我希望我能很好地解释我的意思。

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T18:58:37.907

您将不得不解析颜色和相应的字符串，为每种唯一颜色分配 GD 颜色资源，并根据需要单独调用`imagettftext`调整您的`x`和`y`坐标。

该`imagettxtext`功能不能也不会为您执行此操作。

查看[imageftbbox](http://php.net/imageftbbox)，因为您将需要此函数来计算每个文本切片的边界框，这是正确放置下一个不同颜色的文本块所必需的。

这是一个将 HTML 颜色转换为可以传递给[imagecolorallocate](http://php.net/imagecolorallocate)的十六进制三元组的函数。

```
function htmlColorToHex($color) {
    if (substr($color, 0, 1) == '#') {
        $color = substr($color, 1);
    }

    if (strlen($color) == 3) {
        $red   = str_repeat(substr($color, 0, 1), 2);
        $green = str_repeat(substr($color, 1, 1), 2);
        $blue  = str_repeat(substr($color, 2, 1), 2);
    } else {
        $red   = substr($color, 0, 2);
        $green = substr($color, 2, 2);
        $blue  = substr($color, 4, 2);
    }

    $hex = array('r' => hexdec($red),
                 'g' => hexdec($green),
                 'b' => hexdec($blue));

    return $hex;
} 
```

您想要做的最复杂的部分是正确计算文本每个部分的坐标。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-10T19:04:37.787

您不仅需要识别颜色，还需要*对齐*字符串。这不是自动的，因为它在 HTML 中。

我会通过首先将字符串拆分为其组成部分来做到这一点：

```
// Split the text using hex colors as strings:
$hex     = '[0-9a-fA-F]'; // Capital hex should be supported

$colorex = "(#{$hex}{$hex}{$hex}{$hex}{$hex}{$hex})";
// or also $colorex = "(#{$hex}{6})";

$parts = preg_split ("/{$colorex}/", $text, -1, PREG_SPLIT_DELIM_CAPTURE);

// Then you would iterate through the parts:

$color = imageColorAllocate($gd, 0, 0, 0); // Default is black
foreach($parts as $part)
{
    // Scan the hex value
    if (preg_match("/^{$colorex}\$/", $part, $gregs))
    {
        sscanf($gregs[1], "#%02x%02x%02x", &$r, &$g, &$b);
        $color = imageColorAllocate($gd, $r, $g, $b);
        continue;
    }
    // IMPROVEMENT: if count(explode("\n", $part)) > 1, $y += $height, $x = 0
    // to indicate "go to next line". So this would appear on two lines:
    //     #012345Hel#ff7700lo,
    //     #443212World 
    // Next section will be repeated for each item
    // in the exploded string.
    //! $subparts = explode("\n", $part);
    //! foreach($subparts as $part)
    //! { // We have overwritten $part

    // Here $part is printed as string at position $x, $y
    // Ask GD to calculate string width
    // with http://php.net/manual/en/function.imagettfbbox.php
    // Calculations with $angle != 0 is a bit more difficult, entails trigonometric
    // evaluation of $w and $h.
    $bbox = imagettfbbox ($size, $angle, $fontfile, $part);
    $w    = $bbox[4] - $bbox[0];  // 0,1 is lower left corner
    $h    = $bbox[5] - $bbox[1];  // 4,5 is upper right
    imagettftext ($gd, $size, $angle, $x, $y, $color, $fontfile, $part);
    // Increment $x position by $w
    $x += $w;

    //!     if (count($subparts) > 1)
    //!     {
    //!         $x = 0; $y += $h;
    //!     }
    //! }
} 
```

# mysql - 这个数学转换看起来对吗？（红宝石-> mysql）

> ID：11419985
> 
> 赞同：0
> 
> 时间：2012-07-10T18:54:26.463
> 
> 标签：mysql, ruby-on-rails, ruby, database, math

我正在使用数学算法来计算“热门”排序类型。它基本上会生成一个长的多位浮点数，其中考虑了时间和给定时间跨度内的投票数。

我让 mysql 处理这个以减少我的服务器上的负载，并且我想确保我没有遗漏任何东西。这部分在我的应用程序中非常重要。

这是它应该如何工作的描述：http: [//amix.dk/blog/post/19588](http://amix.dk/blog/post/19588)

数字：1134028003 只是一个任意数字，它以秒为单位定义应用程序发布日期的数字，这样数字从零开始，随着时间的推移，它们会慢慢增长、增长和增长。

这是我现在为 mysql 提供的内容：

```
 def self.with_hot_ranking
    select("resources.*, (
        round( 
               log10(greatest(abs(resources.score),1)) + 
               if(resources.score > 0, 1, if(resources.score < 0, -1, 0)) * 
               (UNIX_TIMESTAMP(resources.created_at)-1134028003) / 
               45000.0
              , 7)
    ) hot_ranking")
  end 
```

这是我的实例方法，仅用于测试目的。我想确保这也是正确的。它似乎太快了，我不知道为什么

```
 def hot_ranking
    # to sort by hot_ranking use the class method with_hot_ranking instead i.e.
    # Resource.with_hot_ranking.order('hot_ranking DESC')
    s = self.score
    order = Math.log10([s.abs, 1].max)
    sign = s <=> 0
    seconds = epoch_seconds(self.created_at).to_i - 1134028003
    (order + sign * seconds / 45000).round_to(7).to_f
  end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T19:07:06.893

看起来像链接公式，除了您使用的是 double`IF`而不是`SIGN()`.

# css - 链接上的虚线边框显示为实线

> ID：11419986
> 
> 赞同：5
> 
> 时间：2012-07-10T18:54:28.263
> 
> 标签：css, attributes, border

我希望访问链接上的边框属性呈现虚线。我只能让它呈现固体，我不知道为什么。任何帮助都会很棒。谢谢

这是我正在使用的css代码：

```
 .entry-content p a{
color: #333;
border-bottom: solid #beff00 3px;
}

.entry-content p a:hover{
color: #333;
border-bottom: solid #78b3e0 3px;
}

.entry-content p a:visited{
color: #333;
border-bottom: #78b3e0 dashed;
} 
```

[您可以在此博客文章](http://www.seanhubbard.com/blogtest)中查看它的实际效果。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-10T19:56:36.840

显然，这是隐私问题的结果。请参考以下链接：

*   [隐私和 :visited 选择器](https://developer.mozilla.org/en/CSS/Privacy_and_the_%3avisited_selector)(MDN)
*   [通过 CSS :visited 选择器防止对用户历史的攻击](http://dbaron.org/mozilla/visited-privacy)
*   [对已访问链接进行样式设置的限制](http://www.impressivewebs.com/styling-visited-links/)

根据上面的链接，链接的样式`a:visited`仅限于使用基于颜色的属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T18:59:03.353

使用这个 CSS 规则：

```
.entry-content p a:visited {
    border-bottom: 3px dashed #78B3E0;
 } 
```

边界规则顺序为：`border: <width> <style> <color>;`

# html - 如何选择一个 基于它在 django 模板中的索引

> ID：11419987
> 
> 赞同：-1
> 
> 时间：2012-07-10T18:54:35.280
> 
> 标签：html, django, forms, django-templates

在 django 模板中，我可以根据其索引选择特定的 <option> 吗？

也就是说，我有一个这样的模板：

```
<select>
  <option val='fs-1'>Foo</option>
  <option val='fs-2'>Bar</option>
  ... (Many more options> ...
</select> 
```

当我渲染模板时，我知道我想要选择的项目的**索引是什么。**

[我知道我可以用这里](https://stackoverflow.com/questions/8389880/select-option-in-django-template)描述的方式做到这一点，但是我有很多带有很多选项的 <select> 标签，这不是一种有效的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T19:35:07.920

目前尚不清楚您何时知道应该选择哪个索引或如何从您的问题中确定它，因此无法告诉您哪种方式最好。但是，总的来说，设置它的方法只有三种：

1.  在表单上指定一个初始值：

    ```
    form = MyForm(initial={'some_field': 'fs-2'}) 
    ```

2.  您链接到的方法，您不想这样做（循环选项并`selected="selected"`在值匹配时打印）

3.  使用 JavaScript（用于说明的 jQuery）：

    ```
    $('#id_some_field').val('fs-2'); 
    ```

# iphone - iOS5：通过 https 进行身份验证

> ID：11419995
> 
> 赞同：2
> 
> 时间：2012-07-10T18:55:46.233
> 
> 标签：iphone, authentication, ios5, ssl, http-status-code-404

我在 iPhone 应用程序中使用以下代码通过 https 与服务器进行身份验证。

身份验证发生在 Web 浏览器上，但是当我尝试从 iPhone 应用程序进行身份验证时，服务器响应代码为 404。使用以下代码，身份验证从 iPhone 应用程序通过 http 成功进行。

所以我想知道 iOS 5 中的 https 身份验证是否有任何重大变化。

我的代码如下。

```
-(void)connection:(NSURLConnection *)connection willSendRequestForAuthenticationChallenge:(NSURLAuthenticationChallenge *)challenge
{
   if ([challenge.protectionSpace.authenticationMethod isEqualToString:NSURLAuthenticationMethodServerTrust])
   {
       if ([challenge.protectionSpace.host isEqualToString:MY_PROTECTION_SPACE_HOST])
       {
           [challenge.sender useCredential:[NSURLCredential credentialForTrust:challenge.protectionSpace.serverTrust] forAuthenticationChallenge:challenge];
       }

       [challenge.sender continueWithoutCredentialForAuthenticationChallenge:challenge];
   }
   else if ([challenge.protectionSpace.authenticationMethod isEqualToString:NSURLAuthenticationMethodHTTPBasic])
   {
      if ([challenge previousFailureCount] == 0)
      {
          NSURLCredential *newCredential;

          newCredential = [NSURLCredential credentialWithUser:@"username"
                        password:@"password"
                        persistence:NSURLCredentialPersistenceForSession];

          [[challenge sender] useCredential:newCredential forAuthenticationChallenge:challenge];
      }
      else
      {
          [[challenge sender] cancelAuthenticationChallenge:challenge];

          NSLog (@"failed authentication");

      }
  }
} 
```

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T20:16:25.467

对于通过 https 进行的身份验证，您可以尝试此代码。[有关更多详细信息，您可以从http://as.wiley.com/WileyCDA/WileyTitle/productCd-1119961327,descCd-DOWNLOAD.html](http://as.wiley.com/WileyCDA/WileyTitle/productCd-1119961327,descCd-DOWNLOAD.html)下载源代码并查看其中的 iHotelApp。

```
self.networkQueue = [ASINetworkQueue queue];
  [self.networkQueue setMaxConcurrentOperationCount:6];
  [self.networkQueue setDelegate:self];
  [self.networkQueue go];

  ASIFormDataRequest *request = [ASIFormDataRequest requestWithURL:[NSURL URLWithString:LOGIN_URL]];

    [request setUsername:loginName];
    [request setPassword:password]; 

  [request setDelegate:self];

    [request setDidFinishSelector:@selector(loginDone:)];
    [request setDidFailSelector:@selector(loginFailed:)];   

    [self.networkQueue addOperation:request]; 
```

# css - 文字装饰：没有不起作用

> ID：11419998
> 
> 赞同：47
> 
> 时间：2012-07-10T18:55:50.580
> 
> 标签：css, html, text-decorations

完全一脸懵逼！我试过用`text-decoration: none`几种不同的方式重写这条线。我还设法通过定位文本来调整文本大小，但`text-decoration: none`代码不会占用。

非常感谢帮助。

代码

```
.widget    
{
     height: 320px;
     width: 220px;
     background-color: #e6e6e6;
     position: relative;                              
     overflow: hidden;                          
}

.title    
{
     font-family: Georgia, Times New Roman, serif;
     font-size: 12px;
     color: #E6E6E6;
     text-align: center;
     letter-spacing: 1px;
     text-transform: uppercase;
     background-color: #4D4D4D;    
     position: absolute;
     top: 0;
     padding: 5px;
     width: 100%;
     margin-bottom: 1px;
     height: 28px;
     text-decoration: none;
}

a .title    
{
     text-decoration: none;
}
```

```
<a href="#">
    <div class="widget">  
        <div class="title">Underlined. Why?</div>  
    </div>
</a>
```

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2015-05-26T02:20:32.547

```
a:link{
  text-decoration: none!important;
} 
```

=> 和我一起工作 :) ，祝你好运

* * *

## 回答 #2

> 赞同：43
> 
> 时间：2012-07-10T19:00:36.610

内联元素 (a) 中有一个块元素 (div)。这适用于 HTML 5，但不适用于 HTML 4。因此也只有实际支持 HTML 5 的浏览器。

当浏览器遇到无效标记时，它们会尝试修复它，但不同的浏览器会以不同的方式修复它，因此结果会有所不同。有些浏览器会将块元素移到内联元素之外，有些浏览器会忽略它。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-12-20T11:24:46.810

使用[CSS 伪类](http://www.w3schools.com/css/css_pseudo_classes.asp)并给你的标签一个类，例如：

```
<a class="noDecoration" href="#"> 
```

并将其添加到您的样式表中：

```
.noDecoration, a:link, a:visited {
    text-decoration: none;
} 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2016-05-13T08:44:06.930

在您的标题标签上添加此语句：

```
<style>
a:link{
  text-decoration: none!important;
  cursor: pointer;
}
</style> 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2014-01-26T14:47:50.177

尝试将您`text-decoration: none;`的 a:hover css。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2018-10-30T19:45:39.137

如果你想要一个导航栏

```
ul{ list-style-type: none; } li{text-decoration: none; 
```

*   这将使它想要将列表类型的样式设置为 None 或 nothing

使用 < a > 标签：

```
a:link {text-decoration: none} 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2014-12-22T06:53:13.260

我有一个答案：

```
<a href="#">
    <div class="widget">  
        <div class="title" style="text-decoration: none;">Underlined. Why?</div>  
    </div>
</a>​ 
```

有用。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2018-04-07T20:41:05.137

为所有链接添加一个特定的类：

html：

```
<a class="class1 class2 noDecoration"> text </a> 
```

在 CSS 中：

```
.noDecoration {
  text-decoration: none;
} 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2016-10-13T05:43:39.810

即使我删除了 'text-decoration: none;' 也没有下划线 从你的代码。但我也有类似的经历。

然后我添加了一个代码

```
a{
 text-decoration: none;
} 
```

和

```
a:hover{
 text-decoration: none;
} 
```

所以，用 :hover 试试你的代码。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2017-11-14T15:40:39.000

当我尝试自定义 WordPress 主题并且文本装饰对我没有帮助时，我感到非常头疼。在我的情况下，我也必须删除 box-shadow 。

```
a:hover {
    text-decoration: none;
    box-shadow: none;
} 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2020-05-14T12:58:43.423

作为旁注，请记住，在其他情况下，代码库可能会使用`border-bottom`css 属性，例如`border-bottom: 1px;`，它会产生与`text-decoration: underline`. 在这种情况下，请确保将其设置为无，`border-bottom: none;`

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2012-07-10T18:59:49.360

尝试将此添加到您的样式表中：

```
a {text-decoration:none;} 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2016-04-18T05:13:58.103

我使用下面的代码让我在 Chrome 中工作。您可以调整嵌套：

```
a:-webkit-any-link { color: black; } 
```

* * *

## 回答 #14

> 赞同：-8
> 
> 时间：2013-12-06T16:38:49.147

我只是按照我知道它不正确但它快速修复的旧方法来做。

```
<h1><a href="#"><font color="#FFF">LINK</font></a></h1> 
```