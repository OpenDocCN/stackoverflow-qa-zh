# StackOverflow 问答 11245000-11245999

# c# - 如何在页面刷新时将用户控制字段值设置为空

> ID：11245004
> 
> 赞同：0
> 
> 时间：2012-06-28T12:46:56.777
> 
> 标签：c#, asp.net, page-refresh

如何在页面刷新时将文本框等用户控件字段值设置为 null。但是，一旦提交页面，即在提交按钮单击时设置空值，但在刷新页面时，它会保留旧值。那么如何将这些值设置为null。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T13:03:31.400

在`OnLoad`你的 userControl 的方法中添加这个

```
if(IsPostBack)
{
    myTextBox.Text = string.Empty;
    //here clear rest of your textboxes make your textboxes clear
} 
```

**编辑：**

1.  如果您不想在每次回发时清除此文本框，那么为什么要提出这样的问题？
2.  获取我在此消息上编写的代码并将其放入您的点击事件中`method`

# asp.net - 使用浏览器后退按钮时 ASP.NET 隐藏控件值未恢复

> ID：11245006
> 
> 赞同：0
> 
> 时间：2012-06-28T12:47:07.303
> 
> 标签：asp.net

我有一个隐藏类型说“hdnSectionID”，它在 page_Load 中设置它的值（如果不是回发）。页面中有 Next 和 Previous 导航按钮，单击时将回发并在代码隐藏单击事件中设置相应的 hdnSectionID 值并呈现相应的部分。

页面中还有一个部分列表（上下文菜单），我可以使用它直接跳转到一个部分。单击任何部分将在 javascript 中设置 hdnSectionID 值，并单击按钮以回发页面并呈现相应的部分。

**问题**：一个页面加载 hdnSectionID 为 1，我使用列表移动到特定部分说 5，现在如果使用浏览器后退按钮返回，它不会将 hdnSectionID 的值恢复为 1，但仍保持在 5 .

当我使用下一个和上一个导航按钮并返回浏览器时，情况并非如此。这里有什么问题？这个我有点放弃了。。

# php - 显示来自mysql的单个项目（introtext）

> ID：11245015
> 
> 赞同：0
> 
> 时间：2012-06-28T12:47:35.497
> 
> 标签：php, mysql

这个问题太基本了，没有人谈论它......

此查询有效，但我无法使用 php。

从 jmo_content 选择 introtext WHERE Id=127

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T12:56:02.480

我建议你使用 MySQLi 类。我自己编写了改进的 mysqli 类，但还没有完成。但是，如果需要，请询问。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T12:49:20.593

> 这不是与 sql 相关的错误。

使用**[mysql_query](http://php.net/manual/en/function.mysql-query.php)**执行查询：

```
$query = "SELECT introtext FROM jmo_content WHERE Id=127";
mysql_query($query); 
```

**更新：**

您的代码中有一个非常`minor bug`。由于您的**起始 php 标签**而发生错误。

使用**`<?php`**而不是**`<? php`**. 和之间有一个额外的**空格**。删除它，它会工作。`<?``php`

希望这可以帮助。

# unit-testing - 使用 Resharper 7 测试运行器进行 Jasmine 测试的堆栈跟踪

> ID：11245016
> 
> 赞同：3
> 
> 时间：2012-06-28T12:47:41.013
> 
> 标签：unit-testing, resharper, jasmine

如何让 Resharper 7 测试运行器显示 Jasmine 测试的堆栈跟踪。

我的设置是 Resharper 7（在 Jasmine 中构建）测试运行程序和 PhantomJs。执行任何失败的测试时，错误消息总是以：

```
Exception doesn't have a stacktrace 
```

在 1.6 “Lavender” 版本的 Phantom 中添加了在发生错误时打印堆栈跟踪的功能。

要复制它，只需创建一个 mytest.js 文件并向其中添加以下代码：

```
describe("A suite", function() {
  it("contains spec with an expectation", function() {
    expect(true).toBe(false);
  });
}); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-19T22:25:13.660

抱歉，我不使用 Resharper，但我曾经在 phantomjs 和 jasmine ConsoleReporter 上遇到过同样的问题。

我认为这归结为这样一个事实，即 jasmine 不会因预期失败而抛出错误消息，并且只有在实际抛出错误时（jasmine.js）才会由 phantomjs 捕获堆栈：

```
jasmine.ExpectationResult = function(params) {
...
var trace = (params.trace || new Error(this.message));
}; 
```

如下更改该行为我修复了它：

```
var err;
try { throw new Error(this.message); } catch(e) { err = e };
var trace = (params.trace || err); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-07T15:41:30.897

在您拥有 javascript (jasmine) 单元测试的规范文件中，**您需要引用正在测试的源代码**。通常你在 SpecRunner.html 中有这个，但是 Resharper 滚动它自己的 SpecRunner。

将此**参考**行添加到 XyzSpec.js 文件的顶部

```
/// <reference path="/js/path-goes-here/your-file-here.js" />

describe("Utils", function () {
    describe("when calculating quantity", function() {
... 
```

让我几乎发疯，直到我开始在 Resharper 的规范运行器中环顾四周。

PS：如果出现新问题“单元测试运行程序无法加载测试程序集”并且您将 Chrome 作为默认浏览器，请在 Resharper 选项中更改 javascript 单元测试的浏览器。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-26T16:46:39.520

当我记录问题时，得到了 Jetbrains Resharper 团队的良好响应。他们修复了它，它在 Resharper 的 7.1 版本中，可以从他们的[EAP 站点下载](http://confluence.jetbrains.net/display/ReSharper/ReSharper+7.1+Nightly+Builds)

# php - 如果购物车中没有商品，则会出现警告

> ID：11245020
> 
> 赞同：0
> 
> 时间：2012-06-28T12:47:55.220
> 
> 标签：php, session, shopping-cart

我对会话有一个小问题。我在一个网站上建立了一个类似于购物车的小型部分，它几乎可以完成我想要它做的事情。一个问题是，当我访问我的*购物篮*并且其中没有物品时，它会引发错误：

```
Warning: Invalid argument supplied for foreach() in /home/andydownham/site.com/wp-content/themes/theme/basket.php on line 28 
```

我想它需要类似`'if items are in cart' > use normal code > else display 'sorry there are no items in your cart'`的东西，只是我不知道如何实现这一点。

这是我用来将内容存储到会话中的代码

```
<?php
session_start();
//var_dump($_POST);
//print_r($_SESSION);
$_SESSION['event_orders'][] = $_POST['event_id'];
?> 
```

这是我在购物篮页面上使用的代码：

```
<?php
session_start();

foreach($_SESSION['event_orders'] AS $event_id){
    echo '<div class="grad basket">';

    echo '<div class="thumb">';
    $EM_Event = em_get_event($event_id);
    echo $EM_Event->output('#_EVENTIMAGE{72,72}');
    echo '</div>';
    echo '<div class="basket-title"><h2>';
    echo '<a href="';
    $EM_Event = em_get_event($event_id);
    echo $EM_Event->output('#_EVENTURL');
    echo '">';
    $EM_Event = em_get_event($event_id);
    echo $EM_Event->output('#_EVENTNAME');
    echo '</a>';
    echo '</h2>';
    echo '<div class="basket-dates"> Dates:';
    $EM_Event = em_get_event($event_id);
    echo $EM_Event->output('#_EVENTDATES');
    echo '</div></div>';
    echo '<div class="klear"></div>';
    echo '<input type="submit" class="remove" value="remove" />';
    echo '</div>';
    echo '<br/>';
}
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T12:50:22.217

您需要确保它`$_SESSION['event_orders']`存在（即使它是一个空数组）。您可以使用[空](http://php.net/empty)函数进行检查（它也将捕获空数组）：

```
if (empty($_SESSION['event_orders'])) {
  // Cart is empty
} else {
  foreach(...) {
    ...
  }
} 
```

不过，你需要小心`empty`。这些东西也被认为是“空的”（来自手册）：

> ```
> *  "" (an empty string)
> * 0 (0 as an integer)
> * 0.0 (0 as a float)
> * "0" (0 as a string)
> * NULL
> * FALSE
> * array() (an empty array)
> * var $var; (a variable declared, but without a value in a class) 
> ```

特别注意**包含“0”的字符串被认为是空的**！这意味着，如果您将来在某个地方拥有一个 HTML 表单，用户可以在其中输入值并且用户输入数字`0`，则该字段将被此函数视为“空”。这并不总是你想要的。但是，在这种情况下，它对于检查数组的“空性”很有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T12:50:33.463

您只需要添加一个条件来检查您的会话变量中是否存在任何篮子项目：

```
if(!empty($_SESSION['event_orders'])){
    foreach($_SESSION['event_orders'] AS $event_id){
        ...
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T12:52:33.217

您正在将空会话传递给 foreach 循环，因此它会引发错误，因为它需要数组。所以你可以检查 session 是否为数组（php 函数：is_array($array)），检查数组是否为空（php 函数：empty($array)）。其他变种不好，但可以做到。

# grails - iReport 连接 Grails DB [H2]

> ID：11245021
> 
> 赞同：2
> 
> 时间：2012-06-28T12:47:58.413
> 
> 标签：grails, jasper-reports, ireport

我在连接 Grails 数据库服务器时遇到了这个问题，默认情况下它使用 H2 数据库（driverClassName：“org.h2.Driver”）。

*iReport*连接数据库的方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-25T16:21:13.773

**第 1 步：设置自动混合模式**

在您的 Grails 项目中，编辑 DataSource.groovy 文件以将 jdbc 连接设置为 Automatic Mixed Mode **(AUTO_SERVER=TRUE)**。这是使 Grails 和 iReport 同时访问 H2 数据库所必需的。请参阅[此处](http://h2database.com/html/features.html#auto_mixed_mode)了解更多信息：

```
url = "jdbc:h2:devDb;AUTO_SERVER=TRUE;MVCC=TRUE;LOCK_TIMEOUT=10000" 
```

**第 2 步：将 H2 Jar 文件添加到 iReport**

*   Mac：转到 iReport -> Preferences -> iReport -> ClassPath -> Add JAR（然后选择 H2 jar 文件，例如 h2-1.3.164.jar）
*   Windows：工具 -> 选项 -> iReport -> 类路径 -> 添加 JAR（[请参见此处的屏幕截图](http://rediantosatya.wordpress.com/2011/12/19/how-to-add-new-jdbc-driver-in-jaspersoft-ireport/)）

**第 3 步：在 iReport 中设置 JDBC 连接**

使用以下 JDBC 配置，请参阅 1min 30seconds into [this iReport Screencast](http://community.jaspersoft.com/wiki/ireport-designer-podcast-episode-1-introduction-ireport-designer)了解如何设置。

```
JDBC Driver: org.h2.Driver 
JDBC URL: jdbc:h2:/FULLPATH/devDb;AUTO_SERVER=TRUE;MVCC=TRUE;LOCK_TIMEOUT=10000 
```

在[Talon06 的回答](https://stackoverflow.com/a/11680598/122457)中，**org.h2.Driver**驱动程序不会出现在下拉框中，但可以直接输入。AUTO_SERVER=TRUE 也必须在 JDBC URL 中

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-28T23:30:29.340

在 iReport 中设置连接时，选择 Database JDBC Connection，对于 JDBC Driver，选择“HSQLDB (file) (org.hsqldb.jdbcDriver)”。

显然，您的 DataSources 需要配置为使用文件（而不是在内存中），然后您将 iReport 数据源指向，例如：

```
development {
    dataSource {
        dbCreate = "create-drop"
        url = "jdbc:hsqldb:file:<path to file>/devDB;shutdown=true"
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-27T02:17:44.983

选择 JBDC 驱动程序，然后在组合框中键入“org.h2.Driver”。然后输入您的数据库的路径，并在 Driver Class Path 选项卡中从他们的站点添加 h2 数据库 jar。

无论如何，这对我有用

# hadoop - Hadoop CapacityScheduleder 没有使用多余的容量

> ID：11245024
> 
> 赞同：0
> 
> 时间：2012-06-28T12:48:07.447
> 
> 标签：hadoop

我正在运行具有多个队列和多个用户的 Hadoop CapacityScheduler。我有三个队列，容量分别为 70%、20% 和 10%，例如

`mapred.capacity-scheduler.queue.default.capacity=70`

对于我所有的队列

`mapred.capacity-scheduler.queue.default.maximum-capacity=100`

我惊讶地发现，即使有多余的容量可用，队列似乎也几乎没有使用过它们的多余容量（它们都会以特定于队列的容量“最大化”）。后来我发现队列只有在包含来自多个用户的作业时才会使用多余的容量。

即单个用户向队列提交的任意数量的作业永远不会使用户容量过剩。只有当另一个用户提交第二个作业时，才会使用多余的容量。

如果没有其他作业占用任何资源，我希望单个用户使用所有集群资源。

我已经彻底研究了CapacityScheduler 文档并使用了这些属性但没有成功。

如果有人知道如何做到这一点，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T05:10:36.977

您可以查看[http://hadoop.apache.org/common/docs/r1.0.3/capacity_scheduler.html](http://hadoop.apache.org/common/docs/r1.0.3/capacity_scheduler.html)中的属性“mapred.capacity-scheduler.queue.queue-name.user-limit-factor” 。

默认情况下，此值设置为 1，以确保单个用户永远不会超过队列的配置容量，而不管集群有多空闲。您可以将其设置为更大的数字以实现您想要的。

# c# - 异常处理：AOP 与经典处理？

> ID：11245025
> 
> 赞同：3
> 
> 时间：2012-06-28T12:48:22.770
> 
> 标签：c#, .net, exception, aop, spring.net

我正在升级一个**插件加载引擎**（`.NET`），它执行以下操作：

1.  加载插件
2.  将它们连接到适当的数据源
3.  启动插件
4.  显示结果

所有插件都实现相同的接口：`IPlugin`每个插件都在单独的`BackGroundWorker`. 所有这些`BackgroundWorkers`都由一个名为`Host`.

我的问题是`Errors/Exceptions Handling`. 引擎已经部署，我想找到一种优雅的方式来处理`Errors/Exceptions`插件运行时可能引发的问题。有些`Exceptions`被插件捕获，但不是全部。

我正在考虑一个单独的层，它可以捕获错误并为所有插件处理它们。

我想象了一种`Context`附加到每个`Plugin`包含它的进度级别（`BackgroundWorker.ReportProgress`）、它的状态、抛出的异常（使用`RunWorkerCompletedEvent`）但只有在`BackgroundWorker`停止之后才会抛出错误。我想在抛出异常时中断它。

我还认为面向方面的编程可能是一个好方法。我上网查了一下，找到了一些类似**Spring.NET**的框架。但不确定它是否适合我的情况。

**[更新]** 这里有更多的设计细节要求：

*   IPlugin 接口：调用`AbstractEnvChecker`：

![抽象环境检查器](../Images/88eaa959c8c0d43ecb0dcd2cad9469e7.png)

该应用程序是一个**富客户端应用程序**。编译插件后，`DLL`加载生成的插件，并在一个简单的 Windows 窗体中向用户显示一个列表。然后用户选择要启动的插件并`Plugin.DoWork()`调用该方法。

以下是**主机**启动所选插件的方式：

```
void LaunchPlugin(AbstractEnvChecker p_Plugin)
{
    if (p_Plugin != null)
    {
        BackgroundWorker l_BackgroundWorker = new BackgroundWorker();
        l_BackgroundWorker.WorkerReportsProgress = true;
        l_BackgroundWorker.WorkerSupportsCancellation = true;

        l_BackgroundWorker.DoWork +=
            new DoWorkEventHandler(bw_DoWork);
        l_BackgroundWorker.ProgressChanged +=
            new ProgressChangedEventHandler(bw_ProgressChanged);
        l_BackgroundWorker.RunWorkerCompleted +=
            new RunWorkerCompletedEventHandler(bw_RunWorkerCompleted);

        m_PluginByThreadMap.Add(l_BackgroundWorker, p_Plugin);
        l_BackgroundWorker.DoWork += p_Plugin.DoWork;
        l_BackgroundWorker.RunWorkerCompleted += new RunWorkerCompletedEventHandler(l_BackgroundWorker_RunWorkerCompleted);
        l_BackgroundWorker.RunWorkerAsync(p_Plugin);
    }
} 
```

`AOP`添加错误处理层是否合适？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T18:43:40.850

最简单的方法是将`IPlugin.DoWork()`方法包装在一个`try/catch`子句中。像这样的东西：

`l_BackgroundWorker.DoWork += (o, e) => ExecutePlugin(o, e, p_plugin);`

```
private void ExecutePlugin(object sender, DoWorkEventArgs e, IPlugin plugin)
{   
   try 
   { 
      plugin.DoWork(o, e);
   }
   catch (Exception e)
   {
      //do something with the error. disable the plugin maybe?
   }
} 
```

如果这项工作，那么在我看来，仅将 Spring 用于错误处理有点矫枉过正。

您可以做的其他事情是抛出自定义异常（例如 a `PluginException`）并在您的应用程序中全局处理这些异常，这可以通过附加到： `Application.ThreadException`和`AppDomain.CurrentDomain.UnhandledException`事件来实现

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T14:11:58.933

Spring.net 使用动态编织，这基本上意味着在运行时 Spring.net aop 可以围绕方法调用包装异常处理程序。但是 Spring.net aop 需要一个接缝来定位它的拦截器。

如果您的插件应该加载到 UI 中，那么用户（可能）可以调用根本不通过主机或`IPlugin`接口的方法，这使得 spring.net aop 很难（如果不是不可能）拦截和包装异常处理程序。

如果您的主机是调用 的控制台应用程序或服务`myPlugin.DoWork()`，那么绝对可以使用 Spring.net aop 拦截插件抛出的任何异常。如果您可以提供更多详细信息（请参阅对您问题的评论），那么我可以向您展示如何做到这一点。

下面是一个使用 Spring.net AOP 代理插件实例并用拦截器包装它的示例，它捕获抛出的异常并将其委托回主机。请注意，您也可以在没有 AOP 的情况下执行此操作……这取决于您。

```
using System;
using AopAlliance.Intercept;
using NUnit.Framework;
using Spring.Aop.Framework;

namespace Aop
{

    [TestFixture]
    public class SimpleProxyFactoryTests
    {
        [Test]
        public void Main()
        {
            var host = new Host();

            var mp = new SimplePlugin(); 
            var pf = new ProxyFactory(mp);
            pf.AddAdvice(new DelegateToHostExceptionHandlingAdvice(host));

            var proxy = (IPlugin)pf.GetProxy();

            proxy.DoWork();
        }
    }

    public interface IPlugin
    {
        void DoWork();
    }

    public class Host
    {
        public void HandleExceptionFromPlugin(Exception ex)
        {
            Console.WriteLine("Handling exception: {0}", ex.Message);
        }
    }

    public class SimplePlugin : IPlugin
    {
        public void DoWork()
        {
            Console.WriteLine("Doing it and throwing an exception ... ");

            throw new ApplicationException("Oops!");
        }
    }

    public class DelegateToHostExceptionHandlingAdvice : IMethodInterceptor 
    {
        private readonly Host _host;

        public DelegateToHostExceptionHandlingAdvice(Host host)
        {
            _host = host;
        }

        public object Invoke(IMethodInvocation invocation)
        {
            try
            {
                return invocation.Proceed();
            }
            catch (Exception ex)
            {
                 _host.HandleExceptionFromPlugin(ex);
                return null; 
            }
        }
    }
} 
```

### 讨论

我希望我已经向您展示了如何利用 aop 框架进行异常处理。正如[塞巴斯蒂安在他的回答中提到的那样，](https://stackoverflow.com/a/11250975/322283)*仅*将 Spring aop用于异常包装可能被认为是矫枉过正——我同意；将他的代码示例的简单性与我的复杂性进行比较。想象一下，向团队中的新开发人员解释其中之一。

当您将 Spring aop 与 Spring IOC 容器结合使用时，它开始“发光”。

# mysql - 插入未保存在 MySQL 工作台表中的值？

> ID：11245029
> 
> 赞同：0
> 
> 时间：2012-06-28T12:48:36.187
> 
> 标签：mysql, mysql-workbench

我有下表： ![在此处输入图像描述](../Images/38aa1828d0185ea832fc1f6456f88356.png)

我想从 MySQL 工作台插入值。当我双击表格时，我单击选项卡：插入。我插入值，单击文件-> 保存，关闭窗口，然后下一次，所有值都不存在。问题是什么 ？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T12:53:46.287

你需要`apply changes to data`。

![在此处输入图像描述](../Images/6bde7d836b958e7dfcb219b4cf3419af.png)

# java - 安卓java时间

> ID：11245030
> 
> 赞同：1
> 
> 时间：2012-06-28T12:48:39.777
> 
> 标签：java, android, datetime

我正在构建一个可以聊天的 android 应用程序。
在这个聊天中，我每条消息都有它的时间发送签名。
我的问题如下：
假设我国的时间是 X。我的朋友在国外，他的时间是 X 减去 7 小时。
我在`16:00`当地时间给他发信息。
我想避免这样的情况，即他会收到`09:00`签名将是的消息`16:00`（如果你在他国家的那个朋友的眼中看，那是将来的时间）。

有没有办法在我的手机中将消息写成，`16:00`而在他的手机中将写成`09:00`？我有办法将时间转换为当地时间吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T12:56:14.523

System.currentTimeMillis() 确实为您提供了自 1970 年 1 月 1 日 00:00:00 UTC 以来的毫秒数。Date 对象不保存您的本地时区。您可以使用 DateFormats 在任何时区将日期转换为字符串：

```
DateFormat df = DateFormat.getTimeInstance();
df.setTimeZone(TimeZone.getTimeZone("gmt"));
String gmtTime = df.format(new Date()); 
```

[链接响应](https://stackoverflow.com/questions/308683/how-can-i-get-the-current-date-and-time-in-utc-or-gmt-in-java)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T12:51:24.347

您应该使用 UTC 时间保持所有时间通信。然后根据设备当前时区设置对其进行本地化显示。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T12:51:32.137

您将需要保存您的消息将保存的时区，并传输它（或发送 unix 纪元时间），然后在另一边确保您使用区域设置时间读取它（使用 Android 文档像[http://developer.android.com/reference/java/util/Calendar.html](http://developer.android.com/reference/java/util/Calendar.html)可以提供帮助）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-28T12:54:41.657

看看这里的答案：

[https://stackoverflow.com/a/6094475/346232](https://stackoverflow.com/a/6094475/346232)

您需要将时间更改为 UTC，然后在设备上转换为时区。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-28T12:55:34.447

使用 long 将您的时间信息保存为自“纪元”（即 1970 年 1 月 1 日，格林威治标准时间 00:00:00）以来的毫秒数。可以使用该方法检索它，并且可以使用构造函数`Date.getTime()`轻松创建新的 Date 对象。`Date(long millis)`然后使用每个设备上的本地时区设置显示日期对象。

**编辑：**

纪元是一个定义的时间点，在不同的时区有不同的表达方式：1970-01-01 00:00:00 **GMT**但 1969-12-31 19:00:00 **EST**。时间戳只是从那时起经过的毫秒数。因此，例如时间戳**1341169200**对应于 2012-07-01 19:00:00 **GMT**和 2012-07-01 14:00:00 **EST**。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-05-27T04:00:05.060

# 避免 java.util.Date/.Calendar

与 Java（和 Android）捆绑在一起的 java.util.Date/.Calendar 类是出了名的麻烦，在设计和实现上都有缺陷。

# 乔达时间

[Joda-Time](http://www.joda.org/joda-time/)图书馆是要走的路。这个库启发了现在内置在 Java 8 中的 java.time 包（在 Android 上不可用）。

# 世界标准时间

正如其他答案所建议的那样，最佳实践（通常）是将您的业务逻辑和数据存储/通信保持在[UTC](https://en.wikipedia.org/wiki/Coordinated_Universal_Time)时区（有些人认为没有时区或“反”时区）。仅在用户或数据消费者期望时调整到特定时区。

# 时区

Joda-Time 中的[`DateTime`](http://www.joda.org/joda-time/apidocs/org/joda/time/DateTime.html)类表示日期时间值以及分配的时区。

请注意，最好在所有操作中指定时区。否则，您将隐式依赖 JVM 当前的默认时区。这是有风险的，因为该区域可能会发生变化——即使在运行时任何时候，任何应用程序的任何线程中的任何代码都可以在您的应用程序的 JVM 中运行。并使用[正确的时区名称](https://en.wikipedia.org/wiki/List_of_tz_database_time_zones)，不要使用 3-4 字母代码。

# 示例代码

Joda-Time 2.7 中的示例代码。

```
DateTime sent = DateTime.now( DateTimeZone.getDefault() ) ;
DateTime sentUtc = nowMine.withZone( DateTimeZone.UTC ) ; // Generally, use this for your work, including communicating to other threads and apps and such. 
```

当准备好向其他用户显示时，调整到预期的时区。

```
DateTimeZone zone = DateTimeZone.forID( "America/Montreal" ) ;  // Or DateTimeZone.getDefault() if you want to rely on their JVM’s current default. To be absolutely sure of expected time zone, you really must ask the user.
DateTime sentMontréal = sentUtc.withZone( zone ); 
```

要生成这些日期时间对象的文本表示，请在 StackOverflow.com 上搜索有关该主题的*许多*问题和答案。搜索“joda”、“DateTimeFormatter”和“DateTimeFormat”等术语。

# python - 将 CSV 导入 MySQL 数据库（Django Webapp）

> ID：11245031
> 
> 赞同：0
> 
> 时间：2012-06-28T12:48:52.480
> 
> 标签：python, mysql, django

我正在 Django 中开发一个 webapp，对于它的数据库，我需要将一个 CSV 文件导入到一个特定的 MySQL 数据库中。

我搜索了一下，发现很多页面都列出了如何做到这一点，但我有点困惑。

大多数页面都说要这样做：

```
LOAD DATA INFILE '<file>' INTO TABLE <tablenname>
FIELDS TERMINATED BY ',' 
LINES TERMINATED BY '\n'; 
```

但我很困惑 Django 会如何解释这一点，因为我们在这里没有提到任何**列名**。我是 Django 新手，甚至是数据库新手，所以我真的不知道这会如何解决。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T12:58:37.080

看起来您在数据库管理员（即 PostgreSQL/MySQL）中。上面的其他人对此给出了很好的解释。

但是如果你想将数据导入 Django 本身——Python 有自己的 csv 实现，就像这样：`import csv`.

但是，如果您是 Django 新手，那么我建议您安装 Django CSV Importer 之类的东西：http: [//django-csv-importer.readthedocs.org/en/latest/index.html](http://django-csv-importer.readthedocs.org/en/latest/index.html)。（您将附加组件安装到您的 Python 库中。）

不过，不幸的是，作者在文档中有错字。你必须做`from csvImporter.model import CsvDbModel`，不是`from csv_importer.model import CsvDbModel`。

在您的 models.py 文件中，创建如下内容：

```
class MyCSVModel(CsvDbModel):
    pass  
    class Meta:
        dbModel = Model_You_Want_To_Reference
        delimiter = ","
        has_header = True 
```

然后，进入您的 Python shell 并执行以下命令： `my_csv = MyCsvModel.import_data(data = open("my_csv_file_name.csv"))`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T12:51:51.020

这不是 Django 代码，并且 Django 不在乎您如何称呼 CSV 文件中的列。这是您通过 DB shell 直接针对数据库运行的 SQL。您应该查看 MySQL 文档以获取更多详细信息，但它只会按照表中定义的顺序排列列。

如果您想要更多控制，您可以使用该`csv`模块编写一些 Python 代码来加载和解析文件，然后通过 Django ORM 将其添加到数据库中。但这会比 SQL 方式慢得多。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T12:55:03.073

它可能只是按顺序将数据添加到列中，因为它们在您的 SQL 语句中被省略了。

如果需要，可以将字段添加到 SQL 的末尾：

```
LOAD DATA INFILE '<file>' INTO TABLE <tablenname>
FIELDS TERMINATED BY ',' 
LINES TERMINATED BY '\n'
(@Field1, @Field2, @Field3)    /* Fields in CSV */
SET Col1 = @Field1, Col2 = @Field2, Col3 = @Field3;  /* Columns in DB */ 
```

[MySQL.com 上对 LOAD DATA 命令的更深入分析](http://dev.mysql.com/doc/refman/5.1/en/load-data.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-28T12:55:23.747

该命令由 MySQL 解释，而不是 Django。如[手册](http://dev.mysql.com/doc/en/load-data.html)所述：

> 默认情况下，当`LOAD DATA INFILE`语句末尾没有提供列列表时，输入行应包含每个表列的字段。如果您只想加载表的某些列，请指定列列表：
> 
> ```
> LOAD DATA INFILE 'persondata.txt' INTO TABLE persondata (col1,col2,...); 
> ```
> 
> 如果输入文件中字段的顺序与表中列的顺序不同，您还必须指定列列表。否则，MySQL 无法判断如何将输入字段与表列匹配。

# android - Android - 通过 GPS 错误获取国家/地区

> ID：11245035
> 
> 赞同：0
> 
> 时间：2012-06-28T12:49:07.800
> 
> 标签：android, gps, android-alertdialog, android-sensors

你好 StackOverflow :)

我在 onStart(); 中创建了一些代码；确保用户启用 GPS 的方法，以便我可以确定他现在在哪个国家/地区。如果 GPS 被禁用，它应该显示一个警告对话框，提示用户在使用应用程序之前启用 GPS。

出于某种原因，似乎整个代码块都不起作用。我禁用了 GPS，但什么也没有发生，没有对话，也没有类似的东西。为什么会这样？

这是我的代码：

```
 @Override
protected void onStart() {
    super.onStart();

    LocationManager locationManager =
            (LocationManager) getSystemService(Context.LOCATION_SERVICE);
    final boolean gpsEnabled = locationManager.isProviderEnabled(LocationManager.GPS_PROVIDER);

    Location loc = locationManager.getLastKnownLocation(LocationManager.GPS_PROVIDER);
    Geocoder code = new Geocoder(TipCalculatorActivity.this);
    try {
        Address adr = (Address) code.getFromLocation(loc.getLatitude(), loc.getLongitude(), 1);
        CountryName = adr.getCountryCode();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    if (!gpsEnabled) {
        AlertDialog.Builder builder = new AlertDialog.Builder(this);
        builder.setMessage("This application requires GPS connectivity to determine your current country, and deliver you accurate tip ratings. Do you wish to turn GPS on?")
               .setCancelable(false)
               .setPositiveButton("Yes", new DialogInterface.OnClickListener() {
                   public void onClick(DialogInterface dialog, int id) {
                        TipCalculatorActivity.this.enableLocationSettings();
                   }
               })
               .setNegativeButton("No", new DialogInterface.OnClickListener() {
                   public void onClick(DialogInterface dialog, int id) {
                        dialog.cancel();
                        TipCalculatorActivity.this.finish();
                        System.exit(1);
                   }
               });
        AlertDialog alert = builder.create();
        alert.show();
    }
}

private void enableLocationSettings() {
    Intent settingsIntent = new Intent(Settings.ACTION_LOCATION_SOURCE_SETTINGS);
    startActivity(settingsIntent);
} 
```

非常感谢您的帮助:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T13:02:04.897

> 位置 loc = locationManager .getLastKnownLocation(LocationManager.GPS_PROVIDER);

由于您的手机没有缓存位置，因此在您的情况下可能会返回 null。

因此，将您的代码更改为

```
if (loc != null) {
    Geocoder code = new Geocoder(AbcActivity.this);
    try {
        Address adr = (Address) code.getFromLocation(loc.getLatitude(), loc.getLongitude(), 1);
        // CountryName = adr.getCountryCode();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
} 
```

如果您需要查询当前位置。那么您需要有活动的数据连接或 GPS 打开。关注片段将帮助您

```
import android.app.Activity;
import android.content.Context;
import android.location.Criteria;
import android.location.Location;
import android.location.LocationListener;
import android.location.LocationManager;
import android.os.Bundle;
import android.widget.TextView;
import android.widget.Toast;

public class ShowLocationActivity extends Activity implements LocationListener {
    private TextView latituteField;
    private TextView longitudeField;
    private LocationManager locationManager;
    private String provider;

/** Called when the activity is first created. */

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        latituteField = (TextView) findViewById(R.id.TextView02);
        longitudeField = (TextView) findViewById(R.id.TextView04);

        // Get the location manager
        locationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
        // Define the criteria how to select the locatioin provider -> use
        // default
        Criteria criteria = new Criteria();
        provider = locationManager.getBestProvider(criteria, false);
        Location location = locationManager.getLastKnownLocation(provider);

        // Initialize the location fields
        if (location != null) {
            System.out.println("Provider " + provider + " has been selected.");
            int lat = (int) (location.getLatitude());
            int lng = (int) (location.getLongitude());
            latituteField.setText(String.valueOf(lat));
            longitudeField.setText(String.valueOf(lng));
        } else {
            latituteField.setText("Provider not available");
            longitudeField.setText("Provider not available");
        }
    }

    /* Request updates at startup */
    @Override
    protected void onResume() {
        super.onResume();
        locationManager.requestLocationUpdates(provider, 400, 1, this);
    }

    /* Remove the locationlistener updates when Activity is paused */
    @Override
    protected void onPause() {
        super.onPause();
        locationManager.removeUpdates(this);
    }

    @Override
    public void onLocationChanged(Location location) {
        int lat = (int) (location.getLatitude());
        int lng = (int) (location.getLongitude());
        latituteField.setText(String.valueOf(lat));
        longitudeField.setText(String.valueOf(lng));
    }

    @Override
    public void onStatusChanged(String provider, int status, Bundle extras) {
        // TODO Auto-generated method stub

    }

    @Override
    public void onProviderEnabled(String provider) {
        Toast.makeText(this, "Enabled new provider " + provider,
                Toast.LENGTH_SHORT).show();

    }

    @Override
    public void onProviderDisabled(String provider) {
        Toast.makeText(this, "Disabled provider " + provider,
                Toast.LENGTH_SHORT).show();
    }
} 
```

最后确保您添加了以下权限。

```
< uses - permission android: name = "android.permission.ACCESS_FINE_LOCATION" / > 
< uses - permission android: name = "android.permission.ACCESS_COARSE_LOCATION" / > 
```

# objective-c - 在视图控制器之间拖放（包含在同一个视图控制器中）

> ID：11245043
> 
> 赞同：2
> 
> 时间：2012-06-28T12:49:37.383
> 
> 标签：objective-c, ios, ios5, uiviewcontroller, uigesturerecognizer

我有一个视图控制器，它显示在拆分视图的详细视图中，由**TableView**和**Core Plot 图表**视图组成，如下所示：

![我的视图控制器](../Images/0cfb3e6d10d566097a608677d31b56d2.png)

我希望能够将单个 TableViewCells 拖放到 Core Plot 视图中。

由于手势识别器只能绑定到一个视图，因此最好的方法是什么？

如何为拖放移动设置动画？

## 关于视图控制器包含的附加问题

如果两者都包含在同一个视图控制器容器中（如在 iOS 5 中），我如何实现从一个视图控制器到另一个视图控制器的拖放。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-28T14:10:28.203

这是我用来从拆分视图左侧面板上的表格视图中拖动一行到右侧面板详细信息屏幕的一些代码。这似乎与您的问题相似，尽管不可否认。无论如何，我个人从长按触发拖放：

```
UILongPressGestureRecognizer *longPress = [[UILongPressGestureRecognizer alloc] initWithTarget:self action:@selector(longPress:)];
[self.tableView addGestureRecognizer:longPress]; 
```

然后我的处理程序执行以下操作：

```
- (IBAction)longPress:(UIGestureRecognizer *)sender
{
    if (sender.state == UIGestureRecognizerStateBegan)
    {        
        // figure out which item in the table was selected

        NSIndexPath *indexPath = [self.tableView indexPathForRowAtPoint:[sender locationInView:self.tableView]];
        if (!indexPath)
        {
            _inDrag = NO;
            return;
        }

        _inDrag = YES;

        // get the text of the item to be dragged

        NSString *text = [NSString stringWithString:[[_objects objectAtIndex:indexPath.row] description]];

        // create item to be dragged, in this example, just a simple UILabel

        UIView *splitView = self.splitViewController.view;
        CGPoint point = [sender locationInView:splitView];
        UIFont *font = [UIFont systemFontOfSize:12];
        CGSize size = [text sizeWithFont:font];
        CGRect frame = CGRectMake(point.x - (size.width / 2.0), point.y - (size.height / 2.0), size.width, size.height);
        _draggedView = [[UILabel alloc] initWithFrame:frame];
        [_draggedView setFont:font];
        [_draggedView setText:text];
        [_draggedView setBackgroundColor:[UIColor clearColor]];

        // now add the item to the view

        [splitView addSubview:_draggedView];
    }
    else if (sender.state == UIGestureRecognizerStateChanged && _inDrag) 
    {
        // we dragged it, so let's update the coordinates of the dragged view

        UIView *splitView = self.splitViewController.view;
        CGPoint point = [sender locationInView:splitView];
        _draggedView.center = point;
    }
    else if (sender.state == UIGestureRecognizerStateEnded && _inDrag)
    {
        // we dropped, so remove it from the view

        [_draggedView removeFromSuperview];

        // and let's figure out where we dropped it

        UIView *detailView = self.detailViewController.view;
        CGPoint point = [sender locationInView:detailView];

        UIAlertView *alert;
        if (CGRectContainsPoint(detailView.bounds, point))
            alert = [[UIAlertView alloc] initWithTitle:@"dropped in details view" message:nil delegate:nil cancelButtonTitle:@"Ok" otherButtonTitles:nil];
        else
            alert = [[UIAlertView alloc] initWithTitle:@"dropped outside details view" message:nil delegate:nil cancelButtonTitle:@"Ok" otherButtonTitles:nil];
        [alert show];
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T12:59:34.087

您可以创建一个与 tableView Cell 相同的空视图。当您选择一行时，然后将您的单元格数据设置到该空视图中并在 tableview 上添加该空视图。

现在您可以使用手势识别器拖动您的空视图，一旦您释放超出表格视图框架而不是根据该值绘制图形并从当前视图中删除该视图。

这里唯一的问题是您必须首先选择要执行拖放操作的行。从第二次开始，您将使用拖放功能。

这是我在我的一个应用程序中实现的。希望这可以帮助。

# java - java - 如何在java swing JTextPane中附加一个字符串？

> ID：11245048
> 
> 赞同：1
> 
> 时间：2012-06-28T12:50:12.297
> 
> 标签：java, swing, jtextpane, styleddocument

我正在创建一个聊天应用程序。在这个聊天应用程序中，我必须使用 Java Swing`JTextPane`为一些特定的字符串赋予样式，例如用户的显示名称和消息的时间。这就是我选择`JTextPane`over的原因`JTextArea`。在 JTextPane 中，我不能追加字符串，所以我创建了一个字符串缓冲区来追加字符串，然后我做`jTextPane.setText(stringBuffer.toString())`.

这是我的问题：当我将字符串附加到`JTextPane`via a`StringBuffer`时，会有延迟。如何在 a 中逐行附加字符串`JTextPane`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-28T12:54:21.000

发现另一个类似的问题，其答案使用实例上的`StyledDocument`and 调用方法将文本附加到它，然后写回：[JTextPane appending a new string](https://stackoverflow.com/questions/4059198/jtextpane-appending-a-new-string)`insertString()``StyledDocument``StyledDocument``JTextPane`

# symfony - 得到@Gedmo\Timestampable 从未导入的错误，即使它是

> ID：11245049
> 
> 赞同：2
> 
> 时间：2012-06-28T12:50:12.640
> 
> 标签：symfony, doctrine-orm

我有两个实体：一个，称为`Event`，它*是可*时间戳的（通过 Gedmo）并且已经存在了几个月，另一个还不是*时间戳*，称为`User`，但我正在尝试使其具有时间戳。

在我的`User`实体的顶部，我有以下`use`声明：

```
use Gedmo\Mapping\Annotation as Gedmo; 
```

然后我有这个：

```
/** 
 * @var datetime $created
 *
 * @Gedmo\Timestampable(on="create")
 * @ORM\Column(type="datetime")
 */
private $created;

/** 
 * @var datetime $updated
 *
 * @ORM\Column(type="datetime")
 * @Gedmo\Timestampable(on="update")
 */
private $updated; 
```

这与我为`Event`. 但是，奇怪的是，当我尝试这样做时`./app/console doc:mig:diff`，我收到了这个错误：

> [Doctrine\Common\Annotations\AnnotationException]
> [语义错误] 从未导入属性 VNN\PressboxBundle\Entity\User::$created 中的注释“@Gedmo\Timestampable”。您是否可能忘记为此注释添加“使用”语句？

不，我没有忘记添加`use`声明。我觉得奇怪的是，`Event`前一段时间工作得很好，但现在`User`不工作了。为什么我会收到此错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T13:04:07.980

我遇到了这种奇怪的行为，我不记得究竟是什么原因造成的。

你如何在 app/config/config.yml 中加载学说.extensions 配置？

这是我运行良好的配置：

`app/config/config.yml`：

```
imports:
    - { resource: parameters.ini }
    - { resource: security.yml }
    - { resource: doctrine-extensions.yml } 
```

`app/config/doctrine-extensions.yml`：

```
services:
    gedmo.listener.timestampable:
        class: Gedmo\Timestampable\TimestampableListener
        tags:
            # I have 2 DBAL connections using Timestampable
            - { name: doctrine.event_subscriber, connection: tm_vg }
            - { name: doctrine.event_subscriber, connection: tm_common }
        calls:
            - [ setAnnotationReader, [ '@annotation_reader' ] ] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-25T09:18:54.927

我有同样的问题要解决我更换

`@Gedmo\Slug(fields={"projectName"})`

经过

```
@Gedmo\Mapping\Annotation\Slug(fields={"projectName"})

/** 
 * @Gedmo\Mapping\Annotation\Slug(fields={"projectName"})
 * @ORM\Column(name="slug", type="string", length=255, nullable=true, unique=true)
 */
private $slug; 
```

# asp.net-mvc-3 - 如何模拟 httpcontext 使其在单元测试中不为空？

> ID：11245059
> 
> 赞同：5
> 
> 时间：2012-06-28T12:50:38.850
> 
> 标签：asp.net-mvc-3, unit-testing, mocking, moq, httpcontext

我正在编写单元测试并且控制器方法抛出异常，因为 HttpContext / ControllerContext 为空。我不需要从 HttpContext 断言任何东西，只需要它不为 NULL。我做过研究，我相信最小起订量就是答案。但是我所看到的所有样本都对我没有多大帮助。我不需要做任何花哨的事情，只是为了模拟 httpcontext。为我指明正确的方向！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-29T15:08:42.243

在一个类中从[这里](http://www.emadibrahim.com/2008/04/04/unit-test-linq-to-sql-in-aspnet-mvc-with-moq/)获得这两个函数；

```
public static class HttpContextFactory
    {
        public static void SetFakeAuthenticatedControllerContext(this Controller controller)
        {

            var httpContext = FakeAuthenticatedHttpContext();
            ControllerContext context =
            new ControllerContext(
            new RequestContext(httpContext,
            new RouteData()), controller);
            controller.ControllerContext = context;

        }

        private static HttpContextBase FakeAuthenticatedHttpContext()
        {
            var context = new Mock<HttpContextBase>();
            var request = new Mock<HttpRequestBase>();
            var response = new Mock<HttpResponseBase>();
            var session = new Mock<HttpSessionStateBase>();
            var server = new Mock<HttpServerUtilityBase>();
            var user = new Mock<IPrincipal>();
            var identity = new Mock<IIdentity>();

            context.Setup(ctx => ctx.Request).Returns(request.Object);
            context.Setup(ctx => ctx.Response).Returns(response.Object);
            context.Setup(ctx => ctx.Session).Returns(session.Object);
            context.Setup(ctx => ctx.Server).Returns(server.Object);
            context.Setup(ctx => ctx.User).Returns(user.Object);
            user.Setup(ctx => ctx.Identity).Returns(identity.Object);
            identity.Setup(id => id.IsAuthenticated).Returns(true);
            identity.Setup(id => id.Name).Returns("a.ali174");

            return context.Object;
        }

    } 
```

从单元测试中，我这样称呼它们；

```
 HttpContextFactory.SetFakeAuthenticatedControllerContext(controller); 
```

确保在测试项目中安装了[Moq ：](https://www.nuget.org/packages/Moq/)

```
Install-Package Moq 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-05T19:56:48.213

我知道这是一个较老的主题，但是模拟 MVC 应用程序进行单元测试是我们经常做的事情。

我只是想添加我在升级到 Visual Studio 2013 后使用 Moq 4 模拟 MVC 3 应用程序的经验。没有一个单元测试在调试模式下工作，并且 HttpContext 在尝试查看变量时显示“无法评估表达式” .

原来 Visual Studio 2013 在评估某些对象时存在问题。为了让调试模拟的 Web 应用程序再次运行，我必须检查工具 => 选项 => 调试 => 常规设置中的“使用托管兼容模式”。

# php - 为什么我不能在“foreach”循环中取消设置变量？

> ID：11245061
> 
> 赞同：4
> 
> 时间：2012-06-28T12:50:56.750
> 
> 标签：php

为什么我不能在`foreach`循环中取消设置变量？

```
<?php

$array = array(a,s,d,f,g,h,j,k,l);

foreach($array as $i => $a){
 unset($array[1]);
 echo $a . "\n";
}

print_r($array); 
```

在[代码](http://codepad.org/rCeNevz5)中，变量在循环内的范围内`foreach`，但在循环外它是未设置的。是否可以在循环内取消设置？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-28T12:53:36.507

您需要通过引用传递数组，如下所示：

```
foreach($array as $i => &$a){ 
```

注意添加的`&`. [这在foreach](http://us3.php.net/manual/en/control-structures.foreach.php)的手册中也有说明：

> 为了能够直接修改循环内的数组元素，在 $value 之前加上 &。在这种情况下，该值将通过引用分配。

这现在[产生](http://codepad.org/ve3yawZe)：

```
a
d
f
g
h
j
k
l
Array
(
    [0] => a
    [2] => d
    [3] => f
    [4] => g
    [5] => h
    [6] => j
    [7] => k
    [8] => l
) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-28T12:53:48.380

在数组的`foreach`副本上执行，而不是引用，以便在执行期间更容易处理数组（例如您的）中更剧烈的变化。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-28T12:56:43.353

`foreach`在访问循环内的代码块之前，遍历数组并将键分配给 $i 并将值分配给 $a。该数组实际上是在迭代之前由函数“复制”的，因此对原始数组的任何更改都不会影响循环的进行。

您还可以通过引用将 $array 传递到 foreach 中，`$i => &$a`而不是按值传递，这将允许数组的突变。

另一种选择是直接在数组上工作，你会看到一些不同的东西：

```
for($x=0;$x<count($array);$x++){
    unset($array[1]);
    // for $x=1 this would result in an error as key does not exist now
    echo $array[$x];
}

print_r($array); 
```

当然，这假设您的数组是按数字顺序键控的。

# java - 我们如何获得使用 Selenium WebDriver 加载页面的准确时间？

> ID：11245062
> 
> 赞同：9
> 
> 时间：2012-06-28T12:51:01.457
> 
> 标签：java, selenium, selenium-webdriver, webdriver

我们如何获得使用 Selenium WebDriver 加载页面的准确时间？

我们使用 Thread.sleep

我们使用隐式等待

我们使用 WebDriverWait

但是我们如何才能获得使用 Selenium WebDriver 加载页面的准确时间呢？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-28T15:47:02.683

如果您想了解使用 Selenium WebDriver（又名 Selenium 2）完全加载页面需要多少时间。

通常，WebDriver 仅在页面完全加载后才应将控制权返回给您的代码。

因此，以下 Selenium Java 代码可能会帮助您找到页面加载时间 -

```
long start = System.currentTimeMillis();

driver.get("Some url");

long finish = System.currentTimeMillis();
long totalTime = finish - start; 
System.out.println("Total Time for page load - "+totalTime); 
```

如果这不起作用，那么您将不得不等到页面上显示某些元素 -

```
 long start = System.currentTimeMillis();

driver.get("Some url");

WebElement ele = driver.findElement(By.id("ID of some element on the page which will load"));
long finish = System.currentTimeMillis();
long totalTime = finish - start; 
System.out.println("Total Time for page load - "+totalTime); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-10-01T09:46:05.303

您可以使用 org.apache.commons.lang3.time 包的 StopWatch 对象。以下是使用 Java 的 Selenium WebDriver 的完整代码：

```
import org.apache.commons.lang3.time.StopWatch;
import org.openqa.selenium.By;
import org.openqa.selenium.WebDriver;
import org.openqa.selenium.firefox.FirefoxDriver;
import org.openqa.selenium.support.ui.ExpectedConditions;
import org.openqa.selenium.support.ui.WebDriverWait;

public class TimerInSeleniumWebDriver {
    public static void main(String[] args) {
        WebDriver driver;
        driver = new FirefoxDriver();       
        StopWatch pageLoad = new StopWatch();
        pageLoad.start();
        //Open your web app (In my case, I opened facebook)
        driver.get("https://www.facebook.com/");
        // Wait for the required any element (I am waiting for Login button in fb)
        WebDriverWait wait = new WebDriverWait(driver, 10);
        wait.until(ExpectedConditions.presenceOfElementLocated(By.id("u_0_l")));

        pageLoad.stop();
        //Get the time
        long pageLoadTime_ms = pageLoad.getTime();
        long pageLoadTime_Seconds = pageLoadTime_ms / 1000;
        System.out.println("Total Page Load Time: " + pageLoadTime_ms + " milliseconds");
        System.out.println("Total Page Load Time: " + pageLoadTime_Seconds + " seconds");
        driver.close();
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-02-26T20:53:49.497

我也有这个要求，我使用了浏览器提供的[performance.timeOrigin](https://developer.mozilla.org/en-US/docs/Web/API/Performance/timeOrigin)对象。我在 C# 中使用它，但对于这个问题，我修改了@Ripon Al Wasim 的答案，使其适用于 java。

```
import org.apache.commons.lang3.time.StopWatch;
import org.openqa.selenium.By;
import org.openqa.selenium.WebDriver;
import org.openqa.selenium.firefox.FirefoxDriver;
import org.openqa.selenium.support.ui.ExpectedConditions;
import org.openqa.selenium.support.ui.WebDriverWait;

public class TimerInSeleniumWebDriver {
    public static void main(String[] args) {
        WebDriver driver;
        driver = new FirefoxDriver();
        //Open your web app (In my case, I opened facebook)
        driver.get("https://www.facebook.com/");
        // Wait for the required any element (I am waiting for Login button in fb)
        WebDriverWait wait = new WebDriverWait(driver, 10);
        wait.until(ExpectedConditions.presenceOfElementLocated(By.id("u_0_l")));
        //Get the time
        long pageLoadTime_ms = getPageLoadTime();
        long pageLoadTime_Seconds = pageLoadTime_ms / 1000;
        System.out.println("Total Page Load Time: " + pageLoadTime_ms + " milliseconds");
        System.out.println("Total Page Load Time: " + pageLoadTime_Seconds + " seconds");
        driver.close();
    }
      public static long getPageLoadTime(WebDriver driver){
        //Creating the JavascriptExecutor interface object by Type casting      
        JavascriptExecutor js = (JavascriptExecutor)driver;     

      //This will get you the time passed since you page navigation started 
      return (Long)((JavascriptExecutor)driver).executeScript("return Date.now() - performance.timeOrigin;"");  
    }
} 
```

只需在需要获取页面加载时间的地方调用以下方法。

```
 public static long getPageLoadTime(WebDriver driver){
        //Creating the JavascriptExecutor interface object by Type casting      
        JavascriptExecutor js = (JavascriptExecutor)driver;     

      //This will get you the time passed since you page navigation started     
      return (Long)((JavascriptExecutor)driver).executeScript("return Date.now() - performance.timeOrigin;"");  
    } 
```

您无需担心页面加载开始的位置，但就像其他答案一样，您必须**在页面加载完成后立即放置**。

这与 StopWatch 类似，但更干净（无需启动、停止、重置）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-09-02T16:30:03.573

使用 TestListners 获得最佳体验：

```
@AfterMethod
    public void getResult(ITestResult result) throws Exception {
        String sMethodName = "";
        Long lExecutionTime;
        sMethodName = result.getMethod().getMethodName().toString();
        lExecutionTime = (result.getEndMillis() - result.getStartMillis()) / 1000;
        System.out.println(sMethodName + " execution Time is : " + lExecutionTime + "sec.");
    } 
```

* * *

## 回答 #5

> 赞同：-12
> 
> 时间：2014-04-22T12:32:24.157

driver.manage().timeouts().pageLoadTimeout(60, TimeUnit.SECONDS);

# .net - 对 WCF 服务进行 POST 时 iOS 5 Json 错误 400

> ID：11245067
> 
> 赞同：1
> 
> 时间：2012-06-28T12:51:12.090
> 
> 标签：.net, ios, xcode, json, wcf

get 工作正常，并且能够使用测试 winform 应用程序发布到数据库，但在尝试从 iOS 应用程序执行 POST 时从 IIS 日志中收到错误 400。这是 IIS 日志 2012-06-28 12:13:39 192.168.100.112 POST /JsonWcfService/GetEmployees.svc/json/updateuser - 58129 - 192.168.100.231 WcfTest/1.0+CFNetwork/548.0.3+Darwin/11.4.0 400 0 0 4163

这是 WCF 服务代码

```
 [OperationContract]
    [WebInvoke(Method = "POST",
       ResponseFormat = WebMessageFormat.Json,
       RequestFormat = WebMessageFormat.Json,
       BodyStyle = WebMessageBodyStyle.Wrapped,
       UriTemplate = "json/updateuser")]
    //method
     Employee PostEmp(Employee emp);    

[DataContract]
public class Employee
{
    [DataMember]
    public string firstname { get; set; }
    [DataMember]
    public string lastname { get; set; }
    [DataMember]
    public decimal salary { get; set; }
    [DataMember]
    public int idkey { get; set; }
    public Employee()
    {

    }
}

public Employee GetEmp(int IDKey)
{
    Employee emp = new Employee();

    using (EmpDBEntities empContext = new EmpDBEntities())
    {
        var j = (from t in empContext.EMPKeys where t.IDKey == IDKey select t).FirstOrDefault();
        emp = (new Employee(j.FirstName, j.LastName, j.Salary, j.IDKey));
        return emp;
    }
 } 
```

xcode 取自该站点上的另一个帖子。

```
NSArray *keys = [NSArray arrayWithObjects:@"idkey", @"firstname", @"lastname",@"salary", nil];
NSArray *objects = [NSArray arrayWithObjects:@"1", @"jim", @"jones", @"450",nil];
NSData *__jsonData = nil;
NSString *__jsonString = nil;
NSURL *url = [NSURL
URLWithString:@"http://<ip address>/JsonWcfService/GetEmployees.svc/json/updateuser"];

NSDictionary *jsonDictionary = [NSDictionary dictionaryWithObjects:objects forKeys:keys];

if([NSJSONSerialization isValidJSONObject:jsonDictionary])
{
    __jsonData = [NSJSONSerialization dataWithJSONObject:jsonDictionary options:0 error:nil];
    __jsonString = [[NSString alloc]initWithData:__jsonData encoding:NSUTF8StringEncoding];
}

// Be sure to properly escape your url string.
NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:url];
[request setHTTPMethod:@"POST"];
[request setHTTPBody: __jsonData];
[request setValue:@"application/json" forHTTPHeaderField:@"Content-Type"];
[request setValue:[NSString stringWithFormat:@"%d", [__jsonData length]] forHTTPHeaderField:@"Content-Length"];

NSError *errorReturned = nil;
NSURLResponse *theResponse =[[NSURLResponse alloc]init];
NSData *data = [NSURLConnection sendSynchronousRequest:request returningResponse:&theResponse error:&errorReturned];

if (errorReturned) {
    // Handle error.
}
else
{
    NSError *jsonParsingError = nil;
    NSArray *jsonArray = [NSJSONSerialization JSONObjectWithData:data options:NSJSONReadingMutableContainers|NSJSONReadingAllowFragments 
```

错误：&jsonParsingError]; }

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T15:33:33.277

问题是在实现文件中更改了两行并且现在可以使用。

```
[OperationContract]
[WebInvoke(Method = "POST",
   ResponseFormat = WebMessageFormat.Json,
   RequestFormat = WebMessageFormat.Json,
   //BodyStyle = WebMessageBodyStyle.Wrapped, removed this line otherwise the Employee object was null
   //UriTemplate = "json/updateuser")
UriTemplate =""] //removed "json/updateuser and was able to post to the DB
//method
 Employee PostEmp(Employee emp); 
```

# solr - 使用非 ASCII 值按索引对构面进行排序

> ID：11245068
> 
> 赞同：2
> 
> 时间：2012-06-28T12:51:14.283
> 
> 标签：solr, faceted-search

我们有一个字段“facet_tag”，其中包含描述产品的标签。由于标签是德语，它们可能包含非 ASCII 字符（如变音符号）。以下是一些可能的值：

"Zelte"
"Tunnelzelte"
"Äxte"
"Sägen" "Softshells
"

现在，如果我们使用如下查询查询 solr 的构面：

```
http://<solr_host>:<solr_port>/solr/select?q=*&facet=on&facet.field=facet_tag&facet.sort=index 
```

排序后的结果如下所示：

```
<lst name="facet_counts">
    <lst name="facet_queries"/>
    <lst name="facet_fields">
        <lst name="facet_tag">
            <int name="Softshells">1</int>
            <int name="Sägen">1</int>
            <int name="Tunnelzelte">1</int>
            <int name="Zelte">1</int>
            <int name="Äxte">2</int>
        </lst>
    </lst>
    <lst name="facet_dates"/>
    <lst name="facet_ranges"/>
</lst> 
```

标签“Äxte”应该是第一项，然后是“Sägen”。显然 Solr 在这种情况下不能很好地处理非 ASCII 字符（在分面搜索的文档中也有说明，请参阅[http://wiki.apache.org/solr/SimpleFacetParameters#facet.sort](http://wiki.apache.org/solr/SimpleFacetParameters#facet.sort)）

有没有办法让 Solr 正确排序这些值而不标准化变音符号（因为我们向用户显示这些值）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T13:00:44.617

我会使用[`ASCIIFoldingFilterFactory`](https://wiki.apache.org/solr/AnalyzersTokenizersTokenFilters#solr.ASCIIFoldingFilterFactory)：

> 将不在前 127 个 ASCII 字符（“基本拉丁语”Unicode 块）中的字母、数字和符号 Unicode 字符转换为它们的 ASCII 等效字符（如果存在）。

这样，您索引的内容就会标准化（例如 Äxte 被索引为 Axte），但存储的内容不会改变。这就是为什么您应该获得预期的排序，但您将显示的内容仍将是原始内容（例如Äxte）。

**更新**
该解决方案不适用于构面，因为它们使用索引值。使用`ASCIIFoldingFilterFactory`您可以获得正确的排序，但您也会看到标准化字符作为输出。基本上你可以有正确的排序但错误的输出或错误的排序但正确的输出。不幸的是，我不知道任何其他解决方案。

# ms-access - Select Case Is < 0 true on 负数

> ID：11245069
> 
> 赞同：1
> 
> 时间：2012-06-28T12:51:14.423
> 
> 标签：ms-access

一开始是一个简单的验证代码，在我看来，它转换成非常自相矛盾的东西。

以下代码返回“干得好！” 当我在 InputBox 弹出窗口中输入负数时

```
Dim myvar As String

myvar = InputBox("input a positive number, please")

If IsNumeric(myvar) Then
    myvar = CDbl(myvar)
    Select Case myvar
    Case Is < 0
        MsgBox "I need a positive number"
    Exit Sub
    Case Is > 0
        MsgBox "Good work!"
        [MyField] = myvar
        RunCommand acCmdSaveRecord
        Me.Requery
    Exit Sub
    Case Else
        MsgBox "You entered '" & myvars & "'. I don't know what to do about"
    End Select
Else
    MsgBox "A Number, please"
End If 
```

这真的是验证 InputBox 的最佳方式吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T12:54:39.753

由于`myvar`is a `String`,`CDbl(myvar)`将被隐式转换回字符串。为`Select Case`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T23:55:42.137

我同意其他一些答案。考虑重写这段代码（注意声明的第二个变量）：

```
Dim myvar as String
Dim myDbl as Double

myvar = inputBox ("Input a positive number, please")

if isnumeric(myvar) then
    myDbl = cDbl(myvar)
else
    msgbox "Enter a number please"
    exit sub
end if

if mydbl <=0 then
    msgbox "I need a positive number"
else        'if mydbl > 0 then
    MsgBox "Good work!"
    [MyField] = myvar
    RunCommand acCmdSaveRecord
    Me.Requery
end if 
```

这将通过占零并将单独的变量声明为双精度来解决您的问题。我认为 if 语句而不是 case 只是偏好。但现在想想你拥有的两个变量。

```
debug.print "MyVar is a string containing: " & myvar

debug.print cstr(cdbl(myvar)*2)    
'This forces myvar into a double(a number-type) to do math on it and then print it out 
```

但是，如果您要重新运行第一次打印，您会看到 myvar 仍然是一个字符串，可以像字符串一样使用。在 VBA 中，与其他一些语言不同，变量只是您声明它们的内容。如果你想将它们用作其他东西，你必须声明另一个所需类型的变量。

TL;DR 将它们视为不同的容器。字符串是圆形盒子，双打是方形盒子。它们可能能够容纳类似的东​​西，但容器的功能受到它们的形状的限制。在 VBA 中，您没有办法将一个圆圈强制为一个正方形，因此您必须制作一个完整的第二个容器并将这些东西转移过来。

# groovy - Groovy 2：再也找不到 JSonSlurper 和 XmlSlurper

> ID：11245073
> 
> 赞同：9
> 
> 时间：2012-06-28T12:51:29.943
> 
> 标签：groovy

我升级到 groovy 2 版本，现在我的构建被破坏了。

导入类时失败：groovy.json.JsonSlurper 和 XmlSlurper。

我检查了[http://groovy.codehaus.org/gapi/](http://groovy.codehaus.org/gapi/)并且找不到这些类了。它们仍然存在于 groovy 2 中吗？还是他们搬到了某个地方？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-28T15:16:04.547

带有 groovy 2的`groovy.jar`分布式已被拆分为仅包含最少的部分，所有附加模块（XML、SQL、JSON 等）都在单独的 jar 中。但是，在`embeddable`目录中，您会找到一个 jar 文件`groovy-all-2.0.0.jar`，其中包含 groovy 和所有模块，就像以前的版本一样。最简单的迁移方法是使用这个 jar 文件。

如果您使用的是 Maven Central，则可以使用`artifactId`of`groovy-all`来获取所有内容，或者`groovy`（加上模块）对您的依赖项进行更细粒度的控制。以下是 Maven Central 上可用模块的列表：[http ://search.maven.org/#search|ga|1|g%3A%22org.codehaus.groovy%22](http://search.maven.org/#search|ga|1|g%3A%22org.codehaus.groovy%22)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-28T13:00:44.303

没关系。需要包含 groovy-xml 和 groovy-json jars。这些是从 groovy 的罐子里分离出来的。见： http: [//www.infoq.com/articles/new-groovy-20](http://www.infoq.com/articles/new-groovy-20)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-07-01T13:34:41.757

当我导入 groovy-json-2.4.3 和 groovy-xml-2.4.3 时，JsonSlurper 被识别。

另请参阅 1.8.0 版本之后的新代码重构：[Parsing array of JSON arrays in Groovy](https://stackoverflow.com/questions/3855232/parsing-array-of-json-arrays-in-groovy)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-05-07T12:20:44.687

不要使用“groovy.json.jsonSlurper”，而是使用“net.sf.json.groovy.JsonSlurper”。您的脚本必须正在运行。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2022-02-15T09:40:56.390

我在 Java 项目的 Gradle 构建中遇到了类似的问题（Gradle 使用 Groovy）。

Gradle 自动停止在类路径中包含本地 Groovy 库。因此，我必须在 build.gradle 文件中包含以下几行（标有 +）：

```
buildscript {
    ext {
        springbootVersion = '2.x.x'
        awsVersion = '1.x.x'

        ...
    }
+    dependencies {
+        classpath localGroovy()
+    }
    repositories ...
} 
```

# asp.net - 我有多个用户，我可以锁定网页以便一次只有一个用户可以更新记录吗？

> ID：11245077
> 
> 赞同：4
> 
> 时间：2012-06-28T12:51:40.817
> 
> 标签：asp.net, .net, sql, tsql

任何人都可以为以下查询提供帮助或为我提供一些建议。

我有一个 Web 表单（会议纪要）和 8 个需要访问此网页并更新其区域的用户。一个用户可能有多个区域要更新，本质上我想知道如何在用户使用它时锁定网页，以便在 joe bloggs 完成之前没有其他用户可以更新这个网页。

我设置了一个 Active Directory 安全组，以将站点限制为仅限该组用户，但我需要考虑上述问题的解决方案吗？

有没有办法我可以通过 Web 控件或 SQL 来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T13:09:42.897

必须有更好的方法来做到这一点。但是，您是否可以引入类似于“UpdateInProgress”（位）的sql表列。任何更新过程都会看到该列，如果为 0，则它更新为 1，之后它保存更改并更新回 0，以便表单可供其他人更新。如果更新过程看到 1，则无法更新 Web 表单，因为更新正在进行中。

我还建议引入另一个名为“UpdateInProgressBy”的列，以检查谁打开了它进行编辑。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-28T13:15:54.623

首先，我们必须注意，从用户读取数据、将数据放入页面、更改数据然后尝试写回数据的那一刻起，有很长一段时间。所以我们不是在谈论`lock`SQL 上的命令，也不是在毫秒内发生的任何其他锁，有助于同步线程，但在这里我们必须同步人和他们写的东西。

如果用户出于任何原因离开页面也会出现问题，这可能会使数据永远锁定。

这个问题可以用两种方法解决。

**最简单的是**，当用户尝试保存数据时，您必须检查中间是否更改了相同的数据，并警告他，或显示合并对话框，或以编程方式合并或类似的东西 - 我不知道你赢了什么.

**困难的方法**是不断监控读取和更改数据的页面，并将此监控结果保存在数据库中的一个公共表上，如果一个用户一直停留在页面上，其余用户会收到警告并阅读只有数据，直到用户走。

此监视器必须使用 javasript 制作，并且即使用户放弃该页面也必须知道。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T13:02:45.520

将事务隔离级别设置为`SERIALIZABLE`

有关更多信息，请查看此链接：http: [//msdn.microsoft.com/en-us/library/ms173763.aspx](http://msdn.microsoft.com/en-us/library/ms173763.aspx)

# java - 在我的 Go Launcher 主题之一上的开发者控制台中出现错误

> ID：11245080
> 
> 赞同：0
> 
> 时间：2012-06-28T12:51:49.027
> 
> 标签：java, android, classnotfoundexception, runtimeexception

这似乎只发生在我的免费主题上。我的付费主题似乎都没有任何错误。知道为什么会发生此错误吗？

java.lang.ClassNotFoundException

源方法 PathClassLoader.findClass()

```
java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{slcmotor.goex.gloss/slcmotor.goex.gloss}: java.lang.ClassNotFoundException: slcmotor.goex.gloss in loader dalvik.system.PathClassLoader[/data/app/slcmotor.goex.gloss-2.apk]
at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1742)
at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1834)
at android.app.ActivityThread.access$500(ActivityThread.java:122)
at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1027)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:132)
at android.app.ActivityThread.main(ActivityThread.java:4126)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:491)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:844)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:602)
at dalvik.system.NativeStart.main(Native Method)
Caused by: java.lang.ClassNotFoundException: slcmotor.goex.gloss in loader dalvik.system.PathClassLoader[/data/app/slcmotor.goex.gloss-2.apk]
at dalvik.system.PathClassLoader.findClass(PathClassLoader.java:251)
at java.lang.ClassLoader.loadClass(ClassLoader.java:540)
at java.lang.ClassLoader.loadClass(ClassLoader.java:500)
at android.app.Instrumentation.newActivity(Instrumentation.java:1022)
at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1733)
... 11 more 
```

还有这个

java.lang.ClassNotFoundException

BaseDexClassLoader.findClass()

```
java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{slcmotor.goex.gloss/slcmotor.goex.gloss}: java.lang.ClassNotFoundException: slcmotor.goex.gloss
at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1892)
at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1993)
at android.app.ActivityThread.access$600(ActivityThread.java:127)
at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1159)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:137)
at android.app.ActivityThread.main(ActivityThread.java:4512)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:511)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:794)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:561)
at dalvik.system.NativeStart.main(Native Method)
Caused by: java.lang.ClassNotFoundException: slcmotor.goex.gloss
at dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:61)
at java.lang.ClassLoader.loadClass(ClassLoader.java:501)
at java.lang.ClassLoader.loadClass(ClassLoader.java:461)
at android.app.Instrumentation.newActivity(Instrumentation.java:1026)
at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1883)
... 11 more 
```

# asp.net - DetailsView 插入模式中的验证器

> ID：11245086
> 
> 赞同：0
> 
> 时间：2012-06-28T12:52:05.510
> 
> 标签：asp.net, crud, web2py

我已将详细信息视图的 DefaultMode 属性更改为 Insert，因为我想为我的 sql server 表创建默认插入表单。现在我希望添加验证器，如RequiredFieldValidator、RegularExpressionValidator 等。

那有可能吗？如果没有，那么是否有一种快捷方式可以为 Asp.net 中的数据库表创建插入表单，例如 python 框架 web2py 中的 SQLFORM（[请参阅此处](http://web2py.com/books/default/chapter/29/7#SQLFORM)）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T12:56:08.550

将所有转换`boundfields`为`TemplateField`，打开`EditItemTemplate`每个`TemplateField`以添加`validation`控件。

# android - Web 控制台：什么是 Omniture？

> ID：11245089
> 
> 赞同：1
> 
> 时间：2012-06-28T12:52:09.073
> 
> 标签：android, webview, android-webview

我刚刚遇到了一个有趣的 LogCat 条目：

```
06-28   08:43:25.616    I   Web Console 5075    Omniture: s.t, instance: 1 at :1158337217
06-28   08:43:25.624    I   Web Console 5075    [object Object] at :1158337217 
```

什么是 Omniture（在此上下文中），我在哪里可以了解有关这些 Web 控制台消息的更多信息？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-28T12:57:08.003

[Omniture 是一个分析工具](http://www.omniture.com/)，在某种意义上它可以与谷歌分析相媲美。您所看到的可能是在您正在查看的网站上记录 Omniture javascript 代码。

编辑：

详细说明。Web 控制台日志中出现的内容基本上是在您正在查看的网页中调用 console.log() 的任何内容。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-20T13:03:58.557

Omniture 是一种类似于 Google Analytics 的网络分析工具。

`s.t()`是 Omniture 跟踪库的跟踪调用。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-06-28T12:58:23.307

如果您在网上搜索过omniture，那么您就不会提出问题。在提出问题之前，请稍作搜索`SO`。

Omniture`analytical tool`类似`google analytics`。

这是一个土坯产品。这里是[手机链接](http://www.omniture.com/en/products/mobile-analytics)和[网页链接](http://www.omniture.com/en/)。

# java - 为什么使用类名而不是对象来访问 Java 中的类方法或变量更好？

> ID：11245092
> 
> 赞同：1
> 
> 时间：2012-06-28T12:52:29.473
> 
> 标签：java, static-methods, static-members

[我正在从http://www.oracle.com/technetwork/java/javase/documentation/codeconventions-137265.html#587](http://www.oracle.com/technetwork/java/javase/documentation/codeconventions-137265.html#587)阅读 Java 的代码约定。

在那里，他们提到我们应该避免使用对象来访问类变量或方法，而应该使用类名。

> 避免使用对象来访问类（静态）变量或方法。请改用类名。例如：
> 
> ```
> classMethod();             //OK 
> AClass.classMethod();      //OK
> anObject.classMethod();    //AVOID! 
> ```

在条款或性能或其他方面是否有特殊原因？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-28T12:57:54.977

通过类变量，我假设您的意思是静态变量。

应避免通过实例变量使用静态变量/方法，因为这会使读者感到困惑。由于您只能使用实例来访问实例变量，因此阅读通过实例调用静态方法的代码可能会使读者对正在发生的事情感到困惑。

想象这个案例，用`Thread.sleep`，这是一个静态方法：

```
Thread.sleep(1000); 
```

由于该方法是静态的，并且我们通过类名来调用它，因此读者可以直观地推断出效果是使当前线程进入休眠状态。

现在，如果我们这样做：

```
Thread t = new Thread(...);
t.sleep(1000); 
```

现在哪个线程进入睡眠状态？当前的“显然”。不知道睡眠如何工作的人可能会认为子线程以某种方式进入睡眠状态。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-28T12:55:43.957

我想这取决于你想做什么。我总是使用类名来访问一个静态变量。作为静态，你这样做的方式并不重要，但我确实节省了一些内存使用量。

至于非静态变量，请始终使用对象。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-28T12:59:16.193

就生成的字节码而言，它没有任何不同，因此性能不是问题。

*问题*是使用变量访问静态成员看起来好像变量持有的引用实际上对访问的内容很重要。但事实并非如此！事实上即使在`anObject`哪里`null`，你也*不会*得到一个`NPE`，但它只会调用`classMethod`。

所以原理很简单：访问静态成员时，避免提及实际上与所进行的访问无关的信息（在本例中为变量名）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-28T12:56:52.137

我不了解性能，但如果您将其与类名一起使用，显然另一个查看您的代码的开发人员乍一看就会知道它是一个静态变量/方法。

我不认为编译器会使用变量给出不同的代码。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-28T12:56:57.257

这是因为。

1.它告诉变量或方法实际上是一个静态的。

2.此外，它检查对象引用哪个类。这会产生额外的费用。

# java - Apache Axis NumberFormatException：无效的正整数

> ID：11245093
> 
> 赞同：0
> 
> 时间：2012-06-28T12:52:30.720
> 
> 标签：java, web-services, soap, axis

当我尝试通过使用**Apache Axis发送****SOAP**消息作为输入来使用Web 服务时，我收到以下错误。

 **代码片段：

```
Calendar calendar = Calendar.getInstance();
            SimpleDateFormat simpledateformat = new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss'Z'");

            byte[] fileBytes = null;

            fileBytes=getZipBytes(s); //get the zipped bytes

            SimpleDateFormat formatter =  new SimpleDateFormat("yyyyMMdd");
            Date d=formatter.parse(formatter.format(calendar.getTime()));

            UUID uuid = UUID.randomUUID();   
            String uid=trimUUID(uuid.toString());

            String ETIN="11111";
            String EFIN="111111";

            String msgID= ETIN+getJulian7FromDate(d)+uid;

            String timeStamp=simpledateformat.format(calendar.getTime());

            WebServiceLocator fsetlocator=new WebServiceLocator();
            SendSubmissions servicesoap=fsetlocator.getSendSubmissions(s4);

            SOAPHeaderElement soapheaderelement_1 = new SOAPHeaderElement("http://xyz.org", "userHeader"); //Sample URL

            SOAPElement node1 = soapheaderelement_1.addChildElement("Username");   
            node1.addTextNode("admin");   

            SOAPElement node2 = soapheaderelement_1.addChildElement("Password");   
            node2.addTextNode("pwd");

            SOAPHeaderElement soapheaderelement_2 = new SOAPHeaderElement("http://www.abc.com/GatewayService", "msgHeader"); //Sample URL

            SOAPElement node3 = soapheaderelement_2.addChildElement("message");   
            node3.addTextNode(msgID);   

            SOAPElement node4 = soapheaderelement_2.addChildElement("job");   
            node4.addTextNode("Submit");

            SOAPElement node5 = soapheaderelement_2.addChildElement("Timestamp");   
            node5.addTextNode(timeStamp);   

            SOAPElement node8 = soapheaderelement_2.addChildElement("Process");   
            node8.addTextNode("T");      

           ((Stub) servicesoap).setHeader(soapheaderelement_1);
           ((Stub) servicesoap).setHeader(soapheaderelement_2);

            SubmissionDataListType submissiondatalisttype=new SubmissionDataListType();

            String submissionsCount = getCount(s); // returns a count value

            System.out.println("Count : "+submissionsCount);

            submissiondatalisttype.setCount(new PositiveInteger(submissionsCount));

            int cnt=Integer.parseInt(submissionsCount);

            SubmissionDataListTypeSubmissionData submissiondata[] = new SubmissionDataListTypeSubmissionData[cnt];

            for (int i=0 ; i<cnt ; i++){
            submissiondata[i]=new SubmissionDataListTypeSubmissionData();
            UUID uuid1 = UUID.randomUUID();  
            submissiondata[i].setSubmissionId ( EFIN + getJulian7FromDate(d) + trimUUID(uuid1.toString()));
            Calendar calendar1 = Calendar.getInstance();
            submissiondata[i].setElectronicPostmark(calendar1);
            submissiondata[i].setCategory(CategoryType.StateWH);
            }

            submissiondatalisttype.setSubmissionData(submissiondata);           

            SubmissionDataListType subdatalist=new SubmissionDataListType(new PositiveInteger(submissionsCount),submissiondata);

            SubmissionRecieptListType submissionreceiptlisttype =servicesoap.sendSubmissions(submissiondatalisttype, fileBytes);

            SubmissionRecieptListTypeSubmissionReceipt receipt[] = submissionreceiptlisttype.getSubmissionReceipt();
            FileOutputStream fileoutputstream = new FileOutputStream("Transmit.txt");
            PrintStream printstream = new PrintStream(fileoutputstream);

            for(int i=0; i<cnt;i++){
            printstream.println(receipt[i].getSubmissionId());
            }
            printstream.close(); 

        } catch(Exception exception)
        {
            System.out.println(exception.getMessage());
            throw exception;
        } 
```

> java.lang.NumberFormatException：**无效的正整数：0** 在 org.apache.axis.encoding.ser.SimpleDeserializer.onEndElement(SimpleDeserializer.java:176) 在 org.apache.axis.encoding.DeserializerImpl.endElement(DeserializerImpl.java:502) 在 org.apache.axis.encoding.DeserializationContext .endElement(DeserializationContext.java:1087) 在 org.apache.axis.message.SAX2EventRecorder.replay(SAX2EventRecorder.java:171) 在 org.apache.axis.message.MessageElement.publishToHandler(MessageElement.java:1141) 在 org. apache.axis.message.RPCElement.deserialize(RPCElement.java:236) 在 org.apache.axis.message.RPCElement.getParams(RPCElement.java:384) 在 org.apache.axis.client.Call.invoke(Call. java:2467) 在 org.apache.axis.client.Call.invoke(Call.java:2366) 在 org.apache.axis.client.Call.invoke(Call.java:1812)
> 
> 线程“主”AxisFault faultCode 中的异常：{http://schemas.xmlsoap.org/soap/envelope/}Server.userException faultSubcode：faultString：java.lang.NumberFormatException：无效的 positiveInteger：0 faultActor：在此处输入代码 faultNode：
> faultDetail： {http://xml.apache.org/axis/} **stackTrace：java.lang.NumberFormatException：无效的正整数：0** 在 org.apache.axis.encoding.ser.SimpleDeserializer.onEndElement(SimpleDeserializer.java:176) 在 org.apache.axis.encoding.DeserializerImpl.endElement(DeserializerImpl.java:502) 在 org.apache.axis.encoding.DeserializationContext .endElement(DeserializationContext.java:1087) 在 org.apache.axis.message.SAX2EventRecorder.replay(SAX2EventRecorder.java:171) 在 org.apache.axis.message.MessageElement.publishToHandler(MessageElement.java:1141) 在 org. apache.axis.message.RPCElement.deserialize(RPCElement.java:236) 在 org.apache.axis.message.RPCElement.getParams(RPCElement.java:384) 在 org.apache.axis.client.Call.invoke(Call. java:2467) 在 org.apache.axis.client.Call.invoke(Call.java:2366) 在 org.apache.axis.client.Call.invoke(Call.java:1812)

我正在创建一个自定义 SOAP 标头，并且 SOAP 正文包含 MTOM 附件（以字节为单位的压缩 XML 内容）和一个 Id(Positive integer value)。我试图检查 Id 是否为正。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T13:16:25.123

零不是正整数，它是*无符号*的。正整数从 1 开始并从那里上升。**

# php - MySQL 查询使用 WHERE 连接表，包括匹配项和非匹配项

> ID：11245097
> 
> 赞同：0
> 
> 时间：2012-06-28T12:52:48.803
> 
> 标签：php, mysql, join, where

以下查询将选举人的 ID 与来自投票意图的相应选举人匹配，以查找某些条件。

```
 "   FROM electors,voting_intention 
WHERE electors.ID = voting_intention.elector 
AND electors.telephone > 0 
AND electors.postal_vote != 1 
AND (mosaic IN ('E1','E2','E3') 
OR (voting_intention.pledge IN ('C','P') 
AND  voting_intention.election != '2012-07-05'))  " 
```

问题在于该行`AND (mosaic IN ('E1','E2','E3')`，因为我们需要获取此信息，即使选举人.ID 和voting_intention.elector 之间不匹配，因为此信息在选举人表中。

这样做的方法是将这条线放在 WHERE 方程的首位。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T13:16:24.617

您还可以做的是左外连接来选择所有记录，而不仅仅是完全连接的记录

```
WHERE electors.ID(+) = voting_intention.elector 
```

类似的东西......（未经测试）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T12:57:25.287

这应该做！

```
FROM electors e
FULL OUTER JOIN votin_intention i
   ON e.ID=i.elector
WHERE electors.telephone > 0  
AND electors.postal_vote != 1  
AND (mosaic IN ('E1','E2','E3')  
OR (voting_intention.pledge IN ('C','P')  
AND  voting_intention.election != '2012-07-05'))  " 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T13:22:54.970

会这样做吗:::

```
FROM electors,voting_intention WHERE electors.telephone > 0 AND electors.postal_vote != 1 AND (electors.mosaic IN ('E1','E2','E3') OR (electors.ID = voting_intention.elector AND voting_intention.pledge IN ('C','P') AND  voting_intention.election_date != '2012-07-05')) 
```

# c - DBus 同步调用超时

> ID：11245104
> 
> 赞同：5
> 
> 时间：2012-06-28T12:53:23.043
> 
> 标签：c, glib, dbus, c-api

我有一个 DBus 服务器，它公开了一个需要很长时间才能完成的方法（大约 3 分钟）。客户端对此方法执行同步调用。

问题是，恰好在 25 秒后，客户端会因为“没有收到回复”而引发错误。

不幸的是，我无法更改客户端，因此我无法按照应有的方式进行异步调用。

我试图在我的服务器配置中使用这一行：

```
<limit name = "reply_timeout">240000</limit> 
```

但情况并没有改变。

任何想法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-17T21:33:45.340

该`limit`参数配置总线守护程序，这只是所涉及的进程之一。其他的是客户端和服务器，并且在每一端使用的特定 D-Bus 库可能具有同步消息的默认超时。而 25 秒确实是 `_DBUS_DEFAULT_TIMEOUT_VALUE`libdbus 中的 C 参考实现。

更改客户端中的超时，例如在[dbus_connection_send_with_reply_and_block](http://dbus.freedesktop.org/doc/api/html/group__DBusConnection.html#ga8d6431f17a9e53c9446d87c2ba8409f0)中，比将 API 更改为异步更容易。

# c - 如何在数组 bsearch() 中找到插入点？

> ID：11245112
> 
> 赞同：5
> 
> 时间：2012-06-28T12:54:07.770
> 
> 标签：c, bsearch

在 C（标准库）中使用 bsearch() 可以快速找到排序数组中的条目。

但是，我如何计算插入新条目的位置（使用标准库）？

bsearch() 专门检查找到的项目的键是否等于传递的键，如果不是，则返回 NULL - 所以不能使用它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-28T12:59:47.097

从问题中不清楚，但可能这就是你想要的：

您可以执行类似的操作来查找`bsearch ()`找到匹配项的数组中的索引。

```
if (bsearch_returned_address != NULL)
  index = (bsearch_returned_address - array_base_address) 
```

**编辑**

要知道 bsort 上次访问的位置，请查看以下内容。

好在手册说：

> *比较例程应该有两个参数，它们依次*指向键对象和数组成员，如果找到键对象，则应分别返回一个小于、等于或大于零的整数，以小于、匹配或大于数组成员。

因此，您可以将比较函数中的第二个参数存储在全局变量中，并在失败的情况下使用此变量中的地址，该地址指向`bsearch`函数访问以查找匹配项的最后位置。

例如：

带有地址和值的列表：

```
[0x8d6010: 0][0x8d6014: 4][0x8d6018: 8][0x8d601c: 12][0x8d6020: 16][0x8d6024: 20][0x8d6028: 24][0x8d602c: 28][0x8d6030: 32][0x8d6034: 36] 
```

搜索价值

```
13 
```

输出

```
fmem: (nil)  //this is the memory location where it was found
last_mem1: 0x7fff8c8e6c54 //last val of 1st param of compare
last_mem2: 0x8d601c //last val of 2nd param of compare
*last_mem1: 13,        *last_mem2: 12 
```

示例比较功能代码是

```
static const int *last_mem1, *last_mem2;

static int
compmi(const void *a, const void *b)
{
    last_mem1 = a; last_mem2 = b;
    return *(int *)a - *(int *)b;
} 
```

所以你可以在地址后面插入`last_mem2`。虽然有终端情况，但如果你找到一个小于第一个元素的键，那么`last_mem2`也会有第一个元素的地址。

但是，您必须如何移动数组元素来为插入腾出位置，这将使插入复杂度达到`O(n)`. 您可能希望通过引入某种惰性插入来提高性能，例如创建一个单独的无序列表，它比原始列表小得多，并在那里转储新元素。搜索时，`bsearch`在原始列表中执行，在转储中进行线性搜索。当转储列表增长超过某个阈值时，您可以通过执行插入排序来合并列表。但是，你仍然不能`O(lg n)`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-10-25T16:37:58.983

这是对@phoxis 答案的改进，它将通过避免任何全局变量来使代码成为线程安全和可重入的。诀窍是使用密钥本身来存储上次访问的地址。

## bsearch_insertion.h

```
#include <stdlib.h>

#ifndef BSEARCH_INSERTION_H
#define BSEARCH_INSERTION_H

/* Just like bsearch(3), but return a pointer to the element after which
 * the key would need to be inserted in order to maintain sorted order. */
void *bsearch_insertion(
    const void *key, const void *base, size_t nel,
    size_t width, int (*compar)(const void *, const void *));

#endif /* BSEARCH_INSERTION_H */ 
```

## bsearch_insertion.c

```
#include "bsearch_insertion.h"

typedef struct
{
    const void *key;
    int (*const compar)(const void *, const void *);
    void *last_visited;
} bsearch_insertion_state;

static int bsearch_insertion_compare(const void *a, const void *b)
{
    bsearch_insertion_state *state = (bsearch_insertion_state *) a;
    state->last_visited = (void *) b;
    return state->compar(state->key, b);
}

void *bsearch_insertion(
    const void *key, const void *base, size_t nel,
    size_t width, int (*compar)(const void *, const void *))
{
    bsearch_insertion_state state = {key, compar, NULL};
    bsearch(&state, base, nel, width, bsearch_insertion_compare);
    return state.last_visited;
} 
```

## 示例：test.c

```
#include <stdio.h>
#include "bsearch_insertion.h"

static int cmp(const void *a, const void *b)
{
    int aint = *(const int *)a;
    int bint = *(const int *)b;
    return aint - bint;
}

int main(int argc, char **argv)
{
    int data[] = {0, 1, 2, 3, 5};
    int key = 4;
    void *result = bsearch_insertion(
        &key, data, sizeof(data) / sizeof(data[0]), sizeof(data[0]), cmp);
    /* Should print "Insertion point: 3" */
    printf("Insertion point: %d\n", (int *)result - data);
    return 0;
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-28T12:55:46.047

不确定“计算插入位置”是什么意思；您构建一个数组，然后使用 对其进行排序`qsort()`，然后使用`bsearch()`.

换句话说：对于典型用法，您不需要实现数组排序，因为标准库也包含用于此的功能。

不确定这里与二等分的联系。

**更新**：从评论中，您似乎担心插入到您也在进行搜索的数组中。我建议查看其他对插入更友好的数据结构，例如哈希表。通过不依赖排序来保持快速搜索，哈希表可能会执行得更好。插入数组涉及移动所有后续元素，这也非常昂贵，并且对于例如哈希表来说是不需要的。

**更新 2**：要实际尝试回答您的问题，假设您的条目具有`bsearch()`-comparible`comparator()`函数，则新项目的索引应由以下内容给出：`array``n``ni`

```
size_t i;

for( i = 0; i < n && comparator(&ni, array + i) >= 0; ++i )
  ;
/* Grow array, copy i..n to (i+1)..(n+1), insert ni at i. */ 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-28T13:26:42.853

因为插入导致复制数组尾部，所以时间是O(n)。所以简单的线性搜索不会显着减慢你的代码。如果您从数组末尾开始搜索，您甚至可以在搜索期间复制项目。

# thrust - cilk::reducer_list_append 的推力等效项

> ID：11245117
> 
> 赞同：0
> 
> 时间：2012-06-28T12:54:13.910
> 
> 标签：thrust, cilk, cilk-plus

我有一个 n 间隔或域的列表。我想将每个间隔并行细分为 k 个部分，创建一个新列表（无序）。但是，大多数细分不会通过某些标准，不应添加到新列表中。

cilk::reducer_list_append 将并行归约的想法扩展为使用 push_back 形成一个列表。这样我只能并行收集有效的子间隔。

完成任务的推力方式是什么？我怀疑一种方法是形成一个大的 nxk 列表，然后使用并行过滤器和流压缩？但我真的希望有一个减少列表追加操作，因为 nxk 确实可以非常大。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T07:26:35.600

我是这个论坛的新手，但也许你会发现其中一些很有用。如果你不喜欢 Thrust，你也可以看看[Arrayfire](http://www.accelereyes.com/arrayfire/c/)。我最近才知道它，它对这类问题是免费的。

例如，使用 arrayfire，您可以使用 gfor 构造并行评估每个间隔的选择标准，即。考虑：

```
// # of intervals n and # of subintervals k
const int n = 10, k = 5;

// this array represets original intervals
array A = seq(n); // A = 0,1,2,...,n-1

// for each interval A[i], subI[i] counts # of subintervals       
array subI = zeros(n);  

gfor(array i, n) {  // in parallel for all intervals
    // here evaluate your predicate for interval's subdivision
    array pred = A(i)*A(i) + 1234;
    subI(i) = pred % (k + 1);
}

//array acc = accum(subI);
int n_total = sum<float>(subI); // compute the total # of intervals
// this array keeps intervals after subdivision
array B = zeros(n_total);

std::cout << "total # of subintervals: " << n_total << "\n";
print(A);
print(subI);

gfor(array i, n_total) {
    // populate the array of new intervals
B(i) = ...
}
print(B); 
```

当然，这取决于您的间隔的表示方式以及您使用哪个标准进行细分。.

# javascript - 如何使用 Internet Explorer 的 javascript 获取鼠标指针位置？

> ID：11245119
> 
> 赞同：5
> 
> 时间：2012-06-28T12:54:18.910
> 
> 标签：javascript, javascript-events

我正在开发一个网页，我在其中`<div>`动态设置了图像。它在 Firefox 中有效，但在 IE 中失败。

问题是：如何在 IE 中获取鼠标指针位置？我正在使用以下代码获取鼠标指针位置

```
function getCursorXY(e) {   
    CurX = (window.Event) ? e.pageX : event.clientX + (document.documentElement.scrollLeft ? document.documentElement.scrollLeft : document.body.scrollLeft);
    CurY = (window.Event) ? e.pageY : event.clientY + (document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop);
} 
```

它适用于 Firefox。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-28T13:05:52.707

试试这个，这应该适用于包括 IE 在内的所有浏览器。

```
<html>
<body>
<form name="Show">
<input type="text" name="MouseX" value="0" size="4"> X<br>
<input type="text" name="MouseY" value="0" size="4"> Y<br>
</form>

<script language="JavaScript1.2">
<!--

// Detect if the browser is IE or not.
// If it is not IE, we assume that the browser is NS.
var IE = document.all?true:false

// If NS -- that is, !IE -- then set up for mouse capture
if (!IE) document.captureEvents(Event.MOUSEMOVE)

// Set-up to use getMouseXY function onMouseMove
document.onmousemove = getMouseXY;

// Temporary variables to hold mouse x-y pos.s
var tempX = 0
var tempY = 0

// Main function to retrieve mouse x-y pos.s

function getMouseXY(e) {
  if (IE) { // grab the x-y pos.s if browser is IE
    tempX = event.clientX + document.body.scrollLeft
    tempY = event.clientY + document.body.scrollTop
  } else {  // grab the x-y pos.s if browser is NS
    tempX = e.pageX
    tempY = e.pageY
  }  
  // catch possible negative values in NS4
  if (tempX < 0){tempX = 0}
  if (tempY < 0){tempY = 0}  
  // show the position values in the form named Show
  // in the text fields named MouseX and MouseY
  document.Show.MouseX.value = tempX
  document.Show.MouseY.value = tempY
  return true
}

//-->
</script>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-28T14:42:14.123

Use jQuery and use event.pageX and event.pageY!

See [http://api.jquery.com/event.pageY/](http://api.jquery.com/event.pageY/)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-30T12:24:42.747

我用这段代码解决了这个问题

```
 var CurX;
    var CurY;
    var IE = document.all?true:false;
    if(IE){
        CurX = window.event.clientX;
        CurY = window.event.clientY;
    }
    else{
        if (window.captureEvents) {
        document.captureEvents(Event.MOUSEMOVE);
    }
    document.onmousemove = getCursorXY;
}

function getCursorXY(e) {   
    CurX = (window.Event) ? e.pageX : event.clientX + (document.documentElement.scrollLeft ? document.documentElement.scrollLeft : document.body.scrollLeft);
    CurY = (window.Event) ? e.pageY : event.clientY + (document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-28T13:03:52.697

使用：clientX 和 clientY

像这样的代码：

```
var posx = 0;
var posy = 0;
if (e.pageX || e.pageY)     {
    posx = e.pageX;
    posy = e.pageY;
}
else if (e.clientX || e.clientY)    {
    posx = e.clientX + document.body.scrollLeft
        + document.documentElement.scrollLeft;
    posy = e.clientY + document.body.scrollTop
        + document.documentElement.scrollTop;
} 
```

# c# - 排序对象列表的算法

> ID：11245135
> 
> 赞同：5
> 
> 时间：2012-06-28T12:54:49.533
> 
> 标签：c#, algorithm, user-interface, ranking

假设您有一个对象列表。用户在工作时主要使用所有对象。您如何对对象列表进行排序，以使列表适应用户最常使用的顺序？您可以为此使用什么算法？

编辑：许多答案建议计算使用对象的次数。这不起作用，因为所有对象的使用量都相同，只是顺序不同。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T12:59:22.373

在您的对象内部，保留一个 usedCount。每当使用对象时，增加此计数。然后你可以简单地这样做：

```
objects.OrderByDescending(o => o.UsedCount); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T13:54:20.120

我会不断统计该对象被使用的次数，以及使用的顺序。

因此，如果对象 X 被第三次使用，则将其与运行计数进行平均，并将结果用作它在列表中的位置。

例如：

```
项目使用使用顺序
--------------------------------------
对象 X 10 1,2,3,1,2,1,3,1,2,2 (18)
对象 Y 10 3,1,2,3,3,3,1,3,3,1 (23)
对象 Z 10 2,3,1,2,1,2,2,2,2,3 (20)

```

使用将是用户使用该对象的次数，使用顺序将是该项目在该顺序中的使用位置的列表（或总和）。

单独使用每个订单的列表可能会出现一些性能问题，因此您可能只想保留头寸的总和。如果您保留一个总和，只需在每次使用对象时将顺序添加到该总和。

要计算位置，您只需使用位置的总和除以使用次数即可得到平均值。那时您所要做的就是按平均值对列表进行排序。

在上面的示例中，您将获得以下平均值（和顺序）：

```
对象 X 1.8
对象 Z 2.0
对象 Y 2.3

```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T13:00:13.617

您可以将 number_of_views 字段添加到您的对象类，每次使用对象时 ++ 它并按该字段对列表进行排序。当所有对象的 number_of_views 相同但不为 0 时，您应该为所有对象设置此字段 = 0。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-28T13:38:51.073

来自[https://stackoverflow.com/a/2619065/1429439](https://stackoverflow.com/a/2619065/1429439)：

可能使用 OrderedMultiDictionary，其中 usedCount 作为键，对象作为值。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-28T13:03:12.740

我还会为每个对象使用一个计数器来监视它的使用，但不是在每次使用后重新排序整个列表，我建议只对列表进行“本地”排序。就像在冒泡排序中一样，我只会将计数器刚刚增加的对象与上面的对象进行比较，并在需要时交换它们。如果交换，我会比较该对象和它的新上层对象，依此类推。

但是，如果正确实现了排序，它与以前的方法并没有太大的不同。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-12T16:25:26.223

当用户与对象交互时，保存对第二个对象执行的前一个对象的 ID，以便您始终拥有指向在任何给定对象之前使用的对象的指针。

此外，存储最常用的第一个对象的 ID，以便您知道从哪里开始。

当您构建要显示的对象列表时，您从存储为最常用的第一次使用的对象开始，然后搜索存储了第一次使用的对象 ID 的对象以在下一个显示。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-28T13:12:43.050

编辑：添加了订单偏好！！！看代码

我不喜欢 Carra 所说的 Last used 方法，因为它会造成许多令人困惑的排序变化。

count_accessed 字段要好得多，尽管我认为应该将其调整为
用户在过去 XX 分钟/小时/天等内访问该项目的次数等...

最好的数据结构肯定是

```
 static TimeSpan TIME_TO_LIVE;
    static int userOrderFactor = 0;

    LinkedList<KeyValuePair<DateTime, int>> myAccessList = new     LinkedList<KeyValuePair<DateTime, int>>();

    private void Access_Detected()
    {
        userOrderFactor++;
        myAccessList.AddLast(new KeyValuePair<DateTime, int>(DateTime.Now, userOrderFactor));
        myPriority += userOrderFactor; // take total count differential, so we dont waste time summing the list
    }

    private int myPriority = 0;
    public int MyPriority
    {
        get
        {
            DateTime expiry = DateTime.Now.Subtract(TIME_TO_LIVE);
            while (myAccessList.First.Value.Key < expiry)
            {
                myPriority += myAccessList.First.Value.Value; // take care of the Total Count 
                myAccessList.RemoveFirst();
            }
            return myPriority;
        }
    } 
```

希望这会有所帮助......它几乎总是 O(1) BTW......
让我想起了操作系统的睡眠机制

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-06-28T13:07:15.393

如果您的 User 类看起来像这样：

```
class User  
{  
    Collection<Algo> algosUsed = new List<Algo>();     //Won't compile, used for explanation
    ...
} 
```

你的算法类看起来像这样：

```
class Algo  
{  
    int usedCount;  
...  
} 
```

您应该能够将`Algo`对象的特定实例绑定到`User`允许记录使用频率的对象。在最基本的层面上，您会将信息序列化为文件或流。您很可能想要一个数据库来跟踪正在使用的内容。然后，当你抓住你的`User`并调用一个`sort`函数时，你按参数`algos`排序参数`User``usedCount``Algo`

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-06-28T13:14:51.960

听起来你想要一个缓存。我想你可以看看缓存使用的算法，然后拿出关于上下文切换的整个业务......有一种叫做“时钟扫描”的算法......但是对于你正在寻找的东西来说，这可能都太复杂了. 采取懒惰的方式，我想说只是做一个“用过的东西”的哈希：num_of_uses 或者，在你的类中，每次使用对象时都有一个 var you ++。

每隔一段时间，按 num_of_uses 或对象按 ++'d 变量的值对散列进行排序。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-06-28T12:59:08.673

添加用户访问对象的日期时间列表。每次用户使用对象时，添加一个日期时间。

现在只需计算列表中 w （现在 - x 天）的日期时间条目数并按此排序。您可以删除 >（现在 - x 天）的日期时间。

用户可能在一个月内使用不同的项目，这将反映这些变化。

# c++ - 函数修改未引用的类

> ID：11245136
> 
> 赞同：1
> 
> 时间：2012-06-28T12:54:52.777
> 
> 标签：c++, class

我正在试验一个链表。我的函数“null”似乎修改了我的列表，即使列表不是通过引用传递的。我已经读到，这些问题可能发生在作为普通按值调用参数传递的对象上，这也是类中的数据未在良好的 OOP 中声明为公共成员的原因之一。我已经尝试将 null 函数作为列表的成员函数，它工作正常，但我仍然想了解为什么这种方式不能正常工作。谢谢

```
#include <iostream>
#include <new>
#include <time.h>
#include <stdlib.h>
using namespace std;

class list{
    public:
    struct element {
    int data;
    element* next;
};

element * head;

list(){
    head=NULL;
}

~list(){
while (head!=NULL){
    element *e = head->next;
    delete head;
    head = e;
    }
    cout<<"Destructing..\n";
}

void add (int value){
    element *e = new element;
    e->data = value;
    e->next = head;
    head= e;
    }
};

void fill10 (class list & l){
    for (int i= 0; i<10 ;i++){
    l.add((rand()%10)+1);
    }
}

bool null (class list l){
    if (l.head!=NULL){ return false;}
    return true;
}

int main ()
{
    srand(time(NULL));
    class list l;
    fill10(l);

    cout<<l.head->data<<endl;
    cout<<l.head<<endl;

    cout<<endl<<null(l)<<endl;//when I comment this everything works out as expected

    cout<<l.head->data<<endl; //this data is not the same anymore after null is called
    cout<<l.head<<endl;

   return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T13:04:48.573

问题是您将参数传递给`null`函数的方式

```
bool null (class list l){
    if (l.head!=NULL){ return false;}
    return true;
} 
```

按值传递时，您会创建链接列表的副本。此副本将包含`head`与原始指针相同的副本。

当函数返回时，参数会被销毁，其析构函数会删除所有原始和副本共享的节点。

您要么必须通过引用传递，要么定义一个复制构造函数，为复制的列表创建新节点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T13:01:34.363

你的`null`函数需要一个`list`值，但是`list`? 它实际上只是一个指向实际内容的指针（the `element`）。因此，当您按值调用时，最终被复制的不是*stuff* (the `element`)，而是*指向 stuff*的指针。

这就是它起作用的原因，就像你现在拥有的那样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T13:02:29.577

当您通过`l`值传递给`null`您调用复制构造函数和`head`副本将指向相同`head`的`l`. 当此副本在 末尾超出范围时`null`，将`head`被删除，这与.`head`使用的相同`l`。

在 C++ 中有一种叫做“三规则”的东西，它指出，无论何时定义析构函数、复制构造函数或赋值，都应该定义所有这些。

# java - 在 EAR 中部署时如何使用将 Java EE 事件注入 EJB？

> ID：11245138
> 
> 赞同：1
> 
> 时间：2012-06-28T12:55:02.887
> 
> 标签：java, events, jakarta-ee, jboss, ejb-3.0

我在将 javax.enterprise.event.Event 实例注入我的 EJB 时遇到问题。当 EJB 用于部署在战争中的 Web 应用程序中时，事件的注入工作正常，但是当我在 EAR 内的大型应用程序中部署 Web 应用程序时，事件为空。有人为什么会这样，以及当我部署为 EAR 时如何使用注入事件？我使用 JBoss 作为 7.1。

谢谢你。

# php - 在 symfony 中设置缓存时间

> ID：11245140
> 
> 赞同：0
> 
> 时间：2012-06-28T12:55:05.773
> 
> 标签：php, caching, symfony1, symfony-1.4

我在 symfony 中使用文件缓存来存储我的数据一段时间。下面是我编写的代码。

```
$c = new sfFileCache(array('cache_dir' => sfConfig::get('sf_cache_dir').'/function'));
        if ($c->has('myarray')) {
            $cached = $c->get('myarray');
            if (!empty($cached)) {
                $data = unserialize($cached);
            }
        } else {
            foreach($queries as $key => $query) {
                foreach ($query->fetchArray() As $result) {
                    $data[] = $result;
                }
            }
            $c->set('myarray',serialize($data));
        } 
```

任何人都可以告诉如何在 symfony 中设置文件缓存的时间限制，以便缓存将在一个小时后自动销毁。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T13:17:51.877

简单地：

```
$c = new sfFileCache(array(
  'cache_dir' => sfConfig::get('sf_cache_dir').'/function',
  'lifetime'  => 3600
)); 
```

请参阅[代码](http://trac.symfony-project.org/browser/branches/1.4/lib/cache/sfCache.class.php#L38)以了解 sfCache 的其他选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-05T19:49:18.627

只是为使用 APC 的人分享我的代码。应该是一样的。我只是通过了前缀“查询”，因为我正在缓存一个查询。

```
$cache = new sfAPCCache(array('lifetime' => 600, 'prefix' => 'query')); 
```

# string - 使用 Sed 替换包含字符串的整行

> ID：11245144
> 
> 赞同：389
> 
> 时间：2012-06-28T12:55:26.740
> 
> 标签：string, shell, sed

我有一个文本文件，它有一个特定的行，比如

```
sometext sometext sometext TEXT_TO_BE_REPLACED sometext sometext sometext 
```

我需要用上面的整行替换

```
This line is removed by the admin. 
```

搜索关键字是`TEXT_TO_BE_REPLACED`

我需要为此编写一个 shell 脚本。我怎样才能做到这一点`sed`？

* * *

## 回答 #1

> 赞同：581
> 
> 时间：2012-06-28T13:15:02.697

您可以使用*change*命令替换整行，并使用`-i`flag 就地进行更改。例如，使用 GNU sed：

```
sed -i '/TEXT_TO_BE_REPLACED/c\This line is removed by the admin.' /tmp/foo 
```

* * *

## 回答 #2

> 赞同：185
> 
> 时间：2012-06-28T13:08:26.403

您需要`.*`在替换整行之前和之后使用通配符 ( )：

```
sed 's/.*TEXT_TO_BE_REPLACED.*/This line is removed by the admin./' 
```

* * *

## 回答 #3

> 赞同：25
> 
> 时间：2016-03-24T07:50:16.057

上面的答案：

```
sed -i '/TEXT_TO_BE_REPLACED/c\This line is removed by the admin.' /tmp/foo 
```

如果替换字符串/行不是变量，则可以正常工作。

问题是在 Redhat 5 上转义`\`后的. 双重也不起作用（至少在 Redhat 5 上）。`c``$``\\`

通过命中和试验，我发现如果您的替换字符串/行只有一行，那么`\`后面是多余的。`c`所以我没有`\`在 之后使用`c`，使用一个变量作为单个替换行，这很高兴。

代码看起来像：

```
sed -i "/TEXT_TO_BE_REPLACED/c $REPLACEMENT_TEXT_STRING" /tmp/foo 
```

注意使用双引号而不是单引号。

* * *

## 回答 #4

> 赞同：22
> 
> 时间：2015-02-01T11:13:47.373

接受的答案对我不起作用，原因如下：

*   我的 sed 版本不喜欢`-i`零长度扩展
*   该`c\`命令的语法很奇怪，我无法让它工作
*   我没有意识到我的一些问题来自未转义的斜杠

所以这是我想出的解决方案，我认为它应该适用于大多数情况：

```
function escape_slashes {
    sed 's/\//\\\//g' 
}

function change_line {
    local OLD_LINE_PATTERN=$1; shift
    local NEW_LINE=$1; shift
    local FILE=$1

    local NEW=$(echo "${NEW_LINE}" | escape_slashes)
    # FIX: No space after the option i.
    sed -i.bak '/'"${OLD_LINE_PATTERN}"'/s/.*/'"${NEW}"'/' "${FILE}"
    mv "${FILE}.bak" /tmp/
} 
```

因此，解决问题的示例用法如下：

```
change_line "TEXT_TO_BE_REPLACED" "This line is removed by the admin." yourFile 
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2017-08-14T07:02:13.770

到目前为止提供的所有答案都假设您对要替换的文本有所了解，这是有道理的，因为这就是 OP 所要求的。我提供的答案假设您对要替换的文本一无所知，并且文件中可能有一个单独的行，其中包含您不想被替换的相同或相似内容。此外，我假设您知道要替换的行的行号。

以下示例演示了通过特定行号删除或更改文本：

```
# replace line 17 with some replacement text and make changes in file (-i switch)
# the "-i" switch indicates that we want to change the file. Leave it out if you'd
#   just like to see the potential changes output to the terminal window.
# "17s" indicates that we're searching line 17
# ".*" indicates that we want to change the text of the entire line
# "REPLACEMENT-TEXT" is the new text to put on that line
# "PATH-TO-FILE" tells us what file to operate on
sed -i '17s/.*/REPLACEMENT-TEXT/' PATH-TO-FILE

# replace specific text on line 3
sed -i '3s/TEXT-TO-REPLACE/REPLACEMENT-TEXT/' 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2019-02-27T15:37:37.733

**用于操作配置文件**

我想出了这个受[skensell answer启发的解决方案](https://stackoverflow.com/a/28262057/1262663)

`configLine [searchPattern] [replaceLine] [filePath]`

它会：

*   如果不存在则创建文件
*   *替换searchPattern*匹配的整行（所有行）
*   如果找不到模式，则在文件末尾添加*replaceLine*

功能：

```
function configLine {
  local OLD_LINE_PATTERN=$1; shift
  local NEW_LINE=$1; shift
  local FILE=$1
  local NEW=$(echo "${NEW_LINE}" | sed 's/\//\\\//g')
  touch "${FILE}"
  sed -i '/'"${OLD_LINE_PATTERN}"'/{s/.*/'"${NEW}"'/;h};${x;/./{x;q100};x}' "${FILE}"
  if [[ $? -ne 100 ]] && [[ ${NEW_LINE} != '' ]]
  then
    echo "${NEW_LINE}" >> "${FILE}"
  fi
} 
```

疯狂的退出状态魔法来自[https://stackoverflow.com/a/12145797/1262663](https://stackoverflow.com/a/12145797/1262663)

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2015-12-10T01:56:15.120

在我的makefile中我使用这个：

```
@sed -i '/.*Revision:.*/c\'"`svn info -R main.cpp | awk '/^Rev/'`"'' README.md 
```

PS：**不要**忘记-i实际上改变了文件中的文本......所以如果你定义为“修订”的模式会改变，你也会改变模式来替换。

示例输出：

> ### 由 John Doe 编写的 Abc 项目
> 
> 修订：1190

因此，如果您设置模式“修订：1190”，显然与您将它们定义为“修订：”不同......

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2017-03-10T08:48:48.013

```
bash-4.1$ new_db_host="DB_HOSTNAME=good replaced with 122.334.567.90"
bash-4.1$ 
bash-4.1$ sed -i "/DB_HOST/c $new_db_host" test4sed
vim test4sed
'
'
'
DB_HOSTNAME=good replaced with 122.334.567.90
' 
```

它工作正常

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2017-08-31T10:44:33.610

```
cat find_replace | while read pattern replacement ; do
sed -i "/${pattern}/c ${replacement}" file    
done 
```

find_replace 文件包含 2 列，c1 具有要匹配的模式，c2 具有替换，sed 循环替换包含变量 1 的模式之一的每一行

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2020-09-10T14:39:29.313

要做到这一点而不依赖任何 GNUisms，例如`-i`没有参数或`c`没有换行符：

```
sed '/TEXT_TO_BE_REPLACED/c\
This line is removed by the admin.
' infile > tmpfile && mv tmpfile infile 
```

在这种（符合 POSIX 标准的）命令形式中

```
c\
*text* 
```

*`text`*可以由一行或多行组成，并且应该成为替换的一部分的换行符必须被转义：

```
c\
line1\
line2
s/x/y/ 
```

`s/x/y/`模式空间被两行替换后的新 sed 命令在哪里

```
line1
line2 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2020-11-10T14:49:25.950

将包含指定字符串的整行替换**为该行的内容**

文本文件：

```
Row: 0 last_time_contacted=0, display_name=Mozart, _id=100, phonebook_bucket_alt=2
Row: 1 last_time_contacted=0, display_name=Bach, _id=101, phonebook_bucket_alt=2 
```

单串：

```
$ sed 's/.* display_name=\([[:alpha:]]\+\).*/\1/'
output:
100
101 
```

由空格分隔的多个字符串：

```
$ sed 's/.* display_name=\([[:alpha:]]\+\).* _id=\([[:digit:]]\+\).*/\1 \2/'
output:
Mozart 100
Bach 101 
```

调整正则表达式以满足您的需求

[:alpha] 和 [:digit:] 是[字符类和括号表达式](https://www.gnu.org/software/sed/manual/html_node/Character-Classes-and-Bracket-Expressions.html)

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2013-05-30T06:57:37.813

和上面的一样。。

```
sed 's/[A-Za-z0-9]*TEXT_TO_BE_REPLACED.[A-Za-z0-9]*/This line is removed by the admin./' 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2019-09-19T09:23:32.130

下面的命令对我有用。哪个正在使用变量

```
sed -i "/\<$E\>/c $D" "$B" 
```

* * *

## 回答 #14

> 赞同：-1
> 
> 时间：2015-11-08T21:40:37.717

我经常使用正则表达式从文件中提取数据，我只是用它来替换文字`\"`引号`//`:-)

```
cat file.csv | egrep '^\"([0-9]{1,3}\.[0-9]{1,3}\.)' | sed  s/\"//g  | cut -d, -f1 > list.txt 
```

# java - 无法在此代码中初始化“文档”

> ID：11245146
> 
> 赞同：1
> 
> 时间：2012-06-28T12:55:33.143
> 
> 标签：java, javascript, selenium-firefoxdriver

我正在尝试使用 selenium Web 驱动程序从 java 调用 javascript 函数。

这是代码

```
WebDriver driver = new FirefoxDriver();

driver.get("C:\\KIRAN\\TrialAndError.htm"); // The html page is loaded here

// Following is the way i am trying to run the javascript

ScriptEngineManager manager = new ScriptEngineManager();

ScriptEngine engine = manager.getEngineByName("javascript");

String script = "function getInputIds(param) {  
                          print(\"inside getInputIds\");    
                          var elems = document.form[0].elements;    
                          var length = elems.length;    
                          var arr = new Array();  
                          var match_found = 0;  
                          for (i = 0; i < elems.length; i++) {      
                               match_found = elems[i].id.match(/order_unit_line_rate_\\d+_unit/);       
                               if (match_found) {           
                                  arr.push(elems[i].id);        
                               }    
                           }    
                           print(elems[1].id);}";

engine.eval(script);

Invocable inv = (Invocable) engine; 

inv.invokeFunction("getInputIds", "Scripting!!" ); 
```

但是这是我运行此代码时遇到的错误

```
inside getInputIdsException : javax.script.ScriptException: sun.org.mozilla.javascript.internal.EcmaError: ReferenceError: "document" is not defined. (<Unknown source>#1) in <Unknown source> at line number 1 
```

请通过初始化“文档”对象来帮助我运行这段代码。

还让我知道是否可以返回数组“arr”以在 javascript 之外的 java 文件中使用。

在此先感谢基兰

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T13:17:32.707

当驱动程序实例内置时，我认为不需要使用 ScriptEngine。

来自[常见问题](http://code.google.com/p/selenium/wiki/FrequentlyAskedQuestions#Q%3a_How_do_I_execute_Javascript_directly?)

您可以通过将 WebDriver 实例转换为 JavascriptExecutor 来执行 Javascript。在 Java 中，这看起来像：

```
WebDriver driver; // Assigned elsewhere
JavascriptExecutor js = (JavascriptExecutor) driver;
js.executeScript("return document.title"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T13:35:42.243

我试过这个

```
JavascriptExecutor js = (JavascriptExecutor) driver;
js.executeScript("C:\\QA\\Selenium\\workspace\\Module-NewServiceOrder\\src\\momentum\\getInputIds.js",""); 
```

但这结果

```
Exception : org.openqa.selenium.WebDriverException: null (WARNING: The server did not provide any stacktrace information) 
```

命令持续时间或超时：63 毫秒构建信息：版本：'2.24.1'，修订：'17205'，时间：'2012-06-19 16:53:24' 系统信息：os.name：'Windows 7'， os.arch: 'amd64', os.version: '6.1', java.version: '1.7.0_03' 驱动程序信息: driver.version: RemoteWebDriver 会话 ID: e2a43e1d-0eec-4640-ac0f-d72a485d98f8

我什至无法进入该功能

# ruby - 查找：无法统计当前目录：权限被拒绝

> ID：11245148
> 
> 赞同：1
> 
> 时间：2012-06-28T12:55:35.337
> 
> 标签：ruby, linux, rvm

我正在安装 RVM 并添加了该行

```
[[ -s "$HOME/.rvm/scripts/rvm" ]] && . "$HOME/.rvm/scripts/rvm" 
```

进入我的 .bashrc 文件。

现在 RVM 工作正常，但我有下一条消息

```
find: cannot stat current directory: Permission denied 
```

在每个 RVM 命令之后。我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T13:07:03.313

您的问题中没有足够的信息来给您答案。find 的当前目录不可读。为什么？您需要添加

```
set -x 
```

到脚本，然后您将看到 find 尝试在哪个目录中运行。比一个人可以说一个人必须做的更进一步。

# mysql - MySQL 错误：1305。存储过程

> ID：11245156
> 
> 赞同：1
> 
> 时间：2012-06-28T12:55:59.900
> 
> 标签：mysql, stored-procedures

我越来越

> 错误代码：1305。FUNCTION acdb_extended.player 不存在

当我尝试调用存储过程时。该错误的奇怪之处在于“播放器”不是存储过程的名称。

这是存储过程代码，它可能有很多问题，但据我所知它是正确的：

```
CREATE PROCEDURE `acdb_extended`.`addAllianceMember` (IN accountNumber VARCHAR(255),
    IN userName VARCHAR(255), IN serverInitial CHAR(1), IN galaxy TINYINT(2),
    IN region TINYINT(2), IN system TINYINT(2), IN astro TINYINT(2), IN level TINYINT(2))
BEGIN
    IF player (account_number) = accountNumber
    THEN REPLACE INTO player (username)
        VALUES (userName);
    ELSE INSERT INTO player (account_number, username)
        VALUES (accountNumber, userName);
    END IF;

    IF coordinates (server_initial) = serverInitial AND
        coordinates (galaxy) = galaxy AND
        coordinates (region) = region AND
        coordinates (system) = system AND
        coordinates (astro) = astro
    THEN REPLACE INTO coordinates (player_ID)
        VALUES ((SELECT player_ID FROM player WHERE username = userName));
    ELSE INSERT INTO coordinates (player_ID, server_initial, galaxy, region, system, astro)
        VALUES ((SELECT player_ID FROM player WHERE username = userName), serverInitial,
            galaxy, region, system, astro);
    END IF;

    IF jumpgate (player_ID) = (SELECT player_ID FROM player WHERE username = userName) AND
            jumpgate (coordinates_ID) = (SELECT c.coordinates_ID FROM coordinates c, player p WHERE c.player_ID = p.player_ID
            AND p.username = userName)
    THEN REPLACE INTO jumpgate (level)
            VALUES (level);
    ELSE INSERT INTO jumpgate (player_ID, coordinates_ID, level, usable)
            VALUES ((SELECT player_ID FROM player WHERE username = userName),
                (SELECT c.coordinates_ID FROM coordinates c, player p WHERE c.player_ID = p.player_ID
                AND p.username = userName), level, TRUE);
    END IF;
END 
```

这是我用来测试它的 SQL 语句：

```
CALL addAllianceMember(8494618, 'Carl', 'G', 29, 08, 10, 01, 04); 
```

关于哪里出错的任何提示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T12:59:20.197

在这一行

```
IF player (account_number) = accountNumber 
```

它像函数一样调用播放器，看起来播放器不作为函数存在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T13:00:07.580

在这里，您在 BEGIN 之后使用了 Player 作为函数。

BEGIN IF **player (account_number)** = accountNumber

# variables - Gtags 索引全局变量

> ID：11245164
> 
> 赞同：2
> 
> 时间：2012-06-28T12:56:14.087
> 
> 标签：variables, tags, gnu, gnu-global

我希望 gnu global 索引项目的全局变量。这可能吗（无需进入 gnu global 的源代码）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-19T10:35:23.007

我相信这还没有实施。你可以看到它在gnu global的[计划中。](http://www.gnu.org/software/global/plans.html)

> 将变量定义视为定义标记 (GTAGS)。

# c# - 通过 GetProperties 将属性从一个类设置到另一个类

> ID：11245167
> 
> 赞同：0
> 
> 时间：2012-06-28T12:56:34.683
> 
> 标签：c#, .net

这是一个简单的例子来清除我的意图。

```
class A {
    public int Id
    public string Name
    public string Hash
    public C c
}
class B {
    public int id
    public string name
    public C c
}
class C {
    public string name
}
var a = new A() { Id = 123, Name = "something", Hash = "somehash" };
var b = new B(); 
```

我想从 设置`b`的属性`a`。我尝试了一些东西，但没有运气。

```
public void GenericClassMatcher(object firstModel, object secondModel)
    {
        if (firstModel != null || secondModel != null)
        {
            var firstModelType = firstModel.GetType();
            var secondModelType = secondModel.GetType();
            // to view model
            foreach (PropertyInfo prop in firstModelType.GetProperties())
            {
                var firstModelPropName = prop.Name.ElementAt(0).ToString().ToLower(System.Globalization.CultureInfo.InvariantCulture) + prop.Name.Substring(1); // lowercase first letter
                if (prop.PropertyType.FullName.EndsWith("Model"))
                {
                    GenericClassMatcher(prop, secondModelType.GetProperty(firstModelPropName));
                }
                else
                {
                    var firstModelPropValue = prop.GetValue(firstModel, null);
                    var secondModelProp = secondModelType.GetProperty(firstModelPropName);
                    if (prop.PropertyType.Name == "Guid")
                    {
                        firstModelPropValue = firstModelPropValue.ToString();
                    }
                    secondModelProp.SetValue(secondModel, firstModelPropValue, null);
                }
            }
        }
    } 
```

我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T13:16:25.943

听起来您正试图将一个类*映射*到另一个类。 [AutoMapper](https://github.com/AutoMapper/AutoMapper)是我遇到的最好的工具。

```
public class A 
    {
        public int Id;
        public string Name;
        public string Hash;
        public C c;
    }

    public class B 
    {
        public int id;
        public string name;
        public C c;
    }

    public class C 
    {
        public string name;
    }

    class Program
    {
        static void Main(string[] args)
        {
            var a = new A() { Id = 123, Name = "something", Hash = "somehash" };
            var b = new B();

            AutoMapper.Mapper.CreateMap<A, B>();

            b = AutoMapper.Mapper.Map<A, B>(a);

            Console.WriteLine(b.id);
            Console.WriteLine(b.name);

            Console.ReadLine();
        }
} 
```

# asp.net - 想在asp中显示链接

> ID：11245174
> 
> 赞同：1
> 
> 时间：2012-06-28T12:56:47.740
> 
> 标签：asp.net, html

是否有任何可能的方法来编辑此代码

```
<asp:LoginName ID="LoginName1" runat="server" style="top: 165px; left: 888px; position: absolute;" Font-Names="verdana" ForeColor="black" Font-Size="13px" /> 
```

所以我可以显示一个链接到页面的img，而不是显示用户名

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T20:02:27.720

正如@PraVN 所说，`FormatString`应该更适合这个：

```
<asp:LoginName ID="LoginName1" runat="server" FormatString="&lt;a href=&quot;http://www.myurl.com&quot;&gt;&lt;img src='myimage.jpg' /&gt;&lt;/a&gt;" /> 
```

# mysql - 测试内部使用 MySQL 特定查询的代码的适当方法是什么

> ID：11245181
> 
> 赞同：10
> 
> 时间：2012-06-28T12:57:15.193
> 
> 标签：mysql, maven, testng, embedded-database, spring-jdbc

我正在收集数据并将这些数据存储在使用 Java 的 MySQL 数据库中。此外，我使用 Maven 构建项目，使用 TestNG 作为测试框架，使用 Spring-Jdbc 访问数据库。我已经实现了一个 DAO 层，它封装了对数据库的访问。除了使用 DAO 类添加数据之外，我还想执行一些查询来聚合数据并将结果存储在其他一些表中（如物化视图）。

现在，我想编写一些测试用例来检查 DAO 类是否正常工作。因此，我想使用一个内存数据库，该数据库将填充一些测试数据。由于我还使用 MySQL 特定的 SQL 查询来聚合数据，因此遇到了一些麻烦：

1.  首先，我想过简单地使用 Spring-Jdbc 提供的嵌入式数据库功能来实例化嵌入式数据库。我决定使用 H2 实现。由于聚合查询使用 MySQL 特定的内容（例如 DATE() 等时间操作函数），我遇到了麻烦。这种方法的另一个缺点是我需要维护两个 ddl 文件——在 MySQL 中定义表的实际 ddl 文件（这里我定义编码并为表和列添加注释，这两个功能都是 MySQL 特定的）；以及定义相同表但没有注释等的测试 ddl 文件，因为 H2 不支持注释。
2.  我找到了使用 MySQL 作为嵌入式数据库的描述，我可以在测试用例中使用它 (http://literatitech.blogspot.de/2011/04/embedded-mysql-server-for-junit-testing.html) . 这对我来说听起来很有希望。不幸的是，它没有用：发生 MissingResourceExcpetion “找不到资源 '5-0-21/Linux-amd64/mysqld'”。似乎驱动程序无法在我的本地计算机上找到数据库守护程序。但我不知道我必须寻找什么才能找到该问题的解决方案。

现在，我有点卡住了，我想知道我是否应该以不同的方式创建架构。有人对我应该如何设置适当的系统有一些提示吗？我有另外两个选择：

1.  我将不使用嵌入式数据库，而是使用本机 MySQL 实例并设置一个仅用于测试用例的数据库。这个选项听起来很慢。实际上，我可能想稍后设置一个 CI 服务器，我认为使用嵌入式数据库会更合适，因为测试运行得更快。
2.  我从 SQL 查询中删除了所有 MySQL 特定的东西，并使用 H2 作为嵌入式数据库进行测试。如果这个选项是正确的选择，我需要找到另一种方法来测试将数据聚合到物化视图中的 SQL 查询。
3.  还是有我没有想到的第三种选择？

我会很感激任何提示。

谢谢， XComp

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-10-09T18:02:53.593

我专门为此目的创建了 Maven 插件：[`jcabi-mysql-maven-plugin`](http://www.jcabi.com/jcabi-mysql-maven-plugin/index.html). 它在阶段启动本地 MySQL 服务器`pre-integration-test`并在`post-integration-test`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-08T14:17:34.233

如果无法让内存中的 MySQL 数据库工作，我建议使用 H2 数据库进行“简单”测试**，并**使用专用 MySQL 实例来测试特定于 MySQL 的查询。

此外，可以将真实 MySQL 数据库的测试配置为单独的 maven 配置文件中的集成测试，这样它们就不是常规 maven 构建的一部分。在 CI 服务器上，您可以创建一个额外的作业来定期运行 MySQL 测试，例如每天或每隔几个小时。通过这样的设置，您可以保留和测试特定于产品的查询，而您的常规构建不会减慢。即使测试数据库不可用，您也可以运行正常构建。

有一个用于集成测试的不错的 maven 插件，称为[maven-failsafe-plugin](http://maven.apache.org/plugins/maven-failsafe-plugin/)。它提供了集成前和集成后的测试步骤，可用于在测试前设置测试数据并在测试后清理数据库。

# functional-programming - 同构函数的重要性

> ID：11245183
> 
> 赞同：75
> 
> 时间：2012-06-28T12:57:19.580
> 
> 标签：functional-programming, isomorphism

**简短的问题：**同构函数在编程（即函数式编程）中的重要性是什么？

**长问题：**我试图根据我不时听到的一些术语，在函数式编程和类别理论中的概念之间进行一些类比。本质上，我试图将这些术语“解包”成具体的东西，然后我可以扩展。然后，我将能够使用术语，了解我在说什么。这总是很好。

我一直听到的这些术语之一是*Isomorphism*，我认为这是关于函数或函数组合之间等价的推理。我想知道是否有人可以提供一些关于同构属性派上用场的常见模式（在函数式编程中）的一些见解，以及获得的任何副产品，例如对同构函数进行推理的编译器优化。

* * *

## 回答 #1

> 赞同：84
> 
> 时间：2012-06-28T15:22:40.113

我对同构的赞成答案提出了一点问题，因为同构的范畴论定义对对象没有任何说明。要了解原因，让我们回顾一下定义。

# 定义

同构是一对态射（即函数）`f`和`g`，这样：

```
f . g = id
g . f = id 
```

这些态射然后被称为“iso”态射。很多人没有注意到同构中的“态射”是指函数而不是对象。但是，您会说它们连接的对象是“同构的”，这就是另一个答案所描述的。

请注意，同构的定义并没有说明 ( `.`) `id`、 或`=`必须是什么。唯一的要求是，无论它们是什么，它们也满足类别法则：

```
f . id = f
id . f = f
(f . g) . h = f . (g . h) 
```

组合（即 ( `.`)）将两个态射连接成一个态射，并`id`表示某种“同一性”转换。这意味着如果我们的同构抵消了恒等态射`id`，那么您可以将它们视为彼此的逆。

对于态射是函数的特定情况，则`id`定义为恒等函数：

```
id x = x 
```

...和组成被定义为：

```
(f . g) x = f (g x) 
```

...如果两个函数在组合它们时抵消了恒等函数，则它们是同构的`id`。

## 态射与对象

但是，有多种方式可以使两个对象同构。例如，给定以下两种类型：

```
data T1 = A | B
data T2 = C | D 
```

它们之间有两个同构：

```
f1 t1 = case t1 of
    A -> C
    B -> D
g1 t2 = case t2 of
    C -> A
    D -> B

(f1 . g1) t2 = case t2 of
    C -> C
    D -> D
(f1 . g1) t2 = t2
f1 . g1 = id :: T2 -> T2

(g1 . f1) t1 = case t1 of
    A -> A
    B -> B
(g1 . f1) t1 = t1
g1 . f1 = id :: T1 -> T1

f2 t1 = case t1 of
    A -> D
    B -> C
g2 t2 = case t2 of
    C -> B
    D -> A

f2 . g2 = id :: T2 -> T2
g2 . f2 = id :: T1 -> T1 
```

所以这就是为什么最好根据与两个对象相关的特定函数而不是两个对象来描述同构，因为在两个对象之间可能不一定存在满足同构定律的唯一函数对。

另外，请注意，仅使函数可逆是不够的。例如，以下函数对不是同构：

```
f1 . g2 :: T2 -> T2
f2 . g1 :: T2 -> T2 
```

即使您撰写时没有丢失任何信息`f1 . g2`，您也不会返回到您的原始状态，即使最终状态具有相同的类型。

此外，同构不必在具体数据类型之间。这是两个规范同构的示例，它们不在具体的代数数据类型之间，而是简单地关联函数：`curry`和`uncurry`：

```
curry . uncurry = id :: (a -> b -> c) -> (a -> b -> c)
uncurry . curry = id :: ((a, b) -> c) -> ((a, b) -> c) 
```

# 同构的用途

## 教会编码

同构的一种用途是将数据类型 Church 编码为函数。例如，`Bool`同构于`forall a . a -> a -> a`：

```
f :: Bool -> (forall a . a -> a -> a)
f True  = \a b -> a
f False = \a b -> b

g :: (forall a . a -> a -> a) -> Bool
g b = b True False 
```

验证`f . g = id`和`g . f = id`。

Church 编码数据类型的好处是它们有时运行得更快（因为 Church-encoding 是连续传递样式），并且它们可以用甚至根本不支持代数数据类型的语言来实现。

## 翻译实现

有时有人试图将一个库的某些功能实现与另一个库的实现进行比较，如果你能证明它们是同构的，那么你就可以证明它们同样强大。此外，同构描述了如何将一个库转换为另一个库。

例如，有两种方法可以提供从函子的签名定义单子的能力。一个是免费的 monad，由`free`包提供，另一个是操作语义，由`operational`包提供。

如果你看一下这两种核心数据类型，它们看起来是不同的，尤其是它们的第二个构造函数：

```
-- modified from the original to not be a monad transformer
data Program instr a where
    Lift   :: a -> Program instr a
    Bind   :: Program instr b -> (b -> Program instr a) -> Program instr a
    Instr  :: instr a -> Program instr a

data Free f r = Pure r | Free (f (Free f r)) 
```

...但它们实际上是同构的！这意味着这两种方法同样强大，并且用一种方法编写的任何代码都可以使用同构机械地翻译成另一种方法。

# 不是函数的同构

此外，同构不限于函数。它们实际上是为任何定义的`Category`，Haskell 有很多类别。这就是为什么考虑态射而不是数据类型更有用的原因。

例如，`Lens`类型 (from `data-lens`) 构成一个类别，您可以在其中组合镜头并拥有一个身份镜头。所以使用我们上面的数据类型，我们可以定义两个同构的透镜：

```
lens1 = iso f1 g1 :: Lens T1 T2
lens2 = iso g1 f1 :: Lens T2 T1

lens1 . lens2 = id :: Lens T1 T1
lens2 . lens1 = id :: Lens T2 T2 
```

请注意，有两个同构在起作用。一个是用于构建每个透镜的同构（即`f1`和`g1`）（这也是构造函数被称为 的原因`iso`），然后透镜本身也是同构。请注意，在上面的公式中，使用的组合 ( `.`) 不是函数组合，而是透镜组合，并且`id`不是恒等函数，而是恒等透镜：

```
id = iso id id 
```

这意味着如果我们组合两个镜头，结果应该与那个身份镜头没有区别。

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2012-06-28T14:58:42.687

*同构* 是一个`u :: a -> b`具有*逆*函数的函数，即另一个函数`v :: b -> a` ，使得关系

```
u . v = id
v . u = id 
```

满意。*如果它们之间存在同构*，则您说两种类型是同构的。这实质上意味着您可以将它们视为同一类型 - 您可以对一个做任何事情，也可以对另一个做任何事情。

## 函数的同构

两种函数类型

```
(a,b) -> c
a -> b -> c 
```

是同构的，因为我们可以写

```
u :: ((a,b) -> c) -> a -> b -> c
u f = \x y -> f (x,y)

v :: (a -> b -> c) -> (a,b) -> c
v g = \(x,y) -> g x y 
```

你可以检查一下，`u . v`两者`v . u`都是`id`。事实上，函数`u`和`v`的名称更广为人知`curry`和`uncurry`。

## 同构和新类型

每当我们使用新类型声明时，我们都会利用同构。例如，state monad 的底层类型`s -> (a,s)`可能有点令人困惑。通过使用新类型声明：

```
newtype State s a = State { runState :: s -> (a,s) } 
```

我们生成了一个新类型`State s a`，它同构`s -> (a,s)`并且在我们使用它时很清楚，我们正在考虑具有可修改状态的函数。我们还为新类型获得了一个方便的构造函数`State`和一个 getter `runState`。

## 单子和共子

对于更高级的观点，请考虑使用`curry`和`uncurry`我上面使用的同构。该`Reader r a`类型具有 newtype 声明

```
newType Reader r a = Reader { runReader :: r -> a } 
```

在 monad 的上下文中，`f`产生 reader 的函数因此具有类型签名

```
f :: a -> Reader r b 
```

这相当于

```
f :: a -> r -> b 
```

这是咖喱/非咖喱同构的一半。我们还可以定义`CoReader r a`类型：

```
newtype CoReader r a = CoReader { runCoReader :: (a,r) } 
```

可以制成comonad。我们有一个函数 cobind，或者`=>>`它接受一个函数，该函数接受一个 coreader 并产生一个原始类型：

```
g :: CoReader r a -> b 
```

这是同构的

```
g :: (a,r) -> b 
```

但是我们已经看到`a -> r -> b`并且`(a,r) -> b`是同构的，这给了我们一个重要的事实：reader monad（具有 monadic 绑定）和 coreader comonad（具有 comonadic cobind）也是同构的！特别是，它们都可以用于相同的目的——提供一个贯穿每个函数调用的全局环境。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2012-06-28T14:16:00.930

考虑数据类型。例如，在 Haskell 中，您可以认为两种数据类型是同构的，如果存在一对以独特方式在它们之间转换数据的函数。以下三种类型彼此同构：

```
data Type1 a = Ax | Ay a
data Type2 a = Blah a | Blubb
data Maybe a = Just a | Nothing 
```

您可以将在它们之间转换的函数视为同构。这符合同构的范畴思想。如果在`Type1`和`Type2`之间存在两个函数`f`和`g`，`f . g = g . f = id`那么这两个函数是这两种类型（对象）之间的同构。

# extjs4 - 如何在 ExtJS4 中保持用户的登录状态？

> ID：11245186
> 
> 赞同：1
> 
> 时间：2012-06-28T12:57:26.147
> 
> 标签：extjs4, extjs4.1

我目前正在为我们使用 ExtJS4 开发的 Web 应用程序实现状态管理。

例如，在 Ext.application 中，我写道：

```
Ext.state.Manager.setProvider(new Ext.state.CookieProvider());
Ext.Component.prototype.stateful = false; 
```

无论哪个控件应该保持其状态，我们都创建了`stateful`该控件的属性`true`。在下面的示例中，组合框的 stateful 属性为 true 并且工作正常（这些状态将用于后续登录的用户）：

```
{
    xtype: 'combo'
    stateful: true,
    stateId: 'myid'
} 
```

现在我想知道是否有一种方法可以根据登录的用户在同一台​​机器上维护状态。例如，当 user1 登录并注销时，组合框中选择的值为 10，而当 user2 登录并注销时注销组合框中选择的值为 20。

我想以这样一种方式保持状态，即当用户 1 重新登录时，组合框应显示 10，而对于用户 2，组合框应显示 20。是否可以在每个用户的基础上维护状态，不适用于整个应用程序（基于机器）？

谢谢和问候， Mani Kumar Y

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-28T17:16:21.853

一种选择是`stateId`根据当前用户进行调整，例如`stateId: username + '-myid'`. 这样，当“user1”登录时，stateId 为`user1-myid`，而当 user2 登录时，stateId 为`user2-myid`。这样，状态可以根据当前用户单独存储和加载。

# iphone - NSString 的字节长度是多少？

> ID：11245188
> 
> 赞同：24
> 
> 时间：2012-06-28T12:57:44.883
> 
> 标签：iphone, ios, nsstring

如何获得字节长度`NSString`？如果`myString`包含“hallo”，`myString.length`将返回 5，但实际占用了多少字节？

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-06-28T13:01:24.367

```
NSString *test=@"ABCDEFGHIJKLMNOPQRSTUVWXYZ";
NSUInteger bytes = [test lengthOfBytesUsingEncoding:NSUTF8StringEncoding];
NSLog(@"%i bytes", bytes); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-28T13:00:10.703

要获取字节使用

```
NSData *bytes = [string dataUsingEncoding:NSUTF8StringEncoding]; 
```

然后你可以检查`bytes.length`

字节数取决于字符串编码

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-06-28T13:01:20.637

好：

```
NSString* string= @"myString";
NSData* data=[string dataUsingEncoding:NSUTF8StringEncoding];
NSUInteger myLength = data.length; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-01-16T22:46:26.120

从[苹果文档](https://developer.apple.com/documentation/foundation/nsstring)：

> NSString 对象编码符合 Unicode 的文本字符串，表示为 UTF-16 代码单元序列。所有长度、字符索引和范围均以 16 位平台端值表示，索引值从 0 开始。

所以 NSString 使用的内存是每个字符 2 个字节加上对象本身使用的任何固定内存。

# javascript - 如何在 API 使用错误的情况下结束节点 js 执行

> ID：11245189
> 
> 赞同：0
> 
> 时间：2012-06-28T12:57:53.433
> 
> 标签：javascript, node.js

我目前正在编写一个节点 js 库。现在我想出了一个问题，什么是指示程序员使用错误的最佳方法。

例如，如果我在公共 API 中有以下函数：

```
function doSomething(aNumber) {
    // ...
} 
```

我需要确保 aNumber 实际上是一个数字，如果 API 用户传递的参数不是，我应该采用哪种错误处理方式。

如果发生错误，节点中的对流函数应该返回一个错误对象。但就我而言，这不是程序员应该捕捉到的错误。

所以我的问题是什么是最合适的方式，可能只是简单地用错误消息“结束”程序，告诉程序员他没有以正确的方式使用我的 API。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T13:18:14.000

我会简单地执行以下操作：

```
console.log("Incorrect api usage.");
process.exit(-1); 
```

您可能希望将其包装在辅助函数中以使调用更简单......

# c# - 在c#中创建一个数据包

> ID：11245194
> 
> 赞同：1
> 
> 时间：2012-06-28T12:58:09.110
> 
> 标签：c#, string, hex

我想创建一个数据包并将其写入套接字。
此数据包以“C0”十六进制值开头。
在 php 中，我可以使用以下代码轻松创建它：

```
$a = "\xC0"; 
```

现在我想在 C# 中创建它。怎么能做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-28T13:01:32.053

在 C# 中，字符串是 Unicode 编码的，因此不应将它们用于二进制数据。而是使用字节数组。

要创建以 C0 开头的字节数组，请执行以下操作：

```
byte[] packet = new byte[] { 0xC0, /* Other values */ }; 
```

如果您有一个想要发送的现有字符串，您可以使用`Encoding.ASCII`它来将其转换为您需要的字节。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T13:01:45.193

如果您要发送字节，则很简单：

```
byte a = 0xC0; 
```

如果数据包包含文本，您可以开始一个字符串：

```
string a = "\xC0"; 
```

有关字符串文字的更多信息：http: [//msdn.microsoft.com/en-us/library/aa691090 (v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/aa691090(v=vs.71).aspx)

# javascript - 无法在 iPhone 应用程序上使用 PhoneGap 和 javascript 获取 JSON 结果，但使用相同代码在 android 应用程序上获取结果

> ID：11245196
> 
> 赞同：1
> 
> 时间：2012-06-28T12:58:15.460
> 
> 标签：javascript, android, iphone, json, cordova

目前我在 phonegap 应用程序中使用此代码

```
var xmlhttp = new XMLHttpRequest();
xmlhttp.open("GET","http://192.168.1.19:8080/searchMobile?categoryRequest=true", true);
xmlhttp.send(null);
xmlhttp.onreadystatechange = function() {alert(xmlhttp.status);
if (xmlhttp.readyState == 4) {
    var responseObject = eval("(" + xmlhttp.responseText + ")");
    var results = responseObject.result;
    if (results != null)
    {
        var resLength = results.length;
        category.length = category.length + resLength;
        for ( var i = 0; i < resLength; i++)
        {
            category.options[category.length - (resLength - i)].innerHTML = results[i].categoryName;
            $(category).selectmenu("refresh");
      }
    }
} 
```

此代码在 android 中运行，但是当我在 iphone 上运行此代码时，它给出的状态为 0 表示不起作用。我怎样才能克服这个问题非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T14:07:33.027

首先正如@Raymond Camden 所说，确保您的网址[在 .plist 中被列入白名单](http://docs.phonegap.com/en/1.8.1/guide_whitelist_index.md.html#Domain%20Whitelist%20Guide_ios)。其次，从 file:// 协议执行 AJAX 时，您获得 0 状态是完全正常的。Webkit 会将状态设置为 0，因为您正在执行跨域请求，该请求在 Web 浏览器中会被阻止，但在 Web 视图中，如 PhoneGap 使用，完全没问题。所以在这种情况下 0 == 200。第三摆脱 eval，如果您返回 JSON 数据，请使用 JSON.parse(xmlhttp.responseText) 因为它[更安全](http://www.json.org/js.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T13:20:50.243

尝试将 URL 添加到白名单。

# mysql - mysql 在 where/have 使用计算列

> ID：11245198
> 
> 赞同：0
> 
> 时间：2012-06-28T12:58:19.610
> 
> 标签：mysql, select, alias, where, having

我有一个问题，如何在 where/have 子句中使用“别名”列。我知道有一些与相关主题有关的问题。但是我在网上和 stackoverfolw 上搜索并没有找到解决方案。

所以我希望通过这种方式得到帮助..

以下语句效果很好：

```
SELECT PHRASE,COUNT(*) AS A 
    FROM my_statistics 
    WHERE TIMESTAMP>NOW()-INTERVAL 7 DAY
    GROUP BY PHRASE ORDER BY A DESC 
    LIMIT 16; 
```

`PHRASE`并且`TIMESTAMP`是表格中的列。代码选择前 16 个短语，这些短语是用户在过去 7 天插入的。还有一列 USER ，所以我现在喜欢选择由多个用户插入的前 16 个短语。所以我尝试了这个：

```
SELECT PHRASE,COUNT(*) AS A, COUNT(DISTINCT(USER)) AS B
    FROM my_statistics
    WHERE TIMESTAMP>NOW()-INTERVAL 7 DAY
          AND B>1
    GROUP BY PHRASE ORDER BY A DESC 
    LIMIT 16; 
```

关于stackoverflow的其他问题，我喜欢我必须使用的信息`HAVING`

```
SELECT PHRASE,COUNT(*) AS A, COUNT(DISTINCT(USER)) AS B
    FROM my_statistics
    WHERE TIMESTAMP>NOW()-INTERVAL 7 DAY      
    GROUP BY PHRASE ORDER BY A DESC 
    HAVING B>1
    LIMIT 16; 
```

但这会返回一个错误：

> 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 5 行的“HAVING B>1 LIMIT 16”附近使用正确的语法

我不知道正确的语法如何。希望在这里得到任何帮助。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T13:03:02.833

放置`ORDER BY A DESC` after`Having`子句。

```
SELECT phrase, 
       Count(*)                AS A, 
       Count(DISTINCT( user )) AS B 
FROM   my_statistics 
WHERE  timestamp > Now() - INTERVAL 7 day 
GROUP  BY phrase 
HAVING b > 1 
ORDER  BY a DESC 
LIMIT  16; 
```

# javascript - JavaScript sigma.js 图形未在 Internet Explorer 8 中显示

> ID：11245202
> 
> 赞同：0
> 
> 时间：2012-06-28T12:58:34.430
> 
> 标签：javascript, internet-explorer-8, visualization

我正在使用 sigma.js javascript 库来显示图形，它在所有浏览器中都可以正常工作，Windows 上的 Internet Explorer 8 除外。任何人都知道问题可能是什么？也许我使用的 div 层上的 z-index 或类似的东西？

这是网站：[http ://texttexture.com](http://textexture.com)

这是图书馆：[http ://sigmajs.org](http://sigmajs.org)

谢谢！

PS 如果有人有 Internet Explorer 9，如果您能告诉我图表是否也显示在那里，我将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-28T13:05:42.083

该库表示它支持具有画布的浏览器。IE8 不支持画布支持。IE9 可以。

您可以查看添加[excanvas](http://code.google.com/p/explorercanvas/)是否可以正常工作。

# c++ - 是否可以使用对 Facebook API 的 HTTP 请求创建一个单例 C++ 来进行身份验证并在墙上发布？

> ID：11245204
> 
> 赞同：3
> 
> 时间：2012-06-28T12:58:55.843
> 
> 标签：c++, facebook-graph-api, cocos2d-x

我正在研究Linux。

我一直在寻找一种从 c++ 应用程序（使用 cocos2d-x 在 Android 和 Iphone 中运行）在 Facebook 上发帖的方法。我在 C++ 中找到了一些可以在 Facebook 和 Twitter 上发布的代码，但它不能在 linux 上编译。[这个](http://code.google.com/p/facebook-cpp-graph-api/)或[这个](http://www.mosync.com/documentation/manualpages/facebookdemo)。

理论上，我认为，使用 http 请求可能很容易做到，但我不确定。

[cocosd2-x 论坛](http://www.cocos2d-x.org/boards/6/topics/12492)上的相同问题。

关于这个理论的一些想法？

是可能的，但最好使用官方库，添加在[THIS](https://stackoverflow.com/q/10711047/1077364) wiki

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-07T12:27:09.917

这可以使用 curl 来实现。在这里，您是在 cocos2d-x 库上编译它的 LINK1，以及使用 cocos2d-x 的EXAMPLE2。

链接1：http : [//www.cocos2d-x.org/projects/cocos2d-x/wiki/How_to_compile_libcurl](http://www.cocos2d-x.org/projects/cocos2d-x/wiki/How_to_compile_libcurl)

示例2：http : [//www.jesusbosch.com/2012/08/internet-communications-with-cocos2d-x.html](http://www.jesusbosch.com/2012/08/internet-communications-with-cocos2d-x.html)

# image - 可内容编辑 div 中的图像不可删除

> ID：11245213
> 
> 赞同：0
> 
> 时间：2012-06-28T12:59:27.470
> 
> 标签：image, contenteditable

我有一个使用 contenteditable div 的小内联编辑器。如果你有这样的东西：http: [//jsfiddle.net/6psJ4/1/](http://jsfiddle.net/6psJ4/1/)是否可以使图像不可删除？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T07:41:52.827

```
<div contenteditable="true">hi<img src="http://tinyw.in/BH9V" contenteditable="false"></div> 
```

在 Firefox 和 Chrome 上为我工作，但它不是很有用 - 例如，如果没有可激发的内容，就无法在图像之后移动插入符号。

没有自定义删除密钥处理程序和虚假 brs/空格更正的 AFAIK 将无法实现这一点以及例如 CKEDITOR。

检查这个： http: [//nightly.ckeditor.com/7529/_samples/placeholder.html](http://nightly.ckeditor.com/7529/_samples/placeholder.html)

# c# - 无法在 Visual Studio 2010 Express 中引用数据集

> ID：11245217
> 
> 赞同：0
> 
> 时间：2012-06-28T12:59:35.457
> 
> 标签：c#, database, visual-studio-2010, dataset

出于某种原因，我收到一个错误，基本上表明它在我的项目中找不到我的数据集，但它显然存在。我附上了截图，注意我在截图上画的红色方块。我的数据源在那里，我的数据库在那里，但代码中仍然出现错误。

![在此处输入图像描述](../Images/5e3baeed37426767ea4713aabbc1010d.png)

真的很郁闷！！有什么我在这里想念的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T13:04:24.913

仅仅因为您的数据集在您的项目中并不意味着您可以在课堂上引用它。您需要在类中创建数据集的实例。

```
HonestRalphsUsedCarsDataSet yourDataSet = new HonestRalphsUsedCarsDataSet(); 
```

编辑：我的原始帖子中的错字，如果您之前只是复制/粘贴，请立即尝试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T13:05:16.580

或者右键单击 yr 文件，然后在构建操作中选择编译

# php - 网站导航

> ID：11245218
> 
> 赞同：1
> 
> 时间：2012-06-28T12:59:37.987
> 
> 标签：php, html, css

我正在用 HTML、CSS 和 PHP 制作网站。我在页面顶部有一个导航，当您将鼠标悬停在按钮上时，它们会亮起。

现在，当您单击一个按钮并转到该特定页面时，我希望该页面的按钮亮起，表明您在该页面上。我该怎么做呢？在每个页面上定义一个变量然后在菜单中检查它是不可能的，因为我在网站上也有一个论坛，这需要我在每个页面上定义一个变量。

**编辑**

我设法解决了我的问题。事实证明，我可以只定义页面，对于论坛，我可以在论坛使用的设置文件中做同样的事情。

在我的导航中，我只检查当前页面是什么：

```
<li id="news"><a <? if(PAGE == "INDEX") print 'class="active"'; ?> href="/">News</a></li> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T13:03:24.100

向标签添加一个类（或 ID）`body`，如下所示：

`<body class="Page1">...</body>`

然后，在您的 CSS 中，您可以这样说：

```
.Page1 menu li, menu li:hover {...} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T13:05:36.533

我不确定如何在 PHP 中检查当前页面 - 不过，那将是理想的。

但是，如果您想依赖 JavaScript，我过去曾成功使用过此功能：

```
function highlightPage(id){
    //make sure DOM methods are understood
    if(!document.getElementsByTagName) return false;
    if(!document.getElementById) return false;
    if(!document.getElementById(id)) return false;
    var nav = document.getElementById(id);
    var links = nav.getElementsByTagName('a');
    for (var i=0; i < links.length; i++){
        var linkurl = links[i].getAttribute('href');
        var currenturl = window.location.href;
        //indexOf will return -1 on non-matches, so we're checking for a positive match
        if (currenturl.indexOf(linkurl) != -1) {
            links[i].className = "here";
            var linktext = links[i].lastChild.nodeValue.toLowerCase();
            document.body.setAttribute("id",linktext);
        }
    }
} 
```

并在页面加载时加载函数：

```
function addLoadEvent(func){
    var oldonload = window.onload;
    if (typeof window.onload != 'function') {
        window.onload = func;
    } else {
        window.onload = function(){
            oldonload();
            func();
        }
    }
}

addLoadEvent(function(){
    highlightPage('navigation');
    }); 
```

这假定您的导航具有“导航”的 ID，但您可以将其更改为您想要的任何内容。该函数只是将一个“here”类附加到当前导航项。

该脚本来自[Jeremy Keith 的“DOM Scripting”](http://domscripting.com/)。

# php - 如何在我的服务器上无限运行 php 程序

> ID：11245219
> 
> 赞同：0
> 
> 时间：2012-06-28T12:59:38.407
> 
> 标签：php, infinite

我已经编写了 php 程序并上传到服务器上。我想无限运行这个程序。我的程序源是这样的：

```
<?php
while (1<2){
make something;
}
?> 
```

当然，如果我在浏览器中打开此页面，它将运行，但如果我关闭我的电脑，它将停止工作。我如何在不打开任何浏览器的情况下无限运行该程序。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-28T13:06:30.227

做这个：

```
<?php
    set_time_limit(0);
    ignore_user_abort(true);
    while(true) {
        //Do something
    }
?> 
```

但是，在没有非常非常好的理由的情况下这样做是一个非常非常非常糟糕的主意。您可以在 CLI 中运行这种脚本并使用 SIGINT 或 SIGKILL 来确保在不重新启动 apache 服务器的情况下停止脚本......（为什么我只是解释一下？不要这样做，这很危险......）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-28T13:02:02.043

在命令行中运行或作为 cronjob 运行；您还可以检查是否将 php 文件设置为系统守护程序：

[http://kevin.vanzonneveld.net/techblog/article/create_daemons_in_php/](http://kevin.vanzonneveld.net/techblog/article/create_daemons_in_php/)

使用 PHP 作为守护程序可以让它无限期地运行，但是您可能必须定期重置它以确保它不会堆叠内存。

顺便一提：

```
while( true ) 
```

也可以。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-01-31T04:12:25.790

你可以试试这个——

```
<?php
    while(1) {
        "some code"
    }
?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-28T13:04:53.303

`popen()`您可以启动用于启动新命令行进程的脚本。因此，您将使用所需的脚本启动 CLI PHP。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-28T13:05:14.923

您可以使用守护程序（服务），必须运行脚本。[描述在这里](http://linux.about.com/library/cmd/blcmdl5_services.htm)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-15T01:55:33.223

我在 linux 服务器上无限运行 java 程序时遇到了同样的问题。

我通过使用 linux 'screen' 命令解决了这个问题，在此处找到[说明](http://go2linux.garron.me/linux/2010/04/linux-screen-command-tutorial-740)

# c# - 将字符串列表转换为整数列表 列表容量是不同的导致未通过单元测试的原因

> ID：11245227
> 
> 赞同：0
> 
> 时间：2012-06-28T13:00:03.633
> 
> 标签：c#, .net, list

我试图编写一段代码，用于将字符串列表转换为整数列表，我从[ConvertAll](https://stackoverflow.com/a/44954/647884)`List<int> list = listOfStr.ConvertAll<int>(delegate(string s) { return ConvertStringToInt(s); });`得到了这一行。

```
 public static List<int> ConvertListOfStringToListOfInt(List<string> listOfStr)
    {
        List<int> list = listOfStr.ConvertAll<int>(delegate(string s) { return ConvertStringToInt(s); });

        return list;
    }
    /// <summary>
    /// converts the given str to integer
    /// </summary>
    /// <param name="str">string to be converted</param>
    /// <returns>returns the int value of the given string</returns>
    public static int ConvertStringToInt(string str)
    {
        int convertedValue = int.Parse(str);

        //(int.TryParse(str, out convertedValue))
        return convertedValue;
    } 
```

除了一件事，代码运行良好。

我为上述方法创建了单元测试，`TestMethod`如下

```
 /// <summary>
        ///A test for ConvertListOfStringToListOfInt
        ///</summary>
        [TestMethod()]
        public void ConvertListOfStringToListOfIntTest()
        {
            List<string> listOfStr = new List<string> { "1", "2", "3"}; // TODO: Initialize to an appropriate value
            List<int> expected = new List<int> { 1, 2, 3}; // TODO: Initialize to an appropriate value
            List<int> actual;
            actual = Conversions.ConvertListOfStringToListOfInt(listOfStr);
            Assert.AreEqual(expected, actual);
            //Assert.Inconclusive("Verify the correctness of this test method.");
        } 
```

我在传递方法和预期列表的列表中给出了相同的值，只是类型不同（预期是整数列表，传递的列表是字符串列表）。我运行测试并收到此错误消息：

```
Assert.AreEqual failed. Expected:<System.Collections.Generic.List`1[System.Int32]>. Actual:<System.Collections.Generic.List`1[System.Int32]>. 
```

好吧，类型实际上是相等的，所以我认为列表中可能有一些不同的东西，我对其进行了调试。

结果`listOfStr.Capacity`是 4 并且在它的 items 成员中有 null 项目作为 [3] 项目，因为 items 成员中的相同位置预期有 0​​ 并且`expected.Capacity`也是 4。

但是，`actual.Capacity`是 3，它的 items 成员中确实有 3 个项目。

我在填充它之前尝试`new`ing并在方法中将值添加到和ing 列表中。但是容量还是一样的。我不想手动设置容量，因为此方法不会用于已确定容量的列表。`actual``list.Add()``expected``new``ConvertListOfStringToListOfInt`

我该怎么做才能通过这个测试？为什么容量不一样？列表的容量是如何确定的，它们依赖于什么？

这是 .NET Framework 4.0。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T13:10:01.760

a的容量`List<T>`默认为4。如果一项一项添加，则每次添加超过当前容量的元素时，它将翻倍。

[http://msdn.microsoft.com/en-us/library/y52x03h2.aspx](http://msdn.microsoft.com/en-us/library/y52x03h2.aspx)

在我看来，你不应该担心这种情况下的容量。要使您的单元测试通过，您可以更改列表的初始化：

```
List<int> expected = new List<int>(3) { 1, 2, 3}; 
```

由于`ConvertAll`方法中的优化将占用旧容量。

一个提示：

如果您不关心优化每一点性能，您可以通过以下方式替换此方法

```
listOfStr.Select(s => int.Parse(s)).ToList(); 
```

只是为了让它更易于维护。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-28T13:19:44.080

试试这个：

```
Assert.IsTrue(actual.SequenceEqual(expected)); 
```

原因是列表是复杂的对象，列表的相等性不是由每个元素相同来确定的，而是定义为它们指向同一个列表。[序列相等](http://msdn.microsoft.com/en-us/library/bb348567.aspx)方法为您迭代列表并确定项目级别的相等性。

如果列表中的项目是复杂类型，那么它将使用这些项目的默认相等比较器。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-28T13:19:08.110

你有没有尝试过：

```
Assert.IsTrue(expected.SequenceEqual<int>(actual)); 
```

# .htaccess - .htaccess 使用 url 掩码重写

> ID：11245231
> 
> 赞同：0
> 
> 时间：2012-06-28T13:00:21.353
> 
> 标签：.htaccess, mod-rewrite

我需要做一个 url 重写维护以下条件：

*   [将http://domain.net](http://domain.net)（或[http://www.domain.net](http://www.domain.net) ）重写为 http://ip:port/folder
*   将任何其他请求，如[http://domain.net/logout?query=1](http://domain.net/logout?query=1)重定向到 http://ip:port/folder/logout?query=1 （保留查询字符串和所有）
*   屏蔽重写，以便新手用户无法从浏览器 url 栏中检测到 ip（他们被重定向到的地址）
*   至于屏蔽，像 http://domain.net:port/folder 这样的可见重定向也是可以接受的。

到目前为止我尝试了什么：以下导致 500 错误。

```
RewriteCond %{HTTP_HOST} ^(*.)?domain\.net$
RewriteRule ^(/)?$ http:// ip:port/folder/$1 [L,R,QSA] 
```

以下作品没有掩蔽：

```
RewriteCond %{HTTP_HOST}   !^www\.domain\.net [NC]
RewriteCond %{HTTP_HOST}   !^$
RewriteRule ^/(.*)         http:// ip:port/folder/$1 [L,R,QSA] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T13:16:17.480

只有当`ip:port`和`domain.net`引用同一服务器时，您才能执行此操作。~~否则，如果您想隐藏，您必须使用一些脚本从`ip:port`请求中提取远程内容。`domain.net``ip:port`~~

`[P]`否则，您可以使用该标志将请求代理到另一台服务器。
见：[http ://httpd.apache.org/docs/current/rewrite/flags.html#flag_p](http://httpd.apache.org/docs/current/rewrite/flags.html#flag_p)

# asp.net - 从 Gridview 连接字段

> ID：11245232
> 
> 赞同：0
> 
> 时间：2012-06-28T13:00:24.693
> 
> 标签：asp.net, gridview, drop-down-menu, concatenation

我有一个包含文本框、下拉列表和网格视图的 ASP.NET 页面。填写表单有两种方式，一种是当用户从gridview中选择一行时，单元格中的值会填充到文本框和下拉列表中，另一种是用户可以直接将数据输入到表单中。这有助于从我的数据库中添加、删除和更新记录。我的下拉列表和 gridview 填充了页面加载事件中 sql 语句中的值...

```
DROPDOWNLIST:
 dt = dal.FillDataTable(dbType.SqlServer, "SELECT V_VendorNo + ' | ' + V_VendorName FROM VendorTbl")
    ddlVendorEncum.DataSource = dt
    ddlVendorEncum.DataTextField = dt.Columns.Item(0).ToString
    ddlVendorEncum.DataValueField = dt.Columns.Item(0).ToString
    ddlVendorEncum.DataBind()

GRIDVIEW:
dts = dal.ExecuteSelectStoredPro(dbType.SqlServer, "EncumBugSearch", "@year", lblDef_FY.Text)
    gvEncumbered.DataSource = dts
    gvEncumbered.DataBind() 
```

因为下拉列表是表中两列的串联，所以当我在 gridview 中选择一行时，该值不会用所选值填充下拉列表。有没有办法进行反向类型连接以填充下拉列表？我试过这个：

```
ddlVendorEncum.Text = gvEncumbered.SelectedRow.Cells(1).ToString 
```

这是我填充文本框的方式，但出现错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T13:05:37.037

你可以使用

```
string s = dt.Columns.Item(0).ToString().Split("|".ToCharArray()); 
```

然后使用数组中的第一项（`s[0]),`但这是困难的方法。有一种更简单的方法。

* * *

改变

```
SELECT V_VendorNo + ' | ' + V_VendorName FROM VendorTbl 
```

至

```
SELECT V_VendorNo + ' | ' + V_VendorName, VendorNo FROM VendorTbl 
```

然后将 DataValueField 设置为查询返回的第二个字段。

```
ddlVendorEncum.DataTextField = dt.Columns.Item(0).ToString 
ddlVendorEncum.DataValueField = dt.Columns.Item(1).ToString 
```

（假设 VendorNo 是主键。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T13:16:04.003

我认为您需要在 sql 语句中使用两种不同的数据类型时进行 CAST

```
SELECT CAST(V_VendorNo AS Char(10)) + ' | ' + V_VendorName FROM VendorTbl 
```

我假设 V_VendorNo 在您的数据库中是 Int 类型

试试看。

# android - Android 将图片保存到 sd 卡时出错

> ID：11245234
> 
> 赞同：1
> 
> 时间：2012-06-28T13:00:32.617
> 
> 标签：android, camera, image, sd-card

我有一个 Android 应用程序在某些手机上崩溃，而在其他手机上却没有。它有大约 5k 的下载量，到目前为止已收到大约 50 份崩溃报告。但是，根据我从用户那里得到的关于它强制崩溃的评分/评论数量，我认为受影响用户的百分比实际上要高得多。

由于该问题不会影响我的手机，因此我无法重现该错误并按照我的意愿进行调试。

该应用程序从相机拍摄照片，在其上叠加位图，并将生成的图像保存到 SD 卡。

下面是我的`onPictureTaken`PictureCallback 方法的代码。

```
 private Camera.PictureCallback mPicture = new Camera.PictureCallback() {

    public void onPictureTaken(byte[] data, Camera camera) {

        captureBtn.setVisibility(ImageButton.INVISIBLE); 

        File pictureFile = getOutputMediaFile(MEDIA_TYPE_IMAGE);
        if (pictureFile == null){
            return;
        }

        BitmapFactory.Options options = new BitmapFactory.Options();
        Bitmap mutableBitmap = null;
        Bitmap finalBitmap = null; 
        byte[] byteArray = null; 
        try {   
            mutableBitmap = BitmapFactory.decodeByteArray(data, 0, data.length, options).copy(Bitmap.Config.RGB_565, true);
            Matrix matrix = new Matrix();
            int width = mutableBitmap.getWidth();
            int height = mutableBitmap.getHeight();
            int newWidth = overlayView.getDrawable().getBounds().width();
            int newHeight = overlayView.getDrawable().getBounds().height();
            float scaleWidth = ((float) newWidth) / width;
            float scaleHeight = ((float) newHeight) / height;
            matrix.postScale(scaleWidth, scaleHeight);
            matrix.postRotate(90);

            Bitmap resizedBitmap = Bitmap.createBitmap(mutableBitmap, 0, 0, mutableBitmap.getWidth(), mutableBitmap.getHeight(), matrix, true);
            finalBitmap = resizedBitmap.copy(Bitmap.Config.RGB_565, true);
            Canvas canvas = new Canvas(finalBitmap);

            Bitmap overlayBitmap = null;
            if (mWeaponType == wep1) {
                overlayBitmap = BitmapFactory.decodeResource(getResources(), R.drawable.wep1);
            } else if (mWeaponType == wep2) {
                overlayBitmap = BitmapFactory.decodeResource(getResources(), R.drawable.wep2); 
            }

            if (overlayBitmap != null) {

                matrix = new Matrix();
                matrix.postRotate(90);
                Bitmap resizedOverlay = Bitmap.createBitmap(overlayBitmap, 0, 0, overlayBitmap.getWidth(), overlayBitmap.getHeight(), matrix, true);
                canvas.drawBitmap(resizedOverlay, 0, 0, new Paint());
                canvas.scale(50, 0);
                canvas.save();
                //finalBitmap is the image with the overlay on it

                // rotate image to save in landscape mode
                matrix = new Matrix(); 
                matrix.postRotate(270); 
                finalBitmap = Bitmap.createBitmap(finalBitmap, 0, 0, finalBitmap.getWidth(), finalBitmap.getHeight(), matrix,
                        true);

                // convert final bitmap to byte array
                ByteArrayOutputStream stream = new ByteArrayOutputStream();
                finalBitmap.compress(Bitmap.CompressFormat.PNG, 100, stream);
                byteArray = stream.toByteArray();
            }
        }

        catch(OutOfMemoryError e) {
            //fail
        }

        try {
                FileOutputStream fos = new FileOutputStream(pictureFile);
                fos.write(byteArray); 
                fos.close();

                // Notify system that SD card has been updated
                sendBroadcast(new Intent(Intent.ACTION_MEDIA_MOUNTED, Uri.parse("file://"+ Environment.getExternalStorageDirectory())));
                Log.i(TAG, "Picture saved, intent broadcast that SD has been updated");
        } catch (FileNotFoundException e) {
            Log.d(TAG, "File not found: " + e.getMessage());
        } catch (IOException e) {
            Log.d(TAG, "Error accessing file: " + e.getMessage());
        } catch (NullPointerException e) {

        }

        finally {
            mCamera.startPreview();
            captureBtn.setVisibility(ImageButton.VISIBLE);
        }
    }
}; 
```

我得到一个 NullPointerException 如下：

```
java.lang.NullPointerException
at java.io.FileOutputStream.write(FileOutputStream.java:256)
at com.mypackage.MyActivity.onPictureTaken(MyActivity.java:215) 
```

哪一个是

```
 fos.write(byteArray); 
```

线。

上面列出的`getOutputMediaFile`方法如下：

```
/** Create a File for saving an image or video */
private static File getOutputMediaFile(int type){
    // To be safe, you should check that the SDCard is mounted
    // using Environment.getExternalStorageState() before doing this.

    File mediaStorageDir = Environment.getExternalStoragePublicDirectory(
              Environment.DIRECTORY_PICTURES);

    // Create the storage directory if it does not exist
    if (! mediaStorageDir.exists()){
        if (! mediaStorageDir.mkdirs()){
            Log.d("HalfLife2 Booth", "failed to create directory");
            return null;
        }
    }

    // Create a media file name
    String timeStamp = new SimpleDateFormat("yyyyMMdd_HHmmss").format(new Date());
    File mediaFile;
    if (type == MEDIA_TYPE_IMAGE){
        mediaFile = new File(mediaStorageDir.getPath() + File.separator +
        "IMG_"+ timeStamp + ".jpg");
    } else if(type == MEDIA_TYPE_VIDEO) {
        mediaFile = new File(mediaStorageDir.getPath() + File.separator +
        "VID_"+ timeStamp + ".mp4");
    } else {
        return null;
    }

    return mediaFile;
} 
```

我认为问题可能出在某个地方，试图获取输出媒体文件。我尝试更新应用程序以使用：

```
 File mediaStorageDir = new File(Environment.getExternalStoragePublicDirectory(
              Environment.DIRECTORY_PICTURES), "MyApp"); 
```

取而代之的是，一位用户报告该问题已解决，但有几位用户报告该问题仍然存在。

任何想法，任何人？当我无法重现或无法靠近它时，我发现这是一个很难调试/修复的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T13:03:04.313

确保以原始格式缩放图片。我发现某些手机型号上的原始图像非常大。如果图像非常大，我建议您缩放图像，因为您的虚拟机会在内存不足的情况下运行。

例子：

```
 imageRef = sd_card_path+"/"+ImageName;
                BitmapFactory.Options resample = new BitmapFactory.Options();
                resample.inJustDecodeBounds = true;
                BitmapFactory.decodeFile(imageRef, resample);
                int width = resample.outWidth;
                int height = resample.outHeight;
                if(width*height > utility.IMAGE_SIZE_MIN){
                    int imageSizef = (int)(width*height/utility.IMAGE_SIZE_MIN);
                    String imageSize = imageSizef+"";
                    resample.inSampleSize = Integer.parseInt(imageSize);
                    resample.inJustDecodeBounds = false;
                    image.setImageBitmap(BitmapFactory.decodeFile(imageRef , resample));                    
                }else{
                    image.setImageBitmap(BitmapFactory.decodeFile(imageRef ));
                } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T13:04:32.753

鉴于异常跟踪，它会建议您遇到 OutOfMemorryError 并且因此 byteArray 永远不会被填充，因此您将 null 传递给 fos.write 方法

# java - 在一个目标中读取一个包含 Long 数字的小文件并获得回车 \n

> ID：11245235
> 
> 赞同：0
> 
> 时间：2012-06-28T13:00:39.493
> 
> 标签：java, io, echo, java-io

我有一个小文件 test.txt 里面包含一个 Long 数字，而另一段 java 代码不断地从文件中读取 Long 。

以下是步骤：

跑

```
echo "123" > test.txt 
```

然后如果你去 test.txt 文件，vim test.txt -> :set list，你会看到文件看起来像：

```
123$ 
```

我有一段java代码执行以下操作：

```
byte[] testBytes = File.readAllBytes(test.txt);  
String testString = new String(testBytes);  // in debug mode, testString looks like "123\n"
long bytesEverRead = Long.parseLong(testString);  // this line throws exception because parseLong("123\n") won't work 
```

正如您在上面看到的，正在从文件中读取“123\n”，这导致我的 parseLong 失败。如何在没有 \n 的情况下从 test.txt 中读取 123 。处理这个问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T13:08:10.607

您可以使用[java.util.Scanner](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Scanner.html)（在 Java 5 中引入）。

Javadoc 页面上有几个示例，但在您的情况下，它会很简单：

```
Scanner sc = new Scanner(new File("test.txt"));
long bytesEverRead = sc.nextLong(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T13:06:19.513

你可以使用

```
String testString = new String(testBytes).trim();
long bytesEverRead = Long.parseLong(testString); 
```

# objective-c - NSString 对象未正确初始化

> ID：11245239
> 
> 赞同：0
> 
> 时间：2012-06-28T13:00:52.770
> 
> 标签：objective-c, nsstring

有人可以告诉我我在这里做错了什么。我正在尝试从预定义名称列表中初始化一个字符串，但由于某种原因，它不适用于作为类字段的 NSString：

```
MyController.h:

@interface MyController:UIViewController
{
    NSString *text;
}

MyController.m:

-(void) viewDidLoad
{
    [super viewDidLoad];

    NSArray *list = [NSArray arrayWithObjects:@"A", @"B", @"C", nil];

    NSString* temp= [list objectAtIndex:0]; // temp = "A"

    text = [list objectAtIndex:0];  // Why text = nil ????
    text = @"Hello";   // does not work either
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T13:17:45.717

原来在这种情况下调试器是错误的。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-28T13:12:19.153

尝试设置文本等于`NSString *text = [NSString stringWithFormat:@"%@", [list objectAtIndex:0]];`

# jquery - 如何在 JqPlot 中处理没有数据

> ID：11245240
> 
> 赞同：10
> 
> 时间：2012-06-28T13:00:54.630
> 
> 标签：jquery, jqplot

是否有使用 JqPlot 处理“无数据”的最佳方法？

假设我通过 ajax 调用使用 json 数据，最终没有数据可用，例如：

```
[['North'][0],['South'][0],['East'][0],['West'][0]] 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-12T11:22:10.493

我总是有一个条件，我检查我的`AJAX`函数，它检查没有结果。然后，如果没有结果发生，我会设置一个图表，让它看起来是空的。由于这个原因`var data = [[null]]`应该做的，哪里`data`是一个参数`jQuery.jqplot('chart', data, {})`。的值`data`可能取决于图表的类型，因此我对折线图、条形图和饼图进行了测试，效果很好。

或者，您还可以隐藏图例和情节的其他部分。对我来说，只需设置`data`和图例就足够了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-10-29T14:18:45.093

`var data = [null];`将在控制台中触发错误并进一步停止 JS 脚本执行。更好的解决方案是使用以下内容。

```
var data = [''];
jQuery.jqplot('chart', data, {}); 
```

这将打印任何后续图表和/或继续 JS 脚本执行，在 FF/Chrome/IE 控制台中没有错误。:-)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-09-20T17:01:24.693

就我而言，这与 Rahi 的回答相反（也许 null 周围缺少双括号是问题所在），这意味着我同意 Boro；

这有效：`var data = [[null]];` 并且这：`var data = [''];`生成一个错误，无论我有多个图表还是只有一个没有数据。

我正在运行 jqPlot 1.0.9

我得到的错误是：`Uncaught Error: No data specified`从 jqPlot 脚本中的条件

```
if (0 == this.noDataIndicator.show)
                    throw new Error("No data specified"); 
```

# windows - 通过 LAN 从另一台机器访问虚拟主机

> ID：11245242
> 
> 赞同：34
> 
> 时间：2012-06-28T13:01:04.993
> 
> 标签：windows, apache, windows-7, virtualhost, wampserver

*   我正在使用带有 Wamp 2.2 服务器的 Windows 7。
*   我已经设置了 2 个虚拟主机：`www.project1.com`和`www.project2.com`.
*   我已将“*[主机](https://en.wikipedia.org/wiki/Hosts_(file))*”、[`httpd.conf`](https://en.wikipedia.org/wiki/Httpd.conf). 和[`httpd-vhosts.conf`](https://httpd.apache.org/docs/2.4/vhosts/examples.html)文件修改为我在下面提到的更改。

使用我的浏览器，当我输入`www.project1.com`or时`www.project2.com`，我成功地在安装了服务器的笔记本电脑上打开了我的网页。

*“主机文件*”中的更改：我在文件末尾附加了以下内容：-

```
127.0.0.1       localhost
127.0.0.1       www.project2.com
127.0.0.1       www.project1.com 
```

文件更改`httpd.conf`：-

```
Include conf/extra/httpd-vhosts.conf 
```

文件更改`httpd-vhosts`：-

```
NameVirtualHost *:80

<Directory "D:/websites/">
    AllowOverride All
    Order Deny,Allow
    Allow from all
    </Directory>
<VirtualHost 127.0.0.1>
    DocumentRoot "D:/websites/wamp/www/"
    ServerName localhost
</VirtualHost>

<VirtualHost 127.0.0.1>
    DocumentRoot "D:/websites/project1/"
    ServerName www.project1.com
</VirtualHost>

<VirtualHost 127.0.0.1>
    DocumentRoot "D:/websites/project2/"
    ServerName www.project2.com
</VirtualHost> 
```

* * *

现在; 因为我可以从浏览器（带有服务器的浏览器）打开这些网页`PC_1`，我如何从浏览器访问这些网页`PC_2`？`PC_1`（我的意思是任何通过 LAN连接的 PC 。）

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2015-02-04T03:29:03.627

除了 danp 的回答，您可以通过为虚拟主机*分配端口来*访问虚拟主机，而无需更改客户端机器的 etc/hosts 文件。如果您想使用移动或平板设备访问服务器，这是理想的选择：

1.  在以下位置编辑服务器的`httpd.conf`文件：

    ```
    \wamp\bin\apache\apache2.2.x\conf\httpd.conf 
    ```

    搜索“ `Listen`”（第 61 行附近）。您应该看到允许 Apache 侦听端口 80 的以下内容：

    ```
    Listen 0.0.0.0:80
    Listen [::0]:80 
    ```

    添加以下行以添加对端口`81`（或任何端口）的侦听：

    ```
    Listen 0.0.0.0:81
    Listen [::0]:81 
    ```

2.  在以下位置编辑`httpd-vhosts.conf`文件：

    ```
    \wamp\bin\apache\apache2.2.x\conf\extra\httpd-vhosts.conf 
    ```

    将您的*“虚拟主机”*标签更改为端口`81`：

    ```
    <VirtualHost *:81>
        DocumentRoot "D:/websites/project1/"
        ServerName www.project1.com
    </VirtualHost> 
    ```

3.  重新启动 Apache 服务器。

4.  在客户端机器/平板电脑/移动设备上，在 Web 浏览器上，输入服务器的 IP 地址（`192.168.0.10`或任何 IP），然后按以下格式输入端口号：

    ```
    http://192.168.0.10:81 
    ```

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-07-05T10:38:41.793

在您的 virtualhost 指令中，更改`127.0.0.1`为`*:80`Gabriel 提到的，在另一台机器上的 hosts 文件中添加一个条目，添加您的域以与您的服务器的 IP 关联。

当您将显式 IP 放入指令中时，apache 将仅侦听该 IP - 但通配符将告诉它绑定到所有可用的 IP。

```
<VirtualHost *:80>
    DocumentRoot "D:/websites/project1/"
    ServerName www.project1.com
</VirtualHost> 
```

例如，如果您的服务器位于 192.168.1.70 上，那么在您局域网上的其他机器上，hosts 条目将如下所示：

```
192.168.1.70     www.project1.com 
```

重新启动apache，它应该可以正常工作。

请注意，当您使用虚拟主机时，apache 将使用第一个定义作为默认值，因为它无法在 HTTP 请求标头中传递的域和配置中的站点设置之间进行匹配，这就是为什么您的默认值页面出现。

您告诉 apache 使用该指令绑定到所有 IP `NameVirtualHost *:80`，但随后没有为该外部 IP 设置站点。希望有帮助！

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-02-23T06:34:02.157

本地网络中有两台计算机。

一台计算机（192.168.1.70）设置（D:\wamp\bin\apache\Apache2.2.11\conf\extra\httpd-vhosts.conf）：

```
<VirtualHost *:80>
    DocumentRoot "D:/websites/project1/"
    ServerName www.project1.com
</VirtualHost>

<VirtualHost *:80>
    DocumentRoot "D:/websites/project2/"
    ServerName www.project2.com
</VirtualHost> 
```

B 电脑设置（c:/windows/system32/drives/etc/hosts）：

```
192.168.1.70    www.project1.com
192.168.1.70    www.project2.com 
```

B访问A，我的项目正在运行。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2017-03-22T05:30:08.303

选定答案需要考虑的几个更新点：

1.  `NameVirtualHost`[Apache 2.3.11](https://httpd.apache.org/docs/2.4/mod/core.html#namevirtualhost)后不再使用 ，可以省略。

    > 在 2.3.11 及更高版本中，任何时候在多个虚拟主机中使用 IP 地址和端口组合时，都会自动为该地址启用基于名称的虚拟主机。

2.  因为我们谈论的是通过 LAN 托管网站，所以让我们设置一个要求*，只接受来自本地网络上 IP 地址的连接。例如，在普通的 Linksys 路由器上，分配给网络上每个设备的默认 IP 是在 192.168.1.100 到 192.168.1.255 之间。您可以使用 IP 地址 192.168.1.XXX 允许来自 LAN 上所有设备的连接`Require ip 192.168.1` （注意最后一个八位字节不在 IP 中以允许整个范围）。

    这允许您配置每个项目的访问权限，以便一个可以通过 LAN 使用，而另一个只能在本地使用。

    ```
    # This will allow all LAN connections to www.project1.com
    <VirtualHost *:80>
        DocumentRoot "D:/websites/project1/"
        <Directory  "D:/websites/project1/">
            Require local
            Require ip 192.168.1
        </Directory>
        ServerName www.project1.com
    </VirtualHost>

    # This will allow only the machine hosting the website to access www.project2.com
    <VirtualHost *:80>
        DocumentRoot "D:/websites/project2/"
        <Directory  "D:/websites/project2/">
            Require local
        </Directory>
        ServerName www.project2.com
    </VirtualHost> 
    ```

    如果没有路由器将端口 80 上的流量转发到您的主机，您的网站将不会公开提供服务，但我相信这被认为是最佳实践。如果您需要控制哪些项目可用于 LAN 上的设备，则这一点尤其必要。

3.  提醒：您的主机应配置为使用静态 IP 地址，而不是由路由器的 DHCP 分配一个。由于我们正在编辑其他设备的主机文件以指向服务器的 IP，因此我们不希望它更改。

[* 我将其包括在内是因为本地开发服务器上的访问限制很常见，您需要专门使其对本地网络可用。]

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-28T13:02:59.093

您需要更改试图从中查看页面的机器上的主机文件。

因此，您需要将它们添加到另一台局域网机器上的 hosts 文件中。

# java - JScrollPane 不会在 JSplitPane 上更新 JScrollBar

> ID：11245243
> 
> 赞同：1
> 
> 时间：2012-06-28T13:01:07.300
> 
> 标签：java, image, drawing, jscrollpane, jscrollbar

我想创建能够编辑图像的简单应用程序。应用程序的主视图包含`JSplitPane`两个`JScrollPane`. 每个`JScrollPane`包含`JPanel`. 右边`JPanel`有几个按钮等，左边`JPanel`是我的绘图区。

这是我的问题...

当我第一次创建时，`JPanelDrawingArea`我可以设置首选大小。如果大小大于显示的大小`JScrollPane`（`JScrollBars`默认情况下是相等的）。但是当我将图像加载到`JPanelDrawingArea`滚动条时不会更新。尽管我设置了新的首选大小`JPanelDrawingArea`（大于大小`JScrollPane`）滚动条不会更新，除非我手动更改`JSplitPanes`分隔线位置。

这是我的`JSplitPane`自定义类：

```
public class DrawingPaneView extends JSplitPane{

private DrawingWorkMode drawingWorkMode;
private ImageWorkerView imageWorker;
JScrollPane workScrollPane;
JScrollPane pictureScrollPane;
private DrawingPaneController controller;

private Dimension minimumSize = new Dimension(100, 200);
private JPanel imagePanel;

public DrawingPaneView() {

    setPreferredSize(new Dimension(ConfigClass.APP_WIDTH,ConfigClass.DRAWING_PANE_HEIGHT));
    controller = new DrawingPaneController(this); 

    //Panel
    drawingWorkMode = new DrawingWorkMode();
    workScrollPane = new JScrollPane(drawingWorkMode);

    //Image
    imageWorker = new ImageWorkerView();
    pictureScrollPane = new JScrollPane(imageWorker);

    workScrollPane.setMinimumSize(minimumSize);
    pictureScrollPane.setMinimumSize(minimumSize);

    //addJPanels
    this.setOrientation(JSplitPane.HORIZONTAL_SPLIT);
    this.setRightComponent(workScrollPane);
    this.setLeftComponent(pictureScrollPane);

    //addLeftPanelWithJButtonOnly
    imagePanel = new ImagePanelView();
    pictureScrollPane.setRowHeaderView(imagePanel);

    this.setDividerLocation(ConfigClass.DRAWING_PANE_WIDTH);
    this.setOneTouchExpandable(true);

}

//Change mode
public void changeMode(String mode){
    drawingWorkMode.changeMode(mode);
}      
} 
```

还有我的自定义`JPanel`执行绘图：

```
public class ImageWorkerView extends JPanel {

private BufferedImage img;
private ImageWorkerController controller;
private int defaultBounds = 50;
private double scale=1.0;
int imgW;
int imgH;

public ImageWorkerView() {
    //setLayout(new BorderLayout(0, 0));
    controller = new ImageWorkerController(this);
}

public void setScale(double scale) {
    this.scale = scale;
}

public void setImage(File image) {
    try {
        img = ImageIO.read(image);
        if (img.getType() != BufferedImage.TYPE_INT_RGB) {
            BufferedImage img2 =
                new BufferedImage(img.getWidth(null), img.getHeight(null), BufferedImage.TYPE_INT_RGB);
            Graphics big = img2.getGraphics();
            big.drawImage(img, 0, 0, null);
            img = img2;
        }
    } catch (IOException e) {
        System.out.println("Image could not be read");
    }
}

private void adjustPreferredSize(Boolean defaultSize){

    if(defaultSize){
        //Calculate the proper size of drawing area
        imgW = ConfigClass.DRAWING_PANE_WIDTH - ImagePanelView.PREFERRED_WIDTH-10;
        imgH = ConfigClass.DRAWING_PANE_HEIGHT-50;
        setPreferredSize(new Dimension(imgW,imgH));
        controller.setWindowHeight(imgH);
    }
    else{
        imgW = (int)(img.getWidth() * scale + (defaultBounds*2));
        imgH = (int)(img.getHeight() * scale + (defaultBounds*2));
        setPreferredSize(new Dimension(imgW,imgH));
        controller.setWindowHeight(imgH);
    }   
}

@Override
public void paintComponent(Graphics g) {
    super.paintComponent(g);
    Graphics2D g2 = (Graphics2D) g;

    if(img!=null){
        if(scale!=1.0){
            AffineTransform at = AffineTransform.getScaleInstance(scale, scale);
            AffineTransformOp aop =
                new AffineTransformOp(at, AffineTransformOp.TYPE_BICUBIC);
            g2.drawImage(img, aop, defaultBounds, defaultBounds);
        }
        else
            g2.drawImage(img, defaultBounds, defaultBounds, null);
        adjustPreferredSize(false);
    }
    else{
        adjustPreferredSize(true);
    }

}
} 
```

以及我如何加载图像：

```
public class ImageWorkerController {
ImageWorkerView view;
ImageModel model;

public ImageWorkerController(ImageWorkerView workerView) {
    this.view = workerView;
    this.model = ApplicationContext.getObject(ImageModel.class);

    //Load image
    ApplicationContext.getObject(Context.class).addPropertyChangeListener(new PropertyChangeListener() {
        public void propertyChange(PropertyChangeEvent evt) {
            if(Context.IMAGE_LOADED.equals(evt.getPropertyName())){
                view.setImage((File) evt.getNewValue());
                view.repaint();
            }
        }
    });

public void setWindowHeight(int h){
    model.setDrawingWindowHeight(h);
} 
```

}

如您所见，有一个`adjustPreferredSize()`方法，当它第一次被调用时，它设置`preferredSize`为大于`JScrollPane`，`JScrollBars`出现。但是当它再次被调用时，它什么也不做。

有趣的是，当我手动更改分隔线的`JScrollBars`显示位置时，下面的屏幕上有一个示例：

[http://s17.postimage.org/e1nkja3zx/liliebead.jpg](http://s17.postimage.org/e1nkja3zx/liliebead.jpg)

所以有某种事件，这使得`JScrollPane`更新？我尝试了几种方法：`updateUI()`, `repaint()`, `revalidate()`. 他们都没有工作。

任何想法我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T03:17:58.870

简而言之，你需要`revalidate()`你的`ImageWorkerView`（就在你打电话的地方`repaint()`）。这将要求组件及其父级“重新布局”，进而触发滚动条的必要调整。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T06:41:38.690

感谢您的回答！你的建议让我思考。 实际上我做错的是在方法 in之前`revalidate()`立即调用（我在调试过程中发现了这一点）。正确的方法是：`repaint()``revalidate()``paintComponent``ImageWorkerView`

```
ApplicationContext.getObject(Context.class).addPropertyChangeListener(new PropertyChangeListener() {
        public void propertyChange(PropertyChangeEvent evt) {
            if(Context.IMAGE_LOADED.equals(evt.getPropertyName())){
                view.setImage((File) evt.getNewValue());
                //view.repaint();
                view.paintImmediately(new Rectangle(1, 1));
                view.revalidate();
            }
        }
    }); 
```

所以现在`paintComponent`设置首选大小，然后`revalidate()`调整滚动条。

# java - 使用 Java 备份 SQLite

> ID：11245244
> 
> 赞同：2
> 
> 时间：2012-06-28T13:01:08.050
> 
> 标签：java, sqlite, backup

我需要创建一个 Java 类来创建我的数据库的备份。我的问题是，我不知道如何使用 SQLite 数据库来做到这一点。谁能告诉我怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-28T13:09:05.927

如果数据库相当小，您可以调用`BEGIN EXCLUSIVE TRANSACTION`以[防止其他进程修改数据库](http://sqlite.com/lang_transaction.html)，然后复制数据库文件，然后`ROLLBACK TRANSACTION`. 如果文件很大，您将不得不使用[在线备份接口](http://sqlite.com/backup.html)（如果您的 Java 绑定不支持它，请使用 JNI）。

当然，如果只有您的应用程序使用此数据库，并且您可以确定在您复制文件时没有人会修改文件，那就去复制它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T13:03:54.833

最简单的方法是创建数据库文件的副本——假设它是基于磁盘的数据库。

# javascript - 图像上的鼠标光标坐标： 不起作用

> ID：11245250
> 
> 赞同：0
> 
> 时间：2012-06-28T13:01:21.357
> 
> 标签：javascript, jquery

感谢我在[这里](https://stackoverflow.com/questions/11235664/overlay-showing-mouse-cursor-coordinates-relative-to-an-image-when-mouse-cursor)收到的建议，我清理了我的代码，现在我正在使用纯 jQuery。我对在[这里](https://stackoverflow.com/questions/7414984/how-could-i-display-x-y-coordinates-on-image-in-real-time-to-the-user-when-the)找到的脚本进行了轻微的编辑，我得到了这个：

```
window.onload = function(){

    var tooltip = $( '<div id="tooltip">' ).appendTo( 'body' )[0];

$( 'img' ).
    each(function () {
        var pos = $( this ).position(),
            top = pos.top,
            left = pos.left,
            width = $( this ).width(),
            height = $( this ).height(); 
        $( this ).
            mousemove(function ( e ) {
                var x = e.pageX - left,
                    y = e.pageY - top;

                $( tooltip ).text( 'x = ' + x + ', y = ' + y ).css({
                    left: e.clientX + 10,
                    top: e.clientY + 10
                }).show();
            }).
            mouseleave(function () {
                $( tooltip ).hide();
            }); 

    });

}; 
```

我有一个问题：我尝试将我的代码行更改为：

```
$( tooltip ).text( 'x = ' + x + '<br/> y = ' + y ).css({ 
```

但它不起作用。我没有打破界限，而是得到了这个：

![换行符不起作用](../Images/279e5f28e5d34f8ad222ed3bd3819ec0.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T13:06:59.670

改变：

```
$( tooltip ).text( 'x = ' + x + '<br/> y = ' + y ).css({ 
```

到：

```
$( tooltip ).html( 'x = ' + x + '<br/> y = ' + y ).css({ 
```

# java - 以角度在画布上绘制文本

> ID：11245253
> 
> 赞同：11
> 
> 时间：2012-06-28T13:01:29.017
> 
> 标签：java, android, paint, android-canvas

如何在画布上绘制文本，如下图所示`Green rectangle`。

![在此处输入图像描述](../Images/8c43306da7a9d66fdeb7e203cf89018c.png)

我已经完成了以下代码....但是从这段代码中我可以在`straight`. 无法在 处写文字`angle`。

```
Bitmap bmpLayered = Bitmap.createBitmap(bmpMain.getWidth(), bmpMain
                .getHeight(), Bitmap.Config.ARGB_8888);
        Canvas cv = new Canvas(bmpLayered);

Paint charPaint = new Paint();
        charPaint.setAntiAlias(true);
        charPaint.setStyle(Paint.Style.FILL);
        charPaint.setTextSize(24);
        charPaint.setColor(Color.BLACK);
        charPaint.setStrokeWidth(3);

cv.drawText("None", 570, 222, charPaint); 
```

请帮我解决这个问题。

谢谢。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-06-28T13:07:39.620

```
cv.save();
cv.rotate(-45, x, y);
cv.drawText("your text here", x, y, paint);
cv.restore(); 
```

其中 cv 引用您的画布，x & y 是您要绘制的点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T13:08:46.657

将文本绘制到画布后，您可以旋转画布。

```
cv.drawText("None", 570, 222, charPaint);
//rotate the canvas
cv.rotate(45f);
// or around a pivot point
cv.rotate(45f, 100, 100); 
```

[Android 开发者：Graphics-Canvas Rotate](http://developer.android.com/reference/android/graphics/Canvas.html#rotate%28float%29)

# wordpress - Wordpress 如果页面的子孙

> ID：11245256
> 
> 赞同：0
> 
> 时间：2012-06-28T13:01:41.497
> 
> 标签：wordpress, if-statement, children, conditional-statements

我在 Wordpress 中提供不同的标题，具体取决于您在网站中的哪个部分，“住宅”，“商业”或其他使用以下代码：

```
<?php
    /*
    Template Name: Package
    */ 
    if (is_page('business') || $post->post_parent == "17")
    {
        get_header('business');
    }
    else if (is_page('residential') || $post->post_parent == "19")
    {
        get_header('residential');
    }
    else 
    {
        get_header();
    }
?> 
```

尽管我也需要将其扩展到与孙辈一起工作，但又要降低一个层次。有人有想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T07:00:54.537

我之前以与您最初编码的方式类似的方式完成了此操作，但是我只是更改了类并使用 css 来调用该类的图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T14:45:34.290

您可以检查页面是否具有您指定为顶级父级的 id 的祖先，即

```
if(in_array('19', get_ancestors($post->ID, 'page')){...} 
```

# python - 如何取消 Google Appengine 中的任务？（Python）

> ID：11245258
> 
> 赞同：0
> 
> 时间：2012-06-28T13:01:55.910
> 
> 标签：python, google-app-engine

这是我的问题。如果用户从频道断开连接并且没有重新连接（比如说 5 秒），我可以假设他离开了我的网站。如果他确实在 5 秒内回来，我将取消计划与该用户做某事的任务。

如何做到这一点？我计划使用任务队列，但我不知道如何取消它。

如果您有更好的想法，请分享它:)。

* * *

我在[这里](https://cloud.google.com/appengine/docs/python/taskqueue/#Python_Deleting_tasks)找到了答案#。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T17:35:15.620

因此，您指向的文档解释了如何从管理控制台手动删除任务，或者如何调用 purge() 来删除队列中的所有任务。

如果您想以编程方式取消特定任务，则必须在代码中实现一种机制来执行此操作 - 例如，在数据存储中存储一个标志，该任务在运行时检查该标志，并在它看到时退出而不做任何事情该标志已设置（或清除，或者您定义条件）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-10-18T17:22:02.843

这可以通过

```
# Delete an individual task...
q = taskqueue.Queue('queue1')
q.delete_tasks(taskqueue.Task(name='foo')) 
```

请参阅[https://cloud.google.com/appengine/docs/python/taskqueue/#Python_Deleting_tasks](https://cloud.google.com/appengine/docs/python/taskqueue/#Python_Deleting_tasks)

# ios - 有没有办法观察对象（iOS）上调用的每个消息调用？

> ID：11245261
> 
> 赞同：3
> 
> 时间：2012-06-28T13:02:02.777
> 
> 标签：ios, selector, nsinvocation, message-forwarding

每次向对象发送消息时，我只想获取选择器名称以及参数、发送者或 NSInvocation 实例。可能的？像 forwardInvocation: 之类的东西，但在每种情况下（每个方法调用）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-28T13:32:03.773

有一种方法可以通过使用 Objective-C 消息传递中的隐藏参数来获取选择器的名称和目标。来自[苹果的文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/ObjCRuntimeGuide/Articles/ocrtHowMessagingWorks.html#//apple_ref/doc/uid/TP40008048-CH104-SW1)：

> 当 objc_msgSend 找到实现方法的过程时，它调用该过程并将消息中的所有参数传递给它。它还向过程传递了两个隐藏参数：
> 
> 接收对象 方法的选择器

因此，在一种方法中，您可以获得以下内容：

```
 id  target = getTheReceiver();
   SEL method = getTheMethod(); 
```

如果仍然无法满足您的需求，您可以执行以下操作：

1.  创建一个名为`Helper`.
2.  添加对将调用方法的类的引用，格式如下：`id <HelperDelegate> myClassReference;`
3.  当您需要`[self method]`创建一个此类的实例`Helper`并调用它的方法时，就像`[helper method];`添加 this一样`[helper setMyClassReference:self];`。
4.  该应用程序应该崩溃，但是，只需`forwardInvocation:`在`Helper`类上添加。从那里，您将能够获得该`NSInvocation`对象。做你需要做的事情，然后：`[anInvocation invokeWithTarget:myClassReference];`这样你就可以将消息传递给原始调用者。

**PS：**即使这不能回答你的问题，+1 的问题.. 真的让我思考这个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T14:26:09.880

所以我做了这门课，就像一个魅力。

。H

```
@protocol PGMessageObserverDelegate
-(void)observedInvocation:(NSInvocation*) invocation willSendToObject:(id) object;
-(void)observedInvocation:(NSInvocation*) invocation didSendToObject:(id) object;
@end

@interface PGMessageObserver : NSObject

@property (nonatomic, readonly) id observable;
@property (nonatomic, readonly) id <PGMessageObserverDelegate> delegate;

+(id)messageObserverObserving:(id) observable delegate:(id) delegate;

@end 
```

.m

```
#import "PGMessageObserver.h"

@interface PGMessageObserver ()
-(id)initWithObservable:(id) observable delegate:(id) delegate;
@end

@implementation PGMessageObserver
@synthesize observable = _observable;
@synthesize delegate = _delegate;

#pragma mark - Creation

+(id)messageObserverObserving:(id) observable delegate:(id) delegate
{
    return [[[PGMessageObserver alloc] initWithObservable:observable delegate:delegate] autorelease];
}

-(id)initWithObservable:(id) observable delegate:(id) delegate
{
    if (self = [super init])
    {
        _observable = observable;
        _delegate = delegate;
    }
    return self;
}

#pragma mark - Message forwarding

-(void)forwardInvocation:(NSInvocation*) invocation
{
    //Notify.
    [_delegate observedInvocation:invocation willSendToObject:_observable];

        //Forward.
        if (_observable != nil)
        {
            [invocation invokeWithTarget:_observable];

            //Notify.
            [_delegate observedInvocation:invocation didSendToObject:_observable];
        }
}

-(NSMethodSignature*)methodSignatureForSelector:(SEL) selector
{
    return [_observable methodSignatureForSelector:selector];
}

@end 
```

它没有尽可能严格，但它会通知我发送给这个观察者的每个动作，然后消息被重定向到原始对象（可观察的）。

客户端代码只是一个保留的属性......

```
@property (nonatomic, retain) PGMessageObserver *messageObserver;
#define self_OBSERVED _messageObserver 
```

...以及某处的设置。

```
self.messageObserver = [PGMessageObserver messageObserverObserving:self delegate:self]; 
```

然后应将可观察消息发送到自我设置的 SELF_OBSERVED。

# web-services - 使用对称密钥的用户名身份验证在本地工作但不在远程服务器中

> ID：11245265
> 
> 赞同：1
> 
> 时间：2012-06-28T13:02:13.850
> 
> 标签：web-services, security, jakarta-ee, glassfish, jax-ws

我有一个使用 netbeans 7 和 glassfish 3.1.2 开发的 jax-ws Web 服务。我将 Web 服务配置为使用具有对称密钥安全性和默认密钥库的用户名身份验证。当我在 localhost 中测试我的 Web 服务时，一切正常，但是当我在远程测试服务器中部署它时，它没有工作。首先，我收到异常抱怨，`Key used to decrypt EncryptedKey cannot be null`所以我将本地 keystore.jks 和 cacerts.jks 上传到远程服务器。

现在我得到了这些例外：

**服务器端：**

```
WSITPVD0035: Error in Verifying Security in Inbound Message. com.sun.xml.wss.impl.PolicyViolationException: com.sun.xml.wss.impl.WssSoapFaultException: Invalid Security Header at 
com.sun.xml.wss.impl.policy.verifier.MessagePolicyVerifier.verifyPolicy(MessagePolicyVerifier.java:151) at 
com.sun.xml.ws.security.opt.impl.incoming.SecurityRecipient.createMessage(SecurityRecipient.java:1003) at 
com.sun.xml.ws.security.opt.impl.incoming.SecurityRecipient.validateMessage(SecurityRecipient.java:248) at 
com.sun.xml.wss.provider.wsit.WSITServerAuthContext.verifyInboundMessage(WSITServerAuthContext.java:588) at 
com.sun.xml.wss.provider.wsit.WSITServerAuthContext.validateRequest(WSITServerAuthContext.java:361) at 
com.sun.xml.wss.provider.wsit.WSITServerAuthContext.validateRequest(WSITServerAuthContext.java:264) at 
com.sun.enterprise.security.webservices.CommonServerSecurityPipe.processRequest(CommonServerSecurityPipe.java:173) at 
com.sun.enterprise.security.webservices.CommonServerSecurityPipe.process(CommonServerSecurityPipe.java:144) at 
com.sun.xml.ws.api.pipe.helper.PipeAdapter.processRequest(PipeAdapter.java:119) at 
com.sun.xml.ws.api.pipe.Fiber.__doRun(Fiber.java:961) at 
com.sun.xml.ws.api.pipe.Fiber._doRun(Fiber.java:910) at 
com.sun.xml.ws.api.pipe.Fiber.doRun(Fiber.java:873) at 
com.sun.xml.ws.api.pipe.Fiber.runSync(Fiber.java:775) at 
com.sun.xml.ws.server.WSEndpointImpl$2.process(WSEndpointImpl.java:386) at 
com.sun.xml.ws.transport.http.HttpAdapter$HttpToolkit.handle(HttpAdapter.java:640) at 
com.sun.xml.ws.transport.http.HttpAdapter.handle(HttpAdapter.java:263) at 
com.sun.xml.ws.transport.http.servlet.ServletAdapter.handle(ServletAdapter.java:163) at 
org.glassfish.webservices.Ejb3MessageDispatcher.handlePost(Ejb3MessageDispatcher.java:120) at 
org.glassfish.webservices.Ejb3MessageDispatcher.invoke(Ejb3MessageDispatcher.java:91) at 
org.glassfish.webservices.EjbWebServiceServlet.dispatchToEjbEndpoint(EjbWebServiceServlet.java:200) at 
org.glassfish.webservices.EjbWebServiceServlet.service(EjbWebServiceServlet.java:131) at 
javax.servlet.http.HttpServlet.service(HttpServlet.java:770) at 
com.sun.grizzly.http.servlet.ServletAdapter$FilterChainImpl.doFilter(ServletAdapter.java:1059) at 
com.sun.grizzly.http.servlet.ServletAdapter$FilterChainImpl.invokeFilterChain(ServletAdapter.java:999) at 
com.sun.grizzly.http.servlet.ServletAdapter.doService(ServletAdapter.java:434) at 
com.sun.grizzly.http.servlet.ServletAdapter.service(ServletAdapter.java:384) at 
com.sun.grizzly.tcp.http11.GrizzlyAdapter.service(GrizzlyAdapter.java:179) at 
com.sun.enterprise.v3.server.HK2Dispatcher.dispath(HK2Dispatcher.java:117) at 
com.sun.enterprise.v3.services.impl.ContainerMapper$Hk2DispatcherCallable.call(ContainerMapper.java:354) at 
com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195) at 
com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:849) at 
com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:746) at 
com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1045) at 
com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:228) at 
com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137) at 
com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104) at 
com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90) at 
com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79) at 
com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54) at 
com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59) at 
com.sun.grizzly.ContextTask.run(ContextTask.java:71) at 
com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532) at 
com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513) at 
java.lang.Thread.run(Thread.java:662) Caused by: com.sun.xml.wss.impl.WssSoapFaultException: Invalid Security Header at 
com.sun.xml.ws.security.opt.impl.util.SOAPUtil.newSOAPFaultException(SOAPUtil.java:159) at 
com.sun.xml.wss.impl.policy.verifier.MessagePolicyVerifier.processSecondaryPolicy(MessagePolicyVerifier.java:220) at 
com.sun.xml.wss.impl.policy.verifier.MessagePolicyVerifier.verifyPolicy(MessagePolicyVerifier.java:144) ... 43 more 
```

**客户端：**

```
Exception in thread "AWT-EventQueue-0" javax.xml.ws.soap.SOAPFaultException: Invalid Security Header
    at com.sun.xml.ws.fault.SOAP11Fault.getProtocolException(SOAP11Fault.java:193)
    at com.sun.xml.ws.fault.SOAPFaultBuilder.createException(SOAPFaultBuilder.java:126)
    at com.sun.xml.ws.client.sei.SyncMethodHandler.invoke(SyncMethodHandler.java:123)
    at com.sun.xml.ws.client.sei.SyncMethodHandler.invoke(SyncMethodHandler.java:93)
    at com.sun.xml.ws.client.sei.SEIStub.invoke(SEIStub.java:144) 
```

我怎样才能解决这个问题 ？

谢谢 。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T16:15:48.923

堆栈跟踪对我来说看起来并不熟悉，但**也许您的问题是证书本身**。

创建证书时，您应该设置一个“服务器名称”。客户端将使用它来检查*证书的 'server name' 是否与 URL 'server name' 匹配*。如果服务器名称不匹配，客户端应该中止连接，因为它可能是被盗的证书！！！。有关更多信息，请查看本[教程](http://docs.oracle.com/cd/E19798-01/821-1841/gjrgy/index.html)

> **以 java 客户端为例：**如果您为客户端创建证书，`'localhost'`当且仅当它使用类似`'https://localhost/stuff...'`. 因此，如果您尝试使用相同的客户端访问相同的应用程序但使用 IP 之类`'https://10.0.0.1/stuff...'`的，则应该会出现验证错误。

*注意：Java Web 服务客户端的默认配置会执行此检查，但如果您想绕过此客户端验证，请查看[此帖子](http://www.mkyong.com/webservices/jax-ws/how-to-bypass-certificate-checking-in-a-java-web-service-client/)*

尝试检查这是否是您遇到的问题。如果是这种情况，您有几种解决方案：

*   为部署应用程序的服务器创建证书
*   禁用客户端验证

*PS：我从来没有在服务器端做一些特别的事情来解决这类问题。安装正确的证书就足够了*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-16T12:38:34.233

就我而言，问题出在 CommandMap 中。需要在 CommandMap 中添加“应用程序/密码值”处理程序，因为 WSIT 在加载 CVDataHandler 类时只执行一次。

有关如何添加的更多详细信息，请参见 com.sun.xml.ws.security.opt.impl.util.CVDataHandler 静态块。

# asp.net - 如何创建语言词典

> ID：11245269
> 
> 赞同：0
> 
> 时间：2012-06-28T13:02:40.060
> 
> 标签：asp.net, localization

我正在构建一个将支持多种语言的网络应用程序。目前，这些单词在 HTML 和 javascript 中用英文硬编码。我想使用包含英语单词作为键和要显示的单词作为值的对象，并让这个字典对象在运行时填充页面。但我的问题与客户端问题无关。

在服务器上存储和维护此字典的最佳方式是什么。到目前为止，我想到了一个数据库表，其中包含英语单词的列和要显示的值的行。然后我会以匿名类型加载一整行，我会在 json 中序列化并发送给客户端。我认为它会起作用，但我想知道这是否是最好的方法，以便字典易于维护。

如果您有一些处理国际化的经验，那么如果您有任何建议，请告诉我。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T13:21:21.743

您可以使用 Resouce 文件为 asp.net web 提供多语言支持。这是在 asp.net 中用于多语言支持的最佳方法。[http://msdn.microsoft.com/en-us/library/fw69ke6f%28v=vs.100%29.aspx](http://msdn.microsoft.com/en-us/library/fw69ke6f%28v=vs.100%29.aspx)

# java - 继承和集合相关的编译错误

> ID：11245272
> 
> 赞同：2
> 
> 时间：2012-06-28T13:02:48.907
> 
> 标签：java, inheritance, collections, interface

我试图弄清楚为什么这段代码无法编译。

我有接口 B 扩展的接口 A。实现接口 B 的类 C。

当我调用一个接受单个 A 类型对象的方法时，我可以传入一个 C 类型的对象，这很好。

当我调用一个接受 A 类型的 java.util.List 的方法时，我无法传入 C 类型的对象的 java.util.List。Eclipse 生成以下错误：Test1 类型中的方法 addAList(List)不适用于参数（列表）

源代码示例如下。

```
import java.util.ArrayList;
import java.util.List;

public class Test1 {

    public void addASingle(A a) {
        return;
    }

    public void addAList(List<A> aList) {
        return;
    }

// **********************************

    public static void main(String[] args) {
        Test1 t = new Test1();

        C c1 = new C();
        List<C> cList = new ArrayList<C>();
        cList.add(c1);

        t.addASingle(c1); // allowed

        t.addAList(cList);  // The method addAList(List<Test1.A>)
    // in the type Test1 is not applicable for the arguments (List<Test1.C>)
    }

// **********************************

    public static interface A {
    }

    public static interface B extends A {
    }

    public static class C implements B {
    }
} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-28T13:06:44.633

A`List<Car>`不是`List<Vehicle>`. 如果是，您可以执行以下操作：

```
List<Car> cars = new ArrayList<>();
List<Vehicle> vehicles = cars;
vehicles.add(new Bicycle()); 
```

你最终会得到一个包含自行车的汽车列表。它会破坏泛型集合的类型安全。

您可能应该使用 a`List<? extends A>`而不是`List<A>`. `List<? extends A>`意思是：一个`List<some class which is A or which extends A>`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T13:04:24.610

它需要 List 并且您正在传递 List，

将其更改为

```
public void addAList(List<? extends A> aList) {
        return;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T13:05:35.580

它需要 A 类型的 List ....将其写入您的方法签名中。

```
public void addAList(List<? extends A> aList) {
        return;
    } 
```

**通过写这个你声明..你的方法需要任何包含 A 的任何子类型的列表。..**这称为通配符。

# mysql - MySQL 是否对外键进行自动索引？

> ID：11245273
> 
> 赞同：1
> 
> 时间：2012-06-28T13:02:50.027
> 
> 标签：mysql, indexing, foreign-keys, myisam, isam

谁能告诉我 MySQL 是否自动为其外键建立索引？

我的 MySQL 正在使用 MyIsam 引擎。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-28T13:05:04.410

MyISAM 根本不支持外键。从[手册](https://dev.mysql.com/doc/refman/5.6/en/ansi-diff-foreign-keys.html)：

> 对于 InnoDB 以外的存储引擎，MySQL Server 解析 CREATE TABLE 语句中的 FOREIGN KEY 语法，但不使用或存储它。...在稍后阶段，还将为 MyISAM 表实现外键约束。

这是针对 MySQL 5.6 的下一个版本，所以还没有实现。旧版本的文本完全相同。

这意味着根本不使用外键结构。您可以在`CREATE TABLE`命令中指定它，但 MySQL 会默默地忽略它。不会从中创建索引，也不会存储它（因此`SHOW CREATE TABLE`命令*不会*显示您尝试创建外键）。

如果您需要外键支持，请考虑使用 InnoDB 存储引擎。[InnoDB](https://dev.mysql.com/doc/refman/5.6/en/innodb-foreign-key-constraints.html)自动为外键创建索引。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T13:05:46.997

MyISAM 引擎不支持外键，只支持 InnoDB 引擎：

[http://dev.mysql.com/doc/refman/5.5/en/innodb-foreign-key-constraints.html](http://dev.mysql.com/doc/refman/5.5/en/innodb-foreign-key-constraints.html)

> InnoDB 需要外键和引用键上的索引，以便外键检查可以快速且不需要表扫描。在引用表中，必须有一个索引，其中外键列按相同顺序列为第一列。如果引用表不存在，则会在引用表上自动创建此类索引。如果您创建另一个可用于强制外键约束的索引，则此索引可能会在稍后被静默删除。index_name，如果给定，如前所述使用。

# python - Python：根据接近度从列表中获取上一项

> ID：11245279
> 
> 赞同：0
> 
> 时间：2012-06-28T13:03:07.393
> 
> 标签：python

有没有办法`list`根据“亲密关系”来获取 a 中的前一个项目？例如：

```
[     Range(start=datetime.datetime(2012, 1, 1, 0, 0, 0), end=datetime.datetime(2012, 1, 15, 0, 0, 0)),
      Range(start=datetime.datetime(2012, 2, 1, 0, 0, 0), end=datetime.datetime(2012, 2, 15, 0, 0, 0)),
      Range(start=datetime.datetime(2012, 3, 1, 0, 0, 0), end=datetime.datetime(2012, 3, 15, 0, 0, 0))] 
```

上面是一个`list`包含`namedtuple`s（称为`Range`），每个包含一个开始日期和一个结束日期。

**我知道这可以使用循环等以线性方式完成，但我想知道它是否可以更有效地完成？**

*示例输入/输出*：

如果我输入`datetime.datetime(2012, 1, 3, 0, 0, 0)`，它应该返回最接近的上一个开始日期时间：

```
Range(start=datetime.datetime(2012, 1, 1, 0, 0, 0), end=datetime.datetime(2012, 1, 15, 0, 0, 0)) 
```

如果我输入`datetime.datetime(2012, 1, 27, 0, 0, 0)`，它应该返回与上面相同的内容：

```
Range(start=datetime.datetime(2012, 1, 1, 0, 0, 0), end=datetime.datetime(2012, 1, 15, 0, 0, 0)) 
```

如果我输入`datetime.datetime(2012, 2, 14, 0, 0, 0)`，它应该返回：

```
Range(start=datetime.datetime(2012, 2, 1, 0, 0, 0), end=datetime.datetime(2012, 2, 15, 0, 0, 0)) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T13:04:54.673

根据定义，集合是[无序的](http://docs.python.org/library/stdtypes.html#set-types-set-frozenset)：

> 集合对象是不同的可散列对象的无序集合。

您想改用列表或元组，并且可能使您的`Range`对象可排序（实现[`__cmp__`方法](http://docs.python.org/reference/datamodel.html#object.__cmp__)，或使用适当的键函数；请参阅[Python 排序](http://wiki.python.org/moin/HowTo/Sorting/)方法）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-28T13:12:15.400

如果您实现`__lt__`或`__cmp__`为您的`Range`对象，您可以执行以下操作：

```
import bisect
position = bisect.bisect_left(range_list, your_input)
if position > 0:    
    nearest_range = range_list[position - 1]
else:
    nearest_range = None 
```

当然，这假设您的列表已经排序。

# objective-c - 函数“ether_ntoa”的隐式声明在 C99 中无效

> ID：11245280
> 
> 赞同：7
> 
> 时间：2012-06-28T13:03:11.713
> 
> 标签：objective-c, ios, xcode

它是从手机中检索 IP 和 Mac 地址的一系列功能的一部分。

```
strcpy(temp, (char *)ether_ntoa((const struct ether_addr *)LLADDR(sdl))); 
```

编辑：不需要等效功能，只是缺少一些标题。

编辑：向 LLADDR(sdl) 添加演员表

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-28T13:09:17.720

当我阅读它时，错误消息并没有声称该函数丢失，只是您没有包含它的声明。（我不**知道**它存在，只是消息有不同的抱怨。）

如果有帮助，`man ether_ntoa`请告诉我：

```
#include <sys/types.h>
#include <sys/socket.h>
#include <net/ethernet.h> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-24T14:52:33.393

我包括以下头文件和成功编译的源代码：

```
#import <arpa/inet.h> 
```

# ruby-on-rails - Ruby：我可以在类方法中使用实例方法吗？

> ID：11245282
> 
> 赞同：14
> 
> 时间：2012-06-28T13:03:14.850
> 
> 标签：ruby-on-rails, ruby, class-method, instance-methods

我有一个包含此类方法的类：

```
def self.get_event_record(row, participant)
  event = Event.where(
      :participant_id   => participant.id,
      :event_type_code  => row[:event_type],
      :event_start_date => self.format_date(row[:event_start_date])
  ).first

  event = Event.new(
      :participant_id   => participant.id,
      :event_type_code  => row[:event_type],
      :event_start_date => self.format_date(row[:event_start_date])
  ) if event.blank?

  event
end 
```

在同一个类中，我还有一个实例方法：

```
def format_date(date)
  parsed_date = date.split('/')

  # if month or day are single digit, make them double digit with a leading zero
  if parsed_date[0].split("").size == 1
    parsed_date[0].insert(0, '0')
  end
  if parsed_date[1].split("").size == 1
    parsed_date[1].insert(0, '0')
  end

  parsed_date[2].insert(0, '20')

  formatted_date = parsed_date.rotate(-1).join("-")
  formatted_date
end 
```

我收到一个“未定义的方法”错误`#format_date`。（起初我尝试过没有`self`前面的）。不能在同一个类的类方法中使用实例方法吗？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-06-28T13:08:04.330

简短的回答是否定的，除非你有类似的东西，否则你不能在类方法中使用类的实例方法：

```
class A
  def instance_method
    # do stuff
  end

  def self.class_method
     a = A.new
     a.instance_method
  end
end 
```

但据我所知，`format_date`不一定是实例方法。所以写 format_date 像

```
def self.format_date(date)
   # do stuff
end 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-28T13:07:49.053

只需创建类方法

```
def self.format_date (..)
  ...
end 
```

如果您需要实例方法，请将其委托给类方法

```
def format_date *args
  self.class.format_date *args
end 
```

而且我认为从类范围调用实例方法不是一个好主意

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-28T13:06:12.183

你可以这样做`YourClassName.new.format_date(your_date)`，虽然我认为很明显你应该重组你的代码——这个方法可能不属于一个实例。你为什么不扩展日期类，或者`format_date`在你正在使用的类上创建一个类方法？

编辑：这里有一些其他的事情要考虑你的代码：

*   您的整个`format_date`方法花费了很多时间来将日期作为字符串进行操作。为什么不使用 Ruby 的日期类？根据您的语言环境，使用`Date.parse`或`Date.strptime`什至`"01/01/2001".to_date`可能有用
*   如果您确实需要创建自己的方法，请考虑为您的方法扩展 String 类：

    ```
    class String
      def to_friendly_formatted_date
        Date.strptime(self, "%d/%m/%y")
      end
    end
    "01/08/09".to_friendly_formated_date 
    ```

*   `find_or_initialize_by`您的类方法正在为我们的辅助方法哭泣：

    ```
    self.get_event_record(row, participant)
      find_or_initialize_by_participant_id_and_event_type_code_and_event_start_date(:participant_id => participant.id, :event_type_code => row[:event_type_code], :event_start_date => row[:event_start_date].to_friendly_formatted_date)
    end 
    ```

天哪，它很长，但它更优雅地实现了你想要做的事情（尽管我愿意争论！）

# python - Python 管理列表

> ID：11245284
> 
> 赞同：0
> 
> 时间：2012-06-28T13:03:22.693
> 
> 标签：python

我想制作一个程序来比较 2 个 .csv 文件，并打印其中一个文件中的行，而不是另一个文件中的行。它基本上可以工作，但是在此程序中执行 2 个任务后它停止工作：/ 我是 Python 初学者。

```
csv=open('c:\Users\***\Desktop\prvi.csv','r')
csv2=open('c:\Users\***\Desktop\drugi.csv','r')

list1=[]
choice=0
loop=0
while loop==0:
    choice=input('Odaberite zeljenu funkciju: \n1)\
 Usporedi Book1 sa Book2\n2) Usporedi Book2 sa Book1 \n3) Print Book1 \n4) Print Book2 \n5) Izlaz \nOdabir: ')
    if choice==1:
        for row in csv:
            if not row in csv2:
                list1.append(row)
                for row in list1:
                    print row
                    del list1[0:len(list1)]
    elif choice==2:
        for row in csv2:
            if not row in csv:
                list1.append(row)
                for row in list1:
                    print row
                    del list1[0:len(list1)]
    elif choice==3:
        for row in csv:
            print row
    elif choice==4:
        for row in csv2:
            print row
    elif choice==5:
        loop=1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T13:04:47.323

您可能需要倒带或重新打开文件，因为在对内容进行一次迭代后，文件“已用尽”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T14:06:20.280

如果您的 csv 文件中没有必须保留在输出中的重复项，我会在此处使用集合并让 Python 计算差异。

[从文档中：](http://docs.python.org/py3k/library/stdtypes.html#set-types-set-frozenset)

> difference(other, ...)
> set - other - ...
> 返回一个新的集合，其中的元素不在其他集合中。

```
csv = set(open(r'c:\Users\***\Desktop\prvi.csv', 'r').read().split('\n'))
csv2 = set(open(r'c:\Users\***\Desktop\drugi.csv', 'r').read().split('\n'))

#...

# get everything in csv1, but not in csv2
diff1 = csv1 - csv2
# get everything in csv2, but not in csv1
diff2 = csv2 - csv1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T13:45:18.943

我做了一个如何阅读这些文件的例子，并且还清理了你的代码，因为它伤害了我的眼睛：D。你`list1`以一种非常奇怪的方式使用。您在其中放入一行，显示该行，然后删除列表的所有内容，该列表始终只有一行，然后移至下一行。在您的问题中，您说您只想显示线条，因此不需要列表。如果您确实需要跟踪列表中的行，则只需`list1.append(row)`直接使用 after `print row`，而无需所有额外的 for 循环和删除。

```
# open lines as list, using read().split('\n') instead of readlines(),
# because readlines() leaves '\n' after the lines.
csv = open(r'c:\Users\***\Desktop\prvi.csv', 'r').read().split('\n')
csv2 = open(r'c:\Users\***\Desktop\drugi.csv', 'r').read().split('\n')
list1 = []    

while True:
    # never use input(), unless you are using python 3
    choice = int(raw_input('Odaberite zeljenu funkciju: \n'
                           '1) Usporedi Book1 sa Book2\n'
                           '2) Usporedi Book2 sa Book1 \n'
                           '3) Print Book1 \n'
                           '4) Print Book2 \n'
                           '5) Izlaz \nOdabir: '))
    if choice == 1:
        for row in csv:
            if not row in csv2:
                list1.append(row)
                print row
        save_file()
    elif choice == 2:
        for row in csv2:
            if not row in csv:
                list1.append(row)
                print row
        save_file()
    elif choice == 3:
        for row in csv:
            print row
    elif choice == 4:
        for row in csv2:
            print row
    elif choice == 5:
        break

def save_file():
    with open('output.txt', 'w') as f:
        f.write('\n'.join(list1)) 
```

# php - 从本地 LAMP 访问 SoapClient 和 file_get_contents

> ID：11245294
> 
> 赞同：2
> 
> 时间：2012-06-28T13:04:13.307
> 
> 标签：php, apache, ubuntu, soap, virtualhost

我在 ubuntu 12.04 下工作。我有一个经典的本地主机设置。阿帕奇 + mysql + php

file_get_contents 在外部 url 上失败，但适用于本地文件或“localhost”

```
file_get_contents('http://google.com');
PHP Warning:  file_get_contents(http://google.com): failed to open stream: HTTP request failed! 
```

soapClient 在外部 url 上失败，但适用于本地文件或“localhost”

```
$wsdl = "http://test.webservices.delijn.be/wsrise/services/travel/WEB-INF/wsdl/RiseWebservices.wsdl";
$client = new SoapClient($wsdl,
array(
        'trace'                 => true,
        'exceptions'            => true,
        'soap_version'          => SOAP_1_1,
        'connection_timeout'    => 600,
        'compression' => SOAP_COMPRESSION_ACCEPT ,
        'encoding'=> 'UTF-8', //ISO-8859-1',
        //'cache_wsdl' => WSDL_CACHE_BOTH,
        //'host'     => "localhost",
        //'proxy_host'     => "localhost",
        //'proxy_port'     => 8080,
    ));

SOAP-ERROR: Parsing WSDL: Couldn't load from 
'http://test.webservices.delijn.be/wsrise/services/travel/WEB-INF/wsdl/RiseWebservices.wsdl' : failed to load external entity "http://test.webservices.delijn.be/wsrise/services/travel/WEB-INF/wsdl/RiseWebservices.wsdl" 
```

allow_url_fopen 和 allow_include_url 在 phpinfo() 中打开（在 /etc/php5/apache2/php.ini 中设置） 防火墙被禁用 apparmor 被禁用

安装了 suhosin 补丁，我在 php.ini 中将 suhosin.simulation 设置为 true

该代码在我的生产和登台服务器上运行良好

我没有想法，没有找到可以检查问题的有趣日志或命令:'(

谢谢你的帮助 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T14:03:58.023

好的 ！我找到了让它工作的方法。

安装 de suhosin-php 包以便能够使用模块 suhosin。在 /etc/php5/con.d/suhosin.conf 中将 suhosin.simulation 指令设置为 on sudo service apache2 restart

肥皂调用仍然非常缓慢，但现在可以正常工作

谢谢你的帮助 ！

# iphone - 更改 rightBarButtonItem 的起始 y 轴

> ID：11245296
> 
> 赞同：2
> 
> 时间：2012-06-28T13:04:16.487
> 
> 标签：iphone, uibarbuttonitem

我在 rightBarButtonItem 上有以下自定义按钮

```
UIButton *button1 = [[UIButton alloc] init];
button1.frame=CGRectMake(0,0,105,30);
[button1 setBackgroundImage:[UIImage imageNamed: @"image1.png"] forState:UIControlStateNormal];
[button1 addTarget:appDelegate action:@selector(Open_Link1) forControlEvents:UIControlEventTouchUpInside];

self.navigationItem.rightBarButtonItem = [[UIBarButtonItem alloc]initWithCustomView:button1];
[button1 release]; 
```

我需要将 rightBarButtonItem 向上移动 2 px ...

我试过设置它但不起作用！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-28T13:35:46.783

`button1.imageEdgeInsets = UIEdgeInsetsMake(-4, 0, 0, 0);`

这里的答案：[我可以改变导航栏项目的位置吗？](https://stackoverflow.com/questions/9866062/can-i-change-the-position-of-navigationbar-item)

*请注意，您更改了要分配给 rightBarButtonItem 的按钮的插图，而不是 rightBarButtonItem 本身。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T13:08:12.897

尝试将其更改`button1.frame=CGRectMake(0,0,105,30);`为`button1.frame=CGRectMake(0,-2,105,30);`

# iphone - SomeService UISearchBar

> ID：11245305
> 
> 赞同：0
> 
> 时间：2012-06-28T13:04:47.220
> 
> 标签：iphone, uisearchbar

我有一个教程中的代码：

```
// Do the search and show the results in tableview
// Deactivate the UISearchBar

// You'll probably want to do this on another thread
// SomeService is just a dummy class representing some 
// api that you are using to do the search
NSArray *results = [SomeService doSearch:searchBar.text]; 
```

什么是 SomeService 以及如何下载它？

（我在谷歌搜索。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T13:06:24.850

这很可能是一个演示课，你将无法在网上找到它，你必须参考同课教程才能获得这门课

正如评论所说

> 只是一个代表一些的虚拟类

所以没有你会发现的类被称为`SomeService`

# android - 当电视在谷歌电视中运行时，音频焦点集中在我的应用上

> ID：11245312
> 
> 赞同：0
> 
> 时间：2012-06-28T13:04:56.083
> 
> 标签：android, google-tv, android-audiomanager

当电视正在播放频道并且我的应用程序启动并在进入后台时失去焦点时，我需要我的应用程序来获得音频焦点。我试过了，但不能在谷歌电视上工作。我试过 mAudioManager.requestAudioFocus(this,AudioManager.STREAM_MUSIC,AudioManager.AUDIOFOCUS_GAIN); 它在 device.ie 中工作的音乐在应用程序启动时停止。但不适用于带有任何参数的谷歌电视。音频焦点的步骤是：

1.在主应用程序中

```
 AudioManager  mAudioManager = (AudioManager) getSystemService(Context.AUDIO_SERVICE);
requestFocus(); 
```

2.  在 onresume()

    ```
    protected void onResume() {
        super.onResume();
        requestFocus();
    } 
    ```

3.在 onStop()

```
 protected void onStop(){
        abandonFocus();
        super.onStop();

        Log.e("APPLICATION", "APPLICATION onStop");
    } 
```

4.在 onDestroy()

```
public void onDestroy(){
    super.onDestroy();
    //Log.e("APPLICATION", "APPLICATION onDestroy");
    abandonFocus();
} 
```

5.AudioFocus的方法。

```
/** Requests audio focus. Returns whether request was successful or not. */
        public boolean requestFocus() {
         return  AudioManager.AUDIOFOCUS_REQUEST_GRANTED ==
                mAudioManager.requestAudioFocus(this, AudioManager.STREAM_DTMF, AudioManager.AUDIOFOCUS_GAIN);

        }

        /** Abandons audio focus. Returns whether request was successful or not. */
        public boolean abandonFocus() {
            return AudioManager.AUDIOFOCUS_REQUEST_GRANTED == mAudioManager.abandonAudioFocus(this);
        }

        /**
         * Called by AudioManager on audio focus changes. We implement this by calling our
         * MusicFocusable appropriately to relay the message.
         */
        public void onAudioFocusChange(int focusChange) {

            switch (focusChange) {
                case AudioManager.AUDIOFOCUS_GAIN:
                    Log.e("AUDIOFOCUS","AUDIOFOCUS_GAIN");
                    break;
                case AudioManager.AUDIOFOCUS_LOSS:Log.e("AUDIOFOCUS","AUDIOFOCUS_LOSS");
                case AudioManager.AUDIOFOCUS_LOSS_TRANSIENT:Log.e("AUDIOFOCUS","AUDIOFOCUS_LOSS_TRANSIENT");

                    break;
                case AudioManager.AUDIOFOCUS_LOSS_TRANSIENT_CAN_DUCK:Log.e("AUDIOFOCUS","AUDIOFOCUS_LOSS_TRANSIENT_CAN_DUCK");
                    break;
                 default:
            }
        } 
```

任何人都可以在这方面帮助我。谁在谷歌电视中做了音频焦点。

谢谢，巴拉特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T20:35:36.750

我在这里尝试过，并在 Google TV 上获得/接收音频焦点。问题可能是在您的应用程序之前运行的应用程序没有释放音频焦点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-03T17:17:44.933

音频焦点确实适用于 Google TV，但并非所有应用程序都尊重音频焦点。我写了一篇关于如何正确使用音频焦点的博客文章（[http://android-developers.blogspot.com/2013/08/respecting-audio-focus.html](http://android-developers.blogspot.com/2013/08/respecting-audio-focus.html)），但是对于忽略或不忽略它的应用程序没有解决方案使用音频焦点。

# http - 通过 curl 通过服务器脚本下载文件

> ID：11245322
> 
> 赞同：1
> 
> 时间：2012-06-28T13:05:35.427
> 
> 标签：http, curl, escaping

所以我正在尝试下载一个在浏览器中运行良好的文件，但使用 curl 将无法正常工作：

> $ curl [http://www.partner.viator.com/partner/admin/tools/links_feeds/downloadFeed.jspa?feed=Products&PUID=10869](http://www.partner.viator.com/partner/admin/tools/links_feeds/downloadFeed.jspa?feed=Products&PUID=10869) -L --O full_viator_product_list.zip

我得到：

```
[1] 10097
-L: command not found 
```

我究竟做错了什么？

*（只是为了证明我已经做了一些功课，[这里](https://stackoverflow.com/questions/9122914/download-a-file-using-curl-from-a-php-server)的问题没有帮助。）*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T13:13:41.303

看到`&`网址中的？这就是它出错的地方。在 Linux 命令行上，这基本上意味着“在后台运行命令，然后继续执行下一个命令（如果有）”。
如果将整个 url 放在引号中，它将起作用：

```
curl 'http://www.partner.viator.com/partner/admin/tools/links_feeds/downloadFeed.jspa?feed=Products&PUID=10869' -L --O full_viator_product_list.zip
```

使用这样的命令时，请确保始终引用或转义它们。如果你不这样做，可能会发生比这个问题更糟糕的事情。

# php - 选择框中的值一旦单击就无法选择

> ID：11245323
> 
> 赞同：0
> 
> 时间：2012-06-28T13:05:36.297
> 
> 标签：php, javascript, select

我做了一个技能选择框..里面列出了技能..如果我们选择它一次，它将被添加到 DIV 中..n 我想要的第一件事是它不能再次选择选择框，如果一旦它存在于 DIV 中......n div 中有一个“x”......如果它被点击......那个 div 将被删除......现在我的意思是。我想要的第二件事是当通过单击“X”删除DIV的值时......选择框中的相同值将再次出现（我们可以选择它（启用））......

这是我在这个 tuts 中使用的 javascript..

```
 <script type="text/javascript">
  var i=0;
  function generateTextbox(){
   if(i<5){
var d=document.getElementById("div");
    var skilldiv=document.getElementById("skill").value;
    d.innerHTML+="<div>"+skilldiv+"<a  class='close_notification' onclick='this.parentNode.parentNode.removeChild(this.parentNode); '>X</a></div>";
 i=i+1;
}
 }

  </script> 
```

选择框值是动态的..

```
<select id="skill" name="skill" multiple="multiple" style="float:left; height:160px; width:375px;" onchange="generateTextbox();">
<?php    foreach ( $fivesdrafts as $fivesdraft ) 
{
$fivesdraft->skill_name;
$fivesdraft->skill_id;

?>
 <option value="<?php echo $fivesdraft->skill_name; ?>" onclick="this.disabled='disabled';"  > <?php echo    $fivesdraft->skill_name; ?></option>

       <?php } ?>                 
                  </select>
 }

</script>

<?php } ?> 
```

这是单击它们后我的选择框值出现的div...

```
<div id="div"></div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T13:21:39.917

你想要这样的东西吗：http: [//aloksah.org/listbox/listbox.html](http://aloksah.org/listbox/listbox.html)

**jQuery代码：**

```
// function: UnAssignment
function assignList()
{
    // loop through first listbox and append to second listbox
    $('#firstList :selected').each(function(i, selected){
        // append to second list box
        $('#secondList').append('<option value="'+selected.value+'">'+ selected.text+'</option>');
        // remove from first list box
        $("#firstList option[value='"+ selected.value +"']").remove();
    });
}
// function: UnAssignment
function unassignList()
{
    // loop through second listbox and append to first listbox
    $('#secondList :selected').each(function(i, selected){
        // append to first list box
        $('#firstList').append('<option value="'+selected.value+'">'+ selected.text+'</option>');
        // remove from second list box
        $("#secondList option[value='"+ selected.value +"']").remove();
    });
} 
```

# ios - 从 UIImagePickerControllerReferenceURL 访问 ext

> ID：11245330
> 
> 赞同：0
> 
> 时间：2012-06-28T13:05:55.983
> 
> 标签：ios

如何仅访问 UIImagePickerControllerReferenceURL 的 MIME ext 部分？这是我在 NSLog -(void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info 时得到的

```
UIImagePickerControllerReferenceURL = "assets-library://asset/asset.PNG?id=F61B754A-705C-4BFB-9965-DE34C7B93A2B&ext=PNG"; 
```

我只想访问 MIME 类型。当我使用以下方式将图像发送到我的网络服务器时：

```
NSData *imageData = UIImageJPEGRepresentation(_selectedImage, 1.0);

//non-important ASIFormDataRequest set-up
[request setData:imageData withFileName:uniqueString andContentType:@"image/jpeg" forKey:@"photo"]; 
```

画面一团糟。但是当我使用：

```
NSData *imageData = UIImagePNGRepresentation(_selectedImage);

//non-important ASIFormDataRequest set-up
[request setData:imageData withFileName:uniqueString andContentType:@"image/png" forKey:@"photo"]; 
```

图片很好。但是我上传的所有照片都不会是PNG。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T17:40:47.163

[Dimitris 在这个线程](https://stackoverflow.com/questions/2225814/nsurl-pull-out-a-single-value-for-a-key-in-a-parameter-string)上的回答就像一个魅力。我现在要继续打字，这样就不会被降级为微不足道的答案，然后自动成为评论。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-11-16T12:58:35.437

要快速获取图像扩展名：

```
 func imagePickerController(picker: UIImagePickerController, didFinishPickingMediaWithInfo info: [String : AnyObject]) {
            if let pickedImage = info[UIImagePickerControllerOriginalImage] as? UIImage {
                let assetPath = info[UIImagePickerControllerReferenceURL] as! NSURL
                let ext = assetPath.absoluteString.componentsSeparatedByString("ext=")[1]
                 print(ext)
        }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-03T09:40:50.420

请尝试以下代码以从中`extension`提取`UIImagePickerControllerReferenceURL`

```
NSURL *referenceURL = @"assets-library://asset/asset.PNG?id=F61B754A-705C-4BFB-9965-DE34C7B93A2B&ext=PNG"; //put your reference URL here
NSString *fileExtension = [referenceURL.absoluteString componentsSeparatedByString:@"ext="][1]; 
```

# unit-testing - 如何使用 Moq 验证 Enterprise Library Logging？

> ID：11245331
> 
> 赞同：2
> 
> 时间：2012-06-28T13:05:57.500
> 
> 标签：unit-testing, testing, logging, moq, enterprise-library

我想创建一个单元测试来验证 Logger.Write 命令在我的一个 MVC 控制器中使用正确的消息执行。

我可以模拟 Logger 写入的 Listener，但我不知道如何访问存储的消息。例如，

```
var mockListener = new Mock<MyTraceListener>();
// the .Write method is void so I can't use .Returns() on my mock
mockListener.Setup(listener => listener.Write(It.IsAny<string>()))

MyController controller = new MyController();
MyController.Index(); 
```

// 然后 Index 方法调用以下 Logger.Write() 到写入 MyTraceListener 的类别：

```
Logger.Write("test message", "MyCategory"); 
```

这个写入记录器的命令不会返回输入字符串或将其存储到一个参数中，以便我使用断言语句进行验证。我可以使用 Moq 验证或设置之一或 .when（无论这是什么）函数来获取记录的消息，或者至少检查它是否已执行？

最好，我想将日志条目存储到我的单元测试中的一个变量中，以便我可以断言：

```
Assert.AreEqual(loggedMessage, "test message"); 
```

如果有人知道这样做的策略，我将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T22:44:08.247

假设您使用的是 Entlib 5.0，那么您已经有了一个模拟点。与其直接使用 Logger.Write，不如将 LogWriter 的实例注入到您的控制器中。然后，您可以在测试中模拟 LogWriter 对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T13:33:01.623

您希望使用回调作为将 Write 方法中的输入返回到单元测试的一种方式。

因为 Loggers 是静态的，所以您必须包装对这些静态方法的调用才能在测试中使用 Moq。下面的示例类应该是你需要做的所有事情。您还必须更新代码以使用包装器，这可能会很痛苦。

这是实现此目的的示例测试和类结构。

```
public class Logger
{ 
   public virtual void Write( string message, string category )
   {
      Loggers.Write( message, category );
   }
}

[TestMethod]
public void SampleTest()
{
   string input = string.Empty;

   var mockLogger = new Mock<Logger>();
   mockLogger.Setup( l => l.Write( It.IsAny<string>(), It.IsAny<string>() ) ).Callback( ( string message, string category ) => input = message );

   mockLogger.Object.Write( "test", "category" );

   Assert.AreEqual( "test", input );
} 
```

请注意，我使用的是最小起订量版本 4.0.10827.0。

我希望这有帮助！

# java - Java FTPS 问题

> ID：11245335
> 
> 赞同：1
> 
> 时间：2012-06-28T13:06:27.420
> 
> 标签：java, apache, ftps

仍然没有答案。任何和所有的帮助表示赞赏！

我正在使用 Apache Commons-Net3.1 并试图让 FTPS 工作。当我尝试连接时，控制台中出现以下错误：

---编辑：代码和错误更新---

```
java.net.ConnectException: Connection refused: connect
at java.net.DualStackPlainSocketImpl.connect0(Native Method)
at java.net.DualStackPlainSocketImpl.socketConnect(Unknown Source)
at java.net.AbstractPlainSocketImpl.doConnect(Unknown Source)
at java.net.AbstractPlainSocketImpl.connectToAddress(Unknown Source)
at java.net.AbstractPlainSocketImpl.connect(Unknown Source)
at java.net.PlainSocketImpl.connect(Unknown Source)
at java.net.SocksSocketImpl.connect(Unknown Source)
at java.net.Socket.connect(Unknown Source)
at org.apache.commons.net.SocketClient.connect(SocketClient.java:171)
at org.apache.commons.net.SocketClient.connect(SocketClient.java:192)
at org.apache.commons.net.SocketClient.connect(SocketClient.java:285) 
```

我确定我只是没有正确设置它。这是我的代码。任何正确方向的观点都将不胜感激。（顺便说一下，我正在尝试通过端口 990 连接）。“client.connect(ftpHost);”行的代码错误

```
import org.apache.commons.net.ftp.FTPSClient;
import java.io.IOException;
import java.io.FileOutputStream;

public class MyFTP {
 public void downloadFTP(){

        FTPSClient client = new FTPSClient(false);

        FileOutputStream fos = null;
        client.setTrustManager(TrustManagerUtils.getAcceptAllTrustManager());

        try {
            client.connect(ftpHost);
            client.enterLocalPassiveMode();
            client.login(ftpUser, ftpPassword);

            String filename = "liveGUIfile.txt";
            fos = new FileOutputStream(filename);

            client.retrieveFile("/root/Desktop/" + filename, fos);
        } catch (IOException e) {
            e.printStackTrace();
        } finally {
            try {
                if (fos != null) {
                    fos.close();
                }
                client.disconnect();
            } catch (IOException e) {
                e.printStackTrace();
            }
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T13:46:16.630

FTPS 可能是显式的或隐式的，您使用显式：

> ```
> FTPSClient client = new FTPSClient(false); 
> ```

但是显式的通常使用 21 端口，就像 FTP 一样，隐式的使用 990 端口。所以尝试连接到21端口或使用`new FTPSClient(true)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T22:14:36.570

```
javax.net.ssl.SSLException: Unrecognized SSL message, plaintext connection? 
```

这说明了一切。明文连接。您正在连接到 FTP 服务器，而不是 FTPS 服务器。它就在错误消息中。

# asp.net - SoapHttpClientProtocol.ReadResponse - 请求失败，HTTP 状态 401：未经授权

> ID：11245336
> 
> 赞同：1
> 
> 时间：2012-06-28T13:06:29.273
> 
> 标签：asp.net, authentication, reporting-services, authorization, windows-server-2003

我有一个 ASP.NET (v2.0) Web 应用程序，它使用对 SQL Server Reporting Services 208 R2 实例的引用（使用 ReportService2010.asmx 服务端点）。Web 应用程序托管在 ServerA 上，而 Reporting Services 实例托管在 ServerB 上。ServerA 正在运行 Windows Server 2003 (IIS6)，ServerB 正在运行 Windows Server 2008 R2。

Web 应用程序配置为使用 Windows 身份验证并打开模拟。当我在 ServerA 上本地运行 Web 应用程序（使用远程桌面连接）时，它可以工作，但是当我从桌面计算机（Windows XP）运行时，我收到以下错误：

> ## “/MyWebApp”应用程序中的服务器错误。
> 
> 请求失败，HTTP 状态为 401：未授权。说明：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。
> 
> 异常详细信息：System.Net.WebException：请求失败，HTTP 状态 401：未授权。
> 
> 源错误：
> 
> 在执行当前 Web 请求期间生成了未处理的异常。可以使用下面的异常堆栈跟踪来识别有关异常起源和位置的信息。
> 
> 堆栈跟踪：
> 
> [WebException：请求失败，HTTP 状态 401：未授权。] System.Web.Services.Protocols.SoapHttpClientProtocol.ReadResponse（SoapClientMessage 消息，WebResponse 响应，流 responseStream，Boolean asyncCall）+431289
> System.Web.Services.Protocols.SoapHttpClientProtocol。 Invoke(String methodName, Object[] parameters) +204
> ReportingServices.ReportingService2010.ListChildren(String ItemPath, Boolean Recursive) +81 Default.LoadReports() +54
> Default.Page_Load(Object sender, EventArgs e) +224
> System.Web.Util .CalliHelper.EventArgFunctionCaller(IntPtr fp, Object o, Object t, EventArgs e) +14
> System.Web.Util.CalliEventHandlerDelegateProxy.Callback(Object sender, EventArgs e) +35 System.Web.UI.Control.OnLoad(EventArgs e) +99
> System.Web.UI.Control.LoadRecursive() +50
> System.Web.UI.Page.ProcessRequestMain（布尔型 includeStagesBeforeAsyncPoint，布尔型 includeStagesAfterAsyncPoint）+627
> 
> * * *
> 
> 版本信息：Microsoft .NET Framework 版本：2.0.50727.3634；ASP.NET 版本：2.0.50727.3634

加载报告方法：

```
private void LoadReports()
{
    ReportingService2010 rService = new ReportingService2010();

    rService.Credentials = System.Net.CredentialCache.DefaultCredentials;
    CatalogItem[] catalogItems;
    catalogItems = rService.ListChildren(ReportPath, true);

    BuildTree(catalogItems);
} 
```

ServerA 上的应用程序事件日志包含以下附加详细信息：

```
Event Type: Warning
Event Source:   ASP.NET 2.0.50727.0
Event Category: Web Event 
Event ID:   1309
Date:       28/06/2012
Time:       11:25:16
User:       N/A
Computer:   ServerA
Description:
Event code: 3005 
Event message: An unhandled exception has occurred. 
Event time: 28/06/2012 11:25:16 
Event time (UTC): 28/06/2012 10:25:16 
Event ID: 11f6bec3e91045229f4e34a5d2de78e9 
Event sequence: 4 
Event occurrence: 1 
Event detail code: 0 

Application information: 
    Application domain: /LM/W3SVC/1/Root/MyWebApp-1-129853527126453497 
    Trust level: Full 
    Application Virtual Path: /MyWebApp 
    Application Path: c:\inetpub\wwwroot\MyWebApp\ 
    Machine name: ServerA 

Process information: 
    Process ID: 1180 
    Process name: w3wp.exe 
    Account name: NT AUTHORITY\NETWORK SERVICE 

Exception information: 
    Exception type: WebException 
    Exception message: The request failed with HTTP status 401: Unauthorized. 

Request information: 
    Request URL: http://ServerA/MyWebApp/Default.aspx 
    Request path: /MyWebApp/Default.aspx 
    User host address: 192.168.100.130 
    User: DOMAIN\mylogin 
    Is authenticated: True 
    Authentication Type: Negotiate 
    Thread account name: NT AUTHORITY\NETWORK SERVICE 

Thread information: 
    Thread ID: 1 
    Thread account name: NT AUTHORITY\NETWORK SERVICE 
    Is impersonating: False 
    Stack trace:    
   at System.Web.Services.Protocols.SoapHttpClientProtocol.ReadResponse(SoapClientMessage message, WebResponse response, Stream responseStream, Boolean asyncCall)
   at System.Web.Services.Protocols.SoapHttpClientProtocol.Invoke(String methodName, Object[] parameters)
   at ReportingServices.ReportingService2010.ListChildren(String ItemPath, Boolean Recursive)
   at Default.LoadReports()
   at Default.Page_Load(Object sender, EventArgs e)
   at System.Web.Util.CalliHe.EventArgFunctionCaller(IntPtr fp, Object o, Object t, EventArgs e)
   at System.Web.Util.CalliEventHandlerDelegateProxy.Callback(Object sender, EventArgs e)
   at System.Web.UI.Control.OnLoad(EventArgs e)
   at System.Web.UI.Control.LoadRecursive()
   at System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-28T16:22:10.027

### 启用身份验证委派

使用 Active Directory 用户和计算机 Microsoft 管理控制台（开始 > 运行 > “dsa.msc”），打开 ServerA 服务器条目的属性。在委派下，选择*信任此计算机以委派给任何服务（仅限 Kerberos）*。

### 配置 SPN

使用以下命令注册服务主体名称 (SPN)：

```
setspn -S http/ServerB ReportingServicesServiceAccount
setspn -S http/ServerB.domain.com ReportingServicesServiceAccount 
```

`ReportingServicesServiceAccount`用于在 ServerB 上运行 Reporting Services 服务的服务帐户在哪里。

# javascript - 在另一场胜利中获得 Titanium.App.Properties 或使其全球可用

> ID：11245340
> 
> 赞同：-1
> 
> 时间：2012-06-28T13:06:36.723
> 
> 标签：javascript, properties, titanium-mobile, appcelerator-mobile

如果您没有花时间理解我的问题或没有合理的答案，请不要回答这个问题。我有一些离题很远的答案，我想我很清楚地解释了我的问题。这个问题会让我发疯，还是有人在 Titanium.App.Properties 上有一个直截了当的答案？

我有一个登录表单，将用户名存储在一个中：

> Titanium.App.Properties.setString("userName",e.value);

和另一个密码：

> Titanium.App.Properties.setString("passWord",e.value);

即使我关闭窗口、关闭并重新启动应用程序，表单 TextFields 也会保存这些值（在商店之后）。这是因为 App.Properties.getString("value"); 我想…。？！但是当我用它的 App.Properties.getString("value"); 复制孔形式时 到另一个窗口，TextFields 是空的，根本不包含任何值。我知道属性字符串必须在 App.Properties 中的某个位置，但是如何抓住它并在应用程序的另一个位置使用它？

我的问题是：如何从我的

> var userNameValue = Titanium.App.Properties.getString("userNameValue");

可以在另一个窗口中使用还是在洞应用程序（全局）中可用？我怎样才能抓住它并在应用程序的另一个地方使用它？我认为没有充分的理由将这些（仅单独的单词）放入对象（JSON）中，因为 userName 仅包含一个电子邮件地址，而 passWord 仅包含连续的字母或数字。但是，如果您的意思是我也有，-我如何从我的 TextField 设置它并将它放在我应用程序的其他地方的另一个 TextField 中。到目前为止，我还没有运气。我希望你能帮助我，我可以保持理智。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T14:33:39.870

> Titanium.App.Properties.getString("userNameValue");

这是全局可用的，Titanium 对象的任何属性都可以在每个文件中访问。

但是如果由于某种原因这对您不起作用并且您想设置一个全局变量，您可以执行以下操作：

*   创建一个名为 myGlobals.js//或其他任何文件的文件，

> //把它放在那里，例如
> var myProperties = {};

*   在任何你想使用它的文件中写在第一行

> ```
> Ti.include('myGlobals.js'); 
> ```

然后你可以让一个属性全局可用，例如在 app.js 中应用初始化的地方写这个

> myProperties.Username = Titanium.App.Properties.getString("userName");

然后您可以通过访问属性 myProperties.Username 来获取每个文件中的值

> ```
> //of course the Propertie has to be set before you can get them
> ( Titanium.App.Properties.setString("userName",e.value); ) //like you do it 
> ```

但是，Titanium.App.Properties.getString("userName"); 无论如何应该可以从任何文件中获得，（但你可以试试这个，虽然我不认为这样做很好）

我有一个类似的问题，这没有从 ios 设置中设置的属性中获得任何值作为默认值。

我不得不去设置并手动更改或编辑默认值，然后在重新启动后

> Titanium.App.Properties.getString("userName"); 返回应有的值，我希望这对您有帮助=)

## 回复评论

我很高兴能帮助你 =)

是的，您可以像这样使用焦点事件处理程序：

```
textfield.addEventListener("focus",function(){
textfield.value = "Test"; 
}); 
```

除此之外，您是否对两个窗口使用相同的文本字段？喜欢

```
var Textfield = Ti.Ui.createTextField({...}); 
```

并将其添加到 2 个不同的窗口？

```
win1.add(Textfield);
win2.add(Textfield); 
```

这导致我在 TableViewRows 中出现标签问题，在 TableView 中使用相同的行 2 次

仅在 1 个标签上显示的文本，有时它会切换标签我认为您不能将一个相同的钛对象添加到多个其他对象

也许这可能是罪魁祸首，不知道只是一个想法=）

# performance - MVC-Mini Profiler 与 DotTrace 不一致

> ID：11245341
> 
> 赞同：4
> 
> 时间：2012-06-28T13:06:39.153
> 
> 标签：performance, asp.net-mvc-3, controller, mvc-mini-profiler

我一直试图找到一个瓶颈，我相信它在我们的控制器中（我怀疑是 Unity IoC）。

通过使用 MVC-Mini-Profiler，我发现了一种需要 500 毫秒来完成最简单任务的方法。

然而，在使用 DotTracer 跟踪到这个之后 - 执行线程似乎只需要 16 毫秒......

有人遇到过这个吗？

请注意 - Web.Config 中的调试模式设置为 false

![点追踪器](../Images/323a0372a18e5ffed03c2c908078b911.png)

![迷你探查器](../Images/2bc1053e4770f9cf9e4226ebea33be99.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T15:30:22.990

我发现了这个问题的解决方案 - 事实证明这一切都与会话相关。

因为我同时向同一个服务器发出了 4 个 HTTP 请求，所以会话对象每次都被锁定，因此一旦会话对象被解锁，我的请求就会被排队并处理。

添加：

```
[SessionState(SessionStateBehavior.Disabled)] 
```

到控制器作为属性强制 MVC2 向上变为无会话，从而将性能提高十倍

（答案来自：

[为什么对同一个 ASP.NET MVC 操作的多个同时 AJAX 调用会导致浏览器阻塞？](https://stackoverflow.com/questions/4428413/why-would-multiple-simultaneous-ajax-calls-to-the-same-asp-net-mvc-action-cause))

# xml - 使用 XSLT 过滤 XML 标记

> ID：11245346
> 
> 赞同：0
> 
> 时间：2012-06-28T13:07:00.023
> 
> 标签：xml, xslt, ssis, xls

我有以下 XML 代码。

您会注意到标签描述重复，但具有不同的属性。

我正在使用 XSLT 尝试删除具有 enabled 属性的 Description 标记。

```
<Batch>
- <Promotion>
  <LastUpdated>2008-01-22T11:58:05+00:00</LastUpdated> 
  <MajorVersion>1</MajorVersion> 
  <MinorVersion>29</MinorVersion> 
  <PromotionID>000873</PromotionID> 
  <Description enabled="1">*P* Free Mistletoe</Description> 
  <Description country="GB" language="en" variant="">WANTED LINE 1</Description>
 </Promotion>
 <Promotion>
   <LastUpdated>2008-01-22T11:58:05+00:00</LastUpdated> 
   <MajorVersion>1</MajorVersion> 
   <MinorVersion>29</MinorVersion> 
   <PromotionID>000874</PromotionID> 
   <Description enabled="1">*P* Free Mistletoe</Description> 
   <Description country="GB" language="en" variant="">WANTED LINE 2</Description>
 </Promotion> 
</batch> 
```

这就是我想要达到的目标，还有其他标签，它是根据我试图解决的属性删除一行。

```
- <promotions>
-   <promotion>
      <promotionID>000873</promotionID> 
      <description country="GB" language="en" variant="">WANTED LINE 1</description>
    </promotion>
-   <promotion> 
      <promotionID>000874</promotionID> 
      <description country="GB" language="en" variant="">WANTED LINE 2</description>
    </promotion> 
  </promotions> 
```

我正在使用的 XSLT 代码是

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output method="xml" indent="yes"/>

<xsl:template match="node()|@*">
  <xsl:copy>
  <xsl:apply-templates select="node()|@*"/>
  </xsl:copy>
</xsl:template>
<xsl:template match="//promotion/Description[@country='GB']"/> 
<xsl:template match="/"> 

<promotions> 
<xsl:for-each select="Batch/Promotion">  
  <promotion>
    <promotion_id><xsl:value-of select="PromotionID"/></promotion_id>    
    <description><xsl:value-of select="Description"/></description>
  </promotion>
</xsl:for-each>   
</promotions>   
</xsl:template>
</xsl:stylesheet> 
```

如果有人能指出我正确的方向，我将不胜感激。

保罗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T13:37:51.650

不要使用`for-each`and `value-of`，而是考虑使用更多模板。

请注意下面代码中的注释。

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output method="xml" indent="yes" />
<xsl:strip-space elements="*"/>

<xsl:template match="node()|@*">  <!-- identity template: copies everything by default -->
  <xsl:copy><xsl:apply-templates select="node()|@*"/></xsl:copy>
</xsl:template>

<!-- instead of an explicit for-each, just apply templates -->
<xsl:template match="/">
<promotions><xsl:apply-templates/></promotions>
</xsl:template>

<!-- We ignore Batch, but apply templates on contents -->
<xsl:template match="Batch"><xsl:apply-templates/></xsl:template>

<!-- Rename the Promotion element -->
<xsl:template match="Promotion">
<promotion><xsl:apply-templates/></promotion>
</xsl:template>

<!-- we make an exception for subelements of Promotion: here we delete by default -->
<!-- we give this template a lower priority so we can override it with other rules -->
<xsl:template match="Promotion/*" priority="-0.5"/>

<!-- The templates that follow are exceptions to the "Promotion/*" no-copy template: -->

<!-- Only copy Description elements with the right country code -->
<!-- Remember that the "Promotion/*" template will delete any other Description elements for us -->
<xsl:template match="Description[@country='GB']">
<description><xsl:apply-templates/></description>
</xsl:template>

<!-- Rename the PromotionID element -->
<xsl:template match="PromotionID">
   <promotion_id><xsl:apply-templates/></promotion_id>
</xsl:template>

</xsl:stylesheet> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T13:18:10.770

通常，为了删除一个元素，您必须指定一个没有任何内容的模板。在您的情况下，这可能是：

```
<xsl:template match="/Batch/Promotion/Description[@enabled = '1']"/> 
```

然而，在您的 XSLT 代码中，您有一些特殊的情况，即构建自己的`<description>`元素。为了准确获取所需`<Description>`元素的值，请在您的元素中选择它`<xsl:value-of>`：

```
<description><xsl:value-of select="Description[@country = 'GB']"/></description> 
```

这就是您在问题中描述的内容，但是您的预期结果代码暗示您已经想要复制`<Description>`元素的属性？在这种情况下，我会选择这个解决方案`<xsl:copy-of>`：

```
<description><xsl:copy-of select="Description[@country = 'GB']/node()|Description[@country = 'GB']/@*"/></description> 
```

它复制元素的全部内容`<Description>`( `node()`) 以及它的任何属性 ( `@*`)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T13:42:46.903

尝试使用`<xsl:value-of select="Description[not(string(@enabled))]"/>`而不是`<xsl:value-of select="Description"/>`.

完整示例：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output method="xml" indent="yes"/>
<xsl:template match="node()|@*">
    <xsl:copy>
        <xsl:apply-templates select="node()|@*"/>
    </xsl:copy>
</xsl:template>
<xsl:template match="//promotion/Description[@country='GB']"/>
<xsl:template match="/">
    <promotions>
        <xsl:for-each select="Batch/Promotion">
            <promotion>
                <promotion_id>
                    <xsl:value-of select="PromotionID"/>
                </promotion_id>
                <description>
                    <xsl:value-of select="Description[not(string(@enabled))]"/>
                </description>
            </promotion>
        </xsl:for-each>
    </promotions>
</xsl:template> 
```

结果是：

```
<?xml version="1.0" encoding="UTF-16"?>
    <promotions>
    <promotion>
        <promotion_id>000873</promotion_id>
        <description>WANTED LINE 1</description>
    </promotion>
    <promotion>
        <promotion_id>000874</promotion_id>
        <description>WANTED LINE 2</description>
    </promotion>
</promotions> 
```

也许它可以帮助你。

马可

# java - JAXB 将分组元素添加到列表中，.NET 之类的

> ID：11245347
> 
> 赞同：1
> 
> 时间：2012-06-28T13:07:02.850
> 
> 标签：java, jaxb, xml-serialization

我正在使用在 .NET 应用程序中生成和使用的 xml 文件。

我需要用 Java 反序列化这个文件并选择使用 JAXB。

但是，在尝试创建匹配类之后，我发现了一个主要区别。

当有一个

```
@XmlRootElement
public class SomeClass{ 
    List<NestedClass> classes;
} 
```

我得到以下结构：

```
 <SomeClass>
        ...
        <NestedClasses>
        ...
        </NestedClasses>
        <NestedClasses>
        ...
        </NestedClasses>
    </SomeClass> 
```

与所需的现有结构相反：

```
<SomeClass>
        ...
        <NestedClasses>
          <NestedClass>
          ...
          </NestedClass>
          <NestedClass>
          ...
          </NestedClass>
        </NestedClasses>
    </SomeClass> 
```

有没有一种方法可以在不添加仅包含嵌套类列表的类的情况下获得所需的结构？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T13:16:40.087

您将需要一个包装该集合的类。要获得所需的映射，您可以使用`@XmlElementWrapper`注释来指定应使用的分组元素。然后你可以使用`@XmlElement`注解来指定代表集合中项目的元素的名称：

```
@XmlRootElement
public class SomeClass{ 
    @XmlElementWrapper
    @XmlElement(name="NestedClass")
    List<NestedClass> classes;
} 
```

**了解更多信息**

*   [http://blog.bdoughan.com/2010/09/jaxb-collection-properties.html](http://blog.bdoughan.com/2010/09/jaxb-collection-properties.html)

# wpf - 在单击数据网格之前如何在数据网格上进行多项选择

> ID：11245350
> 
> 赞同：0
> 
> 时间：2012-06-28T13:07:14.767
> 
> 标签：wpf, datagrid, startup, multi-select

我有多个选择的 WPF 数据网格（模型具有属性 IsSelected...），它工作正常，但是当我启动程序时，我必须先单击表格，然后才能进行多项选择。当我第一次单击表格时，它会选择光标下的项目（如果我按了 shift，它也会选择项目，但它不会进行多选）。

我想这可能是因为 datagrid 没有聚焦，但是当我在加载的窗口上执行 datagrid.Focus() 时，它也不起作用。我应该怎么办？

WPF 数据网格代码：

```
<DataGrid x:Name="datagrid" AutoGenerateColumns="False" Height="Auto" VerticalAlignment="Stretch" Grid.Row="0" Grid.Column="0" Grid.ColumnSpan="4" Margin="3"
          CanUserAddRows="False" CanUserDeleteRows="False" 
          ItemsSource="{Binding Path=Items}" SelectedItem="{Binding Path=SelectedItem}" IsSynchronizedWithCurrentItem="True"
          SelectedIndex="{Binding Path=SelectedIndex}" SelectionMode="Extended" SelectionUnit="FullRow" EnableColumnVirtualization="False" EnableRowVirtualization="False">
    <DataGrid.Columns>
        <DataGridTextColumn Header="{Binding CodebookUnitsUnitTable, Source={StaticResource Texts}}" Binding="{Binding Path=Unit}" Width="*" IsReadOnly="True"/>
        <DataGridTextColumn Header="{Binding CodebookUnitsDescriptionTable, Source={StaticResource Texts}}" Binding="{Binding Path=Description}" Width="5*" IsReadOnly="True"/>
    </DataGrid.Columns>
    <DataGrid.CommandBindings>
        <CommandBinding Command="SelectAll" Executed="CommandBinding_Executed"/>
    </DataGrid.CommandBindings>
    <DataGrid.ContextMenu>
        <ContextMenu>
            <MenuItem Header="{Binding CodebookContextMenuNewItem, Source={StaticResource Texts}}" Command="{Binding NewItemCommand}">
                <MenuItem.Icon>
                    <myComponents:AutoGreyableImage Height="20" Margin="0,-1,0,0" Width="20" Source="../Icons/Small/INovySM.gif" Stretch="None" RenderOptions.BitmapScalingMode="NearestNeighbor" RenderOptions.EdgeMode="Aliased"/>
                </MenuItem.Icon>
            </MenuItem>
        </ContextMenu>
    </DataGrid.ContextMenu>
    <DataGrid.InputBindings>
        <KeyBinding Command="{Binding DeleteCommand}" Key="Delete"/>
    </DataGrid.InputBindings>
</DataGrid> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T13:43:10.837

您需要删除 Binding to `SelectedItem`，因为这将为整个网格设置一个选定项目。

您可以通过样式绑定到`IsSelected`每个数据项的属性（假设您的视图模型上每个项目都有 IsSelected 属性 - MVVM）：

```
<DataGrid.Resources>
   <Style TargetType="DataGridRow">
      <Setter Property="IsSelected" Value="{Binding IsSelected}" />
   </Style>
</DataGrid.Resources> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T21:25:37.117

解决方案集中在第一行，而不仅仅是 DataGrid。

# smartfoxserver - SFS2X 的服务器要求

> ID：11245353
> 
> 赞同：0
> 
> 时间：2012-06-28T13:07:25.783
> 
> 标签：smartfoxserver

我正在开发一款可供 1000 - 10000 名用户玩的游戏。SFS2X 可以处理这个范围的用户吗？如果是，服务器要求是什么，如操作系统、硬件、RAM、HDD 等？

您的意见将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T06:11:14.590

是的，SFS 可以支持 10,000 多个用户。

SFS服务器免费版将支持100个用户。但是您必须购买更高的用户需求。官网有订阅详情

> [产品详情](http://smartfoxserver.com/products)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-20T06:46:37.840

服务器要求仅取决于您在服务器上的代码，计算一个用户使用的 ram，然后将其乘以 10000，CPU 也相同，我的意思是，服务器的要求仅取决于您编写的内容以及服务器为每个用户做什么。如果您的游戏只是为每个变量保存一些变量，那么您不需要非常高的内存，CPU 也是一样的。

# amazon-ec2 - 如何在 aws 中启动实例时检查用户数据状态

> ID：11245356
> 
> 赞同：24
> 
> 时间：2012-06-28T13:07:31.857
> 
> 标签：amazon-ec2, boto

我正在尝试使用用户数据启动 aws 实例。我的用户数据是一个服务器安装过程，我必须检查用户数据脚本是否正确执行。是否有任何选项可以检查用户数据的状态是否已完成？我需要知道状态，因为从那个启动的实例中我正在拍摄另一张图像。现在，我明确使用 time.sleep(90) 来完成我的流程。

注意：我正在使用 Boto 库。

对此的任何解决方案将不胜感激！

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-05-16T03:23:29.100

# 更新

我所做的是在用户数据运行结束时创建一个标记文件。我让节点控制器为每个 ec2 节点生成一个 ssh 会话，并在另一端运行一个简单的忙等待循环作为命令，因此它仅在创建文件时返回。然后我只是 wait() 让所有 ssh 会话退出或直到发生等待超时。

这很丑陋，但它有效。令人沮丧的是，EC2 没有提供更好的设施来从实例内部发出状态信号。

## 标签

一种可能的方法是让实例的用户数据脚本在完成时向实例添加一个附加标签。您可以使用过滤器轮询实例`update`或执行 describe-instances，该过滤器仅包含带有您用来指定用户数据已更新的标签的节点。

这要求您在发送用户数据脚本时包含有限的 API 密钥和机密。*不要*使用您的常规 api 密钥和秘密，使用非常有限的 IAM 权限。此外，用户数据脚本可能希望在完成后删除其自身。

## SNS/SQS

我也考虑过为此使用简单通知服务和/或 SQS，但这似乎有点矫枉过正。

与设置标签一样，它要求实例拥有自己的 EC2 凭证。

SNS 是仅推送的，因此您必须有一个 EC2 可以访问的端点。那是一种痛苦。SQS 是拉式的，但没有消息路由，因此您需要为每组节点创建一个队列。您必须将唯一的队列名称传递给实例，或者让实例使用 EC2 凭证从标签中查询它，然后让实例使用该特定队列。

所以，是的，很痛苦。

## 安慰

获取控制台输出将不起作用，EC2 在实例转换为“运行”状态后不久停止更新。

似乎没有任何方法，实例或客户端，可以强制更新。

## 标记文件

当 cloud-init 脚本完成时，它可以`touch`在普通用户可以访问 shell 的地方创建一个标记文件。这有点烦人，因为它需要 ssh 进入每个节点，然后轮询创建标记文件。轮询的痛苦可以通过使用如下循环来减轻：

```
while ! test -e 'cloud-init-complete'
do
    inotifywait -qq -t 2 -e create -e moved_to . ||true
done 
```

在安装 inotify-tools 包之后。如果您不将 inotify-tools 刻录到您的 AMI 中，您需要`inotifywait`用简单的替换`sleep`并接受额外的延迟，或者执行以下操作：

```
while ! test -e 'cloud-init-complete'
do
    if test -x /usr/bin/inotifywait; then
        inotifywait -qq -t 2 -e create -e moved_to . ||true
    else
        sleep 2
    fi
done 
```

但是，这仍然需要到每个服务器的 ssh 连接，而且监控和轮询很麻烦。

## 更聪明的东西？

我梦寐以求的解决方案是能够向 EC2 元数据服务发送附加请求，以设置特殊实例标签或自定义额外状态字段。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-10-18T13:19:42.413

`InstaceStatusOk` [Waiter](https://boto3.readthedocs.io/en/latest/reference/services/ec2.html#waiters)一直等到 UserData 脚本完成：

```
waiter = client.get_waiter('instance_status_ok')
waiter.wait(InstanceIds=['i-12345']) 
```

[https://boto3.readthedocs.io/en/latest/reference/services/ec2.html#EC2.Waiter.InstanceStatusOk](https://boto3.readthedocs.io/en/latest/reference/services/ec2.html#EC2.Waiter.InstanceStatusOk)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-26T09:36:11.043

您使用 EC2 API 工具并记录用户数据输出或只是检查`ec2-get-console-output`. 参考这篇文章：[http ://alestic.com/2010/12/ec2-user-data-output](http://alestic.com/2010/12/ec2-user-data-output)

抱歉，不确定 Boto

在您的用户数据脚本中，您将结果记录到日志文件中。启动实例后，您检查文件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-12-07T03:25:10.053

如果您使用的是 Amazon Linux，则可以使用带有指令的`chkconfig`脚本：`/etc/init.d``Required-Start`

```
#!/bin/bash
# chkconfig:   345 95 95
# description: Description

### BEGIN INIT INFO
# Provides: userdatainit
# Description: Wait for user data
# Default-Start: 3 4 5
# Default-Stop: 0 1 2 6
# Required-Start: cloud-init
# Required-Stop:
### END INIT INFO

case "$1" in
  start)
    echo "Do work here, will happen -after- UserData script/config."
    ;;
  stop)
    ;;
  *)
    echo "Usage: $0 {start|stop}"
    exit 1
    ;;
esac

exit 0 
```

如果您已将其保存为类似 的文件`/etc/init.d/afteruserdata`，则像这样注册它：

```
chown root:root /etc/init.d/afteruserdata
chmod 755 /etc/init.d/afteruserdata
chkconfig --add afteruserdata
chkconfig --level 345 afteruserdata on 
```

然后您可以创建 AMI，您的代码将在脚本*之后运行。*`UserData`

**警告**：`cloud-init`仅在您第一次从 AMI 启动实例时才执行此操作。

# search - joomla 2.5 如何从主搜索栏搜索 kunena 组件内容？

> ID：11245358
> 
> 赞同：1
> 
> 时间：2012-06-28T13:07:41.210
> 
> 标签：search, joomla

需要从网站和 kunena 组件中搜索内容（均为最新版本）。搜索必须来自主搜索栏（joomla 默认）。

如何配置搜索查询？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T14:49:50.927

最好的方法是为 Kunena 编写一个搜索插件。J1.5 已经有这样的插件，可以在 [JED][1] 的此列表中看到。如果他们没有 J2.5 版本，那么从同一个列表中下载一个简单的 J2.5 插件以用作参考来编写自己的 Kunena Tables 应该不会太难。

# c++ - std::nth_element(a.begin(), a.end(), a.end()) 的作用是什么？

> ID：11245359
> 
> 赞同：7
> 
> 时间：2012-06-28T13:07:44.337
> 
> 标签：c++, stl

我阅读了`std::nth_element`http://www.sgi.com/tech/stl/nth_element.html上的[描述](http://www.sgi.com/tech/stl/nth_element.html)

```
template <class RandomAccessIterator>
void nth_element(RandomAccessIterator first, RandomAccessIterator nth,
                 RandomAccessIterator last); 
```

请注意，前提条件是

1.  [first, nth) 是一个有效范围。
2.  [nth, last) 是一个有效范围。

我的问题是：

打电话有效`std::nth_element(a.begin(), a.end(), a.end())`吗？如果有，它的作用是什么？无论如何，它不违反上述先决条件。语言标准（或其他文件）中的任何地方都指出`nth`必须指向`a`?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-28T13:11:21.037

它是有效的，并且可能是但标准不保证为空操作。有了给定的数据，两个前提条件变为：

```
[a.begin(), a.end()) is a valid range.
[a.end(), a.end()) is a valid range. 
```

这两者都是正确的，但第二个间隔是空的。从标准 25.3.2/1 开始：

> 在 nth_element 之后，nth 指向的位置的元素是如果对整个范围进行排序后将位于该位置的元素。同样对于范围 [first, nth) 中的任何迭代器 i 和范围 [nth, last) 中的任何迭代器 j，它都认为：!(*i > *j) 或 comp(*j, *i) == false。

如果对整个范围进行排序，则原始范围`a.end()`将位于`a.end()`，而对于第二部分，范围`[nth, last)`为空，因此没有用于评估`!(*i > *j)`and`comp(*j, *i) == false`条件的元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T13:10:31.383

不，它无效，因为`nth`必须在范围内`[first, last)`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T13:14:15.250

不，`std::nth_element(a.begin(), a.end(), a.end())`无效 - 它违反了第二个前提条件，即要求`nth`迭代器（第二个参数）指向一个有效元素。`a.end()`虽然没有指向一个有效的元素。

# razor - 如何在 umbraco 5 中为新成员添加新属性

> ID：11245362
> 
> 赞同：0
> 
> 时间：2012-06-28T13:07:56.440
> 
> 标签：razor, umbraco, umbraco5

我想添加要添加的新属性，以便在 umbraco 5 中注册新成员，例如地址和电话，并将其显示在他的个人资料中。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T21:06:34.427

截至 6 月中旬，Umbraco 5 项目已被取消。许多最好的功能将迁移到 Umbraco 4，这将是前进的主要分支。

在这里阅读更多：

[http://umbraco.com/follow-us/blog-archive/2012/6/13/v5-rip.aspx/](http://umbraco.com/follow-us/blog-archive/2012/6/13/v5-rip.aspx/)

已经有一个包可以帮助将 MVC 优点带入 Umbraco 4

[http://our.umbraco.org/projects/website-utilities/umbramvco](http://our.umbraco.org/projects/website-utilities/umbramvco)

# iphone - 在 iPhone/iPad 上正确使用宏#define

> ID：11245364
> 
> 赞同：2
> 
> 时间：2012-06-28T13:08:03.597
> 
> 标签：iphone, objective-c, xcode, ipad, macros

我一直在阅读有关在 iOS 中使用 #define 宏以及它们是仅在编译时运行还是在运行时运行的相互矛盾的信息。

考虑我的情况：我想定义一个宏，它返回一个与屏幕是大尺寸还是小尺寸有关的 BOOL，这里是代码：

```
#define TTThisScreenWidth [[UIScreen mainScreen] bounds].size.width
#define TTLargeScreenTrushHold 700.0f
#define TTScreenIsOfLargeSize (TTThisScreenWidth > TTLargeScreenTrushHold) 
```

问题：如果此代码仅在编译时运行，则屏幕大小将在其编译到的设备上固定，并且在具有不同屏幕的设备上运行时不会返回正确答案。

但是：我检查了它，当最初为 iPhone 编译时，它在 iPad 上完美运行（通用应用程序）

SO：不安全吗？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-28T13:10:55.793

宏在编译时被*替换；*它们不在编译时*运行*。宏的主体将被“粘贴”来代替对宏名称的引用，就像您手动输入的一样。

通常，编译器将在编译时*评估*常量表达式，无论有无宏。您`TTThisScreenWidth`不涉及常量表达式 - 它是一个运行时表达式，因此它在运行时进行评估。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-28T13:10:48.850

宏指示 C 预处理器用它的值替换它的名称。它不运行方法或函数，也不运行任何其他复杂的东西。在您的代码中，如果您`TTScreenIsOfLargeSize`像这样使用宏：

```
if (TTScreenIsOfLargeSize) {
    /* ... */
} 
```

这实际上评估为：

```
if ([[UIScreen mainScreen] bounds].size.width > 700.0f) {
    /* ... */
} 
```

因为`[UIScreen mainScreen]`etc.在编译时*不被评估。*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-28T13:11:34.283

`#define`是用于定义常量和宏的预编译衍生词

这个怎么运作：

考虑这个例子

```
#define MYINT 5
#define MYSTRING @"number is %d" 
```

在你的 .m 文件中

```
NSString *str = [NSString stringWithFormat:MYSTRING, MYINT];
//What really happens is
NSString *str = [NSString stringWithFormat:@"number is %d", 5]; 
```

每个定义都被它定义的值或代码替换

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-28T14:09:14.760

这里应该注意的是，虽然在#if、#ifdef、#endif 等情况下 C 预处理引擎有更多内容，但在指定问题的情况下，预处理引擎作为 TEXT 替换引擎工作.

这就是为什么当我们说一个人做类似的事情时：

```
#define varA 10
#define varB 20
#define addAB varA + varB 
```

如果在实际编译的代码中有对 addAB 的调用，它将被替换为“varA + varB”。按照以下方式执行数学运算是并且永远是一个好习惯：

```
#define addAB (varA + varB) 
```

这是为什么：如果我只是使用 addAB 的第一个定义，那么如果我做了类似的事情：

```
myVar = 5 * addAB; 
```

那么文本替换引擎将使它看起来像：

```
myVar = 5 * varA + varB; 
```

在编译之前。如果最初的意图是在乘法之前先将 a 和 b 相加，那么这将不是您的结果。如果改为使用第二个，则：

```
myVar = 5 * (varA + varB); 
```

成为编译之前的结果表达式，这将得到你想要的。记住在这些情况下预处理器是一个简单的文本替换引擎会让你走得更远。

# jquery - 如何 Jquery 将 CSS 左值设置为元素的宽度？

> ID：11245375
> 
> 赞同：0
> 
> 时间：2012-06-28T13:08:43.660
> 
> 标签：jquery, css, jquery-animate

我需要使用 Jquery animate 函数相对于其父级移动绝对 div。如何限制 CSS 对象文字 left += -600px 以便左侧定位在到达宽度末端时停止？换句话说，我想限制元素的左侧定位，这样它就不会一直移动到页面之外和视线之外。谢谢您的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T13:23:15.067

```
$(this).animate({'left': '-'+$(this).parent().width()}, [time in ms]); 
```

或者，如果您的意思是元素自己的宽度：

```
$(this).animate({'left': '-'+$(this).width()}, [time in ms]); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T13:37:33.397

为了使它在父级中对齐，您需要从父级宽度中减去子级宽度，如下所示：

```
$(document).ready(function(){
var childWidth = $('#child').width();
var parWidth = $('#child').parents('#parent').width();
var offSet = parWidth - childWidth;

$('#child').animate({
    left: '+=' + offSet  
}, 1000);

}); 
```

示例 HTML：

```
<div id="parent">
    <div id="child">
      I've been a bad child.  
    </div>    
</div> 
```

CSS：

```
* {
  margin: 0;
  padding: 0;
}
#parent {
  width: 600px;
  height: 200px;
  background: green;  
  position: relative;  
}

#child {
  position: absolute;
  background: red;
  width: 100px;
  height: 200px;        
} 
```

[请参阅此 JSFiddle](http://jsfiddle.net/chippper/WSHLN/1/)进行演示。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T13:24:27.320

您可以使用 jQuery`animate`的`step`-function 在每一步检查元素是否已到达页面边缘并应停止。[这里](http://jsfiddle.net/n2QEs/5/)是一个小提琴，演示了使用 step 函数在达到限制时停止动画。

```
 ...animate({left: '+=-600px'},
   {
     ... ,
     step: function(now, fx) {
       if (fx.now <= 0) { // If the current animation value is less than zero
         $(fx.elem).stop();
         $(fx.elem).style('left', '0');
       }
     }
     ...
   }   
 ); 
```

如果需要，step 函数为您提供了一种逐步控制动画的好方法。阅读[此处](http://cdmckay.org/blog/2010/03/01/the-jquery-animate-step-callback-function/)了解更多信息。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-28T13:23:01.787

好吧，您没有提供任何代码，所以我唯一的猜测是您误解了 jQuery 的 animate 函数的工作原理。实际上 jQuery 的 animate 函数正是你想要的。它会将您想要的元素的属性增加到不超过您想要的属性。也就是说，除非您愿意，否则它不会一直将其移出页面并移出视线。[在这里](http://api.jquery.com/animate/)阅读它是如何工作的。

# wordpress - 如何在wordpress的帖子下隐藏类别列表中的某些类别？

> ID：11245378
> 
> 赞同：3
> 
> 时间：2012-06-28T13:08:55.973
> 
> 标签：wordpress

在我的 WordPress 博客中，有一些类别用于内部工作。我想隐藏每个帖子下显示的博客主页类别列表中的类别。

我将类别列表打印为`print(the_category($postID));`

如何在每个帖子下隐藏或制作该类别列表打印的过滤器？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-11-05T15:51:31.710

我的解决方案：

```
.cat-item-1 {display:none;} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-06-18T04:52:17.473

如果要在前端隐藏所选类别，请尝试使用`get_the_terms`过滤器。也许像这样，尝试将其添加到您的`functions.php`

```
add_filter('get_the_terms', 'hide_categories_terms', 10, 3);
function hide_categories_terms($terms, $post_id, $taxonomy){

    // list of category slug to exclude, 
    $exclude = array('your-term-slug', 'another-term-to-hide');

    if (!is_admin()) {
        foreach($terms as $key => $term){
            if($term->taxonomy == "category"){
                if(in_array($term->slug, $exclude)) unset($terms[$key]);
            }
        }
    }

    return $terms;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-28T14:44:06.007

您需要获取帖子的类别，取出您不想要的类别，然后显示。

```
<?php
$postCats = wp_get_post_categories($post->ID);
$cats =  array();

foreach($postCats as $c){
 $cats[]= get_cat_name($c);
}
$dontShow = array("List","the","Categories","here");
echo implode(", ", array_diff($cats,$dontShow);
?> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-11-05T16:04:36.320

```
$exclu_categories=array(
    1=>'',
    34 => '',
    45=>'',
);
$categoires=get_the_category();

foreach($categoires as $category) {

   $cat_id=$category->cat_ID;
   $cat_name=$category->name;

   if(!isset($exclu_categories[$cat_id])) {
      echo $cat_name;
   }

} 
```

# javascript - 如何访问非用户名特定的 YouTube 频道 JSON 供稿？

> ID：11245379
> 
> 赞同：0
> 
> 时间：2012-06-28T13:09:03.353
> 
> 标签：javascript, video, youtube-api, feed

我正在尝试访问特定用户帐户的视频源。此用户已上传 3 个视频，但他们的“频道”页面似乎没有像其他频道一样的用户名？

我之前使用的过程是：

```
http://gdata.youtube.com/feeds/api/videos?author=CHANNEL_NAME&alt=json 
```

...其中 CHANNEL_NAME 将是频道的名称。

但我尝试访问的频道没有名称，我可以通过以下 URL 查看频道：

```
https://www.youtube.com/channel/UCgZ_C3_ItNfHpC6Wf3hDGgQ 
```

...但正如您所见，它有一个用户代码而不是标识符名称。

因此，尝试使用以下内容不会带回实际的提要：

```
http://gdata.youtube.com/feeds/api/videos?author=UCgZ_C3_ItNfHpC6Wf3hDGgQ&alt=json 
```

谁能建议我如何访问此提要？我可以访问该用户的帐户，所以我可以/应该能够为频道设置正确的标识符名称吗？

谢谢。

更新：我已经登录到用户的帐户并给了他们一个唯一的用户名：

```
http://www.youtube.com/user/ITECLEARNTECH 
```

但是我还`https://gdata.youtube.com/feeds/api/users/ITECLEARNTECH/uploads`从 Google 文档中找到了一个 XML 提要版本，它似乎包含了他们所有的视频，但我不确定如何将其转换为 JSON 数据（这对我来说使用 JavaScript 与提要进行交互会更好数据）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T10:14:57.893

好吧，我显然是个白痴。似乎我只需要添加`?alt=json`到 URL 的末尾

[https://gdata.youtube.com/feeds/api/users/ITECLEARNTECH/uploads?alt=json](https://gdata.youtube.com/feeds/api/users/ITECLEARNTECH/uploads?alt=json)

我本可以发誓我最初尝试过但它没有用，但现在看来它确实有效。

所以你去吧！

# python - 格式化控制台输出

> ID：11245381
> 
> 赞同：12
> 
> 时间：2012-06-28T13:09:06.067
> 
> 标签：python, text-formatting, console-output

我无法让 python 打印出正确对齐的文本。我已经尝试了我所知道的一切，但仍然是相同的结果，这很烦人！

这是我在控制台中得到的 ![在此处输入图像描述](../Images/3761e7a355b0df4cfddf3b641318de95.png)

这是我的代码。

```
print " FileName\t\t\t\t\tStatus\t\tBinary Type\n"  

for files in PASS:
    log = subprocess.check_output(['dumpbin','/HEADERS',files])
    if arch64 in log:
        print" %s \t\t\t\tPASSED\t\t 64-bit \t\t  " %files 
    elif arch32 in log:
        print" %s \t\t\t\tPASSED\t\t 32-bit \t\t  " %files
print"\n"   
for files in FAILED:

    print" %s \t\t\t\t  FAILED \t\t        " %files

print "\n\n 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-28T13:30:26.240

用于`%45s`创建一个 45 个字符长的右对齐字段。并用于`%-45s`制作左对齐字符串。还可以考虑将您的线条打印提取到一个函数中 - 这样您就可以在一个地方轻松更改它。像这样：

```
# fake setup 
PASS = ["foo.exe", "bar.exe", "really_long_filename.exe"]
FAILED = ["failed.exe"]
types = ["32-bit", "64-bit", "64-bit"]
arch64 = '64'
arch32 = '32'

# your code
def print_row(filename, status, file_type):
    print " %-45s %-15s %15s" % (filename, status, file_type)

print_row('FileName', 'Status', 'Binary Type')

for files in PASS:
    log = types.pop()
    if arch64 in log:
        print_row(files, 'PASSED', '64-bit')
    elif arch32 in log:
        print_row(files, 'PASSED', '32-bit')
print"\n"   

for files in FAILED:
        print_row(files, 'FAILED', '')

print "\n\n" 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-28T13:10:35.967

代替制表符，最好在可以指定确切的空格数并保留输出的地方使用字符串格式化指令。

例如

```
print '>>%20s<<' %('some string')
>>         some string<< 
```

将保留 20 个空格并*右*对齐此字符串以供显示。您可以使用*左*对齐`%-20s`

```
print '>>%-20s<<' %('some string')
>>some string         << 
```

可以使用`d`整数和`f`浮点值指定数字。例如，

```
 print '%03d %5.2f' %(5, 22/7.0)
 005  3.14 
```

在此示例中，我为整数值保留 3 个零填充空格，为浮点数保留 5 个空格（2 个用于小数点后的值）。你也可以在这里控制 alignemnt `-`。格式化输出还有许多其他选项，有关更多详细信息，请参阅下面的建议链接。

请注意，`.format()`鼓励使用该功能。请参阅我的[回答，](https://stackoverflow.com/a/10837046/1209279)了解如何使用`.format()`. 这个[答案](https://stackoverflow.com/questions/11099782/python-numbers-formatting/11099798#11099798)也可能有所帮助。

虽然`.format`看起来很冗长，但它确实提供了很大的灵活性，我最喜欢的功能之一是能够轻松地大量打印逗号以提高可读性。

有关更多详细信息，请参阅[有关字符串格式的 Python 文档，](http://docs.python.org/library/stdtypes.html#string-formatting-operations)以帮助您完全按照您想要的方式排列输出。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-28T13:13:05.713

例如，如果您使用带有[padding](http://docs.python.org/library/stdtypes.html#string-formatting-operations)的字符串格式，则可以大大简化它。

```
>>> '%20s' % 'test'
'                test'
>>> '%-20s' % 'test'
'test                ' 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-10-10T09:29:02.110

我建议与他们一起使用 ljust 之类的东西

```
print files.ljust(20) + 'Passed'.ljust(5) + '64-bit' 
```

而不是这个：

```
print" %s \t\t\t\tPASSED\t\t 64-bit \t\t  " %files 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-15T09:28:58.460

您可以使用第三方模块将输出格式化到控制台。

即： [文本表](http://pypi.python.org/pypi?name=texttable&%3aaction=display)

# jakarta-ee - weblogic8.1中的错误500

> ID：11245384
> 
> 赞同：0
> 
> 时间：2012-06-28T13:09:11.193
> 
> 标签：jakarta-ee

我已经开始研究 servlet。我正在使用 weblogic 服务器 8.1。在运行我的 servlet 时，我收到错误 500（内部服务器错误）。我问了这个问题，很多人说路径没有设置。但我已经检查了 10 次，但我无法检测到问题。

Pth 变量包括`"C:\bea\jdk141_02\bin;"` 我是否需要删除`jdk6?because weblogic8.1 requires jdk1.4`运行程序的路径？我被困在我的第一个程序上：D 请帮助.. thnks提前

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T17:47:56.427

根据评论，您得到以下异常：

> ```
> Servlet class Demo for servlet Demo could not be loaded because the requested class was not found in the classpath 
> java.lang.UnsupportedClassVersionError: Demo (Unsupported major.minor version 50.0) 
> ```

`Demo`servlet 是使用 Java 1.6 编译的，而您的 Weblogic 服务器显然使用的是较旧的 Java 版本。您需要`Demo`使用 Weblogic 服务器支持的 Java 版本重新编译 servlet。

另一种选择是完全摆脱那个`Demo`servlet，只根据自尊的教程自己创建 servlet。

# google-chrome - works in every browser except Google Chrome I have a problem with loading data into an < object > using Javascript. It refuses to work in Chrome, no error message either. You can see a minimal example to play with 问问题 问问题 2012-06-28T13:09:12.803 1845 次 This question shows research effort; it is useful and clear 1 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. I have a problem with loading data into an < object > using Javascript. It refuses to work in Chrome, no error message either. You can see a minimal example to play with here: http://tinkerbin.com/HIqG0ypb It is strange to me that browsers assume object.data could be set as URI but display content available at that URI. It sounds like a security flaw : full content could be injected into a page without using frame. I wonder if test.com in your example has access to window.parent or something like that [EDIT] So  Must be written for Chrome as :  where testFrame is : google-chromeobjectxhtml 4 1 回答 1 This answer is useful 0 对我来说很奇怪浏览器假设 object.data 可以设置为URI但显示该 URI 上可用的内容。这听起来像是一个安全漏洞：可以在不使用框架的情况下将全部内容注入页面。我想知道您示例中的 test.com 是否可以访问 window.parent 或类似的东西 [编辑] 所以  必须为 Chrome 编写为：  其中 testFrame 是： 于 2012-06-28T13:18:52.330 回答 Related 1 processing - 将鼠标拖到可点击区域之外 3 iphone - 监控 UIImageView 的图像属性变化 1 ruby-on-rails - 接下来，在按多列 ActiveRecord 集排序的任何给定对象之前 1 php - 从 mysql 数据库提供 JQuery 自动完成功能 3 php - PHP 和 Mysql 中的会话 10 javascript - 为什么 nodelist 没有 forEach？ 3 mysql - Codeigniter 活动记录加入 3 个表 1 eclipse - 对Android框架进行修改后的android.jar（在Eclipse中）更新？ 2 c# - 隐藏和显示面板 1 java - Java-Junit：乘以 2 个多项式表达式 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：11245385
> 
> 赞同：1
> 
> 时间：
> 
> 标签：google-chrome, object, xhtml

I have a problem with loading data into an < object > using Javascript. It refuses to work in Chrome, no error message either.

You can see a minimal example to play with here: [http://tinkerbin.com/HIqG0ypb](http://tinkerbin.com/HIqG0ypb)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T13:18:52.330

对我来说很奇怪浏览器假设 object.data 可以设置为*URI*但显示*该 URI 上可用的内容*。这听起来像是一个安全漏洞：可以在不使用框架的情况下将全部内容注入页面。我想知道您示例中的 test.com 是否可以访问 window.parent 或类似的东西

[编辑]

所以

```
<script type="text/javascript">
  function openFrame() {
    document.getElementById('testFrame').data="http://test.com";
  }
</script> 
```

必须为 Chrome 编写为：

```
<script type="text/javascript">
  function openFrame() {
    document.getElementById('testFrame').data="http://test.com";
    var el = document.getElementById("testFrame");
    var h = el.innerHTML;
    el.innerHTML = h;
  }
</script> 
```

其中 testFrame 是：

```
 <object id="testFrame" type="text/html" style="overflow-x: hidden; width: 100%; height: 100%" /> 
```

# php - 提交按钮消失

> ID：11245386
> 
> 赞同：0
> 
> 时间：2012-06-28T13:09:13.837
> 
> 标签：php

我尝试使用 php 和一个简单的表单发送电子邮件。代码上传： [http](http://webofdreams.ro/tests/basic%20template.html) ://webofdreams.ro/tests/basic%20template.html 发送电子邮件表单正在发送给朋友。问题是电子邮件未发送，单击后提交按钮消失。如果在按下取消后还有另一个按钮（比如说取消），则运行代码，但不发送电子邮件。在服务器上运行的代码非常简单：

```
<?php

$mailTo = $_POST['emailTo'];
$mailFrom = $_POST['emailFrom'];
$name = $_POST['name'];
$message = 'Your friend ' . $name .  'recommends this Web site: ';
$subject = $name . 'recommends Fine Maid';

mail($mailTo, $subject, $message);
echo "Mail Sent.";
?> 
```

编辑：html：

```
 <html>
                           <ul>
                                <li><a href="#" title="">Call us</a>
                                    <div class="navLinks"> </div>
                                </li>
                                <li><a href="#">Visit our website</a>
                                       <div class="navLinks"> Content Here </div>
                                </li>
                                <li><a href="#">Email us</a>
                                       <div class="navLinks"> Content Here </div>
                                </li>
                                <li><a href="#">Send to a friend</a>
                                       <div class="navLinks"> 
                                            <form name="send-to-friend" id="form2" method="post" action="sendemail.php">
                                                <label for="name" class="blockItem">Your Name</label>
                                                <input type="text" class="blockItem" id="name" name="name" maxlength="60" size="30"/>
                                                <label for="emailFrom" class="blockItem">Your Email</label>
                                                <input type="text" class="blockItem" id="emailFrom" name="emailFrom" maxlength="60" size="30" />
                                                <label for="emailTo" class="blockItem">Your friend's email</label>
                                                <input  type="text" class="blockItem" id="emailTo" name="emailTo" maxlength="60" size="30" value="" />             
                                                <input class="button" id="submit" type="submit" value="Send Message"/>
                                                <!--<input  class="button"  type="submit" value="Cancel"  />-->

                                            </form>
                                       </div>
                                </li>
                            </ul>
    </html> 
```

CSS：

```
.nav ul {
   list-style-type:none;}
.nav {
    float: right;
    line-height: 3.3em;
    }
.nav li {
    margin: 0 .5em;
    display: inline-block;
    }
.nav li a {
    color: #000;
    font-size: 1.1em;
    }
.navLinks {
    position: absolute;
    top: 3em;
    background: #2C75D8;
    padding: 0 5px;
    border: 2px solid #94afd3;
    -moz-box-shadow: 0 0 4px #fff;
    -webkit-box-shadow: 0 0 4px #fff;
    box-shadow: 0 0 4px #bbb;
    -webkit-border-radius: 7px;
    -moz-border-radius: 7px;
    border-radius: 7px;
    z-index: 1000;
    }       
form {
    font-family: Tahoma, Geneva, sans-serif;
    font-size: 14px;
    line-height: 1.5em;
    color: #ddd;
    text-decoration: none;
    padding: 1em;
    margin-bottom: 1em; 
    }   
label {
    margin: 10px 0 0 0;
    }
.blockItem {
    display: block;
    }
.error {
    display: block;
    color: #FF8080;
    }
.button {
    display: inline;
    margin-top: 10px;
    }   
span {
    color: #F00;
    } 
```

jQuery：

```
 $(document).ready(function() {
        $('.commentContainer:odd').addClass('darker');

        $('#hideButton').click(function() {
        $(this).hide();     
        });

        $('.navLinks').hide();

        $(".nav a").on("click", function(e) {
            $(".navLinks").hide();
            $(this).siblings(".navLinks").show();
            e.preventDefault();
        });
}); 
```

# c# - 在gridview控件中使用超链接

> ID：11245387
> 
> 赞同：1
> 
> 时间：2012-06-28T13:09:15.520
> 
> 标签：c#, asp.net

我`gridview`在我的 ASP.NET Web 应用程序中使用并`templatefield`用于显示带有超链接的列。超链接实际上是一个网络路径（如`\\X.X.X.X\SampleFolder`）。

当用户单击该列时，我想打开该文件夹。现在，网格显示应用了超链接的预期列。但是当我单击该列时，它所采用的路径就像`file://X.X.X.X/SampleFolder`这就是原因，共享文件夹路径没有打开。它应该与 - 相同`\\X.X.X.X\SampleFolder`。

有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T17:18:41.987

你`TemplateField`应该看起来像这样：

```
<asp:GridView AutoGenerateColumns="false">
    <Columns>
        <asp:TemplateField>
            <ItemTemplate>
                <a href='file:///\\X.X.X.X\SampleFolder\<%# DataBinder.Eval(Container.DataItem, "LastName") %> <%# DataBinder.Eval(Container.DataItem, "FirstName") %>'>
                    <%# DataBinder.Eval(Container.DataItem, "LastName") %> <%# DataBinder.Eval(Container.DataItem, "FirstName") %>'>
                </a>
            </ItemTemplate>
        </asp:TemplateField>
    </Columns>
</asp:GridView> 
```

# cakephp - 在线共享主机上的 CakePHP 2.0+ 设置

> ID：11245391
> 
> 赞同：2
> 
> 时间：2012-06-28T13:09:28.673
> 
> 标签：cakephp, mod-rewrite, web-hosting

1 并且我已经将所有文件上传到我正在使用 000webhost.com 的文件服务器上，但是我在使用 modrewrite 时遇到了一些问题，我一直被重定向到[http://error404.000webhost.com/](http://error404.000webhost.com/)？有谁知道如何在共享区域设置 cakephp 2.1？

我现在收到这个错误：`Fatal error: Call to undefined function pluginsplit() in /home/a4300629/public_html/lib/Cake/Cache/Cache.php on line 151`不太确定这个错误是怎么发生的，有什么想法吗？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T17:47:11.357

是的，我已经想通了，我按照本网站上的 .htaccess 说明进行操作。 [http://www.000webhost.com/forum/web-programming/29628-help-cake-php-install.html](http://www.000webhost.com/forum/web-programming/29628-help-cake-php-install.html) 但首先我删除了所有文件并重新上传，直到我使用它之前它仍然不起作用。 htaccess 方法。

希望这可以帮助其他遇到此问题的人。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-28T05:53:06.380

**在研究 cakephp 教程后，在共享主机上设置 cakephp 它将起作用:)**

*   将应用程序、蛋糕、插件、供应商文件夹移动到您的托管根文件夹中。它是您主机上的用户根文件夹
*   删除 cakephp 根文件夹上的 .htaccess 和 index.php
*   移动 /app/webroot/ *。*到 /public_html 文件夹
*   删除空的 /app/webroot 文件夹
*   编辑 /public_html/index.php 以指向“cake”和“app”目录。例如，我的域的 public_html 路径是 /home/username/public_html，所以我指出
*   ROOT查看/home/username
*   APP_DIR 查看 /home/username/app
*   CAKE_CORE_INCLUDE_PATH 查看 /home/username/cake
*   使用适当的路径编辑 /public_html/index.php 上的这一行

> /** * “app”的实际目录名。* 由 Siraj 编辑 */ if (!defined('APP_DIR')) { define('APP_DIR', basename(dirname(dirname( **FILE** ))) . DS .'public_html' . DS .'app');
> 
> }
> 
> /// 开始 --- 由 Siraj 编辑
> 
> if (!defined('CAKE_CORE_INCLUDE_PATH')) { if (function_exists('ini_set')) { ini_set('include_path', '/home' . DS . 'username' . DS . 'public_html' . DS . 'lib' . PATH_SEPARATOR .ini_get('include_path')); //define('CAKE_CORE_INCLUDE_PATH', 'home' . DS . '用户名' . DS . 'public_html' . DS . 'lib'); } if (!include ('/home' . DS . 'username' . DS . 'public_html' . DS . 'lib' . DS .'Cake' . DS . 'bootstrap.php')) { $failed = true; } } else { if (!include ('/home' . DS . 'username' . DS . 'public_html' . DS . 'lib' . DS . 'Cake' . DS . 'bootstrap.php')) { $failed =真；} }
> 
> //// 结尾

*   我在 /home/username/public_html 上拥有的唯一 .htaccess，.htaccess 的设置如下所示

> RewriteEngine On RewriteCond %{REQUEST_FILENAME} !-d RewriteCond %{REQUEST_FILENAME} !-f RewriteRule ^(.*)$ index.php?url=$1 [QSA,L]

# python - 记录在 scrapy 中运行爬虫的总时间

> ID：11245394
> 
> 赞同：6
> 
> 时间：2012-06-28T13:09:49.680
> 
> 标签：python, scrapy

我正在使用scrapy来废弃一个网站

我写了一个蜘蛛并从页面中获取所有项目并保存到一个csv文件，现在我想保存`total execution time`scrapy运行蜘蛛文件，实际上是在蜘蛛执行完成之后，当我们在终端它将显示一些结果`starttime, endtime`，等等......所以现在在我的程序中，我需要计算scrapy运行蜘蛛所花费的总时间并将总时间存储在某个地方......

谁能通过一个例子让我现在如何做到这一点......

提前致谢...........

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-28T13:43:00.773

这可能很有用：

```
from scrapy.xlib.pydispatch import dispatcher
from scrapy import signals
from scrapy.stats import stats
from datetime import datetime

def handle_spider_closed(spider, reason):
    print 'Spider closed:', spider.name, stats.get_stats(spider)
    print 'Work time:', datetime.now() - stats.get_stats(spider)['start_time']

dispatcher.connect(handle_spider_closed, signals.spider_closed) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-06-01T17:53:05.013

我是一个初学者，但我用一种更简单的方法完成了它，我希望它有意义。

```
import datetime 
```

然后声明两个全局变量，即 **self.starting_time**和**self.ending_time**。

在蜘蛛类的构造函数中，将开始时间设置为

```
def __init__(self, name=None, **kwargs):
        self.start_time = datetime.datetime.now() 
```

之后，使用封闭的方法找到结束和开始之间的差异。IE

```
def closed(self, response):
   self.ending_time = datetime.datetime.now()
   duration = self.ending_time - self.starting_time
   print(duration) 
```

差不多就是这样。在蜘蛛结束进程后不久，将调用关闭的方法。[请参阅此处的文档](https://docs.scrapy.org/en/latest/topics/spiders.html#scrapy.spiders.Spider.closed)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-12-25T20:04:56.487

到目前为止我发现的最简单的方法：

```
import scrapy

class StackoverflowSpider(scrapy.Spider):
    name = "stackoverflow"

    start_urls = ['https://stackoverflow.com/questions/tagged/web-scraping']

    def parse(self, response):
        for title in response.css(".summary .question-hyperlink::text").getall():
            yield {"Title":title}

    def close(self, reason):
        start_time = self.crawler.stats.get_value('start_time')
        finish_time = self.crawler.stats.get_value('finish_time')
        print("Total run time: ", finish_time-start_time) 
```

# c# - 使用 c# 在 asp.net 中将谷歌帐户添加到我的网站

> ID：11245396
> 
> 赞同：1
> 
> 时间：2012-06-28T13:09:49.870
> 
> 标签：c#, asp.net

我有一个工作门户网站项目，我需要通过使用谷歌开放身份验证来注册用户.. 这样我就可以检索他/她的帐户详细信息，如名字、姓氏、电子邮件 ID、手机号码等.. 同样在 asp 中也适用于雅虎。网。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-28T13:12:24.143

检查**[DotNetOpenAuth](http://www.dotnetopenauth.net/)**。它是一个 .NET 库，用于将 google/yahooo/open ID 登录支持集成到您的 .NET 应用程序中。

**这就是它的工作原理。**

您在您的网站（谷歌/雅虎等）中显示不同的登录选项，当用户点击它们时，他们将被重定向到这些提供商的登录页面。您将传递您的一个页面的 url（类似于回调！），以便在成功通过身份验证后，提供的将重定向到我们您的这个特定页面。你不会得到用户的密码。您将获得与该帐户对应的 OpenID 字符串。您可能需要将其存储在 UserInfo 表中，以便下次用户访问时，在身份验证后，您可以带来与用户相关的内容（个人资料偏好等...）

我认为您将无法检索用户的手机号码。您可以获取用户的 EmailID。

互联网上有很多例子。

[http://midnightprogrammer.net/post/Add-Google-Login-Support-In-ASPNET-With-OAuth.aspx](http://midnightprogrammer.net/post/Add-Google-Login-Support-In-ASPNET-With-OAuth.aspx)

[http://danhounshell.com/blog/adding-openid-to-your-web-site-in-conjunction-with-asp-net-membership/](http://danhounshell.com/blog/adding-openid-to-your-web-site-in-conjunction-with-asp-net-membership/)

# java - 结构化元素（图像细化）

> ID：11245401
> 
> 赞同：0
> 
> 时间：2012-06-28T13:10:09.310
> 
> 标签：java, image-processing

我需要“结构元素”来细化图像。结构化元素是一个 3 x 3 矩阵值“1”和“0”。我在 JAVA 中使用以下代码行声明了一个 3x3 数组：

```
int [][] structuring_element = new int [3][3]; 
```

请告诉我，我应该为数组分配什么样的“0s”和“1s”顺序？我的意思是，如果以下是我的数组，例如：

```
[0 0 0]
[x 1 x]
[1 1 1] 
```

那么我将如何决定我应该在什么地方放 0 和在哪里放 1？我必须对 2D 灰度图像执行细化。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T13:13:11.897

你可以把它想象成一个数组数组。

即 se[0] = {0,0,0} se[1] = {x,1,x} se[2] = {1,1,1}

使 se[0][0] = 0, se[1][0] = x, se[2][0] = 1, ..

# c# - 如何获取所有对象（及其嵌套对象和指向对象的链接）当前 RAM 占用？

> ID：11245422
> 
> 赞同：-1
> 
> 时间：2012-06-28T13:11:08.203
> 
> 标签：c#, .net, .net-2.0

如何在.Net 2中获取所有对象（及其嵌套对象和对象链接）当前RAM（堆）占用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T13:17:41.417

我不确定对象等。但一开始你可能想看看这个[`PerformanceCounter`](http://msdn.microsoft.com/en-us/library/system.diagnostics.performancecounter.aspx)类。使用它，您可以通过查询性能计数器（使用 System.Diagnostics）来检查应用程序的内存消耗（测试进程的实际内存消耗）

```
string procName = Process.GetCurrentProcess().ProcessName;
using (PerformanceCounter pc = new PerformanceCounter("Process", "Private Bytes", procName))
    Console.WriteLine(pc.NextValue()); 
```

这个类相当大，可能包含一些你可以使用的东西......

我希望这有帮助。

*注意：读取性能计数器需要管理员权限。*

# git - 拉取服务器上的单个文件

> ID：11245424
> 
> 赞同：3
> 
> 时间：2012-06-28T13:11:12.723
> 
> 标签：git, version-control, github, putty

我在 GitHub 上提交了几个文件，但我只想在服务器上提取单个文件。我怎样才能使用 PuTTY 做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-28T13:52:42.203

```
git fetch
git checkout -m revision  -- the/file/you/want
git add the/file/you/want
git commit 
```

签出您想要的文件并将其与当前文件合并

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-28T13:17:04.193

您可以通过此 URL 获取单个文件：

```
https://raw.github.com/USER/PROJECT/BRANCH/FILE 
```

# android - pdf页面转换成图片

> ID：11245429
> 
> 赞同：1
> 
> 时间：2012-06-28T13:11:25.293
> 
> 标签：android, pdf

我正在尝试将 pdf 页面转换为图像。我正在使用 PdfViewer.jar 文件。

听到是我的代码，我想将转换后的图像显示为 imageview

```
package com.info.org;

import java.io.File;
import java.io.FileInputStream;

import net.sf.andpdf.nio.ByteBuffer;
import android.app.Activity;
import android.graphics.Bitmap;
import android.graphics.RectF;
import android.os.Bundle;
import android.os.Environment;
import android.util.Base64;
import android.widget.ImageView;

import com.sun.pdfview.PDFFile;
import com.sun.pdfview.PDFPage;

public class PDFImageReadActivity extends Activity {
    /** Called when the activity is first created. */

    ImageView imageView;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        try {
            byte[] bytes;
            setContentView(R.layout.main);

            imageView=(ImageView) findViewById(R.id.img);

            File file = new File(Environment.getExternalStorageDirectory()+"/infobooks/Book5.pdf");
            if (file.exists()) {

                FileInputStream is = new FileInputStream(file);
                long length = file.length();
                bytes = new byte[(int) length];
                int offset = 0;
                int numRead = 0;
                while (offset < bytes.length
                        && (numRead = is.read(bytes, offset, bytes.length
                                - offset)) >= 0) {
                    offset += numRead;
                }

                ByteBuffer buffer = ByteBuffer.NEW(bytes);
                String data = Base64.encodeToString(bytes, Base64.DEFAULT);
                PDFFile pdf_file = new PDFFile(buffer);
                PDFPage page = pdf_file.getPage(1);

                RectF rect = new RectF(0, 0, (int) page.getBBox().width(),(int) page.getBBox().height());

                Bitmap image = page.getImage((int) rect.width(),(int) rect.height(), rect);
                imageView.setImageBitmap(image);

                //FileOutputStream os = new FileOutputStream(Environment.getExternalStorageDirectory()+ "/pdfImage.jpg");
                //image.compress(Bitmap.CompressFormat.JPEG, 80, os);

            } else {
                System.err.println("File is not found" + file.getAbsolutePath());
            }

        } catch (Exception e) {
            // TODO: handle exception
            System.out.println("Error in main -->>" + e.toString());
        }

    }
} 
```

当我运行它时在 logcat 中显示错误

```
06-28 18:12:40.353: E/APV.PDFRenderer(852): do not show images

06-28 18:12:40.353: E/APV.PDFRenderer(852): java.lang.UnsupportedOperationException: do not show images

06-28 18:12:40.353: E/APV.PDFRenderer(852):     at com.sun.pdfview.PDFImage.getImage(PDFImage.java:223)

06-28 18:12:40.353: E/APV.PDFRenderer(852):     at com.sun.pdfview.PDFRenderer.drawImage(PDFRenderer.java:374)

06-28 18:12:40.353: E/APV.PDFRenderer(852):     at com.sun.pdfview.PDFImageCmd.execute(PDFPage.java:654)

06-28 18:12:40.353: E/APV.PDFRenderer(852):     at com.sun.pdfview.PDFRenderer.iterate(PDFRenderer.java:674)

06-28 18:12:40.353: E/APV.PDFRenderer(852):     at com.sun.pdfview.BaseWatchable.run(BaseWatchable.java:101)

06-28 18:12:40.353: E/APV.PDFRenderer(852):     at java.lang.Thread.run(Thread.java:1096) 
```

谁能看到问题？

这段代码来自这篇文章。 [需要帮助将 Pdf 页面转换为 Android Java 中的位图](https://stackoverflow.com/questions/8814758/need-help-to-convert-a-pdf-page-into-bitmap-in-android-java)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-24T11:20:15.343

您可以使用 GIMP。它是一个非常好的界面。

将 pdf 文件导入 GIMP 将文件另存为 .xcf 对图像进行操作 - 如果需要，进行编辑 以您想要的任何格式导出：.bmp、.jpeg、.png 等

在这篇文章中回答：[PDF 到图像转换器](https://stackoverflow.com/questions/5628064/pdf-to-image-convertor/5630241#5630241)

# android - 如何处理 UnsatisfiedLinkError？

> ID：11245430
> 
> 赞同：1
> 
> 时间：2012-06-28T13:11:33.923
> 
> 标签：android, codec, sipdroid

我正在开发 SIP 基础应用程序来拨打和接听电话，为此我对开源项目[Sipdroid 进行了分析。](http://code.google.com/p/sipdroid/)除此之外，我**制作了这个应用程序来支持 g729 编解码器**。应用程序工作正常，但是当我修改应用程序的包名称时，我收到了这个新编解码器的错误。而使用其他编解码器，应用程序工作正常。这是我的错误日志。这里我附上了我的 java 文件
[G729。 java](http://pastie.org/4165644)
[Codec.java](http://pastie.org/4165662)
[Codecs.java](http://pastie.org/4165669)
[g729_jni.cpp](http://pastie.org/4165674)

```
06-28 08:12:29.633: E/AndroidRuntime(712): java.lang.UnsatisfiedLinkError: open
06-28 08:12:29.633: E/AndroidRuntime(712):  at org.sipchat.codecs.G729.open(Native Method)
06-28 08:12:29.633: E/AndroidRuntime(712):  at org.sipchat.codecs.G729.init(G729.java:48)
06-28 08:12:29.633: E/AndroidRuntime(712):  at org.sipchat.codecs.Codecs$CodecSettings.onPreferenceTreeClick(Codecs.java:368)
06-28 08:12:29.633: E/AndroidRuntime(712):  at android.preference.Preference.performClick(Preference.java:820)
06-28 08:12:29.633: E/AndroidRuntime(712):  at android.preference.PreferenceScreen.onItemClick(PreferenceScreen.java:190)
06-28 08:12:29.633: E/AndroidRuntime(712):  at android.widget.AdapterView.performItemClick(AdapterView.java:284)
06-28 08:12:29.633: E/AndroidRuntime(712):  at android.widget.ListView.performItemClick(ListView.java:3513)
06-28 08:12:29.633: E/AndroidRuntime(712):  at android.widget.AbsListView$PerformClick.run(AbsListView.java:1812)
06-28 08:12:29.633: E/AndroidRuntime(712):  at android.os.Handler.handleCallback(Handler.java:587)
06-28 08:12:29.633: E/AndroidRuntime(712):  at android.os.Handler.dispatchMessage(Handler.java:92)
06-28 08:12:29.633: E/AndroidRuntime(712):  at android.os.Looper.loop(Looper.java:123)
06-28 08:12:29.633: E/AndroidRuntime(712):  at android.app.ActivityThread.main(ActivityThread.java:3683)
06-28 08:12:29.633: E/AndroidRuntime(712):  at java.lang.reflect.Method.invokeNative(Native Method)
06-28 08:12:29.633: E/AndroidRuntime(712):  at java.lang.reflect.Method.invoke(Method.java:507)
06-28 08:12:29.633: E/AndroidRuntime(712):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
06-28 08:12:29.633: E/AndroidRuntime(712):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
06-28 08:12:29.633: E/AndroidRuntime(712):  at dalvik.system.NativeStart.main(Native Method) 
```

我有 .so 文件来支持 g729 编解码器，但是在更改包名后，.so 文件不起作用。因为这个 .so 文件是使用不同的包名构建的。所以我必须有一个源文件并且需要再次编译它以使其工作。怎么做？

如果有人对此有所了解，请给我一些有关此错误的建议。如何处理这个错误？
谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T04:28:10.787

因为我遇到了同样的问题......它与您的 JNi 或 whatevr 编解码器与您的实际 java 代码不匹配

# android - 为什么我的 android 应用程序在安装后直接启动时崩溃？

> ID：11245432
> 
> 赞同：0
> 
> 时间：2012-06-28T13:11:36.967
> 
> 标签：android

一些客户在启动应用程序时直接遇到应用程序崩溃。

这是主要活动中 onCreate() 方法的代码：

```
public void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);

    String deviceId = Local.getUniqueID(this);

    Thread.setDefaultUncaughtExceptionHandler(new CustomExceptionHandler(deviceId));

    setContentView(R.layout.main);
} 
```

并`getUniqueId()`这样做：

```
public static String getUniqueID(Context context) {
     return Secure.getString(context.getContentResolver(), Secure.ANDROID_ID);
} 
```

这个调用是否有可能使应用程序崩溃？我可以打电话给这个`onCreate()`吗？还是它`Thread.setDefaultUncaughtExceptionHandler()`崩溃了？

遇到此问题的用户甚至看不到应用程序的启动画面，而且我无法在我拥有的任何设备上重现该问题。

`CustomExceptionHandler`只需获取异常/错误的堆栈跟踪并将其与设备 ID 一起发送到服务器。我从遇到问题的用户那里获得了一个设备 ID，但它不在数据库中。

任何的想法？在任何设备上的开发过程中，我从来没有遇到过这个问题。这可能是什么原因？不要犹豫，询问更多细节。谢谢

编辑：我想我发现了应用程序崩溃时的堆栈跟踪：

```
E/AndroidRuntime(10067): FATAL EXCEPTION: main
E/AndroidRuntime(10067): java.lang.RuntimeException: Unable to instantiate application android.app.Application: java.lang.NullPointerException
E/AndroidRuntime(10067):    at android.app.LoadedApk.makeApplication(LoadedApk.java:482)
E/AndroidRuntime(10067):    at android.app.ActivityThread.handleBindApplication(ActivityThread.java:3909)
E/AndroidRuntime(10067):    at android.app.ActivityThread.access$1300(ActivityThread.java:122)
E/AndroidRuntime(10067):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1184)
E/AndroidRuntime(10067):    at android.os.Handler.dispatchMessage(Handler.java:99)
E/AndroidRuntime(10067):    at android.os.Looper.loop(Looper.java:137)
E/AndroidRuntime(10067):    at android.app.ActivityThread.main(ActivityThread.java:4340)
E/AndroidRuntime(10067):    at java.lang.reflect.Method.invokeNative(Native Method)
E/AndroidRuntime(10067):    at java.lang.reflect.Method.invoke(Method.java:511)
E/AndroidRuntime(10067):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
E/AndroidRuntime(10067):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
E/AndroidRuntime(10067):    at dalvik.system.NativeStart.main(Native Method)
E/AndroidRuntime(10067): Caused by: java.lang.NullPointerException
E/AndroidRuntime(10067):    at android.app.LoadedApk.initializeJavaContextClassLoader(LoadedApk.java:362)
E/AndroidRuntime(10067):    at android.app.LoadedApk.getClassLoader(LoadedApk.java:305)
E/AndroidRuntime(10067):    at android.app.LoadedApk.makeApplication(LoadedApk.java:474)
E/AndroidRuntime(10067):    ... 11 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T15:58:24.013

我相信

```
Secure.getString(context.getContentResolver(), Secure.ANDROID_ID); 
```

可以在某些设备上返回 null。

所以你最终打电话

```
new CustomExceptionHandler(null); 
```

这会导致您的崩溃。

如果您附加了崩溃日志，则可以确认这一点。

# magento - 时事通讯邮件未在 Magento 中发送

> ID：11245438
> 
> 赞同：0
> 
> 时间：2012-06-28T13:11:48.267
> 
> 标签：magento, newsletter, magento-1.6

我正在使用 Magento 1.6 版。我创建了几个时事通讯队列并设置了功能日期，但它不会在该日期发送邮件。状态也处于**未发送**状态。任何人都知道是什么问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-29T06:26:51.527

我没有找到真正的问题，现在邮件是通过 cron 文件发送的。

# shell - 如何在 iPython shell 中撤消输入（不是命令输出）

> ID：11245439
> 
> 赞同：7
> 
> 时间：2012-06-28T13:11:52.027
> 
> 标签：shell, ipython, undo

是否有用于撤消在 iPython 中输入的键盘命令？注意：我*不是*在谈论撤消您已执行的命令的结果。

假设我将一些变量名作为参数复制并粘贴到一个长函数调用中，然后意识到它们是错误的参数。我可以做等效的 ctrl-z 或撤消粘贴操作的操作吗？

Ctrl-z 终止 iPython 会话，因此不推荐。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-28T13:14:54.430

`Ctrl-_`（下划线）或`Ctrl-x` `Ctrl-u`

如果您使用`ctrl-w`/`ctrl-k`等删除了某些内容，则可以使用 . 将其粘贴回来`ctrl-y`。

参见`readline(1)`其他热键。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-28T13:14:36.317

IPython 使用 GNU readline 库。“撤消”的[标准快捷键](http://cnswww.cns.cwru.edu/php/chet/readline/rluserman.html#SEC21)是 Ctrl-_，但这可能无法一键撤消完整的粘贴操作。(Linux) 终端中的粘贴操作是通过模拟用户输入来完成的，因此 readline 会看到许多击键，而不仅仅是一个。您可能需要按几次快捷键。

# sql - 如何比较同一个表中的两列？

> ID：11245440
> 
> 赞同：10
> 
> 时间：2012-06-28T13:11:53.627
> 
> 标签：sql

我想比较同一张表中的两列。我希望能够返回两列具有相同值的所有行。

我正在寻找类似的东西`SELECT * FROM FOO WHERE C1 = C4`。

因此，在下面的示例中，我将只返回第一行：

```
C1    || C2  || C3  || C4
--------------------------
1     || a   || b   || 1
2     || a   || b   || 4
3     || b   || d   || 2
4     || b   || d   || 2 
```

如果重要的话，我正在使用`SQLite`（更具体地说`WebSQL`）。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-28T13:53:56.673

`SELECT * FROM FOO WHERE C1 = C4`应该管用。不是吗？

如果不是，它们的数据类型和长度是否相同？您可能需要转换。

我不了解 WebSql，但我见过一些数据库系统拒绝匹配，如果一个是 varchar(5) 而另一个是 varchar(10)，即使它们具有相同的值。在这些系统中，您必须使用类似的东西

```
 Convert(varchar, 10, FieldName) 
```

来一场比赛。

# java - Java：New Generation Used 100%, Eden Space Used 100%, From Space Used 100%

> ID：11245444
> 
> 赞同：5
> 
> 时间：2012-06-28T13:12:16.753
> 
> 标签：java, memory, garbage-collection, heap-memory, jmap

jmap -heap 给我的输出是：

新代使用率 100%，伊甸园空间使用率 100%，从空间使用率 100%，到空间使用率：0%，烫发使用率：38%

这是来自太空的 100% 的新伊甸园 - 问题吗？

我的 JAVA OPTS 是：*-Xms10240m -Xmx14336m -XX:PermSize=192m -XX:MaxPermSize=256m -XX:NewSize=8192m -XX:MaxNewSize=8192m -XX:-DisableExplicitGC -XX:+UseConcMarkSweepGC -XX:CMSInitiatingOccupancyFraction=60*

我看到很多快速垃圾收集。但是使用 JConsole 之类的工具没有内存泄漏

内存使用情况可以在这里看到： [http ://tinypic.com/view.php?pic=wo213&s=6](http://tinypic.com/view.php?pic=wo213&s=6)

JDK 1.6 正在使用中。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-29T03:18:02.757

这就是世代收集的工作原理。你有年轻空间（eden、from、to）和老空间（tenure、perm）。年轻的空间更小。一旦年轻空间已满（您的情况） - 称为次要 GC（年轻 GC）的事情正在发生。

但次要 GC 应该很快。一旦旧空间已满，就会发生完整的 GC（这更耗时）。

想法是拥有更频繁的快速次要 GC 和更少频繁的完整 GC。

[您可以在本文](http://blog.ragozin.info/2011/06/understanding-gc-pauses-in-jvm-hotspots.html)中阅读更详细的说明

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-28T14:23:15.020

我发现以下两个命令非常有用

```
jstat -gc 
```

或者

```
jstat -gcutil 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-28T14:31:00.567

检查内存泄漏可能是谨慎的。使用 visualVM 或其他一些工具（例如 Eckipse 内存分析器）并将其附加到进程。

一旦你知道什么是泄漏的，你就可以找到持有对对象的引用的东西，例如

```
jmap -dump:live,file=heap.dump.out,format=b <pid>

jhat heap.dump.out 
```

另外，只是想知道这是什么 JVM 版本，您为 GC 传递的参数等。

# php - php中的元搜索聚合

> ID：11245447
> 
> 赞同：0
> 
> 时间：2012-06-28T13:12:22.847
> 
> 标签：php, meta-search

我正在创建元搜索引擎，但我被卡住了！我使用 php 向 3 个搜索引擎发送查询，并从每个搜索引擎中提取前 10 个网址。然后，我将这些 url 存储在一个带有相应分数的二维数组中，以用于聚合目的，即。第一个结果得到20分，第二个得到18分等等。

所以在下面的例子中，我用'php'查询搜索引擎并得到这些结果：

> > 块引用
> 
> **布莱科**
> 
> 数组 ( [url] => php.about.com/ [score] => 20 ) 数组 ( [url] => php.net/ [score] => 18 ) 数组 ( [url] => en.wikipedia.org /wiki/PHP [score] => 16 ) 数组 ( [url] => www.phpbuilder.com/ [score] => 14 ) 数组 ( [url] => blekko.com/ws/http://php. about.com/+/seo [score] => 12 ) 数组 ( [url] => www.w3schools.com/php/default.asp [score] => 10 ) 数组 ( [url] => phpnuke.org/ [分数] => 8 ) 数组 ( [url] => www.symfony-project.org/ [分数] => 6 ) 数组 ( [url] => www.phpconference.co.uk/ [分数] => 4 )
> 
> **整个网络**
> 
> 数组 ( [url] => phpnuke.org/ [score] => 20 ) 数组 ( [url] => www.aardvarktopsitesphp.com/ [score] => 18 ) 数组 ( [url] => www.php.net / [score] => 16 ) 数组 ( [url] => www.php.net/downloads.php [score] => 14 ) 数组 ( [url] => php.net/manual [score] => 12 )数组 ( [url] => www.php.net/manual/en/ [score] => 10 ) 数组 ( [url] => www.php.net/docs.php [score] => 8 ) 数组 ( [ url] => www.php.net/license/ [score] => 6 ) 数组 ( [url] => www.phplinkdirectory.com/ [score] => 4 )
> 
> **必应**
> 
> 数组 ( [url] => www.php.net/ [score] => 20 ) 数组 ( [url] => en.wikipedia.org/wiki/PHP [score] => 18 ) 数组 ( [url] => www.php.net/downloads.php [分数] => 16 ) 数组 ( [url] => www.w3schools.com/php/default.asp [分数] => 14 ) 数组 ( [url] => windows. php.net/download [score] => 12 ) 数组 ( [url] => windows.php.net/ [score] => 10 ) 数组 ( [url] => www.tizag.com/phpT/ [score] => 8 ) 数组 ( [url] => wiki.php.net/ [score] => 6 ) 数组 ( [url] => qa.php.net/ [score] => 4 ) 数组 ( [url] = > www.php.com/ [分数] => 2)

我想做的是结合所有这些结果，删除重复的 url，但添加分数并创建一个新列表，其中包含可能看起来像这样的聚合结果：

数组（[url] => www.php.net/ [score] => 54）

数组（[url] => en.wikipedia.org/wiki/PHP [score] => 34）

数组（[url] => www.w3schools.com/php/default.asp [score] =>24）

等等

我只是在寻找实现这一目标的最有效方法，任何建议将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T13:37:26.347

1-`trim`之后您可以访问网址，您可以理解`www.php.net`并且`php.net`是同一个网站（也`www.php.net`和`php.net/downloads.php`是相同的）。

**2-从Bing**返回结果给予更多积分。你知道**Bing**是最语义化的搜索引擎。

3-您可以捕获标题并将它们保存到数组中，这是个人建议。

# php - 两个循环 foreach 和 unset

> ID：11245456
> 
> 赞同：0
> 
> 时间：2012-06-28T13:12:49.507
> 
> 标签：php, foreach

```
<?php

$array = array(a,s,d,f,g,h,j,k,l);

foreach($array as $i => &$a){
 foreach($array as $k => &$b){
    if($k = 4){
     unset($array[1]);
    }
 }

 echo $a . "\n";
}

print_r($array); 
```

**密码键盘：** [http ://codepad.org/UoWhrIkv](http://codepad.org/UoWhrIkv)

为什么在这个例子`echo`中只显示我`"a"`并`print_r`显示所有好？是否可以在循环中进行良好的展示`echo`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-28T13:18:39.163

我不确定您是否尝试在数组或常量中包含字符串，但字符串应该像这样格式化。

```
$array = array('a','s','d','f','g','h','j','k','l'); 
```

你错的另一件事是你的 if 语句

```
if($k == 4) 
```

您需要使用双等号进行比较，单= 号用于赋值。

您是否还可以准确地提供您在此处尝试执行的操作，因为您的代码立即存在一些格式问题，这可能就是为什么 a 是唯一一个打印的原因。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-28T13:25:58.493

> 为什么在这个例子`echo`中只显示我`"a"`并`print_r`显示所有好？

[`foreach`^(*当您在Docs*)](http://php.net/foreach)中修改您正在迭代的数组时（这里您删除了一个元素）， 的行为`foreach`可能会给您带来意想不到的事情。手册页上的注释说：

> 由于 foreach 依赖于内部数组指针，因此在循环内更改它可能会导致意外行为。

* * *

> 是否可以通过回声在循环中进行良好的显示？

是的，但这取决于您要达到的目标。由于您没有具体说明“良好的表现”的实际含义，我们只能猜测：

*   分配`$array`给一个新变量，并在`foreach`s 中使用该变量。
*   -或- 不要使用引用`&$a`and `&$b`，只使用`$a`and `$b`。
*   -或- 保存要删除的元素并在迭代中跳过这些元素。
*   -或者- ...
*   -或者-甚至`echo "good\m";`？

工作代码示例可能如下所示（[Demo](http://codepad.org/PiEyC3aj)）：

```
$array = array('a','s','d','f','g','h','j','k','l');

foreach ($array as $i => &$a) {
    echo "$a\n";
}

print_r($array); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-28T13:31:07.320

因为您正在使用[引用](http://php.net/manual/en/language.references.php)（`&$a`和`&$b`）

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-28T13:21:54.323

这里有两个问题：

第一个是您使用`=`而不是`==`在这一行：

```
if($k = 4){ 
```

第二个是你的逻辑，因为当你的内部循环迭代同一个数组时，它会反复 unset `$array[1]`。

这不会影响内部 foreach，但会影响外部。所以`echo $a;`只有一次打印的机会。

`if`将您的声明更改为：

```
if($k == 4){
  unset( $b);
} 
```

打印`echo $a` [整个数组](http://codepad.org/k4wyuMr3)（假设这就是你想要的）。

# c - 我可以要求返回值是指向常量的指针吗

> ID：11245461
> 
> 赞同：0
> 
> 时间：2012-06-28T13:13:04.097
> 
> 标签：c, ansi, misra

说我有两个“模块”。例如，RS-232 端口的硬件接口层及其上方的一层使其更加抽象。

我有一个这样的接收缓冲区：`U8BIT myBuffer[MAX]`. `U8BIT`是类型化的：`typedef unsigned char`

然而，可以接收两种类型的消息。一个有标题，另一个没有标题。这个逻辑已经写好了。

“上面的层”将访问此缓冲区，但它不应该知道这是一个标头还是无标头消息。

因此我有这样的功能：

```
U8BIT * fooBuffer(U8BIT * maxLength)
{
    U8BIT * retval;
    if( isHeaderless() )
    {
        retval = &(myBuffer[0]);
        *maxLength = MAX;
    }
    else
    {
        retval = &(myBuffer[5]);
        *maxLength = MAX - 5;
    }
    return retval;
} 
```

如何确保调用此函数的任何函数都无法更改返回指针的内容？

是的，我知道这将永远是可能的。不要试图让其他人更难尝试修改它。我希望它是“不可能的”，这样就不会更容易出错，因为如果你尝试修改`const`.

我可以将函数声明如下：`const U8BIT * fooBuffer(U8BIT * maxLength)`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T13:15:27.107

> **如何确保调用此函数的任何函数都无法更改返回指针的内容？**

返回一个指向它的指针`const`，它将向您的代码用户表明您的意图。
但是，请注意，不能保证他们无法修改它。请记住，他们可以，如果他们这样做，那将是一个**未定义的行为**。

您只能遵循正确的语义，并希望有人不会滥用指针黑客来破坏您的代码。只要可以访问代码，总是有可能破坏代码。因此，您所能做的就是清楚地表达您的意图。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T13:15:44.657

用作`const U8BIT *`函数的返回类型。

例如在你的函数中：

```
const U8BIT * fooBuffer(U8BIT * maxLength)
{
    U8BIT * retval;  

    // code

    return (const U8BIT *) retval;
} 
```

如果`retval`指针没有在你的`fooBuffer`函数中被取消引用，也将它声明为`const U8BIT *`，然后不再需要在 return 语句中进行强制转换。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-04T09:52:09.560

我自己的经验法则是：每当我有从函数返回指针的冲动时，我认为这是一个大红旗，说明我的程序设计很糟糕。尽管返回 const 指针可能是该规则的一个罕见例外。

在您的情况下，代码可能会从重新设计中受益。这是我的建议。

```
#define FIRST_INDEX       0u
#define SOME_OTHER_INDEX  5u
#define N                 SOMETHING

static const uint8_t MAX = something;
static uint8_t myBuffer [N];

uint8_t fooBuffer (const uint8_t* retVal)
{
    uint8_t maxLength;

    if( isHeaderless() )
    {
        retval = &myBuffer[FIRST_INDEX];
        maxLength = MAX;
    }
    else
    {
        retval = &myBuffer[SOME_OTHER_INDEX];
        maxLength = (uint8_t) (MAX - SOME_OTHER_INDEX);
    }

    return maxLength;
} 
```

程序设计变更：

*   确保 myBuffer 是一个私有变量，不能在您的代码模块之外访问或更改。
*   按值而不是指针返回 maxLength。我不明白你为什么需要通过指针返回它。
*   retVal 通过一个 const 指针返回。

编码风格变化：

*   删除了 U8BIT 类型并用 C99/C11 兼容的 uint8_t 替换它。如果您没有 C99/C11 编译器，只需在`typedef unsigned char uint8_t`某个地方。这使您的代码更容易被其他程序员阅读。如果您使用自己的特殊类型，他们可能会错误地开始怀疑该特定类型有什么神奇之处。
*   删除了 &myBuffer[] 周围的模糊括号，因为它没有任何意义。
*   删除了幻数。

MISRA-C:2004 合规性：（因为您标记了此 MISRA）

*   `u`每个整数常量文字都需要后缀。
*   您必须将`-`运算符的结果类型转换为基础类型 uint8_t。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-28T13:46:27.187

是的，已经开始使用`const`合格的返回值了。

但是你可以走得更远，将一个值返回到一个真正不可修改的地方。如果我没看错，你只有两个可能的返回值：

```
... myBuffer... // supposing that this is known at compile time

static U8BIT const retval0 = &(myBuffer[0]);
static U8BIT const retval1 = &(myBuffer[5]);

U8BIT const* fooBuffer(U8BIT * maxLength)
{
    if(isHeaderless()) return &retval0;
    else return &retval1;
} 
```

您的平台甚至可能有办法确保两者`retval`最终位于只读部分。

# c# - 属性引用对象类型为同一类的类

> ID：11245465
> 
> 赞同：1
> 
> 时间：2012-06-28T13:13:10.393
> 
> 标签：c#, .net, class, types, attributes

我想分析一个给我进化的源代码。在这段代码中，我有一个类，它的属性类型是同一个类的相同类型。

我不明白这个开发的功能是什么。编译器没问题，但是这段代码中有一个无穷大的引用，不是吗？

*例子：*

```
public sealed class CachingServiceLocator : IDisposable
{

    private Hashtable cache; /// Le cache des références vers les services métiers
    private static volatile CachingServiceLocator me; /// L'unique instance du Service Locator

    /// Le constructeur statique
    static CachingServiceLocator()
    {
        try
        {
            me = new CachingServiceLocator();
        }
        catch (Exception)
        {
            MessageBox.Show("Impossible de créer le service locator...\nVeuillez accepter toutes nos excuses pour le désagrément occasionné..." , "Service Locator !", MessageBoxButtons.OK, MessageBoxIcon.Error);
        }
    } 
```

你能给我了解一下这个发展吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T13:16:07.463

这是单例模式的经典实现。这样可以确保只为此类类型创建一个对象（例如记录器，配置类通常是单例的）

还有其他一些你可能错过的东西，比如这种类型的实例构造函数必须是私有的，它自己的类是密封的等等。

所以你不能这样做

```
CachingServiceLocator  obj = new CachingServiceLocator() //not allowed

//to get the instance you have to do as following
CachingServiceLocator obj = CachingServiceLocator.me 
```

[单例模式](http://www.oodesign.com/singleton-pattern.html)

# c# - Asp.Net 应用程序不断重启，所以缓存很大

> ID：11245468
> 
> 赞同：0
> 
> 时间：2012-06-28T13:13:15.890
> 
> 标签：c#, asp.net, performance, caching

我有一个托管在共享服务器上的 Asp.net 应用程序。

我的缓存对象很少。一个缓存对象包含大约 100 万条记录，包含三列。其余的缓存对象只包含几百条记录。

所有记录都是静态的。这些记录永远不会被更改，并将显示在自动完成的 ajax 调用中。

我正在使用 Sql Server 2008 来存储数据。

如果我设置以下内容：

```
<compilation debug="false" targetFramework="4.0"> 
```

与我将其设置为 TRUE 相比，应用程序的启动频率更高

我的代码：

```
 protected void Application_Start(object sender, EventArgs e)
    {

        Global.CacheInfo += "Started on" + "----" + DateTime.Now + "<br/>" + Environment.NewLine; ;

        RegisterRoutes(RouteTable.Routes);

        RouteTable.Routes.RouteExistingFiles = true;

        using (BEntity context = new BEntity())
        {
            // Adding Items to Cache
            BLSuggestion.GetAllTitle();
            BLSuggestion.GetAllSubCategories();

        }

        PerformanceCounter pc = new PerformanceCounter("ASP.NET Applications", "Cache % Machine Memory Limit Used", "__TOTAL__", true);
        Global.CacheInfo += string.Format("{0:0.00}%", pc.NextValue());

    } 
```

如果应用程序启动，该值将达到 95% 左右。稍后会创建更多缓存对象。但即便如此，应用程序也会在大约 1 分钟后重新启动。

对此的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T13:29:04.327

当达到某些（用户定义的）CPU/内存阈值时，IIS 会自动重新启动应用程序。由于您将大量信息存储在内存中，我猜您已达到此阈值，IIS 只需按照配置中的说明关闭 AppDomain，以防止您的应用程序占用大量内存。这通常由共享托管服务提供商完成。因此，您可以询问您的提供商，您的应用程序被配置为在哪些限制下运行。

# c# - WPF 相当大的网格列

> ID：11245470
> 
> 赞同：0
> 
> 时间：2012-06-28T13:13:20.163
> 
> 标签：c#, wpf

我已经下载了源代码并使用这个 logview 来查看 log4net 日志。

在我之前的帖子中，evanb 删除了这个链接 [http://yourlog4netviewer.codeplex.com/](http://yourlog4netviewer.codeplex.com/)

这让其他用户认为我的问题不完整，主持人 casperone 将其关闭。

这是我的问题。

此日志查看器中的消息列不可调整大小。我已修改此源代码并将消息列宽设置为自动，但消息列仍然不可调整大小。

下面是片段

```
<GridViewColumn Header="Message" Width="100" DisplayMemberBinding="{Binding Message}" /> 
```

当我将宽度设置为 100 时，消息列固定为 100 宽度

```
<GridViewColumn Header="Message" Width="Auto" DisplayMemberBinding="{Binding Message}" /> 
```

当我将宽度设置为自动时，消息列的宽度是消息长度的宽度。我无法在运行时调整消息列的大小。

有人可以帮助我如何使此消息列可调整大小。

谢谢，

埃森。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T13:16:34.820

GridViewColumns 默认可以调整大小。实际上很难让它们无法调整大小：D

[防止用户使用 WPF ListView 调整列的大小](https://stackoverflow.com/questions/181956/prevent-user-from-resizing-columns-with-wpf-listview)

该问题显示了一些实现非调整大小网格的方法。它可能是一个已更改的模板，您应该查看 XAML 文件以查看是否在任何地方设置了模板。

# bash - 在 bash 中将 1 排序到 10 之前

> ID：11245472
> 
> 赞同：3
> 
> 时间：2012-06-28T13:13:30.330
> 
> 标签：bash, sorting

我正在对`;`分隔文件的特定列进行数字排序，其中：

```
sort -k3n file 
```

但是数字 10 和 11 排在 1 之前。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-28T13:29:23.513

如果您的字段用空格以外的其他内容分隔，您可以使用`--field-separator`or`-t`选项，如下所示：

```
sort -k3n -t\; file 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T13:23:58.900

-n 选项应该可以解决问题。你能检查一下这不会输出你想要的顺序吗？

```
echo -e "1\n10\n11\n2"|sort -n 
```

# mysql - 无法在 MySQL 工作台 5.2.40 中创建表

> ID：11245475
> 
> 赞同：6
> 
> 时间：2012-06-28T13:13:35.400
> 
> 标签：mysql, mysql-workbench

我刚刚创建了一个新模式并想创建一个新表。每当我右键单击我创建的 2myschema'，然后选择'新表'，

![在此处输入图像描述](../Images/cfbd82e6f34e130556edda6353e5fa9e.png)

我为要创建的表命名，但出现以下错误：

![在此处输入图像描述](../Images/b40c4effc816dc9f1877ee4945b86eb6.png)

我搜索了错误，发现原因是我输入了保留字，例如“订单”，但 table2 不可能是保留字，我尝试了许多不同的名称，但总是得到相同的消息。列名称未激活，因此我无法输入列名称。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-29T08:48:17.897

我发现列区域没有被禁用，但它需要从细矩形向下滚动，如下所示。我试图在这个矩形下方的正方形中输入列名，并基于我将其描述为禁用。

![在此处输入图像描述](../Images/be5ba6f37dab3b38299603c1481d719b.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-10T08:20:26.320

您不需要向下滚动，而是让您的窗口更高。您的 WB 窗口高度非常小。在表格编辑器的右侧，还有一个向下的双箭头。单击此按钮可折叠上半部分（带有排序规则和评论编辑），您将为下半部分留出更多空间。

注意：表格编辑器和输出选项卡之间还有一个分隔器，因此您可以通过牺牲一些输出空间来增加表格编辑器空间。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-28T13:16:27.823

您的表中没有列，那么您的表应该代表什么？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-28T13:16:29.297

您正在尝试创建一个没有列的表。这是不可能的

# magento - Magento 商店的替代产品名称

> ID：11245476
> 
> 赞同：1
> 
> 时间：2012-06-28T13:13:38.330
> 
> 标签：magento

我们有会计软件填充 magento 网上商店的名称字段，问题是有 30 个字符的限制，而且名称往往更多地针对我们的内部操作，而不是 SEO 或 UI。

我想知道为某些 magento 产品创建“备用名称”的最佳方法，但前提是它退出，否则回退到常规名称字段。

最好的方法是创建一个新的产品属性（alternate_name）并在前端调用 if else 语句？

```
<?php if($_product->getAttributeText(’alternate_name’)) { 
 echo $_product->getAttributeText(’alternate_name’) 
 } else {
 echo $_product->getName(); 
 } ?> 
```

然后我需要在布局文件夹中的几个地方更改它吗？还是有一个更容易的地方来覆盖这个方法一次并让它在每次 $product->getName() 被调用时工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T16:42:10.720

如果您只需要在前端阅读/查看它，您可以覆盖`getName()`核心模型的方法`Mage_Catalog_Model_Product`来执行以下操作：

```
public function getName()
{
    if (Mage::app()->getStore()->isAdmin()) {
        return $this->getData('name');
    }
    return (
        ($this->getData('alternate_name')
        ? $this->getData('alternate_name')
        : $this->getData('name')
    ); 
```

}

这样，您只需进行单点更改，即可为所有产品`getName()`调用提供服务，无论它们来自何处。

请注意，这样做可能会在编辑/保存`name`属性时引起问题。

这是因为例如 Magento 后端也将使用您`getName()`来填充`name`product edit 的字段`<form>`，因此该`<input>`字段中的值可以是 the`alternate_name`或`name`属性之一。

保存更改可能会导致保存属性`alternate_name`中的值`name`，这很可能是您不想要的。

为了避免这种情况，上面的方法总是返回`name`属性的值，以防调用来自管理区域内。这应该足以捕获管理员编辑表单，但当然不能捕获其他可能的情况，`getName()`用于提供`setName()->save()`调用。

# arrays - 查找数组中每个字符串的最小唯一子字符串

> ID：11245481
> 
> 赞同：12
> 
> 时间：2012-06-28T13:13:52.333
> 
> 标签：arrays, string, algorithm, unique, substring

*（我在 JavaScript 的上下文中写这个，但会接受任何语言的算法正确答案）*

如何在字符串数组中找到每个元素的最短子字符串，其中子字符串不包含在任何其他元素中，忽略大小写？

假设我有一个输入数组，例如：

```
var names = ["Anne", "Anthony", "LouAnn", "Kant", "Louise", "ark"]; 
```

输出应该是这样的：

```
var uniqueNames = ["ne", "h", "ua", "ka", "i", "r"]; 
```

出于我的目的，您可以放心地假设没有元素会完全包含在另一个元素中。

我的想法：
似乎人们可能会按照以下方式暴力破解：

```
var names = ["Anne", "Anthony", "LouAnn", "Kant", "Louise", "ark"];
var uniqueNames = [], nameInd, windowSize, substrInd, substr, otherNameInd, foundMatch;
// For each name
for (nameInd = 0; nameInd < names.length; nameInd++)
{
    var name = names[nameInd];
    // For each possible substring length
    windowLoop:
    for (windowSize = 1; windowSize <= name.length; windowSize++)
    {
        // For each starting index of a substring
        for (substrInd = 0; substrInd <= name.length-windowSize; substrInd++)
        {
            substr = name.substring(substrInd,substrInd+windowSize).toLowerCase();
            foundMatch = false;
            // For each other name
            for (otherNameInd = 0; otherNameInd < names.length; otherNameInd++)
            {
                if (nameInd != otherNameInd && names[otherNameInd].toLowerCase().indexOf(substr) > -1)
                {
                    foundMatch = true;
                    break;
                }
            }

            if (!foundMatch)
            {
                // This substr works!
                uniqueNames[nameInd] = substr;
                break windowLoop;
            }
        }
    }
} 
```

但我不得不想象有一个更优雅的解决方案，使用尝试/前缀树、后缀数组或类似的东西。

**编辑：我相信这是所选答案在 JavaScript 中以编程方式采用的形式：**

```
var names = ["Anne", "Anthony", "LouAnn", "Kant", "Louise", "ark"];
var uniqueNames = [], permutations = {}, permutation, nameInd, windowSize, substrInd, substr;

// For each name
for (nameInd = 0; nameInd < names.length; nameInd++)
{
    var name = names[nameInd];
    // For each possible substring length
    windowLoop:
    for (windowSize = 1; windowSize <= name.length; windowSize++)
    {
        // For each starting index of a substring
        for (substrInd = 0; substrInd <= name.length-windowSize; substrInd++)
        {
            substr = name.substring(substrInd,substrInd+windowSize).toLowerCase();
            permutations[substr] = (typeof permutations[substr] === "undefined")?nameInd:-1;
        }
    }
}

for (substr in permutations)
{
    permutation = permutations[substr];
    if (permutation !== -1 && ((typeof uniqueNames[permutation] === "string" && substr.length < uniqueNames[permutation].length) || typeof uniqueNames[permutation] === "undefined"))
    {
        uniqueNames[permutation] = substr;
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-08-28T05:13:04.947

这个问题可以在**O(N*L*L*L)**复杂度中解决。该方法将使用后缀尝试。trie 的每个节点还将存储前缀计数，该计数表示从根遍历到该节点时形成的子串出现在所有插入的后缀中的次数。

我们将构建**N+1**次尝试。第一个 trie 将是全局的，我们会将所有**N**字符串的所有后缀插入其中。**对于包含相应后缀的N**个字符串中的每一个，接下来的**N**次尝试都是本地的。

 **这个构建尝试的预处理步骤将在**O(N*L*L) 中完成。**

现在一旦构建了尝试，对于每个字符串，我们可以开始查询子字符串（从最小长度开始）在全局 trie 和对应于该字符串的 trie 中出现的次数。如果两者都相同，则意味着它不包含在除自身之外的任何其他字符串中。这可以在**O(N*L*L*L)**中实现。复杂度可以解释为每个字符串的 N，考虑每个子字符串的 L*L，以及在 trie 中执行查询的 L。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-05-24T14:06:48.953

如果您构建一个通用后缀树，您只需要找到每个字符串的中缀从其他字符串的中缀分支的最浅点，并将标签带到该分支点加上一个“区分”字符。关键是必须有这样一个额外的字符（它可能只在每个字符串末尾的元字符处分支），并且分支点可能不会导致叶子，它可能会导致子树with 全部来自同一个字符串（因此必须考虑内部节点）。

对于每个字符串 S，找到最浅的（按父标签深度）节点 N，它只包含来自 S 的叶子，并且其边缘标签包含至少一个字符。从根到 N 的父节点的路径标签，加上从通向 N 的边缘标签的一个字符，是 S 的最短中缀，在其他字符串中找不到。

我相信只包含一个字符串中的叶子的节点的标签可以在构造期间或通过 GST 的 O(N) 扫描来完成；那么扫描最终的树并为每个字符串保持运行最小值是一件简单的事情。所以都是O(N)。

（编辑——我还不能回复评论）

澄清一下，后缀树中的每个后缀都有一个节点，它从其他后缀分支出来；这里的目标是找到每个字符串的 /a 后缀，该字符串在最小深度处从*所有其他字符串*的后缀分支出来，由到该节点的路径标签来衡量。我们所需要的只是在该点之后的一个额外字符，以拥有一个不会出现在任何其他字符串中的子字符串。

例子：

字符串：abbc、abc

使用 Ukonnen 算法，在第一个字符串之后，我们有一个仅包含该字符串后缀的后缀树；我将在这里用 [1] 标记它们：

```
abbc[1]
b
 bc[1]
 c[1]
c[1] 
```

接下来我们插入字符串 2 的后缀：

```
ab
  bc[1]
  c[2]
b
 bc[1]
 c
  [1]
  [2]
c
 [1]
 [2] 
```

现在我们要找到最短的字符串，它可以通向一个只有 [1] 的分支；我们可以通过扫描所有 [1] 并查看它们的直系父母来做到这一点，我将在此处按路径标签列出，加上一个字符（我将在下面使用）：

```
abbc:  abb
bbc: bb
bc: bc[1]
c: c[1] 
```

请注意，我已经包含了 [1]，因为它是区分 [1] 和 [2] 的其他相同后缀的元字符。这在识别在多个字符串中重复的子字符串时很方便，但对我们的问题没有用处，因为如果我们删除 [1]，我们最终会得到一个出现在 [2] 中的字符串，即它不是候选字符串。

现在，右边的标签都没有出现在任何其他字符串中，所以我们选择最短的不包括元字符的标签，即 bb。

同样，第二个字符串有以下候选：

```
abc: abc
bc: bc[2]
c: c[2] 
```

只有一个结尾没有元字符，所以我们必须使用 abc。

我的最后一点是，每个字符串的最小查找不必一次发生一次。可以扫描 GST 一次以将节点标记为包含来自一个字符串 ([1],[2],..[n]) 或“混合”的叶子，然后是每个字符串的最小非共享字符串（我会将这些称为“区分中缀”）也可以一次性计算出来。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-01T08:52:55.713

说`N`是字符串的数量，是字符串`L`的最大长度。你正在做`N*L*L*N`迭代。

我只能通过用一次迭代换取额外的内存来稍微改进它。对于每个可能的子串长度（`L`迭代），

*   枚举每个名称 ( `N*L`) 中该长度的所有子字符串，并将其与名称的索引一起存储到哈希表 ( `1`) 中。如果这个子字符串已经有一个索引，你知道它不起作用，那么你用一些特殊值替换索引，比如`-1`.

*   遍历哈希表，获取索引不存在的子字符串`-1`——这是它们对应索引的答案，但只有在该名称在前一次迭代中没有更短的答案时才使用它们

通过将引用存储回现有字符串而不是复制子字符串，可以大大减少内存使用量。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2021-05-23T16:57:39.200

```
 for(String s : strArr) { //O(n)
      //Assume the given string as shortest and override with shortest
       result.put(s, s);   
       for(int i = 0; i < s.length(); i++) { // O(m)              
          for (int j = i + 1; j <=s.length(); j++) {
               String subStr = s.substring(i, j);
               boolean isValid = true;
               for(String str2: strArr) { // O(n)
                   if(str2.equals(s)) // Same string cannot be a substring
                     continue;

                    if(str2.contains(subStr)) {
                        isValid = false;
                        break;
                    }
               }

               if(isValid && subStr.length() < result.get(s).length()) 
                   result.put(s, subStr);
           }
        } 
   } 

   return result; 
```**

# python - 今天发生的 Django 过滤器事件

> ID：11245483
> 
> 赞同：22
> 
> 时间：2012-06-28T13:14:10.723
> 
> 标签：python, django

我正在努力在 Django 过滤器中逻辑地表示以下内容。我有一个“事件”模型和一个位置模型，可以表示为：

```
class Location(models.Model):
    name = models.CharField(max_length=255)

class Event(models.Model):
    start_date = models.DateTimeField()
    end_date = models.DateTimeField()
    location = models.ForeignKeyField(Location)

    objects = EventManager() 
```

对于给定的位置，我想选择今天发生的所有事件。我已经通过 EventManager 中的 'bookings_today' 方法尝试了各种策略，但正确的过滤器语法让我望而却步：

```
class EventManager(models.Manager):
    def bookings_today(self, location_id):
        bookings = self.filter(location=location_id, start=?, end=?) 
```

date() 失败，因为这会将时间归零，白天的时间对应用程序至关重要，日期的最小值和最大值也是如此，并将它们用作书挡。此外，还有多种可能的有效配置：

```
start_date < today, end_date during today
start_date during today, end_date during today
start_date during today, end_date after today 
```

我需要编写一整套不同的选项还是有更简单优雅的方法？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-06-29T15:15:00.037

您将需要两个不同的`datetime`阈值 -`today_start`和`today_end`：

```
from datetime import datetime, timedelta, time

today = datetime.now().date()
tomorrow = today + timedelta(1)
today_start = datetime.combine(today, time())
today_end = datetime.combine(tomorrow, time()) 
```

今天发生的任何事情都必须在*之前开始* `today_end` **并在***之后* 结束`today_start`，所以：

```
class EventManager(models.Manager):
    def bookings_today(self, location_id):
        # Construction of today_end / today_start as above, omitted for brevity
        return self.filter(location=location_id, start__lte=today_end, end__gte=today_start) 
```

（PS有一个`DateTimeField`（不是`DateField`）被称为`foo_date`是令人恼火的误导 - 考虑公正`start`和`end`......）

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2018-03-04T11:52:15.113

我看到的答案都不是时区感知的。

你为什么不这样做：

```
from django.utils import timezone

class EventManager(models.Manager):
    def bookings_today(self, location_id):
        bookings = self.filter(location=location_id, start__gte=timezone.now().replace(hour=0, minute=0, second=0), end__lte=timezone.now().replace(hour=23, minute=59, second=59)) 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-06-28T13:22:16.920

您需要使用这样的范围：

```
class EventManager(models.Manager):
    def bookings_today(self, location_id):
        from datetime import datetime
        now = datetime.now()
        bookings = self.filter(location=location_id, start__lte=now, end__gte=now)
        return bookings 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2018-11-23T08:41:06.570

`timezone.localtime(timezone.now()).date()`为您提供正确的日期。

要获取今天（`start`今天）发生的事件：

```
from django.utils import timezone

class EventManager(models.Manager):
    def bookings_today(self, location_id):
        t = timezone.localtime(timezone.now())
        bookings = self.filter(location=location_id, start__year = t.year,
            start__month = t.month, start__day = t.day, ) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-29T10:35:36.897

我认为 exclude 是你的朋友！

```
today = datetime.date.today()
tomorrow = today + datetime.timedelta( days = 1 )
self.filter( location = location_id ).exclude( end_date__lt = today ).exclude( start_date__gte = tomorrow ) 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-28T13:20:37.720

这个怎么样：`pub_date__gte=datetime(2005, 1, 1)`？使用`_gte`和`__lte`使用链接方法限制一天内的开始和结束。

也许像`self.filter(start__gte=datetime(2005, 1, 1)).filter(end__lte=datetime(2005, 1, 1))`. `lte`代表小于或等于，`gte`代表大于或等于。

我在[django doc](https://docs.djangoproject.com/en/dev/topics/db/queries/#field-lookups)中找到它。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2021-05-20T10:19:38.760

我有一个建议

```
class Car:
      name = models.CharField()
      launched_date = models.DateTimeField() 
```

按今天的日期过滤日期时间字段非常困难。即使您使用 timezone.now() - 您也不会得到正确的输出。因为 timezone.now() 也有时间。

datetime 字段有时间，因此即使您提供正确的日期，时间也不会匹配。

所以

> 最好使用 datefield 进行基于日期的过滤

```
class Car:
      name = models.CharField()
      launched_date = models.DateField() 
```

问题的答案：-

```
 from django.utils.timezone import datetime 
    today = datetime.today()
    events_for_today = Event.objects.filter(start_date__year=today.year,
                        start_date__month=today.month,
                         start_date__day=today.day) 
```

# java - 如何在 HashMap 中找到与最大值关联的键？

> ID：11245487
> 
> 赞同：-1
> 
> 时间：2012-06-28T13:14:16.297
> 
> 标签：java, data-structures, indexing, hashmap

我想找到与 a 中的最大值关联的键`HashMap<Integer,Integer>`。

我[在 Java Map 中看到了 Finding Key associated with max Value](https://stackoverflow.com/questions/5911174/finding-key-associated-with-max-value-in-a-java-map)的问题，但使用时有一定的限制`HashMap`。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T14:05:17.273

您可以在这里做的只是对您的 HashMap 进行排序并选择第一个或最后一个键以获得最大值或最小值。

```
public LinkedHashMap<Integer,Integer> sortHashMapByValues(HashMap<Integer,Integer> passedMap) {
   List<Integer> mapKeys = new ArrayList<Integer>(passedMap.keySet());
   List<Integer> mapValues = new ArrayList<Integer>(passedMap.values());
   Collections.sort(mapValues);
   Collections.sort(mapKeys);

   LinkedHashMap<Integer,Integer> sortedMap = 
       new LinkedHashMap<Integer,Integer>();

   Iterator valueIt = mapValues.iterator();
   while (valueIt.hasNext()) {
       Object val = valueIt.next();
    Iterator keyIt = mapKeys.iterator();

    while (keyIt.hasNext()) {
        int key = (Integer)keyIt.next();
        int comp1 = (Integer)passedMap.get(key);
        int comp2 = (Integer)val;

        if (comp1 == comp2){
            passedMap.remove(key);
            mapKeys.remove(key);
            sortedMap.put(key,(Integer) val);
            break;
        }

    }

}
return sortedMap;
} 
```

请记住 - 它们可能是多个具有相同值的键。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T13:42:29.613

只要你承诺 map 是 type `HashMap`，你不会比遍历 map 中的所有键/值对，寻找最大值更好。这样的哈希表是在内部组织的，以便通过哈希码找到*键的最大速度；*组织对与这些键关联的值漠不关心。

为了最好地解决您的问题，您需要对值进行*倒排索引*。由于原始映射中的多个键可以具有相同的值（假设它不是[*双射*](http://en.wikipedia.org/wiki/Bijection)），因此倒排索引实际上是一个*multimap*，其中任何给定的整数键（取自原始映射值的集合）都可以是与任意数量的整数值（这是您的原始地图键）相关联。

如果你的倒排索引是 type `NavigableMap`，值类型是整数的集合，那么你可以使用该[`NavigableMap#lastEntry()`](http://docs.oracle.com/javase/7/docs/api/java/util/NavigableMap.html#lastEntry%28%29)方法找到最大整数键及其对应值的配对。或者，如果你手头只有一个`SortedMap`，你仍然可以使用它的[`SortedMap#lastKey()`](http://docs.oracle.com/javase/7/docs/api/java/util/SortedMap.html#lastKey%28%29)方法来找到有问题的密钥。这假设地图是按整数的自然顺序排列的，从最低到最高。

[Guava 库](http://code.google.com/p/guava-libraries/)提供了[一组多映射类型](http://code.google.com/p/guava-libraries/wiki/NewCollectionTypesExplained#Multimap)，其中[`TreeMultimap`](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/collect/TreeMultimap.html)类型`SortedMap`通过其[`TreeMultimap#asMap()`](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/collect/TreeMultimap.html#asMap%28%29)方法公开类型视图。我建议你先尝试使用那个。

* * *

如果您只需要为给定的输入映射找到此答案*一次*，并且不想费心构建整个倒排索引，请尝试以下*O(n)*解决方案：

```
public static <T extends Number & Comparable<? super T>>
Collection<? extends T> keysForMaxValueIn(Map<? extends T, ? extends T> map) {
  final int size = map.size();
  switch (size) {
    case 0:
      return Collections.emptySet();
    case 1:
      return Collections.singleton(map.keySet().iterator().next());
    default:
      final T max = Collections.max(map.values());
      // We know that there will be no duplicates in the original key set.        
      final Collection<T> keys = new ArrayList<T>(size);
      for (Map.Entry<? extends T, ? extends T> entry : map.entrySet())
        if (max.equals(entry.getValue()))
          keys.add(entry.getKey());
      return keys;
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T14:16:51.243

由于`HashMap`没有排序，最简单的解决方案可能是最好的。如果你只想要一个键，那么它只是

```
Comparator<Map.Entry<Integer, Integer>> comparator =
  new Comparator<Map.Entry<Integer, Integer>>() {
    public int compare(
        Map.Entry<Integer, Integer> e1, Map.Entry<Integer, Integer> e2) {
      return e1.getValue().compareTo(e2.getValue());
    }
};
return Collections.max(map.entrySet(), comparator).getKey(); 
```

如果您想要与最大值关联的*所有键，那就有点棘手了；*你可能会做类似的事情

```
Integer bestSeenValue = null;
List<Integer> bestKeys = new ArrayList<>();
for (Map.Entry<Integer, Integer> entry : map.entrySet()) {
  if (bestSeenValue == null || entry.getValue() > bestSeenValue) {
    bestSeenValue = entry.getValue();
    bestKeys.clear();
  }
  if (entry.getValue().equals(bestSeenValue)) {
    bestKeys.add(entry.getKey());
  }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-29T04:49:54.970

此代码将打印所有具有最大值的键

```
public class NewClass4 {
    public static void main(String[] args)
    {
        HashMap<Integer,Integer>map=new HashMap<Integer, Integer>();
        map.put(1, 50);
        map.put(2, 60);
        map.put(3, 30);
        map.put(4, 60);
        map.put(5, 60);
        int maxValueInMap=(Collections.max(map.values()));  // This will return max value in the Hashmap
        for (Entry<Integer, Integer> entry : map.entrySet()) {  // Itrate through hashmap
            if (entry.getValue()==maxValueInMap) {
                System.out.println(entry.getKey());     // Print the key with max value
            }
        }

    }
} 
```

# c# - 将 XML 正确反序列化为类

> ID：11245500
> 
> 赞同：1
> 
> 时间：2012-06-28T13:14:55.727
> 
> 标签：c#, .net, xml, serialization

我已经设法从几个类轻松生成 XML 文件，如下所示；

```
public class AllConfig : XMLEncapsulator
{
    [XmlElement("Database-Settings")]
    public DataBaseConfiguration databaseConfiguration { get; set; }
    [XmlElement("Merlin-Settings")]
    public MerlinConfiguration merlinConfiguration { get; set; }
}

public class DataBaseConfiguration : XMLEncapsulator
{
    public string dbIP { get; set; }
    public int ?port { get; set; }
    public string username { get; set; }
    public string password { get; set; }
}

public class MerlinConfiguration : XMLEncapsulator
{
    public string MerlinIP { get; set; }
    public int ?MerlinPort { get; set; }
    public int ?RecievingPort { get; set; }
}

// load classes with information, then;

  try
        {
            allConfig.databaseConfiguration = dbConfig;
            allConfig.merlinConfiguration = merlinConfig;
            allConfig.Save();
        }
        catch (Exception ErrorFinalisingSave)
        {
            MessageBox.Show(ErrorFinalisingSave.Message + "3");
        } 
```

这完美地工作并给了我：

```
<AllConfig xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
 <databaseConfiguration>
 <dbIP></dbIP>
 <port></port>
 <username></username>
 <password></password>
</databaseConfiguration>
<merlinConfiguration>
 <MerlinIP></MerlinIP>
 <MerlinPort></MerlinPort>
 <RecievingPort></RecievingPort>
 </merlinConfiguration>
</AllConfig> 
```

但是，我该如何将其重新检索到我的表单中？所以我有这样的东西，但我似乎无法让它工作；

```
 AllConfig allConfig;
    DataBaseConfiguration dbConfig;
    MerlinConfiguration merlinConfig;

  //need to load here.

//check if values loaded are null, and then load them if they exist into textboxes and such. 
```

我应该加载两个配置类，然后将它们分配给整个配置类吗？还是我需要加载整个类并为此分配子配置类，就像这样；

```
 allConfig = new AllConfig();

                dbConfig = new DataBaseConfiguration();
                merlinConfig = new MerlinConfiguration();

                allConfig.databaseConfiguration = dbConfig;
                allConfig.merlinConfiguration = merlinConfig;

                allConfig.databaseConfiguration.Load();
                allConfig.merlinConfiguration.Load(); 
```

编辑：这是我的加载方法；

```
 public virtual void Load()
{
    if (File.Exists(DeviceManager.path))
    {
        StreamReader sr = new StreamReader(DeviceManager.path);
        XmlTextReader xr = new XmlTextReader(sr);
        XmlSerializer xs = new XmlSerializer(this.GetType());
        object c;
        if (xs.CanDeserialize(xr))
        {
            c = xs.Deserialize(xr);
            Type t = this.GetType();
            PropertyInfo[] properties = t.GetProperties();
            foreach (PropertyInfo p in properties)
            {
                p.SetValue(this, p.GetValue(c, null), null);
            }
        }
        xr.Close();
        sr.Close();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T14:15:36.950

以下是我将如何使用您的数据类型来实现它。正如其他人所说，我会简单地删除`XMLEncapsulator`您从中派生数据类型的内容。另外，请注意，在生成的 xml 中，`XmlElement`您指定的属性现在受到尊重。

```
public void Test()
{
   var dbConfig = new DataBaseConfiguration();
   dbConfig.dbIP = "127.0.0.1";
   dbConfig.port = 12345;
   dbConfig.username = "harlam357";
   dbConfig.password = "password";
   var merlinConfig = new MerlinConfiguration();
   merlinConfig.MerlinIP = "192.168.0.1";
   merlinConfig.MerlinPort = 8080;
   merlinConfig.RecievingPort = 8081;
   var config = new AllConfig { databaseConfiguration = dbConfig, merlinConfiguration = merlinConfig };

   string xml = Serialize(config);
   var config2 = Deserialize<AllConfig>(xml);

   Debug.Assert(config2.databaseConfiguration.dbIP == "127.0.0.1");
   Debug.Assert(config2.databaseConfiguration.port == 12345);
   Debug.Assert(config2.databaseConfiguration.username == "harlam357");
   Debug.Assert(config2.databaseConfiguration.password == "password");
   Debug.Assert(config2.merlinConfiguration.MerlinIP == "192.168.0.1");
   Debug.Assert(config2.merlinConfiguration.MerlinPort == 8080);
   Debug.Assert(config2.merlinConfiguration.RecievingPort == 8081);
}

public static string Serialize<T>(T value) where T : class
{
   if (value == null) return null; // throw or whatever fits your use case

   var xmlSerializer = new XmlSerializer(typeof(T));
   using (var stream = new MemoryStream())
   {
      xmlSerializer.Serialize(stream, value);
      return Encoding.UTF8.GetString(stream.GetBuffer());
   }
}

public static T Deserialize<T>(string xml) where T : class
{
   if (xml == null) return null; // throw or whatever fits your use case

   var xmlSerializer = new XmlSerializer(typeof(T));
   using (var stream = new MemoryStream(Encoding.UTF8.GetBytes(xml)))
   {
      return (T)xmlSerializer.Deserialize(stream);
   }
} 
```

生成的 XML

```
<?xml version="1.0"?>
<AllConfig xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
  <Database-Settings>
    <dbIP>127.0.0.1</dbIP>
    <port>12345</port>
    <username>harlam357</username>
    <password>password</password>
  </Database-Settings>
  <Merlin-Settings>
    <MerlinIP>192.168.0.1</MerlinIP>
    <MerlinPort>8080</MerlinPort>
    <RecievingPort>8081</RecievingPort>
  </Merlin-Settings>
</AllConfig> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T13:31:24.370

您正在保存您的课程`allConfig.Save();`并尝试加载

```
allConfig.databaseConfiguration.Load();
allConfig.merlinConfiguration.Load(); 
```

看起来你没有`XmlSerializer`正确使用。所以试试这个：

```
public class Person
{
  public string Name;
  public int Age;
}

p.Name = "Stacey"; p.Age = 30;

//serialize
XmlSerializer xs = new XmlSerializer (typeof (Person));

using (Stream s = File.Create ("person.xml"))
  xs.Serialize (s, p);

//deserialize
Person p2;
using (Stream s = File.OpenRead ("person.xml"))
  p2 = (Person) xs.Deserialize (s);

Console.WriteLine (p2.Name + " " + p2.Age);   // Stacey 30 
```

[简而言之 C#](http://www.albahari.com/nutshell/cs4ch16.aspx)

更新：在这里，我对您的代码采用示例。我删除了 XmlEncapsulator，因为我认为它实现了 Save 和 Load 方法，而这并不是真正需要的。如果你真的需要它，你可以退货。不要认为某些事情可能会改变；所以，这里的代码：

```
 AllConfig all = new AllConfig();
         all.databaseConfiguration = new DataBaseConfiguration();
         all.databaseConfiguration.dbIP = "123";
         all.databaseConfiguration.password = "asd";
         all.databaseConfiguration.port = 123;
         all.databaseConfiguration.username = "sad";
         all.merlinConfiguration = new MerlinConfiguration();
         all.merlinConfiguration.MerlinIP = "123";
         all.merlinConfiguration.MerlinPort = 123;
         all.merlinConfiguration.RecievingPort = 123;

        //serialize 
        XmlSerializer xs = new XmlSerializer(typeof(AllConfig));
        using (Stream s = File.Create ("config.xml"))
            xs.Serialize (s, all); 
        //deserialize 
        AllConfig all2;  
        using (Stream s = File.OpenRead ("config.xml"))
            all2 = (AllConfig)xs.Deserialize(s);
        Console.WriteLine(all2.ToString()); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-28T13:23:13.670

这是用于从 Xml 反序列化对象的通用方法。这有帮助吗？

```
public static T Deserialize<T>(string xml) where T : class, new()
{
    if (string.IsNullOrEmpty(xml))
    {
        throw new ArgumentNullException("xml");
    }

    return (T)Deserialize(new MemoryStream(Encoding.UTF8.GetBytes(xml)));
}

public static T Deserialize<T>(Stream xmlStream) where T : class, new()
{
    if (xmlStream == null)
    {
        throw new ArgumentNullException("xmlStream");
    }

    return (T)xmlSerializer.Deserialize(xmlStream);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-28T14:09:36.117

解决了我自己的问题。这就是我加载它的方式，最后我最终这样做了；

```
allConfig = new AllConfig();
                dbConfig = new DataBaseConfiguration();
                merlinConfig = new MerlinConfiguration();
                allConfig.databaseConfiguration = dbConfig;
                allConfig.merlinConfiguration = merlinConfig;
                allConfig.Load(); 
```

所以我创建了一个我序列化的类的实例，然后创建了包含关闭的类，并将它们分配给主类。然后我加载了主类（我假设通过序列化程序填充了它包含的类，然后我像这样访问它们；

```
allConfig.databaseConfiguration.port;
allConfig.databaseConfiguration.username; 
```

等等。感谢您的建议，尽管伙计们，真的帮助了我。

# facebook - Facebook PHP API 扩展访问令牌

> ID：11245504
> 
> 赞同：0
> 
> 时间：2012-06-28T13:15:18.527
> 
> 标签：facebook, api, facebook-access-token

我前段时间正在使用 FB PHP API。现在，当 facebook 弃用 offline_access 时，有些事情发生了变化。好吧，我在我的应用程序配置中禁用了offline_access。

我登录，用户授权我的应用程序，然后返回我的页面。此令牌有 60 天的到期时间。根据我在论坛上读到的内容（我检查了这个），当 access_token 过期时，没有办法更新它。出于这个原因，我试图在 60 天到期时间之前延长访问令牌。

```
 $this->_oauthRequest(
        $this->getUrl('graph', '/oauth/access_token'),
        $params = array(    'client_id' => $this->getAppId(),
                            'client_secret' => $this->getAppSecret(),
                            'grant_type'=>'fb_exchange_token',
                            'fb_exchange_token'=>$this->getAccessToken(),
                      )); 
```

现在，有什么方法可以知道或设置扩展 access_token 的过期时间吗？因此，我需要知道这个“扩展访问令牌”何时会过期，以便在过期之前再次扩展它。

我希望你能理解我的英语！：） 多谢你们！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T14:25:50.520

您只能续订。如果您首先获得一个短期访问令牌，则扩展一个长期访问令牌 - 这需要用户与您的应用程序交互。

# .net - Visual Studio 可以覆盖应用程序吗？

> ID：11245507
> 
> 赞同：0
> 
> 时间：2012-06-28T13:15:27.003
> 
> 标签：.net

我有两个 Visual Studio vb.NET 应用程序。以前，我将每个应用程序分别发布为应用程序 A 和应用程序 B。最近，我重写了应用程序 A 以合并 A 和 B。现在我希望 B 指向 A，所以如果用户在他们的计算机上有 A 或 B ，两个应用程序都将加载应用程序 A。我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T15:58:12.323

如果您正在谈论 ClickOnce 应用程序，那么您希望将 B 替换为一个小程序来启动 A 的应用程序文件。System.Diagnostics.Process.Start 可能会这样做。不确定这是否适用于在线文件。System.Deployment 中可能有更具体的内容来启动 ClickOnce 应用程序。

# c - 使用 webkitgtk+ 加载资源

> ID：11245511
> 
> 赞同：1
> 
> 时间：2012-06-28T13:16:03.633
> 
> 标签：c, webkit, gtk

当我调用 webkit_web_view_load_string() 将 html 内容加载到 webkitview 时，webkit 总是拒绝加载 html 内容中引用的本地文件或资源（css、javascript、图像）。

注意：我正在使用 GResource 将资源加载到二进制文件中？这是一个例子：

```
GBytes *data;
GResource *resource;
GByteArray* gbarray;  resource = one_file_get_resource();

. 
```

. . .

```
g_resources_register (resource);
data = g_resource_lookup_data (resource,"/com/test/resources/index.html", G_RESOURCE_LOOKUP_FLAGS_NONE,NULL);
gbarray  = g_bytes_unref_to_array(data);
const gchar* data_char = gbarray->data; 
```

. . .

```
webkit_web_view_load_string(webView, data_char, NULL, NULL,""); 
```

这是我的 GResources xml 文件：

```
 <?xml version="1.0" encoding="UTF-8"?>
<gresources>
  <gresource prefix="/com/test">
    <file>resources/index.html</file>
    <file>resources/style.css</file>
  </gresource>
</gresources> 
```

现在我的问题是 index.html 已加载但没有 css 文件。我得到了没有样式的html文件！我该如何解决这个问题，谢谢？！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T14:08:09.160

您应该以某种方式告诉 WebKit 可以加载本地资源。您可以通过使用`webkit_web_view_load_uri`并确保使用`file://`URI 来做到这一点。否则，WebKit 将假定字符串（在 load_string 中）来自不受信任的来源，因此不允许访问本地资源。

# iphone - 测量文本宽度

> ID：11245526
> 
> 赞同：1
> 
> 时间：2012-06-28T13:16:42.550
> 
> 标签：iphone, xamarin.ios, core-graphics, uilabel

我正在尝试使用 CoreGraphics 绘制一些文本。不幸的是，没有返回文本宽度的方法。我尝试使用这种方法获取宽度：

```
private float GetTextWidth(CGContext context, string text)
    {
        float   startWidth, 
                endWidth,
                textWidth;
        startWidth = context.TextPosition.X;
        context.SetTextDrawingMode(CGTextDrawingMode.Invisible);
        context.ShowText(text);
        endWidth = context.TextPosition.X;
        textWidth = endWidth - startWidth;
        return textWidth;
    } 
```

但如果我想要多行文本，我还需要考虑字体。所以我考虑使用 UILable 并从中获取值，执行以下操作：

```
RectangleF lableRect = new RectangleF((float)rect.X, (float)rect.Y, (float)rect.Width, (float)rect.Height);
            UILabel lable = new UILabel(lableRect){
                Font = UIFont.FromName(font.Family.ToString(), (float)font.Size),
                Text = text,
            };
SizeF uiSize = lable.StringSize(lable.Text, lable.Font); 
```

虽然高度似乎还可以，但宽度不正确。知道为什么吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-28T20:09:36.493

试试`NSString`。它具有各种重载，例如：

```
SizeF size = new NSString (s).StringSize (font, UIScreen.MainScreen.Bounds.Width, UILineBreakMode.TailTruncation); 
```

如果您想要 a`UILabel`适合包含的字符串，您也可以调用`UILabel.SizeToFit()`. 或者，如果您想知道 UILabel 中字符串的大小，请使用`UILabel.StringSize()`

# javascript - 无法加载文件或程序集“Noesis.Javascript.dll”

> ID：11245527
> 
> 赞同：3
> 
> 时间：2012-06-28T13:16:43.143
> 
> 标签：javascript, asp.net, windows, c#-3.0

我正在尝试使用 Noesis.Javascript.dll 在 Asp.net 中运行 java Script 代码，但我遇到了以下错误消息，因此任何人都可以帮助我解决这个问题。

> {“无法加载文件或程序集'Noesis.Javascript.dll'或其依赖项之一。应用程序无法启动，因为其并排配置不正确。请查看应用程序事件日志或使用命令行sxstrace.exe 工具了解更多详细信息。（HRESULT 异常：0x800736B1）":"Noesis.Javascript.dll"}

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-13T20:27:41.267

我在运行时遇到了这个错误，当我使用**sxstrace.exe**来获取更多信息的错误消息转储时，结果发现 Noesis.Javascript.dll 需要C++ 可再发行包**Microsoft.VC90.CRT.dll的***确切*版本，即版本 9.0.30729.6161 我在[http://www.microsoft.com/en-us/download/details.aspx?id=26368获得了正确的版本](http://www.microsoft.com/en-us/download/details.aspx?id=26368)

 **但是一定要学习使用 SxSTrace 看看这是否是你的确切问题。使用该工具的一个好的介绍在这里[http://blogs.msdn.com/b/junfeng/archive/2006/04/14/576314.aspx](http://blogs.msdn.com/b/junfeng/archive/2006/04/14/576314.aspx)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-16T14:21:43.550

在我们的例子中（使用库的 0.7 版），我们必须安装 2010 版的 C++ Redistributable：

x64：[http ://www.microsoft.com/en-us/download/confirmation.aspx?id=14632](http://www.microsoft.com/en-us/download/confirmation.aspx?id=14632)**

# iphone - 如何比较一个多于一位小数的数字

> ID：11245528
> 
> 赞同：1
> 
> 时间：2012-06-28T13:16:44.040
> 
> 标签：iphone, xcode, variables, comparison, decimal

我正在尝试比较软件版本...比如说 5.4.9

companysettings.software 是一个 nsstring

```
if ([companysettings.software version //some type of value] < 5.4.9) {

//you need to update blah blah blah

} else {

//proceed with app flow

} 
```

如何比较多于一位小数的数字？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T13:22:34.107

IMO最好将组件分开并连续比较它们。将版本号设为单个数字将引入错误的可能性（例如 5.1.2 = 5.12）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T13:37:04.660

这是更好的答案......在这种情况下，我正在寻找的版本是 6.0.6 6.0.5 将触发 versionLower 为 TRUE

```
NSArray *versionStrings = [companySettings.softwareVersion componentsSeparatedByString:@"."];

BOOL versionLower = FALSE;

for (int i = 0; i < 3; i++) {

    switch (i) {
        case 0:

            if ([[versionStrings objectAtIndex:0] intValue] < 6) {
                versionLower = TRUE;
            }
            break;

        case 1:

            if ([[versionStrings objectAtIndex:1] intValue] < 0) {
                versionLower = TRUE;
            }
            break;

        case 2:

            if ([[versionStrings objectAtIndex:2] intValue] < 6) {
                versionLower = TRUE;
            }
            break;

        default:
            break;
    } 
}

if (!versionLower) {

//version of software is okay... proceed with flow

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-03T13:09:18.013

这篇文章有我找到的最佳答案[比较 Objective-C 中的版本号](https://stackoverflow.com/questions/1978456/comapare-version-numbers-in-objective-c)

> 这是比较版本的最简单方法，请记住 "1" < "1.0" < "1.0.0"：
> 
> ```
> NSString* requiredVersion = @"1.2.0";
> NSString* actualVersion = @"1.1.5";
> 
> if ([requiredVersion compare:actualVersion options:NSNumericSearch] == NSOrderedDescending) {
>   // actualVersion is lower than the requiredVersion
> } 
> ```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-28T13:45:02.363

```
//Suppose these are the versions
NSString *version1 = @"4.3.2";
NSString *version2 = @"3.2.1.8";

//split first two characters of your version
NSString *first2digitversion1 = [version1 substringToIndex:2];
NSString *first2digitversion2 = [version2 substringToIndex:2];

//now get remaining part of string
NSString *remainVersion1 = [version1 substringFromIndex:2];
NSString *remainVersion2 = [version2 substringFromIndex:2];

//now remove the "." from string
remainVersion1 = [remainVersion1 stringByReplacingOccurrencesOfString:@"." withString:@""];
remainVersion2 = [remainVersion2 stringByReplacingOccurrencesOfString:@"." withString:@""];

//now merge both
NSString *comPareStr1 = [[NSString stringWithFormat:first2digitversion1]stringByAppendingString:remainVersion1];
NSString *comPareStr2 = [[NSString stringWithFormat:first2digitversion2]stringByAppendingString:remainVersion2];

// now you will get 4.32 and 3.218 
//and this is the comparision
if([comPareStr1 floatValue] > [comPareStr2 floatValue])
{
    NSLog(@"comPareStr1 is greater");
}
else
{
    NSLog(@"comPareStr2 id greater");
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-28T13:57:17.500

根据您的要求进行一些修改并防止 arrayIndexOfBoundException ：但逻辑很容易理解..

```
 NSString *firstVersion = @"5.4.9";
 NSArray *firstChunks = [firstVersion componentsSeparatedByString: @"."];

 NSString *secondVersion = @"6.4.9";
 NSArray *secondChunks = [secondVersion componentsSeparatedByString: @"."];

  for(int i = 0 ; i< [firstChunks count] ; i++){
      int first = [[firstChunks objectAtIndex:i] intValue];
      int second = [[secondChunks objectAtIndex:i] intValue];
      if(first>second){
         NSLog(@"first version in heigher");
     }
     else
         NSLog(@"second version in heigher");
} 
```

这可能会帮助你

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-06-28T13:21:11.507

这就是我所做的...

从字符串中去掉小数，然后比较

```
NSString *stringWithoutDecimals = [companySettings.softwareVersion stringByReplacingOccurrencesOfString:@"." withString:@""];

if ([stringWithoutDecimals intValue]  >= 606) {

} 
```

# jquery-mobile - jQuery 手机。点击事件

> ID：11245529
> 
> 赞同：1
> 
> 时间：2012-06-28T13:16:46.830
> 
> 标签：jquery-mobile

我需要在每个页面更改或某些元素（a，input[button，submit]，data-role=button）单击事件显示加载消息。我试过这段代码：

```
$(document).live(`pagebeforehide`, function(){
    $.mobile.showPageLoadingMsg();
    //More stuff to do
}); 
```

但它不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T13:40:56.713

我认为您可以在全局配置中进行设置：

*   [http://jquerymobile.com/demos/1.1.0/docs/api/globalconfig.html](http://jquerymobile.com/demos/1.1.0/docs/api/globalconfig.html)

> **loadingMessage 字符串，默认值：“**
> 正在加载” 设置页面加载时显示的文本。如果设置为 false，则消息根本不会出现。
> 
> **loadingMessageTextVisible 布尔值，默认值：false**
> 显示加载消息时文本是否可见。对于加载错误，文本始终可见。

这是 $.mobile.showPageLoadingMsg 方法的文档

*   [http://jquerymobile.com/demos/1.1.0/docs/api/methods.html](http://jquerymobile.com/demos/1.1.0/docs/api/methods.html)

这是一个使用带有点击事件的加载消息/微调器的示例

*   [http://jsfiddle.net/J8nYh/](http://jsfiddle.net/J8nYh/)

JS

```
$("input, a:jqmData(clickload='show')").on('click', function() {
    console.log('clicked show');
    $.mobile.showPageLoadingMsg("b", "This is only a test", true);
});

$("input, a:jqmData(clickload='spin')").on('click', function() {
    console.log('clicked spin');
    $.mobile.showPageLoadingMsg("b", "This is only a test", false);
});

$("input, a:jqmData(clickload='hide')").on('click', function() {
    console.log('clicked hide');
    $.mobile.hidePageLoadingMsg();
}); 
```

HTML

```
<div data-role="controlgroup" data-type="horizontal">
    <a href="#" id="showMe" data-role="button" data-clickload="show">Show Loading Message</a>
    <a href="#" id="showMe" data-role="button" data-clickload="spin">Show Loading Spinner</a>
    <a href="#" id="hideMe" data-role="button" data-clickload="hide">Hide Loading Message/Spinner</a>
</div> 
```

# iphone - OpenGL ES 1.1：无法转换为 VBO

> ID：11245536
> 
> 赞同：1
> 
> 时间：2012-06-28T13:17:07.550
> 
> 标签：iphone, opengl-es, vbo

我尝试将我的顶点数据转换为 VBO，但总是出现黑屏……我无法弄清楚我的实现有什么问题。在我的渲染中，如果我删除 bindBuffer 调用并将我的顶点指针传递给 glVertexPointer 而不是 0 它可以工作，因此 nbVertices 和顶点被正确填充。

Vec3定义：

```
struct vec3
{
    float x;
    float y;
    float z;
} 
```

创作：

```
glGenBuffers(1, &vertexBuffer);
glBindBuffer(GL_ARRAY_BUFFER, vertexBuffer);
glBufferData(GL_ARRAY_BUFFER, sizeof(vec3) * this->nbVertices, vertices, GL_STATIC_DRAW);
glBindBuffer(GL_ARRAY_BUFFER,0); 
```

渲染：

```
glClear(GL_COLOR_BUFFER_BIT);
glMatrixMode(GL_MODELVIEW);
glLoadIdentity();

// draw cube
glScalef(scaleX, scaleY, scaleZ);

glRotatef(rotX, 1, 0, 0);
glRotatef(rotY, 0, 1, 0);
glRotatef(rotZ, 0, 0, 1);

for (int i=0; i<nbTextures; i++)
{
    glBindTexture(GL_TEXTURE_2D, textureIds[i]);

    glBindBuffer(GL_ARRAY_BUFFER,vertexBuffer);
    glEnableClientState(GL_VERTEX_ARRAY);
    glVertexPointer(3, GL_FLOAT, 0, 0/*this->vertices*/);

    glEnableClientState(GL_NORMAL_ARRAY);
    glNormalPointer(GL_FLOAT, 0, this->normals);

    glEnableClientState(GL_TEXTURE_COORD_ARRAY);
    glTexCoordPointer(2, GL_FLOAT, 0, this->texCoords);

    glDrawArrays(GL_TRIANGLE_STRIP, 0, this->nbVertices);
}

glDisableClientState(GL_VERTEX_ARRAY);
glDisableClientState(GL_NORMAL_ARRAY);
glDisableClientState(GL_TEXTURE_COORD_ARRAY);
glBindBuffer(GL_ARRAY_BUFFER,0); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T14:15:52.350

问题是您将 VBO 与客户端阵列混合在一起。虽然这没有问题，但是当绑定 VBO 时，您不能指定指向客户端数组的指针（就像您为除顶点数组之外的所有其他数组所做的那样）。指针将被视为缓冲区的偏移量。

因此，要么在调用后取消绑定缓冲区`glVertexPointer`：

```
glBindBuffer(GL_ARRAY_BUFFER,vertexBuffer);
glEnableClientState(GL_VERTEX_ARRAY);
glVertexPointer(3, GL_FLOAT, 0, 0/*this->vertices*/);
glBindBuffer(GL_ARRAY_BUFFER,0);

glEnableClientState(GL_NORMAL_ARRAY);
glNormalPointer(GL_FLOAT, 0, this->normals);

glEnableClientState(GL_TEXTURE_COORD_ARRAY);
glTexCoordPointer(2, GL_FLOAT, 0, this->texCoords); 
```

或者，最好不要混合 VBO 和客户端阵列，而是对每个属性使用 VBO。您可以为每个属性使用相同的 VBO，或者将单个数组一个接一个地放置，在这种情况下，您必须稍微使用偏移量，或者将每个顶点的属性数据一个接一个地放置（通常是最好的方法)，以这种方式你也必须使用步幅参数。但是您也可以为每个属性使用不同的 VBO，但在这种情况下，请记住在每次调用之前绑定正确的 VBO `gl...Pointer`，如上所示。

# c# - 如何让触摸屏在 C# 应用程序中使用鼠标事件而不是触摸事件

> ID：11245551
> 
> 赞同：3
> 
> 时间：2012-06-28T13:17:53.133
> 
> 标签：c#, wpf, touch, mouse

我开发了一个 C# 应用程序，它覆盖了一些自定义控件中的 PreviewMouseUp、PreviewMouseMove 和 PreviewMouseDown 事件，以允许通过单击和拖动来滚动滚动查看器。当鼠标用于拖动和滚动时，此自定义代码在非触摸屏上效果很好，但是当我在真正的触摸屏显示器上使用它时，它无法工作，因为当触摸和拖动显示器时 PreviewMouseUp 不会被触发一个指头。

我希望能够以最少的更改使用我现有的代码。这将允许我在笔记本电脑上调试时使用鼠标单击/拖动，并使用触摸屏触摸/拖动。

无论如何配置Windows 7计算机以将所有触摸（PreviewTouchUp，PreviewTouchDown和PreviewTouchMove）视为鼠标事件？

更新：我忘了提。我认为如果不处理 Touch 事件，那么 .NET 之后会自动引发 Mouse 事件。即使我编写的代码当前没有处理触摸事件，这似乎也没有发生。任何想法为什么会发生这种情况？

谢谢，布赖恩

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-28T13:26:37.477

您可以做的是对两者使用相同的方法，如下所示：

```
protected override void OnPreviewMouseUp(MouseButtonEventArgs e)
{
    OnPreviewTouchMouseUp(e);
}

protected override void OnPreviewTouchUp(TouchEventArgs e)
{
    OnPreviewTouchMouseUp(e);
}

private void OnPreviewTouchMouseUp(EventArgs e)
{

} 
```

唯一的区别是您获取鼠标/触摸坐标的方式：

对于触摸：

```
e.GetTouchPoint(this).Position; 
```

对于鼠标：

```
e.GetPosition(this); 
```

# regex - 查找单词的正则表达式以 & 开头并以 & 结尾

> ID：11245552
> 
> 赞同：0
> 
> 时间：2012-06-28T13:17:54.070
> 
> 标签：regex, regex-negation

我想替换 url 中以 & 开头并以 & 结尾的单词，但留下一个 &。例如：`url?&name=test&id=2` 输出应替换`&name=test`为`&newname=againtest i.e url?&newname=againtest&id=2` Please help me using JS

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T13:34:30.667

一种更清洁的方法是替换*被包围`&`*的部分而不是`&`用它替换。环顾断言在这里有帮助：

代替

```
(?<=&)name=test(?=&) 
```

和

```
newname=againtest 
```

这也可以变得更加健壮：

```
(?<=[&?])name=test(?=&|$) 
```

即使在以下示例中也要匹配：

```
url?name=test
url?name=test&foo=bar
url?foo=bar&name=test 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T13:37:39.717

```
var url = 'url?&name=test&id=2';
var regex = /(.*\?&)name=([^&]*)(&.*)/;
var replacementPattern = '$1newname=again$2$3';
var newUrl = url.replace(regex, replacementPattern);
console.log(newUrl);​​​ 
```

上述输出：

```
url?&newname=againtest&id=2 
```

**[jsFiddle 演示](http://jsfiddle.net/sLEEQ/)**

要了解更多信息，请参阅[JavaScript 正则表达式](https://developer.mozilla.org/en/JavaScript/Guide/Regular_Expressions)和[String.replace](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/replace)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T13:31:11.217

尝试以下正则表达式：

```
^\w+\?(&\w+=\w+).* 
```

**解释：**

`^`线的开始

`\w+` 之前的第一句话？

`\?` 逃脱 ？char 因为它在正则表达式中具有特殊含义。我们需要文字吗？字符在这里

`(&\w+=\w+)`在＆符号“& char”之后要替换的键值对组

`.*` 之后的任何字符

您可以将我们拥有的组替换为您要替换的值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-28T13:29:11.837

您需要替换`^([^&]*)(&[^&]+)(&.*)$`为`$1NEWSTRING$3`

[请参阅此处](http://ideone.com/OMqE4)的测试。

# jquery - 如何在 3 秒内隐藏每条消息

> ID：11245553
> 
> 赞同：0
> 
> 时间：2012-06-28T13:18:01.097
> 
> 标签：jquery

我正在尝试在我的应用程序中使用这个呼噜声，所以当点击常规链接时，它会添加消息框，所以我想要的是它保持一些超时，所以现在我的问题是我如何将它设置为全局，因为它正在显示一个一个但是当它在顶部时，它需要 3 秒才能隐藏，所以其余的都在 ques 中，所以在这种情况下，我希望像当我经常点击每个 msg 更多次时，它应该需要 3 秒并隐藏。

[http://kitchen.net-perspective.com/purr-example-4.html](http://kitchen.net-perspective.com/purr-example-4.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T13:24:14.983

首先使用插件的 removeTimer 选项来更改它保持可见的时间。

```
$( notice ).purr(
{
  usingTransparentPNG: true,
  removeTimer:3000 //in milliseconds before disappear
}; 
```

至于您的其余问题，您需要对您希望它做什么做更多的解释:)

**更新**

[上面的工作是将每个超时设置为 3 秒，但是如果这是问题我会尝试使用不同的插件，例如JGrowl](http://stanlemon.net/pages/jgrowl)，它们彼此排在队列中

或者写你自己的，因为它似乎 purr 旨在做到这一点。

**更新2**

如果您将呼叫 purr 包装在检查中以查看它是否存在，您可以将其限制为一次可见 1 个

```
 if(!($('.notice').length > 0)) { //if it dont exist allow another to show.
     $( notice ).purr({
       usingTransparentPNG: true,
       removeTimer:1000
      });
 } 
```

[小提琴](http://jsfiddle.net/BVb9W/2/)

# python - 在服务器端获取 Facebook 内容

> ID：11245560
> 
> 赞同：3
> 
> 时间：2012-06-28T13:18:38.773
> 
> 标签：python, django, facebook

我的目标是开发 iPhone 应用程序，该应用程序可用于查看部分由手机所有者的 Facebook 朋友的数据（状态、照片、视频）组成的内容。

换句话说，iPhone 应用程序应该与一些生成内容的后端服务器交互，并且这个后端应该从 facebook 获取数据。目前我正在考虑使用 Django 作为后端。

我以前没有使用过任何社交 api，我有一种直觉，这种方案中的身份验证可能会导致一些问题，主要是因为我有用户，应该在设备端输入登录/传递和实际内容获取（来自用户的fb 朋友），在服务器端。

什么可以帮助我实施这样的计划？fb api 是否提供这样的东西？

请注意，这不是一个网络项目，我有本机 iPhone 应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T14:16:49.603

这是完全可行的，只是它取决于您在实现 auth 结构的情况下，并理解为 facebook 上的应用程序授予权限的所有操作都需要执行重定向。这可能涉及在您的应用程序外部打开浏览器，或者您可以仅使用 iPhone SDK 进行身份验证，并在 OAuth 过程完成后让客户端设备将 access_token 发送到您的服务器。

对于想要与 Facebook/Twitter/Google + 其他 OAuth 提供程序一起设置自己的身份验证系统的应用程序，这是一种非常常见的方法。您维护与某些 Facebook 用户相关联的本机用户 ID，并在必要时获取访问令牌。获得永久、离线访问的过程已从持久令牌变为您刷新的令牌。我将向您推荐另一个包含所有相关细节的讨论：

[存储 facebook 令牌的字段类型是什么？](https://stackoverflow.com/questions/10389890/what-field-type-to-store-the-facebook-token/10389950#10389950)

一旦获得并保存了有效的 access_token，无论是在持久存储中还是在会话中，您都可以使用它来访问客户端 SDK 用来获取和交换数据的相同端点。这通常通过一些 HTTP 库来完成。例如，用于 PHP 的 SDK 仅通过自动执行身份验证过程，然后将访问凭据嵌入到您的请求数据中，从浏览器窗口中加速此过程。这完全可以在服务器端通过使用带有标准 HTTP 库（python 中的 urllib 或 HTTPlib）的 endpts 并手动将新获得的 access_token 设置为要发送到图形 API 的请求变量来模拟。

如果您要走 python 路线，并且您在客户端的需求将完全通过电话处理，我强烈建议您查看[Flask](http://flask.pocoo.org/)，它是[Werkzeug](http://werkzeug.pocoo.org/) WSGI 库的变体。这个工具真的不能被打败，因为它可以快速旋转输出一些序列化数据（在你的情况下，很可能是直接来自 FB 的 JSON）。我一直喜欢将它用于 Web 服务类型的工作，因为它让您可以决定使用哪些库来满足您的其他需求，从而使部署的代码库尽可能小。

# list - 将不同的函数（取自列表）应用到 For 循环中

> ID：11245566
> 
> 赞同：0
> 
> 时间：2012-06-28T13:18:56.260
> 
> 标签：list, wolfram-mathematica

我有一个功能列表： `DisUFuncList = Table[x^2, {n, 1, M}];`

和参数列表`y`。我的目标是收到这笔款项 `DisUFuncList[[i]] [ y[[i]] ]`。

这是代码：

```
 DisUFuncList = Table[x^2, {n, 1, M}];
Sum2=0;For[i = 1, i <= Length[y], i++, 
Sum2 = Sum2 + Function[x, DisUFuncList[[i]] ] [ y[[i]] ]    ]; 
```

这也不起作用：

```
Apply[Function[DisUFuncList[[2]]], {2} ] 
```

有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T14:20:43.813

例如

```
DisUFuncList[x_] := Table[x^n, {n, 2, 6}]
y = Range[2, 6];
Sum[DisUFuncList[y[[i]]][[i]], {i, Length[y]}] == Sum[i^i, {i, 2, 6}]
(*
-> True
*) 
```

请记住：`Looping in Mathematica is generally considered a bad practice.`

**编辑**

关于您的评论，有很多方法可以做到这一点。这是一个：

```
M = 5;
DisUFuncList = Table[x^n, {n, 1, M}]
y = Range[M]
Sum[DisUFuncList[[i]] /. x -> y[[i]], {i, Length@y}]
(*
 -> 3413  (==Sum[i^i, {i, 5}])
*) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T19:06:21.927

这里有很多问题，其中一些会妨碍您准确理解（我的，无论如何）您所追求的。

首先，x^2 不是 Mathematica 中的函数。函数应该看起来像 #^2& 或者你已经定义了它们。在可能陷入神秘和类似特技的 Mathematica 形式的讨论中，我将尝试通过将我的函数列表定义为来保持一些透明度：

```
 funcList = {Sin, Cos,Tan} 
```

其次，您似乎希望将该函数列表线程化到参数列表上，

```
 argList = {a1, a2, a3} say 
```

部分部分地，最终，如果我正确理解了这个问题，您需要一个可以生成结果的表达式

```
 Sin[a1] + Cos[a2] + Tan[a3] 
```

您可以使用表单让 MapThread 迈出第一步

```
 MapThread[#1@#2&, {funcList, argList}] 
```

那么总和是

```
 Plus@@% 
```

更漂亮，但可能更不透明的是：

```
 Inner[#1@#2&,funcList,argList] 
```

QED 我对这个问题的解释。

我希望这有助于回答您实际提出的问题。

弗雷德·克林格

# mysql - 如何在 daychange 上自动添加数据库行

> ID：11245568
> 
> 赞同：0
> 
> 时间：2012-06-28T13:19:00.170
> 
> 标签：mysql, events

我是数据库新手，所以我有这张表，我想编写某种脚本来每天添加或更改行。最好是在当天变化的时候。

MySQL-Workbench 显然只支持 lua & python 脚本，我不知道语法。

我正在寻找类似的东西

```
onDaychange(){
    SQL-query(INSERT ...)
    SQL-query(UPDATE ...)
} 
```

否则我必须在服务器上运行一个永久的 c# 或 java 程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T13:26:21.957

您需要 MySQL`event`按时间运行。
您可以根据需要安排调用存储过程。

**示例**：

```
delimiter //
drop event if exists event_scheduling_sample;

create event if not exists event_scheduling_sample
--  on schedule every 86400 second starts 00:00:00
--  at timestamp( adddate( current_date, 1 ),'00:00:00' )
--  on schedule every 1 day starts current_timestamp ends current_timestamp + interval '5' day
--  on schedule every 1 day starts current_timestamp ends timestamp( current_date,'23:59:59' )
  on schedule every 1 day starts timestamp( current_date + 1, '00:00:01' )

  comment 'event scheduling sample'
  do
    call db_name.procedure_name();
;
//
delimiter ; 
```

参考：[CREATE EVENT 语法](http://dev.mysql.com/doc/refman/5.6/en/create-event.html)

Event Scheduler 的默认状态为 DISABLED。
您需要通过以下任一语句启用它。

```
SET GLOBAL event_scheduler = ON;
SET @@global.event_scheduler = ON;
SET GLOBAL event_scheduler = 1;
SET @@global.event_scheduler = 1; 
```

当事件调度器打开时，事件调度器线程作为守护进程列在输出中`SHOW PROCESSLIST`，其状态如下所示：

```
mysql> SHOW PROCESSLIST\G
*************************** 1\. row ***************************
     Id: 1
   User: root
   Host: localhost
     db: NULL
Command: Query
   Time: 0
  State: NULL
   Info: show processlist
*************************** 2\. row ***************************
     Id: 2
   User: event_scheduler
   Host: localhost
     db: NULL
Command: Daemon
   Time: 3
  State: Waiting for next activation
   Info: NULL
2 rows in set (0.00 sec) 
```

将事件调度程序设置为 ON 后，您会看到它正在工作。

**参考**：[MySQL 事件调度器配置](http://dev.mysql.com/doc/refman/5.6/en/events-configuration.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T13:31:28.720

您可以为此脚本使用 Cron Job。Cron 是类 Unix 计算机操作系统中基于时间的作业调度程序。cron 使用户能够安排作业（命令或 shell 脚本）在特定时间或日期定期运行。它通常用于自动化系统维护或管理，尽管它的通用性质意味着它可以用于其他目的，例如连接到 Internet

**定时文件**

```
mysql_query("INSERT INTO table (`text`,`date`) VALUES (testing','2012-6-25')");
//According to Date Condtion
mysql_query("UPDATE table SET `text`='testing2',`date`='2012-06-28'"); 
```

# sql - 如何在 SQL 中建模关系“A 包含在 B 中或 A=B”？

> ID：11245570
> 
> 赞同：1
> 
> 时间：2012-06-28T13:19:05.037
> 
> 标签：sql, ms-access, database-design

问题看起来很简单，但我似乎找不到在 MS Access 中实现它的方法。我有一组国家，以及这些国家内部的一组地区。为了模拟国家或地区之间的气体交换，我定义了“平衡区”。这个平衡区可以是整个国家，也可以是一个地区，比如法国北部。

到目前为止，我有三个表：国家->地区->平衡区。在这个模型中，一些地区是“真实的”地区，即真实的国家子集，一些与国家相同。我使用单个字符标签结合国家代码来识别区域，并使用特殊字符“x”来表示该特定区域与国家相同的事实。但是，通过这种方法，我无法表达“x”是特殊的事实，并且在使用时，它表示整个国家。

对我来说，使用 NULL 似乎很自然。但是，在这种情况下，我不能在 (country, tag) 上有一个唯一的索引，因为 Access 将允许多个 (country, NULL) 记录。

有人对此有想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T14:06:23.730

看来你需要这样的东西：

![在此处输入图像描述](../Images/17584f18ac98d6710ae288c6211ff89d.png)

```
CHECK (
    (COUNTRY_ID IS NULL AND REGION_ID IS NOT NULL)
    OR (COUNTRY_ID IS NOT NULL AND REGION_ID IS NULL)
) 
```

在 BLANCING_ZONE 表中，COUNTRY_ID 和 REGION_ID 都可以为 NULL，但 CHECK 强制它们中的一个在任何给定时间都是非 NULL。

因此，要将平衡区域连接到一个国家/地区，只需设置 BLANCING_ZONE.COUNTRY_ID，并将 BLANCING_ZONE.REGION_ID 保留为 NULL。要将其连接到区域，请执行相反的操作。

* * *

不幸的是，Access 仅支持部分外键的[MATCH FULL行为。](http://www.upsizing.co.uk/Art10_MultiPartkeys.aspx)如果它支持[MATCH SIMPLE](http://wiki.burnsoft.net/KB58.ashx)（与大多数 DBMS 一样），您还可以执行以下操作：

![在此处输入图像描述](../Images/44e1cff9fb32ddfaa42287bf2c5cacc6.png)

在 BALNCING_ZONE 表中，COUNTRY_ID 不能为 NULL，而 REGION_NO 可以为 NULL。

要将平衡区连接到一个国家/地区，只需设置 BLANCING_ZONE.COUNTRY_ID 并将 BLANCING_ZONE.REGION_NO 保留为 NULL。要连接到区域，请同时设置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T13:35:25.683

听起来您只需要一张国家和地区的表格，称之为“LandMass”、“Area”或其他。

```
LandMass
========
LandMassId
LandMassParentId
LandMassName
LandMassType 
```

在这种情况下，您可以一直到一个土地所有者：

```
Type="LandOwner"
Parent="MyCity"

Type="City"
Parent="MyState"

Type="State"
Parent="Region"

Type="Region"
Parent="Country"

Type="Country"
Parent="Continent" 
```

类型将是 LandMassType 表的外键

Parent 将是返回 LandMass 表的外键

您还可以创建计算列，以汇总城市级别的土地所有者类型，将城市类型汇总到州级别，等等。

视图也不例外......可以在每个级别创建可更新视图，这基本上按类型对数据进行分区。

* * *

另一方面，也许你需要这种类型的设计：

```
Parcel table
============
Id
ParentId
Name
Type
etc..

Region table
============
Id
Name
etc..

Parcel_Region table
===================
ParcelId
RegionId 
```

这将使您在定义可以由任意数量的地块组成的“区域”时更加灵活，尽管有边界。但是，您必须将这些结果与宗地不参与区域的宗地表合并。换句话说，所有地块都将被视为区域，特定区域可以由任意数量的地块组成。

* * *

这就是所有魔法的所在（我认为这也可以应用于您的模型）

Type 列也可以被视为位掩码：

```
Type 0 = none;
Type 1 = land owner
Type 2 = city
Type 4 = state
Type 8 = country
Type 16 = continent 
```

因此，如果您愿意，X 区可以是一个城市和一个州，方法是给它一个类型值 (City | State) = 6 基本数学很简单：

```
if((Type & 4) > 0) then it's a state.  
if((Type & 2) > 0) then it's a city 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T13:46:17.797

使用您所拥有的 - 将您的 x 字段数据类型更改为布尔值或访问等效值 - 0/1、True/False、Yes/No。创建一个新列并根据 X 更新数据，重命名新列，删除旧列，并将新列重命名为您选择的名称。展望未来，当您插入区域（或此 X 所在的任何地方 - 我不清楚平衡区中有什么）时，如果它是或不是子集（无论您将其命名为什么、父级等），请更新它是真还是假。

```
country
---------
countryid
name, decript, whatever other fields

region
--------
regionid
countryid FK
subset (0 or 1, T/F, Y/N)
name, decript, whatever other fields 
```

# xamarin.android - 在android应用程序中继承应用程序

> ID：11245571
> 
> 赞同：0
> 
> 时间：2012-06-28T13:19:06.440
> 
> 标签：xamarin.android

我有一个小问题（可能真的没什么）。

我有一个像这样开始的小应用程序

```
namespace Paul.App
{
    [Activity(Label = "@string/ApplicationName", MainLauncher = true, Theme =     "@android:style/Theme.NoTitleBar",
    ScreenOrientation = Android.Content.PM.ScreenOrientation.Portrait, Icon = "@drawable/icon")]
public class Paul : Application
{

    public static Paul Application;

    public Paul(IntPtr handle, JniHandleOwnership transfer) : base(handle, transfer)
    { 
```

在这个应用程序中，我有

```
public Database dbm; 
```

数据库是一个做 SQL 事情的类

在这个命名空间中，我还有一个 OnCreate，它调用一个像这样开始的新活动

```
namespace Paul.App.Splash
{
[Activity(Theme = "@style/Theme.Splash", MainLauncher = true, NoHistory = true)]
public class Splash : Activity
{
    protected override void OnCreate(Bundle bundle)
    { 
```

这很好，一切都很好。除了一件事。我无法实例化数据库！

如果我放入 OnCreate 或 Paul(IntPtr...) 并在其他活动中使用

dbm = 新的 DBManager();

飞溅开始，但如果我尝试使用 ((Paul)Application).dbm 访问 dbm，它将返回 null。

如果我在 Splash 活动中这样做

```
((Paul)Application).dbm = new DBManager();
        if (((Paul)Application).dbm.SetupDB() != false)
        {
            Toast.MakeText(this, "Database failed to initialise", ToastLength.Long);
            return;
        } 
```

调试器告诉我 ((Paul) 未知。

这应该是一件简单的事情——我试图实例化一次 SQLite，然后在整个应用程序中使用它。

这里的任何帮助将不胜感激。

保罗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T13:37:14.350

在快速浏览您的代码时，我发现您正在使用 [Activity] 属性装饰您的 Application 类，这是不正确的。相反，您想要做的是使用[`ApplicationAttribute`](http://docs.mono-android.net/?link=T%3aAndroid.App.ApplicationAttribute)，这将导致正确的 AndroidManifest.xml 输出。尝试将其更改为如下所示：

```
[Application(Label = "@string/ApplicationName", Icon = "@drawable/icon")]
public class Paul : Application
{
    // ...
} 
```

# android - Android：应用程序意外关闭，但这很奇怪

> ID：11245585
> 
> 赞同：0
> 
> 时间：2012-06-28T13:20:17.547
> 
> 标签：android, crash

我的应用程序意外关闭，但这很奇怪，因为我正处于开发的开始阶段，所以该应用程序没有任何特别之处！我的第一堂课：

```
package it.mi.action.codmmunicator_2ddecoder;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.Window;
import android.view.WindowManager;

public class Loading extends Activity {
    @Override
    public void onCreate(Bundle savedInstanceState){
    super.onCreate(savedInstanceState);
            requestWindowFeature(Window.FEATURE_NO_TITLE);
            getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,WindowManager.LayoutParams.FLAG_FULLSCREEN);
    setContentView(R.layout.loading);
    final int tempodiattesa=3000;
    Thread schermataattesa=new Thread(){
        int aspetta=0;
        @Override
        public void run(){
            try{
                super.run();
                while(aspetta<tempodiattesa){
                    sleep(100);
                    aspetta+=100;
                }
            }catch(Exception e){
                System.out.println("EXc="+e);
            }finally{
                startActivity(new      Intent(Loading.this,Lettore.class));
                finish();
            }
        }
    };
    schermataattesa.start();
}
} 
```

第二个：

```
package it.mi.action.codmmunicator_2ddecoder;

import android.app.Activity;
import android.os.Bundle;
import android.view.Window;
import android.view.WindowManager;

public class Lettore extends Activity {
@Override
public void onCreate(Bundle savedInstanceState){
    requestWindowFeature(Window.FEATURE_NO_TITLE);
        getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,WindowManager.LayoutParams.FLAG_FULLSCREEN);
    setContentView(R.layout.lettore);
}
} 
```

当它上第二节课时，它崩溃了。xml 是一个正常的线性布局，上面有一个图像。

我确定android清单是正确的：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android" package="it.mi.action.codmmunicator_2ddecoder" android:versionCode="1" android:versionName="1.0" >

<uses-sdk android:minSdkVersion="10" />
<uses-permission android:name="android.permission.CAMERA"/>

<application android:icon="@drawable/ic_launcher" android:label="@string/app_name" android:theme="@android:style/Theme.NoTitleBar">
    <activity android:name="Loading" android:label="@string/app_name" android:screenOrientation="portrait">
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity android:name="Lettore" android:screenOrientation="portrait" android:label="@string/app_name"></activity>
</application>

</manifest> 
```

如果我让应用程序从 Lettore 开始，它就会崩溃。我认为问题出在 Lettore.java 上，但这很荒谬

有人能帮我吗？看到不正常？

**这是我的日志：**

```
06-28 13:41:25.322: D/dalvikvm(403): GC_EXTERNAL_ALLOC freed 51K, 53% free 2552K/5379K, external 716K/1038K, paused 61ms

06-28 13:41:29.353: D/AndroidRuntime(403): Shutting down VM

06-28 13:41:29.353: W/dalvikvm(403): threadid=1: thread exiting with uncaught exception (group=0x40015560)

06-28 13:41:29.363: E/AndroidRuntime(403): FATAL EXCEPTION: main

06-28 13:41:29.363: E/AndroidRuntime(403): android.app.SuperNotCalledException: Activity {it.mi.action.codmmunicator_2ddecoder/it.mi.action.codmmunicator_2ddecoder.Lettore} did not call through to super.onCreate()

06-28 13:41:29.363: E/AndroidRuntime(403):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1613)

06-28 13:41:29.363: E/AndroidRuntime(403):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)

06-28 13:41:29.363: E/AndroidRuntime(403):  at android.app.ActivityThread.access$1500(ActivityThread.java:117)

06-28 13:41:29.363: E/AndroidRuntime(403):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)

06-28 13:41:29.363: E/AndroidRuntime(403):  at android.os.Handler.dispatchMessage(Handler.java:99)

06-28 13:41:29.363: E/AndroidRuntime(403):  at android.os.Looper.loop(Looper.java:123)

06-28 13:41:29.363: E/AndroidRuntime(403):  at android.app.ActivityThread.main(ActivityThread.java:3683)

06-28 13:41:29.363: E/AndroidRuntime(403):  at java.lang.reflect.Method.invokeNative(Native Method)

06-28 13:41:29.363: E/AndroidRuntime(403):  at java.lang.reflect.Method.invoke(Method.java:507)

06-28 13:41:29.363: E/AndroidRuntime(403):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)

06-28 13:41:29.363: E/AndroidRuntime(403):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)

06-28 13:41:29.363: E/AndroidRuntime(403):  at dalvik.system.NativeStart.main(Native Method)

06-28 13:41:32.083: I/Process(403): Sending signal. PID: 403 SIG: 9 
```

我确定android清单是正确的：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android" package="it.mi.action.codmmunicator_2ddecoder" android:versionCode="1" android:versionName="1.0" >

<uses-sdk android:minSdkVersion="10" />
<uses-permission android:name="android.permission.CAMERA"/>

<application android:icon="@drawable/ic_launcher" android:label="@string/app_name" android:theme="@android:style/Theme.NoTitleBar">
    <activity android:name="Loading" android:label="@string/app_name" android:screenOrientation="portrait">
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity android:name="Lettore" android:screenOrientation="portrait" android:label="@string/app_name"></activity>
</application>

</manifest> 
```

如果我让应用程序从 Lettore 开始，它就会崩溃。我认为问题出在 Lettore.java 上，但这很荒谬

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T13:23:37.740

```
super.onCreate() is missing in Lettore class 
```

..

```
public void onCreate(Bundle savedInstanceState){
      super.onCreate(); //<-----------------------------add this
    requestWindowFeature(Window.FEATURE_NO_TITLE);
        getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,WindowManager.LayoutParams.FLAG_FULLSCREEN);
    setContentView(R.layout.lettore);
} 
```

1 - 确认您是否将 Lettore 的条目放在清单中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-28T13:25:52.627

将您的代码更改为：
替换`finally`块：

```
finally{
                startActivity(new      Intent(Loading.this,Lettore.class));
                finish();
            } 
```

和

```
 finally{
        Loading.this.runOnUiThread(new Runnable() {     
                 @Override
                 public void run() {
                  // TODO Auto-generated method stub
                  Loading.this.startActivity(new Intent(Loading.this,Lettore.class));
                  finish();
}
                });

        } 
```

并确保您已在 manifast.xml 中将您的 Lettore 活动注册为：

```
<Activity android:name=".Lettore" /> 
```

编辑：添加 super.onCreate(savedInstanceState); 在 Lettore 活动中为：

```
package it.mi.action.codmmunicator_2ddecoder;

import android.app.Activity;
import android.os.Bundle;
import android.view.Window;
import android.view.WindowManager;

public class Lettore extends Activity {
@Override
public void onCreate(Bundle savedInstanceState){
super.onCreate(savedInstanceState);
    requestWindowFeature(Window.FEATURE_NO_TITLE);
        getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,WindowManager.LayoutParams.FLAG_FULLSCREEN);
    setContentView(R.layout.lettore);
}
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-28T13:47:25.573

添加

```
super.onCreate( savedInstanceState ); 
```

到你的代码

# java - 在浏览器中显示 HTML 字符串

> ID：11245586
> 
> 赞同：2
> 
> 时间：2012-06-28T13:20:18.133
> 
> 标签：java, swing, browser, javafx

我正在开发一个项目，并在 Java 应用程序中嵌入了[JavaFx 浏览器。](https://blogs.oracle.com/geertjan/entry/javafx_browser_as_a_ready)现在，我想在浏览器中显示一些内容。

我想知道有没有办法通过包含 HTML 标签的字符串来显示内容。我不想创建 HTML 文件并显示内容。

我正在寻找类似 JTextPane 的东西。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-28T14:35:54.110

我无法深入研究 JavaFX 浏览器 Netbeans 模块。但如果它在内部使用[JavaFX WebView](http://docs.oracle.com/javafx/2/api/javafx/scene/web/WebView.html)控件，则可以通过 WebView 的 WebEngine 加载包含 HTML 页面（或标记）的字符串值。有关不同的内容加载，请参阅[WebEngine API](http://docs.oracle.com/javafx/2/api/javafx/scene/web/WebEngine.html)。Netbeans 模块应该有一些接口 API 允许这样做。

你想要的方法是[webView.getEngine().loadContent(htmlString)](http://docs.oracle.com/javafx/2/api/javafx/scene/web/WebEngine.html#loadContent(java.lang.String))

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T14:06:12.353

您必须将 < 更改为 <，后跟分号，并将 > 更改为 >，后跟分号。

就像我输入这个答案一样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-01T00:52:18.680

创建“场景”并将其添加到 JFXPanel 时，您希望使用 Platform.runLater 将其放入 JavaFX 线程中：

```
 import javafx.application.Platform;
 import javafx.embed.swing.JFXPanel;

    String HTML_TO_SEND = GetHTML();

    Platform.runLater(new Runnable() {
        @Override
        public void run() {
  browser = new WebView();
  webEngine = browser.getEngine();
  webEngine.loadContent(HTML_TO_SEND);

  browser.setVisible(true);
  Scene scene = new Scene(browser);
    jfxPanel.setScene(scene);

        }
  }); 
```

然后，您可以像往常一样将 jfxPanel 添加到您的 Swing 内容中。

# php - Wordpress 中的哪些 PHP 文件负责创建由“添加页面”生成的内页布局？

> ID：11245588
> 
> 赞同：0
> 
> 时间：2012-06-28T13:20:21.503
> 
> 标签：php, html, css, wordpress, layout

我目前正在研究 wordpress 文件结构。哪些 PHP 文件或 PHP 文件负责在 Wordpress 中创建内页的布局？你如何操纵它们？我知道 css 是一个简单的答案，但是包含 div 标签和所有标签的 PHP 文件在哪里？

目前，我对在 wordpress 中操作页眉和页脚有所了解，但对“添加页面”生成的页面有所了解。

我希望你能帮助..

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T13:26:44.167

在您的主题文件夹下检查`page.php`文件

# jquery - 使侧边栏高度等于主列高度

> ID：11245590
> 
> 赞同：0
> 
> 时间：2012-06-28T13:20:37.540
> 
> 标签：jquery, height, sidebar

我需要我的侧边栏与我的主要内容栏一样高，所以我执行以下代码：

```
var main_column_height = jQuery("#main_column").height();  
jQuery("#sidebar").css('height', main_column_height); 
```

.. 在我的 jQuery(function(){}) 中。它大部分时间都有效，但有时却无效。如果我把代码放在 jQuery(window).bind("load", function(){}) 中也是一样的。

如何让它一直工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T13:25:52.467

尝试[`outerHeight()`](http://api.jquery.com/outerHeight/)

> 获取匹配元素集中第一个元素的当前计算高度，包括填充、边框和可选的边距。

```
$(function() {
    var main_column_height = jQuery("#main_column").outerHeight();  
    jQuery("#sidebar").css('height', main_column_height);
}) 
```

# php - 移动到新域后的 orangehrm 错误

> ID：11245596
> 
> 赞同：2
> 
> 时间：2012-06-28T13:20:50.340
> 
> 标签：php, open-source, filepath

我刚刚将我的 orangehrm 从免费托管解决方案转移到付费托管解决方案。我已经更新了 mysql 凭据并设置了 chmod 权限。但是，当我访问起始页面时，出现以下错误：

> 致命错误：require() [function.require]：打开失败需要'/home/donut/public_html/symfony/apps/orangehrm/lib/utility/KeyHandler.php'（include_path='.:/usr/lib/php5' ) 在第 188 行的 /homepages/1/d316893459/htdocs/bcsdhrm/symfony/lib/vendor/symfony/lib/autoload/sfAutoload.class.php

我是orangehrm的菜鸟，所以请帮帮我！！！我不知道从这里做什么。

谢谢你

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-24T19:15:56.973

您需要删除您的 OrangeHRM 配置缓存文件。

只需访问 '/var/www/orangehrm/symfony/cache/orangehrm/prod/config/' 并删除文件 'config_autoload.yml.php'。

ps：先备份一下... ;-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T13:41:26.157

> 我是 orangehrm 的菜鸟

无法访问服务器是不可能的，但猜测是，在应用程序（orangehtm 或 symfony）的配置中的某处，您已经设置了路径 /home/donut/public_html/... 已复制到新的系统 - 但需要更新到 /homepages/1/d316893459/htdocs/bcsdhrm/...

假设您的自动加载器类版本看起来像[这样](http://trac.symfony-project.org/browser/branches/1.4/lib/autoload/sfAutoload.class.php)，那么问题出在 PHP include_path 上。这可以在 php.ini 文件、.htaccess 文件中设置或在 .htaccess 文件中覆盖。我首先通过 ssh 访问服务器并运行：

```
find . -type f -exec grep -H '/home/donut' {} \; 
```

# c++ - ~ 运算符对 bool 的作用很奇怪

> ID：11245597
> 
> 赞同：2
> 
> 时间：2012-06-28T13:20:52.117
> 
> 标签：c++, boolean

按位补码运算符对 bool 操作数做了意想不到的事情。下面的程序产生这个输出：

```
x: 123456fe   ~x: 87654301   !x: 556677ff
x: 123456ff   ~x: 87654301   !x: 556677fe 
```

对于 X 中的任何字节值，~X 似乎总是用 01 覆盖整个字节。然而，!X 似乎只补充字节的 LSB...

我想如果将 bool 转换为 int，应用按位补码并将结果转换回 bool，则这是有道理的。 *但是*，我不明白为什么一个结果会将 8 位写入内存而另一个结果只写入 1 位。

```
#include "stdio.h"

typedef union {
    bool b;
    unsigned int i;
} ib_T; 

int main(int argc, char **argv) {
    ib_T x, y, z;

    x.i = 0x123456fe;
    y.i = 0x876543ff;
    z.i = 0x55667777;

    y.b = ~x.b;
    z.b = !x.b;
    printf("x: %08x   ~x: %08x   !x: %08x\n", x.i, y.i, z.i);

    x.i = 0x123456ff;
    y.b = ~x.b;
    z.b = !x.b;
    printf("x: %08x   ~x: %08x   !x: %08x\n", x.i, y.i, z.i);
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-28T13:22:57.483

从您之前未分配的联合成员中读取是未定义的行为。

> 在一个union中，任何时候最多可以有一个非静态数据成员处于活动状态，即任何时候最多可以有一个非静态数据成员的值存储在一个union中。

当类型共享一个公共布局时，此规则有一个例外，这不适用于您的情况。一般来说，如果你分配给`x.i`，那么你只能从`x.i`;中读取。如果您想从 开始阅读`x.b`，您需要先分配到`x.b`。

> 我想如果将 bool 转换为 int，应用按位补码并将结果转换回 bool，则这是有道理的。

这是 100% 正确的：下面的片段

```
bool b;
b = false;
printf("b: %d\n", b);
b = ~b;
printf("~b: %d\n", b);
b = ~b;
printf("~~b: %d\n", b); 
```

印刷

```
b: 0
~b: 1
~~b: 1 
```

`bool`提升为`int`，应用波浪号，然后使用通常的“零/非零”规则`~`将结果转换回。`bool`

# iphone - 检查在 iphone 开发中哪个视图位于顶部

> ID：11245599
> 
> 赞同：0
> 
> 时间：2012-06-28T13:20:57.093
> 
> 标签：iphone, objective-c, ios, xcode, uiview

我有 4 个视图并用 4 个按钮控制这些视图，我有点困惑如何检查哪个视图位于顶部，我已经尝试过`isFirstResponder`但它不起作用。如果有人知道，请帮助我。提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-28T13:22:37.120

要从子视图中获取最顶层的视图，请从父视图中获取 lastObject

```
UIView * topMost = [[self.view subviews] lastObject]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T13:30:03.787

一开始，当我尝试设置将显示在同一区域中的视图时，曾经对我有帮助的一件事是，我曾经为每个视图设置不同的背景颜色，然后查看哪个在顶部。我不知道这是否是您尝试进行的设置，但您可以做的另一件事是刷新包含视图，这样您就只有“仅”想要的当前视图。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T18:09:59.923

像这样

```
UIWindow *window = [[UIApplication sharedApplication].keyWindow;
[window findTopMostViewForPoint:CGPointMake(100, 100)]; 
```

功能

```
@implementation UIView (Extra)

- (UIView *)findTopMostViewForPoint:(CGPoint)point
{
    for(int i = self.subviews.count - 1; i >= 0; i--)
    {
        UIView *subview = [self.subviews objectAtIndex:i];
        if(!subview.hidden && CGRectContainsPoint(subview.frame, point))
        {
            CGPoint pointConverted = [self convertPoint:point toView:subview];
            return [subview findTopMostViewForPoint:pointConverted];
        }
    }

    return self;
}

- (BOOL)isTopmostViewInWindow
{
    if(self.window == nil)
    {
        return NO;
    }

    CGPoint centerPointInSelf = CGPointMake(CGRectGetMidX(self.bounds), CGRectGetMidY(self.bounds));
    CGPoint centerPointOfSelfInWindow = [self convertPoint:centerPointInSelf toView:self.window];
    UIView *view = [self.window findTopMostViewForPoint:centerPointOfSelfInWindow];
    BOOL isTopMost = view == self || [view isDescendantOfView:self];
    return isTopMost;
}

@end 
```

# android - 带有 notifyDataSetChanged 的 自定义适配器不起作用

> ID：11245601
> 
> 赞同：0
> 
> 时间：2012-06-28T13:21:08.927
> 
> 标签：android

[我从这里使用部分列表视图http://lalit3686.blogspot.com/2012/05/sectionadapter.html](http://lalit3686.blogspot.com/2012/05/sectionadapter.html)遵循示例

但我该如何实施`adapter.notifyDataSetChanged()`？

添加侦听器以更新列表视图数据：

```
mListView.setOnItemClickListener(new OnItemClickListener() {

        public void onItemClick(AdapterView<?> parent, View view, int position, long id) {

            Toast.makeText(SectionAdapterActivity.this, ""+position+"", Toast.LENGTH_SHORT).show();
            test();

        }
    }); 
```

我只为更改/更新值添加新功能（仅限测试）：

```
public void test()
{
    hashMap.clear();

    for (int i = 0; i < 3; i++) {
        hashMap.put("Mail", String.valueOf(1100 + i), 1);
    }

    for (int j = 0; j < 4; j++) {
        hashMap.put("Case", String.valueOf(2100 + j), 15);
    }
    for (int j = 0; j < 5; j++) {
        hashMap.put("File", String.valueOf(10000 + j), 20);
    }

    mListView.invalidate();
    mListView.invalidateViews();
    adapter.notifyDataSetChanged(); 

    Log.e("dada", hashMap.toString());
}} 
```

好像不行，有大神帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T13:48:29.507

1.  确保您使用了 Same`hashmap`和`adapter`对象，`ListView`并且`hashmap`在创建对象时使用了该`adapter`对象。
2.  确保`adapter.notifyDatasetChanged()`被调用，**在那里放一些日志**。
3.  *调用 notifyDatasetChanged() 后打印 Log 中的 HashMap 对象值，并检查 ListView 和 Log 中的项目是否相同*。
4.  *只有当HashMap中的数据发生变化*`notifyDatasetChanged()`时才能显示效果，如果它保持为prev，那么您无法确定它是否已被调用。
**   看你的代码，我想*这部分代码没有问题*。*

 ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T13:24:29.523

我不完全了解您通过调用 notifyDataSetChange() 想要达到的目的。

此方法仅在您更改已创建的适配器使用的逻辑数据收集/数据库时生效。在这种情况下 - 它会导致使用新数据更新列表

如果那是您想要做的，那么使用它 - 您需要做的很简单：只需调用：

```
adapter.notifyDataSetChanged(); 
```

就是这样:)。没有其他的。*

# xtext - 在 Xtext 中生成用于评估 Xbase 表达式的类？

> ID：11245603
> 
> 赞同：0
> 
> 时间：2012-06-28T13:21:19.250
> 
> 标签：xtext

我正在尝试设计一个小 DSL 来检查变量的约束。我现在的语法是这样的：

```
Start:
    varDeclarations += XVariableDeclaration*
    rules+=Constraint*;

Constraint:
    {Constraint}
    'FOR' 'PAYLOAD' payload=PAYLOAD 'ELEMENT' element=ID 'CONSTRAINED BY' constraint=XExpression;

PAYLOAD:
    "SimulationSessionEvents"
    |"stacons"
    |"any"
; 
```

我想生成一个只包含一个方法的类的实例，该方法将一个值作为输入，将其映射到约束中包含的唯一变量（这也是声明的唯一变量），并检查约束是否得到满足。

然后这些实例将被另一个类使用，该类通过每个实例传递一个值，检查它的约束是否得到满足。

正如我所看到的，我有两个选择：

1.  为约束类显式生成代码，在这种情况下，我可以只使用`XBaseCompiler`生成表达式评估代码。但是，如果有一种方法可以直接在内存中创建对象，那么我将不得不以某种方式加载这些类，这似乎很不优雅。

2.  使用`ModelInferrer`直接在内存中生成可以传递给其他类的对象，因此不需要加载类。在这种情况下，我不确定如何生成 xbase 表达式评估代码。

在阅读了所有 xtext 文档/教程并使用示例后，我留下了以下问题：

就可扩展性而言，哪个是“最佳”方法（我以后可能想扩展语法和/或他生成的类的功能）？如果我遵循 ModelInferrer 方法，我将如何处理事情？有没有其他方法可以做到这一点？

任何帮助将非常感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T18:06:23.490

最好的方法是使用模型推断器来创建 DSL 元素的 Java 表示。表达式通常通过 JvmTypeBuilder#setBody 分配。查看域模型示例，您将在其中找到对操作主体的分配：

```
members += f.toMethod(f.name, f.type) [
    for (p : f.params) {
        parameters += p.toParameter(p.name, p.parameterType)
    }
    body = f.body
] 
```

另一种选择是手动创建代码：

```
body = [
    append(varName).append(' = new ').append(typeName).append('();')
] 
```

推断方法允许强大的 Eclipse 集成，因为类型层次结构、调用层次结构或 go-to-declaration 都将尊重派生的 Java 事物。

# sql - 将 XML 从表列分解到 SQL Server 中的视图中

> ID：11245604
> 
> 赞同：8
> 
> 时间：2012-06-28T13:21:19.817
> 
> 标签：sql, xml, views, shred

我目前有这段代码，它将 XML 存储到一个名为 data 的 XML 类型列中，在一个名为 Storage 的表中。

```
 CREATE TABLE Storage
(
    ID INT IDENTITY(1,1) PRIMARY KEY,
    data XML NOT NULL
)

GO

INSERT INTO Storage(data) 
VALUES('<footballteams>   
    <team manager="Benitez">     
        <name>Liverpool</name>     
        <ground>Anfield</ground>   
    </team>   
    <team manager="Mourinho">     
        <name>Chelsea</name>     
        <ground>Stamford Bridge</ground>   
    </team>   
    <team manager="Wenger">     
         <name>Arsenal</name>     
         <ground>Highbury</ground>   
    </team> 
</footballteams>'); 
```

我想创建一个名为 Football View 的视图，它将数据分解并以以下形式显示：FootballView(TeamName,Manager,Ground)。

我之前使用 .nodes() 方法将完整文档切碎到表列中，但是在创建视图时似乎更具挑战性（我有使用视图的原因）。问题是，以前我只是在变量@input 上调用了 .nodes，该变量被声明为 xml = 'xmlcontent' 但对于视图，这无法完成，我想解析存储表列中包含的 XML。

有任何想法吗？提前致谢。

编辑：

以前，如果我切碎成表格，这将是我使用的代码：

```
SELECT     
        TeamName = Foot.value('(name)[1]', 'varchar(100)'),     
        Manager = Foot.value('(@manager)', 'varchar(100)'),     
        Ground = Foot.value('(ground)[1]', 'varchar(100)')   
FROM     
        @input.nodes('/footballteams/team') AS Tbl(Foot) 
```

EDIT2：这是我期望的输出。

![预期产出](../Images/70ac11a98db3d4e7c08bdffcf68def00.png)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-28T13:39:16.190

你需要使用`CROSS APPLY`

```
SELECT     
        TeamName = Foot.value('(name)[1]', 'varchar(100)'),     
        Manager = Foot.value('(@manager)', 'varchar(100)'),     
        Ground = Foot.value('(ground)[1]', 'varchar(100)')   
FROM    
    Storage S 
        CROSS APPLY data.nodes('/footballteams/team') AS Tbl(Foot) 
```

`CROSS APPLY`并`OUTER APPLY`允许您有效地加入当前数据集中的 XML 集合。

# iphone - 在 [exportSession exportAsynchronouslyWithCompletionHandler:^-[TiBlob _formatReader] 上出现错误：无法识别的选择器已发送到实例

> ID：11245607
> 
> 赞同：0
> 
> 时间：2012-06-28T13:21:22.517
> 
> 标签：iphone, titanium, media, video-processing, titanium-modules

我在使用 [exportSession exportAsynchronouslyWithCompletionHandler:^ 导出视频时遇到以下错误：

错误：

-[TiBlob _formatReader]：无法识别的选择器发送到实例

我正在使用钛模块。我正在将视频从应用程序发送到模块。

对此有任何想法，因为我对此一无所知。提前感谢专家的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T12:57:23.500

我从 Titanium 应用程序将视频文件作为“event.media”传递。现在我将“event.media”作为 TiBlob 的对象添加到自定义 Titanium 模块。

```
videoObj= [[TiBlob alloc]init]; 
```

初始化videoObj后，从application中获取value给videoObj。使用 videoObj(TiBlob) 我只是初始化 AVAsset。这为我解决了这个问题。

```
NSURL *url= [[NSURL alloc]initWithString:videoObj.path];
source = [[AVURLAsset alloc] initWithURL:url options:[NSDictionary dictionaryWithObject:[NSNumber numberWithBool:YES] forKey:AVURLAssetPreferPreciseDurationAndTimingKey]]; 
```

# c# - 在 Designer.cs 中定义的 ASP 控件在 C# 代码隐藏中无法访问

> ID：11245610
> 
> 赞同：0
> 
> 时间：2012-06-28T13:21:31.190
> 
> 标签：c#, asp.net, visual-studio-2010

我的 aspx 文件中有几个文本框（未嵌套在任何其他控件中），但是当在我的 C# 文件中引用时，我收到错误消息“当前上下文中不存在名称 'controlname'”。我尝试使用相同的代码创建一个新项目，转换为 Web 应用程序，甚至删除 Designer.cs 文件，只是为了再次转换为 Web 应用程序而感到沮丧。该页面直到昨天的某个时候都运行良好，但似乎任意停止识别 ASP 控件，因为除了添加 SQL 读取之外我没有更改任何内容，这确实不应该影响 .aspx 文件和 .aspx.cs 之间的通信文件。我真的很感谢任何建议或修复，因为我已经浪费了好几个小时试图弄清楚如何使这些文件相互通信。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T13:36:21.150

检查 .cs 和 .designer.cs 文件的属性是否将其构建操作设置为“编译”。

当项目文件损坏时，有时会发生这种情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T13:25:44.407

当您的 .ASPX.CS 找不到包含在 .DESIGNER 文件中的控件定义时，就会发生这种情况。您是否修改或删除了这些文件？你能在这里发布你的一些代码吗？

而且，一个简单但重要的建议：确保在所有控件中都有标签 runat='server'。

问候， 卡里尔

# javascript - 图像上的鼠标光标坐标：Y 坐标不是整数！怎么会这样？

> ID：11245616
> 
> 赞同：1
> 
> 时间：2012-06-28T13:21:47.843
> 
> 标签：javascript, jquery

感谢我在[这里](https://stackoverflow.com/questions/11245250/mouse-cursor-coordinates-over-image-br-not-working)收到的建议，我解决了我的代码的一些问题，现在我有了：

```
window.onload = function(){

    var tooltip = $( '<div id="tooltip">' ).appendTo( 'body' )[0];

$( 'img' ).
    each(function () {
        var pos = $( this ).position(),
            top = pos.top,
            left = pos.left,
            width = $( this ).width(),
            height = $( this ).height(); 
        $( this ).
            mousemove(function ( e ) {
                var x = e.pageX - left,
                    y = e.pageY - top;

                $( tooltip ).html( 'x = ' + x + '<br/>y = ' + y ).css({
                    left: e.clientX + 10,
                    top: e.clientY + 10
                }).show();
            }).
            mouseleave(function () {
                $( tooltip ).hide();
            }); 

    });

}; 
```

不幸的是，Y 坐标不是整数！看图片：

![在此处输入图像描述](../Images/33b8d0edcafaf46233160f8f28d96e2c.png)

差异与应有的差异是恒定的：-0.42。它从照片上边缘的 -0.42 到下边缘的 1198.58 不等。（图片高度为1200）。

我绝对可以将其汇总并解决问题，但这不是一个干净的解决方案。我想从一开始就做好。

这是CSS：

```
body { font:13px/1.4 Arial, sans-serif; margin:50px; background:gray; }
#tooltip { text-align:left; background:black; color:white; padding:3px 0; position:fixed; display:none; white-space:nowrap; } 
```

这是 HTML：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<link href="style.css" rel="stylesheet" type="text/css">
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script type="text/javascript" src="javascript.js"></script></head>
</head>

<body>

<div id="content">
<h1>JS test</h1>
<img class="coords" src = "pic.jpg">

<p>Paragraph between images</p>

<img class="coords" src = "pic.jpg">
</div>

</body>
</html 
```

非常感谢你的帮助！

戴维德

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T13:33:20.030

要回答标题中的问题：在 CSS 中，Top 或 Left 可以定义为百分比或“em”等。然而，jQuery 总是返回像素，所以这可能是 jQuery 转换时获取浮点数而不是整数的原因，例如像素的百分比。

第二个问题，为什么它总是-0.42，如果没有 jsFiddle 或类似的东西，我不确定。编辑：但是您使用的是 .position() ，它给出了相对于*parent*的位置，而 e.pageX 是相对于*page*的。因此，e.pageY 在图像顶部（相对于页面顶部）可以是 0.42，而 image.position().top 可以是 0（相对于父级），因此结果 x 变为 -0.42。

您可能想要使用相对于页面的 .offset()！见[http://api.jquery.com/offset/](http://api.jquery.com/offset/)

# c# - 使用 LINQ 时的默认 xml 属性值

> ID：11245619
> 
> 赞同：3
> 
> 时间：2012-06-28T13:21:58.183
> 
> 标签：c#, xml, xml-parsing, xsd, linq-to-xml

假设您有一个 XML 文件：

```
<experiment
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:noNamespaceSchemaLocation="experiment.xsd">
  <something />
<experiment> 
```

你有 xsd 文件：

```
...
<xs:attribute name="hello" type="xs:boolean" use="optional" default="false" />
... 
```

假设属性“hello”是“something”元素的可选属性，默认值设置为“false”。

使用 XML LINQ 的 XDocument 时，缺少该属性，导致程序在尝试读取时失败：

```
XDocument xml = XDocument.Load("file.xml");
bool b = bool.Parse(xml.Descendants("something").First().Attribute("hello").Value); // FAIL 
```

LINQ 是自动加载 XML 模式（来自根元素“experiment”的“xsi:noNamespaceSchemaLocation”属性）还是我必须手动强制加载？

如何强制 LINQ 读取可选属性及其默认值？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-28T14:18:16.297

该`Load`方法需要一个 XmlReader，如果您使用具有正确 XmlReaderSettings [http://msdn.microsoft.com/en-us/library/1xe0740a](http://msdn.microsoft.com/en-us/library/1xe0740a)的 XmlReader （即需要将 ValidationType 设置为 schema 并注意 schemaLocation 分别为 noNamespaceSchemaLocation 和正确的ValidationFlags）然后我认为该属性将被创建并使用架构中的默认值填充。

这是一个简短的示例：

```
 XDocument doc;

    XmlReaderSettings xrs = new XmlReaderSettings();
    xrs.ValidationType = ValidationType.Schema;
    xrs.ValidationFlags |= XmlSchemaValidationFlags.ProcessSchemaLocation;

    using (XmlReader xr = XmlReader.Create("../../XMLFile1.xml", xrs))
    {
        doc = XDocument.Load(xr);
    }
    foreach (XElement foo in doc.Root.Elements("foo"))
    {
        Console.WriteLine("bar: {0}", (bool)foo.Attribute("bar"));
    } 
```

带有包含内容的示例文件

```
<?xml version="1.0" encoding="utf-8" ?>
<root xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="XMLSchema1.xsd">
  <foo/>
  <foo bar="true"/>
  <foo bar="false"/>
</root>

<?xml version="1.0" encoding="utf-8"?>
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema">
  <xs:element name="root">
    <xs:complexType>
      <xs:sequence maxOccurs="unbounded">
        <xs:element name="foo">
          <xs:complexType>
            <xs:attribute name="bar" use="optional" type="xs:boolean" default="false"/>
          </xs:complexType>
        </xs:element>
      </xs:sequence>
    </xs:complexType>
  </xs:element>
</xs:schema> 
```

输出是

```
bar: False
bar: True
bar: False 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T17:17:22.060

使用此[Xml 库](https://github.com/ChuckSavage/XmlLib/)XElementExtensions.cs 类，您可以使用`Get()`采用默认值的方法：

```
XDocument xml = XDocument.Load("file.xml");
bool b = xml.Descendants("something").First().Get("hello", false); 
```

`false`是您提供的默认值。

# android - 屏幕滚动时，GridView 中的项目会重复

> ID：11245620
> 
> 赞同：20
> 
> 时间：2012-06-28T13:22:11.553
> 
> 标签：android, android-layout, gridview, drawable

我正在使用 GridView 来显示一组用户可以选择的类别。网格的每个项目都由一个 ImageView 和一个 TextView 组成，两者都从服务器检索。当一个项目被触摸时，另一个活动被启动。

我以为一切都很顺利，直到我注意到滚动屏幕时有些项目重复了。每当我在网格中向下滚动，然后返回时，它就会改变它的位置并被复制。但即使我触摸了混乱的项目，正确的值也会发送到下一个活动。

在 LogCat 中，任何对服务器的重复请求都会发生。事实上，我在滚动时得到了这个：

```
06-28 12:36:38.554: D/dalvikvm(358): GC_EXTERNAL_ALLOC freed 2061 objects / 156024 bytes in 51ms
06-28 12:36:42.915: D/dalvikvm(358): GC_FOR_MALLOC freed 6590 objects / 737528 bytes in 57ms
06-28 12:38:26.725: D/dalvikvm(358): GC_EXTERNAL_ALLOC freed 5426 objects / 468176 bytes in 71ms
06-28 12:38:26.875: D/dalvikvm(358): GC_EXTERNAL_ALLOC freed 409 objects / 17480 bytes in 68ms 
```

看起来每次我滚动时，都会重绘...

更新：它只在我第一次向下滚动 GridView 时重绘。在此之后，所有的元素，包括重复的元素，都保持在原来的位置。

我的java类：

```
public void proccess(){
    int qtdCategorias = json.length();
    imagens = new Drawable[qtdCategorias];
    categorias = new String[qtdCategorias];
    for (int i=0; i<qtdCategorias; i++){
        JSONArray c = json.optJSONArray(i);
        String urlAmigavel = null;
        String imagemSite = null;
        String nomeCategoria = null;
        try {
            urlAmigavel = c.getString(6);
            imagemSite = c.getString(3);
            nomeCategoria = c.getString(2);
        } catch (JSONException e) {
            Log.e("CategoriasJogarActivity", e.toString());
            e.printStackTrace();
        }
        categorias[i] = nomeCategoria;
        imagens[i] = getImagem(urlAmigavel, imagemSite);
    }

    gridview = (GridView) findViewById(R.id.include3);

    ImageAdapter imageAdapter = new ImageAdapter(ctx, imagens, categorias);

    gridview.setAdapter(imageAdapter);

    gridview.setOnItemClickListener(new OnItemClickListener() {
        public void onItemClick(AdapterView<?> parent, View v,
                int position, long id) {

            String name = null;
            String idt = null;
            try {
                JSONArray c = json.optJSONArray(position);
                name = c.getString(2);
                idt = c.getString(0);
            } catch (JSONException e) {
                Log.e("CategoriasJogarActivity",
                        "JSONException" + e.toString());
            }

            Intent in = new Intent(getApplicationContext(),
                    JogarActivity.class);
            in.putExtra(TAG_NAME, name);
            in.putExtra(TAG_ID, idt);
            in.putExtra(TAG_PRIMEIRAPERGUNTA, true);
            startActivity(in);

        }
    });
}

public Drawable getImagem(String urlAmigavel, String img) {
    String url = "http://www.qranio.com/pergunta/" + urlAmigavel + "/"+ img;
    InputStream is = null;
    try {
        URL urlImagem = new URL(url);
        is = (InputStream) getObjeto(urlImagem);
    } catch (MalformedURLException e1) {
        Log.e("CategoriasJogarActivity", e1.toString());
        e1.printStackTrace();
    }
    Drawable d = Drawable.createFromStream(is, "src");

    return d;
}

private Object getObjeto(URL url) {
    Object content = null;
    try {
        content = url.getContent();
    } catch (IOException e) {
        Log.e("CategoriasJogarActivity", e.toString());
        e.printStackTrace();
    }
    return content;
} 
```

图像适配器类

```
public class ImageAdapter extends BaseAdapter{
private Context mContext;
private final Drawable[] mThumbIds;
private final String[] mTextIds;

public ImageAdapter(Context c, Drawable[] d, String[] s) {
    mContext = c;
    mThumbIds = d;
    mTextIds = s;
}

public int getCount() {
    return mThumbIds.length;
}

public Object getItem(int position) {
    return null;
}

public long getItemId(int position) {
    return 0;
}

//create a new ImageView for each item referenced by the Adapter
public View getView(int position, View convertView, ViewGroup parent) {
    //ImageView imageView;
    View v;
    if (convertView == null) {  // if it's not recycled, initialize some attributes
        LayoutInflater inflater = (LayoutInflater) mContext.getSystemService(     Context.LAYOUT_INFLATER_SERVICE );
        v = inflater.inflate(R.layout.gridview_item_layout, null);
        TextView text = (TextView)v.findViewById(R.id.grid_item_text);
        text.setText(mTextIds[position]);
        ImageView image = (ImageView)v.findViewById(R.id.grid_item_image);
        image.setImageDrawable(mThumbIds[position]);

    } else {

        v = (View) convertView;
    }

    return v;
}

} 
```

gridview_item_layout xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/gridview_item_layout"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:orientation="vertical"
android:gravity="center_horizontal" >

<ImageView android:id="@+id/grid_item_image"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:scaleType="fitCenter"
android:minHeight="100dip"
android:minWidth="100dip"
>
</ImageView>

<TextView android:id="@+id/grid_item_text"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:text="TextView"
android:gravity="center"
android:textColor="#F9A512"
android:textStyle="bold"
android:textSize="18dp"
>
</TextView>
</LinearLayout> 
```

网格视图 xml

```
<?xml version="1.0" encoding="utf-8"?>
<GridView xmlns:android="http://schemas.android.com/apk/res/android" 
android:id="@+id/gridview"
android:layout_width="fill_parent" 
android:layout_height="fill_parent"
android:numColumns="auto_fit"
android:verticalSpacing="10dip"
android:horizontalSpacing="10dip"
android:stretchMode="columnWidth"
android:gravity="center"
android:background="#FFFFFF"
android:padding="5dip"
/> 
```

我看到了关于同一问题的其他问题，但没有一个回答。对正在发生的事情有任何想法吗？

* * *

## 回答 #1

> 赞同：84
> 
> 时间：2012-06-28T13:36:46.177

向下滚动时看到相同的项目是正常的，`GridView`因为在该方法中，您仅在is时`getView`设置可绘制对象（例如，对于出现在屏幕上时看到的第一个元素）。如果不是，则意味着您有一个回收的行视图，您没有设置正确的图像，您将保留之前在此回收视图上设置的图像。尝试像这样修改方法：`ImageView``convertView``null``GridView``convertView``null``getView`

```
public View getView(int position, View convertView, ViewGroup parent) {
    View v;
    if (convertView == null) {  // if it's not recycled, initialize some attributes
        LayoutInflater inflater = (LayoutInflater) mContext.getSystemService(     Context.LAYOUT_INFLATER_SERVICE );
        v = inflater.inflate(R.layout.gridview_item_layout, parent, false);
    } else {
        v = (View) convertView;
    }
    TextView text = (TextView)v.findViewById(R.id.grid_item_text);
    text.setText(mTextIds[position]);
    ImageView image = (ImageView)v.findViewById(R.id.grid_item_image);
    image.setImageDrawable(mThumbIds[position]);
    return v;
} 
```

单击一个元素会显示正确的项目，因为您使用`position`参数来检索数据。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-03T16:53:15.037

这是我的 Button + Textview 的 GirdView 代码

```
public View getView(final int position, View convertView, ViewGroup parent) {
        LayoutInflater mInflater = (LayoutInflater) mContext.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        if (convertView == null) {
            convertView = mInflater.inflate(R.layout.grid_item, null);  
        } else {
            holder = (ViewHolder) convertView.getTag();
        }
        TextView text = (TextView)convertView.findViewById(R.id.texto_grid);
        text.setText(app_listaActiva_NOMBRES[position]);
        Button image = (Button)convertView.findViewById(R.id.miniatura_grid);
        image.setBackgroundResource(R.drawable.custom_button);
        image.setOnClickListener(new MyOnClickListener2(position,app_listaActiva_SONIDOS));
        return convertView;
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T13:37:22.587

换这里再试试

```
 View v;
if (convertView == null) {  // if it's not recycled, initialize some attributes
    LayoutInflater inflater = (LayoutInflater) mContext.getSystemService(     Context.LAYOUT_INFLATER_SERVICE );
    v = inflater.inflate(R.layout.gridview_item_layout, null);
    TextView text = (TextView)v.findViewById(R.id.grid_item_text);
    text.setText(mTextIds[position]);

} else {

    v = (View) convertView;
}
if(view!=null)
        {
               ImageView image = (ImageView)v.findViewById(R.id.grid_item_image);
               image.setImageDrawable(mThumbIds[position]);
               notifyDataSetChanged();  //Calling this helped to solve the problem. 
        }

return v;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-01-04T07:04:11.467

使用`ViewHolder`静态类为我修复重复项。

也改变`layout_width`并没有帮助`layout_height`。`fill_parent`

我浏览了本教程 [http://android-vogue.blogspot.com/2011/06/custom-gridview-in-android-with.html](http://android-vogue.blogspot.com/2011/06/custom-gridview-in-android-with.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-10-19T14:48:50.300

**发送和gridview或listview并在构造函数中实现这个方法实现onscroll监听器**

```
 this.mGridView = mGridView;
    this.mGridView.setOnScrollListener(new OnScrollListener() {

        @Override
        public void onScrollStateChanged(AbsListView view, int scrollState) {
            Log.v("onScrollStateChanged", "onScrollStateChanged");
            if (scrollState == OnScrollListener.SCROLL_STATE_IDLE) {
                isScrollStop = true;

                notifyDataSetChanged();
            } else {
                isScrollStop = false;
            }
        }

        @Override
        public void onScroll(AbsListView view, int firstVisibleItem,
                int visibleItemCount, int totalItemCount) {
            Log.v("onScroll", "onScroll");
        }
    }); 
```

# jsf - 使用 javascript 变量从 jsf 页面设置 bean 属性

> ID：11245624
> 
> 赞同：0
> 
> 时间：2012-06-28T13:22:20.380
> 
> 标签：jsf, jsf-2, icefaces

我正在使用icefaces 3，并且某些组件在将其绑定到bean属性时存在错误，因此我尝试手动执行此操作，因此我想知道使用javascript从jsf页面手动设置bean属性的最佳方法多变的。

我想做类似的事情：

```
<script type="text/javascript">
          //<![CDATA[    

        function setPopupValues() {

            var onSuccess = document.getElementById('myForm:onSuccess_Sel');
            #{myBean.onSuccessPage}=onSuccess.value;
        }

           //]]>     
       </script>

<h:commandButton  value="Save" action="#{myBean.save}" onclick="setPopupValues();"></h:commandButton> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T19:53:52.167

如果输入与提交的形式相同，那么您也可以从`ExternalContext#getRequestParameterMap()`.

```
String value = externalContext.getRequestParameterMap().get("myForm:onSuccess_Sel"); 
```

但是，如果它是特定于 ICEfaces 的，我会尽快修复该组件值绑定，或者至少将其报告给 ICEfaces。

# android - SQLite 更新函数

> ID：11245625
> 
> 赞同：-1
> 
> 时间：2012-06-28T13:22:24.210
> 
> 标签：android, sqlite, android-activity

我有一个只包含一个值的数据库。它有两列，分别是“id”和“status”。id = 1 且状态 = FALSE。当我写的条件满足时，我想将我的表更新为 TRUE。

```
 System.out.println("!!!!!entered here!!!!!!!!!");
    ContentValues cv = new ContentValues();
    cv.put("1", "TRUE");
    System.out.println("!!!!!entered here!!!!!!!!!");       

    db.update("main", cv, "id = 1", null);
    System.out.println("??????not entered here??????"); 
```

它迫使我退出，当然也没有更新我的表格。

我正在尝试这个来检查一个条件，如果它得到满足，它就会使状态为真。如果状态为 FALSE，我的应用程序将进入 CheckScreen，如果为 TRUE，我的应用程序将不会进入该屏幕。

我也在听你对此案的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T07:56:05.813

我找到了解决问题的方法，我使用了共享首选项。我的目的是在设备上保持最初为“假”的状态，当用户下载应用程序，输入密码时，使该状态为“真”。

我的介绍课

```
 SharedPreferences mSharedPrefs = getSharedPreferences("xmlFile", MODE_PRIVATE);

    boolean checkValue = mSharedPrefs.getBoolean("bool", false);
    if (checkValue) {
        Intent intent = new Intent(Intro.this, MainScreen.class);
        startActivity(intent);
    } else {
        Intent intent = new Intent(Intro.this, KeyCheckClass.class);
        startActivity(intent);
    }
} 
```

我的 KeyCheckClass.class

```
...
private boolean check(String str) {
        // my validation algorithm
    }

    SharedPreferences mSharedPrefs = getSharedPreferences("xmlFile",
            MODE_PRIVATE);
    SharedPreferences.Editor mPrefsEditor = mSharedPrefs.edit();

    mPrefsEditor.putBoolean("bool", true);
    mPrefsEditor.commit();

    return true;
} 
```

在我的 MainScreen.class 上，我的应用真正开始了。现在，输入有效密码后，手机不会再次进入 KeyCheckClass.class，而是通过 MainScreen.class

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T13:28:18.380

您的内容价值：

```
 ContentValues cv = new ContentValues();
 cv.put("1", "TRUE"); 
```

应该

```
 ContentValues cv = new ContentValues();
   cv.put("status", "TRUE"); 
```

status 是您要更新的列名。

例如：

```
 DBHelper dbHelper = new DBHelper(context);
 SQLiteDatabase db = dbHelper.getWritableDatabase();
 ContentValues updateValues = new ContentValues();
 updateValues.put("status", "TRUE");
 int updated = db.update(MYDATABASE_TABLE, updateValues, KEY_ID+"="+id, null); 
```

# java - RabbitMQ 订阅者超时

> ID：11245626
> 
> 赞同：2
> 
> 时间：2012-06-28T13:22:30.430
> 
> 标签：java, messaging, rabbitmq, firewall, cisco

在穿越 CISCO ASA 5505 防火墙时订阅 RabbitMQ 消息时遇到问题。防火墙中似乎存在某种超时，它会关闭空闲连接并导致我的 RabbitMQ 订阅被无声地删除。结果是我的订阅者没有抛出/显示任何异常，但没有收到已发布的消息。

```
public class RabbitMqSubscriber<T extends Serializable> implements Subscriber<T> {

    private QueueingConsumer consumer;
    private MessageListener<T> listener;
    private String exchange;
    private String topic;
    public RabbitMqSubscriber(String host,String exchange,String topic) throws IOException {
        this.exchange=exchange;
        this.topic=topic;
        ConnectionFactory factory = new ConnectionFactory();
        factory.setHost(host);
            factory.setRequestedHeartbeat(10);
        Connection connection = factory.newConnection();
        Channel channel = connection.createChannel();
        channel.exchangeDeclare(exchange, "topic");
        String queueName = channel.queueDeclare().getQueue();
        channel.queueBind(queueName, exchange, topic);
        consumer = new QueueingConsumer(channel);
        channel.basicConsume(queueName, true, consumer);
    }

    public void run() {

        while (true) {
            QueueingConsumer.Delivery delivery;
            try {
                delivery = consumer.nextDelivery();
                Object o=SerializationUtils.deserialize(delivery.getBody());
                listener.receive((T)o);
            } catch (ShutdownSignalException | ConsumerCancelledException | InterruptedException e) {
                throw new RuntimeException(e);
            }
        }
    }

    @Override
    public void setListener(MessageListener<T> listener) {
        this.listener=listener;
    }

} 
```

我也尝试将 keepalive 添加到服务器配置中，但这也没有帮助：

```
[        {rabbit, [{tcp_listen_options, [binary, 
                     {packet, raw}, 
                     {reuseaddr, true}, 
                     {backlog, 128}, 
                     {nodelay, true}, 
                     {exit_on_close, false}, 
                     {keepalive, true}]}]}]. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T04:18:19.527

> 防火墙中似乎存在某种超时，它会关闭空闲连接并导致我的 RabbitMQ 订阅被无声地删除。

正确的。Cisco ASA 将在以下情况下使不活动的 TCP 套接字超时：

1.  tcp 套接字超过了 ASA 的空闲超时值
2.  tcp 套接字超过 NAT xlate 空闲超时

我对 Cisco ASA 比对 RabbitMQ 更熟悉。从我所见，即使您尝试配置它，您似乎也没有在此会话上获得 TCP keepalives。

请尝试启用 tcp keepalive 的不同方法。`setRequestedHeartbeat`在`ConnectionFactory`创建新连接之前调用，或者，子类`ConnectionFactory`，覆盖`configureSocket`方法，然后调用`socket.setKeepAlive(true)`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T10:50:37.930

尝试使用您的连接工厂设置连接超时：

```
factory.setConnectionTimeout(timeout); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-08T11:15:42.130

一个疯狂的猜测：防火墙有一个用于网络地址转换 (NAT) 条目的缓存，但存储容量有限，因此会丢弃空闲连接。如果内存资源仍然足够，可以增加超时。[这个 CISCO 文档](https://supportforums.cisco.com/docs/DOC-5527)说正常超时是 24 小时。

# jquery - 有没有类似 extjs suberboxselect 的 jquery 插件？

> ID：11245627
> 
> 赞同：1
> 
> 时间：2012-06-28T13:22:33.517
> 
> 标签：jquery, jquery-plugins, extjs

我正在寻找一个类似于 extJS superboxselect 扩展的 jquery 插件。它允许多选和自动完成功能与酷界面相结合。有任何想法吗 ？

[http://www.technomedia.co.uk/SuperBoxSelect/examplesRemote.html](http://www.technomedia.co.uk/SuperBoxSelect/examplesRemote.html)

[http://www.technomedia.co.uk/SuperBoxSelect/examples3.html](http://www.technomedia.co.uk/SuperBoxSelect/examples3.html)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T13:29:44.543

[http://code.drewwilson.com/entry/autosuggest-jquery-plugin](http://code.drewwilson.com/entry/autosuggest-jquery-plugin)

[http://jqueryui.com/demos/autocomplete/#multiple](http://jqueryui.com/demos/autocomplete/#multiple)

[http://www.primefaces.org/showcase-labs/ui/autoCompleteBasic.jsf](http://www.primefaces.org/showcase-labs/ui/autoCompleteBasic.jsf)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T14:04:52.343

Chosen.js - [http://harvesthq.github.com/chosen/](http://harvesthq.github.com/chosen/)

Select2.js - [http://ivaynberg.github.com/select2/](http://ivaynberg.github.com/select2/)（就像选择的一样，但具有更多功能）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T13:34:16.097

不同的视图，但具有几乎相同的功能[http://www.primefaces.org/showcase-labs/ui/selectCheckboxMenu.jsf](http://www.primefaces.org/showcase-labs/ui/selectCheckboxMenu.jsf)

# android - Eclipse 上适用于 Android 的电话间隙应用程序

> ID：11245630
> 
> 赞同：0
> 
> 时间：2012-06-28T13:22:38.423
> 
> 标签：android, cordova

> **可能重复：**
> [将 jquery.min.js 文件添加到 phonegap eclipse 应用程序](https://stackoverflow.com/questions/11184654/adding-jquery-min-js-file-to-phonegap-eclipse-application)

我一直在尝试使用 Eclipse 设置和运行我的第一个 Phone Gap 应用程序。这是我正在关注的教程（[http://wiki.phonegap.com/w/page/34483744/PhoneGap-Eclipse-PlugIn-for-Android](http://wiki.phonegap.com/w/page/34483744/PhoneGap-Eclipse-PlugIn-for-Android)）。但这似乎不起作用。当我启动应用程序时没有任何反应，下面是控制台输出

```
[2012-06-28 16:14:05 - MyProjectName] ------------------------------

[2012-06-28 16:14:05 - MyProjectName] Android Launch!

[2012-06-28 16:14:05 - MyProjectName] adb is running normally.

[2012-06-28 16:14:05 - MyProjectName] No Launcher activity found!

[2012-06-28 16:14:05 - MyProjectName] The launch will only sync the application package on the device!

[2012-06-28 16:14:05 - MyProjectName] Performing sync

[2012-06-28 16:14:05 - MyProjectName] Automatic Target Mode: using existing emulator 'emulator-5554' running compatible AVD 'AVD15'

[2012-06-28 16:14:08 - MyProjectName] Application already deployed. No need to reinstall.

[2012-06-28 16:14:08 - MyProjectName] \MyProjectName\bin\MyProjectName.apk installed on device

[2012-06-28 16:14:08 - MyProjectName] Done! 
```

已编辑：根据 Rajesh 的建议，选中“创建活动”复选框后的文件和控制台

活动.java

```
package my.com.phonegap;

import android.app.Activity;
import android.os.Bundle;

public class MyPhonePrjActivity extends Activity {
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
}
} 
```

清单.XML

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="my.com.phonegap"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk android:minSdkVersion="15" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" >
    <activity
        android:name=".MyPhonePrjActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application>

</manifest> 
```

控制台输出

```
[2012-06-28 17:54:26 - MyPhonePrj] ------------------------------
[2012-06-28 17:54:26 - MyPhonePrj] Android Launch!
[2012-06-28 17:54:26 - MyPhonePrj] adb is running normally.
[2012-06-28 17:54:26 - MyPhonePrj] Performing my.com.phonegap.MyPhonePrjActivity activity launch
[2012-06-28 17:54:26 - MyPhonePrj] Automatic Target Mode: launching new emulator with compatible AVD 'AVD15'
[2012-06-28 17:54:26 - MyPhonePrj] Launching a new emulator with Virtual Device 'AVD15'
[2012-06-28 17:54:39 - Emulator] emulator: emulator window was out of view and was recentered
[2012-06-28 17:54:39 - Emulator] 
[2012-06-28 17:54:39 - HelloAndroid] New emulator found: emulator-5554
[2012-06-28 17:54:39 - HelloAndroid] Waiting for HOME ('android.process.acore') to be launched...
[2012-06-28 17:54:47 - Emulator] NAND: nand_dev_load_disk_state ftruncate failed: Invalid argument
[2012-06-28 17:54:47 - Emulator] savevm: unable to load section nand_dev
[2012-06-28 18:01:23 - HelloAndroid] HOME is up on device 'emulator-5554'
[2012-06-28 18:01:23 - HelloAndroid] Uploading HelloAndroid.apk onto device 'emulator-5554'
[2012-06-28 18:01:23 - HelloAndroid] Installing HelloAndroid.apk...
[2012-06-28 18:03:34 - HelloAndroid] Failed to install HelloAndroid.apk on device 'emulator-5554!
[2012-06-28 18:03:34 - HelloAndroid] (null)
[2012-06-28 18:03:35 - HelloAndroid] Launch canceled! 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T14:00:23.127

那个wiki可能已经过时了。按照此网址获取有关在 Android 上设置您的第一个应用程序的说明：

[http://docs.phonegap.com/en/1.8.1/guide_getting-started_android_index.md.html#Getting%20Started%20with%20Android](http://docs.phonegap.com/en/1.8.1/guide_getting-started_android_index.md.html#Getting%20Started%20with%20Android)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T13:57:16.937

您的项目似乎没有启动器活动。如果您在创建项目时没有创建活动，则可能会发生这种情况 - 可能是您忘记选中“**创建活动**”复选框。请确认您正在创建活动。

如果这不起作用，请使用您的活动代码以及`AndroidManifest.xml`.

# xaml - XAML windows 8 Metro 应用程序，绑定问题

> ID：11245631
> 
> 赞同：3
> 
> 时间：2012-06-28T13:22:38.823
> 
> 标签：xaml, windows-8, winrt-xaml

我`GridView`在 Windows 8 Metro 应用程序中使用分组，我有一个`VariableSizedWrapGrid`in `ItemsPanelTemplate`，并且想要绑定该`MaximumRowsOrColumns`属性，但它没有正确绑定。

这是我的 XAML

```
<GridView  ItemsSource="{Binding Source={StaticResource groupeddata}}" >
    <GridView.ItemTemplate>
        <DataTemplate>
            <Grid Width="120" Height="150" >
                <!--some controls here binded correctly.-->
            </Grid>
        </DataTemplate>
    </GridView.ItemTemplate>
    <GridView.GroupStyle>
        <GroupStyle>
            <GroupStyle.HeaderTemplate>
                <DataTemplate>
                    <Grid Margin="1,0,0,6">
                        <StackPanel Orientation="Horizontal">
                            <TextBlock Text="{Binding maxGridCoulmns}"></TextBlock>
                            <!--work ok here -->
                            <TextBlock   Foreground="Black" Padding="0,0,0,20" Text="{Binding headerText}"  />
                        </StackPanel>
                    </Grid>
                </DataTemplate>
            </GroupStyle.HeaderTemplate>
            <GroupStyle.Panel >
                <ItemsPanelTemplate>
                    <VariableSizedWrapGrid    Orientation="Horizontal"  MaximumRowsOrColumns="{Binding maxGridCoulmns}"  Margin="0,0,80,0"/>
                    <!--not binding  here -->                         
                </ItemsPanelTemplate>
            </GroupStyle.Panel>
        </GroupStyle>
    </GridView.GroupStyle>
</GridView> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-29T04:27:11.997

您必须将 DependencyProperty 强制转换为 ICollectionViewGroup 才能获得实际的组对象。

在代码中`var actualGroup = (group as Windows.UI.Xaml.Data.ICollectionViewGroup).Group;`- 在 XAML 中，您所要做的就是将前缀添加`Group.`到绑定路径。

因此，在您的 XAML 中，只需像这样编辑绑定：

```
<ItemsPanelTemplate>
    <VariableSizedWrapGrid
        Orientation="Horizontal"
        MaximumRowsOrColumns="{Binding Group.maxGridCoulmns}"
        Margin="0,0,80,0"/>
</ItemsPanelTemplate> 
```

# ibm-midrange - AS400 RPGLE 在模块中定义显示文件

> ID：11245633
> 
> 赞同：1
> 
> 时间：2012-06-28T13:22:40.917
> 
> 标签：ibm-midrange, rpgle

我一直在阅读有关在 ILE 中创建模块和服务程序的内容，但在模块内定义显示窗口（提示屏幕）方面我找不到太多内容。我尝试了以下方法，但不断收到错误，即未定义 RECNO 参数（此处为 RRN）（*RNF7004）。知道我做错了什么......或者我可以在哪里获得更多信息......

```
 H NOMAIN                                                
    FWDWFACV   CF   E             WORKSTN                   
    F                                     SFILE(FACSFL:RRN) 
    FZMFL01    IF   E           K DISK                        
    D/COPY CUSSRCV6/QCPYSRC,TOOLS                           
    P WDWFAC          B                   EXPORT            
    DWDWFAC           PI                                    
    DWFAC                            2A                     
    DWFDESC                         20A   options(*nopass)  
    D RRN             S              3S 0 inz(0)            
    D WKFLAG          S              1S 0                   
    /free 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T18:53:20.147

附加到显示文件的 RRN 变量可能需要是全局的（在模块外部定义）。

# php - 是否可以通过过多地请求 php 脚本来重载 php 脚本或重载服务器？

> ID：11245634
> 
> 赞同：0
> 
> 时间：2012-06-28T13:22:44.060
> 
> 标签：php, performance, scripting

似乎是一个很长的问题。我想根据一般经验发表一些意见。

我使用 PHP 脚本在服务器上执行多项任务。我想知道如果我为三个不同的任务使用三个不同的脚本，或者根本不重要，是否会有所不同？

考虑到我一次指望 2-3k 用户（晚上，非常罕见），我仍然买不起每月 300 美元的服务器

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T17:49:40.263

人们使用 cronjobs 来制作 PHP 多任务是很常见的。我想这就是你想要做的。我只是将这些脚本作为 cronjobs 运行，如果证明服务器的负载很重，那么您可能应该考虑升级您的网络。300 美元对于一台服务器来说是很多，你可以从 AWS 获得一个不错的数据库服务器，预付 100 英镑，每月 7 英镑，使用小型实例，专用服务器基础就可以了。

请注意，如果您正在运行相同的脚本多任务处理（同一脚本的许多 crons 运行多个小时），您将需要对数据进行乐观锁定之类的操作，否则您将遭受严重损失。

当然，如果这对您的服务器来说有点太费力了，您为什么不考虑将您的处理租借给像iron.io这样更好的地方呢？有许多处理网络可以愉快且廉价地减轻您的处理负担。

我个人一直在研究的另一个替代方案是 AWS Spot 实例，这是多么了不起的创造！我有一堆 Auto Scaling 微型实例，每小时花费我 0.005c，而 Auto Scaling 组可以在 0 个服务器上工作，这意味着当它不被使用时，它会花费我很多钱。我肯定会说要查看用于处理脚本的现场实例，甚至可能为这些脚本保存剩余数据，这样你就不会在数据库上施加负载。无论哪种方式，它都比每月 300 美元便宜得多。

但是要回答你的标题，我每 2 小时在我的 AWS 小型实例处理数据等上运行 150 个 cronjobs，不，我还没有推翻 PHP 或我的服务器，同样在 CLI 模式下 PHP 没有超时，所以如果你做长时间处理使用如下命令：

```
php myscript.php 
```

运行您的处理作业。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T13:24:26.760

使用单独的脚本将帮助您识别每个脚本的问题。您将在日志中获得指向确切文件的错误消息和指针。

它还可以帮助您查看哪个脚本运行时间长（est），如果一个脚本崩溃，它不会影响其他脚本。您可以更轻松地监控哪些脚本需要优化。

只要确保它们不相互依赖即可。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T13:28:12.373

取决于脚本的目的以及将发出多少并发请求。假设它将是基于 php-mysql 的，我想说它主要取决于您的查询的性能。所以是的，我知道由于 MySQL 守护进程负载过大而导致网络服务器无法超时的脚本；即使是选定数量的用户。

希望对你有用！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-28T13:29:52.017

您可能还想检查 php.ini 文件以了解您的 php 安装。默认超时为 30 秒，因此根据服务器上的负载，如果您的脚本到那时还没有完成执行，您的任务将失败。您可以增加此值，但请注意，它可能会对任何耐心等待超过 30 秒以等待从前端执行任何长时间脚本的用户产生影响。

除此之外，在非高峰流量期间，仅使用一项任务就很难使任何现代服务器超载。

# iphone - iPhone根据用户当前时区从时间戳设置时间

> ID：11245636
> 
> 赞同：-1
> 
> 时间：2012-06-28T13:22:53.560
> 
> 标签：iphone, objective-c, nsdate, nsdateformatter

我需要在我的应用程序中设置时间。我从服务器（格林威治标准时间）获得了时间戳，我需要根据用户当前时区将该时间戳转换为日期。怎么可能？

```
NSDate *date = [[NSDate alloc] initWithTimeIntervalSince1970:@"1340907963"];

 NSDateFormatter *dFormat = [[[NSDateFormatter alloc] init] autorelease];
[dFormat setDateStyle:NSDateFormatterMediumStyle];

[dFormat setDateFormat:@"d.MM.yyyy"];

NSString *theDate = [dFormat stringFromDate:date]; 
```

这就是我将时间戳转换为日期的方式。我得到了 2012 年 6 月 20 日 23:55 之类的信息。但我的实际时间是 18:55

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T13:32:24.947

您收到的值是 unix 时间（自 1970 年以来的间隔）来转换它使用

```
NSString * timeStamp = @"1340907963";
NSDate *date = [[NSDate alloc] initWithTimeIntervalSince1970:timeStamp]; 
```

然后将其转换为字符串

```
NSDateFormatter *dFormat = [[[NSDateFormatter alloc] init] autorelease];
[dFormat setTimeZone:[NSTimeZone defaultTimeZone]];
[dFormat setDateFormat:@"dd.MM.yyyy HH:mm:ss zzz"]; 
NSString *theDate = [dFormat stringFromDate:date]; 
NSLog(theDate); // 28.06.2012 21:26:03 GMT+03:00 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T13:30:12.250

试试这个代码：

```
NSDate *date = [[NSDate alloc] initWithTimeIntervalSince1970:@"1340907963"];

NSDateFormatter *dFormat = [[[NSDateFormatter alloc] init] autorelease];
[dFormat setTimeZone:[NSTimeZone systemTimeZone]];
[dFormat setDateStyle:NSDateFormatterMediumStyle];
[dFormat setDateFormat:@"d.MM.yyyy"];

NSString *theDate = [dFormat stringFromDate:date]; 
```

# android - 崩溃 startActivityForResult(intent,1);

> ID：11245638
> 
> 赞同：-2
> 
> 时间：2012-06-28T13:22:55.720
> 
> 标签：android, android-activity

我的 android 应用程序有问题，我有一个手页，我改变了我的业务

```
startActivityForResult (intent, CODE_DE_MON_ACTIVITE). 
```

它可以工作，但是当我用相同的代码替换第二个活动后的这个页面时，没有任何效果。应用程序崩溃。知道我拥有清单中的所有活动。

日志：

```
06-28 13:09:47.765: D/AndroidRuntime(254): Shutting down VM
06-28 13:09:47.765: W/dalvikvm(254): threadid=3: thread exiting with uncaught exception (group=0x4001b188)
06-28 13:09:47.765: E/AndroidRuntime(254): Uncaught handler: thread main exiting due to uncaught exception
06-28 13:09:47.775: E/AndroidRuntime(254): java.lang.RuntimeException: Unable to start activity ComponentInfo{referencehit.android/referencehit.android.AddTournamentActivity}: java.lang.NullPointerException
06-28 13:09:47.775: E/AndroidRuntime(254):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2496)
06-28 13:09:47.775: E/AndroidRuntime(254):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2512)
06-28 13:09:47.775: E/AndroidRuntime(254):  at android.app.ActivityThread.access$2200(ActivityThread.java:119)
06-28 13:09:47.775: E/AndroidRuntime(254):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1863)
06-28 13:09:47.775: E/AndroidRuntime(254):  at android.os.Handler.dispatchMessage(Handler.java:99)
06-28 13:09:47.775: E/AndroidRuntime(254):  at android.os.Looper.loop(Looper.java:123)
06-28 13:09:47.775: E/AndroidRuntime(254):  at android.app.ActivityThread.main(ActivityThread.java:4363)
06-28 13:09:47.775: E/AndroidRuntime(254):  at java.lang.reflect.Method.invokeNative(Native Method)
06-28 13:09:47.775: E/AndroidRuntime(254):  at java.lang.reflect.Method.invoke(Method.java:521)
06-28 13:09:47.775: E/AndroidRuntime(254):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860)
06-28 13:09:47.775: E/AndroidRuntime(254):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618)
06-28 13:09:47.775: E/AndroidRuntime(254):  at dalvik.system.NativeStart.main(Native Method)
06-28 13:09:47.775: E/AndroidRuntime(254): Caused by: java.lang.NullPointerException
06-28 13:09:47.775: E/AndroidRuntime(254):  at referencehit.android.AddTournamentActivity.onCreate(AddTournamentActivity.java:38)
06-28 13:09:47.775: E/AndroidRuntime(254):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
06-28 13:09:47.775: E/AndroidRuntime(254):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2459)
06-28 13:09:47.775: E/AndroidRuntime(254):  ... 11 more
06-28 13:09:47.788: I/dalvikvm(254): threadid=7: reacting to signal 3
06-28 1
3:09:47.788: E/dalvikvm(254): Unable to open stack trace file '/data/anr/traces.txt': Permission denied 
```

你对我的问题有想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T13:26:15.587

你真的给 赋值了`Intent`吗？简单的编码会在你调用时`Intent intent;`抛出一个，就像你得到的那样。或者，您是否已将您的第二个活动添加到清单文件中？Android 不会启动不在其 Manifest 中的 Activity。`NullPointerException``startActivity(intent);`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T13:28:30.403

向您的 AndroidManifest.xml 添加以下权限

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" /> 
```

如果您忘记添加它，请添加它。

# jquery - 切换 li 中的下一个 ul

> ID：11245640
> 
> 赞同：1
> 
> 时间：2012-06-28T13:22:57.460
> 
> 标签：jquery

我想在单击 group1 或 group2 时切换 ul

HTML

```
<li class="sort">
  <span></span>
  <a class='expand'>Group1</a>
  <a style='padding-right:10px; float:right' href='#'>Delete</a>
  <a style='padding-right:10px; float:right' href='#'>Edit</a>
  <ul id="0" style='display:none'>
    <li style='border:none' id="1" class='sort'>
        <span></span>
        <a href='#'>Patent 1</a>
        <em style='padding-left: 60px;'>The description of patent 1</em>
        <a style='padding-right:10px; float:right' href='#'>Delete</a>
        <a style='padding-right:10px; float:right' href='#'>Edit</a>
    </li>
    <li style='border:none' id="2" class='sort'>
        <span></span>
        <a href='#'>Patent 2</a>
        <em style='padding-left: 60px;'>The description of patent 2</em>
        <a style='padding-right:10px; float:right' href='#'>Delete</a>
        <a style='padding-right:10px; float:right' href='#'>Edit</a>
    </li>
  </ul>
</li> 
```

我试过了

```
 <script>
  $(document).ready(function(){
    $('.expand').click(function() {
        $(this).next('ul').slideToggle('slow');
    });
});
</script> 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T13:24:56.247

您可以使用[`nextAll`](http://api.jquery.com/nextAll/)然后将匹配集减少到第一个元素[`eq`](http://api.jquery.com/eq/)：

```
$('.expand').click(function() {
    $(this).nextAll('ul').eq(0).slideToggle('slow');
}); 
```

如果它与选择器匹配，该`next`方法将返回*紧随其后*的兄弟。在您的情况下，这是不匹配的“删除”链接。

如果总是只有一个`ul`元素作为 的子元素，`li`则可以使用[`siblings`](http://api.jquery.com/siblings/)：

```
$('.expand').click(function() {
    $(this).siblings('ul').slideToggle('slow');
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T13:26:36.397

您也可以通过它的 ID 定位 ul：

```
$('a.expand').on('click',function(e){
    $('ul#0').slideToggle('slow');
 }); 
```

如果您正在调整它以与多个组一起使用，您是否考虑过给 a 一个匹配它的 ul 选择器的属性？

```
$('a.expand').on('click',function(e){
    e.preventDefault();
    var id = $(this).attr('href');
    $('ul#'+id).slideToggle('slow');
 }); 
```

这样，如果 DOM 的排列发生变化，您的代码仍然可以工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T13:27:52.703

只需在此处替换您的代码：

```
$(document).ready(function(){
    $('.expand').click(function() {
        $(this.parentNode).children('ul').slideToggle('slow');
    });
});​ 
```

`<UL>`旁边没有`<A>`！

**[工作小提琴](http://jsfiddle.net/8wGpK/)**

# python - 在 Python 中将行附加到具有额外新行的现有文件

> ID：11245644
> 
> 赞同：8
> 
> 时间：2012-06-28T13:23:14.143
> 
> 标签：python

我有一个文本文件

```
苹果
香蕉

```

现在你仔细观察最后有一个空白行。

什么时候追加

```
f = open("file.txt",'a')
f.write("橙色")
f.close()

```

我得到输出：

```
苹果
香蕉

橙

```

我想在追加期间删除中间的空白行。

我知道我可以手动转到文件并删除额外的新行。但我想用python来做。因此，每次出现空行时，它都会像这样自动删除：

```
苹果
香蕉
橙

```

我搜索并尝试过但无济于事

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-10-07T09:57:11.503

利用：

```
f = open("file.txt",'ab') 
```

'ab' 而不是只有 'a'

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-28T13:26:52.797

你不能，因为，追加模式正是这样做的：它追加。到换行符。您必须读取文件，在末尾删除换行符，将其写出然后追加。

或者，打开文件进行读写（模式`'r+'`），寻找到最后，删除换行符，然后继续写入。

我认为这可以解决问题：

```
f = open('file.txt', 'r+')
f.seek(-2, 2) # last character in file
if f.read(2) == '\n\n':
   f.seek(-1, 1) # wow, we really did find a newline! rewind again!
f.write('orange')
f.close() 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-28T13:27:42.617

一个简单的解决方案是覆盖整个文件，而不是就地修改它：

```
with open("file.txt") as input:
    # Read non-empty lines from input file
    lines = [line for line in input if line.strip()]
with open("file.txt", "w") as output:
    for line in lines:
        output.write(line)
    output.write("orange\n") 
```

只要文件不太大，此代码就可以正常工作。

您可以通过打开文件进行读取和写入、查找文件末尾的换行符数量、寻找第一个尾随换行符之后的位置并将该行添加到那里来更有效地执行此操作。这更有效，但也需要更复杂的代码，所以如果简单的解决方案不够快，我只会这样做。

**编辑**：这是我对更有效的方法的看法：

```
with open("file.txt", "r+U") as f:
    try:
        f.seek(-1, 2)
        while f.read(1) == "\n":
            f.seek(-2, 1)      # go back two characters, since
                               # reading advances by one character
    except IOError:            # seek failed, so the file consists
        f.seek(0)              # exclusively of newline characters
    else:
        f.write("\n")          # Add exactly one newline character
    f.write("orange\n")        # Add a new line 
```

这适用于任何数量的尾随换行符，包括根本没有或超过两个。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-28T13:34:39.833

这是另一种适用于该文件的解决方案：

```
with open('fruit.txt','rU+') as f:
    f.seek(-2,2)
    if(f.read(2) == "\n\n"):
        f.seek(-1,2)
    f.write('strawberry\n') 
```

我们打开文件进行读写（`'r+'`）。然后我们从末尾开始寻找 2 个字节。我们读取这些字节。（文件指针不在文件末尾）。如果这些字节都是换行符，我们会后退一个字节。然后我们写我们的新数据。

**编辑**在更一般的情况下：

```
def goto_my_eof(f):
    """Position file pointer after last newline in file
       raises IOError if the file is "empty" (has no contents or only whitespace)
    """
    n=-1
    f.seek(n,2)
    mychar=f.read(1)
    #Step backward, one character at a time, looking for non-whitespace
    while not (mychar.strip()): 
        n-=1
        f.seek(n,2)
    mychar=f.read(1)
    #seek to the position after the non-whitespace position
    f.seek(n+1,2)
    #write one newline and continue.
    f.write('\n') 
```

似乎工作（经过一些试验）。此外，这将删除任何空格（不仅仅是换行符）。将此与@SvenMarnach（更优雅地使用`try`并`except`捕获错误）的答案结合起来会很棒。在我的函数的情况下，您可以将它括在`try`/中`except`，如果发生则寻找位置 0 `except IOError`（因为该函数假定文件中有一些非空白文本）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-06-05T06:08:43.543

我将编写此代码以向文件添加新行：

```
f=open('newfile.txt','a')

t=raw_input('write here something you like: ')

f.write(t+'\n') 
```

然后读取文件中的内容，启动 shell 并输入：

```
with open('newfile.txt','a') as f:
   for l in f:
       print l 
```

这将打印文件中的所有内容。

我希望它能回答你的问题！！

# sql - SQL Server - 从经度和纬度到几何数据类型

> ID：11245645
> 
> 赞同：0
> 
> 时间：2012-06-28T13:23:14.293
> 
> 标签：sql, sql-server-2008, sqlgeography

> **可能重复：**
> [SQL Server 2008 空间：在多边形中找到一个点](https://stackoverflow.com/questions/11054149/sql-server-2008-spatial-find-a-point-in-polygon)

我正在开发一个使用 SQL Server 2008 数据库的应用程序。在这个数据库中，我有一个名为 Session 的表，它有两个字段 Longitude 和 latitude，它们指示用户的位置。在另一个名为 Zone 的表上，我有一个几何类型的 area 属性。如何检查用户的经纬度坐标是否属于某个几何？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T13:33:26.023

你有一个几何，它在欧几里得几何中存储了一个形状，你想把地球上的一个点与它关联起来，用纬度和经度表示，看看它是否在里面。由于 SQL 存储数据的方式，这不起作用。您可能需要使用地理数据类型来检查这一点 - 纬度和经度是球体上的点（实际上是大地测量数据，因为地球不是一个球体。）

有关它们为何不同的更多信息，请参阅[microsoft 的此说明](http://msdn.microsoft.com/en-us/library/bb964711.aspx)。还有这个关于stackoverflow的答案：[GEOMETRY and GEOGRAPHY difference SQL Server 2008](https://stackoverflow.com/questions/4991827/geometry-and-geography-difference-sql-server-2008)

要将数据从几何转换为地理，请尝试： Geography::STGeomFromText(cast(GeomCol as varchar(max)), 4326)

然后你可以使用`STIntersects`微软[在此处](http://msdn.microsoft.com/en-us/library/bb933962.aspx)记录的方法。

# asp.net-mvc - 您可以在 WebForms 中将 _ViewStart.cshtml 文件与 MVC 一起使用吗？

> ID：11245648
> 
> 赞同：0
> 
> 时间：2012-06-28T13:23:24.153
> 
> 标签：asp.net-mvc, asp.net-mvc-3, razor, webforms

我最近发现您可以将 MVC 与旧版 WebForms 应用程序并排使用，我目前正在试验。我在`_ViewStart.cshtml`Views 目录中创建了该文件，但根本没有调用它。如果我在每个视图页面中手动指定我的布局文件，它就会被拾取，所以这不是什么大问题，但我想避免必须在每个页面上指定布局。

知道为什么不调用 _ViewStart 吗？由于我使用的不是 MVC 项目而是网站项目，因此我需要做一些手动操作吗？

我没有收到任何错误，它只是完全被忽略了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T13:25:42.207

> 知道为什么不调用 _ViewStart 吗？

因为那是剃刀。它与 ASP.NET WebForms 无关。您必须使用 Razor 视图引擎才能拾取此文件。此外，您必须在 Views 文件夹中有一个 web.config 文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-12T03:46:05.690

请在[此处](https://stackoverflow.com/questions/36519541/pagestart-cshtml-vs-viewstart-cshtml-in-asp-net/)查看我的问题的答案。显然 _ViewStart 是 MVC-only。您可以在任一框架中使用 _PageStart。

# html - 无法正确排列 div

> ID：11245650
> 
> 赞同：0
> 
> 时间：2012-06-28T13:23:33.400
> 
> 标签：html, css

我无法让我的 div 正确布局。我试图有一个 200px 高并占据 100% 宽度的顶栏。在它下面是一个 200px 宽和 100% 高度的左栏，然后是一个将占据其余空间的右栏。

我在这里做错了什么？

```
<!DOCTYPE html>
<html>
<head>
    <title>my view</title>

    <style>
        #tb {
            background-color:#cc0000;
            height:200px;
            width:100%;
            position:relative;
        }

        #lb {
            background-color:#00cc00;
            width:200px;
            height:100%;
            float:left;
        }

        #rb {
            background-color:#cccccc;
            height:100%;
            float:right;
        }
    </style>

</head>
<body>
<div id="page" style="width:100%;height:100%">

    <div id="tb" style=""/>
    <div id="lb"/>
    <div id="rb" style=""/>

</div>
</body>
</html> 
```

当我在 div 中放入一些内容时，它看起来更糟：

```
<div id="tb" style="">test</div>
    <div id="lb">test</div>
    <div id="rb" style="">test</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T13:33:25.023

`height: 100%`或者`width: 100%`不是其余的大小，而是父级的整体大小，即整个文档。

[这](http://jsfiddle.net/oswaldoacauan/3yxkn/)是您想要使用表格的示例。

[这](http://jsfiddle.net/oswaldoacauan/zuzXB/1/)是一个div的例子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T13:39:18.747

如果您想要弹性布局，则为您的包装器 div #page 提供一些最小和最大宽度，那么您设计的顶部标题将根据父 div #page 的宽度进行调整。给包装器 div 指定高度不是一个好主意，但您可以使用最小高度。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T13:39:32.023

顺便说一句，您不能将 div 设置为自动关闭 -> 这是给您的示例[http://jsfiddle.net/QHTeS/2/](http://jsfiddle.net/QHTeS/2/)

```
#tb {
    background-color:#cc0000;
    height:200px;
    width:100%;
}

#lb{
    float: left;
    background:red;
    width:200px;

}

#rb{

    background:green
} 
```

​</p>

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-28T13:43:44.453

使用`<div>`s 和 CSS（即不是表格）- 布局不能以这种方式工作。（另外，正如评论者指出的那样，某些 HTML 是无效的）。

浮动元素的高度主要取决于其中的内容。你已经陷入了认为'height' CSS 声明的意思是你所期望的意思的陷阱。（“忘掉你所学的”）

您将不得不接受正常的 HTML/CSS 流程，即两个较低的 div 将具有不同的高度。但是，您可以使用[Faux Columns之类的东西来](http://www.alistapart.com/articles/fauxcolumns/)*伪造*您想要的效果。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-06-28T13:43:28.537

第一个 div 是对元素所以`<div></div>`

div 的流畅布局有点棘手。

这应该适合你：

```
<!DOCTYPE html>
<html>
<head>
<title>my view</title>

<style>
    html, body {height: 100%;}
    #tb {
        background-color:#cc0000;
        height:200px;
        width:100%;
        position:relative;
    }

    #lb {
        background-color:#00cc00;
        width:200px;
        height:100%;
        float:left;
        margin-left: -200px;
    }

    #rb {
        background-color:#cccccc;
        height:100%;
        float:right;
        width: 100%;
    }

    #content {
        margin-left: 200px; 
        height: 100%;
    }
</style>

</head>
<body>
<div id="page" style="width:100%;height:100%">

    <div id="tb" style=""></div>
    <div id="content">
       <div id="lb"></div>
       <div id="rb" style=""></div>
    </div>

</div>
</body>
</html> 
```

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2012-06-28T13:41:18.013

要填充页面的确切部分，您将需要使用绝对定位，因为百分比宽度/高度与父级的大小有关。

```
<!DOCTYPE html>
<html>
<head>
    <title>my view</title>

    <style>
        #tb {
            background-color:#cc0000;
            position:absolute;
            top:0px;
            left:0px;
            bottom:200px;
            right:0px;
        }

        #lb {
            background-color:#00cc00;
            position:absolute;
            top:200px;
            left:0px;
            bottom:0px;
            right:200px;
        }

        #rb {
            background-color:#cccccc;
            position:absolute;
            top: 200px;
            left:200px;
            bottom:0px;
            right:0px;
        }
    </style>

</head>
<body>
<div id="page" style="width:100%;height:100%">

    <div id="tb" style=""></div>
    <div id="lb"></div>
    <div id="rb" style=""></div>

</div>
</body>
</html> 
```

# web-services - 从非 drupal 站点调用 drupal web 服务的问题

> ID：11245651
> 
> 赞同：0
> 
> 时间：2012-06-28T13:23:33.857
> 
> 标签：web-services, drupal, service

我正在使用带有服务 6.x-2.0x 的 Drupal 6 并使用 beecolony 模块，当我通过非 Drupal 站点（移动应用程序）的 Drupal Web 服务调用登录到我的 Drupal 站点时，它要求我传递会话id .. 在我登录到我的 drupal 站点之前，我们不会获得会话 id...

如何使用这个网络服务！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T20:58:46.233

要使用会话 ID 身份验证选项，您需要先调用`system.connect`.

`system.connect`是一项不需要会话 id 的特殊服务。它的作用是在会话表中创建一个新条目并向您返回一个会话 ID，您需要将其保存并用于所有其他 Web 服务调用。

# selenium - 为多种语言安装 Selenium2

> ID：11245652
> 
> 赞同：0
> 
> 时间：2012-06-28T13:23:34.997
> 
> 标签：selenium

我有一个 centos 服务器并想安装 selenium，主要用于获取浏览器屏幕截图。我希望能够将 selenium webdriver 与 Ruby、Python 和 PHP 一起使用。

我无法掌握为此需要安装的内容。如果我以 Ruby 为例，我只是为 ruby​​ 安装 selenium webdriver - gem install selenium-webdriver - 这将处理所有依赖项，例如 selenium 服务器，还是我必须先安装 selenium 服务器。

如果尝试为相关语言安装多个客户端驱动程序，是否会有任何差异。

也许我把事情复杂化了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T20:13:37.907

您需要安装基于 Java 的 selenium 服务器（集线器）。

至于不同的语言，那些是客户端，所以这并不重要，因为它们都使用相同的 HTTP 协议与服务器通信。

因此，一旦服务器运行，您确实可以 gem install selenium-webdriver 并通过服务器从 ruby​​ 测试脚本运行测试。

# javascript - 使用没有翻译的 d3 SVG Scale

> ID：11245655
> 
> 赞同：2
> 
> 时间：2012-06-28T13:23:48.510
> 
> 标签：javascript, svg, scale, d3.js

我正在尝试在 SVG 和 d3 中使用 scale() 变换。我知道它通过增加坐标比例来工作，但它似乎也在翻译我的对象。当我有一个位于 (100,100) 的矩形并进行缩放 (2) 时，矩形的大小会翻倍并移动到 (0,0)。如何让它在缩放时停止从 (100,100) 移动到 (0,0)。以下是我的代码：

```
 var mysvg = d3.select("#viz")
        .append("svg")
        .attr("width", 500)
        .attr("height", 500)
        .attr("class","mylist");  

    var node = mysvg.selectAll("g.node")
        .data(mydata)
        .enter().append("g")
        .attr("class","node")
        .attr("transform", function(d) { return "translate(" + d.xpos + "," + d.ypos + ")"; });         

    node.append("rect")
        .attr("width",tileWidth)
        .attr("height",tileWidth)
        .attr("fill","orange")
        .attr("rx",10)
        .attr("ry",10);

    node.append("text")
        .attr("transform",function(d) { return "translate(" + tileWidth/2 + "," + tileWidth/2 +")" })
        .attr("text-anchor", "middle")
        .attr("dy", ".3em")
        .attr("font-family","serif")
        .text(function(d) { return d.symbol; });

    node.on("mouseover",function(){ d3.select(this).transition().attr("transform","scale(1.2)") });
    node.on("mouseout",function(){ d3.select(this).transition().attr("transform","scale(1)") }); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-12T16:25:02.747

可以在此处找到无需平移的通用缩放解决方案： [围绕中心点缩放](http://commons.oreilly.com/wiki/index.php/SVG_Essentials/Transforming_the_Coordinate_System#Technique%3a_Scaling_Around_a_Center_Point "围绕中心点缩放")

主意：

```
translate(-centerX*(factor-1), -centerY*(factor-1))
scale(factor) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-28T13:57:50.003

您的`mouseover`和`mouseout`事件将覆盖原来的`translate(" + d.xpos + "," + d.ypos + ")`.

我认为解决此问题的最简单方法是添加父级`g`并翻译它，例如...

```
var mysvg = d3.select("#viz")
        .append("svg")
        .attr("width", 500)
        .attr("height", 500)
        .attr("class","mylist");  

    var parent = mysvg.selectAll("g.parent")
        .data(mydata)
        .enter().append("g")
        .attr("class","parent")
        .attr("transform", function(d) { return "translate(" + d.xpos + "," + d.ypos + ")"; });      

    var node = mysvg.selectAll("g.parent")
        .enter().append("g")
        .attr("class","node")
     });         

    node.append("rect")
        .attr("width",tileWidth)
        .attr("height",tileWidth)
        .attr("fill","orange")
        .attr("rx",10)
        .attr("ry",10);

    node.append("text")
        .attr("transform",function(d) { return "translate(" + tileWidth/2 + "," + tileWidth/2 +")" })
        .attr("text-anchor", "middle")
        .attr("dy", ".3em")
        .attr("font-family","serif")
        .text(function(d) { return d.symbol; });

    node.on("mouseover",function(){ d3.select(this).transition().attr("transform","scale(1.2)") });
    node.on("mouseout",function(){ d3.select(this).transition().attr("transform","scale(1)") }); 
```

# asp.net - 如何测量 WebSockets 和 WebService 延迟

> ID：11245657
> 
> 赞同：0
> 
> 时间：2012-06-28T13:23:56.077
> 
> 标签：asp.net, web-services, c#-4.0, webforms, websocket

我有两个在 .Net/Web Form 中创建并在本地运行的应用程序 Web Socket 和 Web Service 是否有任何在线工具或任何简单的代码可以测量延迟？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T13:26:45.553

chrome 中的开发工具有一些计时/记录功能可能就足够了？

# android - android默认日历数据库架构

> ID：11245658
> 
> 赞同：0
> 
> 时间：2012-06-28T13:23:58.247
> 
> 标签：android, database, calendar, schema

有人请告诉我当我们添加新事件时，android 的默认日历数据库中使用的主键是什么。有人知道日历的数据库模式吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T05:32:27.357

我知道它是一个旧线程......但对于寻找类似答案的其他人，请参阅“[在 Froyo 中寻找新的日历数据库模式](http://forum.xda-developers.com/showthread.php?t=688095)”

# sql - 启动表格 SSAS 实例时出错

> ID：11245662
> 
> 赞同：0
> 
> 时间：2012-06-28T13:24:18.457
> 
> 标签：sql, sql-server, sql-server-2012, ssas, ssas-2012

我在尝试在 SQL Server 2012 上启动 SSAS 表格实例时收到此消息（在日志上）。我已经有一个多维实例正在运行，所以这将是第二个实例。我也尝试停止默认实例，但得到了同样的错误。

> 消息：无法启动服务：发生以下系统错误：系统资源不足，无法完成请求的服务。

我知道该消息似乎很明显，但它是一个具有大量免费资源（文件大小、CPU、RAM ..）的 DEV 服务器

以前有人遇到过这个错误吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T05:22:28.927

我知道这似乎很明显，但只是为了验证，您是否在表格模式下安装了至少一个实例？界面（图标）并不总是准确地反映模式 - 特别是 SQL Server 配置管理器为任何类型的 SSAS 实例显示 UDM (OLAP) 的图标。

如果您确定您确实安装了表格类型的 SSAS 实例，那么您是否能够在 SSCM 中验证（查看）该实例？如果是，服务状态是什么，即它是否已启动？如果没有，您可以在那里手动启动服务吗？服务帐户是否有足够的权限来运行服务？

如果这些解决方案都不起作用，请给我更多信息。

# antlr - 如何在 PHP 解析器中处理赋值运算符的优先级？

> ID：11245668
> 
> 赞同：1
> 
> 时间：2012-06-28T13:24:37.290
> 
> 标签：antlr, antlr3

我在 ANTLR 3.4 中编写了一个 PHP5 解析器，它几乎准备好了，但我无法处理 PHP 的一个棘手功能。我的问题是赋值运算符的优先级。正如 PHP 手册[所说](http://www.php.net/manual/en/language.operators.precedence.php)，赋值的优先级几乎在列表的末尾。只有`and`, `xor`,`or`和`,`在列表中。

但是手册页上有一条注释，上面写着：

> 尽管`=`优先级低于大多数其他运算符，但 PHP 仍然允许类似于以下的表达式：`if (!$a = foo())`，在这种情况下， 的返回值`foo()`被放入`$a`。

注释中的小示例对我的解析器来说不是问题，我可以将其作为分配规则中的特殊情况处理。

但是还有更复杂的代码，例如：

`if ($a && $b = func()) {}`

我的解析器在这里失败，因为它首先识别`$a && $b`并且无法处理其余的条件。这是因为 的`&&`优先级高于`=`。如果我将括号放在右侧`&&`：

`if ($a && ($b = func())) {}`

通过这种方式，解析器可以很好地识别结构。

算子是按照 ANTLR 书推荐的方式构建的：第一步有基本表达式，每个级别的算子都接踵而至。

有没有办法处理这种优先级跳跃？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T14:19:22.317

不要把它看成一个赋值，而是把它命名为***赋值表达式***。将此***赋值表达式***放在一元表达式“下方”（因此它们的优先级高于一元表达式）：

```
grammar T;

options {
  output=AST;
}

tokens {
  BLOCK;
  FUNC_CALL;
  EXPR_LIST;
}

parse
 : stat* EOF!
 ;

stat
 : assignment ';'!
 | if_stat
 ;

assignment
 : Var '='^ expr
 ;

if_stat
 : If '(' expr ')' block -> ^(If expr block)
 ;

block
 : '{' stat* '}' -> ^(BLOCK stat*)
 ;

expr
 : or_expr
 ;

or_expr
 : and_expr ('||'^ and_expr)*
 ;

and_expr
 : unary_expr ('&&'^ unary_expr)*
 ;

unary_expr
 : '!'^ assign_expr
 | '-'^ assign_expr
 | assign_expr
 ;

assign_expr
 : Var ('='^ atom)*
 | atom
 ;

atom
 : Num
 | func_call
 ;

func_call
 : Id '(' expr_list ')' -> ^(FUNC_CALL Id expr_list)
 ;

expr_list
 : (expr (',' expr)*)? -> ^(EXPR_LIST expr*)
 ;

If    : 'if';
Num   : '0'..'9'+;
Var   : '$' Id;
Id    : ('a'..'z')+;
Space : (' ' | '\t' | '\r' | '\n')+ {skip();}; 
```

如果您现在解析源：

```
if (!$a = foo()) { $a = 1 && 2; }
if ($a && $b = func()) { $b = 2 && 3; }
if ($a = baz() && $b) { $c = 3 && 4; } 
```

将构建以下 AST：

![在此处输入图像描述](../Images/07e4db739ddb6b2847a4bb61d498bfb5.png)

# hornetq - 从另一个系统连接到 horneQ

> ID：11245669
> 
> 赞同：3
> 
> 时间：2012-06-28T13:24:37.813
> 
> 标签：hornetq

我在独立模式下使用默认配置运行 hornetQ，我可以从本地系统连接到它，如果我想从另一个系统连接，必须更改哪些配置才能实现？！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T15:09:14.967

您需要配置传输、Netty 传输。

看看[http://docs.jboss.org/hornetq/2.2.14.Final/user-manual/en/html_single/index.html#configuring-transports](http://docs.jboss.org/hornetq/2.2.14.Final/user-manual/en/html_single/index.html#configuring-transports)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T17:25:49.990

您首先需要定义另一个系统的含义，您是指另一个 HornetQ 实例，还是另一个 JMS 服务器？

连接介质是什么？您想在 hornetQ 和其他 JMS 系统之间架起一座桥梁吗？查看 hornetQ 文档上的 JMS Bridge

您希望客户端连接到不同的消息服务器吗？查看 Stomp 协议和 apache / activeMQ 家伙提供的几个客户端。HOrnetQ 在服务器端原生支持 Stomp。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T08:20:20.853

这些是我的配置

hornetq-configuration.xml：

```
<configuration xmlns="urn:hornetq"            xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="urn:hornetq /schema/hornetq-configuration.xsd">
   <connectors>
      <connector name="netty-connector">
     <factory-class>org.hornetq.core.remoting.impl.netty.NettyConnectorFactory</factory-class>
     <param key="port" value="5446"/>
      </connector>
   </connectors>
   <acceptors>
      <acceptor name="netty-acceptor">
     <factory-class>org.hornetq.core.remoting.impl.netty.NettyAcceptorFactory</factory-class>
     <param key="port" value="5446"/>
     <param key="host" value="0.0.0.0"/>
      </acceptor>
   </acceptors>
</configuration> 
```

hornetq-beans.xml：

```
<bean name="Naming" class="org.jnp.server.NamingBeanImpl"/>
<bean name="JNDIServer" class="org.jnp.server.Main">
  <property name="namingInfo">
     <inject bean="Naming"/>
  </property>
  <property name="port">1099</property>
  <property name="bindAddress">0.0.0.0</property>
  <property name="rmiPort">1098</property>
  <property name="rmiBindAddress">0.0.0.0</property>
</bean> 
```

# python - 在 Python 中进行正交化。哪个包？

> ID：11245671
> 
> 赞同：2
> 
> 时间：2012-06-28T13:24:47.183
> 
> 标签：python, vector, linear-algebra

我需要在 Python 中正交化向量。到目前为止，我只发现了[algorithm.orthogonalize](http://nullege.com/codes/search?cq=algorithms.orthogonalize)。

尽管如此，看起来“算法”是一种我找不到安装的包（模块？）。有人做过正交化吗？请为这个过程提供一个不错的包/模块。我对 Python 很陌生。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T11:05:17.387

[numpy.linalg.qr](http://docs.scipy.org/doc/numpy/reference/generated/numpy.linalg.qr.html)原来是正交化向量的最佳选择，因为我认为向量具有复杂分量的向量。如果一个人用上面提到**的正交化方法**来做，那么一个人就失去了复杂的部分！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-28T13:28:47.760

该包是[Spectral Python 项目](http://spectralpython.sourceforge.net/)的一部分。

该[`orthogonalize`方法记录在这里](http://spectralpython.sourceforge.net/class_func_ref.html#orthogonalize)：

> 对一组向量执行 Gram-Schmidt 正交化

它可以[通过 pip 和 easy_install 安装](http://spectralpython.sourceforge.net/installation.html)。

# xml - ssis xml编码问题

> ID：11245672
> 
> 赞同：0
> 
> 时间：2012-06-28T13:24:51.847
> 
> 标签：xml, web-services, ssis, xsd

我遇到了很多人似乎都遇到的问题，使用 Web 服务创建 XML 文件，但我遇到的问题是编码都是错误的，而不是正确的 XML：

所以它看起来像这样：

```
 <?xml version="1.0" encoding="utf-16"?>
<string>&lt;!--This file generated by XMLPull tool on 06/28/2012 05:01:21 AM--&gt;
&lt;!--Datasource: Ticket--&gt;
&lt;DATASET&gt;&lt;DATAROW&gt;&lt;TicketDesc&gt;TEST TICKET&lt;/TicketDesc&gt;&lt;/DATAROW&gt;&lt;/DATASET&gt;</string> 
```

代替

```
<?xml version="1.0" encoding="UTF-16"?><!--This file generated by the XMLPull tool on 6/28/2012--><!--Datasource: Ticket--><DATASET><DATAROW TicketDesc="TEST TICKET></DATASET> 
```

和使用的架构：

```
<?xml version="1.0"?>
<xsd:schema id="DATASET" xmlns="" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:msdata="urn:schemas-microsoft-com:xml-msdata">
<xsd:element name="DATASET">
    <xsd:complexType>
        <xsd:sequence>
            <xsd:element ref="DATAROW" minOccurs="0" maxOccurs="unbounded"/>
        </xsd:sequence>
    </xsd:complexType>
</xsd:element>
<xsd:element name="DATAROW">
    <xsd:annotation>
        <xsd:appinfo/>
    </xsd:annotation>
    <xsd:complexType>
        <xsd:attribute name="TicketDesc">
            <xsd:simpleType>
                <xsd:restriction base="xsd:string">
                    <xsd:maxLength value="2048"/>
                </xsd:restriction>
            </xsd:simpleType>
        </xsd:attribute>
    </xsd:complexType>
</xsd:element>
</xsd:schema> 
```

因此，该文件似乎来自 web 服务（带有 html 标记？）我如何更改上面的架构以匹配此文件：

```
<?xml version="1.0" encoding="UTF-16"?><!--This file generated by the XMLPull tool on 6/28/2012--><!--Datasource: Ticket--><DATASET><DATAROW TicketDesc="TEST TICKET></DATASET> 
```

我曾尝试在 SSIS 中弄乱 XML Task 和 XPATH，但格式仍然错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-14T12:41:42.597

也许在**xml 任务**中您可以选择**XSLT 操作**，将 xml 转换为有效的 xml

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-05-20T23:21:40.867

我遇到了同样的问题（几年后），我不能使用将 & 转换为 & 等的建议方法，因为一些被引入的文本字段包括 HTML 编码字符——而且不可能知道字段的原始文本是否包含标签或标签的编码版本。

但是，我在使用 C# 的 HttpUtility.HtmlDecode 的 Web 服务和数据流任务之间使用脚本任务方面取得了很大成功 - > 如果您正在处理可能的原始文本，它只是无助于保留编码字符串包含那些编码字符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-22T15:20:48.220

您可以使用“脚本任务”控件

并使用替换原始字符。

```
public void Main()
    {
        // TODO: Add your code here
        Dts.Variables["User::SchoolData"].Value = Dts.Variables["User::SchoolData"].Value.ToString().Replace("&lt;", "<").Replace("&gt;", ">");
        ConnectionManager cm = Dts.Connections["Student.xml"];
        var path = cm.ConnectionString;
        var textToWrite = (string)Dts.Variables["User::SchoolData"].Value;
        System.IO.File.WriteAllText(path, textToWrite);
        Dts.TaskResult = (int)ScriptResults.Success;
    } 
```

例如，在这种情况下，我将 web 服务结果存储到“SchoolData”变量并替换它，然后将其写入“student.xml”这是我的场景： [![在此处输入图像描述](../Images/82f5d57fe4346c1cc120fb1ee9c2d8e4.png)](https://i.stack.imgur.com/iH5rS.png)

# java - 具有类型列表和继承的方法

> ID：11245674
> 
> 赞同：7
> 
> 时间：2012-06-28T13:24:56.330
> 
> 标签：java, list, inheritance, typed

我在使用从另一个（类型化）类继承的类型化 List 参数的方法时遇到了一些问题。

让我们保持简单：

```
public class B<T> {
  public void test(List<Integer> i) {
  }
} 
```

B 类有一个无用的泛型 T，而 test() 需要一个整数列表。

现在如果我这样做：

```
public class A extends B {
  // don't compile
  @Override
  public void test(List<Integer> i) {
  }
} 
```

我收到“ *A 类型的方法 test(List) 必须覆盖或实现超类型方法*”错误，这不应该发生。

但是删除列表的类型是可行的……尽管它不依赖于泛型类。

```
public class A extends B {
  // compile
  @Override
  public void test(List i) { 
```

并且还定义了下面无用的泛型以使用类型列表

```
public class A extends B<String> {
  // compile
  @Override
  public void test(List<Integer> i) { 
```

所以我一无所知， B 的泛型应该对 test() 列表的类型没有影响。有人知道发生了什么吗？

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-28T13:39:13.863

您正在扩展 B 的原始类型，而不是通用类型。原始的实际上没有`test(List<Integer> i)`方法，而是`test(List)`方法。

如果切换到原始类型，则**所有**泛型都将替换为原始类型，无论它们的类型是否已填写。

要正确执行，请执行

```
 public class A<T> extends B<T> 
```

这将使用泛型类型`B<T>`，其中包括您要覆盖的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T13:37:33.427

当您删除使用没有泛型的类时（并直接使用它），类方法中的所有泛型都将被遗忘。

由于这个原因，当您在第二种情况下通知泛型类型时，您可以使其正常工作。

这：

```
class T<G> {
   public void test(G g);
} 
```

在这种情况下：

```
class A extends T {
} 
```

看起来像这样：

```
class T {
   public void test(Object g);
} 
```

这是在 Google IO 2011 上展示的 Java 拼图，您可以[在此处观看视频](http://youtu.be/wbp-3BJWsU8)

# image - BlackBerry - 使用 HttpConnection 在 wifi 上下载的图像已损坏

> ID：11245675
> 
> 赞同：0
> 
> 时间：2012-06-28T13:25:12.627
> 
> 标签：image, blackberry, httpconnection, corrupt

在我的应用程序中，我需要从服务器下载多个图像。我使用此代码获取字节数组：

```
HttpConnection connection = null;
InputStream inputStream = null;
byte[] data = null;

try 
{ 
//connection = (HttpConnection)Connector.open(url);
connection = (HttpConnection)Connector.open(url, Connector.READ_WRITE, true);

        int responseCode = connection.getResponseCode();            
        if(responseCode == HttpConnection.HTTP_OK)
        {
            inputStream = connection.openInputStream();
            data = IOUtilities.streamToBytes(inputStream);  
            inputStream.close();
        }           
        connection.close();

        return data;
    }
    catch(IOException e)
    {
        return null;
    } 
```

网址由后缀“;deviceSide=false;ConnectionType=MDS - public”（不带空格）组成，并且运行良好。

问题是没有SIM卡的手机，我们无法通过MDS服务器连接到互联网。所以我们改为使用连接工厂，让BB选择他想要的任何东西：

```
 ConnectionFactory connFact = new ConnectionFactory();
    ConnectionDescriptor connDesc;
    connDesc = connFact.getConnection(url);

    if (connDesc != null)
    {
        final HttpConnection httpConn;
        httpConn = (HttpConnection)connDesc.getConnection();
        try
        {
            httpConn.setRequestMethod(HttpConnection.GET);
            final int iResponseCode = httpConn.getResponseCode();
            if(iResponseCode == HttpConnection.HTTP_OK)
            {
                InputStream inputStream = null;
                try{
                    inputStream = httpConn.openInputStream();
                    byte[] data = IOUtilities.streamToBytes(inputStream);   
                    return data;
                }
                catch(Exception e)
                {
                    e.printStackTrace();
                    return null;
                }
                finally{
                    try
                    {
                        inputStream.close();
                    } catch (IOException e)
                    {
                        e.printStackTrace();
                        return null;
                    }
                }
            }
        } 
        catch (IOException e) 
        {
            System.err.println("Caught IOException: " + e.getMessage());
        }
    }
    return null; 
```

连接有效，因为它选择了好的前缀（在我们的例子中为 interface=wifi），但这会产生另一个问题。

有些图像没有很好地下载，其中一些（每次尝试都不相同）已损坏，但只有当手机使用 wifi 连接来获取这些图像时。

我怎样才能避免这个问题？我必须使用什么方法来获得连接？是否可以检查用户是否有 SIM 卡才能使用 MDS-public？

这是损坏图像的示例：

[错误图片 http://nsa30.casimages.com/img/2012/06/28/120628033716123822.png](http://nsa30.casimages.com/img/2012/06/28/120628033716123822.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T12:19:07.387

试试这个：

```
public static String buildURL(String url) {
    String connParams = "";

        if (WLANInfo.getWLANState() == WLANInfo.WLAN_STATE_CONNECTED) {
            connParams = ";interface=wifi"; //Connected to a WiFi access point.
        } else {
            int coverageStatus = CoverageInfo.getCoverageStatus();
            //
            if ((coverageStatus & CoverageInfo.COVERAGE_BIS_B) == CoverageInfo.COVERAGE_BIS_B) {
                connParams = ";deviceside=false;ConnectionType=mds-public";
            } else if ((coverageStatus & CoverageInfo.COVERAGE_DIRECT) == CoverageInfo.COVERAGE_DIRECT) {
                // Have network coverage and a WAP 2.0 service book record
                ServiceRecord record = getWAP2ServiceRecord();
                //
                if (record != null) {
                    connParams = ";deviceside=true;ConnectionUID=" + record.getUid();

                } else {
                    connParams = ";deviceside=true";
                }
            } else if ((coverageStatus & CoverageInfo.COVERAGE_MDS) == CoverageInfo.COVERAGE_MDS) {
                // Have an MDS service book and network coverage
                connParams = ";deviceside=false";
            }
        }

       Log.d("connection param"+url+connParams);

    //
    return url+connParams;
}

private static ServiceRecord getWAP2ServiceRecord() {
    String cid;
    String uid;
    ServiceBook sb = ServiceBook.getSB();
    ServiceRecord[] records = sb.getRecords();
    //
    for (int i = records.length -1; i >= 0; i--) {
        cid = records[i].getCid().toLowerCase();
        uid = records[i].getUid().toLowerCase();
        //
        if (cid.indexOf("wptcp") != -1 
                && records[i].getUid().toLowerCase().indexOf("wap2") !=-1 
                && uid.indexOf("wifi") == -1 
                && uid.indexOf("mms") == -1) {
            return records[i];
        }
    }
    //
    return null;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T15:21:42.107

您可以检查 BIS_B（MDS 公共）的覆盖范围是否足够，但如果您尝试支持无 SIM 卡的用户，这对您没有帮助。我想知道问题是否在于 Wi-Fi 上的连接和 IOUtilities.streamToBytes() 之间的无法比较。[尝试按照API 文档](http://www.blackberry.com/developers/docs/7.0.0api/javax/microedition/io/HttpConnection.html)中的建议进行编码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T23:21:20.310

当您附加 interface=wifi 时会发生什么？您能否运行以下 kb 文章所附的网络诊断工具并在移除 SIM 卡的情况下运行所有​​测试

[http://supportforums.blackberry.com/t5/Java-Development/What-Is-Network-API-alternative-for-legacy-OS/ta-p/614822](http://supportforums.blackberry.com/t5/Java-Development/What-Is-Network-API-alternative-for-legacy-OS/ta-p/614822)

另请注意，当通过 BES/MDS 下载大文件时，MDS 会施加限制。请确保您查看以下知识库文章 [http://supportforums.blackberry.com/t5/Java-Development/Download-large-files-using-the-BlackBerry-Mobile-Data-System/ta-p/44585](http://supportforums.blackberry.com/t5/Java-Development/Download-large-files-using-the-BlackBerry-Mobile-Data-System/ta-p/44585)

# ruby-on-rails-3 - 在服务器上部署代码时出现 gem 异常

> ID：11245676
> 
> 赞同：0
> 
> 时间：2012-06-28T13:25:15.497
> 
> 标签：ruby-on-rails-3, deployment

嗨，我收到 gem 异常错误：

```
Gem::Exception: Cannot load gem at [/usr/lib/ruby/gems/1.8/cache/Ascii85-1.0.1.gem] in /home/profweb/rails-apps/profitnext/releases/20120628123949
 ** [out :: profitnext.com] An error occured while installing Ascii85 (1.0.1), and Bundler cannot continue.
 ** [out :: profitnext.com] Make sure that `gem install Ascii85 -v '1.0.1'` succeeds before bundling.
    command finished in 607967ms
*** [deploy:update_code] rolling back 
```

尽管我已在 gem 文件中安装了该 gem，但它显示在本地主机上的 gem 列表中。有人可以告诉我为什么我在“cap deploy”命令中收到此错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T14:22:01.597

您确定在远程主机上安装了所有依赖项吗？如果您正在安装 gem 并且系统上没有安装必需的软件包，则会产生类似的错误

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T05:59:51.130

我知道真正的问题在哪里。我在“deploy.rb”文件中添加了一行，并在我的 gemfile 中添加了所需的 gem，然后运行 ​​bundle install。现在我可以轻松地部署我的代码。感谢回复的朋友。

# qt - 带有用于查看文件系统的复选框的 QListView

> ID：11245679
> 
> 赞同：3
> 
> 时间：2012-06-28T13:25:18.943
> 
> 标签：qt, checkbox, qlistview, model-view, qtgui

有必要在 QListView 中通过图标和复选框按给定路径列出目录，然后将标记文件夹的名称传输到程序。对于列表目录，我使用代码：

```
#include <QtGui/QApplication>
#include <QFileSystemModel>
#include <QListView>

    int main(int argc, char *argv[])
    {
        QApplication a(argc, argv);

        QFileSystemModel model;

        QListView listView;
        listView.setModel(&model);
        listView.setRootIndex(model.setRootPath("C:\\Program Files"));
        listView.show();

        return a.exec();
    } 
```

按下按钮后如何添加复选框并传输？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T13:28:28.280

没有什么可以做的只是几行代码。您可以派生`QFileSystemModel`并添加一个复选框列，也可以创建一个代理模型来执行相同的操作。

请注意，您可以使用内置的选择机制来 Ctrl-click/⌘-click 以将选择扩展到多个项目：

```
//main.cpp
#include <QApplication>
#include <QFileSystemModel>
#include <QGridLayout>
#include <QListView>
#include <QPushButton>
#include <QMessageBox>

class Win : public QWidget
{
    Q_OBJECT
    QListView * view;
    QPushButton * button;
public:
    Win(QAbstractItemModel * model, const QModelIndex & idx) :
        view(new QListView(this)), button(new QPushButton("List Selection", this))
    {
        QGridLayout * lay = new QGridLayout;
        lay->addWidget(view, 0, 0, 1, 2);
        lay->addWidget(button, 1, 0);
        setLayout(lay);
        view->setSelectionMode(QAbstractItemView::MultiSelection);
        view->setModel(model);
        view->setRootIndex(idx);
        connect(button, SIGNAL(clicked()), SLOT(showSelection()));
    }
public slots:
    void showSelection() {
        QString str;
        foreach (QModelIndex i, view->selectionModel()->selectedIndexes()) {
            str.append(i.data().toString());
            str.append("\n");
        }
        QMessageBox::information(this, "Selected items", str);
    }
};

int main(int argc, char *argv[])
{
    QApplication a(argc, argv);
    QFileSystemModel model;
    Win v(&model, model.setRootPath("/"));
    v.show();
    return a.exec();
}

#include "main.moc" 
```

# javascript - 如何重新加载谷歌地图图层？

> ID：11245680
> 
> 赞同：0
> 
> 时间：2012-06-28T13:25:19.290
> 
> 标签：javascript, google-maps-api-3, addeventlistener, google-fusion-tables

当用户更改缩放级别时，我想重新加载 Fusion Tables 图层。可以看出，我尝试过但无法使其工作。

```
var map;
var layerl0;
    function initialize() {
    map=new google.maps.Map(document.getElementById('map_canvas'),{
        center: new google.maps.LatLng(MyLat,MyLng),
            zoom:4,
            mapTypeId: google.maps.MapTypeId.ROADMAP
        });
        layerl0 = new google.maps.FusionTablesLayer({
                    query: {
                        select: "'ColumnHeader'",
                        from: 'MyEncryptedId'
                },
                map: map
        });
        /* refresh after zooming */
        google.maps.event.addListener(map, 'zoom_changed', function() {
                layerl0.refresh();
    });
    }
google.maps.event.addDomListener(window, 'load', initialize); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T13:31:05.213

[FusionTablesLayer](https://developers.google.com/maps/documentation/javascript/reference#FusionTablesLayer)上没有 .refresh 方法

重新运行查询或销毁并重新创建 FusionTablesLayer

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-29T11:26:23.380

这是解决方案。（我在[这里](https://stackoverflow.com/questions/9996691/why-a-layer-was-incorrectly-reloaded)找到了）

每 30 秒刷新一次图层：

```
var map;
var layerl0;
    function initialize() {
    map=new google.maps.Map(document.getElementById('map_canvas'),{
        center: new google.maps.LatLng(MyLat,MyLng),
        zoom: 4,
        mapTypeId: google.maps.MapTypeId.ROADMAP
    });
    layerl0 = new google.maps.FusionTablesLayer({
        query: {
            select: "'ColumnHeader'",
            from: 'MyEncryptedId'
        },
    });
    layerl0.setMap(map);
    refreshMap();
}
function refreshMap(){
    layerl0.setOptions({
        query: {
        select: "'ColumnHeader'",
        from: 'MyEncryptedId',
            where: "location not equal to" + (-1 * Math.floor(Math.random() * 10000000)).toString()
        }
    }); 
    setTimeout('refreshMap()',30000);
}
google.maps.event.addDomListener(window, 'load', initialize); 
```

感谢您回答@Rebecca 和@geocodezip！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T18:17:26.503

此示例代码旨在在用户更改缩放时交换不同的 Fusion Table Layer。也许它会有所帮助： [https ://developers.google.com/fusiontables/docs/samples/change_query_per_zoom](https://developers.google.com/fusiontables/docs/samples/change_query_per_zoom)

-丽贝卡

# java - 如何使用 Weblogic 角色映射提供者的 getRoles 方法？

> ID：11245682
> 
> 赞同：0
> 
> 时间：2012-06-28T13:25:25.793
> 
> 标签：java, security, jakarta-ee, weblogic, jaas

有人可以提供`getRoles()`Weblogic角色映射提供者方法的用法吗？这在代码中如何使用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T14:37:28.100

看看这个

```
 if ((request.getUserPrincipal().getName()) != null) {
            String userName = request.getUserPrincipal().getName().trim();
            session.setAttribute("userName", userName);
            .....
            if (request.isUserInRole("ADMINS")) {
              //do actions here
            }
        } 
```

# visual-studio-2010 - 如何使用 TFS 和构建代理正确引用将在 GAC 中的 dll

> ID：11245698
> 
> 赞同：3
> 
> 时间：2012-06-28T13:25:58.800
> 
> 标签：visual-studio-2010, tfs, gac

我们正在从 VS2008 迁移到 VS2010 和 TFS。

目前，我们有一个解决方案，其中包含十几个内置到 DLL 中然后放入 GAC 的项目，以及在此解决方案中构建的 3 个网站项目，这些项目使用这些放入 GAC 中的 DLL。

在 VS2008 中，我们发布了使用 gacutil 注册它们的构建事件，这在本地开发人员机器上运行良好，但它不适用于 TFS 和构建代理。我不得不删除这个后期构建事件。

现在的问题是网站不会构建，因为 DLL 不在代理正在构建的构建机器上的 GAC 中。

我尝试从网站上引用 VS2010 中的项目，但这只是从 web.configs 中删除程序集引用，然后在构建/发布时将 dll 复制到 bin 文件夹，这不是我们想要的。

这些 DLL 将在生产中的 GAC 中，3 个网站都使用它们，所以我们不希望它们在 BIN 文件夹中。

我们也有第三方 DLL，它们将在 GAC 中用于所有 3 个网站。

什么是让它在 VS2010 和 TFS 中工作的正确方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T18:44:42.130

将 DLL 安装到 GAC 中对于版本管理和部署来说真的很痛苦。尝试创建一个“Lib”文件夹来保存所有第三方 DLL。我们在工作中这样做并且工作正常。这也不会是 XCopy 部署的问题。有关更多详细信息，请参阅[TFS 和引用的 DLL](https://stackoverflow.com/questions/3971377/help-with-tfs-and-referenced-dlls)的帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T15:40:08.843

要将 DLL 注册到 GAC 中，您需要管理员级别的权限，默认情况下，您的 Team Build Service 帐户并非如此。这就是它失败的原因。

那么你有两个选择：

1.  为您的 GACTUtil 设置管理员权限以使您成功。
2.  将引用应该在 GAC 中的 DLL 的 Visual Studio 项目更改到您将在调试/测试配置中部署它们的特定位置（例如，第三方 DLL 的 ThirdParties 文件夹，以及您自己的 DLL 的另一个文件夹），将 GAC 参考保留在版本中。

有些人会告诉你 1\. 很糟糕，因为你不应该为帐户授予管理员级别，因为这很糟糕。

有些人会告诉你 2\. 糟透了，因为事情变得复杂了，而且你不会按照他们实际发布的方式测试事情。

我的建议是 1\. 因为： - 这很容易 - 你不会破坏你当前的架构 - 服务的管理员级别不会有那么糟糕的风险，真的......

# c# - 根据登录用户禁用按钮

> ID：11245699
> 
> 赞同：0
> 
> 时间：2012-06-28T13:26:00.333
> 
> 标签：c#, asp.net, button, visibility

我正在接受一个用户 ID，并想检查是否有任何项目所有者具有相同的 ID。如果存在项目所有者，我应该只启用“下移”按钮并禁用所有其他按钮。如果存在管理员，则除了第一个上移和最后一个下移之外，所有按钮都将启用。我想禁用除 POwner 与 userID 相同的所有按钮！（如果 Powner 与 UserID 相同，则应启用下移按钮。

```
 public void Repeater1_ItemDatabound(Object Sender, RepeaterItemEventArgs e)
    {

        if (e.Item.ItemType == ListItemType.Item || e.Item.ItemType == ListItemType.AlternatingItem)
        {
            String userID = User.Identity.Name.Split('\\')[1];
            if (setvisibility(userID) == true) //Check if the person is Admin all buttons work 
            {

                if (e.Item.ItemIndex == 0)
                {
                    Button b = e.Item.FindControl("btnmoveup") as Button;
                    b.Enabled = false;
                }

                DataView view = (DataView)SqlDataSource1.Select(DataSourceSelectArguments.Empty);
                DataTable result = view.ToTable();
                if (e.Item.ItemIndex == (result.Rows.Count) - 1)
                {
                    Button b2 = e.Item.FindControl("btnmovedown") as Button;
                    b2.Enabled = false;
                }

            }
            else // Check if Project Owner (POwner exists) Check if userID exists in POwner
            {
                using (SqlConnection connection = new SqlConnection(WebConfigurationManager.ConnectionStrings["ctd_priority_dbConnectionString"].ConnectionString))
                {
                    connection.Open();
                    SqlCommand cmd = new SqlCommand("Select POwner from Projects WHERE POwner = @userid", connection);
                    cmd.Parameters.AddWithValue("@userid", userID);
                    SqlDataReader reader = cmd.ExecuteReader(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T13:54:53.793

如果要禁用中继器项目模板中的**所有**按钮，请尝试在要禁用控件的位置调用此方法：

```
private static void DisableButtonControls(RepeaterItemEventArgs e)
    {
        foreach (Control control in e.Item.Controls)
        {
            if (control is Button)
            {
                control.Visible = false;
            }
        }
    } 
```

要在禁用所有按钮后启用向下按钮，您可以执行以下操作：

```
Button downButton = e.FindControl("btnmovedown") as Button;
if (downButton != null)
{
    downButton.Visible = false;
} 
```

一个好的经验法则是，每当您使用“as”关键字转换类型时，请在使用之前检查返回的对象是否不为空。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T13:46:12.517

为您的 2 个可能角色创建（本地）布尔变量

```
bool isAdmin;
bool isProjectOwner; 
```

并在启用/禁用按钮**之前**确定它们的值。

```
isAdmin = setvisibility(userID);
//isProjectOwner // create a similar method to setvisibility() for your project owner 
```

现在您可以简单地通过分配或否定您的用户角色状态来切换按钮的可见性

```
...
if (e.Item.ItemIndex == 0)
{
    Button b = e.Item.FindControl("btnmoveup") as Button;
    // IS NOT admin AND IS project owner will set .Enabled = true
    b.Enabled = (!isAdmin && isProjectOwner);
} 
```

# mysql - 基本的全站搜索方法？

> ID：11245700
> 
> 赞同：2
> 
> 时间：2012-06-28T13:26:06.930
> 
> 标签：mysql, search, methodology

我想为所有内容（或至少可搜索的内容）都存储在数据库中的网站构建站点范围的搜索。在不过度参与的情况下，我能想到的最好方法如下：

1.  用户输入搜索查询-“棕色真皮沙发”。
2.  将查询拆分为数组。
3.  对数组的每一行使用 LIKE %$val% 搜索数据库 (mysql)。
4.  将结果加载到数组中，然后为在内容中找到的搜索词的数量给每个结果 +1 分。
5.  如果结果具有匹配数量的术语，则按特定页面的浏览次数排序 - 一个受欢迎程度的指标。

使用页面标题中的搜索词为结果赋予更多价值，或者允许用户通过使用引号来搜索多词短语，这不会太复杂。

除了性能考虑 - 限制返回的结果、缓存等，还有什么我需要考虑的或更好的方法来解决这个问题（除了实现谷歌搜索框）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T14:10:26.693

不确定过度参与的阈值是多少，但我可能会首先搜索包含整个字符串数组的匹配项，然后调用您描述的方法。

考虑：将作为单独结果返回的两条内容。

结果1：

```
____ brown ____ ____ _____ ____ brown ____ ____ ______ ___ brown _____ ____ brown 
```

结果 2：

```
brown leather sofas _____ _____ ______ ____ _____. 
```

显然，我们希望将结果 2 作为最高结果返回，但是您的方法会为结果 1 分配更多“点”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T14:23:20.240

您是否考虑过[全文搜索](http://dev.mysql.com/doc/refman//5.5/en/fulltext-search.html)？它并不适用于所有情况，但可以帮助解决此类问题。

```
SELECT * 
FROM articles
WHERE MATCH (title, body)
AGAINST ('database' IN NATURAL LANGUAGE MODE); 
```

不过请务必阅读[文档](http://dev.mysql.com/doc/refman//5.5/en/fulltext-natural-language.html)，因为有一些有趣的陷阱可以吸引新用户，例如：

> 如果您创建一个表格并在其中仅插入一两行文本，则文本中的每个单词至少出现在 50% 的行中。因此，没有搜索返回任何结果。确保插入至少三行，最好更多。

# php - mySQL查询复杂连接产生随机数和错误数

> ID：11245711
> 
> 赞同：2
> 
> 时间：2012-06-28T13:26:40.567
> 
> 标签：php, mysql, join, where

下面的代码用于查找没有邮寄投票、有电话号码、不拥有某些代码的选民，这些代码列在另一个表中，称为具有某些承诺的投票意向，或者根本没有列在该表中。

```
FROM electors,voting_intention 
WHERE
  electors.telephone > 0 
  AND electors.postal_vote != 1 
  AND (
    electors.mosaic NOT IN ('E1','E2','E3') 
    OR (
      electors.ID = voting_intention.elector 
      AND voting_intention.pledge IN ('U','W','X')
    ) 
    OR electors.ID != voting_intention.elector
  ) 
```

目前，它正在生成超过 200 万条记录，是数据库中记录的数倍。显然出了点问题，但我看不到我的错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T13:30:52.353

看起来你缺少选举者和投票意图之间的连接定义

我希望看到类似的东西：

```
FROM electors e 
INNER JOIN voting_intention v 
    ON v.elector_id = e.id 
```

显然，每个表都用正确的键替换了键。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T13:32:49.797

```
FROM electors e
        LEFT JOIN voting_intention v1 ON e.ID = v1.elector AND v1.pledge IN ('U','W','X') 
        LEFT JOIN voting_intention v2 ON e.ID = v2.elector
WHERE 
    e.telephone > 0 
AND e.postal_vote != 1 /* do not have a postal vote?? */
AND (e.mosaic NOT IN ('E1','E2','E3') 
     OR v1.elector IS NOT NULL
     OR v2.elector IS NULL) 
```

# javascript - 如何匹配以 JavaScript 输入结尾结尾的最小模式？

> ID：11245713
> 
> 赞同：1
> 
> 时间：2012-06-28T13:26:44.060
> 
> 标签：javascript, regex

[这是我之前的问题](https://stackoverflow.com/questions/11243168/how-to-capture-this-pattern-with-regex-in-javascript)的后续

我想找到长度为 >的*最小*`N`字符序列，它从单词边界开始，在输入结束时结束。

例如：

```
N = 5，输入 =“aaa bbb cccc dd”
结果=“cccc dd”
```

我试过`\b.{5,}?$`了，但它匹配整个`input`而不是*最小的*部分。

你`regex`有什么建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T13:33:50.623

你只是忘记了比赛周围的括号。采用

```
.*(\b.{5,}?)$ 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-28T16:04:02.713

这次的问题不是贪婪，而是渴望。正则表达式自然会尝试找到最早可能的匹配项，而让它们找到*最后*一个匹配项可能会很棘手。最简单的方法通常是@Arcadien 演示的方法：用于`.*`吞噬整个字符串，然后使用回溯来找到反弹的匹配项。

不过，我对您的要求有一些疑问。 `\b`可以匹配单词的开头或结尾，因此如果（例如）`N=5`字符串以 结尾`"foo1 bar2"`，则结果将是`" bar2"`（注意前导空格）。你真的想要一个从单词*末尾*开始的匹配，还是应该删除空格或回到开头`"foo1"`？另外，所有单词都完全由单词字符组成吗？如果有任何非单词字符，`\b`将能够在更令人惊讶的地方匹配。

对于下面的正则表达式，我将“单词”重新定义为任何完整的非空白字符块。从`.*`消耗整个字符串开始，然后是前瞻 -`(?=.{5,})`在它尝试匹配任何内容之前强制它回溯五个位置。强制匹配从单词的`\s`开头开始，因此正则表达式的其余部分捕获一个或多个完整的单词。

```
/^.*(?=.{5,})\s(\S+(?:\s+\S+)*$)/

var N = 5;
var regex = "^.*(?=.{" + N + ",})\\s(\\S+(?:\\s+\\S+)*$)";
var match = regex.exec(subject);
var result = (match != null) ? match[1] : ""; 
```

此正则表达式不会匹配长度少于五个字符或不包含空格的任何内容。如果这是一个问题，请告诉我，我会调整它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-28T13:33:04.133

您可以通过以下方式反转输入

```
.split("").reverse().join("") 
```

并应用上一个问题的答案，然后使用上述相同的功能反转匹配。

该解决方案不考虑性能。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-28T13:35:24.460

尝试使用`.{5}`(any character for the next 5 characters) 而不是`.{5,}`(any character for the next 5 or more characters)

以下使用正则表达式对我有用（由[@nhahtdh](http://regexpal.com/) `\w*.{5}$`改进）。这将获得所有后跟 5 个字符的单词。

结果：

```
String "AAAA BBBB CCCC DDEEE"
Match: "DDEEE"

String "AAAA BBBB CCCC DD"
Match: "CCCC DD"

String "AAAA BBBB CCCC"
Match: "BBBB CCCC"

String "AAAA"
Match: null 
```

# javascript - 在更改中总计选中的复选框

> ID：11245719
> 
> 赞同：0
> 
> 时间：2012-06-28T13:26:56.720
> 
> 标签：javascript, jquery

我有一个包含许多复选框的页面，每个复选框都与具有价格的产品相关联。我正在尝试使用 jQuery 来实时读取 1）产品数量和 2）用户选择的总价格。

这*应该*很容易：我会做类似的事情：

```
$(input).change( function(){
    var sum = $(input:checked).length
    var price_total = $(input:checked).length * 1.99
}) 
```

### 并发症

*被*更改的元素不计入上述代码。似乎当单击一个空白复选框来选中它时，jQuery 会认为当前元素“未选中”而不是“选中”，即它反映了更改*之前*的复选框。结果，我的代码在接受更改的项目时变得更加复杂。

有没有一种优雅而简单的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T13:35:10.090

不确定您发布的代码是否是您实际运行的代码，但除其他外，您的代码在`$`选择器中缺少引号。但是，这对我有用：

```
$(':checkbox').change( function(){
    var sum = $(':checked').length;
    var price_total = sum*1.99;
})​​ 
```

[**jsFiddle 演示**](http://jsfiddle.net/jackwanders/4JaK3/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T13:38:15.513

没有你的html，我只能猜测它。我的解决方案是使用像 data-price 这样的数据实体。

**HTML**

```
​&lt;input type="checkbox" data-price="1.99" />
<input type="checkbox" data-price="1.95" />
<input type="checkbox" data-price="3.60" />
<input type="checkbox" data-price="2.10" />

<div id="total"></div> 
```

**​jQuery**

 **```
​$('input').change(function() {
    recalcTotal();
});

function recalcTotal() {
var total = 0;
$('input:checked').each(function() {
    total += $(this).data('price'); 
});

 $('#total').html(total);
}
​ 
```

[小提琴](http://jsfiddle.net/D39M6/)

**注意：**我假设不同产品之间的价格可能会有所不同，不确定这是否正确

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T13:35:37.533

您可以选择这样的复选框：

```
$(input).change( function(){
    var sum = $('input[type=checkbox]:checked').length
    var price_total = sum * 1.99
}) 
```

我还使用你的 sum 值进行第二次计算。为什么不呢 - 它使它更快、更易读。它有效。**

# php - 如何仅使用注释将自定义查询应用于 Symfony2 中的 Doctrine 实体？

> ID：11245722
> 
> 赞同：2
> 
> 时间：2012-06-28T13:27:07.353
> 
> 标签：php, symfony, doctrine-orm, entities

如何仅使用注释将自定义查询应用于 Symfony2 中的 Doctrine 实体？

例如：

```
/**
 * @ORM\Table(name="some_object")
 * @ORM\Entity()
 */
class SomeObject
{
    /**
     * @ORM\SomeSpecialQuery()
     */
    private $someSpecialResult;
} 
```

`$someSpecialResult`使用时应包含特殊查询的结果。该属性最好是容器感知的，以便可以根据需要调用现有的存储库功能。一个典型的查询可能是`SELECT x FROM SomeBundle:EntityName x WHERE x.someOtherValue = null LIMIT 5`.

我的问题出现了，因为我有一个实体，我希望始终可以访问某些相关信息（作为自定义 DQL 查询执行起来要快得多）。

作为额外的奖励，如果它可以延迟加载会很棒吗？显然，如果有更好的方法来做到这一点，我很高兴听到它！谢谢。

# c#-4.0 - 灾难性故障（来自 HRESULT 的异常：0x8000FFFF (E_UNEXPECTED)）：ActiveX 和 C# 控制台应用程序

> ID：11245723
> 
> 赞同：3
> 
> 时间：2012-06-28T13:27:09.700
> 
> 标签：c#-4.0, com, activex

因此，我正在玩弄 ActiveX 和 C# 以及它们如何协同工作的方式。问题是我一开始就遇到了提到的错误。我遵循的步骤：

在 VS2010 中，我选择了 MFC ActiveX Control 项目。然后我添加了一个方法“SHORT Multiply(SHORT a, SHORT b);” 通过单击在解决方案资源管理器中右键单击 ProjectnameLib 下的 _DProjectname 时弹出的菜单中的添加方法选项。该方法的代码如下：

```
 SHORT CSampleProgramActivex01Ctrl::Multiply(SHORT a, SHORT b)
    {
      AFX_MANAGE_STATE(AfxGetStaticModuleState());

     // TODO: Add your dispatch handler code here

     return ( a * b);
    } 
```

现在我创建了一个简单的 C# 控制台应用程序，它引用了生成的 COM 文件，当我尝试使用该方法时，应用程序停止并出现上述错误。我在互联网上搜索了错误，但没有提到明确的解决方案。任何帮助表示赞赏。如果你们想要澄清，请告诉我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T13:01:40.543

我不知道这是否被认为是解决问题，但我找到了一种解决方法：

首先，我创建了 C# windows 窗体应用程序，而不是 C# 控制台应用程序。创建表单后，我已将整个 ocx 作为组件添加到工具箱中。您可以通过右键单击工具箱菜单中的工具箱类型来执行此操作。在新菜单中，单击选择项目。这会弹出新菜单，然后选择 COM 选项卡，然后检查您的 COM 组件，COM 组件将被添加到工具箱菜单中。现在将组件拖放到菜单上，您应该可以开始了。

这似乎是每个人都在遵循的解决方法。不整洁，但这是我认为的常态。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T02:33:06.960

看这里：如何在 Visual C++ 中使用 OLE 控件作为自动化服务器 [http://support.microsoft.com/kb/146120/en-us](http://support.microsoft.com/kb/146120/en-us)

# mongodb - Doctrine2 ODM 空闲内存

> ID：11245724
> 
> 赞同：0
> 
> 时间：2012-06-28T13:27:15.337
> 
> 标签：mongodb, memory, symfony, doctrine-orm

我尝试在 MongoDB 中浏览 15 000 个文档。php 使用内存随着 Doctrine ODM 爆炸式增长。我制作了一个顺序脚本，但内存仍在增长。

```
$nbrNoticesTotal = $noticesNbr['count'];
        $page = 0;
        $limit = 500;
        $pt = 0;
        $ptTotal = 0;
        $notices = $dm->getRepository('Notice')->findLimit($page, $limit)->toArray();
        if ($nbrNoticesTotal > 0) {
            while ($ptTotal < $nbrNoticesTotal) {
                if ($pt >= $limit) {
                    unset($notices);
                    $this->getContainer()->get('doctrine.odm.mongodb.document_manager');
                    $page += $limit;
                    $notices = $dm->getRepository('Notice')->findLimit($page, $limit)->toArray();
                    $pt = 0;
                }
                foreach ($notices as $key => $notice) {

                    $pt++;
                    $ptTotal++;
                    //unset($notice);
                    unset($notices[$key]);
                }
            }
        } 
```

memory_get_usage() 的示例：

```
2012-06-28 14:53:08.541-defaultLogger-DEBUG Start : 20,339,624
2012-06-28 14:53:10.154-defaultLogger-DEBUG get package : 1 - 64,207,344
2012-06-28 14:53:10.891-defaultLogger-DEBUG pointer time : 64,250,536
2012-06-28 14:53:11.642-defaultLogger-DEBUG pointer time : 64,246,952
2012-06-28 14:53:12.375-defaultLogger-DEBUG pointer time : 64,243,368
2012-06-28 14:53:13.140-defaultLogger-DEBUG pointer time : 64,239,784
2012-06-28 14:53:13.911-defaultLogger-DEBUG pointer time : 64,236,264
2012-06-28 14:53:15.359-defaultLogger-DEBUG get package : 2 - 104,447,576
2012-06-28 14:53:17.259-defaultLogger-DEBUG pointer time : 104,482,168
2012-06-28 14:53:19.013-defaultLogger-DEBUG pointer time : 104,478,584
2012-06-28 14:53:20.771-defaultLogger-DEBUG pointer time : 104,475,000
2012-06-28 14:53:22.650-defaultLogger-DEBUG pointer time : 104,471,416
2012-06-28 14:53:24.575-defaultLogger-DEBUG pointer time : 104,467,840
2012-06-28 14:53:26.081-defaultLogger-DEBUG get package : 3 - 139,016,152
2012-06-28 14:53:29.192-defaultLogger-DEBUG pointer time : 139,046,936
2012-06-28 14:53:32.560-defaultLogger-DEBUG pointer time : 139,043,360
2012-06-28 14:53:35.456-defaultLogger-DEBUG pointer time : 139,039,912
2012-06-28 14:53:38.229-defaultLogger-DEBUG pointer time : 139,036,336 
```

我该怎么做才能清除内存？（未设置不起作用）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T13:37:50.293

尝试使用**EntityManager::clear**方法告诉 DC 清除对象。

另外，据我记得 foreach 复制了数组并在 foreach 循环中取消设置以从数组中取消设置元素将不起作用-我的意思是内存使用情况，请尝试使用**for**而不是**foreach**。

也尝试使用**$value = null;** 而不是 unset 因为 unset 只是告诉 PHP 的 GC 它可以从内存中删除它 - 但你不知道他什么时候会这样做。有一些关于 unset & null 的话题——在这一点上我可能是错的。

我希望这能帮到您。

也可能存在内存增长的其他地方。

# c# - 将窗口/类型作为参数传递

> ID：11245725
> 
> 赞同：1
> 
> 时间：2012-06-28T13:27:18.960
> 
> 标签：c#, wpf, parameters, window

我的代码并不是那么相关，只是为了给你背景，我有一个方法可以打开这样的窗口实例`messageWindow`；

```
private void SetMessagePosition(Controls.Button btn, string text)
        {
            messageWindow = new messageWindow(text);
            relativePoint = btn.TransformToAncestor(this).Transform(new Point(0, 0));

            messageWindow.Left = relativePoint.X + this.Left;
            messageWindow.Top = relativePoint.Y + this.Top;
            messageWindow.Show();
        } 
```

但我想看看我是否也可以使用这种方法打开其他窗口。这显然意味着将我要打开的新窗口的名称作为参数传递给它。我的问题是，怎么做？我试过像这样传递参数；

```
private void SetMessagePosition(Window newWin, Controls.Button btn, string text))
        {
            newWin = new newWin(text);
            ... 
```

Where `newWin`= 我要打开的窗口类型。但显然该`new newWin`部分会引发错误，因为 VS 不知道名为`newWin`.

我知道你的第一个想法可能是，为什么不在调用这个方法之前实例化窗口，然后我可以一起跳过这一行。好吧，这个方法实际上是在打开时设置新窗口相对于父窗口的位置，所以，我以前不能设置它的位置。

我想尝试的另一件事是；

```
List<Window> winList;
List<Type> winListType;

winList.Add(window1);
winList.Add(window2);
winList.Add(window3);

winListType.Add(Window1);
winListType.Add(Window2);
winListType.Add(Window3);

SetMessagePosition(winList[2], winListType[2], btn1, "Yes");

private void SetMessagePosition(Window newWin, Type newWinType, Controls.Button btn, string text))
        {
            newWin = new newWinType(text);
            ... 
```

但`newWinType`不喜欢被传递 a`Type`而不是变量，即使它是`Type`. 如果有人知道这样做的方法/解决方法，我会印象深刻。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T13:39:40.037

通过使用这样的界面：

```
interface IWindow
    {
        int Left
        {
            get;
            set;
        }
        int Right
        {
            get;
            set;
        }
    void ShowWindow();
} 
```

然后在所有窗口中实现它，无论它是什么类型。

```
 public partial class MainWindow : Window , IWindow
    {
        public MainWindow()
        {
            InitializeComponent();

        }

        public new int Left
        {
            get
            {
                return Left;
            }
            set
            {
                Left = value;
            }
        }

        public int Right
        {
            get
            {
                return Right;
            }
            set
            {
                Left = value;
            }
        }

        public void ShowWindow()
        {
            Show();
        }
    } 
```

然后将您的参数更改为`IWindow`如下所示：

```
private void SetMessagePosition(IWindow window, Controls.Button btn, string text))
        { 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-28T13:39:54.350

您需要使其成为通用方法，以便您可以传递类型：

```
private void SetMessagePosition<T>(Controls.Button btn, string text) where T : Window, new()
{
    T window = new T();
    relativePoint = btn.TransformToAncestor(this).Transform(new Point(0, 0));
    window.Left = relativePoint.X + this.Left;
    window.Top = relativePoint.Y + this.Top;
    window.Show();
} 
```

然后，您可以这样称呼它：

```
SetMessagePosition<messageWindow>(btn, text); 
```

但是，这种方法的缺点是，当您通过泛型类型实例化对象时，您无法将任何内容传递给构造函数。因此，您需要以不同的方式在窗口上设置文本，例如创建具有 SetText 方法或类似方法的界面，并且可以将其添加为泛型类型的另一个约束。

您可以通过简单地期望新窗口已经实例化并传递给方法而不是让方法自己实例化它来简化整个混乱：

```
private void SetMessagePosition(Window window, Controls.Button btn)
{
    relativePoint = btn.TransformToAncestor(this).Transform(new Point(0, 0));
    window.Left = relativePoint.X + this.Left;
    window.Top = relativePoint.Y + this.Top;
    window.Show();
} 
```

然后，你可以这样称呼它：

```
SetMessagePosition(new newWin(text), btn); 
```

# android - 是否可以在我自己的应用程序中使用私有三星框架？

> ID：11245728
> 
> 赞同：1
> 
> 时间：2012-06-28T13:27:42.703
> 
> 标签：android, galaxy-tab, private-methods

在过去的两天里，我一直在探索在我自己的应用程序中使用私有三星框架的可能性，尤其是 /system/frameworks/seccamera.jar。还没有任何效果，所以我想知道这是否可能。

**一些背景**

我正在开发一个涉及扫描二维码的应用程序，因此非常依赖于相机的图像质量。因此，我正在努力从应用程序级别尽可能多地控制相机。大大提高扫描速度和可靠性的功能之一是相机进行点曝光测光的能力。但是，没有用于指定曝光测光模式的公共 API。

但是，使用 Galaxy Tab 2 上的内置相机应用程序，您可以指定几种曝光测光模式，其中包括点测光模式。所以我决定进一步调查。

**我已经尝试过的**

1.  我使用 Eclipse 从 /system/frameworks 中提取了内置相机应用程序的 apk 和 odex 文件
2.  我通过 baksmali 运行了 odex 文件，最后得到了一些 .smali 文件
3.  我在它们中搜索“exposureMetering”并找到了一个类 com.sec.android.seccamera.SecCamera，它支持通过其参数内部类指定曝光测光模式
4.  我确定该类位于 seccamera.jar (seccamera.odex) 中，因此我单独对其进行了 deodex：

    ```
    java -jar baksmali-1.3.3.jar --deodex seccamera.odex -o seccamera 
    ```

5.  然后我再次将它组合在一起：

    ```
    java -jar smali-1.3.3.jar seccamera/ -o seccamera.dex 
    ```

6.  最后我通过 dex2jar 运行 dex-file 来创建一个 jar 库：

    ```
    ../dex2jar-0.0.9.8/dex2jar.sh seccamera.dex 
    ```

我将其作为外部 jar 链接到我的 Eclipse 项目。我发现 SecCamera 类具有与公共 android.hardware.Camera 几乎相同的 API，因此它使我的代码转换变得更加容易。

该项目构建没有错误，但是它在启动时几乎立即崩溃，并出现以下错误：

```
06-28 16:49:31.648: E/AndroidRuntime(2329): FATAL EXCEPTION: main
06-28 16:49:31.648: E/AndroidRuntime(2329): java.lang.NoClassDefFoundError: com.google.zxing.client.android.camera.PreviewCallback
06-28 16:49:31.648: E/AndroidRuntime(2329):     at com.google.zxing.client.android.camera.CameraManager.<init>(CameraManager.java:70)
06-28 16:49:31.648: E/AndroidRuntime(2329):     at com.treelev.biennale.MainActivity.onResume(MainActivity.java:212)
06-28 16:49:31.648: E/AndroidRuntime(2329):     at android.app.Instrumentation.callActivityOnResume(Instrumentation.java:1158)
06-28 16:49:31.648: E/AndroidRuntime(2329):     at android.app.Activity.performResume(Activity.java:4539)
06-28 16:49:31.648: E/AndroidRuntime(2329):     at android.app.ActivityThread.performResumeActivity(ActivityThread.java:2448)
06-28 16:49:31.648: E/AndroidRuntime(2329):     at android.app.ActivityThread.handleResumeActivity(ActivityThread.java:2486)
06-28 16:49:31.648: E/AndroidRuntime(2329):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2000)
06-28 16:49:31.648: E/AndroidRuntime(2329):     at android.app.ActivityThread.access$600(ActivityThread.java:128)
06-28 16:49:31.648: E/AndroidRuntime(2329):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1161)
06-28 16:49:31.648: E/AndroidRuntime(2329):     at android.os.Handler.dispatchMessage(Handler.java:99)
06-28 16:49:31.648: E/AndroidRuntime(2329):     at android.os.Looper.loop(Looper.java:137)
06-28 16:49:31.648: E/AndroidRuntime(2329):     at android.app.ActivityThread.main(ActivityThread.java:4514)
06-28 16:49:31.648: E/AndroidRuntime(2329):     at java.lang.reflect.Method.invokeNative(Native Method)
06-28 16:49:31.648: E/AndroidRuntime(2329):     at java.lang.reflect.Method.invoke(Method.java:511)
06-28 16:49:31.648: E/AndroidRuntime(2329):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:790)
06-28 16:49:31.648: E/AndroidRuntime(2329):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:557)
06-28 16:49:31.648: E/AndroidRuntime(2329):     at dalvik.system.NativeStart.main(Native Method) 
```

`com.google.zxing.client.android.camera.PreviewCallback`是我的项目类之一，是我从ZXing项目中借来的，所以很明显。我不得不改变它，所以它实现`SecCamera.PreviewCallback`而不是`Camera.PreviewCallback`. 也许这就是这里的罪魁祸首。

在该错误之前，还有一些其他警告：

```
06-28 16:49:31.625: I/dalvikvm(2329): Failed resolving Lcom/google/zxing/client/android/camera/PreviewCallback; interface 264 'Lcom/sec/android/seccamera/SecCamera$PreviewCallback;'
06-28 16:49:31.625: W/dalvikvm(2329): Link of class 'Lcom/google/zxing/client/android/camera/PreviewCallback;' failed
06-28 16:49:31.625: E/dalvikvm(2329): Could not find class 'com.google.zxing.client.android.camera.PreviewCallback', referenced from method com.google.zxing.client.android.camera.CameraManager.<init>
06-28 16:49:31.625: W/dalvikvm(2329): VFY: unable to resolve new-instance 111 (Lcom/google/zxing/client/android/camera/PreviewCallback;) in Lcom/google/zxing/client/android/camera/CameraManager;
06-28 16:49:31.625: D/dalvikvm(2329): VFY: replacing opcode 0x22 at 0x000c
06-28 16:49:31.632: I/dalvikvm(2329): Could not find method com.sec.android.seccamera.SecCamera.release, referenced from method com.google.zxing.client.android.camera.CameraManager.closeDriver
06-28 16:49:31.632: W/dalvikvm(2329): VFY: unable to resolve virtual method 1436: Lcom/sec/android/seccamera/SecCamera;.release ()V
06-28 16:49:31.632: D/dalvikvm(2329): VFY: replacing opcode 0x6e at 0x0007
06-28 16:49:31.632: I/dalvikvm(2329): Could not find method com.sec.android.seccamera.SecCamera.open, referenced from method com.google.zxing.client.android.camera.CameraManager.openDriver
06-28 16:49:31.632: W/dalvikvm(2329): VFY: unable to resolve static method 1435: Lcom/sec/android/seccamera/SecCamera;.open ()Lcom/sec/android/seccamera/SecCamera;
06-28 16:49:31.632: D/dalvikvm(2329): VFY: replacing opcode 0x71 at 0x0005
06-28 16:49:31.632: I/dalvikvm(2329): Could not find method com.sec.android.seccamera.SecCamera.setPreviewDisplay, referenced from method com.google.zxing.client.android.camera.CameraManager.openDriver
06-28 16:49:31.632: W/dalvikvm(2329): VFY: unable to resolve virtual method 1439: Lcom/sec/android/seccamera/SecCamera;.setPreviewDisplay (Landroid/view/SurfaceHolder;)V
06-28 16:49:31.632: D/dalvikvm(2329): VFY: replacing opcode 0x6e at 0x0016 
```

那么，我在这里做错了什么？是否可以在我的自定义应用程序中使用私有框架（而不是修补现有应用程序）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-21T21:00:18.137

when using external libs like that, you must inform the package manager to link them at run-time

in this case, you add the following xml to the <application> element in AndroidManifest.xml

```
<uses-library android:name="seccamera" /> 
```

android reads /system/etc/permissions/seccamera.xml at bootup, and maps the seccamera lib name to the file the xml mentions (/system/framework/seccamera.jar in this case)

then when you mark it as a used lib, the os will link that code in at run-time, and your free to use the classes

looks like you already figured out the hard part, making eclipse compile against it

as for 'stealing' the code, as long as you dont share the rebuilt seccamera.jar with anybody and only use it to reference the functions from your code (dont include it into the apk), i dont see any real problem

but samsung may change the API later without warning and break your app

you may also want to mark it as not required [1](http://developer.android.com/guide/topics/manifest/uses-library-element.html#rq), or it will refuse to install on devices without that lib

# python - 递归视图

> ID：11245731
> 
> 赞同：0
> 
> 时间：2012-06-28T13:27:49.893
> 
> 标签：python, django

我想建立这个层次结构：

```
 <ul id="red" class="treeview-red">
          <li><span>Item 1</span>
            <ul>
              <li><span>Item 1.0</span>
                <ul>
                  <li><span>Item 1.0.0</span></li>
                </ul>
              </li>
              <li><span>Item 1.1</span></li>
            </ul>
          </li>
          <li><span>Item 2</span>
            <ul>
              <li><span>Item 2.0</span>
                <ul>
                  <li><span>Item 2.0.0</span>
                  <ul>
                    <li><span>Item 2.0.0.0</span></li>
                    <li><span>Item 2.0.0.1</span></li>
                  </ul>
                  </li>
                </ul>
              </li>
            </ul>
          </li>
          <li class="open"><span>Item 3</span>
            <ul>
              <li class="open"><span>Item 3.0</span>
                <ul>
                  <li><span>Item 3.0.0</span></li>
                  <li><span>Item 3.0.1</span>
                  <ul>
                    <li><span>Item 3.0.1.0</span></li>
                    <li><span>Item 3.0.1.1</span></li>
                  </ul>

                </li>
                  <li><span>Item 3.0.2</span>
                  <ul>
                    <li><span>Item 3.0.2.0</span></li>
                    <li><span>Item 3.0.2.1</span></li>
                    <li><span>Item 3.0.2.2</span></li>
                  </ul>
                </li>
                </ul>
              </li>
            </ul>
          </li>
        </ul> 
```

使用此模型：

```
class Category(models.Model):
    parent=models.ForeignKey('self',null=True,blank=True)
    name=models.CharField(max_length=100) 
```

在 views.py 中，我编写了这个简单的代码来获取类别：

```
def getCats(request):
    cats=Category.objects.all()
    str=u''
    str+='<li><span>Item 1</span><ul>'
    for cat in cats:
        str+=hiararchy(cat)
    str+=u'</ul></li>'
    return HttpResponse(simplejson.dumps(str),mimetype='application/json')

def hiararchy(cat):
    s=''
    if cat.parent is None or cat.parent==cat:
        s=cat.name
    else:
        s=cat.name
        return hiararchy(cat.parent)
    return s 
```

我不知道如何使用这种格式获取类别，坦率地说，我不太擅长递归函数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T13:34:00.407

也许你会发现这篇文章很有用：我用递归问了一个类似的问题，看起来有点像你的

[Python通过对象和子对象递归，打印子深度数](https://stackoverflow.com/questions/9984513/python-recursion-through-objects-and-child-objects-print-child-depth-numbers)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T18:40:48.713

最后我想出了这个解决方案：

```
def getCats(request):
    cats=Category.objects.filter(parent=None)
    s=u'<ul id="red" class="treeview-red">'
    for cat in cats:
        s += hiararchy(cat,True)
    s+=u'</ul>'
    return HttpResponse(simplejson.dumps(s),mimetype='application/json')

def hiararchy(cat,flag):
    if cat.parent and flag:
        return hiararchy(cat.parent,True)
    else:
        if cat.children.count()>0:
            s=u'<li><a href="#" id="'+str(cat.pk)+'" class="cat">%s</a>'%(cat.name)
            for child in cat.children.all():
                s+=u'<ul>%s</li></ul></li>'%(hiararchy(child,False))
            return s
        else:
            return u'<li><a href="#" id="'+str(cat.pk)+'" class="cat">%s</a></li>'%(cat.name) 
```

注意：1）当一个类别没有父节点时，这意味着它是树中的根节点 2）我的示例中的编号没有在我的代码中实现，我需要替换类别的名称来代替这些数字

# excel - 声明早期绑定的 MSXML 对象会在 VBA 中引发错误

> ID：11245733
> 
> 赞同：36
> 
> 时间：2012-06-28T13:27:59.707
> 
> 标签：excel, vba, scripting, msxml

我正在尝试将 xml 数据导入到 excel 中。所以代码的第一行是

`Dim XMLDOC As MSXML2.DOMDocument`

这给出了一个错误“未定义用户定义的类型”

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-06-28T13:36:59.600

在 VBE 中，转到 Tools -> References，然后选择 Microsoft XML, v6.0（或任何您最新的版本。这将使您能够访问 XML 对象库。

更新了精美的图片！

![在此处输入图像描述](../Images/9a378ad31a640a33133ae3844b684a56.png)

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2016-04-01T11:19:27.740

我已经`DOMDocument`定义了哪些需要，`Microsoft XML, v3.0`但我`Microsoft XML, v6.0`选择了导致以下错误的参考

> “未定义用户定义类型”。

**解决方案**

解决方案是更改`DOMDocument`为`DOMDocument60`（60 使用 6.0 版）或`Microsoft XML, v3.0`使用`DomDocument`.

* * *

只是一个简短的说明，如果有人使用不同的版本，例如 Microsoft XML，v4.0，那么`DOMDocument40`应该使用。这是因为末尾的数字`DOMDocument`特定于正在使用的库的版本。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-09-26T15:15:35.857

我使用其他人编写的 VBA Excel 宏，最近从 Windows 7 / Office 2010 升级到 Windows 10 / Office 2016 后，我的任务是修复它。我开始收到相同的“未定义用户定义类型”编译错误。我之前的安装也有 MS XML v6.0，但显然你必须在 Windows 10 和/或 Office 2016 上的代码中特别指出这个版本（我无法确认是哪个升级导致了问题）。我能够通过对以下内容进行查找/替换来解决该问题：

```
"DOMDocument" to "MSXML2.DOMDocument60"
"XMLHTTP" to "MSXML2.XMLHTTP60" 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-06-08T22:30:41.273

我正在使用 Microsoft Windows 10 和 Office 2016。

使用**Microsoft XML 6.0**并不能解决问题。

选择 **Microsoft XML 3.0**修复了编译错误

[![Microsoft XML 3.0 参考](../Images/0f5997345c3a108d7f5e583d40b2c043.png)](https://i.stack.imgur.com/KJ8T1.png)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-05-15T10:19:53.070

我安装了第 3 版和第 6 版，项目使用的是第 4 版。[我从https://www.microsoft.com/en-us/download/details.aspx?id=15697](https://www.microsoft.com/en-us/download/details.aspx?id=15697)安装了第 4 个版本，这解决了问题。

# java - JSF 2.1 重定向到 portlet

> ID：11245734
> 
> 赞同：0
> 
> 时间：2012-06-28T13:28:04.217
> 
> 标签：java, jsf-2, liferay-6

我将 liferay 升级到 6.0，将 JSF 从 1.2 升级到 2.1。我现有的代码

```
 ((ActionResponse)context.getExternalContext().getResponse()).sendRedirect( redirect );
context.responseComplete(); 
```

这里重定向定义如下：

```
String redirect = "/namingportal/group/customercenter/accountSearch"; 
```

上面的 URL 是请求必须重定向到的 portlet 页面。

开始出现错误：java.lang.IllegalStateException: Set render parameter has already been called at com.liferay.portlet.ActionResponseImpl.sendRedirect(ActionResponseImpl.java:48)

在做了一些谷歌之后，我认为上面的代码应该替换为以下代码：

解决方案1：

```
context.getExternalContext().redirect(redirect); 
```

当我尝试使用解决方案 1 时，它给了我错误 FacesFileNotFound /namingportal/group/customercenter/accountSearch.xhtml，它实际上是在寻找 xhtml 而不是 portlet。

我的 web.xml 中也有这个：

```
<context-param>
        <param-name>javax.faces.DEFAULT_SUFFIX</param-name>
        <param-value>.xhtml</param-value>
    </context-param> 
```

请让我知道是否有任何其他替代方法可以使用 Liferay 6.0 和 JSF 2.1 从 JSF 托管 bean 方法重定向到 portlet。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T18:55:56.607

该桥符合 ExternalContext.redirect(String) 的 JSR 329 规范要求，它提供了实现您想要做的事情的标准方法。

在大多数情况下，桥接器假定 ExternalContext.redirect(String) 是 JSF 导航规则触发的一部分。但是，有两种方法可以使其适用于您的情况：

1) 将 Bridge.DIRECT_LINK 参数添加到值为“true”的 URL：

```
String redirect = "/namingportal/group/customercenter/accountSearch?javax.portlet.faces.DirectLink=true";
externalContext.redirect(redirect); 
```

2) 将 URL 设为绝对 URL，如下所示：

```
PortletRequest portletRequest = externalContext.getRequest();
ThemeDisplay themeDisplay = (ThemeDisplay) portletRequest.getAttribute("THEME_DISPLAY");
String portalURL = themeDisplay.getPortalURL();
String redirect = portalURL + "/namingportal/group/customercenter/accountSearch";
externalContext.redirect(redirect); 
```

# c# - 如何根据 Silverlight 进度条的值进行更新？

> ID：11245735
> 
> 赞同：1
> 
> 时间：2012-06-28T13:28:04.857
> 
> 标签：c#, silverlight

我正在制作一个进度条作为我的 Silverlight 应用程序的一部分，当用户单击一个按钮时会触发它。现在，我只是让它在随机时间以随机增量进行更新，这样我就可以确保它按我的需要工作。更新 Progressbar 值的代码相当简单，但 Progressbar 的实际显示永远不会更新。我用于此的代码在这里：

```
Random randomGen = new Random();

while (submitProgress.Value < submitProgress.Maximum)
{
    System.Threading.Thread.Sleep(randomGen.Next(100, 500));
    submitProgress.Value += randomGen.Next(3, 7);
} 
```

我用来创建进度条的 XAML 在这里：

```
<ProgressBar Grid.Row="2" Height="30" Width="400" IsIndeterminate="False" 
Minimum="0" Maximum="100" Value="0" Name="submitProgress"></ProgressBar> 
```

需要明确的是，进度条在完成时确实会更新到其完成状态，但从开始到结束没有中间更新。如果您需要我提供更多信息，请告诉我。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T13:34:19.497

您在哪个线程上运行该进程？如果您在主线程上运行，则 UI 在处理完成之前不会更新。我建议使用[BackgroundWorker](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker%28v=vs.95%29.aspx)进行处理。然后在更新 UI 或更新绑定到 UI 的对象时，您将需要使用[Dispatcher 。](http://msdn.microsoft.com/en-us/library/system.windows.threading.dispatcher%28v=vs.95%29.aspx)

# iphone - 带有 iOS 的纯音频 HLS

> ID：11245737
> 
> 赞同：0
> 
> 时间：2012-06-28T13:28:08.680
> 
> 标签：iphone, ios, mpmovieplayercontroller, http-live-streaming

我正在尝试在我的应用程序中安装一个可以在后台播放的纯音频播放器。最初我使用了 MPMoviePlayerController，它工作得很好，但问题是它不支持向前和向后搜索（或使用滑块）。

有些录音长达一个小时，如果有人在录音过程中被打断并想回到他们原来的地方，他们必须从头开始。在我看来，使用 AVAudioCoder 似乎是解决方案，所以我更改了我的代码，发现它不适用于不在设备上的 URL。

我确实使用 Http Live Streaming，并且有一个 .m3u8 文件。是否有一种易于实施的解决方案来使用来自 Internet 源的 .m3u8 和 .mp3 文件，并且能够使用滑块更改播放位置。（因为它需要在后台播放，所以我不能使用 MPMoviePlayerController 的接口）

**更新：** 返回使用 MPMoviePlayerController，但有些奇怪的行为。在播放 .m3u8 播放列表，并设置新位置时，查询 currentPlaybackTime 时给出的值设置为正确的值，但声音继续播放，好像没有中断一样。

暂停播放器时，然后设置它只是忽略它并继续播放的时间，但至少“currentPlaybackTime”给出了正确的当前位置。

id appDelegate = (iDomsAppDelegate *)[[UIApplication sharedApplication] 委托]; 双倍长度 = [[appDelegate audioPlayer] 持续时间]; if(length > 0){ float sliderValue = [_slider value]; 双倍时间 = 滑块值 / 100 * 长度；

```
NSTimeInterval playBackTime = time;

NSLog(@"Requested time: %f vs current time %f", playBackTime, [[appDelegate audioPlayer] currentPlaybackTime]);
//[[appDelegate audioPlayer] pause];
[[appDelegate audioPlayer] setCurrentPlaybackTime:playBackTime];
//[[appDelegate audioPlayer] setInitialPlaybackTime:playBackTime];
//[[appDelegate audioPlayer] play];
NSLog(@"Requested time: %f vs current time %f (2)", playBackTime, [[appDelegate audioPlayer] currentPlaybackTime]); 
```

}

我每秒都会更新标签，这给了我上述行为：

id appDelegate = (iDomsAppDelegate *)[[UIApplication sharedApplication] 委托];

双倍时间 = [[appDelegate audioPlayer] currentPlaybackTime]; 双倍长度 = [[appDelegate audioPlayer] 持续时间]; NSLog(@"状态: %i, 时间: %f", [[appDelegate audioPlayer]playbackState], [[appDelegate audioPlayer] currentPlaybackTime]); if(length > 0){ double pos = 时间/长度 * 100; [_slider setValue:(float)pos]; [_slider setEnabled:true];

```
NSInteger seconds = (int) length % 60;
NSInteger minutes = ((int) length / 60) % 60;

double playableDuration = [[appDelegate audioPlayer] playableDuration];
if(playableDuration > 0 && playableDuration < length){
    int downloaded = (int)((float)((float)playableDuration / (float)length) * 100);
    [_unknownLength setText:[NSString stringWithFormat:@"Total duration: %02i:%02i (%02i%% downloaded)", minutes, seconds, downloaded]];   
} else {
    [_unknownLength setText:[NSString stringWithFormat:@"Total duration: %02i:%02i", minutes, seconds]];       
} 
```

} 其他 { [_slider setEnabled:false]; [_unknownLength setText:[NSString stringWithFormat:@"总持续时间未知"]];
}

NSInteger 秒 = (int) 时间 % 60; NSInteger 分钟 = ((int) 时间 / 60) % 60; [_position setText: [NSString stringWithFormat:@"%02i:%02i", 分, 秒]];

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T12:11:20.860

仅用于 FFMPEG 的音频分段无法正常工作，但现在已修复在 GIT 存储库的头部。使用 MPMoviePlayer 控制器现在可以完美运行，可以快速找到分段大小的步骤。

# python - python中的联赛夹具生成器

> ID：11245746
> 
> 赞同：5
> 
> 时间：2012-06-28T13:28:33.017
> 
> 标签：python, fixtures

我想用 python 写一个 League Fixture 生成器，但我做不到。这是详细信息：

有一个动态的团队列表，例如`teams = ["Team1", "Team2", "Team3", "Team4"]`. 如何从团队列表中生成 fixture_weekx 列表？例如：

```
fixture_week1 = ["Team1", "Team2", "Team3", "Team4"]
fixture_week2 = ["Team1", "Team3", "Team2", "Team4"]
fixture_week2 = ["Team1", "Team4", "Team2", "Team3"]

#Return matches:
fixture_week1 = ["Team2", "Team1", "Team4", "Team3"]
fixture_week2 = ["Team3", "Team1", "Team4", "Team2"]
fixture_week2 = ["Team4", "Team1", "Team3", "Team2"] 
```

任何的想法？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-28T13:57:18.597

夹具调度是一个众所周知的问题。这是在以下位置给出的算法的 python 实现：[http ://en.wikipedia.org/wiki/Round-robin_tournament](http://en.wikipedia.org/wiki/Round-robin_tournament)

```
# generation code - for cut and paste

import operator
def fixtures(teams):
    if len(teams) % 2:
        teams.append('Day off')  # if team number is odd - use 'day off' as fake team     

    rotation = list(teams)       # copy the list

    fixtures = []
    for i in range(0, len(teams)-1):
        fixtures.append(rotation)
        rotation = [rotation[0]] + [rotation[-1]] + rotation[1:-1]

    return fixtures

# demo code
teams = ["Team1", "Team2", "Team3", "Team4", "Team5"]

# for one match each - use this block only
matches = fixtures(teams)
for f in matches:    
    print zip(*[iter(f)]*2)

# if you want return matches 
reverse_teams =  [list(x) for x in zip(teams[1::2], teams[::2])]
reverse_teams = reduce(operator.add,  reverse_teams)    # swap team1 with team2, and so on ....

#then run the fixtures again
matches = fixtures(reverse_teams)

print "return matches"
for f in matches:    
    print f 
```

这会生成输出：

```
[('Team1', 'Day off'), ('Team2', 'Team5'), ('Team3', 'Team4')]
[('Team1', 'Team5'), ('Day off', 'Team4'), ('Team2', 'Team3')]
[('Team1', 'Team4'), ('Team5', 'Team3'), ('Day off', 'Team2')]
[('Team1', 'Team3'), ('Team4', 'Team2'), ('Team5', 'Day off')]
[('Team1', 'Team2'), ('Team3', 'Day off'), ('Team4', 'Team5')] 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-10-20T18:29:45.340

我想评论一下@MariaZverina 的代码不太好用。我按原样尝试了，但我没有得到正确的配对。我在下面所做的修改适用于她的代码。不同之处在于，我通过将夹具 f 的前半部分与相反的后半部分拉上拉链来对每个夹具进行彩虹式配对。

```
# demo code
teams = ["Team1", "Team2", "Team3", "Team4", "Team5"]

# for one match each - use this block only
matches = fixtures(teams)    
for f in matches:    
    # This is where the difference is.
    # I implemented "rainbow" style pairing from each fixture f 
    # In other words: 
    # [(f[0],[f[n-1]), (f[1],f[n-2]), ..., (f[n/2-1],f[n/2])], 
    # where n is the length of f
    n = len(f)
    print zip(f[0:n/2],reversed(f[n/2:n])) 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-12-31T02:02:32.687

@MariaZverina 的代码不起作用，我也使用 Round-robin_tournament 实现了此代码：

```
teams = ["Team1", "Team2", "Team3", "Team4", "Team5", "Team6"]
if len(teams) % 2:
    teams.append('Day off')
n = len(teams)
matchs = []
fixtures = []
return_matchs = []
for fixture in range(1, n):
    for i in range(n/2):
        matchs.append((teams[i], teams[n - 1 - i]))
        return_matchs.append((teams[n - 1 - i], teams[i]))
    teams.insert(1, teams.pop())
    fixtures.insert(len(fixtures)/2, matchs)
    fixtures.append(return_matchs)
    matchs = []
    return_matchs = []

for fixture in fixtures:
    print fixture 
```

输出：

```
[('Team1', 'Team6'), ('Team2', 'Team5'), ('Team3', 'Team4')]
[('Team1', 'Team5'), ('Team6', 'Team4'), ('Team2', 'Team3')]
[('Team1', 'Team4'), ('Team5', 'Team3'), ('Team6', 'Team2')]
[('Team1', 'Team3'), ('Team4', 'Team2'), ('Team5', 'Team6')]
[('Team1', 'Team2'), ('Team3', 'Team6'), ('Team4', 'Team5')]
[('Team6', 'Team1'), ('Team5', 'Team2'), ('Team4', 'Team3')]
[('Team5', 'Team1'), ('Team4', 'Team6'), ('Team3', 'Team2')]
[('Team4', 'Team1'), ('Team3', 'Team5'), ('Team2', 'Team6')]
[('Team3', 'Team1'), ('Team2', 'Team4'), ('Team6', 'Team5')]
[('Team2', 'Team1'), ('Team6', 'Team3'), ('Team5', 'Team4')] 
```

# javascript - 我如何使用 javascript/jquery 识别 ctrl+单击 html 网页？

> ID：11245748
> 
> 赞同：0
> 
> 时间：2012-06-28T13:28:40.373
> 
> 标签：javascript, jquery, html, click

我正在制作一个使用上下文菜单并具有选择的应用程序。现在我可以选择 1 个元素，但我想做的是 ctrl+click 允许我说将元素附加到一个数组中，以便同时选择多个元素。这样我可以同时影响 N 个事物的属性。

我需要它类似于 Control+Clicking，如果有更好的想法，我可能会感兴趣。可能是 Shift+click，但一般理解是选择 X 和 Y 之间的所有内容，因为用户更熟悉使用 ctrl 单击单个项目。

我知道如何做附加的事情，但我不确定如何做：

```
var ev = mouse||window.event;
var t_sel = ev.target || ev.srcElement;
 ... 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T13:34:04.367

```
$('.item').click(function(e) {
    if (e.ctrlKey || e.metaKey) {
        // required code to make selection
        // propably, add class to item to style it like selected item and check hidden checkbox
        $(this).toogleClass('selected');
        $(this).find('input[type=checkbox]').attr('checked', !$(this).find('input[type=checkbox]')('checked'));
    }
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-28T13:33:07.657

这将允许您检测控件单击：

```
$(document).click(function(e) {
  if(e.ctrlKey) {
    //You do your stuff here.
  }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T13:36:55.347

我使用 shiftcheckbox 能够在网格中选择一系列复选框。该代码可用，因此您可以根据需要对其进行更改。您也可以将其用作适合您的功能的灵感。 [https://github.com/nylen/shiftcheckbox](https://github.com/nylen/shiftcheckbox)

# visual-c++ - 发生换行符的 CEdit 索引

> ID：11245753
> 
> 赞同：0
> 
> 时间：2012-06-28T13:29:06.463
> 
> 标签：visual-c++, mc

我正在从 CEdit 控件获取文本。我需要在图像上模仿相同的文字。编辑控件是多行的，所以当我继续输入长字符串时，单词的剩余部分会转到下一行。我没有得到字符在下一行的 CEdit 中的哪个文本索引。

因此，在尝试执行此操作时，如果线的宽度超过矩形的宽度，我可以插入“\r\n”。但问题是，如果在插入的 "\r\n" 被 DrawText api 视为新词之后的字符居中对齐，并且上述插入换行符的目的失败。

有人可以告诉我吗，有什么方法可以让我知道 CEdit 中的线路在哪里中断或替代。

```
CString strTempFormattedText(_T(""));
LONG tempTotalWidth = 0;
for(int i = 0; i < myText.GetLength(); i++) {
    TCHAR tempChar = myText.GetAt(i);
    tempTotalWidth += pDC->GetTextExtent(CString(tempChar), 1).cx;
    if(tempTotalWidth >= rc.Width()) {
        tempTotalWidth = 0;
        strTempFormattedText.Append(_T("\n\r"));
    }
    strTempFormattedText.AppendChar(tempChar);
}
myText = strTempFormattedText;
switch(ALIGNMENT)
{
    case RIGHT:
        pDC->DrawText(myText, -1, rc, DT_WORDBREAK | DT_RIGHT );
        break;
    case CENTER:                                                       
        pDC->DrawText(myText, -1, rc, DT_WORDBREAK | DT_CENTER);
        break;
    case LEFT:
        pDC->DrawText(myText, -1, rc,  DT_WORDBREAK | DT_LEFT);
        break;   
} 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T14:05:00.483

我认为你应该结合[LineIndex](http://msdn.microsoft.com/en-US/library/90dfhy8f%28v=vs.80%29)、[LineLength](http://msdn.microsoft.com/en-US/library/b9a98xd4%28v=vs.80%29)和[PosFromChar](http://msdn.microsoft.com/en-US/library/4f89bexy%28v=vs.80%29)来解决你的问题。如果您需要访问更复杂的 CRichEditText，使用 API 而不是数据可能会很有用。

# .net - WCF 内部队列监控（为了避免向服务发送过多的请求）

> ID：11245754
> 
> 赞同：4
> 
> 时间：2012-06-28T13:29:07.507
> 
> 标签：.net, wcf, .net-4.0, wcf-4

我读到 WCF 服务限制在内部将请求排队，而无需任何额外的代码。是否可以监视这些内部队列以了解例如填充水平？

我的目标是避免客户端可以向服务发送许多请求（例如，通过缓慢或拥塞的服务），因此如果可以监控尚未发送的传出请求的数量，客户端可能会减少流量。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T13:55:34.433

您正在寻找的是一种节流算法。一种常见的此类算法是测量最后 N 次操作的平均延迟。如果延迟上升到异常水平以上，开始节流，因为服务显然已经饱和。

你可以这样做：

```
while (true) {
 var avgLatencyInSec = GetLatencyAverage();
 var thresholdLatency = 0.1; //100ms default latency
 var latencyDiff = Math.Max(0, avgLatencyInSec - thresholdLatency);
 Thread.Sleep((latencyDiff / thresholdLatency) * (latencyDiff / thresholdLatency));
 //you need to tune the sleep amount by a constant factor
} 
```

您的延迟越高于阈值，限制就会越多。限制以二次方上升，因此可以保证收敛。

# xml - PHP解析WFS XML回复

> ID：11245757
> 
> 赞同：1
> 
> 时间：2012-06-28T10:26:15.473
> 
> 标签：xml, php

我正在尝试解析从 WFS 请求到 GeoServer 的 XML（或 GML）回复。

我的目标是将 XML 提取到一个漂亮的整洁数组中，然后我可以显示、导出等。

我的 XML 如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>
<wfs:FeatureCollection numberOfFeatures="52" timeStamp="2012-06-28T10:11:02.193Z" xsi:schemaLocation="http://squirrel.bis.local/bis_workspace http://squirrel.bis.local:8080/geoserver/wfs?service=WFS&amp;version=1.1.0&amp;request=DescribeFeatureType&amp;typeName=bis_workspace%3Abis_1_priority_species http://www.opengis.net/wfs http://squirrel.bis.local:8080/geoserver/schemas/wfs/1.1.0/wfs.xsd" xmlns:opengeo="http://opengeo.org" xmlns:ogc="http://www.opengis.net/ogc" xmlns:bis_workspace="http://squirrel.bis.local/bis_workspace" xmlns:world="http://world.opengeo.org" xmlns:wfs="http://www.opengis.net/wfs" xmlns:medford="http://medford.opengeo.org" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:ows="http://www.opengis.net/ows" xmlns:gml="http://www.opengis.net/gml" xmlns:usa="http://usa.opengeo.org" xmlns:xlink="http://www.w3.org/1999/xlink">
<gml:featureMembers>
<bis_workspace:bis_1_priority_species gml:id="bis_1_priority_species.fid--2f086452_138094a10a0_116d">

<bis_workspace:id>27407951</bis_workspace:id>
<bis_workspace:gridref>SN123456</bis_workspace:gridref>
<bis_workspace:species>Milvus milvus</bis_workspace:species>
<bis_workspace:common>Red Kite</bis_workspace:common>
<bis_workspace:date>2004</bis_workspace:date>
<bis_workspace:comments>
</bis_workspace:comments>
<bis_workspace:family>Accipitridae</bis_workspace:family>
</bis_workspace:bis_1_priority_species>

<bis_workspace:bis_1_priority_species gml:id="bis_1_priority_species.fid--2f086452_138094a10a0_116e">
<bis_workspace:id>28064165</bis_workspace:id>
<bis_workspace:gridref>SN123456</bis_workspace:gridref>
<bis_workspace:species>Lutra lutra</bis_workspace:species>
<bis_workspace:common>European Otter</bis_workspace:common>
<bis_workspace:date>09/11/2001</bis_workspace:date>
<bis_workspace:comments>spraint</bis_workspace:comments>
<bis_workspace:family>Mustelidae</bis_workspace:family>
</bis_workspace:bis_1_priority_species>

</gml:featureMembers>
</wfs:FeatureCollection> 
```

我希望最终结果如下所示：

```
Array
(
    [0] => Array
    (
            [id] => 27407951
            [gridref] => SN123456
            [species] => Milvus milvus
            [common] => Red Kite
            [date] => 2004
            [comments] => 
            [family] => Accipitridae
        )

[1] => Array
    (
        [id] => 28064165
        [gridref] => SN123456
        [species] => Lutra lutra
        [common] => European Otter
        [date] => 09/11/2001
        [comments] => spraint
        [family] => Mustelidae
    )

[2] => Array
    (
        [id] => 27516850
        [gridref] => SN123456
        [species] => Tyto alba
        [common] => Barn Owl
        [date] => 2004
        [comments] => Pair, nest box in tree, 2 chicks
        [family] => Tytonidae
    ) 
```

)

等等等等

我正在使用以下代码 - 确实有效 - 但它似乎效率低下。对于 XML 中的每条记录，代码都必须解析整个 XML 回复。如果只有 20-30 条记录，这很好，但这个 XML 回复可能包含数千条记录。

有没有一种方法可以只扫描 XML 文件 1 次来构建这个数组？

这是PHP：

```
 //Parse the XML
    $xml = simplexml_load_string($wfs_reply, NULL, NULL, "http://squirrel.bis.local/bis_workspace");
    $xml->registerXPathNamespace('wfs', 'http://www.opengis.net/wfs');
    $xml->registerXPathNamespace('gml', 'http://www.opengis.net/gml');
    $xml->registerXPathNamespace('bis_workspace', 'http://squirrel.bis.local/bis_workspace');

    $count = 0;
    $feature_members_array = array();
    $feature_members_layer_path = "//bis_workspace:" . $layer_name; //I.e. '//bis_workspace:bis_1_priority_species'
    foreach($xml->xpath($feature_members_layer_path) as $feature_members_raw)
    {

        $feature_member_id = $feature_members_raw->xpath('//bis_workspace:id');
            $feature_members_array[$count]['id'] = (string)$feature_member_id[$count];
        $feature_member_gridref = $feature_members_raw->xpath('//bis_workspace:gridref');
            $feature_members_array[$count]['gridref'] = (string)$feature_member_gridref[$count];
        $feature_member_species = $feature_members_raw->xpath('//bis_workspace:species');
            $feature_members_array[$count]['species'] = (string)$feature_member_species[$count];
        $feature_member_common = $feature_members_raw->xpath('//bis_workspace:common');
            $feature_members_array[$count]['common'] = (string)$feature_member_common[$count];
        $feature_member_date = $feature_members_raw->xpath('//bis_workspace:date');
            $feature_members_array[$count]['date'] = (string)$feature_member_date[$count];
        $feature_member_comments = $feature_members_raw->xpath('//bis_workspace:comments');
            $feature_members_array[$count]['comments'] = (string)$feature_member_comments[$count];
        $feature_member_family = $feature_members_raw->xpath('//bis_workspace:family');
            $feature_members_array[$count]['family'] = (string)$feature_member_family[$count];

        $count ++;
    } 
```

非常感谢，史蒂夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T00:05:40.733

我也一直在努力处理 WFS XML 中的名称空间。我的解决方案是切换到 JSON！

如果您的 WFS 支持，您可以添加`outputFormat=json`到 WFS 请求中，事情会变得更容易:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-11-26T17:16:54.603

另一个解决方案（可能对某人有帮助）：

gml 文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<gml:FeatureCollection xmlns:gml="http://www.opengis.net/gml" xsi:schemaLocation="http://www.safe.com/gml/fme">
   <ezs:version>2</ezs:version>
   <ezs:reference class="16" key="BA2011_00001_1111"/>
   <gml:featureMember>
      <gml:surfaceProperty>
         <gml:Surface srsName="urn:adv:crs:ETRS89_UTM32">
            <gml:patches>
               <gml:PolygonPatch>
                  <ezs:attr>4220</ezs:attr>
                  <gml:exterior>
                     <gml:Ring>
                        <gml:curveMember>
                           <gml:Curve>
                              <ezs:prio>200</ezs:prio>
                              <ezs:attr>8001</ezs:attr>
                              <gml:segments>
                                 <gml:LineStringSegment>
                                    <gml:posList dimension="2">412575.990 5791993.100 412595.334 5791979.677 412590.991 5791956.384 412574.411 5791969.017 412575.990 5791993.100</gml:posList>
                                 </gml:LineStringSegment>
                              </gml:segments>
                           </gml:Curve>
                        </gml:curveMember>
                     </gml:Ring>
                  </gml:exterior>
               </gml:PolygonPatch>
            </gml:patches>
         </gml:Surface>
      </gml:surfaceProperty>
   </gml:featureMember>
</gml:FeatureCollection> 
```

编码：

```
$xmlFile = 'daten2.gml';
//Parse the XML
$xml = @simplexml_load_file($xmlFile);
$xpath = $xml->xpath( '//gml:PolygonPatch' );

$ezs_attr = (string) $xpath[0]->attr;

echo "The value0: $ezs_attr"; 
$xpath2 = $xml->xpath( '//gml:Curve' );
$xpath3 = $xml->xpath( '//gml:posList' );
$xpath4 = $xml->xpath( '//gml:FeatureCollection' );
$curve_ezs_prio = (string) $xpath2[0]->prio;
$curve_ezs_attr = (string) $xpath2[0]->attr;
echo "<br>";
echo "The value1: $curve_ezs_prio"; 
echo "<br>";
echo "The value2: $curve_ezs_attr"; 
echo "<br>";
echo "The value3: ".$xpath3[0]; 
echo "<br>";
echo "The value4: ".$xpath4[0]; 
echo "<br>";
echo "The value5: ".$xpath4[0]->reference->attributes()->key; 
```

输出：

```
The value0: 4220
The value1: 200
The value2: 8001
The value3: 412575.990 5791993.100 412595.334 5791979.677 412590.991 5791956.384 412574.411 5791969.017 412575.990 5791993.100
The value4:
The value5: BA2011_00001_1111 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-07-24T20:28:41.483

我也需要弄清楚这一点，而我的来源没有 JSON 响应。诀窍在于使用`$xml->getNamespaces(true)`并使用它作为检索孩子的参数。

这有效：

```
$xml = '<?xml version="1.0" encoding="UTF-8"?>
<wfs:FeatureCollection numberOfFeatures="52" timeStamp="2012-06-28T10:11:02.193Z" xsi:schemaLocation="http://squirrel.bis.local/bis_workspace http://squirrel.bis.local:8080/geoserver/wfs?service=WFS&amp;version=1.1.0&amp;request=DescribeFeatureType&amp;typeName=bis_workspace%3Abis_1_priority_species http://www.opengis.net/wfs http://squirrel.bis.local:8080/geoserver/schemas/wfs/1.1.0/wfs.xsd" xmlns:opengeo="http://opengeo.org" xmlns:ogc="http://www.opengis.net/ogc" xmlns:bis_workspace="http://squirrel.bis.local/bis_workspace" xmlns:world="http://world.opengeo.org" xmlns:wfs="http://www.opengis.net/wfs" xmlns:medford="http://medford.opengeo.org" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:ows="http://www.opengis.net/ows" xmlns:gml="http://www.opengis.net/gml" xmlns:usa="http://usa.opengeo.org" xmlns:xlink="http://www.w3.org/1999/xlink">
    <gml:featureMembers>
        <bis_workspace:bis_1_priority_species gml:id="bis_1_priority_species.fid--2f086452_138094a10a0_116d">

            <bis_workspace:id>27407951</bis_workspace:id>
            <bis_workspace:gridref>SN123456</bis_workspace:gridref>
            <bis_workspace:species>Milvus milvus</bis_workspace:species>
            <bis_workspace:common>Red Kite</bis_workspace:common>
            <bis_workspace:date>2004</bis_workspace:date>
            <bis_workspace:comments>
            </bis_workspace:comments>
            <bis_workspace:family>Accipitridae</bis_workspace:family>
        </bis_workspace:bis_1_priority_species>

        <bis_workspace:bis_1_priority_species gml:id="bis_1_priority_species.fid--2f086452_138094a10a0_116e">
            <bis_workspace:id>28064165</bis_workspace:id>
            <bis_workspace:gridref>SN123456</bis_workspace:gridref>
            <bis_workspace:species>Lutra lutra</bis_workspace:species>
            <bis_workspace:common>European Otter</bis_workspace:common>
            <bis_workspace:date>09/11/2001</bis_workspace:date>
            <bis_workspace:comments>spraint</bis_workspace:comments>
            <bis_workspace:family>Mustelidae</bis_workspace:family>
        </bis_workspace:bis_1_priority_species>

    </gml:featureMembers>
</wfs:FeatureCollection>';

$xml = simplexml_load_string($xml);
$ns = $xml->getNamespaces(true);
$species_list = array();
foreach ($xml->children($ns['gml'])->featureMembers->children($ns['bis_workspace'])->bis_1_priority_species as $species_data) {
    $species = array();
    foreach ($species_data as $key => $value) {
        $species[$key] = (string) $value;
    }
    $species_list[] = $species;
}
echo "<pre>";
var_export($species_list);
echo "</pre>"; 
```

# php - PHP：为父类设置变量

> ID：11245759
> 
> 赞同：3
> 
> 时间：2012-06-28T13:29:24.150
> 
> 标签：php, class, variables, inheritance

我有

```
class Meat extends Food {
$var = Food::foodFunction…
} 
```

我需要为 Food 类设置 $var，我该怎么做？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-28T13:31:30.860

如果`$var`在食品类中是一个`protected`/`public`变量，您只需使用`$this->var`，如果是，`private`您无法设置它

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-28T13:30:49.423

在构造函数或其他一些成员函数中使用`$this`：

```
function __construct() {
    $this->var = Food::foodFunction();
} 
```

否则，您无法初始化`$var`为非静态的任何内容。

# ftp - 500 无效的 PORT 命令

> ID：11245760
> 
> 赞同：0
> 
> 时间：2012-06-28T13:29:29.220
> 
> 标签：ftp

我们的 Windows 服务运行一段时间没有任何问题，但现在在尝试建立 FTP 连接时抛出 500，无效端口命令错误。

在同一台服务器上使用 Core FTP lite 客户端，我可以在主动和被动模式下连接到 FTP 服务器，没有任何问题。防火墙规则没有改变，应用程序代码根本没有改变。

任何想法为什么只有在尝试从 Windows 应用程序连接时才会引发 Invalid Port Command 错误，我们将不胜感激。

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T00:06:01.417

我在这篇文章中尝试[了第二种解决方案](https://serverfault.com/a/280491/137159)，它解决了我的问题。我还必须升级到 IIS 7.5 FTP 并允许我的 WIndows 2008 服务器防火墙和外部防火墙上的被动端口

# android - Android 应用程序中的版本更改问题

> ID：11245762
> 
> 赞同：0
> 
> 时间：2012-06-28T13:29:34.793
> 
> 标签：android

我的开发人员在创建应用程序的第一个版本时犯了一个错误。他没有特别在第一个应用程序中包含版本号 1。现在，我们要更新应用程序，但问题是，如果我们使用 1.1 作为 android:versionCode，这会被 Google Play Market 识别为更新吗？我的开发人员认为它无法正常工作，因为我们没有在第一个应用程序中包含版本。我最担心的是谷歌可能会认为它完全是一个新应用程序并复制它。

有什么出路吗？请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T13:38:04.303

谷歌根据包名称而不是版本来制作应用列表。此外，如果没有`versionCode`. 您不能拥有`versionCode`类似的 1.1，因为它必须是整数。唯一的规则`versionCodes`是新更新的代码必须大于旧的。

而且，`versionCodes`和`versionNames`是两个不同的东西。`versionCodes`应用商店使用它来跟踪更新，而`versionNames`更常见的标识符（如 1.0.0 等`versionCodes`）仅限于整数，而`versionNames`可以是字母数字。下面的代码片段应该给你一个例子：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
      package="com.example.package.name"
      android:versionCode="2"
      android:versionName="1.1">
    <application android:icon="@drawable/icon" android:label="@string/app_name">
        ...
    </application>
</manifest> 
```

有关对应用进行版本控制的更多详细信息，请参阅[此](http://developer.android.com/tools/publishing/versioning.html)链接。

# iis - Chrome 是否忽略了 Cache-Control: max-age？

> ID：11245767
> 
> 赞同：51
> 
> 时间：2012-06-28T13:29:51.217
> 
> 标签：iis, google-chrome, cache-control, content-expiration

背景：

*   IIS 7
*   AspNet 3.5 网络应用程序

Chrome 开发工具列出了 98 个对 Web 应用主页的请求（aspx + js + css + 图片）。在以下请求中，状态代码`200`用于 css/images 文件。没有缓存信息，浏览器每次都询问服务器是否需要更新文件。好的。

在 IIS 7 中，我为缓存控制设置了 HTTP 标头，将“资源”文件夹设置为 6 小时。在 Chrome 中，使用开发工具，我可以看到标题设置得很好：

```
Cache-Control: max-age=21600 
```

但是我仍然收到 98 个请求...我认为如果未达到到期日期，浏览器不应该请求一个资源，并且我期望请求的数量会下降...

* * *

## 回答 #1

> 赞同：106
> 
> 时间：2013-02-12T21:54:23.520

我知道了。如果您在对同一选项卡中的同一 URI 的另一个请求之后立即发出请求（通过单击刷新按钮、按下键或按+ ） ， Google Chrome 浏览器会忽略`Cache-Control`or标头。它可能有一个算法来猜测用户真正想要做什么。`Expires``F5``Command``R`

测试`Cache-Control`标头的一种方法是返回一个带有自身链接的 HTML 文档。单击链接时，Chrome 会从缓存中提供文档。例如，将以下文档命名为**self.html**：

```
<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Test Page</title>
</head>
<body>
    <p>
        <a href="self.html">Link to the same page.</a>
        If correctly cached, a request should not be made
        when clicking the link.
    </p>
</body>
</html> 
```

另一种选择是复制 URL 并将其粘贴到同一选项卡或另一个选项卡中。

**更新**：在[2017 年 1 月 26 日发布的 Chrome 帖子中，](https://blog.chromium.org/2017/01/reload-reloaded-faster-and-leaner-page_26.html)描述了以前的行为以及它是如何通过仅重新验证*主资源*而不是*子资源*来改变的：

> 用户通常会因为页面损坏或内容过时而重新加载。现有的重新加载行为通常可以解决损坏的页面，但定期重新加载无法有效解决陈旧的内容，尤其是在移动设备上。此功能最初是在损坏页面非常普遍的时候设计的，因此一次解决两个用例是合理的。然而，随着网页质量的提高，这种最初的担忧现在变得不那么重要了。为了改进陈旧的内容用例，Chrome 现在有一个简化的重新加载行为，只验证主要资源并继续正常的页面加载。这种新行为最大限度地重复使用缓存资源，并降低延迟、功耗和数据使用量。

在[同样于 2017 年 1 月 26 日发布的 Facebook 帖子](https://code.facebook.com/posts/557147474482256/this-browser-tweak-saved-60-of-requests-to-facebook/?utm_source=codedot_rss_feed)中，提到他们发现[一段代码](https://chromium.googlesource.com/chromium/src/+/540d0cca0eba6e24679387bb67e49d459969e6e9/third_party/WebKit/Source/core/fetch/ResourceFetcher.cpp#694)是 Chrome 在 POST 请求后使所有缓存的资源无效：

> 我们发现 Chrome 会重新验证通过 POST 请求加载的页面上的所有资源。Chrome 团队告诉我们这样做的理由是 POST 请求往往是进行更改的页面——比如进行购买或发送电子邮件——并且用户希望拥有最新的页面。

似乎不再是这种情况了。

最后，描述了 Firefox 正在引入`Cache-Control: immutable`完全停止资源的重新验证：

> Firefox 实现了我们的一位工程师的提议，为某些资源添加一个新的缓存控制标头，以便告诉浏览器永远不应该重新验证该资源。这个标头背后的想法是，它是开发人员向浏览器额外承诺的，即该资源在其 max-age 生命周期内永远不会改变。Firefox 选择以 cache-control: immutable header 的形式来实现这个指令。

我希望这有助于解开重新加载的奥秘。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2014-10-08T17:44:31.437

`Cache-Control`如果您在同一标签中重新加载，Chrome 似乎会忽略您的设置。如果您将 URL 复制到新选项卡并在那里加载，Chrome 将尊重缓存控制标签并重用缓存中的内容。

例如，我有这个 Ruby Sinatra 应用程序：

```
#!/usr/bin/env ruby

require 'sinatra'

before do
  content_type :txt
end

get '/' do
  headers "Cache-Control" => "public, must-revalidate, max-age=3600",
          "Expires" => Time.at(Time.now.to_i + (60 * 60)).to_s
  "This page rendered at #{Time.now}."
end 
```

当我在同一个 Chrome 选项卡中不断重新加载它时，它会显示新时间。

```
This page rendered at 2014-10-08 13:36:46 -0400.
This page rendered at 2014-10-08 13:36:48 -0400. 
```

标题看起来像这样：

```
< HTTP/1.1 200 OK
< Content-Type: text/plain;charset=utf-8
< Cache-Control: public, must-revalidate, max-age=3600
< Expires: 2014-10-08 13:36:46 -0400
< Content-Length: 48
< X-Content-Type-Options: nosniff
< Connection: keep-alive
* Server thin is not blacklisted
< Server: thin 
```

但是，从多个新选项卡访问相同的 URL`http://localhost:4567/`会从缓存中回收先前的结果。

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2015-12-15T16:41:09.427

在做了一些测试之后`Cache-Control:max-age=xxx`：

*   按下重新加载按钮：标题**被忽略**
*   输入相同的网址任何选项卡（当前或不是）：**尊敬**
*   使用 JS ( `window.location.reload()`)：**忽略**
*   使用开发者工具（禁用缓存未选中）或隐身不影响

因此，开发时最好的选择是**将光标放在多功能框中，然后按回车**而不是刷新按钮。

**注意**：右键单击刷新图标将显示刷新选项（正常、硬、空缓存）。令人难以置信的是，这些都不会影响这些标题。

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2014-07-15T16:10:54.837

如果 Chrome 开发者工具打开 (F12)，Chrome 通常会禁用缓存。

它可以在开发工具设置中控制 - 开发工具顶部栏右侧的齿轮图标。

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2019-03-11T12:18:24.710

虽然这个问题很老，但我想补充一点，如果您正在通过 https 使用自签名证书进行开发并且证书存在问题，那么无论您使用什么缓存标头，谷歌都不会缓存响应。

此错误报告中对此进行了说明： [https ://bugs.chromium.org/p/chromium/issues/detail?id=110649](https://bugs.chromium.org/p/chromium/issues/detail?id=110649)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-07-09T08:54:58.010

这是一个很老的问题，但我最近（2020 年）注意到，在使用隐身窗口浏览时，Chrome 有时会忽略我的图像资源的 Cache-Control 标头。

“有时”是因为在我的情况下，缓存控制指令适用于小图像（~60-200KB），但不适用于较大的图像（10MB）。

不使用隐身窗口会导致 Chrome 使用磁盘缓存版本，即使对于大图像也是如此。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-01-31T12:10:00.910

这是对[kievic 答案的补充](https://stackoverflow.com/a/14842553/860099)

要强制浏览器不在`Cache-Control`请求中发送标头，请打开 chrome 控制台并输入：

```
location = "https://your.page.com" 
```

要强制浏览器添加此标题，请单击“重新加载”按钮。

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2016-04-06T09:42:52.580

另一个提示：

不要忘记验证“日期”标头 - 如果服务器的日期/时间不正确（或位于另一个时区） - Chrome 将继续一次又一次地请求资源。

# objective-c - 在 Objective C 方法中创建 UIButton

> ID：11245768
> 
> 赞同：0
> 
> 时间：2012-06-28T13:29:51.637
> 
> 标签：objective-c, ios, uibutton

我正在尝试创建一个`UIButton`in 代码，并且此代码在某些方法中，这些方法将从某个类中调用。

这是创建按钮的方法

```
-(void)createButton
{
    NSLog(@"createButton");
    UIButton *button = [UIButton buttonWithType:UIButtonTypeRoundedRect];
    [button setTitle:@"Get Friends" forState:UIControlStateNormal];
    [button setFrame:CGRectMake(100, 100, 100, 50)];
    [button addTarget:self action:@selector(loadTableView) forControlEvents:UIControlEventTouchUpInside];
    [self.view addSubview:button];    
} 
```

但它从未出现在视图中，有什么问题？

编辑：如果我从那时起调用此方法，`viewDidLoad`它就可以工作！

编辑 2：该方法在 ViewController 类中，我从 MyFacebooDelegate 类调用它这是来自 MyFacebooDelegate 类的调用代码：

```
 ViewController *m2 = [[ViewController alloc] init];
[m2 createButton]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T13:45:55.300

可能是您的视图目前尚未从 Nib 加载。如果您通过实例化创建视图

```
[[UIViewController alloc] initWithNibName:@"someNibName" bundle:nil]; 
```

将创建视图控制器并开始从 Nib 异步加载视图。所以，如果`UIViewController`是实例化，那并不意味着`UIView`是。所以，这就是为什么您的按钮在从`-viewDidLoad:`回调创建时起作用的原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T13:47:30.993

当您`ViewController`使用`ViewController *m2 = [[ViewController alloc] init];`它创建一个新的时，它与`ViewController`处理屏幕的方式不同。

而不是分配 a `ViewController`，您应该使用应用程序启动时创建的那个。

# android - 更改搜索栏进度颜色？

> ID：11245771
> 
> 赞同：1
> 
> 时间：2012-06-28T13:30:01.993
> 
> 标签：android, android-widget

我怎样才能用渐变改变颜色？？？我现在有这个，但与默认方式不同。默认情况下，进度左侧是一种颜色，右侧是另一种颜色（黄色和灰色），我想要改变两种颜色

`<gradient android:startColor="#FFFFAA00" android:endColor="#FFFF0000" android:angle="0"/>`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T13:37:02.477

这是显示如何自定义 Seekbar 的链接。我希望这可以帮助你

[http://www.tutomobile.fr/realiser-une-progressbar-seekbar-personnalisee-sur-android-tutoriel-android-n%C2%B024/10/02/2011/](http://www.tutomobile.fr/realiser-une-progressbar-seekbar-personnalisee-sur-android-tutoriel-android-n%C2%B024/10/02/2011/)

[http://permadi.com/blog/2011/11/android-sdk-custom-slider-bar-seekbar/](http://permadi.com/blog/2011/11/android-sdk-custom-slider-bar-seekbar/)

[http://www.techrepublic.com/blog/app-builder/androids-seekbar-your-way/943](http://www.techrepublic.com/blog/app-builder/androids-seekbar-your-way/943)

# javascript - 使用 ASP.Net Web 服务从 JSON 中提取数据

> ID：11245774
> 
> 赞同：0
> 
> 时间：2012-06-28T13:30:09.767
> 
> 标签：javascript, jquery, asp.net, json

我试图提取 formatted_address 属性失败。

以下 Web 服务将以下 JSON 记录到控制台。我无法使用`returnedData.d.results[0].formatted_address`.

```
 $.ajax({
        type: "POST",
        url: "ReportIncident.aspx/ReverseGeocode",
        data: "{latitude:" + latitude + ",longitude:" + longitude + "}",
        contentType: "application/json; charset=utf-8",
        dataType: "json",
        success: function (returnedData)
        {
          console.log(returnedData);
        }
    }); 
```

[json 的格式与Google](http://maps.googleapis.com/maps/api/geocode/json?latlng=40.714224,-73.961452&sensor=true)的格式完全相同。

**编辑** 达林指出我自相矛盾：网络服务将上面链接中的所有内容都包含在广告对象中，我没有提到这一点。

![在此处输入图像描述](../Images/4e91a3406e79bed1be70f1ed4fbc2bca.png)

**进一步编辑** 这里是网络服务：

```
[WebMethod]
        public static string ReverseGeocode(decimal latitude, decimal longitude)
        {
            // Create the web request  

            string url = "http://maps.googleapis.com/maps/api/geocode/json?latlng=" + latitude + "," + longitude +"&sensor=true";
            HttpWebRequest request = WebRequest.Create(url) as HttpWebRequest;

            // Get response  
            using (HttpWebResponse response = request.GetResponse() as HttpWebResponse)
            {
                // Get the response stream  
                StreamReader reader = new StreamReader(response.GetResponseStream());

                return reader.ReadToEnd();
            }
        } 
```

这是javascript：

```
/Gets the current location of the user
function getLocation()
{
    if (navigator.geolocation)
    {
        navigator.geolocation.getCurrentPosition(showPosition);
    }

}

function showPosition(position)
{
    var latitude = position.coords.latitude;
    var longitude = position.coords.longitude;

    $.ajax({
        type: "POST",
        url: "ReportIncident.aspx/ReverseGeocode",
        data: "{latitude:" + latitude + ",longitude:" + longitude + "}",
        contentType: "application/json; charset=utf-8",
        dataType: "json",
        success: function (returnedData)
        {
            alert(returnedData.d[0].results[0].formatted_address);
            console.log(returnedData);
        }
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T13:33:26.473

您是否尝试过`returnedData.results[0].formatted_address`在没有`.d.`节点的情况下使用。那是不存在的！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T13:35:44.427

删除“.d”

```
returnedData.results[0].formatted_address 
```

但是这样做你总是只得到第一个节点

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T09:49:06.890

这个问题的答案原来是 Web 服务返回一个字符串，而不是 json。内置的 javascript 序列化程序没有被使用。需要使用 eval 关键字或更安全的东西。碰巧我最终使用了 Google Maps Javascript API，而且这更容易。

# android - 滚动 ListView 时项目的可见性发生变化

> ID：11245780
> 
> 赞同：2
> 
> 时间：2012-06-28T13:30:24.977
> 
> 标签：android

我正在使用列表视图和适配器来加载列表，每个列表项都有一个 TextView、EditText 和 Image..我根据列表行的位置设置箭头的可见性和编辑文本，当一切正常时我第一次加载列表...但是当我滚动列表时，项目的可见性不断变化...请在这个问题上帮助我...相关代码已附加...

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent" android:layout_height="wrap_content"
        android:orientation="horizontal"  android:background="#FFFFFF">
    <TextView android:layout_height="wrap_content"  android:layout_width="0dip"
            android:textSize="20dip" android:layout_weight="1"
            android:id="@+id/textview_add_lot_list" android:textColor="@android:color/black"
            android:paddingTop="10dip" android:paddingBottom="10dip"
            android:paddingLeft="10dip"/>
    <EditText android:layout_height="fill_parent" android:layout_width="0dip"
            android:layout_weight="1" android:id="@+id/et_add_lot_list"
            android:layout_gravity="center_vertical"/>
    <ImageView android:layout_height="wrap_content" android:layout_width="wrap_content"
            android:id="@+id/imageview_arrow_add_lot_list" android:layout_gravity="center_vertical"
            android:visibility="invisible" android:src="@drawable/more_reviews_arrow"
            android:paddingRight="10dip"/>
</LinearLayout> 
```

Java代码活动...

```
final ArrayList<String> listItems       =   new ArrayList<String>();
        listItems.add("Parking name");
        listItems.add("Address");
        listItems.add("City");
        listItems.add("State");
        listItems.add("Zip");
        listItems.add("Phone");
        listItems.add("Web Address");
        listItems.add(" ");
        listItems.add("Parking Image");
        listItems.add(" ");
        listItems.add("Open Hours");
        listItems.add(" ");
        listItems.add("Web Reviews");

        final AddParkingLotAdapter adapter  =   new AddParkingLotAdapter(mAppContext,0,listItems);
        lv.setAdapter(adapter); 
```

Java 代码...适配器

```
public class AddParkingLotAdapter extends ArrayAdapter<String> {
    private ArrayList<String> mStrings;
    private LayoutInflater mInflater;
    private AppContext mContext;

    private static int NON_EMPTY_ROW    =   1;                                                                                                          
    private static int EMPTY_ROW       =    0;

    public AddParkingLotAdapter(Context context, int resId, List<String> strings) {
        super(context, resId,strings);
        mStrings        =   (ArrayList<String>) strings;
        mContext        =   (AppContext) context;
        mInflater       =   LayoutInflater.from(context);
    }
    @Override
    public int getViewTypeCount() {
        return 2;                               
    }
    @Override
    public int getCount() {
        return mStrings.size();     
    }
    @Override
    public String getItem(int position) {
        return mStrings.get(position);
    }
    @Override
    public int getItemViewType(int position) {
        if(position==7||position==9||position==11){
            return EMPTY_ROW;
        }else{
            return NON_EMPTY_ROW;
        }
    }
    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        TextView itemTextView   =   null;

        //different inflations for different type rows..
        if(getItemViewType(position) == EMPTY_ROW){
            if (convertView == null) {
                convertView         =   mInflater.inflate(R.layout.review_empty_row, null);
            }
        }else if(getItemViewType(position) == NON_EMPTY_ROW){
            if (convertView == null) {
                convertView     =   mInflater.inflate(R.layout.add_parkinglist_item, null);
            }
            itemTextView        =   (TextView) convertView.findViewById(R.id.textview_add_lot_list);
            itemTextView.setText(mStrings.get(position));
            if (position==3||position==8||position==10||position==12){
                ImageView itemImageView       =   (ImageView)convertView.findViewById(R.id.imageview_arrow_add_lot_list);
                itemImageView.setVisibility(View.VISIBLE);
                EditText editText             =   (EditText)convertView.findViewById(R.id.et_add_lot_list);
                editText.setVisibility(View.INVISIBLE);
            }
        }
        return convertView;
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-28T13:42:34.547

在这段代码中：

```
if (position==3||position==8||position==10||position==12){
    ImageView itemImageView       =   (ImageView)convertView.findViewById(R.id.imageview_arrow_add_lot_list);
    itemImageView.setVisibility(View.VISIBLE);
    EditText editText             =   (EditText)convertView.findViewById(R.id.et_add_lot_list);
    editText.setVisibility(View.INVISIBLE);
} 
```

你没有**其他**条款。这意味着如果位置是 0,1,2,4,5 或 6，您没有明确设置视图的可见性，因此可见性将是回收视图时设置的任何值。如果`convertView`为非空，则您始终需要重置其可见性可能被较早修改的任何项目的可见性。

# php - HTML 表单输出样式

> ID：11245782
> 
> 赞同：0
> 
> 时间：2012-06-28T13:30:31.010
> 
> 标签：php, html, forms, email, layout

所以我创建了一个简单的表单，提交后会发送到我的电子邮件地址。目前我对电子邮件的格式不满意。由于要输入大量信息，因此可能难以阅读。

这是发送到我的电子邮件的 php 部分

```
$body_message .= 'Title: '.$field_title."\n";
$body_message .= 'Full Name: '.$field_fullname."\n";
$body_message .= 'Company Name: '.$field_companyname."\n";
$body_message .= 'Company Registered Number: '.$field_companynumber."\n";
$body_message .= 'Address: '.$field_address."\n";
$body_message .= 'Postcode: '.$field_postcode."\n";
$body_message .= 'Phone Number: '.$field_phonenumber."\n";
$body_message .= 'Email Address: '.$field_email."\n";
$body_message .= 'Mobile Number: '.$field_mobile."\n";
$body_message .= 'Website URL: '.$field_website."\n \n \n";

$body_message .= 'NEED: '.$field_NEED."\n \n";
$body_message .= 'APPROACH: '.$field_APPROACH."\n \n";
$body_message .= 'BENEFITS: '.$field_BENEFITS."\n \n";
$body_message .= 'COMPETITION: '.$field_COMPETITION."\n \n"; 
```

目前，我收到的电子邮件如下所示：

头衔： 先生
全名： A Name
公司名称： A Company
等....

我希望它看起来像这样
职务：
先生

全名：
我的姓名

公司名称：
公司

等...

甚至可能使用粗体或不同颜色的“标题：”“全名：”“公司名称：”。

在此先感谢，汤姆

==================================================== =======================

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T13:34:22.897

为此，您必须生成一个 HTML 电子邮件。PHP 手册有一个很好的示例，您可以复制和粘贴：

[http://php.net/manual/en/function.mail.php#example-3152](http://php.net/manual/en/function.mail.php#example-3152)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T13:34:58.907

而不是 \ni 会使用

```
 <br /> 
```

根据我的个人喜好.. 另外，对于您想要更改颜色的内容，将其包裹在一个跨度中，然后给跨度一些样式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T13:37:33.007

这些都应该有效

```
$body_message .= 'Title: <br />' . $field_title . "\n";

$body_message .= 'Title: ' . "\n" . $field_title . "\n";

$body_message .= 'Title: <br />' . $field_title . '<br />'; 
```

您可以在它们周围放置一个跨度标签，以便您可以相应地设置样式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-28T13:33:06.333

检查此项，并根据您的要求进行设置---

```
 <?php
// multiple recipients
$to  = 'aidan@example.com' . ', '; // note the comma
$to .= 'wez@example.com';

// subject
$subject = $field_title;

// message
$message = '
<html>
<head>
  <title>'.$field_title.'</title>
</head>
<body>
  <p>'.$field_title.'!</p>
  <table>
    <tr>
      <th>Full Name</th><th>Company Name</th><th>Company Registered Number</th><th>Phone Number</th>
    </tr>
    <tr>
      <td>'.$field_fullname.'</td><td>'.$field_companyname.'</td><td>'.$field_companynumber.'</td><td>'.$field_phonenumber.'</td>
    </tr>
  </table>
</body>
</html>
';

// To send HTML mail, the Content-type header must be set
$headers  = 'MIME-Version: 1.0' . "\r\n";
$headers .= 'Content-type: text/html; charset=iso-8859-1' . "\r\n";

// Mail it
mail($to, $subject, $message, $headers);
?> 
```

# bing-maps - 必应地图显示中的奇怪问题

> ID：11245789
> 
> 赞同：0
> 
> 时间：2012-06-28T13:30:59.253
> 
> 标签：bing-maps

我在 Metro 应用程序中显示 bing 地图。我在地图上绘制了图钉和折线，但它们被绘制在地图的相对两侧，看起来很奇怪。请看下图：![在此处输入图像描述](../Images/8eb8cef81cf952cd6c6310939678dc6b.png)

线和图像被绘制在地图的相对两侧。

有人可以建议这个问题的解决方案。

我可以以某种方式限制我的视图只显示每个国家/地区一次吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T00:48:38.153

因此，我认为我的其他答案之一可能会对您有所帮助。

[如何在 Bing Maps API 中显示完整地图并防止滚动](https://stackoverflow.com/questions/11051927/how-to-show-the-full-map-and-prevent-scrolling-in-bing-maps-api/11057809#11057809)

您可以将地图限制在某个缩放级别范围和纬度/经度范围内，这样您就不会两次看到相同的坐标。如果您需要有关如何执行此操作的更多详细信息，请告诉我。

# javascript - 是否有任何工具可以检查 js 文件是否可以安全压缩？

> ID：11245790
> 
> 赞同：1
> 
> 时间：2012-06-28T13:30:59.457
> 
> 标签：javascript, debugging, compression, minify

有时，一个巨大的 js 文件中缺少一个字符会破坏整个缩小魔法。是否有任何工具可以在压缩本身之前检查 js 文件是否可以无错误地压缩，当然还可以指出潜在问题出在哪里。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T13:36:35.783

与其简单地验证您的代码，不如使用一种工具来帮助您保持代码整洁有序。

[JSLint](http://jslint.com/)和[JSHint](http://www.jshint.com/)都可以用来帮助保持代码整洁。如果它是干净的，它将在缩小器中工作。

# forms - 如何使用atk4文件存储文件上传

> ID：11245791
> 
> 赞同：0
> 
> 时间：2012-06-28T13:31:00.807
> 
> 标签：forms, file-upload, atk4

我在使用 atk4 文件存储文件上传时遇到问题。

我将 atk4-addons 中的 fileadmin.php 复制到我的页面目录中，并使用创建了四个表的 filestore_001.sql 脚本创建了表。

我已将以下数据添加到 filestore_type 表

![在此处输入图像描述](../Images/94ba72db5031b3eb33d265c47eb5accc.png)

以及以下到 filestore_volume 表

![在此处输入图像描述](../Images/cb59c96687b09b83a64486022096bf05.png)

我在 webroot 中创建了一个名为 upload 的目录，并尝试使用不同的权限（包括 777）作为测试，看看它是否是权限问题。

选择要上传的本地文件后，它会显示上传消息，其中文本字段带有文件名，但完成后会显示错误，表明模型数据未加载。

![在此处输入图像描述](../Images/fd96b50f4264b19367f676966e524875.png)

我怀疑这是因为文件没有成功上传，但除了firebug中的http响应之外，我找不到任何表明出了什么问题的错误，我得到以下信息

```
 <html><head><script>window.top.$('#paperless_fileadmin_form_Upload_test').atk4_uploader('uploadFailed',"Data was not loaded for paperless_fileadmin_form_Upload_test_controller_filestore_file_model_filestore_file_model_filestore_volume_2");
   </script></head></html> 
```

http 帖子显示选择的文件，如果文件类型不是在 filestore_filetype 中定义的文件类型，则代码确实会显示警报，以便控制器的一部分正在工作。

关于文件上传工作缺少什么的任何建议？

打开日志记录的输出如下

```
 ------------------------------------------------------------
  Date: 29-Jun-2012 13:23:47
  Query String: page=fileadmin&submit=paperless_fileadmin_form&paperless_fileadmin_form_Upload_test_upload_action=paperless_fileadmin_form_Upload_test
  Referer: http://192.168.56.103/keep/paperless/?page=fileadmin
  Version: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:13.0) Gecko/20100101 Firefox/13.0.1
  Port: 80
  ------------------------------------------------------------
  Stack trace
  /var/www/keep/paperless/atk4/lib/Form/Field/upload.php:98  Logger->logException(Object(Exception_InstanceNotLoaded))
  : Form_Field_Upload->loadPOST()
  /var/www/keep/paperless/atk4/lib/AbstractObject.php:303 call_user_func_array(Array(2), Array(0))
  /var/www/keep/paperless/atk4/lib/AbstractObject.php:294 AbstractObject->downCall("loadPOST", Array(0))
  /var/www/keep/paperless/atk4/lib/Form/Basic.php:333 AbstractObject->downCall("loadPOST")
  : Form_Basic->submitted()
  /var/www/keep/paperless/atk4/lib/AbstractObject.php:303 call_user_func_array(Array(2), Array(0))
  /var/www/keep/paperless/atk4/lib/AbstractObject.php:294 AbstractObject->downCall("submitted", Array(0))
  /var/www/keep/paperless/atk4/lib/AbstractObject.php:294 AbstractObject->downCall("submitted", Array(0))
  /var/www/keep/paperless/atk4/lib/ApiWeb.php:196 AbstractObject->downCall("submitted")
  /var/www/keep/paperless/index.php:15 ApiWeb->main() 
```

info.log 的输出是

```
 [29-Jun-2012 13:23:47] No data with id: 1 for: Model_Filestore_Volume but got no data. Query: select  filestore_volume.id, filestore_volume.name, filestore_volume.dirname, filestore_volume.total_space, filestore_volume.stored_files_cnt, filestore_volume.enabled, filestore_volume.id from filestore_volume filestore_volume  where (filestore_volume.id = '1') 
```

这解决了问题。我添加了该卷，但随后将其删除并添加了另一个。这意味着我在表中没有 ID=1 的文件存储卷，根据上面的屏幕截图，ID 为 3，所以我猜这是 filestore_volume 的自动增量或文件存储插件如何查找卷的问题。

# macos - Mac 上的 perl 大 IO 错误，但 Windows 或 Linux 上没有（添加换行符不能被 chomped）

> ID：11245797
> 
> 赞同：1
> 
> 时间：2012-06-28T13:31:08.260
> 
> 标签：macos, perl, newline, large-files, chomp

我已经在十几台 Windows 机器、六台 Mac 和一台 Linux 机器上测试了我的程序，它在 Windows 和 Linux 上都没有错误，但在 Mac 上却没有。我的程序设计用于处理蛋白质数据库文件，这些文件是 250MB 到 10GB 的文本文件。我取了 250MB 文件的 1/10 制作了一个示例文件用于调试目的，但发现较小的文件没有发生错误。

我已将错误范围缩小到这部分代码，在这部分`$tempFile`中，是蛋白质数据库文件：

```
open(ps_file, "..".$slash."dataset".$slash.$tempFile) 
         or die "couldn't open $tempFile";
while(<ps_file>){
    chomp;

    my @curLine = split(/\t/, $_);
    my $filter = 1;
    if($taxon){
        chomp($curLine[2]);

        print "line2 ".$curLine[2].",\t".$taxR{$curLine[2]}."\n";

        $filter = $taxR{$curLine[2]};
    }
    if($filter){
        checkSeq(@curLine);
    }
} 
```

这是显示特殊字符的打印语句输出的屏幕截图：

![该打印语句的输出显示特殊字符](../Images/82b285ae47e8fd277d388a5f3b4e3aa5.png)

这是 Windows 机器上的输出：

![输出看起来像在 Windows 机器上](../Images/4d3c2e70d987036c7d433330626e85ab.png)

这是 $tempFile 中 1 行的示例

`>sp|P48255|ABCX_CYAPA Probable ATP-dependent transporter ycf16 OS=Cyanophora paradoxa GN=ycf16 PE=3 SV=1 MSTEKTKILEVKNLKAQVDGTEILKGVNLTINSGEIHAIMGPNGSGKSTFSKILAGHPAYQVTGGEILFKNKNLLELEPEERARAGVFLAFQYPIEIAGVSNIDFLRLAYNNRRKEEGLTELDPLTFYSIVKEKLNVVKMDPHFLNRNVNEGFSGGEKKRNEILQMALLNPSLAILDETDSGLDIDALRIVAEGVNQLSNKENSIILITHYQRLLDYIVPDYIHVMQNGRILKTGGAELAKELEIKGYDWLNELEMVKK CYAPA`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T13:46:48.040

问题可能在于不一致的行尾。如果，正如我所怀疑的那样，尾随空格并不重要，那么最好删除它而不是`chomp`ing。

另请注意：

*   裸词文件句柄，例如`ps_file`在远处受制于动作的包全局变量，使用词法文件句柄。

*   使用`File::Spec`或`Path::Class`以独立于平台的方式处理文件路径。

*   如果打开文件时出错，请包括完整的文件路径和错误消息。

*   在

    ```
    chomp;

    my @curLine = split(/\t/, $_);
    my $filter = 1;
    if($taxon){
        chomp($curLine[2]); 
    ```

`$curLine[2]`来自作为一行读入并`chomp`编辑的字符串。我不明白你为什么又要咬那个。

这是您的代码片段的整理版本：

```
use File::Spec::Functions qw( catfile );

my $input_file = catfile('..', dataset => $tempFile);

open my $ps_file, '<', $input_file
    or die "couldn't open '$input_file': $!";

while (my $line = <$ps_file>) {
    $line =~ s/\s+\z//; # remove all trailing space

    my @curLine = split /\t/, $line;

    my $filter = 1;
    if ($taxon) {
        my $field = $curLine[2];
        $filter = $taxR{ $field };

        print join("\t", "line2 $field", $filter), "\n";
    }
    if ($filter) {
        checkSeq(@curLine);
    }
} 
```

# matlab - 从霍夫曼代码创建图像 - Matlab

> ID：11245805
> 
> 赞同：0
> 
> 时间：2012-06-28T13:31:40.853
> 
> 标签：matlab, huffman-code

我在 Matlab 中有一个关于图像压缩的项目。到目前为止，我已经成功地实现了对图像的霍夫曼编码，这给了我一个二进制代码的向量。之后我运行霍夫曼解码，我得到一个包含压缩图像元素的向量。我的问题是我可以找到如何从这个向量中重建图像并创建图像文件。

任何帮助将不胜感激

**更新**

基于 Ben A. 的帮助，我取得了进展，但我仍然有一些问题。更准确地说。我有一个图像矩阵。在此图像矩阵上找到唯一符号（元素）后，我计算概率，然后使用此函数：

```
function [h,L,H]=Huffman_code(p,opt)
% Huffman code generator gives a Huffman code matrix h, 
%  average codeword length L & entropy H
% for a source with probability vector p given as argin(1) 
zero_one=['0'; '1']; 
if nargin>1&&opt>0, zero_one=['1'; '0']; end
if abs(sum(p)-1)>1e-6
  fprintf('\n The probabilities in p does not add up to 1!');
end  
M=length(p);  N=M-1; p=p(:); % Make p a column vector
h={zero_one(1),zero_one(2)};
if M>2
  pp(:,1)=p;
  for n=1:N
     % To sort in descending order
     [pp(1:M-n+1,n),o(1:M-n+1,n)]=sort(pp(1:M-n+1,n),1,'descend'); 
     if n==1, ord0=o; end  % Original descending order
     if M-n>1, pp(1:M-n,n+1)=[pp(1:M-1-n,n); sum(pp(M-n:M-n+1,n))]; end
  end
  for n=N:-1:2
     tmp=N-n+2; oi=o(1:tmp,n);
     for i=1:tmp, h1{oi(i)}=h{i}; end
     h=h1;   h{tmp+1}=h{tmp};
     h{tmp}=[h{tmp} zero_one(1)]; 
     h{tmp+1}=[h{tmp+1} zero_one(2)];
  end
  for i=1:length(ord0), h1{ord0(i)}=h{i}; end
  h=h1;
end
L=0; 
for n=1:M, L=L+p(n)*length(h{n}); end  % Average codeword length
H=-sum(p.*log2(p)); % Entropy by Eq.(9.1.4) 
```

我计算图像的霍夫曼代码。

现在我使用这个功能：

```
function coded_seq=source_coding(src,symbols,codewords)
% Encode a data sequence src based on the given (symbols,codewords).
no_of_symbols=length(symbols);  coded_seq=[];
if length(codewords)<no_of_symbols
  error('The number of codewords must equal that of symbols');
end
for n=1:length(src)
   found=0;
   for i=1:no_of_symbols
      if src(n)==symbols(i), tmp=codewords{i}; found=1; break; end
   end
   if found==0, tmp='?'; end
   coded_seq=[coded_seq tmp];
end 
```

在 src 我把我的图像（矩阵）放在哪里，我得到了我的图像的编码序列。

最后是这个功能：

```
function decoded_seq=source_decoding(coded_seq,h,symbols)
% Decode a coded_seq  based on the given (codewords,symbols).
M=length(h);  decoded_seq=[];
while ~isempty(coded_seq)
  lcs= length(coded_seq); found=0;
  for m=1:M
    codeword= h{m};
    lc= length(codeword);
    if lcs>=lc&codeword==coded_seq(1:lc)
      symbol=symbols(m); found=1;  break;
    end
    if found==0, symbol='?'; end
  end 
  decoded_seq=[decoded_seq symbol]; 
  coded_seq=coded_seq(lc+1:end); 
end 
```

用于解码编码序列。问题是，最后作为编码序列，我得到一个 1x400 矩阵，我应该得到一个 225x400 的矩阵，这是我的图像尺寸。我错过了什么吗？也许我应该替换一些东西，因为我有一个矩阵而不是一个数字序列（为其编写代码）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T13:41:49.087

你可能想看看这个：

[http://www.mathworks.com/matlabcentral/answers/2158-huffman-coding-and-decoding-for-image-jpeg-bmp](http://www.mathworks.com/matlabcentral/answers/2158-huffman-coding-and-decoding-for-image-jpeg-bmp)

这似乎就在你的小巷里。它最终会引导你到这里：

[http://www.mathworks.com/matlabcentral/fileexchange/26384-ppt-for-chapter-9-of-matlabsimulink-for-digital-communication](http://www.mathworks.com/matlabcentral/fileexchange/26384-ppt-for-chapter-9-of-matlabsimulink-for-digital-communication)

# plone - 没有其包含类型的索引特定类型

> ID：11245806
> 
> 赞同：1
> 
> 时间：2012-06-28T13:31:44.370
> 
> 标签：plone, archetypes

我根据[Plone.org 的说明](http://plone.org/documentation/manual/developer-manual/indexing-and-searching/custom-indexing-strategies)为我的内容类型添加了一个 FieldIndex 。

在 ZMI 中，我可以在`/mysite/portal_catalog/Indexes/Building`. 我的内容类型（提供`IMyType`，有一个字段`building`）是文件夹，并且包含一张照片（提供`IPhoto`，没有`building`字段）作为`profiles/default/types/MyType.xml`文件中的 allowed_content_types。

我只想为 MyType 的构建字段建立索引。但是，似乎 Photo 类型的项目使用其父项的值进行索引。这很烦人。代码是否`@indexer(IMyType)`意味着索引 IMyType 及其包含的类型？如何仅为 IMyType 编制索引？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T14:36:40.990

索引器所做的是直接从被索引的对象中获取属性。在作为特殊包装器的 Plone 中，`@indexer`如果它们存在，它将使用已注册的索引器（如使用装饰器创建的）。

但是，如果您的索引恰好是索引`building`并且这也是您的`IMyType`对象直接的属性，那么任何包含的对象也将通过获取具有该属性。注册索引器`IMyType`并不能阻止这一点。

有几种方法可以解决这个问题：

1.  为您的索引器使用一个不同的名称，一个与属性名称不匹配的名称。请注意，如果您所做的只是索引一个属性，那么索引器是多余的，索引也可以直接检索该属性。

2.  注册一个“catch all”索引器：

    ```
    from zope.interface import Interface
    @indexer(Interface)
    def catchall_ignore(ob, **kw):
        # Raising AttributeError means: do not index anything
        raise AttributeError 
    ```

    代替直接属性访问，现在这个索引器方法将用于照片，导致索引器不为`building`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T14:14:10.263

这就是收购的运作方式。

这里如何解决这个问题：

[http://plone.293351.n2.nabble.com/how-to-prevent-portal-catalog-from-indexing-acquisition-values-td2650735.html](http://plone.293351.n2.nabble.com/how-to-prevent-portal-catalog-from-indexing-acquisition-values-td2650735.html)

“使用执行 aq_explicit 检查的自定义索引器。”

# ruby-on-rails - 如何循环遍历表单上的两个交替资源？

> ID：11245807
> 
> 赞同：0
> 
> 时间：2012-06-28T13:31:45.910
> 
> 标签：ruby-on-rails, formtastic

我正在尝试制作一种动态形式的问题和答案，如下所示：

问题***_* __ *_* __ *_***

回答 ***_* __ *_* __ *_***

问题***_* __ *_* __ *_***

回答 ***_* __ *_* __ *_***

我不知道如何以交替对的形式循环这两个资源。我试过这个：

```
<%= semantic_fields_for [@question, @answer] do |h, i| %>
  <%= f.inputs :for => @question do |h|%>
    <%= h.input :question %>
  <% end %>
  <%= f.inputs :for => @answer do |i|%>
    <%= i.input :answer %>
  <% end %>
<% end %> 
```

但它给了我错误“数组：类的未定义方法`model_name'。”

我的控制器：

```
def new

  @post = Post.new
  @question = @post.questions.new
  @answer = @question.build_answer

  respond_to do |format|
    format.html
  end
end 
```

还有我的模型：

```
class Post < ActiveRecord::Base
  has_many :questions
  has_many :answers
end
class Question < ActiveRecord::Base
  belongs_to :post
  has_one :answer
end
class Answer < ActiveRecord::Base
  belongs_to :question
  belongs_to :post
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T15:53:41.150

我认为您需要的正是这些铁路广播中描述的内容：

*   [嵌套模型表单第 1 部分](http://railscasts.com/episodes/196-nested-model-form-part-1)
*   [嵌套模型表单第 2 部分](http://railscasts.com/episodes/197-nested-model-form-part-2)

我认为你也应该重构一下，帖子应该没有问题。您可能会注意到与 railcasts 的一点不同，但那是因为每个问题只有一个答案，而在 railcasts 中，一个问题有很多答案。在第 2 部分中，它展示了如何添加 AJAX 调用以添加/删除问题和答案（如果您只有一个答案，可能不需要这个）。

必读，以便您更好地了解关联以及嵌套属性的工作原理：

*   [Active Record 关联指南](http://guides.rubyonrails.org/association_basics.html)
*   [Active Record 嵌套属性](http://api.rubyonrails.org/classes/ActiveRecord/NestedAttributes/ClassMethods.html)

这是一个可能会起作用的示例，只需进行一些最低限度的调整。我没有使用语义字段，只是使用标准表单构建器。

```
class Post < ActiveRecord::Base
  has_many :questions
  accepts_nested_attributes_for :questions, :reject_if => lambda { |a| a[:content].blank? }, :allow_destroy => true
end
class Question < ActiveRecord::Base
  belongs_to :post
  has_one :answer, :dependent => :destroy
  accepts_nested_attributes_for :answers, :reject_if => lambda { |a| a[:content].blank? }, :allow_destroy => true
end
class Answer < ActiveRecord::Base
  belongs_to :question
end

# posts_controller.rb
def new
  @post = Post.new
  # lets add 2 questions
  2.times do
    question = @post.questions.build
    question.build_answer

  respond_to do |format|
    format.html
  end
end

# views/posts/_form.html.erb
<%= form_for @post do |f| %>
  <%= f.error_messages %>
  <p>
    <%= f.label :name %><br />
    <%= f.text_field :name %>
  </p>
  <%= f.fields_for :questions do |builder| %>
    <%= render "question_fields", :f => builder %>
  <% end %>
  <p><%= f.submit "Submit" %></p>
<% end %>

# views/posts/_question_fields.html.erb
<p>
  <%= f.label :content, "Question" %><br />
  <%= f.text_area :content, :rows => 3 %><br />
  <%= f.check_box :_destroy %>
  <%= f.label :_destroy, "Remove Question" %>
</p>
<%= f.fields_for :answers do |builder| %>
  <%= render 'answer_fields', :f => builder %>
<% end %>

# views/posts/_answer_fields.html.erb
<p>
  <%= f.label :content, "Answer" %>
  <%= f.text_field :content %>
  <%= f.check_box :_destroy %>
  <%= f.label :_destroy, "Remove" %>
</p> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T16:00:33.307

所以我个人不使用formtastic，但我知道它遵循与simple_form类似的路线。您的错误来自尝试将 Array 传递给 semantic_fields_for ，它只接受一个对象：

```
<%= semantic_form_for @questions do |q| %>
  <%= q.input :question %>
  <%= q.semantic_fields_for @answer do |a| %>
    <%= a.inputs :answer %>
  <% end %>
  <%= q.actions %>
<% end %> 
```

不要忘记您的模型需要使用 Accepts_nested_attributes_for 正确设置

```
class Question < ActiveRecord::Base
  belongs_to :post
  has_one :answer
  accepts_nested_attributes_for :answers
end 
```

您需要查看[https://github.com/justinfrench/formtastic上的 formtastic 文档](https://github.com/justinfrench/formtastic)

这应该可以让您的表单在视图中正确显示，但您需要在问题控制器中添加更多内容以确保它保存答案（如果我弄错了，请有人纠正我）。

同样，您的问题和答案表是否真的有一个问题和答案列？如果这些列实际上类似于 :body ，则您需要替换上述代码中的相关符号。

# c# - 动态添加的 ASP.NET 按钮单击处理程序被忽略

> ID：11245808
> 
> 赞同：1
> 
> 时间：2012-06-28T13:31:48.407
> 
> 标签：c#, asp.net, events

我正在向这样的按钮添加事件处理程序：

```
btn.Click += new EventHandler(btn_Click); 
```

但是该`btn_Click`函数没有被调用（从不命中其中的断点），并且按钮只是重新加载页面。在我过去的经验中，asp 按钮通常会在重新加载页面之前执行点击代码，那么当动态添加事件时，我该如何实现呢？

我也设置`CausesValidation = false`了，虽然页面上没有验证，所以我认为这不会有影响。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T14:20:55.827

无论页面是否被回发，都需要为每个请求绑定事件处理程序。事件处理程序的绑定在每个页面请求开始时丢失。按钮的事件处理程序通常绑定在 Page_Load 中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T14:21:42.937

您必须在`Load`事件（或之前）上设置事件处理程序。如果你在 之后执行它`Load`，它将不会被执行，因为在评估事件的处理程序时它不会存在。

查看有关页面生命周期的[这篇](http://msdn.microsoft.com/en-us/library/ms178472.aspx)msdn 文章。我想它会帮助你理解。看到事件处理在之后立即发生`Load`

# php - Openssl RSA加密-解密

> ID：11245811
> 
> 赞同：2
> 
> 时间：2012-06-28T13:32:00.390
> 
> 标签：php, android, ios, openssl, rsa

我正在使用 RSA 私钥-公钥加密来加密来自服务器的数据。主要目标是加密服务器提供给 iOS 和 android 客户端的 json 数据，因此没有其他应用程序可以使用这些数据。那么什么是更好的选择呢？使用私钥加密服务器上的数据并使用公钥在应用程序中解密，反之亦然？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T13:35:39.187

最好的办法是使用两对。

*   **传出**数据将由**服务器公开加密**
*   **传入**的数据将由**客户公开​​加密**

您可以在第一次运行应用程序时生成客户端密钥对，并将您的公共密钥发送到由**服务器公共加密的服务器**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T13:39:49.420

要记住的重要一点是，使用任何 PSK 加密都需要您在客户端中至少存储其中一个密钥。

然而，应用程序的二进制文件很容易检查并且可以提取密钥，因此可以绕过这种方法。

使用 SSL 已经对数据进行了加密，因此您可能需要考虑仅使用密码或基于令牌的身份验证机制来帮助限制访问，而不是使用 PSK 对事物进行双重加密。

# curl - 卷曲脚本管道输出

> ID：11245826
> 
> 赞同：2
> 
> 时间：2012-06-28T13:32:48.593
> 
> 标签：curl

```
for url in `cat urlList_sample.txt`; do
curl $url >> urlsOut.txt;
echo "" >> urlsOut.txt;
done 
```

使用上面的代码查看文本文档中的一堆 URL，所有这些都在自己的行中。

两个问题：

1.  在调用 curl 之前，如何让我的脚本在 url 的开头和结尾添加引号？
2.  如何在我的 urlsout.txt 文件中获取它卷曲的 URL 以及响应？目前我只收到回复。我希望它是 url 卷曲的 ^ 响应

大家好，抱歉，刚刚回到这个问题，有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T14:14:52.710

要添加引号，请添加一行

```
url="\""$url"\""; 
```

但随后 curl 将前导引号作为协议的一部分，并且 url-catch 将失败。

如果要捕获的 url 包含例如空格，则可能适合使用

```
urlencode $url 
```

urlencode 程序可以安装

```
sudo apt-get install gridsite-clients 
```

获取屋顶标志和捕获的 url 作为 url 数据的后缀：

```
curl -w ^%{url_effective} $url >> urlsOut.txt; 
```

# android - InflateException：无法解析菜单项 onClick 处理程序

> ID：11245829
> 
> 赞同：36
> 
> 时间：2012-06-28T13:32:54.040
> 
> 标签：android, android-actionbar, actionbarsherlock

6年前我问过这个问题。与此同时，Android 开发的最佳实践发生了变化，我成为了一名更好的开发人员。

从那时起，我意识到使用`onClick`XML 属性是一种不好的做法，并从我工作的任何代码库中删除了它。

我所有的点击处理程序现在都在应用程序的代码中定义，而不是 XML 布局！

我从不使用的原因`onClick`是

1.  XML属性的值很容易出错`onClick`，从而导致运行时错误
2.  开发人员可能会重构单击处理程序方法的名称，而没有意识到它是从布局中调用的（参见原因 1）
3.  找出实际调用的方法并不总是显而易见的。特别是如果 Fragment 正在使用布局
4.  将布局与行为的关注点分开是好的。使用`onClick`将它们混合在一起，这很糟糕！

我希望我已经说服你永远不要`onClick`在布局中使用 :) ！

下面是我最初的问题，很好地说明了为什么使用`onClick`是一个坏主意。

===

我在 XML 中定义菜单项，并尝试使用在 API 11 中添加的 onClick 属性。在运行 4.0.3 的模拟器中启动 Activity 时，会发生以下异常：

```
FATAL EXCEPTION: main
android.view.InflateException: Couldn't resolve menu item onClick handler 
    onFeedbackMenu in class android.view.ContextThemeWrapper

...
Caused by: java.lang.NoSuchMethodException: onFeedbackMenu 
    [interface com.actionbarsherlock.view.MenuItem]
at java.lang.Class.getConstructorOrMethod(Class.java:460) 
```

我不明白是什么导致了异常，因为我的活动中定义了以下方法

```
import com.actionbarsherlock.view.MenuItem;
...
public void onFeedbackMenu( MenuItem menuItem ) { 
    Toast.makeText( this, "onFeedBack", Toast.LENGTH_LONG ).show();
} 
```

我的 XML 菜单定义文件包含：

```
<menu xmlns:android="http://schemas.android.com/apk/res/android" >
...
    <item
        android:id="@+id/menu_feedback"
        android:icon="@drawable/ic_action_share"
        android:showAsAction="ifRoom"
        android:title="@string/menu_feedback"
        android:onClick="onFeedbackMenu" />
</menu> 
```

为了向后兼容，我使用的是 ActionBarSherlock，当我在 2.3.x 上运行应用程序时也得到了一个非常相似的异常。

这是堆栈跟踪的更完整版本

```
FATAL EXCEPTION: main
android.view.InflateException: Couldn't resolve menu item onClick handler 
    onFeedbackMenu in class android.view.ContextThemeWrapper
    at com.actionbarsherlock.view.MenuInflater$InflatedOnMenuItemClickListener.<init>(MenuInflater.java:204)
    at com.actionbarsherlock.view.MenuInflater$MenuState.setItem(MenuInflater.java:410)
    at com.actionbarsherlock.view.MenuInflater$MenuState.addItem(MenuInflater.java:445)
    at com.actionbarsherlock.view.MenuInflater.parseMenu(MenuInflater.java:175)
    at com.actionbarsherlock.view.MenuInflater.inflate(MenuInflater.java:97)
    ...
Caused by: java.lang.NoSuchMethodException: onFeedbackMenu 
    [interface com.actionbarsherlock.view.MenuItem]
    at java.lang.Class.getConstructorOrMethod(Class.java:460)
    at java.lang.Class.getMethod(Class.java:915)
    at com.actionbarsherlock.view.MenuInflater$InflatedOnMenuItemClickListener.<init>(MenuInflater.java:202)
    ... 23 more 
```

* * *

## 回答 #1

> 赞同：76
> 
> 时间：2012-09-18T22:41:05.517

我找到了一个适合我的解决方案。通常`onClick`布局中的属性有以下方法

```
public void methodname(View view) { 
    // actions
} 
```

在菜单项（在本例中为 Sherlock 菜单）上，它应遵循以下签名：

```
public boolean methodname(MenuItem item) { 
    // actions
} 
```

所以，你的问题是你的方法返回`void`而不是`boolean`.

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-01-14T01:42:14.990

就我而言，`AndroidManifest.xml`我的应用程序（由默认的 Eclipse 助手启动）包含`android:theme="@style/AppTheme"`在`<application>`块中。

调试问题原因的时候，原来是行

```
mMethod = c.getMethod(methodName, PARAM_TYPES); 
```

in不是我的`android.view.MenuInflater/InflatedOnMenuItemClickListener`班级而是可疑的（当然不包含 onClick 处理程序）。`c``Activity``android.view.ContextThemeWrapper`

所以，我删除了`android:theme`，一切正常。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2014-07-01T18:43:59.427

虽然这有点过时，但这里是例外的原因。当你在 MenuInflater 类中查看 android API 15 (4.0.3-4.0.4) 的源代码时，你会看到这个方法：

```
public InflatedOnMenuItemClickListener(Context context, String methodName) {
mContext = context;
Class<?> c = context.getClass();
try {
    mMethod = c.getMethod(methodName, PARAM_TYPES);
} catch (Exception e) {
    InflateException ex = new InflateException(
            "Couldn't resolve menu item onClick handler " + methodName +
            " in class " + c.getName());
    ex.initCause(e);
    throw ex;
} 
```

正如 Junique 已经指出的那样，这是例外情况。但是，删除应用程序主题只是一种解决方法，并没有真正的选择。正如我们所见，该方法试图在传递的上下文项的类上找到回调方法。因此`getMenuInflater()`，`onCreateOptionsMenu`您应该调用而不是调用`new MenuInflater(this)`，以便将`this`其作为上下文传递，然后代码将起作用。

`getMenuInflater()`如果您只使用这样的 if 语句，您仍然可以用于其他 api 版本：

```
if (Build.VERSION.SDK_INT > 15)
        inflater = getMenuInflater();
    else
        inflater = new MenuInflater(this); 
```

我实际上不知道该错误是否也发生在 15 岁以下的 api 版本中，所以我通常只使用保存版本。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-20T22:07:59.370

就我而言，问题在于我的菜单 XML 和活动中**都有** 。我的实际上是错误的（因为它指向不存在的方法）但我一开始并没有注意到这一点，因为我在 Android 2.x 下进行测试，不支持和忽略。但是，一旦我在 4.x 上进行测试，我就开始收到此错误。`onClick``onCreateOptionsMenu``onClick``onClick`

`onClick`所以基本上，如果您打算在 Android 2.x 下部署，请不要使用。它会默默地忽略您的`onClick`值，直到您尝试在 3.0+ 上运行。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-01T07:10:42.357

我发现我对 ActionBar 菜单项及其 onClick 事件有同样的问题。我发现我正在开发的工作站内存不足，需要重新启动。Android VM 现在能够解析引用的方法名称。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-10-10T08:21:35.987

你的方法必须接受一个 MenuItem 作为它的唯一[参数](https://developer.android.com/guide/topics/resources/menu-resource)。

```
 public void onMenuItemClickMethod(MenuItem menuItem){
        // Do stuff here
    } 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-07-01T18:08:01.883

```
@Override
public boolean onCreateOptionsMenu(Menu menu) 
{
    getMenuInflater().inflate(R.menu.activity_main, menu);

    MenuItem item = menu.findItem(R.id.menu_open);

    if (item == null)
        return true;

    item.setOnMenuItemClickListener
    (
        new MenuItem.OnMenuItemClickListener () 
        { 
            public boolean onMenuItemClick(MenuItem item) 
            { return (showDirectory(item)); }
        } 
    ); 

    return true;
}

public boolean showDirectory (MenuItem item)
{
    CheckBox checkBox = (CheckBox) findViewById (R.id.checkBox1);
    checkBox.setChecked(true);
} 
```

# javascript - 多平台（Chrome、IE、Firefox）

> ID：11245830
> 
> 赞同：1
> 
> 时间：2012-06-28T13:32:56.350
> 
> 标签：javascript, internet-explorer, activex, html5-canvas, three.js

我不明白为什么这个脚本不能在 IE 中运行，而它在 Firefox 和 Chrome 中运行。当我尝试在 IE 中使用此脚本时，我收到此消息“ACTIVEX 停止脚本”。

请帮我。

```
<!DOCTYPE html>
<html>
<head>
  <title>Getting Started with Three.js</title>

  <script type="text/javascript" src="http://www.html5canvastutorials.com/libraries/Three.js"></script>
  <script type="text/javascript">
  window.onload = function() {
    var renderer = new THREE.WebGLRenderer();
    renderer.setSize( 800, 600 );
    document.body.appendChild( renderer.domElement );
    var scene = new THREE.Scene();
    var camera = new THREE.PerspectiveCamera(
      35,       // Field of view
      800 / 600,    // Aspect ratio
      0.1,      // Near plane
      10000       // Far plane
    );
    camera.position.set( 15, 10, 10 );
    camera.lookAt( scene.position );
    scene.add( camera );
    var cube = new THREE.Mesh(
      new THREE.CubeGeometry( 5, 5, 5 ),
      new THREE.MeshLambertMaterial( { color: 0xFF0000 } )
    );
    scene.add( cube );
    var light = new THREE.PointLight( 0xFFFF00 );
    light.position.set( 10, 0, 10 );
    scene.add( light );
    renderer.render( scene, camera );
  };
  </script>
</head>
<body></body> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T13:58:20.610

Three.js WebGLRenderer 在 IE 中不起作用（不支持 WebGL）

尝试

```
var renderer = new THREE.CanvasRenderer()
```

反而

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-28T17:27:16.840

作为上述非常简单的解决方案的替代方案，您可以使用 changedq 和 mrdoob 的出色**[Detector.js 脚本](https://github.com/mrdoob/three.js/blob/master/examples/js/Detector.js)**，该脚本包含在**[three.js 的示例中](https://github.com/mrdoob/three.js/tree/master/examples/js)**。如果您使用如下代码，您可以使用 WebGLRenderer 作为默认值，并且仅当 WebGL 不可用时才使用画布。您还可以使用 webglEnabled 之类的标志，以便稍后在代码中根据您的渲染器设置其他选项。

```
var webglEnabled = false;
var webglReq = false;

if (Detector.webgl) {
    renderer = new THREE.WebGLRenderer(
            {
                antialias: true,
                preserveDrawingBuffer: true
            });  // allow screenshot 

    webglEnabled = true; // set flag 
}
else if (webglReq) { Detector.addGetWebGLMessage(); return false; } 
else {
    renderer = new THREE.CanvasRenderer();
}
renderer.setClearColorHex(0x000000, 1);
renderer.setSize(window.innerWidth, window.innerHeight); 
```

# objective-c - 如何将图像粘贴到 MessageComposer

> ID：11245833
> 
> 赞同：0
> 
> 时间：2012-06-28T13:33:04.600
> 
> 标签：objective-c, uipasteboard

我已将图像作为数据复制到 UIPasteboard，我需要将此图像自动粘贴到 Message Compose 而无需用户交互。怎么做 ？

```
NSData *imageData = UIImagePNGRepresentation(image1);
UIPasteboard *pasteboard = [UIPasteboard generalPasteboard];
[pasteboard setData:imageData forPasteboardType:@"public.png"]; 
```

# iphone - 如何以二进制格式将uiimage发布到soap Srevice

> ID：11245839
> 
> 赞同：1
> 
> 时间：2012-06-28T13:33:13.947
> 
> 标签：iphone, soap, uiimage

我想将 uiimage 发布到肥皂服务中，并且输入图像是二进制格式

```
"<ExpenseDetailReceipt>%@</ExpenseDetailReceipt>" 
```

并发送这个 appdelegate.imgBMeal 数据

```
appdelegate.imgBMeal=UIImagePNGRepresentation(appdelegate.imgMeal); 
```

如图，但有一些问题，我得到请以正确的格式发送数据

请帮我怎么做

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T14:31:18.103

Soap 基本上是一个 xml，它是一个字符串。因此，不返回字符串的 UIImagePNGRepresentation(appdelegate.imgMeal) 方法失败。UIIagePNGRepresentation() 的输出是一个 NSData 对象，您可以使用 Base64 编码将其转换为字符串。（您可以使用您选择的任何其他编码）。有关使用 Base64 编码将 NSData 转换为 NSString 的更多信息，有一个带有许多答案的 SO 链接。[这里](https://stackoverflow.com/questions/3889478/uiimage-to-base64-string-encoding)。您可能还需要向您的服务提供商咨询有关编码解码部分的信息。

# iphone - 每个视图 1 个 ViewController？

> ID：11245842
> 
> 赞同：2
> 
> 时间：2012-06-28T13:33:24.787
> 
> 标签：iphone, objective-c, xcode, uiviewcontroller

我想知道是否必须为我拥有的每个视图创建一个新的 ViewController。假设我有 3 个视图，我需要 3 个视图控制器还是 1 个视图控制器可以管理所有 3 个视图？

编辑：视图是我使用 .xib 文件创建的对象，因此遵循 Xcode 4.3.3 给我的描述：表示它在其中绘制和接收事件的矩形区域。我的情况：我想要的是显示 3 个按钮的主视图，每个按钮都指向一个新视图。就是这样，这 3 个视图中的每一个都有相同的东西，一个 tableView 来显示从 XML 解析的数据。

再次感谢！

结束编辑

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T13:35:46.940

两者都是可能的，取决于您的需求。视图控制器可以轻松管理多个（子）视图（例如，每个 UI 控件都是 UIView 的子类，并且您可以在单个视图控制器中拥有多个）。有时将视图放在不同的视图控制器中更方便，有时则不然。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-28T13:36:47.563

取决于您的情况以及您想要呈现给用户的内容。如果这 3 个视图控制器具有非常相似的功能并且只有很小的差异，那么您可以使用相同的类并有一个实例变量来指示您处于哪种模式。例如，如果您有一个歌曲、播放列表或视频列表，那些可以是同一个类，使用枚举变量来区分 3 种模式。但是，如果您的视图有很大不同（例如歌曲列表和视频播放器），那么您通常应该为它们设置单独的类。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-28T13:57:38.333

对于 iOS，一般的最佳实践是使用单个视图控制器来管理单个“屏幕”（或“窗口”，当然 iOS 设备上只有其中一个）。这个视图控制器可能支持可变数量的视图对象（当然不是 1:1 视图/视图控制器的比例）。

从 iOS 5 开始，现在在技术上支持嵌套多个视图控制器在单个窗口中管理多个视图，但我仍然认为这是最好避免的做法。

一个窗口 = 一个视图控制器 = 多个视图。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-28T13:37:38.547

在一个视图控制器中，您可以管理任意数量的视图。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-28T13:45:01.460

最好为每个视图使用一个视图控制器。该方法的优点如下：

1.  您可以随时转换应用程序的模板。（例如，从表格视图到选项卡视图或拆分视图可以快速更改）

2.  每个视图控制器都遵循 MVC 架构。

3.  如果您有 n 个控制器，而不是尝试管理 n 个 MVC 模型，以便您可以轻松地在任何地方移动任何模型。

4.  内存管理将很容易（推送和弹出自动管理内存。）

5.  如果我们有一个视图控制器和 n 个视图，那么管理内存将非常困难。此外，我们需要保留每个视图的屏幕 ID，并且还需要维护它们的切换。

如果您使用 N 个视图控制器而不是 N 个视图，则有 N 个优势。

# perl - 如何从模块 perl 返回哈希

> ID：11245846
> 
> 赞同：0
> 
> 时间：2012-06-28T13:33:35.137
> 
> 标签：perl, select, module, dbi, subroutine

好的，所以这个问题困扰了我一段时间。我正在运行一个连接到数据库并从查询中返回值的模块。我有一个脚本调用模块并尝试从模块的子例程返回值。但是由于代码比文字更好，这就是我所拥有的：

```
sub selectCustomerName ($code){
    connectDB() or die "Failed in subroutine";
    #Selects customer name from customer table where code is $code
    my $selectName = "SELECT * FROM customers WHERE code = ?";
    my $sth = $dbh->prepare($selectName);
    $sth->execute($code);
my $hash = $sth->fetchrow_hashref;
$hash->{customer_name} = $name;
return $name;
$sth ->finish();
$dbh->disconnect();
} 
```

这是我的模块，这是我的脚本：

```
#!/usr/bin/perl
require Connect;
use warnings;
my $dbh = Connect::connectDB();
my $results = Connect::selectCustomerName('38d');
print $results; 
```

从大量的混乱和切换变量中，我得到了打印 0 和哈希引用，但从来没有打印出哈希的实际值。任何帮助都会非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T13:38:45.237

有一些错误。试试这个：

```
use strict; use warnings; # never forget this 2 pragmas
use Data::Dumper; # print what's inside data structures or object

sub selectCustomerName {
    my $code = shift; # or my ($code) = @_; 

    connectDB() or die "Failed in subroutine";
    #Selects customer name from customer table where code is $code
    my $selectName = "SELECT * FROM customers WHERE code = ?";
    my $sth = $dbh->prepare($selectName);
    $sth->execute($code);
    my $hash = $sth->fetchrow_hashref;
    print Dumper $hash;
    $name = $hash->{customer_name};
    $sth ->finish();
    $dbh->disconnect();
    return $name;
} 
```

*   如果你把`finish()`&放在`disconnect()`之后`return`，它们将永远不会被调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T13:56:39.943

查看您实际拥有的最简单的方法可能是使用[Data::Dumper](https://metacpan.org/module/Data%3a%3aDumper)。

```
#!/usr/bin/perl

use strict;
use warnings;

require Connect;
use Data::Dumper;

my $dbh = Connect::connectDB();
my $results = Connect::selectCustomerName('38d');
print Dumper $results; 
```

但是，如果您有一个哈希引用，那么您可以`%{$hash_ref}`使用它来尊重它，并像使用任何其他哈希一样使用它。

```
#!/usr/bin/perl

use strict;
use warnings;
use 5.010;

require Connect;

my $dbh = Connect::connectDB();
my $results = Connect::selectCustomerName('38d');

foreach (keys %{$results}) {
  say "Key: $_, Value: $results->{$_}";
} 
```

# java - Hibernate：对象引用了一个未保存的瞬态实例

> ID：11245851
> 
> 赞同：0
> 
> 时间：2012-06-28T13:33:51.137
> 
> 标签：java, spring, hibernate

我收到以下错误：

```
object references an unsaved transient instance - save the transient instance before flushing: com.project.outer.dataobject.AddressIdentificationType; nested exception is org.hibernate.TransientObjectException: object references an unsaved transient instance - save the transient instance before flushing: com.project.outer.dataobject.AddressIdentificationType 
```

在网上看了一会儿后，我有点理解错误了，但是所有在线错误通常发生在两个需要添加的表（例如 OneToMany）之间的关系中，`@OneToMany(cascade = Cascade.ALL)`但我没有这个，所以我不知道出了什么问题，有没有人知道？

地址识别类型.js

```
Ext.apply(AddressIdentificationType, {
    valueProvider: {
        getValues: AddressIdentificationTypeService.getAddressIdentificationTypes
    }, 
```

地址识别类型.java

```
@Entity 
@DataTransferObject(params={
    @Param(name = "match", value = "com.project.outer.dataobject.AddressIdentificationType"), 
    @Param(name = "javascript", value = "AddressIdentificationType")})
public class AddressIdentificationType extends BaseEntity implements Serializable {

@Id
@GeneratedValue(strategy = GenerationType.IDENTITY)
private Long addressIdentificationTypeId;

@Column(length = 250, nullable=false)
private String description;

@Enumerated(EnumType.STRING)
@Column(length = 20)
private Region region;

public AddressIdentificationType() {
}

@RemoteProperty
public Long getAddressIdentificationTypeId() {
    return addressIdentificationTypeId;
}

public void setAddressIdentificationTypeId(Long addressIdentificationTypeId) {
    this.addressIdentificationTypeId = addressIdentificationTypeId;
}

@RemoteProperty
public String getDescription() {
    return description;
}

public void setDescription(String description) {
    this.description = description;
}

@Override
protected Long getId() {
    return addressIdentificationTypeId;
} 
```

地址识别类型服务.java

```
@Secured(value={"ROLE_GENERAL"})
@RemoteMethod
public List<IdentificationType> getAddressIdentificationTypes(Region region) {
    if (region == null) {
        region = Region.France;
    }
    return repository.getData(NamedQuery.AddressIdentificationTypePropertySelection, region);
} 
```

如果需要查看更多代码，只需要求添加它，尽量使问题尽可能简短

**编辑 - 基础实体**

BaseEntity.java

```
@MappedSuperclass
public abstract class BaseEntity implements Cloneable {

@Transient
private String internalUUID;

@Version
@Column(columnDefinition = "int default 0")
protected Integer version;

@Column(length = 50)
protected String modifiedBy;

@Override
public int hashCode() {
    return getUUID().hashCode();
}

@Override
public boolean equals(Object o) {
    return (o == this || (o instanceof BaseEntity && getUUID().equals(((BaseEntity) o).getUUID())));
}

private String getUUID() {

    // use the internalUUID if it has been set, otherwise create-->persist-->compare sequence will not work.
    //
    if (internalUUID != null) {
        return internalUUID;
    }

    if (getId() != null) {
        return getId().toString();
    }
    if (internalUUID == null) {
        internalUUID = randomUUID().toString();
    }
    return internalUUID;
}

protected abstract Object getId();

//protected abstract void setId(Object obj);

protected BaseEntity clone() throws CloneNotSupportedException {
    BaseEntity object = CloneMap.get(this.getClass().getName() + ":" + this.getId());
    if (object != null) {
        return object;
    }
    BaseEntity obj = (BaseEntity)super.clone();
    obj.version = 0;

    try {
        Field field = getIdField(obj.getClass());

        if (field != null) {
            field.setAccessible(true);
            field.set(obj, null);
        }
    } catch (SecurityException e) {
        e.printStackTrace();
    } catch (IllegalArgumentException e) {
        e.printStackTrace();
    } catch (IllegalAccessException e) {
        e.printStackTrace();
    }
    CloneMap.put(this.getClass().getName() + ":" + this.getId(), obj);

    return obj;
}

private static Field getIdField(Class clazz) {
    try {
        String name = clazz.getName();
        name = name.substring(name.lastIndexOf(".") + 1);
        return clazz.getDeclaredField(name.substring(0, 1).toLowerCase() + name.substring(1) + "Id");
    } catch (NoSuchFieldException e) {
        if (clazz.getSuperclass() == null) {
            return null;
        }
        return getIdField(clazz.getSuperclass());
    }
}

private static Field getField(Class clazz, String propertyName) {
    try {
        return clazz.getDeclaredField(propertyName);
    } catch (NoSuchFieldException e) {
        if (clazz.getSuperclass() == null) {
            return null;
        }
        return getField(clazz.getSuperclass(), propertyName);
    }
}

protected BaseEntity clone(Agent agent) throws CloneNotSupportedException {
    BaseEntity obj = clone();
    try {
        Field field = getField(obj.getClass(), "agent");
        if (field != null) {
            field.setAccessible(true);
            field.set(obj, agent);
        }
    } catch (SecurityException e) {
        e.printStackTrace();
    } catch (IllegalArgumentException e) {
        e.printStackTrace();
    } catch (IllegalAccessException e) {
        e.printStackTrace();
    }
    return obj;
}

protected <T extends BaseEntity> List<T> clone(List<T> list, Agent agent) throws CloneNotSupportedException {
    List<T> newList = new ArrayList<T>();
    for (T e: list) {
        newList.add((T)e.clone(agent));
    }
    return newList;
}

protected <T extends BaseEntity> Set<T> clone(Set<T> list, Agent agent) throws CloneNotSupportedException {
    Set<T> newList = new HashSet<T>();
    for (T e: list) {
        newList.add((T)e.clone(agent));
    }
    return newList;
}

} 
```

# wcf - 如何使 WCF 数据接口可序列化

> ID：11245853
> 
> 赞同：0
> 
> 时间：2012-06-28T13:33:54.193
> 
> 标签：wcf, interface

我有一个 WCF 服务，并且一个方法在调用我需要访问该接口的服务时接受一个接口 IValidationDictionary，但是 VS 生成的代理类将该接口显示为一个对象。我试图向界面添加数据属性，但这是不允许的。

提前致谢。

```
public class UserService : IUserService
{
    private IValidationDictionary validatonDictionary;

    private IUserAppService userAppService;

    public UserService(IUserAppService userAppService)
    {
        this.userAppService = userAppService;
    }

    public void SetValidation(IValidationDictionary validationDictionary)
    {
        this.validatonDictionary = validationDictionary;
    }

    public UserDTO GetUser(int id)
    {
        return this.userAppService.GetUser(id);
    }
}

public interface IValidationDictionary
{
    void AddError(string key, string errorMessage);

    bool IsValid();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T14:11:43.383

接口不能被序列化，但您可以返回任何实现该接口的对象。

# android - 遇到“刷新属性表”

> ID：11245861
> 
> 赞同：2
> 
> 时间：2012-06-28T13:34:23.417
> 
> 标签：android, eclipse, android-emulator

发生内部错误。java.lang.NullPointerException

![这是什么错误](../Images/2b5457f057d0bc1e461a7cb3b7cc7793.png)

当我保存我的课程或打开清单文件时总是出现。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T13:39:54.283

转到项目>>清理>>清理项目。这应该可以解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T13:44:14.120

我有这个例外。

当我打开 manifest.xml 文件，清理项目后，我得到同样的异常..

最后我清理了项目并关闭了所有文件并重新启动了eclipse。

那里只有问题解决了。

# java - JAVA_HOME 不指向 JDK

> ID：11245865
> 
> 赞同：32
> 
> 时间：2012-06-28T13:34:38.267
> 
> 标签：java, ant, environment-variables

我正在尝试遵循有关如何使用 ant 构建和运行您的应用程序的教程。我已经按照所有步骤创建了构建文件，但是当我尝试运行 ant 时，它给了我这个错误。

> 构建失败 /home/bilal/tmp/ant/build.xml:19：找不到 javac 编译器；com.sun.tools.javac.Main 不在类路径中。也许 JAVA_HOME 不指向 JDK。当前设置为“/usr/lib/jvm/java-6-openjdk/jre”

任何想法如何解决这个问题？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-06-28T13:36:20.997

使*JAVA_HOME*变量指向**jdk**安装，而不是**jre**。

您引用的是运行时环境，而不是开发工具包——它找不到编译器，因为它不存在。

从您发布的行中，说明您有 open-jdk，您可以在最后删除 jre：

```
export JAVA_HOME='/usr/lib/jvm/java-6-openjdk/' 
```

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2013-08-22T19:25:28.963

你安装了*java* ...

```
apt-get install default-jre 
```

但不是*JDK* ...

```
apt-get install default-jdk 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2013-05-14T03:44:20.260

这是设计使然。您不能将 ant 的`java.home`（这是一个属性）与在操作系统环境中设置的`java.lang.System`方式互换使用。`JAVA_HOME`您可能正在尝试使用来自不同属性层的根本不同值来断言 Java 编译器的位置——即 java.home（来自 Ant 的 Java 内部）指向 Java 运行时环境，`<any_installed_java_pointed_to_by_ant>/jre`而 JDK_HOME（来自操作系统环境）是通常设置为`<DOWNLOADED_AND_INSTALLED_JAVA_DEVELOPMENT_KIT>`.

有关更多详细信息，请参阅我的问题和答案：[Ant 在哪里设置它的“java.home”（这是错误的），它应该附加“/jre”吗？](https://stackoverflow.com/questions/16533256)

解决方案是在 Ant 中使用`${env.JAVA_HOME}`. `executable`通过将属性设置为 javac 路径并将`fork`属性设置为 yes ，指定在 Javac 任务中显式使用哪个 java （请参阅[Ant 的 Javac 任务文档](https://ant.apache.org/manual/Tasks/javac.html)）。这样一来，无论 Ant 内部运行什么 Java 环境，编译器总是被明确指定！

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2015-01-07T11:11:59.733

我知道这个问题很老，但接受的答案不再起作用，因为这是谷歌搜索的第一个链接，我会告诉我如何解决这个问题。

对于使用 ubuntu 的 Eclipse：

转到 Window->Preferences->Ant->Runtime->Select Ant_Home_Entries 并单击添加外部 jars 然后在文件资源管理器中找到您的 jdk 所在的位置（默认位于 /usr/lib/jvm/ 中）和您的 lib 文件夹中jdk 你会找到tool.jar。选择这个并单击应用。

尝试构建您的项目，事情应该会奏效！

注意：我已经很长时间没有使用 ant，但是如果有人被困在ycsb couchbase 工作负载生成器（ [http://www.couchbase.com/wiki/display/couchbase/Load+Generator+Setup](http://www.couchbase.com/wiki/display/couchbase/Load+Generator+Setup) ），我需要它这。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-06-28T13:38:38.477

看起来您当前指向的 JAVA_HOME`/usr/lib/jvm/java-6-openjdk/jre`似乎是 JRE 而不是 JDK。尝试将 JAVA_HOME 设置为`/usr/lib/jvm/java-6-openjdk`.

JRE 不包含 Java 编译器，只有 JDK（Java Developer Kit）包含它。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2014-07-25T16:19:22.227

我正在使用 Windows 7，并且遇到了同样的问题。我通过更改我的环境变量来修复它。

要更改您的环境变量[，请单击此处](http://ventsoftware.com/?p=29&preview=true&preview_id=29&preview_nonce=0873c413c8&post_format=standard)

我将“;%JAVA_HOME%/bin”添加到路径变量的末尾，并添加了一个新的“JAVA_HOME”变量并将其值设置为我的 JDK“C:\Program Files\Java\jdk1.8.0_11”的位置。之后我重新启动了我的 Node.js 命令提示符，它工作了。

请注意，您的 JDK 目录可能与我的不同。此外，根据您的设置，您可能需要在设置环境变量后重新启动计算机。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-06-28T13:39:32.290

您上面的 JAVA_HOME 仅指向不包含编译器的 JRE。将您的 JAVA_HOME 设置为

```
/usr/lib/jvm/java-6-openjdk 
```

...然后再试一次。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-10-17T05:57:15.340

我遇到了类似的问题，结果发现问题出在 OpenJDK 6 和 7 版本上。答案来自 ubuntu 论坛上的 r-senior ( [http://ubuntuforums.org/showthread.php?t=1977619](http://ubuntuforums.org/showthread.php?t=1977619) ) --- 只需卸载版本 6：

`sudo apt-get remove openjdk-6-*`

确保没有将 JAVA_HOME 和 CLASSPATH 设置为任何内容，因为这实际上不是问题。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2014-09-05T01:56:05.777

对于 centos yum -y 安装 java-1.7.0-openjdk-devel.x86_64

并更新 JAVA_HOME=/usr/lib/jvm/java-1.7.0-openjdk.x86-64

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2015-12-26T06:49:04.160

我刚刚将 tools.jar 文件从 JDK\lib 文件夹复制到 JRE\lib 文件夹。从那时起，它就像一个冠军。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2014-11-07T10:11:29.013

在基本 OS Luna（基于 Ubuntu 12.04 LTS 源）上尝试使用 Meteor 1.0 运行 android 模拟器时遇到此问题。

已安装 openjdk-6-jdk 以及 jre。最后，没想到会成功，我尝试了：

```
sudo apt-get remove openjdk-6-* 
```

这导致了完全预期的错误，所以我跟进了

```
sudo apt-get install openjdk-6-jdk 
```

一切都奏效了。去搞清楚。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2015-01-07T15:42:19.620

在 Ubuntu 14.04 上，我找到了解决问题的两个部分：

1.  `/jre`从环境变量中删除。为了我：`export JAVA_HOME=/usr/lib/jvm/java-7-openjdk-amd64/`
2.  安装 JDK 和 JRE：`sudo apt-get install default-jdk`

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2016-01-25T19:08:53.733

按照答案中的说明更新 JAVA_HOME 路径后，您应该执行以下操作：

```
$source ~/.bashrc 
```

当您再次检查时，这将刷新 bashrc 在 $JAVA_HOME 中显示更新的路径。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2017-09-18T05:19:59.110

执行：

```
$ export JAVA_HOME=/usr/lib/jvm/java-1.8.0-openjdk-1.8.0.141-3.b16.el6_9.x86_64 
```

并设置操作系统环境：

```
vi /etc/environment 
```

然后按照以下步骤操作：

1.  按我
2.  粘贴

    ```
    JAVA_HOME=/usr/lib/jvm/java-1.8.0-openjdk-1.8.0.141-3.b16.el6_9.x86_64 
    ```

3.  按 esc

4.  按：wq

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2018-03-01T04:57:17.857

我在 rhel 中遇到了这个问题，我的“JAVA_HOME=/usr/lib/jvm/java-1.8.0-openjdk”（这是一个符号链接），并且蚂蚁抱怨。

我的解决方案是在 JAVA_HOME 中使用真正的 jdk 路径，例如：

JAVA_HOME=/usr/lib/jvm/java-1.8.0-openjdk-1.8.0.161-0.b14.el7_4.x86_64

这个对我有用。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2019-02-16T20:41:14.280

在詹金斯下，它抱怨如下：

/usr/lib/jvm/java-1.8.0-openjdk-1.8.0.191.b12-1.el7_6.x86_64/ 看起来不像 JDK 目录

原因：找不到任何适用于 JDK 的开发工具包。

解决方案：

请确保安装*openjdk-devel*软件包以及您的 JDK-1.8* 版本并重新导出：# source ~/.bash_profile

# ember.js - 在 Ember Js 中渲染多个模型，每个模型都包含多个对象

> ID：11245868
> 
> 赞同：0
> 
> 时间：2012-06-28T13:34:42.153
> 
> 标签：ember.js

我对 EmberJS 很陌生。我正在尝试渲染一个简单的 hasMany 建模。

我的应用程序应该为多人处理多项任务。

首先，我有模型：

```
App.Task = Em.Object.extend({
    name: null
});
App.Person = Em.Object.extend({
    firstname: null,
    lastname: null,
    avatar: null,
    tasks:null,
}); 
```

一个人可以有多项任务。所以我的personsController 是这样工作的：

```
App.personsController = Em.ArrayController.create({
    content: [],
    tasks:[],
    addPerson: function(){
        var aPerson = App.Person.create({
            firstname: this.firstname,
            lastname : this.lastname,
            avatar : this.avatar,
        });
        this.pushObject( aPerson );  
    } 
```

我的任务控制器，它将处理任务作业：

```
App.tasksController = Em.ArrayController.create({
    content:[],
    contentBinding: "App.personsController.tasks",
    name:'',
    removeTask: function(e){
        this.removeObject( e.context );
    },
    addTask: function(e){
        this.pushObject( App.Task.create({"name":this.name}) );
    }
}); 
```

`contentBiding`似乎是这里的关键之一。我希望它自动绑定到我正在处理的人的任务。

在视图方面，只使用我的 Handlebars 模板：

```
<script type="text/x-handlebars">
  {{view Em.TextField valueBinding="App.personsController.firstname" placeholder="firstname" }}
  {{view Em.TextField valueBinding="App.personsController.lastname" placeholder="lastname" }}
  <button {{action "addPerson" target="App.personsController"}} class="btn btn-primary"  >Ajouter un developpeur</button>
    {{#each App.personsController}}
      <div>
        <h3>{{firstname}}{{lastname}}</h3>
      {{view Em.TextField valueBinding="App.tasksController.name"}} 
        <button {{action "addTask" target="App.tasksController"}}  >Add a task</button>
        {{#each App.tasksController}}
          {{view Em.TextField valueBinding="name" }}
          <button {{action "removeTask" target="App.tasksController"}}  >x</button>
        {{/each}}
      </div>
    {{/each}}
</script> 
```

所以，当我添加一个新人时，一切正常。但是如果我添加一个任务，该任务会添加到视图中每个人的任务上。

恐怕我犯了一个概念上的错误，我找不到关于这种可视化的好的文档。我见过 hasMany 与 ember.data 的关系的例子，但我想首先正确理解这里发生了什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T22:29:59.503

您的`addTask`函数将一个新任务添加到维护的数组中`App.tasksController`，但没有任何东西将这些任务绑定到`App.Person.tasks`.

我建议创建`View`一个绑定到您`tasksController`和*单个* `App.Person`实例的新类。此视图的 personBinding 将设置在您的外部`{{#each}}`循环内。让这个视图负责为`App.Person.tasks`一个人渲染。

更改`addTask`您的控制器以接受对 an 的引用`App.Person`作为参数，然后将任务显式添加到`tasks`函数主体中该人的数组中。

# python - 使用 SCIPY.OPTIMIZE.FMIN_CG 提取 Weibull 分布参数

> ID：11245869
> 
> 赞同：3
> 
> 时间：2012-06-28T13:34:43.447
> 
> 标签：python, scipy, distribution, mathematical-optimization, weibull

我正在尝试提取满足某个均值和方差的 Weibull 分布参数（形状“k”和尺度“lambda”）。在这个例子中，均值是 4，方差是 8。这是一个 2-unknowns 和 2-equations 类型的问题。

由于该算法适用于 Excel 2010 的 GRG Solver，因此我确信它与我构建问题的方式有关，或者可能与我正在使用的库有关。我对优化库不太熟悉，所以请告诉我错误在哪里。

下面是脚本：

```
from scipy.optimize import fmin_cg
import math

def weibull_mu(k, lmda):                  #Formula can be found on wikipedia
    return lmda*math.gamma(1+1/k)
def weibull_var(k, lmda):                 #Formula can be found on wikipedia
    return lmda**2*math.gamma(1+2/k)-weibull_mu(k, lmda)**2

def min_function(arggs):
    actual_mean = 4                          # specific to this example
    actual_var = 8                           # specific to this example
    k = arggs[0]
    lmda = arggs[1]
    output = [weibull_mu(k, lmda)-(var_wei)]
    output.append(weibull_var(k, lmda)-(actual_var)**2-(actual_mean)**2)
    return output

print fmin(min_function, [1,1]) 
```

这个脚本给了我以下错误：

```
[...]
  File "C:\Program Files\Python27\lib\site-packages\scipy\optimize\optimize.py", line 278, in fmin
    fsim[0] = func(x0)
ValueError: setting an array element with a sequence. 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-28T13:48:18.087

据我所知，`min_function`返回一个多维列表，但[fmin](http://docs.scipy.org/doc/scipy/reference/generated/scipy.optimize.fmin.html)和[fmin_cg](http://docs.scipy.org/doc/scipy/reference/generated/scipy.optimize.fmin_cg.html)确实希望目标函数返回一个标量，如果我没记错的话。

如果您正在搜索两个方程问题的根，我想您最好应用[根](http://docs.scipy.org/doc/scipy/reference/generated/scipy.optimize.root.html)函数。据我所知，*scipy*没有为向量函数提供任何通用优化器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-28T15:20:16.843

感谢 Anders Gustafsson 的评论（谢谢），我设法让它工作。如果仅返回一个标量，则此脚本现在可以工作（在这种情况下，我使用了最小二乘法）。此外，通过将优化函数更改为“fmin_l_bfgs_b”来添加边界（再次感谢 Anders Gustafsson）。

我只更改了与问题相关的 min_function 定义。

```
from scipy.optimize import fmin_l_bfgs_b
import math

def weibull_mu(k, lmda):
    return lmda*math.gamma(1+1/k)
def weibull_var(k, lmda):
    return lmda**2*math.gamma(1+2/k)-weibull_mu(k, lmda)**2

def min_function(arggs):
    actual_mean = 4\.                    # specific to this example
    actual_var = 8\.                     # specific to this example
    k = arggs[0]
    lmda = arggs[1]
    extracted_var = weibull_var(k, lmda)
    extracted_mean = weibull_mu(k, lmda)
    output = (extracted_var - actual_var)**2 + (extracted_mean - actual_mean)**2
    return output

print fmin_l_bfgs_b(min_function, best_guess, approx_grad = True, bounds = [(.0000001,None),(.0000001,None)], disp = False) 
```

*注意：请随时将此脚本用于您自己或专业用途。*

# spring - 如何在非弹簧管理对象的弹簧应用程序中注册方面

> ID：11245871
> 
> 赞同：1
> 
> 时间：2012-06-28T13:35:02.180
> 
> 标签：spring, spring-mvc, aspectj

我有一个在 JBoss 中运行的 spring mvc 应用程序。我到处都在使用 Spring AOP（使用注释）；他们工作得很好。但是，我还想为几个 JBoss 类（特别是它们的登录 JaaS 内容）创建一个方面。

我在我的应用程序中创建了一个 POJO，如下所示：

```
package com.mycompany.aspect
(all imports here)
@Aspect
public class MyAspect{
    @Pointcut("execution(* org.jboss.plugins.*.login(..))"
    private void myPointCut();

    @Around("myPointCut()")
    public Object doSomething(){....}
} 
```

我还在 META-INF 目录中创建了一个 aop.xml 文件，如下所示：

```
<aspectj>
   <aspects>
       <aspect name="com.mycompany.aspect.MyAspect"/>
   </aspects>
   <weaver>
       <include within="org.jboss.plugins.*"/>
   </weaver>
</aspectj> 
```

我还添加了以下 jvm 选项：

```
-javaagent:pathto/aspectjweaver.jar (pathto is the right path to my aspectjweaver.jar file) 
```

当我的应用程序部署时，我得到以下 RuntimeException：

> .....无法注册非方面 com$mycompany$aspect$MyAspect, com.mycompany.aspect.MyAspect

我可能做错了什么？？？

编辑：我应该提到我正在使用 JBoss AS (4.2)...这我无法改变:(

# ruby - 瘦异步应用程序示例如何缓冲对正文的响应？

> ID：11245872
> 
> 赞同：2
> 
> 时间：2012-06-28T13:35:05.160
> 
> 标签：ruby, rack, eventmachine, thin

嗨，我一直在阅读关于 Thin 的文档，我对 eventmachine 相当陌生，但我知道 Deferables 是如何工作的。我的目标是了解当身体被延迟和部分流式传输时 Thin 是如何工作的。

以下是我正在使用并试图了解的示例。

```
 class DeferrableBody
  include EventMachine::Deferrable

  def call(body)
    body.each do |chunk|
      @body_callback.call(chunk)
    end

   # @body_callback.call()
  end

  def each &blk
    @body_callback = blk
  end

end

class AsyncApp

  # This is a template async response. N.B. Can't use string for body on 1.9
  AsyncResponse = [-1, {}, []].freeze
  puts "Aysnc testing #{AsyncResponse.inspect}"

  def call(env)

    body = DeferrableBody.new    

    # Get the headers out there asap, let the client know we're alive...
    EventMachine::next_tick do
       puts "Next tick running....."
       env['async.callback'].call [200, {'Content-Type' => 'text/plain'}, body] 
     end

    # Semi-emulate a long db request, instead of a timer, in reality we'd be 
    # waiting for the response data. Whilst this happens, other connections 
    # can be serviced.
    # This could be any callback based thing though, a deferrable waiting on 
    # IO data, a db request, an http request, an smtp send, whatever.
    EventMachine::add_timer(2) do
      puts "Timer started.."
      body.call ["Woah, async!\n"]

      EventMachine::add_timer(5) {
        # This could actually happen any time, you could spawn off to new 
        # threads, pause as a good looking lady walks by, whatever.
        # Just shows off how we can defer chunks of data in the body, you can
        # even call this many times.
        body.call ["Cheers then!"]
        puts "Succeed Called."
        body.succeed
      }
    end

    # throw :async # Still works for supporting non-async frameworks...
    puts "Async REsponse sent."
    AsyncResponse # May end up in Rack :-)
  end

end

# The additions to env for async.connection and async.callback absolutely 
# destroy the speed of the request if Lint is doing it's checks on env.
# It is also important to note that an async response will not pass through 
# any further middleware, as the async response notification has been passed 
# right up to the webserver, and the callback goes directly there too.
# Middleware could possibly catch :async, and also provide a different 
# async.connection and async.callback.

# use Rack::Lint
run AsyncApp.new 

```

我不清楚的部分是在`call`方法中的 DeferrableBody 类中发生了什么`each`。

我知道一旦计时器作为存储在@body_callback 中的块触发，并且当在主体上调用success 时，它会发送主体，但是当在这些块上被调用`yield`或被 `call`调用时，它如何在发送时变成单个消息。

我觉得我对闭包的理解不足以理解正在发生的事情。将不胜感激任何帮助。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T16:26:29.573

好的，我想我弄清楚了每个块是如何工作的。

当连接进来的时候， thin on`post_init`似乎正在生成一个`@request`and`@response`对象。响应对象需要响应一个`each`方法。这是我们重写的方法。

这`env['async.callback']`是一个分配给类方法中调用的方法的闭包，`post_process`其中`connection.rb`数据实际发送到连接，如下所示

```
 @response.each do |chunk|        
        trace { chunk }
        puts "-- [THIN] sending data #{chunk} ---"
        send_data chunk
      end 

```

响应对象的 each 是如何定义的

```
 def each
      yield head

      if @body.is_a?(String)
        yield @body
      else

        @body.each { |chunk| yield chunk }
      end
    end 

```

所以我们的 env['async.callback'] 基本上是一个`post_process`在 connection.rb 类中定义的方法，通过`method(:post_process)`允许我们的方法像闭包一样被处理，其中包含对 @response 对象的访问。当反应器启动时，它首先将头部数据发送到`next_tick`它产生头部的地方，但此时主体是空的，所以什么都没有产生。

在此之后，我们的`each`方法将覆盖`@response`对象拥有的旧实现，因此当触发的`add_timers`火将`post_process`我们使用 提供的数据发送`body.call(["Wooah..."])`到浏览器（或任何地方）

完全敬畏 macournoyer 和致力于瘦身的团队。如果您觉得这不是它的工作方式，请纠正我的理解。

# selenium-webdriver - jenkins selenium grid v2 置信度

> ID：11245874
> 
> 赞同：1
> 
> 时间：2012-06-28T13:35:13.663
> 
> 标签：selenium-webdriver, selenium-grid, jenkins-plugins

我需要有关配置和更新 jenkins selenium 插件的帮助。我可以在 jenkins 之外配置 selenium 集线器和节点，并从 maven 运行测试，因此 selenium 本身不是问题。

1 问题：jenkins selenium 插件已经使用可用浏览器列表定义了默认节点（5 个 firefox，5 个 chrome，2 个 IE）。我希望我的所有测试都在 jenkins 以外的其他机器上运行。所以我能够将我的远程节点指向詹金斯机器并在那里注册。我的问题是如何删除默认节点浏览器配置？？？

2 问题：如何更新到最新的 selenium-server-standalone 版本（目前是 2.24.1）。现在我可以看到詹金斯正在使用 2.15.0。我尝试在 ...jenkins/plugins/selenium/WEB-INF/lib 中添加 jar 并更新 license.xml 但在我重新启动 jenkins 后它仍然使用旧版本

感谢帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-04T13:41:13.440

我可以回答你第二个问题。要更新 selenium-server-standalone 版本，您必须执行以下步骤：

1) 下载最新版本的 selenium-server-standalone
2) 放入 YourJenkinsHomeDirectory/plugins/selenium/WEB-INF/lib
3) 编辑 YourJenkinsHomeDirectory/plugins/selenium/WEB-INF 中的 licenses.xml 文件

编辑以下内容（编辑以粗体突出显示的文本。粘贴您的 selenium-server-standalone 版本的值）：

l:dependency name='未命名 - org.seleniumhq.selenium:selenium-server-standalone:pom: **2.39.0** ' groupId='org.seleniumhq.selenium' artifactId='selenium-server-standalone' version=' **2.39.0** '

保存存档

4）转到YourJenkinsHomeDirectory/Home/plugins/selenium/META-INF/maven/org.jenkins-ci.plugins/selenium

5) 编辑 pom.xml

比找到下一个：

```
<dependency>
      <groupId>org.seleniumhq.selenium</groupId>
      <artifactId>selenium-server-standalone</artifactId>
      <version>2.39.0</version>
    </dependency>

    <dependency>
      <groupId>org.seleniumhq.selenium</groupId>
      <artifactId>selenium-java</artifactId>
      <version>2.39.0</version>
      <scope>test</scope>
    </dependency>
  </dependencies> 
```

并`<version>2.39.0</version>`在两个块中进行编辑。粘贴 selenium-server-standalone 版本的值

保存存档

6）重新启动你的詹金斯（简单地去这个`http://your-jenkins-url/restart`）默认的url是：`http://localhost:8080`。现在詹金斯应该重新启动

7）转到您的 Selenium Grid 中心`http://localhost:4444/grid/console`

8）现在你应该看到你的更新版本

祝你好运 ：）

# google-app-engine - 在 AppEngine 上设置 SSL...分配的 URL“空”

> ID：11245876
> 
> 赞同：0
> 
> 时间：2012-06-28T13:35:23.413
> 
> 标签：google-app-engine, ssl

我已经设置了自定义域“https://developers.google.com/appengine/docs/domain”

我已经上传了“一个 SSL 证书和私钥”（创建我在 Ubuntu 上使用“XCA”的那些，可在 Ubuntu 软件中心获得”）

结果...“分配所有匹配的 URL”或“添加”按钮处于非活动状态。

为 AppEgine 自定义域设置 SSL 的详细信息是什么？

帮助：点击“http://support.google.com/a/bin/answer.py?hl=en&answer=2644386”上的链接指的是登录，请参阅：（moma 单点登录）???->

[https://login.corp.google.com/saml_idp?KeyID=w1n&SAMLRequest=fVJNT%2BMwEL0j7X%2BwfM8nYoWsJqgLQluJhYgGDtwcZ1KctT3B47Tw70lTEN3DcvTz8%2FsYz%2BLi1Rq2BU8aXcGzOOUMnMJWu03BH%2Brr6JxflD9OFiStGcRyDM%2FuHl5GoMCml47EfFHw0TuBkjQJJy2QCEqsl39uRB6nYvAYUKHhbHVV8N4hdoPq26a1%2FeYvmB6taXXTY9%2FIRjfN4IbOSsXZ42esfB9rRTTCylGQLkxQmuVR%2BjPKz%2BvsVJzm4ix94qz6cPql3aHBd7GaA4nE77quoupuXc8CW92Cv53YBd8gbgzECu3evpJEejvBnTQEnC2JwIcp4CU6Gi34NfitVvBwf1Pw5xAGEkmy2%2B3iL5lEJscHRbycJyvmcv5opN9Hl5%2FWvPzSWyRHUuXHj%2B2LrK4qNFq9saUxuLv0IMPUIvhxKnGN3srwf7cszmZEt1E3U8XoaAClOw0tZ0l5cP13NaaFeQc%3D&RelayState=https% 3A%2F%2Fwww.google.com%2Fa%2Fgoogle.com%2FServiceLogin%3Fservice%3Dah%26passive%3Dtrue%26continue%3Dhttps%253A%252F%252Fappengine.google.com%252F_ah%252Fconflogin%253Fcontinue%253Dhttps%253A% 252F%252Fdevsite.googleplex。com%252Fappengine%252Fdocs%252Fssl%26ltmpl%3Dga%26shdf%3DCioLEgZhaG5hbWUaHkdvb2dsZSBEZXZTaXRlIENvbnRlbnQgU3RhZ2luZwwSAmFoIhRMUzrDPeZIM0WftD9x6Ag2ike0YCgBMhQmSRWl7933zRbjQon](https://login.corp.google.com/saml_idp?KeyID=w1n&SAMLRequest=fVJNT%2BMwEL0j7X%2BwfM8nYoWsJqgLQluJhYgGDtwcZ1KctT3B47Tw70lTEN3DcvTz8%2FsYz%2BLi1Rq2BU8aXcGzOOUMnMJWu03BH%2Brr6JxflD9OFiStGcRyDM%2FuHl5GoMCml47EfFHw0TuBkjQJJy2QCEqsl39uRB6nYvAYUKHhbHVV8N4hdoPq26a1%2FeYvmB6taXXTY9%2FIRjfN4IbOSsXZ42esfB9rRTTCylGQLkxQmuVR%2BjPKz%2BvsVJzm4ix94qz6cPql3aHBd7GaA4nE77quoupuXc8CW92Cv53YBd8gbgzECu3evpJEejvBnTQEnC2JwIcp4CU6Gi34NfitVvBwf1Pw5xAGEkmy2%2B3iL5lEJscHRbycJyvmcv5opN9Hl5%2FWvPzSWyRHUuXHj%2B2LrK4qNFq9saUxuLv0IMPUIvhxKnGN3srwf7cszmZEt1E3U8XoaAClOw0tZ0l5cP13NaaFeQc%3D&RelayState=https%3A%2F%2Fwww.google.com%2Fa%2Fgoogle.com%2FServiceLogin%3Fservice%3Dah%26passive%3Dtrue%26continue%3Dhttps%253A%252F%252Fappengine.google.com%252F_ah%252Fconflogin%253Fcontinue%253Dhttps%253A%252F%252Fdevsite.googleplex.com%252Fappengine%252Fdocs%252Fssl%26ltmpl%3Dga%26shdf%3DCioLEgZhaG5hbWUaHkdvb2dsZSBEZXZTaXRlIENvbnRlbnQgU3RhZ2luZwwSAmFoIhRMUzrDPeZIM0WftD9x6Ag2ike0YCgBMhQmSRWl793zR9on0qxjQb8iedMy3Q)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T14:17:08.667

这是正确的文档链接： [https ://developers.google.com/appengine/docs/ssl](https://developers.google.com/appengine/docs/ssl)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T14:38:04.513

添加应用引擎应用以在您的自定义域上使用 SSL 时。使用 openssl 创建 PEM 编码的 X.509 证书和未加密的 PEM 编码的 RSA 私钥：

```
openssl genrsa -out rsaprivkey.pem 1024

openssl req -new -x509 -key rsaprivkey.pem -out dsacert.pem 
```

当 open ssl 向您询问有关您的应用程序名称的问题时，请确保在您的答案中包含整个 url，www.abc.com 以保护[https://www.abc.com](https://www.abc.com)

-本

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T15:53:58.810

我使用的域很简单，应该使用 CN -> **www.abc.com**而不仅仅是**abc.com**。

“主机证书上的所有主题名称都应与 Google Apps 控制面板中与帐户关联的域匹配，或者是其子域。”

感谢文档链接:-)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-12-25T00:49:59.080

在 Google App 管理控制台下 -> 选择 App Engine 应用 -> 选择应用 -> 添加新 URL

# opengl - 使用 ARToolkit 在增强现实应用程序中显示文本消息

> ID：11245878
> 
> 赞同：1
> 
> 时间：2012-06-28T13:35:25.630
> 
> 标签：opengl, opencv, augmented-reality, artoolkit, flartoolkit

我想实现一个简单的 AR 桌面应用程序。此应用程序应首先从一组预先注册的标记中识别出一个标记，然后在屏幕上显示与检测到的标记相关的一些特定信息。

我正在考虑使用 ARToolkit，即使它已经很旧并且不再受支持。

1.  您认为 ARToolkit 是一个好的解决方案吗？
2.  如何使用 ARToolkit 在屏幕上显示文本消息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T09:45:44.250

我在这里找到了一篇有趣的文章[http://mycodelog.com/2010/03/23/printw/](http://mycodelog.com/2010/03/23/printw/)。

它很容易解释如何实现一个与 printf 完全一样的“printw”函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T10:24:23.400

[osgART](http://osgart.org/wiki/index.php/Main_Page)可能会有所帮助[http://osgart.org/wiki/index.php/Main_Page](http://osgart.org/wiki/index.php/Main_Page)

# php - Propel 的 fromArray/fromJSON 特性对 SQL 注入安全吗？

> ID：11245886
> 
> 赞同：5
> 
> 时间：2012-06-28T13:35:42.993
> 
> 标签：php, sql, orm, sql-injection, propel

Propel ORM 文档提到了一个使用 fromArray 和 fromJSON 之类的函数[的简洁的导入/导出功能，它应该允许这样的事情：](http://www.propelorm.org/reference/active-record.html#import_and_export_capabilities)

```
$foo = new Widget();
$foo->fromArray($_POST);
$foo->save(); /* Aaand you're done! */ 
```

...但是文档没有提到以这种方式使用 fromArray 是否应该是安全的，即 fromArray 是否可以处理不受信任的输入。我的猜测是没关系 - 默认设置器是防注入的，并且整个交易基于 PDO - 但我想确定。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-28T13:40:57.967

Propel 不仅使用 PDO 进行查询，它还通过 PDO 使用 Prepared Statements，这在缓解 SQL 注入攻击（和性能增强）方面非常好。

请注意，**仅**使用 PDO 并不能保证对 SQL 注入的任何保护，请始终使用[Prepared Statements](http://php.net/manual/en/pdo.prepared-statements.php)。

因此，作为对您问题的回答，是的，Propel 充分利用了 PDO 的能力来防止 SQL 注入。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-28T17:55:49.240

正如 Adnan 所说，Propel 是安全的，但是当您决定使用该`fromArray()`方法时，切勿`$_POST`直接传递全局变量。否则，你打开了[批量分配攻击](https://github.com/blog/1068-public-key-security-vulnerability-and-mitigation)的大门。

您总是必须检查输入数据，换句话说，您永远不应该信任您的用户。

# git - 在客户端触发 git 钩子

> ID：11245890
> 
> 赞同：1
> 
> 时间：2012-06-28T13:35:51.277
> 
> 标签：git

我从“计算机 1”更新了“repo”。在“repo”上，一个`post-receive`钩子成功触发`git checkout -f`了对“computer 2”的更改。

现在，在“计算机 2”上，一旦上述结帐完成，我想触发一个钩子。我在“计算机 2”上尝试了一个`post-receive`和一个`post-checkout`钩子，但没有成功。都不火。在这种情况下，我可以在“计算机 2”上使用哪个钩子？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T14:09:41.170

你不能只是`git checkout -f`，因为这意味着**repo1**正在将其内容转储到 repo2 工作树上：

```
 # repo1 post-receive hook
 GIT_WORK_TREE=/path/to/repo2 git checkout -f 
```

您需要`repo2`拉 repo1 内容以更新其 ( `repo2`) 内容。
另外，启动更新的事实`repo2`意味着其他 repo2 钩子将有机会被依次触发。

```
 # repo1 post-receive hook
 GIT_DIR=/path/to/repo2/.git
 GIT_WORK_TREE=/path/to/repo2 git pull repo1 
```

# windows - 为 windows slate 开发

> ID：11245895
> 
> 赞同：0
> 
> 时间：2012-06-28T13:36:02.133
> 
> 标签：windows, api, xna, tablet

由于微软将在今年晚些时候发布一款带有新操作系统的平板电脑，我想知道我们是否已经可以为这个平台创建应用程序并在发布之前将它们投放市场？

如果是这种情况，我可以从哪里获得在 XNA 中为即将推出的 windows 8 平板电脑创建触摸应用程序所需的 API。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T13:40:30.510

现在看起来 XNA 应用程序将不会被市场直接支持[（来源）](http://www.armlessoctopus.com/2012/03/09/microsoft-outlines-their-unified-metro-vision-sans-xna/)；但是，[MonoGame](http://monogame.codeplex.com/)游戏能够进入市场。这是 XNA 的开源替代品。

在这一点上，考虑 XNA 已经存在了几年，但除了目前在 Xbox、Windows Phone 和 Windows 上运行但在 Windows 8 Marketplace 上不支持的功能之外，其他任何东西都没有直接支持。

# jsf - 一种轻松检查元素是否在 jsf2 中呈现的方法

> ID：11245896
> 
> 赞同：0
> 
> 时间：2012-06-28T13:36:03.867
> 
> 标签：jsf, jsf-2, render

我有一个应该关闭模式面板并呈现几个元素的按钮。

有没有一种简单的方法可以检查按下按钮后是否呈现了元素？

示例按钮：

```
<a4j:commandButton onclick="#{rich:component('modal')}.hide();"  
    style="background-repeat:no-repeat;width:18px;height:18px;" 
    image="includes/images/close.gif"       
        render=":id1 :id2">
        <f:setPropertyActionListener target="#{Controller.attribute}" value="false" />
</a4j:commandButton> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T13:43:38.903

> *我有另一个按钮在未渲染的 div 上不起作用。*

`rendered`提交表单时，必须保留所有按钮父组件的属性条件。因此，它不仅应该`true`在使用按钮呈现表单的请求期间进行评估，还应该`true`在处理表单提交的请求期间进行评估。最简单的方法是将支持 bean 放在视图范围内`@ViewScoped`。

此外，如果您要重新渲染一个又包含 a 的组件，则`<h:form>`需要将其客户端 ID 显式添加`<h:form>`到`render`属性中。例如，当具有客户端 ID`id1`的组件又具有`<h:form id="formOfId1">`.

```
render=":id1 :id2 :formOfId1" 
```

您可以通过浏览网络浏览器的开发人员工具集中的 HTTP 流量来调试这一切（在 Chrome/IE9/Firebug 中按 F12 并检查“网络”部分）。

### 也可以看看：

*   [未调用 commandButton/commandLink/ajax 操作/侦听器方法或未更新输入值](https://stackoverflow.com/questions/2118656/hcommandlink-hcommandbutton-is-not-being-invoked/2120183#2120183)- 第 5 点和第 7 点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-07T11:39:56.540

我遇到了同样的问题。我的解决方案是在我想要呈现的元素内显示当前时间。

例如，如果您想渲染一个面板，只需在该面板内粘贴以下代码段：

```
<h:outputText value="#{session.lastAccessedTime}"> 
    <f:convertDateTime pattern="yyyy-MM-dd HH:mm:ss.SSS" type="date" /> 
</h:outputText> 
```

如果单击按钮后时间更新，则显然组件已呈现。但相反的情况也成立吗？如果时间没有更新，这是否意味着组件没有被渲染？如果组件被正确渲染，但显示的时间被冻结到页面第一次被访问的那一刻怎么办？我对此有点怀疑，所以我刷新了页面，时间改变了。因此显示的时间不会冻结到初始时刻。

另请注意，有多种获取时间的方法；如果您不喜欢使用会话时间，可以在支持 bean 中设置一个属性，并将其初始化为 new Date()

# git - 推送到远程仓库会出现错误 - 下仍有参考

> ID：11245897
> 
> 赞同：7
> 
> 时间：2012-06-28T13:36:11.277
> 
> 标签：git

我正在尝试将代码推送到远程仓库-

```
git push uat release/1.1:release
Counting objects: 4047, done.
Delta compression using up to 2 threads.
Compressing objects: 100% (1679/1679), done.
Writing objects: 100% (4047/4047), 3.38 MiB | 1.79 MiB/s, done.
Total 4047 (delta 2160), reused 3666 (delta 1909)
remote: Switched to branch 'release'
To ubuntu@ubuntu-jvm:/repos/tms/uat
 * [new branch]      release/1.1 -> release
error: there are still refs under 'refs/remotes/uat/release'
error: Cannot lock the ref 'refs/remotes/uat/release'. 
```

如何解决上述错误。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-28T14:13:55.643

我怀疑您的遥控器`release/<something>`上还有其他分支。`uat`您正在运行的`push`命令正在尝试将本地分支`release/1.1`转换为远程分支`release`，但远程拒绝删除`release/<something>`，因为这会丢失信息。尝试`git push uat release/1.1:newrelease`或类似的东西以避免尝试将单个分支命名为与包含其他分支的“子目录”相同的东西的冲突（它不是真正的子目录，但在`git`内部工作的方式，它有时存储为实际的子目录）。

`git remote show uat`或者`git branch -r`会告诉你你的`uat`遥控器有哪些分支。

# sharepoint - 用于替换 Sharepoint 2010 中的 MultiLookup 的自定义字段类型。从哪里继承？

> ID：11245904
> 
> 赞同：4
> 
> 时间：2012-06-28T13:36:24.257
> 
> 标签：sharepoint, sharepoint-2010, custom-field-type

我正在开发一个看起来像 MultiLookup 的自定义字段类型（两个列表框，“添加”和“删除” - 按钮）。但我不想将该数据保存在包含该字段的列表中。换句话说：应该有完全自定义的代码。

我知道如何解决它，但不确定我应该从哪种类型中获取自定义控件。或者当我覆盖 FieldRenderingControl 并且我可以使用时这无关紧要

```
public class MyCustomField:SPFieldText 
```

?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T14:12:11.057

只要您不在列表中保存数据就没有关系。选择占用空间最小的一个，布尔值左右（我不完全知道名字）。

# arrays - 如何将变量的值添加到数组中？

> ID：11245905
> 
> 赞同：0
> 
> 时间：2012-06-28T13:36:33.327
> 
> 标签：arrays, perl, file, text

我正在寻找目录中的文件。如果我找不到该文件，我想将该文件的名称发送到一个数组，这样当循环完成时，我将拥有一个未找到文件的数组。我如何在 Perl 中编写代码？

```
foreach $missing (@miss) {
    chomp $missing;
    ($a,$b)=split(/\.m_inproc./,$missing);

    @find = `find /home1/users/virtual/ -name .m_inproc.$b`;
    $find_size = scalar @find;
    $flag = "/home1/t01jkxj/check_st/flags/$b";

    if ($find_size < 1 && -e $flag) {
        $doit = `$b > @re_missing`;
    }
} 
```

这是我的搜索代码，如果它没有找到一个文件（`$find_size`小于 1）并且有一个标志文件（意味着我们之前已经完成了这个搜索）。我想将该变量`$b`（文件名）写入数组。显然，我目前的语法不正确。那会是什么？谢谢！`($doit = `$b > @re_missing`;)`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T13:45:42.673

怎么样：

```
push @re_missing, $b 
```

顺便说一句，使用 $a 和 $b 是不好的形式。这些是用于比较器主体的隐式声明的变量[`sort`](http://perldoc.perl.org/functions/sort.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T14:05:39.017

```
my @missing_files = grep { ! -e } @files_to_search_for; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T13:48:18.590

不确定您的代码的完整上下文，但此代码 - 结合您已经实现的文件大小检查 - 应该让您走上正确的轨道。这里的简短回答是“使用推送”，但我想编写代码，很抱歉，如果这导致不必要的阅读和“使用推送”就足够了。

```
#usr/bin/perl
use strict;
use warnings;

my @files = ("tester.txt", "pooter.txt", "output.txt"); 
my @notfound;

foreach(@files)
{
    if (!(-e $_))
    {
        push (@notfound, $_);
    }
}

foreach(@notfound)
{
    print $_;
} 
```

# c# - 如何使用通用基类实现服务定位器模式？

> ID：11245907
> 
> 赞同：4
> 
> 时间：2012-06-28T13:36:36.550
> 
> 标签：c#, generics

我让自己陷入了 22 条陷阱，似乎找不到出路。我正在尝试实现一个简单的 [Service Locator][1]，由下面示例代码中的 GetInstance 方法表示。现在的问题是我在 return 语句上得到一个编译器错误，说：

`Cannot implicitly convert type 'Cyberspace.SubClass' to 'Cyberspace.BaseClass<T>'`

我已经尝试重写，以便 SubClass 本身就是一个泛型类，但随后我在 DoSomething 方法中的 return 语句上得到编译器错误。

任何人都可以编译此代码，保留允许我在 GetInstace 方法中具有抽象返回类型的服务定位器模式原则吗？还是我想在这里实现一些不可能的事情？

```
namespace Cyberspace
{
    class BaseClass<T>
    {
        BaseClass<T> GetInstance() 
        { 
            return new SubClass();
        }
        virtual T DoSomething() { return default(T); }          
    }

    class SubClass : BaseClass<OtherClass>
    {
        public override OtherClass DoSomething()
        { 
            var other = new OtherClass { Description = "Generics are hard"};
            return other;
        }
    }

    class OtherClass
    {
        internal string Description { get; set; }
    }
} 
```

**尝试2：**

```
namespace Cyberspace
{
    class BaseClass<T>
    {
        static BaseClass<T> GetInstance() // The "Service Locator" method
        { 
            return new SubClass<T>(); 
        }
        internal virtual T DoSomething() { return default(T); }        
    }

    class SubClass<T> : BaseClass<T> where T: OtherClass
    {
        internal override T DoSomething()
        { 
            var other = new OtherClass { Description = "Generics are hard"};
            return (T) other;
        }
    }

    class OtherClass
    {
        internal string Description { get; set; }
    }
} 
```

这会在线产生以下错误`return new SubClass<T>();`

`The type 'T' cannot be used as type parameter 'T' in the generic type or method 'Cyberspace.SubClass<T>'. There is no boxing conversion or type parameter conversion from 'T' to 'Cyberspace.OtherClass'`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T13:41:20.573

我不清楚你真正想要做什么，但我可以告诉你为什么会发生编译错误。

从此方法返回的任何内容：

`BaseClass<T> GetInstance()`

*必须*能够处理任何类型`T`（因为您没有类型约束）。`SubClass`只能处理一种类型，而不是所有类型。因此，您无法退货。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T14:01:50.953

使用类型参数`T`时，您声明：“我不在乎实际是什么类型。我只需要*一些*类型，任何类型。调用它`T`。”。但在您的情况下，您似乎想要一个特定的类型。那么就不需要泛型了。

```
class SubClass : BaseClass<OtherClass>
{
    internal override OtherClass DoSomething()
    { 
        var other = new OtherClass { Description = "Generics are hard"};
        return other;
    }
} 
```

为什么以下不起作用？

```
 var other = new OtherClass { Description = "Generics are hard"};
        return (T) other; 
```

因为`T`可能源自`OtherClass`. 您不能转换`OtherClass`为从`OtherClass`. 没有意义，编译器足够聪明，可以捕捉到它。

* * *

评论中的讨论导致以下解决方法：

```
return (BaseClass<T>)(object)new SubClass(); 
```

当然，这仅适用于类型在运行时对齐的情况。

# android - .db 文件在不同安卓手机中的位置

> ID：11245920
> 
> 赞同：5
> 
> 时间：2012-06-28T13:37:18.950
> 
> 标签：android, database

当我们为我们的项目使用 sqlLite 数据库时，.db 文件**/data/data/com.yourpackage.name/databases 的路径。**每部安卓手机都一样吗？？或 .db 文件的存储路径在 android 手机中有所不同？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-28T13:40:09.793

不要紧。您可以通过 找到应用程序数据库的路径，该路径[将`getDatabasePath()`](http://developer.android.com/reference/android/content/Context.html#getDatabasePath%28java.lang.String%29)解析到特定设备的正确位置。

# jquery - 一次提交后Jquery Form消失

> ID：11245925
> 
> 赞同：0
> 
> 时间：2012-06-28T13:37:30.590
> 
> 标签：jquery, jquery-mobile, jqueryform

我有一种情况，我页面上的表单在每个表单提交一次后就会消失。例如，显示登录提示（使用Jquery Mobile）输入用户名和密码，对话框正常显示，输入被处理和验证，登录成功后显示主页。但是，如果我注销然后再次尝试重新登录，则只会显示页眉。输入字段和标签不存在。

我有另一个页面，其中有一个输入字段，在其中输入文本，进行 $.post 调用，返回 HTML 并使用 $('#results').html(dataReceived ) 函数调用。

显示结果时，表单似乎正在消失。这是页面文本：

```
<div data-role="page" id="Search" data-title="Search">
<div data-role="header" data-theme="e">
<h1>Search</h1>                
</div>
<div data-role="content">                
<form name="SearchForm" action="search.php">
SSN: <input type=number name="snum" size="9" value=""><br>
<input id="SearchButton" type="submit" value="Begin Search" data-inline="true">
</form>
<div id=SearchResults></div>
</div><!-- /content -->
</div><!-- /Search --> 
```

我拦截表单的提交事件并在其他地方处理它。在 $.post AJAX 调用的回调函数中设置 div 内容的代码是：

```
$('#SearchResults').html(dataReceived); 
```

一般信息：jquery 和 jquery mobile 的最新稳定版本。这是一个多页文件。不调用外部页面。一切都通过 $.post 调用完成。登录表单不会更新任何 HTML，它只是接收用户的 ID 并将其存储在一个变量中。

任何帮助，将不胜感激。谷歌在这方面不是我的朋友。

修改为显示表单提交代码：

```
$(document).ready(function() {
        $('form').submit(function(event) {
                event.preventDefault();
                var thisForm=$(this);
                var formUrl=thisForm.attr('action');
                var formName=thisForm.attr('name');
                var dataToSend=thisForm.serialize();
                var callBack=function(dataReceived) {
                        thisForm.hide();
                        switch(formName) {
                            case 'loginForm':
                            if (dataReceived.length>0 && parseInt(dataReceived)>0) {
                                   loggingIn=0;
                                   userId=parseInt(dataReceived);
                                   $.mobile.changePage("#home");
                                   break;
                            }
                            thisForm.show();
                            break;

                            case 'SearchForm':
                                    $('#SearchResults').html(dataReceived);
                                    break;
                        }
                };
                dataToSend += '&seid=' + SESSID;
                var rtnType="html";
                switch(formName) {
                        case "loginForm":
                                rtnType="text";
                                break;
                        case 'SearchForm':
                                break;
                }
                $.post(formUrl,dataToSend,callBack,rtnType);
                return false;
        }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T14:03:51.110

您将表单隐藏在提交回调函数中：

```
thisForm.hide(); 
```

对于“loginForm”，您调用的是 show()，但对于“SearchForm”，您没有在表单上调用 show()：

```
 var callBack=function(dataReceived) {
                    thisForm.hide();
                    switch(formName) {
                        case 'loginForm':
                          if (dataReceived.length>0 && parseInt(dataReceived)>0) {
                               loggingIn=0;
                               userId=parseInt(dataReceived);
                               $.mobile.changePage("#home");
                               break;
                          }
                          thisForm.show();
                          break;
                        case 'SearchForm':
                          $('#SearchResults').html(dataReceived);
                          break;
                    }
            }; 
```

# java - 如何处理在 Spring MVC 中渲染视图时引发的异常？

> ID：11245932
> 
> 赞同：29
> 
> 时间：2012-06-28T13:37:39.473
> 
> 标签：java, spring, spring-mvc, freemarker

我有一个 Spring MVC 应用程序，它使用 FreeMarker 作为视图技术（但也许视图技术对我的问题并不重要）。我需要拦截在请求期间可能引发的所有异常。

我已经实现了一个[HandlerExceptionResolver](http://static.springsource.org/spring/docs/current/spring-framework-reference/html/mvc.html#mvc-exceptionhandlers)但是这个解析器只在控制器内发生异常时执行。但是，当控制器返回 ModelAndView 并且在渲染视图时发生异常（因为找不到变量或类似的东西），则不会调用异常解析器，而是在浏览器窗口中获得堆栈跟踪。

我还尝试在控制器中使用异常处理程序方法，该方法返回视图并用 @ExceptionHandler 对其进行注释，但这也不起作用（很可能再次因为异常不是在控制器中而是在视图中引发）。

那么是否有一些 Spring 机制可以让我注册一个捕获视图错误的异常处理程序？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-06-28T15:08:59.007

先说一句：如果您只需要一个“静态”错误页面而没有太多逻辑和模型准备，那么`<error-page>`在您的中放置一个 -Tag就足够了`web.xml`（请参见下面的示例）。

否则，可能有更好的方法来做到这一点，但这对我们有用：

我们使用一个 servlet`<filter>`来`web.xml`捕获所有异常并调用我们的自定义 ErrorHandler，这与我们在 Spring HandlerExceptionResolver 中使用的相同。

```
<filter>
   <filter-name>errorHandlerFilter</filter-name>
   <filter-class>org.example.filter.ErrorHandlerFilter</filter-class>
</filter>
<filter-mapping>
  <filter-name>errorHandlerFilter</filter-name>
  <url-pattern>/*</url-pattern>
</filter-mapping> 
```

实现基本上是这样的：

```
public class ErrorHandlerFilter implements Filter {

  ErrorHandler errorHandler;

  @Override
  public void doFilter(ServletRequest request, ServletResponse response, FilterChain filterChain) throws IOException, ServletException {
    try {
      filterChain.doFilter(request, response);
    } catch (Exception ex) {
      // call ErrorHandler and dispatch to error jsp
      String errorMessage = errorHandler.handle(request, response, ex);
      request.setAttribute("errorMessage", errorMessage);
      request.getRequestDispatcher("/WEB-INF/jsp/error/dispatch-error.jsp").forward(request, response);
    }

  @Override
  public void init(FilterConfig filterConfig) throws ServletException {
    errorHandler = (ErrorHandler) WebApplicationContextUtils
      .getRequiredWebApplicationContext(filterConfig.getServletContext())
      .getBean("defaultErrorHandler");
  }

  // ...
} 
```

我相信这对于 FreeMarker 模板应该几乎是一样的。当然，如果你的错误视图抛出一个错误，你或多或少是没有选择的。

为了同时捕获 404 之类的错误并为其准备模型，我们使用映射到`ERROR`调度程序的过滤器：

```
<filter>
   <filter-name>errorDispatcherFilter</filter-name>
   <filter-class>org.example.filter.ErrorDispatcherFilter</filter-class>
</filter>
<filter-mapping>
  <filter-name>errorDispatcherFilter</filter-name>
  <url-pattern>/*</url-pattern>
  <dispatcher>ERROR</dispatcher>
</filter-mapping>

<error-page>
  <error-code>404</error-code>
  <location>/WEB-INF/jsp/error/dispatch-error.jsp</location>
</error-page>
<error-page>
  <exception-type>java.lang.Exception</exception-type>
  <location>/WEB-INF/jsp/error/dispatch-error.jsp</location>
</error-page> 
```

doFilter-Implementation 看起来像这样：

```
@Override
public void doFilter(ServletRequest servletRequest, ServletResponse servletResponse, FilterChain filterChain) throws IOException, ServletException {

  final HttpServletRequest request = (HttpServletRequest) servletRequest;

  // handle code(s)
  final int code = (Integer) request.getAttribute("javax.servlet.error.status_code");
  if (code == 404) {
    final String uri = (String) request.getAttribute("javax.servlet.error.request_uri");
    request.setAttribute("errorMessage", "The requested page '" + uri + "' could not be found.");
  }

  // notify chain
  filterChain.doFilter(servletRequest, servletResponse);
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-07-02T14:10:06.773

您可以扩展 DispatcherServlet。

在您的 web.xml 中，为您自己的类替换通用 DispatcherServlet。

```
<servlet>
    <servlet-name>springmvc</servlet-name>
    <servlet-class>com.controller.generic.DispatcherServletHandler</servlet-class>
    <load-on-startup>1</load-on-startup>
</servlet> 
```

稍后创建您自己的类 DispatcherServletHandler 并从 DispatcherServlet 扩展：

```
public class DispatcherServletHandler extends DispatcherServlet {

    private static final String ERROR = "error";
    private static final String VIEW_ERROR_PAGE = "/WEB-INF/views/error/view-error.jsp";

    @Override
    protected void doService(HttpServletRequest request, HttpServletResponse response) throws Exception {
        try{
            super.doService(request, response);
        } catch(Exception ex) {
            request.setAttribute(ERROR, ex);
            request.getRequestDispatcher(VIEW_ERROR_PAGE).forward(request, response);
        }
     }
} 
```

在该页面中，我们只需向用户显示一条消息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T13:43:21.913

不确定我的解决方案是否适用于您遇到的问题。生病只是发布我捕获异常的方式，以确保浏览器内不显示堆栈跟踪：

我用一个方法创建了一个 AbstractController 类，它可以处理这样的特定冲突：

```
public class AbstractController {

    @ResponseStatus(HttpStatus.CONFLICT)
    @ExceptionHandler({OptimisticLockingFailureException.class})
    @ResponseBody
    public void handleConflict() {
    //Do something extra if you want
    }
} 
```

这样，无论何时发生异常，用户都会看到默认的 HTTPResponse 状态。（例如 404 Not Found 等）

我在我的所有控制器类上扩展了这个类，以确保将错误重定向到 AbstractController。这样我就不需要在特定控制器上使用 ExceptionHandler ，但我可以将全局添加到我的所有控制器中。（通过扩展 AbstractController 类）。

**编辑：** 再继续你的问题，我注意到你的观点有错误。不确定这种方式是否会捕获该错误..

希望这可以帮助！！

# apache - 如何允许通过 Apache 和 WebDAV 写入文件

> ID：11245937
> 
> 赞同：2
> 
> 时间：2012-06-28T13:37:54.597
> 
> 标签：apache, permissions, file-permissions, webdav

我无法理解如何在 WebDAV 设置上编辑文件。我已经正确设置了身份验证，已通过大量在线教程进行验证，但有些文件`.htaccess`我无法编辑。

VirtualHost 设置的内容是

```
<VirtualHost *:80>

        ServerAdmin xxx
        ServerName xxx

        DocumentRoot /data/www/vhosts/xxx
        <Directory /data/www/vhosts/xxx>
                Options Indexes MultiViews
                AllowOverride None
                Order allow,deny
                allow from all
        </Directory>

        <Location />
                DAV On
                AuthType Basic
                AuthName "WebDAV Access"
                AuthUserFile /data/www/.htpasswd-webdav
                Require valid-user
        </Location>

</VirtualHost> 
```

我也在文件中生成了正确的用户名，我可以成功登录并查看所有文件。就像我说的，问题在于某些文件不可读和不可写，主要的罪魁祸首是`.htaccess`和`.gitignore`.

`664`我已将所有文件和所有文件夹`775`的权限设置`user:group`为`xxx:www-data`. 原因是这允许 PHP 可以读取/写入文件，而我们的远程登录用户`xxx`也可以在没有权限问题的情况下执行相同的操作。

我需要做些什么来允许对这些隐藏的点文件进行读写吗？我完全被难住了，因为我读过的大多数教程都告诉我，如果我不将点文件的权限设置为，`root:root`那么它们将是可写的。我正在使用 Mac 连接到在 Ubuntu 上运行的 WebDAV 服务，如果这有什么不同的话

为了清楚起见，`xxx`这个问题中的所有内容都是隐藏信息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T14:31:31.207

所以看来我可以允许使用下面的访问特定文件

```
<Files .htaccess>
 order allow,deny
 deny from all
</Files> 
```

我忘记`.htaccess`了默认情况下通过 HTTP 阻止文件。

**编辑：**

使用 Digest 安全身份验证使所有文件在 webdav 环境中可写的最终工作设置是：

```
<VirtualHost *:80>

        ServerAdmin xxx
        ServerName www.domain.name

        DocumentRoot xxx
        <Directory xxx>
                Options Indexes MultiViews
                AllowOverride None
                Order allow,deny
                allow from all
        </Directory>

        <FilesMatch "\.(htaccess|php)$">
        Order allow,deny
        allow from all
        ForceType text/plain
    </FilesMatch>

        <Location />
                DAV On

                AuthType Digest
                AuthName "Webdav Access"
        AuthDigestDomain / http://www.domain.name/

        AuthDigestProvider file
                AuthUserFile /data/www/digest.users
                Require valid-user

        php_value engine off
        </Location>

</VirtualHost> 
```

我希望这对其他人有帮助。在网上找到所有这些信息需要几天的时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T09:03:52.113

还要检查 /data/www/ 本身的权限。它应该对 apache 用户是可写的。

# mysql - 如何在某些行被多次计算的情况下进行查询？

> ID：11245939
> 
> 赞同：1
> 
> 时间：2012-06-28T13:37:57.313
> 
> 标签：mysql, join, group-by

我有一张这样的桌子

```
gems
----------
id, color
1 , green
2 , green
3 , blue
4 , red
5 , red
6 , red
7 , rainbow  <<<<< OMNI COLOR
8 , rainbow  <<<<< OMNI COLOR 
```

我试图得到这样的结果

```
color count,   each rainbow is added to each color
---------------
color , count
green , 4
blue , 3
red , 5 
```

我一直在尝试加入和分组的各种组合，但我不知道如何解决这个问题。在这个例子中，每个正常颜色应该只计算一次，但每个彩虹宝石需要计算多次，而在真正的问题中，有 X 数量的不同“颜色”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T13:40:09.917

```
SELECT `color`, (count(*) + rb.`cnt`) AS `count`
FROM gems,
     (SELECT COUNT(*) AS `cnt` FROM gems WHERE color='rainbow') AS rb
GROUP BY `color`
HAVING `color`<>'rainbow' 
```

[这](http://sqlfiddle.com/#!2/e4003/2/0)是一个显示查询工作的小提琴。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-28T13:39:57.013

你想用一个计算彩虹数量的子查询加入你的表，然后对结果进行分组：

```
SELECT   color,
         COUNT(*) + t.rainbows AS count
FROM     gems
  JOIN (SELECT COUNT(*) AS rainbows FROM gems WHERE color = 'rainbow') AS t
WHERE    color <> 'rainbow'
GROUP BY color 
```

在[sqlfiddle](http://sqlfiddle.com/#!2/00f2b/1)上查看。

# sql - Rails ActiveRecord::Relation 对象使用包含模型

> ID：11245944
> 
> 赞同：0
> 
> 时间：2012-06-28T13:38:30.433
> 
> 标签：sql, ruby-on-rails, ruby

我需要从两个相似但不相同的单独模型中检索信息。我正在尝试做类似的事情

我研究了一些方法，但是它们返回一个活动对象数组，而不是我的应用程序的许多功能工作所需的 ActiveRecord::Relation。

有没有办法返回一个包含两个表联合的 ActiveRecord::Relation 对象？

我尝试过类似的事情

```
@group = Mymodel.find_by_sql("SELECT id FROM Mymodels 
  UNION SELECT id FROM AnotherModels") 
```

并且还使用 Model.where 方法进行了探索，但是无法返回 ActiveRecord::Relation

编辑：

为了清楚起见，我需要返回 ActiveRecord::Relation ，它是两个表的联合或合并

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T14:00:05.603

尝试这样的事情：

```
Model.joins(:other_model).where("attr1" = :attr1,
                               { attr1: "example" }).group(:attr1) 
```

既然您评论了`where`，我`where`在通话中添加了该方法。最后，您还可以`:group`对所有内容进行分组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T13:54:21.243

你试过`MyFirstModel.joins(:my_second_models)`吗？[在此处](http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html)查看`joins`API 中的详细信息。

编辑：单表继承是解决此问题的更好方法。请参阅下面的评论。

# android - 获取“无效的扩展描述符”编译 Flex Native Extensions

> ID：11245945
> 
> 赞同：-1
> 
> 时间：2012-06-28T13:38:31.947
> 
> 标签：android, apache-flex, air-native-extension

我正在为 Android 编译 Flex Native Extension 时收到“无效的扩展描述符”。extension.xml 文件中的所有内容似乎都正常。

```
<extension xmlns="http://ns.adobe.com/air/extension/3.1">
    <id>com.samples.NESample</id>
    <versionNumber>1</versionNumber>
    <platforms>
        <platform name="Android-ARM">
            <applicationDeployment>
                <nativeLibrary>notification.jar</nativeLibrary>
                <initializer>com.samples.NESample.NESampleExtension</initializer>
                <finalizer>com.samples.NESample.NESampleExtension</finalizer>
            </applicationDeployment>
        </platform>
    </platforms>
</extension> 
```

请帮我找出问题所在。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-08T09:40:18.713

这意味着命令提示符找不到文件“extension.xml”。假设您的文件位于“C:\Users”中。确保在命令提示符下你也在同一个目录中.. c:\Users>

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T05:34:55.373

该文件看起来不错，这可能是您在编译时将其传递给adt而不是文件本身的方式？

我使用这样的东西：

```
adt -package    -storetype pkcs12 -keystore cert.p12 -storepass password \
                -target ane extensionname.ane extension.xml \
                -swc actionscript/bin/extensionname.swc \
                -platform Android-ARM -C android/bin . 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-23T08:16:53.480

我有同样的问题。原来我的 cmd 在错误的目录中。导航到构建文件夹，然后运行 ​​adt 命令。

# c# - 使用 SAPI 托管代码（System.Speech 命名空间）和本机代码（COM 接口）的情况是什么？

> ID：11245954
> 
> 赞同：1
> 
> 时间：2012-06-28T13:39:19.963
> 
> 标签：c#, .net, speech-recognition, speech, sapi

我正在用 C# 开发一个语音识别应用程序，想知道使用这两个版本的优缺点，以及它们可能存在的任何差异。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T20:18:41.350

它们大致相似；C# 库是（相对较厚的）原生 C++ API 的包装器。

最大的区别在于语法系统；C# 库使用 W3C SRGS 语法，而本机库使用自定义 XML 语法。

# oracle - Oracle：使用 DMBS_IJOBS 时出错

> ID：11245955
> 
> 赞同：0
> 
> 时间：2012-06-28T13:39:25.737
> 
> 标签：oracle, jobs

使用以下代码出现以下错误：

```
BEGIN
    sys.dbms_ijob.run(25950);
   COMMIT;
EXCEPTION
   WHEN others
   THEN
      DBMS_OUTPUT.put_line (SQLERRM);
      RAISE;
END;

ORA-06550: line 2, column 5:
PLS-00201: identifier 'SYS.DBMS_IJOB' must be declared
ORA-06550: line 2, column 5:
PL/SQL: Statement ignored 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T14:56:18.180

我猜你没有以 SYS 身份运行它。您需要以 SYS 身份运行它，或者您需要 DBA 授予您对包的执行权限。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-28T14:59:14.803

虽然@APC 是正确的，这是一个权限问题，但我强烈质疑您为什么首先使用该`DBMS_IJOB`软件包。它是一个未记录的内部包，不是开发人员通常应该使用的东西。`RUN`在公共的、有文档的包中有一个非常好的程序`DBMS_JOB`，您可以使用它来代替

```
BEGIN
  dbms_job.run( 25950 );
  commit;
END;
/ 
```

当公共的、有文档的包有一种方法可以做你想做的事情时，没有理由使用内部的、无文档的包。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-28T13:54:07.290

我认为`DBMS_IJOB`Oracle 数据库中没有一个包。应该是`DBMS_JOB`。

# wordpress - 为什么 Wordpress 分页链接会重新加载同一页面？

> ID：11245960
> 
> 赞同：1
> 
> 时间：2012-06-28T13:39:38.007
> 
> 标签：wordpress, pagination

我在一个非常基本的自定义主题中添加了分页。链接显示（第 1 页、第 2 页等），但是当我单击其中一个链接时，它只是重新加载同一页面。

这是在模板中添加分页的代码：

```
<?php pagination($additional_loop->max_num_pages); ?> 
```

和功能：

```
function pagination($pages = '', $range = 2)
{  
     $showitems = ($range * 2)+1;  

     global $paged;
     if(empty($paged)) $paged = 1;

     if($pages == '')
     {
         global $wp_query;
         $pages = $wp_query->max_num_pages;
         if(!$pages)
         {
             $pages = 1;
         }
     }   

     if(1 != $pages)
     {
         echo "<div class='pagination'>";
         if($paged > 2 && $paged > $range+1 && $showitems < $pages) echo "<a href='".get_pagenum_link(1)."'>&laquo;</a>";
         if($paged > 1 && $showitems < $pages) echo "<a href='".get_pagenum_link($paged - 1)."'>&lsaquo;</a>";

         for ($i=1; $i <= $pages; $i++)
         {
             if (1 != $pages &&( !($i >= $paged+$range+1 || $i <= $paged-$range-1) || $pages <= $showitems ))
             {
                 echo ($paged == $i)? "<span class='current'>".$i."</span>":"<a href='".get_pagenum_link($i)."' class='inactive' >".$i."</a>";
             }
         }

         if ($paged < $pages && $showitems < $pages) echo "<a href='".get_pagenum_link($paged + 1)."'>&rsaquo;</a>";  
         if ($paged < $pages-1 &&  $paged+$range-1 < $pages && $showitems < $pages) echo "<a href='".get_pagenum_link($pages)."'>&raquo;</a>";
         echo "</div>\n";
     }
} 
```

如果有人能提供一些启示，我将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T01:37:43.713

[paginate_links](http://codex.wordpress.org/Function_Reference/paginate_links)是将分页添加到存档页面的一种更简单的方法。

假设您启用了永久链接，您需要这样的东西。

```
<?php

$ulpn=99999999; // Something bigger than you will ever have number of pages.
 $pagination=paginate_links(array('base'=>str_replace($ulpn,'%#%',esc_url(get_pagenum_link($ulpn))), 'format'=>'/page/%#%','current'=>max(1,get_query_var('paged')),'total'=>$wp_query->max_num_pages,'prev_text'=>'Previous','next_text'=>'Next','type'=>'array'));
  if($pagination) { ?>
    <div class="pagination">
      <?php foreach($pagination as $page) { echo $page; } ?>
    </div>
  <?php } 
```

# php - 如何使用 PHP 从地址栏中检索完整的 URL？

> ID：11245963
> 
> 赞同：5
> 
> 时间：2012-06-28T13:39:43.523
> 
> 标签：php

> **可能重复：**
> [如何使用 PHP 在地址栏上获取完整 URL](https://stackoverflow.com/questions/4768181/how-to-get-full-url-on-the-address-bar-using-php)

我使用这个功能，但它并不总是有效。谁能给个提示？

```
function sofa_get_uri() {
    $host = $_SERVER['SERVER_NAME'];
    $self = $_SERVER["REQUEST_URI"];
    $query = !empty($_SERVER['QUERY_STRING']) ? $_SERVER['QUERY_STRING'] : null;
    $ref = !empty($query) ? "http://$host$self?$query" : "http://$host$self";
    return $ref;
} 
```

我想（准确地）检索地址栏中的链接，以便在用户退出时使用它来推荐用户。网址不同：

```
http://domain.com/sample/address/?arg=bla

http://domain.com/?show=bla&act=bla&view=bla

http://domain.com/nice/permalinks/setup 
```

但我无法获得适用于所有情况的功能并给我真正的推荐人。

请提示。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-06-28T13:50:08.180

这个怎么样？

```
function getAddress() {
    $protocol = $_SERVER['HTTPS'] == 'on' ? 'https' : 'http';
    return $protocol.'://'.$_SERVER['HTTP_HOST'].$_SERVER['REQUEST_URI'];
}

echo getAddress(); 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-06-28T13:46:35.730

您可以使用上面的函数来检索 URL，直到 GET 参数。所以你有像='localhost/site/tmp'这样的字符串（示例）。之后，如果不能让其他任何东西起作用，您可以循环遍历 GET 参数。添加 '？' 在字符串的末尾手动。

```
$str = 'localhost/site/tmp/?'
foreach ($_GET as $key => $value) {
    $str .= $key.'='.$value.'&';
}
substr_replace($str, "", -1); 
```

回声 $str; 最后，您将删除最后一个不需要的符号“&”。

# ios - UIImagePickerController 完成拍照后，转到相机视图

> ID：11245964
> 
> 赞同：0
> 
> 时间：2012-06-28T13:39:47.547
> 
> 标签：ios, uiimagepickercontroller

如何使用 UIImagePickerController 拍照，当我单击“使用”按钮时，返回相机视图拍摄另一张照片？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T03:34:13.867

你得到后

`- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info`

刚回去就换新的`UIImagePicker`

这是一个示例：[https](https://github.com/fulldecent/FDTake) ://github.com/fulldecent/FDtake - 只需`takePhotoOrChooseFromLibrary`直接从`gotPhoto`.

# jasperserver - 如何绕过 JasperReports 服务器中的登录凭据

> ID：11245967
> 
> 赞同：3
> 
> 时间：2012-06-28T13:39:51.163
> 
> 标签：jasperserver

我正在尝试绕过*JasperReports Server* 4.5 中的登录凭据，因此用户无需输入任何用户名和密码即可直接登录，我通过直接在 URL 中传递用户名和密码来完成此操作：

```
http://localhost:8080/jasperserver/flow.html?_flowId=searchFlow
&j_username=jasperadmin&j_password=jasperadmin 
```

现在我想隐藏这些用户凭据，所以没有人可以看到用户名和密码。

如何隐藏这些凭据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-07-22T10:07:45.760

最好的方法是使用基于令牌的身份验证并加密令牌。该[视频涵盖](https://www.youtube.com/watch?v=QFlOw6teF9U)了整个过程。

# sockets - JMeter TCP Sampler 无法识别流结束

> ID：11245970
> 
> 赞同：4
> 
> 时间：2012-06-28T13:40:03.100
> 
> 标签：sockets, tcp, jmeter

我正在尝试使用 TCP Sampler 运行一个简单的测试

使用默认 TCPClient 类时，响应超时时间过去后，我收到来自服务器的正确响应，然后采样器结果中出现错误 500：

> 响应代码：500 响应消息：org.apache.jmeter.protocol.tcp.sampler.ReadException：

JMeter 似乎无法识别消息字符的结尾（服务器发送**\r\n**）。

如何配置 JMeter 以查看 EOM？

* * *

我尝试使用 BinaryTCPClientImpl，并在**Jmeter.properties中设置****tcp.BinaryTCPClient.eomByte = 13**，但是 binaryTCPClient 需要 HEX 数据，而我发送人类可读的字符串，它仍然忽略 eomByte ...

 **有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T14:30:05.933

发现了问题。

在某些情况下，这些服务器没有发送 \r\n。服务器修复后一切都开始工作了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-04-27T11:18:56.027

我遇到了同样的行为并检查了提供的响应（在服务器端的消息末尾发送 \r\n \ 在 gui 中设置*eol 字节值*选项），但这对我不起作用。

**我的解决方案：**在[这个问题](https://stackoverflow.com/questions/51363303/sending-eol-byte-for-request-in-tcp-sampler)之后，我发现 \0 是 Jmeter 在 TCP 采样器中期望的 eol 字符。当我的服务器使用 \0 终止消息时 - 在 Jmeter 中收到消息。

**更多参考资料：** [Jmeter 文档](https://jmeter.apache.org/usermanual/component_reference.html#TCP_Sampler)（TCPClientImpl 章节 - 这是讨论[tcp.eolByte](https://jmeter.apache.org/api/org/apache/jmeter/protocol/tcp/sampler/AbstractTCPClient.html#eolByte)的地方）。

**一些选项：**如果消息的大小是恒定的，可以检查 LengthPrefixedBinaryTCPClientImpl（请参阅[此讨论](https://stackoverflow.com/questions/11245970/jmeter-tcp-sampler-doesnt-recognize-end-of-stream)）。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2018-08-17T06:36:58.153

在收到 EOF 之前，TCP 采样器不会返回。在 TCP 采样器中设置您自己的 EOF 字节值。服务器在 EOF 字节值的末尾发送一个流。**

# c# - 基本类型还是复杂类型？

> ID：11245972
> 
> 赞同：3
> 
> 时间：2012-06-28T13:40:09.403
> 
> 标签：c#

> **可能重复：**
> [C# 中的 Bool 和 Boolean 类型有什么区别](https://stackoverflow.com/questions/134746/what-is-the-difference-between-bool-and-boolean-types-in-c-sharp)

这些天我正在为 Web 应用程序做很多 C# 编程。我的团队还没有决定我们应该使用基本类型还是复杂类型。

不同类型的优势是什么？

费克斯：

```
Object vs object
Boolean vs bool 
```

等等...

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-28T13:42:46.607

没有区别 -`bool`是 的别名`Boolean`，`object`是 的别名`Object`。但是，惯用的 C# 会让您使用`object`, `bool`,`int`等。

请注意，默认情况下，StyleCop 将强制执行此做法。相关规则为[SA1121](http://stylecop.soyuz5.com/SA1121.html)。

当然，对于该规则是否有效存在不同的意见。我建议阅读这个 SO 问题：[C# - StyleCop - SA1121: UseBuiltInTypeAlias - Readability Rules](https://stackoverflow.com/questions/6000517/c-sharp-stylecop-sa1121-usebuiltintypealias-readability-rules)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-28T13:45:38.103

[c#：“System.Object”和“object”之间的区别](https://stackoverflow.com/questions/1017282/c-difference-between-system-object-and-object)

乔恩斯基特：

> string 是 global::System.String 的别名。它只是语法糖。两者完全可以互换，编译后的代码没有区别。
> 
> 我个人将别名用于变量名称等，但我将 CLR 类型名称用于 API 中的名称，例如：
> 
> ```
> public int ReadInt32() // Good, language-neutral
> 
> public int ReadInt() // Bad, assumes C# meaning of "int" 
> ```
> 
> （请注意，返回类型并不是真正的名称——它被编码为元数据中的一种类型，所以那里没有混淆。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T13:47:40.787

```
object === System.Object
string === System.String
bool === System.Boolean
byte === System.Byte
sbyte === System.SByte
short === System.Int16
ushort === System.UInt16
int === System.Int32
uint === System.UInt32
long === System.Int64
ulong === System.UInt64
float === System.Single
double === System.Double
decimal === System.Decimal
char === System.Char 
```

# mysql - CodeIgniter - 当第二个表中没有行时 MySQL 连接

> ID：11245976
> 
> 赞同：5
> 
> 时间：2012-06-28T13:40:13.550
> 
> 标签：mysql, codeigniter

我在模型中有这个查询：

> ```
>  public function Games() {
>     $q = $this->db->select('games.id, games.title, games.slug, games.dev_id, games.dev, games.plat_id, games.plat');
>     $q = $this->db->from('games');
>     $q = $this->db->join('rates', 'games.id = rates.game_id');
>     $q = $this->db->select_avg('rates.rate');
>     $q = $this->db->get(); 
> ```

```
 return $q->result();
} 
```

我的目标是列出来自 的所有内容，并在可用时`games`获得平均值。现在它只显示两个表中的那些行。我该如何解决这个问题？`rate``rates`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-28T13:42:24.517

使用此说明

```
$this->db->select('games.id, games.title, games.slug, games.dev_id, games.dev, games.plat_id, games.plat');
$this->db->select_avg('rates.rate');
$this->db->from('games');
$this->db->join('rates', 'games.id = rates.game_id','left');
$this->db->group_by('rates.game_id');
$q = $this->db->get(); 
```

左连接会带来多个结果。使用 avg 和 group by 将限制为每条记录仅获取一行。

# sql-server - SQL Server - 插入大量行？

> ID：11245980
> 
> 赞同：1
> 
> 时间：2012-06-28T13:40:45.330
> 
> 标签：sql-server, performance, sql-server-2005

*我在这里阅读了很多关于这个主题的答案，但每个人都建议`BCP`|| `SqlBulkCopy`来自.net的类*

我有一个查询，它从不同的表中插入5 个`targetTable`并*集。*`selects`

我在选择的表上有正确的索引。并且只有 1 个聚集标识索引`targetTable`。然而，这需要很长时间（约 25 分钟）。我说的是 5M 行（x 20 列）。

当我看`sp_who2`的时候，大多数时候，它是`suspended`......

我想使用`bulk`复制但*不是*来自.net（数据库已经获取数据 - 所以我不需要去 C#）。

**问题**

*   如何在我的选择命令中使用批量插入（无 bcp）？
*   另外，为什么大部分时间都暂停？我怎样才能给我的查询更高的*优先级*？

谢谢你。

*ps`bcp`由于安全限制，我不能在这里使用...我没有运行它的权限。*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T13:50:46.743

你是对的：这比平时花费的时间更长。你每秒得到 3k 行。您应该很容易获得每秒 10k 或 20k 的速度。在最好的情况下，每个 CPU 内核每秒 200k

我怀疑你是在整个桌子上插入，而不仅仅是在最后。在这种情况下，每秒 3k 行并不罕见。

**无论如何，批量复制无法帮助您。**它的插入速度并不比仅服务器的插入语句快。

但是，您可以做的是使用多个线程插入。将您的行源划分为 N 个不同的范围，并从单独的连接同时插入每个范围。如果您受 CPU 限制，这将有所帮助。如果您受 IO 限制，则不会。

# java - 从打开的 JComboBox 打开 JPopupMenu

> ID：11245982
> 
> 赞同：2
> 
> 时间：2012-06-28T13:40:54.690
> 
> 标签：java, swing, jcombobox, jpopupmenu, jpopup

我想更改组合框的 OOTB 行为，在单击鼠标右键后将其*冻结*（检测单击了哪个按钮很容易，所以这不是重点）并打开 JPopupMenu 而不是选择该条目。

那么 - 如何在给定条件下禁用选择条目并使用自定义行为呢？

我尝试首先将鼠标侦听器添加到所有组合框组件，但没有成功 - 没有任何改变

```
import java.awt.BorderLayout;
import java.awt.Component;
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;

import javax.swing.JComboBox;
import javax.swing.JFrame;

public class MainClass {

    public static void main(final String args[]) {

        final String labels[] = { "A", "B", "C", "D", "E" };
        JFrame frame = new JFrame("Selecting JComboBox");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        JComboBox comboBox = new JComboBox(labels);
        frame.add(comboBox, BorderLayout.SOUTH);
        frame.setSize(400, 200);
        frame.setVisible(true);

        for (Component c : comboBox.getComponents()) {
            c.addMouseListener(new MouseAdapter() {
                public void mouseClicked(MouseEvent e) {
                    System.out.println("cli");
                    super.mouseClicked(e);
                }
                public void mousePressed(MouseEvent e) {
                    System.out.println("pre");
                    super.mousePressed(e);
                }
            });
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T13:54:29.227

*   在 Swing 中不可能同时显示两个轻量级弹出容器

*   [来自 JPopup 的](https://stackoverflow.com/a/8511560/714968)关于JComboBox 弹出窗口的示例

*   有关于设置`JPopup`为重量级的肮脏黑客

*   但我建议与(或)混合`AWT Container`使用`Swing JComponents``AWT.Popup``Swing.JComponent``JMenuItem``JButton`

# python - Windows 上的 easy_install cx_Oracle（python 包）

> ID：11245985
> 
> 赞同：13
> 
> 时间：2012-06-28T13:41:03.787
> 
> 标签：python, windows, easy-install, cx-oracle

所以我找到了[安装 cx_Oracle 的帮助，](https://stackoverflow.com/questions/1711408/help-installing-cx-oracle)但仍然卡住了。我从 oracle 下载了最新的即时客户端，并将 ORACLE_HOME 设置为提取文件的位置（直接和 ORACLE_HOME 值和文件之间的 bin 文件夹），但是运行 setup.py 时 easy_install 弹出错误说它可以' t 定位 Oracle 包含文件。我确实注意到文件夹中只有 11g dll，我是否需要所有 3 个驱动程序才能完成设置？如果是这样，我什至从哪里得到它们？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-28T13:52:40.327

[老实说，从他们拥有的二进制安装程序](http://cx-oracle.sourceforge.net/)之一安装 cx_Oracle比从源代码安装要容易得多。

# *nix 的 HOWTO：

1.  浏览到[Instant Client for Linux x86 下载页面。](http://www.oracle.com/technetwork/topics/linuxx86-64soft-092277.html)

2.  下载适合您的架构（32 位或 64 位）的最新版 basic、sqlplus 和 sdk 软件包：

    *   `oracle-instantclient<version>-basic-<version_full>.<arch>.rpm`
    *   `oracle-instantclient<version>-sqlplus-<version_full>.<arch>.rpm`
    *   `oracle-instantclient<version>-devel-<version_full>.<arch>.rpm`.
3.  使用外星人安装 RPM。例如，在撰写本文时：

    ```
    $ sudo alien -i oracle-instantclient12.1-basic-12.1.0.2.0-1.x86_64.rpm 
    ```

4.  添加必要的环境变量（我个人确实将它放入`/etc/environment`然后注销/重新加载环境）：

    ```
    ORACLE_HOME=/usr/lib/oracle/<version>/client64/lib/
    LD_LIBRARY_PATH=/usr/lib/oracle/<version>/client64/lib/ 
    ```

5.  [修复 oracle 的包括](https://stackoverflow.com/a/24550818/1030960)：

    ```
    $ sudo ln -s /usr/include/oracle/<version>/client $ORACLE_HOME/include  # for 32bits arch, OR
    $ sudo ln -s /usr/include/oracle/<version>/client64 $ORACLE_HOME/include  # for 64bits arch 
    ```

6.  创建`/etc/ld.so.conf.d/oracle-instantclient<version>-basic.conf` 和`/etc/ld.so.conf.d/oracle.conf`（对于更新的版本，至少从 12.1 开始）包含：

    ```
     /lib  
      /usr/lib/oracle/<version>/client/lib  ; for 32bits arch, OR
      /usr/lib/oracle/<version>/client64/lib  ; for 64bits arch 
    ```

7.  重新加载 ldconfig 缓存（`-v`如果需要详细信息，请使用标志）：

    ```
    $ sudo ldconfig 
    ```

您可能需要安装`libaio1`.

# 如何安装 cx_Oracle

假设我们已经安装了 Oracle Instant Client 10，您有不同的选择来安装[cx_Oracle](http://cx-oracle.sourceforge.net/)：

1.  使用[pip](https://pypi.python.org/pypi/pip)安装：（`$ pip install cx_oracle`仅限 Linux）
2.  从[cx_oracle PyPI](https://pypi.python.org/pypi/cx_Oracle)站点下载安装程序/.tar.gz 文件

旧版本（低于 5.1.2 的版本是 .msi 和 .rpm 文件）可以从[这里](http://sourceforge.net/projects/cx-oracle/files/)下载。使用外星人安装 RPM。例如，在撰写本文时： `$ sudo alien -i cx_Oracle-5.0-10g-py25-1.x86.rpm`

要进行测试，`python -c 'import cx_Oracle; print cx_Oracle'`应返回模块及其版本。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2016-02-25T17:26:14.193

**第 1 步**检查 python 是 32 位还是 64

```
import platform
platform.architecture()[0]#'32bit' 
```

或 **步骤 2**安装 oracle 客户端（32 位或 64 位取决于步骤 1 中的 python 版本）[![在此处输入图像描述](../Images/e839329d04e66daec8937dd9a458971b.png)](https://i.stack.imgur.com/P0mKI.png)

 ***   [从http://www.oracle.com/technetwork/database/enterprise-edition/downloads/112010-win32soft-098987.html](http://www.oracle.com/technetwork/database/enterprise-edition/downloads/112010-win32soft-098987.html(link)下载 oracle 客户端（32 位版本的链接） 下载并解压 zip 文件在一个文件夹中
*   在这种情况下，zip 文件被提取到“安装”
*   目录将如下所示 [![在此处输入图像描述](../Images/fdb7fbe0b10df21c24def0bf73c1ce37.png)](https://i.stack.imgur.com/S5G9o.png)

    *   单击安装并将路径设置为“基本”和“软件”目录

        *   软件目录应该在基本目录中（推荐）
        *   在这种情况下，“已安装”目录是基本目录，“软件”目录是软件路径

        *   设置 ORACLE_HOME 路径：

        *   将 oracle 主路径设置为 'software' 目录为 'F:\softwares\oracle11g32\installed\software'

        *   在 cmd 检查 'echo %ORACLE_HOME%' 以查看路径是否设置正确

**第 3 步**为 python 2.7 安装 vcforpython27 或 visual c++ 2008 express edition

*   从这里下载它[https://www.microsoft.com/en-sa/download/details.aspx?id=44266](https://www.microsoft.com/en-sa/download/details.aspx?id=44266)（在这种情况下使用它来避免安装整个 Visual c++ 2008，如下所述）

*   它是一个小包，包含用于 python 2.7 的 c++ 编译器

*   （或者）

*   visual c++ 2008 express edition ( [https://www.microsoft.com/en-sa/download/details.aspx?id=5582](https://www.microsoft.com/en-sa/download/details.aspx?id=5582) ) [大约 1 GB 安装]

*   vcforpython27 将安装在 'C:\Users\Administrator\AppData\Local\Programs\Common\Microsoft'

*   启用在 Windows 中显示隐藏文件夹到这些目录 [![在此处输入图像描述](../Images/f56d1891278497efcfd095f6953fa3c8.png)](https://i.stack.imgur.com/6yTMi.png)

*   设置一个名为“VS100COMNTOOLS”的环境变量，其值为“C:\Users\Administrator\AppData\Local\Programs\Common\Microsoft\Visual C++ for Python\9.0”
*   它应该指向包含“vcvarsall”批处理文件的目录[![在此处输入图像描述](../Images/b15a745820e1cc24692bd95afa746f20.png)](https://i.stack.imgur.com/kx3zG.png)

*   echo %VS100COMNTOOL% 查看cmd中是否指向正确的目录

*   并执行以下步骤：（来自：[错误：无法找到 vcvarsall.bat](https://stackoverflow.com/questions/2817869/error-unable-to-find-vcvarsall-bat)）

*   转到 C:/Python27/lib/distutils 文件 msvc9compiler.py。在其中找到函数 find_vcvarsall 并进行以下修改。将以下行替换： productdir = os.path.join(toolsdir, os.pardir, os.pardir, "VC") 与 productdir = os.path.join(toolsdir) 这是 vcvarsall.bat 在这种情况下所在的位置（检查， vcvarsall.bat 在您的安装中）。

**安装 cx_Oracle**

```
 the easy step: pip install cx_oracle 
```

如果正确遵循上述所有步骤，那么它应该可以工作。弄清楚这一点需要很多痛苦。我希望它会有用。

**推荐运行：**

```
 pip install --upgrade setuptools
 from : https://stackoverflow.com/questions/2667069/cannot-find-vcvarsall-bat-when-running-a-python-script 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-03-07T13:40:24.430

1.  下载 oracle 即时客户端（适用于 32 位或 64 位架构师和适当的 Oracle 版本（10g、11g、12g））。 [http://www.oracle.com/technetwork/topics/winx64soft-089540.html](http://www.oracle.com/technetwork/topics/winx64soft-089540.html)

注意：要求用户使用 OTN（oracle 技术网络帐户）进行身份验证。

1.1。下载并解压“Instant Client Package - Basic”到 C:\Python27\Scripts\instantclient_11_2 例如instantclient-basic-windows.x64-11.2.0.4.0.zip

1.2\. 下载并解压“Instant Client Package - SDK”到 C:\Python27\Scripts\instantclient_11_2 例如instantclient-sdk-windows.x64-11.2.0.4.0.zip

2.  设置 ORACLE_HOME=C:\Python27\Scripts\instantclient_11_2

3.  python -m pip install cx_Oracle

成功输出： `Collecting cx_Oracle Using cached cx_Oracle-5.2.1.tar.gz Building wheels for collected packages: cx-Oracle Running setup.py bdist_wheel for cx-Oracle ... done Stored in directory: C:\Users\m315468\AppData\Local\pip\Cache\wheels\7c\5f\96\ cd273c9b675bc7c28ae249b74d1f7df5d3eacba9e918715225 Successfully built cx-Oracle Installing collected packages: cx-Oracle Successfully installed cx-Oracle-5.2.1`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-11-08T09:10:32.527

经过努力，我找到了以下方法。我正在使用 Windows，并且有单独的 django 环境。

1.  点击此[链接](https://oracle.github.io/odpi/doc/installation.html#windows)并转到 Windows 部分。现在在 Oracle“Instant Client Zip”下，您将看到下载 zip 文件的第一步，具体取决于您需要的版本和位。下载 zip 文件。记住 django 2 不支持 Oracle 11。
2.  在 Windows 上创建以下文件夹结构 c:\oracle\instantclient_12_2
3.  将您的文件解压缩到此文件夹下。
4.  在控制面板 -> 系统 -> 高级系统设置 -> 高级 -> 环境变量 -> 系统变量 -> PATH 中设置 PATH。Instant Client 目录必须在 PATH 中位于任何其他 Oracle 目录之前。
5.  打开其他命令提示符或重新启动当前命令提示符。
6.  康达激活
7.  输入蟒蛇
8.  一个一个地运行下面的命令来测试连接，注意最后一个 for 循环的缩进。

    ```
    import cx_Oracle

    connection = cx_Oracle.connect("your_username", "your_psw", "localhost/orcl")

    cursor = connection.cursor()

    cursor.execute("""select to_char(sysdate, 'dd-mon-yyyy') from dual""")

    for cdate in cursor:

        print("Today the date is ", cdate) 
    ```

输出：

```
 Today the date is  ('08-nov-2019',) 
```**

# sinatra - Sinatra + 机架路由

> ID：11245986
> 
> 赞同：1
> 
> 时间：2012-06-28T13:41:09.930
> 
> 标签：sinatra, rack, cherokee, respond-to

我有一个看起来像这样 ws_app.rb 的应用程序文件：

```
require 'rubygems'
require 'sinatra'
require 'sinatra/respond_to'
require 'dm-core'
require 'dm-migrations'
require 'dm-timestamps'
require 'json'
require 'csv'

load 'models/Battery.rb'

Sinatra::Application.register Sinatra::RespondTo
DataMapper::setup(:default,"sqlite3://#{Dir.pwd}/mpt_hmi.sqlite3")

class MPTHMI  < Sinatra::Base

    load 'controller/BatteryController.rb'

end 
```

modules/Battery.rb 看起来像这样：

```
class Battery
   include DataMapper::Resource

   property :id, Serial
   property :i_battery_manager_id, Integer
   property :c_battery_number, String
   property :c_battery_state, String
   property :c_voltage_byte, String
   property :i_voltage_int, Integer
   property :i_temperature, Integer
   property :i_resistance, Integer
   property :i_capacity, Integer
   property :i_cell_balancing_duration, Integer
   property :i_total_cell_balancing_duration, Integer
   property :i_age, Integer
   property :i_time_to_service, Integer
   property :created_at, DateTime
   property :updated_at, DateTime

   def to_my_json
     {
      :i_battery_manager_id => self.i_battery_manager_id,
      :c_battery_number => self.c_battery_number,
      :c_battery_state => self.c_battery_state,
      :c_voltage_byte => self.c_voltage_byte,
      :i_voltage_int => self.i_voltage_int,
      :i_temperature => self.i_temperature,
      :i_resistance => self.i_resistance,
      :i_capacity => self.i_capacity,
      :i_cell_balancing_duration => self.i_cell_balancing_duration,
      :i_total_cell_balancing_duration => self.i_total_cell_balancing_duration,
      :i_age => self.i_age,
      :i_time_to_service => self.i_time_to_service
     }
  end

end 
```

控制器/BatteryController.rb 文件如下所示：

```
get '/battery/:id' do 
   @battery = Battery.get(params[:id])
   respond_to do |wants|
     wants.html { erb :battery } # html
     wants.json { @battery.to_my_json.to_s } # json
   end
end

get '/batteries' do 
  @batteries = Battery.all
  respond_to do |wants|
    wants.html { erb :batteries } # html
    wants.json { 
      @batteries.all.inject({}) { |hsh, obj| 
        hsh[obj.id] = obj.to_my_json
        hsh
      }.to_json
    } 
  end
end 
```

当我正常运行 Sinatra 时，这非常有效，如下所示：

```
$ ruby ws_app.rb
== Sinatra/1.3.2 has taken the stage on 4567 for development with backup from Thin
>> Thin web server (v1.3.1 codename Triple Espresso)
>> Maximum connections set to 1024
>> Listening on 0.0.0.0:4567, CTRL+C to stop 
```

然后去这里：

```
http://0.0.0.0:4567/battery/5.json 
```

我得到了我期待的 JSON：

```
{:i_battery_manager_id=>1, :c_battery_number=>"5", :c_battery_state=>"3", :c_voltage_byte=>"145", :i_voltage_int=>191, :i_temperature=>107, :i_resistance=>81, :i_capacity=>228, :i_cell_balancing_duration=>127, :i_total_cell_balancing_duration=>37, :i_age=>111, :i_time_to_service=>211} 
```

但我需要将它部署在切诺基网络服务器上，所以我想为此制作一个机架 config.ru 文件......

所以我有一个文件 mpthmiws.rb 包含

```
load 'ws_app.rb'

MPTHMI.run 
```

还有一个 config.ru 文件，其中包含

```
load 'mpthmiws.rb'

run MPTHMI.new 
```

当我跑

```
$ rackup config.ru 
>> Thin web server (v1.3.1 codename Triple Espresso)
>> Maximum connections set to 1024
>> Listening on 0.0.0.0:9292, CTRL+C to stop 
```

去这里：

```
http://0.0.0.0:9292/battery/1.json 
```

但后来我得到了著名的，“Sinatra 不知道这个小曲 - 尝试 get '/battery/1.json' do "Hello World" end

如果我从控制器/BatteryController.rb 文件中获取第一条路由并将其放在 ws_app.rb 文件中的 HMIMPT 类中，如下所示：

```
require 'rubygems'
require 'sinatra'
require 'sinatra/respond_to'
require 'dm-core'
require 'dm-migrations'
require 'dm-timestamps'
require 'json'
require 'csv'

load 'models/Battery.rb'

Sinatra::Application.register Sinatra::RespondTo
DataMapper::setup(:default,"sqlite3://#{Dir.pwd}/mpt_hmi.sqlite3")

class MPTHMI  < Sinatra::Base

   get '/battery/:id' do 
     @battery = Battery.get(params[:id])
     respond_to do |wants|
       wants.html { erb :battery } # html
       wants.json { @battery.to_my_json.to_s } # json
     end
  end

end 
```

我收到此错误：

```
undefined method `respond_to' for #<MPTHMI:0x00000001240a80> 
```

我该如何解决这个问题？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T10:34:33.450

First of all, that thing with mpthmiws.rb and config.ru is overly complicated. Delete mpthmiws.rb and use this config.ru for use with `rackup config.ru`:

```
require './ws_app'

run MPTHMI 
```

If you want to run the App with plain old `ruby ws_app.rb`, use this run.rb file:

```
require './ws_app'

MPTHMI.run! 
```

Which brings us to the next point: NEVER EVER USE `load`! It executes the code in the loaded file, but it does not bring over any defined variables, functions etc. Use `require` instead! Here you must prefix the path with `./` or add `./` to `$LOAD_PATH`, but in turn you can omit the `.rb` extension.

Next is your BatteryController.rb file. It should look like this: require 'sinatra/respond_to'

```
class BatteryController < Sinatra::Base
  register Sinatra::RespondTo

  get '/battery/:id' do 
     # ...
  end

  get '/batteries' do 
    # ...
  end
end 
```

And this is also the point where you `register` your extensions — in the class where you need it.

Now that we understand how `load` works, you may already have noticed that you were not actually loading the `get` blocks into the `MPTHMI` class, but rather executing them outside of the class. That is the only reason why your app worked anyway with plain old `ruby ws_app.rb`!

You can properly include your controller into a class with `use`:

```
# require all your gems
# ...

require './models/Battery'
require './controller/BatteryController'

DataMapper::setup(:default,"sqlite3://#{Dir.pwd}/mpt_hmi.sqlite3")

class MPTHMI < Sinatra::Base
    use BatteryController
end 
```

You can also leave off the `register` in here. Feel free to comment if you have further questions!

* * *

And here's the full diff:

```
diff --git a/config.ru b/config.ru
index eaa15fe..1568544 100644
--- a/config.ru
+++ b/config.ru
@@ -1,3 +1,3 @@
-load 'mpthmiws.rb'
+require './ws_app'

-run MPTHMI.new
+run MPTHMI
diff --git a/controller/BatteryController.rb b/controller/BatteryController.rb
index 31e4910..c500c48 100644
--- a/controller/BatteryController.rb
+++ b/controller/BatteryController.rb
@@ -1,20 +1,27 @@
-get '/battery/:id' do 
-   @battery = Battery.get(params[:id])
-   respond_to do |wants|
-     wants.html { erb :battery } # html
-     wants.json { @battery.to_my_json.to_s } # json
-   end
-end
+require 'sinatra/respond_to'

-get '/batteries' do 
-  @batteries = Battery.all
-  respond_to do |wants|
-    wants.html { erb :batteries } # html
-    wants.json { 
-      @batteries.all.inject({}) { |hsh, obj| 
-        hsh[obj.id] = obj.to_my_json
-        hsh
-      }.to_json
-    } 
+class BatteryController < Sinatra::Base
+  register Sinatra::RespondTo
+  
+  get '/battery/:id' do 
+     @battery = Battery.get(params[:id])
+     respond_to do |wants|
+       wants.html { erb :battery } # html
+       wants.json { @battery.to_my_json.to_s } # json
+     end
   end
-end
+
+  get '/batteries' do 
+    @batteries = Battery.all
+    respond_to do |wants|
+      wants.html { erb :batteries } # html
+      wants.json { 
+        @batteries.all.inject({}) { |hsh, obj| 
+          hsh[obj.id] = obj.to_my_json
+          hsh
+        }.to_json
+      } 
+    end
+  end
+
+end
\ No newline at end of file
diff --git a/mpt_hmi.sqlite3 b/mpt_hmi.sqlite3
index e69de29..9897cd9 100644
Binary files a/mpt_hmi.sqlite3 and b/mpt_hmi.sqlite3 differ
diff --git a/mpthmiws.rb b/mpthmiws.rb
deleted file mode 100644
index 87f3406..0000000
--- a/mpthmiws.rb
+++ /dev/null
@@ -1,3 +0,0 @@
-load 'ws_app.rb'
-
-MPTHMI.run
diff --git a/ws_app.rb b/ws_app.rb
index 1cab867..4a6e332 100644
--- a/ws_app.rb
+++ b/ws_app.rb
@@ -1,19 +1,18 @@
 require 'rubygems'
 require 'sinatra'
-require 'sinatra/respond_to'
 require 'dm-core'
 require 'dm-migrations'
 require 'dm-timestamps'
 require 'json'
 require 'csv'

-load 'models/Battery.rb'
+require './models/Battery'
+require './controller/BatteryController'

-Sinatra::Application.register Sinatra::RespondTo
 DataMapper::setup(:default,"sqlite3://#{Dir.pwd}/mpt_hmi.sqlite3")

 class MPTHMI  < Sinatra::Base
-
-    load 'controller/BatteryController.rb'
+    
+    use BatteryController

 end 
```

# javascript - 使子 div 在点击时可见

> ID：11245987
> 
> 赞同：0
> 
> 时间：2012-06-28T13:41:11.767
> 
> 标签：javascript, wordpress

请编辑我的代码以使其正常工作。

为最新版本编辑。

这是我所拥有的：

```
<body>
<!-- visibility toggle -->
<script type="text/javascript">
<!--
function toggle_visibility()
    {
       if(document.getElementById(window.event.srcElement.id+'menu').style.display=='block'){
            document.getElementById(window.event.srcElement.id+'menu').style.display='none';
        }
        else{ 
            document.getElementById(window.event.srcElement.id+'menu').style.display='block';
        }
    };
//-->
</script> 
```

这是我的 div（经过编辑以准确显示我所拥有的）

```
<ul class="lyrics"><h3>ALL LYRICS</h3>
    <?php while ( have_posts() ) : the_post(); ?>   
        <li ><a id="links" href="#" onclick="toggle_visibility();"><?php the_title(); ?></a>
            <div id="linksmenu"><?php the_content();?></div>
        </li>
    <?php endwhile; // End the loop. Whew. ?>
</ul> 
```

以下是发生的情况：无论我单击哪个链接，都只会显示与最后一个“the_content”相关联的文本。

这是我需要的：最初所有的“子”div 都不可见。当我单击“标题 1”链接时，“子文本 1”将变为可见。当我单击“标题 2”链接时，“子文本 2”将变为可见，“子文本 1”将变为不可见。

这将在 WordPress 博客中，因此标题 div 的数量会发生变化。永远只有一个孩子。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T13:58:47.887

It is doing this because you are calling `the_content()` twice. I am assuming your file looks like:

```
<?php get_header();
if ( have_posts() ) : while ( have_posts() ) : the_post(); ?>
<ul> 
<li class="main"><a href="#" title="Title 1"><?php the_title(); ?></a>   <div class="child"><?php the_content(); ?></div> </li> 
<li class="main"><a href="#" title="Title 2"><?php the_title(); ?></a>   <div class="child"><?php the_content(); ?></div> </li>  <ul> 
<?php endwhile; else: ?>
<p><?php _e('Sorry, no posts matched your criteria.'); ?></p>
<?php endif; ?> 
```

You need to have two loops, but I can't supply detail without seeing more code. Read about [multiple loops](http://codex.wordpress.org/The_Loop#Multiple_Loops).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T15:04:23.013

`div`无论您单击何处，都会切换第一个的原因是因为您使用了硬编码的 id `foo`。传递`this`给`toggle_visibility`而不是文字`'foo'`和内部`toggle_visibility`函数，找到要切换的 div（这将是传递参数的第一个子项）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T15:09:32.267

丢弃参数并使用触发事件的元素的 id 构建要设置为可见/不可见的 id。

```
 function toggle_visibility()
        {
            if(document.getElementById(window.event.srcElement.id+'menu').style.display=='block'){
                document.getElementById(window.event.srcElement.id+'menu').style.display='none';
            }
            else{ 
                document.getElementById(window.event.srcElement.id+'menu').style.display='block';
            }
        }; 
```

只要你想展示的东西总是有 id+'menu' 之类的，你就可以用函数来展示它。（注意父母有 id`links`而孩子有 id `linksmenu`）

```
<ul class="lyrics"><h3>ALL LYRICS</h3>
    <?php while ( have_posts() ) : the_post(); ?>   
    <li ><a id="links" href="#" onclick="toggle_visibility();"><?php the_title(); ?></a>
      <div id="linksmenu"><?php the_content();?></div>
    </li>
    <?php endwhile; // End the loop. Whew. ?>
</ul> 
```

# mysql - 关于分组 2 列的 SQL 选择查询

> ID：11245989
> 
> 赞同：4
> 
> 时间：2012-06-28T13:41:19.350
> 
> 标签：mysql, sql, select, group-by

我正在努力解决这个问题 - 看起来很简单

下表捕获了哪个用户观看了哪个视频

```
topic_user_id | 主题ID | 用户身份
     1 | 10 | 3
     2 | 10 | 4
     3 | 11 | 5
     4 | 11 | 3
     5 | 12 | 6
     6 | 13 | 6
     7 | 14 | 7
     8 | 11 | 8
     9 | 11 | 9
     10 | 14 | 10
     11 | 15 | 11
     12 | 16 | 11
     13 | 17 | 11

```

现在要找出有多少用户观看了特定视频 - 我有以下查询。

**有多少用户观看了特定视频**

```
从 topic_user 中选择 count(distinct(user_id)) 作为“用户数”，topic_id
其中 user_id 不为空
按 topic_id 分组

```

输出

```
用户数量 | topic_id
    2 | 10     
    4 | 11     
    1 | 12     
    1 | 13     
    2 | 14     
    1 | 15     
    1 | 16     
    1 | 17     

读作：2 位用户观看了主题 10 ，4 位用户观看了主题 11 等等

```

这工作正常 - 但我正在寻找的是找到：

**有多少用户观看了 1 个视频
有多少用户观看了 2 个视频
有多少用户观看了 3 个视频**

输出应该类似于

```
用户数量 | 观看的视频数
      6 | 1
      2 | 2
      1 | 3

阅读为 - 6 人仅观看了 1 个视频，2 人观看了 2 个视频，依此类推。

```

需要一些帮助。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T13:48:45.327

可能有更简单的方法，但子查询会起作用

```
select
    videos as 'Number of videos',
    count(user_id) as 'Num of Users'
from (
   select
        count(distinct(topic_id)) as videos,
        user_id from topic_user
   group by
        user_id
 ) sub
 group by
    videos 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T14:12:00.777

```
select u.n as `Number of Video watched`, count(t.user_id)
from
    (select user_id, count(*) as `cnt`
    from topic_user 
    group by user_id) t INNER JOIN(
        SELECT 1 as `n` FROM DUAL 
        UNION 
        SELECT 2 as `n` FROM DUAL 
        UNION
        SELECT 3 as `n` FROM DUAL) u ON u.n = t.cnt
group by u.n 
```

小提琴：[http ://sqlfiddle.com/#!2/844ee/15](http://sqlfiddle.com/#!2/844ee/15)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T14:05:49.750

尝试这个

```
SELECT videos AS `Number of videos`,COUNT(user_id) AS `Num of Users`
FROM (SELECT COUNT(DISTINCT(topic_id)) AS videos,user_id FROM topic_user
GROUP BY user_id) sub_query
GROUP BY
videos 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-28T13:48:26.587

尝试这个：：

```
Select first_table.count(distinct(user_id))  as 'Number of Users', SUM(Count(topic_id))
from
(select count(distinct(user_id)) as 'Number of Users',topic_id from topic_user
where user_id is not null
group by topic_id) as first_table group by Count(topic_id) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-28T14:14:23.630

“有多少用户观看了 n 个视频”可以解释为两种方式：

1) 无论标题如何，有多少用户观看了 n 个视频？同一视频标题可能已被观看两次。

```
select videoCount, count(*) as userCount
  from (
    select count(*) as videoCount
      from topic_user
    group by user_id
  ) t
 group by videoCount 
```

2) 有多少用户观看了 n 个不同的视频标题。

```
select videoCount, count(*) as userCount
  from (
    select count(distinct topic_id) as videoCount
      from topic_user
    group by user_id
  ) t
 group by videoCount 
```

# z3 - SMT求解器中约束加强的效率

> ID：11245992
> 
> 赞同：4
> 
> 时间：2012-06-28T13:41:24.800
> 
> 标签：z3, smt

解决优化问题的一种方法是使用 SMT 求解器来询问是否存在（坏）解决方案，然后逐步添加更严格的成本约束，直到该命题不再可满足。例如，[http:](http://www.lsi.upc.edu/~oliveras/espai/papers/sat06.pdf) //www.lsi.upc.edu/~oliveras/espai/papers/sat06.pdf和[http://isi.uni-bremen.de/agra/doc/konf/讨论了这种方法08_isvlsi_optprob.pdf](http://isi.uni-bremen.de/agra/doc/konf/08_isvlsi_optprob.pdf)。

但是，这种方法*有效*吗？即，求解器在尝试使用附加约束求解时是否会重用来自先前解决方案的信息？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-28T21:09:36.017

求解器可以重用在尝试解决以前的查询时学到的引理。请记住，每当您执行`pop`所有引理（自相应`push`的 . 因此，要实现这一点，如果您需要撤回断言，您必须避免`push`和命令并使用“假设”。`pop`在下面的问题中，我描述了如何在 Z3 中使用“假设”： Z3 中的 [软/硬约束](https://stackoverflow.com/questions/8439556/soft-hard-constraints-in-z3)

关于效率，这种方法并不是对每个问题域最有效的方法。另一方面，它可以在大多数 SMT 求解器之上实现。此外，伪布尔求解器（0-1 整数问题的求解器）成功地使用了类似的方法来解决优化问题。

# grails - grails / log4j / 转换模式 / %throwable

> ID：11245993
> 
> 赞同：1
> 
> 时间：2012-06-28T13:41:25.033
> 
> 标签：grails, log4j

关于我的“依赖报告”，我使用 log4j 1.2.16。

我的转换模式是`'%d{yyyy-MM-dd HH:mm:ss,SSS} %-5p %c: %m%n %throwable{short}'`

但`%throwable`未被识别，而是日志行包含

`'...hrowable{short}...'`

任何想法 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T14:08:45.813

我假设这是在附加程序中？你在[使用](http://logging.apache.org/log4j/1.2/apidocs/org/apache/log4j/EnhancedPatternLayout.html) `EnhancedPatternLayout`吗（我相信你需要那个`%throwable{n}`）

```
console name: 'stdout', layout: new EnhancedPatternLayout(conversionPattern: "%d{yyyy-MM-dd HH:mm:ss,SSS} %-5p %c: %m%n %throwable{short}") 
```

# vba - 宏格式化 csv 文件

> ID：11245995
> 
> 赞同：0
> 
> 时间：2012-06-28T13:41:27.617
> 
> 标签：vba, excel

我正在使用宏生成一个包含 3 列（A、B、C）的文件并将其保存到 csv 中。除了保存时，我一切正常。该文件保存正确，但它将所有行保存在数据之后的列中，每行的行中都有一个“””。我需要清理它。结束行每天都会不同，我需要从第一个打开的行中删除到工作簿的结尾。

我试过这个：

```
Selection.End(xlDown).Select
Range("A100:C100").Select
Range(Selection, ActiveCell.SpecialCells(xlLastCell)).Select
Selection.Delete Shift:=xlUp 
```

但是单元格引用每天都会改变，所以我尝试了：

```
Selection.End(xlDown).Select
Range("A:C").Select
Range(Selection, ActiveCell.SpecialCells(xlLastCell)).Select
Selection.Delete Shift:=xlUp 
```

现在它会删除所有数据。任何帮助都会很棒下面是我的数据及其外观的示例。我需要去掉所有的“””，这些只有在我在记事本中查看时才会出现，但我使用的程序将“””视为数据

```
 6/27/2012 0:00,aaaa,-0.011111
 6/27/2012 0:00,bbbb,-0.22222
 6/27/2012 0:00,cccc,-0.03333
 6/27/2012 0:00,ddddd,-0.0044
 6/27/2012 0:00,xxxxxx,-0.0555
 ' '
 ' '
 ' '
 ' '
 ' ' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T14:11:04.917

试试这段代码用“”清除不必要的行

```
Dim rng As Range
Set rng = Columns(1).Find("""")
Range(rng, rng.End(xlDown).End(xlToRight)).EntireRow.Delete 
```

只要一行中总是有超过 1 个**"**，这将起作用，如果只有 1 个，它会变得有点棘手。

# sas - 如何恢复 SAS 中的默认 html 输出目标？

> ID：11245996
> 
> 赞同：1
> 
> 时间：2012-06-28T13:41:27.727
> 
> 标签：sas

这一定很简单，但我找不到：

如何恢复 SAS 9.3 中的默认输出目标？

与 9.2 不同的是，它是 HTML。

换句话说，哪个命令使该语句无效。

```
ods html close; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T13:59:36.267

您可以使用以下命令重新打开 HTML

消耗臭氧层物质 HTML；

但是您可能还需要其他选项...例如文件名

ODS html 文件="我的文件.htm";

[消耗臭氧层物质 HTML](http://www2.sas.com/proceedings/sugi29/172-29.pdf)

# php - 当参数包含 : 或 \ 时，url 后面的参数不会传递给被调用函数

> ID：11245997
> 
> 赞同：1
> 
> 时间：2012-06-28T13:41:27.717
> 
> 标签：php, javascript, cakephp

我正在将用户输入的关键字传递给 cakephp fron Javascript 中的函数 search_result($input)，例如[www.example.com/search_result/input](http://www.example.com/search_result/input) from Javascript where input is from user 当输入包含`:`as时会出错`no arguments found for search_result`。它适用于其他输入。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T13:45:28.513

您可能希望在将搜索词从 Javascript 传递给 PHP 之前对其进行编码（我假设这意味着您正在使用 AJAX）。

您可以使用以下方法执行此操作`encodeURIComponent`：

```
encodeURIComponent(term); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T17:14:49.227

除了 URI 编码之外，问题在于`:`用于分隔 cake 参数，因此当您在搜索查询中使用它时，cake 认为它是一个参数。

[但是，书中](http://book.cakephp.org/2.0/en/development/routing.html#connecting-routes)有一个修复，显然，您可以使用“尾星语法”：

```
Router::connect(
    '/search_result/**', // notice two stars instead of one
    array('controller' => 'search', 'action' => 'search_result')
); 
```

这应该将之后的**所有内容**`/search_result/`作为单个参数传递。

希望有帮助。

# php - 无需 Imagick 或 Ghostscript 创建 PDF 缩略图

> ID：11245999
> 
> 赞同：3
> 
> 时间：2012-06-28T13:41:33.440
> 
> 标签：php, pdf, thumbnails, ghostscript, imagick

我在一家非常严格的托管公司有一个网站，他们没有安装 imagick 或 ghostscript，也不让我安装，我需要从 PDF 文件的第一页生成缩略图。

有人知道任何课程或可以帮助我的东西吗？

提前致谢。