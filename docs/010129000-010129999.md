# StackOverflow 问答 10129000-10129999

# mysql - 如何使用 MySQL（如 SqlBulkCopy）和 Linq to Entities 进行批量插入

> ID：10129001
> 
> 赞同：4
> 
> 时间：2012-04-12T17:51:23.273
> 
> 标签：mysql, linq, entity-framework, linq-to-entities, entity

您好我需要一种将大量记录插入 MySQL 数据库表的方法。

我正在使用 Linq to Entities 并且使用 foreach 循环和插入每条记录的方法太慢了。

例如

```
foreach(var item in items){
    context.Add(item);
    context.SubmitChanges();
} 
```

.net 连接器中是否有类似 MySql 命令的方法：LOAD DATA INFILE？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T20:17:34.747

实体框架（和 Linq-to-entities）不支持批量插入。批量插入必须始终通过数据库服务器的本机功能来完成。要从`LOAD DATA INFILE`.NET 连接器检查[`MySqlBulkLoader`类](http://dev.mysql.com/doc/refman/5.1/en/connector-net-programming-bulk-loader.html)中使用。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-14T17:57:24.213

这篇文章看起来很有希望。我正在我自己的应用程序中尝试一下。另外，它不会干扰您的设计器，因为它是一个部分类。

[http://www.codeproject.com/Tips/297582/Using-bulk-insert-with-your-linq-to-sql-datacontex](http://www.codeproject.com/Tips/297582/Using-bulk-insert-with-your-linq-to-sql-datacontex)

此外，这是 MSDN 上的一个类，它做同样的事情：

[http://archive.msdn.microsoft.com/LinqEntityDataReader](http://archive.msdn.microsoft.com/LinqEntityDataReader)

我在这个 SO 帖子中重新实现了该功能：

[使用 linq-to-sql 进行批量插入](https://stackoverflow.com/questions/9220901/bulk-insert-with-linq-to-sql/11974858#11974858)

# html - 在 jsFiddle 中， 不显示前导数字，为什么？

> ID：10129006
> 
> 赞同：0
> 
> 时间：2012-04-12T17:51:56.767
> 
> 标签：html, css, html-lists, jsfiddle

我的CSS代码：

```
ol {
    list-style-type: decimal;
} 
```

我的 HTML 代码：

```
<ol>
    <li>This is the first.</li>
    <li>This is the second.</li>
</ol> 
```

[我的代码在这里。](http://jsfiddle.net/unimous/XMrbu/2/)

为什么他们不显示前导数字？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T17:56:01.493

这是小提琴网站本身造成的。如果您在列表节点上使用 DOM 检查器，您会看到 Fiddle css 样式表 (normalize.css) 正在覆盖您自己的样式表。

如果取消选中 Fiddle 窗口左侧的“规范化 CSS”框，列表元素将按预期编号。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T17:57:42.777

它本身正在显示，只是由于 jsfiddle 的 CSS 将边距重置为 0 的方式不可见。试试这个：

```
ol {
    list-style-type: decimal;
    margin: 0 2em;
} 
```

链接：http: [//jsfiddle.net/XMrbu/7/](http://jsfiddle.net/XMrbu/7/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T17:59:24.830

事实上，你**不需要**使用

```
ol {
    list-style-type: decimal;
} 
```

因为它是默认值。`Normalized CSS`导致问题。

# mobile - Opera Mobile Emulator 上的自定义字体

> ID：10129014
> 
> 赞同：0
> 
> 时间：2012-04-12T17:52:42.227
> 
> 标签：mobile, fonts, android-emulator, emulation, opera

我正在开发一个即将推出的响应式页面。它在 iPad 或 iPhone 等多种设备上看起来相当不错，但要在多个平台上测试它们，我正在使用**Opera Mobile Emulator**。

它没有检测到从 CSS 中使用的 Google Font API 检索到的自定义字体。而是显示后备字体是 CSS 中的默认字体。问题出在模拟器中，我看不到字体是否已加载或未使用资源时间线。

正在测试三星 Galazy Nexus 的模拟器。

这背后的原因可能是什么？任何人都可以帮忙吗？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T11:35:13.777

从这个页面我可以看出：[http](http://dev.opera.com/articles/view/opera-mini-web-content-authoring-guidelines/#typography) ://dev.opera.com/articles/view/opera-mini-web-content-authoring-guidelines/#typography Opera mini 不支持自定义字体，具体来说：

> 设置 font-family 将无效

# c# - 从其他进程访问元素

> ID：10129017
> 
> 赞同：1
> 
> 时间：2012-04-12T17:52:46.547
> 
> 标签：c#, interprocess

我想从与我的程序无关的窗口中“读取”信息。如果我有进程 ID 和窗口句柄：

```
Process Proc = Process.GetProcessById(ProcID);
IntPtr hdl = Proc.MainWindowHandle; 
```

我有来自 spy++ 的信息告诉我，我感兴趣的元素的控件 ID 是 00000003EA，我如何使用 C# 访问它？

谢谢你的帮助！

编辑_____________________________________

如果有人感兴趣，这就是我的工作方式：

```
Process p = Process.GetProcessById(ProcID);
IntPtr hdl = p.MainWindowHandle;
byte[] buffer = new byte[1024]; //Assume that 1024 bytes are enough! Better would be to get the text length..
UTF8Encoding enc = new UTF8Encoding();
uint Test = GetDlgItemText((int)hdl, Convert.ToInt32("0x000003EA", 16), buffer, 1024);
string TextFromOtherWindow = enc.GetString(buffer);

[DllImport("user32.dll")]
public static extern uint GetDlgItemText(
 int hDlg,           //A handle to the dialog box that contains the control. 
 int nIDDlgItem,     //The identifier of the control whose title or text is to be retrieved. 
 byte[] lpString,      //The buffer to receive the title or text. 
 int nMaxCount       //The maximum length, in characters, of the string to be copied to the 
 //buffer pointed to by lpString. If the length of the string, including 
 //the null character, exceeds the limit, the string is truncated. 
); 
```

`byte[] buffer`是来自另一个窗口的文本被写回的缓冲区。我假设文本长度不超过 1024 字节，但最好获得实际大小……</p>

就编码而言，不同的编码可能更适合您的需求。

十六进制的句柄需要转换为整数：`Convert.ToInt32("0x000003EA", 16)`

**GetDlgItemText**最适合（我认为）我获取静态文本的要求，而不是“<strong>SendMessage”和“<strong>WM_GETTEXT”。

感谢所有帮助我指出正确方向的人！

GetDlgItemText 的来源：[MSDN](http://msdn.microsoft.com/en-us/library/windows/desktop/ms645489%28v=vs.85%29.aspx)

编辑_________________________________

嗯。我说得太早了......每次启动程序时都会更改元素ID。我在[Persistent Element Identification](https://stackoverflow.com/questions/10161970/persistent-element-identification)提出了一个新问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T18:33:42.287

您最好的选择是使用[UI 自动化](http://msdn.microsoft.com/en-us/library/ms747327.aspx)。

虽然这并不完美，因为许多应用程序不支持它。

也看看我的[这个答案](https://stackoverflow.com/questions/9503027/pinvoke-setfocus-to-a-particular-control/9547099#9547099)，类似的问题，可能有助于能够访问/“附加”到其他进程线程/队列等。

编辑：（我忘了在我的其他帖子上链接，刚刚更正了：）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T18:15:03.790

我会研究类似这样的 [托管间谍 ++](http://msdn.microsoft.com/en-us/magazine/cc163617.aspx)

这也可能有助于[在 C# 中查找窗口](https://stackoverflow.com/questions/9508514/create-the-function-find-window-of-spy-in-c-sharp)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T17:54:12.663

WCF，Webservices 使进程间通信变得容易。

# c# - 使用 XDocument 解析 XSD

> ID：10129022
> 
> 赞同：4
> 
> 时间：2012-04-12T17:53:17.330
> 
> 标签：c#, linq, xsd, linq-to-xml

我有一段时间试图解析模式文件......希望有人能提供帮助。

这是xsd的样子

```
 <xs:element name="E1">
    <xs:complexType>
        <xs:sequence>
            <xs:element name="E2" nillable="true" minOccurs="0">
                <xs:complexType>
                    <xs:sequence>
                        <xs:element name="E3" minOccurs="0" maxOccurs="unbounded">
                            <xs:complexType>
                                <xs:sequence>
                                    <xs:element name="E4" nillable="true" minOccurs="0">
                                        <xs:complexType>
                                            <xs:sequence>
                                                <xs:element name="E5" minOccurs="0" maxOccurs="unbounded">
                                                    <xs:complexType>
                                                        <xs:attribute name="A1" type="xs:integer" use="optional" />
                                                        <xs:attribute name="A2" type="xs:string" use="optional" />
                                                        <xs:attribute name="A3" type="xs:string" use="optional" />\
                                                    </xs:complexType>
                                                </xs:element>
                                            </xs:sequence>
                                        </xs:complexType>
                                    </xs:element>
                               </xs:complexType>
                            </xs:element>
                         </xs:complexType>
                     </xs:element> 
```

这并不完整，但足以理解这个想法。这是我试图获取元素名称的代码，后跟任何属性（如果存在），但这仅返回元素名称。

```
var xs = XNamespace.Get("http://www.w3.org/2001/XMLSchema");
var doc = XDocument.Load(sourceName + sourceApi + "Input.txt");
        foreach (var el in doc.Descendants(xs + "element"))
        {
            Trace.WriteLine("ANDY ------ " + el.Attribute("name").Value);
            foreach (var attr in el.Elements(xs + "attribute"))
            {
                Trace.WriteLine(attr.Attribute("name").Value);
            }
        } 
```

这是输出

安迪 ----- E1 安迪 ----- E2 安迪 ----- E3 安迪 ----- E4 安迪 ----- E5

我希望它在哪里输出

安迪 ----- E1 安迪 ----- E2 安迪 ----- E3 安迪 ----- E4 安迪 ----- E5 A1 A2 A3

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T18:13:00.717

`el.Elements`仅检查子元素，因此它不返回任何内容。您应该使用`Descendants`或指定完整路径`el.Elements(xs + "complexType").Elements(xs + "attribute")`：

```
var xs = XNamespace.Get("http://www.w3.org/2001/XMLSchema");
var doc = XDocument.Load(sourceName + sourceApi + "Input.txt");
foreach (var el in doc.Descendants(xs + "element"))
{
    Trace.WriteLine("ANDY ------ " + el.Attribute("name").Value);
    foreach (var attr in el.Elements(xs + "complexType").Elements(xs + "attribute"))
    {
        Trace.WriteLine(attr.Attribute("name").Value);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T18:12:51.317

我发现反序列化架构的最简单方法是使用 Visual Studio XSD 命令行实用程序。在 Visual Studio 命令提示符中，您可以输入如下内容：

> xsd MySchema.xsd /CLASSES

/CLASSES 开关用于 xsd 包含多个类的情况。

在这种情况下，输出将是一个名为“MySchema.cs”的文件。这将包含一个可以完成 XSD 工作的 XmlSerializer 类。

（请注意，.xsd 文件本身可以通过使用 .xml 文件的名称作为输入调用相同的实用程序来生成。）

# css - 在 div 元素上对齐文本

> ID：10129024
> 
> 赞同：0
> 
> 时间：2012-04-12T17:53:28.067
> 
> 标签：css, html

我希望 2012 年在第一张地图的左侧（几乎在它所在的位置），而 2010 年在第二张地图的左侧。我无法发布屏幕截图，因为我是新用户，但它们位于页面的左侧和右侧。

这是我的代码：

```
<b>2012<b>
<div id="map_canvas2" style="width:25%; height:25%"></div>
<b>2010<b>
<div id="map_canvas" style="width:25%; height:25%"></div> 
```

搜索后我看到你必须用 CSS 来做，但是怎么做呢？我觉得如果我在 CSS 中将某些内容设置为向左，则所有文本都向左。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T04:32:28.380

我认为你应该这样编码： -

**HTML**

```
<div id="map_canvas"><b>2012<b></div>
<div id="map_canvas2"><b>2010<b></div> 
```

**CSS**

```
#map_canvas {
float:left;
background:red;
width:300px;
height:200px;
}

#map_canvas2 {
float:right;
background:green;
width:300px;
height:200px;
} 
```

看演示：- [http://jsfiddle.net/3XBNa/1/](http://jsfiddle.net/3XBNa/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T17:56:20.407

把它放在css代码中。

```
<style type="text/css">
   b,div{float:left;}
   .cls{clear:both;}
</style> 
```

HTML 代码：

```
<b>2012</b>
<div id="map_canvas2" style="width:25%; height:25%">div 1</div>
    <br class="cls"/>
<b>2010</b>
    <div id="map_canvas" style="width:25%; height:25%"> div 2</div>    <br class="cls"/>
​ 
```

这应该这样做。

# perl - 为什么严格抱怨来自所需其他脚本的变量？

> ID：10129028
> 
> 赞同：0
> 
> 时间：2012-04-12T17:53:45.907
> 
> 标签：perl, require, perl-module, strict

这是 usex.pl：

```
#use strict;
require 'x.pl';
print $x; 
```

这是x.pl：

```
#use strict;
our $x = 99;
1; 
```

如图所示，它运行良好。如果我取消注释在 usesx.pl 中使用 strict 的行，我会得到

```
Global symbol "$x" requires explicit package name 
```

在 x.pl 中是否使用 strict 似乎并不重要（除非我删除了 'our' 关键字，但我对此不感兴趣。）

我对 Perl 还很陌生。为什么 strict 使 $x 在主脚本中不可见，对此的正常解决方案是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-12T18:17:09.490

两个原因。

1.  错误发生在编译时，在`require`执行之前。这很容易使用`BEGIN`.

2.  `our`是词法范围的，并且它在与 不同的词法范围（文件或块）中`print`，因此它不再有效。

整个方法从根本上说是糟糕的。这是一种更好的方法：

```
package MyConfig;
use strict;
use warnings;
use Exporter qw( import );
our @EXPORT = qw( $x );
our $x = 123;
1;

use strict;
use warnings;
use MyConfig;
print "$x\n"; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-12T18:01:05.643

呵呵，`our`因为它混合了全局和词法范围的概念，所以不容易理解。它所做的是将全局变量从`strict 'vars'`pragma 中排除，并允许在其范围内对其进行非限定访问，即封闭块或当前文件的结尾，无论先出现什么。[阅读手册中的完整（但简短）故事，](http://perldoc.perl.org/functions/our.html)也可以通过`perldoc -f our`在命令行中说来访问。

至于您的脚本，您可以通过修改变量访问器以使用包限定名称来验证手册中的话的真实性：

```
use strict;
require 'x.pl';
print $main::x; 
```

# iphone - 带有Xcode的Git，没有这样的文件或目录

> ID：10129030
> 
> 赞同：0
> 
> 时间：2012-04-12T17:53:46.530
> 
> 标签：iphone, xcode, git

我一直在四处寻找答案，但我还没有找到有用的东西。如果这很容易并且有人已经回答了这个问题，我深表歉意，因为我是 Git 新手。

发生的事情是我和我的同事都在使用一个分支。当我尝试提交时发生了冲突（老实说，我不记得它是在提交还是我何时拉入她的更改）。基本上我们都在删除未使用的文件、图像等。我经历了冲突，我认为我正确地接受了我们的两个更改，但仍然可能有一些事情搞砸了，因为我得到了

```
No such file or directory 
```

对于特定的图像。这些是我尝试过的一些事情，在我尝试了其中一个不起作用之后进行了清洁和重建。

```
- Adding the image back to the project (Xcode still thinks its missing and doesn't update it's .xcodeproj)
- git reset HEAD <file>
- git add <file> 
```

似乎没有任何效果。当我尝试 git status 时，我看到它是一个未跟踪的文件。然后我将其删除。我看到我的 .xcodeproj 是

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T18:25:03.337

$10 表示 .xcodeproj 无法识别图像的存在。Git 在正确合并 .xcodeproj 文件方面做得很差，而且由于合并错误，您经常不得不读取文件。

如有疑问，请找到可以运行的 .xcodeproj 的过去版本，将其带到您的主 HEAD 中，然后添加 .xcodeproj 中缺少的文件。

# jquery - 文本区域默认值

> ID：10129032
> 
> 赞同：1
> 
> 时间：2012-04-12T17:54:02.023
> 
> 标签：jquery, html, css

我一直在使用以下内容在文本字段中放置默认值

```
<textarea name="message" id="message" cols="30" rows="5" value="Comment"
    class="form_text text-input shadow" title="Comment"
    onblur="if (this.value == '') {this.value = 'Comment';}" 
    onfocus="if (this.value == 'Comment') {this.value = '';}">
</textarea> 
```

它部分有效。该字段最初不显示默认值，但如果您在其中单击然后退出，而不输入任何内容，它会显示“评论”。

知道如何修改它，以便在表单加载时出现“评论”。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T17:58:29.697

不要使用价值使用：

```
<textarea name="message" id="message" cols="30" rows="5"
    class="form_text text-input shadow" title="Comment"
    onblur="if (this.innerHTML == '') {this.innerHTML = 'Comment';}" 
    onfocus="if (this.innerHTML == 'Comment') {this.innerHTML = '';}">
Comment
</textarea> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-12T17:57:54.437

```
<textarea>default value</textarea> 
```

这应该够了吧。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-12T17:58:27.280

Textarea 默认文本必须包含在标签中

```
<textarea> this is my default text </textarea> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-12T18:00:52.703

该`<textarea>`元素没有`value`属性：默认值是您在打开和关闭标签之间写的内容：

```
<textarea>My default value</textarea> 
```

`.innerHTML`在 Javascript 中，您可以使用（或使用 jQuery with ）访问此文本`.val()`。

对于您试图实现的行为，您可以使用[HTML5 占位符属性](http://davidwalsh.name/html5-placeholder)并为旧浏览器使用[jQuery polyfill](https://github.com/mathiasbynens/jquery-placeholder)。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-12T17:59:40.217

textarea 具有 innerHTML 而不是 value 属性。（value="Comment" 不是设置值的正确方法）

尝试，

```
<textarea name="message" id="message" cols="30" rows="5" 
   class="form_text text-input shadow" title="Comment"  
   onblur="if (this.value == '') {this.value = 'Comment';}" 
   onfocus="if (this.value == 'Comment') {this.value = '';}">
   Comment
</textarea> 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-04-12T18:03:31.097

```
<textarea>Value</textarea> 
```

或者，如果您通过 jquery 使用 $(document).ready()，则可以在加载时通​​过 javascript 分配值。

# javascript - 更改单个元素的选定文本颜色

> ID：10129035
> 
> 赞同：2
> 
> 时间：2012-04-12T17:54:05.160
> 
> 标签：javascript, css

这可能是不可能的，但我想确认一下。

您可以使用以下命令全局更改页面的选定文本突出显示颜色

```
::selection {
    background: #cccccc;
}
::-moz-selection {
    background: #cccccc;
} 
```

但是是否可以更改 JavaScript 中单个元素的突出显示颜色？

例如，如果`s`是元素的样式属性，您可以使用更改文本和背景颜色

```
s.color = s.backgroundColor = "#cccccc"; 
```

有没有改变元素高亮颜色的样式？

这必须是老式的 JavaScript，而不是 JQuery。

**编辑：** 另外，由于性能，我需要将其更改为元素本身。CSS 类交换性能很差。用例是我不拥有的页面中的每个单词都将成为它自己的元素。在平均页面上，通过脚本添加 CSS 类需要 20-30 秒，而更改内联样式可以在 1 秒内完成。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T17:59:20.193

伪元素和伪类不在 DOM 中，但您可以使用类来实现您的结果。

所以添加一个规则，如

```
.selectionclass::-moz-selection {
    background: #cccccc;
} 
```

到您的样式表并将类名添加`selectionclass`到您的元素。

# java - HTTP 状态 404 - 请求的资源不可用

> ID：10129041
> 
> 赞同：2
> 
> 时间：2012-04-12T17:54:24.830
> 
> 标签：java, tomcat, struts2, myeclipse

在 MyEclipse IDE 中使用 Tomcat 服务器和 Struts 2 框架时，我遇到了一个反复出现的问题。我将我的程序作为服务器应用程序运行，当它运行时，默认的 index.jsp 文件将成功打开，但该应用程序的其他过去都不起作用。当尝试加载我的任何 .do 页面时，我收到以下错误：HTTP Status 404: The requested resource .... is not available。当我之前遇到这个错误时，我刚刚重新启动了服务器，一切都很好，但我现在没有同样的运气。

这是我点击运行时来自控制台的日志。

```
Apr 12, 2012 10:49:35 AM org.apache.catalina.core.AprLifecycleListener init
INFO: The Apache Tomcat Native library which allows optimal performance in production environments was not found on the java.library.path: C:\Program Files\MyEclipse\Common\binary\com.sun.java.jdk.win32.x86_1.6.0.013\bin;C:\Program Files\MyEclipse\Common\plugins\com.genuitec.eclipse.easie.tomcat.myeclipse_9.0.0.me201109141806\tomcat\bin
Apr 12, 2012 10:49:35 AM org.apache.coyote.http11.Http11Protocol init
INFO: Initializing Coyote HTTP/1.1 on http-8080
Apr 12, 2012 10:49:35 AM org.apache.catalina.startup.Catalina load
INFO: Initialization processed in 285 ms
Apr 12, 2012 10:49:35 AM org.apache.catalina.core.StandardService start
INFO: Starting service Catalina
Apr 12, 2012 10:49:35 AM org.apache.catalina.core.StandardEngine start
INFO: Starting Servlet Engine: Apache Tomcat/6.0.13
Apr 12, 2012 10:49:35 AM org.apache.catalina.loader.WebappClassLoader validateJarFile
INFO: validateJarFile(C:\Documents and Settings\username\My Documents\Workspaces\.metadata\.me_tcat\webapps\project-name\WEB-INF\lib\javax.servlet-3.0.1.jar) - jar not loaded. See Servlet Spec 2.3, section 9.7.2\. Offending class: javax/servlet/Servlet.class
log4j:WARN No appenders could be found for logger (com.opensymphony.xwork2.config.providers.XmlConfigurationProvider).
log4j:WARN Please initialize the log4j system properly.
Apr 12, 2012 10:49:37 AM org.apache.coyote.http11.Http11Protocol start
INFO: Starting Coyote HTTP/1.1 on http-8080
Apr 12, 2012 10:49:37 AM org.apache.jk.common.ChannelSocket init
INFO: JK: ajp13 listening on /0.0.0.0:8009
Apr 12, 2012 10:49:37 AM org.apache.jk.server.JkMain start
INFO: Jk running ID=0 time=0/16  config=null
Apr 12, 2012 10:49:37 AM org.apache.catalina.startup.Catalina start
INFO: Server startup in 1720 ms 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T18:15:06.147

我看不出有任何理由添加`javax.servlet-3.0.1.jar`您的类路径。由于您使用 Eclipse 构建/运行您的应用程序，因此当您将 tomcat 或任何服务器作为运行时环境添加到您的项目时，这些库依赖项将自动添加到 class-path.Simple 从项目的 lib 文件夹中删除这个 jar。这也可能有其他原因。

1.  javax.servlet-3.0.1.jar 已被添加为运行时库（在 .WAR 中）——它只在构建时需要。
2.  从 WEB-INF/lib 中删除 jar，并更新构建脚本以指向新位置。

> Servlet Spec 2.3，第 9.7.2 节被提及说 Servlet 容器（例如 Tomcat）将提供 J2EE 规范的实现类。WEB-INF/lib 目录中的 j2ee.jar（在我们的例子中是 servlet-api.jar？）试图提供相同的信息。具有特定于应用程序的实现是规范 2.3 和 Tomcat 不允许的稳定性和安全性问题。

简而言之，从您的 lib 文件夹中删除 javax.servlet-3.0.1.jar 并让容器负责为您提供这些依赖项。

要声明由容器提供的依赖项，使用 maven 将范围设置为“已提供”，这里是 pom.xml 中的条目应如何显示的示例：

```
 <dependency>
        <groupId>javax</groupId>
        <artifactId>javaee-web-api</artifactId>
        <version>6.0</version>
        <scope>provided</scope>
    </dependency> 
```

# php - 关联地图位置

> ID：10129042
> 
> 赞同：0
> 
> 时间：2012-04-12T17:54:28.843
> 
> 标签：php, gis, adobe-illustrator

我最初问了一个问题，但不清楚。这是场景：

我们有一个小区的地形图。我们还有同一地区的人口分布和描绘道路和其他人造基础设施的地区总图。我们必须使用地形图作为底图，这样当用户在地图上标记一个位置时，它就会出现在其他 2 个地图上。

关于平台使用的任何建议以及如何合并地图以在谷歌地图等浏览器上查看，从卫星视图切换到地图视图。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T18:03:36.393

这可以使用 Google 或 Bing Maps API 来完成。虽然，您需要对 javascript/地理编码/解析 Web 服务结果有很好的理解。为了完成你所需要的。

[以下是 Bing 地图开发人员资源](http://www.microsoft.com/maps/developers/web.aspx)

[这是用于熟悉其库的交互式 SDK。](http://www.bingmapsportal.com/isdk/ajaxv7#CreateMap1)

[多亏了 Mike Garza，这里有一个充满更多有用功能的手，SDK 中不包含这些功能](http://www.garzilla.net/vemaps/Draggable-Polygon-with-Bing-Maps-7.aspx)

请记住，在 v6.3 和 7.0 之间，库名称/语法发生了很大变化。

# jquery - Backbone.js：url 末尾的斜线有什么意义？

> ID：10129043
> 
> 赞同：0
> 
> 时间：2012-04-12T17:54:32.490
> 
> 标签：jquery, backbone.js

有点菜鸟的问题...

在这个函数的最后一行，我知道代码试图找出'base'的最后一个字符，然后，使用三元结构，如果它`'/'`添加空字符串，但如果不是，`/`那么它添加斜杠，如以及在任何一种情况下，id。

我不明白的部分是斜线的意义或斜线的缺失将在基数末尾。即它对 url 有什么说明，为什么我们需要确定斜线是否存在？在什么情况下会出现？什么情况下不会？

请注意，我查看了文档，但找不到对此的明确解释

```
var Document = Backbone.Model.extend({
    url : function() {
      var base = 'documents';
      if (this.isNew()) return base;
      return base + (base.charAt(base.length - 1) == '/' ? '' : '/') + this.id;
    }
}); 
```

我从以下教程中得到了这段代码，但它并没有完全解释这个问题 [http://www.jamesyu.org/2011/01/27/cloudedit-a-backbone-js-tutorial-by-example/](http://www.jamesyu.org/2011/01/27/cloudedit-a-backbone-js-tutorial-by-example/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T18:01:06.503

这个特定的实例看起来毫无意义，因为您已经知道`'documents'`最后没有斜线。如果您不知道`base`equaled `'documents'`，那么它将确保`base`and之间有一个路径分隔符`this.id`。

# ruby-on-rails - 为什么不在我的服务器上捆绑安装 railties 3.2.3？

> ID：10129044
> 
> 赞同：1
> 
> 时间：2012-04-12T17:54:34.053
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rvm, bundler, ruby-on-rails-3.2

Rails 3.2.2 在我的开发环境和服务器上都运行良好。

我正在尝试通过更改升级到 3.2.3：

```
gem 'rails', '3.2.2' 
```

到

```
gem 'rails', '3.2.3' 
```

然后运行：

```
bundle update
bundle 
```

一切顺利，直到我尝试部署到我的服务器。在部署期间，我收到以下消息：

```
An error occured while installing railties (3.2.3), and Bundler cannot continue.
Make sure that `gem install railties -v '3.2.3'` succeeds before bundling. 
```

我已登录服务器并运行 gem install railties -v '3.2.3' 命令，它可以正常工作。但是部署总是以同样的方式失败。

我已尝试删除[此处](http://www.michaelhamrah.com/blog/2010/11/rails-fixing-bundle-no-metadata-found-issues/)显示的缓存目录，但我不确定我是否正确执行此操作。我在服务器和我的开发环境上使用 rvm。

任何人都可以帮我指出这个方向吗？

这是我的 deploy.rb 文件：

```
require "bundler/capistrano"

$:.unshift(File.expand_path('./lib', ENV['rvm_path'])) # Add RVM's lib directory to the load path.
require "rvm/capistrano"                  # Load RVM's capistrano plugin.

set :application, "teamsite"
set :repository,  "git@github.com:user/teamsite.git"
set :deploy_to, "/home/website.com/rails/application/"
set :user, "website.com"
set :scm, :git
set :use_sudo, false
default_run_options[:pty] = true
set :branch, "master"
set :scm_verbose, true
set :deploy_via, :remote_cache
ssh_options[:forward_agent] = true

task :staging do
  role :web, "staging.website.com"
  role :app, "staging.website.com"
  role :db,  "staging.website.com", :primary => true
end

namespace :deploy do
  task :start do ; end
  task :stop do ; end
  task :restart, :roles => :app, :except => { :no_release => true } do
    run "#{try_sudo} touch #{File.join(current_path,'tmp','restart.txt')}"
  end

  namespace :assets do
    task :precompile, :roles => :web, :except => { :no_release => true } do
      from = source.next_revision(current_revision)
      if capture("cd #{latest_release} && #{source.local.log(from)} vendor/assets/ app/assets/ | wc -l").to_i > 0
        run %Q{cd #{latest_release} && #{rake} RAILS_ENV=#{rails_env} #{asset_env} assets:precompile}
      else
        logger.info "Skipping asset pre-compilation because there were no asset changes"
      end
    end
  end
end

namespace :customs  do
  task :create_symlink, :roles => :app do
    run <<-CMD
      ln -nfs #{shared_path}/files #{release_path}/files
    CMD

    run <<-CMD
      ln -nfs #{shared_path}/drawings #{release_path}/drawings
    CMD

    run <<-CMD
      ln -nfs #{shared_path}/photos #{release_path}/photos
    CMD
  end
end

after "deploy:create_symlink","customs:create_symlink"
after "deploy", "deploy:cleanup" 
```

**更新**

我最终能够通过部署到不同的用户来解决这个问题。但问题仍然存在：如何为老用户清除 gem 缓存？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T22:23:24.567

你可以使用

```
gem pristine --all --no-extensions 
```

从头开始重新安装所有的宝石。如果您在主机上使用乘客，则需要找出该 gem 缓存目录的真正位置。查看 .bashrc 的 GEM_PATH 值，我在 Dreamhost 上的是：

```
export GEM_PATH="$GEM_HOME:/usr/lib/ruby/gems/1.8" 
```

或者，如果您在服务器上使用 RVM，则该路径可能是 rvm 正在使用的当前版本。

# c++ - 与 Microsoft 相比，Linux CRunTime 库如何处理

> ID：10129047
> 
> 赞同：3
> 
> 时间：2012-04-12T17:54:47.020
> 
> 标签：c++, linux, crt

我在使用 Microsoft 的 CRT 时遇到了很多概念问题。对于任何项目，您必须编译所有必需的库以链接到相同版本的 CRT。

第一个问题是当您的项目静态链接到 CRT (/MT) 时。然后所有依赖库也必须静态链接自己的 CRT。所以每个库都有自己的版本——例如——malloc()。如果您去年在系统 A 上编译了其中一个库，则该 CRT 版本可能与您当前在另一个带有 Service Pack 3+ 的系统 B 上使用的版本不同。因此，如果您要释放由库分配的对象，您可能会遇到问题。

所以看起来动态链接的 CRT 是要走的路（/MD）。使用 dll，所有库都将获得系统上 CRT 的当前实现。除了 Microsoft 的 Side by Side 机制之外，情况并非如此。相反，您会获得在您编译的库上标记的 CRT 版本，并且该版本的 DLL 将提供给该库。因此，可能会发生与我之前描述的完全相同的问题。您在一年前针对一个 CRT 在系统 A 上编译了一个库。一年后有一个升级的新版本。您的主程序使用一个版本的 CRT 获取 DLL，该库使用另一个版本的 CRT 获取 DLL，可能会出现同样的问题。

所以你会怎么做？我意识到跨库内存分配是不受欢迎的。但是您可以忽略 malloc 示例并提出另一个示例。您是否让每个开发人员在他们的机器上重新编译每个依赖库以确保所有内容都使用相同的 CRT？然后对于发布你重新编译每个库？

这在 Linux 上是如何工作的？这是我的主要兴趣。是否有 GCC 提供的 CRT 或 Linux 系统本身带有 CRT 库？我从未在 Makefils 中看到过明确链接的 CRT。

在 Linux 上，动态库链接到什么 CRT？机器上最新的一个，还是更“并排”的机制。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T19:09:13.437

在 Linux 方面，我认为标准库的两个基本部分存在问题： 我们有 C 运行时部分，它应该永远与 ABI 兼容。实际上，最终链接时的任何版本链接都应该没问题，如果它是兼容性所需的旧版本，您可以使用二进制文件重新分发任何需要的共享库。通常，这些库只是在 *NIX 系统上并排放置。

其次，你有 C++ 库。这些几乎可以保证不以任何方式与 ABI 兼容，因此您*必须*针对相同版本的 C++ 库重新构建最终二进制文件的每个组件。不幸的是，没有办法解决它，否则你可能会遇到各种不匹配。这就是为什么许多开源库甚至不使用预制库二进制文件的原因：每个人都需要构建自己的副本以确保它能够正确链接到他们的最终应用程序代码中。

# excel - 将 Excel 列转换为 SSRS（英寸或 pt）

> ID：10129050
> 
> 赞同：1
> 
> 时间：2012-04-12T17:55:03.090
> 
> 标签：excel, reporting-services

我有用户给我的 Excel 报告，并希望在新的 SSRS 报告中使用相同的格式。因此，如果我在 excel 中有一个宽度为 14.14（103 像素）的列，那么 SSRS 中该列的宽度应该是多少（in、mm、cm、pt 或 pc）？

我无法获得正确的因素，因为它似乎因大小而异？

```
Excel Width     Pixels   Ratio  
0.08            1        0.08   
0.83            10       0.083  
13.57           100      0.1357 ??
142.14          1000     0.14214    
254.71          1788     0.142455257 
```

我知道每英寸像素取决于 dpi，但我正在寻找的是可打印的等价物。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-29T17:32:38.040

这是我发现的关于excel和ssrs之间关系的内容。似乎excel使用每英寸96像素。我还发现在 ssrs 中使用 PT 单位可以更准确地转换为 excel，实际上在 MSDN 文档中的某处提到。

在 excel 中，一列 10 = 75 像素，20 = 145 像素等。基本上单位是 70 加上额外的 5 像素。

因此，要在 ssrs 中设置列​​，我使用了：

[PT 中的宽度] = ([excel 中的宽度] / 10 * 70 + 5) / 96 * 72)

例如： excel 中的宽度 10 = 75 像素 = 56.25 pts = .78125"

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-12T18:07:58.413

Excel（和许多其他与 MS 相关的应用程序）默认为[每英寸 96 像素](http://office.microsoft.com/en-us/excel-help/measurement-units-and-rulers-in-excel-HP001151724.aspx)。

所以你的 103 像素宽的 Excel 列应该是：103 / 96 = 1.073 英寸（四舍五入到千。）

当然，许多打印选项会改变这一点，例如“适合一页”。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-04-24T15:25:12.147

我使用了 RhodeHummels 的答案，但是我不得不更改它，因为答案中缺少括号，我相信它应该是：

[PT 中的宽度] = **((** [Excel 中的宽度]/10 * 70 + 5)/ 96 * 72)

eg =((10/10*70+5)/96*72) 在excel中得到想要的答案

# php - 用 PHP 中的新内容替换旧内容

> ID：10129053
> 
> 赞同：2
> 
> 时间：2012-04-12T17:55:10.337
> 
> 标签：php, jquery

我正在开发其中 XML 是我的播放列表的视频播放器。这是代码：

```
$crxml=file_get_contents('http://spoti.com/latest.xml/?lang=en');    
   $rss=new SimpleXMLElement($crxml);
  $playlistitem=1;
foreach($rss->channel->item as $post)

if($playlistitem<=8)

echo '<ul>';
echo '<li class="xtitle">'.$post->title.'</li>';
echo '<li class="xdesc">'.$post->description.'</li>';    
$dc=$post->children('http://search.yahoo.com/mrss/');
echo '<li class="xthumb">'.$dc->thumbnail->attributes()->url.'</li>';
echo '<li class="xpreview">'.$dc->thumbnail->attributes()->url.'</li>'; 
echo '<li class="xsources_mp4">'.$dc->content->attributes()->url.'</li>';
$dc->content->attributes()->url=preg_replace('/.mp4/','.webm',$dc->content-attributes()->url);
 echo '<li class="xsources_webm">'.$dc->content->attributes()->url.'</li>';
 echo '</ul>';
$playlistitem++; 
```

当用户单击语言时，我想用新内容替换旧内容所有条目都替换为新条目

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T19:21:10.860

一个例子

```
if(isset($_POST["lang"]))
    {
       $lang = $_POST["lang"];
    } else {
       $lang = "eng";
    }
$crxml=file_get_contents('http://spoti.com/latest.xml/?lang='.$lang);    
$rss=new SimpleXMLElement($crxml);
$playlistitem=1;

foreach($rss->channel->item as $post) {
    if($playlistitem<=8) {
        echo '<ul id="playlist">';
        echo '<li class="xtitle">'.$post->title.'</li>';
        echo '<li class="xdesc">'.$post->description.'</li>';    
        $dc=$post->children('http://search.yahoo.com/mrss/');
        echo '<li class="xthumb">'.$dc->thumbnail->attributes()->url.'</li>';
        echo '<li class="xpreview">'.$dc->thumbnail->attributes()->url.'</li>';
        echo '<li class="xsources_mp4">'.$dc->content->attributes()->url.'</li>';
        $dc->content->attributes()->url=preg_replace('/.mp4/','.webm',$dc->content-attributes()->url);
        echo '<li class="xsources_webm">'.$dc->content->attributes()->url.'</li>';
        echo '</ul>';
        $playlistitem++;
    }
} 
```

然后在页面上的jQuery中有一个带有语言的选择框，称为#langSelect

```
$('#langSelect').change( function() {
    var langSelected = $(this).val();

    $("#playlist").load("<?php echo $_SERVER['PHP_SELF']."?uid=".time(); ?> #playlist", {lang: langSelected});
}); 
```

* * *

要调试尝试使用这个：

```
$('#lang').change( function() {
    var langSelected = $(this).val();
    alert('Selected language: '+langSelected);
    var url = '<?php echo $_SERVER['PHP_SELF']."?uid=".time(); ?>';
    alert('Ajax POST URL is: '+ url);
    $("#playlist").load(url+" #playlist", {lang: langSelected}, function(response, status, xhr) {
            alert(status);
            alert(response);
        }
    });
}); 
```

# java - java项目的httpclient api

> ID：10129055
> 
> 赞同：0
> 
> 时间：2012-04-12T17:55:12.973
> 
> 标签：java, http

我在哪里可以找到并下载 api 来实现那段代码？我用谷歌搜索了它，但我找不到它。我发现的唯一一个是：[http](http://hc.apache.org/downloads.cgi) ://hc.apache.org/downloads.cgi ，但事实并非如此。谢谢你。

```
import org.apache.commons.httpclient.Cookie;  
import org.apache.commons.httpclient.HttpState;  
import org.apache.commons.httpclient.HttpClient;  
import org.apache.commons.httpclient.methods.GetMethod;  

public class GetCookiePrintAndSetValue {  

  public static void main(String args[]) throws Exception {  

    HttpClient client = new HttpClient();  
    client.getParams().setParameter("j_username", "abc");  
    client.getParams().setParameter("j_password", "pqr");  

    GetMethod method = new GetMethod("http://localhost:8080/");  
    try{  
      client.executeMethod(method);  
      Cookie[] cookies = client.getState().getCookies();  
      for (int i = 0; i < cookies.length; i++) {  
        Cookie cookie = cookies[i];  
        System.err.println(  
          "Cookie: " + cookie.getName() +  
          ", Value: " + cookie.getValue() +  
          ", IsPersistent?: " + cookie.isPersistent() +  
          ", Expiry Date: " + cookie.getExpiryDate() +  
          ", Comment: " + cookie.getComment());  
        }  
      client.executeMethod(method);  
    } catch(Exception e) {  
      System.err.println(e);  
    } finally {  
      method.releaseConnection();  
    }  
  }  
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-12T17:58:43.193

根据[项目页面](http://hc.apache.org/httpclient-3.x/)：

> Commons HttpClient 项目现已结束，不再开发。它已被其 HttpClient 和 HttpCore 模块中的[Apache HttpComponents 项目](http://hc.apache.org/)所取代，这些模块提供了更好的性能和更大的灵活性。

所以，你可能确实想要[那个页面](http://hc.apache.org/downloads.cgi)。

如果你想要一个旧版本，比如 3.0，你可以[在档案](http://archive.apache.org/dist/httpcomponents/commons-httpclient/)中找到它。

另外，我强烈建议学习使用[Maven](http://maven.apache.org/)，因为它会使处理项目中的依赖关系[变得更加容易](http://mvnrepository.com/artifact/commons-httpclient/commons-httpclient/3.1)。

# google-maps - Google Earth API：更改相机位置时如何防止跳高？

> ID：10129059
> 
> 赞同：0
> 
> 时间：2012-04-12T17:55:55.967
> 
> 标签：google-maps, google-earth, google-earth-plugin

在 Google Earth（网络浏览器插件，GE API）中，我通过更改坐标将相机从 A 点移动到 B 点。它有效，但通用电气似乎总是在途中跳高。

示例（使用 ge.ALTITUDE_ABSOLUTE 设置）

```
Point A:  camera.setLatitude(50.1);camera.setLongitude(14.1);camera.setAltitude(1000.0); 
Point B:  camera.setLatitude(51.1);camera.setLongitude(15.1);camera.setAltitude(1000.0); 
```

（注意两个点的高度相同 1000 m）。

位置更改工作正常，但途中 GE 会使用 Eye Alt 缩小。上升到 72 **km**，然后再次回到所需的 1000.0 m（从状态行读取的值，flyTo 速度设置为非常慢）。

有没有办法抑制这种跳高，保持在一个固定的高度？到目前为止，我什至找不到对这种行为的全面*描述*，更不用说控制它的参数了。

（显然，“flightsim”类型的 GE 应用程序可以做到这一点，但我认为它们不是使用坐标变化，而是基于航向/速度数据的运动）。但是，为了实现恒定的高度运动，必须先将两个坐标集转换为速度/速度，然后再转换回坐标，这似乎有点愚蠢。）

感谢所有提示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T18:23:21.187

如果您在使用 GE 插件时正在寻找流畅的动画，那么我可以直截了当地告诉您，GE 使用的默认算法是不够的。您最好的选择是将 flyToSpeed 设置为像这样传送：

```
ge.getOptions().setFlyToSpeed(ge.SPEED_TELEPORT); 
```

然后自己创建过渡路径，或者通过在起点和终点之间插入帧，或者预定义这些帧（提示：您将需要更多的中间点）。

最简单的方法是挂钩 frameend 事件，该事件会在插件完成屏幕绘制后立即触发，然后立即重新定位相机。我能想到的最好的例子就是在这里：

[http://earth-api-samples.googlecode.com/svn/trunk/examples/event-frameend.html](http://earth-api-samples.googlecode.com/svn/trunk/examples/event-frameend.html)

不幸的是，这个例子在直线上工作，使相机曲线更具挑战性。

另一种选择可能是查看 GE 插件对 KML 的原生支持，通过加载 KML 导览并通过插件播放，您可以让插件完成繁重的工作，

[https://developers.google.com/earth/documentation/kml](https://developers.google.com/earth/documentation/kml)

# c - 静态加载的共享库会与自身发生冲突吗？

> ID：10129064
> 
> 赞同：0
> 
> 时间：2012-04-12T17:56:02.497
> 
> 标签：c, shared-libraries

我最近决定升级为使用共享库（自制）而不是静态库来支持我小组的一个项目。这样，我的小组可以利用库的就地更新，而不是完全重新编译主项目（目前必须为静态库完成）。

我的库代码具有随着主程序与库交互而变化的全局变量。当库是静态的时，这工作得很好，但我担心过渡到它是一个共享库。如果两个程序使用同一个共享库，会不会因为共享库中的全局变量而相互冲突？

重要提示：共享库在程序启动时加载。我还不打算动态加载库（通过 dll 命令）。我正在使用 gcc 为运行 Linux 的基于 ARM 的系统进行编译。

# slickgrid - SlickGrid 的无效参数错误

> ID：10129069
> 
> 赞同：0
> 
> 时间：2012-04-12T17:56:22.520
> 
> 标签：slickgrid

我在网页上有一个 jQueryUI 选项卡控件。每个选项卡都包含一个或多个 Slickgrid 网格。

有时，但没有我能够发现的特定模式，在删除选项卡（因此删除 Slickgrid 的实例）时，我得到：

```
// slick.grid-2.0.merged.min.js: Microsoft JScript runtime error: Invalid argument
Z[0].styleSheet.cssText=a.join(" ") 
```

然后传播到

```
// jquery-1.7.1.min.js: Microsoft JScript runtime error: Exception occurred.
a.execScript||function(b){a.eval.call(a,b)})(b) 
```

是什么导致了这个问题，我该如何解决/解决它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T04:32:14.350

根据@Tin 的评论，我确保 SlickGrid 的每个实例都在与它关联的 HTML 元素被 Ajax 结果替换之前被销毁。

杠杆作用

[有没有办法从元素中获取 SlickGrid 的实例](https://stackoverflow.com/questions/5573806/is-there-a-way-to-get-an-instance-of-slickgrid-from-an-element)

我最终得到了这样的代码：

初始化 SlickGrid 实例：

```
grid = new Slick.Grid("#myGridDiv", myDataView, myColumns, myOptions);
$('#myGridDiv').data('slickgrid', grid); 
```

一般清理功能：

```
function cleanupSlickGrid() {
    //@* Cleanup slickgrid instances.  See: https://stackoverflow.com/questions/10129069/invalid-argument-error-with-slickgrid *@
    var grids = $('.slick'); //@* I add the class 'slick' to each grid *@
    jQuery.each(grids, function(i, val) {
        var grid = $(this).data('slickgrid');
        grid.destroy();
        });
} 
```

像这样使用一般清理功能：

```
$.ajax(
{
    url: removeUrl,
    type: "POST",
    success: function (data)
    {
        cleanupSlickGrid();
        $('#myDivId').html(data); 
    }
} 
```

# perl - 从 IO::File 继承

> ID：10129070
> 
> 赞同：0
> 
> 时间：2012-04-12T17:56:29.970
> 
> 标签：perl, oop, inheritance

我有这个简单的基类（模块）：

```
package XMSP::File;
use parent 'IO::File';

sub new {
    my ($self,@args) = @_;
    my $object = {};

    bless($object,$self);
    $object->SUPER::new(@args);

    return $object;
}

sub open {
    my ($self,@args) = @_;
    $self->SUPER::open(@args);
}

sub close {
    my ($self,@args) = @_;
    $self->SUPER::close(@args);
}
1; 
```

脚本：

```
#!/usr/bin/env perl
use strict;
use warnings;
use XMSP::File;

my $file = XMSP::File->new("< $0");

if (defined $file) {
    print "First Ok\n";
    $file->close();
}

$file->open("< file");

if (defined $file) {
    print "Second Ok\n";
} 
```

在我的脚本上，我使用...加载它`use`...我使用 ctor (new) 创建一个新对象等，但是当我关闭它时，它会因以下错误而死：

```
First Ok
Not a GLOB reference at /usr/lib/perl/5.10/IO/Handle.pm line 115. 
```

我真的不知道为什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T18:07:27.920

不是让 IO::File 创建对象，而是创建它，然后创建它是完全错误的。您甚至没有使用正确的变量类型（散列 vs glob）。让 IO::File 创建对象。

```
sub new {
    my ($class, @args) = @_;
    my $self = $class->SUPER::new(@args);
    return $self;
} 
```

请注意，此方法是完全多余的。我想你打算在其中做额外的工作。

# python - 如何在调用 get() 和 post() 之前做一些代码？

> ID：10129073
> 
> 赞同：2
> 
> 时间：2012-04-12T17:56:32.457
> 
> 标签：python, google-app-engine

基本上我想要实现的是检查用户是否登录，如果他没有登录，他将被重定向到/somepage。我试图通过创建一个扩展 webapp.RequestHandler 的类来实现它，然后在代码中扩展该类。（类似于 cakephp 中的 beforeFilter）如果不清楚，我会解释它:)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T18:02:02.960

您可以覆盖`dispatch()`webapp 请求中的方法，以便在调用之前进行此检查`super()`：

[http://webapp-improved.appspot.com/guide/handlers.html#overriding-dispatch](http://webapp-improved.appspot.com/guide/handlers.html#overriding-dispatch)

正如其他答案所建议的那样，您也可以使用装饰器，但这需要将它放在每个处理程序的头部（您可能想要也可能不想要）。`dispatch()`如上所述的覆盖允许您对所有页面执行一次。

如果你使用的是 python2.5 运行时，你需要在你的项目中安装 webapp2 并在你的代码中使用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T18:00:07.620

一种方法是实现一个类似于 Django 中用于用户身份验证的 Python 装饰器。例如[login_required 装饰器](https://docs.djangoproject.com/en/dev/topics/auth/#the-login-required-decorator)。[stackoverflow 上的这个线程](https://stackoverflow.com/questions/1020736/custom-authentication-in-google-app-engine-python)也是相关的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-12T18:04:05.207

使用装饰器。

这里的文档： http: [//www.python.org/dev/peps/pep-0318/](http://www.python.org/dev/peps/pep-0318/)

这是一个删除请求路径上的斜杠的示例：

```
def removeslash(method):
    """Use this decorator to remove trailing slashes from the request path.

    For example, a request to '/foo/' would redirect to '/foo' with this
    decorator. Your request handler mapping should use a regular expression
    like r'/foo/*' in conjunction with using the decorator.
    """
    @functools.wraps(method)
    def wrapper(self, *args, **kwargs):
        if self.request.path.endswith("/"):
            if self.request.method == "GET":
                uri = self.request.path.rstrip("/")
                if self.request.query: uri += "?" + self.request.query
                self.redirect(uri)
                return
            return self.status(404)
        return method(self, *args, **kwargs)
    return wrapper 
```

你像这样使用它：

```
class MyHandler(RequestHandler):
    @removeslash
    def get(self):
        # your code 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-12T18:30:30.853

我所做的是创建一个类层次结构，让我可以使用模板方法设计模式，例如：

```
 class Page(webapp.RequestHandler):

     def do_get(self):
         ''' override in derived classes to actually do something '''
         pass

     def get(self):
         ''' do NOT override this in derived classes '''
         # do whatever you need to do to verify that the get() should succeed. 
         # Maybe redirect, show an error, whatever
         self.do_get() 
```

...围绕调用`do_get()`模板方法函数的逻辑可以根据您的需要复杂，只要您的处理程序类都是从此类派生的，它们就会自动获得正确的行为。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-12T19:26:29.887

我没有对此进行测试，但这应该可以。只要您直接使用 BasicHandler 而不是 webapp2 ，用户未登录的任何请求都将重定向。

```
class BasicHandler(webapp2.RequestHandler):
   def __init__(self, request=None, response=None):
      self.initialize(request, response)
      self.user = users.get_current_user()
      if not self.user:
         self.redirect('/somepage')

class Page(BasicHandler):
   def get(self):
      # Do your work/render... 
```

*edit 将 BasicHandler 放在它自己的 .py 文件中并导入

# ios - 从其他控制器问题访问方法 iOS

> ID：10129074
> 
> 赞同：0
> 
> 时间：2012-04-12T17:56:33.117
> 
> 标签：ios, uiviewcontroller, asyncsocket

第一个控制器的代码：

```
 optionscontroller =  [[OptionsViewController alloc] init ];

 [optionscontroller setupSocket]; 
```

第二个控制器的代码：

```
- (void)setupSocket
 {
udpSocket = [[GCDAsyncUdpSocket alloc] initWithDelegate:self      delegateQueue:dispatch_get_main_queue()];

NSError *error = nil;

if (![udpSocket bindToPort:0 error:&error])
{
    //  [self logError:FORMAT(@"Error binding: %@", error)];
    return;
}
if (![udpSocket beginReceiving:&error])
{
    //  [self logError:FORMAT(@"Error receiving: %@", error)];
    return;
}

isRunning = YES;
NSLog(@"Udp Echo server started on port %hu", [udpSocket localPort]); } 
```

动作之一：

```
- (IBAction)testbutton:(id)sender {

NSString *host = @"192.168.1.255";
if ([host length] == 0)
{

    NSLog(@"Address required");

    return;
}

NSString *msg = @"hi";
if ([msg length] == 0)
{
    //[self logError:@"Message required"];
    return;
}

NSData *data = [msg dataUsingEncoding:NSUTF8StringEncoding];
[udpSocket enableBroadcast:YES error:nil ];
[udpSocket sendData:data toHost:host port:port withTimeout:-1 tag:0];

tag++; 
```

}

当我从第一个控制器调用“setupSocket”时，它会启动，但是当我转到 OptionsViewController 并单击按钮时 - 没有任何反应，它的含义是正确的并且它有效，当我从第二个控制器的“视图加载功能”调用“setupSocket”时，一切正常好吧，为什么？？？

因此，如果不是从目标视图控制器初始化某些方法，则此方法不起作用。我不明白它是怎么发生的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T18:04:47.567

If you are using a XIB with interface builder you need to make sure that you wire the button up to it's action. Do this by right clicking and dragging from your button to your file's owner in the Interface Builder.

Oh also, you need to optionscontroller = [[OptionsViewController alloc] initWithNibName:@"YOURNIBNAMEHERE"];

If you are creating it programmatically (which if you're using IBAction you should not be) then you would use this:

addTarget:action:forControlEvents:

Read here:

[http://developer.apple.com/library/ios/#documentation/uikit/reference/UIControl_Class/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIControl_Class/Reference/Reference.html)

# c# - 实体框架、POCO 和私有属性

> ID：10129076
> 
> 赞同：8
> 
> 时间：2012-04-12T17:56:49.793
> 
> 标签：c#, entity-framework, poco

我创建了以下 POCO 类，`Contact.FirstName`并将`Contact.LastName`属性设为私有（这些属性映射到实体框架模型中的适当属性）。

```
public class Contact
{
    public int ContactID { get; set; }
    private string FirstName { get; set; }
    public string LastName { get; private set; }
} 
```

由于 EF 无法为这两个属性分配值，我预计会出现异常，但不知何故 EF 仍然设法为它们分配值。这怎么可能，因为只有`Contact`类中的代码才能访问私有属性？

谢谢

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-12T17:59:35.473

在具有足够信任级别的环境中，[反射](http://msdn.microsoft.com/en-us/library/f7ykdhsy%28v=vs.71%29.aspx)可用于访问通常无法访问的成员。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T13:57:30.490

为了完整起见：EF5 代码首先不（至少在默认情况下）将私有属性映射到数据库表列。

以下类：

```
public class Person {
  public int PersonId { get; set; }
  private string Name { get; set; }
} 
```

使用以下 DbContext：

```
public class PrivatePropertiesContext : DbContext {
  public DbSet<Person> People {
    get;
    set;
  }
} 
```

生成只有一列的 People 表：`dbo.People.PersonId (PK, int, not null)`

默认情况下，代码优先约定需要公钥属性。如果`PersonId`Person 类中的属性是私有的或受保护的，实体框架会抛出以下异常：

```
System.Data.Entity.Edm.EdmEntityType: : EntityType 'Person' has no key defined. Define the key for this EntityType.
System.Data.Entity.Edm.EdmEntitySet: EntityType: EntitySet 'People' is based on type 'Person' that has no keys defined. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T18:29:32.460

是的 - EF，代码优先在几个地方使用它。

**我已经看到私有构造函数的类似行为**——即使你“隐藏”它，EF/CF 仍然可以构造你的对象，或者尝试:)（这是早期版本中的行为，现在不确定）。

而且我记得与 CF 人员讨论过他们为什么不初始化复杂类型的属性 - 而他们仍然可以访问私有成员（如果我没记错的话），这是很久以前的事了。

所以，有点一般性的问题 - 但从这个意义上说，希望这至少能澄清一些事情。

# jquery - 什么是 tGrid？

> ID：10129077
> 
> 赞同：1
> 
> 时间：2012-04-12T17:56:50.007
> 
> 标签：jquery, asp.net-mvc, telerik-mvc

我们开始使用 Telerik MVC 控件并且对使用的 jquery 有疑问。以下示例中的 tGrid 是什么，有人可以指出更多信息吗？

```
var grid = $("#Grid").data("tGrid"); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-12T18:43:28.053

客户端网格对象存储在数据存储中。因此，如果我们想使用该客户端对象和对象模型（例如事件、方法等），我们首先必须获取该对象。

[客户端对象](http://www.telerik.com/help/aspnet-mvc/telerik-ui-components-grid-client-api-and-events.html#ClientSideObject)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-05-25T07:35:47.540

对于寻找有关以下信息的人`.data("tGrid")`：

它来自 Telerik Extensions for ASP.NET MVC，如果您使用[Telerik UI for ASP.NET MVC](https://docs.telerik.com/aspnet-mvc/migration/migrating-from-telerik-extensions-for-aspnet-mvc#client-side-object-retrieval)（您使用*Kendo.Mvc.UI*命名空间），您应该使用

```
$("#foo").data("kendoGrid") 
```

这给了你[kendo.ui.Grid](https://docs.telerik.com/kendo-ui/api/javascript/ui/grid#kendouigrid)

# haskell - 函数式编程的分析与设计

> ID：10129080
> 
> 赞同：8
> 
> 时间：2012-04-12T17:57:13.583
> 
> 标签：haskell, functional-programming, analysis, software-design, purely-functional

当您计划使用 Haskell 等函数式编程语言开发系统时，您如何处理分析和设计阶段？

我的背景是命令式/面向对象的编程语言，因此，我习惯于用例分析和使用 UML 来记录程序的设计。但问题是 UML 本质上与面向对象的软件开发方式相关。

我很感兴趣，为将要使用函数式编程开发的系统开发文档和定义软件设计的最佳方式是什么。

*   您是否仍会使用[用例分析](http://en.wikipedia.org/wiki/Use-case_analysis)或[结构化分析和设计](http://en.wikipedia.org/wiki/Structured_Analysis_and_Design_Technique)来代替？
*   软件架构师如何定义系统的高级设计以便开发人员遵循它？
*   当您应该展示解决方案的设计时，您会向您的客户或新开发人员展示什么？
*   您如何在不先写完所有内容的情况下记录整个事物的图片？
*   在功能世界中有什么可以与[UML相媲美的吗？](http://en.wikipedia.org/wiki/Unified_Modeling_Language)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T23:25:24.137

我不是专业人士，但我会尽力回答其中一些问题。

> 你还会使用用例分析[?]

我不明白为什么不。收集用例，并设计一个您希望公开的满足用例的模块 API。确定用例是需要类型类，还是只需要普通函数。

> 或者也许是结构化的分析和设计？

我不熟悉这种方法，但从我从 wiki 文章中收集到的信息来看，它看起来可以正常工作。

> 软件架构师如何定义系统的高级设计以便开发人员遵循它？

我假设他们指定了一个模块以及模块的每个部分应具有的类型。同样，我不是专业人士，所以我不确定在实践中做了什么。

> 当您应该展示解决方案的设计时，您会向您的客户或新开发人员展示什么？

你向客户展示对他们有意义的东西。如果您的客户足够精明，只需向他们展示类型签名并解释重要功能即可。如果他们不那么精明，那就画漂亮的画，或者你必须做的任何事情。OOP 与现实世界的对象进行比较，而 FP 与......嗯......函数进行比较。向新手说明功能的典型方法是将其描述为一台机器，您可以在其中放入某些东西，然后再取出其他东西。

> 您如何在不先写完所有内容的情况下记录整个事物的图片？

照片”？只需为重要函数定义类型签名，然后将实现保留为`undefined`. 在某个地方有一个包可以为您提供更好的存根，它会在编译时提醒您仍然需要实现哪些部分。

> 在功能世界中有什么可以与 UML 相媲美的吗？

不？

* * *

## 回答 #2

> 赞同：-7
> 
> 时间：2012-04-12T18:02:01.490

让我们检查一下这个说法：

> UML 本质上与面向对象的软件开发方式相关。

首先，这不是真的。无论实现是什么，您仍然可以在 UML 中对交互、用例、状态和数据模型进行建模。

其次，Haskell 的类型类是面向对象的一种形式：它们在其参数类型上提供多态分派（这允许使用该类型中存在的数据的不同函数实现）。

所以，是的，如果你真的想继续使用 UML，那就继续吧。

# c - 在 C 中从标准输入读取写入标准输出

> ID：10129085
> 
> 赞同：5
> 
> 时间：2012-04-12T17:57:17.437
> 
> 标签：c, io, stdout, stdin, stdio

我正在尝试编写一个猫克隆来练习 C，我有以下代码：

```
#include <stdio.h>
#define BLOCK_SIZE 512
int main(int argc, const char *argv[])
{
    if (argc == 1) { // copy stdin to stdout
        char buffer[BLOCK_SIZE];
        while(!feof(stdin)) {
            size_t bytes = fread(buffer, BLOCK_SIZE, sizeof(char),stdin);
            fwrite(buffer, bytes, sizeof(char),stdout);
        }
    }
    else printf("Not implemented.\n");
    return 0;
} 
```

我试过了`echo "1..2..3.." | ./cat`，`./cat < garbage.txt`但在终端上看不到任何输出。我在这里做错了什么？

编辑：根据评论和答案，我最终这样做了：

```
void copy_stdin2stdout()
{
    char buffer[BLOCK_SIZE];
    for(;;) {
        size_t bytes = fread(buffer,  sizeof(char),BLOCK_SIZE,stdin);
        fwrite(buffer, sizeof(char), bytes, stdout);
        fflush(stdout);
        if (bytes < BLOCK_SIZE)
            if (feof(stdin))
                break;
    }

} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-12T18:02:27.417

我可以引用我的答案：[https ://stackoverflow.com/a/296018/27800](https://stackoverflow.com/a/296018/27800)

```
fread(buffer, sizeof(char), block_size, stdin); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-12T18:24:16.930

您的问题似乎是 fread 的返回值。我修改了您的代码以打印出值字节，并且每次都得到 0。fread 的手册页清楚地表明 fread 的返回值不是字符数。如果遇到 EOF，则返回值可能为零（在本例中为 0）。这是因为您试图读取 1 个大小为 BLOCK_SIZE 的东西，而不是 BLOCK_SIZE 大小为 1 的东西。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-12T18:02:04.623

尝试`fflush(stdout)`后调用`fwrite()`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-12T18:34:34.593

忽略我的评论`fflush`；那不是问题。

在调用中交换块大小和元素大小的顺序`fread`。您要读取最多 BLOCK_SIZE 大小`sizeof (char)`为 1 的元素（根据定义为 1）；您正在尝试读取 1 个大小为 BLOCK_SIZE 的元素，因此除非您输入*至少*BLOCK_SIZE 个字符，`fread`否则将返回 0。 IOW，您的`fread`调用需要

```
size_t bytes = fread(buffer, 1, sizeof buffer, stdin); 
```

`fwrite`对呼叫 进行类似的更改。

# xcode4.2 - xcode 4.2 中的 iOS 5.1 (9B176) SDK 问题

> ID：10129088
> 
> 赞同：0
> 
> 时间：2012-04-12T17:57:32.400
> 
> 标签：xcode4.2, ios

当我连接我的 iPad 并打开 Xcode 时，有一条消息说：

“iPad”上的 iOS 版本与使用此 iOS SDK 安装支持开发的任何 iOS 版本不匹配。请将设备恢复到以下列出的操作系统版本，或更新到最新版本的 iOS SDK；可在此处获得。

安装在 iPad 5.1 (9B176) 上的操作系统

Xcode 支持的 iOS 版本 最新 5.0 (9A334) 4.3 4.2 3.2.2 3.2.1 3.2 3.1.3 3.1.2 3.1.1 3.1 3.0.1 3.0

有什么想法吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T17:59:24.730

如果您转到管理器并单击设备，然后单击“使用此设备进行开发”，它将为新的 iOS 版本提取所有正确的符号。如果出现损坏符号的问题，您还可以删除派生数据并重新连接设备并重复上述操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T18:57:37.693

您需要升级到 Xcode 4.3 才能在您的设备上对其进行测试，不幸的是，没有其他方法可以解决这个问题。不过，您应该能够在模拟器上运行。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-12T18:37:39.947

You need Xcode 4.3.1, which has iOS SDK 5.1 included. Your current version of Xcode has support for only iOS SDK 5.0 (and below). Your device has iOS SDK 5.1, so your version of Xcode (4.2) doesn't know how to use it. This doesn't mean you cannot continue to use Xcode 4.2 for development and simulator work. You just cannot put anything you create using Xcode 4.2 on your iOS 5.1 device.

Best to upgrade Xcode and stay current, in my view, however. Xcode 4.3.1 is available only via the Mac App Store and you will have to be running Lion.

# c++ - 包含一个库会破坏 C++ 中另一个库的功能吗？

> ID：10129091
> 
> 赞同：2
> 
> 时间：2012-04-12T17:57:41.243
> 
> 标签：c++

我在 C++ 项目中使用 octave 库。

```
#include <octave/oct.h> 
```

刚才我添加了一个带有[Thomas Becker](http://thbecker.net/free_software_utilities/type_erasure_for_cpp_iterators/any_iterator.html#template)`any_iterator`实现的标题

```
#include "any_iterator.hpp" 
```

我只是添加了标题，无法构建项目。出现了 20 多个错误和 50 多个警告。全部在八度头。例如：

```
/usr/include/octave/lo-mappers.h:52: 
error: expected unqualified-id before ‘(’ token 
```

在代码中：

```
#if defined (HAVE_CMATH_ISNAN)
inline bool xisnan (double x)
{ return std::isnan (x); }         // line 52
#else 
```

或者

```
/usr/include/octave/ov-base.h:580: 
error: expected ‘)’ before ‘void’ 
```

在声明中：

```
virtual octave_value isnan (void) const; 
```

一旦我删除了标题，问题就消失了。同样在一个单独的项目中，`any_iterator`按预期工作。只是看起来他们不能共存。

有任何想法吗？我完全迷路了。`any_iterator`甚至受命名空间保护。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-12T18:02:44.810

当然可以！为什么不？它可以是任何东西，真的。举个例子——在标题中打开一个命名空间并忘记关闭它，然后在你的项目中包含这个标题，你就完成了。编译器将开始杜鹃并开始向您抛出错误，指向实际上与错误无关的不同位置。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-12T18:15:23.030

是的。但如何是一个更困难的问题。

我能想到的至少有两个选项可以帮助调试它。

1.  在编译文件的命令行选项中添加 -E。这将导致预处理器运行并吐出带有所有附加标题和扩展所有宏的代码。然后，您可以尝试编译该预处理程序，并可以准确了解它为什么会阻塞。

2.  尝试使用 clang 而不是 gcc 进行编译。Clang 更擅长提供可理解的错误消息。

放置“any_iterator.hpp”解决了问题的事实意味着 any_iterator 包含有问题的代码。它可能间接包括 cmath 并以某种方式引起问题。我敢打赌，如果你在 octave/oct.h 之上包含 cmath，它会以同样的方式中断。

# android - android - 过度绘制布局允许通过 LinearLayout 进行触摸

> ID：10129092
> 
> 赞同：18
> 
> 时间：2012-04-12T17:57:41.363
> 
> 标签：android, controls, touch, overlay, android-linearlayout

在下面的 UI 中，我在下面可以覆盖整个屏幕。LinearLayout 是透明的，并允许其下方的控件可点击或可触摸。基本上，我可以滚动此 LinearLayout 下方的列表以及单击控件。我该如何禁用它？

见附件示例。![在此处输入图像描述](../Images/9aaa193437ad243eb50cbc009b1a2d7e.png)

谢谢

```
<RelativeLayout
     xmlns:android="http://schemas.android.com/apk/res/android" 
    android:id="@+id/rlExtNavbar" 
    android:orientation="vertical"
    android:layout_width="match_parent" 
    android:layout_height="match_parent"
    android:gravity="fill_vertical"
    android:layout_gravity="fill_vertical"
    android:background="@color/transparent" xmlns:tools="http://schemas.android.com/tools" tools:ignore="Overdraw">
    <RelativeLayout
        android:id="@+id/expandedNavbarLayout" 
        android:orientation="vertical"
        android:layout_width="fill_parent" 
        android:layout_height="wrap_content" >
    </RelativeLayout>
    <LinearLayout
        android:id="@+id/transparentLayout" 
        android:orientation="vertical"
        android:layout_width="match_parent" 
        android:layout_height="wrap_content"
        android:layout_below="@id/expandedNavbarLayout"
        android:focusableInTouchMode="false"
        android:focusable="false"
        android:background="@color/fulltransparent">
    </LinearLayout>

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：115
> 
> 时间：2012-04-22T01:53:06.287

只需`android:clickable="true"`在 XML 中设置 LinearLayout 的属性即可防止点击通过——无需点击监听器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-12T21:12:52.510

将点击分配给线性布局并解决了它。老实说，它不应该像这样开始工作，但它解决了问题。点击为空。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-04T14:18:36.690

对我有用的是将 LinearLayout 放在 xml 中的内部 RelativeLayout 之前。

# java - 无法使用 ImageIO.write 从小程序保存 BufferedImage

> ID：10129095
> 
> 赞同：1
> 
> 时间：2012-04-12T17:57:49.293
> 
> 标签：java, image, applet, nullpointerexception

我正在加载一个 BufferedImage 并在其上绘制一个矩形。然后我想将结果保存为`png`. 但图像不会使用`ImageIO.write`. 我不认为我正在正确绘制图像。我当前的代码如下：

```
import java.applet.*;
import java.awt.*;
import java.awt.event.*;
import java.awt.image.*;
import javax.imageio.*;
import javax.swing.*;
import java.net.*;
import java.io.*;
import java.io.*;
import java.sql.*;
import java.awt.Graphics2D;

public class goal extends Applet implements MouseListener, ActionListener {

    Connection connection = null;
    BufferedImage img = null;
    Label ld;
    URL url;
    int x, y, w, h, entry, x2, y2, w2, h2;
    double temp;
    String id;
    TextField percent;
    Button enter;
    Boolean save = false;
    File outputfile = new File("C:/java temp/saved.png");

    public void init() {
        Graphics g = getGraphics();
        addMouseListener(this);
        this.setLayout(null);

        x = 87;
        y = 461;
        w = 22;
        h = 0;
        percent = new TextField();
        percent.setBounds(10, 10, 50, 30);
        this.add(percent);
        percent.setVisible(true);
        percent.addActionListener(this);

        enter = new Button("ENTER");
        enter.setBounds(65, 10, 50, 30);
        enter.addActionListener(this);
        this.add(enter);
        enter.setBackground(Color.blue);
        enter.setVisible(true);

        id = ("sales-goal.png");
        try {
            URL url = new URL(getCodeBase(), id);
            img = ImageIO.read(url);
        } catch (IOException e) {
        }

    }

    public void paint(Graphics g) {
        // Graphics2D g=img.createGraphics();
        g.drawImage(img, 10, 10, this);
        // g.drawImage(img,null,10,10);

        Color myColor = Color.decode("#32004b");
        g.setColor(myColor);
        g.fillRect(x, y, w, h);
        // g.fillRect(83,451,26,10);
        if (entry >= 60) {
            g.fillRect(x2, y2, w2, h2);

        }
    }

    public void actionPerformed(ActionEvent e) {
        Graphics g = getGraphics();

        if (e.getSource() == percent) {
            entry = Integer.parseInt(percent.getText());

            if (entry < 101) {
                y = 461;

                temp = entry;
                temp = temp * 2.65;
                temp = Math.round(temp);
                h = (int) temp;
                y = y - h;
            }
        }

        if (e.getSource() == enter) {
            g.drawString(outputfile + "", 10, 10);
            save = true;
            try {
                ImageIO.write(img, "png", outputfile);
            } catch (IOException i) {
            }
        }
        repaint();
    }

    public void mouseClicked(MouseEvent e) {
    }

    public void mousePressed(MouseEvent e) {
    }

    public void mouseReleased(MouseEvent e) {
    }

    public void mouseEntered(MouseEvent e) {
    }

    public void mouseExited(MouseEvent e) {
    }

    {
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T18:01:02.727

您可能还想查看 File.Seperator。如果要绘制图像，则必须使用

```
Graphics2D g=(Graphics2D)img.getGraphics(); 
```

编辑：文件分隔符/windows下的错误信息已被删除

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T18:20:41.823

我曾经编写了一些代码来将 JPanel 的内容保存在一个小程序中。希望这会有所帮助：

```
private void saveView(File saveTo, JPanel view) {

    BufferedImage image = new BufferedImage(view.getPreferredSize().width,
        view.getPreferredSize().height,
        BufferedImage.TYPE_4BYTE_ABGR);

    view.print(image.getGraphics());

    try {
        ImageIO.write(image, "png", saveTo);
    } catch (IOException e) {
        //Handle exception
    }
} 
```

它确实有效，并且看起来与您自己的并没有太大的不同。

也许`e.printStackTrace()`在你`catch (IOException e) {}`的里面放一个看看是否有异常被抛出？

（正如 Vespasian 所说，你的文件路径是可疑的......）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T19:54:32.840

> 我不认为我正确地绘制了图像..

是时候“停止思考”并开始调试了。;)

```
Exception in thread "AWT-EventQueue-1" java.lang.NullPointerException
    at javax.swing.ImageIcon.<init>(ImageIcon.java:204)
    at goal.actionPerformed(goal.java:87) ... 
```

使用此源已更改以显示至少一个堆栈跟踪。留给用户填写`printStackTrace()`每次捕获的调用作为练习。

```
// <applet code=goal width=400 height=200></applet>
import java.applet.*;
import java.awt.*;
import java.awt.event.*;
import java.awt.image.*;
import javax.imageio.ImageIO;
import javax.swing.*;

import java.io.File;
import java.io.IOException;
import java.net.URL;

public class goal extends Applet implements ActionListener
{
    BufferedImage img=null;
    Label ld;
    URL url;
    int x,y,w,h,entry,x2,y2,w2,h2;
    double temp;
    String id;
    TextField percent;
    Button enter;
    Boolean save=false;
    File outputfile = new File("C:/java temp/saved.png");

    public void init()
    {
        Graphics g= getGraphics();
        this.setLayout(null);

        x=87; y=461; w=22; h=0;
        percent=new TextField();
        percent.setBounds(10,10,50,30);
        this.add(percent);
        percent.setVisible(true);
        percent.addActionListener(this);

        enter=new Button ("ENTER");
        enter.setBounds(65,10,50,30);
        enter.addActionListener(this);
        this.add(enter);
        enter.setBackground(Color.blue);
        enter.setVisible(true);

        id=("sales-goal.png");
        try {
            URL url = new URL(getCodeBase(),id);
            img = ImageIO.read(url);
        }   catch (IOException e) {}
    }

    public void paint(Graphics g)
    {
        g.drawImage(img,10,10,this);

        Color myColor = Color.decode("#32004b");
        g.setColor(myColor);
        g.fillRect(x,y,w,h);
        if(entry>=60)
        {
            g.fillRect(x2,y2,w2,h2);
        }
    }

    public void actionPerformed (ActionEvent e)
    {
        Graphics g= getGraphics();

        if (e.getSource()==percent)
        {
            entry= Integer.parseInt(percent.getText());

            if(entry<101)
            {
                y=461;

                temp=entry;
                temp=temp*2.65;
                temp=Math.round(temp);
                h=(int)temp;
                y=y-h;
            }
        }

        if (e.getSource()==enter)
        {
            JOptionPane.showMessageDialog(null, new JLabel(new ImageIcon(img)));
            g.drawString(outputfile+"",10,10);
            save=true;
            try {
                ImageIO.write(img, "png", outputfile);
            } catch (Throwable t) {
                t.printStackTrace();
            }
        }
        repaint();
    }
} 
```

### 进一步说明：

此代码存在 NPE 之外的问题。

1.  期望`File`从小程序中保存一个。
2.  `Applet`当更好的工具包是 Swing 时，使用 AWT 组件（等）进行编码`JApplet`。
3.  （当自由浮动框架更好时编写小程序）
4.  调用`getGraphics()`图形用户界面。
5.  使用`null`布局。（按钮的文字已经看起来“拥挤”）
6.  按钮的蓝色 BG 使文本难以阅读。

..但一次一件事。

# php - 元素列表错误后缺少]

> ID：10129096
> 
> 赞同：2
> 
> 时间：2012-04-12T17:57:49.743
> 
> 标签：php, jquery, ajax

我正在使用 ajax 来获取用户在“选择”框中选择的内容并将其发送到 php 文件。然后我需要使用这些选择结果使查询结果可以下载。因此，重申一下，当他们单击 jquery/ajax 将其发送到 php 时。php 返回一个列表供他们再次选择，直到他们选择了五个选项。然后，在选择框下方，会出现一个链接，显示导出（下载）。该链接应该将它们发送到 php 函数 export() 以及一个 get 说明我需要导出的存储过程名称。连同 5 个选择结果作为存储过程中的参数。希望这是有道理的。这是我的代码。

PHP将结果发送到js文件--------

```
 $jsStr = '[';
    if ($query->num_rows() > 0) {
        foreach ($query->result() as $row) {
            $jsStr .= '["'. $row->count_result .'","'. $row->count_desc .'","'. $row->count_SP .'",'. $cn .','. $gp .','. $co .','. $st .','. $dp .']';
        }
        $jsStr = substr($jsStr,0,-1);
    }
    $jsStr .= ']';

    return 'changeResults('. $jsStr .');'; 
```

JS----------------

```
 function changeResults (data) {
    $('#systems').html(data[0][0] +' - '+ data[0][1] +' <a href="http://95.211.130.165:8080/index.php/discovery/export?sp='+ data[0][2] +'&cn='+ data[0][3] +'&gp='+ data[0][4] +'&co='+ data[0][5] +'&st='+ data[0][6] +'&dp='+ data[0][7] +'">Export</a>');
    $('#users').html(data[1][0] +' - '+ data[1][1] +' <a href="http://95.211.130.165:8080/index.php/discovery/export?sp='+ data[1][2] +'&cn='+ data[1][3] +'&gp='+ data[1][4] +'&co='+ data[1][5] +'&st='+ data[1][6] +'&dp='+ data[1][7] +'">Export</a>');
} 
```

我从萤火虫得到的错误

元素列表后缺少] [中断此错误]

...NV02) - 选定范围内的用户数","usr_disc_Inv_usr_content",1,1,1,1,1])

如果有什么不清楚的地方请告诉我，谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T18:21:39.407

让我们把它清理干净！

```
 $jsArr = array();
    if ($query->num_rows() > 0) {
        foreach ($query->result() as $row) {
            $jsArr[] = array(
                $row->count_result,
                $row->count_desc,
                $row->count_SP,
                $cn,
                $gp,
                $co,
                $st,
                $dp,
            );
        }
    }
    $jsStr = json_encode($jsArr);

    return 'changeResults('. $jsStr .');'; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-12T18:16:23.920

我真的不知道 JavaScript 或你使用的任何东西。但在我看来，好像你删除了最后`]`添加的`foreach loop`by

```
$jsStr = substr($jsStr,0,-1); 
```

我认为您在`foreach`. 像这样：

```
foreach ($query->result() as $row) {
    $jsStr .= '["'. $row->count_result .'","'. $row->count_desc .'","'. $row->count_SP .'",'. $cn .','. $gp .','. $co .','. $st .','. $dp .'],';
} 
```

这样对我来说更有意义。要使括号正确，您必须添加这个逗号（我认为这是正确的符号）或删除`substr`操作。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-12T18:15:36.350

该行：

```
$jsStr = substr($jsStr,0,-1); 
```

您正在`]`从字符串的末尾删除。这就是为什么。不知道为什么那条线在那里。

# jquery - Jquery无限向上滚动插件

> ID：10129097
> 
> 赞同：3
> 
> 时间：2012-04-12T17:57:50.343
> 
> 标签：jquery, jquery-plugins, horizontal-scrolling, infinite-scroll

我们正在构建一个 Web 应用程序，它能够向其他用户发送消息，我们选择了 Facebook 的方式来实现它。意思是，一个固定高度的 div，当页面加载时，该 div 的滚动条在底部。当用户向上滚动时，我们会收到带有 ajax 的旧消息。（查看[facebook 消息应用程序](https://www.facebook.com/messages/)）

**那么有人知道用于无限向上滚动的优秀且稳定的 jQuery 插件吗？** 我发现了很多用于无限向下滚动和延迟加载的插件。但没有向上滚动。

谢谢！

*编辑：2012 年 4 月 16 日*为此 制作了我自己的[jquery 插件](https://github.com/prebenh/jQuery-ScrollUp)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T07:29:01.260

我为此制作了自己的 jQuery 插件：

[https://github.com/prebenh/jQuery-ScrollUp](https://github.com/prebenh/jQuery-ScrollUp)

这是一个例子：

[http://scrollup.comule.com/](http://scrollup.comule.com/)

# haskell - 为什么默认情况下不适用 forall（RankNTypes 用法）？

> ID：10129101
> 
> 赞同：8
> 
> 时间：2012-04-12T17:58:01.357
> 
> 标签：haskell, ghc

我不是很熟悉`forall`，但最近读到这个问题：[Haskell/GHC 中的`forall` 关键字是做什么的？](https://stackoverflow.com/questions/3071136/what-does-the-forall-keyword-in-haskell-ghc-do)

答案之一是这个例子：

```
 {-# LANGUAGE RankNTypes #-}
 liftTup :: (forall x. x -> f x) -> (a, b) -> (f a, f b)
 liftTup liftFunc (t, v) = (liftFunc t, liftFunc v) 
```

解释很好，我明白`forall`这里在做什么。但我想知道，这不是默认行为是否有特殊原因。是否有过不利的时候？

编辑：我的意思是，默认情况下不能插入forall是有原因的吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-12T18:00:04.623

嗯，它不是 Haskell 2010 标准的一部分，所以默认情况下它不是打开的，而是作为语言扩展提供的。至于为什么它不在标准中，rank-n 类型比标准 Haskell 的普通 rank-1 类型更难实现；它们也不是那么频繁地需要，因此出于语言和实现简单的原因，委员会可能决定不打扰它们。

当然，这并不意味着 rank-n 类型没有用；它们确实如此，没有它们，我们就没有像[`ST`monad](http://hackage.haskell.org/packages/archive/base/latest/doc/html/Control-Monad-ST.html)这样有价值的工具（它提供了高效的本地可变状态——就像`IO`你所能做的就是使用`IORef`s）。但它们确实给语言增加了相当多的复杂性，并且在应用看似良性的代码转换时可能会导致奇怪的行为。例如，一些 rank-n 类型检查器将允许`runST (do { ... })`但拒绝`runST $ do { ... }`，即使这两个表达式在没有 rank-n 类型的情况下总是等价的。有关它可能导致的意外（有时是令人讨厌的）行为的示例，请参阅[此 SO 问题。](https://stackoverflow.com/questions/8343239/type-error-with-rank-2-types-and-function-composition)

如果像 sepp2k 所问的那样，您是在问为什么`forall`必须明确地将其添加到类型签名中以获得更高的通用性，那么问题在于它`(forall x. x -> f x) -> (a, b) -> (f a, f b)`实际上是一个比`(x -> f x) -> (a, b) -> (f a, f b)`. 使用后者，您可以传入任何形式的函数`x -> f x`（对于任何`f`and `x`），但对于前者，您传入的函数必须适用于*all* `x`。因此，例如，类型函数`String -> IO String`将是第二个函数的允许参数，但不是第一个函数；它必须有类型`a -> IO a`。如果后者自动转换为前者，那将是相当混乱的！他们是两种截然不同的类型。

`forall`将隐含的 s 明确化可能更有意义：

```
forall f x a b. (x -> f x)           -> (a, b) -> (f a, f b)
forall f a b.   (forall x. x -> f x) -> (a, b) -> (f a, f b) 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-12T20:03:09.553

我怀疑默认情况下不启用更高级别的类型，因为[它们使类型推断 undecidable](http://www.haskell.org/haskellwiki/Rank-N_types)。这也是为什么，即使启用了扩展，您也需要使用`forall`关键字来获得更高等级的类型 - GHC 假定所有类型都是 rank-1，除非明确告知，以便推断尽可能多的类型信息。

换句话说，没有通用的方法来推断更高级别的类型`(forall x. x -> f x) -> (a,b) -> (f a, f b)`，因此获得该类型的唯一方法是通过显式类型签名。

编辑：根据上面 Vitus 的评论，rank-2 类型推断是可确定的，但更高级别的多态性不是。所以这种类型签名在技术上是可推断的（尽管算法更复杂）。启用 rank-2 多态类型推断的额外复杂性是否值得值得商榷......

# windows - 如何在 QT 中从另一个库链接一个库

> ID：10129104
> 
> 赞同：0
> 
> 时间：2012-04-12T17:58:10.473
> 
> 标签：windows, qt, hyperlink

例如：

lib1 它是 lib1 路径中的一个库

lib2 它是 lib2 路径中的一个库，它依赖于 lib1，这意味着：

lib2 .pro 文件有：

LIBS += -L../lib1 -llib1

包含路径 += ../lib1

测试它是依赖于 lib2 的测试路径中的可执行文件，这意味着：

测试 .pro 文件有：

LIBS += -L../lib2 -llib2

包含路径 += ../lib2

我正常构建 lib1 和 lib2，但是当我尝试构建测试时，我在 Windows 上得到了这个错误（但不是在 MAC 上）：

在函数“lib2 中的函数”中

```
undefined reference to 'function in lib1' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T20:50:04.857

您还需要添加`win32:LIBS += -L../lib1 -llib1`到测试 .pro 文件。

Windows 要求在链接时解析所有符号，因此如果`test`需要`lib2`它本身需要，`lib1`则必须同时与测试链接。`lib2``lib1`

Unix（MacOSx，Linux，...）可以链接带有无法解析符号的库，因此`test`只需要`lib1`在加载时。

# ios - drawRect:/renderInContext: 问题

> ID：10129106
> 
> 赞同：0
> 
> 时间：2012-04-12T17:58:16.110
> 
> 标签：ios, uiview, calayer, exc-bad-access, drawrect

似乎在尝试将我的观点纳入上下文时遇到了一些问题。

我的基本设置是，我有一个视图控制器，它拥有一个视图控制器，`UIPageViewController`我在其中加载具有用户手指可以绘制的视图的控制器。基本上我有一本可以画进去的书。

当书中翻页时，我通过调用保存图像

```
- (UIImage *)wholeImage {
    // Render the layer into an image and return
    UIGraphicsBeginImageContext(self.bounds.size);
    [self.layer renderInContext:UIGraphicsGetCurrentContext()];
    UIImage *wholePageImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();
    return wholePageImage;
} 
```

然后它的返回值被保存到一个文件中。但是，当我调用此保存方法时，则行

```
[self.layer renderInContext:UIGraphicsGetCurrentContext()]; 
```

被击中，这似乎调用了我的`drawRect:`方法，该方法被覆盖如下，

```
- (void)drawRect:(CGRect)rect {
    // Draw the current state of the image
    [self.currentImage drawAtPoint:CGPointMake(0.0f, 0.0f)];
    CGPoint midPoint1 = [self midPointOfPoint1:previousPoint1 point2:previousPoint2];
    CGPoint midPoint2 = [self midPointOfPoint1:currentPoint point2:previousPoint1];

    // Get the context
    CGContextRef context = UIGraphicsGetCurrentContext(); 

    // Add the new bit of line to the image
    [self.layer renderInContext:context];
    CGContextMoveToPoint(context, midPoint1.x, midPoint1.y);
    CGContextAddQuadCurveToPoint(context, previousPoint1.x, previousPoint1.y, midPoint2.x, midPoint2.y); 
    CGContextSetLineCap(context, kCGLineCapRound);
    CGContextSetLineWidth(context, self.lineWidth);
    if (self.drawMode == LNDrawViewDrawModeTipex) CGContextSetBlendMode(context, kCGBlendModeClear);
    else CGContextSetBlendMode(context, kCGBlendModeCopy);
    CGContextSetStrokeColorWithColor(context, self.lineColour.CGColor);
    CGContextStrokePath(context);

    // Call super
    [super drawRect:rect];
} 
```

这是有道理的，但它似乎被递归调用，直到最终我在这条线上得到一个 EXC_BAD_ACCESS

```
[self.currentImage drawAtPoint:CGPointMake(0.0f, 0.0f)]; 
```

我对造成这种情况的原因完全不知所措，并且一直让我发疯。

如果有帮助，我的调用堆栈是这样开始的

![在此处输入图像描述](../Images/517cf600bc2ea68cdd43f5be139bc741.png)

然后递归地继续，直到它最终以

![在此处输入图像描述](../Images/09080fab65c32d6a2c9b5a1d99675aac.png)

真的很感激任何人都可以给予的帮助和洞察力！！

编辑：（触摸移动添加）

```
-(void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event {
    // Get the touch
    UITouch *touch = [touches anyObject];

    // Get the points
    previousPoint2 = previousPoint1;
    previousPoint1 = [touch previousLocationInView:self];
    currentPoint = [touch locationInView:self];

    // Calculate mid point
    CGPoint mid1 = [self midPointOfPoint1:previousPoint1 point2:previousPoint2]; 
    CGPoint mid2 = [self midPointOfPoint1:currentPoint point2:previousPoint1];

    // Create a path for the last few points
    CGMutablePathRef path = CGPathCreateMutable();
    CGPathMoveToPoint(path, NULL, mid1.x, mid1.y);
    CGPathAddQuadCurveToPoint(path, NULL, previousPoint1.x, previousPoint1.y, mid2.x, mid2.y);
    CGRect pathBounds = CGPathGetBoundingBox(path);
    CGPathRelease(path);

    // Take account of line width
    pathBounds.origin.x -= self.lineWidth * 2.0f;
    pathBounds.origin.y -= self.lineWidth * 2.0f;
    pathBounds.size.width += self.lineWidth * 4.0f;
    pathBounds.size.height += self.lineWidth * 4.0f;

    UIGraphicsBeginImageContext(pathBounds.size);
    [self.layer renderInContext:UIGraphicsGetCurrentContext()];
    self.currentImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();

    [self setNeedsDisplayInRect:pathBounds]; 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T18:12:41.397

你不能打电话`[self.layer renderInContext:]`来`drawRect:`，期间。如您所见，如果实现了`renderInContext:`调用`drawRect:`，则会导致无限递归。

您应该单独渲染一本书，然后使用渲染的图像让用户在上面绘图。`UIGraphicsBeginImageContext()`一种方法是在/`UIGraphicsEndImageContext()`块中包含一个独立的绘图代码，并在`drawRect:`. 另一种方法是使用两个不同的视图，它们不是彼此的子视图，一个绘制一本未改动的书，另一个绘制用户草图。

编辑：首先，您需要一个原始图像（书页，无论如何）。*在不调用*的情况下将其绘制在`UIGraphicsBeginImageContext()`/`UIGraphicsEndImageContext()`块中并将其保存在视图的 ivar 中（例如，）。在调用中（它会调用你）来更新视图。用作背景图像。 *`[self.layer renderInContext:]``self.currentImage``touchesMoved:withEvent:``setNeedsDisplay``drawRect:``self.currentImage``drawRect:`*

 *我希望我不会太含糊。*

# java - 一旦服务器宕机，这个代码片段就会不断地重复调用服务器，如何停止？

> ID：10129107
> 
> 赞同：0
> 
> 时间：2012-04-12T17:58:21.447
> 
> 标签：java

一旦服务器关闭，这个片段就会不断地重复调用服务器，一旦请求失败，我怎样才能让它停止重复调用？也许是一个捕获/错误块？但我不确定如何实现它。谢谢！

```
HttpURLConnection httpConn = null;
InputStream is = null;
OutputStream os = null;
String xmlResponse = null;

try {
   //Open Connection

       String CollectionId="123";
       String GetHTML="1";

       String urlString = "http://tester.com/webservices/ContentWS.asmx/GetCollection?CollectionId="+CollectionId+"&GetHTML="+GetHTML;

       System.out.println(urlString);

       //String encodedUrl = URLEncoder.encode(urlString,"UTF-8");

   URL url = new URL(urlString);
   httpConn = (HttpURLConnection)url.openConnection();

   //Setup Request
   httpConn.setRequestMethod("GET");
   httpConn.setDoOutput(true);
   httpConn.setReadTimeout(10000);
   httpConn.connect();

   xmlResponse = convertStreamToString(httpConn.getInputStream());
  }
  catch (IOException e) {
      e.printStackTrace();
   }

String htmlContent = "";
   try {
       DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
       DocumentBuilder db = dbf.newDocumentBuilder();
       InputSource input = new InputSource();
       input.setCharacterStream(new StringReader(xmlResponse));

       Document doc = db.parse(input);
       NodeList nodes = doc.getElementsByTagName("Item");

       // iterate the Items
               int i = 0;
               int j = 0;
               Date now = new Date();
       for (i = 0; i < 2; i++) {
                  //Grab HTML to append to htmlContent
                  NodeList teaser = doc.getElementsByTagName("Html");
                  Element line = (Element) teaser.item(i);
                  htmlContent += getCharacterDataFromElement(line);
       }
   }
   catch (Exception e) {
       e.printStackTrace();
   }
htmlContent = ... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T18:16:07.540

此代码打印堆栈跟踪，但不会抛出错误，因此您的调用代码不知道问题所在。

让你的 catch() 块重新抛出错误有帮助吗？

```
e.printStackTrace();
throw e; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T19:02:42.760

一切似乎都奏效了。您的连接已打开并正常工作，但您忘记了一个小细节。您必须在完成后使用`HttpURLConnection.disconnect()`，告诉程序您已完成从连接请求信息。

我从 Java 的角度来看网络是这样的：设置连接 --> 发送连接请求 --> 已连接 --> 获取数据 --> 对数据进行操作 --> 关闭连接

就目前而言，请快速注意`HttpURLConnection.disconnect()`，确保即使抛出异常也会断开连接。`} finally {`如果您愿意，可以尝试在末尾添加语句。

# html - HTML列表元素不会水平列出？

> ID：10129111
> 
> 赞同：1
> 
> 时间：2012-04-12T17:58:31.270
> 
> 标签：html, menu, html-lists

基本上我正在尝试制作一个网络编码教程网站（太棒了，我自己做不到）。对于我的生活，我无法弄清楚为什么我的列表项不会水平而不是垂直列出。

[请参阅 jsFiddle。](http://jsfiddle.net/QUjXh/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T18:04:29.137

这是因为您的选择器`width: 100px`上有一个集合`#menu`，它正在将该框压缩为每行只允许一个元素。[只需将其删除。](http://jsfiddle.net/pE2Y4/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T18:03:39.463

在这里修复了[jsfiddle](http://jsfiddle.net/QUjXh/8/)

```
#menu {
    width: 600px;                   <-- changed from 100px to 400px
    height: 15px;
    position: relative;
    color: #999999;
    margin: 0px auto;
    float:left;                       <-- new
} 
```

答案已更新。容器元素应该足够宽以水平容纳所有元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T18:16:14.140

将菜单宽度 100px 更改为 100% 它的工作

这是我的输出：http: [//jsfiddle.net/srinivasan/XmhqW/](http://jsfiddle.net/srinivasan/XmhqW/)

# facebook-graph-api - 使用 JavaScript SDK 分页在 Facebook 中加载数据的另一种方法？

> ID：10129118
> 
> 赞同：0
> 
> 时间：2012-04-12T17:58:45.190
> 
> 标签：facebook-graph-api, facebook-javascript-sdk, javascript-framework

我正在编写一些应用程序，我需要向其中添加 Facebook 分页。

我已经阅读了*[Jeff Bowen How-To: Paging with the Graph API and FQL 这篇](https://developers.facebook.com/blog/post/478/)*文章，它是很棒的文档。我用过它，一切正常。但是，每次我向 Facebook 请求加载新数据时，它都会创建一个新的“脚本”元素并在其中加载数据。如果我做了很多请求，显然一段时间后页面会被这些脚本标签超载。所以，也许还有另一种方法可以在 Facebook JavaScript SDK 中加载数据，或者......也许我可以在收到新的脚本标签后删除以前的脚本标签？如果我可以 - 我怎么能做到这一点？

或者..这样超载页面可以吗？我从来没有这样做过。

PS：文档中创建标签的那段代码：

```
function loadPosts() {
    var script = document.createElement("script");
    script.src = graphURL;
    document.body.appendChild(script);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T18:26:08.750

请参阅*[XML DOM - 删除节点](http://www.w3schools.com/dom/dom_nodes_remove.asp)*。

将脚本附加到可能位于 body 标记下方的 div 标记中，并在每次调用时将其清除。

```
<div id="scripts"></div>
<script>
    function loadPosts() {
        var script = document.createElement("script");
        script.src = graphURL;
        document.getElementById("sripts").innerHTML=""; // Clear all code from div tag
        scriptthis=document.getElementById("scripts");
        scriptthis.appendChild(script);  // New script tag becomes 0
    }
</script> 
```

# php - SQLSTATE [42S22]：未找到列：1054 未知列

> ID：10129120
> 
> 赞同：8
> 
> 时间：2012-04-12T17:58:47.057
> 
> 标签：php, mysql, sql, pdo

我正在尝试使用 PDO 向 MySQL 插入一条记录，我的 sql 语句可以在以下代码中看到。

```
<?php
    try{
        //include file myfunctions.php allows us to calls functions from it
        include ("myfunctions.php");
        //Assign function getConnection() from myfunctions.php to variable $db
        $db = getConnection();

        foreach($_POST['chk'] as $check_value)
        {
            $check = $check_value;
            $fav = "channel/item [title = \"$check\"]";
            $holidayDoc = simplexml_load_file('holidays.xml');
            $favourites = $holidayDoc->xpath($fav);

        foreach($favourites as $currentFav)
        {
            echo "{$currentFav->link}". "<br \>";
            echo "{$currentFav->title}". "<br \>";
            echo "{$currentFav->description}". "<br \>";
            echo "{$currentFav->pubDate} ". "<br \>";

            $sql = "INSERT INTO `saved_holidays` (`subscriberID`, `link`, `pubDate`, `title`, `description`) 
            VALUES (`John`, `$currentFav->link`, `$currentFav->pubDate`, `$currentFav->title`, `$currentFav->description`)";

            $db->exec($sql);
            $db = null;
        }
    }
}
        catch(PDOException $e)
        {
            echo $e->getMessage();
        }
?> 
```

执行此代码时，我遇到以下错误消息；

> SQLSTATE [42S22]：找不到列：1054 '字段列表'中的未知列 'John'

这无疑是解决这个问题的一个简单方法，但我似乎看不到它，谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-04-12T18:01:54.763

我相信这是因为您使用反引号来表示您的值。将它们更改为单引号，您应该会很好

```
$sql = "INSERT INTO `saved_holidays` (`subscriberID`, `link`, `pubDate`, `title`, `description`) 
            VALUES ('John', '$currentFav->link', '$currentFav->pubDate', '$currentFav->title', '$currentFav->description')"; 
```

如果您想了解更多信息，请参阅[这个关于单引号与反引号的 SO 问题](https://stackoverflow.com/questions/2122721/what-are-the-differences-between-backtick-and-single-quote-can-i-use-if-stateme)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-12T18:02:06.407

` 用于指定字段，您必须对值使用单引号`'`。

```
$sql = "INSERT INTO `saved_holidays` (`subscriberID`, `link`, `pubDate`, `title`, `description`) 
        VALUES ('John', '$currentFav->link', '$currentFav->pubDate', '$currentFav->title', '$currentFav->description')"; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-12T18:01:45.190

```
 $sql = "INSERT INTO `saved_holidays` (`subscriberID`, `link`, `pubDate`, `title`, `description`) 
            VALUES ('John', '$currentFav->link', '$currentFav->pubDate', '$currentFav->title', '$currentFav->description')"; 
```

仅将 ` 用于字段，将 ' 用于值

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-01-24T12:24:11.110

对于其他为此苦苦挣扎的人，这就是我看到此错误消息以及如何解决它的原因：

1.  我正在研究一个共享代码库（在工作中有很多贡献者）
2.  其他处理代码的人在您不知情的情况下添加了一个列。
3.  我拉了代码，昨天一切正常，但今天我收到错误消息：“SQLSTATE [42S22]：找不到列：1054 '字段列表'中的未知列'column_name'”

您所要做的就是去您的表并添加列（对我来说，我是在 phpmyadmin 中执行此操作的）。

从我收到的错误消息中，我可以推断出需要附加列pricing_formula 的“属性”表。只需将此列直接插入数据库即可。

作为参考，这是我的错误信息：

```
"SQLSTATE[42S22]: Column not found: 1054 Unknown column 'pricing_formula' in 
'field list' (SQL: select `site`.`name`, `domain`, `site`.`uuid`, 
`pricing_formula`, `client`.`uuid` as `clientRef` from `site` inner join 
`client` on `site`.`client_id` = `client`.`id` where `client_id` = 1 and 
`site`.`deleted_at` is null)" 
```

希望这可以帮助某人。如果有人仍然不完全知道如何解决此问题，但认为我的解释描述了他们的问题，请联系 - 我会尽力帮助您解决问题。

此外，这是一个带有 Angular 前端的 Laravel 后端项目。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-03-19T06:42:33.287

用这个更新你的模型：

```
public $timestamps = false; 
```

发生这种情况是因为 Eloquent 函数将 'updated at' 属性添加到您的查询中，即时间戳，这将引发此错误。

# mysql - 使用另一个表的行作为输入创建表

> ID：10129126
> 
> 赞同：0
> 
> 时间：2012-04-12T17:59:07.320
> 
> 标签：mysql, sql

我正在尝试使用另一个表和算法创建一个表。该表仅包含 1 列，如下所示：

```
| user_id |
| 1       |
| 2       |
| etc...  | 
```

然后我有一个 SQL 脚本，它计算给定 user_id 作为其输入的结果数。我想创建一个这样的表：

```
| user_id | f(user_id) |
| 1       | 2          |
| 2       | 4          |
| etc...  | etc...     | 
```

我怎样才能做到这一点？

**编辑：**通过算法，我只是指一个看起来像这样的 SQL 脚本：

```
SELECT COUNT(user_id) AS actives
FROM (
SELECT user_id
FROM participations
INNER JOIN (SELECT users.id FROM users WHERE users.referrer=XXXXXX) godsons
ON user_id = godsons.id
WHERE participations.game_id=X
GROUP BY user_id) actives 
```

其中 users.referrer 将被第一个表中的每个 user_id 替换

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T18:07:29.697

您可能会发现[SELECT INTO 语句](http://www.w3schools.com/sql/sql_select_into.asp)很有用。

# php - 我不能在变量中包含 while 循环

> ID：10129130
> 
> 赞同：-2
> 
> 时间：2012-04-12T17:59:22.463
> 
> 标签：php, variables

我有一个字符串：

```
<?
$home = '<ul>
<li>
first line
</li>
// Here I want to write some while loop//
<li>
second line
</li>
</ul>';

    // somewhere on the bottom of the page I echo $home                     

?> 
```

我无法将主变量分开以在它之间包含 while 循环代码，我曾尝试与之分开，`'; echo '` 但它不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T18:25:51.620

我认为您想要做的是将字符串的第一部分与 while 循环的结果连接起来，然后与字符串的最后一部分连接起来。如：

```
<?php 

   while() {} // return results

   $home = '<ul><li>first line</li>' . $results . '<li>second line</li></ul>';

?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T18:25:20.727

你不能在变量内循环

而是尝试

```
<ul>

<li></li>

<?php 

while($flag) { 

 // do stuff and make sure you mark $flag as false 
 // otherwise it will loop for ever
 // the idea is to break the loop after you did what you need to do

} 

?>

<li></li>

</ul> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-12T18:26:28.553

尝试将变量分成不同的部分，例如：

```
<?
$home = '<ul><li>first line</li>';

while(something is true) {

   $home .= "This will end up in the middle of your variable content";

}

$home .= '<li>second line</li></ul>';
?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-02-06T20:15:54.497

```
<?
$home = '<ul><li>first line</li>';

while(something is true) {

   $home .= "This will end up in the middle of your variable content";

}

$home .= '<li>second line</li></ul>';
?> 
```

# matlab - 绘图计数值

> ID：10129135
> 
> 赞同：0
> 
> 时间：2012-04-12T17:59:30.823
> 
> 标签：matlab, plot

我有一个功能，可以找到四个人的测试的正确和错误结果。即在每次运行中，正确的条目与错误的条目相同。

测试将进行 10 次。这从正确的答案中应该是显而易见的。

我想以图形方式表示 1 名学生的表现或进步。

希望我现在很清楚。例子：

```
 run = 1     correct = 5     mistake=5  
 .
 .
 .
 run = n     correct = 3     mistake=7 
```

我的问题是如何以图形方式表示我的结果？需要查看 n 次运行的正确和错误计数的图形表示。

我尝试了绘图和直方图，但它们不是一个很好的表示

不是Matlab的专业人士，你能建议吗？

示例：运行 10 次：

```
 corrects = 

[1x4 double]    [1x4 double]    [1x4 double]    [1x4 double]    [1x4 double]    [1x4   double]    [1x4 double]    [1x4 double]    [1x4 double]    [1x4 double] 
```

我做了：图（5）；bar([错误{1}；更正{1}]); ![这是第一次测试中4个人的四个值](../Images/9773fd1e162ba2f5a6d9ff05fe4658f4.png)

但我需要的是第 1 个人的 10 次测试

我试过 ：

```
 bar([mistakes{test}(1) ; corrects{test}(1)]); 
```

![奇怪的！](../Images/159cfce4f5383fb720ec2c6be03fb5e8.png) 这些不是很好的介绍

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T18:13:11.703

因此，要比较所有 n 次运行的正确与错误：

```
correct = zeros(n, 1);
wrong = zeros(n, 1);
for run=1:n
  [correct(run), wrong(run)] = your_function();
end
bar([correct wrong]); 
```

因此，您为数组中的每次运行存储正确/错误。正确（1）将是第一次运行时正确的数字，等等。 bar（[正确错误]）；每次运行将显示两个条 - 蓝色条表示正确，红色条表示错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T19:05:34.103

我会计算每次运行的错误分类率。

假设你有向量`run = 1:n;`和`correct = randi(11,1,n)-1;`。然后`mistake = 10 - correct;`。

误分类率为`MCR = mistake./10;`。

您可以将分布绘制为箱线图：

```
boxplot(MCR) 
```

重要的是比较具有不同参数的运行之间的 MCR 分布。所以你会有一组运行，你可以将它们分开`boxplot`。

此外，您可以在箱线图上绘制真实的 MCR 值而不是它们的分位数。请参阅我关于如何做[蜂群情节](https://stackoverflow.com/q/9777592/)的问题。

**编辑**：

如果您的正确结果取决于某个分数，您可以生成所谓的**ROC**（接收器操作特征）曲线。在这一点上，我建议您参考[wiki 文章](http://en.wikipedia.org/wiki/Receiver_operating_characteristic)。检查它是否是你想要的。

# c++ - 工资单项目中的 fstream 问题

> ID：10129137
> 
> 赞同：0
> 
> 时间：2012-04-12T17:59:39.963
> 
> 标签：c++, oop

我的工资单项目有问题。我们正在使用 fstream 来写入和读取 2 个单独的文件。每当我们运行添加记录并对主菜单问题回答“否”时，程序以代码 0 退出，但没有任何内容添加到文件中。如果我们说“是”返回主菜单并尝试添加另一条记录，我们会以代码 5 退出，这是employee-details.dat 文件中失败的退出代码。这两个文件都在目录中，并且在我们进行一些修改并开始使用 fstream 之前已经工作。

关于采取哪个方向的任何提示？

```
#include <iostream>
#include <fstream>
#include <iomanip>
#include <cmath>
#include <cstdio>
#include <cstring>
#include <string>
#include <cstdlib>
#include <conio.h>
using namespace std;

class payroll
{
private:
    char empnum[10];
    string empfirstname;
    string emplastname;
    char empsin[9];
    char empdob[10];
    char empphone[15];
    string empstreet;
    string empcity;
    string empprovince;
    string empcountry;
    string empstatus;       //Employee status. EX: Terminated, On leave, Active etc.
    double empsalaryei;
    double empsalaryfedtax;
    double empsalarycpp;
    double empsalarynet;
    double empsalarygross;
    double empsalaryprovtax;

public: 
    void addrec(void);
    void modrec(void);
    void viewrec(void);
    void exit1(void);
};

payroll rec;
payroll emp;
bool check = false;
bool filecheck1 = false;
bool filecheck2 = false;
fstream fileemp;
fstream filesal;

void mainmenu()
{

    system("CLS");
    char ch;

    do
    {
        if (check == true)
        {
            system("CLS");
            ch=0;
        }
        else
        {
            cout<<"1\. Add an employee\n";
            cout<<"2\. Modify employee record\n";
            cout<<"3\. View employee record\n";
            cout<<"0\. Exit\n";
            cout<<"Please choose an item: ";
            cin>>ch;
        }

        switch(ch)
        {
            case '1':
                emp.addrec();
                break;

            case '2':
                emp.modrec();
                break;

            case '3':
                emp.viewrec();
                break;

            case '0':
                emp.exit1();

        }
    }while(ch !=0);

}

int main()
{
    if (check==false)
    {
        mainmenu();
    }else{
        exit(25);
    }
}

void openfiles()
{
    string filename1 = "employee-details1.dat";
    string filename2 = "payroll-info.dat";

    fileemp.open(filename1.c_str(), ios::in|ios::out|ios::binary);
    filecheck1 = true;
    if(fileemp.fail())
    {
        cout <<"\nSorry the Employee file was not opened"<< "\nPlease check that the file exists" << endl;
        exit(5);
    }

    filesal.open(filename2.c_str(), ios::in|ios::out|ios::binary);
    filecheck2 = true;
    if(filesal.fail())
    {
        cout << "\nSorry the Salary file was not opened"<< "\nPlease check that the file exists" << endl;
        exit(10);
    }
}

void payroll::addrec(void)          //Record adding
{
    system("CLS");
    char userinputadd = ' ';
    check = false;

    if ((filecheck1 == false) && (filecheck2 == false))     //check if our files are open
    {
        openfiles();            //open both of our data files before the user chooses
    }                   

    fileemp.seekp(0L,ios::end);     //go to the end of the employee data file
    filesal.seekp(0L,ios::end);     //go to the end of the salary file
    cout << "Please Enter the Employee Number: ";
    cin>>rec.empnum;
    cin.clear();
    cout << "\nPlease Enter the Employee's First Name: ";
    cin>>rec.empfirstname;
    cin.clear();
    cout << "\nPlease Enter the Employee's Last Name: ";
    cin>>rec.emplastname;
    cin.clear();
    cout << "\nPlease Enter the Employee's Date of Birth (mmddyyyy): ";
    cin>>rec.empdob;
    cin.clear();
    cout << "\nPlease Enter the Employee's Social Insurance Number: ";
    cin>>rec.empsin;
    cin.clear();
    cout << "\nPlease Enter the Employee's Phone Number: ";
    cin>>rec.empphone;
    cin.clear();
    cout << "\nPlease Enter the Employee's Address: ";
    cin>>rec.empstreet;
    cin.clear();
    cout << "\nPlease Enter the Employee's City: ";
    cin>>rec.empcity;
    cin.clear();
    cout << "\nPlease Enter the Employee's Province: ";
    cin>>rec.empprovince;
    cin.clear();
    cout << "\nPlease Enter the Employee's Country: ";
    cin>>rec.empcountry;
    cin.clear();
    cout<<"\nPlease Enter the Employee's Status: ";
    cin>>rec.empstatus;
    cin.clear();
    cout << "\nPlease Enter the Employee's Weekly Gross Salary: ";
    cin >> rec.empsalarygross;
    cin.clear();

    rec.empsalaryei = rec.empsalarygross * 0.0178;
    rec.empsalarycpp = (rec.empsalarygross-134.61)*0.0495;
    rec.empsalaryfedtax = rec.empsalarygross * 0.15;
    rec.empsalaryprovtax = rec.empsalarygross*0.0505;
    rec.empsalarynet = rec.empsalarygross-rec.empsalaryei-rec.empsalarycpp-rec.empsalaryfedtax-rec.empsalaryprovtax;

    fileemp<<rec.empnum<<","<<rec.empfirstname<<","<<rec.emplastname<<","<<rec.empdob<<","<<rec.empsin<<","<<rec.empphone<<","<<rec.empstreet<<","<<rec.empcity<<","<<rec.empprovince<<","<<rec.empcountry<<"0L";
    filesal<<rec.empnum<<","<<rec.empsalaryei<<","<<rec.empsalarycpp<<","<<rec.empsalaryfedtax<<","<<rec.empsalaryprovtax<<","<<rec.empsalarynet<<"0L";
    cin.clear();

    cout<<"Press any key to the main menu.... ";
    getch();
    mainmenu();
}

void payroll::modrec(void)          //Record Modification
{
    system("CLS");
    int empmodnum=0;
    check = false;
    char userinputmod = ' ';

    cout<<"\nEnter the employee number for the record you would like to modify: ";
    cin>>empmodnum;

    cout<<"Press any key to the main menu.... ";
    getch();
    mainmenu();
}

void payroll::viewrec(void)         //Record viewing
{
    int ch1 = 0;
    int i=0;
    system("CLS");
    check = false;
    char userinputview = ' ';
    if ((filecheck1 == false) && (filecheck2 == false))
    {
        openfiles();            //open both of our data files before the user chooses
    }

    cout <<"Which file would you like to view?"
    <<"\n1) Employee Details"
    <<"\n2) Employee Salary Info\n";
    cin >> ch1;

    if(ch1==1)
    {
        i=0;
        fileemp.seekg(0L,ios::beg);
        cout<<"\nList of Records in the Employee Data file"<<endl<<endl;

        while(fileemp.read((char*)&rec,sizeof(rec)))
        {
            cout<<endl<<"Record#"<<""<<i++<<setw(4)<<rec.empnum<<setw(10)
            <<rec.empfirstname<<setw(20)<<rec.emplastname<<setw(30)
            <<rec.empsin<<setw(9)<<rec.empdob<<setw(10)<<rec.empphone<<setw(15)
            <<rec.empstreet<<setw(25)<<rec.empcity<<setw(15)<<rec.empprovince<<setw(15)
            <<rec.empcountry<<setw(15)<<rec.empstatus<<setw(10)
            <<endl;
        }

        if (i==0)
        {
            cin.clear();
            cout <<"\nNO RECORDS EXIST";
            cout <<"\nPress any key to continue...";
            getch();
        }else{
            cin.clear();
            cout<<endl<<"Press any key...";
            getch();
        }
    }else if(ch1==2)
    {
        i=0;
        filesal.seekg(0L,ios::beg);
        cout <<"\nList of Records in the Employee Salary file"<<endl<<endl;

        while(filesal.read((char*)&rec,sizeof(rec)))
        {
            cout <<endl<<"Record#"<<""<<i++<<setw(4)
            <<rec.empnum<<setw(10)<<rec.empsalarygross<<setw(15)
            <<rec.empsalaryei<<setw(10)<<rec.empsalarycpp<<setw(10)
            <<rec.empsalaryfedtax<<setw(10)<<rec.empsalaryprovtax<<setw(10)
            <<rec.empsalarynet<<setw(10)
            <<endl;
        }
        if (i==0)
        {
            cout <<"\nNO RECORDS EXIST";
            cout <<"\nPress any key to continue...";
            getch();
            mainmenu();
        }else{
            cout<<endl<<"Press any key...";
            getch();
            mainmenu();
        }
    }
}

void payroll::exit1(void)
{
    fileemp.close();
    filesal.close();
    filecheck1 = false;
    filecheck2 = false;
    check = true;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T19:03:28.640

在函数**void openfiles()**中，您使用过

```
fileemp.open(filename1.c_str(), ios::in|ios::out|ios::binary||ios::app);
.
.
.
.
filesal.open(filename2.c_str(), ios::in|ios::out|ios::binary||ios::app); 
```

它应该是

```
fileemp.open(filename1.c_str(), ios::in|ios::out|ios::binary|ios::app);
.
.
.
.
filesal.open(filename2.c_str(), ios::in|ios::out|ios::binary|ios::app); 
```

在此更改之后，我对其进行了编译，它似乎工作正常。

# java - 是否有一个真实的 java 示例定义何时使用一维数组而不是数组列表更好？

> ID：10129139
> 
> 赞同：3
> 
> 时间：2012-04-12T17:59:45.003
> 
> 标签：java, arrays, performance, arraylist

我知道：

在选择一维数组和数组列表的情况下，数组列表应该始终是首选，但有一个主要例外；当收集原始值和效率是一个问题。由于 ArrayList 在内部使用数组，因此在对 Object 类型执行操作时，高性能（在处理时间和内存占用方面）类似于数组。但是，ArrayList 的性能在对原始类型（例如 int 或 long）进行操作时会受到影响，因为 ArrayList 要求将所有元素包装在 Object（例如 Integer 或 Long）中。虽然自动装箱减少了包装和展开所需的代码量，但它并没有消除性能问题，因为仍在创建包装器对象。

但我正在寻找一个真实的例子，我将收集原始值并且效率是一个问题。你能想到一个吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T18:06:11.540

[SCIENCE](http://xkcd.com/54/). It's very common to have one or more sensors collecting a fixed number of data values per time interval. E.g. think of hundreds of thermometers collecting the temperature every millisecond.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T18:11:27.147

或者数学，你有一个双精度矩阵或向量，并希望以某种方式对它们求和/聚合。这里的拆箱开销会很大，有很多值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T18:16:58.393

我在创建字节缓冲区的任何时候都使用过数组。如果您知道结构的确切大小（您可能应该知道缓冲区的大小），那么使用数组而不是 Collection 会更容易和更快。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-12T18:10:49.600

不过，这不是使用数组的唯一原因。

每当您需要一个固定大小、可索引的集合时，数组都是更自然的选择。例如，如果要存储 IPv4 地址，将字节存储在列表中而不是字节数组中会很尴尬。尽管就性能而言，这可能并不重要。

在引入泛型之前，数组是保证类型安全的唯一方法。

如果您正在寻找效率是关键的示例，那么只需查看套接字/文件 I/O。使用列表作为缓冲区而不是数组将是非常无效的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-12T18:14:50.080

通常，在实现算法时，人们使用 int/float 而不是 Integer 等。因此，数组是最佳选择。甚至效率提高。

更多非技术观察：

人们在学校/大学的最初几天通过学习 C 开始编程。（一般观察......在 100% 的情况下无效）。使用数组解决问题的心态已经在我们的大脑中钻了出来，我们倾向于尝试使用数组……至少在对问题进行初步思考时，人们会根据数组进行思考。

# php - 如何改进我的搜索脚本？

> ID：10129140
> 
> 赞同：0
> 
> 时间：2012-04-12T17:59:45.857
> 
> 标签：php, javascript, jquery, mysql

我的页面上有这个搜索脚本，可以搜索显示的表格。该表使用数据库中的 PHP 显示。它实际上是一个列表，这个列表是在 A 到 Z 的超链接的帮助下按字母顺序排序的。现在我需要搜索整个数据库而不是显示的数据库。任何帮助或资源都会有所帮助。:)

```
$(document).ready(function() {

    $("#search").keyup(function() {

        if($(this).val() != "") {

            $("#some_table tbody>tr").hide();
            $("#some_table td:contains-ci('" + $(this).val() + "')").parent("tr").show();
        } else {
            $("#some_table tbody>tr").show();
        }
    });
});

$.extend($.expr[":"], {
    "contains-ci" : function(elem, i, match, array) {
        return (elem.textContent || elem.innerText || $(elem).text() || "").toLowerCase().indexOf((match[3] || "").toLowerCase()) >= 0;
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T18:16:22.347

也许将服务器的结果作为 json 对象返回。

`http://your.hostname/database.json`返回`[{id:1,name:'joe'},{id:2,name:'bob'},...]`。

然后，动态创建显示的表格。

```
function refreshTable() {
    $.ajax({
        url:'http://your.hostname/database.json',
        dataType:'json'
    }).done(function(json) {
        $('#my_table tbody tr').remove();
        for (i in json) {
            $('#my_table tbody').append($('<tr><td>'+json[i]['id']+'</td><td>'+json[i]['name']+'</td></tr>'));
        }
    });
} 
```

在页面最初加载时调用`refreshTable`，可能在某些时间间隔，或者当用户按下“刷新”按钮或其他东西时调用。

哈哈！

# sql-server - 将 MS Access 2000 转换为 2010

> ID：10129142
> 
> 赞同：5
> 
> 时间：2012-04-12T17:59:56.237
> 
> 标签：sql-server, ms-access, windows-7, ms-access-2010

我正在将 MS Access 2000 转换为 MS Access 2010。我面临的问题是，转换后 MS Access 2010 非常慢（甚至冻结）。

> **以前的配置：** XP 上的 MS Access 2000 与位于 Windows 2000 上的 Sql server 2000 的链接表
> 
> **新配置：** Windows 7 上的 MS Access 2010 与位于 Windows 2000 上的 Sql server 2000 的链接表

新配置下的访问速度非常慢，或者有时挂起和崩溃与 Visual Studio 桌面应用程序的情况相同，它在 Win7 上运行缓慢，而在 XP 上运行良好。

我尝试过的事情：

1.  通过创建新的 MS Access 2010 并从 2000 版本导入所有对象来转换 MS Access 2000
2.  刷新链接表等
3.  将注册表中的 MS Office 最大缓冲区大小更改为 55000（如某些 MS 支持站点中所建议的）

到目前为止几乎没有改善。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T12:09:31.933

很难回答，因为问题的根源可能是多方面的。由于两个客户端的操作系统配置不同，我们不能排除问题来自两个操作系统之间的配置差异。

首先，您可以辨别连接速度是否因 PC、Access 或您的数据库而变慢：

**测试：直接连接**

您可以尝试使用直接连接而不是链接表直接连接到 SQL 服务器。为此，您可以创建一个连接到 SQL Server 的新 Access 项目。Access 项目是一种直接连接到 SQL Server 的 Access 数据库，没有链接表。它使用本机客户端。您可以直接在 Access 中查看 SQL Server 数据库的表，并且可以对其进行编辑。Access项目的扩展不是MDB而是ADP。Access 项目在 Access 2010 中隐藏，但得到很好的支持。

要创建 Access 项目：转到菜单文件 -> 新建，然后单击文件图标，然后选择“另存为类型”：“Microsoft Access Project (*.adp)”。

创建 ADP 时，它应该要求您输入现有 SQL Server 数据库的参数。输入您的参数。

然后转到表格面板，尝试浏览一些表格并检查它是慢还是快。

如果它很慢 => 那么问题可能来自您的 PC 或连接。您可以尝试使用另一种软件来测试您是否有一个可以连接到 SQL Server 的直接连接。

如果它很快 => 那么慢来自 ACCDB 或 ODBC 链接。

**还要检查：**

*   Ms Access 是最新的最新版本和 Ms Office 补丁
*   您的 ODBC 系统和“SQL Server 的 ODBC 驱动程序”是最新的（使用最新版本的[MDAC](http://msdn.microsoft.com/en-us/data/aa937730)）
*   您的 Windows 7 和 Ms Access 和 ODBC 版本具有相同的位范围（32 位或 64 位）
*   您的 ODBC 连接到 SQL Server 的 DSN 字符串已标准化
*   如果您的 DSN 是系统 DSN，则重新创建一个新的 DSN 作为用户 DSN 并尝试。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-23T21:26:19.793

您是否尝试过保持连接打开？这可能只适用于另一个 accdb 中的链接表，不确定。

不久前我遇到了这个问题，所以只要 Access 正在运行，我现在就保持连接打开，这是我的 sub 的精简版本：

```
Public Sub updateTables(bClose As Boolean)

Dim dbsCurrent As Database
Dim tdfSingle As TableDef
Dim tdfCollection As TableDefs
Dim sBasePath As String, sPath As String
Set dbsCurrent = CurrentDb
Set tdfCollection = dbsCurrent.TableDefs
Set dbsHold = dbsCurrent

Static dbsOpen As DAO.Database

If bClose Then
    dbsOpen.Close
Else
    sBasePath = Left(CurrentDb.Name, InStrRev(CurrentDb.Name, "\")) & "SB-Support\"
    sPath = GetUNC(sBasePath & "data.dat")

    Set dbsOpen = OpenDatabase(sPath, False, False, "MS Access;")
    For Each tdfSingle In tdfCollection
        If tdfSingle.SourceTableName <> "" Then
            If tdfSingle.Fields.Count = 0 Then
                tdfSingle.Connect = ";DATABASE=" & sPath
                tdfSingle.RefreshLink
            End If
        End If
    Next
End If

Exit Sub 
```

结束子

我想我最初是从这里检索到的： [http ://www.fmsinc.com/microsoftaccess/performance/linkeddatabase.html](http://www.fmsinc.com/microsoftaccess/performance/linkeddatabase.html)

我没有 SQL 服务器要求，但一个快速的谷歌给了我这个用于 SQL 连接的 OpenDatabase：

```
Dim cs As String
Dim cn As DAO.Database
Dim ws As DAO.Workspace
Set ws = DBEngine.Workspaces(0)
cs = "ODBC;DRIVER=SQL Server;SERVER=Main\SQLEXPRESS;DATABASE=Workwise;APP=Visual Basic"      'UID=Peter;PWD="
Set cn = ws.OpenDatabase("Workwise", dbDriverNoPrompt, True, cs) 
```

[http://www.vbforums.com/archive/index.php/t-572723.html](http://www.vbforums.com/archive/index.php/t-572723.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-24T06:51:43.040

当它冻结时，我会检查 sql-server 中实际运行的查询是在 sql-server 中发生的。例如。通过运行这样的东西：

```
select (SELECT text FROM ::fn_get_sql(s1.sql_handle)), *
from sys.sysprocesses s1 
```

一旦访问查询没有很好地转换为sql-server，我就调试了一个慢速访问应用程序。访问查询中的一些简单问题导致许多低效的 sql-server 查询运行。我们将其中一些查询重写为 sql-server 视图并为我们解决了它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-18T23:02:12.003

首先，确保您拥有最新的 MDAC。接下来，我建议在 SQL 中创建存储过程或表值函数，而不是从 Access 本身运行查询。Access 将预先解析查询以确保它会针对 SQL Server 运行，这可能会减慢速度。最后，如果 Access 正在执行更新和删除，它将使用 SQL Server TIMESTAMP 列来确保在您打开表单时没有其他人更改该记录。如果 SQL 没有这样的列，则 Access 必须执行所有跟踪。我们自己刚刚经历了这个——我会向开发人员询问任何提示，如果她有任何问题，我会在评论中发布。

# java - Setting onClickListener for a ListView item using a ViewHolder

> ID：10129148
> 
> 赞同：0
> 
> 时间：2012-04-12T18:00:12.650
> 
> 标签：java, android, android-intent, android-context

I have an `InfoListAdapter` that uses the following code to populate views in the list:

```
 public InfoListAdapter(final Context context) {
        super(context, 0);
    }

    @Override
    public View getView(final int position, View convertView, final ViewGroup parent) {
        ViewHolder viewHolder;

        if (convertView == null) {
            convertView = mInflater.inflate(R.layout.info_list_item, null);
            viewHolder = new ViewHolder(convertView);
            convertView.setTag(viewHolder);
        } else {
            viewHolder = (ViewHolder) convertView.getTag();
        }

        viewHolder.populateViews(getItem(position));

        return convertView;
    }
} 
```

I am wondering how I can follow this `ViewHolder` pattern and still add an `onClickListener` that will launch another activity `DetailListActivity` when clicked. My stragey was to make the `mListener` change using the existing `populateViews` method.

Needless to say it does not work. I think part of the problem here is that since `mListener` is null when I set the `onClickListener`, that reference is retained even after I change the value of the `mListener`. But the deeper question is how *do* I set something like this up, where I can use the `ViewHolder` pattern and let `populateViews` do the decoration (in terms of adding a listener to the click action)?

```
class ViewHolder {
    private TextView mTextViewDisplayName;
    private OnClickListener mListener;
    private Context mContext;

    public ViewHolder(final View view) {
        mTextViewDisplayName = (TextView) view.findViewById(R.id.tv_displayname);
        view.setOnClickListener(mListener);
        mContext = view.getContext();
    }

    public void populateViews(final Info infoItem) {
        mTextViewDisplayName.setText(infoItem.displayName);

        mListener = new OnClickListener() {

        public void onClick(View view0) {
                Intent mIntent = new Intent(mContext, DetailActivity.class);
                mIntent.putExtra(EMService.INTENT_EXTRA_DETAIL_VIEW_SOMEPARAM, 0);
                startActivityForResult(mIntent, 0);
            }
        };
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T18:05:59.670

In your parent activity/fragment that houses your ListView you can implement OnItemClickListener and handle your clicks there. This way you don't have to assign a click handler for every single view you instantiate.

Ex. Lets say you have a ListActivity class named MyListActivity (I'm so creative)

```
public class MyListActivity extends ListActivity implements OnItemClickListener
{
    @Override
    public void onItemClick(AdapterView<?> parent, View v, int position, long id)
    {
        Intent intent = new Intent(this, DetailActivity.class);
        intent.putExtra(EMService.INTENT_EXTRA_DETAIL_VIEW_SOMEPARAM, 0);
        startActivityForResult(intent, 0);
    }

} 
```

# sql - 将 MS Access 2007 数据库迁移到 Sql Server 2008

> ID：10129154
> 
> 赞同：0
> 
> 时间：2012-04-12T18:00:48.380
> 
> 标签：sql, ms-access, export

我正在尝试使用 SSMS 迁移工具到 SQL 服务器上的新数据库，但我遇到了一堆我无法理解的错误。

有什么更好的方法建议，或者指导我解决问题吗？

谢谢

> *   复制到 [dbo].[Vehicle$]（错误）消息错误 0xc0202009：数据流任务 1：SSIS 错误代码 DTS_E_OLEDBERROR。发生 OLE DB 错误。错误代码：0x80004005。OLE DB 记录可用。来源：“Microsoft SQL Server Native Client 10.0” Hresult：0x80004005 描述：“无效的日期格式”。（SQL Server 导入和导出向导）
>     
>     
> *   错误 0xc020901c：数据流任务 1：输入“目标输入”(93) 上的输入列“CardExpireDate”(136) 存在错误。返回的列状态为：“转换失败，因为数据值溢出了指定类型。”。（SQL Server 导入和导出向导）
>     
>     
> *   错误 0xc0209029：数据流任务 1：SSIS 错误代码 DTS_E_INDUCEDTRANSFORMFAILUREONERROR。“输入“目标输入”(93)”失败，因为发生了错误代码 0xC020907A，并且“输入“目标输入”(93)”上的错误行处理指定错误失败。指定组件的指定对象发生错误。在此之前可能会发布错误消息，其中包含有关失败的更多信息。（SQL Server 导入和导出向导）
>     
>     
> *   错误 0xc0047022：数据流任务 1：SSIS 错误代码 DTS_E_PROCESSINPUTFAILED。处理输入“Destination Input”(93) 时，组件“Destination - Vehicle$”(80) 上的 ProcessInput 方法失败，错误代码为 0xC0209029。已识别的组件从 ProcessInput 方法返回错误。该错误是特定于组件的，但该错误是致命的，将导致数据流任务停止运行。在此之前可能会发布错误消息，其中包含有关失败的更多信息。（SQL Server 导入和导出向导）
>     
>     
> *   错误 0xc02020c4：数据流任务 1：尝试向数据流任务缓冲区添加行失败，错误代码为 0xC0047020。（SQL Server 导入和导出向导）
>     
>     
> *   错误 0xc0047038：数据流任务 1：SSIS 错误代码 DTS_E_PRIMEOUTPUTFAILED。组件“Source - Vehicle$”(1) 上的 PrimeOutput 方法返回错误代码 0xC02020C4。当管道引擎调用 PrimeOutput() 时，组件返回了失败代码。失败代码的含义由组件定义，但错误是致命的并且管道停止执行。在此之前可能会发布错误消息，其中包含有关失败的更多信息。（SQL Server 导入和导出向导）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T19:18:47.867

Access 显然允许您将日期数据存储在 CardExpiredDate 列中，该列不会转换或转换为 SSMS 尝试使用的数据类型。我会检查那个表，看看你是否能发现那里存储的值有什么问题。

您有以字符串字符命名的字段，例如 Vehicle$。我强烈建议您不要在字段名称中使用任何符号。删除这些可能会修复您的所有错误。

我认为 SSMS 工具是您最好的选择，除非您的数据库很简单，在这种情况下，您最好从头开始在 SQL Server 中构建它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T18:35:19.620

好吧，我认为这不是那么明显，但我发现 Date 数据类型存在问题！

我在 SQL Server 上创建了一个具有相同字段的表，但我将`smalldate`时间数据类型更改为`NvarChar(250)`. 后来我使用正确的映射导入表！

问题解决了！

# javascript - 通过 Instagram 回复进行分页

> ID：10129156
> 
> 赞同：1
> 
> 时间：2012-04-12T18:00:56.420
> 
> 标签：javascript, jquery, instagram

在我的网络应用程序中，我想从 instagram 加载带有特定标签的照片。我得到了第一页的结果，但是如果我尝试使用 pagination.next_url 命令接收下一页，我最终会得到与以前相同的结果。我的代码：

```
url="https://api.instagram.com/v1/tags/vienna/media/recent?client_id=9c6380addbe14f42bf1e992acae243f2&callback=?";      

        $.getJSON(url,function(data) {
            $.each(data.data, function(i, item) {
                var filter = item.filter;
                var instaLink = item.link;
                $('#footer').append(filter,'<br />');           
                jQuery("<a />").attr("href", instaLink).appendTo("#footer").text(instaLink).after("<br />"); 
            }); 
            url = data.pagination.next_url;
            console.log(window.url);
    }); 
```

我是 javascript 和 jQuery 的初学者，但我认为 url 变量设置不正确。因为当我想再次调用 $getJSON(url,function(...){} 时，结果是一样的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T20:27:19.223

这是一个范围问题。url 变量是闭包内的本地变量。尝试使用不同的名称声明您的 url 变量。（使用 var 关键字...）

但是要能够遍历所有结果，这并没有太大帮助。您必须递归地执行此操作，直到 instagram api 不返回 data.pagination.next_url。

# javascript - 使用 Web 套接字运行 javascript 验收测试

> ID：10129159
> 
> 赞同：1
> 
> 时间：2012-04-12T18:01:04.397
> 
> 标签：javascript, unit-testing, acceptance-testing

我可以使用 websockets 作为测试运行器类型机制在单页 ajax 应用程序上运行验收测试吗？我认为它可以通过加载单个应用程序页面然后已经加载另一个页面来工作，这两个页面都使用 websockets 连接。加载 ajax 应用程序时，它会通知另一个页面，然后另一个页面开始使用普通 js 运行测试以触发 ajax 应用程序中的函数/事件等。这似乎是一个比 selenium 更简单的解决方案，这意味着我可以使用我需要的任何测试运行器。

*   这可能吗？
*   目前有任何框架这样做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T18:05:29.030

Websockets 不需要在两个客户端页面之间进行通信，即使它们位于不同的域中。 `window.postMessage`是一个更好的选择。

# php - 访问文档根目录外的文件 - 能够压缩 - 无法显示

> ID：10129163
> 
> 赞同：0
> 
> 时间：2012-04-12T18:01:14.770
> 
> 标签：php, apache, file, path

我有一些图像单独保存在文档根目录之外的文件夹中。

我编写了一个程序来压缩这些图像 `ZipArchive();`

php 文件在我的文档根目录的子文件夹中运行。

我只是将外部图像路径作为数组提供并将其传递给 zip 对象并且工作正常

```
$imgList = array(
    '/OUTSIDEFOLDER/img1.jpg',
     '/OUTSIDEFOLDER/img2.jpg'
); 
```

我用来显示图像的相同路径

```
<img src='/OUTSIDEFOLDER/img1.jpg'> 
```

这是行不通的。我做错了什么。是图像来源的限制还是

我必须查看任何配置 htaccess 设置

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T18:04:22.867

The document root specifies what parts of your server's file system is available to be served up by the webserver.

If you could just specify any path you wanted, anyone could steal anyfile they wanted from your server, etc..

To serve something from outside the document root, you'll have to

1.  create an Apache [alias](http://httpd.apache.org/docs/2.0/mod/mod_alias.html) that points to the file, so it effectively becomes "inside the document" root
2.  Create a filesystem symlink inside your document root that points to the external file, and make sure the webserver allows such symlinks and follows them
3.  Use a script (e.g. php) to serve up the file.

# email - 无法通过邮件发送 zip 流

> ID：10129175
> 
> 赞同：0
> 
> 时间：2012-04-12T18:02:05.667
> 
> 标签：email, stream, email-attachments

我有一个 MemoryStream 代表一个 zip 文件。这是创建流的方式：

```
var zipMemoryStream = new MemoryStream();
using (var zipPackage = Package.Open(zipMemoryStream, FileMode.CreateNew))
{
    foreach (var file in files)
    {
        var c = new Uri("/" + file.FileName + extension, UriKind.Relative);
        var zipPart = zipPackage.CreatePart(c, fileType);

        if (zipPart == null)
            continue;

        CopyStream(file.MemoryStream, zipPart.GetStream());
    }
}

File.WriteAllBytes("C:\\ZipTest.zip", zipMemoryStream.ToArray());

try
{
    mailMsg.Attachments.Add(new Attachment(zipMemoryStream, "ZipTest.zip",
                            MediaTypeNames.Application.Zip));
} 
```

如您所见，我添加了 File.WriteAllBytes 行，它将流保存到我的 HDD（用于测试）。

如果 zip 中的文件为空，则保存在 HDD 上的文件完美无缺，重量约为 138B。

但是，我在邮件中收到的附件重量为 0B。

知道为什么附件重 0B 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T18:06:32.510

是的，在大多数情况下，流的位置在流的末尾。

尝试

```
try
{
    zipMemoryStream.Position = 0;
    mailMsg.Attachments.Add(new Attachment(zipMemoryStream, "ZipTest.zip",
                            MediaTypeNames.Application.Zip));
} 
```

# php - 在 php 中获取 DATETIME 并将其发布到 MySQL 以实现事务一致性

> ID：10129180
> 
> 赞同：9
> 
> 时间：2012-04-12T18:02:34.317
> 
> 标签：php, mysql, datetime, transactions, innodb

这是此问题背后原因的链接： [NOW() for DATETIME InnoDB Transaction 是否保证？](https://stackoverflow.com/questions/10113317/now-for-datetime-innodb-transaction-guaranteed)

因此，为了确保具有任意数量查询（例如**20 多个**查询）的单个事务在多个表中具有 100%**准确和一致的 NOW()**值，使用 NOW() 分配等效于 DATETIME 的变量的 php 方法是什么（不是当前的时间戳）。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-04-12T18:39:04.887

一种方法可能是：

```
<?php
$nowFormat = date('Y-m-d H:i:s');
$sql = "INSERT INTO table SET field='$nowFormat'";
$sql2 = "INSERT INTO table SET field='$nowFormat'";
... 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-12T18:34:04.700

在 MySQL 中做，所以你根本不涉及 PHP：

```
select @now := now();

insert into .... values (@now)
select from ... where x=@now
etc.... 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-06-06T08:09:05.313

你可以做：

```
<?
$now = time();
$sql = "INSERT INTO table SET field=FROM_UNIXTIME($now)";
$sql2 = "INSERT INTO table SET field=FROM_UNIXTIME($now)";
... 
```

这避免了时区或本地日期格式的任何可能问题。

# java - 使用 HttpUrlConnection 建立没有中间证书的 SSL 连接

> ID：10129183
> 
> 赞同：7
> 
> 时间：2012-04-12T18:02:53.157
> 
> 标签：java, ssl, ssl-certificate

是否可以使用 SSL 连接到客户端只有根证书但服务器同时具有根证书和中间证书的站点？

我正在尝试使用 HttpUrlConnection 与包含我的根的 TrustManager 进行连接，但出现通常的握手错误：

```
javax.net.ssl.SSLHandshakeException:
  sun.security.validator.ValidatorException:
  Certificate chaining error
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at java.lang.reflect.Constructor.newInstance(Constructor.java:513)
    at java.net.HttpURLConnection.getResponseCode(HttpURLConnection.java:379) 
```

我知道一般的解决方案是安装中间证书，但我想避免不断地一次性获得供应商 X 的新中间证书。

我熟悉使用接受所有内容的 TrustManager，但这不是一种选择。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2015-04-10T09:22:58.877

> 是否可以使用 SSL 连接到客户端只有根证书但服务器同时具有根证书和中间证书的站点？

这不仅是可能的，而且实际上是 TLS 工作的常用方式：

1.  TLS 客户端只有根证书。Java——至少是 Oracle JVM——从`lib/security/cacerts`JRE 安装目录中读取它们。浏览器要么有自己的内部列表，要么使用操作系统提供的列表。
2.  当客户端启动 TLS 连接时，服务器应该发回自己的证书以及任何中间证书（如果它使用任何中间证书） - 这个列表称为*证书链*。对于当前版本 1.2。TLS 的这在[RFC 5246 的第 7.4.2 节](https://www.rfc-editor.org/rfc/rfc5246#section-7.4.2)中指定（请参阅下面的报价）。
3.  客户端接收这些证书，并验证签名，从服务器证书到它知道的根证书之一。这称为*认证路径构建*，并在[RFC 4158](https://www.rfc-editor.org/rfc/rfc4158)中进行了描述。
4.  如果客户端可以构建有效的证书路径，它会继续进行连接设置。否则，它会以错误消息中止 - 类似于可怕的“此连接不受信任”错误。

> 我知道一般的解决方案是安装中间证书

不，实际上不是，如上所述，服务器*应该*自动发送所有中间证书。

**然而：**

服务器上一个相当常见的配置错误是未在服务器上安装所有中间证书。在这种情况下，服务器将在连接设置期间发送不完整的证书链。然后客户端将无法建立有效的认证路径，并将中止连接。

一些并发症会使这个问题难以诊断：

*   一些客户端（尤其是浏览器）可能仍然可以成功连接，因为它们有丢失的中间证书的缓存副本。
*   大多数客户端不会或无法区分丢失的中间证书（在服务器发送的链中）、丢失的根证书（在他们自己的列表中）和自签名证书，因此您必须自己弄清楚什么问题实际上是。

诊断这些问题的有用工具：

*   OpenSSL 的命令行客户端可以显示服务器发送的证书链：`openssl s_client -showcerts -connect google.com:443`
*   Qualys 的[SSL 服务器测试](https://www.ssllabs.com/ssltest/)将列出证书链以及任何验证错误

* * *

[RFC 5246 第 7.4.2 节的](https://www.rfc-editor.org/rfc/rfc5246#section-7.4.2)相关引用：

> 7.4.2\. 服务器证书
> 
> 何时发送此消息：
> 
> 每当商定的密钥交换方法使用证书进行身份验证时，服务器必须发送一个证书消息（这包括本文档中定义的所有密钥交换方法，除了 DH_anon）。此消息将始终紧跟在 ServerHello 消息之后。
> 
> 此消息的含义：
> 
> 此消息将服务器的证书链传送给客户端。
> 
> [...]
> 
> 此消息的结构：
> 
> [...]
> 
> 证书列表
> 
> 这是证书的序列（链）。发件人的证书必须在列表中排在第一位。后面的每个证书必须直接证明它前面的证书。因为证书验证要求根密钥是独立分发的，所以可以从链中省略指定根证书颁发机构的自签名证书，假设远程端必须已经拥有它才能在任何情况下验证它。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-12T23:50:14.700

服务器应该在消息中发送*整个*证书链，包括中间证书`Certificate`。客户端将检查整个链并找到它信任的根证书。所以你所描述的应该有效。

当然，有可能（错误）配置服务器不发送整个链 - 在这种情况下，客户端的检查可能会失败。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-09-10T01:22:17.403

如[本答案](https://security.stackexchange.com/questions/162592/why-do-i-need-to-add-intermediate-ca-certificates-to-jvms-cacerts-file#answer-168061)所述：

使用 Oracle JRE，您可以启用具有 Java 系统属性的中间证书的自动下载`-Dcom.sun.security.enableAIAcaIssuers=true`

为此，服务器的证书必须提供中间证书（证书的颁发者）的 URI。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-04-12T18:11:51.380

当服务器拥有由根 CA（例如 Verisign）签名的 sub-ca-A 签名的证书时，服务器会将所有证书作为服务器 hello 的一部分发送，以便可以验证服务器的证书。

在您的情况下，您在信任库中只有根 CA。

因此，由于您缺少 sub-ca 证书，因此无法建立信任验证链。
这不仅是不可能的，而且能够做到这一点是错误的/不安全的。因此，您正在做的事情偏离了正确的道路。

所以你只有2个选择。
将**服务器的实际证书**作为受信任的证书放入信任库中。
将**整个链**放入信任库，即中间 CA 证书和根证书。

你有什么顾虑？中级证书过期？

# php - 在 PHP 中动态嵌入 .swf 文件

> ID：10129184
> 
> 赞同：0
> 
> 时间：2012-04-12T18:03:13.787
> 
> 标签：php, flash, embed

我有一个这样的数据库表

```
|--------------------------------|
|   flash_file_path  |  file_type|
|--------------------------------| 
```

现在问题是我想动态嵌入 Flash 视频。我使用查询来检索视频路径，例如：

```
SELECT flash_file_path FROM dt_flashvid WHERE file_type='header'; 
```

现在这是我的代码：

```
<div align="center">

<script type="text/javascript" src="swfobject.js"></script>

<div id="flashcontent">
  You must have Adobe Flash Player to run this training...
</div>

<script type="text/javascript">
    function getURLParam(strParamName){
      var strReturn = "";
      var strHref = window.location.href;
      if ( strHref.indexOf("?") > -1 ){
        var strQueryString = strHref.substr(strHref.indexOf("?")).toLowerCase();
        var aQueryString = strQueryString.split("&");
        for ( var iParam = 0; iParam < aQueryString.length; iParam++ ){
          if (
    aQueryString[iParam].indexOf(strParamName.toLowerCase() + "=") > -1 ){
            var aParam = aQueryString[iParam].split("=");
            strReturn = aParam[1];
            break;
          }
        }
      }
      return unescape(strReturn);
    } 

   var so = new SWFObject(getURLParam("name")+".swf", getURLParam("name"), "785", "575", "8", "#FFFFFF");
   so.addParam("quality", "high");
   so.write("flashcontent");
</script>
</div> 
```

在这里我们可以应用 flash_file_path 来动态嵌入 Flash，但是有一个问题，它不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T18:07:26.810

您可能应该做的是用 html 编写代码，并使其工作（swf 可能难以排除故障）。将其粘贴到 PHP 脚本中并在需要的地方插入动态内容。然后回显整个内容。这样更容易调试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T18:10:56.773

为什么要手动获取参数而不是使用 GET？

此外，您可以通过 php 回显新的嵌入式 swf 对象，而不是使用 javascript 并尝试弄乱您在上面创建的 div。

# objective-c - 使用 cocos2d 和一组高清图像的通用应用程序

> ID：10129186
> 
> 赞同：0
> 
> 时间：2012-04-12T18:03:28.797
> 
> 标签：objective-c, cocos2d-iphone

我有一个基于回合的应用程序，我想使其通用。我有一组针对 iPad 视网膜显示优化的高清图像（背景和精灵）。谁能告诉我如何将这组图像用于各种外形尺寸？

例如，如何在各种外形尺寸上显示背景（在 y 轴上缩放到 90% 以允许 iAd）？

我不太关心性能，也不太关心 iPad/iphone 屏幕比例的差异。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T18:14:22.220

1）做可拉伸的图像。您可以使用[`resizableImageWithCapInsets:`](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIImage_Class/Reference/Reference.html)(stretchableImageWithLeftCapWidth:topCapHeight: (same docs)。

2) 一种被低估的方法是使用这种方法，您可以用图案图像[`+[UIColor colorWithPatternImage:]`](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIColor_Class/Reference/Reference.html) 填充's。`UIView`只需设置`view.backgroundColor`. 或者用类似图像的阴影填充 UILabel (textColor)。很强大。

# php - 英国电话号码格式符合 Ofcom 规范

> ID：10129189
> 
> 赞同：3
> 
> 时间：2012-04-12T18:03:35.187
> 
> 标签：php, phone-number

在整个 StackOverflow 中，有许多代码块以各种方式处理电话号码。

他们中的大多数使用美国电话号码格式。还有一些可用于某些英国号码，但并非所有号码都能产生正确的结果。

下面的代码将英国电话号码格式化如下：

以 03、08 和 09 开头的非地理数字被格式化为 0xxx xxx xxxx 和 +44 xxx xxx xxxx。

以 07 开头的手机号码格式为 07xxx xxxxxx 和 +44 7xxx xxxxxx。

VoIP 和其他 05 号码的格式为 05xxx xxxxxx 和 +44 5xxx xxxxxx。

以 01 和 02 开头的数字是地理数字。它们具有可变长度的区号。在 www.ofcom.org.uk/static/numbering/sabc.txt 和 www.ofcom.org.uk/static/numbering/codelist.zip 上发布的最新 Ofcom 规范已用于确保准确性。

Ofcom 列表 0113/0114/0115/0116/0117/0118 和 0121/0141 具有 3 位数的区号和 015242、013873、015394/015395/015396、016973/016974、017683/017684/0176 和 748数字区号。其余的使用 4 位数的区号。0171 和 0181 曾经是伦敦的 3 位数区号，但已不再使用。

PHP 代码很容易使用包含的基于表单的简单输入进行测试。如果代码以其他方式使用，则可以丢弃该表单。

输入首先被去除任何领先的国际访问代码和国家代码数字。在添加无关字符（如空格和标点符号）以及任何中继数字（如果存在）之后，然后检查号码长度以确保其长度为 10 位并且在有效范围内。然后使用一小组简单的规则对数字进行格式化。

还包括对以“ext. 234”或“x 234”形式附加的分机号码的基本支持。

最终输出以国家和国际格式呈现。

该代码没有考虑非标准数字 0800 1111 和 0845 4647。这些数字只有 7 位是不寻常的。

```
<?php

// format UK telephone numbers using Ofcom specifications
// www.ofcom.org.uk/static/numbering/sabc.txt
// www.ofcom.org.uk/static/numbering/codelist.zip

// parse submitted form variables

if (ISSET($_POST['tel_form']) && ($_POST['tel_form'] == "1")) {

  if (ISSET($_POST['tel_num'])) {

    $tel_num = $_POST['tel_num'];

    $text = '    <p><b>Number as input:</b> ' . $tel_num . "</p>\n";

// remove leading +44, 00 44, 011 44 if present

    $leadingPattern = '/^(\+|00|011)?\ ?44(.*)/';
    if (preg_match($leadingPattern, $tel_num, $leadingMatches)) {
      $tel_num = $leadingMatches[2];
    }

// remove and separately store any extension number

    $extPattern = '/((ext|x)(.*))/';
    if (preg_match($extPattern, $tel_num, $extMatches)) {
      $extension = $extMatches[1];
    }
    $extReplacements = '';
    $tel_num = preg_replace($extPattern, $extReplacements, $tel_num);

// remove all non-digit characters and punctuation

    $nonDigitPattern = '([^0-9]+)';
    $nonDigitReplacements = '';
    $tel_num = preg_replace($nonDigitPattern, $nonDigitReplacements, $tel_num);
    $extension = preg_replace($nonDigitPattern, $nonDigitReplacements, $extension);

// remove leading 0 if present

    $leadingZeroPattern = '/^0+(.*)/';
    if (preg_match($leadingZeroPattern, $tel_num, $leadingZeroMatches)) {
      $tel_num = $leadingZeroMatches[1];
    }

// check remaining number length is 10 digits long

    if (strlen($tel_num) < '10') {
      $text .= '    <p>' . 'Telephone number too short.' . "</p>\n";
    }

    elseif (strlen($tel_num) > '10') {
      $text .= '    <p>' . 'Telephone number too long.' . "</p>\n";
    }

// format valid numbers

    else {

// format 3 digit area code for 0113/4/5/6/7/8, 0121, 0141

      $length3pattern = '/^(1(1[345678]|[24]1))([0-9]{3})(.*)/';
      if (preg_match($length3pattern, $tel_num, $matches)) {
        $formatted_number = $matches[1] . ' ' . $matches[3] . ' ' . $matches[4];
      }

// format 5 digit area code for 015242, 013873, 015394/5/6, 016973/4, 017683/4/7, 019467

      $length5pattern = '/^(1(3873|5242|539[456]|697[34]|768[347]|9467))(.*)/';
      if (preg_match($length5pattern, $tel_num, $matches)) {
        $formatted_number = $matches[1] . ' ' . $matches[3];
      }

// format non-geographic numbers

      $NGNpattern = '/^([389][0-9]{2})([0-9]{3})(.*)/';
      if (preg_match($NGNpattern, $tel_num, $matches)) {
        $formatted_number = $matches[1] . ' ' . $matches[2] . ' ' . $matches[3];
      }

// format all other numbers

      if (!ISSET($formatted_number)) {
        $pattern = '/^([1257][0-9]{3})(.*)/';
        if (preg_match($pattern, $tel_num, $matches)) {
          $formatted_number = $matches[1] . ' ' . $matches[2];
        }

// else warn that number isn't valid

        else {
          $text .= "    <p>Telephone number probably not valid.</p>\n";
        }
      }

// store number in international and national formats

    }

    if (ISSET($formatted_number)) {

      $int_formatted_number = '+44 ' . $formatted_number;
      $text .= '    <p><b>International format:</b> ' . $int_formatted_number . "</p>\n";

      $codePattern = '/^([12][^\ ]+)(\ .*)/';
      if (preg_match($codePattern, $formatted_number, $matches)) {
        $nat_formatted_number = '(0' . $matches[1] . ') ' . $matches[2];
      }
      else {
        $nat_formatted_number = '0' . $formatted_number;
      }
      $text .= '    <p><b>National format:</b> ' . $nat_formatted_number . "</p>\n";

      if ((ISSET($extension)) && (!empty($extension))) {
        $text .= '    <p><b>Extension:</b> ' . $extension . "</p>\n";
      }

    }

// show start message for first time form use

  }
}
else {
  $text = "    <p><b>Please start by entering a UK telephone number.</b></p>\n";
}

// show HTML page with form for input
?>
<!DOCTYPE html>

<html>

  <head>

    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>UK telephone number formatter</title>

  </head>

<body>

<?php
if (ISSET($text)) {
  print $text;
}
?>

    <hr>

<?php
if ((ISSET($tel_num)) && (!empty($tel_num))) {
  $tel_num = '0' . $tel_num;
}
?>
    <form action="telnum.php" name="input" method="post">
      <p><b>Enter a UK telephone number to format:</b> <input type="text" name="tel_num" value="<?php print $tel_num; ?>" />
      <input type="hidden" name="tel_form" value="1" />
      <input type="submit" value="submit" /></p>
    </form>

  </body>

</html> 
```

# ios - iOS：向 UITableView 添加数组 - 显示为一项

> ID：10129194
> 
> 赞同：0
> 
> 时间：2012-04-12T18:03:39.767
> 
> 标签：ios, uitableview

我遇到的问题是我有一个标记为：_podAllEntries 的 NSMutableArray，其中包含 url 路径。然后将该数组的内容加载到我的 UITableView 中的一行中。此数组中共有 4 个项目，每个项目在表中应该有一个条目。以下是该应用程序如何工作的更详细说明：

这个 iOS 应用程序使用 NSURL 来使用来自网站的 XML 数据：http: [//undignified.podbean.com/feed](http://undignified.podbean.com/feed)。从那里我使用 NSXMLParser 解析 XML 并在“enclosure”元素中搜索一个名为“url”的属性。然后将匹配“url”的所有属性添加到一个数组中，然后应该将每个项目加载到 UITableView 中，每个项目位于单独的行中（如前所述，只有一行填充）。

在这一点上，我可能遗漏了一些小东西，如果能向正确的方向轻推或提供任何反馈，将不胜感激。

## UnDigParser.h

解析类的头文件：

```
#import <Foundation/Foundation.h>

@interface UnDigParser : NSXMLParser <NSXMLParserDelegate> {

}
@property (retain) NSMutableArray *links;
@end 
```

## UnDigParser.m

解析类的实现：

```
#import "UnDigParser.h"

@implementation UnDigParser
NSMutableArray *_links;

@synthesize links = _links;

-(void)parserDidStartDocument:(NSXMLParser *)parser{
    _links=[[NSMutableArray alloc] init];
}

-(void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName attributes:(NSDictionary *)attributeDict
{
    if ([elementName isEqualToString:@"enclosure"]){

        NSString *link = [attributeDict objectForKey:@"url"];
        if (link){
            [_links addObject:link];
        }
    }
    //NSLog(@"%@",_links);
}

-(BOOL)parse{
    self.delegate = self;
    return [super parse];
}

@end 
```

## 视图控制器.h

```
@class WebViewController;

@interface getpodViewController : UITableViewController <UITableViewDataSource>
{
    NSMutableArray *_podAllEntries;
    NSMutableArray *_allEntries;
    WebViewController *_webViewController;
}

@property(retain) NSMutableArray *podAllEntries;
@property(retain) NSMutableArray *allEntries;
@property(retain) WebViewController *webViewController;

@end 
```

## 视图控制器.m

```
@implementation getpodViewController

@synthesize podAllEntries = _podAllEntries;
@synthesize allEntries = _allEntries;
@synthesize webViewController = _webViewController;

-(void)addRows
{
    //dispatch_async(dispatch_get_global_queue(0, 0), ^{

    NSURL *url = [NSURL URLWithString:@"http://undignified.podbean.com/feed"];
    UnDigParser *parser = [[UnDigParser alloc] initWithContentsOfURL:url];      

    [parser parse];
    [_podAllEntries insertObject:parser.links atIndex:0];
    NSLog(@"%@", _podAllEntries);

    [self.tableView insertRowsAtIndexPaths:[NSArray arrayWithObject:[NSIndexPath indexPathForRow:0 inSection:0]]
                          withRowAnimation:UITableViewRowAnimationRight];
}

- (void)viewDidLoad 
{
    [super viewDidLoad];

    self.title = @"Podcasts";
    self.podAllEntries = [[NSMutableArray alloc]init];
    [self addRows];
}

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
    return [_podAllEntries count];
}

-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath 
{
    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if(cell==nil){
        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier] autorelease];
    }

    NSString *cellValue = [NSString stringWithFormat:@"%@", _podAllEntries];

    cell.textLabel.text = cellValue;
    return cell;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T18:08:42.207

您不了解如何在 iOS 中构建 UITableView。您应该在整个[UITableViewDataSource](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITableViewDataSource_Protocol/Reference/Reference.html)协议中填充您的 UITableView。

您应该阅读有关[UITableView](http://developer.apple.com/library/ios/#DOCUMENTATION/UserExperience/Conceptual/TableView_iPhone/ManageSelections/ManageSelections.html)的 Apple 信息。

不要`insertRowsAtIndexPaths`用于添加“主”行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T18:18:02.593

你需要这样做：

```
 [NSString stringWithFormat:@"%@", [_podAllEntries objectAtIndex:indexPath.row]]; 
```

## 例子：

```
-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath 
{
    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if(cell==nil){
        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier] autorelease];
    }

    NSString *cellValue = [NSString stringWithFormat:@"%@", [_podAllEntries objectAtIndex:indexPath.row]];

    cell.textLabel.text = cellValue;

    /* to use less code, you can also do it like this: */
    //cell.textLabel.text = [_podAllEntries objectAtIndex:indexPath.row];

    return cell;
} 
```

您还可以从**`addRows`**因为`cellForRowAtIndexPath:`是实际创建单元格的位置删除以下语句。

```
[self.tableView insertRowsAtIndexPaths:[NSArray arrayWithObject:[NSIndexPath indexPathForRow:0 inSection:0]] withRowAnimation:UITableViewRowAnimationRight]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T18:26:31.823

1.  在 cellForRowAtIndexPath 中，而不是`[NSString stringWithFormat:@"%@", _podAllEntries];`你应该有`[NSString stringWithFormat:@"%@", [_podAllEntries objectAtIndex:indexPath.row]];`. 这将确保表的每一行都有不同的 _podAllEntries 数组行。

2.  乔纳斯是对的，你不应该这样做`insertRowsAtIndexPaths`。您定义的委托方法负责确保添加所有内容。

3.  你 _podAllEntries 有多少个项目？它看起来像：`[_podAllEntries insertObject:parser.links atIndex:0];`将添加一个对象，该对象本身就是一个数组。因此，您只有一排。我想你想要`[_podAllEntries insertObjectsFromArray:parser.links]`。

# html - 消除“边缘”的正确方法是什么 在一个 ?

> ID：10129197
> 
> 赞同：1
> 
> 时间：2012-04-12T18:03:51.530
> 
> 标签：html, css, layout

我在 ul 中有一个 li 元素列表，其中包含相关的样式类（如下）。我想要的是每个列表项都位于页面的左边缘。在 ul 和 li 周围设置边框我可以看到 li 项目莫名其妙地缩进了 40px。

我已经在两个元素上尝试了 margin-left: 0px 并且我已经尝试了 list-style:none; 这确实有助于消除子弹并将所有剩余的东西滑动**到坚不可摧的 40px 边距**。

我通过反复试验确定，如果我在我的 li 中这样做：

```
left: -40px;
position: relative; 
```

我得到了想要的结果，但边距只是弹出到每个 li 的右侧/尾部，这在视觉上不那么麻烦，但仍然是一个可怕的 hack。一定有办法让它消失吗？

我的样式代码如下所示：

```
ul.selectorlist
{
    list-style: none;
    padding: none;
    margin: 0px;

    border-width: 1px;
    border-style: solid;
    border-color: white;
}

li.channel
{
//  left: -40px; // <- Does the trick but COME ON, REALLY?!

    width: 100%;
    background-colour: black;
    font-family:georgia;
    font-size:18px;
    padding: 0px;
    margin: 0 0 0 0;

    border-width: 1px;
    border-style: solid;
    border-color: white;
} 
```

笔记：

我也玩过：

```
list-style-position: inside / outside; 
```

这实际上会在 40px 线的左侧和右侧弹出 li 子弹。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T18:28:42.850

一个小实验（在 FireFox 11 中）显示列表的默认布局包括一个 40 像素的左填充，这是为子弹腾出空间。

添加

```
padding:0; 
```

到风格，`<ul>`你的神秘差距应该消失了。然而，这可能对子弹位置产生不良后果。根据您的特定布局要求，摆脱项目符号或设置`list-style-position`为两种可能的补救措施。`inside`

请注意，此填充位于`<ul>`元素上，当您添加边框时，它在视觉上类似于`<li>`. 这就是 Firebug 或 Chrome 和 IE 中包含的那些开发工具如此有用的原因之一 - 很容易看到任何元素的盒子模型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T18:06:08.193

您是否尝试过使用列表样式位置，即：

```
list-style-position: inside; 
```

或者

```
list-style-position: outside; 
```

# objective-c - Accessor implementation of properties

> ID：10129203
> 
> 赞同：3
> 
> 时间：2012-04-12T18:04:18.900
> 
> 标签：objective-c, properties, automatic-ref-counting, accessor

Is there some of documentation how the compiler auto-generates the accessors of properties?

When writing custom accessors (overriding the synthesized ones), it would be nice to know the original implementation. Especially to see the differing implementations of accessors for properties with different (weak/strong/retain/copy etc..) attributes.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T18:59:02.790

> 是否有一些文档编译器如何自动生成属性的访问器？

编译器只是添加了一个 C 函数调用。查看 asm（例如`_objc_getProperty`和`_objc_setProperty`）。

> 在编写自定义访问器（覆盖合成的访问器）时，最好了解原始实现。特别是查看具有不同（弱/强/保留/复制等）属性的属性的访问器的不同实现。

这些实现作为托管在 [http://www.opensource.apple.com/source/objc4/](http://www.opensource.apple.com/source/objc4/)的 objc 运行时的一部分公开提供。

# spring - Spring @PathVariable - java.lang.IllegalStateException

> ID：10129209
> 
> 赞同：2
> 
> 时间：2012-04-12T18:04:45.530
> 
> 标签：spring

提前感谢您的帮助。这让我感到困惑，因为我使用相同的技术在我的应用程序中定义 @PathVariable 没有任何问题。

我有一个具有以下签名的控制器方法：

```
 @Controller
    @RequestMapping("_n/thingy")
    @Transactional
    public class MyThingyController {  

    @RequestMapping(value="/{id:\\d+}", method=RequestMethod.GET)
    public String getThingy(@PathVariable("id") Integer thingyId, Model model) {
       //DO STUFF
    }

    } 
```

但是，我得到以下异常：

```
java.lang.IllegalStateException: Optional int parameter 'thingyId' is not present but cannot be translated into a null value due to being declared as a primitive type. Consider declaring it as object wrapper for the corresponding primitive type.
at org.springframework.web.bind.annotation.support.HandlerMethodInvoker.checkValue(HandlerMethodInvoker.java:742)
at org.springframework.web.bind.annotation.support.HandlerMethodInvoker.resolveRequestParam(HandlerMethodInvoker.java:511)
at org.springframework.web.bind.annotation.support.HandlerMethodInvoker.resolveHandlerArguments(HandlerMethodInvoker.java:348)
at org.springframework.web.bind.annotation.support.HandlerMethodInvoker.invokeHandlerMethod(HandlerMethodInvoker.java:153)
at org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter.invokeHandlerMethod(AnnotationMethodHandlerAdapter.java:436)
at org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter.handle(AnnotationMethodHandlerAdapter.java:424)
at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:923)
at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:852)
at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:882)
at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:778)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:369)
at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:109)
at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:83)
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:381)
at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:97)
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:381)
at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:100)
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:381)
at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:78)
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:381)
at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:54)
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:381)
at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:35)
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:381)
at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilter(BasicAuthenticationFilter.java:177)
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:381)
at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:187)
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:381)
at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:105)
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:381)
at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:79)
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:381)
at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:168)
at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:346)
at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:259)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:224)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)
at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:987)
at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:579)
at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:307)
at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
at java.lang.Thread.run(Unknown Source) 
```

显然，我不是将“id”声明为原始类型，而是将其声明为整数。是什么赋予了？难道是我传递的“id”值相当大（例如：65366）

如果有帮助，我可以从应用程序中提供更多代码。我只是希望其他人可以更了解堆栈跟踪。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T14:01:48.510

这最终成为我的一个简单错误。该控制器中有另一种方法用@ModelAttribute 注释。该方法确实有一个“int thingyId”参数。

所以我想我毕竟没有将问题缩减为正确的方法。（学过的知识）

感谢帮助。

# python - 结合 numpy 和 sympy

> ID：10129213
> 
> 赞同：7
> 
> 时间：2012-04-12T18:04:55.780
> 
> 标签：python, numpy, sympy

我有以下代码：

```
p = classp();
for i in range(1,10):
   x = numpy.array([[2],[4],[5]])
   print p.update(x)

class classp:
   def __init__(self):
       self.mymodel = array([2*x[1]], [3*x[0]], [x[2]]);
   def update(self, x):
       return self.mymodel #replace x(0)...x(1) with the given parameter 
```

我的问题与上面的代码有关，如果可能的话，我想使用 sympy 定义一个模型，然后在更新函数中用 x 值替换 sympy 变量。是否可以？我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-13T09:25:08.483

我可以向您提出两个解决方案。

首先，有`DeferedVector`一个是为使用而创建的`lambdify`：

```
In [1]: from sympy.matrices import DeferredVector

In [2]: v = DeferredVector('v')

In [3]: func = lambdify(v, Matrix([v[1], 2*v[2]]))

In [4]: func(np.array([10,20,30]))
Out[4]: 
       [[20] 
        [60]] 
```

然而，lambdify 对我的口味来说太神奇了。

另一种选择是使用以下`.subs`方法：

```
In [11]: x1, x2, x3 = symbols('x1:4')

In [12]: m = Matrix([x2,2*x1,x3/2])

In [13]: m.subs({x1:10, x2:20, x3:30})
Out[13]: 
        ⎡20⎤
        ⎢  ⎥
        ⎢20⎥
        ⎢  ⎥
        ⎣15⎦ 
```

您可以像这样为替换创建字典：

`dict(zip(symbols('x1:4'), your_value_array))`.

不要忘记所有返回对象都是 sympy 矩阵。要将它们转换为 numpy 数组，只需使用`np.array(the_matrix_in_question)`并且不要忘记指定`dtype`，否则它将默认为`dtype=object`.

# python - 从 Python 打开 vi

> ID：10129214
> 
> 赞同：5
> 
> 时间：2012-04-12T18:05:13.587
> 
> 标签：python

我想复制当您执行“git commit”之类的操作时发生的功能。它会打开您的编辑器，您输入一些内容，然后保存/退出以将该文件交还给启动编辑器的脚本。

我将如何在 Python 中实现此功能？

编辑：

感谢您的建议，这是一个基于答案的工作示例：

```
import os, subprocess, tempfile

(fd, path) = tempfile.mkstemp()
fp = os.fdopen(fd, 'w')
fp.write('default')
fp.close()

editor = os.getenv('EDITOR', 'vi')
print(editor, path)
subprocess.call('%s %s' % (editor, path), shell=True)

with open(path, 'r') as f:
  print(f.read())

os.unlink(path) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T18:11:42.090

通常的情况是：

1.  创建一个临时文件，将默认内容写入其中
2.  启动存储在环境变量“EDITOR”中的命令。这通常是一个 shell 命令，因此它可能包含参数 -> 通过 shell 运行它或相应地解析它
3.  一旦进程终止，读回临时文件
4.  删除临时文件

所以是这样的：

```
import os, subprocess, tempfile
f, fname = tempfile.mkstemp()
f.write('default')
f.close()
cmd = os.environ.get('EDITOR', 'vi') + ' ' + fname
subprocess.call(cmd, shell=True)
with open(fname, 'r') as f:
    #read file
os.unlink(fname) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T18:12:20.360

将您要修改的文本数据保存到临时文件，打开编辑器 (vi) 作为指向该文件的外部进程，使用 os.system - 或 subprocess.Popen 如果您需要对其进行更多控制，然后读取临时文件回档。

我建议你默认打开 vi，但要尊重“VISUAL”环境变量的内容。

```
import os

name = os.tmpnam()
editor = "vi" if not ["VISUAL"] in os.environ else os.environ["VISUAL"]
os.system("%s %s" % (editor, name))
data = open(name).read()
os.unlink(name) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T18:07:52.123

```
os.system("\bin\vi %s"%filename)

ftxt = open(filename,"r").read() 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-12T18:08:43.727

安装`ipython`并查看`%ed`命令。另请参阅[此类似问题中的其他建议](https://stackoverflow.com/questions/3438531/ipython-workflow-edit-run)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-12T18:11:50.770

实现这一点的一种方法是使用子进程。代码看起来像这样：

```
import subprocess
subprocess.call(['vi', 'filename.txt']) 
```

从此返回将给出 vi 的返回状态。

# mysql - mysql subtract in select

> ID：10129215
> 
> 赞同：3
> 
> 时间：2012-04-12T18:05:19.680
> 
> 标签：mysql, sql

For example, I have the following table:

```
date | id | num
01-01 | a | 10
01-02 | a | 14
01-02 | b | 2
01-03 | a | 19
01-03 | b | 5
01-04 | a | 13 
```

I want to substract `num` of `b` from `a`, that is, the result will be:

```
01-01 | 10    //10
01-02 | 12    //14-2
01-03 | 14    //19-5
01-04 | 13    //13 
```

I tried the following SQL query but if there is no record of `b` on a `date`, it will return `\N`.

```
SELECT tba.date, numall-numout
FROM (
    SELECT date, num AS numall
    FROM tb
    WHERE id = "a"
) tba
LEFT JOIN (
    SELECT date, num AS numout
    FROM tb
    WHERE id = "b"
) tbb
ON tba.date = tbb.date 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-12T18:07:58.407

如果没有匹配的 B，左连接将返回 null，这意味着你正在做

```
numall - NULL 
```

这导致NULL。为了解决这个问题，你必须做

```
numall - COALESCE(numout, 0) 
```

对不存在的“b”日期强制为 0。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T18:08:55.597

利用`SELECT tba.date, numall-ISNULL(numout,0)`

# javascript - changing css style with jquery

> ID：10129216
> 
> 赞同：-1
> 
> 时间：2012-04-12T18:05:21.923
> 
> 标签：javascript, jquery, html, css

Am I changing the style correctly? I am trying to change overflow-x to scroll. It's not working.

css

```
div.anythingSlider .anythingControls .anythingNavWindow {
margin-top: 15px;
overflow-x:hidden;
float: left;
} 
```

js

```
$("div.anythingSlider .anythingControls .anythingNavWindow").css({"overflow-x":"scroll"}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T18:09:09.933

您的示例没有更改类，而是通过使用 jQuery 更改内联样式来覆盖该类。

根据您使用的浏览器，有时会忽略`overflow-x`和属性，**除非*****两者*****都已定义**。你可能只需要在你的类中指定一个值。`overflow-y`*`overflow-y`*

 ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T18:10:43.867

您在那里所做的是选择与选择器“div.anythingSlider .anythingControls .anythingNavWindow”相对应的所有元素，但不更改类定义本身。如果你想改变类，也许你需要稍微调整一下额外的类，所以你的 CSS 表看起来像这样：

```
div.anythingSlider .anythingControls .anythingNavWindow {
  margin-top: 15px;
  overflow-x:hidden;
  float: left;
}

div.anythingSlider.withOverflow .anythingControls .anythingNavWindow {
  overflow-x: scroll;
} 
```

这样，您可以使用 jQuery 选择要更改的anySlider 元素并执行以下操作：

```
$("div.anythingSlider").addClass("withOverflow") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T18:12:23.180

该语句不会更改 CSS 类定义；它将`overflow-x: scroll`样式应用于匹配的选择器元素。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-12T18:10:17.907

你能试一试吗：（只是猜测）

```
$("div.anythingSlider .anythingControls .anythingNavWindow").css("overflow-x", "scroll"); 
```*

# vector - Does erasing an element of a std::vector preserve ordering?

> ID：10129218
> 
> 赞同：2
> 
> 时间：2012-04-12T18:05:24.317
> 
> 标签：vector

I would like to know if the ordering of the elements of a std::vector container is always preserved after erasing an arbitrary element (for example: push 0,1,2,3, erase 1, get 0,2,3).

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T18:29:32.760

是的。还要注意复杂性（§ 23.3.6.5）：

> 复杂度：T的析构函数被称为等于被擦除元素个数的次数，而T的移动赋值运算符被称为**等于被擦除元素之后向量中元素个数的次数。**

和迭代器失效：

> 效果：在擦除点或擦除点之后使迭代器和引用无效。

如果您不想通过标准查看这些细节并且没有信心，请查看此[参考站点](http://en.cppreference.com/w/cpp/container/vector)。

# mysql - 在 2 个表中插入值，其中第 2 个表需要第 1 个表的 ID

> ID：10129227
> 
> 赞同：0
> 
> 时间：2012-04-12T18:05:55.200
> 
> 标签：mysql

我想为我的网站建立一个基本论坛。我有2张桌子：

表格主题：字段 id、标题

表帖子：字段 id、topicid、message

当用户想要创建主题时，他必须填写带有主题标题和消息的表单。标题将插入到主题表中，消息将插入到帖子表中，但我需要 topicid（主题表中的字段 id）进行第二次插入。

```
INSERT INTO topics (title) VALUES ('$title')
INSERT INTO posts (topicid, message) VALUES ('???', '$message') 
```

我怎样才能得到topicid？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T18:08:57.850

mysql：

```
INSERT INTO topics (title) VALUES ('$title')
INSERT INTO posts (topicid, message) VALUES (LAST_INSERT_ID(), '$message') 
```

或者使用 PHP：

```
[...]
// Connect to mysql
$title = 'Foo';
$message = 'Bar';

mysql_query('INSERT INTO topics (title) VALUES (' . $title . ')');
mysql_query('INSERT INTO posts (topicid, message) VALUES (' . mysql_insert_id() . ', ' . $message . ')'); 
```

# fancybox - Fancybox - How to make whatever is out of the box black?

> ID：10129234
> 
> 赞同：0
> 
> 时间：2012-04-12T18:06:22.260
> 
> 标签：fancybox

I don't know much about Fancybox, and I'm confused about all the files. I think I have an easy question, but I can't seem to find the answer online. Must be so easy no one ever asks, or I'm not good at searching online.

I'm using Fancybox with an iframe, and was wondering how I could the stuff that's outside of the fancybox to be all black? I only want the iframe to be visible, or maybe make the outside 90% black. Where would I do this? In what file? There are so many files.

I have another question. How can I make the iframe close by clicking anywhere? I remember it was like this at first, and then I changed it so that it only closes by clicking on the X. I don't remember what file I modified. :/

Thank you!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T01:03:08.947

假设您使用以下 html 打开fancybox：

```
<a href="page.html" class="fancybox">open page</a> 
```

无需修改任何文件，只需将正确的选项（**对于 fancybox v1.3.4**）添加到您的自定义脚本中，例如：

```
$(".fancybox").fancybox({
 "overlayColor": "#000",  // here you set the background black
 "overlayOpacity": 1,  // here you set the transparency of background: 1 = opaque
 "hideOnOverlayClick": true,  // if true, closes fancybox when clicking OUTSIDE the box
 "hideOnContentClick": true, // if true, closes fancybox when clicking INSIDE the box
 "type": "iframe" // the type of content : iframe for external pages
 "width": 640, // if type=iframe is always smart to set dimensions
 "height": 320
}); 
```

请注意，`Boolean`和/或`integer`值不应该有引号

有关其他选项[，请阅读文档](http://fancybox.net/api)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T18:19:15.713

如果您使用的是[fancybox V2](http://fancyapps.com/fancybox/)

你可以在这个文件中看到：jquery.fancybox.css

寻找 ：

```
 /* Overlay helper */

#fancybox-overlay {
    position: absolute;
    top: 0;
    left: 0;
    overflow: hidden;
    display: none;
    z-index: 1001;
    background: #000;
} 
```

添加：

```
opacity: 1 !important; 
```

不透明度是一个双值，所以如果你想要 90% 的不透明度，它是：0.90

# ruby - Amazon Linux latest ruby

> ID：10129235
> 
> 赞同：13
> 
> 时间：2012-04-12T18:06:22.523
> 
> 标签：ruby, amazon-ec2, amazon

Amazon Linux 2012.03 now comes with ruby 1.9.3

To install it (as per the docs)

```
sudo yum install ruby19 
```

But `ruby -v` shows `1.8.7`. How would I switch it over 1.9.3 (If its already there there would be no need to use RVM yes?)

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-10-18T17:39:27.537

在 Amazon Linux 上执行此操作的正确方法是：

```
sudo yum update (to get latest version of Amazon Linux (2013.09 at time of this answer)
yum install ruby19 
alternatives --set ruby /usr/bin/ruby1.9 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-16T10:12:13.747

补充@baboonWorksFine 的答案，有许多 1.9 命令可以符号链接为它们的未修饰等效项。我所做的是：

```
sudo -s
for f in /usr/bin/*1.9
do
  ln -s $f ${f%1.9}
done 
```

这样，您就不会意外错过任何需要别名的命令。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-05-01T02:02:44.553

如果你这样做：

```
ls -l /usr/bin/ruby* 
```

你可能会看到：

```
lrwxrwxrwx 1 root root    7 Apr 26 18:27 /usr/bin/ruby -> ruby1.8
-rwxr-xr-x 1 root root 3720 Mar 29 08:29 /usr/bin/ruby1.8
-rwxr-xr-x 1 root root 3888 Mar 29 12:26 /usr/bin/ruby1.9 
```

这是很好的自我解释。所以你想做的是：

```
rm /usr/bin/ruby && ln -s /usr/bin/ruby1.9 /usr/bin/ruby 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2014-07-01T23:41:49.150

这是一种简单的解决方案和清洁剂。

```
alternatives --config ruby 
```

这将列出您通过 yum 安装的所有 Ruby 版本。您所要做的就是选择那里列出的数字并按回车键。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2012-04-12T18:09:28.367

Ruby 版本 1.9 应以名称`ruby19`或`ruby1.9`. `ruby`只是一个指向默认版本 ruby​​ 的符号链接。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-22T21:07:47.747

我使用了@Ian Dickinson 的答案，但在 ln 选项中添加了一个“f”以强制它覆盖现有链接。所以代码是：

```
sudo -s
for f in /usr/bin/*1.9
do
  ln -fs $f ${f%1.9}
done 
```

# php - 这个上传脚本正确吗？

> ID：10129239
> 
> 赞同：0
> 
> 时间：2012-04-12T18:06:35.030
> 
> 标签：php

我有一个名为“Mobile_App”的文件夹，该文件夹中有一个 html 页面，其中包含一个文件输入、一个上传文件的 php 脚本和一个名为“ImageFiles”的文件夹。

问题是文件没有上传到“ImageFiles”中。我想知道的是，在将文件上传到“Imagefiles”文件夹时，下面的代码是正确的，还是不正确，我怎样才能让它正常工作？

下面是上传文件的 php 脚本（文件输入称为“fileImage”）：

```
<?php

   $destination_path = $_SERVER['DOCUMENT_ROOT']."/ImageFiles";

   $result = 0;

   $target_path = $destination_path . basename( $_FILES['fileImage']['name']);

   if(move_uploaded_file($_FILES['fileImage']['tmp_name'], $target_path)) {
      $result = 1;
   }

   sleep(1);

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T18:11:25.750

首先，`/`文件夹名和文件名之间没有关系。其次，您不需要拥有文档根目录。更正的代码：

```
<?php

   $destination_path = "/ImageFiles";

   $result = 0;

   $target_path = $destination_path . "/" . basename( $_FILES['fileImage']['name']);

   if(move_uploaded_file($_FILES['fileImage']['tmp_name'], $target_path)) {
      $result = 1;
   }

   sleep(1);

?> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-12T18:10:27.410

不，您根本没有检查上传是成功还是失败。您也不会检查文件名冲突，您的脚本会很高兴地用新文件覆盖任何现有文件。

```
<?php

if ($_FILES['fileImage']['error'] !== UPLOAD_ERR_OK) {
   die("Upload failed with error code " . $_FILES['fileImage']['error']);
}

...
$target_path = etc...
...
if (file_exists($target_path)) {
   die("$target_path exists already");
}
// got here, must be ok to proceed
if (move_uploaded_file(....)) {
etc... 
```

上传错误代码在[这里定义](http://www.php.net/manual/en/features.file-upload.errors.php)。

# sql - sql server中存储过程的执行权限问题

> ID：10129240
> 
> 赞同：0
> 
> 时间：2012-04-12T18:06:41.050
> 
> 标签：sql, sql-server, sql-server-2008, tsql, sql-server-2005

我有很多跨不同客户端使用的存储过程，对于少数客户端，有一个用户 AdminRole 并且需要为 AdminRole 添加执行权限，对于少数客户端，没有用户 AdminRole 并且不需要具有执行权限。

每个存储过程都有

例如：

```
CREATE PROCEDURE PROCEDURENAME AS

SELECT FIRSTNAME FROM TABLE1

GO

GRANT EXECUTE ON PROCEDURENAME TO ADMINROLE

GO 
```

最后这一行，但是当没有管理员角色时，这将无法执行。我如何在 sql 存储过程中实现这个逻辑？

```
If userrole contains AdminRole  then

  --Execute these 2 lines

GRANT EXECUTE ON PROCEDURENAME TO ADMINROLE
GO

else

 'Do nothing 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T18:13:32.107

[DATABASE_PRINCIPAL_ID](http://technet.microsoft.com/en-us/library/ms187319%28v=sql.100%29.aspx)怎么样

```
IF DATABASE_PRINCIPAL_ID('AdminRole') IS NOT NULL 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T19:19:27.583

如果有很多存储过程，并且您希望 ADMINROLE 对数据库中的所有存储过程具有执行权限，请运行以下命令

IF USER_ID('AdminRole') IS NOT NULL GRANT EXECUTE T​​O [AdminRole] ELSE Print 'AdminRole 在数据库中不存在'

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-13T00:13:20.837

不确定您的解决方案中的“AdminRole”是否实际上是 SQL 登录、SQL 用户或 SQL 数据库角色

如果“AdminRole”是 SQL 用户（在数据库级别）或 SQL 角色（在数据库级别；相同的语法）并且您想检查它是否存在（而不是检查当前用户是 AdminRole 还是 AdminRole 的成员），请执行：

```
IF EXISTS(SELECT name FROM sys.database_principals WHERE name='AdminRole')
BEGIN
    -- do your GRANT here
END 
```

如果“AdminRole”是 SQL 登录（在服务器级别），请执行以下操作：

```
IF EXISTS(SELECT name FROM sys.server_principals WHERE name='AdminRole')
BEGIN
    -- do your GRANT here
END 
```

# visual-studio-2010 - How to find which project or which file uses the unsafe function call through warning c4996

> ID：10129242
> 
> 赞同：1
> 
> 时间：2012-04-12T18:07:00.240
> 
> 标签：visual-studio-2010

Warning 1 warning C4996: 'std::_Copy_impl': Function call with parameters that may be unsafe - this call relies on the caller to check that the passed values are correct. To disable this warning, use -D_SCL_SECURE_NO_WARNINGS. See documentation on how to use Visual C++ 'Checked Iterators' c:\program files\microsoft visual studio 10.0\vc\include\xutility 2227

Assume that one solution has the following structure:

```
Solution
 - MainProject
 - Project1
 - Project2
 - Project3
 - Project4 
```

Where The Main Project depends on Project1&4, Project1 depdents on Project 2&3\. When the dependency gets complicated, it is really tedious and difficult to figure out which project compilation causes the warning.

**Question**> Is there a way that VS can tell me which project or which file that includes the unsafe function call? For example, does VS provide a switch that can print the build path?

For example:

> Warning 1 warning C4996: 'std::_Copy_impl': Function call with parameters that may be unsafe - this call relies on the caller to check that the passed values are correct. To disable this warning, use -D_SCL_SECURE_NO_WARNINGS. See documentation on how to use Visual C++ 'Checked Iterators' c:\program files\microsoft visual studio 10.0\vc\include\xutility 2227

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T14:26:19.553

当我遇到这样的问题时，我会在 Visual Studio 中使用“在文件中搜索”。

选择“Edit->Find and Replace->Find In Files”，在出现的对话框中，在“Look in”中输入所有项目公共根目录的路径，在“Find what”中输入函数名。

# android - Which android devices support the en_CA locale?

> ID：10129243
> 
> 赞同：0
> 
> 时间：2012-04-12T18:07:00.993
> 
> 标签：android, localization

Which android devices support the en_CA locale?

I have several devices including the Nexus S, Galaxy Nexus, Acer tablet, Galaxy Tab, Xoom, Droid X; and none of these devices have a user-selectable option for Canadian locales. Are there any devices on the market that come with the option to select the en_CA locale?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T18:30:25.823

我认为所有 Android*设备*都应该支持 en_CA，但它确实取决于 ROM，这通常意味着它取决于 OEM 决定放在那里的内容。我怀疑这意味着您列出的许多设备实际上都支持加拿大语言环境，但前提是您在加拿大购买。我有一个带有支持英语（加拿大）的[Virtuous Inquisition](http://www.virtuousrom.com/p/inquisition.html) 3.0 ROM 的 HTC Sensation，但我检查了我桌上的四台美国库存设备，但没有一台有它（它们都有 en-US 和西班牙语，一个有中文也一样）。

# asp.net - ASP.NET Update Progress When Using HttpContext

> ID：10129244
> 
> 赞同：1
> 
> 时间：2012-04-12T18:07:07.110
> 
> 标签：asp.net, ajax, updatepanel

I have an ASP.NET page that collects some criteria from the user with ASP.NET controls and then based on the values of the controls, uses HttpContext.Current.Response to generate output to a CSV from the web page.

The issue I'm having is that it may take a minute or so for my response to be generated. Thus, I would like to implement a progress bar of some kind from the time my user submits the request until the time the CSV is delivered. Unfortunately, I can't seem to get my hidden div to display and hide on demand with EnablePartialRendering set to false in ScriptManager (this is necessary for populating other controls on the page).

Is there any way to implement a progress bar (either server or client-side) to monitor the status of HttpContext output?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T18:13:10.413

[`UpdateProgress`](http://msdn.microsoft.com/en-us/library/system.web.ui.updateprogress.aspx)课程不是进度条。其目的是提供正在发生部分回发的反馈，而不是向浏览器传达该部分回发的实际进度

我最喜欢的 JavaScriptish（也支持所有主要插件）库来满足您的要求是[Plupload](http://www.plupload.com/)：

例子可以在[这里](http://www.plupload.com/example_queuewidget.php)看到。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T18:14:22.520

不，至少不是你想的那样。如果您要将文件发回给用户，那么您不能事先向用户发出任何 HTML。您必须将文件作为独立响应发送。

您可以做的是许多其他网站所做的，即在后台执行该过程，并将用户重定向到具有动画以指示正在发生的事情的页面。您使用 Javascript 使页面每隔几秒钟刷新一次，直到后台进程完成，然后返回文件。

这使过程复杂化，并且需要更多的工作。你要问的问题是，这种进步真的值得吗？

编辑：

没有注意到您正在使用 Ajax，在这种情况下，您可以简单地在页面上放置一个通常隐藏的动画，然后在执行该过程时取消隐藏动画并让它旋转。这不能显示实际进展，但确实表明正在发生某些事情。该过程完成后，您再次隐藏动画，然后发送文件。

如果您要使用 javascript 进行下载，您还有其他一些选择……但这些都与准备下载的进度无关。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T18:15:23.917

如果您使用的是 ajax，这是最好的方法

```
$('#loadinganimation')
    .hide()  // hide it initially
    .ajaxStart(function() {
        $(this).show();
    })
    .ajaxStop(function() {
        $(this).hide();
}); 
```

# delphi - Indy and TStreams

> ID：10129245
> 
> 赞同：1
> 
> 时间：2012-04-12T18:07:08.510
> 
> 标签：delphi, delphi-xe2, indy, memorystream

What's the best way to go about sending a TMemoryStream through Indy?

At the moment I'm trying:

```
procedure TClientForm.IdTCPClient1Connected(Sender: TObject);
begin
  IdTCPClient1.IOHandler.Write(KStore.Size);
  KStore.Position := 0;
  IdTCPClient1.IOHandler.Write(KStore);

  Memo1.Lines.Add('Client connected with server');
end 
```

And at the Server end:

```
function MemoryStreamToString(M: TMemoryStream): string;
begin
  SetString(Result, PChar(M.Memory), M.Size div SizeOf(Char));
end;

procedure TClientForm.IdTCPServer1Connect(AContext: TIdContext);
var
  LStore: TMemoryStream;
  Size: Int64;
  LStore := TMemoryStream.Create;
  LStore.Position := 0;
  Size := AContext.Connection.IOHandler.ReadInt64();
  AContext.Connection.IOHandler.ReadStream(LStore,Size);
end; 
```

But despite a lack of errors, at the other end using that memory stream to string function just returns ???????????????????? in the text file I'm saving it to.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T20:00:30.373

`TIdIOHandler.Write(TStream)`并`TIdIOHandler.ReadStream()`可以为您处理财产的传输和接收`TMemoryStream.Size`，例如：

```
procedure TClientForm.IdTCPClient1Connected(Sender: TObject); 
begin 
  IdTCPClient1.IOHandler.LargeStream := True; 
  IdTCPClient1.IOHandler.Write(KStore, 0, True); 
  Memo1.Lines.Add('Client connected with server'); 
end; 
```

.

```
function MemoryStreamToString(M: TMemoryStream): string; 
begin 
  SetString(Result, PChar(M.Memory), M.Size div SizeOf(Char)); 
end; 

procedure TClientForm.IdTCPServer1Connect(AContext: TIdContext); 
var 
  LStore: TMemoryStream; 
  S: String;
begin
  LStore := TMemoryStream.Create; 
  try
    AContext.Connection.IOHandler.LargeStream := True; 
    AContext.Connection.IOHandler.ReadStream(LStore, -1, False); 
    S := MemoryStreamToString(LStore); 
  finally
    LStore.Free;
  end;
end; 
```

话虽如此，您提到错误与从 to 的转换`TMemoryStream`有关`String`。`TMemoryStream`请显示两端的实际内容。内容可能不是您所期望的。当您将 a 存储到 中时，客户端`TMemoryStream`包含`'?'`以开头的字符，或者客户端未将编码字符发送到服务器。`String``TMemoryStream``UTF-16`

# iframe - 在 dojo 中，无法使用 FileInput 和 iFrame 发送多个文件

> ID：10129247
> 
> 赞同：0
> 
> 时间：2012-04-12T18:07:13.267
> 
> 标签：iframe, dojo, multipart, file-io

我正在使用 FileInput 和 iframe 发送多部分请求

```
var _newForm;
        if(dojo.isIE < 9 || (dojo.isIE && dojo.isQuirks)){
            // just to reiterate, IE is a steaming pile of code.
            _newForm = document.createElement('<form enctype="multipart/form-data" method="post">');
            _newForm.encoding = "multipart/form-data";

        }else{
            // this is how all other sane browsers do it
            _newForm = document.createElement('form');
            _newForm.setAttribute("enctype","multipart/form-data");
        }
        _newForm.appendChild(foo.fileInput);
        console.log("FP is "+foo.fileInput);
        dojo.body().appendChild(_newForm);

        var o = dojo.io.iframe.send({
            url: foo.url,
            form: _newForm,
            load: uploadComplete,
            error: onBeforeSend
        }); 
```

我面临的问题是，我只能发送一个成功的请求。其次，我需要刷新页面。请告诉我，发送多个文件需要做什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T22:44:56.457

我正在使用 dojo 1.6 并且遇到了一个非常相似的问题，我通过以下方法解决了这个问题：

```
dojo.io.iframe._currentDfd = null; //insert this line
dojo.io.iframe.send
({... 
```

*在 Chrome 版本 25.0.1364.152 m 中验证

来源： http: [//mail.dojotoolkit.org/pipermail/dojo-interest/2012-May/066109.html](http://mail.dojotoolkit.org/pipermail/dojo-interest/2012-May/066109.html)

# yii - 多模型关系

> ID：10129248
> 
> 赞同：0
> 
> 时间：2012-04-12T18:07:24.473
> 
> 标签：yii

我有 3 张桌子

## 用户

身份证名称

## 经理

id user_id

## 项目

id manager_id

从项目模型中，我如何在用户表中显示名称。

yii 建立经理和项目之间的关系

'managers' => array(self::BELONGS_TO, 'manager', 'manager_id'),

所以在视图中我可以显示managers.user_id。

但我可以在项目与经理之间建立关系，然后在经理与用户之间建立关系，并在项目表中获取用户的名称

例如，对于项目表中的每个 manager_id，我想在 manager 表中查找该经理的 user_id，然后在 User 表中查找用户名？

任何帮助表示赞赏。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T03:57:53.020

您可以使用两个背靠背关系来检索该信息：

```
$project = Project::model()->with('manager.user')->findByPk((int)$id);
print $project->manager->user->name; 
```

第一行检索项目并预先加载经理和用户信息。但是即使没有急切的加载，Yii 也会加载（它只需要另外两个数据库查询）。还要注意 BELONGS_TO 关系使用单数名称。它使关系的另一端更清楚。

我还建议考虑将 manager 和 user 表合并到一个表中，除非您明确需要将它们分开。然后将 isManager 布尔值添加到 User 表中，并将 manager_id 直接链接到 user 表。

如果您需要一个单独的管理器模型，您总是可以为使用用户表的管理器创建一个新模型，从用户模型继承并定义一个 defaultScope()，它通过 isManager 布尔值过滤管理器...

```
class Manager extends User
{
    public function defaultScope()
    {
        return array(
            'condition'=>'isManager=1',
        );
    }
} 
```

Yii 可以做很多很酷的事情！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T19:56:24.057

你应该看看[这里](http://www.yiiframework.com/doc/guide/1.1/en/database.arr#relational-query-with-through)。通过在关系查询中使用“通过”，您将能够从项目实体联系用户并获得所需的所有属性。

# iphone - filtersArrayUsingPredicate 数组未保留

> ID：10129252
> 
> 赞同：0
> 
> 时间：2012-04-12T18:07:33.387
> 
> 标签：iphone, core-data, nspredicate, uisearchdisplaycontroller

我有一个核心数据数据库，每一行都显示在一个表中。

我有一个搜索控制器，使用户能够按名字或姓氏搜索。

当我从“filteredArrayUsingPredicate”获得结果时，我重新加载搜索控制器表，一切正常。该表显示了过滤后的结果。

在选择结果时，结果数组为空，随后由于 [array atIndex:index path.row] 越界而崩溃。数组是空的，让我觉得它已经被释放了。

此代码在另一个视图上完美运行。我已经尝试过重新编写、清理和构建，但仍然在发生——有什么想法吗？

下面是我的代码

@property(nonatomic,retain) NSArray* cachedSearchResults;

```
-(void)searchBar:(UISearchBar *)searchBar textDidChange:(NSString *)searchText{

    NSPredicate * predicate =  [NSPredicate predicateWithFormat:@"first_name contains[cd] %@ || last_name contains[cd] %@",searchText, searchText];
    self.cachedSearchResults = [[self.cachedResults filteredArrayUsingPredicate:predicate]retain];
;
    [searchController.searchResultsTableView reloadData];
}

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath{

PupilManagedObject* selected = nil;
if(tableView == table){
    selected = [cachedResults objectAtIndex:indexPath.row];
}else{
    selected = [self.cachedSearchResults objectAtIndex:indexPath.row]; //array is empty at this point
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T15:03:23.520

我发现问题是在我使用数组中的数据之前搜索控制器被解雇了。奇怪但改变我的代码顺序有效

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-12T18:21:26.193

此代码片段缺少重要信息。从我所见，听起来您没有正确计算 tableView:numberOfRowsInSection:。验证它是否为您的给定方案提供了正确的行数。

# html - 为什么我不能将 display:table-row 与 list-style-type:decimal 一起使用？

> ID：10129255
> 
> 赞同：4
> 
> 时间：2012-04-12T18:07:50.173
> 
> 标签：html, css

为什么我不能使用`display:table-row;`with `list-style-type:decimal;`？

我的 CSS 文件：

```
ol {
    list-style-type: decimal;
}

li {
    background-color: red;
    display: table-row;
} 
```

我的 HTML 文件：

```
<ol>
    <li>This is the first.</li>
    <li>This is the second.</li>
</ol> 
```

[JSFiddle](http://jsfiddle.net/unimous/XMrbu/10/)

目标：我只想显示每行前导的数字，并且都`<li>`与最长的项目一样长。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T18:10:41.553

因为`list-style-type`仅适用于`display:list-item`. ：/

根据[规范](http://www.w3.org/TR/CSS2/generate.html#propdef-list-style-type)：

> `list-style-type`
>   **适用于：**元素`display: list-item`

* * *

**编辑**根据您评论中的新信息，您可以在现代浏览器上执行此操作：http:
[//jsfiddle.net/XMrbu/12/](http://jsfiddle.net/XMrbu/12/)

```
ol {
   list-style-type:none;        
   counter-reset: sectioncounter;
}                      
li { display:table-row }
li:before {
   content: counter(sectioncounter) ":";
   counter-increment: sectioncounter;
   display:inline-block; width:2em; text-align:right;
   position:relative; left:-2.5em; margin-right:-2em;
}​ 
```

或者这个怎​​么样：http:
[//jsfiddle.net/XMrbu/14/](http://jsfiddle.net/XMrbu/14/)

```
ol {
   display:inline-block;
   list-style-type:decimal;
   background:rgba(255,0,0,0.2);
} 
```

如果您制作`ol`be `display:inline-block`（或`float`它），它将自动折叠到内部最长项目的宽度。然后，您可以按您喜欢的宽度设置`ol`or的样式。`li`

# c - 无法找出粉碎堆栈段错误

> ID：10129256
> 
> 赞同：2
> 
> 时间：2012-04-12T18:07:51.140
> 
> 标签：c, buffer-overflow, shellcode, stack-smash

我最近在用“shellcoder's handbook”一书做一些非常棒的堆栈练习。
但是当我尝试在我的 Ubuntu11.04 上测试一些代码时，我总是会遇到段错误。
情况如下：

起初我写了 exit_shellcode.s （只是简单的 exit(0) 函数）：

```
.section .text
.globl _start
_start:
movl $1, %eax
movl $0, %ebx
int $0x80 <br> 
```

然后我得到十六进制代码：

```
0x000001b8 0x0000bb00 0x80cd0000 
```

之后我制作了 wack.c：

```
char shellcode[] = "\xb8\x01\x00\x00\x00\xbb\x00\x00\x00\x00\xcd\x80";
void f(void)
{
    int *ret;
    ret = (int *)&ret + 2;
    (* ret) = (int)shellcode;
}

void main (void)
{
    f();
} 
```

> 编译： gcc -mpreferred-stack-boundary=2 -ggdb -fno-stack-protector -o wack wack.c

但是当我运行它时收到段错误。

这是 gdb 结果：

```
(gdb) disas main
Dump of assembler code for function main:
    0x080483af <+0>:    push   %ebp
    0x080483b0 <+1>:    mov    %esp,%ebp
    0x080483b2 <+3>:    call   0x8048394 <f>
    0x080483b7 <+8>:    pop    %ebp
    0x080483b8 <+9>:    ret
End of assembler dump.

(gdb) disas f
Dump of assembler code for function f:
    0x08048394 <+0>:    push   %ebp
    0x08048395 <+1>:    mov    %esp,%ebp
    0x08048397 <+3>:    sub    $0x4,%esp
    0x0804839a <+6>:    lea    -0x4(%ebp),%eax
    0x0804839d <+9>:    add    $0x8,%eax
    0x080483a0 <+12>:   mov    %eax,-0x4(%ebp)
    0x080483a3 <+15>:   mov    -0x4(%ebp),%eax
    0x080483a6 <+18>:   mov    $0x804a010,%edx
    0x080483ab <+23>:   mov    %edx,(%eax)
    0x080483ad <+25>:   leave
    0x080483ae <+26>:   ret
End of assembler dump. 
```

shellcode 数组

```
(gdb) x/20x 0x804a010
0x804a010 <shellcode>:  0x000001b8  0x0000bb00  0x80cd0000  0x00000000 
```

在f中，ebp和ret=0x080483b7

```
(gdb) x/20x $ebp
0xbffff2c0: 0xbffff2c8  0x080483b7  0xbffff348  0x00145e37
0xbffff2d0: 0x00000001  0xbffff374  0xbffff37c  0x0012e414
0xbffff2e0: 0xffffffff  0x0012cff4  0x08048215  0x00000001
0xbffff2f0: 0xbffff330  0x0011da51  0x0012dad0  0xb7fffb48
0xbffff300: 0x00000001  0x0028cff4  0x00000000  0x00000000 
```

经过一番si，ret=0x0804a010，就是shellcode数组的地址。

```
(gdb) x/20x $ebp
0xbffff2c0: 0xbffff2c8  0x0804a010  0xbffff348  0x00145e37
0xbffff2d0: 0x00000001  0xbffff374  0xbffff37c  0x0012e414
0xbffff2e0: 0xffffffff  0x0012cff4  0x08048215  0x00000001
0xbffff2f0: 0xbffff330  0x0011da51  0x0012dad0  0xb7fffb48
0xbffff300: 0x00000001  0x0028cff4  0x00000000  0x00000000 
```

在一些 si 之后出现段错误，我无法理解。

```
Program received signal SIGSEGV, Segmentation fault.
0x080483ae in f () at wack.c:8 
```

你能帮我么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T19:10:41.913

你做的一切都是正确的；您的问题是`shellcode`放置在`.data`ELF 部分中，并且在现代系统`.data`中被分配并放置在不可执行的页面中。试试这个来清除 NX 标志：

```
vmuser@ubuntu:~$ sudo apt-get update
vmuser@ubuntu:~$ sudo apt-get install execstack
vmuser@ubuntu:~$ execstack -s ./wack
vmuser@ubuntu:~$ ./wack
vmuser@ubuntu:~$ echo $? 
```

（`execstack`是查询和修改ELF二进制文件的可执行堆栈标志的工具）

为了进一步了解现代操作系统中的各种保护机制，我建议您从[这里](http://paulmakowski.wordpress.com/2011/01/25/smashing-the-stack-in-2011/)开始，也许可以阅读 Mariano Graziano 和 Andrea Cugliari 的论文“ [Smashing the stack in 2010](http://www.mgraziano.info/docs/stsi2010.pdf) ”。

# objective-c - iOS mime 扩展

> ID：10129262
> 
> 赞同：1
> 
> 时间：2012-04-12T18:08:13.970
> 
> 标签：objective-c, ios, xcode, cordova

所以，我正在使用 phonegap 开发一个 iOS 应用程序。显然，我在 iOS 中的应用程序必须在后台运行才能正确打开电子邮件附件。而且我的应用程序仅在单击该电子邮件附件时才执行某些操作。

但是，如果我在后台没有应用程序进程，它什么也不做。只是打开我的应用程序，就好像它没有阅读附件一样。这发生在真实设备中。

在模拟器中，如果我在没有后台进程的情况下打开附件，它将停止在： int retVal = UIApplicationMain(argc, argv, nil, @"AppDelegate"); 并给我以下消息：线程1：程序收到信号“SIGKILL”然后当我点击继续时，它会继续并正确打开附件。

此外，这件事不会发生在 android 设备中。

# mysql - 数据库 ID 未在 Rails 和 Backbone.js 之间传递

> ID：10129265
> 
> 赞同：2
> 
> 时间：2012-04-12T18:08:27.743
> 
> 标签：mysql, ruby-on-rails-3, json, backbone.js

我正在使用 Rails 3.1 和 Backbone.js 创建应用程序。使用从数据库中提取的模型集合（通过 Rails 控制器），我将数据库中的每个属性都获取到 javascript。但是使用相同的方法和代码对另一个模型做同样的事情，我没有得到第二个模型的数据库“id”。

这是有效的代码：

```
window.Post = Backbone.Model.extend
  urlRoot: '/posts'

  defaults:
    author_id: 2  

window.Posts = Backbone.Collection.extend
  model: Post
  url: '/posts' 
```

控制器：

```
respond_to :html, :json, :js

def index
  @posts = current_user.posts
  respond_with(@posts.to_json(:include => {:account => {:only => :institution}}))
end 
```

有了上面的这个，我得到了一个从数据库中提取的具有 id 属性的模型，但下面不包含 User 模型的 id 属性

这不是：

```
window.User = Backbone.Model.extend
  urlRoot: '/members'

window.Users = Backbone.Collection.extend
  model: User
  url: '/members' 
```

控制器：

```
respond_to :html, :json, :js

def index
  @users = @account.users
  respond_with(@users)
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T21:12:18.737

尝试在您的模型上设置 _id。看这里：

[http://documentcloud.github.com/backbone/#Model-idAttribute](http://documentcloud.github.com/backbone/#Model-idAttribute)

> **idAttribute** model.idAttribute：模型的唯一标识符存储在 id 属性下。如果您直接与使用不同唯一键的后端（CouchDB、MongoDB）通信，您可以设置模型的 idAttribute 以透明地从该键映射到 id。

当您的模型从数据库返回到应用程序时，主干将看到该密钥并自动更新您的 model.id。因此，例如，我使用 mongodb 并且必须设置 model.idAttribute = "_id"。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T15:10:19.340

感谢您的帮助，这就是问题所在。Rails 的 to_json 和/或 respond_with(@user) 正在删除 'id' 属性。我通过 [link]http://stackoverflow.com/questions/3719041/how-to-customize-to-json-response-in-rails-3[link] 找到了解决方案。

基本上我在我的模型中创建了一个方法'as_json'，并确保它返回一个包含我的 id 的属性哈希。

# git - Windows 上 Git Bash 中的 X 会话？

> ID：10129267
> 
> 赞同：18
> 
> 时间：2012-04-12T18:08:29.340
> 
> 标签：git, user-interface, x11, putty, git-bash

我在 Windows 上使用 Git Bash。我使用 Git Bash 通过 SSH 连接到 UNIX 机器，并尝试使用 GUI 运行程序。我收到消息： `LINUX/UNIX system detected, but unable to access X11 display`。

我有 X-Win 32（商业版）。我也使用过 Xming，它类似于 X-Win 32 的免费版本，但在某些图形方面存在问题。

有没有办法让这个远程系统通过 X-Win 32 或 Xming 或任何方式访问我的 X11 显示器？

当通过 Windows 上的 Git Bash SSH 进入该机器时，我只想从 UNIX 机器上运行像 MATLAB 这样的程序，并弹出一个 GUI。

我还安装了 PuTTY 和 Secure Shell 客户端，但更喜欢仅从 Git Bash 工作，因为它需要更少的按钮来按下以 ssh 到其他机器。

如果无法在 Git Bash 上使用它，我想让它与 PuTTY 一​​起使用（Secure Shell Client 很好，但已永久停止更新）。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-21T12:23:06.720

这个 Q 相当老了，但无论如何......我（终于......）能够使用来自and的`ssh`命令来完成这个工作。我所要做的就是将环境变量设置为（它被设置为 only ）。`Git for Windows``XMing``DISPLAY``localhost:0.0``:0.0`

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2016-01-02T02:05:00.600

Xming 的替代方案是使用 Visual Studio C++ 构建的[VcXsrv 。](http://sourceforge.net/projects/vcxsrv/)最新版本的 Xming 现在需要捐款。

将鼠标指向状态栏中的 X 图标，然后找出它在哪个端口上运行。如果是`:0.0`（或`:25.0`），那么在 Git Bash 中：（`export DISPLAY=localhost:0.0`或`export DISPLAY=localhost:25.0`）。您可能还需要使用ssh 命令来`-Y`代替。`-X`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-28T07:04:33.380

我能够使用 putty 和 xming [http://sourceforge.net/projects/xming/来完成此操作](http://sourceforge.net/projects/xming/)

只需启动 xming 并在 putty 的选项中启用 x 会话转发。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-12T18:19:53.590

在使用 SSH 连接之前，您必须启动 X 服务器。当您连接到另一个盒子时，您必须将`-X`交换机包含在 SSH 中。这将告诉 SSH 将 X11 应用程序输出转发到您的 Windows 机器。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-12T18:19:11.077

您可以尝试在 git bash 中将 -X 开关添加到您的 ssh 命令。我不确定这是否可行。但是，这不是我建议的方法。相反，我建议您使用 putty 研究 X 转发。您应该能够找到有关如何通过快速搜索进行设置的各种指南。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-13T19:32:35.410

您的问题是，您必须以某种方式将 XAuthority 数据传递到远程主机。通常 SSH 会为您执行此操作，但前提是它以正确的环境变量启动。基本上，您需要找出 xauth 数据的位置并将该路径放入 XAUTHORITY 环境变量中。DISPLAY 很可能是“：0.0”。

我认为最直接的解决方案是使用 Cygwin 和它附带的 X11 服务器，因为它的 X 启动脚本将打开一个 xterm，您可以从中通过 SSH 连接到远程机器。

# php - PHP日期strtotime不起作用

> ID：10129274
> 
> 赞同：5
> 
> 时间：2012-04-12T18:08:50.800
> 
> 标签：php, date, strtotime

我写了这段代码

```
echo date("Y-m-d", strtotime($date, strtotime("+ " . $days . " days")));

$date = 2012-04-12
$days = 15 
```

我希望将`$days`（15 天）添加到`2012-04-12`我期望获得的日期（）中，`2012-04-27`并且此代码返回我`2012-04-12`，我做错了什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-12T18:16:25.730

```
echo date('Y-m-d', strtotime('+15 days', strtotime('2012-04-12'))); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-12T18:13:57.770

不要使用 strtotime()。这是不可靠的，尽管你并没有真正做任何会真正回来咬你臀部的事情。但是依赖 strtotime 仍然是一件坏事，因为它会让你的生活在某个时候变得悲惨。

请改用[DateTime](http://php.net/manual/en/datetime.add.php)：

```
$now = DateTime::CreateFromFormat('Y-m-d', '2012-04-12');
$then = $now->add(new DateInterval('P15D'));
$date = $then->format('Y-m-d'); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-12T18:15:25.293

```
$date = '2012-04-12';
$days = 15;
echo date('Y-m-d', strtotime("$date +$days days") ); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-12T18:13:43.627

```
echo date("Y-m-d", strtotime("+$days days", $date)); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-12T18:17:40.940

你的语法不正确。将代码全部放在一行中没有必要，甚至没有帮助。在这种情况下，我们看到尝试这样做会导致语法问题。不要害怕几个额外的小变量！

```
$date = '2012-04-12';
$days = 15;

$ts = strtotime($date);
$new_ts = strtotime('+'.$days.' days', $ts);
$new_date = date('Y-m-d', $new_ts); 
```

清晰、易读、易调试。如果你喜欢代码高尔夫，你可以把它放在一行中，但是有一种更清晰的写法：

```
$new_date = date (
    'Y-m-d',
    strtotime (
        '+'.$days.' days',
        strtotime($date)
    )
); 
```

**文档**

*   PHP `strtotime`- [http://php.net/manual/en/function.strtotime.php](http://php.net/manual/en/function.strtotime.php)
*   PHP `date`- [http://php.net/manual/en/function.date.php](http://php.net/manual/en/function.date.php)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-12T18:13:20.843

为什么不直接使用[DateTime](http://php.net/manual/en/book.datetime.php)类？

```
$date = new DateTime();
$date->add(new DateInterval('P15D')); 
```

# android - 如何在我的自定义组件中读取 android:src

> ID：10129276
> 
> 赞同：4
> 
> 时间：2012-04-12T18:08:57.360
> 
> 标签：android, custom-component

我正在尝试创建一个继承自RelativeLayout 的自定义组件。

在我的 xml 布局文件中，我有：

```
<Mycomponent 
    android:src="@drawable/my_test_image">
      <TestView>
</Mycomponent> 
```

我的问题是如何在 Mycomponent 的构造函数中创建一个 Drawable 类？

我试图阅读 ImageView 的源代码，但似乎尝试了一些 android Internal.R 。

无论如何我可以在我的代码中做到这一点。

谢谢你。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-25T16:31:58.563

我认为 Luksprog 是错误的，我有一个简单的解决方案来访问您的自定义组件“src”数据而无需样式化，只需调用 AttributeSet：

> attrs.getAttributeResourceValue(" [http://schemas.android.com/apk/res/android](http://schemas.android.com/apk/res/android) ", "src", 0);

在这里你可以看到我的例子，让位图尺寸更便宜，jeje。

```
public CustomView(Context context, AttributeSet attrs) {
 super(context, attrs);
 int src_resource = attrs.getAttributeResourceValue("http://schemas.android.com/apk/res/android", "src", 0);
 this.setImageBitmap(getDrawable(getResources(),src_resource));
}

public static Bitmap getDrawable(Resources res, int id){
    return BitmapFactory.decodeStream(res.openRawResource(id));
} 
```

现在你将在 xml 中有这样的东西：

```
<com.example.com.jfcogato.mycomponent.CustomView
    android:id="@+id/tAImageView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" 
    android:src="@drawable/big_image_example"/> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-06T21:36:18.230

我也看到了你可以这样做的建议......

```
 int attributeIds[] = { android.R.attr.src };
    TypedArray a = context.obtainStyledAttributes(attributeIds);
    int resourceId = a.getResourceId(0, 0);
    a.recycle(); 
```

以我的经验，这段代码可以编译，但在运行时返回 0。

所以是的......请使用上面jfcogato的答案。

# data-recovery - ext4 从已知文件大小恢复

> ID：10129284
> 
> 赞同：1
> 
> 时间：2012-04-12T18:09:43.557
> 
> 标签：data-recovery, ext4

我正在使用 PhotoRec 恢复 ext4 卷上的文件。长话短说，我取消了几秒钟的调整大小。除了新的分区表外，没有任何内容写入磁盘。没有任何东西可以带回任何东西。一些文件正在恢复。我有每个文件的列表，以及它们的大小到确切的字节。是否有任何实用程序可以根据成功恢复文件的偏移量将原始数据转储到另一个分区上的新文件中？也没有任何碎片。我刚刚从其他地方复制了它们，所以它们都是连续的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T19:14:42.883

不知道我是否正确，但是如果您想恢复 raw_files 并且您知道旧文件系统中的每个偏移量（start_of_datablock - end_of_datablock）并且您确定没有任何碎片，您可以简单地使用 dd 复制它背部。举个例子。假设您有一个 Picture.jpg 文件，该文件从 fs-block 12000 开始，到 12060 结束，并且您的 fs-block-size 是默认的 ext4 = 4096bytes）：

```
 dd if=/dev/sdxold of=/home/whatever/Picture.jpg bs=4096 skip=12000 count=61 conv=noerror,sync 
```

例如，这应该会带回您的 jpeg 文件。如果您知道确切的开始和结束偏移量，您现在可以对每个文件执行此操作。

-> 如果您不知道它们并且您的文件系统已被删除，因为您的分区已被删除。您可以尝试通过在设备上进行字符串搜索来恢复文件系统元信息（= inode 表中的 inode）：

```
 strings /dev/sdxold 
```

然后手动恢复以前文件系统的不同 inode。如果您恢复了它们，您可以搜索它们寻址的数据块并使用上述方法恢复它们。-> 这意味着很多工作，我不知道是否有一个工具可以为你做到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T23:55:08.470

看看手术刀，它擅长查找文件，尤其是 .jpg 等。

# bash - 来自 AppleScript 的 sed 命令插入 (i)

> ID：10129285
> 
> 赞同：1
> 
> 时间：2012-04-12T18:09:45.370
> 
> 标签：bash, sed, applescript

我该怎么做呢：

```
# Insert a line "heater:M21789" before the line beginning with "fan"
$ sed '
/^fan/ i\
heater:M21789
' order789.txt 
```

取自[http://unstableme.blogspot.com/2009/01/insert-append-change-lines-using-sed.html](http://unstableme.blogspot.com/2009/01/insert-append-change-lines-using-sed.html)

在 AppleScript 中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T20:07:12.927

删除了示例的 txt 文件：

```
set theInput to "title:
PO for vessel unit1 const.
items:
fan:F34539
tube:L1245
driller:M4545
Description:
PO signed and verified by factory manager S K Lp
Date: Fri Jan 2 17:26:44 UTC 2009
Author: M Kumar"

set xxx to do shell script "echo " & quoted form of theInput & " | sed '
/^fan/ i\\
heater:M21789
'"

return xxx 
```

或严格遵守您的示例，对于 ~/ 中的文件 order789.txt

```
do shell script " cd ~; 
sed '
/^fan/ i\\
heater:M21789
' order789.txt" 
```

# vb.net - 使用 Visual Basic 查找和替换 txt 文档中的文本

> ID：10129288
> 
> 赞同：6
> 
> 时间：2012-04-12T18:10:18.257
> 
> 标签：vb.net

嗨，我使用 Visual Basic 2008 Express Edition，我的目标是读取一个用作模板的整个 .txt 文件，并用一个新单词替换所有出现的单词，并在您按下 a 时将这个新修改的文​​本保存在新的 .txt 中命令按钮。有人可以给我一些提示吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-12T18:25:08.283

```
Dim fileReader As String = My.Computer.FileSystem.ReadAllText("C:\test.txt").Replace("foo", "bar")
My.Computer.FileSystem.WriteAllText("C:\test2.txt", fileReader, False) 
```

所以你应该使用 FileSystem 的 ReadAllText 方法，将路径作为参数传递，并使用 Replace 方法来替换你想要替换的内容。对于替换的更高级用法，您可以使用正则表达式。你可以在[这里](http://msdn.microsoft.com/en-us/library/system.text.regularexpressions.regex.replace%28v=vs.71%29.aspx)阅读。

较短的版本：

```
My.Computer.FileSystem.WriteAllText("C:\test2.txt", My.Computer.FileSystem.ReadAllText("C:\test.txt").Replace("foo", "bar"), False) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T01:25:19.430

我把这个从我正在制作的程序中拉出来，只是去掉你不需要的废话。

```
Private Sub UPDATECODES_Click(sender As Object, e As EventArgs) Handles UPDATECODES.Click
    Dim NEWCODE As String = NEWCODEBOX.Text
    Dim CC As String = CURRENTCODE.Text
    Dim oldcode As String
    Dim codelines(0 To 1) As String
    Dim olddate As String

    Using r1 As New System.IO.StreamReader(CODEDIR & "d.dat")
        olddate = r1.ReadToEnd
    End Using

    Using r2 As New System.IO.StreamReader(CODEDIR & "oc.dat")
        oldcode = r2.ReadToEnd
    End Using

    If System.IO.File.Exists(CODEDIR & "new code.txt") Then
        System.IO.File.Delete(CODEDIR & "new code.txt")
    End If

    If System.IO.File.Exists(CODEDIR & "CC.DAT") Then
        If IO.File.Exists(CODEDIR & "oc.dat") Then
            IO.File.Delete(CODEDIR & "OC.DAT")
        End If

        My.Computer.FileSystem.RenameFile(CODEDIR & "CC.DAT", "OC.DAT")
        Dim FILESTREAM As System.IO.FileStream
        FILESTREAM = New System.IO.FileStream(CODEDIR & "CC.DAT", System.IO.FileMode.Create)
        FILESTREAM.Close()
    End If

    Using WRITER As New System.IO.StreamWriter(CODEDIR & "CC.DAT")
        WRITER.WriteLine(NEWCODE)
    End Using

    Dim currentlines(0 To 1) As String
    Dim a As Integer
    Dim TextLine(0 To 1) As String
    a = 0

    Using sr As New System.IO.StreamReader(CODEDIR & "internet code.txt")
        While Not sr.EndOfStream
            ReDim codelines(0 To a)
            codelines(a) = sr.ReadLine()
            codelines(a) = codelines(a).Replace(CURRENTCODE.Text, NEWCODE)
            codelines(a) = codelines(a).Replace(olddate, DATEBOX1.Text & " - " & DATEBOX2.Text)
            Dim newfile As String = (CODEDIR & "new code.txt")
            Using sw As New System.IO.StreamWriter(newfile, True)
                sw.WriteLine(codelines(a))
            End Using
            a = a + 1
        End While
    End Using

    Using sw2 As New System.IO.StreamWriter(CODEDIR & "d.dat")
        sw2.WriteLine(date1 & " - " & date2)
    End Using

    System.IO.File.Delete(CODEDIR & "internet code.txt")
    My.Computer.FileSystem.RenameFile(CODEDIR & "new code.txt", "internet code.txt")
    CURRENTCODE.Text = NEWCODE
End Sub 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T18:13:17.273

试试下面的例子，希望对你有帮助

```
 Dim lOpenFile As Long
 Dim sFileText As String
 Dim sFileName As String

sFileName = "C:\test.txt"

 'open the file and read it into a variable
 lOpenFile = FreeFile
 Open sFileName For Input As lOpenFile
 sFileText = Input(LOF(lOpenFile), lOpenFile)
 Close lOpenFile

'change 'John Doe' to 'Mary Brown'
 sFileText = Replace(sFileText, " John Doe ", " Mary Brown ")

 'write it back to the file
 lOpenFile = FreeFile
 Open sFileName For Output As lOpenFile
 Print #lOpenFile, sFileText
 Close lOpenFile 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-16T19:59:39.990

我有一个我写的小程序，用于重用代码。当我需要创建一个几乎与现有文件相同的类或代码文件时，我会使用它。它是一个基本的表单程序，有四个文本框和一个按钮，它使用与接受的答案相同的命令，除了字符串不是硬编码的。

```
Private Sub Button1_Click(sender As System.Object, e As System.EventArgs) Handles Button1.Click

  Dim source As String = txtSource.Text
  Dim destination As String = txtDestination.Text
  Dim oldText As String = txtOldText.Text
  Dim newText As String = txtNewText.Text

  My.Computer.FileSystem.WriteAllText(destination, My.Computer.FileSystem.ReadAllText(source).Replace(oldText, newText), False)

End Sub 
```

# java - Java BorderLayout 向东伸展

> ID：10129295
> 
> 赞同：5
> 
> 时间：2012-04-12T18:10:34.993
> 
> 标签：java, swing, layout-manager, border-layout

是否可以使 BorderLayout 的东（或西）侧遍布整个面板（包括北/南）？

![在此处输入图像描述](../Images/5b2e8690b1dba274f345abe59b68ebba.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-12T18:16:42.883

只需从此面板中删除 West 和 East 并创建一个新的“父”面板：

```
JPanel newPanel = new JPanel();
newPanel.setLayout(new BorderLayout());

newPanel.add(westernPanel, BorderLayout.WEST);
newPanel.add(yourOldPanel, BorderLayout.CENTER);
newPanel.add(eastenPanel, BorderLayout.EAST); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-12T18:19:19.397

`JPanel`单层不可能`BorderLayout`

1) 通过使用两个,`JPanels`其中`NORTH`,`WEST`和区域可以放置在( ) 和平原到,`CENTER``SOUTH``1st JPanel``frame.add(1stPanel, BorderLayout.CENTER)``2nd JPanel``frame.add(2ndPanel, BorderLayout.EAST)`

2）您可以使用来自容器`BoxLayout`中的区域`EAST`

3）可以使用有点复杂`GridBagLayout`或`MigLayout`（在这种情况下）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-12T18:16:58.643

不是直接的，但你可以有一个没有“东”的边框布局嵌套在一个布局中，让你当前的东在正确的位置......有意义吗？

TL；DR：不。

# c# - 将文件从 Java 发送到 C#

> ID：10129296
> 
> 赞同：3
> 
> 时间：2012-04-12T18:10:38.943
> 
> 标签：c#, java, file, sockets, binary

我想将二进制文件从 Java 服务器发送到 C# 客户端。这是我正在使用的代码：

Java服务器：

```
 ServerSocket serverSocket = new ServerSocket(1592);
    Socket socket = serverSocket.accept();
    PrintWriter out = new PrintWriter(socket.getOutputStream(),true);

    File file = new File("img.jpg");

    //send file length
    out.println(file.length());

    //read file to buffer
    byte[] buffer = new byte[(int)file.length()];
    DataInputStream dis = new DataInputStream(new FileInputStream(file));
    dis.read(buffer, 0, buffer.length);

    //send file
    BufferedOutputStream bos = new BufferedOutputStream(socket.getOutputStream());
    bos.write(buffer);
    bos.flush();

    Thread.sleep(2000); 
```

C#客户端：

```
 //connect to server
        TcpClient tcpClient = new TcpClient();
        tcpClient.Connect("127.0.0.1", 1592);
        NetworkStream networkStream = tcpClient.GetStream();

        StreamReader sr = new StreamReader(networkStream);

        //read file length
        int length = int.Parse(sr.ReadLine());
        Console.WriteLine("File size: {0} bytes", length);

        //read bytes to buffer
        byte[] buffer = new byte[length];
        networkStream.Read(buffer, 0, (int)length);

        //write to file
        BinaryWriter bWrite = new BinaryWriter(File.Open("C:/img.jpg", FileMode.Create));
        bWrite.Write(buffer);

        bWrite.Flush();
        bWrite.Close(); 
```

这段代码似乎只写了文件的前 69696 个字节。从那里它只会​​写 0 直到结束。

有小费吗？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T18:16:02.313

来自[MSDN](http://msdn.microsoft.com/en-us/library/system.net.sockets.networkstream.read.aspx)：“读取操作读取尽可能多的数据，最多为 size 参数指定的字节数。”

这意味着您不一定会获得所需的数据，您需要检查自己，直到获得与预期一样多的数据。

```
int toRead = (int)length;
int read = 0;
while (toRead > 0)
{
    int noChars = networkStream.Read(buffer, read, toRead);
    read += noChars;
    toRead -= noChars;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T18:18:55.103

检查您的 DataInputStream 实际读取了多少字节，它可能小于您分配的数组的长度。

同样适用于客户端。

# windows-phone-7 - wp7 控制数字滚动像老虎机

> ID：10129301
> 
> 赞同：2
> 
> 时间：2012-04-12T18:10:46.610
> 
> 标签：windows-phone-7

我正在用 C# 为 WP7 编写一个程序，我想利用类似老虎机的效果，数字滚动就像它们安装在鼓上一样。是否有有效实施这种控制？有什么建议来实施这样的控制吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T18:27:52.247

在[silverlight 工具包](http://silverlight.codeplex.com/)中有一个 DatePicker 也许您可以查看该代码以实现您自己的控件。也许你可以使用[phoneytools中的某些东西](http://www.nuget.org/packages/PhoneyTools)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T20:27:01.323

您可以查看一些关于如何实现老虎机效果的 silverlight 实现。这些家伙[在 AppHub 上发布了一些详细信息](http://forums.silverlight.net/post/501724.aspx)。这家伙的实现看起来有点旧，[但它可能会有所帮助](http://weblogs.asp.net/hpreishuber/archive/2007/05/23/silverlight-slot-machine.aspx)

# objective-c - 理解键值编码文档示例

> ID：10129304
> 
> 赞同：0
> 
> 时间：2012-04-12T18:11:13.120
> 
> 标签：objective-c, arrays, cocoa

```
 - (id)tableView:(NSTableView *)tableview

  objectValueForTableColumn:(id)column

                        row:(int)row

     {

ChildObject *child = [childrenArray objectAtIndex:row];

if ( [[column identifier] isEqualToString:@"name"] ) {

    return [child name];

}

if ( [[column identifier] isEqualToString:@"age"] ) {

    return [child age];

}
     ...... 
```

上面的代码来自这个页面：http: [//developer.apple.com/library/ios/#documentation/cocoa/conceptual/KeyValueCoding/Articles/Overview.html](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/KeyValueCoding/Articles/Overview.html)

我无法理解 [孩子姓名] 是什么。ChildObject 类的实例变量是否正在发送一条消息“名称”，它应该以某种方式从数组对象中调出一个名称？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T18:43:25.180

`[child name]`发送一条名为“name”的消息，该消息`child`是 ChildObject 类的一个实例。ChildObject 类实现了一个名为 的方法`name`，该方法（可能）返回一个 NSString，其值等于孩子的 name 实例变量的值。涉及数组对象的唯一方法`child`是通过从其中拉取它来获得它本身，`childrenArray`其中是 ChildObject 实例的数组。

# android - 是否每部 Android 手机都支持 SHA-256

> ID：10129311
> 
> 赞同：39
> 
> 时间：2012-04-12T18:11:50.017
> 
> 标签：android, hash, sha, message-digest

所以阅读这篇文章：[如何在 Android 中计算字符串的 SHA-256 哈希？](https://stackoverflow.com/questions/7166129/how-can-i-calculate-the-sha-256-hash-of-a-string-in-android)

和文档：http: [//developer.android.com/reference/java/security/MessageDigest.html](http://developer.android.com/reference/java/security/MessageDigest.html)

我很好奇; 哪些手机将支持 SHA-256？在文档中，关于“NoSuchAlgorithmException”的行让我觉得有些手机不支持所有算法。在我为一个应用程序实现这个并期望它在所有手机上都能正常工作之前，我想知道是否有人对此有所了解......？

我觉得奇怪的是 MessageDigest 类没有一些常量来选择你想使用的算法。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-04-12T18:21:42.340

所有 Android 设备都支持 SHA-256。`NoSuchAlgorithmException`表示无法找到请求的算法并且是必需的，因为该方法需要算法名称的参数`String`。如果你传入“foo-256”，该方法唯一的办法就是抛出一个`NoSuchAlgorithmException`，因为我无法理解的原因，没有称为“foo-256”的算法。假设您传入一个您确定是 Android 可以使用的算法的名称，您将永远不会看到该异常。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2013-09-18T18:17:04.667

添加 NoSuchAlgorithmException 如下：

```
public static String SHA256 (String text) throws NoSuchAlgorithmException {

    MessageDigest md = MessageDigest.getInstance("SHA-256");

    md.update(text.getBytes());
    byte[] digest = md.digest();

    return Base64.encodeToString(digest, Base64.DEFAULT);
} 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2019-04-19T12:33:42.770

根据[MessageDigest](https://developer.android.com/reference/java/security/MessageDigest)的 Android 文档，从 API 1 开始支持 SHA-256。

[![在此处输入图像描述](../Images/3776bde38a9d7471b3c574cdb7a1e24e.png)](https://i.stack.imgur.com/J1fza.png)

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2014-11-04T17:24:16.153

旧的 android 版本不支持 SHA-256withRSA（在 Android 4.0.3、4.1.1 中验证相同）。我在使用 JSCEP 时遇到过这个问题。SCEP 服务器返回的摘要算法是 SHA-256。但 SHA-256withRSA 不存在于这些 android 版本中的任何默认 SecurityProviders 中。找到相关链接： [哪些版本的 Android 支持哪些包签名算法？](https://stackoverflow.com/questions/13250505/which-versions-of-android-support-which-package-signing-algorithms)

此链接显示 SHA-256withRSA 是后来添加的： [https ://android-review.googlesource.com/44360](https://android-review.googlesource.com/44360)

# asp.net - ViewState 在什么时候映射到 Page 会话？

> ID：10129314
> 
> 赞同：3
> 
> 时间：2012-04-12T18:11:58.690
> 
> 标签：asp.net, viewstate

我试图了解这里的事件顺序。

[这个](https://stackoverflow.com/questions/233828/does-viewstate-expire)页面告诉我，在页面生命周期的某个时刻，ViewState 被映射到页面会话。

我假设这发生在控件中。[SaveViewState()](http://msdn.microsoft.com/en-us/library/system.web.ui.control.saveviewstate%28v=vs.71%29.aspx)方法。

谁能告诉我什么时候发生这种情况？

我很担心，因为我在 Page_Load 中看到了一些读取 ViewState 变量的代码，而且我认为即使在会话被清除后它仍在返回信息。（导致我们设置的超时重定向问题）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T18:14:17.073

ViewState在Init 和 Load ¹*之间恢复并**在*PreRender之后保存。因此通过 PreRender 在 Load 中使用是有效的。

 **然而*，`ViewState != Session`。ViewState 与*页面表单*相关联，而不是与*会话*相关联，因为它位于隐藏`__VIEWSTATE`字段²中。因此，除非在检测到会话超时时以其他方式“清除”它，否则它仍会在下一次回发时发布*客户端存储的值（可能是数小时或数天，旧的;-)。*

* * *

¹在PreLoad中访问ViewState其实是可以的，Page可以使用，但一般的Controls不可以。LoadViewState/TrackViewState默认在页面初始化*之后完成。*（并且页面的初始化是在当前层次结构中的所有控件的初始化*之后完成的。）*

²我相信使用表单是处理 ViewState 的唯一*正确*方法。但是，可以使用不同的支持（例如服务器端）来存储/加载它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-12T18:24:09.453

`ViewState`首先，在您的页面加载中初始化。在每个页面事件上设置断点，如下所述。

现在开始调试每个事件的按钮单击。

```
protected void Page_Load(object sender, EventArgs e)
{
    if (!Page.IsPostBack)
    {
        ViewState["abc"] = "10";
    }
}

protected override void OnPreInit(EventArgs e)
{
    base.OnPreInit(e);
}

protected override void OnInit(EventArgs e)
{
    base.OnInit(e);
}

protected override void OnInitComplete(EventArgs e)
{
    base.OnInitComplete(e);
}

protected override void OnPreLoad(EventArgs e)
{
    base.OnPreLoad(e);
} 
```

`OnPreLoad`将开始为您提供 ViewState 持久值。在此事件之前，如 Init/InitComplete/PreInit 不会给出任何 ViewState 值。

当回发发生时，`SaveViewState()`将捕获新值并`LoadViewState()`在回发后重新填充它。

为什么将 Session 与 ViewState 进行比较？*

# expression-blend - Blend for Visual Studio 11：无项目类型

> ID：10129316
> 
> 赞同：0
> 
> 时间：2012-04-12T18:12:03.323
> 
> 标签：expression-blend, visual-studio-2012

我似乎遇到了 Blend 的问题。

当我启动应用程序时，我似乎不支持 XAML：

![没有 XAML :(](../Images/277c730123a6954cd9caf78edc93c493.png)

有谁跑过这个问题吗？

我尝试将 'VisualStudioVersion' = '11.0' 添加到系统环境变量中，但没有运气:(

我有 Windows 7 x64 SP1（合法！）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T20:34:39.327

Blend for Visual Studio 11 Beta 仅支持 Metro 风格应用程序（XAML 和 HTML）。这些项目只能在 Windows 8 上设计。

# php - WordPress将重力形式数据插入新表

> ID：10129323
> 
> 赞同：2
> 
> 时间：2012-04-12T18:12:47.993
> 
> 标签：php, sql, database, forms, wordpress

我有一个使用重力形式的 WordPress 网站。我想采用我正在使用的一种重力形式并将数据插入另一个表中。（除重力形式表外）。我在提交挂钩后使用重力表单来获取我的特定表单 (3) 的值并运行 SQL 语句。这是一个解释钩子的链接：http: [//www.gravityhelp.com/documentation/page/Gform_after_submission](http://www.gravityhelp.com/documentation/page/Gform_after_submission)

但是，没有任何内容被插入到新表（用户）中。我什至无法判断脚本是否正在运行。“默认”重力表和我的新用户表都在同一个数据库中。这是我的 PHP 的样子：

```
add_action("gform_after_submission_3", "input_fields", 10, 2);
function input_fields($entry, $form){

                    $entry["1"] = '$name';
                    $entry["2"] = '$email';
                    $entry["3"] = '$purchase_date';
                    $entry["4"] = '$order_number';

   $SQL = "INSERT INTO users ( userID, email, name, purchase_date, order_number) VALUES ( '', '$email' , '$name', '$purchase_date', '$order_number')";
   } 
```

我正在使用 Gravity Form 条目对象获取值。更多关于这里的信息：http: [//www.gravityhelp.com/documentation/page/Entry_Object](http://www.gravityhelp.com/documentation/page/Entry_Object)

该表单可以写入默认表，但不能写入我的新“用户”表。有什么建议么？如果我需要提供更多信息，请告诉我。谢谢你的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T09:46:13.550

试试下面的代码......

```
add_action('gform_after_submission_3', 'input_fields', 10, 2);
function input_fields($entry, $form){
global $wpdb;
               $name = $entry['1'];
               $email = $entry['2'];
               $purchase_date =  $entry['3'];
               $order_number = $entry['4'];

  $SQL = "INSERT INTO users ( userID, email, name, purchase_date, order_number) VALUES ( '', '$email' , '$name', '$purchase_date', '$order_number')";
  $wpdb->query($SQL);
 } 
```

谢谢....

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T07:13:30.527

您已经创建了查询，但没有执行它。

```
add_action("gform_after_submission_3", "input_fields", 10, 2);
function input_fields($entry, $form){
    global $wpdb;

                    $entry["1"] = '$name';
                    $entry["2"] = '$email';
                    $entry["3"] = '$purchase_date';
                    $entry["4"] = '$order_number';

   $SQL = "INSERT INTO users ( userID, email, name, purchase_date, order_number) VALUES ( '', '$email' , '$name', '$purchase_date', '$order_number')";
   $wpdb->query($SQL);
   } 
```

另外我假设您已经创建了*users*表。

# wpf - WPF + Kinect 应用程序

> ID：10129327
> 
> 赞同：1
> 
> 时间：2012-04-12T18:12:59.093
> 
> 标签：wpf, silverlight, kinect

我想用 Kinect 做一个 WPF 应用程序。这个想法很简单。一个显示一些图像的应用程序，我将使用 kinect for windows 捕捉到的手势传递到下一张图像。

我在互联网上看到了很多书籍，一些代码，但我不知道如何开始使用 Kinect sdk 进行开发。

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T06:03:44.203

Tbh 这是简单的数学。首先，你需要让你的手被跟踪，这样你就可以获得它的位置数据并添加一些漂亮的图标来导航。当手放在按钮上时，您可以做简单的数学运算。

这是一种方式。第二种方法很丑但会起作用:)您可以将手绑定到鼠标光标并创建普通按钮。如您所知，Windows 提供了创建通过键盘和鼠标控制的按钮所需的一切。您拥有所有事件，例如悬停和单击。当您将手部跟踪绑定到鼠标时，您可以使用标准库控制按钮

第三种方法是结合这两种方法。手部追踪、鼠标控制、标准库，通过简单的手势识别和数学运算，您可以像在 xbox 上一样创建 UI，您需要将手放在按钮上几秒钟。

大约一周前，我在谷歌文章中找到了关于在 xbox 中创建 UI 的文章，但我知道我找不到它。也许我在家里得到它。如果我有网址，我会为您检查并添加它。

Flot2011 将您的 c4f 网址添加到 kinect 部分。我确定我在那里看到了一些关于此的文章。只需检查所有页面。您可以在源代码中找到非常有趣的东西。例如这个-> [http://kinectdtw.codeplex.com/](http://kinectdtw.codeplex.com/)

这个项目是用旧版本的总线编写的，因为你会看到有按钮。通过kinect检查是否有控制器，如果有，只需从源代码中学习如何做到这一点:)

# c# - 有没有从 Java netbeans 项目调用 .net 类的好方法？

> ID：10129333
> 
> 赞同：2
> 
> 时间：2012-04-12T18:13:19.843
> 
> 标签：c#, java, .net, mobile, netbeans

我有一个项目，我想将内部业务逻辑保留在 .net 程序集中并让 java 处理 UI 工作。有没有一种简单的方法可以在 Java Netbeans 环境中引用 .NET 程序集或 .dll？谢谢你提供的所有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T18:29:01.087

老实说，我会在`.net`. 因为我认为java中的ui东西不是很好。我宁愿反过来做。

但是他们之间的交流我会通过服务来完成。在开始时这是一项更大的投资，但在您推出应用程序时却没有那么痛苦。而且它可能会更好地扩展。SO上有很多关于用.net和java编写客户端和服务的东西。

如果您确实确定仍想立即从您的 java 代码中使用 .net 代码，那么有一个叫做[IKVM.NET](http://www.ikvm.net/)的东西。它将您的 java 编译为 CLI 字节码。但我不知道他们是否支持java的接口东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T18:49:35.613

您可以通过 Web 服务（例如 REST + JSON）公开业务逻辑。您的 UI 可以用 Java 编写，它可以使用 Web 服务，在 .NET 内部实现。

这个想法是你将技术分开，让它们通过一个众所周知的沟通桥梁进行交流。

# xml - 使用 XSLT 正则表达式分析字符串匹配和分组字符串

> ID：10129344
> 
> 赞同：1
> 
> 时间：2012-04-12T18:14:09.053
> 
> 标签：xml, xslt, xpath

我正在使用 XSLT 2.0 根据正则表达式查找匹配的子字符串

我的 XSLT 函数如下所示

```
<xsl:function name="util:getSource">
    <xsl:variable name="dynamic" select="'Allergy Adverse Event Type 2.16.840.1.113883.3.88.12.3221.6.2'"/>
    <xsl:choose>
        <xsl:when test="string-length($dynamic) &gt; 1 and matches($dynamic,'[a-zA-Z\s]*')">
            <xsl:analyze-string select="$dynamic" regex="[a-zA-Z\s]*">
                <xsl:matching-substring>
                    <xsl:value-of select="."/>
                </xsl:matching-substring>
            </xsl:analyze-string>
        </xsl:when>
    </xsl:choose>
</xsl:function> 
```

我想根据正则表达式**[a-zA-Z\s]***从我的输入字符串**“'Allergy Adverse Event Type 2.16.840.1.113883.3.88.12.3221.6.2'”中找到****“Allergy Adverse Event Type”**；当我执行上述函数时，我总是收到“XTDE1150：正则表达式匹配空字符串”。正则表达式有什么问题；我可以对此提出建议吗？

 ***** * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T18:39:41.847

从[规格](http://www.w3.org/TR/xslt20/#analyze-string)：

> [ERR XTDE1150] 如果正则表达式属性的有效值是匹配零长度字符串的正则表达式，则为不可恢复的动态错误

只需将您的正则表达式更改为`[a-zA-Z\s]+`，您应该没问题。****

# python - 使用 strptime() 进行日期转换

> ID：10129348
> 
> 赞同：1
> 
> 时间：2012-04-12T18:14:18.360
> 
> 标签：python, datetime

将以下*日期模式*`datetime.date`转换为Python中的对象的最佳方法是什么？

```
1st April
8th April
15th April
1st May 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T18:22:51.493

`dateutil.parser`将解析几乎所有已知的日期格式：

```
from dateutil.parser import parse
parse('8th April') 
```

要始终获得未来的日期：

```
from dateutil.parser import parse
from datetime import datetime

d = parse('8th April')
if (d - datetime.now()).days <= 0:
    d = datetime.date(d.year+1, d.month, d.day) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T18:21:36.367

```
from datetime import datetime

val = val.replace('th', '').replace('st', '')
d = datetime.strptime(val, '%d %B') 
```

# java - 访问错误：404 - 未找到 - CNR WebGUI

> ID：10129349
> 
> 赞同：0
> 
> 时间：2012-04-12T18:14:18.757
> 
> 标签：java, jsp

这是我在这里的第一篇文章，我已经在网上搜索了一段时间的解决方案，所以我会请各位专家帮助我解决这个问题。

所以我有 CNR（思科网络注册商）

CNR 使用 WEBgui 作为他们的前端应用程序。所以问题是我得到 Access Error: 404 -- Not Found 错误，我试图找出可能导致这种情况发生的原因。

我查看了该站点上的所有帖子，它们与某种需要更改才能正常工作的代码有关。然而我的情况不同。安装软件后，我没有对软件执行任何代码更改。此失败的唯一可能原因可能是 JRE/Java 更新。现在，从 CNR 文档中可以清楚地看出，最新的 JRE 可以与 CNR 软件一起使用。所以在这一点上我不知道该怎么做，我转向你们。

1.OS：Windows XP 2.CNR 版本：6.3 3.JRE 版本：1.6.031 - 应该是最新的 4.internet explorer 版本：7 5.登录地址：http: [//127.0.0.1 :8080/login.jsp](http://127.0.0.1:8080/login.jsp)

没有对任何 .jsp 或 XML 文件进行任何更改。如果您需要任何文件或屏幕截图，请告诉我。

标记

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T16:33:14.307

快速浏览一下[这里](http://www.cisco.com/en/US/docs/net_mgmt/network_registrar/7.2/installation/guide/CNR72InstallGuide.pdf)的文档说：

```
To access the web UI:
    http://hostname:http-port
    https://hostname:https-port 
```

我没有看到他们谈论 login.jsp（尽管它可能会引导你到那里）

# javascript - JQuery 只查看一个 DIV ID 来获取值

> ID：10129350
> 
> 赞同：1
> 
> 时间：2012-04-12T18:14:19.413
> 
> 标签：javascript, jquery

我的一个网页上有以下代码，它隐藏了与某些用户无关的表单的某些部分。但是，由于某种原因，现在只绑定了 selectAttending 变量。我想传递一个文本框和两个下拉列表的值，但只传递这个下拉列表的值。有什么建议么？

```
<html>    
<input class="input-xlarge focused" id="txtName" type="text" >
<select name=selectAttending id=selectAttending>
   <option>Select One...</option>
   <option>Yes</option>
   <option>No</option>
</select>
<select id=selectGender>
   <option selected="selected">Select One...</option>
   <option>Male</option>
   <option>Female</option>
</select>

<script language=javascript>
$("#selectAttending").change(function () {
    if ($('#selectAttending option:selected').text() == "No") {
        $('#ifAttending').hide();
    } else if ($('#selectAttending option:selected').text() == "Yes") {
        $('#ifAttending').show();
    } else {
        $('#ifAttending').show();
    } 
});      
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T18:33:22.007

jQuery 选择创建一个元素列表；例如，当您使用 jQuery 选择功能时，`$`如果要处理多个结果，则需要遍历结果。尝试使用类似`each`. 请参阅[此 S/O 问题](https://stackoverflow.com/questions/9754256/how-to-iterate-through-jquery-elements)和相关的[jQuery 文档](http://api.jquery.com/jQuery.each/)。

# c# - 不可调用的成员“System.Xml.XmlNode.Attributes”不能像方法一样使用

> ID：10129351
> 
> 赞同：-1
> 
> 时间：2012-04-12T18:14:19.410
> 
> 标签：c#, vb.net

我是 C# 新手，正在尝试转换 VB.NET 应用程序。使用此代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Xml;
using System.Xml.XPath;

namespace TestXML
{
    class Program
    {
        static void Main(string[] args)
        {
            XmlDataDocument Doc = new XmlDataDocument();
            XmlNodeList nodeList;
            XmlElement Element;
            XmlNode node = null;
            Doc.Load(@"UNC path of a doc.xml file");
            Element = Doc.DocumentElement;
            nodeList = Element.SelectNodes("Application");
            foreach (XmlNode node in nodeList)
            {
                if (node.Attributes(@"Name").InnerText = @"Something")
                    break;
            }
            //gsCurrentMode is one of "Production","Test","Develope"
            nodeList = node.SelectNodes("Instance");
            foreach (XmlNode n in nodeList)
            {
                if (node.Attributes("Mode").Value = @"Production")
                    //if either of these two fails, Something shuts down
                    return node.Attributes("Server").InnerText;
                else
                {
                    return;
                }
            }       
        }
    }
} 
```

我收到以下错误： 1\. 无法在此范围内声明名为“节点”的局部变量，因为它会给“节点”赋予不同的含义，“节点”已在“父或当前”范围中用于表示其他内容对于这些语句：（nodeList 中的 XmlNode 节点） 2\. 不可调用的成员 'System.Xml.XmlNode.Attributes' 不能像 node.Attributes 行的方法一样使用。

原VB.NET代码如下：

```
Public Function GetProductionServer() As String
        Dim Doc As New XmlDocument
        Dim nodeList As XmlNodeList
        Dim Element As XmlElement
        Dim node As XmlNode = Nothing
        Doc.Load("UNC Path to an Doc.xml")
        Element = Doc.DocumentElement
        nodeList = Element.SelectNodes("Application")
        For Each node In nodeList
            If node.Attributes("Name").InnerText = "Something" Then
                Exit For
            End If
        Next
        '--- gsCurrentMode is one of "Production","Test","Develope"
        nodeList = node.SelectNodes("Instance")
        For Each node In nodeList
            If node.Attributes("Mode").Value = "Production" Then
                '-- if either of these two fails, Something shuts down
                Return node.Item("Server").InnerText
            End If
        Next
        Return ""
    End Function 
```

有人可以给我一些指导，提前谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T18:17:42.107

*1\. 不能在此范围内声明名为“节点”的局部变量，因为它会给“节点”赋予不同的含义，“节点”已在“父或当前”范围中用于为这些语句表示其他内容：（XmlNode 节点在节点列表中）*

你定义了变量`node`两次

这里

`XmlNode node = null;`

和这里：

```
foreach (XmlNode node in nodeList) 
```

在`node`你的`foreach`.

* * *

*2.不可调用的成员'System.Xml.XmlNode.Attributes'不能像node.Attributes行的方法一样使用。*

您在应该使用方括号的地方使用括号。
改变 `if (node.Attributes(@"Name").InnerText = @"Something")`

至

`if (node.Attributes[@"Name"].InnerText = @"Something")`

（这在您的代码中多次出现）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T18:18:28.890

**问题 1**

您不能在函数中重用变量名，您需要将其定义为其他名称，因此：

```
foreach (XmlNode node in nodeList)
{
    if (node.Attributes(@"Name").InnerText = @"Something")
        break;
} 
```

应该是：

```
foreach (XmlNode nn in nodeList)
{
    if (n.Attributes(@"Name").InnerText = @"Something")
        break;
} 
```

**问题2**

这个：

```
return node.Attributes("Server").InnerText; 
```

应该：

```
return node.Attributes["Server"].InnerText; 
```

举个例子。

几乎任何你使用`node.Attributes(*)`它的地方`node.Attributes[*]`。在 VB 中，索引器的调用使用与方法调用相同的语法。在 C# 中，我们在索引器中使用方括号 ('[', ']')。

* * *

调整后的代码：

```
static void Main(string[] args)
{
    XmlDataDocument Doc = new XmlDataDocument();
    XmlNodeList nodeList;
    XmlElement Element;
    XmlNode node = null;
    Doc.Load(@"UNC path of a doc.xml file");
    Element = Doc.DocumentElement;
    nodeList = Element.SelectNodes("Application");
    foreach (XmlNode n in nodeList)
    {
        if (n.Attributes[@"Name"].InnerText = @"Something")
            break;
    }
    //gsCurrentMode is one of "Production","Test","Develope"
    nodeList = node.SelectNodes("Instance");
    foreach (XmlNode n in nodeList)
    {
        if (node.Attributes["Mode"].Value = @"Production")
            //if either of these two fails, Something shuts down
            return node.Attributes["Server"].InnerText;
        else
        {
            return;
        }
    }       
} 
```

另请注意：

```
if (node.Attributes[@"Name"].InnerText = @"Something") 
```

不必要地`@`在字符串上指定，因为它们是否被转义并不重要。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T18:25:32.667

1.  您的 foreach 循环需要使用不同的名称，`node`因为它是在循环之外使用的。
2.  您的`if`陈述必须`==`表明您正在比较两个值，而不是将一个值分配给另一个值。
3.  每当您引用一个项目数组时，在 C# 中您使用`[]`而不是`()`. 这将解决您**不能像方法一样使用的**问题。

尝试这样的事情：

```
foreach (XmlNode n in nodeList)
{
    if (n.Attributes["Name"].InnerText == "Aurora NET")
    //NOTE: You've found the node, but you aren't actually doing anything here.
    break;
} 
```

另一件事：您已经为这个项目创建了一个控制台应用程序，但您的原始代码实际上是一个返回字符串的函数。该`Main()`方法有一个`void`返回类型，它相当于`Sub`VB 中的 a。您可能应该将其变成 C# 中返回字符串的方法（VB 函数）。

# android - Android自动旋转对话框但不是背景图像

> ID：10129354
> 
> 赞同：0
> 
> 时间：2012-04-12T18:14:26.560
> 
> 标签：android, rotation

我正在开发一个家庭自动化应用程序，用户可以在其中上传图像（例如平面图），点击房间并执行不同的操作，例如控制照明等。我通过使用用户还使用颜色图创建的第二张图像。我现在已经设置好了，因此图像必须与设备具有相同的分辨率，这样我就不必处理缩放问题。我还禁用了自动旋转，这样他们就不必担心当设备旋转到纵向时横向照片会被刮掉。换句话说，我懒得处理它。这种方法的问题是出现的任何对话框（在横向查看屏幕时）都以纵向模式而不是横向模式出现。所以我的问题是，有没有办法让我在屏幕上显示不服从自动旋转的图像，但让对话框跟随自动旋转？或者对我来说也是处理图像自动旋转的正确解决方案？我想我可以做的一件事是将旋转固定为横向模式，因为大多数平面图都适合横向，但是如果有人确实想要纵向图像怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T19:25:25.760

在我（不是这样）的拙见中，你不应该在没有很好的理由的情况下修正方向并原谅我，但“我很懒”不是一个很好的理由；）

有几个选项可供您使用。

不做任何事情，设置 Imageview 的 scaleType 属性将使您能够加载图像，并以完整的比例缩放。然后，您可以覆盖 onConfigurationChanged 回调并将 scaleType 设置为对您的应用有意义的值，具体取决于图像方向（只需检查宽度>高度）。

或者，您可以测量应用程序的比例，然后在查看图像时将方向设置为纵向或横向，然后在用户关闭图像查看活动时切换到当前设备方向。

你的用户会更开心，你最终会得到更优雅、更受支持和更令人满意的代码。

我的经验告诉我，不花时间预先做这类事情最终会导致更多的工作和/或痛苦。

帮自己一个忙（和你的用户），做对了……

# python - python中的random.choice([x, y, z])，为什么种子没有改变？

> ID：10129355
> 
> 赞同：1
> 
> 时间：2012-04-12T18:14:37.817
> 
> 标签：python, random, seeding

```
known_commands = {
    "boo"  : random.choice(["Winter is coming...","SURPRISE!","Mazel tov!"]),
    "xyzzy": xyzzy,
}

def xyzzy(self):

    print random.choice(["Winter is coming...","SURPRISE!","Mazel tov!"])
    return 
```

对于一个类，我们正在用 python 制作一个“婴儿僵尸网络”。因此，如果我调用命令 xyzzy 或 boo，它们每 3 秒执行一次（直到我告诉它们停止）。当我调用 boo 时，它会选择一个随机元素，但它每 3 秒打印一次相同的随机元素。当我调用 xyzzy 时，它每 3 秒打印一个新的随机元素。

据我了解，这意味着 boo 的种子不会改变，但 xzyyz 会改变。我的问题是，为什么种子在一种情况下发生变化而不是另一种情况？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-12T18:20:53.840

它在这里做出选择

```
"boo"  : random.choice(["Winter is coming...","SURPRISE!","Mazel tov!"]), 
```

由于您正在调用该函数。评估此行后，您的 dict 将变为如下所示：

```
known_commands = {
    "boo" : "SURPRISE!",
    "xyzzy" : xyzzy,
} 
```

但是 xyzzy 每次都会得到一个随机字符串，因为每次调用时都会在函数中进行选择。为了每次都为 boo 获取随机字符串，您应该创建一个函数或 lambda。使用 lambda 看起来像这样：

```
known_commands = {
    "boo"  : lambda: random.choice(["Winter is coming...","SURPRISE!","Mazel tov!"]),
    "xyzzy": xyzzy,
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T18:19:51.437

in的`boo`键`known_commands`不指向函数，它指向的结果值`random.choice`，在构造字典时只执行了一次。将其更改为：

```
"boo": lambda: random.choice(["Winter is coming...", "SURPRISE!", "Mazel tov!"]) 
```

# javascript - javascript 类 - 使用 setInterval 调用的 this.method

> ID：10129363
> 
> 赞同：1
> 
> 时间：2012-04-12T18:15:15.037
> 
> 标签：javascript

我有一个 JavaScript 类

```
function MyClass() {

  MyClass.prototype.fooMethod = function () {
    // some logic goes here...
  }

  MyClass.prototype.fooMethod2 = function () {
    this.fooMethod();
  }
} 
```

当我这样调用时，一切都按预期工作：

```
var m = MyClass();
m.fooMethod2(); 
```

但是，当我通过 setInterval 调用此代码时，出现错误：“未捕获的 TypeError：对象 [object DOMWindow] 没有方法 'fooMethod'”

```
var m = MyClass();
var intervalId = setInterval(m.fooMethod2, 100); 
```

有什么方法可以使用 setInverval 来调用我的方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T18:15:53.523

```
setInterval(function() {
  m.fooMethod2();
}, 100); 
```

在 javascript 中，上下文（ 的值`this`）由调用方法的方式设置。所以`foo.bar()`将设置`this`到函数`foo`内部`bar`。

但是，当您返回对要由其他东西运行的函数的引用时，不会保留上下文。看一下这个：

```
var callLater = function(fn) {
  setTimeout(function() {
    fn(); // no defined context, `this` will revert to the default: `window` 
  }, 1000);
};
callLater(foo.bar); 
```

在这个片段中，我们将一个函数传递给`callLater`函数。但是当我们调用时，`fn()`我们在没有任何*接收者*的情况下执行它，这意味着我们失去了上下文。

因此，只要函数上下文很重要，您就必须传入一个匿名函数，该函数将显式调用对象上的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T18:16:28.317

```
var m = new MyClass();
var intervalId = setInterval(function(){m.fooMethod2();}, 100); 
```

引用对象时始终使用`new`关键字，否则您会遇到意外错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-21T12:34:48.640

将上下文作为参数传递。然后一切都会完美运行。

```
module.exports = {
   lobby = [],
   init: function () {
      var parent = this;
      setInterval(function () {
        ref.everySecondTick(parent);
      }, 2000);
   },
   everySecondTick: function (parent) {
        console.log(parent.lobby.length);
   }
} 
```

# java - Hibernate JPA + Sybase 图像数据类型

> ID：10129364
> 
> 赞同：1
> 
> 时间：2012-04-12T18:15:19.953
> 
> 标签：java, hibernate, jpa, sybase

Hibernate JPA 数据类型 blob 不适用于 Sybase 图像数据类型。下面是我正在使用的数据类型的示例。有人能告诉我如何将 fileContent 映射到 Sybase 图像数据类型吗？

示例代码

```
@Column(length=100000)
private byte[] fileContent; 
```

例外

原因：org.hibernate.HibernateException：列 file_content 的 DEV_eprs.dbo.pr_file_upload 中的列类型错误。找到：图像，预期：varbinary(100000)

使用@Lob 时，检索数据时收到以下异常。

java.lang.UnsupportedOperationException 方法 com.sybase.jdbc3.jdbc.SybResultSet.getBlob(String) 不受支持，不应调用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T18:34:24.330

我通过创建自定义数据类型解决了这个问题，下面是解决方案。希望这对其他人有帮助。

//你的实体

```
@Type(type = "org.company.project.entities.types.BlobType")
private byte[] fileContent;

public byte[] getFileContent() {
    return fileContent;
}

public void setFileContent(byte[] fileContent) {
    this.fileContent = fileContent;
} 
```

//自定义数据类型

```
public class BlobType implements UserType {

  public int[] sqlTypes() {
      return new int[] { Types.BLOB };
  }

  public Class returnedClass() {
      return Blob.class;
  }

  public Object nullSafeGet(ResultSet aResultSet, String[] aColName, Object aObject)
          throws HibernateException, SQLException {
      return getBlobFromBinaryStream(aResultSet, aColName[0]);
  }

  private byte[] getBlobFromBinaryStream(ResultSet aResultSet, String aColName)
          throws SQLException {

      byte[] theBuff = new byte[2 * 1024];
      InputStream theInStream = aResultSet.getBinaryStream(aColName);

      ByteArrayOutputStream theBaos = new ByteArrayOutputStream();
      int n = 0;
      try {
          if (theInStream != null)
          {
              while (-1 != (n = theInStream.read(theBuff))) {
                  theBaos.write(theBuff, 0, n);
              }
          }
          theBaos.flush();
      } catch (IOException e) {
          e.printStackTrace();
      }

      return theBaos.toByteArray();
  }

  public void nullSafeSet(PreparedStatement aStmt, Object aValue, int aIndex)
          throws HibernateException, SQLException {
      aStmt.setBytes(aIndex, (byte[]) aValue);
  }

  public boolean equals(Object x, Object y) {
      if ((x == y) ||
              (x != null && y != null && Arrays.equals(
                      ((byte[]) x),
                      ((byte[]) y)))) {
          return true;
      }
      return false;
  }

  public int hashCode(Object aArg) throws HibernateException {
      return aArg.hashCode();
  }

  public boolean isMutable() {
      return false;
  }

  public Object assemble(Serializable aSerializableObject, Object aObject) throws HibernateException {
      return null;
  }

  public Serializable disassemble(Object aObject) throws HibernateException {
      return null;
  }

  public Object replace(Object aObject1, Object aObject2, Object aObject3) throws HibernateException {
      return null;
  }

  public Object deepCopy(Object aValue) {
      return aValue;
  }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-10T19:15:49.380

对 LONGVARCHAR 使用“文本”，对 LONGVARBINARY 使用“图像”，请参阅[https://hibernate.atlassian.net/browse/HHH-3892](https://hibernate.atlassian.net/browse/HHH-3892)

所以对于这种情况，你可以使用

```
@Type(type = "image")
private byte[] fileContent; 
```

如果您使用的是 Sybase ASE 15.7（及更高版本），它现在支持 Lob，所以

```
@Lob
private byte[] fileContent 
```

# c# - 如何清除 DataGridView 以便新数据可以填充单元格？

> ID：10129367
> 
> 赞同：3
> 
> 时间：2012-04-12T18:15:24.773
> 
> 标签：c#, datagridview

我正在使用 C# 和 SQL Server 开发我的一个小项目，但我想不出一种方法来清除 DataGridView 中的单元格，以便新数据可以填充单元格。我正在使用参数（例如列中的值）加载数据。例如，我想为某个作者加载所有书籍，然后我想为另一个作者加载所有书籍。由于 DataGridView 没有被清除，所以第二作者的书籍只是加载到先前数据行的下方，并继续这样。

我希望能够在加载新数据之前清除 DataGridView，这样当我单击所谓的“加载数据”按钮时，它可能是我看到的唯一数据。

目前，这就是我的代码或多或少的样子：

```
 SqlConnection connect;
    DataSet ds1 = new DataSet();
    SqlDataAdapter da;

    connect = new SqlConnection();
    connect.ConnectionString = "Data Source=THEPC-PC\\SQLExpress;Initial Catalog=TheDatabase;Integrated Security=True";
    string sql = "Select * from table WHERE author = 'BookAuthor'";
    da = new SqlDataAdapter(sql, connect);
    da.Fill(ds1, "table");
    table_dataGridView.AutoGenerateColumns = false;
    table_dataGridView.DataSource = ds1.Tables["table"];
    connect.Open();
    connect.Close(); 
```

如果我单击 author1 的“加载数据”，然后单击 author2，然后再次单击 author1，则 DataGridView 外观的简化版本：

```
------------------------
| author1 |  bookONE   |
------------------------
| author1 |  bookTWO   |
------------------------
| author2 |   bookA    |
------------------------
| author1 |  bookONE   |
------------------------
| author1 |  bookTWO   |
------------------------ 
```

我可以在查询之前添加一段代码来删除 DataGridView 中找到的所有以前的数据吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-12T18:21:34.457

您是否尝试过`table_dataGridView.DataSource = null`并`table_dataGridView.Rows.Clear()`在添加新行之前？

由于您`table_dataGridView`绑定到数据源，因此删除现有行的正确代码应该是；

```
if (table_dataGridView.DataSource != null)
{
     table_dataGridView.DataSource = null;
}
else
{
    table_dataGridView.Rows.Clear();
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-12T18:22:05.087

数据集.清除（）；

[http://msdn.microsoft.com/en-us/library/system.data.dataset.clear.aspx](http://msdn.microsoft.com/en-us/library/system.data.dataset.clear.aspx)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-11-14T04:39:35.987

这对我有用

```
 cl.OpenCon();
        String data = "select ID,Name,Price from Items";
        SqlCommand ncmd = new SqlCommand(data);
        ncmd.Connection = cl.ReturnCon();
        SqlDataReader rs = ncmd.ExecuteReader();
        dt = new DataTable();
        dt.Load(rs);
        GridView1.DataSource = dt;
        GridView1.DataBind();
        cl.CloseCon(); 
```

protected void Clear_Click1(object sender, EventArgs e) { dt.Clear(); GridView1.DataSource = dt; GridView1.DataBind(); }

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-12T18:22:03.650

为什么不尝试将 DataSource 设置为 null，例如 table_dataGridView.DataSource=null

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-12T18:23:00.577

您提供的代码应该从 中删除以前的数据`DataGridView`并将其替换为新数据。
问题可能是您将行附加到您的`DataTable`. 你能检查是否`ds1.Tables["table"]`只包含你需要的数据吗？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-07-18T00:07:35.340

在事件点击添加

BindingSource.AddNew();

# mysql - 带有两个表的Mysql触发器

> ID：10129369
> 
> 赞同：0
> 
> 时间：2012-04-12T18:15:27.447
> 
> 标签：mysql, triggers

我正在创建一个触发器来更新列 TEST 如果列receipt_on = Quarterly Interest Then If 如果是这样，它应该在列receipt_amount 中找到总和，并从表receipt_history 中的r_app_file_id 列中的表Loan 中的列l_app_file_id 中加入另一个表贷款以及列中的月份名称表receipt_history 中的receipt_date 应该与当前月份相同，但是我不确定如何完全构建此触发器

```
-- Trigger DDL Statements
DELIMITER $$

USE `lms`$$

CREATE
DEFINER=`root`@`localhost`
TRIGGER `lms`.`updateloan`
BEFORE UPDATE ON `lms`.`receipt_history`
FOR EACH ROW
BEGIN

if new.receipt_on='Quarterly Interest' then 
    SET new.TEST=SUM(receipt_amount)
    join loan l on 
    l.l_app_file_id=r.r_app_file_id
    WHERE r_app_file_id=l_app_file_id
    and monthname(receipt_date)=MONTHNAME(now())
    end if;    

  END$$ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T18:51:56.710

正如您现在所知，您不能加入`set`声明。
您需要为此使用 select 语句。
这个结构会起作用，但是`set i:= (select sum(x) from a);`
我个人更喜欢`SELECT something INTO avariable`语法，但这只是个人喜好问题。

```
DELIMITER $$

USE `lms`$$

CREATE
DEFINER=`root`@`localhost`
TRIGGER `lms`.`updateloan`
BEFORE UPDATE ON `lms`.`receipt_history`
FOR EACH ROW
BEGIN
  DECLARE itest integer;

  if new.receipt_on='Quarterly Interest' then 
    SELECT SUM(r.receipt_amount) INTO itest FROM receipt_history r
    INNER JOIN loan l ON (l.l_app_file_id=r.r_app_file_id)
    WHERE monthname(r.receipt_date)=MONTHNAME(now());
    SET new.test = itest;
  end if;    

  END$$ 
```

请注意：
连接标准已经是一个（种类）`where`子句，因此您不必在`where`子句中重复它。
触发器中的每条语句都需要以`;`.

# vb.net - 文本框电子邮件验证

> ID：10129374
> 
> 赞同：1
> 
> 时间：2012-04-12T18:15:59.580
> 
> 标签：vb.net

嗨，我遇到的问题是我试图验证一个文本框以确保输入了电子邮件地址...我复制了别人的代码，然后将其更改为适合我的程序。但是即使输入了有效的电子邮件仍然是说无效的电子邮件条目

```
Private Sub EmailTextBox_Validating(ByVal sender As System.Object, ByVal e As System.ComponentModel.CancelEventArgs) Handles EmailTextBox.Validating
    Dim temp As String
    temp = EmailTextBox.Text
    Dim conditon As Boolean
    emailaddresscheck(temp)
    If emailaddresscheck(conditon) = False Then
        MessageBox.Show("Please enter your email address correctly", "Incorrect Email Entry")
        EmailTextBox.Text = ""
        EmailTextBox.BackColor = Color.Blue
    Else
        EmailTextBox.BackColor = Color.Green
    End If

End Sub

Private Function emailaddresscheck(ByVal emailaddress As String) As Boolean
    Dim pattern As String = "^[a-zA-Z][\w\.-]*[a-zA-Z0-9]@[a-zA-Z0-9][\w\.-]*[a-zA-Z0-9]\.[a-zA-Z][a-zA-Z\.]*[a-zA-Z]$"
    Dim emailAddressMatch As Match = Regex.Match(emailaddress, pattern)
    If emailAddressMatch.Success Then
        emailaddresscheck = True
    Else
        emailaddresscheck = False
    End If
End Function

Private Sub EmailTextBox_TextChanged(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles EmailTextBox.TextChanged
    EmailTextBox.BackColor = Color.White
    Dim temp As String
    temp = EmailTextBox.Text
    Dim conditon As Boolean
    emailaddresscheck(temp)
    : If emailaddresscheck(conditon) = True Then
        MessageBox.Show("Please enter your email address correctly", "Incorrect Email Entry")
        EmailTextBox.Text = ""
        EmailTextBox.BackColor = Color.Yellow
    Else
        EmailTextBox.BackColor = Color.Green
    End If
End Sub 
```

使用的颜色是绿色和黄色，但我更改了框的颜色以识别问题所在.. 框显示为蓝色，因此错误...我假设在这段代码中出现了错误。

```
Private Function emailaddresscheck(ByVal emailaddress As String) As Boolean
    Dim pattern As String = "^[a-zA-Z][\w\.-]*[a-zA-Z0-9]@[a-zA-Z0-9][\w\.-]*[a-zA-Z0-9]\.[a-zA-Z][a-zA-Z\.]*[a-zA-Z]$"
    Dim emailAddressMatch As Match = Regex.Match(emailaddress, pattern)
    If emailAddressMatch.Success Then
        emailaddresscheck = True
    Else
        emailaddresscheck = False
    End If
End Function 
```

在此先感谢.. :) x

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-12T18:25:50.013

检查电子邮件地址是否有效的一种简单方法是尝试从中创建 MailAddress：

```
Try
    Dim testAddress = New MailAddress(email)
Catch ex As FormatException
    ' not a valid email address
End Try 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-12T19:03:11.197

检查下面的代码，我已经改变了一点

```
Private Sub TextBox1_TextChanged(ByVal sender As Object, ByVal e As System.EventArgs) Handles TextBox1.TextChanged
        TextBox1.BackColor = Color.White
        Dim temp As String
        temp = TextBox1.Text
        'Dim conditon As Boolean = False
        If emailaddresscheck(temp) = True Then
            ': If emailaddresscheck(conditon) = True Then
            TextBox1.BackColor = Color.Green
        Else
            'MessageBox.Show("Please enter your email address correctly", "Incorrect Email Entry")
            'TextBox1.Text = ""
            TextBox1.BackColor = Color.Yellow
        End If

    End Sub 
```

我已停止该消息，因为除非您复制和粘贴，否则它将永远不允许输入有效的电子邮件。

也试试这个模式

```
Dim pattern As String = "\w+([-+.']\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-15T11:48:35.167

您在错误的条件下提供消息框，否则您的代码是正确的。只需如下更改编码即可。

```
If emailaddresscheck(conditon) = True Then
           msgbox ("Correct email id")
Else
   MessageBox.Show("Please enter your email address correctly", "Incorrect Email Entry")
    EmailTextBox.Text = ""

End If 
```

**以供参考：**

```
Function EmailAddressCheck(ByVal emailAddress As String) As Boolean

        Dim pattern As String = "^[a-zA-Z][\w\.-]*[a-zA-Z0-9]@[a-zA-Z0-9][\w\.-]*[a-zA-Z0-9]\.[a-zA-Z][a-zA-Z\.]*[a-zA-Z]$"
        'Dim pattern As String = "\w+([-+.']\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*"
        Dim emailAddressMatch As Match = Regex.Match(emailAddress, pattern)
        If emailAddressMatch.Success Then
            EmailAddressCheck = True
        Else
            EmailAddressCheck = False
        End If

End Function

Private Sub Button5_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button5.Click
        'EmailAddressCheck(TextBox6.Text)
        If EmailAddressCheck(TextBox6.Text) = True Then
            MessageBox.Show("Please enter your email address correctly", "Incorrect Email Entry")
            TextBox6.Text = ""
        Else
            MsgBox("correct")
        End If
End Sub 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-02T08:14:28.163

磷

```
rivate Function validateEmail(ByVal Email As String)
        Try
            Dim myEmails As String() = Email.Split(",")
            Dim isV As Boolean = True
            For i As Integer = 0 To myEmails.Length - 1
                ' Validate One by Ibe
                isV = Global.ValidateEmail.IsValidEmail(myEmails(i).ToString)
                If (isV = False) Then
                    Return False
                End If
            Next
            Return isV
        Catch ex As Exception
        End Try
    End Function 
```

1.  将您的电子邮件地址作为字符串传递，这很简单。它将返回一个布尔值。

# xml - twitter搜索rss提要限制可以增加吗

> ID：10129380
> 
> 赞同：0
> 
> 时间：2012-04-12T18:16:16.900
> 
> 标签：xml, api, rss, twitter

有什么方法可以增加 twitter 搜索 rss 提要限制。网址 -`http://search.twitter.com/search.rss?q=hello`

目前只显示 15 个提要...我需要与查询相关的所有结果的输出。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T20:51:26.513

限制无法增加，但您可以使用此处讨论的页面参数获得其他结果：[Twitter 搜索 API 结果](https://stackoverflow.com/questions/6104435/twitter-search-api-results)和此处：[https ://dev.twitter.com/docs/api/1/get/search](https://dev.twitter.com/docs/api/1/get/search)

编辑：您可以通过使用最多 100 个“rpp”参数在每个页面上显示更多结果。像这样：`http://search.twitter.com/search.rss?q=hello&rpp=100`。使用 page 参数最多可以得到 1500 个结果。

# linux - crontab 路径和用户

> ID：10129381
> 
> 赞同：55
> 
> 时间：2012-04-12T18:16:20.223
> 
> 标签：linux, cron, crontab

我是使用 cron 和 crontab 安排任务的新手。我正在尝试安排任务的执行，就好像我已经登录、打开终端并自己执行一样。

但是，我安排了一个任务来帮助我观察计划任务正在执行的 $USER 和 $PATH ，这就是我发现的：

```
$ crontab -l
41 11 * * * echo "USER: $USER" > ~/Desktop/cron_env.log; echo "PATH: $PATH" >> ~/Desktop/cron_env.log
$ cat ~/Desktop/cron_env.log
USER:
PATH: /usr/bin:/bin 
```

看起来好像 $USER 没有设置，并且 $PATH 是非常基本的和/或默认的。相反，这是我打开终端（登录）并回显相同信息时看到的内容：

```
USER: aschirma
PATH: /usr/lib/jvm/java-6-sun/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/pkg/icetools/bin:/pkg/hwtools/bin:/pkg/netscape/bin:/pkg/gnu/bin 
```

我需要做什么才能让我的 crontab 任务按照我想要的方式运行？

* * *

## 回答 #1

> 赞同：85
> 
> 时间：2013-02-04T19:59:16.513

根据“man 5 crontab”，您可以在您的 crontab 中设置环境变量，方法是将它们写在您的 cron 行之前。

还有一个 crontab 示例，因此您只需复制/粘贴它：

```
$ man 5 crontab | grep -C5 PATH | tail 
# and files in /etc/cron.d. These files also have username fields,
# that none of the other crontabs do.

SHELL=/bin/sh
PATH=/usr/local/sbin:/usr/local/bin:/sbin:/bin:/usr/sbin:/usr/bin

# m h dom mon dow usercommand
17 * * * *  root  cd / && run-parts --report /etc/cron.hourly
25 6 * * *  root  test -x /usr/sbin/anacron || ( cd / && run-parts --report /etc/cron.daily )
47 6 * * 7  root  test -x /usr/sbin/anacron || ( cd / && run-parts --report /etc/cron.weekly ) 
```

因此，您可以根据需要调整 PATH 或任何环境变量。但是这个例子对于典型案例来说似乎已经足够了。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-04-12T18:37:17.447

In *ix, processes commonly inherit an environment from their parent process across fork+exec. They have the option of clearing the environment, but usually they don't. You can see the process tree with ps axf, and you can see the environment variables by using ps axfe.

cron is commonly not a child of someone's shell, so it'll often have a different environment from your interactive shell. There's a good chance cron's going to be intentionally clearing its own environment somehow for consistency though.

I like to test my cron jobs ("foo" for the sake of discussion) with the following in an interactive shell: env - ./foo This will actually clear out more env vars that cron does, but it makes it easier to get things going IMO, since what you're testing is more similar. You'll need to set any variables you're depending on (like $PATH), or replace them with something else - EG $USER becomes $(whoami).

I also like to write my bash scripts to use "set -eu" and "set -o pipefail". The -eu says "exit on a nonzero exit code, and exit on an undefined variable reference", and the pipefail says "don't return the last exit code in a pipeline, instead return the first exit code that's nonzero in a pipeline". In your case, the set -u might be particularly helpful.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-12T18:29:49.650

记住 crontab 是一个守护进程或服务，所以不像用户登录或其他东西。如果你想拥有你的环境变量，你需要自己设置它们。但是，这些变量中的大多数是由 shell 从 /etc/profile 路径设置的，然后将您的自定义变量放入您的 $HOME 目录中。

您可以通过“采购”您的 /etc/profile 来设置其中的一些，例如：

```
`41 11 * * * /home/<me>/cron_env.sh` 
```

`其中`cron_env.sh`将包含以下内容： ````
#!/bin/sh
source /etc/profile
/usr/bin/env > /home/<me>/cron_env.log

```` 

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-07-29T20:00:55.033

在我们的环境中，我们通常没有这个问题，因为 root 是唯一允许的 cron 并且每个命令通常作为特定于应用程序的用户通过 su -c 命令运行，如下所示：

```
su - myuser -c "/usr/local/scripts/app.sh" 2>&1 
```

由于指定了“-”选项，我们得到了 myuser 的配置文件和环境。我们最近遇到了一个需要 root 权限才能成功完成的命令的问题，所以我们只是发出了没有 su -c 的命令。经过一些研究后，我们发现获取 root 环境的最简单方法是对 root 使用与所有其他应用程序相同的技术，因此我们发布了：

```
su - root -c "/usr/local/scripts/app.sh" 2>&1 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-12T18:25:15.457

crontab 不是 bash 脚本，您不能使用通常在 shell 中可用的环境变量。

尝试将所有代码移动到 shebang 脚本文件（以“#!/bin/bash”行开头的文件）并在 crontab 中运行该脚本。

我不确定，但我认为 PATH（如果你设置了它，可能是 EMAIL）可能是你可以在 crontab 文件中访问的唯一一个。

**编辑：**检查[crontab 5 手册页](http://unixhelp.ed.ac.uk/CGI/man-cgi?crontab%205)，有很多可用的环境变量，全部由 cron 守护程序设置。`

# asp.net-mvc - 控制器用户为空

> ID：10129387
> 
> 赞同：0
> 
> 时间：2012-04-12T18:16:31.703
> 
> 标签：asp.net-mvc, asp.net-mvc-3, model-view-controller, controller, httpcontext

我对 MVC 很陌生，并且很难让我的应用程序在我的登台网络服务器上运行。在我的本地机器和开发服务器上，它运行良好。

问题是在我的操作中，用户为空（在登台上，而不是在开发和本地上）。我用谷歌搜索了为什么用户会为空的原因，但一切似乎都涵盖了。奇怪的是它可以在两台服务器上完美运行。

这是我的代码...

在 Global.asax Using PostAcquireRequestState 中，我使用自定义主体覆盖了主体，该主体持有存储在 Session 中的对象。因此 SessionHelper 将获取对象并将其添加到主体。然后将主体设置为 httpcontext 和线程。

```
public class MvcApplication : HttpApplication
{
    public MvcApplication()
    {
        PostAcquireRequestState += new EventHandler(MvcApplication_PostAcquireRequestState);
    }

    void MvcApplication_PostAcquireRequestState(object sender, EventArgs e)
    {
        if (Context.User is ICSPrincipal)
            return;

        var principal = new ICSPrincipal(new GenericIdentity(User.Identity.Name), SessionHelper.UserClaims);
        HttpContext.Current.User = principal;
        Thread.CurrentPrincipal = principal;
    }

    ...
} 
```

在我的控制器中，我将检索存储在主体中的值。但问题是我的登台服务器上的用户为空。但是它可以在我的本地机器和我的开发服务器上运行。开发服务器和登台服务器运行相同版本的 IIS，并且都安装了 MVC3。

```
public class HomeController : Controller
{
   public ActionResult Index()
   {
        //PROBLEM!!! User is NULL on staging server.
        var userClaims = ((ICSPrincipal)User).UserClaims;
        ...
   }
} 
```

有没有人有这个问题的经验并得到解决？我的印象是我可以从我的操作中安全地调用用户。

编辑：关于为什么我需要 SessionStorage 和自定义主体的情况草图。

我使用formsauthentication，因此涵盖了身份验证。但是，我曾经将一个包含额外用户数据（名字、姓氏；总共 6 个属性）的对象存储到来自身份验证 cookie 的用户数据中。然而，在调查我的请求时，我发现每个请求（甚至是图像）都超过 2.5KB。因此，我切换回仅将用户名存储在 cookie 中，并且在每次请求时，我都希望从会话存储中完成数据。这就是为什么我认为自定义主体会很棒。它从一个通用主体开始，一旦我们到达 Action，就会有一个自定义主体，其中包含我需要的所有数据来自我想要的任何地方（在这种情况下，来自 cookie 的用户名与来自会话的数据一起添加）。

我听到你说：但是，嘿，使用 Session 是不安全的，它会在一段时间后过期。我很清楚这一点，这就是为什么 SessionHelper 当然有一些智能。如果 Session 对象为 null，它将根据经过身份验证的用户的用户名获取所需的所有数据。它将这些数据存储在 Session 中，因此后续请求不会查询我的数据库。

我还使用 API 通信（http 或命名管道），这就是我在自定义主体中需要这些数据的原因。我无法从该层访问 Session，但我可以访问主体。因此，如果在进行该通信之前更新了主体，则一切正常。

解决实际问题：

上述设置实际上在多台机器上都可以正常工作，但在与我的开发服务器设置相同的登台服务器上却不行。在我的操作中分阶段投诉用户为空。我什至不知道这怎么可能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T18:38:24.323

PostAcquireRequestState 是一个奇怪的地方。您应该在 AuthenticateRequest 中执行此操作。您还应该设置 Context.User 而不是 HttpContext.Current.User。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T16:11:19.107

[http://support.microsoft.com/kb/980368/en](http://support.microsoft.com/kb/980368/en)

应用此补丁后，ASP.NET 4 应用程序可以处理对无扩展名 URL 的请求。因此，在处理程序执行之前运行的托管 HttpModules 将运行。在某些情况下，HttpModules 可能会返回无扩展 URL 的错误。例如，编写为仅预期 .aspx 请求的 HttpModule 现在在尝试访问 HttpContext.Session 属性时可能会返回错误。

这已经解决了这个问题！感谢大家让我尝试多种设置。这样我就想出了这个解决方案。

# javascript - 我需要一个 div 从页面右侧的 0 自动边距 div 的右侧填充

> ID：10129388
> 
> 赞同：1
> 
> 时间：2012-04-12T18:16:36.460
> 
> 标签：javascript, html, css

我有一个 950 像素的主要内容 div，并且自动边距为 0，因此它居中。它里面有透明的内容，所以不能有背景颜色，但我需要左右边距才能有背景颜色。是否可以将 div 放置在 div 的绝对右侧并拉伸到窗口的末尾？我可以在左边通过给它一个负的绝对值来做到这一点，但在右边它会滚动到 div 的末尾。

```
.mainwrapper {width:950px; margin:0 auto; height:800px; position:relative;}
.leftmargin {height:800px;width:1000px;position:absolute;top:0px;left:-1000px;}
.rightmargin {height:800px;width:1000px;position:absolute;top:0px;left:950px;}

HTML
<div class="mainwrapper">
<div class="leftmargin"></div>
<div class="rightmargin"></div>
</div> 
```

有没有一种简单的方法可以做到这一点或只有javascript？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T18:25:18.410

这应该不难解决，但您需要访问`.mainwrapper`' 父级。

HTML：

```
<div class="outer">
    <div class="mainwrapper">
        <div class="leftmargin"></div>
        <div class="rightmargin"></div>
    </div>
</div> 
```

CSS：

```
.outer {
    overflow-x: hidden;
}
.mainwrapper {
    width:950px;
    margin:0 auto;
    height:800px;
    position:relative;
}
.leftmargin {
    height:100%;
    width:99999px;
    position:absolute;
    left:100%;
}
.rightmargin {
    height:100%;
    width:99999px;
    position:absolute;
    right:100%;
} 
```

# mysql - Webmin 无法保存 MySQL 服务器选项

> ID：10129392
> 
> 赞同：2
> 
> 时间：2012-04-12T18:17:01.683
> 
> 标签：mysql, webmin

我在尝试从 webmin 更新 mysql 配置时遇到此错误“无法保存 MySQL 服务器选项：”mysql 工作正常，phpmyadmin 工作正常。我可以从 webmin 停止和启动服务器。但我无法对配置进行任何更改。这些更改存储在哪里。我检查了 /etc/my.cnf 和 webmin 中的配置不匹配。那么 webmin 在哪里存储这个配置呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T03:07:10.930

webmin 的 bug，需要在 xwindow/console 中手动配置 /etc/mysql.cnf

# python - python中的战舰游戏放置问题

> ID：10129398
> 
> 赞同：1
> 
> 时间：2012-04-12T18:17:25.650
> 
> 标签：python

我正在使用 10x10 的棋盘创建战舰游戏，如下所示：

```
-------------------------------------------------
 0 |  1 |  2 |  3 |  4 |  5 |  6 |  7 |  8 |  9 |
-------------------------------------------------
10 | 11 | 12 | 13 | 14 | 15 | 16 | 17 | 18 | 19 |
-------------------------------------------------
20 | 21 | 22 | 23 | 24 | 25 | 26 | 27 | 28 | 29 |
-------------------------------------------------
30 | 31 | 32 | 33 | 34 | 35 | 36 | 37 | 38 | 39 |
-------------------------------------------------
40 | 41 | 42 | 43 | 44 | 45 | 46 | 47 | 48 | 49 |
-------------------------------------------------
50 | 51 | 52 | 53 | 54 | 55 | 56 | 57 | 58 | 59 |
-------------------------------------------------
60 | 61 | 62 | 63 | 64 | 65 | 66 | 67 | 68 | 69 |
-------------------------------------------------
70 | 71 | 72 | 73 | 74 | 75 | 76 | 77 | 78 | 79 |
-------------------------------------------------
80 | 81 | 82 | 83 | 84 | 85 | 86 | 87 | 88 | 89 |
-------------------------------------------------
90 | 91 | 92 | 93 | 94 | 95 | 96 | 97 | 98 | 99 |
------------------------------------------------- 
```

我已经能够用我的代码打印它，但现在我正在尝试编写一个函数来检查选择是否是可以将船放置在板上的位置。

这是我得到的提示，但我真的不知道如何解决这个问题。

如果选择是 88，shipDir 是水平的，shipType 是 3，那么 ship 不适合，因为它将占据位置 88-89-90，而 90 是下一行的位置（因此 ship 将不在棋盘中）。

如果选择是 88，shipDir 是垂直的，shipType 是 3，那么船也不适合，因为它将占据 88-98-108 的位置，而 108 不在棋盘上。

此功能还检查所选位置是否是棋盘上另一艘船已占据的位置。

`False`如果一艘船不在船上，并且如果船上的另一艘船在船上，则函数应该返回。否则函数应该返回`True`。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T21:50:08.433

您帖子中的评论暗示您应该做什么。例如，James Thiele 建议对边缘效应的好坏位置进行索引。我喜欢这个主意。一个非常强大的方法是利用`numpy`'s broadcasting 的力量为您进行检查。使用这种方法的优点是能够定义“非传统”船舶，例如不是简单线性形状的船舶。

出于教学原因，我将在下面发布一个完整的解决方案，也就是说，我希望它对您学习有用。作为家庭作业，请自己编写解决方案 - 但请从下面的答案中获取。您会注意到我以“非传统”U 形船为例进行了定义。

```
import numpy as np

# Define the problem
N  = 10
msl = 4 # max_ship_length

# Reserve the boards
BOARD = np.zeros((N,N))
CHECK = np.zeros((N+msl,N+msl))

# Mark the positions outside the board as bad
CHECK[:N,:N] = 1

# Define some ships
battleship  = np.array([[0,1,2,3],[0,0,0,0]])
patrol = np.array([[0,1],[0,0]])
uboat  = np.array([[0,0,1,2,2],[1,0,0,0,1]])
v_idx = [1,0]

def try_place(location, ship, color):
    location = np.reshape(location,(2,1))
    idx = zip(location+ship)
    if CHECK[idx].all() and not BOARD[idx].any():
        BOARD[idx] = color
        return True
    return False

def random_spot(): return np.random.random_integers(0,N-1,2)

# Check some random locations for ships and place them if possible
for _ in xrange(3):
    try_place(random_spot(), patrol, 1)             # Horz. patrol boat
    try_place(random_spot(), battleship, 2)         # Horz. battleship
    try_place(random_spot(), battleship[v_idx], 2)  # Vertical battleship
    try_place(random_spot(), uboat, 3)              # Horz. UBoat 
```

您可以可视化使用创建的板`pylab`

```
import pylab as plt
plt.matshow(BOARD)
plt.show() 
```

![在此处输入图像描述](../Images/9971b3335c5d7a4e189ec14741f52216.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T18:26:53.533

您应该发布您如何在内部表示数据，而不仅仅是您打印出来的内容。

但是，根据您的输出，我想您有一个线性列表，并在其中使用某种元素来知道它是“包含一艘船”还是“不包含一艘船”。

建议是忘记它，并借此机会了解更多有关面向对象编码的信息 - 这样您就可以拥有一个了解其内容的“Board”类，以及一个“ `can_place_ship(self, <coord>, <shipsize>, <shiporientation>)`”方法，例如。

在这里，尝试本教程的 OO 部分： [http](http://www.voidspace.org.uk/python/articles/OOP.shtml) ://www.voidspace.org.uk/python/articles/OOP.shtml （刚刚从 google 的第一个结果中选择了一个链接）

# sql - 在 Excel 中将 SQL 结果限制为 2 个小数位

> ID：10129403
> 
> 赞同：2
> 
> 时间：2012-04-12T18:17:45.493
> 
> 标签：sql, excel, decimal

我在 Excel 中运行了这个非常简单的 SQL 查询：

```
SELECT "DCNR 595 C 24H|Well Based|Desc Run Depth|MWD_STEM|EM Temperature".Temperature
FROM ADI."DCNR 595 C 24H|Well Based|Desc Run Depth|MWD_STEM|EM Temperature" "DCNR 595 C 24H|Well Based|Desc Run Depth|MWD_STEM|EM Temperature" 
```

而且我想将输出限制在小数点后两位，并酌情四舍五入，而不是仅仅截断结果。所以我有一系列这样的结果：Excel 报告中的 147.20 而不是 147.19999694824。

我尝试过 CAST 和 ROUND 函数，但没有成功，但我也在 E​​xcel 中苦苦挣扎。MS Query 应用程序似乎不喜欢我做的任何事情。:(

（注意：我不能只将 Excel 单元格格式化为仅显示 2 位小数。实际返回的值必须为 2 位小数。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T18:22:25.257

尝试将该字段转换为十进制：

```
SELECT CAST(Temperature AS DECIMAL(18,2)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T20:14:54.677

我刚刚在 Excel 中尝试了 ROUND 函数，它似乎可以按照您的意愿工作。就个人而言，与对源查询的调整相比，我更喜欢这种解决方案——从长远来看，它更易于管理，因为它位于 Excel 文档的表面，而不是查询定义中。

![在此处输入图像描述](../Images/e12b9eb1bafe504577c022d5a9c7795b.png)

# windows - 确定哪个用户重新启动了 Windows 服务器

> ID：10129405
> 
> 赞同：2
> 
> 时间：2012-04-12T18:17:47.660
> 
> 标签：windows, logging, reboot

是否可以确定谁重新启动了 Windows 服务器？我正在查看事件系统日志中与重新启动相对应的“6006”事件，但用户被列为“N/A”。我试图按时间将其与安全日志中的登录名联系起来，但它们太多了，这不是一个准确的方法。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-15T07:52:55.737

过滤您的日志并搜索 ID : 1074 和 Source : user32 在下面你可以看到谁启动了重启过程

# ruby-on-rails - 仅显示帖子中的一些单词作为预览

> ID：10129408
> 
> 赞同：4
> 
> 时间：2012-04-12T18:17:56.490
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1

我正在使用 Ruby on Rails 3.2.1 和模型@post。问题是我只想在我的第一个应用程序页面上显示第一段或一些单词，例如预览，而不是所有内容。我怎么能这样做？

指数：

```
<% @posts.each{|posts| %>
        <h1 class="title"><%= link_to posts.title, posts %></h1>
            <p class="byline" style="text-align: right; font-weight: bold;">Raksts izveidots: <%= posts.created_at.utc.strftime("%d.%m.%Y") %></p>
            <div class="entry">
                <p><%= raw posts.content %></p>
            </div>
        <p class="meta"><a href="#" class="more">Read More</a> &nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <a href="#" class="comments">Comments</a> (33)</p>           
    <% } %> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-12T20:41:06.673

[了解内置工具](http://api.rubyonrails.org/classes/ActionView/Helpers/TextHelper.html#method-i-truncate)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-12T18:36:04.513

也许我不明白这个问题，但如果内容是一个字符串

```
posts.content[0,20] 
```

会给你前 20 个字符。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-04-12T19:28:51.267

你总是可以尝试组合[Santize](http://api.rubyonrails.org/classes/ActionView/Helpers/SanitizeHelper.html)和[Excerpt](http://api.rubyonrails.org/classes/ActionView/Helpers/TextHelper.html#method-i-excerpt)，它们都是标准的 ActionView Helpers。当我想要更多随机文本样本时，我喜欢摘录：

```
sanitize(excerpt(post.content,"Some key text",240)) 
```

如果您知道要显示第一段或该段的一部分之类的内容，那么我认为 Truncate 将是一个不错的选择，如@Edward 注释或 Sanitize 和@ERicM 方法的组合，例如：

```
sanitize(posts.content[0,20]). 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-09-05T13:08:39.897

这也有效:)

```
<%= posts.content.split[0..100].join(" ") %> 
```

这基本上说“打印字0到100”

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-04-12T19:02:49.587

或者您可以使用 truncate html gem - [https://github.com/hgimenez/truncate_html](https://github.com/hgimenez/truncate_html)

它为您提供了第一个但很多字符，并确保所有 html 标记都正确关闭。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2018-02-04T18:37:22.857

您可以使用 `<%= posts.content.truncate_words(18) %>`以上 Rails 4.2 或 `<%= posts.content[0,18] %>`前 18 个字符。

# file - 如何在 MATLAB GUI 中的函数之间传递值？

> ID：10129409
> 
> 赞同：0
> 
> 时间：2012-04-12T18:17:56.850
> 
> 标签：file, matlab, save, matlab-guide

我正在尝试将图像文件转换为二进制文件，我在 Matlab GUI 中使用了 2 个按钮。第一个按钮用于浏览文件，然后在静态文本上显示文件名，第二个按钮用于将其保存为 CSV 文件，这是我的代码

```
function varargout = signatureGUI(varargin)   
% Begin initialization code - DO NOT EDIT
gui_Singleton = 1;
gui_State = struct('gui_Name',       mfilename, ...
               'gui_Singleton',  gui_Singleton, ...
               'gui_OpeningFcn', @signatureGUI_OpeningFcn, ...
               'gui_OutputFcn',  @signatureGUI_OutputFcn, ...
               'gui_LayoutFcn',  [] , ...
               'gui_Callback',   []);
if nargin && ischar(varargin{1})
gui_State.gui_Callback = str2func(varargin{1});
end

if nargout
    [varargout{1:nargout}] = gui_mainfcn(gui_State, varargin{:});
else
gui_mainfcn(gui_State, varargin{:});
end
% End initialization code - DO NOT EDIT

% --- Executes just before signatureGUI is made visible.
function signatureGUI_OpeningFcn(hObject, eventdata, handles, varargin)

handles.output = hObject;
handles.filename = 0;

guidata(hObject, handles);

% --- Outputs from this function are returned to the command line.
function varargout = signatureGUI_OutputFcn(hObject, eventdata, handles) 

varargout{1} = handles.output;

% --- Executes on button press in browsefile.
function browsefile_Callback(hObject, eventdata, handles)

filename = uigetfile({'*.jpg'; '*.jpeg'; '*.png'});

handles.filename=filename;
guidata(hObject, handles);

set(handles.showfile, 'String',filename );

% --- Executes on button press in buttonwritecsv.
function buttonwritecsv_Callback(hObject, eventdata, handles)

handles.filename;

    new = imread (filename);
    newrgb=rgb2gray(new);
    newrgb_io = binz(newrgb);

    [filecsv,pathcsv] = uiputfile('*.csv','Save CSV File');
    csvwrite([filecsv,pathcsv], newrgb_io);

guidata(hObject, handles); 
```

我正在尝试使用“handles.filename”让“另存为”按钮能够从“浏览”按钮获取变量，但是当我在浏览文件后单击“另存为”按钮时，它什么也不做......

我是否遗漏了某些东西或在使用它时犯了错误？

在我遵循@Richante 的答案后，我得到了以下错误，我不明白

```
??? Reference to non-existent field 'output'.

Error in ==> signatureGUI>signatureGUI_OutputFcn at 34
varargout{1} = handles.output;

Error in ==> gui_mainfcn at 265
        feval(gui_State.gui_OutputFcn, gui_hFigure, [],
        gui_Handles);

Error in ==> signatureGUI at 17
    gui_mainfcn(gui_State, varargin{:}); 
```

我不知道是什么。。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T18:27:49.187

是的，这不太对。不要`handles`用于存储数据 - 使用您自己的结构。在`OpeningFcn`：

```
myData.filename = [];
guidata(hObject, myData); 
```

然后，当您要检索此数据时（例如`browsefile_Callback`）：

```
...
myData = guidata(hObject);
myData.filename = uigetfile(...);
set(handles.showfile, 'String', filename); 
```

和`buttonwritecsv_Callback`：

```
myData = guidata(hObject);
new = imread(myData.filename);
... 
```

基本上，`guidata(hObject, myData)`让您存储`myData`并`myData = guidata(hObject, myData)`让您检索它。

# c - gcc 抱怨：可变大小的对象可能未初始化

> ID：10129410
> 
> 赞同：8
> 
> 时间：2012-04-12T18:17:56.770
> 
> 标签：c, gcc, gcc4

我看过这些，但他们没有回答我的问题：

[可变大小的对象可能未初始化](https://stackoverflow.com/questions/9688219/variable-sized-object-may-not-be-initialized)

[C 编译错误：“可变大小的对象可能未初始化”](https://stackoverflow.com/questions/3082914/c-compile-error-variable-sized-object-may-not-be-initialized)

[错误：可变大小的对象可能未初始化。但为什么？](https://stackoverflow.com/questions/6550653/error-variable-sized-object-may-not-be-initialized-but-why)

我正在尝试编写一些相当可移植的`c`代码：

```
int main () 
{
    const int foo=13;
    int bar[foo]={0};
    return 0;
} 
```

使用以下任一方法`variable-sized object may not be initialized`编译为`c`代码时出现错误：

*   **GCC 4.3.4**
*   **arm-linux-gnueabi-gcc 4.4.5**

如果我像`c`在**VS2008**中那样编译它，我会得到一个稍微不同的`error C2057: expected constant expression`

我知道在这里，`c`代码编译器没有识别`const int foo=13;`出真正的常量；例如我们可能有

```
void a(int fool) 
{    
    const int foo=fool;
    int bar[foo]={0};
} 
```

我还意识到，[与 gcc 编译器不同](http://ideone.com/jbx7h)，**VS2008**编译器没有[C99 可变长度数组的](http://en.wikipedia.org/wiki/C99)概念。而那个 MS 显然没有提到任何未来的支持。

然而，`cpp`使用**gcc**或**MS**编译器的代码编译完全不同/更聪明？！

*   [这无法编译](http://ideone.com/mv6UB)
*   [但这会编译](http://ideone.com/ylJ6R)

而且我对**gcc**代码编译器的*不理解是：* **`c`**

 ***   由于[此代码](http://ideone.com/CBrsq) *确实可以*编译，
*   为什么[这段代码](http://ideone.com/Br6cC) *不*编译..
*   然而[这段代码](http://ideone.com/qstJP) **确实**编译了吗？

（注意：在最后一种情况下，**MS** `c`代码编译失败；与 一致`int bar[foo]={0};`）

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-12T18:39:29.730

C99 §6.7.8*初始化*说明：

> 要初始化的实体的类型应该是一个未知大小的数组或一个**不是**可变长度数组类型的对象类型。

所以你的初始化是无效的 C.

*不*成为 VLA的唯一方法是成为`type a[size]`整数*常量表达式*（第 6.7.5.2 节）。你所拥有的不是一个整数常量表达式，所以你有一个 VLA：*`size`*

 **> 如果大小不存在，则数组类型是不完整的类型。如果大小是 * 而不是表达式，则数组类型是未指定大小的可变长度数组类型，只能在具有函数原型范围的声明中使用，这样的数组仍然是完整类型。如果大小是**整数常量表达式**，并且元素类型具有已知的常量大小，则数组类型不是变长数组类型；否则，数组类型是可变长度数组类型。

第 6.6/6 部分*常量表达式*将它们定义为：

> 整数常量表达式应具有整数类型，并且应仅具有整数常量、枚举常量、字符常量、结果为整数常量的 sizeof 表达式和作为强制转换的直接操作数的浮点常量的操作数。整数常量表达式中的强制转换运算符只能将算术类型转换为整数类型，但作为 sizeof 运算符的操作数的一部分除外。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T18:34:21.020

实际上，对于我的 gcc（版本 4.4.4），您的最后一个示例

```
int main()
{
    const int foo=13;  
    int bar[foo+1]={0}; //wtF?
    return 0;
} 
```

正如人们所期望的那样，也*不会编译。*您可能需要仔细检查您的工具链（以验证您没有在某处重新链接现有的“.o”），然后重试。

如果您发现它确实有效，这是我的`gcc -v`输出，也许您可​​以检测到配置中的差异，这可能会有所帮助。

```
Using built-in specs.
Target: i686-redhat-linux
Configured with: ../configure --prefix=/usr --mandir=/usr/share/man --infodir=/usr/share/info --with-bugurl=http://bugzilla.redhat.com/bugzilla --enable-bootstrap --enable-shared --enable-threads=posix --enable-checking=release --with-system-zlib --enable-__cxa_atexit --disable-libunwind-exceptions --enable-gnu-unique-object --enable-languages=c,c++,objc,obj-c++,java,fortran,ada --enable-java-awt=gtk --disable-dssi --enable-plugin --with-java-home=/usr/lib/jvm/java-1.5.0-gcj-1.5.0.0/jre --enable-libgcj-multifile --enable-java-maintainer-mode --with-ecj-jar=/usr/share/java/eclipse-ecj.jar --disable-libjava-multilib --with-ppl --with-cloog --with-tune=generic --with-arch=i686 --build=i686-redhat-linux
Thread model: posix
gcc version 4.4.4 20100630 (Red Hat 4.4.4-10) (GCC) 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-12T18:47:58.477

正如马特已经引用了标准一样，**`const`应用于整数变量的限定符不算作整数常量表达式**。我们可能想知道为什么？它看起来像一个整数常量一样无辜！

This *may* be because `const` are not absolutely `consts`. You might alter their values through pointers and all a compiler might do, if at all it catches such an assignment , is throw a warning but cant really prevent you from altering the `const` value.

PS: **Don't trust the online compilers** like [ideone.com](http://ideone.com) etc. Here's one silly [runtime error](http://ideone.com/sHvWg) it throws for a very simple C program.****

# twitter - 可以修改 TWTweetComposeViewController 吗？

> ID：10129415
> 
> 赞同：0
> 
> 时间：2012-04-12T18:18:23.903
> 
> 标签：twitter

基本上我可以实现这样的[http://www.pohrani.com/f/3L/WK/4bBD7bO6/sample.png](http://www.pohrani.com/f/3L/WK/4bBD7bO6/sample.png)

我想要一个相机图标，它会调用 UIImagePickerController 让用户选择要附加到推文的图片。可以这样做吗，或者一旦调用了 TWTweetComposeViewController，我就无法将图像添加到推文中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T22:27:15.970

请改用[DETweetComposeViewController](https://github.com/doubleencore/DETweetComposeViewController)。完全可定制。

# c# - 将字符串数组转换为列表

> ID：10129419
> 
> 赞同：191
> 
> 时间：2012-04-12T18:18:29.547
> 
> 标签：c#, c#-2.0

我已经看到使用`.ToList()`数组类型完成此操作的示例，这似乎仅[在 .Net 3.5+](http://msdn.microsoft.com/en-us/library/bb342261.aspx)中可用。我在一个目前无法升级的 ASP.NET 项目上使用 .NET Framework 2.0，所以我想知道：还有其他解决方案吗？一个比遍历数组并将每个元素添加到此 List 更优雅的方法（这没问题；我只是想知道是否有更好的学习解决方案）？

```
string[] arr = { "Alpha", "Beta", "Gamma" };

List<string> openItems = new List<string>();

foreach (string arrItem in arr)
{
    openItems.Add(arrItem);
} 
```

如果我必须这样做，有没有办法在我将它复制到我的列表后从内存中释放挥之不去的数组？

* * *

## 回答 #1

> 赞同：471
> 
> 时间：2012-04-12T18:20:38.690

只需使用. [_](https://msdn.microsoft.com/en-us/library/fkbw11z0(v=vs.110).aspx) `List<T>`它接受任何`IEnumerable<T>`作为参数。

```
string[] arr = ...
List<string> list = new List<string>(arr); 
```

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2016-12-12T20:51:20.093

从 .Net 3.5 开始，您可以使用 LINQ 扩展方法（有时）使代码流更好一些。

用法如下所示：

```
using System.Linq; 

// ...

public void My()
{
    var myArray = new[] { "abc", "123", "zyx" };
    List<string> myList = myArray.ToList();
} 
```

PS。还有`ToArray()`一种方法可以以其他方式起作用。

# iphone - 关于iOS开发的一些问题

> ID：10129422
> 
> 赞同：-1
> 
> 时间：2012-04-12T18:18:51.717
> 
> 标签：iphone, ios

我即将构建我的第一个 iPhone 应用程序。

我对事情的工作方式有一些一般性的问题，我希望有人可以帮助我提供一些信息以及我应该去哪里看。

1.  关于推送通知。我知道苹果商店不再允许使用 UUID，并且不应该再在应用程序中使用 UUID 了吗？如果我没有特定用户的 UUID，如何向特定用户发送推送通知？

2.  关于我的应用程序的使用条款，苹果协议是否已经涵盖了我在 AppStore 上后不应该担心的事情？

3.  当应用程序“最小化”到后台时，如果服务器端看起来很重要，我如何仍然与我的服务器交换数据并发送推送通知？（见于 Viber、WhatsApp 等应用程序）

提前非常感谢，每条信息/您自己的智慧/相关信息的链接都会有很大帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T18:27:36.300

1.  对于 PUSH，您不需要 UDID。操作系统/框架将为您提供每个应用程序令牌，然后您可以将其发送到您的服务器以了解您的“用户”。

2.  那是问律师问题的错误地方。:)

3.  Viber 和 WhatsApp 正在使用推送通知。它们并不是“真正”在后台运行。但是你可以做在后台运行的应用程序。Apple 允许在此处使用 VOIP、GPS 跟踪或音乐收听/无线电应用程序。我建议不要尝试其他应用程序的端口/conecpts，因为它可能最终被苹果拒绝审查。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T18:39:49.107

1 使用苹果推送通知服务

" 设备令牌是设备的不透明标识符，当 APNs 首次与设备连接时，它提供给设备。设备与其提供者共享设备令牌。此后，此令牌伴随来自提供者的每个通知。它是建立对特定通知路由合法性的信任。”

[苹果推送通知服务信息源](https://developer.apple.com/library/ios/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/ApplePushService/ApplePushService.html#//apple_ref/doc/uid/TP40008194-CH100-SW9)

2 对此提出一个单独的问题，并详细说明您的意思。

3 使用本地通知

[本地和推送通知信息源](https://developer.apple.com/library/ios/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/Introduction/Introduction.html)

Apple 的开发者网站对这类问题非常有帮助：developer.apple.com

# java - 我无法让 SharedPreferences 工作

> ID：10129425
> 
> 赞同：0
> 
> 时间：2012-04-12T18:19:01.153
> 
> 标签：java, android, sharedpreferences

我正在为 Android 制作一个应用程序，在启动屏幕上我希望它在第一次启动应用程序时显示一个 AlertDialog。这是我的代码：

```
 SharedPreferences savedInfo = getSharedPreferences("SavedInfo", MODE_PRIVATE);
    SharedPreferences.Editor infoEditor = savedInfo.edit();

        boolean firstLaunch = savedInfo.getBoolean("firstLaunch", true);

        final AlertDialog importDialog = new AlertDialog.Builder(SplashActivity.this).create();

        if (firstLaunch == true) {
            importDialog.setTitle(R.string.splash_import_title);
            importDialog.setMessage(getString(R.string.splash_import_text));
            importDialog.setIcon(android.R.drawable.ic_dialog_alert);
            importDialog.setButton(getString(R.string.splash_import_yes), new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog, int which) {
                    //ALL FILE STUFF HERE
                    importDialog.dismiss();
                    startTimer();
                }
            });
            importDialog.setButton2(getString(R.string.splash_import_no), new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog, int which) {
                    importDialog.dismiss();
                        startTimer();
                }
            });  
            importDialog.show();
            infoEditor.putBoolean("firstLaunch", false);
        } else {
            startTimer();
        } 
```

问题是，它每次都向我显示对话框。即使我已经启动了它。感谢您的时间和帮助，zeokila。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T18:22:20.203

我相信你必须`infoEditor.commit()`追赶`putBoolean`。在您这样做之前，它实际上并没有保存新的首选项。

[http://developer.android.com/reference/android/content/SharedPreferences.Editor.html](http://developer.android.com/reference/android/content/SharedPreferences.Editor.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T18:22:49.143

你必须告诉你的编辑保存。添加`infoEditor.commit();`（同步）或`infoEditor.apply();`（异步）以保持您的价值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-12T18:27:01.327

`infoEditor.commit()`之后似乎丢失了`infoEditor.putBoolean("firstLaunch", false)`，因此从未保存过新值。

# c++ - C++ 中 Diag(k) 的替代方法是什么？

> ID：10129429
> 
> 赞同：0
> 
> 时间：2012-04-12T18:19:14.073
> 
> 标签：c++, matlab, lapack, blas

我正在将 matlab 代码转换为 C++ 代码，并试图在 Lapack、Blas 甚至 Atlas 中找到一个在 matlab 中的 Diag(k) 函数中执行相同工作的函数？有什么建议么 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T03:08:24.670

[GSL，Gnu 科学图书馆](http://www.gnu.org/software/gsl/manual/html_node/Creating-row-and-column-views.html://)有一个功能`gsl_matrix_diagonal (gsl_matrix * m)`。这会在矩阵中创建一个“向量视图”，它或多或少是一个别名为矩阵对角线的 gsl 向量。不知道你是否喜欢 GSL，但它也包括 BLAS 支持。我认为这是一个非常好的图书馆。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T12:38:42.933

```
static void create_diagonal_matrix(T* matrix,T* v,int size)
    {   
        for(int i=0;i<size;i++)
        {
            for(int32_t j=0;j<size;j++)
            {
                if(i==j)
                    matrix[j*size+i]=v[i];
                else
                    matrix[j*size+i]=0;
            }
        }
    } 
```

# d3.js - 数据连接中的继承

> ID：10129432
> 
> 赞同：8
> 
> 时间：2012-04-12T18:19:16.350
> 
> 标签：d3.js

关于数据连接的快速问题。假设我有一些元素，每个元素都包含一个 . 当我最初将数据连接到 时，它会自动由我附加到输入选择的元素继承。

当数据发生更改并将其重新绑定时，我期望元素会获取新数据，但这并没有发生。

为了处理这个问题，我需要像这样显式地重新绑定较低级别的数据：

```
gElements.selectAll("circle")
    .data(function(d) { return [d]; }
    .enter().append("circle"); 
```

这将处理创建案例和随后的重新绑定。但这似乎有点多余，因为返回 [d] 本质上是从父元素初始继承数据时自动发生的。

这种方法是处理这个问题的正确方法，还是我在这里的某个地方感到困惑？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-12T19:01:08.343

当您通过[selection.data](https://github.com/mbostock/d3/wiki/Selections#wiki-data)将数据绑定到元素时，它会更新绑定到这些元素的数据。但是，它不会*自动*将新数据传播到后代元素；你必须自己做。

当您调用与[selection.append](https://github.com/mbostock/d3/wiki/Selections#wiki-selection)对应的[selection.select](https://github.com/mbostock/d3/wiki/Selections#wiki-append)时，来自父级的数据将绑定到每个选定元素的选定子级。当您调用[selection.selectAll](https://github.com/mbostock/d3/wiki/Selections#wiki-selectAll)时，数据未绑定，因此您必须随后调用 selection.data 将新数据绑定到子项。

如果没有更多上下文，很难回答您的问题。如果您已更新 上的数据`gElements`，并且每个 G 元素包含一个圆，则可以使用 selection.select 将数据从父 G 传播到子圆：

```
gElements.select("circle"); 
```

您编写的代码片段仅在您想创建一个新圆圈时使用，如果圆圈丢失。这在[Thinking with Joins](http://bost.ocks.org/mike/join/)中有描述。您将编写的确切代码可能取决于它是在输入和更新时执行，还是仅在更新时执行。

# java - 如何在移动设备（android）上的应用程序和 PC 上的应用程序（java swing）之间进行通信？

> ID：10129436
> 
> 赞同：0
> 
> 时间：2012-04-12T18:19:37.223
> 
> 标签：java, android, rest, soap, xml-rpc

我在两台 PC 上有两个应用程序（java）和一个移动应用程序（Android），移动应用程序可以在 iPhone 上......

我的问题是不同应用程序与数据库之间的交互： - PC 和 PC 之间（两个应用程序**java-swing**） - PC 和移动

PC(n°1)<--------->服务器(BD)<------------>PC(n°2)--------- >服务器（网络）------>移动

app1 <---------> MySQL <--------------->app2 --------->(XML-RPC 或 SOAP 或 REST) -------->应用程序3

如何在 Eclipse 中使用 Web 服务？-我考虑过使用**SOAP**或**XML-RPC**或**REST**，但我不知道从哪里开始我使用 (eclipse-java-indigo-SR1) 作为编辑器。- 在两台 PC 之间，我使用 MySQL 作为服务器。你能解释一下我必须做什么吗，我需要意识到这一点。

XML-RPC 如何使用这个库，我不明白它是如何工作的以及我在哪里使用它。

```
 XMLRPCClient client = new XMLRPCClient("http://foo.bar.com");
// add 2 to 4
int sum = (Integer) client.call("add", 2, 4);
// check whether x is inside range 4..10
boolean isInside = (Boolean) client.call("isInside", x, 4, 10);
// capitalize string
String capitalized = (String) client.call("capitalize", "to be or not to be"); 
```

XML-RPC 或 SOAP 或 REST ？哪个最简单和最有效？

# html - Django“必需”属性/类不刷新

> ID：10129438
> 
> 赞同：0
> 
> 时间：2012-04-12T18:19:45.480
> 
> 标签：html, django, request

我有一个表单，我想打开和关闭字段的必需属性。我可以成功使用[表单 CharField 的 required 属性，](https://docs.djangoproject.com/en/1.4/ref/forms/fields/#charfield)但只能在页面刷新或发布表单时使用。当我尝试执行 GET 回调时，“有时”字段将需要打开和关闭，但不会刷新 html 类“必需”。

未刷新的 html，显示“必需”类。这是由 Django 自动生成的：

```
<dt class="required">
    <label for="sometimes">Username</label>
</dt> 
```

简化的views.py：

```
form_validate(httpreq):
  form = SetupForm()
  if httpreq.GET.has_key('req'):
    # In this case, it is not the initial call
    if httpreq.GET['req'] == 'true':
      print 'required is True'
      form.fields['sometimes'].required = True
    else:
       print 'required is False'
       form.fields['sometimes'].required = True
  else:
    # Here, required = True/False behaves as expected
    # When the field is required, it has the class="required"
    form.fields['sometimes'].required = True
    # For forms.fields['sometimes'].required = False,
    # class="required" is absent in the html

class SetupForm(forms.Form):
  sometimes = forms.CharField(widget=forms.TextInput(attrs={'id':'sometimes','size':FIELD_LENGTHS['shorttext'],}), label=ugettext_lazy("Username"),) 
```

我的 jQuery：

```
 $(document).ready(function(){
    $('#tog').click(function(){
        var params = {}
        if ($("#tog").is(":checked")) {
            params = {"auth":true};
        } else {
            params = {"auth":false};
        }
        var url = "/url_for_form/?fmt=json";
        $.getJSON(url, params, function(jsonrpc, xhrstatus, xhr) {
              console.log("JSON callback");
             });
    });
  }); 
```

那么，如何让 html 刷新类名呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T18:33:23.250

我怀疑问题出在浏览器和服务器之间。当您发布或显式重新加载页面时，浏览器将从服务器加载整个页面，而忽略其缓存。但是，当您执行常规 GET 请求时，浏览器可能会显示页面的最后缓存版本。

解决方案是将以下标头添加到此特定视图的 HTTP 响应中：

```
Cache-Control: no-cache 
```

解决此问题的一种方法可能是使用类似于此的装饰器来装饰您的视图：http: [//djangosnippets.org/snippets/275/](http://djangosnippets.org/snippets/275/)

# jquery - MVC 3 验证：如何在不使用表单的情况下验证匹配的输入元素？

> ID：10129440
> 
> 赞同：0
> 
> 时间：2012-04-12T18:19:48.143
> 
> 标签：jquery, asp.net-mvc, asp.net-mvc-3, jquery-validate

我在一个新项目和学习曲线上使用 MVC 3。

情况：我在 a 中有输入标签（使用不显眼的验证），`<tr>`我想独立提交每个`<tr>`via的值`$.ajax`，但只有在它们有效之后。我负责从输入中读取什么/如何读取以传输到服务器。

选项：将每个表单放入`<tr>`并验证表单？？#multiple`<td>`元素**或**从表格更改我的布局？？＃真的

问题：有没有办法验证一堆输入，例如`$("#tr1 input").validate()`？

帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T18:29:55.487

为什么不在运行 ajax 之前以某种验证元素的方式编写自己的验证可能是这样的

```
 var value=$("#tr1 input").val() /// this might cahnge depending on what value you are sending 
    var validator=false;
    if(value!="")
    {
    validator=true;

    }

    if(validator)
    {
    $.ajax({
      url: 'ajax/test.html',
      success: function(data) {
        $('.result').html(data);
        alert('Load was performed.');
      }
    })
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T15:27:01.943

在有效性库的帮助下，我决定放弃 MVC 验证并处理我自己的验证（FREEDOM！COLD TOLD 和 Michael Franc 的宝贵输入之间的交叉）：http: [//validity.thatscaptaintoyou.com/](http://validity.thatscaptaintoyou.com/)我喜欢这种灵活性并且不'不需要使用表单，只需在您的应用程序中采用一些常见的约定，例如`class="required"`并创建一个可重用的函数，如：`$(".required").require();`. 与表单或 ajax 完美结合。

感谢您的贡献。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T18:44:02.203

Asp.Net Mvc 中的不显眼验证使用内部 jquery 验证插件。创建 html 时，元数据属性会添加到您的元素中，我认为您可以使用它们并执行以下操作：

```
$("#myform").validate().element("selector" ); 
```

来自[http://docs.jquery.com/Plugins/Validation/Validator/element#element](http://docs.jquery.com/Plugins/Validation/Validator/element#element)

# javascript - knockoutjs“无法解析绑定”错误，但代码有效

> ID：10129441
> 
> 赞同：2
> 
> 时间：2012-04-12T18:19:49.940
> 
> 标签：javascript, knockout.js

我一直在使用淘汰赛，但在编写一些代码示例时，这让我很难过。代码完全按照我的预期工作，点击按钮切换可见，但我仍然收到错误：

JsFiddle：http: [//jsfiddle.net/JasonMore/hCdF8/1/](http://jsfiddle.net/JasonMore/hCdF8/1/)

```
Uncaught Error: Unable to parse bindings.
Message: ReferenceError: answerClick is not defined;
Bindings value: click: answerClick 
```

从

```
<ul data-bind="foreach: answers">
    <li>
        <a class="hiddenButton" href="#" data-bind="click: answerClick" />
        <div class="answerNumber" data-bind="visible: showAnswerNumber">
            <h2 data-bind="text: answerNumber" />
        </div>
        <div class="answer" data-bind="visible: showAnswerText">
            <p data-bind="text:text" />
            <p data-bind="text: points" />
        </div>
    </li>
</ul>

<script type="text/javascript">

    var answerViewModel = function () {
        var self = this;

        //clicks
        self.answerClick = function () {
            self.showAnswerNumber(!self.showAnswerNumber());
        };

        //observables
        self.answerNumber = ko.observable();
        self.text = ko.observable();
        self.points = ko.observable();
        self.showAnswerNumber = ko.observable(true);

        //computed
        self.showAnswerText = ko.computed(function () {
            return !self.showAnswerNumber();
        });
    };

    var roundViewModel = function () {
        var self = this;
        self.answers = ko.observableArray();
    };

    var answer1 = new answerViewModel();
    answer1.text = "foo answer";
    answer1.answerNumber = 1;
    answer1.points = 50;

    var vm = new roundViewModel();
    vm.answers.push(answer1);

    ko.applyBindings(vm);

</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T18:50:30.563

因为您正在关闭您的锚标记： `<a />`，所以它以一种奇怪的方式呈现，其中一个额外的锚标记位于 之外，而不是在有效函数`foreach`的上下文中。`answerClick`

我不确定您要为链接使用什么内容，但您需要有一个开始和结束标记，例如：

`<a class="hiddenButton" href="#" data-bind="click: answerClick">link</a>`

不确定您是否打算将内容包装在该链接中，但这就是您的问题所在。

示例：http: [//jsfiddle.net/rniemeyer/hCdF8/2/](http://jsfiddle.net/rniemeyer/hCdF8/2/)

# c# - 事件日志侦听器 - 应用程序和服务

> ID：10129446
> 
> 赞同：6
> 
> 时间：2012-04-12T18:20:01.153
> 
> 标签：c#, windows, windows-vista, event-log

有没有办法在生成“应用程序和服务”的事件时（在 C# 中）？我发现我不能为此使用 WMI。

还有其他想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-12T19:25:28.647

您可以订阅[EventLog.EntryWritten 事件](http://msdn.microsoft.com/en-us/library/system.diagnostics.eventlog.entrywritten%28v=vs.71%29.aspx)

> 在将条目写入本地计算机上的事件日志时发生。

来自 MSDN：

```
 ....
    EventLog myNewLog = new EventLog();
    myNewLog.Log = "MyCustomLog";                      

    myNewLog.EntryWritten += new EntryWrittenEventHandler(MyOnEntryWritten);
    myNewLog.EnableRaisingEvents = true;                 

}       

public static void MyOnEntryWritten(object source, EntryWrittenEventArgs e){

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T19:25:17.463

您是否尝试过[EventLog.EntryWritten Event](http://msdn.microsoft.com/en-us/library/system.diagnostics.eventlog.entrywritten.aspx)？

# asp.net - 在 ASP.NET MVC 应用程序中针对 Intranet Web 服务运行集成测试

> ID：10129448
> 
> 赞同：0
> 
> 时间：2012-04-12T18:20:06.740
> 
> 标签：asp.net, unit-testing

我在一家大公司工作，从 Intranet Web 服务获得的数据可能不可靠，并且从一个环境到另一个环境可能不一致。因此，我想在所有环境中针对 Intranet Web 服务运行集成测试。我无法从我的本地开发箱（即：开发、暂存、生产环境）中针对所有环境中的所有 Intranet Web 服务运行集成测试，因为网络防火墙会阻止请求并且运行我的开发实例的应用程序池缺乏安全权限。

但是，我可以在这些环境中的每一个中部署一个 asp.net mvc 应用程序并针对 Intranet webservices 运行我的集成测试，因为它的应用程序池帐户将具有足够的权限，并且在进行 webservices 调用时网络防火墙不会阻碍。结果必须显示在浏览器中，因为除端口 80 之外的所有端口都被阻止。我将无法访问暂存和生产环境中的远程桌面连接、本地日志文件和数据库。

运行集成测试并将其结果显示在我的 mvc 应用程序中的最佳方法是什么？是否有我可以利用的现有测试框架？

# c - 从未在变量中声明的“字符串”访问字符 (C)

> ID：10129452
> 
> 赞同：1
> 
> 时间：2012-04-12T18:20:32.610
> 
> 标签：c, arrays, string, memory, char

```
char i;
for(i=0;i<16;i++)
    printf("%c","asdf"[i]);
i=1;
if("123"[i]==1)
    i=1;
if("456"[4]==1)
    i=1;
if("789"[1]==1)
    i=1; 
```

输出是：

```
asdf 123 456 
```

似乎大多数“字符串”在内存中直接紧随其后。我不认为这是随机的，或者是吗？此外，当我在 char-access-expression 中使用 int 变量而不是 i 时程序失败，这不是第一个（这里是 asdf[i]）。例如 if("123"[j]==1)

有人可以向我解释一下吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-12T18:23:00.877

常量字符串通常与程序代码分开存储，它们在内存中紧密排列并不奇怪。但是，您不应该依赖于此。

您的程序具有**未定义的行为**，如果您尝试使用不同的编译器运行代码，可能会发生不同的事情。例如，当我使用 gcc 4.3.4 在[ideone](http://ideone.com/DxRXD)上运行您的代码时，它的输出与您得到的不同。

# javascript - 在 jQuery Mobile 中禁用 DOM 大小管理

> ID：10129454
> 
> 赞同：-1
> 
> 时间：2012-04-12T18:20:41.810
> 
> 标签：javascript, jquery, jquery-mobile

根据[文档](http://jquerymobile.com/test/docs/pages/page-cache.html)，所有获取的 ajax 页面都从 pageHide 上的 DOM 中删除。有没有办法禁用此功能？它导致我的页面在我试图避免的重新获取时显示加载屏幕，并且网站的大小相当小。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T18:41:03.813

引用您引用的页面上的文档：

> 要将所有以前访问过的页面保留在 DOM 中，请将页面插件上的 domCache 选项设置为 true，如下所示：
> 
> $.mobile.page.prototype.options.domCache = true;
> 
> 或者，要仅缓存特定页面，您可以将 data-dom-cache="true" 属性添加到页面的容器中：
> 
> <div data-role="page" id="cacheMe" data-dom-cache="true">

但是，您收到一条加载消息似乎很奇怪，这不是我使用 jQueryMobile 所拥有的。您是否通过慢速网络加载页面？

# c# - WP7 将文本和图像绑定到 Hub Tile

> ID：10129456
> 
> 赞同：1
> 
> 时间：2012-04-12T18:20:48.677
> 
> 标签：c#, windows-phone-7, xaml

我正在尝试将匹配的名称和图像绑定到 Hub Tile。数据来自输出 JSON 的 api。我对数据进行反序列化并使用 foreach 循环将数据添加到我的类中没有问题。这是设置：

```
 // Deserialize home page data
    public void jsonHome_GetDataCompleted(object snder, DownloadStringCompletedEventArgs e)
    {
        NewReleasesCharts homeData = JsonConvert.DeserializeObject<NewReleasesCharts>(e.Result);

        foreach (FeaturedReleases release in homeData.results.featuredReleases)
        {
            int releaseID = release.id;
            string releaseName = release.name;
            string releaseImg = release.images.large.url;

            new ReleaseLarge()
            {
                url = releaseImg
            };
            new FeaturedReleases()
            {
                id = releaseID,
                name = releaseName
            };
        }

        this.listRelease.ItemsSource = homeData.results.featuredReleases;        
    } 
```

这是我的课

```
public class NewReleasesCharts 
{
    //public Metadata metadata { get; set; }
    public ResultHome results = new ResultHome();
    public IEnumerator<ResultHome> GetEnumerator()
    {
        return this.results.GetEnumerator();
    }
}

public class ResultHome
{
    public List<FeaturedReleases> featuredReleases { get; set; }

    //public List<FeaturedCharts> featuredCharts { get; set; }
    //public List<TopDownloads> topdownloads { get; set; }
    //public List<MostPopularReleases> mostPopularReleases { get; set; }
    //public List<Components> components { get; set; }

    internal IEnumerator<ResultHome> GetEnumerator()
    {
        throw new NotImplementedException();
    }
}

public class FeaturedReleases
{
    public int id { get; set; }
    public string type { get; set; }
    public string name { get; set; }
    public string slug { get; set; }
    public ReleaseImage images { get; set; }
}

public class ReleaseImage
{
    //public ReleaseSmall small { get; set; }
    public ReleaseMedium medium { get; set; }
    public ReleaseLarge large { get; set; }
}

public class ReleaseLarge
{
    public int width { get; set; }
    public int height { get; set; }
    public string url { get; set; }
    public string secureUrl { get; set; }
} 
```

和我的 XAML

```
 <ListBox Grid.Row="0" x:Name="listRelease">
                    <ListBox.ItemsPanel>
                        <ItemsPanelTemplate>
                            <toolkit:WrapPanel Orientation="Horizontal" />
                        </ItemsPanelTemplate>
                    </ListBox.ItemsPanel>
                    <ListBox.ItemTemplate>
                        <DataTemplate>
                            <toolkit:HubTile Title="{Binding name}" Source="{Binding url}" Margin="10" />
                        </DataTemplate>
                    </ListBox.ItemTemplate>
                </ListBox> 
```

现在只有`name`显示在 Hub Tile 中。我认为这是因为名称和图像在不同的类中，但我无法找到解决方案。谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T18:42:39.640

你有

```
Source="{Binding img}" 
```

但是在您的模型中，您没有一个名为`img`.

我会四处走动，但如果有的话，你的绑定应该是这样的：

```
Source="{Binding images.medium.url}" 
```

# sql-server-2008 - 在 sql 存储过程中将可执行字符串与主 sql 组合

> ID：10129457
> 
> 赞同：0
> 
> 时间：2012-04-12T18:20:50.183
> 
> 标签：sql-server-2008

在我的 sql 过程中，我创建了一个临时表，然后对其进行旋转。这是动态的，所以最后我不知道有多少列。让我们制作这张表：

```
equipmentID   |   Name1   |   Name2   | Name3
1             |   34.54   |   21.23   | 213.65
2             |   334     |   23.421  | 23.12
3             |   43.4    |   2.34    | 23.41 
```

用于生成它的查询存储在一个字符串中，并通过调用`execute(@stringQuery)`.

我的另一个表是使用普通 sql 查询获取的，并生成另一组信息（包括`equipmentID`数据透视表中包含的信息）。

我想要做的是加入这两个表（基于`equipmentID`这样存储过程返回一个表而不是两个但我不知道如何做到这一点。

到目前为止，我已经尝试了几件事：

*   保留主要（第二个）查询并将执行行添加到该`FROM`部分的末尾，以便在所有表连接后我有：

    `LEFT JOIN execute(@stringQuery) as strQ on strQ.equipmentID = mainQ.equipmentID`

*   将第二个查询设为字符串，以便使用`execute`命令获取它们或创建另一个包含主 sql 的存储过程，因此（再次）它们都使用该`execute`命令。这确实获取了它只是没有结合它的信息。在这种情况下，我尝试将这两个执行与：

    `execute('select * from (' + @query1 + ') as tbl2 left join ' + @query2 + ' as tbl1 on tbl2.equipmentID= tbl1.equipmentID')`

*   将主查询转换为字符串，然后使用 a 将它们组合起来`LEFT JOIN`，使其成为一个大查询。

所有这些都给我带来了问题。我认为这是一件很常见的事情，除了我已经尝试过的方法之外，我不确定如何解决它。

**编辑** 当我尝试创建一个临时表并插入（或从中选择）时，我被告知临时表名称是无效对象。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T13:19:44.087

你的问题比看起来要难一些。问题源于您有一个格式未知的表（动态生成的列）。

包含仅在运行时才知道的列的表强制解决方案复杂且繁琐，或者解决方案不理想。

您选择的全局临时表解决方案可能是最简单的解决方案之一，但请查看此处（跳至“全局临时表”或搜索“##”），了解您选择的解决方案存在的一些缺陷： [http:// www.sommarskog.se/share_data.html](http://www.sommarskog.se/share_data.html)

简短的回答是没有*好的*方法可以做到这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T18:27:11.617

如何将动态查询输出到临时表。然后你可以像任何其他表一样引用输出。

动态查询：

```
SELECT x,y,z 
INTO #MyTempTable
... 
```

最终查询：

```
SELECT *
FROM TABLE
    JOIN #MyTempTable ON ... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T15:56:05.527

我得到了这个工作。我所做的是使用全局临时表。这样我就可以在多个`execute`语句中使用它，而不是使用普通的临时表。这样我也能够加入全局临时表。请记住为每个过程使用一个唯一的 id，这样您就可以知道您当前正在使用哪些行，因为这可以在多个过程中看到。这样我也可以在最后删除行（基于 id）。

# c# - 如何复制/克隆数据表

> ID：10129465
> 
> 赞同：3
> 
> 时间：2012-04-12T18:21:38.310
> 
> 标签：c#, datatable, copy, clone

我有一个将由用户修改的 DataTable。我想确定发生了什么变化并在数据库中保留记录。

我认为这样做的最佳方法是在进行任何更改之前复制该 DataTable，并在用户保存表单时验证更改的内容。

问题是无论我使用 myDataTable.Clone() 还是 myDataTable.Copy()，数据总是相同的。所以我猜他们只是在表之间创建引用。

你会怎么处理这个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T18:24:18.177

试试**[`DataSet.HasChanges`](http://msdn.microsoft.com/en-us/library/system.data.dataset.haschanges.aspx)**方法。这将告诉您数据集是否有任何更改，例如删除或添加的行、修改的行等。

你也可以打电话**[`DataSet.GetChanges`](http://msdn.microsoft.com/en-us/library/system.data.dataset.getchanges.aspx)**来看看有什么变化。此方法将返回更改的副本。

例如，你可以说：

```
private void VerifyChanges(DataSet dataSet)
{
    if(!dataSet.HasChanges(DataRowState.Modified)) return;
    var changedDataSet = dataSet.GetChanges(DataRowState.Modified);

    //... do the tracking or whatever else you want here.        
} 
```

或者，如果您不想获取所有 DataSet 更改，而只想*从特定表*中进行更改：

```
private void VerifyChanges(DataSet dataSet, string tableName)
{
    if(!dataSet.HasChanges(DataRowState.Modified)) return;
    var changedTable = dataSet
        .Tables[tableName]
        .GetChanges(DataRowState.Modified);

    //... do the tracking or whatever else you want here.        
} 
```

最后，要从修改后的 DataSet 中提取原始值，您可以编写以下代码：

```
row[columnIndex, DataRowVersion.Original] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T18:24:37.700

`serialize`IMO，快速而肮脏的方法是`deserialize`使用DataTable。如果您决定使用 xml 序列化，请务必先将 DataTable 嵌套在 DataSet 中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T18:32:04.690

考虑使用[DataTable.GetChanges Method (DataRowState)](http://msdn.microsoft.com/en-us/library/5dxfaha8.aspx)。此方法返回一个新数据表，其中包含已更改的行。

例子：

```
DataTable changeTable = table.GetChanges(DataRowState.Modified); 
```

有了这个表，您可以将行与另一个 DataTable 进行逐一比较。

# java - 在构造函数退出之前访问最终变量

> ID：10129468
> 
> 赞同：3
> 
> 时间：2012-04-12T18:21:48.420
> 
> 标签：java, compiler-construction

好的，我一直在玩弄优秀的 JodaTime 库，试图实现一个通用案例零售/财政 (4-5-4) 日历。我已经找到了我公司的具体案例，但一般案例（主要是确定年初和闰年）是致命的；例如，有一组日期，两个会计年度（通常为 364 天）将在 1 个 ISO 年开始。

在确定年开始规则的过程中，我最终得到了一个抽象类和几个具体类来确定年开始，根据它们落在 ISO 闰日的哪一侧。

（精简）抽象类：

```
private static abstract class SimpleFiscalYearEndPattern implements FiscalYearEndPattern {

    protected final int leapYearCountOffset;
    protected final int doomsdayOffset;

    private final int startingDayOfWeek;
    private final int yearOffset;
    private final long millisFromEpochToFiscalYearStart;
    private final long millisElapsedToEpochDividedByTwo;

    /**
     * Restricted constructor
     * @param fiscalYear
     * @param startingOn
     * @param inFirstWeek
     */
    protected SimpleFiscalYearEndPattern(final int fiscalYear, final LocalDate startingOn, final MonthDay inFirstWeek) {
        this.yearOffset = fiscalYear - startingOn.getYear();
        this.doomsdayOffset = getDoomsdayOffset(inFirstWeek);
        this.startingDayOfWeek = startingOn.getDayOfWeek();

        final int startingDoomsday = getDoomsdayOffset(new MonthDay(startingOn, REFERENCE_CHRONOLOGY));
        // If the starting doomsday is a later day-of-week, it needs to become negative.
        this.leapYearCountOffset = calculateLeapYearCountOffset(startingDoomsday : doomsdayOffset, doomsdayOffset);

        final int leapYearsBefore = getPreviousLeapYears(fiscalYearBeforeEpoch);
    }
} 
```

（缩减）具体课程（适用于 1/7 - 2/28 范围内的日期）：

```
private static final class BeforeLeapYearEndPattern extends SimpleFiscalYearEndPattern {

    private static final int FIRST_YEAR_LEAP_YEAR_OFFSET = -1;

    private BeforeLeapYearEndPattern(final int fiscalYear, final LocalDate startingOn, final MonthDay onOrBefore) {
        super(fiscalYear, startingOn, onOrBefore);
    }

    public static final BeforeLeapYearEndPattern create(final int fiscalYear, final LocalDate startingOn, final MonthDay onOrBefore) {
        return new BeforeLeapYearEndPattern(fiscalYear, startingOn, onOrBefore);
    }

    /* (non-Javadoc)
     * @see ext.site.time.chrono.FiscalYearEndPatternBuilder.SimpleFiscalYearEndPattern#getPreviousLeapYears(int)
     */
    @Override
    protected int getPreviousLeapYears(final int isoYear) {
        // Formula gets count of leap years, including current, so subtract a year first.
        final int previousYear = isoYear - 1;
        // If the doomsday offset is -1, then the first year is a leap year.
        return (previousYear + leapYearCountOffset + (previousYear / 4) - (previousYear / 100) + (previousYear / 400)) / 7 + (leapYearCountOffset == FIRST_YEAR_LEAP_YEAR_OFFSET ? 1 : 0);
    } 
```

如果您注意到，我使用`leapYearCountOffset`了在抽象超类 in 中定义（作为最终变量）的 ，`getPreviousLeapYears()`然后从超类构造函数中调用它。我不想在超类构造函数中重复这个公式——它对于 3/1-12/31 范围内的日期是不同的；我也不想将实例变量放在具体的子类中 - 其他计算仍然需要`leapYearCountOffset`。

**问题是：**`leapYearCountOffset`从构造函数调用（子类）方法时的状态是什么？它是否以任何方式得到保证，或者编译器会随心所欲地改变它？我怎么能测试它来找出答案呢？我已经知道编译器可以自由地重新安排一些语句，但是（可能吗？）这会发生在这里吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T18:26:11.100

变量的保证之一`final`是编译器不会让您在分配它们之前访问它们。所以，如果它编译（它应该），你很高兴！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-12T18:26:22.417

由于在分配`getPreviousLeapYears`后调用，将被正确初始化并看到正确的值。`leapYearCountOffset``leapYearCountOffset``getPreviousLeapYears`

* * *

Java 留下了确保`final`在构造函数期间调用的代码访问的变量在首次访问之前正确初始化的负担。如果未正确初始化，在构造函数期间调用的代码将看到该字段类型的零值。

该程序

```
public class Foo {
  protected final int x;
  Foo() {
    foo();
    this.x = 1;
    foo();
  }
  void foo() { System.out.println(this.x); }
  public static void main(String[] argv) { new Foo(); }
} 
```

印刷

```
0
1 
```

因为`x`在第一次调用时没有初始化`foo`，但如上所述，你没有这个问题。

* * *

JLS 说*在构造函数*中每次使用 final 都必须在初始化之后，但对其他方法不做这样的保证。考虑

```
abstract class C {
  public final int x;

  C() {
    this.x = f();
  }

  abstract int f();
} 
```

对于确保`x`在每次使用之前初始化的语言，它需要确保不存在子类

```
class D extends C {
  int f() {
    return this.x;
  }
} 
```

这需要对类进行全局推理，这将与 Java 的动态链接不一致，并为语言规范增加很多复杂性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T18:37:54.297

虽然`leapYearCountOffset`保证有它的最终价值，但这仍然是一个等待发生的意外。该方法`getPreviousLeapYears`在子类初始化开始之前执行，因此子类中的任何变量都将具有其默认值（0 或 null）。

现在没有危险，但是如果有人进来改变`BeforeLeapYearEndPattern`了，也许通过添加一个新的`final`实例变量，然后使用它`getPreviousLeapYears`，你会受到伤害。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-12T18:48:14.163

看起来这个问题是由线程内和线程间语义之间的混淆引起的。

只要您在单个线程中运行有问题的代码，一切都会按您的预期工作：代码重新排序不会有明显的影响。

`final`字段也是如此。`final`字段为并发访问提供了额外的保证，这些保证只有在构造函数完成后才会生效。这就是为什么不建议`final`在构造函数完成之前让其他线程可以访问字段的原因。但只要您不尝试从其他线程访问有问题的字段，这并不重要。

但是，我同意从超类的构造函数调用子类方法是一种不好的做法，因为此时没有初始化子类字段。

# jquery - 使用 Jquery 预先检查

> ID：10129469
> 
> 赞同：1
> 
> 时间：2012-04-12T18:21:49.643
> 
> 标签：jquery

需要你的一点帮助。我正在检查元素在哪里。首先 if 语句正在工作，但 else if 不是......我什至尝试过这样的事情，但它不起作用：

```
else if(($('.current').prev().hasClass('green')){
    alert('Green is Before the current Picture');
     } 
```

我想做到这一点：如果绿色在“当前”类之前，则警报“绿色在当前图片之前”。有人可以帮我吗？谢谢！

这里是[小提琴。](http://jsfiddle.net/zresC/)

我有这个代码：

```
 var $green=$('.green:not(:nth-child(6))');

$('.greencontroll').click(function(){

  if($green.next($('.current').length)){
   alert('Green is After the current Picture');
}

  else if($green.prev($('.current').length)){
      alert('Green is Before the current Picture');
      } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T18:27:12.563

假设元素是兄弟元素：

```
var $elements = $('.current').siblings().andSelf();

var curIndex = $elements.index(".current");
var greenIndex = $elements.index(".green");

if(curIndex > greenIndex){
   // before
} 
```

您的代码的问题在于，它`prev`只是在元素之前立即获取同级，而不是所有先前的同级。

# perl - Perl：SNMP - 通配符 OID

> ID：10129476
> 
> 赞同：0
> 
> 时间：2012-04-12T18:22:34.357
> 
> 标签：perl, snmp, oid

我有一个监视任何启用 SNMP 的服务的 Perl 脚本。

它的工作方式是我有一个包含多个服务的配置文件，每个服务都有一个要收集的指标列表。

例子：

```
[switch]
switch_stuff1 = 1.3.6.1.2.1.7.1.0
switch_stuff2 = 1.3.6.1.2.1.7.4.0
switch_stuff3 = 1.3.6.1.2.1.6.2.0
switch_stuff4 = 1.3.6.1.2.1.6.3.0
switch_stuff5 = 1.3.6.1.2.1.6.5.0

[router]
router_stuff1 = 1.3.6.1.2.1.6.8.0
router_stuff2 = 1.3.6.1.2.1.6.8.0
router_stuff3 = 1.3.6.1.2.1.6.9.0

[database]
db_stuff1 = 1.3.6.1.2.1.6.4.0
db_stuff2 = 1.3.6.1.2.1.6.5.0 
```

该脚本将遍历配置文件，获取所有指标的信息并将输出写入 CSV 文件。

现在，我需要帮助。

我被要求实现允许在 SNMP 路径中使用通配符进行收集的逻辑。所以我的配置文件现在需要如下所示：

```
[switch]
switch_stuff1 = 1.5.1.6.*
switch_stuff2 = 1.45.*.12 
```

因此，当收集发生时，它会以某种方式循环如下：

```
 switch_stuff1

1.5.1.6.0 – found, continue
1.5.1.6.1 – found, continue
1.5.1.6.2 – not found, stop

      switch_stuff2           

1.45.0.12 – found, continue
1.45.1.12 – found, continue
1.45.2.12 – found, continue
1.45.3.12 – not found, stop 
```

我目前正在使用 Net::SNMP 库：

[http://metacpan.org/pod/Net::SNMP](http://metacpan.org/pod/Net%3a%3aSNMP)

这可能吗？我正在考虑通过 get_entries 或 get_table 方法以某种方式模拟“snmpwalk”，但我不太确定这是否可行。

如果有人可以提供帮助或至少为我指明正确的方向，将不胜感激。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T18:42:20.880

对于像你这样的条目，只要你得到数据，`switch_stuff1 = 1.5.1.6.*`你就可以简单地发送第一个请求，然后循环通过。`get_next_request`

然而，像`switch_stuff2 = 1.45.*.12`这样的配置不再那么简单了。你不能使用`get_next_request`，你必须自己迭代可能的值。问题是数字“通常”是连续的，但并不总是连续的，在后一种情况下，系统尝试所有可能的数字会带来很大压力。至少如果你真的需要这样做，那么我建议以某种方式缓存存在的 OID，而不是每次收集数据时都扫描它们。

# java - 如何处理数据库连接？

> ID：10129485
> 
> 赞同：0
> 
> 时间：2012-04-12T18:23:09.423
> 
> 标签：java, sql-server-2005, jdbc, hornetq

我正在使用 SqlServer Database 2005 并正在使用连接池，我在 Tomcat Context.xml 文件中编写了这样的代码

```
<Resource
        name="jdbc/tm4u"
        auth="Container"
        type="javax.sql.DataSource"
        driverClassName="com.microsoft.sqlserver.jdbc.SQLServerDriver"
        url="jdbc:sqlserver://192.168.1.230:1433;databaseName=AMS2;User=XX;Password=XXXXX;selectMethod=cursor"
    username="sa"
    password="t4u@2011"
    maxActive="200"
    maxIdle="10"
    maxWait="10000"
        /> 
The above configuration file am open 200 connection .. but in database it will opened 1500+ connections ... please help me how to handle. 
```

# opengl-es - 来自 http://nehe.gamedev.net/ 的教程，是可编程管道吗？

> ID：10129487
> 
> 赞同：-1
> 
> 时间：2012-04-12T18:23:16.797
> 
> 标签：opengl-es, opengl-es-2.0

[http://nehe.gamedev.net/](http://nehe.gamedev.net/)上的OpenGL 教程很有趣，但我想学习 openGL ES 2.0 我的意思是可编程管道，请任何人说我是可编程管道教程还是固定线路。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T18:26:51.777

我相信所有标记为*Legacy Tutorials*的教程（看起来约占内容的 95%），都是固定的管道教程。我建议寻找其他地方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T08:51:51.277

除此之外，

通过查找矩阵操作 API，您可以很容易地识别固定功能的 OpenGL 代码。例如：glPushMatrix、glIdentity、glRotate 等。

上面提到的教程集确实使用了这些 API。

# javascript - 通过指定的时间间隔填充页面的最有效方法？

> ID：10129488
> 
> 赞同：0
> 
> 时间：2012-04-12T18:23:20.327
> 
> 标签：javascript, jquery, html

我会直截了当。

布局.html

```
<table>
 <tr>
  <td><div id="corner1"></div><div id="c11"></div><div id="c12"></div></td>
  <td><div id="corner2"></div><div id="c21"></div><div id="c22"></div></td>
 </tr>
 <tr>
  <td><div id="corner3"></div><div id="c31"></div><div id="c32"></div></td>
  <td><div id="corner4"></div><div id="c41"></div><div id="c42"></div></td>
 </tr>
</table>
<input type="hidden" value="12" name="tableid" /> 
```

main.js

```
populateID = setInterval(Populate, 1000);
function Populate() {
 $.ajax({
  url: 'jquery/populate.php',
  data: 'tableid=' + $("#tableid").val(),
  success: function(data) {
   fillem(data);
  }
 });
}

function fillem(data) {
 if(data.c1) {
  $("#c11").html(data.c1);
  $("#c12").html(data.filler);
 }else{
  $("#c11").html(data.filler);
 }
 if(data.c2) {
  $("#c21").html(data.c2);
  $("#c22").html(data.filler);
 }else{
  $("#c21").html(data.filler);
 }
 if(data.c3) {
  $("#c31").html(data.c3);
  $("#c32").html(data.filler);
 }else{
  $("#c31").html(data.filler);
 }
 if(data.c4) {
  $("#c41").html(data.c4);
  $("#c42").html(data.filler);
 }else{
  $("#c41").html(data.filler);
 }

 if(data.timer) {
  $("#timer").html(data.timer);
 }else{
  $("#timer").html("");
 }

 if(data.corner) {
  $("#corner" + data.corner).html("ACTIVE");
 }
} 
```

我很确定这可以以更有效的方式完成，我不在乎它是否涉及更改 DOM 结构。

例如，当没有两个同时使用时，总是有 4 个“角”div 听起来确实很糟糕。而且由于 ajax 响应会根据每个请求而改变，有时 div 在填充新数据时会快速“闪烁”，这也很烦人。

谢谢阅读。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T18:27:41.143

将你的转换`data.c#`为数组，所以它是`data.c[1]`，然后你使用一个简单的`for()`循环来只做一个单一的输出块。

```
for (i = 1; i <= 4; i++) {
   if(data.c[i]) {
       $('#c' + i + '1').html(data.c[i]);
       $('#c' + i + '2').html(data.filler);
   }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T18:51:47.913

下面是一些小的修改。试着告诉我，

**注意：** `data['c'+i]`将评估为与 data.c1、data.c2、data.c3 和 data.c4 相同的内容

```
function fillem(data) {
   for (var i = 1; i <= 4; i++) {
       if (data['c'+i]){
          $('#c'+i+'1').html(data['c'+i]);
          $('#c'+i+'2').html(data['filler']);
       } else {
          $('#c'+i+'1').html(data['filler']);
       }
   }

 if(data.timer) {
  $("#timer").html(data.timer);
 }else{
  $("#timer").html("");
 }

 if(data.corner) {
  $("#corner" + data.corner).html("ACTIVE");
 }
} 
```

# java - 为什么构造函数值不继承属性限制

> ID：10129493
> 
> 赞同：0
> 
> 时间：2012-04-12T18:23:43.903
> 
> 标签：java

为什么 LifeCycle 的属性定义不够，为什么我的构造函数还需要定义为 ArrayList()？即便如此，为什么我的 ArrayList 不继承`<LifeCycle>`属性定义的限制呢？我不喜欢在两个地方都设置它，看起来很多余。

```
class Search {
    private Collection<LifeCycle> lifeCycleCollection;

    public Search() {
        this.lifeCycleCollection = new ArrayList<LifeCycle>();
    }
... 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T18:27:00.543

Collection 是一个接口，当您创建实例时，您实际上是在指定实现。

至于您关于泛型的问题，与 Java 7 一样，您也可以编写

```
lifeCycleCollection = new ArrayList<>(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-12T18:44:09.850

[Alessio 的回答](https://stackoverflow.com/a/10129543/348975)是正确的。您还可以通过移动构造函数中的内容将代码收紧一行。

```
class Search {
    private Collection<LifeCycle> lifeCycleCollection = new ArrayList<>();

    public Search() {
    } 
```

# jquery - 调整窗口大小时保持表格纵横比

> ID：10129495
> 
> 赞同：0
> 
> 时间：2012-04-12T18:23:47.117
> 
> 标签：jquery, html, css, resize, fullcalendar

这个问题我有一段时间了。。

我已经为我正在使用的东西创建了一个粗略的“模型”。如果你看一下[jsfiddle](http://jsfiddle.net/URwpA/10/)，你会看到“日历”（表）没有包含在它的父 div 中（“橙色”div）

**我需要做什么，以便每次调整窗口大小时表格始终包含在其父元素中？**

**它必须在不创建滚动条的情况下做到这一点，同时与父元素的顶部、左侧、底部和右侧保持 10px 的距离？**

[http://jsfiddle.net/URwpA/10/](http://jsfiddle.net/URwpA/10/)

非常感谢所有帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T19:14:09.570

[http://jsfiddle.net/URwpA/26/](http://jsfiddle.net/URwpA/26/)怎么样

基本上，从 HTML 中删除所有以像素为单位的宽度和高度，并添加`td, th {height:16%}`到 CSS 中。`style`（我还通过从 中删除属性进行了一些清理`<div class="held">`，因为它与 CSS 块中的样式发生冲突。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T18:53:16.517

首先，您的 css 引用了 hold ( `#held`) 的 id，而它实际上应该是一个类 ( `.held`)

另一件事是通过使用`position:absolute`您`hold`从流上下文中删除 div，这就是橙色背景没有延伸到底部的原因。把它拿走，它就可以工作了：http: [//jsfiddle.net/DigitalBiscuits/URwpA/22/](http://jsfiddle.net/DigitalBiscuits/URwpA/22/)

这是你要找的吗？

# meteor - 错误启动 todos 示例

> ID：10129496
> 
> 赞同：5
> 
> 时间：2012-04-12T18:23:51.010
> 
> 标签：meteor

菜鸟在这里。在 linux 上，我安装了流星，尝试加载“todos”应用程序，出现此错误。它似乎与文件系统监控有关？我错过了包裹或烫发吗？我用 sudo 安装了流星，但我安装了“todos”作为我的基本用户。

提前致谢！

```
~$ mkdir meteorDev
~$ cd meteorDev/
~/meteorDev$ meteor create --example todos
todos: created.

To run your new app:
   cd todos
   meteor
~/meteorDev$ cd todos/
~/meteorDev/todos$ meteor
[[[[[ ~/meteorDev/todos ]]]]]

Running on: http://localhost:3000/

fs.js:663
    throw errnoException(errno, 'watch');
          ^
Error: watch EMFILE
    at errnoException (fs.js:636:11)
    at FSWatcher.start (fs.js:663:11)
    at Object.watch (fs.js:691:11)
    at [object Object]._scan (/usr/lib/meteor/app/meteor/run.js:322:12)
    at Array.forEach (native)
    at Function.<anonymous> (/usr/lib/meteor/app/lib/third/underscore.js:76:11)
    at new <anonymous> (/usr/lib/meteor/app/meteor/run.js:264:5)
    at /usr/lib/meteor/app/meteor/run.js:455:17
    at /usr/lib/meteor/app/meteor/run.js:512:5
    at /usr/lib/meteor/app/meteor/run.js:570:9 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-12T23:37:19.053

Meteor 使用 node 的“fs.watch”命令，该命令使用 linux 的 inotify API。您的系统可能没有 inotify 支持，或者它已关闭。试试这个看看你是否启用了inotify：

```
 cat /proc/sys/fs/inotify/max_user_instances 
```

如果该文件存在并且其中的数字很小，请**以 root**身份尝试此操作以达到上限：

```
 echo 8192 > /proc/sys/fs/inotify/max_user_instances 
```

如果该文件不存在，则很可能您的系统不支持 inotify 或者它以某种方式关闭。

max_user_instances 的增加是暂时的，在重新启动后不会持续存在。使其永久化：

```
 echo fs.inotify.max_user_instances=8192 | sudo tee /etc/sysctl.d/10-inotify.conf && sudo sysctl -p 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T20:24:14.450

你有安装 MongoDB 吗？尝试在另一个 shell 中运行它。

```
mongod 
```

# mysql - PHP/MySQL - 如何从一列相对于另一列检索数据

> ID：10129498
> 
> 赞同：0
> 
> 时间：2012-04-12T18:23:56.873
> 
> 标签：mysql, sql, join

> **可能重复：**
> [跨两个表的 SQL SELECT](https://stackoverflow.com/questions/2519067/sql-select-across-two-tables)

我想用php和mysql建立一个小论坛。我有两张桌子：

论坛帖子：id（Primary_Key），user_id（Foreign_Key），文本

和

用户：id（Primary_key），用户名

现在我想列出所有论坛帖子以及我想显示作者的每个帖子。

我的尝试：

```
$mySQL_getPosts = mysql_query('SELECT * FROM forum_posts ORDER BY id ASC'); 
```

这当然给了我所有的帖子。但是如何与我的用户表建立连接？

最后，我想显示这样的帖子：

```
Username wrote: | Here goes the text from forum_posts 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T18:27:52.010

您需要做的是在 2 个表之间进行连接。在你的情况下，它会是这样的：

`SELECT f.text, u.username FROM forum_posts f JOIN user u ON (f.user_id = u.id)`

了解有关 SQL 的更多信息，尤其是联接。有许多类型的连接，你会偶然发现其中的一些。如果您尝试在 PHP + MySQL 中构建类似论坛的网站，您将编写的大多数查询将包含至少 1 个连接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T18:26:40.823

这是一个选项：

```
SELECT FP.id,U.Username
FROM forum_posts FP, users U 
WHERE FP.user_id = U.id ORDER BY id ASC 
```

我错过了什么吗？

但加入更好

[在 MySQL 查询中，为什么使用 join 而不是 where？](https://stackoverflow.com/questions/2241991/in-mysql-queries-why-use-join-instead-of-where)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-12T18:30:19.770

这就是 JOIN 命令派上用场的地方。即使没有关联用户，LEFT JOIN 也会从 forum_posts 获取记录。如果这不能发生，或者如果您不想发布匿名帖子，请删除 LEFT 部分。

`SELECT f.*, u.username FROM forum_posts AS f LEFT JOIN user AS u ON f.id = u.id ORDER BY id ASC`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-12T18:34:13.267

您可以使用基本的内部连接将两个表链接在一起，如下所示：

> ```
> SELECT username, text 
> FROM forum_posts 
> INNER JOIN user ON forum_posts.user_id = user.id 
> ORDER BY id ASC 
> ```

**注意：** 最好只从表中选择所需的列而不是所有列。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-12T18:38:19.043

为了给出两个表之间的关系，你必须使用 mysql 连接。

**forum_posts** : id(Primary_Key),user_id(Foreign_Key),text[主表]

**user** : id(Primary_key), username[通过主表id连接这个表]

```
$sql_query_string = "Select fp.* from forum_posts as fp
>                      left join user as u on (u.id = fp.user_id)
>                      order by fp.id asc";
> 
> $result = mysql_query($sql_query_string);
> 
> While($data = mysql_fetch_row($result)){
>     echo "<pre>";print_r($result);"</pre>"; } 
```

此查询将有助于您显示作者

# grails - Grails - 包中所有控制器的 URL 重写

> ID：10129501
> 
> 赞同：1
> 
> 时间：2012-04-12T18:24:09.300
> 
> 标签：grails, url-rewriting

我想知道是否可以为特定包中的所有控制器重写 URL。我需要将“admin”包中所有控制器的 URL 更改为“/admin/$controller”而不是“/$controller”，因此它可以由 Spring Security 保护。非常感谢。

问候，洛伊扎

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-27T10:54:54.540

所以今天我根据[这篇文章](http://blog.overzealous.com/post/23304412431/grails-urlmappings-tricks)实现了解决方案：

```
// AppCtx - check the article above
for (controller in AppCtx.grailsApplication.controllerClasses) {
    def cName = controller.logicalPropertyName
    def packageName = controller.packageName

    if (packageName.contains(".admin") || packageName.contains(".springsecurity")) {
        "/admin/${cName}/$action?/$id?"(controller: cName) {
            constraints {
            }
        }
    } else {
        "/${cName}/$action?/$id?"(controller: cName) {
            constraints {
                // apply constraints here
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T23:17:49.640

这不是绝对必要的。您可以将 @Secured 注释添加到每个管理控制器：

```
@Secured(['ROLE_ADMIN'])
class AdminController1 { ... }

@Secured(['ROLE_ADMIN'])
class AdminController2 { ... } 
```

或者，如果您不使用注释，则可以将每个管理控制器直接映射到 Spring Security 配置：

```
/adminController1/**=ROLE_ADMIN
/adminController2/**=ROLE_ADMIN 
```

但是，如果您真的想将所有这些控制器放在 /admin/ URL 前缀下，我认为您可以通过添加手动引用每个管理控制器的映射来做到这一点：

```
"/admin/adminController1/$action?/$id?"(controller: "adminController1")
"/admin/adminController2/$action?/$id?"(controller: "adminController2") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T23:31:09.033

看看：[在 Grails 中创建管理部分的最佳方法](https://stackoverflow.com/questions/1133464/best-way-to-create-an-admin-section-in-grails)

但是在这种情况下，我总是建议将您的管理区域拆分为一个单独的 grails-embedded-plugin。在这里，您可以使用自定义类来发挥您的魔力`UrlMapping`。这将使您的主应用程序保持清洁。

# geolocation - socket.io：向一定地理距离内的客户端广播？

> ID：10129503
> 
> 赞同：0
> 
> 时间：2012-04-12T18:24:11.030
> 
> 标签：geolocation, coffeescript, socket.io, geospatial

“使用socket.io，我想将用户发送的消息仅广播给所有客户端的一个子集。该子集将位于用户发出消息的一定距离内（比如1公里）。看来我需要将类似这样的内容（http://stackoverflow.com/questions/27928/how-do-i-calculate-distance-between-two-latitude-longitude-points）添加到 [socket.on 'broadcast', （消息） ] 下面的代码部分（请注意这是咖啡脚本，取自 Shoaib Burq 的 geochat-example github repo (https://github.com/sabman/geochat-example)）。

现在包括里卡多的建议，用他的输入替换旧的 [socket.on 'broadcast', (message) ->] 部分（尽管我将“用户”更改为“记录”以与 server.coffee 代码的其余部分保持一致） ，以及末尾的 [find:] 部分。不过，出了点问题，我不确定它是否与 html 代码或咖啡脚本的更新有关。再次提前感谢..

代码仍然没有运行。包括里卡多的最新建议：

```
 socket.on 'broadcast', (message) ->
    # find the sender and extract it's position
    Character.find { clientId: socket.id }, (record) =>
        chat_data =
            user: record
            conversation: message
        [lat, lng] = record.geometry.coordinates
        # find everyone within a 1km square
        km = 1/111
         area = 
            type: 'Polygon'
            coordinates: [
               [lat - km, lng - km]
               [lat + km, lng - km]
               [lat + km, lng + km]
               [lat - km, lng + km]
            ]
        Character.find { within: area }, (record) ->
            // send message to each user

     socket.broadcast.send JSON.stringify(chat_data) 
```

我感觉问题可能出在“查找”部分。例如，李嘉图写道

```
 console.log ">> find #{JSON.stringify(attrs)}" 
```

但在原始代码中，这读起来是“=>”而不是“>>”：

```
 console.log "=> find #{JSON.stringify(attrs)}"

qs = require 'querystring'

find: (query, callback) ->
    console.log ">> find #{JSON.stringify(attrs)}"

    q = { operator: "or",  properties: attrs }
    url = lyr_config_characters.api_url
    key = lyr_config_characters.acl.get

    if query.id?
      url += "/#{attrs.id}?" + qs.stringify({ key })
    else if query.within?
      url += "/functions/within?" + qs.stringify({ key, input : query.within })
    else
      url += qs.stringify { key, input: q }

    req =
        method: "GET"
        uri: url
        headers: { "Content-Type": "application/json" }

    request req, (error, response, body) ->
        console.log error if error
        console.log "<< find #{body}"
        callback JSON.parse body ? '{}' 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T22:38:29.423

您使用的示例基于[spatialdb](http://spatialdb.com)，它的文档似乎非常不完整。

从外观上看，您需要使用几何对象查询用户，它将返回包含在其中的点（用户）：

```
socket.on 'broadcast', (message) ->
    # find the sender and extract it's position
    Character.find { clientId: socket.id }, (user) ->
        chat_data =
            user: user
            conversation: message
        [lat, lng] = user.geometry.coordinates
        # find everyone within a 1km square
        km = 1/111
        area = 
            type: 'Polygon'
            coordinates: [
               [lat - km, lng - km]
               [lat + km, lng - km]
               [lat + km, lng + km]
               [lat - km, lng + km]
            ]
        Character.find { within: area }, (users) ->
            // send message to each user 
```

您还需要修改`find`方法以使用`within`查询：

```
find: (attrs, callback) ->
    console.log "=> find #{JSON.stringify(attrs)}"
    q = { operator: "or",  properties: attrs }
    if _.contains(_.keys(attrs), "id")
      url = "#{lyr_config_characters.api_url}/#{attrs.id}?key=#{lyr_config_characters.acl.get}"
    else if _.contains(_.keys(attrs), "within")
      url = "#{lyr_config_characters.api_url}/functions/within?key=#{lyr_config_characters.acl.get}&input=#{encodeURIComponent(JSON.stringify(attrs.within))}"
    else
      url = "#{lyr_config_characters.api_url}?key=#{lyr_config_characters.acl.get}&input=#{encodeURIComponent(JSON.stringify(q))}"
    req = { method: "GET", uri: url, headers: {"Content-Type": "application/json"} } 
```

（为了理智，我会重写）

```
qs = require 'querystring'

find: (query, callback) ->
    console.log ">> find #{JSON.stringify(attrs)}"

    q = { operator: "or",  properties: attrs }
    url = lyr_config_characters.api_url
    key = lyr_config_characters.acl.get

    if query.id?
      url += "/#{attrs.id}?" + qs.stringify({ key })
    else if query.within?
      url += "/functions/within?" + qs.stringify({ key, input : query.within })
    else
      url += qs.stringify { key, input: q }

    req =
        method: "GET"
        uri: url
        headers: { "Content-Type": "application/json" }

    request req, (error, response, body) ->
        console.log error if error
        console.log "<< find #{body}"
        callback JSON.parse body ? '{}' 
```

# windows - 安装成功但无法识别节点

> ID：10129505
> 
> 赞同：24
> 
> 时间：2012-04-12T18:24:17.377
> 
> 标签：windows, node.js, path

我尝试在全新安装的*Windows 7上运行**nodejs*。这就是我所做的：

 *1.  使用 windows 安装程序安装节点

2.  确保文件被提取到`C:\Program Files (x86)\nodejs\`

3.  确保我的 Path 环境变量包含`C:\Program Files (x86)\nodejs\`

4.  打开命令提示符并运行`node -v`

这给了我`'node is not a recognized ...'`- 信息。

*我在这里想念什么？*

* * *

**更新** 运行`echo %path%`给了我一个不包括的目录列表`C:\Program Files (x86)\nodejs\`，即使查看系统属性中的“环境变量”选项卡将其显示在路径下。那很奇怪。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-04-12T18:48:06.210

更新：根据 Timos 的评论，一个更快的解决方案：“重启 explorer.exe 就足够了，你可以在任务管理器中停止它并重新启动它”

通过重新启动计算机解决了这个问题。

显然，使用 Node 安装程序会设置路径，使其在系统属性下可见，但在重新启动计算机之前不会在命令提示符中（运行 echo %path%）。不确定这是 Windows 还是节点安装程序的问题。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2014-05-07T18:13:18.763

*蒂莫*的说法是准确的。为了完整...

重新开始`explore.exe`，`Ctrl`++`Shift`打开`Esc``Task Manager`

然后执行文件>新任务（运行）>输入：`explorer.exe`>输入>瞧！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-12-25T11:21:08.977

如果 node 是通过**nvm**安装的。

然后运行命令很重要`nvm use <installed version>`。

而且，它有望在那之后工作。*

# python - Mongo 和正则表达式

> ID：10129508
> 
> 赞同：0
> 
> 时间：2012-04-12T18:24:34.480
> 
> 标签：python, regex, mongodb

我刚开始使用 mongo 和 python 并坚持让这个查询正常运行：

```
#get a database
db = connection.test

#get a colleciton
family = db.family

#get all names that begin with E
namesWithE = family.find({'name' : 'E/^'})
print nameWithE.count() 
```

我知道有两条记录将匹配此查询，但我的计数一直为 0

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T18:35:02.510

```
namesWithE = family.find({name : {$regex : 'E.*'}}) 
```

--> 这对我有用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-22T10:14:09.070

您也可以通过以下方式直接执行此操作

```
 namesWithE = family.find({'name' : /^E.*/}) 
```

Mongodb 将参数作为正则表达式，如果写在两者之间`/`，您还可以在这样的表达式之后添加不区分大小写等选项

```
 namesWithE = family.find({'name' : /^E.*/i}) 
```

现在，此表达式将返回集合中具有 name 字段且其值以***E***或***e开头的所有文档***

# php - 使用 PHP PDO 时我应该清理/过滤用户输入和输出吗？

> ID：10129514
> 
> 赞同：2
> 
> 时间：2012-04-12T18:25:06.520
> 
> 标签：php, mysql, pdo, sanitization, htmlspecialchars

我正在使用 PDO 来进行用户输入，但现在在显示我的 MySQL 数据库中的内容时我没有使用 PDO（仍然是 SQL 命令的老式方式......）。

将数据插入 MySQL 数据库时是否需要过滤/清理用户的输入？

并且，如果要走的路是清理输出，那么清理输出的最佳方法是什么？如果我只是使用`htmlspecialchars()`还是我还需要使用`strip_tags()`其他东西，我可以走了吗？

我正在使用占位符和准备好的语句。

谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-12T18:29:30.503

你在这里混淆了不同的消毒：

*   SQL sanatizing 数据插入到您的数据库。使用带有参数的准备好的查询，无需转义，PDO 在内部进行。如果您不使用准备好的查询，请使用它们。它是防弹的（据我所知）。

*   您从数据库中获取的数据并以 HTML 格式输出：在这里，您必须在将其打印给用户之前进行清理（以防止 XSS），可以使用或`htmlspecialchars()`， 具体取决于您要转义或删除的内容。`htmlentites()``strip_tags()`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-12T18:29:32.313

如果您正确使用参数化查询，那么不，您不必逃避。这实际上会将转义数据插入到数据库中，因此当您选择数据时，您会在稍后返回转义数据。

但是，仅仅切换到 PDO 并不**能使**您的代码更安全，例如，如果您这样做

```
$sth = $db->prepare("INSERT INTO sometable (x) VALUES ($_GET[x])"); 
```

仍然完全容易受到注入攻击，因为您没有使用占位符。

# firefox - 覆盖火狐组件

> ID：10129519
> 
> 赞同：0
> 
> 时间：2012-04-12T18:25:23.387
> 
> 标签：firefox, firefox-addon, components, overriding

我想知道是否有人知道如何覆盖 Firefox 组件。我试图覆盖`nsHelperAppDlg.js`使用清单文件，但它似乎没有工作。这就是我所做的：

> 覆盖资源：///components/nsHelperAppDlg.js myextension/components/nsHelperAppDlg.js

我也尝试直接从omni.ja 文件修改该文件，但这也不起作用。有任何想法吗？

PS 我使用的是 Firefox 10.0.2

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T15:26:17.203

使用清单，您只能覆盖`chrome://`URL。XPCOM 组件不是通过`chrome://`URL 而是通过它们的合同 ID 访问的（`@mozilla.org/helperapplauncherdialog;1`在这种情况下）。但我怀疑您并不想真正更换组件 - 这很少是一个好主意。您可能想要覆盖或覆盖“未知文件类型”对话框。此对话框的 URL 是`chrome://mozapps/content/downloads/unknownContentType.xul`，您可以覆盖它，如下所示：

> 覆盖 chrome://mozapps/content/downloads/unknownContentType.xul chrome://myextension/content/unknownContentType.xul

# javascript - Javascript 基本滑块

> ID：10129521
> 
> 赞同：0
> 
> 时间：2012-04-12T18:25:31.217
> 
> 标签：javascript, jquery, slider

基本上，我对 Javascript 没有任何经验。

我必须制作一个非常简单的图像滑块，但我无法让它自动显示下一张图像。

```
var currentItem = $('#project-list li').first();

function showNextSlide()
{
    if(currentItem.length == 0){
        currentItem = $('#project-list li').first();
    }

    console.log(currentItem);
    currentItem.css('display', 'none');
    currentItem = currentItem.next();
    currentItem.css('display', 'block');
} 
```

我的图像是这样加载的

```
<ul class="project-list" id="project-list">
    <li class="project current slide-1">
        <img src="http://lorempixel.com/600/300/animals/1" />
    </li>
    <li class="project slide-2">
        <img src="http://lorempixel.com/600/300/animals/2" />
    </li>
    <li class="project slide-3">
        <img src="http://lorempixel.com/600/300/animals/3" />
    </li>
    <li class="project slide-4">
        <img src="http://lorempixel.com/600/300/animals/4" />
    </li>
</ul> 
```

感谢任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T18:32:45.577

如果你想有自动滑动，你可以很容易地使用，`setInterval()`方法：

```
setInterval(function(){
    showNextSlide(); 
}, 2000); 
```

# android - 动态水平视图分页

> ID：10129526
> 
> 赞同：0
> 
> 时间：2012-04-12T18:25:52.430
> 
> 标签：android

喂！

我有一个显示用户个人资料（照片、年龄等）的活动。userprofiles 的计数是动态的（user_ids 来自我的网络服务）。

该活动将使用额外的 (user_id) 调用，并从网络加载所有数据。

现在我想做一个动态水平视图分页（视图计数是动态的）。例如，我使用[http://mobile.tutsplus.com/tutorials/android/android-user-interface-design-horizo​​ntal](http://mobile.tutsplus.com/tutorials/android/android-user-interface-design-horizontal-view-paging/) -view-paging / ，但他只切换布局。

我的代码：

```
public class MyPagerAdapter extends PagerAdapter{

    private int cnt;

    public void setCount(int cnt)
    {
        this.cnt = cnt;
    }

    public int getCount() {
        return cnt;
    }

    public Object instantiateItem(View collection, int position) {

        LayoutInflater inflater = (LayoutInflater) collection.getContext()
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);

        //View view = inflater.inflate(resId, null);

        View v = new View (MyPagerAdapter.this);
        ((ViewPager) collection).addView(view, 0);

        return view;
    }

    @Override
    public void destroyItem(View arg0, int arg1, Object arg2) {
        ((ViewPager) arg0).removeView((View) arg2);

    }

    @Override
    public boolean isViewFromObject(View arg0, Object arg1) {
        return arg0 == ((View) arg1);

    }

    @Override
    public Parcelable saveState() {
        return null;
    }

} 
```

请帮忙

PS：我也使用Greendroid库，但是示例代码（https://github.com/cyrilmottier/GreenDroid/blob/master/GDcatalog/src/com/cyrilmottier/android/gdcatalog/PagedViewActivity.java）比较难理解

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T19:15:18.883

我建议您从以下适配器开始：

```
private class PhotoSwipeAdapter extends PagedAdapter {

        @Override
        public int getCount() {
            return PAGE_COUNT;
        }

        @Override
        public Object getItem(int position) {
            return null;
        }

        @Override
        public long getItemId(int position) {
            return 0;
        }

        public View getView(int position, View convertView, ViewGroup parent) {
            if (convertView == null) {
                convertView = getLayoutInflater().inflate(R.layout.paged_view_item, parent, false);
            }

            ((TextView) convertView).setText(Integer.toString(position));

            return convertView;
        }

    } 
```

它更像是您需要的那个。就像您看到 getView 方法返回当前页面的特定视图一样。你可以用你喜欢的东西填满它。在上面的示例中，它是一个布局文件。您还可以根据代码创建布局，但使用布局文件会更容易！

哦，最后确定这个答案。（没有人知道你发给我的教程，请添加所有资源，即使它们只是链接或更难！只有你添加所有我们可以帮助你最好的东西） - >你遵循的教程不使用GreenDroid库，本教程使用 Androids 兼容库。GreenDroid 有一个额外版本的 PageAdapter（如果我错了，请纠正我）。您应该始终关注并使用示例应用程序，您可以找到您使用的特定库。阅读教程中的所有详细信息也很重要 -> 页面显示“水平视图分页基于仅适用于 Android 兼容性包 v4，修订版 3 的 API；这些 API 目前在标准 Android SDK 中不可用。”

# matlab - 如何从一个向量中获取不在另一个向量中的元素

> ID：10129533
> 
> 赞同：1
> 
> 时间：2012-04-12T18:26:23.410
> 
> 标签：matlab

我知道这很简单，但很难找到合适的功能。我有一个向量`a = [1 2 3 4]`和另一个向量`b = [1 2 6 8]`。我想返回所有`a`不在`b`. 在这种情况下，它将是`[3 4]`。你怎么做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T18:29:31.867

你试过[`setdiff`](http://www.mathworks.it/help/techdoc/ref/setdiff.html)吗？

```
c = setdiff(a,b) 
```

# android - Android 什么时候应该打开和关闭数据库连接？

> ID：10129542
> 
> 赞同：5
> 
> 时间：2012-04-12T18:26:58.173
> 
> 标签：android, database, database-connection

概述：在 onStart 和异步任务中打开数据库连接变得相当复杂。拥有全局可用的数据库连接是不好的做法吗？如果不好，有什么更好的方法？

详细信息：我有一个应用程序在几个活动中连接到 sqlite3 数据库。起初，我需要访问数据库的地方并不多，所以我只是在每次需要访问时打开和关闭。然后还有更多地方需要访问它，因此，正如另一个 Stack Overflow 问题所建议的那样，我开始在需要连接的活动的 onStart 方法中打开数据库连接，并在 onStop 方法中关闭它。

这一直很好，直到我开始在一些超过活动的异步任务中需要连接。由于活动的 onStop 方法已被调用并且连接已关闭，当异步任务尝试访问数据库时，它已失败。作为一种解决方案，我为在 onPreExecute 方法中打开并在 onPostExecute 方法中关闭的每个异步任务创建了单独的连接。

这导致了很多连接的打开和关闭，我想知道在应用程序上下文中创建全局可用的数据库连接是否是个好主意。如果我忘记关闭连接或应用程序遇到强制关闭，它肯定会清理大量代码并删除正在发生的任何未关闭的数据库异常。其他人尝试过这个/看到这种方法有什么问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T19:43:22.017

几周前我遇到了类似的问题。我使用了几个在 SQLite 数据库中具有持久性的类。

因为我想将活动与持久性分离，所以我为那些需要持久性的人创建了静态内部类（称为 Managers）。每次我实例化一个管理器时，都会创建一个数据库连接，并在使用管理器后显式关闭它。如果我有全局管理器来访问这些表，它们应该由于并发而同步，我不知道什么时候应该关闭这些数据库连接。所以我这样做了。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-12T20:19:31.987

您可以创建一个 BaseAsyncTask ，其 onPreExecute() 和 onPostExecute() 负责打开和关闭数据库连接。

AsyncTasks 可以扩展 BaseAsyncTask 调用 super.onPreExecute() 和 super.onPostExecute() 并在 doInBackground() 方法中执行数据的实际加载。

# windows-8 - 在 windows8 上以编程方式显示/隐藏键盘

> ID：10129550
> 
> 赞同：9
> 
> 时间：2012-04-12T18:27:16.797
> 
> 标签：windows-8, microsoft-metro

我正在尝试以编程方式在 Windows Metro 应用程序上显示/隐藏键盘。我最初认为我可以使用折叠的文本框并将焦点放在它上面。但似乎在此[链接](http://msdn.microsoft.com/en-us/library/windows/apps/hh465404.aspx)中已不允许这样做。该链接还讨论了实现此目的的 AutomationPeer 和 TextAutomationPeer。有没有关于如何使用这些的资源？

提前谢谢PK

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T20:11:26.107

从[这里](http://msdn.microsoft.com/en-us/library/windows/apps/hh465404.aspx)：

> UI 自动化是开发人员沟通特定 UI 元素是否可以接收文本输入的机制。您必须确保在您的应用程序中设置了适当的辅助功能属性，以便当焦点落在特定 UI 元素上时触摸键盘会知道出现。对于 Windows 提供的控件，这将自动完成，因为默认情况下会设置适当的辅助功能属性，但对于自定义控件和体验，您必须做额外的工作才能正确设置辅助功能属性；请记住，触摸键盘会对这些属性做出反应。
> 
> 如果您使用 C# 或 C++，请使用 AutomationPeer 对象，特别是 TextAutomationPeer。Windows 8 Release Preview 示例将演示如何在 C# 中执行此操作。请记住，除了具有适当的可访问性设置之外，控件还必须是可编辑的并且能够接收文本以使键盘调用。指出某些东西可以在它不能接收文本时接收文本会误导辅助工具和依赖它们的用户。
> 
> 为了启用用户驱动的调用，我们跟踪最后一个触摸事件的坐标，并将它们与当前具有焦点的元素的边界矩形的位置进行比较。如果该点包含在边界矩形内，则调用触摸键盘。

所以你*不能*以编程方式显示键盘。隐藏/显示键盘的适当方法是将控件设置为使用 AutomationPeer 对象接受输入。

从[这里开始](https://stackoverflow.com/questions/10714431/how-to-hide-on-edittext-soft-keyboard-windows-8-metro-application)，如果您将输入控件设置为只读，则它不会触发键盘，因此您可以使用它来控制键盘何时打开。

**编辑：**

实现文本自动化对等点时需要检查一些事项：

1.  确保您使用真实的触摸设备进行测试，或者使用带有基本触摸模式工具的模拟器进行测试。如果您不这样做，则自动化对等将不会激活，因为它仅由手写笔或触摸输入（而不是鼠标）激活。

2.  确保您的自定义控件实现`OnCreateAutomationPeer`如下内容：

    protected override AutomationPeer OnCreateAutomationPeer() { return new CustomControl2AutomationPeer(this); }

3.  确保您的自动化对等体实施`FrameworkElementAutomationPeer`，`ITextProvider`并且`IValueProvider`

[在此处](http://code.msdn.microsoft.com/windowsapps/Touch-keyboard-sample-43532fda)的示例中可以找到更多详细信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T09:24:26.050

只需放置一个 TextBox 并将其隐藏即可。设置`IsReadOnly = true`并将 TextBox 的选项卡索引设置为 0，因此键盘将专注于该 TextBox 但它意识到 TextBox 是只读的并且不会弹出。:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-25T01:24:13.577

[有](https://stackoverflow.com/questions/12149006/windows-8-how-to-dismiss-touch-keyboard)一个自定义 AutomationPeer 的例子，这似乎对这个问题有帮助。

创建程序化键盘逻辑的好指南。

霍普这可能会有所帮助

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-06-12T14:02:26.030

如果您添加一个文本框，然后在 Miscellaneos 下选择属性>，则有一个名为 PreventKeyboardDisplayOnProgrammaticFocus 的属性，请检查并设置文本框的焦点，如下所示：

```
 HiddenSearchBox.Focus(FocusState.Programmatic); 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2013-06-17T13:43:39.313

这是`PowerShell`我用来实现这一目标的小脚本。您可以在 C# 中通过获取服务并根据您的需要启动/停止它来执行相同的操作。

```
$serv = get-ciminstance win32_service -filter "name = 'TabletInputService'"
# if started stop it
if( $serv.State.equals("Running") ){
    Stop-Service TabletInputService
}
# if not set to disabled, disable it
# else set to auto and start
if( !$serv.StartMode.equals("Disabled") ){
    Set-Service TabletInputService -StartupType Disabled
    "TabletInputService Disabled"
}
else {
    Set-Service TabletInputService -StartupType Auto
    Start-Service TabletInputService
    "TabletInputService Enabled and Started"
} 
```

# java - 突出显示 JSF 数据表的行

> ID：10129551
> 
> 赞同：0
> 
> 时间：2012-04-12T18:27:21.653
> 
> 标签：java, javascript, jquery, jsf, jsf-2

当鼠标指针位于行上时，我想在 JSF 表中突出显示行。我找到了这个[教程](http://www.mkyong.com/jquery/how-to-highlight-table-row-record-on-hover-with-jquery/)。

我试图在这里实现这个例子：

```
<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"    
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets">
    <h:head>
        <ui:insert name="header">           
            <ui:include src="header.xhtml"/>         
        </ui:insert>
        <script type="text/javascript" src="resources/js/jquery-1.7.2.min.js"></script>
    </h:head>
    <h:body>

        <script type="text/javascript">

            $("tr").not(':first').hover(
              function () {
                $(this).css("background","yellow");
              }, 
              function () {
                $(this).css("background","");
              }
            );

        </script>

        <h1><img src="resources/css/images/icon.png" alt="NVIDIA.com" /> History Center</h1>
        <!-- layer for black background of the buttons -->
        <div id="toolbar" style="margin: 0 auto; width:1180px; height:30px; position:relative;  background-color:black">
            <!-- Include page Navigation -->
            <ui:insert name="Navigation">           
                <ui:include src="Navigation.xhtml"/>         
            </ui:insert>

        </div>  

        <div id="greenBand" class="ui-state-default ui-corner-allh" style="position:relative; top:35px; left:0px;"> 
            <h:graphicImage alt="Dashboard"  style="position:relative; top:-20px; left:9px;"  value="resources/images/logo_sessions.png" />
        </div>
        <div id="main" style="margin: 0 auto; width:1190px; height:700px; position:absolute;  background-color:transparent; top:105px">

            <div id="mainpage" style="margin: 0 auto; width:1190px; height:500px; position:absolute;  background-color:transparent; top:80px">

                <div id="settingsHashMap" style="width:750px; height:400px; position:absolute;  background-color:r; top:20px; left:1px">

                    <h:form id="form">

                        <!-- The sortable data table -->
                        <h:dataTable id="dataTable" value="#{SessionsController.dataList}" var="item">

                            <h:column>
                                <f:facet name="header">
                                    <h:commandLink value="Account Session ID" actionListener="#{SessionsController.sort}">
                                        <f:attribute name="sortField" value="Account Session ID" />
                                    </h:commandLink>
                                </f:facet>
                                <h:outputText value="#{item.aSessionID}" />
                            </h:column>
                            <h:column>
                                <f:facet name="header">
                                    <h:commandLink value="User ID" actionListener="#{SessionsController.sort}">
                                        <f:attribute name="sortField" value="User ID" />
                                    </h:commandLink>
                                </f:facet>
                                <h:outputText value="#{item.userID}" />
                            </h:column>
                            <h:column>
                                <f:facet name="header">
                                    <h:commandLink value="Activity Start Time" actionListener="#{SessionsController.sort}">
                                        <f:attribute name="sortField" value="Activity Start Time" />
                                    </h:commandLink>
                                </f:facet>
                                <h:outputText value="#{item.activityStart}" />
                            </h:column>
                            <h:column>
                                <f:facet name="header">
                                    <h:commandLink value="Activity End Time" actionListener="#{SessionsController.sort}">
                                        <f:attribute name="sortField" value="Activity End Time" />
                                    </h:commandLink>
                                </f:facet>
                                <h:outputText value="#{item.activityEnd}" />
                            </h:column>
                            <h:column>
                                <f:facet name="header">
                                    <h:commandLink value="Activity" actionListener="#{SessionsController.sort}">
                                        <f:attribute name="sortField" value="Activity" />
                                    </h:commandLink>
                                </f:facet>
                                <h:outputText value="#{item.activity}" />
                            </h:column>
                        </h:dataTable>

                        <!-- The paging buttons -->
                        <h:commandButton value="first" action="#{SessionsController.pageFirst}"
                                         disabled="#{SessionsController.firstRow == 0}" />
                        <h:commandButton value="prev" action="#{SessionsController.pagePrevious}"
                                         disabled="#{SessionsController.firstRow == 0}" />
                        <h:commandButton value="next" action="#{SessionsController.pageNext}"
                                         disabled="#{SessionsController.firstRow + SessionsController.rowsPerPage >= SessionsController.totalRows}" />
                        <h:commandButton value="last" action="#{SessionsController.pageLast}"
                                         disabled="#{SessionsController.firstRow + SessionsController.rowsPerPage >= SessionsController.totalRows}" />
                        <h:outputText value="Page #{SessionsController.currentPage} / #{SessionsController.totalPages}" />
                        <br />

                        <!-- The paging links -->
                        <ui:repeat value="#{SessionsController.pages}" var="page">
                            <h:commandLink value="#{page}" actionListener="#{SessionsController.page}"
                                           rendered="#{page != SessionsController.currentPage}" />
                            <h:outputText value="#{page}" escape="false"
                                          rendered="#{page == SessionsController.currentPage}" />
                        </ui:repeat>
                        <br />

                        <!-- Set rows per page -->
                        <h:outputLabel for="rowsPerPage" value="Rows per page" />
                        <h:inputText id="rowsPerPage" value="#{SessionsController.rowsPerPage}" size="3" maxlength="3" />
                        <h:commandButton value="Set" action="#{SessionsController.pageFirst}" />
                        <h:message for="rowsPerPage" errorStyle="color: red;" />

                    </h:form>

                </div>   

                <div id="settingsdiva" style="width:350px; height:400px; position:absolute;  background-color:transparent; top:20px; left:400px">

                </div>   

                <div id="settingsdivb" style="width:350px; height:400px; position:absolute;  background-color:transparent; top:20px; left:800px">

                </div>   
            </div>  
        </div>

    </h:body>
</html> 
```

没发生什么事。我想JavaScript必须能够工作。突出显示 JSF 表和普通 HTML 表中的行是否存在差异？也许问题出在 JQuery 的版本上？

最良好的祝愿

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T18:52:45.087

问题是，您的脚本在 DOM 完全加载*之前被执行。*

您可以将脚本原样放在页面底部，也可以在文档准备好时通过将其放入内部来调用它 `$(function() {})`：

```
<script type="text/javascript">
  $(function() {
    $("tr").not(':first').hover(
      function () {
        $(this).css("background","yellow");
      }, 
      function () {
        $(this).css("background","");
      }
    );
  })
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T11:49:19.347

您可以在 dataTable 中使用这些 js 操作调用：

```
onrowmouseover="this.style.cursor='default';this.style.backgroundColor='#F1F1F1';" 
onrowmouseout="this.style.backgroundColor='#{a4jSkin.tableBackgroundColor}'" 
```

# php - 依赖注入、PHP 和性能问题

> ID：10129553
> 
> 赞同：2
> 
> 时间：2012-04-12T18:27:31.400
> 
> 标签：php, dependency-injection, inversion-of-control, ioc-container

我已经看到许多框架在 php 中实现了 DI。但是，由于 php 中的所有对象都是在单个请求的生命周期内创建和销毁的，我想知道这会如何影响性能。

通常，您将在 DI 容器内定义许多对象。在 php 中，即使 Controller 不需要这些对象中的大部分，它们仍然会被实例化。此外，如果您在 php 文件中声明 DI 依赖项，您将加载所有引用的脚本。没有 DI，你只加载你需要的东西。

我已经看到一些框架允许惰性 DI，所以这应该有助于不需要的实例化。也许分割 DI 也是解决第一个问题的一种方法。那么，DI 是否会对我的 php 应用程序性能产生不利影响，我应该如何在 php 中实现 DI 以使其不会发生？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T18:44:07.127

> 通常，您将在 DI 容器内定义许多对象。在 php 中，即使 Controller 不需要这些对象中的大部分，它们仍然会被实例化。

好吧，还有延迟初始化，所以这些对象只是轻量级占位符，如果需要功能，只在需要时创建大对象。

> 那么，DI 是否会对我的 php 应用程序性能产生不利影响，我应该如何在 php 中实现 DI 以使其不会发生？

每一行代码都会影响应用程序的性能，所以无论你做什么，你都需要处理它。如果你真的关心性能，你应该从缓存应用程序的输出开始，这样除非你需要，否则不需要加载任何代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T09:40:30.223

你必须确定是否有问题，然后是什么问题。

*   您是否有需要大量资源和时间来构建的依赖项？

您可以使用惰性注入，例如：

```
class Class1 {
    /**
     * @Inject(lazy=true)
     * @var Class2
     */
    private $class2;

    public function doSomething() {
        // The dependency is loaded NOW
        return $this->class2->getSomethingElse();
    } 
```

（来自[PHP-DI 的](http://mnapoli.github.com/PHP-DI/)示例）

*   你的类中有太多的依赖项吗？

您必须问自己，依赖注入是否真的是问题所在。如果您在哪里创建新实例（或使用单例）而不是使用 DI，问题会消失吗？（我不这么认为）

IMO 性能考虑应明确指出 DI 是问题所在。应用程序中有很多部分可能出错。

# mod-rewrite - mod_rewrite root_dir no_controller

> ID：10129558
> 
> 赞同：0
> 
> 时间：2012-04-12T18:27:47.253
> 
> 标签：mod-rewrite, rootview

我知道这是一个非常受欢迎的话题，这是最接近我的要求，但它并没有解决我的问题：[如何在 php 中制定重写规则？](https://stackoverflow.com/questions/2506148/mod-rewrite-help)

我想`www.example.com/hello`实际加载这个脚本：`www.example.com/hello.php`，又名：`www.example.com/*`到`www.example.com/*.php`。

此外，我可能想传递 vars，但总是将第一个斜杠作为脚本名称，之后的任何斜杠作为 vars，例如
`www.example.com/world/africa`
，实际上会运行这个脚本：
`www.example.com/world.php?var1=africa`
或者
`www.example.com/beach/us/michigan`
会运行：
`www.example.com/beach.php?var1=us&var2=michigan`

我没有涉及控制器，并希望保持这种状态。我正在一个非常小的网站上工作，最多只有 10 页。

我已经尝试了很多次迭代，但最接近的工作是： `www.example.com/dir/hello`加载`www.example.com/hello.php` 但我不希望最终用户看到的 URL 中的那个额外目录。我用这条规则实现了这一点：
`RewriteRule ^dir/(.*)$ /$1`

我在 .htaccess 文件的顶部启用了这些，在 documentRoot

```
RewriteEngine on  
RewriteBase / 
```

我已经注释掉了条件。现在这些都不适合我（Apache2）。在下面的列表中，我尝试了许多带有正斜杠的变体，没有它们等等。有什么想法吗？

```
#RewriteCond %{REQUEST_FILENAME}.php -f  
#RewriteRule ^(.*)$  $1.php  
#RewriteRule .* $0.php  
#RewriteCond %{DOCUMENT_ROOT}/$0.php -f  
#RewriteRule .* /$0.php [L]  
#RewriteRule ^/([^.]+)$ /$1.php  
#RewriteRule ^([^/]+).*$ $1.php  
#Rewritstrong texteCond %{REQUEST_FILENAME} !-f  
#RewriteCond %{REQUEST_FILENAME} !-d  
#RewriteRule ^(.*)$ index.php?page=$1  
#RewriteRule !\.(js|ico|txt|gif|jpg|png|css)$ index.php?page=$1 [L,QSA]  
# this works but shows 'dir' in URI: RewriteRule ^dir/(.*)$ /$1.php  
#RewriteRule (^|/)([^.]+)$ $2.php [QSA]  
#RewriteRule (.*) /$1.php  
#RewriteRule ^([^/]+)/$ /$1.php 
```

# python - 如何从多个列表中找到最大值？

> ID：10129561
> 
> 赞同：3
> 
> 时间：2012-04-12T18:27:50.040
> 
> 标签：python, performance, list, numpy, max

我有多个相同大小的列表（或 numpy 数组），我想返回一个大小相同的数组，每个点都有最大值。

例如，

```
A = [[0,1,0,0,3,0],[1,0,0,2,0,3]]
B = [[1,0,0,0,0,4],[0,5,6,0,1,1]]
C = numpy.zeros_like(A)
for i in xrange(len(A)):
    for j in xrange(len(A[0])):
        C[i][j] = max(A[i][j],B[i][j]) 
```

结果是`C`=`[[1,1,0,0,3,4],[1,5,6,2,1,3]]`

这工作正常，但效率不高 - 特别是对于我拥有的数组大小和我需要比较的数组数量。我怎样才能更有效地做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-12T18:30:28.760

使用[`numpy.maximum`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.maximum.html)：

> `numpy.maximum(x1, x2[, out])`
> 数组元素的元素最大值。
> 
> 比较两个数组并返回一个包含元素最大值的新数组。如果要比较的元素之一是 nan，则返回该元素。如果两个元素都是 nans，则返回第一个。后一种区别对于复杂的 nan 很重要，复杂的 nan 被定义为实部或虚部中的至少一个是 nan。最终效果是传播了 nan。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-12T18:55:09.527

非 Numpy 解决方案

```
>>> [map(max,a,b,c) for a,b,c in zip(A,B,C)]
[[1, 1, 0, 0, 3, 4], [1, 5, 6, 2, 1, 3]]
>>> 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-04-03T19:29:35.247

如果您需要比较超过 2 个数组，您可以执行以下操作

```
from numpy import random, dstack

A = random.random((2,5))
B = random.random((2,5))
C = random.random((2,5))

stacked_arrays = dstack((A,B,C))
max_of_stack = stacked_arrays.max(2) 
```

[dstack](http://docs.scipy.org/doc/numpy/reference/generated/numpy.dstack.html)会将您的 2D 数组转换为 2D 数组的 3D 堆栈

括号内的 2`max`沿第 3 轴执行最大操作，这是`dstack`为我们创建的新轴

这将扩展到任意数量的相同大小的二维数组

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-12T18:31:21.847

就像是：

```
numpy_arrays = [A, B, C]

result = [max(elem) for elem in zip(*numpy_arrays)] 
```

?

# jquery - jQuery Droppable 忽略丢弃

> ID：10129565
> 
> 赞同：0
> 
> 时间：2012-04-12T18:27:58.370
> 
> 标签：jquery, draggable, droppable

当您将鼠标按下概述的单词时，会出现一个小的上下文菜单。拖动您想要的选择，然后释放。在当前配置中，它就像用户没有选择一样。如果我将 droppable 从 #del 更改为 #target，那么它可以工作，但显然你不能选择这种方式。

```
$(function() {
    $('#word').mousedown(function(ev, ui) {
        $("#target").slideDown(100);
    });    
    $('#word').mouseup(function(ev, ui) {
        $("#target").slideUp(100);
    });    
    $('#word').draggable({
        axis: 'y',
        containment: 'parent',
        revert: true, revertDuration: 100,
        stop: function() {
            $("#target").slideUp(100);
        }
    });
    $('#del').droppable({
        activeClass: 'over',
        drop: function() {
            var vote = alert("Delete action goes here");
        }
    });
});​ 
```

看看小提琴：http: [//jsfiddle.net/monsto/PF3ty/7/](http://jsfiddle.net/monsto/PF3ty/7/)

我错过了什么？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-04-13T19:07:33.160

弄清楚了...

简单地说，`draggable` `stop`参数阻碍`droppable` `drop`. 它在删除`stop`定义并将这些操作放入定义中后起作用`drop`。

# c# - 编译xml文件组件

> ID：10129568
> 
> 赞同：0
> 
> 时间：2012-04-12T18:28:09.077
> 
> 标签：c#, xml

我有一个简单的问题，是否有任何 C# 组件需要 xml 文件并像浏览器一样查看它。我的意思是该组件将编译 xml 文件并查看它，你有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T18:47:44.670

正如评论者所建议的那样，您可以选择[WebBrowser](http://msdn.microsoft.com/en-us/library/system.windows.controls.webbrowser.aspx)控件，它实际上是 Internet Explorer 引擎的 WPF 包装器。然而，这个组件往往有点重量级，因为它是一个完整的 HTML 引擎；如果您想要更顺畅地集成到您的应用程序中的轻量级组件，您可以使用第三方 XML 呈现组件，例如Code Project 上提供的[WPF XML 文档查看器控件。](http://www.codeproject.com/Articles/71069/A-Simple-WPF-XML-Document-Viewer-Control)

# string - Powershell：无法将“System.Object []”转换为“System.String”类型

> ID：10129571
> 
> 赞同：1
> 
> 时间：2012-04-12T18:28:30.493
> 
> 标签：string, powershell, event-log

当我运行以下代码时，我收到消息“无法将'System.Object []'转换为'System.String'类型”。如何将事件日志列表传递回 get-eventlog？

```
$EventLogList = Get-EventLog | Select-Object -ExpandProperty log
Get-evenlog -log $eventloglist 
```

> Get-EventLog：无法将“System.Object[]”转换为参数“LogName”所需的类型“System.String”。

感谢您的帮助

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T18:34:56.563

`LogName`是一个强制性参数`Get-EventLog`，您必须提供它，除非您尝试使用`-list`. 此外，它需要一个字符串，并且第二行给出错误，因为您正在传递一个数组。

除此之外，您还不清楚您要对这些语句做什么。

我想你想要类似的东西：

```
get-eventlog -list | %{ get-eventlog -log $_.log } 
```

# java - JME 3 + Swing，多个画布

> ID：10129576
> 
> 赞同：4
> 
> 时间：2012-04-12T18:28:41.180
> 
> 标签：java, swing, jmonkeyengine

我正在玩 JME3，目前面临以下问题：

当 LWJGL 画布包含在应用程序的多个选项卡中时，它们都不运行或仅运行 1 个。

这是一个例子：

**SwingCanvas.java：**

```
package jme3test.helloworld;

import java.awt.Dimension;
import javax.swing.JFrame;

import com.jme3.app.SimpleApplication;
import com.jme3.material.Material;
import com.jme3.math.ColorRGBA;
import com.jme3.scene.Geometry;
import com.jme3.scene.shape.Box;
import com.jme3.system.AppSettings;
import com.jme3.system.JmeCanvasContext;

public class SwingCanvas extends SimpleApplication {

    private void SwingCanvasTest() {
        SwingCanvas app = new SwingCanvas();
        app.start();
    }

    @Override
    public void simpleInitApp() {
        // activate windowed input behaviour
        flyCam.setDragToRotate(true);

        Box box = new Box(2, 2, 2);
        Geometry geom = new Geometry("Box", box);
        Material mat = new Material(assetManager, "Common/MatDefs/Misc/Unshaded.j3md");
        mat.setColor("Color", ColorRGBA.Blue);
        geom.setMaterial(mat);

        rootNode.attachChild(geom); // make the cube appear in the scene
    }

    public JmeCanvasContext createJMEcanvas(){
        AppSettings settings = new AppSettings(true);
        settings.setWidth(640);
        settings.setHeight(480);

        this.setSettings(settings);
        this.createCanvas(); // create canvas!

        JmeCanvasContext ctx = (JmeCanvasContext) this.getContext();
        ctx.setSystemListener(this);
        Dimension dim = new Dimension(640, 480);
        ctx.getCanvas().setPreferredSize(dim);

        return ctx;
    }

    public static void main(String[] args) {
        java.awt.EventQueue.invokeLater(new Runnable() {
            public void run() {

                SwingCanvas canvasApplication = new SwingCanvas();

                JFrame window = new JFrame("Swing Application");
                window.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

                window.add(canvasApplication.createJMEcanvas().getCanvas());
                window.pack();
                window.setVisible(true);

                canvasApplication.start();              
            }
        });
    }
} 
```

**SwingApplicationJME.java:**

```
package jme3test.helloworld;

import java.awt.BorderLayout;

import javax.swing.JButton;
import javax.swing.JComponent;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JSplitPane;
import javax.swing.JTabbedPane;
import javax.swing.SwingUtilities;

import com.jme3.system.JmeCanvasContext;

public class SwingApplicationJME {

    public SwingApplicationJME(){
        JFrame frame = new JFrame("JME Swing Application");
        frame.setSize(800, 600);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.add(getLayout());
        frame.setVisible(true);
    }

    private JComponent getLayout(){
        JTabbedPane tabbedPane = new JTabbedPane();

        SwingCanvas canvas1 = new SwingCanvas();
        SwingCanvas canvas2 = new SwingCanvas();
        SwingCanvas canvas3 = new SwingCanvas();

        JmeCanvasContext ctx1 = canvas1.createJMEcanvas();
        JmeCanvasContext ctx2 = canvas2.createJMEcanvas();
        JmeCanvasContext ctx3 = canvas3.createJMEcanvas();

        JPanel JME_panel_1 = new JPanel(new BorderLayout());
        JME_panel_1.add(new JButton("WEST"), BorderLayout.WEST);
        JME_panel_1.add(new JButton("NORTH"), BorderLayout.NORTH);
        JME_panel_1.add(new JButton("EAST"), BorderLayout.EAST);
        JME_panel_1.add(new JButton("SOUTH"), BorderLayout.SOUTH);
        JME_panel_1.add(ctx1.getCanvas(), BorderLayout.CENTER);

        JPanel JME_panel_2 = new JPanel();
        JSplitPane splitPaneVertical = new JSplitPane(JSplitPane.VERTICAL_SPLIT);
        splitPaneVertical.add(new JButton("Vertical Button"), JSplitPane.LEFT);
        splitPaneVertical.add(ctx2.getCanvas(), JSplitPane.RIGHT);
        JME_panel_2.add(splitPaneVertical);

        JPanel JME_panel_3 = new JPanel();
        JSplitPane splitPaneHorizontal = new JSplitPane(JSplitPane.HORIZONTAL_SPLIT);
        splitPaneHorizontal.add(new JButton("Horizontal Button"), JSplitPane.TOP);
        splitPaneHorizontal.add(ctx3.getCanvas(), JSplitPane.BOTTOM);
        JME_panel_3.add(splitPaneHorizontal);

        tabbedPane.add(JME_panel_1, "JME border panel");
        tabbedPane.add(JME_panel_2, "JME vetical split panel");
        tabbedPane.add(JME_panel_3, "JME horizontal split panel");

        return tabbedPane;
    }

    public static void main(String [] s){
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                SwingApplicationJME app = new SwingApplicationJME();
            }
        });
    }
} 
```

请有任何想法=）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-23T08:30:28.327

在 jmonkeyengine 文档上找到了一个方便的解决方案：[Monkey canvas + Swing GUI](http://jmonkeyengine.googlecode.com/svn/trunk/engine/src/test/jme3test/post/TestRenderToTexture.java)

这是代码引用：

```
final JMenuItem itemSwitchTab = new JMenuItem("Switch to tab #2");
    menuTortureMethods.add(itemSwitchTab);
    itemSwitchTab.addActionListener(new ActionListener(){
       public void actionPerformed(ActionEvent e){
           if (itemSwitchTab.getText().equals("Switch to tab #2")){
               canvasPanel1.remove(canvas);
               canvasPanel2.add(canvas, BorderLayout.CENTER);
               currentPanel = canvasPanel2;
               itemSwitchTab.setText("Switch to tab #1");
           }else if (itemSwitchTab.getText().equals("Switch to tab #1")){
               canvasPanel2.remove(canvas);
               canvasPanel1.add(canvas, BorderLayout.CENTER);
               currentPanel = canvasPanel1;
               itemSwitchTab.setText("Switch to tab #2");
           }
       } 
    }); 
```

我们只需要从一个选项卡中删除画布并添加到另一个选项卡。

# java - 如何制作一个对话框来插入名称？

> ID：10129580
> 
> 赞同：-1
> 
> 时间：2012-04-12T18:28:50.447
> 
> 标签：java, jframe, dialog

我正在制作一个游戏，我有两个标签，玩家 1 和玩家 2。在游戏开始之前，我希望弹出一个对话框，用户可以在其中插入玩家 1 和玩家 2 的名称。下面是我的代码。它应该将标签更改为插入的名称。

```
public void gui();
{

    BorderLayout borderlayout = new BorderLayout();

    JFrame frame = new JFrame("Games");
    frame.setVisible(true);
    frame.setSize(600,400);
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

    Panel p2 = new Panel();
    p2.setLayout(new BorderLayout());
    p2.add(new Label("Player 1"), BorderLayout.WEST); //player 1 label
    p2.add(new Label("Player 2"), BorderLayout.EAST); //player 2 label
    p2.add(new Label("Board GAME"), BorderLayout.NORTH );
    p2.setBackground(new Color(156, 93, 82));
    p2.setFont(new Font("sansserif", Font.BOLD, 18));
    frame.add(p2);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T18:33:07.607

您可以使用 cass 轻松实现`JOptionPane`：

```
String p1name = JOptionPane.showInputDialog(frame,"Please enter player 1 name","Specify name",JOptionPane.PLAIN_MESSAGE,); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T19:12:44.810

您需要先分配您`JLabels`的变量：

```
JLabel player1Lbl = new JLabel("Player 1");
p2.add(player1Lbl, BorderLayout.WEST); 
```

然后使用 JOptionPane 从播放器获取文本

```
String player1Name = JOptionPane.showInputDialog("Player 1 enter your name"); 
```

然后设置标签

```
player1Lbl.setText(player1Name); 
```

此方法不检查用户是否输入了任何内容，因此字符串可能为空白或 null，但您可以弄清楚如何检查...

# ruby-on-rails-3 - 如何最好地访问骨干网中的 current_user 设计助手

> ID：10129586
> 
> 赞同：1
> 
> 时间：2012-04-12T18:29:30.203
> 
> 标签：ruby-on-rails-3, backbone.js, devise

我是主干和 Rails 的新手，并且正在构建我的第一个应用程序。我希望能够使用当前用户 ID 在我的联系人模型中填充一个数组。我正在使用 rails 并设计提供 current_user 助手。

我在我的用户控制器中创建了一个 currentuser 方法，如下所示：

```
 class UserController < ApplicationController  
  def currentuser
    @user = User.find(current_user.id)

    respond_to do |format|
      format.html # show.html.erb
      format.json { render json: @user }
    end
  end 
```

我已经建立了一个名为 currentuser 的主干模型并设置了正确的 url

```
class ContactManager.Models.Currentuser extends Backbone.RelationalModel
  idAttribute: '_id'
  urlRoot: -> '/user/currentuser/' 
```

在我的主干视图中，我试图设置一个包含当前用户 ID 的变量，如下所示。

```
currentuser = new ContactManager.Models.Currentuser()
currentuser.fetch()
console.log(currentuser)
id = currentuser.get('id')
console.log(currentuser.id)
this.model.get('favorite_ids').push(id)
console.log(this.model.get('favorite_ids'))
this.model.save() 
```

这似乎在控制台中有效，但在我的应用程序 id 中未定义。我在这里做错了什么，或者有更好的方法。[此处](https://stackoverflow.com/questions/9582716/retrieve-rails-devise-current-user-from-backbone)建议使用此方法，但未详细说明。

提前感谢您提供的任何帮助。

# delphi - 从鼠标光标下的像素中获取 alphachannel 值

> ID：10129594
> 
> 赞同：2
> 
> 时间：2012-04-12T18:29:59.423
> 
> 标签：delphi, gdi+

如何使用 Delphi 2010 使用 GDIPlus 从 TImage 中鼠标光标下的像素获取 alpha 值？

我试过了，但 A 总是 255？我做错了什么？

```
procedure TFormMain.Image1MouseMove ( Sender: TObject; Shift: TShiftState; X, Y: Integer );
var
  GPBitmap: TGPBitmap;
  iColorRef: Cardinal;
  iColor: TColor;
  A, R, G, B: Byte;
  iARGB: ARGB;
begin

  if Assigned ( Image1.Picture ) then
    begin

      GPBitmap := TGPBitmap.Create ( Image1.Picture.Bitmap.Handle );
      try

      // Get alpha 0-255 from GPBitmap
      GPBitmap.GetPixel ( X, Y, iColorRef );
      iARGB := ColorRefToARGB ( iColorRef );
      A := GetAlpha ( iARGB );
      AlphaUnderCursor1.Caption := 'Alpha: ' + IntToStr ( A );

      iColor := Image1.Canvas.Pixels [ X, Y ];
      GetRGB ( iColor, R, G, B );
      Shape1.Brush.Color := iColor;

      finally
        GPBitmap.Free;
      end;

end; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T21:19:31.580

问题是显示器上的图像没有透明度。

从根本上说，您在显示器上看到的每个*像素都没有透明度。*

即想象点击`Print Scrn`，并将您的桌面副本粘贴到Paint 中。您不会找到任何部分透明的像素，因为没有。至少你会看到壁纸的像素。

很抱歉给您带来不便。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-17T06:33:31.810

你可以试试这个。秘诀是使用相同的图像创建一个后台缓冲区 png 图像，并使用屏幕图像的鼠标移动事件从该图像中读取 alpha 通道。下面的代码展示了如何实现这一点。

```
type
  TForm16 = class(TForm)
    Image1 : TImage; //Load SomeFile.png
    StatusBar1: TStatusBar;  
    procedure Image1MouseMove(Sender: TObject; Shift: TShiftState; X, Y: Integer);
    procedure FormCreate(Sender: TObject);
    procedure FormDestroy(Sender: TObject);
  private
    { Private declarations }
    PNGImage1 : TPNGImage; //Load SomeFile.png into this as well
  public
    { Public declarations }
  end;

var
  Form16: TForm16;

implementation

{$R *.dfm}

procedure TForm16.FormCreate( Sender : TObject );
  begin
    PNGImage1 := TPNGImage.Create();
    PNGImage1.Assign( Image1.Picture ); //Assign SomeFile.png
  end;

procedure TForm16.FormDestroy( Sender : TObject );
  begin
    PNGImage1.Free();
  end;

procedure TForm16.Image1MouseMove( Sender : TObject; Shift : ShiftState; X, Y : Integer );
  var
    Alpha: PByte;
  begin
    Alpha := @PNGImage1.AlphaScanline[Y]^[X];

      if( Alpha^ > 0 ) then
          Image1.Cursor := crDrag
        else
          Image1.Cursor := crDefault;

    Statusbar1.Panels[0].Text := IntToStr( Alpha^ );
  end;

end. 
```

使用此图像或任何其他具有 Alpha 透明度的图像。

![要使用的图像](../Images/e2d4817eda370056f8e3a50657145e46.png)

# objective-c - 类方法中的 NSMutableArray

> ID：10129597
> 
> 赞同：0
> 
> 时间：2012-04-12T18:30:06.800
> 
> 标签：objective-c, ios, class, nsmutablearray, class-method

我创建了一个类方法，它返回一个随机位置作为 NSValue 对象。我想将返回的位置存储在一个可变数组中，这样下次调用类方法时，它会检查可变数组中的位置，如果找到一个与存储的位置太接近的位置，则会生成一个新的位置。

我似乎无法弄清楚如何分配和初始化我的可变数组以与我的类方法一起使用。我试过在类方法中分配它。但这不起作用，因为它会在每次调用时被初始化，因为之前存储的值被......删除了？

然后我想使用生成的位置在视图上放置一些圆圈（没有它们重叠）。现在随机生成的位置可以工作，但是由于在我的 randomposition 类中未正确实现可变数组，它们重叠。

我仍然是目标 c 的初学者......和一般的编程......

```
@implementation randomPosition

NSMutableArray *positionsArrayPlayer1;

    +(NSValue *) givePosition:(int)player forRadius: (CGFloat) radius

    {

        if (player == 1)
        {
            //set range for arc4random
            int fromNumberY = 550;
            int toNumberY = 950;

            //set range for arc4random
            int fromNumberX = 0;
            int toNumberX = 700;

            BOOL far_enough_away = NO;
            CGPoint newpoint;

            while(!far_enough_away)
            {

                newpoint = CGPointMake((arc4random()%(toNumberX-fromNumberX+1))+fromNumberX, 
                                       (arc4random()%(toNumberY-fromNumberY+1))+fromNumberY);
                far_enough_away = YES;

                for(NSValue *existing in positionsArrayPlayer1)
                {
                    NSLog(@"test");

                    CGPoint pointb = [existing CGPointValue];
                    CGFloat deltay = pointb.y-newpoint.y;
                    CGFloat deltax = pointb.x-newpoint.x;
                    CGFloat distance = sqrt(pow(deltax,2) + pow(deltay,2));

                    //fail if closer than desired radius
                    if(distance < radius )
                    {
                        far_enough_away = NO;

                        NSLog(@"test");
                        break;
                    }
                    [positionsArrayPlayer1 addObject:[NSValue valueWithCGPoint:newpoint]];

                }
                NSLog(@"%@",positionsArrayPlayer1);
            }

            return [NSValue valueWithCGPoint:newpoint];

        } else if (player == 2 ){

             //more stuff to come here....

        } else {

            NSLog(@"player invalid");

        }

        return nil;
    } 
```

这是我在视图控制器中使用的方法。我还将放置在视图上的圆形对象存储在单独的数组中以进行其他操作。

```
- (void) positionCirclesPlayer1 
{

    radius = 70;
    CGRect position;

    for (int i = 0; i < [colors count];i++)
    {

    CGRect positionCircleInCenter = CGRectMake(self.view.frame.size.width/2-35, self.view.frame.size.height/2-35, radius, radius);

    Circle *myCircle = [[Circle alloc] initWithFrame:positionCircleInCenter radius:radius color:[colors objectAtIndex:i]];
    myCircle.label.text = [NSString stringWithFormat:@"%i", i];
    myCircle.alpha = 0;
    myCircle.userInteractionEnabled = NO;

    theNewPointPlayer1 =   [randomPosition givePosition:1 forRadius:radius];

    position = CGRectMake(theNewPointPlayer1.CGPointValue.x, theNewPointPlayer1.CGPointValue.y, 70, 70);

    [UIView animateWithDuration:0.4 delay:0 options:UIViewAnimationCurveEaseIn animations:^{
            myCircle.frame = position; myCircle.alpha = 1;} completion:nil];

    [playerOneCircles addObject:myCircle];
    [self.view addSubview:myCircle];

    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T18:46:27.623

在学习 Obj-C 之前，您可能应该了解一些关于 C 的知识 :)

```
 +(NSValue*)givePosition:(int)player forRadius:(CGFloat)radius {
  //this is executed when the method is called for the first time
  static NSMutableArray *positionsArrayPlayer1 = nil;

  if (positionsArrayPlayer1 == nil) { //checking if this is the first time execution
     positionsArrayPlayer1 = [[NSMutableArray alloc] init];
  }

} 
```

或者

```
 //global variable accessible only from this file
static NSMutableArray *positionsArrayPlayer1;

@implementation randomPosition

//this method is called when the class is loaded.
+(void)initialize {
   positionsArrayPlayer1 = [[NSMutableArray alloc] init];
}

+(NSValue*)givePosition:(int)player forRadius:(CGFloat)radius {
   //do something with the array
}

@end 
```

请注意，使用类方法实现此功能可能不是一个很好的架构。

# python - Python：使用自定义比较器对字典数组进行排序？

> ID：10129598
> 
> 赞同：10
> 
> 时间：2012-04-12T18:30:17.970
> 
> 标签：python

我有以下 Python 字典数组：

```
myarr = [ { 'name': 'Richard', 'rank': 1 },
{ 'name': 'Reuben', 'rank': 4 },
{ 'name': 'Reece', 'rank': 0 },
{ 'name': 'Rohan', 'rank': 3 },
{ 'name': 'Ralph', 'rank': 2 },
{ 'name': 'Raphael', 'rank': 0 },
{ 'name': 'Robin', 'rank': 0 } ] 
```

我想按排名值对其进行排序，排序如下：1-2-3-4-0-0-0。

如果我尝试：

```
sorted_master_list = sorted(myarr, key=itemgetter('rank')) 
```

然后列表按 0-0-0-1-2-3-4 的顺序排序。

如何定义自定义比较器函数以将零推到列表底部？我想知道我是否可以使用类似[methodcaller](http://pythonadventures.wordpress.com/tag/operator/)的东西。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-04-12T18:34:07.603

选项1：

```
key=lambda d:(d['rank']==0, d['rank']) 
```

选项 2：

```
key=lambda d:d['rank'] if d['rank']!=0 else float('inf') 
```

演示：

> “我想按排名值对其进行排序，排序如下：1-2-3-4-0-0-0。” ——原海报

```
>>> sorted([0,0,0,1,2,3,4], key=lambda x:(x==0, x))
[1, 2, 3, 4, 0, 0]

>>> sorted([0,0,0,1,2,3,4], key=lambda x:x if x!=0 else float('inf'))
[1, 2, 3, 4, 0, 0] 
```

* * *

补充评论：

> “请你向我（一个 Python 新手）解释它在做什么？我可以看到它是一个 lambda，我知道它是一个匿名函数：括号中的位是什么？” - OP评论

**索引/切片符号**：

`itemgetter('rank')`和函数是一样`lambda x: x['rank']`的：

```
def getRank(myDict):
    return myDict['rank'] 
```

这`[...]`被称为索引/切片表示法，请参阅[解释 Python 的切片表示法](https://stackoverflow.com/questions/509211/good-primer-for-python-slice-notation)- 另请注意，这`someArray[n]`是许多编程语言中用于索引的常用表示法，但可能不支持形式的切片`[start:end]`或`[start:end:step]`.

**`key=`vs `cmp=`vs 丰富的比较**：

至于发生了什么，有两种常见的方法来指定排序算法的工作方式：一种是使用`key`函数，另一种是使用`cmp`函数（现在在 python 中已弃用，但用途更广泛）。虽然`cmp`函数允许您任意指定两个元素应如何比较（输入：`a`、`b`；输出：`a<b`或`a>b`或`a==b`）。虽然合法，但它并没有给我们带来任何重大好处（我们不得不以一种尴尬的方式复制代码），并且关键功能更适合您的情况。`cmp=`（有关如何以优雅但可能过度的方式隐式定义，请参阅“对象丰富的比较” 。）

**实现您的关键功能**：

不幸的是，0 是整数的一个元素，因此具有自然排序：0 通常 < 1,2,3... 因此，如果我们想强加一个额外的规则，我们需要在“更高级别”对列表进行排序。我们通过将键设为元组来做到这一点：元组首先按其第一个元素排序，然后按其第二个元素排序。True 总是排在 False 之后，所以所有 True 都排在 False 之后；然后它们将正常排序：`(True,1)<(True,2)<(True,3)<...`, `(False,1)<(False,2)<...`, `(False,*)<(True,*)`. 替代方案（选项 2）仅为 rank-0 字典分配无穷大的值，因为它保证高于任何可能的等级。

**更一般的选择**- 对象丰富的比较：

更通用的解决方案是创建一个表示记录的类，然后实现`__lt__`, `__gt__`, `__eq__`, `__ne__`, `__gt__`,`__ge__`和所有其他[丰富的比较运算符](http://docs.python.org/reference/datamodel.html#object.__lt__)，或者只实现其中一个`__eq__`并使用[`@functools.total_ordering`装饰器](http://docs.python.org/library/functools.html#functools.total_ordering)。这将导致该类的对象在您使用比较运算符（例如`x=Record(name='Joe', rank=12)` `y=Record(...)` `x<y`）时使用自定义逻辑；由于`sorted(...)`函数`<`在比较排序中默认使用和其他比较运算符，这将使排序时的行为自动进行，在您使用`<`和其他比较运算符的其他情况下。这可能会也可能不会过多，具体取决于您的用例。

**更清洁的替代方案**- 不要用语义重载 0：

但是我应该指出，将 0 放在 1、2、3、4 等后面有点人为。这是否合理取决于rank=0是否真的意味着rank=0；如果 rank=0 真的“低于” rank=1 （反过来又真的“低于” rank=2 ...）。如果情况确实如此，那么您的方法非常好。如果不是这种情况，那么您可能会考虑省略`'rank':...`条目而不是设置`'rank':0`。然后你可以使用 Lev Levitsky 的答案排序`'rank' in d`，或者：

具有不同方案的选项1：

```
key=lambda d: (not 'rank' in d, d['rank']) 
```

具有不同方案的选项2：

```
key=lambda d: d.get('rank', float('inf')) 
```

*旁注：依靠 python 中无穷大的存在几乎是一种 hack，使任何提到的解决方案（元组、对象比较）、Lev 的[filter-then-concatenate 解决方案](https://stackoverflow.com/a/10129722/711085)，甚至可能稍微复杂的[`cmp`解决方案](https://stackoverflow.com/a/10130207/711085)（键入wilson），更普遍适用于其他语言。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T18:38:41.253

我会做

```
 sortedlist = sorted([x for x in myarr if x['rank']], key=lambda x: x['rank']) + [x for x in myarr if not x['rank']] 
```

我想它可能会以某种方式被压缩。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-12T19:13:38.643

我更倾向于创建一个比较函数来专门处理“0”：

```
def compare(x,y):
    if x == y:
        return 0
    elif x == 0:
        return 1
    elif y == 0:
        return -1
    else:
        return cmp(x,y)

sorted(myarr, cmp=lambda x,y: compare(x,y), key=lambda x:x['rank']) 
```

但是，自定义比较功能会降低性能。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-04-12T18:34:09.383

一个hacky方法是：

```
sorted_master_list = sorted(myarr, key=lambda x: 99999 if x['rank'] == 0 else x['rank']) 
```

如果您知道自己的最高等级，这将非常有效。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-04-12T19:30:26.097

您在`myarr`此处绑定的代码看起来不像有效的 Python 代码（并且不在我的解释器会话中执行。

将其渲染为：

```
myarr = {
    'Richard': 1,
    'Reuben': 4,
    'Reece': 0,
    'Rohan': 3,
    'Ralph': 2,
    'Raphael': 0,
    'Robin': 0 } 
```

给了我一些可以作为答案的东西。

在 Python 中进行自定义排序的推荐方法是使用 DSU（装饰、排序、取消装饰）模式。如果你想按值对字典进行排序，那么它看起来像：

```
keys_sorted_by_val = [ x[1] for x in sorted([(v,k) for k,v in myarr.items()])] 
```

...要**装饰**`(v,k) for k,v in myarr.items()`的表达式在哪里；显然，**排序**和外部是最后的**未装饰**步骤。**`sorted()`**`x[1] for x in ...`****

 ******显然，这似乎是一个足够普遍的要求，可以将其包装在一个函数中：

```
def dict_by_values(d):
    return [ x[1] for x in sorted([(v,k) for k,v in d.items()])] 
```

如果你有一个对象实例的集合，你想按某个属性进行排序，你可以使用这样的东西：

```
def sort_by_attr(attr, coll):
    results = list()
    for each in coll:
        assert hasattr(each, attr)
        results.append((getattr(each, attr), each))
    results.sort()
    return [x[1] for x in results] 
```

因此，如果我们创建一个代表您的姓名/排名数据的类，如下所示：

```
class NameRanking(object):
    def __init__(self, name, rank):
        self.name = name
        self.rank = rank
    def __repr__(self):
        return "%s: %s, %s" %(self.__class__, self.name, self.rank) 
```

...并实例化那些使用的列表`myarr`：

name_rankings = [ nameRanking(k, v) for k,v in myarr.items() ]

...然后我们可以使用以下方法获得该副本的排序副本：

```
names_rankings_by_rank = sort_by_attr('rank', name_rankings) 
```

（是的，`assert`这不是一个好主意；那是您可以根据自己的应用程序放入自己的异常处理或抛出代码的地方）。

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2012-04-12T18:33:52.847

只需将任意函数或可调用对象传递给“key”——这就是它所需要的。`itemgetter`恰好是一个这样的函数——但它可以与你编写的任何函数一起工作——它只需将一个参数作为输入，并返回一个可直接兼容的对象以实现你想要的顺序。

在这种情况下：

```
def key_func(item):
   return item["rank"] if item["rank"] != 0 else -100000

sorted_master_list = sorted(myarr, key=key_func) 
```

（也可以写成 lambda 表达式）

* * *

## 回答 #7

> 赞同：-3
> 
> 时间：2012-04-12T18:34:02.867

您可以在关键参数中使用函数：

屁股排序：

```
sorted_master_list = sorted(myarr, key=lambda x: x.get('rank')) 
```

或描述：

```
sorted_master_list = sorted(myarr, key=lambda x: -x.get('rank')) 
```

您也可以在此处阅读有关排序功能的信息[http://wiki.python.org/moin/HowTo/Sorting](http://wiki.python.org/moin/HowTo/Sorting)

* * *

## 回答 #8

> 赞同：-3
> 
> 时间：2012-04-12T18:36:15.987

尝试 sorted_master_list = sorted(myarr, key=itemgetter('rank'), reverse=True)******

# java - JAVA - 以每个字符一个字节将字符写入文件

> ID：10129605
> 
> 赞同：1
> 
> 时间：2012-04-12T18:30:39.400
> 
> 标签：java, char

我找不到有关此的任何文档...我想将一堆 char 写入文件并确保文件的大小是 # of chars 字节。

有谁知道使用什么类？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T18:33:33.017

> 我想将一堆字符写入文件，并确保文件的大小是 # of chars 字节。

好的 - 所以你需要选择一个每个字符只使用一个字节的*编码*，例如 ISO-8859-1。创建一个`FileOutputStream`，将其包装在一个`OutputStreamWriter`指定的编码中，然后你就走了。但是，您需要注意您正在限制可以在文件中表示的字符范围。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T18:33:48.213

找一个“作家”

作家做输出字符

*   [http://docs.oracle.com/javase/1.4.2/docs/api/java/io/FileWriter.html](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/FileWriter.html)
*   [http://docs.oracle.com/javase/1.4.2/docs/api/java/io/OutputStreamWriter.html](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/OutputStreamWriter.html)

OutputStream 做输出字节

您可以尝试使用其他编码。在这种情况下，您应该提供一个**CharSetEncoder**，因为它有一个**onUnmappableCharacter**方法

*   [http://docs.oracle.com/javase/1.4.2/docs/api/java/nio/charset/CharsetEncoder.html#onUnmappableCharacter%28java.nio.charset.CodingErrorAction%29](http://docs.oracle.com/javase/1.4.2/docs/api/java/nio/charset/CharsetEncoder.html#onUnmappableCharacter%28java.nio.charset.CodingErrorAction%29)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T18:57:45.050

首先弄清楚`chars`你要谈论的是哪一种。

在`C`a`char`中是八位，即使您需要两个或更多`char`的 s 序列来表示一个字形，或者用人类术语来说，一个键入的字符。更糟糕的是，还有代表两个“键入”字符的字形，例如您在排版中经常看到的连体`ff`字形`ll`。

如果您在谈论`C` `char`s，那么根据定义，每个文件都包含与字符相同数量的字符。如果您正在谈论单词字符的任何其他含义，那么您需要做出一些选择。

UTF-8 中的 ASCII 字符集保证 8 位字符，这是迄今为止最好的字符集选择，因为它在 Web 协议中有明确的支持（感谢 w3c！）。这意味着只要您验证`java` `char`字符串中的 each 小于 128（整数值），您将得到一个`byte`per `char`with `UTF-8`。

`ISO-8859-1`是一个字符集，`byte`每个字符也只使用一个。缺点`ISO-8859-1`是它*往往*不是Microsoft 系统*以外的**任何*东西的默认字符集。即使在微软领域内，也已经取得了很大进展。*`UTF-8`*

 *两者之间转换的成本并不算太高，但两者的可扩展性差异很大。基本上，如果你正在使用`ISO-8859-1`并且有人告诉你下一个产品必须支持语言“X”，那么在某些情况下，你必须先转换为不同的字符集，然后再添加语言支持。在`UTF-8`添加支持之前需要转换为另一个字符集的情况很少见。我的意思是非常罕见，非常罕见，以至于您应该考虑只使用图像，因为该语言可能已死，可能仅具有历史意义，并且可能已被记录为主要语言所在岛屿上较小部落的方言有全力支持。*

# java - 如何从 Polar 心率监测器中获取正确的值

> ID：10129606
> 
> 赞同：6
> 
> 时间：2012-04-12T18:30:40.473
> 
> 标签：java, android

我的 android 应用程序正在通过蓝牙连接从 Polar Heart Rate Monitor 获取数据。我的问题是我得到这样一个字符串：���������������������������������������� ����������

我获取数据的代码：

```
 final Handler handler = new Handler();
    final byte delimiter = 10; //This is the ASCII code for a newline character

    stopWorker = false;
    readBufferPosition = 0;
    readBuffer = new byte[1024];
    workerThread = new Thread(new Runnable()
    {
        public void run()
        {
            while(!Thread.currentThread().isInterrupted() && !stopWorker)
            {
                try
                {
                    int bytesAvailable = mmInputStream.available();
                    if(bytesAvailable > 0)
                    {
                        byte[] packetBytes = new byte[bytesAvailable];
                        mmInputStream.read(packetBytes);
                        for(int i=0;i<bytesAvailable;i++)
                        {
                            byte b = packetBytes[i];
                            if(b == delimiter)
                            {
                                byte[] encodedBytes = new byte[readBufferPosition];
                               // System.arraycopy(readBuffer, 0, encodedBytes, 0, encodedBytes.length);
                                final String data = new String(encodedBytes, "ASCII");

                                readBufferPosition = 0;

                                handler.post(new Runnable()
                                {
                                    public void run()
                                    {
                                        pulsText.setText(data);
                                    }
                                });
                            }
                            else
                            {
                                readBuffer[readBufferPosition++] = b;
                            }
                        }
                    }
                }
                catch (IOException ex)
                {
                    stopWorker = true;
                }
            }
        }
    });

    workerThread.start(); 
```

我尝试以几种方式更改此行，但我仍然得到不正确的数据：

```
 final String data = new String(encodedBytes, "ASCII"); 
```

我该如何解决这个问题？

请帮忙 ！！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T18:55:45.833

传感器不会为您提供可打印的字符串（例如 NMEA），而是您需要解析的二进制数据。您可以查看[MyTracks Polar Sensor 数据解析器](http://code.google.com/p/mytracks/source/browse/MyTracks/src/com/google/android/apps/mytracks/services/sensors/PolarMessageParser.java)以获取灵感。

您正在使用`available`并且`read`不正确（但是您使用的方式大多数时候可能会很幸运）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-14T15:42:01.950

测量单位（基于 JavaOne 的 Raspberry Pi Challenge）[“Heart of Glass”](https://github.com/unitsofmeasurement/heart-of-glass)项目展示了如何将其解析为类型安全的**心跳单元**以显示或传输到其他系统。

# jquery - 基于生成的字体的两个字体粗细值

> ID：10129608
> 
> 赞同：0
> 
> 时间：2012-04-12T18:30:48.173
> 
> 标签：jquery, css, fonts, font-face

我有以下字体css：

```
font-family: futura, arial, sans-serif; 
```

现在很多人没有futura，所以我想做的是如果生成的字体是future我不希望它是粗体的，否则如果它是arial或sans-serif我确实希望它是粗体的。

有没有办法做到这一点？我以为我可以使用 jQuery 提取使用过的字体，然后应用其他 css 类，但 jQuery 提取了整个字体系列值，而不是实际使用的字体。我对任何 CSS 和 jQuery 解决方案持开放态度。

谢谢，

# jquery - 尽管 style='display:none' 可以在 IE 中选择隐藏文本

> ID：10129613
> 
> 赞同：8
> 
> 时间：2012-04-12T18:31:26.527
> 
> 标签：jquery, css, internet-explorer

这似乎是特定于 IE 的“功能”。我用IE8测试过。用户[John H](https://stackoverflow.com/users/729541/john-h)通过在 IE6 和 IE7 中确认做出了贡献。

我有一些文本内置到我的页面中，并且从元素创建的开始就具有`style = "display: none;"`

我没有使用 jQuery 来隐藏文本，并且文本没有“显示”。虽然，为了进一步披露，我确实使用 jQuery 的`.html()`方法访问元素的内容。

但是，如果用户选择我的元素*附近*`display:none`的文本并复制已选择的内容，则隐藏的文本将被包含在内。就好像它一直正常显示一样。

标记如下所示：

```
...
<td align="left">
    Text they should see
    <div id="whateverButUnique" style="display:none;">Value I want hidden</div>
    Some other text
</td> 
```

这是一个[小提琴](http://jsfiddle.net/zexC6/)，我可以使用 IE<9 重现该问题。

虽然这对这个特定的应用程序来说不是一个严重的问题，但它让我措手不及，我想知道这是一个“功能”还是我做错了什么。

我见过的大多数[其他问题](https://stackoverflow.com/questions/4536968/css-display-not-working)`display:none`都让他们的海报内容可见。同样，在选择、复制和最后粘贴**之前**，我的内容基本上是不可见的。

我可以通过复制/粘贴来阻止 Internet Explorer 用户找到此内容吗？我意识到他们可以在开发者工具和查看源代码中看到它。

**更新：**感谢其他用户的评论，我也尝试过应用`visibility:hidden`and的样式`z-index=-1`。用户[John H](https://stackoverflow.com/users/729541/john-h)尝试了许多其他隐藏尝试，但 IE 至今仍顽固地允许此功能通过。感谢所有伟大的想法！

**更新：**感谢您询问[Heather Walters](https://stackoverflow.com/users/1077783/heather-walters)；我需要在页面上使用的值仅在服务器端可用，但我*在页面加载后*使用它们来生成链接，使用外部程序通过 jQuery/AJAX 进行的额外处理。因此，我使用隐藏但包含的值构建页面，然后对这些隐藏的值进行操作以构建对它们有用的东西。

但是，一旦我完成使用它们来构建有用的东西，我现在意识到我可以通过 jQuery 将它们全部清除并获得额外的性能影响。以下代码将为启用 javascript 的每个人完成此操作：

```
$("[id^=whateverButUnique]").html(""); 
```

由于页面上可能有数百个元素，因此这种额外的处理并不理想。

[vega](https://stackoverflow.com/users/297641/vega)，我不相信[这个解决方案](https://stackoverflow.com/questions/733679/displaynone-content-copied-to-clipboard-visible-when-pasted/1055701#1055701)对我有用，因为我必须在服务器端构建页面和我的隐藏内容。它们都构建在服务器端循环中，可能包含数百个其他元素，因此我可以选择在服务器将所有内容放在表格中（包括隐藏元素）时将其构建到位，或者再次循环遍历它（痛苦）并尝试强制元素显示：无在不太可能被选中的地方。

[Ohgodwhy](https://stackoverflow.com/users/1206267/ohgodwhy)，我想相信你的解决方案。在 IE8 中，隐藏字段没有出现在记事本中；但是，我能够复制该部分并将其粘贴到 Microsoft Word 中。它不再隐藏。

另一个起作用的因素：这个页面已经很重 javascript 所以我希望我能找到一个解决方案来阻止 IE 看​​到这些值而不添加另一个通过 100 多个潜在元素的传递......但我可能不得不这样做。

**更新**：[Robin Maben](https://stackoverflow.com/users/448232/robin-maben)的建议看起来将是一个*很好的*解决方法！他的建议是隐藏`data-x`自定义 HTML5 属性中的值。尽管我的（很可能）不符合 HTML5 的页面，这似乎是有效的。如果您也认为这是一个有价值的贡献，请对他的回答进行投票。

**更新**：已确认。我已经成功地实现了 Maben 的建议，因此能够减少 DOM 查找的次数——我页面上的每个元素都查找一次。我已经用我想要显示的项目遍历了所有 DIV，现在我可以同时自动访问 data 属性。这在我的实现中看起来像这样：

```
<div style="display:none" data-call-number="..." id="stackLocatorLinkFillUp...">...</div> 
```

省略号表示正在进行的独特操作。id 有一个简单的数字指示符，每条记录递增一个。

```
// Loop through all of the items on the page that start with my id
$("[id^=stackLocatorLinkFillUp]").each( function() {
    // ...
    // Grab the contents of the div
    var innerContent = $(this).html();
    // Extract the call number out of the data-call-number field
    var callNumPreEncoded = $(this).data("callNumber");
    // ...eventually...
    $(this).html(...).css("display","block");
}); 
```

感谢大家！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-12T19:11:14.747

~~你试过**`visibility:collapse`**房产吗？~~

如果“ `Value I want hidden`”部分纯粹用于计算目的，则应使用**“ `data`”属性。**

像这样

```
<div data-custom-value="1001">Visible value </div> 
```

在 jQuery 中，HTML 数据属性通过`data()`api 自动可用。

你可以做

`someElement.data('customValue')`读取一个值。

和

`someElement.data('customValue', newValue)`设置一个值。

希望我正确地分析了您的问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-13T14:16:37.467

元素的大小显示和位置无关紧要，它被选中是因为当您在 IE<9 中选择内容时，您选择的是 html，然后粘贴带有隐藏元素的 html。IE9 和其他浏览器会正确地从选择中删除那些隐藏元素。*我知道*防止它的唯一方法是在 dom 中没有隐藏元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T19:03:38.143

我认为最好使用：

```
position: absolute; left: -10000px; 
```

这将消除任何潜在的 IE 问题。

# sql - 反转/吹灭 GROUP BY

> ID：10129616
> 
> 赞同：1
> 
> 时间：2012-04-12T18:31:51.320
> 
> 标签：sql, sql-server-2008, tsql

我正在处理按项目编号和计数分组的数据。需要将带有 a 的每条记录`count > 2`分解为单独的记录，并在该级别与不同的数据集进行比较。

数据看起来像这样（它卡在这种格式。这是客户可以发送它的唯一方式。）：

```
OwnerNumber ItemCode    ItemNumber  CountOfItems
1234    Item1   Item1-001   3
1234    Item1   Item1-002   1
1234    Item1   Item1-003   2
1234    Item2   Item2-001   1 
```

我需要这样格式化的数据（动态地对 CountOfItems 的值不进行硬编码）：

```
OwnerNumber ItemCode    ItemNumber  
1234    Item1   Item1-001
1234    Item1   Item1-001
1234    Item1   Item1-001
1234    Item1   Item1-002
1234    Item1   Item1-003
1234    Item1   Item1-003
1234    Item2   Item2-001 
```

出于某种原因，我无法用一种干净的方式（或任何方式）来解决这个问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T18:50:42.040

您可以使用公用表表达式进行管理

```
WITH CTE AS (
    SELECT OwnerNumber,ItemCode,ItemNumber,CountOfItems FROM table

    UNION ALL SELECT OwnerNumber,ItemCode,ItemNumber,CountOfItems-1
    FROM CTE
    WHERE CountOfItems >= 2
)
SELECT OwnerNumber,ItemCode,ItemNumber
FROM CTE
ORDER BY ItemNumber
OPTION (MAXRECURSION 0); 
```

**编辑：**

添加`MAXRECURSION`以处理 CountOfItems 超过 Dev_etter 指出的默认最大递归的情况

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-12T20:25:23.763

您可以使用下面的查询来避免递归，我认为会更有效率。此处，表 N 是任何行数至少与最大 CountOfItems 值一样多的表。

这是一个罕见的查询示例，其中没有 ORDER BY 的 TOP 不是一个坏主意。

```
select
  OwnerNumber,
  ItemCode,
  ItemNumber
from t
cross apply (
  select top (CountOfItems) null
  from N
 ) as N(c) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-12T18:49:32.400

嗯....我想我喜欢递归 CTE：

```
WITH Data (OwnerNumber, ItemCode, ItemNumber, CountOfItems) as (
           SELECT OwnerNumber, ItemCode, ItemNumber, CountOfItems
           FROM OriginalTable
           UNION ALL
           SELECT OwnerNumber, ItemCode, ItemNumber, CountOfItems - 1
           FROM Data
           WHERE CountOfItems > 1)
SELECT OwnerNumber, ItemCode, ItemNumber
FROM Data
ORDER BY OwnerNumber, ItemCode, ItemNumber 
```

# json - node.js 的 Json 解析问题

> ID：10129617
> 
> 赞同：0
> 
> 时间：2012-04-12T18:31:52.043
> 
> 标签：json, node.js

我是编程新手，我正在尝试学习 node.js 和 CoffeeScript。我读了几本书，看了一些截屏视频。现在我已经开始编码了。现在我遇到了我的第一个问题，但无法通过 Google 解决。已经失去了几个小时，我被困住了。也许有人可以给我一盏灯。这是问题所在。我有这个 json 文件：

```
{
  "title": "title",  
  "pages": [ 
    { "name": "Page1", "url": "#Page1", "class": "class", "template":"templateName" }, 
    { "name": "Page2", "url": "#Page2", "class": "class", "template":"templateName" },
    { "name": "Page3", "url": "#Page3", "class": "class", "template":"templateName" }, 
    { "name": "Page4", "url": "#Page4", "class": "class", "template":"templateName" }, 
    { "name": "Page5", "url": "#Page5", "class": "class", "template":"templateName" } 
  ]
} 
```

获取json文件的代码是

```
configFile = require(file.json) 
```

如果我做

```
console.log(configFile.pages) 
```

我可以得到正确的信息。

但如果我这样做

```
console.log(configFile.pages.template[0]) 
```

我收到一个未定义的错误。

谁能帮我一把？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T18:33:31.100

```
configFile.pages[0].template 
```

这是你的结构:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T18:33:59.577

`template`不是数组，`pages is`. 所以使用这个：

```
console.log(configFile.pages[0].template); 
```

# ios - Air for iOS - 如何处理因内存有限而导致的崩溃？

> ID：10129618
> 
> 赞同：2
> 
> 时间：2012-04-12T18:31:52.987
> 
> 标签：ios, actionscript-3, exception, air, out-of-memory

我们目前正在使用适用于 iOS 的 Air 开发 iPad 应用程序，但有时会遇到崩溃（仅在带有 ios 5 的 iPad1 上），这似乎是因为该应用程序占用了太多内存。

如何在应用程序中捕获/处理此类错误？内存不足时如何通知？试图捕捉 flash.errors.MemoryError 似乎不起作用。有小费吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-12T19:23:53.590

我在这方面做了一些工作，这里有一些我可以给你的提示。

1.  **获取 Flash Builder 4.6*高级版***。

    如果仅针对探查器，请获取它。它具有可用于诊断此类问题的最佳分析器之一。话虽如此，周围还有其他 Flash 分析器，它们具有不同程度的有用性。

    仅此一项就可以帮助您查找和诊断大部分内存在原始内存使用方面的去向，还可以帮助您找到正在创建和销毁的对象的数量以及在垃圾收集器最终运行之前它们停留了多长时间让他们走。

2.  **池更小的琐碎对象**

    与其不断地创建和销毁较小的对象，不如创建[对象池](http://en.wikipedia.org/wiki/Object_pool_pattern)。这将为您节省不断旋转新对象的成本，并使您不必等到垃圾收集器运行后再释放内存。

    在 actionscript 中创建对象池有很多示例和模式可供参考。如果 AS 支持泛型会更容易，但即使没有它们，它仍然非常简单。

3.  **急切地处理巨大的物体**

    这与上一点的建议直接背道而驰，但是对于大型对象，您不希望它们永远在内存中徘徊。我指的是这样的事情`BitmapData`，当你用完它们（在可预见的将来），把它们拆掉并把它们清空，然后让垃圾收集器清理它。

    当你再次需要它们时，重建它们。是的，你会受到轻微的性能影响，但移动设备上的内存是宝贵的，不要浪费它，保留一个只出现在加载屏幕上的 2mb 位图数据对象。把它扔掉。

4.  **取消您不再需要的引用**

    花点时间尝试真正了解垃圾收集器需要做什么，以及它如何决定哪些对象可以丢弃，哪些不能丢弃。尽量避免自引用对象/循环引用，虽然 CG 通常可以弄清楚，但有时可能需要一个小手握住。

5.  **每次使用时评估`new`**[相关2]

    再次使用内存分析器将有助于这一步，但要确保每次实例化一个新对象时，都需要实例化一个新对象。在为 PC 开发时很容易变得懒惰，只是将新对象扔到池中并让 CG 整理出来。看看是否有好的缓存策略（对象池，或者只是引用缓存）如果它很小。如果它是一个你经常建造和拆除的巨大物体，那么可能是时候尝试提出一个更好的架构解决方案了。

据我所知，如果你到了 iOS 认为内存不足的地步，那就太迟了。上次我检查时，框架会在认为内存不足时尝试运行 CG，如果无法释放足够的内存继续运行，则会失败。尽你最大的努力避免达到操作系统认为唯一安全的选择是终止你的线程的地步。

# oracle - 获取 oci_execute() 错误的错误消息 (PHP)

> ID：10129619
> 
> 赞同：2
> 
> 时间：2012-04-12T18:31:58.367
> 
> 标签：oracle, oracle10g

如果在 Oracle 10g 中查询失败，我想获得特定的错误消息。对于 MySQL，PHP 具有 mysql_error() 函数，该函数可以返回有关查询失败原因的详细信息。我检查了 oci_execute() 函数的 php.net 手册，但据我所知，它只在失败时返回 false。

我尝试使用 oc_error()，但我没有从中得到任何东西。

这是一个代码示例：

```
 $err = array();
    $e = 0;

    //Cycle through all files and insert new records into database
    for($f=0; $f<sizeof($files); $f++)
    {
        $invoice_number = $files[$f]['invoice_number'];
        $sold_to = $files[$f]['sold_to'];
        $date = $files[$f]['date'];

        $sql = "insert into invoice (dealer_id, invoice_number, invoice_date) 
                values ('$sold_to', '$invoice_number', '$date')";

        $stid = oci_parse($conn, $sql);
        $result = oci_execute($stid);

        //If query fails
        if(!$result)
        {
            $err[$e] = oci_error();
            $e++;
        }
    } 

    print_r($err); 
```

print_r($err) 的响应：

```
Array ( [0] => [1] => [2] => [3] => [4] => [5] => [6] => [7] => [8] => ) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-15T13:20:03.677

您是否尝试将 $stid 传递给 oci_error？

```
$err[$e] = oci_error($stid); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-10-30T16:26:15.820

The `oci_error()` function takes an argument that specifies the context of your error. Passing it no argument will only work for certain kinds of connection errors. What you want to do is pass the parsed statement resource, like so:

```
$err = oci_error($stid); 
```

(Note also that the return value from `oci_error` is an array, so I assigned the entire output to your `$err` array variable)

# matlab - 在 Matlab 中禁用绘图

> ID：10129622
> 
> 赞同：11
> 
> 时间：2012-04-12T18:32:16.387
> 
> 标签：matlab, matlab-figure

我有一些用 Matlab 编写的程序，由于某些原因（调试、使用不同输入进行测试等），我需要运行几次。

但是，程序及其各种功能绘制了很多图形，因此每次运行程序时，我都必须等待显示所有图形，这非常烦人且耗时（尤其是当您正在使用小型笔记本电脑）。程序执行后，我用`close all`.

所以我的问题是：

**有没有办法禁用 Matlab 中的所有绘图/图形/图形？**无论是在选项中，还是通过执行某个代码，例如`disable plot`并`enable plot`确保没有显示任何数字。

我知道我可以浏览代码并评论绘图部分，但我不想*忘记*取消评论。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-12T18:43:18.977

尝试结合使用这两个命令：

```
set(gcf,'Visible','off')              % turns current figure "off"
set(0,'DefaultFigureVisible','off');  % all subsequent figures "off" 
```

第二个，如果你把它放在程序的开头附近，可能会为你解决问题。当然，它仍在创建绘图，这对于计算时间和/或 RAM 问题可能是不可取的。

这是尽可能避免使用 Matlab 的经典原因。它助长了糟糕的编程设计。为了正确解决这个问题，您应该创建一些东西，让您在程序的最高级别“翻转开关”并控制绘图是否显示。也许它甚至具有显示/不显示选项的渐变，因此您可以根据正在运行的诊断选择不同类型的显示/不显示的图。

理想情况下，您希望这个“翻转开关”创建是一个可以访问其他对象的可见性和绘图功能的类。但是由于在 Matlab 中交互式面向对象非常麻烦，因此开发这样的解决方案通常不值得付出努力，而且大多数人从项目一开始就没有考虑到这个设计方面。

Matlab 会鼓励某人通过制作诸如“isPlotVisible”之类的标志变量并创建始终接受此类标志的函数来解决此问题。我同意这是一个糟糕的设计。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-12T18:43:16.400

您可以使用以下命令从命令行运行 matlab：

```
matlab -nojvm 
```

但是你根本没有得到 GUI。或者，您可以编写一个文件“plot.m”：

```
function h = plot(varargin)
  h = [];
end 
```

这没有任何作用。如果它在工作目录中（或路径顶部附近的其他地方），那么 plot 将调用您的函数而不是“真实”图。您需要从您调用的任何其他图形函数中执行相同的操作。

我所知道的“关闭绘图”最接近的方法是此类功能的文件夹，您可以将其添加到路径以禁用绘图，并删除以启用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-02-05T01:33:18.983

以前的方法都很好，但一个简单而好的习惯是使用`"on/off parameter"`. 所以基本上，在代码的开头，您可以添加如下内容：

```
DisplayFigure = 1; %1 = display, 0 = no display 
```

之后，添加`"if DisplayFigure == 1 ... end"`所有与绘图相关的命令，这些命令应该在 if 语句中（上面的 ...）。因此，您甚至不会计算绘图，这将为您节省大量时间和内存。您只需更改变量“DisplayFigure”的值即可绘制或不绘制图形。

# c# - 唯一文件标识符

> ID：10129623
> 
> 赞同：1
> 
> 时间：2012-04-12T18:32:24.253
> 
> 标签：c#, .net, file, unique, identifier

> **可能重复：**
> [Windows 中的唯一文件标识符](https://stackoverflow.com/questions/1866454/unique-file-identifier-in-windows)

我需要检索计算机上某些文件的唯一标识符，并且只遇到了 Win32 GetFileInformationByHandle 函数。我怎样才能做到这一点。网络框架？

更新：如果文件被移动、更新、重命名等，我需要一个不会改变的持久 id。

Update2：如何使用文件夹完成相同的操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T18:44:46.383

[这是我从这个答案](https://stackoverflow.com/a/1866788/635634)中复制的[Ashley Henderson](https://stackoverflow.com/users/5023/ashley-henderson)的一些代码。它意味着两种方法都返回相同的唯一标识符。

```
public class WinAPI
    {
        [DllImport("ntdll.dll", SetLastError = true)]
        public static extern IntPtr NtQueryInformationFile(IntPtr fileHandle, ref IO_STATUS_BLOCK IoStatusBlock, IntPtr pInfoBlock, uint length, FILE_INFORMATION_CLASS fileInformation);

        public struct IO_STATUS_BLOCK
        {
            uint status;
            ulong information;
        }
        public struct _FILE_INTERNAL_INFORMATION {
          public ulong  IndexNumber;
        } 

        // Abbreviated, there are more values than shown
        public enum FILE_INFORMATION_CLASS
        {
            FileDirectoryInformation = 1,     // 1
            FileFullDirectoryInformation,     // 2
            FileBothDirectoryInformation,     // 3
            FileBasicInformation,         // 4
            FileStandardInformation,      // 5
            FileInternalInformation      // 6
        }

        [DllImport("kernel32.dll", SetLastError = true)]
        public static extern bool GetFileInformationByHandle(IntPtr hFile,out BY_HANDLE_FILE_INFORMATION lpFileInformation);

        public struct BY_HANDLE_FILE_INFORMATION
        {
            public uint FileAttributes;
            public FILETIME CreationTime;
            public FILETIME LastAccessTime;
            public FILETIME LastWriteTime;
            public uint VolumeSerialNumber;
            public uint FileSizeHigh;
            public uint FileSizeLow;
            public uint NumberOfLinks;
            public uint FileIndexHigh;
            public uint FileIndexLow;
        }
  }

  public class Test
  {
       public ulong ApproachA()
       {
                WinAPI.IO_STATUS_BLOCK iostatus=new WinAPI.IO_STATUS_BLOCK();

                WinAPI._FILE_INTERNAL_INFORMATION objectIDInfo = new WinAPI._FILE_INTERNAL_INFORMATION();

                int structSize = Marshal.SizeOf(objectIDInfo);

                FileInfo fi=new FileInfo(@"C:\Temp\testfile.txt");
                FileStream fs=fi.Open(FileMode.Open,FileAccess.Read,FileShare.ReadWrite);

                IntPtr res=WinAPI.NtQueryInformationFile(fs.Handle, ref iostatus, memPtr, (uint)structSize, WinAPI.FILE_INFORMATION_CLASS.FileInternalInformation);

                objectIDInfo = (WinAPI._FILE_INTERNAL_INFORMATION)Marshal.PtrToStructure(memPtr, typeof(WinAPI._FILE_INTERNAL_INFORMATION));

                fs.Close();

                Marshal.FreeHGlobal(memPtr);   

                return objectIDInfo.IndexNumber;

       }

       public ulong ApproachB()
       {
               WinAPI.BY_HANDLE_FILE_INFORMATION objectFileInfo=new WinAPI.BY_HANDLE_FILE_INFORMATION();

                FileInfo fi=new FileInfo(@"C:\Temp\testfile.txt");
                FileStream fs=fi.Open(FileMode.Open,FileAccess.Read,FileShare.ReadWrite);

                WinAPI.GetFileInformationByHandle(fs.Handle, out objectFileInfo);

                fs.Close();

                ulong fileIndex = ((ulong)objectFileInfo.FileIndexHigh << 32) + (ulong)objectFileInfo.FileIndexLow;

                return fileIndex;   
       }
  } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T19:18:10.003

我假设文件格式不受您的控制（否则，生成 UUID 并将其存储在那里）。

**文件对象 ID**

NTFS 在文件级别支持对象 ID，请参阅[FSCTL_CREATE_OR_GET_OBJECT_ID](http://msdn.microsoft.com/en-us/library/windows/desktop/aa364393%28v=vs.85%29.aspx)。我没有使用它们来推荐它们，但这似乎是一个很有前途的探索。

与备用数据流（如下）一样，当复制到非 NTFS 介质（“普通”记忆棒、CD、DVD、闪存卡，甚至可能是一些 USB 磁盘......）时，它们可能会丢失。此外，某些应用程序在保存时重新创建文件时可能会出错。

**分布式链接跟踪服务**

[分布式链接跟踪服务](http://msdn.microsoft.com/en-us/library/windows/desktop/aa363997%28v=vs.85%29.aspx)使用文件对象 ID 来跟踪文件链接，并在文件移动时修复它们。

AFAIK 分布式链接跟踪服务需要服务器的域控制器。同样，我没有这方面的实际经验。

**在 NTFS 上，您还可以创建 UUID 并将其存储在[备用数据流中](http://en.wikipedia.org/wiki/NTFS#Alternate_data_streams_.28ADS.29)。**

注意事项：

*   仅在 NTFS 上可用，不会在其他文件系统上“存活”
*   一份白皮书“NTFS 的未来”曾考虑杀死它们，但我认为还有一些其他功能可以帮助您（不幸的是，我没能挖掘出来）
*   我不想为成千上万个来源和目的未知的文件创建它。尽管它们“只是在文件系统级别上工作”，但某些应用程序可能会搞砸。

**某些文档格式（例如 Office）允许[自定义文档属性](http://msdn.microsoft.com/en-us/library/4e0tda25%28VS.80%29.aspx)。**

这显然是有限的，但类似的机制也可以搭载到其他文件类型上。（例如，许多图像格式允许添加/重写应该被读者忽略的“自定义”块）

**FileFromID 与 IDFromFile**

除 DLTS 之外的所有解决方案都只允许`IDFromFile`查找，即查找已移动（或已删除）的文件需要搜索所有可能的驱动器。

对于 DLTS，如果没有“直接 API”方式，您可以将启用 DLTS 的快捷方式存储在特定于应用程序的文件夹中，并且~~希望~~希望服务在文件移动时修复快捷方式。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-12T18:35:24.940

You can get the MD5 hash for the files, take this example:

```
string GetMD5HashFromFile(string fileName)
{
    FileStream file = new FileStream(fileName, FileMode.Open);
    MD5 md5 = new MD5CryptoServiceProvider();
    byte[] retVal = md5.ComputeHash(file);
    file.Close();

    StringBuilder sb = new StringBuilder();
    for (int i = 0; i < retVal.Length; i++)
    {
        sb.Append(retVal[i].ToString("x2"));
    }
    return sb.ToString();
} 
```

this will return a unique identifier for each file.

# c# - 将“所有人”权限添加到文件夹的网络共享

> ID：10129624
> 
> 赞同：3
> 
> 时间：2012-04-12T18:32:39.710
> 
> 标签：c#, security, networking, windows-7, share

注意：请不要因标题与其他标题相似而忽略。

我正在尝试在 Windows 7 机器上共享一个文件夹。我想通过 C# 给每个人完全的权限。

我在包括这里在内的其他页面上看到了几篇文章，这些文章讲述了如何做到这一点。但像其他一些人一样，它对我不起作用。下面是摘自[SO](https://stackoverflow.com/questions/5298905/add-everyone-privilege-to-folder-using-c-net)的片段。

```
 DirectorySecurity sec = Directory.GetAccessControl(path);
    // Using this instead of the "Everyone" string means we work on non-English systems.
    SecurityIdentifier everyone = new SecurityIdentifier(WellKnownSidType.WorldSid, null);
    sec.AddAccessRule(new FileSystemAccessRule(everyone, FileSystemRights.FullControl | FileSystemRights.Synchronize, InheritanceFlags.ContainerInherit | InheritanceFlags.ObjectInherit, PropagationFlags.None, AccessControlType.Allow));
    Directory.SetAccessControl(path, sec); 
```

在我调用上面的代码之前，共享文件夹已经完成。下面的图片是我得到的结果：

![在此处输入图像描述](../Images/bf5e828251300915a7674863af93580e.png)

到目前为止，一切都很好。但在下一张图片中，您会看到剩下的两个复选框仍未选中。

![在此处输入图像描述](../Images/f3415351095bd26da58ac4ce375a258c.png)

请问我错过了什么？

谢谢！

编辑：下面是用于进行实际共享的代码。

```
 private static void QshareFolder(string FolderPath, string ShareName, string Description)
    {
        try
        {
            ManagementClass managementClass = new ManagementClass("Win32_Share");
            ManagementBaseObject inParams = managementClass.GetMethodParameters("Create");
            ManagementBaseObject outParams;

            inParams["Description"] = Description;
            inParams["Name"] = ShareName;
            inParams["Path"] = FolderPath;
            inParams["MaximumAllowed"] = null;
            inParams["Password"] = null;
            inParams["Access"] = null;
            inParams["Type"] = 0x0; // Disk Drive

            // Invoke the method on the ManagementClass object
            outParams = managementClass.InvokeMethod("Create", inParams, null);

            // Check to see if the method invocation was successful
            if ((uint) (outParams.Properties["ReturnValue"].Value) != 0)
            {
                throw new Exception("Unable to share directory.");
            }
        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.Message, "error!");
        }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T18:41:27.077

共享和基础文件夹的权限是分开的 - 您在文件/文件夹上设置 ACL 的代码...因此您缺少在网络共享本身上设置 ACL 的部分。

最终通过共享访问文件时，文件和共享权限之间的最小化。

我不知道如何在共享上设置 ACL，但这里有一个相关的 C++ 问题，可能是关于如何设置共享权限的一个很好的起点：[如何以编程方式创建只读网络共享？](https://stackoverflow.com/questions/1301511/how-to-create-read-only-network-share-programmatically).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-08-09T07:43:21.050

实际上，我遇到了与您相反的问题，您的第一个代码片段为我解决了它……您的实现只是缺少一个 SecurityDescriptor。

```
 private static ManagementObject GetSecurityDescriptor()
 {
            ManagementObject Trustee = new ManagementClass(new ManagementPath("Win32_Trustee"), null);
            Trustee["SID"] = GetWellKnwonSid(WellKnownSidType.WorldSid);
            Trustee["Name"] = "Everyone";

            ManagementObject userACE = new ManagementClass(new ManagementPath("Win32_Ace"), null);
            userACE["AccessMask"] = 2032127;//Full access
            userACE["AceFlags"] = AceFlags.ObjectInherit | AceFlags.ContainerInherit;
            userACE["AceType"] = AceType.AccessAllowed;
            userACE["Trustee"] = Trustee;

            ManagementObject secDescriptor = new ManagementClass(new ManagementPath("Win32_SecurityDescriptor"), null);
            secDescriptor["ControlFlags"] = 4; //SE_DACL_PRESENT 
            secDescriptor["DACL"] = new object[] { userACE };
            secDescriptor["Group"] = Trustee;
            return secDescriptor;
  }

private static byte[] GetWellKnwonSid(WellKnownSidType SidType)
{
      SecurityIdentifier Result = new SecurityIdentifier(SidType, null);
      byte[] sidArray = new byte[Result.BinaryLength];
      Result.GetBinaryForm(sidArray, 0);

      return sidArray;
} 
```

您必须将Win32_Share 实例分配给**Access属性**

# php - Paypal 自适应链式支付 - 发件人的金额是主要收款人的金额，而不是总金额。怎么修？

> ID：10129627
> 
> 赞同：1
> 
> 时间：2012-04-12T18:32:53.877
> 
> 标签：php, paypal, payment, paypal-adaptive-payments, chained

我正在开发一项服务，其中发件人支付一定金额，其中 95% 给一个接收者，5% 给另一个。（例如，支付 100 美元，初级费用减少 95 美元，二级费用减少 5 美元。）在此示例中，发件人将 95 美元视为他要支付的金额，而不是 100 美元，我不明白为什么。

这里的金额设置在一个数组中，对应于另一个 Paypal 电子邮件地址数组。

```
$receiverAmountArray = array(
        .5*$backing_amount,
        .95*$backing_amount
        ); 
```

第二个电子邮件地址设置为主。最大金额的接收者必须是主要的。

```
$receiverPrimaryArray = array(
        'false',
        'true'
        ); 
```

CallPay（来自 Paypal 的库）被称为：

```
$resArray = CallPay ($actionType, $cancelUrl, $returnUrl, $currencyCode, $receiverEmailArray,
                        $receiverAmountArray, $receiverPrimaryArray, $receiverInvoiceIdArray,
                        $feesPayer, $ipnNotificationUrl, $memo, $pin, $preapprovalKey,
                        $reverseAllParallelPaymentsOnError, $senderEmail, $trackingId
); 
```

这是CallPay功能。对不起，长度：

```
function CallPay( $actionType, $cancelUrl, $returnUrl, $currencyCode, $receiverEmailArray, $receiverAmountArray,
                        $receiverPrimaryArray, $receiverInvoiceIdArray, $feesPayer, $ipnNotificationUrl,
                        $memo, $pin, $preapprovalKey, $reverseAllParallelPaymentsOnError, $senderEmail, $trackingId )
    {
        /* Gather the information to make the Pay call.
            The variable nvpstr holds the name value pairs
        */

        // required fields
        $nvpstr = "actionType=" . urlencode($actionType) . "&currencyCode=" . urlencode($currencyCode);
        $nvpstr .= "&returnUrl=" . urlencode($returnUrl) . "&cancelUrl=" . urlencode($cancelUrl);

        if (0 != count($receiverAmountArray))
        {
            reset($receiverAmountArray);
            while (list($key, $value) = each($receiverAmountArray))
            {
                if ("" != $value)
                {
                    $nvpstr .= "&receiverList.receiver(" . $key . ").amount=" . urlencode($value);
                }
            }
        }

        if (0 != count($receiverEmailArray))
        {
            reset($receiverEmailArray);
            while (list($key, $value) = each($receiverEmailArray))
            {
                if ("" != $value)
                {
                    $nvpstr .= "&receiverList.receiver(" . $key . ").email=" . urlencode($value);
                }
            }
        }

        if (0 != count($receiverPrimaryArray))
        {
            reset($receiverPrimaryArray);
            while (list($key, $value) = each($receiverPrimaryArray))
            {
                if ("" != $value)
                {
                    $nvpstr = $nvpstr . "&receiverList.receiver(" . $key . ").primary=" . urlencode($value);
                }
            }
        }

        if (0 != count($receiverInvoiceIdArray))
        {
            reset($receiverInvoiceIdArray);
            while (list($key, $value) = each($receiverInvoiceIdArray))
            {
                if ("" != $value)
                {
                    $nvpstr = $nvpstr . "&receiverList.receiver(" . $key . ").invoiceId=" . urlencode($value);
                }
            }
        }

        // optional fields
        if ("" != $feesPayer)
        {
            $nvpstr .= "&feesPayer=" . urlencode($feesPayer);
        }

        if ("" != $ipnNotificationUrl)
        {
            $nvpstr .= "&ipnNotificationUrl=" . urlencode($ipnNotificationUrl);
        }

        if ("" != $memo)
        {
            $nvpstr .= "&memo=" . urlencode($memo);
        }

        if ("" != $pin)
        {
            $nvpstr .= "&pin=" . urlencode($pin);
        }

        if ("" != $preapprovalKey)
        {
            $nvpstr .= "&preapprovalKey=" . urlencode($preapprovalKey);
        }

        if ("" != $reverseAllParallelPaymentsOnError)
        {
            $nvpstr .= "&reverseAllParallelPaymentsOnError=" . urlencode($reverseAllParallelPaymentsOnError);
        }

        if ("" != $senderEmail)
        {
            $nvpstr .= "&senderEmail=" . urlencode($senderEmail);
        }

        if ("" != $trackingId)
        {
            $nvpstr .= "&trackingId=" . urlencode($trackingId);
        }

        /* Make the Pay call to PayPal */
        $resArray = hash_call("Pay", $nvpstr);

        /* Return the response array */
        return $resArray;
    } 
```

这是调用前 $nvpstr 的值。Paypal 是否可能只是将付款金额作为主要付款？这在链式支付的背景下没有意义。

```
actionType=PAY¤cyCode=USD&returnUrl=https%3A%2F%2F.com%2Fview_profile.php&cancelUrl=https%3A%2F%2Fexamplefunding.com%2Fview_profile.php&receiverList.receiver(0).amount=95&receiverList.receiver(1).amount=5&receiverList.receiver(0).email=recip_1334204171_biz%40example.com&receiverList.receiver(1).email=example_1334201682_biz%40example.com&receiverList.receiver(0).primary=true&receiverList.receiver(1).primary=false&receiverList.receiver(0).invoiceId=5c4e2902cbe484a0db37284f0144994c&receiverList.receiver(1).invoiceId=6f3d8ce65d1a59b41f8822ba6129ea58&feesPayer=PRIMARYRECEIVER&memo=New+Draft+Lines+-+ExampleFunding.com&senderEmail=paypal_1334201496_per%40example.com&trackingId=mqN8SSgIq 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T19:06:03.880

根据[Paypal 的自适应支付文档](https://cms.paypal.com/cms_content/US/en_US/files/developer/PP_AdaptivePayments.pdf%20%2aPaypal%27s%20Adaptive%20Payments%20Documentation)：

> 在链式支付中，发送者向主要接收者支付一定金额，主要接收者从中支付次要接收者。发送者只知道主要接收者，不知道次要接收者。

因此，这是按预期工作的。为了向二级收款人支付总金额的 5%，我必须更改以下内容：

```
$receiverAmountArray = array(
        .05*$backing_amount,
        .95*$backing_amount
        ); 
```

对此：

```
$receiverAmountArray = array(
        .05*$backing_amount,
        $backing_amount
        ); 
```

认为总金额是数组中各个接收者金额的总和是我的错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T03:42:14.020

例如：total_amount = 100；

如果我们设置receiverList.receiver(0).primary=true 那么receiverList.receiver(0).amount = total_amount;

和receiverList.receiver(1).amount=95%*total_amount

# spring - 如何在java类中使用appicationcontextaware

> ID：10129629
> 
> 赞同：0
> 
> 时间：2012-04-12T18:32:59.803
> 
> 标签：spring, applicationcontext

我需要在定义了applicationcontextaware bean的java类中加载applicationcontext。我需要使用 applicationcontextaware 访问 applicationcontext.xml 中的其他 bean。我不想使用加载上下文

ClassPathXmlApplicationContext("applicationContext.xml");

我需要像这样访问applicationContext中的bean

ApplicationContextAccess.getInstance().getApplicationContext.getbean("BeanName");

Applicationcontextaccess 实现为单例类：

公共类 ApplicationContextAccess 实现 ApplicationContextAware {

```
private ApplicationContext applicationContext = null;
private static ApplicationContextAccess applicationContextAccess=null;

private ApplicationContextAccessor() {

}

public static synchronized ApplicationContextAccess getInstance() {

        if(applicationContextAccess == null)
    {
        applicationContextAccess = new ApplicationContextAccess();
    }

    return applicationContextAccess;

}
public void ApplicationContext getApplicationContext() {
    return applicationContext;
}

public void setApplicationContext(ApplicationContext applicationContext) throws BeansException {
    applicationContext = applicationContext;

} 
```

}

我需要像这样访问applicationContext中的bean ApplicationContextAccess.getInstance().getApplicationContext.getbean("BeanName");

但我有疑问 getApplicationContext 如何加载 applicationContext.xml........？

# c# - 空合并运算符“??” 未捕获作为外键的数据库空值

> ID：10129631
> 
> 赞同：0
> 
> 时间：2012-04-12T18:33:12.770
> 
> 标签：c#, exception-handling, null, operators

我有一个简单的 C# 语句：

```
var code = container.thing.result.decode ?? "Unknown"; 
```

这会引发“未设置对象实例的对象引用”。数据库值为空时的异常。它与非空值完美地工作（到目前为止）。我尝试更明确并用三元运算符重写了该行：

```
var outcome = container.thing.result.decode == null ? "Unknown" : container.thing.result.decode; 
```

我得到了相同的结果，但有相同的异常（ReSharper 引导我回到更简单的 ?? 语句）。

我也读到了？？运算符仅适用于可为空的类型。我正在使用的字段不是可为空的类型，它是 nvarchar(100) 并且也是查找表的外键。正如我上面所说，该语句适用于有效的非空值。

应用程序的 ORM 也有一个 CODE 值，以形成一个 CODE 和 DECODE 对，看起来它应该映射到查找表。

但我不知道如何处理空值。

谢谢！

编辑：感谢您的快速回复！我确实在发布后几分钟就弄清楚了我在哪里感到困惑。我认为把问题写出来有助于我描述问题。我更改了语句以检查引用查找表的实际字段是否为空：

```
var outcome = container.thing.database_code_field == null ? "Unknown" : container.thing.result.Decode; 
```

这看起来像我想要的。再次感谢你！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-12T18:34:58.507

You'll get an exception if *any* of the following is null:

*   `container`
*   `container.thing`
*   `container.thing.result`

We can't tell which of those values is null in your situation, or whether null is a valid value. You should work that out and then either fix whatever's giving you a null value, or write code to handle that case.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-12T18:36:24.063

You need to step through your entire member hierarchy.

For example, if `container` is null, then you cannot access `container.thing`. And if `container.thing` is null, you cannot access `container.thing.results`, etc.

It is not enough to simply catch the case where the very last member is null.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T18:35:22.830

The problem is that `container`, `thing`, or `result` is null, not `decode`. If `decode` was null then the `??` operator would set the string appropriately.

`??` is a function that takes some nullable value and a non-null value to replace it. The entire left hand side of the `??` operator needs to be evaluated to pass it into that function, and if one of the previously mentioned variables is null it doesn't even get that far.

# java - 创建面板的图像只是创建一个面板图像，而不是面板上的东西

> ID：10129635
> 
> 赞同：0
> 
> 时间：2012-04-12T18:33:24.070
> 
> 标签：java, swing

我正在编写代码来制作显示在面板上的图表的图像文件。为此，我创建了缓冲图像，然后使用 ImageIO.write()。它可以工作，但只显示面板（灰色面板），但不显示该面板上的图表。这种情况该怎么办？？这是我的代码

```
com.objectplanet.chart.NonFlickerPanel p = 
    new com.objectplanet.chart.NonFlickerPanel(new BorderLayout());
p.add("Center", chart); // this statements adds the chart in the center of the panel
ChartPanel.add("Center", p);
ChartPanel.setSize(500, 200);
ChartPanel.show();
 int w = ChartPanel.getWidth();
int h =  ChartPanel.getHeight();
  BufferedImage bi = new BufferedImage(w, h, BufferedImage.TYPE_INT_RGB);
  Graphics2D g = bi.createGraphics();
  ChartPanel.paint(g);
  ChartPanel.printAll(g);
  File f = new File("D:\\image.png");
    try {
            // png is an image format (like gif or jpg)
            ImageIO.write(bi, "png", f);
    } catch (IOException ex) {
        ex.printStackTrace();
    } 
```

好吧，我解决了这个问题。任何面临同样问题的人，这里是解决方案

使用paintall函数而不是仅仅使用paint函数

# javascript - 需要在其他字段的实时状态上显示其他字段

> ID：10129638
> 
> 赞同：0
> 
> 时间：2012-04-12T18:33:35.830
> 
> 标签：javascript, jquery

当用户从州下拉列表中选择州时，它将在下拉字段中显示高中列表。

一旦用户选择了一个州，我就可以显示高中，但是当用户提交没有选择高中的表单时我遇到了麻烦。如果他们不选择高中，则不会显示该表格。

这不是真正的问题，这是表单验证失败的一种方式，这让我想到了我的问题。

当用户验证失败时，它将显示相同的表单，其中的字段填写了他们在提交表单之前输入的信息。

州下拉菜单是用他们选择的州预先选择的，但高中下拉菜单是看不到的。如果我取消选择州下拉菜单，然后重新选择一个州，则会显示高中列表。

我在#state 字段上使用绑定更改。

如何显示高中字段而无需等待单击或更改状态字段？

```
<select name="state" id="state">
 <option></option>
 <option value="NY">NY</option>
 <option value="TX">TX</option>
</select>

<select name="high_school" id="high_school">
 <option></option>
 <option value="Bayside High">Bayside High</option>
 <option value="Ridgemont High">Ridgement High</option>
</select>

$("#high_school").hide();

$('#state').bind('change', function() {
  $("#high_school").show();
}); 
```

我想我需要留意#state on load

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T19:05:00.773

你是对的，关于在负载上密切关注#state。

```
//check to see if something in #state is selected, if not hide #high_school
if($("#state").val() == '') {
    $("#high_school").hide();
}

$('#state').bind('change', function() {
  $("#high_school").show();
}); 
```

见：http: [//jsfiddle.net/89K5G/](http://jsfiddle.net/89K5G/)

尝试选择#state，然后刷新框架:)

# php - IE8 中的 Ajax 调用不显示所有数据，在 Firefox 和 IE9 中有效

> ID：10129639
> 
> 赞同：0
> 
> 时间：2012-04-12T18:33:37.977
> 
> 标签：php, javascript, ajax, firefox, internet-explorer-8

大家晚上好！

我有一个 Ajax 调用，将 5 个“回声”从 php 脚本加载到 div 中。第一个回显创建一个隐藏的表单字段，其中 ID 作为值。其余的都是肤浅的，并且具有在页面周围移动 div 的链接。

在 Firefox 中，加载了完整的数据，但在 IE 中，它错过了第一个回显，仅显示其他详细信息。我缺少我需要作为标识符的隐藏元素。

```
//Some other PHP code.....  the * and % in the value are delimiters for splitting a string later.

echo "<input type='hidden' value='*$substept,$subscon%'>";
echo "<a href='javascript:remcol($part)'>.-.</a>".$substept . "<a href='javascript:paddcolumn($part)'>.+.</a> <br> <a href='javascript:mleft($part)'><<</a>" . $subscon . "<a href='javascript:mright($part)'>>></a>";
echo "<br>Column title <br><input type='text' id='title' size = '10'>";
echo "<br>Column width ";
echo "<br><input type='text' id='tb' size = '10'>"; 
```

IE到底怎么会选择性地漏掉一行php？！隐藏字段绝对没有 html。然而。这不会每次都发生。25 个不同的 DIV 最多调用此函数 25 次，它会在 IE 中正常工作。

检查了它里面的表格等等。不知道发生了什么！

IE 8 中 3 次调用后的示例源代码：：查看 Div 03 HTML。

```
<DIV style="BORDER-BOTTOM: #000 1px solid; BORDER-LEFT: #000 1px solid; BORDER-TOP: #000 1px solid; BORDER-RIGHT: #000 1px solid" id=o1>productspgroup<INPUT value=*products,pgroup% type=hidden><A href="javascript:remcol(1)">.-.</A>products<A href="javascript:paddcolumn(1)">.+.</A> <BR><A href="javascript:mleft(1)">&lt;&lt;</A>pgroup<A href="javascript:mright(1)">&gt;&gt;</A><BR>Column title <BR><INPUT id=title size=10><BR>Column width <BR><INPUT id=tb size=10></DIV>
<DIV style="BORDER-BOTTOM: #000 1px solid; BORDER-LEFT: #000 1px solid; BORDER-TOP: #000 1px solid; BORDER-RIGHT: #000 1px solid" id=o2>customerphone1<INPUT value=*customer,phone1% type=hidden><A href="javascript:remcol(2)">.-.</A>customer<A href="javascript:paddcolumn(2)">.+.</A> <BR><A href="javascript:mleft(2)">&lt;&lt;</A>phone1<A href="javascript:mright(2)">&gt;&gt;</A><BR>Column title <BR><INPUT id=title size=10><BR>Column width <BR><INPUT id=tb size=10></DIV>
<DIV style="BORDER-BOTTOM: #000 1px solid; BORDER-LEFT: #000 1px solid; BORDER-TOP: #000 1px solid; BORDER-RIGHT: #000 1px solid" id=o3><A href="javascript:remcol(3)">.-.</A>products<A href="javascript:paddcolumn(3)">.+.</A> <BR><A href="javascript:mleft(3)">&lt;&lt;</A>price<A href="javascript:mright(3)">&gt;&gt;</A><BR>Column title <BR><INPUT id=title size=10><BR>Column width <BR><INPUT id=tb size=10></DIV>
<DIV id=o4></DIV>
<DIV id=o5></DIV>
<DIV id=o6></DIV> 
```

按照建议检查语法后::

```
<DIV style="BORDER-BOTTOM: #000 1px solid; BORDER-LEFT: #000 1px solid; BORDER-TOP: #000 1px solid; BORDER-RIGHT: #000 1px solid" id=o1><A href="javascript:remcol(1)">.-.</A> customer <A href="javascript:paddcolumn(1)">.+.</A> <BR><A href="javascript:mleft(1)">&lt;&lt;</A>surname<A href="javascript:mright(1)">&gt;&gt;</A><BR>Column title <BR><INPUT id=title size=10><BR>Column width <BR><INPUT id=tb size=10></DIV>
<DIV style="BORDER-BOTTOM: #000 1px solid; BORDER-LEFT: #000 1px solid; BORDER-TOP: #000 1px solid; BORDER-RIGHT: #000 1px solid" id=o2><INPUT value=*customer,email% type=hidden><A href="javascript:remcol(2)">.-.</A>customer<A href="javascript:paddcolumn(2)">.+.</A> <BR><A href="javascript:mleft(2)">&lt;&lt;</A>email<A href="javascript:mright(2)">&gt;&gt;</A><BR>Column title <BR><INPUT id=title size=10><BR>Column width <BR><INPUT id=tb size=10></DIV>
<DIV style="BORDER-BOTTOM: #000 1px solid; BORDER-LEFT: #000 1px solid; BORDER-TOP: #000 1px solid; BORDER-RIGHT: #000 1px solid" id=o3><INPUT value=*customer,email% type=hidden><A href="javascript:remcol(3)">.-.</A>customer<A href="javascript:paddcolumn(3)">.+.</A> <BR><A href="javascript:mleft(3)">&lt;&lt;</A>email<A href="javascript:mright(3)">&gt;&gt;</A><BR>Column title <BR><INPUT id=title size=10><BR>Column width <BR><INPUT id=tb size=10></DIV>
<DIV style="BORDER-BOTTOM: #000 1px solid; BORDER-LEFT: #000 1px solid; BORDER-TOP: #000 1px solid; BORDER-RIGHT: #000 1px solid" id=o4><INPUT value=*customer,email% type=hidden><A href="javascript:remcol(4)">.-.</A>customer<A href="javascript:paddcolumn(4)">.+.</A> <BR><A href="javascript:mleft(4)">&lt;&lt;</A>email<A href="javascript:mright(4)">&gt;&gt;</A><BR>Column title <BR><INPUT id=title size=10><BR>Column width <BR><INPUT id=tb size=10></DIV>
<DIV id=o5></DIV> 
```

Javascript：

```
function choosedata(cin){

cot = "so"+cin;
var strr="main.php?func=21&part=" + cin + "&step=" + counter[cin] + "&subs=";
colchange = 'o' + cin;
if (counter[cin] >=2){
strr = strr + document.getElementById(cot).value;
}

callajaxd(strr, colchange);
counter[cin]++;

}

function callajaxd(str,elemin)   //URL String, Box to go in
{
if (str=="")
{
document.getElementById(elemin).innerHTML="";
var back = "";
return;
}

if (window.XMLHttpRequest)
{// code for IE7+, Firefox, Chrome, Opera, Safari
xmlhttp=new XMLHttpRequest();
} 
else
{// code for IE6, IE5
xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
}
xmlhttp.onreadystatechange=function()
{
document.getElementById(elemin).innerHTML="<img src='loading.gif' />";
if (xmlhttp.readyState==4 && xmlhttp.status==200)
  {
 document.getElementById(elemin).innerHTML = xmlhttp.responseText;
 } 

}
xmlhttp.open("GET",str,true);
xmlhttp.send();

} 
```

现在回家使用 IE9，它工作正常，至少它是唯一的 IE8，但即使在兼容模式下我也无法在 Windows 7 电脑上安装 IE8，所以没有得到 virtualbox，我明天必须继续调试.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T16:06:40.073

感谢您对此的所有帮助和建议。这个问题似乎与我拥有的 cPanel 托管帐户有关。服务器在负载下出现问题。共享主机是我自己的错！干杯!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T19:03:46.613

只是一个想法，尝试将第一个 echo 中声明的变量包装在花括号中：

```
echo "<input type='hidden' value='*{$substept},{$subscon}%' />"; 
```

我正在考虑将它们与 metachars 隔离开来。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T18:42:45.407

只是一个想法，让你的语法准确并添加尾部斜杠：

```
<input type='hidden' value='*$substept,$subscon%' /> 
```

IE有时可能是个婊子。但我不明白为什么只有第一个会被剥夺。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-12T18:43:11.833

在您的 jQuery ajax 函数中尝试设置选项缓存：'false'

```
$.ajax({
    url: 'blah.php',
    type: 'post',
    cache: 'false'
}); 
```

或者您可以在 url 中附加一些随机时间变量，这将诱使 IE 认为该页面是新页面并且不会使用缓存版本。

```
$.ajax({
    url: 'blah.php?foo=<?php echo time(); ?>'
}); 
```

希望这会有所帮助......编辑：完全误解了这个问题......认为它是 IE 缓存 ajax 调用；）

# script# - 发出 javascript 调试器；来自 Script Sharp

> ID：10129658
> 
> 赞同：3
> 
> 时间：2012-04-12T18:34:17.923
> 
> 标签：script#

我只想发出调试器；从 c# 脚本清晰的代码到 javascript。我意识到我可以编写**Script.Literal("debugger")**。除非绝对需要，否则我宁愿不使用 Script.Literal。我更喜欢写 Debugger.Break(); 之类的东西。在 c# 中，发出的 javascript 只是调试器；如果我创建一个导入库，是否有某种属性可以让我这样做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T23:20:55.117

这是一个相当黑客，但它的工作原理。当您想做的事情没有得到官方支持时，您必须发挥创造力，对吗？

它基于 Script.Alert 的工作方式，并利用该`[ScriptAlias]`属性来包含 JavaScript 注释。幸运的是，ScriptAliasAttribute 传递了准确提供的值，并且不会以任何方式对其进行清理。

```
namespace MyNamespace
{

    [GlobalMethods]
    [IgnoreNamespace]
    [Imported]
    public static class Debugger
    {
        [ScriptAlias("debugger;//")]//must comment out ();
        public static void Break()
        {
            //this outputs -  debugger;//();
        }
    }
} 
```

因此，使用上面的代码，您可以编写`Debugger.Break();`您的 C# 代码，并且您将获得`debugger;//();`发出的 JavaScript。有点丑陋，但它的工作原理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T21:25:54.160

为什么不使用 Debug.Fail ... 这将是 c# 代码的规范。

# php - 未检测到 php 会话

> ID：10129659
> 
> 赞同：1
> 
> 时间：2012-04-12T18:34:19.933
> 
> 标签：php

我有一个登录页面，我注册了两个会话用户名和密码。然后重定向到另一个页面。曾经在这个页面

```
$_SESSION['username'] = "";
$_SESSION['password'] = ""; 
```

登录检查后，我有下一页检查会话是否已注册

```
session_start();

if(isset($_SESSION["username"]){

continue

}else go back to login page 
```

登录后，我想转到另一个页面，这取决于是否设置了会话变量，我会在页面上显示不同的内容。

所以在画廊页面上我做

在我做的页面的最顶部

```
<?php 
session_start();

?> 
```

然后再往下我想要按钮的地方

```
<?php
if (isset($_SESSION['username'])){

show a new button

}

?> 
```

我得到了要显示的按钮，但在页面顶部我有

```
Warning: session_start() [function.session-start]: Cannot send session cache limiter - headers already sent 
```

它弄乱了我的页面的显示方式。有任何想法吗？我有 session_start(); 在页面的非常乞求时，我不知道为什么会这样。有任何想法吗？

![我的 session_start() 所在的位置](../Images/1da132555656a003f8ab4724b738a802.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T18:36:55.277

如果在调用`session_start()`. 例如，您不能这样做：

```
<?php

echo "Test";

session_start(); 
```

你也不能这样做：

```
 <?php session_start(); 
```

（注意前面的空格`<?php`）

确保**没有任何内容**——没有 HTML、没有空行、没有空格——在你打电话之前被写出来`session_start()`，你会没事的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T18:36:20.760

您需要确保**在**您的`<?php`. `session_start()`这也适用于您在调用之前包含的任何文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T18:37:47.640

图库页面是否包含在另一个文件中？

```
<?php

// lots of php code

include('/path/to/gallery.php');

?> 
```

如果在 session_start() 之前有任何东西被发送到浏览器；它会产生这个错误。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-04-12T18:45:35.417

会话是一个标头，在任何输出（甚至是单个空格）之后都不能发送标头。您有 2 个选项，将 session_start() 放在任何输出之前，或者您也可以使用输出缓冲，这允许您在输出后发送标头。

将其放在脚本的顶部

```
ob_start(); 
```

最后是这个

```
echo ob_get_clean(); 
```

# delphi - 在 TestComplete 中使用第三方树对象

> ID：10129663
> 
> 赞同：1
> 
> 时间：2012-04-12T18:34:25.123
> 
> 标签：delphi, testcomplete

我正在尝试改进包含 TElTreeView 类的第三方 Delphi 树的脚本。我可以在 ElTree1 对象中找到我想要单击并展开的指定项目，但我似乎无法通过 TC 脚本通过其索引值访问它。我需要检查、扩展该项目并相应地设置它下面的几个子项目。

如果我只是执行以下操作...

```
w := p.frmOpts;
tvw := w.VCLObject('ElTree1');
tvw.Selected.Checked := true; 
```

...然后将检查打开窗口时默认突出显示的行项目。我已经尝试了很多其他的东西，但到目前为止还没有运气。我试图避免使用 Sys.Keys。

有任何想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T16:16:51.563

您需要使用调试信息编译您的应用程序，以便**TestComplete**的**调试信息代理**可以为该工具提供对所有本机方法和控件属性的访问。一旦 TestComplete 可以找到调试信息，您就可以通过以下方式访问树项：

```
procedure Test;
  ...
  w := p.frmOpts;
  tvw := w.VCLObject('ElTree1');
  tvw.Items.Item(1).Checked := true;
end; 
```

[在调试信息代理](http://support.smartbear.com/support/viewarticle/12507/)帮助主题中查找有关如何使用 TestComplete 的调试信息正确编译 Delphi 应用程序的详细信息。单击与您的 Delphi 版本对应的链接以获取步骤。

[此外，您可以在此调查](http://support.smartbear.com/products/more-info/testcomplete-survey/)中投票支持在未来版本的 TestComplete 中为您的控件提供高级支持。

**更新：**

尽管 TestComplete 没有像其他一些广泛使用的树视图控件那样对**TElTreeView控件提供扩展支持，但可以创建脚本例程以在高级别的控件上工作。**这些例程将使用 TestComplete 的 Open Application 功能通过其本机方法和属性与树控件一起使用。下面的示例脚本演示了如何做到这一点。

```
function getTreeNode(tree, nodeName); forward;
function clickTreeNode(tree, node); forward;

procedure test;
var
  tree;
  nodeName;
  node;
begin
  tree := Sys.Process('ElTreeTest').VCLObject('Form1').VCLObject('ElPanel1').VCLObject('ElTree1');
  nodeName := 'Item B|Item BB|Item BBA';
  node := getTreeNode(tree, nodeName);
  if node <> nil then
    Log.Message(node.Caption)
  else
  begin
    Log.Error('Node "' + nodeName + '" not found');
    Runner.Stop;
  end;

  node.MakeVisible;
  node.Checked := not node.Checked;
  clickTreeNode(tree, node);
end;

function clickTreeNode(tree, node);
var
  x, y;
begin
  node.MakeVisible;
  x := (node.TextRect.Left + node.TextRect.Right) / 2;
  y := (node.TextRect.Top + node.TextRect.Bottom) / 2;
  tree.Click(x, y);
end;

function getTreeChildNode(rootNode, nodeName);
var
  i;
  item;
  nodeCaption;
begin
  result := nil;
  if rootNode = nil then
    exit;

  nodeCaption := aqString.GetListItem(nodeName, 0);

  for i := 0 to rootNode.ChildrenCount - 1 do
  begin
    item := rootNode.Children(i);
    if item.Caption = nodeCaption then
    begin
      result := item;
      break;
    end;
  end;

  if aqString.GetListLength(nodeName) > 1 then
    result := getTreeChildNode(result, aqString.DeleteListItem(nodeName, 0));
end;

function getTreeNode(tree, nodeName);
var
  rootNodeCaption;
  item;
  i;
begin
  aqString.ListSeparator := '|';
  rootNodeCaption := aqString.GetListItem(nodeName, 0);
  result := nil;

  for i := 0 to tree.Items.Count - 1 do
  begin
    item := tree.Items.Item(i);
    if item.Parent = nil then
    begin
      if item.Caption = rootNodeCaption then
      begin
        result := item;
        break;
      end;
    end;
  end;

  if aqString.GetListLength(nodeName) > 1 then
    result := getTreeChildNode(result, aqString.DeleteListItem(nodeName, 0));
end; 
```

# asp.net-mvc-3 - 验证属性被触发两次

> ID：10129669
> 
> 赞同：3
> 
> 时间：2012-04-12T18:34:46.580
> 
> 标签：asp.net-mvc-3, validation, ninject, ninject.web.mvc, model-validation

在我的 MVC3 应用程序中，我有模型（不重要的属性已删除）：

```
public class AccountViewModel
{
    [StringLength(65)]
    public string Property1 { get; set; }

    [StringLength(65)]
    public string Property2 { get; set; }
} 
```

问题是当一个动作被提交验证属性调用两次时，我可以得到 4 个错误，而不是 2 个：

```
'Property1' length must be less than 65 characters
'Property1' length must be less than 65 characters
'Property2' length must be less than 65 characters
'Property2' length must be less than 65 characters 
```

我不在控制器代码中使用 Validate 方法。这个问题也出现在我的自定义属性中，但它不会发生在必需属性上。另外我必须注意自定义属性的 ctor 也被调用了两次

我的行动

```
[HttpPost]
public ActionResult CreateOrEdit(AccountViewModel model) {

    if (!ModelState.IsValid) {
        return View("Edit", model);
    }

    try {
        _accountService.InsertOrUpdate(model);

    }
    catch (Exception ee) {
        ModelState.AddModelError("", ee.Message);
        return View("Edit", model);
    }

    return RedirectToAction("Index");
} 
```

在查看时，我使用以下方法呈现我的错误：

```
@{
    var errors = ViewData.ModelState.Errors();
    <div class="alert alert-block alert-error @(errors.Count == 0 ? "hide" : "")" > 
    <h4 class="alert-heading"> You got an error!</h4> 
    <ul>
        @foreach (var error in errors) {
            <li>@error</li>
        }
    </ul>
    </div>
} 
```

我再次再次检查 ViewData.ModelState 已经包含两次错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T07:59:27.493

问题在于集成 Ninject。如果您使用**Ninject.MVC**包（我使用版本 3），它会在初始化时注册他自己的 ModelValidationProvider 并删除旧的：

在**Ninject.Web.Mvc.MvcModule**

```
this.Kernel.Bind<ModelValidatorProvider>().To<NinjectDataAnnotationsModelValidatorProvider>(); 
```

在**Ninject.Web.Mvc.NinjectMvcHttpApplicationPlugin 中**：

```
public void Start()
{
    ModelValidatorProviders.Providers.Remove(ModelValidatorProviders.Providers.OfType<DataAnnotationsModelValidatorProvider>().Single());
    DependencyResolver.SetResolver(this.CreateDependencyResolver());
    RemoveDefaultAttributeFilterProvider();
} 
```

因此，我没有创建自己的 IDependencyResolver 实现（Ninject Kernel 包装器），而是按照本[教程](https://github.com/ninject/ninject.web.mvc/wiki/Setting-up-an-MVC3-application)进行 操作，或者您应该删除 Ninject.MVC 包并从 bin 文件夹中删除其二进制文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-05-13T08:44:19.980

此问题是由于 NInject 使用不当引起的。

解决这个问题在`NinjectWebCommon`类`CreateKernel()`方法中添加`kernel.Rebind<ModelValidatorProvider>().To<NinjectDefaultModelValidatorProvider>();`

这是代码示例。

```
private static IKernel CreateKernel()
        {
            var kernel = new StandardKernel();
            try
            {
                kernel.Bind<Func<IKernel>>().ToMethod(ctx => () => new Bootstrapper().Kernel);
                kernel.Bind<IHttpModule>().To<HttpApplicationInitializationHttpModule>();
                RegisterServices(kernel);
                GlobalConfiguration.Configuration.DependencyResolver = new NinjectDependencyResolver(kernel);
                kernel.Rebind<ModelValidatorProvider>().To<NinjectDefaultModelValidatorProvider>();
                return kernel;
            }
            catch
            {
                kernel.Dispose();
                throw;
            }
        } 
```

# sql - ID with multiple entries needs changed to one entry per ID

> ID：10129679
> 
> 赞同：2
> 
> 时间：2012-04-12T18:35:34.943
> 
> 标签：sql, sql-server-2008, tsql, pivot, case

I have 3 fields: ID, Date, Rate. For each ID there are multiple Dates and Rates coming from a table I'll call 'history'

```
ID   Date        Rate
1    12/12/11    1.2
1    08/10/10    1.8
2    01/01/09    0.2
2    03/12/08    0.5
3    06/01/12    1.1
3    07/20/10    0.9
.... 
```

I need a solution that has ID, Date 2011, Date 2010, Date 2009 with the corresponding rates (or null/blank if no rate entry exists for that year) populating the date fields.

```
ID   Date2011  Date2010  Date2009
1      1.2        1.8       null
2      null       null      0.2
3      null       0.9       null 
```

I've struggled at getting a pivot to work with this and am now trying to use case statements.

This is what I have so far:

```
SELECT id, date, rate, 
CASE WHEN date <= '12/31/11' AND date >= '1/1/11' THEN rate END AS '2011', 
CASE WHEN date <= '12/31/10' AND date >= '1/1/10' THEN rate END AS '2010', 
CASE WHEN date <= '12/31/09' AND date >= '1/1/09' THEN rate END AS '2009'
FROM history
ORDER BY id 
```

problem I am getting now is each different rate has its' own line. ex:

> ```
> ID   Date2011  Date2010  Date2009
> 1      1.2        null       null
> 1      null       1.8        null
> 2      null       null       0.2
> 3      null       0.9        null 
> ```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T18:55:04.427

只要您只想要这三年范围，一个简单的方法是：

```
SELECT f.id, f2011.rate, f2010.rate, f2009.rate
FROM (SELECT id FROM fields GROUP BY id) f
LEFT JOIN fields f2011 ON f.id = f2011.id AND f2011.date >= '01.01.2011' AND f2011.date < '31.12.2011'
LEFT JOIN fields f2010 ON f.id = f2010.id AND f2010.date >= '01.01.2010' AND f2010.date < '31.12.2010'
LEFT JOIN fields f2009 ON f.id = f2009.id AND f2009.date >= '01.01.2009' AND f2009.date < '31.12.2009' 
```

否则结帐 PIVOT。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T14:32:56.040

你可以`PIVOT`这样使用：

```
create table #temp
(
    id int,
    date datetime,
    rate decimal(10,2)
)

insert into #temp values(1, '12/12/11', 1.2)
insert into #temp values(1, '08/10/10', 1.8)
insert into #temp values(2, '01/01/09', 0.2)
insert into #temp values(2, '03/12/08', 0.5)
insert into #temp values(3, '06/01/12', 1.1)
insert into #temp values(3, '07/20/10', 0.9)

select *
from 
(
    select id, rate, year(date) as yearDate
    from #temp
) x
pivot
(
    max(rate)
    for yearDate in([2011], [2010], [2009], [2008])
) p

drop table #temp 
```

# c# - 在 C# 中使用全局变量的最佳实践

> ID：10129680
> 
> 赞同：15
> 
> 时间：2012-04-12T18:35:38.000
> 
> 标签：c#, global-variables

[有人曾经说过](http://social.msdn.microsoft.com/Forums/en-US/csharpgeneral/thread/071dc2fb-76c3-4484-8418-6b37664995f7/)：

> *“全局变量”实际上是您创建的一个变量，只是为了“保存一些信息”，因为您的对象模型很弱，并且您还没有找到该变量存在的“真正目的”。全局变量几乎总是一个更大的架构畸形的标志。*

[那可能是真的](http://www.c2.com/cgi/wiki?GlobalVariablesAreBad)。但是我不知道任何没有全局变量的大而好的程序的好例子，当然也没有像上面建议的那样少用。[**范围**是实际的关键](https://stackoverflow.com/questions/357187/when-are-global-variables-acceptable)。[您可以在只有一个类的程序](https://stackoverflow.com/a/1263220/274502)中说它的参数[不是全局变量](https://stackoverflow.com/questions/895595/how-do-i-persist-data-without-global-variables)。但他们是。

反正...

我仍在掌握**[单例](http://en.wikipedia.org/wiki/Singleton_pattern)**的概念，据我所知，它们[实际上](https://stackoverflow.com/questions/3136008/is-this-singleton-implementation-correct-and-thread-safe)在 C# 中没有意义。我也觉得当无法避免全局状态时，我们仍然应该避免简单地使用一个充满**[静态属性](https://stackoverflow.com/a/1163016/274502)**的公共类：

那么，如果不是单例也不是公共类，我们应该怎么做才能在 C# 中拥有全局变量？

我们什么时候应该使用它们？假设它们很可能无法避免。曾经。

为什么我们应该避免使用[静态类](https://stackoverflow.com/a/8734537/274502)或`static`一般情况下？如果 C# 确实如此。

一句话：**在 Csharp 中使用全局变量的最佳实践是什么**？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-12T18:40:11.833

这都是*上下文*的问题。

如果您可以确定计算所需的*环境*变量，则可以将该计算包装在更大的*上下文*中，其中这些*全局*变量具有更窄的范围（它们现在是上下文的本地变量）。

这更好，因为现在您可以拥有多个*context*实例化，它们应该独立工作并且不会相互干扰。它也称为*可重入*上下文。

# twitter - Twitter streaming API - trying to get results based on location/bounding box

> ID：10129681
> 
> 赞同：3
> 
> 时间：2012-04-12T18:35:43.347
> 
> 标签：twitter, geolocation, twitter-streaming-api

I am playing around with the Twitter Streaming API and have got my head around it at a basic level, but I can't seem to get reliable results for the location - I'm using a bounding box as specificed in the docs, the location I want to track is Glasgow but I am getting results from all over the world.

My bounding box is $locations = '55.67,-4.66,56.17,-3.892540'; Does anyone know how to get the correct bounding box? If these are correct, then is there another explanation for what might be happening? Thanks!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T20:50:01.363

You have it in latlon, twitter wants it lonlat. IOW, try '-4.66,55.67,-3.98,56.17'. BTW, IME, you'll still get tweets outside of the bounding box but hopefully not from "all over the world". :-)

# jquery - 停止表单提交拦截

> ID：10129682
> 
> 赞同：0
> 
> 时间：2012-04-12T18:35:53.720
> 
> 标签：jquery

我有以下代码：

```
$('form', dialog).submit(function () {
    ... 
```

然后每个提交的表单都会被拦截。

**我的问题**：我怎样才能阻止这种拦截？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T18:38:46.170

[解除绑定](http://api.jquery.com/unbind/)应该可以解决问题。

```
$('form', dialog).unbind("submit"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T18:37:50.790

您需要`return false;`像这样在函数的末尾添加：

```
function(){ 
    /* Some code */

    return false;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T18:40:51.960

根据[文档](http://api.jquery.com/submit/)，尝试`return true;`在函数末尾添加。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-12T18:46:13.470

你可以使用这个：

```
$('form', dialog).submit(function (e) {
e.preventDefault();
} 
```

`event.preventDefault()` 如果调用该方法，则不会触发事件的默认动作。

或者您可以简单地使用：

```
 $('form', dialog).submit(function (e) {
    //your code here 
    return false;
   } 
```

# coldfusion - ColdFusion Limit to 5 E-mails a Day

> ID：10129685
> 
> 赞同：1
> 
> 时间：2012-04-12T18:35:56.967
> 
> 标签：coldfusion, cfmail

Say I have the following script on page.cfm. Everytime somebody comes to page.cfm, an e-mail is sent to me. So if 1000 people come to page.cfm, I get 1000 e-mails.

```
<cfmail to="joe@smith.com"
from="error@smith.com"
subject="Error"
type="text">
A person visited.
</cfmail> 
```

I would like to limit it so I only get e-mails when the first 5 people visit in one day.

So if 2 people visit today, I get 2 e-mails. if 5 people visit I get 5, but if 100 people visit, I still get only 5 e-mails. And then the cycle continues the next day (if 2 people visit only 2 e-mails are send, but if 100 people visit only 5 e-mails are sent)

How can I do this with ColdFusion only? (without cfschedule)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-12T18:43:17.647

我能想到的最简单的方法是在一对应用程序变量中放置一个计数器和一个日期戳。

然后，对于每个请求，检查您记录的日期。如果不是今天，请将计数器变量重置为 1 并将日期重新设置为今天。

然后，在您放置 cfmail 标记的位置，检查计数器是否已达到您的限制。如果没有，请发送邮件。无论哪种方式，增加计数器。

在 Application.cfc onApplicationStart() 中：

```
<cfset application.alertDate = now()>
<cfset application.alertCount = 1> 
```

（以上主要是为了保证以后使用时变量存在）

在 Application.cfc onRequestStart() 中：

```
<cfif dateCompare(application.alertDate,now(),"d") EQ -1)>
  <cfset application.alertCount = 1>
  <cfset application.alertDate = now()>
</cfif> 
```

在 page.cfm 中：

```
<cfset application.alertCount++>
<cfif application.alertCount LTE 5>
  <cfmail ... >
</cfif> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-12T18:41:36.400

将访问/电子邮件计数存储在应用程序范围中，并每天通过以下任一方式重置应用程序范围

1.  将上次访问者日期也存储在应用程序范围内，并添加一些逻辑来重置计数，或者

2.  每天使用 cfscheduler 将计数重置为 0

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T01:39:42.407

聚会迟到了，我还不能评论以前的答案，所以我会这样做。给出的两个答案都可以，但是您确实需要知道，如果您的应用程序结束，这些应用程序范围变量将消失并重新初始化。如果它对您很重要，您将希望将值保存在某处，例如使用 getProfileString/setProfileString 访问的 INI 文件或数据库中的表。

# java - Criteria API 的更有用的替代方案

> ID：10129687
> 
> 赞同：9
> 
> 时间：2012-04-12T18:35:59.573
> 
> 标签：java, jpa, criteria-api

与使用 JPQL 或原始 SQL 相比，Criteria 具有一些优势，如[以下答案](https://stackoverflow.com/a/3422624/9204)所述：类型安全；重构友好性；减少对字符串的依赖（但仍然有一些）。还有一个很大的缺点：它们的可读性较差，而且很丑。是否有（非 JPA）Java API 用于访问类型安全且可读的关系数据库？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-12T23:21:24.030

[Timo Westkämper在](https://stackoverflow.com/users/252552/timo-westkamper)[QueryDSL](http://www.querydsl.com/)方面做得很好。这个库提供了一个用于查询不同持久性提供者（JPA、MongoDB、Lucene...）的 DSL。

但是我经常使用手工制作的解决方案来简化最常见的查询（列出限制其某些字段的实体），从而阻止我编写始终相同的行。对于大多数复杂的查询，我切换到不可读和冗长的 Criteria API。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T18:37:56.883

[我的巴蒂斯。](http://www.mybatis.org/)

> MyBatis 是一流的持久性框架，支持自定义 SQL、存储过程和高级映射。MyBatis 消除了几乎所有的 JDBC 代码和手动设置参数和检索结果。MyBatis 可以使用简单的 XML 或 Annotations 进行配置和映射原语、映射接口和 Java POJO（普通旧 Java 对象）到数据库记录。

或者，正如[nobeh 建议](https://stackoverflow.com/questions/10129687/more-usable-alternative-to-criteria-api/10129714#comment12984191_10129714)的那样：[jOOQ](http://www.jooq.org/)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-03T19:45:41.273

面对以下实用程序类，我找到了更轻松的 JPA 搜索的“终极”解决方案：[DynamicQueryBuilder](http://tamanmohamed.blogspot.com/2012/04/jpa-dynamic-search-builder-power-of.html)

1.  它提供了元模型，因此您无需使用连接来描述关系。

2.  它通过模板 pojo 搜索！只需将值放在实体实例中，它们将用作标准！

3.  它使用构建器模式，因此非常易读！

    ```
    Bank bank = new Bank();
    bank.setId(12L);
    bank.setAchCode("1213");
    bank.setCbeCode("1234");
    bank.setStatus(new Lookups(1L));
    bank.setAchShortName("121");

    List<integer> ids = new ArrayList<integer>();
    ids.add(1);
    ids.add(2);
    ids.add(3);
    ids.add(4);
    ids.add(5);

    List<string> cbeCodes = new ArrayList<string>();
    cbeCodes.add("1111");
    cbeCodes.add("2222");

    DynamicQueryBuilder queryDyncBuilder1 =
    new DynamicQueryBuilder.Builder(null).select(bank).withOperType(Operator.OperType.AND).
    withAdvancedParam("cbeCode", LIKE, PERCENT_AROUND).withAdvancedParam("id", IN, ids)
    .withAdvancedParam("achCode", BETWEEN, cbeCodes).withAdvancedParam("achShortName", GT)
    .orderBy("id").orderBy("cbeCode", true).orderBy("status.code", true).build();

    System.out.println(queryDyncBuilder1.getQueryString()); 
    ```

如果您运行上述调用，该组件将构建以下结果 JPQL 查询：

```
SELECT b 
FROM Bank b 
WHERE b.status = :status 
AND b.cbeCode LIKE :cbeCode 
AND b.achShortName > :achShortName 
AND b.id IN :id 
AND (b.achCode BETWEEN :achCodeFrom AND :achCodeTo) 
ORDER BY b.status.code DESC, b.id ASC, b.cbeCode DESC 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-11-11T18:09:55.217

我有一个项目，我需要一种理智的方式来动态组合许多复杂的 WHERE 子句，但我不需要 Hibernate 的所有额外功能以及随之而来的复杂性（如模式管理和模式生成、二级缓存、bean 映射、对象状态跟踪等）。找到这个问题后，我仍然对替代方案不满意，所以我改用了这个：

```
public class Pred {

    private String opcode;

    private Pred left;

    private Pred right;

    private Pred() {
    }

    public Pred(String opcode, Pred left, Pred right) {
        super();
        this.opcode = opcode;
        this.left = left;
        this.right = right;
    }

    private static Collection<Pred> collect(Pred left, Pred ... right) {
        List<Pred> all = new ArrayList<>();
        all.add(left);
        all.addAll(Arrays.asList(right));
        return all;
    }

    private static Pred lambda(Supplier<String> out) {
        return new Pred() {
            @Override
            public String toSql() {
                return "(" + out.get() + ")";
            }
        };
    }

    private static Pred quoted(String constantValue) {
        return lambda(() -> "'" + constantValue + "'");
    }

    private static Pred unquoted(String constantValue) {
        return lambda(() -> constantValue);
    }

    public static Pred column(String constantValue) {
        return unquoted(constantValue);
    }

    public static Pred eq(String colname, String val) {
        return new Pred("=", column(colname), quoted(val));
    }

    public static Pred eq(String colname, Number val) {
        return new Pred("=", column(colname), unquoted(val.toString()));
    }

    public static Pred gt(String colname, Number val) {
        return new Pred(">", column(colname), unquoted(val.toString()));
    }

    public static Pred lte(String colname, Number val) {
        return new Pred("<=", column(colname), unquoted(val.toString()));
    }

    public static Pred lt(String colname, Number val) {
        return new Pred("<", column(colname), unquoted(val.toString()));
    }

    public static Pred gte(String colname, Number val) {
        return new Pred(">=", column(colname), unquoted(val.toString()));
    }

    public static Pred and(Collection<Pred> subpreds) {
        return lambda(() -> subpreds.stream().map(Pred::toSql).collect(Collectors.joining(" AND ")));
    }

    public static Pred and(Pred left, Pred ... right ) {
        return Pred.and(collect(left,right));
    }

    public static Pred or(Collection<Pred> subpreds) {
        return lambda(() -> subpreds.stream().map(Pred::toSql).collect(Collectors.joining(" OR ")));
    }

    public static Pred or(Pred left, Pred ... right ) {
        return Pred.or(collect(left,right));
    }

    public static <T extends Number> Pred in(String column, Collection<T> list) {
        return lambda(() -> column + " IN (" + list.stream().map(String::valueOf).collect(Collectors.joining(",")) + ")");
    }

    public String toSql() {
        return "(" + left.toSql() + opcode + right.toSql() + ")";
    }
} 
```

我建议将它与 spring-jdbc 结合使用。典型用法：

```
Pred pred = Pred.and(Pred.gt(VALIDUNTIL, cutoffTime.toEpochMilli()),
  Pred.lte(FIRSTSEEN, cutoffTime.toEpochMilli()),
  Pred.gt(JSON.ListPrice, minPrice),
  Pred.eq(JSON.Status, "Active"));
...
List<...> = jdbcTemplate.query("select ...  from ... where " + pred.toSql(), new BeanPropertyRowMapper(...); 
```

使用风险自负 - 没有针对 SQL 注入的保护（不是我的项目中的要求）。

这是仓促写的，老实说，我希望有人能“借用”它并将其变成一个受欢迎的图书馆 :-)

# asp.net-mvc-4 - 使用 SiteMapPath 的问题

> ID：10129692
> 
> 赞同：0
> 
> 时间：2012-04-12T18:36:18.307
> 
> 标签：asp.net-mvc-4, sitemap, asp.net-mvc-sitemap

在我的网站上，我有以下结构：

> *   产品类别
>     *   产品分类
>         *   产品

假设我有一个具有以下特征的产品：

> 产品 XYZ - **TypeLink：** “type-xyz” - **CategoryLink：** “category-xyz” - **链接：** “product-xyz” ...

**该网址将用于产品**： */produto/type-xyz/product-xyz#category-xyz*

*请注意，类别只不过是 Url 中的哈希*！

## 路线

遵循路由的定义

[http://mysticpaste.com/private/kXhF9FFLbw/](http://mysticpaste.com/private/kXhF9FFLbw/)

**注意：**路线运行良好！我列出只是为了更好地理解

## 网站地图

使用以下命令显示站点地图：

`razor @Html.MvcSiteMap().SiteMapPath()`

### 动态的

**产品类型**： http: [//mysticpaste.com/private/yzOR1d0kr9/](http://mysticpaste.com/private/yzOR1d0kr9/)

**产品类别**： http: [//mysticpaste.com/private/YzWvrYOt6J/](http://mysticpaste.com/private/YzWvrYOt6J/)

**产品**： http: [//mysticpaste.com/private/eDbfxmWAXU/](http://mysticpaste.com/private/eDbfxmWAXU/)

### mvc.sitemap

[http://mysticpaste.com/private/2PztbFuDIs/](http://mysticpaste.com/private/2PztbFuDIs/)

如果您需要站点地图的完整代码：http: [//mysticpaste.com/private/JPKOg1a6g9/](http://mysticpaste.com/private/JPKOg1a6g9/)

## 网页配置

[http://mysticpaste.com/private/8WpRGvc7Cq/](http://mysticpaste.com/private/8WpRGvc7Cq/)

# 问题

我的问题是站点地图没有正确显示标题和链接！本网站在此链接中发布。 [http://datafilme.bindsolution.com/](http://datafilme.bindsolution.com/) 例如，您可以打开产品页面“Website da Datafilme”

[http://datafilme.bindsolution.com/Produto/software/website-da-datafilme](http://datafilme.bindsolution.com/Produto/software/website-da-datafilme)

如您所见，链接是正确的！ **但是站点地图显示来自另一个产品的数据！**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T08:48:28.280

Product Types ( `ProdutoTipoDynamicNodeProvider`) 需要在创建的动态节点上设置 key 属性。

Product Categories( `ProdutoCategoriaDynamicNodeProvider`) 也需要设置key 属性，但是parentKey 属性也必须设置为产品类型节点的key。

Products( `ProdutoDynamicNodeProvider`) 必须将 parentKey 属性设置为类别节点的键，但不需要设置键，因为动态生成的键是可以的，当没有子节点时。

在您的站点上，带有键和父键的层次结构可能是（在 productos 节点下方）：

```
Scanner de documento                 (key = "scanner")
  Conexões de Rede                   (key = "conexoes", parentKey = "scanners")
    Authoritatively-Disintermediate  (parentKey = "conexoes")
    Super-scanner                    (parentKey = "conexoes")
    Scanner XYZ                      (parentKey = "conexoes")
Equipamentos de microfilmagem        (key = "microfilmagem")
Software                             (key = "software")
  Digitalizacao                      (key = "digitalizacao", parentKey = "software")
    Website da Datafilme             (parentKey = "digitalizacao") 
```

# html - 我可以将标签元素与选择一起使用吗？

> ID：10129696
> 
> 赞同：31
> 
> 时间：2012-04-12T18:36:48.617
> 
> 标签：html, label, html-select, w3c-validation

我可以将标签元素与选择一起使用吗？

我看到的大多数地方都只有输入元素的标签示例。

标准对标签关联有什么看法？

它是有效的 HTML 标记吗？

```
<label for="id_select"> Options </label>
<select id="id_select" autofocus="true">
  <option value="1"> Option1 </option>
  <option value="2"> Option2 </option>
</select> 
```

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-04-12T18:40:05.423

是的，它是有效的并且工作正常。

> 此属性明确地将正在定义的标签与另一个控件相关联。

[http://www.w3.org/TR/html401/interact/forms.html#h-17.9.1](http://www.w3.org/TR/html401/interact/forms.html#h-17.9.1)

# html - Can't Make Site Appear Correctly In Different Browsers

> ID：10129697
> 
> 赞同：-1
> 
> 时间：2012-04-12T18:36:55.233
> 
> 标签：html, css, xhtml

I am extremely new to programming and I am attempting to code a website currently. I've spent about 5 hours in the last 2 days just trying to get things to line up correctly on various browsers and I'm having a few issues. First, let me say that I'm sorry if this question has been answered somewhere before. I've looked at a lot of solutions to problems similar to mine and nothing has completely worked for me, so please be patient. First, I have the problem of things appearing in random places on different browsers. When I attempt to remedy this in the CSS, I spawn new problems in other browers. Secondly, as the browser window changes size, all the elements on the page start moving around and overlapping instead of just hiding outside of the window. My third issue I'm having (sort of) is that my code looks terrible. I'm not sure why some elements have to have -4.5% margins to line up with other elements that need -5% margins; and I'm not sure why I'm having to put negative margins on certain elements to begin with! Thank you in advance for all of your help and preventing me from going postal.

Josh

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
    <title>Horton Computer Solutions Home</title>
    <link href="css/styles.css" media="screen" rel="stylesheet" type="text/css" />
</head>

<body>
    <div id="page">
        <div id="site_title", style="float:left">

  <span class="titleleft">Horton</span>|<span class="titleright">Computer Solutions</span>
</div>
            <div id="title_bar", style="float:right">
                <ul>
                    <pre><a href="#">Home</a>    <a href="#">About Us</a>    <a href="#">Services</a>    <a href="#">Guarantee</a>    <a href="#">Blog</a>    <a href="#">Contact</a></pre>
                </ul>
                <br style="clear:both"/>
            </div>
<div id="mainContent">
    <div id="subContent1">
    </div>
    <div id="subContent2">
    </div>
    <div id="subContent3">
    </div>
</div>
</div>
</body>
</html> 
```

And the CSS

```
/* language: css */
BODY
{
    font-family: Calibri, Arial, Helvetica, "Helvetica Neue", "Times New Roman";
    font-size: 16px;
    color: #FFF;
    text-align: left;
    background-color: #062134;
    margin: auto;
    padding: 20px 0 60px;
    width: 100%;
    height: 100%;
    position: absolute;
    z-index: 1;
}
A
{
    font-family: Helvetica;
}
DIV#title_bar UL A
{
    text-decoration: none;
    color: #FFFFFF;
}
DIV#title_bar UL A:hover
{
    text-decoration: underline;
    color: #FFFFFF;
}
DIV#title_bar UL A:visited
{
    text-decoration: none;
    color: #FFFFFF;
}
DIV#site_title
{
    font-family: Helvetica;
    font-weight: bold;
    font-size: 27px;
    color: #FFFFFF;
    margin: -4.5% 0 0 6.9%;
}
DIV#title_bar
{
    font-family: Helvetica;
    font-size: 16px;
    color: #FFFFFF;
    list-style: none;
    margin: -5% auto auto 40%;
    text-align: center;
    position: absolute;
}
DIV#contentBox
{
    background-color: #1468A8;
    border-style: none;
    width: 338px;
    height: 185px;
    padding: 19px;
}
#site_title .titleleft
{
    color: #FFFFFF;
}
#site_title .titleright
{
    color: #46C8FF;
}
DIV#mainContent
{
    border: 1px solid #FFFFFF;
    /*+box-sizing:border-box;*/
    -webkit-box-sizing: border-box;
    -moz-box-sizing: border-box;
    -ms-box-sizing: border-box;
    box-sizing: border-box;
    width: 950px;
    height: 1135px;
    background-color: #FFFFFF;
    margin: 10% 6%;
    padding: 15px;
}
DIV#subContent1
{
    color: #FFFFFF;
    width: 292px;
    height: 255px;
    background-color: #000000;
    margin: 440px 0 0;
}
DIV#subContent2
{
    color: #FFFFFF;
    width: 292px;
    height: 255px;
    background-color: #000000;
    margin: -255px 0 0 313px;
}
DIV#subContent3
{
    color: #FFFFFF;
    width: 292px;
    height: 255px;
    background-color: #000000;
    margin: -255px 0 0 626px;
}
#site_title .floatleft
{
    float: left;
    position: relative;
    left: 0px;
    top: 0px;
}
#title_bar .floatright
{
    float: right;
    position: relative;
    left: 0px;
    top: 0px;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T19:04:48.060

您的代码语义无处不在，遇到问题并不奇怪，在尝试解决任何跨浏览器问题之前，您必须确保您的代码经过验证 (http://validator.w3.org/)

首先，我会说放弃复杂的文档类型并使用 HTML5，它很严格并且适用于任何地方。如果您能提供帮助，请始终远离过渡文档类型。

所以

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"> 
```

变成

```
<!DOCTYPE html>
<html> 
```

在元素上设置多个属性时，您不需要逗号，所以

```
<div id="title_bar", style="float:right"> 
```

变成

```
<div id="title_bar" style="float:right"> 
```

避免样式属性，这里大多数元素都有 id，您可以从样式表中设置它们的样式（http://robertnyman.com/2008/11/20/why-inline-css-and-javascript-code-is-such-坏事/)

90% 的时间你不需要 clear:both，只要在容器元素上有 overflow:hidden 就足以清除浮动的子元素。

UL 元素必须包含 LI 元素

```
<ul>
    <pre><a href="#">Home</a>....</pre>
</ul> 
```

变成

```
<ul>
<li><a href=""></a></li>
<li><a href=""></a></li>
</ul> 
```

为 CSS 插入链接标签时，除非您为各种设备提供多个文件，否则您不需要 media="screen" 部分，如果未设置该属性，则这是默认值。

当在你的 CSS 文件中引用标签时不使用大写，这是相当老的时尚并且没有真正使用（也有些人可能会争辩说他们更喜欢它，你不会看到任何“著名”开发人员使用它们）

现在对于您的样式问题，您的 BR style="clear:both" 位于菜单元素内，应该在它之后以清除标题和菜单（也就像说只是在它们周围有一个包装器并溢出：隐藏在 CSS 中，它还会更好地将您的标题与您的内容分开）

float:left + position:relative 的冲突。此外，如果您设置 position:relative 则无需设置 top:0 和 left:0 这就是元素处于 position:relative 情况的位置。

我认为这至少应该让你朝着正确的方向前进，或者以某种方式帮助你:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T18:43:26.973

评论喜欢

```
<!-- language: css --> 
```

不允许在 css 文件中使用。只使用

```
/* language: css */ 
```

评论。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-12T19:52:57.550

如果您希望您的代码在所有浏览器上都一样工作。废弃您的样式并从重置样式表开始：（谷歌：重置样式表，第一个链接）。

格式很可能在所有浏览器上都是相同的（除了个别浏览器的限制，即：ie6、7 等上没有 css3）。我认为一旦消除了浏览器样式差异，您会发现格式化更容易。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-12T20:27:17.400

你的错误在这里，删除 id end 后的逗号

```
 <div id="title_bar" style="float:right"> 
```

检查这个[http://jsfiddle.net/srinivasan/aXaYg/2/](http://jsfiddle.net/srinivasan/aXaYg/2/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-12T19:40:04.973

你的第二个问题的解决方案

```
 <body>
   <center>
     //do all here
  </center>
 </body> 
```

# regex - 单引号中的双引号，反之亦然

> ID：10129699
> 
> 赞同：11
> 
> 时间：2012-04-12T18:36:57.073
> 
> 标签：regex, vim, quotes

我经常发现自己颠倒引号：
**从双引号`""`到单引号`''`**，
**从单引号`''`到双引号`""`**。

我知道有一种方法可以将单引号切换为双引号：
`:%s/'\(\([^']*\)\)'/"\1"/g`

还有一种将双引号切换为单引号的方法：
`:%s/"\(\([^"]*\)\)"/'\1'/g`

但是如何在不包括第二次交换中的第一个交换引号的情况下***同时执行这两个操作？***

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-12T18:58:52.913

通常，当您想要像这样交换`A`&时`B`，您需要一个中间步骤，在该步骤中您替换`A`为完全不同的东西，并且在文档中很可能是唯一的，无论是不寻常的字符还是更长更疯狂的东西`|x-monkeyz-x|`。

然后，您可以将所有 B 转换为 As，最后将所有 B 转换`|x-monkeyz-x|`为 B。

例如，

1.  全部替换`'`为`!X!`
2.  全部替换`"`为`'`
3.  全部替换`!X!`为`"`

### 编辑

这更好：[在 Vim 中交换两个字符串的最简单方法？](https://stackoverflow.com/questions/3578549/easiest-way-to-swap-occurrences-of-two-strings-in-vim)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-12T18:59:22.823

我通常使用不太可能出现在文本中的中间字符串，例如我的名字：

*   将单引号更改为 UNLIKELY_STRING
*   将双引号改为单引号
*   将 UNLIKELY_STRING 更改为双引号

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-13T08:04:07.243

如果字符串文字中没有转义引号，并且不需要确保正确的引号配对，则可以使用该命令

```
:%s/['"]/\="'\""[submatch(0)!='"']/g 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-12T18:56:07.330

使用`\=`：

```
:%s/'\([^']*\)'/\='"'.tr(submatch(1), '"', "'").'"'/g 
```

. 这假设这两个字符都只用作引号，但您的初始代码也做同样的事情，除了 my 不检查它们是否配对。

# android - Pan/Expand view/canvas in android

> ID：10129700
> 
> 赞同：2
> 
> 时间：2012-04-12T18:37:14.983
> 
> 标签：android, canvas

I've got this canvas which the user can add images/text etc to. If the user drags one of the items to either side of the canvas, it should expand if needed. I googled, but couldn't find any reasonable solution. Also, the canvas is about 90% of the screen width, and 70% of the height.. I'm not asking for an entire solution.. I just need a tip on how to do this (Links, docs, whatever)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T09:13:40.207

嗯，很难猜出你想要达到的目标。当你说“如果需要它应该扩展”时，你是什么意思？展开以填充父视图？扩展到它的内在大小？

这是我在自定义视图类中使用的一些（不完整）代码。其中大部分是从这里的多个解决方案中收集的，我感谢原作者。onDraw 是最有趣的。当您要绘制时（此处为自定义绘图），您无需担心平移或缩放，因为画布本身已被平移和缩放。换句话说，您的 x 和 y 坐标与视图大小相关 - 只需将它们乘以比例即可。

```
public class LightsViewer extends ImageView {

private float scale;

// minimum and maximum zoom
private float MIN_ZOOM = 1f;
private float MAX_ZOOM = 5f;

// mid point between fingers to centre scale
private PointF mid = new PointF();

private float scaleFactor = 1.f;
private ScaleGestureDetector detector;

// drag/zoom mode
private final static int NONE = 0;

// current mode
private int mode ;

private float startX = 0f;
private float startY = 0f;

private float translateX = 0f;
private float translateY = 0f;

private float previousTranslateX = 0f;
private float previousTranslateY = 0f;

public LightsViewer(Context context) {

    super(context);
    detector = new ScaleGestureDetector(getContext(), new ScaleListener());

    WindowManager wm = (WindowManager) context.getSystemService(Context.WINDOW_SERVICE);
    Display display = wm.getDefaultDisplay();

    displayWidth = display.getWidth();
    displayHeight = display.getHeight();

}

public LightsViewer(Context context, AttributeSet attrs) {

    super(context,attrs);
    detector = new ScaleGestureDetector(getContext(), new ScaleListener());

    WindowManager wm = (WindowManager) context.getSystemService(Context.WINDOW_SERVICE);
    Display display = wm.getDefaultDisplay();

    displayWidth = display.getWidth();
    displayHeight = display.getHeight();

}

@Override
public boolean onTouchEvent(MotionEvent event) {

    int ZOOM = 2;
    int DRAG = 1;

    if (!allowZooming){return true;}

    switch (event.getAction() & MotionEvent.ACTION_MASK) {

        case MotionEvent.ACTION_DOWN:

            mode = DRAG;

            //We assign the current X and Y coordinate of the finger to startX and startY minus the previously translated
            //amount for each coordinates This works even when we are translating the first time because the initial
            //values for these two variables is zero.
            startX = event.getX() - previousTranslateX;
            startY = event.getY() - previousTranslateY;

            break;

        case MotionEvent.ACTION_MOVE:

            if (mode == ZOOM){
                Log.d("LIGHTS","ACTION_MOVE:Move but ZOOM, breaking");
                break;}

            translateX = event.getX() - startX;
            translateY = event.getY() - startY;

            //We cannot use startX and startY directly because we have adjusted their values using the previous translation values.
            //This is why we need to add those values to startX and startY so that we can get the actual coordinates of the finger.
            double distance = Math.sqrt(Math.pow(event.getX() - (startX + previousTranslateX), 2) +
                    Math.pow(event.getY() - (startY + previousTranslateY), 2)
            );

            if(distance > 0) {
                dragged = true;
            }

            break;

        case MotionEvent.ACTION_POINTER_DOWN:

            midPoint(mid, event);

            mode = ZOOM;

            break;

        case MotionEvent.ACTION_UP:

            mode = NONE;
            dragged = false;

            //All fingers went up, so let's save the value of translateX and translateY into previousTranslateX and
            //previousTranslate
            previousTranslateX = translateX;
            previousTranslateY = translateY;

            break;

        case MotionEvent.ACTION_POINTER_UP:

            mode = NONE;

            //This is not strictly necessary; we save the value of translateX and translateY into previousTranslateX
            //and previousTranslateY when the second finger goes up
            previousTranslateX = translateX;
            previousTranslateY = translateY;

            break;
    }

    detector.onTouchEvent(event);

    //We redraw the canvas only in the following cases:
    //
    // o The mode is ZOOM
    //        OR
    // o The mode is DRAG and the scale factor is not equal to 1 (meaning we have zoomed) and dragged is
    //   set to true (meaning the finger has actually moved)
    if ((mode == DRAG && scaleFactor != 1f && dragged) || mode == ZOOM) {            
        this.invalidate();
    }

    return true;
}

@Override
protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {

    super.onMeasure(widthMeasureSpec, heightMeasureSpec);

    if (this.getImageMatrix().isIdentity()){return;}

    if (allowZooming){
        this.applyMatrix(this.getImageMatrix());
    }

}

@Override
public void onDraw(Canvas canvas) {

    canvas.save();

    // scale the canvas
    canvas.scale(scaleFactor, scaleFactor, mid.x, mid.y);

    canvas.translate(translateX / scaleFactor, translateY / scaleFactor);

    super.onDraw(canvas);

    // do custom drawing here...e.g.
    canvas.drawCircle(100,100, 3 / scaleFactor,light.paint);

    canvas.restore();
}

private class ScaleListener extends ScaleGestureDetector.SimpleOnScaleGestureListener {
    @Override
    public boolean onScale(ScaleGestureDetector detector) {
        scaleFactor *= detector.getScaleFactor();
        scaleFactor = Math.max(MIN_ZOOM, Math.min(scaleFactor, MAX_ZOOM));
        return true;
    }
}

// calculate the mid point of the first two fingers
private void midPoint(PointF point, MotionEvent event) {
    // ...
    float x = event.getX(0) + event.getX(1);
    float y = event.getY(0) + event.getY(1);
    point.set(x / 2, y / 2);

    Log.d("LIGHTS", x/2 + "," + y/2);

}

public void setMinZoom(float minZoom){
    this.MIN_ZOOM = minZoom;
}

public void applyMatrix(Matrix matrix){

    float[] matrixValues = new float[9];
    matrix.getValues(matrixValues);

    int x = (int)matrixValues[Matrix.MTRANS_X];
    int y = (int)matrixValues[Matrix.MTRANS_Y];
    float scale = matrixValues[Matrix.MSCALE_X];

    if (lights!=null){
        for (Light light:lights){
            light.setX((int)((light.originalX * scale) + x));
            light.setY((int)((light.originalY * scale) + y));
        }
    }

    // if either the x or y translations are less than 0, then the image has been cropped
    // so set the min zoom to the ratio of the displayed size and the actual size of the image
    if (matrixValues[Matrix.MTRANS_X] < 0 || matrixValues[Matrix.MTRANS_Y] <0){
        MIN_ZOOM = displayWidth / this.getDrawable().getIntrinsicWidth();
    }else{
        MIN_ZOOM = 1;
    }

}

public void enableZooming(boolean enable){
    allowZooming = enable;
}

public void setScale(float scale){

    for (Light light:lights){
        light.setX((int)(light.originalX * scale));
        light.setY((int)(light.originalY * scale));
    }
} 
```

}

# google-app-engine - GAE SDK 1.6.4 on Mac with django-nonrel: syncdb won't create the datastore file

> ID：10129704
> 
> 赞同：0
> 
> 时间：2012-04-12T18:37:24.127
> 
> 标签：google-app-engine, python-2.7, django-nonrel

first question from newbie. Haven't needed to post a question for months now -- so many great answers already posted. I am stuck on this one, though.

Developing on a Mac, Python 2.7, Django with the django-nonrel project, GAE datastore. Up to and including GAE SDK 1.6.3, all goodness. After upgrading to GAE SDK 1.6.4, noticed 3 strange things:

1.  Dev server (python manage.py runserver) fails immediately with "Error: No module named webob." No other errors or output. I rooted around under /usr/local/google_appengine/lib/... and, indeed, no module named webob. There are two close matches -- webob_0_9 and webob_1_1_1\. I made a symlink webob -> webob_1_1_1 to get past the error.

2.  Startup messages from the dev server include an INFO: message that the SDK version is later than the advertised version. Google has 1.6.4 on their download site, so not seeing how my 1.6.4 is later than the latest.

3.  Django's syncdb command (python manage.py syncdb) will no longer create the .gaedata/datastore file. It says it's creating tables, it prompts me for the superuser creds, it even says it installed a bunch of objects from my fixture file. It gives no errors, but when it completes, it has done none of these things -- the .gaedata/datastore file doesn't even exist.

Prior to 1.6.4, syncdb worked great, including loading fixture data. I tried starting a fresh project with only bare bones files in it and a simple model (one class having one field) to see if some complexity I had introduced might be the cause of the problem. Even in simple-land, syncdb wouldn't create the datastore.

My only solution was to fall back to GAE SDK 1.6.3 -- everything works once again. Anyone else seeing similar symptoms with SDK 1.6.4? Are there obvious diagnostic steps I should be taking?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T20:15:19.950

1.  在最新的 django-nonrel 中修复。要么同步到最新代码，要么手动集成这个拉取请求： [https ://github.com/django-nonrel/djangoappengine/pull/24](https://github.com/django-nonrel/djangoappengine/pull/24)

2.  没见过这个问题，不知道。

3.  有一种解决方法，但它尚未合并到主分支中，您必须手动集成更改。 [https://github.com/django-nonrel/djangoappengine/pull/25](https://github.com/django-nonrel/djangoappengine/pull/25)

# winforms - 如何在上层类中设置下层类单选按钮的事件处理程序？

> ID：10129707
> 
> 赞同：0
> 
> 时间：2012-04-12T18:37:40.340
> 
> 标签：winforms, visual-studio-2010, c++-cli

我创建了一个用户控制组子类。有两个单选按钮。我需要为他们创建事件处理程序。我有两个方向要走。一种是在子类中创建事件处理程序，并让事件处理程序更改子类中的常量。我将使用一个函数来检查上层类中的子类常量。另一种是在上层类中为子类单选按钮创建事件处理程序。以下是我的方法 1 的代码。**注意我已经注释掉了两行（它们是事件处理程序创建），因为它们是错误的，因为它们会产生错误，**请帮忙

```
 using namespace System;
using namespace System::ComponentModel;
using namespace System::Collections;
using namespace System::Windows::Forms;
using namespace System::Data;
using namespace System::Drawing;
using namespace System::Collections;
using namespace System::Collections::Generic;

#include <stdio.h>
#include <stdlib.h>
#using <mscorlib.dll>

            public ref class temp_groupbox: public GroupBox
            {
            public: temp_groupbox(int a, int b, String ^groupboxname){

                          // Create and initialize a GroupBox and two RadioButton controls.
                            //GroupBox^ groupBox1 = gcnew GroupBox;
                            RadioButton^ radioButton1 = gcnew RadioButton;
                            RadioButton^ radioButton2 = gcnew RadioButton;

                          // Add the RadioButtons to the GroupBox.
                            this->Controls->Add( radioButton1 );
                            this->Controls->Add( radioButton2 );

                            this->Location = System::Drawing::Point(a, b);
                            this->Size = System::Drawing::Size(500, 100);
                            this->TabIndex = 0;
                            this->TabStop = false;

                            radioButton1->Name = L"radioButton1";
                            radioButton2->Name = L"radioButton2";

                            radioButton1->Size = System::Drawing::Size(85, 17);
                            radioButton2->Size = System::Drawing::Size(85, 17);

                            radioButton1->Location = System::Drawing::Point(30, 40);
                            radioButton2->Location = System::Drawing::Point(30, 90);

                            radioButton1->TabIndex = 0;
                            radioButton1->TabStop = true;

                            radioButton2->TabIndex = 1;
                            radioButton2->TabStop = true;

                            radioButton1->UseVisualStyleBackColor = true;
                            radioButton1->CheckedChanged += gcnew System::EventHandler(this, radioButton1_CheckedChanged);
                            radioButton2->UseVisualStyleBackColor = true;
                            radioButton2->CheckedChanged += gcnew System::EventHandler(this, radioButton2_CheckedChanged);

                            this->SuspendLayout();
                            this->ResumeLayout(false);
                            this->PerformLayout();
                }

            public: RadioButton^ radioButton1;
            public: RadioButton^ radioButton2;
            public: int anss;

            void radioButton1_CheckedChanged(Object^ sender, EventArgs^ e)
            {
                anss = 1;
            }

            void radioButton2_CheckedChanged(Object^ sender, EventArgs^ e)
            {
                anss = 2;
            }

            };// end ref class 
```

![在此处输入图像描述](../Images/efc68d9cf4129b658087ed9884db33c4.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T23:07:01.343

你有方法`radioButton1_CheckedChanged`和`radioButton2_CheckedChanged`定义吗？

```
void radioButton1_CheckedChanged(Object^ sender, EventArgs^ e)
{
}

void radioButton2_CheckedChanged(Object^ sender, EventArgs^ e)
{
} 
```

如果这些方法已经存在，请列出您收到的错误消息。如果我们不知道出了什么问题，就很难弄清楚如何解决问题。

* * *

您需要指定要为其创建委托的方法的完整类名，并使用`&`获取它的地址。

```
gcnew System::EventHandler(this, &temp_groupbox::radioButton1_CheckedChanged) 
```

# xaml - Alternation Index with Data Triggers

> ID：10129709
> 
> 赞同：2
> 
> 时间：2012-04-12T18:37:45.190
> 
> 标签：xaml, binding, triggers, listbox, multidatatrigger

I have a Listbox with an Alternation Index of 2 on it. I then have a style set up to provide styling on the different alternation indexes.

```
<Style x:Key="ListBoxItemStyle" TargetType="{x:Type ListBoxItem}">
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="{x:Type ListBoxItem}">
                <Grid>
                    <Border x:Name="Bd" SnapsToDevicePixels="true">
                        <ContentPresenter Margin="{TemplateBinding Padding}"
                                          HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"
                                          VerticalAlignment="{TemplateBinding VerticalContentAlignment}"
                                          SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}" />
                    </Border>
                    <Rectangle x:Name="HoverRectangle"
                               Height="Auto"
                               SnapsToDevicePixels="True"
                               Stroke="{StaticResource Gold}"
                               StrokeDashCap="Square"
                               StrokeThickness="0" />
                    <Rectangle x:Name="KeyboardFocusRectangle"
                               Height="Auto"
                               SnapsToDevicePixels="True"
                               Stroke="{StaticResource BrightBlue}"
                               StrokeDashCap="Square"
                               StrokeThickness="0" />
                </Grid>
                <ControlTemplate.Triggers>
                    <Trigger Property="ItemsControl.AlternationIndex" Value="1">
                        <Setter TargetName="Bd" Property="Background" Value="{StaticResource LightGray}" />
                    </Trigger>
                    <Trigger Property="ItemsControl.AlternationIndex" Value="0">
                        <Setter TargetName="Bd" Property="Background" Value="{StaticResource VeryLightGray}" />
                    </Trigger>
                </ControlTemplate.Triggers>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

I also want to change the background on the items if they happen in the future. I have a function IsFuture returning a boolean. I then got this code working in the data template to style the background.

```
<DataTemplate x:Key="MeetingListItemTemplate">
    <Grid x:Name="grid">
          <!-- Removed lots of stuff here-->
    </Grid>
    <DataTemplate.Triggers>
        <MultiDataTrigger>
            <MultiDataTrigger.Conditions>
                <Condition Binding="{Binding Path=IsFuture}" Value="True"/>
            </MultiDataTrigger.Conditions>
            <MultiDataTrigger.Setters>
                <Setter Property="Background" Value="#0094d6" TargetName="grid"/>
            </MultiDataTrigger.Setters>
        </MultiDataTrigger>
    </DataTemplate.Triggers>
</DataTemplate> 
```

I set up the MutliDataTrigger so I could have the condition for alternation index and then I would use a different blue for each alternation but I'm not sure how I can get alternation index from here. Any ideas?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T19:52:51.763

```
<MultiDataTrigger.Conditions>
     <Condition Binding="{Binding Path=IsFuture}" Value="true" />
     <Condition Binding="{Binding RelativeSource={RelativeSource Mode=TemplatedParent}, Path=(ItemsControl.AlternationIndex)}"  Value="0"/>
</MultiDataTrigger.Conditions> 
```

尝试 TemplatedParent RelativeSource 模式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T21:52:48.543

您应该能够使用`RelativeSource`绑定来绑定到`AlternationIndex`parent 的属性`ItemsControl`：

```
<MultiDataTrigger.Conditions>
    <Condition Binding="{Binding Path=IsFuture}" Value="True" />
    <Condition Binding="{Binding RelativeSource={RelativeSource Mode=FindAncestor, AncestorType=ItemsControl}, Path=AlternationIndex}" Value="1"
</MultiDataTrigger.Conditions> 
```

# html - Firefox 部分页面未加载

> ID：10129710
> 
> 赞同：0
> 
> 时间：2012-04-12T18:37:46.793
> 
> 标签：html, css, firefox

请在 chrome 和 firefox 中查看以下页面 [http://www.bharatmovies.com/indianmovies.htm](http://www.bharatmovies.com/indianmovies.htm)

Chrome 和 IE 正在加载整个页面，但 Firefox 没有加载右侧底部（印地语电影评论、观看印地语宝莱坞歌曲）部分。在 Firefox 中，它使用这些年来加载没有问题，但从今天开始出现问题。我正在使用 Firefox 11。

最近在 Firefox 中是否有任何变化。请指导我如何解决它。谢谢你。

# cordova - PhoneGap 应用程序和针对 Domino 服务器的身份验证（xPages 应用程序） - 怎么做？

> ID：10129715
> 
> 赞同：1
> 
> 时间：2012-04-12T18:38:03.347
> 
> 标签：cordova, xpages

我正在使用 PhoneGap 开发本机移动应用程序。有没有人有关于身份验证的解决方案？具体来说，如何针对 Domino 服务器进行身份验证并将身份验证保留在应用程序中？至少可以分享一些解决方案或分享一些提示吗？

谢谢 ....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T19:00:34.180

PhoneGap 应用程序是在本机容器内运行的 Web 应用程序，因此您应该能够使用普通登录页面（针对移动设备进行了优化）并让用户使用它登录。

登录后，用户将通过 Domino 服务器进行身份验证。

IBM Lotus iNotes Redirect 模板包含一个针对移动设备优化的 Domino 登录页面示例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T05:51:07.007

对于其他人，这里有一些关于这个主题的链接：

[jQuery Mobile 和 PhoneGap 中的身份验证](https://stackoverflow.com/questions/8079459/authentication-in-jquery-mobile-and-phonegap) [http://www.raymondcamden.com/index.cfm/2011/11/10/Example-of-serverbased-login-with-PhoneGap](http://www.raymondcamden.com/index.cfm/2011/11/10/Example-of-serverbased-login-with-PhoneGap) [http://share.ez.no/blogs/thiago -campos-viana/rest-api-basic-http-auth-and-phonegap-using-jquery](http://share.ez.no/blogs/thiago-campos-viana/rest-api-basic-http-auth-and-phonegap-using-jquery)

# python - 如何使用 pydicom 访问 DICOMDIR 文件中的单个 NumPy 数组？

> ID：10129717
> 
> 赞同：2
> 
> 时间：2012-04-12T18:38:07.733
> 
> 标签：python, numpy, dicom, pydicom

我将 DICOM 与 Python 和 Pydicom 库一起使用，当我使用 .dcm 文件时我没有问题。但我现在使用的是 DICOMDIR 数据集。

我的代码是下一个：

```
ds = dicom.read_file("dicomdir") 
```

`pixel_array`我尝试按如下方式访问元素：

```
data = ds.pixel_array 
```

我得到下一个错误：`TypeError: No pixel data found in this dataset.`

的输出`print ds`或多或少是下一个：

(0004, 1130) 文件集 ID CS: 'GEMS_11_10_111' (0004, 1200) 第一个目录记录的偏移量 UL: 412 (0004, 1202) 最后一个目录记录的偏移量 UL: 412 (0004, 1212) 文件集Consistency Flag US: 0 (0004, 1220) Directory Record Sequence 7 item(s) ---- (0004, 1400) 下一个 Directory Record UL 的偏移量：0 (0004, 1410) Record In-use Flag US: 65535 ( 0004, 1420) 引用的低级 Di UL: 558 (0004, 1430) 目录记录类型 CS: 'PATIENT' (0008, 0005) 特定字符集 CS: 'ISO_IR 100' (0010, 0010) 患者姓名 PN: '-----------------' (0010, 0020) 患者 ID LO: '246992' (0010, 0030) 患者出生日期 DA:'19630523' (0010, 0040) 患者性别 CS: 'F'

* * *

(0004, 1400) 下一个目录记录的偏移量 UL: 0 (0004, 1410) 记录使用中标志 US: 65535 (0004, 1420) 引用的低级 Di UL 的偏移量: 800 (0004, 1430) 目录记录类型CS: 'STUDY' (0008, 0005) 特定字符集 CS: 'ISO_IR 100' (0008, 0020) 研究日期 DA: '20111011' (0008, 0030) 研究时间 TM: '151535.000000' (0008, 0050) 入藏号SH：'1009819901'（0008，1030）研究描述LO：'MG召集'（0020，000D）研究实例UID UI：1.2.840.113564.9.1.20051212222002200222121211101106081081055555555555548.2100981981999999999999999999999999999999999990,00010,00010,00010,00010,00010,00010,00010,00010,00010、0010）

* * *

(0004, 1400) 下一个目录记录的偏移量 UL: 0 (0004, 1410) 记录使用中标志 US: 65535 (0004, 1420) 引用的低级 Di UL 的偏移量: 968 (0004, 1430) 目录记录类型CS: 'SERIES' (0008, 0005) 特定字符集 CS: 'ISO_IR 100' (0008, 0060) 模态 CS: 'MG' (0008, 103e) 系列描述 LO: 'Screen Save' (0020, 000e) 系列实例UID UI：1.2.840.113619.2.144.2347322947.2192645372.5（0020，0011）序列号是：'354'

* * *

(0004, 1400) 下一个目录记录的偏移量 UL: 1298 (0004, 1410) 记录使用中标志 US: 65535 (0004, 1420) 引用的低级 Di UL 的偏移量: 0 (0004, 1430) 目录记录类型CS: 'IMAGE' (0004, 1500) 参考文件 ID CS: ['DICOM', 'PA1', 'ST1', 'SE1', 'IM1'] (0004, 1510) 参考文件 UI 中的 SOP 类 UID：次要捕获图像存储 (0004, 1511) 文件 UI 中引用的 SOP 实例 UID：1.2.840.113619.2.144.44653394.14990.1318380911.86 (0004, 1512) F UI 中引用的传输语法 UID：显式 VR Little Endian (0008, 0005) 特定字符集CS: 'ISO_IR 100' (0008, 0008) 图像类型 CS: 'DERIVED' (0008,0023) 内容日期 DA: '20111011' (0008, 0033) 内容时间 TM: '151909.000000' (0020, 0013) 实例编号 IS: '8844' (0028, 0010) 美国行数: 2298 (0028, 0011) 美国列数: 1980 (0028, 1052) 重新调整截距 DS: '0' (0028, 1053) 重新调整斜率 DS: '1'1053) 重新调整斜率 DS：'1'1053) 重新调整斜率 DS：'1'

* * *

最后一部分重复四次。我的 DICOMDIR 数据集中有 4 张图像。

你知道如何使用 Numpy Array 访问每个图像的字段吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-13T16:46:27.003

我在 Suever 的 Pydicom 用户论坛上收到了一个答案：

DICOMDIR 文件不包含任何像素信息，而是包含基本标题信息以及数据集中每个文件的路径。为了从每个图像中获取像素数据，您必须遍历 dicomdir 数据集以获取各个 dicom 文件（相对于当前目录）的文件路径，然后从每个单独的 dicom 加载像素数据文件。

一个简单的方法是（可能有更好的方法）

```
 ds = dicom.read_file("dicomdir")
    pixel_data = list()
    for record in ds.DirectoryRecordSequence:
        if record.DirectoryRecordType == "IMAGE":
        # Extract the relative path to the DICOM file
            path = os.path.join(*record.ReferencedFileID)
            dcm = dicom.read_file(path)

            # Now get your image data
            pixel_data.append(dcm.pixel_array) 
```

有用 ;）

# php - AS3 - 显示 Flash 和 PHP 之间的数据传输进度

> ID：10129719
> 
> 赞同：0
> 
> 时间：2012-04-12T18:38:20.260
> 
> 标签：php, actionscript-3, progress

如何显示 Flash 和 PHP 之间的数据传输进度？下面是我用来通过 PHP 上传 base64 编码图像的 AS3 代码。

```
var scriptLoader:URLLoader = new URLLoader();
var scriptVars:URLVariables = new URLVariables();

var scriptRequest:URLRequest = new URLRequest("https://www.example.com/sendit.php");

var imagedata = Base64.encode(mybitmap);
scriptVars.theimage = imagedata

scriptRequest.method = URLRequestMethod.POST;
scriptRequest.data = scriptVars;
scriptLoader.load(scriptRequest); 
```

（服务器运行 PHP 版本 5.3.10）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T18:52:02.643

您可以在 scriptRequest 上为 ProgressEvent.PROGRESS 添加事件侦听器以监视加载完成。事件回调将包含要监视的 bytesLoaded 和 bytesTotal。

ProgressEvent 参考： [http ://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/events/ProgressEvent.html](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/events/ProgressEvent.html)

```
scriptRequest.addEventListener(ProgressEvent.PROGRESS, onProgress);

function onProgress(e:ProgressEvent):void {
   trace(e.bytesLoaded + " of " + e.bytesTotal);
} 
```

# java - Java 字符串连接 - 空值

> ID：10129721
> 
> 赞同：1
> 
> 时间：2012-04-12T18:38:28.727
> 
> 标签：java, string, string-concatenation

> **可能重复：**
> [在 Java 中连接空字符串](https://stackoverflow.com/questions/4260723/concatenating-null-strings-in-java)

我只是想知道是否有人可以解释为什么以下代码会以这种方式工作：

```
String a = null;
String b = null;
String c = a + b;
System.out.println(c.toString()); 
```

这会将“nullnull”打印到控制台。

我有点期待操作 + 会引发异常，或者在较小程度上，“c”将为空。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-12T18:41:24.603

因为该代码编译为

```
String c = new StringBuilder().append(a).append(b).toString(); 
```

并`StringBuilder.append(a)`附加结果[`String.valueof(a)`是`"null"`if `a`is`null`](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#valueOf%28java.lang.Object%29)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-12T18:44:34.623

连接运算符要求的“字符串转换”要求在需要字符串表示时将空值映射到四个字符`null`。

字符串转换规范： http: [//docs.oracle.com/javase/specs/jls/se7/html/jls-5.html#jls-5.1.11](http://docs.oracle.com/javase/specs/jls/se7/html/jls-5.html#jls-5.1.11)

字符串连接规范： http: [//docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.18.1](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.18.1)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T18:42:15.473

当java在字符串连接过程中找到`null`引用时，将其转换为字符串`"null"`。`"nullnull"`正确的结果也是如此。

在连接每个对象 Java 调用之前

```
java.lang.String.valueOf(Object) 
```

如果您查看该方法的源代码，您会发现

```
public static String valueOf(Object obj) {
  return (obj == null) ? "null" : obj.toString();
} 
```

# java - 在 HTML 页面上以正确顺序查找多个标签的元素按标签名称。

> ID：10129724
> 
> 赞同：0
> 
> 时间：2012-04-12T18:38:51.593
> 
> 标签：java, html, webdriver

我正在使用 WebDriver 通过以下方式在 Firefox 中检索和自动填充表单。

```
FirefoxDriver driver = new FirefoxDriver();
List<WebElement> inputElements = driver.findElementsByTagName("input");
List<WebElement> selectElements = driver.findElementsByTagName("select");
List<WebElement> allElements = new ArrayList<WebElement>(inputElements);
allElements.addAll(selectElements); 
```

当我循环浏览 allElements 列表时，我首先看到所有“输入”元素，然后是所有“选择”元素。有没有办法按照页面上出现的顺序检索所有这些元素？我希望 findElementsByTagName() 会采用像这样的正则表达式：

```
driver.findElementsByTagName("(input|select)"); 
```

有什么聪明的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T19:05:58.013

您应该考虑使用 xPaths。它们应该为您提供所需的所有功能。

# mysql - MySQL GROUP BY 与 GROUP_CONCAT 返回所有行合并？

> ID：10129725
> 
> 赞同：0
> 
> 时间：2012-04-12T18:38:54.130
> 
> 标签：mysql

我今天遇到了一个问题。我有一张带有硬币价值的桌子：

```
0.01
0.01
0.01
0.05
0.10
0.25
1.00
1.00
2.00
and so on... 
```

所以主要的想法是一次得到所有的值，所以 0.01、0.05 等等。

所以我这样做：

```
SELECT Valeur FROM Mint_Coins GROUP BY Valeur 
```

现在它将为每个值给我一行...我想要一行中的所有值，所以我使用它：

```
SELECT GROUP_CONCAT(',', Valeur) AS Values FROM Mint_Coins GROUP BY Valeur 
```

它再次给了我 7 行 blob... 有 blob 这意味着该行超过 512 个字节... 好的，让我们看看我何时转换它们包含... 结果现在是：

```
0.01, 0.01, 0.01, 0.01
0.05, 0.05
etc.. 
```

那么我做错了什么？我希望结果像这样保存在一列和一排中`0.01,0.05,0.10,0.25,1.00,2.00`。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T18:44:05.010

您可以将 distinct 传递给 group_concat 以忽略重复值：

```
SELECT GROUP_CONCAT(DISTINCT Valeur) AS Values FROM Mint_Coins 
```

在这种情况下，您也不需要分组。

如果您想要多行中的结果，您也可以这样做：

```
SELECT DISTINCT Valeur FROM Mint_Coins 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T18:41:19.340

```
SELECT GROUP_CONCAT(A.Valuer SEPARATOR ',') AS Valuer
FROM (SELECT DISTINCT Valuer FROM Mint_Coins)A ORDER BY Valuer; 
```

检查这个有价值的链接。这将对您有所帮助。

[http://mahmudahsan.wordpress.com/2008/08/27/mysql-the-group_concat-function/](http://mahmudahsan.wordpress.com/2008/08/27/mysql-the-group_concat-function/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T18:43:44.280

你可以使用嵌套子查询吗？

```
SELECT GROUP_CONCAT(',', (SELECT Valeur FROM Mint_Coins GROUP BY Valeur)) AS Values FROM Mint_Coins 
```

# c# - 如何使用 Response.AppendHeader 在浏览器游戏中提示玩家？

> ID：10129726
> 
> 赞同：0
> 
> 时间：2012-04-12T18:39:00.673
> 
> 标签：c#, asp.net, forms, browser, response

```
Response.AppendHeader("Refresh","10; URL = game.aspx"); 
```

上面的代码将每 10 秒刷新一次页面。图片播放器 1 按下加入按钮并被放置在等待播放器 2 的提示中。我如何操纵此代码以每十秒询问玩家二的输入（加入）。然后当玩家两个回答时，它会使用Server.Transfer将我转移到游戏页面。

我正在使用 Visual Studio '08，在 C# 中运行 ASP.NET 网站和表单。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T19:53:00.933

管理内存中的两个布尔变量，如果播放器第一个为真，则每 10 秒检查一次变量（您已经在 10 秒后进行刷新）。另一方面，如果玩家二接受/使第二个变量为真。因此在 10 秒内变量变为真，第一个玩家将被重定向到游戏页面。

现在的问题是在哪里存储这两个变量，以便两个用户都可以共享它。您可以将其存储在服务器内存或应用程序状态中。

如果我遗漏了什么，请告诉我。

# actionscript-3 - AS3 - （非常）简单的文字冒险

> ID：10129728
> 
> 赞同：-1
> 
> 时间：2012-04-12T18:39:07.460
> 
> 标签：actionscript-3, flash, text, flash-cs5, adventure

我一直在尝试找到源代码或教程或任何我可以使用的东西，但到目前为止我还没有运气。我最接近的是使用[haXic](http://haxic.com)，但无法更改输入框的外观（我能够在开源文件中修复此问题，但无法更改编译器，修复将无法生效生成的 .swf)，我无法获得所需的字体和颜色。

所以我转向 Actionscript 3 / Flash，因为我对它有一些了解，虽然主要用于构建网站。目标是基于传统的文本冒险结构创建一个非常非常非常简单的游戏。当我说简单时，我的意思是非常简单。我不需要地图，不需要 NPC，不需要物品，我什至不需要可以随时访问的命令列表。我只需要显示一些文本，接受特定的输入，然后根据输入的内容显示更多的文本。

这是我想要实现的一个示例： .swf 加载，用户看到一些模仿 POST 的文本。这不是一个实际的预加载器，只是一些花哨的“一切都在启动”文本。在动画结束时，指示用户按任意键继续，这样做会删除现有文本并加载到下一组中。从那里我想有各种需要特定输入的步骤（即要求用户输入用户名，需要输入 username: ，但这实际上并不需要存储用户名，只需具有 username:name 检测到的有效格式在继续下一步之前）并输出附加文本或擦除现有文本并模拟新程序的启动。

我猜这主要涉及根据输入调用各种函数，然后更改这些函数中的预期输入，但我真的不知道从哪里开始。我还注意到在我看到的几个示例中，输入文本是通过使用按钮提交的。有没有办法让这个只用回车键来模拟命令控制台？

我当然不期待完整的源代码，只是一些指针。任何帮助表示赞赏，谢谢！除了 Actionscript 之外，我也愿意接受其他建议，但是生成的游戏需要能够在 Web 浏览器中运行，并且首选某种形式的文本动画。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T18:48:31.617

虽然这绝对可以在 Flash 中完成，但我强烈建议使用纯 HTML5/Javascript 来完成此任务。这样，您几乎可以保证拥有最广泛的平台采用率（XBOX 浏览器、iOS safari）。Javascript 在这里对动画同样有效。

对于使用 Flash，我将从用于输入的 TextField 类和用于输出的 TextArea 组件开始。

对于 HTML，它就像表单输入字段一样简单，并使用 javascript 更新输出的 div 区域。

祝你的项目好运。

# qt - Qt制作一个带有videowidget的qmainwindow，里面显示图像

> ID：10129731
> 
> 赞同：0
> 
> 时间：2012-04-12T18:39:19.367
> 
> 标签：qt, video, window, phonon

我正在使用`<Phonon/VideoWidget>`.

我想要两个窗户。一个是带有视频控件的主窗口，另一个是视频本身。它将显示在另一台显示器上。- 全屏与否。

如何制作视频窗口 - 可以移动或调整大小 - 里面有视频？

不播放任何视频时，视频窗口应显示图像。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T01:37:22.047

最后我没有使用 QStackedWidget，我扩展了 Phonon::VideoWidget 并制作了这个类......

继承人的cpp：

```
MyVideoWidget::MyVideoWidget(QWidget *parent) : Phonon::VideoWidget(parent)
{
    label = new QLabel(this);
    label->setAutoFillBackground(true);
    label->setBackgroundRole(QPalette::Light);
    label->setScaledContents(true);
}

void MyVideoWidget::mouseDoubleClickEvent(QMouseEvent* event)
{
    if(!this->isFullScreen())
        this->enterFullScreen();
    else
        this->setFullScreen(false);
}

void MyVideoWidget::keyPressEvent(QKeyEvent* event)
{
    if(event->key() == Qt::Key_Escape)
    {
        if(!this->isFullScreen())
            this->enterFullScreen();
        else
            this->setFullScreen(false);
    }
}

void MyVideoWidget::enterImageMode(QString imagePath)
{
    QPixmap pmap;
    pmap.fill(QColor(255, 255, 255));
    if(!pmap.load(imagePath))
    {
        label->setText("Erro ao carregar imagem: "+imagePath);
        if(!label->isVisible())
                label->show();
        return;
    }
    label->setPixmap(pmap);
    if(!label->isVisible())
        label->show();
    repaint();
}

void MyVideoWidget::enterVideoMode()
{
    label->hide();
}

void MyVideoWidget::resizeEvent(QResizeEvent* event)
{
    Phonon::VideoWidget::resizeEvent(event);
    label->setGeometry(this->geometry());
    repaint();
}

MyVideoWidget::~MyVideoWidget() 
{

} 
```

# javascript - 创建新的类实例并将参数作为数组应用

> ID：10129732
> 
> 赞同：2
> 
> 时间：2012-04-12T18:39:20.350
> 
> 标签：javascript

> **可能重复：**
> [将 .apply() 与“new”运算符一起使用。这可能吗？](https://stackoverflow.com/questions/1606797/use-of-apply-with-new-operator-is-this-possible)

我需要创建一个类 ( `new SomeClass()`) 的新实例，但我需要传递的参数是一个数组。我知道我可以调用函数`apply()`并将参数数组作为第二个参数传递给`apply`，但是在创建新实例时如何执行此操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T19:06:58.883

```
function ​myClass​()
{
    if(this instanceof arguments.callee)
    {
        init.apply(this, arguments);
    }
    function init()
    {
        this.args=arguments;
        console.log(arguments);
    }
}

var myArray=[1,2,3];
var obj=new myClass(myArray);
console.log(obj.args); 
```

[这里的例子。](http://jsfiddle.net/heera/y494n/)希望我了解您的需求，这可能对您有所帮助。

# html - 在网页上嵌入 PDF 并阻止下载

> ID：10129733
> 
> 赞同：8
> 
> 时间：2012-04-12T18:39:21.587
> 
> 标签：html, pdf

有没有办法在网页上嵌入 PDF 文档并同时禁用下载？如果可能的话，我更喜欢 html5/css3 解决方案。如果没有其他方法是可能的，我会选择其他方法。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2018-06-01T15:52:59.593

只需添加`#toolbar=0`到 pdf 的 url

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2017-11-05T14:30:16.483

是的。就在这里：

```
<div id="pdf">
    <object width="100%" height="650" type="application/pdf" data="[ImageURLHere]#zoom=85&scrollbar=0&toolbar=0&navpanes=0" id="pdf_content" style="pointer-events: none;">
        <p>Insert your error message here, if the PDF cannot be displayed.</p>
    </object>
</div> 
```

`pointer-events: none`样式还将阻止用户右键单击 PDF 并下载。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-06-17T00:14:16.323

其实是可以的，你可以在你的谷歌驱动中调整“禁止查看者下载”选项，然后将PDF文件设置为公开，这样每个人都可以在Viewer中查看PDF，但没有人可以下载。我希望这对某些人有所帮助。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-04-12T18:53:20.650

简短的回答是，它不能完成。无需任何转换即可查看 PDF 文档的唯一方法是通过 adobe PDF 插件，并且始终允许保存文档。最重要的是，使用各种工具获取 PDF 的 url 并从那里下载它是微不足道的。

如果您想避免发送实际的 PDF 文档，您可以创建一个服务器端脚本，在后台将 PDF 文档转换为一系列 PNG 或 JPG 图像。例如，您可以使用[ghostscript](http://www.ghostscript.com/)执行此操作。

但是，文档的实际内容仍然可以到达用户，只是格式不同。如果这对您不满意，您可以使用[各种](http://www.webresourcesdepot.com/10-ways-to-protect-images-from-being-stolen/) [技术](http://labnol.blogspot.com.au/2007/08/prevent-visitors-from-downloading.html)来阻止*大多数*用户保存图像，但技术足够精通的用户很容易绕过这些技术。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-12-25T13:15:44.933

您可以下载 PDF.js 并修改这两个文件：viewer.html 和 viewer.js，删除/修改相应的按钮/操作以禁用下载/打印，您可以进一步禁用右键菜单项。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-05-27T12:50:48.157

您可以使用[SlideShare](http://slideshare.net)，您可以设置读取密码，在设置中阻止用户下载，甚至创建一个秘密链接，以便只有拥有它的用户才能打开它。我确信有办法规避这一点，但至少不是立竿见影的。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-31T21:25:47.280

2017 Note: this feature has moved locations and the implementation has changed since it was originally answered.

* * *

Google Viewer offers a [solution](https://docs.google.com/viewer).

Use the iframe it generates for you.

# oracle - 如何开始查询调优？

> ID：10129736
> 
> 赞同：1
> 
> 时间：2012-04-12T18:39:30.470
> 
> 标签：oracle, oracle11g

寻找有关如何开始进行 Oracle 调优的建议，我以前从未这样做过。

我想知道如何对查询进行性能调整。我们为客户构建应用程序，所以我这里没有生产数据库。我基本上知道我们的哪些查询很重要，并希望确保它们能够快速运行。

在 MSSQL 中，它非常简单，当您启用执行计划时，它会显示有助于查询的附加索引。Oracle中有类似的东西吗？或者也许是另一种方法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-13T02:10:15.657

性能调优是一个大课题。人们采用两种基本的方法：**科学**或**猜测**。

**A. 猜测**（也称为**霰弹枪**法）

1.  看查询
2.  猜猜哪些列需要没有索引的索引`*`
3.  创建索引并重新运行查询
4.  如果没有区别，请返回步骤 1 并重复。

**B. 科学**

1.  找出查询“应该”有多快。
2.  确定查询的实际速度（尽可能在“现实”条件下）。
3.  如果它已经足够快，请停在这里。否则：
4.  确定大部分时间的去向——是旋转还是等待？
5.  如果它在等待，找出它在等待什么，并尽可能消除它。
6.  如果它在旋转，找出它在做什么它不需要做，并尽可能消除它。
7.  返回第 2 步并重复。

（`*`如果没有更多要创建的索引，请寻找其他要更改的内容 - 任何内容。例如更改一些会话或系统设置，重建表等）

（`***`如果不是很明显，我*不*提倡方法A）

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-12T22:45:34.540

我建议的第一件事是，如果您不打算对 prod 数据库进行调整，则应该将表静态数据从 prod db 导入到您的 Dev 数据库中。这将使您的 Dev 系统的行为与 prod 具有相似的数据。如果你谷歌导入统计数据，你会发现大量文章。下一阶段将查看您可以添加索引的查询，通常您认为全表扫描是一个不错的地方。

你使用绑定变量吗？

Oracle 做了很多缓存数据，所以看看你可以在哪里使用绑定变量，这将在服务器进程的私有空间中进行过滤，并避免数据库进行物理读取，从而快速返回数据。

希望这可以帮助。

# wpf - WPF ObjectDataProvider 和 ComboBox

> ID：10129745
> 
> 赞同：0
> 
> 时间：2012-04-12T18:40:23.357
> 
> 标签：wpf, objectdataprovider

我已经上网好几天了，试图弄清楚这个问题，虽然我对 ObjectDataProviders 的工作原理和方式有了很多深入的了解，但我仍然无法解决这个问题……我正在尝试使用 ObjectDataProvider 来解决这个问题访问我的视图模型中的方法。在组合框中更改选择后，此方法应该检查表单数据是否已被编辑。如果有，将询问用户是否要在选择更改之前保存编辑的信息。我似乎无法将两者联系在一起 - 组合框的列表和方法......我可以让组合框工作，但前提是我逐字指定 ItemsSource 和 SelectedItem。这些值是加载我的其余表单信息的基础。如果你看不出来，我是个新手，这个不会来找我的。再解释一下，然后我将进入代码。我的应用程序是分层结构的 - 我有 MainWindow，它调用 PERListView，它调用 EvalItemView。每个View都基于一个ViewModel，即MainWindow使用AppVM，PERListView使用PERListVM，EvalItemView使用EvalItemVM。我遇到问题的组合框在 MainWindow 中，而正在编辑的数据在 EvalItemView 中。因此，我试图使用 ObjectDataProvider 来获取 AppVM 中的 SelectedNewPERListItem 方法。此方法检查是否已进行编辑，询问用户是否希望保存更改，然后应该返回 ComboBox 使用的列表。应该注意的是，当前在组合框中作为 ItemsSource 工作的是 ObservableCollection。并且 SelectedItem (SelectedList) 是 PERListVM 类型。

好的... ObjectDataProvider：

```
xmlns:viewmodel="clr-namespace:PERTrack.ViewModel"

<Window.Resources>

    <ObjectDataProvider x:Key="PERListProvider" ObjectType="{x:Type viewmodel:AppVM}" 
```

MethodName="SelectNewPERListItem" >

```
 <ObjectDataProvider.MethodParameters>

            <sys:Int32>1</sys:Int32>

        </ObjectDataProvider.MethodParameters>

    </ObjectDataProvider> 

</Window.Resources> 
```

组合框：

```
SelectedItem="{Binding SelectedList}" IsSynchronizedWithCurrentItem="True" Background="WhiteSmoke" >
<ComboBox.SelectedValue>
    <Binding Source="{StaticResource PERListProvider}" BindsDirectlyToSource="True" 
      UpdateSourceTrigger="PropertyChanged" Mode="OneWay" />
</ComboBox.SelectedValue>
<ComboBox.ItemTemplate>
   <DataTemplate>
      <TextBlock Text="{Binding Path=PERList_ListID}" />
   </DataTemplate>
</ComboBox.ItemTemplate>
<ComboBox.ItemContainerStyle>
    <Style TargetType="ComboBoxItem">
      <Setter Property="HorizontalContentAlignment" Value="Stretch" />
    </Style>
</ComboBox.ItemContainerStyle>
</ComboBox> 
```

AppVM 视图模型中的 SelectNewPERListItem 方法：

```
 private PERListVM SelectNewPERListItem(object noParam)
    {
        if (_SelectedList != null)
        {
            if (_SelectedList.SelectedItem != null)
            {
                if (_SelectedList.SelectedItem.IsDirty)
                {
                    System.Windows.Forms.DialogResult SaveEval;
                    SaveEval = System.Windows.Forms.MessageBox.Show("Do you wish to save your updates?", "User Action", System.Windows.Forms.MessageBoxButtons.YesNo);

                    // the user wants to save the updated information
                    if (SaveEval == System.Windows.Forms.DialogResult.Yes)
                    {
                        App.context.SaveChanges();
                    }
                }
            }
        }

        return _SelectedList;
    } 
```

我知道我错过了一些东西，但我不知道它是什么......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T08:35:07.717

我对 ObjectDataProvider 一无所知，但我会用另一种方式来解决这个问题。

假设 MainWindow 是一个 WPF 窗口，其余的视图是 UserControls。MainWindow ViewModel (AppVM) 将具有 PE​​RListVM 的属性，并在 MainWindow 的 XAML 中，并将 PERListView 的 DataContext 设置为 PERListVM 属性。

ComboBox SelectedItem 绑定了 AppVM 上的一个属性，所以在这个属性的 setter 中，如果表单数据被编辑过，就调用一个方法或者检查 PERListVM 上的一个属性。

如果不清楚，请通过评论告诉我。

顺便说一句，您还应该重新考虑使用 MessageBox 的方法。调用 MessageBox.Show() 不适用于 MVVM，但这是一个单独的问题。

# bash - 带有 bash 可编程完成的条件尾随空格

> ID：10129747
> 
> 赞同：10
> 
> 时间：2012-04-12T18:40:51.013
> 
> 标签：bash, bash-completion

我正在创建一个函数来为我使用的命令提供可编程完成（在[http://www.debian-administration.org/articles/317](http://www.debian-administration.org/articles/317)的帮助下）。shell脚本用法如下：

```
script.sh command [command options] 
```

其中命令可以是“foo”或“bar”，“foo”的命令选项是“a_foo=value”和“b_foo=value”，“bar”的命令选项是“a_bar=value”和“b_bar=value” .

这是我正在使用的配置：

```
_script() {
  local cur command all_commands                                                                    
  COMPREPLY=()
  cur="${COMP_WORDS[COMP_CWORD]}"
  command="${COMP_WORDS[1]}"
  all_commands="foo bar"
  case "${command}" in
    foo)
      COMPREPLY=( $(compgen -W "--a_foo --b_foo" -- ${cur}) ); return 0;;
    bar)
      COMPREPLY=( $(compgen -W "--a_bar --b_bar" -- ${cur}) ); return 0;;
    *) ;;
  esac
  COMPREPLY=( $(compgen -W "${all_commands}" -- ${cur}) )
  return 0
}

complete -F _script script.sh 
```

这主要按我的意愿工作：

```
% script.sh f[TAB] 
```

完成到：

```
% script.sh foo 
```

（根据需要带有尾随空格）

然而，这：

```
% script.sh foo a[TAB] 
```

完成到：

```
% script.sh foo a_foo 
```

（也有尾随空格）

我想用'='替换尾随空格。或者，我愿意将传递给 compgen 的值更改为“--a_foo= --b_foo=”，在这种情况下，我可以删除尾随空格。

不幸的是，该命令不在我的控制之下，因此我无法将命令行选项的格式更改为“--a_foo value”而不是“--a_foo=value”。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-12T18:55:24.587

首先，您需要将 = 添加到 COMPREPLY：

```
COMPREPLY=( $(compgen -W "--a_foo= --b_foo=" -- ${cur}) ) 
```

接下来你需要告诉完成不要在 = 之后添加空格

```
compopt -o nospace 
```

所以，你的脚本行应该是：

```
foo)
  COMPREPLY=( $(compgen -W "--a_foo= --b_foo=" -- ${cur}) ); compopt -o nospace; return 0;;
bar)
  COMPREPLY=( $(compgen -W "--a_bar= --b_bar=" -- ${cur}) ); compopt -o nospace; return 0;; 
```

# ios - 将应用程序转换为二进制文件

> ID：10129749
> 
> 赞同：-4
> 
> 时间：2012-04-12T18:40:55.890
> 
> 标签：ios, xcode, app-store

我得到了一个项目并要求将其转换为二进制文件，以便我的老板可以将其提交到 App Store。我正在使用 xcode 4.3.1；我怎样才能做到这一点？

抱歉：我没有任何代码（我认为这不能通过代码来完成）或我为演示所做的任何事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T20:20:08.480

如果您已经在 iOS 设备上进行了测试，那么您已经有了一个二进制文件。这是下载到设备以运行您的应用程序的内容。

您可能真正需要做的是学习如何归档、共同设计和提交应用程序。

为此，没有什么比阅读 Apple 的文档更好的了。所有的。不是一些简短的提示或一两段。如果您不全部阅读，很多事情可能会出错。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T18:49:25.573

打开 Xcode。单击帮助。在搜索中键入“分发应用程序”。

开发者网站也有大量关于如何做到这一点的信息。

# python - 使用“konsole”命令运行 python 脚本

> ID：10129750
> 
> 赞同：1
> 
> 时间：2012-04-12T18:40:56.530
> 
> 标签：python, konsole

我试图从命令行打开一个 konsole 实例并运行一个 python 脚本。我正在努力：

```
konsole -hold -e  'python -i hello.py' 
```

我得到的行为是一个持久的 konsole 打开，我被放到 python 中，但脚本没有运行。

```
Python 2.7.2+ (default, Oct  4 2011, 20:03:08) 
[GCC 4.6.1] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> 
```

我需要做什么才能让 python 脚本在 konsole 窗口中运行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T19:12:21.717

jsbueno 的解决方案是正确的。但是，如此[处](http://docs.kde.org/development/en/kde-baseapps/konsole/commonissues.html)所述，您也可以执行以下操作...

`konsole --hold -e /bin/sh -c "python -i hello.py"`

PS你需要指定--workdir（在-e arg之前），或者提供python脚本的完整路径，如果它并不总是在konsole的初始工作目录中。但是，你可能已经知道了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-12T18:54:58.170

问题是“konsole”在`-e`切换后使用参数的方式 - 似乎它只是将它们传递给一个不会将空格分隔符解释为参数分隔符的调用。

但是，如果您不将调用参数放在引号内，它将起作用 - 也就是说，简单地说：

```
konsole --hold -e  python -i hello.py 
```

（我只是在这里测试过）

# php - 获取主机的 IP 地址和 HTTP 状态，以下重定向

> ID：10129761
> 
> 赞同：2
> 
> 时间：2012-04-12T18:41:27.403
> 
> 标签：php, ssh, http-status-codes

我正在构建一个小型 Web 应用程序，它将 ping 一系列域并返回它们的状态，让我监控它们是启动还是关闭，指向正确的服务器等（[可能会或可能不会工作的实时示例](http://www.permissiondenied.net/status/?so)）

我开始使用`exec("ping -n 3 -w 3 {$_POST['host']}", $output, $status);`，现在正在使用`exec("traceroute -w 1 {$_POST['host']}", $output, $status);`并抓取最后一个`$output`并匹配那里的 IP。

这在大多数情况下都有效，除了我注意到它没有遵循 301 重定向等。

例如，跟踪路由`myrayhawk.com`会产生如下内容：

```
 1  192.168.1.1 (192.168.1.1)  0.495 ms  0.683 ms  0.911 ms
 2  10.71.96.1 (10.71.96.1)  32.220 ms  55.987 ms  57.109 ms
 3  ip68-4-12-93.oc.oc.cox.net (68.4.12.93)  58.231 ms  59.353 ms  60.424 ms
 4  68.4.15.242 (68.4.15.242)  72.339 ms  73.451 ms  74.641 ms
 5  ip68-4-11-16.oc.oc.cox.net (68.4.11.16)  76.265 ms  77.383 ms  79.591 ms
 6  ip68-4-11-94.oc.oc.cox.net (68.4.11.94)  143.201 ms  18.749 ms  41.717 ms
 7  langbprj01-ae1.rd.la.cox.net (68.1.1.13)  42.843 ms  43.971 ms  68.194 ms
 8  reserved.metro.la.ipv4.godaddy.com (206.223.123.32)  45.094 ms  70.501 ms  69.329 ms
 9  ip-97-74-253-94.ip.secureserver.net (97.74.253.94)  71.622 ms  72.754 ms  74.844 ms
10  ip-97-74-253-94.ip.secureserver.net (97.74.253.94)  108.322 ms  112.058 ms  109.446 ms

11  ip-97-74-253-98.ip.secureserver.net (97.74.253.98)  110.589 ms  37.376 ms  38.861 ms
12  ip-97-74-254-134.ip.secureserver.net (97.74.254.134)  68.868 ms  70.791 ms  72.282 ms
13  ip-184-168-86-185.ip.secureserver.net (184.168.86.185)  82.400 ms  76.183 ms  78.540 ms 
```

但是做同样的事情，`rayhawk.com`因为我知道那里有一个 301 重定向：

```
 1  192.168.1.1 (192.168.1.1)  0.738 ms  0.868 ms  1.174 ms
 2  10.71.96.1 (10.71.96.1)  95.723 ms  119.914 ms  122.994 ms
 3  ip68-4-12-89.oc.oc.cox.net (68.4.12.89)  123.558 ms  124.115 ms  124.679 ms
 4  68.4.15.240 (68.4.15.240)  127.319 ms  127.933 ms  128.523 ms
 5  ip68-4-11-16.oc.oc.cox.net (68.4.11.16)  126.672 ms  132.373 ms  131.802 ms
 6  ip68-4-11-94.oc.oc.cox.net (68.4.11.94)  130.986 ms  65.913 ms  64.542 ms
 7  langbprj01-ae1.rd.la.cox.net (68.1.1.13)  89.395 ms  88.751 ms  88.113 ms
 8  reserved.metro.la.ipv4.godaddy.com (206.223.123.32)  97.840 ms  89.999 ms  90.593 ms
 9  po36.trma0202-01.bbn.mgmt.phx3.gdg (216.69.188.33)  98.454 ms  99.034 ms  115.921 ms
10  po36.trma0202-01.bbn.mgmt.phx3.gdg (216.69.188.33)  114.698 ms  114.032 ms  115.263 ms
11  * * *
12  * * *
13  * * *
14  * * *
15  * * * 
```

我试过使用`wget --spider hostname.com`但`wget`不喜欢在 php`exec()`调用中很好地工作。

当做一个`wget`普通的 SSH 时，我得到：

```
Resolving rayhawk.com... 72.167.131.159
Connecting to rayhawk.com|72.167.131.159|:80... connected.
HTTP request sent, awaiting response... 301 Moved Permanently
Location: http://www.rayhawk.com/ [following]
Spider mode enabled. Check if remote file exists.
--2012-04-12 11:37:42--  http://www.rayhawk.com/
Resolving www.rayhawk.com... 72.167.131.159
Connecting to www.rayhawk.com|72.167.131.159|:80... connected.
HTTP request sent, awaiting response... 200 OK 
```

然后可以解析出我想要的东西。

如何解析主机的最终位置并在 PHP 中检索它的 HTTP 状态代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T18:52:37.790

我写了一篇关于如何获取可能发生的 HTTP 重定向跟踪的博客文章，它附带了代码示例：

*   [HEAD 首先使用 PHP Streams](http://hakre.wordpress.com/2011/09/17/head-first-with-php-streams/) +[更新的键盘 viper 示例](http://codepad.viper-7.com/bO1HOi)

示例输出`http://example.com/`：

```
Status code (after all redirects): 200
Number of responses: 2 (1 Redirect(s))
* http://example.com/ -- 302 --> http://www.iana.org/domains/example/ 
```

[*您可以在重定向后*](https://stackoverflow.com/a/7566440/367456)[的相关问题 HTTP 响应代码的答案中](https://stackoverflow.com/a/7566440/367456)*找到对代码的更深入讨论。*

# java - 在 onCreate、onResume 或仅在声明它们时为您的实例变量提供默认值是否更好？

> ID：10129765
> 
> 赞同：2
> 
> 时间：2012-04-12T18:41:47.557
> 
> 标签：java, android

在 onCreate、onResume 或仅在声明它们时为您的实例变量提供默认值是否更好？在代码中：

声明它们时：

```
public Class Foo extends Activity{

    private String variable1 = "my super var";
    private int variable2 = 42;

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
    }
} 
```

或在 onCreate 期间

```
public class Foo extends Activity{

    private String variable1;
    private int variable2;

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        variable1 = "my super var";
        variable2 = 42;
    }
} 
```

或在简历中：

```
public class Foo extends Activity{

    private String variable1;
    private int variable2;

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
    }

    protected void onResume() {
        super.onResume();
        variable1 = "my super var";
        variable2 = 42;
    }   
} 
```

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T19:12:53.090

上面的答案很好，它确实取决于编码风格，但通常，除了声明变量时，尽量避免分配默认值。这将有助于可维护性。当你在 6 个月后回到你的代码来修复一个奇怪的错误时，将默认值分散在整个代码中会增加你的麻烦。

仅在有目的的情况下使用 onCreate、onResume 等，然后添加有意义的注释，例如

```
// re-initialise foobarValue when the app regains focus
// to ensure that the wobbly gong generator starts from the beginning
foobarValue = 1; 
```

干杯

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-12T18:50:11.273

这一切都取决于您对编码风格的感觉，当然还有被分配的实例变量。通常，我的实例变量中有相当数量是视图，因此取决于是否具有有效的上下文 - 所以我当然会放入`onCreate()`. 如果我每次离开活动并返回时都需要重置一个变量，那么它**必须**在`onResume()`. 至于内联，当我知道变量不会改变也不应该改变时，我倾向于这样做，并且我将它们设为`final`. `onCreate()`内联构造变量和依赖之间的平衡。有些人可能希望将所有作业集中在一个地方，所以`onCreate()`作为在单个位置捕获所有分配的一种方式是有意义的，如果您不在乎它们之间没有真正的性能差异，那么将分配放在您想要的位置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T18:53:57.437

我认为将其作为默认值或`onCreate`值是否简单没有很大区别。有什么`onCreate`好处是如果您需要与活动相关的东西，例如 a`Context`或来自`Intent`等的东西。那么您必须在`onCreate`.

`onCreate`但是，在vs.中进行这种初始化`onResume`会产生巨大的差异。如果您将代码放入`onResume`其中，则每次您重新获得对活动的关注时都会运行（对于确切的定义，您需要阅读[文档](http://developer.android.com/reference/android/app/Activity.html)）。这意味着如果您按下 home 键然后返回到您的应用程序，此代码将再次运行。所以这真的取决于你想要什么行为。

# java - PipedInputStream 如何从 OutputStream 中读取数据？

> ID：10129773
> 
> 赞同：0
> 
> 时间：2012-04-12T18:42:32.560
> 
> 标签：java, java-io

a 如何`PipedInputStream`从 a 中读取`PipedOutputStream`？是使用`toString()`还是有一些隐藏的魔法来访问`private`成员变量？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T18:48:52.247

`PipedOutputStream.write(int byte)`将简单地调用该`protected`方法`PipedInputStream.receive(int byte)`，而该方法又将简单地填充其自己的缓冲区。批量读/写方法也是如此。

请注意，内部缓冲区`PipedInputStream`不是`private`，但`protected`因此可以以与方法相同的方式访问`protected` `receive()`。但是`PipedOutputStream`公平竞争并且不直接访问它。

这当然可行，因为`protected`方法和字段不仅可以通过派生类访问，还可以通过[Wikipedia](http://en.wikipedia.org/wiki/Java_syntax#Access_modifiers)中所示的完整包访问。

不需要像“toString”这样的“魔法”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T18:49:16.793

通常你有一个后台线程，它从 OutputStream 读取并将它读取的内容写入 PipedInputStream 直到它完成。

# iis - 是否可以阻止网络浏览器保存网站凭据？

> ID：10129776
> 
> 赞同：1
> 
> 时间：2012-04-12T18:42:40.957
> 
> 标签：iis, browser, basic-authentication

我有一个受基本身份验证保护的网站，所以当有人点击它时，他们会得到一个标准的用户名/密码框。经常从共享计算机访问该网站。

有什么方法可以阻止浏览器上的各种“记住我的凭据”功能？我想阻止任何浏览器将此用户名/密码保存在任何客户端存​​储库中。

我意识到这纯粹是浏览器的功能，但是有没有普遍接受的 HTTP 标头或任何其他方法要求网站不要这样做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T18:44:02.833

答案是不。我真的很抱歉，但即使你能做到这一点，你将如何阻止独立加载项从网站抓取用户名和密码框，然后存储该信息。

即使这在代码中是可能的，也可以通过简单地忽略您给出的任何指令来轻松绕过。因此使这些标题毫无意义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T19:21:35.190

如前所述，无法绕过浏览器功能，它可以在发送凭据之前轻松保存凭据，`POST`从而阻止服务器上的任何内容阻止它被缓存。

# sql - ActiveRecord 查询唯一的 has-many 关联的所有第一项

> ID：10129781
> 
> 赞同：1
> 
> 时间：2012-04-12T18:42:56.513
> 
> 标签：sql, ruby-on-rails, activerecord

考虑到内部创建时间，我在创建 Rails ActiveRecord 查询时遇到问题，该查询通过唯一 Activity 检索第一个项目。我还需要 ItemStat 中可用的值，这就是包含的原因。

当前的方法实现是有效的，但它很差，需要优化。

这是我的模拟模型：

活动：

```
class Activity < ActiveRecord::Base
  has_many :items
end 
```

物品：

```
class Item < ActiveRecord::Base
  belongs_to :activity
  has_one :item_stat
end 
```

物品统计：

```
class ItemStat < ActiveRecord::Base
  belongs_to :item
end 
```

当前工作方法（activities_id 是用户可用的所有活动）：

```
def self.first_items_by_unique_activity(activities_id, time_begin, time_end)
  items = Item.includes(:item_stat).where(:activity_id => activities_id, :created_at => time_begin..time_end)

  #make the first item unique by activity
  uniques = {}
  items.each do |item|
    identifier = item.activity_id
    uniques[identifier] = item if uniques[identifier].nil?
  end   

  uniques.values
end 
```

感谢任何帮助！

# mysql - MySQL，插入和删除

> ID：10129782
> 
> 赞同：0
> 
> 时间：2012-04-12T18:43:01.807
> 
> 标签：mysql

关系：

```
Product( maker, model, type )
PC( model, speed, ram, hd, price)
Laptop( model, speed, ram, hd, screen, price)
Printer( model, color, type, price)

A. Using two INSERT statements, store in the database the fact that PC model 1100 is made by manufacturer C, has a speed of 3.2, and RAM 1024, hard disk 180, and sells $2499
B. Insert the facts that for every pc there is a laptop with the same manufacturer, speed, ram, and hard disk, a 17 inch screen, a model number 1100 greater, and a price 500 more
C. Delete all pc's with less than 100 gigabytes of hd space
D. Delete all laptops made by a manufacturer that doesn't make printers
E. Manufacturer A buys Manufacturer B. Change all products made by b so now they are made by a.
F. For each pc, double the amount of RAM and add 60gb to the amount of hd. 
G. For each laptop made by manufacturer b, add one inch to the screen size and subtract 100 from the price 
```

首先对于这些示例中的每一个，我将修改我的数据库，有没有办法快速复制我的数据库，以防我搞砸了更改？

我该如何对问题 A 使用两个插入语句？我知道“插入 R（A，B，C）值（a，b，c）；” 我应该插入 R 值 xyz 和插入 R 值 sqr 吗？

对于字母 B，这是一个约束吗？我是否需要重新制作我的数据库并让它使用 InnoDB？（我不确定这意味着什么，我只知道这意味着我可以使用约束......？......

字母 C 和 D 对我来说很困难。“从 R 中删除；” ?

对于最后三个，我该如何进行这些更改？我很确定 UPDATE 命令。所以像

```
UPDATE pc SET ram = 2*ram, hd = hd + 60; 
```

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T19:34:56.257

你应该总是从

`start transaction;`

并以`commit;`更改是否符合预期或`rollback;`未按预期结束，这会将状态恢复到开始事务命令之前的状态。

一个

```
insert into Product( maker, model, type ) values ('C','1100'...);
insert into PC( model, speed, ram, hd, price) values ('1100',.....); 
```

乙

```
insert into Laptop( model, speed, ram, hd, screen, price) select model,speed,ram,hd,'17',price-100 from pc; 
```

像这样的东西

对于其他人，你在正确的轨道上。

确保使用事务不要弄乱您的数据，您可以按照建议使用 mysql 转储或简单地创建备份表

创建表 pcBAK 为 (Select * from pc);

祝你好运

# objective-c - 如何将按下界面中的按钮与转移到另一个视图相关联？

> ID：10129788
> 
> 赞同：0
> 
> 时间：2012-04-12T18:43:18.780
> 
> 标签：objective-c, ios

我试图做到这一点，以便当我在我的 xib 文件中设置的工具栏中的 UIButton 被按下时，一个新的控制器被加载到视图中。

我该如何实施？我曾尝试复制 FlipViewController，但我认为您只能拥有其中一个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T18:48:55.977

1.  iPad（不要在整个屏幕上使用 UINavigationController）。

您可以使用这样的漂亮动画进行切换：（仅在 app-delegate 中有效，除非您更改使用`// works only in app delegate`.

```
UIViewController *ctrl = [[UIViewController alloc] initWithNibName:@"someXIBStuff" bundle:nil];

    CAKeyframeAnimation *theAnimation = [CAKeyframeAnimation animation];
    theAnimation.values = [NSArray arrayWithObjects:
                           [NSValue valueWithCATransform3D:CATransform3DMakeScale(1.12,1.12,1)],
                           [NSValue valueWithCATransform3D:CATransform3DMakeScale(1,1,1)],
                           nil];
    theAnimation.cumulative = YES;
    theAnimation.duration = 0.3;
    theAnimation.repeatCount = 0;
    theAnimation.removedOnCompletion = YES;

    theAnimation.timingFunctions = [NSArray arrayWithObjects:[CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseIn], 
                                    nil
                                    ];

    [self.window.layer addAnimation:theAnimation forKey:@"transform"];  

    CATransition *transition = [CATransition animation];
    transition.duration = 0.3;
    transition.timingFunction = [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseInEaseOut];
    transition.type = kCATransitionFade;
    transition.delegate = self;

    [self.window.layer addAnimation:transition forKey:nil]; 

    self.window.rootViewController = ctrl; // works only in app delegate
    [ctrl release]; 
```

1.  iPhone：使用[UINavigationController](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UINavigationController_Class/Reference/Reference.html)（如果可能）。如果没有，您可以使用上面的示例。

# sas - SAS：使值丢失

> ID：10129795
> 
> 赞同：0
> 
> 时间：2012-04-12T18:43:41.757
> 
> 标签：sas

我正在尝试将一些现有值设为缺失值（而不是删除它们）。这是我的数据集的基本结构。

当 A 小于 B 时，我想将 AGE 和 GENDER 视为缺失。例如，当 A=1 和 B=3 时，我想将最后两行的 AGE 和 GENDER 的值视为缺失（如数据所示套）。

在我的数据中，A 和 B 都从 1 变为 4，并且具有它们的每种组合。

星号表示它们之间有更多数据。提前致谢！

```
BEFORE
    ID A B AGE GENDER
    --------------
    1  1 1 35  M
    *  * * *   *
    *  * * *   *
    5  1 2 23  F
    5  1 2 21  M
    6  1 2 42  F
    6  1 2 43  M
    *  * * *   *
    *  * * *   *
    20 1 3 43  F
    20 1 3 39  M
    20 1 3 23  M
    21 1 3 32  F
    21 1 3 39  M
    21 1 3 23  F
    *  * * *   *
    *  * * *   *
    55 2 4 32  M
    55 2 4 12  M
    55 2 4 31  F
    55 2 4 43  M
    *  * * *   *
    *  * * *   *

AFTER    
     ID A B AGE GENDER
     --------------
     1  1 1 35  M
     *  * * *   *
     *  * * *   *
     5  1 2 23  F
     5  1 2 .   .
     6  1 2 42  F
     6  1 2 .   .
     *  * * *   *
     *  * * *   *
     20 1 3 43  F
     20 1 3 .   .
     20 1 3 .   .
     21 1 3 32  F
     21 1 3 .   .
     21 1 3 .   .
     *  * * *   *
     *  * * *   *
     55 2 4 32  M
     55 2 4 12  M
     55 2 4 .   .
     55 2 4 .   . 
     *  * * *   *
     *  * * *   * 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-12T20:26:06.693

现在怎么样？

```
data temp;
  retain idcount 0;
  set olddata;

  ** Create an observation counter for each id **;   
  prev_id = lag(id);

  if id ^= prev_id then idcount = 0;
  idcount = idcount + 1;

run;

** Sort the obs by ID in reverse order **; 
proc sort data=temp; 
    by id descending idcount;
run;

data temp2;
    retain misscount 0;
    set temp;
    by id descending idcount;

    ** Keep the previous age and gender **;
    old_age = age;
    old_gender = gender;

    ** Count the number that should be missing **;
    if a < b then nummiss = b - a;
    else nummiss = 0;

    ** Set a counter of obs that we will set to missing **;   
    if first.id then misscount = 0;

    ** Set the appropriate number of rows to missing and update the counter **;
    if misscount < nummiss then do;
       misscount = misscount + 1;
       call missing(age, gender);
    end;
run;

proc sort data=temp2 out=temp3(drop=misscount nummiss idcount prev_id);
by id idcount;
run; 
```

# drupal-7 - Drupal 7 - 博客模块 - 类别？

> ID：10129799
> 
> 赞同：0
> 
> 时间：2012-04-12T18:43:58.727
> 
> 标签：drupal-7, blogs, categories

是否可以为 Drupal 7 博客模块创建类别或标签。

我尝试创建一个新的分类法，但无法选择它作为内容类型的新字段。有没有更简单的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T19:15:23.807

您需要创建一个新字段。使其键入“术语参考”并选择适用的分类法。它不是一个共享字段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-26T14:29:56.343

对于 Drupal 6 或 7，您也可以访问[这里](http://www.ostraining.com/blog/drupal/drupal-7-taxonomy/)

# css - div 拉伸然后环绕其他浮动 div

> ID：10129818
> 
> 赞同：0
> 
> 时间：2012-04-12T18:44:56.983
> 
> 标签：css, css-float

我正在努力尝试通过 CSS 获得我想要的行为。

我在这里创建了一个 JSFiddle 来显示我的问题：http: [//jsfiddle.net/c2Snd/](http://jsfiddle.net/c2Snd/)

我希望我的#left div 的宽度可以拉伸，但只能拉伸到#right div。

基本上，我希望我的#left div 像文本一样环绕我的#right 潜水。所以在我的 JSFiddle 中，前 2 个红色框的宽度为 50%，然后底部红色框的宽度为 100%。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T19:00:29.347

看起来你刚刚拥有它.. 困惑：http: [//jsfiddle.net/BCBd2/1/](http://jsfiddle.net/BCBd2/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T18:52:34.170

好吧，我不知道是否有任何捷径可以做到这一点，但试试这个 re-Fiddle .. [http://jsfiddle.net/c2Snd/1/](http://jsfiddle.net/c2Snd/1/) 要制作这样的东西，你需要使用宽度和边框的百分比-宽度，所以它们彼此成正比。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T19:03:17.847

它符合你的目的吗？

[http://jsfiddle.net/c2Snd/2/](http://jsfiddle.net/c2Snd/2/)

# r - R中带有矩阵的for循环

> ID：10129824
> 
> 赞同：1
> 
> 时间：2012-04-12T18:45:30.397
> 
> 标签：r, for-loop, matrix

我正在尝试从矩阵编写 for 循环以在 pdf 上创建一系列图。这是我的代码：

```
pdf("/Users/Aurelz/Documents/Shark Research/DFO-data/Arctic/plots.pdf", height=8, width=6.5)
par(mfrow=c(3,2), mar=c(0.8,0.8,0.8,0.8), oma=c(2,2,1,1.5), mgp=c(0.5,0.5,0))

for (i in c("JUL","AUG","SEPT","OCT","NOV","DEC")){
  plot(Thorny.Lmm[["r","i"]], Thorny.Lmm[["Lmm","i"]], type="l")
  abline(h=0, lty=2) 
  title(main="Thorny skate in i")
}
dev.off()

>Error in Thorny.Lmm[["r", "i"]] : subscript out of bounds 
```

Thorny.Lmm 是以下格式的矩阵：

```
> Thorny.Lmm
    JUL         AUG         SEPT        OCT         NOV         DEC        
r   Numeric,513 Numeric,513 Numeric,513 Numeric,513 Numeric,513 Numeric,513
Kmm Numeric,513 Numeric,513 Numeric,513 Numeric,513 Numeric,513 Numeric,513
Lmm Numeric,513 Numeric,513 Numeric,513 Numeric,513 Numeric,513 Numeric,513 
```

我首先尝试了这段代码，效果很好。

```
plot(Thorny.Lmm[["r","JUL"]], Thorny.Lmm[["Lmm","JUL"]], type="l")
abline(h=0, lty=2)
title(main="Thorny JUL") 
```

我确信修复它相当简单，但我就是无法理解它（无论如何直到现在）！

感谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T18:48:27.337

您想要变量的值`i`而不是引用的字符串`"i"`：

```
for (i in c("JUL","AUG","SEPT","OCT","NOV","DEC")){
  plot(Thorny.Lmm[["r",i]], Thorny.Lmm[["Lmm",i]], type="l")
  abline(h=0, lty=2) 
  title(main=paste("Thorny skate in", i))
}
dev.off() 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-12T18:52:47.807

您可以尝试将引号从 i 中去掉：

```
for (i in c("JUL","AUG","SEPT","OCT","NOV","DEC")){
  plot(Thorny.Lmm[["r",i]], Thorny.Lmm[["Lmm", i]], type="l")
  abline(h=0, lty=2) 
  title(main=paste("Thorny skate in", i))
}
dev.off() 
```

或者以更 R ish 的方式使用：

```
plotter <- function(month){
    plot(Thorny.Lmm[["r",month]], Thorny.Lmm[["Lmm",month]], type="l")
    abline(h=0, lty=2)
    title(main=paste("Thorny" month))
}

lapply(colnames(Thorny.Lmm), plotter) 
```

# spring - Spring 3 中的服务 bean 和 DAO bean 实现

> ID：10129826
> 
> 赞同：1
> 
> 时间：2012-04-12T18:46:10.113
> 
> 标签：spring, service, implementation, dao

**这是我在Spring 上下文中**定义的 UserDAO bean

 **```
public class UserDAO{

  public boolean isUserAlreadyExists(User user){
     //some logic
  }

  public void createUser(User user){
     //logic to add user to database
  } 
```

}

这是我的春季服务豆

```
@Component
@Transactional(readonly="true",propagation=Propation.SUPPORTD)
public class UserService{

   @Autowired
   UserDAO userDAO;

   public void createUser(User){
       if(!userDAO.isUserAlreadyExists(user)){
           userDAO.createUser(user);
       }
   }
} 
```

我应该像这样从**UserDAO.createUser**中调用**isUserAlreadyExists**

 **```
//UserDAO.java
public void createUser(User user){

  if(!isAlreadyUserExists(user)){
     //user adding to database
  }
} 
```

***或者***

上面的服务 bean 实现是可以的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T18:57:48.147

该逻辑似乎应该在您的服务层中；和前面的例子一样。您`createUser()`在 DAO 中的函数应该只需要担心创建或添加用户。让服务层担心如果`User`已经存在该怎么办。

[好读](http://gleichmann.wordpress.com/2009/02/17/dao-its-not-about-layering-its-about-abstraction/)。****

# c# - 多线程“固定”

> ID：10129828
> 
> 赞同：4
> 
> 时间：2012-04-12T18:46:15.767
> 
> 标签：c#, multithreading, memory, parallel-processing, fixed

我有一个巨大的数组，两个线程正在对它进行不同的分析：

*   数据很大 - 不允许复制
*   线程必须同时处理
*   必须禁用边界检查以获得最佳性能

因此，每个线程看起来像这样：

```
unsafe void Thread(UInt16[] data)
{
  fixed(UInt16* pData = data)
  {
    UInt16* pDataEnd = pData + data.Length;
    for(UInt16* pCur=pData; pCur != pDataEnd; pCur++)
    {
      // do stuff
    }
  }
} 
```

由于没有互斥锁（*故意*），我想知道在并行线程上的相同数据上使用两个**固定语句是否安全？**大概第二个固定应该返回与第一个相同的指针，因为内存已经固定......当第一个完成时，它不会真正取消固定内存，因为第二个固定（）仍然处于活动状态......有没有人试过这个设想？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T19:03:30.757

根据“CLR via C#”，这样做是安全的。

编译器在变量上设置一个“固定”标志`pData`（在指针上，而不是在数组实例上）。

所以多次/递归使用应该没问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T19:13:30.657

也许您可以使用 GCHandle.Alloc 来固定数组，而不是使用固定的：

```
// not inside your thread, but were you init your shared array
GCHandle handle = GCHandle.Alloc(anArray, GCHandleType.Pinned);
IntPtr intPtr = handle.AddrOfPinnedObject();

// your thread
void Worker(IntPtr pArray)
{
  unsafe
  {
     UInt16* ptr = (UInt16*) pArray.ToPointer();
      ....
  }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-12T19:15:20.337

如果你需要做的只是

```
 for(int i = 0; i < data.Length; i++)
 {
     // do stuff with data[i]
 } 
```

JIT 编译器消除了边界检查。所以不需要不安全的代码。

请注意，如果您的访问模式比这更复杂，则这不成立。

# geocoding - 地理编码精度

> ID：10129829
> 
> 赞同：1
> 
> 时间：2012-04-12T18:46:24.653
> 
> 标签：geocoding

我是地理编码的新手，并且有一个相对较大的地址数据集 100,000+。当我使用 MapMarker Professional 对它们进行地理编码时，我得到大约 10% 的结果，我无法以高精度进行地理编码（我得到的大部分是 S2 精度值，这意​​味着它能够匹配到主要邮政编码质心，中心点的主要邮政编码边界）。每个地址都已经标准化，因此它们应该是有效的（我已经随机抽样并通过 USPS 邮政编码查找过程运行它们以验证这一点）。我的问题是，我是否应该能够以比我所看到的更高的准确度对地址进行地理编码，还是我对目前市场上的产品有太多期望？我已经尝试使用谷歌和雅虎的服务进行地理编码，但运气不佳。

感谢您提供的任何指导，杰里米

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T18:49:34.507

地理编码是一个不精确的过程。您正在进行地理编码但精度不高的地址可能位于农村地区，地址相差一英里的情况并不少见。

他们只能通过获取街道段起点和终点的数字并从那里分开来知道地址在哪里。

# java - 确定是什么开始的

> ID：10129834
> 
> 赞同：0
> 
> 时间：2012-04-12T18:46:58.617
> 
> 标签：java, jar, executable

我今天有一个有趣的问题。我试图创建一个程序，该程序仅在由程序执行时才会启动，但如果由用户启动则会出错。我可以用什么代码来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T18:52:15.950

如果`user`你的意思是直接用户交互：

您可以控制用户可以从何处启动程序，例如单击按钮。您还可以控制另一个程序可以从哪里启动该程序。因此，用户直接发出的任何命令都应该引发异常；例如，当单击所述按钮时`throw new Exception("I detect user");`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T18:55:35.583

使入口点不兼容

`public void main ( String [ ] args ) throws Exception`

喜欢

`int entryPoint ( String name )`

# ios - 重新显示视图时未调整大小的另一个表格的单元格中的动态大小的表格

> ID：10129835
> 
> 赞同：1
> 
> 时间：2012-04-12T18:46:59.760
> 
> 标签：ios, uitableview

我有一个单元格的 UITableView，其中一个单元格包含一个 UITableView。选择包含表格的那一行会在屏幕上推送一个带有项目列表的新视图。用户选择项目列表，然后按“返回”以弹出该视图。父视图查看选定项目的数量，并且单元格的高度应该调整以显示所有选定的项目。

发生的情况是，当重新显示视图时，列出的项目会延伸到下面的单元格中。如果我将该单元格从屏幕上滚动出来，然后返回到该单元格，那么该单元格的高度就是正确显示所有项目的正确高度。

我已经尝试了几件事，例如将代码放入主表的 viewWillAppear 中，例如 [self.view setNeedsDisplay] 和 [self.view setNeedsLayout]，但它不起作用。

我似乎无法找到一种方法来使该单元格重绘到正确的大小，而无需在视图出现后滚动表格。

是否有其他方法可以在重绘实际出现之前强制重绘？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T19:27:39.923

尝试：

```
NSIndexPath *theIndexPath = [NSIndexPath indexPathForRow:cellRow inSection:cellSection];
NSArray *theIndexPaths = [NSArray arrayWithObject:theIndexPath];
[table reloadRowsAtIndexPaths:theIndexPaths withRowAnimation:NO]; 
```

您目前使用什么来重绘单元格？只是等待它在离开屏幕并重新打开时重新绘制自己？或者您使用的是 [table reloadData]; 之类的东西吗？

# c# - 在 UnityContainer 中为 InjectionConstructor 配置参数化构造函数

> ID：10129836
> 
> 赞同：0
> 
> 时间：2012-04-12T18:47:14.403
> 
> 标签：c#, asp.net, dependency-injection, inversion-of-control, unity-container

LogUtil 构造函数如下所示：

```
 public LogUtil(object classType) 
    {

        ....
    } 
```

我的以下代码正常工作..

```
var container = new UnityContainer();
container.RegisterType<ILogUtility, LogUtil>(new InjectionConstructor(this.GetType()));
Logger logger = container.Resolve<Logger>(); 
```

我在配置文件中配置构造函数设置时遇到问题。我配置容器注册如下：

```
 <container>
    <register type="ILogUtility, Framework"
              mapTo="LogUtil, Log4Net">

        <constructor>
          <param name="classType" type="object">
          </param>
        </constructor>

    </register>
  </container> 
```

上述配置中的构造函数设置似乎存在问题。我无法正确传递“类型”信息。它作为“System.Object”而不是实际的类类型传递。如何修复上述构造函数配置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T19:06:54.513

我不相信你可以通过配置来做到这一点。这更像是一个静态设置，您需要运行时反射。不过，您的对象`LogUtil`应该可以转换回它们的父类型。您可以尝试的一件事是创建一个`ILoggableObject`界面，您可以将参数设置为该界面。也就是说，如果您正在寻找适用于所有控件的方法/属性

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T19:17:59.380

就个人而言，我不会使用构造函数注入。我会做更多这样的事情：

```
public static class Log
{
    private static readonly object SyncLock = new object();
    private static ILogFactory _loggerFactory;

    private static void EnsureFactory()
    {
        if (_loggerFactory == null)
        {
            lock (SyncLock)
            {
                if (_loggerFactory == null)
                {
                    _loggerFactory = ServiceLocator.Get<ILogFactory>();
                }
            }
        }
    }

    public static ILogHandler For(object itemThatRequiresLogging)
    {
        if (itemThatRequiresLoggingServices == null)
            throw new ArgumentNullException("itemThatRequiresLogging");

        return For(itemThatRequiresLoggingServices.GetType());
    }

    public static ILogHandler For(Type type)
    {
        if (type == null)
            throw new ArgumentNullException("type");

        EnsureFactory();

        return _loggerFactory.CreateFor(type);
    }

    public static ILogHandler For<T>()
    {
        return For(typeof(T));
    }
} 
```

它会像这样使用：

```
Log.For(this).Debug("Some Stuff to log.")); //Debug is defined in ILogHandler. 
```

类型是通过方法调用而不是构造函数传入的。

# dictionary - 在 Groovy 中添加两个映射，同时汇总公共键的值

> ID：10129837
> 
> 赞同：20
> 
> 时间：2012-04-12T18:47:15.393
> 
> 标签：dictionary, groovy

我在 Groovy 中有两张地图，`[a: 1, b: 2]`并`[b:1, c:3]`想从中创建第三张地图`[a: 1, b: 3, c: 3]`。是否有一个 Groovy 命令可以做到这一点？

**编辑**：请注意，如果键相同，则第三个映射中的值是前两个映射中的值的总和。

谢谢

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-12T19:57:50.870

另一个解决方案是：

```
def m1 = [ a:1, b:2 ]
def m2 = [ b:1, c:3 ]

def newMap = [m1,m2]*.keySet().flatten().unique().collectEntries {
  [ (it): [m1,m2]*.get( it ).findAll().sum() ]
} 
```

以[epidemian的回答](https://stackoverflow.com/a/10131141/6509)为灵感，也可以写个方法来处理多张地图

```
def m1 = [a: 1, b: 2]
def m2 = [b: 1, c: 3]

def combine( Map... m ) {
  m.collectMany { it.entrySet() }.inject( [:] ) { result, e ->
    result << [ (e.key):e.value + ( result[ e.key ] ?: 0 ) ]
  }
}

def newMap = combine( m1, m2 ) 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-04-12T20:17:20.927

这应该适用于任意数量的地图：

```
def maps = [[a: 1, b: 2], [b:1, c:3]]

def result = [:].withDefault{0}
maps.collectMany{ it.entrySet() }.each{ result[it.key] += it.value }

assert result == [a: 1, b: 3, c: 3] 
```

该`maps.collectMany{ it.entrySet() }`表达式返回一个映射条目列表，例如`[a=1, b=2, b=1, c=3]`，然后将每个条目添加到结果中。

另一种选择是，如果您想将所有转换保留为一个表达式并使其“更具功能性”，则首先按键对条目进行分组，然后对值求和，但我认为它的可读性较差：

```
def result = maps.collectMany{ it.entrySet() }
    .groupBy{ it.key }
    .collectEntries{[it.key, it.value.sum{ it.value }]} 
```

该`groupBy`部分返回表单的映射，`[a:[a=1], b:[b=2, b=1], c:[c=3]]`然后将`collectEntries`映射转换为具有相同 kays 但具有值中列表总和的另一个映射。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-09-10T04:53:46.630

以下示例演示了将两个映射添加到第三个映射`m3`：

```
Map m1 = [ a:1, b:2 ];
Map m2 = [ b:1, c:3 ];
Map m3 = [:];
m3 << m1
m3 << m2 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-01-09T13:23:01.950

一个不错的方法是使用扩展运算符：

```
def m1 = [ a:1, b:2 ]
def m2 = [ b:1, c:3 ]
def m3 = [ *:m1, *:m2 ]

println "m1 = $m1"
println "m2 = $m2"
println "m3 = $m3" 
```

*信用： http: [//mrhaki.blogspot.ch/2009/09/groovy-goodness-spread-operator.html](http://mrhaki.blogspot.ch/2009/09/groovy-goodness-spread-operator.html)

上面的代码在 groovysh 中不起作用，但在 groovy 控制台中很好。（适用于 1.8 版）

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-04-12T19:44:13.630

我认为没有现成的方法，也许使用类似的方法：

```
def m1 = [a: 1, b: 2]
def m2 = [b: 1, c: 3]
def newMap = (m1.keySet() + m2.keySet()).inject([:]) { 
    acc, k -> acc[k] = (m1[k] ?: 0) + (m2[k] ?: 0); acc 
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-12T19:46:00.460

这样做：

```
Map additionJoin( Map map1, Map map2 )
{
  def result = [:];
  result.putAll( map1 );
  result.putAll( map2 );

  result.each { key, value ->
    if( map1[key] && map2[key] )
    {
      result[key] = map1[key] + map2[key]
    }
  }

  return result;
}

def a = [a: 1, b: 2]
def b = [b:1,c:3]

def c = additionJoin( a, b )

println c 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-03-10T12:32:12.703

```
def merge(map1, map2) { 
    def add = { map, entry -> map << entry }
    map2.inject(map1.inject([:], add), add)
} 
```

# google-maps-api-3 - Openlayers Google V3 不加载 main.js

> ID：10129843
> 
> 赞同：0
> 
> 时间：2012-04-12T18:47:35.720
> 
> 标签：google-maps-api-3, openlayers

在某些情况下（只有上帝或谷歌知道），这不足以提供 js 标签......

```
<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script> 
```

...为了加载 Google V3 API。在这些情况下，我必须提供以下加载相应 main.js 的标记：

```
<script type="text/javascript" src=" http://maps.gstatic.com/intl/pt_br/mapfiles/api-3/8/7/main.js"></script> 
```

因为这个文件不会从第一个脚本自动加载。

有人已经经历过同样的行为吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T06:32:27.427

可能那是因为您没有在脚本标签中指定 api-version 。这对我来说很好：

```
<script src="http://maps.google.com/maps/api/js?v=3.5&amp;sensor=false"></script> 
```

# asp-classic - 寻找 SQL 注入演示

> ID：10129849
> 
> 赞同：-1
> 
> 时间：2012-04-12T18:48:03.237
> 
> 标签：asp-classic, sql-injection

我是一名 Web 应用程序开发人员，使用 Classic ASP 作为服务器端脚本。

我总是通过使用一个简单的函数将字符串参数的单撇号加倍来保护我的应用程序免受 SQL 注入。

```
Function ForSQL(strString)  
  ForSQL = Replace(strString, "'", "''")  
End Function 
```

对于数字参数，我使用 CInt、CLng 和 CDbl 函数。

我经常写串联查询；我并不总是使用存储过程，也不总是验证用户输入。

我想问你是否有人可以向我展示针对这行代码的有效攻击：

```
strSQL = "SELECT Id FROM tUsers WHERE Username='" & _
         ForSQL(Left(Request.Form("Username"),20)) & "' AND Password='" & _ 
         ForSQL(Left(Request.Form("Username"),20)) & "'" 
```

这可能是一种平庸，但我从未发现一种有效的攻击方式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T02:16:31.507

我总是找到“sqli helper 2.7”（你可以下载它）来查找大多数/所有 SQL 注入。我不确定这是否会有所帮助，但它至少有助于测试所有 SQL 注释和所有内容。我记得在我的一个网站上，它发现了一个主要的 SQL 注入来使我的所有数据库数据变得哑巴。这并不完全是您正在寻找的东西，但它可能能够找到解决方法。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-04-12T22:15:59.903

以这种方式净化的输入没有有效的 SQL 注入。缺点是从数据库中检索数据是您必须替换双撇号。

```
sDataRetrievedFromDatabase = Replace(sDataRetrievedFromDatabase, "''", "'") 
```

# c - 多级反馈队列初始化结构

> ID：10129854
> 
> 赞同：0
> 
> 时间：2012-04-12T18:48:27.420
> 
> 标签：c, struct, queue, feedback, multi-level

你好，

我正在尝试建立一个多级反馈队列，但我在访问数据结构时遇到了问题。

```
struct str1
{
`    int time;
     int Id;
     int Size;
     struct str1 *next;
};

struct mlfq
{
     int quantum;
     int timereached;
     struct mystruct p;
};

struct str1 *front; //read from the file and stored.

struct mlfq *ml; 
```

我想要做的是将“mlfq”链接到另一个“前”队列。

在我的插入函数中，我分配了内存

```
struct mlfq *ptr;  
    struct str1 *temp;
    ptr = malloc(sizeof(struct mlgq)
    temp=malloc(sizeof(struct str1));
        ptr->p = front; 
```

出现错误：分配中的类型不兼容。现在front已加载，我试图获取队列结构“front”的内容以链接到它。

谁能告诉我发生了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T16:10:18.717

在

```
ptr->p = front; 
```

`ptr->p`是`struct str1`or类型`struct mystruct`（你似乎把它们混在一起了），而`front`是`struct str1 *`or类型`struct mystruct *`。您正在尝试将指针分配给非指针类型的变量。您需要取消引用`front`才能使分配正确。正确编译的语句将是

```
ptr->p = *front; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-17T09:42:26.847

我曾经实现过多级反馈队列调度算法（这是我自己创建的）。我制作了 3 个队列，第一个时间量子 10 毫秒（FCFS），第二个时间量子 40 毫秒（FCFS），第三个和最后一个只有先到先得的算法。

# android - Android Eclipse 中的 Date.getTime

> ID：10129857
> 
> 赞同：1
> 
> 时间：2012-04-12T18:48:39.397
> 
> 标签：android, eclipse, date

这是我为日期赋值的代码：

```
long saveddatevalue = new Date().getTime(); 
```

我只是想知道，这个保存的长变量实际上显示了什么？我希望用它在一定天数内输出值。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T18:50:34.613

它基本上会给你相同的结果`System.currentTimeMillis()`- 自 1970 年 1 月 1 日午夜 Unix 纪元以来的毫秒数，UTC。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T22:12:39.460

[`java.util.Calendar.add(int, int)`](http://docs.oracle.com/javase/6/docs/api/java/util/Calendar.html)操作日期要容易得多。[这](http://www.mkyong.com/java/how-to-modify-date-time-date-manipulation-java/)是一些示例代码。

# php - 处理 $_POST 数组

> ID：10129859
> 
> 赞同：-6
> 
> 时间：2012-04-12T18:48:46.857
> 
> 标签：php, mysql

> **可能重复：从**[PHP 中的 json_decode JSON 解码](https://stackoverflow.com/questions/5616880/json-decode-in-php)
> [获取数组结果](https://stackoverflow.com/questions/5209330/getting-an-array-result-from-json-decode)

我需要帮助将一些选定的 $_POST 数据存储到 mysql 中。我不知道变量名称，它是来自 carloom 的即时通知功能，例如 paypal ipn。

**ipn.php**

```
<?php
$data = print_r($_POST); 

$to = "hello065-65@yahoo.com";
$subject = "My subject";
$txt = $data;

mail($to,$subject,$txt,$headers);
?> 
```

当我使用`print_r($_POST);`

我在电子邮件中收到以下内容..

```
order: {"billingFirstName":"sachin","billingLastName":"gupta","billingCompany":"df","billingAddress1":"33","billingAddress2":"","billingCity":"Chandigarh","billingState":"CT","billingPostalCode":"44444","billingCountry":"US","billingEmail":"hello065-65@yahoo.com","billingPhone":"","shippingFirstName":"","shippingLastName":"","shippingCompany":"","shippingAddress1":"","shippingAddress2":"","shippingCity":"","shippingState":null,"shippingPostalCode":null,"shippingCountry":null,"date":"Wed Apr 11 15:18:40 EDT 2012","transid":497070762,"invoice":1012,"grandTotal":"$0.00","payMethod":"none","comments":"","cartContents":[{"id":"48401","title":"Alex & Me - 10% Coupon","options":"","qty":"1","price":"0.00"}],"subTotal":"$0.00","discountAmount":"$0.00","discountTitle":"Complimentary Order","salesTaxTitle":"CT Sales Tax","salesTaxAmount":"$0.00","shippingTitle":null,"shippingAmount":"$0.00"}<br> 
```

谁能帮助我，如何将**billingFirstName** **sachin**数据存储到 mysql 中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T18:52:32.547

对我来说它看起来像 JSON

你可以试试。。

```
$order_details = json_decode($_POST['order']);
$the_variable_you_want = $order_details['billingFirstName']; 
```

编辑：更新了示例以更清楚地向您展示如何获取所需的变量。

# sharepoint - sharepoint 文档库中上传的文件的二进制内容（BLOB）？

> ID：10129863
> 
> 赞同：1
> 
> 时间：2012-04-12T18:48:57.733
> 
> 标签：sharepoint

从最初的研发开始，我就知道文件实际上并不位于 Sharepoint 中。在哪里（表字段）是位于 SQL Server 的文档库中上传的文件的二进制内容？

有一个表 'AllDocStream' 和 View 'DocStream' 字段名为 'content' 和 Binary values 。但是我没有在这些表和视图中找到相应的文件 ID 等。

如果我想访问文档库中上传的文件的二进制内容，该怎么做？我想在其他应用程序中使用这些二进制文件内容来显示/查看/下载文件。

谢谢，提前。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T19:15:28.410

如果您可以通过 SharePoint C# API 访问 SPFile 对象，那么您可以使用[其他问题](https://stackoverflow.com/questions/5230681/how-to-save-spfile-in-physical-location-in-c-sharp)的答案中的代码。

```
using (SPSite site = new SPSite(siteUrl))
{
    using (SPWeb web = site.RootWeb)
    {
        SPList list = web.Lists["Document Library Name"];

        foreach (SPListItem item in list.Items)
        {
            SPFile file = item.File;
            using (Stream stream = file.OpenBinaryStream())
            {
              //Do what you want with the Stream...
            }
        }
    }
} 
```

# java - 覆盖率与可达代码

> ID：10129864
> 
> 赞同：5
> 
> 时间：2012-04-12T18:49:02.150
> 
> 标签：java, unit-testing, junit, mocking, code-coverage

问：如何检测真实的测试覆盖率？

我注意到代码覆盖率指标和测试质量存在一个问题：100% 的代码覆盖率并不意味着代码真的经过测试。

有时测试会提供 100% 的覆盖率，即使它不能覆盖所有内容。问题在于覆盖定义，我们假设**覆盖==可达代码**。

但事实并非如此，代码可能 100% 可访问，但测试无法 100% 覆盖。

看一个例子，这个测试提供了 100% 的覆盖率 (EMMA)，但实际上它不包括将传递给服务模拟的值。所以，如果值会改变，测试不会失败。

例子：

```
public class User {
  public static final int INT_VALUE = 1;
  public static final boolean BOOLEAN_VALUE = false;
  public static final String STRING_VALUE = "";
  private Service service;

  public void setService(Service service) {
      this.service = service;
  }

  public String userMethod() {
      return service.doSomething(INT_VALUE, BOOLEAN_VALUE, STRING_VALUE);
  }
} 
```

并对其进行测试：

```
public class UserTest {

  private User user;
  private Service easyMockNiceMock;

  @Before
  public void setUp() throws Exception {
      user = new User();
      easyMockNiceMock = EasyMock.createNiceMock(Service.class);
  }

  @Test
  public void nonCoverage() throws Exception {
      // given
      user.setService(easyMockNiceMock);
      expect(easyMockNiceMock.doSomething(anyInt(), anyBoolean(), (String) anyObject())).andReturn("");
      replay(easyMockNiceMock);
      // when
      user.userMethod();
      // then
      verify(easyMockNiceMock);
  }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T18:59:20.653

看看[Jester](http://jester.sourceforge.net/)，它执行[突变测试](http://en.wikipedia.org/wiki/Mutation_testing)。从网站：

> Jester 查找测试未涵盖的代码。Jester 对您的代码进行一些更改，运行您的测试，如果测试通过，Jester 会显示一条消息，说明它所做的更改。Jester 包含一个用于生成网页的脚本，该网页显示所做的更改不会导致测试失败。
> 
> Jester 与代码覆盖工具不同，因为它可以找到通过运行测试执行但未实际测试的代码。Jester 的方法称为突变测试或自动错误播种。然而，Jester 并不是要替代代码覆盖工具，而只是作为一种补充方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T16:25:26.933

100% 的覆盖率绝不意味着 100% 的测试，任何声称这样做的人要么不理解，要么在对你撒谎。覆盖率测量只是测量在测试期间执行了哪些产品代码。有几十种方法可以编写产生 100% 覆盖率的测试，然后不完全测试您的代码。

最简单的方法是编写一个调用 product 函数的测试，然后从不对返回值做任何断言！

这是我写的关于这个主题的博客文章：[Flaws in Coverage Measurement](http://nedbatchelder.com/blog/200710/flaws_in_coverage_measurement.html)，它以 Python 为中心，但概念都是一样的。

# java - IntelliJ IDEA 11 添加 CDI 方面失败？

> ID：10129866
> 
> 赞同：0
> 
> 时间：2012-04-12T18:49:17.850
> 
> 标签：java, jakarta-ee, intellij-idea, cdi

我的 POM 中有以下依赖项。我正在尝试在 IntelliJ IDEA 11 中添加 CDI 方面，因为我认为我可以获得创建 beans.xml 文件的选项，而无需手动编写它，就像您使用 persistence.xml 等一样。但是即使我有它说缺少 Weld 的依赖项，但是当我在 POM 中拥有所需的一切时，为什么我需要下载这些依赖项？

```
 <dependency>
        <groupId>javax</groupId>
        <artifactId>javaee-api</artifactId>
        <version>6.0</version>
        <scope>provided</scope>
    </dependency>
    <dependency>
        <groupId>javax.enterprise</groupId>
        <artifactId>cdi-api</artifactId>
        <version>1.0</version>
        <scope>provided</scope>
    </dependency> 
```

![在此处输入图像描述](../Images/623dbda80dd1735eb5ef46ccb8b74ce9.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T04:17:18.373

在 JBoss 堆栈上，我通常使用该依赖项：

```
<dependency>
<groupId>org.jboss.spec</groupId>
<artifactId>jboss-javaee-6.0</artifactId>
<version>1.0.0.Final</version>
<type>pom</type>
<scope>provided</scope>
</dependency> 
```

（需要 JBoss 仓库）

[在此处](https://github.com/jangroth/jax2011/blob/master/todo/pom.xml)查看该配置，我将其用于普通 Java EE 6 堆栈（在 JBoss AS 6 上）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T16:54:23.470

我从来没有在类路径上焊接过。只需 cdi-api 和 beans.xml，它就可以很好地找到方面。如果您担心必须手动创建 beans.xml，请为其创建一个模板并完成。

# asp.net-mvc - Ajax 函数从下拉列表中获取选定的值并将该值传递给 Controller 中的函数

> ID：10129872
> 
> 赞同：0
> 
> 时间：2012-04-12T18:49:33.170
> 
> 标签：asp.net-mvc, asp.net-mvc-3, jquery, drop-down-menu

我正在 MVC3 中创建一个应用程序，其中我有很多下拉列表现在根据在第一个下拉列表中选择的值填充第二个下拉列表。我需要为此编写 Ajax，而且我很难做到这一点。

我有我的第一个下拉菜单“选择课程”，现在在该特定课程 ID 的帮助下选择了哪个课程，从数据库中选择了相应的状态。

例如，如果课程是“MCA”，则状态下拉列表必须填充诸如马哈拉施特拉邦、拉贾斯坦邦等状态。

我为 Ajax 尝试了以下代码，但它不起作用并给我一个错误

```
 $("#Course").change(function () {
        var Courseid = $("#Course").val();
        var urlCourselocation = '@Url.Action("FetchstatebyCourse")';
        $.ajax({
            type: "POST",
            url: urlCourselocation,
            data: { id: Courseid },
            success: function (data) {
                          $('#State').empty();
                          $('#State')
                        .append($('<option>', { value: "0" })
                        .text("-- Select State --"));
                    $.each(returndata, function (key, value) {

                    $('#State')
                        .append($('<option>', { value: value.Value })
                        .text(value.Text));
                });
               }
        });
    }); 
```

在控制器中我写了以下函数：

```
 public ActionResult FetchHobbyDetailByHobbyId(int Id)
    {
        LearnerService learnerservice = new LearnerService();
        /* Here is some Code to fetch the state id from the database*/
        ICollection<ProvincialState> state = learnerservice.FetchStateByStateid(stateid);
        ViewBag.State = state;

        if (HttpContext.Request.IsAjaxRequest())
            return Json(new SelectList(
                            state,
                           "ProvincialStateID",
                           "ProvincialStateName"));
        return View();
    } 
```

如果我错了，请帮助我使用代码并纠正我..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T18:52:28.657

哦，我想我看到了这个问题......不应该：

```
 $.each(returndata, function (key, value) { 
```

是

```
 $.each(data, function (key, value) { 
```

# c# - 如何更改模板字段内控件的属性？

> ID：10129878
> 
> 赞同：0
> 
> 时间：2012-04-12T18:50:02.487
> 
> 标签：c#, asp.net

我有一个模板字段，在模板字段内有一个文本框和过滤的文本框扩展器。我需要在c# 代码隐藏中将filteredtextboxextender 的ValidChars 属性从“123”更改为“abc”。模板字段位于 GridView 内。我在 aspx 页面中使用了以下代码。

```
<asp:GridView ID="grdEducation" runat="server" AllowSorting="True" AutoGenerateColumns="False"
                        AllowPaging="false" CellPadding="4" GridLines="Vertical" OnRowDeleting="grdEducation_RowDeleting"
                        OnRowDataBound="grdEducation_RowDataBound" OnRowUpdating="grdEducation_RowUpdating" ShowFooter="false" ShowHeader="true">
                        <HeaderStyle CssClass="grid-header-style" />
                        <Columns>
                        <asp:TemplateField HeaderStyle-CssClass="grid-label-small" >`   

    <ItemTemplate>
                                    <table>
                                        <tr>
                                            <td width='90%'>
                                                <table>
                                                <td width='60%'>
                                                        <asp:TextBox ID="textbox1" Width="100px" runat="server"
                                                            ToolTip="Provide text" MaxLength="11"></asp:TextBox>
                                                        <ajaxtoolkit:FilteredTextBoxExtender ID="filter" runat="server" TargetControlID="textbox1"
                                                            ValidChars="123" />

                                                    </td>
                                                </table>
    </td>
                                        </tr>
                                    </table>
                                </ItemTemplate>
                        </asp:TemplateField>
                        </Columns>
</asp:GridView> 
```

有没有可能像这样更改过滤文本框扩展器属性？

谢谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T19:06:33.630

像下面这样注册`RowBoundData`事件。

```
protected void GridView_RowDataBound(object sender, GridViewRowEventArgs e)
{
    if (e.Row.RowType == DataControlRowType.DataRow)
    {
        YourControlType Conrol = (YourControlType)e.Row.FindControl("ControlID");
        //Set the property here
    }
} 
```

您也可以类似地更改`Row_Command`事件中的控件属性

# jquery - 水平手风琴表格网格的可排序结果

> ID：10129886
> 
> 赞同：1
> 
> 时间：2012-04-12T18:50:34.183
> 
> 标签：jquery, sorting, horizontal-accordion

我有一个手风琴网格脚本，我已经研究了一段时间了。它背后的整个概念是提供可按类别（水平）展开/折叠的列组，以帮助减少浏览器中的水平滚动。

我现在遇到的问题是因为脚本按类别分解数据（代码返回给定类别的所有数据行，关闭表和列表，然后转到下一个类别），我有一个真的很难思考如何让所有东西都可以排序。

我需要这个脚本来运行是一种用户可以单击任何给定类别或列标题以按单击的类别或列标题对所有行进行排序的方式。

**[我创建了我的脚本的演示版本，以帮助向人们展示网格的代码结构。](http://redapplefalls.net/_projects/expand-test/demo.html)**否则很难解释。

非常感谢任何建议。

# c# - 从 varbinary 数据创建附件并使其可下载

> ID：10129888
> 
> 赞同：1
> 
> 时间：2012-04-12T18:50:41.390
> 
> 标签：c#, asp.net-mvc

我在数据库中有一个附件表，其中有一个 varbinary 格式的文件名和文件数据。在 c# 端，我需要将此数据转换为字符串，并根据 MIMEType 创建一个可下载的 .xls/.pdf 文件。做这个的最好方式是什么？我可以使用 ActionLink 来执行此操作吗？我是使用 MVC 的新手，不知道最好的方法。任何建议，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T19:00:54.290

我会绕过转换为字符串，只担心返回正确的 mime 类型。

看看这个问题：

[byte[] 到 MVC 3 中的文件类型](https://stackoverflow.com/questions/7617834/byte-to-file-type-in-mvc-3)

您只需要确定内容类型即可设置 MIME 类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T19:08:33.647

> 我可以使用 ActionLink 来执行此操作吗？

是的。

> 在 c# 端，我需要将此数据转换为字符串，并根据 MIMEType 创建一个可下载的 .xls/.pdf 文件。

您将 Content-Disposition ( [http://msdn.microsoft.com/en-us/library/ms526989(v=exchg.10).aspx](http://msdn.microsoft.com/en-us/library/ms526989(v=exchg.10).aspx) ) 添加到响应标头。

**内容处置：附件**

指定为包含附件的正文部分需要显示用户操作。并且通常从消息中分离出来。它们通常存储为文件以供后续访问。此标头的可选参数是：文件名、创建日期、修改日期、读取日期和大小。

**内容处置：内联**

打开消息时向用户显示内联内容。内联正文部分将按照它们在消息中出现的顺序显示，但要遵守多部分内容类型的适用规则。如果多部分正文部分具有内联标题，则内联名称适用于整个多部分，而不是其子部分。

检查代码：[https ://stackoverflow.com/a/9610656/1241400](https://stackoverflow.com/a/9610656/1241400)

您可以使用`inline`*.pdf，因为大多数浏览器都可以打开它，而对于其他文件类型，请使用 .pdf `attachment`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T19:53:31.220

我以前不得不做同样的事情。我将返回一个 FileContentResult，然后使用 Urlmon.dll 来确定要传递给Controller 类上的 File 方法[http://msdn.microsoft.com/en-us/library/dd460208.aspx](http://msdn.microsoft.com/en-us/library/dd460208.aspx)的 mime 类型，并使用您从数据库中获得的 byte[] 数据，以及 Urlmon.dll 返回的 mime 类型，[http](http://pinvoke.net/default.aspx/urlmon.FindMimeFromData) ://pinvoke.net/default.aspx/urlmon.FindMimeFromData ，pinvoke。

# delphi - 单个应用程序中的多个 MDI 父窗体

> ID：10129890
> 
> 赞同：-1
> 
> 时间：2012-04-12T18:50:51.797
> 
> 标签：delphi, vcl, mdi

VCL 本身不允许 MainForm 以外的表单托管 MDI 子表单。这是 Borland 的硬编码限制，而不是 Microsoft 的 MDI 体系结构的限制。Microsoft 允许应用程序中的多个窗口托管 MDI 子项。Win32 API 中没有 MainForms 的概念。

我尝试将下面的 embarcadro c++ 示例转换为 embarcadro delphi，但没有成功。创建 mdi 子表单时，我不断遇到错误“当前没有活动的 mdi 表单”。

此 c++ 示例演示了如何允许非 MDI 项目托管多个 MDI 父窗体，这些父窗体都不是 VCL 的 MainForm。

下载信息（下载需要帐户） [http://cc.embarcadero.com/item/23574](http://cc.embarcadero.com/item/23574)

直接下载（无需账号即可下载） [http://www.delphibasics.info/MultipleMDIParentFormsInASingleApplication.zip](http://www.delphibasics.info/MultipleMDIParentFormsInASingleApplication.zip)

如果有人将此示例从 embarcadro c++ 语言转换为 embarcadro delphi 语言，我将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-12T19:35:33.317

Quality Central [#12006 在非 MainForm 表单中托管 MDI 子表单](https://web.archive.org/web/20171220121543/http://qc.embarcadero.com/wc/qcmain.aspx?d=12006)在其解决方法描述中有详细步骤，说明如何添加对此的支持。不过，它确实涉及修补 VCL 源代码，并且是针对 Delphi 2005 发布的，因此某些步骤可能已经改变。它也被关闭为**Won't Do**，所以如果你采用这种方法，你必须自己长期维护它。

# nservicebus - NServiceBus XML 序列化程序错误

> ID：10129891
> 
> 赞同：0
> 
> 时间：2012-04-12T18:50:54.797
> 
> 标签：nservicebus

我正在使用 NSB 3.0.3。这是我的项目：

*   Registrations.Messages（所有事件都是命令消息都在这里）
*   注册.域名
*   注册.EventStorage
*   Registrations.MessageHandlers
*   注册服务器

Registrations.Server 使用 NServiceBus.Host 来托管 nsb。端点配置在这里：

```
public class EndpointConfig : IConfigureThisEndpoint, AsA_Publisher, IWantCustomInitialization
{
    #region Implementation of IWantCustomInitialization

    public void Init()
    {
        var kernel = new StandardKernel();
        kernel.Load(new BackendModule());

        Configure.With()
            .NinjectBuilder(kernel);
    }

    #endregion
} 
```

服务器的配置是：

```
<?xml version="1.0" encoding="utf-8"?> 
```

```
<configSections>
    <section name="MessageForwardingInCaseOfFaultConfig"
             type="NServiceBus.Config.MessageForwardingInCaseOfFaultConfig, NServiceBus.Core" />
    <section name="UnicastBusConfig"
             type="NServiceBus.Config.UnicastBusConfig, NServiceBus.Core"/>
</configSections>

<MessageForwardingInCaseOfFaultConfig ErrorQueue="error" />

<UnicastBusConfig>
    <MessageEndpointMappings>
        <add Messages="Registrations.Messages"
             Endpoint="Accounts.Server"/>
    </MessageEndpointMappings>
</UnicastBusConfig> 
```

我创建了一个测试控制台应用程序来发送命令。一切正常，直到 NSB 发布消息。例外情况如下：

我创建了我的类来包装 NSB：

```
public class NsbBus : IEventBus
{
    private readonly IBus m_nsb;

    public NsbBus(IBus nsb)
    {
        m_nsb = nsb;
    }

    #region Implementation of IEventBus

    public void Publish<T>(T @event) where T : class, IEvent<IIdentity>
    {
        m_nsb.Publish(@event);
    }

    public void PublishAll<T>(IEnumerable<T> events) where T : class, IEvent<IIdentity>
    {
        m_nsb.Publish(events);
    }

    #endregion
}

Type System.Collections.Generic.List`1[[Aec.Cqrs.IEvent`1[[Aec.Cqrs.IIdentity, Aec.Cqrs, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], Aec.Cqrs, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]] was not registered in the serializer. Check that it appears in the list of configured assemblies/types to scan. 
```

该程序集 Aec.Cqrs 在服务器项目中被引用并部署到 bin 目录。

我查看了类似的帖子，但它们是关于网络项目的。这不是一个网络项目。有什么想法为什么会出现序列化错误？

谢谢

# linq - 使用 LINQ 和 Lambda 在 DataSet 中选择和 Foreach 不起作用

> ID：10129894
> 
> 赞同：-2
> 
> 时间：2012-04-12T18:51:47.997
> 
> 标签：linq, select, lambda, distinct

我需要做 select 和 foreach 但它不起作用。我怎样才能做到这一点？

```
Ds ds = new Ds(); //DataSet
Ds.HousesRow houseRow= ds.House.NewHousesRow(); 

houseRow.color= "red";
houseRow.date= new DateTime();
houseRow.description= "ZZZ";

ds.Houses.AddHouseRow(houseRow);

var lHouses= ds.Houses.Select(i => new { i.color, i.description}).OrderBy(i => i).Distinct();

foreach (Ds.HousesRow item in lHouses)
{
      System.Diagnostics.Debug.Print("Color: " + item.color + "Description: " + item.description);
} 
```

Tks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T19:03:04.333

2件事：

*   我认为使用 Select() 有点不必要，因为所做的只是限制发送到 foreach 的数据，至少在这种情况下，您正在做的事情只会节省非常小的内存。如果您将整个变量转储到 JSON 中，那么限制数据量将是有益的。
*   就像另一个人说的那样，如果你愿意，在 foreach 中使用 var 可以让你使用匿名类型。我个人的偏好是，我尽量避免这种情况，除非是在序列化事物时（即使这样，我也更喜欢做数据合同以避免以后如果我拼错单词或其他东西时出错）

    ```
    Ds.HouseRow lHouses= ds.Houses.OrderBy(i => i.Description).Distinct();

    foreach (Ds.HouseRow item in lHouses)
    {
          System.Diagnostics.Debug.Print("Color: " + item.color + "Description: " + item.description);
    } 
    ```

编辑：此外，您的 orderby 必须说一些比较才能进行订购。我只是举例说明。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T18:55:22.873

您正在创建一个匿名类型：`Select(i => new { i.color, i.description})`.

您不能`Ds.HousesRow`在 foreach 中将该类型转换为。

将循环更改为

```
foreach (var item in lHouses)
{
      System.Diagnostics.Debug.Print("Color: " + item.color + "Description: " + item.description);
} 
```

您将在循环中使用匿名类型。

# android - 为什么使用 HttpPost 登录网站再次显示登录页面？

> ID：10129900
> 
> 赞同：1
> 
> 时间：2012-04-12T18:52:09.750
> 
> 标签：android, http-post

我正在开发一个 Android 应用程序，我需要登录到一个网页。为此，我使用 HttpPost。这就是我正在做的事情：

```
HttpClient httpclient = new DefaultHttpClient();
    HttpPost httppost = new HttpPost("http://202.163.117.123:8080/hitrack/default.aspx");
 try {
      // Add your data
      List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(2);
      nameValuePairs.add(new BasicNameValuePair("__EVENTTARGET", ""));
      nameValuePairs.add(new BasicNameValuePair("__EVENTARGUMENT", ""));
      nameValuePairs.add(new BasicNameValuePair("username", "user123"));
      nameValuePairs.add(new BasicNameValuePair("Password", "pass456"));
      nameValuePairs.add(new BasicNameValuePair("ButtonLogin0", "Login"));
      httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs, HTTP.UTF_8));
      // Execute HTTP Post Request
      HttpResponse response = httpclient.execute(httppost);
      String responseBody = EntityUtils.toString(response.getEntity());
      Log.d("response",responseBody);

  } catch (ClientProtocolException e) {
      // TODO Auto-generated catch block
     e.printStackTrace();
  } catch (IOException e) {
      // TODO Auto-generated catch block
      e.printStackTrace();
  } 
```

但这向我展示了相同 loginPage 的来源。为什么它不重定向到其他页面？我是否必须添加重定向处理程序。如果是，那么我是否要实施它？

我试过了，但这也没有用。

# json - 如何将 Spring MVC ModelAndView 作为 String 返回到 JSONResponse 对象？

> ID：10129905
> 
> 赞同：0
> 
> 时间：2012-04-12T18:52:26.983
> 
> 标签：json, spring, spring-mvc, jackson

我想做的事：

*   系统会提示用户选择要执行的操作列表，例如搜索用户、注册新用户等。我的想法是，当用户单击选择其中一个选项时，使用 JQuery 触发 AJAX 调用，然后执行该方法，返回 JSONResponse。

JSONResponse 只是一个带有 2 个变量的简单对象：状态为字符串，结果为对象，如下所示：

```
public class JSONResponse {
private String status = null;
private Object result = null;

public String getStatus() {
    return status;
}
public void setStatus(String status) {
    this.status = status;
}
public Object getResult() {
    return result;
}
public void setResult(Object result) {
    this.result = result;
}       
} 
```

但是，有时我想在此响应中返回一个 ModelAndView。例如：当用户搜索一个用户时，应用程序搜索它，然后返回一个 ModelAndView 和一个可能的用户列表。实现此目的的一种方法是将 ModelAndView 呈现为 String，然后将其作为结果放入 JSONResponse 对象。问题是如何将 ModelAndView 呈现为 String 以将其放入 JSONReponse？

PS：我正在使用 Tomcat 7、JDK 6、Spring MVC 3.0 和 Tiles 2、Jackson（将 Java 对象转换为 JSON）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T21:25:04.220

如果需要，您可以返回 ModelAndView，否则写入响应流。

```
public ModelAndView getSomething(HttpServletResponse response) { 
    // perform your logic

    if(obj returned must be a json) {
        try {
              new MappingJacksonHttpMessageConverter().write(obj, MediaType.APPLICATION_JSON, new ServletServerHttpResponse(response));
        } catch(Exception e) {
              logger.error("Error while serializing to JSON string.");
        }

        return null;
    } else {
        return new ModelAndView("yourview");
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T10:33:06.940

根据您的问题，我了解有时您需要返回 json，有时需要返回模型和视图，因为您正在使用模型和视图传递搜索列表。理想情况下，这两件事必须以不同的方法处理，但如果您想以相同的方法处理它，那么您的方法必须返回**String**而不是**ModelAndView**，以便您可以返回 json 数据。您可以将要发送的搜索列表放入会话中，然后您将在 JSP 页面上获取它（因为会话范围）。

方法看起来有点像这样：

```
public @ResponseBody
String methodName(HttpServletRequest request) {

       if(jsondata){ //Wants to send json data
       return jsonFinalData.toString();
       }else{
       //store search list in session
        return view_name;   
} 
```

# javascript - CoffeeScript，传递多个参数，包括匿名函数

> ID：10129909
> 
> 赞同：5
> 
> 时间：2012-04-12T18:52:35.657
> 
> 标签：javascript, coffeescript

我不知道如何在 CS 中写这个。也许 some1 可以提供帮助：

```
FB.getLoginStatus(function (response) {} , {scope : scope}) 
```

谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-12T18:56:38.390

你会像这样写一些 CoffeeScript ......

```
FB.getLoginStatus(
  (response) -> 
    doSomething()
  {scope: scope}) 
```

哪个会像这样转换为JavaScript...

```
FB.getLoginStatus(function(response) {
  return doSomething();
}, {
  scope: scope
}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-12T19:48:11.923

```
FB.getLoginStatus(function(response) {}, {
  scope: scope
}); 
```

在 JavaScript 中是：

```
FB.getLoginStatus(
  (response) ->
  { scope }
) 
```

在咖啡脚本中。

要回答有关多个参数的问题，请进一步查看以下示例：

```
$('.main li').hover(
  -> $(@).find('span').show()   
  -> $(@).find('span').hide()
) 
```

在 CoffeeScript 中等于：

```
$('.main li').hover(function() {
  return $(this).find('span').show();
}, function() {
  return $(this).find('span').hide();
}); 
```

在 JavaScript 中。

关于处理多个参数（没有匿名函数）的一个更简单的例子是：

```
hello = (firstName, lastName) ->
  console.log "Hello #{firstName} #{lastName}"

hello "Coffee", "Script" 
```

在 CoffeeScript 中编译为：

```
var hello;

hello = function(firstName, lastName) {
  return console.log("Hello " + firstName + " " + lastName);
};

hello("Coffee", "Script"); 
```

在 JavaScript 中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-21T22:18:43.900

另外一个选项：

```
FB.getLoginStatus(((response) ->),{scope}) 
```

# android - 无法使用自定义首选项注册点击事件

> ID：10129912
> 
> 赞同：1
> 
> 时间：2012-04-12T18:52:42.360
> 
> 标签：android, android-preferences

我已经建立了一个`Preference`包含字段`Button`的自定义。`android:widgetLayout`我想在按下此按钮时触发特定操作，但我无法让侦听器接收点击事件。这是我尝试过的：

```
 @Override
    public void onCreate( Bundle savedInstanceState ) {

        super.onCreate( savedInstanceState );
        addPreferencesFromResource( R.xml.preference_account );

        Preference signOutPreference = findPreference( "sign_out" );
        signOutPreference.setOnPreferenceClickListener( new OnPreferenceClickListener() {

            @Override
            public boolean onPreferenceClick( Preference preference ) {

                Log.i( TAG, "Click" );
                return false;
            }
        } );
    }

    @Override
    public View onCreateView( LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState ) {

        View root = super.onCreateView( inflater, container, savedInstanceState );
        root.findViewById( R.id.preference_signOut_Button ).setOnClickListener( new OnSignOutClickListener() );

        return root;
    }

    private class OnSignOutClickListener implements OnClickListener {

        @Override
        public void onClick( View v ) {

            Log.i( TAG, "Click" );
        }
    } 
```

当`OnPreferenceClickListener`我单击按钮或首选项行时永远不会触发，并且在尝试查找按钮视图时`onCreateView`实现会抛出一个。`NullPointerException`

单击此按钮时如何收听？作为参考，以下是相关的 XML 文件：

偏好帐户.xml

```
<PreferenceScreen xmlns:android="http://schemas.android.com/apk/res/android" >

    <Preference
        android:key="sign_out"
        android:persistent="false"
        android:summary="account@email.com"
        android:title="Signed in as:"
        android:widgetLayout="@layout/sign_out_button" />

</PreferenceScreen> 
```

签出按钮.xml

```
<Button xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/preference_signOut_Button"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="Sign Out" /> 
```

**编辑：**我找到了使用`android:onClick`按钮字段的解决方案，但如果可能的话，我仍然希望使用解决方案`Preference`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T14:28:32.277

也许你可以试试下面的例子：

```
class MyOnPreferenceClickListener implements OnPreferenceClickListener {
private Activity activity;
private static final String TAG = "ABCDEFGH...";

public MyOnPreferenceClickListener(Activity activity) {
    this.activity = activity;
}

@Override
public boolean onPreferenceClick(Preference preference) {
    Log.i(TAG, "Click on Item " + preference.getKey());
    return true;
}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T15:05:22.170

稍微更新@Sushanth Raghuthaman 的回答。这对我有用：

```
public class CustomPreference extends Preference implements OnPreferenceClickListener {

    public CustomPreference(Context context) {
        super(context);
        setOnPreferenceClickListener(this);
    }

    public CustomPreference(Context context, AttributeSet attrs) {
        super(context, attrs);
        setOnPreferenceClickListener(this);
    }

    public CustomPreference(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
        setOnPreferenceClickListener(this);
    }

    public boolean onPreferenceClick(Preference preference) {
        //Do something here...
        return true;
    }

} 
```

上面重要的一行是使用自身注册首选项点击*setOnPreferenceClickListener(this);* .

# database - VB6 数据库上的 DAO 3.6 问题

> ID：10129916
> 
> 赞同：0
> 
> 时间：2012-04-12T18:52:47.883
> 
> 标签：database, vb6, dao

我目前正在尝试启动一个将 VB6 前端连接到 access 2000 数据库的数据库。在某些计算机上，我们遇到了从数据库中提取的数据未显示或未正确显示的问题。

工作的计算机似乎在系统 32 和 microsoftshared/dao 中修改了相同的 dao360.dll 日期，而不工作的计算机没有修改相同的日期。

这是导致错误的原因吗？我该如何纠正？还是正在发生其他事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T10:39:44.207

我建议安装最新版本的 MDAC 和 Jet。虽然 Jet 曾经是 MDAC 的一部分，但我很确定他们此时已将其放入自己的安装/更新/服务包中。也许从这里开始：http: [//support.microsoft.com/kb/239114](http://support.microsoft.com/kb/239114)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T02:39:36.493

系统上不应有两个 DLL 副本。听起来好像以前在这些系统上安装了一些设计不佳的应用程序。没有人知道这件事的全部程度。

打包为一个独立的应用程序可以使您的程序免受这些创建 DLL Hell 的不良安装的影响。遗憾的是，MDAC/DAC 和相关组件很难隔离。

这是在 1998 年（如果不是从那时起）移至 ADO 的另一个原因。虽然您不能像隔离 DAO 一样隔离 MDAC/DAC 的 ADO 相关部分，但这些库现在作为 Windows 的一部分提供。您不需要部署它们，并且它们可以通过 Windows 中越来越好的系统文件保护机制来保护它们免受不良安装程序的影响。

* * *

然而，提供具体帮助可能需要对正在发生的事情进行更具体和详细的​​描述，而不是“没有出现或没有正确出现”。

我会使用 DAO 创建一个最小的测试用例来开始探索问题的真正所在（和什么）。一开始可能只是一个简单的查询，显示返回的行集，没有数据绑定。

# c# - 自动化 WebBrowser.ShowSaveAsDialog() 或替代方法

> ID：10129918
> 
> 赞同：0
> 
> 时间：2012-04-12T18:52:56.160
> 
> 标签：c#, webbrowser-control, download, webclient, imagedownload

基本上我不想保存加载到 webBrowser 控件中的图像。目前我可以让它工作的唯一方法是显示另存为对话框。

有没有办法通过路径并使其自救？（隐藏我要求显示的对话框！）

还有另一种保存图像的方法吗？我似乎无法让文档流工作。我也尝试过`webclient.filedownload(...)`，但收到错误 302（“（302）找到重定向。”）

`DownloadFileAsync`没有错误但一个空的jpeg文件？

文件总是 jpeg，但并不总是在同一个位置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T19:18:21.143

您应该使用[HttpWebRequest](http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.allowautoredirect.aspx)。

它具有自动跟随 302 的能力。

```
var myHttpWebRequest = (HttpWebRequest)WebRequest.Create("http://www.contoso.com"); 
//increase this number if there are more then one redirects. 
myHttpWebRequest.MaximumAutomaticRedirections = 1;
myHttpWebRequest.AllowAutoRedirect = true;
var myHttpWebResponse = (HttpWebResponse)myHttpWebRequest.GetResponse();    

var buff = new byte[myHttpWebResponse.ContentLength];

// here you specify the path to the file. The path in this example is : image.jpg
// if you want to store it in the application root use:
// AppDomain.CurrentDomain.BaseDirectory + "\\image.jpg"
using (var sw = new BinaryWriter(File.Open("c:\\image.jpg", FileMode.OpenOrCreate)))
{
    using (var br = new BinaryReader (myHttpWebResponse.GetResponseStream ()))
    {
        br.Read(buff, 0, (int)myHttpWebResponse.ContentLength);
        sw.Write(buff);
    }            
} 
```

# jquery - 多少 javascript 是太多 javascript

> ID：10129924
> 
> 赞同：1
> 
> 时间：2012-04-12T18:53:24.430
> 
> 标签：jquery, performance, easing

我正在将一个 Flash 站点转换为 js，并且发生了很多事情：

不断运行动态后台，运行在jquery上。站点通过 ajax API 调用数百张图片。将鼠标悬停在图像上，调用更多 ajax 来获取更大的版本并将其显示为覆盖，并带有漂亮的动画序列。许多鼠标定位都需要确定鼠标是否仍然位于覆盖层所覆盖的图像上。

但是即使有缓动，一些动画也会变得神经质。这是停止使用js的重点吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-12T19:05:40.180

这个问题没有具体的答案（对于stackoverflow的问答格式来说，这可能不是一个好问题）。拥有大量用于不同事物的 javascript 没有问题。今天的浏览器非常有能力处理这个问题。

对您来说，第一个问题是没有缓存任何内容时网站的初始加载时间。如果您有太多的脚本和图像，并且该网站需要很长时间才能启动，那么访问者会在他们开始之前放弃您。

第二个问题实际上只是评估每个操作并处理那些感觉迟钝或在较慢的浏览器中看起来不正确的操作。当您发现事情变慢时，几乎总是可以通过更智能的开发或开发适应策略来改进任何给定的操作。

第三个问题是确保你有一些对移动有意义的东西。就下载大小、脚本执行和性能而言，您在桌面上可以摆脱的东西在移动设备上不一定就可以。

# jquery - Raphael 通过其 ID 获取和元素

> ID：10129928
> 
> 赞同：2
> 
> 时间：2012-04-12T18:53:42.210
> 
> 标签：jquery, raphael

我是 Raphael.js 的新手，无法通过 id 获取对对象的引用。

我使用 raphael（因为我喜欢它:-)）在运行时创建圆形按钮。

我由以下的孩子创建一个按钮`<div>`：

```
<div class="elements">
<div>BUTTON HERE<img src="XXX" /></div>
<div>BUTTON HERE</div>
<div>BUTTON HERE</div>
</div> 
```

然后我在场景中使用一个已经 (XXX) 的图像来创建一个新的图像对象，我将它放在我的每个实例容器中。

问题是，稍后，我要求我的 raphael 对象响应自定义事件（**我的馅饼中的第 67 行**）。

在我的事件处理程序（**第 62 行**）中，我希望能够检索一个特定的`image`（**在第 21 行设置了 ID**）。

关于如何通过其 ID 或其他方法获取我的`image`元素的任何想法？

我的功能在这里： http: [//pastie.org/3775836](http://pastie.org/3775836)

提前感谢您的时间和耐心，

Jk_

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-17T11:55:15.653

为什么不创建一个数组（在你的函数之外）。

```
var array = new Array( arrayLength ); 
```

然后而不是：

```
img.id = index; 
```

利用：

```
array[ index ] = img; 
```

您现在可以通过在数组中查找图像来按索引访问图像。

# java - JUnit编织错误的Spring AOP Bean

> ID：10129929
> 
> 赞同：2
> 
> 时间：2012-04-12T18:53:49.153
> 
> 标签：java, spring, junit, aop

我遇到了一个奇怪的问题，我很难追踪。我有一个类 (ServiceErrorInterceptor) 定义为`@Aspect`通过 XML 配置实例化为单例 bean。XML 配置允许我注入它的依赖 bean。

在我的正常工作流程中，一切正常。方面类已正确实例化，并且无论何时调用通知，注入的 bean 都符合我的预期。

但是，当我运行 JUnit 测试时，我注入的所有 bean 都是空的。这使我得出结论，通知是从不同的 bean 调用的 - 不是 Spring 实例化的同一个单例 bean。为了进一步验证我的假设，我在实例化过程中调用的 setter 上设置了一个断点，如果我在建议中设置断点，则 bean id 与 bean id 不同。

我必须在我的 JUnit 类中启用一些特殊配置来纠正这个问题吗？我的测试类已经注释：

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(locations = { 
        "classpath:spring/applicationContext-base.xml", 
        "classpath:spring/applicationContext-calculateServices.xml", 
        "classpath:spring/applicationContext-dom.xml"})
public class LendingSimulationServiceImplTest {
...
...
} 
```

我查看了日志（我启用了 spring 跟踪日志），但没有看到任何突出的内容。在这里发布整个日志可能会有点矫枉过正。如果日志的特定部分有价值，请告诉我，我会发布。

如果有帮助，我可以发布我的方面、我的 junit 和我的配置的代码。

application-context.xml 片段：

```
<!-- SPRING ASPECT BEAN.  POINTCUT DEFINED IN BEAN WITH ANNOTATION -->
<bean id="serviceErrorInterceptor" class="com.cws.cs.lendingsimulationservice.error.ServiceErrorInterceptor" scope="singleton">
    <property name="errorMessageProvider" ref="resourceBundleProviderImpl"/>
    <property name="defaultLocale">
        <util:constant static-field="java.util.Locale.ENGLISH" />
    </property>
</bean> 
```

任何建议，将不胜感激。

**编辑**

我的bean实现为：

```
@Aspect
public class ServiceErrorInterceptor {

    /**
     * Logger
     */
    private static final Logger logger = LoggerFactory.getLogger(ServiceErrorInterceptor.class);

    /**
     * SOAP Header data
     */
    @Autowired
    private SOAPHeaderData soapHeaderData;

    public ServiceErrorInterceptor(){
        int x = 0;
        x=x+1;

    }

    /**
     * Exception Interceptor. 
     * @param ex
     */
    @AfterThrowing(pointcut = "execution(* com.cws.cs.lendingsimulationservice.process.CalculatorProcess.calculate (..))", throwing = "ex")
    public void errorInterceptor(Exception ex) {
        if (logger.isDebugEnabled()) {
            logger.debug("Error Message Interceptor started");
        }

    } 
```

我的 pom 的相关部分：

```
 <!-- Aspect Oriented Programming (AOP) Framework (depends on spring-core, 
        spring-beans) Define this if you use Spring AOP APIs (org.springframework.aop.*) -->
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-aop</artifactId>
        <version>${org.springframework.version}</version>
    </dependency>

    <!-- Support for AspectJ Annotations -->
    <dependency>
        <groupId>org.aspectj</groupId>
        <artifactId>aspectjweaver</artifactId>
        <version>${org.aspectj}</version>
    </dependency> 
```

我已经完成了进一步的调试并在虚拟构造函数中放置了一个断点，我得到以下结果：

*   使用 @Aspect 和 XML 配置，构造函数被调用两次（不同的 bean id）
*   如果我删除 @Aspect 注释，那么它只会被调用一次。
*   如果离开 @Aspect 但删除 XML 配置，则构造函数甚至不会被调用。
*   如果我将 @Component 注释与 @Aspect 结合使用（但没有任何 XML 配置），那么 bean 会被构造两次。
*   然而，奇怪的是，使用 @Component 和 @Aspect 注释*以及*XML 配置，构造函数仍然只调用了两次。

那么，为什么同时拥有 XML 配置和 @Aspect 注释会导致构造函数被调用两次，并使用两个不同的 bean id？

我已经进一步验证，如果我将整个 AOP 定义移动到 XML 配置中（删除 @Aspect 和 @Pointcut 注释），那么 bean 只会构造一次。

**结束编辑**

谢谢，

埃里克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T20:53:58.253

除了@Aspect 之外，您的方面是否有任何自动检测注释（@Component、@Service）等 - 如果有，这可能是一个不同的 bean 似乎与您定义的 bean 一起出现的原因之一配置。

此外，只需扫描所有配置以确保您没有在其他地方声明此 bean。

据我所知，在 Junit 级别上没有什么特别需要做的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T14:35:21.510

在 SpringSource STS 论坛上与人们进行大量讨论后（请参阅[此线程](http://forum.springsource.org/showthread.php?125470-How-to-enable-AspectJ-nature-in-a-Spring-project-with-annotated-and-aj-aspects)），事实证明该问题与 AJDT 配置有关。目前，AJ 正在编织切面，而 Spring 正在将切面定位在 Classpath 上，因此它们都在执行。

不幸的是，AJ maven 插件缺少允许排除编织的配置参数；当前配置不包括 LTW 和 CTW。

因此，目前的解决方法是添加`-xmlConfigured`到 AJ 编译器标志，然后在 aop.xml 管理中指定一个 aop.xml 文件，该文件仅列出您想要包含在项目中的 AJ 方面。

> 要使其工作，请将“-xmlConfigured”添加到项目属性“非标准编译器选项”中，然后在 AspectJBuild>“aop.xml 管理”中将其指向一个简单的 aop.xml 文件：
> 
> ```
> <aspectj> 
>     <aspects> 
>        <aspect name="com.fooMyNewNoneSpringAspect"/>
>     </aspects> 
> </aspectj> 
> ```

感谢 STS 论坛上的 Andy Clement 的发现和解决方法。他将提出 JIRA 问题，以进一步解决 maven 插件中的这一缺点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-04T18:42:27.540

您可能会发现自己处于相同情况的一种可能方式：您使用了**new**运算符，而不是让 Spring**注入**您的服务。

请记住，我们不是在这里进行 AspectJ 编译时编织。不，我们使用的是 Spring AOP 代理，因此 Spring 必须实例化对象并使用代理对其进行修饰。如果您像我一样愚蠢，并且在您的测试中创建了一个新服务，那么您将不会获得任何 AOP。

更有理由使用 AspectJ 进行编译时编织并跳过 Spring AOP 的所有缺点，例如运行时编织启动延迟、无法编织非公共和非最终类。

# sql - 'RadioButtonList' 有一个无效的 SelectedValue，因为它不存在于项目列表中

> ID：10129930
> 
> 赞同：0
> 
> 时间：2012-04-12T18:53:52.960
> 
> 标签：sql, radiobuttonlist, selectedvalue

我有一个 RadioButtonList 看起来像这样：

```
<asp:RadioButtonList 
    ID="rblAgenda" 
    SelectedValue = '<%# Bind("bitAgenda") %>'
    runat="server" 
    RepeatDirection="Horizontal">
    <asp:ListItem Value="1">Yes</asp:ListItem>
    <asp:ListItem Value="0">No</asp:ListItem>
</asp:RadioButtonList> 
```

这是在绑定到 sqlDataSource 的表单视图内。我检查了它为 bitAgenda 返回 1 的存储过程，但我仍然收到此错误消息：

```
'rblAgenda' has a SelectedValue which is invalid because it does not exist in the list of items.
Parameter name: value 
```

这让我发疯>:(有什么想法？？？顺便说一句 bitAgenda 是数据库中的一个字段，这是导致问题的原因吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T19:00:13.507

尝试分别更改您的`ListItem`值 from`1`和`0`to`true`和`false`。

# ruby-on-rails - 如何防止配置文件 url 与其他路由冲突

> ID：10129932
> 
> 赞同：2
> 
> 时间：2012-04-12T18:53:57.733
> 
> 标签：ruby-on-rails, ruby-on-rails-3, routes

如果我希望用户网址看起来像

```
http://site.com/foobar 
```

代替

```
http://site.com/users/foobar 
```

`foobar`将是`nickname`用户模型中列中用户的昵称。如何防止用户注册顶级路由？比如联系、关于、注销等？

我可以有一个保留名称表。所以当用户注册一个昵称时，它会检查这个表。但是有没有更方便的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T19:26:54.940

```
if(Rails.application.routes.recognize_path('nickname') rescue nil)
  # forbid using desired nickname
else
  # nickname can be used -- no collisions with existing paths
end 
```

**升级版：**

如果似乎有任何路径被 识别，`recognize_path`那么你会得到类似的东西：

```
get ':nick' => 'user#show' 
```

在你的最后，`routes.rb`这会导致任何路径都可以路由的情况。要解决此问题，您必须使用约束。我给你看一个例子：

```
# in routes.rb
class NickMustExistConstraint
    def self.matches?(req)
        req.original_url =~ %r[//.*?/(.*)] # finds jdoe in http://site.com/jdoe. You have to look at this regexp, but you got the idea.
        User.find_by_nick $1
    end
end
get ':nick' => 'users#show', constraints: NickMustExistConstraint 
```

通过这种方式，我们将一些动态添加到我们的路由系统中，如果我们有一个带有 nick 的用户，`jdoe`那么路由`/jdoe`将被识别。如果我们没有 nick 的用户，那么`rroe`path`/rroe`将无法路由。

**但**如果我是你，我只会做两件事：

```
# in User.rb
def to_param
  nick
end
# in routing.rb
resources :users, path: 'u' 
```

它将使我能够获得类似 a 的路径`/u/jdoe`（这非常简单并且完全符合 REST）。

在这种情况下，请确保您正在搜索您的用户`User.find_by_nick! params[:id]`（是的，它仍然`params[:id]`包含一个标题，不幸的是）。

# r - 自动分析多个 .txt 文件

> ID：10129933
> 
> 赞同：1
> 
> 时间：2012-04-12T18:53:58.363
> 
> 标签：r, large-data

我有两种类型（a + b）的txt文件的许多副本，即：

```
a1.txt a2.txt a3.txt... and b1.txt b2.txt b3.txt 
```

我的目标是运行一个执行以下操作的 r 脚本：

```
read.table a1.txt
#run a bunch of code that chops and changes the data and then stores some vectors and data      frames.
w<-results
x<-results
detach a1.txt
read.table b1 .txt 
#run a bunch of code that chops and changes the data and then stores some vectors and data frames.
y<-results
z<-results
model1<-lm(w~y)
model2<-lm(x~z) 
```

每次我想从模型 1 的 1 个斜率和模型 2 的 2 个斜率中提取系数。我想在所有 a 和 b 文本文件对中以自动方式运行此分析，并在另一个文件中建立矢量格式的系数。供以后分析。

到目前为止，我只能从[像这样](https://stackoverflow.com/questions/4854130/how-to-iterate-over-file-names-in-a-r-script)的更简单的分析中得到一些零碎的东西。有没有人知道如何在许多文件上运行这个更复杂的迭代？

编辑：到目前为止尝试但失败了：

```
your<-function(x) 
{
files <- list.files(pattern=paste('.', x, '\\.txt', sep=''))
a <- read.table(files[1],header=FALSE)
attach(a)
w <- V1-V2
detach(a)
b <- read.table(files[2],header=FALSE)
z <- V1-V2
model <- lm(w~z)
detach(b)
return(model$coefficients[2])
}

slopes <- lapply(1:2, your)
Error in your(1) : object 'V1' not found 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T19:26:48.100

您可以执行以下操作：

```
files <- list.files(pattern='.1\\.txt') # get a1.txt and b1.txt 
```

如果你知道你有多少个文件（比如说 10 个），你可以将上面的代码包装在一个函数中，并`apply`根据你想要的输出使用一个家族：

```
your.function(x) {
  files <- list.files(pattern=paste('.', x, '\\.txt', sep=''))
  a <- read.table(files[1])
  b <- read.table(files[2])

  w <- ...
  x <- ...

  y <- ...
  z <- ...

  model1 <- lm(w~y)
  model2 <- lm(x~z)

  return(c(model1$coefficients[2], moedl2$coefficients[2]))
}

slopes <- lapply(1:10, your.function) 
```

# c# - 易于应用定制的应用架构

> ID：10129936
> 
> 赞同：3
> 
> 时间：2012-04-12T18:54:20.810
> 
> 标签：c#, events, plugins, customization

我正在寻找有关构建会计应用程序的方向的输入。应用程序需要允许高度定制，有时需要更改整个流程。

当客户有特定的修改请求时，我想要一种无需重新编译整个应用程序即可进行更改的方法。后端将是某种 SQL 数据库。出于成本原因，很可能是 SQL Server Express。前端将是 C#。

我正在考虑一个基于事件的系统，该系统将在进行不同类型的操作（例如条目）时具有事件。然后我会有一个处理事件的插件系统。在最终保存数据之前，我可能需要以特定顺序对数据应用多个进程。它还需要触发其他进程。

我想保持我的基本应用程序相同，它适用于大多数客户，但有一种优雅的方式来加载其他特定客户拥有的自定义流程。

我愿意接受所有建议。即使他们正在考虑解决问题的完全不同的方法。我们目前的内部开发人才是 .NET 和 MS SQL Server。我不知道可能适合这种情况的软件模式。

附加信息：这不是一个完全空白的系统，它将具有适用于大量客户的功能。由于各种原因，要求会根据州甚至可能需要定制的地区和城镇级别而变化。

我希望能够插入额外的预编译模块。当我开始研究可能的选项时，我在想象一个可以通过插件插入代码的空处理程序。例如，在引发事件的总账中创建了一个新条目。处理程序被调用，但处理程序的代码来自一个插件，这可能是我的原始流程，适合 80% 的客户。如果客户想要自定义操作，我可以添加一个插件来完全替换原来的插件，或者让它在原来的运行后通过另一个插件添加额外的后期处理步骤。我猜是一种分层过程。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T20:05:35.540

您可以查看[Managed Extensibility Framework](http://mef.codeplex.com/) 它提供了丰富的组合层功能，允许您构建松散耦合的插件应用程序。

更新：听起来您需要不同地理区域的预定义模块，使用责任链设计模式可能会帮助您管理变更原则。抱歉，没有提供代码只是抛出我的想法

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T19:12:39.287

[Windows Workflow Foundation (WF)](http://en.wikipedia.org/wiki/Windows_Workflow_Foundation)（.NET Framework 的一部分）是满足您要求的潜在候选者。它支持动态组合各种操作、命令和脚本，以便您可以更轻松地为不同的用户/客户定制不同的工作流程。

WF 被 Biztalk 用于大规模系统集成，并由许多其他需要能够轻松修改许多较小任务和操作的编排的应用程序在进程中托管。

您可能想从[WF4 上的本教程开始](http://msdn.microsoft.com/en-us/library/ee342461.aspx)。

HTH。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T20:52:48.907

这不仅仅是插件或您如何在技术上解决该插件问题的方式，使用 MEF（+1 @laptop）或其他东西，您必须尽最大努力在应用程序中定义插件“点”，这已经是最重要的了例如。你将把那个空的“事件”放在哪里来放置你的代码，或者这个事件或插件将有什么参数。

例如，可用的插件将在保存事件之前，但您必须在应用程序中只有一个地方可以保存各种类型的业务文档，因此您可以在那里调用插件，参数将是抽象文档对象。

所以你必须认真思考你的系统架构，对于各种插件点足够抽象，并且完全完成那个架构，不要只做系统的一部分然后开始编码。

我希望你明白我的意思，因为英语不是我的母语。

# ruby-on-rails - Heroku 回形针失败

> ID：10129937
> 
> 赞同：0
> 
> 时间：2012-04-12T18:54:28.490
> 
> 标签：ruby-on-rails

使用 Paperclip 在我的本地计算机上工作但在部署到 Heroku 时不进行图像上传有什么可能的影响？

当它部署到 Heroku 时，图像不会保存。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T19:06:54.783

据我所知，您不能直接写入 Heroku 的文件系统，所以我假设这是您的问题。使用像 Amazon s3 这样的东西来存储图像是有意义的。看看这个：[Heroku 中的 Amazon S3](https://devcenter.heroku.com/articles/s3)

配置好 s3 后，您希望将回形针更改为`has_attached_file`以下内容：

```
has_attached_file :my_picture, 
    :styles => { :medium => "275x275>" },
    :storage => :s3, :s3_credentials => "#{RAILS_ROOT}/config/s3.yml",
    :path => "user/:attachment/:style/:id.:extension" 
```

其中 s3.yml 将是您定义访问密钥、存储桶的配置文件...

它应该看起来像这样：

```
production:
 access_key_id: [Your Key]
 secret_access_key: [Your Secret]
 bucket: [Your bucket name] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T16:13:24.460

这是 Paperclip 的一位开发人员编写的另[一篇指南/文章](https://devcenter.heroku.com/articles/paperclip-s3)，它详细解释了如何将 Paperclip 与 Heroku 和 S3 集成

# eclipse - 缺少启动组下的 Eclipse 条目

> ID：10129940
> 
> 赞同：1
> 
> 时间：2012-04-12T18:54:55.557
> 
> 标签：eclipse, eclipse-plugin, eclipse-indigo, netburner

我为 NetBurner 平台做 C++ 嵌入式开发。他们有自定义 Eclipse 的插件，除了构建工具链之外，他们还在 Run Configuration 区域下添加了一个 Launch Group。当我决定安装 Subclipse（大错误）时，在 Indigo（32 位）下一切正常。安装完成后，我无法再成功运行现有配置。当我进入运行配置区域时，我注意到我以前使用的启动组丢失了。这是昨天早些时候的样子：

![在安装 subclipse 之前运行配置对话框](../Images/37b90d15d6f7f730419ec76900edadfb.png)

这是今天的样子：

![安装 subclipse 后运行配置对话框](../Images/2333d326e71e20959fce97852b60bf04.png)

# 我尝试过的事情

1.  首先，我使用 Help->About->Installation Details 卸载了 Subclipse 插件，然后一次选择一个，卸载并在每次卸载后重新启动。不用找了。

2.  然后我将原始 Eclipse Indigo/CDT 32 位下载解压缩到一个新文件夹。从我从制造商那里得到的 zip 中复制了 NetBurner 插件。不用找了。

3.  使用不同的工作区启动，没有变化。

4.  推出了 Galileo 版本，它使用了较旧的插件，并且仍然可以使用。

5.  将较旧的插件复制到 Indigo 中，出现较旧的 NetBurner 启动器（但它实际上不适用于 Indigo）

6.  删除了新插件中的旧插件，旧的 NetBurner 启动器消失了，新的启动器不显示。

7.  尝试删除 {Workspace}.metadata.plugins\org.eclipse.debug.core.launches - 没有变化。有趣的是，即使 launch 有许多应该显示在 Run Configuration 下的 .launch 文件，也没有任何显示。

另一个奇怪（可能相关）的事情是 NetBurner 透视图的图标消失了，现在它只有 <NetBurner> 作为文本和一个通用透视图图标。

我仍然可以为 NetBurner 交叉编译和构建（即构建工具链仍然有效），它只是使用似乎缺少的运行配置的能力。

我没有想法，有没有人知道一些位于工作区之外和 Indigo 安装文件夹之外的全局设置可能会导致这种情况？

我在 Win 7 64 位终极版上运行，我运行 32 位版本的 Indigo，因为 64 位似乎无法与 NetBurner 插件一起使用。我还禁用了 General->Startup 和 Shutdown 下的两个 Mylyn 任务（它们似乎导致许多​​ Permgen 内存崩溃）。这是我昨天完美工作的相同设置。

## 更新

我还注意到 4 个插件中只有 3 个显示在“安装详细信息”插件窗格中。nbeclipse.core_2.6.0.jar 位于 eclipse 插件目录中，但未显示为已加载。所以我想我现在知道问题是插件没有加载，但我不知道为什么或如何让它加载，或者什么 subclipse 可能已经改变会导致这种情况。

![Eclipse 加载的插件视图和插件的 eclispe 目录](../Images/03060b99352eb54470f667990919f8e0.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T22:05:13.490

我怀疑 Subclipse 安装可能导致了它所依赖的其他一些插件的更新（请记住传递性插件依赖解决方案；如果您正在安装插件 A 并且它需要某个版本的插件 B您没有，插件 B 将安装或更新到该版本）。在这样做时，可能 NetBurner 插件无法再加载，因为它声明的依赖关系不再满足（即，它依赖于早期版本并且不容忍更高版本）。

您可以使用 OSGi 控制台来帮助确定插件未加载的原因。以下是一些应该有所帮助的参考资料：

*   [http://grep.elasticpath.com/community/techblog/blog/2010/05/27/eclipse-plugins-and-the-osgi-console](http://grep.elasticpath.com/community/techblog/blog/2010/05/27/eclipse-plugins-and-the-osgi-console)
*   [http://www.vogella.com/articles/OSGi/article.html#osgiconsole](http://www.vogella.com/articles/OSGi/article.html#osgiconsole)

顺便说一句，您不能只是将插件复制到 Eclipse 安装中并期望它们能够工作。对于现在的几个版本，Eclipse 不支持该功能。您必须使用**帮助 > 安装新软件**或**文件 > 导入 > 安装 > 从现有安装**来安装插件。询问供应商是否有要安装的更新站点；就像我上面说的，不再支持简单地将东西放入 Eclipse 的`plugins`文件夹中，它不起作用。除了提供更新站点的供应商之外，唯一的其他选择是使用该`dropins`文件夹，如此[处](http://wiki.eclipse.org/Equinox_p2_Getting_Started#Dropins)所述。

# javascript - javascript和电子邮件

> ID：10129942
> 
> 赞同：1
> 
> 时间：2012-04-12T18:55:03.623
> 
> 标签：javascript, email, window.open

我让它使用javascript发送电子邮件我使用window.open（'mailto：xxx'）我想避免的是打开一个新的浏览器窗口+打开一个电子邮件窗口。工作正常，除此之外。我在 CF 中进行编程。这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T18:57:45.603

不要使用“window.open()”

`<a href="mailto:XXX"></a>`在您的 HTML 中使用 an ，或者`location.href="mailto:XXX";`如果它需要是 Javascript 则使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T19:14:21.313

使用[`location.assign()`](https://developer.mozilla.org/en/DOM/window.location)：

```
location.assign('mailto:user@example.com'); 
```

虽然您可以改为直接分配给`location`的属性 ( `location.href='mailto:...';`) 以使浏览器导航，但我建议不要这样做。

在内部，这样做只是调用`location.assign()`，并且分配给属性并不总是在所有浏览器中表现相同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T18:56:29.270

`location.href="mailto://xxx";`

# uml - netbeans 6.5.1 的 uml 插件

> ID：10129952
> 
> 赞同：0
> 
> 时间：2012-04-12T18:55:25.690
> 
> 标签：uml, netbeans-plugins

我在寻找 netbeans 6.5.1 的 uml 插件，但我找不到链接，我在哪里可以下载 'Netbeans 6.5.1' ide 的 UML 插件？

有没有关于如何使用它的教程？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T19:08:00.553

读[这个](https://stackoverflow.com/questions/8926197/free-uml-tool-java-to-uml-netbeans)。默认情况下，可以在此版本的 NetBeans 中找到 UML 插件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T13:56:44.863

该插件没有从主安装程序移动到更新中心，可以通过`Tools > Plugins`IDE 中的菜单进行安装。

支持五种图表类型：活动、类、序列、状态和用例图。

# android - 从模板 XML 文件创建 TextView

> ID：10129953
> 
> 赞同：18
> 
> 时间：2012-04-12T18:55:27.937
> 
> 标签：android, layout, textview

我`TextView`在文件中有一个简单的模板`simple_txt.xml`

```
<?xml version="1.0" encoding="utf-8"?>
<TextView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="30dp"
    android:textSize="18sp" >
</TextView> 
```

在某些代码中，我需要`TextView`从此模板创建一个，例如：

```
TextView txt = new TextView(this);
txt.setLayout(R.layout.simple_txt);//??? 
```

然后用它做点什么（`setText`等等）。我怎样才能创建一个`TextView`这样的？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-04-12T19:08:02.533

```
TextView txt = (TextView) View.inflate(this, R.layout.simple_txt, null); 
```

# html - 如何在 re:replace 中转义和替换 erlang

> ID：10129958
> 
> 赞同：0
> 
> 时间：2012-04-12T18:55:52.993
> 
> 标签：html, url, replace, erlang

我有下面的Url，在那|| 我想用 re:replace 替换回 &。

"a href=\"http://znetratest23.com/wp-content/plugins/email-management/emailClick.php?userName=mar26reseller||reportType=C||campaignId=4F4F52CEA941153719000000||email={{toemail}} ||score=40||url="

像这样...

```
"a href=\"http://znetratest23.com/wp-content/plugins/email-management/emailClick.php?userName=mar26reseller&reportType=C&campaignId=4F4F52CEA941153719000000&email={{toemail}}&score=40&url=" 
```

我已经尝试过使用下面的代码，但它对我不起作用。

```
EscClickUrl = "a href=\"http://znetratest23.com/wp-content/plugins/email-management/emailClick.php?userName=mar26reseller||reportType=C||campaignId=4F4F52CEA941153719000000||email={{toemail}}||score=40||url=",
EscClickUrl1 = re:replace(EscClickUrl, "||", "\&", [global, {return,list}]). 
```

谁可以帮我这个事...

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T19:39:52.147

使用双反斜杠：

```
1> EscClickUrl = "a href=\"http://znetratest23.com/wp-content/plugins/email-management/emailClick.php?userName=mar26reseller||reportType=C||campaignId=4F4F52CEA941153719000000||email={{toemail}}||score=40||url=",
1> re:replace(EscClickUrl, "\\|\\|", "\\&", [global, {return,list}]).
"a href=\"http://znetratest23.com/wp-content/plugins/email-management/emailClick.php?userName=mar26reseller&reportType=C&campaignId=4F4F52CEA941153719000000&email={{toemail}}&score=40&url=" 
```

# iphone - iOS 在核心数据中找到最常见的记录？

> ID：10129960
> 
> 赞同：0
> 
> 时间：2012-04-12T18:56:02.960
> 
> 标签：iphone, ios, core-data

我希望能够查看实体的所有属性并找到最受欢迎的属性。我知道它与**NSPredicate**有关系，但我无法完全集中精力来实现它。

**一种可能的解决方案：** *获取所有实体并循环遍历它并将属性排序到不同的数组中，从那里计算数组中的项目以确定最流行/最常见的项目。*

**虽然这可能有效，但我只是想知道是否有更简单或*更“更清洁”的*方法。**

## 更新：

谢谢@Caleb。让我澄清一下，**我正在寻找给定实体的实例最常使用的单个属性值。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T19:24:26.630

这真是一个肮脏的决定。

我建议您创建一个新实体，例如`AttributeCounter`，具有两个属性 -`name`和`count`，并且每次向人添加属性时，更改此实体。

但只有当你有一些不同的属性和很多人时，这才是一个好的决定。如果没有，这是另一种方法，非常简单：

1.  获取所有第一个属性不为零的实体，计数，添加到数组
2.  解决
3.  给你

# r - 删除满足R中某些条件的行

> ID：10129963
> 
> 赞同：0
> 
> 时间：2012-04-12T18:56:22.353
> 
> 标签：r

我有一个表 Y，由 6 列组成。（日期、小时、分钟、秒、价格、大小）。所以现在我应该删除时间超过下午 4 点的条目。必须省略整行条目。我不太确定如何进行此操作。所以基本上我们将查看小时列并进行比较。前任：

```
Date       hour min sec price size
jan1st     9    45  45  345   100
jan1st     10   23  33  324   20
jan1st     11   02  34  434   10
jan4th     16   05  09  32    23 
jan5th     23   08  23  12    90 
```

所以在上表中，我想删除小时下有 16 和 23 的条目。并因此摆脱整行。我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T19:15:36.997

首先，欢迎使用 SO 和 R。我建议您阅读一些 R 入门的介绍指南，[例如在这里，](https://www.google.com/url?q=http://cran.r-project.org/doc/manuals/R-intro.html&sa=U&ei=aymHT5v-BsLTiAKd-ugG&ved=0CBAQFjAA&usg=AFQjCNH3e4EKklCKXUxpMRsapPNaY7t4kg)因为他们会为您回答许多这些问题。

根据下面的示例，您需要使用`[`哪个是子集“函数”。此外，正如泰勒在评论中提到的那样，如果您使用类似的东西，`dput`人们可以快速轻松地使用您的示例数据。

```
> dput(dat)
structure(list(Date = c("jan1st", "jan1st", "jan1st", "jan4th", 
"jan5th"), hour = c(9L, 10L, 11L, 16L, 23L), min = c(45L, 23L, 
2L, 5L, 8L), sec = c(45L, 33L, 34L, 9L, 23L), price = c(345L, 
324L, 434L, 32L, 12L), size = c(100L, 20L, 10L, 23L, 90L)), .Names = c("Date", 
"hour", "min", "sec", "price", "size"), class = "data.frame", row.names = c(NA, 
-5L))

> dat[dat$hour < 16,]
    Date hour min sec price size
1 jan1st    9  45  45   345  100
2 jan1st   10  23  33   324   20
3 jan1st   11   2  34   434   10 
```

# android - 手动返回上一个活动

> ID：10129965
> 
> 赞同：1
> 
> 时间：2012-04-12T18:56:36.703
> 
> 标签：android

这是我的代码： Activity1 (main): 检查数据库是否有任何行。如果没有，请加载主视图。如果它至少有 1 个启动 Activity2

```
 int num = db.numOfRows();
    if(num==0){
        setContentView(R.layout.main);
    } else {
        startActivity(new Intent(this, Activity2.class));
    } 
```

活动 2：加载使用数据库信息填充表行的 moreprojects 视图。

```
 super.onCreate(savedInstanceState);
        setContentView(R.layout.moreprojects);
        populateRows(); 
```

非活动 dbhandler：包含所有数据库内容（活动 1 中提到的 db）。现在，在 Activity2 上，您可以删除调用以下方法的行。在那个 if(num==0) 中，我想让 Activity2 调用 Activity1。Activity1 是允许创建项目的屏幕。

```
public void deleteContact(int id) {
    SQLiteDatabase db = this.getWritableDatabase();
    db.delete(TABLE_blah, KEY_ID + " = ?",
            new String[] { String.valueOf(id) });
    int num = numOfRows();
    Log.d("Testing","Number of rows: "+num);

    if(num ==0){
        //go back to Activity1
    }
    db.close();
} 
```

我希望这是有道理的。

我一直在尝试多种不同的事情，例如：在 activity2 中创建一个方法，该方法确实完成（）；... 但这没有任何作用。它似乎只是重新加载 Activity2。

请帮忙！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T19:08:07.513

由于您使用 startActivity 而不是 startActivityForResult 打开 activity2 ，因此调用[完成](http://developer.android.com/reference/android/app/Activity.html#setResult%28int,%20android.content.Intent%29)应该返回：

```
public void deleteContact(int id) {
    SQLiteDatabase db = this.getWritableDatabase();
    db.delete(TABLE_blah, KEY_ID + " = ?",
            new String[] { String.valueOf(id) });
    int num = numOfRows();
    Log.d("Testing","Number of rows: "+num);

    if(num ==0){
        finish();
    }
    db.close();
} 
```

这假设 deleteContact 在 Activity2

**编辑 ：**

调用完成只会调用 Activity1 的 onResume 方法，我猜
要返回 Activity1 并重新启动它，您可以：

```
finish();
startActivity(new Intent(this, Activity1.class)); 
```

查看android的[activity生命周期](http://developer.android.com/reference/android/app/Activity.html#ActivityLifecycle)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T19:03:15.613

当您想完成活动 A 并返回活动 2 时，只需调用 finish(); 在 A 中，这将起作用

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T19:03:55.923

只需调用**完成**您的活动。比返回给调用者

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-12T19:05:08.440

```
finish(); 
```

应该做的伎俩。如果那是“重新加载活动 2”，那么我会在两个活动中添加一些日志语句，以打印出你的`num`变量。我的猜测是，Activity2 中的 num 以某种方式为 0，但是当 Activity1 获得焦点时， num 以某种方式 > 0，然后由于您的 if 语句而重新启动 Activity2。

# mysql - 在同一个表上复制行与更新

> ID：10129971
> 
> 赞同：0
> 
> 时间：2012-04-12T18:57:30.917
> 
> 标签：mysql, sql

我有一个 cms 使用的表，其中包含多种语言的数据。如果我想添加另一种语言，我将复制现有页面（所有某种语言），仅在“lang”列中更改值。

如何复制行并更改将放入同一张表的一列的值？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T18:59:51.663

```
INSERT INTO foobar (lang,text)
    SELECT 'de',text
    FROM foobar
    WHERE lang='en'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T19:00:57.363

您可以使用以下语句执行此操作：

```
insert into <table_name> (language, value1, value2)
select 'new_language', value1, value2
from <table_name>
where language = 'old_language' 
```

根据手册： [http ://dev.mysql.com/doc/refman/5.5/en/insert-select.html](http://dev.mysql.com/doc/refman/5.5/en/insert-select.html)

# visual-studio - 将 MS Team Foundation Server 11 从家用计算机公开到 Internet

> ID：10129984
> 
> 赞同：1
> 
> 时间：2012-04-12T18:58:36.050
> 
> 标签：visual-studio, tfs

请帮我解决我的noobish问题

我家里有笔记本电脑。我在上面安装了 MS Windows Server 8 Beta、Visual Studio 11 Beta 和 MS Team Foundation Server 11，仅用于我的应用程序的版本控制，我想在家里（我的笔记本电脑服务器所在的位置）和工作中（我的另一个Visual Studio 11 Beta 是）。

所以我的主要问题是我不能轻易地在 Internet 上公开我的 [home] TFS 服务器，我可以从我的工作计算机上看到它:(

我安装了 TFS 代理，它为我生成了一个代理 URL，如下所示：[http://win-jnkseeeq4rl:8081/](http://win-jnkseeeq4rl:8081/)（适用于 LAN）

但是当然，我不能让它通过互联网在另一台（工作）计算机上工作，因为它不能解析这种主机。

在家里，我有 WiFi 路由器，我的笔记本电脑通过该路由器连接。我想我必须在上面公开一些端口，但我不知道如何，这真的是一个主要问题。

谢谢大家的解答！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T21:47:41.913

你看过这里的演练吗=> [http://msdn.microsoft.com/en-us/library/bb668967.aspx](http://msdn.microsoft.com/en-us/library/bb668967.aspx)

这里有一个类似的问题，[How to access VS 2010 TFS over the internet from remote office](https://stackoverflow.com/questions/3210476/how-to-access-vs-2010-tfs-over-the-internet-from-remote-office)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T01:06:10.813

我在家里运行一个 TFS 来支持我的咨询，并使用 PPTP 协议设置了远程访问服务来运行我的入站 VPN。您通常只需启用 PPTP 直通（GRE 协议）并将 TCP/1723 转发到您的 RAS 服务器。

我还使用动态 DNS 来帮助查找我的公共 IP（如果它发生变化）。

但老实说，您是否考虑过只使用 TFSPreview.com 服务？我还没有完全切换，因为我已经建立了我的基础设施，它仍然是一个测试服务，但我可以看到自己在未来这样做。

# static - 创建引用其他静态库的静态库

> ID：10129986
> 
> 赞同：3
> 
> 时间：2012-04-12T18:58:44.380
> 
> 标签：static, cmake

我想创建一个依赖于另一个库的静态库，在这种情况下是 ZLIB，我已经有一个静态构建（libz.a）。

我有以下内容：

```
...
set (CMAKE_EXE_LINKER_FLAGS "${CMAKE_EXE_LINKER_FLAGS} -static")
set (BUILD_SHARED_LIBS OFF CACHE BOOL "" FORCE)
set (CMAKE_FIND_LIBRARY_SUFFIXES .a ${CMAKE_FIND_LIBRARY_SUFFIXES}) # to find the .a   instead of the .so
...
find_package(ZLIB REQUIRED)
if (ZLIB_FOUND)
  message(STATUS "ZLIB library: ${ZLIB_LIBRARIES}") # ZLIB library:     /usr/lib64/libz.a
  include_directories(${ZLIB_INCLUDE_DIRS})
  set (EXT_LIBS ${EXT_LIBS} ${ZLIB_LIBRARIES})
endif()
...
add_library (libTest ${MCCORE_SOURCES_CC})
target_link_libraries(libTest ${EXT_LIBS}) #EXT_LIBS = /usr/lib64/libz.a 
```

但是，构建的最后一步是创建静态库，但没有任何参考`/usr/lib64/libz.a`

前任：

```
/usr/bin/ar cr libTest.a  object1.o object2.o ... objectN.o 
```

我希望：

```
/usr/bin/ar cr libTest.a  object1.o object2.o ... objectN.o /usr/lib64/libz.a 
```

似乎最终的档案创建并不关心使用`target_link_libraries`.

有任何想法吗？

我能做些什么来强迫这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T06:58:13.887

在 Windows（使用 Visual Studio）下，下面的方法可以解决问题：

```
add_library(fooStatic1 STATIC fooStatic.cpp)

set(LIBS_TO_COMBINE "${CMAKE_BINARY_DIR}/libfooStatic1.lib ${ZLIB_LIBRARIES}")

add_library(combined STATIC ${LIBS_TO_COMBINE} dummy.cpp) #dummy.cpp being empty
add_dependencies(combined fooStatic1)
set_source_files_properties(${LIBS_TO_COMBINE} PROPERTIES EXTERNAL_OBJECT TRUE GENERATED TRUE)
set_target_properties(combined PROPERTIES LINKER_LANGUAGE CXX)
set_target_properties(combined PROPERTIES STATIC_LIBRARY_FLAGS "${LIBS_TO_COMBINE}") 
```

不幸的是，它不能在 linux 下工作，因为它`ar`只会合并存档文件而不解压缩它们 - 创建一些并不真正可用的东西。为了实现您的目标，您需要提取`.o`文件并重新组合它们：

```
ar -x /usr/lib64/libz.a
ar -x libfooStatic1.a
ar -rc libcombined.a  *.o 
```

我不知道`CMake`在这个过程中会有帮助的宏。您可能可以运行`ar -x`in `execute_process(...)`，输出输出，然后运行`ar -rc`​​.

# javascript - 在 iOS 设备上缩放时防止混叠 SVG 元素

> ID：10129989
> 
> 赞同：2
> 
> 时间：2012-04-12T18:58:57.597
> 
> 标签：javascript, ios, svg, d3.js

我的任务是解决我公司的 Web 应用程序中的一个问题，该问题涉及使用 D3 库生成的 SVG 图形。眼前的问题是图表最初显示得很好。但是，当使用 iPad 或其他 iOS 设备查看并且用户放大图表时，它们很快就会变得混叠/“模糊” - 如果可能的话，我想防止这种质量损失。

您可以在此处查看问题示例：[normal graph](http://aboyandhismac.com/screenshots/ipadsvg/normal.png) , [zoomed graph](http://aboyandhismac.com/screenshots/ipadsvg/zoomed.png)

我以前从未使用过 SVG 或 D3，我不确定它们是否提供任何选项来处理此类事情；如果他们这样做，我无法在我读过的任何文档中找到它们。

我感觉这可能是 iOS 缩放方法的产物，除了尝试捕捉缩放事件并以所需的放大倍率触发图形的重新渲染之外，它们可能无能为力，尽管我是不确定这是否可能。

如果有人对我如何解决此问题有一些建议，我将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T06:10:14.310

iOS 上的默认缩放行为在缩放时使用固定分辨率的纹理；这称为硬件加速缩放。因此，如果您取页面的一小部分并使用两根手指放大，则图形可能会在缩放时出现暂时像素化。任何页面都是如此，因此许多 iOS 用户可能已经习惯了。

SVG 作为矢量图形格式的好处在于，只要您松开手指，浏览器就会以新的分辨率重新渲染 SVG。

如果您想在缩放时保持清晰的分辨率，则需要禁用本机硬件加速缩放，而是重新渲染图形以响应触摸事件。您可以使用 d3.behavior.zoom 向可视化添加平移和缩放交互。但是，请注意，根据可视化的复杂性，这可能比硬件加速缩放要慢。

这是一个结合 d3.behavior.zoom 和 d3.geo.path 来演示该技术的示例：http: [//bl.ocks.org/2374239](http://bl.ocks.org/2374239)。

# c# - 属性更改后何时调用方法

> ID：10129991
> 
> 赞同：5
> 
> 时间：2012-04-12T18:59:10.047
> 
> 标签：c#, winforms, events, user-controls, event-handling

我有一个包含项目列表的用户控件，当 currentIndex 更改时我会引发一个事件，此外，当它更改时，我必须调用另外两个方法来验证和更改控件的外观（更改图像和阻止/取消阻止一些按钮）。

我想知道什么，主要是出于好奇，因为它已经在工作了，什么时候调用这两种方法更合适？

`CurrentIndex`我应该在物业本身内打电话给他们吗？我应该打电话给他们`OnCurrentIndexChanged(...)`吗？我应该在课堂上处理事件并在那里进行吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-16T18:55:45.953

我假设您已经实现了标准事件生成模式并设置了 OnCurrentIndexChanged `protected virtual`，以便派生类可以覆盖该方法并更改事件生成和/或处理。

不幸的是，这需要阅读茶叶，*为什么*有人要覆盖该方法？更严重的是，当他们这样做时，*如何*覆盖该方法会破坏您的控制？对于那些不太了解代码的人来说，这很难猜到，对你来说也不是很容易。此处应用的原则（也用于 .NET 框架代码）是尽可能少做。只是提出事件，没有别的。当派生类做一些愚蠢但完全常见的事情时，它可以最大限度地减少损坏的可能性，比如不调用 base.OnCurrentIndexChanged。

控件的行为是 UserControl 的实现细节。因此，在 CurrentIndex 属性设置器中更改它们的属性，然后调用 OnCurrentIndexChanged()。如有必要，从您的类派生的任何人都可以覆盖该行为。当他们忘记调用您的 OnCurrentIndexChanged() 方法时，一切都不会出错。但请注意，您需要使控制变量*受保护*而不是私有。因此，如果需要，他们*可以覆盖该行为。*

如果这对您来说太吓人了，请不要犹豫，根本不使用虚拟方法。用你的控件来容纳成千上万的程序员并不常见 :)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-12T19:05:10.370

在用户控件中，我将有一个表示所选项目的属性。然后，在对象的设置过程中，引发事件方法以更改您的用户控件。这样，以后如果需要添加更多的监听器，只需要在 setter 方法中添加另一个处理程序即可。这在 MVVM 应用程序中很常见，并且非常易于维护。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-19T13:59:17.803

因为您的 UserControl 充当 ListControl，所以您需要实现两个事件和两个属性。

```
public event System.EventHandler SelectedIndexChanged;
public event System.EventHandler SelectionChangeCommitted;

public int SelectedIndex {
    get;
    set;
}

public T SelectedItem { // Where T is whatever your type is
    get;
    set;
} 
```

`SelectedIndexChanged`应始终用于更改所选索引时始终需要触发的操作。*只*`SelectionChangeCommitted`应在用户物理更改选择时触发。两者之间的分离是一个重要的区别，.NET 中的大多数控件都遵循这种模式（例如 ComboBox），但可能不会对事件使用相同的名称。

 *现在，话虽如此，如果您需要更改属性的控件也在同一个用户控件中，那么您当然应该在相应事件中的用户控件代码中处理它。否则，代码应该通过订阅事件并在那里完成工作来实现用户控件（例如表单或其他用户控件）的任何人。

该顺序实际上取决于您的要求，但`SelectedIndexChanged`应*始终*提出（但每次更改不超过一次，因为这会引入奇怪的行为），并且`SelectionChangeCommitted`只能由用户提出（例如，设置 SelectedIndex 或 SelectedItem）。

一个好的经验法则是，如果您的内部事情必须在用户知道之前发生，请先调用 SelectedIndexChanged，然后再调用 SelectionChangeCommitted。如果没关系，要么。稍后更改顺序可能会导致实施控制的人员发生重大更改，因此请确保您的决定是可靠的。

两者之间的区别在于 SelectedIndex 和 SelectedItem 将通过内部清除列表、添加新项目等进行更新，但这并不一定意味着它是一个物理用户操作，应该会导致两个事件都被触发。

希望这可以帮助。*

# sql-server - 如何计算访问查询中 SQL server ntext（即备忘录）字段中的字符数？

> ID：10129996
> 
> 赞同：7
> 
> 时间：2012-04-12T18:59:21.980
> 
> 标签：sql-server, ms-access

我想编写一个访问查询来计算链接 SQL 服务器表中 ntext 字段中的字符。

在 SQL Server 中，我将只使用此命令（在访问中不起作用）：

```
 select datalength(nTextFieldName) //this command works on sql server but not in access 
```

在访问中，我只能找到 len 命令，该命令不适用于 ntext 字段：

```
select len(nTextFieldName) // access says nText is not a valid argument to this function. 
```

谷歌搜索，我发现一堆帖子说要使用 len，这给了我一个错误。

命令是什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-12T19:05:52.840

`ntext`类型不适用于`LEN`. 不推荐使用此特定类型以及其他一些类型：

```
ntext, text, and image data types will be removed in a future version of Microsoft SQL 
Server. Avoid using these data types in new development work, and plan to modify applications 
that currently use them. Use nvarchar(max), varchar(max), and varbinary(max) instead. For more 
information, see Using Large-Value Data Types. 
```

处理此问题的最佳方法是将数据类型转换/强制转换为有效的数据类型，例如`varchar(max)`/ `nvarchar(max)`，然后才获得`LEN`.

`SELECT LEN(CAST(nTextFieldName As nvarchar(max)))`

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2020-04-08T12:47:28.373

```
select LENGTH(nTextFieldName) from table_name; 
```

# oracle - 从 oracle 中的 clob 中提取子字符串

> ID：10129998
> 
> 赞同：10
> 
> 时间：2012-04-12T18:59:37.190
> 
> 标签：oracle, substring, database, clob

我有一个数据块

```
<?xml version='1.0' encoding='UTF-8'?><root available-locales="en_US" default-locale="en_US"><static-content language-id="en_US"><![CDATA[<script type="text/javascript">
function change_case()
{
    alert("here...");
    document.form1.type.value=document.form1.type.value.toLowerCase();
}
</script>

<form name=form1 method=post action=''''>
<input type=text name=type value=''Enter USER ID'' onBlur="change_case();">
<input type=submit value=Submit> </form>
</form>]]></static-content></root> 
```

我想提取带有 onblur 属性的行，在这种情况下：

```
<input type=text name=type value=''Enter USER ID'' onblur="change_case();"> 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-12T21:16:53.083

Tom Kyte 说如何在 SQL 或 PL/SQL 代码中从 clob 获取 varchar2

[http://asktom.oracle.com/pls/asktom/f?p=100:11:0::NO::P11_QUESTION_ID:367980988799](http://asktom.oracle.com/pls/asktom/f?p=100:11:0::NO::P11_QUESTION_ID:367980988799)

当你有 varchar2 时，你可以使用 SUBSTR 或 REGEXP_SUBSTR 函数来提取行。

[http://docs.oracle.com/cd/B14117_01/server.101/b10759/functions147.htm#i87066](http://docs.oracle.com/cd/B14117_01/server.101/b10759/functions147.htm#i87066)

[http://docs.oracle.com/cd/B14117_01/server.101/b10759/functions116.htm](http://docs.oracle.com/cd/B14117_01/server.101/b10759/functions116.htm)

如果你想使用 SQL 代码，你可以创建这个请求

```
select col1, col2, func1(dbms_lob.substr( t.col_clob, 4000, 1 )) from table1 t 
```

在 PL/SQL 函数“func1”中，您可以使用 SUBSTR 或任何其他函数对输入字符串执行您想要的操作

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T02:03:45.020

细分你的问题。您想从包含特定子字符串的 CLOB 中提取一行文本。我可以想到您的要求的两种可能的解释：

**选项1。**

1.  将 CLOB 拆分为一系列行 - 例如，如果这确实是您所说的“行”的意思，则将其拆分为换行符/回车符。
2.  检查每一行以查看它是否包含子字符串，例如`onblur`. 如果是这样，您已经找到了您的线路。

**选项 2。**

如果您实际上不是指*line*，而是想要`<script>...</script>`html 片段，则可以使用类似的逻辑：

1.  搜索 的第一次出现`<script>`。
2.  `</script>`在该点之后搜索下一个出现的。`<script>`从to中提取子字符串`</script>`。
3.  在子字符串中搜索`onblur`. 如果找到，则返回子字符串。否则，找到下一个出现的`<script>`，转到步骤 2，冲洗，重复。