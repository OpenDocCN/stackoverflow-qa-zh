# StackOverflow 问答 12376000-12376999

# jquery - Jquery-ui draggable：如何使可拖动元素在悬停在div上时滚动div

> ID：12376001
> 
> 赞同：2
> 
> 时间：2012-09-11T18:44:54.540
> 
> 标签：jquery, jquery-ui, jquery-ui-draggable

我有一堆可拖动元素，接收它们的可放置元素位于设置为 overflow-y: 滚动的 div 中。

可拖动的“滚动”选项可以滚动整个页面，但我无法让它滚动可放置的父 div。我尝试将可拖动的容器属性更改为悬停时的可放置​​对象的父级，但这也不起作用。

如果有人知道这样做的方法，我将不胜感激。这是我正在尝试做的基本想法：http: [//jsfiddle.net/4gMVf/5/](http://jsfiddle.net/4gMVf/5/)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-11T19:25:12.607

我[叉了你的小提琴](http://jsfiddle.net/crowjonah/Fr7u8/3/)，并折叠在[这个漂亮的解决方案中](https://stackoverflow.com/questions/5148539/jquery-ui-draggable-droppable-auto-scroll)。

检查一下： http: [//jsfiddle.net/crowjonah/Fr7u8/2/](http://jsfiddle.net/crowjonah/Fr7u8/2/) 有几个锚区域，当被拖过去时，将自动滚动可放置对象。

我和他一样，给了锚点一些可见性，这样你就可以看到它们是如何工作的。您很可能希望它们对最终使用完全透明。

我不能确定，但​​是您的 droppable 似乎还有其他问题，因为它似乎不接受您的 Draggables，但既然这不是您的问题，我不会尝试并解决这个问题。

# javascript - RabbitMQ 通过 web 使用 stomp 适配器

> ID：12376010
> 
> 赞同：3
> 
> 时间：2012-09-11T18:45:35.503
> 
> 标签：javascript, rabbitmq, stomp

我刚刚在我的 rabbitmq 服务器中启用了 stomp 插件。

我整天都在尝试运行这个例子[https://github.com/rabbitmq/rabbitmq-web-stomp-examples](https://github.com/rabbitmq/rabbitmq-web-stomp-examples)（和其他），我总是得到：

“Opening Web Socket ...”我收到连接服务器的请求（我可以在兔子日志中看到它）

过了一会儿，客户断开连接说：

```
"Whoops! Lost connection to http://localhost:61613/stomp" 
```

注意：我尝试通过**telnet**订阅队列，一切正常，但不适用于 Sockjs。

1）谁能帮助我？

2）我注意到在每个示例中，他们总是将 /stomp 添加到 url。这是为什么？我是否必须在 rabbit stomp 适配器上配置一些特殊的东西，还是像插件一样完成？

我已经使用这个“教程”安装了插件： [http ://www.rabbitmq.com/stomp.html](http://www.rabbitmq.com/stomp.html)

基本上我运行这个命令：rabbitmq-plugins enable rabbitmq_stomp

3）在这个例子中，我试图用 http:// 替换 ws:// 但答案完全相同，但更快地回答“丢失的连接”。我在firebug控制台中也注意到它试图连接的url是：（``http://localhost:61613/stomp/info``或``http://localhost:61613/info``ws://localhost:61613/info或ws://localhost:61613/stomp/info取决于给定的url）

4）在另一个例子中，它发生了一些奇怪的事情。如果我让 http 出现“丢失连接”的答案。如果我将其更改为 ws，它就会开始给我带来跨域问题。

我将不胜感激任何帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-12T10:44:16.293

答案是：

*   你也必须安装 rabbitmq_web_stomp 插件

    按照这个链接：

    [http://www.rabbitmq.com/blog/2012/05/14/introducing-rabbitmq-web-stomp/](http://www.rabbitmq.com/blog/2012/05/14/introducing-rabbitmq-web-stomp/)

我也必须升级到 erlang R14B04；当你编译 rabbitmq-web-stomp 时，它会在 dist 目录中生成一些文件。然后你必须将它复制到rabbitmq插件目录（/usr/lib/rabbitmq/lib/rabbitmq_server-2.8.4/plugins）。

注意：其中一些生成的文件已经在插件目录中。我必须更换所有这些以使所有工作正常。

最好的祝福，

爱德华多

# dns - 如何从 IP 地址列表中获取域名

> ID：12376019
> 
> 赞同：1
> 
> 时间：2012-09-11T18:46:07.530
> 
> 标签：dns, ip

我有一个包含 IP 地址列表的文本文件，我希望能够将它们与它们各自的域进行匹配。是否可以轻松地做到这一点，如果可以，有人可以指出我如何做到这一点的正确方向吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T19:43:50.153

Assuming you are satisfied with seeing whether there is a reverse DNS mapping,

```
 xargs -n 1 host <ips.txt 
```

If you want the names of all the hosts whose forward DNS resolves to this particular IP address, that's significantly more challenging, but probably also more useful (reverse DNS is neglected by some ISPs, and when it does exist, it often doesn't help answer any useful question you might have). There is no straightforward and quick technique for this, but DomainTools and their competitors have painstakingly distilled databases through crawling which they will be happy to accept your money for.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T18:51:16.613

（由于您没有提到任何语言..我假设您将使用.Net）

利用

```
System.Net.Dns.Resolve(); 
```

您可以传入 IP 地址并获取解析的主机名。

# c# - .net c# 验证

> ID：12376023
> 
> 赞同：0
> 
> 时间：2012-09-11T18:46:17.720
> 
> 标签：c#, asp.net, validation

下午好，

我有一个使用 C# 服务器端验证的简单表单。当使用带有 的单选按钮或下拉列表时`AutoPostBack`，我必须`Page.Validate()`在代码后面的方法中调用。当我这样做时，它不会在覆盖 C# 验证的默认功能的页面上运行 Javascript。

当我在 autopostback 方法中调用调用时，如何让 javascript -`ValidatorUpdateDisplay`函数运行？`Page.Validate()`

提前致谢！

抢

Javascript：

```
// Form Validation: Change TextBox CSS for outline color
ValidatorUpdateDisplay = function (val) {

    var ctl = $('#' + val.controltovalidate);
    var eCount = 0;

    for (var i = 0; i < Page_Validators.length; i++) {        
        var v = Page_Validators[i];

        if (v.controltovalidate == val.controltovalidate) {                      
            if (!v.isvalid) {
                eCount++;
                ctl.addClass('validationError');
                $('td.question:eq(' + i + ')').addClass('someClass');                           
            }        
        }
    }

    if (eCount > 0) {
        ctl.addClass('validationError');
    } 
    else {
        ctl.removeClass('validationError');
        // $('td.question:eq(' + i + ')').removeClass('someClass');
    }

    if (typeof (val.display) == "string") {
        if (val.display == "None") {
            return;
        }
        else if (val.display == "Dynamic") {
            val.style.display = val.isvalid ? "none" : "inline";
            return;
        }
    }

    if (navigator.userAgent.indexOf("Mac") > -1 &&
        navigator.userAgent.indexOf("MSIE") > -1) {
        val.style.display = "inline";
    }

    val.style.visibility = val.isvalid ? "hidden" : "visible";
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T18:52:12.770

您可以尝试使用此代码基于`RegisterStartupScript`

```
 var javaScript = 
  "<script language=JavaScript>
   ValidatorUpdateDisplay(); 
   </script>";

 RegisterStartupScript("Key_ClickScript", javaScript); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-11-03T16:47:56.737

```
//C# validation for number only- 

if (!(e.KeyChar >= '0' && e.KeyChar <= '9' || e.KeyChar == 8))
            {
                e.Handled = true;
                MessageBox.Show("This textbox accepts only Numbers");
            }  

//C# validation for characters only-

if (!char.IsLetter(e.KeyChar) && !(e.KeyChar == 8) && !(e.KeyChar == 32))
            {
                e.Handled = true;
                MessageBox.Show("This textbox accepts only alphabetical characters");
            } 
```

# javascript - jquery拖放后触发dblclick事件

> ID：12376029
> 
> 赞同：0
> 
> 时间：2012-09-11T18:46:48.560
> 
> 标签：javascript, jquery

我正在尝试将双击事件添加到 jquery 连接列表项。我添加双击事件如下图；

```
$(a_elements[i]).dblclick(duplicate_building(a_elements[i])); 
```

这是函数的一部分，该函数在 li 删除后运行，并使用 a_elements 数组循环遍历每个元素。问题是，一旦我将元素放入列表中，函数“duplicate_building”无论如何都会运行，即使我只是将元素放入列表中并且无论如何只是使用单击，谁能告诉我为什么双击事件在没有双击的情况下运行，如何停止它？

非常感谢如果有人能发现我的错误

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T18:51:58.657

您可以触发双击事件，例如：

```
$('selector_to_target').trigger('dblclick'); 
```

### 根据评论

你可以试试这个：

```
$('boby').on('dblclick', a_elements[i], duplicate_building(a_elements[i])); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T19:20:04.440

我发现问题是因为我需要在 jquery 函数中声明函数调用，如下所示；

$(a_elements[i]).dblclick(function () {duplicate_building(this)});

这意味着 duplicate_building 仅在双击时运行，而不是在声明事件时运行

感谢您的帮助，尽管代码悖论

# objective-c - 从 UIButton 显示弹出框

> ID：12376033
> 
> 赞同：1
> 
> 时间：2012-09-11T18:46:59.977
> 
> 标签：objective-c, uipopovercontroller

我使用自定义 UIButton 创建了 UIToolbar 作为 xib 中 BarButtonItem 的子项。我在我的应用程序中使用工具栏作为导航栏。我需要从按钮显示弹出框，因此我在按钮操作上创建弹出框，如下所示：

```
 - (void)showSelectSourcePopover:(UIButton *)sender
     {
       UIViewController* popoverContent = [[UIViewController alloc]init];
       UIView* popoverView = [[UIView alloc]initWithFrame:CGRectMake(0, 0, 300, 400)];
       popoverView.backgroundColor = [UIColor blueColor];
       popoverContent.view = popoverView;
       popoverContent.contentSizeForViewInPopover = CGSizeMake(300, 400);
       UIPopoverController * popoverController = [[UIPopoverController alloc]
                          initWithContentViewController:popoverContent];

      //[popoverController presentPopoverFromBarButtonItem:sender
      //                          permittedArrowDirections:UIPopoverArrowDirectionUp
      //                                          animated:YES];
      CGRect rect = [sender bounds];
      [popoverController presentPopoverFromRect:rect inView:sender permittedArrowDirections:UIPopoverArrowDirectionAny animated:YES];
    } 
```

但它崩溃没有任何错误。我尝试了 presentPopoverFromBarButtonItem 函数，但它也崩溃了。

# c - 用于网络编程的 gdb 宏

> ID：12376044
> 
> 赞同：0
> 
> 时间：2012-09-11T18:47:46.600
> 
> 标签：c, network-programming, gdb

我以前从未使用过 gdb 宏。我有兴趣找出是否有用于网络编程调试的宏。

具体来说，我有一堆包含 IP 地址的结构，当我想查看 IP 地址的字符串地址 (172.xxx) 时，必须手动将它们转换为“观察者”，这真的很痛苦。我希望有一些宏可以将 in_addr 和 in_addr_t 和 sockaddr 以及所有这些东西转换为托管字符串。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T19:52:01.933

不确定这对您有多大用处，但您可以在代码中包含一些函数，这些函数只是将字段转储为人类可读的形式，然后从 gdb 中调用它们。这可能会干扰您正在做的事情，但可能是一个开始。不过，我建议您使用 gdb 宏。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T19:42:40.533

你可以简单地写你自己的。

[http://www.ibm.com/developerworks/aix/library/au-gdb.html](http://www.ibm.com/developerworks/aix/library/au-gdb.html)

^- 查看这些示例。最后，您将能够编写自己的。

# dhtml - 是否有任何理由使用javascript 操作？

> ID：12376048
> 
> 赞同：1
> 
> 时间：2012-09-11T18:48:07.800
> 
> 标签：dhtml

 [无论我在哪里触发 Javascript 动作，我总是盲目地将`<a href="#">`, 和`onclick`监听器放在锚点上：

```
<ul>
    <li><a href="#">Tab 1</a></li>
    <li><a href="#">Tab 2</a></li>
    <li><a href="#">Tab 3</a></li>
</ul>

<script>
    $('li a').click(function(e) {
        e.preventDefault();

        // ...
    });
</script> 
```

然而，我现在意识到我只是机械地做，而且这更干净、更简单：

```
<ul>
    <li>Tab 1</li>
    <li>Tab 2</li>
    <li>Tab 3</li>
</ul>

<script>
    $('li').click(function(e) {
        // ...
    });
</script> 
```

第二种方法是否有*任何缺点，或者当 javascript 操作***未绑定到 URL**时，它绝对是要走的路吗？](#) 

[*注意：我读过这个*](#)*[类似的问题](https://stackoverflow.com/q/9106894/759866)，但发帖人询问删除`href`属性，仍然保留`<a>`.*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T18:56:29.920

我认为使用锚标签的一个可能原因是它更容易被不能使用鼠标的用户访问（由于残疾或由于他们的硬件配置）。当用户使用键盘浏览网页时，浏览器倾向于从一个锚点跳转到下一个锚点，并且即使您将 JS 事件处理程序附加到它也可能不会停止在 li 标签上。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-11T18:50:09.607

我相信如果没有，`href`您将失去一些超链接通常会给您的样式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-11T18:51:25.333

取决于上下文 - 这是一个重要的短语 -

根据上下文，使用该`a`元素的某些东西具有优势，因为它的样式类似于链接。当用户鼠标悬停时，它会自动更改光标。此外，再次，根据上下文，`href`可以指向一些有用的东西——非 JS 启用访问者（如谷歌）的后备。

如果不采取*任何*措施使您`li`看起来可点击，它可能会被忽略。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-11T18:57:54.473

第二种方法的一个主要缺点是，在浏览器中禁用 JavaScript 的用户将无法访问您的网站。当然，如果这些用户无论如何都无法访问您的网站，那么这不是一个有效的考虑因素。

除此之外，还有一些 CSS 工作涉及使`li`元素看起来像一个真实的链接，例如你必须使用`cursor: pointer`，这已经是真实链接的默认设置。

在更抽象的层面上，以语义正确标记的名义，使用专门为它们设计的 HTML 元素生成链接（或类似链接的页面元素）更为明智，除非您有充分的理由避免这种情况。

毕竟，严格来说，项目符号列表和基于选项卡的导航在语义上并不是一回事。

# vb.net - 如何在 vb.net 中验证字符串

> ID：12376059
> 
> 赞同：1
> 
> 时间：2012-09-11T18:49:03.183
> 
> 标签：vb.net, string, validation

我有一个文本框，我以字符串格式输入范围，文本框中的文本类似于

“1 到 30”

“4 到 75”

所以它的整数 &" 到 "& 整数。验证这一点的最佳方法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-11T18:54:06.430

这是[正则表达式](http://www.regular-expressions.info/)的完美任务。在您的情况下，表达式很简单

```
^\d+\s+to\s+\d+$ 
```

意思是：

*   `^`字符串 ( )的开头，
*   几个数字（`\d`是一个数字，下面的`+`意思是：前面的一个或多个），
*   后跟几个空格（`\s`是空格、制表符等），
*   后跟文字字符串`to`，
*   后跟空格，然后是数字，
*   然后是字符串 ( `$`) 的结尾。

在 VB 中，您可以按如下方式匹配它：

```
If Regex.IsMatch(input, "^\d+\s+to\s+\d+$") Then ' Yes, it matches. 
```

这需要[导入`System.Text.RegularExpressions`命名空间](http://msdn.microsoft.com/en-us/library/system.text.regularexpressions.aspx)。

正则表达式是一种描述字符串的自己的语言，因此需要一些时间来适应。但它们是迄今为止处理此类字符串验证和简单解析工作的最简单工具，因此必须学习它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T18:54:09.933

可以使用 Regex 类，只需实例化 Regex 类的新实例，将 '[1-30]' 作为模式传递给构造函数，然后运行 ​​'IsMatch' 方法返回一个布尔值，指示主题是否传入IsMatch 方法介于 1 到 30 之间。

# iphone - 从 iphone 应用程序打开 iTunes

> ID：12376065
> 
> 赞同：0
> 
> 时间：2012-09-11T18:49:54.720
> 
> 标签：iphone, app-store, itunes

我想通过单击应用程序中的按钮来打开 iTunes 以下载 iTunes 视频。我应该为此提供什么链接？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T19:19:50.113

Apple 有一个 iTunes Link Maker 工具，您可以使用它来生成链接

[更多信息在这里](http://developer.apple.com/library/ios/#featuredarticles/iPhoneURLScheme_Reference/Articles/iTunesLinks.html#//apple_ref/doc/uid/TP40007896-SW1)

通过该链接，您可以使用

```
[[UIApplication sharedApplication] openURL:itunesURL]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-09T18:24:44.337

只需使用[iTunes Link Maker](http://iTunesLinkMaker.com)并从链接**中删除国家代码**（即“**我们**”），它就会始终打开 iTunes，而不是途中的浏览器（如果目标系统上安装了 iTunes）。

然后使用您获得的链接替换代码中的 THE_ITUNES_LINK：

```
[[UIApplication sharedApplication] openURL:THE_ITUNES_LINK]; 
```

# .net - 如何将 ipfilter 添加到 wcf odata 服务

> ID：12376068
> 
> 赞同：0
> 
> 时间：2012-09-11T18:50:15.310
> 
> 标签：.net, wcf, wcf-data-services, odata

如何将 IP 过滤器添加到我的 oData WCF 服务？

我发现一些博客文章解释了如何在 web.config 中添加额外的配置，只是我在 web.config 中没有任何内容（关于服务）。

我按照[Hanselmans](http://www.hanselman.com/blog/CreatingAnODataAPIForStackOverflowIncludingXMLAndJSONIn30Minutes.aspx)的示例介绍了如何添加 oData 提要，这不涉及通过 web.config 配置 wcf。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T20:43:26.213

WCF 4 的工作方式是，如果该值为默认值，则不需要存在。因此，如果您不单独配置服务，则需要更改默认服务行为。

您可以通过配置服务行为来做到这一点，例如：

```
<configuration>
 <system.serviceModel>
  <behaviors>
  <serviceBehaviors>
    <behavior> <!-- notice no name attribute -->
     <serviceMetadata httpGetEnabled="true" /> 
     <serviceDebug includeExceptionDetailInFaults="true" /> 
     <IPFilter filter="172.*.*.* 127.0.0.1" />           
    </behavior>
   </serviceBehaviors>
   </behaviors>
 </system.serviceModel>
</configuration> 
```

# jquery - 在 jquery 中使用 parent() 时不选择 td

> ID：12376073
> 
> 赞同：0
> 
> 时间：2012-09-11T18:50:37.717
> 
> 标签：jquery

看一下这个

[http://jsfiddle.net/ANygj/](http://jsfiddle.net/ANygj/)

当您选择一个值时，它应该提醒价格。它没有，它警报为空？喜欢它不选择正确。

我尝试使用 parent() 和 parents()，似乎没有区别。

我怎样才能使这项工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T18:52:47.683

试试`closest('tr')`吧。

```
var price = qty.closest('tr').find('td.price').text(); 
```

**演示：http:** [//jsfiddle.net/ANygj/1/](http://jsfiddle.net/ANygj/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T18:53:01.353

您将事件绑定到的元素是`select`. ***的***父级`select`不是元素。您应该使用来访问：*`tr``closest()``tr`*

 *```
$(document).ready(function(){
    $('.qty').change(function(){
        var qty = $(this);
        var price = $(qty).closest('tr').find('td.price').text();

        alert(price);
    });
});​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/ANygj/4/)。

这样做的原因是`parent()`，正如方法名称所暗示的那样，它查找当前元素的父元素，如果父元素与方法中传递的选择器匹配，则继续。

`closest()`通过 DOM util 查找它找到与传递给方法的选择器匹配的第一个祖先元素。

还有`parents()`, 它通过当前元素的祖先查找，然后返回与传递给方法的选择器匹配的*所有元素。*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T18:54:50.593

使用“父母”，而不是“父母”

```
$(this).parents('tr').find('.price').text(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-11T18:59:04.010

[这](http://jsfiddle.net/YhC5C/)应该比`closest`根据[http://jsperf.com/jquery-parents-vs-closest/8使用的要快一些](http://jsperf.com/jquery-parents-vs-closest/8)*

# java - Java Webapp 执行器类

> ID：12376075
> 
> 赞同：0
> 
> 时间：2012-09-11T18:50:55.187
> 
> 标签：java, threadpoolexecutor

Java - webapp 通过 Executors 类执行线程作为以下代码的优势是什么，然后以固定池大小运行。

```
private ExecutorService threadRunner;
threadRunner = Executors.newFixedThreadPool(2);

threadRunner.submit(activeQueueRunner);
threadRunner.submit(standbyQueueRunner); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T18:58:04.697

线程包含许多创建成本高昂的支撑结构。执行器是创建一次的线程池，但包含在多个任务中重用所需的支持代码。

换句话说，如果您只向大小为 2 的新固定线程池提交两个项目，那么您没有任何优势。当您将第三个项目提交到`threadRunner`池中时，优势就出现了，因为它将绑定到已完成任务的 *前*一个线程（`activeQueueRunner`或`standbyQueueRunner`），并使用该线程来执行它的`run(...)`块。

如果您将提交的任务写成永远不会完成，那么它们基本上永远不会将线程释放回池中。因此，当使用`Executor`类型池时，创建大量快速轻量级任务并让池分摊在整个程序运行期间创建/销毁线程的昂贵成本是一个好主意。

# mysql - MySql中多行的总和

> ID：12376077
> 
> 赞同：6
> 
> 时间：2012-09-11T18:50:59.743
> 
> 标签：mysql, sql, sum

我有这种方式的数据

```
ID       SUB       Marks    
 1      English      25
 1       Maths       22
 1      Science      15
 2      English      16
 2       Maths       20
 2      Science      12 
```

等等...

我将如何总结所有科目分数并给出每个 ID 的总分？

例如，如果我选择 ID=1，那么它应该显示 62。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-11T18:53:25.610

这应该这样做：

```
SELECT ID, SUM(Marks) as totalMarks
FROM MyTable
GROUP BY Id 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-11T18:52:00.460

```
select id, sum(Marks) as marks
from tablename
group by id 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-05-27T09:03:55.387

试试这个……这行得通……

```
SELECT ID, SUM(Marks) as Total
FROM Table_Name
GROUP BY ID
ORDER BY ID 
```

# python - 检查字典的任何值是否与条件匹配

> ID：12376079
> 
> 赞同：20
> 
> 时间：2012-09-11T18:51:00.303
> 
> 标签：python, python-2.7

python 程序员如何检查字典的任何值是否与条件匹配（大于`0`我的情况）。我正在寻找对性能影响最小的最“pythonic”的方式。

我的字典：

```
pairs = { 'word1':0, 'word2':0, 'word3':2000, 'word4':64, 'word5':0, 'wordn':8 } 
```

到目前为止，我使用了这两种（可怕的？）方法。

**1：**

```
options = pairs.values() # extract values
for i in options:
    if i > 0:
        return True
return False 
```

**2：**

```
options = sorted(pairs.items(), key=lambda e: e[1], reverse=True) # rank from max to min
if options[0][1] > 0:
    return True
else:
    return False 
```

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-09-11T18:58:13.060

您可以使用`any` [[文档]](http://docs.python.org/library/functions.html#any)：

```
>>> pairs = { 'word1':0, 'word2':0, 'word3':2000, 'word4':64, 'word5':0, 'wordn':8 }
>>> any(v > 0 for v in pairs.itervalues())
True
>>> any(v > 3000 for v in pairs.itervalues())
False 
```

另见`all` [[文档]](http://docs.python.org/library/functions.html#all)：

```
>>> all(v > 0 for v in pairs.itervalues())
False
>>> all(v < 3000 for v in pairs.itervalues())
True 
```

由于您使用的是 Python 2.7，`.itervalues()`因此可能比`.values()`它不创建新列表要好一些。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-04-13T00:15:00.040

```
Python 3.x Update 
```

> 在 Python 3 中，对映射的直接迭代与在 Python 2 中的工作方式相同。没有基于方法的等价物 - Python 3 中 d.itervalues() 和 d.iteritems() 的语义等价物是 iter(d.values ()) 和 iter(d.items())。

根据[文档](https://www.python.org/dev/peps/pep-0469/)，您应该使用`iter(d.values())`, 而不是`d.itervalues()`：

```
>>> pairs = { 'word1':0, 'word2':0, 'word3':2000, 'word4':64, 'word5':0, 'wordn':8 }
>>> any(v > 0 for v in iter(pairs.values()))
True
>>> any(v > 3000 for v in iter(pairs.values()))
False 
```

# payment-gateway - 集成贝宝支付专业版

> ID：12376083
> 
> 赞同：1
> 
> 时间：2012-09-11T18:51:24.253
> 
> 标签：payment-gateway, paypal

我想在我的网站中集成贝宝支付专业版。我可以在我的网站上接受信用卡而不要求用户去贝宝网站登录和提供信息吗？如果是，实现它的最佳方法是什么？任何示例代码或示例将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T05:45:49.663

您可能会发现[Stripe](https://stripe.com/)或[Braintree 的](https://www.braintreepayments.com/)支付系统比 PayPal 的更容易集成。

如果您仍想使用 PayPal 为没有 PayPal 帐户的用户处理信用卡，请查看[PayPal Payments](https://www.paypal.com/webapps/mpp/compare-business-products)。

# algorithm - 是否不可能像维基百科所说的那样计算出准确的最坏情况？

> ID：12376086
> 
> 赞同：3
> 
> 时间：2012-09-11T18:51:44.323
> 
> 标签：algorithm, analysis, average

根据[维基百科](http://en.wikipedia.org/wiki/Best,_worst_and_average_case)：“通常不可能确定确切的最坏情况。相反，一种情况被认为至少与最坏情况一样糟糕”。我不明白那部分。在列表中搜索数字时，最坏的情况不是在最后一个索引处吗？这不是最坏的情况吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-11T19:00:30.857

我想你误读了条目。[http://en.wikipedia.org/wiki/Best,_worst_and_average_case](http://en.wikipedia.org/wiki/Best,_worst_and_average_case)

他们说最坏的情况可能是您可以识别的，但确切的输入不是。例如，如果使用桶实现哈希表/字典，很容易说最坏的情况是当所有 100 个样本条目哈希到同一个桶时，但不太容易识别实际哈希到同一个桶的 100 个输入。对于某些算法，几乎不可能得出确切的最坏情况输入数据。

> 最坏情况分析也有类似的问题：通常不可能确定确切的最坏情况。相反，一个场景被认为至少与最坏的情况一样糟糕。例如，在分析算法时，**即使无法确定生成该路径的确切输入，也有可能找到通过算法的最长可能路径（例如，通过考虑最大循环数）**（事实上，这样的输入可能不存在）。这给出了一个安全的分析（最坏的情况永远不会被低估），但这是一个悲观的分析，因为可能没有需要这条路径的输入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T18:59:22.940

是的，这是您提到的场景的最坏情况，但您提到的场景是一个简单的场景。

想象一棵树上的一个复杂操作，它涉及将节点一直旋转到根。最坏的情况可能是树当前状态的复杂函数。但是更容易想象，例如，您需要进行 O(log(N)) 或 O(N) 旋转，这取决于您是否可以证明其中任何一个都比最坏的情况更糟（当然 O(N) 是在这种更复杂的情况下，最坏的情况是有限的）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T19:06:11.800

要计算最坏情况执行时间 (WCET)，您可以根据输入大小考虑每个循环，并假设它不会提前终止。但是，如果您有一个稍微复杂的算法，则可能不会计算导致 WCET 的输入。例如，如果您的算法使用（名称）哈希表，您可以假设所有键都散列到同一个单元格，但您无法判断哪种输入会导致这种情况。尽管甚至可能看到输入语义永远不会导致这样的哈希表，但您仍然会基于所有键具有相同哈希的假设来计算 WCET。

# entity-framework - 在 EF5 中是否缓存可用于短期上下文的已编译查询？

> ID：12376088
> 
> 赞同：1
> 
> 时间：2012-09-11T18:51:49.680
> 
> 标签：entity-framework, entity-framework-5

我们计划在具有短暂上下文的 WCF 服务中使用 EF5。处置对象上下文时，已编译查询的缓存是否已清空？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T18:57:59.450

我的理解是，启用缓存后，将在应用程序域中给定上下文类型的所有实例之间共享。直接针对给定实例缓存已编译的查询是没有意义的，因为查询本身对于任何给定的查询表达式树都不会改变。这与缓存从这些查询返回的实际数据不同。

# objective-c - 基于 UIView 块的动画重绘

> ID：12376089
> 
> 赞同：4
> 
> 时间：2012-09-11T18:51:53.597
> 
> 标签：objective-c, uiview, objective-c-blocks, uiviewanimation

我需要设置`setAnimationBeginsFromCurrentState`一个块。我找不到任何有关如何执行此操作的文档或示例。

我需要转换这个：

```
[UIView beginAnimations:nil context:NULL];
[UIView setAnimationBeginsFromCurrentState:YES]; //The problem
[UIView setAnimationDuration:kKeyboardAnimationDuration];
[self.view setFrame:viewFrame];
[UIView commitAnimations]; 
```

进入一个块以及设置`setAnimationBeginsFromCurrentState`属性。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-11T18:55:31.430

使用基于块的`UIView`动画时，您可以传递`UIViewAnimationOptionBeginFromCurrentState`给动画的选项。

```
[UIView animateWithDuration:1.0 delay:0.0 options:UIViewAnimationOptionBeginFromCurrentState animations:^{
    [self.view setFrame:viewFrame];
}completion:^(BOOL done){
   //some completition
}]; 
```

# mysql - DROP TRIGGER 如何在 mysql 中工作？

> ID：12376098
> 
> 赞同：3
> 
> 时间：2012-09-11T18:52:44.017
> 
> 标签：mysql, sql

我有一个关于 DROP TRIGGER 如何工作的问题。

我使用此命令删除触发器：

```
DROP TRIGGER IF EXISTS `database`.`mytrigger`; 
```

但我的问题是，你可以删除一个触发器，用表名选择它吗？例如：

```
DROP TRIGGER IF EXISTS `table`.`mytrigger`; 
```

我试过了，但是当我设置表名时触发器没有被删除。

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-11T18:57:20.063

不，因为这并不能唯一地标识一个触发器，而且它最终看起来就像你试图说你有一个被调用的数据库`table`。如果您只想省略数据库名称，则无需将其替换为任何内容：

```
DROP TRIGGER IF EXISTS `mytrigger`; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-11T19:01:02.490

表级别不存在触发器。它们是仅与表相关联的数据库级对象。没有办法通过相关表删除它们。

# javascript - Document.write 方法题

> ID：12376100
> 
> 赞同：5
> 
> 时间：2012-09-11T18:52:49.747
> 
> 标签：javascript, html

我正在尝试使用 write 方法和 onload 事件。这是我的代码：

```
<!DOCTYPE html>
<html>
    <head>
    </head>
    <body onload="document.write('body loaded!')">
        <h1>Hello World!</h1>
        <img onload="document.write('img loadeld!')" src="smiley.gif" alt="Smiley face" width="42" height="42" />
    </body>
</html> 
```

如果我在浏览器中运行它，它会输出“img loadeld”并且只是“挂起”，似乎正在无限加载页面。我希望浏览器输出“img loadeld”，然后当 body 元素准备好“body loaded”并正常停止时。

我的问题：

1.  为什么会有这样的悬念？为什么 img 元素上的 onload 事件会阻止浏览器继续并呈现“已加载正文”？
2.  为什么如果我从 img 元素中删除 onload 处理程序，响应是预期的 - “加载正文”并且页面没有被阻止。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T18:56:42.467

简单地说，在 DOM 准备好`document.write()` **之后**调用会导致它覆盖现有的 DOM。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-11T18:58:47.623

一切都正常工作（尽管不像你预期的那样），没有什么是“挂起”或“阻塞”的。然而，这一切发生得如此之快，以至于它看起来并不像这样。希望对写入文档的工作原理和事件顺序的解释将对您有所帮助：

您的 IMG onload 事件在文档关闭后触发（文档准备就绪）。

`document.write()`但是，只能输出到*打开*的文档。

如果文档已关闭，则`document.write()`( [docs](https://developer.mozilla.org/en-US/docs/DOM/document.write) ) 隐式调用`document.open()`( [docs](https://developer.mozilla.org/en-US/docs/DOM/document.open) ) 擦除整个文档。然后，您的呼叫会`write`输出您告诉它的内容。文档保持打开状态，直到显式关闭（`document.close()`( [docs](https://developer.mozilla.org/en-US/docs/DOM/document.close) )），因此“加载微调器”继续显示。

那么，正在发生的基本操作流程（如此之快以至于你没有注意到这一切都在发生并且事情看起来很糟糕）是：

1.  发出页面请求
2.  收到页面响应
3.  document被打开，内容被解析并放置到位，包括第一个`document.write`（不必调用open，因为document当前是打开的）
4.  文件关闭
5.  IMG 标记的检索完成并触发事件
6.  事件处理程序调用`document.write`
7.  文档被隐式重新打开（新文档创建，所有内容丢失；显示加载微调器）
8.  你的论点`document.write()`被输出到新文档中
9.  一切都完成了，文档仍然打开

应该使用DOM 操作技术（`appendChild()`、写入`innerHTML`等）而不是`document.write`为了修改现有内容而不覆盖所有内容。

*好*消息是，既然发生了这种情况，您确实知道您的图像正在成功加载。你只需要找出正确的方法来应对它，就像我之前逃避的那样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T18:56:14.823

在`document.write`加载 html 后在函数内部使用时，它会写入**新的**html 文档。onload 是一个事件处理程序，所以`<img onload="document.write('img loadeld!')"/>`= `img.onload = function(event){document.write('img loadeld!');}`。
它不会阻止页面加载，它只会创建新的空白 html 文档。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-11T18:56:34.473

那是因为`document.write()`清除整个文档，然后将参数写入页面，尝试`document.writeln('Img loaded');`附加到正文，但要坚持你*真正*想要的：

```
<img onload="document.body.innerHTML += '<h1>Loaded</h1>'"' 
```

或者编写一个创建元素并使用的函数`document.body.appendChild(elem)`，在这种情况下，您可以`document.body`用任何块元素替换

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-11T18:56:36.693

创建一个消息容器，例如 DIV 并设置`innerHTML`，不要使用 .write()

# c# - 使用数据绑定移动十字准线/绘图对象

> ID：12376105
> 
> 赞同：0
> 
> 时间：2012-09-11T18:53:01.120
> 
> 标签：c#, wpf, mvvm

我需要一些关于如何在 WPF 中实现以下目标的想法：

1.  在画布上绘制“n”个十字准线或其他绘图对象。我并不是专门指 WPF Canvas，但可能就是这样。值“n”来自 Binding。我想知道有人会为这个画布使用什么，它可以在运行时基于绑定添加绘图对象。

2.  根据相应的位置数据值移动适当的十字准线/绘图。位置值也将来自 Binding。位置值可以高速更新，所以运动必须是平滑的动画。我会开始使用顶部/左侧坐标来实现这一点，但我听说过一些关于渲染转换的东西，它是在 GPU 与 CPU 上执行的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T19:49:53.857

我最终`ItemsControl`在 View 中使用`DataTemplates`，并`Collection`在 View Model 端使用 a 。`TranslateTransform`在样式中用于`DataTemplate`移动绘图对象。

# php - mysql查询语法，从不同的表中获取数据

> ID：12376106
> 
> 赞同：0
> 
> 时间：2012-09-11T18:53:06.903
> 
> 标签：php, mysql, database

我得到了这个书店网站，我正在尝试生成一些关于销售的统计数据。我有两张桌子；`books`和`sales_item`。它们看起来像这样：

`books`

```
id  title
1   Cats
2   Dogs
3   Frogs 
```

和`sales_item`

```
book_id  qty
1        2
2        2
3        4
3        1
2        1
and so on for hundreds of rows 
```

所以我要的是一个 sql 查询和一个 html 表，告诉我我们已经卖了 2 Cats、3 Dogs 和 5 Frogs。我想`id`从一个表与另一个表匹配`book_id`，然后`qty`为每个表添加所有`title`。我有一种感觉，这涉及到 sql JOIN，但我仍然对语法不太满意。任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T18:56:16.783

```
select b.id, b.title, sum(s.qty) as NumSold 
from books b 
left outer join sales_item s on b.id = s.book_id 
group by b.id, b.title 
order by b.title 
```

[SQL 小提琴示例](http://sqlfiddle.com/#!2/ad7cc/2/0)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T18:58:29.643

```
select sum(qty), title
from sales_item s
left join books b on s.book_id = b.id
group by s.book_id 
```

[SQL 小提琴示例](http://sqlfiddle.com/#!2/8bd6b6/2)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T19:17:49.043

你可以这样做：

```
$query = ("select sum(qty) as 'Quantity', title from books b left join sales_item s on b.id = s.bookid' group by book_id");

$result = mysql_query($query);

//and this would be the code to print the html table

echo "<table border='1'>
<tr>
<th>Quantity</th>
<th>Pet</th>
</tr>";

while($row = mysql_fetch_array($result))
  {
  echo "<tr>";
  echo "<td>" . $row['Quantity'] . "</td>";
  echo "<td>" . $row['tittle'] . "</td>";
  echo "</tr>";
  }
echo "</table>"; 
```

从 w3school[示例](http://www.w3schools.com/php/php_mysql_select.asp)中获得帮助。

# java - 从java中的object.toString获取类对象

> ID：12376110
> 
> 赞同：0
> 
> 时间：2012-09-11T18:53:31.527
> 
> 标签：java

我想从中获取类对象`object.toString`（而不覆盖类中的 toString 方法）。

我知道反射会给对象，但它会创建一个我不想要的类的新实例。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-11T18:55:46.733

> 我知道反射会给对象，但它会创建一个我不想要的类的新实例。

不，真的不会。

打电话

```
foo.getClass(); 
```

代替

```
foo.toString(); 
```

那肯定*不会*创建该类的新实例。它只会得到一个`Class`参考。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T18:55:18.533

是的..您将获得 Class 对象`toString()` **而不重载**它..但它将采用`getClass().getName()+"@"+hashCode();`'的形式

所以会为你施展魔法，并且很可能会`obj.getClass();`交给你......`Reference``Class`

# asp.net - 未找到 asp.net IIS 7.5 无 Cookie 页面

> ID：12376112
> 
> 赞同：0
> 
> 时间：2012-09-11T18:53:42.623
> 
> 标签：asp.net, visual-studio-2010, iis-7.5

我已将我的 asp.net Web 应用程序部署到测试 IIS 7.5 服务器（实际上是同一台机器）。该应用程序在 Visual Studio 2010 中运行良好。我正在使用无 cookie 身份验证。当我打开部署的站点并在登录后将用户重定向到主页时，我收到一个找不到页面的错误。任何想法为什么会发生这种情况？

谢谢达摩

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T19:04:10.243

在登录页面后面的代码中，我有以下内容。

```
string Redirectport = HttpContext.Current.Request.ServerVariables["SERVER_PORT"];
    RedirectURL = "http://localhost:" + Redirectport + System.Web.HttpContext.Current.Response.ApplyAppPathModifier("~/Main.aspx"); 
```

我不得不将单词 localhost 更改为实际的电脑名称。我将把这部分作为 webconfig 的一部分。

这是这样做的方法吗？我认为它会与本地主机一起使用？

谢谢达摩

# ios5 - 为推送通知配置应用程序时出现问题

> ID：12376113
> 
> 赞同：0
> 
> 时间：2012-09-11T18:53:54.007
> 
> 标签：ios5, push-notification

我正在尝试在我正在构建的应用程序中设置推送通知。我已经按照[http://www.raywenderlich.com/3443/apple-push-notification-services-tutorial-part-12](http://www.raywenderlich.com/3443/apple-push-notification-services-tutorial-part-12)上的教程进行操作，但没有成功。

我已经创建了设置开发者推送通知所需的 CSR、App Id 和 SSL 证书。当我运行命令行 openssl 时，我可以成功连接（根据教程）。

我相信我在 xcode 中选择了正确的代码签名配置文件。我在配置文件下选择了与我的捆绑标识符匹配的 iPhone 开发人员，但开发人员看起来相同。您可以在以下位置查看屏幕截图：http: [//imgur.com/UamUC](http://imgur.com/UamUC)

当我尝试在手机上运行我的应用程序时；不在模拟器中，我在 xcode 输出窗口中得到以下信息：

```
 2012-09-11 14:47:35.907 (M+B)2B[2110:707] Failed to get token, error: Error Domain=NSCocoaErrorDomain Code=3000 "no valid 'aps-environment' entitlement string found for application" UserInfo=0x3e61d0 {NSLocalizedDescription=no valid 'aps-environment' entitlement string found for application} 
```

我认为它一定与我的配置文件有关，但我不知道是什么。我已经完成了教程第一部分的步骤，但我不知道我哪里出错了。

我的应用需要 iOS 5.0，而我使用的是 XCode 4.4。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T11:12:29.303

在为推送通知配置应用 ID 后，您是否重新发布了用于签署应用的 mobileprovision？

使用文本编辑器打开 mobileprovision 文件时，您应该能够看到其中的`<key>aps-environment</key>`行，否则请尝试在 iOS 开发人员门户中重新发布 mobileprovision。

# c# - 使用 c# 在 mongodb 中分片以根据需要获取记录

> ID：12376114
> 
> 赞同：0
> 
> 时间：2012-09-11T18:53:58.867
> 
> 标签：c#, mongodb, mongodb-.net-driver, sharding

我在一些 csv 文件中有 200 万条数据......我正在获取这些文件并减少它以获得这样的结果总和......

```
{ "_id" : "08-08-2012 05:00", "value" : { "CollectionDate" : "08-08-2012 05:00", "count" : 20000 } }
{ "_id" : "08-08-2012 05:15", "value" : { "CollectionDate" : "08-08-2012 05:15", "count" : 20000 } }
{ "_id" : "08-08-2012 05:30", "value" : { "CollectionDate" : "08-08-2012 05:30", "count" : 20000 } }
{ "_id" : "08-08-2012 05:45", "value" : { "CollectionDate" : "08-08-2012 05:45", "count" : 20000 } }
{ "_id" : "08-08-2012 06:00", "value" : { "CollectionDate" : "08-08-2012 06:00", "count" : 20001 } }
{ "_id" : "08-08-2012 06:15", "value" : { "CollectionDate" : "08-08-2012 06:15", "count" : 20000 } }
{ "_id" : "08-08-2012 06:30", "value" : { "CollectionDate" : "08-08-2012 06:30", "count" : 20000 } }
....
{ "_id" : "08-08-2012 10:30", "value" : { "CollectionDate" : "08-08-2012 06:30", "count" : 20000 } }
{ "_id" : "08-08-2012 10:45", "value" : { "CollectionDate" : "08-08-2012 06:30", "count" : 20000 } }
{ "_id" : "08-08-2012 11:00", "value" : { "CollectionDate" : "08-08-2012 06:30", "count" : 20000 } } 
```

获取此结果的源代码如下：

```
class DirectImport
{
    private static bool forOnce = true;
    static void Main(string[] args)
    {
        Stopwatch stopwatch = new Stopwatch();
        bool reset = true;
        BsonString lastAggregatedDate = "";
        String lastCollName = "";
        MongoServer mongo = MongoServer.Create();
        mongo.Connect();
        Console.WriteLine("Connected"); Console.WriteLine();
        var db = mongo.GetDatabase("SampleData");
        using (mongo.RequestStart(db))
        {
            List<BsonDocument> mDoc = new List<BsonDocument>();
            IEnumerable<String> CollectionList = Directory.EnumerateFiles(@"c:\mongoDb\Final");
            DateTime oldDt = new DateTime(1, 1, 1);
            foreach (String coll in CollectionList.ToArray<String>())
            {
                String collName = coll.Substring(coll.LastIndexOf(@"\") + 1);
                collName = collName.Substring(0, collName.LastIndexOf('.'));
                //Console.WriteLine(collName);
                string[] records = File.ReadAllLines(@"C:\mongoDB\Final\" + collName + ".csv");
                mDoc = new List<BsonDocument>();

                var newCollection = db.GetCollection<BsonDocument>(collName);
                for (int l = 1; l < records.Length; l++)
                {
                    string[] abc = records[l].Split(',');
                    //Console.WriteLine(abc[1] + "_" + abc[2] + "_" + abc[5]);
                    BsonDocument book1 = new BsonDocument();
                    book1.Add("_id", BsonString.Create(abc[1] + "_" + abc[2] + "_" + abc[5]));
                    book1.Add("Base_Name", BsonString.Create(abc[0]));
                    book1.Add("ObjectType", BsonString.Create(abc[1]));
                    book1.Add("C_ID", BsonString.Create(abc[2]));
                    book1.Add("AssociateDimension1", BsonString.Create(abc[3]));
                    book1.Add("AssociateDimension2", BsonInt32.Create(abc[4]));
                    book1.Add("CollectionDateHour", BsonInt32.Create(Convert.ToDateTime(BsonString.Create(abc[5])).Hour));
                    book1.Add("CollectionDate", BsonString.Create(abc[5]));
                    book1.Add("Granularity", BsonInt32.Create(abc[6]));
                    book1.Add("Counter1_1", BsonDouble.Create(abc[7]));
                    book1.Add("Counter1_2", BsonDouble.Create(abc[8]));
                    book1.Add("Counter1_3", BsonDouble.Create(abc[9]));
                    book1.Add("Counter1_4", BsonDouble.Create(abc[10]));
                    book1.Add("Counter1_5", BsonDouble.Create(abc[11]));
                    book1.Add("Counter1_6", BsonDouble.Create(abc[12]));
                    book1.Add("Counter1_7", BsonDouble.Create(abc[13]));
                    if (forOnce)
                    {
                        forOnce = false;
                        oldDt = Convert.ToDateTime(BsonString.Create(abc[5]));
                        lastCollName = collName;
                    }
                    DateTime dt = Convert.ToDateTime(BsonString.Create(abc[5]));
                    mDoc.Add(book1);
                    newCollection.Insert(book1);
                    String[] strparam = { "CollectionDate" };
                    if (!newCollection.IndexExists(strparam))
                        newCollection.CreateIndex(strparam);
                    if (oldDt > dt)
                        Console.WriteLine(dt + ":::" + oldDt);
                    if (((dt - oldDt).Hours >= 1) || oldDt > dt)
                    {
                        stopwatch.Start();
                        Console.WriteLine("Calling MAPReduce at: " + oldDt);
                        Console.WriteLine();
                        //var coll1 = db.GetCollection<BsonDocument>("MSS1");
                        //coll1.InsertBatch<BsonDocument>(mDoc);
                        MapReduce(db, lastCollName, dt, lastAggregatedDate, reset);
                        lastCollName = collName;
                        //coll1.Drop();
                        lastAggregatedDate = BsonString.Create(abc[5]);
                        reset = false;
                        mDoc = new List<BsonDocument>();
                        oldDt = dt;
                        TimeSpan ts = stopwatch.Elapsed;
                        Console.WriteLine("RunTime: " + ts.Hours + ":" + ts.Minutes + ":" + ts.Seconds + ":" + ts.Milliseconds / 10);
                        stopwatch.Stop();
                    }
                }
            }
        }
        Console.Read();
        mongo.Disconnect();
    }
private static void MapReduce(MongoDatabase db, String collName, BsonValue bsonValue, BsonString lastAggregateDate, bool reset)
    {
        var collection = db.GetCollection<BsonDocument>(collName);
        Console.WriteLine(collName);
        String map = @"function() { 
                                    emit(this.CollectionDate, {CollectionDate : this.CollectionDate, count: 1});
                                  }";
        String reduce = @"function(key, values) {
                                        var result = {CollectionDate:key, count: 0};
                                        values.forEach(function(value){
                                            result.count += value.count;
                                        });
                                        return result;
                                    }";
        var options = new MapReduceOptionsBuilder();
        IMongoQuery[] queries = { Query.GTE("CollectionDate", lastAggregateDate) };
        //if(reset)
        //    queries = new IMongoQuery[] { Query.LT("CollectionDate", bsonValue) };

        options.SetOutput(MapReduceOutput.Reduce("MSS_REDUCE"));
        //options.SetOutput(MapReduceOutput.Reduce);
        IMongoQuery query = Query.And(queries);
        var results = collection.MapReduce(queries[0], map, reduce, options);
} 
```

现在的问题是我需要的输出是：

```
{ "_id" : "08-08-2012 05:00", "value" : { "CollectionDate" : "08-08-2012 05:00", "count" : 20000 } }
{ "_id" : "08-08-2012 06:00", "value" : { "collectionDate" : "08-08-2012 06:00", "count" : 80000 } }
{ "_id" : "08-08-2012 07:00", "value" : { "collectionDate" : "08-08-2012 07:00", "count" : 80000 } }
{ "_id" : "08-08-2012 08:00", "value" : { "CollectionDate" : "08-08-2012 07:45", "count" : 80000 } }
{ "_id" : "08-08-2012 09:00", "value" : { "collectionDate" : "08-08-2012 09:00", "count" : 80000 } }
{ "_id" : "08-08-2012 10:00", "value" : { "collectionDate" : "08-08-2012 10:00", "count" : 80000 } }
{ "_id" : "08-08-2012 11:00", "value" : { "CollectionDate" : "08-08-2012 10:45", "count" : 80000 } } 
```

现在我认为可以通过对_id键进行分片来完成..但是如何在c#中执行此操作以及如何实现此结果..请帮助我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T01:24:04.547

这个问题可以通过改变你的地图减少来解决，除非我弄错了。

我从评论中的假设是，您正在寻找的是每个小时的总和，对于每个前一个小时。这意味着您可以在 上`CollectionDateHour`而不是在上进行 mapreduce `CollectionDate`。然后，您可以在应用程序中控制您希望`CollectionDateHour`跌落的位置（例如，您可以决定`6:45`是在`7:00`组中还是在`6:00`组中。

你的申请有两点要改，先处理收款日期小时：

```
for (int l = 1; l < records.Length; l++)
{
...
    var collectionDate = Convert.ToDateTime(BsonString.Create(abc[5]));
    var collectionDateHour = collectionDate.Minute>0?collectionDate.AddHours(1).Hour:collectionDate.Hour;
    book1.Add("CollectionDateHour", BsonInt32.Create(collectionDateHour));
... 
```

如果有任何分钟部分，这只是使`CollectionDateHour`一个多小时。您可以调整它以适合您的逻辑。`CollectionDate``CollectionDate`

第二个更改是调整您的 map reduce 函数，以便您根据`CollectionDateHour`之前使用的而不是完整的字符串进行缩减。一种方法是更改​​您的地图功能：

```
String map = @"function() { 
    var newCollectionDate = this.CollectionDate.split(' ')[0] + (this.CollectionDateHour<10?' 0':' ')+this.CollectionDateHour + ':00'
    emit(newCollectionDate, {CollectionDate : newCollectionDate, count: 1});
}"; 
```

这会将收集日期设置为在您的应用程序逻辑中计算出的小时数，并减少它。鉴于上述两个变化，以下输入：

```
{ "CollectionDate" : "08-08-2012 05:00" }
{ "CollectionDate" : "08-08-2012 05:15" }
{ "CollectionDate" : "08-08-2012 05:10" }
{ "CollectionDate" : "08-08-2012 04:00" }
{ "CollectionDate" : "08-08-2012 12:45" }
{ "CollectionDate" : "08-08-2012 12:46" }
{ "CollectionDate" : "08-08-2012 23:45" } 
```

将给出这些结果：

```
{ "_id" : "08-08-2012 00:00", "value" : { "CollectionDate" : "08-08-2012 00:00", "count" : 1 } }
{ "_id" : "08-08-2012 04:00", "value" : { "CollectionDate" : "08-08-2012 04:00", "count" : 1 } }
{ "_id" : "08-08-2012 05:00", "value" : { "CollectionDate" : "08-08-2012 05:00", "count" : 1 } }
{ "_id" : "08-08-2012 06:00", "value" : { "CollectionDate" : "08-08-2012 06:00", "count" : 2 } }
{ "_id" : "08-08-2012 13:00", "value" : { "CollectionDate" : "08-08-2012 13:00", "count" : 2 } } 
```

# php - 在php中从小时而不是时间格式中减去

> ID：12376119
> 
> 赞同：-6
> 
> 时间：2012-09-11T18:54:19.217
> 
> 标签：php, time, subtraction

我得到了这种格式的时间：“192:40”192=小时，40=分钟。

假设我想减去“02:30”小时，所以答案将是“190:10”..

有什么办法吗？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T18:59:09.217

用于[`explode()`](http://php.net/explode)分隔小时/分钟部分，然后自己计算：

```
list( $hour, $min) = explode( ':', "192:40");
list( $hour_sub, $min_sub) = explode( ':', "02:30");
$result = ($hour - $hour_sub) . ':' . ($min - $min_sub);
echo $result; 
```

这[将打印](http://viper-7.com/bYuwgv)：

```
190:10 
```

如果时间绕过去，那`($min - $min_sub)`将是负面的。为了解决这个问题，可以使用以下方法：

```
list( $hour, $min) = explode( ':', "192:40");
list( $hour_sub, $min_sub) = explode( ':', "02:30");
$hour = $hour - $hour_sub;
$min  = $min  - $min_sub;
if( $min < 0) {
    $min = 60 + $min; // Note $min is negative
    $hour--; // Decrement hour
}
$result = $hour . ':' . $min; 
```

# java - Struts 2 Tiles Spring Security 3 无法加载css、图像、脚本

> ID：12376123
> 
> 赞同：1
> 
> 时间：2012-09-11T18:54:46.267
> 
> 标签：java, struts2, spring-security, spring-3, tiles2

我正在开发一个 Struts 2 + Tiles + Spring Security 3 应用程序，但我无法加载任何 css、图像和脚本。他们的资源都被部署到“发布”文件夹中。该应用程序工作正常，除了它不加载任何这些。

这是我的 Spring Security 映射。资源位于 /static/images 和 /static/css 等之下，而 jsp 页面位于 /WEB-INF/pages/.. WEB-INF 和 static 位于同一层次结构中。

```
<property name="securityMetadataSource">
        <security:filter-security-metadata-source>

            <security:intercept-url pattern="/admin/**"
                access="ROLE_ADMIN" />
            <security:intercept-url pattern="**/"
                access="ROLE_ANONYMOUS,ROLE_ADMIN" />                   

        </security:filter-security-metadata-source>
    </property> 
```

struts.xml 或tiles.xml 中没有对这些文件夹的任何引用，因为它们不是通过动作调用呈现的。

Web.xml 看起来像这样：

```
<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>
    /WEB-INF/classes/app-context.xml
    /WEB-INF/classes/security-context.xml
    </param-value>
</context-param>
<context-param>
    <param-name>org.apache.tiles.impl.BasicTilesContainer.DEFINITIONS_CONFIG</param-name>
    <param-value>/WEB-INF/classes/tiles/tiles.xml</param-value>
</context-param>

<!-- =======================================================  -->
<!-- FILTER.                                                  -->
<!-- =======================================================  -->
<!--Spring Security filter -->
<filter>
    <filter-name>springSecurityFilterChain</filter-name>
    <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
</filter>

<filter>
    <description>struts2</description>
    <display-name>struts2</display-name>
    <filter-name>struts2</filter-name>
    <filter-class>org.apache.struts2.dispatcher.FilterDispatcher</filter-class>
</filter>

<filter>
    <description>action2-cleanup</description>
    <display-name>action2-cleanup</display-name>
    <filter-name>action2-cleanup</filter-name>
    <filter-class>org.apache.struts2.dispatcher.ActionContextCleanUp</filter-class>
</filter>

 <filter-mapping>
    <filter-name>springSecurityFilterChain</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping>

<filter-mapping>
    <filter-name>struts2</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping>

<filter-mapping>
    <filter-name>action2-cleanup</filter-name>
    <url-pattern>/action2-cleanup</url-pattern>
</filter-mapping>

<filter-mapping>
    <filter-name>action2-cleanup</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping>
<!-- =======================================================  -->
<!-- Listeners                                                -->
<!-- =======================================================  -->
<listener>              
    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
</listener>
<!-- <listener>             
    <listener-class>org.apache.struts2.tiles.StrutsTilesListener</listener-class>

</listener> -->

<servlet>
<servlet-name>tiles</servlet-name>
<servlet-class>org.apache.tiles.web.startup.TilesServlet</servlet-class>

<load-on-startup>2</load-on-startup> 
```

我正在尝试通过其中任何一个加载图像，以查看它们是否加载：

```
<img src="<s:url value='./static/images/btn_add.gif' />"  />
<img src="<s:url value='/static/images/btn_add.gif' />"  />
<img src="../static/images/btn_add.gif"  />
<img src="../../static/images/btn_add.gif" />       

<s:submit action="item_add" type="image"                src="./static/images/btn_add.gif" /> 
```

这些都不起作用。我通过使用 firebug 调试尝试了各种其他 url，仍然没有。

有人可以向我解释我错过了什么吗？我使用 spring 3.0.5.Release 版本，然后尝试使用 3.0.3.Release 版本。都没有奏效。

没有错误。它只是不显示。是的，我确实清除了浏览器缓存，甚至尝试使用不同的浏览器。

**在您的反馈之后:: 编辑 1**

嗯..那stll没有这样做。

我在输出中看到这些：

```
2012-09-12 11:39:59,268 DEBUG [DefaultFilterInvocationSecurityMetadataSource.java:173] : Converted URL to lowercase, from: '/static/images/btn_add.gif'; to: '/static/images/btn_add.gif' 
```

2012-09-12 11:39:59,270 调试 [DefaultFilterInvocationSecurityMetadataSource.java:200]：候选人是：'/static/images/btn_add.gif'；模式是 /static/**；匹配=真 2012-09-12 11:39:59,271 调试 [AbstractSecurityInterceptor.java:191]：安全对象：FilterInvocation：URL：/static/images/btn_add.gif；属性：[ROLE_ANONYMOUS，ROLE_ADMIN] 2012-09-12 11:39:59,271 DEBUG [AbstractSecurityInterceptor.java:292]：先前已验证：org.springframework.security.authentication.AnonymousAuthenticationToken@52a05099：主体：匿名；凭证：[受保护]；已认证：真实；详细信息：org.springframework.security.web.authentication.WebAuthenticationDetails@380f4：RemoteIpAddress：0：0：0：0：0：0：0：1；会话ID：978365092A5784AEBC711B8F588029A3；授予权限：ROLE_ANONYMOUS 2012-09-12 11:39:59,272 DEBUG [AffirmativeBased。

什么是 http 命名空间？`<security:http pattern="/static/**" security="none" />`

这是我的安全 xml 命名空间：

```
<beans xmlns="http://www.springframework.org/schema/beans"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:security="http://www.springframework.org/schema/security"
xsi:schemaLocation="http://www.springframework.org/schema/beans
        http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
        http://www.springframework.org/schema/security
        http://www.springframework.org/schema/security/spring-security-3.0.xsd"> 
```

安全不允许“http”属性。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T18:59:59.533

由于您使用的是spring security，因此您应该确保对静态资产禁用安全性

```
<security:http pattern="/static/**" security="none" /> 
```

然后你应该能够使用正确呈现静态资源

```
<img src="<s:url value='/static/images/btn_add.gif' />"  /> 
```

**对您的第一次编辑的评论：**

`http`不是命名空间，`security`是。`<http>`使用元素 ( )配置 Web 安全服务`<security:http>`。 `security`是在spring xml配置文件中配置spring-security的命名空间，指的是`http://www.springframework.org/schema/security`一个具体的xsd `http://www.springframework.org/schema/security/spring-security-3.1.xsd`（for `Spring 3.1`）。

正如我们在您的日志中看到的那样，已正确考虑了过滤器，并且您的图像已与模式正确匹配`/static/**`并且已授予访问权限，因此应该对其进行渲染。

您可能想尝试 spring 3.0.x 元素的`filters="none"`属性，`http-intercept`因为当我阅读文档时，我不确定 ` 是否适用于 Spring 3.0.x，但仅适用于 3.1+。

尝试使用（有关详细信息，请参阅[此页面](http://static.springsource.org/spring-security/site/docs/3.0.x/reference/ns-config.html)）：

```
<http ...>
    <intercept-url pattern="/static/**" filters="none" />
</http> 
```

如果这不起作用，您可以使用 Web 开发工具检查您的浏览器（例如使用 Chrome）加载给定图像的错误是什么？404 未找到？403未经授权？还有什么？

# php - Wordpress：对列中的帖子进行排序的最佳方法

> ID：12376125
> 
> 赞同：0
> 
> 时间：2012-09-11T18:54:46.733
> 
> 标签：php, html, css, wordpress, grid

我正在尝试在 WordPress 中制作在线杂志。每个帖子都显示在不同的列中。第一栏的第一个是最新发布的，第二栏是倒数第二个，第三栏是倒数第三个，依此类推。最好的方法是如何做到这一点？我想防止帖子之间的任何间隙，所以它们完美地相互跟随，看起来不错。我已经尝试过 -moz-column 的东西，它工作正常，但是帖子不是按日期排序的，只是 CSS 发现它适合显示帖子的方式。有没有办法我可以做到这一点？

[你可以在这里查看我的博客的实时预览。](http://inmyownview.com/wordpress)

到目前为止：CSS

```
#wrapper #columns {
}
#wrapper #columns .col {
    width: 360px;
    background: red;
} 
```

PHP：

```
<div id="columns" class="clearfix">
    <?php 
        query_posts('posts_per_page=9' . '&orderby=date'); 
        while ( have_posts() ) : the_post(); 
    ?>
    <div class="col">
        <div class="reader-look">
            <a href="<?php the_permalink(); ?>"><h1><?php the_title(); ?></h1>
            <?php if ( has_post_thumbnail() ) {
                the_post_thumbnail();
            } 
            ?> 
            <div class="clearfix"><tag>Blogger Outfit For dagen</tag></div>
            </a>
        </div>
    </div>
    <?php 
        endwhile;
        // Reset Query
        wp_reset_query(); 
    ?>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T19:02:02.710

添加`float: left;`并`#wrapper #columns .col`添加此规则：

```
.col:nth-child(3n+1) {
    clear: left;
} 
```

# android - 从 ListView 中删除项目时出现 IndexOutofBound 错误

> ID：12376133
> 
> 赞同：1
> 
> 时间：2012-09-11T18:55:29.657
> 
> 标签：android, listview

我已经搜索了几乎所有与此主题相关的可能问题，但无法解决此问题。每当我尝试通过嵌入 ListView 项目的自定义删除按钮删除项目时，在删除几个项目后，它会给我 IndexOutOfBound 错误。我知道这个错误是由于列表在使用位置删除项目后无法自行刷新。这是我的代码：

```
MainActivity:

import java.util.ArrayList;
import java.util.List;

import android.os.Bundle;
import android.app.Activity;
import android.app.ListActivity;
import android.view.Menu;
import android.widget.ArrayAdapter;

public class MainActivity extends ListActivity 
{

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        //setContentView(R.layout.activity_main);

        ArrayAdapter<Model> adapter = new InteractiveArrayAdapter(this,getModel());
            //adapter.clear();
        setListAdapter(adapter);
    }

    private List<Model> getModel() {
        List<Model> list = new ArrayList<Model>();
        list.add(get("Linux"));
        list.add(get("Windows7"));
        list.add(get("Suse"));
        list.add(get("Eclipse"));
        list.add(get("Ubuntu"));
        list.add(get("Solaris"));
        list.add(get("Android"));
        list.add(get("iPhone"));
        // Initially select one of the items
        //list.get(1).setSelected(true);
        return list;
      }

    private Model get(String s)
    {
        return new Model(s);
    }

} 
```

InteractiveArrayAdapter.java 的代码：

```
public class InteractiveArrayAdapter extends ArrayAdapter<Model> {

    private final List<Model> list;
    private final Activity context;
    private ListView lv;
    private MainActivity ma;

    public InteractiveArrayAdapter(Activity context, List<Model> list)
    {
        super(context, R.layout.rowbuttonlayout, list);
        this.context = context;
        this.list = list;
    }

    static class ViewHolder
    {
        protected TextView text;
        protected Button btn;
    }

    @Override
    public View getView(final int position, View convertView, ViewGroup parent) {
        View view = null;

        if (convertView == null) 
        {
            LayoutInflater inflator = context.getLayoutInflater();
            view = inflator.inflate(R.layout.rowbuttonlayout, null);

            final ViewHolder viewHolder = new ViewHolder();

            viewHolder.text = (TextView) view.findViewById(R.id.label);
            viewHolder.btn = (Button) view.findViewById(R.id.button1);

            viewHolder.btn.setOnClickListener(new OnClickListener()
            {
                public void onClick(View v)
                {

                        list.remove(position);
                        notifyDataSetChanged();  

                }

            });

            view.setTag(viewHolder);
            viewHolder.btn.setTag(list.get(position));
        } //when convertView = null
        else 
        {
            view = convertView;
            ((ViewHolder) view.getTag()).btn.setTag(list.get(position));
            //((ViewHolder) view.getTag()).text.setTag(list.get(position));
        }
        ViewHolder holder = (ViewHolder) view.getTag();
        holder.text.setText(list.get(position).getName());
        //holder.btn.setChecked(list.get(position).isSelected());
        return view;
    }

    @Override
    public int getCount()
    {
        return list.size();
    }

    @Override
    public long getItemId(int position) {
        return position;
    }

    @Override
    public Model getItem(int position) {
        return (null==list)? null: list.get(position);
    }

} 
```

模型类代码：

```
public class Model 
{
    private String name;

    public Model(String name) {
    this.name = name;

    }

    public String getName() {
    return name;
    }

    public void setName(String name) {
    this.name = name;
    }
} 
```

任何有关这方面的帮助都会很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T19:14:59.927

正如我所读到的那样，您正在使用 OnClickListener 中使用的最终位置来膨胀您的视图

```
public View getView(final int position, View convertView, ViewGroup parent) 
```

现在您通过删除一些项目来更改您的列表，尽管您的列表也声明为 final 它可以更改，因为它是可变的

```
private final List<Model> list; 
```

所以你的列表正在改变，你的位置在足够的删除后指向列表之外的某个地方

```
pseudocode
(1,2,3,4,5,6) with position = 4
delete(6)
delete(1)
delete(2)
results in (2,4,5)
now position 4 is pointing somewhere outside 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T19:17:14.197

取消注释以下行

```
 //((ViewHolder) view.getTag()).text.setTag(list.get(position)); 
```

将您的删除语句替换为以下语句。

```
 list.remove(viewHolder.btn.getTag()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T19:26:15.620

使用以下代码更改您的适配器

```
public class InteractiveArrayAdapter extends ArrayAdapter<Model> {

  private final List<Model> list;
  private final Activity context; 
  private MainActivity ma;

 LayoutInflater inflator;
  public InteractiveArrayAdapter(Activity context, List<Model> list)
  {
    super(context, R.layout.rowbuttonlayout, list);
    this.context = context;
    inflator =  context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);;
  }

  static class ViewHolder
  {
    protected TextView text;
    protected Button btn;
  }

  @Override
  public View getView(final int position, View convertView, ViewGroup parent) {
    ViewHolder viewHolder;
    if (convertView == null) 
    {    
      convertView = inflator.inflate(R.layout.rowbuttonlayout, null);
      viewHolder = new ViewHolder();

      viewHolder.text = (TextView) view.findViewById(R.id.label);
      viewHolder.btn = (Button) view.findViewById(R.id.button1);     
      convertView.setTag(viewHolder);
      }

    else 
    {
        viewHolder = (ViewHolder)convertView.getTag();
     }
    viewHolder.btn.setOnClickListener(new OnClickListener()
      {
            public void onClick(View v)
            {       
            list.remove(position);
                    notifyDataSetChanged();  

            }

      });

   viewHolder.text.setText(list.get(position).getName());
   return convertView;
  }

  @Override
  public int getCount()
  {
      return list.size();
  }

  @Override
  public long getItemId(int position) {
        return position;
    }

  @Override
  public Object getItem(int position) {
      return list.get(position);
  } 
```

# oauth - 将 OAuth 令牌从设备传递到服务器：形式不佳？

> ID：12376136
> 
> 赞同：2
> 
> 时间：2012-09-11T18:55:41.143
> 
> 标签：oauth, facebook-oauth

我想做与这里描述的相反的事情：[我可以在客户端使用 oauth 令牌吗？](https://stackoverflow.com/questions/6966849/can-i-use-oauth-token-at-client-side)

我正在构建一个对超链接执行 Facebook Graph API 查找的服务。碰巧 Facebook Graph API 总是需要 OAuth 令牌来查找任何内容。

让客户将他们的 OAuth 令牌传递给我的服务有什么问题，以便我可以代表他们点击 Facebook Graph API？（为此，我与客户端的连接将通过 HTTPS。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-11-24T14:36:10.787

Google 不建议这样做，但这里描述了混合[方法](https://developers.google.com/+/web/signin/server-side-flow)。

> 要利用 Google+ 登录的所有优势，您必须使用混合服务器端流程，其中用户使用 JavaScript API 客户端在客户端授权您的应用，然后您将特殊的一次性授权代码发送到您的服务器. 您的服务器交换此一次性使用代码以从 Google 获取其自己的访问和刷新令牌，以便服务器能够进行自己的 API 调用，这可以在用户离线时完成。与纯服务器端流程和向您的服务器发送访问令牌相比，这种一次性代码流具有安全优势。

# jquery - JQuery + Fancybox + Iframe + IE9 = *boom*？

> ID：12376138
> 
> 赞同：0
> 
> 时间：2012-09-11T18:55:51.917
> 
> 标签：jquery, internet-explorer-9, fancybox

正如标题中所见：

我尝试通过fancybox弹出一个iframe，并在那一刻设置src，在IE9中（仅限！）我收到很多JS错误（从jquery.js中的“Array undefined”开始）

可以在这里看到失败的页面：http: [//ib.atm.co.at/a313/Foo.aspx](http://ib.atm.co.at/a313/Foo.aspx)

在使用 IE9 时，只需向下滚动并单击“in den Warenkorb”（= 添加到购物车）。

有任何想法吗？

# wpf - 在屏幕上发生移动之前拦截 WPF 窗口中的移动事件？

> ID：12376141
> 
> 赞同：5
> 
> 时间：2012-09-11T18:56:07.093
> 
> 标签：wpf

我有一个应用程序，我在 WPF 中创建一个用户可以拖动的窗口。我想限制它，这样它就不会越过父窗口的主菜单。如果我处理*WindowLocationChanged*事件，它会在更改已经发生**后触发，所以我唯一能做的就是将窗口强制回到其他位置，这会产生不良的视觉效果。**

**在移动实际发生之前**我可以处理任何事件，以便我可以拦截窗口并强制它保持在一定范围内？一些商业 WPF 库支持在屏幕上实际发生移动之前触发的*OnMoving事件。*本机 WPF 中是否有类似的东西（如果可能，留在托管代码环境中）？

或者，有没有办法使用依赖属性来设置 max 或 min x,y 值？（注意，我正在移动它，而不是调整它的大小）

提前致谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-11T22:15:24.367

这个例子是一个演示，展示了如何防止窗口被移动到它的起始 X/Y 位置以下......它应该给你一个你想做的事情的起点。

请注意，调整大小时可能会改变顶部和左侧位置，这就是为什么要处理 WM_SIZING 消息以确保调整大小不会这样做。

如果您不需要，那么只需取出 WM_SIZING 案例。

```
 <Window x:Class="WpfApplication12.MainWindow"
            xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
            xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
            Title="MainWindow" Height="350" Width="525" Loaded="Window_Loaded">
        <Grid>

        </Grid>
    </Window> 
```

* * *

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Data;
using System.Windows.Documents;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Imaging;
using System.Windows.Navigation;
using System.Windows.Shapes;
using System.Windows.Interop;
using System.Runtime.InteropServices;

namespace WpfApplication12
{
    [StructLayout(LayoutKind.Sequential)]
    public struct WIN32Rectangle
    {
        public int Left;
        public int Top;
        public int Right;
        public int Bottom;
    }

    /// <summary>
    /// Interaction logic for MainWindow.xaml
    /// </summary>
    public partial class MainWindow : Window
    {
        const int WM_SIZING = 0x0214;
        const int WM_MOVING = 0x0216;

        private Point InitialWindowLocation;

        public MainWindow()
        {
            InitializeComponent();
        }

        private void Window_Loaded(object sender, RoutedEventArgs e)
        {
            WindowInteropHelper helper = new WindowInteropHelper(this);
            HwndSource.FromHwnd(helper.Handle).AddHook(HwndMessageHook);

            InitialWindowLocation = new Point(this.Left, this.Top);
        }

        private IntPtr HwndMessageHook(IntPtr hWnd, int msg, IntPtr wParam, IntPtr lParam, ref bool bHandled)
        {
            switch (msg)
            {
               // You may prefer to check the specific size action being done
               //
               //case WM_SIZING:
               //     {
               //         case (wParam)
               //         {
               //             case WMSZ_LEFT:
               //             {

               //             }
               //             break;

               //             case WSSZ_TOP:
               //             {
               //             }
               //             break;

               //             case WSSZ_TOPLEFT:
               //             {
               //             }
               //             break;
               //         }
               //     }
               //     break;

                case WM_SIZING:
                case WM_MOVING:
                    {
                        WIN32Rectangle rectangle = (WIN32Rectangle)Marshal.PtrToStructure(lParam, typeof(WIN32Rectangle));

                        if (rectangle.Left < this.InitialWindowLocation.X)
                        {
                            rectangle.Left = (int)this.InitialWindowLocation.X;
                            rectangle.Right = (int)this.Left + (int)this.Width;

                            bHandled = true;
                        }

                        if (rectangle.Top < this.InitialWindowLocation.Y)
                        {
                            rectangle.Top = (int)this.InitialWindowLocation.Y;
                            rectangle.Bottom = (int)this.Top + (int)this.Height;

                            bHandled = true;
                        }

                        if (bHandled)
                        {
                            Marshal.StructureToPtr(rectangle, lParam, true);
                        }
                    }
                    break;

            }
            return IntPtr.Zero;
        }
    }
} 
```

# javascript - “工具提示” jQuery 插件中断

> ID：12376147
> 
> 赞同：1
> 
> 时间：2012-09-11T18:56:21.477
> 
> 标签：javascript, jquery, html, css

我正在开发一个非常轻量级的“工具提示”jQuery 插件。下面是代码：

```
(function( $ ) {
  $.fn.tooltip = function() {

    return this.each(function(){

        var target = $(this);

        target.on("mouseover", function(event){
            var tooltip = $(document.createElement("div"));
            tooltip
                .html(target.attr("tooltip-text"))
                .addClass("tooltip")
                .css({
                     "top" : event.pageY, 
                     "left":event.pageX 
                     })
                .fadeIn(300);                               
        }); 

    });

  };
})( jQuery ); 
```

我像这样应用它：

```
<script>
    $("div.product").tooltip();
</script> 
```

这个想法是在用户将 DIV 悬停在光标旁边时显示工具提示。但是，当我将鼠标悬停在这样的 DIV（类“产品”）时，脚本会在*.addClass("tooltip")*行崩溃：

***未捕获的类型错误：对象没有方法“addClass”***

我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T19:18:16.890

这是因为您正在分配属性工具提示文本：

```
 .html(target.attr("tooltip-text")) 
```

该属性是未定义的，因此它会破坏 jQuery 事件的链接。尝试这样做：

```
 .html(target.attr("tooltip-text") || "") 
```

您也不需要在 window.onload 中执行，将其放入准备好的标准文档中就可以了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T19:04:14.610

不知道为什么但使用

> .attr("style", tooltip.attr("style") + "tooltip")

而不是 .addClass。

希望这可以帮助。

# android - 将Android“Gridlayout库项目”直接导入我的项目

> ID：12376151
> 
> 赞同：0
> 
> 时间：2012-09-11T18:56:25.603
> 
> 标签：android, library-project, android-gridlayout

我已经了解了如何为 Android 4.0 设备使用 Gridlayout。我下载了支持库，将其作为库项目导入，然后在我自己的项目中将其作为库引用。但我想直接在我自己的项目中拥有这个库。我已经将 libs 文件夹的文件复制到了我自己的 libs 文件夹中。我还将 attrs.xml 和 dimens.xml 复制到我自己的项目中。然后我将两个 jar 文件添加到我的构建路径中。Eclipse 本身没有给我任何错误，但是由于一些“找不到等”问题，Android 布局编辑器无法再渲染我的布局（我不是在办公室写的，所以很遗憾我不能发布确切的错误信息，但我明天会做）。

我真的需要一个项目中的一切。我忘了什么吗？甚至可能吗？因为我没有找到任何“网格布局支持库示例”，其中有人将所有内容合并到一个项目中。

我希望你能理解我的问题，在此先感谢。

**编辑** 这是我的布局编辑器所说的：

> com.android.layoutlib.bridge.MockView 无法转换为 android.view.ViewGroup 异常详细信息记录在 Window > Show View > Error Log 无法实例化以下类： - android.support.v7.widget.GridLayout（打开类，显示错误日志）有关详细信息，请参阅错误日志（窗口 > 显示视图）。

这里是我的错误日志消息：

> general.xml：com.android.layoutlib.bridge.MockView 无法转换为 android.view.ViewGroup
> 
> android.support.v7.widget.GridLayout 无法实例化。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T19:06:46.370

尝试这个：

`right click`您的`project->properties->java build path->order`并导出所有选项。

我希望这能解决你的问题。

# actionscript-3 - Flash SharedObject 阅读器

> ID：12376158
> 
> 赞同：0
> 
> 时间：2012-09-11T18:57:01.697
> 
> 标签：actionscript-3, flash, flashdevelop

有人可以推荐一个好的 Flash SharedObject 阅读器吗？FlashDevelop 中包含一个，但它通常会返回类似`"Invalid FileSize signature. Received X expecting Y"`.

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T19:58:36.670

我曾经调试过 Flash 应用程序的最佳实践是 Flash Firebug。Pro 一年的费用为 10 美元，但完全值得。它具有帮助您调试 Flash 应用程序的一切，包括您正在寻找的 SharedObject 阅读器。

PS 你必须为此插件安装[Mozilla Firefox](http://www.mozilla.org/en-US/products/download.html?product=firefox-15.0.1)和 Firebug（也是一个插件）。这两个都可以通过搜索 Firefox 的内置插件来获得。

# c# - 如何使用 C# Winfows Form Application 以编程方式在用户的 PC 上安装新字体？

> ID：12376159
> 
> 赞同：1
> 
> 时间：2012-09-11T18:57:06.100
> 
> 标签：c#, .net

如何使用 C# Windows 窗体应用程序以编程方式在用户的 PC 上安装新字体，以便我可以在此应用程序包含的报告中使用此字体？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T19:00:19.500

您可以尝试使用此代码库`AddFontResource`

```
[DllImport("gdi32.dll", EntryPoint="AddFontResourceW", SetLastError=true)]
public static extern int AddFontResource([In][MarshalAs(UnmanagedType.LPWStr)]
                                         string lpFileName); 
```

代码

```
 //Install the font.
      result = AddFontResource(@"C:\MY_FONT_LOCATION\MY_NEW_FONT.TTF");
      error = Marshal.GetLastWin32Error();
      if (error != 0)
      {
        Console.WriteLine(new Win32Exception(error).Message);
      }
      else
      {
        Console.WriteLine((result == 0) ? "Font is already installed." :
                                          "Font installed successfully.");
      } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-12T15:28:35.270

根据[AddFontResource()的文档](http://msdn.microsoft.com/en-us/library/windows/desktop/dd183326(v=vs.85).aspx)

> 此函数仅为当前会话安装字体。当系统重新启动时，字体将不存在。要在重新启动系统后安装字体，必须在注册表中列出字体。

所以我发现最好的选择是将字体复制到windows字体目录

```
File.Copy("MyNewFont.ttf",
    Path.Combine(Environment.GetFolderPath(SpecialFolder.Windows),
        "Fonts", "MyNewFont.ttf")); 
```

然后在注册表中添加相应的条目，比如

```
Microsoft.Win32.RegistryKey key = Microsoft.Win32.Registry.LocalMachine.CreateSubKey(@"SOFTWARE\Microsoft\Windows NT\CurrentVersion\Fonts");
                    key.SetValue("My Font Description", "fontname.tff");
                    key.Close(); 
```

# ruby-on-rails-3 - Rails 自定义 eventbrite omniauth 回调 url

> ID：12376162
> 
> 赞同：0
> 
> 时间：2012-09-11T18:57:11.967
> 
> 标签：ruby-on-rails-3, omniauth, eventbrite

我正在使用**eventbrite omniauth**对用户进行身份验证。参考[https://github.com/k504866430/omniauth-eventbrite](https://github.com/k504866430/omniauth-eventbrite)我包含了 gem 并创建了一个文件*omniauth.rb*文件为：

```
Rails.application.config.middleware.use OmniAuth::Builder do
  provider :eventbrite, ENV['EVENTBRITE_CLIENT_ID'], ENV['EVENTBRITE_CLIENT_SECRET']
end 
```

在每个事件的显示页面上，都有指向**使用 eventbrite 进行身份验证**的链接。

*事件/24*

```
 = link_to "Authenticate with Eventbrite", "/auth/eventbrite" 
```

当用户允许访问时，我希望回调 url 重定向到同一事件页面。

因此我需要知道如何在 params 中传递**event_id**以便应用程序可以返回到相同的事件页面以及应该如何在*routes.rb*文件中定义**回调 url**

 ** * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T21:49:35.723

Eventbrite 的[OAuth2.0 实现](http://developer.eventbrite.com/doc/authentication/oauth2/)不允许您将 OAuth 回调 URL 定义为查询字符串参数。此 callback_url 只能通过配置您的[Eventbrite 应用程序键](http://www.eventbrite.com/api/key/)的 'redirect_uri' 设置来定义。

也不支持传递自定义查询字符串参数（例如 event_id）。此外，在用户回到您的网站后，您还需要做[一些后续工作](https://stackoverflow.com/questions/12365331/eventbrite-authentication-using-oauth2-0-rails)。

如果您需要在用户[返回您的网站后](http://developer.eventbrite.com/doc/workflows/#authorization)重定向用户，我会考虑在用户的浏览器会话或其他数据存储中存储“redirect_url”（可能还有 event_id）。
设置单个登录页面（以匹配您的 redirect_uri）应该允许您在将用户发送到您选择的 url 之前完成 OAuth2.0 握手。*

# select - 未选择时，JQuery Mobile 自定义选择菜单可见

> ID：12376168
> 
> 赞同：3
> 
> 时间：2012-09-11T18:57:38.053
> 
> 标签：select, jquery-mobile, drop-down-menu, placeholder

我遇到了与这个问题相同的问题：

[jQuery Mobile 1.1.1 自定义选择菜单 - 占位符文本不可见](https://stackoverflow.com/questions/11476484/jquery-mobile-1-1-1-custom-select-menu-placeholder-text-not-visible)

上面的问题通过告诉我使用“ [http://code.jquery.com/mobile/latest/jquery.mobile.min.js](http://code.jquery.com/mobile/latest/jquery.mobile.min.js) ”解决了我的问题。这解决了我原来的问题，但又引起了另一个问题。

选择菜单始终显示，并且不像以前那样以选择项为中心。

后： ![在此处输入图像描述](../Images/2d9ff49b044c352b2262eb8d747a5f2a.png)

有谁知道如何解决这一问题。如果这是我遇到的唯一问题，我想我也许可以隐藏和显示菜单，但即使选择它也不在正确的位置。它应该在水平和垂直的选择元素上居中（如果有足够的垂直空间）。

这是由最新版本的 JQuery 引起的，但我也无法下载 1.1.1，因为它会导致我遇到的原始问题已在另一个问题中解决。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T13:28:58.220

看起来菜单相对于其余内容显示 - 尝试在此处添加 css 行

```
position:absolute; 
```

关于菜单结构 - 另一个测试这个的好方法是在谷歌浏览器中加载您的网站并使用萤火虫查看为什么菜单定位低于“点击点”。乍一看，菜单似乎是相对的。

# database - 我如何使用从数据库中循环获取值的复选框？

> ID：12376170
> 
> 赞同：1
> 
> 时间：2012-09-11T18:57:42.790
> 
> 标签：database, loops, checkbox, lua

我在数据库中有一个表。在该表中，行数未知。我想放置复选框，但复选框的数量应该等于行数。因此我试图在while循环中做到这一点。我找到了表中存在的行数。它是rowNumber。然后，我做了一个while循环。此时，出现了串行故障。因为当我点击任何复选框时，下面的行被最后一个 m 值调用。

```
 cbox[m] = checkBox.new(checkX, txtY, sendRows[m], col, 
```

因为退出 while 循环后，m 等于 rowNumber。并且当单击任何复选框时，它不知道单击了哪一行，因为 m = rowNumber. 我尝试了很多事情，但我做不到。我应该怎么办 ？？我应该放弃使用循环吗？如果我放弃使用它怎么办？

这是我无法修复的代码

```
local m = 1
while(m<rowNumber)

cbox[m] = checkBox.new(checkX, txtY, sendRows[m], col,
    function(this)
        local state = this:getCheck()
        if state then 
            print(m .. " checked")
            gonder[m] = 1
        else 
            print(m  .. " does not checked")
            gonder[m] = 0
        end
    end
)
screen:addChild(cbox[m])
cbox[m]:setCheck(settings.getMusicState())
txtY = txtY + gap
print ("gonder[m] = " .. gonder[m])
end 
```

如果代码如下所示，则运行正常：

```
cbox[1] = checkBox.new(checkX, txtY, sendRows[1], col,
    function(this)
        local state = this:getCheck()
        if state then 
            print(1.. " checked")
            gonder[1] = 1
        else 
            print(1  .. " does not checked")
            gonder[1] = 0
        end
    end
)
screen:addChild(cbox[1])
cbox[1]:setCheck(settings.getMusicState())
txtY = txtY + gap

cbox[2] = checkBox.new(checkX, txtY, sendRows[2], col,
    function(this)
        local state = this:getCheck()
        if state then 
            print(2.. " checked")
            gonder[2] = 1
        else 
            print(2  .. " does not checked")
            gonder[2] = 0
        end
    end
)
screen:addChild(cbox[2])
cbox[2]:setCheck(settings.getMusicState())
txtY = txtY + gap
.
.
.
. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T13:26:24.897

更改 while 的内部后解决，如下所示：

```
while( m<rowNumber + 1)
        do
            cbox[m] = checkBox.new(checkX, txtY, sendRows[m], col,
                function(this)
                end
            )
            screen:addChild(cbox[m])
                txtY = txtY + gap
                m = m + 1
        end 
```

重要的一点就在这里。在这里，我们发送我们想要的：

```
submitt:addEventListener("click",
        function()
            local mydata={}
            local i=1
            while (i<rowNumber+1) do
                mydata[3*i-2]=cbox[i].checked--1\. Holds whether it is true or false
                mydata[3*i-1]=sendRows2[i]
                mydata[3*i] = sendURL[i]
                i=i+1
            end
            sceneManager:changeScene("results", 1, SceneManager.flipWithFade, easing.outBack,mydata)
            stage:removeChild(submitt)--after clicked , the button disappears
        end) 
```

# sql - 产品关系所需的 Sql Query 帮助

> ID：12376171
> 
> 赞同：0
> 
> 时间：2012-09-11T18:57:47.250
> 
> 标签：sql, sql-server, sql-server-2008

我有一个包含以下信息的产品表。

```
ID ProductId 名称 OtherData

1 0 A 数据1
2 0 B 数据2
3 1 A1 空
4 1 A2 空

```

我需要详细 ProductId 的所有数据都是与 ID 列的关系。

我需要如下结果

```
ID ProductId 名称 OtherData

1 0 A 数据1
2 0 B 数据2
3 1 A1 数据1
4 1 A2 数据1

```

我应该使用什么样的联接或查询？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T19:01:51.353

```
SELECT s.ID, s.ProductId, s.Name, 
  OtherData = COALESCE(s.OtherData, r.OtherData)
FROM dbo.Products AS s
LEFT OUTER JOIN dbo.Products AS r
ON s.ProductId = r.ID; 
```

# ios - 应用程序在后台时的通知；

> ID：12376172
> 
> 赞同：0
> 
> 时间：2012-09-11T18:57:51.260
> 
> 标签：ios, notifications

我已经

```
- (void)application:(UIApplication *)application didReceiveRemoteNotification:(NSDictionary *)userInfo
{
    if ( application.applicationState == UIApplicationStateActive )
        // app was already in the foreground
    else
        // app was just brought from background to foreground
    ...
} 
```

现在有可能我在通知到达时执行一些操作，将应用程序保持在后台；收到通知时，我不想将我的应用程序置于前台；我想要的是当通知到达时，我只是设置了一些标志和（应用程序仍在后台），当用户自己打开应用程序时，他/她可以以某种优雅的方式查看消息；摘要：我不想在通知到达时将应用程序置于前台，但想在我的代码中执行一些操作，将应用程序保持在后台；

谢谢;

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T19:01:09.253

你会想要使用

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:    (NSDictionary *)launchOptions 
```

由于您的应用程序在后台，它不会知道有关传入通知的任何信息。通知由 iOS 处理。

但是，当您的应用由于用户滑动/点击通知而打开时，您的应用将获得上述方法中传递的**launchOptions**。如果用户直接打开应用程序（点击应用程序图标），则**launchOptions**将为空。有关更多详细信息，请参阅[UIApplicationDelegate 协议参考](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIApplicationDelegate_Protocol/Reference/Reference.html)。

要检索远程通知有效负载，您可以执行以下操作：

```
[launchOptions objectForKey:UIApplicationLaunchOptionsRemoteNotificationKey] 
```

对于本地通知有效负载，您可以执行以下操作：

```
[launchOptions objectForKey:UIApplicationLaunchOptionsLocalNotificationKey] 
```

# javascript - 使用 JavaScript 自动提交表单

> ID：12376173
> 
> 赞同：26
> 
> 时间：2012-09-11T18:57:52.653
> 
> 标签：javascript, forms

```
<form name="myForm" id="myForm" action="test.php" method="POST">
  <p>
  <input name="test" value="test" />
  </p>
  <p>
    <input type="submit" name="submit" value="Submit" />
  </p>
</form>

    <script>

    var auto_refresh = setInterval(
    function()
    {
    submitform();
    }, 10000);

    function submitform()
    {
      alert('test');
      document.myForm.submit();
    }
    </script> 
```

一旦登陆页面，我尝试每***10 秒自动提交一次表单时遇到问题。***表单名称是 myForm `action="test.php"`。我收到`'test'`消息，但页面未提交表单。

除了在页面加载时自动加载功能之外的任何解决方案？

**修复：**从提交按钮中删除 ( `name="submit"`) 并且运行顺利。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-09-11T19:05:14.143

**您需要指定一个框架，一个目标，否则您的脚本将在第一次提交时消失！**

更改`document.myForm`为`document.forms["myForm"]`：

```
<form name="myForm" id="myForm" target="_myFrame" action="test.php" method="POST">
    <p>
        <input name="test" value="test" />
    </p>
    <p>
        <input type="submit" value="Submit" />
    </p>
</form>

<script type="text/javascript">
    window.onload=function(){
        var auto = setTimeout(function(){ autoRefresh(); }, 100);

        function submitform(){
          alert('test');
          document.forms["myForm"].submit();
        }

        function autoRefresh(){
           clearTimeout(auto);
           auto = setTimeout(function(){ submitform(); autoRefresh(); }, 10000);
        }
    }
</script> 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-09-11T19:11:21.027

尝试使用`document.getElementById("myForm")`而不是 document.myForm。

```
<script>
var auto_refresh = setInterval(function() { submitform(); }, 10000);

function submitform()
{
  alert('test');
  document.getElementById("myForm").submit();
}
</script> 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-10-08T10:51:48.593

**延迟自动提交**的简单解决方案：

```
<body onload="setTimeout(function() { document.frm1.submit() }, 5000)">
   <form action="https://www.google.com" name="frm1">
      <input type="hidden" name="q" value="Hello world" />
   </form>
</body> 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2016-05-18T15:36:32.463

这个解决方案对我有用：

```
<body onload="setTimeout(function() { document.myform.submit() }, 5000)">
   <form action=TripRecorder name="myform">
      <textarea id="result1"  name="res1" value="str1" cols="20" rows="1" ></textarea> <br> <br/>
      <textarea id="result2" name="res2" value="str2" cols="20" rows="1" ></textarea>
   </form>
</body> 
```

* * *

## 回答 #5

> 赞同：-6
> 
> 时间：2015-04-16T08:20:18.557

试试这个，

```
HtmlElement head = _windowManager.ActiveBrowser.Document.GetElementsByTagName("head")[0];
HtmlElement scriptEl = _windowManager.ActiveBrowser.Document.CreateElement("script");
IHTMLScriptElement element = (IHTMLScriptElement)scriptEl.DomElement;
element.text = "window.onload = function() { document.forms[0].submit(); }";
head.AppendChild(scriptEl);
strAdditionalHeader = "";
_windowManager.ActiveBrowser.Document.InvokeScript("webBrowserControl"); 
```

# python - 与 django 注释中奇怪的重定向参数混淆（默认应用程序）

> ID：12376180
> 
> 赞同：0
> 
> 时间：2012-09-11T18:58:07.910
> 
> 标签：python, django, url, get

我只是对 django 评论中的一个奇怪的属性感到好奇。当发表评论后（在/comments/post/），django 将重定向到 ?c="comment_pk"。来自 django 的评论库：

```
"""
Handle the "where should I go next?" part of comment views.

The next value could be a kwarg to the function (``default``), or a
``?next=...`` GET arg, or the URL of a given view (``default_view``). See
the view modules for examples.

Returns an ``HttpResponseRedirect``.
"""
next = data.get("next", default)
if next is None:
    next = urlresolvers.reverse(default_view)
if get_kwargs:
    if '#' in next:
        tmp = next.rsplit('#', 1)
        next = tmp[0]
        anchor = '#' + tmp[1]
    else:
        anchor = ''

    joiner = ('?' in next) and '&' or '?'
    next += joiner + urllib.urlencode(get_kwargs) + anchor
return HttpResponseRedirect(next) 
```

我只是好奇为什么 django 的制造商决定拥有这个。只是重定向回同一页面有什么问题？是否真的需要评论 pk 参数？在我看来不是。

**此外，当我尝试将 httpresponse 修改为 '' 空字符串的值时，由于某些init**期望 2 个参数错误，它不会让我这样做。如果这 ?c=pk 真的不需要，我怎样才能摆脱这个自动重定向参数？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T07:37:15.243

我一直在使用评论框架来获得 facebook 风格的评论，它会重定向到同一页面，如下所示。注意将表单重定向到同一页面的方式：

`<input type="hidden" name="next" value="/your/redirect/url"/>`

```
{% get_comment_form for update as form %}

                                    <div class="commentForm">

                                      <form action="/comments/post/" method="post">
                                        {% csrf_token %}
                                         <textarea class="commentBox" id="id_comment" rows="10" cols="40" name="comment"></textarea>

                                        <input id="id_name" type="hidden" name="name" value="{{user.username}}" maxlength="50"/>
                                        <input type="hidden" name="email" id="id_email" value="{{user.email}}"/>
                                        <input type="hidden" name="url" id="id_url" value=""/>
                                        <input type="hidden" name="honeypot" id="id_honeypot" value=""/>
                                        <input type="hidden" name="next" value="/your/redirect/url/"/>

                                            {% for hidden in form.hidden_fields %}
                                              {{hidden}}
                                            {% endfor %}

                                        <button class="btn comment-btn" type="submit" name="submit"> Comment</button>

                                    </form> 
```

# python - 我应该“在安装后将 .py 文件编译为字节码”吗？

> ID：12376188
> 
> 赞同：31
> 
> 时间：2012-09-11T18:58:50.377
> 
> 标签：python, python-3.x, installation

我在 Win7 机器上安装 Python 3.2 32bit，有以下选项：

> 安装后将 .py 文件编译为字节码

我应该不选中该选项还是推荐编译？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-09-11T19:08:35.417

由于无论编译多少次，字节码都不太可能改变，解释器可以利用小的加速增益。除非您的硬盘空间*非常不足，否则您应该选择此选项。*

# windows-8 - 如何在 Windows 8 中获得清晰的搜索结果建议图像？

> ID：12376189
> 
> 赞同：0
> 
> 时间：2012-09-11T18:58:56.937
> 
> 标签：windows-8, windows-runtime

我在 Windows 8 搜索中使用 40 x 40 大小的图像作为搜索结果建议图像。关于我能找到的图像格式的唯一建议是为其设置正确的尺寸（[http://msdn.microsoft.com/en-us/library/windows/apps/Hh700542.aspx：“Windows](http://msdn.microsoft.com/en-us/library/windows/apps/Hh700542.aspx)将缩放或裁剪得更小或更大图片”）。

但是，正确大小的图像会令人讨厌地模糊。无论我使用 jpg 还是 png，都会发生同样的事情。原图看起来不错，但是搜索框里的结果建议很丑，还是一样大！Windows 是否以某种方式转换图像，我怎样才能让图像保持清晰？

我没有注意到类似照片的图像模糊，但这张图像包含清晰的线条和区域，容易受到任何缩放等的影响。

**9 月 24 日更新：**

这是我试图找出问题时使用的测试图像。我还创建了不同的比例版本，但在我的情况下，使用了 100% 版本（这就是“100”标记的原因）——正如我所想的那样，因为生成的图像确实是 40x40。如您所见，生成的图像（右）与原始图像（左）大小相同，但模糊。

![原始测试图像](../Images/049028d7be833d5206b19b1256625fb6.png) ![Windows 8 搜索中的模糊图像](../Images/8f0e77b877518cd5fd8668e2eab9f55a.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T14:07:11.637

[尝试回答评论中提到的相关问题，所以我也在这里发布。]

听起来这可能与图像的自动缩放有关。Windows 将根据像素密度自动放大/缩小，您可以通过使用基于矢量的图像或对于位图图像提供特定于比例的版本来帮助实现良好的缩放。

例如，要将标记中引用的图像缩放为“AppLogo.jpg”，您需要包含以下图像：

*   AppLogo.scale-100.jpg
*   AppLogo.scale-140.jpg
*   AppLogo.scale-180.jpg

您也可以使用文件夹，例如“\scale-140\AppLogo.jpg”。

对于搜索结果图像，100% 的图像是 40x40 像素版本，140 是 56x56，180 是 72x72。只需将图像引用为“AppLogo.jpg”，就会自动使用相应的版本。（您还可以检测比例`DisplayProperties.ResolutionScale`并手动选择图像。）

这是几篇带有更多示例/详细信息的文章：

*   [“缩放到像素密度的指南”](http://msdn.microsoft.com/en-us/library/windows/apps/hh465362.aspx)
*   [“快速入门：使用文件或图像资源”](http://msdn.microsoft.com/en-us/library/windows/apps/hh465262.aspx)

[这里](http://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/9458fec7-3426-433d-b633-12c6b8ded823)和[这里](http://social.msdn.microsoft.com/Forums/en-US/winappswithhtml5/thread/610718b0-69e8-42d2-a1fe-3c5be5b6515f)的论坛中也有一些缩放讨论（一般性，不是特定于搜索）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T18:12:28.767

这种情况不会经常发生，但在这种情况下，正确的解决方案似乎只是等待；）我没有对我的解决方案中的结果建议图像做任何新的事情，今天我意识到图像变得清晰。可能由任何 Windows 更新修复。

![在此处输入图像描述](../Images/08265f6f7aae653fc98677640c64ab2b.png)

# javascript - onChange 不足以触发来自 Dojo Combobox 的查询

> ID：12376192
> 
> 赞同：0
> 
> 时间：2012-09-11T18:59:07.470
> 
> 标签：javascript, combobox, dojo, onchange, arcgis

这与这篇文章密切相关： [HTML <select> 是否有 onSelect 事件或等效事件？](https://stackoverflow.com/questions/647282/is-there-an-onselect-event-or-equivalent-for-html-select)

...但专门针对 Dojo ComboBox..（我正在使用带有 ArcGIS JSAPI 的 Dojo）。我有三个组合框，它们使用由下拉列表中的选择触发的查询来填充后继者。我的问题是，如果第二个组合框选择保持不变，则不会触发查询。我尝试使用 onblur 和其他几个事件而不是 onchange，并尝试在 JS 中重置选择的值，但都没有奏效。该值被重置，但组合框仍然像存在相同的值一样，因此 onchange 不起作用。我尝试了上面链接中的许多方法，但没有一个对我有用。据我所知，我的组合框不会生成任何 selectedIndex。有什么建议么？谢谢，J

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T11:22:07.783

所有三个 dijit和子类`dijit/form/Select`，并为它们添加了一个属性：`dijit/form/FilteringSelect``dijit/form/ComboBox``dijit/_HasDropDown``dropDown`

```
// dropDown: [protected] Widget
//     The widget to display as a popup.  This widget *must* be
//     defined before the startup function is called.
dropDown: null 
```

你想要的是听这个`dropDown`小部件。问题是，在这种情况下`ComboBox`，`FilteringSelect`这个小部件`dijit/form/_ComboBoxMenu`被懒惰地实例化，即当你第一次打开弹出窗口时。因此，您需要首先挂钩打开 dropDown，然后将`onClick`事件侦听器添加到 dropDown：

```
var signal = aspect.after(comboBox, "openDropDown", function() {
    comboBox.dropDown.on("click", function(node) {
        console.log("value:", comboBox.get("value"));
        console.log("selectedIndex:", domAttr.get(node, "item"));  // <= this is not an identifier
    }
    signal.remove();  // remove aspect so it called only once
} 
```

使用时会更容易一些`dijit/form/Select`，因为存在并且您可以立即在其下拉列表`dropDown`中收听：`onExecute``dijit/Menu`

```
select.dropDown.on("execute", function() {
    setTimeout(function() {
        console.log("value:", select.get("value"))
    });
}); 
```

在 jsFiddle 上查看所有三个操作：http: [//jsfiddle.net/phusick/Hp5jr/](http://jsfiddle.net/phusick/Hp5jr/)

# c++ - 如何将linux命令的输出复制到C++变量

> ID：12376198
> 
> 赞同：0
> 
> 时间：2012-09-11T18:59:21.933
> 
> 标签：c++, linux, command

我正在从 C++ 程序中调用 LINUX 命令，该程序创建以下输出。我需要将输出的第一列复制到 C++ 变量（比如 long int）。我该怎么做？？如果这不可能，我如何将此结果复制到可以使用的 .txt 文件中？

**编辑**

```
 0 +0
 2361294848 +2361294848
 2411626496 +50331648
 2545844224 +134217728
 2713616384 +167772160 
```

我将其存储为文件 file.txt 并且我正在使用以下代码提取没有 0 的左列以将其存储为整数

```
string stringy="";
int can_can=0;
for(i=begin;i<length;i++)
{
if (buffer[i]==' ' && can_can ==1) //**buffer** is the whole text file read in char*
{
num=atoi(stringy.c_str());
array[univ]=num; // This where I store the values.
univ+=1;
can_can=1;
  }
  else if (buffer[i]==' ' && can_can ==0) 
 {
stringy="";  
}
else if (buffer[i]=='+')
{can_can=0;}
else{stringy.append(buffer[i]);}
} 
```

我收到了一个分段错误。可以做什么？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T22:24:05.170

只需在 popen() 周围创建一个简单的 streambuf 包装器

```
#include <iostream>
#include <stdio.h>

struct SimpleBuffer: public std::streambuf
{   
    typedef std::streambuf::traits_type traits;
    typedef traits::int_type            int_type;

    SimpleBuffer(std::string const& command)
        : stream(popen(command.c_str(), "r"))
    {   
        this->setg(&c[0], &c[0], &c[0]);
        this->setp(0, 0); 
    }   
    ~SimpleBuffer()
    {   
        if (stream != NULL)
        {   
            fclose(stream);
        }   
    }   
    virtual int_type underflow()
    {   
        std::size_t size = fread(c, 1, 100, stream);
        this->setg(&c[0], &c[0], &c[size]);

        return size == 0 ? EOF : *c; 
    }   

    private:
        FILE*   stream;
        char    c[100];

}; 
```

用法：

```
int main()
{
    SimpleBuffer    buffer("echo 55 hi there Loki");
    std::istream    command(&buffer);

    int  value;
    command >> value;

    std::string line;
    std::getline(command, line);

    std::cout << "Got int(" << value << ") String (" << line << ")\n";
} 
```

结果：

```
> ./a.out
Got int(55) String ( hi there Loki) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T19:03:12.837

`popen`您可能正在寻找它。尝试

```
man popen 
```

.

或者看这个小例子：

```
#include <iostream>
#include <stdio.h>

using namespace std;

int main() 
{

    FILE *in;
    char buff[512];

    if(!(in = popen("my_script_from_command_line", "r"))){
        return 1;
    }

    while(fgets(buff, sizeof(buff), in)!=NULL){
          cout << buff; // here you have each line 
                        // of the output of your script in buff
    }
    pclose(in);

    return 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T19:04:13.800

你可能想用它[`popen`](http://linux.die.net/man/3/popen)来执行命令。这将为您提供一个`FILE *`您可以从中读取其输出的信息。从那里，您可以使用（例如）以下内容解析出第一个数字：

```
fscanf(inpipe, "%d %*d", &first_num); 
```

就像从文件中读取一样，您通常会重复，直到收到文件结束指示，例如：

```
long total = 0;

while (1 == fscanf(inpipe, "%l %*d", &first_num))
    total = first_num;

printf("%l\n", total); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-11T19:04:57.340

不幸的是，这并不容易，因为平台 API 是为 C 编写的。以下是一个简单的工作示例：

```
#include <cstdio>
#include <iostream>

int main() {
    char const* command = "ls -l";

    FILE* fpipe = popen(command, "r");

    if (not fpipe) {
        std::cerr << "Unable to execute commmand\n";
        return EXIT_FAILURE;
    }

    char buffer[256];
    while (std::fgets(buffer, sizeof buffer, fpipe)) {
        std::cout << buffer;
    }

    pclose(fpipe);
} 
```

但是，我建议将`FILE*`句柄包装在 RAII 类中以处理资源管理。

# c# - usercontrol ascx文件中的Updatepanel不更新gridview

> ID：12376200
> 
> 赞同：2
> 
> 时间：2012-09-11T18:59:34.130
> 
> 标签：c#, asp.net, gridview

我正在尝试变得圆滑，并且将此用户控件放在覆盖整个页面的 div 中。但是，当我单击搜索按钮时，我会收到完整的回发。关于如何让它不回发并只更新gridview的任何想法？

只是要清楚。以下控件位于 ascx 文件中。在 aspx 页面中调用。

```
<%@ Control Language="C#" AutoEventWireup="true" CodeFile="PropertyViewAddEntity.ascx.cs"
Inherits="UserControls_PropertyViewAddEntity" %>

<p>Search for State City County zip</p>
        <asp:Panel ID="Panel1" runat="server" DefaultButton="Button2ae">
            <p>
                <asp:TextBox ID="TextBox1ae" runat="server" Width="500px"></asp:TextBox>
                <asp:Button ID="Button2ae" runat="server" Text="Search"  CausesValidation="false" />
            </p>
        </asp:Panel>
        <asp:UpdatePanel ID="UpdatePanel1" runat="server" UpdateMode="Conditional">
            <ContentTemplate>
                <asp:GridView ID="GridView2ae" runat="server" AutoGenerateColumns="False" DataSourceID="SqlDataSource3ae"
                    OnSelectedIndexChanged="GridView2ae_SelectedIndexChanged">
                    <Columns>
                        <asp:CommandField ShowSelectButton="True" />
                        <asp:BoundField DataField="zipcodeid" HeaderText="zipcodeid" SortExpression="zipcodeid" />
                        <asp:BoundField DataField="zip_code" HeaderText="zip_code" SortExpression="zip_code" />
                        <asp:BoundField DataField="state" HeaderText="state" SortExpression="state" />
                        <asp:BoundField DataField="city_alias_name" HeaderText="city_alias_name" SortExpression="city_alias_name" />
                        <asp:BoundField DataField="county_name" HeaderText="county_name" SortExpression="county_name" />
                    </Columns>
                </asp:GridView>

            </ContentTemplate>
            <Triggers>
                <asp:AsyncPostBackTrigger ControlID="Button2ae" EventName="Click" />
            </Triggers>
        </asp:UpdatePanel> 
```

顺便说一句，控件位于占位符中

```
<asp:PlaceHolder ID="ControlContainer" runat="server"/> 
```

并从后面的代码中调用。

```
Control mycontrol = LoadControl("~/UserControls/PropertyViewAddEntity.ascx");

    ControlContainer.Controls.Add(mycontrol); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T16:08:10.080

**我终于弄清楚了这个问题。**

为了使事情正常工作，通过代码隐藏添加用户控件将不起作用！

为了使事情正常工作，您必须在页面上声明用户控件，以便您可以访问用户控件的 UpdateMode="Conditional" 属性。

```
<%@ Register TagPrefix="my" TagName="AddEntity" Src="~/UserControls/PropertyViewAddEntity.ascx"  %>
<my:AddEntity Visible="false" ID="test1" runat="server" ClientIDMode="Inherit" UpdateMode="Conditional" /> 
```

我将控件的 Visible 属性设置为 false，以便可以通过单击按钮来显示它。

```
<asp:Button ID="Button1" runat="server" Text="Button" OnClick="Button1_Click" /> 
```

我在后面的代码中做到了这一点。

```
protected void Button1_Click(object sender, EventArgs e)
{   
    test1.Visible = true;
} 
```

一旦设置了更新模式。一切正常。

# jquery - 返回 ul 中的重复项

> ID：12376203
> 
> 赞同：0
> 
> 时间：2012-09-11T18:59:51.070
> 
> 标签：jquery, jquery-selectors

如何构建函数以在 jquery 中返回对象，如下所示：

```
<ul class="clearfix">
  <li data-year="2011" data-month="1">Jan</li>
  <li data-year="2011" data-month="2">Feb</li>
  <li data-year="2012" data-month="3">Mar</li>
  <li data-year="2012" data-month="4">Apr</li>
  <li data-year="2012" data-month="5">May</li>
</ul> 
```

搜索 li 项目，找到数据年并返回一个具有相等项目数的对象，例如 {2011: 2, 2012: 3}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T19:12:01.283

```
function obj(ul) {
    return {
               2011: $('li[data-year="2011"]', ul).length,
               2012: $('li[data-year="2012"]', ul).length
           }
}

console.log(obj($('ul'))) 
```

[http://jsfiddle.net/x2n7t/2/](http://jsfiddle.net/x2n7t/2/)

更新：

```
var obj = {};

$('ul li[data-year]').each(function(){
   var year = $(this).data('year');
   obj[year] = obj[year] ? obj[year] + 1 : 1
}) 
```

[http://jsfiddle.net/x2n7t/3/](http://jsfiddle.net/x2n7t/3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T20:10:46.190

检查这个

```
var arr = [];
$('ul li').each(function(){
    var y = $(this).attr('data-year');
    if($.inArray(y,arr) < 0)
        arr.push(y);
});
// You build the Array with the List of Items..
//console.log(arr);

// Build the Object Here..

var obj = {};
$.each(arr, function(i){
    var y = arr[i];
    obj[y] = $('ul li[data-year="'+ y + '"]').length;
});
console.log(obj);​​​​​​​​​​​​​​​ 
```

这是[演示](http://jsfiddle.net/sushanth009/v2YNp/)

# android - Android：编辑音频文件

> ID：12376207
> 
> 赞同：2
> 
> 时间：2012-09-11T19:00:04.240
> 
> 标签：android, audio, edit

我正在尝试编写一个获取视频或音频文件并编辑音频的 android 应用程序。我知道你可以学习 PCM 音频，它会教你你需要知道的东西，但我想知道谷歌是否有一些内置于 Android 的功能？

我知道 Android 内置了许多不同的东西来帮助处理位图和查询等，但我很好奇他们是否有任何东西可以帮助我在 Android 中编辑音频文件。

制作“自动调谐”应用程序的人是否有一些他们共享的包可以在 Android 开发社区中提供帮助和帮助？

我知道有人已经问过一个关于使用常规编程编辑音频文件的问题，但我想知道 Android 中是否已经为我制作了一些东西。

我已经查看了这个[问题](https://stackoverflow.com/questions/366187/getting-started-with-programmatic-audio/366246#366246)，它让我对 PCM 音频有了一些了解。

提前致谢！！

我是 android 新手，我正试图用我的一些应用程序创意来让我的脚湿透。如果有人有一些对学习android非常有用的资源，请告诉我。我一直在他们的网站上阅读谷歌的资源，那里没有很多。此外，尝试了非常脱脂的 youtube。

# grep - 使用 GREP 从数据库文件 (.pdb) 生成表

> ID：12376209
> 
> 赞同：1
> 
> 时间：2012-09-11T19:00:13.263
> 
> 标签：grep

我拥有的是一个包含 PDB 文件的文件夹，其中包含以下模式的信息：

```
*HEADER 'protein date ID'
TITLE  'title of document here
AUTHOR ' the authors listed here' 
AUTHOR ' continued..'
SOURCE 'source organism (s)'
SOURCE 'continued'
SOURCE 'continued'
COMPND 'compound or complex studied'
COMPND 'continued' 
```

如您所见，此文件中的源代码和其他信息扩展为多行。我想使用 GREP 命令在这些 PDB 文件中创建一个包含此信息的表。我无法将多行组合成一个并生成一个包含 TITLE、AUTHOR、SOURCE 等列的表

我这样做的原因是能够在表格中显示 PDB 文件中的信息，并通过作者或来源的新研究进行过滤，这将在实际网站上节省大量时间。

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T19:55:26.823

我不认为`grep`是正确的工具，我建议`sed`或`awk`. 这是一个`sed`解决方案（或者可能不是一个完整的解决方案，取决于您想要的输出）：

```
sed ':r;$!{N;br};:s;s/\nSOURCE//2;ts' file.pdb 
```

它只处理线条`SOURCE`。

这是一个更通用的版本：

```
sed ':r;$!{N;br};:s;s/\(\n[A-Z]\+\)\(.*\)\1/\1\2/;ts' file.pdb 
```

# oracle - oracle select with IN 形成另一个表字段

> ID：12376214
> 
> 赞同：2
> 
> 时间：2012-09-11T19:00:29.997
> 
> 标签：oracle, select

我有一个以列命名的表`departments`-

```
id number(10)
description varchar2(20) 
```

`filters`还有一个名为列的配置表-

```
filtername varchar2(10)
filter varchar2(20) 
```

该`filter`列应包含应在子句中用作过滤器的 id 列表，`where`例如“10,20,30”

```
select * 
 from departments
    , filters 
where filters.filtername='MYFILTE' 
  and departments in filters.filter 
```

每个过滤器只能使用一条记录。这可能吗 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T19:39:43.040

```
select * 
 from departments d 
where id in (select regexp_substr(filter,'[^,]+', 1, level) from filters
               where filtername='MYFILTE' --use this line if you only want to use one filter, remove if you want to apply all filters
             connect by regexp_substr(filter, '[^,]+', 1, level) is not null); 
```

像这样的表——

```
create table filters (filter varchar2(100), filtername varchar2(20)); 
```

有了这样的数据——

```
insert into filters values ('10,20,30','Filter1');
insert into filters values ('40,50,60','Filter2'); 
```

像这样运行查询（假设列`filter`的值由 分隔`,`）-

```
select distinct regexp_substr(filter,'[^,]+', 1, level) from filters
connect by regexp_substr(filter, '[^,]+', 1, level) is not null
order by 1; 
```

返回这个-

```
REGEXP_SUBSTR(FILTER,'[^,]+',1,LEVEL)
-----------------------------------------
10
20
30
40
50
60 
```

注意 - 与您的情况`distinct`无关`order by`（即在您的查询中不需要，但您仍然可以使用它们）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T21:32:12.237

这是通过一个简单的连接实现的：）

```
select * 
from departments d
join filters f on d.description = f.filter
where f.filtername='MYFILTE' 
```

编辑：我错过了 f.filter 是带有值的逗号分隔字符串在这种情况下，有两个选项：

使用喜欢：

```
select * 
from departments d
join filters f on f.filter like '%'||d.description||'%'
where f.filtername='MYFILTE' 
```

或使用您自己的爆炸功能：

```
CREATE OR REPLACE TYPE DM.varchar_list_type as table of varchar2(255);

CREATE OR REPLACE function explode(p_separator in varchar2, p_string in varchar2)
return varchar_list_type 
as
   l_string   varchar2(4000) default p_string || p_separator;
   l_data     varchar_list_type := varchar_list_type();
   n          number;
begin
   loop
      exit when l_string is null;
      n := instr (l_string, p_separator);
      l_data.extend;
      l_data (l_data.count) := ltrim (rtrim (substr (l_string, 1, n - 1)));
      l_string := substr (l_string, n + 1);
   end loop;

   return l_data;
-- no exception. I want to see the error messages (for now at least)
end;

select * 
from departments d
join filters f on d.description in (table(explode(',', f.filter)))
where f.filtername='MYFILTE' 
```

# xml - 查询树视图

> ID：12376218
> 
> 赞同：0
> 
> 时间：2012-09-11T19:00:47.783
> 
> 标签：xml, sql-server-2008, tsql, telerik, treeview

我有一个工作正常的查询。

是否有可能如果table3的列（Child）仅与表1相关以在表1下而不是在表2下显示它，但同时另一个（Child）在表2中有父（通常是这种情况) 它将在表 2 下显示为当前所做的。

**换句话说，子列直接位于表 2 的行列名称（父亲）之下，但有时它位于表 1 之下，与表 2 无关。**

我怎样才能把它放在树视图的查询中？我假设我将不得不用 3 个 for 循环在 c# 中对输出进行编程，在第二个循环中我可以检查列是孙子还是子，并将其作为树视图的第二行或第二个节点，但我是在 sql 中构建查询时遇到问题。任何帮助深表感谢。

下面的查询显示了所有父母，然后是孩子，然后是孙子（一切都很好并且工作），但有时需要孩子代替父亲。

```
declare @x as xml
set @x =
(
SELECT distinct  
Table1.AssetSysID, Table1.Asset_ID , Table1.FromLR, Table1.Asset_ID + ', ' + Table1.[Desc2] as GarndFather,
Table2.ACISysID ,Table2.PAssetSysID, Table2.FeatureName + ', ' + Table2.[DESC] AS Father,
Table3.ITMSysID  ,Table3.Item_ID + ',' + Table3.[DESC] as Child
FROM  Table1 left outer join 
Table2 ON Table1.AssetSysID = Table2.PAssetSysID left outer join 
Table3 ON Table1.AssetSysID = Table3.AssetSysID AND Table2.ACISysID = Table3.ACISysID
where (Table1.AssetType = @AssetType)
for xml auto,root('xml')
) 
```

Asp.Net Telerik Treeview 数据绑定代码：

```
<DataBindings>
      <telerik:RadTreeNodeBinding DataMember="Table1" TextField="Assets" ValueField="AssetSysID"  ToolTip="Asset" ImageUrl="~/Images/DeleteIco.png"/>
      <telerik:RadTreeNodeBinding DataMember="Table2" TextField="Feature" ValueField="ACISysID" ToolTip="Feature" ImageUrl="~/Images/CutIco.png"/>
       <telerik:RadTreeNodeBinding DataMember="Table3" TextField="Equipment" ValueField="ITMSysID" ToolTip="Equipment" ImageUrl="~/Images/EditIco.png"/>

    </DataBindings> 
```

****最终代码：***

```
 select Table1.AssetObjID as "@AssetObjID",
           Table1.Asset_ID as "@Asset_ID",
           Table1.FromLR as "@FromLR",
           Table1.AssetType + ', ' + Table1.StreetName + ', ' +  Table1.FromMunicNo   as "@FirstRow",
           (
           select Table2.ACIObjID as "@ACIObjID",
                  Table2.PAssetObjID as "@PAssetObjID",
                  Table2.Feature_ID + ', ' + Table2.FeatureName   AS "@ChildOfFirstRow",
                  (
                  select Table3.ITMObjID as "@ITMObjID",
                         Table3.Item_ID + ',' + Table3.[DESC] as "@GrandChildOfFirstRow"
                  from Table3
                  where Table1.AssetObjID = Table3.AssetObjID and 
                        Table2.ACIObjID = Table3.ACIObjID
                  for xml path('Table3'), type
                  )
           from Table2
           where Table1.AssetObjID = Table2.PAssetObjID
           for xml path('Table2'), type
           ),
(
           select Table3.ITMObjID as "@ITMObjID",
                         Table3.Item_ID + ',' + Table3.[DESC] as "@GrandChildOfFirstRow"
                  from Table3
                  where Table1.AssetObjID = Table3.AssetObjID and 
                        Table2.ACIObjID <> Table3.ACIObjID
                  for xml path('Table3'), type
)
    from Table1
    where Table1.AssetType = 'xxxx'
    for xml path('Table1'), root('xml') 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T19:13:16.357

[从Mikael Eriksson](https://stackoverflow.com/questions/12296869/tsql-query-for-tree-view-control-and-remove-empty-elements-from-an-xml-file)那里得到一个想法，并从团队负责人@work 那里得到帮助

```
 select Table1.AssetObjID as "@AssetObjID",
               Table1.Asset_ID as "@Asset_ID",
               Table1.FromLR as "@FromLR",
               Table1.AssetType + ', ' + Table1.StreetName + ', ' +  Table1.FromMunicNo   as "@FirstRow",
               (
               select Table2.ACIObjID as "@ACIObjID",
                      Table2.PAssetObjID as "@PAssetObjID",
                      Table2.Feature_ID + ', ' + Table2.FeatureName   AS "@ChildOfFirstRow",
                      (
                      select Table3.ITMObjID as "@ITMObjID",
                             Table3.Item_ID + ',' + Table3.[DESC] as "@GrandChildOfFirstRow"
                      from Table3
                      where Table1.AssetObjID = Table3.AssetObjID and 
                            Table2.ACIObjID = Table3.ACIObjID
                      for xml path('Table3'), type
                      )
               from Table2
               where Table1.AssetObjID = Table2.PAssetObjID
               for xml path('Table2'), type
               ),
(
               select Table3.ITMObjID as "@ITMObjID",
                             Table3.Item_ID + ',' + Table3.[DESC] as "@GrandChildOfFirstRow"
                      from Table3
                      where Table1.AssetObjID = Table3.AssetObjID and 
                            Table2.ACIObjID <> Table3.ACIObjID
                      for xml path('Table3'), type
)
        from Table1
        where Table1.AssetType = 'xxxx'
        for xml path('Table1'), root('xml') 
```

所以它是这样的：

```
<Table1 atrributes......... FirstRow=".........."/>
<Table2 atrributes......... ChildOfFirstRow="..........">
<Table3 atrributes......... GrandChildOfFirstRow=".........."/>
</Table2>
<Table3 atrributes......... GrandChildOfFirstRow="This GrandChild took the importance as equal to ChildOfFirstRow"/> 
```

# winapi - GetDateFormat() 在 1601 年 1 月 1 日之前的日期失败

> ID：12376219
> 
> 赞同：1
> 
> 时间：2012-09-11T19:01:01.913
> 
> 标签：winapi, localization, internationalization

我正在尝试使用 Windows [GetDateFormat API](http://msdn.microsoft.com/en-us/library/windows/desktop/dd318086(v=vs.85).aspx)函数格式化日期：

```
nResult = GetDateFormat(
      localeId,   //0x409 for en-US, or LOCALE_USER_DEFAULT if you're not testing
      0,          //flags
      dt,         //a SYSTEMTIME structure
      "M/d/yyyy", //the format we require
      null,       //the output buffer to contain string (null for now while we get the length)
      0);         //the length of the output buffer (zero while we get the length) 
```

现在我们传递一个日期/时间：

```
SYSTEMTIME dt;
dt.wYear = 1600;
dt.wMonth = 12;
dt.wDay = 31; 
```

在这种情况下 nResult 返回零：

> 如果不成功，该函数返回 0。要获取扩展错误信息，应用程序可以调用 GetLastError，它可以返回以下错误代码之一：
> 
> *   ERROR_INSUFFICIENT_BUFFER。提供的缓冲区大小不够大，或者它被错误地设置为 NULL。
> *   ERROR_INVALID_FLAGS。为标志提供的值无效。
> *   ERROR_INVALID_PARAMETER。任何参数值无效。

但是，如果我在一天后返回一个日期：

```
SYSTEMTIME dt;
dt.wYear = 1601;
dt.wMonth = 1;
dt.wDay = 1; 
```

然后它工作。

我究竟做错了什么？我如何格式化日期？

例如[基督诞生](http://www.youtube.com/watch?v=2KokXbUV_SU)的日期：

```
12/25/0000 
```

或[宇宙开始的日期](http://en.wikipedia.org/wiki/James_Ussher)：

```
-10/22/4004 6:00 PM 
```

或凯撒去世的日期：

```
-3/15/44 
```

* * *

## 奖金阅读

*   **全部排序**：[GetDateFormat 是基于公历的](http://www.siao2.com/2005/01/14/353216.aspx)
*   [`GetDateFormatEx`功能](http://msdn.microsoft.com/en-us/library/windows/desktop/dd318088(v=vs.85).aspx)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T19:31:13.987

这实际上是对[SystemTime](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724950%28v=vs.85%29.aspx)的限制。

`...year/month/day/hour/minute/second/milliseconds value since 1 January 1601 00:00:00 UT... to 31 December 30827 23:59:59.999`

我花了一些时间寻找如何绕过这个限制，但是因为`GetDateFormat()`需要一个`SystemTime`你可能不得不硬着头皮写你自己的`format()`方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T19:25:57.270

[SYSTEMTIME](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724950%28v=vs.85%29.aspx)结构仅从 1601 年到 30827 年有效，因为在 Windows 机器中，系统时间是从 1.1.1601 00:00 开始的经过时间间隔计算的。参见 [维基百科](http://en.wikipedia.org/wiki/System_time)文章。

# python - Python 线程：同时运行 2 个不同的函数

> ID：12376224
> 
> 赞同：6
> 
> 时间：2012-09-11T19:01:17.190
> 
> 标签：python, multithreading

我有一个功能`foo`，只有在满足条件后才会停止。在`foo`运行时，我需要一直要求用户输入（不断要求用户输入）。我希望它们单独运行而不会相互干扰。

在下面的示例中，`foo`不断打印“Hello”并`getUserInput`不断寻找用户输入。即使我没有输入任何内容供用户输入，我也希望 foo 继续打印你好。只要用户不输入字母“e”，它就会一直要求输入。我在下面有我的尝试：

```
import threading
from time import sleep

class test:
    def __init__(self):
        self.running = True

    def foo(self):
        while(self.running):
            print 'Hello\n'
            sleep(2)

    def getUserInput(self):
        x = ''
        while(x != 'e'):
            x = raw_input('Enter value: ')
        self.running = False

    def go(self):
        th1 = threading.Thread(target=self.foo)
        th2 = threading.Thread(target=self.getUserInput)
        th1.start()
        th2.start()

t = test()
t.go() 
```

我的代码打印出第一个 hello 并要求输入，但之后什么都没有。我究竟做错了什么？提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-11T19:13:57.840

**更新：** *开启者在空闲的 Windows 上运行他的代码。关于 I/O，它的行为不同于 shell 或 Windows 命令行。他的代码适用于 Windows 命令行。*

原则上，您的代码对我有用。我正在运行 Python 2.6.5。

这里有几条评论：

1）在您的情况下，只有两个线程就可以了：主线程和另一个线程。但是，它也适用于三个。只是您的主线程除了等待其他线程完成之外什么都不做。

2）你应该明确`join()`你产生的所有线程。在终止它之前在主线程中执行此操作。记录您产生的线程（例如在列表中`threads`），然后在程序结束时加入它们（例如`for t in threads: t.join()`）。

`self.running`3）您在线程之间共享变量。在这种情况下很好，因为一个线程只读取它而另一个线程只写入它。通常，您需要非常小心共享变量并在更改之前获取锁。

4）您应该在主线程中捕获`KeyboardInterrupt`异常并找到一种与其他线程通信以终止的方法:)

5) 使用小写的方法名，所以不要`getUserInput`调用它`get_user_input`。使用大写的类名并继承自`object`：`class Test(object):`

这是一个运行示例：

```
import threading
from time import sleep

def main():
    t = Test()
    t.go()
    try:
        join_threads(t.threads)
    except KeyboardInterrupt:
        print "\nKeyboardInterrupt catched."
        print "Terminate main thread."
        print "If only daemonic threads are left, terminate whole program."

class Test(object):
    def __init__(self):
        self.running = True
        self.threads = []

    def foo(self):
        while(self.running):
            print '\nHello\n'
            sleep(2)

    def get_user_input(self):
        while True:
            x = raw_input("Enter 'e' for exit: ")
            if x.lower() == 'e':
               self.running = False
               break

    def go(self):
        t1 = threading.Thread(target=self.foo)
        t2 = threading.Thread(target=self.get_user_input)
        # Make threads daemonic, i.e. terminate them when main thread
        # terminates. From: http://stackoverflow.com/a/3788243/145400
        t1.daemon = True
        t2.daemon = True
        t1.start()
        t2.start()
        self.threads.append(t1)
        self.threads.append(t2)

def join_threads(threads):
    """
    Join threads in interruptable fashion.
    From http://stackoverflow.com/a/9790882/145400
    """
    for t in threads:
        while t.isAlive():
            t.join(5)

if __name__ == "__main__":
    main() 
```

键入 e 或 E 时，程序会在短暂延迟后结束（如您所愿）。当按下 ctrl+c 时，它立即终止。制作一个使用`threading`响应异常的程序比预期的要复杂一些。我在上面的来源中包含了重要的参考资料。

这是它在运行时的样子：

```
$ python supertest.py

Hello

Enter 'e' for exit: 
Hello

Hello

Hello

e
$ 
```

# c++ - 在 C++、Windows 7 中包含 OpenGL 库

> ID：12376225
> 
> 赞同：10
> 
> 时间：2012-09-11T19:01:25.613
> 
> 标签：c++, windows, opengl, compilation, c-preprocessor

我正在阅读“OpenGL 入门”教程，并且遇到了以下文字：

> “如果你使用的是C/C++，那么你必须先设置一个可以链接到OpenGL的构建环境（Visual Studio项目、GNU makefile、CMake文件等）。在Windows下，你需要静态链接到一个名为OpenGL32的库.lib（请注意，如果您正在构建 64 位可执行文件，您仍然链接到 OpenGL32.lib。“32”部分没有意义）。Visual Studio 和大多数 Windows 编译器都带有这个库。

我只是想使用 vim 编写我的源文件，我不想使用像 VS 这样的 IDE，据我了解，OpenGL 库随 Windows 7 一起提供（如果我错了，请纠正我）。此后，本文不再详细介绍如何包含 OpenGL 库，而我真正的问题是，如何在源文件中包含和使用 OpenGL 库？

它是像写作一样简单，`#include <name of lib>`还是我需要在我的编程环境中做其他事情，比如编辑我的路径变量？

编辑：我正在使用 MinGW g++/gcc 编译器

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-11T20:32:28.083

要访问包含文件，您需要一个特殊的支持库。其中不止一个，但我会推荐 GLEW。[您可以在http://glew.sourceforge.net/](http://glew.sourceforge.net/)找到 GLEW 界面。

这样做的原因是只有一个非常旧版本的 OpenGL 头文件在 Windows 上默认可用。较新的接口是间接可用的；您必须询问功能地址。然而，这是由 GLEW 为您完成的。

所以你只需要包含<GL/glew.h>，并用glewInit()做一些初始化；

这与 Linux 和 Windows 都兼容，尤其是在您使用 MinGW 时。链接时，我使用以下内容：

MY_LIBS = -lglew32 -lopengl32 -lWs2_32 -lole32 -lcomctl32 -lgdi32 -lcomdlg32 -luuid

我可以推荐使用通用 makefile，请参阅[http://sourceforge.net/projects/gcmakefile/](http://sourceforge.net/projects/gcmakefile/)

请注意，在初始化 GLEW 之前，您还必须为 OpenGL 设置[上下文。](http://www.opengl.org/wiki/Creating_an_OpenGL_Context_%28WGL%29)这取决于环境以不同的方式完成。当你打开一个窗口时，它就完成了。对于便携式库，我可以推荐[glfw](http://www.glfw.org/)库或[freeglut](http://freeglut.sourceforge.net/)。

# c# - 使用 C# 和 MySql 存储密码的最佳方法

> ID：12376226
> 
> 赞同：1
> 
> 时间：2012-09-11T19:01:32.747
> 
> 标签：c#, asp.net, mysql, security

> **可能重复：**
> [如何最好地存储用户信息和用户登录名和](https://stackoverflow.com/questions/947618/how-to-best-store-user-information-and-user-login-and-password)
> [密码 在数据库中存储密码的最佳方式](https://stackoverflow.com/questions/1054022/best-way-to-store-password-in-database)

我正在寻找使用 C# 和 MySql 在基于 Web 的应用程序上安全存储密码的最佳方法。

如果有我可以利用的现有 dll 或者已经内置到 .net 框架中的东西，我会喜欢任何关于实现这一点的最佳方法的建议。

另外 - 我正在寻找在遵循 PCI 合规性规则的同时最好地存储密码的方法。

非常感谢...洛伦

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T19:04:11.177

asp.net 有它自己的 Membership 类，它可以为你做很多工作。

[这是我找到的关于 asp.net 会员的快速指南](http://msdn.microsoft.com/en-us/library/6e9y4s5t%28v=vs.100%29.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-11T19:03:54.470

切勿自行存储密码。 [储存前加盐](http://en.wikipedia.org/wiki/Salt_%28cryptography%29)和哈希。

# playframework - Play 中的分组表单错误！框架

> ID：12376228
> 
> 赞同：2
> 
> 时间：2012-09-11T19:01:39.017
> 
> 标签：playframework

有没有一种简单的方法可以在表单顶部而不是每个字段上方对表单错误进行分组？

这是我的 Scala 模板：

```
@(registrationForm: Form[User])

@implicitField = @{ FieldConstructor(views.html.helper.twitterBootstrap2.twitterBootstrap2FieldConstructor.f) }

@import helper._

@helper.form(action = routes.Registration.index) {

    <fieldset>

        @if(registrationForm.hasGlobalErrors) { 
            <div class="alert alert-error">
            <a class="close" data-dismiss="alert">×</a>
                @registrationForm.globalError.message
            </div>
        }

        <legend>Register</legend>

        @inputText(
            registrationForm("firstName"),
            '_label -> "First Name",
            '_showConstraints -> false,
            '_showErrors -> true,
            '_error -> registrationForm.error("firstName")
        )

        @inputText(
            registrationForm("lastName"),
            '_label -> "Last Name",
            '_showConstraints -> false,
            '_showErrors -> true,
            '_error -> registrationForm.error("lastName")
        )

        @inputText(
            registrationForm("emailAddress"),
            '_label -> "Email Address",
            '_showConstraints -> false,
            '_showErrors -> true,
            '_error -> registrationForm.error("emailAddress")
        )

        @inputPassword(
            registrationForm("password"),
            '_label -> "Password",
            '_showConstraints -> false,
            '_showErrors -> true,
            '_error -> registrationForm.error("password")
        )

        @inputPassword(
            registrationForm("password"),
            '_label -> "Confirm Password",
            '_showConstraints -> false,
            '_showErrors -> true,
            '_error -> registrationForm.error("password")
        )

    </fieldset>

    <button type="submit" class="btn">Register</button>

} 
```

我有一个自定义验证，我正在检查唯一的电子邮件地址，并基于该验证，我在全局错误中添加了一个错误。我希望将任何其他错误（由于验证其他字段而引发）与表单顶部的此错误组合在一起。有什么建议么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-11T20:50:19.040

在您的`@if(registrationForm.hasGlobalErrors){`情况下，您总是可以尝试调用`registrationForm.globalErrors`以获取所有错误的列表，遍历它并为每个错误输出消息？

例子：

```
@if(registrationForm.hasGlobalErrors){
    <div class="alert alert-error">
         @for(validationError <- registrationForm.globalErrors){
              <a class="close" data-dismiss="alert">×</a>
              @validationError.message
         }
    </div>
} 
```

编辑：应下面评论的要求，我正在更新我的答案，以包括一种用于对自定义验证消息进行分组的替代方法，这可能不是“最佳”解决方案，但应该可以做到这一点。

在您的控制器中：

```
if(filledForm.hasErrors()){

       for(String key : filledForm.errors().keySet()){
           List<ValidationError> currentError = filledForm.errors().get(key);
           for(ValidationError error : currentError){
               flash(key, error.message());
           }
       }
} 
```

或者您可以使用迭代器，无论您喜欢哪个。

然后在您看来，大致如下：

```
@if(flash.size() > 0){
    <div class="alert-alert error">
        @for((key, value) <- flash){
            <strong>Error : </strong> @value<br />
        }
    </div>
} 
```

就像我提到的那样，这不是最优雅的解决方案，但它应该在页面顶部列出您的错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-12T17:15:34.457

我在将自定义全局错误添加到 globalErrors 并将它们显示在视图上时也遇到了问题。我的解决方案是使用错误对象并在“全局”键下添加这些全局错误。然后在视图中，我在顶部显示所有“全局”错误。

我的观点：

```
@for(error <- form("global").errors) {
       <p>@error.message</p>
} 
```

我的控制器：

```
ValidationError error = new ValidationError("global", "User is not authorized.");
List<ValidationError> errors = new ArrayList<ValidationError>();
errors.add(error);
loginForm.errors().put("global", errors);
return badRequest(login.render(loginForm)); 
```

# php - 如何根据语言切换选择模板？

> ID：12376235
> 
> 赞同：2
> 
> 时间：2012-09-11T19:01:54.540
> 
> 标签：php, joomla2.5, multilingual, banner

我有一个 Joomla 2.5 多语言网站，我想在英文版和法文版上有不同的横幅。我知道我可以复制模板并将它们分配给特定的语言，但我在 CSS 中做了很多修改，我不想加倍更改！我确实在我的 index.php 中添加了这个条件，但只有第一个横幅会显示在 EN 和 FR 网站上。

```
<?php if ($this->language = 'en-gb') : ?>
<div style="background-image: url(/templates/mega_calibra/images/bannierEN.png);"></div>
<?php elseif ($this->language = 'fr-fr') : ?>
<div style="background-image: url(/templates/mega_calibra/images/bannierFR.png);"></div>
<?php endif; ?>` 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T19:59:41.283

1.  基本的 PHP 错误

    if ($this->language **==** 'en-gb')

2.  我认为 $this->language 将返回 en-GB 和 fr-FR（注意大写），因此请检查 $this->language 上的 var_dump()。

# php - PHP Post 数组不工作 (JSON)

> ID：12376236
> 
> 赞同：-1
> 
> 时间：2012-09-11T19:01:59.137
> 
> 标签：php, arrays, json, post

我正在尝试将我从 MySql 数据库中获取的 JSON 字符串发布到另一个 php 页面。这是我的父页面代码：

```
$ResultLists = array();
$counter = 0;
echo "<form target=\"_blank\" enctype=\"multipart/form-data\" method=\"post\" action=\"_popup.php\" name=\"compare\">";

while($data != NULL and $info = mysql_fetch_array( $data ))
{ 
Print "<tr>";
//..
//I printed some data here, but not relevant to problem
//..
$ResultLists[$counter] = $info['ResultList']; //gets JSON string
echo gettype($ResultLists[$counter]); //prints "string"
//echo $ResultLists[$counter]; //prints the whole list (it is a list of lists <--from python)
$var = json_decode($ResultLists[$counter]); //decode JSON string
echo $var[1][0]; //prints wonderfully (I am only printing one value in "array", but it works).

Print '<td><input type="checkbox" name="data[]" value="'.$ResultLists[$counter].'" /></td>';
Print '</tr>';
$counter++;
}
echo '<tr><td><input type="hidden" name="index" value="'.$counter.'" />';
echo '<input type="submit" value ="Compare Data"> </input></td></tr>'; 
```

在子页面上，我尝试获取数据：

```
<?php

$index = $_POST['index'];
echo 'Number of rows: '.$index.'<br>';
$array = $_POST['data'];

$x = 0;

//echo gettype($array);

echo '<b>Type:</b> '.gettype($array[$x]).'<b>  Length:</b> '.strlen($array[$x]).'  <b>Data:</b> '.$array[$x].'<br>';
$var = json_decode($array[$x]);
echo gettype($var).strlen($var);
echo $var[1][0];

?> 
```

哪个产生（例如）

```
Number of rows: 8
Type: string Length: 2 Data: [[
NULL0 
```

所以，它不起作用。（它对我提交的每一行数据执行此操作，因此只要它在我选择的复选框数量范围内，改变 $x 就会产生相同的输出，如果这有意义的话。）有什么想法吗？为什么它显示为“[[”而不是整个列表？我可以在父页面上打印整个列表，它工作正常。

## 我怀疑它是由于单引号“'”字符的存在或其他原因。有任何想法吗？

编辑：

所以禁用魔术引号似乎帮助我发帖。

但是，我遇到了一个奇怪的问题，它以某种方式提交了我的所有数据。

因此，当我通过 POST 取回 data[] 时，长度是选中的复选框的正确数量，但它保存的数据从打印的第一行开始。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T19:12:50.410

您可能希望使用[`htmlspecialchars`](http://www.php.net/htmlspecialchars). IE，

```
Print '<td><input type="checkbox" name="data[]" value="'.htmlspecialchars($ResultLists[$counter]).'" /></td>'; 
```

# c# - 如何在 C# 中使用 BackgroundWorker 类使用多线程？

> ID：12376237
> 
> 赞同：0
> 
> 时间：2012-09-11T19:01:58.080
> 
> 标签：c#, multithreading, backgroundworker

我阅读了有关使用 BackgroundWorker 类在 Windows 窗体应用程序中实现线程的信息。我有一个小问题：如果我想让 5 个线程同时运行来处理指定的任务，我必须创建 5 个 BackgroundWorker 控件还是只需要一个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T20:55:13.923

如果您只是在谈论`BackgroundWorker`，那么您必须创建 5 个背景工作人员。如果您只需要 5 个线程，您可以自己创建这些线程。然后问题变成了如何将进度和完成传达回 UI 线程。使用`BackgroundWorker`，您可以使用`WorkerReportsProgress`/`ReportProgress`和 Completed 事件来执行此操作。现在，您*可以确定*只使用处理程序来生成您想要的线程，并通过和`BackgroundWorker` `DoWork`管理从这些线程返回 UI 线程的数据通信。`ReportProgress``Completed`

例如：

```
private void backgroundWorker_DoWork(object sender, DoWorkEventArgs e)
{
   Thread thread1 = new Thread(ThreadOneEntry);
   thread1.Start();
   Thread thread2 = new Thread(ThreadTwoEntry);
   thread2.Start();
   Thread thread3 = new Thread(ThreadThreeEntry);
   thread3.Start();
   Thread thread4 = new Thread(ThreadFourEntry);
   thread4.Start();
   Thread thread5 = new Thread(ThreadFiveEntry);
   thread5.Start();

   thread1.Join();
   thread2.Join();
   thread3.Join();
   thread4.Join();
   thread5.Join();

   // do something to report results from threads1-5
} 
```

当然，这对进步没有任何作用——这将是非常特定于应用程序的，我想出的任何东西都可能与你所做的完全不同，而且没有任何帮助。但是，每个线程都可以直接通过该方法报告进度`BackgroundWorker.ReportProgress`——您只需为每个线程提供`BackgroundWorker`实例或方法的委托`ReportProgress`。

它也不是非常有效地使用后台工作线程的线程，它只是进入等待其他线程的等待状态，`DoWork`事件处理程序可以轻松地完成其他线程条目之一的一些工作。 .

如果您使用 .NET 3.5 或更高版本并且想要执行有结果的后台工作，我建议您使用`Task<T>`而不是。`Thread`另外，启动您自己的线程不会进行负载平衡。任务通过 TPL 进行自己的负载平衡......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T19:13:06.580

BackgroundWorker 基本上是一个线程，因此如果您需要运行多个线程，则需要多个实例。

# java - Java EE - 并行编辑，多个用户，有什么想法吗？

> ID：12376243
> 
> 赞同：2
> 
> 时间：2012-09-11T19:02:07.690
> 
> 标签：java, jakarta-ee, concurrency, java-ee-6

我需要实现一些机制来防止用户同时编辑相同的对象。这是我的申请流程：

1.  转到“列表”页面
2.  选择行以编辑表单数据表
3.  单击编辑按钮（导航到“编辑”页面）
4.  更改数据
5.  单击“保存”或“取消”（导航回“列表”页面）

我希望我可以在第 3 步检查。如果另一个用户正在编辑相同的记录（相同的 id）并显示信息，例如“对不起，另一个用户正在编辑这个”。

我的想法是保留他们当前正在编辑的已登录用户和表名 + id 的地图。为此，我将使用应用程序范围的 bean（例如 EJB 3.1 `@Singleton`）。你能指出这个解决方案的弱点吗？你能提出其他建议吗？

我使用 Java EE 6、Seam3、Glassfish 3 和 Oracle DB 11。我使用 MyBatis，没有 JPA 框架。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T19:12:49.630

最好有某种机制来接受明确识别的更改，并且在应用更改时，检测更改是否是在与现在存在的数据不同的副本上启动的，并引发异常。

这种工作流程避免了“我无法拯救公司，因为 CA 有人开始更改关键记录，然后又去吃午饭”的恐惧。

[阅读Subversion 书](http://svnbook.red-bean.com/en/1.7/index.html)的前几章。虽然您目前不关心数据版本控制，但与旧的“图书馆”系统相比，冲突场景更完整，也更经过深思熟虑，在旧的“图书馆”系统中，共享项目只要由一个人拥有，就无法使用。

# html - IE9 期间换行错误

> ID：12376245
> 
> 赞同：5
> 
> 时间：2012-09-11T19:02:22.750
> 
> 标签：html, css, internet-explorer-9

我刚刚发现了一个 IE9 错误的小宝石。似乎 IE9 没有将句点之前的空格识别为断点。如在域或文件扩展名列表中。在 IE9 中打开以下小提琴。

[http://jsfiddle.net/cssguru/nNnzM/1/](http://jsfiddle.net/cssguru/nNnzM/1/)

我尝试使用转义字符，但没有帮助。关于解决方法的任何建议？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-11T20:10:12.680

这是一个令人讨厌的功能，但它可能是故意的，供应商不认为它是一个错误。相反，它被认为是实现[Unicode 换行规则](http://www.cs.tut.fi/~jkorpela/unicode/linebr.html)（这在某种程度上是相当奇怪的）。根据这些规则，句点（或他们称之为 FULL STOP）具有换行类 IS、中缀数字分隔符和“当不用于数字上下文时，中缀分隔符是句尾标点符号。因此，他们总是事先防止休息。”</p>

为了处理这些问题，现在最好在普通空格和句点之间插入 U+200B ZERO WIDTH SPACE，例如

```
.web &#x200b;.shop &#x200b;.blog &#x200b;.nyc ... 
```

U+200B 是一个控制字符，允许在原本不允许的地方换行。

旧的 IE 版本 (IE 6) 可能会遇到困难，在 U+200B 的位置显示不可表示字符的符号。另一种方法，`<wbr>`标签，不会有这个问题，但似乎 IE 8 和更新版本经常无法尊重这个古老的标签（也许是因为它从未达到任何标准，尽管它很有用）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T19:21:18.293

我[在您的 Fiddle 的此更新中添加了自动换行声明，](http://jsfiddle.net/nNnzM/2/)这似乎已经解决了这个问题。

# android - Android检查某些平板电脑上的网络连接崩溃

> ID：12376247
> 
> 赞同：1
> 
> 时间：2012-09-11T19:02:30.370
> 
> 标签：android, crash, tablet, connectivity

我知道这里已经问过这个话题，但我不明白为什么我的代码没有按预期工作。我需要在启动我的应用程序时检查数据连接，但它在某些平板电脑（如 Nexus 7）上崩溃，但不是全部。

我的代码：

```
public static boolean getNetworkState(Context pContext)
{
    ConnectivityManager connect =  (ConnectivityManager)pContext.getSystemService(Context.CONNECTIVITY_SERVICE);

    if(connect != null)
    {
        if (connect.getNetworkInfo(ConnectivityManager.TYPE_MOBILE).isConnectedOrConnecting())
        {
            return true;
        }
        else 
        {
            return false;
        }
    }
    else
        return false;
}

public static boolean getWifiState(Context context)
{
    ConnectivityManager connect =  (ConnectivityManager)context.getSystemService(Context.CONNECTIVITY_SERVICE);
    if ( connect.getNetworkInfo(ConnectivityManager.TYPE_WIFI).isConnectedOrConnecting())
    {
        return true;
    }
    else 
    {
        return false;
    }
} 
```

连接检查：

```
if(Commons.getNetworkState(this) || Commons.getWifiState(this))
        {
            loadData();
        }
        else
        {
            Commons.getConnectivityErrorMessage(this);
        } 
```

通常，如果平板电脑不支持网络连接，“getNetworkState”中的“connectivity”对象应该为空，但似乎并非如此，因为它在线崩溃

```
 if (connect.getNetworkInfo(ConnectivityManager.TYPE_MOBILE).isConnectedOrConnecting()) 
```

这里有什么问题？权限已经写好了

编辑：不幸的是，我没有平板电脑来测试这个问题。我只是在开发者控制台上有用户报告。使用 Nexus 7 的用户报告了以下报告：

```
java.lang.RuntimeException: Unable to resume activity {com.meteociel.fr/com.meteociel.fr.activities.MeteocielActivity}: java.lang.RuntimeException: Unable to resume activity {com.meteociel.fr/com.meteociel.fr.activities.HomeActivity}: java.lang.NullPointerException
at android.app.ActivityThread.performResumeActivity(ActivityThread.java:2575)
at android.app.ActivityThread.handleResumeActivity(ActivityThread.java:2603)
at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2089)
at android.app.ActivityThread.access$600(ActivityThread.java:130)
at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:137)
at android.app.ActivityThread.main(ActivityThread.java:4745)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:511)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
at dalvik.system.NativeStart.main(Native Method)
Caused by: java.lang.RuntimeException: Unable to resume activity {com.meteociel.fr/com.meteociel.fr.activities.HomeActivity}: java.lang.NullPointerException
at android.app.ActivityThread.performResumeActivity(ActivityThread.java:2575)
at android.app.LocalActivityManager.moveToState(LocalActivityManager.java:178)
at android.app.LocalActivityManager.dispatchResume(LocalActivityManager.java:523)
at android.app.ActivityGroup.onResume(ActivityGroup.java:61)
at com.meteociel.fr.activities.MeteocielActivity.onResume(MeteocielActivity.java:69)
at android.app.Instrumentation.callActivityOnResume(Instrumentation.java:1184)
at android.app.Activity.performResume(Activity.java:5082)
at android.app.ActivityThread.performResumeActivity(ActivityThread.java:2565)
... 12 more
Caused by: java.lang.NullPointerException
at com.meteociel.fr.classes.Commons.getNetworkState(Commons.java:36)
at com.meteociel.fr.activities.HomeActivity.onResume(HomeActivity.java:98)
at android.app.Instrumentation.callActivityOnResume(Instrumentation.java:1184)
at android.app.Activity.performResume(Activity.java:5082)
at android.app.ActivityThread.performResumeActivity(ActivityThread.java:2565)
... 19 more 
```

编辑 2：我使用的所有权限：

```
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" /> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-12T21:20:23.363

此代码现在有效：

```
public static boolean getNetworkState(Context pContext)
    {
        ConnectivityManager connect = null;
        connect =  (ConnectivityManager)pContext.getSystemService(pContext.CONNECTIVITY_SERVICE);

        if(connect != null)
        {
            NetworkInfo result = connect.getNetworkInfo(ConnectivityManager.TYPE_MOBILE);
            if (result != null && result.isConnectedOrConnecting())
            {
                return true;
            }
            else 
            {
                return false;
            }
        }
        else
            return false;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-23T14:30:32.380

如果 wifi 或移动数据连接关闭，此函数将返回 false。如果打开，它将返回 true。

```
boolean IsThereNetkork(){
    boolean flag = false,mobile=false,wifi=false;

    ConnectivityManager manager=(ConnectivityManager) this.getSystemService(Context.CONNECTIVITY_SERVICE);
    NetworkInfo activenetwork=manager.getActiveNetworkInfo();   
    if(activenetwork!=null){
        mobile=activenetwork.getType()==ConnectivityManager.TYPE_MOBILE;
        wifi=activenetwork.getType()==ConnectivityManager.TYPE_WIFI;
    if(activenetwork.isConnected()||activenetwork.isConnectedOrConnecting()){
        if(wifi==true||mobile==true){
            flag=true;
        }
        else if(wifi==false||mobile==false){
            flag=false;
        }
    }
    }
    else {
        flag=false;
    }
    return flag;
} 
```

# java - java：使用方法的时间不好，也没有返回它应该的东西。

> ID：12376248
> 
> 赞同：0
> 
> 时间：2012-09-11T19:02:30.883
> 
> 标签：java, variables, methods, instance

我已经调试了好几个小时了。检测碰撞。下面的代码工作正常。

```
while (numberOfTurns >= 0)                                      
            {   
        GObject collision = getElementAt(ball.getX(),ball.getY());
        } 
```

它将在屏幕上获取任何与球碰撞的图形对象并将其返回。但是，这不是我想要设计程序的方式。但改为使用单独的方法进行碰撞检测，如下所示：

```
 while (numberOfTurns >= 0)                                      
        {   
        getCollidingObject();
        } 
```

这是方法，它只是返回自己

```
private GObject getCollidingObject()
{       
    return getElementAt (ball.getX(),ball.getY());
} 
```

然后我将它分配给这个私有实例变量

```
private GObject collider = getCollidingObject(); 
```

但！！！它不起作用，它只是返回null。我发布的第一个代码片段工作正常......有人知道这里发生了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T19:05:07.703

您说您正在将返回值分配给`getCollidingObject()`私有*实例变量*。使用您发布的代码，该调用仅在构建对象时进行*一次*，而不是每次您想要结果时。尝试：

```
while (numberOfTurns >= 0)                                      
    {   
    GObject collision = getCollidingObject();
    } 
```

# c# - Azure 缓存编程配置导致错误代码 ERRCA0029 子状态 ES0001 用户传递的授权令牌无效

> ID：12376249
> 
> 赞同：0
> 
> 时间：2012-09-11T19:02:33.957
> 
> 标签：c#, .net, azure, azure-caching, azure-sdk-.net

我正在尝试基于[http://msdn.microsoft.com/en-us/library/windowsazure/gg618003](http://msdn.microsoft.com/en-us/library/windowsazure/gg618003)上的代码的概念证明。如果我使用 app.config 设置，则可以访问此缓存。当我将应用程序切换为使用编程配置时，我一直收到此错误。我已经尝试过[以编程方式配置 Azure 缓存无法验证](https://stackoverflow.com/questions/9633783/azure-cache-programatically-configuration-fail-to-verify)，并且许多其他解决方案都无济于事。

这是我的代码片段。

{代码}

```
 String                              acsKey = "AcsKey removed intentionaly";
        DataCacheFactoryConfiguration       cacheFactoryConfiguration;
        DataCacheSecurity                   dataCacheSecurity;
        DataCacheServerEndpoint[]           serverEndpoints = new DataCacheServerEndpoint[1];
        SecureString                        secureAcsKey = new SecureString();

        serverEndpoints[0] = new DataCacheServerEndpoint("EndPont removed intentionaly", 22243);

        //
        // Create SecureString from string
        //
        foreach (char keyChar in acsKey)
        {
           secureAcsKey.AppendChar(keyChar);
        }
        secureAcsKey.MakeReadOnly();
        dataCacheSecurity  = new DataCacheSecurity(secureAcsKey);

        //
        // Initialize Factory Configuration
        //

        cacheFactoryConfiguration = new DataCacheFactoryConfiguration(); // This line throws exception. Note that the key is yet to be assigned to SecurityProperties as per documentation.
        cacheFactoryConfiguration.Servers = serverEndpoints;
        cacheFactoryConfiguration.SecurityProperties = dataCacheSecurity;

        _cacheFactory = new DataCacheFactory(cacheFactoryConfiguration);
        _cache = _cacheFactory.GetDefaultCache(); 
```

{代码}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T21:01:53.913

尝试在创建时传递所有参数而不是在创建后传递？

```
 var configFactory = new DataCacheFactoryConfiguration
                            {
                                Servers =
                                    new List<DataCacheServerEndpoint>
                                        {new DataCacheServerEndpoint(cacheServer, cachePort)},
                                SecurityProperties =
                                    new DataCacheSecurity(Encryption.CreateSecureString(cacheAuthorization),
                                                          true)
                            }; 
```

# php - Codeigniter $this->input->post() 为空，而 $_POST 正常工作

> ID：12376251
> 
> 赞同：20
> 
> 时间：2012-09-11T19:02:43.743
> 
> 标签：php, codeigniter, post

在安装 codeigniter 时，我正在尝试使用内置`$this->input->post('some_data')`函数，但`$this->input->post()`它是一个空数组。

A`print_r($_POST)`是否完整且正确地给出了所有变量？

根据codeigniter docs，输入类“由系统自动初始化，因此无需手动执行”，让我想知道我还打算做什么。

关于我应该如何尝试使其正常工作的任何想法？

谢谢！

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-05-28T16:00:48.063

如果您的视图看起来像这样（正确），您可以检查：

```
<form method="post" action="/controller/submit/"> 
```

vs（不起作用）：

```
<form method="post" action="/controller/submit"> 
```

这里的第二个是不正确的，因为它重定向而不携带 post 变量。

**解释：**

当 url 末尾没有斜线时，表示 this 指向一个文件。

现在，当 Web 服务器查找该文件时，它会发现这确实是一个目录，并在最后向浏览器发送一个重定向，并带有一个斜杠。

浏览器使用斜杠对新 URL 进行新查询，但不发布表单内容。这就是表单内容丢失的地方。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-09-08T20:40:59.357

试试这个，改变

```
$config['base_url'] = 'http://mywebsite.cl/'; 
```

至

```
$config['base_url'] = 'http://www.mywebsite.cl/'; 
```

大多数情况下，某些提供商会自动将 www 、 https 等添加到您的网址中，这会导致此问题

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-25T06:19:53.910

使用`$this->input->post()` 初始化表单助手。您可以在 config.xml 中默认执行此操作。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-11T21:25:55.750

您可以寻求一些帮助来解决此问题。

1.  核心 CodeIgniter 文件中是否有任何更改或扩展。检查`system/core/Input.php`是否为原始副本以及其他文件的内容`application/library`和内容`application/core`

2.  其他输入法有用吗？在您的电话旁边运行时会产生什么结果`print_r`？

    `echo $this->input->user_agent();`

3.  输出什么数据`print_r`？寻找`application/config/config.php`线路`$config['global_xss_filtering']`。这是设置为`TRUE`还是`FALSE`？如果`TRUE`跨站点脚本过滤器可能与您发布的数据有问题（我认为这不太可能）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-06-02T02:52:56.827

更改您的表单操作，

由此：

```
<form method="post" action="<?=base_url()?>yourprocess"> 
```

进入这个：

```
<form method="post" action="<?=base_url()?>index.php/yourprocess"> 
```

基本上，您只需要在 base_url() 之后添加“index.php”：

> action=" **http://www.yourdomain.com/index.php/yourprocess** "

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-02-17T15:47:43.717

从 2.2.x 升级到 3.0.x - 原因 post 方法失败。如果要升级 CI 3.x，需要将 index_page 保留在配置文件中。还要检查 .htaccess 文件中的 mod_rewrite。[CI_3.x](https://www.codeigniter.com/userguide3/installation/upgrade_300.html)

```
$config['index_page'] = ''; // ci 2.x
$config['index_page'] = 'index.php'; // ci 3.x 
```

我的 .htaccess

```
<IfModule mod_rewrite.c>
 RewriteEngine On
 RewriteBase /
 RewriteCond %{REQUEST_FILENAME} !-f
 RewriteCond %{REQUEST_FILENAME} !-d
 RewriteRule . /index.php [L]
</IfModule>

<IfModule !mod_rewrite.c>
 ErrorDocument 404 /index.php
</IfModule> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-12-17T14:44:04.100

利用

```
var_dump($this->input->post()); 
```

请看屏幕截图。 [在这里，我正在打印所有后数组值](https://i.stack.imgur.com/z9xJ2.png)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-07-29T18:39:46.567

我的问题是 ajax 调用。我正在使用这个：

`type: 'posts',`

代替

`type: 'post',`

语法，D'oh！

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2020-11-11T03:35:42.330

您缺少父构造函数。加载控制器时，您必须在控制器构造函数中调用父 CI_Controller 类构造函数

* * *

## 回答 #10

> 赞同：-2
> 
> 时间：2012-10-23T21:36:49.730

问题是`$this->input->post()`不支持获取所有的 POST 数据，只支持特定的数据，例如`$this->input->post('my_post_var').`这就是为什么`var_dump($this->input->post());`为空。

一些解决方案，坚持使用 $_POST 来检索所有 POST 数据，或者从您需要的每个 POST 项目中分配变量，例如：

```
// variables will be false if not post data exists
$var_1 = $this->input->post('my_post_var_1');
$var_2 = $this->input->post('my_post_var_2');
$var_3 = $this->input->post('my_post_var_3'); 
```

**但是，由于上面的代码不是很干，我喜欢做以下事情：**

```
if(!empty($_POST)) 
{
    // get all post data in one nice array
    foreach ($_POST as $key => $value) 
    {
        $insert[$key] = $value;
    }
}
else
{
    // user hasen't submitted anything yet!
} 
```

* * *

## 回答 #11

> 赞同：-2
> 
> 时间：2015-12-11T21:01:41.757

今天终于把问题解决了。问题出在**`.htaccess`**文件上。

自学：必须更彻底地[阅读 CODEIGNITER 文档。](https://codeigniter.com/user_guide/general/urls.html?highlight=htaccess)

* * *

## 回答 #12

> 赞同：-3
> 
> 时间：2013-03-15T11:32:51.203

要查看所有帖子值，请尝试`var_dump($this->input->post(ALL));`

* * *

## 回答 #13

> 赞同：-3
> 
> 时间：2016-01-11T02:15:57.920

解决如下：

以下是否排除将在控制器上运行 $ this-> input-> post ('name' ) 的重定向 .htacess ，在我的情况下它运行良好。

腹肌，何塞·卡马戈]

# python - PyQt - 如何将多个信号连接到同一个小部件

> ID：12376253
> 
> 赞同：1
> 
> 时间：2012-09-11T19:02:45.570
> 
> 标签：python, pyqt4

```
[ ]All1           [ ]All2        

[ ]checkbox1A     [ ]checkbox1B

[ ]checkbox2A     [ ]checkbox2B 
```

根据上面的图表，需要做一些事情：

1.  All 复选框仅影响其所在列的开/关，并检查该列中所有复选框的开/关。
2.  所有复选框成对工作，所以如果 checkbox1A 是开/关，checkbox1B 需要开/关
3.  如果选中了 All 复选框，然后用户继续选中列中的一个或多个复选框，则 All 复选框应取消选中，但所有已选中的复选框应保持选中状态。

所以实际上这更像是连锁反应设置。如果复选框 All1 处于打开状态，则 chieckbox1A 和 2A 将处于打开状态，并且因为它们处于打开状态，所以 checkbox1B 和 2B 也处于打开状态，但复选框 All2 保持关闭状态。我尝试根据此逻辑连接信号，但只有配对逻辑 100% 有效。All 复选框逻辑仅在 50% 的情况下有效，而且不准确，如果不关闭所有已选中的复选框，我无法关闭 All 复选框。

真的真的很需要帮助...TT

示例代码：

```
cbPairKeys = cbPairs.keys()
    for key in cbPairKeys:
        cbOne = cbPairs[key][0][0]
        cbTwo = cbPairs[key][1][0]
        cbOne.stateChanged.connect(self.syncCB)
        cbTwo.stateChanged.connect(self.syncCB)

def syncCB(self):               
    pairKeys = cbPairs.keys()
    for keys in pairKeys:
        cbOne = cbPairs[keys][0][0]
        cbOneAllCB = cbPairs[keys][0][4]
        cbTwo = cbPairs[keys][1][0]
        cbTwoAllCB = cbPairs[keys][1][4]

        if self.sender() == cbOne:
            if cbOne.isChecked() or cbTwoAllCB.isChecked():
                cbTwo.setChecked(True)
            else:
                cbTwo.setChecked(False)
        else:
            if cbTwo.isChecked() or cbOneAllCB.isChecked():
                cbOne.setChecked(True)
            else:
                cbOne.setChecked(False) 
```

**编辑**

感谢用户 Avaris 的帮助和耐心，我能够将代码简化为更简洁的代码，并且 100% 的时间在第一个和第二个期望的行为上工作：

```
#Connect checkbox pairs     
cbPairKeys = cbPairs.keys()
    for key in cbPairKeys:
        cbOne = cbPairs[key][0][0]
        cbTwo = cbPairs[key][1][0]
        cbOne.toggled.connect(cbTwo.setChecked)
        cbTwo.toggled.connect(cbOne.setChecked) 

#Connect allCB and allRO signals    
cbsKeys = allCBList.keys()
    for keys in cbsKeys:
        for checkbox in allCBList[keys]:
            keys.toggled.connect(checkbox.setChecked) 
```

当用户现在有选择地关闭模块化复选框时，只需要关闭 All 复选框的帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T02:01:43.170

如果我了解您的数据结构，我有一个解决方案。如果我错了，请纠正我：`allCBList`是一个`dict`（令人困惑的名字！:)）。它的键是`all*`复选框。一个值`allCBList[key]`是`list`与该复选框关联的`all`复选框。对于您的示例结构，它将是这样的：

```
{ All1 : [checkbox1A, checkbox1B],
  All2 : [checkbox2A, checkbox2B]} 
```

然后你需要做的是：当一个复选框被切换并且它处于状态时，如果所有其他复选框都处于`checked`状态，那么你需要检查该复选框。否则它将被取消选中。`All*``checked`

```
for key, checkboxes in allCBList.iteritems():
    for checkbox in checkboxes:
        checkbox.toggled.connect(lambda checked, checkboxes=checkboxes, key=key: key.setChecked(checked and all(checkbox.isChecked() for checkbox in checkboxes)) 
```

我想，这个陈述需要一点解释：

```
lambda checked, checkboxes=checkboxes, key=key: 
```

`lambda`创建连接到信号的可调用对象。`toggled`传递复选框状态，并将其传递给`checked`变量。`checkboxes=checkboxes`和`key=key`部分将当前值传递给lambda`checkboxes`的`key`参数。（你需要这个，因为 s 中的闭包`lambda`）

接下来是：

```
key.setChecked(...) 
```

我们正在设置相应复选框的`checked`状态。在这里面：`key``All*`

```
checked and all(checkbox.isChecked() for checkbox in checkboxes) 
```

`all`是`True`如果里面的所有东西都是`True`，我们检查每个`checkbox`s 状态。`True`如果全部都是`checked`（即`isChecked()`返回`True`），这将返回。

`checked and ...`部分是用来短路的`all`。如果当前复选框变为`unchecked`，那么我们不需要检查其他复选框。`All*`将是`unchecked`。

（**PS**：顺便说一句，你不需要`.keys()`a`dict`来迭代键。你可以迭代`dict`它，它会迭代它的`keys`。）

**编辑**`All*`：为了避免通过单击任何子复选框切换复选框的连锁反应，有必要将`All*`复选框的信号更改为`clicked`，而不是`toggled`。因此，*只有*在用户交互的情况下，`All*`复选框才会影响它们下面的其他复选框。

 *最后，您修改后的代码将是：

```
# Connect checkbox pairs
# you just use the values
# change 'itervalues' to 'values' if you are on Python 3.x
for cbPair in cbPairs.itervalues():
    cbOne = cbPair[0][0]
    cbTwo = cbPair[1][0]
    cbOne.toggled.connect(cbTwo.setChecked)
    cbTwo.toggled.connect(cbOne.setChecked) 

# Connect allCB and allRO signals
# change 'iteritems' to 'items' if you are on Python 3.x
for key, checkboxes in allCBList.iteritems():
    for checkbox in checkboxes:
        key.clicked.connect(checkbox.setChecked)
        checkbox.toggled.connect(lambda checked, checkboxes=checkboxes, key=key: key.setChecked(checked and all(checkbox.isChecked() for checkbox in checkboxes)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T22:26:43.547

您的问题是您的复选框正在连接`toggled`信号**并**在连接的插槽中切换它们的状态，因此再次发出信号（因此插槽再次执行......）并且您会得到不可预测的结果。显然这不是你想要的行为。您可以通过多种方式修复它：

*   通过断开插槽开头的信号并在末尾再次连接它们
*   通过使用一些巧妙的代码来控制信号的重新发射（我认为这是 Avari 的代码以非常紧凑的方式所做的，但我不完全确定）
*   通过使用`clicked`信号，因为当复选框状态更改时它不会重新发出

您采用哪种方法取决于您。以下代码使用第三种方法：

```
 self.cbPair = {}
    self.cbPair['0'] = (QtGui.QCheckBox('all1', parent), 
        QtGui.QCheckBox('all2', parent))
    self.cbPair['1'] = (QtGui.QCheckBox('1a', parent), 
        QtGui.QCheckBox('1b', parent))
    self.cbPair['2'] = (QtGui.QCheckBox('2a', parent), 
        QtGui.QCheckBox('2b', parent))

    for v in self.cbPair.values():
        for cb in v:
            cb.clicked.connect(self.updateCB)

def updateCB(self):
    cb = self.sender()
    is_checked = cb.isChecked()
    id = str(cb.text())
    try:
        # Update a whole column
        column = int(id[-1]) - 1
        rows = ('1', '2')
    except ValueError:
        # Update a row and the headers row
        rows = (id[0], )
        column = {'a': 1, 'b': 0}.get(id[-1])
        if not is_checked:
            for c in (0, 1):
                self.cbPair['0'][c].setChecked(is_checked)
    for r in rows:
        self.cbPair[r][column].setChecked(is_checked) 
```

请注意，我使用复选框文本作为 UID 来自哪一行并计算列值。如果您想为您的复选框使用不同的文本标签，您可能需要将 UID 设置为每个复选框的属性。*

# php - php 字符串比较失败，self::mystring

> ID：12376254
> 
> 赞同：1
> 
> 时间：2012-09-11T19:02:49.420
> 
> 标签：php, digest-authentication

下面的课程显示了我的情况 - 我没有得到正确的结果。

```
class Test {
    public static $API_KEY = 'B0gTFoDazzV7e1EgutQg';
    public static $API_SECRET = 'S5axjxfvpO2uNPocdXE';

    public function test(){

        $a=  self::$API_KEY.":".self::$API_SECRET;
        $'B0gTFoDazzV7e1EgutQg:S5ddjxfvpO2uNPocdXE';
           if ($a==$b){
                 echo "True";
                 echo var_dump($a);
                 echo var_dump($b);
           } else {
                 echo "False";
                 echo strlen($a);
                 echo strlen($b);
                 echo var_dump($a);
                 echo var_dump($b);
          }

    }
}

$a=  new Test; 
```

这应该是一样的！应该是真的……

这应该是真的！！有什么想法/？>

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T20:24:34.403

你的两个字符串不一样...

```
 api_secret:  S5axjxfvpO2uNPocdXEev (first part)
                ^^
 compared to: S5ddjxfvpO2uNPocdXEev
                ^^ 
```

# java - 从 Linux 64 位访问 javax.smartcardio

> ID：12376257
> 
> 赞同：24
> 
> 时间：2012-09-11T19:02:55.800
> 
> 标签：java, smartcard, pcsc

我正在尝试使用带有以下代码的 javax.smartcardio API 加载智能卡终端：

```
public CardTerminal getReadyCardTerminal() throws CardException {

    TerminalFactory factory = TerminalFactory.getDefault();
    CardTerminals terminals = factory.terminals();
    List<CardTerminal> list = terminals.list(State.CARD_PRESENT);

    while (list.isEmpty()) {
        terminals.waitForChange(1000);
        list = terminals.list(State.CARD_PRESENT);
    }
    CardTerminal cardTerminal = list.get(0);
    return cardTerminal;
} 
```

...而且我总是遇到以下异常：

```
java.lang.IllegalStateException: no terminals
at javax.smartcardio.TerminalFactory$NoneCardTerminals.waitForChange(TerminalFactory.java:145) 
```

在 Windows Vista/7 上一切正常，但我无法让它在 Linux 上运行。我正在使用 Ubuntu 12.04 64 位。

我使用以下命令安装了 pcscd 服务：

```
sudo apt-get install libccid pcscd libpcsclite-dev libpcsclite1
sudo service pcscd start 
```

pcsc_scan 命令会打印：

```
PC/SC device scanner
V 1.4.18 (c) 2001-2011, Ludovic Rousseau <ludovic.rousseau@free.fr>
Compiled with PC/SC lite version: 1.7.4
Using reader plug'n play mechanism
Scanning present readers...
0: OMNIKEY CardMan 3x21 00 00

Tue Sep 11 15:44:49 2012
Reader 0: OMNIKEY CardMan 3x21 00 00
  Card state: Card inserted, 
  ATR: <some hexa codes>
  ... 
```

所以一切看起来都很好，但是智能心脏不起作用。我正在尝试使用 Oracle 和 OpenJDK 1.7.0_05、32 和 64 位。

该代码在 Ubuntu 32 位环境中使用 OpenJDK 运行正常（但不是使用 Oracle JDK，不知道为什么）。所以我认为这是从 Java 到 PC/SC 库的 64 位桥的问题。

有任何想法吗？

谢谢。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-09-12T10:55:55.427

我想我找到了解决方法，因为我遇到了类似的问题。在[来自 ubuntu](https://bugs.launchpad.net/ubuntu/+source/openjdk-7/+bug/898689)的错误报告中，它说 javax.smartcardio 库在错误的目录中搜索 PC/SC 库。

通过在我的机器上指定 PC/SC 库的路径，就像 bugreport 提到的那样，我让它工作了。

错误报告中的路径对我来说是错误的，我使用的是 64 位 Fedora，其中 pc/sc 库安装在 /usr/lib64/libpcsclite.so.1

所以我的解决方法是像这样指定java的库路径：

```
java -Dsun.security.smartcardio.library=/usr/lib64/libpcsclite.so.1 
```

根据您的 Linux 发行版，`libpcsclite.so.1`实际位置可能会有所不同，也可能位于`/lib/x86_64-linux-gnu/libpcsclite.so.1`（即 Kubuntu 15.04）。在这种情况下，这样称呼它：

```
java -Dsun.security.smartcardio.library=/lib/x86_64-linux-gnu/libpcsclite.so.1 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-12-30T03:53:43.453

我正在使用带有 debian arm 版本的树莓派

首先找到 libpcsclite 的位置：

```
$ ldd -r /usr/bin/pcsc_scan 
```

然后使用 libpcsclite 位置：

```
java -Dsun.security.smartcardio.library=/usr/lib/arm-linux-gnueabihf/libpcsclite.so.1 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-03-03T12:28:39.570

对于使用 64 位机器在 Ubuntu 14 上苦苦挣扎的其他人。我发现.so文件实际上位于以下目录中

/usr/lib/x86_64-linux-gnu/libpcsclite.so

因此，使用以下设置运行我的应用程序对我有用

-Dsun.security.smartcardio.library=/usr/lib/x86_64-linux-gnu/libpcsclite.so

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2016-06-14T05:24:50.807

调用程序时需要提供 libpcsclite.so.1 的路径，如下所示

`java -Dsun.security.smartcardio.library=/path/to/libpcsclite.so.1`

如果您不知道库的路径，请使用以下命令

```
find /usr/lib -name libpcsclite.so.1 
```

这通常会显示您机器上的路径。我在 Ubuntu 10（32 位）和 Ubuntu 15（32 位和 64 位）上都使用了它

如果你像我一样懒惰，你可以在你的程序中包含这部分代码，然后再使用 javax.smartcardio 库

```
 try {
            String comm[] = { "find", "/usr", "/lib", "-name",
                    "libpcsclite.so.1" };
            Process p = Runtime.getRuntime().exec(comm);

            BufferedReader reader = new BufferedReader(
                    new InputStreamReader(p.getInputStream()));

            while ((line = reader.readLine()) != null && !line.equals("")) {
                if (line.contains("libpcsclite.so.1")) {
                System.setProperty("sun.security.smartcardio.library",line);
                    break;
                }

            }
            p.waitFor();

        } catch (Exception e) {

            e.printStackTrace();
        } 
```

现在您可以像往常一样运行您的代码，而无需包含 libpcsclite.so.1 的路径

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-07-10T12:47:45.103

除了提供路径作为参数的解决方案，如下所示：

```
java -Dsun.security.smartcardio.library=/usr/lib64/libpcsclite.so.1 
```

如果您不想在每次调用 JVM 时都提供此信息，请将其设置在环境变量 _JAVA_OPTIONS 和/或 JAVA_OPTS 中：

```
export _JAVA_OPTIONS="-Dsun.security.smartcardio.library=/usr/lib64/libpcsclite.so.1"
export JAVA_OPTS="-Dsun.security.smartcardio.library=/usr/lib64/libpcsclite.so.1" 
```

由于这是影响整个系统的错误的解决方法，因此恕我直言，在系统范围内应用此解决方法也是有意义的。

JAVA_OPTS 具有本地范围，必须由运行代码的脚本进行评估；_JAVA_OPTIONS 应该由 JRE 自动评估。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-09-24T19:24:13.850

另一种方法（我最喜欢的）是创建一些符号链接。

它的优点是可以在系统范围内工作（没有 jvm 参数，没有环境变量）。

对于我（心爱的）debian jessie amd64：

```
ln -s /usr/lib/x86_64-linux-gnu/libpcsclite.so libpcsclite.so
ln -s /usr/lib/x86_64-linux-gnu/libpcsclite.so.1 libpcsclite.so.1
ln -s /usr/lib/x86_64-linux-gnu/libpcsclite.so.1.0.0 libpcsclite.so.1.0.0 
```

注意：这可能需要*超级用户*访问权限。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2018-10-15T20:52:56.717

补充@AshanPerera的答案，因为有时每次搜索可能会很慢，您可以在第一次搜索它，并将位置存储在一个文件中，然后从那时起读取它：

```
 try {

        String filename = "libpcsclite.location"; 
        File propertyFile = new File(filename);
        if(propertyFile.createNewFile()) 
        {   
            String commandWithArguments[] = { "find", "/usr", "/lib", "-name","libpcsclite.so.1" };
            Process searchProcess = Runtime.getRuntime().exec(commandWithArguments);
            BufferedReader searchReader = new BufferedReader(new InputStreamReader(searchProcess.getInputStream()));
            String propertyValue;
            while ( (propertyValue = searchReader.readLine()) != null && !propertyValue.equals("")) 
            {
                if (propertyValue.contains("libpcsclite.so.1")) {
                    BufferedWriter propertyWriter = new BufferedWriter(new OutputStreamWriter(new FileOutputStream(propertyFile)));
                    propertyWriter.write(propertyValue);
                    propertyWriter.close();
                    System.setProperty("sun.security.smartcardio.library",propertyValue);
                    break;
                }
            }
            searchProcess.waitFor();
        }
        else 
        {  
            BufferedReader propertyReader = new BufferedReader(new InputStreamReader(new FileInputStream(propertyFile)));                 
            String propertyValue = propertyReader.readLine(); 
            System.setProperty("sun.security.smartcardio.library",propertyValue);       
        }
    } catch (Exception e) {

        e.printStackTrace();
    } 
```

# c# - 如何从 C# WebBrowser 获取所有顶级 htmlelements？

> ID：12376261
> 
> 赞同：2
> 
> 时间：2012-09-11T19:03:16.080
> 
> 标签：c#, .net, webbrowser-control

我想在 Web 浏览器上显示 DOM，其中包含所有注释和 html、head、body 等。保留其结构。目前，我只能从节点 html 开始。Document.All 没有帮助。我能看到的唯一方法是 webBrowser1.Document.Body 但我会错过评论、头部等。然后如果我使用 Document.All 那么这给了我所有的节点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T09:13:08.997

我认为使用 WebBrowser 控件获得所需内容的唯一选择是使用`Document.All`. 尽管这不仅为所有元素提供了顶级元素，但每个元素都有一个`.Parent`元素属性，因此您可以遍历它们（或使用 Linq）并仅获取具有`<body>`或`<head>`作为父元素的元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T09:05:59.687

您应该能够查询（某处有一个属性）特定项目是否有子节点，您还可以查询它是否是父节点或特定项目是否有父节点，以及是否有，丢弃，并且您可以继续查询诸如 item.parent.parent 之类的父级（请检查智能感知以获取确切的对象/属性名称），如果它不返回任何内容，则意味着只有一个父级（假设 item.parent 不返回任何内容） ，并且您可以组织节点可以/必须有多深。因此，根据子项或父项检查方法（或两者），您可以选择将其包含在您的集合中或丢弃它。

当然，您可能会获得许多“P”标签或 DIV/SPAN 标签作为您的顶级节点/项目。所以，我假设你有可能不想要这些，所以随意丢弃它们并询问他们的孩子。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T22:03:12.027

正如 hienvd_csuit 所建议的那样，我认为 HTML Agility Pack 是您的最佳选择。如果您仍想使用，可能的解决方案是使用（需要 .NET 4+）`WebBrowser`直接访问非托管 DOM 。`dynamic`例如，您可以执行以下操作：

```
dynamic dom = wb.Document.DomDocument;
foreach (dynamic node in dom.childNodes)
{
    Console.WriteLine ("{0} - {1} - {2}", node.nodeType, node.nodeName, node.nodeValue);
} 
```

当然，您需要了解 DOM 的结构，因为智能感知不适用于动态对象；[你可以在这里](http://www.w3schools.com/jsref/default.asp)找到一些关于它的信息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-11T19:10:16.637

尝试使用[HTMLAgilityPack](http://htmlagilitypack.codeplex.com/)，它支持 Xpath，因此您可以根据需要获取任何节点。

# three.js - 三个js可点击的立方体纹理

> ID：12376263
> 
> 赞同：2
> 
> 时间：2012-09-11T19:03:23.970
> 
> 标签：three.js

我是 JavaScript 和 HTML 的新手。我在学习过程中。我成功地制作了一个立方体并对其进行纹理化。我还想添加不同的 html 链接以在“iframe”中打开页面。

我用[http://mrdoob.github.com/three.js/examples/canvas_geometry_cube.html的例子](http://mrdoob.github.com/three.js/examples/canvas_geometry_cube.html)

这就是我所做的[http://olcaysahin.com/pages/cube.html](http://olcaysahin.com/pages/cube.html)

如果有人知道任何教程或类似方法可以使每张脸都可点击，不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T19:18:24.613

看看[http://mrdoob.github.com/three.js/examples/canvas_interactive_cubes.html](http://mrdoob.github.com/three.js/examples/canvas_interactive_cubes.html)。

from 变量`intersects`，您可以确定从 the`faceIndex`或face 中单击了哪个面`normal`。

# c# - 删除 gridview 选择器列

> ID：12376264
> 
> 赞同：8
> 
> 时间：2012-09-11T19:03:32.177
> 
> 标签：c#, winforms, datagridview

我确信这个问题的答案非常明显，但是对于我的一生，我无法弄清楚如何从默认的 winforms gridview 中删除“选择器”列。（红色箭头指向的列）。

![在此处输入图像描述](../Images/5a64380c39ebd9a7517c731ecb68c5b8.png)

我尝试以编程方式删除该列`gridview.Columns[0].Remove`，但这只是删除了我的第一个数据列。它也没有出现在“列集合”中，而且我已经使用了所有看起来有希望的设置。

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-09-11T19:04:58.150

在 GridView 中设置为`RowHeadersVisible`（它是一个属性）`False`

# android - 通过 SQLite Database Browser 2.0 b1.exe 处理 Android sql lite 数据库

> ID：12376266
> 
> 赞同：0
> 
> 时间：2012-09-11T19:03:35.063
> 
> 标签：android, database, sqlite

我的 android 应用程序中有一个数据库。我想通过 SQLite Database Browser 2.0 b1.exe 在我的数据库中添加新记录。我已经从数据->数据->{我的包}->数据库中提取数据库。但是，当我尝试通过 SQLite 数据库浏览器 2.0 b1.exe 添加新记录时，我发现错误提示“如果表包含声明为 NOT NULL 的字段，请选择 EDIT->PREFERENCES 并调整新记录的默认值以插入空细绳”。我相应地这样做了，但又发现了同样的错误。

# c# - 使用 C# 删除重复项

> ID：12376269
> 
> 赞同：0
> 
> 时间：2012-09-11T19:03:45.050
> 
> 标签：c#, sql

> **可能的重复：**
> [具有不同主键的 SQL 重复](https://stackoverflow.com/questions/2019039/sql-duplicates-with-different-primary-keys)

我的查询返回gridview 中的所有重复项。但是，当我从重复项中选择一条记录时，两条记录都会被删除。当我对用户列表中的所有用户使用直接选择时，删除选项将仅删除选定的行。我怀疑当我从 dup 中选择一条记录时，它正在使用 select 命令，因此同时抓取了两个主键。

```
SelectCommand="SELECT [PKEY], [user] FROM [userlist]
            WHERE LogonName IN (
                SELECT [user]
                FROM [userlist]
                GROUP BY [user]
                HAVING (COUNT([user]) > 1))"
DeleteCommand="DELETE FROM [userlist] WHERE [PKEY] = @PKEY" > 
```

在复选框后面添加代码，这在使用直接选择时有效：

```
if (checkbox.Checked)
            {
                int PKEY = Convert.ToInt32(GridView1.DataKeys[row.RowIndex].Value);
                SqlDataSource1.DeleteParameters["PKEY"].DefaultValue = PKEY.ToString();
                SqlDataSource1.Delete();
            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T19:09:20.253

您必须返回`PrimaryKey`您的`gridView.`，并且当您删除时，您会传递您选择的主键；

您必须确保 PKEY 在您的表上的数据库中被定义为 PrimaryKey

您还可以将 DISTINCT 添加到您的查询中，

```
SELECT DISTINCT ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T19:15:23.583

如果您可以选择任意记录，删除每条记录但每个组的一个简单方法是获取主键的 MAX 并删除所有其他记录：

```
DELETE FROM [userlist]
WHERE PKEY NOT IN (
    SELECT MAX(PKEY) pkey
    FROM [userlist]
    GROUP BY [user]
    ) 
```

# c# - 使用带有 NUnit 的 Sequential 测试属性的数组

> ID：12376272
> 
> 赞同：3
> 
> 时间：2012-09-11T19:03:52.313
> 
> 标签：c#, nunit

我想在数组中使用 NUnit 的 Sequential 属性。

```
string[] oldSitesArray = new string[]
    {
        "http://www.LegacySite.com",
        "http://someURLgoeshere.com"
    };

string[] newSitesArray = new string[]
    {
        "http://www.LegacySiteUpdatedURL.com",
        "http://someURLgoeshereUpdatedSite.com"
    };

[Test]
public void keywordsTest()
{
    Assert.IsTrue(this.scc.metaKeywordsChecker(oldSites, newSites));
} 
```

这里的目标是传入两个数组（使用顺序属性）。一个数组包含旧站点 URL，第二个数组包含迁移的 URL。

metaKeywordsChecker 函数接受两个字符串。一个是旧 URL，另一个是更新后的 URL。我有一个包含 1,700 个 URL 对（数组 #1 和数组 #2）的列表，我需要依次传递到测试中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T19:06:48.320

仍然很确定你想要这个`Range`属性。

```
[Test]
public void keywordsTest([Range(0,1700)] int index)
{
    Assert.IsTrue(this.scc.metaKeywordsChecker(oldSitesArray[index], newSitesArray[index]));
} 
```

或者你可以这样做...

```
[Test]
public void keywordsTest()
{
    foreach(var pair in oldSites.Zip(newSites, (o, n) => new {Old = o, New = n}))
    {
         Assert.IsTrue(this.scc.metaKeywordsChecker(pair.Old, pair.New));
    }
} 
```

# objective-c - 将大量本地图像（106X2）加载到 2 UIScrollView

> ID：12376273
> 
> 赞同：0
> 
> 时间：2012-09-11T19:03:53.227
> 
> 标签：objective-c, xcode, xcode4, ios4, uiscrollview

我有 2 个滚动视图，我需要将 106 个图像加载到每个滚动视图中，下面是我正在使用的代码，但是当我尝试在我的 iphone 4 上测试它时它崩溃了。

每张图片大约 30-40KB，所以大小不是原因。

如果您有任何想法，我将非常感谢！

```
- (void)viewDidLoad
{

[super viewDidLoad];

Images = [[NSMutableArray alloc]init];

Slogans = [[NSMutableArray alloc]init];

    for (int i =1; i<=106; i++) {
        int r = i-1;
        [self.Images addObject:[UIImage imageNamed:[NSString stringWithFormat:@"%da.jpg",i]]];
        [self.Slogans addObject:[UIImage imageNamed:[NSString stringWithFormat:@"%d.jpg",i]]];
        NSLog(@"%d.jpg",i );
        NSLog(@"%da.jpg",i );

        NSLog(@"Images count: %d",self.Images.count);
         NSLog(@"Slogans count: %d",self.Slogans.count);

        //Images
        CGRect frame;
        frame.origin.x = self.ImagesScrollView.frame.size.width * i;
        frame.origin.y = 0;
        frame.size = self.ImagesScrollView.frame.size;
        UIImageView *ImagesSubview = [[UIImageView alloc] initWithFrame:frame];

        ImagesSubview.image = [self.Images objectAtIndex:r];
        [self.ImagesScrollView addSubview:ImagesSubview];
        [ImagesSubview release];

        //Slogans
        CGRect Sframe;
        Sframe.origin.x = self.SlogansScrollView.frame.size.width * i;
        Sframe.origin.y = 0;
        Sframe.size = self.SlogansScrollView.frame.size;
        UIImageView *SlogansSubview = [[UIImageView alloc] initWithFrame:Sframe];

        SlogansSubview.image = [self.Slogans objectAtIndex:r];
        [self.SlogansScrollView addSubview:SlogansSubview];
        [SlogansSubview release];
 }

    [SpageControl setNumberOfPages:Images.count];
    [pageControl setNumberOfPages:Images.count];

    self.ImagesScrollView.contentSize = CGSizeMake(self.ImagesScrollView.frame.size.width * Images.count, self.ImagesScrollView.frame.size.height);

     self.SlogansScrollView.contentSize = CGSizeMake(self.SlogansScrollView.frame.size.width * Slogans.count, self.SlogansScrollView.frame.size.height);

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T19:30:17.310

30-40 kb 的文件大小并没有说明保存这些图像所需的实际内存。

您最好使用 UITableView 并根据需要动态加载图像，或者使用 Apple 的 UIScrollView 示例之一：[PhotoScroller](http://developer.apple.com/library/ios/#samplecode/PhotoScroller/Introduction/Intro.html#//apple_ref/doc/uid/DTS40010080-Intro-DontLinkElementID_2)和[ScrollViewSutie](http://developer.apple.com/library/ios/#samplecode/ScrollViewSuite/Introduction/Intro.html)，其中演示了平铺。

# javascript - 一页中有多个圆形jquery幻灯片？

> ID：12376275
> 
> 赞同：0
> 
> 时间：2012-09-11T19:03:54.377
> 
> 标签：javascript, jquery, slideshow

我正在使用下面链接中的圆形幻灯片放映。

[http://www.htmldrive.net/items/show/779/Lightweight-Circle-slideshow](http://www.htmldrive.net/items/show/779/Lightweight-Circle-slideshow)

有人可以帮我在一个页面中获得多个幻灯片吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T23:06:34.603

弄清楚了！！！！对不同的滑块使用不同的 id，然后在同一个函数中创建所有的初始化语句。

# apache - 如何将不存在的目录重定向到子域

> ID：12376278
> 
> 赞同：0
> 
> 时间：2012-09-11T19:04:01.883
> 
> 标签：apache, .htaccess, mod-rewrite, redirect, subdomain

在过去的 2 个小时里，我试图实现以下目标，但没有成功。

我有一个域（我们称之为 www.test.com），它分配给我主机中的特定文件夹，例如：public_html/test。

现在，我想做的是，我想将特定的 url (www.test.com/move) 重定向到一个存在并分配给 public_html 内的另一个文件夹的子域。

我希望这只发生在测试文件夹中不存在的特定目录（移动）上。

我想这可以通过 .htaccesss 来完成，但我每次都惨败。

关于我想念的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T19:08:05.500

如果您只想执行该特定 URL，这真的很简单。

```
RewriteEngine On
RewriteRule ^move$ http://subdomain.test.com [R=301,L] 
```

# javascript - 如何根据 Jquery 链式语句中的条件在切换和 removeClass 之间切换？

> ID：12376284
> 
> 赞同：0
> 
> 时间：2012-09-11T19:04:19.697
> 
> 标签：javascript, jquery, toggle, removeclass

`tap`我在事件绑定中有以下元素处理。

```
 $el
   .doThis
   .end()
   .find( "a" ).first().removeClass( someClass ); 
```

我需要检查条件`o.direction == "horizontal"`，如果条件为真，我需要`toggle`代替`remove`

但是我无法让它工作。像这样尝试：

```
 $el
   .doThis
   .end()
   .find( "a" ).first().toggleClass( someClass , ( o.direction == "horizontal" ? !isCollapse : event ) ); 
```

如果 正确切换课程`o.direction == "horizontal"`，但如果不是，我不能`remove`代替`toggle`.

**问题：**
有没有办法检查条件并执行`toggle`if 条件满足和`removeClass`if not in a chained jquery 语句？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T19:08:22.797

为了解决我不确定运行时元素状态是什么的问题，并且很难有一个具有该状态的变量，我通常使用数据属性，然后让代码管理它们。

```
<div data-direction="horizontal"> 
```

进而

```
if(element.getAttribute("data-direction") == "horizontal")
{
 //TODO: remove or toggle
} 
```

管理状态

```
element.setAttribute("data-direction","state"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T19:13:02.190

```
$el
   .doThis
   .end()
   .find( "a" ).first()[o.direction == 'horizontal' ? 'toggleClass':'removeClass']( someClass ) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-11T19:13:15.163

该`event`对象不应在`else`条件下使用。您应该`false`改用：

```
.toggleClass( someClass , ( o.direction == "horizontal" ? !isCollapse : false ) ) 
```

这意味着如果`o.direction == "horizontal"`，css 类将根据`isCollapse`值进行切换。否则，css 类将被删除。

# javascript - jQuery 类：附加 html 并调用类中的函数

> ID：12376285
> 
> 赞同：0
> 
> 时间：2012-09-11T19:04:24.453
> 
> 标签：javascript, jquery

问候stackoverflowers，

我正在研究一个 jQuery 类，其中我有一个将一些 html 代码附加到容器的函数。

```
this.displayOptions = function(property, container) {
    for (var i = 0; i < this[property + 'Count']; i++) {
        $(container).append('<a href="#" onclick="' + call_a_function_from_this_class + '; return false"></a>');
    }
} 
```

到目前为止，没有问题。在同一个课程中，我有另一个功能

```
this.setProperty = function(property, index) {
    this[property] = index;
    this.update();
} 
```

我希望附加的 HTML `setProperty`在我单击它时调用此函数。我怎样才能做到这一点？

为了它的价值，我像这样初始化我的课程

```
 var myVariable = new MyPlugin(); 
```

我知道我可以做到`<a href="#" onclick="myVariable.setProperty('', '')">`，但插件不知道变量。

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T19:41:42.817

找到了我的解决方案。我让它像这样工作：

```
this.displayOptions = function(property, container) {
    var self = this;
    for (var i = 0; i < this[property + 'Count']; i++) {
        var element = $('<a href="" data-property="' + property + '" />');
        $(container).append(element);

        element.click( function() {
            self.setProperty($(this).attr('data-property'), $(this).index());
        return false;
        });
     }
} 
```

# batch-file - 读取文件名和

> ID：12376288
> 
> 赞同：1
> 
> 时间：2012-09-11T19:04:47.607
> 
> 标签：batch-file, cmd

我想创建一个批处理文件，它读取特定目录中的前 10 个文件名，然后将路径设置为 10 个不同的变量。举个简单的例子，路径是*c:\test*，里面会有很多名为*file1.tif*、*file2.tif*等的文件。我想将变量设置为`filepath1`等于第一个文件的路径，对于前 10 个文件，这将是*c:\test\file1.tif*，依此类推。这是代码：

```
@echo off
cd C:\TEST
setlocal ENABLEDELAYEDEXPANSION
FOR /f "delims=|" %%a IN ('dir /b') DO (
    CALL SET /a x = !x! +1
    if !x! == 1 (
        CALL SET /a filepath!x!="C:\TEST\%%a"
    )
)
echo %filepath1%
echo %filepath2%
pause
goto EOF 
```

当我运行程序时，它似乎很好地执行了 FOR 循环，但是`filepath1`它只显示`0`并且它不显示任何`filepath2`. 我相信问题出在`if !X! == 1`和设置`filepath!x!`. 如果我更改与 相关的任何内容`!x!`，它会中断循环。我该怎么做才能正确设置变量并限制循环仅对 10 个文件执行操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T05:16:31.120

我不太确定我的问题是否正确，因为您的原始代码包含一些当时没有意义的东西（或者至少没有必要）:-)

*   “delims=|” 您使用的选项在您的情况下没有做任何事情
*   when`/a`选项用于算术（请参阅`help set`）并且与您的`set filepath!x!...`行一起使用时是错误的。

无论如何，以下应该有效：

```
setlocal ENABLEDELAYEDEXPANSION
cd C:\Test
FOR /f %%a IN ('dir /b') DO (
    SET /a x = !x! +1
    SET filepath!x!="C:\TEST\%%a"

    if !x! equ 10 goto done
)
:done
rem filepath1 to filepath10 are defined now, given there were up to 10 matching
rem files in the first place.

echo %filepath1%
echo %filepath2%

pause 
```

上面的代码不做任何错误检查，也不验证有问题的文件是否实际被调用`file1.tif`到`file10.tif`. 从您的问题（和示例代码）来看，您的情况是否真的有必要还不是很清楚。您可能需要澄清这一点，以便可以改进上述代码。

# excel - 将宏分配给在运行时 VBA 中创建的按钮

> ID：12376295
> 
> 赞同：2
> 
> 时间：2012-09-11T19:05:57.900
> 
> 标签：excel, vba, button, runtime

我的问题基本上在[这篇文章中得到了回答](https://stackoverflow.com/questions/10224511/assign-code-to-a-button-created-dynamically-using-vba-on-excel)

但不是下面的类代码：

```
Sub CmdEvents_Click()
   MsgBox "Hello World"
End Sub 
```

我需要运行这段代码（这只是一个示例，我想使用稍后在程序中单击的按钮的名称）

```
Sub CmdEvents_Click()
Dim mvCtrl As Control
Set mvCtrl = Me.ActiveControl
MsgBox mvCtrl.Name
End Sub 
```

但是上面的代码无论如何都不会正确返回我刚刚在运行时在消息框中创建的按钮的名称。

它返回“Button 6”....我在我的工作簿中进行了搜索，但我什至没有这个名字。

实际上，我修改了上面链接中的原始代码，以从列表中获取所有按钮的名称。这样我可以修改列表，从而修改按钮的名称，或者如果我愿意的话。而这个 Button 6 甚至不存在于我的列表中。

我在我的代码中做了一些陷阱，显示了我用来从中获取按钮名称的变量的消息框，这是正确的，它带有我想在创建按钮之前为其命名的字符串。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-10T16:00:32.163

假设您关注了链接到的帖子，您的类实例已经包含一个`CmdEvents`引用单击按钮的变量，因此您可以使用

```
Msgbox CmdEvents.Name 
```

如果您的代码不同，发布相关部分会很有用，这样我们就可以看到发生了什么。

# javascript - 按键计数太多 JavaScript

> ID：12376296
> 
> 赞同：1
> 
> 时间：2012-09-11T19:06:01.987
> 
> 标签：javascript, dom-events

我有一个`keypress`事件的问题。我有一个返回`true`或`false`类似`keypress`这样的函数：（简化一点）

```
onkeydown (keycode == 88) xKey = true;
onkeyup    (keycode == 88) xKey = false;

if (xKey == true && bombs > 0)

    {
          this.bomb;
          bomb -= 1;
    } 
```

现在，当您按下键时，它会将变量递减为长的、最小的 2 个计数，这当然不会添加到游戏中，我没有使用具有 unbind 属性的 jQuery，我也不想添加 jQuery ，什么是老派的方式？我找不到任何相关信息，但我想我不是第一个遇到这个问题的人。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T19:12:40.347

[onKeyPress 与。onKeyUp 和 onKeyDown](https://stackoverflow.com/questions/3396754/onkeypress-vs-onkeyup-and-onkeydown)

onkeypress 两者都是，keydown 后跟 keyup。

因此，当您执行 onkeypress 时，无论如何它都会执行 onkeypress 代码和 onkeyup 代码。

也许您想通过使用 onkeydown 来跟踪，这样它就不会干扰 onkeyup 功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T08:36:18.010

只要按键按下，按键就会重复触发。您可以使用 keydown 或 keyup，或通过间隔或超时增加节流阀，仅在最后一次按键事件时排队请求

# java - Netty，如何在不使用 4.0.0 alpha 版本之一的情况下读取分块的 HTTP 响应？

> ID：12376301
> 
> 赞同：0
> 
> 时间：2012-09-11T19:06:10.310
> 
> 标签：java, netty

我注意到在 Netty 4.0.0 alpha 版本中，HTTP 响应对象有一个方法来测试分块（isChunked()）。在 3.5.7.Final 版本中，只有请求对象具有测试分块的方法。使用 3.5.7.Final 我该如何阅读分块响应？下面是我用于 4.0.0 alpha 测试的代码：

```
@Override
public void messageReceived(ChannelHandlerContext context, MessageEvent event) throws Exception {

    try {
        log.trace("Message received");

        if (newMessage) {
            log.trace("New message");
            HttpResponse response = (HttpResponse) event.getMessage();
            log.trace("STATUS: [{}], VERSION [{}]", response.getStatus(), response.getProtocolVersion());

            if (!response.getHeaderNames().isEmpty()) {
                for (String name: response.getHeaderNames()) {
                    for (String value: response.getHeaders(name)) {
                        log.trace("HEADER: [{}] = [{}]", name, value);
                    }
                }
            }
            newMessage = false;
            if (response.isChunked()) {
                requestContentStream = new ByteArrayOutputStream();
                readingChunks = true;
                log.trace("CHUNKED CONTENT {");
                return;
            } else {
                log.trace("Request not chunked");
                writeNonChunkedData(response);
                responseComplete(event);
                return;
            }
        } else if (readingChunks) {
            log.trace("Reading chunks");
            HttpChunk chunk = (HttpChunk) event.getMessage();
            if (chunk.isLast()) {
                log.trace("Read last chunk");
                readingChunks = false;
                writeChunkedData();
                responseComplete(event);
                return;
            } else {
                log.trace("Buffering chunk content to byte buffer");
                requestContentStream.write(chunk.getContent().array());
                return;
            }
        } else {
            log.error("Error handling of MessageEvent, expecting a new message or a chunk from a previous message");
            //setError(context, INTERNAL_SERVER_ERROR);
            super.messageReceived(context, event);
        }
    }catch (Exception ex) {
        log.error("Exception: [{}]", ex);
        //setError(context, INTERNAL_SERVER_ERROR);
        super.messageReceived(context, event);
    }
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T04:51:12.603

HttpResponse.isChunked() 也存在于 netty 3.5.7 中。不知道为什么你认为它没有.. 见 [1] 和 [2]。

[1] [https://github.com/netty/netty/blob/3/src/main/java/org/jboss/netty/handler/codec/http/HttpMessage.java](https://github.com/netty/netty/blob/3/src/main/java/org/jboss/netty/handler/codec/http/HttpMessage.java)

[2] [https://github.com/netty/netty/blob/3/src/main/java/org/jboss/netty/handler/codec/http/HttpResponse.java](https://github.com/netty/netty/blob/3/src/main/java/org/jboss/netty/handler/codec/http/HttpResponse.java)

# c# - LINQ 投影上的代码覆盖率

> ID：12376303
> 
> 赞同：4
> 
> 时间：2012-09-11T19:06:19.240
> 
> 标签：c#, visual-studio, code-coverage

我的应用程序中有以下代码行，我不知道为什么，但代码覆盖率告诉我它没有被覆盖：

```
var filters = from f in request.Filters
              select new FilterDTO
              {
                   FilterName = f.name,
                   Value = f.value
              };

var filteredItems = repo.GetFilteredItems(filters); 
```

它认为以下行未涵盖：

```
select new FilterDTO
{
    FilterName = f.name,
    Value = f.value
}; 
```

其余部分 100% 覆盖。我的单元测试正在为 request.Filters 创建一个非空集合，所以我知道它正在正确地进行投影，但仍然认为代码没有被覆盖。

有没有人知道为什么感觉只有查询的选择部分被认为没有被代码覆盖？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T19:17:27.330

分析器可以告诉您什么是执行和什么未执行的大部分内容是基于编译器在调试信息中告诉它的内容。

```
select new FilterDTO
{
    FilterName = f.Name,
    Value = v.Value
} 
```

..是一个 lambda，编译器将其转换为生成类的方法。此外，初始化语法被转换为类似

```
var x = new FilterDTO();
x.FilterName=f.Name;
x.Value = v.Value;
return x; 
```

调试器在单步执行这样的代码方面是出了名的糟糕，因此，编译器可能只是为探查器或调试器生成了足够的关于它的信息。

# sql - 在 SQL Server 中创建程序集

> ID：12376307
> 
> 赞同：0
> 
> 时间：2012-09-11T19:06:35.283
> 
> 标签：sql, sql-server, sql-server-2005, .net-assembly

我不断收到以下错误：

```
Msg 10314, Level 16, State 11, Line 1
An error occurred in the Microsoft .NET Framework while trying to load assembly id 66079\. The server may be running out of resources, or the assembly may not be trusted with PERMISSION_SET = EXTERNAL_ACCESS or UNSAFE. Run the query again, or check documentation to see how to solve the assembly trust issues. For more information about this error: 
System.IO.FileLoadException: Could not load file or assembly 'ncestablegenerator, Version=0.0.0.0, Culture=neutral, PublicKeyToken=null' or one of its dependencies. The given assembly name or codebase was invalid. (Exception from HRESULT: 0x80131047)
System.IO.FileLoadException: 
   at System.Reflection.Assembly._nLoad(AssemblyName fileName, String codeBase, Evidence assemblySecurity, Assembly locationHint, StackCrawlMark& stackMark, Boolean throwOnFileNotFound, Boolean forIntrospection)
   at System.Reflection.Assembly.InternalLoad(AssemblyName assemblyRef, Evidence assemblySecurity, StackCrawlMark& stackMark, Boolean forIntrospection)
   at System.Reflection.Assembly.InternalLoad(String assemblyString, Evidence assemblySecurity, StackCrawlMark& stackMark, Boolean forIntrospection)
   at System.Reflection.Assembly.Load(String assemblyString) 
```

这是我的程序集的创建：

```
CREATE ASSEMBLY [NCESTableGenerator]
AUTHORIZATION [dbo]
from 'C:\SqlDlls\NCESTableGenerator.dll'
WITH PERMISSION_SET = UNSAFE
GO 
```

有任何想法吗？服务器上有足够的空间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-17T01:16:54.070

在运行该语句之前，您需要将数据库可信任设置为 ON。

# java - 将大型列表插入 SQL 数据库的最佳方法是什么？[安卓]

> ID：12376311
> 
> 赞同：-1
> 
> 时间：2012-09-11T19:06:48.917
> 
> 标签：java, android, sql, database, list

这是我正在尝试做的，我创建了一个 SQL 数据库来保存一张巨大的饮料表，该表如下所示：

```
 **_ID    ALCOHOL   TYPE    BRAND    PRICE** 
```

前任。1 酒 伏特加 斯米尔诺夫 14

这是我的数据库适配器的代码：

```
 package net.learn2develop.Database;

import android.content.ContentValues;
import android.content.Context;
import android.database.Cursor;
import android.database.SQLException;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteOpenHelper;
import android.util.Log;

public class DBAdapter {

public static final String KEY_ROWID = "_id";
public static final String KEY_ALCOHOL = "alcohol";
public static final String KEY_TYPE = "type";
public static final String KEY_BRAND = "brand";
public static final String KEY_PRICE = "price";
private static final String TAG = "DBAdapter";

private static final String DATABASE_NAME = "booze";
private static final String DATABASE_TABLE = "titles";
private static final int DATABASE_VERSION = 1;

private static final String DATABASE_CREATE =
    "create table titles (_id integer primary key autoincrement, "
    + "alcohol text not null, type text not null, " 
    + "brand text not null);" + "price integer not null";

private final Context context;

private DatabaseHelper DBHelper;
private SQLiteDatabase db;

public DBAdapter(Context ctx) 
{
    this.context = ctx;
    DBHelper = new DatabaseHelper(context);
}

private static class DatabaseHelper extends SQLiteOpenHelper 
{
    DatabaseHelper(Context context) 
    {
        super(context, DATABASE_NAME, null, DATABASE_VERSION);
    }

    @Override
    public void onCreate(SQLiteDatabase db) 
    {
        db.execSQL(DATABASE_CREATE);
    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, 
                          int newVersion) 
    {
        Log.w(TAG, "Upgrading database from version " + oldVersion 
              + " to "
              + newVersion + ", which will destroy all old data");
        db.execSQL("DROP TABLE IF EXISTS titles");
        onCreate(db);
    }
}

  //---opens the database---
    public DBAdapter open() throws SQLException 
{
    db = DBHelper.getWritableDatabase();
    return this;
}

//---closes the database---    
public void close() 
{
    DBHelper.close();
}

//---insert a title into the database---
public long insertTitle(String alcohol, String type, String brand, int price) 
{
    ContentValues initialValues = new ContentValues();
    initialValues.put(KEY_ALCOHOL, alcohol);
    initialValues.put(KEY_TYPE, type);
    initialValues.put(KEY_BRAND, brand);
    initialValues.put(KEY_PRICE, price);
    return db.insert(DATABASE_TABLE, null, initialValues);
}

//---deletes a particular title---
public boolean deleteTitle(long rowId) 
{
    return db.delete(DATABASE_TABLE, KEY_ROWID + 
            "=" + rowId, null) > 0;
}

//---retrieves all the titles---
public Cursor getAllTitles() 
{
    return db.query(DATABASE_TABLE, new String[] {
            KEY_ROWID, 
            KEY_ALCOHOL,
            KEY_TYPE,
            KEY_BRAND,
            KEY_PRICE}, 
            null, 
            null, 
            null, 
            null, 
            null);
}

//---retrieves a particular title---
public Cursor getTitle(long rowId) throws SQLException 
{
    Cursor mCursor =
            db.query(true, DATABASE_TABLE, new String[] {
                    KEY_ROWID,
                    KEY_ALCOHOL, 
                    KEY_TYPE,
                    KEY_BRAND,
                    KEY_PRICE
                    }, 
                    KEY_ROWID + "=" + rowId, 
                    null,
                    null, 
                    null, 
                    null, 
                    null);
    if (mCursor != null) {
        mCursor.moveToFirst();
    }
    return mCursor;
}

//---updates a title---
public boolean updateTitle(long rowId, String alcohol, 
String type, String brand, int price) 
{
    ContentValues args = new ContentValues();
    args.put(KEY_ALCOHOL, alcohol);
    args.put(KEY_TYPE, type);
    args.put(KEY_BRAND, brand);
    args.put(KEY_PRICE, price);
    return db.update(DATABASE_TABLE, args, 
                     KEY_ROWID + "=" + rowId, null) > 0;
}

} 
```

现在我知道我可以通过调用将它们单独添加到我的主要活动中：

```
 //---add 2 titles---
    db.open();        
    long id;
    id = db.insertTitle(
            "Liquor",
            "Vodka",
            "Smirnoff",
                    "14");        
    id = db.insertTitle(
            "Liquor",
            "Rum",
            "Captain Morgan",
                    "20");
    db.close(); 
```

问题是我有数百个要添加....将它们全部添加到数据库中的最佳方法是什么？提前感谢你们的任何帮助！我还在学习，我以前从未使用过数据库，所以我现在失去了仪式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T19:41:56.493

我不建议在您的源代码中对它们进行硬编码，因为您将拥有双倍的数据（然后是一些），并且会从您的用户那里吸走 RAM 和存储空间。

我认为您没有充分的理由在运行时将列表静态加载到数据库中。我还假设您已经有了饮料清单。

我将从列表中创建一个 CSV 文件，然后在我的 PC 上使用桌面 SQLite 编辑器将列表加载到我的表中，然后将数据库作为资源包含在我的应用程序中。

谷歌会带你去大量的 SQLite 编辑器。

在将 PC 移至 Android 之前，我会在 PC 上完成所有数据库设计和初始加载/测试。它更容易和更快。

祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T19:15:20.447

你可以这样做：

```
SQLiteDatabase db = mOpenHelper.getWritableDatabase();

db.beginTransaction();
try {   
    for(ContentValues con:conValues){
    db.insert(TABLE_COLUMN,null,con);
}
    db.setTransactionSuccessful();
} 
    finally {
    db.endTransaction();
} 
```

您可以阅读更多关于 Android 中的 begintransaction 和 end transaction [SQLite 优化](http://www.android-app-market.com/sqlite-optimization-in-android-programming-sqlite-optimization-in-android-apps.html)

# javascript - 正则表达式从字符串中提取重复序列

> ID：12376312
> 
> 赞同：1
> 
> 时间：2012-09-11T19:06:53.067
> 
> 标签：javascript, regex

我正在尝试从我的字符串中提取函数参数`s`

```
var s = "function (a, b,   c) { return \'hello\'; }";
var re = /^function[^\(]*\(\W*(?:(\w+)[,\s)]*)+\)/g;

console.log( re.exec(s) );

/*
[ 'function (a, b,   c)',
  'c',
  index: 0,
  input: 'function (a, b,   c) { return \'hello\'; }' ]
*/ 
```

### 问题

它只是捕获`c`。

### 期望的输出

```
/*
[ 'function (a, b,   c)',
  'a',
  'b',
  'c',
  index: 0,
  input: 'function (a, b,   c) { return \'hello\'; }' ]
*/ 
```

### 免责声明

此代码在模块中使用，并且必须使用**单个正则表达式**来完成。[我在 StackOverflow 上看到的其他技术](https://stackoverflow.com/questions/1007981/how-to-get-function-parameter-names-values-dynamically-from-javascript)将不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T19:25:34.630

您不能在正则表达式中拥有可变数量的捕获组。您可能做的最好的事情是：

```
var s = "function (a, b,   c) { return \'hello\'; }";
s.match(/.*?\((.*)\)/)[1].split(/[,\s]+/);

// returns ["a", "b", "c"] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T20:04:55.493

我建议将任务划分为子任务：

*   检索参数列表
*   拆分检索到的列表
*   编写结果

像这样：

```
var reFuncDecl = /^function\s*\(([^)]+)\)/g,
    reSplitArg = /[,\s]+/;

function funcInfo(s) {
    var matches = reFuncDecl.exec(s),
    args = matches[1].split(reSplitArg);
    reFuncDecl.lastIndex = 0;
    return {
        declaration: matches[0],
        args: args,
        input: s
    };
}

var s = "function (a, b,   c,d,e,\nf) { return \'hello\'; }",
    info = funcInfo(s);
for(var prop in info) {
    document.write(prop + ': ' + info[prop] + '<br />');
}
console.log(funcInfo(s));​ 
```

**[演示](http://jsfiddle.net/f0t0n/vFtuZ/)**

# vb.net - 如何将文本和十六进制代码发送到串行 VFD 显示器 [VB.NET]

> ID：12376318
> 
> 赞同：2
> 
> 时间：2012-09-11T19:07:51.710
> 
> 标签：vb.net, serial-port, vfd

我想对 vfd 显示器进行编程以与 vb.net 一起使用 目前，我只能将文本发送到 vfd 显示器，但它的格式仍然不正确。我想不通，所以我将包括编程手册。

我想做的事情：

*   由于有 2 行，我想在这 2 行中显示不同的数据。
*   我应该能够清除显示。
*   如果文本长于显示（20 行），它应该开始滚动。暂时就这些了，希望有人能帮帮我。

这是我使用的代码：

```
 Dim sp As New SerialPort()

    sp.PortName = "COM1"
    sp.BaudRate = 9600
    sp.Parity = Parity.None
    sp.DataBits = 8
    sp.StopBits = StopBits.One
    sp.Open()
    sp.WriteLine(TextBox1.Text)
    sp.WriteLine(TextBox2.Text)
    sp.Close()
    sp.Dispose()
    sp = Nothing 
```

![在此处输入图像描述](../Images/52f2f8389f24769fd0ce3d24d6a1eb61.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-12T10:12:03.810

要发送二进制数据，最好使用`SerialPort.Write`采用字节数组的方法的重载。如果您发送字符或字符串，您将不得不处理字符编码，这充其量是烦人的，最坏的情况是会失败。有时，当您将数值编码为字符然后将其解码回数值时，解码后的值将与原始值不匹配。因此，最安全和最简单的方法是将字节值作为字节数组发送。例如：

```
Dim bytes() As Byte = { &H00, &H20, &HFF }
sp.Write(bytes, 0, bytes.Length) 
```

或者，如果您想通过十六进制值单独加载每个字节：

```
Dim bytes(3) As Byte 
byte(0) = &H00
byte(1) = &H20
byte(2) = &HFF
sp.Write(bytes, 0, bytes.Length) 
```

或者，如果您只想按其十六进制值发送单个字节：

```
sp.Write(New Byte() { &H20 }, 0, 1) 
```

# php - 是否有任何用于 MongoDB 的 Zend Session 处理程序库？

> ID：12376320
> 
> 赞同：0
> 
> 时间：2012-09-11T19:07:51.593
> 
> 标签：php, zend-framework, session, mongodb

Zend 是否有一个好的 Session 处理程序 MongoDb 库？我正在使用 Zend 1.12。我知道 Zend 2.0 有自己的用于 Mongo 的 Zend_Session_SaveHandler 实现。但短期内没有升级计划。感谢所有输入/建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T19:26:02.127

[您可以在此页面](http://gertonscorner.wordpress.com/2011/05/31/zend-framework-mongodb-session-savehandler/)上找到 MongoDb 会话处理程序。
源代码可以从[这里](http://gertonscorner.googlecode.com/svn/trunk/phplib/GcLib/Zend/Session/SaveHandler/MongoDb.php)下载。

# c# - 导航属性未在运行时实体框架中创建

> ID：12376321
> 
> 赞同：0
> 
> 时间：2012-09-11T19:07:52.890
> 
> 标签：c#, entity-framework, entity-framework-5

我有一个 Quest 和 QuestTemplate 类，如下所示

```
public class Quest{

    public int ID {get;set;}

    public virtual QuestTemplate QuestTemplate {get;set;}

    public string Name{get;set;}
}

public class QuestTemplate{

    public int ID {get;set;}

    public QuestTemplate QuestTemplate {get;set;}

    public string Name{get;set;}

    public virtual Quest Quest{get;set;}
} 
```

我在运行时创建 Quest 和 QuestTemplate 如下所示

```
Quest q = new Quest();
q.Name = "Foo";
q.QuestTemplate = new QuestTemplate();
q.QuestTemplate.Name = "Bar";

context.Quests.Add(q);
context.SaveChanges(); 
```

它将任务对象和任务模板对象添加到相关表中（本例中为 Quests、QuestTemplates）。但是问题是表中任务模板对象的 Quest_ID 列没有设置任务对象的 ID。相反，它仍然为空。我该如何解决这个问题？

PS：我首先使用带有代码的EF5。

此致，

凯末尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T19:36:36.747

您在代码中没有指定`QuestTemplate`应用于`Quest`对象的任何地方。以下代码应该可以工作：

```
Quest q = new Quest();
q.Name = "Foo";

QuestTemplate qt = new QuestTemplate();
qt.QuestTemplate.Name = "Bar";
qt.Quest = q;

q.QuestTemplate = qt;

context.Quests.Add(q);
context.SaveChanges(); 
```

或者您可以映射一对一的关系。

```
modelBuilder.Entity<Quest >()
    .HasRequred(q => q.QuestTemplate)
    .WithRequiredPrincipal()
    .WillCascadeOnDelete(); 
```

**编辑**

今晚看了这个，关系不是映射的原因是关于 FK 名称。如果您在 fluent 映射中指定 FK，则关系按预期工作。此外，这种类型的 1 对 1 关系需要先加载`Quest`或`QuestTemplate`先加载（因为它是必填字段），我`QuestTemplate`在下面随机选择：

```
public class DataContext : DbContext
{
    public DbSet<Quest> Quests { get; set; }

    protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        modelBuilder.Entity<Quest>()
            .HasOptional(q => q.QuestTemplate)
            .WithRequired(qt => qt.Quest)
            .Map(m => m.MapKey("QuestId"));
    }
}

public class Quest
{
    public int QuestId { get; set; }
    public string Name { get; set; }
    public virtual QuestTemplate QuestTemplate { get; set; }
}

public class QuestTemplate
{
    public int QuestTemplateId { get; set; }
    public string Name { get; set; }
    public virtual Quest Quest { get; set; }
}

class Program
{
    static void Main(string[] args)
    {
        using (DataContext db = new DataContext())
        {
            Quest q = new Quest { Name = "Bar" };
            q.QuestTemplate = new QuestTemplate { Name = "Foo" };
            db.Quests.Add(q);
            db.SaveChanges();
        }
    }
} 
```

我相信这与标题为`Foreign Keys` [here](http://blogs.msdn.com/b/efdesign/archive/2010/06/01/conventions-for-code-first.aspx)的部分有关，但我仍然不清楚为什么会这样。我在没有识别 FK 的情况下以完全相同的方式配置了其他关系。

# java - PHP Json 关联数组到 Java 映射

> ID：12376322
> 
> 赞同：0
> 
> 时间：2012-09-11T19:07:55.547
> 
> 标签：java, php, json, gson

我的问题是，PHP 对数组进行不同的编码，这取决于它们是否是连续的并且是否以零索引开头。例子：

```
$arr = array(array(12), array(13));
===> [[12], [13]]

$arr = array("0" => array(12), "1" => array(13));
===> [[12], [13]]

$arr = array("0" => array(12), "2" => array(13));
===> {"0": [12], "2": [13]} 
```

为什么第三个有这么大的不同？

第一个示例生成一个列表列表，第三个示例生成一个带有列表的对象。我需要将所有这些转换为 Java 的`Map<Integer, List<Double>>`. 这是我能在 Java 中为这些 PHP 对象找到的最通用的数据类型。我正在使用谷歌的 Gson。但是，由于这些示例产生了不同类型的对象，我不能只将其读入地图。我必须先检查它是否有索引，然后一个一个地添加到自定义地图中。请查看“必须有更好的方法来完成这部分”的行。这是我的代码：

```
import java.lang.StringBuilder;
import com.google.gson.*;
import com.google.gson.reflect.*;
import java.util.Map;
import java.util.HashMap;
import java.util.List;

public class Saving {

    public static void main(String[] args) {

        String json = "[[12], [13]]";
        json = json.trim();
        Map<Integer, List<Double>> fuelSavings = null;

        // such a cluster****
        if(json.startsWith("[[")) { // THERE HAS TO BE A BETTER WAY TO DO THIS PART
        // ANY WAY I CAN AVOID THIS ENTIRE IF CONDITION

            //implicit keys
            fuelSavings = new HashMap<Integer, List<Double>>();
            List<List<Double>> temporaryList = new Gson().fromJson(json, new TypeToken<List<List<Double>>>(){}.getType());
            int index = 0;
            for(List<Double> temporaryListMember: temporaryList) {
                fuelSavings.put(index, temporaryListMember);
                index++;
            }

        } else {

            // explicit keys
            // THIS PART IS PERFECT
            fuelSavings = new Gson().fromJson(json, new TypeToken<Map<Integer, List<Double>>>(){}.getType());

        }

        System.out.println(fuelSavings);

    }

} 
```

任何帮助表示赞赏，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T22:41:00.297

很有意思！

据我了解，PHP 服务器将其数据作为编码为 JSON 的有序映射提供服务，但有时运气不好，它的键是连续整数，这使得将其`json_encode()`理解为一个简单的数组并为输出的 JSON 使用不同的格式。

据我了解，所有 PHP 数组都是有序映射。但是当一个数组有连续的整数键时，会`json_encode()`生成一个没有键的数组，而不是“JSON 对象”（映射）。这破坏了不期望数组而不是“对象”的客户端代码。

`JsonArray`令人难以置信的是，我发现没有将 a 转换为 a 的现有 Java 函数，`JsonObject`如果我们尝试将数组作为对象，有时甚至可能会遇到一些异常！天哪，a`JsonArray`只是`JsonObject`带有隐式连续整数键的 a，它应该自动转换！:p

我没有尝试过，但也许`JsonObject::entrySet()`可以解决它。它返回 a ，如果 Integer 自动解析 String 并且可以使用适当的 转换`Set<Map.Entry<String,JsonElement>>`，它可能会转换为。`Map<Integer, AnyObject>``JsonElement``TypeToken`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T19:12:51.550

您在 PHP 中所做的事情是两件不同的事情。PHP 中的数组用作数组、映射、列表。

`array(array(12), array(13));`即使在 PHP中`array("0" => array(12), "2" => array(13));`也不相同。

在 Java 中使用 Gson 需要做的是将 json 解析为 String 并检查主对象是 a`Map`还是 a`List`然后给出建议。如果您加载了一个列表，那么您知道它是一个，`array(array(12), array(13));`否则它是另一个。

你不能从 PHP 端做点什么来生成它总是一样的吗？

**编辑：**

如果你不能从 PHP 端做任何事情，那么你的检查将与实例化`JsonParser`解析然后检查是否[`JsonObject.isJsonArray()`](http://google-gson.googlecode.com/svn/tags/1.2.3/docs/javadocs/com/google/gson/JsonElement.html#isJsonArray%28%29)返回 true 相同，除了它最终会更快但你不会依赖 gson 库。

```
Map<Integer, List<Double>> fuelSavings = null;
JsonElement jElement = new JsonParser().parse("[[12], [13]]");
JsonObject jObject = jelement.getAsJsonObject();
if (jObject.isJsonArray()) {
    fuelSavings = new HashMap<Integer, List<Double>>();
    List<List<Double>> temporaryList = new Gson().fromJson(jElement, new TypeToken<List<List<Double>>>(){}.getType());
    int index = 0;
    for(List<Double> temporaryListMember: temporaryList) {
        fuelSavings.put(index++, temporaryListMember);
    }
} else /* this is a map */ {
    fuelSavings = new Gson().fromJson(jElement, new TypeToken<Map<Integer, List<Double>>>(){}.getType());
} 
```

# ruby-on-rails - 我如何将此数组分配给rails中的另一个数组

> ID：12376323
> 
> 赞同：0
> 
> 时间：2012-09-11T19:08:01.350
> 
> 标签：ruby-on-rails, arrays

嗨，我遇到了一个问题，我想将一个数组分配给另一个数组

就像我将这个值保存在表的属性的数据库中一样

```
 ["rogid", "soni"]

      a_array = [] 
```

从数据库中检索后，我想分配它

```
 a_array =  ["rogid", "soni"] 
```

分配后，我显示后它应该看起来像这样

```
 ["rogid", "soni"] 
```

但是当我显示 a_array 它是这样的

```
 ["[\"rogid\", \"soni\"]"] 
```

我怎么能像[“rogid”，“soni”]一样实现它

非常感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T21:08:58.457

您可以使用正则表达式来解析字符串： [rogid an soni on rubular](http://rubular.com/r/yAaaFpn77e)

我在这里遇到了一些奇怪的红宝石行为，所以我现在无法确认这个答案，但我很确定你可以处理它：

[正则表达式](http://www.ruby-doc.org/core-1.9.3/Regexp.html)

`my_pattern.match(my_string).to_a`将返回您想要的数组。也不要忘记在使用正则表达式之前拉`"[\"rogid\", \"soni\"]"`取。`["[\"rogid\", \"soni\"]"]`

# ios - 在不使用 UISearchBar 的情况下搜索 tableview

> ID：12376332
> 
> 赞同：0
> 
> 时间：2012-09-11T19:08:58.260
> 
> 标签：ios, uitableview, custom-controls, uisearchbar, uisearchbardelegate

我正在编写一个带有自定义数字键盘的类似手机的应用程序。当我在数字键盘上键入并在数字键盘上方的小表格视图中显示结果时，我想在我的联系人中搜索姓名/电话号码。因此，我想在不使用标准的情况下执行此操作`UISearchBar`，因为输入的电话号码将显示在工具栏中，类似于内置电话应用程序。这意味着任何时候 textfiels/uisearchbar 都不会成为响应者。

有`UISearchBarDelegate`没有不使用的使用方法`UISearchBar`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T19:23:55.887

UISearchBarDelegate 不适合您，因为许多委托方法指定调用者将传入 UISearchBar。你当然可以用类似的方法定义你自己的委托协议，但是使用你的“自定义数字键盘”类来代替。

由于您将在任何一种情况下实现委托，因此使用预定义协议并没有太多节省。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-18T11:29:02.357

我一直在尝试同样的方法。最后，我将搜索栏设置为隐藏 `[mySearchBar setHidden:YES]`，并将高度大小设置为 0.1，使应用程序几乎没有搜索栏，但仍然可以正常工作。

# c++ - 有没有办法在没有锁的情况下在两个不同的更新源之间进行仲裁？

> ID：12376334
> 
> 赞同：2
> 
> 时间：2012-09-11T19:09:12.373
> 
> 标签：c++, multithreading, thread-safety, locking, lock-free

我从两个不同的来源（网络侦听）接收更新，在这些来源上我得到一个类似于这样的方法的回调：

```
void onUpdate(Update* update)
{
    static MutexT lock;
    static hash_set<UpdateID> set;

    ScopedGuard _(lock); //lock here
    hash_set<UpdateID>::iterator it = set.find(update->id);
    if (it == set.end())
        set.insert(update->id);
    else
        return;

    listener->onUpdate(/*some stuff*/);
} 
```

由于两个来源都在为您提供相同的更新，因此您希望避免通知重复，您希望在两个来源之间进行仲裁，以与最先提供给您的人的最新信息保持同步，并且如果一个来源可能是错过的更新不可靠。问题是，锁定每次更新都很昂贵，如果我绝对不想要重复`onUpdate`调用，有没有办法绕过这个锁定？

（或者至少是一种降低成本的方法？）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T19:15:57.220

首先，锁不应该是静态的，它应该是一个成员变量。

您可以通过使用读取器/写入器互斥体来提高效率，例如

```
boost::shared_mutex          mutex_;
std::unordered_set<UpdateID> set_;

void onUpdate(const Update& update)
{
    boost::upgrade_lock<boost::shared_mutex> lock(mutex_);

    auto it = set_.find(update.id);
    if(it == set_.end())
    {
        boost::upgrade_to_unique_lock<boost::shared_mutex> unique_lock(mutex_);
        set.insert(update.id);
    }

    listener->onUpdate(/*some stuff*/);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T21:21:55.843

所以你只是不断地向你的哈希表添加条目？从不删除它们？你的哈希表加载是什么样的？如果发生足够多的冲突，您的插入/查找性能将会下降。

如果您的流有序列号，我认为您最好跟踪间隙（缺少序列号）而不是您实际看到的消息。在快速 UDP 端，当序列号有间隙时，将丢失的消息记录在哈希表中，并在收到的每条消息上调用 onUpdate()。在慢速 TCP 端，查看哈希表以查看消息是否填补了空白，如果它确实调用 onUpdate() 并从哈希表中删除该消息，否则什么也不做。

也就是说，无锁哈希表是可能的。不确定它们是无锁的，但微软有[concurrent_unordered_map](http://msdn.microsoft.com/en-us/library/hh750089)（和[concurrent_unordered_set](http://msdn.microsoft.com/en-us/library/hh750108)），TBB 有[concurrent_hash_map](http://threadingbuildingblocks.org/files/documentation/a00130.html)。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-11T19:16:26.200

有[双重检查锁定设计模式](http://en.wikipedia.org/wiki/Double-checked_locking)，您可以通过两次检查插入条件来避免昂贵的锁定。但更昂贵的是：锁定或查找。

# delphi - 使用 EMMA 的声纳的 Delphi 代码覆盖率

> ID：12376335
> 
> 赞同：4
> 
> 时间：2012-09-11T19:09:16.250
> 
> 标签：delphi, jenkins, code-coverage, sonarqube, emma

我已经建立了一个 Jenkins-Job，它使用 Sonar 分析一个 Delphi 项目。因此，我使用了声纳 delphi 插件，到目前为止，效果很好。对于代码覆盖率分析，我使用[delphi-code-coverage](http://code.google.com/p/delphi-code-coverage/)，它会生成 EMMA 报告。因此，我还安装了 Sonar EMMA-Plugin 以将 EMMA 结果放入我的 Sonar 报告中。但似乎 EMMA-Plugin 在工作期间从未被执行。输出中没有任何信息，即使它已被跳过或失败...

这是我的 pom.xml 的片段：

```
<sonar.dynamicAnalysis>reuseReports</sonar.dynamicAnalysis>
<sonar.surefire.reportsPath>UnitTests</sonar.surefire.reportsPath>
<sonar.core.codeCoveragePlugin>emma</sonar.core.codeCoveragePlugin>
<sonar.emma.reportPath>UnitTests</sonar.emma.reportPath> 
```

如何执行 EMMA 插件（结合 delphi 插件）？或者还有其他方法可以将 EMMA 报告集成到我的声纳项目中吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T05:03:53.790

EMMA 插件仅适用于 Java 源代码。Delphi 插件有一个内置的代码覆盖工具，我很确定它不能解析 EMMA xml 文件。它仅与 AQTime 生成的 CC 报告兼容。请查看[http://docs.codehaus.org/display/SONAR/Delphi+Plugin](http://docs.codehaus.org/display/SONAR/Delphi+Plugin)了解更多详情

# wicket - 如何在 Wicket 中用多个值替换属性的属性值？

> ID：12376336
> 
> 赞同：2
> 
> 时间：2012-09-11T19:09:18.257
> 
> 标签：wicket

我的类属性有两个 CSS 类值。HTML 开头是这样的：

```
<input type="button" wicket:id="rowButton" class="jelly-button greenGradient"/> 
```

我想动态地将其更改为：

```
<input type="button" wicket:id="rowButton" class="jelly-button redGradient"/> 
```

目前我正在这样做：

> component.add(new SimpleAttributeModifier("class", "jelly-button redGradient"));

在 Wicket 中执行此操作的最佳方法是什么？必须有比我上面所做的更“正确”的方法来做到这一点。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-11T19:22:07.380

除了使用带有固定文本的属性修饰符，您还可以使用带有从模型中检索到的文本的属性附加器。要更改类，只需更改模型的值。例如：

```
Model<String> gradientModel = new Model<String>("greenGradient"); 
```

...

```
component.add(AttributeModifier.append("class", gradientModel)); 
```

在标记中只有

```
<input type="button" wicket:id="rowButton" class="jelly-button"/> 
```

然后什么时候改变梯度使用

```
gradientModel.setObject("redGradient"); 
```

或者

```
gradientModel.setObject("greenGradient"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T06:49:18.533

下面javadoc中的示例很好地解释了它 [http://www.jarvana.com/jarvana/view/org/apache/wicket/wicket-core/1.5.2/wicket-core-1.5.2-javadoc.jar！/ org/apache/wicket/behavior/AttributeAppender.html](http://www.jarvana.com/jarvana/view/org/apache/wicket/wicket-core/1.5.2/wicket-core-1.5.2-javadoc.jar!/org/apache/wicket/behavior/AttributeAppender.html)

# android - FragmentPagerAdapter 使用 ViewPagerIndicator 不起作用

> ID：12376337
> 
> 赞同：1
> 
> 时间：2012-09-11T19:09:19.493
> 
> 标签：android, viewpagerindicator, fragmentpageradapter

我已决定使用 ViewPagerIndicator 和 TitlePageIndicator 重新制作我的应用程序的 UI，但我有以下问题：

1) 不显示每个页面的片段。

2）在两个页面之间滑动不起作用。

我使用 ActionBarSherlock 就像使用标签一样。

我没有更改 Fragmens 中的任何内容，因为它在我使用选项卡时工作正常，并且我编写了以下代码：

```
public class CustomFragmentAdapter extends FragmentPagerAdapter {

    private final String[] TITLES = new String[] { 
            "General",
            "Companies",
            "Discounts"

    };

    public final int NUM_TITLES = TITLES.length;

    public CustomFragmentAdapter(FragmentManager fm) {      
        super(fm);

    }

    @Override
    public Fragment getItem(int position) { 

        Log.v("POSITION", "position: "+position);
        switch (position) {
            case 0:
                return new General();
            case 1:
                return new Companies();
            case 2:
                return new Discounts();
        }

        return null;
    }

    @Override
    public int getCount() {
        return NUM_TITLES;
    }

    @Override
    public CharSequence getPageTitle(int position) {
        return TITLES[position % NUM_TITLES].toUpperCase();
    }
} 
```

和

```
mViewPager = (ViewPager)findViewById(R.id.pager);

    mViewPager.setAdapter(new CustomFragmentAdapter(getSupportFragmentManager()));

    TitlePageIndicator indicator = (TitlePageIndicator) findViewById(R.id.indicator);

    indicator.setViewPager(mViewPager);
    indicator.setCurrentItem(0); 
```

和我的 XML

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/main"
android:layout_width="match_parent"
android:layout_height="match_parent"

>

<com.viewpagerindicator.TitlePageIndicator
    android:id="@+id/indicator"
    android:layout_height="wrap_content"
    android:layout_width="match_parent"
    />

<android.support.v4.view.ViewPager
xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/pager"
android:layout_width="match_parent"
android:layout_height="0dp"
android:layout_weight="1"
/> 
```

正如我所看到的，大多数教程和示例都与我的代码相似，但我仍然无法使其工作。我几乎尝试了一切。当我在其中放置一些带有 TextView 的虚拟片段时，它也不起作用。我也尝试删除 ViewPagerIndicator 并仅尝试 ViewPager，但它对我不起作用。

我可能错过了一些东西，但我找不到它。非常感谢您的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T19:29:06.553

我从我的类似活动中看到的一个区别是您没有设置寻呼机的当前项目：

```
mViewPager.setCurrentItem(0, false); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T08:30:58.857

我发现在活动布局 xml 中缺少 android:orientation="vertical" 的问题

# cakephp - CakePHP 2.x 认证条件

> ID：12376343
> 
> 赞同：9
> 
> 时间：2012-09-11T19:09:50.303
> 
> 标签：cakephp, authentication, login, conditional-statements

在我的用户身份验证中，我需要为登录设置一个条件（已验证 = 1）。我知道我应该能够这样做：

```
$this->Auth->userScope = array('User.verified' => '1'); 
```

我在 AppController 和我的 UsersController beforeFilter 函数中尝试了这个，但它没有做任何事情。我还需要为此配置什么吗？

我最终做了（AppController）：

```
public function isAuthorized($user) {

if ($user['verified'] == '0') { 
$this->Session->setFlash('You need to verify your Account first.');
return false;
}

return false;
} 
```

这似乎是不优雅的，因为应该有正确的（userScope）方法来做到这一点，而且我现在在验证 = 0 时得到两个 Flash：第一个是上面的 setFlash，第二个是常规的 authError。

我检查了 Docs 和 stackoverflow，但我发现关于这个主题的信息很少。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-13T11:26:07.860

CakePHP 2.x:

```
public $components = array(
    'Auth' => array(
        'loginAction' => array(
            'controller'    => 'users',
            'action'        => 'login'
        ),
        'authError' => 'Je hebt geen toegang tot dit gedeelte',
        'authenticate' => array(
            'Form' => array(
                'fields' => array('username' => 'email'),
                'scope' => array('is_admin' => '1')
            ),

        )
    ),
    'Session'
); 
```

更新：对于 cakePHP 3.1 finder`option`从 3.1 开始可用。在此之前，您可以使用`scope`和`contain`选项来修改查询。

[http://book.cakephp.org/3.0/en/controllers/components/authentication.html#customizing-find-query](http://book.cakephp.org/3.0/en/controllers/components/authentication.html#customizing-find-query)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-11T20:03:56.367

```
$this->Auth->authenticate = array(
    AuthComponent::ALL => array(
        'scope' => array('User.verified' => '1'),
   ),
); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-05-03T12:10:27.197

```
$this->Auth->authenticate = array(
      'Form' => array(
                'scope' => array('User.verified' => '1')
      )
); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-11T20:04:07.663

假设 CakePHP 文档是正确`Auth::userScope`的被重命名为`Auth::scope`所以现在你会做这样的事情：

```
$this->Auth->scope = array ('User.active' => '1'); 
```

[在 CakePHP 2.x 中配置 Auth](http://book.cakephp.org/2.0/en/core-libraries/components/authentication.html#configuring-authentication-handlers)

希望这可以帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-11T20:35:09.007

尝试这个：

`$this->Auth->userScope = array('User.verified = 1');`

# java - 状态码：403，同时获取一个不存在的对象

> ID：12376344
> 
> 赞同：3
> 
> 时间：2012-09-11T19:09:58.667
> 
> 标签：java, amazon-s3, amazon-web-services

我有一个用户 -`S3Actions.GetObject, S3Actions.PutObject`分配给它的经理

*   当我放置对象并得到它时，一切都很好
*   当我得到一个不存在的对象时，它会抛出

}

```
Status Code: 403, AWS Service: Amazon S3, AWS Request ID: 2A23D3118F9FFB08, AWS Error Code: AccessDenied, AWS Error Message: Access Denied, S3 Extended Request ID: 3h4D2Ks9skcSab3zkV/nedmm9b8WLL+92DESbOx9xGipkH7P69QQiJLVWyDowASi
    at com.amazonaws.http.AmazonHttpClient.handleErrorResponse(AmazonHttpClient.java:556)
    at com.amazonaws.http.AmazonHttpClient.executeHelper(AmazonHttpClient.java:289)
    at com.amazonaws.http.AmazonHttpClient.execute(AmazonHttpClient.java:170)
    at com.amazonaws.services.s3.AmazonS3Client.invoke(AmazonS3Client.java:2724)
    at com.amazonaws.services.s3.AmazonS3Client.getObject(AmazonS3Client.java:866)
    at com.sr.sparrow.business.xml.persist.S3Service.getInputStream(S3Service.java:58) 
```

为什么不扔`404/NoSuchKey`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T19:32:24.407

正如所指出的`user1585811`，这是最好的解释

[https://forums.aws.amazon.com/thread.jspa?messageID=210268](https://forums.aws.amazon.com/thread.jspa?messageID=210268)

# css - 在分配它们的 DIV 之外应用 CSS 样式

> ID：12376345
> 
> 赞同：1
> 
> 时间：2012-09-11T19:10:00.487
> 
> 标签：css, styles

在我的样式表中，我使用以下代码覆盖了 H1 和 H2 的样式： 在我的 HTML 中，我将该样式应用于包含 H1 标记的 DIV。

然而，这种风格也适用于有问题的 div 之后的 H1 和 H2 标签。

复制在这里：http: [//jsfiddle.net/89gkQ/1/](http://jsfiddle.net/89gkQ/1/)

为什么样式在应用它的 div 之外应用，我该如何停止它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T19:12:41.007

在 CSS 中，逗号不像在英语中那样工作：

```
.featuredtitle h1, h2 {
  color: red;
} 
```

该代码等效于以下代码：

```
.featuredtitle h1 {
  color: red;
}

h2 {
  color: red;
} 
```

这不是你想要的。逗号只允许您编写多个选择器，因此您希望更详细一点：

```
.featuredtitle h1, .featuredtitle h2 {
  color: red;
} 
```

**演示：http: [//jsfiddle.net/89gkQ/2/](http://jsfiddle.net/89gkQ/2/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T19:14:37.553

问题在这里：

```
.featuredtitle h1,h2 {
    font-size: 1.5em;
    font-weight:bold;
    color:#a00;
} 
```

您应该改写以下内容：

```
.featuredtitle h1, .featuredtitle h2 {
    font-size: 1.5em;
    font-weight:bold;
    color:#a00;
} 
```

The comma starts a new selector, which in this case made the style apply to all H2 tags, regardless of where they are.

# ruby-on-rails-3 - PUT 路由被范围破坏

> ID：12376346
> 
> 赞同：0
> 
> 时间：2012-09-11T19:10:05.347
> 
> 标签：ruby-on-rails-3

在我的应用程序中，我有几个资源范围为“admin”，如下所示（在 routes.rb 中）：

```
scope 'admin', :as => 'admin' do
    resources :events
end 
```

因此，当我通过表单使用 #new 或 #update 方法时，我最终会收到 ActionController 异常说`No route matches [PUT] "/admin/events"`.

`rake routes`产生以下内容：

```
 admin_events GET    /admin/events(.:format)             events#index
                     POST   /admin/events(.:format)             events#create
     new_admin_event GET    /admin/events/new(.:format)         events#new
    edit_admin_event GET    /admin/events/:id/edit(.:format)    events#edit
         admin_event GET    /admin/events/:id(.:format)         events#show
                     PUT    /admin/events/:id(.:format)         events#update
                     DELETE /admin/events/:id(.:format)         events#destroy 
```

_表单代码：

```
<% if notice %>
  <p id="notice"><%= notice %></p>
<% end %>

<%= form_for @event, :html => { :class => 'form-horizontal' }, :url => url_for(:controller => 'events', :action => 'index') do |f| %>
<fieldset>

  <div class="control-group">
    <%= f.label :name, :class => 'control-label' %>
    <div class="controls">
      <%= f.text_field :name %>
    </div>
  </div>
  <div class="control-group">
    <%= f.label :event_date, :class => 'control-label' %>
    <div class="controls date-selects">
      <%= f.datetime_select :event_date, :start_year => 2012 %>
    </div>
  </div>
  <div class="control-group">
    <%= f.label :publish_date, :class => 'control-label' %>
    <div class="controls date-selects">
      <%= f.datetime_select :publish_date, :start_year => 2012 %>
    </div>
  </div>
  <div class="control-group">
    <%= f.label :blurb, :class => 'control-label' %>
    <div class="controls">
      <%= f.text_area :blurb, :class => 'span6 wysi' %>
    </div>
  </div>
  <div class="control-group">
    <%= f.label :graphic, :class => 'control-label' %>
    <div class="controls">
      <%= f.file_field :graphic %>
    </div>
  </div>
  <div class="control-group">
    <%= f.label :tix_link, :class => 'control-label' %>
    <div class="controls">
      <%= f.url_field :tix_link %>
    </div>
  </div>

  <div class="form-actions">
    <%= f.submit 'Submit', :class => 'btn-primary' %>
    <%= link_to t('.cancel', :default => t("helpers.links.cancel")), admin_events_path, :class => 'btn' %>
  </div>
</fieldset>
<% end %> 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T19:21:37.340

尝试从以下位置更改您的表单标签：

```
<%= form_for @event, :html => { :class => 'form-horizontal' }, :url => url_for(:controller => 'events', :action => 'index') do |f| %> 
```

到：

```
<%= form_for [:admin, @event], :html => { :class => 'form-horizontal' } do |f| %> 
```

这将使用正确的`admin`范围并正确生成 url，具体取决于是否`@event`保留在数据库中。

# vim - GViM：测试是否有任何菜单已创建和/或可见？

> ID：12376349
> 
> 赞同：1
> 
> 时间：2012-09-11T19:10:10.767
> 
> 标签：vim

虽然`has("menu")`可以告诉我 gvim 是否会支持菜单命令，但有没有办法在 vim 脚本中测试当前是否存在*任何*菜单？

我能想到的最接近的事情是执行`:menu`命令并计算输出。例如，在粗略的伪代码中......

```
 if count(":menu") != '0'
     " something has created a menu and is visible on screen
  else
     " no menus have been created
  endif 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T20:26:19.817

您的要求不寻常；`exists()`这就是为什么菜单项可能没有被`maparg()`.

您必须按照伪代码中的说明执行此操作：

```
redir => menuOutput
silent! menu
redir END

if menuOutput =~# '--- Menus ---\n$'
    " no menus
endif 
```

* * *

^(PS：过度依赖菜单是 Vim 的“臭味”；一方面，你在使用控制台 Vim 时没有它们（很容易访问）。)

# html - 如何在html中打印另一个网页？

> ID：12376350
> 
> 赞同：0
> 
> 时间：2012-09-11T19:10:13.273
> 
> 标签：html, printing

我正在用 html 编写一个网站，但是在我的代码中的一个页面上，我想说“单击此处打印目录列表”

目录列表是另一个网页，上面加载了我的信息。

谁能告诉我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T19:15:34.657

你可以使用 jQuery：

```
<a href="#" id="dir_list">Click here for...</a>
<div id="directorylisting"></div>

$("#dir_list").click(function() {
  $("#directorylisting").load("/path/to/your/page/with/data");
  // or if you what replace all page contents use:
  // $('body').load(...);
  return false;
}); 
```

或者是这样的：

```
<a href="#" onclick="document.location.href='/path/to/your/page/with/data'">Click for...</a> 
```

# css - How / Can I do this in CSS?

> ID：12376365
> 
> 赞同：0
> 
> 时间：2012-09-11T19:11:17.290
> 
> 标签：css, gradient

Take a look at this banner:

[http://schart.net/newbanas.png](http://schart.net/newbanas.png)

Can I make this stripish pattern using CSS? I want this to change whatever width the container is, so it should be CSS.

I'm making a portfolio and I want to sort out sections with this style of background.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-11T19:28:06.143

Yes you can.

The easiest/quickest way can be using a generator like [http://colorzilla.com/gradient-editor](http://colorzilla.com/gradient-editor)

For instance, here's a fiddle for a sample created using this generator: [http://jsfiddle.net/pratik136/VYRe2/](http://jsfiddle.net/pratik136/VYRe2/)

![screenshot](../Images/9648a457086d3a40280a27e3f9a6f21a.png)

*This is fairly cross-browser as well!*

**HTML**

```
<!--[if gte IE 9]>
  <style type="text/css">
    .gradient {
       filter: none;
    }
  </style>
<![endif]-->

<div class="stripey gradient">TEST GRADIENT</div>​ 
```

**CSS**

```
.stripey{
    background: #ff7577; /* Old browsers */
    /* IE9 SVG, needs conditional override of 'filter' to 'none' */
    background: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiA/Pgo8c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgdmlld0JveD0iMCAwIDEgMSIgcHJlc2VydmVBc3BlY3RSYXRpbz0ibm9uZSI+CiAgPGxpbmVhckdyYWRpZW50IGlkPSJncmFkLXVjZ2ctZ2VuZXJhdGVkIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSIgeDE9IjAlIiB5MT0iMCUiIHgyPSIxMDAlIiB5Mj0iMTAwJSI+CiAgICA8c3RvcCBvZmZzZXQ9IjAlIiBzdG9wLWNvbG9yPSIjZmY3NTc3IiBzdG9wLW9wYWNpdHk9IjEiLz4KICAgIDxzdG9wIG9mZnNldD0iMzQlIiBzdG9wLWNvbG9yPSIjZmY3NTc3IiBzdG9wLW9wYWNpdHk9IjEiLz4KICAgIDxzdG9wIG9mZnNldD0iMzQlIiBzdG9wLWNvbG9yPSIjMjA3Y2NhIiBzdG9wLW9wYWNpdHk9IjEiLz4KICAgIDxzdG9wIG9mZnNldD0iMzQlIiBzdG9wLWNvbG9yPSIjMjk4OWQ4IiBzdG9wLW9wYWNpdHk9IjEiLz4KICAgIDxzdG9wIG9mZnNldD0iNjklIiBzdG9wLWNvbG9yPSIjMjk4OWQ4IiBzdG9wLW9wYWNpdHk9IjEiLz4KICAgIDxzdG9wIG9mZnNldD0iNjklIiBzdG9wLWNvbG9yPSIjN2RiOWU4IiBzdG9wLW9wYWNpdHk9IjEiLz4KICAgIDxzdG9wIG9mZnNldD0iNjklIiBzdG9wLWNvbG9yPSIjZWFlY2ZmIiBzdG9wLW9wYWNpdHk9IjEiLz4KICAgIDxzdG9wIG9mZnNldD0iMTAwJSIgc3RvcC1jb2xvcj0iI2VhZWNmZiIgc3RvcC1vcGFjaXR5PSIxIi8+CiAgPC9saW5lYXJHcmFkaWVudD4KICA8cmVjdCB4PSIwIiB5PSIwIiB3aWR0aD0iMSIgaGVpZ2h0PSIxIiBmaWxsPSJ1cmwoI2dyYWQtdWNnZy1nZW5lcmF0ZWQpIiAvPgo8L3N2Zz4=);
    background: -moz-linear-gradient(-45deg,  #ff7577 0%, #ff7577 34%, #207cca 34%, #2989d8 34%, #2989d8 69%, #7db9e8 69%, #eaecff 69%, #eaecff 100%); /* FF3.6+ */
    background: -webkit-gradient(linear, left top, right bottom, color-stop(0%,#ff7577), color-stop(34%,#ff7577), color-stop(34%,#207cca), color-stop(34%,#2989d8), color-stop(69%,#2989d8), color-stop(69%,#7db9e8), color-stop(69%,#eaecff), color-stop(100%,#eaecff)); /* Chrome,Safari4+ */
    background: -webkit-linear-gradient(-45deg,  #ff7577 0%,#ff7577 34%,#207cca 34%,#2989d8 34%,#2989d8 69%,#7db9e8 69%,#eaecff 69%,#eaecff 100%); /* Chrome10+,Safari5.1+ */
    background: -o-linear-gradient(-45deg,  #ff7577 0%,#ff7577 34%,#207cca 34%,#2989d8 34%,#2989d8 69%,#7db9e8 69%,#eaecff 69%,#eaecff 100%); /* Opera 11.10+ */
    background: -ms-linear-gradient(-45deg,  #ff7577 0%,#ff7577 34%,#207cca 34%,#2989d8 34%,#2989d8 69%,#7db9e8 69%,#eaecff 69%,#eaecff 100%); /* IE10+ */
    background: linear-gradient(135deg,  #ff7577 0%,#ff7577 34%,#207cca 34%,#2989d8 34%,#2989d8 69%,#7db9e8 69%,#eaecff 69%,#eaecff 100%); /* W3C */
    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#ff7577', endColorstr='#eaecff',GradientType=1 ); /* IE6-8 fallback on horizontal gradient */
} 
```

Another way to do it is using precisely positioned `div`s with slanted borders. This comes with it's own set of boons and banes, so which one you pick depends pretty much on the purpose! The slanted-edged block element method is presented in a good tutorial here: [http://davidwalsh.name/css-triangles](http://davidwalsh.name/css-triangles)

If you actually want to learn about the magic behind it, Lea Verou has a good article on her blog: [http://lea.verou.me/2010/12/checkered-stripes-other-background-patterns-with-css3-gradients/](http://lea.verou.me/2010/12/checkered-stripes-other-background-patterns-with-css3-gradients/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-11T19:48:23.703

I like the concept quite a lot, so I basically duplicated it:

![enter image description here](../Images/f41452b19b9af9916ec0da03d3ff2a84.png)

The CSS is somewhat complicated, but I basically used the `:before` and `:after` pseudo-elements to create triangles:

```
body {
    background: #EEEEEE;
}

.stripe {
    display: inline-block;
    position: relative;

    font-family: 'Source Sans Pro', sans-serif;
    font-size: 72px;

    height: 130px;
    line-height: 130px;

    -webkit-transition: 0.2s all;
    -moz-transition: 0.2s all;

    cursor: pointer;
}

.red {
    color: white;
    background: #CD3333;
    border-color: #CD3333;
}

.red:hover {
    background: #d24747;
    border-color: #d24747;
}

.blue {
    color: white;
    background: #6495CA;
    border-color: #6495CA;
}

.blue:hover {
    background: #77a2d0;
    border-color: #77a2d0;
}

.stripe:after, .stripe:not(:first-child):before {
    content: '';
    display: block;
    position:absolute;

    top: 0;
    right: -50px;
    bottom: auto;
    left: auto;

    border-style: solid;
    border-width: 0 0 130px 50px;
    border-color: transparent inherit;
}

.stripe:not(:first-child) {
    margin-left: 45px;
}

.stripe:first-child {
    padding-left: 10px;
}

.stripe:not(:first-child):before {
    left: -50px;
    right: auto;

    -webkit-transform: rotate(-180deg);
    -moz-transform: rotate(-180deg);
} 
```

**Demo: [http://jsfiddle.net/Nq35k/19/](http://jsfiddle.net/Nq35k/19/)**

It only works in WebKit browsers. It should work with Firefox, but it doesn't.

# python - 对象满足特定条件后发送电子邮件

> ID：12376367
> 
> 赞同：1
> 
> 时间：2012-09-11T19:11:28.063
> 
> 标签：python, django, django-email

[希望我正确地为这篇文章命名]

我有一个（有点）“关注”推特的事情。用户可以关注`company`创建对象的配置文件`follower`对象。

```
class Follower(models.Model):
    created = models.DateTimeField(auto_now_add=True)
    modified = models.DateTimeField(auto_now=True)
    profile = models.ForeignKey(UserProfile)
    company = models.ForeignKey(Company)
    verified = models.BooleanField(default=False)
    from_user = models.BooleanField(default=False)

...

class Company(models.Model):
    owner = models.ForeignKey(User, null=True, blank=True, on_delete=models.SET_NULL)
    name = models.CharField(max_length=200)
    ... and more fields that aren't relevant 
```

我想做的是在 5 个新关注者之后向公司资料所有者发送更新电子邮件。'你有 5 个新的追随者！'。

截至目前，每当他们有新的追随者时，我都会向所有者发送一封电子邮件。有点多，我知道。

我猜我需要创建一个关注者列表，发送它，然后删除它以准备 5 个新关注者？我真的不知道该怎么做。非常感谢任何帮助或建议。

看法：

```
@login_required
# this is creating a follower. Maybe I shouldn't send the email through this?
def follow(request, id):
    company = Company.objects.get(id=id)
    profile = get_object_or_404(UserProfile, user__username=request.user.username)
    try:
        follower = Follower.objects.get(profile=profile, company=company)
        if not follower.verified:
            follower.verified = True
            follower.save() 
        messages.success(request, 'Now following %s\''%company.name)
        mes = Message(subject="New Follower", sender=profile, recipient=company.owner)
        mes.body = render_to_string('emails/email-message/new_follower.html', RequestContext(request, {
        'sender': profile,
        'receiver': company.owner,
        }))
    except ObjectDoesNotExist:
        messages.error(request, 'Failed to follow.') 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T19:17:45.000

每次特定公司的关注者数量变为 5 的倍数时发送电子邮件，如下所示：

```
 if not (Follower.objects.filter(company=company).count() % 5):
        #send the email 
```

# sed - 在 text/html 模板中缩小 HTML 文件

> ID：12376368
> 
> 赞同：4
> 
> 时间：2012-09-11T19:11:39.850
> 
> 标签：sed, mustache, handlebars.js, yui-compressor, http-compression

我使用小胡子/车把模板。

例如：

```
<script id="contact-detail-template" type="text/html">
    <div>... content to be compressed </div>
</script> 
```

我希望在模板中压缩/缩小我的 HTML 文件以获得最佳压缩效果。

YUIcompressor，关闭不起作用，因为他们认为它是脚本并给我脚本错误。

即使 HTMLCompressor 认为它是一个脚本，它也不会触及它们。

如何使用 text/html 类型缩小脚本标签中的内容？我可以使用图书馆吗？如果不是，sed 或 egrep 是更好的方法吗？你有 sed/egrep 语法来删除空行（只有空格或制表符）、删除所有制表符、修剪多余的空格吗？

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-11T20:14:09.840

`sed -e "s/^[ \t]*//g" -e "/^$/d" yourfile`这将从开头删除所有多余的空格和制表符，并删除所有空行。

`sed -e "s/^[ \t]*//g" -e ":a;N;$!ba;s/\n//g" yourfile`这将从一开始就删除所有多余的空格和制表符，并连接所有代码。

对不起，如果我错过了什么。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-12T07:44:53.277

尝试使用[Pretty Diff](http://prettydiff.com/?m=minify)来缩小这种代码。如果没有 mime 类型或者类型是各种 JavaScript 类型之一，它只会假设 script 标签内的内容是 JavaScript。它也很聪明，可以知道哪些空白可以删除，而不会破坏内容的输出或以后对代码的递归美化。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-03-25T16:40:29.243

使用`sed ':a;N;$!ba;s/>\s*</></g' file`，它可以让您删除**不需要的***空格和换行符*。与 ghaschel 示例不同，这**不会删除**行开头的那些有用的空格，因为它会保留和标记。****`<pre>``<p>`****

 ****这很有用，因为您可以删除和之间的空格`>`，`<`这是**扩大**html 文件的常用方法。此示例还可用于**XML 文件**，例如*atom feed*和*rss feed*。

[我个人在我的站点生成器](http://git.pickfire.wha.la/www)中使用它作为管道，这可以减少正常文件大小并且[可以与`gzip`](https://css-tricks.com/the-difference-between-minification-and-gzipping/).****

# javascript - javascript 中两种场景的正则表达式语句

> ID：12376370
> 
> 赞同：-3
> 
> 时间：2012-09-11T19:11:49.787
> 
> 标签：javascript, regex

我正在寻找两个 regExp 语句

1.  确定一个文本区域是否只有没有其他数据的空格（即`" "` 或`" "`n 次）
2.  确定成对的十六进制值（即 A2、81、3B 等）是否由 1 个空格以外的任何内容分隔。值之间的两个空格、三个空格等无效。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T19:18:53.587

这两个应该工作：

1.  `^\s*$`
2.  `^([a-fA-F\d]{2}\s)*[a-fA-F\d]{2}$`

为了将来参考，请在您的问题中包含有关您尝试过的内容的更多信息。一些测试用例（尤其是第二个表达式）也会很有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T21:02:09.610

**1.**

*   空白或 n 个空格：`^\s*$`
*   1个或多个空格，它不会匹配空：`^\s+$`

**2.**

*   `/[0-9a-fA-F]{2}[\s]{2,}[0-9a-fA-F]{2}/`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T19:14:27.360

这将类似于

*   `^\s*$`

和

*   `([\dA-F][\dA-F]\s[\dA-F][\dA-F])+`

# javascript - 滑动门按钮未正确单击

> ID：12376374
> 
> 赞同：0
> 
> 时间：2012-09-11T19:12:08.950
> 
> 标签：javascript, jquery, html, css

我正在使用[CSS 滑动门](http://css-tricks.com/examples/Sprites+SlidingDoors-Button/#)，当我尝试将事件处理程序附加到它时，由于锚点内的跨度，它似乎没有被触发。

我有与上面链接相同的 CSS，有一个名为“按钮”的类：

```
<a href="#" class="button"><span>Submit</span></a> 
```

当我单击最右侧时，它可以工作，它在跨度之外。但是当我点击跨度时，它没有

我正在附加一个这样的事件处理程序：

```
$('.button').live('click', function(e){ 
    alert('click');
}); 
```

对此有什么建议吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T19:22:42.333

看看[这个小提琴](http://jsfiddle.net/wuMrT/2/)。有用。它可能在 CSS 中。

此外，我更改了“live”，因为它已被弃用。

```
$('.button').on('click', function() {alert('click')}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T19:16:14.063

只需将事件侦听器放在跨度上即可。

```
$('.button span').on('click', function(e){ 
    alert('click');
}); 
```

# php - Tumblr API 的 oAuth Post 失败（401 错误）

> ID：12376380
> 
> 赞同：1
> 
> 时间：2012-09-11T19:12:45.240
> 
> 标签：php, oauth, tumblr

这是我正在使用的 json 请求，

```
http://api.tumblr.com/v2/blog/samarthsave1.tumblr.com/post?oauth_consumer_key=XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
&oauth_nonce=XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
&oauth_signature=14RMDFmQbzWRKPvfrijQRf%2FoNqY%3D
&oauth_signature_method=HMAC-SHA1
&oauth_timestamp=1347387190
&oauth_token=XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
&oauth_version=1.0
&title=This%20test
&url=http%3A%2F%2Fgoogle.com
&description=asd%20as%20asdasas%20ad%20a
&api_key=XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
&type=link 
```

我通过以下标题

{"Content-Type":"application/x-www-form-urlencoded","Authorization":"OAuth","Accept":" */* "}

我正进入（状态

```
{"meta":{"status":401,"msg":"Not Authorized"},"response":[]} 
```

我错过了什么？

# android - Android listview不会加载图像

> ID：12376381
> 
> 赞同：-1
> 
> 时间：2012-09-11T19:12:48.570
> 
> 标签：android, listview

我有列表视图，并且在每一行中都需要一个横向滚动视图，包含 N 个图像，并且只要我开始该活动，它就会不断使我的应用程序崩溃

这是代码

```
public View getView(int position, View convertView, ViewGroup parent) {

    View vi=convertView;
    if(convertView==null){
        vi = inflater.inflate(R.layout.foto_list_row, null);
    }

    TextView title = (TextView)vi.findViewById(R.id.foto_title); // title

    HashMap<String, String> n = new HashMap<String, String>();
    n = data.get(position);
    LinearLayout ll = (LinearLayout) vi.findViewById(R.id.fotoh);
    String var[] = (n.get(FotoView.TAG_ALBUM)).split(",");
    ImageView iv = new ImageView(activity.getApplicationContext());
    for(int a=0;a<var.length;a++){
        String t = var[a];
        if(t == "null"){
            t.replace("null", "");
        }else{
            //tv.setText(t);
            imageLoader.DisplayImage(t,iv);
            ll.addView(iv);
        }
    }

    // Setting all values in listview
    title.setText(n.get(FotoView.TAG_TITLE));
    return vi;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T20:01:17.043

我认为您可能想要的是在 xml 布局文件中拥有一个画廊，并且该文件将用作 ListView 行，您需要在 getView() 中为画廊创建另一个适配器，您需要这样做。

```
public View getView(int position, View convertView, ViewGroup parent)
{
    Gallery gallery;
    if (convertView == null)
        gallery == inflater.inflate(R.layout.gallery_row, parent, false);
    else 
        gallery == (Gallery) convertView;

    String[] images = data.get(position).split(",");
    GalleryAdapter gAdapter = new GalleryAdapter(images);
    gallery.setAdapter(gAdapter);

    return gallery;

} 
```

我认为有了这个你可以有一个基本的想法，你应该做什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T19:44:51.503

只需在 google 中搜索“listview 的世界”，您就会得到答案如何在 android 中为列表类型创建自定义适配器

# android - 列表视图中的自定义单选按钮

> ID：12376389
> 
> 赞同：1
> 
> 时间：2012-09-11T19:13:09.863
> 
> 标签：android

我已经通过添加自定义可绘制对象并将它们设置在 xml 文件中来自定义我的普通单选按钮，但我似乎无法使用 listview 中由choice_mode_single 生成的单选按钮来实现相同的功能。我已经查看了源代码，但无法弄清楚为什么它们仍然是默认值，有人可以帮助我吗？：P

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T19:33:10.607

您可以为单选按钮设置选择器

如下

[http://blog.dev mind.com/posts/custom-android-radiobutton](http://blog.devminded.com/posts/custom-android-radiobutton)

只是你需要相应的图像你的设计。

# facebook - 如何使用 facebook api 显示朋友去过的地方？

> ID：12376390
> 
> 赞同：2
> 
> 时间：2012-09-11T19:13:12.370
> 
> 标签：facebook, api, facebook-graph-api, checkin

我正在建立一个带有场地（例如电影院）的网站，我需要向用户（使用 facebook 登录的用户）展示他/她的朋友已经签到了这个地方。

我在我的地方使用 long, lat。我正在考虑使用一个查询，该查询将带来用户朋友的签到，由位置中心和距离指定：

> [https://graph.facebook.com/search?type=location¢er=38.01166,23.69272&distance=30&access_token=AAAAAAITEghMBAOL5MyxLDoFpRlirSFmEYYGZB7tHd8BH8YsUOW03uX4ewz6lVVPFWudujS0RZC7HdXm2r7OfVvnEgSr3KqRw4XQ5WeCOm](https://graph.facebook.com/search?type=location&center=38.01166,23.69272&distance=30&access_token=AAAAAAITEghMBAOL5MyxLDoFpRlirSFmEYYGZB7tHd8BH8YsUOW03uX4ewz6lVVPFWudujS0RZC7HdXm2r7OfVvnEgSr3KqRw4Q5WqlEeCNYm07XxyO)

查询对吗？有没有更好的办法？我将如何在我的网站上的场地页面上显示用户的个人资料图片？

我真正需要创造的是这样的东西！（来自tripbirds.com）但我只想展示他们的照片而不是他们在那个地方的帖子。

[http://imageshack.us/photo/my-images/13/22811412.png/](http://imageshack.us/photo/my-images/13/22811412.png/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T20:38:55.117

由于每个地方都有自己的 page_id，因此您可以使用[checkin 表](https://developers.facebook.com/docs/reference/fql/checkin/)和[朋友表](https://developers.facebook.com/docs/reference/fql/friend/)来构造查询，例如 -

```
select author_uid from checkin where page_id = [PLACEID_WHERE_CHECKEDIN] and author_uid in (select uid2 from friend where uid1 = me()) 
```

一旦你有了朋友的 id，就很容易从[用户表](https://developers.facebook.com/docs/reference/fql/user/)中获取他们的信息和个人资料图片。如果您真的想在 1 个查询中执行此操作，您可以将上述内容包含在一个查询中，例如 -

```
select pic_square from user where uid in (ABOVE-QUERY) 
```

# mysql - 如果 col 值 != 指定值，MySQL 返回 true/false

> ID：12376392
> 
> 赞同：0
> 
> 时间：2012-09-11T19:13:19.717
> 
> 标签：mysql, database

如何编写一个基于列值返回真/假（实际上是 1/0）的 MySQL 查询。

在我的实例中，我想为日期时间 col 返回“hasDate”，我们称之为 myDateTime

如果 myDateTime 的值为 000-00-00 00:00:00 我想返回 hasDate 0 (false)

如果 myDateTime 有任何其他值，我想返回 hasDate of 1 (true)

感谢你的协助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-11T19:18:41.603

使用`IF`声明

```
SELECT IF(myDateTime = '0000-00-00 00:00:00',0,1) AS hasDate FROM myTable 
```

但最好的办法是改变你的数据结构以避免这样做。

# rest - 休息：从用例中选择 URL 的正确或错误

> ID：12376393
> 
> 赞同：0
> 
> 时间：2012-09-11T19:13:22.540
> 
> 标签：rest, uri

我参加了一个开发者大会，演讲者认为以下一组 URL 不是 RESTful：

```
/users/username/changepassword
/users/username/resetpassword 
```

给出的主要原因是相同的 URL 可能在不同的上下文中使用，这并没有以有意义的方式促进 HATEOAS。然后他继续争辩说，更可行的方法是使用以下 URL：

```
/account/changepassword
/administration/server/users/username/resetpassword 
```

根据演讲者的说法，后一种方法允许每个用例为每个 URL 提供一个专门定制的 (html-) 表单，然后可以将其发布到同一个 URL。在不同的上下文中使用相同的 URL 不再有问题。

我会自发地说，这些 URL 集都不是 RESTful 的，仅仅是因为它们都以动作（动词）为中心，在我看来，除了特殊情况（如搜索）之外，这些动作（动词）并不真正符合资源的条件。我觉得这个设置很像 RPC。

我会建议一些更像名词和颗粒状的东西

```
 //Change password
 PUT /users/username/account/password
 //Register reset
 POST /users/username/account/password/resets
 //Verify reset
 PUT /users/username/account/password/resets/0/verification_code 
```

你有什么意见？演讲者是否接近 RESTful，或者这里没有足够的信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T19:26:21.177

我同意，RESTful 接口的整个想法（据我所知）是允许访问“资源”。所以这些 URL 方案对我来说都不是很好。

话虽如此，REST 并不是一成不变的，它更像是一种指南，而不是一套规则。有些事情不能很好地适应它，所以你必须尽可能地使用 HTTP 动词。

密码重置不是资源，但密码是。所以，对于密码重置操作，我会说一些类似的话......

```
GET /users/antonyscott/password
PUT /users/antonyscott/password 
```

第二次调用需要从第一次调用派生的某种身份验证并传入新密码。实际上，这更像是直接更改密码而不是重置。如果您在重置之后（即 - 按照电子邮件中的链接确认重置），那么您所拥有的似乎还可以。

显然，设计一个 API 是一个迭代过程，所以我想说试试看它是如何工作的，然后对其进行改进。

# php - javascript 似乎没有创建错误的圈子

> ID：12376394
> 
> 赞同：0
> 
> 时间：2012-09-11T19:13:22.897
> 
> 标签：php, javascript

javascript 似乎没有创建错误的圆圈，if 语句中的 else 回显。我是否以错误的顺序编写了javascript？我知道它不是 php，因为正确的 div 显示在源代码中。

```
 </style>
    <script>
      window.onload = function() {
        //uetr circle
        var canvas = document.getElementById("Canvas");
        var context = canvas.getContext("2d");
        var centerX = canvas.width / 2;
        var centerY = canvas.height / 2;
        var radius = 70;
        context.beginPath();
        context.arc(centerX, centerY, radius, 0, 2 * Math.PI, false);
        context.fillStyle = "#00FF7F";
        context.fill();
        context.lineWidth = 5;
        context.strokeStyle = "black";
        context.stroke();

        //false circle
        var canvas = document.getElementById("Canvas1");
        var context = canvas.getContext("2d");
        var centerX = canvas.width / 2;
        var centerY = canvas.height / 2;
        var radius = 70;
        context.beginPath();
        context.arc(centerX, centerY, radius, 0, 2 * Math.PI, false);
        context.fillStyle = "#B0171F";
        context.fill();
        context.lineWidth = 5;
        context.strokeStyle = "black";
        context.stroke();
      };

    </script>
  </head>
    <body>
        <?php

        $visible = true;

        if($visible){
            echo "<div id='unhidden'><canvas id='Canvas' width='578' height='200'></canvas></div>";
        }
        else{
            echo "<div id='hidden'><canvas id='Canvas1' width='578' height='200'></canvas></div>";
        }
        ?>
    </body> 
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T19:20:24.420

你只回显一个`canvas`标签。您的脚本尝试绘制两个元素。一旦遇到不存在的元素，它就会中断 - 检查您的错误控制台。如果你呼应“真”圆圈，它会在绘制第一个圆圈后中断 - 如果你呼应“假”圆圈，它会在绘制任何内容之前中断。

`canvas !== null`根据可见性检查，或者更好地只执行一个函数：

```
<script type="text/javascript">
window.onload = function() {
    function drawCircle(canvasid, color) {
        var canvas = document.getElementById(canvasid);
        if (!canvas) // check for null
           return;
        var context = canvas.getContext("2d");
        var centerX = canvas.width / 2,
            centerY = canvas.height / 2;
        var radius = 70;
        context.beginPath();
        context.arc(centerX, centerY, radius, 0, 2 * Math.PI, false);
        context.fillStyle = color;
        context.fill();
        context.lineWidth = 5;
        context.strokeStyle = "black";
        context.stroke();
    }

    <?php
if (true)
    echo "    drawCircle('canvas', '#00FF7F');";
else
    echo "    drawCircle('canvas', '#B0171F');";
?>
}; // end onload function
</script>

<body>
    <?php
    if (true){
        echo "<div id='unhidden'>";
    else
        echo "<div id='hidden'>";
   ?>
   <canvas id='canvas' width='578' height='200'></canvas>
   </div>
</body> 
```

# c++ - 执行身份提升::lexical_cast 有什么开销？

> ID：12376398
> 
> 赞同：5
> 
> 时间：2012-09-11T19:13:36.370
> 
> 标签：c++, boost, lexical-cast

给定一个函数，例如：

```
template< typename T >
void function1( const T &t )
{
  function2( boost::lexical_cast<std::string>(t) );
} 
```

`function1`如果传递给的类型已经是 a会产生什么样的开销`std::string`？

开销是否因我要使用的类型而异`lexical_cast`？

做一个重载的函数来绕过演员表是多余的吗？例如：

```
void function1( const std::string &t )
{
  function2( t );
}

template< typename T >
void function1( const T &t )
{
  function1( boost::lexical_cast<std::string>(t) );
} 
```

boost 的版本可能与您的答案有关，据我所知，它`lexical_cast`已在修订版中进行了一些优化。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-11T19:42:30.193

由于文档没有提供有关此主题的任何内容，因此我深入研究了`lexical_cast`源代码 (1.51.0)，发现它对类型进行了一些编译时检查，并决定了一个特定的“caster 类”来进行转换。如果源和目标相同，这个“施法者类”将简单地返回输入。

从源代码（ ）进行伪编码和简化`boost/lexical_cast.hpp:2268`：

```
template <typename Target, typename Source>
Target lexical_cast(const Source &arg)
{
    static if( is_character_type_to_character_type<Target, src> ||
               is_char_array_to_stdstring<Target, src> ||
               is_same_and_stdstring<Target, src> )
    //         ^-- optimization for std::string to std::string and similar stuff
    {
      return arg;
    }
    else
    {
      /* some complicated stuff */
    }
} 
```

但是，我无法直接看到其他身份转换的任何优化，并且查看通常选择的`lexical_cast_do_cast`“施法者类”让我头疼。:(

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T19:44:20.907

[http://www.boost.org/doc/libs/1_51_0/doc/html/boost_lexical_cast/performance.html](http://www.boost.org/doc/libs/1_51_0/doc/html/boost_lexical_cast/performance.html)

考虑这个链接，字符串到字符串非常快。

> 所有测试都以毫秒为单位测量以下代码块的 10000 次迭代的执行速度：

```
 typedef BOOST_DEDUCED_TYPENAME ::boost::type_traits::ice_or<
            ::boost::detail::is_xchar_to_xchar<Target, src >::value,
            ::boost::detail::is_char_array_to_stdstring<Target, src >::value,
            ::boost::type_traits::ice_and<
                 ::boost::is_same<Target, src >::value,
                 ::boost::detail::is_stdstring<Target >::value
            >::value
    > shall_we_copy_t; 
```

在我们的例子`shall_we_copy_t::value`中是正确的，因为第三种情况对我们有用（`Target`并且`src`是相等的类型并且`Target`类型是`std::basic_string`）。

```
 typedef BOOST_DEDUCED_TYPENAME ::boost::mpl::if_c<
        shall_we_copy_t::value,
        ::boost::detail::lexical_cast_copy<src >,
        BOOST_DEDUCED_TYPENAME ::boost::mpl::if_c<
             shall_we_copy_with_dynamic_check_t::value,
             ::boost::detail::lexical_cast_dynamic_num<Target, src >,
             ::boost::detail::lexical_cast_do_cast<Target, src >
        >::type
    >::type caster_type; 
```

因为，`shall_we_copy_t::value`是真的，我们的 caster_type 将是`lexical_cast_copy`

```
return caster_type::lexical_cast_impl(arg); 
```

所以，会被调用`lexical_cast_copy::lexical_cast_impl`，这很简单

```
 template <typename Source>
    struct lexical_cast_copy
    {
        static inline Source lexical_cast_impl(const Source &arg)
        {
            return arg;
        }
    }; 
```

# java - 处理打开一个虚拟串口

> ID：12376399
> 
> 赞同：0
> 
> 时间：2012-09-11T19:13:48.173
> 
> 标签：java, linux, serial-port, virtual, processing

我正在使用[处理](http://www.processing.org/)库，我想用它创建一个虚拟串行端口，并且通过其他读取，有很多读取串行端口的示例，但我没有找到如何打开串行端口，我该如何做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T19:18:26.047

从您引用的链接[http://www.processing.org/reference/libraries/serial/Serial.html](http://www.processing.org/reference/libraries/serial/Serial.html)：

```
// Example by Tom Igoe

import processing.serial.*;

// The serial port:
Serial myPort;       

// List all the available serial ports:
println(Serial.list());

// Open the port you are using at the rate you want:
myPort = new Serial(this, Serial.list()[0], 9600);

// Send a capital A out the serial port:
myPort.write(65); 
```

# sqlite - 用于存储的黑莓 SQLite 或 XML 文件？

> ID：12376402
> 
> 赞同：1
> 
> 时间：2012-09-11T19:13:59.503
> 
> 标签：sqlite, blackberry

总的来说，我一直在黑莓开发和黑莓 SQLite 方面遇到问题。

我正在考虑在设备上存储数据的替代方案。

首先，存储在设备上的数据 99% 的时间都来自 Web 服务调用。Web 服务响应的范围可以从小于 0.5kB 到 10 甚至 20 Kb。

我遇到的很多麻烦都围绕着这样一个事实，即我使用线程来使我的 Web 服务调用异步，并且数据库连接之间会出现许多冲突。[我也遇到](https://stackoverflow.com/questions/12375065/blackberry-databaseoutofmemoryexception-with-sqlite)了问题`DatabaseOutOfMemoryException`，我什至在文档中都没有找到。

将 Web 服务响应存储在它的原始 XML 中（作为设备上的 xml 或 txt 文件），并且每次我想在 UI 上加载一些东西时从那里读取它是一个好主意吗？现在我只是在一个字符串中获取原始 XML 并解析它（使用 DocumentBuilder 等......），将内容存储到我的 SQLite 的不同表中。

取消 SQLite 并专门使用 XML 会更快吗？会不会容易些？？对打开文件的读/写访问是否会发生冲突？我的应用程序有很多读/写操作，所以我想让它尽可能易于管理。

任何想法都会很棒，谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T03:58:00.303

您可以使用[持久存储](http://www.blackberry.com/developers/docs/7.1.0api/net/rim/device/api/system/PersistentStore.html)，而不是 SqlLite。持久存储的一大优势是它始终可用 - 无需担心丢失 SDCard 或在设备连接 USB 时挂载文件系统。“大”是指从支持的角度来看，这绝对是巨大的。当 SqlLite 数据库在 BlackBerry 上可用时，解释所有的边缘情况是一个[巨大的痛苦](https://stackoverflow.com/questions/4447526/blackberry-sqlite-database-creation-filesystem-not-ready/4451954#4451954)。

持久存储的最大缺点是每个对象有 64kb 的限制。如果您知道您所有的 XML 片段永远不会超过这个值，那么您就可以了。但是，如果您*可能*超过 64kb，那么您将需要提出一个可持久化的对象，该对象有意将任何大型流分成每个小于 64kb 的组件。

# mysql - 在mysql中创建索引需要多长时间？

> ID：12376403
> 
> 赞同：1
> 
> 时间：2012-09-11T19:13:59.090
> 
> 标签：mysql, sql, indexing

我最近得到了创建一些索引的建议，这是我的 sql 代码

```
CREATE INDEX my_idx1 ON identdb (name,long1,lat1,date,count);
CREATE INDEX my_idx2 ON identdb (name,long1,lat1,date);
CREATE INDEX my_idx3 ON identdb (long1,lat1,date);
CREATE INDEX my_idx4 ON identdb (long1,lat1); 
```

有 700 万行，7 列，我在本地数据库上执行此操作。

它已经运行了大约 16 个小时。我做错什么了吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T19:18:35.067

这可能需要一段时间，尽管 16 小时似乎太长了。执行 a`show processlist`并查看它`CREATE INDEX`是否仍在运行，或者它是否被某些东西阻塞。

顺便说一句，您的两个索引是多余的（`my_idx2`和`my_idx4`）。作为另一个索引的前缀的索引是不必要的，因为较长的索引可以在任何使用较短索引的地方使用。

# ruby - 返回未定义方法'[]'的递归方法

> ID：12376408
> 
> 赞同：0
> 
> 时间：2012-09-11T19:14:27.487
> 
> 标签：ruby

我不确定为什么这个递归方法会返回`NoMethodError: undefined method '[]' for nil:NilClass`

```
def test_method(a, b)
    (a[0] == b[0] ? 0 : 1) + test_method(a[1..-1], b[1..-1])
end 
```

编辑：我正在发送字符串以供比较它们的参数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T19:20:53.097

这是因为您没有检查 a 和 b 是否为空数组。一次将减少为空数组

在打电话之前你应该写

```
 if not (a.empty? or b.empty?)
  (a[0] == b[0] ? 0 : 1) + test_method(a[1..-1], b[1..-1])
 end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T19:24:06.327

实际上，有一次，它会减少为空字符串，然后为零。然后导致 NoMethodError: undefined method '[]' for nil:NilClass。

正在发生这样的事情：

```
'ss'[1..-1] => 's'
'ss'[1..-1][1..-1] => ""
'ss'[1..-1][1..-1][1..-1] => nil 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-11T19:26:59.243

由于您正在迭代一个更小的数组/字符串/任何内容，因此您必须考虑到达它的末尾。我不知道您要完成什么，但这至少可以阻止它爆炸：

```
def test_method(a, b)
  return 0 if a.nil? || b.nil?
  (a[0] == b[0] ? 0 : 1) + test_method(a[1..-1], b[1..-1])
end 
```

# c# - 你如何从 Javascript 中调用 OnPageIndexChanging？

> ID：12376409
> 
> 赞同：1
> 
> 时间：2012-09-11T19:14:27.807
> 
> 标签：c#, javascript, asp.net

我有代码，当用户想要通过 GridView 进行分页时，它会询问他们（使用 JavaScript 确认）是否要保存网格中的数据。所以，我能够让确认工作（使用代码隐藏保存功能），但我注意到它没有触发 OnPageIndexChanging 方法 - 这基本上违背了这里的目的。

那么，总而言之，JavaScript 可以访问 OnPageIndexChanging 方法吗？

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T19:33:12.753

该`OnPageIndexChanging`事件是服务器端事件，因此您的 Javascript 处理程序没有被触发也就不足为奇了。

* * *

我不确定 ASP.Net 是否有“内置”方式来做到这一点；但是您可以通过附加自己的 Javascript 侦听器来做到这一点。这是一般方法（我使用 JQuery 使其更容易）：

1.  编写一个 JQuery 选择器来获取您要确认的所有分页链接。
2.  为每个链接添加一个`click`监听器
3.  使*确认*函数成为这些侦听器的处理程序

所以，代码看起来像这样：

```
$("#grid a").each(function () {
    $(this).click(function () {
        return confirm("really?");
    });
}); 
```

[**笔记**]

1.  这`grid`是`GridView`控件的 ID，因此`#grid a`选择`a`我的网格中的每个标签。
2.  如果用户未确认，则 使用`return confirm()`返回*false ，这有效地取消了点击事件。*

# plone - Plone 3.3.5 portlets_fetcher 问题

> ID：12376413
> 
> 赞同：0
> 
> 时间：2012-09-11T19:14:59.713
> 
> 标签：plone

我一直在处理克隆升级，我想我几乎完成了清理工作。

这个最新的错误让我...

在 main_template 我得到一个错误：

```
Macro Expansion failed
exceptions.NameError: name 'pathexpr' is not defined 
```

我将其追溯到来自 portlets_fetcher 模板。这个是开箱即用的，但它仍然抛出错误。

没看懂，直接看：

```
tal:define="pathexpr python:slot[0];
            usemacro python:slot[1];" 
```

有人知道我为什么会得到这个吗？

我的故障排除，我在尝试编辑自定义 main_template 时遇到错误。我在任何地方都没有看到 pathexpr，所以我使用了 skins 文件夹中的 find 选项卡，唯一的结果是 portlets_fetcher。我将 portlets_fetcher 复制到 custom 并在那里看到了同样的错误。

编辑：这是 portlets_fetcher 模板：

```
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      xmlns:i18n="http://xml.zope.org/namespaces/i18n"
      i18n:domain="plone">
<body>
<metal:leftcolumn define-macro="left_column"
   tal:define="Iterator python:modules['Products.CMFPlone'].IndexIterator;
               tabindex python:Iterator(pos=10000, mainSlot=False);"0
   tal:condition="sl|nothing">
    <metal:block tal:repeat="slot sl">
        <tal:dontcrash tal:on-error="structure python:context.plone_log('Error %s on %s while rendering portlet %s'%(error.type, error.value, slot[0])) or
                                            '&lt;div class=\'error\'&gt;Error %s on %s: %s&lt;/div&gt;' % (error.type, slot[0], error.value)"
                       tal:define="pathexpr python:slot[0];
                                   usemacro python:slot[1];">
        <tal:block tal:condition="usemacro">
            <metal:block metal:use-macro="python:path(pathexpr)" />
        </tal:block>
        <span tal:condition="not: usemacro"
              tal:replace="structure python:path(pathexpr)" />
        </tal:dontcrash>
    </metal:block>
</metal:leftcolumn>

<metal:rightcolumn define-macro="right_column"
   tal:define="Iterator python:modules['Products.CMFPlone'].IndexIterator;
               tabindex python:Iterator(pos=20000, mainSlot=False);"
   tal:condition="sr">
    <metal:block tal:repeat="slot sr">
        <tal:dontcrash tal:define="pathexpr python:slot[0];
                                   usemacro python:slot[1];">
        <tal:block tal:condition="usemacro">
            <metal:block metal:use-macro="python:path(pathexpr)" />
        </tal:block>
        <span tal:condition="not: usemacro"
              tal:replace="structure python:path(pathexpr)" />
        </tal:dontcrash>
    </metal:block>
</metal:rightcolumn>

</body>
</html> 
```

这是main_template：

```
<metal:page define-macro="master"><metal:doctype define-slot="doctype"><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"></metal:doctype>
<metal:block define-slot="top_slot" />
<metal:block use-macro="here/global_defines/macros/defines" />
<html xmlns="http://www.w3.org/1999/xhtml"
      xml:lang="en"
      lang="en"
      tal:attributes="lang language;
                      xml:lang language">
  <tal:cache tal:define="lang language;
                         charset site_properties/default_charset|string:utf-8">
    <metal:cache use-macro="here/global_cache_settings/macros/cacheheaders">
      Get the global cache headers located in global_cache_settings.
    </metal:cache>
  </tal:cache>
  <head metal:use-macro="here/header/macros/html_header">
    <metal:fillbase fill-slot="base">
      <metal:baseslot define-slot="base">
        <base href="" tal:attributes="href here/renderBase" />
      </metal:baseslot>
    </metal:fillbase>
    <metal:headslot fill-slot="head_slot">
      <metal:headslot define-slot="head_slot" />
      <tal:comment replace="nothing"> A slot where you can insert elements in the header from a template </tal:comment>
    </metal:headslot>
    <metal:styleslot fill-slot="style_slot">
      <tal:comment replace="nothing"> A slot where you can insert CSS in the header from a template </tal:comment>
      <metal:styleslot define-slot="style_slot" />
    </metal:styleslot>
    <metal:cssslot fill-slot="css_slot">
      <tal:comment replace="nothing"> This is deprecated, please use style_slot instead. </tal:comment>
      <metal:cssslot define-slot="css_slot" />
    </metal:cssslot>
    <metal:javascriptslot fill-slot="javascript_head_slot">
      <tal:comment replace="nothing"> A slot where you can insert javascript in the header from a template </tal:comment>
      <metal:javascriptslot define-slot="javascript_head_slot" />
    </metal:javascriptslot>
  </head>
  <body tal:attributes="class here/getSectionFromURL;
                        dir python:test(isRTL, 'rtl', 'ltr')">
    <div id="visual-portal-wrapper">
      <div id="portal-top" i18n:domain="plone">
        <div id="portal-header">
            <p class="hiddenStructure">
                <a accesskey="2"
                   tal:attributes="href string:${current_page_url}#documentContent"
                   i18n:translate="label_skiptocontent">Skip to content.</a> |
                <a accesskey="6"
                   tal:attributes="href string:${current_page_url}#portlet-navigation-tree"
                   i18n:translate="label_skiptonavigation">Skip to navigation</a>
            </p>
             <div metal:use-macro="here/global_siteactions/macros/site_actions">
               Site-wide actions (Contact, Sitemap, Help, Style Switcher etc)
             </div>
             <!--div metal:use-macro="here/global_searchbox/macros/quick_search">
               The quicksearch box, normally placed at the top right
             </div-->
             <a metal:use-macro="here/global_logo/macros/portal_logo">
               The portal logo, linked to the portal root
             </a>
             <!--div metal:use-macro="here/global_skinswitcher/macros/skin_tabs">
               The skin switcher tabs. Based on which role you have, you
               get a selection of skins that you can switch between.
             </div-->
             <div metal:use-macro="here/global_sections/macros/portal_tabs">
               The global sections tabs. (Welcome, News etc)
             </div>
          </div>
          <div metal:use-macro="here/global_personalbar/macros/personal_bar">
            The personal bar. (log in, logout etc...)
          </div>
          <!--div metal:use-macro="here/global_pathbar/macros/path_bar">
            The breadcrumb navigation ("you are here")
          </div-->
      </div>
      <!--div class="visualClear" id="clear-space-before-wrapper-table" /-->
      <tal:comment replace="nothing">
      The wrapper table. It contains the three columns. There's a table-less
      alternative in the plone_tableless skin layer that you can use if you
      prefer layouts that don't use tables.
      </tal:comment>
      <table id="portal-columns">
        <tbody>
          <tr>
            <tal:comment replace="nothing"> Start of the left column </tal:comment>
            <td id="portal-column-one"
                metal:define-slot="column_one_slot"
                tal:condition="sl">
              <div class="visualPadding">
                <metal:portlets define-slot="portlets_one_slot">
                  <metal:leftportlets use-macro="here/portlets_fetcher/macros/left_column">
                    This instruction gets the portlets (boxes) for the left column.
                  </metal:leftportlets>
                </metal:portlets>
                &nbsp;
              </div>
            </td>
            <tal:comment replace="nothing"> End of the left column </tal:comment>
            <tal:comment replace="nothing"> Start of main content block </tal:comment>
            <td id="portal-column-content"
                tal:define="tabindex python:Iterator(pos=0, mainSlot=True)">
              <metal:block define-slot="content">
                <div id="content"
                     metal:define-macro="content"
                     tal:define="show_border python:here.showEditableBorder(template_id=template_id, actions=actions );"
                     tal:attributes="class python:test(show_border,'documentEditable','')">
                  <metal:ifborder tal:condition="show_border" >

                    <tal:block tal:condition="not:here/isAnonymousUser">
                    <div metal:use-macro="here/global_contentviews/macros/content_views">
                      The content views (View, Edit, Properties, Workflow)
                    </div>
                    <div metal:use-macro="here/global_contentviews/macros/content_actions">
                      The content bar
                    </div>

                    </tal:block>

                  </metal:ifborder>
                  <div class="documentContent" id="region-content">
                    <a name="documentContent"></a>
                    <div metal:use-macro="here/global_statusmessage/macros/portal_message">
                      Portal status message
                    </div>

                    <metal:bodytext metal:define-slot="main" tal:content="nothing">
                      Page body text
                    </metal:bodytext>
                    <metal:sub metal:define-slot="sub">
                      <metal:discussion use-macro="here/viewThreadsAtBottom/macros/discussionView" />
                    </metal:sub>
                  </div>
                </div>
              </metal:block>
            </td>
            <tal:comment replace="nothing"> End of main content block </tal:comment>
            <tal:comment replace="nothing"> Start of right column </tal:comment>
            <td id="portal-column-two"
                metal:define-slot="column_two_slot"
                tal:condition="sr">
              <div class="visualPadding">
                <metal:portlets define-slot="portlets_two_slot">
                  <metal:rightportlets use-macro="here/portlets_fetcher/macros/right_column">
                    This instruction gets the portlets (boxes) for the right column.
                  </metal:rightportlets>
                </metal:portlets>
                &nbsp;
              </div>
            </td>
            <tal:comment replace="nothing"> End of the right column </tal:comment>
          </tr>
        </tbody>
      </table>
      <tal:comment replace="nothing"> end column wrapper </tal:comment>
      <div class="visualClear" id="clear-space-before-footer"><!-- --></div>

      <hr class="netscape4" />
      <metal:block i18n:domain="plone">
        <metal:footer use-macro="here/footer/macros/portal_footer">
          Footer
        </metal:footer>
        <metal:colophon use-macro="here/colophon/macros/colophon">
          The colophon area - contains details about the production of
          the site. Typically "powered by" buttons, standards, tools used.
        </metal:colophon>
      </metal:block>
    </div>
</body>
</html>
</metal:page> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T15:38:02.980

看来这不是问题的根源。将使用适当的信息打开另一个查询。

感谢您的关注！

# android - 在我的 Android 项目中引用 Facebook SDK

> ID：12376422
> 
> 赞同：1
> 
> 时间：2012-09-11T19:15:48.413
> 
> 标签：android, facebook, facebook-android-sdk, android-library

我正在尝试将 Facebook SDK 引用到我现有的 Android 项目中。我一直在浏览 Facebook 网站中的给定教程。所以这就是我所做的：

1.  我将 Facebook SDK 文件夹复制到我的工作区。
2.  转到项目-> 属性-> Android
3.  将“Is Library”单选按钮设置为 true 并按下“ADD”按钮。

但我在弹出的对话框中看不到任何东西，它只是空白，没有 SDK。

我在这里想念什么？

这是工作区文件夹，Facebook SDK 文件夹位于其中：

[![关联](../Images/63b9988cb407e449b00a37d9c59b5f2c.png)](https://i.stack.imgur.com/CLf2Y.png)

这是Android属性。如您所见，那里没有 Facebook SDK。它只是空白：

[![关联](../Images/fd92dfb8ea9e2547f24df2b541b50217.png)](https://i.stack.imgur.com/w7uvP.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T21:30:45.817

> 所以这就是你所做的：
> 
> 1.  将 Facebook SDK 文件夹复制到我的工作区。
> 2.  转到项目-> 属性-> Android
> 3.  将“Is Library”单选按钮设置为 true 并按下“ADD”按钮。

好吧，您不应该执行第 2 步和第 3 步。Facebook SDK 已经编码为库项目，您只需要在现有应用程序中引用它即可。因此，应该在现有项目中按下 ADD 按钮，并且它应该引用 Facebook SDK。

这是您需要做的：

1.  访问[网站](https://github.com/facebook/facebook-android-sdk)并使用 git 获取内容或使用 ZIP 按钮压缩所有内容

2.  将 Facebook SDK 文件夹放入您的工作区（无需选择“Is Library”）

3.  选择您**现有的 Android 项目**
4.  **右键单击-> 属性-> Android**
5.  在库部分中，单击**添加**（通过执行此步骤，您将在现有应用程序中添加对 Facebook SDK 的引用）
6.  在那里选择**Facebook SDK**

    你已准备好出发！

# c++ - SQLite 仅适用于内存和备份

> ID：12376427
> 
> 赞同：0
> 
> 时间：2012-09-11T19:16:25.563
> 
> 标签：c++, sqlite

所有这些在 Windows 上都很好用（完全相同的代码）。在 OS X 上没有那么多。我知道 iOS 和 SQLite 的其他问题，但这仅适用于 OS X 10.8 和 Xcode 4.4.1。

我有一个 SQLite 数据库，它可以很好地用于内存数据库，但在写入文件时却不行。奇怪的是，我可以将内存中的数据库备份到一个文件中就好了。

但是等等，还有更多...

*我可以在文件数据库*上创建表，当我查看它们时它们会正确显示。但是，当我尝试 a 时`SELECT name FROM sqlite_master`，它什么也不返回。如果我尝试从表中插入或查询任何内容，则会收到未找到表的错误。就好像它甚至找不到它刚刚做了什么。

例如：

```
std::string filename = "test.db";
sqlite3* database = nullptr;
sqlite3_open(filename.c_str(), &database);
// ...
// Create tables...works
// Query from sqlite_master...broken 
```

不过，做同样的事情`:memory:`效果很好。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T19:50:22.107

这个简单的 C 程序运行良好。检查您可能做的任何不同的事情。

```
#include <stdio.h>
#include <assert.h>
#include <sqlite3.h>

int main(void)
{
    sqlite3 *db;
    sqlite3_stmt *stmt;
    int res;

    res = sqlite3_open("test.db", &db);
    assert(res == SQLITE_OK);

    res = sqlite3_exec(db, "create table if not exists tab(col)", NULL, NULL, NULL);
    assert(res == SQLITE_OK);
    res = sqlite3_exec(db, "insert into tab values('Hello, world!')", NULL, NULL, NULL);
    assert(res == SQLITE_OK);

    res = sqlite3_prepare_v2(db, "select * from tab", -1, &stmt, NULL);
    assert(res == SQLITE_OK);
    assert(sqlite3_column_count(stmt) >= 1);
    res = sqlite3_step(stmt);
    assert(res == SQLITE_ROW);
    printf("%s\n", sqlite3_column_text(stmt, 0));

    sqlite3_finalize(stmt);
    sqlite3_close(db);

    return 0;
} 
```

# java - 无法使用 servlet 将图像插入 mysql 数据库

> ID：12376430
> 
> 赞同：0
> 
> 时间：2012-09-11T19:16:43.660
> 
> 标签：java, mysql, filenotfoundexception

有人可以帮我解决以下问题吗？我正在尝试通过 servlet 将图像插入 mysql 数据库中的 blob 列。我通过 JSP 文件中的“HTML 文件输入类型”选择图像。因此选择了图像的完整路径。

我得到的错误是：

```
HTTP Status 500 - Desert.jpg (The system cannot find the file specified)

type Exception report

message Desert.jpg (The system cannot find the file specified)

description The server encountered an internal error (Desert.jpg (The system cannot find the file specified)) that prevented it from fulfilling this request.

exception

    java.io.FileNotFoundException: Desert.jpg (The system cannot find the file specified)
        java.io.FileInputStream.open(Native Method)
        java.io.FileInputStream.<init>(Unknown Source)
        Image.ImgInsert.doGet(ImgInsert.java:51)
        javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
        javax.servlet.http.HttpServlet.service(HttpServlet.java:722)

note The full stack trace of the root cause is available in the Apache Tomcat/7.0.28 logs.
Apache Tomcat/7.0.28 
```

其中“Desert.jpg”是我桌面上的图像。 ***这个相同的程序可以在我朋友的电脑上运行。*** 这是servlet代码：

```
 String s_id = request.getParameter("myid");
    int id = Integer.parseInt(s_id);
    //IMAGE ACQUIRED FROM THE FROM THE JSP PAGE
    String img = request.getParameter("myimg");

    File f = new File(img);
    FileInputStream fis = new FileInputStream(f);

    String query="insert into images.imageinsert(id,image) values(?,?)";
    try
    {
        PreparedStatement pStatement = conn.prepareStatement(query);

        pStatement.setInt(1, id);
        pStatement.setBinaryStream(2, fis);
        int result = pStatement.executeUpdate();

        if(result != 0)
        {
            response.sendRedirect("ImageHome.html");
        }
        pStatement.close(); 
```

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T19:22:02.207

这里至少有两个严重的概念错误。

1.  您似乎认为拥有客户端本地磁盘文件系统路径足以获取服务器端的整个文件内容。这是不可能的，因为客户端和服务器不共享相同的磁盘文件系统（除非它们碰巧在同一台计算机上运行，​​这在现实世界中当然不会发生）。

2.  您依赖于`java.io`事物中的相对路径。它与所谓的“当前工作目录”相关，后者是在网络服务器启动时打开的文件夹。这绝对不是 web 应用程序直接所在的文件夹。例如`C:\path\to\tomcat\bin`. 上传的文件肯定不会神奇地放在那里。

至于为什么它可以在您的“朋友”的机器上运行，这无疑是因为他使用的 Internet Explorer 存在一个安全漏洞，其中完整的文件路径而不是仅文件名作为请求参数被发送到 a without的`<input type="file">`字段上。同样，正如所回答的那样，这种方法肯定不会在真实的生产环境中工作。`<form>``enctype="multipart/form-data"`

您的具体问题可以通过仔细阅读以下答案来理解和解决。

*   [如何从 Firefox 3 中的 HTML 输入表单中获取文件路径](https://stackoverflow.com/questions/81180/how-to-get-the-file-path-from-html-input-form-in-firefox-3/3374408#3374408)
*   [getResourceAsStream() 与 FileInputStream](https://stackoverflow.com/questions/2308188/getresourceasstream-vs-fileinputstream/2308388#2308388)
*   [如何使用 JSP/Servlet 将文件上传到服务器？](https://stackoverflow.com/questions/2422468/how-to-upload-files-to-server-using-jsp-servlet/2424824#2424824)

# php - PhP 标头和输出缓冲

> ID：12376431
> 
> 赞同：0
> 
> 时间：2012-09-11T19:16:54.090
> 
> 标签：php, header, buffer, ob-start

所以......如果你有一个脚本说明这样的事情......

```
while($result = mysql_fetch_array($resource))
    {
        if($result['TITLE'] == $this->title)
        {
            header("LOCATION: profile.php?error=11");
        }
        echo 'testing';
    }

    //Create the database profile
    $second_query = "INSERT INTO profiles(USER_ID, KEYWORDS, TITLE, INTRO) ";
    $second_query .= "VALUES(".$this->userId.",'".serialize($this->keywords)."','".$this->title."','".$this->intro."')";
    echo $second_query;
    if($result = mysql_query($second_query))
    {
        if(isset($file))
        {
            $this->update_profile($this->files);    
        }
        return true;    
    }else
    {
        return false;   
    } 
```

并且第一个条件失败并将标头发回...如果您在发送标头后不返回false，它会继续运行脚本吗？我有一个问题，如果在我的数据库中找到标题，它将返回错误，但它会继续运行该脚本，从而将重复的标题条目插入到我的数据库中。

再说一遍……即使您发送了标头，脚本是否会继续执行？又名（在这种情况下）重定向？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T19:18:31.667

如果在`location`没有 yes 的情况下发送标头，`exit`它将继续运行脚本。

有效的：

```
header("Location: profile.php?error=11");
die(); // or exit(); 
```

想想它`header`不是由 PHP 本身执行的，它是由浏览器执行的，当你应用它时`header("Content-Type: application/force-download");`它告诉浏览器必须下载以下输出块。

因此，即使您将标头设置为另一个位置，脚本中的所有代码，除非我们退出，都会被处理`PHP`，然后浏览器获取位置并重定向。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T19:21:25.510

是的，它会，所以在发送标题后退出你的脚本

```
header("Location: profile.php?error=11"); 
exit; 
```

# mysql - 哪个更快：相关子查询或联接？

> ID：12376435
> 
> 赞同：15
> 
> 时间：2012-09-11T19:17:21.913
> 
> 标签：mysql, sql

我知道我们可以做[相关的子查询](https://stackoverflow.com/questions/598355/mysql-statement-combining-a-join-and-a-count/599129)并加入。但是哪个更快？有黄金法则还是我必须同时衡量两者？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-09-11T19:23:07.537

首先，相关子查询实际上是一种联接。没有关于哪个产生最佳执行计划的黄金法则。如果您对性能感兴趣，则需要尝试不同的形式，看看哪种形式最有效。或者，至少，查看执行计划以做出该决定。

一般来说，出于几个原因，我倾向于避免相关子查询。首先，它们几乎总是可以在没有相关性的情况下编写。其次，许多查询引擎将它们变成嵌套循环连接（尽管使用索引），其他连接策略可能会更好。在这种情况下，相关子查询使查询的并行化变得困难。第三，相关子查询通常出现在 SELECT 或 WHERE 子句中。我喜欢我所有的表都在 FROM 子句中。

然而，在 MySQL 中，相关子查询通常是进行查询的*最*有效方式。在子句中使用子查询时尤其如此`IN`。所以，没有黄金法则。

# c# - 如何检查列表 A 是否包含列表 B 中的任何值？

> ID：12376437
> 
> 赞同：76
> 
> 时间：2012-09-11T19:17:28.340
> 
> 标签：c#, linq, list

清单 A：

```
1, 2, 3, 4 
```

清单 B：

```
2, 5 
```

如何检查列表 A 是否包含列表 B 中的任何值？

例如像 A.contains(a=>a.id = B.id)?

* * *

## 回答 #1

> 赞同：141
> 
> 时间：2012-09-11T19:18:44.753

如果您不关心性能，可以尝试：

```
a.Any(item => b.Contains(item))
// or, as in the column using a method group
a.Any(b.Contains) 
```

但我会先试试这个：

```
a.Intersect(b).Any() 
```

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2012-09-11T20:15:38.520

我已经介绍了贾斯汀的两个解决方案。**`a.Any(a => b.Contains(a))`是最快的**。

```
using System;
using System.Collections.Generic;
using System.Linq;

namespace AnswersOnSO
{
    public class Class1
    {
        public static void Main(string []args)
        {
//            How to check if list A contains any value from list B?
//            e.g. something like A.contains(a=>a.id = B.id)?
            var a = new List<int> {1,2,3,4};
            var b = new List<int> {2,5};
            var times = 10000000;

            DateTime dtAny = DateTime.Now;
            for (var i = 0; i < times; i++)
            {
                var aContainsBElements = a.Any(b.Contains);
            }
            var timeAny = (DateTime.Now - dtAny).TotalSeconds;

            DateTime dtIntersect = DateTime.Now;
            for (var i = 0; i < times; i++)
            {
                var aContainsBElements = a.Intersect(b).Any();
            }
            var timeIntersect = (DateTime.Now - dtIntersect).TotalSeconds;

            // timeAny: 1.1470656 secs
            // timeIn.: 3.1431798 secs
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2012-09-11T19:18:58.813

你可以[`Intersect`](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.intersect.aspx)两个列表：

```
if (A.Intersect(B).Any()) 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2020-02-29T20:30:32.967

对于更快和更短的解决方案，您可以使用`HashSet`而不是`List`.

```
a.Overlaps(b); 
```

[重叠文档](https://docs.microsoft.com/en-us/dotnet/api/system.collections.generic.hashset-1.overlaps?view=netframework-4.8)

此方法是 O(n) 而不是 O(n^2) 具有两个列表。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2020-03-22T19:05:16.603

您可以使用此检查列表是否在另一个列表中

```
var list1 = new List<int> { 1, 2, 3, 4, 6 };
var list2 = new List<int> { 2, 3 };
bool a = list1.Any(c => list2.Contains(c)); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-11-22T08:35:34.430

我写了一个更快的方法，它可以使小的设置。但是我在一些数据中对其进行了测试，有时它比 Intersect 更快，但有时 Intersect 比我的代码快。

```
 public static bool Contain<T>(List<T> a, List<T> b)
    {
        if (a.Count <= 10 && b.Count <= 10)
        {
            return a.Any(b.Contains);
        }

        if (a.Count > b.Count)
        {
            return Contain((IEnumerable<T>) b, (IEnumerable<T>) a);
        }
        return Contain((IEnumerable<T>) a, (IEnumerable<T>) b);
    }

    public static bool Contain<T>(IEnumerable<T> a, IEnumerable<T> b)
    {
        HashSet<T> j = new HashSet<T>(a);
        return b.Any(j.Contains);
    } 
```

`Set`没有检查第二个大小的 Intersect 调用，这是 Intersect 的代码。

```
 Set<TSource> set = new Set<TSource>(comparer);
        foreach (TSource element in second) set.Add(element);
        foreach (TSource element in first)
            if (set.Remove(element)) yield return element; 
```

两种方法的区别是我的方法使用`HashSet`和检查计数和`Intersect`使用`set`比`HashSet`. 我们不担心它的表现。

考试 ：

```
 static void Main(string[] args)
    {
        var a = Enumerable.Range(0, 100000);
        var b = Enumerable.Range(10000000, 1000);
        var t = new Stopwatch();
        t.Start();
        Repeat(()=> { Contain(a, b); });
        t.Stop();
        Console.WriteLine(t.ElapsedMilliseconds);//490ms

        var a1 = Enumerable.Range(0, 100000).ToList();
        var a2 = b.ToList();
        t.Restart();
        Repeat(()=> { Contain(a1, a2); });
        t.Stop();

        Console.WriteLine(t.ElapsedMilliseconds);//203ms

        t.Restart();
        Repeat(()=>{ a.Intersect(b).Any(); });
        t.Stop();
        Console.WriteLine(t.ElapsedMilliseconds);//190ms

        t.Restart();
        Repeat(()=>{ b.Intersect(a).Any(); });
        t.Stop();
        Console.WriteLine(t.ElapsedMilliseconds);//497ms

        t.Restart();
        a.Any(b.Contains);
        t.Stop();
        Console.WriteLine(t.ElapsedMilliseconds);//600ms

    }

    private static void Repeat(Action a)
    {
        for (int i = 0; i < 100; i++)
        {
            a();
        }
    } 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-12-09T14:05:52.443

抱歉，如果这无关紧要，但如果您需要，将使用 FindAll() 返回包含匹配项的列表：

```
 private bool IsContain(string cont)
    {
        List<string> ListToMatch= new List<string>() {"string1","string2"};

        if (ListToMatch.ToArray().Any(cont.Contains))
        {
            return false;
        }
        else
            return true;
    } 
```

和用法：

```
List<string> ListToCheck = new List<string>() {"string1","string2","string3","string4"};
List<string> FinalList = ListToCheck.FindAll(IsContain); 
```

最终列表仅包含要检查的列表中匹配的元素 string1 和 string2。可以很容易地切换到 int List。

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2018-01-02T13:19:32.273

我用这个来计算：

```
int cnt = 0;

foreach (var lA in listA)
{
    if (listB.Contains(lA))
    {
        cnt++;
    }
} 
```

# java - MySQL 语法错误 - Java

> ID：12376443
> 
> 赞同：0
> 
> 时间：2012-09-11T19:17:45.863
> 
> 标签：java, mysql

$您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的“null、null、null、98-4B-E1-A9-C5-82、null)”附近使用正确的语法$

我在执行时遇到的错误

```
st.executeUpdate("INSERT INTO gameservers" + "VALUES (null, null, null, "+macAddress+", null)"); 
```

还有我的 sql：

```
CREATE TABLE IF NOT EXISTS `gameservers` (
  `server_id` int(11) NOT NULL default '0',
  `hexid` varchar(50) NOT NULL default '',
  `host` varchar(50) NOT NULL default '',
  `macAddress` varchar(50) NOT NULL default '',
  `firstTime` int(1) NOT NULL default '0',
  PRIMARY KEY  (`server_id`)
) ; 
```

任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T19:19:47.487

您需要在游戏服务器之后有一个空格，并且需要将 macAddress 放在引号中。至少。

```
"INSERT INTO gameservers " + "VALUES (null, null, null, '"+macAddress+"', null)" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T19:19:36.957

macAddress 是 varchar，所以应该用**单引号括**起来。

```
"VALUES (null, null, null, '"+macAddress+"', null)" 
```

# powershell - 使用powershell ISE，如果我通过单击.ps1文件打开它，它可以工作，如果使用文件->打开相同的文件会出错

> ID：12376445
> 
> 赞同：0
> 
> 时间：2012-09-11T19:17:52.847
> 
> 标签：powershell, powershell-2.0

使用 powershell ISE，

如果我通过单击 Windows 资源管理器中的 .ps1 文件打开下面的文件，当我使用绿色箭头运行它时，它可以工作。如果使用 File->Open the same file，当我单击绿色箭头时会出现错误。

如果我通过单击打开它然后加载它，那很好，所以当我双击时某些东西（路径？）正在设置，这不是另一种方式......

让我澄清一下...如果我以一种方式打开文件（双击）它“编译”很好，如果我以另一种方式打开它（文件->打开）完全相同的文件不会“编译”。我希望弄清楚这是为什么。我的猜测是，它用于查找所需其他文件的路径变量通过两种打开方法设置不同（因为许多错误都“未找到”）

这是文件的代码（它基本上只是调用了一堆外部的东西）

```
###########################################################
# RUN (hit the green arrow) TO INITIALIZE
############################################################

############################################################
# set defaults
$path = Get-Location    
$ProjectName = $path.Path 
$ProjectName = $ProjectName.Replace("D:\Project Files\", "")
$ProjectName = $ProjectName.Replace("\_Powershell", "")
$ProjectName = $ProjectName.Replace("\WebApp", "")
$ProjectName = $ProjectName.Replace("\Webapp", "")
write-host "Project Name found: "  $ProjectName 
$Project = $ProjectName 
$RootPath = 'D:\Project Files\' + $Project + '\WebApp'
$ModulePath = 'D:\Project Files\' + $Project + '\WebApp\_PowerShell'

############################################################
# call this one to remove and reload the modules (if modules are modified)
function ReloadTemplates {

    RemoveLoadedModule WPK
    RemoveLoadedModule JcdcAddFileToProjectGui
    RemoveLoadedModule JcdcEoAndMap
    RemoveLoadedModule JcdcEoAndMapGui
    RemoveLoadedModule JcdcDal
    RemoveLoadedModule JcdcDalGui
    RemoveLoadedModule JcdcBll
    RemoveLoadedModule JcdcBLLGui
    RemoveLoadedModule JcdcView
    RemoveLoadedModule JcdcViewGui
    RemoveLoadedModule JcdcController
    RemoveLoadedModule JcdcControllerGui
    RemoveLoadedModule JcdcAutoMap
    RemoveLoadedModule JcdcAutoMapGui
    RemoveLoadedModule JcdcReport
    RemoveLoadedModule JcdcReportGui
    RemoveLoadedModule JcdcCv
    RemoveLoadedModule JcdcCvGui
    RemoveLoadedModule ReadWriteXML

    # load the Templates
    LoadTemplates
}
function RemoveLoadedModule { 
    param($PathAndName) 

    if(Get-Module -name $PathAndName)
    { 
        Remove-Module $PathAndName
    } 
} 

############################################################
# call this one to load the modules
function LoadTemplates {

    Import-Module WPK
    Import-Module "$ModulePath\JcdcAddFileToProjectGui.psm1"
    Import-Module "$ModulePath\JcdcEoAndMap.psm1"
    Import-Module "$ModulePath\JcdcEoAndMapGui.psm1"
    Import-Module "$ModulePath\JcdcDal.psm1"
    Import-Module "$ModulePath\JcdcDalGui.psm1"
    Import-Module "$ModulePath\JcdcBll.psm1"
    Import-Module "$ModulePath\JcdcBLLGui.psm1"
    Import-Module "$ModulePath\JcdcView.psm1"
    Import-Module "$ModulePath\JcdcViewGui.psm1"
    Import-Module "$ModulePath\JcdcController.psm1"
    Import-Module "$ModulePath\JcdcControllerGui.psm1"
    Import-Module "$ModulePath\JcdcAutoMap.psm1"
    Import-Module "$ModulePath\JcdcAutoMapGui.psm1"
    Import-Module "$ModulePath\JcdcReport.psm1"
    Import-Module "$ModulePath\JcdcReportGui.psm1"
    Import-Module "$ModulePath\JcdcCv.psm1"
    Import-Module "$ModulePath\JcdcCvGui.psm1"
    Import-Module "$ModulePath\ReadWriteXML.psm1"

    Initialize-AddFileToProject $RootPath $Project
    Initialize-EOMAPGui $RootPath $Project
    Initialize-DALGui $RootPath $Project
    Initialize-BLLGui $RootPath $Project
    Initialize-ViewGui $RootPath $Project
    Initialize-ControllerGui $RootPath $Project
    Initialize-AutoMapGui $RootPath $Project
    Initialize-ReportGui $RootPath $Project
    Initialize-CVGui $RootPath $Project
    Initialize-XMLArguments
}

############################################################
# load the Templates on Run (when green arrow is clicked)
ReloadTemplates 
```

#

# 在命令窗口中键入以下内容之一

# Select-A + = Select-AddFileToProject - 创建要添加到项目的文件

# Select-B + = Select-BLLWhatToBuild - 添加一个 BLL

# Select-C + = Select-ControllerWhatToBuild - 添加控制器

# Select-D + = Select-DALWhatToBuild - 添加一个 DAL

# Select-E + = Select-EoAndMapBuild - 添加 Eo 和 Map

# Select-M + = Select-MapBuild - 添加 AutoMap

# Select-R + = Select-ReportWhatToBuild - 添加报告

# Select-Vi + = Select-ViewWhatToBuild - 添加视图

# Select-Vm + = Select-VmCvOrExcel - 添加 CV、VM、D:\PowerShellTemplatesArgsor Excel

这是错误

PS U:> D:\Project Files\CIS3G\Webapp_Powershell\ManualRun.ps1 Project Name found: U:\ Import-Module : 未加载指定的模块 'D:\Project Files\U:\WebApp_PowerShell\JcdcAddFileToProjectGui.psm1'因为在任何模块目录中都没有找到有效的模块文件。在 D:\Project Files\CIS3G\Webapp_Powershell\ManualRun.ps1:61 char:18 + Import-Module <<<< "$ModulePath\JcdcAddFileToProjectGui.psm1" + CategoryInfo : ResourceUnavailable: (D:\Project File...ProjectGui .psm1:String) [Import-Module], FileNotFoundException + FullyQualifiedErrorId : Modules_ModuleNotFound,Microsoft.PowerShell.Commands.ImportModuleCommand

Import-Module：未加载指定的模块“D:\Project Files\U:\WebApp_PowerShell\JcdcEoAndMap.psm1”，因为在任何模块目录中都找不到有效的模块文件。在 D:\Project Files\CIS3G\Webapp_Powershell\ManualRun.ps1:62 char:18 + Import-Module <<<< "$ModulePath\JcdcEoAndMap.psm1" + CategoryInfo : ResourceUnavailable: (D:\Project File...dcEoAndMap .psm1:String) [Import-Module], FileNotFoundException + FullyQualifiedErrorId : Modules_ModuleNotFound,Microsoft.PowerShell.Commands.ImportModuleCommand

Import-Module：未加载指定的模块“D:\Project Files\U:\WebApp_PowerShell\JcdcEoAndMapGui.psm1”，因为在任何模块目录中都找不到有效的模块文件。在 D:\Project Files\CIS3G\Webapp_Powershell\ManualRun.ps1:63 char:18 + Import-Module <<<< "$ModulePath\JcdcEoAndMapGui.psm1" + CategoryInfo : ResourceUnavailable: (D:\Project File...oAndMapGui .psm1:String) [Import-Module], FileNotFoundException + FullyQualifiedErrorId : Modules_ModuleNotFound,Microsoft.PowerShell.Commands.ImportModuleCommand

Import-Module：未加载指定的模块“D:\Project Files\U:\WebApp_PowerShell\JcdcDal.psm1”，因为在任何模块目录中都找不到有效的模块文件。在 D:\Project Files\CIS3G\Webapp_Powershell\ManualRun.ps1:64 char:18 + Import-Module <<<< "$ModulePath\JcdcDal.psm1" + CategoryInfo : ResourceUnavailable: (D:\Project File...ll \JcdcDal.psm1:String) [Import-Module], FileNotFoundException + FullyQualifiedErrorId : Modules_ModuleNotFound,Microsoft.PowerShell.Commands.ImportModuleCommand

Import-Module：未加载指定的模块“D:\Project Files\U:\WebApp_PowerShell\JcdcDalGui.psm1”，因为在任何模块目录中都找不到有效的模块文件。在 D:\Project Files\CIS3G\Webapp_Powershell\ManualRun.ps1:65 char:18 + Import-Module <<<< "$ModulePath\JcdcDalGui.psm1" + CategoryInfo : ResourceUnavailable: (D:\Project File...JcdcDalGui .psm1:String) [Import-Module], FileNotFoundException + FullyQualifiedErrorId : Modules_ModuleNotFound,Microsoft.PowerShell.Commands.ImportModuleCommand

Import-Module：未加载指定的模块“D:\Project Files\U:\WebApp_PowerShell\JcdcBll.psm1”，因为在任何模块目录中都找不到有效的模块文件。在 D:\Project Files\CIS3G\Webapp_Powershell\ManualRun.ps1:66 char:18 + Import-Module <<<< "$ModulePath\JcdcBll.psm1" + CategoryInfo : ResourceUnavailable: (D:\Project File...ll \JcdcBll.psm1:String) [Import-Module], FileNotFoundException + FullyQualifiedErrorId : Modules_ModuleNotFound,Microsoft.PowerShell.Commands.ImportModuleCommand

Import-Module：未加载指定的模块“D:\Project Files\U:\WebApp_PowerShell\JcdcBLLGui.psm1”，因为在任何模块目录中都找不到有效的模块文件。在 D:\Project Files\CIS3G\Webapp_Powershell\ManualRun.ps1:67 char:18 + Import-Module <<<< "$ModulePath\JcdcBLLGui.psm1" + CategoryInfo : ResourceUnavailable: (D:\Project File...JcdcBLLGui .psm1:String) [Import-Module], FileNotFoundException + FullyQualifiedErrorId : Modules_ModuleNotFound,Microsoft.PowerShell.Commands.ImportModuleCommand

Import-Module：未加载指定的模块“D:\Project Files\U:\WebApp_PowerShell\JcdcView.psm1”，因为在任何模块目录中都找不到有效的模块文件。在 D:\Project Files\CIS3G\Webapp_Powershell\ManualRun.ps1:68 char:18 + Import-Module <<<< "$ModulePath\JcdcView.psm1" + CategoryInfo : ResourceUnavailable: (D:\Project File...l \JcdcView.psm1:String) [Import-Module], FileNotFoundException + FullyQualifiedErrorId : Modules_ModuleNotFound,Microsoft.PowerShell.Commands.ImportModuleCommand

Import-Module：未加载指定的模块“D:\Project Files\U:\WebApp_PowerShell\JcdcViewGui.psm1”，因为在任何模块目录中都找不到有效的模块文件。在 D:\Project Files\CIS3G\Webapp_Powershell\ManualRun.ps1:69 char:18 + Import-Module <<<< "$ModulePath\JcdcViewGui.psm1" + CategoryInfo : ResourceUnavailable: (D:\Project File...cdcViewGui .psm1:String) [Import-Module], FileNotFoundException + FullyQualifiedErrorId : Modules_ModuleNotFound,Microsoft.PowerShell.Commands.ImportModuleCommand

Import-Module：未加载指定的模块“D:\Project Files\U:\WebApp_PowerShell\JcdcController.psm1”，因为在任何模块目录中都找不到有效的模块文件。在 D:\Project Files\CIS3G\Webapp_Powershell\ManualRun.ps1:70 char:18 + Import-Module <<<< "$ModulePath\JcdcController.psm1" + CategoryInfo : ResourceUnavailable: (D:\Project File...Controller .psm1:String) [Import-Module], FileNotFoundException + FullyQualifiedErrorId : Modules_ModuleNotFound,Microsoft.PowerShell.Commands.ImportModuleCommand

Import-Module：未加载指定的模块“D:\Project Files\U:\WebApp_PowerShell\JcdcControllerGui.psm1”，因为在任何模块目录中都找不到有效的模块文件。在 D:\Project Files\CIS3G\Webapp_Powershell\ManualRun.ps1:71 char:18 + Import-Module <<<< "$ModulePath\JcdcControllerGui.psm1" + CategoryInfo : ResourceUnavailable: (D:\Project File...trollerGui .psm1:String) [Import-Module], FileNotFoundException + FullyQualifiedErrorId : Modules_ModuleNotFound,Microsoft.PowerShell.Commands.ImportModuleCommand

Import-Module：未加载指定的模块“D:\Project Files\U:\WebApp_PowerShell\JcdcAutoMap.psm1”，因为在任何模块目录中都找不到有效的模块文件。在 D:\Project Files\CIS3G\Webapp_Powershell\ManualRun.ps1:72 char:18 + Import-Module <<<< "$ModulePath\JcdcAutoMap.psm1" + CategoryInfo : ResourceUnavailable: (D:\Project File...cdcAutoMap .psm1:String) [Import-Module], FileNotFoundException + FullyQualifiedErrorId : Modules_ModuleNotFound,Microsoft.PowerShell.Commands.ImportModuleCommand

Import-Module：未加载指定的模块“D:\Project Files\U:\WebApp_PowerShell\JcdcAutoMapGui.psm1”，因为在任何模块目录中都找不到有效的模块文件。在 D:\Project Files\CIS3G\Webapp_Powershell\ManualRun.ps1:73 char:18 + Import-Module <<<< "$ModulePath\JcdcAutoMapGui.psm1" + CategoryInfo : ResourceUnavailable: (D:\Project File...AutoMapGui .psm1:String) [Import-Module], FileNotFoundException + FullyQualifiedErrorId : Modules_ModuleNotFound,Microsoft.PowerShell.Commands.ImportModuleCommand

Import-Module：未加载指定的模块“D:\Project Files\U:\WebApp_PowerShell\JcdcReport.psm1”，因为在任何模块目录中都找不到有效的模块文件。在 D:\Project Files\CIS3G\Webapp_Powershell\ManualRun.ps1:74 char:18 + Import-Module <<<< "$ModulePath\JcdcReport.psm1" + CategoryInfo : ResourceUnavailable: (D:\Project File...JcdcReport .psm1:String) [Import-Module], FileNotFoundException + FullyQualifiedErrorId : Modules_ModuleNotFound,Microsoft.PowerShell.Commands.ImportModuleCommand

Import-Module：未加载指定的模块“D:\Project Files\U:\WebApp_PowerShell\JcdcReportGui.psm1”，因为在任何模块目录中都找不到有效的模块文件。在 D:\Project Files\CIS3G\Webapp_Powershell\ManualRun.ps1:75 char:18 + Import-Module <<<< "$ModulePath\JcdcReportGui.psm1" + CategoryInfo : ResourceUnavailable: (D:\Project File...cReportGui .psm1:String) [Import-Module], FileNotFoundException + FullyQualifiedErrorId : Modules_ModuleNotFound,Microsoft.PowerShell.Commands.ImportModuleCommand

Import-Module：未加载指定的模块“D:\Project Files\U:\WebApp_PowerShell\JcdcCv.psm1”，因为在任何模块目录中都找不到有效的模块文件。在 D:\Project Files\CIS3G\Webapp_Powershell\ManualRun.ps1:76 char:18 + Import-Module <<<< "$ModulePath\JcdcCv.psm1" + CategoryInfo : ResourceUnavailable: (D:\Project File...ell \JcdcCv.psm1:String) [Import-Module], FileNotFoundException + FullyQualifiedErrorId : Modules_ModuleNotFound,Microsoft.PowerShell.Commands.ImportModuleCommand

Import-Module：未加载指定的模块“D:\Project Files\U:\WebApp_PowerShell\JcdcCvGui.psm1”，因为在任何模块目录中都找不到有效的模块文件。在 D:\Project Files\CIS3G\Webapp_Powershell\ManualRun.ps1:77 char:18 + Import-Module <<<< "$ModulePath\JcdcCvGui.psm1" + CategoryInfo : ResourceUnavailable: (D:\Project File...\ JcdcCvGui.psm1:String) [Import-Module], FileNotFoundException + FullyQualifiedErrorId : Modules_ModuleNotFound,Microsoft.PowerShell.Commands.ImportModuleCommand

Import-Module：未加载指定的模块“D:\Project Files\U:\WebApp_PowerShell\ReadWriteXML.psm1”，因为在任何模块目录中都找不到有效的模块文件。在 D:\Project Files\CIS3G\Webapp_Powershell\ManualRun.ps1:78 char:18 + Import-Module <<<< "$ModulePath\ReadWriteXML.psm1" + CategoryInfo : ResourceUnavailable: (D:\Project File...adWriteXML .psm1:String) [Import-Module], FileNotFoundException + FullyQualifiedErrorId : Modules_ModuleNotFound,Microsoft.PowerShell.Commands.ImportModuleCommand

术语“Initialize-AddFileToProject”未被识别为 cmdlet、函数、脚本文件或可运行程序的名称。检查名称的拼写，或者如果包含路径，请验证路径是否正确并重试。在 D:\Project Files\CIS3G\Webapp_Powershell\ManualRun.ps1:80 char:29 + Initialize-AddFileToProject <<<< $RootPath $Project + CategoryInfo : ObjectNotFound: (Initialize-AddFileToProject:String) [], CommandNotFoundException + FullyQualifiedErrorId ： CommandNotFoundException

术语“Initialize-EOMAPGui”未被识别为 cmdlet、函数、脚本文件或可运行程序的名称。检查名称的拼写，或者如果包含路径，请验证路径是否正确并重试。在 D:\Project Files\CIS3G\Webapp_Powershell\ManualRun.ps1:81 char:24 + Initialize-EOMAPGui <<<< $RootPath $Project + CategoryInfo : ObjectNotFound: (Initialize-EOMAPGui:String) [], CommandNotFoundException + FullyQualifiedErrorId ： CommandNotFoundException

术语“Initialize-DALGui”未被识别为 cmdlet、函数、脚本文件或可运行程序的名称。检查名称的拼写，或者如果包含路径，请验证路径是否正确并重试。在 D:\Project Files\CIS3G\Webapp_Powershell\ManualRun.ps1:82 char:22 + Initialize-DALGui <<<< $RootPath $Project + CategoryInfo : ObjectNotFound: (Initialize-DALGui:String) [], CommandNotFoundException + FullyQualifiedErrorId ： CommandNotFoundException

术语“Initialize-BLLGui”未被识别为 cmdlet、函数、脚本文件或可运行程序的名称。检查名称的拼写，或者如果包含路径，请验证路径是否正确并重试。在 D:\Project Files\CIS3G\Webapp_Powershell\ManualRun.ps1:83 char:22 + Initialize-BLLGui <<<< $RootPath $Project + CategoryInfo : ObjectNotFound: (Initialize-BLLGui:String) [], CommandNotFoundException + FullyQualifiedErrorId ： CommandNotFoundException

术语“Initialize-ViewGui”未被识别为 cmdlet、函数、脚本文件或可运行程序的名称。检查名称的拼写，或者如果包含路径，请验证路径是否正确并重试。在 D:\Project Files\CIS3G\Webapp_Powershell\ManualRun.ps1:84 char:23 + Initialize-ViewGui <<<< $RootPath $Project + CategoryInfo : ObjectNotFound: (Initialize-ViewGui:String) [], CommandNotFoundException + FullyQualifiedErrorId ： CommandNotFoundException

术语“Initialize-ControllerGui”未被识别为 cmdlet、函数、脚本文件或可运行程序的名称。检查名称的拼写，或者如果包含路径，请验证路径是否正确并重试。在 D:\Project Files\CIS3G\Webapp_Powershell\ManualRun.ps1:85 char:29 + Initialize-ControllerGui <<<< $RootPath $Project + CategoryInfo : ObjectNotFound: (Initialize-ControllerGui:String) [], CommandNotFoundException + FullyQualifiedErrorId ： CommandNotFoundException

术语“Initialize-AutoMapGui”未被识别为 cmdlet、函数、脚本文件或可运行程序的名称。检查名称的拼写，或者如果包含路径，请验证路径是否正确并重试。在 D:\Project Files\CIS3G\Webapp_Powershell\ManualRun.ps1:86 char:26 + Initialize-AutoMapGui <<<< $RootPath $Project + CategoryInfo : ObjectNotFound: (Initialize-AutoMapGui:String) [], CommandNotFoundException + FullyQualifiedErrorId ： CommandNotFoundException

术语“Initialize-ReportGui”未被识别为 cmdlet、函数、脚本文件或可运行程序的名称。检查名称的拼写，或者如果包含路径，请验证路径是否正确并重试。在 D:\Project Files\CIS3G\Webapp_Powershell\ManualRun.ps1:87 char:25 + Initialize-ReportGui <<<< $RootPath $Project + CategoryInfo : ObjectNotFound: (Initialize-ReportGui:String) [], CommandNotFoundException + FullyQualifiedErrorId ： CommandNotFoundException

术语“Initialize-CVGui”未被识别为 cmdlet、函数、脚本文件或可运行程序的名称。检查名称的拼写，或者如果包含路径，请验证路径是否正确并重试。在 D:\Project Files\CIS3G\Webapp_Powershell\ManualRun.ps1:88 char:21 + Initialize-CVGui <<<< $RootPath $Project + CategoryInfo : ObjectNotFound: (Initialize-CVGui:String) [], CommandNotFoundException + FullyQualifiedErrorId ： CommandNotFoundException

术语“Initialize-XMLArguments”未被识别为 cmdlet、函数、脚本文件或可运行程序的名称。检查名称的拼写，或者如果包含路径，请验证路径是否正确并重试。在 D:\Project Files\CIS3G\Webapp_Powershell\ManualRun.ps1:89 char:28 + Initialize-XMLArguments <<<< + CategoryInfo : ObjectNotFound: (Initialize-XMLArguments:String) [], CommandNotFoundException + FullyQualifiedErrorId : CommandNotFoundException

* * *

当我打开文件时，有什么方法可以设置路径，这样就不会发生这种情况？

每个项目都有不同版本的这个文件夹和文件，因为它用于生成项目特定的代码......所以请注意，solution 也需要适用于该场景。

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T03:49:14.560

不确定是否理解您的问题，但如果您想真正从脚本的位置开始，您可以使用`$MyInvocation`自动 var。

`$MyInvocation.MyCommand.Path`将为您提供脚本的路径（.PS1 文件），然后您可以使用`Split-Path`它来查找其目录位置。我认为在您的情况下`Get-Location`并不总是返回您考虑的路径。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-08-22T15:46:20.087

我个人喜欢使用默认的 Var $PSScriptRoot

在你的情况下，我会启动脚本
`Set-Location $PSScripRoot`

# 这会将位置设置为您的脚本所在的位置，因此双击或打开文件位置并按播放将执行您的脚本

您可以在前面添加我的行，`$path = Get-Location`也可以完全消除 $path 行并仅使用 $PSScriptRoot 行，但是您还需要在整个脚本中将 $path 变量替换为 $PSScriptRoot

正如其他人所说，当您双击脚本时，如果您通过 ISE 手动打开，Powershell 将使用该路径，但它不会（它使用您在 ISE 中设置的任何最后一条路径）Set-Location $PSScriptRoot 行所做的是采用本地路径你的脚本总是不管你选择如何启动它

我希望这有帮助！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-04-04T11:17:59.873

模块像脚本一样位于同一目录中？如果它是真的，那么问题的原因在于当前的直接。在开始或使用模块之前添加以下行：

```
Set-Location "<...>" 
```

并让我们用您的脚本输入文件夹的路径，而不是 <...>。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-08-23T23:14:45.643

```
$ModulePath = 'D:\Project Files\' + $Project + '\WebApp\_PowerShell'
Import-Module "$ModulePath\JcdcAddFileToProjectGui.psm1" 
```

结果是

```
'D:\Project Files\U:\WebApp_PowerShell\JcdcAddFileToProjectGui.psm1' 
```

Windows 不允许单个路径中有多个驱动器号。你的里面有 U:​​。$Project = 'U:' 在当时`$ModulePath`进行了评估。这是 PowerShell 的起始工作目录。

底线是您使用的是相对于脚本运行位置的路径。当您打开 powershell 时，它会从您的个人资料中设置起始位置，如果您的个人资料中没有，则设置默认位置。从文件启动时，它使用该文件的位置。

您似乎在为每个项目硬编码一组单独的脚本 + 模块等，但它们定义的名称在项目范围内是一致的。 **我建议您对每个脚本中的模块位置进行硬编码。**

我还建议您重新考虑这种编码风格。改变某些东西一定是一场噩梦。如果您创建了一个加载单个模块的脚本会怎样。然后为每个项目创建一个配置文件，并为您的脚本创建一个快捷方式，该脚本加载主脚本以及从配置文件中读取的自定义部分。

# javascript - 一起滚动两个 ext.TabPanel

> ID：12376448
> 
> 赞同：2
> 
> 时间：2012-09-11T19:18:04.740
> 
> 标签：javascript, extjs, panel, tabpanel

所以过去一周我一直在到处搜索，但我找不到让两个“Ext.TabPanel 一起滚动”的方法。

我正在使此页面具有包含两个项目的 Ext.Panel：

```
var MyBorderPanel = new Ext.Panel({
    layout: 'border',
    renderTo: 'command_display',
    cls: 'auto-width-tab-strip',
    height:800,
    items: [
    {
        region: 'west',
        title: 'item1: <?=ui::getURLField("item1")?>',
        split: true,
        width: 500,
        minSize: 100,
        maxSize: 900,
        layout: 'fit', // specify layout manager for items
        items:   // this TabPanel is wrapped by another Panel
        baseTab
    },
    {
        region: 'center',
        title: 'item2 : <?=ui::getURLField("item2")?>',
        split: true,
        margins: '0 0 0 0',
        layout: 'fit', // specify layout manager for items
        items:            // this TabPanel is wrapped by another Panel
        compareTab
    }
]
}); 
```

这些项目：baseTab 和 compareTab 描述如下：

```
var baseTab = new Ext.TabPanel({
    border: false, // already wrapped so don't add another border
    activeTab: 0, // second tab initially active
    items: [
    <?php
        $uihelper->perform("InitItem1Iteration");
        $comma = true;
        while($uihelper->hasNext("Item1Iteration"))
        {
            $uihelper->next("Item1Iteration");
    ?>      
    <?=(!$comma?",":"")?>
    {
        title: 'some php code',
        id: 'some php code',
        autoScroll: true,
        contentEl: 'some php code',
    }
    <?php 
    $comma = false;
    } ?>
    ]
}); 
```

类似的是Item2。

现在基本上我想要的是。这两个选项卡面板都有滚动条，所以我希望每当我滚动一个选项卡面板时，另一个选项卡面板会自动随之滚动。

甚至可能吗？

谢谢安迪

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T18:48:56.420

简短的回答，应该是...

您需要访问您感兴趣的特定容器的滚动项。

我将开始调查以下内容：

```
listeners: {
    scroller: {
        scroll: function(scroller, offset) {
            console.log(scroller, offset);
        }
    }
} 
```

我知道容器定义了滚动条，但我认为标签面板没有。因此，必须将这种侦听器添加到每个项目中（或者该项目可能会冒泡事件，但未经测试）。

（当然，一旦您可以捕获滚动事件，将另一个面板设置为相同的偏移量就不难了）

希望这至少能给你一个前进的方向。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T14:49:30.060

正如@zelexir 所提到的，您想要查看滚动条。这是我的示例代码[http://jsfiddle.net/YgTuc/1/](http://jsfiddle.net/YgTuc/1/)的一个小提琴，这适用于两个面板，但对于 TabPanel 中的面板应该是一样的。

# sql - 合并重复的客户和销售

> ID：12376451
> 
> 赞同：0
> 
> 时间：2012-09-11T19:18:23.443
> 
> 标签：sql, windows-server-2008-r2

我有一个问题，我想不出一个好的方法来解决它，这是使用 SQLServer 2008R2。

我有 3 张桌子

```
Client, Invoice, Car 
```

客户重复 n 次，但每个客户都有一张票和一个产品。

所以我正在尝试整合客户（使用唯一标识符），现在我的问题是如何更新产品和票证上的参考字段。

例子

```
**Client**

[Nombre]
      ,[Apellido_Paterno]
      ,[Apellido_Materno]
      ,[Sexo]
      ,[Estado_Civil]
      ,[Fecha_Nacimiento]
      ,[RFC]
      ,[Saludo]
      ,[Persona]
      ,[Razon_Social]
      ,[Direccion]
      ,[Colonia]
      ,[Municipio_Delegacion]
      ,[Estado]
      ,[Codigo_Postal]
      ,[Lada_Casa]
      ,[Telefono_Casa]
      ,[Ext_Telefono_Casa]
      ,[Lada_Oficina]
      ,[Telefono_Oficina]
      ,[Ext_Telefono_Oficina]
      ,[Telefono_Celular]
      ,[Email_Personal]
      ,[Vehiculo_Actual_Anterior]
      ,[Marca_Actual_Anterior]
      ,[AnioModelo_Actual_Anterior]
      ,[Color_Actual_Anterior]
      ,[Escolaridad]
      ,[Venta_Id]
      ,[Nombre1]
      ,[Nombre2]

**Invoice**

[Factura_Cliente]
      ,[Factura_Distribuidor]
      ,[Precio_Base_Vehiculo]
      ,[Precio_Accesorios]
      ,[Precio_Vehiculo_DeContado]
      ,[Descuento]
      ,[Incentivo_Calculado]
      ,[Fecha_Entrega_DelVehiculo]
      ,[Fecha_Factura_Cliente]
      ,[Clave_Distribuidor]
      ,[Seguro_Gratis]
      ,[Clave_Promocion]
      ,[Tipo_Venta]
      ,[Unidad_de_Intercambio]
      ,[Venta_Id]

**Car**

[Modelo]
      ,[Marca]
      ,[AnioModelo]
      ,[Basico]
      ,[Cabecera]
      ,[Version]
      ,[Color_Exterior]
      ,[Color_Interior]
      ,[VIN]
      ,[Motor]
      ,[Transmision]
      ,[Origen]
      ,[Basico_Linea_Modelo]
      ,[Venta_Id] 
```

我可以整合客户（即使他们的领域存在差异），但我找不到有效的解决方案。

编辑：客户端上的第一列显示重复项，而第二列是与票证和产品匹配的 id。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T19:25:13.117

我会再做两张桌子。

一个用于新的合并客户端（与普通客户端具有所有相同的字段）以及旧客户端和新客户端之间的映射表。

此映射表应存储旧的 id，并将其映射为新的。

从这里开始很容易。根据映射表中当前的旧 id 用新 id 更新其他表。

# java - Java学习初期

> ID：12376455
> 
> 赞同：0
> 
> 时间：2012-09-11T19:18:30.630
> 
> 标签：java

我想自学java，但我不懂编程语言。我是编程新手，但我喜欢这样做。

所以你能指导我学习Java吗

1.  安装它需要什么软件？
2.  请附上学习网站链接以获取基础知识。
3.  另请附上示例链接。

谢谢你

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T19:21:56.293

我建议看一下[Thinking in Java](http://www.mindview.net/Books/TIJ/)。它还为您提供了 OO 的概述，这对于在 Java 中进行良好的编程至关重要。我还会看 Oracle 的[教程](http://docs.oracle.com/javase/tutorial/)。

至于实际编写 java 可能需要什么，我将从文本编辑器开始，然后手动编译和部署应用程序。这可以让你很好地理解它。之后我会寻找一个IDE，比如Eclipse。

# c++ - 当一个带有警告“控制到达非无效函数的结尾”的函数被调用时，会发生什么（实际上）？

> ID：12376461
> 
> 赞同：12
> 
> 时间：2012-09-11T19:18:43.177
> 
> 标签：c++, c

我知道这条消息是什么意思，我只是想知道为什么它**不是**错误消息，而只是警告？

在这种情况下会发生什么？例如，假设我有一个函数

```
int f()
{
} 
```

当我调用它时会发生什么？
在这种情况下，编译器是否添加了“未初始化”的返回`int`？
或者缺少返回可能导致堆栈损坏？
还是（绝对）*未定义的行为*？

[使用 gcc 4.1.2 和 4.4.3 测试]

* * *

**编辑：**阅读我理解一件事的答案，阅读评论 - 另一个..

好的，让我们总结一下：这是*未定义的行为*。那么，这意味着有*可能*导致堆栈损坏，对吗？（这甚至意味着，我的电脑可能会开始通过麦克风插孔向我扔烂番茄，尖叫——“你做了什么？？？”）。

但如果是这样，那么为什么这里的最高答案说，堆栈损坏不会发生，同时，行为是未定义的？

和未定义的？尝试使用“未返回值”的调用者，或者只是函数的结尾未定义，如果它必须返回值，但它没有？

或者这不是未定义的行为，而只是尝试使用该值（未返回，d'oh！）的用户将“接收”未定义的*值*？换句话说 - 只是一些垃圾价值，不会发生更多的事情吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-11T19:20:40.883

A: 不，缺少返回不会导致堆栈损坏

答：是的，如果调用者试图读取和/或使用（未定义！）返回值，则行为将是“未定义的”。

PS：

这是对 C++ 的引用：

> C++03 §6.6.3/2：
> 
> 从函数的末尾流出相当于没有值的返回；这会导致值返回函数中的未定义行为。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-05-15T18:00:57.963

您询问了 C 和 C++。两种语言的规则不同。

在 C 中，仅当调用者尝试使用函数返回的值时，行为才被定义。如果你有：

```
int func(void) {
    /* no return statement */
}

...

func(); 
```

那么行为是明确定义的。

在 C++ 中，无论调用者是否尝试使用结果，行为都是未定义的（如果函数被调用）。（这是出于历史原因；ANSI C 之前没有`void`关键字，并且不打算返回值的函数通常（隐式）定义为 return `int`。）

John Bode 的回答已经引用了2011 ISO C 标准 6.9.1p12的[N1570 草案：](http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1570.pdf)

> 如果到达终止函数的**}**，并且调用者使用了函数调用的值，则行为未定义。

paulsm4 引用了 C++ 标准；引用最新的 2011 版本，6.6.3p2：

> 从函数的末尾流出相当于`return`没有值的 a；这会导致值返回函数中的未定义行为。

导致 C 允许返回值的函数无法返回值的历史原因，只要调用者不使用该值，不适用于 C++，其设计不受避免需要的强烈影响打破旧的（ANSI C 之前的）代码。

在 C（从 C99 开始）和 C++ 中，`main`函数都是一种特殊情况；`}`在不执行 return的情况下到达结束`main`相当于 a `return 0;`。（C 允许`main`返回除 之外的实现定义的类型`int`；在这种（罕见的）情况下，落到最后会向宿主环境返回未指定的终止状态。）

当然，`return`从返回值的函数中省略语句，或者有一个可能的执行路径没有到达`return`语句，是一个坏主意。`int`它仅在用作`void`和 in的替代的古老遗留 C 代码中才有意义`main`（尽管即使是 for `main`，我个人也喜欢有一个明确的`return 0;`）。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-11T19:23:53.823

该标准认为它未定义。

实际上，将读取为返回值保留的内存或寄存器。有什么就有什么。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-09-11T20:05:13.387

[C 2011 草案 N1570](http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1570.pdf)

> ### 6.9.1 函数定义
> 
> ...
> 12 如果`}`到达终止函数的 ，并且调用者使用函数调用的值，则行为未定义。

“未定义”仅表示语言标准不要求编译器以任何特定方式处理这种情况；任何行动都被认为是“正确的”。编译器可以自由地发出诊断和停止翻译，或者发出诊断和完整的翻译（这就是你所看到的），或者完全忽略问题。

至于实际的运行时行为，这取决于以下内容：

*   调用者如何使用返回值？
*   使用的调用约定是什么？
*   底层架构如何表现？

等等

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-09-11T19:22:37.713

编译器不需要对此进行诊断，因为在某些情况下它**很难**。所以规则是行为是未定义的。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-05-15T19:40:15.630

我在 Linux 64 位 GCC 4.63 上进行了一个简单的测试让我们在实践中看看 GCC 是如何组装这样的东西的。

我创建了一个简单的例子

**这是具有正常返回值的 test.c**

```
int main()
{
    return 0;
} 
```

**这是 test.c 的 GCC 汇编器输出：**

```
main:
.LFB0:
    .cfi_startproc
    pushq   %rbp
    .cfi_def_cfa_offset 16
    .cfi_offset 6, -16
    movq    %rsp, %rbp
    .cfi_def_cfa_register 6
    movl    $0, %eax
    popq    %rbp
    .cfi_def_cfa 7, 8
    ret
    .cfi_endproc 
```

**这是没有返回值的 test2.c**

```
int main()
{
} 
```

**这是 test2.c 的 GCC 汇编器输出：**

```
main:
.LFB0:
    .cfi_startproc
    pushq   %rbp
    .cfi_def_cfa_offset 16
    .cfi_offset 6, -16
    movq    %rsp, %rbp
    .cfi_def_cfa_register 6
    popq    %rbp
    .cfi_def_cfa 7, 8
    ret
    .cfi_endproc 
```

基本上我们可以看到缺少以下行。

```
 movl    $0, %eax 
```

这一行将一个值移动到`eax`寄存器，这是函数的返回值。如果该函数在现实生活中使用，`eax`可能包含垃圾值的寄存器将表示`main()`...的返回值

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-12-30T18:57:04.320

我在 g++ 中进行了测试。似乎你得到了一个包含随机内容的对象，即它不调用任何构造函数。当我只处理整数时，这意味着我得到一个随机数。当我处理字符串时，我遇到了分段违规。我不知道这是否是你所说的腐败，但这很糟糕。

至于你的第一个问题，我会更进一步。我想知道为什么这是一个默认禁用的警告！这对我来说似乎很重要。

```
#include <string>
#include <iostream>

class X
{
private:
  int _x;
public:
  X(int x) : _x(x) { } // No default construcor!                            
  int get() const { return _x; }
};

X test1(int x)
{
  if (x > 0)
    return X(x);
  // warning: control reaches end of non-void function                      
}

class Y
{
private:
  std::string _y;
public:
  Y(std::string y) : _y(y) { } // No default construcor!                    
  std::string get() const { return _y; }
};

Y test2(std::string y)
{
  if (y.length() > 3)
    return Y(y);
  // warning: control reaches end of non-void function                      
}

int main(int, char**)
{
  std::cout<<"4 -> "<<test1(4).get()<<std::endl;
  std::cout<<"-4 -> "<<test1(-4).get()<<std::endl;
  std::cout<<"stop -> "<<test2("stop").get()<<std::endl;
  std::cout<<"go -> "<<test2("go").get()<<std::endl;
} 
```

# asp.net-mvc-3 - 那里有一个好的 asp.net MVC3 Google Checkout 示例吗？

> ID：12376463
> 
> 赞同：0
> 
> 时间：2012-09-11T19:18:46.767
> 
> 标签：asp.net-mvc-3, google-checkout

我正在寻找使用 ASP.NET MVC3 实现 Google Checkout 的优秀教程或示例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T20:38:06.660

查看以下链接

*   [将 Google Checkout 2.5 API 与 ASP.NET MVC 一起使用](http://www.capprime.com/software_development_weblog/2010/11/29/UsingTheGoogleCheckout25APIWithASPNETMVCTheMissingSample.aspx)
*   [ASP.Net MVC 中的 Google Checkout](https://stackoverflow.com/questions/1767097/google-checkout-in-asp-net-mvc)

# ruby-on-rails-3 - 除了索引之外，您如何加载基于 Rails 操作的集合？

> ID：12376466
> 
> 赞同：1
> 
> 时间：2012-09-11T19:18:50.010
> 
> 标签：ruby-on-rails-3, batman.js

Batmanjs 示例项目[Classifieds](https://github.com/Shopify/batman-classifieds)过去通过传递 :url 选项来覆盖默认资源名称来执行此操作，但现在已弃用。

```
Classifieds.Ad.load {url: "/ads/search.json?q=#{params.q}"}, (error, records) =>
        throw error if error
        @set 'searchAds', records 
```

我见过大多数人将查询参数传递给索引操作并根据传递的过滤器处理逻辑。是否有一个工作示例说明如何从索引以外的导轨操作加载集合？

# web-services - 是否有任何 Web 服务或其他 API 让您无需先设置帐户即可购买东西？

> ID：12376468
> 
> 赞同：2
> 
> 时间：2012-09-11T19:18:52.633
> 
> 标签：web-services

我正在尝试对一个系统进行原型设计，该系统将向用户显示选择列表，并允许他们为他们选择的系统下订单（原型的过度简化，但足以说明问题）。我有用户的信用卡号、账单和送货地址以及其他联系信息，但我找不到任何 Web 服务可以让我用这些信息实际购买东西来完成原型。我检查了诸如[Programmable Web](http://www.programmableweb.com/apis/directory)和[Xmethods](http://www.xmethods.net/ve2/Directory.po)之类的目录，但它们似乎只是指向可以让您检查价格和可用性的 API，但实际上并没有下订单。是否存在这样的事情，或者是否有某种原因（例如安全性）我错过了，阻止提供这样的服务？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T21:06:24.480

在线购物最重要的是传输信息（例如信用卡数据）的安全性。因此，理想的情况是将这些信息直接传输到相关银行（信用卡发卡机构）的支付服务，而不是通过其他服务提供商传递。这就是 3-D Secure 所做的。

因此，当您使用通用 API 时，这意味着在它们之间放置一个额外的代理，并将安全信息传递给该方，这会增加漏洞。由于这样的经纪人不能使用 3-D 安全（因为它不是商家，所以不可能与银行达成协议），它应该将信息传递给在线购物网站。

此外，如果您不签订强制性协议，在线购物网站可以随时阻止来自此类中介网络服务的流量，并且为每个在线商家签订协议实际上不太可能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T09:42:57.540

我认为这是可能的，虽然我不知道深入的信息。我想这就是你所看到的。在接下来的步骤中，您将被重定向到银行的支付网关，然后您只需回答一些安全问题即可完成交易。我认为这是您应该从银行获得的服务。而且我还没有看到任何可以执行您提到的任务的通用 API。

[Dialog GSM - 斯里兰卡](http://mydialog.dialog.lk/bill/)

[任何东西.lk - 斯里兰卡](http://www.anything.lk/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T08:49:57.403

没有这样的免费 API 可用，原因很简单，信用卡等信息非常安全和保密，免费 API 会存在安全威胁。

这是最佳 10 在线支付系统的列表

[http://sixrevisions.com/tools/online-payment-systems/](http://sixrevisions.com/tools/online-payment-systems/)

和这个提供现场演示的人

[http://www.fastcharge.com/](http://www.fastcharge.com/)

# java - 错位重绘？

> ID：12376472
> 
> 赞同：1
> 
> 时间：2012-09-11T19:19:24.187
> 
> 标签：java, image, awt, bufferedimage, raster

我正在写微软的油漆。问题是，在更大的图片（甚至是 800x600 的图片）上，这张图片的片段在位图上的随机位置出现不想要的。它是不可编辑的，你不能在上面画画。它涵盖了旧内容。此外，它使用与我的图片相同的数据源，因此编辑位图会导致编辑此片段（但不是相反）。不知道它来自哪里以及如何删除它。我想我可能把 repaint() 和 revalidate() 放在了错误的地方。

我附上了一个截图，描述了我在说什么。如果有人有兴趣帮助我，请写下来，我会给你必要的代码。

屏幕： http: [//postimage.org/image/xaa7udgmp/](http://postimage.org/image/xaa7udgmp/)

# c# - 为什么在函数中使用名称参数实际上会生成更多代码？

> ID：12376473
> 
> 赞同：8
> 
> 时间：2012-09-11T19:19:25.020
> 
> 标签：c#, performance, c#-4.0, compiler-construction

阅读 Jon Skeet 的书，我发现（现在有一段时间）在函数调用中使用了“**命名参数”。**这是一个快速简单的示例：

```
void Dump(int x, int y, int z, string cSomeText)
{
    // no use, just to see how we call this later
    string cOnMe = string.Format("[{0}] [{1}] [{2}] [{3}]", x, y, z, cSomeText);
}

void CallDumpWithoutNameArguments()
{
    // call with out Name Arguments
    Dump(1, 2, 3, "Test string");
}

void CallDumpWithNameArguments()
{ 
    // more easy to read, call the same function with Name Arguments
    Dump(x: 1, y: 2, z: 3, cSomeText: "Test string");
} 
```

使用之后，后来看到编译后的代码，我看到这个名字的使用实际上是在函数调用之前创建了变量。

这是创建的代码：

```
private void CallDumpWithoutNameArguments()
{
    this.Dump(1, 2, 3, "Test string");
}

private void CallDumpWithNameArguments()
{
    int CS$0$0000 = 1;
    int CS$0$0001 = 2;
    int CS$0$0002 = 3;
    string CS$0$0003 = "Test string";
    this.Dump(CS$0$0000, CS$0$0001, CS$0$0002, CS$0$0003);
} 
```

和完整的编译代码，你会看到我用“命名参数”来称呼它有多大

```
 .method private hidebysig instance void CallDumpWithoutNameArguments()
  {
    .maxstack 8
                nop
                ldarg.0
                ldc.i4.1
                ldc.i4.2
                ldc.i4.3
                ldstr    "Test string"
                call     instance void SubSonic.BabisExtrasNoUseIt.ExtraTestCode::Dump(int32 x, int32 y, int32 z, string cSomeText)
                nop
                ret
  }

  .method private hidebysig instance void CallDumpWithNameArguments()
  {
    .maxstack 5
    .locals init (int32 V0,
                  int32 V1,
                  int32 V2,
                  string V3)
                nop
                ldarg.0
                ldc.i4.1
                stloc.0
                ldc.i4.2
                stloc.1
                ldc.i4.3
                stloc.2
                ldstr    "Test string"
                stloc.3
                ldloc.0
                ldloc.1
                ldloc.2
                ldloc.3
                call     instance void SubSonic.BabisExtrasNoUseIt.ExtraTestCode::Dump(int32 x, int32 y, int32 z, string cSomeText)
                nop
                ret
  } 
```

所以这是c#忘记优化的一点，或者还有其他用途吗？

## 跟进

我想明确一点，上面的代码是编译产生的。这是我从 Servy 得到的答案。

```
private void CallDumpWithoutNameArguments()
{
    // what generated from
    // int i = 0;
    // Dump(i++, i++, i++, cSomeText: "Test string");

    int i = 0;
    string CS$0$0000 = "Test string";
    this.Dump(i++, i++, i++, CS$0$0000);
} 

private void CallDumpWithNameArguments()
{
    // what is generate from
    // int i = 0;
    // Dump(x: i++, z: i++, y: i++, cSomeText: "Test string");

    int i = 0;
    int CS$0$0000 = i++;
    int CS$0$0001 = i++;
    int CS$0$0002 = i++;
    string CS$0$0003 = "Test string";
    this.Dump(CS$0$0000, CS$0$0002, CS$0$0001, CS$0$0003);
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-11T19:31:26.397

这与确保代码以正确的顺序运行有关。对于命名参数，每个参数的表达式需要按照它们在源代码中出现的顺序执行，而不是它们在定义的实际参数列表中出现的顺序。想象一下（非常卑鄙的）电话：

```
int i = 0;
Dump(x: i++,  z: i++, y: i++, cSomeText: "Test string"); 
```

它最终是否应该与以下内容相同：

```
Dump(0, 1, 2, "Test string"); 
```

或者

```
Dump(0, 2, 1, "Test string"); 
```

如果每个命名参数都没有局部变量，那么您最终会得到第一个，如果有，则最终会得到第二个。

看起来，与其试图确定是否有必要创建局部变量（参数是否无序，它们是否会导致副作用，那些副作用对其他参数中的表达式是否可见），而是总是创建更简单局部变量。已经多次声明 C# 编译器将确保优化的正确性；它为 JIT 留下了优化。

# c# - 使用 Json.NET 解析：“意外令牌：StartObject”

> ID：12376474
> 
> 赞同：12
> 
> 时间：2012-09-11T19:19:28.870
> 
> 标签：c#, json, json.net

我正在解析 JSON 并收到以下错误：

我正在使用 Newtonsoft.Json.NET dll。

> 读取字符串时出错。意外标记：StartObject。路径“[0]”，第 1 行，位置 2。

这是我拥有的代码：

```
public static List<string> GetPluginByCategory(string category)
    {
        var wc = new WebClient();
        var json = wc.DownloadString("http://api.bukget.org/api2/bukkit/category/" + category);
        var list = JsonConvert.DeserializeObject<List<string>>(json);
        return list;
    } 
```

category 可以是以下字符串之一：

> [“管理工具”、“反悲伤工具”、“聊天相关”、“开发者工具”、“经济”、“修复”、“乐趣”、“通用”、“信息”、“机制”、“杂项” 、“角色扮演”、“传送”、“网站管理”、“世界编辑与管理”、“世界生成器”]

编辑：这是我得到的回应：

```
 [{"description": "Stop users swearing\n", "name": "a5h73y", "plugname": "NoSwear"}, {"description": "Be sure that your server rules are read and accepted!", "name": "acceptdarules", "plugname": "AcceptDaRules"}] 
```

有谁知道为什么它不起作用？它以前曾经工作过：/。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-09-11T19:24:57.927

您的 json 是一个复杂对象数组，而不是字符串数组。试试这个（测试）：

```
WebClient wc = new WebClient();
string json = wc.DownloadString("http://api.bukget.org/api2/bukkit/category/Teleportation");

var items = JsonConvert.DeserializeObject<List<MyItem>>(json);

public class MyItem
{
    public string description;
    public string name;
    public string plugname;
} 
```

**编辑**

```
WebClient wc = new WebClient();
var json = wc.DownloadString("http://api.bukget.org/api2/bukkit/plugin/aboot");

dynamic dynObj = JsonConvert.DeserializeObject(json);
Console.WriteLine("{0} {1}", dynObj.plugname,dynObj.link);
foreach (var version in dynObj.versions)
{
    var dt = new DateTime(1970, 1, 1).AddSeconds((int)version.date);
    Console.WriteLine("\t{0} {1} {2}",version.version, version.download, dt);
} 
```

# .net - 缩放视图框内所有控件的高度和宽度

> ID：12376479
> 
> 赞同：2
> 
> 时间：2012-09-11T19:19:59.040
> 
> 标签：.net, wpf, xaml

我是 WPF 的新手。在我的代码中，我有一个带有一些控件的简单 WPF 窗口。所有控件都包含在视图框中。我的问题是，当我调整窗口大小时，控件大小文本没有按比例调整大小。这是我的代码：

```
<Window x:Class="DesktopGoogleReader.UIelements.About"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="About" Height="346" Width="435"
    >
    <Window.Background>
        <LinearGradientBrush StartPoint="0,0" EndPoint="0,0.5">
            <LinearGradientBrush.GradientStops>
                <GradientStop Offset="0" Color="#eee" />
                <GradientStop Offset="1" Color="#ccc" />
            </LinearGradientBrush.GradientStops>
        </LinearGradientBrush>
    </Window.Background>
    <Viewbox Stretch="Uniform">
        <Grid>        
            <Label Height="41" Margin="83,12,12,0" Name="label1" VerticalAlignment="Top" FontSize="20" FontWeight="Bold">Desktop Google Reader</Label>
            <Image Margin="348,0,0,0" Name="image1" Stretch="Fill" Height="65" HorizontalAlignment="Left" VerticalAlignment="Top" Width="65" Source="C:\Users\TRIDIP\Desktop\tmp\Desktop Google Reader WPF good UI\trunk\DesktopGoogleReader\DesktopGoogleReader.ico" />
            <Label Height="28" Margin="92,49,12,0" Name="label_versionName" VerticalAlignment="Top">Version: Versionnumber</Label>
            <TextBlock Margin="12,83,12,0" Name="textBlock1" Height="54" VerticalAlignment="Top" Text="Desktop Google Reader is Windows / .NET based client to the RSS aggregation service Google Reader. It is licensed under the New BSD License (BSD). It is developed by Konstantins Onufrijevs and Sven Walther" TextWrapping="Wrap" />
            <Label Margin="12,134,12,0" Name="label2" Height="29" VerticalAlignment="Top">Credits: Desktop Google Reader uses the following external resources:</Label>
            <Button HorizontalAlignment="Left" Margin="12,161,0,0" Name="button_snarlChsarp" Width="173" Height="23" VerticalAlignment="Top" >Snarl Connector</Button>
            <Button Margin="191,161,0,0" Name="button_TweetSharp" Height="23" VerticalAlignment="Top" HorizontalAlignment="Left" Width="173" >TweetSharp</Button>
            <Button Height="23" HorizontalAlignment="Left" Margin="12,190,0,0" Name="button_iconSet" VerticalAlignment="Top" Width="173" >Function Icon Set</Button>
            <Button Height="23" Margin="191,190,0,0" Name="button_facebook" VerticalAlignment="Top" HorizontalAlignment="Left" Width="173" >Facebook Developer Toolkit</Button>
            <Button Height="23" HorizontalAlignment="Left" Margin="12,219,0,0" Name="button_awesomium" VerticalAlignment="Top" Width="173" >Web Kit .NET</Button>
            <Button Height="23" Margin="191,219,0,0" Name="button_winkle" VerticalAlignment="Top" HorizontalAlignment="Left" Width="173" >Winkle Update System</Button>
            <TextBlock Height="59" Margin="12,248,12,0" Name="textBlock_contributors" VerticalAlignment="Top" Text="Contributors: We want to thank all the people using Desktop Google Reader. A special thanks goes to Henry C. for his continues help in improving and supporting our project." TextAlignment="Left" TextWrapping="Wrap" />
        </Grid>
    </Viewbox>
</Window> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T19:35:06.147

需要修改Stretch。

统一将保持文本成比例。
您可能正在寻找填充。

[拉伸枚举](http://msdn.microsoft.com/en-us/library/system.windows.media.stretch)

不要设置不会调整大小的控件的高度和宽度。
并将 Viewbox 放在 Grid 中（不是 Grid 放在 Viewbox 中）。

```
<Grid>
    <Grid.ColumnDefinitions>
        <ColumnDefinition Width="*"/>
    </Grid.ColumnDefinitions>
    <Grid.RowDefinitions>
        <RowDefinition Height="*" />
        <RowDefinition Height="*" />
    </Grid.RowDefinitions>
    <Viewbox Grid.Row="0" Grid.Column="0" Stretch="Fill">
        <TextBox Text="size me" TextChanged="TextBox_TextChanged" />
    </Viewbox>
    <Viewbox Grid.Row="1" Grid.Column="0" Stretch="Fill">
        <TextBox Text="size me to0 " TextChanged="TextBox_TextChanged" />
    </Viewbox>
</Grid> 
```

# xpages - 扩展库对话框刷新/缓存问题？

> ID：12376480
> 
> 赞同：0
> 
> 时间：2012-09-11T19:20:00.587
> 
> 标签：xpages

我似乎遇到了扩展库对话框不刷新或缓存值的问题。

请参阅下面非常简化的示例。基本上这个按钮会弹出一个扩展库对话框。对话框中包含一个以@Unique() 作为其值的计算域。在我们的产品服务器上，按下按钮时数字不会更新。它在第一次按下按钮时起作用，但随后的按下不会更新数字。

这仅在生产中发生，并且在过去几周内才开始出现类似问题。它在我们的开发和质量检查服务器上仍然可以正常工作。

我的管理员联系人现在不在，所以我不知道服务器之间的版本差异，但我会在了解这些信息时发布它们。

这是代码：

```
<xp:view xmlns:xp="http://www.ibm.com/xsp/core"
xmlns:xc="http://www.ibm.com/xsp/custom"
xmlns:xe="http://www.ibm.com/xsp/coreex">
<xp:this.resources>
    <xp:script src="/Validation_SSJS.jss" clientSide="false"></xp:script>
</xp:this.resources>

<xp:br></xp:br>

<xp:br></xp:br>
<xe:dialog id="dlgMsg2" title="Message" style="width:400px;">

   <xp:text escape="true" id="computedField1" value="#{javascript:return @Unique();}">
        </xp:text>

</xe:dialog><xp:br></xp:br>
<xp:br></xp:br>

<xp:br></xp:br>
<xp:button value="Popup Message" id="button1">
    <xp:eventHandler event="onclick" submit="true"
        refreshMode="complete">
        <xp:this.action><![CDATA[#{javascript:var dlg =      getComponent("dlgMsg2");
dlg.show();}]]></xp:this.action>
    </xp:eventHandler></xp:button>
</xp:view> 
```

更新：这个问题在 IE 和 Firefox 中都出现，所以它似乎与浏览器无关。我猜它也与 Pistolstar 无关，因为我之前遇到过 PS 和 Xpages 的问题。Pistolstar 发现了这个问题，我会在获得更多详细信息时更新我之前的帖子

更新：我检查了，我们的 QA 和 Prod 服务器的扩展库版本为 8.5.3.20111208-0717。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T16:14:21.733

我想出了一个“解决方法”来解决这个问题。我为对话框的 onShow 事件添加了一个刷新事件处理程序。

```
<xe:dialog id="dlgMsg2" title="Message" style="width:400px;">
        <xp:text escape="true" id="computedField1" value="#{javascript:return @Unique();}">
        </xp:text>

    <xp:eventHandler event="onShow" submit="true"
        refreshMode="partial" refreshId="computedField1">
    </xp:eventHandler></xe:dialog> 
```

了解潜在问题仍然很有趣。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T20:03:27.403

在对话框的所有属性部分，有一个名为“RefreshOnShow”的属性。

当设置为 true 时，面板的内容将在每次面板从隐藏状态变为可见状态时刷新。这应该可以解决您看到的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T12:01:26.363

这可能不太可能，但 xsp.properties 中的页面持久性选项可能会改变页面跨环境的行为方式。数据库和服务器上有 xsp.properties。XPages Portable Command Guide 提供了有关不同设置的更多详细信息，但设置可能会更改请求之间保留的内容。

# javascript - 使用javascript将脚本元素附加到头部在chrome中不起作用

> ID：12376482
> 
> 赞同：0
> 
> 时间：2012-09-11T19:20:06.183
> 
> 标签：javascript, jquery, google-chrome

在我的主页中我想检查，如果它还没有加载，包括一个 edit_profile.js 脚本

```
$(function(){

  if (typeof is_editprofilejs_loaded == "undefined") {

       alert('undefined');
       var e = document.createElement("script");
       e.src = base_url+"js/edit_profile.js";
       e.type = "text/javascript";
       document.getElementsByTagName("head")[0].appendChild(e);

  }
  else
  {

      alert('its loaded.');

  }

}) 
```

在我的`script.js`我有

```
 $(function(){
        var is_editprofilejs_loaded = true ;
        alert('now its loaded ! ');
       //some code 
   }) 
```

所以当我在 Firefox 中运行我的代码时，我会收到这些消息

```
1 - undefined
2 - now its loaded ! 
```

但在 chrome 中我只是得到

```
1 - undefined 
```

当然，包含页面中的代码不起作用有什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T19:34:21.733

为什么在 DOMready 函数中有这些函数？

这也是失败的原因：您的变量`is_editprofilejs_loaded`是该匿名函数的本地变量，并且永远不会在主文件的函数中定义。

*   删除不必要的功能和/或
*   通过分配`window.is_editprofilejs_loaded = true`和检查变量显式地使变量全局化`if (window.is_editprofilejs_loaded)`

顺便说一句，你到底`script.js`错过了一个`);`- 不确定是否只是一个 c&p 错误

# java - cronjob 调用后 Java 程序不关闭

> ID：12376487
> 
> 赞同：3
> 
> 时间：2012-09-11T19:20:33.027
> 
> 标签：java, cron, jakarta-mail

我编写了一个从我的邮件帐户中检索邮件的 Java 程序。

此 jar 由 Ubuntu 服务器上的 cronjob 每 15 分钟调用一次。

定时任务：

> /bin/sh /root/scripte/cron_bugtracker.sh

cron_bugtracker.sh：

> java -jar /path/to/file.jar

jar 工作正常，但程序不退出。

当我这样做时，它总是使用as 命令`ps ax | grep java`显示很多 java 进程：`java -jar /path/to/file.jar`

> 32208 ? Sl 0:59 java -jar /path/to/file.jar

我的 Java 程序是这样工作的：

1.  在主要我调用构造函数
2.  在构造函数中，我使用 javax.mail 调用获取邮件的方法。*
3.  然后程序就完成了……至少应该是

有谁知道为什么程序不退出？请帮忙。

编辑：

在日志文件中我发现了这个：

“控制”是我的主类的名称。

```
Full thread dump Java HotSpot(TM) Client VM (23.1-b03 mixed mode):

"Service Thread" daemon prio=10 tid=0xb76bd000 nid=0x292 runnable [0x00000000]
   java.lang.Thread.State: RUNNABLE

"C1 CompilerThread0" daemon prio=10 tid=0xb76bb400 nid=0x291 waiting on condition [0x00000000]
   java.lang.Thread.State: RUNNABLE

"Signal Dispatcher" daemon prio=10 tid=0xb76b9800 nid=0x290 waiting on condition [0x00000000]
   java.lang.Thread.State: RUNNABLE

"Finalizer" daemon prio=10 tid=0xb7681c00 nid=0x28f in Object.wait() [0xa10ad000]
   java.lang.Thread.State: WAITING (on object monitor)
        at java.lang.Object.wait(Native Method)
        - waiting on <0xa1585650> (a java.lang.ref.ReferenceQueue$Lock)
        at java.lang.ref.ReferenceQueue.remove(Unknown Source)
        - locked <0xa1585650> (a java.lang.ref.ReferenceQueue$Lock)
        at java.lang.ref.ReferenceQueue.remove(Unknown Source)
        at java.lang.ref.Finalizer$FinalizerThread.run(Unknown Source)

"Reference Handler" daemon prio=10 tid=0xb7680000 nid=0x28e in Object.wait() [0xa10fe000]
   java.lang.Thread.State: WAITING (on object monitor)
        at java.lang.Object.wait(Native Method)
        - waiting on <0xa1585228> (a java.lang.ref.Reference$Lock)
        at java.lang.Object.wait(Object.java:503)
        at java.lang.ref.Reference$ReferenceHandler.run(Unknown Source)
        - locked <0xa1585228> (a java.lang.ref.Reference$Lock)

"main" prio=10 tid=0xb7606000 nid=0x28c runnable [0xb77ae000]
   java.lang.Thread.State: RUNNABLE

        at java.lang.ClassLoader.findBootstrapClass(Native Method)
        at java.lang.ClassLoader.findBootstrapClassOrNull(Unknown Source)
        at java.lang.ClassLoader.loadClass(Unknown Source)
        - locked <0xa1855398> (a java.lang.Object)
        at java.lang.ClassLoader.loadClass(Unknown Source)
        at com.sun.mail.pop3.POP3Folder.createMessage(POP3Folder.java:362)
        at com.sun.mail.pop3.POP3Folder.getMessage(POP3Folder.java:343)
        - locked <0xa18261a0> (a com.sun.mail.pop3.POP3Folder)
        at javax.mail.Folder.getMessages(Folder.java:947)
        - locked <0xa18261a0> (a com.sun.mail.pop3.POP3Folder)
        at javax.mail.Folder.search(Folder.java:1231)
        at Control.receive(Control.java:53)
        at Control.<init>(Control.java:29)
        at Control.main(Control.java:24)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
        at java.lang.reflect.Method.invoke(Unknown Source)
        at org.eclipse.jdt.internal.jarinjarloader.JarRsrcLoader.main(JarRsrcLoader.java:58)

"VM Thread" prio=10 tid=0xb767a800 nid=0x28d runnable

"VM Periodic Task Thread" prio=10 tid=0xb76bf800 nid=0x293 waiting on condition

JNI global references: 163

Heap
 def new generation   total 4928K, used 2907K [0xa1580000, 0xa1ad0000, 0xa6ad0000)
  eden space 4416K,  65% used [0xa1580000, 0xa1856e20, 0xa19d0000)
  from space 512K,   0% used [0xa19d0000, 0xa19d0000, 0xa1a50000)
  to   space 512K,   0% used [0xa1a50000, 0xa1a50000, 0xa1ad0000)
 tenured generation   total 10944K, used 0K [0xa6ad0000, 0xa7580000, 0xb1580000)
   the space 10944K,   0% used [0xa6ad0000, 0xa6ad0000, 0xa6ad0200, 0xa7580000)
 compacting perm gen  total 12288K, used 2688K [0xb1580000, 0xb2180000, 0xb5580000)
   the space 12288K,  21% used [0xb1580000, 0xb1820230, 0xb1820400, 0xb2180000)
No shared spaces configured. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T19:40:31.613

进行线程转储以找出仍在运行的内容：如果您使用的是 Oracle JVM，则可以为此使用 jstack PID。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T19:28:36.317

在程序的最后放置一个调试打印。如果您看到打印，则表示主线程结束，但程序没有退出。我猜 JavaMail 有一个打开的线程（可能是一个邮件会话），需要关闭。您确定要在退出之前关闭所有资源吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T19:27:57.603

尝试在作业完成时显式使用 JVM 完成。这是执行此操作的代码：

```
System.exit(0); 
```

正如 iccthedral 所说，也许有一些代码阻止了你的程序。

# scala - Maven 不正确地启动 fsc？

> ID：12376494
> 
> 赞同：8
> 
> 时间：2012-09-11T19:21:25.063
> 
> 标签：scala, maven, fsc, scala-maven-plugin

我正在尝试在我的 maven 项目中使用 fsc（快速 scala 编译器）。我的`pom.xml`有：

```
...
 <execution>
   <id>cc</id>
   <goals>
     <goal>cc</goal>
   </goals>
   <phase>compile</phase>
   <configuration>
     <useFsc>true</useFsc>
     <once>true</once>
   </configuration>
 </execution>
... 
```

如[使用 maven 编译 Scala 文件的最快方法是什么？](https://stackoverflow.com/questions/6130217)

当我输入`mvn scala:cc`时，它会挂起：

```
[INFO] wait for files to compile... 
```

跑步`mvn scala:cc -DdisplayCmd=true -Dverbose=true`

```
 [INFO] cmd:  /bin/sh -c .../java -classpath [redacted] scala.tools.nsc.MainGenericRunner scala.tools.nsc.CompileServer >MainGenericRunner.out 2>MainGenericRunner.err 
```

这看起来很奇怪（不应该不包括`scala.tools.nsc.MainGenericRunner`吗？）我注意到`MainGenericRunner.out`包含

```
no such file: scala.tools.nsc.CompileServer 
```

这似乎证实了我的怀疑。

有没有人遇到过这种情况，或者有解决方法？我真的很想使用 fsc 来加速我的构建。我在 google 群组上发现了一位具有类似输出的用户，但没有跟进。

在 OSX 上运行 scala 2.8.1 和 maven 3.0.3

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T19:56:29.223

当您调用`mvn scala:cc`maven 时，将使用未在您的 pom.xml 中配置的执行 ID default-cli（或类似的东西）。因为那个 maven 将使用 cc 目标的默认值。目前，您的 pom 配置为在“编译”阶段使用您的自定义执行 cc 目标。因此，运行类似`mvn compile`或`mvn install`应该按预期工作的东西。

# database - 是否可以通过 R(RMySQL) 向数据库表添加索引

> ID：12376498
> 
> 赞同：4
> 
> 时间：2012-09-11T19:21:41.107
> 
> 标签：database, r, indexing, rmysql

我已经创建了一个表输出并通过RMySQL连接到数据库，现在我需要为表添加索引，我四处搜索但没有找到我需要的R语言，请帮助。

该表的一个小示例如下所示：

```
mth <- c(rep(1:2,5))  
day <- c(rep(10,5),rep(11,5))  
hr <- c(3,4,5,6,7,3,4,5,6,7)  
v <- c(3,4,5,4,3,3,4,5,4,3)  
A <- data.frame(cbind(mth,day,hr,v)) 
```

我需要的索引应该包括：“mth”+“day”+“hr”。非常感谢你！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T00:31:22.580

您可以使用`dbSendQuery`将 SQL 语句发送到服务器。因此，您可以使用 SQL[创建表](http://dev.mysql.com/doc/refman/5.6/en/create-table.html)和/或[添加索引](http://dev.mysql.com/doc/refman/5.6/en/create-index.html)，然后使用`dbWriteTable`with写入数据`append=TRUE`。

# php - 将 JSON 中的值插入数据库

> ID：12376501
> 
> 赞同：0
> 
> 时间：2012-09-11T19:21:57.907
> 
> 标签：php, mysql, arrays, json

我有一个页面上的 JSON 数组。随着时间的推移，它会通过一些用户交互来添加。当用户完成后，他们需要将此数组提交到一个页面，在该页面中，他们的信息通过 php.ini 添加到 mySQL 表中。我通过 AJAX 对页面的调用如下`answersArray`数组在哪里

```
$.ajax({
    type: "POST",
    dataType: "json",
    data: answersArray,
    url: 'sendToUsersFeedback.php',
}); 
```

数组如下所示：

```
[
    {
        "USERID": "3",
        "INDVID": "0",
        "RATING": "1",
        "CONFIDENCE": "8"
    },
    {
        "USERID": "3",
        "INDVID": "1",
        "RATING": "1",
        "CONFIDENCE": "88"
    }
] 
```

这就是我感到困惑的地方。我需要解码这个传入的 json，然后循环遍历它，为每个数组项添加一条新记录（USERID、INDVID、RATING 和 CONFIDENCE 构成一个记录等）。这个数组中可以有多达 20 个。我知道 USERID 不是唯一的。已经设置好了。

这是我搞砸的php方面。如何解码传入的数组并通过它。我试过以下

```
$sql = json_decode(data,true);
foreach( $data as $row ) {
    $sql[] = '("'.mysql_real_escape_string($row['USERID']).'", '.$row['INDVID'].','.$row['RATING'].','.$row['CONFIDENCE'].')';
}
mysql_query('INSERT INTO users_feedback (USERID, INDVID, RATING. CONFIDENCE) VALUES '.implode(',', $sql)); 
```

我接近了吗？我很困惑。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T19:34:41.590

首先，为您发布的数据命名：

```
$.ajax({
    type: "POST",
    dataType: "json",
    data: {
      my_data: answersArray
    },
    url: 'sendToUsersFeedback.php',
}); 
```

然后，在您的 PHP 代码中，恢复您的数据：

```
$data = $_POST['my_data'];
$sql = json_decode($data, true);
... 
```

您应该知道每个人都可以在客户端编辑 JSON，因此以这种方式将数据插入数据库是非常危险的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T19:34:37.447

你正在做：

```
$sql = json_decode(data,true); 
```

是什么`data`？你可能错过了美元符号。你真的把你的 JSON 放进去了`$data`吗？

您将 json_decode() 结果分配给`$sql`; 现在您的`$sql`变量将包含一个关联数组与您的`$data`. `$data`仍然是一个字符串，因为您在检索它后没有更改它的值。

然后你遍历字符串（没有发生）并运行：

```
mysql_query('INSERT INTO users_feedback (USERID, INDVID, RATING. CONFIDENCE) VALUES '.implode(',', $sql)); 
```

`$sql`上面将是您的 JSON，作为 PHP 数组，类似于：

```
array(array('USERID' => 1 ...), array('USERID' => 2 ...)); 
```

你应该有：

```
$data = json_decode($data, true);
$sql = array();
foreach ($data as ... 
```

另外，请确保您确实检索了 $data：

```
$data = $_POST['data'] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T19:47:03.730

很简单，你有 foreach 使用它来自 json 代码的 $data 数组。

您必须将解码后的数组设置为另一个变量并循环使用它。

```
$j_decoded = json_decode(data,true);

foreach(j_decoded as $row ) {
$sql[] = '("'.mysql_real_escape_string($row['USERID']).'", '.$row['INDVID'].','.$row['RATING'].','.$row['CONFIDENCE'].')';
}
mysql_query('INSERT INTO users_feedback (USERID, INDVID, RATING. CONFIDENCE) VALUES '.implode(',', $sql)); 
```

希望这对您有所帮助。

# php - php symfony 1.4：如何使用 csrf 令牌重定向

> ID：12376506
> 
> 赞同：0
> 
> 时间：2012-09-11T19:22:06.983
> 
> 标签：php, redirect, symfony-1.4

我想在同一个模块中从一个动作重定向到另一个`a`动作。`b`动作`b`需要 csrf 令牌才能执行，我还需要传递一些参数。

行动一：

```
public function executeA(sfWebRequest $request){

   //... do stuff

   $this->redirect('module/b?id='.$something->getId());

} 
```

行动 b：

```
public function executeB(sfWebRequest $request){

   $request->checkCSRFProtection(); //morte

   $something_id = $request->getParameter('id');
   //... do stuff

} 
```

`b`仅当单击由或任何其他方法创建的锚时，该操作才会执行，`link_to('module/b?id='.$something.getId() , array('method' => 'post'))`因为它会随请求发送 csrf 令牌。

我尝试了各种方法，`$this->forward()`并`$this->redirect()`尝试添加`'method' => 'post'`重定向参数，如 in `link_to()`，但没有任何效果，我也无法在网上找到任何关于它的信息。API 文档说明了这一点。我得到的只是

```
 500 | Internal Server Error | sfValidatorErrorSchema
_csrf_token [Required.] 
```

错误。它在标记的行上失败`//morte`。请问，有谁知道如何正确执行此操作，以及在我想重定向到其他模块的情况下？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T12:09:04.770

好的，现在更清楚了。

事实是`_csrf_token`不是重定向到其他操作，我的意思是，您没有在查询中重新添加它。

尝试：

```
public function executeA(sfWebRequest $request){

   //... do stuff

   $this->redirect('module/b?id='.$something->getId().'?_csrf_token='.$request->getParameter('_csrf_token'));

} 
```

# perl - 在 Windows 上同时调用 perl 系统

> ID：12376507
> 
> 赞同：-2
> 
> 时间：2012-09-11T19:22:12.127
> 
> 标签：perl

试图找到一种方法让一个 perl 脚本在 windows 上运行 4 个其他 perl 脚本，然后一旦全部完成，启动第 5 个脚本。我已经检查了很多东西，但似乎没有一个是直截了当的。欢迎提出建议。脚本将在 Windows 框中运行。脚本 1-4 需要在开始脚本 5 之前先完成

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T19:36:52.433

1.  接受其他问题的答案

2.  `use threads`

    2.1。启动 4 个脚本：

    ```
    my @scripts = qw(... commands ...);
    my @jobs = ();
    foreach my $script (@scripts) {
      my $job = threads->create( sub {
        system($script);
      });
      push @jobs, $job;
    } 
    ```

    2.2\. 等待完成

    ```
    $_->join() foreach @jobs; 
    ```

    2.3\. 启动最后一个脚本

### 编辑

正如你指出我的解决方案对你不起作用，我启动了我的 Windoze 盒子，教我使用这个可怕的 cmd.exe 并编写了以下测试脚本。它比上述解决方案稍微简化了一点，但*确实*满足您对顺序性等的要求。

```
#!/usr/bin/perl
use strict; use warnings; use threads;

my @scripts = (
  q(echo "script 1 reporting"),
  q(perl -e "sleep 2; print qq{hi there! This is script 2 reporting\n}"),
  q(echo "script 3 reporting"),
);

my @jobs = map {
  threads->create(sub{
    system($_);
  });
} @scripts;

$_->join foreach @jobs;

print "finished all my jobs\n";

system q(echo "This is the last job"); 
```

我使用这个命令来执行脚本（在 Win7 上使用 Strawberry Perl v5.12.2）：

```
C:\...>perl stackoverflow.pl 
```

这是输出：

```
"script 1 reporting"
"script 3 reporting"
hi there! This is script 2 reporting
finished all my jobs
"This is the last job" 
```

那么这到底怎么行不通呢？下次我在非 GNU 系统上编写脚本时，我非常想学习如何规避 Perl 的陷阱，所以请赐教我可能出错的地方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T19:49:22.380

根据个人经验，`fork()`在 ActiveState Perl 中使用并不总是按顺序运行进程。那里使用的线程模拟`fork()`似乎启动了所有进程，使其达到某个点，然后一次运行一个。这甚至适用于多核 CPU。我认为 Strawberry Perl 的编译方式相同。另外，请记住，`fork()`它仍然被用于反引号和`system()`，它只是被抽象掉了。

如果您在 Windows 上使用 Cygwin Perl，它将通过 Cygwin 自己的`fork()`调用运行，并且事情将正确并行化。但是，Cygwin 在其他方面较慢。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T15:18:24.250

```
use Proc::Background;

my @commands = (
  ['./Files1.exe ALL'],
  ['./Files2.exe ALL'],
  ['./Files3.exe ALL'],
  ['./Files4.exe ALL'],
); 

my @procs = map {  Proc::Background->new(@$_) } @commands;

$_->wait for @procs;

system 'echo', 'CSCProc', '--pidsAndExitStatus', map { $_->pid, $_->wait } @procs;

`mergefiles.exe`; 
```

# php - PHP tar 将路径返回到根目录

> ID：12376509
> 
> 赞同：1
> 
> 时间：2012-09-11T19:22:16.510
> 
> 标签：php, system, tar

我正在运行以下命令来创建文件或文件夹的备份 tarball：

```
system("tar -pczf /home/var/www/temp /home/var/www/folder/to/backup"); 
```

它工作得很好，但是当我提取时，我将路径一直返回到服务器的根目录（/home/var/www/folder/to/backup）。

我很好奇是否有一个命令或标志可以让我创建 tarball，所以它只包含“/folder/to/backup”部分。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T19:29:36.007

是的，您可以使用相对路径：

```
system("tar -pczf /home/var/www/temp folder/to/backup"); 
```

或者，如果您的备份目录位于较低级别：

```
system("tar -pczf /home/var/www/temp ../../folder/to/backup"); 
```

一些关于相对/绝对路径的[文档。](http://en.wikipedia.org/wiki/Path_%28computing%29)

# java - 是否可以通过 solr 中的特定模式请求字段？

> ID：12376510
> 
> 赞同：0
> 
> 时间：2012-09-11T19:22:18.630
> 
> 标签：java, solr

我可以使用 fl=fld1,fld2,fld3 从 solr 返回特定字段。但有时我会生成动态字段名称，如“.*_attribute_group1”，并希望 solr 返回所有组。是否可以使用正则表达式扩展 solr 'fl' 字段？在哪里查看 solr 代码库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T23:14:36.290

Solr 不支持字段名称 ( `"fl" param`) 中的通配符模式。但是您可以编写自己的组件来处理请求并识别您想要的索引中存在的文件列表。

扩展搜索组件以实现自定义字段的伪代码..

```
// PSUEDO CODE
public class FLPatternCustomComponent extends SearchComponent {

    @Override
        //Gauranteed to be called before any other SearchComponent.process
    public void prepare(ResponseBuilder rb) throws IOException {
           SolrParams params = rb.req.getParams();
           //Input fl=field_*
           String[] inputFl = params.getParams(CommonParams.FL);
           Collection<String> existingFl = rb.req.getSearcher().getFieldNames();
           //process & find matching fields{
           SolrQuery newFields = new SolrQuery();
           newFields.set(CommonParams.FL, "field_1,field_2,field_3,field_4");
           AppendedSolrParams appendedParams = new AppendedSolrParams(params, q);
           rb.req.setParams(appendedParams);

           super.prepare(rb);
        }

    @Override
    public void process(ResponseBuilder rb) throws IOException {
        //Process request
        super.process(rb);
    }       
} 
```

您可以将此组件链接到您现有的请求处理程序或创建您的请求处理程序，也许您还可以添加任何其他不变量。

您可能需要考虑自定义组件及其处理的任何额外性能开销。我已经为自定义排名和自定义请求处理程序创建了几个自定义组件，并且使用它没有太多问题。

您可能需要检查[Solr Plugin Development](http://wiki.apache.org/solr/SolrPlugins)。

# jsf-2 - 失效 JSF 后清除表单字段

> ID：12376514
> 
> 赞同：1
> 
> 时间：2012-09-11T19:22:43.900
> 
> 标签：jsf-2, primefaces

好的，我有以下问题：在我的网络应用程序中，我通过 Primefaces 的对话框控件将 CRUD 全部放在一页中。在新对话框中，我有一些验证器。例如：当用户没有填写表单提交的必要字段时，表单显然不会提交。但是当我关闭新对话框并再次打开它时，验证消息仍然存在！我怎样才能摆脱这个？每次打开对话框时，我都想要一个全新的页面（没有累积的验证错误）！那怎么办？

```
<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns:ui="http://java.sun.com/jsf/facelets"
            xmlns:h="http://java.sun.com/jsf/html"
            xmlns:f="http://java.sun.com/jsf/core"
            xmlns:p="http://primefaces.org/ui"
            template="./../../resources/templates/baseTemplate.xhtml">

<ui:define name="content">
    <f:view id="vRoot">
        <p:fieldset legend="Gerenciar público">
            <h:form id="frmPublicos">
                <!-- Exibição de mensagens gerais -->
                <p:growl id="gMessages" sticky="false" globalOnly="true" />

                <!-- Exibição da lista de públicos -->
                <p:dataTable id="dtPublicos" 
                             value="#{publicoBean.lstDataTablePublico}"
                             paginator="true" rows="5" 
                             rowsPerPageTemplate="5,10"
                             paginatorPosition="bottom"
                             paginatorTemplate="{FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                             var="atual">
                    <!-- Every time dialog opens validation messages should be cleaned -->
                    <f:facet name="header">
                        <p:commandButton id="cbViewNovo" 
                                         value="Novo" type="button" 
                                         styleClass="cbViewNovo" 
                                         onclick="dlgNovo.show();"
                                         update=":dlgNovoPublico"
                                         process="@this">
                            <p:resetInput target=":dlgNovoPublico"/>
                        </p:commandButton>
                    </f:facet>
                    <!-- Colunas de edição e exclusão -->
                    <p:column>
                        <f:facet name="header">
                            <h:outputLabel value="Editar"/>
                        </f:facet>
                        <p:commandButton id="cbViewEditar"  
                                         image="ui-icon-pencil" 
                                         title="Editar"
                                         update=":frmEditar:pEditarPublico"
                                         oncomplete="dlgEditar.show();">
                            <f:setPropertyActionListener value="#{atual}" target="#{publicoBean.publicoSelecionado}" />
                        </p:commandButton>
                    </p:column>
                    <p:column>
                        <f:facet name="header">
                            <h:outputLabel value="Excluir"/>
                        </f:facet>
                        <p:commandButton id="cbViewExcluir" onclick="dlgExcluir.show();" 
                                         icon="ui-icon-close" title="Excluir">
                            <f:setPropertyActionListener value="#{atual}" target="#{publicoBean.publicoSelecionado}" />
                        </p:commandButton> 
                    </p:column>
                    <p:column>
                        <f:facet name="header">
                            Nome
                        </f:facet>
                        <h:outputLabel id="olViewNomePublico" value="#{atual.nmePublico}"/>
                    </p:column>
                    <p:column>
                        <f:facet name="header">
                            Tipo de público
                        </f:facet>
                        <h:outputLabel id="olViewTipoPublico" value="#{atual.tdTipoPublico}"/>
                    </p:column>
                </p:dataTable>
            </h:form>

            <!-- Caixa de diálogo de inclusão -->
            <p:dialog id="dlgNovoPublico" 
                      widgetVar="dlgNovo" 
                      modal="true" 
                      header="Novo público"
                      resizable="false">
                <h:form id="frmNovo">
                    <p:panel id="pNovoPublico">
                        <p:messages id="mNovoMessages" redisplay="false" />
                        <p:panelGrid columns="2">
                            <p:outputLabel id="olNovoNomePublico" value="Nome:" for="itNovoNomePublico"/>
                            <p:inputText id="itNovoNomePublico" value="#{publicoBean.nome}" required="true"
                                         requiredMessage="Digite o nome do público."/>

                            <p:outputLabel id="olNovoTipoPublico" for="somNovoTipoPublico" value="Tipo de público:"/>
                            <p:selectOneMenu id="somNovoTipoPublico" 
                                             value="#{publicoBean.tipoPublicoSelecionado}" 
                                             effect="fade" 
                                             converter="#{publicoBean.conversor}" 
                                             required="true" 
                                             requiredMessage="Selecione um tipo de público."
                                             > 
                                <f:selectItem itemLabel="Selecione um item..." itemValue=""/>
                                <f:selectItems value="#{publicoBean.lstMenuTipoPublico}" var="atual" itemLabel="#{atual.label}" itemValue="#{atual}"></f:selectItems>
                            </p:selectOneMenu>
                            <p:commandButton value="Cancelar" immediate="true" onclick="dlgNovo.hide()"/>
                            <p:commandButton id="cbNovoSalvar" value="Salvar" 
                                             actionListener="#{publicoBean.cadastrarPublico}"
                                             oncomplete="handleSalvo(xhr, status, args);" 
                                             update=":frmPublicos:dtPublicos :frmNovo :frmPublicos:gMessages"
                                             ajax="true"/>
                        </p:panelGrid>
                    </p:panel>
                </h:form>
            </p:dialog>

            <!-- Caixa de diálogo de exclusão -->
            <p:confirmDialog id="dialogoExcluir" message="Deseja realmente excluir?"
                             header="Excluir público" severity="alert" 
                             widgetVar="dlgExcluir">
                <h:form id="frmExcluir">
                    <p:commandButton id="cbExcluirCancelar" value="Cancelar" onclick="dlgExcluir.hide()" type="button" /> 
                    <p:commandButton id="cbExcluirContinuar" value="Continuar"
                                     update=":frmPublicos:dtPublicos :frmPublicos:gMessages" 
                                     oncomplete="dlgExcluir.hide()"
                                     actionListener="#{publicoBean.excluirPublico}"/>
                </h:form>
            </p:confirmDialog>
            <!-- Caixa de diálogo de edição -->
            <p:dialog id="dialogoEditar" widgetVar="dlgEditar" header="Editar público"
                      resizable="false" modal="true">
                <h:form id="frmEditar">
                    <p:panel id="pEditarPublico">
                        <p:messages id="mEditarMessages" redisplay="false" />
                        <p:panelGrid columns="2">
                            <p:outputLabel id="olEditarNomePublico" value="Nome:" for="itEditarNomePublico"/>
                            <p:inputText id="itEditarNomePublico" value="#{publicoBean.publicoSelecionado.nmePublico}" required="true"
                                         requiredMessage="Digite o nome do público."/>

                            <p:outputLabel id="olEditarTipoPublico" for="somEditarTipoPublico" value="Tipo de público:"/>
                            <p:selectOneMenu id="somEditarTipoPublico" 
                                             value="#{publicoBean.publicoSelecionado.tdTipoPublico}" 
                                             effect="fade" 
                                             converter="#{publicoBean.conversor}" 
                                             required="true"
                                             requiredMessage="Selecione um tipo de público."
                                             > 
                                <f:selectItem itemLabel="Selecione um item..." itemValue=""/>
                                <f:selectItems value="#{publicoBean.lstMenuTipoPublico}" 
                                               var="atual" 
                                               itemLabel="#{atual.label}" 
                                               itemValue="#{atual}"></f:selectItems>
                            </p:selectOneMenu>
                            <p:commandButton value="Cancelar" immediate="true" onclick="dlgEditar.hide()"/>
                            <p:commandButton id="cbEditarSalvar" value="Salvar" 
                                             actionListener="#{publicoBean.alterarPublico}"
                                             oncomplete="dlgEditar.hide();" 
                                             update=":frmPublicos:dtPublicos :frmEditar :frmPublicos:gMessages"/>
                        </p:panelGrid>
                    </p:panel>
                </h:form>
            </p:dialog>
        </p:fieldset>
    </f:view>
    <!-- Javascript responsável por fechar a caixa de diálogo ao cadastrar-->
    <script type="text/javascript">
        function handleSalvo(xhr, status, args){
            if(args.salvo){
                dlgNovo.hide();
            }
        }
        function handleEditar(xhr, status, args){
            if(args.salvo){
                dlgEditar.hide();
            }
        }
    </script>
</ui:define> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T19:49:06.973

尝试 p:resetInput。[http://www.primefaces.org/showcase-labs/ui/resetInput.jsf](http://www.primefaces.org/showcase-labs/ui/resetInput.jsf)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T23:44:38.130

尝试使用Primefaces 扩展中的**pe:resetInput ：** [http ://fractalsoft.net/primeext-showcase-mojarra/sections/resetInput/formElements.jsf](http://fractalsoft.net/primeext-showcase-mojarra/sections/resetInput/formElements.jsf)

```
<p:commandButton id="cbViewNovo" 
                                         value="Novo" type="button" 
                                         styleClass="cbViewNovo" 
                                         onclick="dlgNovo.show();"
                                         update=":dlgNovoPublico"
                                         process="@this">
                            <pe:resetInput target=":dlgNovoPublico"/>
                        </p:commandButton> 
```

# oracle - 从命令提示符使用 SQL Loader 加载数据时出错

> ID：12376515
> 
> 赞同：0
> 
> 时间：2012-09-11T19:22:44.453
> 
> 标签：oracle, sql-loader

我在使用 sql 加载程序加载一组 csv 数据时遇到问题。我有一个包含数据的控制文件，并且我已经在 oracle 10g 中创建了目标表。

当我运行以下命令时，

```
 C:\Users\lee\sqlloadertest> sqlldr scott/tiger@MYDB,CONTROL='Ad.ctl' 
```

它产生

```
SQL*Loader: Release 10.2.0.3.0 - Production on Tue Sep 11 17:46:43 2012

Copyright (c) 1982, 2005, Oracle.  All rights reserved.

Commit point reached - logical record count 52 
```

当我检查地址表时，它显示没有创建任何行，这意味着该表没有被填充

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T19:28:08.187

您可以尝试使用 log 选项运行 sql 加载程序并查看实际错误。

这是完整的格式。

```
C:\Users\lee\sqlloadertest> sqlldr scott/tiger@MYDB CONTROL='Ad.ctl' log=ad.log bad=ad.bad 
```

我的猜测是所有记录都因错误而失败，这通常是这种情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T19:28:19.033

尝试编辑`ctl`文件-

```
LOAD DATA
INFILE 'Masterpiece.csv' BADFILE 'Masterpiece.bad' DISCARDFILE 'Masterpiece.dis'    
APPEND
INTO TABLE ADDRESS
fields terminated by "," optionally enclosed by '"'
(ID, LOCATORDESIGNATOR, LOCATORNAME, LOCATOR, THOROUGHFARE, ADDRESSAREA) 
```

`CSV`文件（Win 格式）有时包含`"`字段。使用以下命令运行该`ctl`文件。

```
sqlldr scott/tiger@MYDB CONTROL='Ad.ctl' LOG='Ad.log' 
```

检查`bad`和`dis`文件是否有错误和丢弃的记录。

# import - 通过 db2Move 导入本地主机（derby 数据库）

> ID：12376516
> 
> 赞同：0
> 
> 时间：2012-09-11T19:22:48.790
> 
> 标签：import, db2, export

我使用以下内容导出信息：`db2move server1 export -sn theschema -tn table, table2, table3`

它出口良好。

我正在尝试将所有导出的信息导入 derby（本地）数据库。

我试过使用：

```
db2move C:/IBM/WCToolkitEE60/db/mall import 
```

问题是，它说：

```
Application code page not deteermined, using ANSI codepage 1252

Error: String 'C:/IBM/WCToolkitEE60/db/mall

**Error - Line Buffer overrun. 
```

有人知道我在这里做错了什么吗？数据库是 DB2

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T15:03:38.093

`db2move`是用于读取和写入 DB2 数据库的实用程序。不能使用 db2move 写入 Derby 数据库。

# windows - 如何知道蓝牙模块是否被Windows上的命令行激活？

> ID：12376517
> 
> 赞同：3
> 
> 时间：2012-09-11T19:22:48.630
> 
> 标签：windows, command-line, bluetooth

我正在寻找一种通过命令行了解蓝牙模块是否在 Windows 操作系统上激活的方法。

任何人都会知道shell命令或其他任何东西吗？

**编辑**

今天早上我在网上找到了这些对我有用的工具，但我仍在寻找没有第三方的解决方案：

*   [http://bluetoothinstaller.com/bluetooth-command-line-tools](http://bluetoothinstaller.com/bluetooth-command-line-tools)
*   [http://www.nirsoft.net/utils/bluetoothcl.html](http://www.nirsoft.net/utils/bluetoothcl.html)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T07:04:36.663

在 Windows 上，`ipconfig`如果模块被激活，一个简单的命令行会显示蓝牙适配器

```
Ethernet adapter Bluetooth Network Connection 2:

   Media State . . . . . . . . . . . : Media disconnected
   Connection-specific DNS Suffix  . : 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T14:05:32.830

[https://devblogs.microsoft.com/scripting/hey-scripting-guy-how-can-i-tell-if-a-computer-is-bluetooth-enabled/](https://devblogs.microsoft.com/scripting/hey-scripting-guy-how-can-i-tell-if-a-computer-is-bluetooth-enabled/)有几个脚本 应该可以使用。

请注意，这将检测到 Microsoft 蓝牙堆栈——我还没有使用（越来越少的）Widcomm、BlueSoleil 等堆栈对它们进行测试。还要注意他们检测到蓝牙支持的网络部分，但这并不重要。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T19:31:42.403

尝试使用

netsh wlan>

因为大多数适配器都带有蓝牙和 Wifi

# javascript - 谷歌地图点击一个div来触发信息窗口

> ID：12376520
> 
> 赞同：0
> 
> 时间：2012-09-11T19:22:58.410
> 
> 标签：javascript, google-maps

好的，我在这里尝试了很多示例，但我似乎无法让信息窗口正确附加元素。我敢肯定，这与我的结构方式有关，这是完全错误的。

我已经制作了自己的侧边栏，并且看着这个： http: [//koti.mbnet.fi/ojalesa/boundsbox/makemarker_sidebar.htm](http://koti.mbnet.fi/ojalesa/boundsbox/makemarker_sidebar.htm)它应该是可能的。但我看不出与我的代码有什么不同。

所以这是我的 AddMarker 和添加侧边栏功能

```
function addMarker(location, name, content) {

       console.log("Adding Marker: "+location)
        if (name === "Patient"){
            var patient_icon = '<?php echo base_url();?>images/Profile.png';
            var marker = new google.maps.Marker({
                position: location,
                map: map,
                title: name,
                icon: patient_icon
            });
        }else{
            var marker = new google.maps.Marker({
                position: location,
                map: map,
                title: name
            });
        }
        markersArray.push(marker);
        var info = new google.maps.InfoWindow ({content: content})
        google.maps.event.addListener(marker, 'click', function(){info.open(map,marker);});
        if (name != 'Patient'){
            sidebar(name, marker, content)
        }
    }

function sidebar(name, marker, content){
    name = name.replace(/\s+/g, '');
    $("<div id='"+name+"'class='even' onclick=' function(){google.maps.event.trigger("+marker+", \"click\")' >"+content+"</div>").appendTo($('#prov_list'));
} 
```

侧边栏元素上的 Onclick 功能什么都不做，我错过了什么？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T19:37:10.303

你可以尝试这样的事情，我认为问题出在字符串连接上。

这是创建 dom 元素的另一种方法：

```
 $("<div/>", {
            'id': name,
            'class': 'even',
            'html': content
        }).click(function(){
            google.maps.event.trigger(marker, 'click');
        }).appendTo($('#prov_list')); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T09:56:00.853

普通的旧 DHTML：

```
function sidebar(name, marker, content){
  var container = document.getElementById('prov_list');
  var myDiv = document.createElement('DIV');
  myDiv.onclick = function(){
    google.maps.event.trigger(marker, 'click');
  }
  myDiv.innerHTML =  content;
  container.appendChild(myDiv);
} 
```

# java - 在运行时和编译时计算字符串

> ID：12376530
> 
> 赞同：0
> 
> 时间：2012-09-11T19:23:53.807
> 
> 标签：java, literals

例如，我发现常量文字是在编译时计算的：`int a=10+20;`但是当我尝试使用时，`int b=10/0;`我发现它是在运行时计算的。你能告诉我为什么这个常量文字是在运行时计算的吗？谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T19:25:56.803

如果编译器可以保持与运行时相同的语义，则可以在编译时计算一个常量值。如果不是（例如，除以零的情况），那么它将计算推迟到运行时间。有关更多信息，请阅读[JLS 15.28](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.28)。

# mysql - 将一条记录转换为结果集的多条记录

> ID：12376532
> 
> 赞同：1
> 
> 时间：2012-09-11T19:23:56.677
> 
> 标签：mysql

我正在为直接连接到数据库服务器的服务器应用程序创建一个 MySQL 视图。我不喜欢应用程序架构的方式，所以我采用了自己的结构。最初，我打算使用这些数据来创建静态配置文件，但这不再是一种选择。

无论如何，我将使用来自不同表的几行来创建这个视图。表 A 和视图之间存在 1:many 关系，而表 B 之间存在 1:1 关系。正是 1:many 让我失望。

在表 A 中，我有以下内容：

```
+--------------------------------+
| 编号 | 姓名 | 超时 | 任何|
+--------------------------------+
| 1 | 主要 | 10 | 1 |
+--------------------------------+

```

在表 B 中，我有以下内容：

```
+-------------------+
| 编号 | a_id | 路线 |
+-------------------+
| 1 | 1 | 123 |
+-------------------+
| 2 | 1 | 321 |
+-------------------+

```

对于视图，两个表将像这样连接：

```
+--------------------------------------------------+
| 姓名 | 应用 | 数据 |
+--------------------------------------------------+
| 主要 | 超时 | 10 |
+--------------------------------------------------+
| 主要 | 拨号 | 1 |
+--------------------------------------------------+
| 主要 | 路线图 | 321 |
+--------------------------------------------------+
| 主要 | 路线图 | 123 |
+--------------------------------------------------+

```

我什至不确定是否有这个名字（或者是否有可能），但任何开始的帮助都会很棒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T19:47:41.127

您将使用 a`UNION`从第一个表中获取各个行，如下所示：

```
SELECT name, 'timeout' as app, timeout FROM A WHERE id = 1
UNION SELECT name, 'dialany' as app, `any` FROM A WHERE id = 1 
```

然后`UNION`在另一个表中：

```
UNION SELECT A.name, 'routeto' as app, B.data FROM A
    JOIN B ON A.id = B.a_id
    WHERE A.id = 1 
```

你应该有你想要的。

# sql - 如何对记录进行分组并汇总总计

> ID：12376534
> 
> 赞同：-3
> 
> 时间：2012-09-11T19:24:03.260
> 
> 标签：sql, sql-server

全部，

我在表中有以下记录。基于`timesheetID,jobId,Startime`我需要汇总每天在每项工作上花费的时间。有人可以建议最好的方法吗？

```
jobID startTime endTime totalTime timesheetID
4 2012-09-10 2012-09-10 1.466667 12300
4 2012-09-10 2012-09-10 1.466667 12300
4 2012-09-11 2012-09-11 5.116667 12300
12 2012-09-10 2012-09-10 1.466667 12300
12 2012-09-11 2012-09-11 0.3 12300
4 2012-09-10 2012-09-10 1.433333 12400
12 2012-09-11 2012-09-11 4.966667 12400
13 2012-09-10 2012-09-10 2.2 12400
12 2012-09-11 2012-09-11 0.3333333 12400
4 2012-09-11 2012-09-11 0.4833333 12400
4 2012-09-10 2012-09-10 2.016667 12600
13 2012-09-11 2012-09-11 4.866667 12600
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T19:31:21.880

您应该使用聚合函数`SUM()`和 a `GROUP BY`：

```
select timesheetid, jobid, starttime, sum(totaltime) TotTime
from yourtable
group by timesheetid, jobid, starttime 
```

# 请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/c4135/2)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T19:45:17.303

使用聚合`SUM`和`GROUP BY`. [在SQL Fiddle](http://sqlfiddle.com/#!3/77ea8/2)上尝试此代码

# java - build.xml 和 ant 出错

> ID：12376536
> 
> 赞同：0
> 
> 时间：2012-09-11T19:24:13.667
> 
> 标签：java, ant, compiler-errors

每次我尝试在我的 中启动目标时`build.xml`，都会收到错误消息。这是我的相关部分`build.xml`。

```
<!-- init -->
<target name="init" description="Inizializza lo script Ant">
    <echo message="====== INIZIO TARGET INIT PER: ${target} ..." />
    <tstamp/>
    <loadproperties srcFile="buildfiles/build.properties"/> <!-- Line 83 -->
    <!-- Controllo che se non viene passato nessun parametro target lo imposto
     ad un valore di default che corrisponde alla variabile default_target presente
     nel build.properties-->
    <condition property="target" value="${default_target}">
        <not>
            <isset property="target"/>
        </not>
    </condition>
    <echo message="target init dopo il test " />
    <!--contiene prop. specifiche per l'ambiente ${target} -->
    <loadproperties srcFile="buildfiles/${target}.properties" />

    <mkdir dir="${dist}/${target}"/>  <!-- contiene il tar -->
    <mkdir dir="${build}/archives"/>
    <mkdir dir="${build}/archives/${target}"/> <!-- contiene il jar-->
    <property environment="env"/>

    <echo message="***********************************" />
    <echo message="Il pacchetto sara' creato per : ${target}" />
    <echo message="JDK: ${env.JAVA_HOME}"/>
    <echo message="***********************************" />
</target> 
```

这是 Eclipse 控制台中的错误：

```
BUILD FAILED
C:\Users\amministratore\workspace_csi\servfci\build.xml:83: Unable to load file: sun.io.MalformedInputException 
```

我使用 java JDK 131.06。我该如何解决`build.xml`？

# c# - 如何将应用程序添加到文件夹上方的所有程序列表中？

> ID：12376539
> 
> 赞同：2
> 
> 时间：2012-09-11T19:24:26.817
> 
> 标签：c#, vb.net, visual-studio-2010, deployment

我想知道如何将应用程序快捷方式添加到开始菜单中的所有程序列表中，而不是在文件夹中，而是在文件夹上方。它在哪里显示应用程序快捷方式，而不是文件夹。我将使用 clickonce 来部署我的应用程序，它是否内置了此功能？

还有一种方法可以在您第一次打开开始菜单时自动将应用程序添加到收藏夹菜单中吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T19:29:11.200

将快捷方式添加到以下目录将在文件夹上方的程序列表中显示该程序：

```
C:\Users\YOURNAME\AppData\Roaming\Microsoft\Windows\Start Menu\Programs 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T19:29:48.090

您可以阅读第一篇文章 - 显示您拥有所有步骤的视频

[链接： http:](http://robindotnet.wordpress.com/2009/04/07/creating-a-desktop-shortcut-for-a-click-once-application/) //robindotnet.wordpress.com/2009/04/07/creating-a-desktop-shortcut-for-a-click-once-application/

# wpf - 我可以使用绑定来限制字符串吗？

> ID：12376540
> 
> 赞同：0
> 
> 时间：2012-09-11T19:24:45.063
> 
> 标签：wpf, string, binding, format, limit

我有这个绑定

```
 <TextBlock HorizontalAlignment="Center" Text="{Binding Client.Name}" Grid.Column="1"/> 
```

现在我想限制字符串绑定的大小示例：如果 Client.Name 有 50 个字符，我想只显示 25 个字符

我该如何限制呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T19:34:41.967

您可以使用值转换器尝试此操作：

像这样的东西（这可能需要调整，因为我远离我的开发机器，所以这是来自内存）。

```
public class StringLengthConverter : IValueConverter
{
    public int Length { get; set; }

    public object Convert(object value, Type targetType, 
        object parameter, CultureInfo culture)
    {
        return (string)value.SubString(0, this.Length);
    }

    public object ConvertBack(object value, Type targetType, 
        object parameter, CultureInfo culture)
    {
        throw new NotImplementedException();
    }
} 
```

另一种解决方案是直接从 viewModel 返回所需长度的字符串，例如，如果您有一个名称为 30 个字符的客户端，您的 viewModel 可以只返回前 25 个字符：

```
public class ClientViewModel
{
    private string _name;

    public string Name
    {
        get 
        { 
            return _name.SubString(0, 25);
            // Notify property changed....
        }
    }
} 
```

# ajax - remoteFunction grails

> ID：12376542
> 
> 赞同：0
> 
> 时间：2012-09-11T19:24:59.720
> 
> 标签：ajax, grails

嗨，我有一个 textArea，我已经向它添加了一个 onkeyup 事件。当事件被触发时，我想通过输入 textArea 并在 javascript 函数中对其进行操作来更新另一个元素。这是我的 textArea 标签：

```
<g:textArea name="translation" id="2" cols="40" rows="5" value="${domainInstance?.translation}"
                                    onkeyup="${remoteFunction(
                                    controller: 'domain',
                                    action: 'ajaxChangeTranslation',
                                    params:'\'text=\'+this.value',
                                    onComplete:'updateEntry(e)')}" /> 
```

这是我的存根 javascript 函数：

```
<g:javascript>

        function updateEntry(e){
            alert("Hi");
        }
    </g:javascript> 
```

我的 javascript 函数永远不会被调用。当我在 textArea 中输入内容时，我从未看到警报。如果我在函数之外放置警报，则会显示警报。为什么我的 javascript 函数没有被调用。当我使用 chrome 调试器运行它时，我没有收到任何错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T00:45:14.593

尝试这个：

```
<g:textArea name="translation" id="2" cols="40" rows="5" value="${domainInstance?.translation}"
                                onkeyup="${remoteFunction(
                                controller: 'domain',
                                action: 'ajaxChangeTranslation',
                                params:'\'text=\'+this.value',
                                onComplete :'updateEntry(XMLHttpRequest,textStatus)')}" /> 
```

# python - 在合并期间在 Git 中集成缩进和内容更改：最佳实践？

> ID：12376550
> 
> 赞同：10
> 
> 时间：2012-09-11T19:25:40.477
> 
> 标签：python, git, matlab, merge, indentation

我正在使用 Git 来跟踪一些 matlab 代码。一个玩具例子最能说明这个问题。到目前为止的项目看起来像这样。

```
 C
   /
A--
   \
    B 
```

A的内容是`x=5`

我们提交 C，其中行更改为`x=6`

然后我们提交 B，我们的内容如下

```
if flag==1
    x=5
end 
```

如果我们尝试与项目目标合并，看起来像

```
 C
   / \
A--   D
   \ /
    B 
```

与 D 中的合并结果，我们会遇到冲突，因为两者的主线都已更改（在 B 中添加了缩进，在 C 中将 5 更改为 6）。

是否有一种最佳实践方法可以集成来自一个分支的缩进更改和来自另一个分支的内容更改以获得合并结果？

我已经阅读了[https://stackoverflow.com/a/5262473/288545](https://stackoverflow.com/a/5262473/288545)中的一种策略，虽然这可以避免冲突，但它会丢弃缩进以支持内容更改（这是一种改进，但仍然使更难阅读代码）。

我想我可以在编写代码时吸收它而不改变缩进。这使得它的可读性降低，但在 matlab 中并不是什么大问题。然而，在 python 中，缩进真的很重要，那么 python 人如何处理它呢？如果我们稍后将大块代码更改为控制结构内部，这会变得更加丑陋，因此差异涉及很多行并使合并冲突成为一个非常令人头疼的问题。

是否有一种合并策略可以分别处理间距变化和内容变化，然后将它们整合起来？我希望合并的结果是

```
if flag==1
    x=6
end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T23:55:10.543

解决问题的关键是将空白清理和函数重写视为单独的提交。

作为一个进行大量分支集成的人，我可以诚实地说，对于集成商来说最烦人的两件事是：1）喜欢重新格式化他们没有编写的文件或他们没有重写的函数的编码人员，以及 2）重新格式化的 IDE只需打开并保存整个文件。当然，在这两种情况下文件都更具可读性，但它完全违背了版本控制的要点：提交应该智能地调整大小、构造和审查。他们的命令应该有意义。厨房水槽提交会产生无用的历史，而历史应该只是有用的。

这种哲学意味着“不要在不属于它们的提交中转储空白更改。” 如果你正在重写 touch 函数，当然，改进间距。否则将其留给自己的提交，并确保处理该文件的其他人知道空白更改即将到来。这将在集成时为您省去麻烦。

此外，您可以使用 git 的 stock pre-commit 钩子避免意外的空白错误（尾随空格、空格后的制表符等）。在您的存储库中发出此命令以进行设置：

```
mv .git/hooks/pre-commit.sample .git/hooks/pre-commit 
```

它或多或少有问题`git diff --check`，这对于检测这些类型的问题也非常有用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-12T10:00:46.150

一些差异工具比其他工具更好。我使用[KDiff3](http://kdiff3.sourceforge.net/)，并将其设置为使用[`git mergetool`](http://www.kernel.org/pub/software/scm/git/docs/git-mergetool.html). 它仍然不完美，但它通常可以检测到您描述的那种合并并自动产生合理的合并。

# linux - 用于复制文件和文件夹并执行命令的简单 shell 脚本

> ID：12376551
> 
> 赞同：8
> 
> 时间：2012-09-11T19:25:41.600
> 
> 标签：linux, shell, ubuntu

我之前没有写过任何 Shell 脚本，但是我必须编写一个简单的 shell 脚本来执行以下操作；

我会将所有必需的文件保存在一个文件夹中，并将其与这个 shell 脚本捆绑为一个 tar 文件；所以当用户运行shell脚本时，它需要将各自的文件复制到各自的目的地。

复制的执行如下：

1.  将 plugin.so 文件复制到 /usrlib/mozilla/plugins/

2.  将 .so 库文件复制到 /usr/local/lib/

3.  将一些头文件目录（文件夹）复制到 /usr/local/include/

最后，需要做ldconfig。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-11T19:32:12.543

基本上，您可以在脚本中添加您能够在终端本身内键入的任何命令。然后，您有两个执行它的选项：

1.  从终端执行它`sh your_script.sh`。使用此解决方案，您甚至不需要授予它执行权限。
2.  授予它执行权限并使用`./your_script.sh`.

对于第二种解决方案，您必须以所谓的 a 开头文件`shebang`。所以你的脚本看起来像：

```
#!/bin/sh

cp path/to/source path/to/destination
cp path/to/source path/to/destination
cp path/to/source path/to/destination

ldconfig

echo "Done!" 
```

没有其他的。只需一个接一个地编写命令。第一行是所谓的`shebang`，告诉 shell 脚本使用哪个解释器。

注意：shell 脚本的扩展名通常是`.sh`，但您实际上可以随意命名文件。扩展完全没有意义。

好脚本！

# matlab - 维特比解码器 GPU

> ID：12376552
> 
> 赞同：1
> 
> 时间：2012-09-11T19:25:47.397
> 
> 标签：matlab, gpgpu, decoding, convolution

一段时间以来，我一直致力于移植 Viterbi Most Likelyhood Decoding 问题。在搜索时我才知道，MATLAB 使用他们的通信工具箱提供了一个 GPU 加速的 Viterbi 解码器模拟。

我无法访问 MATLAB，也找不到任何描述他们使用 GPU 加速 MATLAB 代码实现的加速的论文。有人可以指出一些资源，我可以获得一些基准来比较我的实现吗？

# wpf - 如何为异步 UI 任务添加取消支持？

> ID：12376553
> 
> 赞同：1
> 
> 时间：2012-09-11T19:25:53.450
> 
> 标签：wpf, silverlight, task-parallel-library, winrt-xaml, async-await

我正在考虑为[AsyncUI](http://asyncui.codeplex.com/)和[WinRT XAML Toolkit](http://bit.ly/WinRTXamlToolkit)库中的可等待扩展方法添加取消支持。似乎基本 Task 类没有内置的 Cancel() 方法或事件，并且依赖于我的任务需要定期检查的取消令牌。我认为在我的 UI 场景中没有意义，因为我的任务是使用 TaskCompletionSource 生成的，我想取消 UI 线程上的任务以响应事件，而不是在线程池线程上运行循环并检查令牌.

当 UI 事件发生时，我的任务当前完成 - 例如故事板完成或单击按钮，所以如果我想支持取消 - 我需要通过取消订阅事件和执行其他清理（如停止动画）来响应取消请求。

我正在考虑创建某种 CancellableUITask 基类而不是使用 TaskCompletionSource，因此我可以公开我的任务使用者可以调用的 Cancel() 方法（例如，停止等待的动画以响应按钮单击）等等就像我的故事板等待任务可以覆盖以执行清理的虚拟 OnCancellationRequested() 方法。

是否有意义？完成我在这里描述的内容的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T20:13:59.433

您的任务不需要定期检查是否取消 - 这只是最常见的做事方式。如果你的任务是事件驱动的，那么你可以注册一个处理程序`CancellationToken`，当它被取消时将被调用。见[`CancellationToken.Register`](http://msdn.microsoft.com/en-us/library/dd321953.aspx)。

所以你的代码可能看起来像这样：

```
public Task DoSomethingAsync(CancellationToken cancellationToken = default(CancellationToken))
{
    var tcs = new TaskCompletionSource();

    if (cancellationToken.CanBeCanceled)
    {
        // register for notification of cancellation
        cancellationToken.Register(...);
    }

    // set up other handlers and what-not

    return tcs.Task;
} 
```

# php - Drupal 的“规则”模块——使用表单域的语法

> ID：12376556
> 
> 赞同：0
> 
> 时间：2012-09-11T19:25:56.367
> 
> 标签：php, drupal

我正在尝试使用规则模块通过 php 向我发送一封电子邮件，其中包含一些在 Webform 中提交的信息。我尝试了多种不同的方法将提交的字段放入变量中，因此我可以将其包含在 $message 中，但没有任何效果。有人知道我错过了什么吗？

我试过了：

```
$message .= $data[components][honoree_name];
$message .= $data[components][honoree_name][0];
$message .= $data[submitted][honoree_name];
$message .= printr($data[components][honoree_name][0]); 
```

还有一堆其他的变化。在这种情况下，我似乎找不到任何明确的示例，也找不到任何逐步使用规则的方法。

任何帮助将不胜感激。谢谢！

（我正在使用 Drupal 6，顺便说一句！）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T18:04:28.820

缺少“[值]”部分：

```
$message .= '<pre>' . print_r($data[components][honoree_name][value][0], true) . '</pre>'; 
```

就是我要找的！

# iphone - 如何在 UITableViewCell 中正确定位 UIImageView？

> ID：12376561
> 
> 赞同：0
> 
> 时间：2012-09-11T19:26:04.563
> 
> 标签：iphone, ios, uitableview

我有一个从笔尖加载的自定义 UITableViewCell 。其中有三个 UIImageView 视图。在该`-(UITableViewCell*) tableView:(UITableView*) cellForRowAtIndexPath:(NSIndexPath*)indexPath`方法中，我检查每一行的属性并确定每一行是否可见。如果它们不可见，我会移动图像的 x 位置，以便没有空格。我在用：

```
cell.imageView1.hidden = YES;
cell.imageView2.hidden = YES;
cell.imageView3.hidden = YES;

int x = 0;

CGRect frame1 = cell.imageView1.frame;

if (property1)
{
    cell.imageView1.hidden = NO;
    frame1.origin.x = x;
    x += SPACING;
}

CGRect frame2 = cell.imageView2.frame;

if (property2)
{
    cell.imageView2.hidden = NO;
    frame2.origin.x = x;
    x += SPACING;
}

// etc... 
```

出于某种原因，最初显示表格时，图像位于错误的位置，但如果我上下滚动以使单元格不显示然后再次显示，则图像位置会转到正确的位置。这是什么原因造成的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T19:37:27.440

我不确定我是否理解你的代码。`setNeedsLayout`但是您可以在更改帧后尝试调用。

```
[cell setNeedsLayout] 
```

该方法表示该视图需要在下一次渲染时进行布局。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T21:54:28.293

感谢 Felipe 为我指出了正确的解决方案。在我的 UITableViewCell 子类中，我覆盖了 layoutSubviews 方法以根据它们的状态正确布局图像。

# java - 发布独立的 java web 服务

> ID：12376562
> 
> 赞同：0
> 
> 时间：2012-09-11T19:26:09.823
> 
> 标签：java

我创建了一个独立的 java web 服务。我可以从命令行发布它（使用 java 命令）。问题是当我关闭命令窗口时服务停止运行。我怎样才能让这项服务始终运行。一个建议是从 build.xml 执行发布服务。谁能告诉我如何修改 build.xml 来发布服务并让它运行起来。

# c# - .Net Remoting 在控制台应用程序中工作，但在窗口服务中不起作用

> ID：12376564
> 
> 赞同：1
> 
> 时间：2012-09-11T19:26:10.250
> 
> 标签：c#, asp.net, .net, windows-services, remoting

我有一个 .Net Remoting 可以在控制台应用程序中工作，但不能在 Window 服务中工作。它返回我空类型。我不知道这里有什么问题

```
static void TicketServer()
{
    System.Diagnostics.Debugger.Break();
    //Console.WriteLine("Ticket Server started...");

    TcpChannel tcpChannel = new TcpChannel(9988);
    ChannelServices.RegisterChannel(tcpChannel, true);

    Type commonInterfaceType = Type.GetType("WindowsService.MovieTicket");

    RemotingConfiguration.RegisterWellKnownServiceType(commonInterfaceType,
    "MovieTicketBooking", WellKnownObjectMode.SingleCall);
} 
```

我在 Windows 服务中得到“commonInterfaceType”空值，而在控制台应用程序中工作正常。当我将应用程序从控制台转移到 Windows 服务时，我还更改了命名空间

我找到了问题，但需要知道为什么会在 Windows 服务中发生这种情况，例如在图像中突出显示的行在控制台应用程序中工作正常，但在 Windows 服务中返回 null。

[http://desmond.imageshack.us/Himg339/scaled.php?server=339&filename=testimg.png&res=landing](http://desmond.imageshack.us/Himg339/scaled.php?server=339&filename=testimg.png&res=landing)

如果我没记错的话，我认为这是微软的错误......谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-05-12T16:26:08.507

在 ofTicketServer() 方法的主体之外设置 tcpChannel 变量。正在发生的事情是在方法返回后通道正在被释放。在控制台应用程序中，我们使用 Console 类的 ReadLine() 方法暂停该方法，该方法允许通道继续侦听并且在按下键之前不会被释放，但这与 Windows 服务不同。

# ruby-on-rails - 单选按钮选择

> ID：12376567
> 
> 赞同：3
> 
> 时间：2012-09-11T19:26:17.563
> 
> 标签：ruby-on-rails, haml

使用 Haml 3.1.4（分离的 Sally）

我很好奇我做错了什么。为什么这不显示选择的第一个单选按钮？

顺便说一句，在执行时，@organization.pdf_size 确实等于'letter_size' 我实际上希望根据@organization.pdf_size 选择单选按钮，但是我只是想让一个硬编码的选择在 atm 工作。tyfyt

```
= form_for [@organization] do |f|

  Select a PDF page size

  = label_tag 'Letter (8.5x11)'

  = f.radio_button :pdf_size, id: 'letter_size', :checked => true

  = label_tag 'Half Legal (8.5x7)'

  = f.radio_button :pdf_size, id: 'half_legal_size'

  = f.submit 'Save', class: 'button' 
```

我还以这种方式尝试了我在 stackoverflow 上看到的其他示例：

```
 = f.radio_button :pdf_size, id: 'letter_size', :checked => @organization.pdf_size == 'letter_size' ? true : nil 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-11T19:41:06.450

尝试这个：

```
= f.radio_button :pdf_size, "value", id: 'letter_size', :checked => true 
```

如此[处](http://api.rubyonrails.org/classes/ActionView/Helpers/FormHelper.html#method-i-radio_button)所述，单选按钮在选项之前需要一个值。

请记住更改`"value"`为对您的应用程序有意义的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T19:30:53.610

尝试将此附加到您的链接：

```
input_html: {checked: true} 
```

# sql - oracle plsql order by on Date Of Birth 列不起作用

> ID：12376569
> 
> 赞同：0
> 
> 时间：2012-09-11T19:26:31.490
> 
> 标签：sql, oracle

我有一张名为 datetest 的表

```
CREATE TABLE "DATETEST"."DATETEST" 
   ("FNAME" VARCHAR2(20 BYTE), 
"DOB" DATE, 
"STAFFNO" NUMBER NOT NULL ENABLE, 
 CONSTRAINT "DATETEST_PK" PRIMARY KEY ("STAFFNO")); 
```

有以下数据

```
INSERT INTO "DATETEST"."DATETEST" (FNAME, DOB, STAFFNO) VALUES ('John', TO_DATE('01-   OCT-45', 'DD-MON-RR'), '1')
INSERT INTO "DATETEST"."DATETEST" (FNAME, DOB, STAFFNO) VALUES ('Ann', TO_DATE('01-NOV-60', 'DD-MON-RR'), '2')
INSERT INTO "DATETEST"."DATETEST" (FNAME, DOB, STAFFNO) VALUES ('David', TO_DATE('24-MAR-58', 'DD-MON-RR'), '3')
INSERT INTO "DATETEST"."DATETEST" (FNAME, DOB, STAFFNO) VALUES ('Mary', TO_DATE('19-FEB-70', 'DD-MON-RR'), '4')
INSERT INTO "DATETEST"."DATETEST" (FNAME, DOB, STAFFNO) VALUES ('Susan', TO_DATE('03-JUN-40', 'DD-MON-RR'), '5')
INSERT INTO "DATETEST"."DATETEST" (FNAME, DOB, STAFFNO) VALUES ('Julie', TO_DATE('13-JUN-65', 'DD-MON-RR'), '6') 
```

当我执行以下查询时

```
select * from datatest order by dob desc 
```

我得到以下结果

```
FNAME                DOB       STAFFNO
-------------------- --------- -------
John                 01-OCT-45       1 
Susan                03-JUN-40       5 
Mary                 19-FEB-70       4 
Julie                13-JUN-65       6 
Ann                  01-NOV-60       2 
David                24-MAR-58       3 
```

我无法弄清楚如何获得正确的订单。如何查询正确的订单？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-11T19:31:22.393

您的数据按时间顺序排列。问题是您使用 'DD-MM-RRRR' 而不是 'DD-MM-YY' 进行转换。

“RRRR”版本使用特定规则来获得世纪。因此，您的第一行是 2045-10-01，而不是 1945-20-01。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-11T19:30:18.307

使用 YYYY 而不是 RR 进行插入，因为 RR 仅对低于 1950 的日期添加 1900，而对高于 1950 的日期添加 2000。

这里是原始文档文本

![在此处输入图像描述](../Images/0aa9188cf3eb51e6409d93f2556a8d03.png)

来源：Oracle® 数据库 SQL 语言参考 11g 第 2 版 (11.2) E26088-01

看看[SQL Fiddle](http://sqlfiddle.com/#!4/f52c5/1)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-11T19:32:23.797

要查看存储的实际日期，请使用以下格式..

```
SQL> select fname,
  2         to_char(dob,'dd-mon-yyyy') dob,
  3         staffno
  4    from datetest
  5    order by dob desc;

FNAME                DOB            STAFFNO
-------------------- ----------- ----------
David                24-mar-1958          3
Mary                 19-feb-1970          4
Julie                13-jun-1965          6
Susan                03-jun-2040          5
John                 01-oct-2045          1
Ann                  01-nov-1960          2 
```

这应该可以帮助您看到“问题”。正如 Gordon 指出的 (+1) ，这是因为 Oracle 在计算实际日期时解释“RR”的方式。

# ruby-on-rails - 查找 FB 好友和 GMail 联系人

> ID：12376573
> 
> 赞同：0
> 
> 时间：2012-09-11T19:26:42.683
> 
> 标签：ruby-on-rails, facebook, gmail

我是一名 RoR 新手，正在构建一个允许用户注册/链接他们的 FB 和/或 GMail 帐户的应用程序。

例如，User1 使用他们的 FB 和 Gmail 帐户注册/链接。注册后，User1 推荐 Sushi 作为他们最喜欢的一餐。

User2 使用他们的 FB 帐户注册，并且恰好也是 User1 的朋友（通过 FB）。然后，用户 2 想查看在应用程序中注册的人最喜欢的饭菜是什么，并且只有他们在 FB 中连接的那些人。

User3 使用他们的 Gmail 帐户注册，并且恰好在 User1 的联系人列表中。然后，用户 3 想要查看在应用程序中注册的人最喜欢的饭菜是什么，并且只有那些在 Gmail 联系人中连接的人。

在阅读 FB/Google API 文档时，我发现我可以查询用户的朋友和/或联系人，但是从程序/性能的角度来看，我很难理解如何完成这一点，尤其是用户数量成长。我不想将每一个关系都存储在我的数据库中，所以我正在寻找有关如何完成此操作的任何建议/示例。

感谢您的时间和帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T17:07:18.460

这不应该是一个问题。

一旦您的用户注册了您的应用程序。您可以使用例如 Facebook FQL API 来检查哪些 FB 用户朋友已在您的应用程序中注册。

Spotify 不会经常更新您的好友列表。如果您在 NOSQL 数据库中遇到性能问题，您可以偶尔缓存他/她的好友列表，因为您已经从 Facebook API 获取 JSON。

# c# - 特定于给定路径的可执行文件实例的隐藏设置文件

> ID：12376575
> 
> 赞同：0
> 
> 时间：2012-09-11T19:26:57.237
> 
> 标签：c#, winforms, embedded-resource, application-settings

不确定我有这个问题的最佳标题。随意修改或建议更改，我将自己进行编辑。

我有一个独立的可执行文件，它想要维护一个特定于应用程序的 settings.bin 文件。有两种明显的方法可以做到这一点：

**1.从可执行文件所在的本地目录创建/读取文件**

*   正面：用户可以将exe和bin文件复制到多个目录，并且有不同的settings.bin文件的多个版本。
*   否定：我不想污染可执行目录。

**2\. 从本地应用程序数据文件夹等“隐藏”位置创建/读取文件。**

*   正：不污染可执行目录。
*   否定：settings.bin 文件将在可执行文件的任何实例之间共享，无论它位于何处。

**我不想做这些解决方案中的任何一个，因为它们都不能满足我的两个要求，它们是：**

*   **不要污染可执行目录（IE：不要创建本地文件）。**
*   **settings.bin 文件根据可执行文件的位置而有所不同。**

有什么想法吗？我想将 settings.bin 文件作为资源嵌入，但很快了解到您不能写入嵌入式资源。我完全没主意了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T20:06:33.213

使用选项 2 并稍作修改，取消您的负面观点（未共享）

你必须有一些东西可以区分 exe 文件。

如果所有人都驻留在不同的路径中，我将执行以下操作：

1）哈希可执行文件的位置（路径的md5）

2）用哈希在appdata中创建一个目录

3）在那里存储我的文件

否则，与其他流程相比，我会尝试列举自己：

1）开始检查应用程序数据时。

2) 尝试锁定文件写入：[App Data]\1\sem.oi

3) 如果尝试锁定文件写入失败：[App Data]\2\sem.oi

使用您能够在其中打开文件的目录中的设置

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T19:33:17.783

好吧，您可以像序列`key-value`对一样将配置数据定义到应用程序资源文件中。通过这种方式，信息将被嵌入到您的二进制文件中，因此希望您能满足您的两个要求。

*   没有专门为配置创建的文件
*   并且每个文件都可以有自己的内置配置，这意味着在这种情况下您必须进行不同的构建。

不创建文件怎么样，但在本地机器上根据`exe`路径进行灵活配置，我认为这几乎是不可能的，如果不是通过一些网络访问和一些奇怪的（在我看来）架构。

如果你能解释*为什么*你有这些要求，可能会给出更合适的答案，以防现在不是这样。

# php - PHP Foreach 循环速度

> ID：12376577
> 
> 赞同：0
> 
> 时间：2012-09-11T19:27:01.553
> 
> 标签：php, loops

我正在尝试获取 40,000 个项目的列表并为每个项目运行一个 json 请求。这个过程非常慢，我怀疑这是因为每个 json 请求在下一个请求开始之前就完成了。

```
$result = mysql_query("SELECT * FROM $tableName");

while($row = mysql_fetch_array($result))
{
 checkRank($row['Domain']);
} 
```

checkRank 运行的结果是：

```
$json = file_get_contents($jsonurl,0,null,null); 
```

我想我可以一次运行 10 个 checkRanks 来加快这个过程？还有其他想法/建议吗？

**更新：**

例如，这个循环在 27 秒内通过我的数组。

```
for ($i=0; $i<=100; $i++) {
checkRank($domains[$i]);
$i++;
checkRank($domains[$i]);
$i++;
checkRank($domains[$i]);
$i++;
checkRank($domains[$i]);
$i++;
checkRank($domains[$i]);
$i++;
echo "checking " . $i . "<br/>"; 
```

}

下面的循环使用相同的数组需要 40 多秒。

```
for ($i=0; $i<=100; $i++) {
checkRank($domains[$i]);
echo "checking " . $i . "<br/>"; 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T21:54:02.053

[http://www.phpied.com/simultaneuos-http-requests-in-php-with-curl/](http://www.phpied.com/simultaneuos-http-requests-in-php-with-curl/)

这似乎是加快处理速度的好方法。感谢所有输入的家伙。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T19:31:30.730

除非您还没有提到其他内容，否则最好的方法是执行一个 JSON 请求并将您的项目传递给它，然后返回相同数量的结果。这样，您可以最大限度地减少服务器响应时间。我不确定您是否要发送 40,000 件物品，您可能希望将其分成两部分，但您可以稍后进行测试。

所以你 checkRank() 看起来像

```
function  checkRank($domainsArray) {
$json = file_get_contents($jsonurl,$domainsArray);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-11T19:32:24.460

不确定这是否会有很大帮助，因为我不使用 PHP，但我确实找到了这个。

[如何在 PHP 应用程序中使用多线程](https://stackoverflow.com/q/70855/1157215)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-13T18:30:02.233

...很遗憾，我今天在 Stack Overflow 上读到 PHP 不支持线程，因为它需要对语言进行根本性更改...

[https://github.com/krakjoe/pthreads](https://github.com/krakjoe/pthreads)

# javascript - javascript移动跨浏览器确定用户是否滚动到页面底部

> ID：12376578
> 
> 赞同：0
> 
> 时间：2012-09-11T19:27:07.017
> 
> 标签：javascript, android, iphone, mobile

您好，根据我的问题位于：

[javascript跨浏览器确定用户是否滚动到页面底部](https://stackoverflow.com/questions/12357728/javascript-crossbrowser-determine-if-user-scrolld-to-the-bottom-of-page)

我怎么能把它写成移动兼容？

```
window.onscroll = function () {
if (document.body.scrollHeight == (document.body.scrollTop + document.body.clientHeight)) {
            alert("ok");
        }
    } 
```

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T19:59:58.540

我不知道这是否有帮助。

正如你所说你可以获得当前的scrollHeight，如果你在页面底部放置一个锚点会发生什么？并使用脚本作为

```
var curr = document.body.scrollHeight;
document.location.href = "#bottompage";
if(curr == document.body.scrollHeight) {
  alert("Bottom of page");
} 
```

# css - 如何在 IE 中使 css 背景图像成为流体图像

> ID：12376581
> 
> 赞同：2
> 
> 时间：2012-09-11T19:27:25.870
> 
> 标签：css, internet-explorer

我在 IE9 中进行了此操作，但后来试图在 IE8 和 7 中弄清楚它却搞砸了。我在这里和其他地方搜索过，但找不到解决我问题的正确方法。

每当浏览器窗口的大小调整为小于其最大宽度（流体图像）时，我都会尝试在 div 中缩小图像。我假设问题是我正在使用旧版浏览器不支持的 CSS3 属性（背景大小：100%；）。如何使它与 IE9、8、7 兼容？

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 4.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>Fluid Image</title>
<style type="text/css">

img {
    max-width: 90%;
    height: auto;
}

.imageContainer {
    width: 900px;
    max-width: 90%;
    margin: 0 auto;
    background-image: url(img/fluidImage.jpg);
    background-position: 0 -450px;
    background-repeat: no-repeat;
    background-size: 100%;
    height: 650px;
}

</style>

</head>
<body>
<div class="imageContainer"></div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T20:20:24.713

您可以为此使用一个过滤器：

[http://www.pziecina.com/design/turorial_demos/resize_background.php](http://www.pziecina.com/design/turorial_demos/resize_background.php)

对于 IE8 之前的使用 -

```
filter:progid:DXImageTransform.Microsoft.AlphaImageLoader(src='linkToImage.jpg',sizingMethod='scale'); 
```

对于 IE8 使用：

```
-ms-filter:"progid:DXImageTransform.Microsoft.AlphaImageLoader(src='linkToImage.jpg',sizingMethod='scale')"; 
```

使用 sizingMethod= 'scale' 意味着即使 IE 也会将背景图片缩放到浏览器窗口的大小。

# c++ - 从 char 构造字符串流

> ID：12376584
> 
> 赞同：0
> 
> 时间：2012-09-11T19:27:41.470
> 
> 标签：c++, string, char, digits

我实现了以下代码，它完成了它应该做的事情，但我认为它可以/应该被简化。

基本上，我需要创建一个数字向量，每个数字都包含在 testString 中找到的一个数字。有什么方法可以直接从 char 构造字符串流（即 testString[i]）？如果可以以 C++ 方式完成，我宁愿不涉及 C 风格的函数，比如 atoi。

```
#include <iostream>
#include <string>
#include <sstream>
#include <vector>

int main ()
{
    std::string testString = "abc123.bla";
    std::string prefix = "abc";

    std::vector<unsigned short> digits;

    if (0 == testString.find(prefix))
    {
        for (size_t i = prefix.size(); i < testString.find("."); ++i)
        {
            int digit;
            std::stringstream digitStream;
            digitStream << testString[i];
            digitStream >> digit;
            digits.emplace_back(digit);
        }
    }

    for (std::vector<unsigned short>::iterator digit = digits.begin(); digit < digits.end(); ++digit)
    {
        std::cout << *digit << std::endl;
    }

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T20:28:04.230

见[我原来的评论](https://stackoverflow.com/questions/12376584/construct-stringstream-from-char#comment16625032_12376584)；`'0'`从每个数字字符中减去。

```
#include <string>
#include <vector>
#include <algorithm>
#include <iterator>
#include <cctype>
#include <functional>
#include <iostream>

...

std::string input = "abc123.bla";
std::string prefix = "abc";
std::vector<unsigned short> digits;

auto input_b = input.begin();
std::copy_if(input_b, std::find(input_b, input.end(), '.'),
    std::back_inserter(digits), (int (*)(int)) std::isdigit);

auto digits_b = digits.begin();
auto digits_e = digits.end();
std::transform(digits_b, digits_e, digits_b,
    std::bind2nd(std::minus<unsigned short>(), '0'));
std::copy(digits_b, digits_e,
    std::ostream_iterator<unsigned short>(std::cout, "\n")); 
```

如果您不需要`digits`包含中间数字值，它甚至可以缩短。

```
std::transform(digits.begin(), digits.end(),
    std::ostream_iterator<unsigned short>(std::cout, "\n"),
    std::bind2nd(std::minus<unsigned short>(), '0')); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T19:31:24.047

假设`testString[i]`介于`'0'`和之间`'9'`，只需执行以下操作：

```
digits.emplace_back(testString[i] - '0'); 
```

# scala - 无法绑定到 Akka Actor 系统的远程 IP 地址

> ID：12376585
> 
> 赞同：0
> 
> 时间：2012-09-11T19:27:42.477
> 
> 标签：scala, network-programming, playframework, akka, remote-actors

我在初始化远程 IP 地址上的参与者系统时遇到了麻烦。我正在使用 akka 演员和戏剧！框架。代码和远程参与者系统都在远程机架空间服务器上。当我尝试在另一台服务器上创建远程参与者系统时，它无法绑定到该 IP 地址。我认为这不是网络或防火墙问题，因为 Rackspace 说他们打开了服务器之间的所有连接。这是我收到的错误消息：

```
[error] application - 

! Internal server error, for request [POST /payment/] ->

java.lang.ExceptionInInitializerError: null
    at     Routes$$anonfun$routes$1$$anonfun$apply$3$$anonfun$apply$4.apply(routes_routing.scala:44) ~[classes/:na]
    at Routes$$anonfun$routes$1$$anonfun$apply$3$$anonfun$apply$4.apply(routes_routing.scala:44) ~[classes/:na]
    at play.core.Router$HandlerInvoker$$anon$3.call(Router.scala:1080) ~[play_2.9.1-2.0.1.jar:2.0.1]
    at play.core.Router$Routes$class.invokeHandler(Router.scala:1255) ~[play_2.9.1-2.0.1.jar:2.0.1]
    at Routes$.invokeHandler(routes_routing.scala:14) ~[classes/:na]
    at Routes$$anonfun$routes$1$$anonfun$apply$3.apply(routes_routing.scala:44) ~[classes/:na]

Caused by: org.jboss.netty.channel.ChannelException: Failed to bind to: /172.17.100.232:2554
    at org.jboss.netty.bootstrap.ServerBootstrap.bind(ServerBootstrap.java:298) ~[netty-3.3.0.Final.jar:na]
    at akka.remote.netty.NettyRemoteServer.start(Server.scala:53) ~[akka-remote-2.0.2.jar:2.0.2]
    at akka.remote.netty.NettyRemoteTransport.start(NettyRemoteSupport.scala:73) ~[akka-remote-2.0.2.jar:2.0.2]
    at akka.remote.RemoteActorRefProvider.init(RemoteActorRefProvider.scala:95) ~[akka-remote-2.0.2.jar:2.0.2]
    at akka.actor.ActorSystemImpl._start(ActorSystem.scala:568) ~[akka-actor-2.0.2.jar:2.0.2]
    at akka.actor.ActorSystemImpl.start(ActorSystem.scala:575) ~[akka-actor-2.0.2.jar:2.0.2]

Caused by: java.net.BindException: Cannot assign requested address
    at sun.nio.ch.Net.bind(Native Method) ~[na:1.6.0_26]
    at sun.nio.ch.ServerSocketChannelImpl.bind(ServerSocketChannelImpl.java:126) ~[na:1.6.0_26]
    at sun.nio.ch.ServerSocketAdaptor.bind(ServerSocketAdaptor.java:59) ~[na:1.6.0_26]
    at org.jboss.netty.channel.socket.nio.NioServerSocketPipelineSink.bind(NioServerSocketPipelineSink.java:140) ~[netty-3.3.0.Final.jar:na]
    at org.jboss.netty.channel.socket.nio.NioServerSocketPipelineSink.handleServerSocket(NioServerSocketPipelineSink.java:92) ~[netty-3.3.0.Final.jar:na]
    at org.jboss.netty.channel.socket.nio.NioServerSocketPipelineSink.eventSunk(NioServerSocketPipelineSink.java:66) ~[netty-3.3.0.Final.jar:na] 
```

我在这里创建远程演员系统：

```
object Payment extends Controller {
  var goodies: AuthNetActorObject = null

  val system = ActorSystem("RemoteCreation", ConfigFactory.load.getConfig("remotecreation"))
  val myActor = system.actorOf(Props[authNetActor.AuthNetActorMain], name = "remoteActor")
  ...
} 
```

这是我在 Application.conf 文件中定义远程创建的地方：

```
remotecreation{ #user defined name for the configuration
    include "common"
    akka {
            actor{
                    #serializer{
                    #       proto = "akka.serialization.ProtobufSerializer"
                    #       daemon-create = "akka.serialization.DaemonMsgCreateSerializer"
                    #}

                    #serialization-bindings{
                    #       "com.google.protobuf.GeneratedMessage" = proto
                    #       "akka.remote.DaemonMsgCreate" = daemon-create
                    #}

                    deployment{
                            /remoteActor{   #Specifically has to be the name of the remote actor
                                    remote="akka://RemoteCreation@172.17.100.232:2554"
                            #       router = "round-robin"
                            #       nr-of-instances = 10
                            #       target {
                            #               nodes = ["akka://RemoteCreation@172.17.100.232:2554", "akka://RemoteCreation@172.17.100.224:2554"]
                            #       }
                            }
                    }
            }
    }
} 
```

这是我在定义中包含的 common.conf 文件：

```
akka {

  actor {
    provider = "akka.remote.RemoteActorRefProvider"
  }

  remote {
        transport = "akka.remote.netty.NettyRemoteTransport"
        log-received-messages = on
        log-sent-messages = on
        log-remote-lifecycle-events = on

    netty {
      hostname = "172.17.100.232"       #Broadcast IP address of remote system
      port = 2554
        log-received-messages = on
        log-sent-messages = on
          log-remote-lifecycle-events = on

    }
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T21:24:58.343

这可能意味着其他东西正在使用该机器上的该端口。登录到该机器并`netstat -anp | grep 2554`以 root 身份运行，然后查看该端口是否处于`LISTEN`状态。如果是这样，进程 ID 将位于最后一列。

# python - Twisted disownServiceParent 是否删除所有活动连接

> ID：12376586
> 
> 赞同：1
> 
> 时间：2012-09-11T19:27:55.500
> 
> 标签：python, twisted

我有一个不断运行的 python 脚本，监听 TCP 连接。我想在每天结束时关闭所有连接。

我创建我的服务：rendererService = internet.TCPServer(1945,f.getFactory(Renderer)) rendererService.setServiceParent(serviceCollection)

每个新的渲染器也在启动时启动的字典中引用：渲染器

要关闭所有连接，我安排它运行：

```
rendererService.disownServiceParent()
renderers = {} 
```

这是否可以保证所有连接都关闭并且所有对象都被销毁，即使它们正在接收/发送数据？它会在关闭之前等待数据传输/接收结束吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T21:55:21.860

不，它没有。

如果要关闭所有连接，则必须维护创建的传输列表。

# c# - 在动态 HTML 表格中查找动态控件

> ID：12376588
> 
> 赞同：-1
> 
> 时间：2012-09-11T19:27:59.830
> 
> 标签：c#, asp.net

我正在尝试在动态 HTML 表中找到动态控件。我有以下内容：

```
System.Web.UI.HtmlControls.HtmlTableRow TR = null;
System.Web.UI.HtmlControls.HtmlTableCell TD1 = null;
System.Web.UI.HtmlControls.HtmlTableCell TD2 = null;
System.Web.UI.HtmlControls.HtmlTableCell TD3 = null;
System.Web.UI.HtmlControls.HtmlTableCell TD4 = null;
System.Web.UI.HtmlControls.HtmlTableCell TD5 = null;
System.Web.UI.HtmlControls.HtmlTableCell TD6 = null;

// Database stuff
int i = 1;
while (objRdr.Read())
{
    TR = new System.Web.UI.HtmlControls.HtmlTableRow();
    TD1 = new System.Web.UI.HtmlControls.HtmlTableCell();
    TD2 = new System.Web.UI.HtmlControls.HtmlTableCell();
    TD3 = new System.Web.UI.HtmlControls.HtmlTableCell();
    TD4 = new System.Web.UI.HtmlControls.HtmlTableCell();
    TD5 = new System.Web.UI.HtmlControls.HtmlTableCell();
    TD6 = new System.Web.UI.HtmlControls.HtmlTableCell();

    // ASP code maybe wrong, but its to give you the ID.
    TD1.InnerHtml = "<asp:RadioButton runat='server' ID='radApprove"+i.ToString()+"' Value='Approve' />";
    TD2.InnerText = HttpUtility.HtmlEncode(objRdr[1].ToString());
    TD3.InnerText = HttpUtility.HtmlEncode(objRdr[6].ToString());
    TD4.InnerText = HttpUtility.HtmlEncode(objRdr[2].ToString());
    TD5.InnerText = HttpUtility.HtmlEncode(objRdr[10].ToString());
    TD6.InnerText = HttpUtility.HtmlEncode(objRdr[8].ToString());

    TR.Cells.Add(TD1);
    TR.Cells.Add(TD2);
    TR.Cells.Add(TD3);
    TR.Cells.Add(TD4);
    TR.Cells.Add(TD5);
    TR.Cells.Add(TD6);

    tblOrderItems.Rows.Add(TR);
    TR = null;
    TD1 = null;
    TD2 = null;
    TD3 = null;
    TD4 = null;
    TD5 = null;
    TD6 = null;
    i++;
} 
```

现在，当我尝试从 Cells 中获取数据时，它失败了。我努力了：

```
this.FindControl("radApprove1"); 
```

但这会返回一个`null`. 我也尝试迭代表中的行，但它只表示 1 行，即 Header。这段代码是从 中调用的`Page_Load`，所以我想我可以得到这些控件。当我在呈现页面后查看其 HTML 源代码时，我可以看到它们已正确呈现。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T01:47:54.570

```
TD1.InnerHtml = "<asp:RadioButton runat='server' ID='radApprove"+i.ToString()+"' Value='Approve' />" 
```

不完全确定上述是否可行。为什么不考虑使用`<asp:Table>`for 来处理这个问题？

有一种在有限程度上查找子控件的技术：[http ://weblogs.asp.net/dwahlin/archive/2006/08/25/Finding-ASP.NET-Child-Controls_2E002E002E002E00_The-Simple-Way.aspx](http://weblogs.asp.net/dwahlin/archive/2006/08/25/Finding-ASP.NET-Child-Controls_2E002E002E002E00_The-Simple-Way.aspx)

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T20:40:50.830

this.FindControl("radApprove1"); 仅检查您的控件的主 INamingContainer。您需要递归地找到它或执行以下操作：

伪：

```
foreach row in a table.Rows
  foreach cell in row
    cell.FindControl() 
```

# php - 在自定义服务提供者中使用会话

> ID：12376590
> 
> 赞同：1
> 
> 时间：2012-09-11T19:28:05.820
> 
> 标签：php, silex

我正在为 Silex 中的表单组件开发一个自定义字段。此字段的目的是呈现和验证验证码图像/值。

我能够添加一个注册我的自定义类型的 FormExtension。
我正在注入`$app['session']`能够在会话中存储验证码值。在我开始接触会话之前，一切似乎都按预期工作。

这是我得到的错误：

```
Failed to start the session because headers have already been sent. 
```

下面是我如何注册我的 FormExtension 以及它如何实例化自定义字段类型：

```
$app->register(new FormServiceProvider());
$app['form.extensions'] = $app->share(
    $app->extend('form.extensions', function ($extensions) use ($app) {
        $extensions[] = new CaptchaFormExtension($app['captcha.options'], $app['session']);
        return $extensions;
    })
);

class CaptchaFormExtension extends AbstractExtension
{
    private $session;
    private $options;

    public function __construct($options = array(), Session $session)
    {
        $this->options = $options;
        $this->session = $session;
    }

    protected function loadTypes()
    {
        return array(
            new CaptchaType($this->options, $this->session)
        );
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T08:29:26.587

所以我已经弄清楚问题所在了。
错误消息实际上是不言自明的。

实际上，我没有在调用之前使用会话，`CaptchaType`所以它只在那个时候开始，正如错误消息所说，为时已晚。

我想出的解决方案是在控制器操作开始时显式启动会话。然后，我可以根据需要在自定义表单类型中使用会话。

```
$app->get('/contact', function() use ($app) {

    $app['session']->start();

    $form = $app['form.factory']->create(new ContactFormType(), new ContactMessage());

    ...

}); 
```

# r - 使用 R 网格包的线条

> ID：12376596
> 
> 赞同：3
> 
> 时间：2012-09-11T19:28:39.813
> 
> 标签：r, graphics

我正在将 R 与 cygwin 一起使用，并试图绘制一些基本图形。这是 Paul Murrell 的一篇论文中的一个简单示例：

```
library(grid)
x <- rnorm(50)
y <- x + rnorm(50, 1, 2)
rx <- range(x)
dx <- diff(rx)
ry <- range(y)
dy <- diff(ry)
max <- max(rx, ry)
min <- min(rx, ry)
r <- c(min(rx, ry), max(rx, ry))
d <- diff(r)
scale <- r + c(-1, 1) * d * 0.05
extscale <- c(min(scale), max(scale) + diff(scale) * 1/3)
lay <- grid.layout(2, 2, 
                   widths = unit(c(3, 1), "inches"), 
                   heights = unit(c(1, 3), "inches"))
vp1 <- viewport(w = unit(4, "inches"), h = unit(4, "inches"), 
                layout = lay, xscale = extscale, yscale = extscale)
grid.newpage()
pushViewport(vp1)
grid.rect()
grid.xaxis()
grid.text("Test", y = unit(-3, "lines"))
grid.yaxis()
grid.text("Retest", x = unit(-3, "lines"), rot = 90)
vp2 <- viewport(layout.pos.row = 2, layout.pos.col = 1, 
                xscale = scale, yscale = scale)
pushViewport(vp2)
grid.lines()
grid.points(x, y, gp = gpar(col = "blue")) 
```

这情节很好。但是，如果我将以下行添加到程序中：

```
grid.lines(x, y, gp = gpar(col = "red")) 
```

线条到处都是。我原以为线条会按顺序连接这些点。我写的一些代码也有类似的问题，但是线条绘制得很好，但点却没有。

将不胜感激任何帮助。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T23:01:35.903

出于某种原因，`grid.points()`并且`grid.lines()`有不同的“默认单位”。（这些是单位 -`"native"`并且`"npc"`分别 - 当您向函数传递没有任何关联单位的数字向量时使用这些单位。）

```
args(grid.lines)
# function (x = unit(c(0, 1), "npc"), y = unit(c(0, 1), "npc"), 
#     default.units = "npc", arrow = NULL, name = NULL, gp = gpar(), 
#     draw = TRUE, vp = NULL)     
args(grid.points)
# function (x = stats::runif(10), y = stats::runif(10), pch = 1, 
#     size = unit(1, "char"), default.units = "native", name = NULL, 
#     gp = gpar(), draw = TRUE, vp = NULL) 
```

快速的解决方案是显式设置默认单位，`grid.lines()`以匹配所使用的单位`grid.points()`：

```
grid.lines(x, y, gp = gpar(col = "red"), default.units = "native") 
```

![在此处输入图像描述](../Images/cb37aa5f3bb793b27e57953ad38d2342.png)

# jquery - jQuery - 全屏幻灯片性能提示？

> ID：12376597
> 
> 赞同：0
> 
> 时间：2012-09-11T19:28:44.443
> 
> 标签：jquery, slideshow

我正在构建一个全屏幻灯片，我尝试使用定位、边距和现在的 ScrollTo 来制作左/右幻灯片。

但每次总有一个性能差距需要弥补。我还没有找到一个好的方法来做到这一点，我正在寻求一些帮助。我也尝试过纯 CSS，它运行良好，但在我需要的浏览器中不起作用。

我在这里有一个简单的演示：http: [//jsfiddle.net/qkRvS/2/embedded/result/](http://jsfiddle.net/qkRvS/2/embedded/result/) 和代码：http: [//jsfiddle.net/qkRvS/2/](http://jsfiddle.net/qkRvS/2/)

有人可以指出我正确的方向以使这尽可能顺利吗？每次图像更改似乎都没有什么问题。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T20:10:39.473

不幸的是，我认为您没有满意的答案。CSS3 转换的 CSS3 转换在支持它的浏览器中提供了最佳性能。对于 ie7-8，操作`left`属性 out 执行滚动，但在 ie7-8 上可能永远不会看起来非常平滑。Firefox 的性能也不是很好，但越来越好。在某些情况下，我发现`left`在 Firefox 中的性能比`-moz-transform`在上一个版本中可能有所改变。所以提示：

*   尽可能压缩图像。如果可能，请使用 .jpg。
*   在每个浏览器中测试每个方法
*   为每个浏览器使用性能最高的方法
*   如果您使用 jQuery 的动画方法，您可能希望将帧速率从 16 毫秒调整到 30 毫秒，这样浏览器就不会因为重绘而受到重创。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T12:53:38.300

我想到了。只需在溢出的 div 上使用 CSS3 过渡和“左”，就可以减少重绘。

# python - unittest和nose框架之间的冲突

> ID：12376598
> 
> 赞同：6
> 
> 时间：2012-09-11T19:28:48.190
> 
> 标签：python, unit-testing, python-3.x, nose

Nose[支持测试生成器](http://nose.readthedocs.org/en/latest/writing_tests.html#test-generators)。但是文档说：

> 请注意，unittest.TestCase 子类不支持方法生成器

这意味着我所有的测试生成器都必须在`unittest`框架之外。

问题：我是否仍应尽可能使用`unittest`框架进行那些测试？还是出于一致性的原因，我应该`unittest`完全放弃？

为什么不`nose`支持测试生成器`unittest.TestCase`？它似乎破坏了它的最大优势`nose`：它是*扩展*而不是*替代*，`unittest`从而提供了额外的好处，而不会带走`unittest`. 还是我错过了什么？

还有一个相关的问题。如果我`unittest`完全放弃，我应该将我的测试放入全局函数还是一些新的类层次结构中？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-16T13:52:40.323

在nose 中，unittest.TestCases 中缺乏对更有趣的测试类型的支持是故意的——这个想法是nose 应该像unittest 一样从unittest.TestCases 收集*测试*。可能这是一个坏主意，但现在不太可能改变。

因此，只要您不介意走在最前沿，我建议您尝试nose2。nose2 不区分，支持各种测试插件进行各种测试。文档在 rtd 上：http: [//nose2.readthedocs.org/en/latest/index.html](http://nose2.readthedocs.org/en/latest/index.html)，在 pypi 上下载：http: [//pypi.python.org/pypi/nose2/0.4.1](http://pypi.python.org/pypi/nose2/0.4.1)。

# c# - 如何使用 nhibernate 将数据库字段设置为服务器时间

> ID：12376600
> 
> 赞同：3
> 
> 时间：2012-09-11T19:28:57.910
> 
> 标签：c#, mysql, nhibernate, fluent-nhibernate

我第一次使用 fluent nhibernate 来逐步淘汰我现有的数据库访问层以访问远程 MySql 服务器。

客户端大多是虚拟化的，可以在任何时间点进入睡眠/休眠状态，持续任何时间长度（几秒到几天）。即使它们通常与无法保证的服务器时间同步，这意味着我无法使用`DateTime`为某些字段提供的客户端。

如何让 nhibernate 使用服务器时间设置/更新某些字段（最好通过调用`UTC_TIMESTAMP()`函数）？

目的：

```
public class MyObject{
  public virtual UInt64 Id { get; set; }
  public virtual String Status{ get; set; }
  public virtual String SomeData{ get; set; }

  //Set only once when the Object is inserted
  public virtual DateTime TimeCreated { get; set; }
  //Set every time the object is updated
  public virtual DateTime TimeLastUpdate { get; set; }
  //Set every time the 'Status' column is updated
  public virtual DateTime TimeStatusLastChanged { get; set; }
  //This is a user provides standard datetime field
  public virtual DateTime SomeUserSpecifiedTime { get; set; }
} 
```

映射：

```
Id(x => x.Id)
  .GeneratedBy.Native();
Map(x => x.Status);
Map(x => x.SomeData);
Map(x => x.SomeUserSpecifiedTime);
//? -->
Map(x => x.TimeCreated)
  .Not.Update();
Map(x => x.TimeLastUpdate);
Map(x => x.TimeStatusLastChanged);
//<-- ? 
```

我希望这三个`Time*`字段在设置/更新时使用该`UTC_TIMESTAMP()`函数，以便插入服务器端日期/时间。该`DateTime SomeUserSpecifiedTime`字段是标准映射字段。

到目前为止，我的数据库访问类包含以这种方式创建查询的逻辑。我可以使用映射创建数据库触发器`.Generated.Insert/Always`，但我希望有一种 nhibernate/code-only 方式来做到这一点。

我发现的一种解决方案是从服务器获取时间并将其提供给插入/更新，但这已经过时了，因为获取和插入/更新之间的时间可能很长。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T13:26:06.210

我决定使用触发器来解决这个问题，这不是最佳的，但现在可以使用。不幸的是nhibernate没有触发器的概念，所以你必须将它们声明为*辅助数据库对象*，这会导致一些问题

*   SchemaValidator 和 SchemaUpdate 不会选择 auxDbObjects，因此不会更新/创建它们。SchemaExport 将创建它们，但会这样做两次，这会导致更多的代码重复。
*   需要为每个触发器创建和注册一个实例，比较麻烦。

它可能看起来像这样

```
public class MyTrigger : IAuxiliaryDatabaseObject{

  public string SqlCreateString(Dialect dialect, IMapping p, string defaultCatalog, string defaultSchema){
    //The drop is important, because the shema export calls and executes this twice.
    return @"
DROP TRIGGER IF EXISTS myTrigger;

CREATE TRIGGER myTrigger BEFORE INSERT ON myObjectTable FOR EACH ROW 
BEGIN
set new.TimeAdded = UTC_TIMESTAMP();
END";
    }

    public string SqlDropString(Dialect dialect, string defaultCatalog, string defaultSchema){
    return @"DROP TRIGGER IF EXISTS myTrigger";
    }

  public void AddDialectScope(string dialectName){
    throw new NotImplementedException();
    }

  public bool AppliesToDialect(Dialect dialect){
    return true;
    }

  public void SetParameterValues(IDictionary<string, string> parameters){
    throw new NotImplementedException();
    }
  } 
```

在配置中每个触发器/辅助。必须单独添加数据库对象：

```
Fluently.Configure()
  .Database(...)
  .ExposeConfiguration(conf =>
    {
    conf.AddAuxiliaryDatabaseObject(new MyTrigger());
    }); 
```

映射

```
Map(x => x.TimeCreated)
  .Not.Update()
  .CustomType("UtcDateTime")
  .ReadOnly()
  .Generated.Insert()   //.Generated.Always() for columns that track lastModification
  ; 
```

不幸的是，自定义用户类型或拦截器不起作用，因此这似乎是目前实现这一目标的唯一可能方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T20:36:03.950

这应该可以解决问题

```
Map(x => x.TimeStatusLastChanged)
             .Not.Nullable()
             .Default("UTC_TIMESTAMP()"); 
```

# r - 按秒排序的数值数组

> ID：12376602
> 
> 赞同：0
> 
> 时间：2012-09-11T19:29:08.613
> 
> 标签：r, seq

我有一个从 1 到 2 的序列，实际上代表 1 到 2 分钟。我希望增量以秒为单位。我不认为'chron'包会在这里回答我的问题，因为我想创建一个数字、十进制值而不是冒号分隔值（即1:01、1:02）的数组。

```
 seq(from=1, to=2, by=0.006) 
```

这是我迄今为止一直在做的，至少它给了我一个比率。但我实际上只是喜欢秒，所以基本上是 1.00 到 1.60，然后是 2 到 2.60。

是否有另一个功能可以帮助我解决这个问题，这样我就不必编写 ifelse 语句了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T19:47:38.227

你可以使用`?seq.POSIXt`.

```
s <- seq(from=as.POSIXct("1", format="%M"), to=as.POSIXct("2", format="%M"), by="sec")
s
# [1] "2012-09-11 00:01:00 CEST" "2012-09-11 00:01:01 CEST" "2012-09-11 00:01:02 CEST" ... 
```

要将它们转换为您的目标格式，请查找`?strftime`：

```
as.double(strftime(s, format="%M.%S"))
# [1] 1.00 1.01 1.02 ... 1.58 1.59 2.00 
```

# asp.net - ASP.Net - 屏幕上的随机编码错误

> ID：12376604
> 
> 赞同：0
> 
> 时间：2012-09-11T19:29:29.647
> 
> 标签：asp.net

我什至不确定这个问题的标题是什么，但是有没有人看到并修复了下图中的错误？![错误](../Images/24f3f5a5cf507ef5142ba1d7e9c9c36d.png)

这发生在我们的网站上，并且在 IIS 中没有记录任何关于该错误的信息。我们在 IIS 7 上使用 .Net 4

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T20:15:35.937

给出答案并尝试帮助继续前进，如果您在标题上设置 **Content-Length**并稍后 GZip 页面，但未能更改页面上的**Content-Length**（因为准备好已经写入它。这会在尝试解压缩页面时对浏览器造成失败。

因此，请检查您是否将其设置在某个地方。

这是两个具有相同输出的类似问题。

[压缩 CSS 的 IIS 内容类型错误](https://stackoverflow.com/questions/10134017/iis-content-type-wrong-for-compressed-css)

[ASP.NET 站点在负载平衡服务器上加载时有时会冻结和/或在页面顶部显示奇怪的文本](https://stackoverflow.com/questions/2582139/asp-net-site-sometimes-freezing-up-and-or-showing-odd-text-at-top-of-the-page-wh)

# proxy - Nginx 动态代理重定向

> ID：12376618
> 
> 赞同：3
> 
> 时间：2012-09-11T19:30:20.710
> 
> 标签：proxy, nginx

我希望实现这样的目标：

```
location = / {
    if ($args ~ "^url=(.+)") { #gets the "url" get parameter
        set $key1 $1;
        proxy_pass $key1; #use the parameter as proxy address
    }
} 
```

这甚至可能吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-12T14:36:08.450

```
location / {
    proxy_pass http://backend$arg_url;
} 
```

*   [http://nginx.org/r/proxy_pass](http://nginx.org/r/proxy_pass)
*   [http://nginx.org/en/docs/http/ngx_http_core_module.html#variables](http://nginx.org/en/docs/http/ngx_http_core_module.html#variables)
*   [http://wiki.nginx.org/IfIsEvil](http://wiki.nginx.org/IfIsEvil)

# haskell - 在 do 块内迭代

> ID：12376623
> 
> 赞同：4
> 
> 时间：2012-09-11T19:30:49.720
> 
> 标签：haskell, monads

我写了这段代码：

```
toCouplesFile = do inputFile <- openFile "deletedId.csv" ReadMode
                   outputFile <- openFile "couples.txt" WriteMode
                   readAndChange inputFile outputFile

readAndChange i o = do iseof <- hIsEOF i
                       if iseof then (return o)
                       else do line <- hGetLine i
                               hPutStrLn o (show (extractNameAndId line))
                               readAndChange i o 
```

我想知道我是否可以只使用一个函数重写这段代码，使用类似于这种模式的东西：

```
function x = do ...
                label
                .....
                if ... then label else exit 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-11T20:20:57.507

通过以不必要的命令方式进行编程，您使生活变得困难。您正在使用美丽的 Haskell 语言进行编程，并且正在寻找一种`goto`构造！

为什么不只是`import Control.Applicative (<$>)`写

```
readAndChange' = writeFile "couples.txt" =<< 
    unlines.map (show.extractNameAndId).lines <$> readFile "deletedId.csv" 
```

（是的，这几乎是单行的。它采用简洁、实用的风格，并且没有被读写行的机制所打乱。处理过程尽可能地用纯代码完成，只有输入和输出是基于 IO 的。）

**解释：**

这里`unlines.map (show.extractNameAndId).lines`通过将输入切割成行来处理您的输入，`extractNameAndId`然后使用 应用`show`到每个输入，然后使用`map`将它们重新连接在一起`unlines`。

`unlines.map (show.extractNameAndId).lines <$> readFile "deletedId.csv"`将读取文件并应用处理功能。`<$>`是令人愉快的语法`fmap`。

`writeFile "couples.txt" =<< getanswer`是一样的`getanswer >>= writeFile "couples.txt"`- 得到上面的答案，然后把它写到文件中。

尝试`greet xs = "hello " ++ xs`在 ghci 中编写这些内容以获得乐趣

```
greet "Jane"        -- apply your pure function purely
greet $ "Jane"      -- apply it purely again
greet <$> ["Jane","Craig","Brian"]  -- apply your function on something that produces three names
greet <$> Just "Jane"               -- apply your function on something that might have a name
greet <$> Nothing                   -- apply your function on something that might have a name
greet <$> getLine                   -- apply your function to whatever you type in 
greet <$> readFile "deletedId.csv"  -- apply your function to your file 
```

最后一个是我们`<$>`在`readAndChange`. 如果 deletedId.csv 中有很多数据，你会错过你好，但你当然可以

```
greet <$> readFile "deletedId.csv" >>= writeFile "hi.txt"
take 4.lines <$> readFile "hi.txt" 
```

查看前 4 行。

所以`$`让你在你给它的参数上使用你的函数。`greet :: String -> String`所以如果你写`greet $ person`， the`person`必须是 type `String`，而如果你写`greet <$> someone`， the`someone`可以是任何产生 a `String`-a 字符串列表，an `IO String`， a 的东西`Maybe String`。从技术上讲，`someone :: Applicative f => f String`但是您应该首先阅读类型类和 Applicative Functors。Learn You a Haskell for Great Good 是一个极好的资源。

更有趣的是，如果你的函数有多个参数，你仍然可以使用可爱的 Applicative 风格。

```
insult :: String -> String -> String
insult a b = a ++ ", you're almost as ugly as " ++ b 
```

尝试

```
insult "Fred" "Barney"
insult "Fred" $ "Barney"
insult <$> ["Fred","Barney"] <*> ["Wilma","Betty"]
insult <$> Just "Fred" <*> Nothing
insult <$> Just "Fred" <*> Just "Wilma"
insult <$> readFile "someone.txt" <*> readFile "someoneElse.txt" 
```

在这里，您`<$>`在函数之后和`<*>`它需要的参数之间使用。一开始它的工作原理有点令人兴奋，但它是编写有效计算的最实用的风格。

接下来阅读有关 Applicative Functors 的内容。他们真棒。
[http://learnyouahaskell.com/functors-applicative-functors-and-monoids](http://learnyouahaskell.com/functors-applicative-functors-and-monoids)
[http://en.wikibooks.org/wiki/Haskell/Applicative_Functors](http://en.wikibooks.org/wiki/Haskell/Applicative_Functors)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-11T19:38:40.407

```
import Control.Monad
import Control.Monad.Trans
import Control.Monad.Trans.Either

readAndChange i o = do
    result <- fmap (either id id) $ runEitherT $ forever $ do
        iseof <- lift $ hIsEof i
        when iseof $ left o -- Break and return 'o'
        line <- lift $ hGetLine i
        lift $ hPutStrLn o $ show $ extractNameAndId line
    -- 'result' now contains the value of 'o' you ended on
    doSomeWithingWith result 
```

要了解此技术为何有效，请阅读[此](http://www.haskellforall.com/2012/07/breaking-from-loop.html).

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-11T19:48:57.137

您可以使用`let`模式进行递归，但这类似于单独定义递归函数：

```
main = do 
    let x = 10 
    let loop = do 
        print 1 
        when (x<20) loop 
    loop 
```

您也可以使用`fix`from`Control.Monad.Fix`来实现类似的行为

```
main = do 
    let x = 10 
    fix $ \loop -> do 
        print 1 
        when (x<20) loop 
```

你所说的是一种`goto label`模式。我不知道您是否可以实现这种行为，但使用`fix`or`let`可以轻松帮助您实现递归。

[编辑] 还有一些模式可以实现类似的结果，例如使用`Cont`monad

```
getCC' :: MonadCont m => a -> m (a, a -> m b)
getCC' x0 = callCC (\c -> let f x = c (x, f) in return (x0, f))

main = (`runContT` return) $ do 
    (x, loopBack) <- getCC' 0
    lift (print x)
    when (x < 10) (loopBack (x + 1))
    lift (putStrLn "finish") 
```

将从中打印数字`1 to 10`。请参阅[goto using continuation](https://stackoverflow.com/questions/5193876/goto-in-haskell-can-anyone-explain-this-seemingly-insane-effect-of-continuation "goto 使用延续")以获得更好的解释。

还有一个[Goto](http://hackage.haskell.org/package/GotoT-transformers) monad和transformer。我没用过。您可能会发现它适合您的需要。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-11T23:12:15.177

您应该做的第一件事是阅读[`Control.Monad`](http://www.haskell.org/ghc/docs/latest/html/libraries/base/Control-Monad.html)模块的文档，这对于编写 Haskell 代码是绝对必要的。当您使用它时，[`Control.Monad.Loops`](http://hackage.haskell.org/packages/archive/monad-loops/0.3.0.2/doc/html/Control-Monad-Loops.html)从 Hackage 安装软件包，并阅读相关文档；您可能对`whileM_`那里的功能特别感兴趣：

```
import Data.Functor ((<$>)
import Control.Monad.Loops (whileM_)

readAndChange i o = 
    whileM_ notEOF $ do line <- hGetLine i
                        hPutStrLn o (show (extractNameAndId line))
        where notEOF = not <$> (hIsEOF i) 
```

有问题的库是`whileM_`这样实现的，这是您正在寻找的模式：

```
-- |Execute an action repeatedly as long as the given boolean expression
-- returns True.  The condition is evaluated before the loop body.
-- Discards results.
whileM_ :: (Monad m) => m Bool -> m a -> m ()
whileM_ p f = do
        x <- p
        if x
                then do
                        f
                        whileM_ p f
                else return () 
```

* * *

不过，我必须同意你以一种过于迫切的方式写这篇文章。试着这样想：你的程序基本上是将输入字符串转换为输出字符串。这立即表明您的程序逻辑的核心应该具有这种类型：

```
transformInput :: String -> String
transformInput = ... 
```

您的转换将逐行进行。这意味着您可以通过这种方式细化草图（该`lines`函数将字符串拆分为行；`unlines`重新加入列表）：

```
transformInput :: String -> String
transformInput input = unlines (map transformLine (lines input))

transformLine :: String -> String
transformLine line = show (extractNameAndId line) 
```

现在你已经掌握了`transformInput`函数中逻辑的核心，所以你只需要以某种方式将它连接到输入和输出句柄。如果您正在处理标准输入和标准输出，则可以使用该[`interact`](http://hackage.haskell.org/packages/archive/base/latest/doc/html/System-IO.html#v%3ainteract)函数来执行此操作。但我们实际上可以窃取它的实现并对其进行修改：

```
hInteract       ::  Handle -> Handle -> (String -> String) -> IO ()
hInteract i o f =   do s <- hGetContents i
                       hPutStr o (f s) 
```

现在，瞧：

```
toCouplesFile = do inputFile <- openFile "deletedId.csv" ReadMode
                   outputFile <- openFile "couples.txt" WriteMode
                   hInteract inputFile outputFile transformInput 
```

警告：所有代码未经测试。

* * *

最后一件事，为了完全公开：这里的技巧是`hGetContents`执行**惰性 I/O**：它基本上允许您将句柄的全部内容视为 a `String`，从而将`transformInput`函数应用于句柄的内容。但这一切都是懒惰地完成的，因此它实际上不必一次读取整个文件。

这是最简单的方法，你应该学习它，但它有一个很大的弱点，那就是当把手关闭时你可能会失去一些控制。但是，对于快速而肮脏的程序，这是可以的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-11T20:56:04.270

与命令式编程语言不同，也与其他函数式编程语言不同，Haskell 不包含用于编写 for 循环或 while 循环的语法结构，而这正是您在这里所要求的。

这个想法是递归过程和迭代过程可以被递归函数统一捕获。只是迭代过程被捕获为特定类型的递归函数：这些函数是*尾递归*的。诸如出现在 do-blocks 中的命令式代码也不例外。您可能会发现这种缺乏显式循环结构很烦人，因为您必须为每个循环定义一个新函数，因此在某种意义上必须为循环命名。然而，这对于 Haskell 方法的统一性和简单性来说是微不足道的，原因有以下三个：

1.  您不必在顶层定义表示循环的函数。您可以在本地定义它。

2.  在 Haskell 中，许多人通常总是对这些循环使用相同的名称。这里的热门选择是`go`和`aux`。因此，您的代码可以重写如下：

    ```
    toCouplesFile = do inputFile <- openFile "deletedId.csv" ReadMode
                       outputFile <- openFile "couples.txt" WriteMode
                       let go = do
                            iseof <- hIsEOF inputFile
                            if iseof then (return outputFile)
                            else do line <- hGetLine inputFile
                                    hPutStrLn outputFile (show (extractNameAndId line))
                                    go
                       go 
    ```

3.  最后，没有循环结构是无关紧要的，因为很多时候我们根本不需要编写循环。就您而言，此线程中的其他答案已经显示了许多这样做的方法。

# delphi - ITaskService 接口访问冲突

> ID：12376630
> 
> 赞同：3
> 
> 时间：2012-09-11T19:31:13.613
> 
> 标签：delphi, interface, scheduled-tasks

我对任务计划程序界面有一个特殊的问题，如果有人可以提供帮助，我会非常高兴。

我的应用程序的一部分从任务计划程序中读取项目。在 XP 下，我使用来自 JEDI 库的单元的 Task Scheduler v1.0 接口。[在 Vista 和 Win7 下，我使用了本文](http://teran.karelia.pro/articles/item_4443.html)中的 TaskSchd.pas 单元。它包含新 2.0 接口的定义。我使用 Delphi XE2，更新 4。

问题是当我调用 ITaskService 接口的 Connect 方法时出现访问冲突。错误消息是*“$0055C73C 处的第一次机会异常。异常类 $C0000005 带有消息‘在 0x0055c73c 处的访问冲突：读取地址 0x0000000b’。”*

我使用的代码是：

```
procedure TSomeClass.TaskScheduler(...);
var
  TS : ITaskService;
  TaskFolder : ITaskFolder;
begin
  TS := CoTaskScheduler.Create();
  TS.Connect('', '', '', '');
  ......
end; 
```

该代码位于 TObject 的子类中的一个单独单元中。这足以引起 AV，即使没有对界面做任何其他事情。AV 发生在函数退出时，而不是在 Connect 行，因此它可能与对象的释放有关。

我进行了一些测试，但找不到问题所在。这是奇怪的：

*   AV 仅在 Release 版本中发生，在 Debug 中它可以正常工作
*   如果我在“项目选项”>“编译”中关闭“优化”，那么代码将再次起作用。如果我在调试版本中打开它，代码将停止工作。
*   如果我将它放在主窗体中的某种方法中，它会再次起作用。
*   我已经调用了 CoInitialize，但它没有任何效果
*   我试图在一个空白的新应用程序中复制它，但我做不到，所以它与应用程序中的另一个单元或类有关

关于接口我可能缺少一些非常简单的东西，但我一直找不到它。否则代码可以工作，我可以获取并显示任务列表。当编译 > 优化选项打开时出现问题，这是发布版本的默认设置。

一种解决方案是关闭优化，但我宁愿找到问题的原因。

**编辑：**我已经包含了关于 AV、CoInitialize、Delphi 和 ITaskService 头文件的附加信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T06:56:59.963

我认为链接的 Taskschd.pas 有很多错误。

例如，ITaskFolder::CreateFolder 只有两个参数，但在 Windows Task Scheduler 2.0 API 中有树形参数。

回到你关于“连接”的问题。我正在使用以下代码：

```
var
  TaskService: ITaskService;
begin
  if (Succeeded(CoInitialize(nil))) then
  begin
    if (Failed(CoCreateInstance(CLSID_TaskScheduler, nil, CLSCTX_INPROC_SERVER, IID_ITaskService, TaskService))
      or (Failed(TaskService.Connect(Null, Null, Null, Null)))) then
    begin
      CoUninitialize();
      TaskService := nil;
    end;
  end;
... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-16T20:33:46.210

我也有这个问题。原因 - 错误的标头 TaskSchd.pas 使用以下内容：[https ://searchcode.com/codesearch/view/27081108/](https://searchcode.com/codesearch/view/27081108/)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-09-22T08:27:11.117

毕竟做这个：

```
ts:= nil; 
```

# perl - perl 打印文件最后修改时间

> ID：12376638
> 
> 赞同：1
> 
> 时间：2012-09-11T19:31:32.613
> 
> 标签：perl

我使用以下方法打印文件的上次修改时间，但脚本上打印的时间比文件戳记晚了 2 小时。

```
use File::stat;
use Time::localtime;

$file = '/opt/test/time';
$date = ctime(stat($file)->mtime);
print "<b> $date </b>"; 
```

文件名“test”上的时间戳是下午 12:30，但脚本时间显示为上午 10:30。

我错过了什么吗？

# css - 字体字体在 CSS 中的位置？

> ID：12376639
> 
> 赞同：19
> 
> 时间：2012-09-11T19:31:32.807
> 
> 标签：css, font-face

当您添加`@font-face`到您网站的单个 css 文件中时，放置它的最佳位置是哪里？css文件的顶部？底部？

如果你把它放在顶部，我认为它会减慢 CSS 的加载速度。如果您添加到底部，那么所有文本都会加载回退字体，直到字体被加载，这也不是最佳的。那么当使用`@font-face`而不是 TypeKit、GoogleFonts 等时，你应该把它放在哪里呢？

*更新 - 重申上述内容，这是指在`"@font-face{font-family:'Ave Regular';src:url('fonts/ave-regular.eot?#iefix')....etc"`css 文件中的放置位置，而不是 body 的放置位置`"{ font-family: fontname, arial, serif } etc"`。而且我知道它“可以”去任何地方工作，无论我放在顶部还是底部还是中间都不会产生“太大”的不同，但是无论多么微不足道或以一种方式寻找哪个更好根据某些用例更好。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-09-11T19:38:43.157

> 如果你把它放在顶部，我认为它会减慢 CSS 的加载速度。

不，不是的。浏览器不会在加载样式表的其余部分之前先下载字体。它将开始异步下载字体，但这些字体下载不会干扰页面渲染（参见[FOUT](http://paulirish.com/2009/fighting-the-font-face-fout)）。

如果您的意思是说将规则放在顶部会减慢速度，因为浏览器必须先下载规则，然后再下载样式表的其余部分，除非您有数十千字节的`@font-face`规则（非常非常，非常不可能）。

没有规则来管理`@font-face`样式表中的放置位置，但出于组织目的，我通常将大多数 at-rules 保留在顶部。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-04-24T09:58:19.150

截至 2016 年，现代浏览器实际上通过隐藏文本（使其透明）来防止 FOUT（无样式文本的 Flash）。（例如，Chrome 等待 3 秒，然后如果到那时还没有加载正确的字体，则使用备用字体。）这是 CSS3 规范所允许的。

> 在可下载字体可用之前加载文本内容的情况下，用户代理可能会呈现文本，因为如果可下载字体资源不可用**时将呈现文本，或者它们可能会使用备用字体透明地呈现文本以避免使用备用字体的文本闪烁**。
> 
> [CSS 字体模块第 3 级](https://www.w3.org/TR/css-fonts-3/#font-face-loading)（已添加重点）

但是这种行为实际上将 FOUT（无样式文本的 Flash）与 FOIT [（](https://www.viget.com/articles/the-font-face-dilemma)不可见文本的 Flash）进行了交易，并且使用户在非常糟糕的连接上比使用 FOUT 更糟糕。

另外，请参阅[这个巧妙的解决方法](https://www.filamentgroup.com/lab/font-events.html)（需要 JS）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T19:36:03.430

无论您将它放在顶部还是底部，它最终都必须加载一些时间，所以我认为这并不重要。如果您非常关心性能，我建议您将所有 CSS 合并到一个文件中并将其最小化。这样，对服务器的请求被限制为一个，而不是 10 个（对于 10 个包含不同字体等的不同 CSS 文件）。

读这个：

> 使用样式表，在下载所有样式表之前会阻止渐进式呈现。这就是为什么最好将样式表移动到文档 HEAD，这样它们会首先被下载并且不会阻止渲染。使用脚本，脚本下方的所有内容都会阻止渐进式渲染。将脚本移动到页面中尽可能低的位置意味着脚本上方有更多内容可以更快地呈现。

参考。 [http://developer.yahoo.com/blogs/ydn/posts/2007/07/high_performanc_5/](http://developer.yahoo.com/blogs/ydn/posts/2007/07/high_performanc_5/)

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-09-11T19:36:14.820

我会说...您将字体保留在正文中{ font-family: blahblahblah;}

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-09-11T19:42:22.753

不习惯，最好在文件顶部使用 font-face，因为它很可能不会经常更改，但如果这样做，它会对您的应用程序产生很大影响（视觉上）。

我通常将它包含在`body{}`或`html{}`

就**性能而言**它很可能并不重要。就您自己的可维护性而言，就您的心理表现而言，最好将其置于顶部，这样您就不会通过 CSS 来寻找如此具有视觉效果的东西。

这就是我实现这个的方式，快速片段：

```
body{margin:0; font-family: "CiN", Arial;}
@font-face {
    font-family: "CiN";
    src: url('sling.eot');
    src: local('?'), url('sling.woff') format('woff'), url('sling.ttf') format('truetype'), url('sling.svg#webfontJgTq0KbR') format('svg');
    font-weight: normal;
    font-style: normal;
} 
```

# zend-framework2 - Zend Framework 2 主题管理器

> ID：12376640
> 
> 赞同：1
> 
> 时间：2012-09-11T19:31:33.773
> 
> 标签：zend-framework2, zend-framework-mvc

有关于 Zend Framework 2 的问题。在我的应用程序中，我有一个模块来处理我的整个应用程序。

为了进一步改进，我想开发一个主题管理器。

主题管理器应该使用像 ?theme = lightTheme 这样的 url 参数。主题被组织在模块外的某个文件夹“模板”中。主题还应包括视图脚本。

据我所知，通过阅读一些 ZF2 文档，它可以通过一些监听器事件来实现。

有人做得好吗，或者可以给我一些例子，我如何解决这个要求？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-13T19:00:23.890

我认为这种模式可以工作......

**主题文件夹结构**

```
/path/to/themes
/path/to/themes/some_theme
/path/to/themes/some_theme/layout.phtml
/path/to/themes/another_theme
/path/to/themes/another_theme/layout.phtml 
```

**配置/模块.config.php**

```
return array(
    'view_manager' => array(
        'template_path_stack' => array(
            '/path/to/themes',
        ),
    ),
); 
```

**模块.php**

```
namespace Something;

class Module
{
    public function onBootstrap(\Zend\EventManager\EventInterface $e)
    {
        $application = $e->getApplication();
        $em = $application->getEventManager();
        $em->attach('route', function($e) {

            // decide which theme to use by get parameter
            // $layout = 'some_theme/layout';
            // $layout = 'another_theme/layout';
            $e->getViewModel()->setTemplate($layout);
        });
    }
} 
```

// 编辑：改为使用路由事件而不是控制器加载器

# mysql - SQL如何引用变量列

> ID：12376642
> 
> 赞同：1
> 
> 时间：2012-09-11T19:31:38.790
> 
> 标签：mysql, sql, variables, reference

我正在尝试创建一个壁纸共享库，我希望我的访问者能够对壁纸和文章发表评论。

假设我有以下表格：

```
Wallpaper
- id
- name
- etc...

Article
- id
- title
- etc...

Comment
- id
- text 
```

我希望评论与独特的壁纸或独特的文章相关联。

我想过像这样进行继承：

```
Commentable
- id

Article
- id references Commentable.id
- etc...

Wallpaper
- id references Commentable.id
- etc...

Comment
- id
- commented references commentable.id 
```

但是这种方法看起来很重，而且不是很好。

我也想过制作：

```
Wallpaper
- id
- name
- etc...

Article
- id
- title
- etc...

Comment
- id
- commented references either Wallpaper.id or Article.id 
```

但是没有办法知道相关的东西是壁纸还是文章。

此外，我想使用 MyISAM 而不是 InnoDB，因为我将使用 5.1 MySQL 将其上传到免费的 Web 主机服务上。

请问您知道有什么明确的方法吗？提前致谢。

编辑：感谢大家的回答。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T19:38:32.867

两种选择：

**选项一**

```
Wallpaper
- id
- name

Article
- id
- title

Comment
- id
- wallpaper_id <== FK
- article_id   <== FK 
```

优点：参照完整性
缺点：您必须修改架构以评论其他实体类型

**选项二**

```
Wallpaper
- id
- name

Article
- id
- title

Comment
- id
- entity_id <== either a wallpaper id or article id
- entity_type <== one of 'wallpaper' or 'article' (use lookup table if you wish) 
```

优点：您不必修改架构来评论其他实体类型
缺点：没有参照完整性（尽管可以通过触发器强制执行）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T19:37:36.177

我会做一些简单的事情，比如在名为 type 的 Comment 表中添加一个字段，使其成为 Tinyint。然后在存储评论时，要么设置为 0，要么设置为 1，选择哪种类型，即 0 是否为文章的壁纸。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-11T19:39:47.683

我建议在您的评论表中添加一个类型字段。您可以使用“ARTICLE”或“WALLPAPER”之类的字符串填充它，或者创建一个参考表。就像是：

```
Type_Ref
- id
- desc 
```

Type_Ref 将包含自动递增的主键，以及墙纸或文章的描述。

然后在您的评论表中，您将只有一个 Type_Ref_Id 字段，并带有相应的 id。然后，每当您需要添加新的类型进行投票时，您只需向 ref 表添加一个条目即可。

# android - 获取最近和正在运行的应用程序列表而不是进程

> ID：12376646
> 
> 赞同：7
> 
> 时间：2012-09-11T19:32:09.833
> 
> 标签：android, android-package-managers

我尝试了很多来获取最近和正在运行的应用程序（而不是进程）的列表，但无法获得它。

我经历了有关此问题的所有 stackoverflow 问题，但我得到的唯一答案是关于正在运行的进程和最近的任务，而不是我们在三星移动任务管理器中长按主页按钮时可以看到的特定应用程序。

我可以通过以下代码获取正在运行的进程：

```
ActivityManager actvityManager = (ActivityManager)
this.getSystemService( ACTIVITY_SERVICE );
List<RunningAppProcessInfo> procInfos = actvityManager.getRunningAppProcesses();

for(RunningAppProcessInfo runningProInfo:procInfos){

        Log.d("Running Processes", "()()"+runningProInfo.processName);
} 
```

它给出了所有进程的包名，但我只想要我已经启动的应用程序的包名（最近和正在运行）。

如何从正在运行的应用程序进程中提取它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T19:41:35.073

更新：即使使用以下解决方案，我也看不到获取最近任务名称的方法，但这适用于当前正在运行和冻结的任务：[getRunningTasks](http://developer.android.com/reference/android/app/ActivityManager.html#getRunningTasks%28int%29)

Using`getRunningTasks`将返回一个`RunningTaskInfo`包含基础的列表`ComponentName`，您可以通过调用`getPackageName()`.

原始答案：

您应该查看[getRecentTasks](http://developer.android.com/reference/android/app/ActivityManager.html#getRecentTasks%28int,%20int%29)。其功能描述为

> 返回用户最近启动的任务列表，最近的是第一个，之后是较旧的。
> 
> 注意：此方法仅用于调试和呈现任务管理用户界面。

这应该会为您提供最近运行或正在运行的所有应用程序的列表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T19:42:07.677

最近你可以从[getRecentTasks](http://developer.android.com/reference/android/app/ActivityManager.html#getRecentTasks%28int,%20int%29)获得，它返回[RecentTaskInfo](http://developer.android.com/reference/android/app/ActivityManager.RecentTaskInfo.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-03T14:51:31.533

***对于 API 级别 < 21***

您需要此权限：

```
<uses-permission android:name="android.permission.GET_TASKS" /> 
```

而这段代码：

```
ActivityManager activityManager = (ActivityManager) this.getSystemService(Context.ACTIVITY_SERVICE);
List<ActivityManager.RecentTaskInfo> recentTasks = activityManager.getRecentTasks(10, ActivityManager.RECENT_IGNORE_UNAVAILABLE);
for (ActivityManager.RecentTaskInfo recentTask : recentTasks) {
    try {
        String packageName = recentTask.baseIntent.getComponent().getPackageName();
        ApplicationInfo appInfo = getPackageManager().getApplicationInfo(packageName, PackageManager.GET_META_DATA);
        String label = getPackageManager().getApplicationLabel(appInfo).toString();
        Log.i("APPS", label);
    } catch (PackageManager.NameNotFoundException e) {
        e.printStackTrace();
    }
} 
```

# ruby-on-rails - 将局部变量传递给在视图已经加载后呈现的局部变量

> ID：12376653
> 
> 赞同：4
> 
> 时间：2012-09-11T19:32:27.227
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2

**更新：**我刚刚发现这个其他线程解释了为什么我遇到这个问题（[将本地rails变量传递给javascript到部分](https://stackoverflow.com/questions/12342058/pass-local-rails-variable-to-javascript-to-partial)），但它没有列出修复它的步骤（或者至少它跳过了我没有的太多步骤'还不知道该怎么做。）问题似乎是传递给局部变量的局部变量不再是加载 new.html.erb 时存在的局部变量，因为直到单击事件才加载局部变量. 有可能解决这个问题吗？谢谢。

**原来的：**

我有一个与链接相关的点击事件，该链接仅在某些时候有效，我不知道为什么。当单击链接而不重新加载页面时，它应该将部分呈现到我的视图中。

这是我目前拥有的（不起作用）：

comps_helper.rb：

```
def addRound(f)
  render "add_round", f: f
end 
```

comps/new.html.erb

```
<div id="add_round"></div>
<%= link_to "Add round", addRoundLink_path, remote: true %> 
```

addRoundLink.js.erb

```
$("#add_round").html("<%=j addRound(f) %>"); 
```

有什么作用：

1.  如果我只是使用 <%= addRound %> 直接从 new.html.erb 调用辅助方法，它就可以工作。但是我需要在单击链接时触发它，以便用户可以根据需要向表单添加任意数量的部分。

2.  如果上面的代码中没有包含“f”参数，则 javascript 在点击时会起作用。例如，如果我更改部分内容使其仅包含一串文本，则单击链接时它将呈现该文本。这让我觉得我在 javascript 中包含“f”参数的方式存在问题。但我不确定为什么会这样，因为 javascript 不只是将该代码插入到 new.html.erb 中，其中我有带有“add_round”id 的 div 吗？

注意：这是我单击链接时在 javascript 控制台中看到的内容：GET http //0.0.0.0:3000/addRoundLink 500 (Internal Server Error)
jquery.js:8215

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T01:34:52.307

它不起作用，因为`f`仅存在于您的控制器操作的上下文中。

当用户单击您的链接时，会为您的 javascript 发出一个新的 HTTP 请求。处理此请求的控制器操作与呈现页面的操作不同，因此您需要`f`在此控制器操作中进行设置并将其作为本地传递给 addRoundLink.js.erb。

示例代码

*   我假设`f`是由您的模型对象/实例确定的。

在您的控制器中

```
 def add_round
        model = MyModel.find params[:id]
        f = model.determine_f

        render :partial => 'add_round', :locals => { :f => f }
   end 
```

在你的 new.html.erb

```
<%= link_to "Add Round", add_round_path(@model), :remote => true %> 
```

# memory - 如何编写代码来消耗大块的真实内存？

> ID：12376654
> 
> 赞同：0
> 
> 时间：2012-09-11T19:32:29.640
> 
> 标签：memory, memory-management

出于测试目的，应该使用超过 90% 的“真实”内存而不是“虚拟”内存。根本不是专家，只是使用 malloc 来声明大块。但那是虚拟的。然后不断地随机读/写到不同的位置，仍然只有 1% 左右。

有任何想法吗？非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T21:24:24.567

两种方式：

[内存分配工具](http://www.codeproject.com/Articles/3520/Memory-Allocation-Tool)

[内存缓存.Net 4.0 性能测试](https://stackoverflow.com/questions/11729023/memory-cache-net-4-0-performance-test-astonishing-result)

# php - 语法错误，给定布尔值

> ID：12376656
> 
> 赞同：-1
> 
> 时间：2012-09-11T19:32:34.103
> 
> 标签：php, mysql

我收到“警告：mysql_fetch_assoc() 期望参数 1 是资源，给定的布尔值”，代码如下：

```
$field_sql = 'SHOW FIELDS FROM '.$dbtable.' WHERE FIELD = '.$field;
$field_q = mysql_query($field_sql,$MJCONN);
$field_r = mysql_fetch_assoc($field_q);
}while($field_r = mysql_fetch_assoc($field_q)); 
```

我认为这与括号有关，但我无法解决问题，非常欢迎任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T19:37:15.240

`mysql_query`查询失败时返回`false`。我喜欢用这个代替`mysql_query`：

```
function mysql_query2($sql,$conn=null) {
    $r = $conn ? mysql_query($sql,$conn) : mysql_query($sql);
    if( $e = mysql_error()) trigger_error("MySQL error: ".$e,E_USER_WARNING);
    return $r;
} 
```

这将执行查询，然后检查错误并将它们设为 PHP 警告。这样，您可以轻松查看查询是否失败。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T20:33:15.003

I fixed it myself, it was a question of missing characters, in this case quotes.

Solution:

```
$field_sql = 'SHOW FIELDS FROM `' . $table . '` WHERE FIELD = "' . $column . '"'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T19:34:14.467

`$field_q`是`FALSE`，因为您的查询失败。请参阅[文档](http://se.php.net/msql_query)。修复您的查询以解决问题:)

# php - 意外的 T_BOOLEAN_OR

> ID：12376658
> 
> 赞同：-3
> 
> 时间：2012-09-11T19:32:45.617
> 
> 标签：php

我收到此代码的错误。我是 PHP 新手，但我的理解是`||`被翻译为“或”。我正在尝试检查上传的文件是否满足三个条件中的任何一个，如果满足则设置错误。

```
if ($uploaded_size > 1048576) || 
   ($uploaded_type == 'application/octet-stream') || 
   (file_exists($target))
{ 
    echo "Error: File was not uploaded.<br>"; 
    $ok=0; 
} 
```

错误指出“意外的 T_BOOLEAN_OR”

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-11T19:34:07.230

```
if ($uploaded_size > 1048576) || 
```

请注意，您在之前`if`以 a 结束语句，因此 the只是单独坐在外面。您还缺少 和 之间的括号。`)``||``||``(file_exists($target))` `{`

你可能想要这个：

```
if (($uploaded_size > 1048576) || 
    ($uploaded_type == 'application/octet-stream') || 
    (file_exists($target)))
{ 
```

或等价物：

```
if ($uploaded_size > 1048576 || 
    $uploaded_type == 'application/octet-stream' || 
    file_exists($target))
{ 
```

# java - 定制的摇摆面板出现了一小会儿

> ID：12376660
> 
> 赞同：0
> 
> 时间：2012-09-11T19:33:08.803
> 
> 标签：java, swing

在我`BlindSettings`扩展 JFrame 的类中，我有一个动态添加的代码片段`BlindPanels`（`BlindPanels`是一种自定义`JPanel`）。问题是，当我`BlindSettings`直接从我的主方法调用时，一切正常，但是如果我按照程序的顺序调用同一个类（比如首先是`Welcome`屏幕，然后是`MainSettings`屏幕，然后是`BlindSettings`），则会显示此面板只是一个很小的时刻，比如（1/10 秒）。所以我暂时看到了请求的面板，但随后它们自动消失了。

我添加此面板的部分如下

```
for(int i=0; i<=18; i++){
    BlindPanel panel = new BlindPanel(i, blindGround.getWidth(), blindGround.getHeight(), fontNormal2);
    blindGround.add(panel);
} 
```

什么可能导致这种情况？没有外部参数或其他外部因素会影响 GUI 的构建，它只是将 GUI-Stuff 添加到 JFrame。

（我不确定我应该在这里发布什么代码，因为这两个类`BlindSettings`和`BlindPanel`+/- 大。）

# vb.net - String.Split 拆分不正确的字符

> ID：12376663
> 
> 赞同：2
> 
> 时间：2012-09-11T19:33:16.303
> 
> 标签：vb.net, string

在 VB.NET 2010 中

拨打`string.split("³")`此线路`"³4002³1³1ÄTest³1ÄPhysician³"`

返回一个包含 8 个字符串的数组：

```
"","4002","1","1","Test","1","Physician","" 
```

据我所知`"³" != "Ä"`

这对我来说没有任何意义。有没有人知道为什么会发生这种情况，也许知道我怎样才能得到它给我期望的结果？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T19:50:36.463

在 VB.NET 上，它可能会尝试将字符串转换为既不能正确解释字符 ³ 也不能正确解释字符 Ä 的编码。它们必须被转换为公认的“默认”最佳解释值，并且这些转换后的值将根据 .Split 方法的标准返回 true。

对所有字符串强制使用 unicode 编码*应该可以*解决问题（包括对 .Split("³") 进行编码。对其进行编码并将其保存到拆分之前的变量中为 .Split(encodedValue)

# php - 使用名称作为键将变量推送到数组？

> ID：12376668
> 
> 赞同：3
> 
> 时间：2012-09-11T19:33:29.383
> 
> 标签：php

我有以下变量：

```
$something = 'whatever';
$hello = array();
$test = 123; 
```

我想将它们推入这样的数组中：

```
$data['something'] = 'whatever';
$data['hello'] = array();
$data['test'] = 123; 
```

我想知道是否有某种 PHP 函数（类似于`array_push()`）可以将变量推入数组，使用变量的名称作为键值？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-11T19:34:19.047

就在这里。[`compact()`](http://php.net/compact)会做到这一点。

# eclipse - 如何配置 Eclipse、GCC 和 OpenOCD 以与 STM32F4Discovery 板一起使用？

> ID：12376669
> 
> 赞同：7
> 
> 时间：2012-09-11T19:33:31.263
> 
> 标签：eclipse, gcc, openocd, stm32f4discovery

我拥有一个 STM32F4Discovery 板，它包含一个 STM32F4 微控制器和一个 ST-LINKv2 调试器接口。我想在这个设置上做一些简单的 C 编程，并想使用免费提供的工具来做。

以下是我所知道的：

*   可以将 Eclipse 配置为使用各种工具链（例如 YAGARTO 或其他工具链）为各种 ARM 目标进行交叉编译。
*   Eclipse 可以使用 GDB 进行远程调试。
*   OpenOCD 提供了一个 GDB 服务器。
*   OpenOCD（最新版本）同时支持 ST-LINKv2 和 STM32F4Discovery 板（包括该板的脚本）。

这是我不知道的：如何将这些部分组合成一个连贯的整体。我相信所有必要的活动部件都存在，但我不知道如何组装它们。我发现了一些零碎的东西，通常从“安装 Eclipse Indigo”之类的东西开始。是否有简单的教程、步骤列表或要检查的内容？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T10:24:31.110

我找到了使用以下工具链的教程：

*   牛使
*   Gnu 工具 ARM 嵌入式
*   开放式强迫症
*   OpenOCD -> stlink 连接

本教程清楚地解释了如何从一个塑料包装的 stm 到一个能够编程和调试你的 stm 的工作 eclipse 环境。我的 stm32f0-discovery 正在使用本教程。所以对你来说，我猜你的 stm32f4 会很好用。如果你想不通。我也得到了一个 stm32f4discovery，但我只是没有时间看它，但我仍然想看，所以也许这是我自己开始的一个很好的理由。所以我可以帮你搞定。

[教程链接](http://bartteunissen.com/blog/programming-and-debugging-a-stm32f0-discovery-with-eclipse/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-12T13:32:54.473

尝试从 ChibiOS 开始。它有大量可爱的教程和示例项目。从这里下载 ChibiOS：http: [//sourceforge.net/projects/chibios/](http://sourceforge.net/projects/chibios/)

`demos`解压它并使用ChibiOS 分发目录中的适当演示项目。例如`ChibiOS_2.6.5/demos/ARMCM4-STM32F401C-DISCOVERY/`.

然后阅读一篇关于如何将该项目导入 Eclipse 并开始调试的精彩文章：http: [//www.chibios.org/dokuwiki/doku.php?id= chibios:guides:eclipse2](http://www.chibios.org/dokuwiki/doku.php?id=chibios:guides:eclipse2)

另请查看 STM32F0 的模板项目： [https ://github.com/dobromyslov/stm32f0-chibios-template](https://github.com/dobromyslov/stm32f0-chibios-template)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-16T00:10:37.680

我发现自己处于同样的位置，我写了这篇关于使用 eclipse、GCC 和 ST-Link 工具设置环境的指南——尽管它不包括设置调试器，但我仍在努力！

[http://tecsploit.com/?page_id=190](http://tecsploit.com/?page_id=190)

# css - 如何以不同的半径将 div 右下角 (html) 舍入，然后是其他角？

> ID：12376671
> 
> 赞同：3
> 
> 时间：2012-09-11T19:33:55.340
> 
> 标签：css, html

我希望右下角的半径与其他角不同。我该怎么做？我需要将哪些 CSS 标记添加到 DIV 中，所以它看起来像这样。*见图片

有没有可能，有什么建议吗？你能添加一个很好的解释的链接吗？

谢谢您的帮助！

![在此处输入图像描述](../Images/af5cbbf193e3983ffb0d962e4a85402f.png)

参考[http://up351.siz.co.il/up1/trqzzidwwyoh.png](http://up351.siz.co.il/up1/trqzzidwwyoh.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T20:17:34.360

看起来您正在尝试创建自定义形状，而不是真正更改角的半径。对“CSS 形状”做一些谷歌搜索，有一种技术可以使用 CSS 来操作边框和角以创建任何形状。

[请参阅http://css-tricks.com/examples/ShapesOfCSS/](http://css-tricks.com/examples/ShapesOfCSS/)上的“对话泡泡”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T20:22:25.640

这是你想要的？无论如何，要使其工作，需要符合 CSS3 的浏览器。

JSFiddle 链接：http: [//jsfiddle.net/KGyUJ/7/](http://jsfiddle.net/KGyUJ/7/)

# mongodb - 如果违反唯一索引，则 Mongo 更新

> ID：12376676
> 
> 赞同：2
> 
> 时间：2012-09-11T19:34:15.863
> 
> 标签：mongodb, indexing, unique-constraint, insert-update, spring-data

我想知道是否有一种方法（配置/操作），它允许更新（从插入的记录中添加新数据，如在 save() 中）数据库中的现有文档，同时尝试插入其他违反唯一索引的文档。 ??

谢谢

我有 SocialProfile 文档，它代表与特定社交网络相关的域用户配置文件。
我想使用社交网络类型+该网络中唯一用户的组合作为唯一。

**{ type : "FB" , unique:"1111111111" }**

起初我想将这两个字符串合并为一个并使用串联作为文档 ID，然后在保存文档时会自动发生 upsert 但感觉错误的方法是正确的如果我错了。

更有意义的是将这些属性定义为复合唯一索引。
我希望能够根据该索引执行这些文档的更新插入。
我正在使用 Spring Data 框架，我一般如何支持这种操作和在特定的春季数据中。

感谢您的帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T20:18:04.967

正如克里斯所说，upsert 可能是正确的方法。你有一些示例数据吗？这是一个简单的例子：

```
db.coll.update(
  /* query */ {keys:"from", unique:"index"}, 
  /* new document */ {keys:"from", unique:"index", new_value:"foo"}, 
  /* upsert */ true, 
  /* multi */ false); 
```

它将使用查询中指定的键查询文档，如果存在，它将使用提供的文档更新该文档。如果该文档不存在，它将创建一个新文档。

# javascript - 单击时更改当前窗口大小我做对了吗？

> ID：12376681
> 
> 赞同：0
> 
> 时间：2012-09-11T19:34:31.860
> 
> 标签：javascript, forms, click, window, size

当用户点击表单上的提交按钮时，我想更改窗口的大小以适应页面

```
<html>
<head>
<title>PayPal Check out page</title>
</head>
<script>
</script>
<body>
<form action="https://www.paypal.com/cgi-bin/webscr" method="post">
<input type="hidden" name="cmd" value="_s-xclick">
<input type="hidden" name="hosted_button_id" value="KUF8GQ9DSJJ28">
<table>
<tr><td><input type="hidden" name="on0" value="Number of Agents">Number of Agents</td></tr><tr><td><select name="os0">
    <option value="1 Agent  -">1 Agent  - $1,280.00 USD</option>
    <option value="2 Agents -">2 Agents - $2,560.00 USD</option>
    <option value="3 Agents -">3 Agents - $3,840.00 USD</option>
</select> </td></tr>
</table>
<input type="hidden" name="currency_code" value="USD">
<input type="image" src="/img/order.png" border="0" name="submit" alt="PayPal - The safer, easier way to pay online!" onclick="window.resizeTo(1000,1000)">
<img alt="" border="0" src="https://www.paypalobjects.com/en_US/i/scr/pixel.gif" width="1" height="1" onclick="window.resizeTo(1000,1000)">
</form>

</body>
</html> 
```

这是我想出的代码，但似乎没有奏效

```
onclick="window.resizeTo(1000,1000)" 
```

有什么建议么

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T19:40:37.640

你的意思是这样的吗？

```
 (onclick="window.open('SOMETHING.html', 'windowname', 'width=500,height=400,toolbar=no,status=no,menubar=yes/no,scrollbars=yes/no,resizable=yes/no,directories=yes/no,location=yes/no') 
```

所以，就像在提交时一样，它会打开一些窗口，可能是同一个窗口，但可以根据需要调整它的大小等

# module - Joomla！2.5 以编程方式隐藏模块

> ID：12376683
> 
> 赞同：1
> 
> 时间：2012-09-11T19:34:40.953
> 
> 标签：module, components, joomla2.5, banner

**简而言之**

我正在尝试隐藏或取消发布带有另一个组件的模块。有人知道如何从代码中启用/禁用特定菜单项的模块吗？

* * *

**设想：**

我正在使用 T3 来构建我的模板。

我使用一个名为 Jreviews 的组件来列出事件，并且可以自定义视图。它由 joomla 菜单项分配的组件。

我还将横幅组件分配到同一菜单项的顶部。

我只想要第一次加载页面时的横幅组件，而不是当用户在 Jreviews 组件中搜索时。（搜索joomla后留在同一个url）

我可以在 Jreviews 组件中捕获搜索事件并按位置呈现模块。

```
<?php 
$position = 'user1';
$params     = array('style'=>'');
$document   = &JFactory::getDocument();
$renderer   = $document->loadRenderer('module');
$contents = '';
foreach (JModuleHelper::getModules($position) as $mod)  {   
    $contents .= $renderer->render($mod, $params);
}
echo $contents;
?> 
```

## 但我得到一个与组件中分配的副本相同的副本。

**问题**

仅当我在 Jreview 模板中通过代码加载模块横幅组件时，如何显示它？

非常感谢，

爱德华多

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T11:34:06.360

我找到了添加以下代码的方法

```
<?php 
$position = 'show-by-code';
$params     = array('style'=>'');
$document   = &JFactory::getDocument();
$renderer   = $document->loadRenderer('module');
$contents = '';
foreach (JModuleHelper::getModules($position) as $mod)  {   
    $contents .= $renderer->render($mod, $params);
}
echo $contents;
?> 
```

然后在模块管理中，我使用不属于我的模板的相同位置“按代码显示”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T07:32:49.033

如果可以的话，尝试在模块代码中也捕获事件，并在那里决定是否应该显示横幅。

# php - PHP DOM 将 HTML 附加到没有 DOMDocumentFragment::appendXML 的现有文档

> ID：12376686
> 
> 赞同：6
> 
> 时间：2012-09-11T19:34:45.323
> 
> 标签：php, domdocument, tidy

我需要将一些任意 HTML 加载到现有`DOMDocument`树中。以前的答案建议使用[`DOMDocumentFragment`](http://www.php.net/manual/en/class.domdocumentfragment.php)及其[`appendXML`](http://www.php.net/manual/en/domdocumentfragment.appendxml.php)方法来处理这个问题。

正如[@Owlvark](https://stackoverflow.com/users/1576269/owlvark)在评论中指出的那样，**xml 不是 html**，因此这不是一个好的解决方案。

我遇到的主要问题是，像这样的实体`&ndash`会导致错误，因为该[`appendXML`](http://www.php.net/manual/en/domdocumentfragment.appendxml.php)方法需要格式良好的 XML。

我们可以定义实体，但这并不能解决并非所有 html 都是有效 xml 的问题。

将 HTML 导入`DOMDocument`树的好解决方案是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-11T20:49:34.730

我想出的解决方案是`DomDocument::loadHtml`按照@FrankFarmer 的建议使用，然后获取解析的节点并将它们导入到我当前的文档中。我的实现看起来像这样

```
/**
* Parses HTML into DOMElements
* @param string $html the raw html to transform
* @param \DOMDocument $doc the document to import the nodes into
* @return array an array of DOMElements on success or an empty array on failure
*/
protected function htmlToDOM($html, $doc) {
     $html = '<div id="html-to-dom-input-wrapper">' . $html . '</div>';
     $hdoc = DOMDocument::loadHTML($html);
     $child_array = array();
     try {
         $children = $hdoc->getElementById('html-to-dom-input-wrapper')->childNodes;
         foreach($children as $child) {
             $child = $doc->importNode($child, true);
             array_push($child_array, $child);
         }
     } catch (Exception $ex) {
         error_log($ex->getMessage(), 0);
     }
     return $child_array;
 } 
```

# mysql - Yii AuthManager 模式和类型

> ID：12376687
> 
> 赞同：2
> 
> 时间：2012-09-11T19:34:50.657
> 
> 标签：mysql, rbac, yii

我对 Yii 的 AuthManager 和用于 DB 表的架构感到困惑。

1.  **AuthItem**表中的**类型**字段只能介于 0 和 2 之间（Role=2, Task=1, Operation=0）？
***   您能否使用本教程中使用的博客举例说明我可以找到存储在**bizrule**和**数据字段中的内容？***   **userid**字段必须是 varchar 吗？**

 **此模式（对于 MySQL）会产生任何冲突吗？

```
CREATE TABLE `AuthItem` (
  `name` varchar(60) NOT NULL,
  `type` tinyint(1) unsigned NOT NULL,
  `description` varchar(255),
  `bizrule` text,
  `data` text,
  PRIMARY KEY (`name`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

CREATE TABLE `AuthItemChild` (
  `parent` varchar(60) NOT NULL,
  `child` varchar(60) NOT NULL,
  PRIMARY KEY (`parent`,`child`),
  FOREIGN KEY (`parent`) REFERENCES `AuthItem` (`name`)
    ON DELETE CASCADE 
    ON UPDATE CASCADE,
  FOREIGN KEY (`child`) REFERENCES `AuthItem` (`name`)
    ON DELETE CASCADE
    ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

CREATE TABLE `AuthAssignment` (
  `itemname` varchar(60) NOT NULL,
  `userid` int(10) unsigned NOT NULL,
  `bizrule` text,
  `data` text,
  PRIMARY KEY (`itemname`,`userid`),
  FOREIGN KEY (`itemname`) REFERENCES `AuthItem` (`name`)
    ON DELETE CASCADE
    ON UPDATE CASCADE,
  FOREIGN KEY (`userid`) REFERENCES `User` (`userid`)
    ON DELETE CASCADE
    ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8; 
```

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T20:14:21.977

1.  是的，**类型**字段必须是[这些值](https://github.com/yiisoft/yii/blob/1.1.12/framework/web/auth/CDbAuthManager.php#L428)之一。

    ```
    0: operation, 1: task, 2: role 
    ```

2.  **bizrule**可以是任何[包含可执行 PHP 代码](https://github.com/yiisoft/yii/blob/1.1.12/framework/web/auth/CAuthManager.php#L148)的字符串，该代码[以分号](http://www.google.com/search?q=php%20eval%20semicolon&ie=UTF-8)[`return`](http://www.php.net/manual/en/function.eval.php)s`false`或`true`结尾。并且**数据**应该是一个[包含一些序列化值的字符串](https://github.com/yiisoft/yii/blob/1.1.12/framework/web/auth/CDbAuthManager.php#L342)，您可以通过操作**bizrule**中的变量来使用它们。**`$data`**

*****   **userid**字段可以是我认为的任何类型，但默认`varchar`实现[来自](https://github.com/yiisoft/yii/blob/1.1.12/framework/web/auth/CDbAuthManager.php#L66)[这里](https://github.com/yiisoft/yii/blob/1.1.12/framework/base/interfaces.php#L305)。**** 

 ***** * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-29T22:21:30.103

您只有三种不同类型的认证项；角色、任务和操作。现实情况是，它们实际上可以被同等对待，区别更多的是设计而不是实现。biz 规则用于确定用户是否具有访问权限，或者换句话说是权限的粒度。例如，用户可能有权创建用户，但只有基本用户，而不是管理员。这是 bizrules 可以给你的那种粒度。花时间设计角色和访问权限，身份验证实现将非常简单。youtube 上的这个播放列表提供了一个更好的例子。

[http://www.youtube.com/watch?v=7fGUtvwofU8&list=PLdfhvjWV26rQBM9gUAPG1BnTrDGsReQSr](http://www.youtube.com/watch?v=7fGUtvwofU8&list=PLdfhvjWV26rQBM9gUAPG1BnTrDGsReQSr)******

# emacs - 基于文件路径的不同扩展模式

> ID：12376696
> 
> 赞同：1
> 
> 时间：2012-09-11T19:35:57.067
> 
> 标签：emacs, elisp

基本上，我一直在尝试 nXhtml 模式，它在 Emacs 24 中非常缓慢和错误。

我正在处理 PHP 文件。我想用`*.php`as加载大多数文件`php-mode`，但如果我正在访问的文件位于`'/templates'`or`'/views'`文件夹中，则将文件加载到`html-mode`.

重命名文件或更改项目结构不是选项。我正在使用 24.1.1。我确信这是可能的，因此将接受指向正确方向的体面的伪代码解决方案。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-11T20:23:36.590

要执行您想要的操作，您需要将正确的正则表达式放入`auto-mode-alist`. 以下将做：

```
(add-to-list 'auto-mode-alist '("\\.php\\'" . php-mode))
(add-to-list 'auto-mode-alist '("/\\(templates\\|views\\)/.*\\.php\\'" . html-mode)) 
```

# matlab - 雅可比方法的 MatLab 算法

> ID：12376700
> 
> 赞同：1
> 
> 时间：2012-09-11T19:36:08.410
> 
> 标签：matlab, sum

我在将伪代码转换为 MatLab 算法时遇到了一些困难。具体来说，有一部分我不太知道该怎么做。我将把伪代码写到我不确定的地方：

```
 input n, (a_{ij}), (b_i), (x_i), M
    for k = 1 to M do
       for i = 1 to n do

           u_i = (b_i - sum[(from j = 1, (j ≠ i), to n) a_{ij} * x_j]) / a_{ii}
       end do 
```

我遇到的困难是我必须写总和部分。我想不通的是如何编写算法，以便不包括 j ≠ i 的术语。到目前为止，我已经写过：

```
function [k,x] = jacobimethod(A,b,M)
n = length(A);
u = zeros(1,n);
x = zeros(1,n);
for k = 1:M
    for i = 1:n
        u(i) = (b(i) - (A(i 
```

这就是我卡住的地方。到目前为止，我所有的算法都涉及到所有项都应该包含在内的总和，即使是 j = i 的那些。在这种情况下，总和项将是：

```
A(i,1:n)*x(1:n)' 
```

但是我怎样才能修改它以便`A(i,i)`不包括在内？

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T21:00:43.810

既然你已经提供了代码，所以努力了......我会指出一个更好的方法。当您使用 MATLAB 时，请尝试使用该语言的功能。不要假装你还在使用低级语言。因此，我们可以将 jacobi 迭代写为

```
X_(n+1) = inv(D)*(b - R*X_n) 
```

其中 D 是包含 A 的对角线的对角矩阵，R 是 A 的非对角元素的矩阵，因此对角线上有零。我们如何在 MATLAB 中做到这一点？

首先，以简单的方式构建 D 和 R。

```
D = diag(diag(A));
R = A - D; 
```

现在，我们应该认识到计算对角矩阵的逆是愚蠢的。更好的是计算对角线上每个元素的倒数。

```
Dinv = diag(1./diag(A)); 
```

所以，现在我们可以编写一个 Jacobi 迭代，如

```
X = Dinv*(b - R*X); 
```

看到不需要嵌套循环。我们根本不费心索引这些矩阵。现在将其全部封装在一个 MATLAB 函数中。保持友好，检查问题，并自由地使用评论。

====================================================

```
function [X,residuals,iter] = JacobiMethod(A,b)
% solves a linear system using Jacobi iterations
%
% The presumption is that A is nxn square and has no zeros on the diagonal
% also, A must be diagonally dominant for convergence.
% b must be an nx1 vector.

n = size(A,1);
if n ~= size(A,2)
  error('JACOBIMETHOD:Anotsquare','A must be n by n square matrix')
end
if ~isequal(size(b),[n 1])
  error('JACOBIMETHOD:incompatibleshapes','b must be an n by 1 vector')
end

% get the diagonal elements
D = diag(A);
% test that none are zero
if any(D) == 0
  error('JACOBIMETHOD:zerodiagonal', ...
    'The sky is falling! There are zeros on the diagonal')
end

% since none are zero, we can compute the inverse of D.
% even better is to make Dinv a sparse diagonal matrix,
% for better speed in the multiplies.
Dinv = sparse(diag(1./D));
R = A - diag(D);

% starting values. I'm not being very creative here, but
% using the vector b as a starting value seems reasonable.
X = b;
err = inf;
tol = 100*eps(norm(b));
iter = 0; % count iterations
while err > tol
  iter = iter + 1;
  Xold = X;

  % the guts of the iteration
  X = Dinv*(b - R*X);

  % this is not really an error, but a change per iteration.
  % when that is stable, we choose to terminate.
  err = norm(X - Xold);
end

% compute residuals
residuals = b - A*X; 
```

====================================================

让我们看看这是如何工作的。

```
A = rand(5) + 4*eye(5);
b = rand(5,1);
[X,res,iter] = JacobiMethod(A,b)

X =
      0.12869
   -0.0021942
      0.10779
      0.11791
      0.11785

res =
   5.7732e-15
   1.6653e-14
   1.5654e-14
   1.6542e-14
    1.843e-14

iter =
    39 
```

它是否收敛到我们从反斜杠得到的解决方案？

```
A\b
ans =
      0.12869
   -0.0021942
      0.10779
      0.11791
      0.11785 
```

对我来说看起来不错。更好的代码可能会检查对角线优势以尝试预测代码何时会失败。我可能在解决方案上选择了更智能的容差，或者为 X 选择了更好的起始值。最后，我想提供更完整的帮助，并附上参考资料。

你想看到的是好的代码的一般特征。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-11T20:10:28.397

您可以创建一个显式索引数组并删除您不需要的索引

```
% inside of the loop
idx = 1:n;
idx(i) = [];
u(i) = (b(i)-sum(A(i,idx).*x(idx)))/A(i,i); 
```

# delphi - 使用 TSQLMonitor 跟踪不起作用

> ID：12376701
> 
> 赞同：3
> 
> 时间：2012-09-11T19:36:08.923
> 
> 标签：delphi, delphi-xe

我正在尝试使用 TSQLMonitor 组件，但没有成功...

我的 OnTrace 事件中有以下代码：

```
procedure TForm1.SQLMonitor1LogTrace(Sender: TObject; TraceInfo: TDBXTraceInfo);
begin
  memo1.Lines.Add(traceinfo.message);
end; 
```

也可以，但是 SQL 命令中的“我的”值由问号（“？”）表示，我不知道为什么！看一个例子：

```
INTERBASE - isc_start_transaction
INTERBASE - isc_dsql_allocate_statement
**update "CDSUBPRODUTOS"  set
 "DATAINCLUSAO" = ?
where
 "CDSPRCODIGO" = ? and
 "DATAINCLUSAO" = ? and
 "DATAALTERACAO" is null and
 "CODUSUARIOALTERACAO" = ? and
 "CDSPRCODGRUPO" = ? and
 "CDSPRSITUACAO" = ? and
 "CDSPRDESCRICAO" = ? and
 "CDSPRMEDIDA" = ? and
 "CDSPRVALOR" = ? and
 "CDSPRUTILIZARFORMACAOPRECO_SN" = ?**

INTERBASE - isc_dsql_prepare
INTERBASE - isc_dsql_sql_info
INTERBASE - isc_portable_integer
INTERBASE - isc_dsql_describe_bind
INTERBASE - SQLDialect = 3
INTERBASE - isc_dsql_execute
INTERBASE - isc_dsql_free_statement
INTERBASE - isc_dsql_free_statement
INTERBASE - isc_commit_transaction 
```

我希望这些符号被替换为正确的值（在这种情况下，更改的值​​​）。我将 Delphi XE 与 Firebird 2.5 一起使用。

如果有人可以帮助我，我将不胜感激！！！拥抱！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T08:06:42.393

通过在 Internet 上搜索，似乎 TSQLMonitor 没有显示参数值。甚至还有一个 2002 [Quality Central issue #1358](http://qc.embarcadero.com/wc/qcmain.aspx?d=1358)要求提供参数支持。我也找不到任何设置或属性。

# asp.net-mvc - 重新安装果园cms

> ID：12376703
> 
> 赞同：1
> 
> 时间：2012-09-11T19:36:13.680
> 
> 标签：asp.net-mvc, asp.net-mvc-3, orchardcms

是否有可能从 orchard cms 重新安装（创建契约版数据库文件）？

我已经删除了数据库文件，现在当我启动果园时，我进入了目录浏览页面。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-11T20:22:03.253

如果要重新开始，请删除整个 App_Data 文件夹。

# asp.net - SEC7113：由于 mime 类型不匹配，CSS 被忽略 - ASP.NET MVC

> ID：12376709
> 
> 赞同：1
> 
> 时间：2012-09-11T19:36:42.670
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3, razor

在我的 ASP.NET MVC 应用程序中，我通过以下方式添加 CSS 和 JavaScript 文件：

```
@Script.AddCss("~/Content/css/style2.css", siteWide: true)
@Script.AddCss("~/Content/css/tipsy.css", siteWide: true)

@Script.AddJavaScript(localPath: "~/Content/js/modernizr-2.5.3.js", siteWide: true)
@Script.AddJavaScript(localPath: "~/Content/js/jquery/jquery.datatables.js", siteWide: true) 
```

输出如下所示：

```
@Script.OutputCss() 
```

JavaScript 几乎相同：

```
@Script.OutputJavaScript() 
```

然后模板引擎将所有文件组合成 AXD 文件并放入保留内容类型的页面源中。

这适用于所有浏览器，但不适用于 IE9。有时样式表未加载，控制台中会出现以下错误消息：

```
SEC7113: CSS was ignored due to mime type mismatch 
scripts.axd?type=Stylesheet&hash=74A0F67DE9D74AFCDAE1AA539EA11099 
```

除此之外，当您查看“网络”选项卡时，AXD 文件被加载了两次——2 个 AXD 文件用于 CSS，2 个 AXD 文件用于 JavaScript。每个文件之一的权重为 0 字节。这种情况并不总是发生，但只是有时，但过于频繁。

有人可以帮助我就问题所在提供建议吗？

事先谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-13T17:23:08.567

由于 MIME 类型不匹配 css 在 ie 9 和 10 中被忽略。MIME 类型可以通过名为[FIle TypesMan](http://nirsoft.net/utils/file_types_manager.html)的实用程序来正确它是由 NirSoft 创建的免费软件。事实证明，.css 的 MIME 类型已更改为 text/plain，从而阻止了 ie 渲染我的样式。使用 FileTypesMan 将其改回 text/css 解决了这个问题。

1.  从 NirSoft 站点下载 FileTypesMan。使用页面底部附近的链接为您的操作系统选择正确的版本（32 位、64 位和 Windows 98/ME 有不同的版本）。
2.  将文件解压缩到本地文件夹，然后双击 FileTypesMan.exe。
3.  FileTypesMan 列出所有文件类型后，在顶部窗格中向下滚动以找到 .css。
4.  双击以编辑设置。
5.  在打开的对话框的 MIME 类型字段中将值更改为 text/css。
6.  单击确定。任务完成。IE 10 现在应该表现自己（好吧，至少就呈现样式表而言）。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-09-11T20:20:37.387

在 IE9 中，当原始页面不在受信任区域中时，您需要跨域样式表的 text/CSS MIME 类型。当起源于受信任区域时，它应该在没有文本/CSS MIME 的情况下工作，这可能是您有时会遇到问题的原因。

因此，请确保您的页面指令中存​​在 ContentType 声明：

```
<%@ Page Language="C#" ContentType="text/css" %> 
```

希望这就是问题所在。

# android - 文本在 Android 上自动向下滚动

> ID：12376712
> 
> 赞同：1
> 
> 时间：2012-09-11T19:36:59.023
> 
> 标签：android

有谁知道从上到下垂直向下滚动的屏幕上出现文本的好方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T19:42:03.957

您是在寻找完整的星球大战爬行与透视图还是只是在屏幕上移动的常规文本块？

以下是完整星球大战爬行效果的几个 HTML/CSS 示例：

[http://ajaxian.com/archives/star-wars-html-and-css-a-new-hope](http://ajaxian.com/archives/star-wars-html-and-css-a-new-hope)

[http://forrst.com/posts/Starwars_Opening_Crawl-vr5](http://forrst.com/posts/Starwars_Opening_Crawl-vr5)

# android - 如何使此查询正确以选择所需的项目？

> ID：12376716
> 
> 赞同：0
> 
> 时间：2012-09-11T19:37:10.817
> 
> 标签：android, android-sqlite

嗨，我的数据库有这个问题，我的数据库被称为`DatabaseClass`. 数据库主要存储银行名称、客户帐号和余额等信息。我的一项活动中有两个微调器，显示银行和所选特定银行的帐号。在选择其中一个银行时，将显示该旋转器中该银行的相应帐号，直到其工作正常，现在选择“帐号”时，我正在尝试在该帐户中检索余额

这是我正在使用的代码：

```
account_for_spiiner_account=cursor2.getString(cursor2.getColumnIndex(DatabaseClass.KEY_ACCOUNT_NUMBER_ID));

c= myDatabase.getAmountfor_Account(account_for_spiiner_account); 
```

这是获取该特定帐号金额的代码：

```
public Cursor getAmountfor_Account(String account_for_spiiner_account) {
    // TODO Auto-generated method stub
    return myDataBase.query(DATABASE_TABLE_ACCOUNT, new String[] {
            DatabaseClass.KEY_ROW_ID, DatabaseClass.KEY_ACCOUNT_NUMBER_ID,
            DatabaseClass.KEY_AMOUNT_ID }, KEY_ACCOUNT_NUMBER_ID + "=?",
            new String[] { account_for_spiiner_account }, null,null,null);
} 
```

我正在尝试将金额作为`String`变量收集并检查我所做的金额`Toast`。但是吐司没有显示任何东西，知道我哪里错了吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T16:58:29.450

看起来我使用错误的余额条目来检索，解决了我自己的问题。

# asp.net-web-api - HttpClient 读取自定义 HttpContent 类型

> ID：12376718
> 
> 赞同：1
> 
> 时间：2012-09-11T19:37:22.713
> 
> 标签：asp.net-web-api, dotnet-httpclient

在服务器上，我使用自定义消息处理程序强制压缩。处理程序检查`Accept-Encoding`标头，如果它受支持（例如 GZip），将`HttpResponseMessage.Content`用`CompressedContent`. 这只是像这样压缩原始内容：

```
protected override async Task SerializeToStreamAsync(Stream stream, TransportContext context)
{
    Ensure.Argument.NotNull(stream, "stream");

    using (content) // original content
    {
        // creates a new GZip/Deflate stream
        var compressed = GetStream(CompressionMode.Compress, stream);
        await content.CopyToAsync(compressed);
        compressed.Dispose();
    }
} 
```

在客户端，我们可以通过检查`Content-Encoding`header并使用另一种`HttpContent`类型进行解压来实现解压：

```
protected async override Task SerializeToStreamAsync(Stream stream, TransportContext context)
{
    Ensure.Argument.NotNull(stream, "stream");

    using (content)
    {
        var compressed = await content.ReadAsStreamAsync();
        var decompressed = GetStream(CompressionMode.Decompress, compressed);
        await decompressed.CopyToAsync(stream);
        decompressed.Dispose();
    }
} 
```

我不确定的部分是我们是否应该使用自定义`HttpContent`类型来进行解压缩。在服务器上这样做是有意义的，因为我们真的没有其他方式来接触响应流。然而，在客户端上，这可以通过`StreamContent`直接解压缩标准甚至使用自定义`HttpClient`实现来完成。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T19:51:27.573

消息处理程序也可以在客户端上与 一起使用`HttpClient`，以处理请求/响应。在您的情况下，为服务器上发生的事情提供反向过程将很有用。

这就是 ASP.NET Web API 的美丽对称。

关于客户端消息处理程序的一篇很棒的文章在这里 - [http://byterot.blogspot.ch/2012/06/aspnet-web-api-client-delegating.html](http://byterot.blogspot.ch/2012/06/aspnet-web-api-client-delegating.html)

另一个例子可以在这里找到，在 Henrik 的博客上 - 它有点旧（针对 beta），但要点仍然相同：http: [//blogs.msdn.com/b/henrikn/archive/2012/02/16/扩展-httpclient-with-oauth-to-access-twitter.aspx](http://blogs.msdn.com/b/henrikn/archive/2012/02/16/extending-httpclient-with-oauth-to-access-twitter.aspx)

# c# - 在表格单元格中叠加两张图片

> ID：12376719
> 
> 赞同：0
> 
> 时间：2012-09-11T19:37:24.013
> 
> 标签：c#, asp.net, html, css

我正在尝试制作类似于披萨机的东西。

本质上，我要做的就是在另一个图像上添加一个半透明图像。

我以为我可以通过 CSS 和 z-index 属性来实现这一点，但我遇到了一些问题。

图片覆盖得很好，但我无法让它们在我的生命中定位在表格单元格的中心。

这是我想出的。但是定位会将图片移出表格单元格。

```
 <table style="width:400px" border="1">
        <tr>
                <td align="center">
                 <div style="position: fixed; z-index:100">   
                    <asp:ImageButton ID="imgbtn_pizzabase" ImageAlign="Middle" ImageUrl="~/SiteImages/pizza_test.png" runat="server" />
                </div>
                <div style="position: fixed; z-index:5000"> 
                    <asp:ImageButton ID="ImageButton1"  ImageAlign="Middle" ImageUrl="~/SiteImages/findme.png" runat="server" />
                </div> 

               </td>
        </tr>
.
. 
```

.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T19:48:57.740

您不需要 z-index。使用绝对定位。稍后在 DOM 中的元素将位于顶部。另外，不要使用表格来定位元素。那只是不好的做法。表格用于表格数据，比萨饼不是（我认为）。

所以在这个小提琴中，我得到了一个用作容器的“盘子”。在（in）板上是每一层的div。我使用了背景颜色和不透明度，但您也可以使用背景图像（或只是 img 标签）。

请注意，该板具有`position: relative`. 需要一个位置来强制层在板内绝对定位。这样，您可以轻松地移动盘子，比萨饼也会随之移动。如果需要，您可以将盘子放在表格单元格中，这样您就可以显示一张比萨饼的桌子。小提琴中的 css 会自动为您解决这个问题。您可以通过给它一个 将板水平`margin: 0 auto`居中在其父单元中，这样它就在父单元格中居中。

[http://jsfiddle.net/GolezTrol/nyzrT/1/](http://jsfiddle.net/GolezTrol/nyzrT/1/)

# javascript - Shadowbox 关闭 ipad 上的 safari

> ID：12376721
> 
> 赞同：2
> 
> 时间：2012-09-11T19:37:30.303
> 
> 标签：javascript, jquery, ipad, shadowbox, ipad-2

这发生在 iPad 及其原生 Safari 浏览器中：

我有 2 页打开一个影子框，它加载第二页，其中有一个表单。一旦用户从表单中选择了一些字段并按下按钮，表单页面（在影子框中）就会调用一些可以完美运行的函数，最后它会调用`parent.closeShadowbox()`，这是第一页中的一个函数，它执行原生的影子框`Shadowbox.close()`。

当它`Shadowbox.close`被调用时，它会关闭整个浏览器，而不仅仅是 shadowbox。

我用谷歌搜索过，我在 shadowbox 的网站论坛上搜索过，什么也没有。

有人知道发生了什么吗？

# windows-phone-7 - 如何禁用多指交互？

> ID：12376726
> 
> 赞同：1
> 
> 时间：2012-09-11T19:37:51.587
> 
> 标签：windows-phone-7

我正在开发 WP7 应用程序。我希望用户与画布交互，但只用一根手指。我正在使用`Manipulation`事件来跟踪触摸事件。如何禁用多指交互？

# ruby-on-rails - Ruby on Rails：如何组合两个数组并使用“where”方法？

> ID：12376727
> 
> 赞同：0
> 
> 时间：2012-09-11T19:37:52.533
> 
> 标签：ruby-on-rails, ruby

例如，我想组合两个数组并添加 where 子句，如下所示：

(Recipe.current + Recipe.previous).where(:name => "ABC")

我知道您可以将它组合成一个（Recipe.where("current is true or previous is true")），但我有一些复杂的查询迫使我以上述方式组合数组。

可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T20:01:35.107

答案取决于您要运行多少数据库查询来获取信息。

如果可以进行 2 个数据库查询，则可以执行以下操作：

```
rel     = Recipe.where(:name => "ABC")
recipes = rel.current | rel.previous 
```

如果您想在 1 个数据库查询中包含所有内容，则必须`OR`在关系中使用子句，除非您想超越常规的 ActiveRecord 方法并使用 Arel 或查询生成宝石之一。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T20:33:36.943

Your model's `.current` and `.previous` seems like a scope returning a `ActiveRecord::Relation` object. For these objects the method `.where` is available, but when you combine these objects its returning an Array. Arrays does not have the `.where`. So you have to pass that query before th combination or clean the queries mess. If you choose the second i'd highly recommend the [Squeel](https://github.com/ernie/squeel) gem.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-11T19:45:16.913

我猜你想在 Rails 中创建一个复杂的单个 SQL 查询来归档你的目标？如果您可以在普通的 SQL 查询中做到这一点，那么在 Rails 中通常是可能的。

构建自定义 SQL 查询字符串可能是另一种解决方案。

另一种方法是组合这些数组并使用 Ruby 的“拒绝！” 要删除与您的模式不匹配的元素，可能会出现一些性能问题。

# c# - 绑定文本框不显示添加新行

> ID：12376730
> 
> 赞同：1
> 
> 时间：2012-09-11T19:38:02.613
> 
> 标签：c#, winforms, data-binding, bindingsource, databound-controls

我正在使用绑定到绑定源（在代码中设置）的数据网格视图、绑定导航器和文本框。当我在网格中选择行时，内容显示在文本框中，一切都很好。

```
txtQty.DataBindings.Add("Text", bsInvoiceDetails, "Detail_Quantity"); 
```

接下来，我单击绑定导航器上的添加。它在数据网格中添加了一个空白行，这很好，但它不会清除文本框。网格中突出显示的行是不同的行。当我手动选择新行时，文本框仍然没有改变。

如果我在网格中选择新行的情况下输入 texboxes，它实际上会更改不同的行值。

我不明白为什么这是我们的解决方法。

*   帮助

更新：

运行查询，返回数据表...将其附加到数据集...数据集是绑定源的数据源...

```
dsInvoiceDetails = new 
dsInvoiceDetails.Tables.Add(dtInvoiceDetails);

bsInvoiceDetails.DataSource = dsInvoiceDetails;
bsInvoiceDetails.DataMember = "Invoice_Detail"; 
```

将网格和绑定导航器挂钩到绑定源的代码...

```
gridInvoiceDetails.DataSource = bsInvoiceDetails;
bnInvoiceDetails.BindingSource = bsInvoiceDetails; 
```

选择网格行时，绑定源“自动”填充上方的文本框。完美运行。

绑定导航器有一个很酷的按钮来添加行。点击那个。它在网格中添加一行。伟大的。But when the new row is selected nothing changed with the bound text boxes.

我可能需要处理绑定源上的“AddingNew”事件......

希望这有助于为您定义更多的问题。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-10-17T16:46:21.123

自从我问这个问题已经很久了，但它继续受到关注，所以这里有一些额外的信息。我基本上创建了发票详细信息的新实例并将其分配给事件 NewObject。

所以我确实添加了一个在添加新行时触发的事件：

```
 bsInvoiceDetails.AddingNew += new AddingNewEventHandler(bsInvoiceDetails_AddingNew); 
```

这是触发的代码：

```
 void bsInvoiceDetails_AddingNew(object sender, AddingNewEventArgs e)
    {
        try
        {
            InvoiceDetail id = new InvoiceDetail();
            id.InvoiceID = invoice.InvoiceID;   // Make sure we are hooked to this invoice.
            id.DetailDate = DateTime.Today;
            id.DetailQuantity = 0;
            id.DetailRate = 0;
            id.DetailTotal = 0;
            id.DetailDescription = "* New Detail Description *";

            e.NewObject = id;
        }
        catch (Exception ex)
        {
            ErrorManager em = new ErrorManager(ex, "InvoiceEditForm.cs", "bsInvoiceDetails_ListChanged", "Adding a new detail item", "sql");
        }
    } 
```

我认为这就是我为解决这个问题所做的一切。如果这不能帮助您解决问题，请随时发布另一个问题。

# mysql - MySQL更新不更新

> ID：12376733
> 
> 赞同：0
> 
> 时间：2012-09-11T19:38:19.683
> 
> 标签：mysql

选择有效并返回 1 个结果。

```
SELECT * FROM `list` WHERE `email` = 'john@doe.com' AND `cid` = 1; 
```

此更新有效，没有错误，没有记录受影响！！！

```
UPDATE `list` 
  SET `message` = 'test', `status` = 0 
WHERE `email` = 'john@doe.com' AND `cid` = 1; 
```

表结构

```
CREATE TABLE `list` (
    `id` BIGINT(19) NOT NULL AUTO_INCREMENT,
    `email` VARCHAR(255) NULL DEFAULT NULL,
    `cid` INT(10) NOT NULL DEFAULT '0',
    `message` TEXT NULL,
    `date` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    `status` TINYINT(1) NOT NULL DEFAULT '0',
    PRIMARY KEY (`id`),
    INDEX `cid` (`cid`),
    INDEX `date` (`date`),
    INDEX `status` (`status`)
)
COLLATE='utf8_general_ci'
ENGINE=MyISAM; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T19:49:19.797

MySQL 服务器报告没有记录受到影响，因为即使有一行符合条件，也不需要更新：它已经有`message`= 'test' 和`status`= 0。

如果您想**始终**更新日期字段，请尝试此查询：

```
UPDATE `list` 
  SET `message` = 'test', `status` = 0, `date`=NOW()
WHERE `email` = 'john@doe.com' AND `cid` = 1; 
```

# tfs - TeamCity CI 为 TFS 功能分支构建

> ID：12376737
> 
> 赞同：4
> 
> 时间：2012-09-11T19:38:40.863
> 
> 标签：tfs, continuous-integration, teamcity, teamcity-7.0

除了不断构建发布/功能分支之外，我在 Team City 中几乎所有东西都设置得很完美。

这将很难描述，但希望它应该是有意义的。

我在 TFS 中有以下源代码控制布局：

```
$/ProjectName/releases/1.2
$/ProjectName/features/create-doodads
$/ProjectName/trunk 
```

我有以下构建参数：

```
env.SourceBranch = trunk 
```

这用于配置源代码控制根：

```
Root = $/ProjectName
CheckoutRule = +:%env.SourceBranch%=>./ 
```

这就是事情变得有趣的地方：

当我运行**自定义构建**并手动指定`env.SourceBranch`时，构建将使用指定的分支运行，因为它是在 Checkout Rule 中配置的。7.1 有一个新功能，它在项目页面上的内部版本号旁边显示一个分支标签，然后它将正确显示在构建和构建链中的所有后续构建旁边。

到目前为止一切顺利，但是，当我再次签入分支时，它不会自动运行。

我理解为什么会发生这种情况......结帐规则默认是`trunk`这意味着它不匹配在`releases`or下发生的任何签入`features`，但是我不确定我的选项是什么。

我想我想要的是能够指定一个构建触发器，该触发器设置一个传递给 vcs 根的参数......或类似的东西。

任何帮助将不胜感激，如果不清楚，请告诉我，我将尝试进一步解释。

编辑：

我尝试使用结帐规则，执行以下操作：

```
+:trunk=>./
+:releases/*=>./
+:features/*=>./ 
```

不幸的是，这不起作用。

看来我正在尝试做的是[这里建议](http://devnet.jetbrains.net/thread/438168)的内容，这让我认为这还不可能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-14T18:19:37.037

我认为您所描述的只是尝试根据触发器从不同的分支自动构建（类似于 git 的工作方式）。不幸的是，在撰写本文时，我知道这不是 TC 中分布式模型（如 git 和 mercurial）之外的源代码控制选项。

我建议基于模板创建不同的构建配置，每个配置使用构建参数中指定的不同分支。我认为如果您遵循 CI 推广模型，这将是最有帮助且易于追踪的。因此，您的示例中有三个构建配置和一个模板，其中所有三个构建之间的所有内容都完全相同，除了一个参数：%env.SourceBranch%。

# .net - WCF 数据服务和 Azure 表存储：如何使用 PartitionKey / RowKey 作为主键

> ID：12376741
> 
> 赞同：0
> 
> 时间：2012-09-11T19:38:58.270
> 
> 标签：.net, wcf-data-services, visual-studio-2012, odata, azure-table-storage

为什么我的实体“Person”的以下代码在我的 WCF 数据服务中生成错误：

```
[System.Data.Services.Common.DataServiceKey("PartitionKey", "RowKey")]
public class Person : TableServiceEntity
{
    public string Name { get; set; }
    public int Age { get; set; }
    ... etc 
```

错误：

> 请求错误
> 
> 服务器在处理请求时遇到错误。异常消息是“在数据上下文类型“PersonDataServiceContext”上，有一个顶级 IQueryable 属性“Person”，其元素类型不是实体类型。确保 IQueryable 属性是实体类型或在数据上下文类型上指定 IgnoreProperties 属性以忽略此属性。有关更多详细信息，请参阅服务器日志。异常堆栈跟踪是：
> 
> 在 System.Data.Services.Providers.ReflectionServiceProvider.PopulateMetadata(IDictionary `2 knownTypes, IDictionary`2 childTypes, IDictionary 1.CreateMetadataAndQueryProviders `2 entitySets) at System.Data.Services.Providers.BaseServiceProvider.LoadMetadata() at System.Data.Services.DataService`(IDataServiceMetadataProvider& metadataProviderInstance, IDataServiceQueryProvider& queryProviderInstance, BaseServiceProvider& builtInProvider, Object& dataSourceInstance) 在 System.Data.Services.DataService`1.CreateProvider() at System.Data.Services.DataService`1.HandleRequest() 在 System.Data.Services.DataService`1.ProcessRequestForMessage(Stream messageBody) 在 SyncInvokeProcessRequestForMessage(Object , Object[] , Object[] ) 在 System.ServiceModel.Dispatcher.SyncMethodInvoker.Invoke(Object instance, Object[ ] 在 System.ServiceModel.Dispatcher.DispatchOperationRuntime.InvokeBegin(MessageRpc& rpc) 在 System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage5(MessageRpc& rpc) 在 System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage31(MessageRpc& rpc) 的输入，Object[]& 输出) ) 在 System.ServiceModel.Dispatcher.MessageRpc.Process(Boolean isOperationContextSet)

我究竟做错了什么？如果我添加一个名为 PersonID 的属性，错误就消失了，但是我需要通过 PartitionKey 和 RowKey 来访问我的实体，并且类中的 DataServiceKey 装饰没有做任何事情。

我正在使用 Visual Studio 2012、.NET Framework 4.0、Silverlight 5。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T16:51:33.633

这似乎是反射提供程序的限制，可能不是预期的限制。我将在内部将此作为错误提交，但在我们修复之前，这里有一个解决方法......

您可以使用[new 修饰符](http://msdn.microsoft.com/en-us/library/51y09td4%28v=VS.71%29.aspx#vclrfnew_newmodifier)隐藏通过/从基类传递所需的值：

```
using System;
using System.Data.Services.Common;

namespace SO.OData
{
    [DataServiceKey("PartitionKey", "RowKey")]
    public class Question : TableServiceEntry
    {
        public new string PartitionKey
        {
            get { return base.PartitionKey; }
            set { base.PartitionKey = value; }
        }

        public new string RowKey
        {
            get { return base.RowKey; }
            set { base.RowKey = value; }
        }

        public string Text { get; set; }
        public User AskedBy { get; set; }
        public DateTimeOffset AskedAt { get; set; }
    }

    public abstract class TableServiceEntry
    {
        public string PartitionKey { get; set; }
        public string RowKey { get; set; }
    }
} 
```

# ios - 从照片背景中检测并切出聚焦对象

> ID：12376745
> 
> 赞同：2
> 
> 时间：2012-09-11T19:39:12.007
> 
> 标签：ios, image, camera

我想检测一个在相机中聚焦的物体，并将未聚焦的背景剪掉并用图像替换。这可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T20:05:59.827

这是*微乎其微*的可能，但需要一些繁重的计算。据我所知，没有现成的 iOS 库。*因此，如果您问“是否可以轻松*做到这一点？”，我会回答，*恐怕不会*。

*看起来*这样做的工具通常会使用一些快捷方式，例如

*   利用人脸检测（即只要“对象”是*人脸*，它们就可以工作）
*   利用区域分析（即他们检查图片中间的任何内容，无论是否集中）

我相信 Quartz 可以进行人脸识别。无论如何，请查看[iPhone 上的人脸识别](https://stackoverflow.com/questions/10272129/face-recognition-on-the-iphone)。

在一般和混乱的情况下，您通常可以通过分析图像中的对比度或空间频率来识别聚焦区域（假设存在），这些区域被划分为小区域（通常为 16x16 或 8x8 像素）。那些具有低对比度和/或缺少高频的区域是背景，而高频（锐度）的存在表示聚焦区域。

这不会告诉您图像边界，还会给出几个误报（可能还有负数）；但在此阶段结束时，您将对原始图像进行采样，其中每个像素的边为 16 像素，状态为“聚焦”、“未聚焦”和“不确定”。

对于此地图，您必须应用启发式方法，例如：

*   边框通常是背景的一部分（因此应该测试为阳性）
*   小尺寸的焦点区域可能是假阴性
*   小尺寸的未聚焦区域可能是误报

在这个细化阶段结束时，您应该有一些连续的大“斑点”集中区域。然后检查它们的边界，寻找颜色或亮度的急剧过渡（通常在从斑点中心的径向方向上）。这是另一个启发式方法：我们假设您不会将红色苹果聚焦在红色背景上，或者如果您这样做，苹果将具有显示黄色、白色或非常浅红色的高光，并允许跟踪“轮廓”。

一旦每个 blob 都有自己的轮廓，您就可以将其用于剪切。

您必须使用 Core Image 等工具来完成所有这些工作

[http://developer.apple.com/library/mac/#documentation/GraphicsImaging/Conceptual/CoreImaging/ci_intro/ci_intro.html](http://developer.apple.com/library/mac/#documentation/GraphicsImaging/Conceptual/CoreImaging/ci_intro/ci_intro.html)

或者，更适合该任务，vImage

[http://developer.apple.com/library/ios/#documentation/Performance/Conceptual/vImage/Introduction/Introduction.html#//apple_ref/doc/uid/TP30001001](http://developer.apple.com/library/ios/#documentation/Performance/Conceptual/vImage/Introduction/Introduction.html#//apple_ref/doc/uid/TP30001001)

# ruby-on-rails-3 - Ruby on Rails，简单形式，发送多个变量值（即不同的行）

> ID：12376747
> 
> 赞同：1
> 
> 时间：2012-09-11T19:39:24.823
> 
> 标签：ruby-on-rails-3, forms, simple-form

这应该很简单，但我似乎找不到任何文档。我正在使用 Rails 3.2 和 simple_form。我想制作一个表单，用户可以一次提交多行数据。例如，表格将是：

动物类型：***_* _** 名称：***_* ____**

我希望他们能够提交多行。所以他们可以这样做：

```
Animal type:  Dog    Name: Fido
Animal type:  Dog    Name: Charley
Animal type:  Cat    Name: Logan 
```

等等

目标是能够提交与用户一样多的项目，并通过 javascript 创建新的输入行。我只是不知道如何为表单提交编写代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T19:55:13.687

您将需要使用 javascript 做一些事情。这是一个类似功能的 jQuery 实现的一些代码（仅适用于 1 个字段，您需要对两个字段进行相应调整）：

```
jQuery(document).ready(function() {
   jQuery('#linkToClick').click(function() {
   var id_count = document.getElementById('id_count');
   var newIndex = parseInt(id_count);
   var html = '<input type="text" name="type[' + newIndex + '] size=15 />';
   jQuery('#idOfWhereToAdd').before(html);
   id_count.value = newIndex + 1;
   return false;
   }) 
}); 
```

这假设您的表单上有一个隐藏的输入，可能值为 0 或 1，id 为 id_count。还需要一个 id 为 linkToClick 的标签（链接）。

试一试，让我知道它是如何工作的。

# c# - 将共享配置与 Entlib5 一起使用时如何覆盖日志记录配置？

> ID：12376749
> 
> 赞同：1
> 
> 时间：2012-09-11T19:39:25.530
> 
> 标签：c#, logging, enterprise-library

我在所有应用程序都有一个通用（共享）配置并且我想覆盖特定应用程序中的一些共享设置的场景中使用 Enterprise Library 5 日志记录块。

我按照[此处](http://msdn.microsoft.com/en-us/library/ff664552%28v=pandp.50%29.aspx#AdvancedConfigSharingConfig)的说明（为应用程序应用通用配置结构）并能够在我的应用程序中使用共享日志记录设置。

问题是如何覆盖共享设置，即更改滚动平面文件跟踪侦听器文件名属性？你有任何工作的例子吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T01:25:44.160

[请参阅此处](http://www.microsoft.com/en-us/download/confirmation.aspx?id=6932)提供的动手实验室集中的配置源实验室。

# .net - 如何防止编译器在 mstest 中优化对 Trace.Write() 和 Debug.Write() 的调用

> ID：12376754
> 
> 赞同：0
> 
> 时间：2012-09-11T19:39:54.517
> 
> 标签：.net, visual-studio-2010

它以前在同一个项目中工作过，但现在不起作用。我在本网站或其他地方可以找到的任何相关问题中提出的解决方案都没有任何运气。

我编写了一个程序来执行一些长时间运行的进程，并且我已将代码放入仅包含一个 mstest 项目的解决方案中，更愿意避免任何形式的 U/I 必要性。我想使用类似于以下的代码将一些状态发送到输出窗口：

```
if (counter % 100 == 0)
{
    Trace.WriteLine(string.Format("Inserted {0} records into {1}.", counter, proprietaryDetails));
} 
```

我正在使用 IDE 运行测试，而不是命令行。输出窗口中不显示任何内容。调试时无法在 Debug.Write() 或 Trace.Write() 语句上设置断点。

我做了以下事情：

1.  确保我在调试模式下构建项目。
2.  确保当我右键单击输出窗口时检查“程序输出”
3.  尝试使用 Ctrl-R + T 和 Ctrl-R + Ctrl-T 调试和运行测试。
4.  我没有可能会禁用默认跟踪侦听器的 .config 文件。

任何帮助表示赞赏。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T20:27:13.370

也许类似以下内容会有所帮助？

```
TextWriterTraceListener myWriter = newTextWriterTraceListener(System.Console.Out);
Debug.Listeners.Add(myWriter);
Trace.Listeners.Add(myWriter); 
```

# objective-c - 通过蓝牙在两部手机上同步事件

> ID：12376755
> 
> 赞同：0
> 
> 时间：2012-09-11T19:39:57.950
> 
> 标签：objective-c, ios, bluetooth, gamekit

我有一个通过蓝牙连接附近手机的应用程序（使用 GameKit）。我想触发一个简单的硬件事件，让所有对等点同时发生。有没有办法在所有设备上协调事件而无需使用服务器？

我想也许我可以只使用设备的内部时钟，但问题是，有可能会关闭一个或多个时钟。我能想到的唯一方法是查询同一个 NTP 服务器并比较时间偏移量。问题在于：a）触发事件有点慢，因为我需要插入人工延迟，b）需要有效的互联网连接。

关于如何以精确的准确性通过蓝牙同步事件有什么好主意吗？

# batch-file - 如何将参数值传递给批处理文件

> ID：12376756
> 
> 赞同：0
> 
> 时间：2012-09-11T19:40:03.033
> 
> 标签：batch-file

我有一个 bacthfile 并且我想传递参数值，我该怎么做？

```
@echo off
ECHO Param1: Database Name: %1
ECHO Param2: Datasource : %2
ECHO Param3: DB User Id: %3
ECHO Param4: Password: %4

SET DBNAME=%1
SET DBSERVER=%2
SET DBUSER=%3
SET PASSWORD=%4 
```

我要设置的值是 DBNAME、DBSERVER、DBUSER 和 PASSWORD 是批处理文件的参数吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T19:51:52.803

您只需将参数附加到文件名的末尾即可将参数传递给批处理文件，每个参数之间有一个空格：

```
FOO.BAT NorthwindDB ServerName msbyuva 12345 
```

如果您需要在参数中传递空格，只需将其括在引号中：

```
FOO.BAT NorthwindDB "Server Name" msbyuva 12345 
```

如果您需要删除 FOO.BAT 中的这些引号，您可以使用`~`符号：

```
set ServerName=%~2 
```

# salesforce - SalesForce 的 LEFT OUTER JOIN 不起作用

> ID：12376757
> 
> 赞同：1
> 
> 时间：2012-09-11T19:40:06.987
> 
> 标签：salesforce, left-join, soql

我尝试对 SalesForce Db 执行左外连接，以从 Product2 表中获取 Id 和 ProductCode 字段，并从关联的（如果存在）PriceBookEntry 中获取一些字段。我也有 ID='01sd00000008iWpAAI' 的 PriceBook2。这是示例查询：

```
SELECT Id, ProductCode, 
(SELECT Id, PriceBook2Id, PriceBookEntry__r.Product2Id FROM PriceBookEntry__r 
WHERE PriceBook2Id='01sd00000008iWpAAI') 
FROM Product2 WHERE ProductCode IN 
('151','250','256','270','289') 
```

返回给我的错误是：

```
INVALID_TYPE: PriceBookEntry__r.Product2Id FROM PriceBookEntry 
WHERE PriceBook2Id='01sd00000008iWpAAI') 
^ ERROR at Row:1:Column:89 
Didn't understand relationship 'PriceBookEntry__r' in FROM part of query call. 
If you are attempting to use a custom relationship, 
be sure to append the '__r' after the custom relationship name. 
Please reference your WSDL or the describe call for the appropriate names.. 
```

我为此查询尝试了几种变体，但没有成功。我在 Product2 表中有这些 ProductCodes 的行。

我在那里想念什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T20:22:40.070

我找到了解决方案：关键在 PriceBookEntry 表中。它应该是复数形式（PriceBookEntries）。所以查询应该是：

```
SELECT Id, ProductCode, 
(SELECT Id, PriceBook2Id, Product2Id FROM PriceBookEntries
WHERE PriceBook2Id='01sd00000008iWpAAI') 
FROM Product2 WHERE ProductCode IN 
('151','250','256','270','289') 
```

# java - PHP 网站上的地图放置编辑器

> ID：12376759
> 
> 赞同：0
> 
> 时间：2012-09-11T19:40:12.720
> 
> 标签：java, php, javascript, embed

我需要向我的网站添加一个元素，以允许我编辑地图。（不是 HTML5）这是一个例子： ![思科无线编辑器](../Images/6680551f750defb6c617dd9d345c3140.png)

基本上它需要嵌入到页面中。它需要显示用户为他们的位置上传的地图。然后他们将选择要添加到地图的项目，例如计算机或打印机。选择项目后，他们将拖动或单击地图以放置项目。单击保存后，这会将这些数据发送到另一个页面，以将所有数据输入到 MySQL 表中。

操作和概念相当简单。唯一让我陷入困境的是如何为网络实际编写代码。我宁愿不使用Java，也不能使用Flash。这可以用 Java 脚本完成吗？

有谁知道有关于这个教程的任何地方，或者有关于如何克服这个的建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T19:44:39.163

也许您可以尝试使用 jquery 可拖动事件[http://jqueryui.com/demos/draggable/#snap-to](http://jqueryui.com/demos/draggable/#snap-to)。

在上面链接的示例“snap-to”中，您可以按照您的要求进行操作。

# python - 在 Google 搜索中使用 python mechanize 的问题

> ID：12376762
> 
> 赞同：1
> 
> 时间：2012-09-11T19:40:26.110
> 
> 标签：python, web-scraping, mechanize

我最近发现了 python 库 mechanize，我想用它来从 Google 搜索中获取链接，但无法理解输出。这是我的代码片段：

```
import mechanize, cookielib
br = mechanize.Browser()
br.addheaders = [('User-agent', 'Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.9.0.1) Gecko/2008071615 Fedora/3.0.1-1.fc9 Firefox/3.0.1')] 
br.set_handle_robots(False)
url = 'https://www.google.com/search?num=10&hl=en&site=&q=dog&oq=dog&aq=f&aqi=g10&aql=1&gs_sm=e'

response = br.open(url)

links = [link for link in br.links()] 
```

它运行正确，但输出如下所示：

```
[
Link(base_url='https://www.google.com/search?num=10&hl=en&site=&q=dog&oq=dog&aq=f&aqi=g10&aql=1&gs_sm=e', url='/support/websearch/bin/answer.py?answer=186645&form=bb&hl=en', text='Learn more', tag='a', attrs=[('href', '/support/websearch/bin/answer.py?answer=186645&form=bb&hl=en')]),
Link(base_url='https://www.google.com/search?num=10&hl=en&site=&q=dog&oq=dog&aq=f&aqi=g10&aql=1&gs_sm=e', url='http://www.google.com/intl/en/options/', text='More', tag='a', attrs=[('class', 'gbgt'), ('id', 'gbztm'), ('href', 'http://www.google.com/intl/en/options/'), ('onclick', 'gbar.tg(event,this)'), ('aria-haspopup', 'true'), ('aria-owns', 'gbd')]),
Link(base_url='https://www.google.com/search?num=10&hl=en&site=&q=dog&oq=dog&aq=f&aqi=g10&aql=1&gs_sm=e', url='/webhp?hl=en&tab=ww', text='', tag='a', attrs=[('href', '/webhp?hl=en&tab=ww'), ('onclick', 'gbar.logger.il(39)'), ('title', 'Go to Google Home')]),
...,
] 
```

如何获取实际 URL，而不是这种“点击我”样式响应？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T06:49:29.227

您正在拉入页面上的每个链接，您需要将其过滤到仅相关的搜索结果链接。我*认为*这会做你想要的：

```
links = [link for link in br.links() if any(attr==('class','l') for attr in link.attrs)] 
```

主要的搜索结果链接似乎都有`class=l`一个属性。我不太熟悉，`mechanize`不知道您是否可以在`links()`通话中执行此操作。

# visual-studio-2010 - 如何在 Windows Phone 7 中使用 BinaryFormatter

> ID：12376765
> 
> 赞同：5
> 
> 时间：2012-09-11T19:40:37.017
> 
> 标签：visual-studio-2010, wcf, windows-phone-7.1

如何在 Windows Phone 7 中使用 BinaryFormatter。

我`using System.Runtime.Serialization.Formatters.Binary`在 service1.svc.cs 中使用了这个，但我不能在 windows phone 7 中使用这个参考。

有什么解决办法吗？

我的反序列化对象代码

```
 public static T DeserializeObject<T>(byte[] xml)
    {
        BinaryFormatter xs = new BinaryFormatter();
        MemoryStream memoryStream = new MemoryStream(xml);
        return (T)xs.Deserialize(memoryStream);
    } 
```

BinaryFormatter 在 windows phone 7 中给出错误。那么我该如何**反序列化**。我必须在此代码中进行哪些更改？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-11T19:44:45.590

正如@driis 提到的，您不能`BinaryFormatter`在 Windows Phone 上使用。您可以在 WCF 端点（即绑定是与和 的自定义绑定的端点）中使用二进制*编码*，这将在 WP7 上得到支持。您只是不能在那里使用二进制格式化程序。`BinaryMessageEncodingBindingElement``HttpTransportBindingElement`

*更新以下评论*：查看您的代码，不仅需要更改代码 - 您还需要更改**服务**代码，以 Silverlight 支持的格式序列化对象。您可以将`DataContractSerializer`, 与二进制读取器/写入器一起使用，或者您可以使用在这两种情况下都支持的另一个库。例如，下面的代码应该适用于桌面版和 SL 版：

```
public static T DeserializeObject<T>(byte[] xml) 
{ 
    using (MemoryStream memoryStream = new MemoryStream(xml))
    {
        using (XmlDictionaryReader reader = XmlDictionaryReader.CreateBinaryReader(
            memoryStream, XmlDictionaryReaderQuotas.Max))
        {
            DataContractSerializer dcs = new DataContractSerializer(typeof(T));
            return (T)dcs.ReadObject(reader);
        }
    }
} 
```

在服务器上：

```
public static byte[] SerializeObject<T>(T obj)
{
    using (MemoryStream ms = new MemoryStream())
    {
        using (XmlDictionaryWriter writer = XmlDictionaryWriter.CreateBinaryWriter(ms))
        {
            DataContractSerializer dcs = new DataContractSerializer(typeof(T));
            dcs.WriteObject(writer, obj);
            writer.Flush();
            return ms.ToArray();
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-11T19:41:09.883

Windows Phone 7 不支持 BinaryFormatter。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T20:13:18.887

WP 7.1 上没有对二进制序列化的库支持。正如德里斯所说。

您应该`XmlObjectSerializer`改用它，或者甚至使用其中一个支持大多数常见 API 对象（如联系人数据等）的序列化的子类。

如果您检查`System.Runtime.Serialization`命名空间程序集（例如在 Visual Studio 的对象浏览器中），您会发现足够的类的层次结构。

你为什么关心序列化方法？XML 序列化更便携、更统一且更易于人类阅读。

# css - IE 的单选按钮 CSS 问题

> ID：12376768
> 
> 赞同：0
> 
> 时间：2012-09-11T19:40:48.557
> 
> 标签：css, internet-explorer-8, radio-button

请朋友们帮我解决这个小问题。我正在使用 opencart，我的产品要求买家在添加购物车之前选择颜色。

通常我们使用带有 href 的 LI 来制作带有 onclick 选择的颜色框，但是由于 Opencart 只允许此类要求的表单元素，即选择、检查、单选等，因此我使用带有 CSS 的单选按钮。它在 Mozilla、Chrome 甚至 IE9 上都能正常工作....但在 IE8 和 IE7 上却不行 :(

**这是编译后的单选按钮的HTML**

```
<div class="option Color" id="option-227">
<span class="required">*</span>
<h2>Color:</h2><br>

<div class="colorOption-Holder">
<input type="radio" id="option-value-18" value="18" name="option[227]">
<label for="option-value-18">
<img src="../images/Swatches/Green-25x25.gif" alt="Green" title="Green">
</label>
</div>

<div class="colorOption-Holder">
<input type="radio" id="option-value-18" value="18" name="option[227]">
<label for="option-value-18">
<img src="../images/Swatches/Blue-25x25.gif" alt="Blue" title="Blue">
</label>
</div>

</div> 
```

**这是CSS**

```
.product-info .Color .colorOption-Holder {
float:left;
width:35px;
height:35px;
margin-right:7px;
margin-bottom:9px;
position:relative;
}
.product-info .Color input{
position:absolute;
left:5px;
top:10px;
visibility:hidden;
z-index:5;
}

.product-info .Color input + label {
position:absolute;
left:0;
top:0;

border:1px solid #fff;
}

.product-info .Color input:checked + label {
position:absolute;
left:0;
top:0;
z-index:5;
border:1px solid #f76a02;
} 
```

任何想法如何解决这个问题？这将是一个很大的帮助......谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T20:27:48.220

internet explorer 8（和以前的版本）不支持许多 CSS 选择器。:checked 伪类就是其中之一。

查看[这个类似的帖子](https://stackoverflow.com/questions/5968867/is-there-any-way-to-get-ie8-to-not-ignore-a-css-rule-that-it-only-partially-unde)以获取名为[Selectivizr](http://selectivizr.com/)的解决方案，该解决方案允许您为不同的 IE 版本添加选择器支持。

当您不坚持使用“通常”的选择器时，您应该检查[quirks-mode以了解浏览器对不同选择器的支持。](http://www.quirksmode.org/css/contents.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T20:19:26.960

结束标签在代码中，但我不知道为什么它们没有显示在这里是来自 product/product.tpl 文件的代码

```
<?php foreach ($option['option_value'] as $option_value) { ?>
<div class="colorOption-Holder">
<input type="radio" name="option[<?php echo $option['product_option_id']; ?>]" value="<?php echo  $option_value['product_option_value_id']; ?>" id="option-value-<?php echo $option_value['product_option_value_id']; ?>" />
<label for="option-value-<?php echo $option_value['product_option_value_id']; ?>">
<img src="<?php echo $option_value['image']; ?>" />
 <?php if ($option_value['price']) { ?>
(<?php echo $option_value['price_prefix']; ?><?php echo $option_value['price']; ?>)
<?php } ?>
</label>
</div>
<?php } ?> 
```

# c++ - 如何将数据库字段存储在单个向量中

> ID：12376772
> 
> 赞同：0
> 
> 时间：2012-09-11T19:41:08.263
> 
> 标签：c++

我正在从数据库中获取 6 个字段。目前我正在使用结构。我想将数据库字段存储在单个向量中。是否可以通过对象向量？如果是，如何？

我在数据库中有超过 70,000 行。我将其取出并存储在临时表中，如下所示：

```
// select statement to fetch from temp_table. for example select * from temp_table 

while(cursor.fetch())
{
cursor >> field;

cout<<field;
} 
```

在while循环中存储结构或向量并打印它是否有效，还是上述方法可以？

# c++ - 带有编译和可执行文件的 MinGW 问题的新安装

> ID：12376777
> 
> 赞同：2
> 
> 时间：2012-09-11T19:41:55.123
> 
> 标签：c++, c, netbeans, compiler-construction, mingw

我曾经在我的 Windows 机器上安装了旧版本的 MinGW。

当我在“发布”模式下使用 MinGW 工具集在 NetBeans IDE 中构建时编译我的程序时，我的可执行文件大约为 700KB。

然后，我最近安装了最新的 MinGW（mingw-get-inst-20120426.exe）。

安装后，我重新构建了我的程序，可执行文件现在是 275KB，它似乎没有正确读取传入的参数。构建是“构建成功”。它确实有关于弃用相关问题的警告，但这在新安装之前就已经存在。

我真的很困惑。你知道问题是什么吗？

谢谢尼奥

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T22:32:43.900

哇。现在可以了。我认为从 PATH 中删除 C:\cygwin\bin 可以解决问题。啊。是对的吗？这很奇怪，因为我特别告诉 NetBeans 使用 MinGW 工具集。谢谢大家的帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-27T19:39:18.997

在这种情况下，您确实混合了编译器。路径很重要。

# nhibernate - 以多对多关系从双方插入数据

> ID：12376780
> 
> 赞同：0
> 
> 时间：2012-09-11T19:42:04.623
> 
> 标签：nhibernate, fluent-nhibernate, nhibernate-mapping

我有两个具有 m:n 关系的实体、组和动作。从 UI 中，可以将操作添加到组中，反之亦然。关联表包含“group_id”和“action_id”列，因此两个实体都指定了“hasmanytomany”关系。现在，如何从两端添加/删除项目，即，

```
newGroup.Actions.Add(newAction); 
```

和

```
newAction.Groups.Add(newGroup); 
```

从文档中，指定 inverse 只允许从一端进行修改。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T11:55:11.520

我在为我执行此操作的实体上使用添加和删除方法。下面是用户/组方案的示例。

```
public class Group : Entity
{
    //Constructors and properties omitted

    public virtual void AddUser(User user)
    {
        if (users.Contains(user))
            return;

        users.Add(user);
        user.AddGroup(this);
    }

    public virtual void RemoveUser(User user)
    {
        if (!users.Contains(user))
            return;

        users.Remove(user);
        user.RemoveGroup(this);
    }
} 
```

# c# - 使用年份作为筛选器在 LightSwitch 中选择一系列日期

> ID：12376786
> 
> 赞同：1
> 
> 时间：2012-09-11T19:42:31.377
> 
> 标签：c#, linq, parameters, visual-studio-lightswitch

在 LightSwitch 中，我想在用户选择年份 (int) 的位置添加一个屏幕过滤器，因此查询返回特定日期 (DateTime) 在该年份范围内的所有记录。

我想了解如何添加适当的 PreprocessQuery 代码。

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T12:50:31.457

假设你有一个这样的表：

```
 Id        DateTimeColumn
----    -------------------
 0        1/1/2001 8:00 AM
 1        2/2/2002 8:00 AM
 2        3/3/2003 8:00 AM
 3        4/4/2004 8:00 AM 
```

将调用的整数类型数据项添加`YearSelect`到屏幕并创建一个包含您想要的所有年份的选择列表（或者，使用表格列出所有年份）。将其拖到屏幕树上，它将成为一个 AutoCompleteBox 并允许您选择一年。

在上表的查询设计器中创建一个查询并添加一个名为`YearFilter`. 将此查询添加到屏幕并绑定`YearFilter`到`YearSelect`.

返回查询设计器，单击编写代码旁边的箭头并选择`TableName_PreprocessQuery`。将以下代码添加到 PreprocessQuery：

```
partial void TableName_PreprocessQuery(int YearFilter, ref IQueryable<Cours> query)  
{
    if (YearFilter != null)
    {
        query = from d in query
                where d.DateTimeColumn.Year = YearFilter
                select d;
    }
} 
```

现在，当您从 AutoCompleteBox 中选择一年时，屏幕上与查询绑定的数据网格应更新并仅显示所选年份中的实体。

# jquery - 将 jQuery map() 与多种类型的表单元素一起使用

> ID：12376787
> 
> 赞同：0
> 
> 时间：2012-09-11T19:42:31.240
> 
> 标签：jquery, arrays, forms, map

我正在构建一个多步骤联系表单（每个步骤都在一个文章标签内），并且我正在使用 jQuery`map()`将标签和输入值存储到一个数组中，然后在表单的最后一部分显示信息。存储数组的jQuery是这样的：

```
$("article:last").prev().find("a.next").on("click", function(){
    var arr = $('.form-item').map(function() {
        var lab = $('label', this).text();
        var val = $('input', this).val();
        return "<li>" + lab + " " + val + "</li>";
    }).get()

    $("article:last ul#results").append(arr.join(''))
}); 
```

这很好用，但为 textareas 和选择菜单返回“未定义”，这是理所当然的。我需要调整此代码以适用于选定项目和文本区域。我的 HTML 非常简单，如下所示：

```
<article>
<div class="form-item">
    <label>Address:</label>
    <input type="text" />
</div>

<div class="form-item">
    <label>Message:</label>
    <textarea rows="2" cols="20"></textarea>
</div>
</article> 
```

每篇文章代表表单的一个新部分。所以问题是，如何调整我的 jQuery 以支持其他表单元素？做一个有条件的说法会是一个不错的选择，“如果`.form-item`'s children 包含一个 textarea，运行这个代码......等等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T19:56:45.920

你可以这样写：

```
​var arr = $('.form-item').map(function() {
    var val = $(this).find('input, textarea').val();
    return val;
}).get();​​​​​​​​​​​ 
```

[JSFiddle](http://jsfiddle.net/dwSXE/)上的实时示例

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T19:47:28.397

您可以使用`:eq()`选择器，`eq(1)`选择 div 标签的第二个子元素、输入或 textarea 元素。

```
var arr = $('.form-item').map(function() {
    var lab = $('label', this).text();
    var val = $(':eq(1)', this).val();
    return "<li>" + lab + " " + val + "</li>";
}).get() 
```

[http://jsfiddle.net/bFumx/](http://jsfiddle.net/bFumx/)

# mysql - 将表组合成单个表的 MySQL 语句

> ID：12376793
> 
> 赞同：0
> 
> 时间：2012-09-11T19:42:46.683
> 
> 标签：mysql

所以我不是很擅长复杂的 MySQL 语句，所以我希望你们能帮助我。

假设我有四个表，MainTable、AttrTable、NameTable 和 ValueTable。

MainTable 如下所示：

```
| id | title | category |
.........................
| 1  | First | Cat1     |
.........................
| 2  | Second| Cat2     |
.........................
| 3  | Third | Cat3     | 
```

AttrTable 看起来像这样：

```
| id | mainId | nameId | valueId |
..................................
| 1  | 1      | 1      | 2       |
..................................
| 2  | 1      | 2      | 1       |
..................................
| 3  | 2      | 1      | 3       |
..................................
| 4  | 3      | 3      | 2       |
..................................
| 1  | 3      | 1      | 1       | 
```

NameTable 和 ValueTable 分别如下所示：

```
| id | title |           | id | title |
..............           ..............
| 1  | foo   |           | 1  | bar   |
..............           ..............
| 2  | john  |           | 2  | smith |
..............           ..............
| 3  | dink  |           | 3  | fink  | 
```

所以我想编写一个语句，将与 MainTable 的每一行关联的所有数据组合到自己的行中。例如：我想要一个可以给我回馈的声明：

```
| 1 | First | Cat1 | foo | smith | john | bar |
| 2 | Second| Cat2 | foo | fink  |
etc... 
```

那可能吗？我什至会满足于：

```
| 1 | First  | Cat1 | foo  | smith |
| 1 | First  | Cat1 | john | bar   |
| 2 | Second | Cat2 | foo  | fink  |
etc... 
```

希望这一切都有意义。提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T19:49:19.083

听起来你只想要这个：

```
select m.id,
    m.title,
    m.category,
    n.title,
    v.title
from maintable m
left join attrtable a
    on m.id = a.mainid
left join nametable n
    on a.nameid = n.id
left join valuetable v
    on a.valueid = v.id 
```

# 见[SQL Fiddle with Demo](http://sqlfiddle.com/#!2/9b893/1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T19:47:19.660

查询未检查！（可能需要调整）

select m.*, n.title, v.title from MainTable m join AttrTable a on a.mainId = m.id join NameTable n on n.id = a.nameId join ValueTable v on v.id = a.valueId

# java - Java Spring：覆盖占位符行为以返回“foo”

> ID：12376795
> 
> 赞同：0
> 
> 时间：2012-09-11T19:43:09.037
> 
> 标签：java, spring

使用 Java Spring，如何覆盖属性占位符的默认行为以返回任何属性的“foo”？

我要走的当前路径是扩展 PropertySource 如下：

```
public class FooPropertySource extends PropertySource<Object> {
    private static final String DEFAULT_NAME = "foo";

    public FooPropertySource() {
        super(DEFAULT_NAME, null);
    }

    @Override
    public Object getProperty(String name) {
        return "foo";
    }
} 
```

在这一点上，我有两个问题：

A) 我如何处理我的应用程序上下文 XML 文件？到现在为止，我已经把它定义为一个bean......就是这样。

B) 我是否必须在代码中执行任何操作才能从我的应用程序上下文中加载其他 bean，以便它们使用 FooPropertySource？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T19:59:16.047

您必须注册此 PropertySource 才能添加到您的应用程序上下文中。如果您手动启动应用程序上下文，您可以这样做：

```
 ClassPathXmlApplicationContext ctx = new ClassPathXmlApplicationContext();
    ctx.setConfigLocation("applicationContext.xml");
    ctx.getEnvironment().getPropertySources().addLast(new FooPropertySource());
    ctx.refresh(); 
```

如果您在 Web 环境中执行此操作，则必须注册一个自定义[ApplicationContextInitializer](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/context/ApplicationContextInitializer.html)以在刷新应用程序上下文以注入您的 PropertySource 之前拦截应用程序上下文：

```
public class CustomInitializer implements ApplicationContextInitializer<ConfigurableWebApplicationContext> {
    public void initialize(ConfigurableWebApplicationContext ctx) {
        ctx.getEnvironment().getPropertySources().addLast(new FooPropertySource());
    }
} 
```

更多细节[在这里](http://blog.springsource.com/2011/02/15/spring-3-1-m1-unified-property-management/)

# php - PHP Array 捕获键值对的键

> ID：12376797
> 
> 赞同：0
> 
> 时间：2012-09-11T19:43:13.000
> 
> 标签：php, arrays, multidimensional-array

好吧，我不确定我能不能把这个写好，但我会努力的。从后端脚本我真的不能改变太多。我有一个非常大的多维数组被吐出到 UI 中，其中主数组中的数组不包含正常的 0-n 索引方案，并且由于它们的关联，它们是在后端生成的。所以我有例如一块看起来像的多维数组

```
Array(
     [0] = Array(
               [stuff] = 'something'
               [morestuff] = 'other'
               [info] = array(
                               [generated_id_based_on_assication] = array(
                                                              [id] = '12345t'
                                                              [desc] = 'blah blah'
                                                              [url] = '/some/where'
                                                              )
                               [generated_id_based_on_assication] = array(
                                                              [id] = '12345t'
                                                              [desc] = 'blah blah'
                                                              [url] = '/some/where'
                                                              )
                               [generated_id_based_on_assication] = array(
                                                              [id] = '12345t'
                                                              [desc] = 'blah blah'
                                                              [url] = '/some/where'
                                                              )
                               [generated_id_based_on_assication] = array(
                                                              [id] = '12345t'
                                                              [desc] = 'blah blah'
                                                              [url] = '/some/where'
                                                              )
                        )
              ),
     [1] = Array(
               [stuff] = 'something'
               [morestuff] = 'other'
               [info] = array(
                               [generated_id_based_on_assication] = array(
                                                              [id] = '12345t'
                                                              [desc] = 'blah blah'
                                                              [url] = '/some/where'
                                                              )
                               [generated_id_based_on_assication] = array(
                                                              [id] = '12345t'
                                                              [desc] = 'blah blah'
                                                              [url] = '/some/where'
                                                              )
                               [generated_id_based_on_assication] = array(
                                                              [id] = '12345t'
                                                              [desc] = 'blah blah'
                                                              [url] = '/some/where'
                                                              )
                               [generated_id_based_on_assication] = array(
                                                              [id] = '12345t'
                                                              [desc] = 'blah blah'
                                                              [url] = '/some/where'
                                                              )
                        )
              )
       ) 
```

我不知道数组的最佳表示。但是为了举例，因为我不能发布实际数据本身，我需要做的是为`[info]`数组找到每个，这样我就可以从每个数组`generated_id_based_on_assication`中提取数据。`generated_id_based_on_assication`但是看到它不是一个 0-n 索引我不知道如何获取“generated_id_based_on_assication”部分，以便我可以处理其中的数据，因为通过 foreach 或任何类型的循环运行它确实不是一个选项数组中的特定数组。有人有建议吗？如果我能够通过循环运行它，我可以做到，但这就是我被绊倒的地方，我不能，因为这些数据列在表中，并且该数组的所有内容都是基于每行的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T19:47:41.423

假设您的外部数组位于一个名为 $array.. 的变量中。

```
$keys = array_keys($array[0]['info']); 
```

然后 $keys 将包含生成的 ID，您可以像这样使用它们

```
$desc = $array[0]['info'][$keys[0]]['desc']; 
```

[http://php.net/manual/en/function.array-keys.php](http://php.net/manual/en/function.array-keys.php)

# html - Rails/Haml：每 n 次迭代添加一个父类

> ID：12376798
> 
> 赞同：4
> 
> 时间：2012-09-11T19:43:14.067
> 
> 标签：html, ruby-on-rails, ruby, algorithm, haml

我有一个像这样组织的照片库：

```
.container
  %li
    %a{src: image.src}
  %li
    %a{src: image.src}
  %li
    %a{src: image.src}

.container
  %li
    %a{src: image.src}
  %li
    %a{src: image.src}
  %li
    %a{src: image.src} 
```

每个容器最多应该有 3 个`%li`。

假设我有`@images`where `@images.count => 4`。

```
.container
  - for image in @images do
    %li
      %a{src: image.src} 
```

此代码将破坏页面，因为在这种情况下`.container`有 4 `%li`。

我怎样才能做到`.container`每 3 增加一次`%li`？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-11T19:48:23.750

我猜方法[Array#in_groups_of](http://api.rubyonrails.org/classes/Array.html#method-i-in_groups_of)是你要找的。

```
- @images.in_groups_of(3, false).each do |images|
  .container
    - images.each do |image|
      %li
        %a{src: image.src} 
```

顺便说一句，使用这种方法，您还可以定义丢失图像的替换

```
%w(1 2 3 4).in_groups_of(3, '_') {|group| p group}
# => ["1", "2", "3"]
# => ["4", "_", "_"] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T19:50:11.060

我会尝试这样的事情：

```
- @images.each_slice(3) do |images|
  .container
    - images.each do |image|
      %li
        %a{src: image.src} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T19:47:51.187

[通过在@images http://ruby-doc.org/core-1.9.3/Enumerable.html#method-i-each_slice](http://ruby-doc.org/core-1.9.3/Enumerable.html#method-i-each_slice)上使用 ruby​​ 的 each_slice 方法

```
- @images.each_slice(3) do |i| .... 
```

# vb.net - 当两者都在字符串中时针对 XSD 的 XML 验证

> ID：12376799
> 
> 赞同：0
> 
> 时间：2012-09-11T19:43:43.547
> 
> 标签：vb.net, visual-studio-2010, xsd, xml-validation, xsd-validation

当 XML 和 XSD 都在字符串中并且真的很困惑时，我一直在寻找简单的 XML 验证代码。把我发现的一些东西放在一起，希望这对其他人有帮助！请随时发表评论并指出我可能在哪里找到了这个，告诉我我可以在哪里改进这个，或者提高效率。如果验证失败，这将直接写入我的错误字符串。

干杯!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T19:43:43.547

```
Imports System
Imports System.IO
Imports System.Text
Imports System.Xml
Imports System.Xml.Schema

Module Module1

    Public validationErrors As String = Nothing
    Sub main()
        ' The Following is not a valid Xml Document according to its XSD with multiple errors.
        'Dim strXml As String = "<?xml version=""1.0"" encoding=""UTF-8""?><Address xmlns:xsi=""http://www.w3.org/2001/XMLSchema-instance""><City>SuperCaliFragilisticExpiAllidocious</City><State>Confusion</State><Zipcode>16801</Zipcode></Address>"
        ' The following is a Valid XML document
        Dim strXml As String = "<?xml version=""1.0"" encoding=""UTF-8""?><Address xmlns:xsi=""http://www.w3.org/2001/XMLSchema-instance""><City>Hollywood</City><State>CA</State></Address>"
        Dim strXsd As String = "<?xml version=""1.0"" encoding=""UTF-8""?><xs:schema xmlns:xs=""http://www.w3.org/2001/XMLSchema"" elementFormDefault=""qualified"" attributeFormDefault=""unqualified""><xs:element name=""Address""><xs:annotation><xs:documentation /></xs:annotation><xs:complexType><xs:sequence><xs:element name=""City""><xs:simpleType><xs:restriction base=""xs:string""><xs:maxLength value=""25""/></xs:restriction></xs:simpleType></xs:element><xs:element name=""State""><xs:simpleType><xs:restriction base=""xs:string""><xs:maxLength value=""2""/></xs:restriction></xs:simpleType></xs:element></xs:sequence></xs:complexType></xs:element></xs:schema>"
        validationErrors = xsdValidateXml(strXml, strXsd)
        MsgBox(IIf(validationErrors = Nothing, "Passed XML Validation!", validationErrors))

    End Sub
    Friend Function xsdValidateXml(ByVal strXml As String, ByVal strXsd As String)
        ' Create an XML document
        Dim xmlDocument As New XmlDocument
        xmlDocument.LoadXml(strXml)
        Dim schema As XmlReader = XmlReader.Create(New StringReader(strXsd))
        xmlDocument.Schemas.Add("", schema)
        xmlDocument.Validate(AddressOf ValidationEventHandler)
        xsdValidateXml = validationErrors
    End Function
    Sub ValidationEventHandler(ByVal sender As Object, ByVal e As ValidationEventArgs)
        validationErrors += e.Message & vbCrLf & vbCrLf
    End Sub

End Module 
```

# jquery - 将位置移动到对象的顶部和左侧

> ID：12376802
> 
> 赞同：0
> 
> 时间：2012-09-11T19:44:00.163
> 
> 标签：jquery, html

这是我用来显示工具提示的 jquery：

```
$(document).ready(function() {
$(".toolTip").hover(
    function() {
    var div_id = $(this).attr('id').split("_")[0];  
    if($("#"+div_id).length){
          //
    } 
    $(this).append(
     '<div class="toolTipWrapper">'
        +$("#"+div_id).text()
      +'</div>'
    );
    this.width = $(this).width();
    //Get the HTML document width and height
    var documentWidth = $(document).width();
    var documentHeight = $(document).height();
    var toolTipWidth = $('.toolTipWrapper').width();
    alert(documentWidth+" "+toolTipWidth+" "+$(this).offset().left);
    if ($(this).offset().left + toolTipWidth  > documentWidth) {
        alert("COMING");
    }
    //ends
    $(this).find('.toolTipWrapper').css({left:this.width+16})
    $('.toolTipWrapper').fadeIn(300);
  },
    function() {
      $('.toolTipWrapper').fadeOut(100);
    }
  );
}); 
```

在 HTML 中我有：  

```
.toolTip {
    padding-right: 20px; 
    background: url(../images/help.png) no-repeat right;
    color: #3366FF;
    position: relative;
 }
 .toolTipWrapper { 
    width: 350px;
    position: absolute;
    top: 10px;
    display: none; 
    color: #4D4D4D;
    font-size: 12px; 
    background-color: #EFF0F0; 
    border-color: #C9C9C9;
    border-width: 1px;
    border-style: solid; 
    padding: 6px 15px; 
 } 
```

现在工具提示应该移动它的位置，所以如果窗口更小，它仍然是完全可见的。我需要将 tooptip 的位置移动到悬停对象的顶部/左侧。但是当我检查时 `$(this).offset().left + toolTipWidth > documentWidth`，我没有看到条件变为真，因为我将这些值视为：

```
documentWidth 784   toolTipWidth 350    $(this).offset().left 383 
```

这里有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T19:58:19.837

如果您正在使用窗口调整大小，最好获得`window`not的高度和宽度`document`，

```
$(window).height();
$(window).width(); 
```

我觉得这是你的问题！！

# java - 为什么创建 GridBagConstraints 的内联版本不起作用？

> ID：12376809
> 
> 赞同：6
> 
> 时间：2012-09-11T19:44:50.883
> 
> 标签：java, swing, inline-code

为了使一些 Swing 代码更具可读性，我创建了一个`InlineGridBagConstraints`如下所示的类：

```
public class InlineGridBagConstraints extends GridBagConstraints {

public InlineGridBagConstraints gridx(int x) {
    gridx = x;
    return this;
}

public InlineGridBagConstraints gridy(int y) {
    gridy = y;
    return this;
}

public InlineGridBagConstraints gridheight(int h) {
    gridheight = h;
    return this;
}

public InlineGridBagConstraints gridwidth(int w) {
    gridwidth = w;
    return this;
}

    // .... and so on, for all fields.

} 
```

目的是改变这种代码：

```
GridBagConstraints c = new GridBagConstraints();
c.gridx = 2;
c.gridy = 1;
c.gridwidth = 3;
myJPanel.add(myJButton, c);

c.gridx = 3;
c.gridwidth = 2;
myJPanel.add(myOtherJButton, c);

c.gridx = 1;
c.gridy = 5;
c.gridheight = 4;
myJPanel.add(yetAnotherJButton, c); 
```

...有一些更容易理解和阅读的东西，比如：

```
InlineGridBagConstraints c = new InlineGridBagConstraints();
myJPanel.add(myJButton, c.gridx(2).gridy(1).gridwidth(3));
myJPanel.add(myOtherJButton, c.gridx(3).gridy(1).gridwidth(2);
myJPanel.add(yetAnotherJButton, c.gridx(1).gridy(5).gridheight(4); 
```

但是，上面的代码不起作用。当我尝试它时，所有组件都占据中心的同一区域`JPanel`并相互重叠。它们在`GridBagLayout`. 但是，如果我将更丑的版本与常规一起使用`GridBagConstraints`，则它可以按预期完美运行。

我曾尝试对 into 进行类型转换`InlineGridBagConstraints`，`GridBagConstraints`认为这可能是一个问题（即使它不应该是），但这根本没有帮助。

我已经没有想法了。有谁知道为什么会发生这种情况，或者第一个（标准）和第二个（内联）实现之间的主要区别是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T19:56:27.370

就我可以依靠您所写的内容而言，这应该可行。所以，我建议开始寻找代码中的其他错误。

您在两个示例中都正确设置了 LayoutManager 吗？

**更新：**尝试摆脱构造函数中的重置调用。超类构造函数将正确地完成这项工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-11T20:28:58.783

我真的不知道你的`GUIConstants`定义是什么，因为我们没有看到它，但是将 reset() 方法更改为`InlineGridBagConstraints`下面的方法，会使你的 UI 看起来像你预期的那样：

```
 public InlineGridBagConstraints reset() {
    gridx = 0;
    gridy = 0;
    gridheight = 1;
    gridwidth = 1;
    insets = new Insets(5, 5, 5, 5);
    fill = GridBagConstraints.BOTH;
    anchor = GridBagConstraints.CENTER;
    return this;
  } 
```

# sql - MS Access - WHERE IN 有效，但 WHERE NOT IN 失败

> ID：12376816
> 
> 赞同：2
> 
> 时间：2012-09-11T19:45:17.780
> 
> 标签：sql, ms-access

我在 MS Access 上有以下查询（简化）：

```
SELECT * FROM table1 WHERE table1.ID NOT IN (SELECT DISTINCT table1id FROM table2); 
```

我的问题是它不起作用，但这两个起作用：

```
SELECT * FROM table1 WHERE table1.ID IN (SELECT DISTINCT table1id FROM table2);
SELECT * FROM table1 WHERE table1.ID NOT IN (2, 3); 
```

第一个只是简单地返回一个空集，而我知道我有`table1`id 范围从 1 到 9 的记录，而表 2 上只使用了 2 和 3。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-11T19:48:00.063

通常，IN 和 NOT in 的问题与子选择中的 NULL 有关。试试这个，看看它是否有效：

```
SELECT *
FROM table1
WHERE table1.ID NOT IN (SELECT DISTINCT table1id FROM table2 where tableid is not null); 
```

# r - 在 R 中将 CSV 转换为稀疏矩阵的有效方法

> ID：12376817
> 
> 赞同：1
> 
> 时间：2012-09-11T19:45:22.733
> 
> 标签：r, csv, sparse-matrix

我有一个非常大的 csv 文件（大约 9100 万行，所以 for 循环在 R 中花费的时间太长）关键字之间的相似性，当我读入 data.frame 时看起来像：

```
> df   
kwd1 kwd2 similarity  
a  b  1  
b  a  1  
c  a  2  
a  c  2 
```

这是一个稀疏列表，我想将其转换为稀疏矩阵：

```
> myMatrix 
  a b c  
a . 1 2
b 1 . .
c 2 . . 
```

我尝试使用 sparseMatrix()，但是将关键字名称转换为整数索引需要太多时间。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T20:01:43.813

`acast`从`reshape2`包装中可以很好地做到这一点。有基本的 R 解决方案，但我发现语法要困难得多。

```
library(reshape2)
df <- structure(list(kwd1 = structure(c(1L, 2L, 3L, 1L), .Label = c("a", 
"b", "c"), class = "factor"), kwd2 = structure(c(2L, 1L, 1L, 
3L), .Label = c("a", "b", "c"), class = "factor"), similarity = c(1L, 
1L, 2L, 2L)), .Names = c("kwd1", "kwd2", "similarity"), class = "data.frame", row.names = c(NA, 
-4L))

acast(df, kwd1 ~ kwd2, value.var='similarity', fill=0)

  a b c
a 0 1 2
b 1 0 0
c 2 0 0
> 
```

* * *

`sparseMatrix`从`Matrix`包中使用：

```
library(Matrix)
df$kwd1 <- factor(df$kwd1)
df$kwd2 <- factor(df$kwd2)

foo <- sparseMatrix(as.integer(df$kwd1), as.integer(df$kwd2), x=df$similarity)

> foo
3 x 3 sparse Matrix of class "dgCMatrix"

foo <- sparseMatrix(as.integer(df$kwd1), as.integer(df$kwd2), x=df$similarity, dimnames=list(levels(df$kwd1), levels(df$kwd2)))

> foo 

3 x 3 sparse Matrix of class "dgCMatrix"
  a b c
a . 1 2
b 1 . .
c 2 . . 
```

# php - 禁用 Wordpress 短标签

> ID：12376822
> 
> 赞同：1
> 
> 时间：2012-09-11T19:45:41.567
> 
> 标签：php, string, wordpress, filter, hook

我想修改 Wordpress 短标签的布局。我要修改的标签是将单个帖子分成多个页面的标签。

在我的主题中，我需要禁用该功能并将每个部分包装在一个 div 中。

我知道可以添加过滤器来修改短标签，但显然我做错了什么。下面的函数似乎没有替换短标签，我仍然得到一个分页列表。

任何人都可以提出一个解决方案来替换短标签吗？

```
add_filter( 'the_content', 'reformat_lists' );

function reformat_lists($content){
    $f = '<!--nextpage-->';
    $r = '<div id="cmn-list">';
    str_replace($f,$r,$content);
    return $content;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T20:31:51.063

您的帖子查询很可能正在调用`setup_postdata`，因此`<!--nextpage-->`在您有机会之前已经被替换，因此您可能必须使用另一个过滤器或找出 Wordpress 插入的内容。如果您使用[get_posts](http://codex.wordpress.org/Template_Tags/get_posts)`the_content`而不是. 理想情况下，您可以在此之前找到一个过滤器，但不是在 DB 写入之前，但我似乎找不到任何工作要做。`setup_postdata``WP_query``the_content`

它并不漂亮，因为它是破坏性的（在保存到数据库之前替换标签）而不是在打印之前，但这可能对你有用：

```
function reformat_lists($content){
    $f = '<!--nextpage-->';
    $r = '<div id="cmn-list">';
    $content = str_ireplace($f,$r,$content); //don't forget to pass your replaced string to $content
    return $content;
}
add_filter( 'content_save_pre', 'reformat_lists'); 
```

编辑：更好的是，如果你得到`global $post`，你可以抓取未过滤的内容。试试下面的 - 我`</div>`在内容的末尾添加了一个来关闭我们插入的内容，这样它就不会破坏你的布局。抓取`global $post`可能并非在所有情况下都有效，因此我将在您的设置中进行测试。

```
function reformat_lists($content){
    global $post;
    $content = $post->post_content;
    $f = '<!--nextpage-->';
    $r = '<div id="cmn-list">';
    $content = str_ireplace($f,$r,$content) . '</div>';
    return $content;
}
add_filter( 'the_content', 'reformat_lists', 1); 
```

# php - PHP生成没有特定前缀的随机数？

> ID：12376824
> 
> 赞同：0
> 
> 时间：2012-09-11T19:45:53.190
> 
> 标签：php, random

我想生成一个随机的 9 字符长整数。
我还想确保前 3 位数字不是 814。
这是我到目前为止想出的：

生成数字的函数：

```
public function randnum(){
$random = substr(number_format(time() * rand(),0,'',''),0,9);
return $random
} 
```

我想在哪里得到号码。

```
$random;
while ((substr(randnum(),0,3)) == '814'){
$random=substr(randnum(),0,3));
} 
```

这是确保我得到的号码不以 814 开头的正确方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T19:48:20.097

获取不以 814 开头的数字是合理的方式，但不是获取*随机*数的合理方式。你根本不应该`time()`参与，你应该使用`mt_rand`而不是`rand`.

你可以像这样做得更好：

```
do {
    $random = sprintf("%09d", mt_rand(0, 999999999));
} while (substr($random, 0, 3) == "814"); 
```

如果您不关心生成的随机数的分布（即，您可以接受数字只是*不可预测*而不是真正*随机*的）并且您将生成很多这些，那么优化一点可能是有意义的：

```
do {
    $random = sprintf("%03d", mt_rand(0, 999));
} while $random == "814";

$random = $random.sprintf("%06d", mt_rand(0, 999999)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-11T19:49:11.200

```
do {
    $random = mt_rand(100000000, 999999999);
} while (strpos($random, '814') === 0); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-11T19:48:27.183

使用 preg_match 函数：

```
preg_match("/[^814]/", $str); 
```

或使用

```
str_replace("814", "", $str); 
```

或使用

preg_replace("/^814/", "", $str);

# java - JTable 单元侦听器？

> ID：12376826
> 
> 赞同：12
> 
> 时间：2012-09-11T19:46:22.110
> 
> 标签：java, swing, jtable, listselectionlistener

我正在使用 JTable。每当单元格选择发生变化时，我都需要收到通知。我尝试使用 ListSelectionListener 但我只在行选择更改时收到通知。如果我在同一行选择一个新列，我不会收到通知。我需要知道何时选择单元格，而不是何时更改单元格。有没有我可以用来做这件事的听众？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-11T20:07:08.033

最简单的方法是调用`setCellSelectionEnabled(true)`，并将对表的引用传递给侦听器。当侦听器被调用时，在原始表上调用`getSelectedRow()`和。`getSelectedColumn()`

另一种方法是在表上设置行选择侦听器，在 上设置列选择侦听器`ColumnModel`，然后找出它们的交集。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-12T07:33:22.760

接收*列*选择更改通知的一种方法 - 正如@parsifal（在评论中）已经回答的那样 - 是获取 TableColumnModel 的内部 selectionModel 并注册一个侦听器：

```
table.getColumnModel().getSelectionModel().addListSelectionListener(selectionListener); 
```

另一种方法是使用 columnModel 注册一个 TableColumnModelListener：

```
table.getColumnModel().addColumnModelListener(columnModelListener); 
```

第一个是在代码方面“更短”：只有一个实现方法与几个 - 除了 columnSelectionChanged 之外，大多数是空的。

第二个对动态变化更健壮：第一个不可能防止 columnModel 的 selectionModel 属性的变化......因为它不是一个属性。或者换句话说：在应用程序代码换出 selectionModel 的（公认的罕见）情况下，侦听器正在侦听 Void。安装 columnModelListener 可以避免这种变化，因为 columnModel 会从它的 selectionModel 传递事件，无论它是什么。

# wix - Wix Burn 3.6 RTM，仍在安装 .NET 4.5 Beta

> ID：12376831
> 
> 赞同：2
> 
> 时间：2012-09-11T19:46:55.243
> 
> 标签：wix, bootstrapper

我正在使用 WiX [Burn](http://en.wikipedia.org/wiki/WiX#Burn)铺设 .NET 4.5。从文档*[How To: Install the .NET Framework Using Bur](http://wix.sourceforge.net/manual-wix3/install_dotnet.htm)*中看起来非常简单。

我的安装程序非常简单：

```
<Wix xmlns="http://schemas.microsoft.com/wix/2006/wi"
     xmlns:bal="http://schemas.microsoft.com/wix/BalExtension">
    <Bundle Name="My App"
            Version="1.0.0.0"
            Manufacturer="My Company"
            UpgradeCode="My GUID-4fa299bf4589"
            IconSourceFile="My Icon File" >
        <BootstrapperApplicationRef Id="WixStandardBootstrapperApplication.RtfLicense" >
            <bal:WixStandardBootstrapperApplication
                SuppressOptionsUI="yes"
                LicenseFile="License.rtf"
                LogoFile="Installer_Banner.bmp"/>
        </BootstrapperApplicationRef>

        <Chain>
            <PackageGroupRef Id="NetFx45Web" />
            <MsiPackage
                DisplayName="My App Name"
                SourceFile="myMSI.msi"></MsiPackage>
        </Chain>
    </Bundle>
</Wix> 
```

但是当我运行生成的 EXE 文件时，它想安装 .NET 4.5 beta。我有 WiX 3.6.3303，它是 RTM 和[Visual Studio 2012](http://en.wikipedia.org/wiki/Microsoft_Visual_Studio#Visual_Studio_2012) RTM。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T17:48:31.597

NETFX v4.5 的正确 URL 用于 WiX v3.8。没有尽快更新 URL 是一个错误。

# asynchronous - 结合 F# 异步和可能的计算表达式

> ID：12376833
> 
> 赞同：18
> 
> 时间：2012-09-11T19:47:01.923
> 
> 标签：asynchronous, f#, monads, monad-transformers, computation-expression

假设我想`Option`在`async`工作流程中返回一段时间：

```
let run = 
    async {
        let! x = doAsyncThing
        let! y = doNextAsyncThing x
        match y with
        | None -> return None
        | Some z -> return Some <| f z
    } 
```

理想情况下，我会同时使用来自 FSharpx 的可能计算表达式作为异步来避免执行`match`. 我可以制作一个自定义构建器，但是有没有一种方法可以通用地组合两个计算表达式？它可能看起来像这样：

```
let run = 
    async {
        let! x = doAsyncThing
        let! y = doNextAsyncThing x
        return! f y
    } 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2015-10-05T16:24:11.870

通常在 F# 中，您不是使用通用工作流，而是手动定义工作流，或者使用在您的情况下可用的工作流，`async`但是`maybe`如果您想组合使用它们，则需要手动编写特定的工作流组合。

或者，您可以使用[F#+](https://www.nuget.org/packages/FSharpPlus/)，这是一个为 monad 提供通用工作流程的项目，在这种情况下，它将自动为您派生，这是一个工作示例，使用您的工作流程，然后使用`OptionT`哪个是 monad 转换器：

```
#r "nuget: FSharpPlus, 1.2"

open FSharpPlus
open FSharpPlus.Data

let doAsyncThing = async {return System.DateTime.Now}
let doNextAsyncThing (x:System.DateTime) = async {
    let m = x.Millisecond  
    return (if m < 500 then Some m else None)}
let f x = 2 * x

// then you can use Async<_> (same as your code)
let run = monad {
    let! x = doAsyncThing
    let! y = doNextAsyncThing x
    match y with
    | None   -> return None
    | Some z -> return Some <| f z}

let res = Async.RunSynchronously run

// or you can use OptionT<Async<_>> (monad transformer)

let run' = monad {
    let! x = lift doAsyncThing
    let! y = OptionT (doNextAsyncThing x)
    return f y}

let res' = run' |> OptionT.run |> Async.RunSynchronously 
```

第一个函数必须“提升”到另一个 monad，因为它只处理`Async`（而不是`Option`），第二个函数处理两者，所以它只需要被“打包”到我们的`OptionT`DU 中。

如您所见，两个工作流都是自动派生的，一个是您拥有的（异步工作流），另一个是您想要的。

有关此方法的更多信息，请阅读[Monad Transformers](https://www.google.ch/#q=monad+transformers)。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-11T19:55:32.173

一个简单的方法是使用[Option 模块](http://msdn.microsoft.com/en-us/library/ee370544.aspx)：

```
let run = 
    async {
        let! x = doAsyncThing
        let! y = doNextAsyncThing x
        return Option.map f y
    } 
```

我想你不必经常处理这种`option`情况`async`。FSharpx 还为类型提供了更多[的高阶函数](https://github.com/fsharp/fsharpx/blob/master/src/FSharpx.Core/ComputationExpressions/Monad.fs#L83)`option`。大多数情况下，我认为使用它们就足够了。

要获得使用这些功能的感觉，请查看这篇[不错的文章](http://missingfaktor.blogspot.dk/2012/02/f-option-cheat-sheet.html)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-03-29T09:21:34.360

```
type MaybeMonad() = 
    member __.Bind(x, f) = 
        match x with
        | Some v -> f v
        | None -> None
    member __.Return(x) = 
        Some x

let maybe = MaybeMonad()

let run = async {
    let! x = doAsyncThing
    let! y = doNextAsyncThing x
    return maybe {
        let! y_val = y
        return f y_val
    }
} 
```

只需在里面使用 f# 计算表达式。

# c# - Mongodb - 实体序列化OK，但在反序列化时给出'No serializer found for type'错误

> ID：12376835
> 
> 赞同：2
> 
> 时间：2012-09-11T19:47:08.397
> 
> 标签：c#, mongodb, serialization, deserialization

我使用 mongodb (v1.5) 的 c# 驱动程序遇到了这个问题

我在序列化对象时遇到过类似的问题，但过去总是能够通过在应用程序启动期间向 mongodb 注册实体来解决这个问题。它在反序列化时遇到问题的文档嵌套了两层深（即嵌入在文档中的文档中嵌入的文档）。

这些类看起来像这样：

```
[BsonIgnoreExtraElements]
public class FooItem : IFooItem
{
    [BsonId]
    public ObjectId Id { get; set; }
    public IFooAccessRestrictions AccessRestrictions { get; set; }
}

public class FooAccessRestrictions : IFooAccessRestrictions
{
    [BsonId]
    public ObjectId Id { get; set; }
    public IAccessPermission[] AccessList { get; set; }
}

public class AccessPermission : IAccessPermission
{
    [BsonId]
    public ObjectId Id { get; set; }
    public DateTimeOffset CreatedOn { get; set; }
    public ObjectId CreatedBy { get; set; }
    public AccessPermissionType Type { get; set; }
    public string PermittedIdentity { get; set; }

    public AccessPermission()
    {

    }

    public AccessPermission(ObjectId createdBy, AccessPermissionType type, string permittedIdentity)
    {
        CreatedOn = DateTime.Now;
        CreatedBy = createdBy;
        Type = type;
        PermittedIdentity = permittedIdentity;
    }
} 
```

它是 AccessPermission 类，它有“找不到类型的序列化程序”问题。我尝试在应用程序启动时使用 mongodb 注册实体，如下所示：

```
 BsonClassMap.RegisterClassMap<FooAccessRestrictions>();
        BsonClassMap.RegisterClassMap<AccessPermission>(); 
```

我猜我必须在这里打破一些我不知道的 mongodb 规则。我希望我不需要为此创建自定义序列化程序......据我所知，我没有做任何我以前没有做过的事情，除了文档嵌套了两层深。它在创建文档时一点问题都没有，只是当我尝试将其取回时，我遇到了问题。

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T08:23:42.460

好的，我现在已经设法解决了这个问题。

再看一下mongodb文档，我发现你可以在注册类的同时注册类的属性。

所以现在我的注册看起来像这样：

```
 BsonClassMap.RegisterClassMap<FooAccessRestrictions>(cm =>
        {
            cm.MapProperty<List<IAccessPermission>>(c => (List<IAccessPermission>)c.AccessList);
        }); 
```

（请注意，我的属性已从数组更改为列表，但这不应该对我在这里谈论的问题产生任何影响）

MongoDB 现在能够反序列化这些对象以及序列化它们。

# plugins - 自定义插件未显示在列表中（在调试时工作正常 - 不是通过 deploy.bat 部署时）

> ID：12376842
> 
> 赞同：0
> 
> 时间：2012-09-11T19:47:33.357
> 
> 标签：plugins, deployment, nopcommerce

我目前遇到的问题是我的插件没有显示在管理员的插件列表中。

当我直接从 VS2010 运行它时，效果很好。我已经检查过，描述文件似乎没问题，并且一旦部署（使用 deploy.bat），插件就会出现在插件文件夹中。

我注意到有大量与插件一起部署的 DLL 列表，但不认为这是问题所在（尽管整理一下会很好 - 所有引用都设置为不复制）

还有其他我可能会丢失的东西吗？我对开发相当陌生，并且已经检查了对我来说似乎很明显的事情。

我已经阅读并检查了以下内容：

[http://www.nopcommerce.com/boards/t/13404/plugin-not-showhing-up-in-plugin-list.aspx](http://www.nopcommerce.com/boards/t/13404/plugin-not-showhing-up-in-plugin-list.aspx) [http://www.nopcommerce.com/boards/t/14259/plugin-not -复制到部署.aspx](http://www.nopcommerce.com/boards/t/14259/plugin-not-copied-to-deploy.aspx)

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T11:24:51.447

您是否正确记录了您的插件代码？

```
<?php<br>
/*<br>
Plugin Name: Name Of The Plugin<br>
Plugin URI: h ttp://URI_Of_Page_Describing_Plugin_and_Updates<br>
Description: A brief description of the Plugin.<br>
Version: The Plugin's Version Number, e.g.: 1.0<br>
Author: Name Of The Plugin Author<br>
Author URI: h ttp://URI_Of_The_Plugin_Author<br>
License: A "Slug" license name e.g. GPL2<br>
*/<br>
?><br> 
```

（来自 wpcodex）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-13T10:10:17.163

这最终是在没有意识到的情况下发布到不同的 IIS 站点，因此它正在更新错误文件夹中的 DLL ......

# python - 是否可以基于关联类创建实例方法对象？

> ID：12376846
> 
> 赞同：-1
> 
> 时间：2012-09-11T19:47:38.477
> 
> 标签：python, python-2.7

在构造类 Foo 的实例之前，我想创建类 Foo 中定义的方法的实例方法对象并将其分配给变量。然后，我将创建类 Foo 的实例，并通过变量对新创建的实例执行实例方法对象。这是可行的吗？如果是这样，怎么做？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T19:52:56.297

我希望我理解正确，你想要这样的东西：

```
>>> class Foo(object):
...     def __init__(self, msg):
...         self.msg = msg
...     def speak(self):
...         print(self.msg)
...      
>>> tell_me = Foo.speak
>>> tell_me(Foo("hello!"))
hello! 
```

是的，这是可能的。`Foo.speak`是一个未绑定的方法，它是一个可调用（函数），可以将实例作为其第一个参数传递，以获得与从绑定方法（例如`Foo("hello").speak`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T19:52:20.967

你的意思是这样的：

```
class Foo:
    def __init__(self):
        self.g = self.f

    def f(self):
        print "foo"

foo = Foo()
foo.g() 
```

如果我有误解，请纠正我。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T19:53:07.417

In Python, instance methods are just functions that are convenient to call and pass `self` as the first parameter. You should be able to do something like this:

```
def bar(self):
    pass

class Foo(object):
   pass

x = bar
f = Foo()
bar(f) 
```

# sql-server - 我无法使用 sql server 2008 附加数据库

> ID：12376850
> 
> 赞同：0
> 
> 时间：2012-09-11T19:47:47.287
> 
> 标签：sql-server

我在 Windows 7 上的 SQL Server 2012 上创建了一个数据库，我想在安装了 sql server 2008 的 Windows XP 上使用这个数据库。问题是当我想在 sql server 2008 中附加数据库时，它给了我这个错误消息：

```
TITRE : Microsoft SQL Server Management Studio
------------------------------

Échec de Attach database pour Serveur « MAC-BOOK-AIR\SQLEXPRESS ».  (Microsoft.SqlServer.Smo)

Pour obtenir de l'aide, cliquez sur : http://go.microsoft.com/fwlink?ProdName=Microsoft+SQL+Server&ProdVer=10.0.1600.22+((SQL_PreRelease).080709-1414+)&EvtSrc=Microsoft.SqlServer.Management.Smo.ExceptionTemplates.FailedOperationExceptionText&EvtID=Attach+database+Server&LinkId=20476

------------------------------
INFORMATIONS SUPPLÉMENTAIRES :

An exception occurred while executing a Transact-SQL statement or batch. (Microsoft.SqlServer.ConnectionInfo)

------------------------------

The database 'GESTION_STAGE' cannot be opened because it is version 706\. This server supports version 612 and earlier. A downgrade path is not supported.
Could not open new database 'GESTION_STAGE'. CREATE DATABASE is aborted. (Microsoft SQL Server, Erreur : 948)

Pour obtenir de l'aide, cliquez sur : http://go.microsoft.com/fwlink?ProdName=Microsoft+SQL+Server&EvtSrc=MSSQLServer&EvtID=948&LinkId=20476 
```

是否有可能在不安装早期版本的 sql server 的情况下附加数据库？因为我无法在 Windows XP 中安装 sql server 2012。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T20:22:06.253

不。

您不能将较新的 SQL Server 数据库附加到较旧的 SQL Server。您也不能将备份从较新的 SQL Server 还原到较旧的 SQL Server。

您最好的选择是在 SQL 2012 中编写结构和数据脚本，并在 2008 上运行生成的脚本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T20:42:47.027

一种选择是编写结构和数据脚本并针对 SQL Server 2008 数据库执行这些脚本。编写数据库脚本

1.  在 SSMS 对象资源管理器中右键单击数据库
2.  选择任务，生成脚本
3.  选中“为所选数据库中的所有对象编写脚本”
4.  将“服务器版本脚本”设置为 SQL Server 2008
5.  这是一个问题 - 默认情况下，“脚本数据”设置为 false。将其设置为 True 以获取脚本数据
6.  创建脚本后，在SQL Server 2008上创建同名数据库并执行脚本

另一种选择是使用一个工具来比较和同步 SQL Server 2012 上的数据库和 SQL Server 2008 上的空白数据库。这些工具中的大多数先同步结构，然后同步数据，所以这不是单击的事情。

# python - 将计算列添加到熊猫中的数据框中

> ID：12376863
> 
> 赞同：80
> 
> 时间：2012-09-11T19:48:28.923
> 
> 标签：python, pandas

我有一个 OHLC 价格数据集，我已将其从 CSV 解析为 Pandas 数据框并重新采样到 15 分钟柱：

```
<class 'pandas.core.frame.DataFrame'>
DatetimeIndex: 500047 entries, 1998-05-04 04:45:00 to 2012-08-07 00:15:00
Freq: 15T
Data columns:
Close    363152  non-null values
High     363152  non-null values
Low      363152  non-null values
Open     363152  non-null values
dtypes: float64(4) 
```

我想添加各种计算列，从简单的列开始，例如周期范围 (HL)，然后是布尔值以指示我将定义的价格模式的出现 - 例如锤形蜡烛模式，其示例定义：

```
def closed_in_top_half_of_range(h,l,c):
    return c > l + (h-l)/2

def lower_wick(o,l,c):
    return min(o,c)-l

def real_body(o,c):
    return abs(c-o)

def lower_wick_at_least_twice_real_body(o,l,c):
    return lower_wick(o,l,c) >= 2 * real_body(o,c)

def is_hammer(row):
    return lower_wick_at_least_twice_real_body(row["Open"],row["Low"],row["Close"]) \
    and closed_in_top_half_of_range(row["High"],row["Low"],row["Close"]) 
```

基本问题：如何将函数映射到列，特别是在我想引用多个其他列或整行或其他什么的地方？

[这篇文章](https://stackoverflow.com/questions/12356501/pandas-create-two-new-columns-in-a-dataframe-with-values-calculated-from-a-pre)处理从单个源列中添加两个计算列，这很接近，但并不完全如此。

并且稍微高级一点：对于参考不止一根柱线 (T) 确定的价格模式，我如何从函数定义中参考不同的行（例如 T-1、T-2 等）？

* * *

## 回答 #1

> 赞同：77
> 
> 时间：2012-09-11T20:04:56.837

对于您想要执行的每一列，确切的代码会有所不同，但您可能希望使用`map`and`apply`函数。在某些情况下，您可以直接使用现有列进行计算，因为这些列是 Pandas Series 对象，它们也可以用作 Numpy 数组，它会自动按元素进行通常的数学运算。

```
>>> d
    A   B  C
0  11  13  5
1   6   7  4
2   8   3  6
3   4   8  7
4   0   1  7
>>> (d.A + d.B) / d.C
0    4.800000
1    3.250000
2    1.833333
3    1.714286
4    0.142857
>>> d.A > d.C
0     True
1     True
2     True
3    False
4    False 
```

如果您需要在一行中使用诸如 max 和 min 之类的操作，您可以使用`apply`with`axis=1`将您喜欢的任何函数应用于每一行。这是一个计算的例子`min(A, B)-C`，它看起来就像你的“下灯芯”：

```
>>> d.apply(lambda row: min([row['A'], row['B']])-row['C'], axis=1)
0    6
1    2
2   -3
3   -3
4   -7 
```

希望这能让您对如何继续进行一些了解。

编辑：要将行与相邻行进行比较，最简单的方法是对要比较的列进行切片，省略开头/结尾，然后比较结果切片。例如，这将告诉您 A 列中的元素在哪些行中小于 C 列中下一行的元素：

```
d['A'][:-1] < d['C'][1:] 
```

而这会以另一种方式进行，告诉您哪些行的 A 小于前一行的 C：

```
d['A'][1:] < d['C'][:-1] 
```

`['A"][:-1]`对 A 列的最后一个元素进行切片`['C'][1:]`，并对 C 列的第一个元素进行切片，因此，当您将这两者对齐并比较它们时，您将 A 中的每个元素与下一行中的 C 进行比较。

* * *

## 回答 #2

> 赞同：48
> 
> 时间：2012-09-11T20:04:39.830

您可以`is_hammer`在`row["Open"]`等方面如下

```
def is_hammer(rOpen,rLow,rClose,rHigh):
    return lower_wick_at_least_twice_real_body(rOpen,rLow,rClose) \
       and closed_in_top_half_of_range(rHigh,rLow,rClose) 
```

然后你可以使用地图：

```
df["isHammer"] = map(is_hammer, df["Open"], df["Low"], df["Close"], df["High"]) 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-08-16T12:52:19.723

对于问题的第二部分，您也可以使用`shift`，例如：

```
df['t-1'] = df['t'].shift(1) 
```

`t-1`然后将包含 t 上面一行的值。

[http://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.shift.html](http://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.shift.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-03-05T15:35:00.297

您列出的前四个函数也适用于向量，但需要调整 lower_wick 除外。像这样的东西，

```
def lower_wick_vec(o, l, c):
    min_oc = numpy.where(o > c, c, o)
    return min_oc - l 
```

其中 o、l 和 c 是向量。您可以这样做，而不是将 df 作为输入并避免使用 numpy，尽管它会慢得多：

```
def lower_wick_df(df):
    min_oc = df[['Open', 'Close']].min(axis=1)
    return min_oc - l 
```

其他三个将按原样处理列或向量。然后你可以完成

```
def is_hammer(df):
    lw = lower_wick_at_least_twice_real_body(df["Open"], df["Low"], df["Close"]) 
    cl = closed_in_top_half_of_range(df["High"], df["Low"], df["Close"])
    return cl & lw 
```

`&`位运算符可以对布尔向量、 for `and`、`|`for等执行集合逻辑`or`。这足以完全向量化您提供的样本计算，并且应该相对较快。通过在执行这些计算时临时使用数据底层的 numpy 数组，您可能会加快速度。

对于第二部分，我建议引入一列来指示每一行的模式，并编写一系列处理每种模式的函数。然后按模式分组并将适当的功能应用于每个组。

# asp.net - C#/ASP.Net - 在网格视图中提取列的位值

> ID：12376864
> 
> 赞同：2
> 
> 时间：2012-09-11T19:48:29.317
> 
> 标签：asp.net, stored-procedures, gridview, bit, ordinal

我有一个受 SQL 约束的 gridview。在某些列中有位值。当我使用 C# 将值放入 gridview 时，会显示复选框。我需要将该列的值提取到文本中。

```
 SqlConnection sConnection = new SqlConnection(MyConnectionString);
    SqlCommand sCommand = new SqlCommand();
    using (sConnection)
    {
        sCommand.Connection = sConnection;
        sCommand.CommandText = "MyStoredProcedure";
        sCommand.CommandType = CommandType.StoredProcedure;
        sCommand.Connection.Open();
        SqlDataReader reader = sCommand.ExecuteReader();
        if (reader.HasRows)
        {
            while (reader.Read())
            {
                gridView.DataSource = reader;
                gridView.DataBind();
            }
            for (int i = 0; i < gridView.Rows.Count; i++)
            {
                ListBox1.Items.Add(gridView.Rows[i].Cells[3].Text);
            }
        }
    } 
```

gridview 列数据类型为“位”。我无权访问数据库或存储过程来更改那里的任何内容。我需要以某种方式提取“0”或“1”值，但是当我像上面那样做时，文本是空白的。

我也尝试使用“GetOrdinal”。它从数据库返回了一个真/假值，但我不知道如何获取网格视图中每个项目的值。

```
 if (!reader.IsDBNull(reader.GetOrdinal("MyColumn1")))
    {
        ListBox1.Items.Add(reader.GetOrdinal("MyColumn1").ToString());
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T19:54:40.770

总体概述：

*   您需要能够找到生成的 CheckBox 并获取其“Checked”属性的值。

*   为此，您需要能够在 GridViewRow 上使用 FindControl() 方法。

*   要使用 FindControl，CheckBox 需要一个可预测的名称。
*   要获得可预测的名称，您需要将该列设为 TemplateColumn，以便您可以在 ASPX 页面上的标记中指定 CheckBox 的名称。

这里有一套完整的工作代码：http: [//www.codeproject.com/Articles/25056/The-RIGHT-Way-to-Use-Checkboxes-in-a-NET-Repeater](http://www.codeproject.com/Articles/25056/The-RIGHT-Way-to-Use-Checkboxes-in-a-NET-Repeater)

这显示了Repeater 的代码，但它与任何DataBound 控件的原理和通用代码相同。

下面的代码应该可以修改以匹配您的数据库名称：

```
 <asp:TemplateField> 
   <ItemTemplate > 
       <asp:checkbox id="MyColumnNameCheckbox" runat="server" /> 
   </ItemTemplate> 
 </asp:TemplateField> 
```

* * *

```
 string defaultvalue = "0"; // To be used to display the value of the original bit field.
    foreach (GridViewRow row in GridView1.Rows) 
    { 
     CheckBox chkBx = (CheckBox)row.FindControl("MyColumnNameCheckbox"); 

        if (chkBx != null && chkBx.Checked) 
        { 
            defaultvalue = "1";
        } 
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T17:11:38.113

我能够弄清楚。谢谢，大卫斯特拉顿，为我指明了正确的方向。我首先通过为动态创建的控件分配一个 id 来做到这一点。然后是 FindControl()...

```
Control ctrl = GridView1.SelectedRow.Cells[4].Control[0];
ctrl.ID = "ctrl";
Boolean result = Convert.ToBoolean(((Checkbox)GridView1.Rows[0].Cells[4].FindControl("ctrl")).Checked);
TextBox1.Text = result.ToString(); 
```

这将返回“True”或“False”的值......

再次感谢。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-11-29T18:06:26.720

另一种解决方法：

```
bool result = (GridView1.SelectedRow.Cells[4].Control[0] as Checkbox).Checked;
TextBox1.Text = result.ToString(); 
```

它用更少的代码解决了问题:)

# wpf - 在 Internet Explorer 中关闭 WPF XBAP 应用程序的安全消息

> ID：12376868
> 
> 赞同：5
> 
> 时间：2012-09-11T19:49:04.387
> 
> 标签：wpf, security, internet-explorer, configuration, xbap

我正在开发一个 WPF XBAP 应用程序。当我尝试在 Internet Explorer（9.0.8112.16421 更新版本 9.0.9 KB2722913，Windows 7）中打开它时，每次弹出安全警告。两次。 ![安全警告](../Images/f8f6b36bd3f4e8d97069224de5643ba4.png)

这非常烦人并且仅在开发人员环境中可以接受，需要将它们都关闭。项目配置如下： 安全 - “启用 ClickOnce 安全设置”（当其禁用的应用程序根本无法运行时） - “这是一个完全信任的应用程序”；“签名” - “签署 ClickOne 清单”（使用导入到受信任的根证书颁发机构的测试证书）。在 IE 中，Internet 和 Intranet 区域都将“WPF 浏览器应用程序”设置为“启用”（这可能无效，因为 *.xbap 是从文件系统加载的）。如果我没有其他方法将 WPF 应用程序集成到浏览器中（Silverlight 不是一个选项，需要完整的 .NET 框架目标）我' m 寻找上述问题的解决方案。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T11:58:45.100

通过手动将程序集的证书 (*.pfx) 添加到受信任的根证书颁发机构和受信任的发布者解决了问题，如下所述：http: [//blogs.microsoft.co.il/blogs/maxim/archive/2008/03/05/ wpf-xbap-as-full-trust-application.aspx](http://blogs.microsoft.co.il/blogs/maxim/archive/2008/03/05/wpf-xbap-as-full-trust-application.aspx)

# javascript - 从指定范围创建一个字符数组

> ID：12376870
> 
> 赞同：31
> 
> 时间：2012-09-11T19:49:07.677
> 
> 标签：javascript, ruby, node.js

我阅读了一些有人在 Ruby 中执行此操作的代码：

```
puts ('A'..'Z').to_a.join(',') 
```

输出：

```
A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z 
```

有什么东西`Javascript`可以让这件事变得简单吗？如果没有，是否有允许类似功能的 Node 模块？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2016-11-07T21:35:12.413

如果您使用的是 ES6，您可以使用[Array.from()](https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Array/from)生成一个序列，方法是传入一个类似数组的对象来获取范围的长度，并使用一个 map 函数作为第二个参数来转换每个项目的数组键使用 String.fromCharCode() 将范围转换为字符：

```
Array.from({ length: 26 }, (_, i) => String.fromCharCode('A'.charCodeAt(0) + i)); 
```

您还可以使用 Array 构造函数（注意：ES6 允许使用函数调用或`new`运算符调用构造函数）来初始化所需默认长度的数组，使用[Array.fill()](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/fill)填充它，然后映射它：

```
Array(26).fill().map((_, i) => String.fromCharCode('A'.charCodeAt(0) + i)); 
```

[使用扩展运算符](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Spread_operator)也可以完成相同的操作：

```
[...Array(26)].map((_, i) => String.fromCharCode('A'.charCodeAt(0) + i)); 
```

以上三个示例将返回一个包含从 A 到 Z 字符的数组。对于自定义范围，您可以调整长度和起始字符。

对于不支持 ES6 的浏览器，可以使用 babel-polyfill 或 core-js polyfill (core-js/fn/array/from)。

如果你的目标是 ES5，我会推荐 @wires 的[Array.apply 解决方案，](https://stackoverflow.com/a/23980914/1526145)它与这个非常相似。

最后，Underscore/Lodash 和 Ramda 有一个 range() 函数：

```
_.range('A'.charCodeAt(0), 'Z'.charCodeAt(0) + 1).map(i => String.fromCharCode(i)); 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-09-11T20:00:31.257

Javascript 本身没有该功能。您可以在下面找到一些解决方法的示例：

正常功能，来自基本平面的任何字符（不检查代理对）

```
function range(start,stop) {
  var result=[];
  for (var idx=start.charCodeAt(0),end=stop.charCodeAt(0); idx <=end; ++idx){
    result.push(String.fromCharCode(idx));
  }
  return result;
};

range('A','Z').join(); 
```

与上面相同，但作为添加到数组原型的函数，因此可用于所有数组：

```
Array.prototype.add_range = function(start,stop) {
  for (var idx=start.charCodeAt(0),end=stop.charCodeAt(0); idx <=end; ++idx){
    this.push(String.fromCharCode(idx));
  }
  return this;
};

[].add_range('A','Z').join(); 
```

预选字符的范围。比上面的函数更快，并且让你用`alphanum_range('A','z')`AZ 和 az 来表示：

```
var alphanum_range = (function() {
  var data = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789'.split('');
  return function (start,stop) {
    start = data.indexOf(start);
    stop = data.indexOf(stop);
    return (!~start || !~stop) ? null : data.slice(start,stop+1);
  };
})();

alphanum_range('A','Z').join(); 
```

或 ascii 范围内的任何字符。通过使用缓存数组，它比每次构建数组的函数都要快。

```
var ascii_range = (function() {
  var data = [];
  while (data.length < 128) data.push(String.fromCharCode(data.length));
  return function (start,stop) {
    start = start.charCodeAt(0);
    stop = stop.charCodeAt(0);
    return (start < 0 || start > 127 || stop < 0 || stop > 127) ? null : data.slice(start,stop+1);
  };
})();

ascii_range('A','Z').join(); 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-09-11T20:30:52.407

```
var chars = [].concat.apply([], Array(26))
              .map(function(_, i) { return String.fromCharCode(i+65); })
              .join(); 
```

该`.map`函数可以是可用于不同字符集的函数生成器。

```
function charRange(start) {
    var base = start.charCodeAt(0);
    return function(_, i) { return String.fromCharCode(i + base); };
} 
```

而且您可能还想创建一个“完整的”数组助手。

```
function fullArray(len) { return [].concat.apply([], Array(len)); } 
```

然后像这样使用它们。

```
var chars = fullArray(26).map(charRange("A"))
                         .join(); 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2014-06-01T14:32:27.953

**TL;博士**

```
// ['a', .. , 'z']
Array.apply(null, {length: 26})
    .map(function (x,i) { return String.fromCharCode(97 + i) }); 
```

甚至

```
function range(first, last) {
    var a = first.charCodeAt(0)
    var b = last.charCodeAt(0) + 1
    return Array.apply(null, {length: Math.abs(b - a)})
      .map(function (x,i) { return String.fromCharCode(Math.min(a, b) + i) });
}
range('K','M') // => ['K','L','M']
range('$','z') // => "$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\]^_`abcdefghijklmnopqrstuvwxyz" 
```

* * *

我认为这可以用一种功能性的方式最清楚地表达出来：map `[0 .. 25]`to `['a' .. 'z']`.

我们可以使用`fromCharCode(n)`将数字转换为字符串。要找到对应于字符的数值，我们需要它的反函数`toCharCode(s)`：

```
var toCharCode = function(s){ return s.charCodeAt(0) } // 'a' => 97, 'b' => 98, .. 
```

然后剩下的就很简单了：

```
Array.apply(null, {length: 26})
     .map(function (x,i) { return String.fromCharCode(97 + i) }); 
```

构造一个包含 26 个未定义的数组：`[undefined, ... , undefined]`. 然后将每个值的`map`索引设置为== （大写从 开始）。`i``97 + i``'a'.charCodeAt(0) + i``'A' => 65`

第一行可能需要一些解释。我们实际上所做的与`Array(1,2,3)`==相同`[1,2,3]`。我们没有将实际的数组传递给`apply`，而是传递了一些像数组一样的东西（具有`length`属性）。这导致调用`Array(undefined, .. , undefined)`.

[`apply`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function/apply) 有关更多信息， 请参阅 [“通用类数组对象”](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Predefined_Core_Objects#Working_with_Array-like_objects) 。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2012-09-11T19:59:39.400

看看 kannebec 的回答，了解类似的问题。

[JavaScript 是否有类似“range()”的方法来根据提供的边界生成数组？](https://stackoverflow.com/questions/3895478/does-javascript-have-a-range-equivalent/3895618#3895618)

如果您不想添加自己的功能，但在一行中：

```
var abc = 
(function(){var output = []; for(var i='A'.charCodeAt(0); i <= 'Z'.charCodeAt(0); i++)
    output.push(String.fromCharCode(i)); return output;})().join(','); 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-09-11T22:14:56.227

[CoffeeScript](http://coffeescript.org)编译为 javascript，它有数字范围：

```
(String.fromCharCode(x+64) for x in [1..26]).join(",") 
```

[这是](http://coffeescript.org/#try:result%20=%20%28String.fromCharCode%28x+64%29%20for%20x%20in%20%5B1..26%5D%29.join%28%22,%22%29%0Aalert%20result)coffeescript.org 站点中此脚本的链接。您可以查看它编译成的 javascript，并在您的浏览器中实时运行。

（[是](https://stackoverflow.com/questions/4679782/can-i-use-coffeescript-instead-of-js-for-node-js)的，你可以为 Node.js 使用咖啡脚本）

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2017-04-22T18:15:09.040

略有不同的做法

```
String.fromCharCode(..." ".repeat(26).split("").map((e,i)=>i+'A'.charCodeAt())) 
```

印刷

```
"ABCDEFGHIJKLMNOPQRSTUVWXYZ" 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-09-11T20:09:59.117

不，JavaScript 没有任何内置的 Range 对象。您需要编写一个函数来创建一个抽象 Range，然后`to_a`为等价添加一个方法。

为了好玩，这里有另一种获得精确输出的方法，没有中间字符串。

```
function commaRange(startChar,endChar){
  var c=','.charCodeAt(0);
  for (var a=[],i=startChar.charCodeAt(0),e=endChar.charCodeAt(0);i<=e;++i){
    a.push(i); a.push(c);
  }
  a.pop();
  return String.fromCharCode.apply(String,a);
}

console.log(commaRange('A','J')); // "A,B,C,D,E,F,G,H,I,J" 
```

对于 Node.js，有[Lazy](https://github.com/pkrumins/node-lazy)模块。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2012-09-11T20:00:44.500

也许这个功能会对你有所帮助。

```
function range ( low, high, step ) {    // Create an array containing a range of elements
    // 
    // +   original by: _argos

    var matrix = [];
    var inival, endval, plus;
    var walker = step || 1;
    var chars  = false;

    if ( !isNaN ( low ) && !isNaN ( high ) ) {
        inival = low;
        endval = high;
    } else if ( isNaN ( low ) && isNaN ( high ) ) {
        chars = true;
        inival = low.charCodeAt ( 0 );
        endval = high.charCodeAt ( 0 );
    } else {
        inival = ( isNaN ( low ) ? 0 : low );
        endval = ( isNaN ( high ) ? 0 : high );
    }

    plus = ( ( inival > endval ) ? false : true );
    if ( plus ) {
        while ( inival <= endval ) {
            matrix.push ( ( ( chars ) ? String.fromCharCode ( inival ) : inival ) );
            inival += walker;
        }
    } else {
        while ( inival >= endval ) {
            matrix.push ( ( ( chars ) ? String.fromCharCode ( inival ) : inival ) );
            inival -= walker;
        }
    }

    return matrix;
}

console.log(range('A','Z')) 
// ["A", "B", "C", "D", "E", "F", "G", "H", "I", "J", "K", "L", "M", "N", "O", "P", "Q", "R", "S", "T", "U", "V", "W", "X", "Y", "Z"] 
```

这不是我的，取自：http: [//javascript.ru/php/range](http://javascript.ru/php/range)

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2020-11-01T01:50:46.843

[https://stackoverflow.com/a/64599169/8784402](https://stackoverflow.com/a/64599169/8784402)

### 使用单行生成字符列表

```
const charList = (a,z,d=1)=>(a=a.charCodeAt(),z=z.charCodeAt(),[...Array(Math.floor((z-a)/d)+1)].map((_,i)=>String.fromCharCode(a+i*d)));

console.log("from A to G", charList('A', 'G'));
console.log("from A to Z with step/delta of 2", charList('A', 'Z', 2));
console.log("reverse order from Z to P", charList('Z', 'P', -1));
console.log("from 0 to 5", charList('0', '5', 1));
console.log("from 9 to 5", charList('9', '5', -1));
console.log("from 0 to 8 with step 2", charList('0', '8', 2));
console.log("from α to ω", charList('α', 'ω'));
console.log("Hindi characters from क to ह", charList('क', 'ह'));
console.log("Russian characters from А to Я", charList('А', 'Я'));
```

对于打字稿

```
const charList = (p: string, q: string, d = 1) => {
  const a = p.charCodeAt(0),
    z = q.charCodeAt(0);
  return [...Array(Math.floor((z - a) / d) + 1)].map((_, i) =>
    String.fromCharCode(a + i * d)
  );
}; 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2012-09-11T20:21:56.183

```
function range(r, x) {
    var c1 = r.charCodeAt(0)+1, c2 = r.charCodeAt(3), s = r[0];
    if(c1 && c2)while (c1 <= c2) s += (x || "") + String.fromCharCode(c1++);
    return s;
}

range("A--S", ","); 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2013-06-17T14:06:12.703

```
var range = [];
for(var i = 65; i < 91; i++)
{
 range.push(String.fromCharCode(i));
}
range = range.join(','); 
```

给出范围 az，但我也喜欢一些功能选项。

# sql - T-Sql 从 tempdb 表中获取数据

> ID：12376873
> 
> 赞同：2
> 
> 时间：2012-09-11T19:49:14.637
> 
> 标签：sql, tsql, temp

我正在使用 Microsoft SQL Server 2008 R2 (RTM) - 10.50.1600.1 (X64)，我正在尝试对这样创建的表执行*SELECT*语句：

```
DECLARE @Sql AS VARCHAR(1500)

SET @Sql = 'SELECT 1 AS id, ''123'' AS value INTO #tmp_prueba'

EXECUTE ( @Sql )

SELECT * FROM #tmp_prueba 
```

但我注意到该表不存在

如何从表中获取数据？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-11T19:55:13.923

您在 @sql 中创建的临时表超出了外部查询的范围。

这是做你想做的一种方法：

```
DECLARE @Sql AS VARCHAR(1500);

SET @Sql = 'SELECT 1 AS id, ''123'' AS value INTO #tmp_prueba;
            select * from #tmp_prueba'

create table #tmp_prueba (id int, value varchar(255));

insert into #tmp_prueba
    EXECUTE( @Sql );

SELECT * FROM #tmp_prueba 
```

以下是变化。首先，我从@sql 查询的临时表中选择所有内容。其次，我创建了一个临时表（在本例中同名）来保存结果。现在，我可以将执行结果插入表中。瞧！数据在那里。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-23T19:03:52.420

临时表是在 Tempdb 上创建的，因此您也可以这样做：

```
SET @Sql = 'SELECT 1 AS id, ''123'' AS value INTO ##tmp_prueba'

EXECUTE ( @Sql )

Select * from tempdb..##tmp_prueba 
```

# r - 保持R中的原始顺序

> ID：12376881
> 
> 赞同：-1
> 
> 时间：2012-09-11T19:49:50.467
> 
> 标签：r

请问有人知道为什么下面的脚本不保持“父亲”列的原始顺序吗？它重新排列了列，三重奏将不再匹配。数据测试有 3 列（孩子、父亲、母亲）。和之前的一篇帖子有关：[用R中的另一个值代替每组的具体比例](https://stackoverflow.com/questions/12359979/substitute-the-specific-proportions-of-each-group-with-another-value-in-r)谢谢。

```
test$father <- unlist(
tapply(test$father,test$father,
    function(x) {
            x[1:floor(length(x)*0.25)] <- 0
            x
            }
    )
) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T20:00:41.677

您的实际输入数据可能未按`father`链接问题中的测试数据排序。

你会发现新`test$father`的是基于排序的列表。

# java - 大量数据删除

> ID：12376882
> 
> 赞同：1
> 
> 时间：2012-09-11T19:49:53.763
> 
> 标签：java, swing, garbage-collection

我有一个带有 GUI 的程序，它的段可以很大并且包含很多对象。我的程序的功能之一是“关闭”该段并创建一个新段。

这整个段仅通过一个 JPanel 和一个 ArrayList 附加到程序。如果我将这两个处理/设置为 null，则应该无法访问任何 JPanel 子项（其中一个是扩展 GUI 组件的复杂对象，但也包含很多变量）。

如果我是正确的，垃圾收集器将收集所有 JPanel 子项。

然而，孩子们的孩子们怎么办？我有一些“家庭”可以达到 5-6 个“世代”。它们只会在 GC 的第 5 次（或第 6 次）通过时被删除，还是会检测到整个“家庭”无法访问并立即收集（或在第一次通过时）？

编辑：另一个小问题：swing 组件是否有一种方法可以删除所有子组件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T00:13:26.463

对于经验方法，反复练习您的程序并寻找[此处](https://stackoverflow.com/a/6310284/230513)显示的模式，其中消耗的内存未能返回到基线。

![图像泄漏](../Images/0c22e4f0797150ada9f087b245630477.png)

相反，此[示例](https://stackoverflow.com/a/5918785/230513)在每个循环后返回基线。

![图像无泄漏](../Images/cbb5bd78c43ca5c66d07439b00707df0.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T20:49:50.087

对您问题的评论很好地解决了删除问题。但是，如果您仍然对在不删除组件的情况下删除组件的子项感到好奇，那么答案是否定的，如[JComponent 文档](http://docs.oracle.com/javase/7/docs/api/)中所示（我假设您使用的是 Java 7，如果不是，您可以轻松更改为正确的Java 版本）。如果您想快速轻松地从组件中删除子组件而不删除组件本身，我建议您只重新初始化组件。

# php - PHP函数检查数字是否属于区间

> ID：12376883
> 
> 赞同：0
> 
> 时间：2012-09-11T19:50:02.237
> 
> 标签：php, arrays

有一个数组：

```
$bounds = array([0]=>array('lower'=>2,'upper'=>5), 
                [1]=>array('lower'=>0,'upper'=>3)); 
```

和一个变量：

```
$val = 4; 
```

是否有任何 PHP 函数可以说明是否`$val`属于`$bounds`数组中“下”和“上”边界定义的任何区间？在这个例子中，4 属于第一个区间 [2; 5]。所以，答案应该是“真的”。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T19:56:00.910

我认为没有内置函数可以做到这一点。

但是，您可以使用以下`foreach`语句来做到这一点：

```
function check_interval($bounds, $val) {
   foreach ($bounds as $array) {
       if($array['lower'] <= $val && $array['upper'] >= $val)
           return true;
   }
   return false;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-11T19:53:12.027

不。

您必须像这样为数组创建一个循环

```
$val    = 4;
$key_id = FALSE;

foreach($bounds as $key => $data){
    if($val <= $data['upper'] AND $val >= $data['lower']){
        $key_id = $key;
        break;
    }
}

if($key_id !== FALSE){
    //  found something
    //  $bounds[$key_id] is your result in the array
} else {
    // found nothing
} 
```

作为一个函数

```
function find_range($bounds=array(), $val=0, $return_key=TRUE){
    if(is_array($bounds) === FALSE){
        $bounds = array();
    }

    if(is_numeric($val) === FALSE){
        $val = 0;
    }

    if(is_bool($return_key) === FALSE){
        $return_key = TRUE;
    }

    $key_id = FALSE;

    foreach($bounds as $key => $data){
        if($val < $data['upper'] AND $val > $data['lower']){
            $key_id = $key;
            break;
        }
    }

    if($key_id !== FALSE){
        return ($return_key === TRUE ? $key_id : TRUE);
    } else {
        return FALSE;
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-11T19:55:20.930

我不知道。您可能必须对其进行编码。这样的事情会做：

```
function isFromInterval($bounds, $val) {
    foreach ($bounds as $value) {
        if ($val >= $value['lower'] && $val <= $value['upper']) {
            return true;
        }
    }
    return false;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-11T19:55:01.300

不，但你可以这样做：

```
$bounds = array(3=>array('lower'=>2,'upper'=>5), 
                4=>array('lower'=>0,'upper'=>3));

$val = 4;

foreach($bounds as $num => $bound){
    if(max($bound) >= $val && $val >= min($bound)){
        echo $num;
    }
} 
```

# ant - HTML5 Ant 构建脚本

> ID：12376894
> 
> 赞同：1
> 
> 时间：2012-09-11T19:51:02.527
> 
> 标签：ant, html5boilerplate, build-script

我无法让多个页面使用 HTML Ant 构建脚本。这曾经是有效的，我会根据不同的页面获得多个包含的 js 文件，但此后就停止了工作。没有错误。没有警告。刚刚停止正常输出。

我正在为 HTML 使用 HTML5 样板。

我正在使用来自：[https ://github.com/h5bp/ant-build-script 的最新版本的构建脚本](https://github.com/h5bp/ant-build-script)

```
-index.html
    <!-- scripts concatenated and minified via build script -->
    <script src="js/plugins.js"></script>
    <script src="js/main.js"></script>
    <script src="js/script1.js"></script>
    <script src="js/script2.js"></script>
    <script src="js/script3.js"></script>
    <script src="js/script4.js"></script>
    <!-- end scripts -->

-index2.html has this:
    <!-- scripts concatenated and minified via build script -->
    <script src="js/plugins.js"></script>
    <script src="js/main2.js"></script>
    <script src="js/script1.js"></script>
    <!-- end scripts --> 
```

我在配置文件中有这个设置：

`file.pages = index.html, index2.html`

但是，只有 index.html 获取单个连接的 js 文件，而 index2.html 会删除注释和所有内容，它不会生成单独的连接 js 文件。它只是抛出缺少 js 文件的错误，因为 script1.js 是在第一次使用的，并且没有复制到发布文件夹中。

说得通？不知道出了什么问题。这可能是我正在做的愚蠢的事情，但我似乎无法通过在最后一小时搜索 Stack Overflow 找到任何答案。

# database - 实体中的主键

> ID：12376896
> 
> 赞同：1
> 
> 时间：2012-09-11T19:51:06.697
> 
> 标签：database, database-design, entity, primary-key, entity-relationship

如果没有唯一的列可以识别表中的每一行，

那么我的主键将至少是一组两个字段。

那是对的吗？

如果是正确的，那么在绘制关系图时，我必须在构成主键的两个属性下划线？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T00:16:24.753

这是一些术语：

*   **超级键**是一组列，它们一起唯一标识行。
*   **候选键**（或简称：“键”）是最小的^(1 个)超级键。有时一个键只包含一列，有时它包含几列（在这种情况下，它被称为“复合”）。
*   出于[实际原因](https://stackoverflow.com/a/9798682/533120)，我们将键分**为主**键或**备用**键。一张表有一个主键和零个或多个备用键。
*   如果密钥来自数据的内在属性，则它是**“自然的” 。**换句话说，它“意味着”某事。
*   如果一个键本身没有任何意义，那么它就是**“代理” ——它仅用于识别目的。**它通常实现为自动递增整数，但可能还有其他策略，例如 GUID（用于复制）。自然键是复合的很常见，但代理项几乎不会发生这种情况。

如果没有“明显”的自然键，则整行始终可以充当键²。但是，这很少实用，在这种情况下，您通常会引入代理键来识别行。

[有时](https://stackoverflow.com/a/11230592/533120)，但并非总是如此，在现有自然键*之外引入代理项是有用的。*

ER 图将清楚地识别 PK ³，无论它是自然的还是替代的，以及它是否是复合的。这看起来如何取决于所使用的符号，但 PK 通常以图形不同的方式绘制，并且可能以“PK”为前缀。

* * *

*¹即，如果您要从中删除任何列，它将不再是唯一的。*

*²数据库表是“关系”数学概念的物理表示。由于设置了关系，因此拥有两个相同的行是没有意义的，因此至少整行必须是唯一的（一个元素要么在集合中，要么不在集合中 - 它不能在集合中“两次”，因为反对多集）。*

*³假设它不仅仅是实体级别，所以根本没有显示任何属性。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T07:21:28.277

你是对的，在时尚之后。从技术上讲，主键和唯一键可以是两个不同的东西。您可以在表或实体上拥有唯一标识该实体的主键，并且还可以。在同一张表上，您可以有一个**唯一的键约束**，然后可以使用它来确保根据您选择的标准，没有两行最终具有相同的属性。因此，您可以在同一张表上**同时**拥有主键和唯一约束。**只需在数据库中自动生成一个主键列，然后在表中选择要用于强制唯一键约束的两列**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T19:56:19.803

如果您没有主键，您可以识别您的数据，但它不是高性能的。

作为最佳实践，您在桌子上使用主要。

首选是使用自动增量列作为主键

# c++ - fedora 上的 gcc 链接器错误：未定义的引用

> ID：12376897
> 
> 赞同：0
> 
> 时间：2012-09-11T19:51:14.687
> 
> 标签：c++, linker, fedora

我正在尝试在 Fedora/gcc 上编译/运行我的程序（在 Windows/MSVC 上运行良好）。编译现在很好，链接似乎是个问题。根据症状和这篇文章[未定义的对 `__gxx_personality_sj0 的引用](https://stackoverflow.com/questions/7751640/undefined-reference-to-gxx-personality-sj0)，在我看来，问题*可能*是编译器/链接器架构类型不匹配。反正我不是专家所以

*   我刚刚卸载了我`yum list | egrep gcc|g++|c++`使用`yum remove`和
*   然后跑了`yum install gcc gcc-c++`。

笔记：

*   您在下面看到的所有输出都是在上述步骤之后。
*   gcc 输出的最后一行是：`collect2: ld returned 1 exit status`
*   代码编译干净，没有警告/错误。
*   几乎所有未定义的引用都是对`namespace std`
*   我只有一个源文件`Main.C`（和 2 个头文件）。

我已经尽力提供我能想到的所有信息，如果您需要更多信息，请告诉我。

```
[root@myTestMachine kash]# ls -Altr
total 44K
-rw-r--r--. 1 root root 3.5K Sep 11 11:34 .bashrc
-rw-r--r--. 1 root root 2.6K Sep 11 13:50 MyCommon.h
-rw-r--r--. 1 root root 3.5K Sep 11 14:01 Main.cpp
-rw-r--r--. 1 root root  26K Sep 11 14:02 sort.h
-rw-r--r--. 1 root root   80 Sep 11 14:26 a.cpp
[root@myTestMachine kash]#
[root@myTestMachine kash]# gcc -c -std=c++0x Main.cpp
[root@myTestMachine kash]# echo $?
0
[root@myTestMachine kash]#
[root@myTestMachine kash]# rm Main.o
[root@myTestMachine kash]#
[root@myTestMachine kash]# gcc -std=c++0x Main.cpp
/tmp/cckR4oL1.o: In function `main::{lambda(std::basic_string<char, std::char_traits<char>, std::allocator<char> >)#1}::operator()(std::basic_string<char, std::char_traits<char>, std::allocator<char> >) const':
Main.cpp:(.text+0x270): undefined reference to `std::basic_string<char, std::char_traits<char>, std::allocator<char> >::c_str() const'

..... LOTS of other such undefined refs; see complete list on pastebin link below .....

Main.cpp:(.text._ZSt10_ConstructISsISsEEvPT_DpOT0_[_ZSt10_ConstructISsISsEEvPT_DpOT0_]+0x37): undefined reference to `std::basic_string<char, std::char_traits<char>, std::allocator<char> >::basic_string(std::basic_string<char, std::char_traits<char>, std::allocator<char> >&&)'
/tmp/cckR4oL1.o:(.eh_frame+0x1cb): undefined reference to `__gxx_personality_v0'
collect2: ld returned 1 exit status
[root@myTestMachine kash]# 
```

**在此处完成 gcc 输出：http: [//pastebin.com/PvycFHQM](http://pastebin.com/PvycFHQM)**

* * *

```
[root@myTestMachine kash]# uname -a
Linux myTestMachine 3.1.0-7.fc16.i686.PAE #1 SMP Tue Nov 1 20:53:45 UTC 2011 i686 i686 i386 GNU/Linux
[root@myTestMachine kash]#
[root@myTestMachine kash]# yum list gcc gcc-c++
Loaded plugins: langpacks, presto, refresh-packagekit
Installed Packages
gcc.i686                                               4.6.3-2.fc16                                           @updates
gcc-c++.i686                                           4.6.3-2.fc16                                           @updates
[root@myTestMachine kash]#
[root@myTestMachine kash]# rpm -qa | grep gcc
gcc-4.6.3-2.fc16.i686
libgcc-4.6.3-2.fc16.i686
arm-gp2x-linux-gcc-4.1.2-12.fc15.i686
gcc-c++-4.6.3-2.fc16.i686
arm-gp2x-linux-gcc-c++-4.1.2-12.fc15.i686
[root@myTestMachine kash]#
[root@myTestMachine kash]# rpm -qa | grep g++
[root@myTestMachine kash]#
[root@myTestMachine kash]# rpm -qa | grep c++
libsigc++20-2.2.10-1.fc16.i686
libstdc++-devel-4.6.3-2.fc16.i686
libstdc++-4.6.3-2.fc16.i686
gcc-c++-4.6.3-2.fc16.i686
arm-gp2x-linux-gcc-c++-4.1.2-12.fc15.i686
[root@myTestMachine kash]#
[root@myTestMachine kash]# rpm -qa | grep ld
rpm-build-libs-4.9.1.2-1.fc16.i686
libldb-1.1.0-1.fc16.i686
openldap-2.4.26-1.fc16.1.i686
[root@myTestMachine kash]# rpm -qa | grep -w ld
[root@myTestMachine kash]#
[root@myTestMachine kash]# ld -version
GNU ld version 2.21.53.0.1-6.fc16 20110716
Copyright 2011 Free Software Foundation, Inc.
This program is free software; you may redistribute it under the terms of
the GNU General Public License version 3 or (at your option) a later version.
This program has absolutely no warranty.
[root@myTestMachine kash]#
[root@myTestMachine kash]# gcc --version
gcc (GCC) 4.6.3 20120306 (Red Hat 4.6.3-2)
Copyright (C) 2011 Free Software Foundation, Inc.
This is free software; see the source for copying conditions.  There is NO
warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.

[root@myTestMachine kash]# 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-11T19:53:10.290

不要这样做：

```
gcc -std=c++0x Main.cpp 
```

改为这样做：

```
g++ -std=c++0x Main.cpp 
```

或者改为这样做：

```
gcc Main.cpp -lstdc++ 
```

底线是：确保**在链接阶段**使用“g++”或“-lstdc++” 。您可以在编译阶段使用任一前端。

# android - Android, EditText 事件, 防止部分文本可以删除/更改

> ID：12376899
> 
> 赞同：1
> 
> 时间：2012-09-11T19:51:35.183
> 
> 标签：android, events, android-edittext

我尝试在我的 Android 应用程序中向 EditText 对象（用户可以编辑的文本区域）添加事件句柄，以控制用户可以编辑的内容。假设我的 EditText 中有此文本：

```
 * Hello 
   * World
   * On You... 
```

我将附加一个控制器，允许用户仅编辑`Hello`,`World`或`On You`，如果用户尝试编辑或删除`*`和 系统后的第一个空格`*`，系统将停止编辑。

在 Java SE 上，当用户尝试删除或替换部分文本然后停止编辑时，我可以使用[Document.remove(int, int)获取事件。](http://docs.oracle.com/javase/1.4.2/docs/api/javax/swing/text/Document.html#remove%28int,%20int%29)

android EditText 有类似的 API 吗？

我曾尝试使用[TextWatcher](http://developer.android.com/reference/android/text/TextWatcher.html)，但据我所知这对我没有帮助，我知道方法[`public void onTextChanged(CharSequence s, int start, int before, int count)`](http://developer.android.com/reference/android/text/TextWatcher.html#onTextChanged%28java.lang.CharSequence,%20int,%20int,%20int%29)会给出一些关于用户删除的文本的注释，但这似乎不可靠。这让我没有办法让这件事停止使用的编辑。

**编辑：** 我可以使用 Spanner 来防止对部分文本进行编辑吗？作为只读扳手？

有人知道解决我问题的好方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T13:08:57.823

我想我最终找到了一个可行的解决方案，但必须更深入地尝试才能知道这是否存在一些错误或错误。

```
public abstract class TextListener implements InputFilter {

    public abstract CharSequence removeStr(CharSequence removeChars, int startPos);

    public abstract CharSequence insertStr(CharSequence newChars, int startPos);

    public abstract CharSequence updateStr(CharSequence oldChars, int startPos, CharSequence newChars);

    public CharSequence filter(CharSequence source, int start, int end, Spanned dest, int dstart, int dend) {
        CharSequence returnStr = source;
        String curStr = dest.subSequence(dstart, dend).toString();
        String newStr = source.toString();
        int length = end - start;
        int dlength = dend - dstart;
        if (dlength > 0 && length == 0) {
            // Case: Remove chars, Simple
            returnStr = TextListener.this.removeStr(dest.subSequence(dstart, dend), dstart);
        } else if (length > 0 && dlength == 0) {
            // Case: Insert chars, Simple
            returnStr = TextListener.this.insertStr(source.subSequence(start, end), dstart);
        } else if (curStr.length() > newStr.length()) {
            // Case: Remove string or replace
            if (curStr.startsWith(newStr)) {
                // Case: Insert chars, by append
                returnStr = TextUtils.concat(curStr.subSequence(0, newStr.length()), TextListener.this.removeStr(curStr.subSequence(newStr.length(), curStr.length()), dstart + curStr.length()));
            } else {
                // Case Replace chars.
                returnStr = TextListener.this.updateStr(curStr, dstart, newStr);
            }
        } else if (curStr.length() < newStr.length()) {
            // Case: Append String or rrepace.
            if (newStr.startsWith(curStr)) {
                // Addend, Insert
                returnStr = TextUtils.concat(curStr, TextListener.this.insertStr(newStr.subSequence(curStr.length(), newStr.length()), dstart + curStr.length()));
            } else {
                returnStr = TextListener.this.updateStr(curStr, dstart, newStr);
            }
        } else {
            // No update os str...
        }

        // If the return value is same as the source values, return the source value.
        return TextUtils.equals(source, returnStr) ? source : returnStr;
    }
} 
```

从这段代码中，我可以很容易地阻止通过查找在我尝试编辑的文本中选择部分文本进行编辑。

# c++ - 渲染到纹理，然后在 OpenGL 中将结果渲染到屏幕

> ID：12376900
> 
> 赞同：1
> 
> 时间：2012-09-11T19:51:37.673
> 
> 标签：c++, opengl, shader, textures

我需要将 OpenGL 场景渲染为纹理，然后在着色器中操作该纹理。我已经通过使用 Framebuffer Objects 解决了这个问题，我想我现在已经很好地理解了。在我的效果管道中的许多地方，我需要渲染一个全屏四边形并使用动态渲染的纹理对其进行纹理处理，这就是我的问题所在。

这就是我的场景的样子：[https ://www.mathematik.uni-marburg.de/~thomak/planet.jpg](https://www.mathematik.uni-marburg.de/~thomak/planet.jpg)

我将其渲染为纹理并将该纹理映射到全屏四边形。但是，生成的图像以这种方式失真：[https ://www.mathematik.uni-marburg.de/~thomak/planettexture.jpg](https://www.mathematik.uni-marburg.de/~thomak/planettexture.jpg)

这是渲染四边形并设置纹理坐标的代码：

```
glMatrixMode(GL_MODELVIEW);
glPushMatrix();
glLoadIdentity();
glMatrixMode(GL_PROJECTION);
glPushMatrix();
glLoadIdentity();
glBegin(GL_QUADS);

glTexCoord2i(0, 0);
glVertex3i(-1, -1, -1);    
glTexCoord2i(0, 1);
glVertex3i( 1, -1, -1); 
glTexCoord2i(1, 1);   
glVertex3i( 1,  1, -1); 
glTexCoord2i(1, 0);   
glVertex3i(-1,  1, -1);

glEnd();
glPopMatrix();
glMatrixMode(GL_MODELVIEW);
glPopMatrix(); 
```

着色器代码在这里：

```
sampler2D BlitSamp = sampler_state
{
  MinFilter = LINEAR;
  MagFilter = LINEAR;
  MipFilter = LINEAR;
  AddressU = Clamp;
  AddressV = Clamp;
};

float4 AlphaClearPS(float2 texcoords : TEXCOORD0) : COLOR
{
  return float4(tex2D(BlitSamp, texcoords).rgb, 1.0f);
} 
```

其中 BlitSamp 是我渲染到然后传递给着色器的纹理。这里会发生什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T22:00:15.810

您的 tex-coords 可能已关闭。你的代码，我的评论：

```
glTexCoord2i(0, 0);     //Bottom-Left
glVertex3i(-1, -1, -1); //Bottom-Left    

glTexCoord2i(0, 1);     //Top-Left
glVertex3i( 1, -1, -1); //Bottom-Right??? 

glTexCoord2i(1, 1);     //Top-Right
glVertex3i( 1,  1, -1); //Top-Right

glTexCoord2i(1, 0);     //Bottom-Right
glVertex3i(-1,  1, -1); //Bottom-Left?? 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T21:56:40.013

您渲染四边形的代码看起来不错，这表明四边形的大小和视口的大小不匹配。

您是否可以在创建渲染纹理时交换宽度和高度？

# oracle - 如何选择 'HH24:MI:SSxFF6' 格式的 varchar2 字段作为 INTERVAL HOUR TO SECOND(6)？

> ID：12376901
> 
> 赞同：1
> 
> 时间：2012-09-11T19:51:38.407
> 
> 标签：oracle, oracle11g

以下查询成功：

```
SELECT INTERVAL '00:00:00.000000' HOUR TO SECOND(6)
FROM DUAL; 
```

以下失败：

```
SELECT INTERVAL time_field HOUR TO SECOND(6) -- time_field is a VARCHAR2(15)
FROM some_table; 
```

带有以下错误：

```
ORA-00923: FROM keyword not found where expected 
```

如何修复我的第二个查询以拉回 HOUR TO SECOND INTERVAL？

当我尝试：

```
SELECT cast(time_field AS INTERVAL HOUR TO SECOND(6))
FROM some_table 
```

我得到以下信息：

```
ORA-00963: unsupported interval type 
```

测试设置：

```
CREATE TABLE some_table (
   time_field VARCHAR2(50)
);

INSERT ALL
INTO some_table (time_field) VALUES ('10:00:00.000000')
INTO some_table (time_field) VALUES ('12:00:00.000000')
INTO some_table (time_field) VALUES ('15:00:00.000000')
INTO some_table (time_field) VALUES ('17:00:00.000000')
INTO some_table (time_field) VALUES ('20:00:00.000000')
INTO some_table (time_field) VALUES (NULL)
SELECT * FROM DUAL; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T22:33:35.793

您可以使用该[`TO_DSINTERVAL`功能](http://docs.oracle.com/cd/E14072_01/server.112/e10592/functions202.htm)；此处使用 CTE 复制表的示例：

```
WITH some_table AS (SELECT '00:00:00.000000' AS time_field FROM dual)
SELECT TO_DSINTERVAL('0 ' || time_field)
FROM some_table;

TO_DSINTERVAL('0'||TIME_FIELD)
---------------------------------------------------------------------------
+000000000 00:00:00.000000000 
```

请注意，要使函数能够识别格式，您必须提供“天”部分，因此需要添加虚拟`'0 '`字符串。

您的固定值查询返回的格式略有不同（或至少显示略有不同；[间隔 daa 类型的格式模型](http://docs.oracle.com/cd/E14072_01/server.112/e10592/sql_elements001.htm#BABBICGH)与日期的方式完全相同，因此不确定如何准确表达）：

```
SELECT INTERVAL '00:00:00.000000' HOUR TO SECOND(6)
FROM DUAL;

INTERVAL'00:00:00.000000'HOURTOSECOND(6)
---------------------------------------------------------------------------
+00 00:00:00.000000 
```

要复制它，`cast`如果需要，您可以这样做：

```
WITH some_table AS (SELECT '00:00:00.000000' AS time_field FROM dual)
SELECT CAST(TO_DSINTERVAL('0 ' || time_field) AS INTERVAL DAY TO SECOND(6))
FROM some_table;

CAST(TO_DSINTERVAL('0'||TIME_FIELD)ASINTERVALDAYTOSECOND(6))
---------------------------------------------------------------------------
+00 00:00:00.000000 
```

... 要不就：

```
WITH some_table AS (SELECT '00:00:00.000000' AS time_field FROM dual)
SELECT CAST('0 ' || time_field AS INTERVAL DAY TO SECOND(6))
FROM some_table;

CAST('0'||TIME_FIELDASINTERVALDAYTOSECOND(6))
---------------------------------------------------------------------------
+00 00:00:00.000000 
```

...这几乎是@catcall 首先建议的内容，但这也需要`'0 '`前置，否则你会得到一个`ORA-01867`. （或者，如果您尝试使用`HOUR TO SECOND`, `ORA-00963`，即使带有前置日期值）。但是，我猜（这只是一个猜测，虽然受过很少的教育）它正在做一个隐式`TO_DSINTERVAL`或类似的，我想我更喜欢使用一个显式的，所以我确定发生了什么。那可能只是我，虽然......

* * *

使用您的示例数据我也得到一个`ORA-01867`，但它是由 null 值引起的。您可以使用 a`case`在结果中将其保留为 null：

```
SELECT CASE WHEN time_field IS NULL THEN null
    ELSE CAST('0 ' || time_field AS INTERVAL DAY TO SECOND(6)) END
FROM some_table;

CASEWHENTIME_FIELDISNULLTHENNULLELSECAST('0'||TIME_FIELDASINTERVALDAYTOSECO
---------------------------------------------------------------------------
+00 10:00:00.000000
+00 12:00:00.000000
+00 15:00:00.000000
+00 17:00:00.000000
+00 20:00:00.000000

6 rows selected. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T20:00:09.807

我认为需要这个（未经测试的）演员表。

```
SELECT cast (time_field as interval hour to second(6))
FROM some_table; 
```

您的列必须是与强制转换为区间兼容的类型，并且它必须包含可以解释为区间的数据。

[用于 CAST 的 Oracle 11g 文档](http://docs.oracle.com/cd/E14072_01/server.112/e10592/functions021.htm)

* * *

示例代码

```
create table test (
  interval_type interval day to second,
  varchar_type varchar2(35) 
);

insert into test values (
  (current_timestamp - to_date(current_date)),
  (current_timestamp - to_date(current_date))
);

select 
  interval_type, 
  varchar_type
from test;

INTERVAL_TYPE                                                                              VARCHAR_TYPE
{"Bytes":[-128,0,0,0,78,95,84,-102,-92,-83,-64],"ShareBytes":null,"Length":11,"Stream":{}} +000000000 18:35:24.000000

select 
  interval_type, 
  cast (varchar_type as interval day to second)
from test;

INTERVAL_TYPE                                                                               CAST(VARCHAR_TYPEASINTERVALDAYTOSECOND)
{"Bytes":[-128,0,0,0,78,95,84,-102,-92,-83,-64],"ShareBytes":null,"Length":11,"Stream":{}}  {"Bytes":[-128,0,0,0,78,95,84,-128,0,0,0],"ShareBytes":null,"Length":11,"Stream":{}} 
```

# linq - 解析 epub TOC.ncx C# WP7

> ID：12376906
> 
> 赞同：0
> 
> 时间：2012-09-11T19:52:09.927
> 
> 标签：linq, windows-phone-7, c#-4.0, xml-parsing

我正在尝试在 WP7 C# 中解析 TOC.ncx（即 xml）

以下是文件内容：

```
<navMap>
<navPoint id="navpoint-1" playOrder="1"><navLabel><text>Cover</text></navLabel><content src="xhtml/cover.html" /></navPoint>
<navPoint id="navpoint-2" playOrder="2"><navLabel><text>Title Page</text></navLabel><content src="xhtml/title.html" /></navPoint>
<navPoint id="navpoint-3" playOrder="3"><navLabel><text>Contents</text></navLabel><content src="xhtml/toc.html" /></navPoint>
<navPoint id="navpoint-4" playOrder="4"><navLabel><text>Foreword</text></navLabel><content src="xhtml/foreword.html" /></navPoint>
<navPoint id="navpoint-5" playOrder="5"><navLabel><text>Preface</text></navLabel><content src="xhtml/preface.html" /></navPoint>
<navPoint id="navpoint-6" playOrder="6"><navLabel><text>Introduction</text></navLabel><content src="xhtml/introduction.html" /></navPoint>
<navPoint id="navpoint-7" playOrder="7"><navLabel><text>The East India Company</text></navLabel><content src="xhtml/chapter001.html" />
    <navPoint id="navpoint-8" playOrder="8"><navLabel><text>The Voyages</text></navLabel><content src="xhtml/chapter001.html#eas0000222" /></navPoint>
    <navPoint id="navpoint-9" playOrder="9"><navLabel><text>Mission to India</text></navLabel><content src="xhtml/chapter002.html" /></navPoint>
    <navPoint id="navpoint-10" playOrder="10"><navLabel><text>Madras, Bombay and Calcutta</text></navLabel><content src="xhtml/chapter003.html" /></navPoint>
    <navPoint id="navpoint-11" playOrder="11"><navLabel><text>Growth Amidst Turmoil</text></navLabel><content src="xhtml/chapter004.html" /></navPoint>
    <navPoint id="navpoint-12" playOrder="12"><navLabel><text>A Bridge between Many Worlds</text></navLabel><content src="xhtml/chapter005.html" /></navPoint>
    <navPoint id="navpoint-13" playOrder="13"><navLabel><text>Partners and Agents</text></navLabel><content src="xhtml/chapter006.html" /></navPoint>
    <navPoint id="navpoint-14" playOrder="14"><navLabel><text>War and Plunder</text></navLabel><content src="xhtml/chapter007.html" /></navPoint>
    <navPoint id="navpoint-15" playOrder="15"><navLabel><text>Ruler in India</text></navLabel><content src="xhtml/chapter008.html" /></navPoint>
    <navPoint id="navpoint-16" playOrder="16"><navLabel><text>The Company and Indian History</text></navLabel><content src="xhtml/chapter009.html" /></navPoint>
</navPoint>
<navPoint id="navpoint-17" playOrder="17"><navLabel><text>Timeline</text></navLabel><content src="xhtml/appendix001.html" /></navPoint>
<navPoint id="navpoint-18" playOrder="18"><navLabel><text>Bibliography</text></navLabel><content src="xhtml/appendix002.html" /></navPoint>
<navPoint id="navpoint-19" playOrder="19"><navLabel><text>Copyright Page</text></navLabel><content src="xhtml/copyright.html" /></navPoint>
</navMap> 
```

以下是我编写的用于获取的代码`navPoint`：

```
private List<NavPoint> GetNavigationChildren(IEnumerable<XElement> elements, XNamespace nameSpace)
        {
            List<NavPoint> navigationPoints = new List<NavPoint>(elements.Count());
            if (!elements.Any())
                return navigationPoints;

            navigationPoints.AddRange(elements.Select(navPoint =>
                new NavPoint(navPoint.Attribute("id").Value,
                            navPoint.Element(nameSpace + "navLabel").Element(nameSpace + "text").Value,
                            HttpUtility.UrlDecode(navPoint.Element(nameSpace + "content").Attribute("src").Value),
                            int.Parse(navPoint.Attribute("playOrder").Value), Content[0] as EpubContent,
                            GetNavigationChildren(navPoint.Elements(nameSpace + "navPoint"),
                            nameSpace))));

            return navigationPoints;
        } 
```

通过执行上面的代码，我可以获得顶级导航点（即 navPoint-1 到 navPoint-7，然后 navPoint-17 到 navPoint-19），但问题是它没有获取子元素，即 navPoint-7 的 navPoints .

谁能建议我在这里做错了什么？

的调用`GetNavigationChildren`是这样完成的：

```
XElement xElement = XElement.Parse(@xmlText);
XNamespace xNamespace = xElement.Attribute("xmlns") != null ? xElement.Attribute("xmlns").Value : XNamespace.None;
List<NavPoint> navPoints = GetNavigationChildren(xElement.Element(xNamespace + "navMap").Elements(xNamespace + "navPoint"), xNamespace); 
```

而类 def`NavPoint`是：

```
public NavPoint(string id, string title, string source, int order, EpubContent contentData, List<NavPoint> children)
        {
            ID = id;
            Title = title;
            Source = source;
            Order = order;
            ContentData = contentData;
            Children = children;
        } 
```

请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T19:54:59.950

如果您需要导航点的平面列表，则需要使用[`Descendants`](http://msdn.microsoft.com/en-us/library/bb337483.aspx)而不是`Elements`.

# php - 表单中的jQuery克隆表行不提交克隆字段

> ID：12376908
> 
> 赞同：1
> 
> 时间：2012-09-11T19:52:10.660
> 
> 标签：php, jquery

下面是一个简化的示例，演示了我遇到的问题。100% 的代码贴在下面。

三个文件一起工作：testa.php、testb.php 和 testc.js。（FWIW，testa.php 可以作为 index.php，但这只是一个演示）

* * *

概述：

测试PHP

*   当用户单击锚标记时，将值发送到 testb.php
*   在 FORM 结构中接收来自 testb.php 的 ajax 响应到 div #reportstable
*   表单提交给自己，因此它打印 $_POST 数据 -

TESTB.PHP

*   通过 ajax 从 TESTA.PHP 接收值
*   输出对应于接收值的表
*   （在本例中，我删除了接收值的使用方式，但仍保留此结构，因为它会影响 testc.js 中的 jQuery）

TESTC.JS

*   使它（部分）工作的jQuery

* * *

**问题 1：如果用户添加了多个“文档”（即行），则只有最后一个文档的数据出现在 POST 数据中。**.

**问题 2：DocTitle 和 FileName ID (dt1, fn1) 未发布，因为它们出现在 DOM 中。在 DOM 中，它们的 ID 会正确递增（dt11、dt12、dt13 等），但是当 POST 时只有一个通过并且它没有递增。**（添加几个文档后，使用 firebug 检查表格元素。

**问题3：在添加新文档时单击“选择文件”锚点时，第一次单击不会“采取”。**对这个有什么想法吗？

* * *

测试PHP

```
<?php   
    If (empty($_POST)===false) {
        echo '<pre>';
        print_r($_POST);
        echo '</pre>';
        die();
    }
?>
<html><body>

<script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script type="text/javascript" src="jquery-custom-file-input.js"></script>
<script type="text/javascript" src="testc.js"></script>
<br />

Project*:<br />
<a href="#" id="project_pick">Click Me</a>

<form action="" method="post">
    <div id="reportstable">
    </div>
</form>

</body></html> 
```

* * *

TESTB.PHP

```
<?php
    $project_id = $_POST['project_id'];

    if ($project_id == 5) {
        echo '
            <table id="DocTable">
                <tr>
                    <th width="150">Document Title</th>
                    <th width="150">File Name</th>
                </tr>
                <tr name="tr2" id="tr2" style="display:none;">
                    <td><input type="text" name="dt1" id="dt1"></td>
                    <td>
                        <input type="hidden" name="fn1" id="fn1">
                        <span id="sp1"><a href="#" id="ah1">choose file</a><span>
                    </td>
                </tr>
            </table>
            <br />
            <a href="#" id="add_row">add document</a><br />
            <br />
            <input type="submit" name="submit" id="submit_it" value="Submit">
        ';
    } 
```

* * *

TESTC.JS

```
$(function(){

var count = 1;
//*******************************************************************    
$('#project_pick').click(function(e) {
    $(this).hide();
    $.ajax({
        type: "POST",
        url: "testb.php",
        data: "project_id=5",
        success:function(data){
            $('#reportstable').html(data);
        }
    });
});
//*******************************************************************    
$(document).on('click','#ah11',function() {
    $(this).file().choose(function(e, input) {
        $('#fn11').val(input.val());
        $('#sp11').html(input.val());
        $('#sp11').css('color','grey');
    });
});
//*******************************************************************    
$(document).on('click','#ah12',function() {
    $(this).file().choose(function(e, input) {
        $('#fn12').val(input.val());
        $('#sp12').html(input.val());
        $('#sp12').css('color','grey');
    });
});
//*******************************************************************    
$(document).on('click','#ah13',function() {
    $(this).file().choose(function(e, input) {
        $('#fn13').val(input.val());
        $('#sp13').html(input.val());
        $('#sp13').css('color','grey');
    });
});
//*******************************************************************    
$(document).on('click', '#add_row', function() {
    $("table#DocTable tr:nth-child(2)")
        .clone()
        .show()
        .find("a, input, span, tr").each(function() {
            $(this)
                .val('')
                .attr('id', function(_, id) {
                    return id + count;
                    });
        })
        .end()
        .appendTo("table");

    count++;
    if (count == 4) {
        $('#add_row').prop('disabled', 'disabled');
    }
}); //end fn add_row
//*******************************************************************    
$(document).on('click', '#submit_it', function() {
    alert('This will be submitted now');
});
//*******************************************************************
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T20:08:17.847

在您的 javascript 中，您似乎只是在更改`id`属性的值。但是，当您发布表单时，该`id`属性不相关且未发布，您需要该`name`属性。

因此，在您更改 id 的地方，您确实应该更改名称（如果您真的需要它们，则 id 必须是唯一的）。

但是，一个更简单的解决方案是使用数组作为名称，例如：

```
<input type="text" name="dt[]"> 
```

如果您复制/克隆具有这些名称的元素并发布表单，您将在`$_POST['dt']`.

# c++ - 是否有任何支持可与 Visual Studio C++ 一起使用的自定义内核的 SVM 库？

> ID：12376913
> 
> 赞同：4
> 
> 时间：2012-09-11T19:52:39.960
> 
> 标签：c++, visual-studio-2010, visual-studio, machine-learning, svm

似乎每个 C++ 的 SVM 库都是

1.  禁止自定义内核或
2.  Linux 独占，与 Visual Studio 一起使用将是一个巨大的痛苦。

当前是否有任何支持自定义内核并可在 Visual Studio（特别是 2010）中使用的 SVM 库？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-11T21:35:52.110

就像我说的那样，根据您的需要修改 libsvm 很容易，这里是解释：[http ://www.csie.ntu.edu.tw/~cjlin/libsvm/faq.html#f418](http://www.csie.ntu.edu.tw/~cjlin/libsvm/faq.html#f418)

由于我不熟悉这两个内核，我只是从谷歌复制了公式。我希望我做对了：D

A. 直方图交叉核（太糟糕了，所以不渲染 Latex）：SUM(min(x_i, y_i)) -> 我们可以改变线性核并将其转换成这个，所以，基本上，在 3.12 版中（最新版本），在 svm.cpp 中：

-> 第 233 行返回点（x[i],x[j]）；- 你只需要从 Kernel::dot 方法中复制代码并相应地改变它，所以是这样的：

```
double sum = 0;
while(x->index != -1 && y->index != -1)
{
    if(x->index == y->index)
    {
        sum += min(x->value, y->value);
        ++x;
        ++y;
    }
    else
    {
        if(x->index > y->index)
            ++x;
        else
            ++y;
    }           
}
return sum; 
```

（对于普通测试文件，x 应该与 y 具有相同的长度。我认为当测试或模型文件包含值为 0 的属性时，else 分支存在于特殊情况下，可以省略，但如果 libsvm 产生预期的结果线性内核，那么修改后的内核也可以正常工作）

-> 第 322 行返回点（x，y）；- 同上

B. 卡方核：SUM((2 x_i y_i) / (x_i + y_i)) - 好吧，让我们看看...我想我们可以再次尝试修改线性核（也许RBF的一些优化可以是在这种情况下被利用，但现在让我们忽略它）：

-> 第 233 行变为：

```
double sum = 0;
while(x->index != -1 && y->index != -1)
{
    if(x->index == y->index)
    {
        sum += 2 * x->value * y->value / (x->value + y->value);
        ++x;
        ++y;
    }
    else
    {
        if(x->index > y->index)
            ++x;
        else
            ++y;
    }           
}
return sum; 
```

-> 第 322 行 - 同上

PS：以上代码是用记事本写的，未经测试。如果它不起作用，请不要杀我，你必须花两周时间调试神秘的 C 代码。[讽刺]对我来说，它从第一次尝试就起作用了。[/sarcasm]不过，一旦你了解了工作流程，你就可以通过在这两个地方放置断点来轻松调试它。如果您遇到问题，我很乐意提供更多帮助，所以如果您遇到困难，请告诉我。

# python - scipy.io.loadmat：Matlab 逻辑数组到 Numpy 布尔数组

> ID：12376915
> 
> 赞同：0
> 
> 时间：2012-09-11T19:52:47.783
> 
> 标签：python, matlab, numpy, scipy

我想使用 Python成功地将 Matlab`logical`数组读取为 Numpy数组。`bool`

但是如果我在 Matlab 中保存一个逻辑数组，

```
l = rand(1,10) > 0.5; save -v6 file.mat l 
```

并尝试将其加载到 Python 中，

```
d = scipy.io.loadmat('file.mat')
l = d['l'] 
```

那么数据类型`l`是`uint8`

另外，如果我尝试使用该`mat_dtype=True`选项，则数据类型将`l`变为`float64`.

难道我做错了什么？我已经尝试了版本 6 和版本 7 MAT 文件，它们都受`scipy.io.loadmat`.

# javascript - 奇怪的 javascript IE 错误，类中的变量清除

> ID：12376918
> 
> 赞同：2
> 
> 时间：2012-09-11T19:52:58.353
> 
> 标签：javascript, jquery, internet-explorer

我有一个问题，所以：

```
var pager = new Array();
var Imtech = {};
Imtech.Pager = function() {
    this.paragraphs = '';
    this.showPage = function() {
        console.log(this.paragraphs.html());
    }
} 
```

我所做的：

```
pager[0] = new Imtech.pager();
pager[0].paragraphs = $('some obj name here');
pager[0].showPage();
pager[0].showPage(); 
```

所以，我有很多分页类；当我调用方法时`pager[0].showPage()`；- 一切都好但是当我再次尝试时`pager[0].showPage()`- 我得到了空的结果......

甚至不知道哪里错了；并且 var 不仅在 console.log() 之后清除，而且在任何操作之后...

**我如何决定问题：**

所以我做了一个非常非常糟糕的版本，但是对于 ie 它工作正常；问题是，在第一次使用存储的 DOM 元素后，所有的 innerHTML 都被清除了，但对象仍然存在；我决定像文本字符串一样存储innerHTML；之类的：

```
pager[0].innerHTML = $('some obj name here').html(); 
```

当我需要像 obj 这样的 inneHTML 时，我可以制作 obj，因此它不是出色的变体，但在 ie（和其他浏览器）中可以正常工作。

# php - php中第二个foreach循环的错误

> ID：12376923
> 
> 赞同：-1
> 
> 时间：2012-09-11T19:53:15.200
> 
> 标签：php, wordpress, foreach

我有一个包含对 wordpress db 的查询结果的数组：

```
$query = $wpdb->get_results("SELECT id, user_login, date, data1, data2 FROM table WHERE date >= 'date1' AND date <= 'date2'");
foreach ($query as $a) {
    $array[] = array('id'=>$a->id, 'user_login'=>$a->user_login, 'date'=>$a->date, 'data1'=>$a->data1, 'data2'=>$a->data2);
} 
```

下一个 foreach 循环为我的需要制作字符串我什么也没得到，甚至

```
foreach ($array as $c) {
    $d = $c->id;
}
echo $d; 
```

返回空值。我究竟做错了什么 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T19:55:48.073

`$c`是一个数组而不是一个对象。

尝试`$d = $c["id"];`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T19:55:50.550

错误的

```
$d = $c->id; 
```

正确的

```
$d = $c["id"]; 
```

# jquery - 当rails控制器返回200 OK时未触发jquery ajax成功回调

> ID：12376924
> 
> 赞同：3
> 
> 时间：2012-09-11T19:53:24.817
> 
> 标签：jquery, ruby-on-rails

我正在执行标准的 ajax 请求，并且我有一个 rails 控制器操作：

```
def up_vote
  resource.votes.increment!
  render :nothing => true
end 
```

这不会触发我的 jquery ajax 成功回调---但是它会触发 statusCode: 200 回调，但我想使用成功而不是那个。轨道渲染文档说使用“head”而不是 render :nothing => true，所以我尝试使用 head :ok，但结果相同。

如何使此方法触发成功回调？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-17T18:16:42.103

我在使用`head :ok`Rails 3.2 的样式响应时遇到了同样的问题。`dataType: "json"`我通过更改为`dataType: "text"`在我的`$.ajax`通话中修复了它。

如果您指定想要 JSON 响应，jQuery 似乎不会调用成功回调，但返回的数据不会验证为 JSON。

这个问题给了我需要弄清楚的提示：[jQuery.ajax success callback function not executed](https://stackoverflow.com/questions/2787180/jquery-ajax-success-callback-function-not-executed)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-11T08:49:14.073

我通过呈现 json 响应修复了这个错误。`render :json => { :success => "success", :status_code => "200" }`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-02-02T22:25:05.160

老问题，但在搜索引擎中很高，所以给它一个答案:)

你可以这样做：

```
def up_vote
  resource.votes.increment!
  render :nothing => true

  respond_to do |format|
    format.json  { render json: {} , status: 200 }
  end
end 
```

# java - 从 java 运行交互式命令行应用程序

> ID：12376925
> 
> 赞同：10
> 
> 时间：2012-09-11T19:53:27.883
> 
> 标签：java, process

我通常使用 java.lang.ProcessBuilder 和 java.lang.Process 来运行外部命令行程序，它适用于运行并完成的命令。例如，这将在工作目录中运行带有参数“myArg”的“myProgram”：

```
List<String> commandLine = new ArrayList<String>();
commandLine.add("myProgram");
commandLine.add("myArg");
ProcessBuilder builder = new ProcessBuilder(commandLine);
builder.redirectErrorStream(true);
Process process = builder.start(); 
```

但是，假设我想运行一个脚本或程序或具有交互式输入的东西（它提示我在启动后需要更多输入）。我可以在 Java 中使用与上述类似的代码来做到这一点，还是需要不同的方法？还是有一些图书馆可以帮助我解决这个问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-11T19:59:19.117

根据[文档](http://docs.oracle.com/javase/7/docs/api/java/lang/ProcessBuilder.html#redirectInput%28java.lang.ProcessBuilder.Redirect%29)，您应该能够重定向输入和输出流。这告诉它使用来自父进程的`System.in`/ ：`System.out`

```
builder.redirectInput(ProcessBuilder.Redirect.INHERIT);
builder.redirectOutput(ProcessBuilder.Redirect.INHERIT); 
```

如果您想将内容写入进程的输入：

> 如果源是 Redirect.PIPE（初始值），则可以使用 Process.getOutputStream() 返回的输出流写入子流程的标准输入。如果源设置为任何其他值，则 Process.getOutputStream() 将返回空输出流。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T20:06:43.310

重定向标准输入和标准输出无疑是简单命令行程序的一种选择。

如果您确实需要编写击键脚本（例如，在测试脚本中），则使用“机器人”类是另一种方法：

*   [http://www.java-tips.org/java-se-tips/java.awt/how-to-use-robot-class-in-java.html](http://www.java-tips.org/java-se-tips/java.awt/how-to-use-robot-class-in-java.html)

*   [http://download.java.net/jdk7/archive/b123/docs/api/java/awt/Robot.html](http://download.java.net/jdk7/archive/b123/docs/api/java/awt/Robot.html)

编写一个简单的 .bat 文件或 shell 脚本，调用您的 Java 程序并使用“<”和“>”重定向运算符是第三种选择。

这完全取决于你在寻找什么:)

# jquery - 我需要在 jQuery .load() 中使用选择器吗？

> ID：12376926
> 
> 赞同：0
> 
> 时间：2012-09-11T19:53:36.877
> 
> 标签：jquery

我有以下内容：

```
function callback_function(a,b,c) {
    var aa = a;
    var bb = b;
    $('#content').html("xxx");
}

$('#content').load(href, "", function (a, b, c) { callback_function(a, b, c) }); 
```

我想要做的是将值“xxx”放入`div#content`. 有人可以解释如何做到这一点吗？我认为它将与 callback_function 中的代码一起使用，但是如果可行，那么实际`.load()`也会将一些数据放入其中`#content`吗？

`.load()`如果我在`callback_function()`. 我希望这是有道理的。请注意，它还没有准备好生产。我意识到我需要重命名参数，进行错误检查等等。

请注意我想使用**.load**而不是 .ajax。因为我正在使用以下包装器。提前抱歉，这是很多代码：

```
$.fn.loadWithEffect = function()
{
    // Add effect layer
    this.addEffectLayer({
        message: $.fn.loadWithEffect.defaults.message
    });

    // Rewrite callback function
    var target = this;
    var callback = false;
    var args = $.makeArray(arguments);
    var index = args.length;
    if (args[2] && typeof args[2] == 'function')
    {
        callback = args[2];
        index = 2;
    }
    else if (args[1] && typeof args[1] == 'function')
    {
        callback = args[1];
        index = 1;
    }

    // Custom callback
    args[index] = function(responseText, textStatus, XMLHttpRequest)
    {
        // Get the effect layer
        var refElement = getNodeRefElement(this);
        var layer = $(refElement).next('.loading-mask');
        var span = layer.children('span');

        // If success
        if (textStatus == 'success' || textStatus == 'notmodified')
        {
            // Initial callback
            if (callback)
            {
                callback.apply(this, arguments);
            }

            // Remove effect layer
            layer.stop(true);
            span.stop(true);
            var currentMarginTop = parseInt(span.css('margin-top'));
            var marginTop = parseInt(span.css('margin-top', '').css('margin-top'));
            span.css({'marginTop':currentMarginTop+'px'}).animate({'opacity':0, 'marginTop':(marginTop-40)+'px'}, {
                'complete': function()
                {
                    layer.fadeAndRemove();
                }
            });
        }
        else
        {
            span.addClass('error').html($.fn.loadWithEffect.defaults.errorMessage+'<br><a href="#">'+$.fn.loadWithEffect.defaults.retry+'</a> / <a href="#">'+$.fn.loadWithEffect.defaults.cancel+'</a>');
            span.children('a:first').click(function(event)
            {
                event.preventDefault();

                // Relaunch request
                $.fn.load.apply(target, args);

                // Reset
                span.removeClass('error').html($.fn.loadWithEffect.defaults.message).css('margin-left', '');
            });
            span.children('a:last').click(function(event)
            {
                event.preventDefault();

                // Remove effect layer
                layer.stop(true);
                span.stop(true);
                var currentMarginTop = parseInt(span.css('margin-top'));
                var marginTop = parseInt(span.css('margin-top', '').css('margin-top'));
                span.css({'marginTop':currentMarginTop+'px'}).animate({'opacity':0, 'marginTop':(marginTop-40)+'px'}, {
                    'complete': function()
                    {
                        layer.fadeAndRemove();
                    }
                });
            });

            // Centering
            span.css('margin-left', -Math.round(span.outerWidth()/2));
        }
    };

    // Redirect to jQuery load
    $.fn.load.apply(target, args);

    return this;
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T20:00:18.240

只需更改您的代码，这样您就不会进行两次选择：

```
function callback_function(a,b,c) {
    var aa = a;
    var bb = b;
    $(this).html("xxx"); //<-- key!
}

$('#content').load(href, callback_function); 
```

或使用`.ajax`代替`.load`：

```
function callback_function(a,b,c) {
    var aa = a;
    var bb = b;
    $("#content").html("xxx"); 
}
$.ajax({
   url : href,
   success: callback_function
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T19:57:10.330

而不是`load()`使用`ajax()`：

```
$.ajax({
   url : href,
   success:function(data){
      callback_function(a, b, c) });
    }
}) 
```

# plone - 在 Plone 实例中规范化文件的标题不会更新视图

> ID：12376927
> 
> 赞同：0
> 
> 时间：2012-09-11T19:53:44.910
> 
> 标签：plone, catalog

我们已经通过 FTP 将大量文件上传到我们正在部署的 Plone 内部网。此步骤不设置文件的标题；所以搜索一个名为：“invoice_policy.odt”的文件，它不会出现在“invoice policy”（两个词）的搜索中；因为 id 的索引是字段索引。

此外，默认的 plone 词典不会用下划线分割单词，因此将标题设置为 id 也无济于事。

因此，为了提高我们的搜索召回率，我们编写了一个非常简单的规范化脚本（取自多个来源，包括 StackOverflow 中的一些答案）：[https ://gist.github.com/3701401](https://gist.github.com/3701401)

但是，在将其应用于近 8000 个文件后，我发现标题已更改，但文件仍出现在导航中，ID 为“invoice_policy.odt”；我必须编辑该文件，然后将其保存，以便它在导航中显示其标题。

我已经上传了三张图片到 flickr 来展示这个过程：

*   [图 1](http://twitpic.com/atlinh)。其文件夹中的（最后一个）文件。
*   [图 2](http://twitpic.com/atlj88)。当我单击文件时，您可能会看到它有一个标题（使用我们的脚本标准化）
*   [图 3](http://twitpic.com/atljlu)。我只是单击标题，然后单击保存并返回到其包含的文件夹。现在它已正确显示。

我是否需要在我的脚本中执行（或撤消）某些操作才能使其正常工作。此外，尽管我（我认为我）将每个重命名都包含在其自己的事务中，但我在 ZMI 的“撤消”选项卡中看不到任何事务。我想这是因为它与真正的请求无关，是这样吗？我可以修复它吗？

最好的祝福，

曼努埃尔。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T20:49:12.760

您需要重新索引项目，或者在脚本中一个一个地重新索引，或者在最后批量重新索引。[http://collective-docs.readthedocs.org/en/latest/searching_and_indexing/indexing.html](http://collective-docs.readthedocs.org/en/latest/searching_and_indexing/indexing.html)可能会有所帮助。

# node.js - Express/Socket.io：每个请求一个套接字的正确方式

> ID：12376928
> 
> 赞同：2
> 
> 时间：2012-09-11T19:53:46.080
> 
> 标签：node.js, express, socket.io

我正在尝试使用 Express、Socket.io 和 ntwitter 模块构建一个简单的 Node 应用程序，因此您只需搜索一个术语（即下面的 req.params.searchTerm），ntwitter 将搜索它并通过套接字输出流.io。

但是，我遇到了错误，打开了多个窗口，或者关闭了一个窗口，然后立即打开了一个窗口。有时搜索词没有更新，有时实际上会抛出某种 socket.io 错误。有人可以澄清这样做的正确方法或阐明我的错误吗？提前致谢。代码如下。

```
var server = http.createServer(app);

var io = require('socket.io').listen(server);

server.listen(app.get('port'), function(){
  console.log("Express server listening on port " + app.get('port'));
});

app.get('/:stream', function(req, res) {
 res.render('stream', { title: 'Search Twitter | ' + req.params.searchTerm });
    io.sockets.on('connection', function(socket) {

    var publishFlag = true;
    setInterval(function() {
        publishFlag = true;
    }, 1000);

    twit.stream('statuses/filter', { track: [req.params.searchTerm] },
        function(stream) {
            stream.on('data', function(tweet) {
                if(publishFlag) {
                    socket.emit('tweet', tweet);
                    publishFlag = false;
                }
            });
        }
    );
  });
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T20:55:37.983

它认为这在某种程度上是您想要做的：

服务器端 ：

```
var server = http.createServer(app);

var io = require('socket.io').listen(server);

server.listen(app.get('port'), function(){
  console.log("Express server listening on port " + app.get('port'));
});

app.get('/:stream', function(req, res) {
 res.render('stream', { title: 'Search Twitter | ' + req.params.searchTerm });
});

io.sockets.on('connection', function(socket) {

    socket.on('stream', function(searchTerm){

        twit.stream('statuses/filter', { track: [searchTerm] },
            function(stream) {
                stream.on('data', function(tweet) {
                    socket.emit('tweet', tweet);
                });
            }
        );
    };
}); 
```

客户端（/：流）

```
var socket = io.connect('http://localhost');
socket.on('tweet', addTweetOnPage);
socket.emit('stream', searchTerm); 
```

# jquery - 如何检测 Gmail 界面中的滚动事件？

> ID：12376938
> 
> 赞同：0
> 
> 时间：2012-09-11T19:54:57.050
> 
> 标签：jquery, events, scroll, gmail

我试图了解如何在 Gmail 中检测滚动（他们使用 iframe 来包含主要内容/界面，然后使用 JS 创建滚动条）。

我正在使用jQuery，但我无法弄清楚如何做到这一点......

### 更新

如果有人关心，我找到了需要将滚动事件附加到的元素：

`$canvas_frame.contents().find(".ar4 .Tm.aeJ")`

`$canvas_frame`的`iframe`id在哪里`#canvas_frame`，这是 Gmail 特有的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T20:03:13.297

**同源策略**可防止您看到与主机页面不是从同一域提供的 iframe 中发生的事情。

# java - 是否可以将 replaceAll() 与通配符一起使用

> ID：12376939
> 
> 赞同：4
> 
> 时间：2012-09-11T19:54:59.037
> 
> 标签：java, html, string

早上好。我意识到有很多关于替换的问题，`replaceAll()`但我没有看到这个。

我想做的是解析一个字符串（其中包含有效的html到一个点），然后在我看到`<p>`字符串中的第二个实例之后，我想删除以 & 开头并以 ; 结尾的所有内容 直到我看到下一个`</p>`

为了做第二部分，我希望使用类似的东西`s.replaceAll("&*;","")`

这不起作用，但希望它能让我明白我正在寻找替换任何以 & 开头并以 ; 结尾的东西。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-11T20:13:08.873

您可能应该将解析留给 DOM 解析器（[请参阅此问题](https://stackoverflow.com/questions/2129375/html-xml-parser-for-java)）。我几乎可以保证您必须这样做才能在`<p>`标签中查找文本。

对于替换逻辑，`String.replaceAll`使用正则表达式，可以做你想要的匹配。

您想要的正则表达式中的“通配符”就是`.*`表达式。使用您的示例：

```
String ampStr = "This &escape;String";
String removed = ampStr.replaceAll("&.*;", "");
System.out.println(removed); 
```

这输出`This String`. 这是因为`.`代表任何字符，`*`意思是“这个字符 0 次或多次”。所以`.*`基本上意味着“任意数量的字符”。但是，喂它：

```
"This &escape;String &anotherescape;Extended" 
```

可能不会做你想做的事，它会输出`This Extended`. 要解决此问题，您需要准确指定要查找的内容而不是`.`字符。这是使用 完成的`[^;]`，这意味着“任何*不是*分号的字符：

```
String removed = ampStr.replaceAll("&[^;]*;", ""); 
```

这对于不匹配的字符串具有性能优势`&.*?;`，因此我强烈建议使用此版本，尤其是因为并非所有 HTML 文件都包含`&abc;`令牌，因此该`&.*?;`版本可能会出现巨大的性能瓶颈。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T20:03:28.510

你想要的表达式是：

```
s.replaceAll("&.*?;",""); 
```

但是你真的想以这种方式解析 HTML 吗？使用 XML 解析器可能会更好。

# python - zlib 不以标准 zip 格式压缩

> ID：12376947
> 
> 赞同：1
> 
> 时间：2012-09-11T19:55:22.007
> 
> 标签：python, compression, zlib

我正在使用 python zlib，我正在执行以下操作：

1.  压缩内存中的大字符串 ( `zlib.compress`)
2.  上传到 S3
3.  `zlib.decompress`从 S3 ( )下载并读取数据并将其解压缩为字符串

一切正常，但是当我直接从 S3 下载文件并尝试使用标准 zip 程序打开它们时，出现错误。我注意到文件的开头不是PK，而是：

```
xµ}ko$7’םחע¯¸?ְ)$“שo³¶w¯1k{` 
```

我很灵活，不介意从 zlib 切换到另一个包，但它必须是 pythonic（与 Heroku 兼容）

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-11T19:57:56.133

[`zlib`](http://docs.python.org/library/zlib.html)压缩文件；它不会创建 ZIP 存档。为此，请参阅[`zipfile`](http://docs.python.org/library/zipfile.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T20:13:59.020

如果这是关于压缩字符串，那么`zlib`就是要走的路。zip 文件用于存储文件，甚至是包含文件的整个目录树。它保存文件元数据。它可以（以某种方式）用于，但不适合仅存储字符串。

如果您的应用程序只是存储和检索压缩字符串，那么“直接从 S3 下载文件并尝试使用标准 zip 程序打开它们”是没有意义的。你为什么要这样做？

编辑：

S3 通常用于存储文件，而不是字符串。你说你想存储字符串。您确定 S3 是适合您的服务吗？你看过 SimpleDB 吗？

考虑您想坚持使用 S3 并想上传压缩字符串。您的 S3 客户端库很可能希望接收到要读取的类似文件的对象。为了有效地解决这个问题，请将压缩字符串存储在 Python`StringIO`对象中（在内存文件中），并将此内存文件提供给 S3 客户端库，以便将其上传到 S3。

对于下载做同样的事情。使用 Python。也用于调试目的。尝试将字符串强制放入 zipfile 是没有意义的。与使用纯 zlibbed 字符串相比，开销会更多（由于文件元数据）。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-12T03:57:58.353

仅出于调试目的而编写 zip 文件（这对于您的应用程序来说是完全错误的格式）的替代方法是拥有一个可以解压缩 zlib 流的实用程序，这对于您的应用程序来说是完全正确的格式。该实用程序[`pigz`](http://zlib.net/pigz/)带有`-z`选项。

# c# - 在 LINQ to XML 中选择后代的问题

> ID：12376948
> 
> 赞同：1
> 
> 时间：2012-09-11T19:55:24.583
> 
> 标签：c#, xml, linq

这让我有点发疯。我正在从数据库列中提取一个 XML 字符串，并使用 XDocument.Parse 成功创建了一个 XDocument。我之前使用 linq to xml 来查询 xml 树，但出于某种原因，我所做的一切都是返回 null。它与命名空间有关吗？

这是我的 XDocument 对象的文本可视化器示例：

```
// removed XML for privacy reasons 
```

我正在尝试的查询示例：

```
 XElement algorithmId = (from algoId in reportLogXml.Descendants(ALGORITHM_ID)
                            select algoId).FirstOrDefault(); 
```

我为字符串值使用了一个常量，并且我已经四次检查拼写是否匹配，并尝试了几个不同的元素，这些元素在文档中很明显，但它们都返回 null。我在这里做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T20:03:30.423

是的，它可能与命名空间有关，但`<AlgorithmId>`元素也没有后代。

您可以像这样修复 ns 问题：

```
//untested
XNameSpace ns0 = "http://schemas.datacontract.org/2004/07/Adapters.Adapter";
var ns1 = reportLogXml.Root.GetDefaultNamespace();    

// check: ns0 and ns1 should be equal here

... in reportLogXml.Descendants(ns1 + ALGORITHM_ID) 
```

请注意，这是一个特殊的`+`运算符，请严格遵循格式。

# java - 线程对象运行方法

> ID：12376952
> 
> 赞同：0
> 
> 时间：2012-09-11T19:55:30.333
> 
> 标签：java, multithreading

我需要编写一个使用多个线程的程序。创建线程对象后，我需要使用 run() 方法。这个run方法好像是内置的。但是，我需要编写它，并且每次调用它时都需要它运行一个循环。谁能帮我理解如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T19:58:57.623

`Thread`您可以通过传递接口的匿名实现来创建新实例`Runnable`，然后使用该`start()`方法启动线程执行。见下文：

```
Thread t = new Thread(new Runnable() {
  public void run() {
    while (!stopped) {
      // do something interesting here
    }
  }
});
t.start(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T22:18:20.517

`run()`方法内置在`Thread`类中是绝对正常的。此类旨在为应用程序中将代表执行线程的任何类提供基本基础结构。将`Thread`其视为“世界上的任何线程”。现在在您的应用程序中使用它的正确方法是提供您自己的*继承* `Thread`类。这是使用`extends`关键字或使用匿名类完成的，就像在 Dan 的回答中一样。假设您已经扩展了`Thread`类并调用了您的类`TaskToRunInParallel`。

文档说这个`Thread`类是特殊的——如果你继承它（就像我们刚刚做的那样）并将一些代码放在`run()`你自己的类的方法中（`TaskToRunInParallel`在我们的例子中），这个代码将与应用程序的其余部分并行执行。您需要做的就是调用`start()`类的对象`TaskToRunInParallel`。

这就是该`run()`方法是内置的原因：它为您提供了一个原型方法，可以在您自己的类中覆盖。这样，任何与`Thread`对象一起工作的代码都将能够与您的`TaskToRunInParallel`对象或任何其他继承自`Thread`. 真的：保证它们都将`run()`继承自方法，`Thread`并且该段代码调用它是安全的。但是，此调用的结果总是不同的：每个继承自的类都可能以自己的方式`Thread`覆盖。`run()`这称为*多态性*，与继承一起是面向对象编程的基石之一。

`run()`当您考虑覆盖类的方法时，令人惊讶的是涉及到多少概念`Thread`。祝你好运。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T19:58:18.200

看着：

计数信号量 [http://tutorials.jenkov.com/java-concurrency/semaphores.html#counting](http://tutorials.jenkov.com/java-concurrency/semaphores.html#counting)

# objective-c - 在 UIPinchGestureRecognizer 上调用一次操作

> ID：12376957
> 
> 赞同：1
> 
> 时间：2012-09-11T19:55:34.887
> 
> 标签：objective-c, ios, ipad

是否可以只触发一次 UIPinchGestureRecognizer 动作？

我想让我的用户能够捏（实际上是传播）以触发一个动作，但是该方法会不断被调用，我理解这是 UIPinchGestureRecognizer 的功能。

使用以下答案更新代码（仅检测缩放）：

```
-(void) handlePinchGesture: (UIPinchGestureRecognizer *) sender {
    if (sender.state == UIGestureRecognizerStateBegan) {
        self.startingScale = sender.scale;
    }
    if (sender.state == UIGestureRecognizerStateEnded) {
        if (sender.scale > self.startingScale) {
            [self zoomIn];
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-11T20:05:57.770

手势识别器是状态机，如果您没有指定要收听的状态，只需从手势中调用选择器即可触发所有/每个状态。

要将检测限制在手势开始时，您可以使用：

```
- (void)myGestureRecognized:(UIGestureRecognizer*)sender
{
    if (sender.state == UIGestureRecognizerStateBegan) {
        //do something
    }
} 
```

其他识别状态包括：

```
typedef enum {
   UIGestureRecognizerStatePossible,

   UIGestureRecognizerStateBegan,
   UIGestureRecognizerStateChanged,
   UIGestureRecognizerStateEnded,
   UIGestureRecognizerStateCancelled,

   UIGestureRecognizerStateFailed,

   UIGestureRecognizerStateRecognized = UIGestureRecognizerStateEnded
} UIGestureRecognizerState; 
```

# javascript - 调用私有作用域

> ID：12376958
> 
> 赞同：1
> 
> 时间：2012-09-11T19:55:43.507
> 
> 标签：javascript

我正在读一本略高于我水平的书。这本书的作者正在展示如何使用匿名函数创建私有作用域。我理解私有范围的概念，但是，我不明白它是如何实现的。我确实知道这些局部变量只能在当前范围内访问（这是作者的话），但我不确定如何调用/实现它。你能给我一个例子，说明如何使用`var Tim = new Person();`下面的代码在实际代码中使用它

使用匿名函数创建私有范围：

```
var Person = function(){};

(function(){
  var findById = function(){ /* ... */ };
  Person.find = function(id){
    if (typeof id == "integer")
      return findById(id);
   };
})(); 
```

我的理解

```
var Tim = new Person(); 
```

我会怎么称呼？我会尝试找到蒂姆的身份吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T20:27:44.093

首先：您提供的代码段不会返回 id，但会在传递 id 时返回一些东西。我必须承认，当涉及到私有作用域时，这个例子并不是最好的例子。我会给你一个更详细的，但我希望更清楚的例子：

```
(function ()
{
    var personObjects = [];
    var findById = function(id)
    {
        return personObjects[id];
    }
    var Person = function (name)
    {
        this.id = personObjects.length;//first available index ~= auto increment
        this.name = name;
        personObjects.push(this);
    };
    Person.find = function(id)
    {
        //I woudl do: id = +id;, but sticking to your example
        if (typeof id === 'number')
        {
            return findById(id);
        }
        return undefined;
    }
    window.Person = Person;//expose to global object
})(); 
```

那么，我们这里有什么。您说您了解范围，所以我假设您知道此处声明的所有变量在包装函数返回后都将继续*存在*，但它们仅对在同一范围中声明的函数可见。如果不是：`personObjects`数组和`findById`函数对象仍然存在，但只能由`Person`构造函数访问，构造函数暴露（因为也分配了）全局对象。

每当实例化一个人对象时，我都会使用数组的长度来确定下一个可用的 ID，从而为每个对象创建一个唯一的 ID。当您将有效的 id（数组键）传递给它时，函数 findById 只会返回对其中一个对象的引用。该`Person.find`方法调用这个封闭的函数，但在这样做之前会对参数进行一些检查。在某些非常特殊的情况下，这对于调试或在长原型链中使用通用 setter 和 getter 可能很有用。这就是为什么，至少对我来说，这个例子作为一个起点有点牵强。

无论如何，您可以`findById`像这样调用这个私有方法 ( )：

```
var tim = new Person('tim');
Person.find(0);// returns a reference to tim
//or even
var tom = new Person('Tom');
tim.find(1);//returns tom
tom.find(0);//returns tim
tim.find(tom.id);//... 
```

同样，这种方法在 AFAIK 中不太常见，要练习/习惯范围和闭包，我建议使用一些魔术和事件委托（例如：尝试为移动设备上`setInterval`的事件创建自己的委托者）。`tab`只需谷歌它们，您很快就会明白为什么这是一个很好的练习，但一开始有点令人生畏。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T20:11:58.950

您`findById`只能通过调用间接调用`Person.find`：

```
// Assuming code similar to your code above
// Assume that Tim.id === 1
var someone = Person.find(1); // Call findById to get a reference to Tim
console.log(someone.name); // Tim
findById(1) // Error, findById is not available in the global scope 
```

# image - 从资产参考复制图像/视频。应用程序文件夹的 URL

> ID：12376965
> 
> 赞同：1
> 
> 时间：2012-09-11T19:56:03.033
> 
> 标签：image, video, copy, uiimagepickercontroller, assets

我正在使用 UIimagePicker 允许用户将图像和视频导入应用程序。我正在将整个图像/视频加载到内存中，以便能够将它们写入应用程序文件夹。有没有办法将图像/视频从“UIImagePickerControllerReferenceURL”提供的资产url直接复制到应用程序文件夹而不将文件加载到内存中？

我正在使用的 uiimagepicker 的代表是：

```
-(void)imagePickerController:(UIImagePickerController *)picker didFinishPickingImage:       (UIImage *)image editingInfo:(NSDictionary *)editingInfo 
```

我是iOS新手，如果我错过了一些琐碎的方法，请原谅。谢谢，

# mysql - 编写此 MySQL 查询 (JOIN) 的更好方法

> ID：12376967
> 
> 赞同：1
> 
> 时间：2012-09-11T19:56:08.337
> 
> 标签：mysql

```
DELETE FROM table1
WHERE field1=(SELECT id FROM table2 WHERE type=1) 
OR field2=(SELECT id FROM table2 WHERE type=1) 
```

编写此查询的正确方法是什么？它目前不起作用，因为子查询返回不止一行。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-11T19:57:53.300

使用`IN`：

```
DELETE FROM table1
WHERE field1 IN (SELECT id FROM table2 WHERE type=1) 
OR field2 IN(SELECT id FROM table2 WHERE type=1) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-11T19:57:41.813

你可以这样做`IN`：

```
delete
from table1
where field1 in (
        select id
        from table2
        where type = 1
        )
    or field2 in (
        select id
        from table2
        where type = 1
        ) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-11T20:08:07.850

根据您的桌子的大小，您可能能够摆脱 IN 方法。如果它们在较大的一侧，您可以使用 DELETE...USING 语法。

```
DELETE FROM foo USING foo, bar WHERE foo.field1=bar.id OR foo.field2=bar.id 
```

# android - 是否可以在 Android 中使用 Google Web Toolkit 功能？

> ID：12376969
> 
> 赞同：0
> 
> 时间：2012-09-11T19:56:16.450
> 
> 标签：android, gwt

具体情况：我想要一个为 Android 提供 JSON Parser 的包（不是自己编写的，我想确保它由某人维护和支持）。谷歌有一个在[`com.google.gwt.json.client.JSONParser`](http://google-web-toolkit.googlecode.com/svn/javadoc/1.5/com/google/gwt/json/client/package-summary.html).

是否可以在 Android 中使用这个（和其他 GWT 功能）？

（我知道 org.json 包含在 Android 中，但它没有解析功能。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T20:01:06.560

Android SDK 包括[org.json](http://developer.android.com/reference/org/json/package-summary.html)库。你可以使用它们。

```
String json = "{ a: 1 }";
JSONObject jo = new JSONObject(json);
int a = jo.getInt("a"); 
```

如果你想要更高级的东西，你可以包含[GSON](http://code.google.com/p/google-gson/)库。它们在 Android 下运行良好。

要回答您的问题，`com.google.gwt.json.client.JSONParser`在 Android 下不可用。在 Android 中，您不会在 com.google.gwt 下找到任何内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T20:03:40.147

只要它是纯 java 并且不使用 android 中缺少的一些奇异的核心 java 类，它很可能是可能的。并且以防 android 提供 JSON 解析器（在 DOM 模式中）Google GSON 也是不错的轻量级选择，并利用拉模型。您可以考虑在其之上添加一些数据绑定：

[https://github.com/ko5tik/jsonserializer](https://github.com/ko5tik/jsonserializer)

# javascript - Javascript高度问题

> ID：12376971
> 
> 赞同：0
> 
> 时间：2012-09-11T19:56:20.473
> 
> 标签：javascript, jquery

我正在使用 javascript 向页面上的所有图像文章添加垂直或水平类。我遇到了代码正常工作的问题，但它总是将 .horizo​​ntal 添加到文章类，即使是应该具有 .vertical 的照片（包含大于 450px 高的图像的帖子）。任何帮助，将不胜感激。

```
$('img.photo').each(function(){
            if($(this).height() > 450) { 
                $(this).closest('article').addClass('vertical'); 
            } else {
                $(this).closest('article').addClass('horizontal'); 
            }
        }); 
```

示例：[http](http://blog.jamescharless.com/) ://blog.jamescharless.com/ 男孩的第一张照片高度超过 450 像素，但它没有垂直类别，而是水平类别。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T20:07:37.413

高度不符合预期的两个可能原因

1.  图像尚未加载，并且在 CSS 中没有定义的高度
2.  图片尚未公开（`display: none`）

您的代码可以使用[`load`](http://api.jquery.com/load-event/)回调，并且还应该检查图像是否不是[`:hidden`](http://api.jquery.com/hidden-selector/).

```
$(function(){
    $('img:not(:hidden)').load(function(){
        // logic
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T20:07:21.827

尝试更改`.each`为[`.load`](http://api.jquery.com/load-event/)，以便在加载每个图像后调用该函数：

```
$('img.photo').load(function(){
            if($(this).height() > 450) { 
                $(this).closest('article').addClass('vertical'); 
            } else {
                $(this).closest('article').addClass('horizontal'); 
            }
        }); 
```

# c# - WebClient restful 删除

> ID：12376974
> 
> 赞同：33
> 
> 时间：2012-09-11T19:56:23.593
> 
> 标签：c#, httpwebrequest, webclient

我有一个从控制台应用程序调用的简单 Restful 服务，所以我正在使用`WebClient`. 我想知道这个删除的调用是否正确。

网址看起来像`localhost/RestService1/Person/1`

```
using (var client = new WebClient()) 
{
    client.UploadString(url, "DELETE", "");
} 
```

我不喜欢`UploadString`没有`data`参数就没有重载。传递一个空参数并不适合我。有没有更好的方法用于 a `DELETE`？

我可以使用`WebRequest`，但我只想使用`WebClient`以保持一致。

这是`WebRequest`块

```
var request = WebRequest.Create(url);
request.Method = "DELETE";
var response = (HttpWebResponse)request.GetResponse(); 
```

两个块都工作正常，但什么是最好的？或者，还有更好的方法？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2016-07-22T13:34:30.457

以下对我有用：

```
client.UploadValues(url, "DELETE", new NameValueCollection()); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-11T21:13:17.970

[WebClient 类并不能很好地用于restful api 消费，我过去使用过像RestSharp](http://restsharp.org/)这样的第三方库，它们更适合这种类型的web 请求。我很确定 RestSharp 只是在幕后使用了 HttpWebRequest，但它提供了许多语义，使得使用和重用剩余资源更容易。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-11T21:22:14.477

去获取 Microsoft.Net.Http 客户端库[http://nuget.org/packages/Microsoft.Net.Http](http://nuget.org/packages/Microsoft.Net.Http)

HttpClient 是用于处理 API 的更好的客户端。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-07-22T04:30:00.943

抱歉，这是我在 vb.net 中的解决方案，我确信任何人都可以翻译成 c#

删除标题非常重要，我必须评论有关 Accept 和 Content-Type 的标题并且工作正常.....当然我确实发送了令牌

```
Dim rest As WebClient = New WebClient()
rest.Headers.Add(HttpRequestHeader.Authorization, "Bearer " & Token)
'rest.Headers.Add(HttpRequestHeader.Accept, "application/json")
'rest.Headers.Add(HttpRequestHeader.ContentType, "application/json")

result = System.Text.Encoding.UTF8.GetString(rest.UploadValues(host_api & uri, "DELETE", New NameValueCollection())) 
```

# ruby-on-rails - Delayed_Job，如何为 user_mailer.rb 方法设置优先级

> ID：12376980
> 
> 赞同：6
> 
> 时间：2012-09-11T19:57:03.193
> 
> 标签：ruby-on-rails, ruby-on-rails-3, delayed-job

我使用delayed_job w rails 3 来延迟user_mailers，例如：

```
 UserMailer.delay.email_digest(from,email,subject,html,text) 
```

如何添加优先级？默认情况下，所有延迟的作业都设置为优先级 0，对于这个邮件程序，我想用 1 的优先级来降低它的重要性。

可能的？谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-11T20:19:41.053

诸如优先级或使用哪个队列等选项是延迟方法的选项，例如

```
UserMailer.delay(:priority => 2).email_digest(...) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-25T11:50:17.687

您甚至可以设置队列名称，以便您可以根据使用的任务对其进行分组，

```
UserMailer.delay(:queue=> "Mailers",:priority=>  1).email_digest(from,email,subject,html,text) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-07-28T16:54:47.910

**Rails 5** 应用程序/mailers/user_mailer.rb

```
class UserMailer < ApplicationMailer

  def email_digest(email)
    @email = email
    mail(to: @email, subject: 'Hello...')
  end

end 
```

`UserMailer.email_digest("email@domain.com").deliver_later(:priority => 75)`

这对我有用

# java - 检查字符串是否是语法上有效的句子？

> ID：12376982
> 
> 赞同：5
> 
> 时间：2012-09-11T19:57:18.757
> 
> 标签：java, nlp

有没有办法检查一个字符串是否代表一个英文句子？我目前正在查看 java 包，但我找不到任何可以做到的东西。

IE

```
the weather is good (valid)
the good is weather (invalid) 
```

有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T20:08:45.483

你真正需要的是 NLP 解析器（语法分析）。

[这](http://nlp.stanford.edu/software/lex-parser.shtml)是用 Java 编写的，非常棒。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T20:21:36.077

虽然我意识到 OP 引用了 Java，但我将提供 MS Office 套件有一个有限的语法检查引擎，旨在执行非常顶级的更正/建议，我认为这是它识别的一组相当简化的句型，例如，在典型的办公室信件中发现的那些。我不认为它假装是详尽无遗的或类似完整的英语分析工具，但它可能以有限的形式服务于基本目的。

检查通过 COM 通过 CheckGrammar 方法公开，该方法从主机 Office 应用程序的 Application 对象调用。您提供要检查的文本。除了片段之外，它还可以识别几个问题，例如时态和数字不一致，因此您可能需要改进它提供的结果。它远非完美，但确实给了它旧学院的尝试:)

# c# - RhinoMocks 测试服务

> ID：12376983
> 
> 赞同：1
> 
> 时间：2012-09-11T19:57:32.470
> 
> 标签：c#, asp.net-mvc-3, rhino-mocks, nunit-2.5.9

我正在使用带有 NUnit 的 Sharp Architechture 和 Rhino Mocks。

我有一个看起来像这样的测试服务

```
public class TestService : ITestService {
    public TestService(ITestQueries testQueries, IRepository<Test> testRepository,
                       IApplicationCachedListService applicationCachedListService) {
        Check.Require(testQueries != null, "testQueries may not be null");
        Check.Require(applicationCachedListService != null, "applicationCachedListService may not be null");
        _testQueries = testQueries;
        _testRepository = testRepository;
        _applicationCachedListService = applicationCachedListService;
    } 
```

然后我在我的服务中有这个方法

```
public string Create(TestFormViewModel viewModel, ViewDataDictionary viewData, TempDataDictionary tempData) {
        if (!viewData.ModelState.IsValid) {
            tempData.SafeAdd(viewModel);
            return "Create";
        }

        try {
            var test = new Test();
            UpdateFromViewModel(test, viewModel);
            _testRepository.SaveOrUpdate(test);
            tempData[ControllerEnums.GlobalViewDataProperty.PageMessage.ToString()]
                = string.Format("Successfully created product '{0}'", test.TestName);
        }
        catch (Exception ex) {
            _testRepository.DbContext.RollbackTransaction();
            tempData[ControllerEnums.GlobalViewDataProperty.PageMessage.ToString()]
                = string.Format("An error occurred creating the product: {0}", ex.Message);
            return "Create";
        }

        return "Index";

    } 
```

}

然后我有一个看起来像这样的控制器：

```
[ValidateAntiForgeryToken]
    [Transaction]
    [AcceptVerbs(HttpVerbs.Post)]
    [ModelStateToTempData]
    public ActionResult Create(TestFormViewModel viewModel) {
        return RedirectToAction(_testService.Create(viewModel, ViewData, TempData));
    } 
```

我想编写一个简单的测试，看看何时 !viewData.ModelState.IsValid 我返回“创建”。

到目前为止我有这个但很困惑，因为它真的没有测试控制器它只是在做我告诉它在返回时做的事情。

```
[Test]
    public void CreateResult_RedirectsToActionCreate_WhenModelStateIsInvalid(){
        // Arrange
        var viewModel = new TestFormViewModel();
        _controller.ViewData.ModelState.Clear();
        _controller.ModelState.AddModelError("Name", "Please enter a name");

        _testService.Stub(a => a.Create(viewModel, new ViewDataDictionary(), new TempDataDictionary())).IgnoreArguments().Return("Create");

        // Act
        var result = _controller.Create(viewModel);

        // Assert            
        result.AssertActionRedirect().ToAction("Create"); //this is really not testing the controller??.

    } 
```

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T20:26:14.883

看起来您尝试不编写单元测试。它更像是集成测试。遵循单元测试思想，您有两个单元：`Service`和`Controller`. 这个想法是您应该分别测试每个单元并保持测试简单。根据这个首先你应该为`TestService`. 之后，当你覆盖它时，为你`Controller`使用 Stubs/Mocks编写测试`TestService`。所以你的测试`Controller`看起来是对的，它测试重定向是根据`Service.Create`方法的结果发生的。您应该为您的`TestService`没有控制器上下文，它有一个很好的覆盖范围。如果你想一起测试这些单元，那么你不能使用模拟，它更像是集成测试。此外，为了涵盖模块之间的集成，您可以使用 WatiN 或 Selenium 等工具编写基于 Web 的测试来测试整个应用程序。但无论如何，为单独的部分编写单元测试是一个好习惯。

# visual-c++ - 将 Visual C++ 上的项目通用转换为 Borland C++ Builder 的应用程序

> ID：12376984
> 
> 赞同：2
> 
> 时间：2012-09-11T19:57:34.233
> 
> 标签：visual-c++, c++builder, project-conversion

很多人会说“为什么不使用 Visual Studio”，但我想将我的一些 Visual C++ 项目转换为 Borland C++ Builder 项目，因为我更熟悉 BCB...

有人知道 Borland C++ Builder 或 Visual Studio 上的工具，或第三方软件或插件吗？

我有一些关于 VS2008、VS2010 和 VS6 的项目。

我有一些带有 BCB6 和 Borland Developer Studio 2006 的机器......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-13T10:23:24.377

这个工具根本不存在。C++ Builder 基于 RTL 和 VCL 库，另一方面，Visual C++ 使用 MFC 和其他库。架构完全不同，它们不兼容，您无法迁移代码。您需要从零开始重新编写大部分代码，特别是专注于用户界面的代码。

对于非可视代码，我在 VC 和 C++ Builder 这两个平台上进行开发。当我需要共享源代码时，我使用在[C++ 标准库](http://en.wikipedia.org/wiki/C++_Standard_Library)和[Boost](http://www.boost.org/)中找到的最小公分母。在这种情况下，不需要转换工具，因为源在两个平台之间完全兼容。

# wpf - 扩展的 WPF 工具包：在 PropertyGrid 中显示项目

> ID：12376991
> 
> 赞同：3
> 
> 时间：2012-09-11T19:58:06.883
> 
> 标签：wpf, data-binding, mvvm

当我在互联网上搜索时，我想在 Visual Studio 中的属性控件等控件中显示一些项目，我发现最强大的工具是：[PropertyGrid](http://wpftoolkit.codeplex.com/wikipage?title=PropertyGrid&referringTitle=Home) ，但是当我尝试按照说明操作时，控件无法在我身边显示值。让我展示一段代码：

```
<xctk:PropertyGrid 
    SelectedObject="{Binding Markets}"  AutoGenerateProperties="False" HorizontalAlignment="Left" Margin="155,10,0,0" VerticalAlignment="Top" Height="242" Width="319">
    <xctk:PropertyGrid.PropertyDefinitions>
            <xctk:PropertyDefinition Name="Name" />

            </xctk:PropertyGrid.PropertyDefinitions>
</xctk:PropertyGrid> 
```

市场是市场列表，市场类包含名为名称的属性

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-17T00:08:42.550

正如在别处提到的（[使用 Xceed PropertyGrid](https://stackoverflow.com/questions/10251890/using-xceed-propertygrid/10270756#10270756)），诀窍是设置 SelectedObject。一开始我也很困惑，因为许多示例不包括该属性，并且搜索没有像上面链接的那样找到解决方案。

# php - 按值搜索关联数组

> ID：12376992
> 
> 赞同：31
> 
> 时间：2012-09-11T19:58:16.370
> 
> 标签：php

我正在从 flickrs API 获取一些 JSON。我的问题是 exif 数据的顺序因相机而异。所以我不能硬编码一个数组编号来获取例如下面的相机型号。PHP 是否有任何内置方法来搜索关联数组值并返回匹配的数组？在下面的示例中，我想搜索`[label] => Model`and get `[_content] => NIKON D5100`。

如果您想让我详细说明，请告诉我。

```
print_r($exif['photo']['exif']); 
```

结果：

```
Array
(
    [0] => Array
        (
            [tagspace] => IFD0
            [tagspaceid] => 0
            [tag] => Make
            [label] => Make
            [raw] => Array
                (
                    [_content] => NIKON CORPORATION
                )

        )

    [1] => Array
        (
            [tagspace] => IFD0
            [tagspaceid] => 0
            [tag] => Model
            [label] => Model
            [raw] => Array
                (
                    [_content] => NIKON D5100
                )

        )

    [2] => Array
        (
            [tagspace] => IFD0
            [tagspaceid] => 0
            [tag] => XResolution
            [label] => X-Resolution
            [raw] => Array
                (
                    [_content] => 240
                )

            [clean] => Array
                (
                    [_content] => 240 dpi
                )

        ) 
```

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2015-07-22T04:31:18.920

```
$key = array_search('model', array_column($data, 'label')); 
```

在较新的 PHP 版本中，特别是 PHP 5 >= 5.5.0，上述函数将起作用。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-09-11T20:02:02.503

据我所知，没有这样的功能。有[array_search](http://php.net/manual/en/function.array-search.php)，但它并不完全符合您的要求。

我认为最简单的方法是自己编写一个循环。

```
function search_exif($exif, $field)
{
    foreach ($exif as $data)
    {
        if ($data['label'] == $field)
            return $data['raw']['_content'];
    }
}

$camera = search_exif($exif['photo']['exif'], 'model'); 
```

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2014-12-09T19:21:16.557

`$key = array_search('Model', array_map(function($data) {return $data['label'];}, $exif))`

array_map() 函数将数组的每个值发送到用户创建的函数，并返回一个包含新值的数组，由用户创建的函数给出。在这种情况下，我们将返回标签。

array_search() 函数在数组中搜索值并返回键。（在这种情况下，我们正在从 array_map 返回的数组中搜索标签值“Model”）

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-09-11T20:01:06.587

这将是相当微不足道的实现：

```
$model = '';

foreach ($exif['photo']['exif'] as $data) {
    if ($data['label'] == 'Model') {
        $model = $data['raw']['_content'];
        break;
    }
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-09-11T20:01:58.663

```
foreach($exif['photo']['exif'] as $row) {
    foreach ($row as $k => $v) {
        if ($k == "label" AND $v == "Model")
            $needle[] = $row["raw"];
    }
}
print_r($needle); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-03-01T20:41:52.693

以下函数在关联数组中搜索字符串值和其他数组中的值。例如，给定以下数组

```
 $array= [  "one" => ["a","b"],
            "two" => "c" ]; 
```

以下函数也可以找到 a、b 和 c

```
 function search_assoc($value, $array){
         $result = false;
         foreach ( $array as $el){
             if (!is_array($el)){
                 $result = $result||($el==$value);
             }
             else if (in_array($value,$el))
                 $result= $result||true;
             else $result= $result||false;
         }
         return $result;
     } 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2021-04-19T01:42:42.027

```
$data = [
["name"=>"mostafa","email"=>"mostafa@gmail.com"],
["name"=>"ali","email"=>"ali@gmail.com"],
["name"=>"nader","email"=>"nader@gmail.com"]];

chekFromItem($data,"ali");

function chekFromItem($items,$keyToSearch)
{
$check = false;
foreach($items as $item)
{
    foreach($item as $key)
    {
        if($key == $keyToSearch)
        {
            $check = true;
        }
    }

    if($check == true)
    {break;}
}
return $check;} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-09-11T20:02:38.243

据我所知，PHP 没有内置的多维数组搜索功能。它仅适用于索引和关联数组。因此，您必须编写自己的搜索功能！

# asp.net - ASP.net GridView 获取数据库值

> ID：12376994
> 
> 赞同：0
> 
> 时间：2012-09-11T19:58:18.747
> 
> 标签：asp.net, mysql, vb.net, gridview, rowdatabound

我的**GridView**填充如下：

```
<asp:Panel ID="pnlGrid" runat="server">
    <div class="m_container" style="margin-bottom:20px;">
        <asp:GridView ID="grdView" runat="server" CssClass="GridViewStyle"
            AutoGenerateColumns="False" GridLines="None" Width="125%" onrowdatabound="builderGridView_RowDataBound" >
            <Columns>
                <asp:BoundField DataField="id" Visible="False" />
                <asp:BoundField HeaderText="Info" />
                <asp:TemplateField>
                  <ItemTemplate>
                    <asp:LinkButton name='<%#Eval("status") %>' CommandArgument='<%#Eval("id")%>' runat="server" Text='<%#Eval("status")%>' CommandName='<%#Eval("status")%>' ID="statusLink" />
                  </ItemTemplate>
                </asp:TemplateField>
            </Columns>
            <RowStyle CssClass="RowS" />
            <EmptyDataRowStyle CssClass="EmptyS" />
            <PagerStyle CssClass="PagerStyle" />
            <SelectedRowStyle CssClass="SelectedS" />
            <HeaderStyle CssClass="HeaderS" />
            <EditRowStyle CssClass="EditRowS" />
            <AlternatingRowStyle CssClass="AltRowS" />
        </asp:GridView>
    </div>
</asp:Panel>
</asp:Content> 
```

**后面**的代码是：

```
Private Sub LoadData(ByRef theStatus As Integer)
    Dim objConn As MySqlConnection
    Dim objCmd As MySqlCommand

    objConn = New MySqlConnection(strConnString)
    objConn.Open()

    Dim strSQL As String
    strSQL = "SELECT * FROM theTable WHERE status=" & theStatus & " ORDER BY created_on, status DESC;"

    Dim dtReader As MySqlDataReader
    objCmd = New MySqlCommand(strSQL, objConn)
    dtReader = objCmd.ExecuteReader()

    grdView.DataSource = dtReader
    grdView.DataBind()

    dtReader.Close()
    dtReader = Nothing

    objConn.Close()
    objConn = Nothing
End Sub 
```

然后在上面我为每一行创建一个**LinkBut​​ton ，如下所示：**

```
Sub builderGridView_RowDataBound(ByVal sender As Object, ByVal e As GridViewRowEventArgs)
    If e.Row.RowType = DataControlRowType.DataRow Then
        Dim lbtn As LinkButton = DirectCast(e.Row.FindControl("statusLink"), LinkButton)

        e.Row.Cells(1).Text = "TEST!"

        If lbtn.Text = 0 Then
            Dim lb As New LinkButton()
            lb.Text = "Accept"
            lb.CommandName = lbtn.CommandName
            lb.CommandArgument = lbtn.CommandArgument
            lb.Attributes.Add("class", "nounderline")
            lb.ForeColor = System.Drawing.Color.Green
            lb.Font.Bold = True
            lb.Font.Size = 12

            lb.OnClientClick = "location.href = '/page.aspx?ID=" & pageID & "&dbid=" & lb.CommandArgument & "&ACCEPT=yes'; return false;"
            e.Row.Cells(4).Controls.Add(lb)
        End If
    End If
End Sub 
```

如何从数据库中获取值（姓名、地址、电子邮件地址等）并将其放在当前行中？

**例子：**

（当它遍历行时）

```
e.Row.Cells(1).Text = database("FName") & "<BR />" & database("LName") & "<BR />"...etc etc 
```

在第一行列中看起来像这样：

```
Bob
Barker 
```

我怎样才能从数据库中获取当前正在读取的内容？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T20:16:00.777

builderGridView_RowDataBound 事件填充被处理来自数据库的每一行。

e.Row.DataItem 将包含来自数据库的项目

*编辑*：更好的方法是

```
Using adap As New MySqlDataAdapter(objCmd)
    Dim table As New DataTable()
    adap.Fill(table)
grdView.DataSource = table;
grdview.DataBind(); 
```

Adapter 会将所有记录加载到 DataTable。

然后你的 e.Row.DataItem 将是 DataRow 类型

# jquery - 在 jquery 手风琴中添加图标

> ID：12376995
> 
> 赞同：3
> 
> 时间：2012-09-11T19:58:18.947
> 
> 标签：jquery, html, css

我正在使用[docs.jquery.com/UI/Accordion](http://docs.jquery.com/UI/Accordion)并且效果很好，但是我似乎无法弄清楚如何将图标添加到手风琴的标题中。

我只需要添加图标，我不想为整个手风琴设置样式。有谁知道怎么做？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T20:12:11.767

您可以将它作为图像或作为 span 标签的背景添加到 H3 标签内的 html 中。

或者，您可以通过样式表将其作为背景添加到 H3 标记。

这可能是两个最简单的选择。

```
#accordion h3 {
    background: // image path etc here
} 
```

当 H3 打开时（即它是活动的 H3），它会获得不同的类，因此您可以使用它来显示不同的图标。

```
#accordion h3.ui-state-active {
    background: // different image path here
} 
```