# StackOverflow 问答 10568000-10568999

# ruby-on-rails - Rails：使用 action_controller_path 进行静态资源路由

> ID：10568005
> 
> 赞同：0
> 
> 时间：2012-05-12T22:55:26.217
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, rest, restful-url

我在我的控制器中放置了一个随机化定义，并希望通过一条宁静的路线来访问它。应该通过以下方式访问该路线：

```
<%= link_to "Randomize", random_reader_path %> 
```

但我无法弄清楚如何让这条路线出现在 rake 路线中或在我的 routes.rb 文件中正确配置它。

random 方法将与 index 做同样的事情，只提供一个随机页面内容 @variable

目前我有我的读者控制器作为

```
resources :reader 
```

在我的 routes.rb

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T23:00:38.943

[添加更多 RESTful 操作](http://guides.rubyonrails.org/routing.html#adding-more-restful-actions)！

```
resources :reader do
  get 'random', on: :collection
end 
```

不过，路线将是`random_readers_path`。

# jquery - jQuery Mobile 嵌套列表 - 普通强调文本被隐藏

> ID：10568011
> 
> 赞同：0
> 
> 时间：2012-05-12T22:56:18.727
> 
> 标签：jquery, jquery-ui, listview, mobile, jquery-mobile

使用 jQuery Mobile 中的嵌套列表，当您有子列表时，普通文本会消失。这是示例代码：

```
<div data-role="page">
<ul data-role="listview">
    <li>
            <h1>Header Text 1</h1>
        Normal Text 1
        <p>Sub Text 1</p>
    </li>
    <li>
        <h1>Header Text 2</h1>
        Normal Text 2
        <p>Sub Text 2</p>
        <ul>           
            <li><p>Sub item 1</p></li>
            <li><p>Sub item 2</p></li>
        </ul>
    </li>
    <li>
        <h1>Header Text 3</h1>
        Normal Text 3
        <p>Sub Text 3</p>
    </li>
</ul>
</div> 
```

文本`Normal Text 2`在嵌套列表中不可见。

这是一个屏幕截图： ![注意项目 #2 中缺少的文本](../Images/cc4ceed507c88f3e8a2fb08ca81866d9.png)

我还整理了一个显示问题的 jsfiddle：http: [//jsfiddle.net/stani/2WwGC/](http://jsfiddle.net/stani/2WwGC/)
更新：小提琴不正确 - 现在应该是正确的。

有没有办法让“普通文本2”出现？或者可能是 jQuery Mobile 框架的错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T23:08:56.883

jQueryUI 似乎从您的原始列表中提取某些 HTML 标记，并根据它们的语义含义（`<h1>`成为标题等）以更奇特的方式重写它们。在我看来，“孤立文本”处理不当。

无论如何，我认为没有理由不将您的“普通文本”包装在`<p/>`or`<div/>`中。

# c - Openssl 加密库中是否有安全输入密码的功能？

> ID：10568015
> 
> 赞同：2
> 
> 时间：2012-05-12T22:56:58.823
> 
> 标签：c, linux, cryptography, passwords, openssl

我正在使用 Openssl 0.9.8k，在我的项目中使用 EVP API 使用 AES256CBC 加密/解密数据。

直到现在我正在使用用户输入密码`fgets(pwd,pwd_len,stdin)`。

openssl 是否有任何功能可促进安全密码输入。我尝试在网上搜索但找不到任何内容。（openssl 文档本身是不够的）

任何对任何文档的建议或指示都将受到高度赞赏。

**注意：：**如果Openssl没有这样的功能，有人可以建议我在我当前的方法中使用fgets从stdin获取密码时可能被利用的安全漏洞，以便我可以为此编写自己的自定义函数。

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T23:52:07.213

如果您使用 pem 例程打开受密码保护的文件，openssl 将提示用户输入密码 - 在[http://www.openssl.org/docs/crypto/pem.html](http://www.openssl.org/docs/crypto/pem.html)中有描述（搜索“提示”）。这些函数还允许您指定执行提示的回调例程；默认回调是提示用户的回调。

我找不到默认回调例程的任何文档-我认为您需要在代码中寻找。但如果您只是想阅读受密码保护的文件，那么以上内容可能就足够了。

# javascript - 数组大小 114467 好，114468 不行

> ID：10568018
> 
> 赞同：7
> 
> 时间：2012-05-12T22:57:12.940
> 
> 标签：javascript

我的算法有一个奇怪的问题，如果数组大小小于 114468，则该算法有效，如果大于 114468，则该算法无效。使用 google chrome 浏览。不明白为什么=\ 这是代码：

**生成数组：**

```
 var arr = [];
    var res = [];
    for (var i = 114467; i > 0; i--) {
        arr.push([i - 1, i]);
    } 
```

**在数组中找到第一个元素进行排序：**

```
 for (var i = 0, j = arr.length; i < j && res.length == 0; i++) {
            var found = false;
            for (var m = 0; m < j; m++) {
                if (i == m || arr[i][0] == arr[m][1] || arr[i][1] == arr[m][0]) {
                    found = true;
                    break;
                }

                if (!found) {
                    res.push(arr[m]);
                    arr.splice(m, 1);
                }
            }
        } 
```

**排序：**

```
 do {
            for (var i = 0, j = arr.length; i < j; i++) {
                var resLength = res.length - 1;
                if (arr[i][1] == res[resLength][0] || arr[i][0] == res[resLength][1]) {
                    res.push(arr[i]);
                    arr.splice(i, 1);
                    break;
                }
            }
        } while (arr.length > 0); 
```

在步骤排序它停止工作。

所有代码：

```
var t = function () {
    var arr = [];
    var res = [];
    for (var i = 114467; i > 0; i--) {
        arr.push([i - 1, i]);
    }

    var startsec = new Date().getSeconds();
    var startmilsec = new Date().getMilliseconds();
    document.write(startsec + '.' + startmilsec + '<br>');

    for (var i = 0, j = arr.length; i < j && res.length == 0; i++) {
        var found = false;
        for (var m = 0; m < j; m++) {
            if (i == m || arr[i][0] == arr[m][1] || arr[i][1] == arr[m][0]) {
                found = true;
                break;
            }

            if (!found) {
                res.push(arr[m]);
                arr.splice(m, 1);
            }
        }
    }

    do {
        for (var i = 0, j = arr.length; i < j; i++) {
            var resLength = res.length - 1;
            if (arr[i][1] == res[resLength][0] || arr[i][0] == res[resLength][1]) {
                res.push(arr[i]);
                arr.splice(i, 1);
                break;
            }
        }
    } while (arr.length > 0);

    var stopsec = new Date().getSeconds();
    var stopmilsec = new Date().getMilliseconds();
    document.write(stopsec + '.' + stopmilsec + '<br>');
    var executionTime = (stopsec - startsec).toString() + "s" + (stopmilsec - startmilsec).toString() + "'ms";
    document.write(executionTime + '<br>');
} (); 
```

我有内存限制吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-15T17:02:32.893

好的，我隔离了问题。当数组大小从 114467 增加到 114468 时，它似乎`splice(0,1)`会以天文数字方式减慢速度。

使用此自定义基准：

```
var t;
function startBench(){t=new Date().getTime();}
function stopBench(){console.log(new Date().getTime()-t);}
var arr=[];
    for (var i = 114467; i > 0; i--) {
        arr.push([i - 1, i]);
    }
var arr2=[];
    for (var i = 114468; i > 0; i--) {
        arr2.push([i - 1, i]);
    }
startBench();
for(i=0;i<1000;i++){
arr.splice(0,1);
}

stopBench();
startBench();
for(i=0;i<1000;i++){
arr2.splice(0,1);
}
stopBench(); 
```

我在 Chrome（1000 次迭代）上获得`3 ms`了 for `114467`and `2740ms`for ，但每次都在 Firefox 上。也许您应该使用不同的方式来删除元素？使用[冒泡排序](http://en.wikipedia.org/wiki/Bubble_sort)的变体可能会更好。`114468``170`

我已经提交了关于此的[错误报告](http://code.google.com/p/v8/issues/detail?id=2131)。查看回复，这*似乎*是一个有效的错误。希望它会得到修复。

# python - Pyflakes + pep8 在普通模式下检查 vim

> ID：10568026
> 
> 赞同：3
> 
> 时间：2012-05-12T22:58:41.280
> 
> 标签：python, vim, pep8, pyflakes

我使用 vim 作为我的 IDE 和 python，它很棒。我使用 pyflakes + pep8 和适当的插件。我需要这些附加功能：

1.  pyflakes “即时”检查，*而无需*切换到正常模式。
2.  pep8 检查“即时”。目前，我已映射“F6”来进行 pep8 检查，并弹出一个快速修复窗口。我希望 pep8 以与 pyflakes 相同的方式完成，但在正常模式下。
3.  pep8 和 pyflakes 的亮点必须不同。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-13T16:10:40.003

### `pyflakes`即时检查

*   [pyflakes-pathogen可让您即时检查（与](http://www.github.com/mitechie/pyflakes-pathogen)[pyflakes](http://www.vim.org/scripts/script.php?script_id=2441)相同，但适用于病原体）。

### 您可以在写入时自动运行 pep8+pyflakes`flake8`

*   [flake8](https://www.github.com/nvie/vim-flake8)可以在写入时突出显示 pep8 和 pyflakes 错误。（可能在飞行中？）。另外，您可以设置要忽略的错误列表（例如，关于如何定义变量名的 pep8 错误）。

不幸的是，我不知道是否有人即时编写了 pep8 检查器。可能需求不够？

# javascript - 主干.js：如何绑定渲染

> ID：10568028
> 
> 赞同：1
> 
> 时间：2012-05-12T22:58:59.993
> 
> 标签：javascript, backbone.js

以下代码有效，但我想提高可读性和可访问性，避免编写`callbacks`.

当对我的集合执行 fetch 时，我需要呈现我的视图。

这里的工作代码：

```
var MyView = Backbone.View.extends({

    initialize: function()
    {
        var that = this;

        MyCollection.fetch({
            success: function () {
                that.render();
            }
        });
    },

    ....

}); 
```

这是我的尝试不起作用：

```
var MyView = Backbone.View.extends({
    initialize: function()
    {
        MyCollection.fetch();
        MyCollection.bind('change', this.render);
    },

    ....
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T23:09:33.417

看起来您需要将`context`呼叫设置为`bind`. 像这样：

```
MyCollection.bind('change', this.render, this); 
```

Coffeescript 的一大优点是它可以更干净地处理这些事情。

ETA：`change`事件不会在 上触发`fetch`，它仅在集合中的模型之一发生更改时触发。[`reset`是](http://documentcloud.github.com/backbone/#Collection-fetch)，虽然。此外，您在触发提取后绑定到事件，不确定这是否是您想要的。

旁白：让我感到困惑的是，您将`MyCollection`成员大写，使其很容易与`class`.

# jquery - jQuery 滑块片段，转换为插件

> ID：10568034
> 
> 赞同：0
> 
> 时间：2012-05-12T22:59:38.330
> 
> 标签：jquery, jquery-plugins, slider

我发现了这个很棒的小 jquery 图像滑块片段：

```
var x = 2;
// function to switch the images.
function slideSwitch() {
          var m = 5;
           x += 1;
          if (x > m) {
            x = 1
            }

   $(".slideshow ul li:nth-child(n)").animate({opacity:0});
   $(".slideshow ul li:nth-child(" + (x) + ")").animate({opacity:1});
}

$(document).ready(function() {
      setInterval( "slideSwitch()", 5000 );
}); 
```

并且一直在尝试将其转换为插件以便能够多次使用它，但我没有任何运气......请提供任何帮助。

***我对插件的尝试：（***不工作）

```
(function ($) {
  $.fn.slidr = function (opts) {
    var def = {
      imgs : 4,
      sid  : 'slidr'
    },
    opts = $.extend({}, def, opts);

    var nxt = 2;

    this.each(function () {

var nxt += 1;

if (nxt > opts.imgs) {
     nxt = 1;
}

$('.'+ opts.sid + ' ul li:nth-child(n)').animate({opacity:0});
$('.'+ opts.sid + '  ul li:nth-child(' + (nxt) + ')').animate({opacity:1});

    });
    return this;
  }
})(jQuery);

$(document).ready(function() {

setInterval( $('#content').slidr(), 2000);

}); 
```

原始片段： http: [//jsfiddle.net/8T7nX](http://jsfiddle.net/8T7nX) 插件尝试不起作用：http: [//jsfiddle.net/8T7nX/1](http://jsfiddle.net/8T7nX/1)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T23:34:24.063

好像你会重新发明轮子： http: [//jquery.malsup.com/cycle/](http://jquery.malsup.com/cycle/) 这个插件正是你需要的！

我还调整了你的小提琴：http: [//jsfiddle.net/8T7nX/4/](http://jsfiddle.net/8T7nX/4/)

当您只想向它添加一个时，您正在覆盖您的 nxt var（从它前面删除了 var）

```
(function ($) {
  $.fn.slidr = function (opts) {
    var def = {
      imgs : 4,
      sid  : 'slide'
    },
    opts = $.extend({}, def, opts);

    var nxt = 2;

    this.each(function () {

  nxt += 1;

if (nxt > opts.imgs) {
     nxt = 1;
}

$('.'+ opts.sid + ' ul li:nth-child(n)').animate({opacity:0});
$('.'+ opts.sid + '  ul li:nth-child(' + (nxt) + ')').animate({opacity:1});

    });
    return this;
  }
})(jQuery);

$(document).ready(function() {

setInterval( function() { $('#content').slidr() }, 2000);

}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T23:43:38.830

如果您对原始代码出错的地方感兴趣，请查看以下内容：

[http://jsfiddle.net/Willyham/JmgFV/](http://jsfiddle.net/Willyham/JmgFV/)

尽管我建议重用一个更全面的解决方案，因为此代码的结构还有很多不足之处。

```
(function($) {
    $.fn.slidr = function(opts) {
        var def = {
            imgs: 4,
            timeout: 2000
        },
            opts = $.extend({}, def, opts);

        var nxt = 2;
        var el = $(this);

        function animate() {
            if (nxt > opts.imgs) nxt = 1;
            $('ul li:nth-child(n)', el).animate({
                opacity: 0
            });
            $('ul li:nth-child(' + (nxt) + ')', el).animate({
                opacity: 1
            });
            nxt++;
        }

        return this.each(function() {
            setInterval(animate, opts.timeout);
        });
    }
})(jQuery);

$(document).ready(function() {
    $('#n1').slidr();
    $('#n2').slidr({
        timeout: 5000
    });
});​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-12T23:38:00.050

我看不出那个剧本有什么毛病。看起来你可以做得更简单。这样你就不需要告诉插件你有多少图像。

```
;(function($){
  $.fn.slider = function(){
    return this.each(function(){
      var $li = $(this).find('li'),
          i = 1,
          slide
      $li.hide().first().show()
      slide = function(){
        $li.hide()
        if (i < $li.length) {
          $li.eq(i).fadeIn()
          i++
        } else {
          $li.first().fadeIn()
          i = 1
        }
      }
      setInterval(slide, 1000)
    })
  }
}(jQuery)) 
```

**演示：http:** [//jsfiddle.net/elclanrs/8T7nX/5/](http://jsfiddle.net/elclanrs/8T7nX/5/)

# c# - 下拉列表不起作用

> ID：10568037
> 
> 赞同：0
> 
> 时间：2012-05-12T23:00:24.690
> 
> 标签：c#, asp.net-mvc-3, drop-down-menu

控制器：

```
 OnePersonAllInfoViewModel vModel = new OnePersonAllInfoViewModel();
  vModel.PreferredContactType = new PreferredContactType();

ViewBag.PrefContactTypes = new SelectList(dbEntities.PreferredContactTypes
                                  .OrderBy(pct => pct.PreferredContactTypeID),
                                   "PreferredContactTypeID", "PreferredContactType1",
                                   vModel.PreferredContactType.PreferredContactTypeID); 
```

看法：

```
<div class="editor-label">
        @Html.LabelFor(model => model.PreferredContactType.PreferredContactTypex)
    </div>

        @Html.DropDownListFor(model => model.PreferredContactType.PreferredContactTypeID, 
       ViewBag.PrefContactTypes as SelectList) 
```

我在回发时收到此错误...没有“IEnumerable”类型的 ViewData 项目具有键“PreferredContactType.PreferredContactTypeID”

有什么想法吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T08:13:44.823

在您的 HttpPost 控制器操作`ViewBag.PrefContactTypes`中，如果您重新显示相同的视图，则必须以与您在 GET 操作中相同的方式重新填充属性：

```
[HttpPost]
public ActionResult Process(OnePersonAllInfoViewModel model)
{
    ViewBag.PrefContactTypes = ...
    return View(model);
} 
```

此外，您似乎已经定义了一些以 ViewModel 为后缀的类。这让读者相信您在您的应用程序和您使用的下一行中使用了视图模型`ViewBag`。为什么？为什么不充分利用视图模型及其强类型？

像这样：

```
public class OnePersonAllInfoViewModel
{
     public int PreferredContactTypeID { get; set; }
     public IEnumerable<PreferredContactType> PrefContactTypes { get; set; }
} 
```

然后在您的 GET 操作中：

```
public ActionResult Index()
{
    var model = new OnePersonAllInfoViewModel();
    model.PrefContactTypes = dbEntities
        .PreferredContactTypes
        .OrderBy(pct => pct.PreferredContactTypeID)
        .ToList();
    return View(model);
} 
```

然后是视图：

```
@Html.DropDownListFor(
    model => model.PreferredContactTypeID, 
    Model.PrefContactTypes
) 
```

和 POST 动作：

```
[HttpPost]
public ActionResult Index(OnePersonAllInfoViewModel model)
{
    if (!ModelState.IsValid)
    {
        // the model is invalid => we must redisplay the same view =>
        // ensure that the PrefContactTypes property is populated
        model.PrefContactTypes = dbEntities
            .PreferredContactTypes
            .OrderBy(pct => pct.PreferredContactTypeID)
            .ToList();
        return View(model); 
    }

    // the model is valid => use the model.PreferredContactTypeID to do some
    // processing and redirect
    ...

    // Obviously if you need to stay on the same view then you must ensure that 
    // you have populated the PrefContactTypes property of your view model because
    // the view requires it in order to successfully render the dropdown list.
    // In this case you could simply move the code that populates this property
    // outside of the if statement that tests the validity of the model

    return RedirectToAction("Success"); 
} 
```

# c# - 在 C# 中异或两个整数的最快方法是什么？

> ID：10568042
> 
> 赞同：7
> 
> 时间：2012-05-12T23:00:57.120
> 
> 标签：c#, xor

我需要将一个整数`a`与整数数组`q`（最多 100,000）进行异或。即，如果我在循环，我会

异或 q[0]

异或 q[1]

......

异或 q[100000]

（十万次）

我将有一系列这样`a`的异或。

我正在编写一个控制台应用程序，它将传递所需的输入。

我正在使用内置的 C#`^`运算符来执行 XOR 操作。还有其他方法吗？

将整数转换为字节数组，然后对每个位进行异或运算并找出最终结果是个好主意吗？

输入（不要保留两行之间的空格）

1

15 8

1 2 3 4 5 6 7 8 9 10 11 12 13 14 15

10 6 10

1023 7 7

33 5 8

182 5 10

181 1 13

5 10 15

99 8 9

33 10 14

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace XOR
{
    class Solution
    {
        static void Main(string[] args)
        {

            List<TestCase> testCases = ReadLine();
            //Console.WriteLine(DateTime.Now.ToLongTimeString());
            CalculationManager calculationManager = new CalculationManager();

            foreach (var testCase in testCases)
            {
                var ints = testCase.Queries.AsParallel().Select(query => calculationManager.Calculate(query, testCase.SequenceOfIntegers)).ToList();
                ints.ForEach(Console.WriteLine);
            }

            //Console.WriteLine(DateTime.Now.ToLongTimeString());
            //Console.ReadLine();
        }

        private static List<TestCase> ReadLine()
        {
            int noOfTestCases = Convert.ToInt32(Console.ReadLine());
            var testCases = new List<TestCase>();

            for (int i = 0; i < noOfTestCases; i++)
            {
                string firstLine = Console.ReadLine();
                string[] firstLineSplit = firstLine.Split(' ');
                int N = Convert.ToInt32(firstLineSplit[0]);
                int Q = Convert.ToInt32(firstLineSplit[1]);

                var testCase = new TestCase
                                   {
                                       Queries = new List<Query>(),
                                       SequenceOfIntegers = ReadLineAndGetSequenceOfIntegers()
                                   };

                for (int j = 0; j < Q; j++)
                {
                    var buildQuery = ReadLineAndBuildQuery();
                    testCase.Queries.Add(buildQuery);
                }

                testCases.Add(testCase);
            }

            return testCases;
        }

        private static List<int> ReadLineAndGetSequenceOfIntegers()
        {
            string secondLine = Console.ReadLine();
            List<int> sequenceOfIntegers = secondLine.Split(' ').ToArray().Select(x => Convert.ToInt32(x)).ToList();
            return sequenceOfIntegers;
        }

        private static Query ReadLineAndBuildQuery()
        {
            var query = Console.ReadLine();
            List<int> queryIntegers = query.Split(' ').ToArray().Select(x => Convert.ToInt32(x)).ToList();
            Query buildQuery = ReadLineAndBuildQuery(queryIntegers[0], queryIntegers[1], queryIntegers[2]);
            return buildQuery;
        }

        private static Query ReadLineAndBuildQuery(int a, int p, int q)
        {
            return new Query { a = a, p = p, q = q };
        }

    }

    class CalculationManager
    {
        public int Calculate(Query query, List<int> sequenceOfIntegers)
        {
            var possibleIntegersToCalculate = FindPossibleIntegersToCalculate(sequenceOfIntegers, query.p, query.q);
            int maxXorValue = possibleIntegersToCalculate.AsParallel().Max(x => x ^ query.a);
            return maxXorValue;
        }

        private IEnumerable<int> FindPossibleIntegersToCalculate(List<int> sequenceOfIntegers, int p, int q)
        {
            return sequenceOfIntegers.GetRange(p - 1, (q - p) + 1).Distinct().ToArray();
        }
    }

    class TestCase
    {
        public List<int> SequenceOfIntegers { get; set; }
        public List<Query> Queries { get; set; }
    }

    class Query
    {
        public int a { get; set; }
        public int p { get; set; }
        public int q { get; set; }
    }
} 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-12T23:04:12.127

使用按`^`位异或运算符是对整数进行异或运算的最快方法。

该操作被转换为单个原子处理器操作。

正如您在反汇编中看到的：

```
 int i = 4;
00000029  mov         dword ptr [ebp-3Ch],4 
        i ^= 3;
00000030  xor         dword ptr [ebp-3Ch],3 
```

所以如果你想让你的代码运行得更快，你应该改变算法/方法（正如 Marc Gravell 所建议的那样），而不是 xor 方法。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-12T23:05:01.717

我什至会尝试的唯一方法（如果有理由认为 int 方法太慢）是使用`unsafe`代码将每个`int[]`视为 a `long*`，并使用 64 位算术（再次使用`^`）而不是 32，一半迭代，以及更少的间接性。IIRC 这几乎就是我为一些 Web 套接字代码所做的（为客户端到服务器的消息应用 Web 套接字掩码是批量 XOR）。显然，您需要小心最后几个字节。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-12T23:44:57.020

如果您必须对数组 xor 更多称为 a 的元素（如您所说），您可以通过以下方式加快速度：

```
int x = q[0]
for(int i = 1; i < q.Length; i++)
   x ^= q[i]

a1 ^= x
a2 ^= x
... 
```

编辑：对不起，基本上相反

```
int x = a1 ^ a2 ^ ... an
for(int i = 0; i < q.Length; i++)
     q[i] ^= x 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-13T17:55:00.123

XOR 是一种快速运算，因此您的应用程序将受到您可以生成整数的速率的限制。

如果您只是在它们可用时对它们进行异或，则无论使用哪种方法，异或时间都将是可以忽略的。

例如，如果您从文本文件中读取整数。磁盘 io + 解析时间将比 xor 时间大几个数量级。操作系统也将使用`read-ahead`which 实际上意味着它会在您处理当前批次时获取下一批整数。这意味着除了最后一批之外，解析 + xor 不会为整体处理时间增加额外的时间。

# jquery - 如何扩展 jQuery UI 效果

> ID：10568044
> 
> 赞同：0
> 
> 时间：2012-05-12T23:01:03.093
> 
> 标签：jquery

我有这个效果 `$("#stage").effect("pulsate", { times: 1 }, 700);`

但是没有我可以使用的配置设置。例如，脉动效果将使不透明度降低到 0%，然后再回到 100%。怎么做才能使不透明度降低到 70% 而不是 0%？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T23:04:31.500

API 没有指定任何方法来做到这一点。我建议使用[animate()](http://api.jquery.com/animate/)来做单脉冲。 **请记住，动画是排队的**，所以你可以这样做：

```
$("#stage").animate({opacity : 0.7}).animate({opacity : 1}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T23:05:44.513

```
$('#stage').animate({opacity: 0.70}); 
```

如有必要，设置一个间隔以使其脉动。

# javascript - 使用 html2canvas 获取 div 的屏幕截图并显示图像

> ID：10568046
> 
> 赞同：0
> 
> 时间：2012-05-12T23:01:47.673
> 
> 标签：javascript, html, canvas, html2canvas

我已经阅读了有关 html2canvas 的所有主题，但我仍然不明白。我只有 1 个包含要转换为图像的内容的 div 和 1 个应该执行此操作的“PrintScreen”按钮。那么该怎么做呢？我几乎尝试了我找到的每一个片段，但仍然一无所获......任何帮助都会非常感激和感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T09:50:22.863

您可以通过将其放在页面的部分中来做到这一点：

```
<script type="text/javascript">
 function setUp(){
   h2cSelector = '#bar';
 }      
</script> 
```

你也改变检查这个[例子](http://html2canvas.hertzen.com/tests/origin.html)

# sql - MS 访问中的事务方法与 ODBC 链接的 sql 表

> ID：10568047
> 
> 赞同：0
> 
> 时间：2012-05-12T23:01:50.897
> 
> 标签：sql, odbc

所以我有一个 ms access 2010 db，它通过 odbc 连接具有链接表。

我有一个完成交易的宏（库存申请）。当多用户使用宏时，宏会重叠并产生错误。

我把宏变成了一个公共函数，这有助于但没有消除问题。

我试图让它使用事务方法，如果不是全部完成，它可以回滚。

我认为我非常接近，但我在运行查询时遇到问题，并且担心这是因为表通过 odbc 连接链接到 sql。我在下面发布代码。如果有人有任何想法，将不胜感激。

选项比较数据库

```
'------------------------------------------------------------
' CompleteTransactionsMOD 
'
'------------------------------------------------------------
Public Function CompleteTransactionsMOD()
  Dim bSuccess As Boolean
  Dim iCounter As Integer
  Do While bSuccess = False And iCounter < 3
    Debug.Print "Loop " & iCounter
    bSuccess = CompleteTransactionsMOD_Loop()
    iCounter = iCounter + 1
  Loop
  If bSuccess Then
      MsgBox "Transactions completed successfully"
  Else
      MsgBox "Transactions failed to complete after repeated attempts"
  End If
End Function

Public Function CompleteTransactionsMOD_Loop() As Boolean
  DBEngine.BeginTrans
  On Error GoTo CompleteTransactionsMOD_Loop_Err

  With CurrentDb
   .Execute "UpdateInOutTrantblQRY", dbFailOnError
   .Execute "UpdateTranTypeQRY", dbFailOnError
   .Execute "PullToShipTransHandlingQRY", dbFailOnError
   .Execute "TransreadyInDupLocQRY", dbFailOnError
   .Execute "TransreadyOutDupLocQRY", dbFailOnError
   .Execute "AppendNewLocToInvInQry", dbFailOnError
   .Execute "UpdateNewLocToInvNegQRY", dbFailOnError
   .Execute "TrancomplastQRY", dbFailOnError
   .Execute "InvLocFindNegQRY", dbFailOnError
   .Execute "DelZeroQInvLocQRY", dbFailOnError

  End With
  DBEngine.CommitTrans
  CompleteTransactionsMOD_Loop = True

CompleteTransactionsMOD_Loop_Exit:
  Exit Function

CompleteTransactionsMOD_Loop_Err:
  DBEngine.Rollback
  Debug.Print Err.Description
  CompleteTransactionsMOD_Loop = False
  Resume CompleteTransactionsMOD_Loop_Exit

End Function 
```

# macos - NSSetUncaughtExceptionHandler 在 Lion 10.7.3 上不起作用

> ID：10568049
> 
> 赞同：1
> 
> 时间：2012-05-12T23:02:02.463
> 
> 标签：macos, cocoa, nsexception

以下简单代码在新可可测试项目的应用程序委托上。

```
void onUncaughtException(NSException *exception){
    NSLog(@"Caught!!! %@", exception);
}

- (void)applicationDidFinishLaunching:(NSNotification *)aNotification
{
    NSSetUncaughtExceptionHandler(&onUncaughtException);

    NSException *exception = [[NSException alloc]initWithName:@"exception" reason:@"exception reason here" userInfo:nil];
    @throw exception;
} 
```

我只得到带有异常名称和原因的单个控制台日志行，但不会调用 onUncaughtException。该应用程序继续运行没有问题。

我在这里想念什么？我在调试和发布版本上尝试了这个，结果相同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T01:41:05.583

我不知道它的所有来龙去脉，但我怀疑 NSApplication 在它无法通过您的处理程序之前拦截它。

# python - 如何访问 Django 模板列表中的实体之一的属性？

> ID：10568050
> 
> 赞同：0
> 
> 时间：2012-05-12T23:02:17.510
> 
> 标签：python, django, django-templates

如何在循环外访问列表中实例之一的属性？

```
<table>
    {% for field in fields %}
        <tr>
            <td>{{ field.name }}</td>
            <td>{{ field.value }}</td>
        </tr>
    {% endfor %}
    The value of the last field is: {{ WHAT_GOES_HERE??? }}
</table> 
```

WHAT_GOES_HERE 应该是什么？我尝试过 fields|last.value、fields.-1.value 等，但不知道正确的语法。我想使用该值来动态创建一个链接（参数指向下一组值的开始）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-12T23:08:05.917

Django 为这种情况提供了[forloop 对象](https://docs.djangoproject.com/en/dev/ref/templates/builtins/?from=olddocs#for)：

```
<table>
    {% for field in fields %}
        <tr>
            <td>{{ field.name }}</td>
            <td>{{ field.value }}</td>
        </tr>
        {% if forloop.last %}
            The value of the last field is: {{ field.value }}
        {% endif %}
    {% endfor %}
</table> 
```

# ios - 键盘不显示 iOS

> ID：10568052
> 
> 赞同：0
> 
> 时间：2012-05-12T23:02:47.680
> 
> 标签：ios, uitabbarcontroller, uikeyboard

我有包含两个控制器的标签栏。

在第一个和第二个控制器中，我有`UISearchBar`.

当我点击第一个控制器中的搜索栏时，我需要切换到第二个选项卡。我已经实现了这个方法。

在切换标签之前，我将键盘隐藏在第一个标签上。

这是动作：

1.  点击搜索栏
2.  [mysearchbar resignfirstresponser]
3.  我的标签栏设置选定的索引 1（第二个控制器）

在视图中的第二个控制器中确实出现了我必须再次显示键盘。

我也实现了这个方法。

这是动作：

1.  视图确实出现了
2.  [mysearchbar 成为第一响应者]

但在我的情况下，键盘没有出现。（仅适用于 iOS 5.0 或更高版本）

有人知道是什么问题吗？

非常感谢！

# python - UnboundLocalError：分配前引用的局部变量“xyz”

> ID：10568056
> 
> 赞同：0
> 
> 时间：2012-05-12T23:03:14.210
> 
> 标签：python, local-variables

**更新：**为了回应 Wooble 的评论，在 for 之前添加一个“sector = None”只会返回“None”。我认为问题在于 for 循环中的变量没有被返回。

以下是运行良好的函数的一部分，直到最近，当我更改了代码中看似无关的部分时。

**#--> 我最近更改的唯一部分是在 return 语句中添加“stockurl”**

我现在得到**UnboundLocalError: local variable "sector" referenced before assignment**，指的是“return”行

```
for sec in root.xpath(r'''//a[re:match(@href, "http://biz.yahoo.com/p/[0-9]{1}conameu.html")]''',
                namespaces={'re': 'http://exslt.org/regular-expressions'}):
    sector = sec.text
    #print "Sector: " + sector

for ind in root.xpath(r'''//a[re:match(@href, "http://biz.yahoo.com/ic/[0-9]{1,9}.html")]''',
        namespaces={'re': 'http://exslt.org/regular-expressions'}):
    industry = ind.text
    #print "Industry: " + industry

#index          --> don't populate here
#followers  --> don't populate here

return a, b, c, d, e, f, stockurl, sector, industry
    #--> the only part I had changed recently was adding "stockurl" to the function 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-12T23:28:23.460

让我们看一下错误消息并向后工作：

> 赋值前引用的局部变量“扇区”

这意味着您指的是`sector`但`sector`尚未分配或绑定到对象。

唯一的赋值`sector`是在 for 的主体内`loop`。所以，很明显，`for`循环的主体没有被输入。只有当调用`root.xpath()`返回一个空的可迭代对象时才会发生这种情况。

# c - C 中布尔表达式的结果

> ID：10568058
> 
> 赞同：1
> 
> 时间：2012-05-12T23:03:57.213
> 
> 标签：c, boolean-expression, pre-increment

为什么以下表达式的计算结果为 0？

```
i > --i 
```

假设 i = 5。从左到右计算表达式，我们计算左操作数 (i) 得到 5，我们计算右操作数 (--i) 得到 4。所以表达式 about 应该计算为 1。但是当我用 gcc 编译并运行它，它总是评估为 0。我的思维过程是否存在缺陷？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-12T23:05:44.240

这只是**未定义的行为**，因为您正在修改的值`i`以及在没有干预序列点的情况下读取它。关系运算符`<`不*引入*序列点。

从 C11, 6.5(2) 开始：

> 如果标量对象的副作用相对于同一标量对象的不同副作用或使用同一标量对象的值的值计算是未排序的，则行为未定义。

# php - 访问对象内的多维数组时“评估”的其他选项

> ID：10568063
> 
> 赞同：1
> 
> 时间：2012-05-12T23:04:21.890
> 
> 标签：php, eval

> **可能重复：**
> [具有数组结构的字符串到数组](https://stackoverflow.com/questions/8537148/string-with-array-structure-to-array)

我有一个静态类，它用作注册表，存储一些相关的设置变量。由于它是静态的，我无法在运行时添加/删除属性，因此，在该类中，我有一个通用对象（可以是数组）来存储这些属性。

这是代码

```
class Settings
{
    private static $setsObj;
    public static function Set($key, $value)
    {
        self::$setsObj->$key = $value;
    }
    public static function Get($key)
    {
        if (strpos($key, '->') > 0)
        {
            $key = explode('->', $key);

            $n = count($key);

            $execute = 'return self::$setsObj->' . $key[0];

            for ($i = 1; $i < $n; $i++)
            {
                    $execute .= '["' . $key[$i] . '"]';
            }

            $execute .= ';';

            eval($execute);
        }
        else
        {
            return self::$setsObj->$key;
        }

    }
} 
```

现在，这使我能够获得这样的确定属性：

```
Settings::Get('property_name'); 
```

如果该属性是一个数组，我可以像这样访问一个数组子项：

```
Setting::Get('property_name->subitem'); 
```

我的问题是：

在这种情况下使用 eval 正确吗？不使用 eval 是否可以完成这项工作？我是否应该更改为单例模式类并将属性直接添加到父对象（某些信息是明智的，例如 DB 密码）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T23:36:36.543

未经测试

```
$cursor = self::$setsObj;
foreach (explode('->', $key) as $prop) {
    if (!is_object($cursor)) {
        //exception?
    }
    if (!isset($cursor->$prop)) {
        return null;
    }
    $cursor = $cursor->$prop;
}
return $cursor; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T23:40:40.313

我知道我的回答可能听起来很傻，但这不会达到你想要做的吗？：

```
Settings::Set('foo', (object) array('bar' => 10));

var_dump(Settings::get('foo')->bar); 
```

# twitter-bootstrap - 限制引导样式的范围

> ID：10568065
> 
> 赞同：47
> 
> 时间：2012-05-12T23:04:27.257
> 
> 标签：twitter-bootstrap

如何将 Bootstrap 限制在 div 的范围内？我需要在 ExtJS 应用程序中为特定的 div 嵌套 Bootstrap 样式表，并且两者都发生冲突，因为它们需要自己的 body、ul、li、a 等。

我试图避免手动编辑 bootstrap.css（或将其保持在最低限度），以便可以轻松更新它。

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2013-01-03T19:10:33.777

您可以[分叉引导](http://github.com/twitter/bootstrap)存储库并更改`bootstrap.less`以包装引导样式：

```
.bootstrap-scope {
    //put bootstrap @includes in here
} 
```

然后，在 bootstrap 项目的根目录下，运行`make`生成`bootstrap.css`文件。

您将丢失引导程序分配给 body 和 html 标记的全局样式，但您可能不想要它们。

然后，在您的应用程序中，提供您想要的`.bootstrap-scope`类的容器。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-11-18T15:35:49.847

由于修改 less/bootstrap.less 的结果对我来说不够好（请参阅帖子底部的原因），我最终过滤了 bootstrap.css ：

```
var css = require('css'), fs = require('fs');

var prefix = '.bootstrap-scope';
var inFile = 'bootstrap.css';

var cssAst = css.parse(fs.readFileSync(inFile, 'utf8'));
prefixNode(cssAst);
console.log(css.stringify(cssAst));

function prefixSelector(sel){
    if (sel.match(/^@/)) return sel;
    var m = sel.match(/(^| )(body|html)($|\W.*)/i);
    if (m) 
        return m[1] + prefix + m[3];
    else
        return prefix + ' ' + sel;
}

function prefixNode(node) {
    if (node.selectors) {
        node.selectors = node.selectors.map(prefixSelector);
    } else if (node.stylesheet) {
        node.stylesheet.rules.forEach(prefixNode);
    } else if (node.rules) {
        node.rules.forEach(prefixNode);
    }
} 
```

既然生成了 bootstrap.css ，也可以盲目地去做（解决方案类似于 Alexey 的，但也处理了一些极端情况）：

```
perl -lpe 'BEGIN { $prefix = ".bootstrap-scope" } if (($indent, $s, $sep) = /^(\s*)([^@\s].*?)(\s*[,{])$/) { $s =~ /^(from|to)*$/ or $s =~ s/(^| )(body|html)($|\W.*)/$1$prefix$3/i or $s = "$prefix $s"; $_ = "$indent$s$sep" }' bootstrap.css 
```

至于修改 less/bootstrap.css 并调用 grunt 来生成 dist/css/bootstrap.css （Andrew Homeyer 的解决方案），在某些情况下似乎效果不佳（至少在 bootstrap 3 中）：

*   像 .make-grid-columns （来自 less/mixins.xml）这样的各种 mixin 最终会被错误地添加前缀。例子：

    ```
    .bootstrap-scope .col-sm-1,
      .col-sm-2,
      .col-sm-3, 
    ```

*   [LESS](https://stackoverflow.com/questions/19228089/double-ampersand-in-less#19229433)中“&”的使用是有限的：

    ```
    .caret {
      .btn-default & { 
    ```

    变成

    ```
     .btn-default .bootstrap-scope .caret { 
    ```

    而不是我们想要的：

    ```
     .bootstrap-scope .btn-default .caret { 
    ```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2015-06-04T10:46:14.117

如果您有以下文件结构：

*   mystyles.less
*   我的样式.css
*   /引导程序/
    *   无引导程序
    *   引导程序.css
    *   无网格
    *   ...
    *   /混合/

而且你想限制引导的范围，你必须把你的 mystyles.less （**正确的方式**）：

```
.your-class-to-limit-bootstrap-scope{
    @import (less) "bootstrap/bootstrap.css";
} 
```

我们必须导入 bootstrap.css 文件而不是 bootstrap.less，但使用 (less) @import 选项将文件视为 Less 文件，无论文件扩展名是什么。因此，您将获得正确的 css，例如：

```
.your-class-to-limit-bootstrap-scope .col-xs-1,
.your-class-to-limit-bootstrap-scope  .col-sm-1,
.your-class-to-limit-bootstrap-scope ...
.your-class-to-limit-bootstrap-scope .col-lg-12 {
    position: relative;
    min-height: 1px;
    padding-left: 7px;
    padding-right: 7px;
 } 
```

但是，如果您导入较少的引导文件，您将得到一个范围不正确的 css **（错误的方式）**：

```
.your-class-to-limit-bootstrap-scope{
    @import "bootstrap/bootstrap.less";
} 
```

因此，您将获得不正确的作用域 css，例如：

```
.your-class-to-limit-bootstrap-scope .col-xs-1, 
.col-sm-1,
.col-md-1,
...
.col-lg-12 {
    position: relative;
    min-height: 1px;
    padding-left: 15px;
    padding-right: 15px;
} 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2013-05-30T12:51:53.213

有一种更简单的方法可以实现这一合法要求：将 }NEWLINE 和 ,NEWLINE 替换为以前的值和您的类范围。很容易进入例如 Sublime：

*   选择 }\r\n

*   Alt + F3（选择所有匹配项）

*   替换为 }\r\n.bootstrap-scope

*   选择 ,\r\n

*   Alt + F3（选择所有匹配项）

*   替换为 ,\r\n.bootstrap-scope

就是这样！由于更换大约需要一分钟，因此后续更新将非常容易。希望我的回答有所帮助。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2017-09-26T20:25:39.453

扩展@Andrew Homeyer 答案：

通过执行以下操作，我在我的 Reactjs 应用程序中获得了 boostrap 的范围样式：

1.  去[这里](http://getbootstrap.com/docs/3.3/getting-started/#download)下载引导源
2.  [按照此处](http://getbootstrap.com/docs/3.3/getting-started/#grunt)的指南安装 grunt。概括：

> Bootstrap 使用 Grunt 作为其构建系统，并提供了使用框架的便捷方法。这就是我们编译代码、运行测试等的方式。
> 
> 安装 Grunt：要安装 Grunt，您必须首先下载并安装 node.js（包括 npm）。npm 代表 node packaged modules，是一种通过 node.js 管理开发依赖的方法。
> 
> 然后，从命令行：使用 .grunt-cli 全局安装 `npm install -g grunt-cli`。导航到根 /bootstrap/ 目录，然后运行`npm install`​​. npm 将查看 package.json 文件并自动安装其中列出的必要本地依赖项。完成后，您将能够运行从命令行提供的各种 Grunt 命令。

3.  `less/bootstrap.less`将下载源中的文件编辑为以下内容：

`.bootstrap-scope {...pasted all @imports here...}`

[![在此处输入图像描述](../Images/8f910f3481398539162825680338fa40.png)](https://i.stack.imgur.com/WMRas.png)

4.  `grunt dist`运行并将新的 dist 文件夹复制到我的App.js项目
    中`import './styling/bootstrap/css/bootstrap.min.css';`。

[![在此处输入图像描述](../Images/e7c7f08ff068558c212500cfcd367cbb.png)](https://i.stack.imgur.com/X4cYh.png)

类似的讨论[在这里](https://stackoverflow.com/questions/11831346/applying-css-styles-only-to-certain-elements)

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2018-04-19T06:36:50.747

无需分叉/编辑原始引导程序。只需像这样将其导入包装在您的文件中（在我的情况下为 sass）：我创建了文件“bootstrap-scope-limit.scss”（我在需要引导的地方导入）：

```
.bootstrap-inside {
  @import "~bootstrap-sass/assets/stylesheets/_bootstrap.scss";
  @import "~bootstrap-sass/assets/stylesheets/bootstrap/_theme.scss";
} 
```

**重要通知！**

请记住，bootstrap 有一些在使用这种方法时不会应用的 body 样式。但是，如果某些动态内容必须使用引导程序，它使您能够通过向元素添加“bootstrap-inside”类来控制引导程序，以启用或禁用整个页面的引导程序。

您应该注意的另一个问题：一些覆盖引导样式的插件可能会出现问题，因为具有新类包装器的引导样式变得更强大（更具体）并且不能被未包装的插件覆盖。

* * *

对于 webpack 案例，我建议使用此加载器：[https](https://www.npmjs.com/package/wrap-css-loader) ://www.npmjs.com/package/wrap-css-loader来包装整个包，您可以稍后将其用作应用程序（div？）的一部分

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-02-05T13:53:51.887

扩展@jtlindsey 答案。如果你想使用 bootstrap 4，你必须做一些小改动。

而不是编辑`less/bootstrap.less`，你必须编辑`scss/bootstrap.scss`

那么你必须按顺序执行这个命令：

```
gem install bundler
bundle install
npm run dist 
```

并且在 dist 文件夹中生成了新的 bootstrap.min.css。

在这里您可以获得更多信息： [https ://getbootstrap.com/docs/4.0/getting-started/build-tools/](https://getbootstrap.com/docs/4.0/getting-started/build-tools/)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-08-25T00:18:59.347

如果你想要一个不涉及外部库的纯 JavaScript 解决方案，你可以走这条路：一般的想法是加载原始 css，然后逐行解析它，在必要时添加你的作用域选择器。

```
function scopeCSS(scopeSelector, rawCSS) {
  return rawCSS.split('\n').map(line => {
    var trimmedLine = line.trim()
    if (trimmedLine.startsWith('*') || trimmedLine.startsWith('/*') || trimmedLine.startsWith('@media') || trimmedLine === '' || trimmedLine.endsWith(';') || trimmedLine.endsWith('}')) {
      return line
    }
    return line.split(',').map(selector => selector.trim()).map(selector => selector === '' ? selector : `${scopeSelector} ${selector}`).join(',');
  }).join('\n')
}
const rawCSS = document.querySelector('#before').textContent // just as an example, you'd probably use a raw loader with webpack
document.querySelector('#after').textContent = scopeCSS('.bootstrap-scope', rawCSS)
```

```
#grid {
  display: grid;
  width: 100%;
  grid-template-columns: 1fr 1fr;
}
```

```
<div id="grid">
  <div id="col-1">
    <pre id="before">/*!
 * Bootstrap Grid v5.0.0-alpha1 (https://getbootstrap.com/)
 * Copyright 2011-2020 The Bootstrap Authors
 * Copyright 2011-2020 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
 */
.container,
.container-fluid,
.container-sm,
.container-md,
.container-lg,
.container-xl,
.container-xxl {
  width: 100%;
  padding-right: 1rem;
  padding-left: 1rem;
  margin-right: auto;
  margin-left: auto;
}

@media (min-width: 576px) {
  .container, .container-sm {
    max-width: 540px;
  }
}

@media (min-width: 768px) {
  .container, .container-sm, .container-md {
    max-width: 720px;
  }
}

@media (min-width: 992px) {
  .container, .container-sm, .container-md, .container-lg {
    max-width: 960px;
  }
}

@media (min-width: 1200px) {
  .container, .container-sm, .container-md, .container-lg, .container-xl {
    max-width: 1140px;
  }
}

@media (min-width: 1400px) {
  .container, .container-sm, .container-md, .container-lg, .container-xl, .container-xxl {
    max-width: 1320px;
  }
}

.row {
  --bs-gutter-x: 1.5rem;
  --bs-gutter-y: 0;
  display: flex;
  flex: 1 0 100%;
  flex-wrap: wrap;
  margin-top: calc(var(--bs-gutter-y) * -1);
  margin-right: calc(var(--bs-gutter-x) / -2);
  margin-left: calc(var(--bs-gutter-x) / -2);
}

.row > * {
  box-sizing: border-box;
  flex-shrink: 0;
  width: 100%;
  max-width: 100%;
  padding-right: calc(var(--bs-gutter-x) / 2);
  padding-left: calc(var(--bs-gutter-x) / 2);
  margin-top: var(--bs-gutter-y);
}

.col {
  flex: 1 0 0%;
}
/*# sourceMappingURL=bootstrap-grid.css.map */</pre>
  </div>
  <div id="col-2">
    <pre id="after"></pre>
  </div>
</div>
```

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2019-08-13T19:27:20.273

我所知道的唯一肯定比这个脚本更糟糕的是引导程序本身，但这可能仍然是一段时间内最好的答案：

`prefix="#bs431"; cat bootstrap.css | while IFS='' read -r line; do if echo "$line" | egrep -i '(\{|,)$' | egrep -iv '\@media' | wc -l | egrep -iq '^0$'; then echo "$line"; else echo "$line" | perl -pe 's/^(\s+)?/\1'"$prefix"' /g' | perl -pe 's/, (\.|#|\[|[a-zA-Z]{1})/, '"$prefix"' \1/g'; fi; done | perl -pe 's/'"$prefix"' :root/'"$prefix"'/g' > bootstrap.scoped.css`

# jquery - AJAX 全局变量

> ID：10568068
> 
> 赞同：1
> 
> 时间：2012-05-12T23:05:15.027
> 
> 标签：jquery, global-variables

我正在尝试这样做，它返回“未定义”：

```
$.ajax({
    url : 'curriculum/read_types',
    type : 'GET',
    dataType : 'JSON',
    success : function(data) {
        return data;
    }
}) 
```

但如果我这样做：

```
$.ajax({
    url : 'curriculum/read_types',
    type : 'GET',
    dataType : 'JSON',
    success : function(data) {
        console.log(data);
    }
}) 
```

它在控制台上写入一个完整的 JSON 对象，所以我知道存在数据。

我怎样才能返回这些数据？

* * *

我想做的是下一个：

```
var curriculum = {
add : function() {
    html = [];

    html.push('<select name="type" required>');
    html.push('<option value="0">Grupo general...</option>');

    var types = curriculum.read_types();
    $.each(types, function(k,v) {
        html.push('<option value="'+v+'">'+v+'</option>')
    })

    html.push('</select>');

    content.show('Añadir imagen a curriculum',html.join(''));
},
read_types : function() {
    $.getJSON('curriculum/read_types', function(data) {
        return data;
    })
}
}

curriculun.add() 
```

* * *

最后它管理但有一个 asyn:false 请求：

```
var curriculum = {
add : function() {
    html = [];
    html.push('<select name="type" required>');
    html.push('<option value="0">Grupo general...</option>');

    var types = curriculum.read_types();
    $.each(types, function(k,v) {
        html.push('<option value="'+v+'">'+v+'</option>')
    })

    html.push('</select>')
    content.show('Añadir imagen a curriculum',html.join(''));
},
read_types : function() {
    var a;
    $.ajax({
        url : 'curriculum/read_types',
        type : 'GET',
        async : false,
        contentType : 'JSON',
        success : function(data) {
            a = data;
        }
    })
    return a;
}
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-12T23:13:36.503

回调函数（如成功处理程序）是注册的异步事件，一旦 AJAX 请求完成就会触发并将成功的结果返回给客户端浏览器。由于该事件已注册，因此它不会阻止您的 AJAX 请求所在的函数运行。

为了处理数据，只需将数据交给另一个函数，如下所示：

```
$.ajax({
    url : 'curriculum/read_types',
    type : 'GET',
    dataType : 'JSON',
    success : function(data) {
        console.log(data):

        // process the results
        processData(data);
    }
});

function processData(data) {
    // do stuff with the data here
} 
```

**更新：**

```
read_types : function() {
    $.getJSON('curriculum/read_types', function(data) {
        return data;
    });
} 
```

上面的代码只是你不能做的事情。以下是对流程的粗略描述：

> *   `read_types`函数是从其他进程调用的。
>     
>     
> *   $.getJSON 函数使用 2 个参数调用：路径和回调处理程序。
>     
>     
> *   read_types 函数完成处理并到达末尾。
>     
>     
> *   接下来，当 read_types 方法完成时，getJSON 函数向您的 URL 发出 HTTP GET 请求。
> *   数据在响应中接收并作为分配给参数“data”的参数传递给回调处理程序。
> *   当您调用时，`return data;`您将数据返回到匿名成功回调函数，而不是 read_types。因此，return 语句基本上什么都不做。

## **同步请求示例：**

现在，话虽如此，您可以向服务器发出同步请求，但强烈建议不要这样做，因为它会对视图产生影响。

但是，这是一个示例，仅用于学术目的。除非你真的很清楚自己在做什么，否则我永远不会提倡使用这种策略：

**注意：除非您知道自己在做什么，否则不要在生产中使用它！**

```
function getData() {

    var myDataObj = null;

    // this will BLOCK execution of all other scripts on the page until
     // the data is received!
    $.ajax({
        url : 'curriculum/read_types',
        type : 'GET',
        dataType : 'JSON',
        success : function(data) {
            console.log(data):

            // we can assign this data to myDataObj in synchronous requests
            myDataObj = data;

        },
        async: false  /** Make a synchronous request **/
    });

    // Since we BLOCKED, this object is not null. If we used async: true 
     // (the default) then this would return null.
    return myDataObj;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-12T23:13:28.563

如前所述，ajax 是异步的。您可以传递 async false 以强制 javascript 线程等待，但这很讨厌并且非常不像 javascript。我解释说你想要的是这样的：

```
var myData;
$.ajax({
    url : 'curriculum/read_types',
    type : 'GET',
    async : false,
    dataType : 'JSON',
    success : function(data) {
        myData = data;
    }
})

// while this is what you want to do, myData would be undefined here
console.log(myData); 
```

但相反，您应该继续做您在成功功能中所做的事情。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-12T23:20:17.440

Ajax 是异步的，因此返回它并没有什么好处。您可以改用自定义事件。在成功函数中：

```
$('#someelement').trigger('read_types_loaded', [data]); 
```

然后在某处附加一个事件监听器：

```
$('#someelement').bind('read_types_loaded', function(event,data){
    // Do something with data
}); 
```

# python - numpy.array 访问

> ID：10568069
> 
> 赞同：1
> 
> 时间：2012-05-12T23:05:29.300
> 
> 标签：python, numpy

我有一个 2D numpy 数组`visrec`。如果我做

```
print visrec[0,:] 
```

我得到这个输出：

```
[  a1   a2   a3   a4  a5   a6] 
```

`a1, a2,..`在哪里`dtype=float64`

更清楚的是，对象`visrec`中存储的是一个 1x6 矩阵。`numpy.array`它最初是使用以下命令创建的：

```
visrec=numpy.array(numpy.zeros((1,6))) 
```

在一个循环中，我正在`visrec`修改修改记录并将其存储在一个列表中。我基本上将每个修改附加到列表中`rec_history=[]`。我使用这个命令：

```
rec_history.append(visrec[0,:]) 
```

然后，为了测试它，我只想`rec_history`用这个命令打印第一个元素：

```
print rec_history[0] 
```

输出格式如下：

```
[ a1   a2  a3   a4   a5   a6] 
```

到这里一切都如我所料。但是，如果我尝试打印 的多个元素`rec_history`，我会得到一个意外的输出。我发出这个命令：

```
print rec_history[0:3] 
```

并获得以下输出：

```
[array([ a1,  a2,  a3,  a4,  a5 ,
        a6]), array([  b1,   b2,   b3,
         b4,   b5,   b6]), array([  c1,   c2,   c3,
         c4,   c5,   c6])] 
```

这是正常的吗？我实际上是否将数组对象存储在我的记录列表中。如果是这种情况，如果我只打印列表的一个元素，为什么我没有得到不同类型的输出？这与功能有关`print`吗？我不想存储数组对象，我想将数字列表存储在记录列表中。我怎样才能做到这一点？我知道matlab，但我想这对我没有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T00:06:13.533

您正在存储原始数组的切片，并且由于您从切片中获得了多个数组`rec_history[0:3]`，因此我假设您至少附加了 3 次。

如果您想要 rec_history 第一项的前三项，您需要执行以下操作：

```
rec_history[0][:3] 
```

如果您出于某种原因不希望使用 rec_history 中的数组，您可以将附加行​​更改为：

```
rec_history.append(list(visrec[0,:])) 
```

如果您打算更改`visrec`并想看看它在以前的状态下的样子，这将是一件好事，因为只是像您所做的那样附加数组切片只会创建对数组该部分的引用。因此，如果您使用代码更改数组，它也会更改内容`rec_history`。

# python - 在 Python 中替换变量

> ID：10568079
> 
> 赞同：1
> 
> 时间：2012-05-12T23:07:04.083
> 
> 标签：python, variables

这是我的脚本：

```
fruit  = "apple"
phrase = "I like eating " + fruit + "s."

def say_fruit(fruit):
    print phrase

say_fruit('orange') 
```

我试图使用变量`say_fruit`内部给出的字符串，它实际上使用了之前已经分配给它的变量（ ）。我怎样才能做到这一点？`phrase``apple`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T23:08:43.820

在您的代码中，`phrase`当模块加载并且永远不会更改时，它绑定到一个字符串。你需要是动态的，像这样：

```
def phrase(fruit):
    return "I like eating " + fruit + "s."

def say_fruit(fruit):
    print phrase(fruit) 
```

全局变量只是一个坏主意，将来会困扰您。抵制使用它们的诱惑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T23:15:39.957

所以你想要的是这个，对吧？

```
>>> say_fruit('orange')
I like eating oranges.
>>> say_fruit('apples')
I like eating apples. 
```

如果是这样，将短语的定义移动到函数中。最终结果应该是这样的：

```
def say_fruit(fruit):
    phrase = "I like eating " + fruit + "s."
    print phrase

say_fruit('orange') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-12T23:17:34.120

当你运行这行代码时

```
phrase = "I like eating " + fruit + "s." 
```

Python 自动`'apple'`替换`fruit`并`phrase`成为`" I like eating apples."`.

我更喜欢使用`.format()`它来执行此操作，因为它保留了可读性：

```
fruit  = "apple"
phrase = "I like eating {fruit}s."

def say_fruit(fruit):
    print phrase.format(fruit=fruit)

say_fruit('orange') 
```

`.format()`替换`{var}`为调用时的内容`var`。

# python - 将序列划分为一组唯一对

> ID：10568081
> 
> 赞同：4
> 
> 时间：2012-05-12T23:07:45.510
> 
> 标签：python

我需要一个 of 函数，它可以将一个序列分成对，然后将它们组合起来，使组合中的所有元素都是唯一的。我已经尝试了许多使用 python 的 itertools 的方法，但还没有找到解决方案。

为了说明我想要一个可以采用这个序列的函数： [1, 2, 3, 4]

并将其拆分为以下3种组合：

```
[[1, 2], [3, 4]]
[[1, 3], [2, 4]]
[[1, 4], [2, 3]] 
```

它也应该适用于更长的序列，但不必处理奇数长度的序列。例如。

```
[1,2,3,4,5,6] 
```

分成以下15种组合：

```
[[1, 2], [3, 4], [5, 6]]
[[1, 2], [3, 5], [4, 6]]
[[1, 2], [3, 6], [4, 5]]
[[1, 3], [2, 4], [5, 6]]
[[1, 3], [2, 5], [4, 6]]
[[1, 3], [2, 6], [4, 5]]
[[1, 4], [2, 3], [5, 6]]
[[1, 4], [2, 5], [3, 6]]
[[1, 4], [2, 6], [3, 5]]
[[1, 5], [2, 3], [4, 6]]
[[1, 5], [2, 4], [3, 6]]
[[1, 5], [2, 6], [3, 4]]
[[1, 6], [2, 3], [4, 5]]
[[1, 6], [2, 4], [3, 5]]
[[1, 6], [2, 5], [3, 4]] 
```

... 等等。

名为 Maple 的 CAS 在名称[setpartition](http://www.maplesoft.com/support/help/Maple/view.aspx?path=combinat/setpartition)下实现了此功能。

编辑：修复了 wks 指出的一个严重的深夜打字错误，并澄清了输出。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-12T23:50:01.587

`itertools`确实是你的朋友：

```
from itertools import permutations

def group(iterable, n=2):
    return zip(*([iter(iterable)] * n))

for each in permutations([1, 2, 3, 4, 5, 6]):
    print map(list, group(each)) 
```

结果：

```
[[1, 2], [3, 4], [5, 6]]
[[1, 2], [3, 4], [6, 5]]
[[1, 2], [3, 5], [4, 6]]
[[1, 2], [3, 5], [6, 4]]
[[1, 2], [3, 6], [4, 5]]
[[1, 2], [3, 6], [5, 4]]
[[1, 2], [4, 3], [5, 6]]
[[1, 2], [4, 3], [6, 5]]
[[1, 2], [4, 5], [3, 6]]
... 
```

**[编辑]** @FrederikNS：在您澄清问题[并自己找到答案](https://stackoverflow.com/questions/10568081/partitioning-a-sequence-into-sets-of-unique-pairs/10570837#10570837)后，这是我的解决方案：

```
from itertools import combinations

def setpartition(iterable, n=2):
    iterable = list(iterable)
    partitions = combinations(combinations(iterable, r=n), r=len(iterable) / n)
    for partition in partitions:
        seen = set()
        for group in partition:
            if seen.intersection(group):
                break
            seen.update(group)
        else:
            yield partition

for each in setpartition([1, 2, 3, 4]):
    print each
print
for each in setpartition([1, 2, 3, 4, 5, 6]):
    print each 
```

结果：

```
((1, 2), (3, 4))
((1, 3), (2, 4))
((1, 4), (2, 3))

((1, 2), (3, 4), (5, 6))
((1, 2), (3, 5), (4, 6))
((1, 2), (3, 6), (4, 5))
((1, 3), (2, 4), (5, 6))
((1, 3), (2, 5), (4, 6))
((1, 3), (2, 6), (4, 5))
((1, 4), (2, 3), (5, 6))
((1, 4), (2, 5), (3, 6))
((1, 4), (2, 6), (3, 5))
((1, 5), (2, 3), (4, 6))
((1, 5), (2, 4), (3, 6))
((1, 5), (2, 6), (3, 4))
((1, 6), (2, 3), (4, 5))
((1, 6), (2, 4), (3, 5))
((1, 6), (2, 5), (3, 4)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-13T09:54:51.987

我终于自己搞定了（pillmuncher 的回答确实让我朝着正确的方向轻推，组功能完全是他的）：

```
def group(iterable, n=2):
    return zip(*([iter(iterable)] * n))

def set_partition(iterable, n=2):
    set_partitions = set()

    for permutation in itertools.permutations(iterable):
        grouped = group(list(permutation), n)
        sorted_group = tuple(sorted([tuple(sorted(partition)) for partition in grouped]))
        set_partitions.add(sorted_group)

    return set_partitions

partitions = set_partition([1,2,3,4], 2)
for part in partitions:
    print(part) 
```

这打印：

```
((1, 4), (2, 3))
((1, 3), (2, 4))
((1, 2), (3, 4)) 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-12T23:47:34.890

试试这个：

```
def function(list):
    combinations = []
    for i in list:
        for i2 in list:
            if not [i2, i] in combinations:
                 combinations.append([i, i2])
    return combinations 
```

这将返回所有可能的组合。

希望这可以帮助！

# python - 在我的代码中使用 python 单词“type”是否安全？

> ID：10568087
> 
> 赞同：46
> 
> 时间：2012-05-12T23:08:15.417
> 
> 标签：python, python-2.7, reserved-words

我可以`type`在自己的代码中使用这个词还是保留它？我的函数头：

```
def get(
    self,
    region='Delhi',
    city='Delhi',
    category='Apartments',
    type='For sale',
    limit=60,
    PAGESIZE=5,
    year=2012,
    month=1,
    day=1,
    next_page=None,
    threetapspage=0,
): 
```

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2012-05-12T23:12:27.897

`type`用作函数的关键字参数将掩盖函数范围内的内置函数[“类型” 。](http://docs.python.org/library/functions.html#type)因此，虽然这样做不会引发 a `SyntaxError`，但它不被认为是好的做法，我会避免这样做。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-05-12T23:12:21.530

两者都不。它不是保留字（可以在[http://docs.python.org/reference/lexical_analysis.html#keywords](http://docs.python.org/reference/lexical_analysis.html#keywords)找到它的列表），但隐藏任何内置命令通常是个坏主意。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2019-11-27T17:50:21.393

虽然其他人指出阴影 python 内置函数是一种不好的形式，但只有将函数或函数参数命名为时才会出现这种情况`type`，但是 -

应该注意的`type`是，如果您将类属性命名为`type`.

即使在引用您的类属性时，它也总是以类实例`self`或自定义实例变量为前缀 - 并且内置的 python 不会受到阻碍。

例如：

# 好的：

```
>>> class SomeClass():
...     type = 'foobar'
...
...     def someFunction(self):
...         return self.type 
```

# 不行：

```
>>> def type(): # Overrides python built-in in global scope
...     pass
...
>>> def foobar(type):
...     return type # Overrides python built-in within func 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-12-24T09:21:06.053

这是一个十多年前的问题，为了安全起见，我建议使用`kind`而不是`type`作为论点。

很长一段时间，我一直在考虑为所有保留或构建的重命名建议，但看到你的问题让我终于做到了。

请检查[python-keyword-aliases.md](https://github.com/pycontribs/meta/blob/master/doc/python-keyword-aliases.md)并随时向该列表提出新条目。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-07-05T14:42:31.947

`type`绝对应该考虑保留字。虽然将这个词用于数据库字段可能很诱人，但请考虑这`type()`是最重要的调试/测试功能之一，因为它告诉您`class`对象的类型。

```
$ python

>>> x = 5
>>> s = "rockets"
>>> y = [1,2,3] 

>>> print(type(x)) 
class 'int'

>>> print(type(s))
class 'str'

>>> print(type(y)) 
class 'list' 
```

地图集将被归类为一类书籍，但请考虑使用“类别”一词。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-07-24T15:50:47.857

一个带有阴影的内置变量的明确骗局，例如`type`and `id`：如果您碰巧复制/粘贴了覆盖阴影的代码，`id`然后您将变量的所有实例替换为其他内容，但*忘记重命名一个实例*，因此您仍然使用`id`悬空, 代码在语法上仍然有效，并且 linter 很可能甚至找不到错误，但是当您运行代码时，您会得到非常奇怪的结果，因为`id`它不会像您预期的那样是字符串或数字。这将是内置函数`id`！

这使我严重绊倒了几次。

# windows-phone-7 - 自定义类中的 HttpWebRequest

> ID：10568088
> 
> 赞同：1
> 
> 时间：2012-05-12T23:08:15.730
> 
> 标签：windows-phone-7, c#-4.0, httpwebrequest

我正在尝试为 windows phone 7 mango 制作一个应用程序，以解析网站的内容。我设法编写了所有代码，但它就像一个战区；）。当我试图以更好的方式重新排列代码时，我开始面临一个非常奇怪的问题。

问题是当我在我的项目中创建了一个名为“MedinetMySchedule”的自定义类并使用断点单步执行该类时。我发现应用程序会通过第一个方法 getrequest() 然后返回主页执行几个步骤，然后返回到第二个方法 GetRequestStreamCallback()。这个跳转到主页给我留下了一个值为 null 的字符串来解析。然后它跳回到第三个方法ReadWebRequestCallback()。当调试结束时，最后一次跳转没有给我任何重要的东西，我在电话模拟器上什么也没有。MedinetMySchedule 类具有以下代码：-

```
namespace WindowsPhonePanoramaApplication1
{
    public class MedinetMySchedule
    {

        //Medinet user url
        public string url { get; set; }
        public String myresponse;
        public void getrequest()
        {
            HttpWebRequest request = HttpWebRequest.CreateHttp(url);
            request.Method = "POST";
            request.ContentType = "application/x-www-form-urlencoded";
            request.BeginGetRequestStream(GetRequestStreamCallback, request);
        } 

        private void GetRequestStreamCallback(IAsyncResult asynchronousResult)
        {
            HttpWebRequest request = (HttpWebRequest)asynchronousResult.AsyncState;
            using (Stream postStream = request.EndGetRequestStream(asynchronousResult))
            {
                string postData = string.Format("username={0}&password={1}&customer=******&doLogin=Logga+in&language=se", "*****", "******");

                // Convert the string into a byte array.
                byte[] data = Encoding.UTF8.GetBytes(postData);

                // Write to the request stream.
                postStream.Write(data, 0, data.Length);
                postStream.Close();
            }

            //Initiating get response
            request.BeginGetResponse(ReadWebRequestCallBack, request);

        }

        private void ReadWebRequestCallBack(IAsyncResult asynchronousResult)
        {
            HttpWebRequest request = (HttpWebRequest)asynchronousResult.AsyncState;
            WebResponse myResponse = (WebResponse)request.EndGetResponse(asynchronousResult);
                Stream encodingStream = myResponse.GetResponseStream();
                Encoding encode = Encoding.GetEncoding("iso-8859-1");
                using (StreamReader httpwebStreamReader = new StreamReader(encodingStream, encode))
                {
                    myresponse= httpwebStreamReader.ReadToEnd();
                }
                myResponse.Close();
        }
    }
 } 
```

这是调用 getrequest() 并解析内容的代码：-

```
 MedinetMySchedule mittschema = new MedinetMySchedule();
        mittschema.url = "https://medinet.se/cgi-bin/doctor.pl?action=login&customer=saskir&language=se";
        mittschema.getrequest();
        Dispatcher.BeginInvoke(() => parseResults(mittschema.myresponse));
        private void parseResults(string myresponse)
    {
        if (string.IsNullOrEmpty(myresponse))
        {
            return;
        }

        //Initiating a listbox and add item to it
        List<MediNetScheme> medinetScheme = new List<MediNetScheme>();
        //Using HtmlAgilityPack to parse the HTMLcode from the response
        HtmlDocument htdoc = new HtmlDocument();
        htdoc.LoadHtml(myresponse);
        foreach (HtmlNode table in htdoc.DocumentNode.SelectNodes("//table[@class='list-medium']/tbody[1]/tr[@class]"))
        {
            //Removing ChildNode
            table.ChildNodes.RemoveAt(3);
            string itemValue = table.InnerText;
            //Changing the parsed date into a DateTime
            string d;
            DateTime datum = DateTime.Parse(itemValue.Remove(11));
            d = datum.ToString("D");
            //Adding items to the listbox
            medinetScheme.Add(new MediNetScheme() { Datum = d, Sections = itemValue.Remove(0, 15) });
        }
        MediNetScheme.ItemsSource = medinetScheme;

    } 
```

任何想法为什么会发生这种情况以及如何纠正它？

你的/奥马尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T23:32:03.813

来回执行是因为 request.BeginGetRequestStream 是异步的。基本上，它会创建一个新线程，并与您的主代码并行执行。因此，您最终会在完成下载数据之前调用 parseResult。有很多方法可以重写你的代码，我最喜欢的是使用回调：

首先，将 getRequest 方法更改为接受回调，并将其存储：

```
 private Action Callback;

    public void getrequest(Action callback)
    {
        this.Callback = callback;
        HttpWebRequest request = HttpWebRequest.CreateHttp(url);
        request.Method = "POST";
        request.ContentType = "application/x-www-form-urlencoded";
        request.BeginGetRequestStream(GetRequestStreamCallback, request);
    } 
```

然后，在 ReadWebRequestCallback 结束时，调用此回调：

```
 private void ReadWebRequestCallBack(IAsyncResult asynchronousResult)
    {
        HttpWebRequest request = (HttpWebRequest)asynchronousResult.AsyncState;
        WebResponse myResponse = (WebResponse)request.EndGetResponse(asynchronousResult);
            Stream encodingStream = myResponse.GetResponseStream();
            Encoding encode = Encoding.GetEncoding("iso-8859-1");
            using (StreamReader httpwebStreamReader = new StreamReader(encodingStream, encode))
            {
                myresponse= httpwebStreamReader.ReadToEnd();
            }
            myResponse.Close();

        this.Callback();
    } 
```

最后，从主页调用 getrequest 方法并告诉它使用 parseResults 作为回调：

```
Action callback = () => Dispatcher.BeginInvoke(() => parseResults(mittschema.myresponse));
mittschema.getrequest(callback); 
```

# android - Android 如何将数组内容显示到textview？

> ID：10568095
> 
> 赞同：-4
> 
> 时间：2012-05-12T23:09:23.433
> 
> 标签：android, textview

如何循环数组的内容并在文本视图上逐行显示

爪哇代码

```
package com.stuff;

import android.app.Activity;
import android.os.Bundle;
import android.provider.UserDictionary;
import android.text.Spannable;
import android.text.SpannableStringBuilder;
import android.text.style.ClickableSpan;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;
import android.widget.ProgressBar;
import android.widget.TextView;

public class ScrumActivity extends Activity 
{
    TextView textout;
    EditText inputBox;
    Button okButton;
    ProgressBar progressBar;
    Scrumer scrumbler = new Scrumer();
    StringBuilder sb = new StringBuilder();

    @Override
    public void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        //Get elements from XML to use in application
        textout = (TextView) findViewById(R.id.textView1);
        inputBox = (EditText) findViewById(R.id.inputBox);
        okButton = (Button) findViewById(R.id.button1);
        progressBar = (ProgressBar) findViewById(R.id.progressBar1);
        //progressBar.setVisibility(View.VISIBLE);

        SpannableStringBuilder sb = new SpannableStringBuilder();
        String regularText = "This text is ";
        String clickableText = "clickable";
        sb.append(regularText);
        sb.append(clickableText);
        sb.setSpan(new ClickableSpan(), sb.length()-clickableText.length(), sb.length(), Spannable.SPAN_EXCLUSIVE_EXCLUSIVE);
        //tv.setText(sb);

        //setting a listener for the button to be clicked
        okButton.setOnClickListener(new View.OnClickListener() 
        {
            @Override
            public void onClick(View v) 
            {
                //textout.setText(inputBox.getText().toString());
                scrumer.jumble(inputBox.getText().toString());

                for(String s : scrumbler.getMatchArray())
                    sb.append(s+"\n");

                textout.setText("ok");

                System.out.print(sb.toString());
            }
        });     
    }    
} 
```

这是我的 main.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:gravity="center_horizontal"
    android:orientation="vertical" >

    <EditText
        android:id="@+id/inputBox"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:ems="10" >
        <requestFocus />
    </EditText>

    <Button
        android:id="@+id/button1"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="Search" />

    <TextView
        android:id="@+id/textView1"
        android:layout_width="184dp"
        android:layout_height="wrap_content"/>

    <ProgressBar
        android:id="@+id/progressBar1"
        style="?android:attr/progressBarStyleLarge"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" />

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-12T23:15:35.650

```
StringBuilder builder = new StringBuilder();
String[] arr = {"These","are","some","words"};
for (String s : arr){
  builder.append(s).append(" ");
textview.setText(builder.toString()); 
```

将放入`These are some words`您的 TextView。如果要在每个字符串后换行，请使用`builder.append(s).append("\n");`

# css - 修改 twitter 引导导航栏

> ID：10568103
> 
> 赞同：22
> 
> 时间：2012-05-12T23:10:20.453
> 
> 标签：css, ruby-on-rails, twitter-bootstrap

我一直在尝试修改 twitter 引导导航栏，目前所有链接都向左对齐，而我真正想要的是让它们居中。

在另一篇文章中，我读到你使用这个

```
.tabs, .pills {
  margin: 0 auto;
  padding: 0;
  width: 100px;
} 
```

但这对我不起作用

我需要在 css 中进行什么更改才能实现这一点，我知道我将修改后的 css 放入引导程序并覆盖。

任何帮助表示赞赏

这是我的标记

布局/应用

```
<div class="navbar navbar-fixed-top">
  <div class="navbar-inner">
    <div class="container-fluid">
      <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
      </a>

    <a class="brand">Newbridges</a>  

  <% if user_signed_in? %>
    <div class="nav-collapse">
      <ul class="nav ">
      <%= render "shared/navbarlogin" %>
    </div>

    <% else%>
    <div class="nav-collapse">
      <ul class="nav">

      <%= render "shared/navbar" %>
    </div>
    <% end %> 
```

我也试过这个

```
.nav > li {
  float: none;
  display: inline-block;
  *display: inline;
  /* ie7 fix */
  zoom: 1;
  /* hasLayout ie7 trigger */
}
.nav {
  text-align: center;
} 
```

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-05-12T23:53:26.933

您可以通过将菜单项设置为`display:inline-block`而不是`float:left`像这样来居中导航菜单：

```
.navbar .nav,
.navbar .nav > li {
    float:none;
    display:inline-block;
    *display:inline; /* ie7 fix */
    *zoom:1; /* hasLayout ie7 trigger */
    vertical-align: top;
}

 .navbar-inner {
    text-align:center;
} 
```

尽管我建议您创建自己的类来定位您希望居中的导航栏菜单，但这样您就不会打扰引导程序默认值，也不会弄乱您页面中可能拥有的其他导航部分。你可以这样做：

^(注意导航栏容器中的 .center 类)

```
<div class="navbar navbar-fixed-top center">
     <div class="navbar-inner">
        ....
     </div>
</div> 
```

然后你可以`.center`像这样定位类：

```
.center.navbar .nav,
.center.navbar .nav > li {
    float:none;
    display:inline-block;
    *display:inline; /* ie7 fix */
    *zoom:1; /* hasLayout ie7 trigger */
    vertical-align: top;
}

.center .navbar-inner {
    text-align:center;
} 
```

演示：http: [//jsfiddle.net/C7LWm/show/](http://jsfiddle.net/C7LWm/show/)

**编辑**：忘记将子菜单项重新对齐到左侧，这是修复：

**CSS**

```
.center .dropdown-menu {
    text-align: left;
} 
```

演示：http: [//jsfiddle.net/C7LWm/1/show/](http://jsfiddle.net/C7LWm/1/show/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-24T00:31:02.607

我知道这是一篇旧帖子，但我在谷歌搜索中也注意到了几次。我想直接设置记录，以便在 twitter bootstrap 中将导航栏居中，因为当前接受的方法没有错，但不需要，因为 twitter bootstrap 支持这一点。

实际上有一种更好的方法可以做到这一点，然后手动修改它。这将通过使用 twitter bootstrap 中已有的内容来减少代码。

```
<div class="navbar navbar-fixed-top navbar-inverse">
    <div class="navbar-inner">
        <div class="container">
            <a class="brand" href="#">RIZEN</a>
            <ul class="nav">
                <li class="active"><a href="/">Home</a></li>
                <li><a href="#">Events</a></li>
                <li><a href="#">Links</a></li>
                <li><a href="#">Gallery</a></li>
                <li><a href="#">Contact</a></li>
                <li><a href="#">Forums</a></li>
            </ul>
        </div>
    </div>
</div> 
```

**分解**
第一行非常简单，因为我们正在创建导航栏，将其设置在视口上的固定位置到顶部，然后通过反转颜色主题将白色交换为黑色。

接下来，我们将分配 navbar-inner，它或多或少地说，如果可能的话，设置一个最小高度，这是实际颜色样式的来源，而不是上面的行。

这是**重要**的一行，因为我们正在删除导航栏的流体布局并只使用一个容器。这设置了一个固定的带边距，使内部内容与屏幕中心对齐。这是通过设置自动边距和设置宽度来完成的。

此方法将执行您想要的操作，因为您实际上通过不添加额外代码并通过 twitter bootstrap 正确使用脚手架并且没有额外的代码膨胀来在标头请求中保存 kb。我在自己的项目中使用过这种方法，并在我当前的项目中继续使用它。修改 TBS(twitter bootstrap) 的危险是你失去了代码的一致性，如果将来你想改变一些东西，你必须记下你所做的改变，否则事情可能不会按预期工作。

希望这可以帮助。此外，如果您想要一个工作示例，只需查看 twitter bootstrap 的主页，因为它就是这样。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-24T14:59:47.410

啊，另外，如果您希望两边的空格（“项目名称”之前和“下拉菜单”之后）是对称的，请添加以下内容：

```
.navbar .nav, .navbar .nav > ul
{
    float: right
} 
```

此外，似乎使用以下内容（从 Bootstrap v2.0.4 开始）并没有使导航栏居中：

```
<div class="navbar navbar-fixed-top center">
      <div class="navbar-inner">
        <div class="container-fluid">
        .
        .
        .
        </div>
      </div>
</div> 
```

您需要更改为

```
<div class="navbar navbar-fixed-top center">
      <div class="navbar-inner">
        <div class="container">
        .
        .
        .
        </div>
      </div>
</div> 
```

（摘自 Andres llich 提供的样本；只是他错过了变化）

现在它对我有用......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-01-27T17:15:27.770

上面的居中 css 仅适用于未折叠的导航栏。

但是，当导航栏折叠时，这并不理想。默认情况下，每个折叠的导航栏项目都在自己的行上，就像下拉菜单一样。但是上面的 css 试图将所有折叠的项目推到同一行，这不太理想。

我使用了这个在媒体查询中包装居中 css 的小修复，因此它仅在非折叠导航栏上触发：

```
@media (min-width: 768px) {
    .center.navbar .nav,
    .center.navbar .nav > li {
        float:none;
        display:inline-block;
        *display:inline; /* ie7 fix */
        *zoom:1; /* hasLayout ie7 trigger */
        vertical-align: top;
    }
    .center .navbar-inner {
        text-align:center;
    }
} 
```

（用引导程序 3.1.1 测试）

# java - 纹理无法正确拉伸。为什么会这样？

> ID：10568106
> 
> 赞同：4
> 
> 时间：2012-05-12T23:10:49.313
> 
> 标签：java, opengl, graphics, textures, lwjgl

我正在使用 LWJGL 和 Slick 框架将纹理加载到我的 OpenGL 应用程序中。

我正在使用这张图片：![日本国旗，用于纹理](../Images/95d547d3bd498d5e251c9d70a8b9b6a9.png)

此代码用于导入和利用纹理：

```
 flagTexture = TextureLoader.getTexture("PNG", ResourceLoader.getResourceAsStream("japan.png")); 
```

……

```
 flagTexture.bind();

    GL11.glColor3f(1.0f, 1.0f, 1.0f);
    GL11.glPushMatrix();

    GL11.glTranslatef(0.0f, 0.0f, -10.0f);

    GL11.glBegin(GL11.GL_QUADS);
    GL11.glTexCoord2f(0.0f, 0.0f);
    GL11.glVertex2f(0.0f, 0.0f);
    GL11.glTexCoord2f(1.0f, 0.0f);
    GL11.glVertex2f(2.5f, 0.0f);
    GL11.glTexCoord2f(1.0f, 1.0f);
    GL11.glVertex2f(2.5f, 2.5f);
    GL11.glTexCoord2f(0.0f, 1.0f);
    GL11.glVertex2f(0.0f, 2.5f);
    GL11.glEnd();

    GL11.glPopMatrix(); 
```

但最终结果变成了这样： ![纹理不拉伸到顶点参数](../Images/22429511d08854ed5efdeeeffe24cb9e.png)

我没有使用任何特殊设置，例如 GL_REPEAT 或类似的设置。这是怎么回事？如何使纹理填充给定的顶点？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-12T23:16:15.447

看起来纹理正在填充到最接近的 2 次方。这里有两种解决方案：

1.  将纹理拉伸到最接近的 2 次方。
2.  计算纹理大小与最接近的 2 次幂之间的差异，并将纹理坐标从 更改`1.0f`为`textureWidth/nearestPowerOfTwoWidth`和`textureHeight/nearestPowerOfTwoHeight`。

可能还有一些特定的 LWJGL 方法允许非二次幂纹理，请查看。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T05:56:24.493

如果需要支持非二次幂纹理，可以修改加载方式。如果您使用 Slick2D，除了实现“自己的”纹理类之外别无他法（您可以在此处获得一些示例：[Texture.java](http://www.lwjgl.org/wiki/index.php?title=Examples%3aSpaceInvaders_Texture)和[TextureLoader.java](http://www.lwjgl.org/wiki/index.php?title=Examples%3aSpaceInvaders_TextureLoader) TextureLoader 类包含一个方法“get2Fold”，它用于计算大于纹理宽度/高度的二的下一个幂。因此，如果您想使用非二次方大小的纹理，只需将此方法更改为简单地返回 fold；（=输入），所以程序“认为”下一个二的幂是图像的大小，在很多情况下它不是，但如果硬件支持它（大多数支持），这不应该成为问题。更“抽象”的方法是更改​​此行： GL11.glTexImage2D(target, 0, dstPixelFormat, get2Fold(bufferedImage.getWidth()), get2Fold(bufferedImage.getHeight()), 0, srcPixelFormat, GL11.GL_UNSIGNED_BYTE, textureBuffer ); 这里，第 4 个参数 = 纹理的宽度，第 5 个参数 = 纹理的高度。如果将这些设置为图像的宽度/高度，它将起作用。由于此方法与以前的方法基本相同，因此两者都存在相同的问题。如前所述，这会减慢您的图像处理速度，并且可能不受支持。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-12T23:15:14.057

希望这个链接会有所帮助

[http://www.lwjgl.org/wiki/index.php?title=Slick-Util_Library__-_Part_1_-_Loading_Images_for_LWJGL](http://www.lwjgl.org/wiki/index.php?title=Slick-Util_Library_-_Part_1_-_Loading_Images_for_LWJGL)

看起来它与您在这里所做的非常相似。

```
GL11.glBegin(GL11.GL_QUADS);
GL11.glTexCoord2f(0,0);
GL11.glVertex2f(100,100);
GL11.glTexCoord2f(1,0);
GL11.glVertex2f(100+texture.getTextureWidth(),100);
GL11.glTexCoord2f(1,1);
GL11.glVertex2f(100+texture.getTextureWidth(),100+texture.getTextureHeight());
GL11.glTexCoord2f(0,1);
GL11.glVertex2f(100,100+texture.getTextureHeight());
GL11.glEnd(); 
```

# jquery - Jquery 不能在 Rails 3.2 应用程序中工作？

> ID：10568109
> 
> 赞同：-1
> 
> 时间：2012-05-12T23:11:34.440
> 
> 标签：jquery, ruby-on-rails, ruby-on-rails-3

试图让一个简单的显示/隐藏..它在 js fiddle 中工作只是不在我的应用程序中..

在我看来/user_steps/interests.html.erb

```
<label class="checkbox">
 <input id="user_holiday_ids_" name="user[holiday_ids][]" type="checkbox" value="2" />
 Valentine Day
</label>
<div style="display:none;">
    Whatever you have to capture here<input type="text" id="foo" />
</div>
</br>
<label class="checkbox">
 <input id="user_holiday_ids_" name="user[holiday_ids][]" type="checkbox" value="3" />
 Easter
</label>
<div style="display:none;">
    Whatever you have to capture here<input type="text" id="foo1" />
</div>
</br>
<label class="checkbox">
 <input id="user_holiday_ids_" name="user[holiday_ids][]" type="checkbox" value="4" />
 Mother Day
</label>
<div style="display:none;">
    Whatever you have to capture here<input type="text" id="foo2" />
</div>
</br>
<label class="checkbox">
  <input id="user_holiday_ids_" name="user[holiday_ids][]" type="checkbox" value="5" />
  Father's Day
</label>
<div style="display:none;">
    Whatever you have to capture here<input type="text" id="foo3" />
</div>
</br>
<label class="checkbox">
 <input id="user_holiday_ids_" name="user[holiday_ids][]" type="checkbox" value="6" />
 Halloween
</label>
<div style="display:none;">
    Whatever you have to capture here<input type="text" id="foo4" />
</div>
</br>
<label class="checkbox">
 <input id="user_holiday_ids_" name="user[holiday_ids][]" type="checkbox" value="7" />
 Thanksgiving
</label>
</br>
<label class="checkbox">
  <input id="user_holiday_ids_" name="user[holiday_ids][]" type="checkbox" value="8" />
  Christmas
</label> 
```

在我的资产/javascripts/user_steps.js 中：

```
$(".checkbox").click(function(){
   $(this).next("div").toggle();  
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T23:18:18.517

不要重复 DOM 元素的 ID。ID 在页面上应该是唯一的，如果不是，javascript 选择器可能会变得不可靠。

# c# - ReSharper 代码清理

> ID：10568112
> 
> 赞同：6
> 
> 时间：2012-05-12T23:12:13.073
> 
> 标签：c#, resharper

有没有办法告诉 ReSharper在类型（' -ally'）上使用字段或方法时使用`String`和`Int64`类型名称，但是对于变量初始化？`static``string``long`

例子：

```
string name = "@user";
// but
int compResult = String.Compare(a, b, ...);

long x = 0;
// but
long x = Int64.Parse(s); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-13T00:45:59.677

目前没有 ReSharper 选项`String`比`string`.

[最近在他们的社区委员会上提出了](http://devnet.jetbrains.com/thread/435373;jsessionid=3B6A13F00D38D3EA5FD0334304FE44B4)同样的问题。

# java - DefaultHttpClient 超时设置为 10 秒，但只需 1 秒即可超时

> ID：10568113
> 
> 赞同：2
> 
> 时间：2012-05-12T23:12:16.337
> 
> 标签：java, android, json, http

我有这个静态函数，它基本上与网页建立连接，连同它一起发送发布数据并返回接收到的响应（JSON 对象）

我遇到的问题是，无论我设置什么超时，当它只尝试 1 秒时，它通常会给出超时，超时为 6 秒，这是不应该发生的。

```
public static String makeRequest(String path, String info) throws Exception 
{
  HttpParams httpParameters = new BasicHttpParams();
  int timeoutConnection = 6000;
  HttpConnectionParams.setConnectionTimeout(httpParameters, timeoutConnection);
  int timeoutSocket = 6000;
  HttpConnectionParams.setSoTimeout(httpParameters, timeoutSocket);

  DefaultHttpClient httpclient = new DefaultHttpClient(httpParameters);
  HttpPost httpost = new HttpPost(path);
  StringEntity jsonobj = new StringEntity(info);
  httpost.setEntity(jsonobj);
  httpost.setHeader("Accept", "application/json");
  httpost.setHeader("Content-type", "application/json");
  ResponseHandler responseHandler = new BasicResponseHandler();

  String response = httpclient.execute(httpost, responseHandler);
  return response; 
```

现在我已经看到了一些这样的问题，但我找不到可以帮助我的答案。有人说是因为它不是线程安全的，但是，我不会同时进行多个调用，都是按顺序完成的。该问题甚至发生在第一次尝试时，由于这个原因不应该发生，因为还没有多个连接/httpposts，更不用说来自不同的线程了。

但是最近确实发生了很多，有时几天都没有发生，或者在那些日子里几乎没有发生。

我尝试查看AndroidHttpClient，但它似乎不支持HttpPost，所以这也没有用（或者我错了？）

路径和信息的数据都是正确的，测试它。我的服务器也没有问题。

有人说它可以是您的网络，但我今天在 3 个 wifi 网络上进行了测试。奇怪的是，在我的移动提供商的互联网连接上，它没有或几乎没有发生。

我在一个答案中读到这可能是因为 ISP 更改了标头信息。我尝试为用户代理使用不同的值，但这也不起作用。

我希望有人能提供帮助，为此我将不胜感激，因为这种情况不断发生让我感到非常沮丧。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T01:48:28.063

如果 TCP 在超时期限之前检测到连接拒绝（即传入的 RST），则表示失败。在这种情况下等待超时是没有意义的，并且可以预期重试只会以同样的方式再次失败。超时适用于没有响应的情况。

# eclipse - 在逆时针严格paredit模式下删除多余的括号

> ID：10568117
> 
> 赞同：5
> 
> 时间：2012-05-12T23:12:50.393
> 
> 标签：eclipse, clojure, paredit, counterclockwise

我确信这个问题的答案是显而易见的，但我已经阅读了逆时针文档并在互联网上搜索并无法找到它。在逆时针编辑 Clojure 文件时，我经常不小心添加了额外的括号、括号等，并且无法弄清楚如何在不退出严格的 paredit 模式的情况下删除它们。例如假设我有以下功能：

```
(defn (add-x-y-z)
  [x y z]
  (+ x y z)) 
```

我不小心在函数名周围加上了括号，据我所知，除了删除函数名、删除多余的括号、再次输入函数名或暂时退出之外，没有办法删除它们严格的paredit模式。还有其他选择吗？无论出于何种原因，我经常遇到这个问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-13T09:07:00.383

我相信你需要“提高选择”，在 Mac 上是 Option-R

仅供参考，您可以在首选项窗口中查看所有键绑定，但在 Eclipse 中可能很难找到。请参阅随附的屏幕截图并注意我已按 'When' = 'Editing Clojure Source' 排序

![在此处输入图像描述](../Images/276c64618b79f89632123a03d9096409.png)

# javascript - 识别用户 vlc 插件安装？

> ID：10568119
> 
> 赞同：3
> 
> 时间：2012-05-12T23:12:54.487
> 
> 标签：javascript, web, rtsp, vlc

我使用 embed vlc 插件在我的网页上演示 rtsp 视频流。

我以这种方式将它包含到我的页面正文中：

```
<embed type="application/x-vlc-plugin" name="VLC" autoplay="yes"
loop="no" volume="100" width="800" height="600" target="rtsp://url.to.stream"> 
```

但如果用户没有安装 vlc 播放器插件，则没有图像，并且不提供安装链接。我如何识别用户是否有插件（可能通过 JavaScript），或者是否可以添加`<embed>`元素的更多属性，它会自动提供插件安装？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T23:17:19.737

一种选择是使用**VLC Media Player Plugin Detector**。

[http://www.pinlady.net/PluginDetect/VLC/](http://www.pinlady.net/PluginDetect/VLC/)

在大多数情况下，它工作正常，但有一些你应该考虑的缺点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T23:15:03.917

您可以使用以下功能：

```
isVLCInstalled: function() {
    var name = "VLC";
    if (navigator.plugins && (navigator.plugins.length > 0)) {
        for(var i=0;i<navigator.plugins.length;++i) 
            if (navigator.plugins[i].name.indexOf(name) != -1) 
              return true;
    }
    else {
        try {
            new ActiveXObject("VideoLAN.VLCPlugin.2");
            return true;
        } catch (err) {}
    }
    return false;

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-24T08:31:02.877

我第一次使用它来访问 Vlc 对象：

```
// First get Vlc object (using getElementById or jquery $('#vlc') etc.)
// Now you test if Vlc web plugin is available checking a method or a property of Vlc object
try {
    vlc.playlist.stop();
    // Or you can try another method or properties for example vlc.playlist.clear()
} catch (error) {
    console.log("Vlc Web Plugin is not available");
    // Or put your code when Vlc web plugin is not available
} 
```

# spring-mvc - @ScriptAssert 路径映射

> ID：10568120
> 
> 赞同：4
> 
> 时间：2012-05-12T23:13:00.540
> 
> 标签：spring-mvc, validation, hibernate-validator

我已经看到 @ScriptAssert 用于重复验证。例如，

```
@ScriptAssert(
  lang = "javascript",
  script = "_this.confirmPassword.equals(_this.password)",
  message = "account.password.mismatch.message") 
```

我知道在我的 jsp 文件中，我可以在全局范围内收到此错误消息以及所有其他错误，如下所示：

```
<form:errors path="*"> 
```

但是，我想收到这个特定的密码重复错误消息并在密码字段中显示它，但是，我不知道我可以通过什么路径名检索这个错误？例如，要通过用户名字段接收用户名错误，jsp 如下所示：

```
<div>
  <spring:message code="newUserRegistration.label.username" />
  <form:input path="username" cssClass="short"
  cssErrorClass="short error" />
</div>  

<form:errors path="username">
    <div><form:errors path="username" htmlEscape="false" /></div>
</form:errors> 
```

...但是我们用什么名称检索@ScriptAssert 检查的密码错误，尤其是当@ScriptAssert.List 中有多个@ScriptAssert 时？

...它使用用户名作为路径名。我检查了其他论坛等以找到@ScriptAssert 的路径名或@ScriptAssert.List 中每个@ScriptAssert 的路径名，但找不到任何解决方案。任何帮助将不胜感激。

亲切的问候，杰米

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T09:52:09.840

尝试完全丢失该`path`属性，如下所示：

```
<form:errors htmlEscape="false" /> 
```

# asp.net - 如何在 Asp.net 图表中隐藏白色边框

> ID：10568121
> 
> 赞同：0
> 
> 时间：2012-05-12T23:13:11.247
> 
> 标签：asp.net, charts

如何使用 ASP.NET 图表控件隐藏出现在图表周围的白色边框？

```
<asp:Chart ID="chtGender" runat="server" BorderSkin-BorderColor="Green" Width="300" Height="350">
 <Series>
 <asp:Series ChartType="Pie"  Palette="EarthTones" ChartArea="MainChartArea">
 </asp:Series>
 </Series>
  <ChartAreas>
   <asp:ChartArea Name="MainChartArea"  BackColor ="Black" BorderColor = "Black"  BorderWidth= "0"  Area3DStyle-Enable3D="true">
   </asp:ChartArea>
  </ChartAreas>
</asp:Chart> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T11:05:22.370

我有同样的问题，找不到合适的解决方案。我这样做的方法是将“chartarea”上的边框宽度设置为 20，这会覆盖我的饼图周围的白色边框。例如：-

```
<asp:Chart id="myPieChart" runat="server">
    <series>
        <asp:Series Name="Series1" ChartType="Pie">
            <Points>
                <asp:DataPoint YValues="45" />
                <asp:DataPoint YValues="34" />
                <asp:DataPoint YValues="67" />
            </Points>
        </asp:Series>
    </series>
    <chartareas>
        <asp:ChartArea Name="ChartArea1" 
             BackColor="#E6F1FA" 
             BorderDashStyle="Solid" 
             BorderWidth="20" 
             BorderColor="#E6F1FA">
        </asp:ChartArea>
    </chartareas>
</asp:Chart> 
```

# android - Android apk 构建良好，但运行时显示 ClassDefNotFound 错误

> ID：10568127
> 
> 赞同：0
> 
> 时间：2012-05-12T23:13:39.017
> 
> 标签：android, noclassdeffounderror

我正在使用今天早上更新到最新的 Netbeans 7.1.1 和 nbandroid 插件。当我进行构建时，一切都构建得很好。我在运行 Android 2.3.3 的设备上安装了 apk。我正在使用 sdk 工具 r19。

当我尝试启动它时，我在 logcat 中看到 java.lang.NoClassDefFoundError。

我的 ant 构建脚本将 apk 依赖的所有库复制到其 libs 目录并构建它。出于某种原因，某些类没有被打包到 apk 中。

这是一个已知问题吗？有解决方法吗？

我在项目目录下创建 libs 文件夹（而不是 lib 文件夹）时看到了 eclipse 的一些解决方法。我将 libs 属性**jar.libs.dir**配置为指向项目外部的文件夹。这一切似乎以前都有效，而不是现在。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T00:08:00.990

1.  删除`jar.libs.dir`您描述的属性。
2.  将 JAR 文件移动到`libs`目录中。

这应该会给你预期的结果。

# javascript - 如何添加/减去来自 php 变量的数字

> ID：10568132
> 
> 赞同：0
> 
> 时间：2012-05-12T23:14:43.560
> 
> 标签：javascript, jquery, forms

我想做的是根据选择的选项更新总价。初始价格金额来自会话变量。我已经将变量传递给 Javascript，但在使用表单时我似乎无法从该数字中添加/减去。

我错过了什么？

谢谢您的帮助。

```
 <script>
    $(document).ready(function()
    {   

var phonePrice = "<?php echo $q2; ?>";
var total = phonePrice;

function calcTotal()
{
    $("input:checked").each(function()
    {
        //This happens for each checked input field
        var value = $(this).attr("value");
        total += parseInt(value); 
    });
}

//This happens when the page loads
calcTotal();    
$("form").before('<p class="total">Total: <strong>' + total + '</strong></p>');
$(":submit").before('<p class="total">Total: <strong>' + total + '</strong></p>');

$("input:checkbox, input:radio").click(function()
{
    total = phonePrice;
    calcTotal();
    $("p.total").html("Total: <strong>" + total + "</strong>");
});
    });
    </script> 
```

表格看起来像这样

```
 <form action="" method="post">
<fieldset id="delivery_speed">
    <legend>Options
    </legend><ol>
        <li>
            <input type="radio" name="speed" id="speed_1day" value="49" />
            <label for="speed_1day">Option 1 ($49)</label>
        </li>
        <li>
            <input type="radio" name="speed" id="speed_3days" value="0" checked />
            <label for="speed_3days">Option 2 (no charge)</label>
        </li>
        <li>
            <input type="radio" name="speed" id="speed_5days" value="-39" />
            <label for="speed_5days">Option 3 (-$39)</label>
        </li>
    </ol>
</fieldset> 
<fieldset id="browser_support">
    <legend>Additional Choices</legend>
    <p>
        <input type="checkbox" name="browser" id="browser" value="100" />
        <label for="browser">Checkbox 1 ($100)</label>
    </p>
</fieldset>
<p><input id="submit" type="submit" value="Continue to Checkout &gt;&gt;"></p>
    </form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T23:19:57.767

```
var phonePrice = "<?php echo $q2; ?>"; 
```

假设 php 代码在渲染时会吐出这样的内容：

```
var phonePrice = "99.99"; 
```

引号使其成为字符串而不是数字。删除引号，您将获得一个可以正确添加的数字。

```
var phonePrice = <?php echo $q2; ?>; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T23:22:33.817

删除引号`phonePrice`：

```
var phonePrice = <?php echo $q2; ?>; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-12T23:22:15.270

当你这样做时，问题就来了`total += parseInt(value)`。既然你定义`phonePrice`为

```
var phonePrice = "<?php echo $q2; ?>"; 
```

它进行字符串连接但不求和。

您应该取消引用该值

```
var phonePrice = <?php echo $q2; ?>; 
```

或添加另一个类型转换：

```
var phonePrice = parseInt("<?php echo $q2; ?>", 10); 
```

# c - 我想了解如何覆盖集合 C 结构？

> ID：10568148
> 
> 赞同：0
> 
> 时间：2012-05-12T23:18:30.053
> 
> 标签：c, apache, apache-modules

在为 Apache Web 服务器构建模块时，我遇到了几个实例，其中结构的声明说它只接受和`const char*`声明中的成员，但是我在各种模块（例如 mod_security，甚至新函数）中找到了示例表示正在将数据类型插入到这些结构中。`apr_table_t``apr_array_header_t``ap_parse_form_data``void *`

我的问题是这怎么可能？如果我尝试使用相同的方法，为什么我的 Visual Studio 编译器会抱怨？

一个很好的例子是带有 create_request 函数的 mod_security，该函数将 a 存储`void *`在`request_rec`便笺中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T23:22:44.310

指针是*可转换*的，并且每个对象指针类型都可以转换为`void*`，因为在 a 中存储任何指针`void*`都不会丢失信息。也就是说，以下是有效的：

```
struct Foo a;
struct Foo * p = &a;   // p points to a

void * q = p;          // OK, can store the value of p in q

struct Foo * r = q;    // OK too - we can go back, and r points to a

r->n = 1; 
```

因此，在 C 中习惯将指针传递为`void*`，因为知道这些指针始终可以保存*任何*其他对象指针值，并且仅在需要时将其转换回所需的类型。

`char`关于指针的最后一句话：将*任何*对象指针转换`char*`为指向字符数组的指针并实际取消引用它*并不*构成类型双关语，也不违反严格的别名规则——这只是允许您访问底层任何对象的二进制表示。

# java - 可运行对象中的此方法是否需要同步？

> ID：10568149
> 
> 赞同：5
> 
> 时间：2012-05-12T23:18:31.183
> 
> 标签：java, thread-safety, synchronized

以下方法属于实现 Runnable 的对象 A。它由对象 A 中的其他方法和 run 方法中的代码异步调用（因此，它是从其他线程调用的，周期为 5 秒）。

我最终会遇到文件创建异常吗？

如果我使方法同步...总是在对象 A 上获取锁？其中一个调用者在*run()*方法中的事实让我感到困惑：S

感谢您的投入。

```
private void saveMap(ConcurrentMap<String, String> map) {
    ObjectOutputStream obj = null;
    try {
        obj = new ObjectOutputStream(new FileOutputStream("map.txt"));
        obj.writeObject(map);

    } catch (IOException ex) {
        Logger.getLogger(MessagesFileManager.class.getName()).log(Level.SEVERE, null, ex);
    } finally {
        try {
            obj.close();
        } catch (IOException ex) {
            Logger.getLogger(MessagesFileManager.class.getName()).log(Level.SEVERE, null, ex);
        }
    }
    notifyActionListeners();
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-12T23:51:28.407

同步实例方法使用`this`对象作为锁，并防止来自不同线程的*所有同步实例方法（甚至其他）同时执行。*

要回答有关同步要求的问题，答案基本上*是肯定*的，因为您有多个线程访问同一方法，因此输出可能会发生冲突。

作为设计评论，我会使用您的`saveMap`方法`static`，因为它不访问任何字段（它是无状态的），并且更强烈地表明文件的输出*不*依赖于实例，因此文件输出可能会发生冲突更明显与其他实例。

### 编辑：

这是我建议的代码：

```
private static synchronized void saveMap(Map<String, String> map) {
    ...
} 
```

仅供参考，`static synchronized`方法使用类对象（即 MyClass.class），它是一个单例，作为锁对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T00:02:56.907

> It's called asynchronously by other method from the object `A` and by code inside the `run` method (so, it's called from other thread, with a period of 5 seconds).

Given that `saveMap` is called from multiple threads, without synchronization you cannot guarantee that two threads won't try to write to the same file concurrently. This will cause an incorrectly-formatted file when it happens.

The simplest solution is to make the method synchronized.

```
private synchronized void saveMap(ConcurrentMap<String, String> map) { ... } 
```

If the map is large enough, this may cause unresponsiveness in your program. Another option is to write to a temporary file (a new file each time it's called) and then use synchronization while swapping the new file over `map.txt` by renaming and deleting.

```
private void saveMap(ConcurrentMap<String, String> map) {
    File file = ... original code to write to a temporary file ...
    if (file != null) {
        synchronized(this) {
            ... move file over map.txt ...
        }
        notifyActionListeners();
    }
} 
```

Keep in mind that swapping two files won't be an atomic operation. Any external program or thread from the same program may catch the short time that `map.txt` doesn't exist. I was unable to find an atomic file-swap method in Java, but maybe with some searching you will.

# android - Zxing 条码扫描仪集成外部条码扫描仪应用程序

> ID：10568151
> 
> 赞同：0
> 
> 时间：2012-05-12T23:18:48.943
> 
> 标签：android, integration, barcode, qr-code, zxing

我正在尝试将 zxing 条码扫描仪集成到我的应用程序中。一切都按计划进行，只有当我单击扫描时，它才会要求我从集成或外部进行选择。谁能回避这个问题？

到项目：我没有把它作为库导入，我把所有的java代码文件都放到了项目中。这是我们的要求之一。我们不希望应用程序依赖于任何外部资源（即使它们只是 ide 内部的）

我还在没有 zxing 条码扫描仪的 android 设备上对其进行了测试。没有问任何问题。

我怎样才能通过这个问题并在内部版本中指出海峡？

这是调用它的代码：

```
button2.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            Intent intent = new Intent("com.google.zxing.client.android.SCAN");
            intent.putExtra("SCAN_MODE", "QR_CODE_MODE");
            startActivityForResult(intent, 0);
        }
    }); 
```

我也试图找到 com.google.zxing.client.android.SCAN 类但找不到。但有趣的是，它有效。

这是清单的一部分：

```
 <activity android:name="com.google.zxing.client.android.CaptureActivity"
       android:screenOrientation="landscape"
       android:configChanges="orientation|keyboardHidden"
       android:theme="@android:style/Theme"
       android:windowSoftInputMode="stateAlwaysHidden">
       <intent-filter>
          <action android:name="android.intent.action.MAIN"/>
          <category android:name="android.intent.category.DEFAULT"/>
       </intent-filter>
       <intent-filter>
          <action android:name="com.google.zxing.client.android.SCAN"/>
          <category android:name="android.intent.category.DEFAULT"/>
        </intent-filter>
    </activity> 
```

在集成代码上，我遵循了这个：

[http://damianflannery.wordpress.com/2011/06/13/integrate-zxing-barcode-scanner-into-your-android-app-natively-using-eclipse/](http://damianflannery.wordpress.com/2011/06/13/integrate-zxing-barcode-scanner-into-your-android-app-natively-using-eclipse/)

我真的不知道我做错了什么。^^

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-12T23:24:49.647

> 这是调用它的代码

您正在尝试使用 的操作开始一项活动`com.google.zxing.client.android.SCAN`。任何给定的设备都可以有任意数量的设备，包括来自标准条码扫描仪应用程序的设备。

因此，而不是：

```
Intent intent = new Intent("com.google.zxing.client.android.SCAN"); 
```

你应该使用：

```
Intent intent = new Intent(this, com.google.zxing.client.android.CaptureActivity.class); 
```

而且，由于您*不是*Barcode Scanner，因此您应该删除清单中的`<intent-filter>`元素。`CaptureActivity`

# ios - 此时不拥有的引用计数的不正确递减

> ID：10568152
> 
> 赞同：4
> 
> 时间：2012-05-12T23:18:53.720
> 
> 标签：ios, memory-management

我不明白这个，除非是因为我要释放财产而不是 ivar。有人可以阐明这个问题吗？

```
 self.dataToBeLoaded = [[NSMutableData alloc] initWithLength:10000];
    [self.dataToBeLoaded release]; 
```

警告是`Incorrect decrement of the reference count of an object that is not owned by the caller`。

该`dataToBeLoaded`属性具有与其设置器关联的保留属性。

我的理解是 alloc init 增加了保留计数，而属性分配增加了保留计数。由于我只保留一次，所以我在分配后立即释放它。

**更新——一些实验结果：**

由于我在下面的评论中指出，我收到了关于保留属性对合成设置器的作用的相互矛盾的建议，我想我会使用上面的代码做一个小实验，并通过一些日志记录进行修改：

```
NSLog(@"retain 1 = %d", [dataToBeLoaded_ retainCount]);
self.dataToBeLoaded = [[NSMutableData alloc] initWithLength:10000];
NSLog(@"retain 2 = %d", [dataToBeLoaded_ retainCount]);
[self.dataToBeLoaded release];
NSLog(@"retain 3 = %d", [dataToBeLoaded_ retainCount]); 
```

每个日志语句的结果是 0、2 和 1。

显然，不可能进入 alloc 或 init 代码来查看保留计数从 0 到 1 到 2。我可以将 NSMutableData 类子类化，但我的时间很短。

我知道很多人说你不能依赖 retainCount 属性的值，但我所拥有的似乎是一致的，我希望在示例中显示的代码的短范围内有合理的行为。所以我倾向于相信之前的建议是正确的——retain 属性是一个在 setter 中包含一个 retain 的承诺。所以在这里我有来自 alloc/init 的保留和来自对 setter 的调用的保留。因此，保留计数设置为 2。

当我运行此代码时：

```
NSMutableData *theData;
NSLog(@"retain 1 = %d", [theData retainCount]);
theData= [[NSMutableData alloc] initWithLength:10000];
NSLog(@"retain 1a = %d", [theData retainCount]);
self.dataToBeLoaded = theData;
NSLog(@"retain 2 = %d", [theData retainCount]);
[self.dataToBeLoaded release];
NSLog(@"retain 3 = %d", [theData retainCount]); 
```

每个日志语句的保留计数为 0、1、2、1。

所以我有证据表明二传手提供了一个`retain`. 这似乎更像是一个承诺而不是一个暗示，因为它实际上正在发生。

我愿意接受其他解释。我不想在这件事上傲慢自大。我只是想弄清楚正在发生的事情。我似乎警告（在这个问题的主题中）确实是虚假的，不需要担心。

另一个实验是在@property 语句中使用`assign`而不是`retain`作为属性来完成的。使用相同的代码：

```
NSMutableData *theData;
NSLog(@"retain 1 = %d", [theData retainCount]);
theData= [[NSMutableData alloc] initWithLength:10000];
NSLog(@"retain 1a = %d", [theData retainCount]);
self.dataToBeLoaded = theData;
NSLog(@"retain 2 = %d", [theData retainCount]);
[self.dataToBeLoaded release];
NSLog(@"retain 3 = %d", [theData retainCount]); 
```

每条日志的retain count是0,1,1（setter没有retain），然后报错：`message sent to deallocated instance`. 上一个版本将保留计数设置为零，这触发了释放。

**更新 2**

最后的更新——当合成的 setter 被你自己的代码覆盖时，不会再观察到 retain 属性，除非你的 setter 明确包含它。显然（这与我在其他线程中被告知的内容相矛盾）如果这是你想要的，你必须在 setter 中包含你自己的保留。虽然我这里没有测试，但你可能需要先释放旧实例，否则它会被泄露。

此自定义设置器不再具有 @propety 声明的属性：

```
- (void) setDataToBeLoaded:(NSMutableData *)dataToBeLoaded {
    dataToBeLoaded_ = dataToBeLoaded;
} 
```

这是有道理的。覆盖一个综合的设置器，你会覆盖所有声明的属性。使用综合设置器，并在综合实现中观察声明的属性。

@property 属性表示关于如何实现合成设置器的“承诺”。一旦你编写了一个自定义设置器，你就靠自己了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-13T00:24:27.300

关键是想清楚下面的代码在做什么。为了清楚起见，我会完整地写出来：

```
[self setDataToBeLoaded:[[NSMutableData alloc] initWithLength:10000]]; 
```

这将创建一个具有 +1 保留计数的对象并将其传递给`setDataToBeLoaded:`. (*) 然后它丢弃对该对象的引用，将其泄漏。

```
[[self dataToBeLoaded] release]; 
```

这会调用`dataToBeLoaded`并释放返回的对象。没有任何保证返回`dataToBeLoaded`的对象与传递给的对象相同`setDataToBeLoaded:`。您可能认为它们是相同的，并且查看您的代码您可能会说服自己它总是会以这种方式工作，但这不是 API 承诺。

Antwan发布的代码是正确的：

```
NSMutableData *data = [[NSMutableData alloc] initWithLength:1000];
self.dataToBeLoaded = data;
[data release]; 
```

这将创建一个具有 +1 保留计数的对象。然后将它传递给一个方法，然后释放它。

或者，如果您愿意使用自动释放池，您可以将其简化为：

```
self.dataToBeLoaded = [NSMutableData dataWithLength:1000]; 
```

* * *

(*) 从技术上讲，这将消息传递给`self`可能会或可能不会导致调用此方法的消息，但这会使问题变得混乱。在大多数情况下，假设它是一个方法调用。但不要*假装*它只是设置属性。它真的会调用一些方法。

* * *

编辑：

也许这段代码会使问题更清楚一些。它表示常见的缓存解决方案：

```
.h
@interface MYObject : NSObject 
@property (nonatomic, readwrite, strong) NSString *stuff;
@end

.m
@interface MYObject ()
@property (nonatomic, readwrite, weak) MYStuffManager *manager;

@implementation MYObject

... Initialize manager ...

- (NSString*)stuff {
  return [self.manager stuffForObject:self];
}

- (void)setStuff:(NSString *)stuff {
   [self.manager setStuff:stuff forObject:self];
} 
```

现在也许`manager`在后台做了一些愚蠢的事情。也许它缓存了`stuff`. 也许它会复制它们。也许它将它们包装到其他对象中。重要的是你不能`-stuff`总是依赖于返回你传递给的同一个对象`-setStuff:`。所以你当然不应该释放它。

请注意，标题中没有任何内容表明这一点，也没有任何内容应该表明这一点。这不是来电者的事。但是如果调用者释放了 的结果`-stuff`，那么你将遇到难以调试的崩溃。

`@synthesize`只是编写一些乏味代码的简写（实现`stuff`并`setStuff:`作为读写 ivar 的代码）。但没有什么说你必须`@synthesize`为你的财产使用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-12T23:37:45.623

我的猜测是该方法

```
- (NSMutableData *)dataToBeLoaded; 
```

不包含任何内存管理关键字，因此假定您**不**拥有返回的数据，因此不应释放它。

要么使用

```
NSMutableData *data = [[NSMutableData alloc] initWithLength:1000];
self.dataToBeLoaded = data;
[data release]; data = nil; 
```

或者如果您可以在实际需要它时为什么不延迟加载它？

```
- (NSMutableData *)dataToBeLoaded;
{
    if (!_dataToBeLoaded) {
        _dataToBeLoaded = [[NSMutableData alloc] initWithLength:1000];
    }
    return _dataToBeLoaded;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-12T23:29:51.763

这只是意味着您正在释放一个您不拥有的对象。

我会说直接使用实例 var 调用它，而不是使用 getter，但不确定这是否会修复您的分析警告。还有为什么不使用 [NSMutableData dataWithLength:1000]; 它是自动发布的，因此不需要额外的发布调用（并且可能也会摆脱那个警告！）

其他可以解决的方法：

```
NSMutableData *data = [[NSMutableData alloc] initWithLength:1000];
self.databToBeLoaded = data;
[data release]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-17T06:22:14.677

我提供了一些更新，我认为这些更新可以回答这里发生的事情。通过一些测试结果，我的结论是这个警告是虚假的，这意味着它并没有真正识别出不正确的代码。更新应该不言自明。它们在上面给出。

# python - 蟒蛇字典。if 语句

> ID：10568158
> 
> 赞同：4
> 
> 时间：2012-05-12T23:19:53.333
> 
> 标签：python, python-2.7

有人可以帮助我在我的 dict 上正确放置 if 语句。我试图标记任何纽约用户，并让他们在字典中排在第一位。我也可以按我需要的名称排序，但不清楚如何标记任何纽约用户

```
names_states = {
  'user1': 'CA',
  'user2': 'NY',
  'user7': 'CA',
  'guest': 'MN',
}

for key in sorted(names_states.iterkeys()):
   2   ...   print "%s :  %s" %(key, names_states[key])
   3   ...
   4   user1 :  CA
   5   user2 :  NY
   6   guest :  MN
   7   user7 :  CA 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-12T23:55:46.440

```
sorted(names_states.iteritems(), key=lambda x: (x[1] != 'NY', x[0])) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-12T23:46:00.413

这是一种首先将 NY 值推到顶部的方法，同时仍按用户名作为第一个键，状态作为辅助键进行排序：

```
{'bill': 'NY',
 'frank': 'NY',
 'guest': 'MN',
 'user1': 'CA',
 'user2': 'NY',
 'user7': 'CA'}

def keyFunc(x):
    if names_states[x] == 'NY': 
        return (False, x)
    return (x, names_states[x])

sorted(names_states.iterkeys(), key=keyFunc)

# ['bill', 'frank', 'user2', 'guest', 'user1', 'user7'] 
```

注意：坚持`key`这里的方法比定义自定义`cmp`函数要快。key 函数只会对每个项目运行一次，而 cmp 函数将在每个组合中运行。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-12T23:45:49.987

这可以满足您的要求——首先是所有纽约人，按姓名排序，然后其他所有人也按姓名排序。

```
names_states = {
    'user1': 'CA',
    'user2': 'NY',
    'user7': 'CA',
    'guest': 'MN',
}

def ny_compare(x, y):
    if names_states[x] == 'NY':
        if names_states[y] == 'NY':
            return cmp(x,y)
        else:
            return -1
    elif names_states[y] == 'NY':
        return 1
    return cmp(x,y)

for key in sorted(names_states.iterkeys(), cmp=ny_compare):
    print "%s :  %s" %(key, names_states[key]) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-13T01:32:53.073

使用元组解包可能会更清晰

```
sorted(names_states.iteritems(), key=lambda (name, state): (state != 'NY', name)) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-12T23:50:35.270

```
for key, value in sorted(names_states.iteritems(), 
            key=lambda (key, value): ((0 if value == 'NY' else 1), key)):
    print((key,value)) 
```

这里 iteritems() 为我们提供了一个遍历字典中键/值对的迭代器。然后我们可以对这些键/值对进行排序。lambda 表达式创建一组键，将按照您所说的对列表进行排序。它通过返回元组来做到这一点，元组的第一个元素是一个基于值是否存在的数字`'NY'`。基本上，我使用的事实是元组按它们的第一个元素排序，然后是它们的第二个元素，依此类推。

也就是说，这开始看起来很混乱，所以你可能想找到一种更详细但更清晰的方法来做到这一点。

您可能希望继承 dict 并添加一个附加方法，以您希望的顺序公开键、值或键/值对。

这样你就可以得到一些简单的东西：

```
names_states = MyDict({
  'user1': 'CA',
  'user2': 'NY',
  'user7': 'CA',
  'guest': 'MN',
})

for key, value in names_states.iteritems_with_given_values_first('NY'):
    ...

class MyDict(dict):

    def __init__(self, *args, **kwargs):
        super(MyDict, self).__init__(*args, **kwargs)

    def iteritems_with_given_values_first(self, preferred_value):
        for key, value in sorted(names_states.iteritems(), 
                key=lambda (key, value): ((0 if value == preferred_value else 1), key)):
            yield key, value 
```

# jquery - 为什么我在这个变量上得到一个未定义的错误？

> ID：10568172
> 
> 赞同：-2
> 
> 时间：2012-05-12T23:23:41.547
> 
> 标签：jquery

谁能看到这段 jquery 代码有什么问题？我在变量**reqButEmpty上收到一条****未定义**的错误消息，因此它无法正确运行。先感谢您。

 **```
$(document).ready(function(){
    $("#btnCatchReqFlds").on('click', function(){
        alert('made it to this one also');
        var peaches ="hi peaches";
        var reqButEmpty = $('fieldset:visible').find('input[class*="-required"]').filter(function() 
            {
                    alert(peaches);
                    alert('second area 1a');
                    alert(reqButEmpty);
                    return $.trim($(this).val()) === "";
            });
                alert('second area 1b');
                    if(reqButEmpty.length>0)
                    {
                        alert("go here ok");
                        alert(this.length);
                        reqButEmpty.each(function() {
                            $('#hldErrMsg').append("Please fill in the " + this.name + "<br />"); 
                        });
                    }
                    return !reqButEmpty.length;
                });
        }); 
```

**html**：

```
<form method="post" action="">
    <div id="holdErrMsg"></div>
    <fieldset id="mainSection" name="mainSection">
                <legend style="color:blue; font-weight:bold">Project Overview Section</legend>

                <table style="width: 100%">
                    <tr>
                        <td style="height: 33px; width: 178px;">Name</td>
                        <td style="height: 33px"><input  id="1125" name="1125" class="1125-required" type="text" /></td>
                    </tr>
                    <tr>
                        <td style="height: 33px; width: 178px;">Email</td>
                        <td style="height: 33px"><input id="1026" name="1026" class="1026-required" type="text" /></td>
                    </tr>
                    <tr>
                        <td style="width: 178px">Product Title</td>
                        <td><input  id="1089" name="1089" type="text" /></td>
                    </tr>
                    <tr>
                        <td style="width: 178px">Product Type</td>
                        <td><select id="1169" name="1169">
                        <option value="">Select</option>
                        <option value="Cars">Cars</option>
                        <option value="Boats">Boats</option>
                        <option value="Planes">Planes</option>
                        </select></td>
                    </tr>
                                        <tr><td>
                                        <button id="btnCatchReqFlds" type="button" name="btn">Check Required Fields</button>
                                        </td></tr>
                                    </table>
            </fieldset>

            <fieldset id="section-11" name="section-11">
                <legend style="color:fuchsia; font-weight:bold">Car Details Section</legend>

                <table cellpadding="2" style="width: 100%">
                    <tr>
                        <td style="width: 334px; height: 35px"><label>Size:*</label></td>
                        <td style="height: 35px"><input id="1245" class="1245-required" name="1245" type="text" /></td>
                    </tr>
                    <tr>
                        <td style="height: 35px; width: 334px">Color:*</td>
                        <td style="height: 35px">
                        <select id="1433" class="1433-required" name="1433">
                <option value="Orange">Orange</option>
                        <option value="Blank">Blank</option>
                        <option value="Green">Green</option>
            </select></td>
                    </tr>
                    <tr>
                        <td style="width: 334px">Description:</td>
                        <td>
                        <textarea id="1290" name="1290" rows="2" style="width: 433px"></textarea></td>
                    </tr>
                </table>
                            </fieldset>

            <fieldset id="section-12" name="section-12">
                <legend style="color:fuchsia; font-weight:bold">Plane Details Section</legend>

                <table cellpadding="2" style="width: 100%">
                    <tr>
                        <td style="width: 334px; height: 35px"><label>Size:</label></td>
                        <td style="height: 35px"><input id="1245" name="1245" type="text" /></td>
                    </tr>
                    <tr>
                        <td style="height: 35px; width: 334px">Color*:</td>
                        <td style="height: 35px">
                                                <input type="checkbox" name="1433[]" id="1433[]" value"Orange" class="1433[]-required"/>Orange
                                                <input type="checkbox" name="1433[]" id="1433[]" value"Blue" class="1433[]-required"/>Blue
                                                <input type="checkbox" name="1433[]" id="1433[]" value"Green" class="1433[]-required"/>Green
                        </td>
                    </tr>
                    <tr>
                        <td style="width: 334px">Description:</td>
                        <td>
                        <textarea id="1290" name="1290" rows="2" style="width: 433px"></textarea></td>
                    </tr>
                </table>
                            </fieldset>
            <fieldset id="section-13" name="section-13">
                <legend style="color:fuchsia; font-weight:bold">Boat Details Section</legend>

                <table cellpadding="2" style="width: 100%">
                    <tr>
                        <td style="width: 334px; height: 35px"><label>Size:</label></td>
                        <td style="height: 35px"><input id="1245" name="1245" type="text" /></td>
                    </tr>
                    <tr>
                        <td style="height: 35px; width: 334px">Color:*</td>
                        <td style="height: 35px">
                                                <input type="radio" name="1834" id="1834" value="None" class="valuetext" class="1834-required">None
                                                <input type="radio" name="1834" id="1834" value="All" class="valuetext" class="1834-required">All
                       </td>
                    </tr>
                    <tr>
                        <td style="width: 334px">Description:</td>
                        <td>
                        <textarea id="1290" name="1290" rows="2" style="width: 433px"></textarea></td>
                    </tr>
                </table>
                            </fieldset><br>
<fieldset id="section-1011" name="section-1011">
                <legend style="color:green; font-weight:bold">Misc Info Section</legend>

                <table cellpadding="2" style="width: 100%">
                    <tr>
                        <td style="width: 334px; height: 35px"><label>Size:</label></td>
                        <td style="height: 35px"><input id="1301" name="1301" type="text" /></td>
                    </tr>
                    <tr>
                        <td style="height: 35px; width: 334px">Color:</td>
                        <td style="height: 35px">
                        <select id="1302" name="1302">
                <option value="Orange">Orange</option>
                        <option value="Blank">Blank</option>
                        <option value="Green">Green</option>
            </select></td>
                    </tr>
                    <tr>
                        <td style="width: 334px">Description:</td>
                        <td>
                        <textarea id="1303" name="1303" rows="2" style="width: 433px"></textarea></td>
                    </tr>
                </table>
                            </fieldset>

</form>​ 
```

**jQuery代码**：

```
<script type="text/javascript">

            $(document).ready(function() {
                $('fieldset#section-11,fieldset#section-12,fieldset#section-13').hide(); 
            });//end of close all fieldsets

            $(document).ready(function() {
                var projType = new Array(
                        {value : 'Cars', sect_id : 'fieldset#section-11'},
                        {value : 'Planes', sect_id : 'fieldset#section-12'},
                        {value : 'Boats', sect_id : 'fieldset#section-13'}
                    ); //end of projType array

            $("select#1169").on('change',function () {
                var dropDownVal = $(this).val();
                var sect_id ="";
                    $(projType).each(function() {
                        $(this.sect_id).hide(); //hide all section each time you run thru here
                            if(this.value == dropDownVal) 
                                {
                                    $(this.sect_id).show();
                                }
                    });
            });
            });
$(document).ready(function(){
    $("#btnCatchReqFlds").on('click', function(){
        console.log('inside onclick of button');
        var peaches ="hi peaches";
        var reqButEmpty = $('fieldset:visible').find('input[class*="-required"]').filter(function() 
            {
                    console.log(peaches);
                    console.log('inside var reqButEmpty assignment');
                    console.log(reqButEmpty);
                    return $.trim($(this).val()) === "";
            });
                console.log('just after var reqButEmpty assignment');
                    if(reqButEmpty.length>0)
                    {
                        console.log("inside .length");
                        console.log(this.length);
                        reqButEmpty.each(function() {
                            $('#hldErrMsg').append("Please fill in the " + this.name + "<br />"); 
                        });
                    }
                    return !reqButEmpty.length;
                });
        });

        </script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T00:25:43.383

这里：

```
$(function () {
    var $button = $( '#btnCatchReqFlds' );
    var $message = $( '#holdErrMsg' );

    $button.on( 'click', function () {
        var $reqButEmpty = $( 'input[class*="-required"]', 'fieldset:visible' ).filter(function () {
            return $.trim( $( this ).val() ) === '';
        });

        var html = $reqButEmpty.map(function () {
            return 'Please fill in the ' + this.name;
        }).get().join( '<br>' );

        $message.html( html );
    });
}); 
```

**现场演示：http:** [//jsfiddle.net/jYBPY/3/](http://jsfiddle.net/jYBPY/3/)

顺便说一句，您的代码中有错字 - 您写`"#hldErrMsg"`的是`"#holdErrMsg"`.**

# ruby - 在变量 Ruby 中使用类名创建类实例

> ID：10568173
> 
> 赞同：5
> 
> 时间：2012-05-12T23:23:42.543
> 
> 标签：ruby

我需要做这样的事情

```
class Foo
 define perform()
  puts 'hello'
 end
end

classname = 'Foo'

instance = create_instance(classname)
instance.perform(); 
```

有没有可能。如果是怎么样？

非常感谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-12T23:27:29.873

你可以使用[`const_get`](http://ruby-doc.org/core-1.9.3/Module.html#method-i-const_get)：

```
instance = Object.const_get(classname).new
instance.perform 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-12T23:27:17.763

是的，有可能——

```
class Foo
  def perform
    puts 'hello'
  end
end

f = 'Foo'

klass = Object.const_get f

f.new.perform 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-12T23:29:26.327

您可以使用[Module#const_get](http://ruby-doc.org/core-1.9.3/Module.html#method-i-const_get)

```
klass = Object.const_get(classname)
instance = klass.new 
```

但是，如果它来自用户输入，您可能希望首先将类名列入白名单。否则，您可能会打开一个安全漏洞。

# ios - MPMusicPlayerController 音量衰减

> ID：10568174
> 
> 赞同：1
> 
> 时间：2012-05-12T23:23:47.127
> 
> 标签：ios, ipod, volume

我有：

```
 MPMusicPlayerController *musicPlayer = [MPMusicPlayerController iPodMusicPlayer]; 
```

使用该应用程序时，我需要降低音乐以发出警报，当它消失时，我想将其调高到以前的音量。这里的 musicVolume 是一个双精度值，用于存储衰减前的音量：

```
musicVolume = musicPlayer.volume;
if (musicPlayer.playbackState == MPMusicPlaybackStatePlaying)
    [self fadeMusicOut]; 
```

这样可以很好地淡出音乐。

将其淡入：

```
 - (void) fadeMusicIn
    {
            [musicPlayer play];
            musicPlayer.volume += 0.05;
            if (musicPlayer.volume < musicVolume)
                [self performSelector: @selector(fadeMusicIn) 
                           withObject: nil 
                           afterDelay: 0.1 ];
            else 
            {

            }
    } 
```

这可以很好地淡入音乐，但是，它总是使音量低于之前设置的音量。

我怎样才能做到这一点以恢复原始音量？提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T23:33:11.723

您说的`if (musicPlayer.volume < musicVolume)`是`performSelector: withObject: afterDelay:`，一旦`musicPlayer.volume`等于或大于`musicVolume`. 但你希望它是平等的。所以试试：

```
- (void) fadeMusicIn
{
    ...
        if (musicPlayer.volume == musicVolume)
            [self performSelector: @selector(fadeMusicIn) 
                       withObject: nil 
                       afterDelay: 0.1 ];
    ...
} 
```

这样 if 语句在`musicPlayer.volume`小于或等于时停止，所以一旦相等，它就会停止

更新，试试 ==

# backbone.js - 谷歌地图和backbone.js

> ID：10568177
> 
> 赞同：1
> 
> 时间：2012-05-12T23:24:48.217
> 
> 标签：backbone.js

我正在考虑开发一个主干应用程序，但我不确定我是否以正确的方式考虑它。

这将是我的第一个主干应用程序。基本上，我想开发一个简单的应用程序，它将谷歌地图作为其“主要”视图。

这个想法是从 API 获取位置信息到模型中，比如说标记，这些标记将显示在地图上。

我不确定如何将标记连接到地图视图：

1.  地图视图应该有一个 addMarker() 函数吗？
2.  或者标记的渲染方法是否应该将标记添加到地图？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-12T23:33:09.277

创建一个`Collection`标记并将其传递给`initialize`您视图中的函数怎么样？

这将允许您绑定`change`事件以在标记集合更改时更新地图。然后，每当您`add`为集合添加标记时，地图视图将捕获集合中的更改，并能够添加标记并根据需要自行调整以适应。

例如，在这些行上创建一个视图：

```
// in Backbone.View
initialize: function (opts) {
  _.bindAll(this);
  this.markers = opts.markers;
  this.markers.on('change', this.render);
},

render: function () {
  // create or update the map
} 
```

当你想初始化视图时，你现在可以使用这样的东西：

```
var markers = new MyApp.MarkerCollection(),
    view = new MyApp.MapView({ markers: markers }); 
```

# ruby-on-rails - RoR如何向后查找记录

> ID：10568183
> 
> 赞同：0
> 
> 时间：2012-05-12T23:25:15.603
> 
> 标签：ruby-on-rails

我有一个 3 表 - 用户、员工、联系人。员工和联系人具有指向关联用户的外键。Employee belongs_to :user Contact belongs_to :user 用户有很多员工，联系人

但是，我想在用户索引视图中列出员工姓名或联系人姓名。

我需要使用 find_by_sql 语句吗？

谢谢，戴夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T23:31:05.517

您已经`belongs_to`设置了关联，因此您可以`has_one`在您的 User 类中为员工和联系人添加关联，然后您可以执行`@user.employee.name`或`@user.contact.name`。

你绝对不需要`find_by_sql`这个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T00:20:35.087

在您的索引视图中，

```
<table>
<% @users.each do |user| %>
<tr>
  <td><%= user.name %></td>
  <td><%= user.employees.map{ |empl| empl.name }.join(", ") %></td>
  <td><%= user.contacts.map{ |contact| contact.name }.join(", ") %></td>
</tr>
<% end %>
</table> 
```

唯一的缺点是它将在用户的循环中查询所有用户的员工和所有用户的联系人。如果页面加载速度相当快，请按照上面的代码进行编码，因为这样的代码更清晰。

# android - 第一次返回true后如何停止接收手势的onTouchEvents

> ID：10568184
> 
> 赞同：3
> 
> 时间：2012-05-12T23:25:19.170
> 
> 标签：android

我知道对于 Android 视图，如果我返回`true`，`onTouchEvent`则表示您希望继续接收当前手势的事件。如果您返回`false`，则不应为当前手势处理更多事件

但是我想尝试检测手势是单击还是按住/拖动事件，所以我返回`true`到初始`ACTION_DOWN`事件，直到经过了几毫秒，此时我超时并将手势识别为按住/拖动而不是单击。

一旦超时过去，我想`false`进一步返回 onTouchEvents，这样我就可以停止接收事件并让父视图管理其余的拖动。

但是，我似乎注意到，一旦您返回`true`第一个事件，它就会收到**所有**带有相关手势的进一步事件，即使在我不断返回`false`以后的事件之后也是如此。似乎返回值只对第一个事件很重要，之后它被忽略了。

`onTouchEvent`一旦您接受了手势中的第一个事件，有什么方法可以停止接收并因此将其传递给父级？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T23:41:30.790

请记住，布尔返回值`onTouchEvent`仅指示事件是否已被处理 - 当用户处于手势中间时，您仍应接收事件。

通常，您可以在处理程序中定制您想要的行为：

```
private boolean hasHandledGesture = false;

public boolean onTouchEvent( MotionEvent event ){

    if( !hasHandledGesture ){
        // Do your actual handling here for the first event
        return true;
    } else {
        return super.onTouchEvent( event );
    }
} 
```

但是，我认为在您的情况下，您最好创建一个通过[setOnLongClickListener](http://developer.android.com/reference/android/view/View.html#setOnLongClickListener%28android.view.View.OnLongClickListener%29)注册的处理程序。它不仅会让您的生活更轻松，而且您还可以让操作系统决定长按需要多长时间。如果您想让印刷机的长度与系统的其余部分相匹配，这是最佳选择，有助于整体应用程序的原生外观。

如果你想捕捉一些更复杂的事件，你可能想看看使用[GestureDetector](http://developer.android.com/reference/android/view/GestureDetector.html)，但如果你只是检测长按，它可能比你需要的更复杂。

# scala - Scala 实数区间、整数区间

> ID：10568186
> 
> 赞同：5
> 
> 时间：2012-05-12T23:25:47.820
> 
> 标签：scala, superclass, boilerplate

如何定义这两个简单的 Interval 类的样板消除超类？

```
class IntInterval(val from: Int, val to: Int) { 
    def mid: Double = (from+to)/2.0 
    def union(other: IntInterval) = IntInterval(from min other.from, to max other.to)
}

class DoubleInterval(val from: Double, val to: Double) { 
    def mid: Double = (from+to)/2.0 
    def union(other: DoubleInterval) = DoubleInterval(from min other.from, to max other.to)
} 
```

我试过

```
class Interval[T <: Number[T]] (val from: T, val to: T) { 
    def mid: Double = (from.doubleValue+to.doubleValue)/2.0 
    def union(other: IntInterval) = Interval(from min other.from, to max other.to)
} 
```

但是*最小值*和*最大值*没有在*联合*方法中编译（因为 Number[T] 没有最小值/最大值）。

你能提供一个优雅的超类，它以一种简洁的、一次性且仅一次的样板代码避免方式处理*mid*和*union方法吗？*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-12T23:39:49.253

我认为您正在寻找`scala.math.Numeric`类型类：

```
class Interval[T] (val from: T, val to: T)(implicit num: Numeric[T]) { 
  import num.{mkNumericOps, mkOrderingOps}

  def mid: Double  = (from.toDouble + to.toDouble)/2.0 
  def union(other: Interval[T]) = new Interval(from min other.from, to max other.to)
} 
```

# android - Android 位图质量问题

> ID：10568188
> 
> 赞同：5
> 
> 时间：2012-05-12T23:26:08.520
> 
> 标签：android, bitmap

在我的应用程序中，绘制的位图好像颜色是某种较低质量的类型。如果我使用图库应用程序加载背景图像，它加载得很好，看起来不像是超低质量。我用来加载和绘制图像的代码很简单：

```
//Code for initializing the Bitmap
Bitmap bitmap = Bitmap.createScaledBitmap(BitmapFactory.decodeResource(getResources(), R.drawable.none), (int) (canvas.getWidth() * compression), (int) (canvas.getHeight() * compression), true);
//...
//Code for drawing this Bitmap
canvas.drawBitmap(bitmap, null, new RectF(0, 0, canvas.getWidth(), canvas.getHeight()), null); 
```

如果代码中没有任何内容告诉您出了什么问题，我制作了一张图像，比较了图像在计算机或其他图像查看器上的实际外观，以及它在应用程序中的外观。 ![顶部图像是手机上的应用程序，底部图像是背景图像的实际外观。 注意顶部图像上的线条。 那是怎么回事？](../Images/a7ad0ba791d7179e3c439a1edee440a1.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-12T23:33:25.310

问题有点类似于[调整/缩放位图后的图像质量差](https://stackoverflow.com/questions/4821488/bad-image-quality-after-resizing-scaling-bitmap)

尝试禁用缩放，在屏幕外位图中调整大小并确保位图为 32 位（ARGB888）：

```
Options options = new BitmapFactory.Options();
options.inScaled = false;
options.inDither = false;
options.inPreferredConfig = Bitmap.Config.ARGB_8888;
Bitmap source = BitmapFactory.decodeResource(a.getResources(), path, options); 
```

另一个关于图像缩放/处理的好的和完整的答案可以[在运行时调整图像大小时的质量问题中找到](https://stackoverflow.com/questions/4231817/quality-problems-when-resizing-an-image-at-runtime)

# macos - 如何列出带有数字的目录，以便用户可以在 bash 中选择一个？

> ID：10568190
> 
> 赞同：1
> 
> 时间：2012-05-12T23:26:51.500
> 
> 标签：macos, bash, ls

好的，所以我基本上是想让用户决定他们想使用哪个驱动器来安装软件。我想发布一个类似于“您想安装到哪个驱动器？”的问题。然后列出编号的驱动器，以便用户可以轻松选择其中一个驱动器。有没有办法给 ls 结果编号，然后让用户选择一个。我正在考虑使用 case 命令或者可能是 echo 和 read，但我无法让它正常工作。另外我应该在mac上的bash中添加它。非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T23:50:07.200

使用`select`：

```
PS3='which drive would you like to install to? '
select dir in */ quit
do
    if [[ $dir == quit ]]
    then
        break
    fi
    echo "$dir"    # or do other stuff
done 
```

如果适合您的需要，您可以在块内使用`case`语句。`select`

另请参阅[`dialog`](http://invisible-island.net/dialog/)和[`whiptail`](http://packages.debian.org/squeeze/whiptail)。不幸的是，OS X 似乎都没有。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T12:13:55.243

试试这个：

```
ls | cat -n; read a; ls | head -n $a | tail -n 1 
```

# sql - sql查询需要对多个日期列一起排序

> ID：10568191
> 
> 赞同：4
> 
> 时间：2012-05-12T23:27:17.540
> 
> 标签：sql, sql-server, select, sql-order-by

我有一个包含三个日期字段的表，即开始日期、中期日期和结束日期。我想创建一个查询来从表中获取最新的活动。这种情况下的活动是更新日期字段的时间。

无需编写 3 个单独的查询，然后组合我的代码中的值以获得 10 个最近的活动，我可以在一个查询中执行此操作。所以现在我有

```
 SELECT TOP 10 * FROM core_table 
    ORDER BY [start_date] Desc

    SELECT TOP 10 * FROM core_table 
    ORDER BY [process_date] Desc

    SELECT TOP 10 * FROM core_table 
    ORDER BY [archive_date] Desc 
```

因此，我想将这三个查询的结果汇总在一起，以获得基于所有三个日期的前 10 个条目。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-12T23:35:16.433

基于 Itiong_sh 给出的答案，这并不完全相同：您可以按 ORDER BY

```
select top 10 * from core_table
order by
  CASE
      WHEN start_date >= process_date AND start_date >= archive_date 
          THEN  start_date
      WHEN process_date >= archive_date 
          THEN  process_date
      ELSE  archive_date
  END
 DESC 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-12T23:43:50.373

我认为你需要`UNION`：

```
SELECT TOP 10               
    *
FROM
    (   ( SELECT TOP 10 
              *, start_date    AS activity_date
          FROM core_table 
          ORDER BY [start_date] DESC
        ) 
    UNION
        ( SELECT TOP 10 
              *, process_date  AS activity_date
          FROM core_table 
          ORDER BY [process_date] DESC
        ) 
    UNION
        ( SELECT TOP 10 
              *, archive_date  AS activity_date
          FROM core_table 
          ORDER BY [archive_date] DESC
        )
    ) AS t
ORDER BY activity_date DESC ; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-13T01:44:00.643

[Raphaël Althaus 答案](https://stackoverflow.com/a/10568231/533120)的扩展：

```
CREATE TABLE core_table (
    ...
    max_date AS
        CASE
            WHEN start_date >= process_date AND start_date >= archive_date
                THEN start_date
            WHEN process_date >= archive_date
                THEN process_date
            ELSE archive_date
        END
);

CREATE INDEX core_table_ie1 ON core_table (max_date); 
```

然后，您可以简单地...

```
SELECT TOP 10 *
FROM core_table
ORDER BY max_date DESC; 
```

...并且它应该使用索引范围扫描而不是全表扫描。

# iphone - UIViewController 不知道显示模式视图的旋转

> ID：10568196
> 
> 赞同：1
> 
> 时间：2012-05-12T23:27:40.803
> 
> 标签：iphone, objective-c, ios, uiviewcontroller, orientation

我有一个 UIViewController，它启动一个模态视图控制器。两者都有方向支持。如果我在那里使用模态视图控制器旋转，它不会告诉它后面的视图控制器旋转已经发生，因此当模态视图控制器被解除时，原始视图处于正确的方向，但在原始大小（例如，我将其旋转为 480x320，文本和其他项目将是新方向的正确方式，但仍将以其 320x480 布局排列）。我如何让视图控制器知道发生了旋转？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T23:36:08.927

使用 NSNotification。

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
        {
             // send a notification here
         } 
```

在你的 ViewController 后面，添加一个观察者并调用一个方法来修复布局。

[一个旧的 SO 答案解释了 NSNotification 的语法](https://stackoverflow.com/a/2191802/1169310)

我希望它有用

# c# - 回发带小数的编辑器字段时出错

> ID：10568199
> 
> 赞同：1
> 
> 时间：2012-05-12T23:28:36.093
> 
> 标签：c#, asp.net-mvc-3

当我回发以下字段时出现此错误：无法将“System.Decimal”类型的对象转换为“System.String”类型。

作为表单一部分的字段：

```
<div class="editor-label">
        @Html.LabelFor(model => model.Donation.Amount)
    </div>    
    <div class="editor-field">
            @Html.TextBox("Amount", string.Format("{0:f2}", Model.Donation.Amount))
    <!--  @Html.EditorFor(model => model.Donation.Amount) -->
        @Html.ValidationMessageFor(model => model.Donation.Amount)
    </div>

    <div class="editor-label">
        @Html.LabelFor(model => model.Pledge.PledgeTotal)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.Pledge.PledgeTotal)
        @Html.ValidationMessageFor(model => model.Pledge.PledgeTotal)
    </div> 
```

这两个都是模型中的小数属性......然后它试图作为字符串回发吗？那么如何在回发之前将其转换回小数呢？有什么想法吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T23:39:26.417

试试这个：

在您的视图模型中：

```
[DisplayFormat(DataFormatString = "{0:F2}", ApplyFormatInEditMode = true)]
public decimal Amount { get; set; } 
```

在您看来：

```
@Html.EditorFor(model => model.Donation.Amount) 
```

# android - Android 蓝牙 Inputstream.read 从不接收数据

> ID：10568202
> 
> 赞同：2
> 
> 时间：2012-05-12T23:28:51.427
> 
> 标签：android, bluetooth

我正在为 Android 制作一个游戏，其中两个设备连接然后交换少量数据，然后断开连接并使用该数据。我从蓝牙聊天示例开始。在这一点上，我大部分时间都在工作，但有些（大多数）时间，其中一个设备从不接收任何数据。这是两个设备上的同一个应用程序，因此两者的发送和接收代码是相同的。我是这样连接的：

```
 public BluetoothClientThread(BluetoothDevice get_device,boolean secure){
        BluetoothSocket temp=null;
        device=get_device;
        socket_type=secure?"Secure":"Insecure";

        try{
            if(secure){
                temp=device.createRfcommSocketToServiceRecord(UUID_SECURE);
            }
            else{
                temp=device.createRfcommSocketToServiceRecord(UUID_INSECURE);
            }
        }
        catch(IOException e){
            StorageManager.error_log_add(context,TAG,"create() on "+socket_type+" client socket failed.",e);
        }

        socket=temp;
    }

    public void run(){
        bluetooth_adapter.cancelDiscovery();

        try{
            socket.connect();
        }
        catch(IOException e){
            StorageManager.error_log_add(context,TAG,"Connection failed.",e);

            try{
                socket.close();
            }
            catch(IOException ioe){
                StorageManager.error_log_add(context,TAG,"close() on "+socket_type+" client socket failed during connection failure.",ioe);
            }

            connection_failed();

            return;
        }

        synchronized(BluetoothService.this){
            bluetooth_client_thread=null;
        }

        connected(socket,device,socket_type,false);
    } 
```

连接后，我获取套接字的 getInputStream() 和 getOutputStream()。然后我使用以下代码读取套接字上的输入：

```
 public void run(){
        String packet="";

        while(true){
            try{
                int get_byte=input.read();
                char get_char=(char)get_byte;

                if(get_char!='\u0003'){
                    StorageManager.error_log_add(context,"BluetoothService","Adding packet raw data: \""+get_char+"\"",null);
                    packet+=get_char;
                }
                else{
                    StorageManager.error_log_add(context,"BluetoothService","Packet received:\n"+packet,null);
                    handler.obtainMessage(Activity_Battle_Menu.HANDLER_READ,packet).sendToTarget();
                    packet="";
                }

                if(done && they_done){
                    handler.obtainMessage(Activity_Battle_Menu.HANDLER_READY).sendToTarget();
                }
            }
            catch(IOException e){
                StorageManager.error_log_add(context,TAG,"Connection lost.",e);

                connection_lost();

                break;
            }
        }
    } 
```

它一次读取一个字节的数据，将字节附加到数据包字符串中。当到达 ETX 字符时（当我发送它时，我将它放在所有内容的末尾），一个完整的数据包已被接收，并通过处理程序传递给活动，在那里它被执行。这是我的写作代码：

```
 public void write(byte[] buffer){
        try{
            StorageManager.error_log_add(context,"BluetoothService","Writing data:\n"+new String(buffer),null);

            output.write(buffer);
        }
        catch(IOException e){
            StorageManager.error_log_add(context,TAG,"write() on "+socket_type+" connected socket failed.",e);
        }
    } 
```

如您所见，我在发送数据“数据包”、接收到字节以及接收到整个“数据包”时写入日志。

我不确定这是否相关，但是：我正在使用带有 Cyanogenmod 7.1 (Android 2.3.7) 和在 VirtualBox (Android 2.3.5) 中运行的 Android x86 的 Nook Color 进行测试。我的应用的 minSdkVersion 是 8 (Android 2.2)。对于在我的计算机上运行的 Android，我使用的是 Rocketfish USB 蓝牙适配器。

每个实例应该发送两个数据包。首先，发送包含所有所需游戏数据的数据包。当收到另一个实例的游戏数据时，应用程序将自己的布尔值设置为 true。它还向另一个实例发送“完成”数据包。因此，一旦两个实例都完成，并且知道另一个完成，我们就知道所有数据都已发送和接收，并且它们都断开/停止其蓝牙线程并对数据采取行动。

由于我在发送和接收数据时在两个设备上都记录了日志，因此日志会告诉我正在发生的事情。

-首先，我开始两个游戏并进入蓝牙活动（显然）。

-接下来，我从模拟实例连接到 Nook 实例。

- 模拟实例发送其游戏数据包。

-Nook 实例接收模拟实例的游戏数据，并发送自己的（有时这两个是按顺序切换的，只是因为它们是异步发生的）。

- 因为它收到了一个游戏数据包，Nook 实例现在发送它的“完成”数据包。

-这就对了。模拟实例永远不会收到任何一个数据包。它甚至从不接收单个字节，并且 input.read() 只是阻塞，等待永远不会到达的输入（就像它应该的那样）。

所以这是我的问题。似乎正在发生两件事之一：

1.  数据永远不会被 Nook 实例上的 output.write() 发送，即使它没有抛出任何异常，并且日志会验证它是否被调用。

2.  模拟实例上的 input.read() 永远不会收到数据。也许它在传输中丢失了？

据我所知，我的代码坚如磐石。问题似乎与蓝牙有关。也许一个或两个 Android 实例都有一个糟糕的蓝牙设置？

我还想补充一点，每隔一段时间（可能是 1/15 次），所有的数据包都被正确发送和接收，游戏按预期进行。因此，任何错误只会经常发生，但并非总是如此。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T21:13:24.443

我可以通过蓝牙访问另一台 Android 设备。我已经测试了我的游戏，它可以正确连接并且设备可以正确交易数据。我发现我的程序出现了其他几个在蓝牙之后出现的错误，但这既不存在也不存在！

之前的 Nook Color 和 HTC Status 是一起工作的。然后，我正式得出结论，我的计算机上有一个有故障的蓝牙适配器。上面发布的代码运行良好。

# filter - Clojure 中的过滤器类型字符串

> ID：10568204
> 
> 赞同：9
> 
> 时间：2012-05-12T23:29:27.690
> 
> 标签：filter, clojure

目前我正在尝试学习 Clojure，我想编写一个具有可变数量参数的函数。这个函数应该过滤每个输入来检查它是否是一个字符串。如果是这样，则应返回字符串类型的每个输入。

Clojure 对我来说很难，而且思维方式不同，但我在这里的方向是否正确.. 我似乎无法解决它：

```
(defn returnString [& y]
(if (next y)
(filter (fn [x] (= (type x) "java.lang.String"))y)
(recur (next x)))) 
```

谢谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-13T00:36:32.020

有一个函数调用`string?`，如果参数是字符串则返回 true，否则返回 false。

```
=> (string? "hi")
true
=> (string? 100)
false
=> (string? ["a" "b" "c"])
false 
```

因此，考虑到这一点，您的函数将如下所示：

```
(defn return-strings [& vals]
  (filter string? vals)) 
```

filter 函数将返回一个值序列（本质上是一个集合），因此在这种情况下，您无需担心自定义函数中的递归（即使用`recur`）。

* * *

您用来确定什么是字符串的匿名函数非常接近正确。如果您`string?`通过输入`(source string?)`REPL 查看源代码，您会看到：

```
(fn [x] (instance? String x)) 
```

虽然，您采用的方法也可以。您只需要指定 String 类而不是您提供的字符串值。（请注意，您可以省略，`java.lang`因为该包会像在 Java 中一样自动包含在内。）

```
(fn [x] (= (type x) String)) 
```

# sql - 对大量列进行更高效的 Active Record 查询

> ID：10568210
> 
> 赞同：1
> 
> 时间：2012-05-12T23:30:59.070
> 
> 标签：sql, ruby-on-rails, ruby

我正在尝试找出一种更有效的方法来添加笔记计数，并将几个简单的 where 条件应用于查询。但是，这可能需要很长时间，因为要迭代的记录多达 20K。欢迎对此有任何想法。

```
def reblog_array(notes)
  data = []
  notes.select('note_type, count(*) as count').where(:note_type => 'reblog', :created_at => Date.today.years_ago(1)..Date.today).group('DATE(created_at)').each do |n|
    data << n.count
  end
  return data
end 
```

这是从我的控制器传递给 reblog_array(notes) 的内容。

```
@tumblr = Tumblr.find(params[:id]) 
@notes = Note.where("tumblr_id = '#{@tumblr.id}'") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T02:35:04.477

据我所知，您正在尝试计算此 Tumblr 帐户/博客每天有多少转发？如果是这样，

```
notes.where(:note_type => 'reblog', :created_at => Date.today.years_ago(1)..Date.today).group('DATE(created_at)').count.values 
```

应该给你正确的结果，而不必再次遍历结果列表。需要注意的一件事是，您现在的通话不会显示何时有 0 天转发。如果你放弃对 的调用`#values`，你会得到一个`date => count`.

顺便说一句，如果你不知道，我还建议更多地使用 ActiveRecord 关系：

```
Class Tumblr
  has_many :notes
end

@tumblr = Tumblr.find(params[:id])
@notes = @tumblr.notes 
```

这样您就可以避免编写类似`Note.where("tumblr_id = '#{@tumblr.id}'")`. 最好避免使用字符串插值参数，以支持类似代码`Note.where(:tumblr_id => @tumblr.id)`或`Note.where("tumblr_id = ?", @tumblr.id)`减少编写[易受 SQL 注入攻击的代码的机会](http://guides.rubyonrails.org/security.html#sql-injection)

# c - 内联来自 LLVM 中不同文件的代码

> ID：10568212
> 
> 赞同：3
> 
> 时间：2012-05-12T23:31:09.793
> 
> 标签：c, llvm, clang

我需要在运行时使用 LLVM 内联几个函数。复杂之处在于这些函数是在单独的位码文件中定义的。

在运行时，我需要为函数生成代码，例如

```
void snippet1();         //declaring that snippet1 and 2 are defined in snippet1.c and snippet2.c
void snippet2();

void combo12(){
    snippet1();
    snippet1();
    snippet2();
    snippet2();
} 
```

来自从 combo12.c、snippet1.c 和 snippet2.c 编译的单独 LLVM 位码文件。问题是，我需要在combo12 中内联对snippet1 和snippet2 的所有调用。我尝试使用以下代码（main.cpp）执行此操作：

```
OwningPtr<MemoryBuffer> MB, MB2, MB3;
Module *M1, *M2, *MC12, *MOUT;
LLVMContext Context;
std::string ErrorStr;

MemoryBuffer::getFile("snippet1.bc", MB);
M1 = ParseBitcodeFile(MB.get(), Context);

MemoryBuffer::getFile("snippet2.bc", MB2);
M2 = ParseBitcodeFile(MB2.get(), Context);    

MemoryBuffer::getFile("combo12.bc", MB3);
MC12 = ParseBitcodeFile(MB3.get(), Context);    

Linker* L;

L = new Linker("testprog", M1, 0);

L->setFlags(llvm::Linker::Verbose);

if (!(L->LinkInModule(M2, &ErrorStr)))
    std::cout << ErrorStr;

if (!(L->LinkInModule(MC12, &ErrorStr)))
    std::cout << ErrorStr;

MOUT = L->getModule();

MOUT->dump();

PassManager *PM;

PM = new PassManager();

PM->add(createInternalizePass(true));

PM->add(createAlwaysInlinerPass());

if (PM->run(*MOUT)){
    std::cout << "\n\n\nCode was altered!\n\n\n" << std::endl;
    MOUT->dump();
    std::cout << "\n\n ALTERED BEAST \n\n" << std::endl;
} 
```

片段1.c：

```
//What this function does is irrelevant
#include "post_opt.h"     //contains the struct exstr declaration
extern struct exstr a;
inline void snippet1() __attribute((always_inline));
void snippet1(){
    int x, y;
    a.b = 10;
    x = 2;
    if(x < a.a){
        y = x + 1;
    }
} 
```

我编译了snippet1.c、snippet2.c和combo12.c

```
clang -c -emit-llvm snippet1.c -o snippet1.bc -O0
clang -c -emit-llvm snippet2.c -o snippet2.bc -O0
clang -c -emit-llvm combo12.c -o combo12.bc -O0 
```

和 main.cpp

```
clang++ -g main.cpp `llvm-config --cppflags --ldflags --libs --cppflags --ldflags --libs core jit native linker transformutils ipo bitreader` -O0 -o main 
```

当我运行 ./main 时，它不会内联代码片段，尽管我使用 always_inline 属性显式标记该函数，并使用 AlwaysInline 传递。它永远不会在屏幕上打印 ALTERED BEAST。

为什么会这样？我认为，通过将所有模块链接在一起并应用 IPO 通行证（AlwaysInline），这样就可以了。

感谢您的任何见解！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-03-03T08:05:38.100

内联发生在编译期间，而不是链接，内联仅适用于编译时完全定义的函数。因此，不可能从其他文件中内联函数（因为在编译文件时，其他文件被忽略）。唯一的解决方案是在每个需要内联这些函数的文件中定义函数。

# java - 在 Java 类路径上，需要说明

> ID：10568214
> 
> 赞同：1
> 
> 时间：2012-05-12T23:31:36.107
> 
> 标签：java, classpath

在以下场景中：

```
APP_HOME=/Users/me/Documents/workspace/Mimer/bin
javac -cp $APP_HOME/lib/*.jar::  BCClient.java 
```

假设`$APP_HOME/lib`包含所有需要的罐子

什么会导致以下情况：

```
BCClient.java:35: package com.thoughtworks.xstream does not exist
.. 
```

似乎找不到 .java 所需的文件库，除了当我执行以下代码时失败并出现相同的错误

```
javac -cp "$APP_HOME/lib/xstream-1.2.1.jar;$APP_HOME/lib/xpp3_min-1.1.3.4.O.jar"  BCClient.java 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T23:36:41.650

这应该适用于编译器 Java 6+。但是，如果您从执行通配符扩展的 shell 执行此命令，则需要将通配符放在引号中。更多细节可以在[这里](http://docs.oracle.com/javase/6/docs/technotes/tools/solaris/javac.html#options)找到。

/Library/Java/Home/bin/javac -cp "$APP_HOME/lib/*.jar:." BCClient.java

# android - 应用程序被销毁后“强制停止”选项仍然可用

> ID：10568225
> 
> 赞同：0
> 
> 时间：2012-05-12T23:33:43.720
> 
> 标签：android, ondestroy

我注意到，当我使用返回按钮退出应用程序后，当我进入“管理应用程序”菜单时，我仍然有一个“强制停止”选项。应用程序此时不应该已经死了吗？（我确保 OnDestroy 确实运行）。为什么我可以选择强制停止正式死机的应用程序？

谢谢，

盖瓦·塔尔。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T23:41:12.380

> 我注意到，当我使用返回按钮退出应用程序后，当我进入“管理应用程序”菜单时，我仍然有一个“强制停止”选项。应用程序此时不应该已经死了吗？

不。

> 为什么我可以选择强制停止正式死机的应用程序？

因为进程没有“死”。Android 将保留您的流程一段时间，以防用户在不久的将来碰巧重新进入您的应用程序。如果 Android 需要 RAM 来支持其他应用程序，它将终止您的进程。

您看到的行为是完全正常的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-13T00:14:53.297

使用`BACK`按钮完成一个`Activity`，即“应用程序”的当前 UI 部分。

一个常见的错误是假设 an`Activity`是整个“应用程序”，但不一定如此。正如 CommonsWare 所指出的，操作系统没有必要立即清理与运行进程相关的所有部分——事实上，如果用户短暂离开然后很快又重新访问它，`Activity`这可能是违反直觉的`Activity`后。

Android 在管理资源和释放资源方面实际上非常有效（如果其他“应用程序”需要）。在特定`Activity`完成后保留/维护的内容不值得担心......或者至少如果开发人员正确清理了代码中的内容，*则不应该担心。*

“App Killer”应用程序文化的一部分与人们假设应用程序在完成时没有正确清理有关`Activity`。如果编写正确，他们会这样做，而 Android 将在必要时完成剩下的工作。

# xcode - 如何使 xcode ios 应用程序不垂直查看

> ID：10568229
> 
> 赞同：0
> 
> 时间：2012-05-12T23:34:44.247
> 
> 标签：xcode, interface-builder, landscape-portrait

所以，我有一个 ios 应用程序，我用 interface builder 和 xcode 构建了它。我在水平视图中使用界面构建器构建它，因为这就是我想要我的应用程序的方式。我还制作了左右横向支持的视图，并编辑了 info.plist 以使其水平打开。

但是当我构建并运行它时，它会在 iphone 模拟器中水平打开，但如果它是垂直的，它就会显示出来。

这是一些屏幕截图：我希望它看起来像： [http ://www.sendspace.com/file/4ct4b0](http://www.sendspace.com/file/4ct4b0)

它实际上是什么样子： [http ://www.sendspace.com/file/fayjqj](http://www.sendspace.com/file/fayjqj)

我怎样才能让它像我想要的那样打开？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T23:57:17.347

您还必须在执行`UIViewController`using时允许定向`shouldAutorotateToInterfaceOrientation`：

```
- (BOOL)shouldAutorotateToInterfaceOrientation: (UIInterfaceOrientation)interfaceOrientation {
         return YES; //or UIInterfaceOrientationIsLandscape(interfaceOrientation) for just landscape
 } 
```

此外，如果您还有更多问题，请查看链接到此“过时”问题的 SO 问题： [iPhone app in landscape mode, 2008 systems](https://stackoverflow.com/questions/402/iphone-app-in-landscape-mode)

# osgi - OSGi 组件模型中的捆绑内和捆绑间相互依赖关系

> ID：10568236
> 
> 赞同：3
> 
> 时间：2012-05-12T23:36:13.600
> 
> 标签：osgi, declarative-services, ipojo, blueprint-osgi

在我当前的应用程序中，我在几个地方遇到了这种模式：我在一个包中有两个服务接口，它们执行不同但相关的工作。

```
interface Service1 { ... }

interface Service2 { ... } 
```

并希望让单例组件实现两者，但发现每个组件都需要对另一个组件的引用：

```
public class Service1Impl implements Service1 { 

    private Service2 service2;
    ...

}

public class Service2Impl implements Service2 { 

    private Service1 service1;
    ...

} 
```

三个 OSGi 组件模型（DS、Blueprint 和 iPOJO）中的哪一个允许这样做： 1) 何时`Service1Impl`和`Service2Impl`在同一个包中；2）当它们在不同的包中时？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-14T06:12:58.070

声明式服务规范，版本 1.1：

> 112.3.5 循环引用
> 
> 一组组件描述可以创建循环依赖。例如，如果组件 A 引用了组件 B 提供的服务，而组件 B 引用了组件 A 提供的服务，则如果不访问另一个组件的部分激活的组件实例，则无法满足一个组件的组件配置。SCR 必须确保组件实例永远不会被另一个组件实例访问或作为服务访问，直到它被完全激活，也就是说，如果它有一个，它已经从它的 activate 方法返回。
> 
> 循环引用必须在 SCR 尝试满足组件配置时检测到，并且 SCR 必须无法满足循环中涉及的引用，并使用日志服务记录错误消息（如果存在）。但是，如果循环中的引用之一具有可选的基数，则 SCR 必须打破循环。可以满足具有可选基数的引用并将其绑定到零目标服务。因此，循环被打破，其他参考可能会得到满足。

蓝图规范明确允许这样做，前提是依赖循环的至少一个成员将其他成员作为属性而不是参数（121.2.6 循环依赖）：

> 当请求循环的成员提供组件实例时，蓝图容器必须通过在循环的成员中找到一个破坏成员来破坏循环。破坏成员必须对导致循环的依赖项使用属性注入。蓝图容器可以选择循环中任何合适的成员来破坏成员，如果找不到这样的成员，则初始化失败或 getComponentInstance 方法必须抛出组件定义异常。
> 
> 当要求提供对象时，中断成员必须返回部分初始化的组件实例。部分初始化的对象已完成所有可能的初始化，但尚未使用 initMethod（如果指定）调用，也未注入任何导致循环的属性。部分初始化的组件实例的最终确定必须延迟到中断成员已被注入循环的所有引用成员中。终结意味着注入任何剩余的未设置属性并调用 initMethod（如果指定）。
> 
> 部分初始化的组件实例的结果是它们可以在设置所有属性之前使用，应用程序必须意识到这一点。
> 
> 所有部分初始化的组件实例必须在蓝图容器进入运行时阶段之前完成，并且在调用 getComponentInstance 方法返回组件实例之前。必须检测通过递归调用 getComponentInstance 方法导致动态循环的用户代码并导致失败，这些循环不能被打破。
> 
> 应记录所有检测到的循环。

对于 iPOJO

> 支持你的具体情况。我不能在不知道进一步描述的情况下谈论其他情况。

（在邮件列表中收到答复）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-13T02:48:08.537

严格来说，你说的是不可能的，因为循环依赖。

Service1 只能在 Service2 处于活动状态时才能运行，反之亦然，因此框架启动您的服务没有顺序。

据我所知，如果您将其中一个服务引用设为可选，则*可以*使其工作，因此它可以在注入服务之前提供其服务，因此另一个 serviceimpl 可以返回其服务。

您可以在所有三个框架中执行此操作。iPojo 有[可选的引用](http://felix.apache.org/site/service-requirement-handler.html#ServiceRequirementHandler-OptionalRequirement%2528Scalar%2529 "可选参考")，DS 有一个服务需求的基数设置（使用 0..1 作为可选引用而不是 1..1）。蓝图我不是很了解，但我确信可以做到。

问候， 弗兰克

# php - php if foreach 语句有效，但其他消息不显示

> ID：10568239
> 
> 赞同：2
> 
> 时间：2012-05-12T23:37:00.490
> 
> 标签：php, if-statement, foreach

我从我的模型中获取一组数据，并使用 php foreach 语句将其显示在视图中。我正在添加另一层逻辑以仅显示某些书签 ID。

数据显示正常；但由于某种原因，“else”消息（与第一个 if 子句相关）没有显示是否没有返回数据。我需要弄清楚如何显示该消息。

```
<?php 

     if ($bookmark): 
     foreach($bookmark as $b): ?>               

     <?php if ($b->bookmark_id != 0) { ?>               

     <li><?php echo $bk->user_id; ?> <?php echo $bk->bookmark_name; ?></li>

     <?php } ?>

     <?php
      endforeach;
        else:
          print "Your bookmark list is empty.";
    endif;

?> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-12T23:55:15.153

你测试 $bookmark 是否存在！我假设它总是存在的，要么是空的，要么是值数组！

**尝试这个：**

```
<?php 

if (is_array($bookmark) && count($bookmark)>=1): 
  foreach($bookmark as $b): ?>               

  <?php if ($b->bookmark_id != 0) { ?>               

    <li><?php echo $bk->bookmark_name; ?></li>

  <?php } ?>

  <?php
  endforeach;
else:
  print "Your bookmark list is empty.";
endif;

?> 
```

阅读：PHP [is_array()](http://php.net/manual/en/function.is-array.php) | [数数（）](http://php.net/manual/en/function.count.php)

# 已编辑

**与最近发表的评论相关** *“是的，数组正在返回结果；我正在使用第二个 if 语句来限制显示的内容。听起来我的 else 语句应该与第二个 if 子句而不是第一个子句相关联。问题对我来说，不是有没有结果，而是过滤后的结果有没有残留。”* ：

```
<?php 

// reset variable
$count = 0;

// if it is an array and is not empty
if (is_array($bookmark) && count($bookmark)>=1): 
  foreach($bookmark as $b):
    if ($b->bookmark_id != 0) {               
      echo '<li>' . $bk->bookmark_name . '</li>';
    } else {
      $count++; // no data, increase
    }

    // check if the counter was increased 
    if ($count>=1) {
      print "Your bookmark list is empty.";
    }
  endforeach;
else:
  print "bookmark not found.";
endif;

?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T23:59:14.917

For one reason or another, `$bookmark` is evaluating to true. Since empty strings and arrays already evaluate to false in PHP, we might reasonably suppose that `$bookmark` is in fact an object. Since we can iterate over it with `foreach`, it is probably an instance of [ArrayObject](http://php.net/manual/en/class.arrayobject.php), or a class that extends it. We could debug the exact type of `$bookmark` by writing:

`var_dump($bookmark);`

Since an empty object instance evaluates to true in a PHP conditional, we need to be more specific about what we're checking for.

`if(count($bookmark) > 0):`

This should trigger the else condition properly. As a side note, you should really indent your code properly. :)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-29T11:52:17.823

```
if (is_array($bookmark) && !empty($bookmark)) { 
  foreach ($bookmark as $item) {               
   ...
  }
} else {
  echo "Your bookmark list is empty.";
} 
```

# flash - 了解框架脚本中的“onenterframe”

> ID：10568243
> 
> 赞同：0
> 
> 时间：2012-05-12T23:38:22.020
> 
> 标签：flash, actionscript, actionscript-2

我无法理解帧级代码和 onenterframe 代码。我有两个具有动作脚本代码的框架。我在关键帧 frame1 和 frame2 有以下代码。当它在帧级别循环帧跟踪消息并打印 onenterframe 时。onenterframe代码有什么用。代码可以在帧级别插入。我认为当播放头进入帧时第一次调用帧级别的代码。当我删除 frame2 并且只有 frame1 只执行一次帧级跟踪代码时。不确定如何用一帧执行一次帧级代码，以及是否多次执行两帧帧级代码。

```
**FRAME1**
    trace("frame level");

    this.onEnterFrame =function()
    {
        trace("calling onenterframe");
    }

**FRAME2**

trace(" second frame level");
this.onEnterFrame =function()
{
    trace("calling second onenterframe");
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-13T03:07:53.680

**框架代码**

```
stop();

trace("frame level");

this.onEnterFrame = function()
{
    trace("calling onenterframe");
} 
```

运行上面的代码将显示你所期望的，即`calling onenterframe`多次输出。

基本上，由于您不使用**stop** flash，因此会不断循环帧并运行帧脚本。

使用 stop() 可确保 flash 运行帧脚本一次并停止。

如果您添加一个进入帧事件，那么该函数将被一次又一次地调用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-13T08:06:38.523

根据您的帧速率调用 Enterframe。如果每秒有 24 帧，则 enterframe 处理程序每​​秒被调用 24 次。只有当播放头到达帧时才会执行帧代码。如果您从不停止循环播放影片剪辑，您将同时执行 framescript 和 onEnterFrame 脚本。

# jquery - 随机删除数学

> ID：10568244
> 
> 赞同：0
> 
> 时间：2012-05-12T23:38:50.927
> 
> 标签：jquery, slideshow

我试图找到一种方法从这段代码中删除 math.random 函数，但没有成功。我需要用于幻灯片的代码以给定字符串的顺序显示它们。当我删除 math.random 时，第一张图片（从 html 链接）出现，并且字符串中的图片不会加载。有谁知道如何从这段代码中删除 math.random 吗？

```
$(function() {
var images = ["home_photo_welshboy.jpg","home_photo_jam343.jpg","home_photo_xdjio.jpg","home_photo_ccgd.jpg"];
$('<img>').attr({'src':'http://l.yimg.com/g/images/'+images[0],'id':'bg','alt':''}).appendTo('#bg-wrapper').parent().fadeIn(1000);
    $('.change').click(function(e) {
    e.preventDefault();
    var image = images[Math.floor(Math.random()*images.length)];
        $('#bg').parent().fadeOut(200, function() {
            $('#bg').attr('src', 'http://l.yimg.com/g/images/'+image); 
              $(this).fadeIn(200);
        });
    });
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T23:44:41.813

为当前图像保留一个计数器：

```
$(function() {
    // ...
    var current_image = 0;

    $('.change').click(function(e) {
        // ...
        var image = images[current_image++ % images.length];
        // ...
    });
}); 
```

由于模数，每次点击都会`current_image`增加并“环绕”。

当然你也可以让它更明确：

```
current_image = (current_image + 1) % images.length;
var image = images[current_image]; 
```

# c# - 测量弦高

> ID：10568248
> 
> 赞同：3
> 
> 时间：2012-05-12T23:39:49.870
> 
> 标签：c#, graphics, printing, system.drawing

我的程序使用 PrintPage 事件将多行文本绘制到 PrintDocument 的框中。宽度已设置，但高度应根据文本大小增加。

```
int BoxHeight = (int)e.Graphics.MeasureString(StringToDraw, FontToUse, BoxWidth).Height; 
```

这通常会返回我大部分时间寻找的高度的两倍，但并非总是如此。e 对象是传递给 PrintDocument.PrintPage 事件的 System.Drawing.Printing.PrintPageEventArgs。我希望盒子能紧紧地贴合文本，不浪费任何枯树来打印白色的空白空间。

我一直在寻找解决方案，但也许有些东西我不明白，因为我无法让它们为我工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T14:59:13.617

发现了问题。我已将 BoxWidth 设置为应有的一半。现在效果很好。

# c++ - 是否有一个快速的内存队列我可以使用它在达到一定大小时交换项目？

> ID：10568250
> 
> 赞同：15
> 
> 时间：2012-05-12T23:40:09.823
> 
> 标签：c++, c, io, cuda, message-queue

我使用 c/c++/cuda 不到一周，并且不熟悉库方面的所有可用选项（抱歉，如果我的问题太古怪或不可能）。这是我的问题，我有一个过程，它获取数据并对其进行分析，然后执行 3 件事中的 1 件事，(1) 保存结果，(2) 丢弃结果或 (3) 分解数据并将其发送回处理。

通常选项（3）会创建大量数据，我很快就会超过我可用的内存（我的服务器是 16 gigs）所以我解决这个问题的方法是设置一个队列服务器（rabbitmq），我将发送和接收工作from（一旦达到一定大小的内存，它就会交换队列）。当我使用具有更快 nic 的小型服务器来传输数据时，这非常有效，但最近我一直在学习并将我的代码从 Java 转换为 c/c++ 并在 GPU 上运行，这使得队列成为一个很大的瓶颈。瓶颈显然是网络 io（廉价系统上的分析显示 cpu 使用率很高，并且在旧 gpu 上类似，但新的更快的 cpus/gpus 没有得到充分利用，网络 IO 稳定在 300-400/mbs）。所以我决定尝试完全消除网络并在服务器上本地运行队列服务器，这使它更快，但我怀疑如果我使用不依赖外部网络服务的解决方案可能会更快（即使我我在本地运行它们）。它可能行不通，但我想尝试一下。

所以我的问题是，有什么我可以像队列一样使用的东西，我可以在读取条目时删除它们，但也可以在队列达到一定大小时将其交换到磁盘（但保持内存中的队列总是满的，所以我不不必等待从磁盘读取）？在学习 Cuda 时，有很多研究人员对大型数据集进行分析的例子，关于他们如何让数据以最快的速度进入系统以供系统处理的任何想法（我想他们不受磁盘/网络的约束，否则更快的 gpu真的不会让他们的性能大幅提升）？

这样的事情存在吗？

ps 如果有帮助，到目前为止，我已经尝试过 rabbitmq（对我的情况来说太慢了），apollo mq（很好但仍然基于网络），reddis（真的很喜欢它但不能超过物理内存），玩 mmap()，我'还压缩了我的数据以获得更好的吞吐量。我知道一般的解决方案，但我想知道是否有 c/c++、cuda 或我可以使用的库（*理想情况下，我会在 Cuda 全局内存中有一个队列，该队列交换到交换到磁盘的主机内存，所以GPU 将始终全速运行*，但这可能是一厢情愿的想法）。如果您还有其他想法，请告诉我，我会很乐意尝试（如果有帮助，我会在 Mac 上开发并在 linux 上运行）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T18:17:04.983

让我建议一些完全不同的东西。

对于有经验的程序员来说，构建自定义解决方案不会太难，但对于没有经验甚至是中级程序员来说，可能不可能产生健壮和可靠的东西。

你考虑过DBMS吗？

对于小型数据集，它将全部缓存在内存中。随着它的发展，DBMS 将拥有一些非常复杂的缓存/分页技术。您可以免费获得排序/优先排序、同步/共享等好东西。

一个写得很好的自定义解决方案将比 DBMS 快得多，但在开发和维护自定义解决方案方面会产生巨大的成本。花一些时间优化和调整 DBMS，它开始看起来非常快并且非常健壮。

它可能不符合您的需求，但我建议您在拒绝之前仔细研究一下 DBMS。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-16T18:22:42.050

标准模板库容器的开源实现就是为了解决这个问题而创建的。

[STXXL](http://stxxl.sourceforge.net/)几乎透明地将数据交换到任何标准 STL 容器的磁盘。它写得很好，维护得很好，并且很容易适应/迁移你的代码，因为它与 STL 相似。

另一种选择是使用现有的 STL 容器，但指定一个磁盘支持的分配器。所有的 STL 容器都有一个 STL 分配器的模板参数，它指定如何存储条目的内存。有一个很好的磁盘支持的 STL 分配器就在我的舌尖上，但我似乎无法通过 Google 找到（如果/当我这样做时，我会更新它）。

编辑：我看到罗杰实际上已经[在评论](https://stackoverflow.com/questions/10568250/is-there-a-fast-in-memory-queue-i-can-use-that-swaps-items-as-it-reaches-a-certa/10624390#comment13682411_10568250)中提到了这一点。

# c# - 命名空间内的方法c#

> ID：10568254
> 
> 赞同：11
> 
> 时间：2012-05-12T23:41:37.240
> 
> 标签：c#, class, syntax, namespaces

有什么方法可以调用命名空间内的函数而不在 c# 中声明类。

例如，如果我有 2 个完全相同的方法并且应该在我的所有 C# 项目中使用，有没有办法将这些函数变成一个 dll，然后在顶部说“使用 myTwoMethods”并开始使用方法而不声明类？

现在，我这样做：MyClass.MyMethod();

我想做：MyMethod();

谢谢，罗希特

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-05-13T00:40:01.333

2015 年更新：不，您不能在 C# 中创建“自由函数”，但从 C# 6 开始，您将能够在不提及类名的情况下调用静态函数。[C# 6 将具有](https://msdn.microsoft.com/en-us/magazine/dn683793.aspx)允许以下语法的“使用静态”功能：

```
static class MyClass {
     public static void MyMethod();
} 
```

SomeOtherFile.cs：

```
using static MyClass;

void SomeMethod() {
    MyMethod();
} 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-05-12T23:56:54.317

您不能在类之外声明方法，但您可以使用类库项目中的静态帮助程序类来做到这一点。

```
public static class HelperClass
{
    public static void HelperMethod() {
        // ...
    }
} 
```

用法（在添加对您的类库的引用之后）。

```
HelperClass.HelperMethod(); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-13T00:19:32.963

根据使用扩展方法的建议，您可以使该方法成为 System.Object 的扩展方法，所有类都从该方法派生。我不会提倡这一点，但关于你的问题，这可能是一个答案。

```
namespace SomeNamespace
{
    public static class Extensions
    {
      public static void MyMethod(this System.Object o)
      {
        // Do something here.
      }
    }
} 
```

您现在可以像`MyMethod();`在任何`using SomeNamespace;`拥有`Extensions.MyMethod(null)`.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-12T23:43:57.547

取决于我们正在谈论的方法类型，您可以查看扩展方法：

[http://msdn.microsoft.com/en-us/library/bb383977.aspx](http://msdn.microsoft.com/en-us/library/bb383977.aspx)

这使您可以轻松地向现有对象添加额外的功能。

# php - 简单的 PHP 聊天怪癖

> ID：10568255
> 
> 赞同：3
> 
> 时间：2012-05-12T23:41:43.017
> 
> 标签：php, jquery, mysql, chat

我一直在做一个快速简单的 jQuery/PHP 聊天，放在我的网站上供访问者交流。我已经估计了 200 个同时网站用户（连接用户）的峰值，最多 10-20 人实际聊天。

**这是怪癖：**

正如我已经经历过两次（认为这似乎是一个不太可能发生的事件，而不是在您执行特定操作后发生的事情）**，聊天恰好加载了多条已经是红色的消息并显示它们。**

为了让聊天系统尽可能简单，我想出了以下代码：

* * *

**HTML 代码：**

```
<div class="chat">

    <ul class="chat">

        <li class="chat" >

            <h5 class="chat">Date</h5>
            <h6 class="chat">Time</h6>
            <h4 class="chat">User</h4>
            <br/>
            <q class="chat">Message</q>

        </li>

    </ul>

    <input class="chat" placeholder="write something..."/>

</div> 
```

如您所见，我为 jQuery 放置了一个占位符*li*元素，以用作片段来使用实际消息创建新的*li元素，***并将**它们添加到*ul*元素中。

* * *

**jQuery代码：**

发送消息：

```
$(document).ready(function(){

    chatSnippet = $('ul.chat').html(); // here chatSnippet is a global variable
    $('ul.chat').html('');

    $('input.chat').change(function(event){// Send your message

    message = $(this).attr('value');

// first thing I perform an asynchronous POST to the receiving php script

    $.post(

        'php/chatRec.php',

        {

            user : currentUser,
            message: message,

        }

    );

// meanwhile I add a new li element to the chat html with the content just submitted

    date.setTime(event.timeStamp);

    hours = ''+date.getHours();

    if(hours.length < 2) hours = '0'+hours;

    minutes = ''+date.getMinutes();

    if(minutes.length < 2) minutes = '0'+minutes;

    day = ''+date.getDate();

    if(day.length < 2) day = '0'+day;

    newChatMessage = chatSnippet.replace('Date', ''+day+' '+months[date.getMonth()]);
    // here months is an array with the months names (in italian)
    newChatMessage = newChatMessage.replace('Time', ''+hours+':'+minutes);

    newChatMessage = newChatMessage.replace('User', connectedUser);

    newChatMessage = newChatMessage.replace('Message', message);

    $mess = $(newChatMessage);

    $mess.hide().prependTo('ul.chat').fadeIn(500);

    $(this).attr('value','');

});

refreshChat(''); // this function retrives new messages from the DB

// Here I perform a void refreshChat call so I'll get all the messages in the DB regardless from the currentUser (at page refresh)

}); 
```

接收消息：

```
// This code is placed outside (before) the .ready function

function refreshChat(user){// Receiving messages

$.post(

    'php/chatInv.php',

    {

        user : user,
        token: lastMessage // this variable contains the token of the last red message

    },

    function(data){

        receivedMessages = jQuery.parseJSON(data);

        for(message in receivedMessages){

            message = receivedMessages[message].Message;

            date = receivedMessages[message].Day.split('-');
            time = receivedMessages[message].Time.split(':');

            newChatMessage = chatSnippet.replace('Date', ''+date[2]+' '+months[parseInt(date[1])-1]);

            newChatMessage = newChatMessage.replace('Time', ''+time[0]+':'+time[1]);

            newChatMessage = newChatMessage.replace('User', receivedMessages[message].Sender);

            newChatMessage = newChatMessage.replace('Message', message);

            $mess = $(newChatMessage);

            $mess.hide().prependTo('ul.chat').fadeIn(500);

            lastMessage = receivedMessages[messages].token;

        }

        nextRefresh = setTimeout("refreshChat('"+currentUser+"')",2000);

// When I'm done I set a timeout of 2 secs and then perform another refresh

    }

);

} 
```

* * *

**PHP代码：**

收到一条新消息（我认为问题出在此处）：

```
 mysql_connect("localhost", "root", "root") or die(mysql_error());
    mysql_select_db("chat") or die(mysql_error());

    $characters = array('0','1','2','3','4','5','6','7','8','9','a','b','c','d','e','f','g','h','i','j','k','l','m','n','o','p','q','r','s','t','u','v','w','x','y','z','A','B','C','D','E','F','G','H','I','J','K','L','M','N','O','P','Q','R','S','T','U','V','W','X','Y','Z');

    $token = $characters[rand(0,61)].$characters[rand(0,61)].$characters[rand(0,61)].$characters[rand(0,61)].$characters[rand(0,61)];

    $all_Msgs = mysql_query("SELECT * FROM Messages ORDER BY ID");

    $prev_Msg = array('ID' => 1 , 'Sender' => $_POST['user'], 'Message' => $_POST['message'], 'Day' => date("Y-m-d"), 'Time' => date("H:i:s"), 'token' => $token);

    while($Msg = mysql_fetch_array($all_Msgs)){

        $update_success = mysql_query("UPDATE Messages SET Sender='".$prev_Msg['Sender']."', Message='".$prev_Msg['Message']."', Day='".$prev_Msg['Day']."', Time='".$prev_Msg['Time']."', token = '".$prev_Msg['token']."' WHERE ID=".$Msg['ID']);

        $prev_Msg = $Msg;

    } 
```

基本上我在这里所做的是接收新的帖子消息，生成一个令牌和一个包含新输入数据的数组元素（它本身就是一个数组），这样做我在一个固定大小的 SQL 表上执行更新语句的序列，覆盖新的第一条记录上的数据，然后用前一条记录覆盖每个记录（这样最后一条记录将最终丢失）。

发送消息：

```
 mysql_connect("localhost", "root", "root") or die(mysql_error());
    mysql_select_db("chat") or die(mysql_error());

    $receiver = $_POST['user'];
    $token = $_POST['token'];

    $all_Msgs = mysql_query("SELECT * FROM Messages ORDER BY ID");

    $newMessages = array();

    while($Msg = mysql_fetch_array($all_Msgs)){

        if($Msg['token'] == $token) break;

        if($Msg['Sender'] != $receiver) array_unshift($newMessages,$Msg);

    }

    echo json_encode($newMessages); 
```

因此，我将在最后一条已知消息之后插入的数据库中所有记录的数组的 JSON 编码发送给客户端，并且其作者不是查询客户端。

* * *

**我的嫌疑人：**

我得出的结论是，在执行消息接收（服务器端）时，从数据库中获取每条消息都有一个时间跨度，如果同时执行刷新，则找不到消息，并且如果该消息是我们正在寻找的*最后一条红色消息*，那么服务器将只选择表中的所有消息并将它们发送回来。

结果是你看到一堆你已经红色的消息，中间没有你的消息（因为它们被添加到视图客户端并且服务器脚本不会给你发回你自己的消息）

表示：

*   我不在乎消息是否不完全按照实际的插入顺序：假设 A 和 B 正在聊天，实际的真实消息顺序是 BAB，但 A 可能会设置 ABB 的顺序，因为他的视图会在输入时立即更新（这有助于我保持“快速实时”的感觉）
*   我不在乎是否丢失了某些消息（例如，如果它在有人可以阅读之前就落在了固定的 DB 表边缘）
*   这个时候我不太关心实际的效率、速度和优化
*   我知道我应该以不同的方式处理消息插入，添加新记录，然后仅更新 ID 并删除最后一条记录。但如果可能的话，我想保持这种仅更新的方式。

**你认为我对这个问题的解释是正确的吗？** 如果不是：那会是什么原因？/我该如何解决？如果是：我怎样才能轻松解决这个问题？

如果实际修复相当复杂：在 10 到 20 个用户聊天中，这种怪癖实际发生的可能性有多大？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T07:57:58.227

我在处理聊天代码时也注意到了这一点，解决方案是将最后一个消息 ID（在 MySQL 中设置为自动增量字段）存储在会话中，并在数据库中搜索 ID 高于该 ID 的消息，而不是使用时间（）函数。

```
if (!$_SESSION['message_id']]) {
// if there isn't a message_id, select the last seven entries in the message list
    $sql = "SELECT messages.message_id, messages.message, users.username FROM (SELECT * FROM messages, users user.user_id = messages.user_id ORDER BY message_id DESC LIMIT 7) as new_tbl ORDER BY message_id ASC";
} else {
// if there is a message_id, select the messages sent since the last entry
    $sql = sprintf("SELECT messages.message_id, messages.message, users.username FROM messages, users WHERE user.user_id = messages.user_id message_id > '%d'", $_SESSION['message_id']);
}

$data = array();
$query = mysql_query($sql);
while ($row = mysql_fetch_array($query)) {
// build the data array from the mysql result and set the message_id session to the id of the last message
    $data[$i] = array('user' => $row['username'], 'message' => $row['message']);
    $_SESSION['message_id'] = $row['message_id'] > $_SESSION['message_id'] ? $row['message_id'] : $_SESSION['message_id'];
    $i++;
} 
```

显然你需要逃避会话！

如果没有 message_id 会话，它会从表中加载最后 7 条消息（按降序排列，然后按升序排列这些消息）。如果有 message_id 会话，它会加载新消息。

在 while 循环中，它构建一个数据数组（我将它作为 JSON 发送到我的脚本）并将 message_id 会话设置为 message_id 行，并进行故障安全检查以确保 message_id 会话最终不会被降低。

SQL 意味着您有一个包含 user_id 和 username 的用户表，以及一个包含 user_id、message_id 和 message 的消息表。

# c# - 根据列表检查数据表列

> ID：10568272
> 
> 赞同：0
> 
> 时间：2012-05-12T23:45:30.710
> 
> 标签：c#, asp.net

假设我有一个值列表。（目前在一张纸上，但这可能是 List 或您建议的任何内容）。

如下：

```
Name,
Type,
Phone,
Contract, 
Remark 
```

现在我有一个从文件导入的数据表。我需要检查数据表是否包含我列表中的相同列。（所以我的数据表应该有 5 列`Name, Type, Phone, Contract, Remark).`我想检查而不考虑位置，但如果列的持久位置更快，我更喜欢更快的解决方案。我知道你可以像

```
Foreach column in datatable 
if columnname exist in list and ListSize ==Datatable.Columns.Count then 
    continue 
else 
    return false`. 
```

但我想要一个更快的解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T23:57:22.183

查找值的最快方法是使用哈希表。在这种情况下，我会建议一个`HashSet<T>`

```
var requiredColumns = new HashSet<string>
    { "Name", "Type", "Phone", "Contract", "Remark" };
if (datatable.Columns.Count != requiredColumns.Count) {
    Console.WriteLine("Number of columns does not match!");
} else {
    for (int i = 0; i < datatable.Columns.Count; i++) {
        string colname = datatable.Columns[i].Name;
        if (!requiredColumns.Contains(colname)) {
            Console.WriteLine("Unknown column [{0}]", colname);
        }
    }  
} 
```

# java - Maven 依赖的 NoClassDefFoundError

> ID：10568275
> 
> 赞同：81
> 
> 时间：2012-05-12T23:45:41.920
> 
> 标签：java, maven, maven-3

我第一次使用 Maven，我被依赖项困住了。

我用 Eclipse 创建了一个 Maven 项目并添加了依赖项，它运行正常。

但是当我尝试通过命令行运行它时：

```
$ mvn package  # successfully completes
$ java -cp target/bil138_4-0.0.1-SNAPSHOT.jar tr.edu.hacettepe.cs.b21127113.bil138_4.App # NoClassDefFoundError for dependencies 
```

它下载依赖项，成功构建，但是当我尝试运行它时，我得到 NoClassDefFoundError：

```
Exception in thread "main" java.lang.NoClassDefFoundError: org/codehaus/jackson/JsonParseException
        at tr.edu.hacettepe.cs.b21127113.bil138_4.db.DatabaseManager.<init>(DatabaseManager.java:16)
        at tr.edu.hacettepe.cs.b21127113.bil138_4.db.DatabaseManager.<init>(DatabaseManager.java:22)
        at tr.edu.hacettepe.cs.b21127113.bil138_4.App.main(App.java:10)
Caused by: java.lang.ClassNotFoundException: org.codehaus.jackson.JsonParseException
        at java.net.URLClassLoader$1.run(URLClassLoader.java:217)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.net.URLClassLoader.findClass(URLClassLoader.java:205)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:321)
        at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:294)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:266)
        ... 3 more 
```

我的 pom.xml 是这样的：

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
  <modelVersion>4.0.0</modelVersion>

  <groupId>tr.edu.hacettepe.cs.b21127113</groupId>
  <artifactId>bil138_4</artifactId>
  <version>0.0.1-SNAPSHOT</version>
  <packaging>jar</packaging>

  <name>bil138_4</name>
  <url>http://maven.apache.org</url>

  <properties>
    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
  </properties>

  <dependencies>        
    <dependency>
            <groupId>org.codehaus.jackson</groupId>
            <artifactId>jackson-core-asl</artifactId>           
    </dependency>
        <dependency>
            <groupId>org.codehaus.jackson</groupId>
            <artifactId>jackson-mapper-asl</artifactId>             
        </dependency>
  </dependencies>
  <dependencyManagement>
    <dependencies>
    <dependency>
        <groupId>org.codehaus.jackson</groupId>
        <artifactId>jackson-core-asl</artifactId>
        <version>1.9.6</version>
    </dependency>
    <dependency>
        <groupId>org.codehaus.jackson</groupId>
        <artifactId>jackson-mapper-asl</artifactId>
        <version>1.9.6</version>
    </dependency>
    </dependencies>
  </dependencyManagement>
</project> 
```

谁能帮我？

* * *

## 回答 #1

> 赞同：141
> 
> 时间：2012-05-13T04:54:46.290

默认情况下，Maven 不会在它构建的 JAR 文件中捆绑依赖项，并且当您尝试在命令行执行 JAR 文件时，您不会在类路径中提供它们。这就是为什么 Java VM 在尝试执行代码时找不到库类文件的原因。

您可以使用参数手动指定类路径上的库`-cp`，但这很快就会变得令人厌烦。

更好的解决方案是将库代码“隐藏”到输出 JAR 文件中。有一个名为[maven-shade-plugin](http://maven.apache.org/plugins/maven-shade-plugin)的 Maven 插件可以执行此操作。你需要在你的 POM 中注册它，当你运行`mvn package`.

要简单地捆绑所有必需的库，请将以下内容添加到您的 POM：

```
<project>
  ...
  <build>
    <plugins>
      <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-shade-plugin</artifactId>
        <version>3.2.4</version>
        <executions>
          <execution>
            <phase>package</phase>
            <goals>
              <goal>shade</goal>
            </goals>
          </execution>
        </executions>
      </plugin>
    </plugins>
  </build>
  ...
</project> 
```

完成后，您可以重新运行上面使用的命令：

```
$ mvn package
$ java -cp target/bil138_4-0.0.1-SNAPSHOT.jar tr.edu.hacettepe.cs.b21127113.bil138_4.App 
```

如果您想根据应包含的 JAR 对 shade 插件进行进一步配置，为可执行 JAR 文件指定 Main-Class，等等，请参阅[maven-shade-plugin 站点](http://maven.apache.org/plugins/maven-shade-plugin)上的“示例”部分。

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-05-12T23:59:32.653

> 当我尝试运行它时，我得到 NoClassDefFoundError

怎么运行？您可能试图在没有正确导入 Maven 类路径的情况下使用 eclipse 运行它。请参阅[m2eclipse](http://www.sonatype.org/m2eclipse)插件以将 maven 与 eclipse 集成。

要验证您的 Maven 配置是否正确，您可以使用[exec 插件](http://mojo.codehaus.org/exec-maven-plugin/)运行您的应用程序：

```
mvn exec:java -D exec.mainClass=<your main class> 
```

**更新：**首先，关于你运行时的错误`exec:java`，你的主类是`tr.edu.hacettepe.cs.b21127113.bil138_4.App`. 在谈论类名时，它们（几乎）总是用点分隔。简单的类名只是最后一部分：`App`在您的情况下。完全限定的名称是完整的包加上简单的类名，当你想运行某些东西时，这就是你给 maven 或 java 的名称。您尝试使用的是源文件的文件系统路径。那是完全不同的野兽。与文件系统中的源文件相比，类名通常直接转换为在类路径中找到的类文件。在您的特定情况下，有问题的类文件可能会在，`target/classes/tr/edu/hacettepe/cs/b21127113/bil138_4/App.class`因为 maven 编译为`target/classes`，而 java 传统上会为每个级别的打包创建一个目录。

您最初的问题只是您没有将杰克逊罐子放在您的课​​程路径上。当你从命令行运行一个 java 程序时，你必须设置类路径，让它知道它可以从哪里加载类。您已经添加了自己的 jar，但没有添加其他必需的 jar。您的评论让我觉得您不了解如何手动构建类路径。简而言之，类路径可以有两件事：包含类文件的目录和包含类文件的 jar。包含 jar 的目录将不起作用。有关构建类路径的更多详细信息，请参阅“[设置类路径](http://docs.oracle.com/javase/7/docs/technotes/tools/windows/classpath.html)”和[java](http://docs.oracle.com/javase/6/docs/technotes/tools/solaris/java.html)和[javac](http://docs.oracle.com/javase/6/docs/technotes/tools/solaris/javac.html)工具文档。

您的类路径至少需要是，并且没有换行符：

```
target/bil138_4-0.0.1-SNAPSHOT.jar:
/home/utdemir/.m2/repository/org/codehaus/jackson/jackson-core-asl/1.9.6/jackson-core-asl-1.9.6.jar:
/home/utdemir/.m2/repository/org/codehaus/jackson/jackson-mapper-asl/1.9.6/jackson-mapper-asl-1.9.6.jar 
```

请注意，Windows 上的分隔符是分号 (;)。

我很抱歉没有早点注意到它。问题就在你原来的帖子里，但我错过了。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2014-10-26T06:30:10.707

您必须在 pom 文件中为您的依赖项创建类路径。因此，您必须将所有依赖项复制到一个地方。

[检查我的博客](http://madhawagunasekara.blogspot.com/2014/10/solving-javalangnoclassdeffounderror-in.html)。

```
<build>
  <plugins>
    <plugin>
      <groupId>org.apache.maven.plugins</groupId>
      <artifactId>maven-dependency-plugin</artifactId>
      <version>2.1</version>
      <executions>
        <execution>
          <id>copy-dependencies</id>
          <phase>package</phase>
          <goals>
            <goal>copy-dependencies</goal>
          </goals>
          <configuration>
            <outputDirectory>${project.build.directory}/lib</outputDirectory>
            <overWriteReleases>false</overWriteReleases>
            <overWriteSnapshots>false</overWriteSnapshots>
            <overWriteIfNewer>true</overWriteIfNewer>
          </configuration>
        </execution>
      </executions>
    </plugin>
    <plugin>
      <groupId>org.apache.maven.plugins</groupId>
      <artifactId>maven-jar-plugin</artifactId>
      <version>2.4</version>
      <configuration>
        <archive>
          <manifest>
            <addClasspath>true</addClasspath>
            <classpathPrefix>lib/</classpathPrefix>
            <mainClass>$fullqualified path to your main Class</mainClass>
          </manifest>
        </archive>
      </configuration>
    </plugin>
  </plugins>
</build> 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-03-16T03:19:48.890

这是因为 Morphia jar 不是您的输出 war/jar 的一部分。Eclipse 或本地构建将它们作为类路径的一部分包含在内，但远程构建或自动/计划构建不将它们视为类路径的一部分。

您可以使用插件包含依赖的 jar。

将以下代码段添加到您的 pom 的插件部分

```
 <plugin>
        <artifactId>maven-assembly-plugin</artifactId>
        <version>3.0.0</version>
        <configuration>
            <descriptorRefs>
                <descriptorRef>jar-with-dependencies</descriptorRef>
            </descriptorRefs>
        </configuration>
    </plugin> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-12-06T07:32:34.117

由于某种原因，该库**在编译时存在**，但**在运行时丢失**。

我的情况是，一个库的两个版本冲突。

比如A依赖B和C，而B依赖D:1.0，C依赖D:1.1，maven可能只导入D:1.0。如果 A 使用一个在 D:1.1 中但不在 D:1.0 中的类，则会抛出 NoClassDefFoundError。

如果您也遇到这种情况，则需要解决依赖冲突。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2019-04-02T16:27:24.333

我可以通过运行带有 -Dpackaging=class 的 mvn install:install-file 来解决它。[然后按照此处](https://stackoverflow.com/a/19066828/1308453)所述向 POM 添加条目：

* * *

## 回答 #7

> 赞同：-5
> 
> 时间：2014-12-19T00:04:12.087

选择 Project -> Clean 应该可以解决这个问题

# mongodb - Mongoose - 在 ObjectId 数组上使用 Populate

> ID：10568281
> 
> 赞同：38
> 
> 时间：2012-05-12T23:46:32.550
> 
> 标签：mongodb, mongoose

我有一个看起来有点像的模式：

```
var conversationSchema = new Schema({
    created: { type: Date, default: Date.now },
    updated: { type: Date, default: Date.now },
    recipients: { type: [Schema.ObjectId], ref: 'User' },
    messages: [ conversationMessageSchema ]
}); 
```

所以我的收件人集合是引用我的用户模式/集合的对象 id 的集合。

我需要在查询中填充这些，所以我正在尝试这个：

```
Conversation.findOne({ _id: myConversationId})
.populate('user')
.run(function(err, conversation){
    //do stuff
}); 
```

但显然“用户”没有填充......

有没有办法我可以做到这一点？

* * *

## 回答 #1

> 赞同：118
> 
> 时间：2012-11-06T03:20:29.827

对于遇到此问题的其他任何人.. OP 的代码在架构定义中有错误.. 它应该是：

```
var conversationSchema = new Schema({
    created: { type: Date, default: Date.now },
    updated: { type: Date, default: Date.now },
    recipients: [{ type: Schema.ObjectId, ref: 'User' }],
    messages: [ conversationMessageSchema ]
});
mongoose.model('Conversation', conversationSchema); 
```

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2012-05-14T21:33:37.970

使用模式路径的名称而不是集合名称：

```
Conversation.findOne({ _id: myConversationId})
.populate('recipients') // <==
.exec(function(err, conversation){
    //do stuff
}); 
```

# mongodb - 如何使用 Monger 更新/插入 MongoDB 子文档？

> ID：10568282
> 
> 赞同：1
> 
> 时间：2012-05-12T23:46:37.910
> 
> 标签：mongodb, clojure, monger

我正在使用[Clojure 的 Monger](https://github.com/michaelklishin/monger)库连接到 MongeoDB 数据库。

我想在我的 Mongo 数据库中更新、插入和删除子文档。MongoDB 的 $push 修饰符让我可以在搜索文档的根目录上执行此操作。但我希望能够 $push 到子集合上。看看[Monger 的测试](https://github.com/michaelklishin/monger/blob/master/test/monger/test/updating_test.clj)，它看起来是可能的。但我想确保我可以推送到第三位父母的孩子收藏。蒙格能做这样的事情吗？

```
    (mgcol/update mycollection { :my-criteria-key "my-criteria-value" } { $push { "parent.3.child-collection" "fubar" }} )

```

更好的是能够在我的 $push 中有一个 $where 子句。这样的事情可能吗？

```
    (mgcol/更新 mycollection
          { :doc-criteria-key "doc-criteria-value" }
          { $推
              { { $where { parent.child.lastname: '史密斯' } }
              “富巴” } }
    )

```

但即使在基本层面上，当我在我的 repl 中尝试以下命令时，我也会收到以下错误。

1.  “fubar”数据库肯定存在

2.  我肯定连接到数据库

3.  该`{ :owner "fubar@gmail.com" }`标准绝对有效；和

4.  我都试过`"content.1.content"`了`"content.$.content"`：

```
    repl => (mc/update "fubar" { :owner "fubar@gmail.com" } { $push { "content.1.content" { "fu" "bar" } } }
    ClassCastException clojure.lang.Var$Unbound 不能转换为 com.mongodb.DB monger.collection/update (collection.clj:310)
    复制 =>
    复制 =>
    repl => (clojure.repl/pst *e)
    ClassCastException clojure.lang.Var$Unbound 无法转换为 com.mongodb.DB
            monger.collection/update (collection.clj:310)
            bkell.run.run-ring/eval2254 (NO_SOURCE_FILE:46)
            clojure.lang.Compiler.eval (Compiler.java:6406)
            clojure.lang.Compiler.eval (Compiler.java:6372)
            clojure.core/eval (core.clj:2745)
            clojure.main/repl/read-eval-print--6016 (main.clj:244)
            clojure.main/repl/fn--6021 (main.clj:265)
            clojure.main/repl (main.clj:265)
            用户/eval27/acc--3869--auto----30/fn--32 (NO_SOURCE_FILE:1)
            java.lang.Thread.run (Thread.java:619)

```

有没有人遇到过这个并解决了？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T17:59:09.120

你有一个三部分的问题，描述中有一些不一致和漏洞。所以这是我最好的猜测，希望它很接近。

给定与您的更新请求匹配的架构，我可以让所有三个工作，请参阅下面的 test/core.clj 以获取完整的详细信息。

第一部分：是的，你可以推送到第三个父母的孩子收藏，就像你写的一样。

第二部分：您想将“$where”子句移动到条件中，并在 objNew 中使用 $。

第三部分：是的，您的基本更新在下面对我有用，正如您所写的那样。

“lein test”的输出在底部。在你的努力中祝你一切顺利。

测试/core.clj

```
(ns free-11749-clojure-subdoc.test.core
  (:use [free-11749-clojure-subdoc.core])
  (:use [clojure.test])
  (:require [monger.core :as mg] [monger.collection :as mgcol] [monger.query])
  (:use [monger.operators])
  (:import [org.bson.types ObjectId] [com.mongodb DB WriteConcern]))

(deftest monger-sub-document

    (mg/connect!)
    (mg/set-db! (mg/get-db "test"))

    (def mycollection "free11749")

    ;; first part
    (mgcol/remove mycollection)
    (is (= 0 (mgcol/count mycollection)))

    (def doc1 {
        :my-criteria-key "my-criteria-value"
        :parent [
                { :child-collection [ "cc0" ] }
                { :child-collection [ "cc1" ] }
                { :child-collection [ "cc2" ] }
                { :child-collection [ "cc3" ] }
                { :child-collection [ "cc4" ] }
            ]
        }
    )

    (mgcol/insert mycollection doc1)
    (is (= 1 (mgcol/count mycollection)))

    (mgcol/update mycollection { :my-criteria-key "my-criteria-value" } { $push { "parent.3.child-collection" "fubar" }} )

    (def mymap1 (first (mgcol/find-maps mycollection { :my-criteria-key "my-criteria-value" })))
    (is (= "fubar" (peek (:child-collection (get (:parent mymap1) 3)))))

    (prn (mgcol/find-maps mycollection { :my-criteria-key "my-criteria-value" }))

    ;; second part
    (mgcol/remove mycollection)
    (is (= 0 (mgcol/count mycollection)))

    (def doc2 {
        :doc-criteria-key "doc-criteria-value"
        :parent [
                    { :child  { :lastname [ "Alias" ] } }
                    { :child  { :lastname [ "Smith" ] } }
                    { :child  { :lastname [ "Jones" ] } }
                ]
        }
    )

    (mgcol/insert mycollection doc2)
    (is (= 1 (mgcol/count mycollection)))

    (mgcol/update mycollection { :doc-criteria-key "doc-criteria-value" "parent.child.lastname" "Smith"} { $push { :parent.$.child.lastname "fubar" } } )

    (def mymap2 (first (mgcol/find-maps mycollection { :doc-criteria-key "doc-criteria-value" })))
    (is (= "fubar" (peek (:lastname (:child (get (:parent mymap2) 1))))))

    (prn (mgcol/find-maps mycollection { :doc-criteria-key "doc-criteria-value" }))

    ;; third part
    (mgcol/remove "fubar")
    (is (= 0 (mgcol/count "fubar")))

    (def doc3 {
            :owner "fubar@gmail.com"
            :content [
                    { :content [ "cc0" ] }
                    { :content [ "cc1" ] }
                    { :content [ "cc2" ] }
            ]
        }
    )

    (mgcol/insert "fubar" doc3)
    (is (= 1 (mgcol/count "fubar")))

    (mgcol/update "fubar" { :owner "fubar@gmail.com" } { $push { "content.1.content" { "fu" "bar" } } } )

    (def mymap3 (first (mgcol/find-maps "fubar" { :owner "fubar@gmail.com" })))
    (is (= { :fu "bar" } (peek (:content (get (:content mymap3) 1)))))

    (prn (mgcol/find-maps "fubar" { :owner "fubar@gmail.com" }))
) 
```

莱因测试

```
Testing free-11749-clojure-subdoc.test.core
({:_id #<ObjectId 4fb3e98447281968f7d42cac>, :my-criteria-key "my-criteria-value", :parent [{:child-collection ["cc0"]} {:child-collection ["cc1"]} {:child-collection ["cc2"]} {:child-collection ["cc3" "fubar"]} {:child-collection ["cc4"]}]})
({:_id #<ObjectId 4fb3e98447281968f7d42cad>, :doc-criteria-key "doc-criteria-value", :parent [{:child {:lastname ["Alias"]}} {:child {:lastname ["Smith" "fubar"]}} {:child {:lastname ["Jones"]}}]})
({:_id #<ObjectId 4fb3e98447281968f7d42cae>, :content [{:content ["cc0"]} {:content ["cc1" {:fu "bar"}]} {:content ["cc2"]}], :owner "fubar@gmail.com"})

Ran 1 tests containing 9 assertions.
0 failures, 0 errors. 
```

# wpf - 通过 XAML 在 WPF 中获取焦点元素

> ID：10568285
> 
> 赞同：3
> 
> 时间：2012-05-12T23:46:59.373
> 
> 标签：wpf, idataerrorinfo

我想在屏幕的一个位置显示错误（IDataErrorInfo.Errors），而不是在附近显示错误内容。因此，我已将 textBlock 放在表单的末尾。如何获取当前的焦点元素以进行绑定（验证.Errors)[0].ErrorContent。

这应该在 XAML 中完成，而不是在后面的代码中。

当焦点更改时，该元素的错误内容将显示在放置在屏幕底部的 TextBlock 中。

感谢和问候 Dineshbabu Sengottian

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-13T08:52:52.070

您可以使用 访问焦点元素`FocusManager.FocusedElement`。这是一个纯粹使用 XAML 的示例，没有任何代码隐藏（当然，提供`IDataErrorInfo`测试错误所需的代码隐藏除外）：

```
<Window x:Class="ValidationTest.MainWindow"
        x:Name="w"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525">

    <StackPanel>
        <TextBox x:Name="txt1" Text="{Binding Path=Value1, UpdateSourceTrigger=PropertyChanged, ValidatesOnDataErrors=True, Mode=TwoWay}"/>
        <TextBox x:Name="txt2" Text="{Binding Path=Value2, UpdateSourceTrigger=PropertyChanged, ValidatesOnDataErrors=True, Mode=TwoWay}"/>
        <TextBlock Foreground="Red" Text="{Binding 
                        RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type Window}}, 
                        Path=(FocusManager.FocusedElement).(Validation.Errors)[0].ErrorContent}"/>
    </StackPanel>
</Window> 
```

测试类`MainWindow`有以下代码：

```
namespace ValidationTest
{
    public partial class MainWindow : Window, IDataErrorInfo
    {
        public MainWindow()
        {
            InitializeComponent();

            DataContext = this;

            Value1 = "a";
            Value2 = "b";
        }

        public string Value1 { get; set; }
        public string Value2 { get; set; }

        #region IDataErrorInfo Members

        public string Error
        {
            get { return ""; }
        }

        public string this[string name]
        {
            get
            {
                if (name == "Value1" && Value1 == "x")
                {
                    return "Value 1 must not be x";
                }
                else if (name == "Value2" && Value2 == "y")
                {
                    return "Value 2 must not be y";
                }
                return "";
            }
        }

        #endregion
    }
} 
```

对于测试，如果在第一个文本框中输入“x”或在第二个文本框中输入“y”，则会出现验证错误。

当前焦点文本框的错误消息出现在 TextBlock 中的两个文本框下方。

请注意，此解决方案有一个缺点。如果您在调试器下运行示例，您将看到这些绑定错误：

> System.Windows.Data 错误：17：无法从“（Validation.Errors）”（类型“ReadOnlyObservableCollection`1”）获取“Item []”值（类型“ValidationError”）。BindingExpression:Path=(0).(1)[0].ErrorContent; DataItem='MainWindow' (Name='w'); 目标元素是'TextBlock'（名称=''）；目标属性是“文本”（类型“字符串”） ArgumentOutOfRangeException：“System.ArgumentOutOfRangeException：指定的参数超出了有效值的范围。

这些调试错误消息发生在当前焦点元素没有验证错误时，因为`Validation.Errors`数组是空的，因此`[0]`是非法的。

您可以选择忽略这些错误消息（示例仍然运行良好），或者您仍然需要一些代码隐藏，例如将`IInputElement`返回的 from转换`FocusManager.FocusedElement`为字符串的转换器。

# algorithm - 哈希表：搜索与后继时间复杂度

> ID：10568286
> 
> 赞同：1
> 
> 时间：2012-05-12T23:47:17.613
> 
> 标签：algorithm, hashtable, big-o, time-complexity

在[Skiena 的算法设计书中](http://books.google.com/books/about/The_Algorithm_Design_Manual_Text.html?id=TrXd-gxPhVYC)，假设哈希表可以有最大`m`桶并且元素总数为`n`，观察到以下更坏情况的时间复杂度：

搜索：`O(n)`

接班人：`O(n + m)`

为什么两者不同？寻找后继者在某种程度上不涉及搜索下一个元素吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-12T23:58:31.867

Hashing achieves constant-time search at the cost of destroying order. When I search for an element, I hash it (`O(1)`) and look in the chosen bucket (`O(n)` in the worst case if I scan linearly, as all the other buckets might be empty.)

When I want the next element after a given one, I have no guarantee that it will be in the same bucket. In fact I have no knowledge about where it is at all. Since I do not *know* what the successor is yet, I can't hash it to find its bucket. Instead I am forced to look in each bucket (`O(m)`.)

If I probe items in order when scanning a bucket, I end up also doing a total of linear work in the number of items (`O(n)`). This results in a total complexity of `O(n + m)`.

# php - 从带有 SQL 文件名的文件夹下载图像

> ID：10568293
> 
> 赞同：0
> 
> 时间：2012-05-12T23:49:04.697
> 
> 标签：php, sql

所以我又来了:)

我试图让下载查询工作。问题是查询不会下载上传的文件，它只是创建一个 dowload.php 文件并将其下载到标准文件夹，我什至无法选择将其保存在我想要的任何位置。:(

任何想法可能是什么问题？

下载.php

```
if (isset($_GET['file_id'])) {
$file_id = (int)$_GET['file_id'];
$file = mysql_query("SELECT `file_name` FROM `files` WHERE `file_id` = {$file_id}");

if (mysql_num_rows($file) != 1) {
echo 'file ID is invalid';
}
else {
$row = mysql_fetch_assoc($file);

if (file_exists($path)){
$path = "core/files/{$row['file_name']}";
header('content-Type: application/octetstream');
header('Content-Type: application/octet-stream');
header('Content-Description: File Transfer');
header("Content-Description: attachment; filename=\"{$row['file_name']}\"");
header('Content-Length: ' . filesize($path));
readfile($path);
}
}
}
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-13T00:11:04.230

```
header("Content-Disposition: attachment; filename=\"{$row['file_name']}\""); 
```

也摆脱关闭 ?> 因为它可以在文件末尾添加额外的空格。它不是必需的。

# fortran - 在fortran中读取数据时遇到EOF

> ID：10568294
> 
> 赞同：0
> 
> 时间：2012-05-12T23:49:24.210
> 
> 标签：fortran, fortran90

我正在尝试使用以下方法将初始数据文件读入我的 fortran 90 程序：

> !---- 打开初始数据文件 ----
> open(50,file=FILE_INITIAL)
> 
> !---- 读取状态 ----
> read(50,'(a3)') tmp3

尝试读取第一行时出现以下错误：

> Fortran 运行时错误：文件结束

我可以用 'end=' 语句纠正这个问题，但是我无法读取以下数据行。

请注意，此代码在另一台服务器上运行良好，但我尝试在其上运行的另一台服务器无法正常运行。

文件内容如下：

> CNT $
> 0.0000000E+00 $
> 105000 $
> 1 1 0.60000EE+19 0.230255E+06 -0.8082365E+06 -0.1359744e+07 -0.1569188E 0.0000000E+00 0.1317501E+07 $
> 2 1 0.60000EE+19 0.409132EE+06 -0.7740022E+06 -0.1390028E+07 -0.1547697E+03 0.1907412E+03 0.1907412E+03 03 03 03 03 03 03 03 03 03 03 03 03 03 03 03 03 03 03 03 03 03 03 03 03 03 0.1018EE 0.0000000E+00 0.1320302E+07 $
> 3 1 0.60000E+19 0.5670843E+06 -0.7934081E+06 -0.1364818E+07 -0.156087E 0.0000000E+00 0.1214425E+07$

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T09:10:33.147

您报告的症状向我表明您尝试打开的文件不存在，尽管您确信它确实存在。检查您的文件名称和位置是否正确。查看程序的工作目录以查看您尝试打开的名称是否已创建为大小为 0 的文件——当您尝试打开不存在的文件时，Fortran 通常会“有用地”创建一个空文件。

如果这个猜测是错误的，请尝试使用 INQUIRE 例程来解决问题，也许可以尝试使用 STATUS 和 OPEN 的其他一些参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-07T22:19:42.153

如果应该适合记录的一维数组比记录长，它将被后续记录填充，直到文件末尾。我的猜测是你有一个非常长的数组来放入这些东西。例如，你需要指定`eor=450`在记录的末尾停止，并在 450 处读取下一行。如果您这样做，请务必先用其他内容填充数组，例如 0 或 -1，以便在数组的未写入条目中没有随机数据。

# c - 当我不强制转换 malloc 的结果时，为什么编译器会抱怨？

> ID：10568301
> 
> 赞同：2
> 
> 时间：2012-05-12T23:50:20.020
> 
> 标签：c, casting, compiler-errors, malloc

我正在检查不需要显式转换 malloc 调用结果的代码，但是每当我尝试这样做时，编译器都会抛出错误。

IE

```
char *somevar;
somevar = malloc(sizeof(char) * n); //error
somevar = (char *)malloc(sizeof(char) * n); // ok 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-12T23:53:51.337

如果您使用 C++ 编译器而不是 C 编译器，则会发生这种情况。由于 C++ 需要显式转换。问题不仅在于（取消）转换`malloc`结果，还在于任何指向其他指针的 void 指针。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-13T00:06:54.663

你还记得包含函数原型吗？对于 malloc(3)，这是：

```
#include <stdlib.h> 
```

# mono - Monodevelop + GTK# 设计模式

> ID：10568310
> 
> 赞同：4
> 
> 时间：2012-05-12T23:51:22.793
> 
> 标签：mono, monodevelop, gtk#

我只是使用 Mono/C#、GTK# 创建一个简单的跨平台桌面应用程序供我个人使用。有没有推荐的 UI 设计模式？

谢谢，奇迪普

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T21:26:33.653

您可能还考虑使用 Model-View-Presenter (MVP)/Presenter First。这里有一个示例 GTK+ 应用程序：

[http://spin.atomicobject.com/2012/07/27/presenter-first-in-gtk-and-c-updated-for-2012/](http://spin.atomicobject.com/2012/07/27/presenter-first-in-gtk-and-c-updated-for-2012/)

将概念转换为 GTK# 应该相当容易。

# mysql - PG错误试图将rails db推送到heroku

> ID：10568314
> 
> 赞同：0
> 
> 时间：2012-05-12T23:52:43.843
> 
> 标签：mysql, ruby-on-rails, postgresql, heroku

我正在尝试使用以下命令将我的 rails db 推送到 heroku：heroku run rake db:migrate 并收到以下错误：

```
=  ChangeDateFormatInMyTable: migrating ======================================
-- change_column(:users, :date_of_birth, :datetime)
rake aborted!
An error has occurred, this and all later migrations canceled:

PG::Error: ERROR:  column "date_of_birth" cannot be cast to type "pg_catalog.timestamp"
: ALTER TABLE "users" ALTER COLUMN "date_of_birth" TYPE timestamp 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T03:35:33.600

尝试 heroku run rake db:reset

经常使用 Heroku 和我的 PG 数据库时，当我进行大量更改时，我必须进行重置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T14:46:58.470

是的，“Heroku run rake db:reset”绝对有效。我一直有类似的问题

```
RemoveGirthFromProfile: migrating =========================================
-- remove_column(:profiles, :girth)
rake aborted!
An error has occurred, this and all later migrations canceled:

PG::Error: ERROR:  column "girth" of relation "profiles" does not exist
: ALTER TABLE "profiles" DROP "girth" 
```

但是当我重置数据库时，它解决了我什至在 heroku 上遇到的应用程序错误

# ruby-on-rails-3 - 未定义的方法“键？” 对于 nil:NilClass 与 bcrypt-ruby 和 has_secure_password

> ID：10568316
> 
> 赞同：0
> 
> 时间：2012-05-12T23:53:02.493
> 
> 标签：ruby-on-rails-3

我正在阅读 DHH 的 Rails 3.1 的 Agile Web Development with Rails。在第 14 章中，他们使用 has_secure_password 方法创建了用户登录模型/视图/控制器。我的 user.rb 文件如下所示：

```
 class User < ActiveRecord::Base
      attr_accessible :name, :password_digest, :password, :password_confirmation
      validates :name, presence: true, uniqueness: true
      has_secure_password
    end 
```

现在，当我转到 localhost:3000/users/new 时，我首先得到某种 bcrypt-ruby 错误，然后当我重新加载页面时，我得到一个未定义的方法“密钥？” 对于零：NilClass

我不知道需要做什么，迈克

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T02:31:56.920

我想我明白发生了什么。我安装了 bcrypt-ruby 并运行了 bundle install 但从未重新启动服务器。现在一切正常。

# c# - JavaScript 显示隐藏功能布局问题 firefox chrome

> ID：10568317
> 
> 赞同：2
> 
> 时间：2012-05-12T23:53:10.247
> 
> 标签：c#, javascript, asp.net, gridview

我有一个 asp.net gridview，我在其中使用选定复选框上的“onclick”隐藏和显示列。单击时，隐藏的列在 IE 中显示良好，但在 Chrome、Firefox 中它们重叠。我一定遗漏了一些东西，就好像它们被添加到同一列中一样。因为我是新手，所以我可以发布屏幕截图。

非常感谢任何帮助。

```
function showColumn(r,grid) {

rows = document.getElementById("GridView1").rows;
drop = document.getElementById(grid);
if (drop.checked == true) {

    for (i = 0; i < rows.length; i++) {
        rows[i].cells[r].style.display = "block";

        }
    }

else if (drop.checked == false) {
    for (i = 0; i < rows.length; i++) {
        rows[i].cells[r].style.display = "none";

        }
    }
}

<p>
    <asp:CheckBox ID="CheckBox1" runat="server" onclick="showColumn(2,'CheckBox1')" 
        Text="Show Option Name" />
</p>
<p>
    <asp:CheckBox ID="CheckBox2" runat="server" onclick="showColumn(1,'CheckBox2')" 
        Text="Show ID" />
</p> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T00:28:16.037

而不是使用：

```
rows[i].cells[r].style.display = "block"; 
```

... 要显示表格单元格，请尝试将 display 属性设置为空字符串，以便它返回默认值：

```
rows[i].cells[r].style.display = ""; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T00:22:09.477

尝试使用`visibility:hidden`(and `visibility:visible`) 而不是`display`css 属性。与`display:none`元素不同的`visibilty:hidden`是，即使不可见，元素仍处于流中，因此它们不会与其他元素重叠。

# c# - 首次调用 WebClient.DownloadString 大约需要 15 秒

> ID：10568321
> 
> 赞同：5
> 
> 时间：2012-05-12T23:54:26.050
> 
> 标签：c#, webclient

```
string url = "http://google.com/index.html";
WebClient client = new WebClient();
Stopwatch sw = new Stopwatch();
sw.Start();
string text = client.DownloadString(url);
sw.Stop();
Console.WriteLine(sw.Elapsed); 
```

秒表表示`DownloadString`方法在第一次调用时需要 13-15 秒，但重复调用需要相当长的时间。这是怎么发生的，我该如何解决？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-13T00:09:20.163

可能有几件事会导致第一次通话延迟，例如检测代理设置。尝试将代理设置为空：

```
client.Proxy = null; 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-05-13T00:09:49.363

您的机器配置为执行自动代理检测。

您可以在此处禁用它：

![截屏](../Images/600a5894ef9b16057a52016469332e12.png)

或者，您可以手动覆盖 WebClient 使用的代理；`null`表示没有代理：

```
client.Proxy = null; 
```

但是，在这种情况下，您应该让用户在您的应用程序中配置代理，因为某些用户在访问 Web 时必须使用代理。

# ruby - 正则表达式 - 匹配任意数量的值（红宝石）

> ID：10568327
> 
> 赞同：0
> 
> 时间：2012-05-12T23:56:31.740
> 
> 标签：ruby, regex

一些样本输入

```
中奖号码：1
中奖号码：1,2,3,4
中奖号码：1,23,28,273,191

```

所需的匹配

```
[1]
[1,2,3,4]
[1,23,28,273,191]

```

这是一个简单的模式，但我不确定如何匹配所有数字。我在想类似“获取第一个数字，然后是零个或多个数字，前面有逗号和可能的空格”

`winning numbers:\s*(\d+)\s*(,\s*(\d+))*`

但它只匹配第一个（如预期的那样）和最后一个数字。

我正在使用 ruby​​，所以我希望能够检索数组中的所有匹配项并将其传递出去。使用我当前的正则表达式，它匹配最后一个数字，但它也匹配逗号，因为它在括号内。

我的逻辑有问题吗？还是我没有正确地将其表达为正则表达式？
我正在使用[rubular](http://rubular.com/)来测试我的正则表达式。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-12T23:59:35.447

You can use [`scan`](http://apidock.com/ruby/String/scan) method to match all numbers and then [`map`](http://apidock.com/ruby/Array/map) them into the array with converting each one to integer using [`to_i`](http://apidock.com/ruby/String/to_i)

```
numbers = "1,23, 28,   273, 191"

numbers.scan(/\d+/).map(&:to_i)
 => [1, 23, 28, 273, 191] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-23T11:26:16.923

原始答案效果很好，但我总是担心有一天，有人会更改消息文本以包含一个数字。

这是另一种可以做到的方式：

```
2.3.0 :013 > def get_numbers(s)
2.3.0 :014?>   s.split(':').last.split(',').map(&:to_i)
2.3.0 :015?>   end
 => :get_numbers
2.3.0 :016 > get_numbers 'winning numbers: 1,23, 28,   273, 191'
 => [1, 23, 28, 273, 191] 
```

当然，这也包含一个假设，即该行中总是正好有 1 个冒号，并且它将结束描述文本。

# google-apps-script - DocsListDialog 示例

> ID：10568328
> 
> 赞同：0
> 
> 时间：2012-05-12T23:56:40.847
> 
> 标签：google-apps-script

对谷歌应用脚​​本来说还是相当新的，并且看到了一个很棒的课程，里面有蹩脚的文档。

[https://developers.google.com/apps-script/class_docslistdialog](https://developers.google.com/apps-script/class_docslistdialog)。我希望使用它来允许我的用户从他们的 Google 收藏中选择一个文档。

这是我开始的：

```
var app = UiApp.createApplication().setHeight(400).setWidth(600);
var ss = SpreadsheetApp.getActiveSpreadsheet();
var doclisthandler = app.createServerHandler('selectionhandler');
var doclist = app.createDocsListDialog().showDocsPicker().addSelectionHandler(doclisthandler); 
ss.show(app);}

function selectionhandler(e)
{    var app = UiApp.getActiveApplication();
var selname = e.parameter.doclist;           
toastDoc.toast(selname,'here in selectionhandler',4);
return app;
} 
```

我的 toastDoc.toast 只是为了验证我的 selectionhandler 函数是否有效并查看返回的内容。selname 返回“未定义”。

除了上面的 url 中的内容之外，我已经在这个类上寻找了示例，但我什么也没得到:(

理想情况下，我想返回选择的文档 ID，以便我的脚本可以进行进一步处理......

任何援助将不胜感激

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-13T06:01:00.283

要检查它返回的内容，您可以使用以下函数。一切都将在 Logger 中返回

```
function selectionhandler(e){
  var app = UiApp.getActiveApplication();
  Logger.log(e.parameter.items[0].id);
  Logger.log(e.parameter.items[0].name);
  Logger.log(e.parameter.items[0].url);
//Or to check everything which is returned in e.parameter
  Logger.log(e.parameter);
  return app;
} 
```

希望有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T12:52:16.347

您似乎忘记向处理程序添加回调元素...

```
addCallbackElement(name); 
```

问候， 塞尔吉

编辑：嗨乔，我也在做这样的事情......我认为展示我到目前为止所拥有的东西可能会很有趣......还没有完成;-)我粘贴了整个东西，这样你就可以轻松地测试它：

```
function onOpen() {
  var ss = SpreadsheetApp.getActiveSpreadsheet();
  var menuEntries = [ {name: "Doclist UI", functionName: "doclistUI"},

                    ];
  ss.addMenu("Utilities", menuEntries);//
}
//
function doclistUI(){
  var folderlist = new Array();
  var folders=DocsList.getFolders()
  for(ff=0;ff<folders.length;++ff){
    folderlist.push(folders[ff].getName());
    }
  var app = UiApp.createApplication().setHeight(260).setWidth(700).setStyleAttribute('background', 'beige')
      .setStyleAttribute("position", "relative").setStyleAttribute("left", "10").setStyleAttribute("top", "12px");
  app.setTitle("Doclist UI");
  var panel = app.createVerticalPanel()
  var hpanel = app.createHorizontalPanel();
  var hpanel2 = app.createHorizontalPanel();
  var Flist= app.createListBox(false).setName("Flb").setId("Flb").setVisibleItemCount(4).setWidth("180");
  var Dlist= app.createListBox(false).setName("Dlb").setId("Dlb").setVisibleItemCount(8).setWidth("280");
  var Flab=app.createLabel('Folder List').setWidth("80");
  var Dlab=app.createLabel('Document List').setWidth("100");
  var spacer=app.createLabel(' ').setWidth("30");
  var spacer2=app.createLabel(' ').setWidth("15");
//  
  Flist.addItem('Choose a folder');
  for(ff=0;ff<folderlist.length;++ff){
    Flist.addItem(folderlist[ff]);
  }
  var anchor = app.createAnchor('open ', "www.google.com").setId('anchor').setVisible(false);
  hpanel.add(Flab).add(Flist).add(spacer).add(Dlab).add(Dlist)
  var docname = app.createLabel().setId('doc').setSize("360", "40");
  hpanel2.add(anchor).add(spacer2).add(docname);
  var dwnld = app.createButton("Download").setId("dwnld");
  panel.add(hpanel).add(hpanel2).add(dwnld);
//
  var FHandler = app.createServerHandler("click");
  Flist.addChangeHandler(FHandler)
  FHandler.addCallbackElement(hpanel);
//
  var DHandler = app.createServerHandler("showlab");
  Dlist.addChangeHandler(DHandler);
  DHandler.addCallbackElement(hpanel);
//
  var keyHandler = app.createServerHandler("download");
  dwnld.addClickHandler(keyHandler)
  keyHandler.addCallbackElement(panel);
//
  app.add(panel);  
  var doc = SpreadsheetApp.getActive();
  doc.show(app);
  }
//
function click(e){
   var app = UiApp.getActiveApplication();
   var Dlist = app.getElementById("Dlb");  
   var label = app.getElementById('doc')
   var folderName = e.parameter.Flb
       if (folderName=='Choose a folder'){Dlist.clear();label.setText(" ");return app}
   var doclist=new Array();
   doclist=DocsList.getFolder(folderName).getFiles(0,2000)
    if(doclist.length==0){Dlist.clear();Dlist.addItem(' No files');return app}
   var names = new Array();
      for (nn=0;nn<doclist.length;++nn){
      names.push([doclist[nn].getName(),doclist[nn].getId()]);
      }
  names.sort();
  Dlist.clear();
  for(dd=0;dd<names.length;++dd){
    Dlist.addItem(names[dd][0]+" (doc Nr:"+dd+")");
  }
return app   ;// update UI
}
//
function showlab(e){
  var app = UiApp.getActiveApplication();
  var label = app.getElementById('doc')
  var link = app.getElementById('anchor')
  var Dlist = app.getElementById("Dlb");  
  var folderName = e.parameter.Flb
  var docname = e.parameter.Dlb
  var doclist=new Array();
  Logger.log(doclist.length)
  doclist=DocsList.getFolder(folderName).getFiles(0,2000)
    if(doclist.length==0){return app}
  var names = new Array();
      for (nn=0;nn<doclist.length;++nn){
      names.push([doclist[nn].getName(),doclist[nn].getId()]);
      }
   names.sort();
   var filename = e.parameter.Dlb
   var ID= Number(filename.substring(filename.lastIndexOf(":")+1).replace(")",""));  
   var docN = docname.substr(0,docname.lastIndexOf("("))
   label.setText(docN).setEnabled(false).setStyleAttribute('fontSize', '15')
   link.setVisible(true).setHref("https://docs.google.com/spreadsheet/ccc?key="+names[ID][1]+"#gid=0");
   return app   ;// update UI
}
//
function download(e){ // this part not implemented yet :-/
   var app = UiApp.getActiveApplication();
   var Dlist = app.getElementById("Dlb");  
   var folderName = e.parameter.Flb
   var doclist=new Array();
   doclist=DocsList.getFolder(folderName).getFiles(0,2000)
   var names = new Array();
      for (nn=0;nn<doclist.length;++nn){
      names.push([doclist[nn].getName(),doclist[nn].getId()]);
      }
   names.sort();
// 
   var filename = e.parameter.Dlb
   var ID= Number(filename.substring(filename.lastIndexOf(":")+1).replace(")",""));  

  Browser.msgBox(names[ID][1])
return app   ;// update UI
}
//eof 
```

# machine-learning - 获取 SVM 分类中的属性权重/重要性

> ID：10568331
> 
> 赞同：2
> 
> 时间：2012-05-12T23:57:07.320
> 
> 标签：machine-learning, weka

我正在尝试使用在 weka 库中实现的 SVM 分类对一些数据进行分类。我的分类代码如下：

```
BufferedReader reader = new BufferedReader(new FileReader(arffDataFile));

Instances data = new Instances(reader);
reader.close();

data.setClassIndex(0);

NumericToNominal filter = new NumericToNominal();

String[] options = new String[2];

options[0] = "-R";
options[1] = "1";

filter.setOptions(options);
filter.setInputFormat(data);

Instances newData = Filter.useFilter(data, filter);
newData.setClassIndex(0);

weka.classifiers.functions.LibSVM svm = new weka.classifiers.functions.LibSVM();
svm.buildClassifier(newData);

Evaluation eval = new Evaluation(newData);
eval.crossValidateModel(svm, newData, folds, new Random(1));

System.out.println(eval.toSummaryString("\nResults\n======\n", false));

System.out.println(); 
```

Arff 数据文件由 2973 个实例组成，每个实例有 27 个属性。

我的问题是，如何找出实例属性的权重。**我需要调查哪些属性在分类过程中最有用。**

我是机器学习领域的初学者，所以简单的语言和示例代码将不胜感激。

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T00:06:32.207

Weka 具有从属性池中选择属性的选项。换句话说，它为您提供了对属性进行排名的方法。它们位于 weka.attributeSelection 中，您有很多选择来使用具有特定搜索方法的属性评估器。我个人对我的任务的偏好是使用 InfoGainAttributeEval 作为属性评估器以及 Ranker 作为搜索方法。这取决于您要使用哪种组合的任务。

当您使用代码与 Weka 交互时，请参阅文档以使用 JAVA API 的属性评估器和搜索方法。就个人而言，我使用 GUI。

# jquery - 在标题中显示特定数据

> ID：10568332
> 
> 赞同：0
> 
> 时间：2012-05-12T23:57:12.973
> 
> 标签：jquery, html, drop-down-menu

我正在创建一个允许用户浏览莎士比亚戏剧的小型网站。我的工作原理是，当用户单击播放时，播放的名称显示在标题中，播放的脚本显示在单独的 div 中。

这工作正常，但我现在正试图将各种戏剧组织到一个下拉菜单中。我将戏剧分为两类（喜剧和历史），并对戏剧进行了相应的分组。

我现在遇到的问题是，一旦我通过下拉菜单单击一个戏剧，该类别中的整个戏剧列表（即喜剧）就会显示在标题中，而不仅仅是我选择的戏剧。但是，我选择的播放仍然正确显示在显示播放的 div 中（“mainOutput”div）。

所以基本上我需要知道的是如何设置下拉菜单，以便只有我选择的播放标题显示在标题中。希望我已经正确解释了这一点，任何帮助将不胜感激！这是我的代码...

启动要显示的播放的 jquery：

```
 $(document).ready(function(){   /* The code here can be modified to allow for any means of obtaining playName */
    $('li').click(function(event) {
  var playName = $(this).attr("id");
      $("header>span").text($(this).text());
      loadPlay(playName);
    }); 
```

下拉菜单：

```
<div style="margin-left:50px;">
    <ul id="menu">
        <li><a href="#">Comedies</a>
            <ul id="help">
                <li>
                    <img class="corner_inset_left" alt="" src="corner_inset_left.png"/>
                    <li id="all_well.xml" class="comedy">All's Well That Ends Well</li>
                    <img class="corner_inset_right" alt="" src="corner_inset_right.png"/>
                </li>
                </ br>
                <li id="as_you.xml" class="comedy">As You Like It</li> </ br>
                <li id="com_err.xml" class="comedy">The Comedy of Errors</li> </ br>
              <li id="cymbelin.xml" class="comedy">Cymbeline</li> </ br>
              <li id="lll.xml" class="comedy">Love's Labours Lost</li> 
              <li id="m_for_m.xml" class="comedy">Measure for Measure</li> 
                          <li class="last">
                </li>
            </ul>
        </li>
        <li><a href="#">Histories</a>
            <ul id="help">
                <li>
                    <img class="corner_inset_left" alt="" src="corner_inset_left.png"/>
                     <li id="hen_iv_1.xml" class="history">Henry IV, Part I</li>                                                                        <img class="corner_inset_right" alt="" src="corner_inset_right.png"/>
                </li>
          <li id="hen_iv_2.xml" class="history">Henry IV, Part II</li> 
          <li id="hen_v.xml" class="history">Henry V</li> 
          <li id="hen_vi_1.xml" class="history">Henry VI, Part I</li> 
          <li id="rich_iii.xml" class="history">Richard III</li>
                <li class="last">
                </li>
            </ul>
        </li>
        </div> 
```

播放数据显示位置：

```
<header><span>Shakespeare's Plays<span></span></span></header> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T00:03:24.907

This happens because you bind `click` event to all `li` items, including your dropdown list headings. You can change the selector to make it workable.

```
$(document).ready(function() {
    $('#menu ul li').click(function(event) {
        var playName = $(this).attr("id");
        $("header > span").text($(this).text());
        loadPlay(playName);
    });
}); 
```

Of course, there are many other problems in your code.

1.  You should improve IDs of the elements (e.g. you have several elements with ID `help`, should be only one).
2.  List element `ul` should contain as first childs `li` elements only (you also have `br` elements, not correct).
3.  Pay attention, you have two `span` elements in `header`. Consider using only one if you wish to fill it with text (see JavaScript).

# css - Adjacent divs with angled borders?

> ID：10568334
> 
> 赞同：17
> 
> 时间：2012-05-12T23:57:20.783
> 
> 标签：css, html, css-shapes

I want to create two divs which are floated left to each other, however with a slanted angled border separating them. I've attached a picture to demonstrate what I mean.

Does anyone know if something like this is possible with CSS (cutting off the content with an overflow:hidden I guess)

![adjacent div with slanted side](../Images/edee507b24274027286e28fdd4387ab6.png)

These divs need to contain images that get cut off by the border, here is an example :

![divs with images and slanted adjacent sides](../Images/a7ebd29032068607e6032ec33c8eb895.png)

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-05-13T00:14:11.400

尝试这个

```
.left, .right {
  position: relative;
  height: 100px;
  width: 200px;
  background: #000;
  float: left;
}

.left:after {
  content: '';
  line-height: 0;
  font-size: 0;
  width: 0;
  height: 0;
  border-top: 100px solid #000;
  border-bottom: 50px solid transparent;
  border-left: 0px solid transparent;
  border-right: 50px solid transparent;
  position: absolute;
  top: 0;
  right: -50px;
}

.right {
  margin-left: 60px;
  width: 100px;
}

.right:before {
  content: '';
  line-height: 0;
  font-size: 0;
  width: 0;
  height: 0;
  border-top: 50px solid transparent;
  border-bottom: 100px solid #000;
  border-left: 50px solid transparent;
  border-right: 0px solid #000;
  position: absolute;
  top: -50px;
  left: -50px;
}
```

```
<div class="left"> </div>
<div class="right"> </div>
```

* * *

**更新**图片

```
.left, .right {
    background: #000 url('http://lorempixel.com/300/100');
    position: relative;
    height: 100px;
    width: 250px;
    float: left;
}

.left:after {
    content: '';
    line-height: 0;
    font-size: 0;
    width: 0;
    height: 0;
    border-top: 50px solid transparent;
    border-bottom: 100px solid #fff;
    border-left: 30px solid transparent;
    border-right: 0 solid #fff;
    position: absolute;
    top: -50px;
    right: 0;
}

.right {
    background: #000 url('http://lorempixel.com/200/100');
    width: 150px;
}

.right:before {
    content: '';
    line-height: 0;
    font-size: 0;
    width: 0;
    height: 0;
    border-top: 100px solid #fff;
    border-bottom: 50px solid transparent;
    border-left: 0px solid transparent;
    border-right: 30px solid transparent;
    position: absolute;
    top: 0;
    left: 0;
}
```

```
<div class="left"> </div>
<div class="right"> </div>
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2014-03-31T14:13:29.917

到目前为止，所有解决方案都依赖于有一个非常厚的有角度的边框来划分照片。

为避免这种情况，您将制作一个容器并将其倾斜。然后反方向倾斜图像。

这是一个 CodePen [http://cdpn.io/azvsA](http://cdpn.io/azvsA)，但它的要点如下：

```
.container {
  border-right: 10px solid white;
  overflow: hidden;
  transform (skewX(-20deg));
}

.image {
  transform (skewX(20deg));
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-13T01:09:18.647

你可以这样写：

```
.left, .right {
    background: #000 url('http://lorempixel.com/300/100');
    position: relative;
    height: 100px;
    width: 250px;
    float: left;
}
.left{
    z-index:1;
}
.parent{
    overflow:hidden;
}

.right {
    background: #000 url('http://lorempixel.com/200/100');
    width: 150px;
}
.left:after{
    content:'';
    position:absolute;
    border-right:20px solid #fff;
    top:-25px;
    bottom:-10px;
    left:0;
    right:-10px;
    -moz-transform:rotate(10deg);
    -webkit-transform:rotate(10deg);
} 
```

检查这个[http://jsfiddle.net/EJxFg/4/](http://jsfiddle.net/EJxFg/4/)

# ruby - Dynamically Access Class Module In Ruby

> ID：10568338
> 
> 赞同：0
> 
> 时间：2012-05-12T23:57:51.413
> 
> 标签：ruby

My base class is `Premade` which has two subclasses: `PremadeController` and `PremadeControllerSession`. They are very similar. For example. They both need to build records in MySQl in batches of 1000, but I want `PremadeControllers` to get built before so I have them going to different queues in Resque.

So the two sub classes look like this:

```
class PremadeController < Premade

  def self.maintain
    ((max_premade_count - premade_count)/batch_size).times do
      Resque.enqueue(Workers::BuildPremadeControllerJob)
    end
  end

end 
```

And:

```
class PremadeSessionController < Premade

  def self.maintain
    ((max_premade_count - premade_count)/batch_size).times do
      Resque.enqueue(Workers::BuildPremadeControllerSessionJob)
    end
  end

end 
```

The only difference between those methods is the worker class (i.e. `BuildPremadeControllerSessionJob` and `BuildPremadeControllerJob`)

I've tried to put this in the parent and dynamically defining the constant, but it does not work probably due to a scope issue. For example:

```
class Premade

  def self.maintain
    ((max_premade_count - premade_count)/batch_size).times do
      Resque.enqueue(Workers::)
    end
  end

end 
```

What I want to do is define this method in the parent, such as:

```
def self.maintain
  ((max_premade_count - premade_count)/batch_size).times do
    Resque.enqueue(Workers::build_job_class)
  end
end 
```

Where `build_job_class` is defined in each subclass.

Please don't tell me to change Resque's worker syntax because that is not the question I'm asking.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-13T00:05:59.540

你应该能够做到这一点[`const_get`](http://ruby-doc.org/core-1.9.3/Module.html#method-i-const_get)-

```
klass = Workers.const_get "Build#{self.name}Job" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-13T00:13:21.547

这样做的一种`build_job_class`方法是在您的 2 个类上定义一个类方法，该类方法返回适当的工作类，即`PremadeSessionController`看起来像

```
class PremadeSessionController
  def self.build_job_class
    Workers::BuildPremadeControllerSessionJob
  end
end 
```

然后将您的维护方法更改为

```
def self.maintain
  ((max_premade_count - premade_count)/batch_size).times do
    Resque.enqueue(build_job_class)
  end
end 
```

# mysql - 当等效的 SELECT 起作用时，为什么这个 DELETE 查询会失败？

> ID：10568341
> 
> 赞同：2
> 
> 时间：2012-05-12T23:58:36.657
> 
> 标签：mysql, sql, mysql-error-1064

我有两个表，products(product_id) 和 sex(product_id,sex_id)。我正在尝试从具有 product_id 的两个表中删除行，以便在 sex 表中存在具有此 product_id 和 sex=1 的行。到目前为止我有

```
CREATE TEMPORARY TABLE tempTable
      SELECT p.product_id  
        FROM products AS p
  INNER JOIN sex AS s
          ON p.product_id = s.product_id 
       WHERE s.sex = 1;

 DELETE FROM products AS p
NATURAL JOIN tempTable AS t 
```

DELETE 查询抛出此错误：

```
#1064 - You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'NATURAL JOIN tempTable AS t' at line 2 
```

此 SELECT 查询工作正常：

```
SELECT * FROM products
NATURAL JOIN tempTable 
```

为什么 SELECT 查询有效，但 DELETE 查询无效？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-13T00:02:00.610

因为`DELETE`有[不同的语法](http://dev.mysql.com/doc/refman/5.5/en/delete.html)。您必须指定要从哪些表中删除。

所以做一个

```
DELETE p, t FROM products AS p NATURAL JOIN tempTable AS t;
DELETE p FROM products AS p NATURAL JOIN tempTable AS t;
DELETE t FROM products AS p NATURAL JOIN tempTable AS t; 
```

# java - Why is my applet throwing an AccessControlException?

> ID：10568345
> 
> 赞同：1
> 
> 时间：2012-05-12T23:59:23.413
> 
> 标签：java, security, applet, japplet, accesscontrolexception

I am trying to build a Java applet, called `game`, which is something I have never done before (I've always just built standalone applications). My applet works fine when I test it in Eclipse, but when I try putting it on my website, I get the following error in the console:

```
java.lang.reflect.InvocationTargetException
    at com.sun.deploy.util.DeployAWTUtil.invokeAndWait(DeployAWTUtil.java:116)
    at sun.plugin2.applet.Plugin2Manager.runOnEDT(Plugin2Manager.java:3541)
    at sun.plugin2.applet.Plugin2Manager.createApplet(Plugin2Manager.java:3072)
    at sun.plugin2.applet.Plugin2Manager$AppletExecutionRunnable.run(Plugin2Manager.java:1497)
    at java.lang.Thread.run(Thread.java:680)
Caused by: java.security.AccessControlException: access denied (java.util.PropertyPermission user.dir read)
    at java.security.AccessControlContext.checkPermission(AccessControlContext.java:374)
    at java.security.AccessController.checkPermission(AccessController.java:546)
    at java.lang.SecurityManager.checkPermission(SecurityManager.java:532)
    at java.lang.SecurityManager.checkPropertyAccess(SecurityManager.java:1285)
    at java.lang.System.getProperty(System.java:667)
    at java.io.UnixFileSystem.resolve(UnixFileSystem.java:118)
    at java.io.File.getAbsolutePath(File.java:501)
    at game.<init>(game.java:117)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
    at java.lang.reflect.Constructor.newInstance(Constructor.java:513)
    at java.lang.Class.newInstance0(Class.java:355)
    at java.lang.Class.newInstance(Class.java:308)
    at sun.plugin2.applet.Plugin2Manager$13.run(Plugin2Manager.java:3060)
    at java.awt.event.InvocationEvent.dispatch(InvocationEvent.java:199)
    at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:682)
    at java.awt.EventQueue.access$000(EventQueue.java:85)
    at java.awt.EventQueue$1.run(EventQueue.java:643)
    at java.awt.EventQueue$1.run(EventQueue.java:641)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.AccessControlContext$1.doIntersectionPrivilege(AccessControlContext.java:87)
    at java.awt.EventQueue.dispatchEvent(EventQueue.java:652)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:296)
    at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:211)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:201)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:196)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:188)
    at java.awt.EventDispatchThread.run(EventDispatchThread.java:122)
Exception: java.lang.reflect.InvocationTargetException 
```

It says `access denied (java.util.PropertyPermission user.dir read)`, but I can't figure out where it's trying to read something off the user's file system.

It also says `at game.<init>(game.java:117)`, but I went into my file and made a message output to the console on line 114 and it never got written. I then figured that maybe it was looking at line 117 inside `public game()`, so I looked for that and it was the start of a listener for a Mouse event. It made sense to me that this would be something that Java would need permission to read, so I deleted all of it and then deleted all the imports for good measure. Then I cleared both Chrome and Java's caches and retried. Same error.

1.  What does this mean, am I interpreting it incorrectly?
2.  When it says that line 117, what is it line 117 of?
3.  Why would this be happening?
4.  How can I fix it?
5.  How can I prevent it in the future?

For reference, here is the code for `public game()`:

```
public game() throws MalformedURLException{

    JPanel board = new chessboard();
    board.setSize(320, 320);
    board.setLocation(0, 0);

    System.out.println("Got this far");

    Piece wp1 = new Piece(wpawn, a2);
...
    Piece bk = new Piece(bking, e8);

    board.add(wp1);
...
    board.add(bk);

    wp1.setLocation(wp1.square.getPoint());
...     
    bk.setLocation(bk.square.getPoint());

    add(board);
    repaint();

    addMouseListener(new MouseAdapter(){
        public void mousePressed(MouseEvent evt){

            for (int i = 0; i < 8; i++){
                for (int j = 0; j < 8; j++){
                    if (squares[i][j].piece != null)
                        System.out.println(squares[i][j].getPointString() + ": " + squares[i][j].piece.type);
                }
            }

            Point p = evt.getPoint();
            if (0 < p.x && p.x < 319 && 0 < p.y && p.y < 319){
                Square clicked = getSquare(p);
                System.out.println("up: " + clicked.getPointString());
                if (clicked.piece != null){
                    pickedUp = true;
                    pickedUpPiece = clicked.piece;
                }
            }
        }
        public void mouseReleased(MouseEvent evt){
            if (pickedUp){
                Point p = evt.getPoint();
                if (0 < p.x && p.x < 319 && 0 < p.y && p.y < 319){
                    System.out.println("down: " + getSquare(p).getPointString());
                    movePiece(pickedUpPiece, getSquare(p).getColumn(), getSquare(p).getRow());
                }
                pickedUp = false;
            }
            else System.out.println("Not picked up");
        }
    });
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-13T00:03:08.607

The key output of the stack trace is:

```
at java.io.File.getAbsolutePath(File.java:501)
at game.<init>(game.java:117) 
```

This means that your `game.java` file, at line 117, is calling `getAbsolutePath()` on something. Java applets embedded in a browser are not permitted to access the local filesystem.

# asp.net - How to install a Fleck Websocket server on a third party web host

> ID：10568354
> 
> 赞同：0
> 
> 时间：2012-05-13T00:01:38.847
> 
> 标签：asp.net, websocket

I am new to websockets and server hosts, but after some study of the source code I understand how Fleck works.

I have a web-hosting account with FastHosts that serves ASP .Net web pages.

Is it possible to somehow run a Fleck HTML5 web socket server up on a host like this? How would I go about installing it? The Fleck source code comes with a simple console application that acts as the server - would it be feasible to run a similar console app on a web server?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T17:18:32.227

您的网络托管服务提供商可能会允许您运行 feck 服务（如果机器能够运行 c# 应用程序），但这在很大程度上取决于您的服务器将做什么、cpu 周期的负担等。我担心大多数公司都会支持“不”（但在我的 /personal/ 经验中，我的托管公司过去一直非常理解我。）

编辑：可行吗？同样，这实际上取决于服务的强度。少数用户的小型网站的聊天中继？当然。专用 MMORPG 服务器？不。

然而，大多数人在家里不运行自己的机器时会做的是租用专用服务器或 VPS（虚拟专用服务器）。这些通常比标准的网络托管包贵一点（但是 VPS 比专用的便宜），但允许您完全访问安装自己的服务器和其他应用程序，在需要时重新启动机器等。作为您自己的服务器，不太可能您可能会伤害该服务的其他用户 - 而如果他们让您在虚拟主机上运行您的斑点服务器，它会变得有点梨形......呵呵，是的。

简而言之，询问您的主机他们的想法，但希望他们说不，然后开始浏览便宜的 VPS 或专用服务器。

# java - jython multithreading

> ID：10568358
> 
> 赞同：16
> 
> 时间：2012-05-13T00:02:20.513
> 
> 标签：java, python, multithreading, jython

I started studying python a couple of month ago, then I found Jython.

Do threads work properly in Jython, since it [doesn't have a GIL](https://stackoverflow.com/questions/1120354/does-jython-have-the-gil)? If so, can you suggest a good book on concurrency (threading)?

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-27T10:46:29.047

我遇到的关于多线程的最好的书是《Java Concurrency in Practice》。它非常专注于 Java 线程并发，当您开始了解并发带来的问题和可能性时，它既令人谦卑又令人兴奋。然而，我几年前购买的副本在编码中有一些勘误，这加剧了一个已经具有挑战性的主题：在此处查看勘误：http: [//jcip.net/errata.html](http://jcip.net/errata.html)。

虽然是为希望尝试并发性的 Java 开发人员设计的（顺便说一下，其中包括曾经使用过任何类型 GUI 界面的任何人），但我确信本书中概述的技术困难和微妙之处适用于任何并发实现。

顺便说一句，我也喜欢 Jython，并且可以确认任何可以在 Java 中执行的并发方面的事情，显然都可以在 Jython 中执行。但是，有一个警告：并发可以用于异步编程（包括 GUI）和/或性能。如果对于后者您有问题，我认为：根据我的经验，Jython 的运行速度比等效的 Java 程序慢大约 10 倍。

这意味着您要求更高的 Jython 模块将不得不调用除 Jython 之外的其他东西来执行数字运算任务。同时，到目前为止，Jython* 还没有 Python 的多处理模块，因此进程间通信已被淘汰，除非您冒险进入可怕的 RMI 领域。如果你选择那个选项，你比我更像一个男人/女人。[但一切都还好：请参阅http://www.jython.org](http://www.jython.org)上的“The Definitive Guide to Jython” ……第 19 章是对并发性的介绍，第 10 章是关于 Java 和 Jython 的集成（提示：这非常容易）。

*   有趣：对 Jython 站点的快速浏览显示，就在 10 天前，即 2012 年 5 月 17 日，发布了 2.7a1 版本……“Alpha”版本。这应该包含 Python 2.6 附带的多处理模块。检查一下会很有趣：如果是这样，它可能为您提供了链接 Jython 和 CPython 进程的令人兴奋的选项（稍后更新：遗憾的是，目前看来并非如此 - 模块名称“multiprocessing”在我尝试时未被识别)...

PS 最后一句话：大多数专家对这些事情的了解远多于我所说的摩尔定律的重要性正在被阿姆达尔定律所取代，简而言之，这意味着编写稳定且可扩展的真正并发程序的艰巨挑战将是不可避免的未来。使用聪明的代码分析工具可以让真正的（即线程）并发变得多么容易，我不能说，但是对这个主题的投资以及并发强加的迷人的、智力的新推理学科可能会得到回报……如果你喜欢挑战。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-15T07:28:27.307

是的，有了 Jython，您就拥有了[真正的多线程](http://wiki.python.org/jython/WhyJython)。Jython（JPython 的继任者）是在 JVM 中运行的 Python 实现。Jython 和原始项目之间的主要区别之一是第一个项目没有 GIL，而是基于 JVM 的实现实现了真正的多线程支持。

我建议你看看这[本书](http://www.jython.org/jythonbook/en/1.0/)和[OReilly 的](http://shop.oreilly.com/product/9780596002473.do)书 。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-12-18T07:07:26.100

我已经用一个例子试过了。

要求：

*   您应该拥有来自 ( [https://www.oracle.com/in/java/technologies/javase-downloads.html](https://www.oracle.com/in/java/technologies/javase-downloads.html) )的 JDK 7 或更高版本
*   您应该从 ( [https://www.jython.org/installation.html](https://www.jython.org/installation.html) )安装最新的 Jython 版本

```
from rough import print_time
from datetime import datetime

"""
This is actually using python threading package.
One thing I came to know is that if we use the python threading module also, 
internally Jython chnages it to Java thread and work.
"""
# from threading import Thread, InterruptedException

"""
This is the java threading module.
"""
from java.lang import Thread, InterruptedException

"""
Here you can call your module from the run method.
For passing arguments, you can use the constructor of the Cycle class.
"""
class Cycle(Thread):

    def __init__(self,time1=1):
        Thread.__init__(self)
        # arguments for the run method
        self.time1 = time1

    def run(self):
        try:
            # Calling the required module with given arguments
            print_time(self.time1)
        except InterruptedException:
            print("Exception")

if __name__ == '__main__':
    print("start time:",datetime.now())

    for i in range(100):
        Cycle(i).start()

    print("end time:",datetime.now()) 
```

[请在https://github.com/om12nayak/Jython_multithreading_demo](https://github.com/om12nayak/Jython_multithreading_demo)中找到完整代码

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-02-12T08:25:45.753

最初令人困惑的方面可能是[您可以混合和匹配](http://www.jython.org/jythonbook/en/1.0/Concurrency.html#java-or-python-apis)Java 和 Jython 的并发机制。但这一切似乎都奏效了。原因是：

*   在 Jython 之下是相同的旧 Java。即使在沉重的 Jython 机器下，它所有强大的线程机制和数据结构也不会崩溃。
*   Jython 的线程以 Java 线程为底盘，并添加了一些上层结构，使它们能够使用 Python 线程 API。（没有更好的方法可以更轻松地移植线程化的 Python 代码。）但是这两种线程的本质是相似的。除了 Jython 线程

    > ...没有优先级，没有线程组，线程不能被销毁、停止、挂起、恢复或中断。[[1]](http://www.jython.org/docs/library/threading.html)

Python 惯用语可能更方便一些，因为例如，如果您希望做 的等价物`synchronized (some_object) { ... }`，则[需要进行一些摆弄](http://comments.gmane.org/gmane.comp.lang.jython.user/1691)，这可能比使用[RLock](http://www.jython.org/docs/library/threading.html#rlock-objects)可读性差。

# php - PHP header image-type output vs Location redirect to binary in fs

> ID：10568367
> 
> 赞同：5
> 
> 时间：2012-05-13T00:03:30.540
> 
> 标签：php, image, curl, header, filesystems

I'm trying to determine if I should just directly

1) have PHP fetch an image binary and output (with header as image-type) image, eg:

```
/* $image = ... insert curl function to fetch image */

header('Content-Type: image/png');

echo $image; 
```

or if I should have

2) a header redirect to the URL path of the image

```
header('Location: http://domain.com/pathtoimage/image.png'); 
```

* * *

Some initial questions:

In the first, would that amount to any overhead with PHP having to have the image in memory in order to output it?

In the second, would this lead to any errors on clients that somehow cannot follow the PHP header redirect?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T12:58:05.790

我反对标头 -> 位置解决方案，因为您将向服务器添加额外的请求。试试这个解决方案：

```
if (file_exists($file)) {
        header('Content-Type: image/png');
        readfile($file);
        exit;
    } 
```

此解决方案应具有最小的开销和内存占用。

# r - 去除 R 中的异常值

> ID：10568369
> 
> 赞同：3
> 
> 时间：2012-05-13T00:03:55.990
> 
> 标签：r, statistics, standard-deviation

我查看了一组数据并决定删除异常值会很好，异常值的定义是与平均值相差 2SD。

如果我有一组数据，比如 500 行具有 15 个不同的属性，我如何删除所有具有 1 个或多个属性的行，这些属性与平均值相差 2 个标准差？

有没有一种简单的方法可以使用 R 来做到这一点？谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-13T00:19:40.677

可能有很多方法，并且可能会添加包来处理这个问题。我建议你先试试这个：

```
library(sos); findFn("outlier") 
```

`scale`这是一种方法，您可以使用可以标准化向量的函数来完成您的要求。

```
#create a data set with outliers
set.seed(10)
dat <- data.frame(sapply(seq_len(5), function(i) 
    sample(c(1:50, 100:101), 200, replace=TRUE)))

#standardize each column (we use it in the outdet function)
scale(dat)

#create function that looks for values > +/- 2 sd from mean
outdet <- function(x) abs(scale(x)) >= 2
#index with the function to remove those values
dat[!apply(sapply(dat, outdet), 1, any), ] 
```

因此，在回答您的问题时，是的，有一种简单的方法可以将执行此操作的代码归结为 1 行代码：

```
dat[!apply(sapply(dat, function(x) abs(scale(x)) >= 2), 1, any), ] 
```

我猜有一个包可以做到这一点，甚至更多。该`sos`软件包非常棒（恕我直言），可以找到执行您想要的功能。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-02T21:44:59.843

```
na.rm = TRUE, ...) {
qnt <- quantile(x, probs=c(.25, .75), na.rm = na.rm, ...)
H <- 1.5 * IQR(x, na.rm = na.rm)
y <- x
y[x < (qnt[1] - H)] <- NA
y[x > (qnt[2] + H)] <- NA
y
} 
```

# entity-framework - 为什么项目编译时不参考实体框架？

> ID：10568384
> 
> 赞同：1
> 
> 时间：2012-05-13T00:08:28.967
> 
> 标签：entity-framework

我在解决方案中有许多项目。其中一个项目，称为 MyDAL，定义了许多业务对象并使用 Entity Framework 通过

```
public class MyContext : DbContext 
```

我刚刚在解决方案中添加了一个新项目，却忘记引用实体框架。

`MyContext`仍然可用！没有编译错误（我想我会收到一个编译器错误，告诉我我缺少对定义 DbContext 的程序集的引用）。

我可以在`MyContext`. 然而，

```
using (MyContext ctx = new MyContext()) 
```

给出编译器错误

> 'MyNs.MyContext'：在 using 语句中使用的类型必须隐式转换为 'System.IDisposable'

和

```
ctx.SaveChanges(); 
```

给出错误

> “MyNs.MyContext”不包含“SaveChanges”的定义，并且没有扩展方法“SaveChanges”接受...的第一个参数

就好像编译器默默地改变了一样

```
public class MyContext : DbContext 
```

至

```
public class MyContext : object 
```

我知道如何解决错误（添加缺少的引用），但我很好奇为什么在我开始引用 DbContext 的方法和接口之前首先编译的代码。

# java - 为什么调用构造函数重写方法而不是他的类中的方法？

> ID：10568385
> 
> 赞同：0
> 
> 时间：2012-05-13T00:08:35.983
> 
> 标签：java, scjp

通过运行以下代码，我得到了结果： A 类中的方法 B

类中的 方法。

```
public class Test {

    static class A {

        public A() {
            someMethod();
        }

        public void someMethod() {
            System.out.println("method from class A");
        }
    }

    static class B extends A {
        public void someMethod() {
            System.out.println("method from class B");
        }
    }

    public static void main(String... args) {
        new A();
        new B();
    }
} 
```

结果的第一行很清楚，但第二行不是。为什么A类的构造函数没有调用A类定义的方法，而是B类的重写方法？是不是在编译之后，构造函数 A 的代码以某种方式复制到 B 类，以便我们实际从 B 类调用我们的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-13T00:11:01.360

第二个对象是 B 类型，因此在`someMethod`构造函数中调用该方法时，它采用该方法的最后一个方法声明为 type `B`。

# wcf - 将 OperationContext.Current 存储在 WCF 服务实例的实例变量中

> ID：10568387
> 
> 赞同：3
> 
> 时间：2012-05-13T00:08:39.200
> 
> 标签：wcf, web-services, thread-local-storage, operationcontext

我想知道在 WCF 服务主机实例的实例变量中存储和引用 OperationContext.Current 对象是否明智。服务主机设置为 InstanceContextMode.PerCall，因此每个新请求都有自己的实例。

我问这个的原因是因为 WCF 不保证线程亲和性。有时，WCF 可以在一个线程上启动请求并在另一个线程上结束请求。

OperationContext.Current 对象存储在线程本地存储中。当新线程用于同一操作时，WCF“传播”到新线程。

在这种情况下，当 WCF 开始使用不同的线程时，访问存储在我的服务实例的实例变量中的 OperationContext 对象是否仍然安全？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T23:41:37.250

与其存储`OperationContext`，不如将其包装在可以替换的抽象中，以确保您需要的上下文提供的设施在抽象上 - 像这样

```
interface IContextService
{
    Message RequestMessage{ get;}
    string SessionId{ get;}
} 
```

然后有一个使用真实 OperationContext 的实现

```
class ContextService : IContextService
{
    public Message RequestMessage
    {
        get
        {
             return OperationContext.Current.RequestContext.RequestMessage;
        }
    }

    public string SessionId
    {
        get
        {
             return OperationContext.Current.SessionId;
        }
    }
} 
```

如果你将一个注入`IContextService`到你的类中，你现在可以通过提供一个假版本来进行测试

# php - Jquery 无法选择新的 HTML 数据追加

> ID：10568388
> 
> 赞同：0
> 
> 时间：2012-05-13T00:08:45.623
> 
> 标签：php, jquery, ajax, jquery-selectors, simple-html-dom

我附加了从 Ajax 收到的数据，它还包含一个带有 bsubmit 类的分区。当页面加载时，如果我单击包含类 bsubit 的 div，则执行以下函数但是当我单击也包含类 bsubmit 的新附加数据时，则以下代码不起作用。

这是代码

```
 $(function() {
    $(".bsubmit").click(function() {
    var id = $(this).parent().parent().attr("id");
    var comm= document.getElementById(id).getElementsByClassName("commentadd")[0].value;

      $.ajax({
       type: "POST",
       url: "comment.php",
       data: {id:id, comm:comm},
       cache: false,
       success: function(data){
        $('.addcomment').slideUp('slow', function() {

        });

// Bottom Line not working

        $("#"+id).find(".item_comment").append(data);   // DATA Contains a div with class bsubmit
         $(data).appendTo("#"+id).find(".item_comment"); // Now these Appended Div isnt calling this function again,  Why ? I want to call them again
        $('#load').fadeOut();
      }

     });

    return false;
        });

    }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-13T00:15:34.560

如果我理解您的问题：您是否尝试过该`.on()`方法？(jQuery 1.7)

```
$(yourParentElement).on('click','.bsubmit',function() { 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-13T00:37:22.293

您的问题是您将单击事件绑定到`.bsubmit`该类，但是该单击事件仅受到`.bsubmit`文档中已有的攻击，而不是新创建的攻击。

因此，您需要做的是，根据您的 Jquery 版本使用[live()](http://api.jquery.com/live/)或[on() 。](http://api.jquery.com/on/)

# 更改此行：

```
$(".bsubmit").click(function() { 
```

# 到

**jQuery LIVE**

```
$(".bsubmit").live("click", function() { 
```

# 或者

**jQuery 开启**

```
$(".bsubmit").on("click", function() { 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-13T00:15:39.910

`appendTo`不返回父母。

```
$("#"+id).find(".item_comment").append(data);   
$(data).appendTo("#"+id).parent().find(".item_comment"); // Use "parent()"
$('#load').fadeOut(); 
```

但是你真的应该缓存一些 DOM 元素......

```
var id = $(this).parent().parent().attr("id"); 
```

改成：

```
var $parent = $(this).parent().parent(); 
```

进而：

```
$("#"+id).find(".item_comment").append(data); 
```

改成：

```
$parent.find(".item_comment").append(data); 
```

# java - UV和ST纹理坐标之间的差异

> ID：10568390
> 
> 赞同：19
> 
> 时间：2012-05-13T00:08:55.223
> 
> 标签：java, opengl, java-3d, texture-mapping

UV 纹理坐标与 ST 纹理坐标有什么区别？

我知道在 OpenGL 中使用了 UV 和 ST。

我也知道 ST 也用于 Java。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-05-13T00:12:45.433

它们的含义相同，只是命名约定不同。

```
U = S = x dimension
V = T = y dimension 
```

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2012-11-29T09:31:29.900

[计算机图形学原理和实践（Foley 等人）](http://www.amazon.co.uk/Computer-Graphics-Principles-Practice-Practices/dp/0321399528)将 2 定义如下：

> 纹理映射可以分两步完成。一种简单的方法是首先将像素的四个角映射到表面上。对于双三次面片，此映射自然地定义了曲面 (s,t) 坐标空间中的一组点。接下来，将像素在表面的 (s,t) 坐标空间中的角点映射到纹理的 (u,v) 坐标空间中。纹理图中的四个 (u,v) 点定义了一个四边形，将更复杂的形状近似为由于表面曲率，像素实际上可能会映射。我们通过将位于四边形内的所有纹素相加来计算像素的值，并通过位于四边形内的纹素的分数对每个纹素进行加权。如果 (u,v) 空间中的变换点落在纹理贴图之外， **当表面是多边形时，通常将纹理贴图坐标直接分配给它的顶点。**

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-04-16T15:38:31.073

**uv**坐标从**左上角**开始（v 轴朝下）。
**st**坐标从**左下角**开始（t 轴朝上）。

```
s = u;
t = 1-v; 
```

我忘了告诉 opengl 中的纹理应该垂直翻转加载，因为行数据的第一个元素“对应于纹理图像的左下角” [（参见 glTexImage2D）](http://www.opengl.org/sdk/docs/man/xhtml/glTexImage2D.xml)。只有在这种情况下，st 和 uv 坐标似乎是一回事。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-04T15:30:35.170

这是一个约定俗成的问题。

Autodesk 3D Studio、Alias Maya、NewTek Lightwave 和其他可能使用字母 U 和 V 分别表示水平和垂直纹理坐标。 [DirectX](http://msdn.microsoft.com/en-us/library/windows/desktop/bb206245%28v=vs.85%29.aspx)遵循相同的约定。

然而，皮克斯的 RenderMan 在其参数化 3D 基元中为参数保留了字母 U 和 V。所以对于纹理，他们改用S[和 T。](http://penguin.ewu.edu/RenderMan/RMS_2.0/section4.html#Texture.coordinates)OpenGL 也将此约定用于纹理坐标。

所以它们的含义在理论上可能不同，但除非你处理一些好莱坞电影特效，否则它们可能都表示纹理坐标。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-03-04T03:11:52.173

STQ是需要进行透视校正或变形时必须使用的纹理坐标系，它与齐次纹理坐标uv的关系如下：

u =（以像素为单位的图像宽度）* S / Q

v =（以像素为单位的图像高度）* T / Q

当不需要透视校正时，Q = 1.0，因此 ST 成为简单的 uv 的归一化版本，它们之间的差异变得微妙，因此一些 3D 系统完全跳过了 uv 表示法，只使用 st/STQ 进行均质/归一化。

# bamboo - 如何在 Bamboo OnDemand 中指定脚本？

> ID：10568391
> 
> 赞同：0
> 
> 时间：2012-05-13T00:09:16.523
> 
> 标签：bamboo

界面截图在这里

[http://dl.dropbox.com/u/12337149/bamboo.png](http://dl.dropbox.com/u/12337149/bamboo.png)

我觉得这有点令人困惑，不清楚如何在 OnDemand 版本中指定我的脚本。文本框中应该放什么？到目前为止，我还没有看到上传构建脚本的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T00:27:50.087

脚本只是您要调用的脚本的名称。它需要依赖于代理。通常，您会从源代码存储库中同步/签出脚本。

# ruby-on-rails - 在 has_many 关系中使用时访问连接表中的额外属性

> ID：10568393
> 
> 赞同：1
> 
> 时间：2012-05-13T00:09:26.457
> 
> 标签：ruby-on-rails, attributes, has-many, jointable

我正在考虑在 has_many 关系之间添加一些额外的属性。

例如，我有一个用户表和一个组表。用户可以通过 :through has_many 关系加入群组。我想在该组中添加用户的“角色”属性。

```
create_table "groupization", :force => true do |t|
    t.integer  "user_id"
    t.integer  "group_id"
    t.string  "role"
    t.datetime "created_at",                     :null => false
    t.datetime "updated_at",                     :null => false
  end 
```

我想知道，我怎样才能访问角色属性。我在想类似的事情：

```
user.groups[0].role 
```

这是一个正确的方法吗？我知道语法错误（我试过了）；正确的语法是什么样的？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-13T00:53:45.287

我认为没有一种优雅的方法可以做到这一点，就像这样：

```
user.groupizations.find_by_group_id(user.groups[0].id).role 
```

您提供的示例代码`[0]`看起来并不实际，因此如果您向我们展示了您实际想要访问`role`的方式，可能会有一种更简洁的方式。

这是在[这里](https://stackoverflow.com/questions/428066/elegantly-selecting-attributes-from-has-many-through-join-models-in-rails)讨论过的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-13T12:32:56.903

在您的用户模型中，您将拥有如下内容：

```
class User < ActiveRecord::Base
  has_many :groupizations
  has_many :groups, :through => :groupizations
end 
```

您只需在控制台中通过`has_many`关系访问角色信息即可。`groupizations`

```
foo = User.first
bar = foo.groupizations.first
bar.role 
```

假设您对第一个用户进行了分组。

可以像这样获得特定的用户/组关系：

```
Groupizations.where("group_id = ? and user_id = ?", group.id, user.id) 
```

然后从那里你可以得到你正在寻找的角色。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-13T12:53:08.597

最好的方法是使用连接模型，然后将方法委托/代理到组，例如：

```
class User < ActiveRecord::Base
  has_many :memberships, :include => :group, :dependent => :delete_all
  has_many :groups, :through => :memberships
end

class Group < ActiveRecord::Base
   has_many :memberships, :include => user, :dependent => :delete_all
   has_many :users, :through => :memberships
end

class Membership < ActiveRecord::Base
  belongs_to :user
  belongs_to :group

  def group_name
    group && group.name
  end

  def user_name
    user && user.name
  end
end 
```

然后，如果您要在视图中显示用户组：

```
<ul>
<% @user.memberships.each do |membership| %>
  <li><%= membership.group_name %> (<%= membership.role %>)</li>
<% end %>
</ul> 
```

同样对于组的​​用户：

```
<ul>
<% @group.memberships.each do |membership| %>
  <li><%= membership.user_name %> (<%= membership.role %>)</li>
<% end %>
</ul> 
```

这种方式只需要三个查询 - 用户、组和成员资格各一个。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-13T12:10:35.143

目前尚不清楚您到底在寻找什么，所以我将抛出另一个带有控制台输出的示例，以便更清楚地了解它发生了什么。但是，要点是，要仅获取用户的角色，您需要指定您指的是哪个用户组（如@BuckDoyle 所示，尽管他只是选择第一个来反映您的示例） . 要获取所有用户角色的列表，您需要遍历用户的分组。

```
1.9.3-p194 :050 > User.find_by_name("Homer").groupizations.each {|groupization| 
                 puts groupization.group.org + ': ' + groupization.role}

User Load (2.8ms)  SELECT "users".* FROM "users" WHERE "users"."name" = 'Homer' LIMIT 1
Groupization Load (1.5ms)  SELECT "groupizations".* FROM "groupizations" WHERE 
"groupizations"."user_id" = 2

Group Load (1.9ms)  SELECT "groups".* FROM "groups" WHERE "groups"."id" = 1 
LIMIT 1

The Movementarians: cult follower

Group Load (1.4ms)  SELECT "groups".* FROM "groups" WHERE "groups"."id" = 2 
LIMIT 1

Nuclear Plant: employee 
```

最后一个想法（有点微不足道）“分组”当然有效，但如果“角色”是您要添加的唯一属性，那么更具体地命名关系模型（例如“成员资格”）具有实际好处，因为它至少在我的经验中，使关系更加清晰。

# opencv - 关于对比度/亮度/色彩校正等的设计建议

> ID：10568396
> 
> 赞同：0
> 
> 时间：2012-05-13T00:10:10.040
> 
> 标签：opencv

我有一个应用程序使用摄像头获取实时颜色数据。我想为用户提供所有“正常”控件来调整亮度、对比度、颜色调整等。究竟什么功能被认为适合“全功能”相机应用程序？

我假设我应该为用户提供调整（1）亮度和（2）对比度的能力。但由于这是一个彩色相机馈送，我是否也应该提供对 RGB 强度的控制？

这里关于对比度的很多讨论都与灰度图像有关。我假设对比度调整对于实时相机馈送也很有用。

我已经在我的应用程序中实现了直方图均衡器，但这似乎只适用于某些情况，所以我觉得需要添加更多控制。

此外，如果您对 OpenCV 中的哪些功能有任何建议，我应该将其用于此功能，那将是非常棒的。

谢谢，

-安德烈斯

# ios - 应用程序不断崩溃 - 在 Xcode 中是否正确设置了委托协议

> ID：10568401
> 
> 赞同：0
> 
> 时间：2012-05-13T00:12:08.853
> 
> 标签：ios, ios5

我的 iOS 应用程序不断崩溃。在 XCode 中，该协议没有像其他协议那样显示为蓝色，我想知道这是否设置正确。这是（显然）第一次使用自定义协议。这是它应该看起来的样子吗（DistanceModalViewControllerDelegate）？

谢谢![在此处输入图像描述](../Images/81fe4bab21f4554d2384c30d9d5d35ab.png)

# xcode - 失败的 Xcode Git 合并卡住了

> ID：10568405
> 
> 赞同：21
> 
> 时间：2012-05-13T00:13:15.340
> 
> 标签：xcode, git, conflict

我们有一个基于 git 的项目，有一个朋友和一个主分支。他对一些文件进行了一些更改，我对其他一些文件进行了更改，我们很可能对几个相同的文件进行了更改。他承诺并将他的所有更改推送到 repo。然后我去提交我的更改并尝试拉他的更改。我遇到了一些冲突，我主要解决了他的更改，因为它们是我没有更改的文件。然后，当我尝试推送时，我遇到了致命错误：在合并期间无法进行部分提交。

这些是我得到的屏幕。![显示具有源代码控制状态的文件](../Images/e1f27466e533327b11df11b3d45d818f.png)

![我尝试提交时的窗口](../Images/019bd639a8f05dadb6946a734ed6cf41.png)

![错误信息](../Images/c20b92aa3e40a9d04b4cf77eeab6bb29.png)

我能做些什么？该项目运行良好，只是游戏的主菜单没有显示它应该显示的图像，这是他正在处理的图像和他处理的类文件，除了其他几个。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-24T13:12:12.837

这是一个常见的令人沮丧的情况：

1.  打开终端
2.  转到您的项目存储库文件夹（包含 .git 隐藏文件的文件夹）
3.  把你的合并头移到一边打字`mv .git/MERGE_HEAD .git/MERGE_HEAD_STUCK`

你的问题应该已经解决了一半，在某些情况下你需要从组织者那里拉一下：

4.  打开管理器 - 存储库*“文件 > 源代码管理 > 存储库...”*
5.  找到您的项目的存储库并从这里*拉*取。

然后你应该能够从 Xcode 再次使用 Git，你可能需要解决一些合并冲突，但至少这将在 Xcode 下而不是在终端上。

注意：考虑[从您的 git 存储库中删除 .DS_Stores](https://stackoverflow.com/questions/107701/how-can-i-remove-ds-store-files-from-a-git-repository)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-02-23T08:50:34.863

打开终端并使用以下内容：

要查找哪些文件有冲突：`git status`

合并和修复冲突`git mergetool`

您可能需要添加一些未跟踪的文件：`git add .`

最后提交更改`git commit`

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-13T02:28:32.810

在解决所有合并冲突之前，您无法提交。根据您的描述，您都更改了一些文件。它们是你必须解决的冲突。

我从来没有解决过 Xcode 中的冲突。您始终可以从终端应用程序解决冲突。一旦进入终端并假设您已经安装了 Xcode 命令行工具，请尝试：

```
git mergetool
git commit 
```

这将/应该弹出一个 FileMerge 窗口，允许您选择您或他的编辑。您从终端获得的另一个选择是通过简单地接受他的更改来解决冲突。这会破坏您的代码，但您可以返回并修复它。对于那个尝试：

```
git status
git checkout --theirs -- /path/to/a/conflicted/file ...
git add -- /path/to/a/conflicted/file ...
git commit 
```

然后编辑文件以修复您的功能。解决所有冲突后，您将能够在 Xcode 中重新提交。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-08-22T10:01:33.413

当我遇到 XCode 问题时，我只需恢复到 AppCode（如果需要，可以试用版），并从顶级项目文件夹进行提交。

AppCode 检测合并场景，并通过部分合并解决问题。同样如果 AppCode 不能整理出来，我使用 Github 桌面。只有当这一切都失败时，我才会恢复到低级命令。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-16T22:32:44.247

Xcode 的 xcuserdata 文件有问题，我不得不放弃更改并重新提交

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-01-08T20:33:52.990

我用完全不同的方法解决了这个问题，只使用 Xcode 的源代码控制。

背景：另一个团队将更改推送到远程 Git 存储库（通过 Beanstalk）。就我而言，.xcodeproj 文件位于不同的目录下，并且没有进行更改。后来，当我尝试提交时，我在 Xcode 中收到了 Tree Conflict 错误。
[树冲突截图](http://i.stack.imgur.com/v5YcC.png)

使用 Xcode 几乎不可能更正，我用从 Git 服务器下载的版本替换了 .xcodeproj 文件。结果... Xcode 项目似乎清理干净了，但是来自损坏的 Pull 的所有更新都显示为我所做的更改，并已为提交而暂存。[查看所有这些 Mod 和添加的文件](http://i.stack.imgur.com/9Xo78.png)但是，在尝试提交时，我收到了相同的“致命：在合并期间无法执行部分提交”错误，此处讨论。

以下是我解决问题的方法......（现在，了解我是一个菜鸟程序员，所以我可能缺乏一些理解......但我的无知让我找到了另一种方法。）首先，我克隆了我的主人分支到辅助分支并切换到该分支。然后我创建了一个工作副本并将该工作副本的目录放在原始项目目录之外。（我不知道这是否有必要，但这是我在阅读其他故障排除技术时所做的。）然后我将分支切换到主分支，在那里我意识到我所有的暂存文件（对提交的更改）都消失了。为了确保所有文件都更新到对方所做的最新更改，我创建了一个名为 ThirdBranch 的新分支，它复制了所有文件，将其推送到 Git 服务器，让 Beanstalk 将我的 master 分支的服务器版本与我刚刚推送的 ThirdBrach 分支（逐行）进行比较，并且对方的所有更改都存在于我的 Xcode 上。这意味着我的主存储库和 Git 主存储库是相同的，这证明我仅使用 Xcode 解决了问题。

不要问我是怎么做的，除了我刚才描述的……当然要填补我遗漏的空白。我是新手，我什么都不懂。也许有经验的程序员可以将不相关的信息与相关信息分开，并更清楚地重新创建这种技术，这也是我发布此内容的部分原因。

# android - 从 Intent 调用活动时如何恢复活动

> ID：10568408
> 
> 赞同：6
> 
> 时间：2012-05-13T00:13:42.420
> 
> 标签：android, android-activity, android-intent

我有以下情况：单击按钮时，一个活动（DateActivity）调用另一个活动（ListActivity）。那是有效的。但是，每次单击按钮时，似乎都会创建一个新的 ListActivity 副本。如何让它恢复上一个 ListActivity 或在需要时创建一个新的？

注意：我目前正在使用 ListActivity`startActivity(intent);`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-13T09:46:13.607

不太确定你的情况，但你可以用它`intent.setFlags(Intent.FLAG_ACTIVITY_REORDER_TO_FRONT); startActivity(intent);`来实现你的目标。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-08T21:16:37.367

您应该将标志用于您正在使用的意图。

```
Inten Intent i = new Intent(getApplicationContext(), YourActivity.class);
//this is what you are looking for
i.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
startActivity(i); 
```

Intent 对象有很多常量，有关更多信息，请在开始键入“FLAG_”时查看 IDE 上的提示

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-05-13T00:33:56.850

用于`startActivityForActivity()`启动 ListActivity 并用于`setResult()`返回包含您下次要返回的状态的 Intent。在DataActivity中，`onActivityResult()`会收到ListActivity返回的这个intent。下次您启动 ListActivity 时，将这个（广为人知的）意图传递到您离开的地方“恢复”。

# delphi - 在 DesignMode 中使用 TWebBrowser 有什么方法可以告诉内容发生了变化？

> ID：10568411
> 
> 赞同：0
> 
> 时间：2012-05-13T00:14:48.303
> 
> 标签：delphi, twebbrowser

如果将 TWebBrowser 置于 DesignMode (HTMLDocument2.designMode := 'On';) 中，是否有办法在用户键入控件时检测文档的更改，类似于像 TEdit/TMemo 这样的 std ctrls 的 OnChange 事件？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T21:01:27.387

一旦您实现 IHTMLEditDesigner 界面并将其连接到 WebBrowser（您应该能够在 Web 上找到有关如何执行此操作的资源），这很容易实现。

那么关键部分就是使用PreHandleEvent：

```
function TWebBrowserFrame.PreHandleEvent(inEvtDispId: Integer;
  const pIEventObj: IHTMLEventObj): HResult;
begin
  Result := S_FALSE;
  If inEvtDispId = DISPID_EVMETH_ONKEYDOWN Then
      ...
  if pIEventObj.keyCode = ... etc...
end; 
```

这个页面有一些有用的信息：（DISPID 常量来自哪里......） [http://www.codeproject.com/Articles/6546/Using-IHTMLEditDesigner](http://www.codeproject.com/Articles/6546/Using-IHTMLEditDesigner)

# delphi - 无法在设计时单击自定义控件

> ID：10568416
> 
> 赞同：4
> 
> 时间：2012-05-13T00:16:15.323
> 
> 标签：delphi, custom-controls, mouse, delphi-xe2, design-time

我在 Delphi XE2 中构建了一个自定义控件（继承自`TCustomControl`）（并且在我的其他控件中遇到了这个问题）并且在设计时，我无法单击它们。我知道它与鼠标捕获有关，捕获鼠标事件并在设计时以不同于运行时的方式处理它们，但我不知道如何正确适应这一点。换句话说，在我能想到的许多解决方法中，我无法确定哪一个是正确（或最有效）的方法。

我确信必须有一些非常简单的标准，最有可能使用`ControlStyle`or`CreateParams`但不知道是什么。

在这个特定的控件中（我没有看到这个问题的模式），我正在捕获消息，包括`WM_NCHITTEST`和`WM_LBUTTONDOWN`。在设计时，控件 100% 处于活动状态，就好像它是运行时一样，当单击时，它改为执行运行时代码。

我有一种感觉，它在我的命中测试消息处理程序中，所以这里的代码（一些东西重命名）：

```
procedure TMyCustomControl.WMNCHitTest(var Message: TWMNCHitTest);
var
  P: TPoint;
  Poly: TPoints;
  X: Integer;
  I: TMyCollectionItem;
  Ch: Bool; //Need to improve invalidation
begin
  Ch:= False;
  P:= ScreenToClient(Point(Message.Pos.X, Message.Pos.Y));
  for X := 0 to Items.Count - 1 do begin
    I:= Items[X];
    Poly:= I.Points;
    FMouseIndex:= -1;
    FMouseState:= bmNone;
    if PointInPolygon(P, Poly) then begin //checks if point is within polygon
      FMouseIndex:= X;
      FMouseState:= bmHover;
      Ch:= True;
      Break;
    end;
  end;
  if Ch then Invalidate;
end; 
```

还有我的控件的构造函数（剥离）：

```
constructor TMyCustomControl.Create(AOwner: TComponent);
begin
  inherited;
  ControlStyle:= ControlStyle - [csDesignInteractive];
end; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-13T00:52:30.000

但你当然是对的。您没有在`WM_NCHITTEST`处理程序中返回任何内容。`Mmessage.Result`当您的处理程序被调用并且您没有为其分配任何其他内容时，您的值为 '0' (HTNOWHERE) 。

要么`inherited`在某个时候调用，要么实现您的逻辑并返回（设置 Message.Result）`HTCLIENT`您认为是控件内部的点。

这已经是运行时所需的行为，您可以包括设计时检查（但我想您应该出于某种原因进行所有计算）：

```
if csDesigning in ComponentState then
  Msg.Result := HTCLIENT; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-13T01:59:12.337

在设计时支持鼠标交互的官方方法是用非零结果响应`CM_DESIGNHITTEST`消息。然后该组件将接收正常的鼠标消息。

# java - 如何更改 java.sql.Connection 配置；进口报关单和连接件；

> ID：10568420
> 
> 赞同：2
> 
> 时间：2012-05-13T00:16:55.900
> 
> 标签：java, eclipse, import

正如标题所说，我想知道如何更改： java.sql.Connection con = ...; 导入java.sql.Connection；... 连接 con = ...;

使用 Eclipse 设置进行导入会很棒。

连接只是这种“直接访问”的一个例子。

最后，如果您知道该系统的名称，请将其添加到答案中。

提前致谢。

--编辑：感谢 BalusC 的正确命名，我[在 Eclipse 中找到了简化完全限定名称，](https://stackoverflow.com/questions/2644440/simplifying-fully-qualified-names-in-eclipse)但还没有办法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T00:41:29.087

在行中，

```
java.sql.Connection con = ...; 
```

将光标放在类名上`Connection`，然后按`Ctrl`+ `Shift`+ `M`（*添加导入*）。Eclipse 会将完全限定名称转换为短名称，并在必要时添加导入。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-13T00:23:10.427

你可以这样做：

```
import java.sql.Connection;
...
Connection con = ... 
```

# c++ - 重载函数调用不明确

> ID：10568421
> 
> 赞同：-3
> 
> 时间：2012-05-13T00:17:10.157
> 
> 标签：c++, codeblocks

下面是一个函数，它应该在数组 prod 的 lookUp 中定位字符串。它没有这样做。

```
void search(char prods[],char lookUp)
{
    int index = 0;
    char *strPtr = NULL;
        while(index < 5){               
         strPtr = strstr(prods[index], lookUp);
         if (strPtr != NULL)
                 break;
            index++;
        }
     } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T00:22:57.823

```
strPtr = strstr(prods[index], lookUp); 
```

strstr() 返回指向 str1 中第一次出现的 str2(string, not a char) 的指针，如果 str2 不是 str1 的一部分，则返回空指针。我认为 strchr() 可以做到~~~

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-13T00:26:11.137

如果这些确实是您的问题中所述的字符串，则应如下所示。

```
void search(char *prods[],char *lookUp)
{
    int index = 0;
    char *strPtr = NULL;
    while(index < 5)
    {               
        strPtr = strstr(prods[index], lookUp);
        if (strPtr != NULL)
             break;
        index++;
    }
 } 
```

# ios - 按名称而不是 ID 直接链接到 App Store 中的评论页面

> ID：10568423
> 
> 赞同：6
> 
> 时间：2012-05-13T00:18:14.243
> 
> 标签：ios, app-store, itunes

我想知道如何直接链接到我的 iOS 应用程序的评论页面，而不知道应用程序 ID，只知道名称。

我知道这可以通过使用链接到没有应用程序 ID 的应用程序

```
itms-apps://itunes.com/apps/APPNAME 
```

您可以链接到评论页面，但您需要应用 ID，例如。

```
http://itunes.apple.com/WebObjects/MZStore.woa/wa/viewContentsUserReviews?id=350212768&pageNumber=0& sortOrdering=1&type=Purple+Software&mt=8 
```

所以基本上，你能把这两者结合起来吗？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-13T00:49:31.027

我不相信你可以按照你想要的方式组合它们。

评论链接需要包含一个 ID，以便它知道将您发送到哪里。应用程序/APPNAME 链接是大量的 Apple 短链接，它们重定向到实际的基于 APPID 的链接。

有关所有基于 iTunes 的链接的更多信息可以在这篇很棒的文章中找到。

[http://bjango.com/articles/ituneslinks/](http://bjango.com/articles/ituneslinks/)

# ruby-on-rails - content_tag 不是从 ActionView::Helpers::FormBuilder 呈现的

> ID：10568425
> 
> 赞同：1
> 
> 时间：2012-05-13T00:18:32.887
> 
> 标签：ruby-on-rails, ruby, haml, formbuilder

我一直在尝试使用 Rails 中的自定义表单构建器方法。我的目标类似于[formtastic](https://github.com/justinfrench/formtastic)的`f.inputs`方法。到目前为止，这是我的代码：

```
class Builder < ActionView::Helpers::FormBuilder  

  def fieldset(name)
    @template.content_tag :fieldset, :class => 'inputs' do
      @template.content_tag :div, :class => 'legend' do
        @template.content_tag :span, name
      end
      @template.content_tag :ol do
        yield
      end
    end
  end

  def input_field(name, classes='', *args)
    @template.content_tag :li, class: "input #{classes}" do
      label(name) + text_field(name)
    end
  end

end 
```

那么我可以像这样在 HAML 中构建表单：

```
 = f.fieldset "General Info" do
    = f.input_field :name
    = f.input_field :slug, 'last' 
```

问题是呈现的 HTML 丢弃了图例 DIV。

```
<fieldset class="inputs">
  <ol>
    <li class="input ">
      <label for="content_instance_name">Name</label>
      <input id="content_instance_name" name="content_instance[name]" size="30" type="text" value="Home Page">
    </li>
    <li class="input last">
      <label for="content_instance_slug">Slug</label>
      <input id="content_instance_slug" name="content_instance[slug]" size="30" type="text" value="home-page">
    </li>
  </ol>
</fieldset> 
```

好像我错过了什么。
提前致谢。

解决方案

这是调整后的字段集方法：

```
def fieldset(name)
  @template.content_tag :fieldset, :class => 'inputs' do
    legend = @template.content_tag :div, @template.content_tag(:span, name), :class => "legend"
    legend += @template.content_tag :ol do
      yield
    end
  end
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T00:24:18.483

仅呈现块的返回值。添加 a`+`以便您的两个`content_tag`电话都返回。[类似的问题在这里。](https://stackoverflow.com/a/4205709/760389)

# c - 我如何获得 D-Bus 财产的价值？

> ID：10568426
> 
> 赞同：3
> 
> 时间：2012-05-13T00:18:39.350
> 
> 标签：c, dbus

我正在尝试为基于 MPRIS 的媒体播放器创建一个通用的远程控制应用程序。控制媒体播放器非常简单，但由于我对 D-Bus 和 DBus-GLib 还很陌生，所以从 D-Bus 获取值对我来说有点搞砸了。

从文档中我看到，如果我想知道我的播放器是否真的在玩某些东西，我需要获取 PlaybackStatus 属性，但是我找不到在 C 中获取此值的工作示例。

目前获取它的行如下所示：

```
dbus_g_proxy_call(player_proxy, "Get", &err, G_TYPE_STRING, "Volume", G_TYPE_INVALID, G_TYPE_INT, &volume, G_TYPE_INVALID); 
```

当然，它不起作用，因为`org.mpris.MediaPlayer2.Player`接口不理解 Get 方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-06-22T10:38:46.807

> 当然，它不起作用，因为`org.mpris.MediaPlayer2.Player`接口不理解该`Get`方法。

这是你需要的线索。该`Get`方法实际上是在[`org.freedesktop.DBus.Properties`interface](https://dbus.freedesktop.org/doc/dbus-specification.html#standard-interfaces-properties)上，因此您需要在该接口的代理对象上调用它，而不是在`player_proxy`对象（可能是`org.mpris.MediaPlayer2.Player`接口的代理）上调用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T00:26:32.023

看了下[这段源码](http://fossies.org/linux/misc/old/hxplay-11.0.0.tar.gz/player/common/gtk/hxdbusplayer.c)，好像需要用到`"IsPlaying"`，方法见`hx_dbus_player_is_playing`。

# internet-explorer - IE 中的 jQuery 缓存

> ID：10568429
> 
> 赞同：7
> 
> 时间：2012-05-13T00:19:33.077
> 
> 标签：internet-explorer, jquery, jquery-templates, wufoo

我们在这里有一个使用 Wufoo 表单和 Wufoo jQuery API 的站点。

我们从 API 中提取数据，对其进行排序，然后将其显示在页面上。当我们提交数字高于当前前 10 名的表单时，它应该在右侧实时更新，因为表单会重定向回自身。它这样做，但不是在 IE 中。相反，在提交表单和显示新数据之间似乎存在不必要的延迟。关闭浏览器并重新打开页面似乎可行，但这没有帮助。

这是我们正在使用的 jQuery：

```
<script>
    $.wufooAPI.getEntries({
        "callback"   : processEntries,             
        "formHash"   : "x7x1x7",                   
        "sortID"   : "Field3",                   
        "sortDirection"   : "DESC",
    });
    function processEntries(data) {
        $.each(data.Entries.slice(0, 10), function(entriesIndex, entriesObject) {
            // Make sure this entry has all the required bits
            if (entriesObject.Field1 && entriesObject.Field3) {
                $("#attendeeTemplate").tmpl(entriesObject).appendTo("#people ul");  
            }
        });
    };

</script> 
```

这是模板代码：

```
 <script id="attendeeTemplate" type="text/x-jquery-tmpl">
                <li>
                    <h4>${Field1}</h4>
                    ${Field3} minutes
                </li>
            </script> 
```

它在除 IE8 和 9 之外的所有浏览器中都能完美运行，因为它看起来像是在缓存数据而不是从服务器拉取请求。

有什么办法可以停止在 IE 中缓存 jQuery？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-05-16T22:32:30.510

一种简单的方法是使用时间戳来欺骗和加盐您的请求网址（但这有点笨拙）。您可以关闭[ajax 请求的缓存](http://api.jquery.com/jQuery.ajaxSetup/)：

```
$.ajaxSetup ({
    // Disable caching of AJAX responses
    cache: false
}); 
```

MSDN 在 IE [http://support.microsoft.com/kb/234067](http://support.microsoft.com/kb/234067)中有一个关于缓存避免的页面。

# java - Java - Jboss 部署错误

> ID：10568432
> 
> 赞同：0
> 
> 时间：2012-05-13T00:20:01.793
> 
> 标签：java, jboss, security

我在项目部署方面遇到问题。这是我得到的错误：

```
01:08:26,780 ERROR [org.apache.catalina.core.ContainerBase.[jboss.web].[default-host].[/domain-as]] (MSC service thread 1-7) Exception sending context initialized event to listener instance of class pt.ist.anacom.applicationserver.ApplicationServerInitListener: java.lang.NoClassDefFoundError: sun/security/x509/X509CertImpl
at pt.ist.anacom.applicationserver.ApplicationServerInitListener.generateCert(ApplicationServerInitListener.java:86) [classes:]
at pt.ist.anacom.applicationserver.ApplicationServerInitListener.contextInitialized(ApplicationServerInitListener.java:51) [classes:]
at org.apache.catalina.core.StandardContext.contextListenerStart(StandardContext.java:3368) [jbossweb-7.0.1.Final.jar:7.0.2.Final]
at org.apache.catalina.core.StandardContext.start(StandardContext.java:3821) [jbossweb-7.0.1.Final.jar:7.0.2.Final]
at org.jboss.as.web.deployment.WebDeploymentService.start(WebDeploymentService.java:70) [jboss-as-web-7.0.2.Final.jar:7.0.2.Final]
at org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1824)
at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1759)
at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(Unknown Source) [:1.6.0_30]
at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source) [:1.6.0_30]
at java.lang.Thread.run(Unknown Source) [:1.6.0_30]
Caused by: java.lang.ClassNotFoundException: sun.security.x509.X509CertImpl from [Module "deployment.domain-as.war:main" from Service Module Loader]
at org.jboss.modules.ModuleClassLoader.findClass(ModuleClassLoader.java:191)
at org.jboss.modules.ConcurrentClassLoader.performLoadClassChecked(ConcurrentClassLoader.java:361)
at org.jboss.modules.ConcurrentClassLoader.performLoadClassChecked(ConcurrentClassLoader.java:333)
at org.jboss.modules.ConcurrentClassLoader.performLoadClass(ConcurrentClassLoader.java:310)
at org.jboss.modules.ConcurrentClassLoader.loadClass(ConcurrentClassLoader.java:103)
... 10 more 
```

当我在代码中添加一个新函数时发生这种情况，我在其中调用另一个类的函数来生成安全证书。这是进行调用的函数的代码：

```
 public static void generateCert(String name, KeyPair key, int days, String algorithm) throws GeneralSecurityException, IOException{

    System.out.println("Starting to generate certificate");
    X509Certificate cert = CertificationAuthority.generateCertificate(name, key, days, algorithm);
    //return cert;
} 
```

它确实进行了打印，但随后发生了错误。生成证书在另一个类（CertificationAuthority 类）中，代码如下：

```
 public static X509Certificate generateCertificate(String dn, KeyPair pair, int days, String algorithm)
        throws GeneralSecurityException, IOException
        {

    PrivateKey privkey = pair.getPrivate();
    X509CertInfo info = new X509CertInfo();

    //caso haja tempo, tratar isto com long + long
    Date from = new Date();
    Date to = new Date(from.getTime() + days * 864000001);
    CertificateValidity interval = new CertificateValidity(from, to);
    BigInteger sn = new BigInteger(64, new SecureRandom());
    X500Name owner = new X500Name(dn);

    info.set(X509CertInfo.VALIDITY, interval);
    info.set(X509CertInfo.SERIAL_NUMBER, new CertificateSerialNumber(sn));
    info.set(X509CertInfo.SUBJECT, new CertificateSubjectName(owner));
    info.set(X509CertInfo.ISSUER, new CertificateIssuerName(owner));
    info.set(X509CertInfo.KEY, new CertificateX509Key(pair.getPublic()));
    info.set(X509CertInfo.VERSION, new CertificateVersion(CertificateVersion.V3));
    AlgorithmId algo = new AlgorithmId(AlgorithmId.md5WithRSAEncryption_oid);
    info.set(X509CertInfo.ALGORITHM_ID, new CertificateAlgorithmId(algo));

    // Sign the cert to identify the algorithm that's used.
    X509CertImpl cert = new X509CertImpl(info);
    cert.sign(privkey, algorithm);

    // Update the algorithm, and resign.
    algo = (AlgorithmId)cert.get(X509CertImpl.SIG_ALG);
    info.set(CertificateAlgorithmId.NAME + "." + CertificateAlgorithmId.ALGORITHM, algo);
    cert = new X509CertImpl(info);
    cert.sign(privkey, algorithm);

    certificates.add(cert);

    return cert;
        } 
```

我不明白为什么我会收到这个错误。我正在尝试测试 generateCertificate 方法的功能，但由于此错误，我无法做到这一点。

任何人都知道发生了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T17:05:20.350

JBoss 将 Sun 类隔离开来。查看`sun.jdk`模块，您需要在`sun/security/x509`此处添加为导出或创建自己的模块来执行此操作。

# ruby - 未定义的方法“has_key”？

> ID：10568433
> 
> 赞同：3
> 
> 时间：2012-05-13T00:20:23.907
> 
> 标签：ruby, hash

尝试处理 ruby​​ 中的嵌套哈希时，出现此错误：

```
undefined method `has_key' for {"_l"=>{"or"=>"@`"}, "a"=>{}}:Hash (NoMethodError) 
```

上面的'for'引用的东西不是...哈希吗？哈希没有 has_key?() 方法吗？这里发生了什么？

这是代码...谢谢：

```
$conditioning_environments = {
  "_l" =>
   {
    "or" => "@`"
   },
     "a" => {

   }
}
....
if $conditioning_environments["_"+graphemes[index+1]].has_key(g)
    .... 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-13T00:22:27.113

您想要的方法是[`has_key?`](http://www.ruby-doc.org/core-1.9.3/Hash.html#method-i-has_key-3F)带问号。

您粘贴的代码段有问号，但错误表明有问题的代码中缺少它。

编辑：您从粘贴的代码段中删除了问号：p

# android - Android：绘制多条路径

> ID：10568434
> 
> 赞同：2
> 
> 时间：2012-05-13T00:20:31.593
> 
> 标签：android, path, android-canvas

我正在尝试开发一个简单的“触摸绘图”，并且我想绘制用户在 onTouch 侦听器中放置的不同路径。我有一个简单的问题。当我绘制路径时，我获得了在最后一个 onTouch 条目的点中绘制的单个路径。我认为所有路径都绘制在最后一条路径上，因为我使用具有 150 alpha 的 Paint，并且它在第二个和连续的 onTouch 条目中看起来更可靠。

我怎么能解决这个问题？谢谢！

```
public class PaintView extends View implements OnTouchListener {

List<List<Point>> paths = new ArrayList<List<Point>>();
List<Point> points = new ArrayList<Point>();
Paint paintLine = new Paint();
Paint paintCircle = new Paint();

public PaintView(Context context) {
    super(context);
    setFocusable(true);
    setFocusableInTouchMode(true);

    this.setOnTouchListener(this);

    paintLine = new Paint(Paint.ANTI_ALIAS_FLAG);
    paintLine.setStyle(Paint.Style.STROKE);
    paintLine.setStrokeWidth(10);
    paintLine.setColor(Color.GREEN);
    paintLine.setAlpha(150);
}

public void onDraw(Canvas canvas) {
    Path path = new Path();
    List<Point> pointsList;
    List<Path> pathList = new ArrayList<Path>();
    Point point = new Point();

    for (int i = 0; i < paths.size(); i++) {
        pointsList = paths.get(i);

        path.reset();
        boolean first = true;

        for (int j = 0; j < points.size(); j+=2 ) {
            point = pointsList.get(j);

            if (first) {
                first = false;
                path.moveTo(point.x, point.y);
            } else if (j < pointsList.size() - 1 ) {
                Point nextPoint = pointsList.get(j+1);
                path.quadTo(point.x, point.y, nextPoint.x, nextPoint.y);
            } else {
                path.lineTo(point.x, point.y);
            }

        }

        pathList.add(path);
    }

    for (Path pathDraw : pathList) {
        canvas.drawPath(pathDraw, paintLine);
    }

}

public boolean onTouch(View view, final MotionEvent event) {
    Point point = new Point();
    point.x = event.getX();
    point.y = event.getY();

    switch (event.getAction()) {
    case MotionEvent.ACTION_DOWN:
        // DO SOMETHING
        points.clear();
        points.add(point);
        break;
    case MotionEvent.ACTION_MOVE:
        points.add(point);
        break;
    case MotionEvent.ACTION_UP:
        points.add(point);
        paths.add(points);
        break;
    default:
        return false;
    }
    invalidate();
    return true;

}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T03:12:55.253

问题是您正在**重复**`points`绘制使用列表中的点构建的路径。

 **注意`invalidate()`调用`onTouch`，每次调用都会触发一个重绘事件，这会导致`onDraw`被调用，此时一切看起来都很好。问题是你只`points.clear()`在`ACTION_DOWN`事件上做了，但你也**应该**`ACTION_MOVE`在和`ACTION_UP`事件上清除它们。相反，您保留之前收集的所有点并绘制由所有这些点构建的路径`onDraw`。因此，您有效地重复绘制了一些使用先前收集的点构建的路径。

请注意，在拖动动作中，将有**1 个 ACTION_DOWN**、**N 个 ACTION_MOVE**、**0 或 1 个 ACTION_UP**事件。**

# java - 为什么 Guava 不对小的 ImmutableLists 使用专门的类？

> ID：10568440
> 
> 赞同：4
> 
> 时间：2012-05-13T00:22:25.990
> 
> 标签：java, guava

Guava[`ImmutableList`](http://code.google.com/p/guava-libraries/source/browse/guava/src/com/google/common/collect/ImmutableList.java)有一系列的重载`of()`方法。[正如在这个已解决问题](https://stackoverflow.com/questions/3737882/why-does-guavas-immutablelist-have-so-many-overloaded-of-methods)的上下文中所讨论的那样，这些存在是为了避免在将可变参数与泛型混合时出现的警告。

但除此之外，0 和 1 参数方法都依赖于专门的列表实现。似乎可以对 2..11 参数方法执行相同的操作，从而减少这些列表的内存消耗 - 类似于

```
final class ImmutableListWith2Elements<E> extends ImmutableList<E> {
  final E e1;
  final E e2;
  ... 
```

相反，它们使用基于数组的实现，这意味着除了内容引用之外，还存储一个数组对象和对数组的引用。你能帮我理解这里所涉及的权衡吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-13T00:48:06.087

> 你能帮我理解这里所涉及的权衡吗？

这是一个权衡：

*   性能 - 不分配临时数组可以节省。但是，需要进行一些广泛的代码分析和基准测试来量化节省。（我怀疑在大多数应用程序中它是微不足道的。请阅读@Voo 提供的[此链接！）](http://blogs.msdn.com/b/oldnewthing/archive/2008/11/26/9143050.aspx)
*   可读性 - 有一堆额外的重载会使 javadocs 变得混乱。
*   可维护性 - 有一堆以不需要临时对象的方式实现的重载将需要大量的复制/粘贴编程，这使得未来的代码维护更加困难。
*   实用程序 - 这些重载的使用频率如何？我希望答案是“很少”。
*   字节码占用空间——这些额外的重载会导致每个使用 Guava JAR 文件的应用程序的应用程序膨胀。

我的建议：

*   不要因此而困扰 Guava 开发人员。他们已经决定了权衡取舍。你只会浪费你的呼吸。
*   如果缺少这些类或方法会损害您的应用程序，请自行添加。（但尝试以不涉及番石榴的私人“分叉”的方式进行......因为从长远来看你可能会后悔。）

* * *

作为记录，我认为 Guava 开发人员做对了。

# ios - 如何从标签栏按钮提升模态视图

> ID：10568442
> 
> 赞同：0
> 
> 时间：2012-05-13T00:22:49.000
> 
> 标签：ios

我正在使用这个：

[https://github.com/boctor/idev-recipes/tree/master/RaisedCenterTabBar](https://github.com/boctor/idev-recipes/tree/master/RaisedCenterTabBar)

任何人都知道如何从说..相机按钮（如果相机按钮用于相机以外的其他东西）获得模态视图？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T00:53:57.910

在 BaseViewController.m 中添加了中心按钮

```
 -(void) addCenterButtonWithImage:(UIImage*)buttonImage highlightImage:(UIImage*)highlightImage 
```

只需添加观察者：

```
 [button addTarget:self action:@selector(click:) forControlEvents:UIControlEventTouchUpInside]; 
```

然后显然实现：

```
 -(void)click:(id)sender{
[self presentModalViewController:[[UIViewController alloc] init] animated:YES]; 
```

}

# asp.net-membership - 远程成员连接字符串 aspnet.mdf

> ID：10568443
> 
> 赞同：0
> 
> 时间：2012-05-13T00:22:49.460
> 
> 标签：asp.net-membership, connection-string, edmx

我有一个 MVC4 应用程序，其中包含一个带有成员表的 aspnet.mdf 数据库，并且我已经向其中添加了两个表。在本地，我使用“AccountModels.cs”来处理成员资格，并使用数据库优先的 EDMX 模式来处理另外两个表。所以我有两个在本地运行良好的连接字符串。

远程，我的数据库第一个 EDMX 模式“aspnetEntities”连接字符串工作正常，但我不知道我需要做什么才能让“DefaultConnection”连接字符串工作，这就是我希望的工作：

远程默认连接不起作用

```
<add name="DefaultConnection" connectionString="Data Source=mydatabase.db.3730456.hostedresource.com; Initial Catalog=mydatabase; Persist Security Info=True; MultipleActiveResultSets=True; User ID=mydatabase; Password=mypass" providerName="System.Data.SqlClient"/> 
```

在本地它看起来像这样，但它是在我添加 EDMX 时为我生成的

```
<add name="DefaultConnection" connectionString="Data Source=.\SQLEXPRESS;AttachDbFilename=|DataDirectory|\aspnet.mdf;Integrated Security=True;User Instance=True;MultipleActiveResultSets=True" providerName="System.Data.SqlClient" /> 
```

还有我工作的远程 aspnetEntities 连接字符串

```
<add name="aspnetEntities" connectionString="metadata=res://*/Models.RegisterModel.csdl|res://*/Models.RegisterModel.ssdl|res://*/Models.RegisterModel.msl;provider=System.Data.SqlClient;provider connection string=&quot;Data Source=mydatabase.db.3730456.hostedresource.com; Initial Catalog=mydatabase; User ID=mydatabase; Password='mypass'&quot;" providerName="System.Data.EntityClient" /> 
```

当我尝试远程运行网站的会员部分时，我收到一条错误消息，说它正在尝试构建一个新数据库，

**数据库“master”中的 CREATE DATABASE 权限被拒绝。**

有人可以帮我解决一个可行的连接字符串吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T02:26:16.963

没关系，答案是不使用默认会员提供程序并构建您自己的自定义提供程序。无论如何，Aspnet.mdf 太臃肿了！

# php - 带有 SQL 函数的 CakePHP 列表

> ID：10568447
> 
> 赞同：1
> 
> 时间：2012-05-13T00:23:54.743
> 
> 标签：php, sql, cakephp

我想生成像 day=>title 这样的列表：

```
$news = $this->News->find('list', array(
    'conditions' => array(
        'News.created LIKE' => '2008-09%'),
    'fields' => array(
        'DAY(News.created) AS day',
        'News.name'),
    'recursive' => -1)); 
```

...但是不起作用，为什么？

函数 SUBSTR/SUBSTRING 也...

当我将 find 与 'all' 属性一起使用时，DAY 函数运行良好！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T01:02:07.580

它不起作用，因为它`DAY(News.created)`是一个计算值，但如果你将它[设为 virtual field](http://book.cakephp.org/2.0/en/models/virtual-fields.html) ，它可能会起作用。

请注意，当您使用 时`'all'`，结果数组上的每一行都将具有`[0][day]`该值的键，而不是`[News][day]`. 这意味着 Cake 不会将它识别为来自 model 的字段`News`，这就是为什么你不能将它与`'list'`.

# opencv - 如何使用opencv计算闪烁次数？

> ID：10568448
> 
> 赞同：-4
> 
> 时间：2012-05-13T00:23:56.137
> 
> 标签：opencv, computer-vision

我正在尝试使用 opencv 计算闪烁次数。设置是；我有一台摄像机盯着闪烁的手电筒，并使用 opencv 函数尝试检测来自摄像机的视频流中的闪烁次数。这样做的最简单方法是什么？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T02:38:35.060

假设这是一个摄像机（！），您将捕获一个视频流，然后在每一帧中检查一个明亮的区域。

从这里开始[http://docs.opencv.org/](http://docs.opencv.org/)并获取[视频捕获工作](http://opencv.willowgarage.com/documentation/cpp/reading_and_writing_images_and_video.html#videocapture)

如何检测闪光灯取决于它覆盖了多少图像 - 如果它完全填满了帧，它可能就像找到图像的平均像素值一样简单

# php - 从内容中获取 href 值并通过 PHP 发送电子邮件？

> ID：10568449
> 
> 赞同：-3
> 
> 时间：2012-05-13T00:24:07.203
> 
> 标签：php, jquery

**这怎么可能不道德？客户想要一个在线界面来查看电子邮件提案，然后可以单击“接受”或“拒绝”将向该人发送静态电子邮件，告诉他们他们的提案是否已被接受。**

我正在尝试从页面上的内容中抓取一个电子邮件地址，将该电子邮件地址分配给一个值，然后通过 PHP 使用该地址发送一封电子邮件。

除了，以下不起作用。

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7/jquery.js"></script>
<script>
$(document).ready(function() {
    var from_address = $('.rcmContactAddress').attr('href');
    from_address = from_address.substring(7);
    $('#to').value(from_address);
});
</script>
<input type="text" id="to" value=""></input> 
```

该页面（使用 Roundcube 后端构建）将显示电子邮件消息，并带有一个接受或拒绝按钮。部分页面内容如下所示：

```
<td class="header from">
    <span>
        <a href="mailto:emailaddress" onclick="return rcmail.command('compose','emailaddress',this)" title="emailaddress" class="rcmContactAddress">Contact Name</a>
    </span>
</td> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T00:34:21.640

您需要先将电子邮件地址传输到 PHP 脚本。您可以为此使用 ajax。在 PHP 端，您将需要使用发布的电子邮件地址并使用[邮件](http://tr.php.net/manual/en/function.mail.php)功能。这是一个示例 jQuery ajax 调用：

```
$.ajax({
    url:'yourMailSenderScript.php',
    data:{email:theEmailAddress},
    type:'post',
    cache:false
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-13T00:36:57.123

可能只有一个错误，还有更多，但是：

```
$('#to').value(from_address); 
```

应该：

```
$('#to').val(from_address); 
```

如果您可以向我们展示`anchor`外观，我们可能会为您提供更多帮助。

# java - Java 的垃圾收集器是如何工作的？

> ID：10568450
> 
> 赞同：2
> 
> 时间：2012-05-13T00:24:17.993
> 
> 标签：java, garbage-collection

> **可能重复：**
> [Java 中的垃圾收集器是什么？](https://stackoverflow.com/questions/3798424/what-is-the-garbage-collector-in-java)

在我的程序中，我使用`ScheduledThreadPoolExecutor`.

被调用的函数，我们会说是`removeStat(Character char)`. `char.getClient().getWriter()`在该方法中，它以侧字符（我们会说）引用函数。我们假设在 20 分钟的等待期间，有问题的角色退出并且不再需要他们的 Character 实例。

Java 垃圾收集器会`Character`在那个时候删除该类，导致 char in`removeStat`为空，还是它知道要等到调用完成？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-13T00:30:37.030

垃圾收集器（包括 Java 的）足够聪明，您不必担心这一点。垃圾收集器不会垃圾收集任何东西，直到所有对它的引用都消失了。如果对象仍然可以访问，它仍然存在。

# java - java中的鼠标定位

> ID：10568457
> 
> 赞同：10
> 
> 时间：2012-05-13T00:26:12.770
> 
> 标签：java, frame-rate

我正在用 Java 开发第一人称射击游戏，我想实现鼠标移动使玩家旋转的控件。但是在Java中，我只能通过`MouseListener`事件来获取鼠标坐标，所以一旦鼠标光标离开显示器边缘，坐标就会停止变化，我将无法转动玩家的视野。

关于如何做到这一点的任何提示/建议？谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-13T13:52:11.920

我尝试`java.awt.Robot`按照 AerandiR 的建议使用 a，但我遇到了一些问题，其他人也可能会遇到这些问题，所以我会详细说明。

如果您的目标是将光标保持在一个位置（最好是屏幕的中心），那么您将需要在方法`robot.mouseMove(width/2, height/2);`结束时调用类似的东西`mouseMoved()`。使用此实现，每次将鼠标移离中心时，`Robot`都会将其移回中心。

但是，当`Robot`鼠标重新居中时，玩家会回到原来的位置。实际上，玩家将在原始位置和转身位置之间出现口吃。

为了解决这个问题，不要定义玩家打开鼠标现在位置和原来位置之间的差异的距离，而是将其定义为与中心的距离。

像这样：`turnAmountX += e.getX() - width/2;`

现在，如果将`Robot`鼠标重新居中，`e.getX() - width/2`将始终产生零。

回顾：

```
 void mouseMoved(MouseEvent e) {
        turnAmountX += e.getX() - width/2;
        turnAmountY += e.getY() - height/2;
        robot.mouseMove(this.getLocationOnScreen().x + width/2, 
            this.getLocationOnScreen().y + height/2;
    } 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-13T01:35:51.400

在某些游戏中，每次鼠标移动事件时，光标都会移回屏幕中间，并且视图会随着鼠标事件的相应幅度和方向移动。您可以通过在光标居中之前计算光标位置到屏幕中心的偏移量来获得该向量。要将光标移回屏幕中心，您可以尝试使用[java.awt.Robot](http://docs.oracle.com/javase/7/docs/api/java/awt/Robot.html)类。

由于您正在构建第一人称射击游戏，因此您可能希望隐藏中心锁定光标，并在玩家打算瞄准的位置绘制您自己的十字准线。这还将涉及根据先前鼠标移动事件的运行总数来跟踪光标*应位于的位置。*

如果您想实现视图将继续相对于鼠标的起始位置移动的行为（即使鼠标停止移动），您可以保留所有先前鼠标移动向量的移动总和，并相应地移动视图一次每一帧。然而，这可能更适用于飞行模拟器之类的东西，而不是第一人称射击游戏。

# sql - SQL : Varchar 在文本末尾添加空格

> ID：10568462
> 
> 赞同：0
> 
> 时间：2012-05-13T00:27:08.263
> 
> 标签：sql, varchar

当我将元素添加到列（varchar）时，我得到了额外的空间。例如，如果我有一张桌子`Student`，`name varchar(10)`我会这样做：

```
INSERT INTO Student (id,name) VALUES (1,'student')
SELECT name FROM Student WHERE id=1 
```

我明白了`student[space][space][space]`。

如何在不将类型更改为的情况下进行修复`text`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T03:33:40.503

大多数数据库以固定的表格格式输出查询结果。要查看字符串的真正开始和结束位置，您需要连接另一个字符。以下是三种方式，具体取决于数据库：

```
select '"'+name+'"'
select '"'||name||'"'
select concat('"', name, '"') 
```

您可能会发现空格是查询工具的产物。

# node.js - 会话的 node.js Connect（不是 Express）hello-world 示例

> ID：10568467
> 
> 赞同：3
> 
> 时间：2012-05-13T00:28:25.250
> 
> 标签：node.js, everyauth

我需要使用 node.js Connect（不是 Express）非常安全地实现[everyauth 。](https://github.com/bnoguchi/everyauth)

尽管该站点为 Connect 提供了一些代码示例，但我不熟悉 node-Connect-session-middleware 如何处理会话。

有人可以介绍一些好的简单例子来开始吗？

PS。我找到了 Connect 的官方示例，但需要一个完整的工作示例。

[http://www.senchalabs.org/connect/session.html](http://www.senchalabs.org/connect/session.html)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T21:15:47.260

我建议您查看[Passport](http://passportjs.org/)（我开发的）。everyauth 倾向于假设存在 Express，从而难以集成到仅限 Connect 的应用程序中。

在想要更模块化和更容易集成的东西之后，我开发了 Passport。它不做任何假设，只是简单的中间件，因此很容易融入基于 Connect 的应用程序中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T15:45:36.627

Express.js 实际上是 Connect 之上的一个薄层。所以你可以把它作为参考，看看他们是怎么做的。

# python - 在 Python 中将多个 zip 文件合并为一个 zip 文件

> ID：10568468
> 
> 赞同：16
> 
> 时间：2012-05-13T00:28:46.293
> 
> 标签：python, zip

我有多个具有相同结构的 zip 文件——它们在根级别包含 XML 文件。每个 zip 文件中的所有文件都是唯一的（跨 zip 文件没有重复）。我需要将所有 zip 文件中的所有 XML 文件组合成一个 zip 文件（与原始 zip 文件具有相同的结构）。关于如何最好地做到这一点的建议？谢谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-13T01:30:55.320

这是我能想到的最短版本：

```
>>> import zipfile as z
>>> z1 = z.ZipFile('z1.zip', 'a')
>>> z2 = z.ZipFile('z2.zip', 'r')
>>> z1.namelist()
['a.xml', 'b.xml']
>>> z2.namelist()
['c.xml', 'd.xml']
>>> [z1.writestr(t[0], t[1].read()) for t in ((n, z2.open(n)) for n in z2.namelist())]
[None, None]
>>> z1.namelist()
['a.xml', 'b.xml', 'c.xml', 'd.xml']
>>> z1.close() 
```

在不测试替代方案的情况下，对我来说这是最好的（可能也是最明显的！）解决方案，因为 - 假设两个 zip 文件包含相同数量的数据，这种方法只需要解压缩和重新压缩其中的一半（1 个文件） ）。

PS：列表理解只是为了在控制台中的一行上保留指令（这可以加快调试速度）。好的 pythonic 代码需要一个适当的`for`循环，因为结果列表没有任何用途......

！

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-05-15T03:34:19.287

这就是我想出的，感谢@mac。请注意，当前实现的方式是修改第一个 zip 文件以包含其他 zip 文件中的所有文件。

```
import zipfile as z

zips = ['z1.zip', 'z2.zip', 'z3.zip']

"""
Open the first zip file as append and then read all
subsequent zip files and append to the first one
"""
with z.ZipFile(zips[0], 'a') as z1:
    for fname in zips[1:]:
        zf = z.ZipFile(fname, 'r')
        for n in zf.namelist():
            z1.writestr(n, zf.open(n).read()) 
```

# haskell - 评估“main = return (getChar, getChar)”

> ID：10568470
> 
> 赞同：2
> 
> 时间：2012-05-13T00:28:59.153
> 
> 标签：haskell

我很抱歉我英语不好。

让我们看看下面的代码。

```
main = getChar 
```

首先，main会被求值，它的值是“getChar”，但是编译器不知道“getChar”的值，所以编译器会求值“getChar”来计算“getChar”的值，这样，getChar就会被执行。

实际上，当我测试上面的代码时。“getChar 被执行。

让我们看看下面的代码。

```
main = return (getChar, getChar) 
```

首先，main 求值，它的值是 return (undefined, undefined) -> IO (undefined, undefined)，所以 prelude 会求值 IO (undefined, undefined) 来打印值。因此将评估两个 getChar 之一。

但是，当我测试上面的代码时，两个 getChar 都没有被评估。我不明白为什么没有两个 getChar 被评估。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-13T00:41:41.947

您必须实际执行您的一元操作，然后返回其执行结果。

```
func = do
    a <- getChar
    b <- getChar
    return  (a,b) 
```

你目前正在做的就像 C 语句：

```
void main(char &a, char &b)
{
    a = getchar;
    b = getchar;
} 
```

与您真正想要的相反：

```
void main(char &a, char &b)
{
    a = getchar();
    b = getchar();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T08:22:34.817

> “我想知道为什么两个 getChar 都没有被评估”

首先，用英语，如逻辑或数学或haskell，（不是（不是p））== p，因此你的问题是：

> 我想知道为什么这两个 getChars 都被评估。

令人困惑，因为我敢打赌它们都没有被评估。

您的 main 函数计算 IO a 的值，然后将评估 IO 中类型为 a 的值。在您的情况下， a 是（IO Char，IO Char）。因为 Haskell 是一种非严格语言，所以评估一个元组就意味着构造元组。这不包括对元组组件的评估。例如：

```
fst (42, 7 `quot` 0 :: Int) 
```

不会因除以零错误而中止。因此我们有：

```
(getChar, getChar) 
```

是具有 2 个未评估值的元组。但是即使对这些值进行了评估，我们也有 2 个 IO Char 类型的值。这样的值可以看作是在 IO monad 中执行时返回一个 Char 的操作。

因此，不仅您的元组组件没有被评估，它们也没有在 IO monad 中执行。

为此，您可以将具有两个操作的元组传递给另一个操作：

```
executeBoth (a,b) = do
    ra <- a
    rb <- b
    return (ra, rb) 
```

现在，去检查 executeBoth 的类型，你可能会明白这一点。

# iphone - 删除带有动画的 MKPinAnnotationView

> ID：10568472
> 
> 赞同：1
> 
> 时间：2012-05-13T00:29:09.910
> 
> 标签：iphone

我很困惑这是如何工作的。我正在创建一个 CLGeocoder 以根据字符串值删除引脚。我有这个：

```
- (void)placeMarkFromString:(NSString *)address {
    CLGeocoder *geocoder = [[CLGeocoder alloc] init];
    [geocoder geocodeAddressString:address completionHandler:^(NSArray *placemarks, NSError *error) {
        [placemarks enumerateObjectsUsingBlock:^(id obj, NSUInteger idx, BOOL *stop) {
            NSLog(@"%@", [obj description]);
        }];

        // Check for returned placemarks
        if (placemarks && [placemarks count] > 0) {
            CLPlacemark *topResult = [placemarks objectAtIndex:0];

            // Create an MKPlacemark and add it to the mapView
            MKPlacemark *place = [[MKPlacemark alloc] initWithPlacemark:topResult];
            AddressAnnotation *anAddress = [[AddressAnnotation alloc] init];
            anAddress.address = place.subThoroughfare;
            anAddress.street = place.thoroughfare;
            anAddress.city = place.locality;
            anAddress.state = place.administrativeArea;
            anAddress.zip = place.postalCode;
            anAddress.name = place.name;

            //[self.mapView addAnnotation:place];
            [self.mapView addAnnotation:anAddress];
            self.currentPlacemark = place;

            // Center map on that region
            MKCoordinateRegion region = MKCoordinateRegionMakeWithDistance(topResult.location.coordinate, 2000, 2000);
            MKCoordinateRegion adjustedRegion = [_mapView regionThatFits:region];
            [_mapView setRegion:adjustedRegion animated:YES];
        }
        else {
            UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"No Results Found" message:@"" delegate:nil cancelButtonTitle:@"Ok" otherButtonTitles: nil];
            [alert show];
        }
        if (error) {
            NSLog(@"Error: %@", [error localizedDescription]);
        }
    }];
} 
```

所以最初，我将我的 MKPlacemark 添加到地图上，它显示了红色图钉。但是它没有动画。我基本上希望能够删除 3 种 MKPinAnnotationView 颜色中的任何一种，具有标注和标题/副标题作为地点的名称和地址，类似于谷歌地图的方式。但我没有得到任何动画。

所以我想也许我需要创建自己的符合 MKAnnotation 类的对象。所以我这样做了，但是当我尝试将它添加到该位置时，我在 viewForAnnotation 委托方法中看不到它的 annotationView。该方法在这里：

```
- (MKAnnotationView *)mapView:(MKMapView *)theMapView viewForAnnotation:(id<MKAnnotation>)annotation {
    static NSString *placeMarkIdentifier = @"SimplePinIdentifier";
    if ([annotation isKindOfClass:[AddressAnnotation class]]) {
        MKPinAnnotationView *annotationView = (MKPinAnnotationView *)[theMapView dequeueReusableAnnotationViewWithIdentifier:placeMarkIdentifier];
        if (annotationView == nil) {
            annotationView = [[MKPinAnnotationView alloc] initWithAnnotation:annotation reuseIdentifier:placeMarkIdentifier];
        }
        else {
            annotationView.annotation = annotation;
        }
        annotationView.enabled = YES;
        annotationView.animatesDrop = YES;
        annotationView.draggable = YES;
        annotationView.pinColor = MKPinAnnotationColorPurple;
        annotationView.canShowCallout = YES;

        // Create a button for the annotation
//        UIButton *rightArrowButton = [UIButton buttonWithType:UIButtonTypeDetailDisclosure];
//        annotationView.rightCalloutAccessoryView = rightArrowButton;
//        [self performSelector:@selector(openCallout:) withObject:annotation afterDelay:0.5];
        return annotationView;
    }
    return nil;

} 
```

所以我想我的问题是，我是否需要创建自己的对象来执行此操作，我是否走在正确的轨道上，我做错了什么，为什么在一种情况下，我要添加一个 MKPlacemark 对象，然后如果我以其他方式做，我添加一个对象，但不一定是 MKPlacemark 的子类。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T14:09:56.633

`AddressAnnotation`首先，当您使用自定义注释对象（即。 ）时，您可能看不到注释视图的原因是它`coordinate`没有被设置（因此它出现在 0,0）。

在该`placeMarkFromString`方法中，代码设置了很多属性，`AddressAnnotation`但没有设置`coordinate`，因此注释没有出现在预期的位置。

如果您设置`coordinate`，它将出现在预期的位置并带有动画。

关于另一个关于为什么在使用时看不到动画的问题`MKPlacemark`：

默认情况下，地图视图将创建一个`MKPinAnnotationView`带有红色大头针但`animatesDrop`设置为 的`NO`。

所以在，你必须像你一样`viewForAnnotation`明确地这样做。`MKPlacemark``AddressAnnotation`

如果您的所有注释都将使用`MKPinAnnotationView`，而不是检查您将创建的每个不同的注释类，您可以通过`nil`在注释类是时在方法顶部返回来翻转条件`MKUserLocation`，然后运行其余代码而不任何类检查（即在所有其他情况下返回`MKPinAnnotationView`设置`animatesDrop`为）。`YES`

# bash - 将 bash 输出重定向到动态文件名

> ID：10568473
> 
> 赞同：13
> 
> 时间：2012-05-13T00:29:21.797
> 
> 标签：bash, dynamic, filenames

我正在编写一个 bash 脚本，它将（希望）重定向到一个名称是动态生成的文件，该文件基于给脚本的第一个参数，附加到一些字符串。脚本的名称是 ./buildcsvs。

这是代码现在的样子，没有动态文件名

```
#!/bin/bash
mdb-export 2011ROXBURY.mdb TEAM > team.csv 
```

这就是我希望它出来的方式

```
./buildcsvs roxbury 
```

应该输出

```
roxburyteam.csv 
```

将“$1”作为脚本的第一个参数，其中文件名由类似的东西定义

```
"%steam" % $1 
```

你有什么想法？谢谢

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-05-13T00:33:39.667

只需将 $1 与“team.csv”连接起来。

```
#!/bin/bash
mdb-export 2011ROXBURY.mdb TEAM > "${1}team.csv" 
```

如果他们没有将参数传递给脚本，它将写入“team.csv”

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-13T00:36:51.137

`$1`您可以通过或类似的方式将位置参数引用到 shell 脚本。我编写了以下小测试脚本来演示它是如何完成的：

```
$ cat buildcsv 
#!/bin/bash
echo foo > $1.csv
$ ./buildcsv roxbury
$ ./buildcsv sarnold
$ ls -l roxbury.csv sarnold.csv 
-rw-rw-r-- 1 sarnold sarnold 4 May 12 17:32 roxbury.csv
-rw-rw-r-- 1 sarnold sarnold 4 May 12 17:32 sarnold.csv 
```

尝试替换`team.csv`为`$1.csv`.

请注意，不带参数运行脚本将生成一个*名为*`.csv`. 如果你想处理这个问题，你必须使用`$#`. 我也一起破解了：

```
$ cat buildcsv 
#!/bin/bash
(( $# != 1 )) && echo Need an argument && exit 1
echo foo > $1.csv 
```

# jquery - 在 Rails 表单上的 Jquery Raty 星级评分

> ID：10568475
> 
> 赞同：1
> 
> 时间：2012-05-13T00:30:05.317
> 
> 标签：jquery, ruby-on-rails

当用户单击以进行 5 星评级时，DOM 中的 jquery 会生成以下行：

```
<input type="hidden" name="review[answer01]" id="review_answer01" value="5"> 
```

不知何故，我的控制器没有为 params[:review][:answer01] 获取这个值

在我看来，当我单击提交按钮时，根本没有发送隐藏值。表单是否不知道隐藏字段，因为它在开始时不存在？我该如何解决。

使用简单的单选按钮选择一切正常。

顺便说一句，我手动将同一行代码添加到我的表单中并且它有效。我放

```
<%= f.hidden_field :answer01, :value => 5 %> 
```

这产生了html：

```
<input id="review_answer01" name="review[answer01]" type="hidden" value="5"> 
```

我只是不明白...

编辑：

这里是js源这里是js：[https ://github.com/wbotelhos/raty/blob/master/js/jquery.raty.js](https://github.com/wbotelhos/raty/blob/master/js/jquery.raty.js)

输入标签由第 62 行生成，我对其稍作修改以提供 ID（我不确定这是否是问题所在）。

我的第 62 行：`self.score = $('<input />', { type: 'hidden', name: self.opt.scoreName, id: self.opt.scoreId}).appendTo(self);`

我还添加`scoreID : 'blank'`了`$.fn.raty.defaults {}`以提供设置 ID 的选项。

现在，在我看来，我有：

```
<table class='table'>
  <tbody>

  <%= simple_form_for @review, :html => { :multipart => true } do |f| %>

    <td style='width:115px; padding-top:10px;'><div id="s1"></td>
    <td><h3 style = 'padding-bottom:3px;'><%= @questions[0] %></h3></td>

    [...] (repeated for other questions)

  </tbody>
</table>

  <div style='margin-left:80px; margin-top:20px; margin-bottom:200px;' id='subbut'>
    <%= f.button :submit, "Submit Review", :class=>'btn btn-large' %>
  </div>
  <% end %>

<script>
$('#s1').raty({
    scoreName : 'review[answer01]',
    scoreId : 'review_answer01'
});
</script> 
```

我在选择 5/5 星的 firebug DOM 分析中看到的内容：

```
<td style="width:115px; padding-top:10px;">
<div id="s1" style="cursor: pointer; width: 100px; ">
  <img src="/assets/star-on.png" alt="1" title="bad">&nbsp;
  <img src="/assets/star-on.png" alt="2" title="poor">&nbsp;
  <img src="/assets/star-on.png" alt="3" title="regular">&nbsp;
  <img src="/assets/star-on.png" alt="4" title="good">&nbsp;
  <img src="/assets/star-on.png" alt="5" title="gorgeous">
  <input type="hidden" name="review[answer01]" id="review_answer01" value="5">
</div>
</td> 
```

表格标签：

```
<form accept-charset="UTF-8" action="/reviews" class="simple_form new_review" enctype="multipart/form-data" id="new_review" method="post" novalidate="novalidate"></form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T02:06:03.373

您的 HTML 结构不正确...看：

```
<table class='table'>
  <tbody>

  <%= simple_form_for @review, :html => { :multipart => true } do |f| %>

    <td style='width:115px; padding-top:10px;'><div id="s1"></td>
    <td><h3 style = 'padding-bottom:3px;'><%= @questions[0] %></h3></td>

    [...] (repeated for other questions)

  </tbody>
</table>

  <div style='margin-left:80px; margin-top:20px; margin-bottom:200px;' id='subbut'>
    <%= f.button :submit, "Submit Review", :class=>'btn btn-large' %>
  </div>
  <% end %> 
```

从`form`表内开始，但在表外结束。这将导致 HTML 被解析为不包括所有`input`s 和一些一般的怪异，因为浏览器无法弄清楚您的意思。

顺便说一句，使用 HAML 会规避这类问题，但对每个人来说都是他自己的 :)

# asp.net-mvc-3 - MVC3 剃须刀的水印使用 Display(Prompt=

> ID：10568476
> 
> 赞同：1
> 
> 时间：2012-05-13T00:30:12.820
> 
> 标签：asp.net-mvc-3, c#-4.0

我正在尝试为我的 Html.Editorfor 显示水印，

这是我的视图模型

```
[Display(Prompt="This is a WaterMark")]
[DisplayFormat(DataFormatString = "{0:MM/dd/yyy}", ApplyFormatInEditMode = true)]
public DateTime Dob { get; set; } 
```

这是我的看法

```
@Html.EditorFor(model => model.Dob) 
```

这是我的 EditorTemplate String.cshtml，位于 \Views\Shared\EditorTemplates\String.cshtml

```
@Html.TextBox("",ViewData.TemplateInfo.FormattedModelValue, new { @class="text-box single-line", placeholder = ViewData.ModelMetadata.Watermark }) 
```

[我按照这个线程](https://stackoverflow.com/questions/6960673/displayprompt-mvc3)尝试了这个 。但是我的水印从未出现过，但为什么呢？

感谢您帮助解决此问题

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-13T08:24:15.740

此代码成功呈现`placeholder`相应`<input>`标记中的属性。这是一个 HTML5 属性，您使用的浏览器[必须支持](http://caniuse.com/forms)它才能使某些事情发生。例如，如果您使用的是 Internet Explorer，则只有在其未来的 10.0 版本中才会添加对此属性的支持。

有一些客户端脚本解决方案，例如[jquery watermark 插件](http://code.google.com/p/jquery-watermark/)，您可以使用它来为尚不支持它的浏览器附加所需的行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T23:08:07.197

使用 Display 进行水印（提示对我来说从来没有用过。但是使用此 jquery，您可以在文本框上显示水印。这里我使用图像代替水印。您需要创建水印文本的图像。

```
 $(document).ready(function () {

            /*Watermark for date fields*/

             if ($("#dob").val() == "") {
                $("#dob").css("background", "#ebebeb url('/Content/images/DateWaterMark.png') no-repeat 1px 0px");
            }

            $("#dob").focus(function () {
                if (watermark == 'MM/DD/YYYY') {
                    $("#dob").css("background-image", "none");
                    $("#dob").css("background-color", "#fff");
                }
            }).blur(function () {
                if (this.value == "") {
                    $("#dob").css("background", "#ebebeb url('/Content/images/DateWaterMark.png') no-repeat 1px 0px");
                }
            });

            $("#dob").change(function () {
                if (this.value.length > 0) {
                    $("#dob").css("background", "#fff");
                }
            });
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T19:29:47.123

具体回答您的问题：为什么您关注的帖子中的解决方案对您不起作用：您链接到的解决方案不起作用的原因是因为您使用 IE。在 Chrome 中尝试相同的代码 - 它会正确显示提示。我希望IE10能赶上。

# php - 使用 PHP 的 SQL 语法和列

> ID：10568478
> 
> 赞同：0
> 
> 时间：2012-05-13T00:30:32.013
> 
> 标签：php, sql, database, facebook, syntax

（这是通过 PHP 调用的）我有以下内容：

```
"SELECT name FROM user WHERE uid IN (SELECT uid1 FROM friend WHERE uid2={$user})" 
```

SQL 执行得非常好，但是，结果是一个数组，其中键是“名称”。我希望每个结果的键都是被搜索以提取该名称的相应`uid`键`user`。

**例子：**

*现在怎么样了*

如果`name`是“Bob”而他`uid`是“12345”，我希望返回数组是 - `[name] => Bob`。

*我希望它是怎样的*

如果`name`是“Bob”而他`uid`是“12345”，我希望返回数组是 - `[12345] => Bob`。

编辑（根据评论请求）：

```
$fql = "SELECT pic FROM user WHERE uid IN (SELECT uid1 FROM friend WHERE uid2={$user})";
        $param = array(
            'method' => 'fql.query',
            'query' => $fql,
            'callback' => ''
        );
$result = $facebook->api($param); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T00:43:21.827

```
$newResult = array();
foreach ($result as $entry)
{
    $newResult[$entry['uid']] = $entry['name'];
} 
```

# extjs - 应用程序初始化方法（如文档中所述）

> ID：10568480
> 
> 赞同：1
> 
> 时间：2012-05-13T00:32:05.283
> 
> 标签：extjs, extjs-mvc, extjs4.1

我正在使用 ExtJS 4.1 RC3 - 遵循 MVC 模式。今天是我第一次需要在任何控制器初始化之前实现一些逻辑。我从 Ext.app.Application 中记住[**了这个**](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.app.Application-method-init)方法，并决定使用它。

它似乎永远不会被解雇，我也找不到应该解雇它的东西。

从 2011 年 9 月起，我发现了一个关于此方法不起作用的[未回答的小线程。发帖人的解决方案是重构他的应用程序。](http://www.sencha.com/forum/showthread.php?147817-ExtJS-MVC-init-and-launch)这对其他人有用还是没有其他人使用它？

我以与使用启动方法相同的方式进行编码。那是错的吗？代码如下所示：

```
// app.js
Ext.application({
    name: 'MyApp',

    autoCreateViewport: true,

    controllers: ['myController'],

    init: function() {
        console.log('init'); // this never gets called
    },

    launch: function() {
        console.log('launch'); // this works fine
    }

}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-13T01:53:51.807

这是框架中的一个错误。我已经提出了一个修复程序，希望能将其纳入 4.1.1 版本。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-07T17:09:13.033

我正在使用 ExtJs 4.0.7 并且 init 方法不会触发（错误）无论好坏，我的解决方法是自己调用它。

```
launch: function() {
    this.init();
    console.log('launch'); // this works fine
} 
```

现在上面的init方法可以访问了：

```
 init: function() {

    console.log('init'); // this gets called
    // For example here's a quick way to stop an Ext Task... 
    this.on({

      stopEvents: function() {
       Ext.TaskManager.stopAll();
      }

    })
  }
}, 
```

# wordpress - 页脚后面的wordpress主题图片

> ID：10568482
> 
> 赞同：0
> 
> 时间：2012-05-13T00:32:30.593
> 
> 标签：wordpress, wordpress-theming

我已经构建了我的 wordpress 主题，但是有一个问题，我想在页脚后面放一张图片，但不是其中的一部分。在我的网站中，我的页脚图像水平重复，后面的图像是指南针。我的问题是当我将图像放入其中时，它就像页脚的一部分而不是背景（它不是我的背景图像就在它上面）。这是我博客的链接（代码太长，无法在此处发布）：

[http://blog.zombiesarefierce.com/](http://blog.zombiesarefierce.com/)

这也是我的页脚应该是什么样子的图片（我正在谈论的图像是指南针），任何帮助将不胜感激：

[http://www.freeimagehosting.net/jq19y](http://www.freeimagehosting.net/jq19y)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T05:05:40.970

只需将您的指南针图像放在一个新的分区中，然后将 z-index 应用于该点的所有元素。Z-index 指定元素的堆栈顺序。

具有较大堆栈顺序的元素始终位于具有较低堆栈顺序的元素之前。（允许负数）

[检查此链接以了解有关 z-index 的更多信息](http://www.w3schools.com/cssref/pr_pos_z-index.asp)。

# sql - 转换为日期数据类型

> ID：10568484
> 
> 赞同：2
> 
> 时间：2012-05-13T00:32:53.490
> 
> 标签：sql, database, postgresql

我有一个名为 thedate 的列，它是 varchar。行的一个例子是：

2月29日

我想将此值转换为日期，因为我想将它与今天进行比较。我试过 to_date 但我得到了一个奇怪的值：

0001-01-29 BC

我希望它是 2012-02-29。知道为什么它不起作用吗？我认为它会自动为我输入当前年份，并且由于某种原因该月份落后了。它还列出了不需要的 BC。

```
select to_date(thedate, 'YYYY-MM-DD') from market; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-13T00:38:26.717

如果字段中的数据确实是“2 月 29 日”，那么您将不得不自己填写年份。这就是为什么它给你 1 BC。试试这个或用一个函数替换 '2012' 来获取当前年份。

从市场中选择 to_date('2012 '||thedate, 'YYYY MON DD')；

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-13T00:59:11.760

试试这个：

```
select ('feb 29 ' || extract(year from CURRENT_DATE)) ::date 
```

# functional-programming - 了解多提示分隔延续的 API

> ID：10568493
> 
> 赞同：5
> 
> 时间：2012-05-13T00:35:23.940
> 
> 标签：functional-programming, ocaml, delimited-continuations

用于多提示分隔延续的 API[在 OCaml 中的分隔控制，抽象和具体系统描述一文中进行了描述](http://okmij.org/ftp/continuations/caml-shift.pdf)。

我的问题涉及`push_subcont : ('a,'b) subcont -> (unit -> 'a) -> 'b`. 为什么不是这种类型`('a,'b) subcont -> 'a -> 'b`？此外，为什么子控件有单独的类型：为什么不简单`('a,'b) subcont = 'a -> 'b`？我几乎可以肯定这是有充分理由的，因为 Oleg 使事情尽可能优雅（但不是更优雅）。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-13T09:47:41.983

### 为什么不`('a,'b) subcont -> 'a -> 'b`呢？

我认为这与 for 的原因相同`push_prompt`——这更容易理解。`push_prompt p (fun () -> e)`直观上是一种形式`try e with p`：提示`p`作为处理程序放在堆栈上，并`e`在此处理程序下运行。如果您`push_prompt p e`改为使用，则严格的语言将首先评估参数，`p`然后在设置提示之前运行并“引发异常”。`e``e`

`push_subcont sk (fun () -> e)`可能有同样的问题：直观地说，它是一种“重新启动`sk`被异常中断的计算”。重要的`e`是在计算的上下文内部而不是外部运行，例如，如果它希望引发与`sk`.

### 为什么不简单`('a,'b) subcont = 'a -> 'b`呢？

如果只有一种方法可以重新启动子延续，则可以做到这一点：它们可以以“预重新启动”的形式返回，在应用时，以给定参数重新启动的函数形式。

但事实并非如此：文章末尾描述的`push_subcont`and具有不同的语义。`push_delim_subcont`“调用者”应该选择使用哪种重启技术。它们都需要访问子连续的内部数据，因此它们无法对子连续作为函数表示进行操作。

# curl - “curl --retry-max-time”如何 “ 工作？

> ID：10568497
> 
> 赞同：36
> 
> 时间：2012-05-13T00:36:18.523
> 
> 标签：curl

不知道怎么`--retry-max-time`计算的。如果我下载文件`file.txt`：

```
curl --max-time 10 --retry 3 --retry-delay 5 --retry-max-time 32 'http://www.site.com/download/file.txt' 
```

* * *

*   `[ 0- 2]`它需要`2s`下载`50%`文件，并且不再有速度。
*   `[ 2-10]`它等待另一个`8s`，仍然没有速度，超时，将重试
*   `[10-15]`在重试之前等待`5s`#1
*   `[15-25]`仍然没有速度，将重试
*   `[25-30]`在重试之前等待`5s`#2
*   `[30-34]`它需要`4s`下载`33%`文件，并且不再有速度。
*   `[34-40]`它等待另一个`6s`，仍然没有速度，超时

此时会`curl`停止重试（`40s`）吗？

什么时候`retry timer`开始和停止？

* * *

```
 --retry-max-time <seconds>
          The  retry  timer  is reset before the first transfer attempt. Retries will be done as usual (see --retry) as
          long as the timer hasn't reached this given limit. Notice that if the timer hasn't  reached  the  limit,  the
          request  will be made and while performing, it may take longer than this given time period. To limit a single
          request´s maximum time, use -m, --max-time.  Set this option to  zero  to  not  timeout  retries.  (Added  in
          7.12.3) 
```

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2012-11-25T19:09:41.460

```
curl --connect-timeout 5 \
     --max-time 10 \
     --retry 5 \
     --retry-delay 0 \
     --retry-max-time 60 \
     'http://www.site.com/download/file.txt' 
```

* * *

```
|<---0---->| {<---1---->|  |<---2---->|    |<---3---->|   |<---4---->|   }            |<---5---->|
|....==    | {...==     |  |....==    |    |.....|        |..=== =   |   }
             {                                                           } 
```

### 符号

```
=====  downloading...       (file size is 5)
.....  --connect-timeout 5
|<->|  --max-time 10
<-5->  --retry 5
>| |<  --retry-delay 0      ([default] exp backoff algo)
{   }  --retry-max-time 60  (GAME OVER) 
```

### 笔记

*   重试延迟 1、2、4、8 ...
*   重试 #3 连接超时
*   重试 #5 永远不会发生
*   END 下载失败（71 秒）

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-06-13T10:15:46.933

让我试着澄清一下。

当 curl 决定进行重试时（因为`--retry`使用了并且条件允许重试）并且`--retry-max-time`设置了 a ，curl 检查自操作开始以来经过的总时间是否超过了`--retry-max-time`或没有。如果没有，它将允许再次重试。

因此，在上面的命令行中：如果在考虑重试时总时间小于 32 秒，它将再次重试。如果总时间超过 32 秒，它将不再进行重试。

# android - 9 补丁显示线条 - 未被识别

> ID：10568504
> 
> 赞同：0
> 
> 时间：2012-05-13T00:37:57.763
> 
> 标签：android, nine-patch

今天我开始创建和使用 9-Pacth 图像。但我的设备无法识别 9 Pacth 图像。我将其设置为按钮的背景。在这里你可以看到：

![在此处输入图像描述](../Images/95a86b8d552dc412ad12f3e1f5192925.png)

这是我的 9 补丁图像：

![在此处输入图像描述](../Images/76f4d7b75bb9b15c4520a7b4ac60feec.png)

有人可以说我做错了什么吗？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-13T01:00:05.537

交换顶部和底部边框。两个点应该在顶部（妊娠纹），线应该在底部（内容区域）。

# php - 为什么我不能索引mysql返回的数组？

> ID：10568505
> 
> 赞同：3
> 
> 时间：2012-05-13T00:38:03.147
> 
> 标签：php, mysql, sql, arrays, variables

> **可能重复：**
> [php中函数返回的访问数组](https://stackoverflow.com/questions/1459377/access-array-returned-by-a-function-in-php)

编码：

```
$cnt = mysql_fetch_row(mysql_query("SELECT FOUND_ROWS()"))[0] 
```

给出错误：

> 解析错误：语法错误，第 117 行的 index.php 中出现意外的“[”

同样适用于：

```
$cnt = (mysql_fetch_row(mysql_query("SELECT FOUND_ROWS()")))[0] 
```

这段代码：

```
$cnt = mysql_fetch_row(mysql_query("SELECT FOUND_ROWS()"));
$cnt = $cnt[0]; 
```

工作正常。

这里发生了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-13T00:45:01.833

这不仅仅是`mysql_query`--rather 的问题，它是 PHP <5.4 处理括号符号的方式的一种特殊性。以下[也将失败](http://codepad.org/h2CU9dYK)：

```
function get_array() {
  return array('foo', 'bar');
}

echo get_array()[0]; 
```

但是，正如您所观察到的，在尝试检索元素之前设置结果[可以正常工作](http://codepad.org/cL6ZGe95)：

```
$arr = get_array();
echo $arr[0]; 
```

# jquery - 有什么办法可以得到动画的剩余时间？

> ID：10568507
> 
> 赞同：5
> 
> 时间：2012-05-13T00:39:06.247
> 
> 标签：jquery, animation

假设我有一些 div，我用`.animate({opacity:0},400, function(){});`它的孩子。那么是否有可能获得动画完成的剩余时间？例如，剩余 200 毫秒，如果没有动画，则为 0？谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-13T02:06:45.083

为了帮助您更好地理解如何使用该`step`功能 [由*gdoron*发布] ，我使用*step*
功能创建了一个示例 来获取剩余时间：

 *（单击`get state!`按钮停止动画并检索剩余时间！）

**[带距离](http://jsbin.com/akebaz/2/edit)**
**[的演示 带不透明度的演示](http://jsbin.com/akebaz/3/edit)**

距离示例 jQuery：

```
var time = 4000;
var distance = 300;
var currentTime = 0;

$('#ball').animate({
    left: distance
}, {
    duration: time,
    step: function (now, fx) {

        currentTime = Math.round((now * time) / distance);
        var data = fx.prop + ' ' + Math.round(now) + '; <b>' + currentTime + 'ms</b> ';

        $('body').append('<p>' + data + '</p>');
    },
    easing: 'linear'
});

$('#getTime').click(function () {
    $('#ball').stop();
    $('body').prepend('<p>currentTime is:' + currentTime + ' ms; REMAINING: ' + (time - currentTime) + 'ms</p>');
}); 
```

*   您可以看到我如何使用`fx.prop`内部`animation step`来获取`left`当前动画的 ( ) 属性。

*   您可以看到如何：知道动画时间和距离（不透明度，无论如何......），我们可以通过一些简单的数学（`(now*time)/distance`）轻松检索“停止/暂停”状态，这要归功于返回`now`值。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-13T00:43:32.477

我不知道你为什么需要它，但`step`可以帮助你提取这个值：

**阶跃函数**

> .animate() 的第二个版本提供了一个 step 选项——一个在动画的每一步触发的回调函数。此函数对于启用自定义动画类型或更改正在发生的动画很有用。它接受两个参数（now 和 fx），并将其设置为动画的 DOM 元素。
> 
> **now**：每一步动画属性的数值
> **fx**：对 jQuery.fx 原型对象的引用，其中包含许多属性，例如动画元素的 elem，第一个和最后一个值的 start 和 end分别为动画属性和被动画属性的道具。

[**文档**](http://api.jquery.com/animate/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-09T06:40:08.773

听着，别介意`step`每个人都在谈论的功能。我曾经需要你做的事情并写了我自己的，简单地说就是通过查看总动画时间（你应该已经知道，因为你曾经把这个数字给 jQuery）和当前的*商*和目标不透明度。然后将该商乘以总动画时间，从总时间中减去总和。就那么简单。

**伪代码：**

```
func calculate-time-left-in-a-running-fade-in-animation:
{
    var current_opacity = $elem.css('opacity');
    var target_opacity = this.getTargetOpacity();

    var total = this.getTotalAnimationTime();

    var quotient = current_opacity / target_opacity;
    return total - quotient * total;
} 
```*

# c# - MonoDroid：使用 .NET 框架解压缩文件的资产路径

> ID：10568510
> 
> 赞同：1
> 
> 时间：2012-05-13T00:40:22.300
> 
> 标签：c#, android, mono, zip, xamarin.android

我正在使用`SharpZip .NET Zip Library`解压缩在文件夹中找到的`Assets/MyZipFolder`文件。

我需要获取完整路径，以便可以使用以下内容：

```
ZipInputStream s = new ZipInputStream(File.OpenRead(_zipFile)) 
```

如何获取`Assets/MyZipFolder/MyZip.zip`传递给 .NET File.OpenRead 命令的路径？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T05:41:15.427

从您的上下文中，您可以使用以下方法简单地打开读取流：

```
 using (var stream = Context.Assets.Open("MyZipFolder/MyZip.zip"))
 { 
      var s = new ZipInputStream(stream);
      // do read here ...
 } 
```

请注意，该文件被标记为`AndroidAsset`用于构建操作，绝对路径为：“file:///android_asset”并记住 android 中的文件名区分大小写。

# node.js - 如何查找搜索/查找 npm 包

> ID：10568512
> 
> 赞同：98
> 
> 时间：2012-05-13T00:40:51.120
> 
> 标签：node.js, npm

有什么方法可以找到 npm 包？

以下是根据以下答案编制的社区维护列表。

### npm 特定

*   在控制台中，`npm search <keyword>`
*   [https://www.npmjs.org/](https://www.npmjs.org/)
*   [http://node-modules.com/](http://node-modules.com/)通过[https://stackoverflow.com/a/13593402](https://stackoverflow.com/a/13593402)
*   [https://openbase.com/](https://openbase.com/)通过[https://stackoverflow.com/a/66827908/2752520](https://stackoverflow.com/a/66827908/2752520)

### 通用的

*   [https://github.com](https://github.com)
*   [https://libraries.io](https://libraries.io)

### 死的

*   [http://browsenpm.org/](http://browsenpm.org/)通过[https://stackoverflow.com/a/24338500](https://stackoverflow.com/a/24338500)
*   [https://github.com/joyent/node/wiki/modules](https://github.com/joyent/node/wiki/modules)
*   [http://toolbox.no.de/](http://toolbox.no.de/)又名[http://nodetoolbox.com/](http://nodetoolbox.com/)
*   [http://packagefinder1-enome.dotcloud.com/](http://packagefinder1-enome.dotcloud.com/)
*   [http://eirikb.github.com/nipster/](http://eirikb.github.com/nipster/)通过[https://stackoverflow.com/a/10571033](https://stackoverflow.com/a/10571033)
*   [https://nodejsmodules.org/](https://nodejsmodules.org/)通过[https://stackoverflow.com/a/17821476](https://stackoverflow.com/a/17821476)
*   [http://npmsearch.com/](http://npmsearch.com/)通过[https://stackoverflow.com/a/34471018](https://stackoverflow.com/a/34471018)

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-05-13T09:59:53.227

`npm search`效果很好：

`npm search connect`

`npm view`将向您显示每个版本的时间戳以及其他所有内容`package.json`（包括节点版本）

`npm view connect`

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2012-05-13T10:33:29.703

也有[nipster](http://eirikb.github.com/nipster/)，基于 npm + github 评级。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2015-08-26T10:30:44.523

[Libraries.io](https://libraries.io)非常适合通过 NPM 模块进行搜索和过滤，您还可以按许可证和关键字进行过滤：[https ://libraries.io/search?platforms=NPM](https://libraries.io/search?platforms=NPM)

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2021-03-27T04:05:07.833

对我来说，用于此目的的最佳站点是 Openbase：

[https://openbase.com/](https://openbase.com/)

很远。AFAIK 的统计数据和功能是其他任何网站都无法比拟的。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-11-27T21:29:02.707

[npmsearch](https://npmjs.org/package/npmsearch)通过相关性和下载的组合对结果进行排序。命令行版本可以从 npm 安装：

```
[sudo] npm install -g npmsearch 
```

免责声明：我是 npmsearch 的作者

* * *

[node-modules](http://node-modules.com/)允许您根据您在 github 上加星标/关注的模块个性化您的结果

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-11-24T08:51:08.237

这是另一个：[https ://npmaddict.com/](https://npmaddict.com/)

不是搜索，而是每日至少有 5 个 GitHub 星的新包列表

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2015-08-20T07:47:44.100

对于控制台中可用的快速方法，请键入：

`npm search keyword`

*<关键字>*搜索所有包的**标题、描述、作者和关键字**。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2016-09-26T14:36:17.340

[https://npms.io](https://npms.io)非常好，也提供质量和维护统计信息

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2013-07-23T21:33:51.483

[https://nodejsmodules.org/](https://nodejsmodules.org/)是一种可以让您搜索和按人气浏览的网站

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2012-05-13T15:43:30.310

[https://github.com/Enome/node-package-finder](https://github.com/Enome/node-package-finder)（2012 年 5 月 4 日的最新提交 26ff789，应该算作死亡）

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-12-27T21:59:16.250

NPM 可能会让人感到不知所措，因为它是*最大*的包注册表！有时，我们在寻找时需要更少或更多精心策划的建议......

试试[https://pkg.land](https://pkg.land)！它可以帮助您在 npm 上找到类似的包，例如[https://pkg.land/package/moment](https://pkg.land/package/moment)会建议您`dayjs`等`date-fns`。

这是我在假期里尝试过的一个项目，并打算随着时间的推移进行维护和改进。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2021-12-23T15:05:19.997

根据关于如何[执行搜索查询的 NPM](https://api-docs.npms.io/#api-Search) *S* (NPM *Search* ) 文档，您可以在 npmjs.com 搜索栏中使用以下运算符：

| 搜索语法 | 描述 |
| --- | --- |
| `scope:types` | 显示/过滤属于 @types 范围的结果 |
| `author:sindresorhus` | 显示/过滤作者为 sindresorhus 的结果 |
| `maintainer:sindresorhus` | 显示/过滤结果，其中 sindresorhus 作为维护者是合格的 |
| `keywords:gulpplugin` | 显示/过滤关键字中包含 gulpplugin 的结果（用逗号分隔多个关键字，您也可以排除关键字，例如`-framework`） |
| `not:deprecated` | 从结果中排除不推荐使用的包 |
| `not:unstable` | 排除版本 < 1.0.0 的包 |
| `not:insecure` | 排除不安全或具有易受攻击依赖项的软件包（根据 nsp） |
| `is:deprecated` | 不推荐使用显示/过滤器包 |
| `is:unstable` | 显示/过滤版本为 < 1.0.0 的包 |
| `is:insecure` | 显示/过滤不安全或具有易受攻击的依赖项的包（根据 nsp） |
| `boost-exact:false` | 不提升完全匹配，默认为 true |
| `score-effect:14` | 设置包分数对最终搜索分数的影响，默认为15.3 |
| `quality-weight:1` | 设置质量对每个包分数的权重，默认为 1.95 |
| `popularity-weight:1` | 设置每个包分数的流行度权重，默认为 3.3 |
| `maintenance-weight:1` | 设置每个包分数的质量权重，默认为 2.05 |

### 延伸阅读

*   [搜索并选择要下载的包](https://docs.npmjs.com/searching-for-and-choosing-packages-to-download)：
*   [按关键字和作者查找 NPM 包](https://stackoverflow.com/q/52853838/1366033)
*   [npms](https://github.com/npms-io) / [npms 分析器](https://github.com/npms-io/npms-analyzer)

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2015-12-26T11:43:00.093

我个人使用[npmsearch.com](http://npmsearch.com/)

我不确定它在内部是如何工作的，但它通常会给出最好的结果。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2016-03-10T21:27:24.603

万一有人遇到这个问题，我还创建了一个工具来帮助人们发现其他人正在使用的 npm 包：

[http://www.npmdiscover.com](http://www.npmdiscover.com)

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2016-08-31T20:20:31.293

很遗憾，但`npm search`在节点版本 6+ 上对我不起作用。

一个快速的解决方法是从命令行执行 curl：

```
curl --fail -O https://www.npmjs.com/package/q-promise 2>&1 | grep '404' 
```

如果此命令不返回任何内容，则该模块存在，如果它确实返回 404，则该名称可供您使用。

# php - 将 Phonegap 与 Web 应用程序一起使用以获取通知

> ID：10568519
> 
> 赞同：0
> 
> 时间：2012-05-13T00:44:07.593
> 
> 标签：php, android, iphone, cordova

我想为在 PHP 和 MYSQL 上运行的现有网站创建一个移动应用程序。Phonegap 用户，请告知我是否可以通过与我的 Web 应用程序交互来发送移动通知？

下面是一个更好理解的示例：用户创建待办事项列表的 Web 应用程序。用户条目存储在 Web 数据库中。目标是在“待办事项”事件到期时通过网站服务器向他们的手机发送通知。这可以通过Phonegap实现吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T00:52:02.107

是的。是的，它可以。你试过很多吗？

应用程序内部的通知很容易——只需对某种端点进行常规的 getJSON 轮询即可。如果您想使用本机通知，那就更难了。

# android - Android如何读取项目中的资源文件

> ID：10568520
> 
> 赞同：2
> 
> 时间：2012-05-13T00:44:12.483
> 
> 标签：android, filereader

我正在尝试读取下图中的 DictionaryWords 文件

![在此处输入图像描述](../Images/66b7b6d083dd057aac6b7d019a165d11.png)

我如何读入这个文件？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-13T00:45:49.723

您可以将`DictionaryWords`文件移动到您的`assets`文件夹，然后将其包含在您的`.apk`. 然后你可以用类似的东西打开它：

```
context.getAssets().open("DictionaryWords") 
```

# java - 创建事件处理程序时使用“this”关键字

> ID：10568522
> 
> 赞同：1
> 
> 时间：2012-05-13T00:45:16.610
> 
> 标签：java, android

我有以下 Java 代码：

```
public class FirstActivity extends Activity implements OnClickListener
{

    Button btn;
    TextView textview;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        textview = (TextView)findViewById(R.id.textView2);
        btn = (Button)findViewById(R.id.BtnGoToSecondActivity);
        btn.setOnClickListener(this);
    }

    public void onClick(View v)
    {
        Intent secondActivityIntent = new Intent(this, SecondActivity.class);
        secondActivityIntent.putExtra("Name", textview.getText());
        startActivity(secondActivityIntent);
    }
} 
```

在我点击上面示例中的“this”关键字之前，每一段代码都是有意义的。我无法理解在“setOnClickListener()”方法调用中用作参数的“this”关键字。我还没有创建上面任何使用的类的实例。如何引用不存在的实例？实例是自动创建的吗？

（我知道“this”关键字是什么以及它的作用，但在这种情况下我看不到逻辑）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-13T00:47:24.493

您问“实例是自动创建的吗？” 答案是，实际上，是的。你的应用程序*是*这个 Activity 类的一个实例；该实例由框架创建，并由框架用于处理各种事件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-13T00:48:29.580

基本上，这行代码：

```
btn.setOnClickListener(this); 
```

... 说明按钮的事件侦听器与您当前使用的实例相同 - 假设它所属的类 ( `FirstActivity`) 实现了`OnClickListener`接口。

是的，当您调用此方法时*已经*创建了一个实例，否则您根本无法调用该方法！您碰巧将作为参数传递给您在调用该方法时所在`setOnClickListener`的*当前实例。*`onCreate()`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-13T00:50:29.343

如果您正在执行像 onCreate() 这样的非静态方法，那么该对象显然存在。您的 Activity 对象由 Android 调用（这就是您必须将其包含在清单中的原因）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-13T00:47:12.163

你的类是FirstActivity，它实现了OnClickListener接口，在FirstActivity的方法里面，“this”是对运行方法的类FirstActivity实例的引用。（当Android运行activity时，它会创建一个实例这个类的）。

由于 FirstActivity 也是 OnClickListener，因此您将 FirstActivity 类的实例传递给 setOnClickListener 方法。

# asp.net-mvc - Facebook 画布应用对话框重定向

> ID：10568526
> 
> 赞同：-1
> 
> 时间：2012-05-13T00:46:22.143
> 
> 标签：asp.net-mvc, facebook

想要执行服务器端发起的用户对用户请求对话。
在我的 FB 画布应用程序上，我有“邀请我的朋友”按钮。用户按下它后，POST 请求将发送到我的服务器，我使用以下 C# MVC 代码重定向到 FB 请求对话框：

```
return Redirect("http://www.facebook.com/dialog/apprequests?app_id=MY_APP_ID&message=MESSAGE&redirect_uri=MY_APP_CANVAS_URL"); 
```

我在 Facebook 画布上而不是“选择用户”对话框上得到的是带有 FB 徽标的空白页面，href-ed 到目标页面。我如何这个确认消失？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T08:26:05.180

Facebook 通常不允许画布页面的内容成为他们的对话 URL 之一。大多数开发人员解决此问题的方法是将客户端重定向到重定向整个页面的绝对 URL，而不仅仅是画布 iframe 内容。

出于您的目的，您可以通过提供一个最小页面作为对包含以下标记的 POST 请求的响应来实现此目的：

```
<script>
    top.location="<%= (insert apprequest dialog URL here) %>";
</script> 
```

# android - Android - 带有互联网图像的自定义 ListView。无法下载图片

> ID：10568529
> 
> 赞同：0
> 
> 时间：2012-05-13T00:47:57.247
> 
> 标签：android, listview

我正在尝试显示一个`ListView`在每一行中都有缩略图和文本的自定义。

我将文本存储在一个`ArrayList<String>`中`URLs`，每个缩略图存储在另一个中。

我可以让文本出现在列表中，但我只能静态/手动设置图像。

**我的问题：**如何让我`ImageView`下载缩略图并显示它？每个缩略图都是独一无二的。

这是我填充 ListAdapter 的代码：

```
class CustomAdapter extends ArrayAdapter<String> 
{
    CustomAdapter() 
    {
        super(MyClass.this, R.layout.listrows, R.id.txtAddress,propertyAddress);
    }

    public View getView(int position, View convertView, ViewGroup parent)
    {
        View row=super.getView(position, convertView, parent);
        ViewHolder holder=(ViewHolder)row.getTag();

        if (holder==null) 
        {                         
            holder=new ViewHolder(row);
            row.setTag(holder);
        }

        //I tried this,
        holder.icon.setImageURI(Uri.parse(imageList.get(position).toString()));
        //But I get a NullPointer

        return(row);
    }
} 
```

另外，我的`ViewHolder`课很正常：

```
class ViewHolder
{
    ImageView icon=null;
    ViewHolder(View base)   {
        this.icon=(ImageView)base.findViewById(R.drawable.ic_launcher);
    }
} 
```

我将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T00:57:52.247

setImageUri 是设置一个本地位置。不是为了互联网。

尝试使用[ImageDownloader](http://developer.android.com/resources/samples/XmlAdapters/src/com/example/android/xmladapters/ImageDownloader.html)。

# c++ - 转换为 Unicode 时提升属性树问题

> ID：10568531
> 
> 赞同：6
> 
> 时间：2012-05-13T00:48:23.830
> 
> 标签：c++, visual-studio-2010, winapi, boost-propertytree

好的，首先我不是天生的 C++ 开发人员。我已经设法将一些东西放在一起并且效果很好，但我确信在专家的眼中它看起来像垃圾=）

所以我有一个我制作的免费软件应用程序，它使用 Boost 库中的属性树。**我使用使用多字节字符集**设置开发了整个应用程序（在 VS2010 中）。我决定是时候通过并更新应用程序以支持 Unicode，因为有些人具有复杂的字符集，我想更好地支持它们。

我经历了更改所有引用和调用以使用宽字符串的繁琐过程，以及所有必要的转换。然而，我在某一时刻完全被难住了，我只剩下两个编译器错误。

它们都来自**stream_translator.hpp** (/boost/property_tree/)，第 33 和 36 行（如下所述）：

```
template <typename Ch, typename Traits, typename E, typename Enabler = void>
struct customize_stream
{
    static void insert(std::basic_ostream<Ch, Traits>& s, const E& e) {
        s << e; //line 33
    }
    static void extract(std::basic_istream<Ch, Traits>& s, E& e) {
        s >> e; //line 36
        if(!s.eof()) {
            s >> std::ws;
        }
    }
}; 
```

***第 33 行的错误是：***

```
Error   347 error C2679: binary '<<' : no operator found which takes a right-hand operand of type 'const std::wstring' (or there is no acceptable conversion)   {...}\boost_1_49_0\boost\property_tree\stream_translator.hpp    33  1 
```

***..第 36 行的错误是：***

```
Error   233 error C2678: binary '>>' : no operator found which takes a left-hand operand of type 'std::basic_istream<_Elem,_Traits>' (or there is no acceptable conversion) {...}\boost_1_49_0\boost\property_tree\stream_translator.hpp    36  1 
```

从我能够向后走的内容来看，它来自**stream_translator.hpp**最终开始作为获取值的调用 [例如 ptree.get("some.path", "default value here")]

我真的完全不知道如何解决这个问题，并且似乎无法在网上找到*任何东西*来帮助我了解究竟是什么问题。任何提示或信息将不胜感激。

**编辑**

所以我注释掉了与 ptree 相关的所有内容，直到它编译为止，然后开始重新添加它们。事实证明我可以调用 .get 很好，它是 get_child 错误@第 36 行弹出的地方（还没有完成其他项目， wstring 问题在哪里）。

为简化起见，以下是调用的有效顺序，在调用 get_child 之前都可以：

```
boost::property_tree::ptree pt; 
boost::property_tree::read_xml("Config.xml", pt);
int iAppSetting = pt.get("config.settings.AppSetting",1); //<- works fine
ptree ptt;
ptt = pt.get_child("config.Applications"); //<- adding this line causes the line 36 error 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-17T22:03:09.273

猜测您的问题与我遇到的相同... Boost.PropertyTree 有宽字符版本以支持 unicode。

对于像这样设置的 Config.xml：

```
<?xml version="1.0"?>
<Zoo>
    <Monkey>
        <Food>Bananas</Food>
    </Monkey>
</Zoo> 
```

使用与此类似的代码来解析它：

```
// Load up the property tree for wide characters
boost::property_tree::wptree pt;
boost::property_tree::read_xml("Config.xml", pt);

// Iterate
BOOST_FOREACH(wptree::value_type const& v, pt.get_child(L"Zoo"))
{
    if( v.first == L"Monkey" )
    {
        wstring foodType = v.second.get<wstring>(L"Food");
    }
} 
```

# java - 创建用于转换高度的多个 If 语句

> ID：10568533
> 
> 赞同：-1
> 
> 时间：2012-05-13T00:48:35.693
> 
> 标签：java, if-statement

```
 public String convertHeightToFeetInches()
  {
    int leftOver = heightInInches % IN_PER_FOOT;

    if(heightInInches < (IN_PER_FOOT * 2)){
        return "1 foot " + leftOver + " inches";
    }
    else{ return "";
    }

    if(heightInInches < (IN_PER_FOOT * 3) && heightInInches > (heightInInches * 2)){
        return "2 foot " + leftOver + " inches";
    }
    else{
        return "";
} 
```

我想让它返回“1 英尺 4 英寸”或者它们有多高。我得到了第一个 if statment 的工作，但我该怎么做才能继续到 6 英尺。我试着添加另一个，但我很漂亮确定那不是怎么做。我怎么能把这个放在一起？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T00:57:00.980

只计算脚不是更简单吗？

```
public String convertHeightToFeetInches()
{
    int inches = heightInInches % IN_PER_FOOT;
    int foot = heightInInches / IN_PER_FOOT;
    return "" + foot + " foot and " + inches + " inches";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T00:52:21.470

如果英尺在“heightInInches”中，可以使用除法语句得出数字。

你能试试吗？

例如，我确信如果我知道某人身高 50 英寸，我可以快速计算出该人至少有 4 英尺高。

一旦你有了这个工作，我们将在英寸上工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-13T00:57:05.943

你的大部分逻辑都是正确的，但你确实需要一点点推动。考虑 1 到 2 英尺之间的高度。用数学术语来说，我们将其描述为 1 < x <= 2。现在考虑一下这在 Java 中会转化为什么——x 一定是真的呢？提示：这是两个条件。

`else`接下来，如果您只是坐在那里 ，if-else if-else 将不起作用。`else`如果没有其他匹配项将执行（这将经常发生）。`if`在那些`else`s之后放置一个。

# c++ - 打印指向指针的指针

> ID：10568535
> 
> 赞同：4
> 
> 时间：2012-05-13T00:48:51.700
> 
> 标签：c++

这可能很简单，但我很困惑！从指向指针的指针中提取信息时出现分段错误。请参阅 main() 中的 cout 部分。任何帮助将不胜感激。
谢谢..

森

```
#include <stdlib.h>
#include <iostream>

typedef struct{
  int hour;
  int minute;
} Time;

Time* GetNextTime(void)
{
 Time *p_time = new Time;
 return p_time;  
}

void GetTime( Time **sometime )
{
 int length = 10;
 sometime = new Time*[length];
 for(int i=0; i<length; i++)
 {
    sometime[i] = GetNextTime();
    sometime[i]->hour = rand()%24 ;
    sometime[i]->minute = rand()%60;
    std::cout << "Entered times " << sometime[i]->hour << " hour " << sometime[i]->minute << " minutes " << std::endl;
  }
}

int main()
{
  Time** _time;
  GetTime( _time );

 //here is the question
 // I cant print them from original _time
  for( int i=0; i<10; i++)
  std::cout <<  " Print times " << (*_time)[i].hour << " hour " << (*_time)[i].minute << " minutes " << std::endl;

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-13T00:57:38.673

您是`sometime`按值传递，而不是按引用传递，因此它保持未初始化。更改`GetTime`为以下内容：

```
void GetTime( Time ** &sometime ) //& means pass by reference 
```

因为您正在创建一个指针数组，所以您也可以在打印期间使用数组表示法来访问它们。

```
std::cout <<  " Print times " << _time[i]->hour << " hour "
          << _time[i]->minute << " minutes " << std::endl; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-13T00:56:49.517

除非参数被显式标记为使用引用，否则它在 C++ 中按值传递。因此，分配给`sometime`in对in`GetTime()`没有影响。`_time``main()`

我的强烈建议**不是**给我们明确的内存分配，而是使用容器，例如`std::vector<T>`，而不是。但是，您仍然需要通过引用传递容器。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-13T01:01:18.903

在`main`

它应该是

`Time *_time;`

`GetTime(&_time)`

然后`cout`应该用`_time`代替`*_time`

# r - 使用 SAC 的共现矩阵？

> ID：10568540
> 
> 赞同：2
> 
> 时间：2012-05-13T00:49:56.240
> 
> 标签：r, plyr

我有以下数据框'x'

```
id,item,volume
a,c1,2
a,c2,3
a,c3,2
a,c4,1
a,c5,4
b,c6,6
b,c1,2
b,c3,1
b,c2,6
b,c4,4
c,c2,5
c,c8,6
c,c9,2
d,c1,1
e,c3,7
e,c2,3
e,c1,2
e,c9,5
e,c4,1
f,c1,7
f,c3,1 
```

第一列是客户的id，第二列是客户购买的商品的id，第三列是购买的商品数量。我正在尝试创建一个共现矩阵，它是一个有 8 行和 8 列的方阵，8 是不同项目的数量。

```
n = length(unique(x$cid)) 
```

这可以通过 SAC 范式来完成吗？对于每个 id，我需要通过为每个组合添加 +1 来更新上述矩阵。例如，对于具有项目 c1、c2、c3、c4、c6 的用户“b”，矩阵中第 2、3、4 和 6 列的第一行应递增 1，依此类推。我无法将它投入到这个框架中。非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T02:34:12.087

正如@joran 提到的那样，它不清楚你真正想要什么。但如果我理解正确（可能不是），我想提出一条替代路线。我想你想要一个项目矩阵，其中的数字代表项目共享客户的次数？

如果是这样，那么：

```
library(igraph)
library(tnet)
id_item<-cbind(
i=c(1,1,2,2,2,2,2,3,4,5,5,5,6,6,7,8),  #items
p=c(1,2,1,2,3,4,5,2,3,4,5,6,6,7,8,8))  #customers
item_item<-projecting_tm(id_item, method="sum")
item_item <- tnet_igraph(item_item,type="weighted one-mode tnet")
itemmat<-get.adjacency(item_item,attr="weight")
itemmat  #8x8 martrix of items to items

#     [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8]
#[1,]    0    2    1    0    0    0    0    0
#[2,]    2    0    1    1    2    0    0    0
#[3,]    1    1    0    0    0    0    0    0
#[4,]    0    1    0    0    0    0    0    0
#[5,]    0    2    0    0    0    1    0    0
#[6,]    0    0    0    0    1    0    0    0
#[7,]    0    0    0    0    0    0    0    1
#[8,]    0    0    0    0    0    0    1    0 
```

如果您还需要考虑购买商品的次数（数量），那么这很容易添加到此代码中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-13T02:40:25.067

rehsape2 提供“acast”，这可能是您想要的：

```
> acast(x, id~item,value.var='volume')
  c1 c2 c3 c4 c5 c6 c8 c9
a  2  3  2  1  4 NA NA NA
b  2  6  1  4 NA  6 NA NA
c NA  5 NA NA NA NA  6  2
d  1 NA NA NA NA NA NA NA
e  2  3  7  1 NA NA NA  5
f  7 NA  1 NA NA NA NA NA 
```

reshape2::dcast 生成一个数据帧，如果这样更方便的话。

# oracle - 处理多个插入的触发器

> ID：10568541
> 
> 赞同：0
> 
> 时间：2012-05-13T00:49:59.750
> 
> 标签：oracle, oracleforms

我的表单中有一个按钮，可以将输入提交到许多不同的表中。我创建了 WHEN-BUTTON_PRESSED 触发器：

```
BEGIN
            INSERT INTO table_a 
        VALUES (
    :new.emp_ID,
    :new.surname,
    :new.name,
    :new.hired_date,
    :new.salary);
      commit;
       INSERT INTO table_b
       VALUES (
     :new.emp_ID,
     :new.svr,
     :new.svr_id,
     :new.trg);  
    commit;
end; 
```

我不能使用**INSERT ALL**，因为它是 Oracle 6i。执行上述语句形式后冻结并停止响应。我相信这是由于数据的引用完整性，因为这些表具有相同的主键。非常感谢任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T18:05:11.567

由于多次提交，屏幕正在冻结，在最后一次插入或按下按钮时的代码结束后使用下面的代码，无论您想提交什么

```
POST;
commit; 
```

# haskell - 将一个元素附加到 aa 列表中每个子列表的开头

> ID：10568546
> 
> 赞同：2
> 
> 时间：2012-05-13T00:51:20.950
> 
> 标签：haskell

```
concatr ::Integer -> [[Integer]] -> [[Integer]]
concatr x (y)    = [x] : y
concatr x (y:ys) = concatr x y:  concatr x ys 
```

我已经尝试了很多这样的组合，以至于我的头开始受伤。我到底做错了什么？我只想在传入的列表的每个子列表中放入一个整数。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-13T00:58:24.513

您可以使用该`map`功能。

```
concatr :: Integer -> [[Integer]] -> [[Integer]]
concatr x ys = map (x:) ys 
```

Eta reduce 的简洁解决方案：

```
concatr x = map (x:) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T15:55:23.943

如果你想避免`map`：

```
concatr :: Integer -> [[Integer]] -> [[Integer]]
concatr x []     = []
concatr x (y:ys) = (x:y):concatr x ys 
```

两种情况：

*   如果列表为空，我们返回一个空列表。
*   如果列表是`y:ys`，则新的头是`x:y`，我们递归调用`concatr`剩余部分。

示例：`concatr 1 [[0],[2]]`是`[[1,0],[1,2]`.

# mysql - 如何将这 2 个 MySQL SELECT 语句组合在一起？

> ID：10568547
> 
> 赞同：1
> 
> 时间：2012-05-13T00:51:32.810
> 
> 标签：mysql, sql

在我的`users`桌子上有一个名为`featured`. 如果它的值为 1，则该用户被推荐，如果为 0，则不推荐。

在我的主页上，我想显示我网站上的所有用户。但我希望特色的在非特色之前显示。

## 声明 1：

```
SELECT *
FROM `users`
JOIN `profiles` ON users.user_id = profiles.user_id
JOIN `geo` ON users.zip = geo.zip_code
JOIN `user_activity` ON users.user_id = user_activity.user_id
WHERE users.featured = '1'
ORDER BY users.user_id DESC
LIMIT ". ($page_num - 1) * $per_page .", ". $per_page; 
```

## 声明 2：

```
SELECT *
FROM `users`
JOIN `profiles` ON users.user_id = profiles.user_id
JOIN `geo` ON users.zip = geo.zip_code
JOIN `user_activity` ON users.user_id = user_activity.user_id
WHERE users.featured != '1'
ORDER BY users.user_id DESC
LIMIT ". ($page_num - 1) * $per_page .", ". $per_page; 
```

除了 where 子句之外，这两个语句都是相同的。如何将这两个合并在一起，以便首先显示特色用户，然后显示非特色用户。

## 编辑

我应该提到，我希望结果集作为一个集合返回。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-13T00:54:32.993

```
SELECT *
FROM `users` u
JOIN `profiles` p ON u.user_id = p.user_id
JOIN `geo` g ON u.zip = g.zip_code
JOIN `user_activity` ua ON u.user_id = ua.user_id
ORDER BY u.featured DESC,
    u.user_id DESC
LIMIT ". ($page_num - 1) * $per_page .", ". $per_page; 
```

# css - CSS 对齐子菜单中心 Wordpress

> ID：10568553
> 
> 赞同：0
> 
> 时间：2012-05-13T00:52:55.273
> 
> 标签：css, wordpress, menu

所以基本上我需要在 Wordpress 中生成这样的菜单：

![需要的菜单：](../Images/23f8689a4946eea593761fbe93656ad0.png)

红色条是页面的宽度并且不固定，因此可以通过调整大小缩小。子菜单居中

我目前有：

![当前的](../Images/e343fa11932c8ac19869715ab23b057c.png)

CSS是：

```
#access {
    clear: both;
    display: block;
    margin: 0 auto -10px;
    width: 100%;
    text-align:center;
}
#access ul {
    font-size: 13px;
    list-style: none;
    margin: 0 0 0 -0.8125em;
    margin-top: 0.3em;
    padding-left: 0;
    display:inline-block;
    /*Font*/
    letter-spacing:1px;
    text-transform:uppercase;
    color: #FFF;
}
#access li {
    float: left;
    position: relative;
}
#access a {
    color: #eee;
    display: block;
    line-height: 2.333em;
    margin: 0 1.2125em;
    margin-bottom: 0.5em;
    padding-top: 0.5em;
    text-decoration: none;
    /* Same colour as background */
    border-bottom: 1px solid #000;
}
#access ul ul {
    display: none;
    position: inherit;
    top: 0; left: 0;
    margin: 0 auto;
    width: 100%;
    z-index: 9999;
    float: left;
}

#access ul ul a {
    color: #444;
    font-size: 13px;
    font-weight: normal;
    height: auto;
    line-height: 1.4em;
    padding: 10px 10px;
    display: inline-block;
}
#access ul ul li {
    display: inline-block;
} 
```

任何帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T06:20:55.177

[**检查为您创建的这个 jsfiddle**](http://jsfiddle.net/libinvbabu/benam/1/)

我在菜单代码之后定义了一个新的部门`sub-menu-bg`，并为其赋予了红色背景。我还编辑了您的 CSS 以实现正确的水平下拉菜单。

希望这能解决您的问题。

# string - 你如何在visual basic中显示一个字母一个字母的书写？

> ID：10568554
> 
> 赞同：0
> 
> 时间：2012-05-13T00:53:36.083
> 
> 标签：string, visual-studio, visual-studio-2010, file-io

如果你玩过游戏，你可能会明白我的意思。单词是如何逐个字母拼写出来的，而不是像口袋妖怪或其他游戏一样显示整个文本。

这就是我到目前为止所拥有的：

```
Dim strTitle As String = " "
    If IO.File.Exists("npcCraig.txt") = False Then
        outfile = IO.File.CreateText("save.txt")
    End If

    infile = IO.File.OpenText("npcCraig.txt")
    Do Until infile.Peek = -1
        strTitle = infile.Read 'reads character or should at least
        lblTitle.Text = lblTitle.Text + strTitle
        System.Threading.Thread.Sleep(1000)
    Loop
    infile.Close()
    outfile.Close() 
```

它运行，但由于“System.Threading.Thread.Sleep(1000)”，form1 根本没有出现。我尝试使用它作为延迟它的一种方式，但这显然不起作用。

如果可以的话，您还可以告诉我如何在其中插入中断或其他内容，以便当用户按下某个键时，文本会完全加载并且玩家可以继续前进。我对此感到迷茫。

任何帮助都将是一个惊人的！我的教科书和互联网的其余部分都没有帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-03-17T05:39:39.443

我最好的镜头是这样的：

```
Public Class Form1
    Dim M As Integer = 1
    Private Sub Timer1_Tick(sender As Object, e As EventArgs) Handles Timer1.Tick
        Dim T As String = "" + TextBox1.Text
        Label1.Text = Label1.Text + Mid(T, M, 1)
        M = M + 1
    End Sub
    'You can use any trigger here
    Private Sub Button1_Click(sender As Object, e As EventArgs) Handles Button1.Click
        Timer1.Enabled = True
    End Sub
End Class 
```

# wordpress - 重写问题

> ID：10568557
> 
> 赞同：-4
> 
> 时间：2012-05-13T00:53:47.183
> 
> 标签：wordpress, .htaccess, rewrite, oscommerce

在我的网站上，我有这样的链接：

```
www.mysite.com/loja/product_info/products_id/1301 
```

我只是想在服务器内部将其重写为：

```
www.mysite.com/loja?slug=product_info.php&products_id=1301 
```

任何帮助将不胜感激

我的 .htaccess ：

```
<IfModule mod_rewrite.c>
#Options +FollowSymLinks
RewriteEngine On
RewriteRule ^loja/product_info/products_id/([0-9]+)$ http://www.mysite.com/loja?slug=product_info.php&products_id=$1 [NC,L]
RewriteBase /
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
#RewriteRule ^loja?slug=.+/([a-z_]+\.php.*)$ $1 [L]
#RewriteRule ^product_info/products_id/([0-9]+)$ loja?slug=product_info.php&products_id=$1 [QSA,L]
#RewriteCond %{QUERY_STRING} ^options\=(.*)$
#RewriteRule ^(.*)-p-(.*).html$ product_info.php?products_id=$2%1

#RewriteRule ^slug/([^/]+)/([^/]+)/([0-9]+)/? ?slug=$1&$2=$3 [QSA,L]
#RewriteRule ^([^/]+)/([^/]+)/([^/]+)/([0-9]+).*$ ?$1=$2&$3=$4 [L]
#RewriteRule ^slug/([^/]+)/products_id/([0-9]+)$ ?slug=$1&products_id=$2 [QSA,L]
#loja?slug=product_info.php&products_id=1308
#RewriteRule ^page/([^/]+)/([^/]+)/([0-9]+)/? /?slug=$1&$2=$3 [QSA,L]

</IfModule> 
```

谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T01:01:13.800

在任何 wordpress 规则之前在您的 .htaccess 中尝试此操作。

`RewriteRule ^loja/product_info/products_id/([0-9]+)$ http://www.mysite.com/loja?slug=product_info.php&products_id=$1 [NC,L]`

# php - Opencart - 单击“订单”时出现空白页面

> ID：10568564
> 
> 赞同：0
> 
> 时间：2012-05-13T00:55:50.433
> 
> 标签：php, opencart

当我从管理员单击订单按钮时​​，我得到一个空白页。

我尝试过错误报告，但它不打印任何内容。我还检查了错误日志，再次没有记录任何内容。

它通常与空白订单有关的任何页面。可能是主订单文件的标题中的内容吗？任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T06:02:19.923

php.net/manual/en/errorfunc.configuration.php 检查你的 phpinfo() 到信息，通常在同一目录中有文件“error_log”脚本无法执行..

# ruby-on-rails - Rails：在不更改 url / 重定向到控制器索引的情况下调用控制器操作

> ID：10568567
> 
> 赞同：1
> 
> 时间：2012-05-13T00:56:40.200
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我想在我的页面上有“下一个”和“上一个”按钮，但是当单击时，我希望调用适当的控制器操作，但不重定向到域/控制器/操作。

下一个和上一个动作将从包含要显示的内容的 id 的会话数组中弹出。

是否可以提供我的链接：reader_next_path（重定向到 localhost/reader/next），然后让 Reader next 方法使用我指定的@instance_variables 呈现索引？

我真的不想为所有这些操作创建一个新模板。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T04:26:16.057

渲染“索引” [http://guides.rubyonrails.org/layouts_and_rendering.html#using-render](http://guides.rubyonrails.org/layouts_and_rendering.html#using-render)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-12T20:42:15.920

在这种情况下，我更喜欢使用符号：

```
render :index 
```

# asp.net-mvc-3 - MVC cookie 路径不起作用

> ID：10568568
> 
> 赞同：0
> 
> 时间：2012-05-13T00:56:47.627
> 
> 标签：asp.net-mvc-3, cookies

我正在尝试设置这样的 cookie 路径：

```
public class HomeController : Controller
{
    public ActionResult Index()
    {
        ControllerContext.HttpContext.Response.Cookies.Add(
             new HttpCookie("test", "hello") { Path = @"/admin", 
             Expires = DateTime.Now.AddDays(1)});

        return RedirectToAction("About", "Admin");
    }
}

public class AdminController : Controller
{
    public ActionResult About()
    {
        var cookieCount = HttpContext.Request.Cookies.Count;
        return View();
    }
} 
```

当 Index 操作重定向到 Admin/About 操作时，不会检索 cookie，并且 cookieCount 为零。

如果我将我的 cokie 路径更改为“/”，它可以在 cookieCount 设置为 1 的情况下正常工作。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T08:32:36.967

它区分大小写。所以试试：`Path = @"/Admin"`如果你重定向到`/Admin/About`. 或者使用小写的网址。

# vb.net - 抛出的自定义异常立即被捕获在它抛出的同一 catch 块中

> ID：10568575
> 
> 赞同：0
> 
> 时间：2012-05-13T00:57:28.657
> 
> 标签：vb.net, exception, exception-handling

这可能是调试器问题，但这里有：

我有这段代码：

```
Private Function Connect() As Boolean
    Try
        sessionBegun = False
        connectionOpen = False

        rp = New RequestProcessor2()

        rp.OpenConnection2("","EZSystem", QBXMLRPConnectionType.localQBD) 

        connectionOpen = True 
        ticket = rp.BeginSession("", QBFileMode.qbFileOpenDoNotCare)
        sessionBegun = True 

        Return True
    Catch e As COMException
        exceptionHandler.HandleConnectionException(e)
        **Throw New QuickBooksConnectionException(e.Message)**
    End Try
End Function 
```

我的意图是将低级异常“转换”为更有意义的东西，所以我抛出了我自己创造的异常。我想让这个冒泡到我可以处理的地方。

然而，发生的事情是我的调试器中断并告诉我抛出了“QuickBooksConnectionException”类型的异常。

我知道，我只是扔了它，你为什么要接它？

根据我的阅读，这应该可以工作，并且似乎没有类似的 Java throws 关键字，所以也许它是我的调试器。

我正在使用 SharpDevelop。

谢谢，戴恩

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T01:06:42.657

正如所写的那样，您的代码会引发一个未处理的异常，这总是会导致调试器停止运行。您只需在调用此方法的代码中捕获**QuickBooksConnectionException**。（你是对的，C# 中没有与**throws** Java 关键字等效的东西。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-13T02:16:03.703

您可以更改调试器何时因异常而中断的设置。

[看这里。](http://msdn.microsoft.com/en-us/library/d14azbfh.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-13T13:45:37.913

这只是调试器在做它的工作。它通常会捕获任何未处理的异常。我认为您的代码运行良好，调试器可能会让您感到困惑。

这是一个实验来显示发生了什么。完全删除您的 Try-Catch 块。运行代码并导致 COMException。调试器将“捕获”它，因为它未处理，并突出显示抛出它的行。

一个异常冒泡调用堆栈寻找封闭的 Try 块。如果没有封闭的 Try 块，则运行时会处理它。这意味着如果您*在调试器下*运行，调试器将回退调用堆栈，以便向您显示引发异常的原始行。帮助您调试异常发生的原因。尝试从没有调试器的独立 EXE 或网站运行。它将以标准错误对话终止。

以下是确定调试器是否因异常而中断的[规则。](http://msdn.microsoft.com/en-us/library/x85tt0dd)

# silverlight - 类似俄罗斯方块的 Windows Phone 7 游戏的最佳技术

> ID：10568582
> 
> 赞同：-2
> 
> 时间：2012-05-13T00:59:11.653
> 
> 标签：silverlight, windows-phone-7, xna

对于 Windows Phone 7 类似俄罗斯方块的游戏来说，最好的技术是什么？Silverlight 还是 XNA？最好的是更容易学习和更快地实施。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T01:09:04.000

这个问题之所以难，是因为什么东西容易学？也许对你来说 XNA 会更好，也许不会。

你知道这个教程吗？ [http://create.msdn.com/en-US/education/tutorial/2dgame/getting_started](http://create.msdn.com/en-US/education/tutorial/2dgame/getting_started)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-13T17:05:32.330

[http://social.msdn.microsoft.com/Forums/hu/windowsphone7series/thread/2dcd11bb-7093-4057-b0e9-24451b32a5b5](http://social.msdn.microsoft.com/Forums/hu/windowsphone7series/thread/2dcd11bb-7093-4057-b0e9-24451b32a5b5)

[http://create.msdn.com/en-US/education/catalog/article/which_product_for_windows_phone](http://create.msdn.com/en-US/education/catalog/article/which_product_for_windows_phone)

这些是您可能会发现有用的一些链接，我从未在 Silverlight 中开发过。但是第一个主题对此有一些疑问，第二个主题是一篇关于应用程序中心的文章，该文章适用于 wp7。

# android - Android从另一个类访问主要活动变量

> ID：10568585
> 
> 赞同：1
> 
> 时间：2012-05-13T00:59:40.853
> 
> 标签：android, android-activity

我有一个主要的活动课和查找课。我需要从查找类访问主要活动变量的变量，即“名称”。我尝试使用以下代码段访问，但出现错误。如何从另一个类访问主要活动变量？

```
public class main extends Activity {

     public static String name=null;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        Button button1=(Button)findViewById(R.id.button1);

        final EditText edittext = (EditText) findViewById(R.id.editText1);

        button1.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                name=edittext.getText().toString();

            }
        });                                                
} 
```

我的第二节课……

```
public class find {

public void finder(){

    main mainactivity=new main();
    String incoming_name =mainactivity.name;//I can not use like that ? 
            // do something 
} 
```

}

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-13T03:36:10.237

1）你不应该实例化一个活动，意图启动活动

2）您已经声明了变量，因此您可以通过...`public static`简单地引用它（无需实例化类）`main.name`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-13T01:08:18.930

您不想`Activity`直接从另一个（外部）类访问 's 变量。这是一种不好的做法，因为活动毕竟是 UI 的一部分，而不是应用程序的后端。

另外，请注意，在您的示例中，该`name`属性属于`static`和不属于特定实例。

# java - 寻找纯 Java API 从 MP4 文件中读取元数据

> ID：10568588
> 
> 赞同：0
> 
> 时间：2012-05-13T01:00:14.333
> 
> 标签：java, mp4

> **可能重复：**
> [是否有用于 mp4 文件的 Java API？](https://stackoverflow.com/questions/3015393/is-there-a-java-api-for-mp4-files)

我正在寻找一个可以读取 MP4 元数据的纯 Java api。我一直试图在网上寻找一个，但没有找到任何合适的。如果没有好的 api，有人可以向我指出如何从 MP4 解析元数据的资源，教程也会很棒。我也在网上搜索过，但没有找到太多。任何帮助将不胜感激。

# mips - 在 MIPS 中制作计算器？

> ID：10568595
> 
> 赞同：2
> 
> 时间：2012-05-13T01:01:25.613
> 
> 标签：mips, calculator

我目前正在学习如何使用 MIPS 和 QTSPIM 仿真器进行编码。我认为制作一个简单的算术计算器会是个好习惯，所以我开始编写代码。到目前为止，程序要求输入数字，读取数字，要求操作（用户必须输入操作符号 +、-、*、/ 或首字母 a、s、m、d）。下一步是将接收到的输入与某些东西进行比较......这是我坚持的部分。我的第一个想法是有 4 个寄存器，其中已经有字符，所以我尝试了

```
 li $t5,a
    li $t6,s
    li $t7,m
    li $t8,d 
```

但是，这只会给我一个语法错误。我尝试了其他几种类似的方法，但一直出错。我的目标是将用户输入与这 4 个寄存器进行比较，然后继续操作

```
 beq $t2,$t5,add
    beq $t2,$t6,sub
    beq $t2,$t7,mul
    beq $t2,$t8,div 
```

其中 $t2 包含用户输入的字符。然后它分支到适当的标签以执行操作。

有没有更简单的方法可以做到这一点，我忽略了？谢谢你的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T15:50:50.723

好吧，我设法解决了我自己的问题 XD 解决方案有点原始，但它有效......将操作提示更改为`"1 for addition, 2 for subtraction, 3 for multiplication, 4 for division"`并将用户输入与那些进行比较，

```
 beq $t2,1,add
    beq $t2,2,sub
    beq $t2,3,mul
    beq $t2,4,div 
```

剩下的只是操作本身。以为我会把它留在这里，以防其他人遇到类似的问题。也许我会添加内存和清除功能

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T12:46:53.787

要使用 ASCII 代码设置寄存器，您需要用单引号将其括起来。在您的示例中，它将是

```
 li $t5,'a'
  li $t6,'s'
  li $t7,'m'
  li $t8,'d' 
```

# ios - Unity中的粘性UITableView滚动

> ID：10568596
> 
> 赞同：2
> 
> 时间：2012-05-13T01:01:54.970
> 
> 标签：ios, uitableview, uiscrollview, unity3d

我正在构建一个`UITableView`基于 Unity 的插件，该插件将由游戏开发人员嵌入到他们的 Unity 应用程序中。我正在使用标准方法对可重用单元进行出队，并且`UITableViewCell`s 包含简单`UILabel`的 s 和 a `UIImageView`。里面的图像`UIImageView`是通过异步请求加载的。

将插件作为独立的 Objective-C 应用程序启动时完全没有可用性问题（特别是滚动效果很好，没有延迟），但是在 Unity 内部时，会出现随机出现的“粘滞”滚动问题，即视图滚动但没有惯性。我无法确定导致这种行为的确切动作，但它通常发生在我在一个方向上非常快速地滚动或来回短促移动时。当我将视图滚动到顶部或底部时，该错误消失了（触发“反弹”效果，我猜这会导致一些硬刷新）。

[这里](http://forum.unity3d.com/threads/113815-quot-Sticky-quot-scrolling-in-UITableView-and-UIScrollView-when-interfacing-Unity-and-Obj-C)描述了一个*非常*相似的问题。他们建议的解决方法是

```
#define USE_DISPLAY_LINK_IF_AVAILABLE 0 
```

在 Unity 生成的 AppController.mm 文件中。不幸的是，这个修复对于将要集成我们插件的游戏开发者来说是不可行的，因为它关闭了最快和最可靠的计时解决方案，并且需要回退到其他计时系统，这会导致游戏本身滞后或错过一部分触摸和加速度计事件。

我很可能会覆盖s`drawRect`以`UITableViewCell`减少渲染时间和内存使用，如果失败，请在 OpenGL 中编写插件版本。但是，我想知道是否有人遇到过类似的问题并且知道更快的修复方法，无论是在 Objective-C 还是在 Unity 中，这是非破坏性的（就像上面描述的时间修复一样）。非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T10:01:09.073

我遇到了和你描述的一样的麻烦。我已经通过评论该行来修复它

```
 //#define USE_DISPLAY_LINK_IF_AVAILABLE 0 
```

# java - 如何从类外部更改方法的功能？

> ID：10568598
> 
> 赞同：4
> 
> 时间：2012-05-13T01:02:15.033
> 
> 标签：java

抱歉标题令人困惑，但我不知道如何用一句话来表达这个。我想要做的是有一个“按钮”菜单系统，当点击时会做不同的事情（暂停、结束、转到不同的菜单等）。我能想到的唯一方法是

a）有一百万个子类，这很糟糕

b) 有一百万个 if 语句，这也很糟糕

理想情况下，我希望我可以声明类的新实例，然后同时添加方法，有点像 keyAdaptor 的工作方式。

提前致谢！

〜树

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-13T01:07:49.453

您应该能够使用按钮类并为每个按钮设置不同的处理程序。对于您希望按钮执行的每件不同的事情，都会有不同的功能，但是按钮本身可以都是同一个类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-13T01:11:55.280

一个不错的解决方案是拥有一个类并将方法作为参数传递，这在函数式编程语言中是可能的。目前这是不可能的，但期待 Java 8 的[Lambda 表达式](http://www.jcp.org/en/jsr/detail?id=335)。例如，这样的事情是可能的：

```
public class MyButton implements ActionListener {

    private ActionListener handler;

    public MyButton(ActionListener lambda) {
        handler = lambda;
    }

    @Override
    public void actionPerformed(ActionEvent event) {
        handler(event);
    }

} 
```

您将能够像这样创建新按钮：

```
MyButton but1 = new MyButton(e -> /* do something */);
MyButton but2 = new MyButton(e -> /* do something else */); 
```

同样，可以直接将动作侦听器添加到现有的`JButton`：

```
button.addActionListener(e -> /* do something */); 
```

另一个更详细但当前可用的选项是将动作侦听器作为匿名类参数传递，并覆盖相关方法，如@Basilio German 的回答所示。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-13T01:12:26.850

您可以拥有一个包含许多不同按钮的类，并让每个按钮执行不同的操作。这是 JButton 执行特定操作的代码：

```
 JButton exampleButton= new JButton("Click me!");
    exampleButton.addActionListener(new ActionListener() {
        public void actionPerformed(ActionEvent e) {
            //Do something when the button is clicked
        }
    }); 
```

当然，你可以从里面调用 play()、stop() 或者你想要的任何东西

# python - 如何设置在 Rhythmbox 2.96 中播放的歌曲的评分？

> ID：10568599
> 
> 赞同：5
> 
> 时间：2012-05-13T01:02:29.480
> 
> 标签：python, ubuntu, gio, rhythmbox

我正在尝试创建一个 Python 插件，它将在 Rhythmbox 2.96 中设置当前播放歌曲的评分。Rhythmbox 2.96 似乎不再允许您使用 API（Python 模块）来设置歌曲的评分；与播放器相关的操作已被删除，取而代之的是 MPRIS。

然后我尝试查看将 dbus 与 MPRIS 一起使用，但 MPRIS 也没有设置歌曲评级的规范。经过大量的挖掘，我在 Rhythmbox 代码库中找到[了这个示例](http://bazaar.launchpad.net/~jjardon/rhythmbox/trunk/view/head:/remote/dbus/rb-set-rating.py)，并将其改编成一个测试脚本。

它可以工作，但 SetEntryProperties 方法导致 Rhythmbox 冻结大约 30 秒。这是 Python 脚本。

* * *

指示：

1.  将代码复制到名为 rate.py 的文件中

2.  使用从终端启动节奏盒

    ```
    rhythmbox -D rate 
    ```

3.  在 Rhythmbox 中，从插件中启用 Python 控制台

4.  启动 Python 控制台并运行

    ```
     execfile('/path/to/rate.py') 
    ```

5.  您将在终端中看到打印输出，并且 Rhythmbox 会冻结大约 20-30 秒。

* * *

```
# rhythmbox -D rate
# Rhythmbox: Edit > Plugins > Python Console enabled
# Play a song
# Open Rhythmbox Python Console
# execfile('/path/to/rate.py')

import sys
import rb
from gi.repository import Gtk, Gdk

def rateThread(rating):
        try:
            currentSongURI = shell.props.shell_player.get_playing_entry().get_playback_uri()
            print "Setting rating for " + currentSongURI

            from gi.repository import GLib, Gio
            bus_type = Gio.BusType.SESSION
            flags = 0
            iface_info = None

            print "Get Proxy"
            proxy = Gio.DBusProxy.new_for_bus_sync(bus_type, flags, iface_info,
                                                   "org.gnome.Rhythmbox3",
                                                   "/org/gnome/Rhythmbox3/RhythmDB",
                                                   "org.gnome.Rhythmbox3.RhythmDB", None)

            print "Got proxy"
            rating = float(rating)
            vrating = GLib.Variant("d", rating)
            print "SetEntryProperties"
            proxy.SetEntryProperties("(sa{sv})", currentSongURI, {"rating": vrating})
            print "Done"
        except:
            print sys.exc_info()

        return False

def rate():
        if shell.props.shell_player.get_playing_entry():
            Gdk.threads_add_idle(100, rateThread, 3)

rate() 
```

被打印的例外是：

```
 Desktop/test2.py:41: (<class 'gi._glib.GError'>, GError('Timeout was
 reached',),  <traceback object at 0x913e554>) 
```

我对 Python/dbus 的了解有限，所以我不明白为什么会发生该错误。我会很感激任何帮助。

另外，如果您知道通过代码在 Rhythmbox 中设置歌曲评分的更好方法，也欢迎您！

我正在使用 Ubuntu 12.04，如果它有所作为的话。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T12:44:48.570

### 在插件中设置评分

Rhythmbox 2.9x 确实提供了一个 API 来设置 Rating - 除非您使用诸如 Rhythmbox Tray Icon 之类的外部程序，否则无需通过 dbus 调用。

评级在其内部数据库中保存为双重类型值。使用 RhythmDBEntry 您可以获得评分

```
评级 = entry.get_double(RB.RhythmDBPropType.RATING)

```

要设置评分，您需要 RhythmDB entry_set 函数：

```
db=self.shell.props.db
db.entry_set（条目，RB.RhythmDBPropType.RATING，评级）

```

获取和设置评分的示例代码可以在[CoverArt 浏览器](https://github.com/fossfreedom/coverart-browser/tree/master)插件 (coverart_album.py)中找到

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T18:10:59.583

github 上的[Rhythmbox Tray Icon 插件](http://mendhak.github.com/rhythmbox-tray-icon/)确实可以设置歌曲评级，但它是*在 Rhythmbox 执行环境之外进行的*。

从[这里](https://github.com/mendhak/rhythmbox-tray-icon/blob/master/tray_icon_worker.py#L103)：

```
def SetSongRating(self, rating):
    """
    Sets the current song rating in Rhythmbox.
    """

    try:
        currentSongURI = self.GetSongURI()

        if currentSongURI:

            busType = Gio.BusType.SESSION
            flags = 0
            ratingInterface = None

            proxy = Gio.DBusProxy.new_for_bus_sync(busType, flags, ratingInterface,
                                                   "org.gnome.Rhythmbox3",
                                                   "/org/gnome/Rhythmbox3/RhythmDB",
                                                   "org.gnome.Rhythmbox3.RhythmDB", None)

            variantRating = GLib.Variant("d", float(rating))
            proxy.SetEntryProperties("(sa{sv})", currentSongURI, {"rating": variantRating})
    except:
        print "Failed to set a rating" 
```

如果我尝试直接从 Rhythmbox 插件中运行该代码，它会再次冻结。但是，从 Rhythmbox 环境之外运行它工作得非常好。我发现这已经足够好了，所以我将其标记为答案。

# android - 当前位置/位置的标准图标

> ID：10568600
> 
> 赞同：2
> 
> 时间：2012-05-13T01:02:32.600
> 
> 标签：android, ios, google-maps, maps, google-maps-markers

我正在寻找用户当前位置的光泽蓝色 Google 地图图标。我已经看到它在几个地方被使用，比如在 Android 上的当前版本的 Google+ 中： ![谷歌+截图](../Images/090f1fc69ab97ea452a16f5f1b44bb93.png)

该图标还出现在 Google Maps Android 应用程序的启动器图标上，并作为用户在地图上当前位置的指示符。

![谷歌地图启动器图标](../Images/388c0750324d4a9fe36ad8271d559013.png)

不幸的是，它在 Android SDK 资源中不可用（虽然有“ic_maps_indicator_current_position.png”，但这是一个不同的图标），我在网上找不到它。但我认为这个图标非常有名——一定有可能在你自己的应用程序中使用它。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-13T01:04:03.867

解压官方的 GoogleMap.apk 并在资源文件夹中找到它。

![在](../Images/a31782f03884bff6508854cce66a393f.png)![离开](../Images/e11026a89b3697bab80080c63e26e5fa.png)

# php - HWID 系统 (vb > php > mysql) 不工作

> ID：10568602
> 
> 赞同：0
> 
> 时间：2012-05-13T01:03:21.860
> 
> 标签：php, mysql, vb.net

我要开始了。

我为我的 vb.net 程序设置了一个 hwid 登录，

为了安全起见，我没有直接从程序连接到我的数据库，因为如果它被破解，我的数据库信息就会泄露，

所以我希望它通过 php 运行，

这是我当前的 php 代码

```
<?php
$con = mysql_connect("localhost","username","password");
if (!$con)
{
die('Could not connect: ' . mysql_error());
 }

 mysql_select_db("db", $con);
$hwid
 $result = mysql_query("SELECT Name FROM hwid WHERE HWID =".$hwid. "'");

 while($row = mysql_fetch_array($result))
 {
  echo $row['Name'] . " " . $row['HWID'];
   echo "<br />";
   }

    mysql_close($con);
   ?>
` 
```

当然，我已经删除了我的数据库信息，但我收到了这个错误 `Parse error: syntax error, unexpected T_VARIABLE in db.php on line 10`

我似乎无法找到问题所在，

我想要做的是让程序像这个 site.com/db.php?hwid=hwid 一样在这里提交 hwid，并让它在提交的 hwid 行中回显名称。

我有点难过：/

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T01:38:40.077

> 解析错误：语法错误，第 10 行 db.php 中的意外 T_VARIABLE

让我们看一下代码：

```
1  <?php
2  $con = mysql_connect("localhost","username","password");
3  if (!$con)
4  {
5  die('Could not connect: ' . mysql_error());
6   }
7  
8   mysql_select_db("db", $con);
9  $hwid
10   $result = mysql_query("SELECT Name FROM hwid WHERE HWID =".$hwid. "'"); 
```

第 9 行是`$hwid`，没有任何意义。最低限度，我想应该是`$hwid;`。如果没有分号，解析将继续到下一个标记（在第 10 行）并尝试理解它。它不能，因此出现错误。

**编辑**从您的评论中获取代码

```
9   $hwid = $_GET['hwid'];
10  $result = mysql_query("SELECT * FROM hwid WHERE HWID ="'.$hwid'"); 
```

第 10 行不正确，您在混淆`"`，`'`并且`.`

尝试：

```
$result = mysql_query("SELECT * FROM hwid WHERE HWID ='".$hwid."'"); 
```

或者

```
$result = mysql_query("SELECT * FROM hwid WHERE HWID ='$hwid'"); 
```

# java - 即使我使用 MVC，为了性能，Spring webservices 还是纯粹的宁静球衣？

> ID：10568605
> 
> 赞同：0
> 
> 时间：2012-05-13T01:04:44.130
> 
> 标签：java, performance, spring, web, restful-architecture

我使用 spring MVC 和 webflow 创建游戏服务器并向用户提供一些网页。问题是，javascript 游戏还将针对某些游戏逻辑对同一服务器上的 restful 服务进行多次 ajax 调用。虽然网页服务性能并不重要，但 restful 服务调用需要尽可能高效（与响应时间一样高效）。

对于服务的性能，最好使用没有spring ws开销的纯JAX-RS（jersey）Web服务调用（因为我理解spring层可能会对性能产生负面影响）或者如果我使用spring会一样吗而是使用 webservices 框架并保持与 spring 家族的其他部分的集成？

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-06-28T16:32:41.250

那里没有很多明确的基准，但请看这里： [http ://www.techempower.com/benchmarks/](http://www.techempower.com/benchmarks/)

它清楚地显示了使用 Spring 的开销。与手动提供 JSON 服务的 Servlet 相比，Spring 更“慢”。就个人而言，我不认为 Spring 会缩短开发时间，除非您非常熟悉它。创建一个充当 REST API 的简单 servlet 非常简单。看看基准中的 servlet 代码： [Servlet benchmark](https://github.com/TechEmpower/FrameworkBenchmarks/tree/master/servlet)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-13T01:11:01.177

我不认为 Spring 本身会对性能产生负面影响。你是从哪里听来的？

Spring Web 服务是“契约优先”的 SOAP 服务。如果您说您不想支付 SOAP、XML、编组和解组的开销，那么您说得有道理。无论您是否使用 Spring 来实现服务，都是如此。

REST 是 HTTP，因此对于 AJAX 调用来说很自然。

我相信 Spring 3.0 支持 REST，所以这不是一个“Spring or not Spring”的选择：

[http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/new-in-3.html#d0e1188](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/new-in-3.html#d0e1188)

# ruby-on-rails - 如何将'schema.rb'重置为最后一个git头？

> ID：10568606
> 
> 赞同：3
> 
> 时间：2012-05-13T01:04:46.017
> 
> 标签：ruby-on-rails, git, postgresql, git-reset

我想摆脱自上次提交以来所做的一切，包括我创建的表，所以我做了

```
git reset --hard HEAD
git clean -f -d 
```

所以这摆脱了我创建的迁移，但在架构中看起来表仍然存在。我知道我可以创建新的迁移来删除这些表，但我只是想知道未来的参考如何即使在数据库级别上也可以重置到最后一次提交。

我需要删除数据库中的表的另一个原因是，当我尝试创建迁移（模型）以创建确切的表时，它给了我一个错误并说它们已经存在。因此，如果我将其推送到 github 和生产环境，它不会创建表，因为迁移不存在。因此，我认为有必要通过某种方式（最好是回滚）在本地删除创建的表，然后重新创建迁移。

（我正在使用 PostGreSQl）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T23:05:18.160

所以我暂时解决了这个问题，但可能不是最理想的方法。我刚刚创建了迁移以删除表，运行 rake db:migrate，然后删除了迁移。所以这样一来，就好像从来没有发生过一样。

# php - 无法在 opencart 中添加规范标签

> ID：10568607
> 
> 赞同：1
> 
> 时间：2012-05-13T01:05:34.450
> 
> 标签：php, opencart, canonical-link

由于某些奇怪的原因，我无法将规范标签添加到 opencart 1.5.2.1 产品页面和类别页面。我对 product.php 和 category.php 都进行了更改，但它只是没有显示在 View Source 中。如果我错过了什么，谁能告诉我？

文件编辑

1) 目录/控制器/产品/product.php 2) 目录/控制器/产品/category.php

添加的代码

```
$this->document->addLink($this->url->link('product/category', 'path=' . $category_id), 'canonical'); 
```

后

```
$this->document->setKeywords($product_info['meta_keyword']); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T01:32:15.440

刚刚在干净的 1.5.2.1 安装上尝试了完全相同的代码。完美运行。你要么

*   使用不支持链接的自定义主题（不太可能但可能）
*   未保存
*   未上传
*   没有在正确的地方查看源代码
*   未编辑正确的控制器

# delphi - 在 TWebBroswer Delphi 7 中填写网页上的字段

> ID：10568608
> 
> 赞同：2
> 
> 时间：2012-05-13T01:05:51.070
> 
> 标签：delphi, browser, twebbrowser

我正在制作一个小程序来在我们供应商的网站上下订单。我需要在页面中填写 3 个字段。甚至不需要“提交”它。

是否有任何简单的方法或任何组件可以做到这一点（最好是免费的）

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-13T01:36:51.617

假设您有一个名称为“name”并输入“text”的输入字段，您可以调用

```
WebBrowser1.OleObject.Document.GetElementByID('name').setAttribute('value', 'somename'); 
```

# java - 单击另一个swing gui中的按钮后打开另一个swing gui

> ID：10568615
> 
> 赞同：2
> 
> 时间：2012-05-13T01:07:59.800
> 
> 标签：java, swing, user-interface

单击按钮后，我想打开另一个摆动 gui，但我无法在此处找到代码来执行此操作，其中包含按钮的主 gui：

```
 /*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package javaapplication1;
import static java.lang.System.out;
/**
 *
 * @author Matthew
 */
public class NewFrame extends java.awt.Frame {
/**
 * Creates new form NewFrame
 */
public NewFrame() {
    initComponents();
}

/**
 * This method is called from within the constructor to initialize the form.
 * WARNING: Do NOT modify this code. The content of this method is always
 * regenerated by the Form Editor.
 */
// <editor-fold defaultstate="collapsed" desc="Generated Code">
private void initComponents() {

    jButton1 = new javax.swing.JButton();
    jButton2 = new javax.swing.JButton();

    jButton1.setText("jButton1");

    addWindowListener(new java.awt.event.WindowAdapter() {
        public void windowClosing(java.awt.event.WindowEvent evt) {
            exitForm(evt);
        }
    });

    jButton2.setText("jButton2");
    jButton2.addActionListener(new java.awt.event.ActionListener() {
        public void actionPerformed(java.awt.event.ActionEvent evt) {
            jButton2ActionPerformed(evt);
        }
    });
    jButton2.addKeyListener(new java.awt.event.KeyAdapter() {
        public void keyPressed(java.awt.event.KeyEvent evt) {
            form(evt);
        }
    });
    add(jButton2, java.awt.BorderLayout.CENTER);

    pack();
}// </editor-fold>

/**
 * Exit the Application
 */
private void exitForm(java.awt.event.WindowEvent evt) {                          
    System.exit(0);
}                         

private void form(java.awt.event.KeyEvent evt) {

}

private void jButton2ActionPerformed(java.awt.event.ActionEvent evt) {
    out.println("print something");
}

/**
 * @param args the command line arguments
 */
public static void main(String args[]) {
    java.awt.EventQueue.invokeLater(new Runnable() {

        @Override
        public void run() {
            new NewFrame().setVisible(true);
        }

    });
}
// Variables declaration - do not modify
private javax.swing.JButton jButton1;
private javax.swing.JButton jButton2;
// End of variables declaration
} 
```

这里是我想要在单击按钮时打开的对话框 gui 文件：

```
 /*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package javaapplication1;

/**
 *
 * @author Matthew
 */
public class NewJDialog extends javax.swing.JDialog {
/**
 * Creates new form NewJDialog
 */
public NewJDialog(java.awt.Frame parent, boolean modal) {
    super(parent, modal);
    initComponents();
}

/**
 * This method is called from within the constructor to initialize the form.
 * WARNING: Do NOT modify this code. The content of this method is always
 * regenerated by the Form Editor.
 */
@SuppressWarnings("unchecked")
// <editor-fold defaultstate="collapsed" desc="Generated Code">
private void initComponents() {

    jLabel1 = new javax.swing.JLabel();

    setDefaultCloseOperation(javax.swing.WindowConstants.DISPOSE_ON_CLOSE);

    jLabel1.setText("IT WORKS");

    javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
    getContentPane().setLayout(layout);
    layout.setHorizontalGroup(
        layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
        .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, layout.createSequentialGroup()
            .addContainerGap(72, Short.MAX_VALUE)
            .addComponent(jLabel1, javax.swing.GroupLayout.PREFERRED_SIZE, 318, javax.swing.GroupLayout.PREFERRED_SIZE)
            .addContainerGap())
    );
    layout.setVerticalGroup(
        layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
        .addGroup(layout.createSequentialGroup()
            .addGap(128, 128, 128)
            .addComponent(jLabel1, javax.swing.GroupLayout.PREFERRED_SIZE, 75, javax.swing.GroupLayout.PREFERRED_SIZE)
            .addContainerGap(97, Short.MAX_VALUE))
    );

    pack();
}// </editor-fold>

/**
 * @param args the command line arguments
 */
public static void main(String args[]) {
    /*
     * Set the Nimbus look and feel
     */
    //<editor-fold defaultstate="collapsed" desc=" Look and feel setting code (optional) ">
    /*
     * If Nimbus (introduced in Java SE 6) is not available, stay with the
     * default look and feel. For details see
     * http://download.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html
     */
    try {
        for (javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels()) {
            if ("Nimbus".equals(info.getName())) {
                javax.swing.UIManager.setLookAndFeel(info.getClassName());
                break;
            }
        }
    } catch (ClassNotFoundException ex) {
        java.util.logging.Logger.getLogger(NewJDialog.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
    } catch (InstantiationException ex) {
        java.util.logging.Logger.getLogger(NewJDialog.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
    } catch (IllegalAccessException ex) {
        java.util.logging.Logger.getLogger(NewJDialog.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
    } catch (javax.swing.UnsupportedLookAndFeelException ex) {
        java.util.logging.Logger.getLogger(NewJDialog.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
    }
    //</editor-fold>

    /*
     * Create and display the dialog
     */
    java.awt.EventQueue.invokeLater(new Runnable() {

        public void run() {
            NewJDialog dialog = new NewJDialog(new javax.swing.JFrame(), true);
            dialog.addWindowListener(new java.awt.event.WindowAdapter() {

                @Override
                public void windowClosing(java.awt.event.WindowEvent e) {
                    System.exit(0);
                }
            });
            dialog.setVisible(true);
        }
    });
}
// Variables declaration - do not modify
private javax.swing.JLabel jLabel1;
// End of variables declaration
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T01:12:45.887

一种方法是在需要时创建 NewJDialog，将父窗口传入其构造函数，然后通过`setVisible(true)`. 但是您不希望原始窗口是一个 Frame，它是旧 AWT 库的一部分，而应该是一个 JFrame，它是 Swing 库中的等效类。

如果您对此建议有任何疑问，请询问！

# wordpress - WPML › 子类别页面生成 404 ‹ WordPress

> ID：10568616
> 
> 赞同：6
> 
> 时间：2012-05-13T01:08:12.580
> 
> 标签：wordpress, multilingual, permalinks

## 问题的简短描述

所以问题基本上是，当我使用 wpml 在网站的翻译版本中使用子类别时，它会生成一个 404 页面。在父类别中，我仍然可以看到帖子并毫无问题地导航到它。而且，在非翻译版本中一切正常。

## 我的问题

所以我的问题是，如果其他人遇到过这个问题，如果有，你是如何解决的？

* * *

## 希望有用的信息

### 软件

*   PHP - 5.2
*   WordPress - 3.3.2
*   WPML 多语言 CMS - 2.4.3
*   WPML 字符串翻译 - 1.3.0

### 固定链接设置

`/%category%/%postname%/`

### 我试过的

*   我尝试停用所有其他插件
*   尝试刷新永久链接**‹*编辑***

### 附加信息

*   似乎子类别的网址被视为“页面” **‹*编辑***
*   如果我们改为手动直接转到 url，但从 url 中减去父类别，我们会得到预期的类别存档页面**‹*编辑***
    **示例**：`http://domain.com/en/super/sub/`->`http://domain.com/en/sub/`

**我的 .htaccess -文件：**

```
# BEGIN Redirects
RedirectMatch 301 ^/okategoriserade/(.*)$ /webb/$1
RedirectMatch 301 ^/apache2/(.*)$ /apache/$1
RedirectMatch 301 ^/server/(.*)$ /linux/$1
RedirectMatch 301 ^/etiketter/(.*)$ /tag/$1
RedirectMatch 301 ^/kategorier/(.*)$ /$1
RedirectMatch 301 ^/en/php-en/zf2/(.*)$ /en/zf2/$1
RedirectMatch 301 ^/media/me-avatar-e1332014347355.png(.*)$ /media/erik-landvall.png$1
RedirectMatch 301 ^/jquery/(.*)$ /javascript/jquery/$1
# END Redirects

# BEGIN W3TC Browser Cache
<IfModule mod_mime.c>
    AddType text/css .css
    AddType application/x-javascript .js
    AddType text/x-component .htc
    AddType text/html .html .htm
    AddType text/richtext .rtf .rtx
    AddType image/svg+xml .svg .svgz
    AddType text/plain .txt
    AddType text/xsd .xsd
    AddType text/xsl .xsl
    AddType text/xml .xml
    AddType video/asf .asf .asx .wax .wmv .wmx
    AddType video/avi .avi
    AddType image/bmp .bmp
    AddType application/java .class
    AddType video/divx .divx
    AddType application/msword .doc .docx
    AddType application/vnd.ms-fontobject .eot
    AddType application/x-msdownload .exe
    AddType image/gif .gif
    AddType application/x-gzip .gz .gzip
    AddType image/x-icon .ico
    AddType image/jpeg .jpg .jpeg .jpe
    AddType application/vnd.ms-access .mdb
    AddType audio/midi .mid .midi
    AddType video/quicktime .mov .qt
    AddType audio/mpeg .mp3 .m4a
    AddType video/mp4 .mp4 .m4v
    AddType video/mpeg .mpeg .mpg .mpe
    AddType application/vnd.ms-project .mpp
    AddType application/x-font-otf .otf
    AddType application/vnd.oasis.opendocument.database .odb
    AddType application/vnd.oasis.opendocument.chart .odc
    AddType application/vnd.oasis.opendocument.formula .odf
    AddType application/vnd.oasis.opendocument.graphics .odg
    AddType application/vnd.oasis.opendocument.presentation .odp
    AddType application/vnd.oasis.opendocument.spreadsheet .ods
    AddType application/vnd.oasis.opendocument.text .odt
    AddType audio/ogg .ogg
    AddType application/pdf .pdf
    AddType image/png .png
    AddType application/vnd.ms-powerpoint .pot .pps .ppt .pptx
    AddType audio/x-realaudio .ra .ram
    AddType application/x-shockwave-flash .swf
    AddType application/x-tar .tar
    AddType image/tiff .tif .tiff
    AddType application/x-font-ttf .ttf .ttc
    AddType audio/wav .wav
    AddType audio/wma .wma
    AddType application/vnd.ms-write .wri
    AddType application/vnd.ms-excel .xla .xls .xlsx .xlt .xlw
    AddType application/zip .zip
</IfModule>
<IfModule mod_expires.c>
    ExpiresActive On
    ExpiresByType text/css A31536000
    ExpiresByType application/x-javascript A31536000
    ExpiresByType text/x-component A31536000
    ExpiresByType text/html A3600
    ExpiresByType text/richtext A3600
    ExpiresByType image/svg+xml A3600
    ExpiresByType text/plain A3600
    ExpiresByType text/xsd A3600
    ExpiresByType text/xsl A3600
    ExpiresByType text/xml A3600
    ExpiresByType video/asf A31536000
    ExpiresByType video/avi A31536000
    ExpiresByType image/bmp A31536000
    ExpiresByType application/java A31536000
    ExpiresByType video/divx A31536000
    ExpiresByType application/msword A31536000
    ExpiresByType application/vnd.ms-fontobject A31536000
    ExpiresByType application/x-msdownload A31536000
    ExpiresByType image/gif A31536000
    ExpiresByType application/x-gzip A31536000
    ExpiresByType image/x-icon A31536000
    ExpiresByType image/jpeg A31536000
    ExpiresByType application/vnd.ms-access A31536000
    ExpiresByType audio/midi A31536000
    ExpiresByType video/quicktime A31536000
    ExpiresByType audio/mpeg A31536000
    ExpiresByType video/mp4 A31536000
    ExpiresByType video/mpeg A31536000
    ExpiresByType application/vnd.ms-project A31536000
    ExpiresByType application/x-font-otf A31536000
    ExpiresByType application/vnd.oasis.opendocument.database A31536000
    ExpiresByType application/vnd.oasis.opendocument.chart A31536000
    ExpiresByType application/vnd.oasis.opendocument.formula A31536000
    ExpiresByType application/vnd.oasis.opendocument.graphics A31536000
    ExpiresByType application/vnd.oasis.opendocument.presentation A31536000
    ExpiresByType application/vnd.oasis.opendocument.spreadsheet A31536000
    ExpiresByType application/vnd.oasis.opendocument.text A31536000
    ExpiresByType audio/ogg A31536000
    ExpiresByType application/pdf A31536000
    ExpiresByType image/png A31536000
    ExpiresByType application/vnd.ms-powerpoint A31536000
    ExpiresByType audio/x-realaudio A31536000
    ExpiresByType image/svg+xml A31536000
    ExpiresByType application/x-shockwave-flash A31536000
    ExpiresByType application/x-tar A31536000
    ExpiresByType image/tiff A31536000
    ExpiresByType application/x-font-ttf A31536000
    ExpiresByType audio/wav A31536000
    ExpiresByType audio/wma A31536000
    ExpiresByType application/vnd.ms-write A31536000
    ExpiresByType application/vnd.ms-excel A31536000
    ExpiresByType application/zip A31536000
</IfModule>
<IfModule mod_deflate.c>
    <IfModule mod_setenvif.c>
        BrowserMatch ^Mozilla/4 gzip-only-text/html
        BrowserMatch ^Mozilla/4\.0[678] no-gzip
        BrowserMatch \bMSIE !no-gzip !gzip-only-text/html
        BrowserMatch \bMSI[E] !no-gzip !gzip-only-text/html
    </IfModule>
    <IfModule mod_headers.c>
        Header append Vary User-Agent env=!dont-vary
    </IfModule>
    <IfModule mod_filter.c>
        AddOutputFilterByType DEFLATE text/css application/x-javascript text/x-component text/html text/richtext image/svg+xml text/plain text/xsd text/xsl text/xml image/x-icon
    </IfModule>
</IfModule>
<FilesMatch "\.(css|js|htc|CSS|JS|HTC)$">
    <IfModule mod_headers.c>
        Header set Pragma "public"
        Header append Cache-Control "public, must-revalidate, proxy-revalidate"
    </IfModule>
    FileETag MTime Size
    <IfModule mod_headers.c>
         Header set X-Powered-By "W3 Total Cache/0.9.2.4"
    </IfModule>
</FilesMatch>
<FilesMatch "\.(html|htm|rtf|rtx|svg|svgz|txt|xsd|xsl|xml|HTML|HTM|RTF|RTX|SVG|SVGZ|TXT|XSD|XSL|XML)$">
    <IfModule mod_headers.c>
        Header set Pragma "public"
        Header append Cache-Control "public, must-revalidate, proxy-revalidate"
    </IfModule>
    FileETag MTime Size
    <IfModule mod_headers.c>
         Header set X-Powered-By "W3 Total Cache/0.9.2.4"
    </IfModule>
</FilesMatch>
<FilesMatch "\.(asf|asx|wax|wmv|wmx|avi|bmp|class|divx|doc|docx|eot|exe|gif|gz|gzip|ico|jpg|jpeg|jpe|mdb|mid|midi|mov|qt|mp3|m4a|mp4|m4v|mpeg|mpg|mpe|mpp|otf|odb|odc|odf|odg|odp|ods|odt|ogg|pdf|png|pot|pps|ppt|pptx|ra|ram|svg|svgz|swf|tar|tif|tiff|ttf|ttc|wav|wma|wri|xla|xls|xlsx|xlt|xlw|zip|ASF|ASX|WAX|WMV|WMX|AVI|BMP|CLASS|DIVX|DOC|DOCX|EOT|EXE|GIF|GZ|GZIP|ICO|JPG|JPEG|JPE|MDB|MID|MIDI|MOV|QT|MP3|M4A|MP4|M4V|MPEG|MPG|MPE|MPP|OTF|ODB|ODC|ODF|ODG|ODP|ODS|ODT|OGG|PDF|PNG|POT|PPS|PPT|PPTX|RA|RAM|SVG|SVGZ|SWF|TAR|TIF|TIFF|TTF|TTC|WAV|WMA|WRI|XLA|XLS|XLSX|XLT|XLW|ZIP)$">
    <IfModule mod_headers.c>
        Header set Pragma "public"
        Header append Cache-Control "public, must-revalidate, proxy-revalidate"
    </IfModule>
    FileETag MTime Size
    <IfModule mod_headers.c>
         Header set X-Powered-By "W3 Total Cache/0.9.2.4"
    </IfModule>
</FilesMatch>
# END W3TC Browser Cache
# BEGIN W3TC Page Cache core
<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteBase /
    RewriteRule ^(.*\/)?w3tc_rewrite_test$ $1?w3tc_rewrite_test=1 [L]
    RewriteCond %{HTTP:Accept-Encoding} gzip
    RewriteRule .* - [E=W3TC_ENC:_gzip]
    RewriteCond %{REQUEST_METHOD} !=POST
    RewriteCond %{QUERY_STRING} =""
    RewriteCond %{HTTP_HOST} =erik.landvall.se
    RewriteCond %{REQUEST_URI} \/$ [OR]
    RewriteCond %{REQUEST_URI} (sitemap(_index)?\.xml(\.gz)?|[a-z0-9_\-]+-sitemap([0-9]+)?\.xml(\.gz)?) [NC]
    RewriteCond %{REQUEST_URI} !(\/wp-admin\/|\/xmlrpc.php|\/wp-(app|cron|login|register|mail)\.php|\/feed\/|wp-.*\.php|index\.php) [NC,OR]
    RewriteCond %{REQUEST_URI} (wp-comments-popup\.php|wp-links-opml\.php|wp-locations\.php) [NC]
    RewriteCond %{HTTP_COOKIE} !(comment_author|wp-postpass) [NC]
    RewriteCond %{HTTP_USER_AGENT} !(W3\ Total\ Cache/0\.9\.2\.4) [NC]
    RewriteCond "%{DOCUMENT_ROOT}/wp-content/w3tc/pgcache/%{REQUEST_URI}/_index%{ENV:W3TC_UA}%{ENV:W3TC_REF}%{ENV:W3TC_SSL}.html%{ENV:W3TC_ENC}" -F
    RewriteRule .* "/wp-content/w3tc/pgcache/%{REQUEST_URI}/_index%{ENV:W3TC_UA}%{ENV:W3TC_REF}%{ENV:W3TC_SSL}.html%{ENV:W3TC_ENC}" [L]
    </IfModule>
    # END W3TC Page Cache core
    # BEGIN WordPress
    <IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteBase /
    RewriteRule ^index\.php$ - [L]
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule . /index.php [L]
    </IfModule>

# END WordPress
DirectoryIndex index.php index.html index.htm 
```

* * *

## 外部资源

与外部网站上的问题相关的信息。

### 我的博客

~~我遇到问题的页面以及在我解决问题之前您可以查看的页面~~. *出于 UX 和 SEO 的原因，我从网页的翻译版本中删除了子类别。*

*   瑞典语：[http ://erik.landvall.se](http://erik.landvall.se)
*   英语：[http ://erik.landvall.se/en](http://erik.landvall.se/en)

*此时翻译不完整，女巫是内容不同的原因。*

### wpml.org

我在 wplm.org 上发现了 2 年前发布的一个主题，该主题准确地描述了我的问题。我读了分析器，但不幸的是，线程没有得到解决就结束了。

> 引自[http://wpml.org/forums/topic/error-on-subcategories/](http://wpml.org/forums/topic/error-on-subcategories/)
> 
> *wordpress 中的子类别似乎存在问题。我正在使用 wordpress 2.92，当我切换到子类别时，它会显示 404 错误页面。但是当我切换回它时，这些帖子确实出现在主要类别中。这个问题不会出现在主要语言中，只会出现在其他语言中。所以当我使用主要语言时，帖子出现在子类别和主要类别下，而不是其他语言，它们只出现在主要语言中。*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T09:07:32.033

**请检查下面的更新。**

此问题的解决方案在您的 Apache 配置中。您需要更改将路径转换为 ​​WordPress 的 index.php 文件参数的正则表达式。

WordPress 是一个使用 PHP 的非常高级的系统，它本身也是一个非常高级的系统。WordPress 在访问服务器时无法访问 url。它只有 index.php 文件，它需要请求到达这个文件，以便它可以处理请求。

为了实现这一点，他们使用了 mod_rewrite，这是一个 Apache 模块，它在服务器决定如何处理请求之前修改请求。

请检查您的服务器的错误日志。您将看到服务器尝试访问的真实文件。另外，请检查`.htaccess`WordPress 在文件夹中创建的文件。在这些文件中，您将看到 mod_rewrite 使用的正则表达式。

我检查了你的博客，看起来你已经解决了这个问题。我仍然想写，以便其他有同样问题的人受益。尤其是在看到您提到两年前在其他地方的另一篇帖子未解决之后。

**更新：**

我很高兴我告诉过“我**几乎**可以肯定......”：D（参考对此答案的评论）看起来事情与我几年前解决的情况有点不同。

我检查了 WordPress 代码并进行了一些试验。我原本以为 WordPress 因为 /en/ 找不到文章，但我错了。WordPress 从 url 中查找帖子的默认行为将这种情况视为一种积极的副作用：假设我没有任何插件或任何语言，因此`/en/`对 WordPress 没有任何意义。

当我想浏览`erik.landvall.se/en/`它时，它会按预期返回 404。但是，如果我们有一个类别结构 as`abc/cde/efg/`和一篇文章 as`moo`可以在`abc/cde/efg/moo`; 当我更改链接的类别部分时，WordPress 会自动将我重定向到`abc/cde/efg/moo`：

`en/abc/cde/efg/moo` `abc/efg/moo` `cde/efg/moo` ...

所有重定向到`abc/cde/efg/moo`. 在您的博客中，我看到了相同的行为，除了 en/ 将您的插件带入场景。现在很明显，插件以与 WordPress 最初不同的方式处理 url 结构或以另一种方式导致原始行为发生变化。

我想按照我的承诺检查插件源；但我发现现在对我来说不可能，因为它是我必须购买才能看到来源的产品，我不愿意购买我永远不会使用的东西:)

既然您说“在父类别中，我仍然可以看到帖子并毫无问题地导航到它。” 我想从 url 中删除子类别。这是一个非常肮脏的hack；但比编辑插件更好。

我们将这个丑陋的 php 文件 ,`fix_lang_subcategory.php`放到我们的根文件夹中：

```
<?php

function fix_lang_subcategory() {
    $p = trim($_SERVER['REDIRECT_URL'], '/');
    if (substr_count($p, '/') > 2) {
        $_SERVER['REQUEST_URI']='/'.substr($p, 0, strpos($p,'/',4)).'/'.substr($p, strrpos($p, '/')+1).'/'.($_SERVER['QUERY_STRING'] ? '?'.$_SERVER['QUERY_STRING'] : '');
    }
};
fix_lang_subcategory();
require_once('index.php');
?> 
```

在此之后，您应该会在 /fix_lang_subcategory.php 成功看到 WordPress 的 404 文件。如果它有效，我们可以编辑我们的 .htaccess 文件。

在 .htaccess 文件的末尾，之后

```
# BEGIN WordPress
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteRule ^index\.php$ - [L] 
```

行，我们添加这一行：

```
RewriteRule ^en/ /fix_lang_subcategory.php [L] 
```

我们在这里所做的是，我们用我们愚蠢的 php 文件从 wordpress 的 index.php 更改入口点，以便能够运行几行 php 而无需触及原始源。这仅适用于网站的 /en/ 部分。休息就像现在一样工作。在我们的 php 文件中，我们检查是否看到带有子类别的链接，如果有，我们更改（这不是一件好事！）REQUEST_URI 如下：

```
/en/maincategory/subcategory1/subcategory2/article/?anything_here_untouched 
```

至

```
/en/maincategory/article/?anything_here_untouched 
```

然后我们让 WordPress 正常工作。

如果启用子类别时插件的工作方式不同，那么这可能会导致重定向 /en/ 下的子类别页面。

**更好的解决方案：**

我曾以为您不想将子域用于替代语言；但后来我看到“你能在子目录/子域中托管翻译博客的版本吗？” 在对您的问题的评论和您的回复中，似乎提到子目录引起了误解。正如我在 ML 插件的网站上看到的那样，您可以使用子域而不是文件夹，这样可以省去所有麻烦，可能是：

而不是`http://erik.landvall.se/en`你可以使用`http://en.erik.landvall.se/`？也许？

**更好的解决方案：**

ML Plugin 有 90% 的机会导致此问题，他们必须修复它。启动支持票可能会帮助他们意识到他们的问题并为其他人解决它。

# php - 如何在聊天中向所有人发出实时“用户正在输入”通知

> ID：10568619
> 
> 赞同：-3
> 
> 时间：2012-05-13T01:08:59.257
> 
> 标签：php, javascript, jquery, ajax, node.js

我想使用 jQuery 和 PHP 编写一个聊天应用程序。我需要帮助的部分是实时用户“Evx”正在输入一条消息，然后将该消息实时显示给所有其他用户。这类似于 Skype 有一支笔 ../ 以及 Facebook 如何在用户键入时发出通知。

我需要的是有关如何轻松完成实时“用户正在打字”的逻辑步骤和信息的一些帮助，但仍然可以像任何其他方式一样工作。

**这是我迄今为止尝试过的：**

```
//time delay before ajax call
var delay = (function() {
    var timer = 0;
    return function(callback, ms) {
        clearTimeout(timer);
        timer = setTimeout(callback, ms);
    };
})();

$('#usermsg').keydown(function() {
    if ($('#usermsg').val().length === 5) {
        delay(function() {
            $.ajax({
                url: "addusertyping.php",
                cache: false,
                success: function() {

                }
            });
        }, 5000);
    }
});

$('#usermsg').keyup(function() {
    if ($('#usermsg').val().length >= 6) {
        // here I should basically check for 
          // an update from server or what not.
    }
});​ 
```

有人可以使用我上面尝试的作为起点，解释有关如何实现用户实时输入的步骤和信息吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-13T01:32:24.597

Facebook 和 Google Talk 等网站在实现聊天时使用的方法是使用利用 Comet 或 Reverse AJAX 的 Web 请求/响应模型的解决方案。

**网络 1.0：**

在传统的 Web 1.0 实现中，例如您的，浏览器向服务器发起请求。服务器使用客户端代码在视图中呈现的数据进行响应。

当我们只是将用户从一个页面移动到另一个页面时，或者当我们响应用户发起的事件时，这非常有用。但是，这种方法在管理由服务器发起的事件时存在固有缺陷。

在您的示例中，为了模拟实时更新，您必须通过连续轮询请求来检查服务器以检查更新。这相当于汽车后座上的小孩不断地问他的父母“我们到了吗？我们到了吗？” 一遍又一遍没有失败。这不仅会占用大量带宽，而且当连接的客户端数量增加时会在服务器上造成沉重的负载。

**彗星/反向 AJAX：**

由于服务器无法在没有请求的情况下向浏览器发起响应，因此使用一种称为“反向 AJAX”或“Comet”的技术来模拟服务器向客户端推送事件通知的过程。

Comet 背后的一般前提是浏览器打开与服务器的连接，然后服务器无限期地保持该连接打开。当服务器有一个更新需要传递给所有连接的客户端时，它会将响应发送回客户端，完成请求/响应周期。收到响应后，客户端立即向服务器发送另一个请求，服务器再次保持打开状态，直到下一次更新。

有可用于 PHP 的 Comet 解决方案，因此您可以使用现有平台完成此任务；但是，我不能推荐任何。您还需要一个客户端库来帮助打开 Comet 连接。查看[Dojo Cometd JavaScript 库](http://dojotoolkit.org/reference-guide/1.7/dojox/cometd.html)。

Comet 是实现聊天解决方案的两个高级解决方案之一，另一个是 WebSockets。但是，某些浏览器仍然缺乏对 WebSockets 的支持。

在寻找促进 Comet 的库时，选择促进 Continuations 的库也是一个好主意，这有助于确保可以释放等待发送响应的线程以执行其他任务，而不是无所事事地等待。有了这样的解决方案，一些 Comet 服务器可以轻松扩展到超过 20,000 个连接！

这是一篇描述[如何在 PHP 上实现 Comet](http://www.zeitoun.net/articles/comet_and_php/start)的文章。此外，您可能会发现这个 StackOverflow 问题很有用，因为它[描述了在 PHP 上使用 Comet 的挑战](https://stackoverflow.com/q/603201/552792)。

**设计注意事项：**

我们在开发聊天解决方案时犯的第一个错误之一是没有将消息视为更抽象事物的子类。相反，我们从服务器发送到前端的信息只是一条“聊天消息”。然而，随着产品的进步，我们很快发现同一个 Comet 连接可以用于向浏览器发送命令，而不仅仅是消息。

因此，要实现“用户正在键入”，您可能需要 JavaScript 中的处理程序首先确定来自服务器的更新是新消息，还是“显示用户 XYX 正在键入”命令。一个好的设计还可以确保您可以将 Comet 连接用于其他类型的更新，以及从服务器启动的更新。

最后，您的用户输入消息应该有某种延迟，这样当用户输入时，他或她的浏览器只会每 X 秒通知一次服务器。如果您将用户键入绑定到一个按键事件，该事件只是用 AJAX 请求敲击服务器，那么您只是将 Comet 连接降级为轮询。

在接收端，您很可能希望实现超时功能，以便如果正在输入的用户停止向服务器发送“用户输入”请求，则用户输入消息会自动消失。或者，如果浏览器在他或她的文本框为空时发送请求，例如当用户在输入的文本上退格时，该用户的浏览器可以发送“用户不再键入”消息。

**简单的解决方案？：**

最后，我想补充一点，这将涉及一个学习曲线，因为您必须从服务器将数据推送到客户端的角度来考虑 Web。这将涉及您的大量研究和奉献，以及尝试示例并真正深入了解您应该如何处理应用程序的设计。这是迄今为止掌握这项技术的最佳方法之一，但它也可能令人生畏。请务必花时间学习这些示例，自己尝试一下，如果遇到困难，您可以随时寻求帮助。

# vb.net - 如何在 VB.net 中创建高质量的图标

> ID：10568624
> 
> 赞同：3
> 
> 时间：2012-05-13T01:09:52.340
> 
> 标签：vb.net, bitmap, icons, system.drawing

我需要在 vb.net 中为我当前的项目创建高质量的图标

到目前为止，这是我的代码，

```
 Private Sub CreateIcon(ByVal bitmapName As String)
    Try
        Dim fi As New System.IO.FileInfo(bitmapName)
        Dim bmp As New Bitmap(fi.FullName)
        Dim sw As System.IO.StreamWriter = System.IO.File.CreateText(fi.FullName.Replace(fi.Extension, ".ico"))
        Icon.FromHandle(bmp.GetHicon).Save(sw.BaseStream)
        sw.Close()
    Catch ex As Exception
        System.Diagnostics.Debug.WriteLine(ex)
    End Try
End Sub 
```

但问题是它最后只给了我一个质量非常低的图标。有没有人对如何制作更高质量的图像有任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T06:26:54.217

我想您应该更深入地研究`ico`文件格式并了解如何手动构建它。如果您的任务倾向于仅支持特定情况（源大小和格式），您可以研究这个项目：[动态生成图标（安全）](http://www.codeproject.com/Articles/7122/Dynamically-Generating-Icons-safely)。

该解决方案有局限性，但可以扩展以满足您的要求。

# php - 多个复选框删除mysqli

> ID：10568626
> 
> 赞同：1
> 
> 时间：2012-05-13T01:10:42.830
> 
> 标签：php, checkbox, mysqli

我正在尝试获得多个删除功能，这就是我到目前为止所拥有的：

```
<?php
  echo '<h3>Welcome to your profile, '. $_SESSION['first_name'] . '</h3>';

  require_once ('../mysqli_connect.php'); //Connect to the db

  // Make the query

  $q = "SELECT upload_id, title, genre, length, created, views
        FROM upload
        WHERE owner_id =". $_SESSION['user_id'] ."
        ORDER BY title ASC";

  $r = mysqli_query ($dbc, $q); // Run the query

  if($r) {
    ?>
    <table align="center" cellspacing="3" cellpadding="3" width="75%">
      <tr>
        <td align="left"><b>Title</b></td>
        <td align="left"><b>Genre</b></td>
        <td align="left"><b>Pages</b></td>
        <td align="left"><b>Submitted</b></td>
        <td align="left"><b>Views</b></td>';
          <form action="/nbproject/newwriter_profile.php" method="post">
          <?php
            while ($row = mysqli_fetch_array($r,MYSQLI_ASSOC)) {
              echo '<tr><td align="left">' 
                . $row['title'] . '</td><td align="left">'
                . $row['genre'] . '</td><td align="left">'
                . $row['length'] . '</td><td align="left">'
                . $row['created'] . '</td><td align="left">'
                . $row['views'] . '</td><td align="left">'
                . '<input type="checkbox" name="checkbox[]"'
                . 'id="checkbox[]"  value='.$row['$upload_id'] //this upload id is auto-increment (see first note)
                .' />'.' </td>'. '</tr>';
            }
          ?>
    </table>
    <input type="submit" name="delete" value="Delete" align="right"/>
  </form>
  <?php
    mysqli_free_result ($r); // Free up the resources
  } else { // If it did not run okay
    // Public Message:
    echo '<p class="error">Your submissions could not be retrieved.  We apologize for any inconvenience.</p>';
    // Debugging message:
    echo '<p>' . mysqli_error($dbc) . '<br /><br />Query: ' . $q . '</p>';
  } // End of if ($r) IF.

  mysqli_close($dbc); // Close the database connection

  if($_POST['delete']) {
    require_once ('../mysqli_connect.php'); //Connect to the db

    $checkbox = $_POST['checkbox']; //from name="checkbox[]"
    $countCheck = count($_POST['checkbox']);

    for($i=0;$i<$countCheck;$i++) {
      $del_id  = $checkbox[$i];
      //----------------------------------
      $sql = "DELETE from `upload` where `upload_id` = $del_id AND `owner_id` = {$_SESSION['user_id']}";
      $result = $mysqli->query($sql) or die(mysqli_error($mysqli)); //added session information after hearing about google spider armageddon scenarios
    }

    if($result) {
      header('Location: newwriter_profile.php');
    } else {
      echo "Error: ".mysqli_error();
    }
  }
?> 
```

第一个注意事项：基本上注册用户会受到他们的个人资料页面的欢迎，该页面向他们显示他们的上传内容和一些上传信息。我想在每个上传旁边有一个复选框，在页面上的任何其他地方都有一个删除按钮。所以我尝试了这个。

现在它将重定向而没有错误，并且没有任何内容被删除。此外，在未选中复选框的情况下点击 Delete 会返回错误。提前感谢您的帮助，解决这个问题也将解决我遇到的另一个问题，这将是一个巨大的解脱。

我想不出一种方法来将上传 ID 链接到复选框。我的脑袋疼。

编辑：这是复选框的视图源的当前输出，使用 dcoder 的推荐和 vardump 测试。输入类型="checkbox" name="checkbox[]" id="checkbox[]" value="" />

vardump 测试输出：array(3) { [0]=> string(0) "" [1]=> string(0) "" [2]=> string(0) "" }

编辑：删除功能目前如下：

```
 function submit_delete() {
    if($_POST['delete'] && $_POST['checkbox[]']) { //Check to see if a delete command         has been submitted.
//This will dump your checkbox array to your screen if the submit works.
//You can manually check to see if you're getting the correct array with values
//var_dump($_POST['checkbox']);//Comment this out once it's working.
deleteUploads($_POST['checkbox[]']);
    }
   }

   function deleteUploads ($id_array) {
   if (count($id_array) <= 0) { return; }//bail if its empty
   $delete_success = false;
   foreach ($id_array as &$id) {
   $sql = "DELETE from `upload` where `upload_id`=$id AND `owner_id`=   {$_SESSION['user_id']}";
   $result = $mysqli->query($sql) or die(mysqli_error($mysqli));
   if ($result) { $delete_success = true; }
   }

    if($delete_success) {
   header('Location: newwriter_profile.php');
  } else {
  echo "Error: ".mysqli_error();
  }
  }

//Test deleteUploads (remove once you know the function is working)
//$test_ids = array();
//$test_ids[] = 5;//make sure this id is in the db
//$test_ids[] = 7;//this one too
submit_delete();
deleteUploads($id_array);//should remove ids 10 and 9//

mysqli_close($dbc); 
```

编辑：目前如下：

```
 while ($row = mysqli_fetch_array($r,MYSQLI_ASSOC))
    {
        echo '<tr><td align="left">' .
        $row['title'] . '</td><td align="left">'
        . $row['genre'] . '</td><td align="left">'
        . $row['length'] . '</td><td align="left">'
        . $row['created'] . '</td><td align="left">'
        . $row['views'] . '</td><td align="left">' //. var_dump($row) //dump row value              for testing
        . '<input type="checkbox" name="checkbox[]"'. 'id="checkbox[]"  value=               "'.$row['upload_id'].'"'.' />'.' </td>'. '</tr>'; 
```

注释掉 vardump，表明每个复选框都获得了正确的 upload_id ...

```
 function submit_delete() {
   if(!is_null($_POST['delete']) && !is_null($_POST['checkbox[]'])) { //Check to see if              delete command has been submitted.
//This will dump your checkbox array to your screen if the submit works.
//You can manually check to see if you're getting the correct array with values
//var_dump($_POST['checkbox']);//Comment this out once it's working.
deleteUploads($_POST['checkbox[]']);

   }
   else {
   echo "Error: submit_delete called without valid checkbox delete.";
    }
   }

   function deleteUploads ($id_array) {
    if (count($id_array) <= 0) {   echo "Error: No deletes in id_array!";    var_dump($id_array); return; }//bail if its empty
   $delete_success = false;
   foreach ($id_array as &$id) {
   $sql = "DELETE FROM `upload` WHERE `upload_id`=$id AND `owner_id`=   {$_SESSION['user_id']}";
    $result = $mysqli->query($sql) or die(mysqli_error($mysqli));
   if ($result) { $delete_success = true; }
  }

  if($delete_success) {
 header('Location: newwriter_profile.php');
  } else {
  echo "Error: ".mysqli_error();
 }
}

//Test deleteUploads (remove once you know the function is working)
//$test_ids = array();
//$test_ids[] = 5;//make sure this id is in the db
//$test_ids[] = 7;//this one too
submit_delete();
//deleteUploads($id_array);//should remove ids 10 and 9//

mysqli_close($dbc); 
```

在页面加载时，我在勾选一些框并点击删除后收到错误“submit_delete called...”...我收到同样的错误。摆脱 $_POST['checkbox[]'] 并获得 NULL 值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T05:23:36.247

问题在这里：

```
'<input type="checkbox" name="checkbox[]"'
. 'id="checkbox[]"  value='.$row['$upload_id']
.' />' 
```

将其更改为以下内容：

```
'<input type="checkbox" name="checkbox[]"'
. 'id="checkbox[]"  value="'.$row['upload_id'] . '"'
.' />' 
```

您在`"`值周围缺少引号（），并且您输出了错误的索引。

* * *

此外，请使用[绑定变量](http://us.php.net/manual/en/mysqli.quickstart.prepared-statements.php)将动态元素嵌入到 SQL 查询中，并在将动态输入输出到页面之前对其进行[转义。](http://us.php.net/htmlspecialchars)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T02:24:08.280

我已将您的功能分解为您可以调用的功能。前一个函数将帮助您测试您是否获得了正确的值。您可以使用您知道数据库中的值手动填充数组以检查后一个函数。

```
function submit_delete() {
  if($_POST['delete'] && $_POST['checkbox']) { //Check to see if a delete command has been submitted.
    //This will dump your checkbox array to your screen if the submit works. 
    //You can manually check to see if you're getting the correct array with values
    var_dump($_POST['checkbox']);//Comment this out once it's working. 
    deleteUploads($_POST['checkbox']);
  } else { 
    echo "Error: submit_delete called without valid checkbox delete.";
  }
}

function deleteUploads ($id_array) {
  if (count($id_array) <= 0) { //bail if its empty
    echo "Error: No deletes in id_array!";
    return; 
  }
  $delete_success = false;
  foreach ($id_array as &$id) {
    $sql = "DELETE from `upload` where `upload_id`=$id AND `owner_id`={$_SESSION['user_id']}";
    $result = $mysqli->query($sql) or die(mysqli_error($mysqli));
    if ($result) { $delete_success = true; }
  }

  if($delete_success) {
    header('Location: newwriter_profile.php');
  } else {
    echo "Error: ".mysqli_error();
  }
}

//Test deleteUploads (remove once you know the function is working)
$test_ids = array();
$test_ids[] = 10;//make sure this id is in the db
$test_ids[] = 9;//this one too
deleteUploads($test_ids);//should remove ids 10 and 9 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T01:14:27.653

我解决了这个问题。在用尽所有其他选项后，我在 MySQL 中运行了一个 grant * 权限语句。显然我在创建 Uploads 表之前创建了数据库用户。谢谢大家的帮助

# jsf - 在 JSF 中向 Primefaces 自动完成组件添加自定义属性

> ID：10568633
> 
> 赞同：7
> 
> 时间：2012-05-13T01:12:44.927
> 
> 标签：jsf, jsf-2, primefaces, custom-component

[我在另一个问题](https://stackoverflow.com/questions/10484337/how-to-let-jsf-pass-through-html-attributes)中询问了传递属性，发现我可以为组件创建一个自定义渲染器，`<p:autocomplete>`但问题是我的自定义渲染器将用于我的项目（站点范围）中的每个 p:autocomplete。因此，我选择创建一个自定义组件，该组件扩展`org.primefaces.component.autocomplete.AutoComplete`并向文本框添加必要的属性。

我最初的想法是添加一个构造函数，但它似乎不起作用，因为此时属性映射为空：

```
@FacesComponent("com.mycomponents.SiteSearch")
public class SiteSearch extends AutoComplete {

    public SiteSearch() {
        Map<String,Object> attrs = getAttributes();
        attrs.put("x-webkit-speech", null); 
        attrs.put("x-webkit-grammer", "builtin:search");
        attrs.put("onwebkitspeechchange", "this.form.submit();");
        attrs.put("placeholder", "Enter a Search Term");
    }   
} 
```

我的另一个想法是让这个自定义组件为空（空类），然后指定一个自定义渲染器来扩展`org.primefaces.component.autocomplete.AutoCompleteRenderer`和修改那里的属性。

毕竟，我只需要一种方法将这些属性与这个文本框分开，所以仅仅在 p:autoComplete 上放置一个自定义渲染器是行不通的（除非我可以为这个使用 renderType= 属性p：自动完成？）。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-13T03:13:26.113

如果您需要一个使用不同渲染器的特定组件，`<p:autoComplete>`那么您真的无法创建具有自己的系列和组件类型的自定义组件。您仍然可以扩展 PrimeFaces `AutoComplete`（及其渲染器）以节省一些样板代码。

在自定义组件中，您需要为这些属性提供 getter。您也可以指定设置器，这样您始终可以从视图侧覆盖默认值。这些 getter/setter 应该依次委托给[`StateHelper`](http://docs.oracle.com/javaee/6/api/javax/faces/component/StateHelper.html).

`x-webkit-*`属性只有一点问题。`-`是 Java 标识符中的非法字符。因此，您必须重命名 getter/setter 并稍微更改渲染器，因为标准渲染器依赖于组件属性名称与标签属性名称完全相同。**更新**：我知道`x-webkit-speech`应该按原样呈现（因此，不需要 getter/setter），这`x-webkit-grammer`实际上是一个错字，应该是`x-webkit-grammar`.

以下是`SiteSearch`组件的外观：

```
@FacesComponent(SiteSearch.COMPONENT_TYPE)
public class SiteSearch extends AutoComplete {

    public static final String COMPONENT_FAMILY = "com.example";
    public static final String COMPONENT_TYPE = "com.example.SiteSearch";

    private enum PropertyKeys {
        grammar, onspeechchange, placeholder
    }

    @Override
    public String getFamily() {
        return COMPONENT_FAMILY;
    }

    @Override
    public String getRendererType() {
        return SiteSearchRenderer.RENDERER_TYPE;
    }

    public String getGrammar() {
        return (String) getStateHelper().eval(PropertyKeys.grammar, "builtin:search");
    }

    public void setGrammar(String grammar) {
        getStateHelper().put(PropertyKeys.grammar, grammar);
    }

    public String getOnspeechchange() {
        return (String) getStateHelper().eval(PropertyKeys.onspeechchange, "submit()");
    }

    public void setOnspeechchange(String onspeechchange) {
        getStateHelper().put(PropertyKeys.onspeechchange, onspeechchange);
    }

    public String getPlaceholder() {
        return (String) getStateHelper().eval(PropertyKeys.placeholder, "Enter a Search Term");
    }

    public void setPlaceholder(String placeholder) {
        getStateHelper().put(PropertyKeys.placeholder, placeholder);
    }

} 
```

请注意，getter 具有指定的所有默认值。如果`eval()`返回`null`，则将返回默认值。我还对属性名称进行了一定程度的中和，以便通过相应地修改渲染器，它可以被任何未来的非 webkit 浏览器重用。

以下是上述组件的`SiteSearchRenderer`渲染器外观：

```
@FacesRenderer(
    componentFamily=SiteSearch.COMPONENT_FAMILY,
    rendererType=SiteSearchRenderer.RENDERER_TYPE
)
public class SiteSearchRenderer extends AutoCompleteRenderer {

    public static final String RENDERER_TYPE = "com.example.SiteSearchRenderer";

    @Override
    protected void renderPassThruAttributes(FacesContext facesContext, UIComponent component, String[] attrs) throws IOException {
        ResponseWriter writer = facesContext.getResponseWriter();
        writer.writeAttribute("x-webkit-speech", "x-webkit-speech", null);
        writer.writeAttribute("x-webkit-grammar", component.getAttributes().get("grammar"), "grammar");
        writer.writeAttribute("onwebkitspeechchange", component.getAttributes().get("onspeechchange"), "onspeechchange");
        writer.writeAttribute("placeholder", component.getAttributes().get("placeholder"), "placeholder");
        super.renderPassThruAttributes(facesContext, component, attrs);
    }

} 
```

要在视图中使用它，我们当然需要将其注册为标签。创建一个`/WEB-INF/my.taglib.xml`文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<facelet-taglib
    xmlns="http://java.sun.com/xml/ns/javaee"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-facelettaglibrary_2_0.xsd"
    version="2.0"
>
    <namespace>http://example.com/ui</namespace>

    <tag>
        <tag-name>siteSearch</tag-name>
        <component>
            <component-type>com.example.SiteSearch</component-type>
            <renderer-type>com.example.SiteSearchRenderer</renderer-type>
        </component>
    </tag>
</facelet-taglib> 
```

`<renderer>`请注意，您不再需要`faces-config.xml`此操作。`@FacesRenderer`注释可以在真正的自定义组件上完成它的工作。因此，删除您根据上一个问题创建的`<renderer>`条目。`faces-config.xml`

现在通过以下上下文参数告诉 JSF 你有一个自定义标记库`web.xml`：

```
<context-param>
    <param-name>javax.faces.FACELETS_LIBRARIES</param-name>
    <param-value>/WEB-INF/my.taglib.xml</param-value>
</context-param> 
```

最后，您可以按如下方式使用它：

```
<html ... xmlns:my="http://example.com/ui">
...
<my:siteSearch /> 
```

您甚至可以指定其他属性，这些属性将覆盖组件中设置的默认值：

```
<my:siteSearch grammar="builtin:language" onspeechchange="alert('peek-a-boo')" placeholder="Search" /> 
```

对于属性的 IDE 自动完成，您`<attribute>`需要`<tag>`在`my.taglib.xml`.

# ruby-on-rails - Heroku & Rails - Varnish 只是偶尔缓存

> ID：10568637
> 
> 赞同：3
> 
> 时间：2012-05-13T01:13:57.417
> 
> 标签：ruby-on-rails, ruby-on-rails-3, heroku, varnish, http-caching

我有一个类似于[Heroku & Rails - Varnish HTTP Cache Not Working](https://stackoverflow.com/questions/8663326/heroku-rails-varnish-http-cache-not-working)的问题，但解决方案（等待一段时间，然后一切正常）似乎并不适用 - 我已经进行了几天的设置。

Heroku Google group 上的[这个帖子有一些用户有同样的问题。](http://comments.gmane.org/gmane.comp.lang.ruby.rails.heroku/8229)他们提到缓存所有内容都需要一段时间，但我的理解是，过了一段时间，所有内容都应该被缓存，不是吗？还是仅在流量很大的情况下才适用？

我需要一些关于我应该在哪里寻找/我可以尝试改变什么以使缓存正常工作的建议。

## 我的设置：

我在 Heroku（Rails 3.0.3、Ruby 1.9.2、bamboo-mri-1.9.2）上运行[http://www.swingoutlondon.co.uk](http://www.swingoutlondon.co.uk)，主索引页面执行大量数据库查询以返回什么本质上是一个静态页面——通常需要大约 2-3 秒*（是的，这是我确实需要解决的问题，但我认为清漆缓存是一个快速的胜利）*。

我已经按照[此处](https://devcenter.heroku.com/articles/http-caching)`Cache-Control`所述设置了响应标头，并且确实似乎已在页面上设置了该标头：

```
>> curl -I http://swingoutlondon.co.uk

HTTP/1.1 200 OK
Server: nginx
Date: Sun, 13 May 2012 00:01:05 GMT
Content-Type: text/html; charset=utf-8
Connection: keep-alive
Cache-Control: public, max-age=300
Etag: "2565201f3ae39c6a9a1f6b1fb8bbbe0a"
X-Ua-Compatible: IE=Edge,chrome=1
X-Runtime: 1.699667
Content-Length: 44224
Accept-Ranges: bytes
X-Varnish: 681634826
Age: 0
Via: 1.1 varnish 
```

笔记：`Cache-Control: public, max-age=300`

我假设这`Age: 0`表明它没有检索到缓存副本，并且确实该命令在正常的慢 2-3 秒内返回。

如果继续反复尝试该 curl，我偶尔可以缓存副本（页面在半秒内加载并且`Age`大于 0）。

我必须承认我没有完全理解 HTTP 标头，但一个线索可能是：当`Age`大于 0 时，我得到两个数字`X-Varnish`（在所有其他情况下，我只得到一组）：

```
X-Varnish: 848670407 848650521 
```

这是我检查过的内容：

*   每次的来源都是相同的。
*   我`before_filter`在那个页面上有一个，它将页面上次更新的时间设置为实例变量。
*   有许多 cookie - 据我所知，它们都是由 Google Analytics 或 Twitter 或 Facebook 按钮设置的。

为了更好地衡量，这是我的请求标头：

```
Accept:text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Accept-Charset:ISO-8859-1,utf-8;q=0.7,*;q=0.3
Accept-Encoding:gzip,deflate,sdch
Accept-Language:en-GB,en-US;q=0.8,en;q=0.6
Cache-Control:max-age=0
Connection:keep-alive
Cookie:__utma=264326157.189257391.1336869624.1336869624.1336869624.1; __utmb=264326157.2.10.1336869624; __utmc=264326157; __utmz=264326157.1336869624.1.1.utmcsr=(direct)|utmccn=(direct)|utmcmd=(none)
Host:www.swingoutlondon.co.uk
If-None-Match:"2565201f3ae39c6a9a1f6b1fb8bbbe0a"
User-Agent:Mozilla/5.0 (Macintosh; Intel Mac OS X 10_6_8) AppleWebKit/535.19 (KHTML, like Gecko) Chrome/18.0.1025.168 Safari/535.19 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T17:05:50.173

嗯，事实证明，因为 Heroku 使用多个独立的 Varnish 服务器，并且因为到 Swing Out London 的流量相对较低，所以如果我的 max-age 只有 5 分钟，我不应该期望缓存服务很多页面。将其设置为 20 或 30 分钟会导致更多缓存。

我写了一篇详细的[博客文章](http://duncangmstuart.co.uk/blog/2012/05/14/caching-with-varnish-on-heroku-rails/)来收集我的经验。感谢[Garry Shulter](https://stackoverflow.com/users/6369/garry-shutler)帮助我解决这个问题。

# php - 使用 Confirm() 在 Javascript 中执行 PHP 代码

> ID：10568638
> 
> 赞同：1
> 
> 时间：2012-05-13T01:14:17.610
> 
> 标签：php, javascript, confirm

我正在尝试使用 javascript 的确认功能根据确认点击设置我的 php 变量 $continue。我觉得下面的代码应该可以工作，但 $continue 总是错误的。

```
 <script type="text/javascript">
    <!--
    var answer;
    answer = confirm("Do you want to continue?");
    if (answer) { <?php $continue = true; ?> }
    else { <?php $continue = false; ?> };

    // -->
    </script> 
```

任何帮助都将受到赞赏！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-13T01:17:27.473

php是服务器端，javascript是客户端。

如果您需要通过 javascript 更改某些内容，请使用 ajax 执行此操作。但你需要记住这一点：php 只是编写 html 并处理 http 请求。客户端中所有将更改服务器中某些状态的交互都必须执行 http 请求。

# iphone - 安装失败：OSX 10.6.8 上的 xcode_4.2_and_ios_5_sdk_for_snow_leopard

> ID：10568640
> 
> 赞同：0
> 
> 时间：2012-05-13T01:15:12.953
> 
> 标签：iphone, xcode4.2, osx-snow-leopard

我需要使用 iOS 5 SDK 编译一些应用程序，所以我发现我需要从 xcode 3 升级到 xcode 4。

我的 Mac 在 OSX 10.6.8 上，我从我的 iOS 开发者帐户下载了 xcode_4.2_and_ios_5_sdk_for_snow_leopard.dmg。图像打开正常，检查以确认是否可以安装等，但是当我尝试安装时，我得到了

“安装失败。发生未知的安装错误”

我该如何解决这个问题？是否有要检查的日志文件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-13T21:43:31.097

虽然这听起来很荒谬，但将您的计算机时钟设置为 2012 年 1 月 1 日，它就会安装。

我有完全相同的问题。Xcode 的安装程序存在一些日期/时间问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T15:32:53.197

[在https://superuser.com/questions/410573/cant-install-xcode-on-os-x-snow-leopard](https://superuser.com/questions/410573/cant-install-xcode-on-os-x-snow-leopard)找到了合适的解决方案：

安装这个：[Apple Software Installer Update 1.0。](http://support.apple.com/kb/DL1512)

关于 Apple Software Installer Update 1.0：“此更新解决了可能阻止某些 Apple 软件安装的问题。建议所有运行 Mac OS X 10.6.8 的用户使用此更新。”

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-05-13T01:33:23.933

我不确定您是否可以在 OSX 10.6 上安装 xcode 4：/ 我之前遇到过这个问题，他们说您必须升级到 OSX 10.7 才能安装 xcode 4

# git - git：错误：src refspec master 不匹配任何

> ID：10568641
> 
> 赞同：13
> 
> 时间：2012-05-13T01:16:29.777
> 
> 标签：git

将 git 存储库克隆到目录“hggit”并使用

```
mbm:hggit my name$ git remote add origin git@code.getpantheon.com:"mystringhere" 
```

编辑文件后，我提交了更改（位于子目录中）

```
mbm:handelgroup michaelmausler$ git commit -m "first commit"
[master 5a29bc8] first commit
 1 files changed, 2 insertions(+), 2 deletions(-) 
```

然后我尝试推送文件更改并收到以下错误

```
mbm:hggit myname$ git push origin master
error: src refspec master does not match any.
error: failed to push some refs to 'git@code.getpantheon.com:"mystringhere"' 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-04T09:29:48.943

使用 git branch -m 将本地存储库重命名为要推送到远程的相同名称

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-05-13T09:59:14.267

如果`git status`确实表明您确实有一个活动的主分支（因为您毕竟做了第一次提交），请检查您在定义远程时是否犯了任何错字：请参阅“[在新存储库上推送源主错误](https://stackoverflow.com/a/10080621/6309)”：

```
git remote rm origin 
```

> 然后我重新创建了来源，确保我的来源名称的输入方式与我的来源的拼写方式完全相同。

```
git remote add origin git@.... 
```

您可以简化：

```
git remote set-url origin git@.... 
```

然后可以在本地分支和远程跟踪分支之间建立跟踪链接：

```
git push -u origin master 
```

您还可以将其推送到 origin 上的不同分支：

```
git push -u origin master:anotherBranch 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-08-05T19:51:57.660

您需要确保分支名称在本地和远程相同。`master`所以在远程有分支是不够的。您还需要在本地使用此分支。

# json - 如何在 Windows Phone 上使用 Json.NET 将动态 JSON 递归反序列化为 .NET 对象

> ID：10568642
> 
> 赞同：2
> 
> 时间：2012-05-13T01:16:55.527
> 
> 标签：json, windows-phone-7, json.net, deserialization

我在 Windows Phone 应用程序中接收到一些动态 JSON，我需要能够将其完全反序列化为可以保存到隔离存储中的对象。

对于此应用程序，最好避免被锁定在类结构中，因为我无法准确预测将从服务器返回的 JSON 类型。

这是我如何使用 Json.NET 反序列化的示例：

```
JsonConvert.DeserializeObject<Dictionary<string, object>>(jsonString); 
```

在此示例中，字典中保存的值可能是列表或字典或字符串。

这种方法的问题是 JsonConvert.DeserializeObject(...) 方法似乎只是执行浅转换。嵌套对象的类型为 JArray 或 JObject。当我尝试保存这些对象时，会引发以下异常：

“不应使用数据协定名称 ArrayOfJTokenNewtonsoft.Json.Linq 键入 Newtonsoft.Json.Linq.JArray。将任何静态未知的类型添加到已知类型列表中 - 例如，通过使用 KnownTypeAttribute 属性或将它们添加到列表中传递给 DataContractSerializer 的已知类型。”

我在这里有什么明显的遗漏吗？

在 Android 和 iOS 平台上，使用 3rd 方 JSON 库实现可以轻松完成。

这是一些 JSON 示例，但请记住，我无法确定我将提前解码的 JSON 的确切结构：

```
{
    "glossary": {
        "title": "example glossary",
        "GlossDiv": {
            "title": "S",
            "GlossList": {
                "GlossEntry": {
                    "ID": "SGML",
                    "SortAs": "SGML",
                    "GlossTerm": "Standard Generalized Markup Language",
                    "Acronym": "SGML",
                    "Abbrev": "ISO 8879:1986",
                    "GlossDef": {
                        "para": "A meta-markup language, used to create markup languages such as DocBook.",
                        "GlossSeeAlso": ["GML", "XML"]
                    },
                    "GlossSee": "markup"
                }
            }
        }
    }
} 
```

# php - Doxygen 正在使用 php __construct() 跳过文件

> ID：10568646
> 
> 赞同：2
> 
> 时间：2012-05-13T01:17:45.433
> 
> 标签：php, codeigniter, doxygen

我正在使用 codeigniter 框架开发一个网站。为了记录它，我安装了 doxygen。当 doxygen 遇到具有以下结构的文件时，会发生一些奇怪的事情：

```
<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');
/**
 * @class
 * @brief The class brief 
 */
  class Catalogo extends CI_Controller {    
    public function __construct(){         
        parent::__construct();
        $this->load->model('catalogomodel');
        $this->load->library('img');
   }
    public function foo(){
       ..some code..
    }
/* End of file catalogo.php */
/* Location: ./application/controllers/catalogo.php */ 
```

这是唯一被跳过的文件，codeigniter 中具有通常结构的其他文件按应有的方式记录在案。

```
<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');
/**
 * @class
 * @brief The class brief 
 */
  class Catalogo extends CI_Controller {
    public function index(){
      ...some code to load models, libraries and views ...
    }
   /* End of file catalogo.php */
   /* Location: ./application/controllers/catalogo.php */ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-13T05:20:10.910

我不确定您提供的示例与您的实际应用程序的匹配程度如何，但对于上面的原始示例代码：

您的类声明似乎没有关闭（缺少`}`）。这将阻止 doxygen 解析类声明，并将被跳过。添加关闭`}`允许 doxygen 完全解析类，它应该包含在文档中，但是不会出现该类或其成员函数的文档，并且`__construct`不会被列为成员函数。

进行此更改后，Doxygen 1.8.0 在处理内容时会报告两个警告：

```
catalogo.php:6: warning: Compound Catalogo is not documented.
catalogo.php:13: warning: Member foo() (function) of class Catalogo is not documented. 
```

第一个与空`@class`标记有关。Doxygen 期望`@class`后面紧跟注释适用的类名，并且通常在 doxygen 不位于它所描述的构造旁边时使用。在这种情况下，`@class`可以删除，因为`Catalogo`类声明紧跟在它后面。或者，您也可以`@class Catalogo`明确指定。进行此更改将使第一个警告静音，并导致文档`Catalogo`出现在 doxygen 输出中，但是`__construct`仍然不存在，并且`foo`不会链接到详细描述。

要解决第二个警告，您需要为 提供文档`foo`，例如：

```
/**
 * Documentation for foo.
 */
public function foo(){
} 
```

此更改将导致`foo`出现在文档中，并带有指向其详细说明的链接。`__construct`仍将不存在，但为其添加类似的文档：

```
/**
 * Documentation for __construct.
 */
public function __construct() {         
} 
```

导致这两个函数出现，并带有指向其详细描述的链接。这一切都假定默认的 doxygen 配置 ( `doxygen -g`) 和 Doxygen 1.8.0。我测试的最终代码（并且看起来工作正常）是：

```
<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');
/**
 * @brief The class brief 
 */
class Catalogo extends CI_Controller {
    /**
     * Documentation for __construct.
     */
    public function __construct(){         
        parent::__construct();
        $this->load->model('catalogomodel');
        $this->load->library('img');
    }

    /**
     * Documentation for foo.
     */
    public function foo(){
        ..some code..
    }
}
/* End of file catalogo.php */
/* Location: ./application/controllers/catalogo.php */ 
```

# android - OnClickListener 错误

> ID：10568648
> 
> 赞同：0
> 
> 时间：2012-05-13T01:18:11.470
> 
> 标签：android

我是 Android 新手，并尝试使用 eclipse 运行 SDK 的示例代码。我创建了项目（通过文件 → 新建 → 项目 → Android → Android 示例项目），但是当我运行该项目时，它显示所有示例项目的以下错误：

> 此行有多个标记
> 
> *   new View.OnClickListener(){} 类型的方法 onClick(View) 必须覆盖超类方法
> *   实现 android.view.View.OnClickListener.onClick

然后我参考了这个论坛。在这里，他们提到了“编译器合规级别”。但我的编译器合规级别为 1.7，我使用的是 Android 4.0.3，API 级别为 15。

所以请帮我纠正这个错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T01:20:14.940

确保在您的 OnClick 方法上方有注释 @Override 像这样

```
@Override
public void OnClick(View v) {
//Code goes here
} 
```

通过使用@Override，Java 知道您没有创建新方法，在这种情况下，您让 Java 知道您正在使用该侦听器。

如果您已经这样做了，请查看此网站[http://androidcodemonkey.blogspot.com/2011/10/how-to-solve-must-override-superclass.html](http://androidcodemonkey.blogspot.com/2011/10/how-to-solve-must-override-superclass.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T01:29:35.880

删除 @Override 注释标记。

对于某种情况。日食无法识别。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-02T06:15:48.210

我只是遇到了同样的问题。我通过更改代码来修复它

```
Button button = (Button) findViewById(R.id.button1);
button.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
            // TODO Auto-generated method stub

        }
    }); 
```

使用**View** .OnClickListener(){} 而不仅仅是 OnClickListener(){};
我认为这可能是由于存在各种 OnClickListener。可能我们需要指定哪个是相关的。如果有人知道，我真的很想知道真正的原因。

# java - 如何允许用户使用 JComboBox 在 JTextPane 中更改其字体？

> ID：10568649
> 
> 赞同：3
> 
> 时间：2012-05-13T01:18:55.040
> 
> 标签：java, swing, fonts, jcombobox, jtextpane

当涉及到 JTextPanes 的主题时，我发现 Internet 上缺少大量有用的文档/教程。我正在尝试做一个简单的文本处理器，我希望它能够从 JComboBox 中选择一个字体系列，该字体系列根据用户在其系统上安装的字体自行填充。但是，无论我尝试什么实验，我都无法弄清楚如何让它发挥作用。

我所拥有的是一个建立在 JTextPane 之上的工具栏类。目前，它有一堆样式按钮，用于设置对齐和粗体、斜体和下划线。

这是我的代码：

```
/**
* The StyleBar is used to customize styles in a Styled Document. It will take a
* JTextPane as an argument for its constructor and then all actions to be taken
* will affect the text in it.
*
* @author Andrew
*/
public class StyleBar extends JToolBar {

    private JLabel fontLbl;
    private JComboBox fontBox;

        // ...Irrelevant stuff to the problem at hand.

    /**
    * The initEvents method is used to initialize the necessary events for the
    * tool bar to actually do its job. It establishes the focus listener to the
    * buttons on the bar, and gives each one its individual functionality. It 
    * also establishes the Font Selection interface.
    */
    public void initEvents() {
        //For each item in the tool bar, add the focus listener as well as the
        //formatting listeners:
        boldFormat.addActionListener(new StyledEditorKit.BoldAction()); //boldFormat is
        boldFormat.addActionListener(resetFocus);                       //a JButton

        //Ditto for my italicsFormat and underlineFormat button(s) in the toolbar

        leftAlign.addActionListener(new StyledEditorKit.AlignmentAction(null,
                StyleConstants.ALIGN_LEFT));
        leftAlign.addActionListener(resetFocus);    //This listener just resets focus
                                                    //back onto the TextPane.

        //Ditto for my right and centerAlign buttons

        //Set up the Font list, and add a listener to the combo box
        buildFontMenu();
    }

    /**
    * The buildFontMenu detects all of the SYstem's available fonts and adds 
    * them to the Font Selection box.
    */
    public void buildFontMenu(){
        GraphicsEnvironment ge = 
                GraphicsEnvironment.getLocalGraphicsEnvironment();
        final String[] fontNames = ge.getAvailableFontFamilyNames();
        for (int i = 0; i < fontNames.length; i++){
            //What do I do here to take the entry at String[i] and make it so that when
            //the user selects it it sets the font Family in a similar way to that of
            //pressing the boldFormat button or the leftAlign button?
        }
    }

    //Everything else is irrelevant 
```

所以总结一下我的问题：我不知道如何正确地将侦听器设置为 ComboBox 以便 a) 它对所选的单个字体敏感 b) 以某种方式使用 StyledEditorKit.FontFamilyAction 让生活变得轻松？

斜线，如果我以错误的方式处理这个问题，我很想听听正确的方式。正如我所说，我在互联网上的消息来源对这个问题不是很清楚。

非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-13T01:25:01.640

[`StyledEditorTest`](https://stackoverflow.com/a/8534162/230513)将`Action`s 放在 a 中`JToolBar`，但想法是一样的。另请参阅[此处](https://stackoverflow.com/a/10160836/230513)`HTMLDocumentEditor`提到的 Charles Bell 的。例如，

```
bar.add(new StyledEditorKit.FontFamilyAction("Serif", Font.SERIF));
bar.add(new StyledEditorKit.FontFamilyAction("SansSerif", Font.SANS_SERIF)); 
```

附录：在使用的过程中`JComboBox`，可以将事件*转发*给对应`StyledEditorKit` `Action`的，默认对当前选择进行操作。

```
JComboBox combo = new JComboBox();
combo.addItem("Serif");
combo.addItem("Sans");
combo.addActionListener(new ActionListener() {

    Action serif = new StyledEditorKit.FontFamilyAction("Serif", Font.SERIF);
    Action sans = new StyledEditorKit.FontFamilyAction("Sans", Font.SANS_SERIF);

    @Override
    public void actionPerformed(ActionEvent e) {
        if ("Sans".equals(e.getActionCommand())) {
            sans.actionPerformed(e);
        } else {
            serif.actionPerformed(e);
        }
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-22T04:13:51.043

这可能有点晚了，但我发现自己陷入了类似的问题，虽然前面的答案确实有帮助，但当你想使用计算机上所有可用的字体时，这里有一个更完整的答案。

其中“fonts”是一个字符串数组，其中包含要在程序中使用的所有所需字体

```
 final JComboBox jcb = new JComboBox(fonts);

    final Action [] actions = new Action[fonts.length];

    for (int i = 0; i < actions.length; i++)
    {
        actions[i] = new StyledEditorKit.FontFamilyAction(fonts[i], fonts[i]);
    }

    jcb.addActionListener(new ActionListener()
        {
            public void actionPerformed(ActionEvent event) 
            {
                for (int i = 0; i < actions.length; i++)
                {
                    if (fonts[i].equals((String)jcb.getSelectedItem()))
                    {
                        actions[i].actionPerformed(event);
                        break;
                    }
                }
            }
        }); 
```

# ruby-on-rails - 启动调试器时 RubyMine 挂起

> ID：10568651
> 
> 赞同：0
> 
> 时间：2012-05-13T01:19:09.790
> 
> 标签：ruby-on-rails, remote-debugging, rubymine

我正在运行 OSC Lion、RubyMine 4.0.2、Ruby 1.9.3p125 和 Rails 3.2.3。

在 RubyMine 中调试对我来说一直很好。但是今天，我的服务器在使用调试器时崩溃了（当它遇到异常断点时），现在我无法再调试了。当我单击按钮启动调试器时，会出现一个名为“Connecting to the debugger”的模式弹出窗口，其中包含文本““Connecting to debugger using 10 sec timeout, please wait...”和一个进度条。大约之后10 秒进度条 100% 完成，但弹出窗口仍然显示，有效地挂起 RubyMine。

应用程序似乎没有启动（它不响应请求）。调试控制台不显示。development.log 文件中没有新条目。摆脱 RubyMine 的唯一方法是强制退出它。

我尝试重新启动计算机、删除 RubyMine 缓存文件、重新安装 RubyMine 并重新安装调试 gem（ruby-debug-base19x、ruby-debug-ide）。没有任何效果。

我仍然能够在没有调试器的情况下从 RubyMine 运行应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T03:32:37.773

我最终找到了一个解决方案：从 git 存储库中重新克隆我的项目的新副本。可以毫无问题地调试副本。

似乎导致问题的原因在于项目本身。我无法想象问题可能是什么。

# python - Python 兼容性：捕获异常

> ID：10568653
> 
> 赞同：4
> 
> 时间：2012-05-13T01:20:09.050
> 
> 标签：python, exception-handling, python-3.x, compatibility, python-2.5

我有一个应用程序，它需要在所有“现代”Python 版本中运行，这意味着`2.5`- `3.2`。我不想要两个代码库，所以`2to3`不是一个选择。

考虑这样的事情：

```
def func(input):
    if input != 'xyz':
        raise MyException(some_function(input))
    return some_other_function(input) 
```

如何捕获此异常以访问异常对象？ `except MyException, e:`在 Python 3 中`except MyException as e:`无效，在 python 2.5 中无效。

显然，返回异常对象是可能的，但我希望，我不必这样做。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-13T01:37:40.400

[Py3k 文档](http://docs.python.org/py3k/howto/pyporting.html#capturing-the-currently-raised-exception)中解决了这个问题。解决方案是检查[sys.exc_info()](http://docs.python.org/library/sys.html#sys.exc_info)：

```
from __future__ import print_function

try:
    raise Exception()
except Exception:
    import sys
    print(sys.exc_info()) # => (<type 'exceptions.Exception'>, Exception(), <traceback object at 0x101c39830>) 
    exc = sys.exc_info()[1]
    print(type(exc)) # => <type 'exceptions.Exception'>
    print([a for a in dir(exc) if not a.startswith('__')]) # => ['args', 'message'] 
```

# http - 无法通过 Squid 代理测试基于 HTTP PUT 的文件上传

> ID：10568655
> 
> 赞同：3
> 
> 时间：2012-05-13T01:20:28.770
> 
> 标签：http, upload, proxy, squid, put

我可以使用 Curl 将文件上传到我的 Apache Web 服务器：

```
echo "[$(date)] file contents." | curl -T - http://WEB-SERVER/upload/sample.put 
```

但是，如果我在两者之间放置一个 Squid 代理服务器，那么我将无法：

```
echo "[$(date)] file contents." | curl -x http://SQUID-PROXY:3128 -T - http://WEB-SERVER/upload/sample.put 
```

curl报如下错误：

*注意：这个错误响应是 HTML 格式的，但为了便于阅读，我删除了标签。*

```
ERROR: The requested URL could not be retrieved

ERROR
The requested URL could not be retrieved

While trying to retrieve the URL:
http://WEB-SERVER/upload/sample.put

The following error was encountered:
Unsupported Request Method and Protocol

Squid does not support all request methods for all access protocols.
For example, you can not POST a Gopher request.
Your cache administrator is root. 
```

我`squid.conf`似乎没有任何基于`src`或`dst`IP 地址、或`protocol`、或 HTTP禁止的 ACL/规则`method`...**因为我可以`HTTP POST`在同一个客户端和 Web 服务器之间使用相同的代理坐在中间。**

在失败的`HTTP PUT`情况下，为了查看实际发生的请求和响应流量，我`netcat`在 Curl 和 Squid 之间放置了一个进程，这就是我所看到的：

**要求：**

```
PUT http://WEB-SERVER/upload/sample.put HTTP/1.1
User-Agent: curl/7.15.5 (i686-redhat-linux-gnu) libcurl/7.15.5 OpenSSL/0.9.8b zlib/1.2.3 libidn/0.6.5
Host: WEB-SERVER
Pragma: no-cache
Accept: */*
Proxy-Connection: Keep-Alive
Transfer-Encoding: chunked
Expect: 100-continue 
```

**回复：**

```
HTTP/1.0 501 Not Implemented
Server: squid/2.6.STABLE21
Date: Sun, 13 May 2012 02:11:39 GMT
Content-Type: text/html
Content-Length: 1078
Expires: Sun, 13 May 2012 02:11:39 GMT
X-Squid-Error: ERR_UNSUP_REQ 0
X-Cache: MISS from SQUID-PROXY-FQDN
X-Cache-Lookup: NONE from SQUID-PROXY-FQDN:3128
Via: 1.0 SQUID-PROXY-FQDN:3128 (squid/2.6.STABLE21)
Proxy-Connection: close

<SNIPPED the HTML error response already shown earlier above> 
```

*注意：出于可读性原因，我在整个过程中都匿名了 IP 地址和服务器名称。*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T09:16:09.780

感谢 Amos Jeffries 在[squid-users forum](http://squid-web-proxy-cache.1019090.n4.nabble.com/Unable-to-test-HTTP-PUT-based-file-upload-via-Squid-Proxy-td4634404.html)上回答这个问题。问题基本上是 3.1 版之前的 Squid 没有实现 HTTP 1.1，因此拒绝了分块传输编码。

# python - 将变量设置为返回列表，似乎没有做任何事情

> ID：10568656
> 
> 赞同：0
> 
> 时间：2012-05-13T01:20:31.877
> 
> 标签：python

将变量设置为从包含变量作为返回列表的函数返回的列表似乎没有给我任何输出：

```
def get_wordlist(num, s):
    items_in_wordlist = database_get(num)
    print "Trying to get wordlist..."
    print items_in_wordlist
    items = []
    if s == 0:
        for item in items_in_wordlist:
            items.append((item[1]).decode("hex"))
        return items
    elif s == 1:
        for item in items_in_wordlist:
            items.append((item[2]).decode("hex"))
        return items

def get_wordlist_set(self, speed):
    global main_wordlist, main_wordlist_e
    print "Getting wordlist set..."
    #try:
    main_wordlist   = get_wordlist(speed, 1)
    print "Check (1) - Passed"
    main_wordlist_e = get_wordlist(speed, 0)
    print "Check (2) - Passed"
    return main_wordlist 
```

“检查 (*) - Passed”应打印到屏幕上。但是，我得到的只是“设置单词列表......”关于我做错了什么有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-13T01:44:40.787

正如 sandinmyjoints 所说，如果你看到

`Getting wordlist set...`

但不是

`Trying to get wordlist...`

看起来像

```
database_get(num) 
```

没有回来。也可能是相同的函数名称在其他地方用于不同的函数。在调用*之前*打印可能是个好主意`database_get`

# java - Java Sockets - 需要帮助更好地理解它们

> ID：10568658
> 
> 赞同：1
> 
> 时间：2012-05-13T01:20:56.420
> 
> 标签：java, sockets, networking, client-server

好的，所以我已经阅读了 Oracal 网站上的内容以及该网站上的一些问题。我仍然很难理解有关套接字的一些事情，所以我会看看这里是否有人可以花时间向我缓慢的大脑解释它。我正在做的是建立一个聊天客户端和聊天服务器（一举学习摇摆和套接字）。尽管我看过所有的例子，但我仍然不能安静地理解它们是如何工作的。我知道 1 个带有输入流的套接字和 1 个带有输出流的套接字是如何工作的，但除此之外，我很难理解，因为这是我找到的大多数资源所解释的。这是我关于此的一系列问题。

1.  如果我希望能够同时处理客户端的输入和输出，我会怎么做？等待out，那么如果服务器有变化切换到输入流并得到变化，然后切换回输出流？或者我可以同时运行输入和输出流吗？
2.  假设服务器必须同时处理多个客户端。我必须为每个客户制作一个套接字，对吗？你会建议什么是处理这个问题的好方法？
3.  假设客户端想要更改其当前套接字的 IP 地址或端口并连接到不同的服务器。我会创建一个新的套接字，还是有办法改变当前的？

这是我的主要问题。如果我能理解这么多，我很确定我可以自己弄清楚我需要的其余部分。

.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-13T01:33:19.703

这是一个很好的套接字指南。它本身不是“Java 套接字”，但我认为您会发现它非常有用：

[Beej 的网络编程指南](http://beej.us/guide/bgnet/)

要回答您的问题：

> 问：如果我希望能够同时处理客户端的输入和输出，我会怎么做？

A：你不需要做任何特别的事情。套接字自动是“双模式”的：您可以随时读取（如果有任何数据）或写入。

> 问：假设服务器必须同时处理多个客户端。我必须为每个客户制作一个套接字，对吗？

答：实际上，系统会为每个新的客户端连接提供*套接字*。你不会“创造”一个——它是给你的。

每个新连接都是一个新套接字。

通常，您的服务器会生成一个新线程来服务每个新的客户端连接。

> 问：假设客户端想要更改其当前套接字的 IP 地址或端口并连接到不同的服务器。我会创建一个新的套接字，还是有办法改变当前的？

A：客户端会终止现有的连接并打开一个新的连接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-13T01:33:43.227

> 1.- 如果我希望能够同时处理客户端的输入和输出，我会怎么做？等待out，那么如果服务器有变化切换到输入流并得到变化，然后切换回输出流？或者我可以同时运行输入和输出流吗？

这取决于您的协议，如果您的客户端启动连接，那么您的服务器在进入输出流之前等待输入并发送一些东西。每个连接，无论是 tcp 连接还是处理文件，都有一个输入流和一个输出流。

> 2.- 假设服务器必须同时处理多个客户端。我必须为每个客户制作一个套接字，对吗？你会建议什么是处理这个问题的好方法？

对此有不同的策略，包括多线程，因此现在专注于流。或者将其与一台服务器和一台客户端保持一致。

> 3.- 假设客户端想要更改其当前套接字的 IP 地址或端口并连接到不同的服务器。我会创建一个新的套接字，还是有办法改变当前的？

是的，套接字的定义是 IP 地址通过特定端口建立的连接，如果其中任何更改都需要新的套接字。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-13T01:35:13.990

我会尽力在这里做到最好，但我真的不认为这是提出这类问题的地方：

首先，您需要了解套接字是底层操作系统套接字（unix 套接字、win socks 等）的抽象。

这些类型的套接字用于模拟传输层的面向连接的服务（查看 OSI 模型）。所以这意味着套接字为您提供来自客户端的字节流和发送到客户端的字节流，因此回答您的第一个问题，这些流是独立的。当然，你负责设计你在这些流上发言的协议。

要回答您的第二个问题，您需要知道 TCP 连接是如何工作的，基本上您的服务器正在一个端口中侦听一个或多个网络接口（端口是 TCP 寻址机制），并且可以处理可配置的传入同时连接的积压。所以答案是，对于任何传入连接，服务器上的新线程通常会从线程池中创建或获取。

要回答您的第三个问题，主机之间会建立连接，因此如果您需要更改其中任何一个，则需要创建一个新连接。

希望这可以帮助。

干杯

# actionscript-3 - ActionScript3：用于检查字符数的密码正则表达式

> ID：10568660
> 
> 赞同：1
> 
> 时间：2012-05-13T01:20:59.790
> 
> 标签：actionscript-3, apache-flex, actionscript, flex4

我正在尝试在 AS3/Flex4.6 中使用正则表达式来检查满足以下条件的密码：

1.  6 到 15 个字符之间
2.  必须至少包含一个小写字母
3.  必须包含至少一个大写字母
4.  必须包含至少一个数字（例如 0-9）

到目前为止，这是我正在使用的：

```
<mx:RegExpValidator source="{loginPwd}" property="text" 
     expression="^\w*(?=\w*\d)(?=\w*[a-z])(?=\w*[A-Z])\w*$"  
     valid="rh(event);" invalid="rh(event);"/> 
```

除了捕获 6 到 15 个字符的密码长度之外，它可以做所有事情。我可以使用 a`StringValidator`来做到这一点，但我宁愿`RegExpValidator`两者都做（这样我就不会出现为一个 TextInput 字段显示多个错误消息的情况，例如每个验证器一个）。

我尝试了以下正则表达式，但是在它们编译时，它们不起作用（例如，`aaAA33`不通过）。

```
expression="((?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{6,15})"
expression="(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{6,15}"
expression="(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{6,15}^$"
expression="^.*(?=.{6,15})(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).*$" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T07:57:30.303

我在 mac 上用我的 Regex 测试工具尝试了你的表达

```
 "((?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{6,15})" - works
 "^.*(?=.{6,15})(?=.*\\d)(?=.*[a-z])(?=.*[A-Z]).*$" - works 
```

按预期工作。您是否尝试将字符串与正常的动作脚本正则表达式模式匹配？我做到了。

```
public function runTest():void
{
    var testArray:Array = ["aaBB99","aaaaa99","AAAAAAA","A3b","A3bdsdsdsd"];
    var reg:RegExp = new RegExp("^.*(?=.{6,15})(?=.*\\d)(?=.*[a-z])(?=.*[A-Z]).*$");

    for each ( var value:String in testArray )
    {
        trace(value.match(reg));
    }
} 
```

输出是：

```
[trace] aaBB99
[trace] null
[trace] null
[trace] null
[trace] A3bdsdsdsd 
```

看这里没问题

# ios - 为什么 UIWebView 中的 Google 搜索结果没有触发 webViewDidFinishLoad？

> ID：10568661
> 
> 赞同：3
> 
> 时间：2012-05-13T01:21:17.757
> 
> 标签：ios, uiwebview

毫无疑问，这对于网页来说是一个更普遍的问题，但它很容易在 Google 内容中得到证明。

在 Google 主页上输入某些搜索条件时，结果不会触发**webViewDidFinishLoad**方法。当彩色 Google 徽标被链接到功能页面的一些艺术作品替换时，也会出现同样的问题。

我怀疑由于某些 javascript 或 ajax 代码而导致页面没有完全加载，那么有没有办法检测到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-13T01:33:17.643

这是因为 Google 正在使用 AJAX 来执行此操作，当有效地将新资源加载到 webview 中时会调用 webViewDidFinishLoad 委托方法 - 相当于浏览器中的页面加载，因为 Google 正在 AJAX 处理这些东西，它不会导致该方法被触发。

没有任何方法可以检测页面的某些部分何时加载（javascript、样式表或 ajax 响应）。

您可以做的一件事是在 web 视图上执行一行 javascript，告诉您页面的高度，通过等待页面的高度发生变化，您可以知道何时发生结果，您将不得不设计其他一些 - 修改搜索查询时当然会进行更智能的检查，但我的想法适用于最初的谷歌徽标屏幕到第一个结果页面。

每隔几秒执行一次 JS 就足够了。

希望有帮助

# c - 具有长位移的 mpi scatterv 错误

> ID：10568662
> 
> 赞同：2
> 
> 时间：2012-05-13T01:21:31.897
> 
> 标签：c, mpi

我正在使用 MPI_Scatterv 分散一个非常大的数组：

```
MPI_Scatterv(list, counts, displacements, MPI_LONG, pSubList, counts[rank], MPI_LONG, MASTER, MPI_COMM_WORLD); 
```

并且我已经声明了变量**计数**和**位移**（int 类型是不够的），但是，MPI_Scatterv 只接受用于计数和位移的 int 变量。

关于如何以某种方式解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T08:04:50.860

您不能用 long 代替 int，至少在大多数 MPI 2.2 实现中是这样。即使您按照 Greg 的建议创建用户定义的数据类型，您也可能（并且大多数情况下）会遇到实现限制，例如使用整数在内部表示偏移量。MPI 3.0 草案专门解决了这个问题，并要求在 C 和 Fortran 绑定中偏移和计数参数都是长（64 位）类型。

在 MPI 3.0 成为标准并且符合标准的实现出来之前，我会坚持使用一些子通信方案，比如将数据分布在几轮中，并将多个分散的数据分散到等级子集。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-13T01:44:18.553

为什么不分发你的散点图，这样 int 类型就足够了？

您可以将 MPI 进程视为树的节点运行。并让中间树节点有自己的相应子树的分散/聚集。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-13T02:12:33.770

您可以创建自定义 MPI 数据类型来表示 LONG 块。位移和计数将是该块大小的倍数。

# jquery - 与未在实时站点上执行的 jQuery 脚本冲突

> ID：10568663
> 
> 赞同：2
> 
> 时间：2012-05-13T01:21:39.910
> 
> 标签：jquery

问题可能是因为 .on() 或其他脚本冲突。我的想法为零。

工作：这是 jsFiddles 上的脚本[http://jsfiddle.net/ZtpEU/70/](http://jsfiddle.net/ZtpEU/70/)
不工作：这是实时代码：[http ://designobvio.us/test/middle.php](http://designobvio.us/test/middle.php)

这两个是相同的代码；但是，在实时站点上，页面底部的 jquery 脚本不会执行。有谁知道冲突是在哪里制造的？因为我在创建脚本后从小提琴中逐字复制了脚本。

HTML

```
<ul id="videos">
    <li><a href="#">shit swag people say</a></li>
    <li><a href="#">imdabest</a></li>
    <li><a href="#">jersey shore audition</a></li>
    <li><a href="#">rifle burs</a></li>
    <li><a href="#">mvc3: best combos dat ass</a></li>
    <li><a href="#">snacks</a></li>
</ul>​ 
```

CSS

```
ul#videos > li > a
{
    opacity: .5;
    color: #222;
    text-decoration: none;
}

ul#videos:hover > li > a
{
    opacity: .3;
    text-shadow: 0px 0px 6px #bbb;
    color: #bbb;
} 

ul#videos > li:hover > a
{
    opacity: 1;
    text-shadow: none;
    color: #222;
} 
```

脚本

```
$("ul#videos li a").on('mouseenter', function() {
    $(this).animate({"padding-left": "50px"}, "normal");
});

$("ul#videos li a").on('mouseleave', function() {
    $(this).stop(true).animate({"padding-left": "0px"}, "slow");
});​ 
```

​</p>

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T01:36:25.613

看起来您在实时版本的第 59 行有一个不可打印的字符。它就在分号之后但在换行符之前。将您的 JS 复制/粘贴到 jsbeautifier 或其他东西中以对其进行清理。这为我解决了这个问题：

```
$(document).ready(function () {
    alert('hello');
    $("ul#videos li a").on('mouseenter', function () {
        $(this).animate({
            "padding-left": "50px"
        }, "normal");
    });
    $("ul#videos li a").on('mouseleave', function () {
        $(this).stop(true).animate({
            "padding-left": "0px"
        }, "slow");
    });
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-13T01:38:41.933

在倒数第二个之后有一个奇怪的空白字符

```
}); 
```

尝试删除该行并重新创建。

你应该使用像 jslint 这样的东西来捕捉这样的东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-13T01:42:51.823

刚刚意识到你的`.on()`函数应该这样重写：

```
$("#videos li").on({

    mouseenter: function() {
         $(this).animate({"padding-left": "50px"}, "normal");
    },

    mouseleave: function() {
         $(this).stop(true).animate({"padding-left": "0px"}, "slow");

}}, 'a'); 
```

这样，您的标记只有一个处理程序，如果您想稍后添加其他事件，只需将它们添加到列表中即可。

**这是它的[jsfiddle](http://jsfiddle.net/ZtpEU/71/)**

# mysql - PhpMyAdmin 数据导入性能问题

> ID：10568664
> 
> 赞同：1
> 
> 时间：2012-05-13T01:21:57.450
> 
> 标签：mysql, performance, phpmyadmin, file-import

最初，我的问题与 PhpMyAdmin 的 SQL 部分无法正常工作有关。正如评论中所建议的，我意识到这是无法处理的输入量。但是，这并没有为我提供一个有效的解决方案来处理具有（在我的情况下 - 35,000 条记录行）格式为（CSV）的文件：

```
...
20120509,126,1590.6,0
20120509,127,1590.7,1
20120509,129,1590.7,6
... 
```

PhpMyadmin 中的 Import 选项就像 SQL 部分中的基本复制粘贴输入一样苦苦挣扎。这一次，和以前一样，需要 5 分钟，直到调用最大执行时间，然后停止。有趣的是，它在表中添加了 6-7 千条记录。所以这意味着输入实际上通过并且几乎成功地做到了。我还尝试将文件中的数据量减半。然而一切都没有改变。

现在显然有些不对劲。当简单的数据导入不起作用时，不得不使用 php 脚本中的数据非常烦人。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-13T04:45:35.620

更改您的 php 上传最大大小。

你知道你的 php.ini 文件在哪里吗？

首先，尝试将此文件放入您的 Web 根目录：

```
phpinfo.php 
```

（见[http://php.net/manual/en/function.phpinfo.php](http://php.net/manual/en/function.phpinfo.php)）

包含：

```
<?php

phpinfo();

?> 
```

然后导航到[http://www.yoursite.com/phpinfo.php](http://www.yoursite.com/phpinfo.php)

寻找“php.ini”。

要上传大文件，您需要 max_execution_time、post_max_size、upload_max_filesize

另外，您知道您的 error.log 文件在哪里吗？它有望为您提供有关出了什么问题的线索。

编辑：

这是我用于文件导入的查询：

```
$query = "LOAD DATA LOCAL INFILE '$file_name' INTO TABLE `$table_name` FIELDS TERMINATED BY ',' OPTIONALLY
    ENCLOSED BY '\"' LINES TERMINATED BY '$nl'"; 
```

其中 $file_name 是 php 全局变量 $_FILES 中的临时文件名，$table_name 是已经准备好导入的表，$nl 是 csv 行结尾的变量（默认为 windows 行结尾，但我可以选择 linux 行结局）。

另一件事是我的脚本中的表（$table_name）是通过首先扫描csv以确定列类型预先准备好的。在确定适当的列类型后，它会创建 MySQL 表来接收数据。

我建议您先尝试创建 MySQL 表定义，以匹配文件中的内容（数据类型、字符长度等）。然后尝试上面的查询，看看它运行的速度有多快。我不知道 MySQL 表定义对速度的影响有多大。

此外，在加载数据之前，我没有在表中定义索引。索引会减慢数据加载速度。

# iphone - iphone - 消息发送到块中的已释放实例

> ID：10568665
> 
> 赞同：0
> 
> 时间：2012-05-13T01:22:10.180
> 
> 标签：iphone, autorelease

我有这个名为 mySegmented 的属性，声明如下

```
.h
@property (retain)  UISegmentedControl *mySegmented;

.m
@synthesize mySegmented = _mySegmented; 
```

然后，它是这样创建的：

```
self.mySegmented = [self createSegmented];
// createSegmented creates an autoreleased segmented control 
```

我的应用程序有 3 个不同的分段控件。在给定的时间只出现一个。在我的应用程序的某个时刻，我必须隐藏一个特定的分段控件，所以，我要做的是构建所有分段控件的数组并迭代......这是在一个块内。

```
[UIView animateWithDuration:0.8

             animations:^{

                 NSArray *list = [NSArray arrayWithObjects:
                                  self.mySegmented1,
                                  self.mySegmented2,
                                  self.mySegmented3,
                                  nil];

                 for (UISegmentedControl *oneSeg in list) {
                     [oneSeg setAlpha:0.0f];
                 }

             }]; 
```

发生的情况是：一段时间后，应用程序在尝试构建此数组时崩溃。我想其中一个分段控件以某种方式被解除分配。我可以在代码中看到没有释放。

我的问题是：这个正在创建的数组是自动释放的。当块完成动画时会发生什么？是否向阵列的每个成员发送了一个版本？

如果我在创建后保留分段控件，Xcode 会抱怨它会泄漏。

任何线索？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T01:26:31.597

请像您尝试过的那样保留，但请确保在`dealloc`方法中释放它们，Xcode 不应该那样抱怨。

您的数组也在块内自动释放，但这很好，数组不拥有其中的引用，真正的问题是视图控制器没有保留分段控件。

让我知道事情的后续。

# c++ - if 语句总是执行

> ID：10568666
> 
> 赞同：4
> 
> 时间：2012-05-13T01:22:19.723
> 
> 标签：c++, visual-c++, if-statement

我的`if`陈述相互冲突时遇到问题。这是我的代码：

```
std::cout << "1) Option 1\n";
std::cout << "2) Option 2\n";
std::cout << "3) Option 3\n";
std::cout << "4) Option 4\n";
std::cout << "Type your choice and hit ENTER \n";

std::cin >> Choice;

if(Choice == 1); 
{
std::cout << "Blah Blah\n";
}
if(Choice == 2);
{
std::cout << "Blah Blah\n";
}
if(Choice == 3);
{
std::cout << "Blah Blah\n";
}
if(Choice == 4);
{
std::cout << "Blah Blah\n";
} 
```

我的意思是：它会忽略我的`if`语句并运行我的所有代码，这样它就会打印出来：

```
Blah Blah
Blah Blah
Blah Blah
Blah Blah 
```

我的错误是什么？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-05-13T01:24:47.997

您的分号需要删除，它们正在终止 if 语句。

```
if(Choice == 1)
{
std::cout << "Blah Blah\n";
}
if(Choice == 2)
{
std::cout << "Blah Blah\n";
}
if(Choice == 3)
{
std::cout << "Blah Blah\n"
}
if(Choice == 4)
{
std::cout << "Blah Blah\n";
} 
```

您也可以使用 else ifs 来清理您的代码。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-13T01:27:31.637

你为什么不在这里使用 switch 语句？真的会清理你的代码。

```
std::cin >> Choice;

switch(Choice)
{
case 1:
std::cout << "Blah Blah\n";
break;

case 2:
std::cout << "Blah Blah\n";
break;

case 3:
std::cout << "Blah Blah\n";
break;

case 4:
std::cout << "Blah Blah\n";
break;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-13T01:52:09.830

将条件`;`放在前面，`if`它将起作用。另外，因为选项是互斥的，最好这样写：

```
if (Choice == 1) {
    std::cout << "Blah Blah\n";
} else if (Choice == 2) {
    std::cout << "Blah Blah\n";
} else if (Choice == 3) {
    std::cout << "Blah Blah\n";
} else if (Choice == 4) {
    std::cout << "Blah Blah\n";
} 
```

...或者使用 a `switch`，正如其他答案中所指出的那样。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-13T01:45:49.083

除了限制 if 语句范围的分号之外，我还建议您使用嵌套的 if 循环。它们的执行速度更快。

# facebook - 没有 SSL 的 Facebook 应用

> ID：10568667
> 
> 赞同：1
> 
> 时间：2012-05-13T01:23:09.873
> 
> 标签：facebook, ssl

我正在运行一个带有在线游戏的小网页，我想在该游戏的 facebook 粉丝页面上显示当前排名。

所以我想创建一个应用程序，它只在应用程序画布中包含排名，这样我就可以在粉丝页面上使用这个应用程序。

但我首先完全没有使用 SSL 的经验，其次不想购买证书。如果没有 SSL，是否有可能做我想做的事情？

它只是将数据导入粉丝页面。没有与用户数据的交互，因此甚至不需要 SSL。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T06:28:52.443

`Secure Canvas URL`您可以在应用程序设置部分的字段下输入无效的 URL 。

问题是所有使用 Facebook 安全浏览的用户都无法看到您的应用，因为他们会自动重定向到安全画布 URL。

# api - 按距离限制地址搜索

> ID：10568668
> 
> 赞同：0
> 
> 时间：2012-05-13T01:23:21.763
> 
> 标签：api, search, maps, distance

我最近加入了一个团队，该团队正在开发一个维护带有地址的列表的应用程序。用户搜索并包含他们的邮政编码，应用程序会显示到每个列表的距离。目前我们为此使用 Google Maps API。阅读 StackOverflow 上的问题似乎表明这是最好的做事方式：

*   [php/mysql 邮政编码邻近搜索](https://stackoverflow.com/questions/2410529/php-mysql-zip-code-proximity-search)
*   [按距离搜索引擎](https://stackoverflow.com/questions/8183628/search-engine-by-distance)

但是，在阅读 API 文档时，这似乎是明确禁止的，除非我们还为每个结果显示一个映射（也可能为我们过滤掉的每个结果，取决于您如何阅读以下语句）：

`Use of the Distance Matrix API must relate to the display of information on a Google Map; for example, to determine origin-destination pairs that fall within a specific driving time from one another, before requesting and displaying those destinations on a map. Use of the service in an application that doesn't display a Google map is prohibited.`

（[https://developers.google.com/maps/documentation/distancematrix/](https://developers.google.com/maps/documentation/distancematrix/)）

在不违反任何 API 条款的情况下实现此目的的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T01:33:36.080

您是否考虑 Geo::PostalCode 模块（perl）？它使用 maxmind 数据库来计算位置之间的距离（并且有不同语言的绑定）。

# google-analytics - 找不到 AdSense 分析代码

> ID：10568669
> 
> 赞同：1
> 
> 时间：2012-05-13T01:24:14.237
> 
> 标签：google-analytics, adsense

似乎在 Google Analytics（分析）进行了最新的整容之后，AdSense / Analytics 连接有点落后了。

根据文档，我需要将[AdSense Analytics 代码](https://support.google.com/adsense/bin/answer.py?hl=en&answer=94743)添加到我的页面。我已经有了常规的 Analytics 代码，并且运行良好。根据[Google 的帮助](https://support.google.com/adsense/bin/answer.py?hl=en&answer=75703)，该代码应位于[帐户概览页面顶部的编辑 AdSense 链接设置链接中](https://support.google.com/adsense/bin/answer.py?hl=en&answer=141997)。但事实并非如此。右上角甚至没有分析设置链接，只有设置，它会带您进入编辑用户设置。

这是我的管理面板的外观： ![在此处输入图像描述](../Images/0141738a5232a1bd481beffa2ae525dc.png)

有没有人能找到它？它在哪里？（它不在跟踪代码下）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T09:10:20.837

我有同样的问题......
这是我到目前为止发现的：

1.  在 Analytics 中，转到 Account Home（这是您在 GA 中的所有域和配置文件的列表）
2.  从此视图中，单击右上角的“管理员”。（这与您从帐户中获得的管理员不同！）
3.  选择您的**主**域/帐户
4.  选择“数据源”
5.  在属性、用户、过滤器、数据源、帐户设置的第一个菜单的正下方，有第二个菜单行，其中包含 2 个项目：Adwords 和 Adsense。选择 AdSense
6.  您应该会看到可以获取代码片段的域列表

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T07:20:57.833

您可以在分析中找到非主域的 adsense 代码。点击链接域上的adsense。点击右上角的管理员。点击帐户。单击数据源。点击 AdSense 选项卡。有二级域的代码段。

# javascript - 如何获取当前页面 URL 并将其放入 JavaScript 中的新 URL 引用中？

> ID：10568673
> 
> 赞同：0
> 
> 时间：2012-05-13T01:25:30.117
> 
> 标签：javascript, salesforce

这是我在 Salesforce 中用作执行 JavaScript 的自定义按钮控件。

```
 location.replace('/email/author/emailauthor.jsp?retURL=/{!Case.Id}&p3_lkid={!Case.Id}&rtype=003&p7=GetURLHere&p2_lkid={!Case.ContactId}&template_id=00Xc0000000HrOk'); 
```

这`GetURLHere`部分是我想获取当前 URL 并将其放在下一页的地方。

这种形式像`Select Listview > Click Button > New page loads with the previous pages URL in the p7 field.`

`p7`表示我想在页面加载时将其放入的字段。

通常`document.location.href`不想在这个控件中工作。

关于如何在 Force.com 环境中执行此操作的任何想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-13T01:33:42.837

您应该能够使用 $CurrentPage 对象来获取当前页面 url 作为公式表达式。

```
document.location.href = '{!$CurrentPage.URL}'; 
```

# android - 如何让 Eclipse、Maven 和 Google PlayN 协同工作？

> ID：10568674
> 
> 赞同：1
> 
> 时间：2012-05-13T01:25:30.170
> 
> 标签：android, eclipse, maven, playn

我现在已经尝试了 3 次来设置 eclipse 来运行 playn-sample 项目，但没有成功。我尝试了以下入门指南：

[http://davies-barnard.co.uk/2012/03/playn/](http://davies-barnard.co.uk/2012/03/playn/)

[http://code.google.com/p/playn/wiki/GettingStarted](http://code.google.com/p/playn/wiki/GettingStarted)

[http://www.gamefromscratch.com/post/2011/10/13/Getting-started-with-PlayN.aspx](http://www.gamefromscratch.com/post/2011/10/13/Getting-started-with-PlayN.aspx)

当我开始遇到问题时，已经能够了解指南的导入部分。我已经清理了所有 JRE、JDK Eclipse 安装，并且目前安装了以下内容。

Java SE SDK 6u29

[http://www.oracle.com/technetwork/java/javasebusiness/downloads/java-archive-downloads-javase6-419409.html#jdk-6u29-oth-JPR](http://www.oracle.com/technetwork/java/javasebusiness/downloads/java-archive-downloads-javase6-419409.html#jdk-6u29-oth-JPR)

安卓 SDK r18

[http://developer.android.com/sdk/index.html](http://developer.android.com/sdk/index.html)

面向 Java EE 开发人员的 Eclipse IDE

[http://www.eclipse.org/downloads/packages/eclipse-ide-java-ee-developers/indigor](http://www.eclipse.org/downloads/packages/eclipse-ide-java-ee-developers/indigor)

m2e - Eclipse v1.0.200.20111228-1245 的 Maven 集成

（来自所有可用的更新站点）

Eclipse 版本的 Android 插件。18.0.0.v201203301601-306762

[https://dl-ssl.google.com/android/eclipse/](https://dl-ssl.google.com/android/eclipse/)

谷歌插件

[http://dl.google.com/eclipse/plugin/3.7](http://dl.google.com/eclipse/plugin/3.7)

WTP 版本的 Maven 集成。0.15.2.20120306-2040

[http://download.jboss.org/jbosstools/updates/m2eclipse-wtp](http://download.jboss.org/jbosstools/updates/m2eclipse-wtp)

当我尝试将 playn-samples 导入工作区时，我的体验开始偏离指南。我不断收到以下错误：

> 在 Eclipse 中找不到处理 android-maven-plugin:3.1.1:proguard 的市场条目。有关详细信息，请参阅帮助。

虽然我多年来一直在编程，但我的时间主要是在 Visual Studio 中，主要是 C#、ASP.NET，在过去的两年中，我学习了 jQuery/JavaScript。我在大学时用 Java 编写了一些程序，并认为 PlayN 框架是重返工作的一个很好的理由。我从这些指南中缺少什么来启动和运行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T07:07:24.847

我和你有同样的问题。

由于我放弃了 eclipse，我尝试使用 Netbeans，现在我正在编程和测试这个库。

很快，这就是我所做的：

1.  从这里获取 Netbeans+Java SE 组合： [http](http://www.oracle.com/technetwork/java/javase/downloads/jdk-netbeans-jsp-142931.html) ://www.oracle.com/technetwork/java/javase/downloads/jdk-netbeans-jsp-142931.html 并安装它
2.  启动 Netbeans，转到**File > New Project > Maven > Project from Archetype > Next**
3.  在下一个对话框中，按下**添加**按钮
4.  A new window will pop-up. Switch to your web browser
5.  Go to [http://search.maven.org/](http://search.maven.org/) and in the search box type **playN**
6.  In the resulting list, look for **playn-archetype** in the **ArtifactID** column and click it
7.  Remember that last window on Netbeans? Return to the IDE and start filling the Group Id, Artifact Id and Version fields as they appear on the result list of playn-archetype. For example, the Group Id is com.googlecode.playn, Artifact Id is playn-archetype and the latest Version is 1.2 at this moment
8.  Leave the Repository field in blank and click **Ok**
9.  Now select your recently added archetype from the list and click **Next**
10.  在以下对话框中，您可以留下字段或更改您想要的字段。**但是**，在*Additional Creation Properties*部分中，确保您在 **JavaGameClassName**字段中输入了一个值。这将是您的主类的名称，因此请确保填写它或单击完成后它会标记一个错误，您将不得不重新开始。
11.  单击**完成**，Netbeans 将开始下载一堆东西，所以请耐心等待，直到完成。伟大的！现在您已经准备好运行 PlayN 的工作项目了。只需在 Project Navigator 中查找*[your-project-name] Java*文件夹，右键单击它并选择**Run**
12.  If a error related to android appears, you need to go to *[your-project-name] Metaproject > Project Files* and open the **pom.xml** file. Open it and in the *modules* section, comment or delete the `<module>android</module>` line, just for now to quiclky test your project.
13.  Remember, the Core folder is where you'll programm the game and the others are the launchers for each platform(Java, Android, iOS...)

Hope that helps :)

# c# - 创建具有多个部分的进度条控件？

> ID：10568679
> 
> 赞同：-2
> 
> 时间：2012-05-13T01:27:20.280
> 
> 标签：c#, .net, winforms, controls, progress-bar

在 C# .net 中，如何创建一个包含多个部分的自定义进度条控件？例如，我可以独立更新 10 个部分，比如如果我需要将第 3 部分的进度更改为 100%，那部分看起来会很满，而其他 9 个部分看起来仍然是空的。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T05:00:51.330

将十个 ProgressBars 放在您的用户控件中，一个接一个。

# ruby - 如何设置 gist 以使用现有令牌？

> ID：10568681
> 
> 赞同：0
> 
> 时间：2012-05-13T01:27:27.847
> 
> 标签：ruby, github, gist

我已经安装了 gist Ruby gem。但是，我在设置我的 gist 以使用现有的 Github 帐户并采取行动时遇到了麻烦。我已阅读[此处](http://defunkt.io/gist/#EXAMPLES)的说明。但是，尽管按照说明进行操作，但我仍应尝试使身份验证正常工作，但我对接下来的步骤感到迷茫。

- - - 更新 - - - - - - - - - - - - -

发现此问题在其 Github 页面中打开：[https ://github.com/defunkt/gist/issues](https://github.com/defunkt/gist/issues)

在这一点上我能做的不多。

提前感谢您的见解！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T01:32:08.127

您应该使用您的 github 密码，而不是令牌：[https ://github.com/defunkt/gist#authentication](https://github.com/defunkt/gist#authentication)

# python - 为什么我的写入函数没有创建文件？

> ID：10568683
> 
> 赞同：1
> 
> 时间：2012-05-13T01:28:20.937
> 
> 标签：python, file-io, mode

根据我读过的所有资料，该`open`方法创建一个文件或用现有名称覆盖一个文件。但是我正在尝试使用它，但出现错误：

```
File not found - newlist.txt (Access is denied)
I/O operation failed. 
```

我试图读取一个文件，但不能。你确定那个文件存在吗？如果确实存在，您是否指定了正确的目录/文件夹？

```
def getIngredients(path, basename):
  ingredient = []
  filename = path + '\\' + basename
  file = open(filename, "r")
  for item in file: 
    if item.find("name") > -1:
      startindex = item.find("name") + 5
      endindex = item.find("<//name>") - 7
      ingredients = item[startindex:endindex]
      ingredient.append(ingredients)

  del ingredient[0]
  del ingredient[4]

  for item in ingredient:
    printNow(item)

  file2 = open('newlist.txt', 'w+')  

  for item in ingredient:  
     file2.write("%s \n" % item) 
```

如您所见，我正在尝试将我制作的列表写入文件，但它并没有像应有的那样创建它。我已经为 open 函数尝试了所有不同的模式，它们都给了我同样的错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T01:51:40.423

您似乎没有对当前工作目录的写入权限。您可以使用`import os; print os.getcwd()`.

然后，您应该检查您是否对该目录具有写入权限。这可以在 Python 中使用

```
import os
cwd = os.getcwd()
print "Write access granted to current directory", cwd, '>', os.access(cwd, os.W_OK) 
```

如果你得到`False`（没有写访问权），那么你必须把你的`newfile.txt`文件放在其他地方（也许在`path + '/newfile.txt'`？）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T01:48:26.227

这看起来像一个权限问题。

该目录不存在或您的用户没有写入该目录的权限。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-13T01:56:15.557

我想可能的问题可能是：

1）您将路径和基本名称作为参数传递。如果您将参数作为字符串传递，那么您可能会遇到此问题：

例如：

```
def getIngredients(path, basename):
  ingredient = []
  filename = path + '\\' + basename

getIngredients("D","newlist.txt") 
```

如果您以上述方式传递参数，这意味着您正在执行此操作

```
filename = "D" + "\\" + "newlist.txt" 
```

2) 您没有在文件名中的路径 + 之后包含**冒号 (:) 。**

3）也许，该文件不存在。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-13T01:38:32.863

您确定要在其中创建文件夹的目录存在吗？

如果它没有......那么操作系统将无法创建文件。

# ios - 滚动 UIViewController 标题

> ID：10568684
> 
> 赞同：1
> 
> 时间：2012-05-13T01:28:26.210
> 
> 标签：ios, scroll, titlebar, audio-player

接口声明：

```
@interface MusicPlayerViewController : UIViewController 
```

我目前正在这样设置我的标题：

```
NSString* Title = [[[SongList objectAtIndex:currentIndex] childNamed:@"title"] value];
    Title = [Title stringByAppendingString:@" / "];
    Title = [Title stringByAppendingString:[[[SongList objectAtIndex:currentIndex] childNamed:@"artist"] value]];
    [self setTitle:Title]; 
```

是否可以在菜单顶部设置标题“滚动”？（流畅，就像在音乐播放器中一样？

谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T01:36:51.463

我认为这样做您需要创建自己的 UILabel 子类，然后将其设置为标题的 customView。如果您仍然希望能够正常设置标题，或者子类 UINavigationBar 本身。

# jquery - jquery：你能把找到选择器串在一起吗

> ID：10568685
> 
> 赞同：1
> 
> 时间：2012-05-13T01:29:05.183
> 
> 标签：jquery, jquery-selectors

我正在尝试为客户编写一些特殊的验证代码。我想在 jquery 的 find 函数中将几个选择器串在一起，这可能吗？

例如，我想说的是，在当前可见的字段集中，找到所有 type=text 且具有类“-required”的输入字段，还找到所有也具有类“-required”的 textarea 字段.

我正在尝试这个，但它不起作用，它只选择 Textarea 字段

```
var reqButEmpty = $('fieldset:visible')
.find('input[type="text", class*="-required",textarea[class*="-required"]')
.filter(function() 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-13T01:30:55.503

```
var reqButEmpty = $('fieldset:visible')
 .find('input[type="text"].-required, textarea.-required').... 
```

你有几个错误：

*   您没有终止属性选择器：`[type="text", ...`
*   ,`class*=`正在寻找类型类的元素, ( `<class>`)
*   如果你想要一个类选择器，只需在它前面加上一个点。

* * *

**更新：**

```
var reqButEmpty = $('fieldset:visible')
 .find('input[type="text"], textarea').filter(function(){
     return this.className.indexOf("-required") >= 0;
 }); 
```

* * *

或者正如*@cliffs of insanity*所建议的那样：

```
var reqButEmpty = $('fieldset:visible')
 .find('input[type="text"], textarea').filter('[class*="-required"]'); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-13T01:31:47.143

您可以，但不能以您尝试的方式

```
.find('input[type="text"][class*="-required"],textarea[class*="-required"]') 
```

为了获得“和”行为，我们在同一个元素选择器上使用两个单独的“属性”选择器。

然后我们使用`,`多重选择器来获取`textarea`.

我还假设这`-required`是类名的一部分，而不是全部。一些 HTML 参考会有所帮助。

# sql - Teradata Rank Over Query（让一行左连接）

> ID：10568690
> 
> 赞同：0
> 
> 时间：2012-05-13T01:31:35.817
> 
> 标签：sql, left-join, teradata

嗨，我是 Teradata 的新手，遇到了一个问题

有一个 ID 表，其中存储了分配给每个人的唯一 ID

```
CREATE TABLE IDS(
ID VARCHAR(8),
UPDATED_DATE DATE) 
```

然后我们有一个名称和地址表，其中没有任何存储 IDS 的人口统计信息的主键

```
CREATE TABLE NAMES(
ID VARCHAR(8),
NAME VARCHAR(50))
CREATE TABLE ADRRESSES(
ID VARCHAR(8)
ADDRESS VARCHAR(200)) 
```

现在每个 ID 可以有多个名称和 IDS。但是对于名称和地址，我想使用具有更多计数的名称和地址。如果两个名字有相同的 COUNT 我只想要第一行

ID NAME 计数

第1234章 6

第1234章 6

第1234章 2

在上面的示例中，我想要名称 John Smith。这是我正在执行的左连接，因为 ID 可能没有名称或地址。这是我正在尝试的

```
SELECT * FROM
(SELECT ID as V_ID from IDS) a
LEFT JOIN
(SELECT ID, NAME, COUNT(*) AS COUNTER,(RANK() OVER(ORDER BY COUNTER DESC)) AS RNK
FROM NAMES 
GROUP BY ID)b
ON a.ID = b.ID
AND b.RNK = 1            -- Should give me only the first row
LEFT JOIN
(SELECT ID, ADDRESS, COUNT(*) AS COUNTER, (RANK() OVER (ORDER BY COUNTER DESC) ) AS RNK
FROM ADDRESSES
GROUP BY ID) c
ON c.ID = a.ID
And c.RNK = 1 
```

然而，这并没有让我得到想要的结果。我也尝试使用 ROW NUMBER 而不是 RANK，但仍然没有结果。我应该如何在 TERDATA 中编写此查询？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T21:27:42.307

我解决了...我需要一个`qualify`和一个`partition by`

```
SELECT * FROM
    (SELECT ID as V_ID from IDS) a
    LEFT JOIN
    (SELECT ID, NAME, COUNT(*) AS COUNTER
    FROM NAMES
    GROUP BY ID
    qualify ROW_NUMBER() OVER(PARTITION BY ID ORDER BY COUNTER DESC) = 1
    )b
    ON a.ID = b.ID
    LEFT JOIN
    (SELECT ID, ADDRESS, COUNT(*) AS COUNTER
    FROM ADDRESSES
    GROUP BY ID
    qualify ROW_NUMBER() OVER(PARTITION BY ID ORDER BY COUNTER DESC) = 1
    ) c
    ON c.ID = a.ID 
```

# iphone - 如果存在相机，如何仅显示 UIButton

> ID：10568693
> 
> 赞同：-1
> 
> 时间：2012-05-13T01:32:06.880
> 
> 标签：iphone, ios, xcode, ipad

如果用户设备上存在前置摄像头，如何仅显示 UIButton？使用前置摄像头（通过视频“记录”UIButton）是我的应用程序的一项功能，但不是必需的，所以我想在没有前置摄像头的设备上隐藏按钮。我不知道如何在这种情况下实现 isCameraDeviceAvailable，因此将不胜感激具体的代码以及如何放置它。

感谢您提供任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T01:34:36.063

这应该在控制器的 viewDidLoad 中使用视图来解决问题。如果相机存在，它只会将按钮添加到子视图。为了效率起见，您可能应该将整个按钮创建放在那里。如果你用 InterfaceBuilder 添加它，你总是可以反转它并隐藏它不存在的按钮。

```
if ([UIImagePickerController isCameraDeviceAvailable: UIImagePickerControllerCameraDeviceFront]) {
    [myButton setHidden:NO];
} else {
    [myButton setHidden:YES];
} 
```

# javascript - 多个具有相同班级的父母与具有相同班级的兄弟姐妹

> ID：10568696
> 
> 赞同：2
> 
> 时间：2012-05-13T01:32:15.650
> 
> 标签：javascript, jquery

```
<div class="example">
  <div class="test">Some text</div>
  <div class="whatever"></div>
</div>

<div class="example">
  <div class="test">Some more text</div>
  <div class="whatever"></div>
</div> 
```

如何使每个`.example`'s`.whatever`包含其内容`.test`？

例如，如果代码是这样的：

```
<div class="example">
  <div class="test">Some text</div>
  <div class="whatever"></div>
</div> 
```

然后我可以这样做：

```
$('.whatever').text($('.test').text()); 
```

但是我有多个元素的类`.whatever`和多个元素的类`.test`，每个元素都`.test`包含不同的文本。

所以换句话说，我怎样才能让每个类`.whatever`的元素都包含元素的文本`.test`，但只包含`.test`示例元素中的`.example`元素？

很抱歉措辞令人困惑。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-13T01:37:12.817

尝试：

```
$('.example').each(function() {
    $(this).find('.whatever').html( $(this).find('.test').html() );
});​ 
```

[在这里测试](http://jsfiddle.net/8JCXD/2/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-13T01:35:04.990

试试这个：

```
$(".whatever").each(function() {
    $(this).text($(this).siblings(".test").text());
}); 
```

**演示：http:** [//jsfiddle.net/YXf5C/](http://jsfiddle.net/YXf5C/)

# c++ - 单链表在中间添加节点

> ID：10568723
> 
> 赞同：1
> 
> 时间：2012-05-13T01:38:28.217
> 
> 标签：c++, pointers, linked-list

```
class List {
  ListNode *head;
  ListNode *prev;
};

class ListNode {
  int data;
  ListNode *next;
  friend class List;
  ListNode(int d, ListNode *n) : data(d), next(NULL) {}
  void insertM(int d) {
    ListNode *ptr, *temp, *curr;
    ptr = head;
    while (ptr->data < d) {
      prev = ptr;
      ptr = ptr->next;
    } // end while
    temp = prev->next;
    curr = new ListNode(d, ptr);
    curr->next = prev->next; // or temp->next
    prev->next = curr;
    ;
  }
};

List mylist; 
```

在这个函数中，我试图在链表的中间添加一个节点。其他功能将项目添加到背面和正面就好了。当我在列表中间添加时，我的 prev->next 链接到 curr 就好了，但 curr->next 指向 NULL。

在过去的 1.5 个小时里，我一直试图让这个程序正常工作。我会感谢你的帮助。这是家庭作业。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T01:54:07.850

您要使用的一般程序是：

1.  向下`next`浏览指针，直到到达要插入的节点（称为 A）
2.  更改插入的节点（B）的`next`指针以匹配 A 的`next`指针
3.  改变A的`next`指针指向B

从您的代码中可以看出，您正试图维护一个排序的整数列表。这是一项家庭作业，您可能不会得到代码片段，但是通过查看您的代码，我不得不问为什么您在节点构造函数中使用下一个参数，然后将下一个值设置为 null。没有看到你的其余代码我不能肯定地说，但我会`next(NULL)`在第 9 行更改为`next(n)`，然后删除`curr->next`靠近底部的行

# jquery - Scrollview - load() 后无法滚动动态内容

> ID：10568725
> 
> 赞同：1
> 
> 时间：2012-05-13T01:38:37.840
> 
> 标签：jquery, mobile, load, scroll, scrollview

**标题：**

```
<script src="jquery.mobile/jquery.easing.1.3"></script>
<script src="jquery.mobile/jquery.mobile.scrollview"></script>
<script src="jquery.mobile/scrollview"></script>
....! and the correct css ! 
```

**身体：**

```
<div data-role="page" data-theme="a" id="mainpage">
    <div data-role="content" data-theme="a">
        <div id="htmltext" data-scroll="y"></div>
    </div><!-- /content -->
</div> 
```

**在 Pageshow 事件中：**

```
$("#htmltext").load("content/test.htm", function(response, status, xhr) {
    if (status == "error") {
        var msg = "Sorry but there was an error: ";
        alert(msg + xhr.status + " " + xhr.statusText);
    }
});

$("#htmltext").scrollview("scrollTo", 0, -600); 
```

load() 后，无法滚动动态 div #htmltext！！！

同时，如果我用纯代码替换加载函数，它将正确滚动。

我错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T01:52:59.053

问题可能来自 Ajax 异步工作的事实。所以为了在 Ajax 加载**后**做任何事情，你应该使用它的回调函数。尝试在`load`处理函数中移动滚动方法。

```
$("#htmltext").load("content/test.htm", function(response, status, xhr) {
    if (status == "error") {
        var msg = "Sorry but there was an error: ";
        alert(msg + xhr.status + " " + xhr.statusText);
    }
    $("#htmltext").scrollview("scrollTo", 0, -600);
}); 
```

# matplotlib - plt.subplots() 打开多个窗口

> ID：10568730
> 
> 赞同：2
> 
> 时间：2012-05-13T01:39:27.077
> 
> 标签：matplotlib

我正在使用下面的代码在同一个图中生成 3 个图表，但它令人讨厌地打开了 3 个窗口。我正在按照链接 [http://matplotlib.sourceforge.net/users/recipes.htm](http://matplotlib.sourceforge.net/users/recipes.htm)中给出的步骤进行操作。有人请帮助我。我想在一个窗口中获取所有图表。

```
import matplotlib.pyplot as plt
time = [1,2,3]
value = {}
value['x'] = [1,2,3]
value['y'] = [1,4,9]
value['z'] = [1,8,27]
for k, dimension in enumerate(['x', 'y', 'z']):
    fig, axs = plt.subplots(3, 1, sharex=True,sharey=True)
    axs[k].plot(time, value[dimension])

plt.show() 
```

更新：已解决以下版本工作正常。子图位于 for 循环内。

```
import matplotlib.pyplot as plt
time = [1,2,3]
value = {}
value['x'] = [1,2,3]
value['y'] = [1,4,9]
value['z'] = [1,8,27]
fig, axs = plt.subplots(3, 1, sharex=True,sharey=True)
for k, dimension in enumerate(['x', 'y', 'z']):
    axs[k].plot(time, value[dimension])

plt.show() 
```

# c# - 无法使用 System.Diagnostics.Process 打开批处理文件

> ID：10568732
> 
> 赞同：2
> 
> 时间：2012-05-13T01:40:21.463
> 
> 标签：c#, .net, asp.net-mvc

由于某种原因，我无法让这个批处理文件在我的 .NET 4.0 MVC3 项目中运行。我正在使用服务器 2008R2 64 位 - cmd.exe 的操作方式是否不同？

```
System.Diagnostics.Process process1;
process1 = new System.Diagnostics.Process();
process1.EnableRaisingEvents = false;
string strCmdLine = "d:\audioTemp\test.bat";      
System.Diagnostics.Process.Start("CMD.exe", strCmdLine);
process1.Close(); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-13T02:04:58.067

```
System.Diagnostics.Process.Start("cmd.exe", @"/c d:\audioTemp\test.bat") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-13T01:41:39.640

您的字符串包含一个制表符`\t`。要么逃避反斜杠：

```
strCmdLine = "d:\\audioTemp\\test.bat"; 
```

或使用[逐字字符串文字](http://msdn.microsoft.com/en-us/library/aa691090%28v=vs.71%29.aspx)：

```
strCmdLine = @"d:\audioTemp\test.bat"; 
```

# nginx - Nginx 配置错误：无法检测 int 大小

> ID：10568735
> 
> 赞同：5
> 
> 时间：2012-05-13T01:42:32.247
> 
> 标签：nginx, configure

当我尝试在 nginx src 路径中运行“配置”命令时，出现以下错误。

```
checking for OS
+ Linux 2.6.32-71.el6.x86_64 x86_64
checking for C compiler ... found
+ using GNU C compiler
+ gcc version: 4.4.6 20110731 (Red Hat 4.4.6-3) (GCC) 
checking for gcc -pipe switch ... found
checking for gcc builtin atomic operations ... not found
checking for C99 variadic macros ... not found
checking for gcc variadic macros ... not found
checking for unistd.h ... found
checking for inttypes.h ... found
checking for limits.h ... found
checking for sys/filio.h ... not found
checking for sys/param.h ... found
checking for sys/mount.h ... found
checking for sys/statvfs.h ... found
checking for crypt.h ... found
checking for Linux specific features
checking for epoll ... not found
checking for sendfile() ... not found
checking for sendfile64() ... not found
checking for sys/prctl.h ... found
checking for prctl(PR_SET_DUMPABLE) ... not found
checking for sched_setaffinity() ... not found
checking for crypt_r() ... not found
checking for sys/vfs.h ... found
checking for poll() ... not found
checking for /dev/poll ... not found
checking for kqueue ... not found
checking for crypt() ... not found
checking for crypt() in libcrypt ... not found
checking for F_READAHEAD ... not found
checking for posix_fadvise() ... not found
checking for O_DIRECT ... not found
checking for F_NOCACHE ... not found
checking for directio() ... not found
checking for statfs() ... not found
checking for statvfs() ... not found
checking for dlopen() ... not found
checking for dlopen() in libdl ... not found
checking for sched_yield() ... not found
checking for sched_yield() in librt ... not found
checking for SO_SETFIB ... not found
checking for SO_ACCEPTFILTER ... not found
checking for TCP_DEFER_ACCEPT ... not found
checking for TCP_KEEPIDLE, TCP_KEEPINTVL, TCP_KEEPCNT ... not found
checking for TCP_INFO ... not found
checking for accept4() ... not found
checking for int size ...
./configure: error: can not detect int size 
```

我的操作系统是centos 6.0，已经有kernel-headers包：kernel-headers-2.6.32-71.el6.x86_64 操作系统版本是：CentOS Linux release 6.0 (Final)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-13T13:56:10.433

我测试了 nginx 默认安装，除了路径的 --prefix 之外没有任何参数。它工作正常，nginx 安装流畅。我检查了参数，发现“--with-cc-opt='-m32 -march=i386'”，我的操作系统是64位，所以我删除它，然后运行命令。它像往常一样工作....

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-13T02:37:27.093

我之前遇到过这个错误几次。希望我的两个问题能帮助你缩小你的范围：

1）我错误地尝试使用 C++ 编译 nginx，而实际上它需要 C。

2) 我使用了不兼容的插件。我使用的 TCP 代理插件与最新版本的 nginx 不兼容。问题是内部结构发生了超出插件支持的变化。

狩猎愉快。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T07:09:50.137

如果像我一样在 OS X 上，请尝试遵循此[错误报告](http://trac.nginx.org/nginx/ticket/94)。

基本上做：

```
brew install pcre 
```

并将其添加到您的 ./configure

```
--with-ld-opt="-L /usr/local/lib" 
```

# android - 如何保存意图的数据

> ID：10568738
> 
> 赞同：0
> 
> 时间：2012-05-13T01:42:54.857
> 
> 标签：android, android-intent

我有以下情况：我需要将 Intent`putExtra`调用中的数据保存到另一个`Activity`. 我可以显示`putExtra`数据，但无法保存。我`startActivity`用来启动我需要保存数据的活动。我试图通过将数据添加到 来存储它`ArrayList`，但是每当我更改活动时，数据都会丢失。它也只存储最后一个值。如何在第二个中存储发送的数据`Activity`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T01:51:18.800

您可以将其存储在应用程序上下文中，如下所述：

[在 Android 上获取“上下文”的静态方法？](https://stackoverflow.com/questions/2002288/static-way-to-get-context-on-android)

# ruby-on-rails - 如何从文件对象中找到当前文件名？

> ID：10568744
> 
> 赞同：0
> 
> 时间：2012-05-13T01:45:32.093
> 
> 标签：ruby-on-rails, ruby

如果我只有文件对象，如何找到当前文件名？

该文件是用户上传的文件，我想找到它的名称，但如果我使用`file_object.path`，它会给出文件创建时的名称，而不是当前名称。

这产生了一个看起来像是一堆随机数字和字母的名字。示例文件是我创建的证书，它是用户将上传的文件类型，因此我想确保显示当前文件名，以免混淆。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T01:54:26.907

简短的回答是“你不能”。

要理解为什么，在典型的文件系统中，文件只是一个节点（或者在 Unix/Linux 中，是一个 inode），它可以被许多链接引用，我不是在谈论符号链接。

例如：

```
$ echo "i am foo" > foo
$ cat foo
i am foo
$ ln foo bar    # this is a hard link, not a symlink
$ rm foo
$ cat bar
i am foo
$ rm bar
$ cat bar
cat: bar: No such file or directory
$ cat foo
cat: foo: No such file or directory 
```

实际上，如果您查看 File::Stat 的 Ruby 文档...

[http://www.ruby-doc.org/core-1.9.3/File/Stat.html](http://www.ruby-doc.org/core-1.9.3/File/Stat.html)

...您会看到有一种方法`nlink`可以返回文件的硬链接数。您还将看到有一个方法`inspect`返回文件的属性，但没有名称。

# html - XHTML 和 HTML5（及以上）之间有什么关系？

> ID：10568753
> 
> 赞同：12
> 
> 时间：2012-05-13T01:49:46.603
> 
> 标签：html, xhtml

对于使用 HTML4 并计划使用 HTML5 的人，是否有任何理由考虑与 XHTML 相关的 Web 开发细节？

还是 XHTML 是 Web 技术中的“侧面”开发，与当前的 Web 开发主流（我猜是 HTML5）无关？

* * *

**问的理由**

我问的原因是我之前发布的 StackOverflow 答案最近被评论为“你不应该使用大写 HTML 标签”。当我问“为什么”时，评论者向我指出了几篇文章，这两篇文章都给出了仅使用小写标记名称的原因，因为“ **XHTML 中不允许使用大写标记名称**”作为主要原因。

由于我目前不使用 XHTML（纯 HTML4.0）进行 Web 开发，并且只计划使用 HTML5 作为下一步，因此我对 XHTML 是否应该成为我在 Web 开发方面做出的各种决策中的一个因素感兴趣

*请注意，这个问题并不是在询问是否应该在纯 HTML 中使用大写或小写标签名称 - 只是在 XHTML 中禁止大写标签是否应该是我决策的一个因素，或者我应该忽略 XHTML 相关规则。*

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-13T02:40:02.470

您将在 XHTML 上找到的大多数信息都没有提到 XHTML 的全部目的是供人类和计算机用于数据交换。XHTML 的创建是为了让计算机可以相互通信，但同时仍然可供人类阅读。最疯狂的是，各种代码修士都沉迷于 XHTML 合规性，没有任何使用 XHTML 进行数据交换的打算，也不了解 XHTML 究竟是什么。

**编辑：** XHTML 使用的一个很好的例子是航空公司发布其航班。该公司可以利用 XHTML 生成一个**单一**的航班列表，这些航班既可供在线访问的人使用，也可供根据需要读取数据的服务使用。

另一方面，如果您拥有一家美发沙龙，则您的站点无需针对 XHTML 标准进行验证。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-13T10:35:03.990

直接而言，在为 HTML5 的 HTML 序列化标记文档时，没有理由考虑 XHTML 规则。¹但是，使用小写作为标记似乎是现代做法，这在一定程度上受到了 XML 和 XHTML 的影响。因此，如果您发现自己在一个庞大的开发团队中工作，那么团队的编码指南很可能会为了保持一致性而强制使用小写字母。因此，养成这样做的习惯可能是值得的。

¹ 请注意，也有可能使用 HTML5 的 XHTML 序列化，在这种情况下当然很重要，但我认为这不是您要问的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-13T01:54:43.357

据我所知，XHTML 旨在成为 HTML 的特性和 XML 的严格性之间的一种结合。例如，您可以在 HTML 中编写`<b><i>test</b></i>`，浏览器不会在意，它知道您的意思。而在 XHTML 中，这会导致错误并阻止整个页面显示。

然而，大多数浏览器也只是容忍 XHTML 中的错误，所以它变得毫无意义。

就个人而言，我可以选择使用小写而不是大写的唯一原因是因为我懒得按住 Shift 键并且我将 CapsLock 键重新映射到更有用的东西。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-13T02:09:27.917

根据我个人对 XHTML 的观察，它的唯一“好处”是多功能性——例如，据我了解，可以相对轻松地创建自定义标记/元素或属性，并且仍然可以使用 XHTML 进行验证。

我认为不需要自定义标签，因为如果没有一个不符合语义的标签（尽管由于 HTML5 在语义标记方面的改进，这种情况很少见），您可以使用 a `div`or`span`并使用 a `class`or`id`来制作它”合身。” 而且 HTML5 确实允许自定义属性。

所以我认为 HTML5 和 XHTML 之间没有直接关系——或者至少，我认为不*应该*有直接关系（无论如何，XHTML 1.0 是 HTML 4 和 XML 的组合）。该规范不推荐其中一个，它只是指出在 HTML5 中，它们不区分大小写。

我个人使用小写标签名称有两个原因：

1.  每次都按住 shift 是一件令人讨厌的事情（尽管有人可能会争辩说你按住 shift 是为了得到尖括号，但无论如何）。
2.  这是一种风格偏好——我真的认为小写标签名称和小写文档类型 ( ) 看起来更简洁`<!doctype html>`。大写的标签名称真的很过时，你再也看不到它们了。这可能只是像我这样的新一代程序员的事情。

无论哪种方式，您都不应该在意适用于您甚至没有使用的文档类型的规则。

# c# - 嵌入 mspaint 就像使用 C# 的写字板一样

> ID：10568754
> 
> 赞同：11
> 
> 时间：2012-05-13T01:50:06.627
> 
> 标签：c#, .net, api, ipc, paint

我只是看了一下写字板。有一个名为“插入油漆绘图”的功能区按钮。当我单击该按钮时，mspaint 打开并提示我绘制一些东西。画完之后，我可以点击“更新文档”按钮。没有保存选项（只有“将副本另存为”）。 ![没有退出按钮](../Images/230306049f6d2aae173476c5738e4ea5.png) 此外，没有退出按钮。相反，它显示一个“退出并返回文档”按钮。

现在我的问题是：我是否以及如何从我的 C# 桌面应用程序中的此功能中受益？我想到了一些 IPC，但我无法弄清楚它是如何工作的。有人有想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-13T03:41:04.850

这称为 OLE（对象链接和嵌入）。您正在将 Microsoft Paint 文档嵌入到写字板文档中。该技术自 Windows 95 以来就已经存在。

.NET Framework 不支持任何 OLE。如果您真的想这样做，最好编写一个 C++ 应用程序并利用 MFC 或 ATL 库，它们对此有明确的支持。有关针对 .NET 的更多信息，请参阅[此问题](https://stackoverflow.com/questions/2139765/ole-container-for-net)的答案。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-13T05:41:48.263

访问以下链接，不要忘记下载示例项目。

[http://www.c-sharpcorner.com/UploadFile/mahesh/ActiveDocumentHostControl11102005040550AM/ActiveDocumentHostControl.aspx](http://www.c-sharpcorner.com/UploadFile/mahesh/ActiveDocumentHostControl11102005040550AM/ActiveDocumentHostControl.aspx)

# sharepoint - Sharepoint 2010 UploadCtl 控件

> ID：10568755
> 
> 赞同：1
> 
> 时间：2012-05-13T01:50:08.987
> 
> 标签：sharepoint, sharepoint-2010

我按照[http://msdn.microsoft.com/en-us/library/cc264294%28v=office.12%29](http://msdn.microsoft.com/en-us/library/cc264294%28v=office.12%29)在 _layouts 下制作了一个新的 SP 项目。控件渲染得很好，我可以选择文件，但是当我点击上传时，它会显示小加载图标。没有上传文件。

```
 <LINK REL="stylesheet" TYPE="text/css" HREF="/_layouts/1033/styles/ows.css">

 <SCRIPT LANGUAGE="javascript">
   function MultipleUploadView() {
       document.all.idUploadCtl.SetTreeViewColor("#FF0000");
       document.all("idMultipleView").style.display = "inline";
   }

   function DocumentUpload() {
       document.all.idUploadCtl.MultipleUpload();
   }
   </SCRIPT>

   <FORM NAME="frmUpload" METHOD="post"
   ACTION="upload.aspx?RootFolder=&amp; Source=http://jono-pc/Shared Documents/Forms   /AllItems.aspx">

  <SharePoint:FormDigest ID="FormDigest1" runat="server" />
  <INPUT TYPE="hidden" NAME="Cmd" VALUE="Save">
  <INPUT TYPE="hidden" NAME="NextUsing"
   VALUE="http://jono-pc/Shared Documents/Forms/AllItems.aspx">
  <INPUT TYPE="hidden" VALUE="New">
  <INPUT TYPE="hidden" NAME="putopts" VALUE="true">
  <INPUT TYPE="hidden" NAME="destination"
  VALUE="http://jono-pc/Shared Documents">
  <INPUT TYPE="hidden" NAME="Confirmation-URL"
  VALUE="http://jono-pc/Shared Documents/Forms/AllItems.aspx">
  <INPUT TYPE="hidden" NAME="PostURL"
  VALUE="http://jono-pc/_vti_bin/shtml.dll/_layouts/upload.aspx" />
  <INPUT TYPE="hidden" NAME="VTI-GROUP" VALUE="0">

  <P CLASS="ms-toolbar">
  <A HREF="javascript:MultipleUploadView()"
  TARGET="_self">Upload Multiple Files</A>
  </P>
  <DIV ID=idMultipleView style='display:none'>
  <P CLASS="ms-toolbar">
  <A HREF="javascript:DocumentUpload()"
  TARGET="_self">Save and Close</A>
  </P>
  <OBJECT id=idUploadCtl name=idUploadCtl
  CLASSID=CLSID:07B06095-5687-4d13-9E32-12B4259C9813
  WIDTH='100%' HEIGHT='350px'>
  </OBJECT>
  </DIV>
  </FORM> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T17:55:52.833

终于找到了这个难题的答案（由旧的 SP 错误提供的提示：http: [//support.microsoft.com/kb/2489168](http://support.microsoft.com/kb/2489168)）输入值必须是相对 URL，因为 SharePoint Office 2010 将 http:// 附加到所有价值观。因此，如果您有完整的 URL，它将附加 http:// 两次。一旦我更改为相对路径，它就可以正常上传。

# ember.js - Ember.js：检查视图元素是否插入 DOM

> ID：10568757
> 
> 赞同：6
> 
> 时间：2012-05-13T01:50:45.300
> 
> 标签：ember.js

在 Ember.View 子类的方法中，我*只想在视图元素已插入 DOM*时对 DOM 进行更改。我该如何检查？

我知道我可以像这样创建一个辅助属性：

```
didInsertElement: function() {
  this.set('elementIsInserted', true);
}
willDestroyElement: function() {
  this.set('elementIsInserted', false);
} 
```

但是有一些规范的内置方式吗？

我没有找到任何略读[view.js](https://github.com/emberjs/ember.js/blob/master/packages/ember-views/lib/views/view.js)的内容，但也许我遗漏了一些东西。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-13T02:00:03.547

每个视图都有一个`_state`属性，在插入元素时将其设置为“inDOM”。

```
if (this._state=="inDOM") doStuff(); 
```

应该管用。确保你有正确的`this`！

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-05-13T07:06:06.427

如果你想避免设置一个辅助标志，你可以扩展 Ember.View：

```
Ember.View.reopen({
    didInsertElement: function() {
       this.set('elementIsInserted', true);
       this._super();
    },

    willDestroyElement: function() {
       this.set('elementIsInserted', false);
       this._super();
    }
}); 
```

现在每个扩展 Ember.View 的 View 都将获得上述内容。

Also a member of the core team suggested that you avoid referring to `inDOM` as it is an internal variable and not intended to be used in code.

# php - 如何在 wp_list_pages 的结束标记之前插入代码？

> ID：10568760
> 
> 赞同：0
> 
> 时间：2012-05-13T01:51:50.483
> 
> 标签：php, wordpress

我想在以下代码的结束标记之前插入另一个自动生成的 UL：

```
<?php wp_list_pages('include=4&title_li='); ?> 
```

我希望它像 link_after 一样运行，只是它必须是 li_after （不幸的是不存在？

你知道我该怎么做吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T02:02:43.197

在你的functions.php中添加这个：

```
class List_Append extends Walker_Page
{
    function end_el(&$output, $page, $depth)
    {
        $output .= "</li>";
        $output .= "your_ul_here";
    }
} 
```

然后像这样调用：

```
wp_list_pages(array('include' => '4', 'title_li' => '', 'walker' => new List_Append())); 
```

# java - Java中的重载和覆盖

> ID：10568772
> 
> 赞同：10
> 
> 时间：2012-05-13T01:55:57.950
> 
> 标签：java, overriding, computer-science, overloading

我知道如何重载方法，以及如何重写方法。但是有可能同时重载和覆盖一个方法吗？如果是，请举个例子。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-13T01:58:14.197

重载和覆盖是互补的东西，重载是指方法名相同但参数不同，而重载是指子类中方法名相同但参数相同。因此，重载和覆盖不可能同时发生，因为重载意味着不同的参数。

例子：

```
class A {
    public void doSth() { /// }
}

class B extends A {
    public void doSth() { /* method overriden */ }

    public void doSth(String b) { /* method overloaded */ }

} 
```

干杯!

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-13T02:09:00.667

重载和重载只是抽象。重载只是意味着编译器使用名称以及参数的类型和数量来确定要调用的函数。实际上，重载一个方法与命名它没有什么不同，因为编译器用来查找函数的键是名称和参数列表的组合。

`super`覆盖是一种相同的原理，除了编译器可以使用关键字来处理覆盖的函数。

那么你能覆盖一个重载的函数吗？是的，因为重载方法在编译器眼中是完全不同的方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-13T02:45:17.343

这取决于你的意思。方法可以是超类中重载方法的覆盖。并且您可以重载同时使用另一种方法覆盖的方法。

但是，您不能拥有一种既是*新*重载又是覆盖的方法。对于要成为覆盖的方法，具有相同签名的另一个方法必须已经存在于超类中......这意味着该方法不能成为*新*的覆盖。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-07-05T06:34:36.820

是的，有可能，您可以在同一个类中重载和覆盖一个函数，但您不能在两个不同的类中重载一个函数，因为这在逻辑上是不可能的。

```
#include <bits/stdc++.h>
using namespace std;

class Base {
   public:
    void print() 
    {
        cout << "Base Function" << endl;
    }
    void print(string name) //Overloaded Function
    {
        cout << "Base Function : " <<name<< endl;
    }
};

class Derived : public Base {
   public:
    void print() 
    {
        cout << "Derived Function" << endl;
    }
     void print(string name) //Overloaded Function
    {
        cout << "Derived Function : "<<name<< endl;
    }
};

int main() {
    Derived derived1, derived2;

    //accesses the print function in derived class
    derived1.print();

    //accesses the overloaded print function in derived class
    derived1.print("Gitanshu");

    //accesses the print function in base class
    derived2.Base::print();

    //accesses the overloaded print function in base class
    derived2.Base::print("Gitanshu");

    return 0;
} 
```

输出：

```
Derived Function
Derived Function : Gitanshu
Base Function
Base Function : Gitanshu 
```

我使用 C++ 回答了这个问题，Java 也是如此。

# iphone - iPhone 应用程序简单计算器 - 目标 c 错误

> ID：10568775
> 
> 赞同：0
> 
> 时间：2012-05-13T01:56:42.547
> 
> 标签：iphone, ios, xcode

我是 iOS 开发和目标 c 的新手。所以我想从一个简单的应用程序开始。我正在尝试为扑克牌游戏制作一个应用程序，记录每轮的得分。所以它只是将每支球队（两支球队）的分数相加。在应用程序界面中将有三个按钮和两个文本字段来添加分数和一个文本视图来查看所有记录的分数。

所以现在我在记录方法上，在 iPhone 模拟器中按下记录后出现运行时错误：

```
- (IBAction)record:(id)sender {
  //  NSString *slna = lna.text;
   // NSString *slhm = lhm.text;
    int x, y, resultx, resulty;
x  = [lna.text integerValue];
y  = [lhm.text integerValue];
resultx = 0;
resulty = 0;
resultx= resultx+x;
resulty= resulty+y;
alnashrah.text = [NSString stringWithFormat:@"%d      %d", resultx,resulty]; 
```

我收到的错误消息：“线程 1：断点 2.1”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-13T02:05:26.003

如果这是控制台告诉我们的所有信息，这不是错误消息，这意味着您添加了一个断点。在您的代码旁边，您会看到一条排水沟线，如果您按下它，您可以添加断点，这些断点是这些蓝色箭头的东西。这是一张图片：

![断点](../Images/840cb95dce0374954ea651892a666d54.png)

因此，要取消选择断点，只需单击它或右键单击它并按删除。

还要禁用断点：command+Y 或按顶部靠近停止按钮和方案栏和构建状态栏的断点选择按钮

# windows - 安装较新的 .NET 并运行从一个父进程使用它的子进程？

> ID：10568777
> 
> 赞同：0
> 
> 时间：2012-05-13T01:56:44.990
> 
> 标签：windows, testing, process, environment

我正在尝试在我的公司中自动化一些测试运行，并且我操作的约束是我有一个流程（我可以更改为运行我想要的任何东西），但是一旦它完成自动化清理机器。在此过程开始之前，我无法更改机器状态。

测试的要求是安装 .NET 4.5，然后启动另一个使用它的进程。

我面临的问题是第二个进程找不到在前面的步骤之一中安装的一些 .NET 4.5 dll（我基本上是启动安装程序进程，它完成然后我开始测试）。

如果我将桌面远程连接到该机器并再次手动启动测试过程，它会加载并正常工作。

所以我的问题是 - 有没有办法作为“系统”的孩子开始测试过程，或者我可以以某种方式让它重新加载环境？

# c++ - 如何使用 PeekMessage 检索除输入之外的所有消息（鼠标 + 键盘）

> ID：10568779
> 
> 赞同：7
> 
> 时间：2012-05-13T01:57:05.697
> 
> 标签：c++, winapi, events, input

我的代码中有一个循环函数，它调用`PeekMessage`以检索事件。

目前它看起来像这样：

```
while (PeekMessage(&Message, NULL, 0, 0, PM_REMOVE))
{
    // Process events
} 
```

现在我想在不同的位置管理输入，这意味着我想在我的主循环的不同时间在不同的地方检索诸如`WM_KEYDOWN`, （鼠标和键盘事件）之类的消息。`WM_MOUSEMOVE`

`PeekMessage`的第三个和第四个参数允许定义要返回的消息范围，所以我可以使用它，使用提供的宏`WM_KEYFIRST`、`WM_KEYLAST`和. 但这很不方便，因为我有两个范围来检查输入，因此剩下的所有内容都需要三个范围。`WM_MOUSEFIRST``WM_MOUSELAST`

最后一个参数是一个标志，我可以传递`PM_REMOVE | PM_QS_INPUT`输入。但是，我应该在另一个循环中传递什么，我想在哪里获取所有其他消息？没有`PM_QS_EVERYTHING_EXCEPT_INPUT`宏...

最优雅的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T10:12:58.023

您可以尝试使用“过滤器”。Win32 称之为“钩子”，看看 msdn 的 SetWindowsHookEx 函数。您可以为键盘和鼠标消息安装线程特定过滤器。然后您可以将消息推送到您的维护队列并稍后手动访问它（如果您选择从钩子中删除该线程的公共队列中的相关消息，那么只有您的用户队列才会有消息）。不过，在您感兴趣的每种情况下，您也可以直接从 PeekMessage 开关直接推送到此使用队列。

# node.js - 节点 Redis 客户端不使用方法“HMSET”

> ID：10568785
> 
> 赞同：1
> 
> 时间：2012-05-13T02:01:13.547
> 
> 标签：node.js, command, node-redis

我有以下失败的代码块：

```
this.redisClient.hmset('user:' + userObj.getUserId(), {
                'userId' : userObj.getUserId(),
                'salutation' : userObj.getSalutation(),
                'fn' : userObj.getFn(),
                'mi' : userObj.getMi(),
                'ln' : userObj.getLn(),
                'suffix' : userObj.getSuffix(),
                'userType' : userObj.getUserType(),
                'created' : userObj.getCreated()
            }); 
```

错误堆栈如下：

```
node.js:201
    throw e; // process.nextTick error, or 'error' event on first tick
          ^
TypeError: Cannot call method 'hmset' of undefined
at /node_apps/oc/api/v1/routes/user/db.user.js:70:34
at try_callback (/node_apps/oc/api/v1/node_modules/redis/index.js:484:9)
at RedisClient.return_reply (/node_apps/oc/api/v1/node_modules/redis/index.js:555:13)
at HiredisReplyParser.<anonymous> (/node_apps/oc/api/v1/node_modules/redis/index.js:256:14)
at HiredisReplyParser.emit (events.js:67:17)
at HiredisReplyParser.execute (/node_apps/oc/api/v1/node_modules/redis/lib/parser/hiredis.js:43:18)
at RedisClient.on_data (/node_apps/oc/api/v1/node_modules/redis/index.js:440:27)
at Socket.<anonymous> (/node_apps/oc/api/v1/node_modules/redis/index.js:70:14)
at Socket.emit (events.js:67:17)
at TCP.onread (net.js:329:14) 
```

我正在使用 Node Redis 客户端运行 Node 0.6.17。有什么见解吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T05:30:26.803

如果 Node 认为你在调用`hmset`on `undefined`，那意味着它认为那`this.redisClient`是未定义的；很多时候，这是因为 的值`this`不是你想象的那样（尽管它可能`redisClient`没有被初始化，等等）。`this`虽然如果没有看到周围的代码以及它是如何调用的就不可能说出来，但如果有必要，请检查以确保 的值是绑定的。

# php - 如何从php向Titanium mobile发送和接收多维数组？

> ID：10568790
> 
> 赞同：1
> 
> 时间：2012-05-13T02:02:15.683
> 
> 标签：php, ios, multidimensional-array, titanium, type-conversion

我是编程人员的新手，现在正在尝试使用 php 和 mysql 用于 IOS 应用程序的 Titanium mobile。

问题是，当我从 DB 获取一些数组数据并尝试传递给 Titanium 时，“this.responseText”包含“null”。

这是部分，

```
 loadReq.onload = function()  
    {  
        var json = this.responseText;
        var response = [];
        response = JSON.parse(json);
        Ti.API.info(response);
    };  

    loadReq.onerror = function(event)
    {
        alert("Network error");
        Ti.API.debug(event);
        Ti.API.info(event);
    };

    loadReq.open("POST","http://localhost/myAppName/post_loading.php");
        var params = {
            userid: win.userid
        };
        loadReq.send(params); 
```

这是我的php代码。

```
 <?php
    $con = mysql_connect('localhost','root','root');
    if (!$con)
    {
        echo "Failed to connect.";
        exit;
    }
    $db = mysql_select_db('myAppName');
    if (!$db)
    {
        echo "Failed at selecting db.";
        exit;
    }

    $userid = $_POST['userid'];

    $sql = "here is sql order which will fetch array data based on $userid";
    $query = mysql_query($sql);
    $response = array();

    if (mysql_num_rows($query) > 0)
    {
        $row = mysql_fetch_array($query);
        $response = $row;
        echo json_encode($response);
    }
    else
    {
        echo "there is no such data"; 
    }
    ?> 
```

php文件从数据库获取的数组数据是这样的，

```
 Array(
        [0] => Array(
                'id' => '1',
                'name' => 'name1',
                'sex' => 'm',
                'age' => '20'
               ),
        [1] => Array(
                'id' => '3',
                'name' => 'name3',
                'sex' => 'f',
                'age' => '25'
               ),
        [2] => Array(
                'id' => '5',
                'name' => 'name5',
                'sex' => 'm',
                'age' => '18'
               )
    ) 
```

我测试了一些案例，以确保 HTTPClient 工作正常，sql 顺序在语法上正确，并且能够正确传递单个数据（不是多维，而只是一个数组、值和单词）。

但是，目前还没有多维数组。Ti.API.info 只是告诉我响应是“null”

有什么建议吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T06:25:36.777

请务必在回显 json 之前设置您的内容类型。在回声之前添加：

```
header('Content-type: application/json'); 
```

这会在 http 请求中设置一个标头，以便钛中的 javascript 引擎知道如何正确处理响应数据

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T04:23:08.170

我终于明白了。只需要在 php 中添加 foreach 函数，而不仅仅是一个回显。

所以答案是；

```
 foreach($responses as $response)
    {
            echo $response;
    } 
```

这样一个简单的错误......花了足够长的时间:(希望这个问题可以节省很多其他人的时间。

# entity-framework - 如何让空间类型在 EF 中工作？

> ID：10568793
> 
> 赞同：1
> 
> 时间：2012-05-13T02:03:24.607
> 
> 标签：entity-framework, types, spatial

我有一个带有 SQL 几何列的表。现在我正在尝试使用 EF，但映射器不想包含它（现在应该支持它，[正如我在这里看到](http://msdn.microsoft.com/en-us/hh859721)的那样）。此外，我在 EF 设计器中找不到空间类型，[正如我在这里看到](http://blogs.msdn.com/b/efdesign/archive/2011/05/12/spatial-types-in-the-entity-designer.aspx)的那样。

到目前为止我已经做了：

```
PM> Install-Package EntityFramework –IncludePrerelease
'EntityFramework 5.0.0-beta2' already installed.
MyProject already has a reference to 'EntityFramework 5.0.0-beta2'. 
```

在此之后，引用的 EnitiyFramework.dll 的版本是：

```
4.4.0.0 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T06:56:37.470

可悲的是，如果您的目标是 .net 4，它将不起作用：`Some features are only available when writing an application that targets .NET 4.5\. This includes enum support, spatial data types, table-valued functions and the performance improvements. If you are targeting .NET 4.0 you still get all the bug fixes and other minor improvements.` 来源：http: [//blogs.msdn.com/b/adonet/archive/2012/03/22/ef5-beta-2-available-on-nuget .aspx](http://blogs.msdn.com/b/adonet/archive/2012/03/22/ef5-beta-2-available-on-nuget.aspx)

此外，如果您的目标是 4.5，请看这里：[How to get enums working in mvc4 with Entity Framework 5 Beta 2？](https://stackoverflow.com/questions/9896692/how-to-get-enums-working-in-mvc4-with-entity-framework-5-beta-2)

# asp.net-mvc-3 - 如何处理网络应用程序中的日期？

> ID：10568798
> 
> 赞同：-1
> 
> 时间：2012-05-13T02:04:37.643
> 
> 标签：asp.net-mvc-3, c#-4.0, mongodb

我的网络服务器在东海岸。我在太平洋标准时间下午 1 点（东部时间下午 4 点）从我的网络服务器发送了一封电子邮件。我住在西海岸，当我看到页面时，它显示下午 4 点，这对我来说是未来的时间。

我怎样才能看到下午 1 点、下午 4 点在东海岸的某个人等等？

日期存储在 UTC 的 MongoDB 中。我还在显示之前转换日期：

```
@Model.DateSent.ToLocalTime().ToString(); 
```

这是我设置发送邮件时间的方式：

```
DateTime.UtcNow <-- So I am storing date in UTC already 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T02:39:38.887

你的问题有两个部分。第一个是在 C# 中本地化 dateTime 的机制。由于我不是 Windows 用户，因此我将把它留给其他人来回答，或者让您在文档中查找，但我敢打赌 ToLocalTime() 有一个朋友需要 TimeZone 或 Locale .

第二部分更有趣，过去我不得不处理几次是如何知道要使用哪个时区。没有正确的答案，但有一些策略：

*   如果您的系统中有用户帐户的概念，那么最简单，也许是最好的方法就是简单地将语言环境设置为用户首选项。
*   如果没有始终登录的用户帐户的概念，则有几种方法可以使用
    *   您可以将其设置为保存在会话中的选择，但是每次都强制他们选择有点烦人
    *   更好的选择可能是对入站 IP 地址进行地理编码并从中进行设置。有地理编码应用程序、数据库和服务。大多数成本，但我知道 MaxMind 有一个免费的版本可以。这将主要工作。问题是用户通过一些大型专用网络来。我住在费城附近。我的家庭网络通常可以很好地进行地理编码，尽管一些服务将我置于我的 ISP 所在的特拉华州。但是在工作中，整个公司都通过一个网络代理出去，我看起来就像在北达科他州。
    *   更可靠，但可能更复杂的是，`getTimezoneOffset()`在 Javascript 中使用浏览器的时区并将答案推送到服务器。
*   我想另一种选择可能是在浏览器中本地转换时间，其中时区是免费可用的，但这意味着数据是通过 AJax 或类似方式下降，然后通过 JavaScript 更新。很好，如果您正在开发一个基本上基于 Ajax RIA 的应用程序，只需以 UTC 格式或 time_t 格式发送数据。但是对于一个尚未处理所有数据客户端的经典网络应用程序来说，这有点愚蠢和烦人。

我的第一选择是用户偏好。如果这不是一个选项，我可能会从客户端推送时区。如果这涉及太多，请使用 IP 地理定位。

# javascript - 需要帮助使用 d3.js 创建堆积条形图

> ID：10568802
> 
> 赞同：1
> 
> 时间：2012-05-13T02:05:44.347
> 
> 标签：javascript, d3.js

我目前正在尝试使用 d3.js 将这个（mbostock.github.com/d3/ex/stack.html）垂直堆叠条形图转换为水平堆叠条形图，但我没有运气。如果有人有来自 d3.js 的水平堆叠条形图的示例，或者知道如何正确修改以下代码或将我指向正确的方向，那将是一个很大的帮助。

```
var margin = 20,
 width = 960,
 height = 500 - .5 - margin,
 mx = m,
 my = d3.max(data, function(d) {
   return d3.max(d, function(d) {
     return d.y0 + d.y;
   });
 }),
 mz = d3.max(data, function(d) {
   return d3.max(d, function(d) {
     return d.y;
  });
 }),
 x = function(d) { return d.x * width / mx; },
 y0 = function(d) { return height - d.y0 * height / my; },
 y1 = function(d) { return height - (d.y + d.y0) * height / my; },
 y2 = function(d) { return d.y * height / mz; }; // or `my` to not rescale

var vis = d3.select("#chart")
.append("svg")
.attr("width", width)
.attr("height", height + margin);

var layers = vis.selectAll("g.layer")
.data(data)
.enter().append("g")
.style("fill", function(d, i) { return color(i / (n - 1)); })
.attr("class", "layer");

var bars = layers.selectAll("g.bar")
.data(function(d) { return d; })
.enter().append("g")
.attr("class", "bar")
.attr("transform", function(d) { return "translate(" + x(d) + ",0)"; });

 bars.append("rect")
.attr("width", x({x: .9}))
.attr("x", 0)
.attr("y", height)
.attr("height", 0)
 .transition()
.delay(function(d, i) { return i * 10; })
.attr("y", y1)
.attr("height", function(d) { return y0(d) - y1(d); }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-26T20:00:31.357

诀窍是：将其视为几乎与垂直堆叠条形图相同，但在堆叠之前反转 x 和 y 值，然后在堆叠后再次返回。请注意下面代码中的注释。

我的博客文章：[http ://datashaman.github.io/2014/01/26/horizo​​ntal-stacked-bar-chart-d3/](http://datashaman.github.io/2014/01/26/horizontal-stacked-bar-chart-d3/)

下面的代码演示：http: [//bl.ocks.org/datashaman/8621955](http://bl.ocks.org/datashaman/8621955)

jsFiddle：http: [//jsfiddle.net/datashaman/rBfy5/2/](http://jsfiddle.net/datashaman/rBfy5/2/)

```
<!doctype html>
<html>
    <head>
        <meta charset="utf-8">
        <style>
        .bar {
        }
        .axis path,
        .axis line {
            fill: none;
            stroke: black;
            shape-rendering: crispEdges;
        }
        .axis text {
            font-family: sans-serif;
            font-size: 11px;
        }

        #tooltip {
            position: absolute;
            text-align: center;
            width: 40px;
            height: auto;
            padding: 10px;
            background-color: white;
            -webkit-border-radius: 10px;
            -moz-border-radius: 10px;
            border-radius: 10px;
            -webkit-box-shadow: 4px 4px 10px rgba(0, 0, 0, 0.4);
            -moz-box-shadow: 4px 4px 10px rgba(0, 0, 0, 0.4);
            box-shadow: 4px 4px 10px rgba(0, 0, 0, 0.4);
            pointer-events: none;
        }

        #tooltip.hidden {
            display: none;
        }

        #tooltip p {
            margin: 0;
            font-family: sans-serif;
            font-size: 16px;
            line-height: 20px;
        }
        </style>
    </head>
    <body>
        <script src="http://d3js.org/d3.v3.min.js"></script>

        <div id="tooltip" class="hidden">
            <p><span id="value">100</span></p>
        </div>

        <script>
        var margins = {
                top: 12,
                left: 48,
                right: 24,
                bottom: 24
            },
            legendPanel = {
                width: 240
            },
            width = 700 - margins.left - margins.right - legendPanel.width,
            height = 100 - margins.top - margins.bottom,
            dataset = [
                {
                    data: [
                        { month: 'Aug', count: 123 },
                        { month: 'Sep', count: 234 },
                        { month: 'Oct', count: 345 }
                    ],
                    name: 'Series #1'
                },
                {
                    data: [
                        { month: 'Aug', count: 235 },
                        { month: 'Sep', count: 267 },
                        { month: 'Oct', count: 573 }
                    ],
                    name: 'Series #2'
                }

            ],
            series = dataset.map(function(d) { return d.name; }),
            dataset = dataset.map(function(d) {
                return d.data.map(function(o, i) {
                    // Structure it so that your numeric
                    // axis (the stacked amount) is y
                    return {
                        y: o.count,
                        x: o.month
                    };
                });
            }),
            stack = d3.layout.stack();

        stack(dataset);

        var dataset = dataset.map(function(group) {
            return group.map(function(d) {
                // Invert the x and y values, and y0 becomes x0
                return {
                    x: d.y,
                    y: d.x,
                    x0: d.y0
                };
            });
        }),
        svg = d3.select('body')
            .append('svg')
                .attr('width', width + margins.left + margins.right + legendPanel.width)
                .attr('height', height + margins.top + margins.bottom)
            .append('g')
                .attr('transform', 'translate(' + margins.left + ',' + margins.top + ')'),
        xMax = d3.max(dataset, function(group) {
            return d3.max(group, function(d) {
                return d.x + d.x0;
            });
        }),
        xScale = d3.scale.linear()
            .domain([0, xMax])
            .range([0, width]),
        months = dataset[0].map(function(d) { return d.y; }),
        _ = console.log(months),
        yScale = d3.scale.ordinal()
            .domain(months)
            .rangeRoundBands([0, height], .1),
        xAxis = d3.svg.axis()
            .scale(xScale)
            .orient('bottom'),
        yAxis = d3.svg.axis()
            .scale(yScale)
            .orient('left'),
        colours = d3.scale.category10(),
        groups = svg.selectAll('g')
            .data(dataset)
            .enter()
            .append('g')
                .style('fill', function(d, i) {
                    return colours(i);
                }),
        rects = groups.selectAll('rect')
            .data(function(d) { return d; })
            .enter()
                .append('rect')
                    .attr('x', function(d) { return xScale(d.x0); })
                    .attr('y', function(d, i) { return yScale(d.y); })
                    .attr('height', function(d) { return yScale.rangeBand(); })
                    .attr('width', function(d) { return xScale(d.x); })
                    .on('mouseover', function(d) {
                        var xPos = parseFloat(d3.select(this).attr('x')) / 2 + width / 2;
                        var yPos = parseFloat(d3.select(this).attr('y')) + yScale.rangeBand() / 2;

                        d3.select('#tooltip')
                            .style('left', xPos + 'px')
                            .style('top', yPos + 'px')
                            .select('#value')
                            .text(d.x);

                        d3.select('#tooltip').classed('hidden', false);
                    })
                    .on('mouseout', function() {
                        d3.select('#tooltip').classed('hidden', true);
                    })

        svg.append('g')
            .attr('class', 'axis')
            .attr('transform', 'translate(0,' + height + ')')
            .call(xAxis);

        svg.append('g')
            .attr('class', 'axis')
            .call(yAxis);

        svg.append('rect')
            .attr('fill', 'yellow')
            .attr('width', 160)
            .attr('height', 30 * dataset.length)
            .attr('x', width + margins.left)
            .attr('y', 0);

        series.forEach(function(s, i) {
            svg.append('text')
                .attr('fill', 'black')
                .attr('x', width + margins.left + 8)
                .attr('y', i * 24 + 24)
                .text(s);
            svg.append('rect')
                .attr('fill', colours(i))
                .attr('width', 60)
                .attr('height', 20)
                .attr('x', width + margins.left + 90)
                .attr('y', i * 24 + 6);
        });
    </script>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-13T10:42:12.830

试试 Frank Guerino 的示例： [http](http://bl.ocks.org/2141479) ://bl.ocks.org/2141479 - 水平条形图和 [http://bl.ocks.org/2354192](http://bl.ocks.org/2354192) - 多个 D3 自上而下和自下而上堆叠条形图（没有 d3.layout.stack ) 将水平代码与克里米亚示例或多个 D3 自上而下示例结合起来，您应该会走上正轨。您主要需要寻找的是如何在水平设置中计算坐标。其余的与任何其他堆栈示例相同。此致！

# joomla - 两个横幅没有在 joomla 中单独显示

> ID：10568804
> 
> 赞同：0
> 
> 时间：2012-05-13T02:06:14.427
> 
> 标签：joomla

我正在尝试使用安装随附的模板 beez_20 在 joomla 1.7 中的不同位置显示两个横幅，但两个横幅都出现在同一位置。我怎样才能将它们分开。我已将位置设置为位置 3 和位置 5，两个横幅都显示在两个位置上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T06:39:31.323

首次升级到 Joomla 2.5！不支持1.7！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T15:08:55.193

您需要拥有横幅模块的两个实例 - 一个在第一个位置发布，另一个在第二个位置发布。从模块管理器中，复制您拥有的模块，并相应地对每个模块进行更改

# bash - Bash - ack - 限制匹配行的长度

> ID：10568806
> 
> 赞同：4
> 
> 时间：2012-05-13T02:06:47.660
> 
> 标签：bash, limit, ack, args

有没有办法限制ack匹配的行的长度？如果 ack 匹配，例如，一个缩小的 javascript 文件，它打印出来的行可能非常大。我仍然希望它显示突出显示的匹配，但理想情况下，在匹配之前和之后使用省略号：`"... stuff match stuff ..."`. [在ack 文档](http://betterthangrep.com/documentation/)中没有看到任何结论性的内容。

我试着用类似的东西来挖掘它

```
ack pattern | awk '{print substr($0,1,200) }' 
```

但`awk`似乎正在剥离颜色和格式，这是不受欢迎的。我也尝试过（请耐心等待）：

```
ack pattern | ack pattern 
```

看看我是否可以重新确认每一行并将其切碎或其他东西，但这有同样的格式问题。管道 ack 输出明显消除了换行符？

根据评论编辑：

也许这将有助于解释我想要这个的主要原因。我使用 ack.vim 在我的项目中进行搜索。我经常想通过我的 javascript 文件来查找一个单词，比如“cookie”。我们在代码中对 jQuery 和其他缩小的库进行了版本控制，因此它们会显示在 ack 结果中。由于这些文件被缩小，因此很少有换行符，并且它在拆分窗口中显示了一条巨大的线，我必须滚动过去。我几乎从不关心那场比赛，所以占用这么多空间很烦人。我可以将那些缩小的文件名添加到我的 ackrc 中以忽略，但我不希望每次添加缩小库时都必须添加新文件名。ack.vim repo 上有一个关于这个[的未解决的问题。](https://github.com/mileszs/ack.vim/issues/30)我想知道是否可以纯粹通过 bash-fu 来做。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T00:23:08.167

你可以：

*   使用`-o`选项`Show only the part of a line matching PATTERN`
*   使用`-l`选项`Only print filenames containing matches`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-05T17:16:43.270

如果您真正想要的是忽略缩小的 Javascript 文件，请升级您的 ack。ack 1.96 及更高版本会忽略缩小的 JavaScript 文件。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-25T07:31:55.310

ack 在管道传输时巧妙地禁用颜色，但您可以使用以下命令覆盖它`--color`：

```
ack --color foo | cut -c1-80 | sed "s/$/\e[0;30m/" 
```

（最后一个管道是重置颜色，以防文本在选择中间被剪切）

`--heading`格式化 ( , `--break`)有类似的选项。

# java - spring mvc 重定向路径和所有子节点到另一个域

> ID：10568808
> 
> 赞同：2
> 
> 时间：2012-05-13T02:07:10.633
> 
> 标签：java, spring-mvc, http-redirect

我正在尝试解决如何从我的 webapp 重定向到另一台服务器，保留任何路径和 GET 变量。

例如

```
www.myapp.com/foo
foo.com

www.myapp.com/foo/bar
foo.com/bar

www.myapp.com/foo?bar=1
foo.com?bar=1 
```

理想情况下，我只想使用类似的东西

```
<mvc:view-controller path="/foo/**" view-name="redirect:http://foo.com**" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T00:29:40.303

我最终使用了过滤器。

从基础设施上看，这似乎是最简单的方法

过滤器实现：

```
public class DomainRedirectFilter extends OncePerRequestFilter {

    private String destinationDomain;
    private String sourceServletPath;

    @Override
    protected void doFilterInternal(HttpServletRequest request, 
             HttpServletResponse response, FilterChain filterChain)
             throws ServletException, IOException {
        String path = request.getServletPath();
        path = StringUtils.replace(path, getSourceServletPath(), "");
        if (request.getQueryString() != null) {
            path += '?' + request.getQueryString();
        }

        response.setHeader( "Location", getDestinationDomain() + path );
        response.setStatus(HttpServletResponse.SC_MOVED_PERMANENTLY);
        response.setHeader( "Connection", "close" );
    } 
```

web.xml

```
<filter>
    <filter-name>fooDomainRedirectFilter</filter-name>
    <filter-class>com.abc.mvc.util.DomainRedirectFilter</filter-class>
    <init-param>
        <param-name>destinationDomain</param-name>
        <param-value>http://foo.abc.com</param-value>
    </init-param>
    <init-param>
        <param-name>sourceServletPath</param-name>
        <param-value>/foo</param-value>
    </init-param>
</filter>

<filter-mapping>
    <filter-name>fooDomainRedirectFilter</filter-name>
    <url-pattern>/foo/*</url-pattern>
    <url-pattern>/foo</url-pattern>
</filter-mapping> 
```

我需要添加 2 个 url 模式以允许

```
/foo
/foo?id=1
/foo/bar
/foo/bar?id=1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-10-17T22:15:24.967

`Handler`如果您使用类似的东西，您也可以这样做`Jetty`。

```
public class DomainRedirectHandler extends HandlerWrapper {

    @Override
    public void handle(String target, Request baseRequest, HttpServletRequest request,
            HttpServletResponse response) throws IOException, ServletException {

        String hostName = request.getHeader("Host");
        if (hostName == null) {
            getHandler().handle(target, baseRequest, request, response);
            return;
        }

        // see if the host header has a domain name that we are redirecting
        hostName = hostName.toLowerCase();
        int index = hostName.indexOf(':');
        if (index >= 0) {
            // cut off the optional port suffix
            hostName = hostName.substring(0, index);
        }

        if (hostName.equals("some.domain.com")) {
            response.sendRedirect("https://some.other.domain.com");
        } else {
            getHandler().handle(target, baseRequest, request, response);
        }
    }
} 
```

这显然需要在处理程序链中的内容处理程序之前生效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-13T04:25:29.083

这样的事情可能应该通过 Apache 使用虚拟主机来完成。

这是一些文档的链接：

[http://httpd.apache.org/docs/2.0/vhosts/examples.html](http://httpd.apache.org/docs/2.0/vhosts/examples.html)

# ruby - Ruby rails - 资产的 RoutingError

> ID：10568809
> 
> 赞同：2
> 
> 时间：2012-05-13T02:07:23.780
> 
> 标签：ruby, ruby-on-rails-3

我的开发 rails env 无法读取图像文件。我`config.serve_static_assets = false`在`development.rb`. 但这并没有解决。我还需要在这里更改什么？

```
Started GET "/assets/images/ui-icons_888888_256x240.png" for 10.10.10.10 at 2012-05-12 22:02:32 -0400
Served asset /images/ui-icons_888888_256x240.png - 404 Not Found (45ms)

ActionController::RoutingError (No route matches [GET] "/assets/images/ui-icons_888888_256x240.png"): 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-13T02:21:30.673

确保您`config/application.rb`已配置为使用资产管道。

```
config.assets.enabled = true 
```

另外，请确保您的文件在正确的位置

```
/app/assets/images/ui-icons_888888_256x240.png 
```

现在您提到您正在使用 jQuery UI，您需要确保可以找到该资产。通常，您希望在以下位置找到它们：

```
/vendor/assets/images/* 
```

你如何做到这一点取决于你。您可以将所有图像从 jQuery UI 下载中的任何位置复制到该目录。

# asp.net-mvc-3 - 发布一个表格 mvc3

> ID：10568810
> 
> 赞同：0
> 
> 时间：2012-05-13T02:07:33.903
> 
> 标签：asp.net-mvc-3, action

我有一个链接和搜索按钮。单击搜索按钮会将页面发布到预定义的操作。现在单击链接应该将页面发布到另一个操作，并且应该将所有隐藏变量值的值发布到另一个操作。能不能做到。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-13T02:25:13.473

通常，一个链接会生成一个锚标记，它通常会给你一个**HTTP GET**请求。不是发帖请求。您可以在链接中提供参数，这些参数将被接受为`action`方法的参数

```
@Html.ActionLink("Search","Search","Items",new { @id="nokia" },null); 
```

这将生成一个带有名为 id 且值为 nokia 的查询字符串键的链接。

```
../Items/Search/nokia 
```

或者

```
../Items/Search?id=nokia 
```

并且您的带有`id`参数的操作方法可以处理此`GET`请求

```
public ActionResult Search(string id)
{
  //Do whatever you want to do with the value in id. return a view with results
} 
```

如果您真的想`HTTPPost`从链接中执行操作，您可以在 javascript 中获取链接的点击事件并进行 httppost 调用。下面的脚本使用 jQuery 库执行此操作。

```
$(function(){

  $("a").click(function(e){
    e.preventDefault();
    $.post($(this).attr("href"),function(result){
      //do whatever with the results 
    });
  }); 

}); 
```

但请确保您的控制器中有 ActionMethod 的 HttpPost 版本来处理此请求

```
[HttpPost]
public ActionResult Search(string id)
{
  //This is a POST request.Do whatever you want to do with the value in id. return a view with results
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-13T02:35:52.340

您不能`@Html.ActionLink`用于 HTTP POST（已**编辑：**除非您使用 javascript 函数通过指定 onClick HtmlAttribute 提交表单）。您可以改用提交按钮，并使用 jQuery 将它们设置为超链接。在这种情况下，您应该能够使用任何值发布您的模型。

或者，您可以使用`@Ajax.ActionLink`并指定`AjaxOptions { HttpMethod = "POST" }`

# post - 在 Chrome 扩展中向 Tumblr 的 API 发出 POST 请求

> ID：10568812
> 
> 赞同：2
> 
> 时间：2012-05-13T02:08:33.697
> 
> 标签：post, oauth, google-chrome-extension, tumblr

我正在尝试使用他们的 API 和 chrome_ex_oauth 向 Tumblr 发布文本。

*   API：[http ://www.tumblr.com/docs/en/api/v2#posting](http://www.tumblr.com/docs/en/api/v2#posting)
*   chrome_ex_oauth：[http ://code.google.com/chrome/extensions/tut_oauth.html](http://code.google.com/chrome/extensions/tut_oauth.html)

获得授权作品的全过程。我不能去工作的是做一个POST。我正在执行以下操作：

**编辑：我更新了代码以反映 Rob W 关于 body 字段的正确建议**

```
var stringify = function (parameters) {
  var params = [];
  for(var p in parameters) {
    params.push(encodeURIComponent(p) + '=' +
                encodeURIComponent(parameters[p]));
  }
  return params.join('&');
};

var onAuthorized = function() {
  var url = 'http://api.tumblr.com/v2/blog/jindie.tumblr.com/post';
  var request = {
    'method': 'POST',
    'headers':{
      'Content-Type':'application/x-www-form-urlencoded'
    },
    'body': stringify({
      'type': 'text',
      'state': 'draft',
      'title': 'Test post...',
      'body': 'Hello, World!'
    })
  };

  oauth.sendSignedRequest(url, function(responseText, xhr){alert(responseText);}, request);
};

oauth.authorize(onAuthorized); 
```

我一直在检查代码，并思考可能出了什么问题，但我真的不知道。你？

你知道我哪里错了吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-13T09:23:06.613

如果文档没有帮助，请查看源代码，[`chrome_ex_oauth.js`](http://src.chromium.org/viewvc/chrome/trunk/src/chrome/common/extensions/docs/examples/extensions/oauth_contacts/chrome_ex_oauth.js?content-type=text/plain).

您必须使用`'body'`而不是`'parameters'`：

```
var request = {
  'method': 'POST',
  'body': { 
```

## 调试

为了找到原因，我遵循了这些步骤（注释我的想法）：

1.  显然，帖子正文是空的。所以，API的实现肯定是错误的。
2.  Ctrl + F `sendSignedRequest`：

    ```
    ChromeExOAuth.prototype.sendSignedRequest = function(url, callback, opt_params) {
      var 方法 = opt_params && opt_params['method'] || '得到';
      var body = opt_params && opt_params['body'] || 无效的;
      var params = opt_params && opt_params['parameters'] || {}; 
      var headers = opt_params && opt_params['headers'] || {}; 

      var signedUrl = this.signURL(url, method, params ); 

      // 唔...？`params` 在哪里被传递...？
      ChromeExOAuth.sendRequest(方法, signedUrl, headers, body , function (xhr) {
        如果（xhr.readyState == 4）{
          回调（xhr.responseText，xhr）；
        }
      });
    };
    ```

3.  `signURL`不修改`params`，所以这不是问题。
4.  Ctrl + F `sendRequest`：

    ```
    ChromeExOAuth.sendRequest = function(method, url, headers, body , callback) {
      var xhr = new XMLHttpRequest();
      xhr.onreadystatechange = 函数（数据）{
        回调（xhr，数据）；
      }
      xhr.open（方法，网址，真）；
      如果（标题）{。. . }
      xhr.send(正文); // <-- !!! 
    };
    ```

5.  知道了！**`body`必须使用而不是`parameters`.**
6.  `body`将变量回溯到**`request['body']`**（参见 2）。

# html - 如何在同一个 VS2010 解决方案中从 .aspx 页面引用 .html 页面？

> ID：10568813
> 
> 赞同：-1
> 
> 时间：2012-05-13T02:08:52.867
> 
> 标签：html, visual-studio-2010, asp.net-mvc-2

这个问题与 VS 2010 中 MVC 项目文件夹中的 MVC 框架和文件排列约定有关。它还与项目文件的文件名\路径约定（从 *.aspx 和 *.html 引用它们）有关。

为了帮助回答这个问题，我创建了一个名为“PAPlus.Asp”（虚构名称）的示例项目。重现步骤：打开VS2010SP1Rel->File->NewProject->ASP.Net MVC 2 Empty Web Application->Name = "PAPlus.Asp"

**我的问题是：**如果我创建一个 MVC 2.0 应用程序（下面的示例）并想要链接位于我的项目文件夹中的 *.html 文件 ..\PAPlus.Asp\Views\Home\ShowCuteDog.html 我该怎么做`a href` index.aspx 中的 html 文件？

我正在使用以下数据提供者：

```
 <connectionStrings>

    <add name="PaPlus"
         connectionString="Data Source=|DataDirectory|PAPlus.sdf"
         providerName="System.Data.SqlServerCe.4.0"/>

  </connectionStrings> 
```

我创建了以下内容：

```
namespace PAPlus.Asp.Models
{
    public class User
    {
        public int UserId { get; set; }
        public string UserName { get; set; }
    }
}

namespace PAPlus.Asp.Models
{
    public class PaPlus : DbContext
    {
        public DbSet<User> Users { get; set; }
    }
}

namespace PAPlus.Asp.Controllers
{
    public class HomeController : Controller
    {
        PaPlus _paPlus = new PaPlus();

        public ActionResult Index()
        {
            var users = from u in _paPlus.Users
                        select u;

            return View(users);
        }

    public ActionResult Create()
    {
        return View();
    }

    [HttpPost]
    public ActionResult Create(User newUser)
    {
        if (ModelState.IsValid)
        {
            if (_paPlus.Users.Any(d => d.UserName == newUser.UserName))
            {
                ModelState.AddModelError("UserName", "The username is not unique");
                return View(newUser);
            }

            _paPlus.Users.Add(newUser);
            _paPlus.SaveChanges();

            return RedirectToAction("Index");
        }

        return View(newUser);

    }

}
} 
```

我还创建了 VIEWS，但它们太长了，无法在此处发布。我将继续我的解释显示`body`index.aspx：

```
<body>
    <div>   
        <h1>Application Users</h1>
    <ul>    
    <%
        foreach (User d in Model)
        {%>
        <li> 
            <%=d.UserName%> (<%=d.UserId%>)
        </li>
    <%
        }%>
    </ul>
    <p>
        <%=Html.ActionLink("Create New User", "Create")%>
    </p>
    <p>
        <a href="Views/Home/ShowCuteDog.html">Navigate to Cute Dog Page!</a>
    </p>
    </div>
</body> 
```

解释完上述所有内容后，我可以针对需要帮助的特定行：

```
<a href="Views/Home/ShowCuteDog.html">Navigate to Cute Dog Page!</a> 
```

显然 ShowCuteDog.html 的路径是无效的。但是，似乎无论我做什么，我都无法输入有效路径。

我想知道如何使用打开 ShowCuteDog.html`a href`

我还想知道在我的 MVC 项目解决方案文件夹结构中应该将 ShowCuteDog.html 存储在哪里（/Views/Home/ 似乎是最好的地方，也许我错了？）

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T02:15:27.557

您不应将内容放在`Views` 将直接链接的内容之下。默认情况下，浏览器对该路径的访问被阻止`Views/web.config` ，并且有很好的理由：您不*希望*用户直接从那里加载文件。

所以你应该把纯html放在别的地方；也许`/html` 代替？然后将其链接为`<a href="/html/cutepuppies.html">`

# javascript - 替换某个点之前的所有文本

> ID：10568815
> 
> 赞同：8
> 
> 时间：2012-05-13T02:08:58.677
> 
> 标签：javascript, jquery, regex

```
$(function(){
    var alphabet = "ABCDEFGHIJKLMNOPQRSTUVEXYZ";
    var replaced = alphabet.replace(/(M).+$/,'');
    $('body').text(replaced);
}); 
```

我怎样才能让它朝着相反的方向发展，替换`M`它之前的一切？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-05-13T02:10:12.337

使用`/^.+M/`表达式：

```
$(function() {
    var alphabet = "ABCDEFGHIJKLMNOPQRSTUVEXYZ";
    var replaced = alphabet.replace(/^.+M/,'');
    $('body').text(replaced);
}); 
```

**演示：http:** [//jsfiddle.net/kbZhU/1/](http://jsfiddle.net/kbZhU/1/)

* * *

更快的选择是使用[`indexOf`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/indexOf)和[`substring`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/substring)方法：

```
$(function(){
    var alphabet = "ABCDEFGHIJKLMNOPQRSTUVEXYZ";
    var replaced = alphabet.substring(alphabet.indexOf("M") + 1);
    $('body').text(replaced);
}); 
```

**演示： http:** [//jsfiddle.net/kbZhU/2/](http://jsfiddle.net/kbZhU/2/) ​</p>

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-11-01T03:16:22.143

这是使用[split](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/split)方法的另一种方法：

```
$(function(){
    var alphabet = "ABCDEFGHIJKLMNOPQRSTUVEXYZ";
    var replaced = alphabet.split("M")[1];
    $('body').text(replaced);
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-09-05T21:26:26.233

仅供参考，如果您尝试使用多个字母来执行此操作，则必须对其进行一些更改。

使用@VisioN 解决方案，我试图替换 URL 中的任何内容直到某个点。

所以要在 'google.com' in 之后得到所有东西`https://www.google.com/analytics`，我必须这样做

```
const url = 'https://www.google.com/analytics'
const lookingFor = 'google.com'
const replaced = url.substring(url.indexOf(lookingFor) + lookingFor.length) 
```

`replaced`然后将返回`/analytics`

# iphone - RestKit 升级到 0.10.0 后崩溃

> ID：10568819
> 
> 赞同：0
> 
> 时间：2012-05-13T02:10:22.140
> 
> 标签：iphone, objective-c, restkit

我似乎能够很好地启动restkit并使用传统的loadobjectsatresourcepath：delegate：方法加载对象。但是，当我引入 block:^{} 时，restkit 每次都会崩溃。

```
[[RKObjectManager sharedManager] loadObjectsAtResourcePath:@"/api/v1/places" delegate:self block:^(RKObjectLoader* loader) {
    loader.objectMapping = [[RKObjectManager sharedManager].mappingProvider objectMappingForClass:[Place class]];
}]; 
```

我在日志中得到这个：

```
2012-05-12 19:07:32.266 App - [RKObjectManagerloadObjectsAtResourcePath:delegate:block:]: unrecognized selector sent to instance 0x3aa2e0
2012-05-12 19:07:32.268 App - *** Terminating app due to uncaught exception 'NSInvalidArgumentException', 
reason: '-[RKObjectManager   loadObjectsAtResourcePath:delegate:block:]: unrecognized selector sent to instance 0x3aa2e0' 
```

关于如何解决这个问题的任何想法？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T03:02:01.283

异常告诉您确切的问题是什么：`RKObjectManager`不响应`loadObjectsAtResourcePath:delegate:block:`. 快速浏览 API 文档会发现[原始方法](http://restkit.org/api/0.9.3/Classes/RKObjectManager.html#//api/name/loadObjectsAtResourcePath%3adelegate%3ablock%3a)在 0.10.0 中不再存在，并且似乎已被替换为[loadObjectsAtResourcePath:usingBlock:](http://restkit.org/api/0.10.0/Classes/RKObjectManager.html#//api/name/loadObjectsAtResourcePath%3ausingBlock%3a)。

您应该能够通过使用新方法来避免异常：

```
[[RKObjectManager sharedManager] loadObjectsAtResourcePath:@"/api/v1/places" usingBlock:^(RKObjectLoader* loader) {
    loader.objectMapping = [[RKObjectManager sharedManager].mappingProvider objectMappingForClass:[Place class]];
}]; 
```

# git - 将设置保留在分支中

> ID：10568822
> 
> 赞同：5
> 
> 时间：2012-05-13T02:10:37.213
> 
> 标签：git, version-control, branch, git-branch, branching-and-merging

我开始使用 git 进行软件开发。

我在 github 上有一个项目。该项目还涉及一些存储在专用设置文件中的用户设置。

在 github 上的设置应该是空的（像这样）

```
### Settings:

## Your name
$name = "";
## Your email adress
$email = "";
## and so on 
```

但是，我的计算机（或服务器）上也正在运行该项目。我个人版本的项目应该填写所有设置。

我想为此开设两个分支机构。个人分支应该包含我所有的设置。master 分支应该是我开发软件并上传到 github 的分支。

我想不时将主分支合并到个人分支中，以使我的系统保持最新。但是，每当我尝试合并分支时，我的个人设置都会丢失。

有没有办法做到这一点，或者我只是做错了什么（什么）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-13T12:53:03.573

在您的个人分支中，您可以保留：

*   GitHub 配置文件未更改（没有值），但名称不同（`config.template`例如）
*   具有您个人价值的“价值文件”
*   一个“涂抹”脚本，能够使用模板一和您的个人值生成实际的配置文件

该脚本在任何`git checkout`内容[过滤器驱动程序](https://stackoverflow.com/questions/10571358/what-is-the-right-way-to-maintain-a-version-for-the-server-with-only-config/10571580#10571580)上触发。

![在此处输入图像描述](../Images/fb8968bf1c8a2ec89e491ed99207bbed.png)

这样，您可以`master`根据需要多次合并到您的个人分支，您的配置值不会被修改。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-13T02:21:03.610

您可以创建一个类似的设置文件`setting-sample`，并修改`.gitignore`以忽略真正的设置文件（即`setting`）。因此空的设置文件将保存在远程仓库中，而您的个人设置文件将保存在本地仓库中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-13T02:19:29.930

您可以提交空设置文件，然后提交指向原始文件的 .gitignore 文件，因此在这种情况下，用户将下载该文件，但 git 将忽略用户所做的更改。

# java - 带有 url 别名的空会话

> ID：10568823
> 
> 赞同：0
> 
> 时间：2012-05-13T02:11:36.123
> 
> 标签：java, servlets, jboss

jboss 5.1 我有一个应用程序（战争）部署到代理服务器。
我在 jboss 部署目录中放置了一个注销 servlet，并将其映射到 server/default/deployers/jbossweb-deployer/web.xml 以便任何部署的应用程序都可以使用它。我们希望用户能够使用基本 url 访问该站点：

```
http://ourAwesomeSite/ 
```

与战争名称：

```
http://ourAwesomeSite/ourAwesomeApp.home.seam 
```

为此，我将其添加到 deploy/ROOT.war/index.html：

```
<META HTTP-EQUIV="Refresh" CONTENT="0; URL=/ourAwesomeApp"/> 
```

但现在我的注销 servlet 不再正常工作。

在 doGet 方法中 session 始终为 null，因此我不能使 session 无效。用户注销，他们当前的会话不会失效，之后登录的任何人（除非浏览器关闭）都会获得前一个用户的会话。注销Servlet：

```
 public void doGet(HttpServletRequest request,  HttpServletResponse response) throws java.io.IOException, 
                ServletException {
            System.out.println("**********************  logout servlet");

            HttpSession session = request.getSession(false);
// session is always null
            if (!this.isSessionInvalid(request) && session != null) {
                System.out.println("invalidating user session ... maybe");
                session.invalidate();

            }
            System.out.println("redirecting to SSO logout");
            response.sendRedirect("https://ssologoutpage/logout.html");

        } 
```

server/default/deployers/jbossweb-deployer/web.xml 条目和映射：

```
<servlet>
      <servlet-name>LogoutServlet</servlet-name>
      <servlet-class>com.whatev.log.security.session.management.LogoutServlet</servlet-class>
     </servlet>
    <servlet-mapping>
      <servlet-name>LogoutServlet</servlet-name>
    <url-pattern>/web/logout.html</url-pattern>
    <url-pattern>/logout.html</url-pattern>
    </servlet-mapping> 
```

我不确定请求会话如何设置为空。有人有想法么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T10:00:20.607

您应该查看设置虚拟主机而不是重定向到另一个 Web 应用程序页面。请找到[设置虚拟主机](http://wiki.unixcraft.com/display/MainPage/Application+Virtual+Hosts)

# debugging - Windows Phone 应用程序无法在真实设备上调试

> ID：10568825
> 
> 赞同：0
> 
> 时间：2012-05-13T02:12:59.013
> 
> 标签：debugging, windows-phone-7

我为 Windows Phone 开发了一个应用程序，它在模拟器上运行良好。但我想在我的手机三星 Omnia 7 上调试应用程序，所以我在 Visual Studio 2010 中将目标从“Windows Phone Emulator”更改为“Windows Phone Device”，然后点击运行按钮。

然后我收到错误消息：“无法启动应用程序进行调试。确保目标设备屏幕已解锁并且已安装应用程序。”

好吧，我确实解锁了屏幕，实际上，我的设备上安装了应用程序，但唯一的问题是，我无法调试它。

我一直在谷歌搜索，但没有好处。我的 rom 的操作系统版本是 7.10.7720.68，我使用的是 Omnia 7，它已经通过我的开发者 ID 进行了验证。

有人遇到过同样的情况吗？有什么建议吗？

提前致谢！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T15:16:36.413

首先，您需要确认您是否运行了 Zune 应用程序并确保您的 Windows 手机设备已连接状态，然后单击调试按钮。

第二。如果您的开始屏幕设置了密码。当您需要在开始屏幕上制作您的设备之前获得debuy操作员。</p>

三。调试Windows手机需要您已经使用开发者帐户已经解锁您的设备。

有所有核心三步。，

# media-queries - 响应式网站无法在 iPad 上运行

> ID：10568827
> 
> 赞同：1
> 
> 时间：2012-05-13T02:13:41.023
> 
> 标签：media-queries, responsive-design

我正在创建自己的框架，并且一直在查看其他样板以了解它是如何完成的。

我目前正在查看[这个](http://demo.mattbrett.com/bare-bones-stylesheet/)简单的样式表，并想知道为什么当您调整浏览器大小时它似乎会做出响应，但是当我在 iPhone 或 iPad 上打开它时，它会显示网站的全屏版本。

抱歉，如果这是菜鸟问题，我仍在尝试围绕媒体查询（没有双关语）。

提前致谢。

**更新：**愚蠢的我，我忘了添加元标记来告诉 iPad 等设备将设备宽度设置为其视口的大小。

```
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T20:47:48.833

**更新：**愚蠢的我，我忘了添加元标记来告诉 iPad 等设备将设备宽度设置为其视口的大小。

```
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"> 
```

# sas - SELECT 语句 SAS 中的 INTCK 函数

> ID：10568828
> 
> 赞同：0
> 
> 时间：2012-05-13T02:14:27.887
> 
> 标签：sas

我很难让 INTCK 函数返回我正在使用以下查询的结果

```
proc sql;
CREATE TABLE SASAVE.WEEK_NUM AS
SELECT DISTINCT MUC.CODE
        ,MUC.LOB
        ,MMD.MAX_DATE
        ,MMD.MIN_DATE
        ,INTCK('WEEK', MMD.MAX_DATE, MMD.MIN_DATE) AS WEEK_COUNT
FROM    SASAVE.MUC,
        MMD             
WHERE MMD.LOB = MUC.LOB
AND MMD.CODE = MUC.CODE
quit; 
```

这是 MUC 和 MMD 表中的数据

```
 **MMD**
    MIN_DATE         MAX_DATE       CODE    LOB
    13FEB2012   11MAY2012   527A    TMZ
    13FEB2012   1MAY2012    TB50    ZAE
    13FEB2012   10MAY2012   3O05    ZAA

**MUC**
CODE      LOB
527A    TMZ
TB50    ZAE
3O05    ZAA 
```

请告诉我是否可以使用 INTCK 函数获取周数

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T16:08:37.520

好像你几乎是对的……这行得通。

```
Data mmd;
 input min_date:DATE9\. max_date:date9\. code $ lob $;
 format min_date max_date mmddyy10.;
 datalines;
13FEB2012   11MAY2012   527A    TMZ
13FEB2012   01MAY2012    TB50    ZAE
13FEB2012   10MAY2012   3O05    ZAA
;

Data muc;
 input code $ lob $;
 datalines;
527A    TMZ
TB50    ZAE
3O05    ZAA
;

proc sql;
 CREATE TABLE WEEK_NUM AS
 SELECT DISTINCT MUC.CODE
  ,MUC.LOB
  ,MMD.MAX_DATE
  ,MMD.MIN_DATE
  ,INTCK('WEEK', MMD.MIN_DATE, MMD.MAX_DATE) AS WEEK_COUNT
 FROM MUC, MMD             
 WHERE MMD.LOB = MUC.LOB
  AND MMD.CODE = MUC.CODE;
quit; 
```

# javascript - 用于制作像 Evernote 这样的“菱形”样式按钮的 Javascript 库，同时从自动完成下拉列表框中累积选择？

> ID：10568831
> 
> 赞同：0
> 
> 时间：2012-05-13T02:15:36.410
> 
> 标签：javascript, jquery, autocomplete, evernote

适用于 Chrome 的 Evernote Web Clipper 扩展有一个“菱形”样式按钮，该按钮是为您从自动完成下拉列表框中选择的每个标签（标签 = 单词或短语条目）创建的。菱形类似于堆栈溢出标签，因为它们看起来像小彩色按钮，中间有标签文本，右上角有一个小“x”来删除标签。不同之处在于 Evernote 使用具有自动完成功能的下拉列表框，该列表框从您正在输入的编辑框正下方向下滚动，该编辑框正在累积您的标签选择。因此，当您选择每个标签时，您最终会在您当前输入的条目后面看到一行菱形。单击菱形的删除迷你框会从编辑框中删除菱形。

这是一系列非常复杂的操作，尝试使用标准 JQuery 元素或类似项目之一来复制它将是大量工作（尤其是用于删除迷你框的菱形绘图和事件处理）。是否有具有相同功能的 Javascript 库？如果是这样，请告诉我图书馆的名称（如果有链接）以及我需要学习的模块或元素。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T02:50:47.527

如果您指的是 url 中的图片（我的声誉不允许我上传。:()，我相信有一些类似的问题的答案指向正确的插件。

Evernote Web Clipper 截图：http: [//i.imgur.com/oQT6H.png](https://i.imgur.com/oQT6H.png)

如果是这样，可以在这里找到答案：[plugin to separate tags (like the stackoverflow's input tags interface)](https://stackoverflow.com/questions/5031162/plugin-to-separate-tags-like-the-stackoverflows-input-tags-interface)

# java - Java 进程构建器

> ID：10568840
> 
> 赞同：1
> 
> 时间：2012-05-13T02:19:56.847
> 
> 标签：java, process, processbuilder

我在使用 ProcessBuilder 在我的项目中运行一个类时遇到问题。我的代码：

```
public class Main {
    public static void main(String[] args) {
        try {
            String pathToJar = Main.class.getProtectionDomain().getCodeSource()
                    .getLocation().toURI().getPath();
            ArrayList<String> params = new ArrayList<String>();    
            params.add("javaw");
            params.add("-classpath");
            params.add(pathToJar);
            params.add("Program");
            ProcessBuilder pb = new ProcessBuilder(params);
            Process process = pb.start();
        } catch (Exception e) {
            e.printStackTrace();
        }
    }
} 
```

类程序在同一个项目（同一个 bin 文件夹）中，如果直接运行，可以正常工作，但这样我得到错误“找不到主类：程序”。我的代码中的错误在哪里？

提前致谢。

[编辑] 我得出的结论是我的 Program 类上的一些代码给出了错误。基本上只运行“干净”的主要。在 Eclipse 中，Program 类正在导入 jar 文件中的一些库。我不需要在 ProcessBuilder 中引用它吗？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T03:16:01.420

回应您的编辑：

`params.add(pathToJar);`您可以通过切换来添加当前路径`params.add(System.getProperty("java.class.path").concat(";").concat(pathToJar))‌​;`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-13T02:26:24.480

> 我的代码中的错误在哪里？

（您正在启动`javaw`可执行文件，所以这不是问题。也不是您的入口点方法的签名不正确，因为这会给出不同的诊断。）

问题是类名不正确（例如，如果应该是“come.pkg.Program”），或者 JAR 文件的路径名不正确。

* * *

假设您已经消除了类名不正确的可能性，我的猜测是您正在尝试对 JAR 文件使用相对路径名，但是对于当前目录是什么存在一些混淆；即需要解析路径名的目录。尝试在类路径参数中使用绝对路径名。

# sql - 使具有同步服务的 OCA 使用动态表名

> ID：10568843
> 
> 赞同：0
> 
> 时间：2012-05-13T02:20:49.087
> 
> 标签：sql, syncservices, occasionallyconnected

我正在开发基于 SQL 服务器数据库和 SQL CE 客户端数据库的 OCA 应用程序。每个用户在 SQL 服务器数据库中都有自己的表。每个用户的表具有相同的架构，但可以有不同的数据。我想根据他们的 SQL 服务器数据库表名（设置为 userID +“__usersdatatable”）在客户端应用程序中动态设置同步表名称。

当我不尝试更改任何内容时，同步服务运行没有问题。我最新的想法是改变 SyncTable.TableName = "jsmith_usersdatatable"; 在 oninitialized() 方法的 LocalDataCache1SyncAgent.cs 中。但是，我收到以下错误：

“无法初始化客户端数据库，因为 DbServerSyncProvider 的 GetSchema() 方法无法检索表 'zlentz_GOBOS' 的架构。请确保您可以建立到客户端数据库的连接，并且 SelectIncrementalInsertsCommand 属性或 SelectIncrementalUpdatesCommand SyncAdapter 的属性指定正确。”

简而言之，每个 OCA 都需要同步到不同的表（双向）。我显然不是 SQL 或同步服务专家，所以建议会有所帮助。：） 提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T03:58:37.003

在了解了有关 Sync Framework 的更多信息后，很明显我需要在向导之外工作。

对于未来的观众，以下链接非常有帮助：

[http://www.codeproject.com/Articles/18027/Take-Data-Offline-Using-Microsoft-Synchronization](http://www.codeproject.com/Articles/18027/Take-Data-Offline-Using-Microsoft-Synchronization)

# c - C MPI - 批量产生多个线程

> ID：10568845
> 
> 赞同：2
> 
> 时间：2012-05-13T02:21:08.317
> 
> 标签：c, mpi

我有一个关于 C 语言 MPI 编程的基本问题。基本上我想要的是有一个主进程产生特定数量的子进程，从所有子进程中收集一些信息（等到所有子进程完成），计算一些metric，基于这个metric，它决定是否必须产生更多的线程......它会一直这样做，直到metric满足某些特定条件。我翻遍了文献，无济于事。如何才能做到这一点？任何指针？

谢谢您的帮助。

礼貌：[使用 C 的消息传递接口 (MPI) 简介](http://condor.cc.ku.edu/~grobe/docs/intro-MPI-C.shtml)。在“对数组求和的完整并行程序”中，可以说，“出于某种蹩脚的原因”，我希望主进程对数组的内容求和两次。即在第一次迭代中，主进程启动计算数组总和的从进程，一旦它们完成并且主进程返回值，我想调用主进程来重新调用另一组线程来执行再次计算。为什么下面的代码不起作用？我在产生从属进程的主进程进程周围添加了一个while循环。

```
 #include <stdio.h>
  #include <mpi.h>

  #define max_rows 100000
  #define send_data_tag 2001
  #define return_data_tag 2002

  int array[max_rows];
  int array2[max_rows];

main(int argc, char **argv) 
 {
   long int sum, partial_sum,number_of_times;

  number_of_times=0;

  MPI_Status status;

  int my_id, root_process, ierr, i, num_rows, num_procs,
     an_id, num_rows_to_receive, avg_rows_per_process, 
     sender, num_rows_received, start_row, end_row, num_rows_to_send;

  /* Now replicte this process to create parallel processes.
   * From this point on, every process executes a seperate copy
   * of this program */

  ierr = MPI_Init(&argc, &argv);

  root_process = 0;

  /* find out MY process ID, and how many processes were started. */

  ierr = MPI_Comm_rank(MPI_COMM_WORLD, &my_id);
  ierr = MPI_Comm_size(MPI_COMM_WORLD, &num_procs);

  if(my_id == root_process) {

     /* I must be the root process, so I will query the user
      * to determine how many numbers to sum. */

     //printf("please enter the number of numbers to sum: ");
     //scanf("%i", &num_rows);

      num_rows=10;

      while (number_of_times<2)
      {

      number_of_times++;
      start_row=0;
      end_row=0;

     if(num_rows > max_rows) {
        printf("Too many numbers.\n");
        exit(1);
     }

     avg_rows_per_process = num_rows / num_procs;

     /* initialize an array */

     for(i = 0; i < num_rows; i++) {
        array[i] = i + 1;
     }

     /* distribute a portion of the bector to each child process */

     for(an_id = 1; an_id < num_procs; an_id++) {
        start_row = an_id*avg_rows_per_process + 1;
        end_row   = (an_id + 1)*avg_rows_per_process;

        if((num_rows - end_row) < avg_rows_per_process)
           end_row = num_rows - 1;

        num_rows_to_send = end_row - start_row + 1;

        ierr = MPI_Send( &num_rows_to_send, 1 , MPI_INT,
              an_id, send_data_tag, MPI_COMM_WORLD);

        ierr = MPI_Send( &array[start_row], num_rows_to_send, MPI_INT,
              an_id, send_data_tag, MPI_COMM_WORLD);
     }

     /* and calculate the sum of the values in the segment assigned
      * to the root process */

     sum = 0;
     for(i = 0; i < avg_rows_per_process + 1; i++) {
        sum += array[i];   
     } 

     printf("sum %i calculated by root process\n", sum);

     /* and, finally, I collet the partial sums from the slave processes, 
      * print them, and add them to the grand sum, and print it */

     for(an_id = 1; an_id < num_procs; an_id++) {

        ierr = MPI_Recv( &partial_sum, 1, MPI_LONG, MPI_ANY_SOURCE,
              return_data_tag, MPI_COMM_WORLD, &status);

        sender = status.MPI_SOURCE;

        printf("Partial sum %i returned from process %i\n", partial_sum, sender);

        sum += partial_sum;
     }

     printf("The grand total is: %i\n", sum);

      }

  }

  else {

     /* I must be a slave process, so I must receive my array segment,
      * storing it in a "local" array, array1\. */

     ierr = MPI_Recv( &num_rows_to_receive, 1, MPI_INT, 
           root_process, send_data_tag, MPI_COMM_WORLD, &status);

     ierr = MPI_Recv( &array2, num_rows_to_receive, MPI_INT, 
           root_process, send_data_tag, MPI_COMM_WORLD, &status);

     num_rows_received = num_rows_to_receive;

     /* Calculate the sum of my portion of the array */

     partial_sum = 0;
     for(i = 0; i < num_rows_received; i++) {
        partial_sum += array2[i];
     }

     /* and finally, send my partial sum to hte root process */

     ierr = MPI_Send( &partial_sum, 1, MPI_LONG, root_process, 
           return_data_tag, MPI_COMM_WORLD);
  }

  ierr = MPI_Finalize();
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T04:46:55.167

MPI-2 标准包括流程管理功能。它在[第 5 章](http://www.mcs.anl.gov/research/projects/mpi/mpi-standard/mpi-report-2.0/node89.htm)中有详细描述。虽然我自己没有使用它，所以也许其他人可能会提供更实用的提示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T12:22:07.923

您应该从查看 MPI_Comm_spawn 和集体操作开始。要从旧的子进程收集信息，通常会使用 MPI_Reduce。

[这个stackoverflow问题](https://stackoverflow.com/questions/9970409/mpi-spawn-root-process-does-not-communicate-to-child-processes)也可能有帮助。

```
...to spawn more threads... 
```

我猜你的意思是正确的，因为你主要使用“进程”而不是“线程”，但只是为了澄清：MPI 只处理进程而不是线程。

我不确定您对 MPI 的了解程度——让我知道我的回答是否有帮助或者您是否需要更多提示。

# java - 将半透明的 BufferedImage 转换为 Shape 对象

> ID：10568846
> 
> 赞同：1
> 
> 时间：2012-05-13T02:21:20.363
> 
> 标签：java, graphics

我面临一个问题，我想将 a 转换`BufferedImage`为`Shape`对象并排除所有透明像素。

我想出的算法非常糟糕，但有效。我想知道是否有人知道获得相同结果的更有效方法。这是我目前所拥有的：

```
// O(n^2)
Area a = new Area();
Rectangle r = new Rectangle();
r.setSize(1,1);
for(int x = 0; x < image.getWidth(); x++)
    for(int y = 0; y < image.getHeight(); y++)
         if(image.getRGB(x,y) >>> 24 > 0){
             r.setLocation(x,y);
             a.add(new Area(r));
         }
return a; 
```

# c++ - 在 Windows 上使用 openssl 库生成随机密钥/数据

> ID：10568847
> 
> 赞同：0
> 
> 时间：2012-05-13T02:21:20.457
> 
> 标签：c++, c, cryptography, openssl

我需要生成随机数据（用于密钥、IV 等），但我似乎找不到正确的方法。

这是背景 - 我正在使用 Visual Studio 在 Windows 上使用 c/c++ 开发我的服务器，并且正在使用 openssl1.0.1c 库。

[我正在阅读http://www.openssl.org/docs/crypto/RAND_add.html#](http://www.openssl.org/docs/crypto/RAND_add.html#)上使用 openssl 生成随机数据的文档并偶然发现以下内容 -

"

OpenSSL 确保 PRNG 状态对于每个线程都是唯一的。**在提供 /dev/urandom 的系统上，随机设备用于透明地播种 PRNG。但是，在所有其他系统上，应用程序负责通过调用 RAND_add()、RAND_egd(3) 或 RAND_load_file(3) 来播种 PRNG。**

当 num == entropy 时，RAND_seed() 等效于 RAND_add()。

RAND_event() 从 Windows 事件（例如鼠标移动和其他用户交互）中收集熵。应该使用发送到窗口过程的所有消息的 iMsg、wParam 和 lParam 参数调用它。它将估计事件消息（如果有）中包含的熵，并将其添加到 PRNG。然后程序可以像往常一样处理这些消息。

RAND_screen() 函数可用于方便 Windows 程序员。它将屏幕的当前内容添加到 PRNG。对于可以捕获 Windows 事件的应用程序，通过调用 RAND_event() 播种 PRNG 是更好的随机源。**应该注意的是，这两种方法都不能在没有用户交互的情况下运行的服务器上使用。** "

现在，我的服务器确实在无人值守模式下运行，所以我想我不能使用 Rand_event() 和 Rand_screen() 方法。如何在 Windows 上安全地使用 Rand_bytes() 方法？我还没有带有熵的文件，因此 RAND_load_file() 没有问题，EGD 文档页面上的链接似乎没有 Windows 支持的 EGD。如何确保 openssl 随机数据生成器具有足够的熵，以便我可以使用 Rand_bytes() 生成我的密钥/ivs/salts 等？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T23:24:27.950

您应该能够简单地调用`RAND_bytes`而不用担心初始化。我不确定该参考手册页中的含义，但我怀疑它有点过时了。OpenSSL 具有针对 RAND_bytes 的操作系统特定的初始化代码。例如，如果 v1.0.0c可用，`CryptGenRandom`则从其调用`RAND_poll`。

不过，检查 RAND_bytes 的返回值可能是有意义的。如果初始化代码未能产生足够的熵，它将返回一个错误（它返回 1 表示成功）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T20:46:07.900

您可以尝试[EGDW](http://egdw.sourceforge.net/)（Windows 的熵收集守护程序）

# python - 如何将此函数重写为递归函数？

> ID：10568848
> 
> 赞同：0
> 
> 时间：2012-05-13T02:21:22.307
> 
> 标签：python, function, recursion

```
def digits(n):
    res = []
    while n > 0:
        res.append(n % 10)
        n /= 10
    return res 
```

我想重写这个函数，所以它使用递归。我目前不知道该怎么做。谁能给我一些指导？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-13T02:26:26.603

要创建递归函数，您需要确定两件事：

> 1) 基本情况 - 您要停止递归的条件
> 
> 2) 一般情况 - 除了基本情况外，每个输入要做什么

你已经找到了这两个东西，基本情况是 while 循环条件，一般情况是 while 循环的内部。尝试利用这些信息继续前进。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-13T02:29:57.723

这是一个可能的解决方案：

```
def digits(n):
    if n < 10:
        return [n]
    return digits(n/10) + [n%10]

digits(123)
> [1, 2, 3] 
```

上述解决方案修复了代码中的错误，您以相反的顺序返回数字。另请注意，`n`必须是大于或等于零的整数才能产生正确的结果。

以下是它的工作原理：

1.  如果数字小于 10，则返回包含该数字的列表，因为没有更多数字需要处理
2.  如果数字大于 9，则获取当前数字中的最后一位，并将其添加到递归调用`digits`较小数字的结果列表的末尾 - 即我们刚刚处理的没有最后一位的数字。

在递归的每个步骤中，对的调用`digits(123)`将如下所示：

```
digits(123) = digits(123/10) + [3]
digits(12)  = digits(12/10)  + [2]
digits(1)   = [1] 
```

现在我们向上调用堆栈：

```
[1]
[1] + [2]
[1, 2] + [3]
[1, 2, 3] 
```

**编辑 ：**

接受@thg435 的挑战，这是一个尾递归解决方案：

```
def digits(n):
    def loop(i, acc):
        if i < 10:
            return [i] + acc
        return loop(i/10, [i%10] + acc)
    return loop(n, []) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-13T02:37:29.670

当您使用递归时，一个好的基础是检查两个案例，一个基本案例和一个递归案例。基本情况是程序返回的条件和结果，在您的情况下，基本情况将是当 n > 0 时（如果您将其视为 while 循环，这是 while 循环退出的条件）。循环未完成时会发生递归情况（可以有多个），如果您与 while 循环进行比较，这基本上是循环的主体。在递归案例结束时，您需要再次调用函数并更改输入，在本例中为 n/10。

因此，您的函数定义将类似于：

```
def digits(n): 
```

对于基本情况，您要检查 n 是否为 0，如果是，则返回空列表：

```
 if n <= 0:
        return [] 
```

现在，在递归的情况下，您想将 n%10 附加到列表中并再次调用您的函数，只是您想用不同的 n 调用它，更改为您在 while 循环中所做的更改：

```
 else:
        return [n%10]+digits(n/10) 
```

所以，如果你跟踪这个，对于每个递归情况，你​​都会得到一个包含 n%10 的列表，然后它会添加新调用的结果，这将是 (n/10)%10 或空列表。例如，使用 n=100 运行这个函数会像这样分解：

```
newlist = digits(100)
newlist = [100%10]+digits(100/10)
newlist = [100%10]+([10%10] + digits(10/10))
newlist = [100%10]+([10%10] + ([1%10] + digits(10/10)))
newlist = [100%10]+([10%10] + ([1%10] + ([])))
newlist = [0,0,1] 
```

嵌套括号用于显示函数数字是如何内联重写的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-13T02:43:53.590

```
def digits(n):
    res = []
    res.append(n%10)
    n /= 10
    if n != 0:
        return res + digits(n)
    else:
        return res 
```

# ruby-on-rails - Ruby 文档更新错误

> ID：10568849
> 
> 赞同：6
> 
> 时间：2012-05-13T02:21:28.430
> 
> 标签：ruby-on-rails, rubygems

我已经安装了 MacPorts 的 Ruby on Rails，从昨天开始我一直在更新和修改它，因为我想重新学习这门语言。

**眼镜**

```
ruby -v
ruby 1.8.7 (2012-02-08 patchlevel 358) [i686-darwin10]
rails -v
Rails 3.0.3
gem -v
1.8.5 
```

**旅程**

到目前为止，让 Ruby、Rails 和 Gems 在我的 Mac 上运行是一段相当长的旅程。在遵循教程后，我决定安装/更新 Rails API 文档，但遇到了以下**错误**：

```
Password:
NOTE: Gem::SourceIndex.from_installed_gems is deprecated with no replacement. It will be removed on or after 2011-10-01.
Gem::SourceIndex.from_installed_gems called from /opt/local/lib/ruby/site_ruby/1.8/rubygems/commands/rdoc_command.rb:58.
NOTE: Gem::SourceIndex.installed_spec_directories is deprecated, use Specification.dirs. It will be removed on or after 2011-11-01.
Gem::SourceIndex.installed_spec_directories called from /opt/local/lib/ruby/site_ruby/1.8/rubygems/source_index.rb:47.
NOTE: Gem::SourceIndex.from_gems_in is deprecated with no replacement. It will be removed on or after 2011-10-01.
Gem::SourceIndex.from_gems_in called from /opt/local/lib/ruby/site_ruby/1.8/rubygems/source_index.rb:47.
NOTE: Gem::SourceIndex#initialize is deprecated with no replacement. It will be removed on or after 2011-11-01.
Gem::SourceIndex#initialize called from /opt/local/lib/ruby/site_ruby/1.8/rubygems/source_index.rb:67.
NOTE: Gem::SourceIndex#spec_dirs= is deprecated, use Specification.dirs=. It will be removed on or after 2011-11-01.
Gem::SourceIndex#spec_dirs= called from /opt/local/lib/ruby/site_ruby/1.8/rubygems/source_index.rb:94.
NOTE: Gem::SourceIndex#refresh! is deprecated with no replacement. It will be removed on or after 2011-11-01.
Gem::SourceIndex#refresh! called from /opt/local/lib/ruby/site_ruby/1.8/rubygems/source_index.rb:95.
NOTE: Gem::SourceIndex#load_gems_in is deprecated with no replacement. It will be removed on or after 2011-11-01.
Gem::SourceIndex#load_gems_in called from /opt/local/lib/ruby/site_ruby/1.8/rubygems/source_index.rb:320.
NOTE: Gem::SourceIndex#add_spec is deprecated, use Specification.add_spec. It will be removed on or after 2011-11-01.
Gem::SourceIndex#add_spec called from /opt/local/lib/ruby/site_ruby/1.8/rubygems/source_index.rb:127.
NOTE: Gem::SourceIndex#add_spec is deprecated, use Specification.add_spec. It will be removed on or after 2011-11-01.
Gem::SourceIndex#each called from /opt/local/lib/ruby/site_ruby/1.8/rubygems/commands/rdoc_command.rb:58.
Installing ri documentation for activesupport-3.2.3...

unrecognized option `--encoding'

For help on options, try 'rdoc --help'

ERROR:  While generating documentation for activesupport-3.2.3
... MESSAGE:   exit
... RDOC args: --ri --op /opt/local/lib/ruby/gems/1.8/doc/activesupport-3.2.3/ri --encoding UTF-8 lib --title activesupport-3.2.3 Documentation --quiet 
```

当我这样做时`gem server`，服务器已启动。所以我可能在一年前安装了文档并且完全忘记了它。

我该怎么做才能摆脱所有这些错误？或者我可以安全地忽略它们并继续前进吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-13T04:17:09.683

您可以放心地忽略这些错误。

`gem install rails --no-ri --no-rdoc`现在，您可以通过指定安装 Rails来安装 gems而不会出现这些错误。

将来，您可以添加：

```
gem: --no-ri --no-rdoc 
```

到您的`~/.gemrc`文件中，以全局忽略未来 gem 安装的文档。

此外，如果您刚刚开始，我建议您使用 ruby​​ 版本管理器，例如[rvm](https://rvm.io)或[rbenv](https://github.com/sstephenson/rbenv)。在管理不同的 ruby​​ 版本和 gemset 时，它让生活变得如此轻松。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-31T16:11:25.460

尝试`gem install rdoc`或者 `gem update rdoc`如果您的 rdoc 版本 < 3.0。

RDoc 从 Ruby 源文件生成文档。因此，正如@Mark Sands 所说，让您的代码运行并不是绝对必要的，拥有并解决错误的根源可能会很好。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-28T15:45:50.723

我在 linux 上得到了同样的警告`Debian`，我正在使用`rvm`with `ruby-1.9.3-p194`。

我通过更改第 127 行消除了它们中的大部分

```
~/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/source_index.rb 
```

`127 add_spec gemspec if gemspec`到`127 Gem::Specification.add_spec gemspec if gemspec`

至于其他人，他们说已弃用，没有替代品。

我只发现了这个线程，因为我想了解更多关于这些的信息。有人认为有更新吗？警告声明这些将在 或之后被删除`2011-11-01`。时间已经过去了。

# c# - 在 Visual Studio c# 2010 上使用 WindowsForm

> ID：10568851
> 
> 赞同：-2
> 
> 时间：2012-05-13T02:21:43.717
> 
> 标签：c#, winforms, visual-studio-2010, layout

各位晚上好！我提出这个问题是因为当我从 Windows 窗体增加左侧或右侧时，tabControl 不会随之移动。

那可能是我找不到的房产，你们能帮帮我吗？

谢谢大家

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-13T02:30:49.970

请参阅 Windows 窗体和拆分器控件的 Dock & Anchor 属性

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-13T02:29:58.740

您需要将选项卡的 Anchors 属性设置为左侧或右侧 - 您想要随表单移动的任何一侧。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-13T02:34:47.703

见锚属性..

如果您想通过调整表单大小来调整选项卡控件的大小，请将其锚定在每一侧。

如果要使用选项卡控件填充表单，或将选项卡控件粘贴到一个边距，请使用 Dock 属性...

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-13T02:35:45.147

将 Form.Dock 属性设置为 true

# c# - 以下方法或属性之间的调用不明确（十进制和双精度，四舍五入）

> ID：10568852
> 
> 赞同：0
> 
> 时间：2012-05-13T02:21:58.880
> 
> 标签：c#, int, double, decimal, ambiguous

我的程序无法确定是`Math.Round`作为 a`decimal`还是 a执行`double`，但我不知道如何解决这个问题......这是我的代码，虽然倒数第二行是我所关心的。

```
 ArrayList topp1 = new ArrayList();
 int toppcount = 0;
 foreach (Control cb in GroupBoxH1T.Controls)
 {
     CheckBox cb1 = cb as CheckBox;
     if (cb1.Checked == true)
     {
          toppcount++;
          topp1.Add(cb1.Text);
     }
  }

  if (cbhwchoice.Checked == false)
  {
      ArrayList topp2 = new ArrayList();
      foreach (Control cb in GroupBoxH2T.Controls)
      {
          CheckBox cb1 = cb as CheckBox;
          if (cb1.Checked == true)
          {
              toppcount++;
              topp2.Add(cb1.Text);
          }
      }

      toppcount = Math.Round((toppcount/2,MidpointRounding.AwayFromZero);
  } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-13T02:30:28.217

`Math.Round`需要一个浮点数或十进制数，因为在整数上调用它不会有任何效果。如果要调用它，请传入该类型的值。为此，您可以简单地将分子和分母转换为所需的类型。例如：

```
decimal value = Convert.ToDecimal(toppcount) / 2.0M;
toppcount = Math.Round(value, MidpointRounding.AwayFromZero); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-13T02:30:52.417

在倒数第二行

```
 toppcount = Math.Round((toppcount/2,MidpointRounding.AwayFromZero); 
```

`toppcount`也是`integer`
`2`，`integer`
所以`toppcount/2`会给你`integer`
作为例子 `1/2`会给你`0`

尝试`Convert.ToDecimal(toppcount)/2.0` 或 `(Decimal)toppcount/2.0`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-25T12:35:15.640

在 if 块的最后一条语句中将整数 2 替换为十进制 2.0。所以语句会变成这样：

```
toppcount = Math.Round((toppcount/2.0)) 
```

# c# - XNA 没有画出我告诉它的东西

> ID：10568854
> 
> 赞同：0
> 
> 时间：2012-05-13T02:22:15.790
> 
> 标签：c#, xna, drawing, sprite, xna-4.0

我有这段代码应该在窗口上绘制两个音量图标，但它不起作用。以下是相关代码：

```
 Texture2D vol_max;
    Vector2 vol_max_vect;
    Texture2D vol_min;
    Vector2 vol_min_vect;
    ...
    protected override void LoadContent()
    {
        // Create a new SpriteBatch, which can be used to draw textures.
        spriteBatch = new SpriteBatch(GraphicsDevice);

        vol_max = Content.Load<Texture2D>("vol_max@16");
        vol_min = Content.Load<Texture2D>("vol_min@16");
    }
    protected override void Update(GameTime gameTime)
    {
        thisKeyboard = Keyboard.GetState(PlayerIndex.One);

        if (GamePad.GetState(PlayerIndex.One).Buttons.Back == ButtonState.Pressed ||
            thisKeyboard.IsKeyDown(Keys.Escape))
        {
            this.Exit();
        }

        // Update window vectors
        vol_max_vect = new Vector2(
            (float)(Window.ClientBounds.Right - 20),
            (float)(Window.ClientBounds.Bottom - 20));
        vol_min_vect = new Vector2(
            (float)(Window.ClientBounds.Right - 140),
            (float)(Window.ClientBounds.Bottom - 20));

        prevKeyboard = thisKeyboard;

        base.Update(gameTime);
    }

    protected override void Draw(GameTime gameTime)
    {
        GraphicsDevice.Clear(Color.CornflowerBlue);

        spriteBatch.Begin();
        spriteBatch.Draw(
            vol_max,
            vol_max_vect,
            Color.White);
        spriteBatch.Draw(
            vol_min,
            vol_min_vect,
            Color.White);
        spriteBatch.End();

        base.Draw(gameTime);
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T03:45:54.253

问题是 ClientBounds.Right/Bottom 位于 Windows 屏幕坐标中（其中 [0,0] 是屏幕的左上角，右下角是您的分辨率，例如 [1024, 768]）。

你真正想要的是将它们绘制在你自己窗口的右下角。XNA 的 SpriteBatch 在视口坐标中绘制，其中 [0, 0] 是视口的左上角，右下角是应用程序的分辨率，例如。[800, 480]。要获得该宽度，您可以简单地使用 Window.ClientBounds.Width 代替 Window.ClientBounds.Right，并使用 Window.ClientBounds.Height 代替 Window.ClientBounds.Bottom。

希望这会有所帮助！

# javascript - 脚本仅先更改 元素

> ID：10568855
> 
> 赞同：0
> 
> 时间：2012-05-13T02:22:27.527
> 
> 标签：javascript, html, getelementsbytagname

下面是我的页面的 javascript：

```
 window.onmouseover = function(){
        var body = document.getElementsByTagName("body")
        var h1 = document.getElementsByTagName("h1");
        var a = document.getElementsByTagName("a");
        var p = document.getElementsByTagName("p")
        for(var j = 0; j < p.length; j++) {
            body[j].style.fontFamily = "helvetica";
            body[j].style.backgroundColor = "rgb(250, 250, 240)"
            p[j].style.fontFamily = "courier";
            a[j].onclick = function() {
                this.style.backgroundColor = "Black"
            }
        }
    } 
```

我有一个 h1 元素、一个 a 元素和 10 个 p 元素。出于某种原因，此代码仅更改了第一个 p 元素的字体，尽管其他一切正常？为什么会这样，我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T02:25:43.093

如果您只有一个`a`元素并且（当然）只有一个元素，则`body`您不能迭代其中的 10 个以上。这会导致循环的第二次迭代出现错误。请改用此代码。

```
window.onmouseover = function(){
    var body = document.getElementsByTagName("body")
    var h1 = document.getElementsByTagName("h1");
    var a = document.getElementsByTagName("a");
    var p = document.getElementsByTagName("p")

    body[0].style.fontFamily = "helvetica";
    body[0].style.backgroundColor = "rgb(250, 250, 240)"
    a[0].onclick = function() {
        this.style.backgroundColor = "Black"
    }

    for (var j = 0; j < p.length; j++) {
        p[j].style.fontFamily = "courier";
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T02:25:33.763

它可能会在第二次循环中产生错误，因为`body[1]`这将是无效的。移动东西，以便只有操作在`p`循环内。

# c++ - 游戏实体类型分配

> ID：10568856
> 
> 赞同：2
> 
> 时间：2012-05-13T02:22:46.993
> 
> 标签：c++, entity, tmx

我正在将基于 tile 的 2D 游戏迁移到 C++，因为我真的不是 Java 的粉丝（有些功能很好，但我就是不习惯）。我正在使用 TMX 平铺地图。这个问题是关于如何将对象定义转换为实际的游戏实体。在 Java 中，我使用反射来分配指定类型的对象（假设它派生自基本游戏实体）。

这工作得很好，但是这个特性在 C++ 中不可用（我明白为什么，我没有抱怨。我发现反射很乱，我很犹豫在 Java 中使用它，哈哈）。我只是想知道翻译这些数据的最佳方法是什么。我的想法是一个基类，所有实体都可以从中派生（这似乎很标准），然后让加载程序根据 TMX 映射中的“类型”值分配派生类型。我想了两种方法来做到这一点。

1.  一个巨大的开关盒块。冗长而恶心。我怀疑是否有人会提出这个建议（但这是显而易见的）。
2.  使用 std::map，它将任意类型名称映射到函数以分配与所述类型名称相对应的所述类。
3.  最后，我曾想过制作一个基类的实体，并为不同的实体类型使用脚本。脚本本身会向系统注册它们的实体类型，尽管游戏需要在加载时加载所述实体类型脚本（这可以通过一个主要的实体类型声明脚本来完成，这将使每个实体的编辑数量减少到 2 ：实体创建和实体注册）。

虽然选项二看起来不错，但我不喜欢为每种类型更改 3 段代码（定义实体类，定义分配函数，并将函数添加到 std::map）。选项 3 听起来不错，除了我认为的两件事：我害怕纯脚本驱动实体的速度。另外，我知道将脚本添加到我的引擎本身将是一个大项目（添加所有与库交互的辅助函数会很有趣）。

有谁知道更好的解决方案？也许不是更好，但只是更清洁。每个实体类型的代码编辑更少。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T05:05:43.727

如果您使用自注册到工厂，则可以减少解决方案 2 中的代码更改次数。缺点是实体知道这个工厂（自我注册）并且这个工厂必须是一个全局（例如单例）实例。如果这对您来说没问题，那么这种模式会非常好。每种新类型只需要编译一个新文件的链接。

您可以像这样实现自我注册：

```
// foo.cpp
namespace 
{ 
  bool dummy = FactoryInstance().Register("FooKey", FooCreator); 
} 
```

[抽象工厂，模板风格，Jim Hyslop 和 Herb Sutter 着](http://www.drdobbs.com/184403786)

# javascript - 在我的 .js 文件中使用 Jquery

> ID：10568860
> 
> 赞同：1
> 
> 时间：2012-05-13T02:24:12.630
> 
> 标签：javascript, jquery, web

一般来说，我对 Web 开发和 Javascript 非常陌生，我一直通过在我的 HTMl 代码中添加我的代码来完成一些 Jquery 编码。现在，我只是将相同的代码移动到我的 .Js 文件中，我的控制台显示以下错误：

> $ 未定义 [Break On This Error] $(document).ready(function () {

它只是说 JQuery 没有定义。这意味着我不能在我的 Js 文件中引用 Jquery 或任何其他 Javascript 文件？

或者我在这里缺少什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T02:27:54.163

只需在调用脚本之前包含 jQuery

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript"></script> 
```

有关 CDN 中可用的其他 jQuery 内容，请参阅： [http ://docs.jquery.com/Downloading_jQuery#CDN_Hosted_jQuery](http://docs.jquery.com/Downloading_jQuery#CDN_Hosted_jQuery)

更新：在我看来，这与“使用”很接近。不需要将 jQuery 库下载到您的系统或将其托管在您的服务器上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T02:30:15.740

在您的 html 中，您是否将整个 jquery 文件移动到您的 .js 文件中？您应该将其设置为：

```
 <script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"type="text/javascript"></script>
// Now load your .js file
<script type="text/javascript" src="your .js file"></script> 
```

此外，如果您下载了 jquery 忘了它，顶部链接意味着您正在从 google 加载 jquery，因此您将始终拥有最新版本，除非您上传代码，否则我真的无法提供更多帮助，抱歉。

# android - SQLiteException：不存在这样的表

> ID：10568861
> 
> 赞同：1
> 
> 时间：2012-05-13T02:24:53.047
> 
> 标签：android, sqlite

我正在尝试在我的 android 应用程序中创建一个 SQLite 数据库，但我的代码始终抛出一个“SQLiteException”，表示不存在这样的表。我是 SQL 新手，但我认为这意味着我的创建脚本运行不正常。我的部分代码如下。请指出您看到的任何错误并提前感谢！

适配器：

```
public class DBAdapter
{
public static final String KEY_ID = "_id";
public static final String KEY_NAME = "name";
public static final String KEY_FAVORITE = "favorite";
public static final String KEY_LAT = "lat";
public static final String KEY_LONG = "long";
public static final String KEY_ADDRESS = "address";
public static final String KEY_PHONE = "phone";

private static final String TAG = "DBAdapter";
private static final String DATABASE_NAME = "eateries";
private static final String DATABASE_TABLE = "names";
private static final int DATABASE_VERSION = 1;

private static final String DATABASE_CREATE =
        "create table " + DATABASE_TABLE + "( "
        + KEY_ID + " integer primary key autoincrement, "
        + KEY_NAME + " text not null, "
        + KEY_FAVORITE + " integer, "
        + KEY_LAT + " text not null, "
        + KEY_LONG + " text not null, "
        + KEY_ADDRESS + " text not null, "
        + KEY_PHONE + " text not null);";

private final Context context;
private DatabaseHelper DBHelper;
private SQLiteDatabase db;
public DBAdapter(Context ctx)
{
    this.context = ctx;
    DBHelper = new DatabaseHelper(context);
}
private static class DatabaseHelper extends SQLiteOpenHelper
{
    DatabaseHelper(Context context)
    {
        super(context, DATABASE_NAME, null, DATABASE_VERSION);
    }
    @Override
    public void onCreate(SQLiteDatabase db)
    {
        db.execSQL(DATABASE_CREATE);
    }
    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion,
            int newVersion)
    {
        Log.w(TAG, "Upgrading database from version " + oldVersion
                + " to "
                + newVersion + ", which will destroy all old data");
        db.execSQL("DROP TABLE IF EXISTS names");
        onCreate(db);
    }
}
//---opens the database---
public DBAdapter open() throws SQLException
{
    db = DBHelper.getWritableDatabase();
    return this;
}
//---closes the database---
public void close()
{
    DBHelper.close();
}
//---insert a title into the database---
public long insertNew(String name, Integer favorite, GeoPoint coords, String address, String phone)
{
    ContentValues initialValues = new ContentValues();

    initialValues.put(KEY_NAME, name);
    initialValues.put(KEY_FAVORITE, favorite);
    initialValues.put(KEY_LAT, coords.getLatitudeE6());
    initialValues.put(KEY_LONG, coords.getLongitudeE6());
    initialValues.put(KEY_ADDRESS, address);
    initialValues.put(KEY_PHONE, phone);

    return db.insertOrThrow(DATABASE_TABLE, null, initialValues);
} 
```

调用代码：包bhekman.test.database；

```
import android.app.Activity;
import android.os.Bundle;
import android.widget.Toast;

import com.google.android.maps.GeoPoint;

public class DatabaseActivity extends Activity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        DBAdapter dba = new DBAdapter(this);
        dba.open();
        dba.insertNew("mc. awesome", 1, new GeoPoint(0, 0), "42 SUPER AWESOME DRIVE", "(616)-994-2421");

        Toast.makeText(this, dba.getName(0).getString(0), Toast.LENGTH_LONG).show();
        dba.close();
    }
} 
```

LogCat 错误：

```
01-05 22:06:29.030: E/AndroidRuntime(4785): FATAL EXCEPTION: main
01-05 22:06:29.030: E/AndroidRuntime(4785): java.lang.RuntimeException: Unable to start activity ComponentInfo{bhekman.test.database/bhekman.test.database.DatabaseActivity}: android.database.sqlite.SQLiteException: no such table: names: , while compiling: INSERT INTO names(phone, long, favorite, address, lat, name) VALUES(?, ?, ?, ?, ?, ?);
01-05 22:06:29.030: E/AndroidRuntime(4785):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
01-05 22:06:29.030: E/AndroidRuntime(4785):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
01-05 22:06:29.030: E/AndroidRuntime(4785):     at android.app.ActivityThread.access$1500(ActivityThread.java:117)
01-05 22:06:29.030: E/AndroidRuntime(4785):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
01-05 22:06:29.030: E/AndroidRuntime(4785):     at android.os.Handler.dispatchMessage(Handler.java:99)
01-05 22:06:29.030: E/AndroidRuntime(4785):     at android.os.Looper.loop(Looper.java:130)
01-05 22:06:29.030: E/AndroidRuntime(4785):     at android.app.ActivityThread.main(ActivityThread.java:3683)
01-05 22:06:29.030: E/AndroidRuntime(4785):     at java.lang.reflect.Method.invokeNative(Native Method)
01-05 22:06:29.030: E/AndroidRuntime(4785):     at java.lang.reflect.Method.invoke(Method.java:507)
01-05 22:06:29.030: E/AndroidRuntime(4785):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
01-05 22:06:29.030: E/AndroidRuntime(4785):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
01-05 22:06:29.030: E/AndroidRuntime(4785):     at dalvik.system.NativeStart.main(Native Method)
01-05 22:06:29.030: E/AndroidRuntime(4785): Caused by: android.database.sqlite.SQLiteException: no such table: names: , while compiling: INSERT INTO names(phone, long, favorite, address, lat, name) VALUES(?, ?, ?, ?, ?, ?);
01-05 22:06:29.030: E/AndroidRuntime(4785):     at android.database.sqlite.SQLiteCompiledSql.native_compile(Native Method)
01-05 22:06:29.030: E/AndroidRuntime(4785):     at android.database.sqlite.SQLiteCompiledSql.compile(SQLiteCompiledSql.java:92)
01-05 22:06:29.030: E/AndroidRuntime(4785):     at android.database.sqlite.SQLiteCompiledSql.<init>(SQLiteCompiledSql.java:65)
01-05 22:06:29.030: E/AndroidRuntime(4785):     at android.database.sqlite.SQLiteProgram.<init>(SQLiteProgram.java:83)
01-05 22:06:29.030: E/AndroidRuntime(4785):     at android.database.sqlite.SQLiteStatement.<init>(SQLiteStatement.java:41)
01-05 22:06:29.030: E/AndroidRuntime(4785):     at android.database.sqlite.SQLiteDatabase.compileStatement(SQLiteDatabase.java:1149)
01-05 22:06:29.030: E/AndroidRuntime(4785):     at android.database.sqlite.SQLiteDatabase.insertWithOnConflict(SQLiteDatabase.java:1569)
01-05 22:06:29.030: E/AndroidRuntime(4785):     at android.database.sqlite.SQLiteDatabase.insertOrThrow(SQLiteDatabase.java:1452)
01-05 22:06:29.030: E/AndroidRuntime(4785):     at bhekman.test.database.DBAdapter.insertNew(DBAdapter.java:93)
01-05 22:06:29.030: E/AndroidRuntime(4785):     at bhekman.test.database.DatabaseActivity.onCreate(DatabaseActivity.java:18)
01-05 22:06:29.030: E/AndroidRuntime(4785):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
01-05 22:06:29.030: E/AndroidRuntime(4785):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
01-05 22:06:29.030: E/AndroidRuntime(4785):     ... 11 more 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-13T02:30:37.130

使用您的代码，它在我的计算机上运行良好。所以我猜你在开发过程中更改了 TABLE 名称。只需使用 Eclipse 的 RUN 命令再次运行该程序。因此，该应用程序不是全新安装。但是您没有正确实现 onUpgrade() 。

快速解决您遇到的问题。

1.  使用 adb uninstall 卸载程序
2.  重新安装程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T02:52:11.563

您是否在最初创建表格后对其进行了更改（意味着在您的手机/模拟器上运行它）？比如可能添加一个新表，或者更改它的名称？

如果是这样，您需要将您的更改`DATABASE_VERSION`为 2，以便将数据库升级到您的最新架构。

并且 `KEY_FAVORITE + " bit, "`需要 `KEY_FAVORITE + " integer, "`。如果你做出改变，你也需要更新你的 DATABASE_VERSION。

基本上，对于**任何**对数据库结构进行更改的内容，您都需要增加版本，以便数据库将使用您的新更改重新创建数据库。

# php - 需要 MySQL 数据库模式来处理复杂的数据导入

> ID：10568863
> 
> 赞同：1
> 
> 时间：2012-05-13T02:25:21.093
> 
> 标签：php, mysql, database-design

这是我已经拥有的：

PHP/MySQL Web 界面允许您上传 csv 文件。程序扫描文件以确定每列的适当数据类型，然后将文件写入 MySQL 中的新表中。

然后，您“映射”数据，将原始表（刚刚导入的那个）中的不同列分配给核心属性（例如，sku、成本、颜色、collection_name、height、MSRP 等）。

我的问题是找出一个好的模式来存储可以采用的进程。

例子。

原始文件具有以下字段：item_number、list_price、description

这些将映射到 item_number 映射到 sku，list_price 映射到 MSRP，但也映射到成本，description 映射到颜色和集合名称。

对于 varchar 类型字段，我可以使用转换表来查找要转换的“核心”值。对于数字类型，例如原始文件中的“list_price”，我需要存储某种数字转换规则。例如'list_price' = 2.0 * core_attribute_cost。

我将如何存储和检索数学运算及其操作数？我缺少一个简单的解决方案吗？因为我目前正在考虑使用“x+y”、“x/y”、“y/x”、“yx”、“xy”的数学表，其中 x 将是输入字段，y 将是保存的值（如“2.0”）或其他字段。这似乎无穷无尽的复杂。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T09:21:16.990

我建议您将所有数据导入到包含所需列的单个平面表中，并将包含在 CSV 文件中。

导入完成后，您可以运行 SQL 查询，按照预定义的规则将数据插入规范化数据库。

因此，您的导入过程是两步的，但您可以灵活地将 CSV 导入文件或业务规则从平面表调整到您的数据库架构，而不会影响其他

# python - django-admin 自定义命令中的两个参数

> ID：10568864
> 
> 赞同：9
> 
> 时间：2012-05-13T02:25:22.537
> 
> 标签：python, django, django-admin, arguments

我有一个**有效**的django-admin 自定义命令，我用它来用新信息填充我的数据库。同样，一切正常。

但是，我现在稍微更改了我的模型和函数以接受两个参数作为元组 - 名字**和**姓氏，而不仅仅是“名称”。

下面的以前的代码 - 工作。使用“manage.py xyz name1 name2 name3...等运行（不同参数之间的空格）

```
from django.core.management.base import BaseCommand, CommandError
from detail.models import ABC
from detail.parser import DEF

class Command(BaseCommand):
    args = '<name...>'
    help = 'Populates the ABC class database'

    def handle(self, *args, **options):
        for symbol in args:

            try:
                info = DEF(name) 
```

**是否可以从 django-admin 自定义命令传递两个参数，其中第二个参数是可选的 --> 即（第一个，最后一个 = 无）？**

下面是我想运行的伪代码...“manage.py xyz (first1, last1) (first2, last2) <-- 或者这个的一些变体

我已经更改了函数 DEF 以将其作为独立函数适当地接受。我只是不确定如何让 django-admin 命令现在工作。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-13T02:49:15.767

这是完全可能的，尽管`django.core.management`没有提供这样做的特定工具。您可以解析通过`args`关键字参数传递的参数。为此，您必须想出一个语法（在`help`命令的属性中定义语法可能是个好主意）。

假设语法是`firstname.lastname`，或者只是`firstname`在省略姓氏的情况下，您可以执行以下操作：

```
def handle(self, *args, **options):
    for arg in args:
        try:
            first_name, last_name = arg.split('.')
        except ValueError:
            first_name, last_name = arg, None

        info = DEF(first_name, last_name) 
```

该命令的用户可以像这样传递参数：

```
$ python manage.py yourcommand -v=3 john.doe bill patrick.bateman 
```

# php - HTTP标头防止浏览器加载页面？

> ID：10568869
> 
> 赞同：2
> 
> 时间：2012-05-13T02:26:40.557
> 
> 标签：php, http, mime-types, content-type

我有一个 php 脚本，它在 url 中获取文件的 id，从 sql 数据库中找到文件的链接，然后流式传输文件。

在客户的页面上，他们单击一个链接，然后被提示下载文件。如果该文件不在数据库中，我想阻止浏览器将页面更改为 404 或其他类型的错误页面，而是将客户端的页面保留在原处。

是否有 HTTP 状态或内容类型会告诉浏览器不加载页面？将内容长度设置为 0 之类的操作会起作用吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-13T02:29:18.223

```
204 No Content 
```

返回该状态码，浏览器将停留在它所在的页面上。

# gtk3 - 您如何为 gtk3 应用程序实现帮助（使用 mallard）？

> ID：10568870
> 
> 赞同：6
> 
> 时间：2012-05-13T02:26:56.103
> 
> 标签：gtk3, mallard

我正在尝试创建自己的 gtk3 应用程序。我喜欢使用 mallard 来显示一些关于如何使用我的应用程序的帮助。但是我不知道如何编码，以便在单击帮助菜单项时显示帮助（绿头鸭）。我已经准备好了 .page 文件。

请注意，我不是在问如何使用 mallard 创建帮助文件。**而是如何将 mallard 集成到我的 gtk3 帮助中。**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-15T19:14:36.167

好问题。在这种情况下，我总是在 git.gnome.org 上查看 Gedit 是如何做到的。这是一个出色的“示例”应用程序。

首先，看看他们如何组织他们的帮助文件[：](http://git.gnome.org/browse/gedit/tree/help)

```
help
  \--C
  |  \--*.page
  \--Makefile.am
  \--ar
  \--bg
  \--ca
  \--...other languages... 
```

在`help/Makefile.am`中，它们用于`@YELP_HELP_RULES@`安装文件（由`YELP_HELP_INIT`in设置`configure.ac`。）

然后，当用户单击帮助/内容时，他们打开 URI`help:gedit`或`help:gedit/link_id`使用`gtk_show_uri()`（参见[此处](http://git.gnome.org/browse/gedit/tree/gedit/gedit-app.c)，在功能`gedit_app_show_help_impl()`和`gedit_app_help_link_id_impl()`中）然后，大概，桌面帮助系统会自动获取文件，翻译成适当的语言，并在 Yelp 中显示.

# c# - 比较两个数据表并格式化结果

> ID：10568875
> 
> 赞同：0
> 
> 时间：2012-05-13T02:28:43.643
> 
> 标签：c#, asp.net, datatable, asp.net-4.0

我知道如何在 sql 中执行此操作，但对于 c#..我无法弄清楚如何比较两个数据表。

比方说：

第一个数据表：

```
Name  |  Balance | Description
Smith |   1200   | Smith owes 600
Jordan|   4000   | Hi Jordan
Brooks|   5000   | I like my cat
Navaro|   6000   | description here
Gates |   9010   | omg 
```

第二个数据表：

```
Name  |  Balance | Description
Smith |   1600   | Smith owes 600
Jordan|   4200   | I'M JORDAN
Clay  |   9000   | Test description
Brooks|   5000   | I like my cat 
```

我想将比较结果转储到一个简单的 html 表中。

Soooo ...结果应该是这样的：
![在此处输入图像描述](../Images/4e26bf05a7384ba76e7906d413f465cd.png)

基本上我需要的是：

> 1.  显示不同的列并显示数据
>     
>     
> 2.  如果所有列都相同，则不显示记录
>     
>     
> 3.  显示仅存在于第一个数据表中的记录（只是名称）
>     
>     
> 4.  显示仅存在于第二个数据表中的记录（只是名称）

在 sql 中，您可以执行合并，然后进行旋转之类的操作。

但在 C# 中，我的发现是：我可以使用 except 或 intersect，但它会返回一个 dattable。except\intersection 函数是否有任何格式选项？

我正在寻找有关如何以最佳方式实现这一目标的建议。（每个数据表中大约有 100 列）。所有都应该按名称进行比较。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-13T04:25:36.597

这是您需要在 .cs 文件中包含的代码...

（我只创建了这两个空类以避免在代码中出现，`Dictionary<object, Dictionary<string, Tuple<object, object>>>`但如果您愿意，可以替换它）

```
protected class Differences : Dictionary<object, RowDifferences>
{
}

protected class RowDifferences : Dictionary<string, Tuple<object, object>>
{
}

protected Differences GetDifferences(DataTable table1,
                                     DataTable table2,
                                     out IEnumerable<object> onlyIn1,
                                     out IEnumerable<object> onlyIn2)
{
    var arr1 = new DataRow[table1.Rows.Count];
    var arr2 = new DataRow[table2.Rows.Count];

    table1.Rows.CopyTo(arr1, 0);
    table2.Rows.CopyTo(arr2, 0);

    onlyIn1 = arr1.Where(x1 => arr2.All(x2 => x1[0] != x2[0])).Select(dr => dr[0]);
    onlyIn2 = arr2.Where(x1 => arr1.All(x2 => x1[0] != x2[0])).Select(dr => dr[0]);

    var differences = new Differences();

    foreach (var x1 in arr1)
    {
        foreach (var x2 in arr2)
        {
            if (x1[0] == x2[0])
            {
                var rowDifferences = new RowDifferences();

                for (var i = 1; i < x1.ItemArray.Length; i++)
                {
                    if (x1.ItemArray[i] != x2.ItemArray[i])
                    {
                        rowDifferences.Add(table1.Columns[i].ColumnName,
                                           new Tuple<object, object>(x1.ItemArray[i], x2.ItemArray[i]));
                    }
                }

                differences.Add(x1[0], rowDifferences);
            }
        }
    }

    return differences;
}

protected void GenerateTables(out DataTable table1, out DataTable table2)
{
    table1 = new DataTable();
    table2 = new DataTable();

    table1.Columns.Add("Name");
    table1.Columns.Add("Balance");
    table1.Columns.Add("Description");

    table2.Columns.Add("Name");
    table2.Columns.Add("Balance");
    table2.Columns.Add("Description");

    table1.Rows.Add("Smith", 1200, "Smith owes 600");
    table1.Rows.Add("Jordan", 4000, "Hi Jordan");
    table1.Rows.Add("Brooks", 5000, "I like my cat");
    table1.Rows.Add("Navaro", 6000, "description here");
    table1.Rows.Add("Gates", 9010, "omg");

    table2.Rows.Add("Smith", 1600, "Smith owes 600");
    table2.Rows.Add("Jordan", 4200, "I'M JORDAN");
    table2.Rows.Add("Clay", 9000, "Test description");
    table2.Rows.Add("Brooks", 5000, "I like my cat");
} 
```

下面是一个如何在 .aspx 文件中构建表格的示例：

```
<%
    DataTable table1, table2;
    GenerateTables(out table1, out table2);

    IEnumerable<object> onlyIn1, onlyIn2;
    var differences = GetDifferences(table1, table2, out onlyIn1, out onlyIn2);
%>

<table>
    <thead>
        <tr>
            <th>Name</th> 
            <th>RecordName</th> 
            <th>1st Datatable</th> 
            <th>2nd Datatable</th> 
        </tr>
    </thead>
    <tbody>
        <%
            foreach (var difference in differences)
            {
        %>
        <tr>
            <td><%=difference.Key%></td>
        </tr>
        <%
                foreach (var rowDifferences in difference.Value)
                {
        %>
        <tr>
            <td></td>
            <td><%=rowDifferences.Key%></td>
            <td><%=rowDifferences.Value.Item1%></td>
            <td><%=rowDifferences.Value.Item2%></td>
        </tr>
        <%
                }
            }
        %>
        <tr>
            <td>Only 1st datatable</td>
        </tr>
        <%
            foreach (var name in onlyIn1)
            {
        %>
        <tr>
            <td><%=name%></td>
        </tr>
        <%
            }
        %>
        <tr>
            <td>Only 2st datatable</td>
        </tr>
        <%
            foreach (var name in onlyIn2)
            {
        %>
        <tr>
            <td><%=name%></td>
        </tr>
        <%
            }
        %>
    </tbody>
</table> 
```

从这里开始，按照您的意愿设计表格应该不难了。

因此，您剩下的主要内容是更改`GenerateTables`为一些查询逻辑，甚至将其内联到`GetDifferences`.

查找算法大概可以完善。目前最坏的情况是 O(m * n * k)，m 和 n 分别是 table1 和 table2 中的行数，k 是列数。我已经可以想出很多方法来改进它，但我会把这些留给你。这应该让你开始很好。

请注意，此算法假定两个表之间的列相等。

如果解决方案有任何不清楚的地方，请告诉我，祝你好运！

# javascript - html - 从 textarea 获取包装的文本

> ID：10568876
> 
> 赞同：1
> 
> 时间：2012-05-13T02:28:58.343
> 
> 标签：javascript, html, iframe, textarea

我正在尝试从 textarea 中获取单词换行符，而无需进行任何服务器调用。[这个答案](https://stackoverflow.com/a/2142815)让我走上了 90% 的路。问题是每次单击提交按钮时页面都会在 iframe 内重新加载。这是代码：

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<html>

<body>
  <script type="text/javascript">
    function getURLParameter(qs, name) {
      var pattern = "[\\?&]" + name + "=([^&#]*)";
      var regex = new RegExp(pattern);
      var res = regex.exec(qs);
      if (res == null)
        return "";
      else
        return res[1];
    }

    function getHardWrappedText() {
      var frm_url = document.getElementById('frame').contentDocument.URL;
      var text = unescape(getURLParameter(document.getElementById('frame').contentDocument.URL, 'text')).replace(/\+/g, ' ');
      return text;
    }

    function onIFrameLoad() {
      var text = getHardWrappedText();
      console.log(text);
    }

    window.onload = function() {
      console.log("loading")
    };
  </script>
  <form name="form" method="get" target="frame">
    <textarea id="text" name="text" cols=5 wrap="hard">a b c d e f</textarea>
    <input type="submit">
  </form>
  <iframe id="frame" name="frame" onload="onIFrameLoad()" style="display:none;"></iframe>
</body>

</html>
```

点击提交按钮给出输出：

```
loading
a b c d e 
f 
```

有没有办法防止 iframe 重新加载页面？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T02:41:11.733

您必须向表单的 onsubmit 事件返回 false。

`<form name="form" method="get" target="frame" onsubmit="onIFrameLoad">`

如果它基于您不想加载的某些条件

```
function onIFrameLoad() {
    var text = getHardWrappedText();
    console.log(text);
    if(text.indexOf('\n')<0) return false;
} 
```

我只是把一个随机的东西放在`text.indexOf('\n')<0`，你可以有任何有意义的东西或总是返回 false （这看起来不太可能）

# jquery - 查看当前页面时预加载第二页

> ID：10568888
> 
> 赞同：3
> 
> 时间：2012-05-13T02:31:25.890
> 
> 标签：jquery, ajax

假设我的网站有 5 页内容。是否可以在访问者查看第一页时预加载接下来的两页。这样当他们点击第二或第三页的链接时，它会立即出现。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T02:38:57.710

当然，你可以有一些像这样的隐形容器：

**HTML**

```
<div id="page">
  <a href="page2.html" id="page2-link">Go second page</a>
</div>
<div id="page2">
</div> 
```

**CSS**

```
#page2 { display:none } 
```

**Javascript**

然后在 javascript 中预加载加载后的第二页并将其放在不可见容器上时：

```
$().ready(function(){
  $('#page2').load('page2.html #page');
}); 
```

当点击链接时，只显示带有所选页面的隐藏容器并删除另一个，或者只是隐藏它以在用户想要返回或其他内容时不再加载。

```
$().ready(function(){
  $('#page2-link').on('click',function(){
       $('#page').html( $('#page').html() ); //this will replace html content
  });
}); 
```

# php - 如何限制对付费视频的访问？

> ID：10568889
> 
> 赞同：0
> 
> 时间：2012-05-13T02:31:32.977
> 
> 标签：php, wordpress, security, encoding

我有一个带有电子商务插件的 wordpress 付费视频网站。用户购买视频，然后显示一个元框，其中包含链接到视频的视频播放器代码（使用流播放器 3）。如何阻止非授权用户访问付费视频文件（如果他们决定通过查看源代码共享视频的直接链接）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T02:38:15.313

您需要使用安全令牌等技术保护该会话（和 IP）的此内容。

[http://code.google.com/p/mod-auth-token/](http://code.google.com/p/mod-auth-token/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T04:35:22.993

这里有一些插件可以帮助您解决问题。

[http://www.magicmembers.com/](http://www.magicmembers.com/)

[http://wordpress.org/extend/plugins/membership/](http://wordpress.org/extend/plugins/membership/)

[http://www.memberwing.com/](http://www.memberwing.com/)

# php - 如何让一个用户使用 Graph API 订阅另一个用户？

> ID：10568909
> 
> 赞同：0
> 
> 时间：2012-05-13T02:37:03.570
> 
> 标签：php, facebook, facebook-graph-api, facebook-php-sdk

我希望用户在添加到该网站时自动订阅 Facebook 中的其他用户。我知道我可以列出经过身份验证的用户订阅的用户，但是我可以进行新的订阅吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T19:50:11.000

看文档，

[http://developers.facebook.com/docs/reference/api/user/#subscribedto](http://developers.facebook.com/docs/reference/api/user/#subscribedto)

Graph api 只为两者提供“读取”操作，`subscribers`并且`subscribedto`

但是，您可以使用[订阅按钮](http://developers.facebook.com/docs/reference/plugins/subscribe/)插件

# x11 - 如何将 WM 移植到 Wayland？

> ID：10568912
> 
> 赞同：13
> 
> 时间：2012-05-13T02:37:38.513
> 
> 标签：x11, xorg, dwm

有没有将现有 WM 从 X11 移植到 Wayland 的示例？例如，将轻量级 WM（例如`dwm`、`wmii`、`awesome`）移植到 Wayland。也许，移植`dwm`到 Wayland 就是一个很好的例子。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-14T13:06:34.697

有些人正在将 Mutter 移植到 Wayland，并在 FOSDEM 2012 上进行了介绍。这是链接：

*   [http://lanyrd.com/2012/fosdem/spghc/](http://lanyrd.com/2012/fosdem/spghc/)

从网站链接复制：

> 编写 Wayland 合成器
> 
> Neil 和 Robert 将讨论他们自己编写 Wayland 合成器的经验，他们一直在将 Gnome Mutter 合成器改编为混合 X 和 Wayland 合成器。该演讲旨在提供有关编写混合 X 和 Wayland 合成器的一般指导，而不涉及 Mutter 的许多细节。

这可能是您的起点...

# c - 如何返回n条最佳最短路径（dijkstra算法）

> ID：10568914
> 
> 赞同：2
> 
> 时间：2012-05-13T02:38:22.980
> 
> 标签：c, shortest-path, dijkstra

您好，我已经在 C Dijkstra 的算法中实现了查找最短路径，但我需要返回 n 条最短路径，任何人都知道我该怎么做。

我的dijkstra函数：

```
int * Dijkstra(graph **g, int totalVertex, int vStart) {
  int i;
  int *distance = (int*) malloc(totalVertex * sizeof (int));
  int *last = (int*) malloc(totalVertex * sizeof (int));
  int *visited = (int*) calloc(totalVertex, sizeof (int));
  int maxDistance, m;
  graph *vertex;

  for (i = 0; i < totalVertex; i++) {
    distance[i] = MAXINT;
    last[i] = -1;
  }

  distance[vOrigem] = 0;

  while (sum(visited, totalVertex) < totalVertex) {

    maxDistance = MAXINT;

      for (i = 0; i < totalVertex; i++) {
        if ((distance[i] < maxDistance) && (visited[i] == 0)) {
          maxDistance = distance[i];
          m = i;
        }
       }

    vertex = g[m];
    while (vertex != NULL) {
      if ((vertex->distance + distance[m]) < (distance[vertex-> destination])) {
        distance[vertex->destination] = vertex->distance + distance[m];
        last[vertex->destination] = m;
      }
    vertex = vertice->next;
    }
  visited[m] = 1;
  }
  free(distance);
  free(visited);
  return last;
} 
```

例如，我需要调用此函数 2 次，它会返回图中的两条最短路径。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T02:55:34.043

让我们首先调用实际的最短路径 S，n 是 S 中的链接总数。

这将很困难，因为您可能会根据网络配置对路径进行大量排列，并且为了创建*下*一条最短路径，您将不得不运行算法 n 次，将每个顶点设置在每次运行到 Visited[m] = 1 的最短路径，以防下一条最短路径使用最多但不是所有来自 S 的顶点。

如果您真的只想为两条最短路径运行它，那么这将很简单。如果您希望能够运行此程序以获得任意数量的最短路径，那么当您返回并将每个原始路径链接设置为已访问时，您的计算时间将成倍增加。

# java - 从另一个类访问实例变量

> ID：10568916
> 
> 赞同：-3
> 
> 时间：2012-05-13T02:38:38.250
> 
> 标签：java, permissions, instance

如果您想直接解决问题，请跳过本段。作为实践，我正在尝试编写一个模拟经济的 Java 程序，并为此编写了一个公司类。这个想法是让他们中的一打，将他们的收入包装成一个正态变量函数，这就是经济。

我编写了一个单独的类来使用 JFreeChart 绘制公司的输出。但是，我无法从绘图类访问我将每年的金额写入的 ArrayList。我知道最好的方法可能是使用吸气剂，但它似乎不起作用，所以如果这是你的建议，你能提供一个例子吗？谢谢！

公司：

```
public class ServiceProvider implements Company {
    //Variables

    public ArrayList getRecords(){
        return records;
    }

    public ServiceProvider(){
        money = 10000;
        yearID = 0;
        goodYears = 0;badYears = 0;
        records = new ArrayList();
        id++;
    }

    public void year() {
        yearID++;
        if(!getBankrupt()){
            spend();
        }
        writeRecords();
    }

    public void spend() {
        ...
    }

    public void printRecords() {
        for(int i=0;i<records.size();i++){
            String[] tmp = (String[]) records.get(i);
            for(String a:tmp){
                System.out.print(a+" ");
            }
            System.out.print("\n");

        }

    }

    public void writeRecords(){
        String[] toWrite = new String[2];
        toWrite[0] = String.valueOf(yearID);
        toWrite[1] = String.valueOf(money);
        records.add(toWrite);
    }

    public void writeRecords(String toWrite){
        String temp = "\n"+yearID+"   "+toWrite;
        records.add(temp);
    }

    public boolean getBankrupt(){
        boolean result = (money < 0) ? true : false;
        return result;
    }

} 
```

我试图从以下位置访问它：

```
public class grapher extends JFrame {
    ArrayList records = s.getRecords();

    public grapher(){
        super("ServiceProvider");
        final XYDataset dataset = getCompanyData();
    }

    private XYDataset getCompanyData(){
        XYSeries series;
        for(int i=0;i<s.getRecords().length;i++){ //S cannot be resolved, it's instantiated in the main class.

        }
    }

} 
```

主要类：

```
public class start {

    public static void main(String[] args) {
        ServiceProvider s = new ServiceProvider();
        for(int i=0;i<10;i++){
            s.year();
        }
        s.printRecords();

    }

} 
```

PS不要告诉我记录是什么乱七八糟的。我知道。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T03:06:28.870

你的grapher类应该如下

```
public class grapher extends JFrame {

    public grapher(ServiceProvider s){
        super("ServiceProvider");
        final XYDataset dataset = getCompanyData(s);
    }

    private XYDataset getCompanyData(ServiceProvider s){
        XYSeries series;
        for(int i=0;i<s.getRecords().length;i++){ 
                  // Do Process of business logic.   
        }
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T03:07:51.527

您的绘图员类正在尝试使用起始类中的变量（您正在调用起始类中存在的变量 s），而没有对该变量的引用。为了让grapher访问该实例，您必须将其作为构造函数中的参数传递给grapher类：

```
public grapher(ServiceProvider serviceProvider) {
     records = serviceProvider.getRecords();
} 
```

在 getCompanyData 方法中，使用您的类变量记录而不是 s。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-13T03:02:04.820

将 的实例`ServiceProvider`作为参数传递给`grapher`构造函数，然后它可以将其作为参数传递给`getCompanyData()`.

由于实例是在`grapher`类之外创建的，因此除非您`grapher`将该`ServiceProvider`实例交给`grapher`.

`ArrayList`顺便说一句，确保无论你做什么`grapher`，你都不会改变它。如果这样做，您将在 中更改它`ServiceProvider`（因为它都只是对相同基础的引用`ArrayList`）。这可能不是你想要做的。如果您确实需要更改它，请制作一个副本并使用该副本。

# entity-framework - 实体框架：多对多

> ID：10568917
> 
> 赞同：0
> 
> 时间：2012-05-13T02:38:48.970
> 
> 标签：entity-framework, ef-code-first, many-to-many

我有以下情况： A`Doctor`可以有多个`Companions`. 一个`Companion`也可以有多个`Doctors`。这是我的课程（减去上下文）：

```
Public Class Doctor

    Public Property DoctorId As Integer
    Public Property Regeration As Integer
    Public Property Name As String
    Public Property Actor As String
    Public Property Companions As List(Of Companion)

End Class

Public Class Companion

    Public Property CompanionId As Integer
    Public Property Name As String
    Public Property Actor As String
    Public Property Doctors As List(Of Doctor)

End Class

Public Class DoctorViewModel

    Public Property DoctorId As Integer
    Public Property Actor As String
    Public Property Companions As List(Of CompanionViewModel)

End Class

Public Class CompanionViewModel

    Public Property Actor As String

End Class 
```

我正在尝试获取一位奇异的医生，并附上与他一起旅行的同伴名单。我可以很简单地做到这一点，但我试图塑造查询以仅获取几列而不是整个实体。他是我的拙劣查询 - X 是我无法弄清楚的。

```
Dim query = From d In context.Doctors
                From c In context.Companions
                Select New DoctorViewModel With {
                    .Actor = d.Actor,
                    .DoctorId = d.DoctorId,
                    .Companions = XXXXXXX} 
```

**编辑：**如果我查询：

```
(From d In Tardis.Doctors
 Where d.Actor = "Tom Baker"
 Select New DoctorViewModel With {.Actor = d.Actor, .Companions = d.Companions.Select(Function(c) New CompanionViewModel With {.Actor = c.Actor})}).SingleOrDefault 
```

我得到：

> “无法转换类型 'System.Collections.Generic.IEnumerable `1' to type 'System.Collections.Generic.List`1'。LINQ to Entities 仅支持转换实体数据模型原始类型。”

放弃查询中的 ViewModel 类并将其作为匿名类型获取，然后将其传递给 ViewModel 中的构造函数（我的模型有一些需要的函数）并像这样填充类会被认为是讨厌的吗?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T05:49:14.750

它可能不仅没问题，而且更具可读性（又名可维护）。特别是因为查询不会返回匿名类型，所以它会返回一个 IQueryable

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T05:51:06.083

解决了！我在这上面花了好几天！诀窍是将 Doctor ViewModel 中的 List 更改为`IEnumerable(Of CompanionViewModel)`

# mercurial - 如何清理善变变更集中的机密数据？

> ID：10568920
> 
> 赞同：3
> 
> 时间：2012-05-13T02:39:32.990
> 
> 标签：mercurial, history, changeset

我想出售我的系统副本并且需要将源代码传输给我的客户。我使用 Mercurial 作为 VCS。我的代码中有一些机密数据。例如，Amazon 访问密钥/安全密钥、数据库密码和 ssl 私钥。这些键写在代码或配置文件中，如下所示：

```
# settings of Amazon S3 storage
s3.storages:
    access_key: <secret>
    secret_key: <secret> 
```

在将代码传输给他们之前，我需要清理代码库中的所有机密数据。但它们都在历史中（变更集）。使用 Mercurial，我怎样才能清除这些秘密？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-13T17:57:58.643

如果您只给客户一个快照，您可以在运行后进行`hg archive`。

如果您想让他们访问具有完整历史记录的存储库，您需要使用它`hg convert`来排除该文件。

在这种情况下，您最好让 AWS 密钥失效并在未来使用新的密钥——亚马逊让这变得非常容易。

展望未来，您最好不要将这些密钥放入源代码控制中。而是放入一个`config.sample`文件，然后添加`config.actual`顶部您的`.hgignore`.

# php - MySQL：使用时间戳，如何转换为我用户的时区？

> ID：10568921
> 
> 赞同：0
> 
> 时间：2012-05-13T02:39:34.637
> 
> 标签：php, mysql, sql, lamp

`timestamp`在我的 LAMP 应用程序中，我使用MySQL 中的数据类型存储某些日期/时间戳。据我了解，这将在保存时自动转换为 UTC，并在检索时从 UTC 转换回来。从 UTC 转换回来取决于安装 MySQL 的服务器的时区设置，对吧？

如果我希望将时间戳转换为我的用户所在的任何时区怎么办？如何查询 SQL 以将这些时间戳返回到指定的时区？我的服务器的时区对我的用户毫无用处，除非他们碰巧在我猜的同一个时区。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T02:48:15.720

与此问题类似（[检测用户时区并使用该时区显示 UTC 时间](https://stackoverflow.com/questions/10280292/detect-user-timezone-and-display-utc-time-with-that-timezone)），您可以按以下方式进行：

1.  检测用户时区偏移
2.  计算 MySQL / Web Server 的时区之间的差异
3.  应用你的逻辑

**更新：**此处的另一个相关问题：[确定用户的时区](https://stackoverflow.com/questions/13/determining-a-web-users-time-zone)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T05:59:36.227

我想你想要 [CONVERT_TZ](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_convert-tz)函数。

# java - 删除并添加回 JPanel 后，MouseEvent 未在 JList 中触发

> ID：10568928
> 
> 赞同：2
> 
> 时间：2012-05-13T02:40:13.160
> 
> 标签：java, swing, jlist

我有两个 JList，jltCategories 和 jltSubcategories，属于同一个 JPanel。双击 jltCategories 会导致 jltSubcategories 填充相应的子类别，并且 jltSubcategories 从 JPanel 中删除，添加回来并重新验证。

在 jltSubcategories 被删除/添加回来后双击它不会触发任何东西。但是，如果我打开程序并双击 jltSubcategories，它将触发其鼠标事件：如果尚未删除/添加回来，它将触发，但如果已删除/添加回来，它将不会触发。jltCategories 也是如此：如果我导致它被删除/添加，它将停止触发。为什么会这样？谢谢！

```
jltCategories.addMouseListener(new MouseAdapter() {
    public void mouseClicked(MouseEvent e) {
        if (e.getClickCount() > 1) {
            jbtNavigate.doClick();
        }
    }
});
jltSubcategories.addMouseListener(new MouseAdapter() {
    public void mouseClicked(MouseEvent e) {
        if (e.getClickCount() > 1) {
            jbtLoad.doClick();
        }
    }
});
jbtNavigate.addActionListener(new ActionListener() {
    public void actionPerformed(ActionEvent e) {
        String catName = jltCategories.getSelectedValue();
        try {
            jpLists.remove(jltSubcategories);
            jltSubcategories = new JList<String>(SQL.populateSubcategories(catName));
            jpLists.add(jltSubcategories);
            jpLists.revalidate();
        } catch (SQLException e1) {
            e1.printStackTrace();
        }
    }
});
jbtLoad.addActionListener(new ActionListener() {
        public void actionPerformed(ActionEvent e) {
             System.out.println("Testing Testing 213");
        }
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-13T02:56:32.533

*光看*是不够`revalidate()`的；您还必须让*模型*通知*视图*新数据可用。

 ***```
DefaultListModel  model = (DefaultListModel ) jltSubcategories.getModel();
model.fireContentsChanged(0, model.getSize()); 
```

如果这无效，请编辑您的问题以包含一个显示您描述的问题的[sscce](http://sscce.org/)。

附录：不清楚你为什么使用 a`MouseListener`来影响更新；使用 a ，`ListSelectionListener`如图所示[。](https://stackoverflow.com/a/7620726/230513)***

# java - Java：事务处理系统

> ID：10568930
> 
> 赞同：0
> 
> 时间：2012-05-13T02:40:22.177
> 
> 标签：java, sql, database, jdbc

我有桌子`accounts`和`action`。`accounts`需要根据存储的指令进行修改`action`。
每行包含一个帐户 ID 、`action`一个操作（i=插入、u=更新、d=删除、x=无效操作）和更新帐户的数量。

*   在插入时，如果帐户已经存在，则应该进行更新
*   在更新时，如果帐户不存在，则由插入创建
*   在删除时，如果该行不存在，则不采取任何措施

* * *

**输入**

帐户：

```
+---id----value--+
|   1  |   1000  |
|   2  |   2000  |
|   3  |   1500  |
|   4  |   6500  |
|   5  |    500  |
+----------------+ 
```

行动：

```
+---account_id---o---new_value---status---+
|       3      | u |     599   |          |
|       6      | i |    2099   |          |
|       5      | d |           |          |
|       7      | u |    1599   |          |
|       1      | i |     399   |          |
|       9      | d |           |          |
|      10      | x |           |          |
+-----------------------------------------+ 
```

* * *

**输出**

帐户：

```
+---id----value--+
|   1  |    399  |
|   2  |    800  |
|   3  |    599  |
|   4  |   1400  |
|   6  |  20099  |
|   7  |   1599  |
+----------------+ 
```

行动：

```
+---account_id---o---new_value-------------------status----------------+ 
|       3      | u |     599   | Update: Success                       |
|       6      | i |   20099   | Update: Success                       |
|       5      | d |           | Delete: Success                       |
|       7      | u |    1599   | Update: ID not founds. Value inserted |
|       1      | i |     399   | Insert: Acc exists. Updated instead   |
|       9      | d |           | Delete: ID not found                  |
|      10      | x |           | Invalid operation: No action taken    |
+----------------------------------------------------------------------+ 
```

* * *

我对 Java 和 JDBC 有经验，但不幸的是我不知道如何从这里开始。
我需要一张额外的桌子吗？我必须使用触发器吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T03:59:32.067

我已经看到了两种用于 upsert 的技术。使用第一种技术，在事务中，您首先测试该行是否存在，并使用结果来确定是执行插入还是更新。使用第二种技术，您尝试执行更新并验证更新的记录数（JDBC 为您提供）。如果为零，则进行插入，如果为一，则完成。

# java - 在静态类中同步文件输出

> ID：10568932
> 
> 赞同：0
> 
> 时间：2012-05-13T02:40:52.500
> 
> 标签：java, multithreading

我有几个线程需要写入两个不同的文本文件。到目前为止，我有这个代码：

```
public class Logger {

    public static void printToGameLog(String value){
        Writer writer = null;
        try {
            writer = new BufferedWriter(new OutputStreamWriter(
                new FileOutputStream("GameLog.txt", true), "utf-8"));
            synchronized(writer){
                writer.write(outputString + "\r\n");
            }
        } catch (IOException ex){
            System.out.println("cannot create log file");
        } 
    }

    public static void printToServerLog(String value){
        Writer writer = null;
        try {
            writer = new BufferedWriter(new OutputStreamWriter(
                new FileOutputStream("serverLog.txt", true), "utf-8"));
            synchronized(writer){
                writer.write(outputString + "\r\n");
            }
        } catch (IOException ex){
            System.out.println("cannot create log file");
        }
    }
} 
```

这是确保不超过一个线程同时写入同一个文件的一种可接受的方式吗？

如果一个线程调用这些方法之一并进入同步块，那么如果另一个线程出现并尝试执行相同的方法会发生什么。当它尝试使用局部变量`writer`时，它是否会尝试获取已被另一个线程锁定的相同对象并因此阻塞？我原以为它会简单地创建自己的单独变量，这意味着我应该让 writer 成为静态类变量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T03:16:02.563

由于有单独的日志文件，我不明白为什么需要进行类级同步。似乎是一个不必要的瓶颈。我会分别为每种方法提供同步（因为它们可以同时访问单独的文件）：

```
public class Logger
{
    private static final Object GAME_LOG_LOCK = new Object();
    private static final Object SERVER_LOG_LOCK = new Object();

    public static void printToGameLog(String value){
        synchronized (GAME_LOG_LOCK) {
            Writer writer = null;
            try {
                writer = new BufferedWriter(new OutputStreamWriter(
                    new FileOutputStream("GameLog.txt", true), "utf-8"));
                writer.write(outputString + "\r\n");
            } catch (IOException ex){
                System.out.println("cannot create log file");
            } 
        }
    }

    public static void printToServerLog(String value){
        synchronized (SERVER_LOG_LOCK) {   
            Writer writer = null;
            try {
                writer = new BufferedWriter(new OutputStreamWriter(
                    new FileOutputStream("serverLog.txt", true), "utf-8"));
                writer.write(outputString + "\r\n");
            } catch (IOException ex){
                  System.out.println("cannot create log file");
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T02:51:26.680

这是您的代码中的空指针异常，请尝试在静态方法上使用同步块的这种方式

```
 synchronized(Logger.class){ 
```

或者另一种选择是将整个方法设置为同步，就像这样

```
public static synchronized void printToGameLog(String value){ 
```

和

```
public static synchronized void printToServerLog(String value){ 
```

我不相信你需要在这里同步，如果你有一个正在从多个线程读取/写入的状态，你只需要同步。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-13T16:04:15.837

这是对您的问题的另一种看法。它使用单个线程来写入日志文件，并且只有该线程可以访问这些文件。必须对 BlockingQueue 进行记录的线程：

```
public class ThreadedLog {

    //This is some code to test the logger
    public static void main(String[] args) throws UnsupportedEncodingException, FileNotFoundException {

        ThreadedLog log = new ThreadedLog("/tmp/test.txt");
        // Start 100 thread that write against the log
        for (int i = 0; i < 100; i++) {
            new Thread(new TestLogger(log)).start();
        }
    }

    private static class TestLogger implements Runnable {

        private ThreadedLog log;

        public TestLogger(ThreadedLog log) {
            this.log = log;
        }

        @Override
        public void run() {
            for (int i = 0; i < 5000; i++) {
                try {
                    log.log("This is entry " + i + " from thread " + Thread.currentThread().getId());
                } catch (InterruptedException ex) {
                }
            }
            System.out.println(Thread.currentThread().getId() + " is done");
        }
    }
     //________________________________________________________________________________________________
    /*
     * This is the code for the actual logger
     *
     */
    private final BlockingQueue<String> queue = new ArrayBlockingQueue<>(10000);
    private String fileName;
    private Thread thread;
    private Writer writer;

    public ThreadedLog(String fileName) throws UnsupportedEncodingException, FileNotFoundException {
        this.fileName = fileName;
        thread = new Thread(new LoggingThread());
        writer = new BufferedWriter(new OutputStreamWriter(
            new FileOutputStream(fileName, true), "utf-8"));
        thread.start();
    }

    private class LoggingThread implements Runnable {

        @Override
        public void run() {

            try {
                for (;;) {
                    ThreadedLog.this.writer.write(queue.take() + "\r\n");
                    ThreadedLog.this.writer.flush();
                }
            } catch (InterruptedException | IOException e) {
                e.printStackTrace();
                try {
                    ThreadedLog.this.writer.close();
                } catch (Exception ex) {
                }
            }
        }
    }

    public void log(String string) throws InterruptedException {
        queue.put(string);
    }
} 
```

# ruby-on-rails - 多模型查询和排序

> ID：10568934
> 
> 赞同：1
> 
> 时间：2012-05-13T02:42:30.793
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord, ruby-on-rails-3.1

我想知道如何连接两个不同的模型，然后通过另一个关联模型对它们进行排序。

假设我有一个帐户，它有多个 CARS 和 BIKES，并且它们都与 WHEELSET 具有多态关系 (has_one)。

我将如何编写查询以选择给定帐户的所有自行车和汽车，并按轮对（或轮对模型中的另一列）对它们进行排序？

```
Account
has_many :cars, :bikes

Bike
belongs_to :account
has_one wheelset, :as => wheelable

Car
belongs_to :account
has_one wheelset, :as => wheelable

Wheelset
belongs_to :wheelable, :polymorphic => true 
```

我在想类似以下的事情，（不幸的是，这不起作用）

```
a = Account.first
sets = a.bikes.includes(:wheelset) + self.cars.includes(:wheelset)
sets.order('wheelset.wheels ASC') 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-13T18:16:52.827

您可以构建一个标准的 Ruby 数组并使用数组[排序方法](http://www.ruby-doc.org/core-1.9.3/Array.html#method-i-sort-21)对它们进行排序。

```
a = Account.first
sets = Array.new
sets += a.bikes + a.cars
sets.sort! { |a, b| a.wheelable <==> b.wheelable } 
```

我还没有测试过这个，但考虑到这种情况，我大致会如何去做。

# html - 删除换行符 HTML

> ID：10568937
> 
> 赞同：1
> 
> 时间：2012-05-13T02:44:22.070
> 
> 标签：html

目前，`<p>`我页面上的所有元素都显示如下：

> 第一的
> 
> 第二
> 
> 等等...

`p`我希望每个元素之间没有边距。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-13T02:46:44.230

你可以通过修改CSS来改变它：

```
​p {
  margin: 0px;
}​ 
```

# javascript - CoffeeScript/JavaScript：为什么要将字母分配给分配了数字的变量？

> ID：10568942
> 
> 赞同：0
> 
> 时间：2012-05-13T02:45:45.443
> 
> 标签：javascript, coffeescript

我是一个没有经验的 JavaScript 用户，正在阅读《[CoffeeScript：加速 JavaScript 开发](http://pragprog.com/book/tbcoffee/coffeescript)》一书，其中作者制作了一种 Scrabble 应用程序（Scrabble 单词在 5 x 5 网格中）来演示实践中的一些概念。我对`randomLetter`下面的方法有点麻烦。有人可以参考以下几点解释下面的代码片段：

i) 作者确实这样做了，`x = 1`但随后似乎用 . 为 x 分配了一个字母`x += tileCounts[letter]`。为什么要这样做？

ii) 如果与我在 (i) 中的假设相反，他给 x 分配了一个数字而不是一个字母，那么“字母”实际上代表与每个字母相关的数字是如何工作的？

iii) 根据你在这里看到的，你能弄清楚为什么他只返回大于随机数的 x 吗？我意识到这里可能没有足够的信息来回答这个问题，但如果有，请解释

```
tileCounts =
  A: 9, B: 2, C: 2, D: 4, E: 12, F: 2, G: 3, H: 2, I: 9, J: 1, K: 1, L: 4
  M: 2, N: 6, O: 8, P: 2, Q: 1, R: 6, S: 4, T: 6, U: 4, V: 2, W: 2, X: 1
  Y: 2, Z: 1

totalTiles = 0
totalTiles += count for letter, count of tileCounts
alphabet = (letter for letter of tileCounts).sort()

randomLetter = ->  
  randomNumber = Math.ceil Math.random() * totalTiles
  x = 1
  for letter in alphabet
    x += tileCounts[letter]
    return letter if x > randomNumber
#END:moduleVars 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T03:22:39.680

我同意这`randomLetter()`很难理解。作为本书的作者，让我试着澄清一下。

在纯 JavaScript 中，我们唯一可用的随机性形式是`Math.random()`，它返回一个介于 0 和 1 之间的数字。`randomLetter()`带有该字母的拼字游戏瓷砖的数量。

为了使我们模拟的类比更加精确，想象一堆从`"A"`到排序的拼字游戏拼字游戏`"Z"`。那么我们要做的就是：

1.  `Math.random()`将(with range `0`to `1`)的输出转换为range `0`to `totalTiles`(tile stack 的大小) 并将其分配给`randomNumber`.
2.  遍历堆栈，直到我们到达`randomNumber`-th tile 并返回那个字母。

事后看来，我可能应该编写这个函数来更准确地遵循这个类比，首先创建一个包含所有图块的数组，然后从中抽取随机值。相反，我选择了一种间接方法：遍历字母表中的字母，用该字母绘制所有图块，然后询问“我们绘制`randomNumber`图块了吗？如果是，我们已经找到了随机字母。”

所以给出一个简短的答案：**`x`表示从堆栈中绘制的图块数量，从绘制所有`"A"`s 开始，然后是`"B"`s，依此类推。**

我希望这会有所帮助！

# xml - 如何修复两个 xml 文件的这种串联？

> ID：10568946
> 
> 赞同：0
> 
> 时间：2012-05-13T02:47:22.387
> 
> 标签：xml, xslt, merge, concatenation

我想连接两个 xml 文件。 **这是 input1.xml：**

```
<schema>
    <sequence> 
        <section id="xxx">
            <nodeA id="a">
                <fruit id="small">
                    <orange id="x" method="create">                    
                        <attributes>
                            <color>Orange</color>
                            <year>2000</year>
                        </attributes>
                    </orange>                           
                </fruit>
            </nodeA>
            <nodeB id="b">
                <dog id="large">
                    <doberman id="x" method="create">
                        <condition>
                            <color>Black</color>
                        </condition>
                    </doberman>
                </dog>
            </nodeB>
        </section>
    </sequence>
</schema> 
```

**在这里 input2.xml**

```
<schema>
    <sequence>
        <section id="xxx">
            <nodeA id="a">                
                <fruit id="small">                    
                    <melon id="x" method="create">
                        <attributes>
                            <color>Green</color>                            
                        </attributes>
                    </melon>
                </fruit>
                <lemon id="z" method="delete" />
            </nodeA>
            <nodeA id="b">
                <fruit id="small">
                    <lime id="x" method="create">
                        <attributes>
                            <color>Yellow</color>
                            <year>2001</year>
                        </attributes>
                    </lime>
                </fruit>
            </nodeA>
            <nodeB id="b">
                <dog id="small">
                    <poodle id="x" method="create">                    
                        <condition>
                            <color>White</color>
                        </condition>
                    </poodle>  
                </dog>                
            </nodeB>
            <nodeB id="c">
                <dog id="small">
                    <terrier id="x" method="delete" />
                </dog>
            </nodeB>
        </section>
    </sequence>
</schema> 
```

我的输出：

```
<schema>
    <sequence>
        <section id="xxx">
            <nodeA id="a">
                <fruit id="small">
                    <orange id="x" method="create">
                        <attributes>
                            <color>Orange</color>
                            <year>2000</year>
                        </attributes>
                    </orange>
                </fruit>
                <fruit id="small">
                    <melon id="x" method="create">
                        <attributes>
                            <color>Green</color>
                        </attributes>
                    </melon>
                </fruit>
                <lemon id="z" method="delete"/>
            </nodeA>
            <nodeB id="b">
                <dog id="large">
                    <doberman id="x" method="create">
                        <condition>
                            <color>Black</color>
                        </condition>
                    </doberman>
                </dog>
                <dog id="small">
                    <poodle id="x" method="create">
                        <condition>
                            <color>White</color>
                        </condition>
                    </poodle>
                </dog>
            </nodeB>
        </section>
    </sequence>
</schema> 
```

**虽然预期的输出是：**

```
<schema>
    <sequence>
        <section id="xxx">
            <nodeA id="a">
                <fruit id="small">
                    <orange id="x" method="create">
                        <attributes>
                            <color>Orange</color>
                            <year>2000</year>
                        </attributes>
                    </orange>
                </fruit>
                <fruit id="small">
                    <melon id="x" method="create">
                        <attributes>
                            <color>Green</color>
                        </attributes>
                    </melon>
                </fruit>
                <lemon id="z" method="delete"/>
            </nodeA>
            <nodeB id="b">
                <dog id="large">
                    <doberman id="x" method="create">
                        <condition>
                            <color>Black</color>
                        </condition>
                    </doberman>
                </dog>
                <dog id="small">
                    <poodle id="x" method="create">
                        <condition>
                            <color>White</color>
                        </condition>
                    </poodle>
                </dog>
            </nodeB>
            <nodeA id="b">   <!-- I'm missing this node -->
                <fruit id="small">
                    <lime id="x" method="create">
                        <attributes>
                            <color>Yellow</color>
                            <year>2001</year>
                        </attributes>
                    </lime>
                </fruit>
            </nodeA>
            <nodeB id="c">    <!-- I'm missing this node -->
                <dog id="small">
                    <terrier id="x" method="delete" />
                </dog>
            </nodeB>
        </section>
    </sequence>
</schema> 
```

XSLT 文件如下所示：

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:a="http://a.com">
   <xsl:strip-space elements="*" />
   <xsl:output indent="yes" method="xml" />

    <xsl:param name="input2"/>
    <xsl:variable name="to-merge" select="document($input2)" />

   <xsl:function name="a:id">
      <xsl:param name="ctx"/>
      <xsl:value-of select="concat($ctx/local-name(), $ctx/@id)"/>
   </xsl:function>   

   <xsl:key name="match" match="/schema/sequence/section/*" use="a:id(.)"/>

   <xsl:template match="@* | node()">
      <xsl:copy>
         <xsl:apply-templates select="@* | node()"/>
      </xsl:copy>
   </xsl:template>

   <xsl:template match="*[count(. | key('match', a:id(.))) = count(key('match', a:id(.)))]">
    <xsl:copy>
           <xsl:apply-templates select="@* | node()"/>

           <xsl:variable name="id" select="a:id(.)"/>
           <xsl:for-each select="$to-merge">
              <xsl:apply-templates select="key('match', $id)/*"/>
           </xsl:for-each>
    </xsl:copy>
   </xsl:template>
</xsl:stylesheet> 
```

如何修改 xslt 文件以产生所需的输出？这里的关键是保持节点的顺序。如果文件1中存在节点，我们将其合并，如果不存在，则根据它们出现的顺序将其放在底部。

非常感谢。

约翰

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T09:49:47.620

由于您已经使用 XSLT 2.0，所以我不会使用键，而是`xsl:for-each-group`按如下方式使用：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet 
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  version="2.0">

<xsl:param name="url2" select="'test2012051302.xml'"/>
<xsl:variable name="doc2" select="document($url2)"/>

<xsl:output indent="yes"/>
<xsl:strip-space elements="*"/>

<xsl:template match="@* | node()">
  <xsl:copy>
    <xsl:apply-templates select="@* , node()"/>
  </xsl:copy>
</xsl:template>

<xsl:template match="sequence">
  <xsl:copy>
    <xsl:for-each-group select="section | $doc2/schema/sequence/section" group-by="@id">
      <section id="{current-grouping-key()}">
        <xsl:for-each-group select="current-group()/*" group-by="concat(local-name(), '|', @id)">
          <xsl:copy>
            <xsl:apply-templates select="@*, *, (current-group() except .)/*"/>
          </xsl:copy>
        </xsl:for-each-group>
      </section>
    </xsl:for-each-group>
  </xsl:copy>
</xsl:template>

</xsl:stylesheet> 
```

当我使用 Saxon 9.4 HE 将上述样式表应用于您的输入样本时，我得到了结果

```
<?xml version="1.0" encoding="UTF-8"?>
<schema>
   <sequence>
      <section id="xxx">
         <nodeA id="a">
            <fruit id="small">
               <orange id="x" method="create">
                  <attributes>
                     <color>Orange</color>
                     <year>2000</year>
                  </attributes>
               </orange>
            </fruit>
            <fruit id="small">
               <melon id="x" method="create">
                  <attributes>
                     <color>Green</color>
                  </attributes>
               </melon>
            </fruit>
            <lemon id="z" method="delete"/>
         </nodeA>
         <nodeB id="b">
            <dog id="large">
               <doberman id="x" method="create">
                  <condition>
                     <color>Black</color>
                  </condition>
               </doberman>
            </dog>
            <dog id="small">
               <poodle id="x" method="create">
                  <condition>
                     <color>White</color>
                  </condition>
               </poodle>
            </dog>
         </nodeB>
         <nodeA id="b">
            <fruit id="small">
               <lime id="x" method="create">
                  <attributes>
                     <color>Yellow</color>
                     <year>2001</year>
                  </attributes>
               </lime>
            </fruit>
         </nodeA>
         <nodeB id="c">
            <dog id="small">
               <terrier id="x" method="delete"/>
            </dog>
         </nodeB>
      </section>
   </sequence>
</schema> 
```

我认为这就是你想要的。

# javascript - 带有开始和停止按钮的 clearInterval

> ID：10568947
> 
> 赞同：2
> 
> 时间：2012-05-13T02:48:02.740
> 
> 标签：javascript, setinterval

我有一个简单的倒计时使用`setinterval`，我得到我的函数没有定义的错误。我正在使用按钮开始和停止间隔。任何想法为什么会发生这种情况？

**Javascript**

```
function startCount() {
    $(function() {
        var count = 10;
        countdown = setInterval(function() {
            $("p.countdown").html(count + " seconds remaining!");
            if (count === 0) {
                window.location = 'http://google.com';
            }
            count--;
        }, 1000);
    });
}

function startStop() {
    clearInterval(countdown);
}​ 
```

**html**

```
<p class="countdown"></p>
<button onclick="startCount()">Start</button>
<button onclick="startStop()">Stop</button> 
```

**演示** [http://jsfiddle.net/54uQz/1/](http://jsfiddle.net/54uQz/1/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T03:12:46.820

在函数外部声明您的*倒计时*变量`startCount()`，以便两个函数都可以看到它。目前它只存在于第一个，所以清除计时器没有任何作用。

**代码：**

```
var countdown;

function startCount() {
    var count = 10;
    countdown = setInterval(function() {
        $("p.countdown").html(count + " seconds remaining!");
        if (count === 0) {
            window.location = 'http://google.com';
        }
        count--;
    }, 1000);
}

function startStop() {
    clearInterval(countdown);
} 
```

更新的[小提琴示例！](http://jsfiddle.net/zuul/54uQz/8/)

# javascript - 我是否需要保留对预加载图像的引用，或者它们可以被垃圾收集？

> ID：10568951
> 
> 赞同：0
> 
> 时间：2012-05-13T02:48:20.417
> 
> 标签：javascript

我在书籍或网上找到的每个图像预加载器示例都包含某种形式的`cache`所有预加载图像的数组。

我创建了一个[演示页面](http://jsfiddle.net/7hapx/)，如果您打开控制台，您可以清楚地看到它预加载图像，即使它们被垃圾收集。

所有其他预加载器是否有任何理由保留对预加载图像的引用，还是没有必要？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T02:55:43.280

通常，保留已加载图像的缓存是没有用的，因为浏览器已经自动执行此操作。但是，如果您提到的那些库这样做，他们可能有原因。可能出于动画目的，因为从 JavaScript 内存加载图像可能比从浏览器缓存加载图像要快。

# javascript - 防止父事件触发子事件

> ID：10568952
> 
> 赞同：1
> 
> 时间：2012-05-13T02:48:25.173
> 
> 标签：javascript, events

所以有很多问题询问如何防止子事件触发父事件，但我似乎找不到相反的问题。

我像这样打开和关闭父事件：

```
var body_event = function(e){
    console.log('test');
};

$('#btn').toggle(
    function(e){
        $('body').bind('click', body_event);
    }, 
    function(){
        $('body').unbind('click', body_event);
    }
); 
```

目前，如果我在这样的页面上运行它：

```
<body>
    <div id="btn">click to activate</div>
    <div id="example" onclick="alert('do not show this when event is bound')">
        try the body event by clicking here
    </div>
</body> 
```

切换工作正常，但是当我单击“单击此处尝试正文事件”时，警报仍会显示。我希望能够在绑定主体事件而不单独引用子事件时忽略所有子事件。

换句话说，我正在寻找一个比在切换时做这样的事情更好的解决方案：

```
$('#example").attr('onclick', ''); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T04:41:13.197

这很接近，但不完全在那里。它不检查是否绑定了特定的函数，只检查是否有任何事件绑定到 jQuery 对象。

必须有一种方法来查询事件以查找是否必须单击，然后随后它也指向什么功能。希望这能让你开始。

[http://jsfiddle.net/PhjB8/](http://jsfiddle.net/PhjB8/)

```
var body_event = function(e) {
    alert('test');
};

$('#btn').toggle(

function(e) {
    $('body').addClass('active').bind('click', body_event);
}, function() {
    $('body').removeClass('active').unbind('click', body_event);
});

$('#example').click(function() {
    //debugger;
    if ($('body').data('events') == undefined) {
        alert('do not show this when event is bound');
    }
});​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T02:58:54.697

event.stopPropagation() 可以解决这个问题，在body_event里面？

# android - 为什么有时从 StatusBar 转到另一个活动后，我的活动无法进入 onStop？

> ID：10568954
> 
> 赞同：0
> 
> 时间：2012-05-13T02:48:40.300
> 
> 标签：android

为什么有时从 StatusBar 转到另一个活动后，我的活动无法进入 onStop？说明： 1、启动Activity A 2、下拉状态栏，然后选择另一个Activity B启动

结果：有时，Activity A 进入 onStop，有时，它不是。为什么？

测试设备：HTC HD 安卓手机

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T03:27:00.840

因为调用的是onPause。在此处查看文档活动生命周期 developer.android.com/reference/android/app/Activity.html

# php - PHP显示存储的时间数据，并在考虑不同时区的同时存储时间数据

> ID：10568957
> 
> 赞同：0
> 
> 时间：2012-05-13T02:49:50.723
> 
> 标签：php, javascript, jquery, mysql, datetime

我正在创建这篇文章，以确认我正确理解了该过程，并获得有关解决为不同时区的用户正确显示和存储发布时间问题的一些小细节的反馈。

**存储时间**

第一步是使用 javascript 函数将用户时区作为 GMT 偏移格式，并将其存储在会话变量中。例如，$timezone 变量将存储 GMT -4

```
$timezone=$_SESSION['time']; 
```

接下来，一旦我有了我的用户时区。当用户发帖时，我将发布时间存储在 mysql 数据库中，我需要将其存储为 UTC 格式。我该怎么做呢？目前当我存储时间数据时。它是以下方式。我的戳字段是日期时间格式，如果可能的话，我想保留它。

```
INSERT INTO posts (stamp) VALUES (now()) 
```

我使用什么函数代替 now() 来获取 UTC 格式，然后将其插入到我的数据库中？我假设我需要使用一个 php 函数，该函数将使用 $timezone 来生成 UTC 日期。

**显示时间**

接下来，一旦 UTC 日期存储在数据库中。我需要根据我们设置的 $timezone 变量向用户显示数据。

所以当我显示时间时，我现在做

```
echo date('F d', strtotime($list1['stamp'])); 
```

一旦我将数据存储为 UTC 时间，这将显示 UTC 时间，但我需要向用户显示其时区的 UTC 偏移量，因此我需要`$list['stamp']`使用 $timezone 将 UTC 时间转换为用户时区。我为此使用什么功能？

**tl：dr** 这应该是我完成这项工作所需的全部内容。如果您看到任何建议或我没有考虑的项目，请告诉我，如果您知道我需要使用哪些函数将时间转换为 UTC 以存储在数据库中，以及使用什么函数来转换 UTC 时间显示用户，使用 $timezone 变量。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T03:03:33.730

将 UTC 时间插入数据库：

```
INSERT INTO posts (stamp) VALUES (UTC_DATE()) 
```

**更新：**这只会将 YYYY-MM-DD 插入到您的数据库中。如果您也需要时间，请使用：

```
INSERT INTO posts (stamp) VALUES (UTC_TIMESTAMP()) 
```

然后根据时区打印日期：

```
$date = date_create($list1['stamp'], timezone_open($timezone)); //$timezone='Pacific/Nauru';
echo date_format($date, 'F d'); 
```

这应该可以帮助您入门。了解更多关于 PHP 的面向对象方法的[DateTime 类，以及更简洁的编程。](http://www.php.net/manual/en/class.datetime.php)

# asp.net - Mysql 数据库中的显示图像很慢我将如何提高加载速度？异步

> ID：10568965
> 
> 赞同：1
> 
> 时间：2012-05-13T02:51:54.887
> 
> 标签：asp.net, mysql

您好，我正在做一个学校项目，我有一个带有图像的页面，我正在从 MySQL 数据库中检索它，但是增加图像渲染的任何方法都很慢？

任何帮助都会很棒:)

我的代码

```
<asp:DataList ID="dlst" runat="server" DataKeyField="ProductID"  DataSourceID="SqlDataSource1" RepeatDirection="Horizontal" RepeatColumns="3" >
        <HeaderTemplate>

        </HeaderTemplate>

        <ItemTemplate>
            <asp:ImageButton ID="btnpopup" runat="server" ImageUrl='<%# "GetImage.aspx?id=" + Eval("ProductID") %>' Width="200px" Height="200px" CommandArgument='<%#Eval("ProductID") %>' CommandName="popup"   CausesValidation="false" BorderStyle="Dotted" BorderColor="WhiteSmoke" />

        </ItemTemplate>

        </asp:DataList>
        <asp:SqlDataSource ID="SqlDataSource1" runat="server" 
            ConnectionString="<%$ ConnectionStrings:smokeshopConnectionString %>" 
            ProviderName="<%$ ConnectionStrings:smokeshopConnectionString.ProviderName %>" 
            SelectCommand="SELECT ProductID, Name, Description, ProductImage FROM products"></asp:SqlDataSource> 
```

我的第二页称为 GetImage

```
string id = Request.QueryString["id"];

        MySqlDataReader r = db.getImage(id);

        while(r.Read())
        {
            byte[] imgData = (byte[])r["ProductImage"];
            Response.BinaryWrite(imgData);
            Response.Flush();
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T02:55:11.603

*   将图像保存在您的 Web 服务器上，并且仅将文件名保存在数据库中。它肯定会加快速度。

*   浏览器只维护一个有限的编号。与给定子域的连接数，并且您的所有图像都是从同一子域返回的，因此这也可能是渲染缓慢的原因。考虑通过散列图像 id 生成具有不同子域（但对于给定图像相同）的每个图像标签。这将使图像下载并行。例如，static1.yourdomain.com/image1.jpg、static2.yourdomain.com/image2.jpg

*   由于每个子域都会增加一个 dns 查找开销，因此请务必不要添加太多子域。

*   不要使用 height 和 width 属性调整 html 中的图像大小，而是保留已保存的 200x200（在您的情况下）图像并进行渲染。
*   提高服务器上图像的压缩级别（取决于您可能有的图像质量要求）

# iphone - 从核心数据中获取时浮点数变为 0.0000

> ID：10568966
> 
> 赞同：0
> 
> 时间：2012-05-13T02:52:11.550
> 
> 标签：iphone, ios, ipad

我创建了一个具有浮点属性的实体并将其值设置为 0.5

```
+(void)createSportNamed:(NSString *)name withContext:(NSManagedObjectContext *)context{
Sport *newSport = [NSEntityDescription insertNewObjectForEntityForName:@"Sport" inManagedObjectContext:context];
    newSport.name = name;
    newSport.maxRep = [NSNumber numberWithInt:45];
    newSport.endurance = [NSNumber numberWithFloat:0.5f];
    NSLog(@"endurance at set = %f",[newSport.endurance floatValue]);

NSError *saveError = nil;
[context save:&saveError];
} 
```

从日志看，float的值还是0.5000

但是当我稍后获取它时，该值不知何故变成了 0.0000

```
-(NSArray*)createWorkoutForSport:(NSString*)sportName withContext:(NSManagedObjectContext*)context{

NSFetchRequest *request = [NSFetchRequest new];
request.entity = [NSEntityDescription entityForName:@"Sport" inManagedObjectContext:context];
NSPredicate *sportNamePredicate = [NSPredicate predicateWithFormat:@"name == %d",sportName];
request.predicate = sportNamePredicate;
NSError *err = nil;
NSArray *results = [context executeFetchRequest:request error:&err];
Sport *theFetchedSport = [results lastObject];

int totalRep = [[theFetchedSport maxRep]intValue];
float endure = [[theFetchedSport endurance]floatValue];
int set;
NSLog(@"Endurance = %f",endure); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T02:54:09.867

```
+(void)createSportNamed:(NSString *)name withContext:(NSManagedObjectContext *)context{
  Sport *newSport = [NSEntityDescription insertNewObjectForEntityForName:@"Sport" inManagedObjectContext:context];
  newSport.name = name; 
```

这清楚地表明您的 Sport 实体的“名称”字段是一个字符串。

```
[NSPredicate predicateWithFormat:@"name == %d",sportName] 
```

然而你在这里使用的是`%d`，这意味着`int`。您正在将字符串指针转换为 int。你应该使用`%@`. 因此，您的 fetch 请求返回一个空数组，并且`-lastObject`正在返回`nil`，这意味着 that `[nil endurance]`is `nil`，这意味着 that `[[nil endurance] floatValue]`is `nil`，或`0`。

# c++ - C++ STL 向量迭代器与索引访问和线程安全

> ID：10568969
> 
> 赞同：4
> 
> 时间：2012-05-13T02:52:25.263
> 
> 标签：c++, multithreading, stl, thread-safety

我正在迭代一个 STL 向量并从中读取值。还有另一个线程可以更改此向量。现在，如果其他线程从向量中插入或删除元素，它会使迭代器无效。没有使用涉及的锁。我选择通过索引（方法 1）代替迭代器（方法 2）访问容器是否使其线程安全？性能呢？

```
struct A{int i; int j;}; 
```

方法一：

```
 size_t s = v.size();//v contains pointers to objects of type A
    for(size_t i = 0; i < s; ++i)
    {
         A* ptr = v[i];
         ptr->i++;
    } 
```

方法二：

```
std::vector<A*>::iterator begin =  v.begin();
std::vector<A*>::iterator end =  v.end();
for(std::vector<A*>::iterator it = begin; it != end; ++it)
{
     A* ptr = *it;
     ptr->i++: 
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-13T03:32:02.353

标准库容器的线程安全保证非常简单（这些规则是在 C++ 2011 中添加的，但基本上所有当前的库实现都符合这些要求并施加相应的限制）：

1.  可以有多个并发读者
2.  如果有一个线程修改容器，则不应有其他线程访问（读取或写入）它
3.  要求是每个容器对象

实际上，这意味着您需要使用容器外部的某种机制来保证从多个线程访问的容器得到正确处理。例如，您可以使用互斥锁或读写器锁。当然，大多数时候容器只能从一个线程访问，并且没有任何锁定就可以正常工作。

如果不使用显式锁，您将导致数据竞争并且行为未定义，与您使用索引还是迭代器无关。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-13T02:55:37.943

不，STL 容器不是线程安全的。

您应该在每个线程访问向量时提供对每个线程（删除的线程/添加的线程）的独占访问权限。即使在使用索引时，您也可能会删除第 i 个元素，从而使您检索到的指针无效。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-26T12:50:37.253

OP “我选择通过索引（方法 1）而不是迭代器（方法 2）访问容器是否使其线程安全？”

不，一旦您开始写入数据结构，这两种方法都不是线程安全的。

因此，您需要序列化对数据结构的访问。

为了节省您大量的时间和挫败感，有很多现成的解决方案，例如

英特尔线程构建模块 (TBB)，带有线程安全容器，例如`concurrent_vector`.

[http://threadingbuildingblocks.org/](http://threadingbuildingblocks.org/)

> concurrent_vector 是一个具有以下特性的容器：
> 
> *   按索引随机访问。第一个元素的索引为零。
> *   多个线程可以同时增长容器并添加新元素。
> *   增长容器不会使现有的迭代器或索引无效。*

OP“性能怎么样？”

不得而知。在具有不同编译器的不同系统上的不同性能，但不知道其大到足以影响您的选择。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-08-27T20:37:55.480

您的算法可以使用固定大小的数组吗？

我问的原因是，从逻辑上讲，让多个线程以线程安全、无锁的方式修改（大多数类型的）容器的唯一方法是使容器本身保持不变。这意味着 CONTAINER 在线程中永远不会改变，只会改变其中的元素。想一想在火车上弄乱棚车内部与在火车沿轨道移动时实际从火车上添加和移除整个棚车之间的区别。仅当您对该数据的操作遵守某些约束时，即使干预元素也是安全的。

好消息是锁并不总是世界末日。如果多个执行上下文（线程、程序等）可以同时命中同一个对象，那么它们通常是唯一的解决方案。

# video - 为视频共享网站购买什么类型的主机？

> ID：10568970
> 
> 赞同：0
> 
> 时间：2012-05-13T02:53:21.773
> 
> 标签：video, hosting, video-streaming

我想创建一个网站，用户可以在其中上传视频和图片供其他人查看，例如 YouTube/Flickr，但我不确定这样的网站需要哪种类型的托管。我可以为视频使用带有 Amazon S3 存储的 Hostgator 专用服务器吗？或者我可以少花钱吗？我能否以某种方式从小事做起，然后在将来需要时变得更严肃？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T03:05:49.163

如果您想“从小处着手，然后在未来需要时变得更加严肃”，那么您需要一些可以扩展的东西。看看亚马逊的网络服务或者 Rackspace。

视频网站的一个大问题是带宽。而且，您想让“体验”成为一种愉快的体验。您不希望用户必须等待三分钟才能缓冲。

视频有多大/多大？几MB？几百MB？几GB？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T03:06:46.347

问题在于带宽、延迟和价格。在许多方面，分发视频可能非常昂贵。你需要快，而且不便宜。您可以从 VPS 中的简单解决方案开始，稍后再考虑使用 Akamai 之类的解决方案。

# c++ - IAT 钩住但钩住的函数没有被调用

> ID：10568972
> 
> 赞同：4
> 
> 时间：2012-05-13T02:53:36.887
> 
> 标签：c++, c, windows, api, hook

我正在编写代码以在 Windows 中执行 IAT 的挂钩。我可以在 IAT (Kernel32!GetCurrentProcessId) 中更改目标函数的地址，但是稍后在程序中调用挂钩函数时会调用 Kernel32!GetCurrentProcessId 而不是挂钩。

在调试过程中，我可以看到 Kernel!GetCurrentProcessId 的原始 IAT 地址：

GetCurrentProcessId 地址：7C8099C0

我要交换的功能是：

MyGetCurrentProcessId 地址：100118BB

我挂钩 thunkIAT->u1.Function 的地址并将其从 7C8099C0 更改为 100118BB，但是正如我之前提到的，当从程序中调用 GetCurrentProcessId() 时，会调用 Kernel32 函数（不是我注入的那个）。

执行钩子的部分代码是：

```
if(strcmp(apiName,(char*)(*nameData).Name)==0)
{
DBG_PRINT2("[processImportDescriptor]: found match for %s\n", apiName);

VirtualProtect(
    &thunkIAT->u1.Function, // start addres of the zone to "unlock"
    0x010,   // size to protect
    PAGE_EXECUTE_READWRITE, // new permission
    &dwOldProtect           // old permission
 );

procPtr = MyGetCurrentProcessId;
thunkIAT->u1.Function = (DWORD)procPtr;

DBG_PRINT2("MyGetCurrentProcessId() address: %08X\n", MyGetCurrentProcessId);
DBG_PRINT2("procPtr address: %08X\n", procPtr);
DBG_PRINT2("thunkIAT->u1.Function address: %08X\n", thunkIAT->u1.Function);

VirtualProtect(
    &thunkIAT->u1.Function, // start addres of the zone to "relock"
    0x0010,          // size to protect
    dwOldProtect,       // new permission
    &dwOldProtect2      // old permission
);

} 
```

有什么想法吗？谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T17:07:08.303

利用[CreateToolhelp32Snapshot](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682489%28v=vs.85%29.aspx) API，我能够将所有 IAT 的函数调用（未在注入的 DLL IAT 中插入钩子，因为这会导致崩溃）连接到`GetCurrentProcessId()`我的`Helloworld`程序中，该程序被编写为每隔几秒报告一次它的进程 ID。在注入 DLL 和挂钩之后，`GetCurrentProcessId()` `Helloworld`开始按预期调用挂钩函数。在我的研究中，我确实发现了一些信息，说明为什么 IAT 挂钩在某些情况下可能由于现代程序中的内置防御而无法工作：

[http://www.codeproject.com/Articles/12516/Win32-API-hooking-Another-reason-why-it-might-not](http://www.codeproject.com/Articles/12516/Win32-API-hooking-Another-reason-why-it-might-not)
[http://www.codeproject.com/Articles/21414/Powerful-x86-x64 -Mini-Hook-Engine](http://www.codeproject.com/Articles/21414/Powerful-x86-x64-Mini-Hook-Engine)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-03-25T15:47:40.083

也许 exe 打包了一个自执行代码。如果是这种情况，请尝试在启动后或调用该函数后注入它。

# android - 弹出菜单或警报对话框时如何禁用主页键？

> ID：10568974
> 
> 赞同：0
> 
> 时间：2012-05-13T02:54:15.840
> 
> 标签：android

弹出菜单或警报对话框时如何禁用主页键？我知道如何在活动中禁用主页键。但当弹出菜单或报警对话框时，该方式无效。如何实现这个功能。还是没有办法处理这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T12:26:03.260

我的项目中有同样的要求。这是我的解决方案：

1）你应该有一个根设备。

2）确保您的活动是主要活动，它应该具有如下参数：

```
<category android:name="android.intent.category.HOME" />
<category android:name="android.intent.category.LAUNCHER" />
<category android:name="android.intent.category.DEFAULT" /> 
```

如果你有它，当你点击主页按钮时，android会建议你除启动器之外的其他应用程序......

3）接下来，由于我们已经root了设备，只需找到Launcher.apk并将其重命名为LauncerBBB.apk（甚至可以通过编程方式完成）。

4) 仅此而已。现在只有您的应用程序是主应用程序，它将通过 Home 键点击显示。

PS 如果您需要访问 Launcher，您可以从应用程序的秘密菜单启动 LauncherBBB 活动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T02:59:10.440

您不能禁用 Home Key 。因为这是 Android System ESCAPE 应用程序的最后机会。

# sql - 我可以用 bcp 指定输入 sql 文件吗？

> ID：10568975
> 
> 赞同：19
> 
> 时间：2012-05-13T02:54:19.023
> 
> 标签：sql, sql-server, sql-server-2008, bcp

使用 bcp 时如何指定带有长查询的输入 sql 文件？我尝试使用该`-i`选项，但它一直抱怨没有额外信息的命令行错误。这可能吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-05-16T08:27:31.097

我今天遇到了这个问题，并找到了一个方便的解决方法，至少在临时情况下是这样。

任何具有连接权限的用户都可以创建临时表。这意味着您还可以创建 GLOBAL 临时表。

只需使用带有全局临时表的 SELECT ...INTO 在企业管理器（或 sql cmd 或其他）中运行您的查询，例如

```
SELECT * 
INTO ##mytemptable
FROM SomeTable 
WHERE [massive where clause, for example] 
```

然后，您可以在 BCP 查询中使用一个简单的临时表

```
SELECT * FROM ##mytemptable 
```

然后通过企业管理器删除临时表

```
DROP TABLE ##mytemptable 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2016-05-30T20:50:13.837

我做了其他方法来解决这个问题。

我创建了一个批处理文件，它读取文件并在**bcp**命令中发送您的内容。看：

```
@ECHO off

SETLOCAL EnableDelayedExpansion

SET queryFile=%1
SET outFileName=%2

FOR /F "delims=" %%i IN (%queryFile%) DO SET join=!join! %%i

ECHO %join%

bcp "%join%" queryout %outFileName% /S.\SQLE_CAESAR /d /c /t"|" /T 
```

该脚本接收两个参数：

1.  有查询的文件名；
2.  导出数据的文件名；

像这样在 cmd 中执行脚本： **export-query.bat query.sql export.txt**

我希望有所帮助。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-05-13T03:48:14.477

就我而言，BCP 实用程序仅支持直接写入命令行的 Transact-SQL 查询。前任：

> bcp "SELECT Name FROM AdventureWorks.Sales.Currency" queryout Currency.Name.dat -T -c

根据[其参考](http://msdn.microsoft.com/en-us/library/ms162802.aspx)“-i”选项：

> 指定响应文件的名称，其中包含在使用交互模式（未指定 -n、-c、-w 或 -N）执行大容量复制时对每个数据字段的命令提示问题的响应。

请注意，它与[sqlcmd 实用程序](http://msdn.microsoft.com/en-us/library/ms162773.aspx)“-i”选项不同：

> 标识包含一批 SQL 语句或存储过程的文件。可以指定将按顺序读取和处理的多个文件 (...)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2019-06-28T16:50:22.267

尝试 ：

```
query=$( cat < /file.sql )
export query
bcp "${query}" queryout /home/file.csv 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-07-17T03:32:28.690

使用 powershell 可以轻松地向 bcp 提供多行查询：

```
PS> $query = @'
    select * 
    from <table>
'@
PS> bcp $query queryout <outfile> -d <database> -T -S <server> -c 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-05-20T13:35:22.963

我遇到了同样的问题，可能不是一个很好的方法。但是，我做了类似以下的事情

```
bcp "declare @query nvarchar(max)  set @query = (SELECT * FROM OPENROWSET(BULK 'F:\tasks\report_v2.sql', SINGLE_CLOB) AS Contents) exec sp_executesql @query" queryout %outFileName%  /c /C RAW -S . -U sa -P 123 -d blog /T 
```

而且我必须说，如果您使用类似全局临时表，那么全局临时表在执行查询后会自行删除。在某些情况下你不能使用它

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-05-27T06:44:16.473

真正对我有用的是：

```
@ECHO off
setlocal enableextensions enabledelayedexpansion
SET "queryFile=%1"
SET "outFileName=%2"

SET RESULT=
FOR /F "delims=" %%i IN ('type %queryFile%') DO SET RESULT=!RESULT! %%i

echo %RESULT%

rem bcp "%RESULT%" queryout %outFileName% -t^ -r \n -T -k -c -d DB_NAME -S SERVER_NAME 
```

`type file`相当于`cat file`在 unix

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-06-09T16:28:18.290

我对复杂查询所做的是使用所需语句创建一个存储过程并从 BCP 调用它：

```
bcp "exec db.schema.stored_procedure" queryout "c:\file.txt" -T -S localhost -t "|" -c 
```

这对我很有用。问候！

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-09-19T02:12:48.887

我制作了自己的脚本（称为 of `bulk.sh`）来执行此操作（不是最佳实践，也不是最佳实践……该脚本太丑陋，但非常实用）。

```
#!/bin/bash
input="SQL_FILE.sql"
count=0
const=1000
lines=()
mkdir -p bulk
while IFS= read -r line
do
  lines+=("$line")
  count=$((count+1))
  check=$((count % const))
  if [[ $check -eq 0 ]]; then
     bulk="${lines[*]}"
     unset lines
     number=$(printf "%010d" $count)
     echo $bulk > "bulk/bulk${number}.sql"
     bulk=""
  fi
done < "$input"

FILES="bulk/*"
for f in $FILES
do
  echo "Processing $f file..."
  sqlcmd -S SERVER -d DATABASE -U USER -P "PASSWORD" -i "$f"
  sleep 2s
done 
```

你可以试试，有：

```
$ docker run -v /path/to/your/sql/file/folder:/backup -it mcr.microsoft.com/mssql-tools
$ bash bulk.sh 
```

# programming-languages - 这是什么编程语言？

> ID：10568981
> 
> 赞同：3
> 
> 时间：2012-05-13T02:55:23.663
> 
> 标签：programming-languages

有人知道下面使用的是哪种语言：

```
String^ fileName = "C:\\Test1.txt";
array<Byte>^ Array = gcnew array<Byte>(512);
try
{
    FileStream^ fs = File::OpenRead(fileName);
    fs->Read(Array, 0, 512);fs->Close();
}
catch (...)
{ 
    MessageBox::Show("Disk error"); 
    Application::Exit();
} 
```

以及该语言的另一个示例：

```
int RotateLeft3 (int number)
{
    if ( ( number & 0x20000000 ) == 0x20000000 )
    {
        number <<= 3;number |= 1;
    }
    else
        number <<= 3;
    return number;
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-13T02:58:16.523

它在 .NET 中的 C++。您可以通过使用 ^ 作为指针而不是 * 来判断

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-13T03:00:49.067

这是[C++/CLI](http://en.wikipedia.org/wiki/C++/CLI)，换句话说，在 .Net CLR 之上运行的 C++ 变体。

绝不应将这与本机 C++ 混淆。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-13T02:58:18.710

它看起来像来自 Microsoft 的托管 c++。

# c# - LINQ 与 SUM() JOIN

> ID：10568989
> 
> 赞同：1
> 
> 时间：2012-05-13T02:56:57.223
> 
> 标签：c#, linq, sql-to-linq-conversion

我正在尝试将这个 SQL 语句翻译成 LINQ，但我对 LINQ 很陌生

```
select professor.nom, professor.llinatge,
SUM(case when falta.aprovada = 1 then 1 else 0 end) as FJ,
SUM(case when falta.aprovada = 0 then 1 else 0 end) as FNJ
from falta inner join professor on falta.id_profe = professor.id_profe
group by professor.llinatge, professor.nom 
```

我无法在 LINQ 中使用 JOIN 完成这项工作。我在 LINQ 中对此的最佳方法是：

```
var query = from f in db.falta
join p in db.professor
on f.id_profe equals p.id_profe
group f by new {p.nom, p.llinatge, f.aprovada} into g
select new 
{
    nombre = g.Key.nom + " "+ g.Key.llinatge,
    fj = g.Select(s=> s.aprovada == true).Count(),
    fnj = g.Select(s=> s.aprovada == false).Count()
 }; 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T03:10:07.690

您可以尝试[使用 SQL to LINQ](http://www.sqltolinq.com/) ...多年来我一直发现[Linq Pad](http://www.linqpad.net/)是一个非常方便的工具...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T11:58:28.817

最后我找到了与我的 SQL 语句匹配的 LINQ 查询：

```
from falta in db.Falta
join professor in db.Professor on falta.Id_profe equals professor.Id_profe
group new {professor, falta} by new {
  professor.Llinatge,
  professor.Nom
} into g
select new {
  g.Key.Nom,
  g.Key.Llinatge,
  FJ = (System.Int64?)g.Sum(p => (
  p.falta.Aprovada == true ? 1 : 0)),
  FNJ = (System.Int64?)g.Sum(p => (
  p.falta.Aprovada == false ? 1 : 0))
}; 
```

感谢您的帮助！希望这可以帮助！

# jquery - jQuery获取数组的第n个元素

> ID：10568990
> 
> 赞同：20
> 
> 时间：2012-05-13T02:57:10.760
> 
> 标签：jquery, arrays

```
$('#button').click(function() {
   alert($('.column').val());
}); 
```

我怎样才能得到第一个、第二个或第三个元素`.column`？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-05-13T02:59:05.350

```
$('#button').click(function() {
    alert($('.column').eq(0).val()); // first element
    alert($('.column').eq(1).val()); // second
    alert($('.column').eq(2).val()); // third
}); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-13T03:08:58.493

我喜欢选择器字符串，所以我通常这样做：

```
$('.column:eq(3)') // Fourth .column element 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-13T03:01:08.617

使用 Slice() 函数： [http ://api.jquery.com/slice/](http://api.jquery.com/slice/)

请参阅问题： [如何在 jQuery 中选择一系列元素](https://stackoverflow.com/questions/185966/how-to-select-a-range-of-elements-in-jquery)

```
$('.column').slice(0, 2).each(function() {
    $(this).val();  /* my value */
}); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-13T03:14:36.423

您可以使用`:lt`(小于) 选择器并`0, 1, and 2`通过指示`.column`index 下方的所有元素来告诉它您想要`3`：

```
$("#button").on("click", function(){
  $(".column:lt(3)").each(function(){
    alert( this.value );
  });
}); 
```

演示：http: [//jsbin.com/icevih/edit#javascript,html](http://jsbin.com/icevih/edit#javascript,html)

# android - 在应用程序中嵌入雷达（来自 Google）

> ID：10568994
> 
> 赞同：0
> 
> 时间：2012-05-13T02:58:41.197
> 
> 标签：android, package

我想在我的应用程序中实现雷达。它基本上是一个应用程序，它会根据用户的当前位置在雷达上放置一个所需位置的点，以便用户可以导航到该点，有点像 FPS 游戏中的雷达。

我发现了这个：[http ://code.google.com/p/apps-for-android/source/browse/#git%2FRadar](http://code.google.com/p/apps-for-android/source/browse/#git%2FRadar)

问题是，似乎使用它的唯一方法（我知道的方式）是将其安装为单独的应用程序，并且必须主应用程序调用 Radar 应用程序中的活动。这意味着，将有两个项目和两个应用程序将安装在用户的设备上。

我尝试将这两个项目结合在一起，并在一个项目中有两个包。问题是，雷达应用程序的 R.java 文件不会在其自己的包中生成。我浏览了这个论坛的帖子，似乎还没有人尝试将这个雷达嵌入到他们的应用程序中。

我试过弄乱 AndroidManifest 文件，但没有运气。

任何帮助，将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T18:04:02.837

我在 Eclipse 中创建了一个项目“雷达”并将其（通过属性->android->设置为库项目）设置为库项目。然后从上面第一个步骤中指定的链接，我创建并复制/粘贴所有 java 代码、drawables、String.xml 和 AndroidManifest.xml 到我的库项目中的相应位置。然后我进入我的“主”项目并设置（通过属性-> android-> 库添加库）将“雷达”项目设置为导入库。从那里开始，我可以轻松地在我的主项目中创建一个意图，该意图调用 RadarActivity 并将 2 个浮点值作为目标坐标传递。它运行良好，并在按下触发该意图的按钮时在视图中显示雷达。

我的“主”项目中有一个按钮，它启动 RadarActivity，如下所示：

```
findViewById(R.id.btShowRadar).setOnClickListener(
    new OnClickListener() {
        public void onClick(View v) {
            Intent intent = new Intent(CarLocatorActivity.this, com.google.android.radar.RadarActivity.class);
            intent.putExtra("latitude", (float)getCarLattitude());
            intent.putExtra("longitude", (float)getCarLongitude());
            startActivity(intent);
        }
    }
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T08:29:40.443

如果我理解正确，您想在自己的项目中使用雷达视图。如果您使用的是 Eclipse，那么我将按照此处所述从 Google 代码创建一个库项目：http: [//developer.android.com/guide/developing/projects/projects-eclipse.html](http://developer.android.com/guide/developing/projects/projects-eclipse.html)

然后从您自己的项目中引用它（也在该链接中描述）。

R 文件会按照[此处](http://www.vogella.com/articles/Android/article.html#overview_resources)和[此处](http://developer.android.com/guide/topics/resources/accessing-resources.html)的描述自动创建。引用 ：

> 警告：你不应该手动修改 R.java 文件——它是在你的项目编译时由 aapt 工具生成的。下次编译时会覆盖任何更改。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-14T14:38:54.417

在 android 上集成雷达的最简单方法是使用[android 雷达库](https://github.com/karamsa/android-radar)。

# php - 访问 DOCUMENT_ROOT 之外的 PHP 类文件

> ID：10568998
> 
> 赞同：5
> 
> 时间：2012-05-13T02:59:36.713
> 
> 标签：php, apache, structure

我对什么构成基于 PHP 的 Web 应用程序结构的“最佳实践”感到困惑。阅读这个网站有很多建议。经常提到的一种结构是“文档根目录中没有任何 php 文件”。虽然这听起来不错，但我看不出它是如何工作的——Web 服务器无法识别文档根目录之外的任何内容。我在这里假设文档根目录是公共访问目录，如下所示：

```
app-
  |
  - htdocs - document root
  | |
  | - index.php
  | - css/
  | - images/
  |
  - PHP classes in here/
  - Other PHP classes in here.../ 
```

还是上例中的“app”是文档根目录，而**htdocs**目录是站点结构的可公开访问区域？

**从那以后，我如何确保除htdocs**以外的目录中的文件无法进行公共访问？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-13T03:05:11.777

这个概念很简单，特别是如果您使用基于前端控制器的框架，无论它是您自己的还是现有的（如 Zend 框架）。当所有请求都通过中央控制器时，处理请求所需的文件会根据需要包含在内。包含的文件不必位于 Web 根目录中即可工作。它们只需要对控制器可用即可被包含然后执行。因此，只有您的控制器需要位于 Web 根目录中。其他一切都可以在它之外。

仅供参考，这也适用于非 OOP 应用程序。您只需要在每个页面中包含您需要的文件。

Web 根目录中需要的是浏览器请求的任何资产，如图像、样式表、javascript 文件等。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-13T04:10:00.923

虽然网络服务器确实不会识别文档根目录“外部”的任何内容，但这仅适用于**用户**通过 HTTP 请求请求的文件。

PHP 在网络服务器中运行，没有文档根和 URL 的概念。它只看到网络服务器主机操作系统的底层文件系统，以及符合某些标准的数据进出。PHP 唯一会受到一些基于 Web 的限制的情况是，如果 Web 服务器本身在 chroot 监狱中运行。

因此，您可以在文件系统的任何位置放置一个 php 文件**，**并且假设权限正确，PHP 将能够访问并运行它。该文件是否埋在完全位于文档根目录之外的某个 500 层深的目录中并不重要——如果它可以访问，PHP 可以运行它。