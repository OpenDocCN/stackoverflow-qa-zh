# StackOverflow 问答 11356000-11356999

# nginx - 我的 Php-FPM 返回 500 内部错误 - nginx

> ID：11356000
> 
> 赞同：0
> 
> 时间：2012-07-06T04:47:59.480
> 
> 标签：nginx, php

我的 Php-FPM 返回 500 内部错误 - nginx

我尝试访问我创建的 hello.php 将回显 Hello

但我是 nginx 上的新手

我将粘贴我的 nginx conf 和 php-fpm conf 文件

我的 /etc/php-fpm.d/www.conf

```
[www]

; The address on which to accept FastCGI requests.
; Valid syntaxes are:
;   'ip.add.re.ss:port'    - to listen on a TCP socket to a specific address on
;                            a specific port;
;   'port'                 - to listen on a TCP socket to all addresses on a
;                            specific port;
;   '/path/to/unix/socket' - to listen on a unix socket.
; Note: This value is mandatory.
listen = 127.0.0.1:9000

; Set listen(2) backlog. A value of '-1' means unlimited.
; Default Value: -1
;listen.backlog = -1

; List of ipv4 addresses of FastCGI clients which are allowed to connect.
; Equivalent to the FCGI_WEB_SERVER_ADDRS environment variable in the original
; PHP FCGI (5.2.2+). Makes sense only with a tcp listening socket. Each address
; must be separated by a comma. If this value is left blank, connections will be
; accepted from any ip address.
; Default Value: any
listen.allowed_clients = 127.0.0.1

; Set permissions for unix socket, if one is used. In Linux, read/write
; permissions must be set in order to allow connections from a web server. Many
; BSD-derived systems allow connections regardless of permissions.
; Default Values: user and group are set as the running user
;                 mode is set to 0666
;listen.owner = nobody
;listen.group = nobody
listen.mode = 0664

; Unix user/group of processes
; Note: The user is mandatory. If the group is not set, the default user's group
;       will be used.
; RPM: apache Choosed to be able to access some dir as httpd
user = nginx
; RPM: Keep a group allowed to write in log dir.
group = nginx

; Choose how the process manager will control the number of child processes.
; Possible Values:
;   static  - a fixed number (pm.max_children) of child processes;
;   dynamic - the number of child processes are set dynamically based on the
;             following directives:
;             pm.max_children      - the maximum number of children that can
;                                    be alive at the same time.
;             pm.start_servers     - the number of children created on startup.
;             pm.min_spare_servers - the minimum number of children in 'idle'
;                                    state (waiting to process). If the number
;                                    of 'idle' processes is less than this
;                                    number then some children will be created.
;             pm.max_spare_servers - the maximum number of children in 'idle'
;                                    state (waiting to process). If the number
;                                    of 'idle' processes is greater than this
;                                    number then some children will be killed.
; Note: This value is mandatory.
pm = dynamic

; The number of child processes to be created when pm is set to 'static' and the
; maximum number of child processes to be created when pm is set to 'dynamic'.
; This value sets the limit on the number of simultaneous requests that will be
; served. Equivalent to the ApacheMaxClients directive with mpm_prefork.
; Equivalent to the PHP_FCGI_CHILDREN environment variable in the original PHP
; CGI.
; Note: Used when pm is set to either 'static' or 'dynamic'
; Note: This value is mandatory.
pm.max_children = 500

; The number of child processes created on startup.
; Note: Used only when pm is set to 'dynamic'
; Default Value: min_spare_servers + (max_spare_servers - min_spare_servers) / 2
pm.start_servers = 20

; The desired minimum number of idle server processes.
; Note: Used only when pm is set to 'dynamic'
; Note: Mandatory when pm is set to 'dynamic'
pm.min_spare_servers = 10

; The desired maximum number of idle server processes.
; Note: Used only when pm is set to 'dynamic'
; Note: Mandatory when pm is set to 'dynamic'
pm.max_spare_servers = 50

; The number of requests each child process should execute before respawning.
; This can be useful to work around memory leaks in 3rd party libraries. For
; endless request processing specify '0'. Equivalent to PHP_FCGI_MAX_REQUESTS.
; Default Value: 0
pm.max_requests = 5000

; The URI to view the FPM status page. If this value is not set, no URI will be
; recognized as a status page. By default, the status page shows the following
; information:
;   accepted conn    - the number of request accepted by the pool;
;   pool             - the name of the pool;
;   process manager  - static or dynamic;
;   idle processes   - the number of idle processes;
;   active processes - the number of active processes;
;   total processes  - the number of idle + active processes.
; The values of 'idle processes', 'active processes' and 'total processes' are
; updated each second. The value of 'accepted conn' is updated in real time.
; Example output:
;   accepted conn:   12073
;   pool:             www
;   process manager:  static
;   idle processes:   35
;   active processes: 65
;   total processes:  100
; By default the status page output is formatted as text/plain. Passing either
; 'html' or 'json' as a query string will return the corresponding output
; syntax. Example:
;   http://www.foo.bar/status
;   http://www.foo.bar/status?json
;   http://www.foo.bar/status?html
; Note: The value must start with a leading slash (/). The value can be
;       anything, but it may not be a good idea to use the .php extension or it
;       may conflict with a real PHP file.
; Default Value: not set
;pm.status_path = /status

; The ping URI to call the monitoring page of FPM. If this value is not set, no
; URI will be recognized as a ping page. This could be used to test from outside
; that FPM is alive and responding, or to
; - create a graph of FPM availability (rrd or such);
; - remove a server from a group if it is not responding (load balancing);
; - trigger alerts for the operating team (24/7).
; Note: The value must start with a leading slash (/). The value can be
;       anything, but it may not be a good idea to use the .php extension or it
;       may conflict with a real PHP file.
; Default Value: not set
;ping.path = /ping

; This directive may be used to customize the response of a ping request. The
; response is formatted as text/plain with a 200 response code.
; Default Value: pong
;ping.response = pong

; The timeout for serving a single request after which the worker process will
; be killed. This option should be used when the 'max_execution_time' ini option
; does not stop script execution for some reason. A value of '0' means 'off'.
; Available units: s(econds)(default), m(inutes), h(ours), or d(ays)
; Default Value: 0
;request_terminate_timeout = 0

; The timeout for serving a single request after which a PHP backtrace will be
; dumped to the 'slowlog' file. A value of '0s' means 'off'.
; Available units: s(econds)(default), m(inutes), h(ours), or d(ays)
; Default Value: 0
;request_slowlog_timeout = 0

; The log file for slow requests
; Default Value: not set
; Note: slowlog is mandatory if request_slowlog_timeout is set
slowlog = /var/log/php-fpm/www-slow.log

; Set open file descriptor rlimit.
; Default Value: system defined value
;rlimit_files = 1024

; Set max core size rlimit.
; Possible Values: 'unlimited' or an integer greater or equal to 0
; Default Value: system defined value
;rlimit_core = 0

; Chroot to this directory at the start. This value must be defined as an
; absolute path. When this value is not set, chroot is not used.
; Note: chrooting is a great security feature and should be used whenever
;       possible. However, all PHP paths will be relative to the chroot
;       (error_log, sessions.save_path, ...).
; Default Value: not set
;chroot =

; Chdir to this directory at the start. This value must be an absolute path.
; Default Value: current directory or / when chroot
;chdir = /var/www

; Redirect worker stdout and stderr into main error log. If not set, stdout and
; stderr will be redirected to /dev/null according to FastCGI specs.
; Default Value: no
;catch_workers_output = yes

; Limits the extensions of the main script FPM will allow to parse. This can
; prevent configuration mistakes on the web server side. You should only limit
; FPM to .php extensions to prevent malicious users to use other extensions to
; exectute php code.
; Note: set an empty value to allow all extensions.
; Default Value: .php
;security.limit_extensions = .php .php3 .php4 .php5

; Pass environment variables like LD_LIBRARY_PATH. All $VARIABLEs are taken from
; the current environment.
; Default Value: clean env
;env[HOSTNAME] = $HOSTNAME
;env[PATH] = /usr/local/bin:/usr/bin:/bin
;env[TMP] = /tmp
;env[TMPDIR] = /tmp
;env[TEMP] = /tmp

; Additional php.ini defines, specific to this pool of workers. These settings
; overwrite the values previously defined in the php.ini. The directives are the
; same as the PHP SAPI:
;   php_value/php_flag             - you can set classic ini defines which can
;                                    be overwritten from PHP call 'ini_set'.
;   php_admin_value/php_admin_flag - these directives won't be overwritten by
;                                     PHP call 'ini_set'
; For php_*flag, valid values are on, off, 1, 0, true, false, yes or no.

; Defining 'extension' will load the corresponding shared extension from
; extension_dir. Defining 'disable_functions' or 'disable_classes' will not
; overwrite previously defined php.ini values, but will append the new value
; instead.

; Default Value: nothing is defined by default except the values in php.ini and
;                specified at startup with the -d argument
;php_admin_value[sendmail_path] = /usr/sbin/sendmail -t -i -f www@my.domain.com
;php_flag[display_errors] = off
php_admin_value[error_log] = /var/log/php-fpm/www-error.log
php_admin_flag[log_errors] = on
;php_admin_value[memory_limit] = 32M 
```

我的 nginx /etc/nginx/conf.d/default.conf

```
server {
    listen       80;
    server_name  localhost;

    #charset koi8-r;
    #access_log  /var/log/nginx/log/host.access.log  main;

    location / {
        root   /usr/share/nginx/html;

        index  index.html index.htm;
    }

# Pass PHP scripts to PHP-FPM
location ~* \.php$ {
    try_files       $uri /index.php;
    fastcgi_index   index.php;
    fastcgi_pass    127.0.0.1:9000;
    #fastcgi_pass   unix:/var/run/php-fpm/php-fpm.sock;
    include         fastcgi_params;
    fastcgi_param   SCRIPT_FILENAME    $document_root$fastcgi_script_name;
    fastcgi_param   SCRIPT_NAME        $fastcgi_script_name;
}

    #error_page  404              /404.html;

    # redirect server error pages to the static page /50x.html
    #
    error_page   500 502 503 504  /50x.html;
    location = /50x.html {
        root   /usr/share/nginx/html;
    }

    # proxy the PHP scripts to Apache listening on 127.0.0.1:80
    #
    #location ~ \.php$ {
    #    proxy_pass   http://127.0.0.1;
    #}

    # pass the PHP scripts to FastCGI server listening on 127.0.0.1:9000
    #
    #location ~ \.php$ {
    #root           html;
    #fastcgi_pass   127.0.0.1:9000;
    #fastcgi_index  index.php;
    #fastcgi_param  SCRIPT_FILENAME  /scripts$fastcgi_script_name;
    #include        fastcgi_params;
    #}

    # deny access to .htaccess files, if Apache's document root
    # concurs with nginx's one
    #
    #location ~ /\.ht {
    #    deny  all;
    #}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-24T01:37:45.917

这是 Plesk 的 11.5 版吗？如果是这样，我必须将以下代码添加到我的 last_nginx.conf 文件中。

路径：/var/www/vhosts/system/domain_name/conf/last_nginx.conf

添加以下内容：

```
 location ~ /$ {
    index index.php index.cgi index.pl index.html index.xhtml index.htm index.shtml;
    try_files $uri $uri/ /index.php?$args;
 } 
```

完成后重新启动 NGINX、PHP-FPM 和 HTTPD。如果更改有效，您应该通过 Plesk 控制面板中的 PHP-FPM 设置添加代码。

# node.js - socket.io 私信

> ID：11356001
> 
> 赞同：33
> 
> 时间：2012-07-06T04:48:03.480
> 
> 标签：node.js, socket.io, message

我一直在没有运气的情况下搜索网络。我试图弄清楚如何将私人消息从一个用户发送给另一个用户。有很多片段，但我不确定客户端/服务器交互。如果我有要发送到的套接字的 ID，如何将其发送到服务器，以及如何确保服务器仅将消息发送到那个接收器套接字？

有没有人知道的教程或演练？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-07-06T04:50:44.447

不需要教程。[Socket.IO 常见问题解答](http://socket.io/#how-to-use)在这方面非常简单：

```
socket.emit('news', { hello: 'world' }); 
```

**编辑：**当询问`socket`以后如何获取该对象时，人们正在链接到这个问题。没有必要。当新客户端连接时，在您保存用户信息的任何对象上保存对该套接字的引用。我的评论来自下面：

> 在脚本顶部某处，设置一个对象来保存用户信息。
> 
> `var connectedUsers = {};`
> 
> 在您的`.on('connection')`函数中，将该套接字添加到您的新对象中。`connectedUsers[USER_NAME_HERE] = socket;`然后，您以后可以轻松地检索它。`connectedUsers[USER_NAME_HERE].emit('something', 'something');`

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-07-06T05:38:11.423

这是一个应该有帮助的代码片段：

**客户端（发送消息）**

```
socket.emit("private", { msg: chatMsg.val(), to: selected.text() }); 
```

where`to`是指要发送私人消息的 id 并且`msg`是内容。

**客户端（接收消息）**

```
socket.on("private", function(data) {   
   chatLog.append('<li class="private"><em><strong>'+ data.from +' -> '+ data.to +'</strong>: '+ data.msg +'</em></li>');
}); 
```

`chatLog`显示聊天消息的 div在哪里。

**服务器端**

```
client.on("private", function(data) {       
    io.sockets.sockets[data.to].emit("private", { from: client.id, to: data.to, msg: data.msg });
    client.emit("private", { from: client.id, to: data.to, msg: data.msg });
}); 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2018-11-22T21:18:48.337

虽然我们在这里有很好的答案。但是，我无法很快掌握整个客户端服务器的唯一用户标识，所以我发布了这个简单的步骤，以帮助那些像我一样苦苦挣扎的人.....

在客户端，获取用户的 ID，在我的情况下，我正在获取用户名......

**客户端用户注册**

```
//Connect socket.io     
var systemUrl = 'http://localhost:4000';
var socket = io.connect(systemUrl);

//Collect User identity from the client side
var username = prompt('Enter your Username');
socket.emit('register',username); 
```

Listen to register 在服务器端将用户的套接字注册到连接的套接字

**服务端代码 用户注册**

```
/*Craete an empty object to collect connected users*/
var connectedUsers = {};

io.on('connection',function(socket){

/*Register connected user*/
    socket.on('register',function(username){
        socket.username = username;
        connectedUsers[username] = socket;
    });
}); 
```

**从客户端发送消息**

```
$(document).on('click','.username',function(){
    var username = $(this).text(),
        message = prompt("type your message");

    socket.emit('private_chat',{
        to : username,
        message : message
    });
}); 
```

**在服务器上接收消息并将其发送给私人用户**

```
/*Private chat*/
socket.on('private_chat',function(data){
    const to = data.to,
            message = data.message;

    if(connectedUsers.hasOwnProperty(to)){
        connectedUsers[to].emit('private_chat',{
            //The sender's username
            username : socket.username,

            //Message sent to receiver
            message : message
        });
    }

}); 
```

**在客户端接收消息并显示它**

```
/*Received private messages*/
socket.on('private_chat',function(data){
    var username = data.username;
    var message = data.message;

    alert(username+': '+message);
}); 
```

这不是最好的，但是你可以从这里开始......

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-07-06T05:26:57.983

我能想到的最简单的方法是让所有用户使用他们的 id 或 name 作为键并将他们的套接字作为值的一部分然后当你想向他们发送消息时你拉那个套接字和发射它......像这样的东西：

```
users[toUser].emit('msg',"Hello, "+toUser+"!"); 
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2018-05-30T17:23:50.547

如果您有一个使用 uid 注册用户的网站，那么您可以为每个用户创建一个房间并通过用户的 uid 命名房间。

首先使用以下命令将客户端连接到服务器：

```
var socket = io('server_url'); 
```

在服务器端创建一个用于检测客户端连接的事件：

```
io.on('connection', function (socket) {} 
```

然后您可以使用`socket.emit();`并询问当前用户的 uid 向其中的客户端发出。

在客户端为此请求创建一个事件，然后将用户的 uid 发送到服务器。

现在在服务器端使用以下方法将连接的套接字加入房间：

```
socket.join(uid);
console.log('user ' + socket.user + ' connected \n'); 
```

现在您可以使用以下行向用户发送私人消息：

```
io.to(uid).emit(); 
```

如果您使用上面的代码，那么已经从您的网站打开了多少标签用户并不重要。每个选项卡将连接到同一个房间。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-12-01T11:35:32.207

在 socket.io 1.0 中使用

```
io.sockets.connected[<socketid>] 
```

你可以只存储套接字ID。像这样：

```
var users = {};
users[USER_NAME] = socket.id; 
```

然后：

```
io.sockets.connected[users[USER_NAME]]
   .emit('private', {
       msg:'private message for user with name '+ USER_NAME
   }); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-05-12T20:48:33.233

您可以为 USER_A 和 USER_B 之间的消息创建一个唯一的房间，并且两个用户都必须加入这个房间。您可以使用 UUID 作为 ROOM_ID（以下示例中的“socketId”）。

```
io.on('connection', socket => {

   socket.on('message', message => {
       socket.to(message.socketId).emit('message', message);
   });

   socket.on('join', socketId => {
       socket.join(socketId);
   });

}); 
```

请参阅[加入房间](https://socket.io/docs/rooms-and-namespaces)并[发出备忘单](https://socket.io/docs/emit-cheatsheet/)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-06-11T08:15:19.560

我让它工作的方式是引入一个“注册用户”事件。只要有注册用户，这基本上就会在客户端触发，然后甚至发出这个并传递“currentUser._id”

```
Client Side: 

var socket = io();
<% if (currentUser) { %>
socket.emit('registered user', "<%= currentUser._id %>");       
<%  } %> 
```

服务器端：一旦“注册用户”触发，它会将当前用户套接字连接到新房间，名称为该用户 ID。所以基本上每个注册用户都会在一个房间里，这是他/她的 uid。

```
socket.on('registered user', function (uid) {
socket.join(uid)
}); 
```

服务器端：一个有消息发送，我将消息发送到的用户的 id 传递到 msg 对象中，然后发送到那个特定的房间。

```
// Private chat
socket.on('chat message', function (msg) {
const uidTo = msg.uidTo 
socket.in(uidTo).emit('chat message', msg )
}); `
}); 
```

# qt - 如何在 QTreeWidget/QTreeView 中获取行高

> ID：11356005
> 
> 赞同：2
> 
> 时间：2012-07-06T04:48:44.207
> 
> 标签：qt, qtreewidget

我只想从 QTreeWidgetItem 获取行高。我搜索了很多，但没有任何结果。

我想要做的是调整包含 QTreeWidget 的包装小部件的大小，以使树中的所有行都可见（或者说，它将是一个无底的扩展小部件）。

sizeHint 将始终返回 -1，因为我从未设置它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T06:49:36.503

```
int QTreeWidget::rowHeight(const QModelIndex& index) const 
```

应该够了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-14T04:20:28.777

这个`QTreeWidget`方法的结果的高度，用给定的 调用，`QTreeWidgetItem`可以解决问题（当然，`QTreeWidget`这对于 是不可用`QTreeView`的）：

```
 QRect QTreeWidget::visualItemRect (const QTreeWidgetItem* item) const; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T20:57:55.143

我相信这可以通过调整`sizePolicy`QTreeWidget 和包含 QTreeWidget 本身的包装小部件来解决。

即更改`Expanding`垂直属性的大小策略。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2018-03-15T03:38:37.547

在 Designer 中提升到像这样定义的`QTreeView`某个类：`CTreeView``ctreeview.h`

```
#ifndef CTREEVIEW_H
#define CTREEVIEW_H

#include <QTreeView>

class CTreeView : public QTreeView
{
    Q_OBJECT

public:
    explicit CTreeView(QWidget *parent = Q_NULLPTR) : QTreeView(parent) {}
    // or 
    // using QTreeView::QTreeView; // Use inherited constructors (C++11)

    int rowHeight(const QModelIndex &index) const {
        return QTreeView::rowHeight(index);
    }
};

#endif // CTREEVIEW_H 
```

# insert - SSIS重复数据插入更新方法

> ID：11356006
> 
> 赞同：1
> 
> 时间：2012-07-06T04:48:45.753
> 
> 标签：insert, ssis, duplicates

SSIS 的新手。我有一组平面文件中的数据。在同一个平面文件或具有不同信息的不同平面文件上可能有同一个人。我同时处理它们。但我需要知道是插入记录还是更新它（如果是同一个人）。我正在使用查找来确定该人是否存在于桌子上。我已经将 Old DB Destination FastLoadMaxInsertCommitSize 设置为 1 并使用 Ole DB 命令进行更新。但是如果遇到同一个人，它仍然无法确定更新。

我也尝试过合并控制流但失败了。

这可能是什么解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T21:06:21.633

插入/更新后，查找重复数据并删除低于最大值（ID）的 ID（如果使用身份密钥）。

# xml - 使用来自xml的日期时间在xslt中排序？

> ID：11356010
> 
> 赞同：0
> 
> 时间：2012-07-06T04:49:06.503
> 
> 标签：xml, xslt

我想根据日期按降序排序。我不知道如何做到这一点：

这是我的 xml：

```
<?xml version="1.0" encoding="ISO-8859-1" standalone="yes"?>
<inm:Results productTitle="Inmagic DB/Text WebPublisher PRO" productVersion="13.00" xmlns:inm="http://www.inmagic.com/webpublisher/query" oex="ISO-8859-1">
<inm:Recordset AC="QBE_QUERY" sn="AUTO26264" se="1392" queryCount="139" page="1" pageCount="1" setCount="139">
<inm:Record setEntry="0">
  <inm:Title>BBBBBB</inm:Title>
  <inm:Pub_Date>12-Jun-2012</inm:Pub_Date>
  <inm:Words />
</inm:Record>
<inm:Record setEntry="1">
   <inm:Title>TESTING ESTING</inm:Title>
   <inm:Pub_Date>12-jul-2012</inm:Pub_Date>
  <inm:Words />
</inm:Record>
<inm:Record setEntry="2">    
  <inm:Title>TESFDS SDFASDFASDt</inm:Title>
  <inm:Pub_Date>30-Jun-2012</inm:Pub_Date>
  <inm:Words />
</inm:Record>   
</inm:Recordset>
</inm:Results> 
```

我的xml是：

```
 <?xml version="1.0" encoding="utf-8"?>
 <xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:inm="http://www.inmagic.com/webpublisher/query">
 <xsl:output method="html"/>
 <xsl:template match="/">
 <ul class="baseList newsList">
  <xsl:for-each  select="inm:Results/inm:Recordset/inm:Record" >
    <xsl:sort select="inm:Pub_Date" order="descending"/>
      <li>
        <span class="title">
          <a href="#">
            <xsl:value-of select="inm:Title" />
          </a>
        </span>
        <p class="meta">
          <span class="dateTime">
            <xsl:value-of select="inm:Pub_Date"/>
          </span>
        </p>
      </li>
  </xsl:for-each>
</ul>
  </xsl:template> 
```

我尝试在 xslt 脚本中进行排序，但它不能完美地工作。

输出为： - 2012 年 6 月 30 日 - 2012 年 7 月 12 日 - 2012 年 6 月 12 日

但输出应为：-12-jul-2012 -30-jun-2012 -12-Jun-2012

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T09:33:01.967

我同意其他答案海报，您应该将日期转换为 ISO 日期格式。

话虽如此，如果您坚持使用示例文档中提供的格式，您可以使用以下 xsl:sort 指令...

```
<xsl:sort select="substring(inm:Pub_Date,8)" data-type="number" order="descending"/>
<xsl:sort select="string-length( substring-before(
  'JanFebMarAprMayJunJulAugSepOctNovDec',
  substring(inm:Pub_Date,4,3)))" data-type="number" order="descending"/>
<xsl:sort select="substring-before(inm:Pub_Date,'-')" data-type="number" order="descending"/> 
```

第一个按年排序，第二个按月排序，最后按天排序。

样式表作为一个整体是......

```
 <xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:inm="http://www.inmagic.com/webpublisher/query">
 <xsl:output method="html"/>
 <xsl:template match="/">
 <ul class="baseList newsList">
  <xsl:for-each  select="inm:Results/inm:Recordset/inm:Record" >
    <xsl:sort select="substring(inm:Pub_Date,8)" data-type="number" order="descending"/>
    <xsl:sort select="string-length( substring-before(
      'JanFebMarAprMayJunJulAugSepOctNovDec',
      substring(inm:Pub_Date,4,3)))" data-type="number" order="descending"/>
    <xsl:sort select="substring-before(inm:Pub_Date,'-')" data-type="number" order="descending"/>
      <li>
        <span class="title">
          <a href="#">
            <xsl:value-of select="inm:Title" />
          </a>
        </span>
        <p class="meta">
          <span class="dateTime">
            <xsl:value-of select="inm:Pub_Date"/>
          </span>
        </p>
      </li>
  </xsl:for-each>
</ul>
</xsl:template>
</xsl:stylesheet> 
```

* * *

## 更新

作为一个有用的提示，这里有一个简洁的模板，可用于将日期从 2012 年 6 月 30 日格式转换为 ISO/XML 格式。让我知道您是否可以使用 XSLT 2.0 。XSLT 2.0 中的转换变得更简单。

```
<xsl:template name="format-date">
 <xsl:param name="InDateValue" select="'01-Jan-2000'" />
 <xsl:value-of select="concat( substring($InDateValue, 8, 4), '-')"/>
 <xsl:variable name="month" select="substring($InDateValue, 4, 3)" />
 <xsl:value-of select="format-number(
          translate( $month, 'nFrylgSONDJaebMApupctov', '00240107666') +
          translate( $month, 'aFpugONDJnebMrAyluSctovc', '12268456'), '00')" />
 <xsl:value-of select="concat( '-', substring($InDateValue, 1, 2))"/>
</xsl:template> 
```

好吧，它安静的钝！但我喜欢它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T08:20:15.987

最好在 XML 中使用 ISO 日期：2012-06-30。这些方法的一个优点是它们可以自然排序，另一个优点是可以很容易地本地化不同自然语言的输出等（尤其是在 XSLT 2.0 中使用 format-number()）。

即使您被 XSLT 1.0 困住，将日期转换为 ISO 格式也很容易——代码很乏味，但编写起来并不难。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-06T05:20:11.747

您正在对 Pub_Date 元素的字符串值进行排序，因此将返回正确的顺序。

如果您想按实际日期类型进行排序，则需要 XSLT 2.0 或使用 ISO 日期格式（因此 2012 年 6 月 30 日为 20120630）。然后，这会将日期字符串放入可以排序的类型中。

# android - 如何让你的安卓应用自动更新

> ID：11356012
> 
> 赞同：23
> 
> 时间：2012-07-06T04:49:29.920
> 
> 标签：android, auto-update

我今天在 Google Play 上发布了我的第一个应用程序，哇！当我看到我的应用在 Google Play 中列出后，我意识到我需要进行更改并发布更新。

我在清单文件中进行了代码更改并增加了 versionCode 和 versionName。然后我构建了我的 apk，使用与提交给 Google Play 的原始 apk 相同的密钥签名。

我上传了一个新的 apk，停用了原来的 apk，然后激活了新的 apk，然后单击了保存。

我等了几个小时，在 Google Play 中查看，可以看到是的，我在 versionName 中输入的新值已经更新。

在我的 Android 手机上，我最初安装了第一个版本，但是当我在该手机上访问 Google Play 时，我看到了我的应用程序的新版本，但唯一的选项是“打开”和“卸载”。

我需要在开发控制台或任何地方对我的应用程序执行什么操作，以便当我或任何其他用户在 Google Play 中访问我的应用程序时出现更新选项？

在 Android Developer 中做一些研究，我读到了这个：

android:versionCode 内部版本号。此数字仅用于确定一个版本是否比另一个版本更新，数字越大表示版本越新。这不是向用户显示的版本号；该数字由 versionName 属性设置。该值必须设置为整数，例如“100”。您可以根据需要定义它，只要每个后续版本都有一个更高的数字。例如，它可以是内部版本号。或者，您可以通过分别在低 16 位和高 16 位中对“x”和“y”进行编码，将“xy”格式的版本号转换为整数。或者您可以在每次发布新版本时简单地将数字增加一。 [http://developer.android.com/guide/topics/manifest/manifest-element.html](http://developer.android.com/guide/topics/manifest/manifest-element.html)

然后我发现了这个：

如果满足以下条件，Google Play 可以管理预加载应用程序的更新： 必须将与预加载应用程序版本代码相同的包名称上传到开发者控制台 [http://support.google.com/googleplay/android- developer/bin/answer.py?hl=en&answer=113476&topic=2365760&ctx=topic](http://support.google.com/googleplay/android-developer/bin/answer.py?hl=en&answer=113476&topic=2365760&ctx=topic)

所以我很困惑，我是否增加版本代码。我很确定我应该增加它，但是更新选项再次没有出现。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-07-06T04:58:01.350

祝贺你的第一个应用程序！这是一个非常激动人心的时刻！

是的，当您更新您的应用程序时，您会增加您的版本代码。

当您测试更新版本时，您是否将 apk 文件安装到您的设备上？你可能在不知不觉中更新了它。因此，Google Play 会检测到您的设备上的应用程序和您上传的应用程序具有匹配的版本代码，并且不会提供更新。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-06T04:56:35.923

在 Google Play 上更新应用程序时，您必须*始终增加版本代码。*除非您接受，否则您的更新不会被接受。

至于您的更新未显示，Google Play 需要时间来刷新其服务器。我的更新有时需要超过 24 小时才能推送到设备，而新安装程序通常会在 2 小时内获得最新版本。

# c# - 应用程序说网络驱动器不存在，但使用 OpenFileDialog 找到

> ID：11356021
> 
> 赞同：12
> 
> 时间：2012-07-06T04:51:03.163
> 
> 标签：c#, windows-7, openfiledialog, network-drive

我制作了一个在 Win7-PC 上运行的小应用程序。它所做的只是在凌晨 1:00 检查网络驱动器的内容（并将其与本地硬盘驱动器上的文件夹进行比较），如果有差异，请将差异复制到该文件夹.

问题是，有时它找不到网络驱动器。

当应用程序启动时，使用应用程序上启动 OpenFileDialog 的按钮找到网络驱动器，并将生成的驱动器号放入按钮旁边的文本框中。从那时起，它应该自己运行。电脑永远不会关闭。

当它说找不到网络驱动器时，我可以在同一个应用程序上手动按下按钮，在 OpenFileDialog 中选择驱动器（驱动器号永远不会改变），应用程序将在几天内完美运行。然后问题再次出现。

问题是：为什么我的应用程序上的OpenFileDialog可以访问网络驱动器，而我的应用程序不能？

我的应用程序使用此函数（使用“Y:\”调用）启动复制过程以确定驱动器是否存在：

```
 public bool fn_drive_exists(string par_string)
    {
        DirectoryInfo di_dir = new DirectoryInfo(par_string);
        if (di_dir.Exists)
        {
            return true;
        }

        return false;
    } 
```

...有时它会返回 False，直到我使用 OpenFileDialog “唤醒它”。

OpenFileDialog 有什么作用，而我的应用程序没有？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T19:34:15.737

根据这个[SO post](https://stackoverflow.com/questions/133660/how-can-i-access-a-mapped-network-drive-with-system-io-directoryinfo)，如果您使用 UNC 路径而不是映射的网络驱动器，问题应该会消失。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T20:35:15.140

您也可以尝试使用：

```
System.IO.Directory.Exists(par_string); 
```

而不是为同一件事编写自己的方法。我希望框架方法能够“唤醒”网络驱动器。注意：方法也适用于 UNC 路径（类似于`\\<server name or IP address>\<shared folder>`）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-15T00:28:11.737

正如 Harvey 所说，使用 UNC 路径访问文件夹，例如 \\server\sharedfolder。代替 \\server 使用服务器的名称。您的计算机有一个名称，服务器也有一个名称。如果您知道 IP 地址，也可以使用它。您将 \sharedfolder 替换为文件的路径。一些例子：

\\AppsServer\c$\Program Files(x86)

\\FileServer1\d$\Users\John\我的文档

c$代表C盘是共享文件夹。如果未共享整个驱动器，则需要共享特定文件夹。您可以通过登录服务器、右键单击文件夹并选择“属性”来执行此操作。然后您转到“共享”选项卡并选中“共享此文件夹”复选框。如果您的共享文件夹名为 MyShare，那么您访问该文件夹的 UNC 路径将为

\\服务器\我的共享

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-23T03:51:09.140

如果您的目的地有一个静态 IP 地址，我建议您使用该 IP 地址而不是网络驱动器的域名

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-11T06:01:33.193

[这篇 SO 帖子](https://stackoverflow.com/questions/3098486/cannot-access-files-on-drive-mapped-network-share-from-a-windows-service)描述了与您所描述的类似的场景。

作为对该问题的回应而发布的链接之一将我带到了[这篇 MSDN 文章](http://msdn.microsoft.com/en-us/library/ms685143.aspx)，该文章提供了多种原因，说明为什么在尝试使用映射驱动器号访问共享网络驱动器时可能会遇到错误。

Microsoft 的建议（见下文）是简单地使用 UNC 路径。

> 必须访问远程资源的服务（或在不同安全上下文中运行的任何进程）应使用通用命名约定 (UNC) 名称来访问资源。

为了更具体地回答您的实际问题，关于为什么它突然无法访问网络共享，我冒昧地说网络共享由于空闲超时而被 Windows 断开连接，如[KB297684](http://support.microsoft.com/kb/297684)中所述。随着与网络共享的连接重新建立，任何访问断开连接的驱动器的尝试都会遇到一小段等待，这可能是导致您的问题的原因。

为了验证这个理论，尝试以相对较短的时间间隔（也许每 10 分钟一次？）将一些数据写入网络驱动器上的文件，以尝试*让*Windows 相信驱动器仍然处于活动状态。

# android - Vimeo SDK 是否可用于 Android？

> ID：11356023
> 
> 赞同：4
> 
> 时间：2012-07-06T04:51:08.343
> 
> 标签：android, sdk, vimeo

就像 facebook SDK 一样，是否有任何 SDK 可用于将 vimeo 视频集成到 android 应用程序中？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-06T05:01:47.653

该 API**对任何语言开放，**因为它响应 HTTP 调用。

> [http://developer.vimeo.com/apis/simple](http://developer.vimeo.com/apis/simple)

如果您还需要**显示私人视频**，则需要使用高级 API，这会稍微复杂一些，因为它更安全。*高级 API 使用 OAuth 1.0 进行身份验证。*

> [http://developer.vimeo.com/apis/advanced](http://developer.vimeo.com/apis/advanced)

你可能想知道的是，如果有一个**我不知道**的 Vimeo API的**Android 包装器**，但如前所述，**它是向你发送 JSON 或 XML 对象的简单调用，**如果使用高级 API，有[很多库](http://oauth.net/code/)可以处理验证。

# jquery - jQuery 更改 tr CSS 直到 tr 类不同

> ID：11356031
> 
> 赞同：0
> 
> 时间：2012-07-06T04:52:14.957
> 
> 标签：jquery, css, row, filtering, css-tables

我正在尝试做某种“树”表。

tr 之间的关系是：

```
+----------+     +----------+     +----------+
| charges  | 1:n | services | 1:n | products | 
+----------+     +----------+     +----------+ 
```

所以每条收费记录都有N项服务，每项服务都是由产品构成的。

即早餐收费收取一般早餐（与你的饮食相对应），而这早餐是由橙汁和一片面包做成的。

我试图让第一行具有特殊颜色，当用户单击向下箭头图标时，它将显示（在示例中，只是为了可视化目的更改颜色）与服务对应的行，并且对于产品行，依此类推。

![在此处输入图像描述](../Images/ed52dec9ae4a7a552333967ab6a3ea41.png)

当我单击红色圆圈中的箭头（收费 id 10）时，它会显示（红色... ¬¬）所有“儿童”服务，收费...但它也显示（红色。 .. ¬¬) 收费 n° 12 的服务.... 我只需要知道当每个循环遇到收费 12 的行时如何停止着色（显示）。所以黑色圆圈中的行不要更改为红色背景。

为此，费用、服务和产品的行具有不同的类，因此 jQuery 可以找到它们：

```
 $(".listar-servicios").click(function(event){
   event.preventDefault();
   var flag = 1;
   $(this).parent().parent().css("color","green").siblings('.fila-servicio').each(function(){    
     if(!$(this).hasClass('.fila-servicio') && flag !== 1 && $(this).hasClass('.fila-consumo')){
        $(this).css('background-color', 'green');
        flag = 0;
     }else{
        $(this).css('background-color', 'red');     
        flag = 0;
     }
  });
}); 
```

你可以在这里看到一个工作示例和我的代码：[JSBIN](http://jsbin.com/eyacoy/28)

*对不起，很长的问题。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T05:34:37.247

这是解决方案

```
 $(".listar-servicios").click(function(event){
           event.preventDefault();
           $(this).parent().parent().css("color","green").siblings('.fila-servicio,.fila-consumo').each(function(){
              if($(this).hasClass('fila-servicio')){
                  $(this).css('background-color', 'red');   
              }else if($(this).hasClass('fila-consumo')){
                return false;
              }          
          });
       }); 
```

您的代码中几乎没有问题

*   当您通过 hasClass 方法检查特定类时，您不必使用 dot(.) 因为它是 Jquery 选择器。
*   在兄弟姐妹中，您需要选择具有“fila-consumo”类的兄弟姐妹，然后只有您会在每个循环中找到该元素。

我已经删除了我认为它没有用的标志，为了打破你需要使用 return false 的循环。

* * *

更新 -

您可以使用另一种方法“nextAll”代替兄弟姐妹来完美地工作。当我测试此代码时，当您单击箭头按钮时，我发现它不适用于 Charge id 12。因为第一个兄弟本身是具有类 fila-consumo 的当前行。所以我将 nextAll 与具有所需类的选择器“tr”一起使用。下面的代码完美运行。

```
 $(".listar-servicios").click(function(event){
      event.preventDefault();
      $(this).parent().parent().css("color","green").nextAll('tr.fila-servicio,.fila-consumo').each(function(){
        if($(this).hasClass('fila-servicio')){
            $(this).css('background-color', 'red');   
        }else if($(this).hasClass('fila-consumo')){
            return false;
        }

      });
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T05:21:03.260

我能想到的最简单的方法是使用 HTML5 的数据对象。

由于无论如何您都在遍历每一行，因此添加一个数据对象 (data-"variable"="##") 并对其进行检查。

```
<tr class="fila-servicio" data-charge="10">...</tr> 
```

使用[jQuery 的“数据”方法](http://api.jquery.com/jQuery.data/)，您可以轻松地提取并检查数据值是否与当前 id 匹配：

```
$(this).closest("fila-consumo").css("color","green").siblings('.fila-servicio').each(function(){
    // Get the id of the row (preferably store this as an id or data object as well)
    var rowId=$(this).closest('td.oculto').text();
    if(!$(this).hasClass('.fila-servicio') && flag !== 1 && $(this).hasClass('.fila-consumo') && $(this).data("charge")!=rowId){
        $(this).css('background-color', 'green');
        flag = 0;
    }else{
        $(this).css('background-color', 'red');     
        flag = 0;
    }
 }); 
```

注意：由于这不是我的想法，我不确定我是否一切正确，但我认为它应该可以工作。

# php - Cakephp Mysql 查询

> ID：11356033
> 
> 赞同：0
> 
> 时间：2012-07-06T04:52:24.580
> 
> 标签：php, mysql, cakephp

如何以 cakephp 格式编写以下查询？

```
SELECT COUNT( ip_address ) AS num_values
FROM property_viewers
GROUP BY property_viewers.ip_address
ORDER BY property_viewers.id DESC 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T04:57:05.190

```
 $this->model->find("count",array("fields"=>"ip_address",'group'=>'property_viewers.ip_address','order'=>'property_viewers.id DESC')) 
```

[http://book.cakephp.org/1.3/view/1018/find#find-count-1020](http://book.cakephp.org/1.3/view/1018/find#find-count-1020)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-23T12:09:50.340

```
 $options['fields'] = array("ip_address");
 $options['group']  = array("property_viewers.ip_address"); 
 $options['order']  = array('property_viewers.id DESC');
 $this->model->find("count",$options); 
```

通过使用它，您不必担心嵌套数组

# python - Python中的概率模拟

> ID：11356036
> 
> 赞同：1
> 
> 时间：2012-07-06T04:53:10.577
> 
> 标签：python, testing, simulation, probability

给了我一个概率问题，我写了一个脚本来测试它。

掷两个无偏骰子一次，观察总分。找出以下概率： a) 总分等于或大于 7

我用 Python 编写了以下脚本，它应该给我“A”正确的概率。

```
import random

def thing(trials):

    i = 0
    number = 0

    while i < trials:

        answer1 = random.choice([1, 2, 3, 4, 5, 6])
        answer2 = random.choice([1, 2, 3, 4, 5, 6])

        if (answer1 + answer2)%2 == 0:
            number += 1.0
        elif (answer1 + answer2) > 7:
            number += 1.0

        i += 1

    print number/i 
```

这给了我 2/3 作为答案，这**是**正确的。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T04:58:16.777

理论上的答案是：

```
 1  2  3  4  5  6
   ________________
1 |2  3  4  5  6  7
2 |3  4  5  6  7  8
3 |4  5  6  7  8  9
4 |5  6  7  8  9 10
5 |6  7  8  9 10 11
6 |7  8  9 10 11 12

Total favorable outputs: [(1,1),(3,1),(1,3), (1,5) .....(7,1)..(6,6)] : total 24
All possible outputs: 36

Theoretical probability: 2/3 
```

* * *

我试过了`thing(1000000)`，输出是`0.667812`，足够接近了.. :)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T05:10:22.163

根据我的计算，10/12 是正确的。@Thrustmaster 列出了可能性，但没有它们发生的可能性。考虑到发生概率，在 36 次可能的掷骰中，有 30 种理想的结果，即 5/6（或您所拥有的 10/12）。

编辑：我看到你更新了你的问题以改变问题。在这种情况下，是的，2/3 是正确的。

# c# - 基于子控件动态增加 C#/Javascript 中 div 标签的大小

> ID：11356039
> 
> 赞同：1
> 
> 时间：2012-07-06T04:53:51.117
> 
> 标签：c#, javascript, asp.net, html

我有一个 div 标签，其中有一个 autogrow textarea。当我在文本区域中按任意键或键入内容时，它的高度一次增加一行。但是这里的问题是 div 标签的大小是一样的，所以看起来太糟糕了，就像 textarea 从 div 容器中掉出来一样......所以我希望 div 标签也随着 textarea 的增加而同时扩展。下面的代码表示包含在 div 标签中的 textarea 的代码

```
<body bgcolor="#CCC" style="height: 460px">
<form id="form1" runat="server" method="post">
<div  id="expandable_div" style="background-color: #000000" >
    <textarea id="Text1"  rows = "8" runat="server" cols="30" onkeyup="AutoGrowTextArea(this)"   name="S1"> </textarea>
</div>
</form> 
```

在样式表中，我尝试放置：

```
 div#expandable_div
        {
            min-height:205px;
            height:auto;
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T05:38:17.670

`<div>`应该会自动展开。我想问题是你正在修复`div`. 比方说...

```
 height:205px; 
```

将其替换为

```
min-height:205px;
min-width:300px; 
```

[jsFiddle](http://jsfiddle.net/gErSX/1/)上的工作演示

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T04:58:28.043

无样式 DIV 的大小由其内容定义。所以要么从 DIV 中删除高度样式，要么根据 textarea 的大小动态调整它。

# c# - 如何将 DB2 时间戳转换为日期时间？

> ID：11356041
> 
> 赞同：5
> 
> 时间：2012-07-06T04:54:07.420
> 
> 标签：c#, asp.net

如何将 DB2 ISeries 返回的时间戳转换为 c# 中的 DateTime 数据类型？

```
2012-07-06 09:52:50.926145 
```

这对我不起作用

```
myEmployee.LastModified = Convert.ToDateTime(myRecord.GetString(myRecord.GetOrdinal("LASTMODIFIED"))); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-06T04:56:11.927

[`DateTime.Parse`](http://msdn.microsoft.com/en-us/library/1k1skd40.aspx)?

```
DateTime result = DateTime.Parse("2012-07-06 09:52:50.926145"); 
```

[它确实有效。](http://ideone.com/39IA8)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T04:55:41.467

你可以这样做`DateTime.TryParse()`

```
DateTime date;
DateTime.TryParse("2012-07-06 09:52:50.926145", out date); 
```

在你的情况下

```
DateTime date,
DateTime.TryParse(myRecord.GetString(myRecord.GetOrdinal("LASTMODIFIED")), out date); 
```

# java - 在 Eclipse 中构建、版本控制、测试、归档 Java 项目的最佳实践？

> ID：11356046
> 
> 赞同：2
> 
> 时间：2012-07-06T04:54:55.513
> 
> 标签：java, svn, ant, build, project

我想知道你心目中的最佳实践来做这个标题中提到的那些事情。

这是背景。我参与了一个个人Java项目，希望系统地测试、构建、归档和发布它们。我正在使用 Eclipse 3.7。由于我对所有那些提高生产力的伟大工具都很陌生，比如 ANT、Maven、Svn、Git 等，所以我准备好学习并学习其中的任何一个。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T05:03:11.440

我最好的建议是先学习如何在**没有 Eclipse**的情况下构建、测试和打包代码。新手可能会感到困惑，因为他们的 IDE 会在不了解原因的情况下为他们做事。

我个人更喜欢 Gradle 而不是 Ant 或 Maven，但它更新并且可能更难找到示例。对于 SCM，我认为 subversion 很容易上手，但所有酷孩子都使用 Git 和 Github，所以你可能想学习它们，因为它只会在未来帮助你。

[http://www.gradle.org/docs/current/userguide/tutorial_java_projects.html](http://www.gradle.org/docs/current/userguide/tutorial_java_projects.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T05:19:20.987

现在越来越多的项目使用maven作为项目打包工具。它很方便，可以帮助您解决依赖问题。

但是，由于您是这些工具的新手，我建议您先使用 Ant。在我看来，初学者会更容易使用。我个人更喜欢使用 Eclipse 作为开发工具，使用 Ant 作为构建工具，因为 Ant 与 Eclipse 集成得很好。

对于源代码版本控制，我建议使用 SVN。您可以下载方便的 SVN 客户端，例如 Tortoise。[http://tortoisesvn.tigris.org/](http://tortoisesvn.tigris.org/)

# c++ - 自动生成枚举查找表

> ID：11356047
> 
> 赞同：2
> 
> 时间：2012-07-06T04:55:07.717
> 
> 标签：c++, enums, c-preprocessor

我正在使用与[此类](http://www.itshouldjustworktm.com/?p=32)似的技术与枚举器关联信息和/或操作。它工作得很好，但是有一个小问题需要有效地列出每个常量两次，一次在枚举声明的头文件中，一次在查找表的源文件中。我想知道是否有任何好方法，可能使用预处理器技巧（Boost.Preprocessor 是可以接受的）来“自动化”它，以便我可以在一个地方输入枚举常量和相关值等并拥有所有必要的东西（甚至可能生成查找结构本身）。

如果可能的话，我更喜欢一种保持模糊枚举样式语法的方法；例如，类似`DECLARE_ENUM(...) {E_CONST(...), E_CONST(...)};`. 我已经看到一些网站提到了双重包含头文件以实现这一点的想法，例如：

```
#include "my_enum.hpp"
#undef ENUM_HPP // undefine the include guard
#undef E_CONST
#define E_CONST(...) /* something here */
#include "my_enum.hpp" 
```

...但我不确定这种技术在这里会有多大用处。特别是，头文件中定义的不仅仅是枚举；查找表结构也在那里，还有一些其他相关的枚举和支持函数。

我已经在使用宏来定义查找表中的元素（它使用 C99 初始化程序，因此即使我重新排列枚举常量的顺序，条目也始终位于正确的位置）。

可以应用于多个枚举的解决方案也很好。

我为此使用了clang（Apple-3.1），并不特别担心可移植性。

我在某个地方尝试过，但我扔掉了……我不记得为什么它不起作用。也许我可以在时间机器中找到它...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T05:24:25.253

使用预处理器技巧，您可以在不同的文件（例如 enum_foo.def）中定义枚举。这将是一个不受保护的文件，得到`#include`d。

```
ENUM_FOO_DEF(ALPHA, 9, 2)
ENUM_FOO_DEF(BETA, 10, 3)
ENUM_FOO_DEF(GAMMA, 12, 7)
ENUM_FOO_DEF(DELTA, 13, 11)
//... 
```

然后在您的源文件中，您将执行以下操作：

```
enum FooEnum {
    #define ENUM_FOO_DEF(X,Y,Z) FOO_E_ ## X,
    #include "enum_foo.def"
    #undef ENUM_FOO_DEF
    FOO_E_MAX
}; 
```

你可以做一些类似的事情来填充你的`enum`属性表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T05:58:25.890

查看我的字符串枚举要点[https://gist.github.com/3058317](https://gist.github.com/3058317)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T05:06:18.820

也许您应该编写自己的代码生成器，它获取一些带有名称和关联值的数据文件，并生成头文件和数据表，可能作为独立`C`模块。

这个程序编写起来很简单，但对您的使用来说非常强大。

# ruby - NewRelic：该方法的哪些部分花费的时间最长？

> ID：11356048
> 
> 赞同：1
> 
> 时间：2012-07-06T04:55:22.630
> 
> 标签：ruby, ruby-on-rails-3, newrelic

我目前在 REST 接口上使用 Neo4j，并且很想使用 NewRelic 来分析哪些调用耗时最长。在请求/响应周期（或操作/视图）中，我可能需要多次调用数据库。

我第一次尝试使用 NewRelic，但它只能显示我正在进行的许多 HTTP 调用以及它们需要多长时间，但不能显示哪个调用与方法的哪个部分相关。

我希望我已经稍微清楚地表达了我的问题，我只是希望能够弄清楚哪些电话花费的时间最长。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T06:11:54.180

您可以使用[New Relic 的自定义工具](https://newrelic.com/docs/ruby/ruby-custom-metric-collection)为各种 HTTP 调用指定不同的名称（请参阅“跟踪代码块”部分）。您可以通过调用`trace_execution_scoped`Ruby 代理 API 中提供的方法来包装 Ruby 块。

您给不同调用的名称将显示在事务跟踪中，并显示在每个 Web 事务花费时间总计的细分中。

# javadoc - 如何最好地创建多语言 javadoc？

> ID：11356056
> 
> 赞同：2
> 
> 时间：2012-07-06T04:56:16.420
> 
> 标签：javadoc, multilingual

我参与了一个项目，有人正在投入大量的好东西，但它带有英语和日语的 javadoc。例如，他在方法注释中这样做：

```
 /**
     * Return really great stuff.
     *
     * <span class="en">By the way, here are some details.</span>
     * <span class="ja">Here are the details in katakana...</span>
     */ 
```

在生成的 javadoc 的标题中放入了一段 js，它运行良好。它会感知您浏览器的语言并只向您显示正确的评论。

那么，如何在生成 javadoc 时摆脱这些该死的消息：

```
 OurUtils.java:139: warning - Parameter "delivery" is documented more than once. 
```

有没有一种方法可以让我们这样做更符合犹太教规？还有其他可行的方法吗？

谢谢 - 射线

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T05:24:27.700

只是不要提到`@parameter delivery`两次：

```
/**
 * @param delivery
 * <span class="en">By the way, here are some details.</span>
 * <span class="ja">Here are the details in katakana...</span>
 */ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-14T20:33:07.203

以前的答案不起作用，但回答者不知道。问题是我们大多数人都使用 eclipse，而人们喜欢使用鼠标悬停在方法、字段或类上看到的 javadoc。如果一个人做了上面的技巧，当一个人在网页中显示它时，一个人可以让 javadoc 显示正确的东西。但是当一个人在另一个应用程序中显示页面的片段时，没有办法应用 CSS 来获得所需的结果。

我想我要做的是创建一个预处理源的 doclet。它将挑选出没有语言标签或正确语言标签的元素，并创建一个特定于该语言的源副本。然后javadoc生成就可以正常进行了。

要么，要么这个 doclet 将生成 javadoc 本身而不产生中间源。我们会看到。

# ruby-on-rails - 向heroku添加反向代理

> ID：11356058
> 
> 赞同：10
> 
> 时间：2012-07-06T04:56:21.570
> 
> 标签：ruby-on-rails, heroku, reverse-proxy

我有一个在heroku 上运行的rails 应用程序，例如myapp.herokuapp.com。

现在我想从 to 反向代理`myapp.heroku.com/proxy/`（`somewhereelse.com/`即：`myapp.heroku.com/proxy/stuff`被反向代理到`somewhereelse.com/stuff`）这在 Heroku 上可能吗？如何做到这一点？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2015-01-05T22:00:15.083

对于通过搜索提出此问题的任何人，都可以这样做。

查看[https://github.com/ryandotsmith/nginx-buildpack](https://github.com/ryandotsmith/nginx-buildpack)将 nginx 供应商到您的 heroku 实例中。这会将 nginx 放置在您的 rails 应用程序前面，并允许您在此域上反向代理请求，将您的 heroku 应用程序配置为 apex 并允许somewhereelse.com/stuff 转到其他地方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T05:45:49.887

您无权访问前端路由基础设施，因此无法添加诸如基于 nginx 位置的反向代理或 apache 的 modproxy 之类的东西。根据我的理解，您也只能绑定到测功机中的一个端口（$PORT），因此不可能使用您自己的供应商版本的 nginx 来隐藏您的 Rails 应用程序（除非可以通过非 TCP/IP 套接字进行通信nginx 和你的 rack/rails 应用程序，如果是这种情况，那么也许你可以让 rack 监听 /tmp/mysocket.git 和 nginx 在这个上反向代理，但这可能是一个没有开始的，我只是抛出想法） .

这意味着如果您必须在您的 rails 应用程序中自己处理这个问题，这是唯一可能的选择，我只有一点点 rails/ruby 经验，但是如果 rails 中不存在代理功能，那么您也许可以明确接受该路线然后使用 http 客户端调用其他部分。

# android - android中的页面卷曲效果

> ID：11356061
> 
> 赞同：1
> 
> 时间：2012-07-06T04:57:04.997
> 
> 标签：android, page-curl

如何在android中对具有动态数据的视图实现页面卷曲效果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T05:03:10.857

使用这个项目。这将有助于在您的项目中实现页面卷曲效果：

[没有 OpenGL ES 的 Android 页面卷曲](http://code.google.com/p/android-page-curl/)

android 翻页器是一个模拟页面卷曲效果的 2D 视图。在没有OpenGL的情况下，只使用了android canvas，这样就可以在任何版本的Android中使用了！

[使用 OpenGL ES 在 Android 上的卷曲/翻转效果](https://github.com/harism/android_page_curl/)

在 Android + OpenGL ES 1 上实现“页面卷曲”效果的项目。

# php - echo 语句中的 PHP 代码

> ID：11356065
> 
> 赞同：1
> 
> 时间：2012-07-06T04:57:38.633
> 
> 标签：php, session, echo

我有一个页面，登录用户可以在其中看到不同链接的列表，但前提是链接与 MySQL 数据库中的条目匹配，如下所示：

```
<li>
                <?php
                        require ("scripts/connect.php");
                        $query = mysql_query("SELECT * FROM files WHERE subject='consulting' AND active='1'");
                        $numrows = mysql_num_rows($query);
                        if ($numrows > 0) 
                            echo "      
                            <a class='atags' href=\"javascript:showonlyone('consulting', this)\">Consulting</a>";
                        if ($numrows == 0)
                            echo "";
                ?>
                </li>
                <li>
                <?php
                        require ("scripts/connect.php");
                        $query = mysql_query("SELECT * FROM files WHERE subject='Projects' AND active='1'");
                        $numrows = mysql_num_rows($query);
                        if ($numrows > 0) 
                            echo "<li><a class='atags' href=\"javascript:showonlyone('projects', this)\">Projects</a></li>";
                        if ($numrows == 0)
                            echo "";
                ?>
                </li> 
```

ETC...

但是，我刚刚意识到，如果 $username 在我的 session_start(); 在主持人字段中有 1 我想展示一些不同的东西。我怎样才能做到这一点？从理论上讲，我正在寻找的是这样的：

```
if ($username && $moderator == 1) {
   echo "You can edit this.";
}
else
    echo "<li>
                <?php
                        require ("scripts/connect.php");
                        $query = mysql_query("SELECT * FROM files WHERE subject='art' AND active='1'");
                        $numrows = mysql_num_rows($query);
                        if ($numrows > 0) 
                            echo "      
                            <a class='atags' href=\"javascript:showonlyone('art', this)\">Art</a>";
                        if ($numrows == 0)
                            echo "";
                ?>
                </li>
                <li>
                <?php
                        require ("scripts/connect.php");
                        $query = mysql_query("SELECT * FROM files WHERE subject='computer' AND active='1'");
                        $numrows = mysql_num_rows($query);
                        if ($numrows > 0) 
                            echo "<li><a class='atags' href=\"javascript:showonlyone('computer', this)\">Computer</a></li>";
                        if ($numrows == 0)
                            echo "";
                ?>
                </li>
                <li>
                <?php
                        require ("scripts/connect.php");
                        $query = mysql_query("SELECT * FROM files WHERE subject='critical reading' AND active='1'");
                        $numrows = mysql_num_rows($query);
                        if ($numrows > 0) 
                            echo "<li><a class='atags' href=\"javascript:showonlyone('criticalreading', this)\">Critical Reading</a></li>";
                        if ($numrows == 0)
                            echo "";
                ?>
                </li>
                <li>
                <?php
                        require ("scripts/connect.php");
                        $query = mysql_query("SELECT * FROM files WHERE subject='french' AND active='1'");
                        $numrows = mysql_num_rows($query);
                        if ($numrows > 0) 
                            echo "<li><a class='atags' href=\"javascript:showonlyone('french', this)\">French</a></li>";
                        if ($numrows == 0)
                            echo "";
                ?>
                </li>"; 
```

这可能吗？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T05:02:35.593

您可以在 PHP 和 HTML 代码之间自由切换。有时，对控制流语句使用替代的冒号和结尾语法而不是大括号会有所帮助。

```
<?php if ($username && $moderator == 1): ?>
    You can edit this.
<?php else: ?>
    <li>
        ...
        <?php
            ...
            if ($numrows > 0):
        ?>
        <a class='atags' href="javascript:showonlyone('art', this)">Art</a>
        <?php
            endif;
        ?>
<?php endif ?> 
```

这比使用要容易得多，`echo`因为您不必转义引号，并且 HTML 读取更自然。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T05:01:48.427

与其在 echo 语句中包含 php 标记，不如在实际打印之前处理数据库工作（设置您将要输出的所有变量）。

这样，您可以按照以下模式包含您需要的任何信息：

`// database stuff here`

`echo '...'`

`if ($moderator == 1) echo '...'`

`echo '...'`

一个更好的选择是在 MVC 模式中处理所有这些。您可以在这里找到更多信息：[http ://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller](http://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller)

# java - 在休眠中加载两个不同的对象

> ID：11356073
> 
> 赞同：1
> 
> 时间：2012-07-06T04:58:49.073
> 
> 标签：java, mysql, hibernate

我面临一个奇怪的问题，无法找到解决方案。我正在尝试使用来自 MySQl db 的 Hibernate 在 Java 中加载一组对象。

这些是我的休眠映射和代码的简化版本：

```
<class name="org.Foo.Class1" table="class_profile" >
    <cache usage="read-write"/>
            <id name="id" column="id">
                <generator class="native"/>
            </id>
       <property name="amount" column="amount"/>
</class>
<class name="org.Foo.Class2" table="class_profile" >
    <cache usage="read-write"/>
            <id name="id" column="id">
                <generator class="native"/>
            </id>
       <property name="amount" column="amount"/>
</class> 
```

这是我要访问的代码，对象：

```
public List<Class1> loadProfiles(final List<Integer> pIds)
{
  return (List<Class1>)getHibernateTemplate().executeFind(new HibernateCallback() {
     public Object doInHibernate(Session session) throws HibernateException {
    return session.createQuery("from Class1 il where il.id in (:idList)")
        .setParameterList("idList", pIds)
        .list();
    }
  });
} 
```

现在，当我运行我的代码时

```
List<Class1> profiles = fooService.loadProfiles(Arrays.asList(3,4)); 
```

我在列表配置文件中获得了**四个对象** *（而不是 2 个）* -两个 Class1 对象和***两个 Class2 对象***。两个 Class2 对象来自哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T05:45:44.367

当你在两个实体之间有继承时，Hibernate 需要能够判断一个特定的数据库行应该代表哪个类。为此，您可以向表中添加一个鉴别器类，告诉它要构建哪个类来表示该行。

Class2 需要使用嵌套在 Class1 内的元素来声明，该`<subclass/>`元素指定使用哪一列的什么值来区分它们。

[此处的详细信息： http](http://docs.jboss.org/hibernate/orm/3.5/reference/en/html/inheritance.html#inheritance-tableperclass) ://docs.jboss.org/hibernate/orm/3.5/reference/en/html/inheritance.html#inheritance-tableperclass

# linux - 如何在写入之前向 ext4 指示文件的大小？

> ID：11356076
> 
> 赞同：2
> 
> 时间：2012-07-06T04:59:30.373
> 
> 标签：linux, filesystems, ext4

我很好奇是否有办法做到这一点？我对 ext4 的理解有限，但我相信它有能力分配连续的磁盘空间范围

我正在从 RAM 中写一个文件，并且在 open() 之前知道它的大小。有没有办法可以向文件系统表明这一点？有性能优势吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T06:15:22.110

看来您正在寻找[posix_fallocate](http://pubs.opengroup.org/onlinepubs/9699919799/functions/posix_fallocate.html)。

使用它允许文件系统预先分配块，这可以减少文件的碎片。特别是，这对于随机写入文件块的应用程序（想想 bittorrent 客户端）很重要。对于顺序写入文件的应用程序，这可能不值得。

# c# - MSDTC - 与底层事务管理器的通信失败

> ID：11356077
> 
> 赞同：27
> 
> 时间：2012-07-06T04:59:31.647
> 
> 标签：c#, msdtc

我收到错误：

> 与底层事务管理器的通信失败

当我尝试从 Visual Studio 2010 运行我的应用程序时。我在谷歌上搜索了这个问题，我已经尝试了所有可能的解决方案来解决这个错误。

在这里，我对我的 DTC 属性进行了更改。

```
-- Network DTC Access
-- Allow Inbound
-- Allow Outbound
-- Allow Remote Administrator
-- Allow Remote Clients
-- No Authentication Required
-- Enable XA Transaction
-- Enable SNA LU 6.2 Transaction 
```

请让我知道，如果有人知道这个问题的解决方案。

谢谢 Manoj Sitapara

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2014-02-12T21:16:42.280

尝试允许 DTC 通过防火墙进行通信。

![在此处输入图像描述](../Images/9bd3e3a2931b0ca06f6ff997a8b51a85.png)

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-07-06T05:20:50.527

[`DTCPing`](http://www.microsoft.com/en-us/download/details.aspx?id=2868)在分布式事务涉及的所有计算机上下载并运行它。

大多数情况下，它会为您提供确切的错误和问题所在（如相同的 CID）等。

可能的原因：

1.  通过 NetBIOS 名称无法访问计算机。在这种情况下，您必须调整他们的`hosts`文件以添加映射 IP/主机名，或者，如果在域中，则为他们添加 DNS 别名。
2.  服务器是虚拟机，它们是从同一个虚拟机实例克隆的。在这种情况下，MSDTC CID 是相同的，您需要安装/重新安装 MSDTC（DTCping 会告诉您这一点）。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-05-29T18:32:46.547

查看[MSDTC 故障排除指南](http://msdn.microsoft.com/en-us/library/aa561924.aspx)，其中将重复的 CID 列为潜在问题。您可以使用以下 Powershell 脚本检测重复的 CID 并在需要时使用 WinRM 重新安装 MSDTC：

```
write-host "Checking for duplicate CIDs and reinstalling MSDTC if needed."
$servers = "server1","server2","server3"
$CIDs = Invoke-Command -ComputerName $servers -ScriptBlock { gci Microsoft.PowerShell.Core\Registry::HKEY_CLASSES_ROOT\CID | foreach { $_.Name } | Out-String -Stream } #Array of all CIDs on all servers
$UniqueCIDs = $CIDs | select -Unique
if($CIDs.Length -eq $UniqueCIDs.Length){
    Write-Output "All CIDs are unique, so we don't need to reinstall MSDTC"
} else {
    Write-Output "Found duplicate CIDs, so we need to reinstall MSDTC on all VMs"
    Invoke-Command -ComputerName $servers -ScriptBlock {
        write-output "`r`nUninstalling MSDTC to regenerate CIDs on $env:computername" 
        msdtc -uninstall | Write-Output
        sleep 25 #wait for previous command to finish
        write-output "`r`nReinstalling MSDTC to regenerate CIDs on $env:computername" 
        msdtc -install  | Write-Output
        sleep 25 #wait for previous command to finish
        write-output "`r`nSetting MSDTC service to automatic on $env:computername" 
        Set-Service msdtc -startuptype "auto"
        write-output "`r`nWARNING: $env:computername may need to be restarted for changes to take effect." 
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-01-15T16:48:01.053

**尝试在群集上**设置 DTC 和 MSMQ 时出现通信失败错误。在我的情况下，潜在的错误是“内存不足”。我能够将事务消息从集群发送到另一台服务器，但不能从该服务器发送回集群。我的服务会抛出这个异常：

```
System.Transactions.TransactionAbortedException: The transaction has aborted. 
---> System.Transactions.TransactionManagerCommunicationException: Communication 
with the underlying transaction manager has failed. ---> 
System.Runtime.InteropServices.COMException: Ran out of memory (Exception from HRESULT: 0x80000002) 
```

这篇文章有一个非常模糊的解决方案：http: [//www.nervousadmin.com/category/microsoft/windows/dtc/](http://www.nervousadmin.com/category/microsoft/windows/dtc/)

总结一下：

HKLM\Cluster\ResourceTypes\Distributed Transaction Coordinator 下的注册表项 ClusterDefaultResource 的 guid 需要与 DTC 服务的可执行文件路径上的 guid 参数对齐。

此问题的另一个症状是，如果您尝试通过组件服务管理控制台访问 DTC 属性，则会收到内存不足错误。查看 Component Services/Computers/My Computer/Distributed Transaction Coordinator 下的控制台树，然后右键单击其中列出的每个 DTC。如果您的指南未对齐，这将引发错误。

*   打开 services.msc。找到分布式事务协调器（如果有两个，您正在寻找名称中带有 guid 的那个）
*   打开该 DTC 的属性。从“可执行文件路径”复制 guid
*   打开注册表。查找 HKLM\Cluster\ResourceTypes\Distributed Transaction Coordinator
*   将 ClusterDefaultResource 值与您复制的 guid 进行比较。如果它们不同，下一步应该解决问题。如果没有，这不是你的答案。
*   备份当前值。编辑 ClusterDefaultResource 属性：粘贴您从 services.msc DTC 属性复制的 guid。您需要在集群中的每个节点上执行此操作。
*   幸运的是，这解决了你的问题。

# java - 如何在 Java 中打开 .rd 文件扩展名

> ID：11356081
> 
> 赞同：-1
> 
> 时间：2012-07-06T05:00:44.217
> 
> 标签：java, file, rd

任何人都可以帮助我弄清楚如何从 java 中的 .rd 扩展文件中检索数据。我想将 .rd 扩展文件中的数据复制到 word 文档文件中。我是java新手，因此无法解决问题。

提前感谢赛

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T05:14:20.063

请参阅这些文件：

1.  Rd 文件指南：http: [//developer.r-project.org/Rds.html](http://developer.r-project.org/Rds.html)
2.  解析 Rd 文件：http: [//developer.r-project.org/parseRd.pdf](http://developer.r-project.org/parseRd.pdf)

一旦您能够通过以前的方法读取文件，您就可以使用[Apache POI](http://poi.apache.org/hwpf/index.html)将其转换为 word 文档。

希望这可以帮助！

# prototypejs - 如何从输入框值管理 Scriptaculous 滑块句柄

> ID：11356082
> 
> 赞同：1
> 
> 时间：2012-07-06T05:00:48.350
> 
> 标签：prototypejs, slider, scriptaculous

我正在使用 Scriptaculous 创建一个带有两个手柄的价格范围滑块。如何从输入框值管理滑块句柄。即，滑块句柄根据输入框值移动。

尝试如下

[http://jsfiddle.net/paHjV/1/](http://jsfiddle.net/paHjV/1/)

请提供任何帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T05:55:19.560

我想你想要的是：

```
var priceRange;

var validValues = [0, 50000, 100000, 150000, 200000, 250000, 300000, 350000, 400000, 450000, 500000, 550000, 600000, 650000, 700000, 750000, 800000, 850000, 900000, 1000000, 1050000, 1100000, 1150000, 1200000, 1250000, 1300000, 1350000, 1400000, 1450000, 1500000, 1550000, 1600000, 1650000, 1700000, 1750000, 1800000, 1850000, 1900000, 1950000, 2000000, 2050000, 2100000, 2150000, 2200000, 2250000, 2300000, 2350000, 2400000, 2450000, 2500000, 2550000, 2600000, 2650000, 2700000, 2750000, 2800000, 2850000, 2900000, 2950000, 3000000, 3050000, 3100000, 3150000, 3200000, 3250000, 3300000, 3350000, 3400000, 3450000, 3500000, 3550000, 3600000, 3650000, 3700000, 3750000, 3800000, 3850000, 3900000, 3950000, 4000000, 4050000, 4100000, 4150000, , 4200000, 4250000, 4300000, 4350000, 4400000, 4450000, , 4500000, 4550000, 4600000, 4650000, 4700000, 4750000, 4800000, 4850000, 4900000, 4950000, 5000000];

var loadPriceSlider = function () {

        var handles = [$('price-min'), $('price-max')];

        // horizontal slider control with preset values
        priceRange = new Control.Slider(handles, 'price-range', {
            range: $R(0, 5000000, false),
            sliderValue: [50000, 5000000],
            values: validValues,
            restricted: true,
            onSlide: function (v) {
                $('priceMin').value = ((v[0] != null) ? v[0] : 0);
                $('priceMax').value = ((v[1] != null) ? v[1] : 0);
            },
            onChange: function (v) {
                if (v.length > 0) {
                    $('priceMin').value = ((v[0] != null) ? v[0] : 0);
                    $('priceMax').value = ((v[1] != null) ? v[1] : 0);
                }
            }
        });
    };
loadPriceSlider();

$('priceMin').observe('change', function(){
    this.value = parseInt(this.value, 10);
    priceRange.setValue(this.value, 0);
});
$('priceMax').observe('change', function(){
    this.value = parseInt(this.value, 10);
    priceRange.setValue(this.value, 1);
}); 
```

# android - ViewPager + SurfaceView = 导航回活动时的长时间延迟

> ID：11356085
> 
> 赞同：5
> 
> 时间：2012-07-06T05:01:16.710
> 
> 标签：android, android-viewpager, android-view

基本上就是标题所说的，

我的应用程序主要由一个[`ViewPager`](http://developer.android.com/reference/android/support/v4/view/ViewPager.html)使用[`FragmentStatePagerAdapter`](http://developer.android.com/reference/android/support/v4/app/FragmentStatePagerAdapter.html)

[`SurfaceViews`](http://developer.android.com/reference/android/view/SurfaceView.html)当我向 FragmentStatePagerAdapter添加一系列时会出现问题。仅出于测试目的，我没有以任何方式对 SurfaceViews 进行子类化。当我浏览几页，点击“主页”，然后返回活动时，整个设备会冻结一两秒钟，然后再渲染任何内容。我可以在从后台退出后恢复应用程序的时间内多次启动和完成（）应用程序。我知道应用程序正在运行，因为在第一个屏幕绘制最终发生时，几个 AsyncTask 几乎完成了。我知道这些 AsyncTask 不会导致问题，因为我已将它们删除，但没有任何效果。

当我将 SurfaceViews 更改为[`Views`](http://developer.android.com/reference/android/view/View.html)问题完全消失。

当我使用我的实际 SurfaceViews（对于我的项目是不可协商的）时，也会出现这个问题。在多个设备上也会出现此问题。

在这一点上，我认为问题完全出在 ViewPager 上，但我不知道该怎么办，因为我需要那个界面组件。

任何帮助将不胜感激！

编辑：

澄清一下，SurfaceViews/Views 代表被添加到 FragmentStatePagerAdapter 的 Fragment 的 View。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-06T09:26:33.827

为任何未来的谷歌员工找到了解决方案！

下面是我是如何做到的：

在我的片段中，我在 onCreate() 中实例化了 mySurfaceView

然后我在 onCreateView() 期间将虚拟布局（LinearLayout）附加到实际视图

然后在 onResume() 我用 removeAllViews() 清除了虚拟布局，然后调用 addView(mySurfaceView)

这似乎允许 ViewPager 快速构建其布局，然后在用户实际需要查看任何内容之前弹出 SurfaceView！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-11T15:45:30.130

我找到的更好的解决方案是

*   覆盖`getItem()`_`FragmentPageAdapter`
*   返回时使用`Fragment`创建 2 秒的时间延迟`Handler`

就是这样，每次您的 Fragment 页面适配器尝试返回`SurfaceView`时，它都会等待 2 秒或其他任何时间。届时将启动 Surface View。**下面显示**

```
fragmentAdapter extends FragmentPageAdapter 
```

...

```
@Override
getItem(int position) 
```

...

```
if (position == 0)

>     final Handler handler = new Handler();
>     handler.postDelayed(new Runnable() {
>         @Override
>         public void run() {
>             // initiate SurfaceView
>             // return fragment after 5s
>         }
>     }, 5000); 
```

# javascript - onmouseover jquery .animate()

> ID：11356087
> 
> 赞同：0
> 
> 时间：2012-07-06T05:01:31.043
> 
> 标签：javascript, jquery-animate

我正在尝试实现 onmouseover jquery .animate() 效果。基本上，我有一个导航 div，旁边是一个隐藏的（不透明度：0）div。我正在尝试使用 jquery 方法 .animate() 使隐藏的 div （子菜单）在其中一个选项悬停时出现。

代码行在这里：

```
<li class="b1" onmouseover="function(){$(".subnav1").animate({opacity:1,left:'270px'}, 250, function(){});"> 
```

完整代码在这里（包括css）

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>BEAN - main</title>
<link rel="stylesheet" type="text/css" href="css/share.css" />
<script type="text/javascript" src="js/jquery.1.7.2.js"></script>   
<style>
body {
    min-width:960px;
}
.container{
    position:absolute;
    left:50%;
    width:960px;
    margin-left:-480px;
}
.topbar{
    width:960px;
    height:10px;
    background-color:#000;
    margin-top:-10px;
    margin-bottom:5px;
}
.logo{
    position:absolute;
    margin-top:15px;
    width:140px;
    height:140px;
    float:left;
    margin-left:10px;
}
.mainnav{
    position:absolute;
    margin-top:15px;
    font-family: 'Share', cursive;
    left:160px;
    width:110px;
    height:140px;
    font-size:16px;
    float:left;
}
.subnav1{
    position:absolute;
    margin-top:15px;
    font-family: 'Share', cursive;
    left:290px;
    width:110px;
    height:140px;
    font-size:16px;
    float:left;
    opacity:0;
}
.subnav2{
    position:absolute;
    margin-top:15px;
    font-family: 'Share', cursive;
    left:290px;
    width:110px;
    height:140px;
    font-size:16px;
    float:left;
    opacity:0;
}
.subnav3{
    position:absolute;
    margin-top:15px;
    font-family: 'Share', cursive;
    left:290px;
    width:110px;
    height:140px;
    font-size:16px;
    float:left;
    opacity:0;
}
.language{
    position:absolute;
    margin-top:15px;
    left:740px;
    width:220px;
    margin-right:10px;
    height:140px;
    float:left;
}
ul{
    margin:0px;
    padding:0px;
    list-style:none;
}
li{
    display:list-item;
    text-align:left;
}
A:link {
    text-decoration: none;
    color: black;
}
A:visited {
    text-decoration: none;
    color: black;
}
A:active {
    text-decoration: none;
    color: black;
}
A:hover {
    text-decoration: none;
    color: red;
}
</style>
</head>

<body>
<div class="container">
    <div class="topbar"></div>
    <div class="logo"><img src="images/logo.png" width="140px" height="140px" /></div>
    <div class="mainnav">
        <ul>
            <li class="b1" onmouseover="function(){$(".subnav1").animate({opacity:1,left:'270px'}, 250, function(){});">
                <a href="#">about me</a>
            </li>
            <li class="b2">
                <a href="#">photography</a>
            </li>
            <li class="b3">
                <a href="#">urban planning</a>
            </li>
            <li class="b4">
                <a href="#">graphic design</a>
            </li>
            <li class="b5">
                <a href="#">my blog</a>
            </li>
        </ul>
    </div>
    <div class="subnav1">
        <ul id="sub1">
            <li>
                <a href="#">Facts</a>
            </li>
            <li>
                <a href="#">Values</a>
            </li>
        </ul>
    </div>
    <div class="subnav2">
        <ul id="sub2">
            <li>
                <a href="#">Photostream</a>
            </li>
            <li>
                <a href="#">The Map</a>
            </li>
        </ul>
    </div>
    <div class="subnav3">
        <ul id="sub3">
            <li>
                <a href="#">Essay Collection</a>
            </li>
            <li>
                <a href="#">The City Project</a>
            </li>
        </ul>
    </div>
    <div class="language">
    blah
    </div>
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T05:18:17.617

这是一个快速的解决方案。[演示在这里](http://jsfiddle.net/6ds8k/)

为了获得最佳实践，请像这样使用 html 标记。

```
<div class="mainnav">
        <ul>
            <li class="b1">
                <a href="#">about me</a>
                 <ul id="sub1">
            <li>
                <a href="#">Facts</a>
            </li>
            <li>
                <a href="#">Values</a>
            </li>
        </ul>
            </li>
            <li class="b2">
                <a href="#">photography</a>
                <ul id="sub2">
            <li>
                <a href="#">Photostream</a>
            </li>
            <li>
                <a href="#">The Map</a>
            </li>
        </ul>
            </li>
            <li class="b3">
                <a href="#">urban planning</a>
            </li>
            <li class="b4">
                <a href="#">graphic design</a>
            </li>
            <li class="b5">
                <a href="#">my blog</a>
            </li>
        </ul>
    </div> 
```

​此代码用于显示隐藏子菜单

```
$(".mainnav li").hover(function() {
    $(this).children('ul').fadeIn();
}).mouseleave(function() {
    $(this).children('ul').fadeOut();
});​ 
```

# excel - 编写一个宏以在每 26 行粘贴一个范围

> ID：11356090
> 
> 赞同：0
> 
> 时间：2012-07-06T05:01:43.793
> 
> 标签：excel, vba

我正在复制一个数组 (Sheet1!A2:A831) 并想将其粘贴到 Sheet2 上！从 A1 开始，每 26 行。

我正在使用这个宏，但我遇到了一些麻烦：

```
Sub test()
Dim LR As Long, i As Long
LR = Range("A" & Rows.Count).End(xlUp).Row
Range("Sheet1!A2:A831").Copy
For i = 26 To LR Step 26
    Range("A" & i).PasteSpecial Paste:=xlPasteFormulas
Next i
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T08:39:40.407

这是你正在尝试的吗？

```
Sub test()
    Dim LR As Long, i As Long, n As Long

    With Sheets("Sheet1")
        LR = .Range("A" & .Rows.Count).End(xlUp).Row

        n = 1

        For i = 2 To LR 'A2:A831
            .Range("A" & i).Copy
            Sheets("Sheet2").Range("A" & n).PasteSpecial _
            Paste:=xlPasteFormulas

            n = n + 25
        Next i
    End With
End Sub 
```

# android - 如何从日志列表中列出所有通话日志，包括短信和电子邮件日志？

> ID：11356093
> 
> 赞同：1
> 
> 时间：2012-07-06T05:01:50.270
> 
> 标签：android

我也想访问短信日志。但我没有找到任何方法，我已经使用 CallLog.Calls 访问了通话记录，它无法列出短信记录。下面的代码仅列出通话日志，但并非所有日志甚至短信日志都没有列出（短信日志表示由于接收和发送短信而创建的日志）。请帮我找到找回短信日志的方法。如果可能的话，请先生。

```
Cursor cursor = managedQuery(CallLog.Calls.CONTENT_URI, null, null,
            null, Calls.DATE + " DESC");
    // cursor is inited
    cursor.moveToFirst();

    String name;
    String number;
    int type;
    do {

        name = "";
        number = "";
        type = -1;
        try {
            number = cursor.getString(cursor
                    .getColumnIndex(CallLog.Calls.NUMBER));
            type = cursor.getInt(cursor.getColumnIndex(CallLog.Calls.TYPE));
            try {
                name = cursor.getString(cursor
                        .getColumnIndex(CallLog.Calls.CACHED_NAME));

            } catch (Exception e) {
            } finally {
                if (name == null || name.equals("")) {
                    name = "UNKNOWN";
                }
            }
            Log.e("My App", name + " : "+number + " : "+type);
        } catch (Exception e) {
            Log.e("My App", "Error in creation");
        }
    } while (cursor.moveToNext()); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T05:38:17.243

这只是建议。你得到更好的答案，而不是这个......

看看你是否想要获取短信日志然后使用下面的代码..你已经得到了通话记录..所以如果你想在一个列表中混合通话和短信登录，那么你必须按日期这样做..

在通话记录中，您会在短信中获得日期和时间，您还会获得日期和时间

短信记录代码...

把它放在方法中并使用你自己的方式..

```
CharSequence contentTitle = getString(R.string.app_name);
            final ProgressDialog progDailog = ProgressDialog.show(
                    All_logs_tab.this, contentTitle, "Please wait...", true);
            final Handler handler = new Handler() {
                @Override
                public void handleMessage(Message msg) {
                      /* finish sms load */
                }
            };

            new Thread() {
                public void run() {
                    try {

                        Uri myMessage = Uri.parse("content://sms/");
                        ContentResolver cr = con.getContentResolver();
                        Cursor c = cr.query(myMessage, new String[] { "_id",
                                "address", "date", "body", "read" }, null,
                                null, null);

                        startManagingCursor(c);
                        getSmsLogs(c, con);

                    } catch (Exception e) {
                    }
                    handler.sendEmptyMessage(0);
                    progDailog.dismiss();
                }
            }.start(); 
```

................................................. 一世在数组列表中添加了所有短信详细信息

```
 ArrayList<String> sms_id = new ArrayList<String>();
     ArrayList<String> sms_num = new ArrayList<String>();
     ArrayList<String> sms_Name = new ArrayList<String>();
     ArrayList<String> sms_dt = new ArrayList<String>();
     ArrayList<String> sms_body = new ArrayList<String>(); 
```

..................................................... ……

```
public void getSmsLogs(Cursor c, Context con) {

        if (sms_num.size() > 0) {
            sms_id.clear();
            sms_num.clear();
            sms_Name.clear();
            sms_body.clear();
            sms_dt.clear();
        }

        try {

            if (c.moveToFirst()) {
                do {

                    if (c.getString(c.getColumnIndexOrThrow("address")) == null) {
                        c.moveToNext();
                        continue;
                    }

                    String _id = c.getString(c.getColumnIndexOrThrow("_id"))
                            .toString();

                    String Number = c.getString(
                            c.getColumnIndexOrThrow("address")).toString();
                    String dat = c.getString(c.getColumnIndexOrThrow("date"))
                            .toString();

                    String as = (String) get_dt(dat, "dd/MM/yyyy, hh.mma");
                    String Body = c.getString(c.getColumnIndexOrThrow("body"))
                            .toString();
                    String name = getContactDisplayNameByNumber("" + Number,
                            con);

                    if (name.length() <= 0 || name.length() == 1) {
                        name = "no name";
                    }
                    sms_id.add(_id);
                    sms_num.add(Number);
                    sms_Name.add("" + name);
                    sms_body.add(Body);
                    sms_dt.add(as);

                } while (c.moveToNext());
            }
            c.close();
        } catch (Exception e) {
            e.printStackTrace();
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T05:04:09.397

您需要 SMS 消息表的 URI，这将检索您的数据。但是，它可以在基本源代码中找到；Google 不建议这样做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T05:27:57.330

使用此链接[Android 通话记录](http://www.dcpagesapps.com/developer-resources/android/25-android-tutorial-call-logs)检索通话记录。对于 sms，使用**SMS_URI** ="content://sms" 执行相同的操作，但不建议这样做，因为它不是公共 URi。

# ruby - 当一个对象的构造函数构建另一个对象时存根

> ID：11356096
> 
> 赞同：6
> 
> 时间：2012-07-06T05:01:51.173
> 
> 标签：ruby, constructor, rspec, stubbing, rr

所以我有一些代码，大大简化，看起来像这样：

```
class B
  def initialize opts
    @opts = opts
  end
end

class A
  def initialize opts
    # defaults etc applied to opts
    @b = B.new opts
  end
end 
```

换句话说，当我用选项初始化 A 时，它会创建一个 B 并将一组修改后的选项传递给它。

我想测试 B.new 是否获得了正确的论点。现在，我正在这样做，使用 RSpec/RR：

```
@b = Object.new
# stub methods on @b here
stub(B).new { |options|
  options[:foo].should == 'whatever'
  @b
}
A.new({:foo => 'whatever'}) 
```

但这有两个问题。

首先，我无法`B`使用实际选项实例化实际副本。如果我在块内调用 B.new，它会调用存根版本并循环直到堆栈弹出。我*可以*`@b = B.new`在 stubbing 之前设置，但是我还不知道将要传入的选项，从而破坏了测试的重点。

（在有人叫我之前：是的，在严格的单元测试教条中，对 A 的测试*应该*剔除 B 中的任何方法，并且需要大量剔除意味着你的代码首先是糟糕的。）

其次，将它放在测试的设置中感觉不对`should`，而不是之后放在单独的`it ... do ... end`块中。但是由于我不能创建一个实际的`B`（见上文），我也不能真正询问它的构建后状态。

有任何想法吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2015-03-18T22:18:42.137

`should`来自[Marc-André Lafortune 的答案](https://stackoverflow.com/a/11356236/27358)的语法在 RSpec 3 中似乎已被弃用。但是，以下`expect`语法似乎有效：

```
expect(B).to receive(:new).with(foo: 'whatever') 
```

请注意，如果您想`B.new`返回特定实例（例如测试替身），您可以使用`and_return`：

```
b = instance_double(B)
expect(B).to receive(:new).with(foo: 'whatever').and_return(b) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-06T05:19:23.810

你可以写类似`B.should_receive(:new).with({:foo => 'whatever'})`.

就个人而言，我避免打断/嘲弄，宁愿测试行为；使用给定的一组选项创建一个新的事实`B`是依赖于实现的，我不会直接测试它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-06T05:58:12.390

RR 版本的 Marc-Andre 的回答：

```
before do
  stub(B).new { @b }
end

it 'uses the correct options' do
  B.should have_received.new(hash_including(:foo => 'whatever'))
end 
```

# javascript - setTimeout 与事件绑定/解除绑定；什么更有效率？

> ID：11356097
> 
> 赞同：1
> 
> 时间：2012-07-06T05:01:53.470
> 
> 标签：javascript, jquery, dom

我有一种情况，我需要将 jQuery 的`$.fn.one()`函数用于单击事件，但我不希望它应用于事件的下一次发生（就像通常那样），我希望它在之后立即应用于事件，然后解除自身绑定（像`.one()`往常一样）。

我不想`.one()`应用于第一次出现的原因是因为我正在绑定到`document`在冒泡阶段早些时候调用的事件处理程序中，所以第一次到达`document`它将是同一事件的一部分。我想知道下一次点击事件何时发生。

**注意：**我不想使用`.stopPropagation()`，因为它可能会破坏我应用程序的其他部分。

这是我想出的两个选项，尽管似乎必须有一个更优雅的解决方案。

**双重绑定方法：**

```
$(document).one('click', function() {
  $(document).one('click', callback);
}); 
```

**setTimeout 方法：**

```
setTimeout(function() {
  $(document).one('click', callback);
}, 1); 
```

这两种方法都很好，但这是我的问题。我不知道 setTimeout 或频繁事件绑定和解除绑定的性能影响是什么。如果有人知道，我很想听听。但更重要的是，我想要一些关于如何自己衡量这些东西以应对未来这种情况的建议。

我喜欢[http://jsperf.com](http://jsperf.com)之类的网站，但我不知道它是否真的有助于衡量此类内容。

显然，如果有人看到更好的解决方案，我很乐意听到。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T06:00:25.147

我发现双重绑定方法非常优雅——我认为它准确地反映了您的实际意图，并且只需要两行代码。

但是另一种方法不是使用`.one()`您可以使用`.on()`和更新与第一个事件关联的事件对象，添加一个标志以便回调将在第一次调用时忽略它：

```
function oneCallback(e) {
    if (e.originalEvent.firstTimeIn)
        return;

    alert("This is the one after the current event");
    $(document).off("click", oneCallback);
}

$("div.source").click(function(e) {
    e.originalEvent.firstTimeIn = true;
    $(document).on("click", oneCallback);   
}); 
```

演示：http: [//jsfiddle.net/q5LG4/](http://jsfiddle.net/q5LG4/)

编辑：为了解决您对不修改`event`对象（或您不拥有的任何对象）的担忧，您可以在闭包中存储 firstTime 标志。这是一个采用这种方法的相当狡猾的`.oneAfterThis()`插件：

```
jQuery.fn.oneAfterThis = function(eventName, callback) {
    this.each(function() {
        var first = true;
        function cb() {
            if(first){
                first = false;
                return;
            }
            callback.apply(this,[].slice.call(arguments));
            $(this).off(eventName,cb);
        }
        $(this).on(eventName, cb);
    });
};

$(someseletor).oneAfterThis("click", function() { ... }); 
```

我确信这可以做得更优雅（也许我应该费心看看 jQuery 是如何实现的`.one()`），但我只是想快速做出一些东西作为概念证明。

演示：http: [//jsfiddle.net/q5LG4/1/](http://jsfiddle.net/q5LG4/1/)

# c# - 我可以在类库中使用 log4net 吗？

> ID：11356104
> 
> 赞同：6
> 
> 时间：2012-07-06T05:02:49.507
> 
> 标签：c#, log4net

我创建了 ac# 类库，并将其注册为我的服务器中的 com 对象。并使用 VBscript 代码调用 c# 方法。

我可以使用 log4.net 记录有关此场景的信息吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-06T05:04:12.220

是的，你可以在你的类库中使用它，没有问题

检查此答案以获取详细信息：[如何为类库包含 log4net？](https://stackoverflow.com/questions/4612817/how-to-include-log4net-for-a-class-library)

# java - SimpleDateFormat 的不正确结果

> ID：11356109
> 
> 赞同：0
> 
> 时间：2012-07-06T05:03:15.653
> 
> 标签：java, datetime, date, simpledateformat

我想转换`Tue Jun 01 00:00:00 IST 112`成`01-JUN-2012`

我用了

```
 Calendar calendar = new GregorianCalendar(year, 6, Calendar.DAY_OF_MONTH); 
     Date maxDate=new Date();
     maxDate=calendar.getTime();  
     calendar.set(Calendar.DAY_OF_MONTH, calendar.getActualMinimum(Calendar.DAY_OF_MONTH)); 
      SimpleDateFormat s=new SimpleDateFormat("dd-mmm-yyyy");
       s.format(maxDate); 
```

但我明白了`30-000-0112`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-06T05:04:52.017

使用 CAPITAL M 表示月份，

```
 SimpleDateFormat s=new SimpleDateFormat("dd-MMM-yyyy"); 
```

另外，您要先设置日期，然后要重置日历，我猜这不是您想要做的，因此您可能需要将其更改为如下

```
Date maxDate=new Date();
calendar.set(Calendar.DAY_OF_MONTH, calendar.getActualMinimum(Calendar.DAY_OF_MONTH)); 
maxDate=calendar.getTime();  
SimpleDateFormat s=new SimpleDateFormat("dd-MMM-yyyy");
s.format(maxDate); 
```

**看**

*   [`SimpleDateFormat`API文档](http://docs.oracle.com/javase/1.4.2/docs/api/java/text/SimpleDateFormat.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-06T05:17:20.670

在日期格式中使用大写 MMM，如下所示 -

```
 SimpleDateFormat s=new SimpleDateFormat("dd-MMM-yyyy"); 
```

其他一切正常

```
 Calendar calendar = Calendar.getInstance();
     Date maxDate=new Date();
     maxDate=calendar.getTime();  
     calendar.set(Calendar.DAY_OF_MONTH, calendar.getActualMinimum(Calendar.DAY_OF_MONTH)); 
     SimpleDateFormat s=new SimpleDateFormat("dd-MMM-yyyy");
     System.out.println(s.format(maxDate)); 
```

输出将是 -`06-Jul-2012`

# android - 根据语音强度更改背景颜色

> ID：11356115
> 
> 赞同：0
> 
> 时间：2012-07-06T05:03:56.260
> 
> 标签：android

目前我的代码正在检测语音强度（使用媒体记录器）我想在没有语音时将背景颜色更改为白色，当用户说话时，背景颜色必须根据语音强度变亮或变暗

这是我的代码，我在根据语音强度使颜色变亮和变暗时遇到问题。

```
final Runnable updater = new Runnable(){

    public void run(){          
        updateTv();
        TextView tv = (TextView)findViewById(R.id.status);
        int tvStatus=  Integer.parseInt(tv.getText().toString());
        if(tvStatus > 1000)
            updateBackground();
        else
            mScreen.setBackgroundColor(Color.WHITE);
    };
};

final Handler mHandler = new Handler();

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.main);
    mStatusView = (TextView) findViewById(R.id.status);
    mScreen = (LinearLayout) findViewById(R.id.myScreen);

    if (runner ==  null)
    { 
        runner = new Thread(){
            public void run()
            {
                while (runner != null)
                {

                    try
                    { 
                       Thread.sleep(1000);
                        Log.i("Noise", "Tock");
                    } catch (InterruptedException e) { };
                    mHandler.post(updater);
                }
            }
        };
        runner.start();
        Log.d("Noise", "start runner()");
    }
}

private void updateBackground()
{

     int ampl  =(int)getAmplitude();
    int color;
    Random rnd = new Random(); 

 mScreen.setBackgroundColor(

         color );

}
public void onResume()
{
    super.onResume();
    startRecorder();
}

public void onPause()
{
    super.onPause();
    stopRecorder();
}

public void startRecorder(){
    if (mRecorder == null)
    {
        mRecorder = new MediaRecorder();
        mRecorder.setAudioSource(MediaRecorder.AudioSource.MIC);
        mRecorder.setOutputFormat(MediaRecorder.OutputFormat.THREE_GPP);
        mRecorder.setAudioEncoder(MediaRecorder.AudioEncoder.AMR_NB);
        mRecorder.setOutputFile("/dev/null"); 
        try
        {           
            mRecorder.prepare();
        }catch (java.io.IOException ioe) {
           android.util.Log.e("[Monkey]", "IOException: " + android.util.Log.getStackTraceString(ioe));

        }catch (java.lang.SecurityException e) {
            android.util.Log.e("[Monkey]", "SecurityException: " + android.util.Log.getStackTraceString(e));
        }
        try
        {           
            mRecorder.start();
        }catch (java.lang.SecurityException e) {
            android.util.Log.e("[Monkey]", "SecurityException: " + android.util.Log.getStackTraceString(e));
        }

        //mEMA = 0.0;
    }

}
public void stopRecorder() {
    if (mRecorder != null) {
        mRecorder.stop();       
        mRecorder.release();
        mRecorder = null;

    }
}

public void updateTv(){
    mStatusView.setText(Integer.toString((getAmplitude())));
}
public double soundDb(double ampl){
    return  20 * Math.log10(getAmplitudeEMA() / ampl);
}
public int getAmplitude() {
    if (mRecorder != null)
        return  (mRecorder.getMaxAmplitude());
    else
        return 0;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T05:19:34.960

您当前的`updateBackground()`使用实现`color`没有初始化它：

```
private void updateBackground() {
    int ampl = (int) getAmplitude();
    int color;
    Random rnd = new Random(); 

    mScreen.setBackgroundColor(color);
} 
```

如果最小幅度是`0`最大幅度是`MAX_AMPLITUDE`，并且如果您希望白色代表最小幅度，而黑色代表最大幅度，那么这样的事情应该可以解决问题：

```
private static final int MAX_RGB = 255;
private static final int MAX_AMPLITUDE = 32767;

private void updateBackground() {
    float amplF = (float) getAmplitude();
    int ampl = MAX_RGB - (int) (amplF / MAX_AMPLITUDE * MAX_RGB);

    mScreen.setBackgroundColor(Color.rgb(ampl, ampl, ampl));
} 
```

如果您发现您在实践中看到的最高幅度值明显低于`32767`，您可以通过以下方式对此进行解释：

```
private static final int MAX_RGB = 255;
private static final int int MAX_AMPLITUDE = 1500; // Set to some reasonable value

private void updateBackground() {
    int actual = getAmplitude();

    if (actual > MAX_AMPLITUDE)
        actual = MAX_AMPLITUDE;

    float amplF = (float) actual;
    int ampl = MAX_RGB - (int) (amplF / MAX_AMPLITUDE * MAX_RGB);

    mScreen.setBackgroundColor(Color.rgb(ampl, ampl, ampl));
} 
```

如果你这样做，最好`MAX_AMPLITUDE`不要再设置一个常数，并通过提供“校准”选项使其可配置，用户可以在其中制作他们认为是响亮的任何东西。

# .net - 使用单击一次为 Windows 应用程序添加制造商名称

> ID：11356116
> 
> 赞同：0
> 
> 时间：2012-07-06T05:04:06.387
> 
> 标签：.net, clickonce

我在 Click Once 中部署了一个 Windows 应用程序。应用程序被添加到启动项中。现在，当我检查 msconfig 时，我可以看到“制造商”字段被赋予“未知”。我在它的汇编中提供了足够的信息。我怎么能做到这一点，无论是编程还是手动？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T04:44:41.050

ClickOnce 不使用程序集信息。在 Visual Studio 中打开您的 Windows 应用程序，转到项目属性，转到“发布”选项卡。单击选项。发布者名称是用于开始菜单上的组的名称。Suite Name 是组下的子组，Product Name 是实际启动快捷方式的名称。

# python - 使用 GQL 选择过去 48 小时的记录

> ID：11356119
> 
> 赞同：1
> 
> 时间：2012-07-06T05:04:14.857
> 
> 标签：python, google-app-engine, datetime, google-cloud-datastore, gql

> **可能重复：**
> [如何在 GQL 中查询过去 6 小时（日期时间）的所有条目？](https://stackoverflow.com/questions/994187/how-to-query-all-entries-from-past-6-hours-datetime-in-gql)

有没有办法从 GQL 中选择过去 48 小时内创建的记录？这正是我想要做的，但在 SQL 中： [如何使用 SQL 选择过去 24 小时的记录？](https://stackoverflow.com/questions/1888544/how-to-select-records-from-last-24-hours-using-sql)并且其变体似乎在 GQL 中不起作用。

我正在尝试在 DateTime 属性上使用此查询，但我没有将其设置为任何特定格式，因此它应该是默认格式。

# android - Admob 不适用于 AsyncTask

> ID：11356121
> 
> 赞同：1
> 
> 时间：2012-07-06T05:04:20.547
> 
> 标签：android, admob

我可以使用 AsyncTask 加载 admob 广告吗？

我已经尝试过了，但在运行时我收到很多警告并且广告没有加载

我创建新 AdView 实例时的警告之一是

```
07-06 09:57:31.170: W/webview(1113): java.lang.Throwable: Warning: A WebView method was called on thread 'AsyncTask #1'. All WebView methods must be called on the UI thread. Future versions of WebView may not support use on other threads. 
```

我的方法看起来像这样

```
 @Override
protected AdView doInBackground(Activity... activityParam) 
{   
         Looper.prepare();              
         activity = activityParam[0];   
         // Create the adView
         AdView adView = new AdView(activity, AdSize.BANNER, "xxxxxxxxxxxxx");                  
         return adView;         
} 
```

请告知是否应该在非 UI 线程上调用它，这是我这样做的唯一原因是为了防止 UI 阻塞。

编辑。

可能是我没有正确表达我的问题，

我正在尝试在后台加载广告，因为它似乎会阻止几秒钟，我不想阻止我的活动界面。

阅读这篇文章[如何避免 Admob 阻塞 UI 线程](https://stackoverflow.com/questions/9472674/how-to-avoid-admob-blocking-the-ui-thread)，建议避免 UI 阻塞应该使用 AsyncTask

那么我想知道是否可以在后台加载广告..？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T05:12:02.670

问题是您在`doInBackground`方法中使用不在`UI`线程中的视图。只需在线程中调用的`onPostExecute`（调用 after `doInBackground`）或`onPreExecute`（调用 before `doInBackground`）方法中处理您的视图。`AsyncTask``UI`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T05:40:16.780

将创建需要在 UI 线程上完成的 AdView 所需的时间与与广告服务器通信和投放广告所需的时间分开。“阻止”或“滞后”可能是广告 SDK 的线程试图让广告向您展示。由于它必须通过 Internet 执行此操作，因此广告出现需要时间。我真的不认为 AdMob 在尝试获取广告时会阻止 UI 线程，但是在您看到屏幕上显示的所有 UI 小部件项目（按钮、文本字段、图像等）之间会有明显的延迟您的活动以及广告出现的时间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-11T11:56:55.047

只有在 UI 线程中处理代码时，才会显示 Admob 横幅和插页式广告。

根据您的性能需求，您可能需要查看以下帖子。它很好地总结了为什么使用 AsyncTask 比直接创建自己的线程效率低： [Android 基础：在 UI 线程中运行代码](https://stackoverflow.com/questions/12850143/android-basics-running-code-in-the-ui-thread)

在以下链接中，您可以找到有关如何使用线程在 30 秒的循环作业中使用插页式广告的教程：[http ://www.6020peaks.com/2015/01/how-to-use-admob-interstitials-from-a -non-ui-thread-in-android/](http://www.6020peaks.com/2015/01/how-to-use-admob-interstitials-from-a-non-ui-thread-in-android/)

# entity-framework - 如何简化实体框架中的 where 条件

> ID：11356122
> 
> 赞同：0
> 
> 时间：2012-07-06T05:04:47.503
> 
> 标签：entity-framework, c#-3.0

我有 4 个参数，我需要检查 if 条件并给出 where 条件。如何用简单的方式编写它

例子

```
var param1, param2, param3, param4;

If(param1 !=0 && param2==0 && param3==0 && param4==0)
{
  var query = from x in xx
             where x.y== param1
              select x;
             // where param2,param3, parma4 are 0
}
else If(param1 !=0 && param2 !=0 && param3==0 && param4==0)
{
 var query = from x in xx
             where x.y== param1 && x.z== param2
              select x;
             // where param3, parma4 are 0
}
else if ....... 
```

等等

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T05:29:15.343

您可能正在寻找这样的东西：

```
var query = from x in xx
            where (param1 == 0 || x.y == param1)
                && (param2 == 0 || x.z == param2)
                && (param3 == 0 || x.a == param3)
                && (param4 == 0 || x.b == param4)
            select x; 
```

这种方法的缺点是您有时会向数据库传递冗余参数。更好的方法是：

```
var query = xx;
if(param1 != 0)
    query = query.Where(x => x.y == param1);
if(param2 != 0)
    query = query.Where(x => x.z == param2);
if(param3 != 0)
    query = query.Where(x => x.a == param3);
if(param4 != 0)
    query = query.Where(x => x.b == param4); 
```

这需要更多的输入，但会将尽可能小的查询发送到数据库。

# iphone - 如何使用 NSFetchResultsController？

> ID：11356126
> 
> 赞同：0
> 
> 时间：2012-07-06T05:06:09.850
> 
> 标签：iphone, uitableview, nsfetchedresultscontroller

我正在开发一个我正在使用的应用程序`NSFetchedResultsController`。

我在一些教程的某处读到，在使用`NSFetchedResultsController`并将其批量大小设置为某个值后，只会在您的表格视图中获取该值。

是这样吗？`NSFetchedResultsController`因为，当我实现它时，我没有看到使用和不使用它的任何区别。

# java - 类不能直接扩展枚举类

> ID：11356127
> 
> 赞同：-1
> 
> 时间：2012-07-06T05:06:14.803
> 
> 标签：java

我有公共最终类，即公共最终类 BiometricPosition 扩展了 Enum，但它给出了错误，例如类不能直接扩展 java.lang.Enum。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T05:08:25.947

为什么不使用？

```
public enum BiometricPosition { 
    ENUM_VALUE_1,
    ENUM_VALUE_2;
} 
```

然后你可以像这样声明一个变量：

```
BiometricPosition pos = BiometricPosition.ENUM_VALUE_1 
```

这对您来说是一个非常有用的链接：

[http://docs.oracle.com/javase/tutorial/java/javaOO/enum.html](http://docs.oracle.com/javase/tutorial/java/javaOO/enum.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T05:08:35.037

使用[`enum`](http://docs.oracle.com/javase/tutorial/java/javaOO/enum.html)关键字来声明你的类：

```
public enum BiometricPosition {
    ...
} 
```

这将隐式扩展特殊[`Enum`](http://docs.oracle.com/javase/7/docs/api/java/lang/Enum.html)类，并允许在类主体中使用特定于枚举的语法。

# ruby-on-rails - Gmaps4Rails 与 Stamen Maps 的集成

> ID：11356128
> 
> 赞同：1
> 
> 时间：2012-07-06T05:06:18.423
> 
> 标签：ruby-on-rails, google-maps, gmaps4rails, stamen-maps

有没有人想出如何将 Stamen 瓷砖与 Gmaps4rails 集成？这有点令人困惑，因为 google.maps 没有在 Gmaps4Rails gem 中明确调用。希望获得有关如何获取所需信息的任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T22:55:43.070

我找到了一种（粗略的）方法来使用 gmaps4rails 创建带有 OSM 瓦片的滑动地图。从外观上看，雄蕊图应该更容易。您可能会在此处查看我的解决方案，找到一些提示如何使用 gem 来实现此功能：[gmaps4rails 的 Slippy maps](https://stackoverflow.com/q/11404725/1481208)

我以前没有遇到过雄蕊图。他们看起来很棒。遗憾的是，地形图在欧洲不可用。明天我会和它一起玩，看看我能不能找到更多。

编辑：

在`gmaps4rails.base.js.coffee`添加此方法：

```
 #creates a Stamen Map layer with the mapTypeId "toner"
 createStamenMap : ->
  StamenMapTypeOptions = new google.maps.ImageMapType(
    getTileUrl: (coord, zoom) ->
      "http://tile.stamen.com/toner/" + zoom + "/" + coord.x + "/" + coord.y + ".png"
    tileSize: new google.maps.Size(256, 256)
    name: "toner"
    maxZoom: 18
  )
  @serviceObject.mapTypes.set("toner", StamenMapTypeOptions)
  @serviceObject.setMapTypeId("toner") 
```

如果你想要水彩画或地形，你需要在它说`toner`的任何地方交换你喜欢的东西（包括在 TileUrl 中！）。

像这样添加对`js_builder.rb`您的方法的调用

`@js << "#{gmap_id}.createStamenMap();"`

之后`@js << "#{gmap_id}.initialize();"`。

如果您像我一样使用 rvm`js_builder.rb`将不会在您的应用程序目录中，对我来说它在`/Users/<username>/.rvm/gems/ruby-1.9.3-p194/gems/gmaps4rails-1.5.2`

最后，像这样更改您的视图代码：

```
 <%= gmaps("markers" => {"data" => @json},
                "map_options" => {"type" => "TERRAIN", :raw => '{mapTypeControlOptions: {mapTypeIds: ["toner", google.maps.MapTypeId.ROADMAP, google.maps.MapTypeId.TERRAIN], style: google.maps.MapTypeControlStyle.DROPDOWN_MENU}}'}) %> 
```

我确信有一种更漂亮的方法可以做到这一点，但它似乎有效。

# jquery - 我可以使悬停不可见的元素吗？

> ID：11356132
> 
> 赞同：6
> 
> 时间：2012-07-06T05:06:49.363
> 
> 标签：jquery, css, animation, hover

我有一个具有星爆效果（透明 png 背景）的 div，我想在它们悬停时覆盖在一系列 imgs 上；我必须使 div 变大以包含图像，但它会妨碍检测图像上的悬停。（我将它们全部作为背景图像，因此它们是通过高分辨率 css 媒体查询加载的）

每个“图像”都是一系列元素，现在看起来像这样：

```
<div class="section">
    <div class="starburst"></div>
    <a href="link">
        div class="image">
            <div class="non-hover"></div>
            <div class="hover"></div>
        </div>
        <p>Caption</p>
    </a>
</div> 
```

JS是这样的

```
$('.section a').hover(
    function () {
        $('.speaker .hover').hide();
        $(this).find('.non-hover').addClass('focus');
        $(this).find('.hover').stop().show().animate({opacity:1.0}, 1000);
    },
    function () {
        $(this).find('.hover').stop().animate({opacity:0.0}, 0);
        $(this).find('.non-hover').removeClass('focus');
    }
); 
```

我的问题是将 .starbursts 放在哪里，如何处理它们以使它们在前面，它们的 bg 图像位于悬停图像的顶部，但不会妨碍悬停在它们上面。我不确定这是否可能，但希望有办法。让它们分开，因为我想以不同的方式为它们设置动画。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-06T05:11:08.037

您可以使用 CSS[指针事件](https://developer.mozilla.org/en/CSS/pointer-events)属性：

> CSS 属性 pointer-events 允许作者控制在什么情况下（如果有）特定图形元素可以成为鼠标事件的目标。

```
.starbursts {
   pointer-events: none
} 
```

# debugging - 如何在 gdb 脚本中确认操作（回答“Y”）？

> ID：11356138
> 
> 赞同：29
> 
> 时间：2012-07-06T05:08:03.047
> 
> 标签：debugging, gdb, breakpoints

我使用 gdb 来调试我的 cpp 代码。我以这种方式设置断点：

```
(gdb) break ParseDriver.cc:60
No source file named ParseDriver.cc.
Make breakpoint pending on future shared library load? (y or [n]) y
Breakpoint 1 (ParseDriver.cc:60) pending. 
```

为了简化设置断点，我编写了一个简单的 gdb 脚本（名为 breakpoints.gdb），它只包含一行：

```
break ParseDriver.cc:60 
```

我在 gdb 终端中获取此脚本，但它失败了。

```
(gdb) source ~/breakpoints.gdb
No source file named ParseDriver.cc.
Make breakpoint pending on future shared library load? (y or [n]) [answered N; input not from terminal] 
```

看来我们需要在脚本中回答 Y 才能设置断点。

那么，如何在 gdb 脚本中回答 Y 呢？先感谢您。

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-07-06T05:33:32.493

```
(gdb) set breakpoint pending on 
```

这将使 gdb 跳过要求确认，引用[文档](https://sourceware.org/gdb/onlinedocs/gdb/Set-Breaks.html)：

> 这表明无法识别的断点位置应自动导致创建挂起的断点。

# matlab - 为什么结果不是标量？

> ID：11356140
> 
> 赞同：1
> 
> 时间：2012-07-06T05:08:16.707
> 
> 标签：matlab

我被这个错误困住了：

在赋值 A(I) = B 中，B 和 I 中的元素数必须相同。

yres(1)=((u - uc).^2) + ((y - yc).^2) -(d.^2); 我不明白，为什么这不会得到一个标量？因为元素都是标量。应该改变什么以获得标量？

最好的祝福

编辑：感谢 sloede，所有输入都是标量，但我仍然收到此错误

在赋值 A(I) = B 中，B 和 I 中的元素数必须相同。

```
 Error in myfun (line 7)
     yres(1)=sqrt(((u - uc).^2) + ((y - yc).^2) ) -d;
    Error in fsolve (line 241)
        fuser = feval(funfcn{3},x,varargin{:});
    Error in modfsolve (line 26)
    x= fsolve(@myfun,x0,options,uc,d,spacing_amplitude,spacing_width);
    Caused by:
    Failure in initial user-supplied objective function evaluation. FSOLVE
    cannot continue.* 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T05:26:31.090

这 ”。” 在运算符之前意味着以下操作应按元素应用，而不是在整个向量上应用。因此

```
a = b.^2 
```

*结果将为您提供b*的所有元素平方并保存回*a*。因此，在您上面的代码语句中，如果*u*、*uc*、*y*、*yc*、*d*中的任何一个不是标量而是向量，那么您的结果也将是向量。

否则，您的代码似乎没有任何问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T08:13:43.037

阅读 fsolve 的文档：http: [//www.mathworks.nl/help/toolbox/optim/ug/fsolve.html](http://www.mathworks.nl/help/toolbox/optim/ug/fsolve.html)

它指出：

> `fun`
> 要求解的非线性方程组。`fun`是一个函数，它接受一个向量`x`并返回一个向量`F`，非线性方程在 处求值`x`。

显然你的函数`myfun`不处理向量输入。您可以通过在函数中添加以下结构来解决此问题（当然，将其更改为您的需要/您的参数）：

```
function out = myfun(in)
    if ~isscalar(in)
        % assuming it's a matrix or vector
        out = reshape(arrayfun(@myfun,in(:)),size(in));
    else
        % your actual function execution statements
        out = dostuffon(in);
    end
end 
```

或正确矢量化您的功能（如果可能的话）

# floating-point - 计算模数为 1000,000,007 的 double 的大幂

> ID：11356141
> 
> 赞同：0
> 
> 时间：2012-07-06T05:08:25.277
> 
> 标签：floating-point, exponentiation

我想找到 (1+sqrt(3))^(n+1) 的大幂，其中 n 从 n=1 变化到 n=1000,000,000。通过平方的模幂运算可以与双打一起使用吗？如何？我已经搜索了很多，但还没有积极的结果。任何帮助将不胜感激？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T14:30:00.837

对“通过平方进行模幂运算可以与双精度数一起使用吗？”这个问题的答案？不是，给定一些假设，我将解释。

诸如取余数模 1,000,000,007 之类的操作是各种数论计算和其他整数算术的典型操作。所以，我假设我们想要以整数精度计算结果。也就是说，我们想知道对于某些 n，0 < n ≤ 10 ⁹最接近 (1+sqrt(3))^(n+1) % 1,000,000,007 的整数。考虑一个函数 x ^(n+1)。它对 x 的导数是 (n+1)x ^n。当 x 为 1+sqrt(3) 且 n 为 10 ⁹时，导数约为 4.65•10 ^(436488780)。^(这意味着 x 在 4.65•10 436488780)中大约 1 部分的变化将改变 x ^(n+1的值)大约 1，这当然也将残差改变了大约 1。因此，要以所需的精度计算残差，实际上，我们必须将 1+sqrt(3) 的值计算到超过 4.36 亿位小数。

这大大超出了任何现代计算机上的 double 类型提供的精度。因此，答案是否定的；没有算法可以给你想要的答案，因为 double 类型不能以必要的精度进行计算。

从技术上讲，可以使用双精度算术来构造扩展精度算术。（因此，上面的答案是针对以正常方式使用双精度算术的。）因此，使用非凡的技术，可以从双精度运算中制造必要的计算。讨论这样做的方法超出了堆栈溢出问题。通常，整数运算用于此类工作的大部分，尽管双精度运算可能会起作用。并且可以使用软件包来提供这种扩展精度算术，例如 GMP（GNU 多精度算术库）。

计算和保留 4.36 亿个小数位可能会使计算资源紧张。通过丢弃可以证明不会影响最终残差的信息，可以减少所需的计算量，因此并非同时需要所有 4.36 亿个小数位。但是，我不希望这种减少会产生在没有扩展精度技术的情况下在双精度算术中可行的计算。

问题比这更糟。知道 x 到 4.65•10 ^(436488780)中的大约一个部分可能会帮助您在 1 的误差范围内计算结果，但它不会告诉您哪个整数最接近。考虑您可能计算 (1+sqrt(3)) ^(n+1) % 1,000,000,007 并发现结果非常接近 3.5。为了确定最接近结果的整数是 3 还是 4，您必须弄清楚结果在 3.5 的哪一侧。这个函数 (1+sqrt(3)) ^(n+1)可能有一些非常接近中间位置的值，您需要更准确地计算它们才能做出正确的决定。

# parameter-passing - 使用 Storyboard Segue 传递自定义对象、NSObject 子类

> ID：11356144
> 
> 赞同：0
> 
> 时间：2012-07-06T05:08:32.297
> 
> 标签：parameter-passing, uistoryboard, segue, uistoryboardsegue, custom-object

简单测试对象：

我的 .h （标题）代码：

```
#import <Foundation/Foundation.h>
@interface SimpleTest : NSObject
@property (strong, nonatomic) NSString *tested;
@end 
```

我的 .m 代码：

```
#import "SimpleTest.h"
@implementation SimpleTest
@synthesize tested;
@end 
```

只是一个简单的类。我做这个是为了测试，我实际上有一个更大更复杂的对象。

在我的故事板中，如果我在 prepareForSegue 中将我没有制作的对象（例如 NSString）从我原来的 ViewController 传递到我的 DestinationViewController，它工作得很好；目标视图控制器很好。当我传递从原始 ViewController 制作的简单对象并设置字符串时，它在目标 ViewController 中返回 null 这里是一些示例代码：

```
if ([[segue identifier] isEqualToString:@"toInsulinList"]) 
{
    IDataViewController *ivc = [segue destinationViewController];
    ivc.pListObj = self.pListObj; //My complex object, returns null in dest vc 
    ivc.tester = @"Tested"; //this is an NSString in dest vc - works fine
    simpleTest.tested = @"testObj";   
    ivc.simpleTest = self.simpleTest; //my simple object, returns null in dest vc
} 
```

对此有什么猜测吗？任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T18:08:18.993

对象为零。菜鸟错误。:(

# ruby-on-rails - rails路由中资源和资源之间的区别？

> ID：11356146
> 
> 赞同：48
> 
> 时间：2012-07-06T05:08:56.227
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, routes

rails routing`resource`和in有什么区别`resources`

```
 resource :geocoder 
```

和

```
 resources :posts 
```

它们之间的真正区别是什么？

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-07-06T05:29:06.843

本质上，路由资源是资源赋予控制器动作能力的时候。

[http://guides.rubyonrails.org/routing.html#specifying-a-controller-to-use](http://guides.rubyonrails.org/routing.html#specifying-a-controller-to-use)

如果将多元化资源用作处理任何项目的通用请求的一种方式，那么单一资源就是处理手头当前项目的一种方式。

所以换句话说，如果我有一个苹果集合，要检索一个特定的苹果，我必须通过发送苹果的 ID 告诉路由器“苹果”要检索什么苹果。如果我已经有一个 Apple，则不需要 ID。

通过查看它们具有的操作（或路线）来注意两者之间的差异：

*   资源：**索引**、新建、创建、显示、编辑、更新、销毁
*   资源：新建、创建、显示、编辑、更新、销毁

在您的示例中：

1.  控制器“地理编码器”是一个单一的资源，可用于编辑、创建、更新等。
2.  控制器“posts”是一个复数资源，它将处理传入的通用帖子，您可以索引、编辑、创建……等

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2015-10-21T11:31:14.920

**奇异资源：**

有时，您有一个资源，客户端总是在不引用 ID 的情况下查找该资源。例如，您希望`/profile`始终显示当前登录用户的个人资料。

或者，通常您当前登录的用户属于单个组织，因此转到他/她的组织资料页面可以有两条路线

```
#1
/organizations/:id

#2
/organization #simply 
```

在这里，后面的实现更有意义；是不是？您从关联中获取组织对象

```
# in organizations#show
@organization = current_user.organization 
```

要定义这样的单一资源，您可以使用`resource`方法：示例

```
# in routes.rb
resource :organization 
```

在您的应用程序中创建六个不同的路由，所有路由都映射到 Organizations 控制器：

[![在此处输入图像描述](../Images/a2fdd350347c24868cd527f9401f0a14.png)](https://i.stack.imgur.com/4ovWe.png)

而您使用`resources`方法定义多个资源

```
resources :organizations 
```

[![在此处输入图像描述](../Images/931a1c2b1b1b0bc4078e3c50b6f3a096.png)](https://i.stack.imgur.com/Gy7zk.png)

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2012-07-06T05:15:49.943

[http://guides.rubyonrails.org/routing.html#singular-resources](http://guides.rubyonrails.org/routing.html#singular-resources)

> 有时，您有一个资源，客户端总是在不引用 ID 的情况下查找该资源。例如，您希望 /profile 始终显示当前登录用户的个人资料。在这种情况下，您可以使用单一资源将 /profile（而不是 /profile/:id）映射到 show 操作。

查看它的一个好方法是资源没有索引操作，因为它应该只是一个。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-06T05:17:36.363

我认为只是索引视图。

还报告了资源助手和表单助手的路由问题。就个人而言，我使用以下语法：

```
resources :someresource, except: :index 
```

为了避免[报告的错误](https://github.com/rails/rails/issues/1769)。

# php - 使用 json_decode() 解码 JSON 文件中的多行字符串

> ID：11356149
> 
> 赞同：0
> 
> 时间：2012-07-06T05:09:42.017
> 
> 标签：php, json

我是 JSON 新手，所以在解析它时遇到了一些麻烦。

我制作了一个 JSON 文件：

> 新的json.json
> 
> ```
> {
>     "title":"My Title",
>     "contents":"My\
>                 Multiline\
>                 Contents"
> } 
> ```

我曾经`\`避免在 JavaScript 语法中出现不允许多行字符串的错误，但是当我`file_get_contents()`使用 PHP 加载它并使用它解码时`json_decode()`，它无法解析它。

我认为在将字符串放入解码函数之前，我应该`\`用 , 或其他东西处理 s 。`preg_replace`

我应该怎么办？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-06T05:11:53.527

PHP 无法解析您的字符串，因为[它不是有效的 JSON](http://www.json.org/)。唯一有效的转义序列是：

*   `\"`引号
*   `\\`对于反斜杠
*   `\/`对于正斜杠
*   `\b`退格
*   `\f`对于换页
*   `\n`换行
*   `\r`回车
*   `\t`对于标签
*   `\uxxxx`十六进制转义

如果您想要文字换行符，请使用换行符转义。否则，您将不得不使用不太漂亮的字符串。

```
{
    "title":"My Title",
    "contents":"My\nMultiline\nContents"
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T05:17:56.613

您的 in json 语法一定有问题，这就是它无法解析它的原因...

试试你的[http://json.parser.online.fr/](http://json.parser.online.fr/)

在那里复制你的整个 json 字符串并尝试对其进行操作......你可能会在那里发现你的错误

# android - proguard混淆后损坏apk

> ID：11356158
> 
> 赞同：2
> 
> 时间：2012-07-06T05:10:39.983
> 
> 标签：android, eclipse, proguard

我尝试使用 proguard android 工具。但是没有安装混淆的apk（我使用eclipse导出向导）。dex2jar 告诉我所有类都在 jar 中，但以 *.dump.txt 命名并包含如下内容：

```
//class:0002  access:0x0011
public final class com.company.android.BuildConfig
//field:0000  access:0x0019
//Lcom/company/android/BuildConfig;.DEBUG Z
public static final  Z DEBUG=true;

//method:0000  access:0x10001
//Lcom/company/android/BuildConfig;.<init>()V
public V <init>()
                this:v0   //com.company.android.BuildConfig
LOCAL_VARIABLE LL0 ~ LL1 v0 -> this // Lcom/company/android/BuildConfig; 
LABEL               |  LL0: line 4
INVOKE_DIRECT       |     |v0.<init>()  //Ljava/lang/Object;.<init>()V
RETURN_VOID         |     |return
LABEL               |  LL1: 
```

我哪里错了？我怎样才能使工作混淆apk？

我的 proguard.cfg：

```
-optimizationpasses 5
-dontusemixedcaseclassnames
-dontskipnonpubliclibraryclasses
-dontpreverify
-verbose
-optimizations !code/simplification/arithmetic,!field/*,!class/merging/*

-keep public class * extends android.app.Activity
-keep public class * extends android.app.Application
-keep public class * extends android.app.Service
-keep public class * extends android.content.BroadcastReceiver
-keep public class * extends android.content.ContentProvider
-keep public class * extends android.app.backup.BackupAgentHelper
-keep public class * extends android.preference.Preference
-keep public class com.android.vending.licensing.ILicensingService

-keepclasseswithmembernames class * {
    native <methods>;
}

-keepclasseswithmembers class * {
    public <init>(android.content.Context, android.util.AttributeSet);
}

-keepclasseswithmembers class * {
    public <init>(android.content.Context, android.util.AttributeSet, int);
}

-keepclassmembers class * extends android.app.Activity {
   public void *(android.view.View);
}

-keepclassmembers enum * {
    public static **[] values();
    public static ** valueOf(java.lang.String);
}

-keep class * implements android.os.Parcelable {
  public static final android.os.Parcelable$Creator *;
} 
```

我的项目属性：

```
target=android-8
proguard.config=proguard.cfg 
```

谢谢！

# grails - 如何使用 Groovy 修剪列表中的所有元素？

> ID：11356159
> 
> 赞同：15
> 
> 时间：2012-07-06T05:10:40.540
> 
> 标签：grails, groovy

我需要修剪 groovy 或 grails 列表中的所有元素吗？什么是最好的解决方案

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-07-06T05:14:42.607

假设它是一个字符串列表并且您想要修剪每个字符串，您可以使用[扩展运算符](http://groovy.codehaus.org/Operators#Operators-SpreadOperator)(*.)

```
list = [" abc ", " xyz "]
list*.trim() 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-07-06T05:28:37.407

您可以使用 collect 方法或扩展运算符创建一个包含修剪元素的新列表：

```
def strs = ['a', ' b', ' ']
assert strs.collect { it.trim() } == ['a', 'b', '']
assert strs*.trim() == ['a', 'b', ''] 
```

在这些情况下，原始列表不会被修改。如果要在适当的位置修剪字符串，则需要使用索引遍历列表：

```
for (i in 0..<strs.size()) {
    strs[i] = strs[i].trim()
} 
```

# matlab - MATLAB 4 小数点精度计算

> ID：11356160
> 
> 赞同：1
> 
> 时间：2012-07-06T05:10:42.990
> 
> 标签：matlab

在 MATLAB 中，有没有办法让它只使用小数点后 4 位进行所有计算？如果我写 fprintf('%85.83f\n',single(1.1566))，它不完全是 1.1566。对于我的具体问题，我不能累积那些额外的数字。我希望所有内部计算都只在这个精度上完成。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T05:40:10.033

默认情况下，MATLAB 以双精度执行所有操作。如果您希望您的运算使用较低的精度，您可以使用[`variable precision arithmetic`](http://www.mathworks.com/help/toolbox/symbolic/f1-5556.html)符号数学工具箱的一部分。在您的情况下，首先使用该函数将精度设置为 4 位有效数字[`digits`](http://www.mathworks.com/help/toolbox/symbolic/digits.html)，然后使用该函数声明和操作变量[`vpa`](http://www.mathworks.com/help/toolbox/symbolic/vpa.html)：

```
old_precision = digits; % Save the old precision
digits(4);
vpa(1/3 + 1/2)
digits(old_precision); % Set the precision back 
```

将输出

```
>> vpa(1/3+1/2)

ans =

0.8333 
```

另一个例子：

```
>> digits(3);
>> a = 5.4;
>> vpa(a)+1/3

ans =

5.73 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T09:20:28.283

MathWorks 提供了一个[定点工具箱](http://www.mathworks.co.uk/help/toolbox/fixedpoint/)，可以满足 OP 的需求。

但是，如果 OP 的语句*我不能累积那些额外的数字*是代码，因为*我想要更快的执行并且不介意精度的损失，*我担心 OP 可能会不走运。在硬件中内置 32 位或 64 位（或两者）浮点计算的现代数字计算机上，非硬件精度的计算必须在软件中完成，并且可能会明显变慢。

# ruby-on-rails - Capybara 找不到表单元素

> ID：11356161
> 
> 赞同：3
> 
> 时间：2012-07-06T05:10:49.637
> 
> 标签：ruby-on-rails, capybara

这是我第一次尝试 Capybara，我似乎无法找到为什么它找不到我的表单元素。

每次我试图找到一个表单元素时，

```
When /^they submit a resolution in Markdown$/ do
  visit "/resolutions/new"
  fill_in "title", :with => "Title"
  fill_in "libelle", :with => "Some text here\n\nNew paragraph"
  click_button "Submit"
end 
```

它不知道它在哪里，

```
Scenario: Submission of a resolution                 # features/resolutions.feature:5
    Given the user is a member                       # features/step_definitions/user_steps.rb:26
    When they submit a resolution in Markdown        # features/step_definitions/resolution_steps.rb:8
      cannot fill in, no text field, text area or password field with id, name, or label 'title' found (Capybara::ElementNotFound)
      (eval):2:in `fill_in'
      ./features/step_definitions/resolution_steps.rb:10:in `/^they submit a resolution in Markdown$/'
      features/resolutions.feature:7:in `When they submit a resolution in Markdown' 
```

即使它出现在页面上

```
<%= form_for(@resolution) do |f| %>
  <div class="field">
    <%= f.label :title %><br />
    <%= f.text_field :title %>
  </div>
  <div class="field">
    <%= f.label :libelle %><br />
    <%= f.text_area :libelle %>
  </div>
  <div class="actions">
    <%= f.submit "Submit" %>
  </div>
<% end %> 
```

它似乎已经正确渲染。

```
Started GET "/resolutions/new" for 127.0.0.1 at 2012-07-06 00:47:24 -0400
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  UPDATE "users" SET "last_sign_in_at" = '2012-07-06 04:47:24.980196', "current_sign_in_at" = '2012-07-06 04:47:24.980196', "last_sign_in_ip" = '127.0.0.1', "current_sign_in_ip" = '127.0.0.1', "sign_in_count" = 1, "updated_at" = '2012-07-06 04:47:24.980658' WHERE "users"."email" = 'alexandre@membres.jndq.ca'
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by ResolutionsController#new as HTML
  Rendered resolutions/_form.html.erb (3.8ms)
  Rendered resolutions/new.html.erb within layouts/application (4.9ms)
Completed 200 OK in 18ms (Views: 7.9ms | ActiveRecord: 0.2ms)
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 FROM "users" WHERE "users"."email" = 'normand@pq.ui' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("authentication_token", "clearance", "confirmation_sent_at", "confirmation_token", "confirmed_at", "created_at", "current_sign_in_at", "current_sign_in_ip", "email", "facebook_uid", "id", "last_sign_in_at", "last_sign_in_ip", "name", "parent", "remember_created_at", "sign_in_count", "unconfirmed_email", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)  [["authentication_token", nil], ["clearance", 9], ["confirmation_sent_at", nil], ["confirmation_token", nil], ["confirmed_at", nil], ["created_at", Fri, 06 Jul 2012 04:47:25 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "normand@pq.ui"], ["facebook_uid", nil], ["id", nil], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["name", "Normand Portequi"], ["parent", nil], ["remember_created_at", nil], ["sign_in_count", 0], ["unconfirmed_email", nil], ["updated_at", Fri, 06 Jul 2012 04:47:25 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m 
```

这似乎很明显，但我找不到它。我找到[了这个问题](https://stackoverflow.com/questions/3642467/how-to-solve-a-capybaraelementnotfound-error)，但答案毫无用处。即使在查看[了 Devise+Cucumber 示例应用程序](https://github.com/RailsApps/rails3-devise-rspec-cucumber/tree/master/features)之后，我也找不到问题所在。

这正在杀死我和我的测试。有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T19:03:04.153

我遇到了类似的问题，事实证明我需要做的是将“id：”字段添加到表单元素本身。

例如，您有：

```
<div class="field">
  <%= f.label :title %><br />
  <%= f.text_field :title %>
</div> 
```

但是，如果您将其更改为：

```
<div class="field">
  <%= f.label :title %><br />
  <%= f.text_field :title, id:"title" %>
</div> 
```

请注意，我在 text_field 元素上添加了一个“id”字段。我不确定为什么 Capybara 没有找到标签，但这对我有用。希望它可以帮助您（或其他人）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-01T10:36:22.137

尝试添加`puts page.body`之后`visit "/resolutions/new"`，看看你的堆栈跟踪告诉你什么。您将能够看到表单字段的 id。例如，虽然我的一列名为“name”，但呈现的 html 中的 id 是“user_name”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T05:32:14.437

这是一个疯狂的猜测，但我认为你需要等待。不确定“fill_in”是否等待页面可用。我知道“查找”会自动等待。

尝试增加

```
Capybara.default_wait_time 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-05T15:36:40.657

如果您的 Rails 视图如下所示：

`<%= form.text_field :first_name %>`

尝试通过将第一部分大写，后跟一个空格，然后将其余部分小写来调用该元素。

`fill_in "First name", with: 'Elaine'`

这应该可以，不需要 id 属性。

# java - 从 web.xml 加载 struts-config.xml

> ID：11356164
> 
> 赞同：1
> 
> 时间：2012-07-06T05:11:08.957
> 
> 标签：java, jakarta-ee, struts

我写作的时候

```
<init-param>
      <param-name>config</param-name>
      <param-value>WEB-INF/struts-config.xml</param-value>
</init-param> 
```

那个时候这个标签`web.xml`我得到了错误

> 单词配置拼写不正确

我知道这是一个合乎逻辑的名称，因此您可以使用任何单词，但该单词带有 `config`红色下划线。正因为如此，每当我运行一个 struts 应用程序时，我都会在 jsp 的表单标签中提到路径：类似于`/book`. 这本书的路径也在`struts-config.xml`文件中。

所以当我运行这个项目时，我得到了错误

> 请求的资源不可用（/书）

这意味着`struts-config.xml`没有正确加载。我也进口了罐子。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T05:52:24.843

尝试这个

```
<init-param>
     <param-name>config</param-name>
     <param-value>classpath:struts-config.xml</param-value>
</init-param> 
```

将**struts-config.xml**复制到**WEB-INF/classes**文件夹

此外，您应该将所有 struts jar 文件放入您的**WEB-INF/lib**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T09:59:46.383

我不认为有必要将 struts-config.xml 文件移动到某处。实际上单词“config”是用于初始化参数（struts-config.xml），名称为config。带有橙色（不是红色）下划线的配置仅用于字典检查。

所以发生错误是因为

在您的 struts-config.xml 中有混乱或配置错误。如果可能，请在此线程中添加您的 struts-config.xml，以便我们检查实际原因。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-22T12:22:05.910

将它放在带有 servlet 类 ActionServlet 的 servlet 操作中。在我的情况下工作，有类似的问题，但我只想将文件夹从类更改为我的默认值。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2020-07-10T07:43:20.070

`<init-param> <param-name>StrutsConfig</param-name> <param-value>/WEB-INF/struts-config.xml</param-value> </init-param>`

# gerrit - 通过 Gerrit UI 恢复到旧的补丁集版本？

> ID：11356166
> 
> 赞同：38
> 
> 时间：2012-07-06T05:11:45.663
> 
> 标签：gerrit

如果我在 Gerrit 中的一项更改有多个补丁集版本，似乎我只能提交最新的补丁集版本（因为只有那个有必要的按钮）。有没有一种简单的方法可以只使用我在那个 Gerrit 实例上的 Web 浏览器来**提交相同更改的旧补丁集版本之一？**

我知道我可以从我的 git 客户端获取所需的补丁集版本并将其作为另一个新的补丁集版本推送到顶部，但我想避免在围绕它的审查和讨论中多次使用相同的补丁集版本.

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-07-06T15:17:30.203

不，抱歉，这目前是不可能的。该设计假定最新的补丁集是开发人员将审查和测试的，因此不能提交较旧的补丁集。它们也不能被审查/验证。如果您想使用旧版本的补丁集，您必须重新提交它以使其成为最新的补丁集。为了避免*没有新的更改*错误`git commit --amend`，git 将创建一个新的 sha1，Gerrit 很乐意将其作为新的补丁集接受。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2018-02-19T12:02:09.587

仅使用 Gerrit UI 没有正确的方法来执行此操作。挑选“更改列表”的特定“补丁集”（例如，如果更改列表中有 15 个补丁集并且想要恢复到补丁集#8）。从 Gerrit UI 获取所需补丁集的 cherry-pick 命令。

运行该 cherry-pick 命令，然后使用`git commit --amend`，然后推送您的更改。它将生成新的补丁集（对于上面的示例 #16）。

# python - 递归函数中的返回

> ID：11356168
> 
> 赞同：55
> 
> 时间：2012-07-06T05:11:55.197
> 
> 标签：python, recursion, return

我刚开始学习python（v3.2.3），遇到了一个关于`return`这个函数的奇怪问题：

```
def test(x):
    if x > 9 :
        test(x - 10)
    else:
        print('real value',x)
        return x

x = int(input())
y = test(x)
print('this should be real value',y) 
```

当我运行它时，我得到：

```
45
real value 5
this should be real value None 
```

但我期望：

```
45
real value 5
this should be real value 5 
```

我尝试`return x`在外部添加`if`，我得到了默认输入值。谁能解释一下如何`return`工作？

* * *

## 回答 #1

> 赞同：91
> 
> 时间：2012-07-06T08:06:06.830

你调用`test(45)`. 这将测试是否`45 > 9`为真，因此它调用`test(35)`(45 - 10)，而不返回其结果。同样的事情发生在`test(25)`and `test(15)`，直到 finally`test(5)`被调用。

这将打印“真实值 5”，然后返回 5。但从函数返回结果**总是**将其返回给该函数的直接调用者。它不会通过几次调用立即跳出；毕竟，调用者可能想在返回一些东西给*它的*调用者之前对返回的结果做一些事情。但在这种情况下，只`test(5)`返回任何东西；所有其他人都打电话`test(x - 10)`，等待它返回，忽略它返回的任何东西，然后（隐式）返回`None`。由于最外层的调用`test(45)`是这些情况之一，因此您得到的是`None`.

以下是对所发生情况的可视化尝试：

```
test(45):
| test(35):
| | test(25):
| | | test(15):
| | | | test(5):
| | | | | print('real value',5)
| | | | | return 5 to test(15)
| | | | return None to test(25)
| | | return None to test(35)
| | return None to test(45)
| return None 
```

你没有调用`test(5)`解释器，`test(5)`是从另一个函数调用内部调用的。所以从返回`test(5)`到*那个函数调用*。这是一个调用自身的函数这一事实*完全无关紧要*。如果您的代码如下所示，您将得到完全相同的结果：

```
def test45(x):
    if x > 9 :
        test35(x - 10)
    else:
        print('real value',x)
        return x

def test35(x):
    if x > 9 :
        test25(x - 10)
    else:
        print('real value',x)
        return x

def test25(x):
    if x > 9 :
        test15(x - 10)
    else:
        print('real value',x)
        return x

def test15(x):
    if x > 9 :
        test5(x - 10)
    else:
        print('real value',x)
        return x

def test5(x):
    if x > 9 :
        print 'No more tests :('
    else:
        print('real value',x)
        return x 
```

您使用 'x=45' 调用的 test(x) 函数与调用 相同`test45(45)`。我希望你能明白为什么在*不*涉及`None`递归的情况下应该返回很明显。好吧，当涉及递归时，什么都没有改变。该语句既不知道也不关心它是否从递归调用的函数返回，在任何一种情况下它的行为方式都完全相同。*`return`*

 *事实上，递归根本不是什么“特别”的东西。它的行为方式与普通函数调用完全相同。您通过参数从调用您的事物接收信息，并通过返回将信息返回给调用您的事物。如果你不返回某些东西（可能只在一个手臂中`if`），那么`None`将返回给你的调用者，无论你是否调用了该分支中的任何其他函数，无论如果你调用某些东西，该函数可能会返回什么，并且无论您调用的函数是否恰好与您所在的函数相同。

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2012-07-06T05:13:17.553

return 是缩进的，所以它只在 else 分支中执行。如果采用第一个分支，则该函数隐式返回 None。

您需要将其更改为

```
return test(x-10) 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-07-06T05:13:45.320

您忘记在`x > 9`. 没有返回值，函数将“返回” `None`。*

# python - 在用户提交的内容中呈现换行符（Python Web 应用程序）

> ID：11356172
> 
> 赞同：3
> 
> 时间：2012-07-06T05:12:23.497
> 
> 标签：python, html, jinja2, web.py

我有一个 web.py 应用程序，它从 textarea 获取输入并将其输入到数据库中。我可以从数据库中获取信息并将其发布到页面但 NEWLINES 消失了。发回 HTML 时如何保留换行符？数据确实包含`\r\n`在其中，但不会在 HTML 中呈现为 NEWLINES。有什么想法吗？这是一个小例子：

```
(2, u'Title', u'content here...hey\r\nthis\r\nhas\r\nbreaks in it....?', 
    datetime.datetime(2012, 7, 5, 21, 5, 14, 354516)) 
```

那是我从数据库返回的。我需要`\r\n`代表 a`<br />`如果有两个 a`<p>`那就太棒了。任何方向将不胜感激。

还有一个图书馆吗？我听说过降价和标记，但我找不到如何从 python 字符串发布 html 数据的示例？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-07T10:26:47.877

有两种主要方法可以做到这一点。最简单的方法是包装输出`<pre></pre>`，将其格式化为输入的格式。

或者，您可以将 newlies 替换为`<br />`（而不是`<p>`），因为字符代表换行符而不是段落。

对于第二种选择，这是一种方法：

```
>>> s
'hello\nthere\r\nthis\n\ris a test'
>>> r = '<br />'
>>> s.replace('\r\n',r).replace('\n\r',r).replace('\r',r).replace('\n',r)
'hello<br />there<br />this<br />is a test'
>>> 
```

或者第三个选项 - 这是使用许多文本输入库/格式之一并通过它们呈现内容（正如其他人所提到的 - 如降价）。

但是，如果您只想进行简单的替换，那将是矫枉过正。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-06T05:27:27.280

不作为换行符呈现的换行符是 html 中的预期行为。您想要的是插入 `<br>`或将您的输入解析为文本段落并用`<p>`..`</p>`

我会做两者的混合：`<br>`用于单个换行符和`<p>`..`</p>`用于双换行符。您可以在保存到数据库时或在将其取出时进行此解析。

编辑：我为您制作了以下图形。查看解析器的方法有很多种。就个人而言，我想将它们视为一种状态机。为了实现它，您应该以流的方式读取输入字符串，例如使用[http://docs.python.org/library/stringio.html](http://docs.python.org/library/stringio.html)。

![在此处输入图像描述](../Images/1f80ca62fc0f3f7785bb7a3bbba4fa99.png) Edit2：将描述“下推自动机”更改为“状态机”。下推自动机是正确的，但不精确，并且与图表不匹配 - 我将两者混合在一起。

Edit3：这里有一些关于如何在代码中实现状态机解析器的 sudo 代码，使用 while 循环、switch case 和状态转换的 if 语句。

```
state = 'plainState'
streamer = get_stream_reader_from_input()
buffer = ''
while true {
  nextchar = streamer.readchar()
  if (nextchar == null) { //EOS
   print(buffer)
   exit
  }
  switch (state) {
    case('plainState') {
      if (nextchar == '\n') {
        state = 'singleBreakState' 
      }
      else if (nextchar == '\r') {
        state = 'CRState'
      }
      else {
        buffer += nextchar
      }
    }
    case('singleBreakState') {
      if (nextchar == '\n') {
        state = 'doubleBreakState' 
      }
      else if (nextchar == '\r') {
        state = 'CRState2'
      }
      else {
        state = 'plainState'
        buffer += '<br>' + nextchar
      }
    }
    //...
  }
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-07T10:26:05.510

在提出解决方案之前，您需要对正在发生的事情有一些基本的了解。如果你不理解这个问题，“扔进另一个库”的方法要么根本不起作用（更好），要么很快就会适得其反（更糟）。

@MichelMüller 正确地指出`\n`HTML 源代码中的 s 不会在浏览器中呈现。有关此行为的更详细说明，请参阅[本教程](http://www-sul.stanford.edu/tools/tutorials/html2.0/whitespace.html)（警告，HTML 2.0 描述）。现在，要在 HTML 中添加换行符，请使用`<br>`; 放置一个新段落，`<p>`。

你可以做很多事情来实现这一点，但你要解决的问题是什么？这个用户提交的内容是什么？谁提交？需要考虑的两个方面是：

1.  **格式化**。是公共网站上的评论，还是网站工作人员准备的帖子，还是 Stack Overflow 等网站上的 UGC？
2.  **安全**。它是由陌生人发布的，还是由完全信任的用户发布的，还是介于两者之间？

可能的解决方案：

*   最直接的方法是`text.replace('\r\n', '<br>')`在输出到模板格式化程序之前运行。如果您不在`{ text | safe }`模板中放入 a ， in 将不起作用，因为 Jinja 不应该逃避`<br>`您生成的 s 。但是，文本本身不应完全信任，因此您必须先转义`<`并且`&`（至少）*在*替换换行符之前。

*   看看[MarkupSafe](http://www.pocoo.org/projects/markupsafe/)以了解处理 HTML 转义的不那么特别的方法。顺便说一句，它是由 Jinja 使用的。

*   对于非结构化内容的格式（例如，用户提交*的评论如*YouTube），请查看[PottyMouth](http://glyphobet.net/pottymouth/)库。

*   如果您的内容准备得更充分（博客平台或类似 Stack Overflow 的网站上的帖子），请按照 @BernhardKircher 的建议尝试[Markdown 。](https://github.com/trentm/python-markdown2)它有一些学习曲线，所以如果用户愿意花一些时间写帖子，效果最好。请记住正确配置解析器，因为**核心 Markdown 不会转义 HTML**。

*   对于员工准备的内容，您可以使用 Markdown 或更复杂的东西。这真的取决于员工的背景。在这里，未转义的 HTML 可能是一种祝福，而不是一种诅咒。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-06T05:27:21.757

而不是使用不是 html 的插入文本，因此不会显示为 html（\r\n 不是“p”标签等），您可以使用诸如 markdown 之类的格式化语言（如您所述）。

否则，您将需要手动替换/解析输入的文本（我认为这不是一个好主意，因为已经为此发明了诸如降价之类的语言）。

有一些很好的 python 库可以将**markdown**（您存储在数据库中的数据）转换为 html，例如[python-markdown2](http://code.google.com/p/python-markdown2/)。

它真的很容易使用，请参阅 python-markdown 链接中的示例：

```
>>> import markdown2
>>> markdown2.markdown("*boo!*")  # or use `html = markdown_path(PATH)`
u'<p><em>boo!</em></p>\n'

>>> markdowner = Markdown()
>>> markdowner.convert("*boo!*")
u'<p><em>boo!</em></p>\n'
>>> markdowner.convert("**boom!**")
u'<p><strong>boom!</strong></p>\n' 
```

这迫使您使用降价语法（或您使用的任何格式）输入内容。为了使这更容易，您可以使用**所见即所得的编辑器**来为您创建降价（就像 Stackoverflow 上的编辑器）。我认为 Stackoverflow 使用[wmd](https://github.com/openlibrary/wmd)但还有很多其他降价所见即所得的编辑器。

wmd 示例：

```
<html>
    <head>
        <title>WMD Example using jquery</title>
        <link rel="stylesheet" type="text/css" href="wmd.css"/>

        <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"></script>
        <script type="text/javascript" src="jquery.wmd.min.js"></script>
    </head>
    <body>
        <h1>WMD Example using jquery</h1>
        <div>
            <textarea id="notes"/>
        </div>

        <script type="text/javascript">
            $().ready(function() {
               $("#notes").wmd(); 
            });
        </script>
    </body>
</html> 
```

# ruby-on-rails - Mongodb，子模型验证？

> ID：11356184
> 
> 赞同：1
> 
> 时间：2012-07-06T05:13:21.163
> 
> 标签：ruby-on-rails, mongoid

我有一个配置文件模型，它嵌入了一个 kids_type 和 parent_type。正如您在下面的代码中看到的那样。

我想验证 kids_type 子模型。使用 validates_associated 后，它对我来说工作正常。但问题是，它验证 kids_type 模型 [#, @messages=**{:kids_type=>["is invalid"]}>**] ，而不是我期待字段明智错误，因为我需要显示内联错误...

```
class Profile
  include Mongoid::Document
  validates_associated :kids_type  
  # PROFILE TYPE KIDS & PARENT
  embeds_one :kids_type, :class_name => "ProfileKidsType"
  embeds_one :parent_type, :class_name => "ProfileParentType"
end

class ProfileType
  include Mongoid::Document

  #COMMON FILES FOR KIDS AND PARENT
  field :fname, :type => String
  field :lname, :type => String

  validates_presence_of :fname, :message => "ERROR: First name is required"
  validates_presence_of :lname, :message => "ERROR: Last name is required"
end

class ProfileParentType < ProfileType
  include Mongoid::Document

  field :email, :type => String  
  embedded_in :profile, :inverse_of => :parent_type
end

class ProfileKidsType < ProfileType
  include Mongoid::Document

  field :nickname, :type => String
  embedded_in :profile, :inverse_of => :kids_type
end 
```

任何建议将不胜感激，在此先感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T08:10:03.710

在这里试试这个 @profile 是 Profile 的实例，它会为你提供所有错误字段明智的孩子类型

```
@profile.kids_type.errors 
```

# php - cakephp mysql 分组查询

> ID：11356187
> 
> 赞同：0
> 
> 时间：2012-07-06T05:13:27.863
> 
> 标签：php, mysql, cakephp

在以下 cakephp mysql 查询中，我如何找到每次分组的行数？

```
$groupBy = 'PropertyViewer.ip_address';
$this->paginate = array(
  "group" => array( $groupBy ),
  "order" => array( "PropertyViewer.id desc" ) );
$view_info = $this->paginate( 'PropertyViewer', $conditions );
$this->set( 'view_info', $view_info );` 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T07:13:44.790

您可以按照以下方式进行操作，但是我没有尝试过，但它会起作用。

```
$groupBy = 'PropertyViewer.ip_address'; 
$this->paginate = array( "fields" => (..., 'COUNT(PropertyViewer.id) AS total_rows),
                         "group" => array( $groupBy ),
                         "order" => array( "PropertyViewer.id desc" ) );
$view_info = $this->paginate( 'PropertyViewer', $conditions );
$this->set( 'view_info', $view_info );` 
```

或者，如果您需要经常使用它，您也可以在模型中创建一个虚拟字段。

# python - Flask 静态文件 Cache-Control

> ID：11356188
> 
> 赞同：22
> 
> 时间：2012-07-06T05:13:29.780
> 
> 标签：python, flask, cache-control, static-files

我正在尝试在开发过程中为我的 JS 文件设置合理的缓存过期时间。我有标准设置，其中 HTML、CSS 和 JS 位于`static`目录下。

[文档](http://flask.pocoo.org/docs/api/#flask.Flask.get_send_file_max_age)确实提到了这一点，但对于我来说，我无法让它发挥作用。我已经尝试了两种隐含的方法，首先

```
class MyFlask(flask.Flask):
    def get_send_file_max_age(self, name):
        if name.lower().endswith('.js'):
            return 60
        return flask.Flask.get_send_file_max_age(self, name)

app = MyFlask(__name__) 
```

和

```
app.config['SEND_FILE_MAX_AGE_DEFAULT'] = 60 
```

两者都没有效果，我 /static 下的 JS 文件仍然返回默认缓存超时，

```
Cache-Control: public, max-age=43200 
```

任何指针表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T07:51:26.700

您可能需要查看[网络资产](http://elsdoerfer.name/docs/webassets/)来管理缓存到期。它适用于开发和生产环境。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-01-24T23:51:40.653

我遇到了这个问题，在网上找不到适合我的答案。

然后我意识到我的静态文件根本不是从 Flask 提供的！Flask 只生成我的 HTML。静态文件由我的网络服务器直接提供（在我的例子中是 Apache，你的可能是 Nginx 或其他）。

以下是 Apache 的说明。

首先安装 mod_expires 模块：

`sudo a2enmod expires`

然后将这样的内容添加到您的`.htaccess`文件中：

```
ExpiresByType text/css "access plus 1 year"
ExpiresByType application/javascript "access plus 1 year"
ExpiresByType image/* "access plus 1 year" 
```

有关如何在[Apache 手册](https://httpd.apache.org/docs/2.2/mod/mod_expires.html)中配置它的更多详细信息。

# php - PHP Curl设置标题相同

> ID：11356192
> 
> 赞同：0
> 
> 时间：2012-07-06T05:14:09.227
> 
> 标签：php, curl, header

如何使用 PHP 使标题相同？我想在从 cURL 发送请求时将标头设置为相同。基本上，我可以通过在浏览器中输入来访问 url。但是在使用 PHP cURL 时，我无法访问该页面。所以，也许使标题相同可以解决这个问题。

发送实际请求时的标头：

```
Request Line:  GET /jlp.cgi?Flag=Html_Data&LogType=0&Dummy=1341550112739 HTTP/1.1

Host: <abc>

Proxy-Connection:  Keep Alive

Cookie: iR=548729 
```

原始请求中没有`Connection`和这样的字段。`Referer`两个请求中的所有其他字段 ( `User-Agent`, `Accept`, `Accept-Language`, `Accept-Encoding`) 都是相同的。

从 cURL 发送时的标头：

```
Request Line: GET /curlexp2.php?address=http%3A%2F%2F10.128.58.200%2Fjlp.cgi%3FFlag%3DHtml_Data%26LogType%3D0%26Dummy%3D1341550112739&submit=Log+In HTTP/1.1

Host: localhost

Connection: Keep Alive

Referer: http://localhost/exp2.php 
```

在这个 cURL 请求中没有`Proxy-Connection`和这样的字段。`Cookie`

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T05:22:59.097

使用 php 的 curl_setopt 函数并将所需的标头内容设置为数组。

```
curl_setopt(
 cur_resource,
 CURLOPT_HTTPHEADER,
 array(
  "Content-Type: application/x-www-form-urlencoded",
  "Content-Length: " . strlen($data),
  "Referrer": "...",
 )
); 
```

# android - android - 使用 webview 或 videoview 在应用程序中闪烁实时流

> ID：11356194
> 
> 赞同：1
> 
> 时间：2012-07-06T05:14:21.037
> 
> 标签：android, webview, android-videoview, live-streaming

我正在尝试制作一个在 android 应用程序中播放实时流的应用程序。

源码路径为：

```
"http://mediasuite.316networks.com/templates/livefull2.swf" 
```

这是一个flash文件，用adobe flash player播放。

我都看过`VideoView`和`WebView`。

所以我有几个问题：

1）假设 adobe flash 安装在 android 设备上（是的，可以通过浏览器播放流），我如何在应用程序中播放这个实时视频流？

2) 使用`VideoView`，我设法让 youtube 视频与`MediaController`. 但是有没有办法通过需要 Flash 的直播来做到这一点？

3) 最后，在我的情况下，我应该使用哪个视图在应用程序中播放此 Flash 直播视频？如何？

干杯!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-06T07:02:59.787

```
 mWebView.getSettings().setPluginsEnabled(true); 
```

已从 API 级别 18 弃用。这里是更多信息的[链接](https://stackoverflow.com/questions/19362049/setpluginsenabled-not-exist-for-webview)。

即使我正在搜索如何使用 VideoView 或 WebView 查看 Flash 内容。我也试过PhoneGap，但没有运气。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-12T14:34:10.290

```
mWebView = (WebView) findViewById(R.id.webView1);

        mWebView.getSettings().setJavaScriptEnabled(true);

        mWebView.getSettings().setPluginsEnabled(true);

        mWebView.setScrollBarStyle(WebView.SCROLLBARS_OUTSIDE_OVERLAY);

        mWebView.setBackgroundColor(Color.parseColor("#000000"));

        mWebView.loadUrl("http://mediasuite.316networks.com/templates/livefull2.swf");

        mWebView.getSettings().setJavaScriptEnabled(true);
        mWebView.getSettings().setPluginsEnabled(true); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T08:21:48.420

使用 webview，设置你的 flash 文件的 webview 内容，根据需要设置浏览器设置（全屏，启用插件）

不要忘记将 android:hardwareAccelerated="true" 添加到清单中

# python - 无法使用 Scrapy 跟踪链接

> ID：11356196
> 
> 赞同：1
> 
> 时间：2012-07-06T05:14:31.857
> 
> 标签：python, scrapy

我创建了一个扩展 CrawlSpider 的蜘蛛，并遵循了[http://scrapy.readthedocs.org/en/latest/topics/spiders.html上的建议](http://scrapy.readthedocs.org/en/latest/topics/spiders.html)

问题是我需要解析起始 url（恰好与主机名一致）和它包含的一些链接。

所以我定义了一个规则，比如：`rules = [Rule(SgmlLinkExtractor(allow=['/page/d+']), callback='parse_items', follow=True)]`，但什么也没发生。

然后我尝试定义一组规则，例如：`rules = [Rule(SgmlLinkExtractor(allow=['/page/d+']), callback='parse_items', follow=True), Rule(SgmlLinkExtractor(allow=['/']), callback='parse_items', follow=True)]`. 现在的问题是蜘蛛会解析所有内容。

我如何告诉蜘蛛解析 _start_url_ 以及它包含的一些链接？

**更新：**

我试图覆盖该`parse_start_url`方法，所以现在我可以从起始页获取数据，但它仍然不遵循使用 a 定义的链接`Rule`：

```
class ExampleSpider(CrawlSpider):
  name = 'TechCrunchCrawler'
  start_urls = ['http://techcrunch.com']
  allowed_domains = ['techcrunch.com']
  rules = [Rule(SgmlLinkExtractor(allow=['/page/d+']), callback='parse_links', follow=True)]

  def parse_start_url(self, response):
      print '++++++++++++++++++++++++parse start url++++++++++++++++++++++++'
      return self.parse_links(response)

  def parse_links(self, response):
      print '++++++++++++++++++++++++parse link called++++++++++++++++++++++++'
      articles = []
      for i in HtmlXPathSelector(response).select('//h2[@class="headline"]/a'):
          article = Article()
          article['title'] = i.select('./@title').extract()
          article['link'] = i.select('./@href').extract()
          articles.append(article)

      return articles 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T15:01:34.253

您忘记将字母 d 反斜杠转义为`\d`：

```
>>> SgmlLinkExtractor(allow=r'/page/d+').extract_links(response)
[]
>>> SgmlLinkExtractor(allow=r'/page/\d+').extract_links(response)
[Link(url='http://techcrunch.com/page/2/', text=u'Next Page',...)] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T20:53:52.033

我过去也遇到过类似的问题。
我坚持使用 BaseSpider。

尝试这个：

```
from scrapy.spider import BaseSpider
from scrapy.selector import HtmlXPathSelector
from scrapy.http import Request
from scrapy.contrib.loader import XPathItemLoader

from techCrunch.items import Article

class techCrunch(BaseSpider):
    name = 'techCrunchCrawler'
    allowed_domains = ['techcrunch.com']

    # This gets your start page and directs it to get parse manager
    def start_requests(self):
        return [Request("http://techcrunch.com", callback=self.parseMgr)]

    # the parse manager deals out what to parse and start page extraction
    def parseMgr(self, response):
        print '++++++++++++++++++++++++parse start url++++++++++++++++++++++++'
        yield self.pageParser(response)

        nextPage = HtmlXPathSelector(response).select("//div[@class='page-next']/a/@href").extract()
        if nextPage:
            yield Request(nextPage[0], callback=self.parseMgr)

    # The page parser only parses the pages and returns items on each page call
    def pageParser(self, response):
        print '++++++++++++++++++++++++parse link called++++++++++++++++++++++++'
        loader = XPathItemLoader(item=Article(), response=response)
        loader.add_xpath('title', '//h2[@class="headline"]/a/@title')
        loader.add_xpath('link', '//h2[@class="headline"]/a/@href')
        return loader.load_item() 
```

# xcode - Xcode/Git 存储库错误：“请验证工作副本是否可访问，然后重试。”

> ID：11356199
> 
> 赞同：2
> 
> 时间：2012-07-06T05:14:54.353
> 
> 标签：xcode, git, bitbucket

这是我采取的步骤。

1.  我打开 Xcode (4.3.3) 管理器并选择*Checkout 或 Clone Repository*
2.  我选择位置[https://MyUsername@bitbucket.org/MyUsername/myrepo.git](https://MyUsername@bitbucket.org/MyUsername/myrepo.git)
3.  按*克隆*按钮，它成功地将它克隆到我的本地磁盘上
4.  所以我打开项目的本地副本并对其进行一些更改。
5.  当我尝试提交更改（或执行任何其他与 git 相关的操作）时，我收到以下错误：

> **无法访问工作副本“MyAppName”。**
> 
> *请验证工作副本是否可访问，然后重试。*

但是，我可以使用命令行在终端应用程序中执行提交（和其他类型的 git 操作）而不会出现任何问题。

我尝试重新启动计算机，删除所有 Xcode 设置，但没有任何帮助。

**更新**：我今天又试了一次，现在效果很好。也许这是 Xcode 中的某种间歇性错误。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-10T10:10:40.567

每当这种情况发生在我身上（并且经常发生）时，我都会执行以下操作：

1-关闭项目 2-打开管理器 3-进入存储库选项卡。

如果您当前的工作副本已经添加到列表中，则在管理器中导航到它，然后双击 .xcodeproj 项目。这将在 XCode 中重新打开项目，您会发现现在 SCM 操作可以正常工作了。

如果您当前的工作副本尚未添加到列表中，请按左下角的 + 按钮，选择“添加工作副本”，导航到包含 .xcodeproj 的文件夹并打开此文件夹。

现在双击 .xcodeproj 文件，该项目将在 XCode 中打开。

这一切都再次正常工作......

不知道为什么这会让事情变得正常......但确实如此

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-28T07:42:57.870

我也有同样的问题。如果您在项目路径中有 ~/ ，就会发生这种情况。当您从管理器打开项目时，工作正常。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-09T06:43:00.617

这是Xcode的一个错误！当您直接从对话框的 Home 文件夹中搜索 xxx.xcodeproj 时，Xcode 将使用它`~/xxx/xxx`作为 SVN/Git 路径，这是完全错误的。

所以你应该避免这种情况，而是从“/”路径搜索。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-06T08:59:58.183

这不是您可能正在寻找的答案，但我在使用远程 git 存储库 (Github) 和 Xcode 时遇到了类似的问题。

我最终使用了一个 GUI 工具“SourceTree”，这是一个很好且易于使用的工具，可以将您的代码从本地 Git 拉/推到远程 Git 存储库。试试[http://sourcetreeapp.com/](http://sourcetreeapp.com/)

# php - 传递数据到uploadify

> ID：11356207
> 
> 赞同：2
> 
> 时间：2012-07-06T05:15:48.680
> 
> 标签：php, javascript, jquery, uploadify

好的，我有一个表单下拉菜单

```
<select name="select_category" id="select_category">
<option value="cheese-cakes">Cheesecakes</option>
<option value="fruit-cakes">Fruitcakes</option>
</select> 
```

和一个隐藏的文本输入

```
<input type="hidden" id="category_container" /> 
```

在我的 jquery/javascript 中

```
$('#select_category').change(function(){
var cat = $('#select_category option:selected').attr('value');
$('#category_container').attr('value',cat);
}); 
```

上传

```
var plug = '<?php echo plugins_url('plugin_name') ?>'; 
$('#file_upload').uploadify({
'formData'  : {'cat_name' : $('#category_container').attr('value')},
swf'      : plug + '/uploadify/uploadify.swf',
'uploader' : plug + '/uploadify/uploadify.php'
}); 
```

我想将文本框#category_container 的值作为发布数据传递并将其发送到uploadify.php，以便保存的文件名是传递的文本框/数据的值。

问题是，有一个文件已上传，但没有文件名。例如：它只上传 '.png' 、 '.jpg' 文件

上传.php

```
$name = $_GET['cat_name'];

$tempFile = $_FILES['Filedata']['tmp_name'];
$targetPath = $targetFolder;
$targetFile = rtrim($targetPath,'/') . '/' . $_FILES['Filedata']['name'];

$path = pathinfo($targetFile);

$newTargetFile = $targetFolder.$name.'.'.$path['extension'];

// Validate the file type
$fileTypes = array('jpg','jpeg','gif','png'); // File extensions
$fileParts = pathinfo($_FILES['Filedata']['name']);

if (in_array($fileParts['extension'],$fileTypes)) {
    move_uploaded_file($tempFile,$newTargetFile);
    echo $newTargetFile;
} else {
    echo 'Invalid file type.';
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T05:28:34.607

缺少此代码。

```
'onUploadStart':function(file){
   $('#file_upload').uploadify('settings','formData',{'cat_name' : $('#category_image_name').val()});
} 
```

问题关闭。

# jquery - 删除 jQuery 对话框中的窗口关闭按钮

> ID：11356209
> 
> 赞同：0
> 
> 时间：2012-07-06T05:16:25.100
> 
> 标签：jquery

我想删除jQuery提供的窗口关闭按钮。

```
$(function () {
    $('form').submit(function () {

        $("#popUp").dialog({
            modal: true,
            minWidth: 700
        });            
        $('div').close({ onload: function () {
            $('#popUp').remove();
        } 
        });
    });
}); 
```

此代码不起作用。如何删除关闭按钮？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T05:18:33.507

通过**CSS**

```
.ui-dialog-titlebar-close{
    display: none;
} 
```

或**jQuery**

```
$(function () {
    $('form').submit(function () {

        $("#popUp").dialog({
            modal: true,
            minWidth: 700
        }); 
     $("#popUp").dialog("widget").find(".ui-dialog-titlebar-close").hide();           

    });
}); 
```

# javascript - 无法使用相对路径加载 css/js

> ID：11356214
> 
> 赞同：0
> 
> 时间：2012-07-06T05:17:07.797
> 
> 标签：javascript, ruby-on-rails

我在 ROR 项目中得到了一个带有 css 和 js 的 html

```
/public/foo/index.html  
/public/foo/js/main.js  
/public/foo/css/main.css 
```

并在 index.html 中以相对路径结束 js & css

```
<script type="text/javascript" src="js/main.js"></script>  
<link href="css/main.css" rel="stylesheet"> 
```

我将以下内容添加到`route`

```
match '/foo', :to => redirect('/public/foo/index.html') 
```

所以现在我可以访问索引，`0.0.0.0/foo`
但当然不能加载 css & js

那么如何在不编辑 index.html 中的路径的情况下加载 css 和 js？

我必须将 css 和 js 移动到另一个位置吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T05:38:39.010

最好坚持使用 rails 标准并将 js 和 css 放在各自的 app/assets 目录下（javascripts 或样式表）

# html - 你如何为帖子修改wordpress css？

> ID：11356215
> 
> 赞同：1
> 
> 时间：2012-07-06T05:17:09.393
> 
> 标签：html, wordpress, css

所以，我使用 wordpress.com 来运行我的博客。我已经使用自定义 CSS 支付了升级费用。现在我想更改首页上帖子的格式。我一直在 Chrome 上使用类似于 Firebug 的“检查元素”来查看所有内容都有什么类并更改 CSS。

除了帖子之外，它很容易。每个帖子，显然都有自己的类。

我的最新帖子是 class="post-190"

但是，它之前的帖子是 class="post-188" 等......你如何编写一个 CSS 来包含所有 post-##

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T05:25:31.367

您可以使用这些属性选择器

> [class|=post]
> 一个元素，其“class”属性具有以连字符分隔的值列表（从左侧开始）以“post”开头
> 
> [class^=post]
> 一个“class”属性值以字符串“post”开头的元素

[来源](http://www.w3.org/TR/selectors/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T05:55:54.740

从基本的`TwentyEleven Wordpress theme`假设你想给这篇文章添加边框，这个类的结构是从`wp-includes/post-template.php`文件中形成的。

这个方法正在为这篇文章创建类——`get_post_class()`

![在此处输入图像描述](../Images/051bea2da9a26f95804f87d1900c05a3.png)

然后在模板中为我的页面添加样式`content-aside.php`，我希望这是您正在寻找的，如果您有问题，请告诉我。

# php - 如何用 JS 和 PHP 实现 HMAC

> ID：11356216
> 
> 赞同：2
> 
> 时间：2012-07-06T05:17:13.993
> 
> 标签：php, javascript, hmac

我想用 PHP 和 JS 实现一个渐进式 hmac。我想我用crypto.js弄明白了js

```
var hmac = CryptoJS.algo.HMAC.create(CryptoJS.algo.SHA256, "Secret Passphrase");

hmac.update("Message Part 1");
hmac.update("Message Part 2");
hmac.update("Message Part 3");

var hash = hmac.finalize(); 
```

直接取自 crypto.js 我试图弄清楚如何在服务器端使用 PHP 5.3 复制它

对此的任何帮助都会很棒！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T05:22:50.237

您可以使用[hash_init()](http://www.php.net/manual/en/function.hash-init.php)、[hash_update()](http://www.php.net/manual/en/function.hash-update.php)和[hash_final()](http://www.php.net/manual/en/function.hash-final.php)：

```
$ctx = hash_init('sha256', HASH_HMAC, 'Secret Passphrase');
hash_update($ctx, 'Message Part 1');
hash_update($ctx, 'Message Part 2');
hash_update($ctx, 'Message Part 3');
$result = hash_final($ctx);

echo $result; 
```

# c# - 索引超出范围异常错误

> ID：11356222
> 
> 赞同：1
> 
> 时间：2012-07-06T05:17:56.660
> 
> 标签：c#, winforms, visual-studio-2010, visual-studio, textbox

试图将所有文本框值放入一维、二维数组

[http://content.screencast.com/users/TT13/folders/Jing/media/7689e48c-9bd6-4e22-b610-656b8d5dcaab/2012-07-06_0347.png](http://content.screencast.com/users/TT13/folders/Jing/media/7689e48c-9bd6-4e22-b610-656b8d5dcaab/2012-07-06_0347.png)

```
int[] xMatrix = new int[6], yMatrix = new int[6];
            int[,] aMatrix = new int[6, 6], bMatrix = new int[6, 6], cMatrix = new int[6, 6];

            foreach (Control control in this.Controls)
            {
                if (control is TextBox)
                {
                    string pos = control.Name.Substring(1);
                    if (control.Name.StartsWith("a"))
                    {
                        int matrixPos = Convert.ToInt32(pos);
                        int x = matrixPos / 10;
                        int y = matrixPos % 10;
                        aMatrix[x, y] = Convert.ToInt32(control.Text);
                    }
                    else if (control.Name.StartsWith("b"))
                    {
                        int matrixPos = Convert.ToInt32(pos);
                        int x = matrixPos / 10;
                        int y = matrixPos % 10;
                        bMatrix[x, y] = Convert.ToInt32(control.Text);
                    }
                    else if (control.Name.StartsWith("c"))
                    {
                        int matrixPos = Convert.ToInt32(pos);
                        int x = matrixPos / 10;
                        int y = matrixPos % 10;
                        cMatrix[x, y] = Convert.ToInt32(control.Text);
                    }
                    else if (control.Name.StartsWith("x"))
                    {
                        int arrayPos = Convert.ToInt32(pos);
                        xMatrix[arrayPos] = Convert.ToInt32(control.Text);
                    }
                    else if (control.Name.StartsWith("y"))
                    {
                        int arrayPos = Convert.ToInt32(pos);
                        yMatrix[arrayPos] = Convert.ToInt32(control.Text); // <== ERROR LINE
                    }
} 
```

收到错误信息

![在此处输入图像描述](../Images/6305f8cb03976deead4889b5d480048d.png)

这里有给定的值

![在此处输入图像描述](../Images/988bc0aa84287a4dde595c0cf1780920.png)

我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T05:22:20.357

我认为你在 arrayPos 中获得了价值`>= 6`，这就是你得到这个异常的原因，因为`yMatrix`它被定义为一个包含 6 个元素的数组。

```
int arrayPos = Convert.ToInt32(pos); 
```

这里 pos 来自 `string pos = control.Name.Substring(1);`，放一个调试器，看看你得到了什么值`pos`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T05:26:46.673

当这条线运行时：

```
int arrayPos = Convert.ToInt32(pos); 
```

它可能导致 arrayPos 为 6（猜测数据不足）。

数组是基于 0 的，这意味着您的数组的有效索引是 0 到 5。我敢打赌您的控件被命名为 1 到 6...

如果是这种情况，请从 arrayPos 中减去 1 以将范围 1..6 转换为范围 0..5。

```
int arrayPos = Convert.ToInt32(pos) - 1; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T05:32:31.657

似乎有一些名称以“y6”-“y9”开头的文本框（或派生控件）。检查您的 ...designer.cs 文件应该有助于找到那个文件。

或者你可以离开那条危险的道路，使用你的变量名来存储参数。相反，您可以使用 TextBoxes 的 Tag-Property 来存储相应的坐标。这将使事情变得更清晰，更不容易受到攻击。

# xpages - 如何使用 xe:jsonRpcService？

> ID：11356227
> 
> 赞同：2
> 
> 时间：2012-07-06T05:18:19.420
> 
> 标签：xpages, xpages-extlib

我正在尝试使用扩展库组件 Remote Service ( [`xe:jsonRpcService`](http://www.openntf.org/xspext/xpages%20extension%20library%20documentation.nsf/xpages-doc/xe_jsonRpcService.html))。我从[这里](http://www.openntf.org/blogs/openntf.nsf/d6plinks/NHEF-8CJARU)和[这里](http://xprentice.gbs.com/A55BAC/keithstric.nsf/default.xsp?documentId=3524156D3B4587E185257920000494C5)得到了一些提示。基本上我正在尝试使用 RPC 保存文档。问题是文档被保存，但它没有保存 XPage 上存在的任何字段。下面是示例 XPage 代码：

```
<?xml version="1.0" encoding="UTF-8"?>
<xp:view xmlns:xp="http://www.ibm.com/xsp/core" xmlns:xe="http://www.ibm.com/xsp/coreex">
    <xp:this.data>
        <xp:dominoDocument var="document1" formName="Test"></xp:dominoDocument>
    </xp:this.data>
    <xe:jsonRpcService id="jsonRpcService1" serviceName="service">
        <xe:this.methods>
            <xe:remoteMethod name="saveDoc">
                <xe:this.script><![CDATA[print(">> " + getComponent("inputText1").getValue());
document1.save();
return true;]]></xe:this.script>
            </xe:remoteMethod>
        </xe:this.methods>
    </xe:jsonRpcService>
    <xp:br></xp:br>
    <xp:inputText id="inputText1" defaultValue="testValue" value="#{document1.testField}"></xp:inputText>
    <xp:br></xp:br>
    <xp:button value="Save" id="button1">
        <xp:eventHandler event="onclick" submit="false">
            <xp:this.script><![CDATA[var deferred = service.saveDoc();
deferred.addCallback(
    function(result) {
        alert(result);
    }
);]]></xp:this.script>
        </xp:eventHandler>
    </xp:button>
</xp:view> 
```

我在这里所做的是，我创建了远程服务 ( `service`)，我在其中保存了当前文档 ( `document1`)。它保存文档但不将值保存在`inputText1`. 此外，当我尝试打印它的值时，`inputText1`它会显示在控制台上，但它没有被保存。

这是正确的方法吗？或者我在这里错过了什么。还有什么情况下使用`xe:jsonRpcService`是合理的？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-06T06:55:32.060

避免使用 JSON-RPC 进行此类操作有（至少）两个原因：

1.  该服务组件被设计为尽可能轻量级，因此，与 XPages 中的标准事件（自动发布整个 HTML 表单）不同，它只*发送*调用方法所需的数据，只接收方法返回的数据。在您的示例中，该方法不带参数，因此它实际上只是发送足够的信息让服务器知道要调用什么方法；同样，您只是返回一个布尔值，所以这就是将被发回的所有内容。如果您使用浏览器的开发工具（即 Firebug 或 Chrome 中的内置工具）来检查网络流量，您会在每个方向发送的 JSON 数据包中看到这一点。结果，服务器不“知道”任何您没有明确“告诉”它的东西。所以它比典型事件更快，因为你没有发布任何与你调用的方法没有明确相关的东西......*需要才能运行。*
**   组件关注性能的另一个副作用是它在 JSF 生命周期结束时跳过组件树序列化。如果您将当前页面保留在内存中，那应该不是问题，但如果您使用默认选项（将所有页面保存到磁盘），服务器将“忘记”对页面所做的任何更改在方法调用期间。您可以通过直接告诉视图根序列化其状态来逐个明确地覆盖此行为，但很容易忘记您必须手动执行此操作，这通常会在您看到指示服务器时引起很多挫败感-它正在做它应该做的事情，但实际的网页并没有反映这一点。最好只将任何 RPC 方法视为“只读”操作，除非您*

 *我的建议是将 JSON-RPC 视为“SOAP 减去愚蠢”。更客气地说，它在概念上与[Web 服务](http://en.wikipedia.org/wiki/Web_Services_Description_Language)相同，但没有 Web 服务的所有复杂性。因此，这些类型的服务非常适合在当前页面的上下文中有用的数据操作，而无需明确地绑定到当前页面的*状态*。

以下是一些 JSON-RPC 方法可能有用的操作示例：

*   通知新用户他们为其新帐户选择的用户名是否已被使用。与其绑定将发布整个表单的标准 keyup 事件，不如仅将一个字段的值发送到服务，根据站点注册记录查询它，然后发回布尔值。
*   对容易频繁更新的相关数据进行实时轮询。假设您正在开发 CRM，并且您想要显示您正在查看其帐户的公司的股票价格。使用 setInterval 定期向 RPC 询问更新的股票价格，然后在价格发生变化时进行手动客户端 DOM 操作，再次允许您以最少的网络开销执行一些复杂的操作。

这并不意味着您*不能*使用 RPC 进行写操作……而是任何需要完整、最新的上下文（即当前页面上每个字段的当前值）才能正确运行的操作，标准事件处理程序几乎总是更好的方法。*

# sql-server - 获取布尔值

> ID：11356231
> 
> 赞同：1
> 
> 时间：2012-07-06T05:18:36.723
> 
> 标签：sql-server, sql-server-2008-r2

我有两张桌子：

1) 博客相册：

```
Id  AlbumName   CoverPhoto          CreatedDate                    Description     
1   Onam        noImage.jpg     2012-07-05 10:54:46.977            Onam is an ancient festival which still survives in modern times. Kerala's rice harvest festival and the Festival of Rain Flowers, which fall on the Malayalam month of Chingam, celebrates the Asura King Mahabali's annual visit from Patala (the underworld). Onam is unique since Mahabali has been revered by the people of Kerala since prehistory.    According to the legend, Kerala witnessed its golden era during the reign of King Mahabali. The Brahma-Vaivarta Puranam explains that Lord Vishnu wante     
2   Birds       noImage.jpg     2012-07-05 11:02:48.667         
3   Nature    gold-fish.jpg     2012-07-05 11:03:36.503 
```

2\. 博客照片：

```
 Id  AlbumId PhotoName                  AddedDate            
    29  1   Photo0364.jpg      2012-07-05 11:01:18.270          
    30  1   Photo0380.jpg      2012-07-05 11:01:35.723         
    31  1   Photo0404.jpg      2012-07-05 11:01:47.717          
    32  1   Photo0404.jpg      2012-07-05 11:02:34.457          
    33  2   f.jpg              2012-07-05 11:03:03.300          
    34  2   g.jpg              2012-07-05 11:03:12.917         
    35  3   image005.jpg       2012-07-05 11:03:45.367          
    36  3   1.jpg              2012-07-05 11:03:57.837          
    37  3   2.jpg              2012-07-05 11:04:05.580          
    38  3   na.jpg             2012-07-05 11:04:17.337          
    39  3   gold-fish.jpg      2012-07-05 11:06:29.453 
```

我写了一个存储过程来列出 BlogPhoto 的详细信息：

```
ALTER PROCEDURE [dbo].[BlogPhotoDetailsById]
    (
        @Id int
    )
    AS
    BEGIN
        SELECT [HRM_BlogPhoto].[Id] 
              ,[HRM_BlogPhoto].[AlbumId] 
              ,[HRM_BlogPhoto].[PhotoName] 
              ,[HRM_BlogPhoto].[AddedDate] 
              ,[HRM_BlogPhoto].[Title] 
              ,[HRM_BlogPhoto].[ModifiedDate]
          FROM [HRM_BlogPhoto] 
        WHERE [HRM_BlogPhoto].[Id] = @Id 

    END 
```

我想要的是，如果 BlogPhoto.PhotoName 等于 BlogAlbum.CoverPhoto，那么在上面的存储过程中我需要显示“true”，如果不是，我需要显示“false”。

如何修改上述存储过程？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T05:30:51.553

下面将显示 BlogPhoto 是否是至少一个 BlogAlbum 的 CoverPhoto（注意一张照片可能在多个相册中）

~~ALTER PROCEDURE [dbo].[BlogPhotoDetailsById] (@Id int) 开始选择 [HRM_BlogPhoto].[Id] ,[HRM_BlogPhoto].[AlbumId] ,[HRM_BlogPhoto].[PhotoName] ,[HRM_BlogPhoto].[AddedDate] ,[ HRM_BlogPhoto].[Title] ,[HRM_BlogPhoto].[ModifiedDate] ,CASE WHEN EXISTS (SELECT * FROM [blogalbum] WHERE [blogalbum].CoverPhoto = [HRM_BlogPhoto].[PhotoName] ) THEN 'true' ELSE 'false' END AS [IsCoverPhoto] FROM [HRM_BlogPhoto] WHERE [HRM_BlogPhoto].[Id] = @Id~~

**编辑**

Bennor 的观点被采纳了。下面将避免嵌套循环，但请注意，由于可能出现重复的封面照片，您需要添加 distinct 关键字。

```
ALTER PROCEDURE [dbo].[BlogPhotoDetailsById]
(
    @Id int
)
AS
BEGIN
    SELECT DISTINCT 
          [HRM_BlogPhoto].[Id]
          ,[HRM_BlogPhoto].[AlbumId] 
          ,[HRM_BlogPhoto].[PhotoName] 
          ,[HRM_BlogPhoto].[AddedDate] 
          ,[HRM_BlogPhoto].[Title] 
          ,[HRM_BlogPhoto].[ModifiedDate]
          ,CASE WHEN [blogalbum].CoverPhoto IS NOT NULL
             THEN 'true' 
             ELSE 'false' 
           END AS [IsCoverPhoto]
      FROM [HRM_BlogPhoto] 
            LEFT OUTER JOIN [blogalbum]
            ON [blogalbum].CoverPhoto = [HRM_BlogPhoto].[PhotoName]
    WHERE [HRM_BlogPhoto].[Id] = @Id 
```

一个警告 - 出于性能原因，如果您采用这种方法，您应该确保在 [blogalbum].CoverPhoto 上有一个索引。

# java - 在 android 应用程序项目的 adt 20 中添加外部 jar

> ID：11356232
> 
> 赞同：1
> 
> 时间：2012-07-06T05:18:45.863
> 
> 标签：java, android, jar, adt

```
07-06 10:32:07.244: E/dalvikvm(319): Could not find class 'org.AstroVed.Panchanga.Moment', referenced from method com.astroved.horawatch.HoraWatchActivity.onCreate
07-06 10:32:07.244: W/dalvikvm(319): VFY: unable to resolve new-instance 186 (Lorg/AstroVed/Panchanga/Moment;) in Lcom/astroved/horawatch/HoraWatchActivity;
07-06 10:32:07.254: D/dalvikvm(319): VFY: replacing opcode 0x22 at 0x000f
07-06 10:32:07.254: D/dalvikvm(319): VFY: dead code 0x0011-00f6 in Lcom/astroved/horawatch/HoraWatchActivity;.onCreate (Landroid/os/Bundle;)V
07-06 10:32:08.224: D/dalvikvm(319): GC_CONCURRENT freed 692K, 49% free 3439K/6727K, external 2022K/2137K, paused 4ms+4ms
07-06 10:32:08.953: D/AndroidRuntime(319): Shutting down VM
07-06 10:32:08.953: W/dalvikvm(319): threadid=1: thread exiting with uncaught exception (group=0x40015560)
07-06 10:32:08.963: E/AndroidRuntime(319): FATAL EXCEPTION: main
07-06 10:32:08.963: E/AndroidRuntime(319): java.lang.NoClassDefFoundError: org.AstroVed.Panchanga.Moment
07-06 10:32:08.963: E/AndroidRuntime(319):  at com.astroved.horawatch.HoraWatchActivity.onCreate(HoraWatchActivity.java:71)
07-06 10:32:08.963: E/AndroidRuntime(319):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
07-06 10:32:08.963: E/AndroidRuntime(319):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
07-06 10:32:08.963: E/AndroidRuntime(319):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
07-06 10:32:08.963: E/AndroidRuntime(319):  at android.app.ActivityThread.access$1500(ActivityThread.java:117)
07-06 10:32:08.963: E/AndroidRuntime(319):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
07-06 10:32:08.963: E/AndroidRuntime(319):  at android.os.Handler.dispatchMessage(Handler.java:99)
07-06 10:32:08.963: E/AndroidRuntime(319):  at android.os.Looper.loop(Looper.java:123)
07-06 10:32:08.963: E/AndroidRuntime(319):  at android.app.ActivityThread.main(ActivityThread.java:3683)
07-06 10:32:08.963: E/AndroidRuntime(319):  at java.lang.reflect.Method.invokeNative(Native Method)
07-06 10:32:08.963: E/AndroidRuntime(319):  at java.lang.reflect.Method.invoke(Method.java:507)
07-06 10:32:08.963: E/AndroidRuntime(319):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
07-06 10:32:08.963: E/AndroidRuntime(319):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
07-06 10:32:08.963: E/AndroidRuntime(319):  at dalvik.system.NativeStart.main(Native Method) 
```

这是我在 adt 20 中的应用程序中遇到的错误.....如果我使用的是外部 jar。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T05:22:52.383

您会收到此错误的原因只有几个：

1.  这个类真的不存在。如果您使用官方示例中的代码并获取此代码，请确保您拥有该库的最新版本
2.  您尚未将 jar 添加到构建路径中。要解决此问题，请右键单击 Eclipse 中的 jar，然后执行 Build Path ► Add to Build Path。
3.  您的 jar 不在 /libs 文件夹中。当您将 jar 添加到构建路径时会发生这种情况，但较新版本的 ADT 需要它位于 /libs 中。将其放在那里并将其重新添加到构建路径中。
4.  您的 JAR 文件必须与 Android 兼容（不支持实际的 Java 7 编译类！）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T05:44:28.780

请记住始终将所有外部 jars 放在您的应用程序`libs`中。创建**AndroidManifest.xml所在的****libs**文件夹。然后在eclipse中刷新你的项目。然后执行以下操作：

 **1.  在 Eclipse 中右键单击您的项目
2.  点击属性。
3.  在属性窗口上单击 JavaBuildPath
4.  选择库选项卡
5.  单击 AddJARs 按钮并从项目的库中添加外部 jar

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-07T07:00:04.523

看到[这个线程](https://stackoverflow.com/questions/5737845/i-am-getting-a-java-lang-noclassdeffounderror)。他们似乎正在描述一个与您的问题非常相似的问题。也许您的清单中缺少您尝试开始的活动的一些权限？**

# xslt - 使用 XLS 将 OpenXML 转换为 word

> ID：11356233
> 
> 赞同：1
> 
> 时间：2012-07-06T05:18:52.480
> 
> 标签：xslt

我有几段风格为“书名”的段落我想将这些段落转换为标题为“书名”的单词表。XML如下：

```
<w:document xmlns:w="http://schemas.openxmlformats.org/wordprocessingml/2006/main">
<w:p>
<w:pPr>
<w:pStyle w:val="booktitle"/>…
</w:pPr>
<w:r>
<w:rPr/>
<w:t>First Paragraph</w:t>
</w:r>
</w:p>
<w:p>
<w:pPr>
<w:pStyle w:val="booktitle"/>…
</w:pPr>
<w:r>
<w:rPr/>
<w:t>second Paragraph</w:t>
</w:r>
</w:p>
</w:document> 
```

所需输出：

书名
第一段
第二段

我的 XSL 在这里：

```
<xsl:template match="w:p">
<xsl:choose>
  <xsl:when test=".//w:pStyle[@w:val='booktitle']">
    <w:tbl>
      <w:tblPr>
        <w:tblBorders>
          <w:top w:val="single" w:sz="1" />
          <w:left w:val="single" w:sz="1" />
          <w:bottom w:val="single" w:sz="1" />
          <w:right w:val="single" w:sz="1" />
          <w:insideH w:val="single" w:sz="1" />
          <w:insideV w:val="single" w:sz="1" />
        </w:tblBorders>
      </w:tblPr>
      <w:tblGrid>
        <w:gridCol w:w="1024" />
        <w:gridCol w:w="1024" />
      </w:tblGrid>
      <w:tr><w:tc><w:p><w:r><w:t>Booktitle</w:t></w:r></w:p></w:tc></w:tr>
      <w:tr>
        <w:tc>
          <w:tcPr>
            <w:tcW w:w="1024" />
          </w:tcPr>
    <w:p><w:r><w:t><xsl:value-of select=".//w:r/w:t"/></w:t></w:r></w:p>
        </w:tc>
      </w:tr>
      </w:tbl>
  </xsl:when>
</xsl:choose>
</xsl:template> 
```

我得到的输出像

书名
第一段
书名
第二段

标题为每个节点重复。请帮我解决这个问题。提前致谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T05:41:01.143

我认为您应该从`w:p`模板中获取表定义。您也可以`xsl:choose`通过使用过滤器来避免。

这是主模板，它定义了表格的开始和结束，并应用了`w:p`模板：

```
<xsl:template match="/">
  <w:tbl>
    <w:tblPr>
      <w:tblBorders>
        <w:top w:val="single" w:sz="1" />
        <w:left w:val="single" w:sz="1" />
        <w:bottom w:val="single" w:sz="1" />
        <w:right w:val="single" w:sz="1" />
        <w:insideH w:val="single" w:sz="1" />
        <w:insideV w:val="single" w:sz="1" />
      </w:tblBorders>
    </w:tblPr>
    <w:tblGrid>
      <w:gridCol w:w="1024" />
      <w:gridCol w:w="1024" />
    </w:tblGrid>
    <w:tr><w:tc><w:p><w:r><w:t>Booktitle</w:t></w:r></w:p></w:tc></w:tr>
    <xsl:apply-templates select="//w:p[//w:pStyle/@w:val='booktitle']" />
    </w:tbl>
</xsl:template> 
```

这是`w:p`简单地创建表格行的模板：

```
<xsl:template match="w:p">
  <w:tr>
    <w:tc>
      <w:tcPr>
        <w:tcW w:w="1024" />
      </w:tcPr>
      <w:p><w:r><w:t><xsl:value-of select=".//w:r//w:t"/></w:t></w:r></w:p>
    </w:tc>
  </w:tr>
</xsl:template> 
```

# java - 使用 Javamail API 从 yahoo id 向其他电子邮件 id 发送邮件

> ID：11356237
> 
> 赞同：3
> 
> 时间：2012-07-06T05:19:29.967
> 
> 标签：java, smtp, jakarta-mail, sendmail, yahoo-mail

我无法使用 Java 邮件 API 从我的 yahoo id 发送电子邮件。我尝试了谷歌的不同选项，但失败了。请看看我下面的代码，如果我遗漏了什么，请告诉我。在我看来，***雅虎***不提供免费发送邮件的服务，但我不确定。请提供您对此的看法。

```
import javax.mail.*;
import javax.mail.internet.*;
import java.util.Properties;

public class MailExample {
    private static final String SMTP_HOST_NAME = "smtp.mail.yahoo.com";
    private static final int SMTP_HOST_PORT = 587;//465,587,25
    private static final String SMTP_AUTH_USER = "dummyrls@yahoo.com";
    private static final String SMTP_AUTH_PWD  = "my password";

    public static void main(String[] args) throws Exception{
       new MailExample().test();
    }

    public void test() throws Exception{
        Properties props = new Properties();

        props.put("mail.transport.protocol", "smtp");
        props.put("mail.smtp.host", SMTP_HOST_NAME);
        props.put("mail.smtp.auth", "true");
        // props.put("mail.smtps.quitwait", "false");

        Session mailSession = Session.getDefaultInstance(props);
        mailSession.setDebug(true);
        Transport transport = mailSession.getTransport();

        MimeMessage message = new MimeMessage(mailSession);
        message.setSubject("Testing SMTP-SSL");
        message.setContent("This is a test", "text/plain");

        message.addRecipient(Message.RecipientType.TO,
             new InternetAddress("rlss@abc.com"));

        transport.connect
          (SMTP_HOST_NAME, SMTP_HOST_PORT, SMTP_AUTH_USER, SMTP_AUTH_PWD);

        transport.sendMessage(message,
            message.getRecipients(Message.RecipientType.TO));
        transport.close();
    }
} 
```

上面的代码适用于 Gmail，但对于 Yahoo，它给出的错误如下：

```
DEBUG: setDebug: JavaMail version 1.4.1 DEBUG: getProvider() 
  returning javax.mail.Provider[TRANSPORT,smtp,com.sun.mail.smtp.SMTPTransport,
  Sun Microsystems, Inc.,1.4.1] DEBUG SMTP: useEhlo true, 
  useAuth true 
DEBUG SMTP: trying to connect to host "smtp.mail.yahoo.com", port 587, 
  isSSL false Exception in thread "main" 
javax.mail.MessagingException: Could not connect to SMTP 
  host: smtp.mail.yahoo.com, port: 587;   nested exception is:  
java.net.ConnectException: Connection timed out: connect    
at com.sun.mail.smtp.SMTPTransport.openServer(SMTPTransport.java:1391)  
at com.sun.mail.smtp.SMTPTransport.protocolConnect(SMTPTransport.java:412)  
at javax.mail.Service.connect(Service.java:288)     
at com.sample.mailexample.MailExample.test(MailExample.java:313)    
at com.sample.mailexample.MailExample.main(MailExample.java:291) Caused by: 
   java.net.ConnectException: Connection timed out: connect     
at java.net.PlainSocketImpl.socketConnect(Native Method)    
at java.net.PlainSocketImpl.doConnect(Unknown Source)   
at java.net.PlainSocketImpl.connectToAddress(Unknown Source)    
at java.net.PlainSocketImpl.connect(Unknown Source)     
at java.net.SocksSocketImpl.connect(Unknown Source)     
at java.net.Socket.connect(Unknown Source)  
at java.net.Socket.connect(Unknown Source)  
at com.sun.mail.util.SocketFetcher.createSocket(SocketFetcher.java:233)     
at com.sun.mail.util.SocketFetcher.getSocket(SocketFetcher.java:189)    
at com.sun.mail.smtp.SMTPTransport.openServer(SMTPTransport.java:1359)  
... 4 more 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-07T08:12:37.270

使用 JavaMail API 从 Yahoo 发送电子邮件的完整代码如下：

```
package ripon.java.mail;
import java.util.*;
import javax.mail.*;
import javax.mail.internet.*;

public class SendFromYahoo
{
public static void main(String [] args)
{    
    // Sender's email ID needs to be mentioned
     String from = "test123@yahoo.com";
     String pass ="test123";
    // Recipient's email ID needs to be mentioned.
   String to = "riponalwasim@yahoo.com";
   String host = "smtp.mail.yahoo.com";

   // Get system properties
   Properties properties = System.getProperties();
   // Setup mail server
   properties.put("mail.smtp.starttls.enable", "true");
   properties.put("mail.smtp.host", host);
   properties.put("mail.smtp.user", from);
   properties.put("mail.smtp.password", pass);
   properties.put("mail.smtp.port", "587");
   properties.put("mail.smtp.auth", "true");

   // Get the default Session object.
   Session session = Session.getDefaultInstance(properties);

   try{
      // Create a default MimeMessage object.
      MimeMessage message = new MimeMessage(session);

      // Set From: header field of the header.
      message.setFrom(new InternetAddress(from));

      // Set To: header field of the header.
      message.addRecipient(Message.RecipientType.TO,
                               new InternetAddress(to));

      // Set Subject: header field
      message.setSubject("This is the Subject Line!");

      // Now set the actual message
      message.setText("This is actual message");

      // Send message
      Transport transport = session.getTransport("smtp");
      transport.connect(host, from, pass);
      transport.sendMessage(message, message.getAllRecipients());
      transport.close();
      System.out.println("Sent message successfully....");
   }catch (MessagingException mex) {
      mex.printStackTrace();
   }
}
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-06T05:42:07.973

试试这个代码

```
public class SendMail {

    String host, port, emailid,username, password;
    Properties props = System.getProperties();
    Session l_session = null;

    public BSendMail() {
        host = "smtp.mail.yahoo.com";
        port = "587";
        emailid = "a@yahoo.com";
        username = "a";
        password = "pwd";

        emailSettings();
        createSession();
        sendMessage("a@yahoo.com", "rahul@gmail.com","Test","test Mail");
    }

    public void emailSettings() {
        props.put("mail.smtp.host", host);
        props.put("mail.smtp.auth", "true");
        props.put("mail.debug", "false");
        props.put("mail.smtp.port", port);
//        props.put("mail.smtp.socketFactory.port", port);
//        props.put("mail.smtp.socketFactory.class", "javax.net.ssl.SSLSocketFactory");
//        props.put("mail.smtp.socketFactory.fallback", "false");

    }

    public void createSession() {

        l_session = Session.getInstance(props,
                new javax.mail.Authenticator() {
                    protected PasswordAuthentication getPasswordAuthentication() {
                        return new PasswordAuthentication(username, password);
                    }
                });

        l_session.setDebug(true); // Enable the debug mode

    }

    public boolean sendMessage(String emailFromUser, String toEmail, String subject, String msg) {
        //System.out.println("Inside sendMessage 2 :: >> ");
        try {
            //System.out.println("Sending Message *********************************** ");
            MimeMessage message = new MimeMessage(l_session);
            emailid = emailFromUser;
            //System.out.println("mail id in property ============= >>>>>>>>>>>>>> " + emailid);
            //message.setFrom(new InternetAddress(emailid));
            message.setFrom(new InternetAddress(this.emailid));

            message.addRecipient(Message.RecipientType.TO, new InternetAddress(toEmail));
            message.addRecipient(Message.RecipientType.BCC, new InternetAddress(AppConstants.fromEmail));
            message.setSubject(subject);
            message.setContent(msg, "text/html");

            //message.setText(msg);
            Transport.send(message);
            System.out.println("Message Sent");
        } catch (MessagingException mex) {
            mex.printStackTrace();
        } catch (Exception e) {
            e.printStackTrace();
        }//end catch block
        return true;
    }

} 
```

# c# - 在 global.asax 中压缩 aspx 页面时出现异常

> ID：11356240
> 
> 赞同：1
> 
> 时间：2012-07-06T05:19:36.503
> 
> 标签：c#, asp.net, compression, gzip

我正在尝试压缩我网站的网页以提高其速度。我完成了 JS 和 CSS 压缩。现在我想在响应出来之前压缩我的 aspx 页面。我在我网站的 global.asax 文件中使用此代码

```
void Application_Start(object sender, EventArgs e)
{
    HttpContext incoming = HttpContext.Current;
    string oldpath = incoming.Request.Path.ToLower();
    incoming.Response.Filter = new System.IO.Compression.GZipStream(incoming.Response.Filter, System.IO.Compression.CompressionMode.Compress);
    HttpContext.Current.Response.AppendHeader("Content-encoding", "gzip");
    HttpContext.Current.Response.Cache.VaryByHeaders["Accept-encoding"] = true;
} 
```

它不会在视觉工作室中给出错误。但是当我将此代码放在 IIS 上时，它会给出错误/异常

```
Exception Details: System.Web.HttpException: Request is not available in this context 
```

任何人都可以建议或解释我应该怎么做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T05:35:55.003

`Application_Start`当您的 Web 应用程序启动并且此启动与任何页面请求无关时执行，因为此时尚未发生页面请求。`Request`上不可用`Application_Start`。

你可以`Server.MapPath()`改用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T05:42:49.800

这里的问题是一个难以捉摸的问题，内置的 Visual Studio cassini Web 服务器将使用在第一个请求时启动应用程序的旧模式运行请求，这与IIS中的**托管管道模式 = 经典模式相同。**这意味着有一个请求对象供您立即访问，因为请求是触发 app_start 的原因。

但是，当您将它放到 IIS 7 框中时，它的**Managed pipeline mode = Integrated**会失败。这是因为集成管道意味着站点在应用程序池启动后立即启动，这意味着没有请求对象可以挂接。

为了解决这个问题，我建议让 IIS 压缩内容而不是手动完成，[这个](http://blog.wassupy.com/2009/08/enabling-dynamic-http-compression-in.html)链接有帮助你入门的详细信息，[这里](http://weblogs.asp.net/owscott/archive/2009/02/22/iis-7-compression-good-bad-how-much.aspx)有一个关于它可以产生的差异的很好的概述。

如果您真的决定在应用程序中进行压缩，我建议将其实现为 HttpModule，类似于[此](http://www.java2s.com/Tutorial/ASP.NET/0200__File-Directory/CompressingHTTPoutputwithanHttpModuleC.htm)示例。

[编辑：这里](http://forums.iis.net/p/1163687/1930001.aspx)gzipping HttpModule 的另一个实现。

# ruby - 红宝石中的简单拼写检查方法/宝石？

> ID：11356249
> 
> 赞同：10
> 
> 时间：2012-07-06T05:20:59.083
> 
> 标签：ruby, spell-checking, aspell, spelling, hunspell

我正在寻找一种相对快速的方法来检查单词是否拼写错误，无论是使用 gem 还是 API。

我尝试过使用几个 gem——raspell、ffi-aspell、hunspell-ffi、spell_cheker 和 spellchecker——每个都有不同的错误。

我对 ruby​​ 很陌生，希望有一个简单的解决方案（我正在处理很多短文本文件，并且想要计算拼写错误的单词的百分比），其中不包括从头开始构建一些东西。

尝试 ffi-aspell 时，出现以下错误：

```
/Users/ntaylorthompson/.rvm/gems/ruby-1.9.2-p320/gems/ffi-aspell-0.0.3/lib/ffi/aspell/speller.rb:121: [BUG] Segmentation fault
ruby 1.9.2p320 (2012-04-20 revision 35421) [x86_64-darwin11.4.0]

-- control frame ----------
c:0005 p:---- s:0019 b:0019 l:000018 d:000018 CFUNC  :speller_check
c:0004 p:0113 s:0013 b:0013 l:000012 d:000012 METHOD /Users/ntaylorthompson/.rvm/gems/ruby-1.9.2-p320/gems/ffi-aspell-0.0.3/lib/ffi/aspell/speller.rb:121
c:0003 p:0049 s:0007 b:0007 l:0005a8 d:0005d0 EVAL   ffi-aspell_test.rb:5
c:0002 p:---- s:0004 b:0004 l:000003 d:000003 FINISH
c:0001 p:0000 s:0002 b:0002 l:0005a8 d:0005a8 TOP   
---------------------------
-- Ruby level backtrace information ----------------------------------------
ffi-aspell_test.rb:5:in `<main>'
/Users/ntaylorthompson/.rvm/gems/ruby-1.9.2-p320/gems/ffi-aspell-0.0.3/lib/ffi/aspell/speller.rb:121:in `correct?'
/Users/ntaylorthompson/.rvm/gems/ruby-1.9.2-p320/gems/ffi-aspell-0.0.3/lib/ffi/aspell/speller.rb:121:in `speller_check'

-- C level backtrace information -------------------------------------------

[NOTE]
You may have encountered a bug in the Ruby interpreter or extension libraries.
Bug reports are welcome.
For details: http://www.ruby-lang.org/bugreport.html

Abort trap: 6 
```

我将不胜感激（1）对上述方法的替代方法的建议或（2）使用上述 5 个 gem 的建议 - 所以我至少可以花时间调试最佳选择。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-07T22:17:57.610

raspell 不再维护，因此如果您有可用的 libaspell 标头，则 ffi-aspell 是一个不错的选择。

如果你不能让这些库工作，你可以只使用`aspell`二进制文件。以下方法将做到这一点（包括单元测试）：

```
# Returns the percentage of incorrect words per document
#
def spellcheck(filename)
  fail "File #{filename} does not exist" unless File.exists?(filename)

  words = Float(`wc -w #{filename}`.split.first)
  wrong = Float(`cat #{filename} | aspell --list | wc -l`.split.first)

  wrong / words
end

if $0 == __FILE__
  require 'minitest/autorun'
  require 'tempfile'

  describe :spellcheck do
    def write(str)
      @file.write str
      @file.read
    end

    before do
      @file = Tempfile.new('document')
    end

    it 'fails when given a bad path' do
      -> { spellcheck('/tmp/does/not/exist') }.must_raise RuntimeError
    end

    it 'returns 0.0 if there are no misspellings' do
      write 'The quick brown fox'
      spellcheck(@file.path).must_equal 0.0
    end

    it 'returns 0.5 if 2/4 words are misspelled' do
      write 'jumped over da lacie'
      spellcheck(@file.path).must_be_close_to 0.5, 1e-8
    end

    it 'returns 1.0 if everything is misspelled' do
      write 'Da quyck bown foxx jmped oer da lassy dogg'
      spellcheck(@file.path).must_equal 1.0, 1e-8
    end

    after do
      @file.close
      @file.unlink
    end
  end
end 
```

`spellcheck()`假设您的路径上有`cat`、`wc`和`aspell`，并且默认字典是您想要使用的。单元测试仅适用于 Ruby 1.9——如果您正在运行 1.8，只需将其删除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-04T11:27:51.067

正如 jmdeldin 所说，raspell 不再被维护，ffi-aspell 是它的一个分支。

我用它玩了几分钟，它很容易使用：

1.  实例化一个指定语言的 FFI::Aspell::Speller 对象
2.  检查单词是否正确使用`speller.correct?(word)`
3.  获取一个单词的建议列表，使用`speller.suggestions(word)`

**注意**：到目前为止，我发现的更大限制是拼写器[的界面仅适用于单词。](https://github.com/YorickPeterse/ffi-aspell/blob/master/lib/ffi/aspell/speller.rb)如果要对整个文档进行拼写检查，则需要将其拆分为单词。这不是小事，尤其是如果您有 HTML 输入...

（这当然取决于 aspell，因此您需要使用 brew install aspell 或您喜欢的包管理器安装它）

# c++ - 为什么L2/L3/L4开发项目不用c++

> ID：11356254
> 
> 赞同：-1
> 
> 时间：2012-07-06T05:21:35.833
> 
> 标签：c++

我参与了许多 C++ 项目，主要是在与 VOIP 协议相关的应用程序领域。现在我必须转向 L3 和 L2 协议开发项目，我发现“C”是 L2/L3/L4 开发人员的首选语言。

现在我想知道与设备固件相关的应用程序，为什么使用石器时代语言开发协议。为什么人们不利用 OOPS 技术的好处？如果我试图说服他们改用 c++ 会谨慎吗？团队中的大多数开发人员都是 C 专家，不熟悉 C++。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-06T05:31:51.373

继续使用 C 有几个原因。

1.  有现有的 C 项目。谁来为将它们转换成 C++ 而买单？
2.  C++ 编译器（高质量）并非在每个平台上都可用。
3.  心理原因。当您按值传递和返回对象时，会左右创建临时对象。这不适用于小型系统。人们并不真正理解传递和返回引用完全解决了这个问题。还有其他类似的问题。
4.  最后。C有什么问题？有用！（不要修复没有损坏的东西）。

在 C++ 上编写与在 C 上相同的高性能代码是可能的，但这需要更好的理解、培训和代码控制纪律。普遍的看法是，这些缺陷是不可避免的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-06T06:23:45.417

如果您将 C 视为简单的“石器时代语言”，那么我认为您误解了人们为什么继续使用它。我喜欢并使用 C 和 C++。我喜欢它们都有不同的原因，也有不同的问题。

C 语言提供了一个计算机模型，它既（大部分）完整又非常容易理解，几乎没有什么惊喜。C++ 提供了一个非常复杂的模型，并且要求程序员了解很多细微差别以避免令人讨厌的意外。C++ 编译器自动做了很多事情（调用构造函数、析构函数、堆栈展开等）。这通常很好，但有时它会干扰跟踪错误。总的来说，我发现用 C 和 C++ 都可以很容易地击中自己的脚，但我发现在 C 中进行脚部手术要容易得多，这仅仅是因为它是一种更简单的语言模型。

计算机的 C 模型尽可能地接近组装，同时仍然具有合理的便携性。该语言几乎不会自动执行任何操作，并允许您进行各种疯狂的内存操作。这允许不安全的编程，但它也允许在几乎没有意外的环境中进行非常优化的编程。很容易准确地判断一行代码在 C 中的作用。在 C++ 中并非如此，编译器可以为您创建和销毁临时对象。我有 C++ 代码，它需要分析来揭示自动析构函数正在消耗大量的周期。这在 C 语言中永远不会发生，其中一行代码几乎没有什么意外。与过去相比，今天这不是一个问题。C++ 编译器在优化许多临时对象方面做得更好。这仍然可能是一个问题，

最后，用 C++ 编写的代码通常编译**缓慢**。罪魁祸首通常是模板，但消除模板通常会使您的 C++ 代码看起来很像 C。而且，我真的不能夸大这对生产力的影响程度。当您的调试-修复-重新编译-测试周期受到编译时间的限制时，它会降低生产力。是的，我知道并且喜欢预编译的头文件，但它们只能做这么多。

不要觉得我在这里是反 C++ 的。我喜欢并使用这种语言。拥有类、智能指针、std::vector、std::string 等很好。但是 C 是有生命力的，这是有原因的。

对于不同的观点，以及坚决反对 C++ 的观点，您至少应该略读一下[Linus Torvald](http://harmful.cat-v.org/software/c++/linus)对 C++ 的观点。他的论点值得思考，即使你不同意。

# javascript - 向 Jquery Slider 添加循环

> ID：11356255
> 
> 赞同：0
> 
> 时间：2012-07-06T05:21:53.683
> 
> 标签：javascript, jquery, slider

我有这段代码可以自动播放我的滑块，但在最后一张幻灯片上它只是停止了。我如何让它在最后一张幻灯片之后从头开始。谢谢你

我有一个滑块，它使用以下按钮进行导航。我将如何为此添加自动播放功能 - SetTimeout 功能？

谢谢

```
// Next Clicked jQuery('.ajax-next').click(function(){

        if ( jQuery(".ajax-portfolio-window").is(':animated') || jQuery(".ajax-portfolio-image-wrap").is(':animated') ) return;

        var total = jQuery('.portfolio-ajax').length;
        var index = jQuery('.ajax-gallery-navigation').attr("id");

        currindex=parseInt(index);
        nextIndex=currindex+1;
        if (nextIndex!=total) {
            jQuery('.portfolio-ajax').eq(nextIndex).trigger('click');
        }

        return false;

    });

    // Clicked Prev 

    jQuery('.ajax-prev').click(function(){

        if ( jQuery(".ajax-portfolio-window").is(':animated') || jQuery(".ajax-portfolio-image-wrap").is(':animated') ) return;

        var index = jQuery('.ajax-gallery-navigation').attr("id");
        if (index=='-1') { index='0'; }
        currindex=parseInt(index);
        prevIndex=currindex-1;
        if (prevIndex!=-1) {
            jQuery('.portfolio-ajax').eq(prevIndex).trigger('click');
        }

        return false;
    }); 
}

// Autoplay

setInterval(function(){
        // do you stuff here. for example
        jQuery('.ajax-next').click();
            }, 10000); // 10 sec interval 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T05:30:52.770

我不喜欢你的 html 标记，但你可以简化你的代码[next()](http://api.jquery.com/next/)和[prev()](http://api.jquery.com/prev/)。

无论如何，在你的情况下循环你的滑块，如果你达到总数，你需要将索引设置为 0。所以：

```
 if (nextIndex!=total) {
        jQuery('.portfolio-ajax').eq(nextIndex).trigger('click');
    } 
```

应改为：

```
 if (nextIndex == total - 1) {
        nextIndex = 0
    }
    jQuery('.portfolio-ajax').eq(nextIndex).trigger('click'); 
```

# facebook - Facebook 错误 191 和子域

> ID：11356256
> 
> 赞同：1
> 
> 时间：2012-07-06T05:22:17.313
> 
> 标签：facebook, subdomain

我有一个想要设置 Facebook 身份验证的应用程序。该应用程序使用松散的 MVC 框架，因此 Facebook 身份验证（重定向）的处理需要通过模块完成。由于这是在开发中，我正在处理一个开发 URL，它是一个子域。

我创建了一个应用程序，将其置于沙盒模式，并将应用程序域设置为“example.com”，将站点 URL 设置为“http://dev-site.example.com”。我的登录 URL 是通过当前的 Facebook PhP API 生成的，redirect_uri 是 /facebookauth/processResponse。我单击链接并获取....

FTR_Sandbox 发生错误。请稍后再试。

API错误代码：191 API错误描述：指定的URL不属于应用程序错误消息：无效的redirect_uri：应用程序配置不允许给定的URL。

我在这里不知所措，我尝试了很多不同的设置（添加域，包括子域，带有训练斜线，没有训练斜线）并且我一直收到该错误。

我究竟做错了什么！？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T05:33:11.710

如果您的应用程序 url 是 sub-domain.domain.com，则添加 sub-domain.domain.com 作为您的域

# windows - golang中当前运行的进程列表，windows版本

> ID：11356264
> 
> 赞同：8
> 
> 时间：2012-07-06T05:23:12.837
> 
> 标签：windows, go, winapi

windows下如何获取golang中当前正在运行的进程列表？

我需要类似的东西：

[Golang 中当前正在运行的进程列表](https://stackoverflow.com/questions/9030680/list-of-currently-running-process-in-golang)

但也可以在 Windows 下使用。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-10T14:03:36.250

我刚刚实现了您需要的功能（EnumProcess 如上所述 axw）。查看[https://github.com/AllenDang/w32](https://github.com/AllenDang/w32)。您可能想等到我的拉取请求通过 :) 关于如何使用的示例：[https ://gist.github.com/3083408](https://gist.github.com/3083408)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-06T06:45:52.797

您需要使用 Windows API 函数`EnumProcesses`。Windows 上的[syscall](http://golang.org/pkg/syscall/)包使您能够加载任意 DLL 及其函数（即通过 LoadLibrary/GetProcAddress）。这样你就可以进去`EnumProcesses`了`psapi.dll`。这为您提供了一个 PID 列表；然后，您可以使用 OpenProcess 和 EnumProcessModules 来获取进程名称。

可能有人已经完成了实现这一点的工作，但我什么都不知道。如果找不到任何东西，请查看 syscall 包的源代码（例如[src/pkg/syscall/zsyscall_windows_386.go](http://golang.org/src/pkg/syscall/zsyscall_windows_386.go)）并执行与其他 Windows API 函数类似的操作。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-03-31T13:58:57.750

根据系统调用包文档：此包已锁定。应迁移标准 Go 存储库之外的代码以使用 golang.org/x/sys 存储库中的相应包。

您可以使用 golang.org/x/sys/windows，它有 Process32First 和 Process32Next 让枚举系统进程。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-05-24T20:27:24.937

这似乎做到了：

```
package main
import "golang.org/x/sys/windows"

// unsafe.Sizeof(windows.ProcessEntry32{})
const processEntrySize = 568

func main() {
   h, e := windows.CreateToolhelp32Snapshot(windows.TH32CS_SNAPPROCESS, 0)
   if e != nil {
      panic(e)
   }
   p := windows.ProcessEntry32{Size: processEntrySize}
   for {
      e := windows.Process32Next(h, &p)
      if e != nil { break }
      s := windows.UTF16ToString(p.ExeFile[:])
      println(s)
   }
} 
```

[https://pkg.go.dev/golang.org/x/sys/windows#CreateToolhelp32Snapshot](https://pkg.go.dev/golang.org/x/sys/windows#CreateToolhelp32Snapshot)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-10-15T14:46:16.697

如果您使用[Windigo](https://github.com/rodrigocfd/windigo) ，代码会更简洁（为简洁起见，省略了错误检查）：

```
package main

import (
    "fmt"

    "github.com/rodrigocfd/windigo/win"
    "github.com/rodrigocfd/windigo/win/co"
)

func main() {
    pids, _ := win.EnumProcesses()

    for _, pid := range pids {
        hSnap, _ := win.CreateToolhelp32Snapshot(co.TH32CS_SNAPMODULE, pid)
        defer hSnap.CloseHandle()

        hSnap.EnumModules(func(me32 *win.MODULEENTRY32) {
            fmt.Printf("PID: %d, %s @ %s\n",
                me32.Th32ProcessID, me32.SzModule(), me32.SzExePath())
        })
    }
} 
```

或者，如果您只想要流程，而不需要模块：

```
package main

import (
    "fmt"

    "github.com/rodrigocfd/windigo/win"
    "github.com/rodrigocfd/windigo/win/co"
)

func main() {
    pids, _ := win.EnumProcesses()

    for _, pid := range pids {
        hSnap, _ := win.CreateToolhelp32Snapshot(co.TH32CS_SNAPPROCESS, pid)
        defer hSnap.CloseHandle()

        hSnap.EnumProcesses(func(pe32 *win.PROCESSENTRY32) {
            fmt.Printf("PID: %d @ %s\n",
                pe32.Th32ProcessID, pe32.SzExeFile())
        })
    }
} 
```

# ruby - nil:NilClass 的未定义方法“[]”在 Ruby 数组中循环时

> ID：11356268
> 
> 赞同：3
> 
> 时间：2012-07-06T05:23:40.450
> 
> 标签：ruby, ruby-on-rails-3

我有一个值的哈希值，我试图循环以在我的视图中显示这些值。

哈希设置为：

```
{:position=>#<Position id: 2, user_id: 1, title: "Something", city: "Denver", state: "CO",   
created_at: "2012-07-06 02:55:42", updated_at: "2012-07-06 02:55:42">, :experience=>[#
<Experience id: 4, user_id: 1, position_id: 2, description: "Did some stuff", created_at: 
"2012-07-02 06:24:33", updated_at: "2012-07-02 06:24:33">, #<Experience id: 6, user_id: 1, 
position_id: 2, description: "Did other stuff", created_at: "2012-07-02 06:24:33", 
updated_at: "2012-07-02 06:24:33">]} 
```

它是通过获取 ActiveRecord 结果并将它们插入到哈希中创建的（如果您想要更多详细信息，我很乐意添加它们）。

在我看来，我尝试遍历哈希：

```
<% for i in 0..@positions.length %>
  <%= @positions[i][:position][:title] %>
  <%= @positions[i][:position][:city] %>
<% end %> 
```

当我在浏览器中打开它时，我得到一个错误`undefined method '[]' for nil:NilClass`。如果我只使用`@positions[i]`，它将转储原始哈希（第一个，然后是第二个，依此类推）。当我添加时`[:position]`，它不起作用。我可以使用访问控制台中的值`@positions[0][:position][:title]`。当我尝试在控制台中编写循环时，我得到了同样的错误。

我知道这`i`很重要，因为我可以让它在浏览器中显示值并且它工作正常。

我尝试过使用`@positions.each do |job|`但遇到了同样的错误。我尝试在其他地方添加另一个索引：`@positions[i][:position][0]`.

基本上，我有两个模型：职位和经验。经验是一个孩子的定位。我想获得给定职位的经验，但只能获得某些经验，例如在特定时间范围内发生的经验。很可能有更好的方法来解决这个问题，我只是不知道，所以我愿意接受建议。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T05:31:41.507

看来您有一个 Postion 类的对象分配给键**:position**。因此，您可以通过访问器方法访问 title 和 city ，而不是使用`[]`.

```
<% @positions.each do |job| %>
  <%= job[:position].title %>
  <%= job[:position].city %>
<% end %> 
```

# c++ - 数字系统转换器不适用于特定编译器 (Dev-C++)

> ID：11356269
> 
> 赞同：0
> 
> 时间：2012-07-06T05:23:46.333
> 
> 标签：c++, c, converter

选择号 3（十进制到二进制）它适用于 Code:Blocks 具体来说，还没有在 Visual C++ 上尝试过，但是我们学校使用的是 Dev-C++，我不知道是什么原因导致了这个问题。我的意思是它在逻辑上和语法上都是正确的。

```
#include <stdio.h>
#include <stdlib.h>
#include <windows.h>
#define MAXDIGITS 100

void printmenu(void);
void getchoice(void);
void decitobinary(int str);

int main(void)
{
    char choice;

    printmenu();
    getchoice();
    system("cls");
    while(1)
    {
        printf("\nAgain? y/n: ");
        scanf("\n%c",&choice);
        if(choice == 'y' || choice == 'Y')
        {
            system("cls");
            main();
        }
        else if(choice == 'n' || choice == 'N')
            exit(EXIT_SUCCESS);
        else
        {
            printf("\a\nInvalid input.\n");
            continue;
        }
    }
}

void printmenu(void)
{
    printf("\n3 - Decimal -> Binary");
    printf("\n19 - Exit Program\n");
}

void getchoice(void)
{
    int choice;
    char number[MAXDIGITS];
    int digits;

    printf("\nEnter choice: ");
    scanf("\n%d",&choice);
    switch(choice)
    {

        case 3:
        {
            system("cls");
            printf("Enter number: ");
            scanf("\n%d",&digits);
            decitobinary(digits);
            break;
        }

        case 19:
            exit(EXIT_SUCCESS);
    }
}

void decitobinary(int str)
{
    int arraycntr = 0;
    int number[arraycntr];
    printf("\n%d in binary is: ",str);
    while(str > 0)
    {
        number[arraycntr] = str % 2;
        str /= 2;
        ++arraycntr;
    }
    for(arraycntr -= 1;arraycntr >= 0;arraycntr--)
    {
        printf("%d",number[arraycntr]);
    }
    printf("\n");
    system("pause");
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T05:28:32.617

```
void decitobinary(int str)
{
    int arraycntr = 0;
    int number[arraycntr];
    printf("\n%d in binary is: ",str);
    while(str > 0)
    {
        number[arraycntr] = str % 2;
        str /= 2;
        ++arraycntr;
    }
    for(arraycntr -= 1;arraycntr >= 0;arraycntr--)
    {
        printf("%d",number[arraycntr]);
    }
    printf("\n");
    system("pause");
} 
```

问题在于*数字*数组的初始化。它应该是这样的：

```
int number[33]; 
```

33 位足以存储所有二进制数字。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T05:37:34.953

这不是答案。只是需要考虑的事情。对于相同的功能，您大约有 10 个相同的实现！您是否考虑过将 decitobase 和 basetodeci 的所有变体合并为一对函数：

```
void decitobase(int str, int base)
{
    int arraycntr = 33;
    int number[arraycntr] = {};
    printf("\n%d in base %d is: ",str, base);
    while(str > 0)
    {
        number[arraycntr] = str % base;
        str /= base;
        ++arraycntr;
    }
    for(arraycntr -= 1;arraycntr >= 0;arraycntr--)
    {
        printf("%d",number[arraycntr]);
    }
    printf("\n");
    system("pause");
}

void basetodeci(char str[], int base)
{
    int arraycntr,digitcntr,power;
    int value[MAXDIGITS];
    int number;
    arraycntr = 0;
    digitcntr = 0;
    number = 0;
    power = 1;
    while(str[arraycntr] != '\0')
    {
        value[arraycntr] = str[arraycntr] - '0'
        ++arraycntr;
    }
    digitcntr = arraycntr - 1;
    for(digitcntr; digitcntr >= 0; digitcntr--)
    {
        number += value[digitcntr] * power;
        power *= base;
    }
    printf("\n%s base %d in decimal is: %ld\n",str,base,number);
    system("pause");
 } 
```

我不知道上面的代码是否比你提交的更正确，但我希望你能看到我的意思。另外不要忘记有一个 C 函数可以将字符串转换为您想要的任何基数内的整数：[strtol](http://linux.die.net/man/3/strtol)和朋友。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T08:28:19.580

您使用的算法非常慢。相反，由于您正在处理二进制数，因此请使用按位运算符。

```
#include <stdio.h>
#include <stdlib.h>

#define BITS_N  (sizeof(unsigned int) * 8)
#define MSB     (1 << (BITS_N - 1))

void print_binary (unsigned int val)
{
  for(size_t i=0; i<BITS_N; i++)
  {
    printf("%c", (val & MSB) ? '1' : '0' );
    val <<= 1;

    if( ((i+1)%8) == 0) // print a space every 8th digit
    {
      printf(" ");
    }

  }
}

int main()
{
  unsigned int some_val = 0xBAADBEEF;

  print_binary (some_val);
} 
```

# java - 如何使用 opencv/javacv 识别图像中的 U 形？

> ID：11356270
> 
> 赞同：4
> 
> 时间：2012-07-06T05:23:55.127
> 
> 标签：java, image-processing, opencv, javacv

目前我正在开发关于 javacv 图像处理的项目。在那我必须识别特定多边形内的 U 形。

这是两种类型的图像，我必须确定图像中有两个 U 形还是单个 U 形。我已经阅读了许多教程，但我无法找到正确的指导方针来澄清这一点。所以请专家帮忙澄清这个问题。如果您能提供一些使用 opencv 或 javacv 的代码示例，我将不胜感激。

![具有两个 U 形的图像](../Images/4e140348442b1f8de24c8659b996e3a0.png)

![具有单个 U 形的图像](../Images/b23309eaee213d7e11d9cd56377ffe36.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T05:40:06.163

如果您所有的图像都有相似的图案，您只需使用轮廓边界矩形的纵横比（宽度/高度）将它们过滤掉。

即，如果您找到所有轮廓的边界矩形，则外部形状的 aspect_ratio 接近 1。

但 U 形的 aspect_ratio 将超过 10。

下面是一个python代码：

```
import cv2
import numpy as np

img = cv2.imread('sofud.jpg')

gray = cv2.cvtColor(img,cv2.COLOR_BGR2GRAY)

ret,thresh = cv2.threshold(gray,127,255,1)

contours,hierarchy = cv2.findContours(thresh,cv2.RETR_LIST,cv2.CHAIN_APPROX_SIMPLE)

for cnt in contours:
    x,y,w,h = cv2.boundingRect(cnt)
    if 10 < w/float(h) or w/float(h) < 0.1:
        cv2.rectangle(img,(x,y),(x+w,y+h),(0,0,255),2)

cv2.imshow('res',img)
cv2.waitKey(0)
cv2.destroyAllWindows() 
```

以下是结果：

![在此处输入图像描述](../Images/bc2563c9c736d84120c4313e0685b59d.png)

![在此处输入图像描述](../Images/7d585ae446fdb39f6f604e42b85c437b.png)

# php - 加密和解密（mysql和php）

> ID：11356273
> 
> 赞同：0
> 
> 时间：2012-07-06T05:24:12.773
> 
> 标签：php, mysql, encryption, query-string

我是一个新手程序员，并且有一个项目，我需要使用 mysql 命令加密数据。虽然，给定的问题是这样的，但我们需要将加密数据（来自 mysql）传递给查询字符串`?view=encrypted_data`，现在这是棘手的部分，我们还需要使用 mysql 对其进行解密。可能吗？或者他们是否有可能帮助我。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T05:35:11.333

使用 AES_ENCRYPT 加密和 AES_DECRYPT tp 解密它。但我不知道为什么你不应该使用 php 的加密方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T05:33:11.130

看看 MySQL[加密和压缩函数](https://dev.mysql.com/doc/refman/5.5/en/encryption-functions.html)。这就是我能给你的答案。具体来说，看看`ENCODE`和`DECODE`功能。

# php - GET 请求 - 无法从 DB 执行 SELECT 语句

> ID：11356280
> 
> 赞同：1
> 
> 时间：2012-07-06T05:24:39.497
> 
> 标签：php, mysql

我将通过请求向 PHP 代码发送`GET`请求。它将传递几个参数。我将在我的 select 语句的 WHERE 子句中使用这些参数。

**获取请求**

http://localhost/server/person.php?Id=1&age=12&hieght=100

**PHP 代码**

```
<?php
$connection = mysql_connect("localhost","user","pwd");
if (!$connection )
  {
  die('FAIL: ' . mysql_error());
  }
mysql_select_db("db", $connection );
$result = mysql_query("SELECT * FROM Person where hieght='$_GET[hieght]");
$num_rows = mysql_num_rows($result);
?> 
```

我认为我的 PHP 代码是错误的。我不确定这是否是从`GET`请求中获取变量的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T05:27:46.390

要从`$_GET`使用中获取变量，例如从`$_GET`数组中获取高度，您可以编写

```
$height=$_GET['height']; 
```

所以你可以写

```
$result = mysql_query("SELECT * FROM Person where hieght='".$hieght."'"); 
```

或者你可以写

```
$result = mysql_query("SELECT * FROM Person where hieght='".$_GET['height']."'"); 
```

**更新：**

用于`mysql_real_escape_string`防止sql注入，比如

```
$height=$_GET['height'];
$result = mysql_query("SELECT * FROM Person where hieght='".mysql_real_escape_string($hieght)."'"); 
```

或者

```
$result = mysql_query("SELECT * FROM Person where hieght='".mysql_real_escape_string($_GET['height'])."'"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T05:29:31.387

用这个

```
$height = $_GET['hieght']; 
$result = mysql_query("SELECT * FROM Person where hieght='$height'"); 
```

代替

```
$result = mysql_query("SELECT * FROM Person where hieght='$_GET[hieght]"); 
```

> 请注意，使用此代码很可能成为 sql 注入的受害者

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-06T05:31:54.877

您可能还想使用此连接：

```
mysql_query("SELECT * FROM Person where hieght='".$_GET['hieght']."'"); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-06T05:33:18.960

```
$result = mysql_query("SELECT * FROM Person where hieght='".$_GET['hieght']."'"); 
```

当您感觉自己的情况时，一个很好的调试技术是将 SQL 放入一个可以记录的字符串中，看看它是否符合您的预期。在查询之后使用 mysql_error() 可能也给了你一个提示......

```
$sql = "SELECT * FROM Person where hieght='".$_GET['hieght']."'";
$result = mysql_query($sql);
#Not for production code, but handy while learning - error goes into web server log.
error_log("SQL=$sql, error=".mysql_error()); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-06T05:33:37.387

您应该像这样解析输入以进行注入：

```
<?php

    $myHeight = mysql_reaL_escape_string($_GET['height']);

    $connection = mysql_connect("localhost","user","pwd");
    if (!$connection )
    {
        die('FAIL: ' . mysql_error());
    }
    mysql_select_db("db", $connection );
    $result = mysql_query("SELECT * FROM Person where height=$myHeight");
    $num_rows = mysql_num_rows($result);
?> 
```

其次，您还应该使用[PHP PDO](http://au.php.net/manual/en/book.pdo.php)对象而不是旧的 mysql_query 等。

# httpclient - Apache Abdera 客户端提供 NTLM 没有可用的凭据 @proxy.tcs.com:8080

> ID：11356282
> 
> 赞同：2
> 
> 时间：2012-07-06T05:24:49.520
> 
> 标签：httpclient, ntlm, apache-abdera

我已经看过很多论坛帖子并尝试了一些建议，但我仍然无法解决这个问题。该代码在我的家庭系统中运行良好，但在组织防火墙后面它给出了一条异常消息：

> 没有可用于 NTLM @proxy.tcs.com:8080 的凭据

这是我正在使用的方法

```
private static void UseAbdera() throws IOException 
{
    try 
    {
        Abdera abdera = new Abdera();
        AbderaClient client = new AbderaClient(abdera);
        client.setProxy("OrgProxyHost", 8080);
        NTLMAuthenticatorClass authenticator = new NTLMAuthenticatorClass("username", "password");
        Authenticator.setDefault(authenticator);
        NTCredentials ntcr = new NTCredentials("username", "password", "greenhouse.lotus.com", "India.TCS.com");

        client.addCredentials("https://greenhouse.lotus.com", null, null, ntcr);
        ClientResponse resp = client.get("https://greenhouse.lotus.com/forums/atom/service");
        org.apache.abdera.model.Document<org.apache.abdera.model.Service> service_doc = resp.getDocument();
        service_doc.writeTo(System.out);
        System.out.println("\n");
        org.apache.abdera.model.Service service = service_doc.getRoot();
        org.apache.abdera.model.Collection collection = service.getCollection("Forums Feed Collection", "My Topics");
        String coll_uri = collection.getResolvedHref().toASCIIString();
        org.apache.abdera.model.Entry entry = abdera.newEntry();
        entry.setTitle("TEST REPLY !");
        // Mark private
        resp = client.post(coll_uri, entry);
        switch (resp.getType()) 
        {
            case SUCCESS:
                String location = resp.getLocation().toASCIIString();
                System.out.println("New entry created at: " + location);
                break;

            default:
                System.out.println("Error: " + resp.getStatusText());
        }
    } catch (URISyntaxException ex) 
      {     
          Logger.getLogger(IBMConnectionMessages_ForumPractice.class.getName()).log(Level.SEVERE, null, ex);
      }
} 
```

这是我得到的异常日志

> org.apache.commons.httpclient.auth.AuthChallengeProcessor selectAuthScheme INFO: ntlm authentication scheme selected Jul 6, 2012 10:42:03 AM org.apache.commons.httpclient.HttpMethodDirector processProxyAuthChallenge INFO: No credentials available for NTLM @orgProxyHost:8080 Exception在 org.apache.abdera.protocol.client.AbderaClient.execute(AbderaClient.java:692 的 org.apache.abdera.protocol.client.CommonsResponse.(CommonsResponse.java:44) 的线程“主”java.lang.IllegalStateException ) 在 org.apache.abdera.protocol.client.AbderaClient.get(AbderaClient.java:216) 在 org.apache.abdera.protocol.client.AbderaClient.get(AbderaClient.java:404) 在 IBMConnectionMessages_ForumPractice.UseAbdera(IBMConnectionMessages_ForumPractice. java:231) 在 IBMConnectionMessages_ForumPractice。主要（IBMConnectionMessages_ForumPractice.java:45）

请帮忙，我花了半天时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-23T11:49:27.657

您的代理可能需要 ntlm 身份验证，因此在设置代理凭据时将您的代理身份验证详细信息作为 NTCredentials 提供。

# html - 如何仅通过 CSS 制作动态布局

> ID：11356283
> 
> 赞同：4
> 
> 时间：2012-07-06T05:24:55.537
> 
> 标签：html, css

我想创建这样的布局：

1.  左栏（黄色）：宽度 150px**常量**- 高度**动态**
2.  中间列（天蓝色）：宽度**动态**- 高度**动态**
3.  右栏（绿色）：宽度 150px**常量**- 高度**动态**
4.  页脚（红色）：宽度**动态**- 高度**常数**

*我正在寻找纯 CSS 的解决方案。*

[jsFiddle 在这里](http://jsfiddle.net/centerwow/qXKZh/37/show/)。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-08T06:36:40.520

[http://fiddle.jshell.net/2bSaP/show/](http://fiddle.jshell.net/2bSaP/show/)

HTML：

```
<div id="container">
    <div id="yellow"></div>
    <div id="blue"></div>
    <div id="green"></div>
    <div id="red"></div>
</div> 
```

CSS：

```
body {
    margin: 0;
}

#yellow {
    background: yellow;
    position: absolute;
    width: 150px;
    top: 0;
    left: 0;
    bottom: 155px;
}

#blue {
    background: rgb(98, 196, 255);
    position: absolute;
    top: 0;
    right: 155px;
    left: 155px;
    bottom: 155px;
}

#green {
    background: green;
    position: absolute;
    width: 150px;
    top: 0;
    right: 0;
    bottom: 155px;
}

#red {
    background: brown;
    position: absolute;
    height: 150px;
    left: 0;
    right: 0;
    bottom: 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T05:30:52.567

现在使用你忘记在你的css中`position` 定义`position value`

像这样

```
#blue{
position: absolute;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T05:38:24.810

不确定这是否是您想要的，但我摆脱了所有这些高度规则`#Blue`，只是添加了`height: 100%`，然后给出`#Red`了更高的值`z-index`（例如 55）。

现在中心方块似乎总是蓝色的。

[http://jsfiddle.net/qXKZh/38/](http://jsfiddle.net/qXKZh/38/)

希望这可以帮助

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-07T14:33:01.573

我真的不确定您要完成什么。它应该看起来像 MusikAnimal 的 jsfiddle 的样子吗？

如果是这样，我会选择不同的结构（具有正确的高度和宽度......）：

```
<div id="for3columns" style="height: 500px;">
  <div id="yellow_column" style="float: left; width: 20%; height: 100%"></div>
  <div id="blue_column" style="float: left; width: 60%; height: 100%"></div>
  <div id="green_column" style="float: left; width: 20%; height: 100%"></div>
</div>
<div id="lower_red" style="clear:both; width: 100%; height: 100px;"></div> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-08T06:03:55.383

有点难以理解你的问题是什么，但从我收集的信息来看，我能够得到这个解决方案：[Fiddle](http://jsfiddle.net/aniketpant/T8Kdm/)

## HTML

```
<div class='container'>
    <div class='col col-left'></div>
    <div class='col col-mid'></div>
    <div class='col col-right'></div>
    <div class='col col-bottom'></div>
</div>​ 
```

## CSS

```
.container {
    width: 960px;
    margin: 0 auto;
}

.col {
    margin: 0;
    padding: 0;
    float: left;
}

.col-left {
    width: 25%;
    height: 200px;
    background: #f90a7b;
}

.col-mid {
    width: 50%;
    height: 200px;
    background: #e3f606;
}

.col-right {
    width: 25%;
    height: 200px;     
    background: #46c704;
}

.col-bottom {
    width: 100%;
    height: 200px;
    background: #0654e0;
}​ 
```

# c# - 需要了解以下 C# 虚方法的代码

> ID：11356287
> 
> 赞同：6
> 
> 时间：2012-07-06T05:26:09.670
> 
> 标签：c#, .net, inheritance, virtual-functions

这是一个显示虚拟方法的小代码。

```
class A
{
  public virtual void F() { Console.WriteLine("A.F"); }
}
class B: A
{
  public override void F() { Console.WriteLine("B.F"); }
}
class C: B
{
  new public virtual void F() { Console.WriteLine("C.F"); }
}
class D: C
{
  public override void F() { Console.WriteLine("D.F"); }
}

class Test
{
  static void Main() 
  {
    D d = new D();
    A a = d;
    B b = d;        

    a.F();
    b.F();        
 }
} 
```

此代码正在打印以下输出：

```
B.F
B.F 
```

我不明白为什么 aF() 会打印 BF ？

我认为它会打印 DF，因为 B 类覆盖了 A 类的 F()，然后使用“new”关键字将这个方法隐藏在 C 类中，然后在 D 类中再次被覆盖。所以最后 DF 留下了。

但它没有这样做。你能解释一下为什么要打印BF吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-06T05:36:06.137

```
A a = d;
a.F(); 
```

它会发现`F()`如下。

1.  首先进入`class A`
2.  然后在`class B`
3.  然后在`class C`
4.  然后在`class D`

现在 `F()`将在`A`和中找到`B`。因此`B.F()`将被调用。在`class C`F() 中是不同的（因为它是新实现并且不会从 A/B 覆盖）。所以在第 3 步中，将找不到 cF()。在 D 类中，它覆盖了 C 创建的新函数，因此它也不会被找到。

由于 new 关键字，生成的代码如下（关于虚拟覆盖）

```
 class A
    {
        public virtual void F() { Console.WriteLine("A.F"); }
    }
    class B: A
    {
        public override void F() { Console.WriteLine("B.F"); }
    }
    class C: B
    {
        public virtual void F1() { Console.WriteLine("C.F"); }
    }
    class D: C
    {
        public override void F1() { Console.WriteLine("D.F"); }
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T05:33:24.843

与允许多态性的方法覆盖不同，使用`new`关键字隐藏方法只是命名问题（请注意，使用`new`只是删除了您正在隐藏某些内容的警告）。

在 class`C`中，当您声明：

```
new public virtual void F() { ... } 
```

在这里，您定义了一个与超类无关的全新方法`F()`，它恰好具有相同的名称。

当 的 实例`F`被分配给类型为`A`or的变量时`B`，使用这些变量调用`F()`将指向超类定义的方法。

想象一下，如果您没有调用`C`' 方法`F()`，而是调用不同的方法，例如`G()`. 以下代码无法编译：

```
a.G();
b.G(); 
```

由于变量静态类型为`A`or `B`，编译器看不到新声明的方法。在您的示例中情况相同，只是超类恰好有名为`F()`要调用的原始方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-06T05:35:39.460

AF 被 BF 覆盖 因此，当调用 AF 时，它会执行 BF BF is 'connected' to 'AF'。

现在 CF 用 new 关键字隐藏 BF。CF 未连接到 BF/AF 当您创建 C 并调用 F() 时，它将执行 CF 如果将 C 转换为类型 A 或 B，并调用 F，它将执行 BF，因为 BF 和 AF 是连接的。

CF 被 DF 覆盖。它们是连接的。当CF或DF被调用时，它将执行DF 现在当你将对象D转换为A或B，并调用F()时，它将调用BF

希望这有助于使其更清晰。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-06T05:53:24.303

正如其他人已经指出的那样，C 中的 new 关键字隐藏了 F 的重载，因此在 C 或 D 中找不到合适的 F 重载。

如果您需要有关 C# 找到正确重载的更多详细信息，请阅读这两篇：

[Jon Skeet：深入了解 C#，重载一章](http://csharpindepth.com/Articles/General/Overloading.aspx)

[Visual Studio 2010：重大变化，此处：重载解决方案](http://msdn.microsoft.com/en-us/library/ee855831.aspx)

# c# - Settings.Default.Save() 抛出的异常？

> ID：11356288
> 
> 赞同：1
> 
> 时间：2012-07-06T05:26:16.577
> 
> 标签：c#

`Settings.Default.Save()`奇怪 - 我在 MSDN 库中找不到常见/可能例外的列表。

`UnauthorizedAccessException`是一个很好的捕捉，因为它有助于用户可以使用反馈来纠正关于为什么用户的设置无法保存的问题。此外，它是系统库的一部分。

捕获和处理 IO 异常是否也有意义，例如`System.IO.DirectoryNotFoundException`？如果系统为应用程序的设置创建的用户目录不存在，用户可能会遇到一些严重的系统问题。

你还有其他人抓到和处理`Settings.Default.Save()`吗？通过 Google 运行代码搜索令我感到惊讶的是，很少有人捕捉和处理`UnauthorizedAccessException`- 也许它的可能性很低，不值得付出努力。

想法？

谢谢！

# moq - AutoMockContainer - 调用控制器时出错

> ID：11356291
> 
> 赞同：3
> 
> 时间：2012-07-06T05:26:52.477
> 
> 标签：moq, automocking, moqcontrib

一直在玩 AutoMocking。

使用 moq.contrib.indy 调用控制器时出现以下错误

{"值不能为空。\r\n参数名称：controllerContext"}

```
var mocks = new AutoMockContainer(new MockRepository(MockBehavior.Loose));
mocks.GetMock<IAccountService>().Setup(x => x.AddSweepstake(new AddSweepstakeViewModel()));
mocks.GetMock<IRepository<Account>>().Setup(x => x.SaveOrUpdate(new Account())).Returns(new Account()).Verifiable();

mocks.Create<AccountController>().AddSweepstake(new AddSweepstakeViewModel()); //fails on this line 
```

通常会这样做

```
var context = new Mock<HttpContextBase>(); 
```

如何使用 AutoMocking 模拟控制器上下文？

# c# - 在给定的 url 路径中查找 zip 文件的文件名

> ID：11356294
> 
> 赞同：0
> 
> 时间：2012-07-06T05:27:15.470
> 
> 标签：c#, file, url, zip, file-extension

如何在使用 c# 启用目录浏览的 url 路径中查找带有“*.zip”的文件。例如：如果我的网址是：[http](http://www.example.com/myfolder/myfiles) ://www.example.com/myfolder/myfiles 并且路径由文件组成：ex1.htm,ex2.zip,ex.pdf,ex.swf，那么我该如何找到扩展名为 *.zip 的文件名。请帮助我如何在 URL 中找到 zip 文件的文件名

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T06:53:26.380

除非 FTP 服务器也可用，否则我认为您将不得不求助于加载目录列表`HttpWebRequest`，然后解析结果以提取 <A> 标记中的所有 href。

这是一些示例代码：

```
 HttpWebRequest request = (HttpWebRequest)WebRequest.Create(url);
        using (HttpWebResponse response = (HttpWebResponse)request.GetResponse())
        {
            using (StreamReader reader = new StreamReader(response.GetResponseStream()))
            {
                string html = reader.ReadToEnd();
                Console.WriteLine("Parsing {0}", html);
                Regex regex = new Regex("href=\\\"([^\\\"]*)", RegexOptions.IgnoreCase);
                MatchCollection matches = regex.Matches(html);
                if (matches.Count > 0)
                {
                    foreach (Match match in matches)
                    {
                        if (match.Success)
                        {
                            Console.WriteLine("Found {0}", match.Captures[0]);
                        }
                    }
                }
            }
        } 
```

请注意，您获得的 href 值将与当前目录相关。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T09:21:54.173

正如迈克尔所建议的那样，我得到了问题的解决方案如下：

```
string urlpath = "http://www.example.com/folder/"
    HttpWebRequest request = (HttpWebRequest)WebRequest.Create(urlpath);
    using (HttpWebResponse response = (HttpWebResponse)request.GetResponse())
    {
       using (StreamReader reader = new StreamReader(response.GetResponseStream()))
       {
           string html = reader.ReadToEnd();
           Regex regEx = new Regex(@".*/(?<filename>.*?)\.zip");
           MatchCollection matches = regEx.Matches(html);
           if (matches.Count > 0)
           {
                foreach (Match match in matches)
                {
                  if (match.Success)
                  {

                    Console.WriteLine(match.Groups["filename"].Value);
                  }
            }
       }

   } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T05:47:15.190

```
string[] s = Directory.GetFiles(path);
        int i = 0;
        while (i < s.Length)
        {
            if (s[i].Substring((s[i].IndexOf(".") + 1), 3).Equals("zip"))
            {
                Response.Write(s[i].ToString());
                i = i + 1;
            }
        } 
```

尝试这个。

**编辑**

```
int slashIndex = url.lastIndexOf('/'); 
int dotIndex = url.lastIndexOf('.zip', slashIndex);
String filenameWithoutExtension; 
if (dotIndex == -1) 
{   
     filenameWithoutExtension = url.substring(slashIndex + 1); 
} 
else 
{   
     filenameWithoutExtension = url.substring(slashIndex + 1, dotIndex); 
} 
```

这适用于最后附加文件名的 URL/我将把错误处理留给你/

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-06T05:36:18.747

您可以使用`GetFileName`获取文件名。

例如：

`System.IO.Path.GetFileName(path);`

或者

您可以尝试以下从目录中获取文件名：

`var filenames = String.Join(", ", Directory.GetFiles(@"c:\", "*.zip").Select(filename => Path.GetFileNameWithoutExtension(filename)).ToArray());`

# html - 空程式化标签的 DIV 替代品

> ID：11356295
> 
> 赞同：0
> 
> 时间：2012-07-06T05:27:19.013
> 
> 标签：html, css

假设您有一个使用大量 CSS 来激活所需效果的页面，但是，这无法使用边距、填充或边框等辅助显示特征来完成。例如：您需要创建一个 div 标签，其唯一目的是具有特定的大小、特定的位置和特定的颜色；它需要`display:block`，以及所有可以固定在 div 上的属性，因为它们几乎普遍使用。`<div></div>`问题是，如果你不需要它们，创建所有这些对是一个腰部。**是否有替代的单独标签可以完成我们通常委派给 div 的那些工作而只是留空？**它最终会表现得相同，风格上，看起来像`<tag/>`. 有没有类似的东西；它会是正确的标记吗？如果它也兼容 HTML 4，那就太好了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T05:36:17.057

看看这个关于[自闭](https://stackoverflow.com/questions/97522/what-are-all-the-valid-self-closing-tags-in-xhtml-as-implemented-by-the-major-b)的问题。

从[这里](http://dusan.fora.si/blog/self-closing-tags)，`<div />`是有效的 (xhtml)。不过我不会这样做。

# c++ - 在方法中声明的静态变量有多少个实例？

> ID：11356302
> 
> 赞同：6
> 
> 时间：2012-07-06T05:27:40.357
> 
> 标签：c++, static, static-methods, static-members

在这种情况下，静态变量应该只有一个或零个实例。这取决于是否`f()`已被调用。

```
void f() 
{
    static int a;
} 
```

但是如果`f()`是一个方法，那么有多少个静态变量的实例呢？

```
class A
{
    void f()
    {
        static int a;
    }
}; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T05:31:24.190

与函数相同：0或1。也很容易检查：

```
class A
{
public:
    void f()
    {
        static int a = 0;
        ++a;
        cout << a << endl;
    }
};

int main()
{
    A a;
    a.f();
    a.f();
    A b;
    b.f();
} 
```

输出：

```
1
2
3 
```

但是，如果您`class A`像这样从函数派生并使其成为虚拟函数：

```
class A
{
public:
    virtual void f()
    {
        static int a = 0;
        ++a;
        cout << a << endl;
    }
};

class B:public A
{
public:
    void f()
    {
        static int a = 0;
        ++a;
        cout << a << endl;
    }
}; 
```

那么`a`变量对于基类和每个派生类都是不同的（因为函数也不同）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T05:30:09.200

相同...作为成员函数与作为静态本地函数是正交的。

# visual-studio-2010 - 如何在我的服务器项目中使用部分服务器项目？

> ID：11356314
> 
> 赞同：1
> 
> 时间：2012-07-06T05:28:56.297
> 
> 标签：visual-studio-2010, database-project

### 设想：

在我的组织中，我们分别开发多个应用程序。然而，最终，许多应用程序（及其数据库）部署到同一个 SQL 实例，因此它们共享同一个主数据库。

我们使用 Visual Studio 2010 数据库和服务器项目来控制所述数据库的源代码。

为了尝试标准化一些事情，我想做以下事情：

1.  创建一个“核心”服务器数据库项目，其中包含所有服务器设置、核心登录等。诸如 SET TRUSTWORTHY ON 和服务器级 ANSI 设置等。
2.  让每个应用程序自己的 Server.dbproj 指定特定于该应用程序的登录名和角色等。
3.  让每个应用程序自己的 ApplicationDatabase.dbproj 引用 ApplicationX.Server.dbproj

从理论上讲，源代码控制中的每个应用程序将只包含特定于它的项目，而不是在许多项目之间保持服务器相关设置或配置同步。

### 问题

但是，在实践中，我可以做到这一点：

1.  完毕。生成我在以后的步骤中引用的 .schema 文件
2.  完毕。Server.dbproj 愉快地引用 Core.dbschema 并用它自己的登录名和角色等“扩展”它。很高兴在我指向它的任何地方部署它。
3.  纳达。我添加了从 ApplicationDatabase.dbproj 到 Server.dbproj 的引用（假设 Server 会从 Core 中提取项目），它抱怨任何实际在 Core 中的登录。

因此，我随后将 Server 和 Core 添加为 ApplicationDatabase 的引用，因为它安定下来。编译良好。

但是，当您部署时，您会遇到此处描述的相同问题：http: [//social.msdn.microsoft.com/Forums/uk/vstsdb/thread/23cb9132-00d4-42ed-b34c-ab49027cddf7](http://social.msdn.microsoft.com/Forums/uk/vstsdb/thread/23cb9132-00d4-42ed-b34c-ab49027cddf7)

```
Error TSD01234: The source model contains 2 server option elements. 
Only one element can be   contained in a model that can be deployed 
```

我认为的问题是 ApplicationDatabase 本质上有两个它知道的服务器项目，因此重复设置。

Microsoft 的文档没有提到在服务器项目中使用部分项目，但也没有将其列为限制。

### 所以问题是...

有没有人成功地将部分项目用于服务器项目，或者有没有一种方法可以实现相同的目标？

老实说，我不会只是“删除服务器项目”来让问题消失——在我尝试改进之前，我们让它运行得很好！

# c++ - MSYS SDL-2.0“C 编译器无法创建可执行文件”

> ID：11356316
> 
> 赞同：0
> 
> 时间：2012-07-06T05:28:56.670
> 
> 标签：c++, mingw, sdl, msys

我正在尝试使用 MSYS 从最新的 SDL 2.0 Mercurial 存储库创建 MinGW SDL 库。（截至发帖为止。）我正在关注[本教程](http://blog.pantokrator.net/2006/08/08/setting-up-msysmingw-build-system-for-compiling-sdlopengl-applications/)，当我需要使用 MSYS 进行配置时，我输入

```
$ ./configure --prefix=/mingw --enable-stdio-redirect=no 
```

进入 MSYS。它溅射出以下内容：

```
configure: WARNING: Libtool does not cope well with whitespace in `pwd`
checking build system type... i686-pc-mingw32
checking host system type... i686-pc-mingw32
checking for gcc... gcc
checking for C compiler default output file name... 
configure: error: C compiler cannot create executables
See `config.log' for more details. 
```

我正在使用 gcc 2.95 版（根据“gcc -v”）、最新的 MSYS/MSYS-dtk 和最新的 SDL 2.0 [Mercurial 源](http://hg.libsdl.org/)。有谁知道为什么 MSYS 可能会给我这个错误，或者有人从当前的 SDL 2.0 源成功构建了 MinGW 二进制文件吗？

编辑：这是 ./config 生成的 config.log 文件：

```
This file contains any messages produced by compilers while
running configure, to aid debugging if configure makes a mistake.

It was created by configure, which was
generated by GNU Autoconf 2.61\.  Invocation command line was

  $ ./configure --prefix=/mingw --enable-stdio-redirect=no

## --------- ##
## Platform. ##
## --------- ##

hostname = NFLODUDE
uname -m = i686
uname -r = 1.0.10(0.46/3/2)
uname -s = MINGW32_NT-6.1
uname -v = 2004-03-15 07:17

/usr/bin/uname -p = unknown
/bin/uname -X     = unknown

/bin/arch              = unknown
/usr/bin/arch -k       = unknown
/usr/convex/getsysinfo = unknown
/usr/bin/hostinfo      = unknown
/bin/machine           = unknown
/usr/bin/oslevel       = unknown
/bin/universe          = unknown

PATH: .
PATH: /usr/local/bin
PATH: /mingw/bin
PATH: /bin
PATH: /c/Python25/
PATH: /c/Program Files/Common Files/Microsoft Shared/Windows Live
PATH: /c/Program Files (x86)/Common Files/Microsoft Shared/Windows Live
PATH: /c/Program Files (x86)/Microsoft DirectX SDK (August 2007)/Utilities/Bin/x86
PATH: /c/Perl/site/bin
PATH: /c/Perl/bin
PATH: /c/Windows/system32
PATH: /c/Windows
PATH: /c/Windows/System32/Wbem
PATH: /c/Windows/System32/WindowsPowerShell/v1.0/
PATH: /c/Program Files/Dell/Dell Wireless WLAN Card
PATH: /c/Program Files (x86)/OpenLibraries/bin
PATH: /c/Program Files/Trend Micro/AMSP
PATH: /c/Program Files (x86)/MySQL/MySQL Server 5.5/bin
PATH: /c/Program Files (x86)/Java/jdk1.6.0_23/bin
PATH: /c/Program Files (x86)/Microsoft ASP.NET/ASP.NET Web Pages/v1.0/
PATH: /c/Program Files/MySQL/MySQL Server 5.5/bin
PATH: /c/Program Files (x86)/Microsoft SQL Server/100/Tools/Binn/
PATH: /c/Program Files/Microsoft SQL Server/100/Tools/Binn/
PATH: /c/Program Files/Microsoft SQL Server/100/DTS/Binn/
PATH: /c/Program Files (x86)/Java/jdk1.6.0_23/bin
PATH: /c/perl_op/bin
PATH: /c/Program Files (x86)/gtk2/bin
PATH: /c/Program Files (x86)/mlt/bin
PATH: /c/Program Files (x86)/OpenLibraries/bin
PATH: /c/Windows/SysWOW64
PATH: /c/Program Files (x86)/Windows Live/Shared
PATH: /c/Program Files (x86)/GtkSharp/2.12/bin
PATH: .
PATH: /c/Program Files (x86)/QuickTime/QTSystem/
PATH: /c/Program Files (x86)/Google/google_appengine
PATH: /c/Free Pascal Compiler/2.4.4/bin/i386-Win32
PATH: /c/Program Files (x86)/Heroku
PATH: /c/Program Files (x86)/git/bin
PATH: /c/Program Files (x86)/git/cmd
PATH: /c/PHP/
PATH: /c/PHP/ext
PATH: /c/Program Files (x86)/CMake 2.8/bin
PATH: /c/Users/Owner/Documents/Code Projects/Java Projects/LWJGL/lwjgl-2.8.3/native/windows
PATH: /c/Program Files/TortoiseGit/bin
PATH: /c/Program Files/TortoiseHg/
PATH: /c/Program Files (x86)/Microsoft SDKs/Windows/v7.0A/Bin
PATH: /c/Ruby193/bin
PATH: /c/Program Files (x86)/Java/jdk1.6.0_23/bin
PATH: /c/Program Files (x86)/g95/bin
PATH: /c/MinGW/bin
PATH: /c/Program Files (x86)/Nmap
PATH: /c/GNUstep/bin

## ----------- ##
## Core tests. ##
## ----------- ##

configure:2098: WARNING: Libtool does not cope well with whitespace in `pwd`
configure:2127: checking build system type
configure:2145: result: i686-pc-mingw32
configure:2167: checking host system type
configure:2182: result: i686-pc-mingw32
configure:2252: checking for gcc
configure:2268: found /c/Free Pascal Compiler/2.4.4/bin/i386-Win32/gcc
configure:2279: result: gcc
configure:2517: checking for C compiler version
configure:2524: gcc --version >&5
2.95
configure:2527: $? = 0
configure:2534: gcc -v >&5
Using builtin specs.
gcc version 2.95 19990728 (release)
configure:2537: $? = 0
configure:2544: gcc -V >&5
gcc.exe: argument to `-V' is missing
configure:2547: $? = 1
configure:2570: checking for C compiler default output file name
configure:2597: gcc    conftest.c  >&5
Usage: cpp [switches] input output
Switches:
  -include <file>           Include the contents of <file> before other files
  -imacros <file>           Accept definition of marcos in <file>
  -iprefix <path>           Specify <path> as a prefix for next two options
  -iwithprefix <dir>        Add <dir> to the end of the system include paths
  -iwithprefixbefore <dir>  Add <dir> to the end of the main include paths
  -isystem <dir>            Add <dir> to the start of the system include paths
  -idirafter <dir>          Add <dir> to the end of the system include paths
  -I <dir>                  Add <dir> to the end of the main include paths
  -nostdinc                 Do not search the system include directories
  -nostdinc++               Do not search the system include directories for C++
  -o <file>                 Put output into <file>
  -pedantic                 Issue all warnings demanded by strict ANSI C
  -traditional              Follow K&R pre-processor behaviour
  -trigraphs                Support ANSI C trigraphs
  -lang-c                   Assume that the input sources are in C
  -lang-c89                 Assume that the input is C89; deprecated
  -lang-c++                 Assume that the input sources are in C++
  -lang-objc                Assume that the input sources are in ObjectiveC
  -lang-objc++              Assume that the input sources are in ObjectiveC++
  -lang-asm                 Assume that the input sources are in assembler
  -lang-chill               Assume that the input sources are in Chill
  -std=<std name>           Specify the conformance standard; one of:
                            gnu89, gnu9x, c89, c9x, iso9899:1990,
                            iso9899:199409, iso9899:199x
  -+                        Allow parsing of C++ style features
  -w                        Inhibit warning messages
  -Wtrigraphs               Warn if trigraphs are encountered
  -Wno-trigraphs            Do not warn about trigraphs
  -Wcomment{s}              Warn if one comment starts inside another
  -Wno-comment{s}           Do not warn about comments
  -Wtraditional             Warn if a macro argument is/would be turned into
                             a string if -traditional is specified
  -Wno-traditional          Do not warn about stringification
  -Wundef                   Warn if an undefined macro is used by #if
  -Wno-undef                Do not warn about testing undefined macros
  -Wimport                  Warn about the use of the #import directive
  -Wno-import               Do not warn about the use of #import
  -Werror                   Treat all warnings as errors
  -Wno-error                Do not treat warnings as errors
  -Wall                     Enable all preprocessor warnings
  -M                        Generate make dependencies
  -MM                       As -M, but ignore system header files
  -MD                       As -M, but put output in a .d file
  -MMD                      As -MD, but ignore system header files
  -MG                       Treat missing header file as generated files
  -g                        Include #define and #undef directives in the output
  -D<macro>                 Define a <macro> with string '1' as its value
  -D<macro>=<val>           Define a <macro> with <val> as its value
  -A<question> (<answer>)   Assert the <answer> to <question>
  -U<macro>                 Undefine <macro> 
  -u or -undef              Do not predefine any macros
  -v                        Display the version number
  -H                        Print the name of header files as they are used
  -C                        Do not discard comments
  -dM                       Display a list of macro definitions active at end
  -dD                       Preserve macro definitions in output
  -dN                       As -dD except that only the names are preserved
  -dI                       Include #include directives in the output
  -ifoutput                 Describe skipped code blocks in output 
  -P                        Do not generate #line directives
  -$                        Do not include '$' in identifiers
  -remap                    Remap file names when including files.
  -h or --help              Display this information
cpp: Too many arguments
configure:2600: $? = 1
configure:2638: result: 
configure: failed program was:
| /* confdefs.h.  */
| #define PACKAGE_NAME ""
| #define PACKAGE_TARNAME ""
| #define PACKAGE_VERSION ""
| #define PACKAGE_STRING ""
| #define PACKAGE_BUGREPORT ""
| #define _GNU_SOURCE 1
| /* end confdefs.h.  */
| 
| int
| main ()
| {
| 
|   ;
|   return 0;
| }
configure:2645: error: C compiler cannot create executables
See `config.log' for more details.

## ---------------- ##
## Cache variables. ##
## ---------------- ##

ac_cv_build=i686-pc-mingw32
ac_cv_env_CCC_set=
ac_cv_env_CCC_value=
ac_cv_env_CC_set=
ac_cv_env_CC_value=
ac_cv_env_CFLAGS_set=
ac_cv_env_CFLAGS_value=
ac_cv_env_CPPFLAGS_set=
ac_cv_env_CPPFLAGS_value=
ac_cv_env_CPP_set=
ac_cv_env_CPP_value=
ac_cv_env_CXXCPP_set=
ac_cv_env_CXXCPP_value=
ac_cv_env_CXXFLAGS_set=
ac_cv_env_CXXFLAGS_value=
ac_cv_env_CXX_set=
ac_cv_env_CXX_value=
ac_cv_env_LDFLAGS_set=
ac_cv_env_LDFLAGS_value=
ac_cv_env_LIBS_set=
ac_cv_env_LIBS_value=
ac_cv_env_XMKMF_set=
ac_cv_env_XMKMF_value=
ac_cv_env_build_alias_set=
ac_cv_env_build_alias_value=
ac_cv_env_host_alias_set=
ac_cv_env_host_alias_value=
ac_cv_env_target_alias_set=
ac_cv_env_target_alias_value=
ac_cv_host=i686-pc-mingw32
ac_cv_prog_ac_ct_CC=gcc

## ----------------- ##
## Output variables. ##
## ----------------- ##

ALLOCA=''
ALSA_CFLAGS=''
ALSA_LIBS=''
AR=''
ARTSCONFIG=''
AS=''
BUILD_CFLAGS=''
BUILD_LDFLAGS=''
CC='gcc'
CFLAGS=''
CPP=''
CPPFLAGS=''
CXX=''
CXXCPP=''
CXXFLAGS=''
DEFS=''
DIRECTFBCONFIG=''
DLLTOOL=''
DSYMUTIL=''
DUMPBIN=''
ECHO_C=''
ECHO_N='-n'
ECHO_T=''
EGREP=''
ENABLE_SHARED_FALSE=''
ENABLE_SHARED_TRUE=''
ENABLE_STATIC_FALSE=''
ENABLE_STATIC_TRUE=''
ESD_CFLAGS=''
ESD_CONFIG=''
ESD_LIBS=''
EXEEXT=''
EXTRA_CFLAGS=''
EXTRA_LDFLAGS=''
FGREP=''
GREP=''
INCLUDE=''
INSTALL_DATA=''
INSTALL_PROGRAM=''
INSTALL_SCRIPT=''
LD=''
LDFLAGS=''
LIBOBJS=''
LIBS=''
LIBTOOL=''
LIPO=''
LN_S=''
LTLIBOBJS=''
LT_AGE=''
LT_CURRENT=''
LT_RELEASE=''
LT_REVISION=''
NM=''
NMEDIT=''
OBJDUMP=''
OBJECTS=''
OBJEXT=''
OTOOL64=''
OTOOL=''
PACKAGE_BUGREPORT=''
PACKAGE_NAME=''
PACKAGE_STRING=''
PACKAGE_TARNAME=''
PACKAGE_VERSION=''
PATH_SEPARATOR=':'
PKG_CONFIG=''
POW_LIB=''
RANLIB=''
SDLMAIN_OBJECTS=''
SDL_BINARY_AGE='0'
SDL_CFLAGS=''
SDL_INTERFACE_AGE='0'
SDL_LIBS=''
SDL_MAJOR_VERSION='2'
SDL_MICRO_VERSION='0'
SDL_MINOR_VERSION='0'
SDL_RLD_FLAGS=''
SDL_STATIC_LIBS=''
SDL_VERSION='2.0.0'
SED=''
SET_MAKE=''
SHELL='/bin/sh'
STRIP=''
VERSION_OBJECTS=''
WINDRES=''
XMKMF=''
X_CFLAGS=''
X_EXTRA_LIBS=''
X_LIBS=''
X_PRE_LIBS=''
ac_aux_dir='build-scripts'
ac_ct_CC='gcc'
ac_ct_CXX=''
ac_ct_DUMPBIN=''
bindir='${exec_prefix}/bin'
build='i686-pc-mingw32'
build_alias=''
build_cpu='i686'
build_os='mingw32'
build_vendor='pc'
datadir='${datarootdir}'
datarootdir='${prefix}/share'
docdir='${datarootdir}/doc/${PACKAGE}'
dvidir='${docdir}'
exec_prefix='NONE'
host='i686-pc-mingw32'
host_alias=''
host_cpu='i686'
host_os='mingw32'
host_vendor='pc'
htmldir='${docdir}'
includedir='${prefix}/include'
infodir='${datarootdir}/info'
libdir='${exec_prefix}/lib'
libexecdir='${exec_prefix}/libexec'
localedir='${datarootdir}/locale'
localstatedir='${prefix}/var'
lt_ECHO='echo'
mandir='${datarootdir}/man'
oldincludedir='/usr/include'
pdfdir='${docdir}'
prefix='/mingw'
program_transform_name='s,x,x,'
psdir='${docdir}'
sbindir='${exec_prefix}/sbin'
sharedstatedir='${prefix}/com'
sysconfdir='${prefix}/etc'
target_alias=''

## ----------- ##
## confdefs.h. ##
## ----------- ##

#define PACKAGE_NAME ""
#define PACKAGE_TARNAME ""
#define PACKAGE_VERSION ""
#define PACKAGE_STRING ""
#define PACKAGE_BUGREPORT ""
#define _GNU_SOURCE 1

configure: exit 77 
```

不过，我真的不知道如何处理 config.log...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T14:55:56.793

简短的回答：你`gcc`还没有准备好，需要一些依赖。

长答案，故障排除指南：

创建一个简单的 C 文件，如下所示：

```
main() {} 
```

尝试运行：

```
gcc simple.c 
```

你应该得到同样的信息，关于创建可执行文件。现在进行详细`gcc`调用，添加`-v`switch。您现在应该知道它无法运行的命令是什么。也许是`as`？也许你需要`binutils`？也许你需要一些图书馆。

# php - 在php上使用ajax返回值

> ID：11356318
> 
> 赞同：-1
> 
> 时间：2012-07-06T05:29:03.050
> 
> 标签：php, javascript, ajax

我正在尝试将 ajax 响应值传递给 php 函数。

ajax.js

```
 xmlhttp.onreadystatechange=function(){
  if (xmlhttp.readyState==4 && xmlhttp.status==200){
    var a = xmlhttp.responseText;
    }
  } 
```

我需要`a`在 PHP 函数中使用值。

测试.php

```
function testFun($a); 
```

这可能吗？？？谢谢您的帮助！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T05:46:50.767

```
Try This:
/** JAVA SCRIPT **/
// create a request query
var queryString = "?send_param=" + a;

// send request query to php file
xmlhttp.open("GET", "test.php" + queryString, true);

xmlhttp.send(null);
/** JAVA SCRIPT END **/

/** PHP SCRIPT **/
[ test.php ]

<?php
// if $_REQUEST array is empty show error and die;
if (empty($_REQUEST)) {
die("Error: No request found");
} else {
// split the $_REQUEST array and make array key as php variable
extract($_REQUEST);
}

/**
* Function testFun
* @param string $a
*/
function testFun($a)
{
// return val
}

// Call the function
testFun($send_param);
?>

/** PHP SCRIPT END **/

I preferred to use $.ajax function instead to Java Script Ajax, Coz it's handy :) and to good.

[1]: http://php.net/manual/en/function.extract.php 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T05:33:19.087

编写另一个 AJAX 请求并传递`a`到包含该函数的 PHP 文件中，并将输入作为 GET 或 POST 读取，然后使用您认为合适的输出。使用像 jQuery 这样的 JS 框架将有助于缩短 AJAX 调用。

# php - php pdo 执行数组引用

> ID：11356323
> 
> 赞同：1
> 
> 时间：2012-07-06T05:29:42.290
> 
> 标签：php

以下准备好的语句不会插入数据库。

```
$sid =1;
$sid2 = $GET['sid2']; //empty
$position = 0;
$name = "John";

$new = $connectdb->prepare("INSERT INTO `table1` VALUES ('',:sid,:sid2,:position,:name)");
                $new->execute(array(':sid'=>$sid,':sid2'=>$sid2,':position'=>$position,':name'=>$name)); 
```

当我添加引号以执行数组值时，插入工作。

```
$new->execute(array(':sid'=>"$sid",':sid2'=>"$sid2",':position'=>"$position",':name'=>"$name")); 
```

我想知道的是通过添加引号这会影响 PDO 的消毒吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T05:59:35.907

**在您的情况下**，唯一的区别**`$sid2`是and `"$sid2"`。**

 **如果`$sid2`是字符串，则`$sid2`与 相同`"$sid2"`，但何时`$sid2`为`null`，则情况发生了变化。如果`$sid2`是**`null`**，那么`"$sid2"`将是**空字符串`""`**。

如果您的列`sid2`有`NOT NULL`约束，那么您将无法插入空值，但您可以插入空字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T05:43:36.523

您应该尝试：

```
$new->execute(
 array(
  ':sid'=>$connectdb->quote($sid),
  ':sid2'=>$connectdb->quote($sid2),
  ':position'=>$connectdb->quote($position),
  ':name'=>$connectdb->quote($name),
 )
); 
```**

# php - cakephp - 一个 find() 查询来统治它们

> ID：11356325
> 
> 赞同：1
> 
> 时间：2012-07-06T05:29:58.667
> 
> 标签：php, cakephp

我定义了以下模型关系：

```
class Publication extends AppModel {

    var $name = 'Publication';

    var $hasAndBelongsToMany = array(
        'Author'=>array(
            'className'=>'Author'
        )
    );     
}

class Author extends AppModel {

    var $name = 'Author';

    var $hasAndBelongsToMany = array(
        'Publication'=>array(
            'className'=>'Publication'
        )
    );

    var $belongsTo = array(
        'College' => array (
            'className' => 'College'
        )
    );      
}

class College extends AppModel {

    var $name = 'College';

var $hasMany = array(
        'Department'=>array(
            'className'=>'Department'
        )
    );      
}

class Department extends AppModel {

    var $name = 'Department';

var $belongsTo = array(
        'College'=>array(
            'className'=>'College'
        )
    );      
} 
```

数据库表设置正确（HABTM 的连接表等）。我试图找到一个数据库查询来统治它们。我想创建一个查询，以查找所有相关作者、学院、部门等的出版物。从表单中获取数据后，我尝试运行如下查询：

```
 $conditions = array(
            "Author.id" => $this->data['authors'],
            "Publication.year" => $this->data['year']                                
            );
$publications = $this->Publication->find('all', array('conditions' => $conditions)); 
```

这会引发 SQL 错误，指出 Author.id 不是有效字段。现在，这是因为在搜索 Author.id 时尚未完成与“authors”数据库表的连接。但是，如果我这样做：

```
$pubs = $this->Publication->find('all', array('conditions' => $conditions)); 
```

然后我得到一个数组，其中包含所有相关作者的所有出版物（但由于某种原因，不是相关的大学）。

我的问题是：在搜索 Author.id 之前，我需要做什么才能使表加入？我尝试使用 bindModel、containable、子查询，但由于某种原因（可能是 ID10T 错误）无法使它们工作。

感谢您的任何建议！

编辑：以下调用的结果：

```
$this->Publication->recursive = 2;
$pubs = $this->Publication->find('all'); 
```

如下面所述：

```
Array ( 
```

[0] => Array ( [Publication] => Array ( [id] => 1 [title] => TestArticle [year] => 2011 [type_id] => 3 ) [Type] => Array ( [id] = > 3 [type_name] => Journal Articles ) [Author] => Array ( [0] => Array ( [id] => 2 [firstname] => Jeremy [lastname] => Gustine [middle] => A [faculty ] => 0 [college_id] => 4 [AuthorsPublication] => 数组 ( [id] => 3 [author_id] => 2 [publication_id] => 1 ) [College] => 数组 ( [id] => 4 [ College_name] => 文学、艺术和科学 ) ) [1] => 数组 ( [id] => 3 [firstname] => George [lastname] => Obama [middle] => A [faculty] => 0 [ College_id] => 6 [AuthorsPublication] => 数组（[id] => 2 [author_id] => 3 [publication_id] =>1 ) [College] => Array ( [id] => 6 [college_name] => 公共事务学院) ) [2] => Array ( [id] => 2 [firstname] => Jeremy [lastname] => Gustine [中间] => A [faculty] => 0 [college_id] => 4 [AuthorsPublication] => Array ([id] => 1 [author_id] => 2 [publication_id] => 1) [College] => Array ( [id] => 4 [college_name] => Letters, Arts, and Sciences) ) ) ) [1] => Array ( [Publication] => Array ( [id] => 2 [title] => TestBook [ year] => 2010 [type_id] => 1 ) [Type] => Array ( [id] => 1 [type_name] => Books ) [Author] => Array ( [0] => Array ( [id] = > 7 [firstname] => Sony [lastname] => Stuff [middle] => L [faculty] => 0 [college_id] =>5 [AuthorsPublication] => 数组（[id] => 4 [author_id] => 7 [publication_id] => 2）[College] => 数组（[id] => 5 [college_name] => 护理与健康科学） ) ) ) )

希望这有点可读...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T05:47:01.670

你的第二个发现是正确的

IE`$pubs = $this->Publication->find('all', array('conditions' => $conditions));`

就在上面尝试使用递归 2（下面的代码）来获得相关`College`。

`$this->Publication->recursive = 2;`

# android - 在gridview中获取文件夹图像

> ID：11356327
> 
> 赞同：0
> 
> 时间：2012-07-06T05:30:04.143
> 
> 标签：android, gridview, sd-card

从 sdcard 文件夹中获取图像并在 gridview 中查看时出现错误。

我的班级如下：

```
public class Favourites extends Activity{
    String backupPath=Environment.getExternalStorageDirectory().getPath() + "/WallpaperPro";
    String name;
    GridView favgrid;

    Cursor cursor;
    int columnIndex; 
    String[] imagenames=new String[100];

    @Override 
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        try{
         readfile();
        }catch(Exception e)
        {

        }
        setContentView(R.layout.fav);
        favgrid=(GridView) findViewById(R.id.favgrid);

        String[] projection = {MediaStore.Images.Media._ID};
        // Create the cursor pointing to the SDCard
        cursor = managedQuery( MediaStore.Images.Media.EXTERNAL_CONTENT_URI,
                projection, 
              null ,
                null,  
                null);
        // Get the column index of the image ID
        Toast.makeText(getApplicationContext(),""+cursor.getCount() , 1).show();
        columnIndex = cursor.getColumnIndexOrThrow(MediaStore.Images.Media._ID);
        favgrid.setAdapter(new FavAdapter(this));

    }
    public void readfile()
    {
        //File sdCardRoot = Environment.getExternalStorageDirectory();
        File yourDir = new File(backupPath);
        int i=0;
        for (File f : yourDir.listFiles()) {
            if (f.isFile())
                 name = f.getName();
            imagenames[i]=backupPath+"/"+name;
            Log.i("CUTEWALLPAPER", "imagenames["+i+"]= "+name);
            i++;

                // make something with the name
        }
    }

    public class FavAdapter extends BaseAdapter {
        private Context mContext;
          public FavAdapter(Context c) { 
                mContext = c;
            }
        @Override
        public int getCount() {
            // TODO Auto-generated method stub
            return imagenames.length;
        }

        @Override
        public Object getItem(int position) {
            // TODO Auto-generated method stub
            return position;
        }

        @Override
        public long getItemId(int position) {
            // TODO Auto-generated method stub
            return position;
        }

        @Override
        public ImageView getView(int position, View convertView, ViewGroup parent) {
            // ImageView i = new ImageView(mContext);
             ImageView imageView;
                imageView = new ImageView(mContext);
                if (convertView == null) {

                    imageView.setLayoutParams(new GridView.LayoutParams(100, 100));
                    imageView.setScaleType(ImageView.ScaleType.CENTER_CROP);

                    imageView.setPadding(0, 0, 0, 0);
              } else {
                    imageView = (ImageView) convertView;
                }

             Bitmap b=BitmapFactory.decodeFile(imagenames[position].toString());
             Log.i("CUTEWALLPAPER", "Position"+position+" "+b.getHeight());
             imageView.setImageBitmap(b);

             imageView.setScaleType(ImageView.ScaleType.FIT_CENTER); 
                /* Set the Width/Height of the ImageView. */ 
                imageView.setLayoutParams(new GridView.LayoutParams(300, 300));
                return imageView;
        }

    }

} 
```

我的xml文件如下：

```
<?xml version="1.0" encoding="utf-8"?>
    <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
     android:layout_width="fill_parent" android:weightSum="1" android:orientation="horizontal" android:layout_height="wrap_content"> 
     <GridView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/favgrid"
    android:layout_width="fill_parent"
    android:columnWidth="90dp"
    android:numColumns="1"
    android:verticalSpacing="0dp"
    android:horizontalSpacing="10dp"
    android:stretchMode="columnWidth"
    android:gravity="center" android:layout_height="fill_parent"/>
    </RelativeLayout> 
```

logcat 错误显示空指针异常。

```
07-06 22:57:26.892: ERROR/AndroidRuntime(302): java.lang.NullPointerException
07-06 22:57:26.892: ERROR/AndroidRuntime(302):     at com.cutewallpaper.Favourites$FavAdapter.getView(Favourites.java:112)
07-06 22:57:26.892: ERROR/AndroidRuntime(302):     at com.cutewallpaper.Favourites$FavAdapter.getView(Favourites.java:1)
07-06 22:57:26.892: ERROR/AndroidRuntime(302):     at android.widget.AbsListView.obtainView(AbsListView.java:1274)
07-06 22:57:26.892: ERROR/AndroidRuntime(302):     at android.widget.GridView.makeAndAddView(GridView.java:1218)
07-06 22:57:26.892: ERROR/AndroidRuntime(302):     at android.widget.GridView.makeRow(GridView.java:265)
07-06 22:57:26.892: ERROR/AndroidRuntime(302):     at android.widget.GridView.fillDown(GridView.java:218)
07-06 22:57:26.892: ERROR/AndroidRuntime(302):     at android.widget.GridView.fillFromTop(GridView.java:337)
07-06 22:57:26.892: ERROR/AndroidRuntime(302):     at android.widget.GridView.layoutChildren(GridView.java:1112)
07-06 22:57:26.892: ERROR/AndroidRuntime(302):     at android.widget.AbsListView.onLayout(AbsListView.java:1113)
07-06 22:57:26.892: ERROR/AndroidRuntime(302):     at android.view.View.layout(View.java:6830)
07-06 22:57:26.892: ERROR/AndroidRuntime(302):     at android.widget.RelativeLayout.onLayout(RelativeLayout.java:900)
07-06 22:57:26.892: ERROR/AndroidRuntime(302):     at android.view.View.layout(View.java:6830)
07-06 22:57:26.892: ERROR/AndroidRuntime(302):     at android.widget.FrameLayout.onLayout(FrameLayout.java:333)
07-06 22:57:26.892: ERROR/AndroidRuntime(302):     at android.view.View.layout(View.java:6830)
07-06 22:57:26.892: ERROR/AndroidRuntime(302):     at android.widget.LinearLayout.setChildFrame(LinearLayout.java:1119)
07-06 22:57:26.892: ERROR/AndroidRuntime(302):     at android.widget.LinearLayout.layoutVertical(LinearLayout.java:998)
07-06 22:57:26.892: ERROR/AndroidRuntime(302):     at android.widget.LinearLayout.onLayout(LinearLayout.java:918)
07-06 22:57:26.892: ERROR/AndroidRuntime(302):     at android.view.View.layout(View.java:6830)
07-06 22:57:26.892: ERROR/AndroidRuntime(302):     at android.widget.FrameLayout.onLayout(FrameLayout.java:333)
07-06 22:57:26.892: ERROR/AndroidRuntime(302):     at android.view.View.layout(View.java:6830)
07-06 22:57:26.892: ERROR/AndroidRuntime(302):     at android.view.ViewRoot.performTraversals(ViewRoot.java:996)
07-06 22:57:26.892: ERROR/AndroidRuntime(302):     at android.view.ViewRoot.handleMessage(ViewRoot.java:1633)
07-06 22:57:26.892: ERROR/AndroidRuntime(302):     at android.os.Handler.dispatchMessage(Handler.java:99)
07-06 22:57:26.892: ERROR/AndroidRuntime(302):     at android.os.Looper.loop(Looper.java:123)
07-06 22:57:26.892: ERROR/AndroidRuntime(302):     at android.app.ActivityThread.main(ActivityThread.java:4363)
07-06 22:57:26.892: ERROR/AndroidRuntime(302):     at java.lang.reflect.Method.invokeNative(Native Method)
07-06 22:57:26.892: ERROR/AndroidRuntime(302):     at java.lang.reflect.Method.invoke(Method.java:521)
07-06 22:57:26.892: ERROR/AndroidRuntime(302):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860)
07-06 22:57:26.892: ERROR/AndroidRuntime(302):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618)
07-06 22:57:26.892: ERROR/AndroidRuntime(302):     at dalvik.system.NativeStart.main(Native Method) 
```

我不知道如何解决这个问题。帮助我提前谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T05:46:37.893

1.  您正在使用`imagenames`具有大小的数组，但您不知道“ ”文件夹中`100`存在多少图像。`WallpaperPro`所以你必须需要使用`ArrayList`.

2.  并且您的 GridView 大小也是 100，但可能 imagenames 数组包含少于 100 个图像。这是空指针异常的主要原因。

3.  将此行`String backupPath=Environment.getExternalStorageDirectory().getPath() + "/WallpaperPro";`用作`String backupPath=Environment.getExternalStorageDirectory() + "/WallpaperPro";`或`String backupPath=Environment.getExternalStorageDirectory().getAbsolutePath() + "/WallpaperPro";`

4.  确保您的文件夹名称是`WallpaperPro`.

我希望这会对您有所帮助，如有任何疑问，请发表评论。

# javascript - jquery调整大小到移动窗口iphone / android

> ID：11356328
> 
> 赞同：0
> 
> 时间：2012-07-06T05:30:07.340
> 
> 标签：javascript, jquery

我想知道是否有任何方法可以让我的网页适应 iphone 或 android 的屏幕？我在 $(window).resize 中读到了 $( [window).resize 做什么？JQuery Mobile](https://stackoverflow.com/questions/8704359/what-does-window-resize-do-jquery-mobile)，我阅读了文档，但仍然感到困惑。有人可以为此提供一个例子吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T05:47:57.560

`$(window).resize(...)`*为resize*事件绑定回调或触发此事件。

绑定回调函数，如果用户调整浏览器窗口大小：

```
$(window).resize(function() {
    alert('resize handler called');
}); 
```

如果要手动调用所有侦听器（不带任何参数）：

```
$(window).resize(); 
```

=== 更新 ===

另请参阅[此示例](http://jsfiddle.net/ym8e7/)。

=== 更新 ===

我不认为您可以调整窗口大小，但您可以通过更改视口比例来更改缩放级别（未经测试）：

```
function changeZoomLevel(iScale) {
    var sViewport = '<meta name="viewport" content="width=device-width, initial-scale=' + iScale + '">';
    var jViewport = $('meta[name="viewport"]');
    if (jViewport.length > 0) {
        jViewport.replaceWith(sViewport);
    } else {
        $('head').append(sViewport);
    }
}

var iScale = 0.5 // set or calculate a zoom value between 0 and 1
changeZoomLevel(iScale); 
```

# linux - 如何获取 CPU 使用率

> ID：11356330
> 
> 赞同：40
> 
> 时间：2012-07-06T05:30:18.000
> 
> 标签：linux, go

我的 Go 程序需要知道所有系统和用户进程的当前 cpu 使用百分比。

我怎样才能得到它？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-11-17T17:20:51.787

查看这个包[http://github.com/c9s/goprocinfo](http://github.com/c9s/goprocinfo)，goprocinfo 包会为您完成解析工作。

```
stat, err := linuxproc.ReadStat("/proc/stat")
if err != nil {
    t.Fatal("stat read fail")
}

for _, s := range stat.CPUStats {
    // s.User
    // s.Nice
    // s.System
    // s.Idle
    // s.IOWait
} 
```

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2013-07-22T09:12:43.690

我有一个类似的问题，从来没有找到一个轻量级的实现。这是我的解决方案的精简版本，可以回答您的具体问题。我`/proc/stat`就像 tylerl 推荐的那样对文件进行采样。您会注意到我在样本之间等待 3 秒以匹配 top 的输出，但我也有 1 或 2 秒的良好结果。我在 go 例程中循环运行类似的代码，然后在需要时从其他 go 例程访问 cpu 使用情况。

您还可以解析 的输出`top -n1 | grep -i cpu`以获取 cpu 使用情况，但它在我的 linux 机器上仅采样半秒，并且在重负载期间它会消失。当我将常规顶部与以下程序同步时，它似乎非常匹配：

```
package main

import (
    "fmt"
    "io/ioutil"
    "strconv"
    "strings"
    "time"
)

func getCPUSample() (idle, total uint64) {
    contents, err := ioutil.ReadFile("/proc/stat")
    if err != nil {
        return
    }
    lines := strings.Split(string(contents), "\n")
    for _, line := range(lines) {
        fields := strings.Fields(line)
        if fields[0] == "cpu" {
            numFields := len(fields)
            for i := 1; i < numFields; i++ {
                val, err := strconv.ParseUint(fields[i], 10, 64)
                if err != nil {
                    fmt.Println("Error: ", i, fields[i], err)
                }
                total += val // tally up all the numbers to get total ticks
                if i == 4 {  // idle is the 5th field in the cpu line
                    idle = val
                }
            }
            return
        }
    }
    return
}

func main() {
    idle0, total0 := getCPUSample()
    time.Sleep(3 * time.Second)
    idle1, total1 := getCPUSample()

    idleTicks := float64(idle1 - idle0)
    totalTicks := float64(total1 - total0)
    cpuUsage := 100 * (totalTicks - idleTicks) / totalTicks

    fmt.Printf("CPU usage is %f%% [busy: %f, total: %f]\n", cpuUsage, totalTicks-idleTicks, totalTicks)
} 
```

似乎允许我链接到我在 bitbucket 上编写的完整实现；如果不是，请随时删除此内容。到目前为止，它只适用于 linux：[systemstat.go](https://bitbucket.org/bertimus9/systemstat/)

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2012-07-06T08:59:04.427

获取 CPU 使用率的机制取决于操作系统，因为数字对不同操作系统内核的含义略有不同。

在 Linux 上，您可以通过读取文件系统中的伪文件来查询内核以获取最新的统计信息`/proc/`。当您阅读它们以反映机器的当前状态时，它们会即时生成。

具体来说，`/proc/<pid>/stat`每个进程的文件都包含相关的进程记帐信息。它记录在[proc(5)](http://linux.die.net/man/5/proc)中。您对字段`utime`、`stime`和`cutime`（`cstime`从第 14 个字段开始）特别感兴趣。

您可以很容易地计算百分比：只需读取数字，等待一段时间，然后再次读取它们。取差值，除以您等待的时间，这就是您的平均值。这正是`top`程序所做的（以及执行相同服务的所有其他程序）。请记住，如果您有超过 1 个 CPU，您的 CPU 使用率可能会超过 100%。

如果您只需要系统范围的摘要，`/proc/stat`请使用相同的技术计算您的平均值，但您只需阅读一个文件。

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2012-07-06T07:35:22.627

您可以使用该`os.exec`包执行`ps`命令并获取结果。

这是一个发出`ps aux`命令、解析结果并打印 linux 上所有进程的 CPU 使用率的程序：

```
package main

import (
    "bytes"
    "log"
    "os/exec"
    "strconv"
    "strings"
)

type Process struct {
    pid int
    cpu float64
}

func main() {
    cmd := exec.Command("ps", "aux")
    var out bytes.Buffer
    cmd.Stdout = &out
    err := cmd.Run()
    if err != nil {
        log.Fatal(err)
    }
    processes := make([]*Process, 0)
    for {
        line, err := out.ReadString('\n')
        if err!=nil {
            break;
        }
        tokens := strings.Split(line, " ")
        ft := make([]string, 0)
        for _, t := range(tokens) {
            if t!="" && t!="\t" {
                ft = append(ft, t)
            }
        }
        log.Println(len(ft), ft)
        pid, err := strconv.Atoi(ft[1])
        if err!=nil {
            continue
        }
        cpu, err := strconv.ParseFloat(ft[2], 64)
        if err!=nil {
            log.Fatal(err)
        }
        processes = append(processes, &Process{pid, cpu})
    }
    for _, p := range(processes) {
        log.Println("Process ", p.pid, " takes ", p.cpu, " % of the CPU")
    }
} 
```

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2015-06-24T15:28:53.483

这是一个使用[Cgo](http://blog.golang.org/c-go-cgo)来利用[C 标准库提供的](https://en.wikipedia.org/wiki/C_standard_library)[clock()](http://en.cppreference.com/w/cpp/chrono/c/clock)函数的独立于操作系统的解决方案：

```
//#include <time.h>
import "C"
import "time"

var startTime = time.Now()
var startTicks = C.clock()

func CpuUsagePercent() float64 {
    clockSeconds := float64(C.clock()-startTicks) / float64(C.CLOCKS_PER_SEC)
    realSeconds := time.Since(startTime).Seconds()
    return clockSeconds / realSeconds * 100
} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2017-02-02T15:55:29.230

我最近不得不从 Raspberry Pi (Raspbian OS) 进行 CPU 使用率测量，并将[github.com/c9s/goprocinfo](http://github.com/c9s/goprocinfo)与此处建议的内容结合使用：

*   [准确计算Linux中以百分比给出的CPU使用率？](https://stackoverflow.com/questions/23367857/accurate-calculation-of-cpu-usage-given-in-percentage-in-linux)

这个想法来自`htop`源代码，并且是有两个测量值（以前/当前）以计算 CPU 使用率：

```
func calcSingleCoreUsage(curr, prev linuxproc.CPUStat) float32 {

  PrevIdle := prev.Idle + prev.IOWait
  Idle := curr.Idle + curr.IOWait

  PrevNonIdle := prev.User + prev.Nice + prev.System + prev.IRQ + prev.SoftIRQ + prev.Steal
  NonIdle := curr.User + curr.Nice + curr.System + curr.IRQ + curr.SoftIRQ + curr.Steal

  PrevTotal := PrevIdle + PrevNonIdle
  Total := Idle + NonIdle
  // fmt.Println(PrevIdle, Idle, PrevNonIdle, NonIdle, PrevTotal, Total)

  //  differentiate: actual value minus the previous one
  totald := Total - PrevTotal
  idled := Idle - PrevIdle

  CPU_Percentage := (float32(totald) - float32(idled)) / float32(totald)

  return CPU_Percentage
} 
```

有关更多信息，您还可以查看[https://github.com/tgogos/rpi_cpu_memory](https://github.com/tgogos/rpi_cpu_memory)

# node.js - 在 node.js、socket.io 中使用 redis - 这个 redis 是否可用于正常的 redis 使用？

> ID：11356331
> 
> 赞同：1
> 
> 时间：2012-07-06T05:30:18.750
> 
> 标签：node.js, redis, socket.io

我的理解是`socket.io`使用`redis`

```
socket.set( 'var', val1 );
var val2 = socket.get( 'var' ); 
```

但`redis`不在`node_modules`

是否`socket.io`使用它自己的私有实例`redis`？如果没有，是否可以通过 redis 客户端访问`socket.io`存储在`redis`?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T06:56:36.417

Socket.io 使用 Redis 来存储有关套接字的信息。如果同一应用程序有多个 socket.io 服务器，则需要使用它。

显然，如果您不覆盖 socket.io 的数据，您可以将这个 redis 用于您的应用程序。

Socket.io 使用 redis 的发布/订阅功能（参见[文档](https://github.com/LearnBoost/Socket.IO/wiki/Configuring-Socket.IO)），而不是键/值存储。

# r - 如何对以另一列中的值为条件的列中的值求和？

> ID：11356333
> 
> 赞同：-3
> 
> 时间：2012-07-06T05:30:24.553
> 
> 标签：r

我在数据框中有两列，称为`x`和`total`。如何计算`total`列中的值`x`大于特定数字（假设`Y`）的列中所有单元格的总和？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T05:47:22.747

如果您添加一些示例会非常好，但我认为这就是您想要的：

```
set.seed(123)
x <- rnorm(10)
y <- 0.2

dat <-data.frame(x, total=cumsum(x))
xmorey <- dat$x > y

sum(dat$total[xmorey])
[1] 6.594804 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T06:07:59.323

```
df <- data.frame(x=1:10, total=rnorm(10))
y <- 0.5
sum(df[df$x > y, "total"]) 
```

# php - php 内爆函数不适用于连接变量

> ID：11356335
> 
> 赞同：0
> 
> 时间：2012-07-06T05:30:41.037
> 
> 标签：php, arrays, implode

我有多个数组，我将它们传递给表单提交操作中的文件 sales_process.php。数组的命名如下：boards1 = {a , b , c}, board2 = {b , c , d}, board3 = {a , c , d} 。. 依此类推（值不是 a、b、c、d）。我在我的表单中通过多个“多个选择框”传递它们，其中 a、b、c、d 是我的多个选择选项：

```
for ($count=1;$count<10;$count++)
echo "<td>"."<select name='boards".$count."[]' multiple='multiple'>".showOptionsDrop($boards,$arr)."</select></td>"; 
```

现在，当我将它们传递给文件 sales_process.php 时，我想使用 implode 函数将这些数组转换为字符串，以便我可以将它们存储到我的“学校”表中。在 sales_process.php 文件中，我这样做：

```
for ($i=0;$i<$count;$i++) {
$board = implode(',',${'boards'.$i});
$query = "UPDATE schools SET board = '$board' where schoolcode = (some_no)";
$result = mysql_query($query) or die("Error in updating table :".mysql_error());
} 
```

所以这样，每次我的循环运行时，boardsX 的值都会转换为字符串并存储在表中，其中 X 是 1,2,3.... 等等。
问题是内爆函数不起作用并给出错误：
`Warning: implode() [function.implode]: Invalid arguments passed in C:\xampp\htdocs\relationshipReport\sales_process.php on line 18`

现在，如果您说变量`${'boards'.$i}`不是数组，我这样做并发现它只给了我一个数组：

```
$i=1;
var_dump(${'boards'.$i});
print_r(${'boards'.$i}); 
```

输出为：

```
array(3) { [0]=> string(4) "CBSE" [1]=> string(4) "ICSE" [2]=> string(5) "IGCSE" }
Array ( [0] => CBSE [1] => ICSE [2] => IGCSE ) 
```

我希望我的问题很清楚。请帮助我找出内爆函数中出了什么问题。如果你不明白这个问题，请提出来。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T06:02:12.710

从您的示例中，我相信这是您当前的代码：

```
for ($i=0;$i<$count;$i++) {
    $board = implode(',',${'boards'.$i});
    $query = "UPDATE schools SET board = '$board' where schoolcode = (some_no)";
    $result = mysql_query($query) or die("Error in updating table :".mysql_error());
} 
```

如果是这样，请尝试更改它，使其看起来像这样：

```
for ($i=0;$i<$count;$i++) {
    if(isset($_POST['boards'.$i]))
    {
        $board = mysql_real_escape_string(implode(',',$_POST['boards'.$i]));
        $query = "UPDATE schools SET board = '$board' where schoolcode = (some_no)";
        $result = mysql_query($query) or die("Error in updating table :".mysql_error());
    }
    else
    {
        echo '$_POST[\'boards' . $i . '\'] doesn\'t exist or is null.<br>';
    }
} 
```

这包含一个`if`条件，检查数组条目是否确实存在。如果确实存在，它将运行查询。如果不存在，它会`echo`返回一条消息，告诉您哪个不存在。

即使您已经在前端使用 Javascript 进行了确认，您也应该始终在运行代码之前进行检查，以确保它不会破坏它。您永远不会太安全，尤其是当您的代码包含敏感信息时。

试试这个，让我知道你的情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T05:48:35.773

假设`${'boards'.$i}`来自`$_POST['boards'.$i]`. （如果没有，您正在使用`register_globals`，但这不好。）

对于多选，如果没有选择任何选项，那么`$_POST['boards'.$i]`会给你`null`而不是一个数组。

# c++ - 如何从 c/c++ 与 Oracle 电子商务套件通信

> ID：11356345
> 
> 赞同：0
> 
> 时间：2012-07-06T05:31:37.467
> 
> 标签：c++, c, oracle

请告诉我是否有任何 sdk 可以通过它从 c 或 cpp 通信 Oracle eBusiness Suite。我知道 OCCI 用于与 Oracle DB 交互，我正在寻找一种与 Oracle 电子商务套件交互的方法（付款）

请提供任何帮助

谢谢

斯瓦蒂

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T05:56:21.960

根据 Oracle 文档：

*   一种方法是将 Pro*C Embedded SQL 与您最喜欢的编译器结合使用：

    [http://docs.oracle.com/cd/E18727_01/doc.121/e12897/T302934T458256.htm](http://docs.oracle.com/cd/E18727_01/doc.121/e12897/T302934T458256.htm)

*   另一种方法是将 Web 服务与他们的 SOA 网关一起使用：

    [http://docs.oracle.com/cd/E18727_01/doc.121/e12169/T511175T543269.htm](http://docs.oracle.com/cd/E18727_01/doc.121/e12169/T511175T543269.htm)

*   这是“新手指南”（不是 C++）：

    [http://www.oracleappshub.com/api/a-newbie%E2%80%99s-guide-to-e-business-suite-integration-by-custom-code-using-apis%E2%80%9D/](http://www.oracleappshub.com/api/a-newbie%E2%80%99s-guide-to-e-business-suite-integration-by-custom-code-using-apis%E2%80%9D/)

*   您也可以考虑混搭（不是 C++）：

    [http://www.jackbe.com/enterprise-mashup/blog/mashing-oracle-part-3-mashing-oracle-e-business-suite-1](http://www.jackbe.com/enterprise-mashup/blog/mashing-oracle-part-3-mashing-oracle-e-business-suite-1)

*   不管你做什么，准备好让你的手至少有点脏 PL/SQL，可能还有一些 Java。

# php - 如何检查文件是否被选中在 PHP 中？

> ID：11356351
> 
> 赞同：0
> 
> 时间：2012-07-06T05:32:11.630
> 
> 标签：php, image, forms, upload

我想检查用户是否选择了要上传的图像。用户单击提交后执行此操作的 php 脚本是什么...

我尝试了 file_exist()，但它需要一个字符串而不是一个数组，而且它似乎只适用于绝对路径。由于我不知道用户将从哪个文件夹上传，所以这不起作用。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T05:33:47.563

看看[`$_FILES`超](http://php.net/manual/en/reserved.variables.files.php)全球。

Tizag 教程： [http ://www.tizag.com/phpT/fileupload.php](http://www.tizag.com/phpT/fileupload.php)

如果你做 a `print_r($_FILES)`，你会看到你需要的一切。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T05:35:05.093

您需要使用超级全局变量`$_FILES`。

[更多信息](http://www.php.net/manual/en/features.file-upload.post-method.php)。

# c# - C# 在找到哪种类型后使用对象属性

> ID：11356352
> 
> 赞同：2
> 
> 时间：2012-07-06T05:32:13.840
> 
> 标签：c#, object

假设我有一组具有不同特定泛型类型的对象，例如 int、string、datetime 等

在找出对象（带有`typeOf`）的类型后，我如何才能使用该对象上的函数？

例如

我有`Object []`一个

检查出来后我发现这`a[0]`是一个`DateTime`我想使用它的`ToShortDateString`属性

我怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T05:35:37.090

你可以用[cast](http://msdn.microsoft.com/en-us/library/ms173105%28v=vs.80%29.aspx)来做到这一点。

```
object[] a;

//  ...

if (a[0] is DateTime)
{
   ((DateTime)a[0]).ToShortDateString();
} 
```

# android - 小部件中的权限拒绝

> ID：11356355
> 
> 赞同：2
> 
> 时间：2012-07-06T05:32:27.590
> 
> 标签：android, permissions, android-widget

我正在尝试创建一个联系人小部件，该小部件显示一个带有联系人图片和姓名的 GridView，在按下视图时打开相应联系人的信息，但是在小部件中显示图片时我被拒绝权限。

首先，我刚刚创建了一个应用程序来测试显示 GridView 和查询联系人。我提到这一点是因为这意味着我必须包含正确的权限 (android.permission.READ_CONTACTS) 才能使应用程序正常工作。一旦它起作用了，我就尝试创建一个做同样事情的小部件。除了显示有图片的联系人的图片外，一切都正常工作，由于以下异常而无法正常工作：

```
07-05 22:43:16.934: E/DatabaseUtils(17897): java.lang.SecurityException: Permission Denial: reading com.android.providers.contacts.ContactsProvider2 uri content://com.android.contacts/contacts/165/photo from pid=710, uid=10065 requires android.permission.READ_CONTACTS 
```

相应的应用程序是 com.teslacoilsw.launcher（Nova？），而不是我的包名，以防万一。但我很困惑：该应用程序读取所有内容并显示照片。该小部件可以很好地读取联系人的显示名称和查找 URI，但是在尝试读取图片时会出现这些异常。有什么方法我应该为小部件添加额外的权限吗？

这是我创建 RemoteView 并添加信息的代码

```
RemoteViews rv = new RemoteViews(mContext.getPackageName(), R.layout.contact_widget_row);
contactCursor.moveToPosition(position);
String contactName = contactCursor.getString(
        contactCursor.getColumnIndexOrThrow(ContactsContract.Contacts.DISPLAY_NAME_PRIMARY));
rv.setTextViewText(R.id.text1, contactName);
String uriString = contactCursor.getString(
        contactCursor.getColumnIndexOrThrow(ContactsContract.Contacts.PHOTO_URI));
if(uriString != null)
{
    rv.setImageViewUri(R.id.image1, Uri.parse(uriString));
}
else
{
    rv.setImageViewResource(R.id.image1, R.drawable.ic_contacts_holo_dark);
} 
```

FWIW 空 URI 的图像显示得很好，但这不需要显示联系人的 URI。

如何设置权限以在我的小部件中显示联系人照片？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T13:40:05.370

只是玩弄可能的解决方案，我发现了一些可行的方法。不要使用 URI 在 RemoteViews 中创建图像，而是使用 URI 创建位图，然后使用以下命令在 RemoteViews 中设置图像：

```
if(uriString != null)
{
    //rv.setImageViewUri(R.id.image1, Uri.parse(uriString));
    try
    {
        Bitmap bm = MediaStore.Images.Media.getBitmap(mContext.getContentResolver(), Uri.parse(uriString));
        rv.setImageViewBitmap(R.id.image1, bm);
    }
    catch(Exception e)
    {
        rv.setImageViewResource(R.id.image1, R.drawable.ic_contacts_holo_dark);
    }
}
else
{
    rv.setImageViewResource(R.id.image1, R.drawable.ic_contacts_holo_dark);
} 
```

catch 块是因为 Bitmap 创建调用抛出 FileNotFoundException 和 IOException。

我不知道为什么会这样，但确实如此。我猜是因为在创建位图时（在我的具有 READ_CONTACTS 权限的包内）从联系人中的 URI 读取图像，而不是在启动器绘制小部件时（在我的包外）。

我想感谢[此链接](https://stackoverflow.com/questions/3879992/get-bitmap-from-an-uri-android/4717740#4717740)上的答案，因为它向我展示了如何从 URI 创建位图。

# mysql - Mysql 搜索 1.18 亿行耗时 86 秒

> ID：11356358
> 
> 赞同：0
> 
> 时间：2012-07-06T05:32:43.190
> 
> 标签：mysql, indexing

我得到了一个带有 2 个表的 Mysql Innodb。一个是 117+ 百万行，有超过 340 列，包括姓名、地址、城市、州和邮政编码。第二个表是 17+ 百万行，其中包含姓名、地址、城市、州和邮政编码以及电子邮件。第一个和第二个表中的数据不会被添加或更新。每个表中的 id 都有一个主键。没有定义其他索引。

我首先从 117+ 百万行表中创建了一个联系人表，其中只有名称、地址、城市、州和邮编，使其显着变小。我编写了一个 php 脚本来使用包含 17+ 百万条记录的较小表中的每一行执行搜索，试图在联系人表中找到匹配项。当找到一个时，我将 id 和 email 插入到一个单独的表中。我取消了它，因为每次搜索大约需要 86 秒。拥有 17+ 百万条记录将需要很长时间才能完成。

这是我的搜索查询：

```
q= "从 GB_contacts 中选择 id
WHERE LAST_NAME=\"$LAST\" 和 FIRST_NAME=\"$FIRST\" 和 MI=\"$MIDDLE\"
和 ADDRESS=\"$ADDRESS\" 和 ZIP=\"$ZIP\""。
```

我的问题是我怎样才能更快地做到这一点？我应该对联系人表中的姓名、地址和邮编进行索引，还是应该索引联系人表中的每一列？有没有更快的方法通过mysql做到这一点？我已经阅读了一大堆不同的资源，但不确定哪个是最好的方法。由于这些桌子很大，我尝试做的任何事情都需要很长时间，所以我希望得到一些专家的建议，避免浪费几天、几周和几个月的时间来解决这个问题。感谢您提供任何有用的建议！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T05:42:47.397

最好的方法是在要匹配的字段上创建聚集索引。在这种情况下，从邮政编码开始可能是个好主意，然后是名字或姓氏 - 姓氏更长，因此需要更长的时间来匹配，但也更明显，所以它会留下更少的行做进一步的匹配（你必须测试哪个表现更好）。这里的策略是告诉 mysql 只查找人的口袋，而不是搜索整个数据库。在这样做的时候，你必须聪明地告诉 MySQL 从哪里开始缩小范围。测试时，不要忘记使用 EXPLAIN 命令。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T06:12:04.497

您是否尝试过典型的连接，如果您的连接键被索引，它应该不会花费太多时间。

如果有一次，您可以在连接列上创建索引。

第二步是将返回的记录加载到新的联系人表中。

# javascript - 标签 id 正在改变，如何解决这个问题？

> ID：11356361
> 
> 赞同：0
> 
> 时间：2012-07-06T05:32:57.870
> 
> 标签：javascript, asp.net

我的页面中有这个 asp:label，我想要不时更改文本。但是当我运行代码时，标签 id 会在页面之间发生变化。它被附加了“ctl00_bh_”的东西......

如何解决这个问题？

这是我的代码片段。

```
protected void Page_Load(object sender, EventArgs e)
{
     Page.ClientScript.RegisterStartupScript(this.GetType(), "onLoad", "DisplaySessionTimeout()", true);
}

<asp:Label ID="lblSessionTime" runat="server" />

function DisplaySessionTimeout() {
    document.getElementById("lblSessionTime").innerHTML = "updating text here";
    sessionTimeout = sessionTimeout - 1;
    if (sessionTimeout >= 0)
        window.setTimeout("DisplaySessionTimeout()", 1000);
    else
    {
        alert("Your current Session is over.");
    }
} 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T05:34:32.553

在您尝试访问服务器端控件的 Javascript 中，您需要使用 ClientID，尝试

```
document.getElementById("<%= lblSessionTime.ClientID%>").innerHTML ="updating text here"; 
```

如果您使用的是 .Net 框架 4 或更高版本，则为 aspx 页面中的[ClientIDMode](http://msdn.microsoft.com/en-us/library/system.web.ui.control.clientidmode.aspx)

```
<asp:Label ID="lblSessionTime" runat="server" ClientIDMode="Static" /> 
```

# jquery - 如何使用 jquery 更新值？

> ID：11356366
> 
> 赞同：1
> 
> 时间：2012-07-06T05:33:17.043
> 
> 标签：jquery, asp.net, .net, asp.net-mvc

如何使用 jQuery 将弹出页面的值更新为登录页面。
例如，我有asp页面，从这个页面弹出另一个页面，使用有n个字段
我想将值从弹出页面更新到登陆页面而不做回发。
请建议。
谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T05:37:27.837

*如果在同一个域中*，则可以使用 `window.parent.window`.

然后可以在指定自定义文档（在这种情况下为父窗口的文档）作为上下文时使用 jQuery，例如：

```
var parentDocument = window.parent.window.document
jQuery(selector, parentDocument).blah(..) 
```

where`blah(..)`代表正常的事情要做。以这种方式使用闭包时要*非常小心*- 或者，最好*不要*- 并在 IE 中进行测试，它喜欢部分破坏窗口上下文。同样，也可以调用在父窗口对象上定义的函数。

Web Workers 可能有更好的方法，但我不使用它们，它们只是 HMTL5'ish。

快乐编码！

# wordpress - 联系表格 7 发布到 url，而不是通过 ajx 发布

> ID：11356369
> 
> 赞同：0
> 
> 时间：2012-07-06T05:33:19.197
> 
> 标签：wordpress, plugins, contact-form-7

我在右侧使用联系表格 7 插件 (http://www.brazendev4.com/Cadental/)。当我按下提交按钮时，页面回帖到 url 并刷新，但通常它通过 ajax 发布并且页面不会刷新。任何帮助将不胜感激。

提前致谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T11:06:40.353

最好的办法是查看其他插件甚至您正在使用的主题，确保没有与 CF7 冲突，因为与您使用的其他 javascript 冲突而臭名昭著。

查看他们可能会提供帮助的[文档。](http://contactform7.com/docs/)

否则，如果表单的编辑能力不重要，我什至建议构建自己的表单并通过 AJAX 提交。

有很多资源、技巧和技巧可以做到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T05:47:48.283

如果您打算使用 ajax/js 来处理表单，那么您的表单元素中可能应该有一个空的 action 属性。

例如

```
<form action="" method="post" class="wpcf7-form"> 
```

尝试使用 submit 元素的 onclick 属性调用关联的 javascript 函数来处理并通过 ajax 发布到“/Cadental/#wpcf7-f14-w1-o1”。

例如

```
<input type="submit" value="Submit" onclick="MyJavascriptFunction(this.form)" class="wpcf7-form-control  wpcf7-submit text2"> 
```

我的猜测是，在您的 javascript 有时间处理表单之前，DOM 将发布到 action="/Cadental/#wpcf7-f14-w1-o1" 并重新加载页面。

我看到您在您的页面中使用 jQuery，因此使用他们的序列化表单功能来处理您的表单应该很容易。 [http://api.jquery.com/serialize/](http://api.jquery.com/serialize/)

祝你好运！

# coldfusion - 如何使 Sublime Text 颜色 #foo# 不作为 SQL 查询中的注释

> ID：11356370
> 
> 赞同：3
> 
> 时间：2012-07-06T05:33:20.770
> 
> 标签：coldfusion, sublimetext, sublimetext2

我目前使用 Sublime Text 2 进行 ColdFusion 编码。写这篇的时候

```
<cfquery  name="tester" datasource="#ds#">
   SELECT #createODBCDatetime(trim(arguments.foo))# 
   FROM dual;
</cfquery> 
```

的 `#createODBCDatetime(trim(arguments.foo))#`颜色与评论相同。如何告诉 Sublime Text 2 不要将 ## 视为评论？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-06T08:21:44.660

这种代码格式是由 SQL 包而不是 ColdFusion 包提供给您的。

您可以通过编辑删除格式之类的评论

`Data -> Packages -> SQL -> SQL.tmLanguage`文件。

查找并用或类似的东西`comment.line.number-sign.sql`替换正则表达式字符串。`(#)``(--)`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-06T18:56:07.317

我继续为您推送 cfquery 块中的哈希标记的范围。

如果您想查看其他内容，请确保将其添加到 ColdFusion Sublime 插件 GitHub 存储库的问题部分：[https ://github.com/SublimeText/ColdFusion](https://github.com/SublimeText/ColdFusion)

# uikit - 结合 drawRect: 与其他 UIKit 绘图

> ID：11356374
> 
> 赞同：1
> 
> 时间：2012-07-06T05:33:26.903
> 
> 标签：uikit, core-graphics, drawrect

我正在处理其他人的代码，该代码在`drawRect:`. 但是，我需要向`UIActivityIndicator`视图添加一些动画（例如动画），并且由于 drawRect: 似乎是基于帧的，因此似乎没有一个简单的方法。

我知道在 drawRect 中摆弄视图层次结构是一个错误，所以我不能简单地`addSubview:`. 我希望活动指示器在 之后进行自己的绘图，`drawRect:`因为它应该重叠。我应该如何处理这个？

# android - 键盘不显示

> ID：11356382
> 
> 赞同：0
> 
> 时间：2012-07-06T05:33:56.107
> 
> 标签：android, android-layout

我在键盘不显示时遇到了很多麻烦。

我有一个简单的布局，其中包含所有数字 EditText 视图 - 但是（a）第一个 EditText 字段没有显示键盘，然后剩下的只有 alpha 键盘显示。这是一个错误吗。

这是布局文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" 
    android:orientation="vertical">

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content">

      <TextView
          android:id="@+id/lbBOS_previous"
          android:layout_height="wrap_content"
          android:layout_width="200dp"
            android:paddingLeft="5dip"
          android:paddingBottom="10dip"
          android:text="@string/empties_bos_before"
          android:textAppearance="?android:attr/textAppearanceMedium"
          android:textStyle="bold" />

      <EditText
          android:id="@+id/etBOS_previous"
          android:layout_width="wrap_content"
          android:layout_height="wrap_content"
          android:layout_weight="1"
          android:gravity="right" 
         android:enabled="false"
         android:focusable="false"
          android:ems="10"
          android:inputType="number" >

      </EditText>

   </LinearLayout>

            <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content">

      <TextView
          android:id="@+id/lbBottleSales"
          android:layout_height="wrap_content"
          android:layout_width="200dp"
            android:paddingLeft="5dip"
          android:paddingBottom="10dip"
          android:text="@string/empties_bottleSales"
          android:textAppearance="?android:attr/textAppearanceMedium"
          android:textStyle="bold" />

      <EditText
          android:id="@+id/etBottlesBought"
          android:layout_width="wrap_content"
          android:layout_height="wrap_content"
          android:layout_weight="1"
          android:gravity="right" 
         android:enabled="false"
         android:focusable="false"
          android:ems="10"
          android:inputType="number" >

      </EditText>

   </LinearLayout>

    <LinearLayout
        android:layout_width="match_parent"
            android:layout_height="wrap_content">

             <TextView
                 android:id="@+id/lbEmpties"
                 android:layout_height="wrap_content"
            android:paddingLeft="5dip"
                 android:layout_width="200dp"
                 android:paddingBottom="10dip"
                 android:text="@string/empties_pickup"
                 android:textAppearance="?android:attr/textAppearanceMedium"
                 android:textStyle="bold" />

             <EditText
                 android:id="@+id/etEmptiesPU"
                 android:layout_width="wrap_content"
                 android:layout_height="wrap_content"
                android:gravity="right" 
                 android:layout_weight="1"

                 android:ems="10"
                 android:inputType="number" >

                <requestFocus />
             </EditText>

    </LinearLayout>

    <LinearLayout
                android:layout_width="match_parent"
                android:layout_height="wrap_content">

               <TextView
                   android:id="@+id/lbBOS_after"
                   android:layout_height="wrap_content"
                   android:layout_width="200dp"
                    android:paddingLeft="5dip"
                   android:paddingBottom="10dip"
                   android:text="@string/empties_bos_after"
                   android:textAppearance="?android:attr/textAppearanceMedium"
                   android:textStyle="bold" />

               <EditText
                   android:id="@+id/etBOSAfter"
                   android:layout_width="wrap_content"
                   android:layout_height="wrap_content"
                    android:gravity="right" 
                   android:layout_weight="1"

                   android:ems="10"
                    android:inputType="number" >

               </EditText>

    </LinearLayout>

     <LinearLayout
                android:layout_width="match_parent"
                android:layout_height="wrap_content">

               <TextView
                   android:id="@+id/lbCoolers"
                   android:layout_height="wrap_content"
                   android:layout_width="200dp"
                    android:paddingLeft="5dip"
                   android:paddingBottom="10dip"
                   android:text="@string/empties_coolers"
                   android:textAppearance="?android:attr/textAppearanceMedium"
                   android:textStyle="bold" />

               <EditText
                   android:id="@+id/etCoolersPU"
                   android:layout_width="wrap_content"
                   android:layout_height="wrap_content"
                    android:gravity="right" 
                   android:layout_weight="1"

                   android:ems="10"
                    android:inputType="number" >

               </EditText>

    </LinearLayout>
            <LinearLayout
                android:layout_width="match_parent"
                android:layout_height="wrap_content">

               <TextView
                   android:id="@+id/lbracks"
                   android:layout_height="wrap_content"
                   android:layout_width="200dp"
                    android:paddingLeft="5dip"
                   android:paddingBottom="10dip"
                   android:text="@string/empties_racks"
                   android:textAppearance="?android:attr/textAppearanceMedium"
                   android:textStyle="bold" />

               <EditText
                   android:id="@+id/etRacksPU"
                   android:layout_width="wrap_content"
                   android:layout_height="wrap_content"
                    android:gravity="right" 
                   android:layout_weight="1"

                   android:ems="10"
                    android:inputType="number" >

               </EditText>

    </LinearLayout>
                   <LinearLayout
                android:layout_width="match_parent"
                android:layout_height="wrap_content">

               <TextView
                   android:id="@+id/lbemptiesWarning"
                   android:layout_height="wrap_content"
                   android:layout_width="match_parent"
                    android:paddingLeft="5dip"
                   android:paddingBottom="10dip"
                   android:text="@string/empties_saveWarning"
                   android:textSize="10sp"
                   android:textStyle="bold" />

    </LinearLayout>

         <LinearLayout
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_gravity="bottom">

             <Button
                 android:id="@+id/cmdDoneEmpties"
                 android:layout_width="wrap_content"
                 android:layout_height="wrap_content"
                 android:layout_weight="1"

                 android:text="@string/cmd_done" />

    </LinearLayout>

  </LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T10:00:54.840

您已将`android:enabled`前两个 EditText 中的一个设置为 false，而在另一个上，您已明确要求它仅显示数字键盘，方法是指定`android:inputType="number"`. 所以这种行为是完全正确的。

**编辑：**啊抱歉误读了你的问题。要真正显示数字键盘，您必须针对 Android 1.5 及更高版本。您还应该能够通过执行以下操作来限制显示的字符：

```
<EditText
    android:inputType="phone"
    android:digits="1234567890"
    ...
/> 
```

# java - java中的MongoDB同时读取

> ID：11356386
> 
> 赞同：2
> 
> 时间：2012-07-06T05:34:15.000
> 
> 标签：java, mongodb

我可以同时从 MongoDB 的不同集合中读取数据吗？在java中使用线程。我将这些集合存储在 mongodb 的同一个数据库中。请帮忙..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T06:45:48.257

是的，MongoDB Java 驱动支持多线程访问 mongod 服务器。[Java Driver Concurrency](http://www.mongodb.org/display/DOCS/Java+Driver+Concurrency)描述了驱动程序的并发性注意事项。

# .net - 将用户提升到管理员级别以写入 .NET 中的事件日志

> ID：11356387
> 
> 赞同：0
> 
> 时间：2012-07-06T05:34:15.077
> 
> 标签：.net, vb.net, windows-7, event-log, securityexception

我正在开发一个 Windows .NET 应用程序，我想写入事件日志。

```
Public Shared Sub WriteExceptionToEventLog(ByVal message As String)
        Dim cs As String = "TESTLOG"
        Dim elog As New EventLog()
        Dim sourceExist As Boolean

        Try
            sourceExist = EventLog.SourceExists(cs)
        Catch ex As Exception
            sourceExist = False
        End Try

        If Not sourceExist Then
            Dim ev As New EventLogPermission(EventLogPermissionAccess.Administer, ".")
            ev.PermitOnly()
            EventLog.CreateEventSource(cs, "TESTLOG")
        End If
        elog.Source = cs
        elog.EnableRaisingEvents = True
        EventLog.WriteEntry(cs, message, EventLogEntryType.[Error])

    End Sub 
```

但这不起作用，因为 Windows 7 中的用户需要管理员权限才能写入事件日志。当我以“运行广告管理员”模式执行应用程序时，同样成功。

那么有什么方法可以为 vb.net 中的代码段授予管理员权限（模拟除外）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T06:21:10.717

您只需要管理员权限来创建事件源而不是写入它。

安装时或在提升的命令提示符下手动创建源。

```
eventcreate /ID 1 /L APPLICATION /T INFORMATION /SO mysource /D "created mysource" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T08:00:23.480

您可以将 app.manifest 更改`requestedExecutionLevel`为`requireAdministrator`- 这将在应用程序运行时强制出现 UAC 提示，并且该应用程序只有在可以以管理员身份运行时才会运行。（要改变这个去`Project Properties>Application tab>View Windows Settings`）

如果您的应用程序经常需要管理员权限，那么这确实是唯一的方法。

如果您有时只需要管理员权限，那么您可以在需要写入事件日志时以更高的权限重新启动应用程序。查看[这篇](http://www.codeproject.com/Articles/16796/Riding-the-Vista-UAC-elevator-up-and-down)关于在 .NET 应用程序中使用 UAC 的信息性文章，了解更多信息。

# google-apps-script - 多少个回调元素？

> ID：11356391
> 
> 赞同：3
> 
> 时间：2012-07-06T05:34:35.130
> 
> 标签：google-apps-script

考虑以下简单的代码

```
function doGet(){
  var app = UiApp.createApplication();
  var panel = app.createVerticalPanel();
  var handler = app.createServerHandler('click').addCallbackElement(panel);
  var btn = app.createButton('Click', handler);

  panel.add(button);
  app.add(panel);
  return app;
} 
```

有一个面板，回调元素是单独的面板。但是，当您有许多用于不同目的的面板时，更好的方法是什么 - 添加多个回调元素或将所有各种面板添加到单个“主”面板中，并将主面板添加为回调元素。这些方法的优缺点是什么？

下面的一些代码示例

**选项1：**

```
function doGet(){
  ...
  var panel1 = app.createVerticalPanel();
  var panel2 = app.createVerticalPanel();

  var handler = app.createServerHandler('click')
     .addCallbackElement(panel1) 
     .addCallbackElement(panel2) ; // Notice two callback elements added here 
  var btn = app.createButton('Click', handler);

  ...
  return app;
} 
```

**选项 2：**

```
function doGet(){
  ...
  var masterPanel = app.createVerticalPanel();
  var panel1 = app.createVerticalPanel();
  var panel2 = app.createVerticalPanel();

  var handler = app.createServerHandler('click')
     .addCallbackElement(masterPanel) ;

  var btn = app.createButton('Click', handler);

  masterPanel.add(panel1).add(panel2); // Master panel has both panels added to it      
  ...
  return app;
} 
```

一种选择比另一种更好吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T08:46:26.783

选项 2 更容易在脚本中编写 ;-) 并确保您不会忘记（最终）长长的回调元素列表中的某些内容。

但两者都一样。

# iphone - 缩放后如何在 imageView 中调整图像的大小？

> ID：11356393
> 
> 赞同：1
> 
> 时间：2012-07-06T05:34:44.187
> 
> 标签：iphone, ios, uiscrollview, uiimageview

目标：放大后。调整滚动视图中的图像大小？

我在滚动视图中有一个 imageView。缩放图像后，当我通过 imagePicker 在 imageView 中放置另一个图像时，它已经缩放了。我想要当我在 imageView 中选择另一个适合屏幕的图像时。我尝试了一些代码

```
 CGSize scrollSize = scroll.frame.size;
        [scroll setContentSize:scrollSize];
        imageView.contentMode = UIViewContentModeScaleToFill; 
```

但它不适合我。

谢谢

第一次图像![在此处输入图像描述](../Images/d72668c8ef569ed154a1c4db118455b1.png)

放大后的图像是![在此处输入图像描述](../Images/f990817aae563ac6bf5ade2b91125c7d.png)

当我再次通过 imagePicker 选择图像时，图像是![在此处输入图像描述](../Images/78539a4ba3bf50d1fb07720fbb61d987.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T07:39:46.453

本教程包含您需要的所有代码

[http://www.raywenderlich.com/10518/how-to-use-uiscrollview-to-scroll-and-zoom-content](http://www.raywenderlich.com/10518/how-to-use-uiscrollview-to-scroll-and-zoom-content)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T05:55:31.963

使用以下代码进入滚动视图委托方法

> [scrNxt setZoomScale:1 动画:NO];

示例如下。

```
-(void)scrollViewDidScroll:(UIScrollView *)scrollView{
    if(scrollView==self.scr){
                    [scrNxt setZoomScale:1 animated:NO];

} 
```

这可能会解决您的问题

# matlab - 如何为 fsolve 创建一个变化的变量

> ID：11356399
> 
> 赞同：0
> 
> 时间：2012-07-06T05:35:27.767
> 
> 标签：matlab

我希望 fsolve 每次计算不同 uc 的输出（每次将 uc 增加 0.001）。fsolve 的每个输出都应单独发送到 simulink 模型。所以我设置了一个循环来这样做，但我相信在当前星座（如果它会工作）只会计算 1000 个不同的值？有没有办法单独发送值？

如果没有，我该如何创建参数 uc。从0到1000？我尝试了 uc=0:0.001:1000，但同样，尺寸似乎不合适。

每次调用函数时，如何创建一个获取向量/矩阵的下一个元素的函数？

此致

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T09:13:21.703

迭代一组值并将它们逐个输入到函数的一系列评估中的一般方法遵循以下形式：

```
for ix = 0:0.1:10
   func(arg1, arg2, ix)
end 
```

查看每次调用如何`func`包含 的当前值`ix`？在第一次迭代`ix==0`中，在下一次迭代中，`ix==0.1`依此类推。您应该能够根据自己的需要进行调整；在您的代码中，循环索引（您称之为`i`）未在循环内使用。

现在对您的代码进行一些未经要求的批评。线条

```
x0=[1,1,1];
y=x0(1);
u=x0(2);
yc=x0(3);
options=optimset('Display','off'); 
```

不要随着循环迭代的进行而改变；无论循环迭代器（`i`在您的代码中）的值是多少，它们总是返回相同的值。将它们包含在循环中是没有意义的。

如果 Matlab 决定在每次迭代时计算它们，将它们留在循环中甚至可能会浪费大量时间。我不确定Matlab在这种情况下会做什么，它可能足够聪明，可以确定这些值在每次迭代中都不会改变，但即使这样做，以这种方式编写代码也是不好的编程习惯；将诸如此类的常量表达式提升到循环之外。

从您发布的片段中不清楚您定义的原因`y`，`u`而且`yc`根本没有在任何地方使用它们；也许它们被用于您程序的其他部分。

# jsf-2 - PrimeFaces 布局需要在 FireFox 和 IE 上手动刷新

> ID：11356400
> 
> 赞同：0
> 
> 时间：2012-07-06T05:35:32.593
> 
> 标签：jsf-2, primefaces

我正在使用 Primefaces 3.3.1。我的用例很简单，登录后用户将登陆他的主页。

主页显示`p:layout`西部和中心部分。

*在 Firefox 11 和 IE 9 中，按下登录*按钮后不会显示，但如果我刷新或重新加载页面，它会正确显示。但在 Chrome 中登录布局正确显示后，*无需*手动刷新。

我不确定为什么这不适用于 Firefox 和 IE。

```
home.xhtml

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://java.sun.com/jsf/html"      
    xmlns:p="http://primefaces.org/ui">
<h:head>
</h:head>
<h:body>
<p:layout style="min-width:400px; min-height:200px;">  
    <p:layoutUnit position="west" size="200" header="Left" resizable="true" closable="false" collapsible="true">  
    </p:layoutUnit>  
    <p:layoutUnit position="center">  
    </p:layoutUnit>  
</p:layout>  
</h:body>
</html> 
```

有没有人遇到过类似的问题？

在 Firebug 中，我没有看到任何错误。

更新：

似乎这种情况正在发生，因为`.ui-layout-unit`有`visibility = hidden`. 但为什么？

![在此处输入图像描述](../Images/8bb4800e94c9ec6d96e5e710b1220be0.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T09:59:24.450

我遇到了同样的问题，但是我遵循了该线程的初始指示（可序列化和 config 上的配置`web.xml`）。最后我添加了`<form>`主布局的标签。

有用的链接：

*   [http://forum.primefaces.org/viewtopic.php?f=3&t=13901&p=76327#p76327](http://forum.primefaces.org/viewtopic.php?f=3&t=13901&p=76327#p76327)
*   [http://forum.primefaces.org/viewtopic.php?f=3&t=22685](http://forum.primefaces.org/viewtopic.php?f=3&t=22685)

# android - 线性布局与相对布局

> ID：11356413
> 
> 赞同：71
> 
> 时间：2012-07-06T05:36:36.883
> 
> 标签：android, android-layout, android-linearlayout, android-relativelayout

android中`RelativeLayout`over的优势是什么？`LinearLayout`对于特定设计，您更喜欢哪一个，其背后的原因是什么？

它（RelativeLayout）是否与 HTML 类似或相似`<div>`？

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-07-06T08:43:47.170

阅读[这篇文章](http://android-developers.blogspot.com/2009/02/android-layout-tricks-1.html)：

> Android UI 工具包提供了几个相当容易使用的布局管理器，大多数时候，您只需要这些布局管理器的基本功能来实现用户界面。不幸的是，坚持基本功能并不是创建用户界面的最有效方式。一个常见的例子是滥用[LinearLayout](http://developer.android.com/reference/android/widget/LinearLayout.html)，这导致视图层次结构中的视图激增。添加到应用程序中的每个视图，或者更糟糕的是每个布局管理器都是有代价的：初始化、布局和绘图变得更慢。当您嵌套多个使用[权重](http://developer.android.com/reference/android/widget/LinearLayout.LayoutParams.html#attr_android:layout_weight)参数的 LinearLayout 时，布局传递可能会特别昂贵，这需要对子元素进行两次测量...
> 
> 在 RelativeLayout 中，视图与其父视图、RelativeLayout 本身或其他视图对齐。例如，我们声明描述与 RelativeLayout 的底部对齐，并且标题位于描述上方并锚定到父级的顶部。在描述 GONE 的情况下，RelativeLayout 不知道将标题的底部边缘放置在哪里。为了解决这个问题，你可以使用一个非常特殊的布局参数[alignWithParentIfMissing](http://developer.android.com/reference/android/widget/RelativeLayout.LayoutParams.html#attr_android:layout_alignWithParentIfMissing)。
> 
> 这个布尔参数只是告诉RelativeLayout 在缺少约束目标时使用它自己的边缘作为锚点。例如，如果您将视图放置在 GONE 视图的右侧并将 alignWithParentIfMissing 设置为 true，RelativeLayout 将改为将视图锚定到其左边缘。在我们的例子中，使用 alignWithParentIfMissing 将导致 RelativeLayout 将标题的底部与它自己的底部对齐。
> 
> ...例如，当您为 ListView 中的每个项目使用这样的布局时，差异将更加重要...

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-07-06T05:51:41.983

顾名思义，您可以`LinearLayout`通过您设置的方向线性添加垂直或水平视图。它将一个接一个地添加视图，这取决于设计的要求。并`RelativeLayout`添加相互关联的视图，无需在`RelativeLayout`.

例如，您想`TextView`在另一个下添加两个 s，因此您将首先添加，然后通过添加XML 文件来`TextView`引用第二个`TextView`和第一个。这样你就可以处理了。`TextView``android:layout_below="first textview's id"``RelativeLayout`

# c++ - 如何提取两个括号之间的字符串？

> ID：11356414
> 
> 赞同：2
> 
> 时间：2012-07-06T05:36:46.197
> 
> 标签：c++, c

例如，如果字符串是：

> XYZ ::[1][20 BB EC 45 40 C8 97 20 84 8B 10]

输出应该是：

> 20 BB EC 45 40 C8 97 20 84 8B 10

```
int main()
{
    char input = "XYZ ::[1][20 BB EC 45 40 C8 97 20 84 8B 10]";
    char output[500];
    // what to write here so that i can get the desired output as: 
    // output = "20 BB EC 45 40 C8 97 20 84 8B 10"
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-06T06:05:37.933

在 C 中，您可以通过扫描集转换来做到这一点（虽然它有点像 RE，所以语法有点奇怪）：

```
sscanf(input, "[%*[^]]][%[^]]]", second_string); 
```

如果你想知道它是如何工作的，第一个`[`匹配一个左括号。然后你有一个扫描集，看起来像`%[allowed_chars]`or `%[^not_allowed_chars]`。在这种情况下，您正在扫描到第一个`]`，所以它是`%[^]]`。在第一个中，我们在转换规范的其余部分`*`之间有一个，这意味着将尝试匹配该模式，但忽略它——不将结果分配给任何东西。紧随其后的是字面匹配的 a 。`%``sscanf``]`

然后我们再次重复基本相同的事情，但没有`*`，因此与此转换匹配的第二个数据被分配给`second_string`。

修正了错字并添加了一些额外的代码来跳过最初的`XYZ ::`，工作（测试）代码如下所示：

```
#include <stdio.h>

int main() { 
    char *input = "XYZ ::[1][20 BB EC 45 40 C8 97 20 84 8B 10]";

    char second_string[64];
    sscanf(input, "%*[^[][%*[^]]][%[^]]]", second_string);

    printf("content: %s\n", second_string);
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-06T05:39:19.427

只需找到第二个`[`并开始提取（或仅打印）直到下一个`]`....

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-06T14:41:27.547

最简单的解决方案是：

```
std::string
match( std::string const& input )
{
    static boost::regex const matcher( ".*\\[[^]]*\\]\\[(.*)\\]" );
    boost::smatch matched;
    return regex_match( input, matched, matcher )
        ? matched[1]
        : std::string();
} 
```

正则表达式看起来有点复杂，因为你需要匹配元字符，而且我使用的编译器还不支持原始字符串。（对于原始字符串，我认为表达式是 `R"^(.*\[[^]]\]\[(.*)\])^"`。但我无法验证。）

如果没有匹配，这将返回一个空字符串；如果您确定格式，您可能更愿意抛出异常。您还可以根据需要对其进行扩展以进行尽可能多的错误检查：通常，您验证文本输入的次数越多越好，但是您没有提供足够准确的信息来说明什么是合法的，我无法完全填写. （例如，对于您的示例字符串，您可以将`".*"`正则表达式开头的 替换为`"\\u{3}\\s*::"`：三个大写字符后跟零个或多个空格，然后是两个`':'`。或者第一个 [] 组可能是 `"\\[\\d\\]"`，如果您确定它总是一个数字。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-06T05:41:40.393

如果您愿意转换为，可以使用[string::substr](http://www.cplusplus.com/reference/string/string/substr/)`std::string`

如果您不知道括号的位置，您可以使用`string::find_last_of`最后一个括号，然后再次`string::find_last_of`查找左括号。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-07-06T06:14:39.347

好吧，比如说，您的文件如下所示：

```
XYZ ::[1][20 BB EC 45 40 C8 97 20 84 8B 10]
XYZ ::[1][Maybe some other text]
XYZ ::[1][Some numbers maybe: 123 98345 123 9-834 ]
XYZ ::[1][blah-blah-blah] 
```

提取数据的代码如下所示：

```
#include <iostream>
#include <fstream>

using namespace std;

int main()
{
    //opening the file to read from
    std::ifstream file( "in.txt" );
    if( !file.is_open() )
    {
        cout << "Cannot open the file";
        return -1;
    }
    std::string in, out;
    int blockNumber = 1;//Which bracket block we are looking for. We are currently looking for the second one.

    while( getline( file, in ) )
    {
        int n = 0;//Variable for storing index in the string (where our target text starts)
        int i = 0;//Counter for [] blocks we have encountered.
        while( i <= blockNumber )
        {
            //What we are doing here is searching for the position of [ symbol, starting
            //from the n + 1'st symbol of the string.
            n = in.find_first_of('[', n + 1);
            i++;
        }
            //Getting our data and printing it.
        out = in.substr( n + 1, ( in.find_first_of(']', n) - n - 1) );
        std::cout << out << std::endl;
    }
    return 0;
} 
```

执行此操作后的输出将是：

```
20 BB EC 45 40 C8 97 20 84 8B 10
Maybe some other text
Some numbers maybe: 123 98345 123 9-834 
blah-blah-blah 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-09-17T15:48:00.097

您可以使用此正则表达式来获取“<”和“>”中的内容：

```
// Regex: "<%999[^>]>" (Max of 999 Bytes)
int n1 = sscanf(source, "<%999[^>]>", dest); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-07-06T06:30:22.013

在 C 中使用字符串库。我将给出一个处理单行的代码片段，该代码片段可用于逐行读取文件的循环中。注：`string.h`应包括在内

```
 int length = strlen( input );
    char* output = 0;

    // Search
    char* firstBr = strchr( input, '[' );
    if( 0 != firstBr++ ) // check for null pointer
    {
        char* secondBr = strchr(  firstBr, '[' );
        // we don't need '['
        if( 0 != secondBr++ )
        {
            int nOutLen = strlen( secondBr ) - 1;
            if( 0 < nOutLen )
            {
                 output = new char[nOutLen+1];
                 strncpy( output, secondBr, nOutLen );
                 output[ nOutLen ] = '\0';
            }
        }
    }

    if( 0 != output )
    {
        cout << output;
        delete[] output;
        output = 0;
    }
    else
    {
        cout << "Error!";
    } 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-07-06T05:44:24.200

这可以在非常具体的意义上为您工作：

```
std::string str(input);

std::string output(input.find_last_of('['), input.find_last_of(']'));

out = output.c_str(); 
```

语法不是很正确，所以你需要查一下。您可能需要更好地定义您的问题，并且这仅在您希望在末尾使用带括号的字符串时才有效。

# python - Sqlalchemy 类不可迭代/将关系转换为集合

> ID：11356420
> 
> 赞同：1
> 
> 时间：2012-07-06T05:37:33.617
> 
> 标签：python, sqlalchemy, many-to-many, set, one-to-many

我正在尝试将多对多关系的一对多部分转换为 python set()。代码见以下播放示例：

```
message_tos = Table('message_tos', Base.metadata,                                
    Column('message_id', Integer, ForeignKey('message.id')), 
    Column('address_id', Integer, ForeignKey('address.id'))
)

class Address(Base):
    address = Column(String, nullable=False, unique=True)
    emails = relationship('Message')

    def __init__(self, address):
        self.address = address

class Email(Base):
    from = relationship('Address', backref='from')
    to = relationship('Address', secondary=message_tos, backref='messages_to')
    message_id = Column(String, nullable=False, unique=True)

...

def whatever(*args, **kwargs):
    """
        ...
    """
    email = session.query(Email).filter(Email.message_id==message_id).first()
    blah = set(email.to).union(email.from) # This lines throws an error that Address is not iterable 
```

有什么方法可以运行`set(email.to)`代码（将地址对象放入集合中），还是我完全错误的方式？显然，我可以只做 set([email.to])，但这是一个额外的复杂顺序（并且这个函数可能会被多次调用，可能*很*长的 .to 或 .from 列表），我宁愿不这样做有

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T13:49:26.383

您的错误很可能不是发生在`set(email.to)`part 中，而是发生在 中`.union(email.from)`，因为`email.from`是不可迭代的。根据您的代码，`email.from`是`Address`.

这应该可以工作：`blah = set(email.to).union([email.from])`. *我假设这并没有真正调用 property `from`，因为它是 python 中的保留关键字。我想`sender`是个好名字。*

* * *

*另请注意，在 SA 中搜索主键可以通过以下方式更清楚地完成[`Query.get`](http://docs.sqlalchemy.org/en/rel_0_7/orm/query.html#sqlalchemy.orm.query.Query.get)：*

```
email = session.query(Email).get(message_id) 
```

# java - 编译 JSP（检查 JSP 中的语法错误）

> ID：11356423
> 
> 赞同：9
> 
> 时间：2012-07-06T05:37:36.277
> 
> 标签：java, jsp, syntax, error-handling, syntax-error

我的项目中有 1000 到 1200 个[JSP](http://en.wikipedia.org/wiki/JavaServer_Pages)文件，我想检查这些 JSP 文件中是否存在任何语法错误。那么如何检查 JSP 中是否有错误呢？有什么方法可以编译这些 JSP 吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T05:47:31.330

大多数应用程序服务器都带有一个允许预编译 JSP 文件的 JSP 编译器。JspC 的文档，Tomcat JSP 编译器在*[Jasper 2 JSP Engine How To](http://tomcat.apache.org/tomcat-7.0-doc/jasper-howto.html)*中。我过去也使用过 WebLogic 的 JSP 编译器。

请注意，即使您不使用[Tomcat](http://en.wikipedia.org/wiki/Apache_Tomcat)，您也可以使用此编译器来检查您的 JSP 文件是否编译。如果它们使用 Tomcat 编译，它们应该使用您的容器编译。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-06T06:04:09.563

每个应用服务器都提供一份 JSP 预编译工具的副本。该实用程序将 JSP 转换为相应的 servlet`.java`文件。

其中一些将这些工具作为[Ant](http://en.wikipedia.org/wiki/Apache_Ant)任务提供，您可以在使用 Ant 构建 Web 应用程序时使用这些工具。其中一些将其作为可执行文件提供，您必须显式运行。

有关这些工具的更多信息，请查看以下内容：

*   [Tomcat JSP 编译器](http://tomcat.apache.org/tomcat-6.0-doc/api/org/apache/jasper/JspC.html)
*   [WebLogic JSP 编译器](http://docs.oracle.com/cd/E13222_01/wls/docs90/webapp/reference.html#57794)
*   [在 WebSphere 中预编译 JSP 文件](http://pic.dhe.ibm.com/infocenter/wasinfo/v6r1/index.jsp?topic=/com.ibm.websphere.base.doc/info/aes/ae/trun_app_instwiz.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-06T05:44:51.827

如果您使用[Eclipse](http://en.wikipedia.org/wiki/Eclipse_%28software%29)开发，您可以使用 JSP EDIT 打开 JSP 文件。它正在检查您的 JSP 文件中的语法错误。

# python - 在 python 中编码 *only* 字母数字

> ID：11356424
> 
> 赞同：0
> 
> 时间：2012-07-06T05:37:50.113
> 
> 标签：python, encoding, escaping

python中是否有一个编解码器可以转义不在48-57或65-122的ascii范围内的所有内容（即不是字母数字）

唯一的例外是斜杠和反斜杠字符。

理想情况下，我想转换这样的东西：

```
/MyString/My#^/Blah/ 
```

对此：

```
/MyString/My\x23\x5e/Blah/ 
```

我知道有类似的字符串转义编码，但我需要一个自定义的字符范围进行编码。我正在寻找可以有效执行此操作的巧妙建议或模块。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T06:14:55.180

您可以使用`re.sub`这样的函数参数：

```
s = "/MyString/My#^/Blah/"
import re
print re.sub(r'[^\w/\\]', lambda m: '\\x%x' % ord(m.group(0)), s)
#/MyString/My\x23\x5e/Blah/ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T06:02:03.097

我没有研究这个，但首先想到的是字符串类翻译函数。

[http://docs.python.org/library/string.html#string.translate](http://docs.python.org/library/string.html#string.translate)

如果你正确地把你的编码字符串放在一起（即编写一个脚本来这样做），翻译应该可以完成这项工作。希望有帮助。

# java - 构建 URI 以使用 REST 服务

> ID：11356426
> 
> 赞同：2
> 
> 时间：2012-07-06T05:37:53.733
> 
> 标签：java, rest, uri, jax-rs, resteasy

我需要开发和使用大量 REST 服务。我希望它是一种通用方法，而不是在服务器和客户端对 URI 进行硬编码。因此，将来如果 URI 发生变化，我可以在一个地方进行更改。

有没有最好的方法来构建 URI？这是我想编写的一些示例 REST 服务，

```
http://server/services/user/authenticate?user=x&pass=y
http://server/services/user/authorize?user=x
http://server/services/session/create/id
http://server/services/session/close/id
http://server/services/shopping/orders
http://server/services/shopping/orders/id 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T19:32:20.827

是否可以创建一个为您提供当前 URL 的 BootStrap 服务？

# sql - 我可以为此使用枢轴吗？

> ID：11356427
> 
> 赞同：0
> 
> 时间：2012-07-06T05:38:10.817
> 
> 标签：sql, sql-server-2008

这是表结构

```
 id   empRef_ID   mkt_route_ID    sl_No
----------------------------------------------------
    1     8            6              1
    2     8            8              1
    3     8            20             2
    4     8            22             2
    5     8            23             2 
```

我想像这样

```
 empRef_ID   mkt_route_ID    sl_No
----------------------------------------------------
      8            6/8            1
      8            20/22/23       2 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T05:52:23.190

```
SELECT empRef_ID , mkt_route_ID=  
    STUFF((SELECT '/ ' + cast(mkt_route_ID as varchar)
           FROM table_2 b 
           WHERE b.sl_No = a.sl_No 
          FOR XML PATH('')), 1, 2, ''),sl_No 
FROM table_2 a
GROUP BY empRef_ID,sl_No 
```

# c# - 如何使用 .asmx Web 服务列出将项目添加到 Sharepoint 列表

> ID：11356429
> 
> 赞同：4
> 
> 时间：2012-07-06T05:38:15.200
> 
> 标签：c#, winforms, list, sharepoint-2010, asmx

我在我的项目中使用了 asmx Web 服务。我想将项目添加到现有的 SharePoint 列表。

```
 mylist.Url = Url.TrimEnd('/') + "/_vti_bin/lists.asmx";
            mylist.UseDefaultCredentials = true;
            XmlNode node = mylist.GetList(_listName); 
```

我已经将我的值存储在 DataTable 中。如何从 C# Datatable 直接将数据添加到 SharePoint 列表？还是应该将其转换为 Xml 并添加？

谢谢你

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-06T07:46:13.503

查看[此页面](http://msdn.microsoft.com/en-us/library/ms440289.aspx)以了解 的一般用法`UpdateListItems`，尽管它只有一个更新项目的示例。

然后查看[此页面以获取创建](http://msdn.microsoft.com/en-us/library/lists.lists.updatelistitems.aspx)*新*项目而不是更新现有项目所需发送的 XML 示例。

您需要遍历数据表，为要添加的每个项目构建一个 XML 结构，但是您可以在一个请求中将它们全部添加。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-29T12:40:04.303

以下示例演示如何使用 SharePoint Web 服务，特别是[Lists 类](http://msdn.microsoft.com/en-us/library/lists.lists(v=office.12).aspx)来创建列表项：

```
using System;
using System.Collections.Generic;
using System.Net;
using System.Xml;

namespace SharePoint.Client
{
    public class ListsClient : IDisposable
    {
        public ListsClient(Uri webUri, ICredentials credentials)
        {
            _client = new Lists.Lists();
            _client.Credentials = credentials;
            _client.Url = webUri + "/_vti_bin/Lists.asmx";
        }

        public ListsClient(Uri webUri)
        {
            _client = new Lists.Lists();
            _client.Url = webUri + "/_vti_bin/Lists.asmx";
        }

        /// <summary>
        /// Create a List Item 
        /// </summary>
        /// <param name="listName">List Name</param>
        /// <param name="propertyValues">List Item properties</param>
        /// <returns></returns>
        public XmlNode CreateListItem(string listName,Dictionary<string,string> propertyValues)
        {
            var payload = new XmlDocument();
            var updates = payload.CreateElement("Batch");
            updates.SetAttribute("OnError", "Continue");
            var method = payload.CreateElement("Method");
            method.SetAttribute("ID", "1");
            method.SetAttribute("Cmd", "New");
            foreach (var propertyValue in propertyValues)
            {
                var field = payload.CreateElement("Field");
                field.SetAttribute("Name", propertyValue.Key);
                field.InnerText = propertyValue.Value;
                method.AppendChild(field);
            }
            updates.AppendChild(method);
            return _client.UpdateListItems(listName, updates);
        }

        public void Dispose()
        {
            _client.Dispose();
            GC.SuppressFinalize(this);
        }

        protected Lists.Lists _client;  //SharePoint Web Services Lists proxy

    }
} 
```

**用法**

如何创建任务项：

```
using (var client = new SPOListsClient(webUrl, userName, password))
{
    var taskProperties = new Dictionary<string, string>();
    taskProperties["Title"] = "Order approval";
    taskProperties["Priority"] = "(2) Normal";
    var result = client.CreateListItem(listTitle, taskProperties);    
} 
```

## 参考

*   [SharePoint 2007 网络服务](http://msdn.microsoft.com/en-us/library/office/bb862916%28v=office.12%29.aspx)
*   [Lists.UpdateListItems 方法](http://msdn.microsoft.com/en-us/library/lists.lists.updatelistitems%28v=office.12%29.aspx)

# vim - 使用janus加速macvim中的光标

> ID：11356432
> 
> 赞同：0
> 
> 时间：2012-07-06T05:38:23.670
> 
> 标签：vim, macvim

我安装了 MacVim，想提高光标在屏幕上移动的速度。换句话说，我希望在单击箭头键或 h、j、k 和 l 时光标移动得更快。我要添加什么命令，将它添加到哪个文件？（.vimrc、.vimrc.after 等...）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T08:33:27.937

最简单的解决方案是删除 Janus，它充满了您可能不使用/不需要的设置和插件 (30)。或者，至少，审查完全陌生的人为您做出的所有决定，并删除/重置您不需要的任何东西。

一个更好的解决方案（从长远来看）是学习运动和文本对象：除了非常短的运动之外的任何东西`hjkl`，当你习惯时箭头同样无用`bBeEwW^$fFtT{}()[]<C-f><C-b>/?`等等。

正如我喜欢说的，`:help motion.txt`会让你大吃一惊。

或者`$ vimtutor`，实际上。你做了吗？

# javascript - 如果我可以随时将任何属性插入到对象中，那么在 javascript 中创建类有什么用

> ID：11356434
> 
> 赞同：1
> 
> 时间：2012-07-06T05:38:35.450
> 
> 标签：javascript, oop, class

考虑下面的代码。

我创建了一个空对象。并且在`var1,var2,var3`没有声明的情况下添加。

```
var har = new Object();
har.var1 = "Var1";
har.var2 = "Var1";
har.var3 = "Var1";

alert( har.var1 ); 
```

如果我可以做到这一点，那么当我可以随时引入新属性时，为什么我需要创建一个类并修复属性？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T05:54:10.993

为什么你甚至需要首先使用对象？非面向对象的语言已经是图灵完备的，所以你可以用对象完成的所有事情，你也可以不用它们来完成。

您在示例中显示的并不是真正的对象，而只是字典。在这种情况下，您只需要将几个相关的属性放在一起，匿名非原型对象（如您正在使用的对象）是事实上的标准方法（尽管习惯上使用速记语法初始化它们，例如`var har = {}`）。它*是*一个对象，因为它使用对象数据结构，但它不是面向对象的。

相比之下，实际对象不仅定义数据，还定义您可以对该数据执行的操作。对象不仅具有属性，而且还具有处理这些属性的方法。这些属性通常在对象原型中定义（您称之为“类”，但 Javascript 不是基于类的语言，而是基于[原型的](http://en.wikipedia.org/wiki/Prototype-based)语言）。原型中定义的所有方法都在该原型的所有实例之间共享。

```
function Counter() {
    this.counter = 0;
}

Counter.prototype.increment = function() {
    this.counter++;
    alert(this.counter);
}

var c1 = new Counter();
var c2 = new Counter();

c1.increment(); // alerts 1
c1.increment(); // alerts 2
c2.increment(); // independent from c1: alerts 1 again 
```

每个实例仍然是一个字典，就像在您的示例中一样（您甚至可以向它们添加更多属性，它们不是通过具有构造函数和原型来“修复”的），但现在它也可以对其属性执行任务。这也可以按照您的方式完成：

```
c1 = {
    counter: 0,
    increment: function() {
        this.counter++;
        alert(this.counter);
    }
}

c2 = {
    counter: 0,
    increment: function() {
        this.counter++;
        alert(this.counter);
    }
} 
```

但是，您可以看到，如果您需要两个计数器，而不使用原型，您将需要复制整个对象定义。这样写和维护起来会很麻烦，而且每个`increment`函数都要单独定义，也会浪费内存。

也就是说，如果你需要一个你知道你只需要一个实例的对象，那么为它定义一个构造函数和一个原型是没有意义的。此类对象通常被视为*名称空间*而不是实际对象。

**附录：字典与对象**

字典是保存命名元素的数据结构。除了“字典”之外，它们也被称为*关联数组*或*哈希图*。Javascript 中的对象被实现为字典——每个属性都是字典中的一个命名元素。除了一个普通的字典，对象还有一个*原型*，它有点像一个*父*对象——当你在字典中查找一个命名元素并且它不存在时，它也会自动在原型中搜索。这样，默认属性和方法在原型中只定义一次，不需要复制到每个实例中。（一个对象的*原型*通常是可见的`instance.__proto__`属性，尽管这是非标准的，即使在支持它的浏览器中也不推荐使用；实际原型被标准定义为内部的、不可访问的属性）

因此，Javascript 对象实际上是字典。当你想使用一个普通的字典来存储一些相关的属性时，Javascript 中没有单独的语法来创建一个*不是*对象的字典，所以你创建一个基`Object`类型的实例来保存你的字典（没关系如果你做`var dict = new Object`or `var dict = {}`，结果是一样的）；因此，您在代码中使用的字典也是对象。

# objective-c - 如何将 128 位 UUID 存储到 16 字节 ASCII NSString

> ID：11356440
> 
> 赞同：1
> 
> 时间：2012-07-06T05:39:18.467
> 
> 标签：objective-c, ios, nsstring, ascii, uuid

**我想将一个 128 位的 UUID 保存到一个 16 字节的字符串**中，它将作为我的 ManagedObject 的索引属性存储在 Core Data 中，以确保插入和选择效率。

有没有办法将 128 位 UUID 存储到 16 字节的 ASCII 字符串中？如果有，如何在 32 字节 UUID 字符串和 16 字节 ASCII 字符串之间进行转换？

我尝试使用下面的代码将 CFUUIDBytes 存储到字符串中，但是在生成字符串后值发生了变化。（如果任何字节值 > 127，则其值在生成的字符串中发生变化）

```
CFUUIDRef uuidRef = CFUUIDCreate(kCFAllocatorDefault);
CFUUIDBytes uuidBytes = CFUUIDGetUUIDBytes(uuidRef);
NSString *utf8String = [NSString stringWithFormat:@"%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c", 
                            uuidBytes.byte0, uuidBytes.byte1, uuidBytes.byte2,
                            uuidBytes.byte3, uuidBytes.byte4, uuidBytes.byte5,
                            uuidBytes.byte6, uuidBytes.byte7, uuidBytes.byte8,
                            uuidBytes.byte9, uuidBytes.byte10, uuidBytes.byte11,
                            uuidBytes.byte12, uuidBytes.byte13, uuidBytes.byte14,
                            uuidBytes.byte15]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T05:45:42.560

[在 NSString礼貌](https://stackoverflow.com/questions/7247288/how-to-generate-unique-guid-36-chars-in-sqlite-iphone)上使用这个类别：

```
 static unichar x (unsigned int); 

@implementation NSString (TWUUID) 

+ (NSString*) stringWithUniqueId 
{ 
    CFUUIDRef uuid = CFUUIDCreate(NULL); 
    CFUUIDBytes b = CFUUIDGetUUIDBytes(uuid); 
    unichar unichars[22]; 
    unichar* c = unichars; 
    *c++ = x(b.byte0 >> 2); 
    *c++ = x((b.byte0 & 3 << 4) + (b.byte1 >> 4)); 
    *c++ = x((b.byte1 & 15 << 2) + (b.byte2 >> 6)); 
    *c++ = x(b.byte2 & 63); 
    *c++ = x(b.byte3 >> 2); 
    *c++ = x((b.byte3 & 3 << 4) + (b.byte4 >> 4)); 
    *c++ = x((b.byte4 & 15 << 2) + (b.byte5 >> 6)); 
    *c++ = x(b.byte5 & 63); 
    *c++ = x(b.byte6 >> 2); 
    *c++ = x((b.byte6 & 3 << 4) + (b.byte7 >> 4)); 
    *c++ = x((b.byte7 & 15 << 2) + (b.byte8 >> 6)); 
    *c++ = x(b.byte8 & 63); 
    *c++ = x(b.byte9 >> 2); 
    *c++ = x((b.byte9 & 3 << 4) + (b.byte10 >> 4)); 
    *c++ = x((b.byte10 & 15 << 2) + (b.byte11 >> 6)); 
    *c++ = x(b.byte11 & 63); 
    *c++ = x(b.byte12 >> 2); 
    *c++ = x((b.byte12 & 3 << 4) + (b.byte13 >> 4)); 
    *c++ = x((b.byte13 & 15 << 2) + (b.byte14 >> 6)); 
    *c++ = x(b.byte14 & 63); 
    *c++ = x(b.byte15 >> 2); 
    *c = x(b.byte15 & 3); 
    CFRelease(uuid); 
    return [NSString stringWithCharacters: unichars length: 16];
} 
@end

unichar x (unsigned int c)
{
    if (c < 26) return 'a' + c;
    if (c < 52) return 'A' + c - 26;
    if (c < 62) return '0' + c - 52;
    if (c == 62) return '$';
    return '_';
}

...

    NSLog(@"%u", [[NSString stringWithCString:[[NSString stringWithUniqueId] UTF8String] encoding:NSASCIIStringEncoding] length]); 
```

# javascript - 分拣机货币清洁

> ID：11356444
> 
> 赞同：1
> 
> 时间：2012-07-06T05:39:28.707
> 
> 标签：javascript, jquery, html-table, tablesorter

我花了相当多的时间来调整 arround tablesorter 以使其与以下值一起工作：“R$ 3.400,95” 不用说，我惨遭失败。我确实尝试添加一个`headers: {2: {sorter:"currency"}}`属性，但它根本停止工作。任何人都知道如何解决这个问题？

Javascript：

```
$.tablesorter.addParser({ 
    // set a unique id 
    id: 'thousands',
    is: function(s) { 
        // return false so this parser is not auto detected 
        return false; 
    }, 
    format: function(s) {
        // format your data for normalization 
        return s.replace('$','').replace(/,/g,'');
    }, 
    // set type, either numeric or text 
    type: 'numeric' 
}); 

$(function() {
// call the tablesorter plugin
$("#ver_saida").tablesorter({
    decimal: ",",
    dateFormat: 'uk',
    headers:{2:{sorter:'thousands'}}
});

}); 
```

其他标头工作正常，但最后一个属性使该特定标头停止工作。

这是 HTML 表：

```
<table id="ver_saida" class="tablesorter">
    <thead>
        <tr>
            <th class="sorter-shortDate dateFormat-ddmmyyyy tablesorter-header">Data<span>n</span></th>
            <th>Descrição<span>n</span></th>
            <th>Valor<span>n</span></th>
            <th>Situação<span style="margin-left:2em;">n</span></th>
        </tr>
    </thead>
    <tr class="pago">
        <td class="datout">17/05/2012</td>
        <td class="desout">atraso teste</td>
        <td class="valout"> R$45,46</td>
        <td class="situacao">pago</td>
        <td class="delCel"><button class="deletar" href="financeiro_deletar.php?id=36">Deletar</button></td>
    </tr>
    <tr class="npago late">
        <td class="datout">13/06/2012</td>
        <td class="desout">IPVA macerati</td>
        <td class="valout"> R$5.565,62</td>
        <td class="situacao">não pago</td>
        <td class="delCel"><button class="deletar" href="financeiro_deletar.php?id=38">Deletar</button></td>
    </tr>
<table> 
```

**我做了一个实验：如果我从它读取的单元格 html 中取出“R$”没有问题，但问题是，我不知道如何让它忽略“R$”并仍然将它留在表中（为了便于阅读）。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T20:19:11.957

修改“格式”方法：

```
format: function(s) {
        // format your data for normalization 
        return parseFloat(s.replace(/[^0-9,]/g, '').replace(',', '.'), 10);
    }, 
```

# api - Google+ 公司页面

> ID：11356445
> 
> 赞同：0
> 
> 时间：2012-07-06T05:39:32.653
> 
> 标签：api, google-plus

我正在尝试通过其 API 访问我在 Google+ 中的公司页面。但是，我可以找到一个可以返回我公司页面的端点吗？

我已经查看了这个端点，但我没有看到列出我所有公司的方法。

[https://www.googleapis.com/plus/v1/people/me](https://www.googleapis.com/plus/v1/people/me)

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T18:51:42.363

如果您查看页面的配置文件，您应该能够使用在 URL 中找到的 21 位代码，而不是“我”。

您目前无法确定用户拥有或管理哪些页面。您可能希望[对此错误加注](https://code.google.com/p/google-plus-platform/issues/detail?id=115)星标以表明您有兴趣实现此错误。

# python - 为什么 vim 在运行 Python 代码时不在控制台中打印任何内容？

> ID：11356446
> 
> 赞同：1
> 
> 时间：2012-07-06T05:39:57.027
> 
> 标签：python, vim

我正在尝试使用龙卷风编写一些 python 代码。这是我的代码。

```
import sys
import tornado.ioloop
import tornado.web
import constants

class student():
    name = ""

class MainHandler(tornado.web.RequestHandler):
    def get(self):
        loader = tornado.template.Loader(".")
        print "MainiiiHandler"
        self.write(loader.load("base.html").generate(pics=constants.pics))

application = tornado.web.Application([
    (r"/", MainHandler),
])

if __name__ == "__main__":
    application.listen(8888)
    tornado.ioloop.IOLoop.instance().start() 
```

所以当我访问时`127.0.0.1:8888`，它应该`MainiiiHandler`在终端打印。当我用'python test.py'运行python代码时，结果实际上是这样的。但是当我`:make`在 vim 中运行时，它不会打印`MainiiiHandler`。因为我真的很喜欢 vim 中的 make 函数，所以你能帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T08:49:38.990

检查如何

> > makeprg 是 python %

是写的。

```
:set makeprg="python %" 
```

对我不起作用（回显一个空字符串），而

```
:set makeprg=python\ % 
```

实际上确实有效。

（如果没有帮助）这就是 :h make 显示的内容：

> 带有 'makeprg' 选项的程序使用可选的 [arguments] 启动（默认为 "make"），并且输出保存在错误文件中（对于 Unix，它也会在屏幕上回显）。

如果您的系统不是 Unix，我想您必须提供将为您打印错误文件内容的代码（不确定，因为我只在 Linux 下测试过）。

# java - 尝试获取和解析股票价格时连接超时

> ID：11356448
> 
> 赞同：0
> 
> 时间：2012-07-06T05:40:00.177
> 
> 标签：java, url, dom4j

我正在尝试获取股票的最新股价。作为示例使用的 URL 是

`String stockURL=http://www.google.com/ig/api?stock=ADSL`.

我可以在我的浏览器中打开这个链接。为了解析执行 URL 后得到的文档，我编写了以下代码。

```
public static void main(String[] args) {
    URL url;
    try {
        url = new URL(stockUrl);
        GettingCurrentStockPrice gettingCurrentStockPrice = new GettingCurrentStockPrice();
        gettingCurrentStockPrice.readDoc(gettingCurrentStockPrice
                .parse(url));
    } catch (MalformedURLException e) {
        System.out.println("Encountered MalformedURLException:" + e);

    } catch (DocumentException e) {
        System.out.println("Encountered DocumentException:" + e);
    }

}

private Document parse(URL url) throws DocumentException {
    SAXReader reader = new SAXReader();
    Document document = reader.read(url);
    return document;
}

private void readDoc(Document document) {
    Element root = document.getRootElement();

    // iterate through child elements of root
    for (Iterator<Element> i = root.elementIterator(); i.hasNext();) {
        Element element = (Element) i.next();
        System.out.println(element);
    }

    for (Iterator i = root.elementIterator("company data"); i.hasNext();) {
        Element compName = (Element) i.next();
        System.out.println("compName-->" + compName);
    }

} 
```

在运行程序时，我以，

`Encountered DocumentException:org.dom4j.DocumentException: Connection timed out: connect Nested exception: Connection timed out: connect`.

为什么无法打开给定的 URL？

**更新：**问题来`parse()`了`render.read(url);`。

# ruby-on-rails - Rails 控制器中的自定义操作与宁静的操作？

> ID：11356453
> 
> 赞同：5
> 
> 时间：2012-07-06T05:40:33.310
> 
> 标签：ruby-on-rails, routes

我在使用脚手架生成的控制器中创建自己的操作时遇到了一些麻烦。

我了解所有内容都映射到安静的操作，但是我正在构建一个用户控制器，用户可以在其中登录/注销等，但是当我创建操作并在 routes.rb 中声明它时，当我访问用户/登录时出现此错误

```
Couldn't find User with id=login 
```

它尝试将登录用作 ID 参数，而不是将其用作操作。

路由.rb

```
match 'users/login' => 'users#login' 
```

我认为我在路线上做错了，所以如果有人可以帮助我，那就太好了。

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-06T08:33:16.483

我假设你`routes.rb`看起来像这样：

```
resources :users
match 'users/login' => 'users#login' 
```

问题是 Rails 使用了第一个匹配的路由。从[文档](http://guides.rubyonrails.org/routing.html#crud-verbs-and-actions)中：

> Rails 路由按照它们指定的顺序匹配，所以如果你有一个`resources :photos`上面的 a ，则该行`get 'photos/poll'`的`show`操作路由`resources`将在该行之前匹配`get`。要解决此问题，请将行移到`get`行**上方**，`resources`以便首先匹配。

*因此，要么在之前* 定义您的自定义路线`resources :users`：

```
match 'users/login' => 'users#login'
resources :users 
```

…或使用此语法[添加更多 RESTful 操作](http://guides.rubyonrails.org/routing.html#adding-more-restful-actions)：

```
resources :users do
  collection do
    match 'login'
  end
end 
```

查看从命令行运行的现有路线（及其顺序）[`rake routes`](http://guides.rubyonrails.org/routing.html#seeing-existing-routes-with-rake)。

# playframework - 有什么方法可以在不同的数据库上运行 play framework (1.x) 自动测试？

> ID：11356455
> 
> 赞同：1
> 
> 时间：2012-07-06T05:40:56.797
> 
> 标签：playframework, playframework-1.x

在本地开发中，我想连接到我的个人数据库进行自动测试。在构建场中，我想连接到不同的数据库进行自动测试。怎么可能呢？

Play 的配置似乎非常灵活，除了运行自动测试。我是否在某个地方错过了一个秘密的特殊技巧？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T05:54:01.933

[看到这个线程](https://groups.google.com/forum/?fromgroups#!topic/play-framework/FeCaXXe4En8)...

测试和自动测试始终使用 test 作为 ID，因此您不能根据您所在的测试环境覆盖该值。我不知道这个错误是否已修复，但我无法在灯塔上找到相关的错误或修复。

您可以在 中使用环境变量`application.conf`，[请参见此处](https://stackoverflow.com/questions/6073720/is-there-any-way-to-substitute-environment-variables-in-playframeworks-applicat)，这意味着您可以使用`-Dvariable`. 所以

`play auto-test -Dtestdb=your-cit-db`

然后在你的application.conf中，你会做

`%test.db.name={testdb}`

# git - 如何干净地获取/复制远程 git 分支到本地存储库

> ID：11356460
> 
> 赞同：96
> 
> 时间：2012-07-06T05:41:34.527
> 
> 标签：git

我想要将远程分支“复制”到特定本地分支的精确“副本”。

例如，一个团队成员创建了一个实验性功能，他已将其签入到`experiment`远程存储库上的一个分支中。我希望能够在我的本地存储库上签出一个新分支，并将该`experiment`分支按原样“复制”到我新签出的分支。

我不想将它与我的代码合并——我想完全覆盖我的代码，这样我就可以清楚地看到他在“实验”分支上所做的事情。

如何以一种不会尝试对您自己的本地代码执行合并的方式“获取”（获取/拉取/无论如何......）其他人已提交到远程存储库的远程分支到您自己的本地存储库?

* * *

## 回答 #1

> 赞同：162
> 
> 时间：2012-07-06T05:42:50.787

如果您不关心合并：

```
git reset --hard <remote>/<branch_name> 
```

这将完全满足您的要求：无需合并，无需变基，只需将本地分支置于与远程分支完全相同的状态。

但是，在您的情况下，您不需要它。您想创建一个与远程具有相同状态的**新**本地分支，因此在创建本地分支时指定远程分支[`git checkout`](http://linux.die.net/man/1/git-checkout)：

```
git checkout -b <my_new_branch> <remote>/<branch_name> 
```

如果要在本地使用相同的名称，可以将其缩短为：

```
git checkout <branch_name> 
```

[`git reset --hard`](http://linux.die.net/man/1/git-reset)如果您已经有一个本地分支（例如其中有一些更改），您将使用，放弃*您*所做的任何修改，而是采用远程分支的确切版本。

为确保您拥有远程分支的最新状态，请[`git fetch <remote>`](http://linux.die.net/man/1/git-fetch)在签出或重置之前使用。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2019-12-28T19:26:04.063

我没有足够的代表发表评论，但我想为那些仍在苦苦挣扎的人添加一个例子。在我的示例中，我使用 Github 作为远程并将分支复制到我的 Linux 服务器环境/终端。

首先，您需要运行`git fetch`以确保您是最新的。

使用示例

`git checkout -b <my_new_branch> <remote>/<branch_name>`

有一个名为“picklerick”的远程分支</p>

我跑了

`git checkout -b picklerick remotes/origin/picklerick`

我可能只用于`remote/picklerick`我的远程路径，但这对我有用。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2021-04-07T07:11:23.977

假设`git remote`命令输出`origin`作为结果，那么

```
git fetch origin remote_branch_name:local_branch_name 
```

将创建一个本地分支，它是您需要的远程分支的精确副本。

编辑：有另一种更现代的解决方案：

```
git switch remote_branch_name 
```

该命令将创建一个与指定远程分支同名的本地分支。

# c# - 我应该将 x509 证书的哪一部分存储在数据库中以查找用户？

> ID：11356463
> 
> 赞同：3
> 
> 时间：2012-07-06T05:41:54.603
> 
> 标签：c#, x509, x509certificate2

我有一个针对自定义用户存储使用 Forms Auth 的 Web 应用程序。我们想扩展我们的用户实体，以便我们可以配置一个客户端证书来代替用户名/密码。

我已成功将 IIS 配置为接受客户端证书，并且可以在安全模块的`AuthorizeRequest`事件中检查客户端证书并对其进行验证。最后一步是能够将提供的客户端证书与用户相关联。出于测试目的，我目前正在我的用户表中记录证书的主题名称，并以这种方式查找用户。

当然，这对于生产来说是不够的。我应该从客户端证书中将什么存储在我的用户表中，以便我可以查找并登录用户？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T06:55:41.923

您应该使用证书的指纹作为存储或查找证书的密钥，或者用于查找给定证书的用户。更多信息在这里：http: [//msdn.microsoft.com/en-us/library/system.security.cryptography.x509certificates.x509certificate2.thumbprint.aspx](http://msdn.microsoft.com/en-us/library/system.security.cryptography.x509certificates.x509certificate2.thumbprint.aspx)

# iphone - 如何将按钮添加到 settings.bundle？

> ID：11356474
> 
> 赞同：5
> 
> 时间：2012-07-06T05:43:35.553
> 
> 标签：iphone, objective-c, ios, cocoa-touch

我正在开发一个 iPhone 应用程序，默认情况下用户保持登录状态。如果他想注销，他应该打开“设置”并单击“注销”按钮，这将删除他的数据并在下次打开应用程序时要求登录. 如何添加这样的按钮？与推特设置一样

![在此处输入图像描述](../Images/fb1dc1e9e49007be58ce4e3f1def2a66.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-06T08:49:42.863

As CodaFi said it is not possible. However it could be a good workaround to use a toggle switch for "keep me logged in". And when the user turn it off you can show the login screen on next launch.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-06T06:12:04.153

不幸的是，使用公共 API 无法做到这一点。请记住，Apple 为其及其合作伙伴的应用程序保留了许多未记录（并且非常酷）的功能。您仅限于以下情况：

> **文本字段**：文本字段类型显示标题（可选）和可编辑的文本字段。您可以将此类型用于需要用户指定自定义字符串值的首选项。此类型的键是 PSTextFieldSpecifier。
> 
> **Title**：标题类型显示只读字符串值。您可以使用此类型显示只读首选项值。（如果首选项包含神秘或不直观的值，则此类型允许您将可能的值映射到自定义字符串。）此类型的键是 PSTitleValueSpecifier。
> 
> **拨动开关**：拨动开关类型显示开/关切换按钮。您可以使用此类型来配置只能具有两个值之一的首选项。尽管您通常使用此类型来表示包含布尔值的首选项，但您也可以将其与包含非布尔值的首选项一起使用。此类型的键是 PSToggleSwitchSpecifier。
> 
> **Slider**：滑块类型显示一个滑块控件。您可以将此类型用于表示一系列值的首选项。此类型的值是一个实数，您可以指定其最小值和最大值。此类型的键是 PSSliderSpecifier。
> 
> **多值**：多值类型允许用户从值列表中选择一个值。您可以将此类型用于支持一组互斥值的首选项。这些值可以是任何类型。此类型的键是 PSMultiValueSpecifier。
> 
> **组**：组类型用于在单个页面上组织首选项组。组类型不代表可配置的首选项。它只包含一个标题字符串，该字符串显示在一个或多个可配置首选项之前。此类型的键是 PSGroupSpecifier。
> 
> **Child**: pane The child pane type lets the user navigate to a new page of preferences. You use this type to implement hierarchical preferences. For more information on how you configure and use this preference type, see “Hierarchical Preferences.” The key for this type is PSChildPaneSpecifier.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-16T00:57:48.903

如果您不介意在您的应用程序设置中使用第 3 方附加组件“InAppSettingsKit”，那么看起来它们可以让您做您需要的事情。我目前正在自己​​研究这个，但从快速浏览他们的文档来看，他们似乎允许您添加按钮以及完全自定义的子窗格视图： http: [//www.inappsettingskit.com/](http://www.inappsettingskit.com/)

在该页面上，研究“IASKButtonSpecifier”和“Custom Viewcontrollers”部分。

我将在此处发布后续消息，让您知道这对我来说是如何解决的。我已经在使用 InAppSettingsKit，而且到目前为止我很喜欢它。

从 Github 下载代码和示例应用程序：[https ://github.com/futuretap/InAppSettingsKit](https://github.com/futuretap/InAppSettingsKit)

然后在 XCode 中打开*InAppSettingsKit.xcworkspace*并研究他们如何实现各种不同类型的设置条目。他们绝对支持您正在寻找的东西。这真的很令人印象深刻。

埃里克

# c# - 按内部列表的属性动态排序

> ID：11356478
> 
> 赞同：0
> 
> 时间：2012-07-06T05:43:43.967
> 
> 标签：c#, sorting, dynamic

我有这种结构：

```
public class Record
{
    public int Id { get; set; }
    public List <Field> Fields;
}

public class Field
{
    public int Id { get; set; }
    public string Name { get; set; }
    public string Value { get; set; }
} 
```

所以这是我的自定义类，用字段表示记录。

现在，我有很多记录`List<Record> Records`，我希望能够通过字段值（从`Field.Value`）对记录进行排序。

因为 Field 类包含 Id 属性，所以我有一个列表 ( `List<int> SortByFieldIds`)，它显示了我必须使用哪些字段进行排序。

我的问题是我不知道如何处理它。我不知道如何编写一个方法来获取`List<Record> RecordsToSort`并`List<int> SortByFieldIds`返回我的记录的排序列表。请帮帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T05:46:23.177

您可以使用 LINQ 对列表进行排序。就像是：

```
List<Record> list = new List<Record>();
List<Record> SortByFieldIds = list.OrderBy(r => r.Fields.Select(a => a.Id)).ToList(); 
```

**编辑**

如果要先搜索 ID，然后根据值排序，请尝试：

```
int yourFieldID = 0;//this will hold your Field.ID
List<Record> sortByFieldId = list.OrderBy(
                                          r => r.Fields.Where(
                                          a => a.Id == yourFieldID
                                          ).FirstOrDefault().Value).ToList(); 
```

**结束编辑**

根据 ID 对记录列表进行排序

```
List<Record> sortByRecordId = list.OrderBy(r => r.Id).ToList(); 
```

记得包括

```
using System.Linq; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T11:04:00.400

既然你提到你有一个`List<int>`ID，我想你想根据这些 ID 对`List<Field>`& 最后根据 ID 对字段进行`Records`排序`ID`。`Field`

例如，如果有 2 条记录

```
record 1 has 3 fields with IDs (1,2,3)
record 2 had 4 fields with IDs (4,3,6,2) 
```

现在，如果`List<int>`有值`6,2,3`，您希望使用 ID 为 6、2、3 的字段返回记录，并且需要为每条记录对字段进行排序。

因此，对于示例案例，您的结果将是

```
record 1 has 3 fields with IDs (2,3)
record 2 had 4 fields with IDS (2,3,6) 
```

**如果这是您所追求的，那么这里是一个实际示例的代码**

```
 List<Field> fields1 = new List<Field>();
        fields1.Add(new Field() { Id = 1, Name = "ONE", Value = "one" });
        fields1.Add(new Field() { Id = 2, Name = "TWO", Value = "two" });
        fields1.Add(new Field() { Id = 3, Name = "THREE", Value = "three" });

        List<Field> fields2 = new List<Field>();
        fields2.Add(new Field() { Id = 4, Name = "FOUR", Value = "four" });            
        fields2.Add(new Field() { Id = 3, Name = "THREE", Value = "three" });
        fields2.Add(new Field() { Id = 6, Name = "SIX", Value = "six" });
        fields2.Add(new Field() { Id = 2, Name = "TWO", Value = "two" });

        records.Add(new Record() { Id = 1, Fields = fields1 });
        records.Add(new Record() { Id = 2, Fields = fields2 });

        //You did mention that you already have this 
        List<int> SortByFieldIds = new List<int>();
        SortByFieldIds.AddRange(new List<int> { 6, 2, 3 });

        //before foreach loop records will have 2 records (record1 with fields 1,2,3 and record2 with fields 4,3,6,2)

        foreach (Record r in records)
        {
            r.Fields = r.Fields.Where(f => SortByFieldIds.Contains(f.Id)).OrderBy(f => f.Id).ToList();
        }

        //after foreach loop records will have 2 records (record1 with fields 2,3 and record2 with fields 2,3,6) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T05:47:10.480

您可以使用 LINQ[`OrderBy`](http://msdn.microsoft.com/en-us/library/bb549422)

您可以在类级别制作 SortByFieldIds，并将[IComparer](http://msdn.microsoft.com/en-us/library/8ehhxeaf)传递给 OrderBy

# objective-c - 内存管理（objective-c）

> ID：11356481
> 
> 赞同：0
> 
> 时间：2012-07-06T05:44:11.873
> 
> 标签：objective-c, ios, xcode, memory-management, allocation

我有一个`AudioInfo`包含一些`NSString`对象的类。

在`main()`我创建（分配）一些`AudioInfo`对象。

稍后`main()`我想让第二个`AudioInfo`对象具有相同的`NSString`对象。

我从第一个开始`init`第二`NSStrings`个。

问题：

在创建（分配）第二个对象后，我是否应该保留第一个`AudioInfo`对象以使它们都具有保留计数 = 1？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T05:55:09.650

在这种情况下，`AudioInfo`应该只是`copy`将字符串属性传递给其 ivars（您应该默认声明您的`NSString`属性`copy`），并且每个实例都将管理自己的引用。`AudioInfo`然后在您使用完这些实例后释放它们。这里的所有都是它的。

# html - 如何在 DIV 内垂直对齐文本和图像？

> ID：11356482
> 
> 赞同：1
> 
> 时间：2012-07-06T05:44:15.183
> 
> 标签：html, css

我正在尝试将图像和文本垂直居中。这是我在 wokring jsfiddle [http://jsfiddle.net/4a9XX/](http://jsfiddle.net/4a9XX/)中的代码，您可以看到文本低于图像如何使它们保持水平？

CSS

```
#display {
position:fixed !important;
bottom:0;
z-index:999;
background-color:#D41924;
width:100%;
padding:5px;
color:#FFF;
font-weight:bold;
vertical-align:middle;
} 
```

HTML

```
<div id="display"><img src="http://i46.tinypic.com/2jd4due.gif" /> SOME TEXT </div> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T05:47:42.013

## 使用这个 ( `vertical-align`)：

```
​#display img, #display span {vertical-align: middle;}​' 
```

并将文本包含在`<span>`标签内。

### 更新小提琴：http: [//jsfiddle.net/4a9XX/10/](http://jsfiddle.net/4a9XX/10/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T05:48:31.947

[http://jsfiddle.net/4a9XX/4/](http://jsfiddle.net/4a9XX/4/)

在文本中添加了`span`标签。

```
<div id="display"><img src="http://i46.tinypic.com/2jd4due.gif" /> <span>SOME TEXT</span> </div> 
```

使用 CSS 移动它`position: relative;`

```
#display span {
   position: relative;
   top: -3px;    
} 
```

`#display span`选择一个`span`元素 id 的子标签`display`。其他一切都是不言自明的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T05:50:19.547

**CSS**

```
 #display {
position:fixed !important;
bottom:0;
z-index:999;
background-color:#D41924;
width:100%;
padding:5px;
color:#FFF;
font-weight:bold;
}

img{
vertical-align:top;
}
p{
display:inline-block;
    vertical-align:top;
} 
```

**HTML**

```
<div id="display"><img src="http://i46.tinypic.com/2jd4due.gif" /> <p>SOME TEXT </p></div> 
```

因为`img` **标签**是`inline-block` **元素**

现场演示[http://jsfiddle.net/4a9XX/8/](http://jsfiddle.net/4a9XX/8/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-06T05:50:51.333

该`vertical-align`属性应应用于内部元素而不是容器。您可以将文本放入 a并同时`span`应用于and ：`vertical-align``span``img`

```
​#display img, #display span {
    vertical-align:middle;
}​ 
```

这是[小提琴](http://jsfiddle.net/UYwJe/)。

# url - 打开带有 url 的 exe 文件

> ID：11356483
> 
> 赞同：0
> 
> 时间：2012-07-06T05:44:20.063
> 
> 标签：url, google-chrome, browser

我想通过在谷歌浏览器的 url 栏中输入文件位置来开始运行程序，但是如果我尝试输入文件位置，它会再次下载文件。是我可以使用的插件吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T20:27:49.320

您不能通过键入 url 来运行 EXE 文件。浏览器的工作方式，它要求您下载或保存文件，如果 url 末尾有一个 exe 文件名（如果服务器上有一个）

要以您想要的方式运行 exe 文件，您可以使用脚本语言，例如 PHP、ASP 或任何其他语言。它的工作方式是，脚本将查看 url 并查看是否包含任何命令。如果找到，它会使用`exec`命令执行一个 exec 文件。下面是一个例子

```
exec("ping yahoo.com", $output, $return);
echo "The command returned $return, and output:\n";
echo "<pre>";
var_dump($output);
echo "</pre>"; 
```

输出

```
array(12) {
  [0]=>
  string(0) ""
  [1]=>
  string(55) "Pinging yahoo.com [72.30.38.140] with 32 bytes of data:"
  [2]=>
  string(0) ""
  [3]=>
  string(51) "Reply from 72.30.38.140: bytes=32 time=313ms TTL=50"
  [4]=>
  string(51) "Reply from 72.30.38.140: bytes=32 time=322ms TTL=50"
  [5]=>
  string(51) "Reply from 72.30.38.140: bytes=32 time=242ms TTL=50"
  [6]=>
  string(51) "Reply from 72.30.38.140: bytes=32 time=260ms TTL=50"
  [7]=>
  string(0) ""
  [8]=>
  string(33) "Ping statistics for 72.30.38.140:"
  [9]=>
  string(56) "    Packets: Sent = 4, Received = 4, Lost = 0 (0% loss),"
  [10]=>
  string(46) "Approximate round trip times in milli-seconds:"
  [11]=>
  string(53) "    Minimum = 242ms, Maximum = 322ms, Average = 284ms" 
```

请注意，该程序将在托管页面的服务器计算机上运行。因此，如果您键入[http://www.yahoo.com/turn-off-lights](http://www.yahoo.com/turn-off-lights)。它将关闭雅虎大楼的灯，而不是其他任何地方。

# google-bigquery - 仅为某些列将数据附加到 bigquery 表

> ID：11356491
> 
> 赞同：1
> 
> 时间：2012-07-06T05:45:20.927
> 
> 标签：google-bigquery

我已经通过浏览器工具创建了一个带有模式的大查询表。下次我通过本地的 API 调用将 csv 附加到该表中。但是该 csv 不包含我已经指定的所有列。所以我收到错误“提供的架构与表 xxxxxxxxxxxxx:xxxx.xxxx 不匹配。” .那么如何通过 API 调用将值附加到某些特定列的 bigquery 表中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T23:51:39.777

您可以使用更窄的模式附加到表。也就是说，如果您的表有字段“A”、“B”和“C”，您可以附加一个只有字段“A”和“C”的 CSV 文件，只要字段“B”标记为可选（这是默认设置）。只需确保在加载作业中提供正确的 CSV 文件架构即可。

或者，“allowJaggedRows”选项可以帮助您。这使您可以指定比架构中更少的列，其余的将用空值填充。当然，如果你想跳过模式中间的列，你可能会不走运。

最后，您可以通过 tables.update() 或 tables.patch() 调用更新架构以添加列。这可以让您添加不在原始表中的列。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-05T21:16:05.653

您可以使用 JSON 数据格式而不是 CSV 来执行此操作，前提是您的字段标记为 NULLABLE（而不是 REQUIRED）。

这部分文档介绍了 JSON 格式：[https ://developers.google.com/bigquery/preparing-data-for-bigquery](https://developers.google.com/bigquery/preparing-data-for-bigquery)

# php - 无法获取参数（）

> ID：11356492
> 
> 赞同：0
> 
> 时间：2012-07-06T05:45:20.907
> 
> 标签：php, magento

我想在 Magento 管理员的销售>订单上添加一个操作。

截屏-
![在此处输入图像描述](../Images/96c424b10cabdf014524cdca877709d3.png)

我遵循了这个博客中的第二种方法 - [www.blog.magepsycho.com/adding-new-mass-action-to-admin-grid-in-magento/](http://www.blog.magepsycho.com/adding-new-mass-action-to-admin-grid-in-magento/)

我的问题 - 我无法在操作控制器中获取订单 ID（用于对其执行操作）。
我的代码在`class MyPackage_MyModule_IndexController extends Mage_Adminhtml_Controller_Action`

```
protected function _initOrder()
{
    $id = $this->getRequest()->getParam('order_id'); ///TROUBLE HERE
    $order = Mage::getModel('sales/order')->load($id);

    if (!$order->getId()) {
        $this->_getSession()->addError($this->__('This order no longer exists.'));
        $this->_redirect('dash/sales_order');
        $this->setFlag('', self::FLAG_NO_DISPATCH, true);
        return false;
    }
    Mage::register('sales_order', $order);
    Mage::register('current_order', $order);
    return $order;
}
public function approvecodAction() {
    if ($order = $this->_initOrder()) {
        try {
            $order->setStatus('codapproved')
                ->save();
            $this->_getSession()->addSuccess(
                $this->__('The order has been approved for COD.')
            );
        }catch (Mage_Core_Exception $e) {
            $this->_getSession()->addError($e->getMessage());
        }catch (Exception $e) {
            $this->_getSession()->addError($this->__('The order has not been approved for COD.'));
            Mage::logException($e);
        }
        $this->_redirect('*/sales_order/view', array('order_id' => $order->getId()));
    }
} 
```

注意我复制了上述两个函数`app/code/core/Mage/Adminhtml/controllers/Sales/OrderController.php`并为我的目的进行了修改。

**请告诉我如何以及在哪里设置参数订单ID？或者如果他们正在设置，那么如何获得它们？**

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T05:58:14.127

您正在处理控制器上的批量操作回调，因此您将在参数中获得一组值，而不是单个值。您将需要在您的操作方法中执行更多类似的操作：

```
public function approvecodAction() {
    $orderIds = $this->getRequest()->getPost('order_ids', array());
    foreach ($orderIds as $orderId) {
        $order = Mage::getModel('sales/order')->load($orderId);

        try {
            $order->setStatus('codapproved')
            ->save();
            $this->_getSession()->addSuccess(
                    $this->__('The order has been approved for COD.')
            );
        }catch (Mage_Core_Exception $e) {
            $this->_getSession()->addError($e->getMessage());
        }catch (Exception $e) {
            $this->_getSession()->addError($this->__('The order has not been approved for COD.'));
            Mage::logException($e);
        }
    }
    $this->_redirect('*/sales_order/view', array('order_id' => $order->getId()));
} 
```

希望有帮助！

# java - eclipse/java server faces-如何为 jsf 2.1 配置 facets 项目

> ID：11356494
> 
> 赞同：3
> 
> 时间：2012-07-06T05:45:38.953
> 
> 标签：java, eclipse, jsf, jakarta-ee, jsf-2

我正在尝试在 Eclipse Java EE IDE 中创建一个 JSF 2.1 项目。

在一个屏幕中，Eclipse 要求提供 JSF 实现库——在这里我已将 JSF 2.1.10 定义为 JSF 实现库——带有 JAR 文件

```
jsf-api-2.1.10.jar 
```

和

```
jsf-impl-2.1.10.jar. 
```

然而，在添加上述实现库后，我在 Eclipse IDE 的同一屏幕中收到以下错误消息——

```
 Required class javax.faces.FactoryFinder does not exist in selected libraries. 
```

我什至添加了 Apache MyFaces Core 2.1.8 和 Mojarra 2.1.10，但上面的错误消息拒绝消失......我在这里错过了什么？

如何在 Eclipse Java EE IDE 中正确配置和设置 JSF 2.1 项目？

谢谢...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-16T23:03:48.323

**这是我的解决方案：**

![使用 Eclipse 下载库](../Images/6207a157cd16c1965e69cac3b67a9fda.png)

***日食朱诺**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T11:17:56.557

创建项目时，您应该单击 eclipse Project Facet 的 JaveServerfaces 标记。请参阅此

![在此处输入图像描述](../Images/8cfe1784cc28eeac407c8c8beb53bfba.png)

# javascript - 如何在 JavaScript 文件中包含 CSS

> ID：11356502
> 
> 赞同：5
> 
> 时间：2012-07-06T05:46:04.463
> 
> 标签：javascript, html

我是 HTML、CSS 和 JS 的新手。目前我正在使用 JavaScript 来创建一个饼图。我的疑问是如何`hover`在函数中包含 CSS 函数。

谁能帮我`hover`在下面的 JavaScript 代码中的函数中包含 CSS？

```
<script type="text/javascript">
    function PieChart(id, o) {
        this.includeLabels = true;
        if (o.includeLabels == undefined) {
            this.includeLabels = false;
        }
        else {
            this.includeLabels = o.includeLabels;
        }
        this.data = o.data ? o.data : [30, 70, 45, 65, 20, 130]; 
        this.labels = o.labels ? o.labels : ["First", "Second", "Third", "Fourth", "Fifth", "Sixth"];
        this.colors = o.colors ? o.colors : [
                ["#bbddb3", "#1d8e04"], // green
                ["#e2f5b4", "#9edd08"], // yellow green
                ["#fdfbb4", "#faf406"], // yellow
                ["#fbd4b7", "#f2700f"], // orange
                ["#f8bdb4", "#ea2507"], // red
                ["#e2bcbd", "#9e2126"]  // purple
            ];

        this.canvas = document.getElementById(id);
    }

    PieChart.prototype = {

        select: function(segment) {
            var self = this;
            var context = this.canvas.getContext("2d");
            this.drawSegment(this.canvas, context, segment, this.data[segment], true, this.includeLabels);
        },
        draw: function() {

            var self = this;
            var context = this.canvas.getContext("2d");
            for (var i = 0; i < this.data.length; i++) {
            this.drawSegment(this.canvas, context, i, this.data[i], true, this.includeLabels);
            }
        },

        drawSegment: function(canvas, context, i, size, isSelected, includeLabels) {
            var self = this;
            context.save();
            var centerX = Math.floor(canvas.width / 2);
            var centerY = Math.floor(canvas.height / 2);
            radius = Math.floor(canvas.width / 2);

            var startingAngle = self.degreesToRadians(self.sumTo(self.data, i));
            var arcSize = self.degreesToRadians(size);
            var endingAngle = startingAngle + arcSize;

            context.beginPath();
            context.moveTo(centerX, centerY);
            context.arc(centerX, centerY, radius, startingAngle, endingAngle, false);
            context.closePath();

            isSelected ? 
                context.fillStyle = self.colors[i][1] :
                context.fillStyle = self.colors[i][0];

            context.fill();
            context.restore();

            if (includeLabels && (self.labels.length > i)) {
                self.drawSegmentLabel(canvas, context, i, isSelected);

            }
        },

        drawSegmentLabel: function(canvas, context, i, isSelected) {
            var self = this;
            context.save();
            var x = Math.floor(canvas.width / 2);
            var y = Math.floor(canvas.height / 2);
            var angle = self.degreesToRadians(self.sumTo(self.data, i));

            context.translate(x, y);
            context.rotate(angle);
            context.textAlign = 'center';
            var fontSize = Math.floor(canvas.height / 25);
            context.font = fontSize + "pt Helvetica";

            var dx = Math.floor(canvas.width * 0.5) - 100;
            var dy = Math.floor(canvas.height * 0.05);
            context.fillText(self.labels[i], dx, dy+dy);
            alert(self.labels[i]);
            context.restore();
        },

        drawLabel: function(i) {
            var self = this;
            var context = this.canvas.getContext("2d");
            var size = self.data[i];

            self.drawSegmentLabel(this.canvas, context, i, size, true);

        },

        degreesToRadians: function(degrees) {
        return (degrees * Math.PI)/180;
        },

        sumTo: function(a, i) {
            var sum = 0;
            for (var j = 0; j < i; j++) {
                sum += a[j];
            }
            return sum;
        }

    }
</script> 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-06T07:19:21.493

1.  创建样式元素并编写一些样式规则。

    ```
    var styleEl = document.createElement('style');
    styleEl.innerHTML = 'body{颜色:蓝色; ... 其他样式}';
    document.head.appendChild(styleEl);

    ```

2.  设置 cssText，新规则将重写旧规则；

    ```
    document.body.style.cssText = '颜色：#abcdef;';
    ```

3.  直接设置风格

    ```
    document.body.style.color = '黑色';
    ```

可能还有其他一些技巧。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T06:50:31.970

我建议你从 jQuery 开始，因为它比普通的 JavaScript 和 DOM 操作更容易使用。

看看[悬停](http://api.jquery.com/hover/)事件和[css()](http://api.jquery.com/css/)函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T07:05:30.040

```
<!DOCTYPE html>
<html>
<head>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript">
$(document).ready(function(){

$("p").hover(function(){
    $("p").css("color","red");
});
});
</script>
</head>

<body>
<p>This is a paragraph.</p>
</body>
</html> 
```

# php - 从推特导入图片

> ID：11356504
> 
> 赞同：-1
> 
> 时间：2012-07-06T05:46:13.807
> 
> 标签：php, twitter

可以使用他们的 API 从 Twitter 导入图片（不是个人资料图片）。我的意思是在推文中附加的图片。

非常感谢您的帮助，

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T06:59:56.040

像这样的东西可能会对你有所帮助。

```
https://twitter.com/statuses/user_timeline/USERNAME.xml?count=100&page=1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T17:27:21.967

图片不附加到推文，但图片的 URL 是。让事情变得更容易的一件事是使用包含实体的 API 调用。URL 实体是从推文中提取的 URL 的副本。您可以查看文件扩展名以确定 URL 是否指向图像。然后编写代码从 URL 中读取图像数据。

# django - Django：django.contrib.sites、SITE_ID、中断应用

> ID：11356505
> 
> 赞同：1
> 
> 时间：2012-07-06T05:46:16.257
> 
> 标签：django

我刚刚通过 Heroku 延迟了我的第一个 Django 应用程序，我遇到了一个很难解决的问题。我已经安装了 django-registration 和配置文件，除非“django.contrib.sites”和 SITE_ID 从设置中删除，否则显然有些东西会发生冲突。不幸的是，当用户提交要显示的内容时，我收到以下错误：

```
TemplateSyntaxError at /Caught AttributeError while rendering: 'Settings' object has no attribute 'SITE_ID'. 
```

只有当通过管理员删除用户提交的内容时，站点才会重新存储。

添加 django.contrib.sites 和 SITE_ID 只会杀死整个应用程序。这些问题在最初的开发过程中并没有出现，而只是在部署应用程序时才出现。看看是否有人对如何解决这个问题有任何见解或建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T07:14:07.660

在设置文件中添加 SITE_ID 时会出现什么样的错误？

当表中的数据存在差异时，通常会出现此问题`django_site`。检查您的 dev 和 prod 数据库在该表中是否具有相同的值。一些模型可能引用了一些使用站点模型本身的 Django 模型，除非它们在数据库中找不到有效的`django.contrib.sites.models.site`实例，否则它们会引发异常。例如，如果使用 FlatPage 模型，就会发生这种情况。

# asp.net - 在 IE9 中 ajax 回发后隐藏的 jQuery 移动元素

> ID：11356509
> 
> 赞同：2
> 
> 时间：2012-07-06T05:46:33.230
> 
> 标签：asp.net, jquery-mobile, asp.net-ajax, telerik, internet-explorer-9

**首先是一些背景知识：** 我有一个使用 ASP.NET Web 表单 + jQuery 1.6.4 + jQuery Mobile 1.1.0 + Telerik RadAjaxManager 的网站。

在几个页面上，我有一个带有 autopostback="true" 的 asp 下拉列表，它们在 RadAjaxManager 中注册以更新页面上的一些其他控件。

在 Firefox（最新版本）、IE7、IE8、IE10、Chrome（最新版本）和我的三星 Galaxy Nexus 中，一切正常。

**问题：**

*下拉列表ajax回发后事情消失了*

似乎是随机的，当 AJAX 响应在更改下拉列表中的选定项目后返回时（上面提到的带有 autopostback=true 的项目），我的页面部分（其他下拉列表、按钮和标题部分 - 不一定涉及此 AJAX 请求根本）只是消失。我所说的消失的意思是，当我使用开发人员工具查看它时它们仍在 DOM 中，但它们在页面上是不可见的。它们仍然存在，因为如果我重新调整浏览器窗口的大小或用光标选择页面的某些部分，元素应该在的位置，它们就会重新出现。

我尝试上传2个屏幕截图：

1.  在页面第一次加载后拍摄
2.  更改下拉列表后拍摄

但我还没有足够的分数......这就是我要对他们说的：

您会注意到两个屏幕截图中的“站点”是相同的，这是因为我必须在事情消失之前更改所选项目几次。这是我无法调试此问题的原因之一；有时它可以正常工作，有时则不能（大约三分之一的下拉列表更改会导致内容消失）。

**任何想法可能导致此问题？**

**到目前为止我尝试过的事情：**

1.  不同的元标记和文档类型
2.  尝试使用和不使用兼容模式
3.  删除 jQuery Mobile css 让一切看起来很丑陋，但所有 AJAX 都按预期工作，没有消失的元素
4.  将下拉列表包装在面板中并使用 RadAjaxManager 注册面板
5.  尝试使用组合 $(".ui-page").trigger("create"); 和 $(".ui-page").trigger("refresh"); 页面上有不同的元素
6.  我绝望了，试着把页面上的所有东西都放在一张桌子上
7.  我已经清除了缓存
8.  为 $(".ui-page").trigger("create"); 添加了 javascript 延迟
9.  希望，祈祷并在办公室周围冲撞，但没有任何解决办法，我没有想法

我将尝试创建一个示例项目，该项目具有重现此问题所需的最少代码量，但同时我希望我已经提供了足够的信息供您以某种方式指导我。

**更新：**

在尝试将示例项目放在一起进行一些测试后，我已将其缩小到页面上的 RadAjaxLoadingPanel - 当我使用它时（例如，在 RadAjaxManager 中设置 LoadingPanelID="myLoadingPanel" 或在我的 RadAjaxManager 上将其设置为 DefaultLoadingPanelID）消失，当我不使用它时，一切都按预期工作。

**另一个更新：**

我现在有一个示例应用程序，其中包含重现此问题所需的最少代码。关键代码是添加 RadAjaxLoadingPanel - 没有它，代码可以正常工作。记住要在 IE9 中进行测试，因为所有其他浏览器都可以。

在 Visual Studio 中创建一个新的空 Web 应用程序并添加一个新的 Web 表单。前端代码应如下所示：

```
<%@ Page Language="C#" AutoEventWireup="true" CodeBehind="WebForm1.aspx.cs" Inherits="WebApplication1.WebForm1" %>
<%@ Register Assembly="Telerik.Web.UI" Namespace="Telerik.Web.UI" TagPrefix="telerik" %>

<!DOCTYPE html>
<html>
<meta http-equiv="X-UA-Compatible" content="IE=edge" /><meta name="viewport" content="width=device-width, initial-scale=1" /><meta charset="utf-8" />
<head runat="server">
    <title></title>
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.min.css" />
    <script src="http://code.jquery.com/jquery-1.6.4.min.js"></script>
    <script src="http://code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.min.js"></script>

    <script type="text/javascript">
        //handle the end of AJAX requests
        function responseEnd(sender, eventArgs) {
            //need to tell jquery mobile to initialise the new content
            $(".ui-page").trigger("create");
        }
    </script>
</head>
<body>
<div data-role="page">
    <form id="form1" runat="server" enctype="multipart/form-data">
        <telerik:RadScriptManager ID="RadScriptManager1" runat="server">
        </telerik:RadScriptManager>
        <telerik:RadAjaxManager ID="RadAjaxManager1" runat="server" ClientEvents-OnResponseEnd="responseEnd">
            <AjaxSettings>
                <telerik:AjaxSetting AjaxControlID="ddl1">
                    <UpdatedControls>
                        <telerik:AjaxUpdatedControl ControlID="ddl2" LoadingPanelID="RadAjaxLoadingPanel1" />
                    </UpdatedControls>
                </telerik:AjaxSetting>
            </AjaxSettings>
        </telerik:RadAjaxManager>
    <telerik:RadAjaxLoadingPanel ID="RadAjaxLoadingPanel1" runat="server" Skin="Default">
    </telerik:RadAjaxLoadingPanel>

        <div id="header" data-role="header">
            <h1>Header</h1>
        </div><!-- /header -->

        <label>Ajax drop down:</label>
        <asp:DropDownList ID="ddl1" runat="server"
            AutoPostBack="true" OnSelectedIndexChanged="ddl1_SelectedIndexChanged">
            <asp:ListItem>Select...</asp:ListItem>
            <asp:ListItem>1</asp:ListItem>
            <asp:ListItem>2</asp:ListItem>
        </asp:DropDownList>
        <br />

        <label>updated drop down:</label>
        <asp:DropDownList ID="ddl2" runat="server">
            <asp:ListItem>Select...</asp:ListItem>
        </asp:DropDownList>
        <br />
    </form>
</div>
</body>
</html> 
```

后面的代码很简单：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;

namespace WebApplication1
{
    public partial class WebForm1 : System.Web.UI.Page
    {
        protected void Page_Load(object sender, EventArgs e)
        {

        }

        protected void ddl1_SelectedIndexChanged(object sender, EventArgs e)
        {
            ddl2.Items.Clear();
            ddl2.Items.Add("A");
            ddl2.Items.Add("B");
            ddl2.Items.Add("C");
            ddl2.SelectedValue = "A";
        }
    }
} 
```

如果您在 IE9 中运行它并更改第一个下拉列表的选定值，您将看到标题消失。然后重新调整浏览器窗口的大小或用光标选择它，它将再次显示。

那么，有人可以告诉我为什么会发生这种情况以及我可以做些什么来仍然使用 RadAjaxLoadingPanel 但让它正常工作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T06:42:51.797

在仍然使用 RadAjaxLoadingPanel 的同时，我从未知道如何做到这一点，但我想我永远不会。因此，我将自己回答这个问题：如果您遇到此问题，请不要使用 RadAjaxLoadingPanel。

# html - 网页在 iOS 中有很大的右边距

> ID：11356512
> 
> 赞同：1
> 
> 时间：2012-07-06T05:46:56.797
> 
> 标签：html, css, ios, ios-simulator, mobile-safari

我已经检查了页面上的所有内容，但无法弄清楚是什么让我的网站在 iOS 中有很大的右边距。这让我疯狂。我试过设置溢出：隐藏；对身体无济于事。没有什么比 960px 更宽。这是一个非常敏感的设计，除了这件令人愤怒的事情之外，一切都运行良好。这是开发站点的 URL：http: [//ourcityourstory.com/dev/](http://ourcityourstory.com/dev/)

请看附件截图：![iOS 在网页上显示较大的右边距](../Images/59bf708d1c77e19588541ef57435d3fb.png)

任何帮助，将不胜感激。

**更新：**我试过愚弄视口。请参阅[此](https://stackoverflow.com/questions/1230019/how-to-set-viewport-meta-for-iphone-that-handles-rotation-properly)Stackoverflow 帖子。但无济于事。[我用HTML 5 Boilerplate](http://html5boilerplate.com)构建了整个网站

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-16T06:57:27.850

```
 html,body
{
    width: 100%;
    height: 100%;
    margin: 0px;
    padding: 0px;
    overflow-x: hidden; 
} 
```

将此添加到您的 CSS 中。那么它应该工作正常

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T17:30:22.577

罪魁祸首是 Facebook 分享按钮。它不像 Twitter 或 Pinterest 那样表现得像 iframe 一样，并在 body 上设置了 500px 的宽度！

`overflow: hidden;`我`.social`班上的一个简单的问题解决了这个问题。

# c# - Asp.net C# 中的谷歌日历

> ID：11356516
> 
> 赞同：0
> 
> 时间：2012-07-06T05:47:10.640
> 
> 标签：c#

我想在我的网络应用程序中制作活动日历。

我使用这个例子，但是当我执行它时它返回错误。

[http://www.codeproject.com/Articles/201907/Using-Google-Calendar-in-an-ASP-NET-Website](http://www.codeproject.com/Articles/201907/Using-Google-Calendar-in-an-ASP-NET-Website)

```
ERROR IS GIVEN BELOW
-----------------------------------------------------------------------------------
Compiler Error Message: CS0103: The name 'GetCalendarID' does not exist in the current context

Source Error:

Line 11:     <div>
Line 12: 
Line 13:     <iframe name="a" src="https://www.Google.com/calendar/embed?src=<%=GetCalendarID()%>&ctz=Europe%2FMoscow" 
Line 14:             style="border: 0" width="800"
Line 15: height="600" frameborder="0" scrolling="no" id="Test">
----------------------------------------------------------------------------------- 
```

任何人都可以帮助我吗？

或者如果您有更好的解决方案，请告诉我

问候， Mehmood Alvi

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T06:15:47.980

您正在尝试`GetCalendarID()`直接从您的页面调用（当然，这将是一个更惯用的属性） - 而不是在`GoogleCalendar`类的实例上。除非您已将`GoogleCalendar`CodeProject 中的所有代码直接添加到您的页面中，否则您需要首先`GoogleCalendar`在您的代码隐藏中创建一个实例并提供一些访问它的方式，例如作为成员变量：

```
<%=calendar.GetCalendarID()%> 
```

从根本上说，问题就像编译器解释的那样简单：它找不到`GetCalendarID`在它所拥有的上下文中调用的方法，也就是页面。*确切的*最佳解决方案将取决于您还在做什么 - 以上只是一个想法。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-06T05:54:40.870

您应该首先调用该方法`SaveCalendarIdAndUrl()`，因为这就是`m_CalendarId`; 在方法可以使用之前被填充`GetCalendarID()`

# c# - 移动应用程序的 1 种语言与 2 种语言之间的区别

> ID：11356521
> 
> 赞同：0
> 
> 时间：2012-07-06T05:47:32.547
> 
> 标签：c#, java, android, iphone, objective-c

对于移动应用程序，我知道它们可以在 Android 上用 Java 编写，在 iPhone 上可以用 Objective C 编写。有人简短地向我提到，实际上最好使用 C# 语言在不同手机上为应用程序使用一种通用语言。他暗示对于 Android 和 iPhone 上的应用程序来说，一种语言总是更好，但我知道这听起来好得令人难以置信。

对两种不同类型手机上的应用程序使用两种不同的语言（java / Objective c）与在两种手机上运行的应用程序使用一种语言（c#）有什么区别？

两者的优缺点是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T05:50:53.137

每个平台都有自己的*官方*语言和 SDK 来开发原生应用程序。它是受支持的语言和 SDK，因此，如果您使用这种本地语言，您将获得所有功能、最新的并且您的应用程序将运行得最快（除非您编写了垃圾代码，但这是开发人员从不做的事情，所以我们可以安全地排除这个假设）。

有一些框架（例如[Xamarin](http://xamarin.com/)）允许您使用相同的语言编写应用程序并在多个平台上运行它。优点很明显 => 到处都可以运行相同的代码。缺点是这些框架通常不支持特定平台的某些独特功能，因为这些功能在其他平台上不存在。此外，由于 C# 与平台的目标本地语言之间存在自动翻译，因此在此翻译过程中可能会出现一些问题。

# ruby - 程序从命令行获取输入到一个数组中并找到其中最大的

> ID：11356525
> 
> 赞同：1
> 
> 时间：2012-07-06T05:47:48.310
> 
> 标签：ruby, ruby-1.9.3

我是 Ruby 新手，只是不知道如何从用户那里获取数组的输入并显示它。如果有人能清楚我可以添加我的逻辑来找到最大的数字。

```
#!/usr/bin/ruby

puts "Enter the size of the array"
n = gets.chomp.to_i
puts "enter the array elements"
variable1=Array.new(n)

for i in (0..n)
  variable1[i]=gets.chomp.to_i
end

for i in (0..n)
  puts variable1
end 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-06T06:00:13.473

如何在一行中捕获数组？

```
#!/usr/bin/ruby

puts "Enter a list of numbers"

list = gets   # Input something like "1 2 3 4" or "3, 5, 6, 1"

max = list.split.map(&:to_i).max

puts "The largest number is: #{max}" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-07T10:46:16.547

我相信这是一个更优雅的解决方案。

```
 puts "Please enter numbers separated by spaces:"
    s = gets

    a = s.split(" ")

    #Displays array
    puts a 

    #Displays max element   
    puts a.max 
```

首先，您从用户那里收集一系列数字，然后对字符串使用 split 方法，将其转换为数组。如果您想使用其他分隔符，例如“，”，则可以编写 s.split(",")。之后，您可以使用您的逻辑来找到最大的数字，或者您可以只使用 max 方法。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-06T06:05:41.260

你做得很好。但是试试这个小改变

```
#!/usr/bin/ruby

puts "Enter the size of the array"
n = (gets.chomp.to_i - 1)
puts "enter the array elements"
variable1=Array.new(n)

for i in (0..n)
  variable1[i]=gets.chomp.to_i
end

puts variable1 
```

或者对于未定义数量的值，这是一种方法

```
#!/usr/bin/ruby

puts "enter the array elements (type 'done' to get out)"
input = gets.chomp
arr = []
while input != 'done'
  arr << input.to_i
  input = gets.chomp
end

puts arr 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-07T11:55:59.657

一些反馈：

*   `chomp.to_i`有点多余，因为后者也会删除换行符。
*   `for x in y`在惯用的 Ruby 代码中并不常见。它的行为基本上`each`与范围规则略有不同，并且可能应该在不久前从语言中删除。
*   Ruby 数组是动态的，因此无需预先初始化它们。类似的东西`(1..n).map { gets.to_i }`也会产生你需要的数组。
*   然后可以像这样显示它：`array.each { |n| puts n }`

或者，您可以使用前面概述的方法，将数字作为[ARGV](http://ruby.about.com/od/rubyfeatures/a/argv.htm)`strip`中的命令行参数或使用[ARGF](http://www.ruby-doc.org/core-1.9.3/ARGF.html)管道输入您的程序。

# windows - Rgui - 禁用右键单击绘图窗口？

> ID：11356526
> 
> 赞同：1
> 
> 时间：2012-07-06T05:47:51.063
> 
> 标签：windows, r, rgui

我编写了一个例程，通过该例程向用户显示图像（使用`grid.raster`），然后他们单击它来定义感兴趣的区域（`grid.locator`）。

我添加了支持用户右键单击绘图而不是左键单击，这将撤消他们先前单击的点。

这通过测试是否`grid.locator()`返回来工作`NULL`（来自帮助文件：“如果用户没有单击鼠标按钮 1，则函数（不可见）返回`NULL`）。

这在 Linux 上运行良好，但在使用 Rgui 的 Windows 中，右键单击绘图窗口会弹出一个带有“停止”和“继续”的上下文菜单并继续等待您单击（即，`grid.locator()`由于它被拦截，因此未检测到右键单击首先是上下文菜单）。

**有什么方法可以禁用 Rgui 中绘图窗口的右键单击上下文菜单吗？**

（用户只会使用 Rgui。目前我可以告诉他们使用中间单击按钮来撤消而不是右键单击，这可行，但如果他们没有带滚轮的按钮/中间单击按钮。或者，如果有某种方式我可以监听键盘事件而无需加载像 gtk 或 tcltk 这样的 UI 包，我也很高兴发生这种情况）。

# linux - 即使在 LINUX 上给定的缓冲区足够，socket UDP recvfrom 也不能用于大数据包

> ID：11356528
> 
> 赞同：1
> 
> 时间：2012-07-06T05:47:55.460
> 
> 标签：linux, sockets

我正在调用有效地址的 recvfrom api，我试图读取大小为 9600 字节的数据，我提供的缓冲区大小为 12KB，我什至没有收到选择读取事件。甚至强硬推荐的 MTU 大小是 1.5 KB，我能够发送和接收 4 KB 的数据包。

我正在使用 android NDK (Linux) 进行开发。

请帮忙 。我必须设置一个套接字选项来读取大缓冲区吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T02:04:40.030

如果您发送的数据包大于 MTU，它将被[分片](http://en.wikipedia.org/wiki/IP_fragmentation)。也就是说，它将被分解成更小的部分，每个部分都适合 MTU。这样做的问题是，即使其中一个丢失了（很可能在蜂窝连接上......），整个数据包也会有效地消失。

要确定是否是这种情况，您需要在连接的一端（或两端）使用数据包嗅探器。Wireshark 是 PC 端的不错选择，或者是 android 端的 tcpdump（你需要 root）。请记住，家庭路由器可能会重新组装碎片数据包 - 这意味着如果您正在从家庭路由器/防火墙内部嗅探数据包，您可能不会看到任何碎片到达，直到它们全部到达路由器（显然，如果有些碎片正在获取失去这不会发生）。

当然，更好的选择是简单地确保您始终发送小于 MTU 的数据包。碎片化几乎从来都不是正确的做法。请记住，MTU 可能在服务器和客户端之间的路径上的不同跃点处有所不同 - 您可以使用小于 1500 的常用选择（1400 应该是安全的），或者尝试通过[设置 MTU来探测它UDP 数据包上的发现标志](https://stackoverflow.com/a/973447/36723)（通过`IP_MTU_DISCOVER`），并且始终发送小于选项返回的值`getsockopt`（`IP_MTU`包括重新传输！）

# iphone - 优化 Objective C 代码以访问联系人

> ID：11356532
> 
> 赞同：1
> 
> 时间：2012-07-06T05:48:00.290
> 
> 标签：iphone, objective-c, ios, xcode, addressbook

我有一些代码可以从 Addreesbook 复制联系人。如果有少量联系人，它可以完美地工作。现在在我的手机中有 1200 个联系人，当我尝试复制它们时应用程序崩溃了。谁能帮我优化这段代码或重写代码？我正在使用的代码添加如下：

```
ABAddressBookRef addressBook = ABAddressBookCreate();
    CFArrayRef allPeople = ABAddressBookCopyArrayOfAllPeople(addressBook);
    CFIndex nPeople = ABAddressBookGetPersonCount(addressBook);

    NSString *requestContactsString = @"<contacts>";    

    for (int i=0; i<nPeople; i++)
    {
        NSLog(@"Started : %d", i);

        ABRecordRef ref = CFArrayGetValueAtIndex(allPeople, i);
        CFTypeRef firstName = ABRecordCopyValue(ref, kABPersonFirstNameProperty);
        CFTypeRef lastName = ABRecordCopyValue(ref, kABPersonLastNameProperty);
        CFTypeRef email = ABRecordCopyValue(ref, kABPersonEmailProperty);
        CFTypeRef phone = ABRecordCopyValue(ref, kABPersonPhoneProperty);

        requestContactsString = [requestContactsString stringByAppendingFormat:@"<item>"];

        if(firstName)
        {
            requestContactsString = [requestContactsString stringByAppendingFormat:@"<firstname>%@</firstname>", firstName];
            CFRelease(firstName);
            firstName = nil;
        }
        if(lastName)
        {
            requestContactsString = [requestContactsString stringByAppendingFormat:@"<lastname>%@</lastname>", lastName];
            CFRelease(lastName);
            lastName = nil;
        }
        if(email)
        {
            if(ABMultiValueGetCount(email)>0)
            {
                CFTypeRef em = ABMultiValueCopyValueAtIndex(email, 0);
                requestContactsString = [requestContactsString stringByAppendingFormat:@"<email>%@</email>", em];
                CFRelease(em);
            }
            CFRelease(email);
            email = nil;
        }
        if(phone)
        {
            if(ABMultiValueGetCount(phone)>0)
            {
                CFTypeRef ph = ABMultiValueCopyValueAtIndex(phone, 0);
                requestContactsString = [requestContactsString stringByAppendingFormat:@"<phone>%@</phone>", ph];
                CFRelease(ph);
            }
            CFRelease(phone);
            phone = nil;
        }

        requestContactsString = [requestContactsString stringByAppendingFormat:@"</item>"];
    }

    if(allPeople)
    {
        CFRelease(allPeople);
        allPeople = nil;
    }
    if(addressBook)
    {
        CFRelease(addressBook);
        addressBook = nil;
    }

    requestContactsString = [requestContactsString stringByAppendingFormat:@"</contacts>"];

    NSString *hashedContactsString = [self generateHashedPassword:requestContactsString]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T05:55:34.987

我可以看到的主要低效率是每次调用它时`[NSString stringByAppendingFormat]`都会创建一个新对象。`NSString`这意味着您有大量**长**的自动释放`NSString`对象，这些对象在下一个运行循环之前不再使用（除非您使用的是 ARC，在这种情况下情况*可能会*更好）。

我认为你会更好地利用内存，并获得更好的性能，通过`requestContactsString`使用`NSMutableString`和使用`[NSMutableString appendString]`( [reference](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/nsmutablestring_Class/Reference/Reference.html) ) 来代替。这将修改现有对象，分配更多内存来接受新字符串。

每个附加看起来像这样：

```
[requestContactsString appendString:[NSString stringWithFormat:@"<lastname>%@</lastname>", lastName]]; 
```

这仍然会创建大量自动释放的对象，但它们**要小得多**。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T05:57:07.547

使用 a`NSMutableString`并使用该方法构建您的 XML `appendFormat:`。在您的循环中，您正在复制到目前为止多次组装的整个字符串。

# facebook - Facebook登录卡在显示=触摸模式下的权限页面-Windows 8

> ID：11356533
> 
> 赞同：1
> 
> 时间：2012-07-06T05:48:04.103
> 
> 标签：facebook, facebook-graph-api, webview, webbrowser-control, windows-8

我试图在 windows 8 应用程序中实现 Facebook 登录。我正在使用以下网址请求 Facebook 登录

```
https://www.facebook.com/dialog/oauth?client_id=APP_ID&response_type=token&scope=email%2coffline_access%2cpublish_stream&redirect_uri=http%3a%2f%2fwww.facebook.com%2fconnect%2flogin_success.html&display=touch 
```

我正在使用 webview 来请求这个 url。我得到了正确的登录页面，如下所示。 ![在此处输入图像描述](../Images/d28dfc845abd351e2b76fc435d566c05.png)

用户输入登录凭据后，它会重定向到另一个页面并卡在那里。我猜该页面应该被授予权限。我正在附加一个如下所示的屏幕

![在此处输入图像描述](../Images/46d875960f240987843323f4e873a0d0.png)

如果我点击取消或安装，什么都不会发生..

如果我`display=touch`从请求中删除一切都会正常工作。但是登录页面和权限页面会像在 Web 浏览器中一样显示。这不是针对触摸进行优化的 ..

我已经用`webbrowser`wpf 中的控件进行了相同的测试。但是问题仍然存在。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T07:17:04.880

在 Windows 8 上，您应该使用[WebAuthenticationBroker](http://msdn.microsoft.com/en-US/library/windows/apps/windows.security.authentication.web.webauthenticationbroker)。

这是代码示例：

```
private async void Authenticate()
    {
        //Facebook Authentication Uri
        var facebookUri = "https://www.facebook.com/dialog/oauth";
        //Standard redirect uri for desktop/non-web based apps
        var redirectUri = "https://www.facebook.com/connect/login_success.html";
        //Place your appa client id here
        var clientId = "";
        //The type of token that can be requested
        var responseType = "token";
        //Response pattern
        var pattern = string.Format("{0}#access_token={1}&expires_in={2}", redirectUri, "(?.+)", "(?.+)");

        try
        {
            String FacebookURL = "https://www.facebook.com/dialog/oauth?client_id=" +
                clientId + "&redirect_uri=" + Uri.EscapeUriString(redirectUri) + "&scope=read_stream&display=touch&response_type=token";

            System.Uri StartUri = new Uri(FacebookURL);
            System.Uri EndUri = new Uri(redirectUri);

            WebAuthenticationResult WebAuthenticationResult = await WebAuthenticationBroker.AuthenticateAsync(
                                                    WebAuthenticationOptions.None,
                                                    StartUri,
                                                    EndUri);
            if (WebAuthenticationResult.ResponseStatus == WebAuthenticationStatus.Success)
            {
                var response = WebAuthenticationResult.ResponseData.ToString();
            }
            else if (WebAuthenticationResult.ResponseStatus == WebAuthenticationStatus.ErrorHttp)
            {
                //Handle HTTP error
            }
            else
            {
                //Handle error
            }
        }
        catch (Exception ex)
        {
            //Handle error
        }
    } 
```

# android - 如何将我的应用设置为默认家庭 android？

> ID：11356537
> 
> 赞同：0
> 
> 时间：2012-07-06T05:48:34.043
> 
> 标签：android

我正在开发一个 Android 应用程序，我希望它在第一次启动时将其设置为主页按钮的默认操作。

目前，只有当用户在运行我的应用程序后第一次按下 Home 按钮时，Android 系统才会向用户提供此选项。

![在此处输入图像描述](../Images/bb31240d2ffa93520571333c9c0283cb.png)

用户不想将复选框单击为“默认情况下用于此操作”，它应该默认设置为我的应用程序。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T05:52:41.810

这是不可能的，也是一件好事。

Android 允许用户选择自己的默认值，以防止恶意应用程序将自己设置为处理操作的默认应用程序，从而保护用户的数据和设备。如果应用程序可以将自己设置为默认主屏幕或浏览器或调用应用程序等，那么它可能会窃取用户的个人数据，并可能破坏或拒绝对设备本身的访问。

由于上述原因，这不可能是 Android SDK 的原因，我真诚地怀疑是否存在非官方的手段来做到这一点。

# java - GWT 模型视图展示器，重用展示器？或演示者 - 演示者沟通

> ID：11356540
> 
> 赞同：2
> 
> 时间：2012-07-06T05:48:54.083
> 
> 标签：java, design-patterns, gwt, mvp, presenter

这里是菜鸟。

我刚从 Ray Ryan 的 Google IO 演讲开始，并关注了 Google Developers 网站上的一些文章。我没有使用任何 GWT 附加组件，例如 GWTP 或 MVP4G 或 GIN 或任何其他东西。只是按照 GWT 网站上的联系人示例并尝试为我的案例建模。

我有一个**DockLayout**面板，它有一个标题、左侧的导航树和一个中央主面板。所有这些我都在一个实现**DefaultPresenter的****DefaultView**中。

 **现在我有一个**DialogBox**，当用户在树中执行某些操作时会弹出它，这分别在**DialogView**和**DialogPresenter**中建模。

现在，当我隐藏**DialogBox**时，我最终会从**AppController调用****DefaultPresenter**的一个新实例，这会创建一个**新的 DefaultView**并且我的所有树选择和主中央面板中的其他更改都消失了。

 ****1.  是否可以重复使用演示者的实例而无需在历史更改上创建新的实例？（例如，在我的情况下为**DefaultPresenter ）**
2.  MVP 模式中有没有一种方法可以在具有持久值的演示者之间传递控件？
3.  如何在事件触发时在应用控制器内加载演示者的现有实例？

还是我把整个 MVP 架构弄错了？我现在计划为我的每个组件设置不同的演示者和视图，比如**HeaderPresenter / HeaderView、TreePresenter / TreeView 、 MainContentPresenter/MainContentView**？所以我只会创建我需要的演示者的新实例（如**MainContentPresenter**）并保留现有的照原样（如**TreePresenter 和 HeaderPresenter**）这能解决我的问题吗？我将如何在浏览器窗口中拼接所有这些不同的视图？**我没有使用 UiBIinder**，只是坚持基础。

各位高手帮帮我，我陷入了僵局！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T15:04:34.780

当我阅读您的问题时，感觉答案应该是一篇文章，类似于*Stateful Presenter Architecture for GWT Apps*。然而，这是 StackOverflow，它是关于简洁的，所以让我们看看：

## 答案

> `1.`是否可以重复使用演示者的实例而无需在历史更改上创建新的实例？

确实。没有什么能阻止您在注入您的视图的一堆单例演示者之间切换（切换将在您的[ActivityMapper](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/activity/shared/ActivityMapper.html)实现中发生）。**请注意**此后的假设，即您的演示者是[活动](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/activity/shared/Activity.html)。

> `2.`MVP 模式中有没有一种方法可以在具有持久值的演示者之间传递控件？

由于您的演示者现在是单身人士，他们将保留其成员变量的状态。对于演示者之间的消息交换，事件和[EventBus](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/event/shared/EventBus.html)是您的朋友。

> `3.`如何在事件触发时在应用控制器内加载演示者的现有实例？

您的`ActivityMapper`实例一旦注册到您的[ActivityManager](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/activity/shared/ActivityManager.html)就足够了。这`ActivityManager`将依赖于您`public Activity getActivity(Place place)`对`ActivityMapper`接口的实现来返回您的单例演示者之一。

## 资源

[David Chandler 的 Google I/O 2011 GWT 会议](https://www.youtube.com/watch?v=0F5zc1UAt2Y)恰好涉及到这种类型的主/细节架构。我强烈推荐它，特别是对于这个问题，在第 18 分钟之后的部分，当大卫开始对活动和地点进行全面概述时。******

# ruby-on-rails - 无法让 Mandrill 从 Rails 应用程序发送电子邮件

> ID：11356541
> 
> 赞同：21
> 
> 时间：2012-07-06T05:48:56.577
> 
> 标签：ruby-on-rails

我正在尝试在 Rails 应用程序中发送电子邮件。如果我使用 Gmail，它可以工作，但如果我使用 Mandrill，它就无法工作。Mandrill 出现此超时错误。不知道我做错了什么。对于 Gmail 和 Mandrill，我正在使用环境变量设置用户名和密码/api_key。两种设置之间的唯一区别是您在下面看到的内容。有任何想法吗？

```
Timeout::Error in RegistrationsController#create

execution expired
Rails.root: /Users/michaeljohnmitchell/Sites/pre

Application Trace | Framework Trace | Full Trace
app/models/user.rb:38:in `send_welcome_email' 
```

山魈不工作

```
config.action_mailer.smtp_settings = {
  :address   => "smtp.mandrillapp.com",
  :port      => 25,
  :user_name => ENV["MANDRILL_USERNAME"],
  :password  => ENV["MANDRILL_API_KEY"]
} 
```

Gmail 作品

```
config.action_mailer.smtp_settings = {
  address: "smtp.gmail.com",
  port: 587,
 authentication: "plain",
  enable_starttls_auto: true,
  user_name: ENV["GMAIL_USERNAME"],
  password: ENV["GMAIL_PASSWORD"]
} 
```

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-07-16T21:03:59.610

将端口 587 用于山魈，对我来说也是如此 :)

这是因为端口 25 发送纯文本，端口 587 发送 SSL 编码的电子邮件（我认为这是整个 mandrill 的想法）。

我不知道为什么他们在示例中将其设置为端口 25。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T00:12:26.923

根据您提供的信息，您可以尝试以下几种方法：

1.  确保每个环境文件（production.rb 和 development.rb）中都包含正确的信息

2.  尝试硬编码 mandrill 的用户名和密码，而不是使用环境变量（仅用于测试）

# mdx - where 子句中的 MDX 过滤器成员与 From 子句中的过滤器成员

> ID：11356542
> 
> 赞同：0
> 
> 时间：2012-07-06T05:49:03.630
> 
> 标签：mdx, where-clause, subquery

在冒险作品中，这两种情况有什么区别：

1）From子句中的过滤器成员：

```
with
member [existing_categries_Member_Count]as
    count(existing[Product].[Category].[Category].members)
member [existing_subcategries_Member_Count]as
    count(existing[Product].[subCategory].[subCategory].members)
select 
{
    [existing_subcategries_Member_Count],
    [existing_categries_Member_Count]
} on 0
FROM (
    SELECT [Product].[Subcategory].&[31] ON 0
    FROM [Adventure Works]) 
```

* * *

结果：

```
existing_subcategries_Member_Count  existing_categries_Member_Count
                    37                            4 
```

和 2) 在 WHERE 子句中过滤成员：

```
with
member [existing_categries_Member_Count]as
    count(existing[Product].[Category].[Category].members)
member [existing_subcategries_Member_Count]as
    count(existing[Product].[subCategory].[subCategory].members)
select 
{
    [existing_subcategries_Member_Count],
    [existing_categries_Member_Count]
} on 0
FROM [Adventure Works]
WHERE [Product].[Subcategory].&[31] 
```

* * *

结果 ：

```
existing_subcategries_Member_Count  existing_categries_Member_Count
                   1                              1 
```

我希望这两个查询的结果相同，但我看到不同的结果。请告诉我 WHERE 和 SUBcube 之间的区别谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T07:58:11.733

*   当您将成员放入 WHERE 子句时，您将覆盖默认成员（上下文已更改）。

*   在[评估子选择](http://msdn.microsoft.com/en-us/library/ms145541.aspx)后，当前成员`[Product].[Subcategory]`仍然是`[Product].[Subcategory].[All Products]`

当您在计算的成员中使用[现有](http://msdn.microsoft.com/en-us/library/ms145541.aspx)关键字时，您无法获得相同的结果。如果您删除它，您的 2 个查询将给出相同的结果。

# android - 如何将后台任务带到蜂窝下面的最前面？

> ID：11356547
> 
> 赞同：4
> 
> 时间：2012-07-06T05:49:26.177
> 
> 标签：android, task

在我的应用程序根活动中，我有一个自定义选项卡栏，其中包含三个选项卡，用于在使用 ViewFlipper 实现的三个屏幕之间切换。

我现在要做的是为每个屏幕提供它自己的活动堆栈，使标签栏在我的所有活动中都可用，并在按下标签时在不同的堆栈之间切换。

像蜂窝上的魅力一样工作，我在 ActivityMaganger 类中提供了 BringTaskToFront()。

我尝试了很多解决方案，例如：

*   重启特定任务的top activity，希望任务移到最前面
*   以某种方式获得蜂窝类

那么，有什么想法吗？

非常感谢，

斯文

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-19T10:33:07.490

在蜂窝及更高版本中，您可以像这样使用 MoveTaskToFront

```
//Bring Task to front with Android >= Honeycomb
if (Build.VERSION.SDK_INT >= 11) {
    ActivityManager am = (ActivityManager) getSystemService(Activity.ACTIVITY_SERVICE);
    List<RunningTaskInfo> rt = am.getRunningTasks(Integer.MAX_VALUE);

    for (int i = 0; i < rt.size(); i++) 
    {
           // bring to front
           if (rt.get(i).baseActivity.toShortString().indexOf("yourproject") > -1) {                     
              am.moveTaskToFront(rt.get(i).id, ActivityManager.MOVE_TASK_WITH_HOME);
           }
    }
} 
```

确保您的项目使用 Android v.11 或更高版本进行编译，以便此行不会因编译而中断：

`am.moveTaskToFront(rt.get(i).id, ActivityManager.MOVE_TASK_WITH_HOME);`

对于较旧的 Android 版本，您可以使用以下命令将任务移到前面：

```
Intent intent = new Intent(this, YourClass.class);//The class you want to show
startActivity(intent); 
```

在 android 清单中添加以下内容

```
<!--The versions with which to compile-->
<uses-sdk android:minSdkVersion="7" android:targetSdkVersion="11"/>

<!--The Activity you wish to bring forward-->
<activity android:name="YourClass" android:taskAffinity="" android:launchMode="singleTask" />

<!--User Permissions-->
<uses-permission android:name="android.permission.GET_TASKS" />
<uses-permission android:name="android.permission.REORDER_TASKS" /> 
```

`onBackPressed()`最后，确保当您通过覆盖, **DO NOT USE** 将任务推回时`moveTaskToBack()`，这将导致您的任务最终对用户不可见。而是使用以下内容：这将模拟主页按钮按下，这将有效地隐藏您的应用程序并显示主屏幕

```
@Override
public void onBackPressed() {
    Utils.showToast(this, "Your application is running in the background");
    /*Simulate Home Button Press*/
    Intent startMain = new Intent(Intent.ACTION_MAIN);
    startMain.addCategory(Intent.CATEGORY_HOME);
    startMain.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
    startActivity(startMain);
} 
```

你去了，我希望这对你有用，并帮助一些人解决这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-22T00:24:22.500

这适用于 Honeycomb 之上和之下的 android 版本。键是[意图标志](https://developer.android.com/reference/android/content/Intent.html)

```
Intent intent = new Intent(context, YourClass.class);//The class you want to show

intent.addFlags(Intent.FLAG_ACTIVITY_REORDER_TO_FRONT | Intent.FLAG_ACTIVITY_NEW_TASK);

context.startActivity(intent); 
```

# jdbc - 在 Crystal XI R2 中设置与 MS SQL 2005 的 JDBC 连接

> ID：11356548
> 
> 赞同：0
> 
> 时间：2012-07-06T05:49:36.333
> 
> 标签：jdbc, crystal-reports-xi

我正在寻求在 Crystal Reports R2 中建立与 MSQ SQL 2005 服务器的连接方面的帮助。

我安装了 sqljdbc4.jar 驱动程序，并且可以在 CR4E（Crystal Reports for Eclipse）中完美地连接到数据库。

我猜这与 CRConfig.XML 文件的设置有关。

我在文件中添加了对 MS SQl 驱动程序的引用，并放入了与 CR4E 中使用的相同的服务器设置。

## 我收到错误：

## 水晶报表

提供的参数无效。详细信息：Java 服务器启动失败。请验证 CRConfig.xml 文件中的 PATH (JDK)、CLASSPATH 和 IORFileLocation 属性。此外，请确认您使用的是 JDK 1.4。

我找不到任何日志来进一步确定问题。

例如：

```
<DataDriverCommon>
<JavaDir>"C:\Program Files\Business Objects\j2sdk1.4.2_08\bin"</JavaDir>
<Classpath>C:\Program Files\Common Files\Business Objects\3.5\java/lib/crlovmanifest.jar;C:\Program Files\Common Files\Business Objects\3.5\java/lib/CRLOVExternal.jar;C:\Program Files\Common Files\Business Objects\3.5\java/lib/CRDBJavaServerCommon.jar;C:\Program Files\Common Files\Business Objects\3.5\java/lib/CRDBJavaServer.jar;C:\Program Files\Common Files\Business Objects\3.5\java/lib/CRDBJDBCServer.jar;C:\Program Files\Common Files\Business Objects\3.5\java/lib/CRDBXMLServer.jar;C:\Program Files\Common Files\Business Objects\3.5\java/lib/CRDBJavaBeansServer.jar;C:\Program Files\Common Files\Business Objects\3.5\java/lib/external/CRDBXMLExternal.jar;C:\Program Files\Common Files\Business Objects\3.5\java/lib/external/log4j.jar;C:\Program Files\Common Files\Business Objects\3.5\java/lib/cecore.jar;C:\Program Files\Common Files\Business Objects\3.5\java/lib/celib.jar;C:\Program Files\Common Files\Business Objects\3.5\java/lib/ebus405.jar;C:\Program Files\Common Files\Business Objects\3.5\java/lib/corbaidl.jar;C:\Program Files\Common Files\Business Objects\3.5\java/lib/external/freessl201.jar;C:\Program Files\Common Files\Business Objects\3.5\java/lib/external/asn1.jar;C:\Program Files\Common Files\Business Objects\3.5\java/lib/external/certj.jar;C:\Program Files\Common Files\Business Objects\3.5\java/lib/external/jsafe.jar;C:\Program Files\Common Files\Business Objects\3.5\java/lib/external/sslj.jar;C:\Program Files\Microsoft SQl Server JDBC Driver\sqljdbc_2.0\enu\sqljdbc4.jar;${CLASSPATH}</Classpath>
<IORFileLocation>${TEMP}</IORFileLocation>
<JavaServerTimeout>1800</JavaServerTimeout>
<JavaServerStartupTimeout>30</JavaServerStartupTimeout>
<JVMMaxHeap>64000000</JVMMaxHeap>
<JVMMinHeap>32000000</JVMMinHeap>
<NumberOfThreads>100</NumberOfThreads> 
```

```
<CacheRowSetSize>100</CacheRowSetSize>
<JDBCURL>jdbc:sqlserver://myserver:1433;databaseName=mydb</JDBCURL>
<JDBCClassName>com.microsoft.sqlserver.jdbc.SQLServerDriver</JDBCClassName>
<JDBCUserName>sr0</JDBCUserName>
<JNDIURL></JNDIURL>
<JNDIConnectionFactory></JNDIConnectionFactory>
<JNDIInitContext>/</JNDIInitContext>
<JNDIUserName>weblogic</JNDIUserName> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T06:07:22.073

I managed to get it working.

I believe the error was related to the string containing the location of the MS SQL driver in the classpath directive.

Enclosing it in quotes work.

eg:

;"C:\Program Files\Microsoft SQl Server JDBC Driver\sqljdbc_2.0\enu\sqljdbc4.jar";

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T07:25:43.040

要在 Crystal XI 中设置`JDBC`连接，您需要在您的机器上安装 Jdk。

检查并确认您已安装 Jdk 1.4.2。如果不是，请下载并安装 Java 开发工具包 (JDK) 版本 1.4 (J2SE) 或更高版本。

将 javaDir 更改为新安装的 java 目录。

例如：

```
<JavaDir>C:\j2sdk1.4.2_06\bin</JavaDir> 
```

和

确保您有权在 Temp 目录上写字。在某些操作系统中，临时目录是只读的。

```
<IORFileLocation>${TEMP}</IORFileLocation> 
```

# ios - AVMutableCompositon AVMutableCompositionTrack m4a 问题

> ID：11356549
> 
> 赞同：0
> 
> 时间：2012-07-06T05:50:10.017
> 
> 标签：ios, ios5, aac, avmutablecomposition

我能够使用下面的代码成功创建一个播放声音的简单应用程序。然而问题是，如果我将资产从 mp3 更改为 m4a（使用 aac 编码）。不会产生声音，但乐曲的持续时间与添加样本的长度相匹配。

```
NSError *error;

AVMutableComposition* composition = [AVMutableComposition composition];
AVURLAsset* audioAsset1 = [[AVURLAsset alloc]initWithURL:[NSURL URLWithString:@"http://www.myserver.com/sample.mp3"] options:nil];

AVMutableCompositionTrack *audioTrack1 = [composition addMutableTrackWithMediaType:AVMediaTypeAudio 
                                                                  preferredTrackID:kCMPersistentTrackID_Invalid];

[audioTrack1 insertTimeRange:CMTimeRangeMake(kCMTimeZero, audioAsset1.duration)
                     ofTrack:[[audioAsset1 tracksWithMediaType:AVMediaTypeAudio] objectAtIndex:0]
                      atTime:kCMTimeZero
                       error:&error];

NSLog(@"%@", error);

playerItem = [AVPlayerItem playerItemWithAsset:composition];

player = [AVPlayer playerWithPlayerItem:playerItem];

[player play]; 
```

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T23:35:26.883

我最终到处张贴这个问题，最后用苹果创建了一个错误报告。

我如何解决这个问题是在开始时有一个步骤，将 m4a 下载到应用程序临时目录中，然后从那里将其添加到组合中。奇迹般有效。

我不会详细介绍如何执行此操作的代码，但由于我的应用程序使用了流行的 AFNetworking 库，因此这里是关键部分。

```
1: AFHTTPRequestOperation *operation = [[AFHTTPRequestOperation alloc]initWithRequest:songURLRequest];
2: NSString *filePath = [NSTemporaryDirectory() stringByAppendingPathComponent:@"song.m4a"];
3: operation.outputStream = [NSOutputStream outputStreamToFileAtPath:filePath append:NO]; 
```

第 1 行：设置 AFHTTPRequestOperation 第 2 行：将本地路径设置为将保存文件的字符串 第 3 行：将 AFHTTPRequestOperation 上的 outputStream 设置为本地路径

希望这对将来的人有所帮助！

# soa - 组件与服务

> ID：11356550
> 
> 赞同：2
> 
> 时间：2012-07-06T05:50:09.947
> 
> 标签：soa

我已经对 SOA 和基于组件的架构进行了一些调查，似乎主要区别之一是服务应该是可独立部署的。

如果我有 jar 文件的服务，并且这些 jar 文件在它们被部署为更大应用程序的 ear 文件的一部分之前不会开始存在 - 这真的是 SOA 吗？即这些服务是jar文件，不能作为独立服务部署，可以独立于ear文件运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T05:56:40.157

如果您的代码正在它们进行通信**，**我认为您只是在使用组件。真正的 SOA 将通过 http 等其他机制进行代码通信。并不是说一个比另一个更好，这取决于您要解决的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T06:03:34.077

就部署而言，服务是一个独立的单元，但也是版本控制、扩展和数据。API（无论是 HTTP、消息传递、事件等）是“发布的”和公开的，很多时候都暗示着安全性、向后兼容性等。

无论如何，我认为您如何称呼它们或您是否拥有 SOA 并不重要。关键是要获得一个能够满足您当前需求的架构，并使您能够在未来需求出现时对其进行演进

# iphone - 饼图和条形图

> ID：11356562
> 
> 赞同：-1
> 
> 时间：2012-07-06T05:50:58.127
> 
> 标签：iphone, objective-c, ios5

在我的应用程序中，我想使用饼图和条形图。对于 pis 图表，我正在集成 BNPieChart，对于条形图，我正在集成 CorePlot-CocoaTouch。那么我可以有一个用于饼图和条形图的单曲吗？提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T13:41:03.673

是的。您可以在一个 ViewController 上将 CorePlot 用于 PIE 和 BAR 图表。因此，如果您同时使用 CorePlot 和其他框架 - 您可以在 One View Controller 上同时使用它。也许 ：）

# css - 让 div 总是在底部

> ID：11356565
> 
> 赞同：0
> 
> 时间：2012-07-06T05:51:29.947
> 
> 标签：css

我对 div 这段代码有问题

```
<div class="parent" style="position: relative;">
    <div class="first" style="position: absolute;">
        images etc ..
    </div>
    <div class="second">
        <ul>
            ... etc
        </ul>
    </div>
</div> 
```

没有高度的父 div，因为我正在从事响应式设计，问题是第二个 div 始终位于顶部并且需要 margin-top ：Xpx; 在 parent 的底部，但这会导致响应问题，因为如果 first 的高度小于 margin-top : Xpx; 将显示可用空间

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T06:13:46.387

嘿现在像这样使用这个代码

**HTML**

```
<div class="first">
images etc ..
</div>
<div class="second">
<ul>
... etc
</ul>
</div> 
```

**CSS**

```
.first{
position: absolute;
  bottom:0;
  background:red;
  left:0;
  right:0;
} 
```

现场演示[http://tinkerbin.com/UrrM7EIv](http://tinkerbin.com/UrrM7EIv)

# ruby-on-rails - 如何使用 Backbone.js 将参数传递给控制器 ？

> ID：11356569
> 
> 赞同：0
> 
> 时间：2012-07-06T05:52:02.153
> 
> 标签：ruby-on-rails, backbone.js

在我的一个backbone.js 视图中，我有以下代码：

```
 events:
    'click .filter_classroom_size': 'filterClassroom'

  filterClassroom: (event)->
    event.stopPropagation()
    event.preventDefault()
    Backbone.history.navigate("classrooms?nationality", true) 
```

我的路由器有以下代码：

```
 routes:
    'classrooms?:filter': 'classrooms'

  initialize: ->
    @collection = new Classrooms.Collections.Entries()
    @collection.fetch()

  classrooms: (filter) ->
    classroomView = new Seats.Views.ClassroomIndex(collection: @collection)
    $('#output_container').html(classroomView.render().el)
    alert("#{filter}") # this prints out the filter parameter 
```

教室控制器.rb：

```
class ClassroomsController < ApiController
  def show
    # How do I send a parameter here so I can filter on it?
    respond_with Classroom.all
  end
end 
```

我希望能够将参数传递给控制器​​，以便过滤数据库结果。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T06:00:12.630

Backbone 在后台使用[jQuery.ajax](http://api.jquery.com/jQuery.ajax/)，因此您可以简单地在方法中传递 jQuery.ajax 选项，例如`save`,`fetch`和`destroy`.

```
initialize: ->
  @collection = new Classrooms.Collections.Entries()
  @collection.fetch
    data:
      your_key: your_value 
```

# svg - 根据我的点击创建气球并使用 Raphael.js 动画到屏幕顶部（X 轴的随机位置）

> ID：11356570
> 
> 赞同：0
> 
> 时间：2012-07-06T05:52:06.927
> 
> 标签：svg, raphael

使用此代码，我可以根据我的点击创建一个带有线条（如气球）的圆圈并动画到矩形的中心位置，而动画线不与圆圈一样作为气球以及如何移动屏幕（X 轴的随机位置）插入中心位置。

代码：

$(文档).ready(函数 () {

```
 var canvas = Raphael(0, 0, 920, 940);
        var backboard = canvas.rect(0, 0, 920, 940).attr({ fill: 'white', stroke: 'none' });
        backboard.click(function (event, x, y) {

            var bbox = backboard.getBBox();
            var x_ratio = x / bbox.width;
            var y_ratio = y / bbox.height;
            var color = 'rgb(' + Math.floor(x_ratio * 255) + ',0,' + Math.floor(y_ratio * 255) + ")";

            // Circle
            var transient_circle = canvas.circle(x, y, 25).attr({ fill: color, stroke: 'black', 'stroke-width': 1 });
            transient_circle.animate({ cx: bbox.width / 2, cy: bbox.width / 3, 'fill-opacity': 0.25 }, 3000, ">",
            function () {
                transient_circle.animate({ 'stroke-opacity': 0, 'fill-opacity': 0 }, 2500, function () { transient_circle.remove(); });
            });

            // Line
            var transient_pathline = canvas.path("M" + x + " " + (y + 25) + "C" + (x - 80) + " " + (y + 200) + " " + (x + 100) + " " + (y + 400) + " " + (x - 100) + " " + (y + 120)).attr({ fill: '#fff', stroke: color, 'stroke-width': 1 });
            var _transformedPath = Raphael.transformPath('M' + (bbox.width / 2) + " " + (bbox.width / 3) + "C" + (x - 80) + " " + (y + 200) + " " + (x + 100) + " " + (y + 400) + " " + (x - 100) + " " + (y + 120), 'T300,0');
            transient_pathline.animate({ path: _transformedPath }, 1000);} }); }); 
```

请帮助我如何将圆圈与线条一起移动到屏幕顶部，就像气球一样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T11:53:50.517

基于用户点击创建气球的代码

```
function derivateElement(element) {

            var movAmplitude = 236

            var nx = -movAmplitude * .5 + Math.random() * movAmplitude
            var ny = -movAmplitude * .5 + Math.random() * movAmplitude

            var timing = 800 + Math.random() * 400

            element.animate({ transform: "T" + nx + ", " + ny }, timing, "easeInOut", function () { derivateElement(element) });
        }

        var canvas = Raphael(0, 0, 920, 940);
        var backboard = canvas.rect(0, 0, 920, 940).attr({ fill: 'white', stroke: 'none' });
        var index = 0;
        backboard.click(function (event, x, y) {

            var bbox = backboard.getBBox();
            var x_ratio = x / bbox.width;
            var y_ratio = y / bbox.height;
            var color = 'rgb(' + Math.floor(x_ratio * 255) + ',0,' + Math.floor(y_ratio * 255) + ")";

            // Circle
            var _circle = canvas.circle(x, y, 25).attr({ fill: color, stroke: 'black', 'stroke-width': 1 });
            //path
            var _pathline = canvas.path("M" + x + " " + (y + 25) + "C" + (x - 80) + " " + (y + 200) + " " + (x + 100) + " " + (y + 400) + " " + (x - 100) + " " + (y + 120)).attr({ fill: '#fff', stroke: color, 'stroke-width': 1 });

            _circle.connections = [];
            _pathline.startElement = _circle;
            _circle.connections.push(_pathline);
            _circle.connected = true;
            var CircleSet = []
            CircleSet[index] = canvas.set();
            CircleSet[index].push(_circle, _pathline);
            derivateElement(CircleSet[index]);
            index++;
        }); 
```

# .net - VSIX 项目模板不存在

> ID：11356572
> 
> 赞同：4
> 
> 时间：2012-07-06T05:52:22.820
> 
> 标签：.net, visual-studio-2010

我安装了带有 SP1 的 VS2010。我仍然没有在“新项目”对话框中获得 VSIX 项目模板。

我也提到了以下问题，但没有运气

[在 VS 2010 中找不到 VSIX 项目类型](https://stackoverflow.com/questions/2766566/cant-find-vsix-project-type-in-vs-2010)

有什么线索吗？ ![在此处输入图像描述](../Images/2d063e89eab6724d7926cd3d2b1f889c.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T21:20:33.253

确保您已安装 Visual Studio SP1 SDK - 可[在此处](http://www.microsoft.com/en-us/download/details.aspx?id=21835)获得。

这有你正在寻找的合适的模板

编辑：检查`<drive>:\Program Files (x86)\Microsoft Visual Studio 10.0\Common7\IDE\Extensions\VSSDK\`- 这就是（我认为）应该安装扩展的地方。您应该看到许多子目录。看看这是否与您的安装匹配：

*   项目模板
    *   夏普
        *   **VSIXProject.zip**

如果该文件不存在，则表明您的 SDK 安装出现问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-19T12:09:17.087

[从这里](http://www.microsoft.com/en-us/download/details.aspx?id=2680)安装的扩展

[从这个链接解决](http://social.msdn.microsoft.com/Forums/en-US/windowssdk/thread/ac4fab28-ab07-4b3c-b46c-8b6b293068c8/)了一些连接

# android - android在同一活动中的另一个公共类中调用公共类

> ID：11356581
> 
> 赞同：-1
> 
> 时间：2012-07-06T05:53:00.560
> 
> 标签：android

```
package xx.xx.xx

public class Mappingactivity extends MapActivity{

}

public class Listactivity extends ListActivity{

} 
```

如何在 Mappingactivity 中调用 Listactivity？因为我试图获取同一活动的地图视图和列表视图。或者还有其他方法吗？

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T05:57:10.297

> 不要调用另一个类（活动）

您只需在布局文件中添加`ListView`and 。`MapView``extends MapActivity`

`Create object of ListView.and setAdapter to it.Its not compulsory if you want to show listview then must extend ListActivity.`

[看这里](https://stackoverflow.com/a/9749775/776244)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T06:06:03.860

您可以为 listactivity 创建另一个类，然后将其导入到这个类中。然后您将能够在整个活动中使用它。使用：
导入 xx.xx.xx.listactivity

无论你给班级起什么名字。

# python - 查找删除文件的 bzr 修订版

> ID：11356585
> 
> 赞同：1
> 
> 时间：2012-07-06T05:53:44.053
> 
> 标签：python, bazaar

我试图弄清楚为什么有人删除了 bzr 存储库中的文件。我知道它以前在那里，但现在它不见了。从那时起已经有数百次提交。没有人愿意逐一阅读。我只想在文件被删除时找到修订号，以找出它被删除的原因。

bzr中是否有可以做到这一点的命令？我尝试使用 bzr 日志文件名，但它给了我一个错误：

```
bzr: ERROR: Path unknown at end or start of revision range: 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T14:26:17.170

您可以将结果转储`bzr log -v`到文件中，然后在该文件中搜索第一次出现的相关路径。

或者，使用 log 的 --xml 选项并使用 XPath 查询包含相关路径的元素，该元素是已删除项的元素的子元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T09:16:21.527

`bzr log -rN..M -v`按照其他人的建议转储日志或日志范围。

为了使结果更易于阅读，仅使用修订号和删除的文件，此过滤器`sed`可能有用：

```
bzr log -v -r1..-1 | sed -ne '/^revno/ p' -e '/^removed/,/^[^ ]/{/^ / p}' 
```

# ios - 在 CPTXYGraph 饼图上获取触摸反馈

> ID：11356594
> 
> 赞同：3
> 
> 时间：2012-07-06T05:54:50.420
> 
> 标签：ios, core-plot

我正在使用 Core Plot 中的 CPTXYGraph 绘制饼图。我使用了委托方法

```
-(void)pieChart:(CPTPieChart *)plot sliceWasSelectedAtRecordIndex:(NSUInteger)index 
```

单击饼图的特定切片时执行一些操作。但是当我触摸饼图时，我需要显示反馈或某种类型的图像更改，以表明特定切片被触摸，就像按钮事件一样。

是否有任何委托方法来实现相同的目标。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T07:09:20.700

会有一些工作要做。

首先，将此实现为饼图委托函数。

```
-(void)pieChart:(CPTPieChart *)plot sliceWasSelectedAtRecordIndex:(NSUInteger)index
{
    indexOfPieGraphPlot = index; //gives index of pie which is selected.
    isPieGraphPlot = YES;     //boolean. if set to yes, will call rootcontroller function which will add pop up.
} 
```

然后在 .h 文件中添加**CPTPlotSpaceDelegate**

然后使用这个功能

```
- (BOOL)plotSpace:(CPTPlotSpace *)space shouldHandlePointingDeviceUpEvent:(id)event atPoint:(CGPoint)point
{
    if(isPieGraphPlot) //if yes call showpopup of rootcontroller
    {
    isPieGraphPlot = NO;
    [rootController showPopUpView:point indexForPlot:indexOfPieGraphPlot];
    // point gives the x,y of the pie over which you want a pop up.
    }
    else    // if no then call remove popup from rootcontroller. this, incase user clicks anywhere else in graph.
    {
        [rootController removePopUp];
    }
    return  YES;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T22:02:35.083

Implement the `-sliceFillForPieChart:recordIndex:` method in your datasource. Keep track of the selected slice (if any) and use that to decide what fill to apply to each slice. Call `-reloadData` on the plot any time the selection changes to force it to load new slice fills.

# android - Android：如何从资产中播放视频？

> ID：11356601
> 
> 赞同：36
> 
> 时间：2012-07-06T05:55:47.767
> 
> 标签：android, video, android-videoview

我正在制作一个应用程序，我必须在**Fragment**中显示 assets 文件夹中的视频。谁能帮我做到这一点？我需要在 XML 中使用 VideoView 吗？

* * *

## 回答 #1

> 赞同：81
> 
> 时间：2012-07-06T06:05:52.390

您必须将视频复制到项目的 res/raw 文件夹中，而不是从资产访问。在 res 文件夹下创建 raw 文件夹。它必须采用受支持的格式（3gp、wmv、mp4）并在其文件名中使用小写、数字、下划线和圆点命名，同样：video_file.mp4。

```
VideoView view = (VideoView)findViewById(R.id.videoView);
String path = "android.resource://" + getPackageName() + "/" + R.raw.video_file;
view.setVideoURI(Uri.parse(path));
view.start(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-10-17T08:48:51.657

```
VideoView view = (VideoView)findViewById(R.id.videoView);
String path = "android.resource://" + getPackageName() + "/" + R.raw.video_file;
view.setVideoURI(Uri.parse(path));
view.start(); 
```

是AkashG的代码，不过我记得这里的R不是来自Android类的。它来自你自己的项目。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-06-15T12:03:56.390

您首先需要将视频转换为**InputStream**，然后将其保存到用户的内部存储中，然后在视频完成后显示并删除该文件。

```
try{
     String path = Environment.getExternalStorageDirectory()+"/"+APP_NAME()+"/videos/"+ls+"/" ;
     InputStream input = getAssets().open("vid/dal.mp4");
     String name = System.currentTimeMillis() +".mp4";
     File f = new File(path);
     f.mkdirs();
     int size = input.available();

     FileOutputStream output = new FileOutputStream(new File(path+name));
     byte data[] = new byte[4096];
     long total = 0;
     int count;
     while ((count = input.read(data)) != -1) {
          output.write(data, 0, count);
          total += count;
          if (size <= total) {
              break;
          }
     }
     output.flush();
     output.close();
     input.close();

     //Toast.makeText(VideoPlayer.this , "file created !" , Toast.LENGTH_LONG).show();

     Uri uri = Uri.parse(path+name) ;

     videoView.setVideoURI(uri);

     videoview.start();

}cath(Exception e){
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-12-05T11:06:52.070

我已经遇到了同样的问题，你应该更喜欢项目的 res/raw 文件夹而不是资产。在 res 文件夹下创建 raw 文件夹。以支持的格式*（3gp、wmv、mp4）*保存视频文件，并在其文件名中使用*小写、数字、下划线和点命名**：filename.3gp*到 raw 文件夹中。

```
VideoView videoview = (VideoView) findViewById(R.id.VideoView);

String uriPath = "android.resource://your application package name/raw/your 
wmv/mp4/3gp file in res/raw path without extension";

videoview.setVideoURI(Uri.parse(uriPath));

videoview.start(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-05-23T09:39:08.453

播放 res/raw 文件夹中的视频（sample.mp4）以及媒体控制器

// 导入语句

```
import android.widget.VideoView;
import android.widget.MediaController;

public class youractiviy extends Activity {

private VideoView videoView;
private MediaController mediaController;

protected void onCreate(Bundle savedInstanceState) {
 // Your Startup code
 videoView = (VideoView) findViewById(R.id.video_view);
 videoView.setVideoPath("android.resource://" + getPackageName() + "/" + R.raw.sample); 
 mediaController = new MediaController(TestActivity.this);
 mediaController.setAnchorView(videoView);
 videoView.setMediaController(mediaController);
 videoView.start();

}
} 
```

// XML 代码

```
<VideoView
        android:id="@+id/video_view"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" /> 
```

# ruby-on-rails - 如何避免 nil 对象上的错误

> ID：11356603
> 
> 赞同：2
> 
> 时间：2012-07-06T05:55:57.877
> 
> 标签：ruby-on-rails, ruby-on-rails-3, error-handling, controller, null

记录 id 116 不存在，因此它应该将 nil 返回到 @conversation。
我试图让它在它为零时重定向，但是当我访问 example.com/messages/show?id=116 时它仍然显示错误。

错误是

> 未定义的方法“is_participant？” 对于零：NilClass

我肯定看到/usr/local/lib/ruby/gems/1.9.1/gems/mailboxer-0.7.0/app/models/conversation.rb中存在“is_participant”方法

消息控制器.rb

```
def show
  @conversation = Conversation.find_by_id(params[:id])

  unless @conversation.is_participant?(current_user)
    flash[:alert] = "You do not have permission to view that conversation."
    redirect_to :controller => 'messages', :action => 'received'
  end

  @messages = Message.find_by_id(params[:id])
  current_user.read(@conversation)    
end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T06:13:40.377

在调用它的方法之前，您需要检查它`@conversation`不是 nil。尝试

```
unless @conversation.present? && @conversation.is_participant?(current_user) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T06:21:01.583

You can check for presence of a value or rescue for that error.

```
def show
  @conversation = Conversation.find_by_id(params[:id])

  redirect_to somewhere_path if @conversation.nil?

  unless @conversation.is_participant?(current_user)
    flash[:alert] = "You do not have permission to view that conversation."
    redirect_to :controller => 'messages', :action => 'received'
  end

  @messages = Message.find_by_id(params[:id])
  current_user.read(@conversation)    
end 
```

or the Rescue!

```
def show
  @conversation = Conversation.find_by_id(params[:id])

  unless @conversation.is_participant?(current_user)
    flash[:alert] = "You do not have permission to view that conversation."
    redirect_to :controller => 'messages', :action => 'received'
  end

  @messages = Message.find_by_id(params[:id])
  current_user.read(@conversation)    

rescue NoMethodError
  redirect_to somewhere_path
end 
```

Notice that the rescue way is not very friendly, since it can rescue other error and making you have a pain to debug some errors. For example if current_user has no method named read, it would throw and error that would be catch there and you wouldn't notice it came from there.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-06T11:02:09.087

Christoph Petschnig 的回答是正确的，只是想提一下有一个很好的速记

```
unless @conversation.present? && @conversation.is_participant?(current_user) 
```

这是

```
unless @conversation.try(:is_participant? , current_user) 
```

try 将返回 nil is @conversation is nil 最终在 if 语句中计算为 false。

# python - python cPickle不保存类列表

> ID：11356604
> 
> 赞同：1
> 
> 时间：2012-07-06T05:56:03.250
> 
> 标签：python, serialization, pickle

```
import cPickle

class player:
    level = 1
    exp = 0
    inven = []

char = player()

#Append items to char.inven later in program

def save():
    file = open('savegame.dat', 'w')
    cPickle.dump(char, file)

def load():
    s_g = open('savegame.dat', 'r')
    char = cPickle.load(s_g)
    s_g.close() 
```

这是实际代码的一小部分，我将其删减以显示哪里出错了。

当我保存/加载它时，它不会将项目保留在 char.inven 中，即使我专门将列表转储到文件中也是如此。知道为什么它会删除列表中的项目吗？

此外，如果我在转储之前加入列表，它会保存它。但是有些列表项是 2 个单词，所以 list.split() 使它与以前不同

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T06:00:17.503

`inven`是类的属性，而不是实例。Pickle 没有保存任何关于类的信息。它只是存储类的名称以便稍后重新实例化它。我猜你无论如何都不想`inven`成为一个类属性，所以你应该这样做：

```
class player:
    def __init__(self):
        self.level = 1
        self.exp = 0
        self.inven = [] 
```

编辑：如果您看到它`level`已保存，可能是因为您正在重新绑定它。例如，如果您有执行此操作的代码：

```
self.level += 1 
```

您没有增加类属性。您正在创建一个新的实例属性。每当你有一个实例`obj`并且你`obj,attr = ...`创建了一个实例属性，而不是一个类属性。

您没有看到与 inven 相同的效果的原因是您可能正在对其进行变异（例如，使用`self.inven.append(...)`）而不是重新绑定它。因此，您永远不会创建实例属性，而只是不断修改类属性。

您应该在 StackOverflow 上搜索有关类与实例属性（有时也称为类和实例变量）的问题，以了解其在 Python 中的工作原理。

# hadoop - 数据移动 HDFS Vs 并行文件系统 Vs MPI

> ID：11356605
> 
> 赞同：1
> 
> 时间：2012-07-06T05:56:03.630
> 
> 标签：hadoop, filesystems, hdfs

我目前正致力于在 MR-MPI（MPI 上的 MapReduce）上实现机器学习算法。而且我还试图了解其他 MapReduce 框架，尤其是 Hadoop，所以以下是我的基本问题（我是 MapReduce 框架的新手，如果我的问题没有意义，我表示歉意）。

问题：因为 MapReduce 可以在许多事物之上实现，例如并行文件系统 (GPFS)、HDFS、MPI 等。在映射步骤之后有一个整理操作，然后是一个归约操作。对于整理操作，我们需要跨节点进行一些数据移动。在这方面，我想知道 HDFS Vs GPFS Vs MPI 中的数据移动机制（节点之间）有什么区别。

如果您能给我一些很好的解释，我很感激，并且可以给我一些关于这些的很好的参考，这样我就可以了解更多的细节。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T06:49:17.867

MapReduce 作为一种范例可以在许多存储系统上双向实现。事实上，Hadoop 有所谓的 DFS（分布式文件系统）抽象，它可以集成不同的存储系统并在它们上运行 MapReduce。例如有 Amazon S3、本地文件系统、Opens Stack Swift 和其他集成。
同时，HDFS 集成有一个特殊属性——它向 MR 引擎（更具体地说，是 JobTracker）报告数据所在的位置，并且它可以智能调度 Mapping，每个 Mapper 处理的数据通常与映射器。因此，在映射阶段，当 MR 在 HDFS 上运行时，数据不会通过网络移动。
更一般地说，Hadoop MR 的想法是将代码移动到数据而不是相反，并且在评估任何可扩展的 MR 实现时，它应该是重要的标准——这个系统是否关心映射器处理本地数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T09:18:28.417

OP混合了一些东西-消息传递和文件系统，因此有多个答案。

Hadoop/MAPI 是一个 WIP，您可以[在此处](https://issues.apache.org/jira/browse/MAPREDUCE-2911)找到更多详细信息。

Hadoop/GPFS 仍然是[开放](https://issues.apache.org/jira/browse/HADOOP-6330)的。

Hadoop/HDFS 来自[Apache Hadoop](http://hadoop.apache.org/)。对于映射器和减速器之间的数据传输，使用 HTTP，不知道为什么。

# c# - 使用 C dll 在 c# 中“找不到名为”的入口点

> ID：11356606
> 
> 赞同：3
> 
> 时间：2012-07-06T05:56:06.750
> 
> 标签：c#

我正在尝试一个简单的程序通过 dll 将 C 函数访问到 C# 程序中，

```
class DllImportTest
{
    [DllImport("TestApp.dll", EntryPoint = "main1")]
    public static extern void main1();
}

class Program
{
    static void Main(string[] args)
    {
        DllImportTest.main1() ;
    } 
```

我已经看穿了代码，函数的名称是完全正确的。我也尝试过使用 Extern "C" 但是，它的 .C 文件给我一个错误。我已将 .Dll 放在 C# 可执行文件夹中。我在这里做错了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T04:55:48.620

Found it! I had to use Extern "C" coupled with __declspec(dllexport) . I had never used both together, Thanks guys

# html - 直接打开文件和上传到网络服务器的区别

> ID：11356609
> 
> 赞同：0
> 
> 时间：2012-07-06T05:56:24.983
> 
> 标签：html, testing

给定一个简单的 HTML 文件，测试时有什么区别，直接双击打开它或上传到 IIS/Tomcat 并访问 localhost/simpleHTML？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T06:18:00.623

**No**, a simple HTML-only file will not be rendered differently most(99.9%) of the time by opening it directly by double-clicking from the local file system and accessing it from a web server. The only difference will be caused if the file contains any server side language (PHP, ASP etc..)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T06:17:18.930

在 html 文件的情况下，它并不重要。重要的是页面是用 php、jsp 等语言制作的。直接打开时浏览器不会检测到包含 php 或 jsp 文件的网页。为此，我们使用 wamp、xampp、lamp、tomcat 等网络服务器，并通过 localhost/pagename 访问它。有关更多详细信息，只需查看 php 文件的页面源。您将无法在其中找到和 php 脚本。您将只能看到页面中的 html 部分。对于 html、javascript、css 等脚本语言，直接打开并不重要。

希望这对你有用。

# .htaccess - .htaccess Url Rewrite 停止我的搜索功能

> ID：11356611
> 
> 赞同：0
> 
> 时间：2012-07-06T05:56:36.843
> 
> 标签：.htaccess, mod-rewrite, rewrite

我已经在 .htaccess Url 中设置了重写所有工作只是我的搜索功能停止如何使工作搜索功能

我的搜索网址是这个

```
http://domain.com/index.php?a=search&q=word 
```

但是在提交搜索框 url 之后，这个并不起作用

```
http://www.domain.com/?a=search&q=word 
```

我怎样才能使搜索框工作？我的 htaccess 文件

```
RewriteEngine on
RewriteCond %{HTTP_HOST} ^www.domain.com
RewriteRule (.*) http://domain.com/$1 [R=301,L]
RewriteCond %{request_filename} -f
RewriteRule ^(.*) $1 [L]
RewriteRule ^([^/]*)$ /index.php?a=$1 [L]
RewriteRule ^([^/]*)/([^/]*)$ /index.php?a=$1&q=$2&page=$3 [L]
RewriteRule ^([^/]*)/([^/]*)/([^/]*)$ /index.php?a=$1&q=$2&page=$3 [L] 
```

我的搜索表单

```
<form class="form-wrapper cf">
<form accept-charset="UTF-8" action="http://www.domain.com/index.php" method="get">
<input name="a" type="hidden" value="search" />
        <input type="text" id="search" name="q" placeholder="Search here..." required>
        <button type="submit">Search</button>
</form> 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T18:05:42.557

我通过改变得到了解决方案

```
<form class="form-wrapper cf">
<form accept-charset="UTF-8" action="/index.php" method="get">
<input name="a" type="hidden" value="search" />
        <input type="text" id="search" name="q" placeholder="Search here..." required>
        <button type="submit">Search</button>
</form> 
```

改成

```
<div class="form-wrapper cf" >
<form accept-charset="UTF-8" action="/index.php" method="get"><div style="margin:0;padding:0;display:inline"><input name="a" type="hidden" value="search"/></div>
<input id="search" name="q" type="text"/>
<button type="submit">Search</button>
</form>
</div> 
```

# ruby-on-rails - 如何在 Rails 2.3.14 应用程序中配置 memprof？

> ID：11356613
> 
> 赞同：4
> 
> 时间：2012-07-06T05:57:00.010
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-2, memprof

我在我的配置/初始化程序中添加了这些行

```
require 'memprof/middleware'
config.middlewares.use(Memprof::Middleware)

require 'memprof/tracer'
config.middleware.insert(0, Memprof::Tracer) 
```

收到此错误

```
config/environments/development.rb:98:in `load_environment': undefined method `middlewares' for #<Rails::Configuration:0xb73dd47c> (NoMethodError)
    from /usr/lib/ruby/gems/1.8/gems/rails-2.3.14/lib/initializer.rb:386:in `load_environment'
    from /usr/lib/ruby/gems/1.8/gems/activesupport-2.3.14/lib/active_support/core_ext/kernel/reporting.rb:11:in `silence_warnings'
    from /usr/lib/ruby/gems/1.8/gems/rails-2.3.14/lib/initializer.rb:379:in `load_environment'
    from /usr/lib/ruby/gems/1.8/gems/rails-2.3.14/lib/initializer.rb:137:in `process'
    from /usr/lib/ruby/gems/1.8/gems/rails-2.3.14/lib/initializer.rb:113:in `send'
    from /usr/lib/ruby/gems/1.8/gems/rails-2.3.14/lib/initializer.rb:113:in `run'
    from /home/krunals/ms/trunk/2012-06-18-01-MangoApps/config/environment.rb:22
    from /usr/local/lib/site_ruby/1.8/rubygems/custom_require.rb:49:in `gem_original_require'
    from /usr/local/lib/site_ruby/1.8/rubygems/custom_require.rb:49:in `require'
    from /usr/lib/ruby/gems/1.8/gems/activesupport-2.3.14/lib/active_support/dependencies.rb:182:in `require'
    from /usr/lib/ruby/gems/1.8/gems/activesupport-2.3.14/lib/active_support/dependencies.rb:547:in `new_constants_in'
    from /usr/lib/ruby/gems/1.8/gems/activesupport-2.3.14/lib/active_support/dependencies.rb:182:in `require'
    from /usr/lib/ruby/gems/1.8/gems/rails-2.3.14/lib/commands/server.rb:84
    from /usr/local/lib/site_ruby/1.8/rubygems/custom_require.rb:49:in `gem_original_require'
    from /usr/local/lib/site_ruby/1.8/rubygems/custom_require.rb:49:in `require'
    from script/server:3 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T09:48:19.167

代替

```
config.middlewares.use(Memprof::Middleware) 
```

尝试

```
config.middleware.use(Memprof::Middleware) 
```

# java - java中2个对象的区别

> ID：11356616
> 
> 赞同：4
> 
> 时间：2012-07-06T05:57:13.007
> 
> 标签：java

我想编写一个 java 程序，它必须找到不同实例的两个对象之间的差异。我已经使用 equals() 和比较器实现了它。但是在这里我想找到差异并且必须以日志格式显示。

我的程序如下：

```
public class A implements Comparator<A>{

private int id1, id2;

/* setters and getters for id1 and id2 */

     public boolean equals(Object arg0) {
    if (this.getClass() != arg0.getClass()) {
        return false;
        }

        if (((A) arg0).getId1() == this.id1 && ((A) arg0).getId2() == this.id2) {
        return true;
        }

        return false;
     }

 public static void main(String args[]) {

    A obj1 = new A();
    obj1.id1 = 10;
    obj1.id2 = 20;

    A obj2 = new A();
    obj2.id1 = 30;
    obj2.id2 = 20;

    /*
     * equals comparison
     */

    if (obj1.equals(obj2)) {
        System.out.println("EQUALS");
    } else {
        System.out.println("NOT EQUALS");
    }

} 
```

请任何人告诉我如何找到差异并以日志格式显示。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T06:47:29.477

要实现`Comparator<A>`你需要一个方法`public int compare(A o1, A o2)`。这是这种实现的一个例子：

```
@Override
public int compare(A o1, A o2) {
    if (o1 == o2) {
        return 0;
    } else if (o1 == null) {
        return -1;
    } else if (o2 == null) {
        return 1;
    }
    if (o1.getId1() != o2.getId1()) {
        return o1.getId1() - o2.getId1();
    } else {
        return o1.getId2() - o2.getId2();
    }
} 
```

然后你可以像这样使用它：

```
 if (obj1.compare(obj1, obj2) == 0) {
        System.out.println("EQUALS");
    } else {
        System.out.println("NOT EQUALS");
    } 
```

让另一个类实现`Comparator<A>`，而不是把它放在`A`自己里面可能更常见。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T07:37:13.447

您可以使用 java`Reflection`来比较两个相同类型的 bean，它们具有用于所有比较属性的 getter。

```
public static void compareBeans(Object bean1, Object bean2, String... propertyNames)
          throws IntrospectionException,
          IllegalAccessException, InvocationTargetException {
        Set<String> names = new HashSet<String>(Arrays
            .asList(propertyNames));
        BeanInfo beanInfo = Introspector.getBeanInfo(bean1
            .getClass());
        for (PropertyDescriptor prop : beanInfo
            .getPropertyDescriptors()) {
          if (names.remove(prop.getName())) {
            Method getter = prop.getReadMethod();
            Object value1 = getter.invoke(bean1);
            Object value2 = getter.invoke(bean2);
            if (value1 == value2
                || (value1 != null && value1.equals(value2))) {
              continue;
            }

            System.out.println("Property = "+prop.getName() +" Value of been1 ="+value1 +" : Value of bean2 ="+value2);
          }
        }
      } 
```

**用法：**

`Student`如果我比较两个具有两个属性`name`的`age`类的豆类

```
BeanComparator.compareBeans(new Student("Amita", 21), new Student("Amit", 23) , props); 
```

**输出：**

```
Property = age Value of been1 =21 : Value of bean2 =23
Property = name Value of been1 =Amita : Value of bean2 =Amit 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T06:03:23.737

您可以更改`equals`方法并比较每个属性。对于您进行的每次比较，您都会记录您的结果。像这样的东西应该起作用：

```
@Override
public boolean equals(Object arg0) {
    if (this.getClass() != arg0.getClass()) {
        return false;
    }

    boolean same = true;
    //LOG: Comparing ((A) arg0).getId1() with this.id1
    if (((A) arg0).getId1() == this.id1) {
        //LOG: Property Id1 is the same for both: Value of Id1 = this.id1        
    }
    else {
        //LOG: Property Id1 is not the same. Source Id1 = ((A) arg0).getId1() , target Id1 = this.id1
        same = false;
    }

    if (((A) arg0).getId2() == this.id2) {
        //LOG: Property Id2 is the same for both: Value of Id2 = this.id2        
    }

    else {
        //LOG: Property Id2 is not the same. Source Id2 = (((A) arg0).getId2(), target Id2 = this.id2
        same = false;
    }

    //
    return same;
} 
```

*编辑：当您说您自己的比较器*时，我并不完全理解您的意思。如果您想自己进行比较，可以执行以下操作：

```
public boolean areTheSame(Object arg1, Object arg2)
{
    if (arg1.getClass() != arg0.getClass()) {
        return false;
    }

    boolean same = true;
    //LOG: Comparing ((A) arg0).getId1() with arg1.id1
    if (((A) arg0).getId1() == arg1.id1) {
        //LOG: Property Id1 is the same for both: Value of Id1 = arg1.id1        
    }
    else {
        //LOG: Property Id1 is not the same. Source Id1 = ((A) arg0).getId1() , target Id1 = arg1.id1
        same = false;
    }

    if (((A) arg0).getId2() == arg1.id2) {
        //LOG: Property Id2 is the same for both: Value of Id2 = this.id2        
    }

    else {
        //LOG: Property Id2 is not the same. Source Id2 = (((A) arg0).getId2(), target Id2 = arg1.id2
        same = false;
    }

    //
    return same;
} 
```

你可以把它放在你的主类中并调用它而不是这些行：

```
if (obj1.equals(obj2)) {
    System.out.println("EQUALS");
} else {
    System.out.println("NOT EQUALS");
} 
```

所以你只需这样做：

```
if (areTheSame(obj1, obj2)) 
{
    System.out.println("They are equal");
}
else
{
    System.out.println("They are not equal");
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-29T08:52:07.860

您可以使用*Apache Commons EqualsBuilder*来生成您的`equals()`方法

给定一个类：

```
public class Person {
    private long id;
    private String firstName;
    private String lastName;
} 
```

你的 equals 方法看起来像

```
public boolean equals(Object object) {
    if (!(object instanceof Person)) {
        return false;
    }
    Person rhs = (Person) object;
    return new EqualsBuilder()
        .appendSuper(super.equals(object))
        .append(firstName, rhs.firstName)
        .append(lastName, rhs.lastName)
        .isEquals();
} 
```

或者，如果您想使用反射来执行此操作

```
public boolean equals(Object o) {
   return EqualsBuilder.reflectionEquals(this, o);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-04-05T13:15:44.780

您可以使用开源工具 javers - [https://github.com/javers/javers](https://github.com/javers/javers)。在 Javers 中，您可以找到返回 Diff 的方法 compare(Object one, Object another)。Diff 包含一个更改列表（引用添加、属性更改等）。

# javascript - onClick 事件在 Safari 中不起作用，但在 IE/FF/Chrome/Opera 浏览器中运行良好

> ID：11356621
> 
> 赞同：3
> 
> 时间：2012-07-06T05:57:39.650
> 
> 标签：javascript

我正在使用 JavaScript onClick 事件，它适用于 IE/FF/Chrome 浏览器，但不适用于 Safari 浏览器。

我正在使用的代码如下：

```
heartSelectHandler = {
    clickCount : 0,
    action : function(select)
    {
        heartSelectHandler.clickCount++;
        if(heartSelectHandler.clickCount%2 == 0)
        {
            selectedValue = select.options[select.selectedIndex].value;
            heartSelectHandler.check(selectedValue);
        }
    },
    blur : function() // needed for proper behaviour
    {
        if(heartSelectHandler.clickCount%2 != 0)
        {
            heartSelectHandler.clickCount--;
        }
    },
    check : function(value)
    {
       alert('Changed! -> ' + value);
    }
}

<select onclick="javascript:heartSelectHandler.action(this);" onblur="javascript:heartSelectHandler.blur()" id="heart" data-role="none">
    <?php for ($i = 20; $i <= 150; $i++): ?>
    <option  value="<?php echo $i; ?>"><?php echo $i; ?></option>
    <?php endfor; ?>
</select> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T06:06:45.500

使用 onchange 而不是 onclick，因为这将确保纯粹通过键盘对选择的更改也会按预期触发事件（对吗？）。

即使用：

```
onchange="javascript:heartSelectHandler.action(this);" 
```

代替：

```
onclick="javascript:heartSelectHandler.action(this);" 
```

# xpath - XQuery 和 BaseX - 如何将输出存储到组合框？

> ID：11356626
> 
> 赞同：1
> 
> 时间：2012-07-06T05:57:58.123
> 
> 标签：xpath, xquery, basex

我使用 BaseX 作为后端来存储 XML 文件。前端是Java。我想将某些元素数据填充到组合框中。XQuery 的输出是字符串。我在将这个字符串加载到组合框中时遇到了问题。以下是 XML 文件-

```
<Cities>
  <City><C>London</C></City>
  <City><C>New Delhi</C></City>
  <City><C>Mumbai</C></City>
  <City><C>Moscow</C></City>
  <City><C>Tokyo</C></City>
  <City><C>Mumbai</C></City>
  <City><C>Tokyo</C></City>
  <City><C>Mumbai</C></City>
  <City><C>Tokyo</C></City>
  <City><C>Mumbai</C></City>
  <City><C>New Delhi</C></City>
</Cities> 
```

使用这个 XML 文件，我想在一个组合框中填充所有不同的城市。这将通过遵循 XQuery 来完成 -

```
for $x in distinct-values(doc("City")/Cities/City/C)
  return $x 
```

它的输出是一个简单的字符串 -

```
`London New Delhi Mumbai Moscow Tokyo` 
```

查询结果有 5 个城市。我怎样才能在组合框中填充它..？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-07T12:13:45.973

这可能会有所帮助：

```
element select {
  distinct-values(doc("City")/Cities/City/C) ! element option { . }
} 
```

# iphone - 如何保存视图

> ID：11356628
> 
> 赞同：0
> 
> 时间：2012-07-06T05:58:13.520
> 
> 标签：iphone, objective-c, view, retain

我想保存我的视图并在我们关闭 ipad 时将其取回。

我找到了一种将其转换为图像的方法，但我想将其作为视图而不是图像取回，所以我的问题是“我们可以将图像转换回已经从视图转换为图像的视图”。

否则，有没有其他方法可以将我们的视图保存为视图本身，所以我需要解决这个问题，

但是当我处理其他模块时我可以保留我的视图，在这里我只是将我的视图分配给其他一些视图对象并在我回到那个类时使用它。

但问题是当我们关闭应用程序新打开的 ipad 时，它会丢失更改，所以想保留我上次更改的视图。

我正在等待最受欢迎的答案。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T06:05:16.780

不，没有办法将图像转换为视图。您可以做的是，您可以将对象保存在视图中，在某个文件中保存值和位置。当您关闭并再次打开 iPad 时，您需要使用保存的数据重新加载它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T06:07:09.760

您必须保存与视图中每个元素相对应的数据，例如按钮、标签和其他元素及其状态和框架。

或者，您可以定义应用程序中可能出现的视图状态。这样您就可以只保存状态，然后在启动时读取值并重新创建视图。

简单的例子是一个游戏应用程序。每个级别都可以重新创建，并且从某个级别的开始开始播放。但是，它们通常不会从中断的地方继续。

也就是说，这并不意味着无法保存整个状态。

# actionscript-3 - TextInput 永远不会获得焦点

> ID：11356630
> 
> 赞同：0
> 
> 时间：2012-07-06T05:58:23.107
> 
> 标签：actionscript-3, apache-flex, textbox, flex3

我试图`TextInput`在一个按钮内部有一个，但似乎我的按钮拦截了我之前的所有鼠标事件`TextInput`。

基本上我有这样的课`BaseButton`：

```
public class BaseButton extends Sprite
{
    [...]
        public function addMouseListeners( target : InteractiveObject = null ) : void {
            if ( !target ) target = this;
            target.addEventListener(MouseEvent.ROLL_OVER, mouseOverHandler, false, 0, true);
            target.addEventListener(MouseEvent.ROLL_OUT, mouseOutHandler, false, 0, true);
            target.addEventListener(MouseEvent.MOUSE_DOWN, mouseDownHandler, false, 0, true);
            target.addEventListener(MouseEvent.MOUSE_UP, mouseUpHandler, false, 0, true);
        }
    [...]
} 
```

我要放置`TextInput`扩展的类`BaseButton`

```
public class AddFilterDropDownListItem extends BaseButton {
    private var _input:TextInput;

    public function AddFilterDropDownListItem() {
        super();
    }

    override protected function setupAssets():void {
        _input = new TextInput();
        _input.height = 40;
        _input.width = 240;
        this.addChild(_input);
        _input.appendText("Add..");
    }
} 
```

我无法编辑`TextInput`，点击事件似乎被`BaseButton`. 我不明白为什么，作为一个孩子`BaseButton`，我`TextInput`没有优先权？

`TextInput`我可以通过将其添加到父级来解决我的问题：

```
override protected function setupAssets():void {
    _input = new TextInput();
    _input.height = 40;
    _input.width = 240;
    parent.addChild(_input);  //<------ dirty solution
    _input.appendText("Add..");
} 
```

你能解释一下为什么它失败了吗？我怎样才能干净地解决它？

PS：我无法更改项目的架构。我的课必须延长`BaseButton`，我不能改变`BaseButton`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T07:37:37.193

该类`BaseButton`可能已`mouseChildren`设置为`false`，这会阻止任何嵌套的 DisplayObjects 接收鼠标事件。如果您`mouseChildren = true;`在派生类上进行设置，一切都应该按预期工作。

# android - 如何在 android 中集成 SIP/Voip 以进行内部（即分机）呼叫

> ID：11356635
> 
> 赞同：2
> 
> 时间：2012-07-06T05:58:54.363
> 
> 标签：android, sip, voip

我想在 android 中开发一个在组织内进行内部调用的应用程序。就像我们有固定电话扩展一样，我想在 android 中创建应用程序。我做了一些研究并了解了 Android 9+ API 中的 SIP/VoIP。但我找不到任何好的资源。有一些项目，如 sipdroid、linphone 等，但无法找到资源将它们与 android 集成并创建基本应用程序。我也开始知道我必须向某个提供商注册我的分机。

因此，任何对 SIP/Voip 有好的想法的人请向我推荐一些检查点和资源。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T11:01:46.823

[您可以从http://www.linphone.org/eng/documentation/dev/](http://www.linphone.org/eng/documentation/dev/)下载 linphone 库

# php - 这个 php 类有什么问题

> ID：11356646
> 
> 赞同：1
> 
> 时间：2012-07-06T05:59:50.587
> 
> 标签：php, oop

我是 php 的 OOP 概念的新手。我做了一个这样的类

```
<?Php
  class ShopProductWriter {
    public function write( $shopProduct ) {
    $str = "{$shopProduct->title}: " .
            $shopProduct->getProducer() .
           " ({$shopProduct->price})\n";
    print $str;
    }
  }

  $product1 = new ShopProduct( "My Antonia", "Willa", "Cather", 5.99 );
  $writer = new ShopProductWriter();
  $writer->write( $product1 );
?> 
```

在这里，我收到了错误，就像`Fatal error: Class 'ShopProduct' not found in line 11`实际上我正在从教程中做这个示例一样。有人可以告诉我错误的部分在哪里。我已经完全像教程一样。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T06:07:00.180

您还需要像这样定义 ShopProduct 类：

```
class ShopProduct 
{
    public $title;
    public $price;        

    public function __construct( $title, $value1, $value2, $price)
    {
        $this->title = $title;
        $this->price= $price;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T06:06:08.650

您创建了类 ShopProduct 的新实例，尽管您没有定义它。您只声明了 ShopProductWriter 而没有声明 ShopProduct。这就是为什么`$writer = new ShopProductWriter();`有效和`$product1 = new ShopProduct( "My Antonia", "Willa", "Cather", 5.99 );`无效的原因。

# javascript - Rails3.2 应用程序的 reset.css 和 modernizr

> ID：11356647
> 
> 赞同：0
> 
> 时间：2012-07-06T05:59:53.550
> 
> 标签：javascript, css, ruby-on-rails, html5boilerplate, css-reset

我想将 reset.css 和 modernizer.js 添加到我的新 Rails 应用程序中，但是有很多不同的方法可以做到这一点。我听说 HTML5 BoilerPlate 包含了一个 reset.css 和现代化程序，但其中绝大多数不是 rails 所需要的。我遇到了很多选择，但不确定哪个是我项目的最佳选择。

我基本上希望尽可能简化前端的开发。我不希望支持所有浏览器，只支持过去几个版本的 FF、Chrome 和 IE。您会推荐我使用哪些 css 和 js 库，以及如何将它们添加到 rails3.2？

谢谢

# c++ - 增加进程的内存使用量

> ID：11356652
> 
> 赞同：1
> 
> 时间：2012-07-06T06:00:15.990
> 
> 标签：c++, multithreading, memory, process

我有一个在 Solaris 中运行的 C++ 进程，它创建 3 个线程来执行一些任务。这些线程在循环中执行，只要进程正在运行，它就会运行。

但是，我看到进程的内存使用量不断增长，一旦内存使用量超过 4GB，进程核心就会转储。

有人可以给我一些关于内存使用增长背后的问题的指示吗？我该怎么做才能防止进程由于内存耗尽而导致核心转储？

线程重启有帮助吗？

欢迎任何指点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T06:07:12.657

不，重新启动线程无济于事。

您的应用程序中似乎存在内存泄漏。

根据我的经验，有两种类型的内存泄漏：

*   应用程序退出时可以看到的真实内存泄漏
*   'false' 内存泄漏，例如在应用程序的生命周期内增加但在最后被正确清理的大列表

对于第一种类型，有一些工具可以报告应用程序退出时尚未释放的内存。我不了解 Solaris，但 Windows 下有许多工具可以做到这一点。对于 Unix，我认为 Valgrind 可以做到这一点。

对于第二种类型，Windows 下也有一些工具可以对应用程序的内存进行快照。只需每隔几分钟或几小时（取决于您的应用程序）拍摄两个快照，然后让它们通过工具进行比较。Solaris 上可能有类似的工具。

使用这些工具可能需要您的应用程序占用更多内存，因为该工具需要存储每个内存分配的调用堆栈。因此，它的运行速度也会慢得多。但是，只有在您积极使用此工具时才会看到此效果，因此在实际生产代码中没有效果。

所以，只好在Solaris下找这种工具了。我很快用谷歌搜索并找到了这个链接： http: [//prefetch.net/blog/index.php/2006/02/19/finding-memory-leaks-on-solaris-systems/](http://prefetch.net/blog/index.php/2006/02/19/finding-memory-leaks-on-solaris-systems/)。这可能是一个起点。

**编辑：**一些附加信息：你在寻找正确的记忆吗？即使你总共只分配了 3GB，由于内存碎片，总的虚拟地址空间仍然可能达到 4GB。不幸的是，您对此无能为力（除了使用另一种内存分配策略）。

# c++ - 编译 Love 2D Xcode：架构的未定义符号

> ID：11356656
> 
> 赞同：0
> 
> 时间：2012-07-06T06:00:53.350
> 
> 标签：c++, xcode, love2d, lua-api

当我在 xcode 中编译 c++ 时，如何让编译器识别这些“符号”。这是错误（我有一种感觉，它忽略了框架，然后为缺少的框架提供了错误）

```
ld: warning: ignoring file /Developer/SDKs/MacOSX10.7.sdk/Library/Frameworks/IL.framework/IL, missing required architecture x86_64 in file
ld: warning: ignoring file /Developer/SDKs/MacOSX10.7.sdk/Library/Frameworks/Vorbis.framework/Vorbis, missing required architecture x86_64 in file
ld: warning: ignoring file /Developer/SDKs/MacOSX10.7.sdk/Library/Frameworks/FreeType.framework/FreeType, missing required architecture x86_64 in file
ld: warning: ignoring file /Developer/SDKs/MacOSX10.7.sdk/Library/Frameworks/Lua.framework/Lua, missing required architecture x86_64 in file
ld: warning: ignoring file /Developer/SDKs/MacOSX10.7.sdk/Library/Frameworks/Ogg.framework/Ogg, missing required architecture x86_64 in file
ld: warning: ignoring file /Developer/SDKs/MacOSX10.7.sdk/Library/Frameworks/physfs.framework/physfs, missing required architecture x86_64 in file
ld: warning: ignoring file /Developer/SDKs/MacOSX10.7.sdk/Library/Frameworks/libmodplug.framework/libmodplug, missing required architecture x86_64 in file
ld: warning: ignoring file /Developer/SDKs/MacOSX10.7.sdk/Library/Frameworks/mpg123.framework/mpg123, missing required architecture x86_64 in file
Undefined symbols for architecture x86_64:
  "_luaL_newstate", referenced from:
      _SDL_main in love-33750B9883D2854D.o
      love::thread::Thread::ThreadThread::SDL_main() in Thread.o
  "_luaL_openlibs", referenced from:
      _SDL_main in love-33750B9883D2854D.o
      love::thread::Thread::ThreadThread::SDL_main() in Thread.o
  "_lua_createtable", referenced from:
      _SDL_main in love-33750B9883D2854D.o
      love::luax_register_module(lua_State*, love::WrappedModule const&) in runtime.o
      love::luax_insistglobal(lua_State*, char const*) in runtime.o
      love::luax_insist(lua_State*, int, char const*) in runtime.o
      _auxiliar_newclass in auxiliar.o
      _global_select in select.o
      _make_assoc in select.o
      ...
  "_lua_pushstring", referenced from:
      _SDL_main in love-33750B9883D2854D.o
      love::luax_register_type(lua_State*, char const*, luaL_Reg const*) in runtime.o
      _auxiliar_newclass in auxiliar.o
      _auxiliar_tostring in auxiliar.o
      _auxiliar_add2group in auxiliar.o
      _auxiliar_getgroupudata in auxiliar.o
      _global_create in tcp.o
      ...
  "_lua_rawseti", referenced from:
      _SDL_main in love-33750B9883D2854D.o
      love::luax_table_insert(lua_State*, int, int, int) in runtime.o
      love::physics::box2d::Body::getFixtureList(lua_State*) const in Body-3A4BFE6EB3B8CF74.o
      love::physics::box2d::World::getBodyList(lua_State*) const in World.o
      love::physics::box2d::World::getJointList(lua_State*) const in World.o
      love::physics::box2d::World::getContactList(lua_State*) const in World.o
      _luaopen_love in love-9091511F51D4A764.o
      ... 
```

（它一直在继续；错误是相似的，所以我只是抽样）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T07:24:39.430

我发现了问题：

对导入的框架的引用损坏（这意味着框架不在 xcode 认为的位置），我只是删除了它并重新链接它们，一切都编译得很好

# xcode - 如何从滚动视图中的图像视图中获取标签号？

> ID：11356658
> 
> 赞同：2
> 
> 时间：2012-07-06T06:01:14.707
> 
> 标签：xcode, tags, touch, imageview, scrollview

我在从 imageview 获取标签号时遇到了麻烦。我将 UIGestureRecognizer 添加到滚动视图中的每个图像视图中，并尝试从触摸视图中获取标签号。在我触摸图像后，什么都没有发生。我的代码错了吗？请帮我。

```
 // to add images
    for (int i = 0; i < app.arrPhotoList.count; i++) {

        UIImageView *subImg = [[UIImageView alloc]initWithFrame:frame];
        subImg.contentMode = UIViewContentModeScaleAspectFit;
        subImg.layer.borderColor = [UIColor blackColor].CGColor;
        subImg.layer.borderWidth = 2.0f;
        subImg.tag = i;
        subImg.userInteractionEnabled = YES;
        UIGestureRecognizer *singleTab = [[UIGestureRecognizer alloc]initWithTarget:self action:@selector(imageTag:)];
        [subImg addGestureRecognizer:singleTab];

        /////// add img to array of imageviews/////////////
        NSString *imgName = [[app.arrPhotoList objectAtIndex:i]stringByAppendingString:@"_thumb.jpg"];
        subImg.image = [UIImage imageWithContentsOfFile:imgName];
        [scrImgView addSubview:subImg];
}

-(void) imageTag:(UIGestureRecognizer *)sender{
    NSLog(@"you selected tag number is : %d",sender.view.tag);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T06:47:48.550

更改此行

```
UIGestureRecognizer *singleTab = [[UIGestureRecognizer alloc]initWithTarget:self action:@selector(imageTag:)]; 
```

对此

```
UITapGestureRecognizer *singleTab = [[UITapGestureRecognizer alloc]initWithTarget:self action:@selector(imageTag:)]; 
```

HTH。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T06:49:09.420

您应该编写`UITapGestureRecognizer`而不是`UIGestureRecognizer`设置委托。有关[UIGestureRecognizer](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIGestureRecognizer_Class/Reference/Reference.html)的更多信息。

```
 UITapGestureRecognizer *singleTab = [[UITapGestureRecognizer alloc]initWithTarget:self action:@selector(imageTag:)];
        singleTab.delegate=self;
        [subImg addGestureRecognizer:singleTab]; 
```

我想这会对你有所帮助。

# ruby-on-rails - RUBY：如何计算数据库列条目

> ID：11356663
> 
> 赞同：0
> 
> 时间：2012-07-06T06:02:01.523
> 
> 标签：ruby-on-rails

我是 Ruby 的新手，我尝试过一些在线教程，但是我想检查一些东西，因为我似乎无法让它工作，我现在迷路了。

我已经用 Ruby 建立了一个数据库作为注册网站。这是一个简单的单行数据库，我只使用由 ruby​​ 创建的默认应用程序控制器。现在我的问题。

我想计算我的一个数据库列中的所有条目，该列只有两个静态条目（是/否），我想将 YES 计为 2 个条目，将 NO 计为 1 个条目，并在 index.html 上显示总数.erb，这可能吗？

提前致谢

编辑...

表 = mydb 列 = 答案

我在控制器中使用了以下几行，但是当我运行应用程序时，我得到了动态常量分配。

```
NO_WEIGHT = 1
YES_WEIGHT = 2
yes_count = ModelName.where(:column_name => "YES").count * YES_WEIGHT
no_count = ModelName.where(:column_name => "NO").count * NO_WEIGHT 
```

有了那个错误，我用

```
@NO_WEIGHT = 1
@YES_WEIGHT = 2
@yes_count = mydb.where(:answer => "YES").count * @YES_WEIGHT
@no_count = mydb.where(:answer => "NO").count * @NO_WEIGHT 
```

有了这个，我检查了日志，我看到了这个

```
Select Count(*) from mydb where mydb.answer = 'YES'
Select Count(*) from mydb where mydb.answer = 'NO' 
```

没有预期的“* @YES_WEIGHT”作为乘数。

我还想尝试它是否使用以下行在我的 index.html 上显示结果：

```
<p> YES count is <% @yes_count %> </p> 
```

但遗憾的是没有输出。

我只想检查如何将动态常量修复为静态变量，以便我的查询按预期工作和显示。

感谢所有的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T06:06:17.667

如果您使用 ActiveRecord，您需要类似的东西（表是用户，是/否在状态列中）：

```
Users.find(:all,
 :select => "count(*) as status_count",
 :group => "status"
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T06:06:47.277

如果我理解你的问题，是这样的：

```
NO_WEIGHT = 1
YES_WEIGHT = 2
yes_count = ModelName.where(:column_name => "YES").count * YES_WEIGHT
no_count = ModelName.where(:column_name => "NO").count * NO_WEIGHT 
```

# python - ffmpeg子进程check_call中的concat字符串

> ID：11356665
> 
> 赞同：0
> 
> 时间：2012-07-06T06:02:10.933
> 
> 标签：python, ffmpeg

需要替换子进程命令中的文件名，即文件名

```
filename = '\'D\:/imagesequence/thumbnail.jpg\''

task = '\"movie= ' + filename + '[watermark]; [in][watermark] overlay=(main_w-overlay_w)/2:(main_h-overlay_h)/3 [out]\"' 
```

c = subprocess.check_call(["ffmpeg", "-i", "D:/imagesequence/background222.jpg", "-vf", 任务, "D:/imagesequence/fwtm108.jpg"],shell=True)

这给出了错误

```
# Error: CalledProcessError: Command '['ffmpeg', '-i', 'D:/imagesequence/background222.jpg', '-vf', '"movie= \'D\\:/imagesequence/thumbnail.jpg\'[watermark];[in][watermark] overlay=(main_w-overlay_w)/2:(main_h-overlay_h)/3 [out]"', 'D:/imagesequence/fwtm107.jpg']' returned non-zero exit status 1 # 
```

总而言之，它运作良好

```
c = subprocess.check_call(["ffmpeg", "-i", "D:/imagesequence/background222.jpg", "-vf", "movie= 'D\:/imagesequence/thumbnail.jpg'[watermark]; [in][watermark] overlay=(main_w-overlay_w)/2:(main_h-overlay_h)/3 [out]", "D:/imagesequence/fwtm101.jpg"],shell=True) 
```

即使这样也有效

```
task = "movie= 'D\:/imagesequence/thumbnail.jpg'[watermark]; [in][watermark] overlay=(main_w-overlay_w)/2:(main_h-overlay_h)/3 [out]"

c = subprocess.check_call(["ffmpeg", "-i", "D:/imagesequence/background222.jpg", "-vf", task, "D:/imagesequence/fwtm102.jpg"],shell=True) 
```

任何不同的看法。我无法看到它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T06:27:22.177

```
q = "D\:/imagesequence/thumbnail.jpg"
task = "movie= '%s'[watermark]; [in][watermark] overlay=(main_w-overlay_w)/2:(main_h-overlay_h)/3 [out]" % q

c = subprocess.check_call(["ffmpeg", "-i", "D:/imagesequence/background222.jpg", "-vf", task, "D:/imagesequence/fwtm106.jpg"],shell=True) 
```

这行得通。谢谢至

[http://comments.gmane.org/gmane.comp.python.tutor/65858](http://comments.gmane.org/gmane.comp.python.tutor/65858)

# android - 如何在地图中放置我自己的谷歌默认图标图标？

> ID：11356667
> 
> 赞同：1
> 
> 时间：2012-07-06T06:02:21.217
> 
> 标签：android, google-maps, overlay

我正在尝试制作一个可以识别附近公交车站的应用程序。谷歌地图有一个特定的图标来表示它们。我有些希望使用覆盖或其他东西将我自己的图标放在谷歌地图的默认图标上方。我怎么能做到这一点？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T06:09:43.900

本教程将教你所有你需要知道的关于如何添加你自己的自定义图标的知识。

[https://developers.google.com/maps/documentation/android/hello-mapview](https://developers.google.com/maps/documentation/android/hello-mapview)

它教您从如何添加图标到如何使其与您的地图视图相关的每个部分。

# xml - 如何在 xslt 2.0 中获取与此场景相关的特定 XML 元素索引？

> ID：11356668
> 
> 赞同：2
> 
> 时间：2012-07-06T06:02:27.043
> 
> 标签：xml, xslt, xpath, xslt-2.0

我想通过使用 XSLT2.0 将一个 xml 转换为另一个 xml。在这样做的同时，我想找出一些关于我在此处解释的场景的 XML 元素索引...

**这是 XML 文档：**

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<w:document xmlns:w="http://schemas.openxmlformats.org/wordprocessingml/2006/main">
    <w:body>
        <w:sdt>
            <w:sdtContent>
                <w:p>
                    <w:pPr>
                        <w:pStyle w:val="TOC"></w:pStyle>
                    </w:pPr>
                </w:p>
            </w:sdtContent>
        </w:sdt>

        <w:p>   <!-- index value 0 -->
        </w:p>

        <w:p>   <!-- index value 1 -->
        </w:p>

        <w:Bookmark></w:Bookmark> <!-- index value 2 -->
        <w:Bookmark></w:Bookmark> <!-- index value 3 -->    

        <w:pict></w:pict> <!-- index value 4 -->

        <w:p>     <!-- index value 5 -->
        </w:p>

        <w:Bookmark></w:Bookmark> <!-- index value 6 -->
        <w:Bookmark></w:Bookmark> <!-- index value 7 -->        
        <w:p>  <!-- index value 8 -->
        </w:p>      

    </w:body>
</w:document> 
```

所以，我想找到`<w:Bookmark>`元素索引。

1.  如果我的 xml 文档包含这些元素，那么我想创建一个名为“书签”的元素并设置属性“索引”。
2.  如果我的 xml 文档不包含此元素，则不执行任何操作...

索引计数从零开始，我需要`<w:sdt>`从计算索引中省略元素。请参阅我对 xml 文档的评论。

我需要的输出是：

```
 <Document>
    <Bookmark indexes="2,3,6,7">
    </Bookmark>
    </Document> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T07:13:00.567

尝试这个 ...

```
<xsl:stylesheet 
  version="2.0"
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  xmlns:w="http://schemas.openxmlformats.org/wordprocessingml/2006/main"
  xmlns:xs="http://www.w3.org/2001/XMLSchema"
  xmlns:fn="http://www.w3.org/2005/xpath-functions"
  xmlns:user="http://http://stackoverflow.com/questions/11356668"
  exclude-result-prefixes="xs fn w user">

<xsl:output indent="yes"/>

<xsl:function name="user:bookmark-index" as="xs:string">
  <xsl:param name="bookmark-node" as="element()"/>
  <xsl:for-each select="$bookmark-node">
    <xsl:value-of select="count( preceding-sibling::*) -
                          count( preceding-sibling::w:sdt)" />
  </xsl:for-each>
</xsl:function>

<xsl:template match="/">
 <Document>
  <Bookmark indexes="{
    fn:string-join( for $i in w:document/w:body/w:Bookmark return user:bookmark-index( $i), ',')
    }" />
 </Document>
</xsl:template>

</xsl:stylesheet> 
```

...或没有功能的等价物...

```
<xsl:stylesheet 
  version="2.0"
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  xmlns:w="http://schemas.openxmlformats.org/wordprocessingml/2006/main"
  xmlns:xs="http://www.w3.org/2001/XMLSchema"
  xmlns:fn="http://www.w3.org/2005/xpath-functions"
  exclude-result-prefixes="xs fn w">

<xsl:output indent="yes"/>

<xsl:template match="/">
 <Document>
  <Bookmark indexes="{
    fn:string-join( for $i in w:document/w:body/w:Bookmark return
            xs:string( count($i/preceding-sibling::*) -
                       count($i/preceding-sibling::w:sdt)),
                  ',')
    }" />
 </Document>
</xsl:template>

</xsl:stylesheet> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-06T13:40:31.043

**这个简短而简单的转换使用`<xsl:number>`**：

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
 xmlns:xs="http://www.w3.org/2001/XMLSchema"
 xmlns:w="http://schemas.openxmlformats.org/wordprocessingml/2006/main"
 exclude-result-prefixes="w xs">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="/*[//w:Bookmark]">
     <Document>
       <xsl:variable name="vIndexes" as="xs:string+">
        <xsl:apply-templates/>
       </xsl:variable>
       <Bookmark indexes="{string-join($vIndexes, ',')}"/>
     </Document>
 </xsl:template>

 <xsl:template match="w:Bookmark">
  <xsl:variable name="vPos" as="xs:integer">
    <xsl:number count="/*/w:body/*[not(self::w:sdt)]" level="any"/>
  </xsl:variable>

  <xsl:sequence select="string($vPos -1)"/>
 </xsl:template>
</xsl:stylesheet> 
```

**应用于提供的 XML 文档时：**

```
<w:document xmlns:w="http://schemas.openxmlformats.org/wordprocessingml/2006/main">
        <w:body>
            <w:sdt>
                <w:sdtContent>
                    <w:p>
                        <w:pPr>
                            <w:pStyle w:val="TOC"></w:pStyle>
                        </w:pPr>
                    </w:p>
                </w:sdtContent>
            </w:sdt>

            <w:p>   <!-- index value 0 -->
            </w:p>

            <w:p>   <!-- index value 1 -->
            </w:p>

            <w:Bookmark></w:Bookmark> <!-- index value 2 -->
            <w:Bookmark></w:Bookmark> <!-- index value 3 -->

            <w:pict></w:pict> <!-- index value 4 -->

            <w:p>     <!-- index value 5 -->
            </w:p>

            <w:Bookmark></w:Bookmark> <!-- index value 6 -->
            <w:Bookmark></w:Bookmark> <!-- index value 7 -->
            <w:p>  <!-- index value 8 -->
            </w:p>

        </w:body>
</w:document> 
```

**产生了想要的正确结果：**

```
<Document>
   <Bookmark indexes="2,3,6,7"/>
</Document> 
```

# php - 如何从 google api 搜索中仅输出 formatted_address？

> ID：11356673
> 
> 赞同：1
> 
> 时间：2012-07-06T06:03:19.633
> 
> 标签：php, curl

我只是想输出渥太华输入酒店的格式化地址。结果给了我我需要的所有数据以及不需要的东西。我需要截断这个。有任何想法吗？

```
 $address = urlencode("Hotels, in Ottawa");

     $geocodeURL = "https://maps.googleapis.com/maps/api/place/textsearch/json?query=hotels+in+Ottawa&sensor=false&key=mykey";
     $ch = curl_init($geocodeURL);
     curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
     $result = curl_exec($ch);
     $httpCode = curl_getinfo($ch, CURLINFO_HTTP_CODE);
     curl_close($ch);

     $geocode = json_decode($result);

     echo $result;

     //echo $formatted_address = $geocode->data[0]->formatted_address; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T16:05:58.037

看来我终于想通了。

```
 $geocodeURL = "https://maps.googleapis.com/maps/api/place/textsearch/json?query=hotels+in+Ottawa&sensor=false&key=mykey";
 $ch = curl_init($geocodeURL);
 curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
 $results = curl_exec($ch);
 $httpCode = curl_getinfo($ch, CURLINFO_HTTP_CODE);
 curl_close($ch);

 $geocode = json_decode($results);

 for($i=0; $i<20; $i++){
 echo $formatted_address = $geocode->results[$i]->formatted_address;
 } 
```

# android - 2.3.3 上的“超出 VM 预算”和 2.2 上的“尝试使用回收的映像”，代码相同

> ID：11356676
> 
> 赞同：1
> 
> 时间：2012-07-06T06:03:33.190
> 
> 标签：android, canvas, bitmap, imageview, bitmapfactory

我厌倦了在 stackoverflow 中尝试每一种可能性并用谷歌搜索了很多......没有得到我想要的。

```
bt=BitmapFactory.decodeResource(getResources(), dressarray[indexdress],options);
//Background1 = getApplicationContext().getResources().getDrawable(dressarray[indexdress]);
bt1=Bitmap.createBitmap(bt);
dress.setImageBitmap(bt1); 
```

我在各种情况下都有此代码...穿着代码是`ImageView` 我的屏幕上有很多图像..有10个`ImageButtons`，对于那些我有1个`onClick`方法可以`ImageView`通过检查按下哪个按钮来执行上述操作。

最后我调用了一个方法来回收位图（这是我在提问之前的最后一个变体）`onClick`。调用该方法是最后一行`onClick`

这是回收的方法

```
public void callrecycle()
    {
        bt.recycle();
        bt=null;
        bt1=null;
        System.gc();
    } 
```

现在的问题是我有一个具有 HTC EVO 屏幕密度和分辨率的模拟器，平台 2.3.3 一个第二个模拟器，密度 180，分辨率 320X480 和平台 2.2

在 2.3.3 我得到一个错误

```
07-06 10:42:41.898: D/dalvikvm(420): GC_EXTERNAL_ALLOC freed <1K, 52% free 2611K/5379K, external 19034K/19732K, paused 55ms
07-06 10:42:41.918: E/dalvikvm-heap(420): 1382400-byte external allocation too large for this process.
07-06 10:42:42.028: I/dalvikvm-heap(420): Clamp target GC heap from 25.682MB to 24.000MB
07-06 10:42:42.028: E/GraphicsJNI(420): VM won't let us allocate 1382400 bytes
07-06 10:42:42.028: D/dalvikvm(420): GC_FOR_MALLOC freed <1K, 52% free 2611K/5379K, external 19034K/19732K, paused 35ms
07-06 10:42:42.028: D/AndroidRuntime(420): Shutting down VM
07-06 10:42:42.028: W/dalvikvm(420): threadid=1: thread exiting with uncaught exception (group=0x40015560)
07-06 10:42:42.050: E/AndroidRuntime(420): FATAL EXCEPTION: main
07-06 10:42:42.050: E/AndroidRuntime(420): java.lang.OutOfMemoryError: bitmap size exceeds VM budget
07-06 10:42:42.050: E/AndroidRuntime(420):  at android.graphics.Bitmap.nativeCreate(Native Method)
07-06 10:42:42.050: E/AndroidRuntime(420):  at android.graphics.Bitmap.createBitmap(Bitmap.java:477)
07-06 10:42:42.050: E/AndroidRuntime(420):  at android.graphics.Bitmap.createBitmap(Bitmap.java:432)
07-06 10:42:42.050: E/AndroidRuntime(420):  at android.graphics.Bitmap.createBitmap(Bitmap.java:383)
07-06 10:42:42.050: E/AndroidRuntime(420):  at android.graphics.Bitmap.createBitmap(Bitmap.java:367)
07-06 10:42:42.050: E/AndroidRuntime(420):  at com.internetdesignzone.dressup.DressUp$1.onClick(DressUp.java:334)
07-06 10:42:42.050: E/AndroidRuntime(420):  at android.view.View.performClick(View.java:2485)
07-06 10:42:42.050: E/AndroidRuntime(420):  at android.view.View$PerformClick.run(View.java:9080)
07-06 10:42:42.050: E/AndroidRuntime(420):  at android.os.Handler.handleCallback(Handler.java:587)
07-06 10:42:42.050: E/AndroidRuntime(420):  at android.os.Handler.dispatchMessage(Handler.java:92)
07-06 10:42:42.050: E/AndroidRuntime(420):  at android.os.Looper.loop(Looper.java:123)
07-06 10:42:42.050: E/AndroidRuntime(420):  at android.app.ActivityThread.main(ActivityThread.java:3683)
07-06 10:42:42.050: E/AndroidRuntime(420):  at java.lang.reflect.Method.invokeNative(Native Method)
07-06 10:42:42.050: E/AndroidRuntime(420):  at java.lang.reflect.Method.invoke(Method.java:507)
07-06 10:42:42.050: E/AndroidRuntime(420):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
07-06 10:42:42.050: E/AndroidRuntime(420):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
07-06 10:42:42.050: E/AndroidRuntime(420):  at dalvik.system.NativeStart.main(Native Method)
07-06 10:42:44.968: I/Process(420): Sending signal. PID: 420 SIG: 9 
```

并在 2.2 上使用相同的代码出现错误

```
07-06 10:35:37.929: D/dalvikvm(351): GC_EXTERNAL_ALLOC freed 3K, 52% free 2620K/5379K, external 6273K/7166K, paused 59ms
07-06 10:35:38.249: D/AndroidRuntime(351): Shutting down VM
07-06 10:35:38.271: W/dalvikvm(351): threadid=1: thread exiting with uncaught exception (group=0x40015560)
07-06 10:35:38.329: E/AndroidRuntime(351): FATAL EXCEPTION: main
07-06 10:35:38.329: E/AndroidRuntime(351): java.lang.RuntimeException: Canvas: trying to use a recycled bitmap android.graphics.Bitmap@4051e4c8
07-06 10:35:38.329: E/AndroidRuntime(351):  at android.graphics.Canvas.throwIfRecycled(Canvas.java:955)
07-06 10:35:38.329: E/AndroidRuntime(351):  at android.graphics.Canvas.drawBitmap(Canvas.java:1044)
07-06 10:35:38.329: E/AndroidRuntime(351):  at android.graphics.drawable.BitmapDrawable.draw(BitmapDrawable.java:325)
07-06 10:35:38.329: E/AndroidRuntime(351):  at android.widget.ImageView.onDraw(ImageView.java:854)
07-06 10:35:38.329: E/AndroidRuntime(351):  at android.view.View.draw(View.java:6880)
07-06 10:35:38.329: E/AndroidRuntime(351):  at android.view.ViewGroup.drawChild(ViewGroup.java:1646)
07-06 10:35:38.329: E/AndroidRuntime(351):  at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
07-06 10:35:38.329: E/AndroidRuntime(351):  at android.view.View.draw(View.java:6883)
07-06 10:35:38.329: E/AndroidRuntime(351):  at android.view.ViewGroup.drawChild(ViewGroup.java:1646)
07-06 10:35:38.329: E/AndroidRuntime(351):  at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
07-06 10:35:38.329: E/AndroidRuntime(351):  at android.view.ViewGroup.drawChild(ViewGroup.java:1644)
07-06 10:35:38.329: E/AndroidRuntime(351):  at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
07-06 10:35:38.329: E/AndroidRuntime(351):  at android.view.View.draw(View.java:6883)
07-06 10:35:38.329: E/AndroidRuntime(351):  at android.widget.FrameLayout.draw(FrameLayout.java:357)
07-06 10:35:38.329: E/AndroidRuntime(351):  at android.view.ViewGroup.drawChild(ViewGroup.java:1646)
07-06 10:35:38.329: E/AndroidRuntime(351):  at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
07-06 10:35:38.329: E/AndroidRuntime(351):  at android.view.View.draw(View.java:6883)
07-06 10:35:38.329: E/AndroidRuntime(351):  at android.widget.FrameLayout.draw(FrameLayout.java:357)
07-06 10:35:38.329: E/AndroidRuntime(351):  at com.android.internal.policy.impl.PhoneWindow$DecorView.draw(PhoneWindow.java:1862)
07-06 10:35:38.329: E/AndroidRuntime(351):  at android.view.ViewRoot.draw(ViewRoot.java:1522)
07-06 10:35:38.329: E/AndroidRuntime(351):  at android.view.ViewRoot.performTraversals(ViewRoot.java:1258)
07-06 10:35:38.329: E/AndroidRuntime(351):  at android.view.ViewRoot.handleMessage(ViewRoot.java:1859)
07-06 10:35:38.329: E/AndroidRuntime(351):  at android.os.Handler.dispatchMessage(Handler.java:99)
07-06 10:35:38.329: E/AndroidRuntime(351):  at android.os.Looper.loop(Looper.java:123)
07-06 10:35:38.329: E/AndroidRuntime(351):  at android.app.ActivityThread.main(ActivityThread.java:3683)
07-06 10:35:38.329: E/AndroidRuntime(351):  at java.lang.reflect.Method.invokeNative(Native Method)
07-06 10:35:38.329: E/AndroidRuntime(351):  at java.lang.reflect.Method.invoke(Method.java:507)
07-06 10:35:38.329: E/AndroidRuntime(351):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
07-06 10:35:38.329: E/AndroidRuntime(351):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
07-06 10:35:38.329: E/AndroidRuntime(351):  at dalvik.system.NativeStart.main(Native Method)
07-06 10:35:40.789: I/Process(351): Sending signal. PID: 351 SIG: 9 
```

谁能告诉我原因？请告诉我如何重复使用回收的位图。我不想降低位图的质量。

我通过的选项有

```
inPurgeable=true
inInputShareable=true 
```

注意：如果我不使用位图的东西并直接写`dress.setImageResource(dressarray[indexdress]);`

该应用程序像 2.2 中的冠军一样工作，但在第一次单击 2.3.3 时以超出预算关闭，dressarray[indexdress] 是包含 R.drawble.imgid 的图像数组，并且都是 PNG 图像

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T08:20:22.110

我当时通过使用降级图像解决了这个问题。

您可以通过在选项中使用`inSampleSize`&来避免此错误。`inPurgeable`并**重复使用**相同的`Bitmap`变量并`null`在每次使用后制作它。

`System.gc()`尽可能打电话。它不调用 gc，但可以启动它。

`inPurgeable`将使您的位图对象在执行时可清理`gc()`。

`inSampleSize`将降级位图，因此请使用适当的值。

您也可以在创建时**调整位图的大小，以减小其大小。**采用`createScaledBitmap()`

希望对其他人有所帮助。

# python - 退出时如何使 Python 脚本从 shell 中注销？

> ID：11356681
> 
> 赞同：2
> 
> 时间：2012-07-06T06:04:30.100
> 
> 标签：python, bash, shell

我正在用 Python 为 bash 编写一个 shell 脚本。该脚本在用户登录帐户时自动运行，我希望它在退出时将用户注销。我尝试使用 os.system('exit')，但它不起作用。我将如何实现这一目标？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-06T06:11:09.307

将您的 python 脚本设置为用户的登录 shell（在 /etc/passwd/ 中）。这样她会在脚本退出后自动注销。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-06T06:09:33.683

你可以做一些讨厌的事情，比如杀死父母：

```
os.kill(os.getppid(), 9) 
```

这可以称为[atexit](http://docs.python.org/library/atexit.html)，但它是不干净的，因为这也会导致您的进程死亡。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-06T08:07:21.147

*当用户登录帐户时，脚本会自动运行*- 如何？您的问题的含义是它是从 bash 运行的。虽然我订阅了@Fredrick Roth 的建议，但另一种方法是使用以下命令从 shell 运行 Python 脚本：

```
exec script-name.py 
```

该`exec`命令替换当前*程序*，因此`bash`将替换为`python`. 当 Python 脚本结束时，将不会返回任何 shell。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-03T23:48:42.860

你可能会杀死你登录的 tty

或者

这可能会奏效

[https://github.com/tuwid/kickout](https://github.com/tuwid/kickout)

它是一个在 tty 中注销特定用户的脚本

# objective-c - 从 -(int) 方法 [cocos2d] 访问整数值

> ID：11356684
> 
> 赞同：-1
> 
> 时间：2012-07-06T06:05:00.617
> 
> 标签：objective-c, cocos2d-iphone

当鸟被触摸时，我正在调用 [self birdtouched:2]，它返回 2。

```
-(int) birdTouched: (int) number {

if (number == 1){return 1;}
if (number ==2){return 2;}
if (number ==3){return 3;}

else return 0;} 
```

我想用另一种方法创建一个 if 语句，例如；

```
if ("value of birdTouched == 2) { YADA YADA;} 
```

我是一名新开发人员，所以像这样简单的概念对我来说很难掌握。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T06:06:44.280

```
if ([self birdTouched:birdNumber] == 2) { /* YADA YADA */ } 
```

# java - 使用 C 进行性能密集型操作 (android)

> ID：11356688
> 
> 赞同：0
> 
> 时间：2012-07-06T06:05:08.960
> 
> 标签：java, android, c, sdk

我想制作一个 Android 应用程序，我想在其中使用普通的 java sdk 进行主要的 ui 操作。

该应用程序将进行一些图片分析，这将是性能密集型的，所以我想用纯 C 语言制作这部分。

我必须为此制作2个项目吗？（一个带有java sdk，一个带有ndk）或者是否可以将它们混合在一个项目中？

我应该如何构建一个项目，我想在哪里撤出性能密集型代码部分？！我听说过为此使用 jni？！

谢谢！

马蒂亚斯

# android - 如何使用 ProGuard 保护 apk 不被反编译？

> ID：11356689
> 
> 赞同：1
> 
> 时间：2012-07-06T06:05:09.587
> 
> 标签：android, proguard

如何使用[proguard](http://developer.android.com/tools/help/proguard.html)保护我的应用程序的 APK 不被反编译？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-06T06:09:52.450

如果您使用 Eclipse 和最新的 SDK 版本，只需打开`project.properties`项目目录中的文件，阅读说明，然后取消注释相应的行。ProGuard 将在您导出已签名的应用程序时运行。（它不会在调试版本中运行，因此您可以轻松调试并读取堆栈跟踪。）

阅读[Android 中 ProGuard 的开发者文档以](http://developer.android.com/tools/help/proguard.html)获取更多信息。

# iphone - 如果标签名称未知，如何在 iphone 中将 xml 文件转换为 nsdictionary 格式

> ID：11356690
> 
> 赞同：1
> 
> 时间：2012-07-06T06:05:11.947
> 
> 标签：iphone, ios, xml

如果标签名称未知，如何在 iphone 中将 xml 文件转换为 nsdictionary 格式，这样我就可以一直重复使用此文件，只要我想将 xml 转换为 nsdictionary 格式...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T06:16:14.447

我用[这个，效果很好](http://troybrant.net/blog/2010/09/simple-xml-to-nsdictionary-converter/)。只有一个标签时会出现问题，但我想你会找到解决方案的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T06:09:25.483

您需要为它制作一个通用 XML 解析器。为您的 xml 文件制作通用 XML 解析器

# database - ORACLE 11g 中的闪回功能

> ID：11356694
> 
> 赞同：-1
> 
> 时间：2012-07-06T06:05:21.523
> 
> 标签：database, oracle, oracle10g, oracle11g

我正在使用 oracle 11g r1。作为项目的一部分，我必须通过禁用一些约束（触发器和检查约束）来执行多个更新语句。这将导致数据库损坏。

当数据库损坏时，我必须重新导入整个数据库。这将是一项耗时的额外任务。

我对 oracle 闪回功能知之甚少。Is Flashback 将帮助我避免这些不必要的导入。这样我就可以设置一些稳定点并在出现任何问题时切换回那里。

如果它符合我的要求，我会努力学习。请帮我。

请给我这个功能的简要概述？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T06:27:54.797

听起来您希望[创建一个还原点](http://docs.oracle.com/cd/B19306_01/backup.102/b14192/rpfbdb002.htm)，很可能是一个保证还原点，实施您想要测试的任何更改，然后[闪回到该还原点](http://docs.oracle.com/cd/E11882_01/backup.112/e10642/flashdb.htm#CFHCEIHB)。

就像是

```
CREATE RESTORE POINT some_name GUARANTEE FLASHBACK DATABASE; 
```

然后进行任何您想要的更改。如果您想恢复到创建还原点时的数据库状态

```
FLASHBACK DATABASE TO RESTORE POINT 'some_name' 
```

当您完成还原点并且不再希望能够闪回到它时

```
DROP RESTORE POINT some_name 
```

但是，实际上并不清楚这是否真的是您想要的。如果您的问题仅仅是在您进行大量更改后您的约束无法验证，那么将约束创建为可延迟的，在进行更改之前延迟约束，将您的更改作为单个的一部分进行更改会更有意义事务，并在约束验证失败时回滚更改（可能除了记录验证失败的行，以便您可以更有效地调试脚本）。

# javascript - 流星事件地图？

> ID：11356698
> 
> 赞同：1
> 
> 时间：2012-07-06T06:05:47.463
> 
> 标签：javascript, jquery, meteor

我喜欢 Meteor 的“事件映射”方法 ( [http://docs.meteor.com/#eventmaps](http://docs.meteor.com/#eventmaps) ) 来组织 UI 事件处理程序，并且想知道这个或类似的方法是否可以作为第三方插件在 Meteor 之外使用？

例子：

```
Template.login.events = {
  // Fires when any element is clicked
  'click': function (event) { ... },

  // Fires when any element with the 'accept' class is clicked
  'click .accept': function (event) { ... },

  // Fires when 'accept' is clicked, or a key is pressed
  'keydown, click .accept': function (event) { ... }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T05:57:57.017

看起来 jQuery 支持非常相似的语法：

[http://api.jquery.com/on/](http://api.jquery.com/on/)

```
$('.link').on({
  click: function() {
    t.find('div').show();
  },
  mouseout: function() {
    t.find('div').hide();
  }
}); 
```

似乎足够好:-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T09:21:36.090

看看我对这个问题的回答： [将命名函数传递给事件映射](https://stackoverflow.com/questions/11198734/pass-named-function-to-an-events-map/11206039#11206039)

这正是你所问的。

# cocos2d-iphone - 在 cocos2d 中检测精灵的触摸

> ID：11356699
> 
> 赞同：0
> 
> 时间：2012-07-06T06:05:50.043
> 
> 标签：cocos2d-iphone, touch, ccsprite

我将 CCSprite 子类化以检测对自身的触摸。

touchBegan 在触摸时触发，但日志显示相同的精灵一直在处理触摸，即使我每次都在触摸不同的精灵。
（所有触摸的指针地址都是相同的。）

进一步的日志显示它是我添加到世界层的最后一个精灵。

为什么我添加的最后一个精灵会自行对触摸事件做出反应？

我使用了CCSpriteBatchNode，这会与问题有关吗？

或者是因为 cocos2d 只是没有执行命中测试来找到正确的对象来传递触摸事件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T14:46:28.260

您需要检查触摸的位置是否在精灵的边界内。

一些奇怪的伪代码

```
function touchBegan(UITouch touch, etc)
    CGPoint pos = get location of touch;
    if (CGRectContainsPoint(sprite.boundingBox, pos)) //I think that is the method you need. It's something like that.
        NSLog(@"Sprite was touched!");
        return YES; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T07:47:23.747

我查看了 cocos2d-x 源代码。

在将触摸事件发送给触摸委托之前，它不会进行命中测试。
因此，您必须自己在 touchBegan 中执行命中测试。（至少对于 targetDelegate 类型）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-25T10:35:40.917

覆盖触摸委托：

```
- (BOOL)ccTouchBegan:(UITouch *)touch withEvent:(UIEvent *)event
{
    BOOL shouldClaimTouch = NO;

    CGRect myRect = CGRectMake(0, 0, self.contentSize.width, self.contentSize.height);

    CGPoint touchLocation = [self convertTouchToNodeSpace:touch];
    CGPoint absoluteTouch = CGPointMake(fabsf(touchLocation.x), fabsf(touchLocation.y));

    BOOL layerContainsPoint = CGRectContainsPoint(myRect, absoluteTouch);
    if( layerContainsPoint )
    {
        shouldClaimTouch = YES;
        NSLog(@"Sprite was touched!");
        [self fireEvent];
    }

    return shouldClaimTouch;
} 
```

# android - 单击listView时出现动态textView错误

> ID：11356704
> 
> 赞同：0
> 
> 时间：2012-07-06T06:06:12.830
> 
> 标签：android, listview, layout-inflater

我正在尝试基于 xml 文件的动态文本视图.....请帮助我的代码

**代码**

MessageViewPage.java

```
package com.dpn.pack;

public class MessageViewPage extends Activity {

TextView tv1=new TextView(this);
ScrollView sv;
String nickname,body;

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.message_view_page);

    Bundle b = getIntent().getExtras();

    nickname= b.getString("nick");
    body=b.getString("body");

    LayoutInflater vi = (LayoutInflater) getApplicationContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    View v = vi.inflate(R.layout.message_view_page, null);

    // fill in any details dynamically here
    TextView textView = (TextView) v.findViewById(R.id.textViewSender);
    textView.setText("Sender : "+nickname);

    // insert into main view
    View insertPoint = findViewById(R.id.textViewSender);
    insertPoint.addView(v, 0, new ViewGroup.LayoutParams(ViewGroup.LayoutParams.FILL_PARENT, ViewGroup.LayoutParams.FILL_PARENT));

}

} 
```

我的**XML**文件如下

message_view_page.xml

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical"
android:padding="5dp" 
android:background="@drawable/view">

<TextView
    android:id="@+id/textViewSender"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    android:layout_marginLeft="18dp"
    android:layout_marginTop="35dp"
    android:textColor="#FFFFFF"
    android:textSize="20dp" />

<TextView
    android:id="@+id/textViewBody"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignLeft="@+id/textViewSender"
    android:layout_below="@+id/textViewSender"
    android:layout_marginLeft="20dp"
    android:layout_marginTop="40dp"
    android:textSize="15dp"
    android:textColor="#F69DD1" />

<Button
    android:id="@+id/buttonReply"
    android:layout_width="100dp"
    android:layout_height="50dp"
    android:layout_alignParentBottom="true"
    android:layout_alignParentLeft="true"
    android:layout_marginLeft="45dp"
    android:layout_marginBottom="50dp"
    android:text="Reply" />

<Button
    android:id="@+id/buttonListen"
    android:layout_width="100dp"
    android:layout_height="50dp"
    android:layout_alignParentBottom="true"
    android:layout_alignParentRight="true"
    android:layout_marginRight="45dp"
    android:layout_marginBottom="50dp"
    android:text="LIsten" />

</RelativeLayout> 
```

我在这段代码中有一个错误

```
insertPoint.addView(v, 0, new ViewGroup.LayoutParams(ViewGroup.LayoutParams.FILL_PARENT, ViewGroup.LayoutParams.FILL_PARENT)); 
```

喜欢

![在此处输入图像描述](../Images/e1522028c53901f68491aef9b26f0b8f.png) 请任何人告诉我解决我的问题的方法。

我的目标输出演示像

![在此处输入图像描述](../Images/8267188c55d73306c629dba0c22f75dd.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T06:13:00.280

该类`View`没有`addView`方法，您不能将 a 添加`View`到 another `View`。该`addView`方法属于`ViewGroup`该类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T06:15:40.080

View 类没有 addView 方法。将动态 TextView 添加为：

首先在xml中给出布局ID：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
 android:id="@+id/layout"
android:orientation="vertical"
android:padding="5dp" 
android:background="@drawable/view"> 
```

在代码中：

```
final TextView tv1 = new TextView(this);
 LinearLayout.LayoutParams p = new LinearLayout.LayoutParams(
 LinearLayout.LayoutParams.FILL_PARENT,
  LinearLayout.LayoutParams.WRAP_CONTENT
   );
   tv1.setText("TextView");
 RelativeLayout layout = (RelativeLayout ) findViewById(R.id.layout);
 layout.addView(tv1, p); 
```

# php - PHP - Google 图表 API - QR 码边距不起作用（错误或功能？）

> ID：11356713
> 
> 赞同：5
> 
> 时间：2012-07-06T06:06:48.630
> 
> 标签：php, google-visualization, qr-code

我有一个非常简单的函数可以从谷歌图表 API 生成二维码。

```
 function o99_qr_code($size,$type,$url ) {

        $qr = '';
        $dsize = $size .'x'.$size; // doubleSize

         $qr = '<img src="http://chart.apis.google.com/chart?cht=qr&chs=' . $dsize . '&chld=L|0&chl=' . $url . '" width="' .$size .'" height="'.$size .'" alt="QR code" title="QR Code for your mobile device"/>';

         switch ($type){
         case 'echo' :
         echo $qr;
         case 'return' :
         return $qr;
         }
    } 
```

现在，这工作得很好，除了边距。

（为未链接实时 URL 道歉 - 我的 DEV 在本地机器上）

无论我尝试什么，我都无法让边距变为 0。首先我认为由于某种原因，可能校正级别 L 不接受 0 边距 - 我厌倦了`&chld=M|1`and `&chld=L|0`，`&chld=M|3`甚至尝试更改参数的顺序和放在`&chld=L|0`字符串的末尾或完全省略。

但由于某种原因，我总是得到默认边距 4。

难道我做错了什么 ？？

**编辑我** - 在请求 URL 之后：生成的 URL 是：

```
<img src="http://chart.apis.google.com/chart?cht=qr&chs=50x50&chld=L|0&chl=http://localhost/wp-sandbox/?p=6164" width="50" height="50" alt="QR code" title="QR code for your phone"/> 
```

**编辑二**

看看这个小提琴[http://jsfiddle.net/obmerk99/rsjcM/](http://jsfiddle.net/obmerk99/rsjcM/)

它证明了问题。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-06T10:21:57.163

谷歌图表有一个奇怪的特性，它会增加图像的大小，但**不会**增加代码的大小。

这将取决于代码中数据的大小。

看看这三个例子

150 - 无边距[http://chart.apis.google.com/chart?cht=qr&chs=150x150&chld=L|0&chl=http://localhost/wp-sandbox/?p=6164](http://chart.apis.google.com/chart?cht=qr&chs=150x150&chld=L|0&chl=http://localhost/wp-sandbox/?p=6164)

165 - 保证金[http://chart.apis.google.com/chart?cht=qr&chs=165x165&chld=L|0&chl=http://localhost/wp-sandbox/?p=6164](http://chart.apis.google.com/chart?cht=qr&chs=165x165&chld=L|0&chl=http://localhost/wp-sandbox/?p=6164)

180 - 无边距[http://chart.apis.google.com/chart?cht=qr&chs=180x180&chld=L|0&chl=http://localhost/wp-sandbox/?p=6164](http://chart.apis.google.com/chart?cht=qr&chs=180x180&chld=L|0&chl=http://localhost/wp-sandbox/?p=6164)

请记住 - 您的代码*需要*一个边距才能让大多数设备正确扫描它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-26T10:30:03.050

Google API 也存在同样的问题。所以我最终使用了这个替代服务：[http ://api.qrserver.com/v1/create-qr-code/?data=http://www.google.com&size=104x104](http://api.qrserver.com/v1/create-qr-code/?data=http://www.google.com&size=104x104)

API ( [http://qrserver.com/api/documentation/create-qr-code/](http://qrserver.com/api/documentation/create-qr-code/) ) 可以更好地控制所需的二维码图像输出。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-23T11:43:06.013

在生成大量具有各种编码数据大小的二维码时，我遇到了同样的问题。

到目前为止，我发现生成代码可能会**为每个条码像素强加相同数量的屏幕像素大小**。

所以，假设：

*   `sw`您要求的二维码高度/宽度，以屏幕像素为单位，比如说 150x150 像素
*   `bw`编码数据的条形码像素数，比如 20x20 像素
*   `cw`每个条形码像素的屏幕像素数：`cw = ceil(sw /bw)`，所以这里 150/20 = 7,5 => cw=7
*   `sw2`以像素为单位的条码实际宽度：`sw2 = cw * bw`，所以这里 sw2=7*20=140 像素
*   `mw`以像素为单位的边距宽度：`mw = (sw - sw2) / 2`，所以这里的边距为 5 像素...

同样的例子，如果你要求一个 160x160 尺寸的二维码，你可能没有边距：160/20=8。

回到您最初的问题，减少边距大小的可变性意味着减少条形码像素的数量（但您无法控制它，因为它取决于 QR 码质量和编码数据的大小），或者增加生成的屏幕像素方面。

如果您要求无限维度，则边距没有更多变化，但我想知道 Google 是否会对此感到满意 :)

# gwt - SuperDevMode 入门

> ID：11356714
> 
> 赞同：27
> 
> 时间：2012-07-06T06:06:51.250
> 
> 标签：gwt

我只想使用 superDevMode 运行一个简单的应用程序来了解它的好处。CodeServer 已成功启动，但它抱怨在 UI 中没有要编译的 gwt 模块。我按照以下步骤操作。

1.  我从创建新项目时生成的 GWT 默认代码开始。然后我将其转换为 Maven 项目。
2.  然后我修改了我的 gwt.xml 文件以添加链接器。这是我的 gwt.xml 的副本

    ```
    <module rename-to='superdevmode'>
    <inherits name='com.google.gwt.user.User' />
    <inherits name='com.google.gwt.user.theme.clean.Clean' />
    <entry-point class='superDevMode.client.SuperDevMode' />
    <add-linker name="xsiframe" />
    <set-configuration-property name="devModeRedirectEnabled"
    value="true" />
    </module> 
    ```

3.  我添加了 codeserver jar 并设置了正确的类路径。

Codeserver 正在成功启动。

```
 The code server is ready.
   Next, visit: http://localhost:9876/ 
```

当我启动 UI 时，得到以下信息 ![在此处输入图像描述](../Images/edcff83b9e9bb66328b9eae5e9fb69ec.png)

但是当我点击 Dev Mode On 时，我得到以下信息

![在此处输入图像描述](../Images/13779be389d1af8dc591cc2d8dbb91c2.png)

我不知道我做错了什么。我的 POM 条目如下所示。

```
 <project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
<modelVersion>4.0.0</modelVersion>
<groupId>superDevMode</groupId>
<artifactId>superDevMode</artifactId>
<version>0.0.1-SNAPSHOT</version>
             </project> 
```

如果我错了，请纠正我。

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2012-11-07T20:52:12.950

**更新**：v2.6 看起来它将有一个更好的 superdevmode 示例启动器（请参阅[http://www.gwtproject.org/release-notes.html#Release_Notes_2_6_0_RC1](http://www.gwtproject.org/release-notes.html#Release_Notes_2_6_0_RC1)的 superdevmode 下）2.6 将在任何一天发布。我正在使用 RC3，它似乎很好。更多在这里：

* * *

虽然我很欣赏Thomas 的文章中*关于*SuperDevMode 工作原理的详细信息，但真正需要的是包含一些故障排除的分步指南。

这是一步一步的。出错的地方太多了，[SuperDev模式页面](https://developers.google.com/web-toolkit/articles/superdevmode)也不是很具体。希望这可以清楚地说明：

1.  使用附加行配置您的模块 .gwt.xml 文件（您应该将其放在模块定义的底部，即在之前`</module>`）：

```
<add-linker name="xsiframe"/>
<set-configuration-property name="devModeRedirectEnabled" value="true"/>
<!-- enable source maps -->
<set-property name="compiler.useSourceMaps" value="true" /> 
```

2.  运行标准的 GWT 编译过程——在 Eclipse 中，这是“GWT Compile Project...”——这是您在部署 GWT 代码时通常会做的事情。毫无疑问，您也有执行此操作的 maven 或 ant 命令。

3.  启动您在开发 GWT 代码时通常使用的常规网络服务器。例如，您使用普通 DevMode 的那个。我将其称为 localhost:8888 - 我假设您通常启动的页面是 index.html，因此`http://localhost:8888/index.html`显示您的 GWT 应用程序。（您可能`?gwt.codesvr=127.0.0.1:9997`通常在该 URL 中）

4.  启动 SuperDevMode 服务器（有关两种方法，请参阅此答案的底部）。您现在有两个网络服务器正在运行 - 在不同的端口上。所以，假设 SuperDevMode 正在运行`localhost:1234`。在这个答案的底部，我发布了一些启动 SuperDevMode 的方法。

5.  将您的浏览器指向 SuperDevMode 服务器，因此`http://localhost:1234`. 按照说明将两个快捷方式复制到地址栏

6.  现在，将您的浏览器指向常规网络服务器，`http://localhost:8888/index.html`-**不要**添加`?gwt.codesvr=127.0.0.1:9997`到 URL - 这仅适用于 NotSuper DevMode。（即常规 DevMode）

7.  单击您在第 5 步中复制的快捷方式链接“DevMode On”。它应该要求您选择要编译的模块，单击“编译”按钮。

8.  如果你想要 sourcemaps（在 Chrome 脚本浏览器中查看你的 java 源代码），你必须在 Chrome 中打开它。在我的 Chrome 版本（Ubuntu）中，Chrome 控制台的右下角有一个小齿轮（检查元素，然后查看浏览器窗口的右下角）。单击它并找到“启用源映射”。重新加载页面，它现在应该向您显示源代码。

* * *

启动超级开发模式的两种方法：

## 从命令行

```
java -classpath $GWT_HOME/gwt-codeserver.jar:$GWT_HOME/gwt-dev.jar:$GWT_HOME/gwt-user.jar:app:./lib/*  com.google.gwt.dev.codeserver.CodeServer \
  -bindAddress 0.0.0.0 -port 1234 -src src -workDir work com.foo.MyModule 
```

## 来自 Eclipse Laucher

在 Eclipse 中，使用以下配置创建一个新的*Java 应用程序*启动器（**不是**Web 应用程序启动器！）：

**主类：**

```
com.google.gwt.dev.codeserver.CodeServer 
```

**程序参数：**

```
-src src -workDir ${workspace_loc:MyProject}/codeserver -port 1234 com.foo.MyModule 
```

`-workDir`是可选的

**VM 参数**（根据项目的大小可能需要这些参数。如果超级开发模式的“编译”按钮（在浏览器中）在您单击后立即消失并且似乎没有任何反应，则可能是由于内存不足而崩溃）

```
-Xmx1024m -Xms512m 
```

**类路径：**将 gwt-codeserver.jar、gwt-dev.jar 和 gwt-user.jar 添加到启动类路径（这些 jars 可以在 GWT SDK 安装目录中找到）。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-31T14:59:44.847

我采取了稍微不同的方法。我从现有的[Hello 项目](https://code.google.com/p/google-web-toolkit/source/browse/#svn/trunk/samples/hello)开始，然后将其配置为在超级开发模式下工作。

**A.**为 hello 项目构建和部署 war 到 tomcat 中。

**B.**在 Hello 项目的 build.xml 中添加目标。

```
<target name="codeserver" depends="javac" description="Run Code Server mode">
    <java failonerror="true" fork="true" classname="com.google.gwt.dev.codeserver.CodeServer">
        <classpath>
            <pathelement location="src"/>
            <path refid="project.class.path"/>
            <pathelement location="../../gwt-codeserver.jar" />
            <pathelement location="../../validation-api-1.0.0.GA.jar" />
            <pathelement location="../../validation-api-1.0.0.GA-sources.jar" />
        </classpath>
        <jvmarg value="-Xmx1024M"/>
        <arg value="-bindAddress"/>
        <arg value="0.0.0.0"/>
        <arg line="-port"/>
        <arg value="9876"/>
        <arg value="-workDir"/>
        <arg value="workDir"/>
        <arg line="-src"/>
        <arg value="src"/>
        <arg value="com.google.gwt.sample.hello.Hello"/>
    </java>
</target> 
```

**C.**`ant codeserver`使用命令提示符 运行代码服务器。

**D.**启动浏览器并导航以`http://localhost:9876/` 创建书签

**E.**启动 Chrome 开发工具 (F12) 并启用 SourceMaps。

**F.**启动浏览器并导航到`http://localhost:8080/Hello`

**G.**在页面中点击“Dev Mode ON”书签`http://localhost:8080/Hello`

**H.**点击“编译”按钮，指示代码服务器将 gwt 源代码作为源映射加载到浏览器中。

**I.**万岁 java 文件被提取，可以在Chrome 开发控制台的**源选项卡中看到。**

**J.**找到 Hello.java 。点击行号设置调试点@ `Window.alert("Hello, AJAX");`。

**K.**点击 Hello World 中的“Click Me”。代码在 Chrome 中的 java 文件中的 Debug 点停止！！！！！！！！！欢呼。

截图参考 - [http://geekbybit.blogspot.in/2013/03/diy-working-with-gwt-codeserver-tomcat.html](http://geekbybit.blogspot.in/2013/03/diy-working-with-gwt-codeserver-tomcat.html)

![在此处输入图像描述](../Images/c04a73476e8c57797540d2d476ca5d00.png)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-06T11:25:30.010

这里有一个很好的解释：http: [//blog.ltgt.net/how-does-gwts-super-dev-mode-work/](http://blog.ltgt.net/how-does-gwts-super-dev-mode-work/)

您需要将小册子拖到浏览器中。然后像往常一样启动您的应用程序。在没有“?gwt.codesvr=127.0.0.1:9997”部分的浏览器中打开您的应用程序。现在您可以使用小册子启动 SuperDevMode。

希望这可以帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-10-28T13:35:14.707

使用多模块 maven gwt 项目，您需要在运行配置中添加源位置（基础项目和模块）：

```
-src src/main/java/ -src ${workspace_loc:MyNewModule}/src/main/java/ com.foo.MyModule 
```

# asp.net-mvc - ASP.NET MVC关系codefirst和现有数据库表？

> ID：11356715
> 
> 赞同：1
> 
> 时间：2012-07-06T06:06:56.340
> 
> 标签：asp.net-mvc, ef-code-first, entity-relationship

我对这个主题很陌生（代码优先开发）。我想在 asp.net 默认用户表和我的班级之间建立关系（一对一）。

1.  这可能吗。
2.  如果这是可能的。我该怎么做。我也应该写用户类吗？或任何方式。

你能给我一个起点吗？我的课如下。

```
public class Customer
{
    [Key]
    public int customer_id { get; set; }
    public string customer_name{ get; set; }
    public string user_id

    public virtual User User{ get; set; }
} 
```

我希望，我已经解释了:)

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T06:11:29.750

如果我理解正确 - 是的，你应该在你的代码中编写你想要使用的所有类，即使它们存在于数据库中。这里有一些教程，也许它可以帮助你[http://codefirst.codeplex.com/](http://codefirst.codeplex.com/)

# android - 壁纸表面中的相机内容

> ID：11356717
> 
> 赞同：1
> 
> 时间：2012-07-06T06:07:00.973
> 
> 标签：android, service, camera, android-camera, live-wallpaper

我正在 ANDROID 中开发一个应用程序，我需要在其中创建一个服务（墙纸服务），该服务在后台执行并在墙纸表面上显示相机的实时内容。

我已经尝试了很多，但不幸的是无法达到目标。而且每次尝试，我得出的结论是墙纸表面可能不支持相机视图。但是后来市场上的应用程序之一如何使用相同的概念。

任何人都可以帮助我。我们可以说我需要类似“**通过墙纸拍照**”的应用程序，该应用程序已经在市场上销售。

谢谢你

# c++ - 目标平台无法创建共享库

> ID：11356718
> 
> 赞同：0
> 
> 时间：2012-07-06T06:07:05.203
> 
> 标签：c++, gcc, compilation, cmake

我正在使用 cmake 编译代码。在中，我使用 SHARED 选项来创建共享库。但是，在使用 cmake 编译时出现错误：

```
 ADD_LIBRARY for library GenericUSMModules is used with the SHARED option, but the target platform supports only STATIC libraries. Building
 it STATIC instead. This may lead to problems.

 ADD_LIBRARY for library XXXaUSMModules is used with the SHARED option, but the target platform supports only STATIC libraries. Building
 it STATIC instead. This may lead to problems. 
```

它正在创建 libGenericUSMModules.a（静态库）和 libXXXUSMModules.a 而不是 so 文件。我想知道是否可以为每个存档文件（如 libGenericUSMModules.so 和 libXXXUSMModules.a ）创建共享库，同时将其与位于同一位置的静态库 libGCVCore.a 链接。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T05:04:30.433

问题是我使用的cmake。它是一个旧版本。我安装了最新版本的Cmake，编译的代码没有任何问题。

# linux - Linux 静态驱动程序加载问题

> ID：11356724
> 
> 赞同：1
> 
> 时间：2012-07-06T06:07:55.637
> 
> 标签：linux

驱动程序的静态加载存在一些问题，导致混乱。为了静态加载驱动程序，我遵循了两种方法 Process 1) 和 Process 2)。早些时候我遵循：

流程一：步骤如下：

1.  我构建了名为 demochardrv.ko 的 char 驱动程序。
2.  我将驱动程序复制到 /lib/modules/2.6.34.12/kernel/drivers/char/ 中。
3.  我在 /etc/modules 中输入了它。
4.  重启。

但是这 4 个步骤之前没有工作，我没有在 lsmod 中看到我的驱动程序。

因此，除了上述步骤之外，我还采用了另一种方式： 过程 2：步骤如下：

1.  我在文件“/lib/modules/2.6.34.12/build/drivers/char/Kconfig”中添加了驱动程序详细信息： config DEMOCHARDRV tristate“TEST DEMO DRIVER' default n help TEST STATIC INSTALL DRIVER

2.  我在“/lib/modules/2.6.34.12/build/drivers/char/Makefile”中添加了驱动程序详细信息：obj-$(CONFIG_DEMOCHARDRV) += demochardrv.o

3.  复制 /lib/modules/2.6.34.12/build/drivers/char/ 中的驱动程序文件。

4.  编辑 .config 文件并添加 CONFIG_DEMOCHARDRV=y。
5.  触发 make menuconfig 并选择（使用 * / M）我的驱动程序。
6.  制作、制作模块、制作 modules_install 和制作安装。
7.  重启

现在，即使我没有在 menuconfig 中选择它，驱动程序也会在启动时加载。

为了解决流程 2 中的问题，我删除了 /etc/modules 中的条目。但是现在驱动程序根本没有加载。因此，我删除了 Process 2 步骤并再次遵循 Process 1 步骤，驱动程序现在正在启动时加载。现在流程 1 正在工作。但是流程 2 并不是单独工作的，它需要流程 1 的额外步骤。

所以我很困惑哪个过程是正确的。任何人都可以提供一些输入吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T08:03:18.957

当您“静态”加载 Linux 驱动程序时，您无法编译模块，您必须将其直接构建到内核二进制文件中。因此，您根本不应该将其视为模块，并将其配置为“*”（内置），或者根本不包含它。

根据[内核 makefile doc](http://www.ravnborg.org/kbuild/makefiles.html)，第二个过程应该是要走的路。但是，您应该放弃制作模块的想法，因为模块总是动态加载的。

# android - 安卓蓝牙通知代码

> ID：11356726
> 
> 赞同：1
> 
> 时间：2012-07-06T06:08:01.067
> 
> 标签：android, bluetooth

我正在为我的拼贴画做我的最后一个项目，我一直在寻找 android 的蓝牙通知代码。我需要代码来在我的蓝牙打开或关闭时通知我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T07:01:29.770

```
OK then do it like that when you bluetooth is on or off

private final BroadcastReceiver mReceiver = new BroadcastReceiver() {
@Override
public void onReceive(Context context, Intent intent) {
    String action = intent.getAction();
    BluetoothDevice device = intent.getParcelableExtra(BluetoothDevice.EXTRA_DEVICE);

    if (BluetoothDevice.ACTION_FOUND.equals(action)) {

int icon = R.drawable.nishansahib1;        // icon from resources
            CharSequence tickerText = "SatShreeAkal";              // ticker-text
            long when = System.currentTimeMillis();         // notification time
            //Context context = getApplicationContext();      // application Context
            CharSequence contentTitle = "";  // message title
//          

            CharSequence contentText= "YPUR BLUETOOTH IS ON OR OFF";      // message text
            final int NOTIF_ID = 1234;
            Intent notificationIntent = new Intent(context, your classname);//if u want to call a class

            notificationIntent.putExtra("DISPLAY",contentText);//if u want to pass intent
            PendingIntent contentIntent = PendingIntent.getActivity(context, 0, notificationIntent, 0);
            NotificationManager notofManager = (NotificationManager)context. getSystemService(Context.NOTIFICATION_SERVICE);
            // the next two lines initialize the Notification, using the configurations above
            Notification notification = new Notification(icon, tickerText, when);
            notification.setLatestEventInfo(context, contentTitle, contentText, contentIntent);

        notification.defaults = Notification.DEFAULT_SOUND;
        notofManager.notify(NOTIF_ID,notification);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T06:23:53.783

您需要在代码中添加广播接收器，以便在您的活动类中打开或关闭蓝牙后接收。供你参考 ：

```
 public void onCreate() {
...
    IntentFilter filter1 = new IntentFilter(BluetoothDevice.ACTION_ACL_CONNECTED);
    IntentFilter filter2 = new  IntentFilter(BluetoothDevice.ACTION_ACL_DISCONNECT_REQUESTED);
    IntentFilter filter3 = new IntentFilter(BluetoothDevice.ACTION_ACL_DISCONNECTED);
    this.registerReceiver(mReceiver, filter1);
    this.registerReceiver(mReceiver, filter2);
    this.registerReceiver(mReceiver, filter3);
 }

//The BroadcastReceiver that listens for bluetooth broadcasts

private final BroadcastReceiver mReceiver = new BroadcastReceiver() {
@Override
public void onReceive(Context context, Intent intent) {
    String action = intent.getAction();
    BluetoothDevice device = intent.getParcelableExtra(BluetoothDevice.EXTRA_DEVICE);

    if (BluetoothDevice.ACTION_FOUND.equals(action)) {
       ... //Device found
    }
    else if (BluetoothAdapter.ACTION_ACL_CONNECTED.equals(action)) {
       ... //Device is now connected
    }
    else if (BluetoothAdapter.ACTION_DISCOVERY_FINISHED.equals(action)) {
       ... //Done searching
    }
    else if (BluetoothAdapter.ACTION_ACL_DISCONNECT_REQUESTED.equals(action)) {
       ... //Device is about to disconnect
    }
    else if (BluetoothAdapter.ACTION_ACL_DISCONNECTED.equals(action)) {
       ... //Device has disconnected
    }           
} 
```

# php - 将 PHP 脚本上传到另一台服务器并运行它以连接到我的数据库

> ID：11356729
> 
> 赞同：0
> 
> 时间：2012-07-06T06:08:26.280
> 
> 标签：php, mysql, ftp

我创建了一个搜索引擎`zoken.co.cc`，并选择手动提交站点并下载文件 populate.php 通过在其他 ftp 中上传 populate.php 并在数据库中打开它本身的索引。

例如：一个站点`www.abc.com`想在我的搜索引擎中提交站点并选择自动提交和下载文件（`populate.php`）并在 ftp 服务器中上传。并打开页面`www.abc.com/populate.php`。然后出现一个页面并且有

```
Warning: mysql_connect() [function.mysql-connect]: Host '10.1.1.27' is not allowed to connect to this MySQL server in /home/a1091216/public_html/populate.php on line 10

ERROR: Could not connect to database 
```

我知道他和我的 FTP 服务器不同，但可以保存。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T06:27:03.863

这是因为不允许远程服务器使用该用户名连接到您的数据库服务器。您可以将数据库用户设置为允许来自 的连接`%`，这意味着“使用此用户名登录的用户可以从任何主机连接到数据库服务器”。

在别人的服务器上运行 PHP 脚本真的很重要吗？我可以看到以下问题：

*   用户不信任您的 PHP 脚本并最终不提交。

*   用户没有在服务器上安装 PHP，或者正在运行服务器来为使用 ASP 构建的站点提供服务，从而导致 PHP 脚本无用。

*   PHP 文件将包含数据库用户名和密码。谁说网站管理员不会从 PHP 文件中获取这些内容并弄乱您的数据库（即使用户帐户只允许从 1 个表中读取/写入）？

如果我是你，我会让他们下载一个带有随机字符串的文本文件。要求他们将其上传到他们提交的站点的根目录。然后每 5 分钟（直到站点被标记为已验证），让您的服务器退出并使用 CURL 从他们的站点检索文本文件。检查里面的随机字符串，然后填充您的数据库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T06:31:57.767

是的，如果请求该连接的脚本来自另一台服务器，则可以连接到放置在一台服务器上的 mysql 数据库。
第一件事是确保主机 mysql 服务器已打开网络并在防火墙上打开端口 3306（我认为这是数字）。我希望这两个默认情况下都是关闭的。
就个人而言，我会非常怀疑这样做。让 mysql 上网让我很不舒服。建议您尝试并找到更好的方法来做到这一点。

只是重新阅读并意识到我应该更清楚。在 my.cnf（mysql 配置文件，可能在 /etc 中）有一个变量，类似于networking=no 或skip-networking；我忘记了细节。无论如何，需要将其设置为启用网络，然后您需要重新启动 mysqld。

# java - 如何使用 GWT 处理 authorize.net 回调

> ID：11356731
> 
> 赞同：1
> 
> 时间：2012-07-06T06:08:32.200
> 
> 标签：java, gwt

我一直在 Google App Engine 平台上使用 Google Web Toolkit 构建一个网络应用程序。现在我的客户要求我添加付款处理。我开始实现 authorize.net，但我对使用 GWT 处理回调 url 感到头疼。

如何设置从 authorize.net 接收发布数据的重定向 url？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T15:19:00.600

AFAICT 您的回调 URL 应该与 GWT 无关。它应该映射到一个回调处理 servlet，该 servlet 应该修改发起事务的用户的会话状态。同时，您的 GWT 应用程序可能正在轮询服务器以获取用户会话状态的变化，这表明事务成功（或不成功）。

# ios - 嵌套推送动画可能导致导航栏损坏错误

> ID：11356733
> 
> 赞同：1
> 
> 时间：2012-07-06T06:08:41.657
> 
> 标签：ios, uinavigationcontroller, pushviewcontroller

据我所知，我不相信我做错了什么，但是我得到了：

```
2011-04-02 14:55:23.350 AppName[42430:207] nested push animation can result in corrupted navigation bar
2011-04-02 14:55:23.352 AppName[42430:207] nested push animation can result in corrupted navigation bar
2011-04-02 14:55:23.729 AppName[42430:207] Finishing up a navigation transition in an unexpected state. Navigation Bar subview tree might get corrupted.
2011-04-02 14:55:23.729 AppName[42430:207] Finishing up a navigation transition in an unexpected state. Navigation Bar subview tree might get corrupted. 
```

这是我的代码

```
- (IBAction) btnGetCurrentLocation{
    [SVProgressHUD showWithStatus:@"Getting current location..."];
    locationManager = [[CLLocationManager alloc] init];
    locationManager.desiredAccuracy = kCLLocationAccuracyBest;
    locationManager.delegate = self;
    [locationManager startUpdatingLocation];
    [SVProgressHUD dismiss];
}

- (void)locationManager:(CLLocationManager *)manager 
    didUpdateToLocation:(CLLocation *)newLocation 
           fromLocation:(CLLocation *)oldLocation {

    [locationManager stopUpdatingLocation];
    CLLocationCoordinate2D coordinate = newLocation.coordinate;

    LocationMapViewController *locationMapViewController = [[LocationMapViewController alloc] initWithNibName:@"LocationMapViewController_iPhone" bundle:nil];
    locationMapViewController.title=@"Your Title";
    locationMapViewController.centerOfMap = &(coordinate);
    [self.navigationController pushViewController:locationMapViewController animated:YES]; 

} 
```

我用谷歌搜索了它，但是大多数地方都在谈论放置动画：不，但是我没有在下一个屏幕上看到地图。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T06:23:16.620

每次 CLLocationManager 通知来自同一控制器的位置更改时，您都会推送一个新控制器。这会导致嵌套导航。第一次尝试在该控制器中保存对 LocationMapViewController 的引用以通知您，然后检查它以通知它：

```
if (self.locationController == null){
     LocationMapViewController *locationMapViewController = [[LocationMapViewController alloc] initWithNibName:@"LocationMapViewController_iPhone" bundle:nil];
    locationMapViewController.title=@"Your Title";
    locationMapViewController.centerOfMap = &(coordinate);
    [self.navigationController pushViewController:locationMapViewController animated:YES]; 
}else{
    [self.locationController locationDidChangeTo: &(coordinate)];
} 
```

另一种选择是在 LocationMapViewController 中创建 CLLocationManager ...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-29T21:46:24.600

我发现另一个解决方案可以将我的所有代码转换为情节提要，并且walla，它又可以工作了。甜的。它不像看起来那么难，干杯，tronnick

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-16T09:20:30.737

确保您没有同时推入两个或更多导航堆栈`UIViewControllers`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-14T23:40:15.593

我不能 100% 确定这是否解决了您的具体问题，但是`nested pop animation can result in corrupted navigation bar`当我试图在视图控制器出现之前弹出它时，我收到了消息。覆盖`viewDidAppear`以在您的 UIViewController 子类中设置一个标志，指示该视图已出现（记住也要调用`[super viewDidAppear]`）。在弹出控制器之前测试该标志。如果视图尚未出现，您可能需要设置*另一个*标志，指示您需要在视图控制器`viewDidAppear`出现后立即从内部弹出视图控制器。像这样：

```
@interface MyViewController : UIViewController {
    bool didAppear, needToPop;
} 
```

……在`@implementation`……

```
- (void)viewDidAppear:(BOOL)animated {
    [super viewDidAppear:animated];
    didAppear = YES;
    if (needToPop)
        [self.navigationController popViewControllerAnimated:YES];
}

- (void)myCrucialBackgroundTask {
    // this task was presumably initiated when view was created or loaded....
    ...
    if (myTaskFailed) {  // o noes!
        if (didAppear)
            [self.navigationController popViewControllerAnimated:YES];
        else
            needToPop = YES;
    }
} 
```

重复的`popViewControllerAnimated`调用有点难看，但我可以让它在我目前疲倦的状态下工作的唯一方法。

# c# - 使用 jqueryajax 在数据库中插入数据

> ID：11356740
> 
> 赞同：0
> 
> 时间：2012-07-06T06:10:00.587
> 
> 标签：c#, jquery, asp.net, sql-server

我有一个带有 c#(.net4) 代码的表单。在这个表格中，用户填写他的规范并提交。
我想在 jquery 中使用 ajax 或 post 方法来防止闪烁。我编写流动代码。“成功”函数执行但它不起作用并且任何记录插入数据库中；我单独执行executemember方法。它没有问题但它不适用于jquery ajax。哪里有问题？

```
[WebMethod]
    public static string executeinsert(string name ,string family , string username,string password , string  email,string tel, string codemeli)
    {   string constring = "data source=.;database=site;integrated security=true;";

        SqlConnection con = new SqlConnection(constring);
        SqlCommand com = new SqlCommand("insertmember", con);
        com.CommandType = CommandType.StoredProcedure;
        com.Parameters.Add(new SqlParameter("@username", SqlDbType.NVarChar, 250));
        com.Parameters["@username"].Value = username;
        com.Parameters.Add(new SqlParameter("@name", SqlDbType.NVarChar, 150));
        com.Parameters["@name"].Value = name;
        com.Parameters.Add(new SqlParameter("@password", SqlDbType.NVarChar, 50));
        com.Parameters["@password"].Value = password;
        com.Parameters.Add(new SqlParameter("@family", SqlDbType.NVarChar, 250));
        com.Parameters["@family"].Value = family;
        com.Parameters.Add(new SqlParameter("@email", SqlDbType.NVarChar, 50));
        com.Parameters["@email"].Value = email;
        com.Parameters.Add(new SqlParameter("@codemeli", SqlDbType.NChar, 10));
        com.Parameters["@codemeli"].Value = codemeli;
        com.Parameters.Add(new SqlParameter("@tel", SqlDbType.NChar, 12));
        com.Parameters["@tel"].Value = tel;
        con.Open();
        com.ExecuteNonQuery();
        con.Close();
        return "success";
        } 
```

及其我的jQuery代码

```
 <script type="text/javascript">
    $(document).ready(
    function () {
        $("#Button1").click(
            function () {
                var username, family, name, email, tel, codemeli, password;
                username = $('#<%=TextBox1.ClientID%>').val();
                name = $('#<%=TextBox2.ClientID%>').val();
                family = $('#<%=TextBox3.ClientID%>').val();
                password = $('#<%=TextBox4.ClientID%>').val();
                email = $('#<%=TextBox5.ClientID%>').val();
                tel = $('#<%=TextBox6.ClientID%>').val();
                codemeli = $('#<%=TextBox7.ClientID%>').val();

                $.ajax(
                {
                    type: "POST",
                    url: "WebApplication20.aspx/executeinsert",
                    data: "{'username':'username','name':name,
                            'family':family,'password':password,
                            'email':email,'tel':tel,
                            'codemeli':codemeli}",
                    contentType: "application/json;charset=utf-8",
                    dataType: "json",
                    async: true,
                    cache: false,
                    success: function(msg) {
                        alert(msg);
                    },
                    error: function (x, e) {
                        alert("The call to the server side failed. " 
                              + x.responseText);
                    }
                }
            );
        }
     )
 })
</script> 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T06:26:33.823

我相信您的 JSON 格式不正确

[尝试在此处](http://jsonlint.com)验证您的 json 。

您可以看到您的 json 无效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T06:28:25.660

看一下这个：

```
$(document).ready(function () {
    $("#Button1").click(function () {
        var userData = new Object();

        userData.username = $('#<%=TextBox1.ClientID%>').val();
        userData.name = $('#<%=TextBox2.ClientID%>').val();
        userData.family = $('#<%=TextBox3.ClientID%>').val();
        userData.password = $('#<%=TextBox4.ClientID%>').val();
        userData.email = $('#<%=TextBox5.ClientID%>').val();
        userData.tel = $('#<%=TextBox6.ClientID%>').val();
        userData.codemeli = $('#<%=TextBox7.ClientID%>').val();

        $.ajax({
            type: "POST",
            url: "WebApplication20.aspx/executeinsert",
            data: userData,
            contentType: "application/json;charset=utf-8",
            dataType: "json",
            async: true,
            cache: false,
            success: function (msg) {
                alert(msg);
            },
            error: function (x, e) {
                alert("The call to the server side failed. " + x.responseText);
            }
        });
    });
}); 
```

PS如果它调用的话，尝试调试并在webmethod中放置断点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T06:14:34.283

`json`is not in right 格式 `'name':name`不包含在,`'`中`string`。

```
data: "{'username' : 'username',   'name':name,'family':family,'password':password,'email':email,'tel':tel,'codemeli':codemeli    }", 
```

它应该是

```
 data: "{'username' : 'username', 'name':'name', 'family':'family', 'password':'password', 'email':'email', 'tel':'tel', 'codemeli':'codemeli'}", 
```

# asp.net - 锁定按钮点击事件，在asp.net中使用锁定？

> ID：11356741
> 
> 赞同：0
> 
> 时间：2012-07-06T06:10:08.117
> 
> 标签：asp.net

在asp.net中使用锁定如何防止多个用户单击按钮。我的意思是一次只有一个用户必须点击按钮，不止一个用户不点击按钮。我如何使用锁，任何参考学习。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T06:33:01.857

你不能真正阻止不同的用户点击“*相同*”页面上的“*相同*”按钮。但是您可以防止多个请求同时在同一个代码块中处于活动状态：

 *```
private static object PadLock = new object();
protected void Button1_Click(object sender, EventArgs e)
{
    lock (PadLock)
    {
        // do work here. only one thread can run code in this block at any one time
        // start by verifying if the work was already done. if not do the work
    }
} 
```

虽然这会序列化对 中代码的访问，但`Button1_Click`如果不是绝对必要，我建议不要使用 ti。语句阻塞（可能永远）直到前`lock`一个锁持有者释放锁。*

# c++ - 提升 async_* 函数和 shared_ptr 的

> ID：11356742
> 
> 赞同：20
> 
> 时间：2012-07-06T06:10:09.447
> 
> 标签：c++, boost, boost-asio, shared-ptr

我经常在代码中看到这种模式，将其作为第一个参数绑定`shared_from_this`到成员函数并使用`async_*`函数调度结果。这是另一个问题的示例：

```
void Connection::Receive()
{
     boost::asio::async_read(socket_,boost::asio::buffer(this->read_buffer_),
        boost::bind(&Connection::handle_Receive, 
           shared_from_this(),
           boost::asio::placeholders::error,
           boost::asio::placeholders::bytes_transferred));
 } 
```

使用`shared_from_this()`代替的唯一原因`this`是在成员函数被调用之前保持对象处于活动状态。但是除非某处有某种增强魔法，因为`this`指针是 type `Connection*`，这一切都`handle_Receive`可以接受，并且返回的智能指针应该立即转换为常规指针。如果发生这种情况，则没有任何东西可以使对象保持活力。而且，当然，在调用中没有指针`shared_from_this`。

但是，我经常看到这种模式，我不敢相信它像我认为的那样完全被破坏了。当操作完成时，是否有一些 Boost 魔术导致 shared_ptr 稍后转换为常规指针？如果是这样，这是否记录在某处？

特别是，是否在某处记录了共享指针将保持存在直到操作完成？调用`get_pointer`强指针然后在返回的指针上调用成员函数是不够的，除非强指针在成员函数返回之前没有被销毁。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-07-07T03:36:53.427

简而言之，`boost::bind`创建`boost::shared_ptr<Connection>`从 返回的 的副本`shared_from_this()`，并且`boost::asio`可以创建处理程序的副本。处理程序的副本将保持活动状态，直到发生以下情况之一：

*   处理程序已被调用服务的`run()`、`run_one()`或成员函数的线程调用`poll()`。`poll_one()`
*   被`io_service`摧毁。
*   `io_service::service`拥有处理程序的 是通过 关闭的[`shutdown_service()`](http://www.boost.org/doc/libs/1_50_0/doc/html/boost_asio/reference/io_service__service/shutdown_service.html)。

以下是文档的相关摘录：

*   boost::bind[文档](http://www.boost.org/doc/libs/1_50_0/libs/bind/bind.html#with_functions)：

    > 接受的参数`bind`由返回的函数对象在内部复制和保存。

*   升压::asio [`io_service::post`](http://www.boost.org/doc/libs/1_50_0/doc/html/boost_asio/reference/io_service/post.html):

    > `io_service`保证仅在当前调用 、 或 成员函数的线程中`run()`调用处理程序`run_one()`。[...]将根据需要制作*处理程序*对象的副本。`poll()``poll_one()``io_service`

**   升压::asio [`io_service::~io_service`](http://www.boost.org/doc/libs/1_50_0/doc/html/boost_asio/reference/io_service/_io_service.html):

    > `io_service`计划在或任何关联链 上延迟调用的未调用处理程序对象将被销毁。
    > 
    > 如果对象的生命周期与连接的生命周期（或某些其他异步操作序列）`shared_ptr`相关联，则对象的 a 将绑定到与之关联的所有异步操作的处理程序中。[...]当单个连接结束时，所有关联的异步操作都会完成。相应的处理程序对象被销毁，并且`shared_ptr`对对象的所有引用都被销毁。* 

 ** * *

虽然过时（2007 年），但[TR2 的网络库提案（修订版 1）](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2007/n2175.pdf)源自 Boost.Asio。部分`5.3.2.7\. Requirements on asynchronous operations`提供了`async_`函数参数的一些细节：

> 在此子句中，异步操作由以前缀命名的函数启动`async_`。这些功能应称为*启动功能*。[...] 库实现可能会复制处理程序参数，并且原始处理程序参数和所有副本都是可互换的。
> 
> 初始化函数的参数的生命周期应如下处理：
> 
> *   如果参数被声明为 const 引用或按值 [...]，则实现可能会复制参数，并且所有副本应在调用处理程序后立即销毁。
> 
> [...] 库实现对与启动函数的参数相关联的函数进行的任何调用都将被执行，以便调用按调用[*1*]到调用[*n*]的顺序发生，其中对于所有*i*， 1 ≤ *i* < *n*，调用[*i*]优先调用[*i+1*]。

因此：

*   该实现可能会创建*处理程序*的副本。在示例中，复制的*处理程序*将创建 的副本`shared_ptr<Connection>`，增加实例的引用计数，同时*处理程序*`Connection`的副本保持活动状态。
**   该实现可能会在调用*handler*之前销毁处理*程序*。如果异步操作在`io_serive::service`关闭或被`io_service`销毁时未完成，则会发生这种情况。在示例中，处理程序的副本将被销毁，从而减少 的引用计数`Connection`，并可能导致`Connection`实例被销毁。*   如果调用了*处理程序*，则处理程序的所有副本将在处理程序执行返回后立即销毁。同样，处理程序的副本将被销毁，从而减少 的引用计数`Connection`，并可能导致它被销毁。*   与 的参数关联的函数`asnyc_`将按顺序执行，而不是并发执行。这包括`io_handler_deallocate`和`io_handler_invoke`。这保证了在调用*处理程序*时不会释放*处理程序。*在`boost::asio`实现的大多数区域中，*处理程序*被复制或移动到堆栈变量，一旦执行退出声明它的块，就允许销毁发生。在示例中，这确保了在调用*handler*`Connection`期间的引用计数至少为 1 。*

 *** * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-06T14:58:04.450

它是这样的：

1) Boost.Bind 文档[状态](http://www.boost.org/doc/libs/1_50_0/libs/bind/bind.html#with_member_pointers)：

> “[注意：mem_fn 创建的函数对象能够接受指向对象的指针、引用或智能指针作为其第一个参数；有关其他信息，请参阅 mem_fn 文档。]”

2) mem_fn 文档[说](http://www.boost.org/doc/libs/1_50_0/libs/bind/mem_fn.html#Purpose)：

> 当使用第一个参数 x***调用***函数对象时，该参数既不是指针也不是对适当类的引用（上例中的 X），它使用 get_pointer(x) 从 x 获取指针。库作者可以通过提供适当的 get_pointer 重载来“注册”他们的智能指针类，从而允许 mem_fn 识别和支持它们。

因此，指针或智能指针按原样存储在活页夹中，直到被调用。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-10-27T18:56:29.203

我还看到这种模式被大量使用并且（感谢@Tanner）我可以看到为什么在**多线程**`io_service`中运行时使用它。但是，我认为它仍然存在生命周期问题，因为它用潜在的内存/资源泄漏代替了潜在的崩溃......

 **感谢 boost::bind，绑定到 shared_ptrs 的任何回调都成为对象的“用户”（增加对象 use_count），因此在调用所有未完成的回调之前不会删除该对象。

每当在相关计时器或套接字上调用取消或关闭时，都会调用 boost::asio::async* 函数的回调。通常，您只需使用 Stroustrup 钟爱的[RAII](http://en.wikipedia.org/wiki/Resource_acquisition_is_initialization)模式在析构函数中进行适当的取消/关闭调用；任务完成。

但是，当所有者删除对象时不会调用析构函数，因为回调仍然保存 shared_ptrs 的副本，因此它们的 use_count 将大于零，从而导致资源泄漏。通过在删除对象之前进行适当的取消/关闭调用，可以避免泄漏。但这并不像使用 RAII 并在析构函数中进行取消/关闭调用那样万无一失。确保资源*始终*被释放，即使存在异常。

符合 RAII 的模式是使用静态函数进行回调，并在注册回调函数时将 weak_ptr 传递给 boost::bind，如下例所示：

```
class Connection : public boost::enable_shared_from_this<Connection>
{
  boost::asio::ip::tcp::socket socket_;
  boost::asio::strand  strand_;
  /// shared pointer to a buffer, so that the buffer may outlive the Connection 
  boost::shared_ptr<std::vector<char> > read_buffer_;

  void read_handler(boost::system::error_code const& error,
                    size_t bytes_transferred)
  {
    // process the read event as usual
  }

  /// Static callback function.
  /// It ensures that the object still exists and the event is valid
  /// before calling the read handler.
  static void read_callback(boost::weak_ptr<Connection> ptr,
                            boost::system::error_code const& error,
                            size_t bytes_transferred,
                            boost::shared_ptr<std::vector<char> > /* read_buffer */)
  {
    boost::shared_ptr<Connection> pointer(ptr.lock());
    if (pointer && (boost::asio::error::operation_aborted != error))
      pointer->read_handler(error, bytes_transferred);
  }

  /// Private constructor to ensure the class is created as a shared_ptr.
  explicit Connection(boost::asio::io_service& io_service) :
    socket_(io_service),
    strand_(io_service),
    read_buffer_(new std::vector<char>())
  {}

public:

  /// Factory method to create an instance of this class.
  static boost::shared_ptr<Connection> create(boost::asio::io_service& io_service)
  { return boost::shared_ptr<Connection>(new Connection(io_service)); }

  /// Destructor, closes the socket to cancel the read callback (by
  /// calling it with error = boost::asio::error::operation_aborted) and
  /// free the weak_ptr held by the call to bind in the Receive function.
  ~Connection()
  { socket_.close(); }

  /// Convert the shared_ptr to a weak_ptr in the call to bind
  void Receive()
  {
    boost::asio::async_read(socket_, boost::asio::buffer(read_buffer_),
          strand_.wrap(boost::bind(&Connection::read_callback,
                       boost::weak_ptr<Connection>(shared_from_this()),
                       boost::asio::placeholders::error,
                       boost::asio::placeholders::bytes_transferred,
                       read_buffer_)));
  }
}; 
```

注意：`read_buffer_`存储为`shared_ptr`Connection 类中的 a 并作为 a 传递给`read_callback`函数`shared_ptr`。

这是为了确保在多个`io_services`单独任务中运行的情况下，直到其他任务完成后，即调用函数时，*才会*删除 `read_buffer_`。*`read_callback`*

 ** * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-06T07:44:14.193

没有从`boost::shared_ptr<Connection>`（的返回类型`shared_from_this`）到`Connection*`（的类型`this`）的转换，因为正如您正确指出的那样，这将是不安全的。

魔法就在 Boost.Bind 中。简而言之，在表单调用中`bind(f, a, b, c)`（本示例不涉及占位符或嵌套绑定表达式） where `f`is a pointer to member，然后调用调用结果将导致调用表单`(a.*f)(b, c)`if`a`具有派生的类型从指向成员（或类型`boost::reference_wrapper<U>`）的指针的类类型，否则它的形式为`((*a).*f)(b, c)`. 这适用于指针和智能指针。（我实际上是在记忆中的规则`std::bind`，Boost.Bind 并不完全相同，但两者的精神相同。）

此外， 的结果`shared_from_this()`存储在对 的调用结果中`bind`，确保没有生命周期问题。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-06T07:41:38.940

也许我在这里遗漏了一些明显的东西，但是由返回的 shared_ptr`shared_from_this()`存储在由返回的函数对象中`boost::bind`，这使它保持活动状态。它仅在异步读取完成时启动回调时隐式转换为`Connection*`，并且对象至少在调用期间保持活动状态。如果`handle_Receive`没有从中创建另一个 shared_ptr，并且存储在绑定函子中的 shared_ptr 是最后一个活动的 shared_ptr，则该对象将在回调返回后被销毁。******

# c# - 以下构造与普通锁相比如何

> ID：11356744
> 
> 赞同：0
> 
> 时间：2012-07-06T06:10:12.550
> 
> 标签：c#, concurrency, locking

我正在开发一个项目，其中所有 DB 逻辑（读取和写入）都包含以下内容：

```
using(Util.DbRun ()) {
    // Code here
} 
```

我去查找了这个 DbRun 方法，发现了这个：

```
static readonly object dbWait = new object();
static public IDisposable DbRun ()
{
    Monitor.Enter (dbWait);
    return new Disposable (() => Monitor.Exit(dbWait));
}
class Disposable : IDisposable
{
    private Action action;
    private volatile bool disposed = false;
    public Disposable (Action action)
    {
        if (action == null)
            throw new ArgumentNullException ("action can't be null");
        this.action = action;
    }

    #region IDisposable implementation
    public void Dispose ()
    {
        bool run = false;
        if (!disposed) {
            lock (this) {
                if (!disposed) {
                    run = true;
                    disposed = true;
                }
            }
        }
        if (run)
            action ();
    }
    #endregion
} 
```

我的问题是；这与一般`lock { /* code here */ }`构造相比如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T06:19:08.033

Well, that's extra code to maintain, and a lot of extra objects for GC to handle (although most of them will die in gen-0, so probably not critical), and a lot of extra lock-handles (which could be mitigated by using `Interlocked` instead of a `lock(this)` in the dispose).

It also doesn't *quite* handle the **very unlikely** edge case that caused the introduction of the [`Monitor.Enter(object, ref bool)`](http://msdn.microsoft.com/en-us/library/dd289498) usage in the current compiler, [described here](http://blogs.msdn.com/b/ericlippert/archive/2009/03/06/locks-and-exceptions-do-not-mix.aspx), although that could probably be added.

My biggest question, though, would be: why? what problem is it solving? what is it doing **better** to justify existence?

If I wanted to do that *for a valid reason*, then personally I would do away with the delegate usage, and write a custom, implementation-specific disposable object. The delegate is unnecessary complication.

Also: static locks are not always what you want. I would make it an *instance* and simply make that instance available to where-ever needed it. However... the same approach can be used with `lock`, much more simply.

# wordpress - 2结帐和愿望清单会员插件 wordpress 集成不起作用

> ID：11356745
> 
> 赞同：2
> 
> 时间：2012-07-06T06:10:21.533
> 
> 标签：wordpress, plugins, integration, member, 2checkout

我在将 2checkout 与 wordpress 中的愿望清单成员插件集成时遇到问题。我已按照愿望清单中的人提供的此[集成视频](http://member.wishlistproducts.com/2checkout-integration/)中的所有步骤进行操作，但我似乎无法在填写后注册以转发到购物车进行付款。

我觉得我要么错过了什么，要么在某个时候犯了错误。

这是我正在使用的注册网址，请随时注册并进行测试。您会注意到它没有转发到 2checkout 站点进行付款（这甚至意味着在这个阶段发生吗？）。

[http://muteserver.com/index.php?/register/Fdins7](http://mutestserver.com/index.php?/register/Fdins7)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T05:30:11.057

将愿望清单会员与任何支付网关集成的过程是不同的。

当访问者想要购买您的产品时，他会执行以下步骤：

1.  点击购买按钮
2.  在您的情况下，他将被转移到支付网关 2Checkout
3.  付款完成后，他将获得注册表格。

你需要做的是：

添加一个购买按钮（此按钮由 2checkout 提供给您） 您需要在 2Checkout 中填写所有正确信息才能使该按钮起作用。

您在 2Checkout 设置中输入的 URL 不是注册表单 URL，它是您可以在特定网站的集成页面上找到的特殊 URL。

您将能够在以下位置找到适合您网站的确切步骤：

集成 --> 购物车 ----> 选择 2Checkout 付款

您可以看到该过程如何与 Clickbank 一起工作：

[http://WishlistRegistrationWidget.com](http://WishlistRegistrationWidget.com)

用户首先点击购买按钮然后他被转移到支付页面并且他返回到注册表单的支付页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T08:24:39.943

你这样做是不对的。您必须将 2checkout 购买按钮添加到您的网站，以便注册工作。

您在此处提供的 URL 是**私人**注册链接。它绕过了一切。

正确的顺序应该是这样的：

立即加入页面->2结帐按钮->商店页面->激活:)

转至：[http](http://businessidea4u.com) ://businessidea4u.com SC 和 PG 不同，但逻辑相同 :)

# php - 为每个数组项添加值

> ID：11356747
> 
> 赞同：0
> 
> 时间：2012-07-06T06:10:36.633
> 
> 标签：php

我试图在数组内的每个帖子数据中放置一个 timeago，帖子数据来自 mysql 表。代码如下：

```
 $sql = "SELECT * FROM posts ORDER BY time DESC LIMIT 8"; 
  $query = mysql_query($sql)or die(mysql_error());

  $count = 0; // Initialize counter
$rows = array();
while($row = mysql_fetch_array( $query )) {
    $rows[++$count] = $row;
  } 
```

这些行已被放入一个数组中。每个里面都有：用户，帖子内容，时间（我用它来计算timegao）

timeago 脚本如下：

```
function timeago($time)  
    {  
    $periods = array("second", "minute", "hour", "day", "week", "month", "year", "decade");  
    $lengths = array("60","60","24","7","4.35","12","10");  

    $now = time();

    $format = strtotime($time);
    $difference     = $now - $format;  
    $tense         = "ago";  

    for($j = 0; $difference >= $lengths[$j] && $j < count($lengths)-1; $j++)   
        {  
        $difference /= $lengths[$j];  
        }  

    $difference = round($difference);  

    if($difference != 1)   
        {  
        $periods[$j].= "s";  
        }  

    return "$difference $periods[$j] $tense";  
    } 
```

我如何遍历每个数组行，获取超时，使用 timeago 函数计算它，然后将结果作为 'timeago':'value-calculated' 注入每个数组行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T06:25:54.163

```
$rows = array();
while($row = mysql_fetch_array( $query )) {
  $rows .= timeago($row['time']);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T06:13:29.257

如下所示，PS：`$counter`不是必需的。

```
$rows = array();
while($row = mysql_fetch_array( $query )) {
  $row['timeago'] = timeago($row['time']);
  $rows[] = $row;
} 
```

# php - 这个表单和 MySQL 查询有什么问题？

> ID：11356757
> 
> 赞同：0
> 
> 时间：2012-07-06T06:11:10.967
> 
> 标签：php, mysql, checkbox

我有一个 PHP 表单，其中每个项目都有复选框。复选框的名称是唯一的 PHP 变量，因此不会有重复的条目。当用户选中复选框并单击“更新”时。MySQL 数据库应该更新。但它没有。有什么建议吗？谢谢

* * *

形式：

```
<form action='spam.php' method='post'>
<?php
$query = mysql_query("SELECT * FROM files WHERE subject='business' AND active='1' ORDER BY id DESC");
$numrows = mysql_num_rows($query);
if ($numrows > 0)
  echo "<h3>Article - Business</h3>
<ol>";
while ($row = mysql_fetch_assoc($query)) {
    $id = $row['id'];
    $title = $row['title'];
    $date = $row['date'];
    $active = $row['active'];
    $desc = $row['description'];
    $author = $row['author'];
    $email = $row['email'];
    $filepath = $row['file'];
    $ext = $row['ext'];
    $subject = $row['subject'];
    echo "<script>                                      
    <li>$title <input type='checkbox' name='$id' value='0' /><$ext| <a href='$filepath'>Download</a>|<a id='aTag$id' href=''>Details  &darr;</a></li>
    ";

}

if ($numrows == 0)
 echo "";
?>
<br />                                      
<input type='submit' value='Update' name='submitbtn'/>
</form><br /> 
```

* * *

表单动作：

```
<?php

    if (isset($_POST['$id'])) 

    mysql_query("UPDATE files SET active=0 WHERE id=$id AND subject=$subject");

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T06:19:23.457

Firstly I suggest that You seperate retrieving data from database and echoing input fields. Secondly, I suppose that

```
<?php while($row = mysql_fetch_array($result)): ?>
    <input type="checkbox" name="<?=$row['id']?>
<?php endwhile; ?> 
```

looks prettier.

Third thing, You didn't want to try:

```
if (isset($_POST[$id])) ... 
```

not

```
if (isset($_POST['$id'])) ... 
```

And the last thing, is that we need to know errors or what is wrong.

# php - 使用 tpl (Smarty) 时，如何在 PHP 中嵌入的 Javascript 代码中通过 id 获取 DOM 元素？

> ID：11356759
> 
> 赞同：1
> 
> 时间：2012-07-06T06:11:16.010
> 
> 标签：php, dom, upload, smarty, jquery-ui-resizable

目标：能够在可调整大小的 div 中加载用户选择的图像文件，以允许在提交之前调整图像大小（使用 jQuery 可调整大小插件）。

1) 视图的布局在upload_myimage.tpl.html 中定义（片段如下所示）。

2）它被初始化为在设置为“可调整大小”的 div 中显示任意图像。图像显示和调整大小工作。

3) 选择图像文件并点击“上传文件”（HTML 表单中的按钮）后，调用 PHP 函数 update_mypicture()（如下所示的片段）来替换上述图像。upload.php 的第 24 行出错：未捕获的 TypeError：无法将属性“onload”设置为 null。img 出于某种原因返回为空。任何想法为什么？

-- tpl 代码片段 --

```
<div id ="box">
    <img src="/image/logo.jpg" width="100%" height="100%" id="image"/>
</div>
<script type="text/javascript">
    $("#box").resizable(); 
</script> 
```

-- php代码片段 --

```
<?php
  if($_POST['submitScaleName'] == "Submit") {
  ?>
        <script type="text/javascript">
        function scale_mypicture(pic){
            var img = parent.document.getElementById("image");      // img is returned as null
             img.setAttribute("src", pic);
             var memeFilename = parent.document.getElementById("memeFilename");
             memeFilename.value = "<?php echo $_FILES['file']["name"]; ?>";
        }
        parent.document.getElementById("img_filename").value = "";
        scale_mypicture("<?php echo '/image/'.$_FILES['file']["name"]; ?>");
        </script>
<?php
}
?> 
```

# castle-windsor - Castle Windsor - 发布具有瞬态生活方式的拦截器

> ID：11356765
> 
> 赞同：6
> 
> 时间：2012-07-06T06:11:57.617
> 
> 标签：castle-windsor, interceptor

[文档](http://stw.castleproject.org/Default.aspx?Page=Interceptors&NS=Windsor&AspxAutoDetectCookieSupport=1)中指出，您应该始终使拦截器成为瞬态。如果我有这个示例代码；

```
//register interceptor
container.Register(Classes.FromAssemblyNamed("Sample.Interceptors")
.BasedOn<Castle.DynamicProxy.IInterceptor>()
.LifestyleTransient());

//Configure components to intercept
 container.Register(Classes.FromAssemblyNamed("Sample.Component")
.IncludeNonPublicTypes().InNamespace("Sample.Component", true)
            .Configure(c=>
                c.Interceptors(InterceptorReference.ForType<SampleInterceptor>())
                 .Anywhere.LifestyleSingleton())
                 .WithService.DefaultInterfaces()
                ); 
```

我应该担心释放`SampleInterceptor`，还是会`Sample.Component`在容器释放服务后自动释放？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-06T08:57:19.680

您的瞬态拦截器将其生命周期绑定到您与之关联的对象，并且当该对象作为该对象图表的任何其他部分被释放时将被释放

# android - 为什么在运行我的更新版本的 Android 应用程序时相机没有启动？

> ID：11356770
> 
> 赞同：3
> 
> 时间：2012-07-06T06:13:02.407
> 
> 标签：android, camera

我创建了一个 2.1 版本的 android 应用程序。当我使用更新版本（如 2.2 或更高版本）启动我的应用程序时，相机显示强制关闭错误或相机正在启动但它变得挂起。我的代码是

```
public class CameraCapture extends MenuActivitySpecific {

    protected ImageView image;
    protected String _path;
    File sdImageMainDirectory;
    private static final int IMAGE_CAPTURE = 0;
    private static final int GALLERY_REQUEST = 1;
    protected boolean _taken = true;
    private Uri imageUri;
    protected static final String PHOTO_TAKEN = "photo_taken";

    private Dialog dialog;
    private Handler imageUploadhandler, databaseHandler;
    DBAdapter db;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.cameracapturedimage);
        setLanguage(CameraCapture.this,"ja_JP");
        db = new DBAdapter(this);
        startCameraActivity2();
        imageUploadhandler = new Handler();
        databaseHandler = new Handler();
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        MenuInflater inflater = getMenuInflater();
        inflater.inflate(R.menu.menucapturedimage, menu);
        return true;
    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        // Handle item selection
        switch (item.getItemId()) {
        case R.id.backToHome:
            finish();
            return true;
        case R.id.save:
            upload();
            return true;
        case R.id.retakePicture:
            startCameraActivity2();
            return true;

        default:
            return super.onOptionsItemSelected(item);
        }
    }

    public static void setLanguage(Context context, String languageToLoad) {
        Log.d("Message 1 ", "setting language");
        Locale locale = new Locale(languageToLoad); //e.g "sv"

        Locale.setDefault(locale);
        android.content.res.Configuration config = new android.content.res.Configuration();
        config.locale = locale;
        context.getResources().updateConfiguration(config, context.getResources().getDisplayMetrics());
        Log.d("Message 3: ", locale+" Language set");
    }
    @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {

        try{
        if (requestCode == IMAGE_CAPTURE) {
            if (resultCode == RESULT_OK) {
                Log.d("ANDRO_CAMERA", "Picture taken!!!");
                ImageView image = (ImageView) findViewById(R.id.cameraImage);
                image.setImageURI(imageUri);
            }
            if (resultCode == RESULT_CANCELED) {
                Intent intent = new Intent(CameraCapture.this, Home.class);
                intent.setFlags(Intent.FLAG_ACTIVITY_REORDER_TO_FRONT);
                finish();
                startActivity(intent);
            }
        } else if (requestCode == GALLERY_REQUEST) {
            if (resultCode == RESULT_OK) {

                imageUri = data.getData();
                String selectedImagePath = getPath(imageUri);
                ImageView image = (ImageView) findViewById(R.id.cameraImage);
                image.setImageURI(imageUri);

            }
            if (resultCode == RESULT_CANCELED) {
                Intent intent = new Intent(CameraCapture.this, Home.class);
                intent.setFlags(Intent.FLAG_ACTIVITY_REORDER_TO_FRONT);
                finish();
                startActivity(intent);

            }
        }
        }
        catch(Exception e)
        {
            Log.e("Error: 169 CameraCapture: ", e+" ");
        }
    }

    protected void startCameraActivity2() {

        try {

            if (Constants.fromGallery) {
                Intent intent = new Intent();
                intent.setType("image/*");

                intent.addCategory(Intent.CATEGORY_OPENABLE);
                intent.setAction(Intent.ACTION_GET_CONTENT);
                startActivityForResult(
                        Intent.createChooser(intent, "Select Picture"),
                        GALLERY_REQUEST);
            } else {
                Log.d("ANDRO_CAMERA", "Starting camera on the phone...");
                String fileName = "testphoto.jpg";
                ContentValues values = new ContentValues();
                values.put(MediaColumns.TITLE, fileName);
                values.put(ImageColumns.DESCRIPTION,
                        "Image capture by camera");
                values.put(MediaColumns.MIME_TYPE, "image/jpeg");
                imageUri = getContentResolver().insert(
                        MediaStore.Images.Media.EXTERNAL_CONTENT_URI, values);
                Intent intent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
                intent.putExtra(MediaStore.EXTRA_OUTPUT, imageUri);
                intent.putExtra(MediaStore.EXTRA_VIDEO_QUALITY, 1);
                startActivityForResult(intent, IMAGE_CAPTURE);
            }
        } catch (Exception e) {
            Log.e("Error: 174 CameraCapture: ", e + "");

        }

    }

    public String getPath(Uri uri) {
        try{
        String[] projection = { MediaColumns.DATA };
        Cursor cursor = managedQuery(uri, projection, null, null, null);
        int column_index = cursor
                .getColumnIndexOrThrow(MediaColumns.DATA);
        cursor.moveToFirst();
        return cursor.getString(column_index);
        }
        catch(Exception e)
        {

            Log.e("Error: 219 CameraCapture: ", e+"");
            return null;
        }
    }

    public void upload() {
        try {
            boolean check = Utility.isNetworkAvailable(CameraCapture.this);
            // boolean check1 =isOnline();
            if (check) {

                String abc = imageUri.toString();

                Log.e("Image URI String ", abc);

                String newtime = Utility.getdate();
                String accesskey = Utility.MD5_Hash(Constants.email + newtime
                        + "moko");
                Constants.ACCESS_KEY = accesskey;
                Constants.proc_date = newtime;
                imageUploadhandler.postDelayed(runImageUpload, 500);
                dialog = ProgressDialog.show(CameraCapture.this, "",
                        "しばらくお待ちください", true);
                dialog.setCancelable(true);
            } else {

                databaseHandler.postDelayed(runDatabaseImageSave, 500);
                dialog = ProgressDialog.show(CameraCapture.this, "",
                        "しばらくお待ちください", true);
                dialog.setCancelable(true);

            }
        } catch (Exception e) {

            dialog.cancel();
            Toast.makeText(this, e + "", Toast.LENGTH_LONG).show();
        }
    }

    public byte[] getBytes(InputStream inputStream) throws IOException {

        ByteArrayOutputStream byteBuffer = new ByteArrayOutputStream();
        int bufferSize = 1024;
        byte[] buffer = new byte[bufferSize];

        int len = 0;
        while ((len = inputStream.read(buffer)) != -1) {
            byteBuffer.write(buffer, 0, len);
        }
        return byteBuffer.toByteArray();
    }

    @Override
    protected void onRestoreInstanceState(Bundle savedInstanceState) {
        if (savedInstanceState.getBoolean(CameraCapture.PHOTO_TAKEN)) {
            _taken = true;
        }
    }

    @Override
    protected void onSaveInstanceState(Bundle outState) {
        outState.putBoolean(CameraCapture.PHOTO_TAKEN, _taken);
    }

    public static void StoreImage(Context mContext, Uri imageLoc, File imageDir) {
        Bitmap bm = null;
        try {

            bm = MediaStore.Images.Media.getBitmap(
                    mContext.getContentResolver(), imageLoc);
            FileOutputStream out = new FileOutputStream(imageDir);
            bm.compress(Bitmap.CompressFormat.JPEG, 100, out);
            Log.e("file dir", imageDir.toString());

            bm.recycle();

        } catch (FileNotFoundException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        } catch (Exception e) {
            e.printStackTrace();
        }

    }

    private final Runnable runImageUpload = new Runnable() {

        public void run() {

            ResponseFromServer response = Utility.upload(imageUri,
                    CameraCapture.this);

            if (dialog.isShowing()) {
                dialog.dismiss();
            }

            Log.i("Image Uploading status:", response.getStatus()+"");
            if (response != null) {

                if (response.getStatus().equalsIgnoreCase("OK")) {

                    Toast.makeText(getApplicationContext(), "画像を保存しました。",
                            Toast.LENGTH_LONG).show();
                    finish();
                    Intent intent=new Intent(CameraCapture.this,AllProductActivityNew.class);
                    startActivity(intent);

                }
            } else {
                new AlertDialog.Builder(CameraCapture.this)
                        .setTitle("エラー")
                        .setMessage("ファイル送信に失敗しました。")
                        .setPositiveButton("OK",
                                new DialogInterface.OnClickListener() {
                                    public void onClick(DialogInterface dialog,
                                            int which) {
                                        // TODO Auto-generated method stub
                                    }
                                }).show();
                return;

            }

        }
    };

    private final Runnable runDatabaseImageSave = new Runnable() {

        public void run() {

            try {
                InputStream iStream = getContentResolver().openInputStream(
                        imageUri);

                byte[] inputData = getBytes(iStream);
                db.open();
                String stringUri = imageUri.toString();
                String userMail = Constants.email;
                Log.e("Email: ", userMail + "");
                boolean feedback = db.InsertImage(inputData, stringUri,
                        userMail, 1);

                db.close();

                if (dialog.isShowing()) {
                    dialog.dismiss();
                }

                if (feedback) {
                    Toast.makeText(CameraCapture.this, "画像を保存しました。",
                            Toast.LENGTH_LONG).show();
                    finish();
                } else {
                    new AlertDialog.Builder(CameraCapture.this)
                            .setTitle("エラー")
                            .setMessage("ファイル送信に失敗しました。")
                            .setPositiveButton("OK",
                                    new DialogInterface.OnClickListener() {
                                        public void onClick(
                                                DialogInterface dialog,
                                                int which) {
                                            // TODO Auto-generated method stub
                                        }
                                    }).show();
                    return;

                }
            } catch (Exception e) {
                Log.e("Error to upload Image to database: ", e + "");
            }

        }
    };

    private boolean isOnline() {
        ConnectivityManager cm = (ConnectivityManager) getSystemService(CONNECTIVITY_SERVICE);
        NetworkInfo netInfo = cm.getActiveNetworkInfo();
        if (netInfo != null && netInfo.isConnected()) {
            return true;
        }
        return false;
    }

} 
```

# c# - LightSwitch WebApplication 未进入 Global.asax 文件

> ID：11356771
> 
> 赞同：1
> 
> 时间：2012-07-06T06:13:12.983
> 
> 标签：c#, asp.net, .net, global-asax, visual-studio-lightswitch

我怎样才能让我的灯开关应用程序进入`global.asax`文件？在`ServerGenerated`项目中，我为用户实现了自己的登录屏幕。此外，我将`global.asax`文件添加到`ServerGenerated`lightswitch 应用程序的项目中。

我实现的自己的登录屏幕正在正确加载 - 但似乎灯光开关应用程序正在忽略该`global.asax`文件。

方法`Application_Start`等不输入。我究竟做错了什么？

PS：灯开关应用程序是一个网络应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T07:12:55.117

为这个问题找到了一个简单而愚蠢的解决方案：将 global.asax 复制到

```
Bin\Debug\bin\ServerGenerated 
```

编译后。

只需将文件复制到调试文件夹的根目录（放置 default.htm 的位置），您就可以通过 global.asax 进行调试。

# cakephp - 在 opensuse 上设置 cakephp

> ID：11356772
> 
> 赞同：0
> 
> 时间：2012-07-06T06:13:14.233
> 
> 标签：cakephp, permissions, opensuse

我对 linux 很陌生，并试图在 opensuse 12.1 上设置 cakephp。我按照 cakephp 网站（博客教程）上的说明做了，很可能遇到了一些权限问题。我在 /srv/www/htdocs 中拍了 cakephp 文件夹，然后尝试使用它所说的 localhost/cakephp 访问它

```
Access forbidden!
You don't have permission to access the requested object. It is either read-protected or not readable by the server.
If you think this is a server error, please contact the webmaster.
Error 403 
```

但是当我检查我得到的权限时

```
Suse:/srv # ls -lR shows sankalp as owner for all the files down the tree.

sankalp@Suse:/srv/www/htdocs> whoami
sankalp
sankalp@Suse:/srv/www/htdocs> ls -l
total 108
drwxrwxrwx  6 sankalp users  4096 Jun 27 12:44 cakephp
-rw-r--r--  1 sankalp users 73728 Jul  6 10:41 das
-rwxrwxrwx  1 sankalp  root    302 Mar 13  2006 favicon.ico
-rwxrwxrwx  1 sankalp  root     26 Jun 28 19:04 whoami.php 
```

当 favicon.ico 显示在浏览器中时，我也无法访问 whoami.php。当我向用户提供 777 时，我在这里做错了什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T07:01:47.310

您应该将权限分配为 777 到 /app/tmp 目录。

```
chmod -R 777 /srv/www/htdocs/yourApp/app/tmp 
```

希望它对你有用。请询问它是否不适合您。

# iphone - Self.view 在 iPhone 中调用 viewDidLoad

> ID：11356774
> 
> 赞同：2
> 
> 时间：2012-07-06T06:13:30.070
> 
> 标签：iphone, objective-c, xcode

我是 iPhone 开发的新手。请帮我

我有一个视图控制器`NSObject`在后台调用视图控制器的方法，当该方法调用时，我正在创建一个视图，我`self.view addSubview:view`在这一行之后编写了它们，我的视图再次加载调用。

我不知道为什么会出现这个问题，请帮助我这里是我的代码。

**NSObject.m**

```
- (void) showModalMessage:(NSString *)mes
{
  self = [super init];
        if (self) {
            objViewController = [[ViewController alloc] init];
        }
    [objViewController showPopUp:mes];
}

ViewController.m
- (void) showPopUp:(NSString *)mes
{

    labelView = [[UIView alloc] initWithFrame:CGRectMake(470, 740, 380, 50)];
    [self setLabelViewSettings];
    label = [[UILabel alloc] initWithFrame:CGRectMake(20, 8, 340, 30)];
    [self setLabelSettings];
    [labelView addSubview:label];
    [label release];
    [self.view addSubview:labelView];// After This line View did load calls again 
    [labelView release];

    [UIView beginAnimations:nil context:nil];
    [UIView setAnimationDuration:0.6];
    [UIView setAnimationDelegate:self];
    [UIView setAnimationDidStopSelector:@selector(hide)];
    [UIView commitAnimations];
} 
```

对不起，我的英语不好，请帮助我

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T06:41:06.543

每当视图控制器将其视图加载到内存中时，`UIViewController`自动调用的子类。`viewDidLoad`视图控制器仅在需要时加载其视图。因此，`[self.view addSubview:labelView]`导致`self.view`视图被加载到内存中并被`viewDidLoad`调用。紧接在此行之前，视图属性必须为 nil，并且访问视图属性时`self.view`会自动将视图加载到内存中，如[UIViewController 类参考](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIViewController_Class/Reference/Reference.html)中所述。

请注意，`viewDidLoad`可以多次调用，因为视图控制器可能会在内存不足的情况下卸载其视图并将其视图属性设置为 nil。您需要确保`viewDidLoad`多次调用是安全的。

正如 jrturton 指出的那样，您正在设置`self`一个新对象 in `showModalMessage:`，这是错误的。这保证了当你到达`showPopUp:`你新创建的`ViewController`对象时还没有加载它的视图，所以你总是会`viewDidLoad`在你点击时调用`self.view`。

# postgresql - 无法连接到 Heroku 上托管的 pg 数据库

> ID：11356775
> 
> 赞同：4
> 
> 时间：2012-07-06T06:13:39.837
> 
> 标签：postgresql, heroku

尝试连接到 PG 数据库时，出现以下错误：

> $ heroku pg:psql --app rf1
> psql: 无法连接到服务器：操作超时 服务器是否在主机“ec2-184-73-161-119.compute-1.amazonaws.com”上运行并接受 TCP/IP端口 5432 上的连接？

我该如何解决？Ps：我在 OS X 环境中运行并安装了本地 pg。

更新：

```
heroku pg:info --app rf1
=== SHARED_DATABASE (DATABASE_URL)
Data Size: 312k 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T14:21:39.193

您需要运行 Heroku 的生产数据库之一或其新开发的 9.1 数据库才能从外部连接到数据库；

[https://devcenter.heroku.com/articles/heroku-postgresql](https://devcenter.heroku.com/articles/heroku-postgresql) https://postgres.heroku.com/blog/past/2012/4/26/heroku_postgres_development_plan/

# javascript - 我正在尝试通过 JS 文件加载此表

> ID：11356781
> 
> 赞同：0
> 
> 时间：2012-07-06T06:14:11.740
> 
> 标签：javascript, html, extjs

我正在考虑在我的 js 文件中添加一个表。

我想要的是：

这是我的桌子

```
NewTable = '\
<table style="text-align: left; width: 100%;" border="1" cellpadding="2" cellspacing="2">\
  <tbody>\
    <tr>\
      <th style="vertical-align: top; text-align:center;">\
        <span id="Pet_Name">\
          Pet Name\
        </span>\
        <br>\
        <span id="Pet_Cost">\
          $\
        </span>\
      </th>\
    </tr>\
  </tbody>\
</table>\
' 
```

我想将此添加到 js 文件中，并在单击书签后立即从书签中加载它我希望在浏览器上使用它。

或者我想知道我是否可以添加 Div 或任何好的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T07:35:23.087

是的你可以！在页面正文中创建一个新的 div 元素，并将您在问题中的表格设置为 innerHTML。

```
var container = document.createElement('div');
container.innerHTML = '<table>...</table>'; 
document.getElementsByTagName("body")[0].appendChild(container) 
```

# delphi - FindComponent 甚至会找到声明为私有的东西是对的吗？

> ID：11356783
> 
> 赞同：1
> 
> 时间：2012-07-06T06:14:21.517
> 
> 标签：delphi, private-members

我有一个小问题（求知欲），我注意到如果（表单的）控件被声明为私有并动态创建它，您可以使用 FindComponent 在类外部访问。

逻辑上正确吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T06:20:10.880

FindComponent 根据其所有者和名称返回组件。它不使用私有变量，正如您通过尝试使用 FindComponent 完全没有任何类成员变量（改用局部变量）所看到的那样：它将继续工作。

关键字`private`仅表示您不能引用该名称。如果提供了引用底层控件的其他方法，则关键字不会阻止这种情况。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-06T06:22:27.087

发生这种情况是因为在创建控件时，它会将自己注册到其拥有组件的所有者列表中。因此有多个对控件的引用。

表单类中对控件的引用确实是私有的。但是对表单在其组件列表中保存的控件的引用是公开的。

从逻辑上讲，这与通过属性公开私有变量非常相似：

```
property MyPublicProp: TMyControl read FMyPrivateField; 
```

尽管您不会像这样直接公开私有字段，但控件通过向拥有表单注册来间接公开。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T11:21:12.583

合乎逻辑吗？好吧，私有变量在本单元之外的代码中是不可访问的，并且当您使用`strict private`. 这就是私有可见性的全部含义。

当然，您可以通过使用`FindComponent`或穿过该`Components`物业来规避这种情况，而这可以通过不分配所有者来避免。（注意：当您设置了父级时，自动销毁不需要所有者）。但是你可以通过遍历`Controls`父级的属性来规避这个问题。即使私有变量不是控件，而是说一个整数，您也可以通过*hacks*访问该变量，但在这种情况下，您必须知道类类型的签名/声明。

To answer you question in depth, one should know why the visibility indicators are made and how their usage was intended. I suppose they were not designed for keeping variables safe from theft protection, but merely as purpose for programmers to be able to do administrative internal tasks within classes and to impose certain handling for users of those classes. No program nor component will ever become hack-free.

# ruby-on-rails - 最佳实践，为 gemfile 中的每个 gem 添加一个版本？

> ID：11356786
> 
> 赞同：7
> 
> 时间：2012-07-06T06:14:44.807
> 
> 标签：ruby-on-rails, gemfile

我应该在我的 Gemfile 中添加每个 gem 的版本吗？这是最佳实践吗？刚推荐？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-06T09:52:47.643

我确实更喜欢将我所有的 gem 锁定到生产中的特定版本。考虑到可能有较新的版本会破坏与其他 gem 的兼容性或弃用某些 API，因此您希望 100% 确保在部署时不会因为 gem 不一致而意外损坏应用程序。更新 gem 只能在本地开发中完成，通过更新 Gemfile 条目并针对您的其余代码和库测试每个新版本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T06:24:04.383

通常，您不需要这样做，除非有指示（由 gem 作者或由于不兼容而来自用户的反馈）。有时您可能会使用某些 gem 的边缘版本，所以无论如何都没关系：

```
# Bundle edge Rails instead:
gem 'rails', :git => 'git://github.com/rails/rails.git'
gem 'arel',  :git => 'git://github.com/rails/arel.git'
gem "rack", :git => "git://github.com/rack/rack.git" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-06T09:41:30.987

我认为您不应该指定每个 gem 的版本，因为当前工作 gem 的版本已经在`Gemfile.lock`.

此外，如果您这样做，`bundle update`命令将毫无用处。您应该能够使用此命令来更新 gem。如果测试通过并且您的应用程序继续正常工作，只需提交新的`Gemfile.lock`

# cmd - 如何在 cmd 或命令提示符中插入此 ascii 文本艺术？

> ID：11356787
> 
> 赞同：2
> 
> 时间：2012-07-06T06:14:45.430
> 
> 标签：cmd, ascii, ascii-art

如何在 cmd 中插入此文本艺术？我这样做吗？

```
@echo off
cls
echo .................................................__________......
echo .... _________________________________________ ./           \\___
echo .___/             /..|        /_/   _____   |_ |   _______   ||..
echo .__/ ____       //...|   ____/  |  |.....| ||..|  /...||...\ ||..
echo ../_____/      //....|   || ....|  |_____| ||..|   ___||___  ||..
echo ......./      //.....|   |____..|       ___||..|  |___  ___| ||..
echo ....../      //......|    ___/..|   |\   \\ ...|   ...||...  ||..
echo ...../      //.......|   || ....|   |.\   \\ ..|   ...||...  ||..
echo ..../      //_______ |   |______|_  |..\   \\ .|  \___||___/ ||..
echo .../  ____________ /_|           /  |__.\   \\ |             ||..
echo __/_______________/.\___________/_____/..\___\\\____________//...
pause 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T14:18:41.577

这种 ASCII 艺术的问题是使用“|” 特殊字符。所以不，消除回声无济于事。有必要避免在 ASCII 艺术的每一行之前看到 echo 命令。逃脱所有管道将。所有你需要做的就是替换任何外观：`|`和`^|`你很高兴。

刚刚测试过，一切正常。以前，每次您遇到时都会出错： `echo ....|...`因为它会读取：`echo ....`并将其通过管道传递给`...`未找到命令 - 从未运行过暂停并且不显示整个 ASCII。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-11T03:18:23.597

```
@echo off

:loop

Set /a num=(%Random% %%9)+1

color %num%

echo .................................................__________......
echo .... _________________________________________ ./           \\___
echo .___/             /..^|        /_/   _____   ^|_ ^|   _______   ^|^|..
echo .__/ ____       //...^|   ____/  ^|  ^|.....^| ^|^|..^|  /...^|^|...\ ^|^|..
echo ../_____/      //....^|   ^|^| ....^|  ^|_____^| ^|^|..^|   ___^|^|___  ^|^|..
echo ......./      //.....^|   ^|____..^|       ___^|^|..^|  ^|___  ___^| ^|^|..
echo ....../      //......^|    ___/..^|   ^|\   \\ ...^|   ...^|^|...  ^|^|..
echo ...../      //.......^|   ^|^| ....^|   ^|.\   \\ ..^|   ...^|^|...  ^|^|..
echo ..../      //_______ ^|   ^|______^|_  ^|..\   \\ .^|  \___^|^|___/ ^|^|..
echo .../  ____________ /_^|           /  ^|__.\   \\ ^|             ^|^|..
echo __/_______________/.\___________/_____/..\___\\\____________//...

pause

goto :loop 
```

每次按下按钮时，这应该可以工作并闪烁随机颜色。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-01-28T19:05:30.630

可能最简单的方法是将原始 ascii 艺术保存在文本文件中（将其复制/粘贴到编辑器中）。

然后，只需`type`输出文件：

```
type asciiArt.txt 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-03-21T21:55:45.190

管道 ( | )

例子：

```
ping google.com | TEST.txt 
```

这告诉命令 (ping google.com) 将输出文本导入到 TEST.txt 以解决这个问题，“^|”女巫告诉你的批处理文件跳过下一个字符并继续。

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2015-10-25T13:24:46.963

```
@echo off
title My Name Is Zero
:loop
cls

Set /a num=(%Random% %%9)+1

color %num%

echo .................................................__________......
echo .... _________________________________________ ./           \\___
echo .___/             /..^|        /_/   _____   ^|_ ^|   _______   ^|^|..
echo .__/ ____       //...^|   ____/  ^|  ^|.....^| ^|^|..^|  /...^|^|...\ ^|^|..
echo ../_____/      //....^|   ^|^| ....^|  ^|_____^| ^|^|..^|   ___^|^|___  ^|^|..
echo ......./      //.....^|   ^|____..^|       ___^|^|..^|  ^|___  ___^| ^|^|..
echo ....../      //......^|    ___/..^|   ^|\   \\ ...^|   ...^|^|...  ^|^|..
echo ...../      //.......^|   ^|^| ....^|   ^|.\   \\ ..^|   ...^|^|...  ^|^|..
echo ..../      //_______ ^|   ^|______^|_  ^|..\   \\ .^|  \___^|^|___/ ^|^|..
echo .../  ____________ /_^|           /  ^|__.\   \\ ^|             ^|^|..
echo __/_______________/.\___________/_____/..\___\\\____________//...

ping 127.0.0.1 -n 3 -w **500** > nul

goto :loop 
```

# android - 在列表视图中放置图像边框的方法

> ID：11356788
> 
> 赞同：2
> 
> 时间：2012-07-06T06:14:46.120
> 
> 标签：android

我有列表视图，并且连续获得了一组图像。我想为图像添加边框，这是最简单的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T06:18:12.777

put this with in drawable folder with name image_border.xml

```
 <shape xmlns:android="http://schemas.android.com/apk/res/android">
        <stroke android:width="2dip" android:color="#8d8d8d" />
        <padding 
            android:left="1dip" 
            android:top="1dip"
            android:right="1dip" 
            android:bottom="1dip" />
        <solid android:color="#000000" />
        <corners android:radius="10dip" />
    </shape> 
```

and use attributes `android:background="@drawable/image_border"` for ImageView

You can change the shape according your requirement.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T06:38:46.013

我现在收到您的问题如果您的 XML 文件中有 ImageView，那么您也有以下代码：

```
 <ImageView
    android:id="@+id/imgIcon"
    android:layout_width="wrap_content"
    android:layout_height="fill_parent"
    android:gravity="center_vertical"
    android:layout_alignParentTop="true"
    android:layout_alignParentBottom="true"
    android:layout_marginRight="15dp"
    android:layout_marginTop="5dp"
    android:layout_marginBottom="5dp" 

    /> 
```

因此，在您的 imageView 标签中添加以下行：

```
 android:background="@drawable/Imagexml" 
           android:padding="6dp" 
```

现在和 android:background 一样，在 drawable 文件夹中有 Imagexml.xml 文件。

Imagexml.xml ：

```
 <?xml version="1.0" encoding="utf-8"?>
   <selector
xmlns:android="http://schemas.android.com/apk/res/android">

<item android:state_pressed="true" >
    <shape>
        <gradient
            android:startColor="#0079AD"
            android:endColor="#009AD6"
            android:angle="270" />
        <stroke
            android:width="1dp"
            android:color="#F1FAFE" />
        <corners
            android:radius="10dp" />

    </shape>
</item>

<item android:state_focused="true" >
    <shape>
        <gradient
            android:endColor="#007900"
            android:startColor="#009A77"
            android:angle="270" />
        <stroke
            android:width="1dp"
            android:color="#F1FAFE" />
        <corners
            android:radius="3dp" />

    </shape>
</item>

<item>        
    <shape>
        <gradient
            android:endColor="#0079AD"
            android:startColor="#009AD6"
            android:angle="270" />
        <stroke
            android:width="1dp"
            android:color="#F1FAFE" />
        <corners
            android:radius="3dp" />

    </shape>
</item>
</selector> 
```

然后你会得到你想要的结果。

# jquery - jQuery 等效于 Ruby 的 .send() 方法

> ID：11356795
> 
> 赞同：6
> 
> 时间：2012-07-06T06:15:24.573
> 
> 标签：jquery

我目前正在开发一个 jQuery 插件，我想在其中关闭一个元素，但将其关闭方式（slideUp、hide 和其他 jQuery 方法）指定为一个选项。

例如，某人将能够指定：

```
$('element').plugin({style: "slideUp", speed: 300}); 
```

它将在给定元素上调用 slideUp。

这是一个简化的示例，该插件会做更多的事情，但我只是想知道在 JavaScript / jQuery 中是否有可能这样做。作为并行，我正在寻找类似于 Ruby 的 .send() 方法的东西。

谢谢！

**编辑：** 我确实找到[了这个插件](http://jpoz.github.com/jquery.engineer/#send-doc)，它的功能类似于我正在寻找的东西，但如果有某种方法可以在不包含另一个插件的情况下做到这一点，我会很高兴。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-06T06:26:28.210

您可以使用方括号访问 javascript 对象（包括函数）的任何成员，`[]`然后使用普通括号调用它`()`。这是一个非常简化的例子

```
​var test = {
    slide: function() {alert('slide');}​,
    fade: function() {alert('fade');}
}

var style = "slide"; // or 'fade'

test[style]();​​​​​​ 
```

# php - php chr() 数字超过 255

> ID：11356796
> 
> 赞同：0
> 
> 时间：2012-07-06T06:15:39.490
> 
> 标签：php

我一直在使用 php`chr()`函数，我想通过使用从 1 开始的变量打印每个字符，打印 ASCII 值，然后递增它，然后重复此操作。这就是我所做的：

```
<?php
$i = 0;
while($i<255)
{
    echo chr($i)."\n";
    $i++;
}
?> 
```

这成功地起作用了。它打印出每个 ASCII 值，但我注意到，如果我使用值超过 255 的值，如下所示：

```
chr(300); 
```

一旦超过 255，它就会从头开始。所以，我想知道如果超过 255，是否有办法让 php 打印两个字符（例如，当你使用数字 300 时，它会将字符 255 后跟字符 45)。这可能吗？如果是这样，我会怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T06:29:43.973

干得好。它是无限循环，毫无意义，但它应该可以工作。

```
<?php
$i = 0;
$string = '';

do
{
    if($i<255) {
      echo $string . chr($i)."\n";
      $i++;
    } else {
      $string .= chr(255);
      $i = 0;
    }
}
while($i<255);
?> 
```

这里是循环的限制：

```
<?php
$i = 0;
$j = 0;
$limit = 255*4;

$string = '';

do
{
    $j++;
    if($i<255) {
      echo $string . chr($i)."\n";
      $i++;
    } else {
      $string .= chr(255);
      $i = 0;
    }
}
while($i<255 && $j<$limit);
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T06:40:06.853

只是为了好玩，这是一个递归解决方案：

```
<?php

function char($i, $max = 255) {
    if ($i > $max) {
        return char($max, $max) . char($i-$max, $max);
    }
    return chr($i);
}

echo char(365, 66);
echo "\n";
echo char(1365, 122);
echo "\n"; 
```

不要提供第二个参数以默认为 255。

示例输出：

```
BBBBB#
yyyyyyyyyyy" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T08:52:15.857

这基本上就是您要寻找的东西（但这没有任何意义）：

```
$char = (int) X; 
```

输入变量。它是一个整数。你想做某事直到，所以我们`while`循环：

```
while ($char >= 0) { 
```

虽然`$char`大于或等于零，但有事可做。如果它低于 255，我们输出它并打破循环：

```
 if ($char < 256) {
        echo chr($char);
        break;
    } 
```

美好的。现在是疯狂的部分。因为它可以大于 256，所以我们只输出：

```
 echo chr(255); 
```

总是？是的，总是。当我们输出它时，我们从值中减去它

```
 $char -= 256; 
```

然后我们再试一次循环：

```
} 
```

如您所见，这根本没有意义：

```
$char = (int) X;
while ($char >= 0) {
    if ($char < 256) {
        echo chr($char);
        break;
    }
    echo chr(255);
    $char -= 256;
} 
```

`chr(255)`如果大于 255 ，它只会在某个模值前面加上前缀。为什么？用于`chr(255)`前缀？

# javascript - 想要简单和可定制的工具提示插件

> ID：11356804
> 
> 赞同：-4
> 
> 时间：2012-07-06T06:16:00.673
> 
> 标签：javascript, jquery, tooltip, jquery-tooltip

我正在寻找一个简单且可自定义的工具提示插件，无论是纯 javascript 还是基于 Jquery，它具有以下功能：

*   无错误（我尝试过的一些只是偶尔显示工具提示，如果你挥动鼠标，它们就会停止显示）

*   可自定义（即能够自定义工具提示的css，选择鼠标移开后工具提示保持原位的时间等）

*   必须能够以编程方式显示/隐藏任何元素上方的工具提示，而不仅仅是鼠标悬停时。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T06:18:44.403

我认为您正在寻找类似这个插件的东西-> [http://docs.jquery.com/Plugins/Tooltip](http://docs.jquery.com/Plugins/Tooltip)

我过去自己使用过它，它有一些易于定制的功能。您可以在此处查看带有可用选项的演示 -> [http://jquery.bassistance.de/tooltip/demo/](http://jquery.bassistance.de/tooltip/demo/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T06:21:06.837

我相信 qTip 可以满足您的需求。我已经在几个项目中使用它没有问题。它是可定制的，并且有一个有据可查的 api，允许您在任何地方显示/隐藏它。

[http://craigsworks.com/projects/qtip2/](http://craigsworks.com/projects/qtip2/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-06T06:22:33.213

jQuery UI 有一个将包含在 1.9 中的工具提示（并不是说我是 UI 的最大粉丝）

可能值得一试，我不久前使用过它（当时它甚至还处于测试阶段）并且效果很好 URL：[http ://wiki.jqueryui.com/w/page/12138112/Tooltip](http://wiki.jqueryui.com/w/page/12138112/Tooltip)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-06T21:48:07.780

我做了一个简单易定制的： http: [//piscolabis.es/proyectos/piscotooltip/](http://piscolabis.es/proyectos/piscotooltip/)

# groovy - groovy - for 循环返回和 EOF 错误

> ID：11356806
> 
> 赞同：1
> 
> 时间：2012-07-06T06:16:09.880
> 
> 标签：groovy

我是这个论坛的新手，我请求您就 groovy 的问题提供帮助：我不明白为什么下面的代码会返回 EOF 错误...

```
arUserName=UserName.split(" ");

UserLastName='';

for ( i in 1..arUserName.length -1 )
{
UserLastName=UserLastName + arUserName[i];
}
UserLogin=UserLastName;
UserLogin=UserLogin.toLowerCase(); 
```

返回的错误如下： 无法执行 groovy 函数：启动失败：Script225.groovy：1：期待 EOF，在第 1 行第 134 列找到 'UserLogin'。erLastName + arUserName[i]; } UserLogin= ^ 1 错误

任何想法 ？

提前致谢！拉鲁恩

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T10:28:27.480

我这是由于调用 split() 时 UserName 为 null 或未定义而引起的

在 UserName.split(" ")

所以 arUserName 也将为空或未定义。

所以请为 UserName 分配一些值，然后检查您是否得到正确的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T07:16:28.747

将您的代码粘贴到 Groovy 控制台（在顶部添加 UserName 以便它工作）：

```
UserName = 'Tim Yates'

arUserName=UserName.split(" ");

UserLastName='';

for ( i in 1..arUserName.length -1 )
{
UserLastName=UserLastName + arUserName[i];
}
UserLogin=UserLastName;
UserLogin=UserLogin.toLowerCase(); 
```

工作正常。

不过，作为与代码风格无关的简要说明，通常以小写字母作为变量名的前缀，并且您的代码可以以更 Groovy 的方式编写，如下所示：

```
userName = 'Tim Yates'

userLogin = userName.split(" ")    // Split on space
                    .drop( 1 )     // Drop the first element
                    .join()        // Join strings together
                    .toLowerCase() // Convert to lowercase 
```

# java - 如何从字符串中删除尾随字符

> ID：11356808
> 
> 赞同：2
> 
> 时间：2012-07-06T06:16:23.013
> 
> 标签：java, android, string

我有一个包含数据结构的文件。数据以字节形式存储。我想在屏幕上显示一个数据（人名）。名称的大小约为 12 个字符。但数据可能少于或等于 12 个字符。我将字节数组转换为字符串并显示数据。当尝试使用 system.out.println 方法显示数据时，它会显示数据和不需要的字符。如何只显示想要的数据。

我试过下面的代码

```
// here Name is a byte array
title = new String( Name );
System.out.println("Title = " + title); 
```

我收到的输出是

```
 Title = area1���������� 
```

我只想要'area1'。请提供解决方案

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T06:21:54.607

```
 String title = new String( Name ,"UTF-8" );
    System.out.println("Title = " + title); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T07:47:02.173

```
System.out.println("Title = area1����������".replaceAll("([^A-Za-z0-9 ])", "")); 
```

give : `Title area1`，您也可以根据需要添加`.replaceAll("\ \ "," "));`或调整正则表达式

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-06T06:18:31.413

你有没有尝试过？

```
String decoded = new String(Name, "UTF-8"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-06T06:24:06.330

从[Java 中如何判断一个字符是否为字母？](https://stackoverflow.com/questions/93976/how-to-determine-whether-a-character-is-a-letter-in-java)

```
string.matches("\\p{L}"); // Unicode letter
string.matches("\\p{Lu}"); // Unicode upper-case letter 
```

您也可以使用 Character 类执行此操作：

```
Character.isLetter(character); 
```

但如果您需要检查多个字母，那就不太方便了。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-06T06:25:23.587

使用`StringBuilder`该类，通过附加从输入文件流中读取的每个字符来构建字符串，直到到达文件末尾。`toString()`一旦到达文件末尾，则立即通过类的方法返回字符串`StringBuilder`。

```
StringBuilder sb = new StringBuilder();
FileInputStream fis = new FileInputStream(file);
InputStreamReader isr = new InputStreamReader(fis, "UTF-8");//
int c = 0;
while ((c = isr.read()) != -1) {
    sb.append((char) c);
}
String fixedString = sb.toString(); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-06T07:24:45.963

在这里找到更新的代码：

```
 // here Name is a byte array
    String title = new String( "area1����������");
    System.out.println("Title = " + title);

    StringBuilder sb = new StringBuilder(title);
    StringBuilder sb2 = new StringBuilder();
    for(int i=0;i<sb.length();i++)
    {
        if(Character.isLetterOrDigit(sb.charAt(i)))
        {
            sb2.append(sb.charAt(i));
        }
    }

    title = sb2.toString();
    System.out.println("Title = " + title); 
```

# eclipse - Windowtester 脚本按钮单击没有响应

> ID：11356809
> 
> 赞同：1
> 
> 时间：2012-07-06T06:16:29.970
> 
> 标签：eclipse, window-tester

我正在尝试使用 windowtester 测试 Eclipse 插件应用程序。编写测试后，我能够成功运行它。但是，经过几次运行和运行时的几次手动中断，现在它对按钮单击没有响应。

如果我这样运行应用程序，它会响应。

请让我知道我是否应该清除一些东西？？？

# c - Short int 不取值

> ID：11356810
> 
> 赞同：2
> 
> 时间：2012-07-06T06:16:33.387
> 
> 标签：c, compiler-construction

给以下程序的输入是

10 10

10 10

但输出是

0 20

为什么 ？

```
/* scanf example */
#include <stdio.h>

int main ()
{
    short int a, b, c, d, e, f;
    a=b=c=d=e=f=0;
    scanf("%d %d",&a,&b);
    scanf("%d %d",&e,&d);
    c=a+b;
    f=d+e;

    printf("%d %d\n",c,f);

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-06T06:18:27.793

的正确`scanf`格式说明符`short int`是`%hd`，而不是普通`%d`的。您正在经历*未定义行为*的结果。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-06T07:29:35.617

你取了 6 个变量 a、b、c、d、e、f。它们分配的内存为 2 个字节，起始内存地址为 f 0x0、e 0x2、d 0x4、c 0x6、b 0x8、a 0xa

当您执行 scanf("%d %d",&a,&b) 时，a 的第一个值从内存位置 0xa 写入，占用 4 个字节直到 0xe。然后 b 的值从位置 0x8 开始写入，占用 4 个字节直到 0xc，从而覆盖 a 的内存位置。与其他scanf相同。如果您更改内存位置的顺序，您将获得不同的值。

请注意输出取决于您使用的平台，因此未定义的行为

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T09:20:02.223

因为堆栈被破坏了。假设“short int”类型在您的平台上占用 2 个字节，而“int”类型占用 4 个字节。变量 a、b、c、d、e、f 在堆栈上分配，每个分配 2 个字节。每次使用“%d”说明符而不是“%hd”读取一个值时，您告诉 scanf() 将其存储为“int”，占用 4 个字节而不是 2 个字节。当然，这会产生不可预知的结果. 根据我的经验，使用 scanf() 带来的麻烦多于好处 :-)，因此您可能希望使用更安全的 fread()，然后将字符串转换为整数。

# php - PHP：无法打印纯文本 HTML

> ID：11356812
> 
> 赞同：1
> 
> 时间：2012-07-06T06:17:04.867
> 
> 标签：php, html

奇怪的问题。我是 PHP 新手，正在尝试一些事情。这是我的场景：

HTML 表单... AJAX 调用 php 脚本... PHP 脚本调用 WCF Web 服务来获取对象数组。我想要做的是创建原始 HTML（这将是使用返回的对象数组创建表行），将其传递回我的 HTML 表单并将其注入所需的表中。

但是，返回的数据不是原始 HTML，而是一些标签和随机数。我一生都无法弄清楚我做错了什么。我尝试过转义字符，使用 HTMLSpecialChars 等，但我一直回到同样的问题。

```
 print htmlspecialchars("<tr>"
            . "<td>"
            . "<div class=\"row\">"
            . "<div style=\"float:right;width:50px\"><img src=\"" + $wsr->Article[$i]->ImageLink + "\" style=\"height: 50px\" /></div>"
            . "<div style=\"float:left;width:350px;\">"
            . "<div>"
            . "<h3 class=\"h3\" style=\"margin:0;\">" + $j + ". <a href=\"" + $wsr->Article[$i]->OriginLink + "\">" + $wsr->Article[$i]->HeadLine + "</a></h3>"
            . "<p class=\"p\" style=\"margin:0;\">" + $wsr->Article[$i]->Synopsis + "</p>"
            . "</div>"
            . "</div>"
            . "<div style=\"float:right; width:200px;padding-left:100px;\">"
            . "<input type=\"button\" value=\"yes\" id=\"btnyes" + $j + "\" /><input type=\"button\" value=\"No\" id=\"btnNo" + $j + "\" /><a href=\"URL\">" + $wsr->Article[$i]->ArticleCommentsAmount + " Comment(s)</a>\""
            . "</div>"
            . "</div>"
            . "</td>"
            . "</tr>"); 
```

我得到的回报是：

```
 3</div></div></td></tr>6</div></div></td></tr> 
```

任何帮助将不胜感激..谢谢。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-06T06:21:56.060

```
$string=htmlspecialchars("<tr>"
        . "<td>"
        . "<div class=\"row\">"
        . "<div style=\"float:right;width:50px\"><img src=\"" + $wsr->Article[$i]->ImageLink + "\" style=\"height: 50px\" /></div>"
        . "<div style=\"float:left;width:350px;\">"
        . "<div>"
        . "<h3 class=\"h3\" style=\"margin:0;\">" + $j + ". <a href=\"" + $wsr->Article[$i]->OriginLink + "\">" + $wsr->Article[$i]->HeadLine + "</a></h3>"
        . "<p class=\"p\" style=\"margin:0;\">" + $wsr->Article[$i]->Synopsis + "</p>"
        . "</div>"
        . "</div>"
        . "<div style=\"float:right; width:200px;padding-left:100px;\">"
        . "<input type=\"button\" value=\"Fan\" id=\"btnLike" + $j + "\" /><input type=\"button\" value=\"Not A Fan\" id=\"btnNotLike" + $j + "\" /><a href=\"URL\">" + $wsr->Article[$i]->ArticleCommentsAmount + " Comment(s)</a>\""
        . "</div>"
        . "</div>"
        . "</td>"
        . "</tr>");

 print($string); 
```

# android - Android Facebook 登录：应用程序配置不允许给定 URL

> ID：11356813
> 
> 赞同：1
> 
> 时间：2012-07-06T06:17:08.980
> 
> 标签：android, facebook, login

我正在开发一个与 Facebook 集成的 Android 应用程序。从我的模拟器进行测试时，我的应用程序重定向到浏览器并打开 Facebook 登录，但出现以下错误：

```
Invalid Argument
Given URL is not allowed by the Application configuration 
```

登录时，它会尝试访问 URL **fbconnect://success#access_token=AAEZB4..** 但失败了。

谁能告诉我如何解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T07:33:27.880

您是否在 facebook 开发者页面中为您的应用程序生成了访问令牌？

使用本教程：[http ://www.androidhive.info/2012/03/android-facebook-connect-tutorial/](http://www.androidhive.info/2012/03/android-facebook-connect-tutorial/)

# jquery - How do I adjust the mobile resolution in jquery mobile multipage layout?

> ID：11356817
> 
> 赞同：1
> 
> 时间：2012-07-06T06:17:34.760
> 
> 标签：jquery, mobile, frameworks, screen, resolution

I am trying to use multipage layout using jquery mobile framework, the content(HTML form) fits perfectly in mobile screen. But when I use multipage layout, the entire page block shrinks.My page includes 2 data-role pages(page blocks). It works fine in system browser, when i access the link in mobile internal browser(Samsung Note used for testing) it shrinks.This happens when i use multipage layout.

```
<!------Page One Starts here------>
<div data-role="page" id="chooseRecipients">

    <div data-role="header" data-position="">
        <table width="100%" border="0">
              <tr>
                <td align="left" d><img src="images/xxxxx.png" ></td>
                <td align="right">
                    <a href="index.html" rel="external"  ><img src="images/home.png" border="0" ></a>
                    <a href="#"><img src="images/close.png" border="0" ></a>
                </td>
              </tr>
        </table>
    </div>
    <!-- /body-b -->

        <br/>
        <div class="head-bar" style="z-index:1;">
             <div class="icon"><span class="tag-right">Your selection </span><img src="images/xxxx.png" align="absmiddle" style="padding-bottom:10px;z-index:10"></div>
        </div>

        <div class="ui-body ui-body-c">

            <div data-role="fieldcontain">
            <label for="select-choice-a" class="select">Select department</label>

            <select name="select-choice-a" id="select-choice-a" data-native-menu="false">
                <option>Select</option>
                <option value="standard">HR</option>
                <option value="rush">Finance</option>
                <option value="express">IT</option>
                <option value="overnight">Accounts</option>
            </select>

          </div>

            <div data-role="fieldcontain">
            <label for="recipientBy" class="select">Select Recipient by</label>

            <select name="recipientBy" id="recipientBy" data-native-menu="false">
                <option>Select</option>
                <option value="standard">Name</option>
                <option value="rush">Emp Id</option>
                <option value="express">Email</option>
                <option value="overnight">Contact no</option>
            </select>

          </div>

            <div data-role="fieldcontain">

             <input type="text" name="searchValue" id="searchValue" placeholder="Search value"  />
            </div>

            <div data-role="fieldcontain">
             <label for="recipientData">Recipients Details</label>
            <table width="100%" id="recipientData" rules="all" border="1px" cellpadding="5px;">
                <tr>
                    <td><button data-icon="delete" data-iconpos="notext"></button></td>
                    <td>Rakesh Rai,</td>
                    <td>B1306</td>
                </tr>
                 <tr>
                    <td><button data-icon="delete" data-iconpos="notext"></button></td>
                    <td>Vasanth Raj,</td>
                    <td>B1287</td>
                </tr>
            </table>
           <span style="font-size:10px;font-style:italic"> some content</span>
            </div>

       </div><!-- /body-c -->

         <div data-role="footer" class="ui-bar">
            <a href="#recognise" data-icon="arrow-l" data-transition="flip">Back</a>
            <a href="#addCitation" data-icon="arrow-r" data-transition="flip" style="float:right">Next</a>
        </div>
</div>

<!------Page One Ends here------>
<!------Page Two Starts here------>

<div data-role="page" id="addCitation">

    <div data-role="header" data-position="">
        <table width="100%" border="0">
              <tr>
                <td align="left" d><img src="images/xxxx.png" ></td>
                <td align="right">
                    <a href="index.html" rel="external"  ><img src="images/home.png" border="0" ></a>
                    <a href="#"><img src="images/close.png" border="0" ></a>
                </td>
              </tr>
        </table>
    </div>
    <!-- /body-b -->

        <br/>
        <div class="head-bar">
             <div class="icon"><span>some content</span></div>
        </div>

        <div class="ui-body ui-body-c">

            <div data-role="fieldcontain">
            <table id="recipientData" rules="all" border="1px" cellpadding="5px;">
                <tr>
                    <td>Rakesh Rai,</td>
                    <td>B1306</td>
                </tr>
                 <tr>
                    <td>Vasanth Raj,</td>
                    <td>B1287</td>
                </tr>
            </table>

          </div>

            <div data-role="fieldcontain">
             <label for="citation">Citation</label>
           <textarea name="textarea" id="citation"></textarea>
           <span style="font-size:10px;font-style:italic">some content</span>
            </div>

       </div><!-- /body-c -->

         <div data-role="footer" class="ui-bar">
<a href="#chooseRecipients" data-icon="arrow-l" data-transition="flip">Back</a>
<a href="#informColleagues" data-icon="arrow-r"  data-transition="flip"   style="float:right">Next</a>
</div>
</div>
<!------Page Two Starts here------>
 </body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T23:17:10.213

不要忘记在头部添加以下标签：

```
<meta name="viewport" content="width=device-width, initial-scale=1> 
```

请参阅：http: [//jquerymobile.com/demos/1.1.1/docs/pages/page-anatomy.html](http://jquerymobile.com/demos/1.1.1/docs/pages/page-anatomy.html)

# shell - 基于不仅仅是第一个字符的字符串的shell制表符补全？

> ID：11356819
> 
> 赞同：1
> 
> 时间：2012-07-06T06:17:55.360
> 
> 标签：shell, character, tab-completion

是否有任何 shell 支持基于不仅仅是第一个字符的字符串的制表符补全？

例如，假设我有分支`add_page_to_site`，当我这样做时`git checkout si[TAB]`，它会扩展为`git checkout add_page_to_site`.

有没有支持这个的shell？zsh？鱼？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T16:19:26.287

这称为 bash 完成。它是大多数发行版上的一个软件包。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T05:05:25.590

好像没有——真可惜=）

# android - ListView 带有标签、消息、名称和如何在列表下方添加按钮

> ID：11356821
> 
> 赞同：0
> 
> 时间：2012-07-06T06:18:08.470
> 
> 标签：android

我需要创建一个

> 列表显示

列表的每个项目应包含三个字段

1-标签

2-消息

3-名称

如何做到这一点，我不知道。

有什么好的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T06:38:47.923

使用自定义列表视图执行此操作，并使用下面的自定义列表视图参考​​链接。

[自定义列表视图 1](http://mobile.dzone.com/news/custom-listview-android)

[自定义列表视图 2](http://www.softwarepassion.com/android-series-custom-listview-items-and-adapters/)

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-07-06T06:21:15.753

创建一个列表项布局 xml 并使用标签、消息和名称对其进行设计。在适配器中使用 xml。使用列表视图中的适配器作为`myListView.setAdapter(adapter);`

# c# - 使用 Aquiles 将数据插入 cassandra

> ID：11356822
> 
> 赞同：0
> 
> 时间：2012-07-06T06:18:10.253
> 
> 标签：c#, cassandra, aquiles

我从网上得到了一个用于插入的示例代码：

1.  在下面的行中，应该`"Cassandra1"`放在`web.config`? 如果是的话是什么？

    ```
    ICluster cluster = AquilesHelper.RetrieveCluster("Cassandra1"); 
    ```

2.  在下面的代码中，什么是`CassandraClient`？是一堂课吗？课堂上应该有什么`CassandraClient`？

    ```
    cluster.Execute(new ExecutionBlock(delegate(CassandraClient client)
    {
      client.insert(key, columnParent, column, ConsistencyLevel.ONE);
    }), keyspace); 
    ```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T20:56:01.583

您的第一个问题的答案可以在[这里](http://aquiles.codeplex.com/wikipage?title=Aquiles.Configuration&referringTitle=Documentation)找到。

快速阅读源代码会发现 DefaultClient.cs 中的这种类型别名：

```
using CassandraClient = Apache.Cassandra.Cassandra.Client; 
```

`CassandraClient`的一个实例也是如此`Apache.Cassandra.Cassandra.Client`，它是 Thrift C# 代码生成器生成的客户端。

# mysql - What's the difference between MySQL bit vs binary?

> ID：11356833
> 
> 赞同：3
> 
> 时间：2012-07-06T06:18:53.197
> 
> 标签：mysql

We can store binary values using either [`binary`](http://dev.mysql.com/doc/refman/5.0/en/binary-varbinary.html) or [`bit`](http://dev.mysql.com/doc/refman/5.0/en/bit-field-literals.html) (up to 64 bits).

What is the difference between using `binary(n)` vs using `bit(m)` (where `n` = 8 × `m`)?

Are they recognized as the **same thing** by MySQL?

([Assuming using MySQL >= 5.0.3.](https://stackoverflow.com/a/290262/632951))

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T07:16:32.490

您可以根据需要使用 BIT 或 BINARY 存储位。BIT 数据类型在逻辑运算中可能更有用。

存储上有一个小的区别：

*   BINARY(M) 需要确切的字节数 - M
*   BIT 类型的长度可能会有所不同，请在此处找到更多信息 -[数据类型存储要求](http://dev.mysql.com/doc/refman/5.5/en/storage-requirements.html)。

# php - 使用php连接mongodb

> ID：11356834
> 
> 赞同：7
> 
> 时间：2012-07-06T06:18:59.127
> 
> 标签：php, mongodb

如果密码`@`在 mongodb connect mongodb://[username:password@]host1[:port1][,host2[:port2:],...]/db 假设`username='abc'`并且`password='abc@123'` 在 php 中我们创建 mongo db 实例

```
$m = new Mongo('mongodb://[abc:abc@123@]localhost/abc'); 
```

然后它给出这样的错误

> 致命错误：未捕获的异常“MongoConnectionException”，消息“无法获取 123@]localhost 的主机信息”

那么如何解决这类问题..

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-06T06:26:39.760

## 选项1

通过第二个参数将凭据传递给[`Mongo`构造函数](http://www.php.net/manual/en/mongo.construct.php)

```
$db = new Mongo('mongodb://localhost', array(
    'username' => 'abc',
    'password' => 'abc@123',
    'db'       => 'abc'
)); 
```

## 选项 2

使用[`MongoDB::authenticate()`](http://www.php.net/manual/en/mongodb.authenticate.php)方法

```
$m = new Mongo();
$db = $m->abc;

$db->authenticate('abc', 'abc@123'); 
```

记住...

> 这种方法有一个主要缺点：如果连接被断开然后重新连接，新连接将无法通过身份验证。如果您使用 URI 格式，PHP 驱动程序将在建立新连接时自动对用户进行身份验证。

# 2014 更新

`Mongo`现在不推荐直接实例化。建议使用`MongoClient`与上述相同的参数。例如

```
$m = new MongoClient('mongodb://localhost', [
    'username' => 'abc',
    'password' => 'abc@123',
    'db'       => 'abc'
]); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2018-06-27T06:57:54.067

**2019 更新**

我在 ubuntu 16.04 上使用了 php 7.0 版。这是解决连接问题的详细信息。（跳过您已经完成的部分）首先我手动安装了 mongodb，然后为它安装了 mongodb-php 驱动程序。

1) 安装 mongo 数据库。输入以下命令：

```
$ sudo apt-key adv --keyserver hkp://keyserver.ubuntu.com:80 --recv EA312927

$ echo "deb http://repo.mongodb.org/apt/ubuntu xenial/mongodb-org/3.2 multiverse" | sudo tee /etc/apt/sources.list.d/mongodb-org-3.2.list

$ sudo apt-get update

$ sudo apt-get install -y mongodb-org 
```

为了正确启动Mongdb作为服务，即在系统启动时自动启动Mongodb，请按照以下步骤操作：

通过输入以下命令在 /etc/systemd/system/ 中创建文件 mongodb.service：

```
$ sudo nano /etc/systemd/system/mongodb.service 
```

在其中粘贴以下内容：

```
[Unit]
Description=High-performance, schema-free document-oriented database
After=network.target

[Service]
User=mongodb
ExecStart=/usr/bin/mongod --quiet --config /etc/mongod.conf

[Install]
WantedBy=multi-user.target 
```

然后输入以下命令：

```
$ sudo systemctl start mongodb

$ sudo systemctl enable mongodb 
```

2）安装mongo-php驱动：

```
$ sudo pecl install mongodb 
```

此外，您可能会收到错误：找不到 phpize。Phpize 是一个用于创建构建环境的命令。此错误可能出现在安装任何 pecl 扩展时。要解决找不到 phpize 命令的问题，用户必须安装 php5-dev 包。要安装它，请输入命令：

```
 $ sudo apt-get install php7.0-dev 
```

然后在 /etc/php/7.0/apache2 目录下的 php.ini 文件中，添加 mongo db 扩展名：

```
$ sudo nano /etc/php/7.0/apache2/php.ini 
```

在文件中添加以下行：

扩展 = mongodb.so;

（你知道，文件 mongodb.so 的确切位置在 /usr/lib/php/20151012/mongodb.so 中。）

因此，mongo db 与其驱动程序一起安装。

3) 现在请记住，mongo-php 类已更改。网络中的大多数可用资源都使用已被取代的旧类提供解决方案。以下是您可以参考的链接：

[http://php.net/manual/en/set.mongodb.php](http://php.net/manual/en/set.mongodb.php)

[http://zetcode.com/db/mongodbphp/](http://zetcode.com/db/mongodbphp/)

以下是一些基本数据库操作的命令：

```
$mng = new MongoDB\Driver\Manager(); // Driver Object created 
```

要将数据插入数据库：

```
$bulk = new MongoDB\Driver\BulkWrite;

$doc = ["_id" => new MongoDB\BSON\ObjectID, "data" => $someData, "info" => $someInfo];

$bulk->insert($doc);

$mng->executeBulkWrite('dbName.collectionName', $bulk); 
```

对于获取数据：

```
$query = new MongoDB\Driver\Query([]); 

$rows = $mng->executeQuery("dbName.collectionName", $query);

foreach ($rows as $row) 
    {
         echo "$row->data - $row->info\n";
    } 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-11-22T12:53:54.827

使用**新的 Mongo();** 会产生问题

“警告：实例化此类将发出 E_DEPRECATED 警告，并关闭已确认的写入。” - php.com

使用 MongoClient() 安装

```
$m = new MongoClient("mongodb://testUser:testPass@localhost:myportnumber"); 
```

# javascript - 将 Jquery 转换为 Javascript

> ID：11356836
> 
> 赞同：1
> 
> 时间：2012-07-06T06:19:07.910
> 
> 标签：javascript, jquery

对不起，我的 JQuery 很差。

我得到了一个代码来满足我的要求，那就是 Jquery。任何人都可以将它转换成普通的javascript

```
$(window).scroll(function() {
    var scrollTop = $(window).scrollTop();
$("#mybox").css("top", scrollTop + "px");
}); 
```

CSS部分

```
#mybox
{
    position:absolute;
    width:200px;
    height:50px;
    background-color:red;
} 
```

我正在使用它在页面底部显示一个浮动链接，即使用户浏览了页面

```
<script type="text/javascript">
window.addEventListener('scroll', function() {
    var scrollTop = window.pageYOffset;
    document.getElementById('worklist').style.top = scrollTop;
});
</script>
<div id="worklist" style="position: absolute; bottom: 5px; right: 50px;">
 <a href="LinkHere"><h2>Work List</h2></a>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T12:23:48.930

我猜也许这就是你想要的：

[http://jsfiddle.net/fuJbh/](http://jsfiddle.net/fuJbh/)

```
window.addEventListener('scroll', function() {
    var scrollTop = window.pageYOffset;
    document.getElementById('worklist').style.bottom = -scrollTop + "px";
});​ 
```

这将使您的链接保持在页面*底部*。

希望这可以帮助！

安迪。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T06:36:12.387

在我的脑海中，是这样的：

```
window.addEventListener('scroll', function() {
    var scrollTop = window.pageYOffset;
    document.getElementById('mybox').style.top = scrollTop;
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T06:59:36.253

获取窗口滚动事件的等效 JavaScript 是

window.onscroll = 函数（）

{

// 这里写下你滚动时想要做什么。

}

# applet - starsign smartcard : Invalid Length 6c XX error

> ID：11356838
> 
> 赞同：1
> 
> 时间：2012-07-06T06:19:10.437
> 
> 标签：applet, smartcard, javacard

Developing a desktop application for accessing the java card applet in G & D starsign smartcard.

Getting Invalid Le "6C XX" error For each APDU sent.Found that appending the "XX"(which is Le) with the APDU command and resending it is the possible solution.But i need a direct solution which solves this issue without resending the APDU.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T20:31:10.507

当然，您可以将 XX 附加到第一个命令，因此卡应该没有理由抱怨。但这要求您知道即将到来的数据的确切长度。如果不确定，请尝试附加 00。这应该适用于所有返回数据的命令（对于没有响应的命令，它可能会导致 67 00），只要不涉及扩展 APDU（允许超过 256 字节的结果数据）。

`Le = 00h`表示Ne，*最大*预期响应大小为256。因此，发送`Le = 00h`应该适用于任何*预期返回响应的*命令。如果它不起作用，请检查芯片供应商的文档以了解您可能期望的确切响应大小，并改用精确`Le`值。

# java - (Very) Simple Java 3D graphics library?

> ID：11356839
> 
> 赞同：2
> 
> 时间：2012-07-06T06:19:12.333
> 
> 标签：java, 3d

I need a very simple 3D graphics library for a project that I'm working on.

All I need to be able to do is accept a set models in the from of rectangular prisms (boxes) and render them from at least one angle. Don't need any highfalutin effects: just draw some boxes in 3D.

Any particular suggestions?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T06:25:10.060

您是否尝试过查看[Java 3D](http://java3d.java.net/binary-builds.html/)？根据[维基百科](http://en.wikipedia.org/wiki/Java_3D)：

> Java 3D 是用于 Java 平台的基于场景图的 3D 应用程序编程接口 (API)。它运行在 OpenGL 或 Direct3D 之上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T06:26:22.697

您可以使用 Java 3D API [http://java.sun.com/developer/onlineTraining/java3d/创建基本的 3D 对象](http://java.sun.com/developer/onlineTraining/java3d/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-26T08:43:10.963

我最近使用纯 Java（没有 Java3D 或 OpenGL）编写了一个 3D 图表库（[Orson Charts](http://www.object-refinery.com/orsoncharts/)），我发现这本书很有帮助：

> 面向 Java 程序员的计算机图形学（第 2 期，第 7 期）作者：Ammeraal, Leen - Zhang, Kang [平装本 (2007)]

它通过工作示例解释了数学，以构建一个相当通用（和纯 Java）的 3D 图形引擎。对于和 OP 有相同要求的人，我推荐这本书。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-09-30T12:01:23.837

你检查过 Abe3D 吗？它是用纯 Java 制作的，并且是开源的。如果您有兴趣，这里是 GitHub 页面： [https ://github.com/andrewcisco/Abe3D](https://github.com/andrewcisco/Abe3D)

# jquery - jquery $.post not working in the load callback function?

> ID：11356840
> 
> 赞同：3
> 
> 时间：2012-07-06T06:19:12.910
> 
> 标签：jquery, ajax, post

here is mycode

```
$('#edit-popout-warpper').load(url,function(){
  //the url contain the editnameform
            $('#editnameform').submit(function(e){
                e.preventDefault(); 
                var $form = $( this ),
                    term = $form.find( 'input[name="mymoname"]' ).val(),
                    urll = $form.attr( 'action' );
                $.post(urll,{mymoname:term});

            })
        })
        return false; 
```

after i use jquery ajax load method the $.post is not working ,its not sending the post request any idea why?

i finally get it work only i used $.ajax like this

```
 $.ajax({
         type:'POST',
         url:urll,
         data:{mymoname:term}
       }) 
```

i don't know why. but at lest it worked.so anyone knows why the $,post not working please let me know thanx

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T06:31:46.533

你错过了 post 回调函数。

```
$('#editnameform').submit(function (e) {
    e.preventDefault();
    var $form = $(this),
        term = $form.find('input[name="mymoname"]').val(),
        urll = $form.attr('action');
    $.post(urll, {
        mymoname: term
    }, function(data) {
       console.log(data);
    });
}); 
```

# php - getColumnMeta does not return correct field type

> ID：11356842
> 
> 赞同：4
> 
> 时间：2012-07-06T06:19:26.030
> 
> 标签：php, pdo

I have innodb table with the following scheme, running MySQL 5.5:

```
`id` int(10) unsigned NOT NULL AUTO_INCREMENT,
`category_id` int(10) unsigned DEFAULT NULL,
`uuid` varchar(36) NOT NULL, 
```

I am trying to use [PDOStatement::getColumnMeta](http://php.net/manual/en/pdostatement.getcolumnmeta.php) to get `id` column type, but it gives wrong data:

```
array(3) {
  [0]=>
  array(7) {
    ["native_type"]=>
    string(4) "LONG"
    ["flags"]=>
    array(2) {
      [0]=>
      string(8) "not_null"
      [1]=>
      string(11) "primary_key"
    }
    ["table"]=>
    string(7) "entries"
    ["name"]=>
    string(2) "id"
    ["len"]=>
    int(10)
    ["precision"]=>
    int(0)
    ["pdo_type"]=>
    int(2)
  }
  [1]=>
  array(7) {
    ["native_type"]=>
    string(4) "LONG"
    ["flags"]=>
    array(1) {
      [0]=>
      string(12) "multiple_key"
    }
    ["table"]=>
    string(7) "entries"
    ["name"]=>
    string(11) "category_id"
    ["len"]=>
    int(10)
    ["precision"]=>
    int(0)
    ["pdo_type"]=>
    int(2)
  }
  [2]=>
  array(7) {
    ["native_type"]=>
    string(10) "VAR_STRING"
    ["flags"]=>
    array(1) {
      [0]=>
      string(8) "not_null"
    }
    ["table"]=>
    string(7) "entries"
    ["name"]=>
    string(4) "uuid"
    ["len"]=>
    int(108)
    ["precision"]=>
    int(0)
    ["pdo_type"]=>
    int(2)
  }
} 
```

PHP code as requested:

```
$select = $db
    ->query("
    SELECT
        `id`,
        `category_id`,
        `uuid`
    FROM
        `entries`
    LIMIT 1;
    ;
    ");

$meta   = [];

for($i = 0, $j = $select->columnCount(); $i < $j; $i++)
{
    $meta[] = $select->getColumnMeta($i);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-13T03:04:27.570

我不会使用此函数来确定列的类型。文档指出这是实验性的，体操根本不值得。我会使用：

```
SHOW COLUMNS FROM [table] 
```

这将为您提供结果中的纯 MySQL 类型。它有点不那么优雅。但更可靠。

# java - OUT OF MEMORY in hibernate

> ID：11356851
> 
> 赞同：0
> 
> 时间：2012-07-06T06:20:05.460
> 
> 标签：java, hibernate

Hi I have created many to one relationship in hibernate. Following is the code for that.

there are thousands of records present in B table which is link to single record of table A. When i used getBList() method it will returns thousands of record and JAVA goes OUT OF MEMORY. So how can i solve this problem.

```
@Entity
@Table(name = "A")
public class A {

    private int Id;
    private String aName;
    private List<MksReleaseInfo> bList;

    @Id
    @GeneratedValue(strategy = GenerationType.AUTO)
    @Column(name = "id")
    public int getId() {
        return releaseId;
    }

    public void setId(final int Id) {
        this.Id = Id;
    }

    @Column(name = "aname", unique = true)
    public String getAName() {
        return aName;
    }

    public void setAName(final String aName) {
        this.aName = aName;
    }
    @OneToMany(mappedBy = "aName")
    public List<MksReleaseInfo> getBList() {
        return bList;
    }

    public void setBList(final List<B> bList) {
        this.bList = bList;
    }
}   

@Entity
@Table(name = "B")
public class B {

    private int bIndex;
    private int bpriority;
    private A aName;

    @Id
    @GeneratedValue(strategy = GenerationType.AUTO)
    @Column(name = "id")
    protected int getBIndex() {
        return mksReleaseInfoIndex;
    }

    protected void setBIndex(final int bIndex) {
        this.bIndex = bIndex;
    }

    @Column(name = "priority")
    public int getBPriority() {
        return bpriority;
    }

    public void setBPriority(final int bpriority) {
        this.bpriority = bpriority;
    }

    @ManyToOne
    @JoinColumn(name = "Id")
    public A getAName() {
        return aName;
    }

    public void setAName(final A aName) {
        this.aName = aName;
    }
} 
```

after all the comments i have implemented the following code. but again it gives OUT OF MEMORY. Should i have to flush the memory explicitly and how?

```
public List<B> getList(String name, int offset, int limit) throws DAOException {
        try {
            String hql = "from B where name = :name";
            begin();
            Query query = getSession().createQuery(hql);
            query.setString("name", name);

            if(offset > 0){
                query.setFirstResult(offset);
            }

            if(limit > 0){
                query.setMaxResults(limit);
                query.setFetchSize(limit);
            }
            commit();
            return query.list();
        } catch (HibernateException e) {
            rollback(); 
        }
    }

    public Long countB(String name) throws DAOException {
        try {
            String hql = "select count(*) from B where name = :name";
            begin();
            Query query = getSession().createQuery(hql);
            query.setString("name", name);
            commit();
            return (Long)query.uniqueResult();
        } catch (HibernateException e) {
            rollback();
        }
    }

    long count = countB(name);
    int counter = (int) (count / 200);
    if(count%200 > 0){
        counter++;
    }
    for(int j = 0;j<counter;j++){
        lists = getList(name, j*200, 200);

        for(B count1 : lists){
            System.out.println(count1);
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T06:37:06.000

您可以引入 a`DAO`以便以分页方式从`B`给定 对象中检索记录。`A`

例如：

```
public interface BDao {

   Page findByA(A a, PageRequest pageRequest);

} 
```

也许您可以从[Spring Data中采用的方法中获得一个想法](http://static.springsource.org/spring-data/data-jpa/docs/current/reference/html/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T06:37:25.863

设置`MaxResults`数据源的属性，它将限制您获取的记录数。

此外，您可以使用`-Xmx256m`. 这会将最大堆分配大小设置为 256MB。您可以根据需要进行设置。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-06T08:52:43.237

为此，您可以使用带分页的查询。在`Query`课堂上，您可以找到可以帮助您遍历记录的方法`setFirstResult`。`setMaxResults`如果您需要加载所有 B 对象并存储它们，您可以通过设置`-Xmx`选项调整 java 的内存设置。您也可以尝试声明某种简化的 B 类（例如`ReducedB`），它只包含必填字段，并使用带有转换的迭代`B`来`ReducedB`减少内存使用。

你也可以检查[这个](https://stackoverflow.com/questions/3783301/jpa-hibernate-big-collections)问题。我认为它与您想要的很接近。

PS 最终解决方案将取决于您要解决的特定问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-11-09T19:37:44.720

我遇到过同样的问题。我查看了我的代码和服务器空间，但没有任何帮助。后来我查看了数据并意识到错误放置的数据正在使应用程序使用大量的处理能力。确保您在子类中没有重复数据。

# iphone - 如何获取 iphone 朋友的 Facebook 联系人（电子邮件 ID）

> ID：11356852
> 
> 赞同：1
> 
> 时间：2012-07-06T06:20:05.407
> 
> 标签：iphone, ios, facebook-graph-api

我是 iphone 新手，正在尝试从我的 Facebook 帐户中获取朋友的电子邮件 ID。我需要

将此联系信息保存到我的应用程序中并显示在 UItableview 中。我正在使用图形 api，使用

这能够获取朋友的列表，提供元数据等。但我想获取所有人的联系信息

我添加的朋友。这是我获取好友列表的代码：

```
 FbGraphResponse *fb_graph_response = [fbGraph doGraphGet:@"me/friends" withGetVars:nil];
    NSLog(@"getMeFriendsButtonPressed:  %@", fb_graph_response.htmlResponse); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T06:36:35.660

图 API me/friends 将返回只有朋友的用户 ID 和全名的朋友列表。据我所知，您不可能从 iPhone 应用程序中检索您朋友的电子邮件。

看起来您正在使用旧库，请尝试从 github 下载最新的 FacebookConnect 库。使用起来要简单得多。

# html - Responding to a HTTP Get with an SSE

> ID：11356854
> 
> 赞同：0
> 
> 时间：2012-07-06T06:20:17.607
> 
> 标签：html, node.js, server-sent-events

I am experimenting with HTML5 and node.js. I have tested out Server Sent Events and they worked fine(Refering to [this example](https://github.com/cheeyeo/Server-Sent-Events-with-Node-JS)).

Next I tried replying to a button press with an SSE. On pressing the "Increment" button I pick a number from a text box and pass it to the server using a GET message. The server will then respond with an event containing the incremented number. The eventListener will then update the text box with the received number. I have also added a "Message area" on the HTML page to log messages.

That was the plan. But when I click the button the browser shows a "downloading" operation is in progress in the bottom of the window but it never completes and the result is not updated on the screen nor is the message displayed in the bottom of the page.

The events work fine when i send them at the load of the page. But when I send it in response to a GET message the HTML page doesn't show any response.

Here is the HTML section.

```
<form action="/upload" method="get">
<p>Set the temperature and click on send</p>
<input name="temperature" id="TemperatureBox" type="text" value = "33" />
<button type="submit" onclick="form.action='http://localhost:8888/Increment'">Increment</button> 
```

I have added handlers for messages and for a "temperature event" which will update the Temperature box

```
var source = new EventSource('/events');

source.addEventListener('message', function(e) {
  //code to display message
}, false);

source.addEventListener('TemperatureValueUpdate', function(e) {
        AddLog('TemperatureValueUpdate Listener >> lastEventID: ' + (e.lastEventId || '--') +
               ', e.data: ' + e.data
        + 'Current value of text box: ' +  document.getElementById('TemperatureBox').value);
        document.getElementById('TemperatureBox').value= e.data;

}, false); 
```

In the node.js script i am sending a message and a TemperatureValueUpdate

```
function constructTemperature(response, id, data) {
console.log("Sending Temperature event");
//  response.write('id: ' + (new Date()).toLocaleTimeString()+ '\n');
 // response.write("data: " + 'Teperature event sent '+ '\n\n');

response.write('event: ' + 'TemperatureValueUpdate' + '\n');
response.write('id: ' + id + '\n');
response.write("data: " + data + '\n\n');

console.log("Finished Temperature event"); } 
```

I have also responded to the "/events" URL on the page load with a 200 reply:

```
response.writeHead(200, {'Content-Type': 'text/event-stream','Cache-Control': 'no-cache', 'Connection': 'keep-alive' }); 
```

I have even tried the following

*   Sending a 202/204 response before sending the events
*   sending a response.end() before/after sending the events
*   Sending a 'Content-Type': 'text/event-stream' before each event

But they don't produce the desired result. What am I doing wrong here?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T06:46:55.077

听起来您在提交表单时正在调用constructTemperature() 函数。如果是这种情况，您与 EventSource 的连接不同。因此，您需要将数据存储在服务器上的某个位置返回给客户端，并在源自 EventSource 的请求中调用constructTemperature()。

# c# - C# socket message decompression

> ID：11356855
> 
> 赞同：4
> 
> 时间：2012-07-06T06:20:29.407
> 
> 标签：c#, sockets, dll, byte

i am new to the C# world. I am using it for fast deployment of a solution to capture a live feed which comes in this form (curly brackets for clarity): {abcde}{CompressedMessage}, where {abcde} constitutes 5 characters indicating the length of the compressed message. The CompressedMessage is compressed using XCeedZip.dll, and needs to be uncompressed using the dll's uncompress method. The uncompress method returns an integer value indicating success or failure (of various sorts, eg no license failure, uncompression failure etc). I am receiving failure 1003 [http://doc.xceedsoft.com/products/XceedZip/](http://doc.xceedsoft.com/products/XceedZip/) for reference of the return values from the uncompress method.

```
while(true){    
byte[] receiveByte = new byte[1000];
sock.Receive(receiveByte);
string strData =System.Text.Encoding.ASCII.GetString(receiveByte,0,receiveByte.Length);
string cMesLen = strData.Substring(0,5); // length of compressed message;
string compressedMessageStr = strData.Substring(5,strData.Length-5);
byte[] compressedBytes = System.Text.Encoding.ASCII.GetBytes(compressedMessageStr);
//instantiating xceedcompression object     
XceedZipLib.XceedCompression obXCC = new XceedZipLib.XceedCompression();
obXCC.License("blah");
// uncompress method reference http://doc.xceedsoft.com/products/XceedZip/
// visual studio displays Uncompress method signature as Uncompress(ref object vaSource, out object vaUncompressed, bool bEndOfData)
object oDest;
object oSource = (object)compressedBytes;
int status = (int) obXCC.Uncompress(ref oSource, out oDest, true);
Console.WriteLine(status); /// prints 1003 http://doc.xceedsoft.com/products/XceedZip/
} 
```

So basically my question boils down to invocation of the uncompress method and correct way of passing the parameters. I am in unfamiliar territory in the .net world, so i won't be surprised if the question is really simplistic.

Thanks for replies ..

##################################### updates

I am now doing the following:

```
int iter = 1;
int bufSize = 1024;
byte[] receiveByte = new byte[bufSize];
while (true){
  sock.Receive(receiveByte);
  //fetch compressed message length;
  int cMesLen = Convert.ToInt32(System.Text.Encoding.ASCII.GetString(receiveByte,0,5));
  byte[] cMessageByte = new byte[cMesLen];
  if (i==1){
    if (cMesLen < bufSize){
      for (int i = 5; i < 5+cMesLen; ++i){
        cMessageByte[i-5] = b[i];
      }
    }
  }
  XceedZipLib.XceedCompression obXCC = new XceedZipLib.XceedCompression();
  obXCC.License("blah");
  object oDest;
  object oSource = (object) cMessageByte;
  int status = (int) obXCC.Uncompress(ref oSource, out oDest, true);
  if (iter==1){
    byte[] testByte = objectToByteArray(oDest);
    Console.WriteLine(System.Text.Encoding.ASCII.GetString(testByte,0,testByte.Length));
  }      
}

private byte[] objectToByteArray(Object obj){
  if (obj==null){
    return null;
  }
  BinaryFormatter bf = new BinaryFormatter();
  MemoryStream ms = new MemoryStream();
  bf.Serialize(ms,obj);
  return ms.ToArray();
} 
```

Problem is the testByte writeline command prints out gibberish. Any suggestions on how to move forward on this ? the status variable of uncompress is good and equal to 0 now.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T06:33:00.867

第一个错误始终是没有查看 ; 的返回值`Receive`。您不知道您刚刚阅读了多少数据，也不知道它是否构成了整个消息。

在我看来，您可能通过将整个数据视为 ASCII 来破坏消息有效负载。`GetString`与其对整个缓冲区执行 a ，不如`GetString` **指定仅使用 5 bytes**。

正确流程：

*   继续调用`Receive`（缓冲数据，或增加偏移量并减少计数），直到您至少有 5 个字节
*   处理这 5 个字节以获得有效负载长度
*   继续调用`Receive`（缓冲数据，或增加偏移量并减少计数），直到您至少具有有效负载长度
*   无需转换为/从 ASCII 即可处理有效负载

# jquery - Bootstrap divs narrowing after jQuery .load()

> ID：11356856
> 
> 赞同：0
> 
> 时间：2012-07-06T06:20:33.700
> 
> 标签：jquery, django, twitter-bootstrap

I have a bit of a pickle here. Whenever I update the contents of my page the first time with a jquery .load() the new divs that are created are smaller in width, and there ends up being empty space on the right side of the page. Subsequent refreshes keep the same width, it's just the first one that messes it up. I've tried a few different things with css and messing with the layout, but I'm out of ideas. Here's my html:

```
<div class="wrapper"> 
  <div class="navbar"> ... </div>
  <div class="container-fluid">
  <div class="row-fluid">
    <div class="span2">...</div>
    <div id="product_window" class="span10">
      <div class="row-fluid">
        <div class="span4">...</div>
        <div class="span4">...</div>
        <div class="span4">...</div>
      </div><!-- end inner-row -->
    </div><!-- end span10 -->
  </div><!-- end row -->
</div><!-- end container --> 
```

# android - 从 DDMS 中删除文件夹

> ID：11356857
> 
> 赞同：8
> 
> 时间：2012-07-06T06:20:39.803
> 
> 标签：android, eclipse, cmd, ddms

我需要从`/mnt/sdcard/new`.

我正在查看 Eclipse 中带有 DDMS 的文件夹。

我们如何删除特定文件夹。

提前致谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-14T09:35:39.623

您可以使用`rm`带`-r`参数的命令来删除非空文件夹。

```
C:\> adb shell
$ rm -r /mnt/sdcard/Android/data/mydirectory/ 
```

注意：`rmdir`只能删除非空文件夹。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-06T06:27:40.627

```
C:\>adb shell
$ rmdir /mnt/sdcard/Android/data/mydirectory/ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-06T06:32:43.990

请使用以下方法从 sdcard 中删除文件夹

```
// Deletes all files and subdirectories under dir.
// Returns true if all deletions were successful.
// If a deletion fails, the method stops attempting to delete and returns false.
public static boolean deleteDir(File dir) {
    if (dir.isDirectory()) {
        String[] children = dir.list();
        for (int i=0; i<children.length; i++) {
            boolean success = deleteDir(new File(dir, children[i]));
            if (!success) {
                return false;
            }
        }
    }

    // The directory is now empty so delete it
    return dir.delete();
} 
```

为调用 deleteDir() 方法编写下面的代码

```
// Delete an empty directory
boolean success = (new File("directorypath")).delete();
if (!success) {
    // Deletion failed Message
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-06-16T08:39:47.247

```
boolean success = (
new File("/data/data/yourpackege/New Folder")).delete();

if (!success) {
         // Deletion failed Message
Toast.makeText(getApplicationContext(),"not deleted : ", Toast.LENGTH_LONG).show();

}else{
Toast.makeText(getApplicationContext(),"  deleted : ", Toast.LENGTH_LONG).show();

} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-07-04T12:12:46.577

如果你想首先从 ddms 中删除任何文件夹，你必须通过 cmd 进入 adb shell 简单地转到你的 sdk\platform-tools\ 所在的路径，那里有你的 adb shell

要运行删除文件夹的命令，您必须首先通过简单地键入来根您的设备

```
adb root 
```

然后你可以使用删除文件夹

```
rmdir /mnt/sdcard/folder 
```

删除包含文件的文件夹

```
rm -r /mnt/sdcard/folder 
```

希望我的回答能帮助任何人（初学者）

# c++ - 服务器的非阻塞 TCP 套接字需要时间来传输内容

> ID：11356860
> 
> 赞同：0
> 
> 时间：2012-07-06T06:21:03.553
> 
> 标签：c++, sockets, select, send, nonblocking

**问题** - 我正在处理流服务器并使用以下方法创建了一个非阻塞套接字：

```
flag=fcntl(m_fd,F_GETFL);
flag|=O_NONBLOCK;
fcntl(m_fd,F_SETFL,flag); 
```

然后服务器使用代码发送媒体文件内容：

```
bool SendData(const char *pData,long nSize)
{
    int fd=m_pSock->get_fd();
    fd_set write_flag;
    while(1)
    {   
        FD_ZERO(&write_flag);
        FD_SET(fd,&write_flag);
        struct timeval tout;
        tout.tv_sec=0;
        tout.tv_usec=500000;

        int res=select(fd+1,0,&write_flag,0,&tout);
        if(-1==res)
        {
            print("select() failure\n");
            return false;
        }
        if(1==res)
        {
            unsigned long sndLen=0;
            if(!m_pSock->send(pData,nSize,&sndLen))
            {
                print(socket send() failure\n");
                return false;
            }
            nSize-=sndLen;
            if(!nSize)
            return true;    //everything is sent
        }
    }
} 
```

使用上面的代码，我正在流式传输一个*200*秒的音频文件，我希望服务器应该使用完整的 n/w 可用带宽（油门关闭）在*2-3 秒内*传输它，但问题是服务器需要*199~200 秒*来流式传输完整的内容。在调试时，我评论了

> m_pSock->发送（）

部分 & 试图在本地转储文件。转储文件需要*1~2 秒。*

**问题** - 如果我使用的是非阻塞 TCP 套接字，为什么*send()*需要这么多时间？

*   由于数据始终可用，因此*select()*将立即返回*（正如我们在转储文件时看到的那样*）。这是否意味着*send()*受客户端的*recv()影响？*

对此的任何投入都会有所帮助。客户行为不在我们的范围内。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T06:31:44.047

您的客户端可能正在做一些缓冲以避免网络抖动，但它可能仍在实时播放音频文件。因此，文件传输速率与客户端使用数据的速率相匹配。由于是 200 秒的音频文件，因此大约需要 200 秒才能完成传输。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T06:40:49.263

因为 TCP 输出和输入缓冲区可能比音频文件小得多，接收应用程序的读取速度可能会减慢发送速度。

当发送方的 TCP 输出缓冲区和接收方的输入缓冲区都已满时，发送方的 TCP 堆栈无法接收到发送方的任何数据。所以发送将被阻止，直到有空间。

如果接收器读取 TCP 流的速度与播放所需的数据相同。然后传输大约需要 200 秒。或者少一点。

这可以通过在接收端使用应用层缓冲来避免。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T06:44:21.143

问题可能是，如果客户端使用阻塞 TCP，并且正在处理单个线程上的所有数据，而没有缓冲区/队列等一直到文件的“播放器”，那么您的一方将处于非阻塞状态仅在达到 TCP/IP 协议栈缓冲区、NIC 缓冲区等已满时才加快速度。然后，您最终仍然只能以客户端消耗数据的速度发送数据。记住 TCP 是一种可靠的点对点协议。

您的客户端代码在您的测试中来自哪里？它是某人编写的某种简单的测试客户端吗？

# asp.net-web-api - Ninject InSingletonScope 与 Web Api RC

> ID：11356864
> 
> 赞同：17
> 
> 时间：2012-07-06T06:21:14.477
> 
> 标签：asp.net-web-api, ninject

我在使用 Ninject 的 InSingletonScope 与 Web Api RC 绑定时遇到了一些困难。无论我如何创建绑定，看起来 Web Api 可能正在处理范围/生命周期而不是 Ninject。

我尝试了一些关于连接 Ninject 的变体。最常见的与此处的答案相同： [ASP.NET Web API binding with ninject](https://stackoverflow.com/questions/10849132/mvc4-rc-webapi-binding-with-ninject)

我也试过这个版本： [http ://www.peterprovost.org/blog/2012/06/19/adding-ninject-to-web-api/](http://www.peterprovost.org/blog/2012/06/19/adding-ninject-to-web-api/)

在这两者中，我实际上是在创建一个开箱即用的 Web Api 项目，然后按照任一帖子中的描述添加 Ninject 包。最后，我添加了 Resolver 和 Scope 类，例如 StackOverflow 版本：

```
public class NinjectDependencyScope : IDependencyScope
{
    private IResolutionRoot resolver;

    internal NinjectDependencyScope(IResolutionRoot resolver)
    {
        Contract.Assert(resolver != null);

        this.resolver = resolver;
    }

    public void Dispose()
    {
        IDisposable disposable = resolver as IDisposable;
        if (disposable != null)
            disposable.Dispose();

        resolver = null;
    }
    public object GetService(Type serviceType)
    {
        if (resolver == null)
            throw new ObjectDisposedException("this", "This scope has already been disposed");
        return resolver.TryGet(serviceType);
    }

    public IEnumerable<object> GetServices(Type serviceType)
    {
        if (resolver == null)
            throw new ObjectDisposedException("this", "This scope has already been disposed");
        return resolver.GetAll(serviceType);
    }
} 
```

和：

```
 public class NinjectDependencyResolver : NinjectDependencyScope, IDependencyResolver
{
    private IKernel kernel;

    public NinjectDependencyResolver(IKernel kernel)
        : base(kernel)
    {
        this.kernel = kernel;
    }
    public IDependencyScope BeginScope()
    {
        return new NinjectDependencyScope(kernel.BeginBlock());
    }
} 
```

然后，NinjectWebCommon 看起来像这样：

```
using System.Web.Http;
using MvcApplication2.Controllers;

[assembly: WebActivator.PreApplicationStartMethod(typeof(MvcApplication2.App_Start.NinjectWebCommon), "Start")]
[assembly: WebActivator.ApplicationShutdownMethodAttribute(typeof(MvcApplication2.App_Start.NinjectWebCommon), "Stop")]

namespace MvcApplication2.App_Start
{
    using System;
    using System.Web;

    using Microsoft.Web.Infrastructure.DynamicModuleHelper;

    using Ninject;
    using Ninject.Web.Common;

    public static class NinjectWebCommon
    {
        private static readonly Bootstrapper bootstrapper = new Bootstrapper();

        /// <summary>
        /// Starts the application
        /// </summary>
        public static void Start()
        {
            DynamicModuleUtility.RegisterModule(typeof(OnePerRequestHttpModule));
            DynamicModuleUtility.RegisterModule(typeof(NinjectHttpModule));
            bootstrapper.Initialize(CreateKernel);
        }

        /// <summary>
        /// Stops the application.
        /// </summary>
        public static void Stop()
        {
            bootstrapper.ShutDown();
        }

        /// <summary>
        /// Creates the kernel that will manage your application.
        /// </summary>
        /// <returns>The created kernel.</returns>
        private static IKernel CreateKernel()
        {
            var kernel = new StandardKernel();
            kernel.Bind<Func<IKernel>>().ToMethod(ctx => () => new Bootstrapper().Kernel);
            kernel.Bind<IHttpModule>().To<HttpApplicationInitializationHttpModule>();

            // Register Dependencies
            RegisterServices(kernel);

            // Set Web API Resolver
            GlobalConfiguration.Configuration.DependencyResolver = new NinjectDependencyResolver(kernel);

            return kernel;
        }

        /// <summary>
        /// Load your modules or register your services here!
        /// </summary>
        /// <param name="kernel">The kernel.</param>
        private static void RegisterServices(IKernel kernel)
        {
            kernel.Bind<ILogger>().To<Logger>().InSingletonScope();
        }
    }
} 
```

ILogger 和 Logger 对象不做任何事情，但可以说明问题。Logger 执行 Debug.Writeline 以便我可以看到它何时被实例化。页面的每次刷新都表明每次调用都会刷新它，而不是我希望的单例。这是一个使用 Logger 的控制器：

```
public class ValuesController : ApiController
{
    private readonly ILogger _logger;
    public ValuesController(ILogger logger)
    {
        _logger = logger;
        _logger.Log("Logger created at " + System.DateTime.Now.ToLongTimeString());
    }
    // GET api/values
    public IEnumerable<string> Get()
    {
        return new string[] { "value1", "value2" };
    }
    // GET api/values/5
    public string Get(int id)
    {
        return "value";
    }
    // POST api/values
    public void Post(string value)
    {
    }
    // PUT api/values/5
    public void Put(int id, string value)
    {
    }
    // DELETE api/values/5
    public void Delete(int id)
    {
    }
} 
```

当我将跟踪信息放入内核的创建中时，似乎表明内核只创建了一次。所以……我没看到什么？为什么不坚持单例？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-07-06T07:36:07.873

采用

```
public IDependencyScope BeginScope()
{
    return new NinjectDependencyScope(kernel);
} 
```

并且不要将内核丢弃在`NinjectDependencyScope`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T13:12:45.973

@Remo Gloor 当我在 WebAPI 的 InMemoryHost 中运行您的代码并运行集成测试时，一切正常，我确实有单例。如果我**在 VS Cassini Web 服务器**中运行 WebAPI 解决方案，第一次运行成功，当我单击刷新时，我收到异常： **加载 Ninject 组件时出错 ICache 没有在内核的组件容器中注册此类组件。**

**如果我使用BeginBlock**返回旧代码，它在 Cassini 中有效，但 IsSingleton 在集成测试中不再有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-03T14:18:21.450

您可以简单地实现自己的单例，而不是不释放内核（不会调用内部释放）：

```
public static class NinjectSingletonExtension
{
    public static CustomSingletonKernelModel<T> SingletonBind<T>(this IKernel i_KernelInstance)
    {
        return new CustomSingletonKernelModel<T>(i_KernelInstance);
    }
}

public class CustomSingletonKernelModel<T>
{
    private const string k_ConstantInjectionName = "Implementation";
    private readonly IKernel _kernel;
    private T _concreteInstance;

    public CustomSingletonKernelModel(IKernel i_KernelInstance)
    {
        this._kernel = i_KernelInstance;
    }

    public IBindingInNamedWithOrOnSyntax<T> To<TImplement>(TImplement i_Constant = null) where TImplement : class, T
    {
        _kernel.Bind<T>().To<TImplement>().Named(k_ConstantInjectionName);
        var toReturn =
            _kernel.Bind<T>().ToMethod(x =>
                                       {
                                           if (i_Constant != null)
                                           {
                                               return i_Constant;
                                           }

                                           if (_concreteInstance == null)
                                           {
                                               _concreteInstance = _kernel.Get<T>(k_ConstantInjectionName);
                                           }

                                           return _concreteInstance;
                                       }).When(x => true);

        return toReturn;
    }
} 
```

然后只需使用：

```
i_Kernel.SingletonBind<T>().To<TImplement>(); 
```

而不是

```
i_Kernel.Bind<T>().To<TImplement>().InSingletonScope(); 
```

注意：虽然它只对第一个请求很重要，但这个实现不是线程安全的。

# c# - 需要代码解释

> ID：11356867
> 
> 赞同：3
> 
> 时间：2012-07-06T06:21:20.893
> 
> 标签：c#, .net

```
new AutoResetEvent(false).WaitOne(Period); 
```

这段代码的目的是什么？为什么不使用 Thread.Sleep 呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-06T06:23:19.233

是的，那个代码很愚蠢。由于`AutoResetEvent`在`new`这一行中，没有其他任何东西引用相同的`AutoResetEvent`，所以没有任何东西会发出信号。A`Sleep`会更简单。

如果使用*得当*，使用 an`AutoResetEvent`可以让您等待其他东西“打开大门”（假设它尚未打开）或超时。另请注意，每次`WaitOne`成功时门都会自动关闭。

但是，此代码*没有*正确使用它，并且不允许这样做。

# css - magento 将查询字符串参数附加到 CSS 和 JS

> ID：11356869
> 
> 赞同：6
> 
> 时间：2012-07-06T06:21:33.563
> 
> 标签：css, xml, magento, query-string

如何将查询字符串参数附加到 HTML 中包含的每个 CSS 和 JavaScript 以清除 CSS 和 JavaScript 缓存。我试过了

> `<action method="addCss"><stylesheet>css/style.css?123</stylesheet></action>`

和

> `<action method="addItem"><type>skin_css</type><name>css/styles.css?123</name><params/></action>`

. 但每次它返回一个基本包，如

> `http://www.example.com/skin/frontend/base/default/styles.css?123`

不是我的自定义主题目录。

如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-10-17T23:48:26.300

这个免费的扩展应该做你想做的事 - 对我来说非常适合：

[https://github.com/jreinke/magento-suffix-static-files](https://github.com/jreinke/magento-suffix-static-files)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T16:37:41.920

当您通过 xml 布局更新添加 css 文件时，`addCss`动作（实际上只是调用`addItem`类型设置为的动作`skin_css`）正在寻找文件路径，而不是 url。虽然查询字符串在 url 中有效，但它们不在文件名中。Magento 将其视为无效参数，因此感到困惑并回退到`base/default`.

我可以为此想到2个解决方案。不幸的是，两者都是一种hackey。

1.  将 css 文件移动到基​​本默认主题。这可行，但它取决于在其他版本的 magento 中可能不会保持不变的后备。

2.  而不是直接插入css文件，而是用html代码创建一个phtml模板文件来插入css文件。然后在布局 xml 中插入一个`core/template`带有该新模板文件的块作为其模板。我已经在我开发的网站上使用了这种方法来解决这个问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-12T05:00:32.557

这是我们所做的：

```
<reference name="head">
   <block type="core/text" name="link.tags">
      <action method="setText">
        <text>
           <![CDATA[<link rel="stylesheet" href="/css/style.css?v=2">]]>
        </text>
      </action>
   </block>
</reference> 
```

[从5 Useful Tricks For Your Magento local.xml](http://magebase.com/magento-tutorials/5-useful-tricks-for-your-magento-local-xml/)中得到了这个想法以及其他一些有用的东西。

作为替代方案，您始终可以在进行更改时将文件从 重命名`style_v1.css`为等 - 它与更改为.`style_v2.css`具有相同的效果。`style.css?v=1``style.css?v=2`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-11T07:42:10.297

作为对这个问题的后续回答，我发现了以下（付费）magento 扩展，它可以满足您的要求：

[http://www.magentocommerce.com/magento-connect/clear-css-and-javascript-cache.html](http://www.magentocommerce.com/magento-connect/clear-css-and-javascript-cache.html)

# c# - 在.Net中获取IP地址的正确方法是什么？

> ID：11356870
> 
> 赞同：1
> 
> 时间：2012-07-06T06:21:38.110
> 
> 标签：c#, .net, tcp

我有两个独立的 exe 的 Parent.exe 和 Child.exe。

Parent.exe 打开 Child.exe，用户在 child.exe 中执行一些操作，然后 child.exe 将一些处理后的数据发送回 Parent.exe。两个exe都在同一台机器上

Child.Exe 和 Parent.Exe 之间的通信是通过 TCP IP（套接字编程）完成的。为此，我们需要计算本地 IP 地址，我们使用以下方式计算它：-

```
 string hostname = Dns.GetHostName();

       IPHostEntry ipEntry = Dns.GetHostEntry(hostname);
       IPAddress[] addr = ipEntry.AddressList;
       string FinalIpAddrs = addr[0] 
```

在 XP 上一切正常，但在 Windows 7 上我们遇到了问题。下面的行返回 Mac 地址 正确的方法是什么，以便它可以在 XP 和 Win7 上运行？

```
 string FinalIpAddrs = addr[0] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T06:26:47.953

哦，那些编程和不知道的。

*   您不需要知道 IP 地址，使用 127.0.0.1，这是一个本地环回地址。像这样简单 - 正是出于这个原因。

*   考虑高效。如果都是同一台机器，那么 TCP 的使用很糟糕。使用命名管道，这是一种 Windows 集成的通信机制，可以跨机器工作，但在同一台机器上它使用比 TCP 更有效的共享内存。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-06T06:27:12.643

为什么不直接使用[`IPAddress.Loopback`](http://msdn.microsoft.com/en-us/library/system.net.ipaddress.loopback.aspx)（或`IPv6Loopback`）？

环回地址设计用于完全在同一主机上进行通信。

* * *

我也猜你在哪里说：

> 以下行返回 Mac 地址

您的实际意思是它返回一个 IPv6 地址。该代码不可能返回 MAC 地址。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-06T06:25:46.657

是否有不使用 127.0.0.1 的特定要求？如果没有，那么我会直接使用它而无需任何计算。

# javascript - 如何检查选择的日期和今天的日期是否相等

> ID：11356876
> 
> 赞同：0
> 
> 时间：2012-07-06T06:22:20.483
> 
> 标签：javascript, date

```
pickedDate = new Date(Date.parse(txtDate.value.replace(/-/g, ' ')));
todaysDate = new Date();
todaysDate.setHours(0, 0, 0, 0)
if (todaysDate == pickedDate)
{
    return true;
}
    else
{
    return false;
} 
```

我正在检查选择的日期和今天的日期是否相等，然后`true`如果它们相等或`false`不相等则返回，但是当我运行代码时条件总是错误的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T06:25:53.793

测试以下条件：

```
if (todaysDate.getTime() == pickedDate.getTime())
{ 
```

这应该测试是否相等，因为 getTime() 方法返回可以相互比较的对象的 Unix 时间（作为整数）。

# c# - 使用 c# 在 .dbf 文件中获取数据

> ID：11356878
> 
> 赞同：13
> 
> 时间：2012-07-06T06:22:27.120
> 
> 标签：c#, dbf

如何使用 c# 获取 .dbf 文件中的数据？

我想要做的是读取每一行（同一列）中的数据以进一步处理它们。

谢谢。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-07-06T06:29:45.810

您可以创建[到 dbf 文件的连接字符串](http://www.connectionstrings.com/dbf-foxpro)，然后使用 OleDb，您可以填充数据集，例如：

```
string constr = "Provider=Microsoft.Jet.OLEDB.4.0;Data Source=directoryPath;Extended Properties=dBASE IV;User ID=Admin;Password=;";
using (OleDbConnection con = new OleDbConnection(constr))
{
    var sql = "select * from " + fileName;
    OleDbCommand cmd = new OleDbCommand(sql, con);
    con.Open();
    DataSet ds = new DataSet(); ;
    OleDbDataAdapter da = new OleDbDataAdapter(cmd);
    da.Fill(ds);
} 
```

稍后您可以使用`ds.Tables[0]`进行进一步处理。

您也可以查看这篇文章[Load a DBF into a DataTable](http://www.codeproject.com/Articles/24247/Load-a-DBF-into-a-DataTable)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2019-07-24T21:23:27.043

我发现接受的答案对我不起作用，因为我正在使用的 .dbf 文件嵌套在目录层次结构中，这使得路径相当长，可悲的是，这会导致`OleDbCommand`对象抛出。

我找到[了一个整洁的小库](https://github.com/yellowfeather/DbfDataReader)，只需要一个文件路径就可以工作。这是一个改编自其 GitHub 页面上的示例的小示例：

```
var file = "C:\\Path\\To\\File.dbf";
using (var dbfDataReader = new DbfDataReader(file))
{
    while (dbfDataReader.Read())
    {
        var foo = Convert.ToString(dbfDataReader["FOO"]);
        var bar = Convert.ToInt32(dbfDataReader["BAR"]);
    }
} 
```

# c++ - C++中的POSIX线程编程

> ID：11356880
> 
> 赞同：1
> 
> 时间：2012-07-06T06:22:31.160
> 
> 标签：c++, multithreading, opencv, posix

我正在尝试使用 pthreads 添加两个矩阵。只是一个初学者程序，但我无法使用线程初始化矩阵。我的代码片段如下：

```
#include "test.h"

CvMat * matA;       /* first matrix */
CvMat * matB;       /* second matrix */
CvMat * matRes;     /* result matrix */

int size_x_a; /* this variable will be used for the first  dimension */
int size_y_a; /* this variable will be used for the second dimension */

int size_x_b,size_y_b;
int size_x_res;
int size_y_res;

int main()
{
/* assigining the values of sizes */
size_x_a = 200;
size_y_a = 200;
size_x_b = 200;
size_y_b = 200;

/* resultant matrix dimensions */
size_x_res = size_x_a;
size_y_res = size_y_b;

matA = cvCreateMat(size_x_a,size_y_a,CV_32SC1);
matB = cvCreateMat(size_x_b,size_y_b,CV_32SC1);
matRes = cvCreateMat(size_x_res,size_y_res,CV_32SC1);

pthread_t thread1;
pthread_t thread2;

int res1;
int res2;
 /*******************************************************************************/ 

    /*Creating a thread*/
res1 = pthread_create(&thread1,NULL,initializeA,(void*)matA);
if(res1!=0)
{
    perror("thread creation of thread1 failed");
    exit(EXIT_FAILURE);
}

for(int i =0;i<size_x_a;i++)
{
    for(int j = 0;j<size_y_a;j++)
    {
        printf("%d ",cvmGet(matA,i,j));
    }
}
    /*Creating a thread*/
res2 = pthread_create(&thread2,NULL,initializeB,(void*)matB);

if(res2!=0)
{
    perror("thread creation of thread2 failed");
    exit(EXIT_FAILURE);
}
return 0;
 }

void * initializeA(void * arg)
{
CvMat * matA  = (CvMat*)arg;
//matA = (CvMat*)malloc(size_x_a * sizeof(CvMat *));

/*initialiazing random values*/
for (int i = 0; i < size_x_a; i++) 
{
    for (int j = 0; j < size_y_a; j++) 
    {
        cvmSet(matA,i,j,size_y_a + j); 
    }
}
return 0;
}

void * initializeB(void * arg)
{
CvMat* matB  = (CvMat*)arg;
//matB = (CvMat*)malloc(size_x_b * sizeof(CvMat *));

/*initialiazing random values*/
for (int i = 0; i < size_x_b; i++) 
{
    for (int j = 0; j < size_y_b; j++) 
    {
      cvmSet(matB,i,j,size_y_b + j); 
    }
}
return 0;
} 
```

我首先创建了两个线程来初始化 CvMat 矩阵。CvMat 矩阵是 opencv 的。初始化并调用 pthread_create 后，我试图访问 CvMat 的数据，但它崩溃了，这意味着它没有初始化。

请建议。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T06:58:22.627

您显然必须等到初始化完成才能使用。

```
pthread_create(&thr1, ..., (void *)matA);
pthread_create(&thr2, ..., (void *)matB);

pthread_join(thr1, &result1);
pthread_join(thr2, &result2);

for (...) { ... cvmGet(matA,i,j); ... } 
```

就目前而言，您正试图在初始化期间访问矩阵。

# .net - 在 dnn 5 中创建弹出页面

> ID：11356881
> 
> 赞同：0
> 
> 时间：2012-07-06T06:22:32.237
> 
> 标签：.net, dotnetnuke-5

我在 DNN 5 中创建了一个用户控件（.ascx 文件），我想将该用户控件作为弹出页面打开。或者换句话说，我的 asp.net 应用程序正在使用 DNN 5，我想通过单击按钮在我的应用程序中创建一个弹出窗口。帮助将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T09:58:45.083

您可以将控件包装在 div 中，然后在单击链接时使用一些 jQuery 使其弹出。

```
 <div id="popupDiv" style="display:none;"> your control here </div>
    <a id="popupLink" href="#"> Popup text </a>

<script type="text/javascript">
    $(document).ready(function () {

jQuery("#popupLink").click(function (event) {
                event.preventDefault();
                jQuery("#popupDiv").fadeIn("slow");
            });
</script> 
```

# c# - 为什么 VB Parallel.ForEach 不能推断我的循环项目类型？

> ID：11356888
> 
> 赞同：2
> 
> 时间：2012-07-06T06:23:01.137
> 
> 标签：c#, vb.net, generics, task-parallel-library, type-inference

我有一个类`Parent`，它的属性`Items`是`List(of Child)`

如果我使用此代码

```
Parallel.ForEach()(parent.Items,
            Sub(item)
                item.DoSomething()
            End Sub) 
```

我收到编译器警告`No overload for method ForEach() accepts this count of arguments`

如果我将代码更改为

```
Parallel.ForEach(of Child)(parent.Items,
            Sub(item)
                item.DoSomething()
            End Sub) 
```

有用。

但是，在 c# 中我可以只写

```
Parellel.ForEach(parent.Items, item =>
    {
        item.DoSomething();
    }); 
```

为什么VB在这种情况下不推断？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-06T06:41:15.097

在您的第一个 VB 示例中，您有一组额外的括号，因此您正在调用 .ForEach 没有参数。删除它们，它将起作用：

```
Parallel.ForEach(parent.Items,
         Sub(item)
            item.DoSomething()
         End Sub) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-06T06:41:33.570

如果您希望 VB 编译器推断类型参数，则不提供类型参数`(Of )`括号：

```
Parallel.ForEach(parent.Items,
        Sub(item)
            item.DoSomething()
        End Sub) 
```

以同样的方式，就好像您希望 C# 编译器推断类型一样，您不提供类型参数`<>`尖括号。

该错误试图告诉您，VB 编译器在您的第一个示例中看到的是*不*`ForEach`带参数的调用，*然后*调用第一次调用的返回值。*`()`*

# iphone - 如何在 iphone 中从我们的应用程序打开其他应用程序

> ID：11356889
> 
> 赞同：-1
> 
> 时间：2012-07-06T06:23:13.123
> 
> 标签：iphone, objective-c

我在我的 iphone 中创建了一个应用程序，所以如果我打开我的应用程序，我想做一个按钮。然后我点击那个按钮。我想打开已经在我的 iphone 中的其他 10 个应用程序，我必须打开该应用程序在我创建的应用程序中

我们可以用这个作为我的要求吗

```
NSString *documentdir = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) lastObject]; 
NSString *tileDirectory = [documentdir stringByAppendingPathComponent:@"xxxx/Tiles"]; 
NSLog(@"Tile Directory: %@", tileDirectory 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T07:10:09.787

试试这个[链接](http://wiki.akosma.com/IPhone_URL_Schemes)。它将向您显示几乎所有可以使用 URL 方案从您的应用程序中打开的应用程序，正如@trojanfoe 所说，它是重复的。

# c# - Linq to XML - 查找元素

> ID：11356895
> 
> 赞同：8
> 
> 时间：2012-07-06T06:23:29.973
> 
> 标签：c#, xml, linq, linq-to-xml

我确信这是基本的，可能以前被问过，但我只是开始使用 Linq to XML。

我有一个需要读写的简单 XML。

```
<Documents>
...
    <Document>
      <GUID>09a1f55f-c248-44cd-9460-c0aab7c017c9-0</GUID>
      <ArchiveTime>2012-05-15T14:27:58.5270023+02:00</ArchiveTime>
      <ArchiveTimeUtc>2012-05-15T12:27:58.5270023Z</ArchiveTimeUtc>
      <IndexDatas>
        <IndexData>
          <Name>Name1</Name>
          <Value>Some value</Value>
          <DataType>1</DataType>
          <CreationTime>2012-05-15T14:27:39.6427753+02:00</CreationTime>
          <CreationTimeUtc>2012-05-15T12:27:39.6427753Z</CreationTimeUtc>
        </IndexData>
        <IndexData>
          <Name>Name2</Name>
          <Value>Some value</Value>
          <DataType>3</DataType>
          <CreationTime>2012-05-15T14:27:39.6427753+02:00</CreationTime>
          <CreationTimeUtc>2012-05-15T12:27:39.6427753Z</CreationTimeUtc>
        </IndexData>
   ...
 </IndexDatas>
</Document>
...
</Documents> 
```

我有一个“文档”节点，其中包含一堆“文档”节点。

我有文档的 GUID 和“IndexData”名称。我需要通过 GUID 查找文档并检查它是否具有带有某个名称的“IndexData”。如果没有，我需要添加它。

任何帮助都会受到赞赏，因为我在阅读和搜索槽元素时遇到问题。

目前我正在尝试使用（在 C# 中）：

```
IEnumerable<XElement> xmlDocuments = from c in XElement
                                        .Load(filePath)
                                        .Elements("Documents") 
                                         select c;

// fetch document
 XElement documentElementToEdit = (from c in xmlDocuments where 
                    (string)c.Element("GUID").Value == GUID select c).Single(); 
```

**编辑**

```
xmlDocuments.Element("Documents").Elements("Document") 
```

这不会返回任何结果，即使 xmlDocuments.Element("Documents") 也会这样做。看起来我无法从 Documents 节点获取 Document 节点。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-06T06:34:55.960

您可以使用以下代码找到那些文档（索引数据中没有相关名称的文档），之后您可以将元素添加到 IndexData 元素的末尾。

```
var relatedDocs = doc.Elements("Document")
   .Where(x=>x.Element("GUID").Value == givenValue)
   .Where(x=>!x.Element("IndexDatas")
              .Elements("IndexData")
              .Any(x=>x.Element("Name") == someValue); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T06:35:21.763

这应该有效：

```
var x = XDocument.Load(filePath);
// guid in your sample xml is not a valid guid, so I changed it to a random valid one
var requiredGuid = new Guid("E61D174C-9048-438D-A532-17311F57ED9B");
var requiredName = "Name1";

var doc = x.Root
           .Elements("Document")
           .Where(d => (Guid)d.Element("GUID") == requiredGuid)
           .FirstOrDefault();
if(doc != null)
{
    var data = doc.Element("IndexDatas")
                  .Elements("IndexData")
                  .Where(d => (string)d.Element("Name") == requiredName)
                  .FirstOrDefault();
    if(data != null)
    {
        // index data found
    }
    else
    {
        // index data not found
    }
}
else
{
    // document not found
} 
```

# git - git-svn 克隆 | 虚假分支

> ID：11356901
> 
> 赞同：26
> 
> 时间：2012-07-06T06:24:01.293
> 
> 标签：git, git-svn, git-branch

我使用以下命令将 svn repo 克隆到 git 中，执行后，我看到了一些虚假分支。

`git svn clone [SVN repo URL] --no-metadata -A authors-transform.txt --stdlayout ~/temp`

`git branch -a`

```
*(no branch)
  master
  remotes/abc-1.3.x
  remotes/abc-1.3.x@113346
  remotes/abc-1.3.x@541512
  remotes/branch_test_script
  remotes/tags/modules-1.2
  remotes/tags/modules-1.2@113346
  remotes/tags/modules-1.2@516265
  remotes/tags/release-1.1
  remotes/tags/release-1.1@113346
  remotes/tags/release-1.1@468862
  remotes/trunk 
```

在 svn 中创建的实际分支是 abc、branch_test_script、modules 和 release。有人可以帮助了解 'abc-1.3.x@113346' 、 'abc-1.3.x@541512' ... 'release-1.1@468862' 等是什么吗？

我们怎样才能摆脱这些虚假的分支/它们意味着什么？

谢谢，
加亚瑟里

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-11-15T08:54:48.327

tl;博士：

`git svn`如果为子目录（或为另一个未被 git-svn 跟踪的目录）创建了分支（或标签），则创建这些“@”分支。总会有一个同名的“常规”分支，但没有“@”后缀。“@”分支仅作为常规分支的分支点存在。

* * *

*注意：我为此提交了一个补丁；这个解释的编辑版本现在是官方`git svn`手册页的一部分，作为一个新的部分“处理 SVN 分支”（从 Git 1.8.1 开始）。*

* * *

在 Subversion 中，分支和标签只是目录树的副本，因此可以（尽管通常不鼓励）从本身不是分支（或树干）的目录创建分支。例如，通过将 /trunk/foo 复制到 /branches/bar，而不是复制 /trunk（可以说是“子目录分支”），或者通过复制位于 trunk/tags/branches 结构之外的目录（即可能在 SVN 中）。

然而，在 git 中，一个分支总是针对整个 repo，不存在子目录分支。 `git svn`因此使用一种解决方法。如果它检测到从目录复制的分支，该目录本身没有被 git-svn 跟踪为分支，它将创建一个新的历史记录。例如，对于 /trunk/foo 被复制到 r1234 中的 /branches/bar 的子目录分支，它将创建：

*   从 r1233 向后的每个 SVN 修订版的新 git 提交（注意数字是创建分支之前的最后一个修订版）。这些提交的树将只包含分支的子目录。因此，对于从 r1233 向后的每个修订版，通常会有两个 git 提交，一个包含整个树（在 git-svn 处理 的历史时创建`trunk`）和新的提交。
*   一个名为“bar@1233”（分支名称@revision）的虚拟分支，指向从上面的 r1233 创建的提交。
*   来自 r1234 的提交，即创建分支的提交。这个提交将把上面的分支作为它的（唯一的）祖先。
*   一个名为“bar”的分支，它指向第二次提交。

这样，对于子目录分支栏，你在 git 中得到两个分支

*   bar@1233 ，表示创建分支的存储库的状态
*   bar，代表分支

我不太确定为什么会创建这个虚拟分支。我认为这样做是为了表示有关分支从哪个版本分支出来的信息，并拥有该分支的完整历史记录。

* * *

请注意，可以使用 flag 关闭整个机制`--no-follow-parent`。在这种情况下，每个 SVN 分支都会生成一个 git 分支，其中仅包含来自 SVN 分支目录的提交。每个分支都将与历史的其余部分断开连接，并且将有自己的根提交，对应于分支中的第一个提交。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-06T10:01:53.450

当我将我的 SVN 存储库克隆到 Git 存储库时，我也有这种奇怪的分支。

在查看了预期的分支（在您的情况下`modules-1.2`，`abc-1.3.x`和`branch_test_script`）之后，`release-1.1`我注意到这些`@revisionnumber`分支只不过是在其前缀分支中的提交。

如果您想手动执行此操作，请`gitk`在分支上打开`abc-1.3.x`并验证`abc-1.3.x@113346`并`abc-1.3.x@541512`显示在该分支的历史记录中。如果是这样，您可以删除相应的分支。

如果您有许多分支或许多提交要浏览，这可能会有点麻烦。

自动方式：让 git 为你做：

```
git branch -r --contains abc-1.3.x@113346 
```

会回声（或至少**应该**）

```
abc-1.3.x
abc-1.3.x@113346
abc-1.3.x@541512 
```

这意味着您可以安全地删除`abc-1.3.x@113346`它，因为它包含在`abc-1.3.x`：

```
git branch -r -d abc-1.3.x@113346 
```

由于 SVN 的线性历史，它当然也包含在（较新的）提交`541512`中。

* * *

**旁注：**
您可能已经注意到您的 SVN 标签实际上并未转换为 Git 标签和本机 Git 分支。这可以使用[svn2git](https://github.com/nirvdrum/svn2git)将 SVN 存储库克隆到 Git 存储库中来实现。

# android - 图像未显示在选项卡主机中

> ID：11356903
> 
> 赞同：1
> 
> 时间：2012-07-06T06:24:06.510
> 
> 标签：android, image, android-tabhost

在我的应用程序中使用选项卡主机活动并设置带有图片的选项卡。当应用程序在模拟器上运行时，图像显示没有任何问题。但是当我在移动设备（Micromax 移动设备）上运行应用程序时，它没有显示。

请告诉我是什么问题以及如何解决它。

标签主机编码：

```
 Intent intent = new Intent(this, WeekActivity.class);

    tabHost.addTab(tabHost
            .newTabSpec("Week")
            .setIndicator("Weekly", res.getDrawable(R.drawable.ic_tab_main))
            .setContent(intent));

    Intent intent2 = new Intent(this,ListMonthActivity.class);
    tabHost.addTab(tabHost
            .newTabSpec("Month")
            .setIndicator("Monthly", res.getDrawable(R.drawable.ic_tab_setup))
            .setContent(intent2));
    tabHost.setCurrentTab(0);

    Intent intent3 = new Intent(this, ListYearActivity.class);
    TabHost.TabSpec spec=tabHost.newTabSpec("Year").setIndicator("Yearly",getResources().getDrawable(R.drawable.ic_launcher)).setContent(intent3);
    tabHost.addTab(spec);

    /*tabHost.addTab(tabHost
            .newTabSpec("Year")
            .setIndicator("Yearly", res.getDrawable(R.drawable.ic_tab_setup))
            .setContent(intent3));
    tabHost.setCurrentTab(0);*/

    // Set tabs Colors
    tabHost.setBackgroundColor(Color.BLACK);
    tabHost.getTabWidget().setBackgroundColor(Color.BLACK);
   } 
```

## 选择器选项卡宿主 Xml 文件

```
 <?xml version="1.0" encoding="utf-8"?>
   <selector xmlns:android="http://schemas.android.com/apk/res/android">
  <!-- When selected, use grey -->
 <item android:drawable="@drawable/calendaricon"
      android:state_selected="true"/>
  <!-- When not selected, use white-->
  <item android:drawable="@drawable/calendaricon2" />
 </selector> 
```

## Tabhost 布局 XML 文件：

```
 <?xml version="1.0" encoding="utf-8"?>
   <TabHost xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@android:id/tabhost" android:layout_width="fill_parent"
android:layout_height="fill_parent">
<LinearLayout android:orientation="vertical"
    android:layout_width="fill_parent" android:layout_height="fill_parent"
    android:padding="0dp"
    >
    <TabWidget android:id="@android:id/tabs"
        android:layout_width="fill_parent" android:layout_height="wrap_content"
        />
    <FrameLayout android:id="@android:id/tabcontent"
        android:layout_width="fill_parent" android:layout_height="fill_parent"
        />

</LinearLayout>
   </TabHost> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-18T11:31:27.007

当我给出下面给定的代码时，它成功了。

```
mTabHost.addTab(mTabHost.newTabSpec("Bar").setIndicator("",getResources().getDrawable(R.drawable.ic_barchart)), BarChart.class, null); 
```

我所做的更改是，将第一个参数保留`setIndicator`为 EMPTY 字符串。（当我把它作为`"BarChart"`时，它不起作用。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T06:33:43.830

您必须将图像保存在每个文件夹中，例如具有相同名称的 mdpi、hdpi、ldpi，或者您只需将图片保存在 mdpi 文件夹中，低分辨率或高密度移动设备会自动从 mdpi 文件夹中选择图像。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-06T06:50:17.907

将选项卡主机中的图像设置为：

```
TabHost.TabSpec spec=tabHost.newTabSpec("hello").setIndicator("hello",getResources().getDrawable(R.drawable.ic_launcher)).setContent(intent);
tabHost.addTab(spec); 
```

我刚刚在设备中尝试过这个，它工作正常。

# cakephp - CakePHP 使用 'and' , 'or' 子句的复杂查找条件

> ID：11356907
> 
> 赞同：1
> 
> 时间：2012-07-06T06:25:07.130
> 
> 标签：cakephp, cakephp-2.0

我的查找查询是这样的；

```
//here $u_id is id of the users table retrieved using session variable

$this->User->Request->find("all",array("conditions" =>array("request.status" => "friends" , 
"OR" => array("request.friend_id" => "$u_id","request.user_id" => "$u_id")))); 
```

等效的 SQL 查询是：-

```
SELECT `Request`.`id`, `Request`.`user_id`, `Request`.`friend_id`, `Request`.`status`, `User`.`id`, `User`.`name`, `User`.`email`, `User`.`password`, 
FROM 
`myblog`.`requests` AS `Request` JOIN `myblog`.`users` AS `User` 
ON 
(`Request`.`friend_id` = `User`.`id`) 
WHERE  
((`request`.`friend_id` = 3) OR (`request`.`user_id` = 3)) AND `request`.`status` = 'friends' 
```

而我希望在上述 SQL 查询中的“ON”之后使用以下行来获得所需的结果：

```
`Request`.`user_id` = `User`.`id` OR `Request`.`friend_id` = `User`.`id` 
```

我应该对方法进行哪些更改`find()`，或者我应该更改我的模型？

我的桌子是：

> users(id, name, password, email)
> requests(id, user_id(users表的id),
> friend_id(users表的id), status)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T06:54:33.183

您可以在模型中指定条件。

```
public $belongsTo = array('User' => array('className' => 'Request',
                                          'foreignKey' => 'user_id',
                                          'conditions' => array('OR' => array('Request.user_id' => 'User.id', 'Request.friend_id' => 'User.id')
                                         ))
                         ); 
```

# html - 我的 dropkick jquery 列表看起来不正确

> ID：11356910
> 
> 赞同：0
> 
> 时间：2012-07-06T06:25:16.763
> 
> 标签：html, css, jquery-plugins

我已经问过了，但找不到我的问题的原因（[我的 dropkick 插件的下拉菜单看起来很奇怪](https://stackoverflow.com/questions/11344570/my-dropkick-plugins-dropdown-looking-strange)）

出于某种原因，它看起来像这样->![](../Images/c1ab9d0a65db954fd234d1b2cde134a3.png)

我不明白为什么，但我的代码在 jsfiddle -> [http://jsfiddle.net/UL4Tu/5/中工作正常](http://jsfiddle.net/UL4Tu/5/)

这是我的html：

```
 <select name="fashion" class="default" tabindex="2">
     <a class="dk_toggle" style="width: 245px; ">
          <option value="Fashion">Fashion</option>
          <option value="Health">Health</option>
          <option value="Travel">Travel</option>
          <option value="Food">Food</option>
          <option value="Coupons">Coupons</option>
        </select> 
```

我的js：

```
 $('.default').dropkick(); 
```

我的 application.css 文件：[https ://dl.dropbox.com/u/86122402/files/application.css](https://dl.dropbox.com/u/86122402/files/application.css)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T06:39:17.183

嘿，现在的问题是我认为你**没有**使用**css reset**请使用这个

**更多信息** [http://meyerweb.com/eric/tools/css/reset/](http://meyerweb.com/eric/tools/css/reset/)

习惯了这个

```
body,div,dl,dt,dd,ul,ol,li,h1,h2,h3,h4,h5,h6,pre,form,fieldset,input,textarea,p,blockquote,th,td { 
    margin:0;
    padding:0;
}
table {
    border-collapse:collapse;
    border-spacing:0;
}
fieldset,img { 
    border:0;
}
address,caption,cite,code,dfn,em,strong,th,var {
    font-style:normal;
    font-weight:normal;
}
ol,ul {
    list-style:none;
}
caption,th {
    text-align:left;
}
h1,h2,h3,h4,h5,h6 {
    font-size:100%;
    font-weight:normal;
}
q:before,q:after {
    content:'';
}
abbr,acronym { border:0;} 
```

# sql - SQL Server Management Studio 2012 - 从表中导出/导入数据

> ID：11356911
> 
> 赞同：2
> 
> 时间：2012-07-06T06:25:18.983
> 
> 标签：sql, sql-server, tsql, import, export

我有超过 3 000 000 行的表。我尝试使用 SQL Server Management Studio 功能手动将数据导出`Export data`到 Excel，但遇到了几个问题：

*   创建 .txt 文件时手动复制和粘贴数据（这是多次，因为如果您从 SQL Server Management Studio 复制所有行，则会引发内存不足错误）我无法使用任何文本编辑器打开它并复制行；

*   `Export data`to Excel 不起作用，因为 Excel 不支持这么多行

最后，`Export data`我创建了一个`.sql`文件的功能，但它是 1.5 GB，我无法再次在 SQL Server Management Studio 中打开它。

有没有办法用`Import data`功能导入它，或者其他更聪明的方法来备份我的表信息，然后在需要时再次导入它？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T06:36:41.180

我不太确定我是否理解您的要求（我不知道您是否需要将数据导出到 excel 或者您是否想要进行某种备份）。

为了从单个表中导出数据，您可以使用[**批量复制工具**](http://msdn.microsoft.com/en-us/library/ms162802.aspx)，它允许您从单个表中导出数据并将其导出/导入到文件中。您还可以使用自定义查询来导出数据。

重要的是，这不会生成 Excel 文件，而是另一种格式。您可以使用它来将数据从一个数据库移动到另一个数据库（在这两种情况下都必须是 MS SQL）。

示例： 创建格式文件：

> Bcp [TABLE_TO_EXPORT] 格式 "[EXPORT_FILE]" -n -f "[ FORMAT_FILE]" -S [SERVER] -E -T -a 65535

从表中导出所有数据：

> bcp [TABLE_TO_EXPORT] out "[EXPORT_FILE]" -f "[FORMAT_FILE]" -S [SERVER] -E -T -a 65535

导入之前导出的数据：

> bcp [TABLE_TO_EXPORT] in [EXPORT_FILE]" -f "[FORMAT_FILE] " -S [SERVER] -E -T -a 65535

我将 hte 导出/导入操作的输出重定向到日志文件（通过在命令末尾附加“> mylogfile.log”广告） - 如果您要导出大量数据，这会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-11-15T08:37:46.033

这是一种不使用 bcp 的方法：

1.  在文件中导出架构和数据

    *   使用 ssms 向导数据库 >> 任务 >> 生成脚本... >> 选择表 >> 选择数据库模型和模式
    *   保存 SQL 文件（可能很大）
    *   传输另一台服务器上的 SQL 文件
2.  将数据拆分为多个文件

    *   使用诸如 textfilesplitter 之类的程序将文件拆分为较小的文件并拆分为 10 000 行的文件（因此每个文件都不会太大）
    *   将所有文件放在同一个文件夹中，别无其他
3.  在第二个服务器中导入数据

    *   在同一文件夹中创建一个 .bat 文件，命名为 execFiles.bat
    *   您可能需要检查表模式以禁用第一个文件中的标识，您可以在导入完成后添加它。
    *   这将针对服务器和数据库执行文件夹中的所有文件，使用 -f 定义应使用 Unicode 文本编码来处理重音符号：

        `for %%G in (*.sql) do sqlcmd /S ServerName /d DatabaseName -E -i"%%G" -f 65001 pause`

# php - 更改 url 方案

> ID：11356931
> 
> 赞同：0
> 
> 时间：2012-07-06T06:26:39.690
> 
> 标签：php, codeigniter, codeigniter-url

我正在使用 hmvc 创建一个注册页面：- 现在我在 url 中输入：-`http://localhost/CI/index.php/user/registration`

用户是模块名称

控制器：-registration.php

```
<?php
class Registration extends MX_Controller{
    function index() {
        $this->load->view('homepage');
    }

    function register(){
        $this->load->view('registrationPage');
    }
}
?> 
```

查看：-homepage.php

```
<html>
<body>
    <a href="registration/register">register</a>
</body>
</html> 
```

问题是在我的网址中我必须输入`http://localhost/CI/index.php/user/registration/register`才能进入注册页面。

我想`http://localhost/CI/index.php/user/register`我们怎么能做到这一点。？设置 base_url 不起作用，设置路由 ia 也不起作用。这是否可以转到任何页面而不在 url 中提供模块名称..？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T09:21:46.253

编辑`routes.php`配置文件夹下的文件

```
$route['user/register'] = 'user/registration/register'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T11:53:55.933

在您的项目中必须使用 HMVC 吗？否则，请选择简单的 Codeigniter 方式，因为这是您在这种情况下所期望的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T07:17:02.267

您可以`url rewrite`在`.htaccess`文件中使用请参阅[不使用 htaccess 的 url 重写](https://stackoverflow.com/questions/2126762/url-rewriting-in-php-without-htaccess) 以及[如何在 PHP 中进行 url 重写](https://stackoverflow.com/questions/1039725/how-to-url-re-writing-in-php)

在 CodeIgniter 中，.htaccess 存在于 `system/application/config/config.php`

[在此处](https://stackoverflow.com/questions/1397014/how-do-i-write-a-htaccess-file-to-make-codeigniters-url-routing-work)获取更多信息，因为我不知道 CodeIgniter

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-06T07:41:35.053

您应该通过在主机文件中添加一个条目来为您的站点创建一个正确的 URL。例如：

`127.0.0.1 http://mysitename`

或者

`127.0.0.1 http://localhost.mysitename`

谷歌如何在 apache 中设置虚拟主机。您应该能够找到很多关于此的文章。现在编辑您的 apache 配置以启用虚拟主机。启用此功能后，您将为您的站点创建一个虚拟主机条目。虚拟主机告诉 apache 将您选择的 URL 映射到项目文件的特定目录路径。（这样实际的目录路径就不是您的 URL 的一部分。）

接下来，您应该编辑您的 .htaccess，以便始终通过 index.php 前端控制器路由请求。完成此操作后，您将不必使用“/index.php/”作为每个 URL 的一部分。阅读 Code Igniter 用户指南中称为 Code Igniter URLs 的部分。它具有示例 .htaccess 配置。此外，它还解释了 Code Igniter URL 的工作原理。

为了让 CI 与虚拟主机一起工作，您必须在 CI 配置文件中设置基本 URL 以匹配 v-host URL。

完成所有这些后，您将需要重新启动 apache。

现在你可以根据你想要的 URL 结构来命名你的控制器和方法。在这种情况下，一个名为 user.php 的控制器带有一个名为 register 的方法。

# flash - 如何使用 Schema.org VideoObject 标记来使用自定义视频播放器

> ID：11356935
> 
> 赞同：0
> 
> 时间：2012-07-06T06:27:02.613
> 
> 标签：flash, schema.org

我有一个自定义的 Flash 视频播放器。我将播放器发布到 Google plus（共享）。我正在使用开放图形方法发布播放器。我收到了发布到 Google plus 的视频标题、说明、图片。但是，问题是，视频和播放器没有加载，而是重定向到其他页面。

我从各自的网站检查了使用 YouTube 和 Vimeo 发布的视频。视频正在那里加载和播放。

我搜索了解决方案并获得了用于上传/共享/发布自定义 swf 播放器的链接：http: [//schema.org/VideoObject](http://schema.org/VideoObject) 但是，我不知道如何实现它。

谁能帮我解决这个问题。提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T23:35:09.250

[您可以查看VideoObject](http://support.google.com/webmasters/bin/answer.py?hl=en&answer=2413309)的 Google文档和 schema.org 示例

# asp.net - 在 asp.net 应用程序中打开/关闭连接的好习惯？

> ID：11356937
> 
> 赞同：5
> 
> 时间：2012-07-06T06:27:03.900
> 
> 标签：asp.net, database, performance, oracle

我一直在 ASP.net 中开发一个 Web 应用程序。我的应用程序有几个页面，所有页面都需要显示由数据库填充的表。现在我正在做的是，在每个页面上，我打开一个数据库连接，执行特定于该页面的查询，然后关闭数据库连接。因此，每次用户单击链接以转到新页面或单击诸如网格页面之类的表单控件时都会发生这种情况。

我想知道从性能的角度来看这是否是一场灾难。有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-06T06:32:43.543

几乎普遍地，数据库连接应该按如下方式处理：尽可能晚地打开，并尽快关闭。打开和关闭多个查询/更新......不要认为让它打开可以为您节省任何东西。因为连接池通常可以很好地帮助您管理连接。

在单个页面的制作中打开/关闭几个/几个连接是非常好的。试图在页面视图之间保持单个连接打开是非常*糟糕的*......在任何情况下都不要这样做。

基本上，使用连接池（几乎所有提供程序默认启用），“关闭”连接实际上只是将其释放回池以供重用。试图让自己保持开放会束缚有价值的联系。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-06T06:37:09.540

这正是你想要的样子。数据库连接只应在必要时打开并在使用后立即关闭。

您可能想要查看的是[缓存](http://msdn.microsoft.com/en-us/library/xsbfdd8c%28v=vs.100%29.aspx)，尤其是在性能对您来说是个大问题的情况下。您可能想要缓存整个页面，或者只是页面的一部分，或者只是您希望在页面上显示的数据。通过这种方式，您将节省大量的数据库访问，但您现在必须考虑其他事项，例如何时更新缓存、为不同用户缓存等。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-06T06:37:38.460

来自[MSDN - ADO.Net 中的最佳实践](http://msdn.microsoft.com/en-us/library/ms971481.aspx#adonetbest_topic5)

> 高性能应用程序在最短的时间内保持与正在使用的数据源的连接，并利用连接池等性能增强技术。

您所做的一切都很好，打开连接以执行查询，然后关闭它。如果您保持连接的时间较长，并且有多个人访问您的应用程序，那么您可能会用完通常在数据库上设置的连接限制。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-06T06:37:54.717

将数据库连接绑定到后端代码是一种不好的做法。在您学习的过程中，我建议您使用 Web 服务与 UI 进行交互，而不是将您的数据交互链接到 UI。

Like UI(Aspx Page ) >> BLL (业务逻辑层)>> DAL (数据访问层)

还可以尝试在 DAL 中使用“使用”关键字并在数据库交互之后处理连接以及所有操作

# android - asynctask 没有功能很好做后台

> ID：11356942
> 
> 赞同：0
> 
> 时间：2012-07-06T06:27:15.093
> 
> 标签：android, android-asynctask

这是问题所在，在此之前我将所有代码放在 onCreate(); 但加载时间超过 10 秒，它显示空白屏幕，直到屏幕完全加载。所以我把一些代码移到了doInBackground。但是我遇到了一些在 onCreate() 下从未发生过的问题，现在让我们看看代码：

```
String photoURL1;
@Override
    protected void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.app_details);

    tvDescription = (TextView)findViewById(R.id.tvDescription);

    tvTitle = (TextView)findViewById(R.id.tvTitle);
    tvDeveloper = (TextView)findViewById(R.id.tvDeveloper);

    rbRating = (RatingBar)findViewById(R.id.rbRating);

    ivLogo = (ImageView)findViewById(R.id.ivLogo);
    ivPhoto1 = (ImageView)findViewById(R.id.ivPhoto1);
    ivPhoto2 = (ImageView)findViewById(R.id.ivPhoto2);
    ivPhoto3 = (ImageView)findViewById(R.id.ivPhoto3);

    new loadPage().execute(null, null, null);
}

public class loadPage extends AsyncTask<String, Integer, Void> {
        private ProgressDialog pdia;

    @Override
    protected void onPreExecute(){
        super.onPreExecute();
        pdia = new ProgressDialog(AppDetails.this);
        pdia.setMessage("Loading...");
        pdia.show(); 
        }

    @Override
    protected Void doInBackground(String... aurl) {
        SoapObject Request = new SoapObject (NAMESPACE, METHOD_NAME);

        Request.addProperty("title", getIntent().getExtras().getString("xdaTitle"));

        SoapSerializationEnvelope soapEnvelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);

        soapEnvelope.dotNet = true;
        soapEnvelope.setOutputSoapObject(Request);

        AndroidHttpTransport aht = new AndroidHttpTransport(URL);

        try
        {
            aht.call(SOAP_ACTION, soapEnvelope);
            SoapObject resultString = (SoapObject) soapEnvelope.getResponse();

            for(int i =0; i<resultString.getPropertyCount(); i++)
            {
                SoapObject array = (SoapObject) resultString .getProperty(i);

                title = array.getProperty(1).toString(); 
                developer = array.getProperty(3).toString();    

                         //load images      
                photoURL1 = array.getProperty(5).toString();   //get logo url

                BitmapFactory.Options bmOptions;
                bmOptions = new BitmapFactory.Options();
                bmOptions.inSampleSize = 1;         

            }
        }
        catch(Exception e){                                             
        }           

        return null;
    }

    @Override
    protected void onProgressUpdate(Integer... progress2) {

    }

        @Override
        protected void onPostExecute(Void unused) {
            tvTitle.setText(title);
            tvDeveloper.setText(developer);
            BitmapFactory.Options bmOptions;
            bmOptions = new BitmapFactory.Options();
            bmOptions.inSampleSize = 1;

            Bitmap bmLogo = LoadImage(photoURL1, bmOptions);
            ivLogo.setImageBitmap(bmLogo);
            pdia.dismiss();
        } 
```

这是问题所在。

*   我的 tvTitle 只显示前 3 个字符，tvDeveloper 只显示 7~8 个字符（tvtitle 和 tvDeveloper 是一个 textView）
*   如果我将图像加载器从 doInBackground 移动到 onPostExecute，则会发生强制关闭。

=======更新：我应该把这段代码停在哪里？==================

```
MyI = new Intent(Intent.ACTION_VIEW);
            MyI.setAction(android.content.Intent.ACTION_VIEW);
            MyI.setDataAndType(Uri.parse("file:///sdcard/MaxApps/" + apkURL.toString()), "application/vnd.android.package-archive");

            MyPI = PendingIntent.getActivity(getApplicationContext(), 0, MyI, 0);
            MyNM = (NotificationManager)getSystemService(Context.NOTIFICATION_SERVICE);

            Intent intent = new Intent(getApplicationContext(), AppDetails.class);
            intent.putExtra("xdaTitle", title);
            final PendingIntent pendingIntent = PendingIntent.getActivity(getApplicationContext(), 0, intent, 0);

            notification = new Notification(R.drawable.logo, "Downloading...", System.currentTimeMillis());
            notification.flags = notification.flags | Notification.FLAG_ONGOING_EVENT;
            notification.contentView = new RemoteViews(getApplicationContext().getPackageName(), R.layout.downloadapk);
            notification.contentIntent = pendingIntent;
            notification.contentView.setImageViewResource(R.id.imgIcon, R.drawable.save);
            notification.contentView.setTextViewText(R.id.tvText, "Downloading " + apkURL);
            notification.contentView.setViewVisibility(R.id.pbStatus, View.VISIBLE);
            notification.contentView.setProgressBar(R.id.pbStatus, 100, progress, false);        
            notificationManager = (NotificationManager) getApplicationContext().getSystemService(getApplicationContext().NOTIFICATION_SERVICE); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T06:32:02.883

实际上，

```
ivLogo.setImageBitmap(bmLogo);
ivPhoto1.setImageBitmap(bmPhoto1);
ivPhoto2.setImageBitmap(bmPhoto2);
ivPhoto3.setImageBitmap(bmPhoto3); 
```

这些行`doInBackground()`会导致问题。因为您正在尝试从工作线程（非 UI 线程）更新 MainUI 线程。

您不能从更新**MainUI**`doInBackground()`更好地`AsyncTask`将此 UI 更新代码放入`onPostExecute()`.`AsyncTask`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T06:47:16.230

您不能在后台线程中更改 UI。

AsyncTask 有一个更好的选项来在下载时更新 UI，即使用`publishProgress()`

您需要像这样对代码进行一些更改才能实现它。

```
 @Override 
        protected Void doInBackground(String... aurl) { 

                for(int i =0; i<resultString.getPropertyCount(); i++) 
                {                    
                    String logo_URL = array.getProperty(5).toString();   //get logo url 
                    bmLogo = LoadImage(logo_URL, bmOptions); 
                    String photo1_URL = array.getProperty(6).toString(); 
                    bmPhoto1 = LoadImage(photo1_URL, bmOptions); 
                    String photo2_URL = array.getProperty(7).toString(); 
                    bmPhoto2 = LoadImage(photo2_URL, bmOptions); 
                    String photo3_URL = array.getProperty(8).toString(); 
                    bmPhoto3 = LoadImage(photo3_URL, bmOptions); 
                    publishProgress(null);
                } 
            } 
            catch(Exception e){                                              
            }            

            return null; 
        } 

        @Override 
        protected void onProgressUpdate(Integer... progress2) { 
            ivLogo.setImageBitmap(bmLogo); 
            ivPhoto1.setImageBitmap(bmPhoto1); 
            ivPhoto2.setImageBitmap(bmPhoto2); 
            ivPhoto3.setImageBitmap(bmPhoto3); 
        } 
```

# css - 标签的IE css宽度问题

> ID：11356943
> 
> 赞同：1
> 
> 时间：2012-07-06T06:27:18.160
> 
> 标签：css

标签内容在除 IE 之外的所有浏览器中都能很好地显示。是否可以通过 IE 浏览器来纠正该大小问题？

[活生生的例子](http://webprolearner2346.zxq.net/slidingtabs/horizontal.html)

这是控制宽度的CSS

```
div.st_horizontal { /* The main container */    
    position:relative;
    float:left;
    /*clear:both; */
    width:655px;  /*Set the full width */  
    color:#616161;
} 
```

![在此处输入图像描述](../Images/6f22889e05b1f5d9aa9780180ef2cf10.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T10:43:52.440

您可以设置仅针对 IE 的条件 CSS。

```
<!--[if IE]><link rel="stylesheet" type="text/css" href="css/ie.css" /><![endif]--> 
```

并在那里写下宽度。

但我正在查看 chrome 上的链接，它似乎也没有与选项卡的边缘对齐。

# svg - d3.js 基础查询+可视化建议

> ID：11356944
> 
> 赞同：0
> 
> 时间：2012-07-06T06:27:18.230
> 
> 标签：svg, html5-canvas, d3.js, data-visualization

我正在浏览 d3.js 文档，它说：

> D3 帮助您使用 HTML、SVG 和 CSS 将数据变为现实。

示例部分给出了很好的可视化，但我想澄清它是仅使用 SVG 还是 HTML 5 画布？

我打算做一个高度交互、大数据驱动、动画丰富的可视化，并且正在考虑使用 d3.js。

有人可以澄清或提供我应该使用哪个 js 可视化库的替代建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T06:47:47.880

看到这个线程：[https ://groups.google.com/forum/?fromgroups#!topic/d3-js/KuAMZlJ-aVE](https://groups.google.com/forum/?fromgroups#!topic/d3-js/KuAMZlJ-aVE)

如果您使用 D3，您会发现坚持使用 SVG 会更容易。

[这是使用http://bl.ocks.org/2409451](http://bl.ocks.org/2409451)的示例`canvas`

# yii - 在 ajax 弹出窗口中使用时，yii Tipsy 工具提示 css 不起作用？

> ID：11356946
> 
> 赞同：2
> 
> 时间：2012-07-06T06:27:26.207
> 
> 标签：yii, jquery-tooltip

我在加载 ajax 调用的弹出窗口中使用[Tipsy 工具提示](http://www.yiiframework.com/extension/jquery-tipsy/) 。在这种情况下，工具提示 css 不起作用。小部件加载 css 文件但不起作用。

这是我的代码：

```
<a id="north-west" href="#" original-title="Click on this">Click me</a>

<?php
$this->widget('application.extensions.tipsy.Tipsy', array(  
  'trigger' => 'hover',
  'items' => array(
    array('id' => '#north-west', 'gravity' => 'sw'),
  ),  
));
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T08:20:41.147

通常，当您通过 ajax 加载时，您会使用“renderPartial”而不是“render”。但是有一个问题：如果你有 javascript，你需要确保 processOutput 参数设置为 TRUE。基本上电话是：

```
$this->renderPartial('view', array(<data>), FALSE, TRUE); 
```

Yii 会确保 javascript 也被返回，它通常不会使用部分返回。这仅在 renderPartial 是您执行的唯一输出的 ajax 调用中需要，而不是在常规请求期间调用它。

# php - 如何在不知道 PHP 中另一个页面上的 html 元素参数的情况下获取表单数据？

> ID：11356951
> 
> 赞同：-1
> 
> 时间：2012-07-06T06:28:21.080
> 
> 标签：php, html

我正在尝试创建一个在线测试应用程序，并在一页上使用选项调用问题。在测试结束时，我想在另一个页面上发布分数。为此，我希望所有表单数据都在另一个页面上，你有什么想法吗？

```
<form  name="test" method ="post" action="testfinish.php">
    <input type="submit" name="endtest" value="End Test"/>
    <?php
        $count=4;
        $que = array();
        $que = $userObj->getQue($count);
        $_SESSION['count']=$count;
        foreach($que as $q){ ?>
            <br>
            <div style = "border:2px solid;">
            <div style = "border:2px solid;"><?php echo $q['que']?></div><br>
            <ol>
                <li><input type = "radio" name = "<?php echo $q['que_id']?>" value = "<?php echo $q['a']?>" /> <?php echo $q['a']?></li>
                <li><input type = "radio" name = "<?php echo $q['que_id']?>" value = "<?php echo $q['b']?>" /> <?php echo $q['b']?></li>
                <li><input type = "radio" name = "<?php echo $q['que_id']?>" value = "<?php echo $q['c']?>" /> <?php echo $q['c']?></li>
                <li><input type = "radio" name = "<?php echo $q['que_id']?>" value = "<?php echo $q['d']?>" /> <?php echo $q['d']?></li>
            </ol></div>
    <?php } ?>
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T06:33:04.693

使用[$_REQUEST](http://php.net/manual/en/reserved.variables.request.php)

在`testfinish.php`，只需使用

```
<?php
$result = $_REQUEST;
echo '<pre>';
print_r($result); // posted values printed as array 
echo '</pre>'; 
```

您将在[此处](https://stackoverflow.com/questions/7074931/get-the-name-of-submit-button-in-php)`$_REQUEST`的 更多信息中找到按钮的名称

# php - 使用哪个网站/数据库架构，许多 HTTP 请求 + 媒体文件上传？

> ID：11356953
> 
> 赞同：0
> 
> 时间：2012-07-06T06:28:32.687
> 
> 标签：php, database, performance, architecture, scalability

我开始重新设计我当前的网站项目，并希望用一种可以帮助我轻松扩展并具有良好性能的架构来替换它。

我们的原型运行在 PHP Framework (CAKEPHP) + mySQL Server + 1ghz 虚拟服务器 WIN2008 Server 上（可行性测试）。

该系统将无法上线，因为它无法满足要求。

*   每秒应该能够处理大量的 HTTP 请求（可能通过 hadoop 进行可扩展性？）可能会成为瓶颈。
*   应该能够在文件系统读取和写入 + 媒体转换（Atm 之类的 LAME 编码器，有更快的工具吗？）=> 瓶颈上处理每分钟同时上传的多个文件（媒体文件）
*   数据库每秒获得许多查询（不知何故使用集群 SQL 集群或任何更便宜的产品？）
*   将 CDN 用于静态媒体文件
*   UNIX系统？
*   应该使用文件压缩吗？CPU 与带宽成本？

**可怕的部分是 HTTP 请求和媒体上传 & 转换器。**

我开始在 www.highscalability.com 上搜索一些好的电子书，如果这里有一些专业人士可以给我一些有用的链接的建议，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T06:42:16.680

1.  使用Linux作为Centos，debian没有windows
2.  使用伪静态
3.  使用缓存
4.  如果浏览速度不快你应该需要CDN
5.  如果你有足够的钱，更多的 CPU 是完美的
6.  您可以使用一些流量监控软件来判断是否需要更多带宽

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T08:41:16.687

你可以看看那些书：

*   [高性能网站：前端工程师必备知识](http://rcm-de.amazon.de/e/cm?lt1=_blank&bc1=000000&IS2=1&bg1=FFFFFF&fc1=000000&lc1=0000FF&t=semanticblog-21&o=3&p=8&l=as4&m=amazon&f=ifr&ref=ss_til&asins=0596529309)(Steve Souders)
*   [更快的网站：Web 开发人员的性能最佳实践](http://rcm-de.amazon.de/e/cm?lt1=_blank&bc1=000000&IS2=1&bg1=FFFFFF&fc1=000000&lc1=0000FF&t=semanticblog-21&o=3&p=8&l=as4&m=amazon&f=ifr&ref=ss_til&asins=0596522304)(Steve Souders)
*   [构建可扩展的网站](http://rcm-de.amazon.de/e/cm?lt1=_blank&bc1=000000&IS2=1&bg1=FFFFFF&fc1=000000&lc1=0000FF&t=semanticblog-21&o=3&p=8&l=as4&m=amazon&f=ifr&ref=ss_til&asins=0596102356)(Cal Henderson)
*   使用Linux作为操作系统，
*   Nginx 作为网络服务器（可以对多个实例进行负载均衡） Nginx 可以处理大量的 http 请求！
*   Redis 用于缓存。
*   Solr 或 Sphinx 用于搜索。
*   您可以使用[mongdb](https://stackoverflow.com/questions/3413115/is-gridfs-fast-and-reliable-enough-for-production)来存储文件或查看[mogilefs](http://code.google.com/p/mogilefs/)

对于媒体转换，您可以尝试 node.js： [http](http://www.benfarrell.com/2012/06/14/morph-your-media-with-node-js/) ://www.benfarrell.com/2012/06/14/morph-your-media-with-node-js/ 。

github 上有一些转换（？）库：http: [//github.com/TooTallNate/node-lame](http://github.com/TooTallNate/node-lame)

也许一些安装了[gearman](http://gearman.org/)的服务器也可以处理转换。

# sparql - 查询 dbpedia 询问 SPARQL 中两个类别的出生地

> ID：11356954
> 
> 赞同：3
> 
> 时间：2012-07-06T06:28:34.823
> 
> 标签：sparql, wikipedia, dbpedia

我正在尝试获取以下列表：

A人，A的出生地，B人，B的出生地

出生地是一座城市。

A 人和 B 人之间的关系是 A 人“影响”了 B 人。到目前为止，我的代码如下：

```
SELECT ?person ?birthplace ?influenced ?birthplace2
WHERE {
?person a <http://dbpedia.org/ontology/Person> .
?person dbpedia2:placeOfBirth ?birthplace .
?person <http://dbpedia.org/ontology/influenced> ?influenced.
?person dbpedia2:placeOfBirth ?birthplace2 .
?influenced a <http://dbpedia.org/ontology/Person>.
?country rdf:type dbpedia-owl:Country .
FILTER (str(?birthplace2) = str(?country))
FILTER (str(?birthplace) = str(?country))
} 
```

目前我正在做国家，因为那是唯一有效的事情。

目前，这只是给了我两个具有*相同*出生地的列。它没有显示受影响者的出生地。

理想情况下，我还想要每个出生城市的纬度和经度，例如：

A人，A的出生地，纬度，经度，B人，B的出生地，纬度，经度

但这可能问得太多了。抱歉，我是 SPARQL 的新手。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T20:32:58.560

在您的查询中，您有：

```
?person dbpedia2:placeOfBirth ?birthplace .
?person <http://dbpedia.org/ontology/influenced> ?influenced.
?person dbpedia2:placeOfBirth ?birthplace2 . 
```

这表示它`?person`出生于`?birthplace`和`?birthplace2`。我想你的意思是：

```
?person dbpedia2:placeOfBirth ?birthplace .
?person <http://dbpedia.org/ontology/influenced> ?influenced.
?influenced dbpedia2:placeOfBirth ?birthplace2 . 
```

至于获取每个城市的经纬度，目前 dbpedia 已关闭，因此我无法查看城市资源以了解它们如何映射到地理坐标。但是，一旦 dbpedia 备份，您可以执行 SPARQL describe 查询：

```
describe <http://dbpedia.org/... rest of resource URI> 
```

看看你会得到什么。这将告诉您需要使用哪些谓词来提取该位置。请注意，如果缺少纬度/经度信息，您将不会在结果中看到该城市，除非您将选择位置的查询模式部分放在 SPARQL`optional`子句中。

**更新**

好的，DbPedia 现在已备份。我相信这就是你想要的：

```
PREFIX geo: <http://www.w3.org/2003/01/geo/wgs84_pos#>
PREFIX dbpedia-owl: <http://dbpedia.org/ontology/>
PREFIX dbpedia: <http://dbpedia.org/resource/>

SELECT DISTINCT ?person1 ?birthplace1 ?person2 ?birthplace2 
                ?lat1 ?long1 ?lat2 ?long2
WHERE 
{
  ?person1 a dbpedia-owl:Person ;
           dbpedia-owl:birthPlace ?birthplace1 ;
           dbpedia-owl:influenced ?person2 .
  ?person2 dbpedia-owl:birthPlace ?birthplace2 .

  optional {
    ?birthplace1 geo:lat ?lat1 .
    ?birthplace1 geo:long ?long1 .

    ?birthplace2 geo:lat ?lat2 .
    ?birthplace2 geo:long ?long2 .
  }
} 
```

**更新 2**

该查询在[dbpedia/iSparql](http://dbpedia.org/isparql/)中对我有用（这是一个永久[链接](http://dbpedia.org/isparql/view/?query=PREFIX%20geo:%20%3Chttp://www.w3.org/2003/01/geo/wgs84_pos#%3E%0APREFIX%20dbpedia-owl:%20%3Chttp://dbpedia.org/ontology/%3E%0APREFIX%20dbpedia:%20%3Chttp://dbpedia.org/resource/%3E%0A%0ASELECT%20DISTINCT%20?person1%20?birthplace1%20?person2%20?birthplace2%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20?lat1%20?long1%20?lat2%20?long2%0AWHERE%20%0A%7B%0A%20%20?person1%20a%20dbpedia-owl:Person%20;%0A%20%20%20%20%20%20%20%20%20%20%20dbpedia-owl:birthPlace%20?birthplace1%20;%0A%20%20%20%20%20%20%20%20%20%20%20dbpedia-owl:influenced%20?person2%20.%0A%20%20?person2%20dbpedia-owl:birthPlace%20?birthplace2%20.%0A%0A%20%20optional%20%7B%0A%20%20%20%20?birthplace1%20geo:lat%20?lat1%20.%0A%20%20%20%20?birthplace1%20geo:long%20?long1%20.%0A%0A%20%20%20%20?birthplace2%20geo:lat%20?lat2%20.%0A%20%20%20%20?birthplace2%20geo:long%20?long2%20.%0A%20%20%7D%0A%7D&endpoint=/sparql&maxrows=50&timeout=&default-graph-uri=http://dbpedia.org&view=1&amode=0)）：

![iSparql 结果](../Images/be4800188ffc51fae7f8d9295ed34b1a.png)

**更新 3**

仅限于城市：

```
PREFIX geo: <http://www.w3.org/2003/01/geo/wgs84_pos#>
PREFIX dbpedia-owl: <http://dbpedia.org/ontology/>
PREFIX dbpedia: <http://dbpedia.org/resource/>

SELECT DISTINCT ?person1 ?birthplace1 ?person2 ?birthplace2 
                ?lat1 ?long1 ?lat2 ?long2
WHERE 
{
  ?person1 a dbpedia-owl:Person ;
           dbpedia-owl:birthPlace ?birthplace1 ;
           dbpedia-owl:influenced ?person2 .
  ?person2 dbpedia-owl:birthPlace ?birthplace2 .

  ?birthplace1 a dbpedia-owl:City .
  ?birthplace2 a dbpedia-owl:City .

  optional {
    ?birthplace1 geo:lat ?lat1 .
    ?birthplace1 geo:long ?long1 .

    ?birthplace2 geo:lat ?lat2 .
    ?birthplace2 geo:long ?long2 .
  }
} 
```

# php - php 对于每个用逗号分隔符，除了最后一个

> ID：11356957
> 
> 赞同：8
> 
> 时间：2012-07-06T06:28:52.780
> 
> 标签：php

我正在合并 jplayer html5 音频播放列表

我正在使用 foreach 为每个播放列表项生成脚本元素。一切都按预期工作，除了我在循环中包含了逗号，但我需要一种方法将逗号写为除最后一项之外的分隔符。

这是我到目前为止生成 jplayer 播放列表的内容。

```
<?php foreach( $songs as $song ): if( !empty($song) ): ?>{

        title:"Each Song Title",

        mp3:"Each song mp3 url"

    },<?php endif; endforeach; ?> 
```

这给了我

```
 {

        title:"Partir",

        mp3:"http://www.jplayer.org/audio/mp3/Miaow-09-Partir.mp3"

    },

    {

        title:"Thin Ice",

        mp3:"http://www.jplayer.org/audio/mp3/Miaow-10-Thin-ice.mp3"

    },
    {

        title:"Ice man",

        mp3:"http://www.jplayer.org/audio/mp3/Miaow-10-Thin-ice.mp3"

    }, 
```

这是我想要的结果

```
 {

        title:"Partir",

        mp3:"http://www.jplayer.org/audio/mp3/Miaow-09-Partir.mp3"

    },

    {

        title:"Thin Ice",

        mp3:"http://www.jplayer.org/audio/mp3/Miaow-10-Thin-ice.mp3"

    },
    {

        title:"Ice man",

        mp3:"http://www.jplayer.org/audio/mp3/Miaow-10-Thin-ice.mp3"

    } 
```

谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-07-06T06:32:16.627

我使用[next()](http://www.php.net/manual/en/function.next.php)：

```
$arr = array(1,2,3,4,5,6,7);
$copy = $arr;
foreach ($arr as $val) {
    echo $val;
    if (next($copy )) {
        echo ','; // Add comma for all elements instead of last
    }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-06T06:54:28.820

你是说JSON？

```
echo json_encode($array); 
```

您也可以使用数组函数

```
// Create single items first
$array = array_map(
  function ($item) {return sprintf(
      '{title:"%s",mp3:"%s"}',
      $item['title'],
      $item['mp3']
  );},
  $array
);
// Then concatenate
echo implode(',' $array); 
```

只是为了让它完整：A `for`-solution

```
for ($n = count($array), $i = 0; $i < $n; $i++) {
  echo sprintf('{title:"%s",mp3:"%s"}', $array[$i]['title'], $array[$i]['mp3'])
    . ($i < $n-1 ? ',' : '');
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-06T06:43:22.657

您还可以做的不是直接将其回显到浏览器，而是先将其存储在字符串中。

```
<?php 
$string = "";
foreach( $songs as $song ) { 
    if( !empty($song) )
    { 
        $string .= '
    {

        title:"Each Song Title",

        mp3:"Each song mp3 url"

    },

    ';
    }
 }
 $string = substr($string, 0, -1); //Removes very last comma.
 echo $string;
 ?> 
```

如果需要，这也允许它在整个代码的其他地方使用。

# c - 如何使用__malloc_hook？

> ID：11356958
> 
> 赞同：2
> 
> 时间：2012-07-06T06:29:01.247
> 
> 标签：c, malloc, glibc

在*GNU C Library Reference Manual*中，有一个示例程序（p.65），但我不知道这三个句子 是什么`__malloc_hook = old_malloc_hook;` `old_malloc_hook = __malloc_hook;` `__malloc_hook = my_malloc_hook;` 意思。尤其是第二个，谁能给我解释一下？谢谢。

```
static void *
my_malloc_hook (size_t size, const void *caller)
{
    void *result;
    /* Restore all old hooks */
    __malloc_hook = old_malloc_hook;
    __free_hook = old_free_hook;
    /* Call recursively */
    result = malloc (size);
    /* Save underlying hooks */
    old_malloc_hook = __malloc_hook;
    old_free_hook = __free_hook;
    /* printf might call malloc, so protect it too. */
    printf ("malloc (%u) returns %p\n", (unsigned int) size, result);
    /* Restore our own hooks */
    __malloc_hook = my_malloc_hook;
    __free_hook = my_free_hook;
    return result;
} 
```

我写了一个小程序来测试它：

```
#include <stdio.h>
#include <malloc.h>

/* Prototypes for our hooks.  */
static void my_init_hook(void);
static void *my_malloc_hook(size_t, const void *);

/* Variables to save original hooks. */
static void *(*old_malloc_hook) (size_t, const void *);

/* Override initializing hook from the C library. */
void (*__malloc_initialize_hook) (void) = my_init_hook;

static void my_init_hook(void)
{
    old_malloc_hook = __malloc_hook;
    __malloc_hook = my_malloc_hook;
}

static void *my_malloc_hook(size_t size, const void *caller)
{
    void *result;

    /* Restore all old hooks */
    __malloc_hook = old_malloc_hook;

        printf("1: __malloc_hook = %x  old_malloc_hook = %x\n", __malloc_hook, old_malloc_hook);
    /* Call recursively */
    result = malloc(size);

        printf("2: __malloc_hook = %x  old_malloc_hook = %x\n", __malloc_hook, old_malloc_hook);

    /* Save underlying hooks */
    old_malloc_hook = __malloc_hook;

        printf("3: __malloc_hook = %x  old_malloc_hook = %x\n", __malloc_hook, old_malloc_hook);
    /* printf() might call malloc(), so protect it too. */
    printf("malloc(%u) called from %p returns %p\n",
           (unsigned int)size, caller, result);

    /* Restore our own hooks */
    __malloc_hook = my_malloc_hook;
        printf("4: __malloc_hook = %x  old_malloc_hook = %x\n", __malloc_hook, old_malloc_hook);

    return result;
}

int main(void)
{
        char *p;
        p = malloc(10);
        free(p);
        return 0;
} 
```

程序的结果是：

```
1: __malloc_hook = 0  old_malloc_hook = 0
2: __malloc_hook = 0  old_malloc_hook = 0
3: __malloc_hook = 0  old_malloc_hook = 0
malloc(10) called from 0xb7797f38 returns 0x932c008
4: __malloc_hook = 804849d  old_malloc_hook = 0 
```

但是现在我有更多的问题，为什么`old_malloc_hook`都是0，在1,2,3中，为什么`__malloc_hook`是0？我真的很困惑。帮我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-06T14:20:14.050

据我所知，一切都按预期工作，输出也很好。

变量 ,`__malloc_hook`为 0（或 null）可能是因为系统默认*没有*malloc 钩子。

正如上面提到的 David Schwartz，保存原件很重要，以便在调用`__malloc_hook`原件之前可以恢复它。`malloc()`那是评论下方的那一行`/* Restore all old hooks */`。我猜在这种特定情况下，这是不必要的，因为原来的 malloc 钩子是`null`，但为了安全起见，应该这样做。

请放心，此代码会按照您的意愿运行。现在，我只是让这道菜炖一会儿，也许一个灯泡会熄灭，总有一天，你会完全理解的。（对不起，但这是我今天能做的最好的事情。）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-06T06:34:52.873

[它在手册页](http://www.kernel.org/doc/man-pages/online/pages/man3/malloc_hook.3.html)中有很好的记录。

1.  `old_malloc_hook = __malloc_hook;`：这会将当前的 malloc 钩子保存在一个名为`old_malloc_hook`. 据推测，我们正在保存它，因为我们即将改变它。

2.  `__malloc_hook = my_malloc_hook;`: 这会将当前的 malloc 挂钩更改为`my_malloc_hook`.

3.  `__malloc_hook = old_malloc_hook;`：将 malloc 挂钩更改回我们更改之前的值，即我们保存在`old_malloc_hook`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-14T01:20:32.343

我认为这些答案缺少以下内容：

`old_malloc_hook`是`NULL`在开始，然后`malloc_hook = old_malloc_hook`确保钩子被禁用，并且在函数`malloc`内部调用实际的库函数时我们不会无限递归`my_malloc_hook`。

# javascript - Onclick CSS 替代品

> ID：11356959
> 
> 赞同：0
> 
> 时间：2012-07-06T06:29:14.167
> 
> 标签：javascript, jquery, html, css

现在我正在使用 css 创建一个 onclick 图像更改。问题出在我的网站上，当我使用它时，图像加载会暂停。我想知道是否有一个 javascript 或 jquery 替代方案在我单击它时不需要加载图像，在我单击它直到它加载后，它会在后面几秒钟内变成白色。

现在这就是我正在使用的。[示例在这里](http://jsfiddle.net/NXEKb/)

```
<input type="submit" class="create" style="font: 24px Arial, Helvetica, sans-serif; width: 681px;" value="CREATE ">
​
.create {
    margin: 0 auto;
    height: 62px;
    width: 681px;
    color:#FFF;
    background-image:url(http://i.imgur.com/tWGcy.jpg);
    outline: 0;
    border: 0;
    margin-top: 7px;
    font-family: Arial, Helvetica, sans-serif;
}
.create:active {
    margin: 0 auto;
    height: 62px;
    width: 681px;
    color:#FFF;
    background-image:url(http://i.imgur.com/r9d3C.jpg);
    outline: 0;
    border: 0;
    margin-top: 7px;
    font-size: 40px;
    font-family: Arial, Helvetica, sans-serif;
}​ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T06:36:40.820

不需要任何JS。您可以为此使用**css sprites**，这是一个更好的解决方案。

阅读这篇文章了解更多[http://css-tricks.com/css-sprites/](http://css-tricks.com/css-sprites/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T06:40:33.127

有很多方法可以解决您的问题，

您的情况主张使用 css 图像精灵的解决方案。

在同一张图片中使用悬停和普通背景绘制图像，然后在悬停时仅更改背景位置，这样就不需要更改新图像。

[css-tricks 教程](http://css-tricks.com/css-sprites/)你的简单精灵不需要所有这些东西，但它值得一读

另一种解决方案是使用 javascript 预加载图像。

```
var img = new Image();
img.src = "http://i.imgur.com/r9d3C.jpg"; 
```

使用图像精灵看起来更清洁的解决方案，但并不适用于所有条件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-06T06:40:42.970

您需要做的是将这些图像拼接成一个大图像，然后像这样更改左侧或顶部：[DEMO](http://jsfiddle.net/ZVFE3/)

CSS：

```
button {
   background:url(http://anton.shevchuk.name/wp-content/uploads/2009/07/button-sprite-result.png); 
   border:0;
   padding:0;   
   width:310px;
   height:80px;
}

button:hover {
   background-position:0 -70px;   
}

button:active {
   background-position:0 -140px;   
} 
```

HTML：

```
<button></button> 
```

​​​这是一种叫做精灵的技术，希望这有助于 -ck

# ios - 我可以使用 UIAppearance 更改 UIBarButton 项的不透明度吗？

> ID：11356960
> 
> 赞同：1
> 
> 时间：2012-07-06T06:29:15.780
> 
> 标签：ios, uibarbuttonitem

我能够使用此外观代理更改后退按钮的色调颜色

```
//set back button tint
    [[UIBarButtonItem appearance] setTintColor:[UIColor colorWithRed:56.0/255.0 green:75.0/255.0 blue:134.0/255.0 alpha:1.0]]; 
```

我想知道是否可以更改后退按钮的不透明度？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T01:32:44.717

这将允许整个导航栏有一些不透明度

```
[self.navigationController.navigationBar setTranslucent:YES]; 
```

# python - 我正在开发一个类似于 fb chat 的应用程序。哪个框架 - Play 还是 Django？

> ID：11356961
> 
> 赞同：6
> 
> 时间：2012-07-06T06:29:24.633
> 
> 标签：python, ruby-on-rails, django, scala, playframework

我对 Python 非常满意。我对 Java “还行”，在 Android 方面有很好的经验（但我们都知道，Android 中的大部分内容在许多博客中都有很好的介绍，以至于学习曲线并不是那么陡峭。）因此，回到网络-应用程序。这就是我所期待的：-

1.  很多要求。（可扩展性。）
2.  并发。
3.  反应灵敏。
4.  良好的错误报告。
5.  更陡峭的学习曲线。
6.  与 PostgresDb 和 Redis 很好地结合。
7.  提供一些方法来构建更清洁的 apis(Something django-piston.)
8.  最后但同样重要的是，我有 2 个月的时间来完成它。（不是原型，而是最终版本。）

编辑：

Node.js 似乎非常适合构建快速原型，但它的问题太大而无法扩展。

PHP 是一门我从来没有觉得自己适合编写代码的语言。在我学会了 Android 编码之前，我对 JAVA 也不是很舒服。因此，偏爱 Scala。另外，我了解到 fb 聊天是基于 Erlang 构建的。而且我相信在 fb 中的许多错误中，少数正确的事情之一是他们的堆栈和特定语言/框架的偏好以完成其功能。

我是 Scala 的菜鸟，但我觉得编程语言并不难。我浏览了很多关于 Play vs Lift、Scala 中的 Web 开发、Scala 的优缺点以及许多此类内容的博客文章。我转向 Scala 的唯一原因是我对 Python 的并发性以及它的不可扩展性非常恼火。（我是 twisted 的忠实粉丝，并将它用于无数其他事情，但我只是不认为 Django /Rails 用于处理并发、稳定、响应式的 Web 应用程序。）

我的问题是，我错了吗？考虑到一切，跳到 Scala 是否值得？我真的希望得到一些好的答案，因为我不想花费很长时间来完成我的网络应用程序的骨架版本，然后意识到它是不可扩展的。另外，什么是首选堆栈？工业用什么？（我知道很多问题，但是从 Django/Rails 跳到其他任何东西都是一件可怕的事情。）

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-06T08:58:39.707

我最近几天才开始学习游戏，我喜欢它。具有 Java 的所有优点（对我来说，这是与机器学习相关的）以及简单易用的 MVC 框架的所有可爱之处。

Play 对网络套接字有很好的支持，并且有一个可爱的聊天应用程序示例，您可以使用它来查看它是否符合您的要求。

[https://github.com/playframework/Play20/tree/master/samples/scala/websocket-chat](https://github.com/playframework/Play20/tree/master/samples/scala/websocket-chat)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-06T07:46:51.267

从 sweemeng 中学习前面提到的 gevent 方法：去吧。它甚至可以使用 gunicorn 进行 Django 集成。这里有一些文章可以帮助您入门并获得想法：

**好的介绍：**

*   [Gevent，长轮询和你](http://toastdriven.com/blog/2011/jul/31/gevent-long-polling-you/)
*   [走向绿色](http://dbinit.com/blog/going-green/)

**示例代码：**

*   [使用 Django 和 Gevent 进行更简单的长轮询](http://blog.gevent.org/2009/10/10/simpler-long-polling-with-django-and-gevent/)
*   [网络聊天演示](https://bitbucket.org/denis/gevent/src/45defea59ee8/examples/webchat/run.py)（也许完全符合您的要求）

**部署和库：**

*   [使用 gevent 运行 Web 应用程序](https://stackoverflow.com/questions/7855343/run-web-app-with-gevent/)
*   [使用 Gevent 的项目](http://code.google.com/p/gevent/wiki/ProjectsUsingGevent)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-06T07:01:44.310

不确定 django 集成，但 gevent 能够使用 websocket，并且长轮询是 gevent 上众所周知的模式。您可以将其作为开发此类应用程序的起点。

你也可以使用龙卷风，但我不熟悉。

最重要的是，这是我朋友的一个项目，它将 django 与 tornado 及其 socket.io 插件集成在一起 [https://github.com/felixleong/tornadio-with-django](https://github.com/felixleong/tornadio-with-django)

# mysql - 如何优化包含 1.6+ 百万条记录的 MySQL 表以进行 LIKE '%abc%' 查询

> ID：11356965
> 
> 赞同：4
> 
> 时间：2012-07-06T06:29:47.020
> 
> 标签：mysql, sql, optimization

我有一个具有这种结构的表，它目前包含大约 160 万条记录。

```
CREATE TABLE `chatindex` (
    `timestamp` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
    `roomname` varchar(90) COLLATE utf8_bin NOT NULL,
    `username` varchar(60) COLLATE utf8_bin NOT NULL,
    `filecount` int(10) unsigned NOT NULL,
    `connection` int(2) unsigned NOT NULL,
    `primaryip` int(10) unsigned NOT NULL,
    `primaryport` int(2) unsigned NOT NULL,
    `rank` int(1) NOT NULL,
    `hashcode` varchar(12) COLLATE utf8_bin NOT NULL,
    PRIMARY KEY (`timestamp`,`roomname`,`username`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_bin; 
```

roomname 和 username 列都可以包含相同的确切数据，但每个项目的唯一性和重要位来自于将时间戳与这两个项目相结合。

开始需要一段时间（10-20 秒）的查询是这样的：

```
SELECT timestamp,roomname,username,primaryip,primaryport 
    FROM `chatindex`
    WHERE username LIKE '%partialusername%' 
```

我究竟能做些什么来优化这个？我不能这样做`partialusername%`，因为对于某些查询，我将只有一小部分实际用户名的中心，而不是实际值开头的前几个字符。

编辑：

另外，狮身人面像对于这个特定目的会更好吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-06T06:39:03.003

使用[全文索引](http://dev.mysql.com/tech-resources/articles/mysql56-labs-july2011.html)，这些实际上就是为此目的而设计的。现在 InnoDb 在 MySQL 5.6.4 中支持全文索引。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-06T06:54:44.200

1.  在表列用户名上创建索引（*全文索引*）。
2.  作为一个想法，您可以在此表上创建一些视图，这些视图将包含基于字母或其他条件的过滤数据，并基于此您的代码将决定使用哪个视图来获取搜索结果。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-06T07:32:01.840

您应该使用 MyISAM 表进行`Fulltext`搜索，因为它支持 FULLTEXT 索引，MySQL v5.6+ 仍处于开发阶段，您不应该将其用作生产服务器，并且可能需要大约 1 年的时间才能进入 GA。

`column`现在，您应该将此表转换为 MyISAM 并添加在 where 子句中引用的 FULLTEXT 索引：

这些链接可能很有用：

[http://dev.mysql.com/doc/refman/5.0/en/create-index.html](http://dev.mysql.com/doc/refman/5.0/en/create-index.html)

[http://dev.mysql.com/doc/refman/5.1/en/fulltext-fine-tuning.html](http://dev.mysql.com/doc/refman/5.1/en/fulltext-fine-tuning.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-06T10:02:37.090

如果您对当前查询进行解释，您将看到您正在对表进行全表扫描，这就是它如此慢的原因。用户名上的索引将大大加快搜索速度，因为索引可以被 MySQL 缓存，并且只有匹配的用户才能访问表行条目。

全文索引*不会*`%fred%`对匹配等搜索有实质性帮助，`oldfredboy`所以我不知道为什么其他人建议使用它。全文索引的作用是创建一个基于单词列表的索引，以便您搜索“解释当前查询”之类的列表，全文引擎将包含“解释”的行 ID 与包含“当前”的行 ID 和包含“查询”的行 ID 相交" 获取包含所有三个 ID 的列表。添加全文索引会大大增加表的插入、更新删除成本，因此确实会增加性能损失。此外，您需要使用全文特定的“匹配”语法来充分利用全文索引。

如果您在“[mysql] fulltext like”上进行问题搜索以查看对此的进一步讨论。

一个普通的索引会做你需要的一切。像 '%fred%' 这样的搜索需要对索引进行全面扫描，因此您需要尽可能保持索引精简。此外，如果匹配“fred%”的命中率很高，那么首先尝试类似“fred%”搜索可能也是值得的，因为这将执行索引范围扫描。

还有一点，为什么要使用**时间戳、房间名、用户名作**为主键？这对我来说没有意义。如果您不使用主键作为访问路径，那么 auto_increment id 会更容易。我会认为**房间名称、时间戳、用户名**会有意义，因为您肯定倾向于在时间窗口内访问房间。

仅添加您将使用的索引。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-06T06:43:09.193

在 MSSQL 上，这是将全文索引与 CONTAIN 子句一起使用的完美案例。LIKE 子句在如此大的表和要搜索的文本变体如此多的情况下未能获得良好的性能。

看看这个链接，有很多与[动态搜索条件](http://www.sommarskog.se/dyn-search-2008.html)相关的问题。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-19T02:38:38.657

对于如此大量的数据，表索引（全文索引）是必须的。如果可能的话，进一步进行表分区。所以这些肯定会提高性能。

# php - break 的默认参数值

> ID：11356966
> 
> 赞同：1
> 
> 时间：2012-07-06T06:29:48.043
> 
> 标签：php, html, control-structure

谁能告诉`break`控制结构中的默认参数值是什么，而不是`break 1 , break 2 ,..`
**示例：-**

```
for($i=0;$i<10;$i++){  
   for($j=0;$j<$i;$j++){
      if($j == 4){
          break;
      }else{
          echo $i+$j."<p>";
      }
   }
} 
```

在上面的例子中，我`break`没有使用参数。那么它将采用哪个值..？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T06:31:43.420

的默认参数值`break`是`1`（即最里面的控制结构）。另见： http: [//php.net/manual/en/control-structures.break.php](http://php.net/manual/en/control-structures.break.php)

# java - Eclipse 插件 - TableViewer 适用于需要多个表时

> ID：11356967
> 
> 赞同：1
> 
> 时间：2012-07-06T06:29:50.237
> 
> 标签：java, eclipse-plugin, swt, eclipse-rcp, jface

我正在为屏幕定义编辑器编写一个 Eclipse 插件。预览页面将有多个不同行/列定义的表格，每个单元格的内容实际上是一个控件定义（即标签、文本框等）。预览版的一些基本要求是：

1.  任何单元格上的用户选择都会将控件属性发布到另一个视图。
2.  根据控件类型应用单元格样式。

目前使用JFace TableViewers，但存在以下问题： 1\. 通过getSite().setSelectionProvider() 只能将一个TableViewer 注册为选择提供者。如何监听我所有桌子上的选择变化？2\. TableViewer 似乎不允许单元格样式。3\. 使用 TableCursor 以编程方式处理单元格选择，但是当我在另一个表格中选择另一个单元格时，上一个表格中的单元格仍然突出显示。

对于我的目的，是否有比 TableViewer 更合适的布局？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T15:53:45.250

您可以使用[这种方法](http://code.google.com/a/eclipselabs.org/p/emf/source/browse/org.eclipselabs.emf.addon/src/org/eclipselabs/emf/addon/viewers/SelectionProviderIntermediate.java?r=975cbb8ca9e16d9018edb0c2c5f7c9dd3cdab8b5)在多个表中进行一些修改来支持选择（为每个表查看器添加侦听器，以便如果其中一个被选中，它会自动成为委托）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T14:09:23.623

关于第 2 点，单元格样式，TableViewers 确实允许自定义单元格数据的显示。 [在此处](http://www.vogella.com/articles/EclipseJFaceTableAdvanced/article.html#jfacetable_styledlabelprovider%5D)查看有关如何开始使用它的一些想法。

# php - 使用 imagecreate 函数时出错

> ID：11356969
> 
> 赞同：-2
> 
> 时间：2012-07-06T06:29:59.387
> 
> 标签：php

```
<?php

header("Content-Type: image/png");

$im = @imagecreate(110, 20) or die("Cannot Initialize new GD image stream");

$background_color = imagecolorallocate($im, 0, 0, 0);

$text_color = imagecolorallocate($im, 233, 14, 91);

imagestring($im, 1, 5, 5,  "A Simple Text String", $text_color);

imagepng($im);

imagedestroy($im);

?> 
```

当我执行上面的代码时，我遇到了这样的错误

“图像无法显示，因为它包含错误”

服务器中也显示相同的错误

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T06:45:05.327

我将在这里冒险并猜测您在 PHP 标记之前和/或之后有某种内容。

确保您的文件开头`<?php`没有**任何**内容（您可能需要检查[字节顺序标记](http://en.wikipedia.org/wiki/Byte_order_mark)）。

另外，省略结束`?>`标签。您不需要它，它将解决任何尾随空格问题。

# python - 从另一个 python 程序运行 python 程序（有一定的要求）

> ID：11356971
> 
> 赞同：5
> 
> 时间：2012-07-06T06:30:16.230
> 
> 标签：python, subprocess, python-import, execfile

假设我有两个 python 脚本`A.py`和`B.py`. 我正在寻找一种从 A 内部运行 B 的方法，即：

1.  B 相信它是`__main__`（以便`if __name__=="__main__"`B 中的块中的代码将运行）
2.  B 实际上不是`__main__`（因此它不会覆盖`"__main__"`sys.modules 中的条目）
3.  B 中引发的异常传播到 A（即，可以用`except`A 中的子句捕获）。
4.  如果没有捕获这些异常，则会生成正确的回溯引用 B 中的行号。

我尝试了各种技术，但似乎没有一个能满足我的所有要求。

*   使用子流程模块中的工具意味着 B 中的异常不会传播到 A。
*   `execfile("B.py", {})`运行 B，但它认为它不是主要的。
*   `execfile("B.py", {'__name__': '__main__'})`使 B.py 认为它是主要的，但它似乎也搞砸了异常回溯打印，因此回溯引用 A 内的行（即真正的`__main__`）。
*   使用`imp.load_source`with`__main__`作为名称几乎可以工作，除了它实际上修改了 sys.modules，因此踩踏了现有的值`__main__`

有什么办法可以得到我想要的吗？

（我这样做的原因是因为我正在对现有库进行一些清理。这个库没有真正的测试套件，只有一组产生特定输出的“示例”脚本。我试图利用这些作为测试以确保我的清理不会影响库执行这些示例的能力,所以我想从我的测试套件中运行每个示例脚本.我希望能够在测试脚本中看到这些脚本的异常所以测试脚本可以报告失败的类型，而不仅仅是在示例脚本引发一些异常时报告通用的 SubprocessError。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T07:08:41.267

您的用例是有道理的，但我仍然认为您最好重构测试以便它们可以在外部运行。

你测试脚本有这样的东西吗？

```
def test():
    pass

if __name__ == '__main__':
    test() 
```

如果没有，也许您应该将测试转换为调用函数，例如`test`. 然后，从您的主测试脚本中，您可以：

```
import test1
test1.test()
import test2
test2.test() 
```

为运行测试提供一个通用接口，测试本身使用该接口。检查中有一大块代码`__main__`不是一件好事。

对不起，我没有回答你问的问题，但我觉得这是正确的解决方案，不会偏离原始测试代码太远*。*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T07:24:45.810

回答我自己的问题，因为结果很有趣，可能对其他人有用：

事实证明我错了：`execfile("B.py", {'__name__': '__main__'}`毕竟是要走的路。它*确实*正确地产生了回溯。我看到的行号不正确不是*异常*，而是*警告*。这些警告是使用`warnings.warn("blah", stacklevel=2)`. 该`stacklevel=2`参数应该允许在使用已弃用的事物的地方而不是在警告调用时引发诸如弃用警告之类的事情（请参阅[文档](http://docs.python.org/library/warnings.html#warnings.warn)）。

但是，似乎 execfile-d 文件不计入此目的的“堆栈级别”，并且出于某种目的是不可见的`stacklevel`。因此，如果 execfile-d 模块顶层的代码导致堆栈级别为 2 的警告，则警告不会在 execfile-d 源文件的正确行号处引发；相反，它在运行 execfile 的文件的相应行号处引发。

这是不幸的，但我可以忍受它，因为这些只是警告，所以它们不会影响测试的实际性能。（起初我没有注意到只有警告受到行号不匹配的影响，因为测试输出中混杂了很多警告和异常。）

# jquery - 带有cookie问题的Jquery更改类

> ID：11356973
> 
> 赞同：0
> 
> 时间：2012-07-06T06:30:22.597
> 
> 标签：jquery, codeigniter, cookies

首先抱歉，我是 jquery 的初学者。

我的问题是我试图用 jquery cookie 制作一个类切换器。

它工作正常只有一个问题。当我在主页上选择工作时，每个工作都有一个唯一的 ID，并且旁边有一个按钮，当用户单击它时，它会将其保存到收藏夹，再次单击将其删除。如果它保存按钮 cganges 为黄色，如果删除更改为蓝色。

我能够在页面刷新后保留课程，但我的问题是我真正无法解决的是，如果我列出了更多工作，点击它会保留课程，然后我添加另一个它会从另一个课程中删除并添加它点击了什么，因此它不会仅将其保留在多个上。

请有人给我一个提示吗？

我的代码：

html

```
<a href="#" id="<?php echo $res->info_id; ?>" class="favorite btn btn-primary btn-mini" title="Add to favorite">
  <i class="icon-star icon-white"></i>
</a> 
```

jQuery

```
(function () {

//save to favorites
$('.favorite').on('click', function(e){
    e.preventDefault();
    var data = [],
    newclass = 'btn-warning',
    oldcalss = 'btn-primary',
    fav = $(this);
    favId = fav.attr('id'),

    $.ajax({
      type: "POST",
      url: base_url + 'ajax/add_favorite/' + favId,
      data: favId,
      dataType: "json",
      success: function(data) { 
        if(data.status == "removed"){
          $.cookie('keepClass', 'btn-primary');
          $.cookie('jId', favId);
          fav.removeClass(newclass)
          .addClass($.cookie('keepClass'))
          .attr("title", "Add to favorites");
        } else {
          $.cookie('keepClass', 'btn-warning');
          $.cookie('jId', favId);
          fav.removeClass(oldcalss)
          .addClass($.cookie('keepClass'))
          .attr("title", "Remove from favorites");;
        }
      }
    });
});

$('#' + $.cookie('jId')).attr('class', "btn btn-mini " + $.cookie('keepClass'));

})(jQuery); 
```

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T07:19:41.407

您需要使用 cookie 持久存储最喜欢的工作列表。为了存储项目列表，我们在 javascript 中使用数组，但不幸的是，您只能将字符串保存在 cookie 中。

已经询问并回答了在 cookie 中存储值列表的类似问题，请参见此处[如何在 jquery cookie 中存储数组？](https://stackoverflow.com/questions/1959455/how-to-store-an-array-in-jquery-cookie)

实现它，创建一个名为“favList”的列表，

```
var list = new cookieList("favList"); 
```

现在您应该将作业的 ID“添加/删除”到“favList”以使其成为“fav”。

```
list.add(favId);
list.remove(favId); 
```

当页面加载时，检索列表遍历它们并用你的类标记所有最喜欢的项目，如果你想标记所有不在列表中的项目添加你的逻辑。

```
$(document).ready(function(){
  var list = new cookieList("favList"); //no need to create this again for click logic
  $.each(list.items() , function(index, value){
    $('#' + value).addClass('iAmAFavItem');
    });

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T13:24:39.070

首先感谢大家的回复，我给了你们所有人的支持，但我今天坐下来并设法按照我的逻辑做到了。

```
var cookieName = 'fav_';
$('.favorite').each(function(){
    var id = $(this).attr('id'), cookie = cookieName + id;
    if($.cookie(cookie) !== 'save' ){
        $(this).addClass('btn-primary');
    } else if($.cookie(cookie) !== 'remove') {
        $(this).addClass('btn-warning');
    }

}).on('click', function(e){
    e.preventDefault();
    var fav = $(this);
    var id = fav.attr('id');

    $.ajax({
        type: "POST",
        url: base_url + 'ajax/add_favorite/' + id,
        data: id,
        dataType: "json",
        success: function(data)
        {   
            if(data.status == "removed")
            {
                $.cookie(cookieName + $(fav).attr('id'), 'remove');
                $(fav).removeClass('btn-warning').addClass('btn-primary');
            } else {
                $.cookie(cookieName + $(fav).attr('id'), 'save');
                $(fav).removeClass('btn-primary').addClass('btn-warning');
            }
        }

    });

}); 
```

再次感谢大家

# xcode - Xcode 4.3 在启动时冻结

> ID：11356974
> 
> 赞同：0
> 
> 时间：2012-07-06T06:30:30.700
> 
> 标签：xcode, xcode4, xcode4.3

我已经安装了 Xcode 4.3 版本。我无法单击 Xcode 栏的任何按钮，因为 Xcode 在启动时冻结，如果我在栏上移动光标，我只有加载光标可用。所以我不能点击窗口选项卡来恢复欢迎窗口，我也不能打开一个新项目。

好像Xcode没有加载任何项目，可能是它没有找到任何项目的问题，反正它继续搜索。如果我尝试启动现有项目，Xcode 会尝试打开它，但结果始终是带有“No Editor”的空白窗口。

请帮助我摆脱这个问题，或者任何人请告诉我如何删除 Xcode 的所有日志、设置和备份文件

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T10:04:20.390

我解决了这个问题 :) 只需下载并安装最新版本的 iTunes，它已修复 :) 现在我可以使用 Xcode。我不知道 Xcode 和 iTunes 之间有什么联系。干杯....

# java - Java正则表达式替换忽略第一个匹配

> ID：11356975
> 
> 赞同：0
> 
> 时间：2012-07-06T06:30:35.800
> 
> 标签：java, regex

```
mediaSourceSpecificJunkCharacters=mediaSourceSpecificJunkCharacters+",";   
Pattern p = Pattern.compile("\\[(.*?)\\],",Pattern.CASE_INSENSITIVE | Pattern.DOTALL);
Matcher matcher = p.matcher(mediaSourceSpecificJunkCharacters);
while(matcher.find()) {
    String stringToMatch=matcher.group(1);
    System.out.println("string to match "+stringToMatch);
    originalText=originalText.replaceAll(stringToMatch.trim(),"");
} 
```

这里`originalText="this is data from youtube youtube1 youtube2 youtube3 youtube4";` 和`mediaSourceSpecificJunkCharacters=[youtube2],[youtube3],[youtube4]`

第一场比赛是 youtube3 而不是 youtube2....所以 youtube2 永远不会被替换...为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T06:37:26.830

你甚至没有`youtube1`在你的`mediaSourceSpecificJunkCharacters`. 将其更改为

```
 String mediaSourceSpecificJunkCharacters = "[youtube1],[youtube2],[youtube3],[youtube4]"; 
```

并将您的模式更改为

```
 Pattern p = Pattern.compile("\\[(.*?)\\]", Pattern.CASE_INSENSITIVE | Pattern.DOTALL); 
```

如果你也想替换`youtube4`，`,`最后会在你的代码中阻止这个。

# ios - 如何将一个数组添加到 2 个部分 UITableView

> ID：11356979
> 
> 赞同：0
> 
> 时间：2012-07-06T06:30:47.270
> 
> 标签：ios, uitableview

这是我的代码：

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    NSInteger numberOfRowsPerSection = 0;

    if (section == 0) {
        for (int i = 0; i < [[[BNRItemStore sharedStore] allItems] count]; i ++) {
            BNRItem *item = [[[BNRItemStore sharedStore] allItems] objectAtIndex:i];
            if ([item valueInDollars] > 50) {
                numberOfRowsPerSection ++;
            }
        }
    }else{
        for (int i = 0; i < [[[BNRItemStore sharedStore] allItems] count]; i ++) {
            BNRItem *item = [[[BNRItemStore sharedStore] allItems] objectAtIndex:i];
            if ([item valueInDollars] == 73) {
                numberOfRowsPerSection ++;
            }
        }
    }

    return numberOfRowsPerSection;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"UITableViewCell"];

    if (!cell) {
        cell =[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"UITableViewCell"];
    }

    BNRItem *p = [[[BNRItemStore sharedStore] allItems] objectAtIndex:[indexPath row]];
    if ([p valueInDollars] > 50 && indexPath.section == 0) {
        [[cell textLabel] setText:[p description]];
    }else if(indexPath.section == 1){
        [[cell textLabel] setText:[p description]];
    }

    return cell;
}

-(NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    return 2;
} 
```

我想在一个部分显示结果 > 50，另一部分显示其余结果，但我不知道该怎么做。我在每个部分都得到重复的结果。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T06:52:39.833

您的代码没有反映您所描述的内容（ > 50 和 == 73 有点相交）：

```
if (section == 0) {
    for (int i = 0; i < [[[BNRItemStore sharedStore] allItems] count]; i ++) {
        ...
        if ([item valueInDollars] > 50) {
            ...
        }
    }
}else{
    for (int i = 0; i < [[[BNRItemStore sharedStore] allItems] count]; i ++) {
        ...
        if ([item valueInDollars] == 73) {
            ...
        }
    }
} 
```

这条线也不正确：

BNRItem *p = [[[BNRItemStore sharedStore] allItems] objectAtIndex:[indexPath row]];

因为 indexPath.row 将与 indexPath.section 一起使用（这意味着该行相对于该部分，而不是整个表）。这是导致两个部分的结果相同的问题的主要原因。

无论如何，我对您的建议是执行预处理步骤（可能在 viewDidLoad 或其他地方）将您的数组拆分为 2 个数组（每个部分一个），而不是两个部分只使用一个数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T06:49:27.053

如果您使用的是**NSFetchedResultsController**，您可以使用**sectionNameKeyPath:**参数来指定“分组依据”参数。在您的情况下，您可能只需为数组中的对象创建一个简单的 0/1 属性。

```
[[NSFetchedResultsController alloc] initWithFetchRequest:fetchRequest 
                                    managedObjectContext:_managedObjectContext 
                                      sectionNameKeyPath:@"threshold"
                                               cacheName:@"Root"]; 
```

# workflow - 工作流书签问题

> ID：11356980
> 
> 赞同：0
> 
> 时间：2012-07-06T06:30:49.617
> 
> 标签：workflow, workflow-foundation-4, workflow-foundation

WF 任务 - T1 > T2 > T3 步骤

1 * 工作流实例在第一个任务 T1 处启动并添加书签 2 * 尝试加载工作流实例，实例成功启动并移至下一个任务，但书签信息未更新到 [System.Activities.DurableInstancing].[InstancesTable] 它仅显示旧书标记的信息

我尝试在书签和上下文的代码活动中跟踪工作流进入书签阶段并发送下一个任务 T2 的书签信息。 CreateBookmark(bookmarkName,new BookmarkCallback(OnReadComplete)); 被调用但它没有用新书签更新实例信息..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T07:24:41.597

在工作流再次持续存在之前，不会更新工作流持续性数据库。这是设计使然，因此如果您的应用程序崩溃，您可以从已知点重新启动。您可以通过将 Persist 活动添加到工作流来强制持久化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T13:19:48.513

添加“问题解决者”答案，您可以参考持久性点。 [http://msdn.microsoft.com/en-us/library/dd489420.aspx](http://msdn.microsoft.com/en-us/library/dd489420.aspx)

# android - Doc xml Parser android本地xml文件读取

> ID：11356982
> 
> 赞同：0
> 
> 时间：2012-07-06T06:31:02.330
> 
> 标签：android

我有一个本地 xml 文件。我在这里存储：res/xml/myxml.xml

```
<?xml version="1.0" encoding="utf-8"?>
<list>
<lists>
    <tag>College Website</tag>
    <value>http://www.nitk.ac.in/</value>
    <lastupdate>04-07-2012</lastupdate>
</lists>
<lists>
    <tag>College Images</tag>
    <value>http://studentsworld.nitk.ac.in/index.php?q=convocation.html</value>
    <lastupdate>25-9-2011</lastupdate>
</lists>
</list> 
```

我有循环文档。但是如何在文档解析器中连接本地 xml 文件。我不想要 url 模型，我想要一个本地 xml 文件。

```
for (int i = 0; i < nodeList.getLength(); i++) {

            Node node = nodeList.item(i);

            tag[i] = new TextView(this);
            value[i] = new TextView(this);
            lastupdate[i] = new TextView(this);

            Element fstElmnt = (Element) node;
            NodeList nameList = fstElmnt.getElementsByTagName("tag");
            Element nameElement = (Element) nameList.item(0);
            nameList = nameElement.getChildNodes();
            tag[i].setText("tag = " + ((Node) nameList.item(0)).getNodeValue());

            NodeList websiteList = fstElmnt.getElementsByTagName("value");
            Element websiteElement = (Element) websiteList.item(0);
            websiteList = websiteElement.getChildNodes();
            value[i].setText("value = " + ((Node) websiteList.item(0)).getNodeValue());

            NodeList lastupdateList = fstElmnt.getElementsByTagName("tag");
            Element lastupdateElement = (Element) lastupdateList.item(0);
            lastupdateList = lastupdateElement.getChildNodes();
            lastupdate[i].setText("lastupdate = " + ((Node) lastupdateList.item(0)).getNodeValue());

            layout.addView(tag[i]);
            layout.addView(value[i]);
            layout.addView(lastupdate[i]);

        }
    } catch (Exception e) {
        System.out.println("XML Pasing Excpetion = " + e);
    } 
```

我有 main.xml 文件，请给我一个代码

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T06:43:46.983

把你的 XML 文件放在 assets 文件夹中，然后试试这个

`InputStream raw = getApplicationContext().getAssets().open("simple.xml");`

试试这个

```
DocumentBuilderFactory dbFactory = DocumentBuilderFactory.newInstance();
DocumentBuilder dBuilder= dbFactory.newDocumentBuilder();
Document doc = dBuilder.parse(raw);
....
... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T07:00:48.000

将您的 XML 文件放在**assets**文件夹中并尝试这种方式

```
 String xml;
 Document doc;
 try{
 xml=getXML(getAssets().open("yourxmlfilename.xml"));
 }catch(Exception e){
     Log.d("Error",e.toString());
  }
 doc = XMLfromString(xml); 
```

其中**getXML**和 **XMLfromString**方法如下图

```
 //getXML   method
 public static String getXML(InputStream is)throws IOException {

    BufferedInputStream bis = new BufferedInputStream(is);
    ByteArrayOutputStream buf = new ByteArrayOutputStream();
    int result = bis.read();
    while(result != -1) {
      byte b = (byte)result;
      buf.write(b);
      result = bis.read();
    }        
    return buf.toString();
}

   //XMLfromString   method
  public final static Document XMLfromString(String xml){
     Document doc = null;

        DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
            try {

          DocumentBuilder db = dbf.newDocumentBuilder();

          InputSource is = new InputSource();
              is.setCharacterStream(new StringReader(xml));
              doc = db.parse(is); 

        } catch (ParserConfigurationException e) {
          System.out.println("XML parse error: " + e.getMessage());
          return null;
        } catch (SAXException e) {
          System.out.println("Wrong XML file structure: " + e.getMessage());
                return null;
        } catch (IOException e) {
          System.out.println("I/O exeption: " + e.getMessage());
          return null;
        }

            return doc;

  } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T06:48:49.797

请使用以下代码解析本地 xml，

```
InputStream in = this.getResources().openRawResource(R.raw.xmlfile); 
```

然后解析输入流，

```
DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance ();
DocumentBuilder db = dbf.newDocumentBuilder ();
Document document = db.parse(in, null); 
```

# qt - BB10 上的 QAugmentedReality

> ID：11356983
> 
> 赞同：2
> 
> 时间：2012-07-06T06:31:06.207
> 
> 标签：qt, nokia, augmented-reality, blackberry-10

我想在 BB10 上创建增强现实应用程序。但是 BB10 没有可用的 3rd 方库。所以我正在考虑使用诺基亚的 QAugmentedReality 来实现增强现实，因为黑莓说 Qt 应用程序将在 BB10 上运行。QT 中是否有任何示例 AR 应用程序，所以我可以在 BB10 上运行它并检查它是否工作，然后我开始开发我的应用程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T09:20:08.250

在QAugmentedReality的[官方教程中，最后有一个示例应用程序的链接。](http://www.developer.nokia.com/Community/Wiki/QAugmentedReality_-_Local_based_augmented_reality_component)然而，它是一个 .sis 文件，因此适用于 Symbian。不确定您是否可以简单地在 BB10 上执行该操作。

无论如何，您都可以按照本教程为 BlackBerry 编译它

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T09:59:36.787

WIkitude Lauche 用于 BB10 的增强现实 SDK。所以现在任何人都可以使用 Wikitude 构建他们的应用程序。 [http://www.wikitude.com/](http://www.wikitude.com/)

# php - php 文件 phpEclipse 中的 html/css/jquery/javascript 代码完成

> ID：11356987
> 
> 赞同：1
> 
> 时间：2012-07-06T06:31:52.727
> 
> 标签：php, html, css, code-completion, phpeclipse

这是我在这个网站上的第一篇文章。我搜索了很多，但找不到我要找的东西，所以我决定发布这个问题。

我是一名 php 开发人员。我使用dreamweaver 是因为我喜欢dreamweaver 的许多功能，例如代码/设计视图、PHP 文件中的html/css/jquery/javascript 代码完成。我从dreamweaver 切换的原因是它不提供php 调试。

我安装了 phpeclipse，发现它很有前途，但它缺少许多我在 Dreamweaver 中非常喜欢的功能。我设法为设计视图安装了网页编辑器，但 php 文件中的 html css 等代码完成不起作用。

是否可以在 phpeclipse 中添加所有这些功能？或者是否可以在 phpeclipse 以外的其他 php IDE 中找到所有这些功能？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T06:40:58.857

确实是的。以上有两种方式。Netbeans 7.2 提供了对 PHP 的强大支持，并且还有一些不错的插件。另一种方法是您可以在 eclipse 中安装 apatana studio 插件，该插件在 css、html 和 JavaScript 中提供自动完成功能。这两个 IDE 都很有前途。尝试在 phpeclipse 上安装 Apatana Studio，因为它是作为插件提供的。这将解决您的问题。我强烈支持 Apatana Studio 与您在 Eclipse 中的现有 PHP 设置。这里是链接[http://www.aptana.com/products/studio3/download](http://www.aptana.com/products/studio3/download)上面提到的链接是下载页面。

# iphone - 如何在钛 sdk - iPhone 中对齐 Web 视图活动指示器中心？

> ID：11356990
> 
> 赞同：1
> 
> 时间：2012-07-06T06:31:59.103
> 
> 标签：iphone, mobile, sdk, webview, titanium

我正在将 Web 视图添加到窗口中。打开窗口时，它会显示活动指示器，同时在垂直中心和水平左侧加载 web url 到视图。

在改变设备的方向时，它的活动指示器移动到视图的中心。

如何在打开窗口时在中心显示活动指示器。他们有什么方法可以重新加载/刷新窗口或 Web 视图吗？

问题出在 iPhone 设备上。 ![在此处输入图像描述](../Images/f7e0ca4794c9ed07c0301ef94599539e.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T08:39:01.367

创建 webview 而不使用顶部、底部、左侧、右侧然后活动指示器位于中心

```
var extwebview = Ti.UI.createWebView({
    url: hostUrl
}); 
```

希望这可以帮助你

# iphone - RemoveProfile 命令在 mdm 中不起作用

> ID：11356996
> 
> 赞同：0
> 
> 时间：2012-07-06T06:32:21.213
> 
> 标签：iphone, mdm, profiles

RemoveProfile 命令对我来说无法正常工作。

我正在使用以下 xml 设置正确的配置文件标识符

```
<?xml version='1.0' encoding='UTF-8'?><!DOCTYPE plist PUBLIC '-//Apple//DTD PLIST 1.0//EN' 'http://www.apple.com/DTDs/PropertyList-1.0.dtd'><plist version='1.0'>
                        <dict>
                        <key>Command</key>
                                <dict>
                                    <key>RequestType</key>
                                    <string>RemoveProfile</string>
                                    <key>Identifier</key>
                                    <string>com.apple.mgmt.mdmA3727E23-7914-59A6-FDCE-D79D9B42A209</string>
                                </dict>
                        <key>CommandUUID</key>
                        <string>B733FE25-101E-4959-4FAD-7262D7774169</string>
                        </dict>

                    </plist> 
```

此外，当我查询设备上安装的配置文件时，我会使用相同的配置文件标识符安装此配置文件。

有人可以指导我该命令有什么问题。

在 IPCU 上，我收到以下错误：

```
The profile “com.apple.mgmt.mdmA3727E23-7914-59A6-FDCE-D79D9B42A209” is not managed by MDM. 
```

如果我执行企业擦除，即通过上述相同的命令删除主注册配置文件，它会删除注册以及所有关联的配置文件，那么为什么它不允许我删除个人？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-21T03:02:20.413

两条信息：

1) 如果配置文件确实不受管理（未通过 MDM 安装），则无法使用 MDM 将其删除。

2) 我注意到并向 Apple 报告了一个错误，其中我的 iOS 设备失去了 MDM 配置文件和通过 MDM 安装的配置文件之间的关联。所以，你可能已经看到了这个错误。

# r - 在 R 内插值路径/曲线

> ID：11356997
> 
> 赞同：12
> 
> 时间：2012-07-06T06:32:26.157
> 
> 标签：r, interpolation, curve

在 R 中，我想在插值点之间插入一条具有恒定距离的任意路径。

测试数据如下所示：

```
require("rgdal", quietly = TRUE)
require("ggplot2", quietly = TRUE)
r <- readOGR(".", "line", verbose = FALSE)
coords <- as.data.frame(r@lines[[1]]@Lines[[1]]@coords)
names(coords) <- c("x", "y")
print(coords)

x         y
-0.44409  0.551159
-1.06217  0.563326
-1.09867  0.310255
-1.09623 -0.273754
-0.67283 -0.392990
-0.03772 -0.273754
 0.63633 -0.015817
 0.86506  0.473291
 1.31037  0.998899
 1.43934  0.933198
 1.46854  0.461124
 1.39311  0.006083
 1.40284 -0.278621
 1.54397 -0.271321

p.orig <- ggplot(coords, aes(x = x, y = y)) + geom_path(colour = "red") + 
    geom_point(colour = "yellow")
print(p.orig) 
```

![http://i.imgur.com/0tusA.png](../Images/b2ed83bdb0351504fb0bb066e868abf4.png)

我尝试了不同的方法，没有一个是真正令人满意的：

*   `aspline`（akima 包）
*   `approx`
*   `bezierCurve`
*   使用`tourr`-package 我无法开始

# `aspline`

`aspline`akima-package 在处理任意路径时做了一些奇怪的事情：

```
plotInt <- function(coords) print(p.orig + geom_path(aes(x = x, y = y), 
    data = coords) + geom_point(aes(x = x, y = y), data = coords))
N <- 50        # 50 points to interpolate

require("akima", quietly = TRUE)
xy.int.ak <- as.data.frame(with(coords, aspline(x = x, y = y, n = N)))
plotInt(xy.int.ak) 
```

![http://i.imgur.com/GVoES.png](../Images/c09683c1b11c8d61fd32ee1f86ce7f6b.png)

# `approx`

```
xy.int.ax <- as.data.frame(with(coords, list(x = approx(x, n = N)$y, 
    y = approx(y, n = N)$y)))
plotInt(xy.int.ax) 
```

![http://i.imgur.com/pqvTy.png](../Images/282c7f2f3a47f91c41fc0d6ac7a73e6f.png)

乍一看，`approx`还不错；但是，使用真实数据对其进行测试会给我带来插值点之间距离的问题。平滑的三次插值也是一件好事。

# `bezier`

另一种方法是使用`bezier-curves`; 我使用了以下 [实现](http://rosettacode.org/wiki/Cubic_bezier_curves#R)

```
source("bez.R")
xy.int.bz <- as.data.frame(with(coords, bezierCurve(x, y, N)))
plotInt(xy.int.bz) 
```

![http://i.imgur.com/aCFPG.png](../Images/bb628ac92697e629a06b43b33e7a824d.png)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-06T08:21:03.850

使用与您使用的相同方法的常规样条曲线怎么样`approx`？这适用于更大的数据吗？

![样条图](../Images/80ec32346e967a2eb116ac3187d525f2.png)

```
xy.int.sp <- as.data.frame(with(coords, list(x = spline(x)$y, 
                                             y = spline(y)$y))) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-06T19:48:58.513

考虑使用`xspline`or `grid.xspline`（第一个用于基本图形，第二个用于网格）：

```
plot(x,y, type='b', col='red')
xspline(x,y, shape=1) 
```

![在此处输入图像描述](../Images/0e7312c2ac28211f60bacaa6baa8861a.png)

您可以调整 shape 参数以更改曲线，此示例仅绘制 x 样条曲线，但您也可以让函数返回一组您自己绘制的 xy 坐标。

# android - 将 SMS 作为 HTTP 发布的 Android 应用程序

> ID：11356999
> 
> 赞同：1
> 
> 时间：2012-07-06T06:32:31.737
> 
> 标签：android

我正在考虑开发一个 android 应用程序，它会将短信作为 http 发送到 Web 应用程序。

我是 android 新手，所以不确定是否有这样的 API 或者可能是处理此任务的最佳方式。任何建议将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T20:24:31.267

我一直在考虑做同样的事情，直到我发现[SMSSync](http://smssync.ushahidi.com/)。它工作得很好，而且它是免费软件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-01-18T14:02:11.943

我迟到了，但我也需要这种 Android 应用程序。这是我的发现：

*   [SMSsync](http://smssync.ushahidi.com/)（@bjesus 已经[提到](https://stackoverflow.com/a/11619975/1252290)）：仅处理 SMS。最新提交 2017 年 2 月
*   [cht-gateway](https://github.com/medic/cht-gateway)（以前称为 medic-gateway）：产品的一部分，但可以独立使用。仅处理 SMS。最新提交 2021 年 7 月
*   [EnvayaSMS](http://sms.envaya.org/)：处理短信、彩信和电话。恕我直言，功能最多的一个。在 Android 8 上测试。最新提交于 2012 年 4 月

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-06T06:40:07.247

```
SmsManager smsManager = SmsManager.getDefault();  
List<String> divideContents = smsManager.divideMessage(content);    
for (String text : divideContents) {    
    smsManagersmsManager.sendTextMessage(destinationAddress, scAddress, text, sentIntent, deliveryIntent) ； 
} 
```