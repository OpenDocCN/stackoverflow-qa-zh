# StackOverflow 问答 10096000-10096999

# ruby-on-rails - 如何防止 has_and_belongs_to_many 删除选项删除 Rails 中正在使用的记录？

> ID：10096000
> 
> 赞同：1
> 
> 时间：2012-04-10T20:29:59.293
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord, has-and-belongs-to-many

```
class Assembly < ActiveRecord::Base
  has_and_belongs_to_many :parts
end

class Part < ActiveRecord::Base
  has_and_belongs_to_many :assemblies
end 
```

在控制台中：

```
part1 = Part.new
assembly1 = Assembly.new
assembly1.parts << part1
part1.delete
Parts.all
 => [] 
```

检查`assembly1.parts`表明仍然存在关系。（！）

当记录被删除时，这怎么可能？

此外，如何防止删除与装配相关联的零件？

在 Rails 3.0.7 中工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T20:40:26.417

您在这里所做的一切都是从内存中完成的（没有任何内容存储在数据库中）。

ActiveRecord`delete`方法将从数据库中删除一个对象，但它不会在内存中查找可能已经引用该对象的其他对象。我认为，如果您这样做`assembly1.parts.delete(part1)`，可能会达到您的预期。

如果您已将对象保存到数据库：

```
part1 = Part.create
assembly1 = Assembly.create(:parts => [part1])
assembly1.parts
# => [part1]
part1.delete
assembly1.parts
# => [part1]
assembly1.reload
assembly1.parts
# => [] 
```

请注意，即使它在数据库中`part1.delete`，也不一定会从您的程序集对象中删除它，直到您刷新内存中的集合或使用我前面提到的方法删除它`assembly1.parts.delete(part1)`

更新

我认为您*通常*不应该使用该`delete()`方法。你应该几乎总是使用`destroy()`. `delete()`只会触发对数据库的删除并忽略所有回调，我相信`:dependent => :destroy`模型中的 -style 声明。如果您使用该`destroy()`方法，那么您可以在模型中声明一个`before_destroy`回调：

```
class MyClass
  has_and_belongs_to_many :foos

  before_destroy :allow_destroy

  def allow_destroy
    foos.empty?
  end
end 
```

如果它是组件的一部分，那应该满足您不破坏它的要求。您无法停止`delete()`执行，因为它忽略回调： [ActiveRecord::Relation#delete 文档](http://apidock.com/rails/ActiveRecord/Relation/delete)

[有关模型回调](http://apidock.com/rails/ActiveRecord/Callbacks)的更多信息（文档）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T20:40:13.367

您需要添加`:dependent => :destroy`到控制器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-07-18T05:03:52.220

您可以通过使用[外键添加一些](https://edgeguides.rubyonrails.org/active_record_migrations.html#foreign-keys)[参照完整性](https://edgeguides.rubyonrails.org/active_record_migrations.html#active-record-and-referential-integrity)来防止`myobject.delete`在数据库中。我建议查看[将外键添加到 Rails 模型](https://stackoverflow.com/a/31882059/11710789)

在我的项目中，这并没有阻止`myobject.destroy`. 我认为这是因为它使用了[令人敬畏的嵌套 set gem](https://github.com/collectiveidea/awesome_nested_set)非常努力地为您处理级联破坏。

为了防止`myobject.destroy` 我发现[如何在 rails](https://stackoverflow.com/questions/123078/how-do-i-validate-on-destroy-in-rails#123190) supper 中“验证”销毁有帮助

我最终在迁移中使用了`before_destroy`以及添加了一些参照完整性。如果使用或使用，`add_foreign_key`这将防止删除。`myobject.delete``myobject.destroy`

在我的情况下`myobject`，它本身有很多，并且属于它自己。这就是`act_as_nested_set`处理。

**模型**

```
class Myobject
  before_destroy :allow_destroy
  # ^ this has to be above act_as_nested_set
  acts_as_nested_set

  def allow_destroy
    return true if self.descendants.blank?
    # the error is optional. 
    self.errors.add('Cannot_delete', 'myobject still has children')
    throw(:abort)
  end
end 
```

**移民**

```
class AddForignKeyToMyobject < ActiveRecord::Migration
  def change
    add_foreign_key :myobject, :myobject, column: :parent_id
  end
end 
```

# makefile - Makefile中的显式链依赖

> ID：10096007
> 
> 赞同：0
> 
> 时间：2012-04-10T20:30:36.513
> 
> 标签：makefile, gnu-make

当目录中的专用 Makefile 依赖于父目录中的主要 Makefile 时，要遵循什么模式？

我有：

```
/
/Makefile
/src
/src/Makefile
/tests
/tests/Makefile 
```

在`/Makefile`我有：

```
TESTING_COMMAND=something
dotest1:
    make -C tests/ $@ 
```

在`/tests/makefile`我有

```
dotest1:
    $(TESTING_COMMAND) $? 
```

如果我运行：

```
me@host:/ $ Make dotest1 
```

有用。但如果我从测试目录执行：

```
me@host:/tests/ $ Make dotest1 
```

它会尝试在 shell 中执行测试文件，因为 $(TESTING_COMMAND) 是空的，所以它的第一个参数变成了传递给 shell 的命令。

如果在 /tests/ 或 /src/ 目录中执行，我不一定需要它来工作，但需要一种优雅地失败的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T06:00:23.343

尝试通过命令行（或环境）发送所有内容对我来说似乎是个坏主意。这就是*发明*包容性的目的。将您的通用值放入一个单独的文件中，例如`config.mk`，然后在所有 makefile 中使用：

```
include config.mk 
```

让他们包括在内。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T23:18:28.657

你的设计让我害怕，但这将在主 Makefile 中起到作用：

```
TESTING_COMMAND=something
dotest1:
    make -C tests/ $@ TESTING_COMMAND=$(TESTING_COMMAND) 
```

如果你想`tests/Makefile`成功地失败，你有几个选择。如果只有一个目标依赖于`TESTING_COMMAND`，你可以让它打印一个警告并且什么都不做：

```
ifdef TESTING_COMMAND
dotest1:
    $(TESTING_COMMAND) $?
else
dotest1:
    @echo warning: TESTING_COMMAND not defined
endif 
```

或者，如果整个 Makefile 依赖于它，您可以让 Make 打印警告或中止：

```
ifndef TESTING_COMMAND
$(warning TESTING_COMMAND is undefined, but Make will try to us it anyway)
$(error TESTING_COMMAND is undefined, Make will now abort)
endif 
```

你也可以让它中止子make（运行的那个`tests/Makefile`），但仍然继续运行调用它的Make进程，但这有点痛苦。

# java - 根据比例因子转换鼠标坐标 - java swing

> ID：10096008
> 
> 赞同：2
> 
> 时间：2012-04-10T20:30:37.167
> 
> 标签：java, graphics, mouse, scale

我的程序涉及在我单击它们的地方绘制三角形。

有两个类，Ecad 和 Line 类。Ecad 是主框架，Line 类用于绘制线条。

```
import javax.swing.*;
import java.awt.*;
import java.awt.event.*;
import java.util.*;
public class Ecad extends JFrame implements MouseListener{
    ArrayList<Line2> lines=new ArrayList();
    public Ecad(){
        this.setVisible(true);
        this.setSize(600,400);
        this.addMouseListener(this);
    }
    public void mouseReleased(MouseEvent me){
        Point p1,p2,p3;
        int X=me.getX();
        int Y=me.getY();
        p1=new Point(X,Y);                                                       
        p2=new Point((int)(p1.getX()-100),(int)(p1.getY()+(1.732/2*200)));
        p3=new Point((int)(p1.getX()+100),(int)(p1.getY()+(1.732/2*200)));                                          
        Line2 l1=new Line2(p2,p1);
        Line2 l2=new Line2(p1,p3);
        Line2 l3=new Line2(p2,p3);
        lines.add(l1);
        lines.add(l2);
        lines.add(l3);
        this.repaint();
    }
     public void mouseClicked(MouseEvent me){

    }
    public void mouseExited(MouseEvent me){

    }
    public void mouseEntered(MouseEvent me){

    }
    public void mousePressed(MouseEvent me){
    }
    public void mouseMoved(MouseEvent me){

    }
    public static void main(String args[]){
        new Ecad();
    }
    public void paint(Graphics g){
        Graphics2D g2=(Graphics2D)g;
        super.paintComponents(g2);
        //g2.scale(0.5, 0.5);
        for(final Line2 r:lines){
            r.paint((Graphics2D)g2);
        }
    }
} 
```

这是线类

```
import java.awt.*;
public class Line2 {
    Point start,end;
    public Line2(Point a,Point b){    
        start=a;
        end=b;   
    }
    public void paint(Graphics2D g){
        g.drawLine((int)start.getX(),(int)start.getY(),(int)end.getX(),(int)end.getY());
    }

} 
```

在 Ecad 类的 paint() 方法中，如果我使用 scale 选项来放大或缩小，鼠标坐标不会被转换。所以在它被放大之后，如果我点击一个点，三角形就会被放置在另一个点上。当我缩放图形组件时，有没有办法转换鼠标坐标？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T21:51:01.000

同样，您应该使用比例尺和一个固定点来转换您正在绘制的形状（这里再次显示每个形状的固定点将是三角形的顶点，但如果您如此决定，它可能是中心。平移基于简单的几何原理，是 fixedPoint.x * (1 - scale) / scale，y 平移也是如此。

例如（这个使用 JPanel 作为您上面的示例应该）：

```
import javax.swing.*;
import javax.swing.event.*;
import java.awt.*;
import java.awt.event.*;
import java.awt.geom.*;
import java.util.*;
import java.util.List;

class EcadB extends JPanel {
   private static final int PREF_W = 800;
   private static final int PREF_H = 600;
   private List<MyShape> myShapes = new ArrayList<MyShape>();
   private double scale = 1.0;
   private JSlider slider = new JSlider(0, 200, 100);

   public EcadB() {
      addMouseListener(new MyMouseAdapter());
      setLayout(new BorderLayout());

      slider.setOpaque(false);
      slider.setMajorTickSpacing(20);
      slider.setMinorTickSpacing(10);
      slider.setPaintLabels(true);
      slider.setPaintTicks(true);
      slider.addChangeListener(new SliderChangeListener());
      add(slider, BorderLayout.SOUTH);
   }

   @Override
   protected void paintComponent(Graphics g) {
      super.paintComponent(g);
      Graphics2D g2 = (Graphics2D) g;
      g2.setRenderingHint(RenderingHints.KEY_ANTIALIASING,
            RenderingHints.VALUE_ANTIALIAS_ON);
      Graphics2D g2b = (Graphics2D)g2.create();
      g2b.scale(scale, scale);
      for (MyShape myShape : myShapes) {
         myShape.draw(g2b, scale);
      }
      g2b.dispose();
   }

   public void setScale(double scale) {
      this.scale = scale;
      repaint();
   }

   @Override
   public Dimension getPreferredSize() {
      return new Dimension(PREF_W, PREF_H);
   }

   private class MyMouseAdapter extends MouseAdapter {
      @Override
      public void mousePressed(MouseEvent e) {
         Point2D p1 = e.getPoint();
         Point2D p2 = new Point((int) (p1.getX() - 100),
               (int) (p1.getY() + (1.732 / 2 * 200)));
         Point2D p3 = new Point((int) (p1.getX() + 100),
               (int) (p1.getY() + (1.732 / 2 * 200)));
         Path2D path = new Path2D.Double();
         path.moveTo(p1.getX(), p1.getY());
         path.lineTo(p2.getX(), p2.getY());
         path.lineTo(p3.getX(), p3.getY());
         path.lineTo(p1.getX(), p1.getY());

         myShapes.add(new MyShape(path, p1));
         repaint();
      }
   }

   private class SliderChangeListener implements ChangeListener {
      @Override
      public void stateChanged(ChangeEvent arg0) {
         double value = slider.getValue() / 100.0;
         setScale(value);
      }
   }

   public static void main(String args[]) {
      // new Ecad();
      SwingUtilities.invokeLater(new Runnable() {
         public void run() {
            EcadB ecadB = new EcadB();
            JFrame frame = new JFrame("Scale");
            frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
            frame.getContentPane().add(ecadB);
            frame.pack();
            frame.setLocationRelativeTo(null);
            frame.setVisible(true);
         }
      });
   }
}

class MyShape {
   Shape shape;
   Point2D fixedPoint;

   public MyShape(Shape shape, Point2D fixedPoint) {
      this.shape = shape;
      this.fixedPoint = fixedPoint;
   }

   public void draw(Graphics2D g2, double scale) {
      Graphics2D g2b = (Graphics2D) g2.create();
      double tx = fixedPoint.getX() * (1.0 - scale) / scale;
      double ty = fixedPoint.getY() * (1.0 - scale) / scale;
      g2b.translate(tx, ty);
      g2b.draw(shape);
      g2b.dispose();
   }
} 
```

请注意，我在转换我的 Graphics 对象之前制作了它们的副本，以免对可能由 Graphics 对象绘制的其他对象产生转换效果。例如，如果您摆脱了我在 JPanel`paintComponent(...)`方法中使用的 Graphics2D 副本，您会发现 JSlider 与其他所有内容一起缩放。

# html - 在 Outlook 2010 中打破 html 电子邮件中的长词

> ID：10096012
> 
> 赞同：19
> 
> 时间：2012-04-10T20:30:46.737
> 
> 标签：html, html-email, outlook-2010

我正在接受最终用户输入并将其插入到 HTML 电子邮件中。但是，如果最终用户输入了一个长 URL 或非常长的单词，它会通过将列或 div 扩展到指定的宽度之外来破坏我在 Outlook 2010 中的 HTML 布局。

在 Chrome、Firefox、IE7+ 和 Safari 中，我可以使用 style="table-layout:fixed" 将表格列强制为特定宽度。但是 Outlook 2010 忽略了这一点，长字将表格宽度推到了固定宽度之外。

使用 div，在 Chrome、Firefox、IE7+ 和 Safari 中，我可以使用 style="word-wrap:break-word; overflow:hidden; width:100px" 来修复 div 宽度。但在 Outlook 2010 中，它会将 div 推出超出固定宽度。

如何让 Outlook2010 换行长字，并遵守固定宽度？

这是我的示例 HTML：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
</head>
<body>
<table width="400" style="table-layout: fixed" border="1">
    <tr>
        <td width="100">
            yo
        </td>
        <td width="300">
            Don't move me
        </td>
    </tr>
</table>
<table width="400" style="table-layout: fixed" border="1">
    <tr>
        <td width="100" style="word-wrap: break-word; overflow: hidden; width: 100px" border="1">
            yoooooooooooooooooooooooooooooooooooooooooooooooooooooo
        </td>
        <td width="300">
            Ya moved me
        </td>
    </tr>
</table>
<table width="400" border="1">
    <tr>
        <td width="100">
            <div style="word-wrap: break-word; overflow: hidden; width: 100px" border="1">
                yoooooooooooooooooooooooooooooooooooooooooooooooooooooo
            </div>
        </td>
        <td width="300">
            Ya moved me
        </td>
    </tr>
</table>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-09-05T19:25:29.773

使用 Microsoft 专有`word-break:break-all;`

```
 <td style="word-break:break-all;"> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-04-10T16:50:26.777

我知道我迟到了，但我可以为其他遇到这篇文章并想要使用该属性的人提出的建议`word-break:break-all;`是将你需要在元素中插入的单词包装起来`<td>`，然后再应用`word-break:break-all;`。

像这样：

```
<td>Serial #: <a href="#" style="word-break:break-all;">1111222233334444555566667777888899990000</a></td> 
```

在此注释中，您还可以使用其他东西来打破长词，如`<wbr>`元素，或“零宽度空格字符”又名 ZWSP，即`&#8203;`，如果您想要在文本中断时使用连字符，请使用`&shy;`.

检查我在 CodePen 中制作的这个（现在很难看><）演示：[长字符串单词中的断字。](http://codepen.io/ricardozea/pen/f455c13ddcfd96b11794cae1f9b85cbe)

以下链接中的更多信息：

*   [wbr 标签](http://www.quirksmode.org/oddsandends/wbr.html)- QuirksMode.org
*   [`<wbr>`](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/wbr)- MDN - Mozilla 开发者网络
*   [wbr (HTML 元素)](http://reference.sitepoint.com/html/wbr) - SitePoint.com

希望这可以帮助。

# php - S3 SDK 破坏我的网站

> ID：10096014
> 
> 赞同：1
> 
> 时间：2012-04-10T20:30:52.160
> 
> 标签：php, amazon-s3

**我的问题：**

```
require_once '/includes/aws-sdk-1.5.2/sdk.class.php'; 
```

**我的环境：** 我有一个非常标准的 PHP 站点，用于`__autoload()`获取我需要的任何类。但是，我现在需要包含 SDK 以将文件发送到 S3，但只是要求该库似乎会超出整个应用程序的范围，因此随后的任何代码都会被破坏。

**例子：**

```
// Save to S3
require_once '/var/www/html/system/aws-sdk-1.5.2/sdk.class.php';

$s3 = new AmazonS3();

if( ! $s3->if_bucket_exists(S3_BUCKET) )
    throw new Exception('S3 bucket does not exist.');

$response = $s3->create_object(S3_BUCKET, $temp_file['s_unique_name'], array(
    'fileUpload' => $_FILES['my_file']['tmp_name'],
    'acl'        => $s3::ACL_PUBLIC
));

// Save file
$photo = new vehicle_photo();
$photo->i_vehicle = $i_vehicle;
$photo->s_file    = $temp_file['s_url'];
$photo->s_label   = $_FILES['my_file']['name'];
$photo->save(); 
```

因此，`// Save to S3`启用代码段后`vehicle_photo`，除了在此之后可能使用的所有其他类之外，将无法再找到以下类。如果我禁用它，一切正常。

这里发生了什么事？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-10T20:37:51.107

听起来自动加载机制是冲突的。您可能会发现这很有帮助：[https](https://forums.aws.amazon.com/thread.jspa?threadID=85239) ://forums.aws.amazon.com/thread.jspa?threadID=85239 。此外，`spl_autoload_register`它比普通的旧更好`__autoload`- 考虑将您的自动加载器代码迁移到那个。

# php - 从 2 个表中选择多个数据，单击后按钮将禁用

> ID：10096015
> 
> 赞同：0
> 
> 时间：2012-04-10T20:30:57.247
> 
> 标签：php, mysql

我有 2 个表...如何从表 pelajar 中选择所有数据。同时..单击+按钮后..它将禁用...

我的 if else 是这样的：

```
if ((penyertaan.no_matrik==pelajar.no_matrik)&&(penyertaan.status_mohon ='wajib'))
{
    echo "<input type=\"button\" name=\"tambah_disable\" id=\"tambah_disable\" value=\"+\" disabled=\"disabled\"/>";
} 
```

我在表格下方包含了属性和数据。

表 1：pelajar 属性：nama、no_matrik、kod_kursus、tahun 数据：nama = NADIA、no_matrik = 1、kod_kursus = BIT、tahun = 1

表 2：penyertaan 属性：no_matrik，status_mohon 数据：no_matrik = 1，status_mohon = wajib

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T20:38:16.917

From what I understand you want to disable the button after someone clicks it once. You'll have to use javascript for that.

```
document.getElementById("button_id").disabled = true; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T20:44:22.190

如果您使用的是 jQuery，您可以像这样禁用该按钮：

```
$('#tambah_disable').attr("disabled", true); 
```

# ruby-on-rails - 无法在 resque-status 哈希上设置元数据

> ID：10096018
> 
> 赞同：0
> 
> 时间：2012-04-10T20:31:07.297
> 
> 标签：ruby-on-rails, resque, resque-meta

根据 GitHub 上的 resque-status 主页，我应该能够从工作中传回数据。出于某种原因，这似乎对我不起作用。如果其他人遇到此问题并解决它，我想知道如何解决。

我在 Rails 3.2.3 应用程序中将 resque-status 与 JRuby 1.6.5 一起使用。

* * *

从作业传回数据

您可能希望从作业内部保存数据以从作业外部访问它。

一个常见的用例是创建文件的 Web 触发作业，稍后可供用户下载。

状态实际上只是一个哈希，所以在一个工作中你可以做：

status['filename'] = '/myfilename' 此外，所有状态设置方法都采用任意数量的散列参数。所以你可以这样做：

完成（'文件名' => '/我的文件名'）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T14:21:25.430

显然没有实现这样的功能，如阅读 [https://github.com/quirkey/resque-status/issues/66](https://github.com/quirkey/resque-status/issues/66)

我们找到了一种解决方法，使用函数 set_status 将所需的数据添加到状态哈希中：

```
set_status({"my variable" => "my value" }) 
```

希望这可以帮助！

# php - php array_push() -> 如果数组已经包含值，如何不推送

> ID：10096019
> 
> 赞同：52
> 
> 时间：2012-04-10T20:31:08.820
> 
> 标签：php, arrays, array-push

我正在使用以下循环将项目添加到我的一个名为 $liste 的数组中。我想知道如果值已经在数组中，是否有可能不将 $value 添加到 $liste 数组中？希望我清楚。先感谢您。

```
$liste = array();
foreach($something as $value){
     array_push($liste, $value);
} 
```

* * *

## 回答 #1

> 赞同：110
> 
> 时间：2012-04-10T20:32:39.820

[`in_array`](http://php.net/in_array)在推送之前使用 , 检查它是否存在。

```
foreach($something as $value){
    if(!in_array($value, $liste, true)){
        array_push($liste, $value);
    }
} 
```

`,true`启用“严格检查” 。`===`这使用而不是比较元素`==`。

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2012-04-10T20:33:39.360

真的有两个选择。

选项 1：检查每个项目，如果项目在那里，不要推。基本上你要求的是：

```
foreach($something as $value) {
    if( !in_array($value,$liste)) array_push($liste,$value);
} 
```

选项2：无论如何添加它们并在之后删除重复项：

```
foreach($something as $value) {
    array_push($liste,$value);
}
$liste = array_unique($liste); 
```

不过，从外观上看，您可能只是在寻找`$liste = array_unique($something);`.

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2018-07-13T07:58:22.407

由于这个问题一开始没有使用最佳实践代码 - 我发现这里的所有答案都过于复杂。

**解决有问题的代码：**

基本上，有问题的尝试本身就是过滤掉重复。更好的方法：

```
$liste = array_unique($something); 
```

**如果向非空数组添加元素：**

```
$liste = array_unique(array_merge($liste, $something)); 
```

**如果您使用 array_push()：**

除非您实际使用数组推送的返回值，否则您应该真正使用：

```
$liste[] = $value; 
```

用于更短的语法和较小的性能提升

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-04-10T20:33:30.470

也许您想将其用作关联数组。它被实现为（类似于）一个 [哈希表](http://en.wikipedia.org/wiki/Hash_table)，所以你得到恒定的插入时间而不是线性的。

```
function find_uniq( $something ) {
    foreach($something as $value){
         $liste[$value]++;
    }
    return array_keys( $liste );
} 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2017-08-09T00:33:34.123

正确的答案要简单得多。推送所有内容，然后使用`array_unique()`功能：

```
array_push($array, $new_member);
$array = array_unique($array); 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-04-10T20:35:27.533

您可以在调用之前简单地检查此条件`array_push()`。使用`array_search()`并使用强比较来`false`查看值是否存在：

```
foreach( $something as $value ){
    if( array_search( $value, $liste, true ) === false ){
        array_push( $liste, $value );
    }
} 
```

（顺便说一句：添加`,true`到`array_search`使用“严格检查”。这将`===`用于比较而不是`==`）

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-07-02T08:09:33.367

上面已经给出了很好的答案，但是如果您的代码中有多个 array_push() ，那么每次都编写 if(in_array()) 语句会很痛苦。

这是一个解决方案，可以缩短您在这种情况下的代码：使用单独的函数。

```
function arr_inserter($arr,$add){ //to prevent duplicate when inserting
    if(!in_array($add,$arr))
        array_push($arr,$add);
    return $arr;
} 
```

然后在您的所有 array_push() 需要中，您可以调用上面的该函数，如下所示：

```
$liste = array();
foreach($something as $value){
    $liste = arr_inserter($liste, $value);
} 
```

如果 $value 已经存在，则 $liste 保持不变。

如果 $value 尚不存在，则将其添加到 $liste。

希望有帮助。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2015-02-06T04:37:41.410

通过保持逻辑少来节省逻辑并提高速度。只是继续覆盖。

```
$list = array();
foreach ($something as $value) {
  if (!is_object($value) && !is_array($value)) {
    $list[$value] = $value
  }
}
$list = array_values($list); 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2019-08-01T08:34:48.010

我有另一个解决方案给你！您可以将键用作值并且**键永远不会重复**。

```
$arr = ["A" => true, "B" => true, "C" => true];

$item = "A";
$arr[$item] = true; 
```

用法：

```
foreach($arr as $value => $helper){
    echo $value;
} 
```

## 设置类

好，我给你写一堂课！不允许重复项的数组称为集合。

```
class Set{
    private $countainer;

    public function get(){
        return $this->container;
    }
    public function push($item){
        $this->container[$item] = true;
    }
    public function delete($item){
        unset($this->container[$item]);
    }
} 
```

注意：这不适用于关联数组和值。

# java - Jasper 报告路径问题，在 App 服务器上运行时找不到 .jasper 文件

> ID：10096026
> 
> 赞同：2
> 
> 时间：2012-04-10T20:31:28.310
> 
> 标签：java, eclipse, tomcat, jasper-reports

在 Tomcat 中运行时（在带有调试器的 Eclipse 之外），您应该如何获取一个 .jasper 文件（例如作为 InputStream）以`JasperFillManager.fillReport()`供使用？目前我们的 .jasper 文件位于`/WEB-INF/jasper`.

我需要一个不会根据您运行报告的位置而中断的解决方案。如果在从 Eclipse 运行 Tomcat 时对其进行调试，`System.getProperty("user.dir")`则会返回`C:/Eclipse ...`，但很明显，当它部署到服务器时，该路径会有所不同。

你如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T20:57:38.413

If you do not plan to replace the .jasper file after it was created then you could use the resources and [getResourcesAsStream](http://docs.oracle.com/javase/6/docs/api/java/lang/Class.html#getResourceAsStream%28java.lang.String%29).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T13:07:11.617

通过从 Eclipse 中更改 Tomcat 启动配置工作目录，我设法从 Tomcat/Eclipse 运行此工作。这让您只需在 Java 代码中将相对路径传递给 fillReport()。但是我还没有尝试在 websphere 中进行测试......（有件事告诉我我很快就会再次诅咒 IBM）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T13:39:37.720

我相信您可以使用应用程序对象（假设您使用的是 JSP 而不是 servlet - 我没有使用它们）

```
InputStream input = new FileInputStream(new File(application.getRealPath("/WEB-INF/jasper")+"/report.jasper")); 
```

# c# - ADODB.Connection 包装为 System.Data.Common.DbConnection

> ID：10096028
> 
> 赞同：2
> 
> 时间：2012-04-10T20:31:43.533
> 
> 标签：c#, com, adodb

有没有一种简单的方法可以将 ADODB.Connection COM 对象（在 adodb.dll 中定义的对象）包装到 System.Data.Common.DbConnection 中？

这个连接是在 VBA 中创建的，我想将它传递给一些需要 System.Data.Common.DbConnection 的 C# 组件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T20:33:19.460

不，你不能那样做。ADO.NET 与 ADO 非常不同。

# css - 移除 GWT 生成的绝对位置

> ID：10096036
> 
> 赞同：1
> 
> 时间：2012-04-10T20:32:48.337
> 
> 标签：css, gwt

在我的网页中，我有一个菜单 ( `HorizontalPanel`)，应该附加到页面的底部。为此，我尝试使用`RootLayoutPanel`该类并在其中添加一个南小部件，并且我成功地做到了。但问题是菜单没有居中。我尝试添加另一个我写的 CSS（并注意位置）：

```
.cetrer {
    Margin-left : auto;
    margin-right: auto;
    position: relative;
} 
```

但是当页面被重新渲染时，位置被 GWT 设置为绝对。我试图通过将此 lign 添加到代码中来强制该位置，但它不起作用：

```
DOM.setElementAttribute(menuBar.getElement(), "style", "position: relative;"); 
```

那么有什么解决方法可以解决吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T20:43:22.773

你试过添加`!important;`吗？像：

```
.cetrer {
    Margin-left : auto;
    margin-right: auto;
    position: relative !important;
} 
```

虽然不是最好的解决方案。

# java - 使用 jersey 构建 webapp

> ID：10096037
> 
> 赞同：3
> 
> 时间：2012-04-10T20:33:01.677
> 
> 标签：java, spring, jakarta-ee, web-applications, jersey

这篇关于[Spring MVC 与 Jersey](http://www.infoq.com/articles/springmvc_jsx-rs)的文章表明，Jersey 更适合 Web 服务，而不是提供 HTML 页面。

我喜欢 Jersey 的想法，不想使用专有解决方案作为这个链接[Jersey w/ Spring 3.0？](https://stackoverflow.com/questions/2185640/jersey-w-spring-3-0)建议春季使用。将来我会想创建一个 RESTful Web 服务，但是现在我需要创建一个相当标准的 Web 应用程序来查询 SOAP 服务并在网页中呈现响应。我不想使用 JSP 或 JSF 只是简单的 javascript 访问服务进行更新

有没有像某种模板引擎一样在泽西岛提供网页的标准方法？我应该寻找 Jersey 的替代品，例如 Spring MVC 还是完全不同的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T20:42:43.200

当您想使用 Jersey 时，您不需要模板。它可以产生不同类型的输出，如 XML、JSON、PLAINTEXT 等。它将透明地进行所有的编组/解组。关于 REST 的重要一点是您如何设计您的服务。[REST with Java (JAX-RS) using Jersey - Tutorial](http://www.vogella.de/articles/REST/article.html)这确实是一个很好的教程，展示了如何使用 Jersey。我没有使用 Spring MVC RESTful 服务的经验，但它看起来与 Jersey 非常相似。

# vb6 - VB6 对象和数据类型

> ID：10096040
> 
> 赞同：7
> 
> 时间：2012-04-10T20:33:09.767
> 
> 标签：vb6

我知道类 Object 在面向对象的编程语言（如 Java）中位于类层次结构的顶部。我还了解到您在 .NET 中有引用类型和值类型。我也理解基于 C 语言的类型定义。

尽管如此; 我正在努力理解 VB6 中的对象是什么（ [http://msdn.microsoft.com/en-us/library/aa338034%28v=vs.60%29.aspx](http://msdn.microsoft.com/en-us/library/aa338034%28v=vs.60%29.aspx) ）以及究竟是什么变体。什么是变体？以及如何在 VB6 中实现对象？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-11T14:30:59.483

VB6 使用的所有对象都是 COM 对象。COM 对象本质上是一个可变长度的数据结构，其可变长度头包含任意数量的指向 VTable 的 32 位指针，而连续的字节包含对象的实例数据。例如，

```
Bytes
0-3    VTable1 pointer
4-7    VTable2 pointer
8-11   VTable3 pointer
...
       Instance data 
```

VTable 是一个由 32 位指针组成的数组，指向函数，所有这些函数都被传递一个“this”实例指针。

```
Bytes
0-3    Func1(this, ..., ...)
4-7    Func2(this, ..., ...)
8-11   Func3(this, ..., ...)
... 
```

唯一的其他规范是所有 VTable*必须*从 IUnknown 继承，即前三个函数必须是：

```
QueryInterface()
AddRef()
Release() 
```

本质上，QueryInterface() 允许您查明 COM 对象是否支持特定接口（由 UUID 表示）。AddRef() 允许对象编写器增加内部引用计数。Release() 允许对象写入器减少引用计数器，当计数为零时销毁对象。您永远不会在 VB 中调用这些方法——编译器会为您添加这些调用（VB6 的优点之一）。

有关详细信息，请参阅[http://msdn.microsoft.com/en-us/library/windows/desktop/ms680509(v=vs.85).aspx 。](http://msdn.microsoft.com/en-us/library/windows/desktop/ms680509(v=vs.85).aspx)

VB“对象”类型是对支持 IDispatch 接口的对象的*引用（参见*[http://msdn.microsoft.com/en-us/library/windows/desktop/dd318520(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/dd318520(v=vs.85).aspx)） . 这就是允许您在 VB 和 VBScript 中进行后期绑定的原因。用 VB6 编写的所有对象都会自动实现从 IDispatch 继承的接口。这称为双接口，因为它支持早期和后期绑定。

请注意，COM 中没有内置直接类型系统。但是，您可以选择支持 ITypeInfo 接口，它允许您的对象的用户访问您想要添加的有关对象的信息（使用使用类型库来存储此信息的默认实现更容易）。

正如 Bob Riemersma 所提到的，Variant 类型实际上是一个 16 字节的结构，它有一个 2 字节的整数 (vt)，表示封装了什么自动化类型，后 8 个字节可用于包含最多 8 个值类型字节，或指向另一种类型的 32 位指针。VB 使用其内部函数在 VB 类型和 Variants 之间进行所有必要的转换，以及所有必要的内存分配和释放。通过将指向对象的指针复制到 Variant 中并调用对象的 AddRef() 方法，变体可以包含对 COM 对象的引用。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-10T20:39:27.127

让我把它分解成不同的问题：

首先，VB6 不是 VB.Net，不使用 .Net 框架，而是使用较旧的 COM 框架。（不知道你是否已经知道这一点）。

其次，您的链接所指向的实际上是VB6 内置的***类。***尽管，是的，它称它们为“对象”。他们的术语草率。

第三，可能也是最重要的，在 VB6 中，一切都不是对象，对象甚至不是数据类型的默认或主要类别。是的，类似于 .Net 的值类型，但要少得多（大多数甚至没有运行时类型容器，只有内存中的地址）。

所以大多数数据项不是对象，因此没有类，因此没有任何类型的继承，因此没有从其他任何东西派生，因此没有“类型层次结构”，因此在“ “它们的类型层次结构的顶部”（尽管作为类/对象的东西确实拥有所有这些）。因此，您没有可用于任何其他数据类型的基本/根数据类型，这对于各种参数传递等情况都是一个问题。

变体是对这个问题的一种优先解决方案，在早期版本的 VB 中实现（早于 VB 中的对象）来解决这个问题。变体只是一个动态描述符，它包装了*任何*数据类型的另一个项目。当您使用它时（通常）就像您直接使用它包含的内容一样，但您实际上是*通过*Variant 来获取它当前碰巧包含的任何类型的数据项。

Variant 本身会跟踪其内容的数据类型是什么，并导致访问它的 VB 代码行为不同/适当（一种原始的多态性）。

如果这听起来很笨拙，而且开销很大，那么，确实如此。但在当时，当您需要处理“任何数据类型”时，它是最好的解决方案。

# javascript - 根据值获取选择选项文本

> ID：10096042
> 
> 赞同：1
> 
> 时间：2012-04-10T20:33:22.810
> 
> 标签：javascript, jquery

我有一个菜单。给定一个给定的值，我想返回文本。例如，0 将返回“零”，1 将返回“一”，等等。请注意，我不关心当前选择了哪个选项，也不想自动选择菜单，而只想将选择菜单用作原始数据库。这可以使用 JavaScript 或 jQuery 轻松完成，而无需遍历每个选项吗？

```
<select>
<option value="0">zero</option>
<option value="1">one</option>
<option value="2">two</option>
<option value="3">three</option>
</select> 
```

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-10T20:39:42.500

与其将其`select`用作数据库*（简单查找需要昂贵的操作）*，不如从它创建一个数据集，然后使用它...

```
var vals = $('select option').map(function(i, el) { return el.text; })
                             .toArray();
alert(vals[2]); // "two" 
```

* * *

或者，如果这些`option`值不是基于顺序`0`的索引，那么使用一个对象......

```
var vals = {};

$('select option').each(function(i, el) { vals[el.value] = el.text });

alert(vals[2]); // "two" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-10T20:35:35.153

```
var value = '3';
alert($('select option[value=' + value + ']').text()); 
```

[现场演示](http://jsfiddle.net/6qrcN/)。

此外，您可能希望为选择提供一个 id 并更新选择器，因为如果您有多个下拉列表，则选择器将不起作用：

```
alert($('#id_of_the_select option[value=' + value + ']').text()); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-10T20:36:53.370

如果不遍历每个选项，您将如何扫描一个值？没有神奇的属性可以为你做这件事。

但是，您可以使用以下代码：

```
(function() {
    var sels = document.getElementsByTagName('select'), l = sels.length, i,
        opts, m, j, o;
    for( i=0; i<l; i++) {
        o = {};
        opts = sels[i].options;
        m = opts.length;
        for( j=0; j<m; j++) o[opts[j].value] = opts[j].text;
        sels[i].map = o;
    }
})(); 
```

把它放在前面`</body>`，现在你可以`<select>`在你的页面上找到任何地图：

```
var sel = document.getElementById('mySelect');
alert(sel['0']); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-10T20:35:22.033

使用属性等于选择器：

```
var valToSearchFor = 0;
    textFromOption = $('select option[value="' + valToSearchFor + '"]').text(); 
```

这仍然会遍历每个`option`以测试您正在寻找的值的存在，但它会在“幕后”这样做，这样您就不必这样做了。

有可能使用`querySelectorAll()`（尽管与上面的jQuery或多或少相同的符号）：

```
var valToSearchFor = 0;
    textFromOption = document.querySelectorAll('option[value="' + valToSearchFor + '"]').innerHTML; 
```

当然，这需要浏览器实现`querySelectorAll()`，而不是全部实现（尤其是 IE）。

参考：

*   [属性等于`[attribute="value"]`选择器](http://api.jquery.com/attribute-equals-selector/)。
*   [`document.querySelectorAll()`](https://developer.mozilla.org/en/DOM/Document.querySelectorAll).

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-10T20:36:09.537

使用`selected:`选择器。页面上给出的示例。

[http://api.jquery.com/selected-selector/](http://api.jquery.com/selected-selector/)

```
 $("select").change(function () {
      var str = "";
      $("select option:selected").each(function () {
            str += $(this).text() + " ";
          });
      $("div").text(str);
    })
    .trigger('change'); 
```

将“div”替换为您尝试触发的事件

[http://jsfiddle.net/ckaufman/aDU5E/1/](http://jsfiddle.net/ckaufman/aDU5E/1/)

# jquery-mobile - 增加 jQuery Mobile 按钮的高度

> ID：10096043
> 
> 赞同：6
> 
> 时间：2012-04-10T20:33:29.507
> 
> 标签：jquery-mobile

我想增加在 jQuery Mobile 中创建的几个按钮的高度，但是像下面这样的 CSS 不起作用：

```
a[data-role="button"] {
  height: 200px;
  font-size: 48px;
} 
```

还有另一种方法可以做到这一点吗？也许使用 jQuery 动态应用一个新的高度，然后调用一个函数来重绘按钮？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-10T20:36:25.270

这适用于我的 jQuery 移动应用程序：

```
.ui-btn { height: 200px; font-size: 48px; } 
```

但是请确保在加载 jquery 移动 css 之后 css 正在发生（特别是： jquery.mobile.structure.css ）

如果它仍然给您带来麻烦，请尝试将按钮包装在容器中并使用：

```
#container-id .ui-btn { height: 200px; font-size: 48px; } 
```

如果它仍然给你带来麻烦，你总是可以（不推荐）使用 !important 声明：

```
.ui-btn { height: 200px !important; font-size: 48px !important; } 
```

但同样，“重要”语句真的不被推荐，我通常只将它们用作完整性检查，以确保我在调试时选择了正确的元素。

编辑：

如果你想要动态路由：

jQuery代码：

```
$(document).ready(function() {
  styles = { 'height': '200px', 'font-size': '48px' };
  $('.ui-btn').css(styles);
}); 
```

应该可以工作......虽然现在我考虑了一下，但我认为 jquery mobile 做了一些 javascript 处理（我知道它会将你的标记包装在一个 div 中，并引用当前页面的 url）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-12T21:16:56.233

下面的代码对我有用。如果您的按钮是：

```
 <a href="index.html" data-role="button" data-theme="d" class="big">Big button</a> 
```

那么 big 和 ui-btn-inner 可以有以下样式：

```
 .big { height: 80px;}
    .big .ui-btn-inner { padding-top:25px; } 
```

添加了填充，使文本看起来是居中对齐的。这样按钮样式不会全局更改，您可以控制要更改按钮的位置。希望它可以帮助某人:)

# jquery - 如何修复此 JQuery 多选竞争条件？

> ID：10096057
> 
> 赞同：0
> 
> 时间：2012-04-10T20:34:58.417
> 
> 标签：jquery, asp.net-mvc-3, getjson, race-condition, multi-select

我正在使用[Eric Hynd 出色的多选插件](http://www.erichynds.com/jquery/jquery-ui-multiselect-widget/)来填充几个下拉菜单。

一是业务单位：...

```
$('#lbBusinessUnits').multiselect({
height: "auto",
selectedList: 20
}); 
```

...第二个是业务领域（#lbBusinessAreas）。...

```
$('#lbBusinessAreas').multiselect({
selectedList: 20
}); 
```

...当像这样检查一个单元时，区域列表会更新：

```
// Business Units List Box Change
$('#lbBusinessUnits').bind("multiselectclick", function (event, ui) {
    var selectedPeriod = $('#ddlSalesPeriods').val();
    var selectedUnit = ui.value;
    var selectedUnitText = ui.text;
    var checkedUnit = ui.checked;
    var areChecked = $(this).multiselect("getChecked").map(function () { return this.value; }).get();

if (areChecked.length > 0) {
    url = '/InvoiceException/LoadBusinessareasBySalesPeriodBusinessUnit';
    $.getJSON(url, { selectedSalesPeriod: selectedPeriod, selectedBusinessUnits: areChecked }, function (areas) {
    var areaSelect = $('#lbBusinessAreas');
    areaSelect.empty();
    $.each(areas, function (index, optionData) {
         areaSelect.append($('<option/>', { value: optionData.Id, text: optionData.Name }));
      });
    });
    }
else {
     var url = '/InvoiceException/LoadBusinessAreasBySalesPeriod';
    $.getJSON(url, { selectedSalesPeriod: selectedPeriod }, function (areas) {
    var areaSelect = $('#lbBusinessAreas');
    areaSelect.empty();
    $.each(areas, function (index, optionData) {
    areaSelect.append($('<option/>', { value: optionData.Id, text: optionData.Name }));
    });
  });
}
$('#lbBusinessAreas').multiselect("refresh");
}); 
```

JSON 结果由 MVC3 控制器处理，并从 URL 调用中正确返回。IE 返回的数据看起来不错。

但是，区域框 (#lbBusinessAreas) 在单击后不会正确更新。它似乎落后了。似乎在刷新框时出现了竞争条件。

当我将它放入 Firebug 并在它调用 multiselect("refresh") 的点放置一个断点时，当我逐步通过调试器并完全按照应有的方式运行时，一切正常。

这真的是在选项更新之前完成刷新的竞争条件吗？是因为它是一个 ajax/getJson 调用吗？

我是否需要移动呼叫以刷新或以某种方式找出以确保操作顺序？IE 选项需要完成更新，然后需要进行刷新。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T13:27:55.353

我认为在一切都说完之后进行简单的刷新就可以了。/headbonk 时刻，您意识到您必须等待 getJson 调用成功返回。所以我不得不将刷新移动到每个调用的成功函数中。在这里发布更改/答案，以防其他人有“哦，呃”的时刻。

```
// Business Units List Box Change
$('#lbBusinessUnits').bind("multiselectclick", function (event, ui) {
    var selectedPeriod = $('#ddlSalesPeriods').val();
    var selectedUnit = ui.value;
    var selectedUnitText = ui.text;
    var checkedUnit = ui.checked;
    var areChecked = $(this).multiselect("getChecked").map(function () { return this.value; }).get();

    if (areChecked.length > 0) {
        url = '/InvoiceException/LoadBusinessareasBySalesPeriodBusinessUnit';
        $.getJSON(url, { selectedSalesPeriod: selectedPeriod, selectedBusinessUnits: areChecked }, function (areas) {
            var areaSelect = $('#lbBusinessAreas');
            areaSelect.empty();
            $.each(areas, function (index, optionData) {
                areaSelect.append($('<option/>', { value: optionData.Id, text: optionData.Name }));

            });
            **$('#lbBusinessAreas').multiselect("refresh");**
        });
    }
    else {
        var url = '/InvoiceException/LoadBusinessAreasBySalesPeriod';
        $.getJSON(url, { selectedSalesPeriod: selectedPeriod }, function (areas) {
            var areaSelect = $('#lbBusinessAreas');
            areaSelect.empty();
            $.each(areas, function (index, optionData) {
                areaSelect.append($('<option/>', { value: optionData.Id, text: optionData.Name }));
            });
            **$('#lbBusinessAreas').multiselect("refresh");**
        });
    }
}); 
```

# css - CSS如何让浮动的锚点彼此相邻

> ID：10096059
> 
> 赞同：0
> 
> 时间：2012-04-10T20:35:05.887
> 
> 标签：css

标记如下

```
 <div class="socialMediaPlugin">
    <a class="addthis_button_facebook"></a>
    <a class="addthis_button_twitter"></a>
    <a class="addthis_button_google_plusone_share"></a>
    <a class="addthis_button_pinterest" ></a>
    <a class="addthis_button_email"></a>
  </div> 
```

然后我在尝试

```
.socialMediaPlugin {
float: right; 
```

但他们出现在彼此而不是下一个？我怎样才能让他们并排？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T20:38:32.173

You need to apply it to the links, not the container, so you CSS should read

```
.socialMediaPlugin a {
    float: right;
}​ 
```

You can see an example [here](http://jsfiddle.net/jackdent/cDwPb/)

Alternatively you could use

```
.socialMediaPlugin:nth-child(n) {
    float: right;
}​ 
```

OR

```
.socialMediaPlugin * {
    float: right;
}​ 
```

although I would not advise it, and it is quite hacky!

Furthermore, you should be using an ordered list for things like that, and you can see an example of that [here](http://jsfiddle.net/jackdent/cDwPb/2/)

**EDIT based on request from poster**

So that the order of the links can be maintained, it is necessary to wrap the links in a div with `display:block` and float that right instead. See this live [example](http://jsfiddle.net/jackdent/cDwPb/3/).

CSS

```
.socialMediaPlugin div {
    display: block;
    float: right;
}
​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T20:38:01.890

you can use

```
.socialMediaPlugin a{
    display: block;
    position: relative;
    float: left;
} 
```

the links will be side-to-side

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T20:46:01.203

由于锚点已经是内联级元素，它们自然会彼此相邻堆叠。

问题更可能是您的容器不够宽，无法容纳堆叠的物品，因此它正在包裹它们。

要么，要么你有一些其他样式应用于你的锚元素，这导致它们像块级元素一样。

# php - 将 PHP/MySql 结果放入 Javascript

> ID：10096063
> 
> 赞同：-1
> 
> 时间：2012-04-10T20:35:21.423
> 
> 标签：php, javascript, mysql

我想我越来越接近理解如何将我的网站转向更多 PHP OOP 方法。

我的每个用户都有不同的页面，因为他们对 javascript 生成的网格都有不同的需求。为了可维护性，我可以有一个页面，只需将 php 注入 javascript，如下所示（有点）吗？标准做法是将 php 变量保留在 MySQL 中并根据 $_SESSION['user_id']; 吐出它们吗？只是想知道到目前为止我的想法是否走在正确的道路上？

```
ORIGINAL GRID
var mygrid;

            function doInitGrid(){  
            mygrid = new dhtmlXGridObject('gridbox');
            var combo=mygrid.getCombo(4);
            combo.put(2, 'Approve / Deny');
            combo.put(1, 'Approve');
            combo.put(0, 'Deny');
            mygrid.setImagePath("../codebase/imgs/");           
            mygrid.setHeader("Submit Date, Manufacturer, Product Category, Progress, Approval Status",null,["text-align:center;","text-align:center;","text-align:center","text-align:center","text-align:center"]);        
            <!--mygrid.attachHeader("#text_filter,#text_filter,#text_filter");-->
            mygrid.setInitWidthsP("10,16,44,18,12");
            mygrid.setColAlign("center,left,left,center,center");
            mygrid.enableAutoWidth(false);
            mygrid.setColTypes("ro,ro,ro,button,coro");
            mygrid.setColSorting("str,str,str,str,str,str");
            mygrid.enableRowsHover(true,'grid_hover');              
            mygrid.setSkin("modern");
            mygrid.init();          
            mygrid.setStyle("font-size:11px;","font-size:11px;","font-size:11px","font-size:11px","font-size:11px");
            mygrid.loadXML("connector.php?hospid=<?php echo $hospid; ?>");
            mygrid.setColumnIds("date,man_name,group,approval_progress, approval_status");          
            var dp = new dataProcessor ("connector.php?hospid=<?php echo $hospid; ?>");     
            dp.init(mygrid);                        
            dhxWins = new dhtmlXWindows();
            dhxWins.setImagePath("../codebase/imgs/");          
            mygrid.attachEvent("onRowSelect", function(id,ind){ 
                 if (ind == 0 || ind == 1 || ind == 2 || ind == 3){  
                dhxWins = new dhtmlXWindows();
                var w1 = dhxWins.createWindow("w1", 60, 60,925, 575);
                dhxWins.setSkin("dhx_web");
                dhxWins.setImagePath("../codebase/imgs/");
                w1.centerOnScreen();
                w1.setText("");
                w1.setModal(false);
                theVar11 = (id);
                w1.attachURL("pop_details.php?var1=" +theVar11);
                return true;
                 };
                 });

MY IDEA FOR OOP GRID
    var mygrid;

                function doInitGrid(){  
                mygrid = new dhtmlXGridObject('gridbox');
                var combo=mygrid.getCombo(4);
                combo.put(2, 'Approve / Deny');
                combo.put(1, 'Approve');
                combo.put(0, 'Deny');
                mygrid.setImagePath("../codebase/imgs/");           
                mygrid.setHeader(<?php $MySQL_results ?>);      
                <!--mygrid.attachHeader("#text_filter,#text_filter,#text_filter");-->
                mygrid.setInitWidthsP("<?php $MySQL_results ?>");
                mygrid.setColAlign("<?php $MySQL_results ?>");
                mygrid.enableAutoWidth(false);
                mygrid.setColTypes("<?php $MySQL_results ?>");
                mygrid.setColSorting("<?php $MySQL_results ?>");
                mygrid.enableRowsHover(true,'grid_hover');              
                mygrid.setSkin("modern");
                mygrid.init();          
                mygrid.setStyle("<?php $MySQL_results ?>");
                mygrid.loadXML("connector.php?hospid=<?php echo $hospid; ?>");
                mygrid.setColumnIds("date,man_name,group,approval_progress, approval_status");          
                var dp = new dataProcessor ("connector.php?hospid=<?php echo $hospid; ?>");     
                dp.init(mygrid);                        
                dhxWins = new dhtmlXWindows();
                dhxWins.setImagePath("../codebase/imgs/");          
                mygrid.attachEvent("onRowSelect", function(id,ind){ 
                     if (ind == 0 || ind == 1 || ind == 2 || ind == 3){  
                    dhxWins = new dhtmlXWindows();
                    var w1 = dhxWins.createWindow("w1", 60, 60,925, 575);
                    dhxWins.setSkin("dhx_web");
                    dhxWins.setImagePath("../codebase/imgs/");
                    w1.centerOnScreen();
                    w1.setText("");
                    w1.setModal(false);
                    theVar11 = (id);
                    w1.attachURL("pop_details.php?var1=" +theVar11);
                    return true;
                     };
                     }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T20:42:27.173

在我看来，（其他人可能会不同意）你提出的建议是一个完全可行的选择。如果你不想在你的 javascript 中包含这么多的 php，你可以使用 php`json_encode()`函数来创建一个初始的 javascript 对象，并使用它的属性而不是 php 回显。例如这样的事情：

```
var gridOpts = <?php echo json_encode($MySQL_results);?>;
mygrid.setColTypes(gridOpts.colTypes); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T20:40:13.273

我看不懂那个代码，太乱了...

但对于一般用途：

```
<script type="text/javascript">
    var js_variable = <?php echo json_encode($php_variable); ?>;
</script> 
```

此方法允许您将任何类型的 PHP 变量（资源除外）传递给 JS。

# java - MouseMotionListener not Firing correctly in Java

> ID：10096065
> 
> 赞同：0
> 
> 时间：2012-04-10T20:35:24.300
> 
> 标签：java, swing, mouseevent

can anyone tell me why the mouseMotionListener is not firing the mouseDragged event(I have googled for hours and even copy-and-pasted code from the net!) Below is the code for the class - I create an object of the class and add it to a JPanel called canvas.

PS the mousePressed() is the only method that gets fired, mouseDragged() and mouseReleased(), they do not.

```
class MouseActions extends MouseInputAdapter 
{
        @Override
        public void mousePressed(MouseEvent e) 
        {
            super.mousePressed(e);//245 220
            java.awt.Point Pos = e.getPoint();
            System.out.println("at Mouse Pressed, Again");
            if(e.getButton() == MouseEvent.BUTTON3)
            {
                if(ArrayOfShapes == null)
                    return;

                for(int i = 0; i < ArrayOfShapes.length; i++)
                {
                    if(hasEntered(ArrayOfShapes[i], Pos))
                    {
                        removeAtIndex(i);
                        return;
                    }
                }
            }
        }

        @Override
        public void mouseDragged(MouseEvent e) 
        {
           System.out.println("at Mouse Dragged");
            int MovableIndex = -1;
            java.awt.Point Pos = e.getPoint();

            if(e.getButton() == MouseEvent.BUTTON1)
            {
                bDragged = true;

                while(bDragged)
                {
                    for(int i = 0; i < ArrayOfShapes.length; i++)
                    {
                        if(hasEntered(ArrayOfShapes[i], Pos))
                        {
                            MovableIndex = i;
                            break;
                        }
                    }
                    ArrayOfShapes[MovableIndex].setX(e.getX());
                    ArrayOfShapes[MovableIndex].setY(e.getY());
                    thisCurrentWindow.repaint();
                }
            }
        }

        @Override
        public void mouseReleased(MouseEvent e) 
        {
            System.out.println("at Mouse Release");
            bDragged = false;
        }

    } 
```

/// Now the code to add the listeners

```
MouseActions MA = new MouseActions();
canvas.addMouseListener(MA);
canvas.addMouseMotionListener(MA); 
```

Again Thanks alot~

M

PS.... For all who are doubting my mad inheritance skills

```
import java.awt.event.MouseEvent;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.event.MouseInputAdapter;

public class CustomJPanel extends JPanel
{
    class MouseActions extends MouseInputAdapter
    {

        @Override
        public void mousePressed(MouseEvent e) 
        {
            super.mousePressed(e);
            System.out.println("Pressed");
        }

        @Override
        public void mouseDragged(MouseEvent e) 
        {
            super.mouseDragged(e);
            System.out.println("Dragged");
        }

        @Override
        public void mouseReleased(MouseEvent e) 
        {
            super.mouseReleased(e);
            System.out.println("Released");
        }
    }

    /**
     * @param args the command line arguments
     */

    private CustomJPanel()
    {
        MouseActions ma = new MouseActions();
        addMouseListener(ma);
        addMouseMotionListener(ma);
    }

    public static void main(String[] args) 
    {
        // TODO code application logic here
        JFrame frame = new JFrame();
        CustomJPanel cP = new CustomJPanel();

        frame.setSize(500, 500);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        cP.setSize(500, 500);
        frame.add(cP);
        frame.setVisible(true);
    }
} 
```

Again when I assign this to canvas it never fires the release or the dragged

M

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T20:50:19.873

循环 while(bDragged) 看起来像一个无限循环

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T20:43:26.447

据我所知，您需要实现鼠标侦听器。参考： http: [//profs.etsmtl.ca/mmcguffin/learn/java/04-mouseInput/](http://profs.etsmtl.ca/mmcguffin/learn/java/04-mouseInput/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T18:32:11.197

够吓人的——我按照它的编码方式工作……除了后来在代码中我删除了画布并重新创建它——但忘记重新分配 MIA。

感谢你的帮助，

米

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-04-10T20:44:09.130

我会这样做：

```
class MouseActions implements MouseMotionListener, MouseListener
{
..
..
}

canvas.addMouseListener(new MouseActions ());
canvas.addMouseMotionListener(new MouseActions() ); 
```

那可能会奏效。

# ruby-on-rails - 如何创建一个比较关联的范围？

> ID：10096069
> 
> 赞同：0
> 
> 时间：2012-04-10T20:35:40.707
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1

我有两个模型：

```
class Subscription
  belongs_to :subscriber, :class_name => "User"
  belongs_to :subscribable, :polymorphic => true
end

class Product
  belongs_to :user
  has_many :subscriptions, :as => :subscribable, :dependent => :destroy
end

create_table :products do |t|
   t.string  :name
   t.decimal :price
   t.decimal :cost_per_unit
   t.integer :user_id
end

create_table :subscriptions do |t|
   t.string  :name
   t.decimal :price
   t.decimal :cost_per_unit
   t.integer :subscriber_id
   t.integer :subscribable_id
   t.string  :subscribable_type
end 
```

在我的产品模型中，我试图制作一个将`price`or`cost_per_unit`与. 我只是不知道如何用 SQL 编写它。所以它应该是这样的：`Product``Subscription`

```
class Product
  def self.lower_prices
   where( self.price < self.subscription.price OR self.cost_per_unit < self.subscription.cost_per_unit )
  end   
end 
```

我怎么写这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T21:27:58.087

您需要在 where 子句中指定一个 sql 片段，并使用连接从订阅表中获取数据。

我无法访问我的开发机器来测试它，但这应该会为您指明正确的方向。

```
class Product
  has_many :subscriptions, :as => :subscribable, :dependent => :destroy
  self.lower_prices
   Product.includes(:subscription).
   where("products.price < subscriptions.price OR products.cost_per_unit < subscriptions.cost_per_unit" )
  end
end 
```

# delphi - 列出现有对象以读取和更改其属性的理想方法是什么？

> ID：10096071
> 
> 赞同：3
> 
> 时间：2012-04-10T20:35:45.757
> 
> 标签：delphi, automation

我正在尝试在 Delphi XE2 中开发一个应用程序，该应用程序将能够读取和更改不同应用程序之间的对象属性。

目前，我们唯一的目标应用程序是一个用 Delphi XE 开发的，我有源代码，一个用 VB6 完成，我们没有源代码或信息。

我们正在寻找的主要对象是标签和编辑，但理想情况下，我几乎需要设计一个对象查看器，列出每个对象及其属性，能够随意读取和更改它们，并调用方法。

我不知道该怎么做，最好的办法是能够读取一些标签标题，基于读取 VB 应用程序上的缓冲区并直接使用内存分配，但即使这样也有它的局限性，因为它只能工作在 WinXP 中，而不是像预期的那样在 Windows 7 中。

实现我想要的最好方法是什么？如果最好的话，我愿意用不同的语言编写代码。

**编辑：**在做了更多研究之后，我发现了 TestComplete，在其中，它有一个对象查看器，基本上可以列出/修改对象及其属性。
目标不是使用第三方软件来做到这一点，很明显这是可行的，但我不知道如何做。MSAA/IAutomation 在一定程度上起作用，但两者都无法真正列出所有对象。

这里有几个屏幕简要展示了它是如何工作的（使用第 3 方 VB 应用程序，为安全起见已编辑部分）：

![TestComplete 对象浏览器](../Images/32dee2b81af50b4a9046db803db05956.png) ![TestComplete 对象浏览器 2](../Images/127c34a3b61f089dbfa8f34645ce7881.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-10T23:43:09.710

***列出现有对象并读取/修改其属性的理想方法是什么？***

没有什么像理想的方式。要么你知道应用程序并且有一些接口（或者从内部知道它），要么你必须符合可用的东西。如果您的目标是具有通用 Windows 控件的 Windows 应用程序，那么您正在寻找 Windows API。

但是，并非您在屏幕上看到的所有控件都可以通过 Windows API 访问，不幸的是，标签就是其中之一。一般来说，只有具有句柄的窗口控件才能通过 Windows API 访问。

***如何创建一个对象查看器，列出（外部应用程序的）每个对象及其属性，能够读取和修改这些属性并调用对象的方法。***

对象列表（从 Windows API 的角度来看）非常简单，您需要从要检查的目标应用程序中获取窗口句柄并枚举其子窗口（或者这次最好将它们称为组件），使用类似的代码[`this one`](http://www.swissdelphicenter.ch/torry/showcode.php?id=410)。
但是您可以从此类枚举中获得唯一两个相关的东西——组件句柄和它的类名。每个组件实例都有其自己的，有时是唯一的，系统范围的标识符和由类名标识的类类型。

可以说，这很酷，我可以获得系统范围的组件标识符和类类型，因此我可以通过发送组件的特定 Windows 消息来统治整个 Windows 中的每个组件，但是......
世界上谁会期望那个类以相同方式处理和响应相同消息的组件的名称可能不同？

好吧，您的噩梦被称为子类化，它允许开发人员使用新类名下的新功能扩展现有组件。作为一个杰出的例子，可以使用基本的 Windows 编辑框类`EDIT`和我们的 Delphi 子类类型`TEdit`。两者都可以由相同的消息集控制并且行为相同，但是从您的角度来看，这只是另一个问题，因为您必须记住，如果您找到具有`TEdit`类类型的组件，则必须对其进行相同的控制就像`EDIT`类组件一样。

因此，现在您知道具有特定句柄的组件是什么类型，剩下的就是选择可以与该组件类型一起使用的正确功能（消息）集。您需要的所有东西都可以
在[`MSDN reference pages`](http://msdn.microsoft.com/en-us/library/windows/desktop/bb773169%28v=vs.85%29.aspx). 有所有可用的常用控制功能，包括用于获取或设置某些组件属性的功能，最好是在那里浏览。

关于调用外部应用程序对象方法。幸运的是，这是不可能的，我什至不想想象恶意软件或编写不当的应用程序会在没有任何限制的情况下从一个进程调用其他函数到另一个进程会导致什么。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-11T09:06:35.603

除了 WinAPI，您还可以使用 Microsoft Active Accessibility 从其他窗口获取信息。这是一个小例子： http: [//blogs.msdn.com/b/oldnewthing/archive/2004/04/23/118893.aspx](http://blogs.msdn.com/b/oldnewthing/archive/2004/04/23/118893.aspx)和德尔福代码：[http ://www.transl-gunsmoker.ru/2009/08/ blog-post.html](http://www.transl-gunsmoker.ru/2009/08/blog-post.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-10T20:48:23.533

使用 RTTI 和 Indy TidTCPServer 很容易将基于文本的“类似 telnet”的对象浏览器/编辑器添加到任何 Delphi 应用程序。我已经在几个应用程序上完成了这项工作，组织了表单和组件结构，使容器显示为“文件夹”，组件显示为“文件”。它可能很有用..而且很有趣。当他们的应用程序突然在他们面前改变颜色，或者逐渐变得越来越高越来越薄时，这让用户有点不安。然后我得到的错误报告很有趣，（不，你是对的，我不应该这样做，即使对营销经理也是如此）。

我不明白为什么不能用 treeView 构建基于表单的浏览器。单击组件节点可以打开一个表单，其中列出了属性并允许对其进行编辑。IIRC，我只能像这样调用已发布的方法。

OTOH，我不知道如何有效地使用 VB 应用程序。VB 不是我喜欢在没有足够保护的情况下接近的东西，而且那些防护服也很不舒服。

# c# - Submit form and get redirect url

> ID：10096074
> 
> 赞同：2
> 
> 时间：2012-04-10T20:36:14.170
> 
> 标签：c#, java, javascript

I need to submit some data on a website in-order to register a server. I need to enter information onto a form in the first webpage and upon submitting the information, the webpage takes me to a dynamically created page (I also need to retrieve this page) where I have to enter more information in the form.

I need to accomplish this task programmatically. I can either use Java, Javscript or C#. I am familiar with the languages, but not completely sure what libraries could I use in any of the languages to achieve this task. I would really appreciate it if you guys can provide some help/hints or starting points on this issue.

Thanks

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T20:38:34.683

There are many choices out there. Look for something that implements an HTTP user agent.

One Java library i use often and recommend is [Apache Commons Httpclient](http://hc.apache.org/httpcomponents-client-ga/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T20:53:40.360

完全可以使用 Commons HttpClient，但是对于您的要求来说它可能有点太低了。

[HTMLUnit](http://htmlunit.sourceforge.net)模拟一个浏览器，它应该让登录网站、浏览和提交表单变得相对容易。这里有一个提交表单的例子：http: [//htmlunit.sourceforge.net/gettingStarted.html](http://htmlunit.sourceforge.net/gettingStarted.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T20:51:10.403

如果站点需要启用 javascript 并进行大量客户端处理（ajax 等），那么您可以尝试[Selenium 。](http://seleniumhq.org/)

# javascript - QtWebKit - 用户脚本/Javascript 注入

> ID：10096078
> 
> 赞同：4
> 
> 时间：2012-04-10T20:36:26.233
> 
> 标签：javascript, python, qtwebkit, userscripts, spynner

我一直在使用 QtWebkit/Spynner 在 Python 中进行测试工作。由于 QtWebKit 像 Chrome 的 Webkit 一样具有 Javascript 支持，是否可以像在 Chrome 中使用常规用户脚本一样在**页面开头**注入用户脚本或一段 javascript ？

希望对这些经验有一个简单的问题！提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T20:48:48.403

您可以使用以下方法：

1.  注册一个处理程序[`QWebPage.frameCreated`](http://doc.qt.nokia.com/4.7-snapshot/qwebpage.html#frameCreated)
2.  在该事件处理程序中，为[`QWebFrame.javaScriptWindowObjectCleared`](http://doc.qt.nokia.com/4.7-snapshot/qwebframe.html#javaScriptWindowObjectCleared)
3.  在第二个事件处理程序中，使用[`QWebFrame.evaluateJavaScript`](http://doc.qt.nokia.com/4.7-snapshot/qwebframe.html#evaluateJavaScript)（或 Spynner 的`runjs`方法）运行您的 Javascript。

这是[capybara-webkit](https://github.com/thoughtbot/capybara-webkit/blob/master/src/WebPage.cpp)执行其实用程序脚本的方法。不幸的是，我不能给你示例 Python 代码，因为我不熟悉 Qt Python 绑定。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-29T09:51:54.117

从上一个答案（Niklas B.）来看：水豚 webkit 使用了一个不太有用的信号槽双重订阅（frameCreated-javaScriptWindowObjectCleared），并在 injectJavascriptHelpers() 函数中使用了 sender() 调用，这不是一个好习惯对于解耦代码。

实际上，您只需要将 mainFrame() 中的“javaScriptWindowObjectCleared”信号连接到您的插槽。

假设您正在使用 PyQt 的*旧*Widget 编码样式（然后没有 qml）：

```
class InstrumentedPage(PyQt5.QtWebKitWidgets.QWebPage):

    def __init__(self, *args, **kwargs):
        super().__init__(*args, **kwargs)
        self.loadFinished.connect(self.finished)
        self.mainFrame().javaScriptWindowObjectCleared.connect(self.initYourJavascriptAtTheBeginningHere)

    def javaScriptConsoleMessage(self, message, lineNumber, sourceID):
        message = "%s (%s:%d)" % (message, sourceID, lineNumber)
        self.__logger.info("JS :: %s" % message )

    def initYourJavascriptAtTheBeginningHere(self):
        js = "console.log(\"INITED\");"
        self.mainFrame().evaluateJavaScript(js)

    def injectYourJavascriptHere(self, js):
        return self.mainFrame().evaluateJavaScript(js)

    def finished(self, status):
        self.__logger.info("InstrumentedPage.finished() :: init status => %s" % status)

class MainWindow(PyQt5.QtWidgets.QWidget):

    def __init__(self, config, config_file_name, parent=None):
        super().__init__(parent)

        self.ui = Ui_MainWindow.Ui_MainWindow()
        self.ui.setupUi( self )

        self.web_page = InstrumentedPage()
        self.ui.webView.setPage(self.web_page) 
```

# xslt - 如何处理 XSLT 中的重复导入？

> ID：10096086
> 
> 赞同：6
> 
> 时间：2012-04-10T20:37:03.017
> 
> 标签：xslt, xslt-1.0, xslt-2.0

只要在 XSL 转换中多次导入同一个文件，就会引发警告。通常类似于`Stylesheet module file:/Users/blake/Documents/workspace/course-connect-parent/course-connect-publisher/src/main/xsl/config.xsl is included or imported more than once. This is permitted, but may lead to errors or unexpected behavior`

但是，如果同一个 xsl 需要由多个“子”xsl 调用（例如，包含重要功能的 util.xsl）导入，则这种情况是不可避免的。

有没有办法避免这些警告，或者有更好的做事方式？

这是问题设置：

**FILE_A.xsl**

```
imports FILE_B.xsl and FILE_C.xsl
uses functions/parameters from util.xsl, which it gets from FILE_B.xsl & FILEC.xsl
calls templates in FILE_B.xsl
calls templates in FILE_C.xsl 
```

**FILE_B.xsl**

```
imports util.xsl
contains templates used by FILE_A.xsl
uses functions/parameters from util.xsl 
```

**FILE_C.xsl**

```
imports util.xsl
contains templates used by FILE_A.xsl
uses functions/parameters from util.xsl 
```

**实用程序.xsl**

```
Contains functions/variables used by FILE_A, FILE_B, FILE_C 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-11T08:19:22.137

这些消息是由最近发布的 Saxon 产生的。多次导入同一个文件不是错误，但在某些处理器（包括早期版本的 Saxon）中，效率非常低；这也是不必要的，它会使代码很难调试。基本上，这意味着您有多个具有不同优先级的相同模板规则实例。

在 XSLT 中，与其他语言不同，模块不需要对它所依赖的所有内容进行导入。您只需要在样式表中的任何位置进行一次导入。确实，如果 A.xsl 使用 util.xsl 并且您想在很多地方重用 A.xsl，那么如果 A.xsl 使用 import 或 include 声明来声明其依赖关系会很方便，这意味着如果 B. xsl 也使用 util.xsl 你最终会遇到这种多次导入的情况。

我添加消息是因为两个事件：一个用户从 xsl:next-match 获得了完全奇怪的效果，另一个用户因为一个模块被大约 100,000 条不同的路径组合导入而导致编译时性能非常糟糕，并且因此大约有 100,000 个不同的导入优先级。当这样的问题出现时，总是有一种趋势，试图确保它不再发生，而警告是对此的回应，但就像健康和安全警告一样，很难知道何时平衡是正确的。如果一切正常，您总是可以忽略警告，如果您真的想要，您可以通过在 ErrorListener 中过滤消息来抑制它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-11T00:07:19.243

如果您只使用该集合中的样式表，即从不使用 FILE_C.xsl 作为自立的顶级样式表，您可以简单地将 utils.xsl 导入导出，导入具有全局范围，因此 FILE_C.xsl 中的模板将“查看”来自 utils.xsl 的模板，即使它是在导入树的较高位置导入的。utils.xsl 只会被导入一次，警告就会消失。

或者，您可以保持原样，这不是错误，系统不应该真的因为非错误而打扰您。那是哪个 XSLT 系统？也许它可以选择在警告中不那么激进？

# drupal-7 - Moving Drupal 7 Site from Host to Host

> ID：10096088
> 
> 赞同：2
> 
> 时间：2012-04-10T20:37:15.703
> 
> 标签：drupal-7

I have created a new Drupal 7 site at an address "http://www.mycms.com/customer". I am trying to move it to the production server at "http://www.customer.com". I backed up the database adn restored it on the "www.customer.com" MySQL server. I copied all the files from the "http://www.mycms.com/customer" folders. I cleared the cache_* tables in the database.

When I go to "http://www.customer.com", the home page is successfully displayed, but when I click any link on the home page, I get 1 "404 Not found" error. If I try to go to a page directly, e.g., "http://www.customer.com/node/15", the same error is displayed.

Additional info -

1.  The .htaccess file was copied from the appropriate subdirectory.

2.  There are no redirects in the .htaccess file

3.  When I attempt to login, I get the same error, so I cannot check any settings within the drupal database itself, except via phpAdmin.

Anybody have any ideas what to check next.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T14:01:18.590

为了清楚起见，听起来您正在将站点移动到不同的服务器（不仅仅是不同的 URL）？

如果移动到不同的服务器，我最初的想法是，如果 .htaccess 文件相同并且干净的 url 在新服务器上不起作用，那么需要调整的是 Apache 配置。你有其他网站在这个新服务器上工作吗？

```
AllowOverride All 
```

需要在你的 httpd.conf 中设置一个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-16T08:24:19.663

阿列克谢是对的。解决了我的问题。在 httpd.conf 中，找到并启用 mod_rewrite。

```
LoadModule rewrite_module modules/mod_rewrite.so 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T15:15:55.347

似乎 mod_rewrite 已禁用。在您的客户服务器上创建一个文件，即 info.php，其内容为：

```
<?phpinfo(); 
```

然后从浏览器调用它。搜索“加载的模块”文本。它必须包含“mod_rewrite”（见下图）。

如果你想让干净的 urs 工作，你需要启用这个 apache 模块。

![加载的模块图像](../Images/c9369c591befc84971ab00cb25f2d0c5.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-11T07:22:40.310

尝试删除当前的 .htaccess 文件，然后上传 drupal 附带的标准 .htaccess 文件。

# c - C: code duplication example

> ID：10096090
> 
> 赞同：2
> 
> 时间：2012-04-10T20:37:21.270
> 
> 标签：c, function-pointers, code-duplication

I'm writing functions that take the checksum of two different things: one, a file; and two, an archive entry *a la* the BSD libarchive library. I borrowed the checksum code from GNU's coreutils.

My code for doing a checksum on a file reads from its source like this:

```
unsigned char buf[BUFLEN];
size_t bytes_read;
FILE *fp;
...
while ((bytes_read = fread (buf, 1, BUFLEN, fp)) > 0) { ... } 
```

In my code for reading from an archive entry, the corresponding code looks like

```
struct archive *ar;
unsigned char buf[BUFLEN];
ssize_t bytes_read;
...
while ((bytes_read = archive_read_data(ar, buf, sizeof(buf))) > 0) { ... } 
```

As it stands, I'll have to have two different functions here, even though most of the code is the same. I don't quite see how to do it by passing a function pointer, since fread and archive_read_data don't even have the same number of arguments. (I guess I could start by using read(2) instead of fread(3), but I'm not sure that's a productive way to proceed.)

Is there a nice method to avoid code duplication here? Aside from trying to do it with function pointers, I could do it by putting the identical code pieces in separate files, then `#including`'ing them, but that seems ugly.

In this particular example, the code for the functions isn't that long, so just going ahead and duplicating the code isn't that big a deal. I'm just wondering if an elegant solution exists.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T20:42:41.607

您可以创建自己的包装函数，`fread()`并`archive_read_data()`具有相同的原型。这些包装器中的每一个都将只包含一行代码，以调用底层`read()`函数，并根据需要重新排列参数。

然后根据上下文使用函数指针来区分两个包装器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T20:48:27.553

如果分析校验和的代码是相同的，你可以把它变成一个函数——也就是花括号里面的部分。在我看来，如果它们调用相同的函数，那么拥有两个独立的循环并不是那么糟糕。它们可以被视为一个薄包装。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T20:43:57.597

这两个函数实际上只需要 3 个参数：

*   指向数据源的指针
*   指向数据缓冲区的指针
*   要读取的字节数

您可以编写一个包装函数，`fread`为其赋予与以下相同的签名`archive_read_data`（反之亦然）：

```
ssize_t my_fread(FILE *fp, char *buf, int len) {
  return fread(buf, 1, len, fp);
} 
```

# toast - Toast message doesn't appear on time

> ID：10096093
> 
> 赞同：0
> 
> 时间：2012-04-10T20:37:30.630
> 
> 标签：toast

I am trying to make a toast in specific time, but when I start the emulator and wait for the minute to change it doesn't do anything. Reloading the application shows the toast message (just in that minute).

```
public class Awkat_sala_lodActivity extends Activity {

MediaPlayer myAudio;
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    Calendar ci = Calendar.getInstance();

    String CiDateTime =   
         (ci.get(Calendar.MONTH) + 1) + "/" +
         ci.get(Calendar.DAY_OF_MONTH) + "   " +
         ci.get(Calendar.HOUR_OF_DAY) + ":" +
         ci.get(Calendar.MINUTE);
 myAudio = MediaPlayer.create(this, R.raw.ce);

/////
        if(ci.get(Calendar.MONTH) + 1 == 4) {
            if(ci.get(Calendar.DAY_OF_MONTH) == 10){
                if(ci.get(Calendar.HOUR_OF_DAY) == 20 ){
                    if(ci.get(Calendar.MINUTE) ==05){
                         Toast.makeText(Awkat_sala_lodActivity.this, "test", Toast.LENGTH_LONG).show();
                        myAudio.start();

                            }
            } 
```

What do I have to change in order to get the program to work on time without having to refresh it?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T10:12:46.737

在你的 Toast 中尝试 getApplicationContext() ......

```
Toast.makeText(getApplicationContext(), "test", Toast.LENGTH_LONG).show();
myAudio.start(); 
```

# php - jQuery Tabbed Ajax content

> ID：10096095
> 
> 赞同：0
> 
> 时间：2012-04-10T20:37:42.440
> 
> 标签：php, ajax, codeigniter

So I need to make 3 tabs with query (got this part down), but each of them needs to retrieve filter-able data through an Ajax request. Basically the page is setup with a static div on the left with the filter in it, and then on the right the tabs change according to which one you pick.

I'm just wondering what would be the best method of grabbing the ajax content and putting it into each tab?

I hope I made my question clear.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T21:00:48.767

如果我正确理解您的问题，这应该很简单。例如，假设您要检索一个静态网页并将该网页的所有内容插入到您的容器 div 中...

```
$('#tab1').click(function(){
    //Fetch a webpage (via GET) and load into 'result'
    $.get('/path/to/stuff.htm',function(result){
        //Replace content of container with result
        $('#containerDiv').html(result);
    });
}); 
```

真的就是这么简单。如果您需要结果的一部分（例如从 XMLRPC 请求中提取 CDATA），那么您可以简单地将*结果*作为 jQuery 对象加载，找到元素，然后加载它......就像这样......

```
$('#tab1').click(function(){
    //Fetch a webpage (via GET) and load into 'result'
    $.get('/path/to/stuff.htm',function(result){
        //Make result a jQuery obj
        result = $(result);
        //Replace content of container with result
        $('#containerDiv').html(result.find('mycdata').text());
    });
}); 
```

我还应该注意 - 如果您有一个包含在 CDATA 中的 XML 结果，请始终将其读取为 .text() ，即使您将其作为 html 插入也是如此。如果结果未包含在 CDATA 中，则将其读取为 .html()。

更新：如果您需要向服务器发送额外数据（例如排序 ASC 或 DESC），您可以这样做...

```
$('#tab1').click(function(){
    //Fetch a webpage (via GET) and load into 'result'
    $.get(
        '/path/to/service', 
        { sort:'ASC', startDate:'2012-04-01', endDate:'2012-04-08'}, 
        function(result){
            //Replace content of container with result
            $('#containerDiv').html(result);
        }
    );
}); 
```

# python - How do we mock in this kind of situation?

> ID：10096097
> 
> 赞同：0
> 
> 时间：2012-04-10T20:37:53.650
> 
> 标签：python, unit-testing, mocking

Let's put up this scenario

```
# This code lives in lolcat-web/lolapps/lolburger/burger.py
import os
from helper.lib import price

def i_haz_cheezeburger(Burger, user):

    kings_burgers = []
    queens_burgers = []
    address = os.path.join(user.hometown, burger_king_addr)
    burger_menu = Burger.menu()
    for burger in burger_menu:
       if burger == 'King':

            kings_burgers.append({
                    'name': burger, 
                    'price': price(burger)
                   })
       else:
            queens_burgers.append(...)

    return (kings_burgers, queens_burgers) 
```

I want to test whether the function `i_haz_cheezeburger` will return a tuple, with correct values in it. It depends on a few things (simplification): `os`, `helper.lib.price`, `Burger`, and `user` (User class)

Since I am fairly new to `mock` by Michael Foord, here is my newbie attempt:

**edit** looks wrong because `joiner` and `price` doesn't seem to be used anywhere?

```
def test_01(unittest.TestCase):
   with patch('os.path.join') as joiner:
      with patch('lolcat-web.lolapps.lolburger.burger.price') as price: 
          mock_user = MagicMock(name='user', spec=client.auth.User)
          mock_user.hometown = 'New-York'
          mock_burger = MagicMock(name='burger', spec=lolcat-web.lolapps.lolburger.Burger)
          mock_burger.menu = [ '....sets up a list of samples .....' ]

          # now call the function
          response = i_get_cheezeburger(mock_burger, mock_user)
   # now we do some assertions..... 
```

This is like writing fixtures. What if the method `i_haz_cheezeburger` has a few more dependencies. Of course I can refactor them out and create a few more wrapper / helper functions. But the problem is, or ***at least*** the confusion is: I want to test my output. I don't want to know "oh there is no mispell / unbound assignment because it passed with a per-defined return value" But setting up the fixtures (or return values for things like `Burger.menu`) doesn't sound right.

What's the proper way of dealing this kind of issue? Please correct my misunderstanding.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T20:41:34.620

不要模拟*标准库*——如果标准库有问题，你就有更大的问题（更不用说你几乎肯定没有对标准库进行集成测试，所以模拟它只是隐藏潜在的失败）。

如果函数的输出取决于 的返回值，那么如果要测试返回值`Burger.menu()`，则需要为的模拟版本设置返回值。`Burger.menu()`这是正确的做法。您提供的模拟输入是真实世界输入的受控版本，因此您期望在给定这些受控输入的情况下获得特定的输出。使用`mock`不会神奇地从方程式中删除*所有*实际的真实数据。

# c# - 将回车添加到字符串

> ID：10096100
> 
> 赞同：24
> 
> 时间：2012-04-10T20:38:06.337
> 
> 标签：c#, linq

我有一长串。

```
string s1 = "'99024','99050','99070','99143','99173','99191','99201','99202','99203','99204','99211','99212','99213','99214','99215','99217','99218','99219','99221','99222','99231','99232','99238','99239','99356','99357','99371','99374','99381','99382','99383','99384','99385','99386','99391','99392'"; 
```

我想

```
string s2 = 
            "'99024',
             '99050',
             '99070',
             '99143',
             '99173',
             '99191',
             '99201',
             '99202',...."; 
```

换句话说。也许它喜欢：

```
string s2 = "'99024',"+'\n'+"'99050',"+'\n'+"'99070',"+'\n'+"'99143',"+'\n'+.....; 
```

我需要一个简洁的代码。也许是 LINQ。谢谢。

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-04-10T20:40:24.523

```
string s2 = s1.Replace(",", "," + Environment.NewLine); 
```

* * *

此外，仅从性能的角度来看，以下是我见过的三个当前解决方案如何叠加超过 100k 次迭代：

```
ReplaceWithConstant           - Ms: 328, Ticks: 810908
ReplaceWithEnvironmentNewLine - Ms: 310, Ticks: 766955 
SplitJoin                     - Ms: 483, Ticks: 1192545 
```

*替换常量*：

```
string s2 = s1.Replace(",", ",\n"); 
```

*ReplaceWithEnvironmentNewLine*：

```
string s2 = s1.Replace(",", "," + Environment.NewLine); 
```

*拆分加入*：

```
string s2 = String.Join("," + Environment.NewLine, s1.Split(',')); 
```

*ReplaceWithEnvironmentNewLine*和*ReplaceWithConstant*在误差范围内，因此在功能上没有区别。

`Environment.NewLine`为了可读性和一致性，应该优先使用`"\n"`using`String.Empty`而不是using `""`。

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2012-04-10T20:39:26.573

```
string s2 = s1.Replace(",", ",\n"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T20:42:25.330

```
string s2 = s1.Replace(",", ",\n") + ",...."; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-10T20:46:58.003

另外一个选项：

```
string s2 = String.Join("," + Environment.NewLine, s1.Split(',')); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-05-01T17:58:43.670

Environment.NewLine 应该像 Dan Rigby 所说的那样使用，但是 String.Empty 存在一个问题。无论是在读取之前还是之后读取，它都将始终为空。昨天我的项目中有一个问题。我删除了它，它按预期的方式工作。最好先声明变量，然后在需要时调用它。String.Empty 将始终保持为空，除非需要初始化变量，然后才应该使用 String.Empty。我想我会把这个花絮扔给每个人，因为我经历过它。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-10-06T03:43:32.587

我建议使用`StringBuilder`

```
string s1 = "'99024','99050','99070','99143','99173','99191','99201','99202','99203','99204','99211','99212','99213','99214','99215','99217','99218','99219','99221','99222','99231','99232','99238','99239','99356','99357','99371','99374','99381','99382','99383','99384','99385','99386','99391','99392'";

var stringBuilder = new StringBuilder();           

foreach (var s in s1.Split(','))
{
    stringBuilder.Append(s).Append(",").AppendLine();
}
Console.WriteLine(stringBuilder); 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2018-02-23T18:07:39.407

字符串 s2 = s1.Replace(",", ",\r\n");

# http - fake estimation of download time

> ID：10096110
> 
> 赞同：1
> 
> 时间：2012-04-10T20:38:55.417
> 
> 标签：http, firefox, download

I've been downloading files from some services that offers hosting. Very often, when I download as a free user Firefox (other browsers as well, haven't checked all, though) shows me that download speed is 400KB and 10 minutes remaining to the finish. This is BS, because it takes 45 minutes or more to download file and e.g. "1 minute 40 seconds remaning" is shown for a few seconds.

The present the user a higher speed. How do they do that? Is this HTTP protocol cheat or browser cheat? Why does Firefox show the wrong value?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T20:43:03.147

我从来没有经历过这种情况，但是我再一次从不使用 Firefox 下载文件。

也就是说，远程服务器可能会以高速发送文件，但会以短时间突发的数据平均达到其“免费用户”的速度。Firefox 可能会看到在这些突发期间下载数据的速度，而不是整体平均速度。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-04-10T20:59:01.673

Many progress bars exist simply to make you feel better. For something like downloading a file, it is very difficult to estimate exactly.

How many packets get dropped and resent? What if bandwidth gets choked somewhere between your machine and the server? How much data needs to be sent? (for a file download, you could sent metadata first, but this can get complicated in many cases for many reasons).

These are all questions that are difficult or impossible to answer exactly, and they can be problematic to guess.

Bring in the idea that users [Don't perceive download times accurately anyway](http://www.codinghorror.com/blog/2008/03/actual-performance-perceived-performance.html), and the prospect of implementing an accurate progress bar is very unattractive. The easy way out is to make a progress bar that lies. Even the best implementations are just continuously revising a best guess, and there can be no guarantee about the accuracy of that guess.

The solution is to treat download-time estimates with some skepticism, and just be patient.

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-01-11T03:58:21.003

以下是获取实际带宽的方法：

[https://superuser.com/questions/356907/how-to-get-real-time-network-statistics-in-linux-with-kb-mb-bytes-format-and-for](https://superuser.com/questions/356907/how-to-get-real-time-network-statistics-in-linux-with-kb-mb-bytes-format-and-for)

使这个名为“netbps”的脚本可执行

```
#!/usr/bin/perl
use strict;
use warnings;
use Time::HiRes;

my $reporting_interval = 10.0; # seconds
my $bytes_this_interval = 0;
my $start_time = [Time::HiRes::gettimeofday()];

while (<>) {
  if (/ length (\d+):/) {
    $bytes_this_interval += $1;
    my $elapsed_seconds = Time::HiRes::tv_interval($start_time);
    if ($elapsed_seconds > $reporting_interval) {
       my $bps = $bytes_this_interval / $elapsed_seconds;
       printf "%02d:%02d:%02d %10.2f Bps\n", (localtime())[2,1,0],$bps;
       $start_time = [Time::HiRes::gettimeofday()];
       $bytes_this_interval = 0;
    }
  }
} 
```

sudo tcpdump -i wlan0 -l -e -n | ./netbps

我只能说Firefox是错误的。该脚本为您提供了每秒字节数的良好估计。大约是firefox估计的1/4。所以新规则：如果感觉 Firefox 给出的时间太短，则乘以 4 以获得真实时间。

# jquery - 我需要一些 TAB 代码的帮助，Jquery

> ID：10096121
> 
> 赞同：0
> 
> 时间：2012-04-10T20:39:45.697
> 
> 标签：jquery

长话短说，我正在使用一些 jquery 选项卡并使用此代码。

```
css of the tabs:

/* ---------- INNER CONTENT (ACCORDION) STYLES ----*/
.accordian {    
    background-color:#fff;
    margin:20px auto;   
    color:red;
    overflow:hidden;

}

#boxOut{
    width:320px;
    height:410px;
    overflow:scroll;
    background-color:#fff;
    margin:154px auto auto 38px;

}

/*.accordian {
    width: 400px;
    margin: 50px auto;
}
*/
.accordian li {
    list-style-type: none;
    padding: 0 8px;
}

.dimension {
/*  height: 400px;
*/}

.odd, .even {
    font-weight: bold;
    height: 27px;
    padding-top: 3px;
    padding-left: 10px;
    border: 1px solid #d8d8d8;
    background: #ececec;
    color: #333;
    border-radius: 8px; 
-moz-border-radius: 8px; 
-webkit-border-radius: 8px;
margin-left:6px;
margin-right:6px; 

}

.logo{
    width:300px;
    margin:6px auto;
}

.intownLogo{
    width:255px;
    margin:6px auto;
}

.spaces{
    margin-top:8px; 
} 
```

js：

```
 $(function() {
        // Hide all the content except the first
        //$('.accordian li:odd:gt').hide();
        $('.accordian li:odd').hide();

        // Add the dimension class to all the content
        $('.accordian li:odd').addClass('dimension');

        // Set the even links with an 'even' class
        $('.accordian li:even:even').addClass('even');

        // Set the odd links with a 'odd' class
        $('.accordian li:even:odd').addClass('odd');

        // Show the correct cursor for the links
        $('.accordian li:even').css('cursor', 'pointer');

        // Handle the click event
        $('.accordian li:even').click( function() {
            // Get the content that needs to be shown
            var cur = $(this).next();

            // Get the content that needs to be hidden
            var old = $('.accordian li:odd:visible');

            // Make sure the content that needs to be shown 
            // isn't already visible
            if ( cur.is(':visible') )
                return false;

            // Hide the old content
            old.slideToggle(500);

            // Show the new content
            cur.stop().slideToggle(500);

        } );
    }); 
```

我的jquery充其量是noobish，所以虽然我不知道它在做什么，但我无法在不破坏它的情况下对其进行编辑......上帝知道我试过大声笑。

我遇到的问题是，对于这些选项卡，虽然它们可以工作，但它们可以与 .next() 函数等一起工作，所以当一个选项卡打开时，如果我单击同一个选项卡关闭，它不会关闭，它仅在单击另一个选项卡时关闭。

我需要帮助的是....某事说

“逻辑”如果此选项卡已打开并被单击，则关闭当前打开的选项卡。所以说，例如，基于上面的代码

伪代码来了：

```
if ( cur.is(':visible') && cur.is(':clicked') )
        cur.slideToggle(); 
```

感谢您在高级方面的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T20:46:31.420

您可以使用[.toggle()](http://api.jquery.com/toggle-event/)事件。这很简单——你把它作为参数传递。当您单击目标时，每个功能都会依次运行。一个简单的例子：

```
cur.toggle(
    function()    //function 1
    {
        cur.show();
    },
    function()    //function 2
    {
        cur.hide();
    }
); 
```

第一次单击时，它会运行第一个函数，执行`cur.show();`. 下一次单击运行第二个函数 running `cur.hide();`。再次单击再次运行第一个函数，依此类推。您甚至可以添加更多功能，因此您可以在第 1 次到第 n 次点击时拥有特定的功能，一遍又一遍。

# prolog - 如何在 Prolog 中通过直接访问相邻顶点来表示有向循环图

> ID：10096124
> 
> 赞同：5
> 
> 时间：2012-04-10T20:39:52.293
> 
> 标签：prolog, cyclic-graph

我需要在 Prolog 中使用循环构造有向图（在运行时），但我不确定如何表示它。我的要求是我需要在恒定时间内从一个顶点到达他的邻居。

是否可以将其表示为一棵树，例如：

`t(left_son,V,right_son)`

但如何解决循环？

我可以列出边：

`graph([a,b,c,d],[e(a,b),e(b,c),e(c,a),e(c,d)])`

要不就

`[a->[b],b->[c],c->[a,d],d->[]]`

但是如何避免在搜索邻居时调用列表中的函数“成员”，这会花费线性时间？

谢谢你的帮助

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-10T21:41:04.763

如果您的图形的顶点数少于 Prolog 允许的最大数量（例如 SWI-Prolog 具有无限数量），则可以将边表示为参数的索引：

可能![这](../Images/71b0f6c33ae83be3b096fad612dc9229.png)

```
G = graph(a-[2],b-[3],c-[1,4],d-[2]). 
```

然后使用[arg](http://www.swi-prolog.org/pldoc/doc_for?object=arg/3) (Edge, G, Vert-Edges) 访问邻居。

当然，任何 Prolog 都会让您使用事实来描述图形。这也是非常大的图形的首选方式。

```
:- dynamic edge/2.

edge(a,b).
edge(b,c).
edge(c,a).
edge(c,d).
edge(d,b). 
```

**编辑**edge/2 关系表示也获得了自动索引的（可能很大的）好处。

**更多编辑**我完全忘记了[RDF](http://www.swi-prolog.org/pldoc/package/rdf2pl.html)和[语义网](http://www.swi-prolog.org/pldoc/package/semweb.html)。真的很强大，我们正朝着那个方向前进。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-11T07:13:04.350

除了@chac 建议的表示之外，您还可以考虑使用属性变量（如果您的 Prolog 系统支持它），特别是如果您需要在计算期间将更多属性附加到顶点或边时。在此表示中，您将为每个顶点使用唯一变量，如有必要，附加（使用 put_attr/3）一个属性，如“name”，并附加一个附加属性，如“edges”，例如顶点列表，或术语边缘（E，Vertex）的列表，其中 E 再次是一个变量，如果您需要跟踪影响边缘的信息，您可以将更多属性附加到该变量。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-04-16T14:34:08.877

`library(ugraphs)`在许多 Prolog 系统中都有[YAP](http://www.dcc.fc.up.pt/~vsc/Yap/documentation.html#UGraphs)、[SWI](http://www.swi-prolog.org/man/ugraphs.html)、[SICStus](http://www.sics.se/sicstus/docs/latest/html/sicstus.html/lib_002dugraphs.html)、[Ciao](https://clip.dia.fi.upm.es/~clip/Projects/ASAP/Software/Ciao/CiaoDE/ciao_html/ciao_171.html)等。（请随时在此处添加更多参考资料！）在那里，图表表示为对列表`Vertex-Neighbours`。乍一看，您可能会觉得这不是一个非常有效的表示。毕竟，对单个顶点的访问与列表的长度成正比。然而，直接访问顶点很少受到关注。大多数情况下，图表会一举处理——这通常会摊销访问成本。

# php - PHPExcel 即时写入？

> ID：10096126
> 
> 赞同：6
> 
> 时间：2012-04-10T20:40:09.060
> 
> 标签：php, phpexcel

寻找一个 PHP 类来生成巨大的 xlsx 文件，而不必为整个文件分配巨大的内存以适应内存。

我们喜欢 PHPExcel，但需要一种即时写入的方法，而不是将整个文件加载到内存中，然后调用一个函数来编写它。

看到了一个类似的问题，但没有明确的解决方案。

澄清 -

您有 1GB 的可用内存，需要生成一个 3GB 的 Excel 文件。

是否有现有的类/方法来实现这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T20:44:12.357

创建 xlsx 文件的秘诀是将它们编写为 HTML 表格，这是创建基本 Excel 电子表格的超级快捷方式。

诀窍是编写一个 HTML 表格并将其保存为 .xlsx 扩展名。然后就可以用Excel打开了。简单的。

使用 HTML，您可以创建带有公司徽标的漂亮标题。它拥有一切！

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-05-11T00:35:06.573

耶！

我们最终通过编写自己的 PHP Excel 类解决了这个问题，该类能够生成无限大小的 xlsx 文件，通过即时写入（从不将所有数据加载到内存中）。

感谢所有贡献您的反馈和想法的人！**非常感谢**。

我们的班级没有 phpexcel.codeplex 提供的所有花里胡哨。当您的数据集超过 100 万行时，我们确实支持字体、基本样式和自动工作表创建。

要去清理类，放到**Github上供**大家使用。我会尽快用 URL 更新这篇文章。

# c - 在 C 中从键盘输入字符

> ID：10096137
> 
> 赞同：1
> 
> 时间：2012-04-10T20:41:04.010
> 
> 标签：c, char

我有以下代码，其中**检查**用于 char 类型

```
do{
      printf("Do you want to add an edge(n to stop adding)\n");
      check = getchar();
}while(check!='n'); 
```

和

```
do{
      printf("Do you want to add an edge(n to stop adding)\n");
      scanf("%c",&check);

}while(check!='n'); 
```

它们都产生相同的输出

例如对于**r\n**我得到**Do you want to add a edge**两次，对于说**tt\n**我三次得到相同的问题，然后询问输入。

我的问题是如何避免它，为什么会发生？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T20:43:45.040

您必须确保它`check`是字母数字的，因为or`\n`不会忽略它。`scanf``getchar()`

```
do {
    printf("Do you want to add an edge(n to stop adding)\n");
    do
    {
        check = getchar();
    } while (!isalnum(check) && check != EOF);
} while(check!='n'); 
```

编辑：因为你只想要一行中的第一个字符：

```
char line[64];
fgets(line, 64, stdin);
check = line[0]; 
```

您仍然需要检查以确保它`check`在您的输入范围内。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T21:02:20.700

要解决您的问题，请尝试以下操作：

```
void main()
{
    char check;
    char c;
    do
    {
        printf("Do you want to add an edge(n to stop adding)\n");
        check = getchar();
        do { c = getchar(); } while (c != '\n' && c != EOF);  // This gobbles the rest of the chars on stdin
    } while(check != 'n' && check != EOF);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T13:59:35.540

我在 ubbuntu 中使用 nano 编译器来编写程序。

该程序要求输入，我只需要一个数字作为我的输入，并且在该输入之后立即“正常程序操作”应该继续程序。

程序必须继续执行代码中写下的下一个操作，例如 printf(" ")。

例子

```
-----------start-------------

Input : 2 3 4 5 6 7

------------end----------------- 
```

在没有用户输入“”（空格键）的情况下，我想在程序本身中加入“”（空格键）。只有当用户——

1.  手动输入空格键按钮
2.  按下 ENTER 按钮

我不想要其中任何一个。

# javascript - 跨浏览器 javascript 从用户的选择中获取和替换确切的 HTML？

> ID：10096141
> 
> 赞同：0
> 
> 时间：2012-04-10T20:41:24.447
> 
> 标签：javascript, jquery, selection, range

我正在寻找一种使用 javascript 或 JQuery 从用户选择的范围中获取、修改和替换 HTML 的方法。基本上，假设用户在一些 HTML 标记中选择了一个范围（| 描绘了选择）：

```
<p>This is an <b>example |of</b> some text| to be selected</p> 
```

我将如何获得：

```
of</b> some text 
```

然后进一步，在运行一些代码对该文本进行修改后：

```
of some</b> altered text 
```

我将如何将其重新插入，以便最终版本显示为：

```
<p>This is an <b>example of some</b> altered text to be selected</p> 
```

我无法解决这两个问题，找到范围的确切 html，或将特定修改后的 HTML 写入范围。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T15:59:58.527

我偏离了您的文本选择想法，并做了一个基于鼠标悬停和突出显示的解决方案。不是您的确切要求，但它实现了您的基本目标。有很大的改进空间。

示例：[jsFiddle](http://jsfiddle.net/Bd2c6/1/)

JS

```
var $txtArea = $('textarea'); 

function Rebind(){
    $('#editable *').off('mouseover.editor').on('mouseover.editor',function() {
        $(this).addClass('highlight');
        return false; 
    }).off('mouseout.editor').on('mouseout.editor',function() {
        $(this).removeClass('highlight');
        return false; 
    }).off('click.editor').on('click.editor',function() {
        var $sel = $('.highlight'); 
        $txtArea.val($sel.html()).data('selected', $sel);
    });
}
Rebind();
$('input').click(function(){
    $txtArea.data('selected').html($txtArea.val()); 
    Rebind();
}); 
​ 
```

*注意：无论出于何种原因， [jQuery`on`](http://api.jquery.com/on/)没有选择新元素，所以我需要在编辑后重新绑定它们。*

HTML

```
<div id='editable'>
    <div>
        This is <br /> some <b>content</b>
        <div>testing</div>
        <div> 
            some <i>more content</i>
            <div>eidt me</div>
        </div>
    </div>
</div>

<textarea ></textarea>
<input type="button" value="save" /> ​ 
```

CSS

```
textarea{
 height:150px;
 width:100%;    
}

.highlight
{
    border:1px solid blue !important;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T21:09:17.213

这是我的开始：

[jsFiddle](http://jsfiddle.net/iambriansreed/BSrSc/)

它用输入的值替换选择的文本。

它虽然没有考虑到 html。

对此有什么想法吗？

```
$('#content').on('mouseup',function() {

    var t = false;

    if (window.getSelection) {
        t = window.getSelection();
    } else if (document.getSelection) {
        t = document.getSelection();
    } else if (document.selection) {
        t = document.selection.createRange().text;
    }

    if (t && (t+'').length > 0) {

       $('#content').html($('#content').html().replace(t,$('input').val()))

        alert("You replaced:\n" + t + "\nwith:\n" + $('input').val());
    }

});​ 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-10T20:50:58.400

我认为实现这一目标的一种方法是：

1.  获取 DOM 中包含整个选择的最高元素
2.  解析其 innerHTML 以供选择（请不要使用正则表达式）
3.  显示匹配并记住它的位置和插入编辑版本的元素

尽管我的第 3 步可能无法实际更改布局。希望应该有更简单的解决方案。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-04-10T21:16:19.660

这是我的看法，就像 iambriansreed 的版本一样，它不考虑 HTML，正如您将在示例中看到的那样：

[jsFiddle](http://jsfiddle.net/793N3/1/)

这是重要的代码：

```
var s = window.getSelection();
var ss = s.toString();
var node = $(s.getRangeAt(0).startContainer).parent();
var contents = node.text();
var idx = contents.indexOf( ss );
node.html( contents.substr( 0, idx ) + 
    "HELLO" + 
    contents.substr( idx+ss.length ) ); 
```

# php - php：不知从何而来的空行

> ID：10096142
> 
> 赞同：8
> 
> 时间：2012-04-10T20:41:25.790
> 
> 标签：php, debugging

我有奇怪的错误，不知道如何在不浪费太多时间的情况下解决它。我的控制器中有一个方法，它应该使用以下方法返回 xml：

```
 header("Content-type: text/xml");
  header("Content-Disposition: attachment; filename=output.xml");
  header("Pragma: no-cache");
  header("Expires: 0"); 
```

问题是由于空行，输出不是有效的xml，我不知道它来自哪里，你知道如何解决这个问题吗？也许忽略这个空行或什么？我不想调试整个框架......我尝试使用 `var_dump(debug_backtrace())`但我可能因为教义而弄得一团糟。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-04-10T20:42:59.830

`<?php ?>`几乎总是，在您的标签之前或之后会有一个空行。如果不在您的主文件中，请查看您的包含。

另外，一个小提示...如果您的文件是纯 PHP，只需启动它，`<?php`不要关闭 PHP 标记。没有必要关闭它，然后您可以避免最后的空白行给您带来麻烦。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2016-06-06T18:42:06.110

使用`ob_clean()`which 清除具有不需要的换行符的缓冲区

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-04-10T20:48:20.797

此外，任何错误消息都将在标题之前打印到文档中。但有时在没有错误的情况下很难找到罪犯。试试这个：

```
ob_start() 
```

将第一件事放在您的脚本中，这将确保在您调用之前不会输出任何其他内容

```
ob_flush() 
```

这对您来说可能不是必需的（ob_flush）。

另外，我不久前遇到过这个问题，其中包含在另一个脚本中间的脚本在结束 php 标记之后有一个字符，这导致该单个字符将标题向下推并使响应无效。

所以我会遵循布拉德的建议，除非你必须这样做，否则不要使用关闭 php 标签。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-06-09T14:06:54.850

我不时遇到这个问题。这可能非常令人沮丧。:-) 不管怎样——我觉得这很有帮助。这将显示带有空行后跟 php 开始标记的文件。它会显示误报，但有助于很好地缩小搜索范围。

```
pcregrep -Mron '\n\<\?php' . 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-06-05T13:58:13.600

我遇到了同样的问题，问题来自我的一个 php 文件末尾的关闭 ?> 后的空白行。

仔细检查所有 php 文件并删除关闭？>

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-10T20:44:59.947

您几乎可以肯定在您的 PHP 标记之前或之后的某处有一个空行。解决它的一种方法是始终`exit`或`die()`在输出 XML 文件之后。这将切断您在代码末尾可能有的任何额外行。不过，您可以确保文件开头没有任何内容。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-05-16T10:32:28.690

在 Plesk 更新后，我有一个空文件*/tmp/.tmp.err*，它`auto_prepend_file`在 php 配置中自动添加。

因此，所有 PHP 脚本都以空字符串开头。一些独特的情况，但可能对某人有所帮助。

# java - 如何使用不同类中的两个 onClickListener 引用布局

> ID：10096147
> 
> 赞同：0
> 
> 时间：2012-04-10T20:41:43.757
> 
> 标签：java, android, xml, methods, onclicklistener

我的问题是关于 OnclickListner 和 java 类的。我有一个带有两个按钮的 xml 布局；一个（单击时）触发“日期”类，另一个触发“电子邮件”类。电子邮件按钮工作正常，但是当我尝试为“日期”按钮设置点击监听器时，应用程序崩溃（触发时）。我的目标是能够单击日期按钮，显示日期选择器。这是我的代码。希望这是足够的信息，任何人都可以帮助我，谢谢大家。

XML:

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:weightSum="100"
android:orientation="vertical"
android:background="@color/white">

<ImageView
    android:id="@+id/imageView1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:src="@drawable/bgklogo3" />

<TextView
    android:id="@+id/textView1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:gravity="center"
    android:text="Schedule Service"
    android:textSize="20sp"
    android:textStyle="bold"
    android:textColor="@color/black"
    android:textAppearance="?android:attr/textAppearanceLarge" />

<ScrollView
  android:layout_width="fill_parent"
  android:layout_height="fill_parent"
  android:layout_weight="30" >

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical" >

        <TextView
            android:id="@+id/textView2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:gravity="center"
            android:textSize="20sp"
            android:textStyle="bold"
            android:textColor="@color/black"
            android:text="Your Information"
            android:textAppearance="?android:attr/textAppearanceSmall" />

        <EditText
            android:id="@+id/firstName"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:maxLength="20"
            android:singleLine="true"
            android:imeActionLabel="Next"
            android:hint="Enter First Name..." >

        </EditText>

        <EditText
            android:id="@+id/lastName"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:singleLine="true"
            android:imeActionLabel="Next"
            android:hint="Enter Last Name..." />

        <EditText
            android:id="@+id/Email"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:singleLine="true"
            android:imeActionLabel="Next"
            android:hint="Enter Email..."
            android:inputType="textEmailAddress" />

        <EditText
            android:id="@+id/PhoneNumber"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:singleLine="true"
            android:imeActionLabel="Next"
            android:hint="Enter Phone Number..."
            android:inputType="phone" />

        <TextView
            android:id="@+id/textView3"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:gravity="center"
            android:textColor="@color/black"
            android:text="Vehicle Information"
            android:textSize="20sp"
            android:textStyle="bold"
            android:textAppearance="?android:attr/textAppearanceSmall" />

        <LinearLayout
            android:id="@+id/linearLayout1"
            android:layout_width="match_parent"
            android:layout_height="wrap_content" >
       <!--      
         <EditText
             android:id="@+id/tYear"
             android:layout_width="155dp"
             android:layout_height="wrap_content"
             android:singleLine="true"
            android:imeActionLabel="Next"
             android:hint="What year is it?"/>

         <EditText 
             android:id="@+id/tMake"
             android:layout_width="match_parent"
             android:layout_height="wrap_content"
             android:singleLine="true"
            android:imeActionLabel="Next"
             android:hint="What make is it?"/>

         --> 

            <Spinner
                android:id="@+id/sYear"
                android:layout_width="155dp"
                android:layout_height="wrap_content"
                android:entries="@array/entries"
                android:prompt="@string/prompt" />

            <Spinner
                android:id="@+id/sMake"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:entries="@array/entries2"
                android:prompt="@string/prompt2" >
            </Spinner>

        </LinearLayout> 

        <EditText
            android:id="@+id/Model"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:singleLine="true"
            android:imeActionLabel="Next"
            android:hint="Enter Model..." />

        <TextView
            android:id="@+id/textView4"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:gravity="center"
            android:textColor="@color/black"
            android:hint="Service Information"
            android:textSize="20sp"
            android:textStyle="bold"
            android:textAppearance="?android:attr/textAppearanceSmall" />

        <LinearLayout
            android:id="@+id/linearLayout2"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_weight="30" >

          <!--    <EditText
                android:id="@+id/tpickDate"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:singleLine="true"
                android:imeActionLabel="Next"
                android:hint="Enter service date..."/>
       -->

            <Button
                android:id="@+id/pickDate"
                android:layout_width="142dp"
                android:layout_height="wrap_content"
                android:text="Service Date: "
                android:onClick="onClick"/>

            <TextView
                android:id="@+id/dateDisplay"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"

                android:text="@+id/dateDisplay"
                android:textSize="20sp" />
                -->
        </LinearLayout>
      <!--   
        <EditText 
            android:id="@+id/tTime"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:singleLine="true"
            android:imeActionLabel="Next"
            android:hint="Enter service time..." />

        <EditText 
            android:id="@+id/tNeeded"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:singleLine="true"
            android:imeActionLabel="Next"
            android:hint="Enter service needed..." />
            --> 

        <Spinner
            android:id="@+id/sTime"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:entries="@array/entries3"
            android:prompt="@string/prompt3" />

        <Spinner
            android:id="@+id/sNeeded"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:entries="@array/entries4"
            android:prompt="@string/prompt4" />

        <EditText
            android:id="@+id/eComments"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:singleLine="true"
            android:imeActionLabel="Next"
            android:hint="Enter Comments Here..."
            android:inputType="textMultiLine" />
    </LinearLayout>
  </ScrollView> 

<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_weight="40"
    android:orientation="vertical" >        

     <Button
    android:id="@+id/bSentEmail"
    android:layout_width="250dp"
    android:layout_height="wrap_content"
    android:layout_gravity="center"
    android:text="Submit"
    android:textSize="20dp"
    android:onClick="handleClick"
    />

</LinearLayout>

</LinearLayout> 
```

日期类：

```
import java.util.Calendar;
import java.util.Date;

import android.app.Activity;
import android.app.DatePickerDialog;
import android.app.Dialog;
import android.content.Intent;
import android.os.Bundle;
import android.text.method.KeyListener;
import android.view.KeyEvent;
import android.view.View;
import android.view.View.OnClickListener;
import android.view.inputmethod.EditorInfo;
import android.widget.Button;
import android.widget.DatePicker;
import android.widget.Spinner;
import android.widget.EditText;
import android.widget.TextView;
import android.widget.TextView.OnEditorActionListener;
import android.widget.Toast;

public class ScheduleService extends Activity implements OnClickListener {
EditText /* serviceTime, serviceNeeded, vehicleYear, vehicleMake, */
        personsFirstName,
        personsLastName,
        personsEmail,
        personsPhone,
        comments,
        vehicleModel;
Spinner serviceTime, serviceNeeded, vehicleYear, vehicleMake;
TextView serviceDate;
String fname, lname, phoneNumber, vehicleYears, vehicleModeltrim,
        vehicleManu, serviceAppointment, serviceAppointmentTime,
        serviceTypeNeeded, extraComments, emailAdd, emailaddress, message;
Button sendEmail, PickDate ;
private TextView mDateDisplay;
 private Button mPickDate;
 private int mYear;
 private int mMonth;
 private int mDay;

 static final int DATE_DIALOG_ID = 0;

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.service);
    initialize();

    PickDate.setOnClickListener(this);

}

public void onClick(){
     //
        mDateDisplay = (TextView)  findViewById(R.id.dateDisplay);
        mPickDate = (Button) findViewById(R.id.pickDate);

        // add a click listener to the button
        mPickDate.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {
                showDialog(DATE_DIALOG_ID);
            }
        });

        // get the current date
        final Calendar c = Calendar.getInstance();
        mYear = c.get(Calendar.YEAR);
        mMonth = c.get(Calendar.MONTH);
        mDay = c.get(Calendar.DAY_OF_MONTH);

        // display the current date
        updateDisplay();
    }
    @Override
    protected Dialog onCreateDialog(int id) {
        switch (id) {
        case DATE_DIALOG_ID:
            return new DatePickerDialog(this,
                        mDateSetListener,
                        mYear, mMonth, mDay);
        }
        return null;
    }

    // updates the date we display in the TextView
    private void updateDisplay() {
        mDateDisplay.setText(
            new StringBuilder()
                    // Month is 0 based so add 1
                    .append(mMonth + 1).append("-")
                    .append(mDay).append("-")
                    .append(mYear).append(" "));
    }
    // the callback received when the user "sets" the date in the dialog
    private DatePickerDialog.OnDateSetListener mDateSetListener =
            new DatePickerDialog.OnDateSetListener() {

                public void onDateSet(DatePicker view, int year,
                                      int monthOfYear, int dayOfMonth) {
                    mYear = year;
                    mMonth = monthOfYear;
                    mDay = dayOfMonth;
                    updateDisplay();
                }
    };

// Use the following commented fields for future Spinner properties
private void initialize() {
    // TODO Auto-generated method stub
    personsFirstName = (EditText) findViewById(R.id.firstName);
    personsLastName = (EditText) findViewById(R.id.lastName);
    personsEmail = (EditText) findViewById(R.id.Email);
    personsPhone = (EditText) findViewById(R.id.PhoneNumber);
    vehicleYear = (Spinner) findViewById(R.id.sYear);
    vehicleMake = (Spinner) findViewById(R.id.sMake);
    // vehicleYear = (EditText) findViewById(R.id.tYear);
    // vehicleMake = (EditText) findViewById(R.id.tMake);
    vehicleModel = (EditText) findViewById(R.id.Model);
    serviceDate = (TextView) findViewById(R.id.dateDisplay);
    serviceTime = (Spinner) findViewById(R.id.sTime);
    serviceNeeded = (Spinner) findViewById(R.id.sNeeded);
    // serviceTime = (EditText) findViewById(R.id.tTime);
    // serviceNeeded = (EditText) findViewById(R.id.tNeeded);
    comments = (EditText) findViewById(R.id.eComments);
    sendEmail = (Button) findViewById(R.id.bSentEmail);
    PickDate = (Button) findViewById(R.id.pickDate);

}

public void handleClick(View v) {

    // TODO Auto-generated method stub
    conversion();
    String emailaddress[] = { "some@email.com" };
    String message = "Please Review the following:" + '\n' + " " + '\n'
            + "First Name: " + fname + '\n' + "Last Name: " + lname + '\n'
            + "Email :" + emailAdd + '\n' + "Phone Number: " + phoneNumber
            + '\n' + "Vechile Year: " + vehicleYears + '\n'
            + "Vehicle Make: " + vehicleManu + '\n' + "Vehicle Model: "
            + vehicleModeltrim + '\n' + "Requested Service Date: "
            + serviceAppointment + '\n' + "Requested Service Time: "
            + serviceAppointmentTime + '\n' + "Service Needed: "
            + serviceTypeNeeded + '\n' + "Comments: " + extraComments;

    Intent emailIntent = new Intent(android.content.Intent.ACTION_SEND);
    emailIntent.setType("vnd.android.cursor.dir/email");
    emailIntent.putExtra(android.content.Intent.EXTRA_EMAIL,
            new String[] { "some@email.com" });
    emailIntent.putExtra(android.content.Intent.EXTRA_EMAIL, emailaddress);
    emailIntent.putExtra(android.content.Intent.EXTRA_SUBJECT,
            "Mobile App: Schedule Service Request");
    emailIntent.putExtra(android.content.Intent.EXTRA_TEXT, message);
    startActivity(Intent.createChooser(emailIntent,
            "Please select Email Client"));

}

private void conversion() {
    // TODO Auto-generated method stub
    fname = personsFirstName.getText().toString();
    lname = personsLastName.getText().toString();
    emailAdd = personsEmail.getText().toString();
    phoneNumber = personsPhone.getText().toString();

    // vehicleYears = vehicleYear.getText().toString();// Text field
    // substitute for spinner adapter
    // vehicleManu = vehicleMake.getText().toString(); // Text field
    // substitute for spinner adapter
    vehicleYears = (String) vehicleYear.getSelectedItem().toString();
    vehicleManu = (String) vehicleMake.getSelectedItem().toString();
    vehicleModeltrim = vehicleModel.getText().toString();
    serviceAppointment = serviceDate.getText().toString();
    // serviceAppointmentTime = serviceTime.getText().toString();
    // serviceTypeNeeded = serviceNeeded.getText().toString();

    serviceAppointmentTime = (String) serviceTime.getSelectedItem()
            .toString();
    serviceTypeNeeded = (String) serviceNeeded.getSelectedItem().toString();
    extraComments = comments.getText().toString();
}

public void onClick(View v) {
    // TODO Auto-generated method stub

}

@Override
protected void onPause() {
    // TODO Auto-generated method stub
    super.onPause();
    finish();

}

@Override
protected void onDestroy() {
    super.onDestroy();
    {

    }

} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T21:02:05.283

你在打电话

```
mPickDate.setOnClickListener(this); 
```

前

```
mPickDate = (Button) findViewById(R.id.pickDate); 
```

这将导致 NullPointerException，从而导致崩溃。在初始化 Button 变量后设置监听器

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T21:06:36.700

您正在混合三种不同类型的`onClick`回调。

*   在 XML 中，您通过名称指定将在`Activity`类中调用的函数。如果我使用这种方法，我会将点击指向除`onClick()`.
*   在`Date`活动中，您正在实施`OnClickListener`然后将按钮点击发送到包含活动。这将调用`onClick()`类底部的方法。稍后，您将 指定为`OnClickListener`内联定义的函数。后者我不会这样做。
*   在`ScheduleService`活动中，您正在实施`OnClickListener`然后将按钮点击发送到包含活动。稍后，您实现`onClick()`. 这是典型的。

有关处理的更多信息`onClick()`，请参阅本文中的“更轻松的点击侦听器”：http: [//developer.android.com/resources/articles/ui-1.6.html](http://developer.android.com/resources/articles/ui-1.6.html)

# video-streaming - 如何流式传输 gnome 窗口的内容

> ID：10096148
> 
> 赞同：0
> 
> 时间：2012-04-10T20:41:51.250
> 
> 标签：video-streaming, gnome

我在 Gnome/Ubuntu 中打开了一个窗口，并希望将其内容流式传输到网站。SO上有人知道该怎么做吗？

只要能完成工作，我对几乎任何编程语言都持开放态度。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T05:53:37.137

有一个 GTK+ HTML 后端，它仍在开发中。后端称为*Broadway*。此后端在 web 浏览器中运行应用程序，但您可以检查代码以获得所需的内容。查看[百老汇的解释和演示](http://blogs.gnome.org/alexl/2011/03/15/gtk-html-backend-update/)。

# jquery-mobile - 一旦包裹在 Phonegap 中，iframe 在新窗口中打开

> ID：10096163
> 
> 赞同：0
> 
> 时间：2012-04-10T20:42:35.513
> 
> 标签：jquery-mobile, cordova

我有一个 jquery 移动应用程序，我将它包装在 Phonegap for Iphone/Android 商店中。我有一个使用 iframe 的页面，它没有 Phonegap，就像你期望的那样工作。然而，一旦封装，Iframe 实际上会导致应用打开一个新窗口/浏览器，然后离开应用。有谁知道是否有解决方案？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T20:23:20.377

[http://denrobapps.com/2010/12/phonegap-and-iframes/](http://denrobapps.com/2010/12/phonegap-and-iframes/)

首先，打开 PhoneGapDelegate.m 并找到这个代码块：

```
- (BOOL)webView:(UIWebView *)theWebView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType
{
NSURL *url = [request URL];

/*
 * Get Command and Options From URL
 * We are looking for URLS that match gap://<Class>.<command>/[<arguments>][?<dictionary>]
 * We have to strip off the leading slash for the options.
 */
 if ([[url scheme] isEqualToString:@"gap"]) {

    InvokedUrlCommand* iuc = [[InvokedUrlCommand newFromUrl:url] autorelease];

    // Tell the JS code that we've gotten this command, and we're ready for another
    [theWebView stringByEvaluatingJavaScriptFromString:@"PhoneGap.queue.ready = true;"];

    // Check to see if we are provided a class:method style command.
    [self execute:iuc];

     return NO;
}

/*
 * If a URL is being loaded that's a local file URL, just load it internally
 */
else if ([url isFileURL])
{
    //NSLog(@"File URL %@", [url description]);
    return YES;
}

/*
 * We don't have a PhoneGap or local file request, load it in the main Safari browser.
 */
else
{
    //NSLog(@"Unknown URL %@", [url description]);
    //[[UIApplication sharedApplication] openURL:url];
    return NO;
}

return YES;
} 
```

在该块的第一个 if 语句下面插入这个 else-if：

```
else if ([[url scheme] isEqualToString:@"http"])
{
    return YES;
} 
```

还要确保 [[UIApplication sharedApplication] openURL:url] 在最后一个 else 语句中未注释（否则单击 iFrame 中的链接将不起作用）：

```
else
{
    //NSLog(@"Unknown URL %@", [url description]);
    [[UIApplication sharedApplication] openURL:url];
    return NO;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T19:59:39.437

那是因为 phonegap 默认禁用外部内容，并引用内置浏览器。

您可以在文件 /res/xml/cordova.xml 中解决此问题

右键单击-> 使用文本编辑器打开，然后查找那里的行：

```
<access origin="http://127.0.0.1*"/> <!-- allow local pages -->
<!-- <access origin="https://example.com" /> allow any secure requests to example.com -->
<!-- <access origin="https://example.com" subdomains="true" /> such as above, but including subdomains, such as www -->
<!-- <access origin=".*"/> Allow all domains, suggested development use only --> 
```

我想那里的文档不言自明。我不知道允许多个访问源（我将所有代码托管在同一台服务器上）并将我的初始文件也指向那里。所以我不再使用 /assets/www 了。

# java - 是否保证单个线程执行 Servlet 及其过滤器？

> ID：10096164
> 
> 赞同：4
> 
> 时间：2012-04-10T20:42:37.753
> 
> 标签：java, jakarta-ee, tomcat, servlets, servlet-filters

我已经知道大多数实现都使用单线程，但是规范中有什么暗示单线程的吗？我记得读过有关使用 JVM 集群的分布式应用服务器的文章。有没有这样的实现？或者是否有任何可能的实现？规范对这种分布式实现意味着什么，这种实现能保证单线程吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-10T20:50:42.500

相关的 servlet 规范 3.0 片段：

> ### 6.2.3 过滤环境
> 
> 过滤器和过滤器链末端的目标 servlet 或资源**必须在同一个调用线程中执行**。

还有太多的框架依赖`ThreadLocal`于其中一个过滤器中的集合。如果不同的线程正在运行过滤器和其他调用 servlet（技术上可能），它们都会被破坏。

请注意，分发仅适用于单独的请求，即集群中的不同服务器处理不同的请求。我从未听说过将单个请求拆分为机器。

# c# - PRISM：使用 MVVM，如何解析或注入构造函数对象？

> ID：10096166
> 
> 赞同：2
> 
> 时间：2012-04-10T20:42:39.280
> 
> 标签：c#, mvvm, prism, unity-container, ioc-container

我正在使用 MVVM 和 PRISM。在项目中，我有一个名为 IFoo 的通用接口，其他模块应该实现这个接口并注册它。

```
// Common module
public interface IFoo { }

// Module1 module
public class Foo1 : IFoo { } 
```

然后当我初始化 module1 时，我注册我的类型并导航。

```
_container.RegisterType<IFoo, Foo1>(new ContainerControlledLifetimeManager());
_container.RegisterType<Object, View1>("View1");

var module = new Uri("View1", UriKind.Relative);
_regionManager.RequestNavigate("MainRegion", module); 
```

View1 构造函数包含 viewModel，这个视图模型在它的构造函数中有：

```
 public ViewModel1(IFoo foo, IEventAggregator eventAggregator, IRegionManager regionManager)
    {
        ...
    } 
```

到此为止，还好。但后来，我需要从外部模块中获取 Foo1 。因此，我将另一个注册表设置为 Foo1 的映射名称：

```
_container.RegisterType<IFoo, Foo1>(new ContainerControlledLifetimeManager());
_container.RegisterType<IFoo, Foo1>("foo1", new ContainerControlledLifetimeManager()); 
```

是的，它对我有用，但我不喜欢将两个实例分开的想法。我只需要一个，并访问同一个实例。

有没有办法解决这种情况？提前致谢。

无论如何，我附上了一个 Zip，其中包含一个代表我的问题的演示。 [http://www.mediafire.com/?feod8x0b952457e](http://www.mediafire.com/?feod8x0b952457e)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T20:49:40.990

加载模块时，您可以在引导程序中注册所有类型。

```
// register all modules
protected override void ConfigureModuleCatalog()
{
    // get all module types
    var types = new List<Type>();
    types.Add(typeof(ModuleA));
    types.Add(typeof(ModuleB));
    types.Add(typeof(ModuleC));

    // register all types
    foreach (var type in types)
    {
        ModuleCatalog.AddModule(new ModuleInfo()
        {
            ModuleName = type.Name,
            ModuleType = type.AssemblyQualifiedName
        });
    }
} 
```

然后在`ConfigureContainer`您映射您以后想要访问的所有类型和/或实例。配置的容器被传递到 Module1Module 的构造函数中。

```
// register all types in all modules
protected override void ConfigureContainer()
{
    base.ConfigureContainer();

    // ModuleA
    Container.RegisterType<IInterface1, Type1>();
    Container.RegisterType<IInterface2, Type2>();

    // ModuleB
    Container.RegisterInstance<IInterface3>("name", new Type3());
    Container.RegisterType<IInterface4, Type4>();

    // ModuleC
    Container.RegisterType<IInterface5, Type5>();
    Container.RegisterType<IInterface6, Type6>();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T16:50:40.223

我认为您不需要注册 Foo1 两次。每当您向 Unity 容器请求 IFoo 实例时，您都会使用`ContainerControlledLifetimeManager`Foo1 - 您不需要使用名称作为键。

因此，在`module1`您注册 Foo1 时：

```
_container.RegisterType<IFoo, Foo1>(new ContainerControlledLifetimeManager());
System.Diagnostics.Debug.Print(Foo1.GetHashCode()); 
```

在您的外部模块中：

```
IFoo someFoo = _container.Resolve<IFoo>();

// someFoo is the same object as Foo1, so the hashcodes will be equal.
System.Diagnostics.Debug.Print(someFoo.GetHashCode()); 
```

# java - 为什么我在使用 StringBuffer 后不能使用 toLowerCase()？

> ID：10096170
> 
> 赞同：2
> 
> 时间：2012-04-10T20:42:57.180
> 
> 标签：java, string

我读到在Java中，String是不可变的，所以我们不能直观地使用toLowerCase，即原始字符串未修改：

```
String s = "ABC";
s.toLowerCase();

> "ABC" 
```

但即使使用 StringBuffer（支持可变字符串）也不起作用

```
StringBuffer so = new StringBuffer("PoP");

so.toLowerCase()

> Static Error: No method in StringBuffer has name 'toLowerCase' 
```

我感谢任何提示或建议。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-10T20:45:07.847

好吧，它没有。你必须使用`.toString().toLowerCase()`：

```
String lowercase = sb.toString().toLowerCase(); 
```

如果您想非常严格地不创建不必要的实例，您可以迭代所有字符，并将它们小写：

```
for (int i = 0; i < sb.length(); i++) {
   char c = sb.charAt(i);
   sb.setCharAt(i, Character.toLowerCase(c));
} 
```

最后 - 更`StringBuilder`喜欢`StringBuffer`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-25T08:37:48.603

这个函数比使用“String lowercase = sb.toString().toLowerCase();”快大约 20% ：

```
public static StringBuilder StringBuilderLowerCase(StringBuilder pText) {
        StringBuilder pTextLower = new StringBuilder(pText);
        for (int idx = 0; idx < pText.length(); idx++) {
            char c = pText.charAt(idx);
            if (c >= 65 && c <= 65 + 27) {
                pTextLower.setCharAt(idx, (char) ((int) (pText.charAt(idx)) | 32));
            }
        }
        return pTextLower;
} 
```

# css - 需要隐藏卡片边缘但透明才能看到背景？

> ID：10096173
> 
> 赞同：1
> 
> 时间：2012-04-10T20:43:10.610
> 
> 标签：css, hide

![需要隐藏卡片边缘但透明才能看到背景？](../Images/d2de878efbfdaefccf3a9bc2522e7f28.png)

我有这个 css 问题，设计切断了这个边缘，应该显示背景。我目前正在绝对定位蓝色边缘上方的角落以隐藏它。

但是客户不时要更改背景，所以它看起来不正确。现在有什么方法可以让角落显示出来但仍然有透明度可以看到任何背景？

你可以在这里看到更大的视图：http: [//awesomescreenshot.com/0de37k32e](http://awesomescreenshot.com/0de37k32e)

编辑：我不能只在这个角落放一个背景图片，因为它是一个动态页面，它正在拉动这些“卡片”，这些“卡片”都是相同的设置尺寸。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T20:45:21.747

为什么不直接在实际设计区域使用透明 png 呢？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T20:46:14.457

“社交嗡嗡声”按钮区域应该是一个`div`带有包含角度的背景图像，在图像上只是一个透明区域。这里的所有都是它的。

# tridion - TDSE.GetObject 无法解析带有点的 WebDAV URL

> ID：10096178
> 
> 赞同：10
> 
> 时间：2012-04-10T20:43:32.280
> 
> 标签：tridion, tridion2009

有人使用以下功能遇到异常吗？

```
tdse.GetObject(tmpFolderWebDavURL, EnumOpenMode.OpenModeView, null,
                                          XMLReadFilter.XMLReadAll) as Folder; 
```

似乎 webdav 的最后一段是否包含一个点，那么该方法会抛出异常。

例如

`tmpFolderWebDavURL = "/webdav/test_publication/2.2 folder name"`-**失败**抛出异常

`tmpFolderWebDavURL = "/webdav/test_publication/22 folder name"`-**作品**

`tmpFolderWebDavURL = "/webdav/test_publication/2.2 folder name/sub_folder"`-**作品**

**例外**

```
<?xml version="1.0"?>
<tcm:Error xmlns:tcm="http://www.tridion.com/ContentManager/5.0" ErrorCode="80040200" Category="4" Source="Kernel" Severity="2">
    <tcm:Line ErrorCode="80040200" Cause="false" MessageID="15301">
        <![CDATA[Unable to get TOM object for URI: /webdav/TPMG Medical Library Content/Building Blocks/Content Live/2.2 People Lists]]>
        <tcm:Token>/webdav/TPMG Medical Library Content/Building Blocks/Content Live/2.2 People Lists</tcm:Token>
    </tcm:Line>
    <tcm:Line ErrorCode="80040200" Cause="true" MessageID="15748">
        <![CDATA[Unable to map all paths to URIs.]]>
    </tcm:Line>
    <tcm:Details>
        <tcm:CallStack>
            <tcm:Location>SystemDAL.GetURIsFromPaths</tcm:Location>
            <tcm:Location>SystemDAL.GetURIsFromPaths</tcm:Location>
            <tcm:Location>URLConversion.ConvertURLToURI</tcm:Location>
            <tcm:Location>SystemBLST.IBLSystemST_ConvertURLToURI</tcm:Location>
            <tcm:Location>TDSE.GetObject</tcm:Location>
        </tcm:CallStack>
    </tcm:Details>
</tcm:Error> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-10T21:08:25.140

就像空格一样，点必须在 webdav URL 中进行转义。

所以一个空格变成“%20”，一个点变成“%2E”。尝试做`tmpFolderWebDavURL.Replace(".", "%2E")`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-11T18:00:30.653

这是在进行此类开发时打开 powershell 的另一个原因。

假设你知道项目的 tcm uri，你可以很容易地得到正确的 WebDAVURL：

```
> $tdse = new-object -com TDS.TDSE
> $sch = $tdse.GetObject("tcm:3-92723-8",1)
> $sch.info.WebDAVURL
/webdav/00_Schemas_003/Building%20Blocks/Schemas/Component/ComponentStaffItem.xsd 
```

快速复制粘贴，您就完成了！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-17T07:39:36.870

而不是替换“。” 使用“%2E”最好使用 URL 编码。Tridion 将在从 webdav url 解析项目时解码 url。

在将其发送到 Tridion 之前使用 url 编码总是安全的。

# c# - Html Agility Pack - 如何选择正确的跨度类

> ID：10096181
> 
> 赞同：3
> 
> 时间：2012-04-10T20:43:34.087
> 
> 标签：c#, html-agility-pack

我试图在亚马逊页面上找到最低价格。让我们以这个 url 为例：

```
http://www.amazon.com/s/ref=nb_sb_noss?url=search-alias%3Daps&field-keywords=9963BB#/ref=nb_sb_noss?url=search-alias%3Daps&field-keywords=E999-4701&rh=i%3Aaps%2Ck%3AE999-4701 
```

我想找到最低的价格……“new from”右边的数字。

这是我尝试过的：

```
 using (TextWriter tw = new StreamWriter(@"D:\AmazonUrls.txt"))
        {
            foreach (string item in list)
            {
                var webGet = new HtmlWeb();
                var document = webGet.Load(item);
                var lowestPrice = document.DocumentNode.SelectSingleNode("//span[@id='subPrice']");
                if (lowestPrice != null)
                {
                    Console.WriteLine(lowestPrice);                
                }

            }           
        } 
```

我没有得到任何结果。我哪里错了？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-10T20:49:18.377

您正在请求具有`id`subPrice 的节点，但实际上`class`它具有 subPrice：

```
<span class="subPrice">
        <a href="http://www.amazon.com/gp/offer-listing/B001BA0W06/ref=sr_1_6_olp?ie=UTF8&qid=1334090832&sr=8-6&condition=new">5 new</a>
    from <span class="price">$245.90</span></span> 
```

所以，

```
var lowestPrice = document.DocumentNode.SelectSingleNode("//span[@class='subPrice']"); 
```

应该得到你想要的。但是，您提供的示例页面有几个与该模式匹配的节点，因此您希望选择多个节点，然后遍历它们以确定哪个具有最低的权限。

# ruby - 您如何确定 XFS 文件系统是否以编程方式冻结？

> ID：10096183
> 
> 赞同：4
> 
> 时间：2012-04-10T20:43:46.800
> 
> 标签：ruby, linux, bash, filesystems, xfs

我正在编写一个简单的 EC2 快照脚本，需要确定是否有办法知道文件系统是否被冻结。就目前而言，尝试对冻结的文件系统执行任何操作都会挂起脚本（并且也会挂在 bash shell 中）。

是否有命令或方法可以知道文件系统是否处于冻结状态？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T21:25:05.257

尝试重新挂载文件系统：

```
mount -o remount /moint/point 
```

如果使用非默认选项挂载文件系统，请确保在重新挂载中指定相同的选项。这确保了如果成功，重新挂载实际上将是空操作。例如，如果文件系统是使用该`noatime`选项挂载的，那么请改用以下命令：

```
mount -o remount,noatime /moint/point 
```

如果文件系统未冻结，则重新挂载将成功。如果文件系统被冻结，它将因 EBUSY 而失败。

这不是万无一失的，因为从技术上讲，重新挂载可能由于其他原因（除了文件系统被冻结）而因 EBUSY 失败，但在大多数情况下可能会成功。

# objective-c - 这是什么类型的 XML 文件？

> ID：10096184
> 
> 赞同：1
> 
> 时间：2012-04-10T20:43:49.903
> 
> 标签：objective-c, ios, xml, cocoa, nsxmldocument

我有一个包含所有州积分的文件。我想解析它，这样我就可以为每个状态创建一个覆盖。我认为它的 xml 但不是具有 element_data 格式的传统格式。

有人提到它是一个 plist xml。

解析此类数据的最佳方法是什么：

```
<states>
<state name ="Alaska" colour="#ff0000" >
  <point lat="70.0187" lng="-141.0205"/>
  <point lat="70.1292" lng="-141.7291"/>
  <point lat="70.4515" lng="-144.8163"/>
  <point lat="70.7471" lng="-148.4583"/>
  <point lat="70.7923" lng="-151.1609"/>
  <point lat="71.1470" lng="-152.6221"/>
  <point lat="71.1185" lng="-153.9954"/>
  <point lat="71.4307" lng="-154.8853"/>
  <point lat="71.5232" lng="-156.7529"/>
  <point lat="71.2796" lng="-157.9449"/>
  <point lat="71.2249" lng="-159.6313"/>
  <point lat="70.6363" lng="-161.8671"/>
  <point lat="70.0843" lng="-163.5809"/>
  <point lat="69.3028" lng="-165.2399"/>
  <point lat="69.1782" lng="-166.8768"/>
  <point lat="68.3344" lng="-168.0414"/> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T20:52:04.600

**代码 ：**

```
NSString* filePath = [[NSBundle mainBundle] pathForResource:@"data" 
                                                     ofType:@"xml"];

NSString* xmlStr = [NSString stringWithContentsOfFile:filePath
                                             encoding:NSUTF8StringEncoding 
                                                error:nil];

NSXMLDocument* xml = [[NSXMLDocument alloc] initWithXMLString:xmlStr
                                                      options:NSXMLDocumentTidyXML 
                                                       error:nil];

NSMutableDictionary* states = [xml getChildrenInDictionary:@"states"]; 
```

该`getChildrenInDictionary`方法是在我为其编写的类别中声明的`NSXMLDocument`。

**NSXMLDocument 类别：**

```
- (NSDictionary*)getChildrenInDictionary:(NSString *)path
{
    NSMutableDictionary* result = [NSMutableDictionary dictionary];

    NSArray* nodes = [[[self nodesForXPath:path error:nil] objectAtIndex:0] children];

    for (NSXMLElement* element in nodes)
    {
        [result setValue:[element stringValue] 
                  forKey:[element name]];
    }

    return result;
} 
```

* * *

***旁注：**对我来说，这是一个完全有效的 XML 文件，因此应该对其进行处理。:-)*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T20:54:44.430

这看起来像是一种本土化的 XML。将数据生成为实际上不是基于标准的语法的 XML 的情况并不少见。

这样做的原因是因为 XML 很容易解析——这既是因为语法规则，也是因为 XML 生态系统已经成熟并且有很多用于解析的工具等等。

仅仅因为它不是官方语法的一部分，您的数据就不是无用的！您可以使用 XSLT 将其转换为另一种官方的 XML**语法**。对于初学者，我认为 SVG 是你最好的选择——你有很多非常具体的点数据，这些数据可能在 SVG 路径中很有用。

# ruby - Ruby 中的平方根比 BigDecimal.sqrt 更精确？

> ID：10096188
> 
> 赞同：1
> 
> 时间：2012-04-10T20:44:08.083
> 
> 标签：ruby, bigdecimal, arbitrary-precision

我认为 Ruby 的 BigDecimal 类的目的是它以速度为代价实现~~无限任意精确。~~错误的：

```
> BigDecimal(4).sqrt(4)
=> #<BigDecimal:906602c,'0.1999999999 9999999998 66602351E1',36(36)>
> BigDecimal(4).sqrt(11)
=> #<BigDecimal:9e36850,'0.2E1',9(45)> 
```

首先，`sqrt`应该在没有参数的情况下工作，至少在文档中是这样。其次，如果该参数是精度，则 4 应该足以进行此操作（或者至少我不应该知道 11 位精度是可以的）。

我最不想做的就是重新发明轮子，并创建一些我自己的“任意精确平方库”。

问题：

*   是否可以将参数设置为 BigDecimal 实例，这样就不会发生上述情况？（意思是：它以低精度返回正确的结果）
*   是否有关于 BigDecimal 对象的详细信息（值后面的数字是什么）？

系统：Debian，32 位，ruby 1.9.3p125

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T21:00:46.213

[检查](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/bigdecimal/rdoc/BigDecimal.html#method-i-inspect)的大十进制文档描述了该输出的含义。

关于该文档`sqrt`似乎是文档错误-请参阅[http://bugs.ruby-lang.org/issues/5267](http://bugs.ruby-lang.org/issues/5267)

至于你得到的输出，我不确定——在这两种情况下我都得到 0.2E1。

# c# - DrawToBitmap 没有截取所有项目的屏幕截图

> ID：10096195
> 
> 赞同：11
> 
> 时间：2012-04-10T20:44:34.523
> 
> 标签：c#, winforms, image, drawtobitmap

我目前有这个有用的代码，我在 StackOverflow 的其他地方找到了：

```
form.DrawToBitmap(bmp, new Rectangle(0, 0, bmp.Width, bmp.Height)); 
```

我有一个带有几个文本框/下拉菜单和一个大图片框的表单。然后我将较小的图片框放在这个大图片框的顶部。

当我查看截取的屏幕截图时，它显示了表单，但是由于某种原因，放置在大图片框上方的较小图片框没有显示？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-04-10T20:59:33.550

我在 Control.DrawToBitmap() 的文档中看到了这个限制：

> 容器内的控件以相反的顺序呈现。

这意味着如果两个控件相互重叠，则通常呈现在另一个“下方”的一个（它首先绘制，然后被重叠控件覆盖）将改为最后呈现（因此它将与通常重叠的那个重叠）。在您的情况下，如果较小的控件完全绘制在较大控件的边界内并在其顶部，则该控件将被此反向渲染隐藏。

尝试通过在被较小的重叠的较大的 PictureBox 上使用 BringToFront() 和 SendToBack() 来解决此问题。在绘制位图之前调用 BringToFront()，完成后调用 SendToBack()。如果您不希望用户看到屏幕闪烁，请尝试在进行任何 Z 顺序更改之前调用 SuspendLayout()，然后在重置为正确的 Z 顺序后调用 ResumeLayout(true)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-11-28T12:31:05.500

感谢 KeithS 帮助我！

对于那些需要代码来执行这些反向和反向操作的人，这里是：

```
 private void ReverseControlZIndex(Control parentControl)
    {
        var list = new List<Control>();
        foreach (Control i in parentControl.Controls)
        {
            list.Add(i);
        }
        var total = list.Count;
        for (int i = 0; i < total / 2; i++)
        {
            var left = parentControl.Controls.GetChildIndex( list[i]);
            var right = parentControl.Controls.GetChildIndex(list[total - 1 - i]);

            parentControl.Controls.SetChildIndex(list[i], right);
            parentControl.Controls.SetChildIndex(list[total - 1 - i], left);
        }                        
    }

    private void SaveImage()
    {
        SaveFileDialog sf = new SaveFileDialog();
        sf.Filter = "Bitmap Image (.bmp)|*.bmp|Gif Image (.gif)|*.gif|JPEG Image (.jpeg)|*.jpeg|Png Image (.png)|*.png|Tiff Image (.tiff)|*.tiff|Wmf Image (.wmf)|*.wmf";
        if (sf.ShowDialog() == DialogResult.OK)
        {
            int width = pnlCanvas.Size.Width;
            int height = pnlCanvas.Size.Height;

            Bitmap bm = new Bitmap(width, height);

            SuspendLayout();
            // reverse control z-index
            ReverseControlZIndex(pnlCanvas);

            pnlCanvas.DrawToBitmap(bm, new Rectangle(0, 0, width, height));

            // reverse control z-index back
            ReverseControlZIndex(pnlCanvas);
            ResumeLayout(true);

            bm.Save(sf.FileName, ImageFormat.Bmp);
        }

    } 
```

# c++ - 不能在文件的特定位置覆盖。覆盖特定位置会删除它之前的所有内容并移动它之后的值

> ID：10096196
> 
> 赞同：1
> 
> 时间：2012-04-10T20:44:52.030
> 
> 标签：c++, fstream, random-access

在我的项目中，需要读取和写入二进制文件，基本上是在文件中序列化链表，我以二进制格式存储值并记住tellp（）/tellg（）偏移量，但是，我做不到那。这会将其中的所有内容擦除为零，而不是插入它，而是将当前内容推回。

例如，在下面的程序中，我打开一个文件，写入值 1,120,323。然后关闭它并阅读它，它显示了准确的正确值 1,120,323。但是当我尝试替换 120->220 的值时，1 变为 0，读取为 0 220 220。基本上 220 重写并将 323 推回。

```
#include <iostream>
#include <fstream>
#include <cstdlib>

int main() {
  std::cout<<"File Ofstream Testing "<<std::endl;   

  const char * file_name = "Test_File.bin";
  int ONE = 1;
  int ZERO = 0;

  int ONE_TWENTY = 120;
  int TWO_TWENTY = 220;

  int THREE_TWENTY_THREE = 323;
  int THREE_FORTY_FIVE = 345;

//---------------------------------------------------------------------------
{
 std::ofstream file_write(file_name, std::ios::out|std::ios::binary);

 if(!(file_write.is_open())) {
    std::cout<<"File cannot be opened "<<std::endl;
    exit(0);
 }

 file_write.seekp(0);
 file_write.write((char *)&ONE,sizeof(int));
 file_write.write((char *)&ONE_TWENTY,sizeof(int));
 file_write.write((char *)&THREE_TWENTY_THREE,sizeof(int));

 file_write.close();
}
//---------------------------------------------------------------------------
{
 std::ifstream file_read(file_name,std::ios::in|std::ios::binary);

 if(!(file_read.is_open())) {
        std::cout<<"File cannot be opened "<<std::endl;
        exit(0);
 }

 int temp;
 file_read.seekg(0);
 file_read.read((char *)&temp,sizeof(int));
 std::cout<<"Temp "<<temp<<std::endl;
 file_read.read((char *)&temp,sizeof(int));
 std::cout<<"Temp "<<temp<<std::endl;
 file_read.read((char *)&temp,sizeof(int));
 std::cout<<"Temp "<<temp<<std::endl;

 file_read.close();
}
  //---------------------------------------------------------------------------
{
  std::ofstream file_write(file_name, std::ios::out|std::ios::binary);

  if(!(file_write.is_open())) {
   std::cout<<"File cannot be opened "<<std::endl;
   exit(0);
 }

 file_write.seekp(sizeof(int));
 file_write.write((char *)&TWO_TWENTY,sizeof(int));
 file_write.seekp(sizeof(int) + sizeof(int));
 file_write.write((char *)&THREE_FORTY_FIVE,sizeof(int));

 file_write.close();
}
//--------------------------------------------------------------------------
{
  std::ifstream file_read(file_name,std::ios::in|std::ios::binary);

  if(!(file_read.is_open())) {
    std::cout<<"File cannot be opened "<<std::endl;
    exit(0);
}

  int temp;
  file_read.seekg(0);
  file_read.read((char *)&temp,sizeof(int));
  std::cout<<"Temp "<<temp<<std::endl;
  file_read.seekg(sizeof(int));
  file_read.read((char *)&temp,sizeof(int));
  std::cout<<"Temp "<<temp<<std::endl;
  file_read.seekg(sizeof(int) + sizeof(int));
  file_read.read((char *)&temp,sizeof(int));
  std::cout<<"Temp "<<temp<<std::endl;

   file_read.close();
 }
 //--------------------------------------------------------------------------------
 return 0;
}//fn:main 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T22:04:07.883

对于输出流，打开 with`std::ios::out`等价于`std::ios::out | std::ios::trunc`，因此当您`std::ofstream file_write`第二次声明时，之前写入的内容将被丢弃，您正在重新写入文件。然后，当您`file_write.seekp(sizeof(int));`在空流上执行操作时，将写入零字节。如果您需要附加到 an`ofstream`那么您将使用`std::ios:app`. 这不会截断文件，但另一方面它只会让你附加到它。

如果要对文件流进行随机访问写入，则需要将其声明为`fstream`并以读写模式打开它。所以你需要的是：

`std::fstream file_write(file_name, std::ios::in | std::ios::out | std::ios::binary);`

# python - 如何使用 pyramid_beaker 中的键获取 memcached 的值？

> ID：10096205
> 
> 赞同：1
> 
> 时间：2012-04-10T20:45:37.920
> 
> 标签：python, memcached, beaker

```
@cache_region('day', 'my_search_func')$
def _query(tags, num, searchid=None):
    ... 
```

我在烧杯中使用了装饰API，然后，可以通过代码获取beaker.cache.Cache对象：

```
CacheManager(cache_regions=cache.cache_regions).get_cache_region('my_search_func', 'day') 
```

我的问题是如何使用 Cache 类的 get_value 来检索特定的键/值，我真的不知道如何确定 get_value 函数的键参数？

谢谢肯尼

# c# - 从 nhibernate 中的实体对象加载集合

> ID：10096206
> 
> 赞同：0
> 
> 时间：2012-04-10T20:45:42.120
> 
> 标签：c#, nhibernate

我有一个名为的类`Property`，它包含`Room`对象的集合

```
public class Property : EntityBase<Property>
    {
        public IList<Room> _rooms; 
```

房间映射

```
public RoomMap()
        {
            Not.LazyLoad();
            Id(x => x.ID).Not.Nullable().UnsavedValue(int.MinValue).GeneratedBy.HiLo("100");
            Component(x => x.RoomDetails);
            Map(x => x.RoomType).CustomType<RoomType>();
            Component(x => x.Area);
            //HasMany(x => x.RentPriceDetails);
        } 
```

物业图

```
public PropertyMap()
        {
            Not.LazyLoad();
            Id(x=>x.ID).UnsavedValue(int.MinValue).Not.Nullable().GeneratedBy.HiLo("100");
            Component(x => x.Address);
            References(x => x.OwnerOfProperty);
            HasMany(x => x._rooms).Inverse().Cascade.All();
        } 
```

我要做的是从选定的属性对象加载房间对象的集合。我使用这种语法

```
var property = session.Query<Property>().FetchMany(x => x._rooms).First(x => x.ID == propertyId); 
```

但只有属性对象是从数据库加载的。房间已添加到数据库中，但如何获取它们？如果我尝试访问 property._rooms 集合是空的。

谢谢

**解决了**

问题在于 Inverse 语句。我不使用双向关联，所以我删除了它并且它可以工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T21:18:16.070

问题在于 Inverse 语句。我不使用双向关联，所以我删除了它并且它可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T21:15:16.630

您可以尝试使用 QueryOver 而不是 Ling Provider：

```
session.QueryOver<Property>()
    .Where(property => property.Id == propertyId)
    .Fetch(property => property.Rooms).Eager
    .TransformUsing(Transformers.DistinctRootEntity)
    .SingleOrDefault<Property>(); 
```

# sql - SQL从整数转换为十进制

> ID：10096209
> 
> 赞同：9
> 
> 时间：2012-04-10T20:45:52.700
> 
> 标签：sql, sql-server-2005, casting

我在一个表中有两列填充了整数值。对于每条记录，我想将这两列的值相除并格式化输出，以便将小数点移到右侧。

例如，如果我将一条记录的两列的值为 4 和 1，并且我想将 1 除以 4（所以 1/4），那么我希望输出为 25.00。

这是我之前尝试的最后一件事：

```
CAST(Total AS Decimal(2))/CAST(TotalAnswers AS Decimal(2)) AS 'Percent' 
```

我一直无法找到 CAST 函数的语法解释，以查看传入的十进制参数代表什么。当我改变它时，它有时会改变小数点右边的位数，但结果并不总是我所期望的，所以我想在这方面得到一些帮助。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-04-10T20:55:28.857

Write it like this:

```
SELECT CAST(CAST(Total As float) / TotalAnswers * 100 As decimal(8, 2)) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-10T20:49:38.193

`DECIMAL(2)`是小数点前 2 位，小数点后没有数字的小数。那不允许你在小数点*后有数字！*

规范定义了总`DECIMAL(p,s)`位数（`p`）和小数点后的位数（`s`）（其中`s`不能大于`p`，如果省略则为 0）。

您需要使用类似`DECIMAL(4,2)`（*总共 4 位 - 其中小数点后有 2 个；因此：小数点前还有 2 个*）或类似的东西 - 小数点前的一些数字和小数点后的一些数字 - 然后你会看到你的想要的结果！

有关类型及其语法的详细信息，请参阅有关[十进制和数字](http://msdn.microsoft.com/de-de/library/ms187746.aspx)`DECIMAL`的 MSDN 联机丛书主题

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-10T20:50:30.390

实际有几个参数..

```
(p, s) 
```

在哪里

*   p 代表“精度”——小数点**前后的总位数。**
*   s 代表“刻度”——小数点**后的位数。**

通过只给出 1 个参数，您只给出了精度。

请参阅[MDSN](http://msdn.microsoft.com/en-us/library/ms187746%28v=sql.100%29.aspx)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-10T20:53:44.773

来自在线书籍的十进制数据类型：具有固定精度和小数位数的数值数据类型。

decimal[ (p[ , s] )] 和 numeric[ (p[ , s] )] 固定精度和小数位数。使用最大精度时，有效值从 - 10^38 +1 到 10^38 - 1。十进制的 SQL-92 同义词是 dec 和 dec(p, s)。numeric 在功能上等同于十进制。

p（精度）可以存储的小数位数的最大总数，包括小数点的左侧和右侧。精度必须是 1 到最大精度 38 之间的值。默认精度为 18。

s（刻度）小数点右侧可以存储的最大小数位数。比例必须是从 0 到 p 的值。仅当指定精度时才能指定比例。默认比例为 0；因此，0 <= s <= p。最大存储大小因精度而异。

# java - 在什么情况下会抛出 IllegalStateException？

> ID：10096214
> 
> 赞同：1
> 
> 时间：2012-04-10T20:46:27.550
> 
> 标签：java, exception, iterator, illegalstateexception

使用迭代时，会`IllegalStateException`抛出什么条件？我正在做一个任务，它是多项选择：

a) 调用`remove`后调用`next`
b) 调用`next`后调用`previous`
c) 调用`remove`后调用`remove`
d) 调用`remove`后调用`previous`

我在“API docs”中发现的是，如果该`next`方法尚未被调用，或者该`remove`方法在最后一次调用该方法后已经被调用`next`。

所以答案必须是“a”，但我被告知这是错误的。为什么我的推理是错误的，正确的答案是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T21:00:12.853

You have a list `[a, b, c, d, e]`. A pointer `N` starts out pointing at nothing. This is the standard starting position for an iterator in Java.

Scenario A) - call `next`, `N` is now pointing at `a`. Call `remove`, `a` is gone and the list is `[b, c, d, e]`, `N` is pointing at nothing.

Scenario B) Call `previous`, `N` is now pointing at `e`. Call `next`, `N` is now pointing at `a`.

Scenario C) Call `next`, `N` is pointing at `a`. Call `remove`, `a` is gone, `N` is pointing at nothing. Call `remove,`IllegalStateException`is thrown.`N` is pointing at nothing, so nothing can be removed.

Scenario D) Call `previous`, `N` is pointing at `e`. Call `remove`, `e` is gone, `N` is pointing at nothing.

Scenario E) Call `remove`, `N` is pointing at nothing, so `IllegalStateException` is thrown.

# android - Eclipse中的Android，合并/包含嵌套的XML非布局资源

> ID：10096219
> 
> 赞同：1
> 
> 时间：2012-04-10T20:46:48.013
> 
> 标签：android, xml, eclipse, include

我在 res/xml/ 文件夹中有一个 XML 索引，我希望它包含其他 xml 文件，这样当我解析 R.xml.index 时，所有文件都合并到一个资源中。

我试图使[包含布局技巧](http://developer.android.com/resources/articles/layout-tricks-reuse.html)适应xml 解析，所以我`index.xml`看起来像这样：

```
<?xml version="1.0" encoding="utf-8"?>
<Index xmlns:android="http://schemas.android.com/apk/res/android">
<Sheet>
    <include xml="o_2sq_m.xml"/>
    <include xml="o_2sq_r.xml"/>
</Sheet>
<Sheet>
    <include xml="o_sq_tr_m.xml"/>
    <include xml="o_sq_tr_r.xml"/>
</Sheet>
</Index> 
```

与`o_2sq_m.xml`index.xml 位于同一文件夹中的文件如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>
<Challenge xmlns:android="http://schemas.android.com/apk/res/android">
<Dimensions maxX="512" maxY="342" />
<Point id="1" x="94" y="101" color="0x00000000" />
...
</Challenge> 
```

但是当我用和[XmlPullParser](http://developer.android.com/reference/org/xmlpull/v1/XmlPullParser.html)解析 index.xml 时，我在调试器中看到它解析包含标签而不展开它们，即它不访问文件 o_2sq_m.xml 的树

我应该怎么做才能让 android 将文件包含在另一个文件中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T10:08:48.570

如果您没有进行过多的 XML 导入（例如在创建时），您可以使用[`getResources().getIdentifier()`](http://steven.bitsetters.com/2007/11/27/accessing-android-resources-by-name-at-runtime/), which 作为这样的索引（删除`.xml`属性中的）

```
<Index xmlns:android="http://schemas.android.com/apk/res/android">
<Sheet>
    <include customAttr="o_2sq_m"/> ...
</Sheet> 
```

并假设您要包含的文件名为`o_2sq_m.xml`，您可以使用以下代码：

```
switch(tag) {
case "include" :
   String xmlid = xpp.getAttributeValue(null, "customAttr");
   Int xmlIncludedId = res.getIdentifier(xmlid, "xml", getPackageName());
   if(xmlIncludedId != 0) {
     // Here the xmlIncludedId can be used to import other XML files.
     // E.g. getResources().getXml(xmlIncludedId) returns an XmlResourceParser
   } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T20:55:59.013

The tag is used for layouts not for any xml file. If you use it for layout, the layout inflater will replace it with the corresponding file when needed. In a normal xml it will be considered a tag like any other. I do not think it's possible to do what you want.

# php - 在另一个 php 脚本完成之前，Ajax 不会返回

> ID：10096221
> 
> 赞同：1
> 
> 时间：2012-04-10T20:46:49.737
> 
> 标签：php, ajax, session

所以我有一个用户填写的表单，提交时会打开一个新选项卡以加载结果 - 脚本遍历多个 XML 文件 - 这可能是一个耗时的过程，因为该脚本中发生了很多事情（2-10 分钟）。我想要一些 AJAX 来跟踪结果页面的进度，所以我所做的是让结果页面更新用户的会话（您可能只想跳到我的问题底部）示例：

```
$_SESSION['fileCount'] = $fileCount;
for($i=0;$i<fileCount;$i++){//iterate through xmls
    $_SESSION['curFile'] = $xml[...];
    $_SESSION['curCount'] = $i;
    //Do stuff
} 
```

父页面上的表单标签如下所示：

```
<form action="results/" method="post" onsubmit="openProgressDialog()" target="_blank"> 
```

上面的函数看起来像：

```
 function openProgressDialog(user){
        $('#loadSplash').dialog('open');
        var loading = true;
        var sleep = 50;
        var precent = 0;
        var fileCount = 0;
        var i = 0;
        var curFile = '';
        while(loading){
            $.getJSON('php/getProgress.php?u='+user, function(data) {
                var items = [];
                $.each(data, function(key, val) {
                    if(key == 'fileCount')
                        fileCount = val;
                    else if(key == 'curCount')
                        i = val;
                    else if(key == 'curFile')
                        curFile = val;
                });
                if(fileCount > 0){
                    //Do stuff
                    $('#pregressbar').progressbar('value',(i/fileCount)*100);
                    if(i == fileCount){
                        sleep = 0;
                        loading = false;
                    }
                }
            }).delay(sleep);
        }
    } 
```

最后 getProgress.php 看起来像：

```
<?php
session_start();
$progress =array('fileCount' =>intval($_SESSION['fileCount']),'curCount' =>intval($_SESSION['curCount']),'curFile'=>$_SESSION['curFile']);
echo json_encode($progress);
?> 
```

所以我知道我只是使用了伪代码和真实代码的奇怪组合，而且我也知道 JS 函数不完整——我一直在监视 firebug 中的 NET 面板以验证功能。

所以我的问题是 getProgress.php 在 results/index.php 页面完成之前不会返回 - 这完全违背了所有这一切的目的。是否有关于多个 php 脚本同时执行或使用相同资源的问题，这是我在这里坚持的？

我在 LAMP/Ubuntu 上运行新版本的 apache/php。

作为旁注/问题，我对这个主题特别感兴趣，因为我正在计划一个使用 AJAX/php/mySQL/long polling 的多人游戏，我很好奇是否有什么我应该注意的冒险进入那个项目.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T20:50:27.347

我曾经问过一个类似的问题，[Sh​​ow progress for long running PHP script](https://stackoverflow.com/questions/7049303/show-progress-for-php-long-script)。

关键是，会话不能共存。您不能同时在 2 个脚本上打开同一个会话，否则会触发错误。

您应该做的是将状态写入数据库表，然后在 AJAX 调用中读取该状态。另一种选择是使用 APC 缓存。

# git - Git - Gitolite - 克隆

> ID：10096222
> 
> 赞同：1
> 
> 时间：2012-04-10T20:46:55.167
> 
> 标签：git, gitolite

我最近在我的服务器上设置了 Gitolite。一切正常。

所以我在服务器上推送了一个新的 repo，并将它克隆到另一台机器上进行测试。没有错误。

然后我尝试在我的服务器上克隆它（安装 Gitolite 的同一台服务器但不同的帐户），我收到此错误：

```
Internal Server Error

The server encountered an internal error or misconfiguration and was unable to complete your request.

Please contact the server administrator, *****@*****.com and inform them of the time the error occurred, and anything you might have done that may have caused the error.

More information about this error may be available in the server error log.

Additionally, a 404 Not Found error was encountered while trying to use an ErrorDocument to handle the request. 
```

我已经用另一个存储库进行了测试，同样的事情，它可以在本地工作，但不能在服务器上工作。

知道什么可能导致这种情况或如何找出吗？我对这一切都很陌生。

注意：使用 git 命令时，我从来没有遇到任何错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T20:51:10.687

> 服务器错误日志中可能提供有关此错误的更多信息。

您可能想查看一下 apache 日志，看看是否可以找到实际的错误消息。

# ubuntu - optirun 否 - 错误：[XORG] (EE) 无法加载模块“void”

> ID：10096224
> 
> 赞同：-1
> 
> 时间：2012-04-10T20:46:59.890
> 
> 标签：ubuntu, nvidia, xorg

当我尝试运行（例如）时，我得到了这个奇怪的错误`optirun -vv glxspheres`。几天前我让它工作了，但现在它只是无法启动。

```
 [DEBUG]Reading file: /etc/bumblebee/bumblebee.conf
    [DEBUG]Process /sbin/modinfo started, PID 8452.
    [DEBUG]Hiding stderr for execution of /sbin/modinfo
    [DEBUG]SIGCHILD received, but wait failed with No child processes
    [DEBUG]Detected nvidia driver (module nvidia-current)
    [DEBUG]Active configuration:
    [DEBUG] bumblebeed config file: /etc/bumblebee/bumblebee.conf
    [DEBUG] X display: :8
    [DEBUG] LD_LIBRARY_PATH: /usr/lib/nvidia-current:/usr/lib32/nvidia-current
    [DEBUG] Socket path: /var/run/bumblebee.socket
    [DEBUG] VGL Compression: proxy
    [DEBUG]optirun version 3.0 starting...
    [INFO]Response: No - error: [XORG] (EE) Failed to load module "void" (module does not exist, 0)

    [ERROR]Cannot access secondary GPU - error: [XORG] (EE) Failed to load module "void" (module does not exist, 0)

    [DEBUG]Socket closed.
    [ERROR]Aborting because fallback start is disabled.
    [DEBUG]Killing all remaining processes. 
```

**一些背景信息：** 我在华硕 UL30VT 上运行 wubi (11.10) 安装。自从上次 optirun 工作以来，我真正做的唯一一件事就是使用 Windows。以前我更改`/etc/bumblebee/xorg.conf.nvidia`为允许我使用 HDMI 端口。但这似乎不是问题。我到处寻找有类似错误的人，但没有运气。

的输出`lspci | grep -i vga`是

```
00:02.0 VGA compatible controller: Intel Corporation Mobile 4 Series Chipset Integrated Graphics Controller (rev 07)
01:00.0 VGA compatible controller: nVidia Corporation GT218 [GeForce G210M] (rev a2) 
```

从`sudo cat /proc/acpi/bbswitch`是

```
0000:01:00.0 ON 
```

这是我的`xorg.conf.nvidia`：

```
 Section "DRI"
            Mode 0666
    EndSection

    Section "ServerLayout"
        Identifier  "Layout0"
        Option  "AutoAddDevices" "false"
        Screen  "Screen0"
        InputDevice "void-mouse"
        Option      "Xinerama" "0"
    EndSection

    Section "Module"
            Load  "dbe"
            Load  "extmod"
            Load  "glx"
            Load  "record"
            Load  "freetype"
            Load  "type1"
    EndSection

    Section "Files"
        ModulePath "/usr/lib/nvidia-current/xorg,/usr/lib/xorg/modules"
    EndSection

    Section "Device"
        Identifier  "Device1"
        Driver  "nvidia"
        VendorName  "NVIDIA Corporation"
        BoardName   "GeForce G 210M"
        BusID   "01:00:0"
        Option  "NoLogo" "true"
        Option  "UseEDID" "true"
        Option      "IgnoreEDID"
        Option  "ConnectedMonitor" "DP1"
    EndSection

    Section "Screen"
        Identifier   "Screen0"
        Device       "Device1"
        DefaultDepth 24
        Monitor      "DP1"
        Option       "TwinView" "0"
        Option       "metamodes" "1920x1080 +0+0; 1680x1050 +0+0; 1440x900 +0+0; 1280x1024 +0+0; 1366x768 +0+0; 1360x768 +0+0; 1280x800 +0+0; 1024x768 +0+0; 800x600 +0+0; 640x480 +0+0"
        Option       "FlatPanelProperties" "Scaling = Native"
        SubSection "Display"
            Depth 24
            Modes "1920x1200" "1920x1080" "1680x1050" "1600x1200" "1440x900" "1280x1024" "1366x768" "1360x768" "1280x800" "1024x768" "800x600" "640x480"
        EndSubSection
    EndSection

    Section "Extensions"
            Option "Composite" "Enable"
    EndSection

    Section "Monitor"
        Identifier  "DP1"
        VendorName  "Unknown"
        ModelName   "Unknown"
        HorizSync   31.0 - 82.0
        VertRefresh 48.0 - 85.0
        Option      "DPMS"
        Modeline    "1920x1200"  193.25  1920 2056 2256 2592  1200 1203 1209 1245 -hsync +vsync
        Modeline    "1920x1080"  173.00  1920 2048 2248 2576  1080 1083 1088 1120 -hsync +vsync
        Modeline    "1680x1050"  146.25  1680 1784 1960 2240  1050 1053 1059 1089 -hsync +vsync
        Modeline    "1600x1200"  161.00  1600 1712 1880 2160  1200 1203 1207 1245 -hsync +vsync
        Modeline    "1440x900"  106.50  1440 1528 1672 1904  900 903 909 934 -hsync +vsync
        Modeline    "1366x768"   85.25  1366 1440 1576 1784  768 771 781 798 -hsync +vsync
        Modeline    "1280x800"   83.50  1280 1352 1480 1680  800 803 809 831 -hsync +vsync
        Modeline    "1280x1024"  109.00  1280 1368 1496 1712  1024 1027 1034 1063 -hsync +vsync
        ModeLine    "1024x768" 94.500 1024 1072 1168 1376 768 769 772 808 +hsync +vsync
    EndSection

    Section "InputDevice"
      Identifier "void-mouse"
      Driver     "void"
    EndSection 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T16:08:45.347

错误信息很清楚： Xorg can't find the module `void`。

你告诉它加载的地方是：

```
Section "InputDevice"
  Identifier "void-mouse"
  Driver     "void"
EndSection 
```

要么让 xorg 找到模块，要么从 xorg.conf 中删除它。

*   在 Debian 上安装它：`sudo apt-get install xserver-xorg-input-void`. 然后您必须保证 Xorg 正在尝试在适当的位置找到它（请参阅 参考资料`ModulePath`）。
*   要从 xorg.conf 中删除模块，请尝试仅删除上面的部分，然后从以下行中删除`Section "Server Layout"`：

    ```
    InputDevice "void-mouse" 
    ```

PS：我不确定stackoverflow是否适合这类问题......

# jquery - 使用 HTML5 历史 API 在不同页面之间添加过渡效果

> ID：10096226
> 
> 赞同：0
> 
> 时间：2012-04-10T20:47:02.433
> 
> 标签：jquery, ajax, html, transition

我正在尝试使用我在此处使用 HTML5 历史 API 找到的本教程：[使用 JavaScript、HTML5 历史 API、jQuery、Facebook 之类的 PHP、Github 导航菜单更改浏览器 url 而无需使用 ajax 请求重新加载页面](http://tinywall.info/2012/02/22/change-browser-url-without-page-reload-refresh-with-ajax-request-using-javascript-html5-history-api-php-jquery-like-facebook-github-navigation-menu/#idc-container)

虽然我找不到在页面之间实现简单幻灯片效果的方法，但我真的需要这样做。我尝试了不同的方法，但我无法提出解决方案。有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T15:54:16.590

从一些简单的方法开始：

*   在所需的操作上，通过 ajax 将内容加载到隐藏的 div 中

*   隐藏前一个并在 div 中滑动。

*   同时维护每个请求的历史记录

# php - 使用 mysql 和 Php 创建即席查询

> ID：10096229
> 
> 赞同：0
> 
> 时间：2012-04-10T20:47:21.710
> 
> 标签：php, mysql

我正在尝试使用 php 和 mysql 创建和临时查询系统，我对 php 和 mysql 都有些陌生，我非常愿意学习并且一直在尝试，但是任何人都可以推荐任何教程、模板或软件来做这个我真的很感激

# php - HTTP 转义字符、PHP、CALDAV

> ID：10096230
> 
> 赞同：2
> 
> 时间：2012-04-10T20:47:22.263
> 
> 标签：php, http, caldav

我正在发送原始请求，并通过 HTTP 接收原始响应。许多字符似乎在响应中被转义，例如本例中的逗号：“LOCATION:Philadelphia\, PA”。我的问题是，这是 HTTP 的事情、PHP 的事情还是 CalDav 的事情？还有哪些其他角色被认为是“特殊的”？

**编辑：**

实际回应：

```
HTTP/1.1 207 Multi-Status
Date: Tue, 10 Apr 2012 20:24:26 GMT
Server: Apache/2.2.8 (Ubuntu) PHP/5.2.4-2ubuntu5.14 with Suhosin-Patch mod_ssl/2.2.8 OpenSSL/0.9.8g mod_wsgi/2.0 Python/2.5.2 mod_perl/2.0.3 Perl/v5.8.8
X-Powered-By: PHP/5.2.4-2ubuntu5.14
DAV: 1, 2, 3, access-control, calendar-access, calendar-schedule
DAV: extended-mkcol, calendar-proxy, bind, addressbook, calendar-auto-schedule
Content-Location: /davical/caldav.php/rwr26/home/
ETag: "dd99b87d4c1051ea2e9f4bf203e1a148"
X-DAViCal-Version: DAViCal/0.9.9; DB/1.2.9
Content-Length: 1305
Keep-Alive: timeout=15, max=100
Connection: Keep-Alive
Content-Type: text/xml; charset="utf-8"

<?xml version="1.0" encoding="utf-8" ?>
<multistatus xmlns="DAV:" xmlns:C="urn:ietf:params:xml:ns:caldav">
 <response>
  <href>/davical/caldav.php/rwr26/home/5F12F7DA-10B0-4EE3-820D-B56F0B2FC153.ics</href>
  <propstat>
   <prop>
    <getetag>"d7a384dba191b9659ccf12ac9edc449e"</getetag>
    <C:calendar-data>BEGIN:VCALENDAR
VERSION:2.0
PRODID:-////NONSGML kigkonsult.se iCalcreator 2.10.23//
CALSCALE:GREGORIAN
BEGIN:VTIMEZONE
TZID:America/New_York
X-LIC-LOCATION:America/New_York
BEGIN:STANDARD
DTSTART:20111106T070000
TZOFFSETFROM:-0400
TZOFFSETTO:-0500
RRULE:FREQ=YEARLY;BYDAY=1SU;BYMONTH=11
TZNAME:EST
END:STANDARD
BEGIN:DAYLIGHT
DTSTART:20120311T080000
TZOFFSETFROM:-0500
TZOFFSETTO:-0400
RRULE:FREQ=YEARLY;BYDAY=2SU;BYMONTH=3
TZNAME:EDT
END:DAYLIGHT
END:VTIMEZONE
BEGIN:VEVENT
UID:5F12F7DA-10B0-4EE3-820D-B56F0B2FC153
DTSTAMP:20120408T041113Z
CLASS:PUBLIC
CREATED:20120408T041113Z
DESCRIPTION:Testfghfghfghfghfghfghfghfghfghfghfghfghfghfghfgh
DTSTART;TZID=America/New_York:20120410T000000
DTEND;TZID=America/New_York:20120419T010000
LAST-MODIFIED:20120408T041228Z
LOCATION:Philadelphia\, PA
SEQUENCE:1
SUMMARY:Test
TRANSP:OPAQUE
END:VEVENT
END:VCALENDAR
</C:calendar-data>
   </prop>
   <status>HTTP/1.1 200 OK</status>
  </propstat>
 </response>
</multistatus> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T22:15:54.923

第一个假设：CAL DAV。这不是 PHP 的魔术引号（斜线和`'`）。而且HTTP只是传输，它不会自行改变。`"``NUL`

# rest - 在 node.js 中自动生成 Rest 服务

> ID：10096237
> 
> 赞同：3
> 
> 时间：2012-04-10T20:48:16.957
> 
> 标签：rest, node.js, express, mongoose

有没有办法像 rails 一样在 node.js 中自动生成 Rest 服务？我只想将我的 mongodb 模型公开为 Restfull 服务。我现在正在用 Mongoose 和 express-resource 做很多重复性的工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T13:41:36.050

如果铁路对您的需求来说太笨重，您也可以使用我开发的库：

[https://github.com/enyo/mongo-rest](https://github.com/enyo/mongo-rest)

这是一个简单的库，经过很好的测试，它只是为你的猫鼬模型提供了一个 REST 接口。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T21:00:55.977

是的，有可能，请遵循以下命令：

```
npm install railway
railway init rest-app && cd rest-app && npm install
railway generate scaffold resource property1 property2
railway server 3000 
```

就是这样！如果需要生成嵌套资源：

```
railway generate resource.nestedresource propertyForNestedResource 
```

并修改 config/routes.js：

```
map.resources('resource', function (res) {
    res.resources('nestedresources');
}); 
```

检查此示例应用程序：[https ://github.com/anatoliychakkaev/railway-example-app](https://github.com/anatoliychakkaev/railway-example-app)

欢迎来到铁路：[http ://railwayjs.com](http://railwayjs.com)

# javascript - 绑定用户单击以实例化对象

> ID：10096243
> 
> 赞同：0
> 
> 时间：2012-04-10T20:48:28.770
> 
> 标签：javascript, oop

我像这样运行我的界面，m1 只是抓取 elementById 并将 onclick 属性设置为函数名称。

因为我想“实例化一个对象”，所以我创建了一个名为的公共静态方法

```
 ControlSignIn.interface 
```

然后像这样创建并调用我的对象：

```
new ControlSignIn().invoke(); 
```

这是执行此操作的最佳实践方式吗？

```
Min.m1( 'signin_button', ControlSignIn.interface ); 
```

休息：

```
var ControlSignIn = function( ) 
{
    var form_element = document.getElementById( 'signin' ); 
    var response_element = document.getElementById( 'signin_response' ); 
    var text_object = new Text( form_element );
    var message_object = new Message( response_element );

    this.invoke = function( ) 
    {
        if( Global.validate_input_on === 1 )
        {
            if( !text_object.checkEmpty() ) 
            {
                message_object.display( 'empty' );
                return false;
            }
            if( !text_object.checkPattern( 'email' ) ) 
            {
                message_object.display( 'email' );
                return false;
            }
            if( !text_object.checkPattern( 'pass' ) ) 
            {
                message_object.display( 'pass' );
                return false;
           }
        }
        AjaxNew.repeatUse( ajaxSerialize( form_element ) + '&ajax_type=signin_control', function( server_response_text ) { ajaxType( server_response_text, response_element, 'respond' ); } );
    }
};

ControlSignIn.interface = function()
{
    new ControlSignIn().invoke();
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T20:59:43.817

嗯。那里有很多全局对象。太多的耦合，不管是什么语言。

```
ControlSignIn.interface = function()
{
    new ControlSignIn().invoke();
}; 
```

不知道为什么要创建 ControlSignIn 的新实例然后调用它的方法。此外，像调用一样分配给原型。老实说，不知道你为什么需要这种方法。

老实说，我对你想要做什么有一个模糊的想法（这是某种形式的验证，对吗？）但这一切都很复杂，我什至不知道从哪里开始。

# algorithm - 巴士预约数据库设计

> ID：10096250
> 
> 赞同：12
> 
> 时间：2012-04-10T20:48:56.233
> 
> 标签：algorithm, database-design

我正在为公共汽车开发一个预订模块，但我在为其设计正确的数据库结构时遇到了麻烦。

举个例子：
巴士从A到D，在B和C中途停留。乘客可以预订任何路线的车票，即。从 A 到 B、C 到 D、A 到 D 等等。

所以每条路由可以有很多“子路由”，更大的包含更小的子路由。

我想以一种有助于轻松搜索空闲座位的方式设计路线和停靠点的表格结构。因此，如果有人预订了从 A 到 B 的座位，那么从 B 到 C 或 D 的座位仍然可用。

所有想法将不胜感激。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-10T23:32:38.177

我可能会采用类似于这个基本思想的“蛮力”结构：

![在此处输入图像描述](../Images/2580ef7981259e67ba34c51f66c86875.png)

*（实际模型中应该存在更多字段。这只是一个简化版本，包含建立表之间关系所需的基本要素。）*

车票通过 TICKET_STOP 表“覆盖”站点，例如，如果一个车票涵盖 3 个站点，那么 TICKET_STOP 将包含与*该*车票相关的 3 行。如果该票未涵盖其他 2 个站点，则那里将没有相关行，但没有什么可以阻止*不同*的票覆盖这些站点。

自由使用或自然键/识别关系确保两张票不能覆盖相同的座位/停靠组合。看看 LINE.LINE_ID 如何沿着菱形依赖的两个边缘“迁移”，只是在 TICKET_STOP 表中在其底部合并。

这种模型本身并不能保护您免受诸如单张票“跳过”一些站点的异常情况的影响——您必须通过应用程序逻辑强制执行一些规则。但是，它应该允许相当简单和快速地确定哪些座位在旅行的哪些部分是免费的，如下所示：

```
SELECT *
FROM
    STOP CROSS JOIN SEAT
WHERE
    STOP.LINE_ID = :line_id
    AND SEAT.BUS_NO = :bus_no
    AND NOT EXIST (
        SELECT *
        FROM TICKET_STOP
        WHERE
            TICKET_STOP.LINE_ID = :line_id
            AND TICKET_STOP.BUS_ID = :bus_no
            AND TICKET_STOP.TRIP_NO = :trip_no
            AND TICKET_STOP.SEAT_NO = SEAT.SEAT_NO
            AND TICKET_STOP.STOP_NO = STOP.STOP_NO
    ) 
```

*（将参数前缀替换`:`为适合您的 DBMS 的前缀。）*

此查询实质上为给定线路和公共汽车生成所有站点和座位组合，然后丢弃那些在给定行程中已经被某些票“覆盖”的那些。那些仍然“未被发现”的组合对于那次旅行是免费的。

您可以轻松地在子句中添加：`STOP.STOP_NO IN ( ... )`或以限制对特定站点或座位的搜索。`SEAT.SEAT_NO IN ( ... )``WHERE`

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-04-27T11:25:59.310

从公交公司的角度来看：

通常，一条路线被视为一系列路段，例如 A 到 B、B 到 C、C 到 D 等。填充量是在每个路段上分别计算的。因此，如果巴士从 A 出发，而人们在 C 出发，则用户可以在 C 购买车票。

我们这样计算，每条路线都有ID，每个路段都属于这个路线ID。然后，如果用户购买了多个部分的票，则标记每个部分。然后对于下一个乘客系统，检查沿途的所有路段是否可用。

# web-services - 如何指定 webServiceTemplate 使用哪种版本的 soap？

> ID：10096254
> 
> 赞同：10
> 
> 时间：2012-04-10T20:49:20.647
> 
> 标签：web-services, spring, soap, spring-ws

我正在用 spring 开发一个肥皂网络服务客户端。

我在用`webServiceTemplate`

如何指定我使用哪种版本的肥皂？

我可以看到它默认使用soap 1.1。

我想强制它使用soap 1.2

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-10T21:00:00.343

```
<bean id="messageFactory" class="org.springframework.ws.soap.saaj.SaajSoapMessageFactory">
    <property name="soapVersion">
        <util:constant static-field="org.springframework.ws.soap.SoapVersion.SOAP_12"/>
    </property>
</bean> 
```

我刚刚发现，我需要传递一个消息工厂

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-11T05:38:34.320

你只需在*spring*的配置文件中指定*soap*版本，通常如下方式： *`spring.cfg.xml`*

 *```
<bean id="messageFactory" class="org.springframework.ws.soap.saaj.SaajSoapMessageFactory">
    <property name="soapVersion">
        <util:constant static-field="org.springframework.ws.soap.SoapVersion.SOAP_12"/>
    </property>
</bean> 
```*

# ios - 核心数据关系 - 两个实体对一个实体

> ID：10096255
> 
> 赞同：1
> 
> 时间：2012-04-10T20:49:28.987
> 
> 标签：ios, core-data, entity-relationship, relationship

我有三个实体。

*   作者
*   报纸
*   论文

`Newspaper`两者`Dissertation`都可以有一个或多个`Author`。我已经设法用`Newspaper`. 我想要完成的是创建`Dissertation`与`Newspaper`. 这意味着，我希望作者 ( `Dissertation`) 链接到 parentEntity ( `Author`)。

这是一个可能有帮助的图像。

![关系](../Images/a2e82609a00591fff9a506ab4e055638.png)

如您所见，`Dissertation`当前链接到 newRelationship。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T21:03:37.843

创建一个名为“Paper”之类的抽象父类，它与“作者”具有“作者”关系。让“Newspaper”和“Dissertation”都成为“Paper”的子实体。

如果您这样做，两个子实体将具有（=继承）（其父“论文”）与“作者”的关系，名为“作者”。

# assembly - 刷新的指令数？

> ID：10096256
> 
> 赞同：-3
> 
> 时间：2012-04-10T20:49:36.467
> 
> 标签：assembly, cpu, mips

执行跳转指令时会刷新多少条指令？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T20:58:11.797

The number of instructions is based on many, many variables, but for MIPS essentially comes down to the size of the pipeline in stages. For a 5-stage pipeline there are **up to** 5 instructions in some stage of execution at any given point in time. There could be less, as the pipeline could be not full after a context switch or a fault.

For out-of-order execution, you will get a variable number of instructions depending on the instruction stream coming in, among other things.

For a processor that has a separate FPU outside (or any other co-processor, for that matter) may have more instructions still.

# mysql - Red Gate MySQL 比较显示差异组中显示的相似对象

> ID：10096260
> 
> 赞同：1
> 
> 时间：2012-04-10T20:49:45.227
> 
> 标签：mysql, sql, redgate, schema-compare

我正在进行 MySQL Red Gate 模式比较，差异组中显示了一些对象，但比较视图显示没有差异。我错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T09:37:43.023

尝试以下操作：

```
SELECT 
    phone, 
    COUNT(phone) AS NumOccurrences
FROM 
    *MyTable*
GROUP BY 
    phone
HAVING ( 
    COUNT(phone) > 1 
) 
```

# c# - (OAuthException - #2500) 必须使用活动访问令牌来查询有关当前用户的信息

> ID：10096261
> 
> 赞同：4
> 
> 时间：2012-04-10T20:49:52.310
> 
> 标签：c#, facebook, asp.net-mvc-3, facebook-c#-sdk

```
 string accessToken = GetAccessToken();
        string accessKey = accessToken.Split('=')[1];

        var client = new FacebookClient(accessKey);
        dynamic me = client.Get("me"); 
```

这是获取访问令牌的方法，它确实返回了有效的访问令牌

```
private static string GetAccessToken()
    {
        // Create a request using a URL that can receive a post. 
        WebRequest request = WebRequest.Create("https://graph.facebook.com/oauth/access_token?grant_type=client_credentials&client_id=201193246663533&client_secret=secretkeyhere");
        // Set the Method property of the request to POST.
        request.Method = "POST";
        // Create POST data and convert it to a byte array.
        string postData = "This is a test that posts this string to a Web server.";
        byte[] byteArray = Encoding.UTF8.GetBytes(postData);
        // Set the ContentType property of the WebRequest.
        request.ContentType = "application/x-www-form-urlencoded";
        // Set the ContentLength property of the WebRequest.
        request.ContentLength = byteArray.Length;
        // Get the request stream.
        Stream dataStream = request.GetRequestStream();
        // Write the data to the request stream.
        dataStream.Write(byteArray, 0, byteArray.Length);
        // Close the Stream object.
        dataStream.Close();
        // Get the response.
        WebResponse response = request.GetResponse();
        // Display the status.
        Console.WriteLine(((HttpWebResponse)response).StatusDescription);
        // Get the stream containing content returned by the server.
        dataStream = response.GetResponseStream();
        // Open the stream using a StreamReader for easy access.
        StreamReader reader = new StreamReader(dataStream);
        // Read the content.
        string responseFromServer = reader.ReadToEnd();
        // Display the content.
        Console.WriteLine(responseFromServer);
        // Clean up the streams.
        reader.Close();
        dataStream.Close();
        response.Close();

        return responseFromServer;
    } 
```

但是，当我调试过

```
dynamic me = client.Get("me"); 
```

抛出此异常：

(OAuthException - #2500) 必须使用活动访问令牌来查询有关当前用户的信息。

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-10T21:12:49.577

您正在获取应用程序的访问令牌，而不是用户。因此，“我”没有意义。您应该在此处提供 ID - 您的用户 ID、您的应用 ID 或您的应用有权访问的任何其他 ID。

这两个电话都适用于您的示例：

```
dynamic me = client.Get("1000<<MY_USER_ID>>5735");

dynamic theApp = client.Get("201193246663533"); 
```

# html - 对齐不同高度的浮动

> ID：10096263
> 
> 赞同：3
> 
> 时间：2012-04-10T20:50:02.593
> 
> 标签：html, css, alignment, css-float

我很难控制我的花车的垂直对齐方式。

我现在的情况是这样的： [![当前的](../Images/bb4cbce5303b211a93b31920ce899f50.png)](https://i.stack.imgur.com/U6IiR.jpg)

我想要的对齐方式是这样的： [![想要的](../Images/53c22aa4f89f3f82d75be1da2466076f.png)](https://i.stack.imgur.com/bBveF.jpg)

因此 的垂直对齐`aside#headlines`。当我交换HTML 时`section#thumbs`，`aside#headlines`一切看起来都很好，但这在语义上是不正确的，尤其是因为我必须在多个页面中重用这段代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T20:53:12.183

你不能用 CSS 做到这一点。打破浮动是一个常见问题，最好的方法是完全废弃浮动并使用 div 和`display: block`. 但是，如果您真的想使用浮点数，请查看[jQuery Masonry 插件](http://masonry.desandro.com/)。

对不起，没有更简洁的答案！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T02:02:23.983

我知道这有点困难，但看看我是如何处理这个的……是的，它可以做到。

好吧，如果我对您的理解正确，那么做我该做的，首先创建一个包含所有内容的主包装器，该包装器包含您的所有内容。

然后，不要浮动单独的项目，如果你愿意的话，如果你的盒子在他们自己的列包装器中包装每个，然后浮动它们。所以例如

（伪代码来了）

```
<div id="MAINwrapper>//THIS wraps all your content
<div id="mainLEFTwrapper">//float this left
   <div one></div>
   <div two></div>
</div>
and THIS wraps your divs that float to the right
<div id="mainMID/RIGHT wrapper>//float this left or right
   <div 3></div>
   <div 4></div>
</div>
</div><!-- main wrap ender --> 
```

那么css很简单。第一组向左浮动（上面的标记为 LEFT 包装器），第二组向右浮动。（标记为 RIGHT 包装器）

现在，由于您的内栏内容/元素现在被包装在它们各自的左/右列包装器中，它们彼此位于彼此之下，您可以使用边距或简单`<br/>`标签来分隔它们的高度。

然后完成，确保你给主包装，一个最小宽度，总计你的两个内列包装宽度，这样当屏幕/文档窗口小于主包装宽度时，它们不会“浮动”在彼此下方（因此浮动）大声笑。

就是这样。我试着处理这样的情况，比如老式桌子哈哈。如果你想想我上面解释的像僵硬的桌子，那么你会更好地理解它。

祝你好运。

如果您需要进一步的帮助，请大声说，但我 100% 肯定会工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T06:36:15.813

将右浮动包装成一个右浮动 div，同时保持左浮动分开，为我解决了这个问题！

最终结果看起来有点像这样：

```
<aside id="quote" class="float_left">
  blabla
</aside>

<div class="float_right">

  <article id="intro">
    blabla
  </article>

  <section id="thumbs">
    blabla
  </section>

</div>

<aside id="headlines">
  blabla
</aside> 
```

再次感谢！

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-04-10T20:56:08.337

You'd have to wrap them in divs for the columns, then float the columns.

```
<div style="float:left">
   <div id="quote">blah</div>
   <div id="headlines">blah</div>
</div>
<div style="float:right">
   <div id="intro">blah</div>
   <div id="thumbs">blah</div>
</div> 
```

**[edited]** misunderstood the questions

# sqlite - SQLite 查询排序

> ID：10096267
> 
> 赞同：1
> 
> 时间：2012-04-10T20:50:22.960
> 
> 标签：sqlite, sorting, timestamp

当涉及到 SQL 查询时，我有点笨拙，我找不到任何帮助，所以我想我会问。

我目前正在开发一个事件跟踪器/日历样式的东西，有两种类型的事件。一种是标准从 X 开始并在 Y 结束，而另一种是“全天”（即，从上午 12:01 开始，在晚上 11:59 结束）。我的问题是数据库查询对其进行正确排序。我想要做的是得到回报，这样全天的事件就在当天列表的最后。

例如，如果我有 4 个事件，一个在下午 1 点，一个在下午 2 点，一个全天，一个明天上午 11 点，它看起来像：

*   下午 1:00 活动
*   下午 2:00 活动
*   全天的活动
*   明天上午 11:00 活动

我有开始和结束日期的 UNIX 时间戳（以秒为单位），我目前的尝试是

```
SELECT * FROM table ORDER BY all_day_flag, startTime; 
```

这是行不通的，因为它总是把全天的事件放在最后，所以任何关于在哪里改进它的提示都将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T20:56:46.657

您需要将日期和时间与 Unix 时间戳分开提取，然后使用日期作为第一个排序选项，然后是全天标志，然后是时间。

试试这个：

```
SELECT date(startTime, 'unixepoch') AS startDate,
       time(startTime, 'unixepoch') AS startHour,
       time(endTime,   'unixepoch') AS endHour,
       all_day_flag
  FROM table
  ORDER BY
    startDate, all_day_flag, startHour; 
```

# python - 保护 google app engine 数据存储区中的数据

> ID：10096268
> 
> 赞同：17
> 
> 时间：2012-04-10T20:50:25.693
> 
> 标签：python, security, google-app-engine, rsa, sha

我们的谷歌应用引擎应用程序存储了大量的个人识别信息（电子邮件、ssn 等）来识别用户。我正在寻找有关如何保护这些数据的建议。

## 我现在的策略

**以两种形式存储敏感数据：**

*   散列 - 使用 SHA-2 和盐
*   加密 - 使用公钥/私钥 RSA

**当我们需要进行查找时：**

*   查找散列数据（在查询中散列 PII，将其与数据存储中的散列 PII 进行比较）。

**如果我们需要重新散列数据或以原始形式处理它：**

*   使用我们的私钥解密加密版本。永远不要以原始形式存储它，只需处理它然后重新散列和重新加密它。

## 我的担忧

**保守我们的哈希盐秘密**

如果攻击者掌握了数据存储中的数据以及我们的哈希盐，我担心他们会暴力破解敏感数据。其中一些（如 SSN，一个 9 位数字）没有大的密钥空间，所以即使使用现代哈希算法，我相信如果攻击者知道盐，它也可以完成。

我目前的想法是将盐排除在源代码控制之外并保留在它自己的文件中。该文件在部署期间被加载到 GAE 中，应用程序在需要散列传入数据时读取该文件。

在部署之间，salt 文件保存在受愤怒熊（或保险箱）保护的 USB 密钥上。

与盐只生活在两个地方

1.  USB 密钥
2.  部署到谷歌应用

并且由于永久禁用了代码下载，我想不出一种方法可以让某人在不窃取该 USB 密钥的情况下获得盐分。我错过了什么吗？

**保密我们的私有 RSA 密钥**

少担心这个。我们很少需要解密加密版本（仅当我们更改哈希算法或数据格式时）。

私钥永远不必接触 GAE 服务器，我们可以拉下加密数据，在本地解密，处理它，然后重新上传加密/散列版本。

我们可以将我们的 RSA 私钥保存在由熊和老虎守卫的 U 盘上，并且仅在需要时才将其取出。

* * *

我意识到这个问题并不完全是谷歌应用程序特有的，但我认为 GAE 使这种情况有些独特。

如果我有完全的控制权，我会做一些事情，比如通过双重身份验证锁定部署访问和对数据存储查看器的访问，但这些选项目前不可用（拥有 GAE 特定密码很好，但我喜欢涉及 RSA 令牌）。

我既不是 GAE 专家也不是安全专家，所以如果我遗漏了一个漏洞或者我没有想到特定于平台的东西，我很想听听。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-11T01:38:22.387

在决定安全架构时，您首先想到的应该是威胁模型。谁是您的潜在攻击者，他们的能力如何，您如何防御他们？如果对您的威胁模型没有一个清晰的概念，您就无法评估您提议的安全措施是否足够，或者是否有必要。

从您的文字中，我猜您正在寻求防止以下某些子集：

1.  攻击者会破坏您的数据存储数据，但不会破坏您的应用程序代码。
2.  获取凭据以访问您的应用程序的管理控制台并可以部署新代码的攻击者。

对于前者，加密或散列您的数据存储数据可能就足够了（但请参阅此答案后面的警告）。防止后者更加困难，但只要您的管理员用户在不部署新应用程序版本的情况下无法执行任意代码，按照您的建议，将您的密钥存储在未签入源代码控制的模块中，应该可以正常工作，因为即使具有管理员访问权限，他们也无法恢复密钥，也无法部署向他们显示密钥的新版本。确保禁用源下载，显然。

您正确地注意到对具有有限熵的数据散列的一些担忧-您的担忧是正确的。在某种程度上，盐可以通过防止预计算攻击来帮助解决此问题，而密钥拉伸（例如 PBKDF2、scrypt 和 bcrypt 中使用的密钥拉伸）可以通过增加攻击者必须做的工作量来使攻击者的生活更加艰难。但是，对于像 SSN 这样的东西，您的密钥空间非常小，以至于没有多少密钥拉伸会有所帮助 - 如果您对数据进行哈希处理，并且攻击者获得了哈希值，他们将能够确定原始 SSN。

在这种情况下，唯一可行的方法是使用密钥加密数据。现在，您的攻击者被迫暴力破解密钥以获取数据，这是一个难度更大的挑战。

简而言之，我的建议是使用标准（私钥）密码加密您的数据，并将密钥存储在不在源代码控制中的模块中。相反，使用散列只会削弱您的数据，而使用公钥加密并不能提供明显的安全性来抵御使用标准密码所没有的任何可能的威胁模型。

当然，保护用户数据的首要方法是尽可能不存储它。:)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-10T22:38:42.950

您可以通过使用 HMAC、密钥和每个条目的唯一盐来提高哈希算法的安全性（我知道人们会对此持不同意见，但我的研究认为它有助于避免某些攻击）。您还可以使用 bcrypt 或 scrypt 来散列，这将使反转散列成为一个非常耗时的过程（但您还必须考虑到应用程序计算散列所需的时间）。

通过禁用代码下载并保护您的密钥，我无法想象有人如何获得它。只需确保您的代码受到类似安全防护的保护，或者您在开发期间从代码中删除密钥并仅将其拉出进行部署。我假设您会将您的密钥保存在您的代码中（我听说很多人说将其保存在内存中以确保超级安全，但考虑到 AppEngine 和实例的性质，这是不可行的）。

更新：请务必为对您的应用拥有管理员权限的所有 Google 帐户启用 2 因素身份验证。谷歌提供此功能，因此不确定您启用此功能的限制是否是由外部力量强加的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-07T18:12:20.913

在数据存储上加密数据的有趣方法。在经历了这些之后，我想到的一个问题是你如何查询你的哈希数据？您是在使用两个散列的比较还是更细粒度的散列？同样，在对表中的数据进行散列和加密后，如何完成大于值、小于值等操作？

[Fine grained hashing](http://harisankar-krishnaswamy.blogspot.in/2013/07/securing-data-on-appengine-and-other.html) meaning, do you hash consecutive bytes of a data stream to get the accumulated hash. i.e hash(abcd) = hash(a,b) + hash (b,c) + etc. This type of hashing would tell how similar the underlying data are rather than a match.

# git - Git 从跟踪中删除已删除的文件

> ID：10096271
> 
> 赞同：4
> 
> 时间：2012-04-10T20:50:33.013
> 
> 标签：git

我是 Git 新手，所以请多多包涵。我初始化了我的存储库并使用了“git add”。

如果我删除文件并提交会发生什么？我需要重用'git add。'吗？如何确保当我在 github 上推送到 master 时，已删除的文件不存在？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-10T20:52:48.563

用于`git rm`删除文件并使 Git 识别删除。

```
git rm path/to/file
git commit
git push 
```

# asp.net - 我可以将 asp.net Web 表单应用程序部署到 Windows 7 笔记本电脑吗？

> ID：10096284
> 
> 赞同：0
> 
> 时间：2012-04-10T20:51:51.767
> 
> 标签：asp.net

我创建了一个小型应用程序，供内部使用 asp.net 网络表单。我没有服务器来部署它，但希望办公室中的其他人能够访问 Intranet。只有少数人可以访问 (2-6)。它不是面向公众的应用程序。

我在此站点上看到了以下说明，以将 asp.net mvc 应用程序部署到使用 IIS 7 的台式计算机。

1.从标准的windows组件安装IIS。2.将您的代码放在默认创建的网站的根目录中。3.确保防火墙允许第 80 个端口。

对于我的 asp.net Web 表单应用程序，该过程是否相同 - 或者是否存在本质上的不同（在 Web 表单和 mvc 之间）使得这不可能？

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T21:40:38.833

说明将或多或少保持不变。该过程可能比您在上述步骤中描述的要复杂一些，但这是一个很好的起点。

除了确保端口 80 已打开之外，您可能还需要为该站点分配一个 IP 地址。请参见下图：

![在此处输入图像描述](../Images/2ab2545f966b5f8c3e60742917bc91c5.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T21:41:41.560

它应该完全相同。

您需要检查的一件事是 IIS7 创建的默认网站使用的 ASP.NET 框架版本与创建代码的版本相同。转到 IIS -> 应用程序池 -> DefaultAppPool 然后检查 .Net Framework 版本。

禁止那个；只要 IIS 内站点的物理路径指向正确的文件夹，它就可以像 MVC 一样工作

# c# - C# 中的正则表达式 - 在另一个值之后从一个值中删除引号和转义引号

> ID：10096285
> 
> 赞同：0
> 
> 时间：2012-04-10T20:52:01.847
> 
> 标签：c#, regex

我正在使用 HighCharts 并从 C# 生成脚本，不幸的是，他们使用内联函数进行格式化程序和事件。不幸的是，我无法从我知道的任何序列化程序中输出这样的 JSON。换句话说，他们想要这样的东西：

```
"labels":{"formatter": function() { return Highcharts.numberFormat(this.value, 0); }} 
```

我可以使用我的序列化程序，我只能到这里：

```
"labels":{"formatter":"function() { return Highcharts.numberFormat(this.value, 0); }"} 
```

这些用于点击事件以及格式化程序，我绝对需要它们。

所以我在想正则表达式，但已经很多年了，而且我从来都不是一个正则表达式向导。

我可以在最终的序列化字符串上使用哪种正则表达式替换，以将任何以 function() 开头的引用值替换为自身的未引用版本？此外，函数本身可能包含“”，在这种情况下，引用的字符串可能包含“\”，也需要将其替换回“。

我假设我可以在这里使用第一个答案的变体：

[使用正则表达式在 C# 中使用转义引号查找带引号的字符串](https://stackoverflow.com/questions/2148587/regex-quoted-string-with-escaped-quotes-in-c-sharp)

但我似乎无法做到这一点。为了上帝的爱，请帮助我。

我为此付出了更多的汗水，我想出了

```
 serialized = Regex.Replace(serialized, @"""function\(\)[^""\\]*(?:\\.[^""\\]*)*""", "function()$1"); 
```

但是，我的最终结果始终是：

```
formatter:function()$1 
```

这告诉我我正在匹配正确的东西，但我的捕获工作不正常。现在我觉得我可能是一个有一些 C# 特定正则表达式情况的白痴。

更新：是的，我是个白痴。我没有捕捉到我真正想要的东西。

```
 `enter code here` serialized = Regex.Replace(serialized, @"""function\(\)([^""\\]*(?:\\.[^""\\]*)*)""", "function()$1"); 
```

这得到了我的匹配，但在这样的情况下：

```
"formatter":"function() { alert(\"hi!\"); return Highcharts.numberFormat(this.value, 0); }" 
```

它返回：

```
"formatter":function() { alert(\"hi!\"); return Highcharts.numberFormat(this.value, 0); } 
```

我需要把那些讨厌的反斜杠去掉。现在我想我真的被困住了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T21:17:29.210

匹配的正则表达式

```
"function\(\) (?<code>.*)" 
```

替换表达式

```
function() ${code} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T21:19:50.297

**试试这个：** [http ://regexr.com?30jpf](http://regexr.com?30jpf)

它能做什么 ：

在函数声明之前和之后立即查找双引号。

**正则表达式：**

```
(")(?=function()).+(?<=\})(") 
```

**将第 1 组和第 3 组替换为空：**

```
3 capturing groups: 
   group 1: (")
   group 2: ()
   group 3: (") 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-17T00:07:50.977

```
 string serialized = JsonSerializer.Serialize(chartDefinition);
    serialized = Regex.Replace(serialized, @"""function\(\)([^""\\]*(?:\\.[^""\\]*)*)""", "function()$1").Replace("\\\"", "\""); 
```

# java - 非常大的 zip 文件 (> 50GB) --> ZipException: 无效的 CEN 标头

> ID：10096289
> 
> 赞同：8
> 
> 时间：2012-04-10T20:52:09.140
> 
> 标签：java, exception, header, zip, large-files

我正在尝试用 JAVA 打开一个 ZIP 文件。

下面的代码工作正常，除了一些大文件，在这种情况下我得到以下异常：

```
Exception in thread "main" java.util.zip.ZipException: invalid CEN header (bad signature)
at java.util.zip.ZipFile.open(Native Method)
at java.util.zip.ZipFile.<init>(ZipFile.java:114)
at java.util.zip.ZipFile.<init>(ZipFile.java:75) 
```

有已知的错误吗？可能是因为 JAVA 不支持更高的压缩级别吗？

请注意，我不能使用 Winzip 解压缩文件，并且 Linux 下的 gzip 给出了有关数据长度的错误（未压缩文件约为 80 GB）。我不得不使用以下解决方法来解压缩它：

```
gunzip -S .zip < file.zip > file 
```

任何想法都会非常有帮助。

代码：

```
if (file.getExtension().equals("gz")) {
  br = new BufferedReader(new InputStreamReader(new GZIPInputStream(new FileInputStream(name))));
}
else if (file.getExtension().equals("zip")) {
    ZipFile zipFile = new ZipFile(name); // <-------------------FAILS HERE
    Enumeration<? extends ZipEntry> entries = zipFile.entries();
    while (entries.hasMoreElements()) {
        ZipEntry zipEntry = entries.nextElement();
        System.out.println("ZIP File in the archive:" + zipEntry.getName());
        br = new BufferedReader(new InputStreamReader(zipFile.getInputStream(zipEntry)));
        break;
    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-10T21:00:40.943

如果您没有使用 Java 7（支持 ZIP64），问题可能是[java 正在尝试使用旧的 ZIP 格式](http://en.wikipedia.org/wiki/ZIP_(file_format)#Limits)

# iphone - NSMutableArray 覆盖以前存储的元素

> ID：10096291
> 
> 赞同：0
> 
> 时间：2012-04-10T20:52:16.400
> 
> 标签：iphone, objective-c, cocoa-touch, memory-management, nsmutablearray

我目前编写了一个名为 saveWorkout 的函数，它将 NSMutableArray 从 Singleton 类保存到另一个 NSMutableArray。此函数在第一次运行时有效，但是，当我第二次运行它时，它会删除以前存储在元素 0 中的内容并用新数组替换它（这是用户单击表格时收集的字符串集合） .

这是我的功能：

```
-(IBAction)saveWorkout{
    WorkoutManager *workoutManager = [WorkoutManager sharedInstance];

    [[workoutManager workouts] insertObject: customWorkout atIndex: 0];

    NSLog(@"%@", [workoutManager workouts]); 

} 
```

customWorkout 是最初创建 NSMutableArray 的东西（基于用户点击的内容）。因此，如果我的第一个数组由 blah1、blah2 组成，那么这两个值将存储在锻炼数组中。但是，如果我然后单击 blah2、blah 3，则锻炼数组将有两个相同的数组（blah2、blah3）并且它不保留第一个数组。知道为什么会这样吗？

这是我形成customWorkout的方式：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {

    UITableViewCell *cell = [tableView cellForRowAtIndexPath:indexPath];
    NSString *str = cell.textLabel.text;

    [customWorkout insertObject:str atIndex:0];

    //Test Code: Prints Array
    NSLog(@"%@", customWorkout); 
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T21:04:50.817

我会告诉你你所犯的逻辑错误......

您一遍又一遍地使用相同的 customWorkout 对象插入到锻炼数组中......（因此它是相同的指针）而您需要做的是创建 customWorkout 数组的副本，然后将其插入到锻炼数组中……试试这个……

```
 [[workoutManager workouts] insertObject: [[customWorkout mutableCopy] autorelease]atIndex: 0]; 
```

除非您在代码中执行其他操作，否则这应该有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T21:11:11.660

`[[workoutManager workouts] insertObject: customWorkout atIndex: 0];`不会复制`customWorkout`... 的内容，而是仅保留对 . 的引用`customWorkout`。因此，您的代码只是存储对同一对象的多个引用，您最终（无意中）在第二次运行时对其进行了编辑。

您需要：

*   将对象存储在**OR**`customWorkout`中时通过以下方式复制对象：`copy``workouts`

***   每次执行后分配`customWorkout`给一个新实例`NSMutableArray``saveWorkout`**

 **任何一条路线都应该阻止您修改`NSMutableArray`您存储到`workouts`集合中的内容。第一个选项在内存管理方面可能更清楚......**

# c++ - Rapidxml 导致奇怪的问题

> ID：10096292
> 
> 赞同：0
> 
> 时间：2012-04-10T20:52:19.507
> 
> 标签：c++, stream, rapidxml

我对 rapidxml 有问题。下面的代码给了我输出： http: [//pastebin.com/352MxuQY](http://pastebin.com/352MxuQY)
但是当我删除循环或“{}”时，我正在附加节点，我得到了很好的输出： http: [//pastebin.com/H0YQGwV1](http://pastebin.com/H0YQGwV1)
为什么会这样？

```
rapidxml::xml_document<> andDoc;

ifstream andfile(PATH+XMLNAME);
vector<char> buffer((istreambuf_iterator<char>(andfile)), istreambuf_iterator<char>( ));
buffer.push_back('\0');
cout<<&buffer[0]<<endl; 
andDoc.parse<0>(&buffer[0]); 
xml_node<>* cos = andDoc.first_node("Data")->first_node("Classifiers");
xml_node<>* klda = andDoc.first_node("Data")->first_node("Kldas");

for(int i=0;i<1;i++)
{

    rapidxml::xml_document<> doc;

    ifstream myfile(cPATH+"0\\c.xml");
    vector<char> buffer2((istreambuf_iterator<char>(myfile)), istreambuf_iterator<char>( ));
    buffer2.push_back('\0');
    cout<<&buffer2[0]<<endl; 
    doc.parse<0>(&buffer2[0]); 
    xml_node<>* cl = doc.first_node();
    xml_node<>* asd = doc.clone_node(cl);

    cos->append_node(asd);

    myfile.close();

}
std::ofstream file(PATH+XMLNAME);
if (file.is_open())
{
    file.clear();
    file << andDoc;
    file.close();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T18:49:59.350

有点晚了，但这是我认为正在发生的事情：RapidXML 的`clone_node`工作方式与您想象的不同。

[从 docs](http://rapidxml.sourceforge.net/manual.html#classrapidxml_1_1memory__pool_95c49fcb056e9103ec906a59e3e01d76_195c49fcb056e9103ec906a59e3e01d76)中，有一些额外的强调......

* * *

**概要**

```
xml_node<Ch>* clone_node(const xml_node< Ch > *source, xml_node< Ch > *result=0); 
```

**描述**

克隆 xml_node 及其子节点和属性的层次结构。节点和属性是从这个内存池中分配的。***名称和值不会被克隆，它们在克隆和源之间共享。***结果节点可以选择指定为第二个参数，在这种情况下，它的内容将被克隆的源节点替换。当您想要克隆整个文档时，这很有用。

* * *

因此，发生的情况是，当 xml_document 'doc' 在 for 循环结束时超出范围时，克隆节点的名称和值超出范围（因此丢失）。鉴于此限制，我无法诚实地看到有什么用`clone_node`。

我不确定如何最好地解决这个问题 - 这取决于您的实际需求，但您可能必须以某种方式将所有源文档保持在范围内，直到创建最终输出。

# c - 有人可以解释以下内存分配 C 程序的性能行为吗？

> ID：10096294
> 
> 赞同：14
> 
> 时间：2012-04-10T20:52:29.880
> 
> 标签：c, linux, performance, unix, compiler-construction

在我的机器上 Time A 和 Time B 交换取决于是否定义（这会改变调用两个 s`A`的顺序）。`calloc`

我最初将此归因于分页系统。奇怪的 `mmap`是，当使用 代替 时`calloc`，情况就更奇怪了——正如预期的那样，两个循环都花费了相同的时间。从 中可以看出`strace`，`calloc`s 最终导致两个 `mmap`s，因此没有返回已分配内存的魔法。

我在 Intel i7 上运行 Debian 测试。

```
#include <stdlib.h>
#include <stdio.h>
#include <sys/mman.h>

#include <time.h>

#define SIZE 500002816

#ifndef USE_MMAP
#define ALLOC calloc
#else
#define ALLOC(a, b) (mmap(NULL, a * b, PROT_READ | PROT_WRITE,  \
                          MAP_PRIVATE | MAP_ANONYMOUS, -1, 0))
#endif

int main() {
  clock_t start, finish;
#ifdef A
  int *arr1 = ALLOC(sizeof(int), SIZE);
  int *arr2 = ALLOC(sizeof(int), SIZE);
#else
  int *arr2 = ALLOC(sizeof(int), SIZE);
  int *arr1 = ALLOC(sizeof(int), SIZE);
#endif
  int i;

  start = clock();
  {
    for (i = 0; i < SIZE; i++)
      arr1[i] = (i + 13) * 5;
  }
  finish = clock();

  printf("Time A: %.2f\n", ((double)(finish - start))/CLOCKS_PER_SEC);

  start = clock();
  {
    for (i = 0; i < SIZE; i++)
      arr2[i] = (i + 13) * 5;
  }
  finish = clock();

  printf("Time B: %.2f\n", ((double)(finish - start))/CLOCKS_PER_SEC);

  return 0;
} 
```

我得到的输出：

```
 ~/directory $ cc -Wall -O3 bench-loop.c -o bench-loop
 ~/directory $ ./bench-loop 
Time A: 0.94
Time B: 0.34
 ~/directory $ cc -DA -Wall -O3 bench-loop.c -o bench-loop
 ~/directory $ ./bench-loop                               
Time A: 0.34
Time B: 0.90
 ~/directory $ cc -DUSE_MMAP -DA -Wall -O3 bench-loop.c -o bench-loop
 ~/directory $ ./bench-loop                                          
Time A: 0.89
Time B: 0.90
 ~/directory $ cc -DUSE_MMAP -Wall -O3 bench-loop.c -o bench-loop 
 ~/directory $ ./bench-loop                                      
Time A: 0.91
Time B: 0.92 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-10T20:59:07.133

您还应该测试 using`malloc`而不是`calloc`. 要做的一件事`calloc`是用零填充分配的内存。

我相信在您的情况下，当您`calloc`最后一个 arr1 然后分配给它时，它已经出现在高速缓存内存中，因为它是最后一个分配并填充零的内存。当您`calloc`首先 arr1 和其次 arr2 时， arr2 的零填充会将 arr1 推出缓存。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-18T17:17:39.967

*猜猜我本可以写更多或更少，尤其是少即是多。*

原因可能因系统而异。然而; 对于 clib：

每个操作使用的总时间是相反的；如果你计时`calloc`+ 迭代。

IE：

```
Calloc arr1 : 0.494992654
Calloc arr2 : 0.000021250
Itr arr1    : 0.430646035
Itr arr2    : 0.790992411
Sum arr1    : 0.925638689
Sum arr2    : 0.791013661

Calloc arr1 : 0.503130736
Calloc arr2 : 0.000025906
Itr arr1    : 0.427719162
Itr arr2    : 0.809686047
Sum arr1    : 0.930849898
Sum arr2    : 0.809711953 
```

第一个`calloc`随后`malloc`具有比第二个更长的执行时间。`malloc(0)`在任何等之前的调用会平衡同一进程中`calloc`用于`malloc`类似调用的时间（解释如下）。但是，如果一个人排队进行几次，则*可以* 看到这些呼叫的时间略有下降。

然而，迭代时间将会变平。

简而言之；使用的总系统时间是最先分配的。然而，这是在进程的限制中无法逃脱的开销。

正在进行大量维护工作。快速了解一些案例：

* * *

## 页面短

当一个进程请求内存时，它会得到一个虚拟地址范围。此范围通过页表转换为物理内存。如果一个页面一个字节一个字节地翻译，我们很快就会得到巨大的页表。这就是为什么内存范围以块或页的形式提供服务的原因。页面大小取决于系统。该架构还可以提供各种页面大小。

如果我们查看上述代码的执行并添加一些从[/proc/PID/stat](http://www.kernel.org/doc/man-pages/online/pages/man5/proc.5.html)读取的内容， 我们会看到这一点（特别是注释 RSS）：

```
PID Stat {
  PID          : 4830         Process ID
  MINFLT       : 214          Minor faults, (no page memory read)
  UTIME        : 0            Time user mode
  STIME        : 0            Time kernel mode
  VSIZE        : 2039808      Virtual memory size, bytes
  RSS          : 73           Resident Set Size, Number of pages in real memory
} : Init

PID Stat {
  PID          : 4830         Process ID
  MINFLT       : 51504        Minor faults, (no page memory read)
  UTIME        : 4            Time user mode
  STIME        : 33           Time kernel mode
  VSIZE        : 212135936    Virtual memory size, bytes
  RSS          : 51420        Resident Set Size, Number of pages in real memory
} : Post calloc arr1

PID Stat {
  PID          : 4830         Process ID
  MINFLT       : 51515        Minor faults, (no page memory read)
  UTIME        : 4            Time user mode
  STIME        : 33           Time kernel mode
  VSIZE        : 422092800    Virtual memory size, bytes
  RSS          : 51428        Resident Set Size, Number of pages in real memory
} : Post calloc arr2

PID Stat {
  PID          : 4830         Process ID
  MINFLT       : 51516        Minor faults, (no page memory read)
  UTIME        : 36           Time user mode
  STIME        : 33           Time kernel mode
  VSIZE        : 422092800    Virtual memory size, bytes
  RSS          : 51431        Resident Set Size, Number of pages in real memory
} : Post iteration arr1

PID Stat {
  PID          : 4830         Process ID
  MINFLT       : 102775       Minor faults, (no page memory read)
  UTIME        : 68           Time user mode
  STIME        : 58           Time kernel mode
  VSIZE        : 422092800    Virtual memory size, bytes
  RSS          : 102646       Resident Set Size, Number of pages in real memory
} : Post iteration arr2

PID Stat {
  PID          : 4830         Process ID
  MINFLT       : 102776       Minor faults, (no page memory read)
  UTIME        : 68           Time user mode
  STIME        : 69           Time kernel mode
  VSIZE        : 2179072      Virtual memory size, bytes
  RSS          : 171          Resident Set Size, Number of pages in real memory
} : Post free() 
```

正如我们所见，实际分配在内存中的页面被推迟`arr2`等待页面请求；一直持续到迭代开始。如果我们添加一个`malloc(0)`before `calloc`，`arr1`我们可以注册在迭代之前两个数组都没有分配到物理内存中。

* * *

由于可能不使用页面，因此根据请求进行映射会更有效。这就是为什么当进程 ie 执行`calloc`足够数量的页面时被保留，但不一定实际分配在实际内存中。

当引用地址时，会查询页表。如果地址位于未分配的页面中，则系统会出现*页面错误*，并且随后会分配该页面。分配页面的总和称为*驻留集大小*(RSS)。

我们可以通过迭代（触摸）即 1/4 来对我们的数组进行实验。这里我还添加`malloc(0)`了 any `calloc`。

```
Pre iteration 1/4:
RSS          : 171              Resident Set Size, Number of pages in real meory

for (i = 0; i < SIZE / 4; ++i)
    arr1[i] = 0;

Post iteration 1/4:
RSS          : 12967            Resident Set Size, Number of pages in real meory

Post iteration 1/1:
RSS          : 51134            Resident Set Size, Number of pages in real meory 
```

为了进一步加快速度，大多数系统还在*转换后备缓冲区*(TLB) 中缓存 N 个最近的页表条目。

* * *

## brk, 地图

当一个进程`(c|m|…)alloc`堆的上限扩展为 `brk()`或时`sbrk()`。这些系统调用很昂贵，为了弥补这一点，`malloc`将多个较小的调用收集到一个更大的 brk() 中。

这也会`free()`产生负面影响，`brk()`而且资源昂贵，它们被收集并作为更大的操作执行。

* * *

对于巨大的要求；即像您的代码中的那个一样，`malloc()`使用`mmap()`. [此阈值](http://sourceware.org/git/?p=glibc.git;a=blob;f=malloc/malloc.c;h=79cdc52330d970cb0a113b882020adb079c94d6f;hb=HEAD#l201)可由 配置`mallopt()`，是一个受过教育的值

我们可以通过修改`SIZE`您的代码来获得乐趣。如果我们利用 `malloc.h`和使用，

```
struct mallinfo minf = mallinfo(); 
```

（不，不是*milf*），我们可以展示这个（注意`Arena`和`Hblkhd`，...）：

```
Initial:

mallinfo {
  Arena   :         0 (Bytes of memory allocated with sbrk by malloc)
  Ordblks :         1 (Number of chunks not in use)
  Hblks   :         0 (Number of chunks allocated with mmap)
  Hblkhd  :         0 (Bytes allocated with mmap)
  Uordblks:         0 (Memory occupied by chunks handed out by malloc)
  Fordblks:         0 (Memory occupied by free chunks)
  Keepcost:         0 (Size of the top-most releasable chunk)
} : Initial

MAX = ((128 * 1024) / sizeof(int)) 

mallinfo {
  Arena   :         0 (Bytes of memory allocated with sbrk by malloc)
  Ordblks :         1 (Number of chunks not in use)
  Hblks   :         1 (Number of chunks allocated with mmap)
  Hblkhd  :    135168 (Bytes allocated with mmap)
  Uordblks:         0 (Memory occupied by chunks handed out by malloc)
  Fordblks:         0 (Memory occupied by free chunks)
  Keepcost:         0 (Size of the top-most releasable chunk)
} : After malloc arr1

mallinfo {
  Arena   :         0 (Bytes of memory allocated with sbrk by malloc)
  Ordblks :         1 (Number of chunks not in use)
  Hblks   :         2 (Number of chunks allocated with mmap)
  Hblkhd  :    270336 (Bytes allocated with mmap)
  Uordblks:         0 (Memory occupied by chunks handed out by malloc)
  Fordblks:         0 (Memory occupied by free chunks)
  Keepcost:         0 (Size of the top-most releasable chunk)
} : After malloc arr2 
```

然后我们减去并`sizeof(int)`得到`MAX`：

```
mallinfo {
  Arena   :    266240 (Bytes of memory allocated with sbrk by malloc)
  Ordblks :         1 (Number of chunks not in use)
  Hblks   :         0 (Number of chunks allocated with mmap)
  Hblkhd  :         0 (Bytes allocated with mmap)
  Uordblks:    131064 (Memory occupied by chunks handed out by malloc)
  Fordblks:    135176 (Memory occupied by free chunks)
  Keepcost:    135176 (Size of the top-most releasable chunk)
} : After malloc arr1

mallinfo {
  Arena   :    266240 (Bytes of memory allocated with sbrk by malloc)
  Ordblks :         1 (Number of chunks not in use)
  Hblks   :         0 (Number of chunks allocated with mmap)
  Hblkhd  :         0 (Bytes allocated with mmap)
  Uordblks:    262128 (Memory occupied by chunks handed out by malloc)
  Fordblks:      4112 (Memory occupied by free chunks)
  Keepcost:      4112 (Size of the top-most releasable chunk)
} : After malloc arr2 
```

我们注册该系统按照宣传的方式工作。如果分配的大小低于阈值`sbrk`，则使用内部处理的内存`malloc`，否则`mmap`使用。

这种结构也有助于防止内存碎片等。

* * *

重点是该`malloc`系列针对一般用途进行了优化。但是 `mmap`，可以修改限制以满足特殊需要。

[当/如果修改 mmap 阈值时，请注意这一点](http://sourceware.org/git/?p=glibc.git;a=blob;f=malloc/malloc.c;h=79cdc52330d970cb0a113b882020adb079c94d6f;hb=HEAD#l904)（以及 100 多行）。.

如果我们在计时之前填充（触摸）arr1 和 arr2 的每一页，则可以进一步观察到这一点：

```
Touch pages … (Here with page size of 4 kB)

for (i = 0; i < SIZE; i += 4096 / sizeof(int)) {
    arr1[i] = 0;
    arr2[i] = 0;
}

Itr arr1    : 0.312462317
CPU arr1    : 0.32

Itr arr2    : 0.312869158
CPU arr2    : 0.31 
```

另见：

*   [编译时选项的概要](http://sourceware.org/git/?p=glibc.git;a=blob;f=malloc/malloc.c;h=79cdc52330d970cb0a113b882020adb079c94d6f;hb=HEAD#l152)
*   [重要统计数据](http://sourceware.org/git/?p=glibc.git;a=blob;f=malloc/malloc.c;h=79cdc52330d970cb0a113b882020adb079c94d6f;hb=HEAD#l92)
*   …实际上整个文件都很好读。

* * *

## 子注释：

那么，CPU 知道物理地址吗？不。

在内存世界中，必须**解决**很多问题；）。一个核心硬件是*内存管理单元*（MMU）。要么作为CPU的集成部分，要么作为外部芯片。

操作系统在启动时配置 MMU 并定义各种区域的访问（只读、读写等），从而提供一定程度的安全性。

我们凡人看到的地址是 CPU 使用的*逻辑地址。*MMU 将其转换为*物理地址*。

CPU的地址由两部分组成：页地址和偏移量。[PAGE_ADDRESS.OFFSET]

获取物理地址的过程可以是这样的：

```
.-----.                          .--------------.
| CPU > --- Request page 2 ----> | MMU          |
+-----+                          | Pg 2 == Pg 4 |
      |                          +------v-------+
      +--Request offset 1 -+            |
                           |    (Logical page 2 EQ Physical page 4)
[ ... ]     __             |            |
[ OFFSET 0 ]  |            |            |
[ OFFSET 1 ]  |            |            |
[ OFFSET 2 ]  |            |            |     
[ OFFSET 3 ]  +--- Page 3  |            |
[ OFFSET 4 ]  |            |            |
[ OFFSET 5 ]  |            |            |
[ OFFSET 6 ]__| ___________|____________+
[ OFFSET 0 ]  |            |
[ OFFSET 1 ]  | ...........+
[ OFFSET 2 ]  |
[ OFFSET 3 ]  +--- Page 4
[ OFFSET 4 ]  |
[ OFFSET 5 ]  |
[ OFFSET 6 ]__|
[ ... ] 
```

CPU 的*逻辑地址空间*与地址长度直接相关。32 位地址处理器具有 2^(个 32)字节的逻辑地址空间。*物理地址空间*是系统可以承受的内存量。

还有碎片内存的处理，重新对齐等。

这将我们带入了交换文件的世界。如果一个进程请求更多内存，那么它是物理可用的；其他进程的一个或多个页面被转移到磁盘/交换，并且它们的页面被请求进程“*窃取”。*MMU 对此进行跟踪；因此 CPU 不必担心内存的实际位置。

* * *

这进一步将我们带入脏记忆。

如果我们从 /proc/[pid]/smaps 打印一些信息，更具体地说，我们得到的数组范围如下：

```
Start:
b76f3000-b76f5000
Private_Dirty:         8 kB

Post calloc arr1:
aaeb8000-b76f5000
Private_Dirty:        12 kB

Post calloc arr2:
9e67c000-b76f5000
Private_Dirty:        20 kB

Post iterate 1/4 arr1
9e67b000-b76f5000
Private_Dirty:     51280 kB

Post iterate arr1:
9e67a000-b76f5000
Private_Dirty:    205060 kB

Post iterate arr2:
9e679000-b76f5000
Private_Dirty:    410096 kB

Post free:
9e679000-9e67d000
Private_Dirty:        16 kB
b76f2000-b76f5000
Private_Dirty:        12 kB 
```

创建虚拟页面时，系统通常会清除页面中的*脏位*。
当 CPU 写入该页面的一部分时，脏位被设置；因此，当交换带有脏位的页面时，会跳过干净的页面。

* * *

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-10T20:57:58.140

这只是进程内存映像何时扩展一页的问题。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-04-18T21:50:21.977

**简答**

第一次`calloc`调用它是显式地将内存清零。下一次调用它时，它假定从返回的内存`mmap`已经清零。

**细节**

以下是我检查过的一些事情来得出这个结论，如果你愿意，你可以自己尝试：

1.  `calloc`在您的第一个呼叫之前插入`ALLOC`呼叫。您会看到在此之后时间 A 和时间 B 的时间相同。

2.  使用该`clock()`函数检查每个`ALLOC`调用需要多长时间。在他们都在使用的情况下，`calloc`您会看到第一次通话比第二次通话花费的时间要长得多。

3.  用于对版本和版本`time`的执行时间进行计时。当我这样做时，我看到 的执行时间始终略短。`calloc``USE_MMAP``USE_MMAP`

4.  我跑了`strace -tt -T`which 显示了系统调用的时间和花费了多长时间。这是输出的一部分：

跟踪输出：

```
21:29:06.127536 mmap(NULL, 2000015360, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0x7fff806fd000 <0.000014>
21:29:07.778442 mmap(NULL, 2000015360, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0x7fff093a0000 <0.000021>
21:29:07.778563 times({tms_utime=63, tms_stime=102, tms_cutime=0, tms_cstime=0}) = 4324241005 <0.000011> 
```

您可以看到第一次`mmap`调用花费了`0.000014`几秒钟，但`1.5`在下一次系统调用之前大约过了几秒钟。然后第二次`mmap`调用花了`0.000021`几秒钟，然后在`times`几百微秒后调用。

我还逐步完成了应用程序执行的一部分，`gdb`发现第一次调用`calloc`导致了多次调用，`memset`而第二次调用`calloc`没有对`memset`. 如果您有兴趣，可以`calloc` [在这里](http://www.eglibc.org/cgi-bin/viewvc.cgi/trunk/libc/malloc/malloc.c?revision=17701&view=markup)查看源代码（查找）。`__libc_calloc`至于为什么在第一次通话时`calloc`不做`memset`后续电话，我不知道。但我相当有信心这可以解释您所询问的行为。

至于为什么清零的数组`memset`提高了性能，我的猜测是这是因为值被加载到 TLB 而不是缓存中，因为它是一个非常大的数组。无论您询问的性能差异的具体原因是两个`calloc`调用在执行时的行为不同。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-04-16T13:18:26.400

***摘要***：**在分析分配数组所花费的时间时，解释了时间差异**。最后分配的 calloc 只需要更多时间，而另一个（或使用 mmap 时全部）几乎没有时间。首次访问时，内存中的实际分配可能会延迟。

我对Linux上内存分配的内部了解不够。但是我运行了您的脚本，稍作修改：我添加了第三个数组和每个数组操作的一些额外迭代。而且我已经考虑到了 Old Pro 的评论，即没有考虑分配数组的时间。

结论：使用 calloc 比使用 mmap 进行分配花费的时间更长（mmap virtualy 分配内存时不使用时间，它可能会在第一次访问时推迟），并且使用我的程序最终使用 mmap 或 calloc 几乎没有区别用于整个程序的执行。

无论如何，首先要说明的是，内存分配都发生在内存映射区域而不是堆中。为了验证这一点，我添加了一个快速的 n'dirty pause 以便您可以检查进程的内存映射 (/proc//maps)

现在对于您的问题，最后分配的带有 calloc 的数组似乎确实是在内存中分配的（未推迟）。由于 arr1 和 arr2 现在的行为完全相同（第一次迭代很慢，后续迭代更快）。Arr3 对于第一次迭代更快，因为内存分配得更早。使用 A 宏时，arr1 会从中受益。我的猜测是内核已经为最后一个 calloc 预先分配了内存中的数组。为什么？我不知道...我也只用一个数组对其进行了测试（所以我删除了所有出现的 arr2 和 arr3），然后我对 arr1 的所有 10 次迭代都有相同的时间（大致）。

malloc 和 mmap 的行为相同（结果未在下面显示），第一次迭代很慢，后续迭代对所有 3 个数组都更快。

注意：所有结果在各种 gcc 优化标志（-O0 到 -O3）上都是一致的，因此看起来行为的根源并非源自某种 gcc 优化。

注2：在 Ubuntu Precise Pangolin（内核 3.2）上测试运行，使用 GCC 4.6.3

```
#include <stdlib.h>
#include <stdio.h>
#include <sys/mman.h>

#include <time.h>

#define SIZE 500002816
#define ITERATION 10

#if defined(USE_MMAP)
#  define ALLOC(a, b) (mmap(NULL, a * b, PROT_READ | PROT_WRITE,  \
                          MAP_PRIVATE | MAP_ANONYMOUS, -1, 0))
#elif defined(USE_MALLOC)
#  define ALLOC(a, b) (malloc(b * a))
#elif defined(USE_CALLOC)
#  define ALLOC calloc
#else
#  error "No alloc routine specified"
#endif

int main() {
  clock_t start, finish, gstart, gfinish;
  start = clock();
  gstart = start;
#ifdef A
  unsigned int *arr1 = ALLOC(sizeof(unsigned int), SIZE);
  unsigned int *arr2 = ALLOC(sizeof(unsigned int), SIZE);
  unsigned int *arr3 = ALLOC(sizeof(unsigned int), SIZE);
#else
  unsigned int *arr3 = ALLOC(sizeof(unsigned int), SIZE);
  unsigned int *arr2 = ALLOC(sizeof(unsigned int), SIZE);
  unsigned int *arr1 = ALLOC(sizeof(unsigned int), SIZE);
#endif
  finish = clock();
  unsigned int i, j;
  double intermed, finalres;

  intermed = ((double)(finish - start))/CLOCKS_PER_SEC;
  printf("Time to create: %.2f\n", intermed);

  printf("arr1 addr: %p\narr2 addr: %p\narr3 addr: %p\n", arr1, arr2, arr3);

  finalres = 0;
  for (j = 0; j < ITERATION; j++)
  {
    start = clock();
    {
      for (i = 0; i < SIZE; i++)
        arr1[i] = (i + 13) * 5;
    }
    finish = clock();

    intermed = ((double)(finish - start))/CLOCKS_PER_SEC;
    finalres += intermed;
    printf("Time A: %.2f\n", intermed);
  }

  printf("Time A (average): %.2f\n", finalres/ITERATION);

  finalres = 0;
  for (j = 0; j < ITERATION; j++)
  {
    start = clock();
    {
      for (i = 0; i < SIZE; i++)
        arr2[i] = (i + 13) * 5;
    }
    finish = clock();

    intermed = ((double)(finish - start))/CLOCKS_PER_SEC;
    finalres += intermed;
    printf("Time B: %.2f\n", intermed);
  }

  printf("Time B (average): %.2f\n", finalres/ITERATION);

  finalres = 0;
  for (j = 0; j < ITERATION; j++)
  {
    start = clock();
    {
      for (i = 0; i < SIZE; i++)
        arr3[i] = (i + 13) * 5;
    }
    finish = clock();

    intermed = ((double)(finish - start))/CLOCKS_PER_SEC;
    finalres += intermed;
    printf("Time C: %.2f\n", intermed);
  }

  printf("Time C (average): %.2f\n", finalres/ITERATION);

  gfinish = clock();

  intermed = ((double)(gfinish - gstart))/CLOCKS_PER_SEC;
  printf("Global Time: %.2f\n", intermed);

  return 0;
} 
```

结果：

使用 USE_CALLOC

> ```
> Time to create: 0.13
> arr1 addr: 0x7fabcb4a6000
> arr2 addr: 0x7fabe917d000
> arr3 addr: 0x7fac06e54000
> Time A: 0.67
> Time A: 0.48
> ...
> Time A: 0.47
> Time A (average): 0.48
> Time B: 0.63
> Time B: 0.47
> ...
> Time B: 0.48
> Time B (average): 0.48
> Time C: 0.45
> ...
> Time C: 0.46
> Time C (average): 0.46 
> ```

使用 USE_CALLOC 和 A

> ```
> Time to create: 0.13
> arr1 addr: 0x7fc2fa206010
> arr2 addr: 0xx7fc2dc52e010
> arr3 addr: 0x7fc2be856010
> Time A: 0.44
> ...
> Time A: 0.43
> Time A (average): 0.45
> Time B: 0.65
> Time B: 0.47
> ...
> Time B: 0.46
> Time B (average): 0.48
> Time C: 0.65
> Time C: 0.48
> ...
> Time C: 0.45
> Time C (average): 0.48 
> ```

使用 USE_MMAP

> ```
> Time to create: 0.0
> arr1 addr: 0x7fe6332b7000
> arr2 addr: 0x7fe650f8e000
> arr3 addr: 0x7fe66ec65000
> Time A: 0.55
> Time A: 0.48
> ...
> Time A: 0.45
> Time A (average): 0.49
> Time B: 0.54
> Time B: 0.46
> ...
> Time B: 0.49
> Time B (average): 0.50
> Time C: 0.57
> ...
> Time C: 0.40
> Time C (average): 0.43 
> ```

# excel - 用stata循环填充输出向量

> ID：10096296
> 
> 赞同：2
> 
> 时间：2012-04-10T20:52:32.317
> 
> 标签：excel, loops, foreach, stata, percentile

例如，当您在 Stata 中取变量的百分位数时。

```
 *set directory
    cd"C:\Etc\Etc Etc\"
    *open data file
    use "dataset.dta",clear
    *get centiles
    centile var1, centile(1,5(5)95,99) 
```

有没有办法将生成的百分位表记录到 excel 中？百分位值存储在 r(c_#) 中，其中 # 表示您想要数据的百分位。但是我需要一个所有百分位值的向量，或多或少地出现在输出窗口中。

我尝试使用 foreach 循环将百分位数放入向量中，如下所示：

```
 *Create column of centiles
    foreach i in r(centiles) {
    xx[1,`i']=r(c_`i')
    } 
```

没有成功。

谢谢

编辑：

从那以后，我发现这是可行的：

```
 matrix X = 0,0 
   forvalues i=1/21  { 
   matrix X = `i',round(r(c_`i'),.001)\ X
   } 
```

唯一的不便是 1) 我必须在输出中包含第一行 0,0，然后我将删除它。2）在这种情况下，我有 21 个百分位数，但如果我想更改它，最好自动化百分位数，例如这样的：

```
 forvalues i=1/r(n_cent)  { 
   matrix X = `i',round(r(c_`i'),.001)\ X
   } 
```

但是“i=1/r(n_cent)”是无效的语法。任何关于我如何克服这两个不便的建议将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T07:20:17.143

您可以使用以下语法。

加载一些数据并计算百分位数。

```
sysuse auto, clear
centile price, centile(1,5(5)95,99) 
```

应该包含结果的矩阵必须被初始化。这个矩阵称为`X`。它的行数与通过`centile`命令请求的百分位数一样多。它有两列。在这个阶段，矩阵用零填充。

```
matrix X = J(`=wordcount("`r(centiles)'")', 2, 0) 
```

以下循环逐步执行命令的结果，并用适当的结果`centile`替换矩阵中的零。`X`矩阵的第一列包含百分位数 (1, 5, 10, ...)，第二列包含结果

```
forvalues i = 1 / `=wordcount("`r(centiles)'")' {
    local cent: word `i' of `r(centiles)'
    matrix X[`i', 1] = `cent'
    matrix X[`i', 2] = r(c_`i')
} 
```

打印结果：

```
matrix list X 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T09:04:39.997

如果您正在使用`round()`，您可能做错了什么。故意丢失数据精度的原因很少；您始终可以使用`format`这种或另一种方式显示任意数量的数字（应用于数据，或作为 or 的选项`list`）`matrix list`。

1.  我编写`epctile`了返回百分位数作为估计命令的命令，即在`e(b)`向量中。这可以立即使用；`findit epctile`去下载。

2.  您可以按如下方式修改您的提案：

    ```
    local thenumlist 1, 5(5)95, 99
    centile variable, centile(`thenumlist')
    forvalues i=1/`=r(n_cent)'  { 
      matrix X = nullmat(X) \ r(c_`i')
    }
    numlist "`thenumlist'"
    matrix rownames X = `r(numlist)'
    matrix list X, format(%9.3f) 
    ```

# php - 使用对象而不是 GET

> ID：10096297
> 
> 赞同：1
> 
> 时间：2012-04-10T20:52:36.603
> 
> 标签：php, mysql, object, hyperlink

我正在使用 PHP 以允许用户删除内容，并且我希望“删除”以文本（如超链接）而不是提交按钮显示，但是，我不想使用实际的超链接。想想在大多数论坛中，当您删除评论时，通常会出现“删除评论”而不是提交按钮的文字。

在这种情况下，我想避免使用 GET ，因为它用于删除内容。我了解 OOP，所以我不需要解释它是如何工作的。

有没有办法用“删除”（不是按钮）的文本来做到这一点，然后使用对象将其传递给函数，而不是使用超链接来传递值？

这是我目前用来显示链接的内容，但是，我使用 get 来检索值，我真的很想避免这种情况。

```
<td><a href="profile.php?userid='<? echo $request['userid']; ?>'&action=delete"><? echo $request['username']; ?></a></td>

<td><a href="profile.php?userid='.    $requestID['userID'].'">Delete</a></td> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T20:56:51.897

由于`GET`是获取/检索数据，您应该使用**POST**`POST`更新到服务器（即删除记录）。

 ***   您可以使用提交按钮，并将其样式设置为看起来像 CSS 中的链接（最好）
*   或者您可以使用实际的超链接并使用 JavaScript/jQuery 将其提交给服务器（不理想）。

如果您必须使用链接，我建议您使用第一个。但是，使用 s 并没有错`<button>`：

*   从语义上讲，超链接应该将用户引导到一个不同的页面，一个按钮应该让某事发生。
*   在这种情况下，使用按钮而不是链接更有意义。

请考虑一下。**

# xcode - cocos2d - CCActionTween 不起作用

> ID：10096298
> 
> 赞同：1
> 
> 时间：2012-04-10T20:52:37.760
> 
> 标签：xcode, animation, path, cocos2d-iphone, action

我有roundPath和BoxPath，我想做：

`id modifyPath = [CCActionTween actionWithDuration:2 key:@"path" from:roundPath to:boxpath];` 但我有错误“'actionWithDuration:key:from:to:' 的参数 3 的不兼容类型我该如何解决这个问题？对不起我的英语我是法国人：/

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T09:04:17.823

我认为“路径”是 CGPoint 类型。在这种情况下，您不能使用 CCActionTween，因为它仅适用于内置数据类型，如 BOOL、char、int、float、double，但不适用于 C 结构。CGPoint 是一个 C 结构体，定义为 {float x; 浮动 y;}。

您也不能将 CCActionTween 与 path.x 和 path.y 一起使用。那是因为你不能在 Objective-C 中这样做：

```
node.position.x = 10; // ERROR 
```

但是，您可以子类化并添加两个浮点属性 myX 和 myY。您可以分别对两者进行补间并将它们分配给每帧更新方法中的位置：

```
self.position = CGPointMake(myX, myY); 
```

# jquery - 结合 LazyLoad 和 Jquery Masonry

> ID：10096300
> 
> 赞同：19
> 
> 时间：2012-04-10T20:52:41.220
> 
> 标签：jquery, jquery-masonry, lazy-loading

我一直在尝试将砌体和 moo 工具lazyload 拼凑在一起，但是它们似乎都不能很好地结合在一起，尽管这可能只是因为我在编码方面有点无用！

砌体工程在[这个页面上](http://www.lmcworldwide.com/test/images.php)。

但是，当我尝试将它与lazyload 放在一起时，它似乎完全搞砸了。有谁知道如何同时实现这两个插件？

我花了 6 天时间试图弄清楚，这是我最后的希望哈！

谢谢

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-05-03T15:51:56.193

最近，我必须为我的一个网站解决这个问题。我已经尝试了几种方法，它似乎工作。

**1.第一种方法：**

*   在物品上装载砌体
*   在所有图像上放置一个占位符并在它们上使用延迟加载
*   现在，当每个图像触发lazyload.load回调时，重新加载砌体->一系列砌体（'reload'）[用新图像更新了jsfiddle，更容易说明这一点]

[http://jsfiddle.net/7vEJM/8/](http://jsfiddle.net/7vEJM/8/)

```
var $container = $('#container');
$container.imagesLoaded(function(){
    $container.masonry({
        itemSelector: '.item',
        columnWidth: function(containerWidth){
            return containerWidth / 12;
        }
    });
    $('.item img').addClass('not-loaded');
    $('.item img.not-loaded').lazyload({
        effect: 'fadeIn',
        load: function() {
            // Disable trigger on this image
            $(this).removeClass("not-loaded");
            $container.masonry('reload');
        }
    });
    $('.item img.not-loaded').trigger('scroll');
}); 
```

这种方法很好，但也有一个缺点。网格布局可能不会保持不变，因为 masonry.reload() 的时间取决于每个图像的加载时间（即应该首先加载的那个可能只会稍后完成）

**2.第二种方法：** 看看像pinterest这样的网站，我认为它不遵循第一种方法，因为它们甚至在加载任何图像之前就已经安排了容器框，因此，我试图实现的是只显示具有相同的框比例作为图像。步骤是：

*   传递您的图像尺寸（只返回一个像 json `{image1: [300,400],image2: [400,500]}`）
*   使用 CSS 技巧使 div 框根据容器调整大小。[我在这里](https://stackoverflow.com/questions/1311068/scale-a-div-to-fit-in-window-but-preserve-aspect-ratio)找到了那个技巧
*   像往常一样延迟加载，从现在开始不需要触发任何重新加载，没有图像，盒子排列正确

[http://jsfiddle.net/nathando/s3KPn/4/](http://jsfiddle.net/nathando/s3KPn/4/)

```
var $container = $('#container');
$container.imagesLoaded(function(){
    $container.masonry({
        itemSelector: '.item',
        columnWidth: function(containerWidth){
            return containerWidth / 12;
        }
    });
    $('.item img').lazyload({
        effect: 'fadeIn'
    });
    $('.item img').trigger('scroll');
}); 
```

[编辑为第二种方法添加jsfiddle]

注意：

*   在这个小提琴中，我手动将每个图像的高度/宽度比放入 'padding-bottom: xxx%' 中，这应该从您的服务器代码中传入（请参阅步骤 1）
*   在边框中添加以使框可见
*   为了说明即使未加载图像也会排列这些框，请尝试取消注释并`/*display: none */` 评论`display: block``#container.fluid .item img`

干杯

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2015-01-04T20:06:51.170

我在其他相同问题的文章上发布了相同的答案。如果您有问题图像重叠，我在下面的网站上找到了解决方案，虽然它是日文的。

[http://www.webdesignleaves.com/wp/jquery/1340/](http://www.webdesignleaves.com/wp/jquery/1340/)

希望这会有所帮助。

重点是使用以下；

```
$('img.lazy').load(function(){ ... }) 
```

HTML

```
<div id="works_list">
<div class="work_item">
<img class="lazy" src="images/dummy.gif" data-original="images/works/thumb/001.jpg" alt="">
<p>title 1</p>  
</div><!-- end of .work_item-->
<div class="work_item">
<img class="lazy" src="images/dummy.gif" data-original="images/works/thumb/002.jpg" alt="">
<p>title 2</p>  
</div><!-- end of .work_item-->
 ....
</div><!-- end of #works_list --> 
```

jQuery

```
$("img.lazy").lazyload({
    effect: 'fadeIn',
    effectspeed: 1000,
    threshold: 200
});

$('img.lazy').load(function() {
    masonry_update();
});

function masonry_update() {     
    var $works_list = $('#works_list');
    $works_list.imagesLoaded(function(){
        $works_list.masonry({
            itemSelector: '.work_item',　
            isFitWidth: true,　
            columnWidth: 160
        });
    });
 } 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-02-08T09:52:43.593

softk5 答案对我不起作用，导致大部分浏览器冻结。这是我的以下代码，它对我有用。

```
jQuery(document).ready(function(){
    jQuery("img.lazy").lazyload({
        effect: 'fadeIn',
        effectspeed: 1000,
        threshold: 200,
        load:function(){
            var $container = jQuery('.is_masonry');
            $container.masonry({
            }).imagesLoaded(function() {   $container.masonry();  });

        }
    });

}); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-06-21T16:30:50.223

原因是 Masonry 需要知道图像的尺寸才能正确布置项目。然而，LazyLoad 会延迟加载图像，直到图像在视口中，这意味着图像将没有尺寸（或具有您设置为 img src 的虚拟/占位符图像的尺寸）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-06-03T21:13:32.733

也许有人也会有问题，希望有所帮助。

如果不修改插件，就不可能使其与 WordPress photoswipe-masonry 主题一起使用。

接下来与此修改有关，仅与砌体有关

a)lazyload 使用 data-original="xxx" 属性来设置图片 url。不是 src 。你需要放置一些占位符。可能是 1x1 像素，将在没有延迟加载的情况下加载。

b）这个占位符需要为将来的延迟加载图像覆盖所有空间，或者砌体将使所有图像作为延迟加载视图可见。这是因为在加载图像之前它的大小为零 0px x 0px 。并且所有图像在加载前都适合可见区域。Lazyload 将全部计数为可见并全部加载。

为未来的图像安排所有空间，您需要一组

样式=“宽度：xxpx；高度：xxpx；”

只有 width="xx" 和 height="xx" 是不够的

所以图像占位符变成：

```
<img src="http:..1x1px" data-original="http://real_image" style="width:xxpx;height:xxpx;"> 
```

然后应用延迟加载正常方式和砌体。以任何顺序。

重要 - 砌体将宽度更新为其列大小，但不是高度，因此如果您的列大小 = 50px，那么您需要计算占位符的高度

新高度 = 50 / 实际宽度 * 实际高度；

所以对于 WordPress 主题需要

```
$scaled_height =$options['thumbnail_width']/$full[1] * $full[2]; 
```

......

```
<img src="http://xxxx/1x1px.jpg" data-original='. $thumb[0] .' itemprop="thumbnail" alt="'.$image_description.'" style="width:'.$full[1].'px;height:'.$scaled_height.'px;" width="'.$full[1].'" height="'.$full[2].'"/> 
```

……

然后在 masonry init 下面添加新行

```
var reloading = false;
$.getScript('https://cdnjs.cloudflare.com/ajax/libs/jquery.lazyload/1.9.1/jquery.lazyload.min.js',function(){
  $('.msnry_item img').lazyload({
      effect: 'fadeIn',
      //container: container,
      threshold : 200,
      skip_invisible : false,
      failure_limit : 5,
      load: function() {
          if( ! reloading ) {
             reloading = true;
             setTimeout(function(){ 
                  container.masonry('reload');
                  reloading = false;
             }, 500);
         }
      }
  });
}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-09-03T11:12:49.403

**尝试在LazyLoad**的“ **callback_loaded** ”中重新使用“ **Masonry ”**

 ****```
var ll = new LazyLoad({
    elements_selector: "img[data-src]",
    callback_loaded() {
        masonry = new Masonry(grid, {
            itemSelector: '.img-selector',
        });
    }
}); 
```

进一步添加的代码如下

```
callback_loaded() {
    masonry = new Masonry(grid, {
        itemSelector: '.img-selector',
    });
} 
```****

# silverlight - HttpWebRequest.BeginGetResponse 在 Windows Phone 上导致 System.NotSupportedException

> ID：10096303
> 
> 赞同：0
> 
> 时间：2012-04-10T20:53:06.353
> 
> 标签：silverlight, windows-phone-7, httpwebrequest

我意识到之前[已经](https://stackoverflow.com/questions/4053197/httpwebrequest-leads-me-to-system-notsupportedexception) [提出](https://stackoverflow.com/questions/5432255/notsupportedexception-in-httpwebrequest-on-windows-phone-7) [过](https://stackoverflow.com/questions/4166222/httpwebrequest-endgetresponse-throws-a-notsupportedexception-in-windows-phone-7)类似的问题，但是所提供的解决方案都没有奏效。

检查从该`BeginGetResponse`方法返回的令牌，我发现那里引发了以下异常：

`'token.AsyncWaitHandle' threw an exception of type 'System.NotSupportedException'`

[这个](http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.begingetresponse(v=vs.95).aspx)页面告诉我这个异常意味着回调参数是空的，但是我正在传递回调 - 当我插入断点时，调试器会中断回调方法。但是`request`回调中的对象始终为空。`result`我可以在回调方法的对象中查看相同的异常细节。

我试过`new AsyncCallback(ProcessResponse)`打电话时使用`BeginGetResponse`

我试过添加`request.AllowReadStreamBuffering = true;`

我已经在模拟器和设备上尝试过这个，但都没有运气。

```
public static void GetQuakes(int numDays)
{
    HttpWebRequest request = (HttpWebRequest)WebRequest.Create("http://magma.geonet.org.nz/services/quake/geojson/quake?numberDays=" + numDays);
    // Examining this token reveals the exception.
    var token = request.BeginGetResponse(ProcessResponse, request);
}

static void ProcessResponse(IAsyncResult result)
{
    HttpWebRequest request = result.AsyncState as HttpWebRequest;
    if (request != null)
    {
        // do stuff...
    }
} 
```

所以我有点不知所措，不知道下一步该往哪里看。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T22:33:26.817

> “token.AsyncWaitHandle”引发了“System.NotSupportedException”类型的异常
> 
> 这个页面告诉我这个异常意味着回调参数是Nothing

您正在查看的文档[http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.begingetresponse%28v=vs.95%29.aspx](http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.begingetresponse%28v=vs.95%29.aspx)用于 BeginGetResponse。Silverlight 不使用 AsyncWaitHandle，并正确引发 NotSupportedException。您在检查时看到异常 System.NotSupportedException is for call to IAsyncResult.AsyncWaitHandle `token`。

IAsyncResult.AsyncWaitHandle 上的文档明确表示，是否创建等待句柄取决于 IAsyncResult 的实现[http://msdn.microsoft.com/en-us/library/system.iasyncresult.asyncwaithandle(v=vs.95 ).aspx](http://msdn.microsoft.com/en-us/library/system.iasyncresult.asyncwaithandle(v=vs.95).aspx)。担心这会让你走上错误的道路。

我认为**您需要描述**您所看到的实际问题。很高兴知道您调查了什么，但在这种情况下，它确实有助于解决问题。

当您在 if 语句中对其进行测试时，该代码应该可以工作并且 ProcessResponse 请求中的请求不应为空。我只是将您提供的代码复制到 Windows Phone 应用程序中，然后运行它没有任何问题。

# ruby-on-rails - 来自belongs_to关系的循环数据

> ID：10096306
> 
> 赞同：0
> 
> 时间：2012-04-10T20:53:20.363
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我有带公寓的房子（belongs_to house）。摘要显示了带有公寓的房子，其中包含一些信息作为简短描述和价格范围。我的代码是这个（工作正常）

```
- house.appartments.each do |a|
  %li
    %a.main_img
    = link_to image_tag(a.attachments.first.file.url(:thumb), :height=>"93px", :width=>"135px", :class => "box"), apartment_path(a)
    %br/
    = link_to "#{a.name}", apartment_path(a), :class => "link_homepage"
    Description: #{a.short_desc}
    Price range: #{a.price_range} 
```

我添加了一个新的模型价格，其中包含与公寓的 belongs_to 关系。在这个模型/数据库中，价格/租金数据存储在公寓中。

问题 - 我想要摘要中新价格模型/数据库表中的数据，而不是 a.price_range（公寓数据库表）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T23:59:33.403

如果我理解正确，您有一个名为类似的模型，它与该模型`House`有关联`Apartment`，然后与您制作的新模型相关联，称为类似`ModelPrice`？如果是这样的话...

我假设在您的新表中`ModelPrice`，您有一个列`apartment_id`或任何要命名的公寓 ID 列，以便设置与`Apartment`模型的关联。

你能做到`a.model_price.price`吗？

当然，每个对象的名称会根据新模型/表名称的实际名称和其中的价格列而改变。

# mysql - 建库流程管理

> ID：10096311
> 
> 赞同：5
> 
> 时间：2012-04-10T20:53:38.593
> 
> 标签：mysql, sql-server, database, oracle, database-design

存在哪些选项来管理数据库脚本并为数据库进行新开发：

例如，许多应用程序使用的数据库，并且有许多开发人员使用数据库，什么是保持数据库最新的最佳选择，以及将更改部署到生产的过程应该是什么

我看到两个选项：

1.  Microsoft Visual Studio 有一个数据库项目，因此所有数据库脚本都应添加到项目中，并且可以从 Visual Studio 重建数据库
2.  从备份还原数据库并仅将新脚本应用于数据库

还有哪些选择？我如何管理数据库开发，最佳实践是什么？我上面写的选项有什么优点和缺点？如何维护新的sql脚本？

我知道应该使用源代码控制系统，但是使用 DB 脚本并不像使用应用程序那么容易。

我相信这不会是通用的解决方案，但至少我对 DB 开发人员认为它是如何在贵公司实施的很感兴趣。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T21:03:02.483

目前我们使用 SVN 并有一个“UpgradeScripts”文件夹，所有开发人员都将他们的脚本提交到该文件夹​​。

每个脚本都有一个格式为 upg_yyyymmddhhmmss_ScriptName.sql 的生成前缀 - 因此，当它们被部署时，它们会以预定义的顺序运行；保持数据库一致。

这是通过以下 SQL 生成的，并通过预提交挂钩强制执行：

```
select 'upg_' + convert(varchar, SYSUTCDATETIME(), 112) 
    + replace(convert(varchar, SYSUTCDATETIME(), 8), ':', '') 
    + '-'  
    + 'MeaningfulScriptName' 
```

我们使用的另一个方便的技术是确保静态数据和非静态数据之间的区别是清晰的；所以在我们的数据库中有一个标准的“dbo”模式——它表示可以在环境之间改变的非静态数据，还有一个“静态”模式。此模式中的所有表都有静态 id，因此开发人员知道他们可以在枚举中使用它们并在脚本中引用 id。

如果您正在寻找更正式的东西，Red Gate 有一个名为[SQL Source Control](http://www.red-gate.com/products/sql-development/sql-source-control/)的实用程序。

或者您可以考虑使用[数据层应用程序框架](http://msdn.microsoft.com/en-us/library/ff381683(SQL.100).aspx)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-10T22:52:23.137

[Liquibase](http://www.liquibase.org/)是恕我直言最好的工具。它的方法非常简单，这也是它运行良好的原因之一。

您可以在网站上阅读它的工作原理，但基本上它会创建和管理一个简单的表，该表存储每个脚本的哈希以确定它是否已运行脚本。还有 pre-和 post- sql，你可以绕过条件......它几乎可以完成你想要或需要的一切。它还具有 Maven 集成，因此它可以无缝地成为您构建的一部分。

我在一个大型（8 个开发人员）项目中非常成功地使用了它，现在我不会使用其他任何东西。

而且它是免费的！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-10T22:43:12.007

我们使用[DBGhost](http://dbghost.com/)对数据库进行版本控制。创建当前数据库的脚本（连同源代码）存储在 TFS 中，然后使用 DBGhost 生成增量脚本以将环境升级到当前版本。DBGhost 还可以为任何静态/参考/代码数据创建增量脚本。

它需要从传统方法转变思想，但这是一个很棒的解决方案，我推荐的再多也不为过。虽然它是第 3 方产品，但它可以无缝融入我们的自动化构建和部署过程。

# java - Listview下的异步DoInBackground崩溃

> ID：10096315
> 
> 赞同：0
> 
> 时间：2012-04-10T20:53:48.337
> 
> 标签：java, android, multithreading, android-asynctask

我得到了一些 stackflower 的代码，由于某种原因，它使我的应用程序崩溃，我是 Async 的新手，我没有很多调试经验。我正在尝试通过 HttPost 下载数据，然后在一个简单的列表视图中列出数据。无论如何，这是代码和logcat：

代码：

```
public class ChatService extends ListActivity {
    /** Called when the activity is first created. */

    BufferedReader in = null;
    String data = null;
    List headlines;
    List links;
    String GotPass;
    ArrayAdapter adapter;
    String GotUname;
    public static final String PREFS_NAME ="MyPregs";
    private GetTask getTask;
    public ListView fList;

    @Override
    public void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
      getTask = new GetTask(); 
      getTask.execute();

      ArrayAdapter adapter = new ArrayAdapter(this,
              android.R.layout.simple_list_item_1, headlines);
    }

    public class GetTask extends AsyncTask<Void, Void, List> 
    {
      @Override
      protected List doInBackground(Void... params) {
        return load();
      }      

      @Override
      protected void onPostExecute(List result) {

        fList.setAdapter(adapter);
      }
    }

    private List load() { 
      // get your data from http
      // add to your list, probably you can use model.
        BufferedReader in = null;
        String data = null;
        Bundle gotData = getIntent().getExtras();
        if(gotData != null)
        {
            GotPass = gotData.getString("key!");
            GotUname = gotData.getString("key!!");
        }
        SharedPreferences settings = getSharedPreferences(PREFS_NAME, 0);
        String username = settings.getString("key1", null);
        String password = settings.getString("key2", null);
         if(username.equals("irock97")) {
            Toast.makeText(getApplicationContext(), "yaya", Toast.LENGTH_SHORT).show();
        } else {
            Toast.makeText(getApplicationContext(), "fail", Toast.LENGTH_SHORT).show();
        }

        HttpClient httpclient = new DefaultHttpClient();

        /* login.php returns true if username and password is equal to saranga */
        HttpPost httppost = new HttpPost("http://gta5news.com/login.php");

        try {
            // Add user name and password
            List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(2);
            nameValuePairs.add(new BasicNameValuePair("username", username));
            nameValuePairs.add(new BasicNameValuePair("password", password));
            httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));

            // Execute HTTP Post Request
            Log.w("HttpPost", "Execute HTTP Post Request");
            HttpResponse response = httpclient.execute(httppost);
            in = new BufferedReader(new InputStreamReader(response.getEntity()
                    .getContent()));
            StringBuffer sb = new StringBuffer("");
            String l ="";
            String nl ="";
            while ((l =in.readLine()) !=null) {
                sb.append(l + nl);  
            }
            in.close();
             data = sb.toString();

             ListView lv = getListView();
             lv.setTextFilterEnabled(true);

            headlines.add(data);

            ArrayAdapter adapter = new ArrayAdapter(this,
                    android.R.layout.simple_list_item_1, headlines);

            setListAdapter(adapter);

        } catch (ClientProtocolException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }
        return headlines;
    }

    private StringBuilder inputStreamToString1(InputStream is) {
        String line = "";
        StringBuilder total = new StringBuilder();
        // Wrap a BufferedReader around the InputStream
        BufferedReader rd = new BufferedReader(new InputStreamReader(is));
        // Read response until the end
        try {
            while ((line = rd.readLine()) != null) {
                total.append(line);
            }
        } catch (IOException e) {
            e.printStackTrace();
        }
        // Return full string
        return total;
    }

    } 
```

日志猫：

```
04-10 20:47:18.526: E/AndroidRuntime(574): FATAL EXCEPTION: AsyncTask #1
04-10 20:47:18.526: E/AndroidRuntime(574): java.lang.RuntimeException: An error occured while executing doInBackground()
04-10 20:47:18.526: E/AndroidRuntime(574):  at android.os.AsyncTask$3.done(AsyncTask.java:200)
04-10 20:47:18.526: E/AndroidRuntime(574):  at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:273)
04-10 20:47:18.526: E/AndroidRuntime(574):  at java.util.concurrent.FutureTask.setException(FutureTask.java:124)
04-10 20:47:18.526: E/AndroidRuntime(574):  at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:307)
04-10 20:47:18.526: E/AndroidRuntime(574):  at java.util.concurrent.FutureTask.run(FutureTask.java:137)
04-10 20:47:18.526: E/AndroidRuntime(574):  at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1068)
04-10 20:47:18.526: E/AndroidRuntime(574):  at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:561)
04-10 20:47:18.526: E/AndroidRuntime(574):  at java.lang.Thread.run(Thread.java:1096)
04-10 20:47:18.526: E/AndroidRuntime(574): Caused by: java.lang.RuntimeException: Can't create handler inside thread that has not called Looper.prepare()
04-10 20:47:18.526: E/AndroidRuntime(574):  at android.os.Handler.<init>(Handler.java:121)
04-10 20:47:18.526: E/AndroidRuntime(574):  at android.widget.Toast.<init>(Toast.java:68)
04-10 20:47:18.526: E/AndroidRuntime(574):  at android.widget.Toast.makeText(Toast.java:231)
04-10 20:47:18.526: E/AndroidRuntime(574):  at com.gta5news.bananaphone.ChatService.load(ChatService.java:97)
04-10 20:47:18.526: E/AndroidRuntime(574):  at com.gta5news.bananaphone.ChatService.access$0(ChatService.java:82)
04-10 20:47:18.526: E/AndroidRuntime(574):  at com.gta5news.bananaphone.ChatService$GetTask.doInBackground(ChatService.java:71)
04-10 20:47:18.526: E/AndroidRuntime(574):  at com.gta5news.bananaphone.ChatService$GetTask.doInBackground(ChatService.java:1)
04-10 20:47:18.526: E/AndroidRuntime(574):  at android.os.AsyncTask$2.call(AsyncTask.java:185)
04-10 20:47:18.526: E/AndroidRuntime(574):  at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T20:58:54.650

```
You are calling Toast in load() function which is in DoInBackground. 
Toast messages touches UI thread which you can't do that.

This line makes it crash.
Toast.makeText(getApplicationContext(), "yaya", Toast.LENGTH_SHORT).show();

Change you load function signature:
This is your function:
private List load() {

don't return a list, create a modal container and return it like:
private ReturnModel load() {

and create a modal like this, and set and get this modal:
and in your load function,fill this returnmodal, set passworderror true or false instead of toast message, and onpostexecute function, check password error and do your toast message there.

package com.nesim.test;

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;
import java.util.ArrayList;
import java.util.List;

import org.apache.http.HttpResponse;
import org.apache.http.NameValuePair;
import org.apache.http.client.ClientProtocolException;
import org.apache.http.client.HttpClient;
import org.apache.http.client.entity.UrlEncodedFormEntity;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.impl.client.DefaultHttpClient;
import org.apache.http.message.BasicNameValuePair;

import android.app.ListActivity;
import android.content.SharedPreferences;
import android.os.AsyncTask;
import android.os.Bundle;
import android.util.Log;
import android.widget.ArrayAdapter;
import android.widget.ListView;
import android.widget.Toast;

public class ChatService extends ListActivity {
  String GotPass;
  String GotUname;
  public static final String PREFS_NAME = "MyPregs";
  private GetTask getTask;

  @Override
  public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    getTask = new GetTask();
    getTask.execute();
  }

  public class GetTask extends AsyncTask<Void, Void, ReturnModel> {
    @Override
    protected ReturnModel doInBackground(Void... params) {
      return load();
    }

    @Override
    protected void onPostExecute(ReturnModel result) {

      if(result.passworderror == true)
      {
        Toast.makeText(getApplicationContext(), "fail", Toast.LENGTH_SHORT).show();
      }
      else
      {
        Toast.makeText(getApplicationContext(), "yaya", Toast.LENGTH_SHORT).show();

        ListView lv = getListView();
        lv.setTextFilterEnabled(true);

        ArrayAdapter<String> adapter = new ArrayAdapter<String>(getApplicationContext(), android.R.layout.simple_list_item_1, result.getheadlines());
        setListAdapter(adapter);
      }
    }
  }

  private ReturnModel load() {
    ReturnModel returnModel = new ReturnModel();

    BufferedReader in = null;
    String data = null;
    Bundle gotData = getIntent().getExtras();
    if (gotData != null) {
      GotPass = gotData.getString("key!");
      GotUname = gotData.getString("key!!");
    }

    SharedPreferences settings = getSharedPreferences(PREFS_NAME, 0);
    String username = settings.getString("key1", null);
    String password = settings.getString("key2", null);
    // username = "irock97"; // unremark to test like you got username from prefs..
    if (username != null  && username.equals("irock97")) {
      returnModel.setPassworderror(false);
    }
    else 
    {
      returnModel.setPassworderror(true);
      return returnModel;
    }

    HttpClient httpclient = new DefaultHttpClient();

    /* login.php returns true if username and password is equal to saranga */
    HttpPost httppost = new HttpPost("http://gta5news.com/login.php");

    try {
      // Add user name and password
      List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(2);
      nameValuePairs.add(new BasicNameValuePair("username", username));
      nameValuePairs.add(new BasicNameValuePair("password", password));
      httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));

      // Execute HTTP Post Request
      Log.w("HttpPost", "Execute HTTP Post Request");
      HttpResponse response = httpclient.execute(httppost);
      in = new BufferedReader(new InputStreamReader(response.getEntity().getContent()));
      StringBuffer sb = new StringBuffer("");
      String l = "";
      String nl = "";
      while ((l = in.readLine()) != null) {
        sb.append(l + nl);
      }
      in.close();
      data = sb.toString();

      List<String> headlines = new ArrayList<String>();
      headlines.add(data);
      returnModel.setheadlines(headlines);
    }
    catch (ClientProtocolException e) {
      e.printStackTrace();
    }
    catch (IOException e) {
      e.printStackTrace();
    }

    return returnModel;
  }

  public class ReturnModel {
    private List<String> headlines;
    private boolean passworderror;

    public List<String> getheadlines() {
      return headlines;
    }

    public void setheadlines(List<String> headlines) {
      this.headlines = headlines;
    }

    public boolean getPassworderror() {
      return passworderror;
    }

    public void setPassworderror(boolean passworderror) {
      this.passworderror = passworderror;
    }
  }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T20:58:44.380

```
Caused by: java.lang.RuntimeException: Can't create handler inside thread that has not called Looper.prepare() 
```

在 doInbackground() 中调用 Looper.Prepare()

编辑：还请确保您在 UI 线程上运行 Toast，正如其他人所指出的那样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T20:59:36.433

当您尝试在 UI 线程之外修改 UI 时，通常会发生此错误。您看到的错误是由`Toast.makeText()`调用引起的。您可以将其重写为：

```
runOnUiThread(new Runnable() {
    public void run() {
        Toast.makeText( /* etc */).show();
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-10T21:01:21.993

您`Toast.makeText`不在主 UI 线程中调用。

正如堆栈跟踪中所写：

无法在未调用 Looper.prepare() 的线程内创建处理程序。在内部，Toast.makeText 正在创建自己使用的处理程序。

如果这是出于测试目的，您最好使用 Log.v 或类似的。

如果您真的想制作 Toasts，请尝试使用 runOnUIThread()，或者更好：

> 发布进度（...）；

和

> onProgressUpdate()

可从 AsyncTasks 获得。

# ruby - 带有欧元符号的 Ruby WriteExcel number_format

> ID：10096324
> 
> 赞同：1
> 
> 时间：2012-04-10T20:54:34.983
> 
> 标签：ruby, spreadsheet

我正在尝试以如下数字格式添加欧元符号：

```
workbook.add_format(:num_format => "[$€-2] #,##0.00") 
```

它错误：

```
'store_num_format': Uneven number of bytes in Unicode font name 
```

文档字体是`Arial`默认的。我可以将其更改为美元符号并且它可以工作。

```
workbook.add_format(:num_format => "[$$-409]#,##0.00") 
```

有人在让欧元符号出现在 WriteExcel 中时遇到问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T14:20:55.163

这并不能直接回答您的问题，但您确实应该考虑查看[axlsx](https://github.com/randym/axlsx)。它可以正确处理字符串编码并提供更好的 API。

例子：

```
# encoding: UTF-8
require 'axlsx'
p = Axlsx::Package.new
wb = p.workbook

euro = wb.styles.add_style(:format_code => "[$€-2] #,##0.00")

wb.add_worksheet do |sheet|
  100.times do |i|
    sheet.add_row [100*i], :style => euro
  end
end

p.serialize '/tmp/test.xlsx' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T09:57:56.247

该语法应该可以工作，（它可以在从中移植的 Perl 模块中工作），但是其中一个子类中有一个错误。

我会报告的。

同时，您可以尝试使用同一作者的[write_xlsx](http://rubygems.org/gems/write_xlsx) gem，它是 writeexcel 的 API 兼容替代品，但它针对 XLSX 文件格式。

更新 1：[报告的问题](https://github.com/cxn03651/writeexcel/issues/19)。

更新 2：[问题已修复](https://github.com/cxn03651/writeexcel/issues/19)。

# python - Finding the roots of an implicit function with Python

> ID：10096326
> 
> 赞同：1
> 
> 时间：2012-04-10T20:54:51.983
> 
> 标签：python, algorithm, math, numerical-methods

I am trying to solve numerically the following implicit equation, using Python:

```
y*sin(c)+sin(y*c)=0 
```

where `c` is a constant. How would you suggest me to do that? I implemented the classical Newton-Raphson's method, but it doesn't seem to converge.

**EDIT:**

Here is the code:

```
f = open('results.dat','w')

import math

alpha = input('Define the alpha angle: ')

print >> f, 'alpha =', alpha

lambda_0 = input('Define an initial value: ')

print >> f, 'y_0 = ', y_0

gamma = math.pi - math.radians(alpha)

# def f(x,y):
#   p = 2.0 * x
#   t = p * y
#   val  = t * math.cos(t) - math.sin(t)
#   val /= (p * math.cos(t) + math.sin(p))
#   return val

toll = 1e-12

itmax = 50

diff = 1.0

it = 0

while diff > toll and it <= itmax:
    p = 2.0 * gamma
    t = p * y_0
    y_1  = t * math.cos(t) - math.sin(t)
    y_1 /= (p * math.cos(t) + math.sin(p))

    print >> f, 'p = ', p

    print >> f, 't = ', t

    print >> f, 'y at iteration ', it, ' = ', y

    diff = abs(y - y_0)
    y_0 = y
    it += 1

    print >> f, 'diff = ', diff

    print >> f, 'y_0 = ', y_0

    print >> f, 'it = ', it

f.close() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T08:19:43.030

这是您的解决方案： y=0

也许您的意思是非零解决方案？或者是其他东西？

编辑：添加一些更有用的东西

## 转换为更好的形式

假设您需要第一个积极的解决方案，您可以执行以下操作：

变换坐标使用`z=y*c`which 给出方程：

```
 A*z = sin(z) 
```

哪里`A = -sin(c)/c`。

这是确定通过斜率 A 原点的直线与正弦曲线的交点。

如果你画出这个图表，你会发现`|A| >= 1`只有`z=0`解决方案。

让你的方法收敛到正确的根的部分问题是选择根附近的起始值。在这种情况下，我们可以近似这些根。

## 临界斜率情况 (|A|~1)

对于`|A|`接近 1，我们可以看到在 0 附近会有一个正解和负解。我们可以使用正弦的低阶泰勒级数来近似这些解。

```
A*z = z - z^3/6 + ... 
```

对此的近似解是 z=0 `z=R`，`z=-R`其中`R=sqrt( 6 (1-A) )`. 这表明，对于`|A|`1 附近，数值估计的良好起点是：

```
y=(1/c) sqrt( (6/c)( 1 + sin(c) ) ) 
```

## 小坡度情况 ( |A|~0 )

对于小 A，我们期望接近 的解`pi`。在这种情况下，我们对变量进行了进一步的更改`z=p+pi`。

```
 A (p + pi) = sin( p + pi ) = -sin(p) 
```

再次扩大罪给我们：

```
A p  + A pi = -p + ... 
```

这给出了一个近似解：

```
p = - A pi / (A+1) 
```

这简化为

```
z = pi/(A+1) 
```

这意味着我们应该寻找一个起点

```
y = pi/(c(A+1)) 
```

## 使用近似值

我可能会通过使用线性插值混合这两个值来选择一个起点。

您也可以在`A = 2/pi`“中间”值附近进行类似的扩展，并在线性插值中使用三个点。

从这些 apprimxations 开始可能足以让牛顿法收敛到所需的值。但是，如果您确实需要确保收敛到正确的根，您可能需要放弃 Newton-Raphson 并将这些值用作割线或二等分法的起点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T21:16:53.553

If Newton raphson is not working, perhaps you should try something simple like [Bisection](https://en.wikipedia.org/wiki/Bisection_method) . Time complexity is still in the order of O(n) where n is the number of bits of precision.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-10T21:02:45.813

[这](http://www.wolframalpha.com/input/?i=y%2asin%28c%29%2Bsin%28y%2ac%29%3D0+where+c%3D8)是随机 c (8) 的曲线。

据我所知，它有无限的解决方案，所以找到一个不会太难。看一下写得很好的 Raphson-Newton 的 scipy （你的代码可能是错误的）。看这里：[http ://docs.scipy.org/doc/scipy/reference/generated/scipy.optimize.newton.html](http://docs.scipy.org/doc/scipy/reference/generated/scipy.optimize.newton.html)

# linux - Overwriting "Print Screen" actions in linux without administrative rights

> ID：10096327
> 
> 赞同：0
> 
> 时间：2012-04-10T20:55:13.887
> 
> 标签：linux, screenshot, x11, keyboard-events, printscreen

## Disclaimer:

I am a bit of a Linux noob :(

## Problem:

I have an interesting problem that I could use some help with. Essentially, I want to overwrite the default actions for the "Print Screen" button in Linux. My reasons for doing so are that I have a homemade graphics card running attached to the computer and I'm trying to make a utility where I can capture what it is outputting to a separate monitor and send it back to the "host" computer. For purposes here, I only want to know: **How can I execute a script upon pressing the Print Screen button?** Note that I cannot install xbindkeys or any other software. Ideally I would like to be able to run a script to enable this behavior.

## Current work-around:

Currently, I have a .bashrc script:

```
 #!/bin/bash
    export PATH=/home/username/bin:$PATH 
```

In the **/home/username/bin** folder I have a script **"gnome-screenshot"** that, for now, just performs some arbitrary task (it actually does this: **"cat /usr/share/icons/*/* > /dev/dsp"** -- try it! It's fun!).

I am working on school computers, so I first CTRL-ALT-F5 to open a terminal login, login, then source .bashrc. I then startx -- :1 to start a new X session. Now, if I hit the PrintScreen button, it uses my gnome-screenshot, not the default screencapture program.

**Is there anyway to do this without all of the restarting X? In short, is there a way to source my .bashrc script, or otherwise modify my PATH variable, *before or while* I login?**

## Another Approach:

I also tried, briefly, to xmodmap and the keycode to execute a script, but couldn't figure out how to tie them together. I know the keycode (111) but can't figure out how to run a script on press. I believe it might be possible to make a sort of binding using this but can't figure out how.

## Help!

I'd really appreciate some help or comments!

## (Edit): Added Details About Distribution:

cat /etc/redhat-release tells me:

Red Hat Enterprise Linux Client release 5.8 (Tikanga)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T21:01:31.083

`xmodmap`不是您想要的工具；它不能将键绑定到程序，它将物理键码绑定到逻辑键符。 [`XGrabKey(3)`](http://tronche.com/gui/x/xlib/input/XGrabKey.html)就是你要找的。

在启动 X 会话时读取您的 shell 点文件取决于您使用的确切操作系统和桌面环境（包括版本；即使只考虑带有库存桌面的不同 Ubuntu 版本，您也可能需要使用 4 或 5 种不同的方式）。

# jquery - jQuery Slider 中的 HTML/CSS3 Border-Radius 问题

> ID：10096330
> 
> 赞同：0
> 
> 时间：2012-04-10T20:55:17.400
> 
> 标签：jquery, html, css

我在内容滑块中遇到问题，当我滚动（通过单击 1、2、3、4、5-NAV）时，内容未正确显示在角落中。我使用了border-radius CSS，但在动画期间它不起作用。

看这里：

[http://optimaww.com/agendabe/](http://optimaww.com/agendabe/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T21:04:04.717

问题的一部分是从其父元素中移除`background:white`并将`.slide_01_text`其提供给它的父元素。现在你仍然需要处理图像。尝试将图像用作 a`background-image`并提供与其父级`<li>`相同的图像。`border-radius`那应该这样做。

# xml - 使用 ANT 替换整个 XML 标记

> ID：10096332
> 
> 赞同：2
> 
> 时间：2012-04-10T20:55:58.913
> 
> 标签：xml, ant

[PhoneGap Build](http://build.phonegap.com)提供了一项服务（目前在测试期间免费），他们获取您的 HTML+JS+CSS 源代码，以及用于配置构建选项 (config.xml) 的 XML 文件，并为所有支持的平台（iOS、 Android、Blackberry、Symbian、WebOS），这是一个巨大的节省时间，并为我节省了大量的头痛药物费用。

不幸的是，[外部网站链接的工作方式存在不一致的行为](http://community.phonegap.com/nitobi/topics/make_links_use_external_broswer_consistently)：

> 目前为了在外部浏览器中打开链接，需要将不同的代码上传到 PhoneGap Build。对于 iOS，域必须列入白名单，而对于 Android，域必须不列入。
> 
> 您可以通过向访问标签添加一个属性来使其保持一致，例如 includeForAndroid="false"，它不会在 Android 上包含访问标签内容，这样链接就可以在外部浏览器中打开，就像在 iOS 上一样。

[Config.xml 文档](https://build.phonegap.com/docs/config-xml#access)；这是[一篇相关的博客文章](https://build.phonegap.com/blog/access-tags)。

虽然员工提出了修复建议，但尚未在产品中制作和发布：

> 我们希望在 Cordova 开源项目中解决这个问题：与此同时，对于 PhoneGap Build，我正在考虑这样的事情：
> 
> ```
> <access origin="*" onlyInBrowser="true" /> 
> ```
> 
> 这将不包括 Android 上的标签，但会在 iOS 上。

在进行此更改并在产品中可用之前，解决方法是制作两个我将上传的 zip 文件：一个用于 Android（不带访问标签），另一个用于 iOS（带访问标签）。不理想，但它是一致的应用程序行为必须做的。

我已经在使用 ANT 来自动化这个项目中的许多任务，所以如果 ANT 也可以为我完成 config.xml 更新，那将是理想的选择。

作为参考，这是我构建两个 zip 的 ANT 代码：

```
<target name="BUILD-ZIP" depends="verify-using-minified-js,prepare-for-build">

    <tstamp>
        <format property="build.tstamp" pattern="yyyy-MM-dd__HH-mm-ss" />
    </tstamp>

    <antcall target="zip-ios">
        <param name="tstamp" value="${build.tstamp}" />
    </antcall>

    <!-- build android second so that we can just remove the access tags -->
    <antcall target="zip-android">
        <param name="tstamp" value="${build.tstamp}" />
    </antcall>

</target>

<target name="zip-ios">
    <zip destfile="${dir.pkg.phonegap}${tstamp}-apple.zip">
        <zipfileset dir="${dir.pkg.tmp}">
            <exclude name="build.xml" />
            <exclude name="build.properties" />
            <exclude name="settings.xml" />
            <exclude name=".project" />
            <exclude name="**/*.psd" />
            <exclude name="assets/js/app.js" />
            <exclude name="assets/js/cordova-1.5.0.js" />
        </zipfileset>
    </zip>
</target>

<target name="zip-android">

    <!-- before building android zip, get rid of the <access> tags -->

    <zip destfile="${dir.pkg.phonegap}${tstamp}-android.zip">
        <zipfileset dir="${dir.pkg.tmp}">
            <exclude name="build.xml" />
            <exclude name="build.properties" />
            <exclude name="settings.xml" />
            <exclude name=".project" />
            <exclude name="**/*.psd" />
            <exclude name="assets/js/app.js" />
            <exclude name="assets/js/cordova-1.5.0.js" />
        </zipfileset>
    </zip>
</target>

<target name="prepare-for-build">

    <!-- increment build number -->
    <propertyfile file="build.properties">
        <entry key="version.build.number" type="int" operation="+" default="1"/>
    </propertyfile>
    <property file="build.properties"/>
    <echo message="BUILD NUMBER: ${version.build.number}"/>

    <delete includeemptydirs="true" verbose="false">
        <fileset dir="${dir.pkg.tmp}" includes="**/*"/>
    </delete>
    <filter token="BUILD_NUMBER" value="${version.build.number}" />
    <filter token="VERSION_MAJOR" value="${version.major}" />
    <filter token="VERSION_MINOR" value="${version.minor}" />
    <copy todir="${dir.pkg.tmp}" verbose="true" overwrite="true" filtering="true">
        <fileset dir="${dir.dev}" includes="**/*" />
    </copy>

</target> 
```

目标中有一条评论`zip-android`：

```
<!-- before building android zip, get rid of the <access> tags --> 
```

这就是我想做替换的地方。我已经尝试使用该`<filter>`任务以及`<replace>`and `<replaceRegExp>`，但我似乎无法找到一种方法来做到这一点，这一切都归结为我需要替换字符串的事实：`<access ... />`这些替换方法似乎都没有允许`<`或`>`在令牌/匹配/等属性中。我试过使用 CDATA，但也无法正常工作。

我最接近的，因为 ANT 没有抛出任何错误，是这样的：

```
<replace file="${dir.pkg.tmp}config.xml" failOnNoReplacements="true">
    <replacetoken>
        <![CDATA[<access origin="http://example.com" subdomains="true" />]]>
    </replacetoken>
</replace> 
```

理论上，这会将指定的`<access ... />`标记替换为空字符串，[因为我省略了`value`属性](http://ant.apache.org/manual/Tasks/replace.html)。

不幸的是，它失败了，因为`failOnNoReplacements`属性和事实，无论出于何种原因，它都没有做任何替换。

这可能吗？如果是这样，我做错了什么？！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-08-25T01:25:52.060

如果您在令牌和值中对 XML 字符串的元素进行编码，则 Ant 替换任务将起作用......例如：

在 config.xml

```
 <option name="some.unwanted.configuration" /> 
```

在 build.xml

```
 <replace file="${build.dir}/config.xml"
        token="&lt;option name=&quot;some.unwanted.configuration&quot; /&gt;" 
        value="&lt;!-- unwanted configuration removed --&gt;"
    /> 
```

结果是

```
 <!-- unwanted configuration removed --> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T15:11:14.143

哈，我设法提出了一个解决尖括号阻塞的解决方案。

在 config.xml 中：

```
<!--access_tag1_here--> 
```

在 build.xml 中：

```
<replace 
    file="${dir.pkg.tmp}config.xml" 
    failOnNoReplacements="true"
    token="!--access_tag1_here--" 
    value="access origin='http://example.com' subdomains='true' /"
    /> 
```

这会将注释转换为必要的访问标记。

我切换了我的 zip 顺序，以便 Android 现在先行，而评论仍然是评论，然后 iOS zip 进程插入访问标签。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T20:49:50.497

在处理 xml 时，我推荐[xmltask](http://www.oopsconsultancy.com/software/xmltask/)。
对于你的需求看：[xml任务手册替换](http://www.oopsconsultancy.com/software/xmltask/#usage.replace)
一点Xpath知识会派上用场的，看：http:
[//zvon.org/xxl/XPathTutorial/](http://zvon.org/xxl/XPathTutorial/)
[http://www.w3schools.com/xpath/](http://www.w3schools.com/xpath/)

# powershell - Powershell's Invoke-Command won't take in a variable for -ComputerName parameter?

> ID：10096336
> 
> 赞同：6
> 
> 时间：2012-04-10T20:56:10.277
> 
> 标签：powershell, powershell-2.0, powershell-remoting

I'm pulling my hair out here, because I just can't seem to get this to work, and I can't figure out how to google this issue. I'm running Powershell 2.0\. Here's my script:

```
$computer_names = "server1,server2"
Write-Output "Invoke-Command -ComputerName $computer_names -ScriptBlock { 
    Get-WmiObject -Class Win32_LogicalDisk | 
    sort deviceid | 
    Format-Table -AutoSize deviceid, freespace 
}"
Invoke-Command -ComputerName $computer_names -ScriptBlock { 
    Get-WmiObject -Class Win32_LogicalDisk | 
    sort deviceid | 
    Format-Table -AutoSize deviceid, freespace 
} 
```

The last command gives the error:

```
Invoke-Command : One or more computer names is not valid. If you are trying to 
pass a Uri, use the -ConnectionUri parameter or pass Uri objects instead of 
strings. 
```

But when I copy the output of the Write-Output command to the shell and run that, it works just fine. How can I cast the string variable to something that Invoke-Command will accept? Thanks in advance!

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-10T21:15:17.787

Jamey 和 user983965 是正确的，因为您的声明是错误的。但是`foreach`，这里不是强制性的。如果你只是像这样修复你的数组声明，它将起作用：

```
$computer_names = "server1","server2"
Invoke-Command -ComputerName $computer_names -ScriptBlock { 
    Get-WmiObject -Class Win32_LogicalDisk | 
    sort deviceid | 
    Format-Table -AutoSize deviceid, freespace 
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-10T21:01:47.380

您错误地声明了您的数组。在字符串之间放置一个逗号并将其通过管道传递给 for-each，例如：

```
$computer_names = "server1", "server2";

$computer_names | %{
   Write-Output "Invoke-Command -ComputerName $_ -ScriptBlock {

    ...snip 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-01-15T21:41:18.467

如果您也从活动目录中获取一组计算机 - 像这样：

$computers = Get-ADComputer -filter {whatever}

确保你记得选择/展开结果..像这样：

$Computers= 获取 ADComputer -filter * | Select-Object -ExpandProperty 名称

然后...

调用命令 -ComputerName $Computers -ScriptBlock {Do Stuff}

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-10T21:02:09.513

你有没有尝试过：

```
$computer_names = "server1" , "server2"

foreach ($computer in $computer_names)
{
Write-Output "Invoke-Command -ComputerName $computer -ScriptBlock { 
    Get-WmiObject -Class Win32_LogicalDisk | 
    sort deviceid | 
    Format-Table -AutoSize deviceid, freespace 
}"
Invoke-Command -ComputerName $computer -ScriptBlock { 
    Get-WmiObject -Class Win32_LogicalDisk | 
    sort deviceid | 
    Format-Table -AutoSize deviceid, freespace 
}
} 
```

# android - Custom font in android project

> ID：10096339
> 
> 赞同：1
> 
> 时间：2012-04-10T20:56:35.520
> 
> 标签：android, fonts

I am trying to assign a different font to my project. I want the new font is valid for the entire project, but all I find is to change the font to a textview

```
Typeface font1 = Typeface.createFromAsset(getAssets(), "fonts/RockFont.ttf");
TextView customText1 = (TextView)findViewById(R.id.text1);
customText1.setTypeface(font1);
customText1.setTextSize(40.f);
customText1.setText("Hello! This is a custom font..."); 
```

There any way to default to the entire project a custom font? Best regard

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T21:19:12.473

不完全是您所要求的，但基于上面的评论，有一些方法可以更轻松地使用带有默认控件的自定义字体。

这显示了如何扩展 TextView 并使用自定义属性，以便 TextView 支持自定义字体。
[自定义字体和 XML 布局 (Android)](https://stackoverflow.com/questions/2376250/custom-fonts-and-xml-layouts-android)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T23:29:02.670

我所做的是创建一个支持类并从我的活动中实例化它并传递我希望设置样式的所有视图。

```
public class textfactory{
private TextView tv;
private Button b;
private RadioButton rb;

private TypeFace font;

/**
* fetch font resource
*/
public textfactory(Context context){
    this.font = Typeface.createFromAsset(context.getAssets(), 'customfont.ttf');
}
/**
* pass in all the views you wish to apply font to
*/
public void style(View... views){
    for(View v : views){
        if(v instance of TextView)
        {
            tv = (TextView)v;
            tv.setTypeface(this.font);
        }
        else if(v instance of Button)
        {
            b = (Button)v;
            b.setTypeface(this.font);
        }
        else if(v instance of RadioButton)
        {
            rb = (RadioButton)v;
            rb.setTypeface(this.font);
        }
        //add as many view conditionals as required
    }
}
} 
```

# php - How can I add label after every enter/new line in a form

> ID：10096341
> 
> 赞同：0
> 
> 时间：2012-04-10T20:56:41.057
> 
> 标签：php, javascript, newline, fwrite, keycode

I'm making this little project with fwrite (long story, and I can't use DB's). The problem is that I wanna do so every time a person submit something, there have to be an
tag added insted of every key code 13 (new line, enter) So what can I do to do this? I use JavaScript and PHP to do this. I have looked at some other postes, but I cant find anything..

Thanks for your support!

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-10T20:58:55.520

use `nl2br` to convert new line to br for a given string in php

[http://php.net/manual/en/function.nl2br.php](http://php.net/manual/en/function.nl2br.php)

# linear-programming - Integer Linear Programming formulation for Test Cover?

> ID：10096344
> 
> 赞同：-1
> 
> 时间：2012-04-10T20:56:44.263
> 
> 标签：linear-programming

The Test Cover problem can be defined as follows:

Suppose we have a set of `n` diseases and a set of `m` tests we can perform to check for symptoms. We also are given the following:

*   an `n`x`n` matrix `A` where `A[i][j]` is a binary value representing the result of running the `j`th test on a patient with the the `i`th disease (1 indicates a positive result, 0 indicates negative);
*   the cost of running test `j`, `c_j`; and that
*   any patient will have exactly one disease

The task is to find a set of tests that can uniquely identify each of the the `n` diseases at minimal cost.

* * *

This problem can be formulated as an Integer Linear Program, where we want to minimize the objective function `\sum_{j=1}^{m} c_j x_j`, where `x_j` = 1 if we choose to include test `j` in our set, and 0 otherwise.

My question is:

> What is the set of linear constraints for this problem?

Incidentally, I believe this problem is NP-hard (as is Integer Linear Programming in general).

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T10:40:52.003

好吧，如果我是正确的，您只需要确保

```
\sum_j x_j.A_ij >= 1 forall i 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-13T20:50:44.193

让我们`T`删除所有这样= 0的`j`第 th 列的矩阵。`A``j``x_j`

那么选择一组能够唯一区分任意两种疾病的测试，就相当于保证每一行`T`都是唯一的。

观察那两行`k`和`l`是相同的当且仅当`(T[k][j] XOR T[l][j]) = 0`对于 all `j`。

所以，我们想要的约束是

> `\sum_{j=1}^{m} x_j(A[k][j] XOR A[l][j]) >= 1`
> 
> 对于所有`1 <= k <= m`和`1 <= l <= 1`这样的`k != l`。

请注意，上面的约束是线性的，因为我们可以预先计算系数`(A[k][j] XOR A[l][j])`。

# sql - How to write an "exclusive" query in SQL?

> ID：10096346
> 
> 赞同：5
> 
> 时间：2012-04-10T20:56:51.257
> 
> 标签：sql, database, join

I am going over a past paper for a database course I am taking and I am stuck on an SQL question

Here is the schema provided

*   Country(name, capital, area), name is the key

*   People(country, population, children, adult) where country refers to the name in Country, population is the total population, and children and adult is the percentage of the children and adult population.

*   Language(country,language,percentage) – for each language spoken in the country, it lists the percentage of the population that speaks the language.

Here is the question:

> > Write the following query in SQL: Find languages that are *only* spoken in countries whose total population exceeds 10^7.

This is what I have so far:

```
SELECT l.language
FROM people p, language l
WHERE l.country = p.country AND
    p.population > 10^7 
```

The bit I am confused about is how to check that there are no other countries which a language is spoken in but the population is less than 10^7.

Any advice? Thanks

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-10T21:12:25.980

获取所有语言。从该集合中删除人口 <= 10^7 的国家/地区使用的所有语言。提醒应该是仅在人口 > 10^7 的国家/地区使用的语言。

```
select language from languages
where language not in (
    select language from languages l
    join people p on l.country = p.country
    where p.population <= 10^7) 
```

这是基于您的设计具有必须在至少一个国家/地区使用每种语言的限制；）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T07:57:34.147

```
WITH T 
     AS
     (
      SELECT l.language, 
             p.country, p.population
        FROM people p, language l
       WHERE l.country = p.country
     )
SELECT language
  FROM T
EXCEPT
SELECT language
  FROM T
 WHERE population <= 10000000; 
```

或者：

```
SELECT language
  FROM language AS l1
 WHERE 10000000 < ( SELECT MIN(p.population)
                      FROM people p, language l
                     WHERE l.country = p.country
                           AND l.language = l1.language ); 
```

相似地：

```
SELECT language
  FROM language AS l1
 WHERE 10000000 < ALL ( SELECT p.population
                          FROM people p, language l
                         WHERE l.country = p.country
                               AND l.language = l1.language ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-02-14T20:47:42.423

我的方法是在每个规模的国家/地区使用不同的语言，然后左加入这两个列表并最终得到仅在人口大于 10^7（或 10000000）的国家/地区使用的语言列表。

```
;WITH Bigs AS
(
    SELECT DISTINCT l.language
    FROM people p
    INNER JOIN language l ON l.country = p.country
    WHERE p.population > 10000000
)
,Littles AS
(
    SELECT DISTINCT l.language
    FROM people p
    INNER JOIN language l ON l.country = p.country
    WHERE p.population <= 10000000
)
SELECT b.language 
FROM Bigs b
LEFT JOIN Littles l ON l.language = b.language
WHERE l.language IS NULL 
```

# asp.net - 关于创建自定义网格视图的建议

> ID：10096347
> 
> 赞同：1
> 
> 时间：2012-04-10T20:56:51.463
> 
> 标签：asp.net, vb.net, gridview

我想为我的 ASP.net 页面创建一个订单表格（我在下面包含了一个示例图像）。但是我不知道如何解决这个问题。我假设最好的方法是网格视图，但它会涉及两个级别的分组。其他要求是接受数量，然后计算总价。任何人都可以向我指出一些好的书籍或网站来解释创建这样的自定义网格视图（或者可能是比使用 gridview 更好的方法，我对任何事情都持开放态度）。

我认为自己是 asp.net 的中级程序员。我了解很多概念，但我正在尝试学习更实用的做事方式。感谢您提供的任何知识！

![在此处输入图像描述](../Images/ea9db34517394172dbe3f5ff24c24f4d.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T21:06:42.107

使用 ListView，有两个原因：

1.  它将产生干净的标记
2.  使用模板将为您提供所需的布局

这是您所追求的布局类型以及如何实现它的示例：

[ListView Web 服务器控件概述](http://msdn.microsoft.com/en-us/library/bb398790.aspx)

# python - 是否可以将 django 模型类与 ManyToMany 关系合并？

> ID：10096351
> 
> 赞同：1
> 
> 时间：2012-04-10T20:57:13.967
> 
> 标签：python, sql, django, django-models

我继承了一个大型 Django 应用程序，它在“shows”应用程序的模型中使用了这个习语：

```
class Movie_Playlist(models.Model):
    name = models.CharField(max_length=150)
    # More fields here...

    players = models.ManyToManyField(
        User, related_name='playlists_played', null=True, blank=True)

class PlaylistPlayer(models.Model):
    user           = models.ForeignKey(User, related_name='play_links')
    movie_playlist = models.ForeignKey(Movie_Playlist, related_name='playlist_plays')
    count          = models.IntegerField(default=0)
    last_played    = models.DateTimeField(editable=False)

    class Meta:
        db_table = 'shows_movie_playlist_players' 
```

据我所知，这个想法可能是，shows_movie_playlist_players 表（将由 ManyToManyField 关系创建）除了存储关系本身之外，还应该通过存储每个用户的信息来完成双重任务。当然，原始数据库中似乎只有两个相关表：“shows_movie_playlist”和“shows_movie_playlist_players”。

此外，对于它的价值，这在 Django 1.2.3 -- 1.3.1 中“验证”得很好。

这一切都很好，花花公子，除了它在尝试创建测试数据库时破坏了“python manage.py test”方法，因为“ManyToManyField ...”规范已经创建了shows_movie_playlist_players。到 PlaylistPlayer 类。

如果我注释掉“ManyToManyField...”行，我可以创建测试数据库并毫无问题地运行测试。否则，我得到这个：

```
> python manage test shows -v3
Creating test database for alias 'default' ('test_production')...
Creating tables ...
Creating table shows_movie_playlist_players
Creating table shows_movie_playlist
Creating table shows_movie_playlist_players
Traceback (most recent call last):
  File "manage.py", line 16, in <module>
    execute_manager(settings)
    ... Lots of tracebackage here...
_mysql_exceptions.OperationalError: (1050, "Table 'shows_movie_playlist_players' already exists") 
```

那么这是一个正确指定的关系和覆盖的表，它还不支持测试，还是有什么可怕的错误？

谢谢阅读！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T21:24:30.490

哦哇...我对你有感觉:) 是的，这是非常错误的，但它可能有一个简单的解决方案。基本上它是一个试图完成“通过”功能的黑客`ManyToManyField`

尝试指定`through='shows.PlaylistPlayer' on the`玩家的 m2m 字段，然后查看它的行为。

# grails - Grails Quartz2 plugin on Cloudfoundry with multiple instances?

> ID：10096353
> 
> 赞同：1
> 
> 时间：2012-04-10T20:57:27.837
> 
> 标签：grails, quartz-scheduler, cloud-foundry

How can I make sure that a cron scheduled Quartz2 job (http://grails.org/plugin/quartz2) is only fired once when my Grails 2 app is running with multiple instances on CloudFoundry?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T07:52:07.870

基本上你需要一个[集群的 Quartz 调度器](http://quartz-scheduler.org/documentation/quartz-2.1.x/configuration/ConfigJDBCJobStoreClustering)。该文档很好地描述了如何配置集群和`JDBC-JobStore`. 您将需要一个所有实例都可以访问和同步的数据库。

根据[插件文档](https://github.com/9ci/grails-quartz2)，您应该使用`Config.groovy`它来配置 Quartz 调度程序，因为它完全取代了`quartz.properties`.

# zend-framework - Zend Framework Table Relationships - select from multiple tables within app

> ID：10096356
> 
> 赞同：0
> 
> 时间：2012-04-10T20:57:45.527
> 
> 标签：zend-framework, zend-db, zend-db-table

I hope I'm asking this question in an understandable way. I've been working on an app that has been dealing with 1 table ( jobschedule ). So, I have models/Jobschedule.php, models/JobscheduleMapper.php, controllers/JobscheduleController.php, view/scripts/jobschedule/*.phtml files

So in my controller I'll do something like this:

```
 $jobnumber = $jobschedule->getJobnum();
    $jobtype = $jobschedule->getJobtype();

    $table = $this->getDbTable();

public function listAction()
{
    $this->_helper->layout->disableLayout();
    $this->view->jobnum = $this->getRequest()->getParam( 'jobnum', false );
    $this->view->items = array();       

    $jobschedule = new Application_Model_Jobschedule();
    $jobschedule->setJobnum( $this->view->jobnum );

    $mapper = new Application_Model_JobscheduleMapper();
    $this->view->entries = $mapper->fetchAll ( $jobschedule );
} 
```

and then in my mapper I I do something like:

```
 $resultSet = $table->fetchAll($table->select()->where('jobnum = ?', $jobnumber)->where('jobtype = ?', $jobtype) );
        $entries   = array();
        foreach ($resultSet as $row) {
            $entry = new Application_Model_Jobschedule();
            $entry->setJobnum($row->jobnum)
                  ->setJobtype($row->jobtype)
                  ->setJobdesc($row->jobdesc)
                  ->setJobstart($row->jobstart)
                  ->setJobend($row->jobend)
                  ->setJobfinished($row->jobfinished)
                  ->setJobnotes($row->jobnotes)
                  ->setJobid($row->jobid);
            $entries[] = $entry;
        }
        return $entries;
    } 
```

Then in my view I can manipulate $entries. Well, the problem I'm coming across now is that there is also another table called 'jobindex' that has a column in it called 'jobno'. That 'jobno' column holds the same record as the 'jobnum' column in the 'jobschedule' table. I need to find the value of the 'store_type' column in the 'jobindex' table where jobindex.jobno = joschedule.jobnum ( where 1234 is the jobno/jobnum for example ). Can someone please help me here? Do I need to create a jobindex mapper and controller? If so, that's done ... I just don't know how to manipulate both tables at once and get the record I need. And where to put that code...in my controller?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T01:41:11.747

如果我对您的理解正确，您需要将“jobindex”表加入“jobschedule”表。

```
...
$resultSet = $table->fetchAll(
    $table->select()->setIntegrityCheck(false)
        ->from($table, array('*'))
        ->joinLeft(
            'jobindex',
            'jobindex.jobno = jobschedule.jobnumber',
            array('store_type'))
        ->where('jobnum = ?', $jobnumber)
        ->where('jobtype = ?', $jobtype)
        ->where('jobindex.store_type = ?', $_POST['store_num'])
);
.... 
```

根据 'jobschedule' 与 'jobindex' 的关系，您可能需要一个内部连接 ​​( `joinInner()`) 来代替。

禁用表之间的`setIntegrityCheck(false)`引用完整性，这仅在您向它们写入时才重要。对于像这样的查询，您可以禁用它并继续（否则它将引发异常）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T08:06:49.167

如果我理解正确，这是从数据库中提取数据所需的 SQL 查询：

```
SELECT `jobschedule`.* FROM `jobschedule` INNER JOIN `jobindex` ON jobindex.jobno = jobschedule.jobnum WHERE (jobindex.jobtype = 'WM') 
```

在 Zend 中组装这个 SQL 查询看起来像这样：

```
 $select->from('jobschedule', array('*'))
    ->joinInner(
        'jobindex',
        'jobindex.jobno = jobschedule.jobnum',
        array())
    ->where('jobindex.jobtype = ?', $jobtype); 
```

让我们知道这是否是您正在寻找的。

# python - python webkit signals

> ID：10096358
> 
> 赞同：2
> 
> 时间：2012-04-10T20:57:51.860
> 
> 标签：python, webkit, gtk, position, mouse

I would like to use webkit to create a simple web browser with some special functions. In particular, I would like to have a function that adds a word to a file, if I click on that word. Now, I already have the browser, but I could not figure out how I would read out the word at the mouse position. Could someone suggest either a solution, or some material on this?

Thanks,

v923z

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T19:30:35.843

gtk webkit 与 python 对话的可能性有限。

这里有一个这样做的指南：

[http://www.aclevername.com/articles/python-webgui/](http://www.aclevername.com/articles/python-webgui/)

它涉及将javascript发送到浏览器，并让浏览器与python通信以更改网页的标题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-10-14T05:43:37.593

显然他们[修复](https://bugs.webkit.org/show_bug.cgi?id=137116)了使用所选信号的能力，所以这样的事情可能会奏效......

```
mywebview.connect('selection-changed', nameofmyfunction) 
```

并观察传递给 nameofmyfunction() 的参数。

# jquery - Jquery Tabs auto scroll/rotate

> ID：10096359
> 
> 赞同：0
> 
> 时间：2012-04-10T20:57:55.987
> 
> 标签：jquery, jquery-ui, tabs

My tabs work perfectly, but every time i try to add a rotate they break. Where should i be lookign to add this in, i've been looking at tutorials for the last few horus and can't seem to figure it out ;/ any pointing in the right direction would be much appreciated!

Thanks!

[http://jsfiddle.net/GFphT/62/](http://jsfiddle.net/GFphT/62/ "Jfiddle example")

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T15:26:37.887

```
//array to store IDs of our tabs
var tabs = [];
//index for array
var ind = 0;
//store setInterval reference
var inter;

//change tab and highlight current tab title
function change(stringref){
    //hide the other tabs
    jQuery('.tab:not(#' + stringref + ')').hide();
    //show proper tab, catch IE6 bug
    if (jQuery.browser.msie && jQuery.browser.version.substr(0,3) == "6.0")
        jQuery('.tab#' + stringref).show();
    else 
        jQuery('.tab#' + stringref).fadeIn();
    //clear highlight from previous tab title
    jQuery('.htabs a:not(#' + stringref + 't)').removeClass('active');
    //highlight currenttab title
    jQuery('.htabs a[href=#' + stringref + ']').addClass('active');
}
function next(){
    //call change to display next tab
    change(tabs[ind++]);
    //if it's the last tab, clear the index
    if(ind >= tabs.length)
        ind = 0;
}
jQuery(document).ready(function(){
    //store all tabs in array
    jQuery(".tab").map(function(){
        tabs[ind++] = jQuery(this).attr("id");
    })
    //set index to next element to fade
    ind = 1;
    //initialize tabs, display the current tab
    jQuery(".tab:not(:first)").hide();
    jQuery(".tab:first").show();
    //highlight the current tab title
    jQuery('#' + tabs[0] + 't').addClass('active');
    //handler for clicking on tabs
    jQuery(".htabs a").click(function(){

        //if tab is clicked, stop rotating 
        clearInterval(inter);
        //store reference to clicked tab
        stringref = jQuery(this).attr("href").split('#')[1];
        //display referenced tab
        change(stringref);
        return false;
    });
    //start rotating tabs
    inter = setInterval("next()", 7500);
}); 
```

# android - 奇怪的画廊 + 广播接收器行为

> ID：10096364
> 
> 赞同：-1
> 
> 时间：2012-04-10T20:58:24.013
> 
> 标签：android, race-condition, android-gallery

好的，所以我调用了一个广播接收器，并且在该`onReceive()`方法中，我使用静态数据使用新适配器更新了画廊，所有这些都在 UI 线程上完成。

然而，什么都没有改变。旧数据留在库中，但是当我调试代码并花时间时，它会在调用 invalidate 后更新。哦，顺便说一句，视图位于 ViewFlipper 中，但我在创建新适配器之前更改为正确的视图。所以我有比赛条件，这正常吗？如果不是，我该怎么办？

下面是我在`onRecieve()`.

```
onRecieve() {
    mFlipper.setDisplayedChild(0);
    mNavAdapter.addCategory(-1);
    mGalNav.setSelection(0);
    getCategoryProducts(-1);
}

void getCategoryProducts(int category) {
   mGalProducts.setAdapter(new DealCheckInAdapter(this,
   getCheckInProducts()));
   mGalProducts.invalidate();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T21:05:55.593

该`invalidate()`方法不应该做我猜你认为它会做的事情。你假设使用：

```
mDealCheckInAdapter.notifyDataSetChanged(); 
```

这是“刷新” listView 适配器的方法。

# oauth - Problems with redirection while implementing oAuth2 for blackberry using webworks

> ID：10096368
> 
> 赞同：0
> 
> 时间：2012-04-10T20:58:44.863
> 
> 标签：oauth, soundcloud

I am trying to implement a SoundCloud app for blackberry phones using webworks frame work.

I am using OAuth2 scheme for authorization. So far I am able to display the SoundCloud log-in page from where the user can allow the app. But the problem occurs during the redirect which is essentially done by SoundCloud. The redirect page which is being pointed to by the call back URI is residing in my device, but after the user approves the app I get a page saying "something went wrong". However when I try to bounce the redirect from a third server, it just works fine. In this case I specify the callback URL pointing to a page on a website which only forwards the request to the page which is residing on my device. But the problem is that I do not want to use this "bounce server"

Could you please look into the code and advise if I am doing something wrong.

```
/**
 * Authenticates the app against soundcloud
 * This javascript method is called in the index.htm of my application.
 */
authenticate : function(){
    var url = "https://soundcloud.com/connect?" + "scope=nonexpiring&client_id=MY_CLIENT_ID&" +
              "response_type=code&redirect_uri=local:///testpage.htm";
    window.location = url;
;

/************************************/ 
```

`testpage.htm` only displays "hello sound cloud".

Any help in this regard shall be highly appreciated.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T09:58:22.717

该`redirect_uri`参数的值必须与应用编辑页面上的“重定向 URI”的值匹配。

示例：[https ://img.skitch.com/20120411-q6yqada29tcadnep15jc6q75a1.jpg](https://img.skitch.com/20120411-q6yqada29tcadnep15jc6q75a1.jpg)

IHTH 汉内斯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T10:30:03.630

问题是redirect_uri 中的三斜杠部分。尽管根据[RFC 3986](https://www.rfc-editor.org/rfc/rfc3986#section-3)它是一个有效的 URI ，但 Ruby URI 库在解析此类值时表现得有些奇怪。我们正在努力修复。

同时，您可以尝试使用 local:/testpage.htm 吗？

# javascript - jQuery onChange prop a value to inputs

> ID：10096372
> 
> 赞同：1
> 
> 时间：2012-04-10T20:59:02.430
> 
> 标签：javascript, jquery, select, option, onchange

I have a `<select>` drop down that I'm inserting into my HTML via jQuery. I don't have control over the HTML but I do have control over the JavaScript.

I'm trying to prop a value to an `<input>` element when you select an option. Basically, I have a `<select>` element with `<option id="1">` and `<option id="2">` *onChange* of this `<select>` element;
If you select `option#1` it should prop the value **dummy1** to `input[name="Check_Config_PaymentGateway_CreditCards_Login1"]` and the value **dummy2** to `input[name="Check_Config_PaymentGateway_CreditCards_Password"]`
If you select `option#2` it should prop the value **dummy3** to `input[name="Check_Config_PaymentGateway_CreditCards_Login1"]` and the value **dummy4** to `input[name="Check_Config_PaymentGateway_CreditCards_Password"]`

I've been working on this [jsFiddle](http://jsfiddle.net/VW9N6/).

I'm pretty new at JavaScript in general, let alone jQuery. This is way to sophisticated for my skill... If you can help me, I'd really appreciate it.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T21:06:34.760

试试下面的东西，

**编辑：**缓存输入文本框。

[**演示**](http://jsfiddle.net/skram/VW9N6/1/)

```
var dummyValues = [['dummy1', 'dummy2'], ['dummy3', 'dummy4']];

var $loginInput = $('input[name=Check_Config_PaymentGateway_CreditCards_Login1]');
var $pwdInput = $('input[name=Check_Config_PaymentGateway_CreditCards_Password]');

$('#paymentDD').change(function () {
  var selectedVal = parseInt($(this).val(), 10) - 1;
  $loginInput.val(dummyValues [selectedVal][0]);
  $pwdInput.val(dummyValues [selectedVal][1]);
}); 
```

`dummyValues`在将移动选项添加到下拉列表时更新了 var。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T21:14:43.503

只要有可能，我就喜欢缓存元素，所以我就是这么做的。我还看到您在 jsFiddle 中使用了最新的 jQuery（1.7.2），那么为什么不使用推荐的**[`.on()`](http://api.jquery.com/on/)**方法，然后在加载时调用立即**[`.change()`](http://api.jquery.com/change/)**填充？

***[你可以尝试这样的事情：](http://jsfiddle.net/qM5Kg/)***

```
var $span = $('span#print_pagename'),
    $login = $('input[name="Check_Config_PaymentGateway_CreditCards_Login1"]'),
    $password = $('input[name="Check_Config_PaymentGateway_CreditCards_Password"]'),
    $select = $('<select><option id="1">1</option><option id="2">2</option></select>');

$span.after($select);

$select.on('change', function() {

    var $this = $(this);

    if ($this.val() === '1') {

        $login.val('dummy1');
        $password.val('dummy2');

    } else if ($this.val() === '2') { 

        $login.val('dummy3');
        $password.val('dummy4');

    }

}).change(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T21:15:25.183

给你：http: [//jsfiddle.net/VW9N6/6/](http://jsfiddle.net/VW9N6/6/)

这将绑定到元素的`change`事件`<select>`以检测其值何时更改，然后更新`<input>`元素的值。

# ruby-on-rails - 弃用警告：您在供应商/插件中有 Rails 2.3 风格的插件！Rails 4.0 将移除支持

> ID：10096373
> 
> 赞同：9
> 
> 时间：2012-04-10T20:59:06.057
> 
> 标签：ruby-on-rails, git, heroku, rake, dbmigrate

> **可能重复：**
> [在 Heroku 中运行任务的 Rails 2.3 样式插件和弃用警告](https://stackoverflow.com/questions/9027403/rails-2-3-style-plugins-and-deprecation-warnings-running-task-in-heroku)

我正在运行 rake db:migrate 给我以下警告，然后中止：

```
$ heroku rake db:migration --trace
DEPRECATION WARNING: You have Rails 2.3-style plugins in vendor/plugins! Support forthese plugins will be removed in Rails 4.0\. Move them out and bundle them in your Gemfile, or fold them in to your app as lib/myplugin/* and config/initializers/myplugin.rb. See the release notes for more on this: http://weblog.rubyonrails.org/2012/1/4/rails-3-2-0-rc2-has-been-released. (called from <top (required)> at /app/Rakefile:7)
DEPRECATION WARNING: You have Rails 2.3-style plugins in vendor/plugins! Support for these plugins will be removed in Rails 4.0\. Move them out and bundle them in your Gemfile, or fold them in to your app as lib/myplugin/* and config/initializers/myplugin.rb. See the release notes for more on this: http://weblog.rubyonrails.org/2012/1/4/rails-3-2-0-rc2-has-been-released. (called from <top (required)> at /app/Rakefile:7)
DEPRECATION WARNING: You have Rails 2.3-style plugins in vendor/plugins! Support for these plugins will be removed in Rails 4.0\. Move them out and bundle them in your Gemfile, or fold them in to your app as lib/myplugin/* and config/initializers/myplugin.rb. See the release notes for more on this: http://weblog.rubyonrails.org/2012/1/4/rails-3-2-0-rc2-has-been-released. (called from <top (required)> at /app/Rakefile:7)
rake aborted!
Don't know how to build task 'db:migration'
/app/.bundle/gems/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/task_manager.rb:49:in `[]'
/app/.bundle/gems/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:115:in`invoke_task'
/app/.bundle/gems/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `block (2 levels) in top_level'
/app/.bundle/gems/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `each'
/app/.bundle/gems/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `block in top_level'
/app/.bundle/gems/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:133:in `standard_exception_handling'
/app/.bundle/gems/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:88:in `top_level'
/app/.bundle/gems/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:66:in `block in run'
/app/.bundle/gems/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:133:in `standard_exception_handling'
/app/.bundle/gems/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:63:in `run'
/app/.bundle/gems/ruby/1.9.1/gems/rake-0.9.2.2/bin/rake:33:in `<top (required)>'
/app/.bundle/gems/ruby/1.9.1/bin/rake:19:in `load'
/app/.bundle/gems/ruby/1.9.1/bin/rake:19:in `<main>' 
```

当我检查`vendor/plugins`文件夹时，我只找到了一个名为`.gitkeep`并且为空的文件

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-09-21T10:06:44.357

作为一个仅供参考，以防人们由于问题标题而从搜索引擎到达这里。弃用警告是由 Heroku 注入插件引起的 - 请参阅 Jared Beck 对此问题的回答：[Rails 2.3-style plugins and deprecation warnings running task in Heroku](https://stackoverflow.com/questions/9027403/eliminating-rails-2-3-style-plugins-and-deprecation-warnings)

上面 nzifab 提出的解决方案对潜在问题有效，但这不是问题标题中提出的

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T21:01:22.083

`vendor/plugins`不是这里的问题，那些只是警告。这是`heroku run rake db:migrate`..

可能只是`heroku rake db:migrate`如果你不在 Cedar 堆栈上（注意`migrate`，不是`migration`）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-01T05:26:15.637

我对此的感觉是，您必须对任何 gem 进行了一些更改，并复制了层次结构和“..app/vendor/plugins”文件夹中更改的文件。

如果是这种情况，那么这只是一个警告，告诉您应该将插件复制到“lib”文件夹中。当您在开发模式下启动 webrick 时，您一定已经看到了同样的情况。

# java - 如何通过单击按钮获取 GPS 位置？

> ID：10096376
> 
> 赞同：0
> 
> 时间：2012-04-10T20:59:12.230
> 
> 标签：java, android, google-maps, gps, overlay

我的项目有一些粗略的代码，我试图在按下按钮时获取用户的 GPS 位置，并且我希望该位置是一个 GeoPoint，然后我可以将其传递给一个方法。

该方法适用于绘制该点的 Overlay 的 Overlay 类。我正在使用 Stack Overflow 问题中的一些代码*[如何获取当前 GPS 位置？](https://stackoverflow.com/questions/3428188)*. 我设置了程序，以便将 GeoPoint 添加到数组中，然后从该数组中检索它并添加到方法中。有没有更好的方法来做到这一点，或者有什么方法可以使用该点而不将其放入数组中？

这是添加 Overlay 并从数组中获取 GeoPoint 的按钮：

```
Button startBtn = (Button) findViewById(R.id.startBtn);
startBtn.setOnClickListener(new View.OnClickListener() {
    @Override
    public void onClick(View arg0) {
        // TODO Auto-generated method stub
        getLocation();

        tempOverlay = (MapOverlay) listOfOverlays.get(arrayNumber);
        tempOverlay.addPoint(points.get(pointCount));
        mapView.postInvalidate();
        }
    }
}); 
```

这是创建 locationManager 和 requestUpdates 的 getLocation() 方法。

```
public void getLocation()
{
    lm = (LocationManager)getSystemService(Context.LOCATION_SERVICE);
    locationListener = new MyLocationListener();
    lm.requestLocationUpdates(LocationManager.GPS_PROVIDER,0,0,locationListener);

    System.out.println("Get Location Called");
} 
```

这是类中获取更新的`onLocationChanged`方法`MyLocationListener`，一旦我有了位置，我就会停止更新请求。

```
@Override
public void onLocationChanged(Location loc)
{
    if(loc != null)
    {
           Toast.makeText(getBaseContext(),"LocationChanged : Lat: " + loc.getLatitude()+ " Lng: " + loc.getLongitude(),
            Toast.LENGTH_SHORT).show();
    }

    p = new GeoPoint((int) (loc.getLatitude() * 1E6),(int) (loc.getLongitude() * 1E6));

    points.add(p);
    System.out.println("Point Added to Array");

    LBServicesActivity.this.lm.removeUpdates(this);

    mc.animateTo(p);
    mc.setZoom(18);
} 
```

我如何将该 GeoPoint 传递给 buttonListener 中的方法而不将其添加到数组中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T22:57:03.233

创建一个在位置更改时更新的 GPS 类，如下所示：

```
public class GPSData {
    private static double latitude;
    /**
     * @return the latitude
     */
    public static double getLatitude() {
        return latitude;
    }

    /**
     * @param latitude the latitude to set
     */
    public static void setLatitude(double l) {
        latitude = l;
    }

    private static double longitude;
    /**
     * @return the longitude
     */
    public static double getLongitude() {
        return longitude;
    }

    /**
     * @param d the longitude to set
     */
    public static void setLongitude(double d) {
        longitude = d;
    }
}

public static class MyLocationListener implements LocationListener {
    public void onLocationChanged(Location location) {
        setAccuracy(location.getAccuracy());
        setLongitude(location.getLongitude());
        setLatitude(location.getLatitude());
    }

    @Override
    public void onProviderDisabled(String provider) {

    }

    @Override
    public void onProviderEnabled(String provider) {

    }

    @Override
    public void onStatusChanged(String provider, int status, Bundle extras) {

    }
} 
```

然后当用户单击按钮时访问该 GPS 类的值

# php - Is it possible to send data to two different scripts?

> ID：10096378
> 
> 赞同：0
> 
> 时间：2012-04-10T20:59:12.983
> 
> 标签：php, html, forms, post

Simple html question. Is it possible to send data from html forms, like normal using "action" to two different scripts? Or is there any other way to do that? Besides using curl.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T21:02:05.923

使用 jquery 触发对两个单独脚本的两个 ajax 调用。

```
$('#button').click(function(){
  $.ajax({
    url: 'script1.php'
  });
  $.ajax({
    url: 'script2.php'
  });
)}; 
```

这是一种快速而肮脏的方法......显然为它们添加了错误检查和成功检查，以确保两者都正确提交。

理想的方法是使用 cURL，它避免了 js/客户端问题，以及避免额外的不必要的 http 请求。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-10T21:02:42.910

为什么不将其发送到一个脚本，然后将其发送到所需的函数来处理它？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-10T21:01:52.560

普通的 action 属性无法做到这一点，但您可以使用 Javascript 轻松做到这一点。不过，如果没有看到一些代码，我无法提供太多示例。

```
form.onsubmit(function(){
   senddata(here);
   senddata(there);
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-10T21:02:04.000

**一个主意 ：**

*   将数据从表单发送到脚本 A
*   获取脚本 A 将数据发送到脚本 B（一旦收到）

# iphone - ffmpeg avformat_open_input 在设备中不起作用

> ID：10096379
> 
> 赞同：0
> 
> 时间：2012-04-10T20:59:25.787
> 
> 标签：iphone, c++, ios, ffmpeg

我在 iOS 项目中有一个调用 的方法`avformat_open_input()`，它在模拟器中运行得很好，但是，当我尝试在设备上运行它时，它会挂起并停留在那里。

有没有人见过这个？，任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T14:17:14.857

如果挂断，该方法会通过 URL、RTSP、RTP 等建立与源的连接：

1.  确保源实际上是该地址和端口上的流数据
2.  如果这是本地连接，请确保您连接到正确的网络。

请让我知道结果如何。

# jquery - 如何将 jQuery UI 日期选择器附加到动态插入的表单域？

> ID：10096388
> 
> 赞同：5
> 
> 时间：2012-04-10T20:59:51.270
> 
> 标签：jquery, jquery-ui

我有一个包含一堆输入字段的表格，有点像电子表格。一些输入字段使用 jQuery UI 日期选择器。还有一个按钮可以添加表格行。

当我单击按钮添加表格行时，它会正确添加到 DOM 中。但是，日期选择器小部件不会附加到该新行中的日期字段。

我怀疑答案是使用 live() - 或者 on() - 调用 datepicker()，但我不明白要使用什么语法。下面的代码已经突破了我对 jQuery 理解的极限。我头疼。帮助？

```
<script type="text/javascript">
    $(function() {
        $( ".usedatepicker" ).datepicker();
    });

    $('.rowadd').live('click',function(){
        var appendTxt = '<tr><td><input class="usedatepicker" name="something" type="text" /></td></tr>';
        $("tr:last").after(appendTxt);
    });

</script> 
```

注意 2：我也试过这个，包括 live() 和 on()。它似乎适用于原始字段和动态插入的字段，但偶尔会出现（至少在 Chrome 中）。就像，它会工作三秒钟，然后停止三秒钟，然后工作三秒钟，然后......

```
$(function() {
    $('.usedatepicker').live('click', function(){
        $(this).datepicker({showOn:'focus'});
    });
}); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-10T21:07:10.110

添加新行后只需重新绑定日期选择器。如果失败，请尝试“刷新”方法。

```
$('.rowadd').live('click',function(){
        var appendTxt = '<tr><td><input class="usedatepicker" name="something" type="text" /></td></tr>';
        $("tr:last").after(appendTxt);
        $(".usedatepicker").datepicker(); // or 
        $(".usedatepicker").datepicker("refresh"); 
    }); 
```

# c - 无效表达式的使用；从 void 指针指向的数组复制信息；进入字符指针指向的数组

> ID：10096389
> 
> 赞同：0
> 
> 时间：2012-04-10T20:59:53.800
> 
> 标签：c, compiler-errors

我想将所有保存在 encoding_symbols_tab [0] 中的数据存储在 symbol_and_header 中。'encoding_symbols_tab' 指向一个数组，例如 500 * 1024 个字符。

我为此示例修改了以下代码。

```
void** encoding_symbols_tab;

(..)

char* return_symbol_and_header_array ()
    { //abcd
    char* symbol_and_header =  (char*)calloc(1, 1024 + 14 );
    (..)   
    int k=0;
    for (k=0; k < 1024; k++)
    {
    symbol_and_header [k+14] = (char) encoding_symbols_tab [0][k];
    }

    return symbol_and_header;
    } 
```

当我运行此代码时，我收到“错误：无效表达式的无效使用”我应该如何更改代码以解决此问题（不更改“无效** encoding_symbols_tab”的类型）。？它是一个 C 程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T21:06:11.227

采用

```
((char**)encoding_symbols_tab) [0][k]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T21:08:36.200

如果`encoding_symbols_tab`指向字符，为什么要声明它指向`void *`s？您不能取消引用`void *`指针，因为它不指向任何类型的数据。

您可以声明`char **encoding_symbols_tab`而不是`void **encoding_symbols_tab`，但首先，请确保这是它真正指向的内容。在你的问题中，你建议它可能是别的东西：

*   如果`encoding_symbols_tab`指向 500 * 1024 个字符（即 512000 个字符）的平面数组，那么您必须：
    *   声明`encoding_symbols_tab`为`char *`
    *   将其元素引用为`encoding_symbols_tab[x*1024+k]`
*   如果`encoding_symbols_tab`指向一个由 500 个`char *`指针组成的数组，而这些指针本身又指向一个由 1024 个字符组成的数组，那么您必须：
    *   声明`encoding_symbols_tab`为`char **`
    *   将其元素引用为`encoding_symbols_tab[x][k]`

假设`x`是第一个维度（共 500 个）并且`k`是第二个维度（共 1024 个）。

# cross-platform - 从 Jam 迁移到 CMake

> ID：10096391
> 
> 赞同：6
> 
> 时间：2012-04-10T21:00:03.397
> 
> 标签：cross-platform, cmake, bjam, jam

我了解 Jam 构建现有项目，CMake 生成要构建的项目。但是，鉴于我宁愿生成可以在各种 IDE 中使用的项目，而不是尝试将 Jam 集成到这些 IDE 中，有没有人有任何经验/成功将 Jamfile 转换为 CMakeLists.txt 文件？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-15T18:07:23.387

我曾经在我的所有 Linux 项目中使用 Jam，因为它比常规的 makefile 更容易。然后我发现了 CMake 并且没有回去。编写 CMakeLists.txt 文件与编写 Jamfile 一样容易，并且您可以免费获得特定于平台的 IDE 支持，尽管 IMO IDE 项目不像手动生成的那样干净。

据我所知，尽管 Jam 有很多优点，但如今很少有人使用 Jam。它确实声称能够在各种平台上构建，但与此同时，它似乎不再享受积极的开发，所以我倾向于不相信它的多平台声称。

据我所知，没有工具可以自动将 Jamfiles 的层次结构转换为 CMakeLists.txt 文件的层次结构，尽管这样的工具肯定是一个可行的项目。然而，由于 Jam 和在较小程度上 CMake 的不受欢迎，除非你或我找到一些空闲时间，否则这样的工具不会出现。:(

如果您的项目不太复杂，一些简单的搜索和替换操作应该将 Jamfile 转换为 CMakeLists.txt 文件。如果您的项目很复杂，那么手动转换它们可能是您最好的选择。

一些简单的转换：

*   `HDRS += a.h b.h c.h ;`变成`include_directories(a.h b.h c.h)`
*   `Main HelloWorld : main.cpp utils.cpp ;`变成`add_executable(HelloWorld main.cpp utils.cpp utils.h)`
*   `Library helper : helper.cpp`变成`add_library(helper STATIC helper.cpp helper.h)`
*   `SubDir foo ;`变成`add_subdirectory(foo)`
*   `LinkLibraries HelloWorld : libhelper ;`变成`target_link_libraries(HelloWorld helper)`

CMake 生成的 IDE 项目不会自动包含相关的头文件，因此我在上面的示例中明确包含了重要的头文件。[这里](http://www.cmake.org/cmake/help/examples.html)有一个很好的例子，如果你还没有看过的话。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T18:50:35.753

对于 Jam 到 CMake 的转换，尝试扩展 vcproj2cmake 以实现 Jam 解析器也可能很有用（CMake 语法文本流的生成器部分现在相当强大）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T18:37:13.003

所以我最终决定最好的办法是从头开始一个 CMAKE 项目。我们的 Jam 项目真是一团糟，我不想继承我们的意大利面条构建的残渣。

我发现这些资源最有帮助

[http://www.cmake.org/Wiki/CMake_Useful_Variables](http://www.cmake.org/Wiki/CMake_Useful_Variables) [http://www.cmake.org/cmake/help/v2.8.10/cmake.html](http://www.cmake.org/cmake/help/v2.8.10/cmake.html)

# iphone - UILabel pointSize 总是返回 0

> ID：10096396
> 
> 赞同：2
> 
> 时间：2012-04-10T21:00:25.280
> 
> 标签：iphone, uilabel, uifont

更新：iOS 4 是主要参与者。如果您正在运行 iOS 4 sim，标签将返回 0.00 的大小，因为它从未加载...这将我的最后一个问题更改为：“如果 Xib 是，您如何在 iOS 4 中找到字体大小“

后者看起来很明显，但并不理想，因为设计师进入了 Xib 并且新字体更细，因此我们必须将大小更改为更小，以便正常 Helvetica（适用于 iOS 4）。如果在视觉上，设计师和我在设计时看错了字体，那就不理想了。

也许我想出了这个，但我希望 iOS 向导可以回答这个关于 xib 负载问题的 xib-becomes-0 初始测试，如果可能的话。

----- 结束更新 -----

我正在尝试从我的网点获取当前设置的字体 pointSize，并且遇到了非常艰难的时期。

问题：iOS 4 不支持我使用的字体。iOS 5 可以。

解决方案：调用获取当前 iOS 级别的函数，如果为 5，则返回相同的标签并使用其字体类型。如果是 iOS 4，请将其设置为 Helvetica 并尝试获取其大小（在 xib 中设置）。

抓取大小是不可能的，它总是返回 0.00（除了某些情况，即将确定，但是......）原因不是延迟加载。我只是在加载视图后延迟 1 秒后调用了相同的函数（更改字体之一）。

结果：

NSLogging labelName.font.pointSize 在“get font for XX”函数打印 0.00 之前，在打印大小之后执行。

奇怪的部分：虽然我无法手动找到它，但无论我是否使用 xHeight、pointSize 或 lineHeight（frame.size.height 太大，否则会这样做），如果我只是返回 iOS 5 的字体，它看起来不错，好像不知何故——它在某个地方找到了正确的值。我一厢情愿地认为这可能不是私人的，但还没有找到。

问题不能是延迟加载使东西为零，因为第二次延迟的方式超过了加载标签所需的时间（并且它们是可见的）。

现在重新启动，多亏了不可修复的 boostrap 东西。

谢谢你的帮助！

我对iOS并不陌生，这让我有点困惑

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T18:51:49.927

自询问以来，我还没有找到任何解决方案。我相信答案是：iOS 4 根本不创建字体，或者更确切地说：如果该平台上不存在字体，则以前的 iOS 版本不会创建标签的文本。

我只知道这没有记录，因为它在 WWDC 视频中，例如 MKMapKit mapRect defs

# database-design - 关联两个数据库表（将员工与活动相关联）

> ID：10096397
> 
> 赞同：0
> 
> 时间：2012-04-10T21:00:25.433
> 
> 标签：database-design, relational-database

我正在尝试开发一个数据库来存储由跟踪员工活动的基于 Web 的应用程序收集的数据。我有一个看起来像这样的员工表

```
Employee
--------
id
name
position
email 
```

以及多个活动表，每个表都有不同的列。一个例子：

```
OutreachAndTraining
-----
id
date
county
city
type
...

ProfessionalDevelopment
------
id
date
comments 
```

我希望能够跟踪哪些员工参与了每个活动，但只想记录活动本身一次。将多名员工与一项活动相关联的最佳方式是什么？我是否必须为每个活动创建一个单独的表来存储员工 ID 和活动 ID？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T22:02:47.887

假设一名员工可以参加多个活动，您在这里拥有的是员工和活动之间的 N:M 关系，它是用每个关系的附加“链接”表建模的：

![在此处输入图像描述](../Images/c616ac2aced32fa294b67c20f63376c9.png)

* * *

如果您有多种活动，您可以考虑继承（也称为类别、泛化、子类型或类层次结构），以尽量减少关系的数量（因此“链接”表）：

![在此处输入图像描述](../Images/1280916bbc1cc1fb01dbcadefea68e15.png)

有关继承的更多信息，请在[ERwin 方法指南](https://support.ca.com/cadocs/0/CA%20ERwin%20Data%20Modeler%20r8-ENU/Bookshelf_Files/PDF/ERwin_Methods.pdf)中搜索“子类型关系” 。

# php - 我能否以编程方式确定 ldap_bind 是否因网络问题而失败？

> ID：10096398
> 
> 赞同：1
> 
> 时间：2012-04-10T21:00:34.127
> 
> 标签：php, ldap

我们使用 LDAP 服务器来验证我们的用户。因为服务器是远程访问的，所以我们的网络服务器很可能会在线，而 LDAP 服务器将停机进行维护。

现在，当 ldap_bind 失败时，我认为这是一个用户身份验证问题（错误的用户名/密码）并且我向用户显示了一条消息。但是，如果与 LDAP 服务器的连接失败（并且不一定是凭据问题），那么我最终会遇到数百名用户告诉我他们的密码不起作用，而这不是问题。

我怎样才能从中恢复过来？ldap_connect 似乎在所有情况下都成功，因为连接被推迟到 ldap_bind 被调用。ldap_bind 的返回值是一个简单的布尔值，虽然 PHP 显示的警告消息提供了丰富的信息，但这对我的代码没有太大帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T21:07:18.773

使用`ldap_errno()`.

[http://php.net/manual/en/function.ldap-errno.php](http://php.net/manual/en/function.ldap-errno.php)

可能的错误代码列表： [http ://www.php.net/manual/en/function.ldap-errno.php#20665](http://www.php.net/manual/en/function.ldap-errno.php#20665)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T09:05:30.683

## 请求/响应框架

LDAP 交互由请求和响应组成。响应将始终包含结果代码。当请求为绑定时，非零结果码表示发生错误，例如，十进制结果码`49`表示提供的凭据不正确（在某些情况下出于安全原因，输入时可以返回此结果码不存在以误导攻击者）。应用程序编码人员应通过使用已知的正确工具（例如`ldapsearch`. 例如，尝试：

```
ldapsearch -h hostname -p port \
   -D distinguished-name-here -w <password> -b '' -s base '(&)' 
```

上述搜索建立了一个连接，将连接的授权状态更改为使用给定凭据指定的身份验证 ID，然后从根 DSE 检索属性。如果此搜索成功，则应用程序编码人员可以确信凭证是正确的。

## 网络超时

应用程序编码人员应始终使用支持网络超时概念的 API，因为超时不是 LDAP 协议的一部分——搜索有时间限制（参见 [RFC4511](https://www.rfc-editor.org/rfc/rfc4511)），但协议中没有网络超时。如果 LDAP API 不支持网络超时，则不应考虑将该 API 用于重要的 LDAP 客户端工作。

## 也可以看看

*   [LDAP：编程实践](http://ff1959.wordpress.com/2011/10/27/ldap-programming-best-practices/)

# c# - 将像素转换为多边形

> ID：10096404
> 
> 赞同：1
> 
> 时间：2012-04-10T21:00:58.293
> 
> 标签：c#, image, vector, polygons

我有一张卫星图像，我想获得所有果岭区域。在实践中，我需要从 bmp 加载图像，选择一种颜色和容差并获得许多多边形，这些多边形是照片中的绿色区域。我如何在 C# 中做到这一点？（我需要这个用于飞行模拟）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T21:10:24.573

好吧，第一步是确定给定像素是否在该区域内。我认为这很简单。然后，您可以创建“开”或“关”的像素区域。

然后你需要将像素转换为多边形。如何做到这一点取决于您需要的粒度。如果您想要高精度，您可以使用[Marching Squares](http://en.wikipedia.org/wiki/Marching_squares)从您的区域获取多边形。如果您需要简单的多边形，您将需要更高级的方法来追踪边界。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T21:11:13.187

唔。听起来像“魔棒”算法（来自具有该名称的 PhotoShop/PSP 中的控件，允许您单击一个像素以选择某个颜色阈值内的所有相邻像素）。

因此，第一步是在位图上选择一个被标识为“绿色”的像素，该像素应该是多边形的一部分。然后，您可以从该点递归地向左、向右、向上和向下移动，并测试该点的像素是否在您从原始像素颜色设置的阈值范围内。如果该点在阈值内且尚未在集合中，则将其添加到集合中，并继续遍历；如果该点不够“绿色”，或者已经被映射，则返回。有一些方法可以通过限制后续递归调用可以遍历的方向来限制“回溯”。例如，假设我们打了四个电话，向上、向下、向左和向右移动。从“原点”向左传输的呼叫只能从该点开始向左或向上传输的进一步呼叫。

现在你有了一组像素，大致对应一组几何点。然后，您必须确定定义多边形边界的这些点的子集。这被称为计算这些点的“凸包”，维基百科有许多可以用 C# 实现的算法：[http](http://en.wikipedia.org/wiki/Convex_hull_algorithms) ://en.wikipedia.org/wiki/Convex_hull_algorithms 。

最容易理解的可能是[格雷厄姆扫描](http://en.wikipedia.org/wiki/Graham_scan)：将所有点排列成一个列表，从第一个点（A）开始，画一条线到第二个点（B），然后判断从B点到第三个点（C）的直线是否构成“左转” ” 或从 A 到 B 的方向“右转”。如果是“左转”，请通过绘制从 B 到 C 的线来转弯，然后像以前一样将该线与从 C 到 D 的线进行比较. 如果是“右转”，那么忘记 B 作为凸包的可能顶点，从 A 画到 C，然后检查 C 到 D 的线是否是左转。每当您看到“右转”时，请忽略定义线的三个点的当前“中间点”，而是在其他两个点之间画一条线。继续，将列表从最后一点绕回 A，直到这些点定义了一系列线，这些线都从最后一条线的方向“左转”。这是点集的“凸包”，它可以在 NlogN 时间内对任何点列表完成。

明白“凸壳”就是这样；您永远无法从中获得凹形（如星星）。如果这很重要，您将需要调整算法以允许一些“右转”但不允许任何线段交叉。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-10T21:53:53.913

使用 LockBits 并遍历每个字节（取决于像素格式 - 索引图像使用调色板，因此您需要首先询问它以获得在容差范围内的调色板索引 - 对于非索引（和非 1bpp/16ppgreyscale），您可以访问直接颜色通道 - 请参阅[GDI+ FAQ](https://web.archive.org/web/20140714181132/http://bobpowell.net/gdiplus_faq.aspx)以获取帮助）。您范围内的每个彩色像素都可以直接写入另一个图像（即只有您想要的像素 - 其余像素填充不可见像素 - Alpha 0） - 或写入集合。我个人会先做前者。这非常快（如果您使用 LockBits）。然后是使用像素行走算法的边缘检测来计算“碎片”（如果您愿意，可以使用不规则多边形）。AForge 库可能会在这里为您提供帮助。

# winforms - DataGridViewComboBoxColumn 自动调整大小不正确或仅在选择时正确

> ID：10096406
> 
> 赞同：1
> 
> 时间：2012-04-10T21:01:20.087
> 
> 标签：winforms, c#-4.0, datagridviewcolumn, datagridviewcombobox

我有一个 DataGridViewComboBoxColumn 对象，它用作我的 gridview 中的一列的数据源。

代码如下：

```
DataGridViewComboBoxColumn comboBoxColumn = new DataGridViewComboBoxColumn();

comboBoxColumn.DataSource = Enum.GetValues(typeof(MyEnums));
comboBoxColumn.DataPropertyName = "MyPropertyName";
comboBoxColumn.Name = "My Column Name";

dataGridView.Columns["MyPropertyName"].AutoSizeMode = DataGridViewAutoSizeColumnMode.AllCells;
//dataGridView.Columns["MyPropertyName"].AutoSizeMode = DataGridViewAutoSizeColumnMode.None;
//dataGridView.Columns["MyPropertyName"].Width = CalculateColumnWidthFromEnum(typeof(MyEnums));
dataGridView.Columns.Remove(dataGridView.Columns["MyPropertyName"]);
dataGridView.Columns.Insert(1, comboBoxColumn); 
```

我很满意 WinForms 如何恰当地显示我的枚举等等。但是，描述我的枚举的文字将被缩短，只有在我打开下拉菜单然后离开该控件时才会展开。

我还尝试手动设置宽度（如注释掉的行所示）并且没有效果

我的网格视图中有两列这样的列。

我在这里错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T20:34:16.637

我的方法全错了。

我正在调整我删除的列的宽度

```
dataGridView.Columns.Remove(dataGridView.Columns["MyPropertyName"]); 
```

相反，我应该使用`comboBoxColumn`如下设置列宽：

```
comboBoxColumn.Width = whateverWidthIwant; 
```

感谢大家的帮助！

# ssh - “连接由 [HOST IP] 关闭”使用 dsa 密钥身份验证

> ID：10096411
> 
> 赞同：10
> 
> 时间：2012-04-10T21:01:31.850
> 
> 标签：ssh, openssh

我有一个使用 Perceus Cluster Software ( [http://perceus.org](http://perceus.org) ) 的共享 /home 设置用于我们的集群。节点使用 CentOS 6.1 x86_64。/home 由 nfs (NFSv4) 从头到节点共享。

```
root@head~]$ cat /etc/exports 
/var/lib/perceus/ 10.10.10.0/255.255.255.0(ro,no_root_squash,async)
/home/ 10.10.10.0/255.255.255.0(rw,no_root_squash,no_all_squash,async) 
```

这是每个节点上的 /etc/fstab （都一样）。

```
...
10.10.10.2:/var/lib/perceus/ /var/lib/perceus/ nfs ro,soft,bg 0 0
10.10.10.2:/home/ /home nfs rw,soft,bg 0 0 
```

节点上的 /etc/fstab 是具有相同 UID:GID 的 head/master 的副本。

我使用以下方法创建了密钥对：

```
$ cd ~
$ rm -rf .ssh
$ mkdir .ssh
$ chmod 700 .ssh
$ ssh-keygen -t dsa -P ""
Generating public/private dsa key pair.
Enter file in which to save the key (/home/user/.ssh/id_dsa):
Your identification has been saved in /home/user/.ssh/id_dsa.
Your public key has been saved in /home/user/.ssh/id_dsa.pub.
The key fingerprint is:
[SNIPPED] user@head
The key's randomart image is:
+--[ DSA 1024]----+
[SNIPPED]
$ cat ~/.ssh/id_dsa.pub >> ~/.ssh/authorized_keys
$ chmod 400 ~/.ssh/authorized_keys 
```

**这是问题所在。** **当我尝试 ssh 进入每个节点时，我收到“连接已关闭”**错误。这是调试输出。

```
$ ssh node01
Connection closed by 10.10.10.101

$ ssh node01 -vvv
OpenSSH_5.3p1, OpenSSL 1.0.0-fips 29 Mar 2010
debug1: Reading configuration data /etc/ssh/ssh_config
debug1: Applying options for *
debug2: ssh_connect: needpriv 0
debug1: Connecting to node01 [10.10.10.101] port 22.
debug1: Connection established.
debug1: identity file /home/user/.ssh/identity type -1
debug1: identity file /home/user/.ssh/id_rsa type -1
debug3: Not a RSA1 key file /home/user/.ssh/id_dsa.
debug2: key_type_from_name: unknown key type '-----BEGIN'
debug3: key_read: missing keytype
debug3: key_read: missing whitespace
debug3: key_read: missing whitespace
debug3: key_read: missing whitespace
debug3: key_read: missing whitespace
debug3: key_read: missing whitespace
debug3: key_read: missing whitespace
debug3: key_read: missing whitespace
debug3: key_read: missing whitespace
debug3: key_read: missing whitespace
debug3: key_read: missing whitespace
debug2: key_type_from_name: unknown key type '-----END'
debug3: key_read: missing keytype
debug1: identity file /home/user/.ssh/id_dsa type 2
debug1: Remote protocol version 2.0, remote software version OpenSSH_5.3
debug1: match: OpenSSH_5.3 pat OpenSSH*
debug1: Enabling compatibility mode for protocol 2.0
debug1: Local version string SSH-2.0-OpenSSH_5.3
.... SNIPPED ...
debug2: dh_gen_key: priv key bits set: 139/256
debug2: bits set: 482/1024
debug1: SSH2_MSG_KEX_DH_GEX_INIT sent
debug1: expecting SSH2_MSG_KEX_DH_GEX_REPLY
debug3: Wrote 144 bytes for a total of 981
debug3: check_host_in_hostfile: filename /home/user/.ssh/known_hosts
debug3: check_host_in_hostfile: match line 1
debug3: check_host_in_hostfile: filename /home/user/.ssh/known_hosts
debug3: check_host_in_hostfile: match line 1
debug1: Host 'node01' is known and matches the RSA host key.
debug1: Found key in /home/user/.ssh/known_hosts:1
debug2: bits set: 501/1024
debug1: ssh_rsa_verify: signature correct
debug2: kex_derive_keys
debug2: set_newkeys: mode 1
debug1: SSH2_MSG_NEWKEYS sent
debug1: expecting SSH2_MSG_NEWKEYS
debug3: Wrote 16 bytes for a total of 997
debug2: set_newkeys: mode 0
debug1: SSH2_MSG_NEWKEYS received
debug1: SSH2_MSG_SERVICE_REQUEST sent
debug3: Wrote 48 bytes for a total of 1045
debug2: service_accept: ssh-userauth
debug1: SSH2_MSG_SERVICE_ACCEPT received
debug2: key: /home/user/.ssh/identity ((nil))
debug2: key: /home/user/.ssh/id_rsa ((nil))
debug2: key: /home/user/.ssh/id_dsa (0x7f79b940f650)
debug3: Wrote 64 bytes for a total of 1109
debug1: Authentications that can continue: publickey,gssapi-keyex,gssapi-with-mic,password
debug3: start over, passed a different list publickey,gssapi-keyex,gssapi-with-mic,password
debug3: preferred gssapi-keyex,gssapi-with-mic,publickey,keyboard-interactive,password
... [SNIPPED]...
debug1: Next authentication method: publickey
debug1: Trying private key: /home/user/.ssh/identity
debug3: no such identity: /home/user/.ssh/identity
debug1: Trying private key: /home/user/.ssh/id_rsa
debug3: no such identity: /home/user/.ssh/id_rsa
debug1: Offering public key: /home/user/.ssh/id_dsa
debug3: send_pubkey_test
debug2: we sent a publickey packet, wait for reply
debug3: Wrote 528 bytes for a total of 1637
debug1: Server accepts key: pkalg ssh-dss blen 434
debug2: input_userauth_pk_ok: SHA1 fp 46:a2:c3:86...........
debug3: sign_and_send_pubkey
debug1: read PEM private key done: type DSA
debug3: Wrote 592 bytes for a total of 2229
Connection closed by 10.10.10.101 
```

我确保 /etc/ssh/sshd_config 允许基于密钥的身份验证（PubkeyAuthentication yes）。我已确保 /home 上的权限（一旦安装在节点上）是正确的。用户已正确验证。我已经尝试过使用和不使用“no_all_squash”重新启动 nfs、rpcidmap、rpcbind 和 nfslock 来安装 nfs。

我已经在具有不同主/头节点的节点上安装了 CentOS5。CentOS6 似乎给我带来了额外的问题。

如果我不创建密钥，当然会提示我输入密码。

我的 hosts.allow/deny 在客户端和服务器上都是空的。

root 用户可以连接。Perceus 为 root 用户处理密钥生成，因为它是虚拟文件系统的一部分。我猜我的密钥生成有问题，但我不知道问题是什么。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-20T02:22:53.227

正确的解决方案是解决问题，而不是禁用 pam，因为您可能隐藏了安全问题。

ssh 失败是因为 PAM 通过一些检查失败来拒绝用户登录。验证`/etc/pam.d/sshd`您有哪些规则以及可能失败的内容。

最常见的问题是用户没有密码（与 比较`/etc/passwd`，`/etc/shadow`或检查您的`/etc/nsswitch`and`/etc/pam.d/*`以查看用户和身份验证的来源），但也没有主目录，缺少一些额外的身份验证配置，UID 太低或太高等。

如果它丢失了密码，至少要确保你在`/etc/ssh/sshd_config`

```
PermitEmptyPasswords no 
```

这会阻止 ssh 以允许没有密码的用户登录（但对其他协议没有任何作用，如 telnet、ftp、http 和登录）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-11T14:14:55.287

# 解决方案：

按照下面的建议，我检查`/var/log/security`了节点（主机）。这显示了：

```
fatal: Access denied for user user by PAM account configuration 
```

然后我编辑`/etc/ssh/sshd_config`更改：

```
UsePAM yes 
```

至

```
UsePAM no 
```

重新启动节点，我现在可以执行无密码登录。

谢谢！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-31T19:20:11.480

使用无密码授权是不好的。selinux 是否打开了这些服务器？如果是，那么您必须关闭 selinux，或者通过“restorecon -R -v /home/user/”恢复默认的 selinux 策略。 [这是一个已知问题](https://bugzilla.redhat.com/show_bug.cgi?id=499343)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-09-26T13:57:38.077

我有一个和你非常相似的问题。

事实证明，我的问题，也可能是你的问题，是因为我的主目录是`NFS`挂载的，并且`selinux`（在 CentOS 7 上）抛出了一些错误（很难追踪）。修复很简单。

```
setsebool -P use_nfs_home_dirs 1 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-04-27T18:09:38.863

就我而言，我没有使用 useradd 创建用户，而是在 /etc/passwd 文件中添加了用户，并为用户创建了包含所有必需文件的主目录。

在用户的主目录中创建 .ssh 目录后，使用 useradd 创建用户并将 pub 密钥添加到 authorized_keys 文件中，问题得到解决。

顺便说一句，我使用的是 centos 7

希望这对某人有所帮助。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-01-06T17:45:00.737

对我来说，我有损坏的 pam.d 文件。我从类似的服务器复制了一套新的，一切都很好。我没有花时间寻找具体的损坏，但我想我会添加我的 2 位，以防将来有人读到这个并需要更多的想法。

# python - python/bottle 并返回一个字典

> ID：10096420
> 
> 赞同：2
> 
> 时间：2012-04-10T21:02:12.120
> 
> 标签：python, gson, bottle

我正在使用 python/bottle 将 dict/json 返回到我的 android 应用程序（使用 GSON 解析为 JSON 的应用程序）。它似乎没有正确解析 python 文本。

这是python返回的内容：

```
[{u'slot': -1.0, u'rnd': -1.0}] 
```

但是 Gson 设置 slot = 0 和 round = 0，所以它要么没有正确读取它，要么只是将其设置为默认值。我怎样才能让 python 不返回 unicode 编码的字符串，而只返回一个常规或字符串。这是有问题的python代码

```
...
return str(move) 
```

Move 是为 pymongo 查找查询返回的对象，在测试时它是 [{u'slot': -1.0, u'rnd': -1.0}]，好吧 python 添加了 'u'，当我们查看rockmongo中没有'u'的值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T13:35:27.310

如果你想让瓶子把你的字典变成 JSON，然后返回字典。不是 str(...)，不是包含 dict 的列表，而只是 dict。

例子：

```
from bottle import route

@route('/some/path')
def some_callback():
    return {'slot': -1.0, 'rnd': -1.0} 
```

# c++ - 如何自动关闭打开的 vtk 窗口？

> ID：10096423
> 
> 赞同：1
> 
> 时间：2012-04-10T21:02:21.180
> 
> 标签：c++, qt, vtk

如何避免出现 vtk 的渲染窗口？发生的事情是我使用了来自 QVTKWidget 的小部件，因为我不再需要从 vtk 创建的窗口来渲染图像，但我无法削减我认为该窗口会消失的一些点，因为它会影响图像该小部件加载。我已经尝试过使用像 Delete() 这样的 vtkobject 析构函数和像 SetRenderWindow(NULL) 这样清除 vtkRenderWindowInteractor 的方法，但它们都不起作用。为了简化，如何自动关闭打开的 vtk 窗口？

![快照](../Images/8122791742d000ae1f1431fcc7da985c.png)

*“渲染窗口”是由 vtk 创建的窗口，其后面的“应用程序”是我的应用程序的窗口。

*“渲染窗口”仅在“应用程序”结束时关闭。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T02:48:40.910

在 MS Windows 下， vtkRenderWindow::Finalize() 为我工作......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T01:43:48.007

QVTKWidget 是从 QWidget 派生的，您应该使用 Qt 提供的标准方法。使用 QVTKWidget 时，您实际上是在使用 Qt 的事件循环。您是否尝试在 QVTKWidget 上调用 close ？

# python - Django 最佳实践：如何清理和呈现表单

> ID：10096425
> 
> 赞同：7
> 
> 时间：2012-04-10T21:02:33.340
> 
> 标签：python, django

情况：我有一个用于搜索的表单，我在结果页面上返回相同的表单供用户过滤他们的结果。为了摆脱垃圾输入，我实现了一个 clean_xxx 方法。

不幸的是，即使已清理该表单，该表单仍会在带有垃圾输入的结果页面上返回。如何获得要显示的干净数据？

这里有一些想法：

1.  在clean_xxx方法中，设置self.data.xxx=clean_xxx值
2.  使用cleaned_data 重新初始化一个新表单。

表格.py：

```
 SearchForm:
    def clean_q(self):
    q = self.cleaned_data.get('q').strip()
    # Remove Garbage Input
    sanitized_keywords = re.split('[^a-zA-Z0-9_ ]', q)
    q = "".join(sanitized_keywords).strip()

    #TODO: Fix
    self.data['q'] = q

    return q 
```

视图.py

```
 search_form = SearchForm(params, user=request.user)
    if  search_form.is_valid():
        # Build the Query from the form
        # Retrieve The Results

    else:
        # For errors, no results will be displayed
        _log.error('Search: Form is not valid. Error = %s' %search_form.errors)

    response = {
                'search_form': search_form...
    } 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T05:45:39.537

无论您从 clean_xxx 方法返回什么，都会显示什么。因此，例如：

表格.py：

```
class SearchForm(forms.Form):
    def clean_q(self):
        return "spam and eggs" 
```

在上面的示例中，该字段将显示“垃圾邮件和鸡蛋”。

如果它不这样做，那么问题很可能在于您的方法的验证逻辑。

# ember.js - 在 Ember.js 中声明绑定的正确方法

> ID：10096428
> 
> 赞同：4
> 
> 时间：2012-04-10T21:02:43.350
> 
> 标签：ember.js

我已经阅读了 Ember.js 文档 + 示例，并且带有绑定的嵌套视图让我有点困惑。

我有以下缩写的 HTML（工作正常）：

```
{{#view App.outerArea}}
    {{#view innerArea}}
        {{view Ember.TextField valueBinding="parentView.parentView.bound.username"}}
    {{/view}}
{{/view}} 
```

...和 ​​JavaScript（也可以正常工作）：

```
App = Ember.Application.create();
App.outerArea = Ember.View.extend({
    bound : {
        username:'test',
    },
    innerArea: Ember.View.extend({}),
}); 
```

（如果我从 HTML 中删除 innerArea，我可以完全删除 'parentView.parentView.'。）

为了清理这个我试过：

```
...
{{view Ember.TextField valueBinding="bound.username"}}
...
innerArea: Ember.View.extend({
    bound: function() {
        return App.outerArea.bound;
    }
}) 
```

并尝试：

```
{{view Ember.TextField valueBinding="getPath(bound.username)"}} // with above bound: function(). 
```

还有其他一些组合，但它们根本不起作用。

有没有更*优雅*的方式从 TextField valueBinding 中引用“parentView.parentView.bound.username”？有不止一种方法可以解决这个问题吗？这类事情的最佳设计模式是什么？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T04:09:57.373

首先，在原始示例中，您只需要一个`parentView`绑定文本字段的值*（参见[http://jsfiddle.net/MikeAski/tkDp6/](http://jsfiddle.net/MikeAski/tkDp6/)）*。

其次，您在内部视图中定义`bound`绑定的方式不好：您应该尝试：

```
...
innerArea: Ember.View.extend({
    boundBinding: 'parentView.bound'
}) 
```

*（见[http://jsfiddle.net/MikeAski/tkDp6/2/](http://jsfiddle.net/MikeAski/tkDp6/2/)）*

# ruby - 红宝石正则表达式

> ID：10096430
> 
> 赞同：0
> 
> 时间：2012-04-10T21:02:49.470
> 
> 标签：ruby

我正在尝试创建一个程序，用户使用正则表达式输入四个数字。如果其中一个数字是 13，则左边的数字不计入总和。我的问题是创建一个异常，其中没有一个数字等于 13。我似乎无法为我的异常找到正则表达式

```
puts "enter a number then hit enter four times"

number1 = STDIN.gets

number2 = STDIN.gets
number3 = STDIN.gets

number4 = STDIN.gets

if number1 =~ /13/ then
  puts number2.to_i + number3.to_i + number4.to_i
end

if number2 =~/13/ then
  puts number3.to_i + number4.to_i
end

if number3 =~/13/ then
  puts number4.to_i
 if number4 =~/13/ then
   puts "0"
 end
 if number1 != 13 or number2 != 13 or number3 != 13 or number4 != 13
   puts number1.to_i + number2.to_i + number3.to_i + number4.to_i
 end
end 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-10T21:13:05.053

我并不是要重写你的整个逻辑，但你可以使用 enumerable 模块并执行类似的操作

```
puts "enter a number then hit enter four times"

# Collect 4 numbers
numbers = 4.times.map{ STDIN.gets }.reverse

# Take the numbers until the first 13, then sum them
puts numbers.map(&:to_i).take_while{ |a| a != 13 }.reduce(:+) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T22:38:43.100

gmalette，这是非常有趣的语法。我从中吸取了教训。但是，您的代码需要让 take_while 方法从数组末尾倒数。此外，reduce 方法会将这些字符串添加到一起。所以“44”+“55”=“4455”。这有效：

```
puts "Enter four numbers separated by spaces:"
numbers = STDIN.gets.split
numbers.reverse!.collect! {|s| s.to_i }
puts numbers.take_while{ |a| a != 13 }.reduce(:+) 
```

那个 reduce 语句真的很有趣。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T04:08:30.840

如果你想使用正则表达式，应该提到的是，下面的逻辑会为不止 13 个产生 true。它也会匹配 413、131、941771341、...

```
if number1 =~ /13/ then 
```

将其更改为`if number =~ /^13$/ then`会更准确，但不如使用 to 好`to_i`。

有问题的另一行...

```
if number1 != 13 or number2 != 13 or number3 != 13 or number4 != 13 
```

...没有按预期工作，因为您正在将字符串与数字进行比较，并且逻辑连接应该是`and`. 将其与“13”进行比较也不起作用，因为它实际上是“13\n”。您可以使用`number1.to_i != 13 and number2.to_i != 13`或类似的东西，`number1 !~ /^13$/ and number2 !~ /^13$/ ...` 您也可以找出在哪里使用`else`语句。

我真的建议研究其他答案。它们更加优雅和Rubyesque。

# ios - iOS 音乐库的私有 API

> ID：10096432
> 
> 赞同：0
> 
> 时间：2012-04-10T21:02:53.937
> 
> 标签：ios, api, jailbreak, iphone-privateapi

我正在评估开发使用私有 API 供个人使用并可能在 Cydia 中发布的应用程序的实用性。具体来说，我想了解将音乐添加到音乐库是多么容易。半小时的谷歌搜索揭示了[这一点](https://github.com/nst/iOS-Runtime-Headers)，但我不相信我会在没有大量试验和错误的情况下找到我需要的东西。有没有关于如何开始这项任务的提示......我不禁想到很多人以前一定已经解决过这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T17:12:04.927

我能找到的最好的见解是 Stackoverflower 的一个开源库：

[https://github.com/H2CO3/libipodimport](https://github.com/H2CO3/libipodimport)

它使用了您找到的链接中的一些私有 API，但似乎也在 Springboard 中创建了一个钩子——也许只有 Springboard 应用程序可以访问音乐库（或者可能只是因为作者希望它是持久的过程）。

您可以联系作者并找出他/他们从哪里获得信息，或查看自述文件以获取有关来源（推特句柄）的详细信息。

# html - 如何创建单列内容优先布局

> ID：10096433
> 
> 赞同：0
> 
> 时间：2012-04-10T21:02:58.027
> 
> 标签：html, css

我有一个带有页眉和页脚的单列固定宽度布局，我必须按照视图顺序使用以下内容。

1.  标题
2.  导航
3.  基本内容
4.  基本内容
5.  主要内容
6.  页脚

项目 3,4 和 5 将是动态的并垂直扩展（高度未知） 项目 1,2 和 6 将是固定高度。我们的 SEO 经理说他希望“主要内容”成为正文中的第一个 div，或者至少在基本内容（源视图）之上。

我尝试将主包装器（围绕所有 6 个 div）设置为相对然后将“主要内容”绝对定位到底部。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T04:55:31.830

嘿，你可以像这样轻松地做到这一点

**CSS**

```
div{
    background:green;
    margin-top:10px;
    padding:20px;
    color:white;
}

#five-5{
display:none;
} 
```

**HTML**

```
<div id="five"></div>
<div id="one">Header</div>
<div id="two">navigation</div>
<div id="three">basic content</div>
<div id="four">basic content</div>
<div id="six">Footer here </div>

<div id="five-5">Main Container here </div> 
```

**JAVA脚本**

```
document.getElementById('five').innerHTML=document.getElementById('five-5').innerHTML; 
```

现场演示[http://jsfiddle.net/rohitazad/tk7ky/1/](http://jsfiddle.net/rohitazad/tk7ky/1/)

# android - PagerAdapter.instantiateItem 在 ICS 中定期调用

> ID：10096440
> 
> 赞同：0
> 
> 时间：2012-04-10T21:03:42.143
> 
> 标签：android, android-viewpager, android-4.0-ice-cream-sandwich

我有一个使用 ViewPager 的应用程序。在 ViewPager 中我不使用 Fragments，只使用膨胀的视图（带有一些内容的 RelativeLayout）。这些视图是预先创建的并保存在一个列表中。我创建了简单的 PagerAdapter 实现，它覆盖了方法 getCount、isViewFromObject、instantiateItem 和 destroyItem。

在 Android 2.x 设备上运行时，一切运行良好，并且方法 instantiateItem 仅对作为屏幕外页面加载的每个页面调用一次。

但是当我在 ICS 上运行时，instantiateItem 方法被循环调用，整个应用程序停止响应。我所能意识到的是，instanceiteItem 方法作为测量的结果被调用。但我不知道为什么在 ICS 上测量会周期性地循环调用，我能做些什么来阻止它。

这是一个代码片段，但我相信它没有什么特别之处：

```
 mAdapter = new PagerAdapter()
    {
        @Override
        public boolean isViewFromObject(View arg0, Object arg1)
        {
            return arg0 == arg1;
        }

        @Override
        public int getCount()
        {
            return mPages.size();
        }

        @Override
        public Object instantiateItem(ViewGroup container, int position)
        {
            View v = mPages.get(position);
            boolean isChild = false;
            for(int idx = 0; idx < getChildCount(); ++idx)
            {
                if(getChildAt(idx) == v)
                {
                    isChild = true;
                    break;
                }
            }
            if(!isChild)
                addView(v);
            return v;
        }

        @Override
        public void destroyItem(ViewGroup container, int position, Object item)
        {
            removeView((View)item);
        }

    };
    setAdapter(mAdapter); 
```

此代码位于派生自 ViewPager 的类的初始化方法中。

我真的很感激任何提示，因为这个问题让我发疯，并使我的应用程序无法在 ICS 设备上使用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T13:36:15.837

答案隐藏在应用程序本地化中 - 我覆盖 Application.onConfigurationChange 并设置新的默认区域设置并使用此新区域设置更新配置。

这是强制应用程序区域设置的推荐方法，但在 ICS 上，当切换到横向时，它会导致我的包含 ViewPager 的活动定期重新创建。

如果您遇到这种情况，我建议您重写 Activity.onConfigurationChange 而不是 Application 的方法。出于某种原因，它在 ICS 上运行良好。

# opencl - 确定最佳工作组大小和工作组数量的算法是什么

> ID：10096443
> 
> 赞同：12
> 
> 时间：2012-04-10T21:04:06.387
> 
> 标签：opencl

OpenCL 标准定义了以下选项来获取有关设备和编译内核的信息：

*   CL_DEVICE_MAX_COMPUTE_UNITS

*   CL_DEVICE_MAX_WORK_GROUP_SIZE

*   CL_KERNEL_WORK_GROUP_SIZE

*   CL_KERNEL_PREFERRED_WORK_GROUP_SIZE_MULTIPLE

给定这个值，我如何计算工作组的最佳大小和工作组的数量？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-10T23:50:20.313

您通过实验为您的算法发现这些值。使用分析器获取硬数字。

我喜欢使用 CL_DEVICE_MAX_COMPUTE_UNITS 作为工作组的数量，因为我经常依赖于同步工作项。我通常运行几乎没有分支的内核，因此在每个计算单元中执行的时间相同。

某些倍数的 CL_KERNEL_PREFERRED_WORK_GROUP_SIZE_MULTIPLE 将最适合您的设备。这个倍数实际上取决于您的内存访问模式和您对每个工作项所做的工作类型。当您运行繁重的计算密集型 (ALU) 内核时，请使用 1 作为倍数。如果您受到内存访问的限制，请尝试使用更大的倍数来隐藏内存延迟。使用分析器来确定您的访问时间和 ALU 时间何时是最佳的。

对于任何设备，ALU 获取的最佳比率是 1:1。这在实践中很少实现，因此您希望保持 ALU/SIMD 组饱和。这意味着 ALU:fetch 应尽可能大于 1。小于 1 意味着您应该尝试更大的工作组大小以更好地隐藏内存延迟。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-01-31T11:33:53.457

正如 mfa 所说，您必须通过实验来发现这些。我想补充一点，这取决于您正在计算的内容（特别是作业的大小，即每个工作项的大小），有时一个好的尝试可以是：

*   很多工作项目都有小工作组，每个工作项目都很小。
*   工作组越大，工作项越少，每个工作项越大。

也就是说，基本上检查基本情况并弄清楚它如何影响处理管道。

本质上，您必须对其进行调整。我经常针对不同的参数执行多次（分析它），然后生成一个曲面图以查看它的行为。

# java - 如何在 JTabbedPane 中验证选项卡名称

> ID：10096447
> 
> 赞同：0
> 
> 时间：2012-04-10T21:04:37.777
> 
> 标签：java, swing, jtabbedpane

我正在使用一个`JideTabbedPane`. 延伸`JTabbedPane`。用户编辑选项卡的名称后，我想检查名称是否符合某些条件，例如名称不能是空字符串。如果不符合条件，则应使用选项卡的旧名称。

我用 a`TabEditingListener`试图完成这个任务，但是没有用。这是我写的：

```
 addTabEditingListener(new TabEditingListener() {
    public void editingStopped(TabEditingEvent event) {
      if (event.getNewTitle().isEmpty()) {
        setTitleAt(event.getTabIndex(), event.getOldTitle());
      }
    }
  } 
```

任何想法将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T22:03:12.923

你应该有一个 else 声明，如果它不是无效的，则将文本设置为他们输入的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T21:10:14.017

我不熟悉，`JideTabbedPane`所以可能有更好的解决方案和机制。但是我猜在编辑标题后调用的方法会根据源代码`JTabbedPane#setTitleAt`触发属性。您可以侦听该事件并执行验证。`PropertyChangeEvent``indexForTitle`

# jquery - 跨域 jQuery Ajax 请求和 WCF REST 服务

> ID：10096449
> 
> 赞同：7
> 
> 时间：2012-04-10T21:04:41.623
> 
> 标签：jquery, wcf, rest, jsonp

我正在调用（Ajax 请求）WCF REST 服务，并且该请求是跨域请求。

如果我在同一个域中部署我的服务，一切都会像奶油一样工作。最终在生产中，服务将位于不同的域中。

我正在使用 jQuery 1.5.2。我的服务向我返回了一条错误消息：

```
errorThrown: "jQuery15208493315000087023_1334089616458 was not called"
textStatus: "parsererror" 
```

虽然在 Firefox 中我可以看到 JSON 值，但执行落在 Ajax 请求的错误处理程序上。

我的 Ajax 请求是：

```
function CallService() {
    $.ajax({
        type: "GET", 
        url: "http://SomeService/EmpService.svc/GetValues?dv=1455",
        contentType: "application/json; charset=utf-8",
        dataType: "jsonp", 
        processdata: false,            
        success: function (data) {
            ServiceSucceeded(data);
        },
        error: function (jqXHR, textStatus, errorThrown) {
            debugger;
            alert("Service Error");
            ServiceFailed(jqXHR, textStatus, errorThrown);
        }
    });
} 
```

在 WCF 服务端，我已将 CrossDomainScriptAccess 配置为 true：

```
<webHttpBinding>
  <binding name="webHttpBindingWithJsonP"
           crossDomainScriptAccessEnabled="true" />
</webHttpBinding> 
```

我从服务器得到的 JSON 响应是：

```
[{"Message": "Stop On Duty", "MessageTime": "\/Date(1334068773893-0500)\/"},
 {"Message": "Start On Duty", "MessageTime": "\/Date(1334068763540-0500)\/"},
 {"Message": "App_testing_4102012924am", "MessageTime": "\/Date(1334068533627-0500)\/"},
 {"Message": "Kunal_testing_4102012924am", "MessageTime": "\/Date(1334067945510-0500)\/"},
 {"Message": "Alert: Door Open", "MessageTime": "\/Date(1334066280963-0500)\/"}] 
```

我在设置中遗漏了什么吗？如果将服务移动到同一个域，则整个代码都可以正常工作。

我查看了类似的帖子，但无法完成这项工作。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-16T22:20:27.167

好吧，我自己想通了。解决方案是修改包含服务详细信息的配置文件

我在配置文件中添加了标准端点和绑定

```
<standardEndpoints>
      <webScriptEndpoint>
       <standardEndpoint crossDomainScriptAccessEnabled="true">
       </standardEndpoint>
      </webScriptEndpoint>
      </standardEndpoints>

  <bindings>

  <webHttpBinding>
    <binding name="webHttpBindingWithJsonP"
             crossDomainScriptAccessEnabled="true" />
  </webHttpBinding> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-07T12:19:27.607

我还需要添加`<webHttpEndpoint>`以使其正常工作：

```
<standardEndpoints>
    <webHttpEndpoint>
        <standardEndpoint crossDomainScriptAccessEnabled="true"></standardEndpoint>
    </webHttpEndpoint>
    <webScriptEndpoint>
         <standardEndpoint crossDomainScriptAccessEnabled="true"></standardEndpoint>
    </webScriptEndpoint>
</standardEndpoints>

<bindings>
    <webHttpBinding>
        <binding name="webHttpBindingWithJsonP" crossDomainScriptAccessEnabled="true" />
    </webHttpBinding>
</bindings> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-18T08:16:11.917

```
 [OperationContract]
    [WebGet( ResponseFormat = WebMessageFormat.Json, BodyStyle = WebMessageBodyStyle.Bare, RequestFormat=WebMessageFormat.Json,
    UriTemplate = "GetEmployeeJson")]
     List<EmployeeData> GetEmployeeJson(); 
```

网页配置

```
 <bindings>
      <webHttpBinding>
          <binding name="webHttpBindingWithJsonP"
                   crossDomainScriptAccessEnabled="true" />
      </webHttpBinding>
  </bindings>
  <behaviors>
      <serviceBehaviors>
          <behavior name="WcfExample.Service1Behavior">
              <serviceMetadata httpGetEnabled="true"/>
              <serviceDebug includeExceptionDetailInFaults="true"/>
          </behavior>
      </serviceBehaviors>
      <endpointBehaviors>
          <behavior name="WebBehavior">
              <webHttp/>
          </behavior>
      </endpointBehaviors>
  </behaviors>
  <services>
      <service behaviorConfiguration="WcfExample.Service1Behavior" name="WcfExample.Service1">
          <endpoint address="" binding="webHttpBinding" contract="WcfExample.IService1" bindingConfiguration="webHttpBindingWithJsonP" behaviorConfiguration="WebBehavior" />
      </service>
  </services> 
```

jQuery ajax 调用 wcf 服务

```
 $.ajax({
            type: "GET",
            contentType: "application/javascript",
            crossDomain: true,
            dataType: 'jsonp',
            cache: true,
            url: 'http://localhost:49349/Service1.svc/GetEmployeeJson',
            success: function (data) {
                var html = [];

                alert(data[0].lastname);

                $.each(data, function (index, value) {
                    $("#TableID").append("<tr><td>" + value.HREmpId + "</td><td>" + value.firstName + "</td><td>" + value.lastname + "</td><td>" + value.address + "</td><td>" + value.city + "</td></tr>");

                });

            },

            error: function (xhr, ajaxOptions, thrownError) {
                alert("here error");
                alert(thrownError);
                if (xhr != null) {

                    var err = JSON.parse(xhr.responseText); //you can throw a code-behinde Exception and it will automatically                                                 //render to a valid JSON string when we rerieve the responseText
                    alert("ErrorMessage: " + err.Message + " StackTrace: " + err.StackTrace);

                }
            }
        }); 
```

# python - 以 10 为底的 int() 的无效文字

> ID：10096450
> 
> 赞同：2
> 
> 时间：2012-04-10T21:04:44.703
> 
> 标签：python

我编写的货币转换程序继续出现此错误

```
baht = raw_input("enter baht")
usd = int(baht) / (30.94)
print "%r baht equals %r usd" % (baht, usd) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T21:09:07.903

问题：

1.  使用 float(baht) 作为浴缸，它可能是一个利率，而不是 int。
2.  不要使用逗号 (,) 作为小数分隔符的原始输入内容，使用点 (.)

# sql - T-Sql 函数中的动态 openrowset 还是可行的替代方案？

> ID：10096451
> 
> 赞同：0
> 
> 时间：2012-04-10T21:04:48.387
> 
> 标签：sql, sql-server, sql-server-2008, tsql, sql-server-2005

我不太确定如何表达这一点。这是问题所在：

我有 1-n 个项目需要加入到不同的系统 (AS400) 以获取一些数据。

如果我在之外指定标准，则`openrowset`需要永远，例如：`where``openrowset`

```
select * from openrowset('my connection string', 'select code, myfield from myTable') 
where code = @code 
```

我的想法是创建一个接收项目编号并使用动态 sql 将其注入`openrowset`字符串的函数，例如：

```
declare @cmd varchar(1000)
set @cmd = 'select * from openrowset('my connection string',
        ''select code, myfield from myTable where code = ' + @code + ''')' 
```

显然我不能`insert.. exec..`在函数内部使用策略。有没有更好的方法来实现这一目标？我打算在需要使用外部数据的连接中使用它`cross apply`。

我没有和 and 结婚`tvf`，`cross apply`但我确实需要一种快速获取这些数据的方法。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T23:24:01.033

您应该使用 OPENQUERY 并直接在远程服务器上提供的查询上进行过滤。这样您就可以确保在另一台服务器上进行过滤。相反，您可以从远程服务器获取所有数据并在本地过滤它们，这解释了为什么执行速度如此之慢。因此，您的第二种方法，但使用 OPENQUERY 是理想的解决方案。

您需要为此创建一个链接服务器。

您必须考虑到查询语法是远程服务器的语法，而不是 T-SQL。

[公开查询](http://msdn.microsoft.com/en-us/library/ms188427.aspx)

# c# - 自动检测机器的代码

> ID：10096454
> 
> 赞同：2
> 
> 时间：2012-04-10T21:04:51.940
> 
> 标签：c#, windows, perl, unix, remote-management

我需要编写一个程序，在网络上用 C# 自动检测 windows 和 unix 机器，然后将一个文件夹从 windows 共享目录复制到远程机器，并收集机器上有多少个处理器。我不知道任何有助于检测机器及其 ips 的 C# 函数。我无权访问活动目录，也没有所有机器的中央服务器。我可以创建一个在客户端机器上运行的 perl 程序。（我也不确定如何在 unix 机器上访问 Windows 共享）一般指导和代码示例将不胜感激谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T22:08:09.130

你有两个非常不同的问题。

* * *

1\. 检测机器是 Windows 还是 unix 机器。

[`$^O`](http://perldoc.perl.org/perlvar.html#%24%5EO)将在 Perl 中为您提供。

```
$ perl -E'say $^O'
linux

>perl -E"say $^O"
MSWin32 
```

* * *

2\. 从 Unix 机器访问远程 Windows 文件共享。

好吧，对于初学者来说，这是一个[SMB](http://en.wikipedia.org/wiki/Server_Message_Block)文件共享。

因此，您真正需要的只是一个 SMB 客户端。我很快找到[了 Filesys::SmbClient](http://search.cpan.org/perldoc?Filesys%3a%3aSmbClient)，一个似乎符合要求的 Perl 模块。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T09:59:10.180

您可以使用[Nmap](http://nmap.org/)来发现网络机器，它是无客户端的，并且使用 -O 参数它会告诉您机器运行的是 Windows 操作系统还是 Linux 操作系统。然后，您可以使用 SNMP 或 WMI 检索 CPU 数量，即使这需要计算机安装 SNMP 或 WMI。但是，如果客户端在远程机器上运行，一切都会容易得多，特别是如果您必须复制文件。

# background - Cocos2D。四面八方的无尽背景

> ID：10096459
> 
> 赞同：2
> 
> 时间：2012-04-10T21:05:09.267
> 
> 标签：background, cocos2d-iphone, scroll, textures, tile

我有一个纹理需要设置为背景。滚动应该在左、右和下方向。我试图改变纹理坐标，向下交换 3 行纹理，然后交换水平纹理......史诗般的失败。有谁知道如何从各个方向的相同平铺纹理制作背景？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T13:43:15.257

您有很多方法可以解决这个问题，具体取决于您的需要：

如果您正在寻找巨大的滚动背景（尽管不是无限的），您可以使用 [CCBigImage 扩展](https://github.com/cocos2d/cocos2d-iphone-extensions/tree/master/Extensions/CCBigImage)。

如果您想要无限滚动背景，@Skullz 的建议也可以。您可以轻松地修改该代码以支持在两个轴上滚动，而不是重新定位 2 个图像，您将重新定位其中 4 个。

使用该方法，加上添加一些随机项目以添加一些变化应该就足够了。您也可以使用 CCParallaxNode 以获得更好的效果。

# jquery - jQuery/CSS 后代选择器选择过多

> ID：10096461
> 
> 赞同：1
> 
> 时间：2012-04-10T21:05:34.173
> 
> 标签：jquery, css, jquery-selectors, ancestor

我的页面上有几个元素，其中一些包含在一个带有我关心的类的 div 中（在本例中为“workItemRow”）。我只想要具有类 workItemRow 的祖先的元素来触发事件。问题是，每个元素都绑定到事件，而不仅仅是具有祖先的元素。

前任。（实际代码的缩短版）

```
<div class="workItemRow">
<select class="objective"></select>
</div>

<div>
<select class="objective"></select>
</div> 
```

然后是我的 jQuery：

```
$('body').on('change', '.workItemRow .objective', function () {
   alert("Why isn't this working?");
}); 
```

每次我更改第二个 div 中的选择（没有任何类的那个）时，该事件仍然被触发，我不明白为什么。我尝试将选择器更改为“.workItemRow > .objective”，但它仍然总是调用它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T21:30:08.757

你可以做：

```
$('body').on('change', '.workItemRow > .objective', function () {
   alert("Why isn't this working?");
}); 
```

这将选择包含在 element.workItemRow 中的元素（.objective）

# c# - 处理 WinRT StreamSocket 断开连接（服务器端和客户端）

> ID：10096462
> 
> 赞同：5
> 
> 时间：2012-04-10T21:05:45.733
> 
> 标签：c#, networking, windows-8, windows-runtime

我有一个正在为 Windows 8/WinRT 编写的应用程序，它使用 StreamSocket API 与服务器进行流式连接。也就是说，服务器将数据流式传输到客户端，有时带有元标记，并且可以随时断开连接。

我遇到的问题是我不知道如何检测服务器何时断开连接。StreamSocket 类、其输入或输出流或 DataReader/DataWriter 类上似乎没有任何与连接状态有关的事件或属性。

最重要的是，在服务器端与客户端断开连接后，DataReader 方法 ReadAsync 不会失败。相反，据我所知，操作成功了，它填充到其缓冲区中的数据只是服务器发送给它的最后一件事（即它没有清除其内部缓冲区，即使我可以看到它已“消耗”每次调用 ReadByte 时的缓冲区）。它为每次对 ReadAsync 的后续调用执行此操作 - 用服务器在断开连接之前最后发送的内容重新填充缓冲区。这是代码的简化版本：

```
 public async Task TestSocketConnectionAsync()
    {
        var socket = new StreamSocket();
        await socket.ConnectAsync(new HostName(Host), Port.ToString(),
            SocketProtectionLevel.PlainSocket);
        var dr = new DataReader(socket.InputStream);
        dr.InputStreamOptions = InputStreamOptions.Partial;

        this.cts = new CancellationTokenSource();
        this.listenerOperation = StartListeningAsync(dr, cts);
    }

    public async Task StartListeningAsync(DataReader dr, CancellationTokenSource cts)
    {
        var token = cts.Token;
        while (true)
        {
            token.ThrowIfCancellationRequested();
            var readOperation = dr.LoadAsync(1024);
            var result = await readOperation;
            if (result <= 0 || readOperation.Status != Windows.Foundation.AsyncStatus.Completed)
            {
                cts.Cancel(); // never gets called, status is always Completed, result always > 0
            }
            else
            {
                while (dr.UnconsumedBufferLength > 0)
                {
                    byte nextByte = dr.ReadByte();

                    // DriveStateMachine(nextByte);
                }
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-11T01:39:58.757

> 也就是说，服务器将数据流式传输到客户端，有时带有元标记，并且可以随时断开连接。我遇到的问题是我不知道如何检测服务器何时断开连接。

另一端可以将“优雅的”套接字关闭检测为 0 长度读取。也就是说，它就像一个常规的流结束。

“失败的”套接字关闭更加棘手。您[必须发送数据](http://nitoprograms.blogspot.com/2009/05/detection-of-half-open-dropped.html)以检测对方已关闭，并且一旦写入失败，任何额外的读取或写入都应该失败（有例外）。如果您的协议不允许您发送数据，那么您将不得不在超时到期后假设连接不良并关闭它。:(

根据应用程序，“中止”套接字关闭可能是*正常*的 - 特别是，可能会编写非常繁忙的服务器来钳制关闭它们的连接，因为它允许它们更快地回收资源（避免*四*步套接字关闭握手）。

> StreamSocket 类、其输入或输出流或 DataReader/DataWriter 类上似乎没有任何与连接状态有关的事件或属性。

`DataReader`/`DataWriter`不关心“连接”。他们真的只是`BitConverter`，只是这次设计得更好。

我猜想`StreamSocket`没有“连接”属性的原因是因为[`Socket.Connected`几乎没用而且绝对是误导性](https://stackoverflow.com/a/2829016/263693)的。

* * *

我会尝试[`StreamSocket.InputStream.ReadAsync`](http://msdn.microsoft.com/en-us/library/windows/apps/windows.storage.streams.iinputstream.readasync.aspx)直接使用而不是使用`DataReader`，因为无论如何你只是在读取字节。听起来您可能在 中发现了一个错误，如果按预期工作，您应该在[Microsoft Connect](https://connect.microsoft.com/VisualStudio)`DataReader`上报告该错误。另请参阅[此相关论坛帖子](http://social.msdn.microsoft.com/Forums/en-US/winappswithnativecode/thread/6f599870-5f79-4fa9-ad76-df17986d97a9)。`InputStream.ReadAsync`

# php - 下载时Mysql blob图像没有尺寸

> ID：10096465
> 
> 赞同：0
> 
> 时间：2012-04-10T21:06:05.710
> 
> 标签：php, mysql, image, file, cakephp

出于安全原因，我在 MYSQL 中存储了一些图像。当我下载图像时，文件以正确的文件大小和名称下载，但没有显示图像。当我查看它的属性时，图像也没有尺寸。我正在使用 cakephp。

```
header("Content-type: ".$file['UploadFile']['file_extension']);
header("Content-Disposition: attachment; filename=\"".$file['UploadFile']['file_name']."\"");
header("Content-length: ".$file['UploadFile']['file_size']);

echo $file['UploadFile']['file_content']; 
```

我用以下代码保存我的图像......

```
public function image_upload($fileName, $source, $extension, $file_size) {
     $this->loadModel('UploadFile');

     $content = addslashes(file_get_contents($source));

     $file_data = array('UploadFile' => array('title' => $fileName, 'file_content' => $content, 'file_name' => $fileName, 'file_extension' => $extension, 'file_size' => $file_size, 'file_type' => 'image-art'));

     $this->UploadFile->create();
     $this->UploadFile->save($file_data);

     $file_id = $this->UploadFile->id;
     return $file_id;
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-10T21:19:33.883

它们是您可能遇到这种情况的几个可能原因

A. 错误的内容类型 .. 你有`Content-type: ".$file['UploadFile']['file_extension']`.. 那是在你的代码中磨损了

例如。文件扩展格式类似于“.jpg”，而内容类型为`image/jpeg`

B. 您的文件可能未正确保存，这一定导致此类图像损坏

C. 文件必须在上传过程中被截断

D `$content = addslashes(file_get_contents($source));`...永远不要图像..当你加载图像时`addslashes`它会搞砸或准备好`stripslashes`

要在下载之前知道您的图像是否有效，您可以运行此代码

```
$image = ImageCreateFromString($file['UploadFile']['file_content']);
if(!$image)
     Something is Wrong 
```

您还可以使用`getimagesize`添加额外的验证

**编辑 1**

**概念证明**

```
$image = ImageCreateFromString ( $file ['UploadFile'] ['file_content'] );
if ($image) {

    /**
     * Check If Height and Width is grater than 1
     */
    if (ImageSX ( $image ) > 1 && ImageSY ( $image ) > 1) {
        $extention = strtolower ( $file ['UploadFile'] ['file_extension'] );
        switch ($extention) {
            case "png" :
                header ( 'Content-Type: image/png' ); // This is just example
                imagepng ( $image );
                break;

            case "gif" :
                header ( 'Content-Type: image/gif' ); // This is just example
                imagegif ( $image );
                break;

            case "jpg" :
            case "jpeg" :
                header ( 'Content-Type: image/jpg' ); // This is just example
                imagejpeg ( $image );
                break;

            default :
                die ( "Unsupported Image" );
                break;

        }

    } else {
        die ( "Fake Image" );
    }
} else {
    die ( "Invalid Image -- Contains Errors" );
}} 
```

# c# - 在运行时在 div 中渲染控件？

> ID：10096466
> 
> 赞同：0
> 
> 时间：2012-04-10T21:06:10.717
> 
> 标签：c#, asp.net, rendering, innerhtml

我有来自 jquery 方法的文本：

```
 <fieldset>
  <ul id="ContentPlaceHolder2_1g" class="profList column ui-sortable">
 <legend class="group">المجموعه 1</legend>
 <li id="ContentPlaceHolder2_8">محمود حسن ابراهيم عبد الصمد</li>
 /ul></fieldset>

<fieldset>
<ul id="ContentPlaceHolder2_2g" class="profList column ui-sortable">
<legend class="group">المجموعه 2</legend>
<li id="ContentPlaceHolder2_9">محمود فتحى ابراهيم عبد الصمد</li>
<li id="ContentPlaceHolder2_10">احمد محسن احمد على</li>
<li class="" style="" id="ContentPlaceHolder2_3">احمد درويش محمود عباس</li>
</ul>
</fieldset>

<fieldset>
<ul id="ContentPlaceHolder2_3g" class="profList column ui-sortable">
 <legend class="group">المجموعه 3</legend>
 <li id="ContentPlaceHolder2_11">محمد سيد محمد سيد</li>
 </ul>

</fieldset> 
```

我在 c# 中的变量中检索这个 htmltext，然后我的 aspx 中有 div

```
 <div id="ulAndil" runat="server" ></div> 
```

我想在 div 中呈现这些 html 并在运行时以一种方法循环通过这些控件，例如 ul 和 il

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T21:17:19.237

只需通过这种方式快速完成。

```
StringBuilder str = new StringBuilder();
str.Append("<fieldset>\n");
str.Append("<ul id=\"ContentPlaceHolder2_1g\" class=\"profList column ui-sortable\">\n");
str.Append("<legend class=\"group\">المجموعه 1</legend>\n");
str.Append("<li id=\"ContentPlaceHolder2_8\">محمود حسن ابراهيم عبد الصمد</li>\n");
str.Append("</ul></fieldset>\n");
str.Append("<fieldset>\n");
str.Append("<ul id=\"ContentPlaceHolder2_2g\" class=\"profList column ui-sortable\">\n");
str.Append("<legend class=\"group\">المجموعه 2</legend>\n");
str.Append("<li id=\"ContentPlaceHolder2_9\">محمود فتحى ابراهيم عبد الصمد</li>\n");
str.Append("<li id=\"ContentPlaceHolder2_10\">احمد محسن احمد على</li>");
str.Append("<li class=\"\" style=\"\" id=\"ContentPlaceHolder2_3\">احمد درويش محمود عباس</li>\n");
str.Append("</ul>\n");
str.Append("</fieldset>\n");
str.Append("<fieldset>\n");
str.Append("<ul id=\"ContentPlaceHolder2_3g\" class=\"profList column ui-sortable\">\n");
str.Append("<legend class=\"group\">المجموعه 3</legend>\n");
str.Append("<li id=\"ContentPlaceHolder2_11\">محمد سيد محمد سيد</li>\n");
str.Append("</ul>\n");
str.Append("</fieldset>\n");

ulAndil.InnerHtml = str.ToString(); 
```

# php - 搭建一个 git web 开发环境

> ID：10096468
> 
> 赞同：0
> 
> 时间：2012-04-10T21:06:20.030
> 
> 标签：php, git

我尝试设置的结构如下：

*   `/public_html` 存储库（“实时”）用户看到的内容，包含自定义上传的文件（例如用户画廊图像等，这些被 .gitignore 忽略）

*   `/stable` 包含项目最新稳定源的存储库（减去被忽略的文件）

*   `/public_html/dev` 开发环境，只有我自己和其他开发人员将在其中编辑文件，直接从该文件夹在线测试。

每当进行任何更改时，它们都会在`/dev`存储库中完成，并且更改会被推送到`/stable`我想创建一个挂钩以`/public_html`使用最新的稳定文件自动更新存储库。

### 开发区

据我了解，git 开发通常是在本地环境中克隆和完成的，但是由于我们使用的软件的许可限制，并且它需要非常特定的服务器设置，所以本地开发不是一种选择。因此，我们需要有一个中央开发区域来测试更改。

我的问题如下：

1.  我怎样才能实现上述结构？
2.  什么需要是基础存储库，什么不需要（据我了解`push`，非基础存储库可能很麻烦。）
3.  有什么改进/建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T21:12:52.703

`/stable`应该是一个裸存储库。

`/public_html`根本不应该是存储库 - 相反，您应该在挂钩中使用`git archive` [或类似](http://toroid.org/ams/git-website-howto)`/stable`的东西将文件从存储库导出到`/public_html`.

理想情况下，我建议不要将您的`dev`存储库放入`/public_html`- 最好放在它自己的单独文档根目录中，这样您就不会遇到路径冲突等潜在问题。

# c++ - 静态变量虽然可见但未设置

> ID：10096471
> 
> 赞同：1
> 
> 时间：2012-04-10T21:06:31.893
> 
> 标签：c++, oop, class, object, static

我有三个文件，一个主 .cpp 文件：

```
#include <stdio.h>
#include "myClass.h"

int main()
{

    myClass mvar;

    tryVar = 23; // why does this not work?

    printf("%d ", mvar.readTryVar()); // This writes out 0, why??

    return 0;
} 
```

一个 myClass.cpp 文件

```
#include "myClass.h"

myClass::myClass(void)
{
}

myClass::~myClass(void)
{
}

void myClass::setTryVar()
{
    tryVar = 23334;
}

int myClass::readTryVar()
{
    return tryVar;
} 
```

和一个 myClass.h 文件

```
#pragma once

static int tryVar;

class myClass
{
public:
    myClass(void);
    ~myClass(void);

    void setTryVar();

    int readTryVar();
}; 
```

它们是非常简单的文件，但是我不明白为什么没有在 main 函数中设置静态变量，我需要通过 myClass 函数来设置它。

我认为我不太清楚“翻译单元”是如何创建的，我知道“包含”指令只是在实际编译之前将头文件的内容复制到 .cpp 文件中。那为什么不是静态变量可见吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-10T21:10:35.823

`static`有多重含义。在 a 之外`class`，它声明了一个对每个翻译单元都是唯一的变量，因此`main.cpp`有`myClass.cpp`自己的副本。

为了完成你想要的，你需要一个`extern`变量：

```
//myClass.h
extern int tryVar;

//myClass.cpp
int tryVar = 0;  //definition needed for extern variable 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-10T21:10:35.270

从广义上讲，您可以将每个 .cpp 文件视为一个翻译单元。其他所有内容都包含在其中`#include`。因此，由于您的 .cpp 文件*都包含**myClass.h*，因此它们*都*定义了一个名为 的静态变量`tryVar`。您有两个同名的变量，每个代码文件都读取和写入自己的副本。他们看不到对方的副本。

如果要从多个翻译单元（.cpp 文件）访问一个变量，那么它不应该是静态的。相反，它应该`extern`在头文件中声明，然后在*一个*翻译单元中*定义。*查看过去的 Stack Overflow 问题[What is extern variables in C?](https://stackoverflow.com/q/1433204/33732)

 *更改标题以声明变量：

```
extern int tryVar; 
```

更改*myClass.cpp*以定义它：

```
int tryVar; 
```

通过这两个更改，您可以在整个程序中读取和写入相同的变量。

一般来说，如果您*在 header 中*`static`使用全局（即非成员）函数或变量，您可能做错了。（不过，在头文件中使用成员函数和变量很好。）仅在 .cpp 文件中使用全局。*`static``static`*

 ** * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-29T14:10:19.747

1.  当在函数和类之外声明静态变量时，该变量具有文件范围，在这种情况下，tryVar 对于包含 myclass.h 的文件是唯一的，因此对于我们的问题，我们有两个唯一版本的 tryvAr 一个用于 myclass。 cpp & other for main.cpp

2.  当声明静态变量且未初始化时，编译器会自动将该变量初始化为零。

**现在来解决你的问题**

1.  静态变量 tryVar 的声明在 myclass.h 中 & 由于 tryVar 的声明在所有函数和类之外，因此该变量是文件范围的，即该变量对包含 myclass.h 的文件可见，但每个文件有自己独特的副本。

2.  ***尝试变量 = 23; // 为什么这不起作用？***

    这实际上有效，但不是您想要的方式，因为您要打印的是 tryVar 变量，该变量可通过类 mycalss 的对象对 myclass.cpp 可用（唯一），

    直接在主文件中打印 tryVar ，您可以看到输出为 23 。

3.  ***printf("%d", mvar.readTryVar()); // 这写出 0，为什么？***

    这将返回零，因为您正在尝试打印 myClass.cpp 独有的 tryVar 并且由于您没有调用 setfunction 编译器将变量初始化为零，这就是您得到零的原因，

    在打印 myClass.cpp 文件特有的 tryVAr 之前，尝试在主文件中调用 myClass::setTryVar() 函数。

**解决方案**

解决方案1：

使 tryVar extern 即 tryVar 是全局的，只有一个 tryVar 副本存在

缺点：此解决方案的问题是您无法控制变量

解决方案2：

将 tryVar 作为类的静态数据成员并在 myClass.cpp 中定义它，通过这种方式，您可以控制变量的可见性**

# java - Jsp加数字

> ID：10096478
> 
> 赞同：-1
> 
> 时间：2012-04-10T21:07:28.253
> 
> 标签：java, html, jsp

当用户通过单击“开始”按钮输入正确值或不正确值时，如何创建弹出（警报）消息。我不知道如何将“Go”按钮与 java 代码连接起来。

请帮忙

```
<%@ page import="java.io.*,java.util.*" %>
<html>
 <body>

<% 
 int a =6;
 int b = 8; 
%>

<FORM METHOD=POST ACTION="main.jsp">
 <%=a%>+<%=b%> =  <INPUT TYPE=TEXT NAME=num SIZE=20>
 <P><INPUT TYPE=SUBMIT value="Go"></p>
 <P><INPUT TYPE=SUBMIT value="Continue" disabled="disabled" ></p>
 </body>
 </html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T21:49:47.070

完成从代码中删除所有小脚本后...

您可以通过执行以下操作在单击按钮时显示警报：

```
<input type="submit" value="Go" onclick="function(){ alert('hello, world'); }"> 
```

您可能不会得到很多回应，因为**将 scriptlet 与 jsp 一起使用是*非常*不受欢迎的**。

# c# - GetContentsRichTextBox() 返回类型错误

> ID：10096479
> 
> 赞同：0
> 
> 时间：2012-04-10T21:07:35.683
> 
> 标签：c#, return-type, invokerequired

我正在尝试编写一种从另一个线程读取富文本框内容的方法。下面是我的代码：

```
 /** @delegate */
    private delegate void RichTextBoxObtainContentsEventHandler();

    private string ObtainContentsRichTextBox()
    {

        if (richtxtStatus.InvokeRequired)
        {
            // this means we're on the wrong thread!  
            // use BeginInvoke or Invoke to call back on the 
            // correct thread.
            richtxtStatus.Invoke(
                new RichTextBoxObtainContentsEventHandler(ObtainContentsRichTextBox)
                );
        }

        return richtxtStatus.Text.ToString();

    } 
```

但是我收到以下错误消息：

'string WindowsFormsApplication1.frmMain.ObtainContentsRichTextBox()' 的返回类型错误

我确定我做错了一些简单的事情，但我有点 C# 新手。谁能指出我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T22:17:20.123

您的委托是无效的，但您使用返回字符串的函数调用它。这就是导致问题的原因。

# iphone - 多次调用 ABAddressBookRegisterExternalChangeCallback

> ID：10096480
> 
> 赞同：9
> 
> 时间：2012-04-10T21:07:37.933
> 
> 标签：iphone, ios, abaddressbook

我有一个奇怪的问题，我注册了我的 iOS 应用程序来收听电话通讯录中的变化。当地址簿中的某些内容发生变化时会调用正确的方法，但它会被调用 2 到 6 次。

当对象被创建（单例，所以只有一个对象）时，我使用以下代码注册通知：

```
ABAddressBookRegisterExternalChangeCallback(notificationAddressBook, addressBookChanged, (__bridge_retained  void *)self); 
```

调用的方法如下所示：

```
void addressBookChanged(ABAddressBookRef ab, CFDictionaryRef info, void *context){
ABAddressBookRevert(ab);

    NSLog(@"ADDRESSBOOK CHANGED");
    [phoneBookCopy updateCopy];
} 
```

任何想法如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-06-03T11:35:50.440

尝试这个：

```
void addressBookChanged(ABAddressBookRef ab, CFDictionaryRef info, void *context){
ABAddressBookRevert(ab);

    NSLog(@"ADDRESSBOOK CHANGED");
    [phoneBookCopy updateCopy];
    CFRelease(ab);
} 
```

这对我有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T19:56:49.140

不久前我遇到了同样的问题，我不得不通过创建一个 NSTimer 来处理重复的回调来解决它：

```
[self.changeTimer invalidate];
self.changeTimer = nil;
self.changeTimer = [NSTimer scheduledTimerWithTimeInterval:3.0
                                                            target:self
                                                          selector:@selector(handleAdressBookExternalCallbackBackground)
                                                          userInfo:nil
                                                           repeats:NO]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-22T14:53:43.110

我有一个类似的问题。第一次回调只会被调用一次，但是如果我第二次出去更改地址簿，那么它会被多次调用。对我来说，问题是`ABAddressBookRegisterExternalChangeCallback`在 appDelegate 的方法中调用的`applicationWillResignActive:`方法。

我使用地址簿的方式是用于同步设置。问题是，每次*保存*同步设置时，我都在注册外部回调，而不仅仅是在*更改*同步设置时。

为了说明，这是我在 appDelegate 中调用的代码

```
- (void)saveSettings
{
NSUserDefaults *syncSettingsData = [NSUserDefaults standardUserDefaults];
[syncSettingsData setObject:[NSNumber numberWithBool:self.isSyncingiPadContacts] forKey:SYNC_IPAD_CONTACTS_TURNED_ON];
[self setAddressBookChanged];
[syncSettingsData synchronize];
}

- (void)setAddressBookChanged
{
    if (self.isSyncingiPadContacts)
    {
        ABAddressBookRegisterExternalChangeCallback(self.addressBook, addressBookChanged, (__bridge void *)self);
    }
    else
    {
        ABAddressBookUnregisterExternalChangeCallback(self.addressBook, addressBookChanged, (__bridge void *) self);
    }
} 
```

我删除了`setAddressBookChanged`方法中的调用`saveSettings`，只是在创建地址簿（第一次设置）以及用户更改同步设置时调用它。

希望这对您有所帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-17T19:06:05.833

我的解决方案非常简单，它不仅适用于此，而且适用于所有重复的回调（包括本地通知重复调用）：我保留了最后一次调用时间的属性并检查时间间隔。希望它有所帮助，对我来说它完成了这项工作。

AppDelegate* 委托 = (__bridge AppDelegate*)context;

```
if (delegate.lastCall==nil) {
    delegate.lastCall = [[NSDate alloc]init];
}
else {
    NSTimeInterval interval = [[NSDate date] timeIntervalSinceDate:delegate.lastCall];
    if (interval<20) {
        return;
    }
    else {
        delegate.lastCall = [[NSDate alloc]init];
    }
} 
```

# mysql - 在不丢失数据的情况下重命名 Doctrine 2 中的字段

> ID：10096481
> 
> 赞同：5
> 
> 时间：2012-04-10T21:07:42.050
> 
> 标签：mysql, doctrine-orm

这似乎很明显，但我根本无法通过谷歌搜索找到信息。如何在不丢失数据的情况下重命名 Doctrine2 中的字段（即删除旧字段并创建新字段）？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T21:12:12.080

手动对您的数据库运行 SQL 查询以重命名该字段。

尽管存在 Doctrine 2 模式工具，但它并不意味着用于修改生产数据库，因此不一定以不会丢失数据的方式执行操作（另外，检测列之类的东西会有点棘手仅根据实体的元数据重命名 100% 准确）

# java - ThreadLocal 比 HttpServletRequest.setAttribute("key", "value") 更可取吗？

> ID：10096483
> 
> 赞同：8
> 
> 时间：2012-04-10T21:08:11.503
> 
> 标签：java, jakarta-ee, servlets, servlet-filters, thread-local

servlet 规范（请参阅我之前的问题）保证同一个线程将执行所有过滤器和关联的 Servlet。`HttpServletRequest.setAttribute`鉴于此，如果可以选择使用 a `ThreadLocal`（假设您正确清理），我认为使用传递数据没有任何用处。我觉得使用 有两个好处`ThreadLocal`：类型安全和更好的性能，因为没有使用字符串键或映射（除了可能通过（非字符串）线程 ID 进入线程集合）。

有人可以确认我是否正确，以便我可以继续放弃`setAttribute`吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T18:23:44.063

I'd advise against ThreadLocal.

I can see why you're considering it, but I think you're falling into the premature optimization trap. ThreadLocals are essentially global variables - rarely a good design. The time-savings will be negligible. I guarantee this will never be the bottleneck in your server's throughput.

Using ThreadLocal may also give you problems if you want to start using asynchronous responses to some requests (e.g. to support long-polling) as the threading model is quite different.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-10T21:55:30.727

以这种方式使用 ThreadLocal 意味着您依赖某种类型的单例来维护共享状态。最终，这通常被认为是糟糕的设计，因为它有许多缺点，包括难以封装功能、意识到依赖关系以及无法交换（或模拟）功能。

与在单例中处理不太常见的 ThreadLocal 变量提议相比，使用属性或会话的性能开销可能是值得的。但是，这当然取决于您的特定用例和项目。由于难以与 servlet 共享应用程序状态（难以注入依赖项），在 servlet 中使用单例作为维护应用程序状态的一种方式有些常见，但这些对象单例对象维护每个用户状态（在 EJB 之外）是不常见的）。

如果使用会话或将容器对象设置为属性，您将只处理通过字符串的单个提取（这将是 O(1)），然后是容器类型的单个案例（具有特定的访问器您想要的所有值）。进一步调用代码应该适当地使用参数，并尽可能避免使用任何类型的全局或单例。

最终，在以性能的名义考虑一个有点不寻常（尽管很聪明）的解决方案之前，总是先测试简单的实现，看看它的性能是否足够。与花费在 db 查询和 tcp 连接建立上的 20+ms 相比，这里可能节省的 2ns 很可能微不足道。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-10T21:22:41.883

如果您尝试为处理 HttpServletRequest 的代码“隐藏”设置“全局”变量，则线程本地会更好地工作。如果您正在使用 JSP/JSF 页面，或其他从 HttpServletRequest 读取的 Web UI 组件，那么您最终将不得不自己从 ThreadLocal 中提取信息。对于大多数网络编程来说，这 2 是不等价的。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-04-12T04:24:09.543

> *ThreadLocal 比 HttpServletRequest.setAttribute(“key”, “value”) 更可取吗？*

取决于具体的功能要求。

例如，JSF`FacesContext`将`ThreadLocal`. 这使您能够访问所有 J​​SF 工件，包括“原始”`HttpServletRequest`和`HttpServletResponse`由 执行的代码中的任何位置`FacesServlet`，例如托管 bean。大多数其他基于 Java 的 MVC 框架都遵循相同的示例。

根据你的评论，

> *我主要需要将 User 和 EntityManager 对象从用户和数据库过滤器传输到 Servlet。我还发现，在后面的代码中经常和意外地需要这些，我很想在 Servlet 之外使用它们（即在 doGet 调用的嵌套代码中）。我觉得可能有更好的方法来编写更深入的代码 - 建议？*

至于`User`我假设这是一个会话属性的示例，我宁愿遵循与 JSF 相同的方法。创建一个`ThreadLocal<Context>`where`Context`是您的自定义包装类，其中包含对当前的引用`HttpServletRequest`，也许还可以`HttpServletResponse`让您可以在代码中的任何位置访问它们。如有必要，提供方便的方法以`User`直接从`Context`类中获取。

至于这个`EntityManager`例子，你可以采用同样的方法，但我个人不会把它放在*同一个* `ThreadLocal<Context>`，而是一个不同的。或者，更好的是，只需从服务层的 JNDI 获取它，这将允许您对事务进行更细粒度的控制。在任何情况下，请绝对确保您正确处理提交/关闭。从容器中接管持久性和事务管理应该非常小心。我真的会重新考虑反对使用现有的和精心设计的 API/框架（如 EJB/JPA），否则您将冒着完全浪费时间重新发明所有已经标准化的 API 和东西的风险。

### 也可以看看：

*   [从 Web 容器外的 POJO 检索 Web 会话](https://stackoverflow.com/questions/4764285/retrieving-web-session-from-a-pojo-outside-the-web-container/4764894#4764894)
*   [设计模式基于 Web 的应用程序](https://stackoverflow.com/questions/3541077/design-patterns-web-based-applications/3542297#3542297)

# silverlight - 将 Datagrid 单元格动态转换为超链接

> ID：10096488
> 
> 赞同：0
> 
> 时间：2012-04-10T21:08:26.350
> 
> 标签：silverlight, xaml, datagrid, ivalueconverter

如果字符串值以“http”开头，我想将单元格的内容转换为超链接。如果发现对列值进行硬编码，它必须动态工作并且有很多示例。理想情况下，如果内容以“http”开头，我只想使用值转换器用超链接按钮替换单元格的内容。

```
 <esri:FeatureDataGrid x:Name="QueryDetailsDataGrid" Grid.Row="0"  Margin="0"
                        AutoGenerateColumns="False" CanUserSortColumns="True" 
                        VerticalAlignment="Stretch" HorizontalAlignment="Stretch"
                        HeadersVisibility="Column" HorizontalScrollBarVisibility="Auto" 
                        SelectionChanged="QueryDetailsDataGrid_SelectionChanged"
                        LoadingRow="QueryDetailsDataGrid_LoadingRow"
                        Foreground="White" RowBackground="#555555"
                        AlternatingRowBackground="Black"
                        RowStyle="{StaticResource DataGridRowStyle}" >
        <i:Interaction.Triggers>
            <i:EventTrigger EventName="Click" SourceObject="{Binding ElementName=btnSave}">
                <actions:ExportTable />
            </i:EventTrigger>
        </i:Interaction.Triggers>
        <esri:FeatureDataGrid.Columns>
            <sdk:DataGridTemplateColumn>
                <sdk:DataGridTemplateColumn.CellTemplate>
                    <DataTemplate>
                        <TextBlock Text="{Binding , Converter={StaticResource LinkConverter}}" />
                    </DataTemplate>
                </sdk:DataGridTemplateColumn.CellTemplate>
            </sdk:DataGridTemplateColumn>
        </esri:FeatureDataGrid.Columns>
    </esri:FeatureDataGrid> 
```

转换器

```
Public Class LinkConverter
    Implements IValueConverter

    Public Function Convert(value As Object, targetType As System.Type, parameter As Object, culture As System.Globalization.CultureInfo) As Object Implements System.Windows.Data.IValueConverter.Convert
        If value Is Nothing Then
            Return vbNull
            Exit Function
        End If
        Dim _value As String = TryCast(value, String)
        If _value Is Nothing Then
            Return value
        End If
        If _value.StartsWith("http") Then
            Dim hl As HyperlinkButton = New HyperlinkButton With {.NavigateUri = New Uri(_value)}
            Return hl
        Else
            Return value
        End If
    End Function

    Public Function ConvertBack(value As Object, targetType As System.Type, parameter As Object, culture As System.Globalization.CultureInfo) As Object Implements System.Windows.Data.IValueConverter.ConvertBack
        Dim _value As String = TryCast(value, String)
        If _value.StartsWith("http") Then
            Dim hl As Hyperlink = New Hyperlink With {.NavigateUri = New Uri(_value)}
            Return hl
        Else

            Return value
        End If
    End Function
End Class 
```

这不起作用，因为我试图用框架元素替换文本。有点困惑如何做到这一点......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T05:56:19.617

1.  在 DataTemplate 中放置两个控件 - TextBlock 和 Hiperlink。
2.  创建 HttpVisibile 转换器，它为以“http”开头的文本返回 Visibility.Visible，为其他文本返回 Visibility.Collapsed。使用此转换器将 Hiperlink 的可见性属性绑定到您的文本。
3.  创建 HttpCollaped 转换器，它为以 http 开头的文本返回 Visibility.Collapsed。使用此转换器将 TextBlock 的可见性属性绑定到文本

通过这 3 个步骤，您将实现所有以“http”开头的文本都将显示为超链接。

```
<DataTemplate>
  <TextBlock Visibility="{Binding, Converter={StaticResource HttpCollapsedConverter}}" />
  <Hiperlink Visibility="{Binding, Converter={StaticResource HttpVisibleConverter}}" />
</DataTemplate> 
```

根据您的情况需要绑定每个控件的 Text 属性。

# android - 谷歌地图和地理编码减慢应用程序

> ID：10096491
> 
> 赞同：0
> 
> 时间：2012-04-10T21:08:30.150
> 
> 标签：android

任何想法为什么这会导致我的应用程序表现不佳？我确实在日志中注意到“从 GPS 请求更新”和“从网络请求更新”确实出现了两次。无论如何，这是我的代码。任何帮助将不胜感激。

```
 public class statuspage extends MapActivity {

private MapController mapController;
private MyLocationOverlay myLocation;

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.statuspage);

    // Get Mapping Controllers etc
    MapView mapView = (MapView) findViewById(R.id.mapView);
    mapController = mapView.getController();
    mapController.setZoom(14);
    mapView.setBuiltInZoomControls(true);

    // Add the MyLocationOverlay
    myLocation = new MyLocationOverlay(this, mapView);
    mapView.getOverlays().add(myLocation);
    myLocation.enableMyLocation();
    myLocation.runOnFirstFix(new Runnable() {

        public void run() {
            mapController.animateTo(myLocation.getMyLocation());

        }
    });
}

class MapOverlay extends com.google.android.maps.Overlay {
}

@Override
protected boolean isRouteDisplayed() {

    // Location Manager Intiation
    LocationManager locationManager;
    String bestProvider;
    String LOCATION_SERVICE = "location";
    locationManager = (LocationManager) this
            .getSystemService(LOCATION_SERVICE);
    Criteria criteria = new Criteria();

    // More accurate, GPS fix.
    criteria.setAccuracy(Criteria.ACCURACY_FINE); // More accurate, GPS fix.
    bestProvider = locationManager.getBestProvider(criteria, true);
    Location location = locationManager.getLastKnownLocation(bestProvider);
    if (location != null) {

        // Latitude and Longitude TextView
        EditText etlongitude = (EditText) findViewById(R.id.etlongitude);
        EditText etlatitude = (EditText) findViewById(R.id.etlatitude);

        // Disables longitude textview Keyboard Popup.
        InputMethodManager imm = (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE);
        imm.hideSoftInputFromWindow(etlongitude.getWindowToken(), 0);

        // Disables latitude textview Keyboard Popup.
        InputMethodManager imm2 = (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE);
        imm2.hideSoftInputFromWindow(etlatitude.getWindowToken(), 0);

        double latitude = location.getLatitude();
        double longitude = location.getLongitude();

        // Latitude and Longitude TextView Display Coordinates
        etlongitude.setText("" + (longitude)); 
        /** longitude textview */
        etlatitude.setText("" + (latitude));
        /** latitude textview */

        String addressString = "No address found";

        Geocoder gc = new Geocoder(this, Locale.getDefault());
        try {
            List<Address> addresses = gc.getFromLocation(latitude,
                    longitude, 1);
            StringBuilder sb = new StringBuilder();
            if (addresses.size() > 0) {
                Address address = addresses.get(0);

                for (int i = 0; i < address.getMaxAddressLineIndex(); i++)

                sb.append(address.getAddressLine(i)).append("\n");
                //sb.append(address.getFeatureName()).append("\n");
                //sb.append(address.getPhone()).append("\n");
                //sb.append(address.getLocality()).append("\n");
                //sb.append(address.getPostalCode()).append("\n");
                //sb.append(address.getCountryName());
            }
            addressString = sb.toString();

            TextView scrollview = (TextView) findViewById(R.id.scrollview);
            scrollview.setText("Your location:" + "\n" + "(Accurate to 500 meters)" +"\n" +(addressString));

        } catch (IOException e) {
        }

        // locationManager.removeUpdates((LocationListener) location);
        locationManager = null; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T11:20:47.333

这看起来像是您在`Geocoder`UI 线程中使用的——不要那样做，它会使您的 UI 变得迟缓并可能强制关闭您的应用程序。

[`AsyncTask`](http://developer.android.com/reference/android/os/AsyncTask.html)相反，在其方法中使用and 进行地理编码`doInBackground()`，然后在`onPostExecute()`.

# windows-phone-7 - wp7 PhoneCallTask 结果

> ID：10096492
> 
> 赞同：4
> 
> 时间：2012-04-10T21:08:31.160
> 
> 标签：windows-phone-7

当调用 PhoneCallTask​​ Show 时，会提示确认。现在有没有办法知道用户是否点击了“呼叫”或“不呼叫”按钮？

例如

```
phoneCallTask.Cancel += () => { }; 
```

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T07:13:17.087

我想出了一个回合的方法来做到这一点。如果你愿意，你也可以试试。

PhoneApplicationFrame 中有两个事件处理程序 Obscured 和 Unobscured，它们在 Shell UI 启动时触发。

如果此人单击呼叫，则“模糊”和“未模糊”都会交替触发两次。并且如果该人单击 Dont call，则每个人仅触发一次。所以保持计数可以检测到这个人是否点击了“呼叫”

在页面的构造函数中添加这个。

```
(Application.Current as App).RootFrame.Obscured += OnObscured;
(Application.Current as App).RootFrame.Unobscured += OnUnobscured; 
```

在调用 show 之前，初始化一个计数器和标志

```
diallerState = 1;
isDial = true;  
pct.Show(); //pct = new PhoneCallTask();

void OnObscured(object sender, ObscuredEventArgs e)
        {
            if (diallerState == 3 && isDial == true)
            {
             //The user Clicked Dialled   
             diallerState = 0;
             isDial=false;
            }
            else
            if(isDial==true) diallerState++; 
}

 void OnUnobscured(object sender, EventArgs e)
        {
            if(isDial) diallerState++;
        } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T13:17:57.777

基本上，PhoneCallTask​​ 是一个启动器，这意味着它不应该返回任何内容，并且应用程序无法确定执行时的状态。因此答案是否定的。

# google-app-engine - 什么在使用我所有的存储空间？[__MutationMarker__]

> ID：10096494
> 
> 赞同：1
> 
> 时间：2012-04-10T21:08:36.387
> 
> 标签：google-app-engine

我删除了我的应用程序中的大部分实体 [~2M]。然而，使用的存储并没有下降。
我查询了我的应用程序的统计信息，发现以下内容：

```
__________Kind Name____________|_Count_____|_Bytes_
Calendar                        32          26,688
DailyRollup                     367         815,815
_AE_DatastoreAdmin_Operation    4           5,089
_AE_Pipeline_Barrier            135         394,242
_AE_Pipeline_Record             88          318,412
_AE_Pipeline_Slot               82          13,6608
_AhAdminXsrfToken_              1           658
_GAE_MR_MapreduceState          1           3,168
_GAE_MR_ShardState              32          38,152
__MutationMarker__              2,318,770   1,063,562,044 
```

前 2 个实体种类由我创建 [0.08% 的数据]
什么是**__ *MutationMarker* __**？
它在做什么？为什么要占用这么多空间？
我可以删除它吗？

感谢您的任何帮助。
麦克风

==================================================== ==============================

获取每种统计信息的代码

```
from google.appengine.ext.db import stats

global_stat = stats.GlobalStat.all().get()
timestamp = global_stat.timestamp
kind_name = stats.KindStat.all().filter("timestamp =", timestamp).fetch(15)
kind_list = [stat.kind_name for stat in kind_name]

for kind in kind_list:
  print kind, 
  kind_stat = stats.KindStat().all().filter("kind_name =", kind).get()
  print kind_stat.count, kind_stat.bytes 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T00:05:35.257

Mutation Marker 是一个隐藏实体，用于将数据从一个应用程序 ID 迁移到另一个应用程序 ID。它标记实体是否已更改，以便在下一次尝试迁移的“增量”阶段复制该实体。

但是，此实体不应占用对您的配额计数的空间。您的应用程序 ID 是什么？

# javascript - 从 Web 服务 URL 返回的 JavaScript DOM 访问

> ID：10096496
> 
> 赞同：1
> 
> 时间：2012-04-10T21:08:47.620
> 
> 标签：javascript, xml, web-services, cross-domain

我正在开发一个项目，我将 Web 服务 URL（跨域）放入动态创建的脚本源属性中，并且我看到了返回，但它还在响应之前显示“XML Parsing Error: not well-formed”。我被告知忽略这一点，然后回应。我了解如何解析响应以从中获取我需要的 URL，但我无法访问数据。

基本上，我在文档的头部创建了一个 iframe，然后将一个带有 src 属性的脚本标签作为 Web 服务的 URL。我可以在 Firebug 中看到响应，但我无法访问该值。我有以下代码，其中“sourcetext”是返回的 XML 中的标签名称：

```
testResponse = toString(document.getElementById("testIframe").getElementsByTagName("sourcetext"));

console.log("value of test response == " + testResponse); 
```

控制台的响应是：

> 测试响应的值 == [对象窗口]

我不知道如何访问它并将该值用作变量，以便我可以将其解析为所需的点点滴滴。

# c# - 在页面之间正确传递数据

> ID：10096500
> 
> 赞同：2
> 
> 时间：2012-04-10T21:09:03.400
> 
> 标签：c#, windows-phone-7, xaml

我一直在尝试将单个 WP7 应用程序页面分成两个单独的页面，以便我可以将功能保留在一个页面中，而将视图保留在另一个页面中。基本上，我正在创建一个选项卡式网络浏览器，其中我有不同的选项卡，可以根据用户请求查看，并且只有当前单击的选项卡是视图中显示的选项卡。到目前为止，我有一个解决方案，它可以在一个页面中工作，但我想将它分成一个 TabsPage（它将控制选项卡实例）和一个 MainPage（它将向用户呈现当前选择的选项卡以供显示）。我不确定如何正确分隔这两个页面，以便我可以完成此功能。我所拥有的如下（到目前为止有效）

主页.xaml

```
<Grid x:Name="LayoutRoot" Background="Transparent">
    <Grid.RowDefinitions>
        <RowDefinition Height="Auto"/>
        <RowDefinition Height="*"/>
    </Grid.RowDefinitions>

    <TextBox x:Name="UrlTextBox" KeyDown="UrlTextBox_KeyDown" InputScope="url"/>
    <Grid x:Name="BrowserHost" Grid.Row="1" />
    <!--<my:FullWebBrowser Name="TheBrowser" Grid.Row="1"/>-->

</Grid>

<phone:PhoneApplicationPage.ApplicationBar>
    <shell:ApplicationBar>
        <shell:ApplicationBarIconButton x:Name="Tabs" IconUri="/Images/appbar.tab.rest.png" Text="tabs" Click="TabsPage_Click"/>
        <shell:ApplicationBarIconButton IconUri="/Images/appbar.next.rest.png" IsEnabled="True" Text="forward" x:Name="ForwardBtn" Click="ForwardBtn_Click"/>
        <shell:ApplicationBar.MenuItems>
            <shell:ApplicationBarMenuItem Text="1" Click="TabMenuItem_Click" />
            <shell:ApplicationBarMenuItem Text="2" Click="TabMenuItem_Click" />
            <shell:ApplicationBarMenuItem Text="3" Click="TabMenuItem_Click" />
            <shell:ApplicationBarMenuItem Text="4" Click="TabMenuItem_Click" />
        </shell:ApplicationBar.MenuItems>
    </shell:ApplicationBar>
</phone:PhoneApplicationPage.ApplicationBar> 
```

MainPage.xaml.cs

```
private const int NumTabs = 4;
    private int currentIndex;

    private string[] urls = new string[NumTabs]; 
    ////private WebBrowser[] browsers = new WebBrowser[NumTabs]; 
    private FullWebBrowser[] browsers = new FullWebBrowser[NumTabs];

    // Constructor
    public MainPage()
    {
        InitializeComponent();
        ShowTab(0); 
    }

    //protected override void OnNavigatedTo(NavigationEventArgs e)
    //{
    //    base.OnNavigatedTo(e);

    //}

    private void ShowTab(int index)
    {
        this.currentIndex = index;

        UrlTextBox.Text = this.urls[this.currentIndex] ?? "";

        if (this.browsers[this.currentIndex] == null)
        {
            //WebBrowser browser = new WebBrowser(); 
            FullWebBrowser browser = new FullWebBrowser();

            this.browsers[this.currentIndex] = browser;

            BrowserHost.Children.Add(browser);
        }

        for (int i = 0; i < NumTabs; i++)
        {
            if (this.browsers[i] != null)
            {
                this.browsers[i].Visibility = i == this.currentIndex ? Visibility.Visible : Visibility.Collapsed;
            }
        }
    }

    private void UrlTextBox_KeyDown(object sender, KeyEventArgs e)
    {
        if (e.Key == Key.Enter)
        {
            Uri url;

            //string _url;

            if (Uri.TryCreate(UrlTextBox.Text, UriKind.Absolute, out url))
            {
                this.urls[this.currentIndex] = UrlTextBox.Text;
                //_url = url.ToString();

                string _url = url.ToString();

                //this.browsers[this.currentIndex].Navigate(url); 
                this.browsers[this.currentIndex].Navigate(_url);
            }
            else
                MessageBox.Show("Invalid url");
        }
    }

    private void TabMenuItem_Click(object sender, EventArgs e)
    {
        int index = Int32.Parse(((ApplicationBarMenuItem)sender).Text) - 1;
        ShowTab(index);
    }

    //**********************************************************************

    private void TabsPage_Click(object sender, EventArgs e)
    {
        this.NavigationService.Navigate(new Uri("/TabsPage.xaml", UriKind.Relative));
    } 
```

注意：我正在使用一个名为 TheWebBrowser 的网络浏览器控件。任何有关如何正确地将 MainPage 分隔为 TabsPage 的帮助将不胜感激！我已经为此工作了一段时间，似乎无法在页面之间正确传递数据（即搜索栏和要在 MainPage 上查看的当前 webbrowser 实例）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T03:07:41.263

我只会使用 Caliburn Micro 在页面/屏幕之间传递数据。[http://caliburnmicro.codeplex.com/](http://caliburnmicro.codeplex.com/)它还有一个很好的文档供您开始学习如何正确传递数据而不是做 (App.Current as App).SomeField。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T21:49:49.463

可以通过在 App.xaml.cs 文件中添加一个保存点来完成在页面之间传递值并仍然遵守正确的 WP7 设计，然后您可以使用访问信息

```
(App.Current as App).SomeField 
```

现在我对您使用的 webbrowser 控件没有经验，但我假设您可以使用 MVVM 模式将数据与视图分开。[这](http://msdn.microsoft.com/en-us/library/hh286405%28v=vs.92%29.aspx)是一个很好的例子。使用 MVVM 还可以让您更好地支持应用程序的[逻辑删除。](http://www.scottlogic.co.uk/blog/colin/2011/10/a-windows-phone-7-1-mango-mvvm-tombstoning-example/)希望这能回答你的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-10T15:49:35.807

以防万一，[这可能会有所帮助](http://www.geekchamp.com/marketplace/components/smartnavigation)。

编辑：我的意思是，你可以使用[这个组件](https://smartnavigation.codeplex.com/)，它可以通过 Nuget 作为

```
Install-Package SmartNavigation. 
```

可能它有点原始，但完全值得一看。

![在此处输入图像描述](../Images/267ad8e67838e306605d9a73339c9f2e.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-10T18:12:17.647

例如，当我想跨页面共享数据时，我就是这样做的。在 App.xaml.cs 中定义您的属性（不要忘记在需要的地方进行初始化）：

```
public List<Contact> Contacts
{
    get
    {
        return _contacts;
    }
} 
```

现在在您要使用此数据的页面中，像这样定义它：

```
private List<Contact> Contacts
{
    get
    {
        return (App.Current as App).Contacts;
    }
} 
```

# c - 尝试打印 NULL 时的两种情况，一种有效，另一种 SegFaults

> ID：10096502
> 
> 赞同：8
> 
> 时间：2012-04-10T21:09:14.780
> 
> 标签：c, segmentation-fault

在下面的：

```
printf("Example%s\n",NULL);
printf("%s\n",NULL); 
```

我得到的输出为：

```
Example(null)
Segmentation Fault 
```

当我在 GDB 中尝试回溯时，它显示`printf()`已转换为`puts()`. 但我似乎无法理解为什么会发生这种情况。

顺便说一句，我找到[了这篇](http://bugs.centos.org/view.php?id=4128)文章，但似乎仍然没有意义。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-10T21:13:54.650

该标准说，将`NULL`指针作为参数传递给`printf`带有`%s`说明符的 a 是未定义的行为¹（即任何事情都可能发生），因此这两种行为都是合法的。

在第一种情况下，标准库（特别是`printf`代码）通过打印来帮您一个忙`(null)`。

相反，在第二种情况下，优化器知道您`printf`可以替换为 a `puts`（更有效），而不会对程序的“可观察行为”进行任何更改，因此它会替换它。但是，`puts`碰巧不包含 的`NULL`-checking 代码`printf`，因此您会遇到分段错误。

* * *

1.  C99，§7.19.6.1，¶8：

    > 参数应该是指向字符类型数组的初始元素的指针。

    ¶9：

    > 如果任何参数不是相应转换规范的正确类型，则行为未定义。

    你属于最后一种情况，因为`NULL`不是“指向字符类型数组的初始元素的指针。

# javascript - JavaScript 变量的范围（XUL 相关）

> ID：10096504
> 
> 赞同：1
> 
> 时间：2012-04-10T21:09:25.153
> 
> 标签：javascript, xul

一个初学者的问题，可能是一个微不足道的问题。这是 XUL 代码片段：

```
<window
    xmlns="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul">

    <script type="application/javascript" src="chrome://.../main.js"/>

    <button label="Click me!" oncommand="clickhandler()"/>
</window> 
```

JavaScript 代码：

```
// main.js

var test = "Peanut butter";    // a global variable

function clickhandler() {
    alert(test);
} 
```

解释器在读取主窗口的开始标记后立即处理 JavaScript 文件，然后继续处理其余的 XUL 代码。在我看来，`test`变量应该在解释器完成处理的那一刻就超出范围`main.js`。此外，该`clickhandler()`功能也应该超出范围，这意味着当单击按钮时，什么都不会发生。好吧，除非我将它们声明为`document.test`and `document.clickhandler()`，例如。然而，一个简单的实验证明我错了。单击按钮时，函数和变量都存在。像这样声明的变量的实际寿命是多少？它们什么时候被销毁？他们在应用程序退出之前一直存在吗？任何最佳实践和参考都受到高度赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T21:36:41.937

您期望它的行为类似于您习惯使用块作用域的语言。我建议通读 Douglas Crockford 的《The Good Parts》一书，以更好地理解为什么一切都会如此运作。如果您从一开始就了解所有这些，那么您将在以后的道路上轻松得多。

Javascript 在功能上是有作用域的。在这个例子中，测试的作用域在 foo 内部。

```
var foo = function() {
    var test = "Peanut Butter";
}; 
```

在此示例中，您可以看到该函数可以修改 test，因为它是一个全局范围的变量。

```
var test = "peanut butter";
var foo = function() {
    test = "Apple sauce";
}; 
```

有三种方法可以定义全局范围的变量，我建议您避免所有这些（并非完全，这是不可能的）。全局变量是必要的，但是可以减轻它们。它们的生命周期与加载 javascript 一样长。如果您在由同一页面加载的不同 .js 文件中定义多个全局变量，则这些全局变量都可以被两者访问，从而很容易意外地覆盖来自不同文件的 var。

1：就像你所做的那样，在任何函数之外放置一个 var 语句。

2：将其作为属性添加到全局对象。

```
window.foo = value; 
```

3\. 使用变量而不声明它，这是一个隐含的全局变量。真的要注意这些。您声明的函数实际上是一个隐含的全局本身，称为“clickhandler”。

```
foo = value; 
```

最小化全局变量使用的一种常见做法称为全局消除，您可以在其中定义一个特定于应用程序的全局变量来保存其余的全局变量，以避免与其他库发生冲突。这是通过声明一个对象字面量并使用创建全局变量的第二种方法来完成的。但是，仅当您需要全局变量时才使用它，并尽可能坚持功能范围。

```
var AWESOMENEWAPP = {};
AWESOMENEWAPP.test = "Peanut Butter"; 
```

当您深入了解 javascript 的世界时，您将开始学习有用的东西，例如闭包等，以保持您的代码干净和有条理。

只是不要期望 javascript 像典型的经典语言一样工作，你会发现它本身就是一种强大的语言，只是不同。

On your journey, I suggest using the tool [JSLint](http://www.jslint.com) to test your code for following conventions and errors you won't see because it isn't compiled.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T21:12:48.960

是的，如果您使用的是浏览器，全局函数和变量会一直存在，直到用户离开应用程序或关闭该选项卡。这就是为什么最好的做法是尽量不要在可能的情况下用变量或函数淹没全局范围。

# algorithm - 对具有 n 个元素的列表执行 O(1) 操作需要多少条指令？

> ID：10096505
> 
> 赞同：2
> 
> 时间：2012-04-10T21:09:25.637
> 
> 标签：algorithm, big-o

一个。总是一个
b. 不超过 n
c。一些固定的数字
d. 不超过 3

我选择了“不超过n”，但我的老师告诉我这是错误的。她没有给出错的原因，如果错了，答案是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-10T22:41:20.427

答案是否定的。下面的方法是O(1)。

1.  显然，它并不总是一个。
2.  有时大于 n。
3.  显然这不是一个固定的数字。
4.  它总是超过三个。

//

```
public void run ( List of size n )
{
     for ( int i = 0 ; i < 100 + ( n  % 100 ) ; i ++ )
     {
          step ( ) ;
     }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-10T21:11:55.620

正确答案是c。一些固定的数字。这个想法是无论元素的数量如何，操作总是花费相同的时间。 [见常数时间](http://en.wikipedia.org/wiki/Constant_time#Constant_time)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T21:12:55.637

一些固定的号码。

`O(1)`意味着恒定时间，或者意味着执行时间不取决于输入的大小（即使它可能需要比宇宙尽头更长的时间来执行）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-10T21:14:04.327

一些固定的数字将是正确的答案。您可以让函数执行 n-1 或 n+1 次操作，并且 b)/d) 会得到满足，但仍会在 O(n) 时间内完成。O(1) 时间要求有一个固定数 C，使得函数在 C 操作中运行，而与 n 无关。

也应该有一个算法标签而不是 Java 标签：P

# c# - 不允许新事务，因为会话 LINQ To 实体中正在运行其他线程

> ID：10096509
> 
> 赞同：149
> 
> 时间：2012-04-10T21:09:35.273
> 
> 标签：c#, linq, linq-to-entities

关于为什么这可能会破坏的任何想法？

```
foreach (var p in pp)
{
    ProjectFiles projectFile = (ProjectFiles)p;
    projectFile.Status = Constants.ProjectFiles_ERROR;
    projectFile.DateLastUpdated = DateTime.Now;
    context.SaveChanges();
} 
```

我读到该问题的解决方法是在 foreach 循环之前一次性检索结果。

但我没有这样做吗？“pp”是我的情况下的结果集合

* * *

## 回答 #1

> 赞同：377
> 
> 时间：2012-04-10T21:14:02.097

`pp`变量不是对象的集合，它是一个可以返回对象的枚举器。使用枚举器时，源必须保持打开状态。

使用该`ToList`方法将枚举数实现为集合。这将从枚举器中读取所有项目并关闭与源的连接，以便您可以将连接用于其他事情。

```
foreach (var p in pp.ToList()) 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2015-04-08T12:46:36.293

`.ToList()`解决此问题的一种方法是在迭代之前调用您的集合。

当您使用它时，`context.SaveChanges()`在循环退出后只调用一次以加快代码速度。

# java - 了解 Java 继承

> ID：10096521
> 
> 赞同：2
> 
> 时间：2012-04-10T21:10:39.893
> 
> 标签：java, inheritance, compiler-construction, polymorphism

给定以下 Java 代码：

```
class mainul {

    public static void main(String[] args) {

    /*block 1*/
        B b1 = new B();
        A a1 = b1;
        a1.m1(b1);

    /*block 2*/
        B b2 = new B();
        B a2 = b2;
        b2.m1(a2);
    }
}

class A {

    public static void p(Object o) {
        System.out.println(o.toString());
    }

    public void m1(A a) {
        p("m1(A) in A");

    }
}

class B extends A {

    public void m1(B b) {
        p("m1(B) in B");
    }
} 
```

有人可以解释为什么这个程序的输出是

```
m1(A) in A
m1(B) in B 
```

由于 a1 的动态类型是 B，人们会期望块 1 的输出是“b 中的 m1(B)”。我注意到 m1 的 A 和 B 中的函数签名不匹配（需要一个对象A 类型和 B 类型的另一个作为其参数），并且 A 中的方法似乎获得优先权，但不能真正将其链接到我的输出，因为它似乎与 block2 的输出不一致。

谢谢你的时间

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-10T21:16:41.513

正如您所注意到的，`B.m1(B)`不会覆盖`A.m1(A)`，因为它们采用不同的参数（尝试添加`@Override`注释，您会看到编译器抱怨）。所以它永远不能通过对`A`.

但是，它可以通过对 a 的引用来调用`B`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T03:55:17.753

只需按照代码：

> **区块 1**

```
B b1 = new B();   //- variable  b1 (type is B) points to instance of B() 

A a1 = b1;        //- variable  a1 (type is A) points to instance of B() .. same as b1 is
                  // pointing to.

 a1.m1(b1);       // Call Method m1 on a1 (i.e. of class A ) ..IMP catch > as a1 holds
                  // object of b1, if there is method in Class A which is overriden in B,
                  // call that overriden method. But here method m1() is not overriden 
                  // by B  it will call method of class A. 
```

> 区块 2

```
B b2 = new B();  // variable b2 (type B) points to instance of B()

B a2 = b2;       // variable a2 (type B) points to same instance as b2 is pointing to.

b2.m1(a2);       // call method m1 of b2 (of class B). There is only one method m1 in b2
                 // and b2 holds object of B, it must call method of class B 
```

此外，如果您希望块 1 中的“m1(B) in B”，只需将 A 类中的方法标记为虚拟方法并在 B 类中覆盖相同的方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-10T21:26:56.100

被调用的方法是在编译时设置的（在本例中为 A.m1(A)）。我知道你认为它是动态的，对吧？动态绑定是运行时绑定。是的，是的，但它仅对 A.m1(A) 上的方法是动态的。所以 A 的任何子类都可以提供替代实现，但它的签名必须相同，否则这是一个重载的方法，它不是同一个方法。

这也意味着调用中使用的参数不考虑动态绑定。方法名称和正式签名在编译时设置。更改类型，它不是相同的方法，不会被调用。

您可以这样做以强制编译器查看该方法：

```
a1.m1( (A)b1 ) 
```

这告诉编译器您尝试调用哪个方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-10T21:20:33.420

正如 Oli 所说，这两种方法签名是不同的。

当您在这里调用他们每个人时：

```
 B b1 = new B();
    A a1 = b1;
    a1.m1(b1);

    /*block 2*/
    B b2 = new B();
    B a2 = b2;
    b2.m1(a2); 
```

你首先传递一个 A 类型的对象，然后传递一个 B 类型的对象。这就是 Java 在这个上下文中所关心的，它不关心你从什么创建对象，只关心它是什么。

# url - 这个数据库的 URL 结构？

> ID：10096524
> 
> 赞同：2
> 
> 时间：2012-04-10T21:11:09.977
> 
> 标签：url, mod-rewrite

我现在正在使用具有 URL 结构的数据库站点：

> example.com/f.php?id=12

我想拥有

> example.com/f/12

我到处都看到这个（IMDb，Wikipedia..），但我不知道它是如何完成的。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T21:13:38.567

它们被称为虚 URL，您可以使用 htaccess 来完成。

[http://www.youtube.com/watch?v=oqg6Chk6L7M](http://www.youtube.com/watch?v=oqg6Chk6L7M)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T21:14:33.467

您正在寻找的是`mod_rewrite`. 它在位于服务器的 webroot 的 .htaccess 文件中定义。查看这篇文章-> [http://www.sitepoint.com/apache-mod_rewrite-examples/](http://www.sitepoint.com/apache-mod_rewrite-examples/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T21:32:25.293

它使用 Apache 的[mod_rewrite](http://httpd.apache.org/docs/current/mod/mod_rewrite.html)完成。对于您的示例，您必须在根文件夹中创建一个 .htaccess 文件，其中包含以下几行：

```
RewriteEngine On

RewriteRule ^f//?(.*)$ f.php?id=$1 [NC] 
```

this will present "example.com/f.php?id=12" to "example.com/f/12" and "example.com/f.php?id=12/" to "example.com/f/12/". So it can do with a little teaking. But you get the idea. There are many examples out there, with a minute of googling I came across [this](http://www.helicontech.com/isapi_rewrite/doc/examples.htm).

# c# - 加载 DirectX/Direct3D 时 Convert.ToDecimal 给出不同的结果

> ID：10096527
> 
> 赞同：6
> 
> 时间：2012-04-10T21:11:18.537
> 
> 标签：c#, mysql, direct3d

我正在将数据从 MySQL 数据库加载到 C# .NET 应用程序中。数据作为 DBType.Double 保存在数据库中，但为了在我的应用程序中使用，我使用 Convert.ToDecimal() 将其转换为十进制。该数据是测量中使用的位置数据，可用于在 Direct3D 窗口中显示 3D 模型。

当 Direct3D 窗口和 Direct3D dll 未加载时，转换工作正常，因此数据库中保存的 1769301.6485186936、5880300.8152837148 等值被加载为 1769301.64851869、5880300.81528371。但是，如果我已加载 Direct3D 模块，则转换会导致相同的值转换为 1769301.7112576、5880300.79401984。

基本代码如下，其中 vertex 是 3 个十进制值 X、Y 和 Z 的类/结构。

```
List<vertex> positions = new List<vertex>();

using (MySqlCommand cmd = new MySqlCommand("SELECT x, y, z FROM positionTable;", conn))
{

  MySqlDataReader dr = cmd.ExecuteReader();
  try
  {
    while (dr.Read())
    {
      vertex position = new vertex();
      position.X = Convert.ToDecimal(dr[0]);
      position.Y = Convert.ToDecimal(dr[1]);
      position.Z = Convert.ToDecimal(dr[2]);

      positions.Add(position);
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-10T21:17:01.827

创建 Direct3D 设备时，您要[`D3DCREATE_FPU_PRESERVE`在`D3DCREATE`](http://msdn.microsoft.com/en-us/library/windows/desktop/bb172527%28v=vs.85%29.aspx). 如果没有这个，DirectX (9) 将切换线程以使用单精度浮点运算，这将对数值计算产生影响，即使在您的托管代码中也是如此。

# objective-c - HOWTO：NSWindow 是否处于全屏模式（Lion）并启用/禁用？

> ID：10096529
> 
> 赞同：7
> 
> 时间：2012-04-10T21:11:32.527
> 
> 标签：objective-c, osx-lion, fullscreen, nswindow

我花了很多时间弄清楚如何确定我的 NSWindow 是否处于全屏模式，以及如何启用/禁用它进入或退出全屏模式。当我将一个视图动画化到另一个视图或做一些进入或退出全屏模式会搞砸的事情时，这很有用。有点像锁定一个窗口不被调整大小。

这个问题的答案贴在下面。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-10T21:12:47.063

对于任何对此感兴趣的人，您可以按原样分类或使用一些方法。我花了一些时间寻找如何做到这一点，并认为它可以帮助其他人：

这会告诉您是否处于全屏模式：

```
@implementation MyWindow

- (void) setStyleMask:(NSUInteger)styleMask {

    MyWindowController *wndController = (MyWindowController *)self.windowController;
    wndController.fullScreenMode = (styleMask & NSFullScreenWindowMask);
    [super setStyleMask:styleMask];
}

@end 
```

我在我的窗口控制器中设置一个属性。

为了完整起见，这里是 NSWindow 上的类别的样子：

```
@implementation NSWindow (CategoryNSWindow)

#pragma mark - Full Screen Mode:

- (BOOL) inFullScreenMode {

    return (self.styleMask & NSFullScreenWindowMask);
}

@end 
```

这两种方法将启用/禁用进入或退出全屏模式的能力：

```
- (void) enableFullScreen {

    NSWindowCollectionBehavior behavior = [self.window collectionBehavior];
    behavior |= NSWindowCollectionBehaviorFullScreenPrimary;
    [self.window setCollectionBehavior:behavior];
}

- (void) disableFullScreen {

    NSWindowCollectionBehavior behavior = [self.window collectionBehavior];
    behavior ^= NSWindowCollectionBehaviorFullScreenPrimary;
    [self.window setCollectionBehavior:behavior];
} 
```

请随意重命名方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-12T17:26:08.747

有两个事件`NSWindowDelegate`

*   `DidWindowEnterFullScreen`
*   `DidWindowExitFullScreen`

    这可以帮助您解决问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-25T22:45:06.967

NSWindowDelegate 的两个事件是：

```
– windowDidEnterFullScreen:
– windowDidExitFullScreen: 
```

# java - rsyntaxtextarea 组件添加 netbeans

> ID：10096532
> 
> 赞同：0
> 
> 时间：2012-04-10T21:11:58.203
> 
> 标签：java, swing, syntax-highlighting, rsyntaxtextarea

我正在使用`rsyntaxtextarea`，我已将它添加到 Netbeans 调色板，这里它有两个组件，

> RSyntaxTextArea 是主要的文本编辑器类。它扩展了 JTextArea，因此它具有您对 Swing 文本组件所期望的所有标准方法，以及更具体的处理语法突出显示的方法。
> 
> RTextScrollPane 是支持行号的 JScrollPane 的扩展。如果需要，您可以使用标准 JScrollPane，但是在编辑源代码时，启用行号通常会很好。

我实际上可以`RSyntaxTextArea`通过从调色板拖放它来添加，但我不能这样做`RTextScrollPane`（有必要`RSyntaxTextArea`比现有的滚动面板感觉更好）。错误消息说该组件无法实例化，您应该确保它是一个 JavaBean

> 如何通过拖放将这两个组件添加到 netbeans 中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-04T18:30:57.740

// 试试看;

```
/**
 *
 * @author Filipe
 */
public class RTextScrollPaneFlp extends RTextScrollPane {

    public RTextScrollPaneFlp() {

        super(new RTextEditorSyntaxFlp());
    }
}

/**
 *
 * @author Filipe
 */
public class RTextEditorSyntaxFlp extends RSyntaxTextArea {

    public RTextEditorSyntaxFlp() {

        super(5, 20);

        this.setSyntaxEditingStyle(SyntaxConstants.SYNTAX_STYLE_SQL);

        this.setCodeFoldingEnabled(true);

        Color azulClaro = Color.decode("#E0EEEE");

        this.setCurrentLineHighlightColor(azulClaro);

    }

}

/*Then right click on the class RTextScrollPaneFlp->Tools->Add to palette.

Create a new category or add the default category "beans".

Done, your component will appear in the palette, I hope that helps.

Enjoy yourself! 
```

*/

# ruby - 了解 ruby 中的 procs

> ID：10096534
> 
> 赞同：1
> 
> 时间：2012-04-10T21:12:09.847
> 
> 标签：ruby, variable-assignment, proc

我对以下代码感到困惑：

```
Proc.new do |a|
    a.something "test"

    puts a.something
    puts "hello"
end 
```

它运行时不会抛出任何错误。`puts`但是，这两个语句都没有打印任何内容。我对`a.something`“任务”很好奇。也许这是一个省略了括号的方法调用。**上面的代码发生了什么？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-10T21:25:40.383

```
Proc.new ...             # create a new proc

Proc.new{ |a| ... }      # a new proc that takes a single param and names it "a"

Proc.new do |a| ... end  # same thing, different syntax

Proc.new do |a|
  a.something "test"     # invoke "something" method on "a", passing a string
  puts a.something       # invoke the "something" method on "a" with no params
                         # and then output the result as a string (call to_s)
  puts "hello"           # output a string
end 
```

由于 proc 中的最后一个表达式是`puts`，它总是返回，所以*如果它被调用*`nil`，proc 的返回值将是。*`nil`*

 *```
irb(main):001:0> do_it = Proc.new{ |a| a.say_hi; 42 }
#=> #<Proc:0x2d756f0@(irb):1>

irb(main):002:0> class Person
irb(main):003:1>   def say_hi
irb(main):004:2>     puts "hi!"
irb(main):005:2>   end
irb(main):006:1> end

irb(main):007:0> bob = Person.new
#=> #<Person:0x2c1c168>

irb(main):008:0> do_it.call(bob)  # invoke the proc, passing in bob
hi!
#=> 42                            # return value of the proc is 42

irb(main):009:0> do_it[bob]       # alternative syntax for invocation
hi!
#=> 42 
```*

# sql-server-2008 - 无法使 SQL Pivot 工作

> ID：10096543
> 
> 赞同：1
> 
> 时间：2012-04-10T21:12:39.270
> 
> 标签：sql-server-2008

我有一个包含零件类别和相关零件成本的临时表：

```
#part_costs
part_cat  |  part_cost
tire      |  0
fuel      |  24
wheel     |  34 
```

行数和其中的值`#part_costs`是动态的。我正在尝试创建一个枢轴，因此我将拥有（与列的顺序无关）：

```
tire | fuel | wheel
0    | 24   | 34 
```

我创建了一个表变量，其中包含`NVARCHAR(2000)`包含名称的部件类别变量：

```
"[fuel],[tires],[wheel]" 
```

到目前为止，对于我的支点，我有

```
SELECT [fuel],[tires],[wheel] FROM (SELECT part_cat, part_cost FROM #part_costs ) p PIVOT ( [part_cost] FOR part_category IN ( [fuel],[tires],[wheel] )) AS pvt 
```

但是我无法让它发挥作用。我可以运行我的存储过程，它位于，但是当我执行我的存储过程时，我收到以下错误：`Incorrect syntax near the keyword 'FOR'.`

以前我`select 'part_cost' as costs, @part_names from (select part_cat, part_cost from #part_costs) as p PIVOT (part_cost for part_cat in (@part_names)) as PivotTable`虽然有了这个，但我什至无法运行我的存储过程`Incorrect syntax near the keyword 'for'.`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-10T21:21:10.563

您必须在 FOR 之前使用聚合函数（例如 AVG、MAX）。还要确保正确列出列值名称，即轮胎与轮胎不同。

```
SELECT [fuel],[tire],[wheel]
FROM (
    SELECT part_cat, part_cost
    FROM #part_costs
) p
PIVOT
(
    Avg([part_cost]) FOR part_cat IN ( [fuel],[tire],[wheel] )
) AS pvt 
```

# database-design - 如何处理删除异常？

> ID：10096544
> 
> 赞同：2
> 
> 时间：2012-04-10T21:12:43.407
> 
> 标签：database-design, relational-database, rdbms, referential-integrity

```
"There are circumstances in which the deletion of data representing certain facts
necessitates the deletion of data representing completely different facts. The 
"Faculty and Their Courses" table described in the previous example suffers 
from this type of anomaly, for if a faculty member temporarily ceases to be 
assigned to any courses, we must delete the last of the records on which that 
faculty member appears, effectively also deleting the faculty member. This 
phenomenon is known as a deletion anomaly." 
```

*   [http://en.wikipedia.org/wiki/Database_normalization](http://en.wikipedia.org/wiki/Database_normalization)

在关系数据库管理系统中应该如何处理删除异常？有没有“软删除”的替代品？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-10T21:37:48.840

删除异常是不良数据库设计的明显症状（假设是事务性设计）。摆脱它们的最好方法是将您的模型规范化为 - 至少 - 3rd Normal Form (3NF)。

可以在[这里](http://www.gslis.utexas.edu/~wyllys/DMPAMaterials/normover.html)找到一个很好的解释。

# jakarta-ee - Faces Servlet 抛出异常：java.lang.IllegalStateException

> ID：10096551
> 
> 赞同：3
> 
> 时间：2012-04-10T21:13:06.073
> 
> 标签：jakarta-ee, jsf-2

我正在尝试将我的应用程序从 jsf 1.2 迁移到 2.1。我写了一个示例 facelet 页面并尝试访问它。得到以下异常。不知道是什么导致了这个问题。如果仅执行此页面（通过删除与我的项目相关的所有代码和库，此页面将正确呈现）。关于可能导致此问题的任何帮助都会非常有帮助。

```
Servlet.service() for servlet Faces Servlet threw exception: java.lang.IllegalStateException: Header count exceeded allowed maximum: 128
    at org.apache.tomcat.util.http.MimeHeaders.createHeader(MimeHeaders.java:329) [jbossweb-7.0.10.Final.jar:]
    at org.apache.tomcat.util.http.MimeHeaders.addValue(MimeHeaders.java:347) [jbossweb-7.0.10.Final.jar:]
    at org.apache.coyote.Response.addHeader(Response.java:351) [jbossweb-7.0.10.Final.jar:]
    at org.apache.catalina.connector.Response.addHeader(Response.java:1110) [jbossweb-7.0.10.Final.jar:]
    at org.apache.catalina.connector.ResponseFacade.addHeader(ResponseFacade.java:502) [jbossweb-7.0.10.Final.jar:]
    at javax.servlet.http.HttpServletResponseWrapper.addHeader(HttpServletResponseWrapper.java:202) [jboss-servlet-api_3.0_spec-1.0.0.Final.jar:1.0.0.Final]
    at javax.servlet.http.HttpServletResponseWrapper.addHeader(HttpServletResponseWrapper.java:202) [jboss-servlet-api_3.0_spec-1.0.0.Final.jar:1.0.0.Final]
    at javax.servlet.http.HttpServletResponseWrapper.addHeader(HttpServletResponseWrapper.java:202) 
    at javax.servlet.http.HttpServletResponseWrapper.addHeader(HttpServletResponseWrapper.java:202) [jboss-servlet-api_3.0_spec-1.0.0.Final.jar:1.0.0.Final]
    at javax.servlet.http.HttpServletResponseWrapper.addHeader(HttpServletResponseWrapper.java:202) [jboss-servlet-api_3.0_spec-1.0.0.Final.jar:1.0.0.Final]
    at com.sun.faces.context.ExternalContextImpl.<init>(ExternalContextImpl.java:137) [jsf-impl-2.1.5-jbossorg-1.jar:2.1.5-SNAPSHOT]
    at com.sun.faces.context.ExternalContextFactoryImpl.getExternalContext(ExternalContextFactoryImpl.java:73) [jsf-impl-2.1.5-jbossorg-1.jar:2.1.5-SNAPSHOT]
    at com.sun.faces.context.FacesContextFactoryImpl.getFacesContext(FacesContextFactoryImpl.java:93) [jsf-impl-2.1.5-jbossorg-1.jar:2.1.5-SNAPSHOT]
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:583) [jboss-jsf-api_2.1_spec-2.0.0.Final.jar:2.0.0.Final]
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:329) [jbossweb-7.0.10.Final.jar:]
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248) [jbossweb-7.0.10.Final.jar:]
    at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:734) [jbossweb-7.0.10.Final.jar:]
    at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:541) [jbossweb-7.0.10.Final.jar:]
    at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:479) [jbossweb-7.0.10.Final.jar:]
    at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:407) [jbossweb-7.0.10.Final.jar:]
    at com.sun.faces.context.ExternalContextImpl.dispatch(ExternalContextImpl.java:546) [jsf-impl-2.1.5-jbossorg-1.jar:2.1.5-SNAPSHOT]
    at com.sun.faces.application.view.JspViewHandlingStrategy.executePageToBuildView(JspViewHandlingStrategy.java:364) [jsf-impl-2.1.5-jbossorg-1.jar:2.1.5-SNAPSHOT]
    at com.sun.faces.application.view.JspViewHandlingStrategy.buildView(JspViewHandlingStrategy.java:154) [jsf-impl-2.1.5-jbossorg-1.jar:2.1.5-SNAPSHOT]
    at com.sun.faces.lifecycle.RenderResponsePhase.execute(RenderResponsePhase.java:100) [jsf-impl-2.1.5-jbossorg-1.jar:2.1.5-SNAPSHOT]
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101) [jsf-impl-2.1.5-jbossorg-1.jar:2.1.5-SNAPSHOT]
    at com.sun.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:139) [jsf-impl-2.1.5-jbossorg-1.jar:2.1.5-SNAPSHOT]
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:594) [jboss-jsf-api_2.1_spec-2.0.0.Final.jar:2.0.0.Final] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T18:55:31.513

此问题与 faces-config.xml 有关。标题应该是。

```
<faces-config version="2.0"
   xmlns="http://java.sun.com/xml/ns/javaee"
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   xsi:schemaLocation="
      http://java.sun.com/xml/ns/javaee
      http://java.sun.com/xml/ns/javaee/web-facesconfig_2_0.xsd"> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-14T20:30:20.940

在你的 head 元素中包含这个标签，如下所示：

```
<h:head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
</h:head> 
```

[维基](http://en.wikipedia.org/wiki/Character_encodings_in_HTML#Specifying_the_document.27s_character_encoding)上的解释

# c# - 1 综合计时器 vs. 多个计时器，每个对象一个计时器

> ID：10096552
> 
> 赞同：1
> 
> 时间：2012-04-10T21:13:17.513
> 
> 标签：c#, winforms, timer

我有一个关于良好实践的问题。我正在制作一个简单的游戏，并且正在玩弄一些精灵。

我有一个精灵类。在该类中，有一个每隔几毫秒运行一次的计时器。

现在，我有一个`List<Creatures>`和每个人的“生物”，在其中有一个 Sprite 对象来运行动画。所以这意味着每个生物都有一个做同样事情的计时器。

我决定改变这一点，制作一个只在列表上迭代的计时器，并调用为每个“生物”创建动画的函数。

什么是好的做法？

1.  给每个“生物”自己的计时器。
2.  在表单中创建一个迭代列表的“大”计时器，并调用从每个对象创建动画的函数。
3.  不一样的方式

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-10T21:15:48.163

如果它们都以相同的间隔运行，那么一个大计时器绝对是要走的路。

即使它们以不同的间隔运行，一个大计时器（通过逻辑确定哪个子处理程序触发）通常仍然是最好的。

一些库会在内部添加这个逻辑，并且只向操作系统请求一个计时器。您还没有确切说明您正在使用哪个计时器（.NET 至少有四个），所以我建议您自己使用一个集中式计时器。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-10T21:16:08.420

> 我有一个精灵类。在该类中，有一个每隔几毫秒运行一次的计时器。

不幸的是，事实并非如此。您受到（非高性能）系统时钟分辨率的限制，大约为 15 毫秒。因此，您可以根据需要将间隔设置为 1，但这并不是您实际得到的。

回到主题，对于游戏来说，一切都应该在同一个时钟上运行。对于每个刻度，您将有一个循环更新游戏的逻辑状态（位置和诸如此类），然后是显示（动画帧、blit 到屏幕等）。如果您将它们放在不同的计时器上，您可能会遇到问题，因为在并行更新对象时协调对象的状态将变得非常困难。

还要意识到您需要标准化更新速率，以确保更新不会太快或太慢（取决于渲染帧所需的时间）。您需要检查上次更新和新更新之间的增量并采取相应措施。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-10T21:26:07.797

最好的办法是实现一个游戏循环，该循环跟踪自上次循环迭代以来经过了多少时间，然后将经过的时间量传递给所有需要自我更新的实体。

例如，[OpenTk](http://www.opentk.com/)实现了在每次通过游戏循环时发生的[几个事件（例如 OnUpdateFrame、OnRenderFrame）。](https://github.com/mono/opentk/blob/master/Source/OpenTK/GameWindow.cs)

这些事件中的每一个都传递了一个[FrameEventArgs](https://github.com/mono/opentk/blob/master/Source/OpenTK/FrameEventArgs.cs)类型的参数，该参数具有一个 Time 属性：

```
/// <summary>
/// Gets a <see cref="System.Double"/> that indicates how many seconds of time elapsed since the previous event.
/// </summary>
public double Time 
{
    get { return elapsed; }
    internal set
    {
        if (value <= 0)
            throw new ArgumentOutOfRangeException();
        elapsed = value;
    }
} 
```

根据经过的时间，您可以确定要在精灵中渲染的动画帧。

额外的好处是，通过查看这段时间，您可以计算出您当前正在运行的每秒帧数并根据它做出决策（跳过帧的渲染，降低渲染复杂性等）。

# android - 单击gridView中的项目时如何获取X和Y值

> ID：10096555
> 
> 赞同：-1
> 
> 时间：2012-04-10T21:13:32.320
> 
> 标签：android, gridview

当我单击它时，我想获取网格视图项目的 X 和 Y 值，但是我该如何执行此操作或如何获取这些值？

我知道我会使用 setOnItemClickListener 方法，但我只能从中获取位置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T21:17:50.220

通过调用设置触摸侦听器

```
grid.setOnTouchListener(). 
```

其中一个参数是一个`MotionEvent`对象，它将包括 x 和 y 位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T21:17:22.367

Here is how I get x and y coordinates of where the user clicks on Google Maps. Try if replacing it with other kinds of views works with you

```
public boolean onTouchEvent(MotionEvent e, MapView m) {
if (e.getAction() == MotionEvent.ACTION_DOWN) {
    long start = e.getEventTime();
    x = (int)e.getX();
    y = (int)e.getY();
    touchedPoint = map.getProjection().fromPixels(x, y);
} 
```

Here map is name of my MapView . Basically it fetched X, Y from MotionEvent

# php - 记录用户点击了什么

> ID：10096558
> 
> 赞同：0
> 
> 时间：2012-04-10T21:13:38.857
> 
> 标签：php, mysql, recording

我想识别（使用 php、mysql）并保存用户点击了哪些博客条目。比如，我有技术条目、生活方式条目等，我想记录用户感兴趣的条目，这样我就可以只为他提供这些条目！

所以你知道我的意思吗？我想知道是否有任何教程或什么的。

谢谢，达托克斯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T21:15:34.463

当他们打开页面时，只需将该博客条目的 id 存储在一个表中。以后，您可以在该表上为该用户执行 COUNT (*) 之类的简单操作，按类别排序，并找出他们最感兴趣的类别。您可以得到非常复杂的推荐，但这是一个更简单的方法来完成它。希望有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T22:05:40.973

我喜欢使用 www.statcounter.com

所以创建一个页面：tracker.PHP，并在其中放入来自 statcounter 的跟踪代码（或谷歌分析）

在每个带有链接的页面上，我都会放置一个带有 id="tracker" 并且还没有 src 的隐藏 iframe，：

```
<iframe id="tracker" style="visibility:hidden;height:0px;width:0px;" frameborder="0">
</iframe> 
```

然后每个链接我都会做类似的事情：

```
<a href="/some_tech_article.php"
 onclick="document.getElementById('tracker').src='/tracker.php?location=techarticle';">Tech Articles
</a> 
```

因此，每次有人点击链接时，iframe 都会无形地加载您的 tracker.php 页面并发送您想要在 URL 中发送的任何信息（作为[$_GET php 变量](http://www.w3schools.com/php/php_get.asp)）......从那里您可以跟踪和保存您的任何信息'想进入数据库或其他任何东西。

您可以使用此技巧在用户单击内容时在幕后发送信息，而无需切换页面。我用它来跟踪点击，并更新 mysql 中的表。

如果你需要我给你一个更好的例子，请告诉我！

# java - Java 桌面应用程序无法从具有俄语名称的文件夹中运行

> ID：10096560
> 
> 赞同：4
> 
> 时间：2012-04-10T21:13:43.187
> 
> 标签：java, internationalization, derby

我使用 Java DB 在 netbeans 上创建了桌面应用程序。当用户运行它时它会建立连接，并且在所有计算机上都可以正常工作，但是当我将它复制到具有俄语名称的文件夹时，我的意思是文件夹名称是俄语，所以我的程序的路径显然会包含俄语特征，它不运行，特别是它运行但无法连接到 Derby，我的启动画面出现不到一秒钟，程序关闭。我能做些什么？请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T21:39:50.213

疯狂的猜测 - 听起来像是连接字符串编码问题。这可能值得一看。

来自[http://db.apache.org/derby/docs/10.2/tools/tools-single.html](http://db.apache.org/derby/docs/10.2/tools/tools-single.html)

> derby.ui.codeset
> 
> 功能 使用默认系统不支持的语言使用其中一种 Derby 工具时，将此属性设置为受支持的字符编码值。句法
> 
> derby.ui.codeset=derbyval
> 
> 其中 derbyval 是受支持的字符编码值，例如 UTF8（请参阅示例字符编码）。示例 下面的命令行指定使用日文拉丁汉字混合编码 (codeset=Cp939) 使用日文领土 (territory=ja_JP) 运行 ij：
> 
> java -Dderby.ui.territory=ja_JP -Dderby.ui.codeset=Cp939 -Dij.protocol=jdbc:derby: org.apache.derby.tools.ij
> 
> 下表包含 IBM Application Developer Kit 支持的字符编码示例。要查看完整列表，请访问[http://java.sun.com/j2se/1.3/docs/guide/intl/encoding.doc.html](http://java.sun.com/j2se/1.3/docs/guide/intl/encoding.doc.html)。表 2\. 示例字符编码

# installshield - 调用 Oracle SQL 脚本时，InstallShield 2012 挂起

> ID：10096561
> 
> 赞同：0
> 
> 时间：2012-04-10T21:13:50.490
> 
> 标签：installshield, installshield-2012

我有一个 InstallShield 2012 InstallScript MSI 项目，我需要运行 Oracle SQL 脚本。

我的测试脚本如下所示：

```
update zversion set comments = 'Oracle' where version = '1.30.1' 
```

运行时安装挂起并显示对话框：“自定义操作。正在执行 SQL 安装脚本...”

日志文件中的最后一项：

MSI (s) (70:30) [16:05:31:054]：执行操作：CustomActionSchedule(Action=ISSQLServerInstall,ActionType=1025,Source=BinaryData,Target=ISSQLServerInstall,CustomActionData=C:\Users\P\AppData \Local\Temp\~E303.tmp) MSI (s) (70:D4) [16:05:31:367]：调用远程自定义操作。DLL：C:\Windows\Installer\MSIEF3A.tmp，入口点：ISSQLServerInstall 1：处理 SQL 连接“SQLServer”... 1：跳过 SQL 连接“SQLServer”。此连接在 IS_SQLSERVER_CXNS_ABSENT_FROM_INSTALL 属性中指定。1：处理SQL连接'Oracle'... 1：判断连接下是否有至少一个SQL脚本被调度执行...... 1：SQL脚本'SqlScript5.sql1'被调度执行。请注意，如果您为此脚本指定了架构版本，将在稍后做出最终决定。Script Execution=RunOnInstall, Action=Install, Component State=Install, Schema= 1: 试图建立 SQL 连接...服务器: P.PO.COM, 数据库: MSOW 1: [Microsoft][ODBC Driver Manager] Driver's SQLSetConnectAttr失败 1：尝试执行 SQL 脚本... 1：确定是否执行 SQL 脚本“SqlScript5.sql1”... 1：将执行 SQL 脚本，因为在目标数据库上找不到架构版本。1：准备执行SQL脚本文件：'SqlScript5.sql1'。路径：'C:\Users\P\AppData\Local\Temp\~E314.tmp' 1：在第 3 行执行 SQL >>> 正在尝试执行 SQL 脚本... 1：确定是否将执行 SQL 脚本“SqlScript5.sql1”... 1：将执行 SQL 脚本，因为在目标数据库上找不到架构版本。1：准备执行SQL脚本文件：'SqlScript5.sql1'。路径：'C:\Users\P\AppData\Local\Temp\~E314.tmp' 1：在第 3 行执行 SQL >>> 正在尝试执行 SQL 脚本... 1：确定是否将执行 SQL 脚本“SqlScript5.sql1”... 1：将执行 SQL 脚本，因为在目标数据库上找不到架构版本。1：准备执行SQL脚本文件：'SqlScript5.sql1'。路径：'C:\Users\P\AppData\Local\Temp\~E314.tmp' 1：在第 3 行执行 SQL >>>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T15:35:16.087

解决。

我删除了旧的脚本文件并创建了一个新的。不知道旧文件出了什么问题。

# plsqldeveloper - 如何在 PL/SQL Developer 中保存密码？

> ID：10096577
> 
> 赞同：20
> 
> 时间：2012-04-10T21:15:24.630
> 
> 标签：plsqldeveloper

我已将数据库信息放入 Tnsnames.ora，现在每次启动 PL/SQL Developer 时，我都会获得数据库的下拉列表，但每次都必须输入密码。

在工具>首选项下有一个选项可以存储多个连接的密码，但它似乎没有任何效果。启动应用程序时，密码字段始终为空白。

我怎样才能让这个记住密码？

*我正在使用 PL/SQL Developer 9.0.2.1621*

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-05-12T19:04:21.627

转到：-工具-->首选项-->登录历史-->单击复选框存储历史和存储密码。-->应用。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-04-12T09:24:45.670

首次登录后，密码已保存。下次不用输入，点击用户名旁边的[...]，选择数据库，它会自动登录。希望能帮助到你！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-12-16T17:02:06.280

现在是 2019 年，sqldeveloper 的版本是 19.2。

万一有人像我一样偶然发现这个古老但仍然是实际的问题，答案就变成了：

*   右键单击左侧菜单中的相关连接，然后选择属性
*   在相关输入中输入密码并选中“保存密码”
*   点击保存按钮
*   确认您要覆盖之前的描述

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-06-25T11:43:32.080

我发现与 19.1 相同的问题....

转到连接属性，选中该框以保存密码。输入密码并点击保存。关闭属性框。

现在点击全部保存。

这对我有用。

# c# - 如何实现文本框和双值之间的双向绑定？

> ID：10096579
> 
> 赞同：1
> 
> 时间：2012-04-10T21:15:29.407
> 
> 标签：c#, wpf, xaml, data-binding

这是我的窗口的代码：

```
<Window
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    x:Class="leartWPF.ControlTestWindow"
    x:Name="Window"
    Title="ControlTestWindow"
    Width="640" Height="480">

    <Grid x:Name="LayoutRoot">
        <TextBlock Height="26" Margin="45,26,241,0" TextWrapping="Wrap" Text="Please, enter an ariphmetical expression to calculate:" VerticalAlignment="Top"/>
        <TextBox Margin="48,72,63,201" TextWrapping="Wrap" Text="{Binding Input, ElementName=Window, FallbackValue=1+1, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged, ValidatesOnDataErrors=True}" TextChanged="TextBox_TextChanged" >
        </TextBox>
        <!--<TextBlock Margin="282,208,266,167" TextWrapping="Wrap" Text="=" FontSize="64"/>-->
        <TextBlock Height="90" Margin="83,0,77,60" TextWrapping="Wrap" VerticalAlignment="Bottom" FontSize="48" Text="{Binding Result, ElementName=Window, Mode=TwoWay}"/>
        <Button Content="=" Height="27" Margin="233,0,263,166" VerticalAlignment="Bottom" FontSize="16"/>
    </Grid>
</Window> 
```

和班级：

```
public partial class ControlTestWindow : Window
{
    private string _input;

    public double Result { get; set; }
    private static VsaEngine _engine = VsaEngine.CreateEngine();

    public string Input
    {
        get { return _input; }
        set
        {
            Result = double.Parse(Eval.JScriptEvaluate(value, _engine).ToString());
            _input = value;
        }
    }

    public ControlTestWindow()
    {
        this.InitializeComponent();

        // Insert code required on object creation below this point.
    }

    private void TextBox_TextChanged(object sender, TextChangedEventArgs e)
    {
    }

} 
```

**Input**得到更新，Result**值**发生变化，但它永远不会显示在适当的 TextBlock 上。

我应该改变什么才能使它起作用？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-10T21:20:18.707

TextBlock 不会收到有关`Result`属性更改的通知。你有两个选择：

1.  将该属性实现为[`DependencyProperty`](http://msdn.microsoft.com/en-us/library/ms752914.aspx). Visual Studio 有一个代码片段。键入`propdp`，您会看到它以智能感知方式弹出。
2.  在您的 Window 类上实现[`INotifyPropertyChanged`](http://msdn.microsoft.com/en-us/library/ms229614.aspx)并在您的属性中使用它。

# c# - 将 Json 对象数组转换为最合适的 .Net 集合

> ID：10096586
> 
> 赞同：1
> 
> 时间：2012-04-10T21:16:05.170
> 
> 标签：c#, .net, json.net

我有以下 Json 集合，我需要将其表示为 .Net 集合。本质上，它是一个键值对列表，其中的键 (col) 可能具有重复项（现阶段字典已出）。

我排序和分组会很好，但不是必需的。任何帮助确定最好的.Net枚举最适合吗？

```
[
    {
        "col": "thiscol",
        "val": "thisval"
    },
    {
        "col": "thiscol",
        "val": "thisval2"
    },
    {
        "col": "thiscol2",
        "val": "thisval2"
    },
    {
        "col": "thiscol3",
        "val": "thisval3"
    }
] 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-10T21:23:22.340

使用[Json.Net](http://json.codeplex.com/)

```
dynamic dynObj = JsonConvert.DeserializeObject(yourstring);
foreach (var item in dynObj)
{
    Console.WriteLine(item.col + " " + item.val);
} 
```

**或者**

```
JArray jArray = (JArray)JsonConvert.DeserializeObject(yourstring);
var newlist = jArray.OrderByDescending(x => x["val"]).ToArray(); 
```

**或者**

```
JArray jArray = (JArray)JsonConvert.DeserializeObject(yourstring);
dynamic dynObj1 = jArray.OrderByDescending(x => x["val"]);
foreach (var item in dynObj1)
{
    Console.WriteLine(item.col + " " + item.val);
} 
```

**或**使用内置的 JavaScriptSerializer &`dynamic`

```
dynamic dynObj2 = new JavaScriptSerializer().Deserialize<List<object>>(yourstring);
foreach (var item in dynObj2)
{
    Console.WriteLine(item["col"] + " " + item["val"]);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T21:18:09.703

在这种情况下，您可以使用查找，基本上是一个允许每个键有多个值的字典 - 使用 Linq，您可以使用`ToLookup()`. 请注意，查找是不可变的 - 这可能不符合您的要求。

当然，您也可以使用 a `Dictionary<T,IList<U>>`(or `IEnumerable<U>`)*集合*作为您的值类型 - 字典就是这样灵活的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-10T21:20:03.163

`IEnumerable<YourObject>``YourObject`您定义的用于保存这些值的类在哪里。我建议使用[Json.Net](http://json.codeplex.com/documentation)来解析 json。然后，您可以使用 linq 来管理您返回的 IEnumerable。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-10T21:29:34.960

你看过[NameValueCollection](http://msdn.microsoft.com/en-us/library/system.collections.specialized.namevaluecollection.aspx)吗？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-03-11T10:19:52.043

`JArray arr = JArray.Parse(Your string);`

之后使用 for 循环获取值，

# capistrano - Capistrano 不使用 sudo 尽管 :use_sudo, true

> ID：10096588
> 
> 赞同：2
> 
> 时间：2012-04-10T21:16:13.473
> 
> 标签：capistrano

我是 Capistrano 的新手，正在使用以前使用 Chef 运行部署的现有服务器。

我在 deploy.rb 中设置了 :use_sudo, true ，但“cap deploy:check”声称“您没有权限写入 '/srv/app/'”

我的部署用户已正确配置为 sudo，没有密码提示。如果我在服务器上手动运行“sudo test -w /srv/app”，它会成功。

为什么 Capistrano 不使用 sudo？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T22:11:01.393

该命令失败，因为该目录不存在。你应该先运行`cap deploy:setup`之后才能`cap deploy:check`成功。

# amazon-ec2 - Route 53 是否指向实例而不是 IP 或 CNAME？

> ID：10096594
> 
> 赞同：45
> 
> 时间：2012-04-10T21:16:41.523
> 
> 标签：amazon-ec2, dns, amazon-route53

我们使用 Route 53 DNS 指向 EC2 实例。有没有办法让 Route 53 直接指向实例，而不是指向弹性 IP 或 CNAME？

我有多个原因：

1.  我不想烧一个IP。

2.  CNAME 是不可靠的，因为如果一个实例宕机又恢复，全名 ec2-XXXX.compute-1.amazonaws.com 将会改变。

3.  将来，我需要以编程方式启动实例并使用子域对其进行寻址，而且我认为使用弹性 IP 或 CNAME 都没有简单的方法来做到这一点。

最好的方法是什么？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-12T19:38:22.260

我为这个问题编写了自己的解决方案，因为我对这里介绍的其他方法不满意。使用 Amazon CLI 工具很好，但恕我直言，它们往往比使用其他 Amazon API 库（例如 Ruby）的直接 API 调用慢。

这是我的[AWS Route53 DNS 实例更新](https://gist.github.com/kixorz/5146008)要点的链接。它包含一个 IAM 策略和一个 Ruby 脚本。您应该在 IAM 面板中创建一个新用户，使用附加的策略（其中包含您的区域 ID）对其进行更新，并在 Ruby 脚本中设置凭证和参数。第一个参数是托管区域中实例的主机名别名。实例的私有主机名别名为`<hostname>.<domain>`，实例的公有主机名别名为`<hostname>-public.<domain>`

**更新**：这是[AWS Route53 DNS 实例更新 init.d 脚本](https://gist.github.com/kixorz/81287bb06dbc5e16e96b)在实例启动时注册主机名的链接。如果想以类似的方式使用[AWS Route53 DNS 负载平衡](https://gist.github.com/kixorz/627a9235b21fe9df2f18)，这是另一个。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-09T06:18:39.067

如果您坚持使用 route53，您可以编写一个脚本，在该实例每次重新启动时更新该实例的 CNAME 记录。

看到这个-> [http://cantina.co/automated-dns-for-aws-instances-using-route-53/](http://cantina.co/automated-dns-for-aws-instances-using-route-53/)（披露，我没有创建这个，虽然我用它作为类似情况的跳跃点）

更好的是，因为您提到能够以编程方式启动实例，所以这种方法应该可以指导您实现这一目标。

另见-> [http://docs.pythonboto.org/en/latest/index.html](http://docs.pythonboto.org/en/latest/index.html)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2017-11-12T21:44:37.753

如果您在 Route53 中托管至少部分 dns，则还可以选择结合使用 Cloudwatch、Route53 和 Lambda。这样做的好处是您不需要在实例本身上运行任何应用程序。

要使用此方法，您需要配置一条 Cloudwatch 规则，以便在 EC2 实例的状态更改为运行时触发 Lambda 函数。然后，Lambda 函数可以检索实例的公共 IP 地址并更新 Route53 中的 dns 记录。

Lambda 可能看起来像这样（使用 Node.js 运行时）：

```
var AWS = require('aws-sdk');

var ZONE_ID = 'Z1L432432423';
var RECORD_NAME = 'testaws.domain.tld';
var INSTANCE_ID = 'i-423423ccqq';

exports.handler = (event, context, callback) => {
    var retrieveIpAddressOfEc2Instance = function(instanceId, ipAddressCallback) {
        var ec2 = new AWS.EC2();

        var params = {
                InstanceIds: [instanceId]
        };

        ec2.describeInstances(params, function(err, data) {
            if (err) {
                callback(err);                
            } else {
                ipAddressCallback(data.Reservations[0].Instances[0].PublicIpAddress);
            }            
        });
    }

    var updateARecord = function(zoneId, name, ip, updateARecordCallback) {
        var route53 = new AWS.Route53();

        var dnsParams = {
                ChangeBatch: {
                    Changes: [
                        {
                            Action: "UPSERT", 
                            ResourceRecordSet: {
                                Name: name, 
                                ResourceRecords: [
                                    {
                                        Value: ip
                                    }
                                    ], 
                                    TTL: 60, 
                                    Type: "A"
                            }
                        }
                        ], 
                        Comment: "updated by lambda"
                },
                HostedZoneId: zoneId
        };

        route53.changeResourceRecordSets(dnsParams, function(err, data) {
            if (err) {
                callback(err, data);
            } else {
                updateARecordCallback();
            }            
        });
    }

    retrieveIpAddressOfEc2Instance(INSTANCE_ID, function(ip) {
        updateARecord(ZONE_ID, RECORD_NAME, ip, function() {
            callback(null, 'record updated with: ' + ip);
        });
    });
} 
```

您将需要使用有权描述 EC2 实例和更新 Route53 中的记录的角色来执行 Lambda。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-10T22:11:51.647

使用 Route 53，您可以创建映射到弹性负载均衡器 (ELB) 的别名记录：

[http://docs.amazonwebservices.com/Route53/latest/DeveloperGuide/HowToAliasRRS.html](http://docs.amazonwebservices.com/Route53/latest/DeveloperGuide/HowToAliasRRS.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-02-01T08:22:16.077

我没有尝试过 aws EC2 实例，但它也应该可以工作。我编写了一个小型 Java 程序，用于检测机器的公共 IP 并更新 aws route 53 上的某个记录。

唯一的要求是您需要在 EC2 实例上安装 Java。

该项目托管在[https://github.com/renatodelgaudio/awsroute53](https://github.com/renatodelgaudio/awsroute53)上，如果需要，您也可以自由修改它

您可以将其配置为在启动时运行或作为 crontab 作业运行，以便按照类似于这些 [Linux 手动安装步骤的说明使用新的公共 IP 更新您的记录](https://github.com/renatodelgaudio/awsroute53/wiki/Linux-manual-installation-steps)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-08-18T10:01:38.653

我使用这个 cli53 工具让 EC2 实例在启动期间为自己创建一条 A 记录。

[https://github.com/barnybug/cli53](https://github.com/barnybug/cli53)

我在我的文件中添加了以下几行`rc.local`（请检查您的 linux 在启动期间调用此脚本）：

```
IP=$(curl http://169.254.169.254/latest/meta-data/public-ipv4)
/usr/local/bin/cli53 rrcreate example.com "play 30 A $IP" --wait --replace 
```

它创建一个`play.example.com`指向 EC2 实例当前公共 IP 的 A 记录。

您需要为 EC2 实例分配一个 IAM 角色，这允许该实例操作 Route 53。在最简单的情况下，只需使用预定义的策略创建一个 IAM 角色`AmazonRoute53FullAccess`。然后将此角色分配给 EC2 实例。

# jquery - 仅当滑块 div 处于活动状态时 jQuery 动画

> ID：10096596
> 
> 赞同：1
> 
> 时间：2012-04-10T21:16:44.400
> 
> 标签：jquery, jquery-plugins

这是代码：http: [//jsfiddle.net/duNHJ/2/](http://jsfiddle.net/duNHJ/2/)

基本上每个 div 都有一个动画，所以当我单击下一个或上一个滑块时，动画脚本应该只在激活 div 时运行。目前，它在一开始就为所有这些设置动画。

使用[http://www.malsup.com/jquery/cycle/](http://www.malsup.com/jquery/cycle/)

另外如何在激活的 div 上添加活动类？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T22:24:53.523

关于您的第一个问题，我不太确定您想要什么，但是关于添加/删除活动状态类，请参见以下示例：

[http://jsfiddle.net/duNHJ/27/](http://jsfiddle.net/duNHJ/27/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T21:44:09.300

任何脚本都将在加载后立即运行。此外，使用 selector `$('.test')`，动画将在所有具有 class 的元素上运行`test`。您想在 div 更改时制作动画。jQuery Cycle Plugin 提供了回调方法来做到这一点：

```
$('#example').cycle({ 
    fx:     'scrollLeft', 
    timeout: 5000, 
    before:  onBefore, 
    after:   onAfter 
}); 
```

函数`onBefore()`在转换之前`onAfter()`调用，之后调用。在您的情况下，只需使用`onAfter()`（并摆脱内联脚本）：

```
function onAfter() {
    // $(this) references the current slide
    $(this).animate({
        top: "100px"
    }, 1000);
}

$('#s6').before('<div id="nav">').cycle({
    fx: 'fade',
    timeout: 6000,
    delay: -2000,
    pager: '#nav',
    next: '#next2',
    prev: '#prev2',
    activePagerClass: 'activeSlide',
    after: onAfter
}); 
```

演示：http: [//jsfiddle.net/jtbowden/cmwc3/](http://jsfiddle.net/jtbowden/cmwc3/)

我不确定你想要发生什么动画，但这应该让你开始。

# c++ - Acces SQLite database with C++ on iOS?

> ID：10096598
> 
> 赞同：4
> 
> 时间：2012-04-10T21:16:57.473
> 
> 标签：c++, objective-c, ios, sqlite

Is it possible to acces the SQLite API on iOS using C++ instead of Objective-C? I'm working on a music sequencer and I think my best option is storing the notes in a SQLite database with an indexed measure column.

I need those notes to calculate my sound frames and C++ is recommended for real time audio processing. (I'm calculating the sine wave for each note.) I'm guessing that using C++ for the SQLite database would speed things up as well and that way I wouldn't have to switch from Obj-C to C++ all the time.

Any idea if this is possible, and any examples?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-10T21:25:13.813

对的，这是可能的。您只需将 SQLite 库添加到您的项目中，并遵循[SQLite C/C++ API](http://www.sqlite.org/cintro.html)即可。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-10T21:25:25.787

每当您使用数据库时，它都会比从 C++ 调用 Obj-C 函数可能花费的几个周期慢得多。

这是一个过早的优化。只需以简单的方式访问数据库，**当**它成为问题时，您将处于一个更好的位置来修复它，因为到那时您将知道瓶颈*在哪里。*

# c - Bitwise operations equivalent of greater than operator

> ID：10096599
> 
> 赞同：23
> 
> 时间：2012-04-10T21:17:00.827
> 
> 标签：c, binary, bit-manipulation

I am working on a function that will essentially see which of two ints is larger. The parameters that are passed are `2` 32-bit ints. The trick is the only operators allowed are `! ~ | & << >> ^` (no casting, other data types besides signed int, *, /, -, etc..).

My idea so far is to `^` the two binaries together to see all the positions of the `1` values that they don't share. What I want to do is then take that value and isolate the `1` farthest to the left. Then see of which of them has that value in it. That value then will be the larger. (Say we use 8-bit ints instead of 32-bit). If the two values passed were `01011011` and `01101001` I used `^` on them to get `00100010`. I then want to make it `00100000` in other words `01xxxxxx -> 01000000` Then `&` it with the first number `!!` the result and return it. If it is `1`, then the first `#` is larger.

Any thoughts on how to `01xxxxxx -> 01000000` or anything else to help?

Forgot to note: no ifs, whiles, fors etc...

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-04-10T22:07:06.227

这是一个无循环版本，它比较 O(lg b) 操作中的无符号整数，其中 b 是机器的字长。请注意，OP 声明除 之外没有其他数据类型`signed int`，因此该答案的上半部分似乎不符合 OP 的规范。（剧透版本在底部。）

请注意，我们要捕获的行为是最重要的位不匹配时`1`for`a`和`0`for `b`。另一种思考方式是任何位`a`大于 中的相应位`b`均值`a`大于`b`，只要没有较早的位`a`小于 中的相应位`b`。

为此，我们计算`a`大于 中相应位的`b`所有位，同样计算`a`小于 中相应位的所有位`b`。我们现在想要屏蔽掉所有低于任何“小于”位的“大于”位，因此我们取出所有“小于”位并将它们全部涂抹到右侧，形成一个掩码：最高有效位全部设置下降到最低有效位的方法是现在`1`。

现在我们要做的就是使用简单的位掩码逻辑删除“大于”位设置。

结果值为 0 if`a <= b`和非零 if `a > b`。如果我们希望它`1`在后一种情况下，我们可以做一个类似的涂抹技巧，只看一下最低有效位。

```
#include <stdio.h>

// Works for unsigned ints.
// Scroll down to the "actual algorithm" to see the interesting code.

// Utility function for displaying binary representation of an unsigned integer
void printBin(unsigned int x) {
    for (int i = 31; i >= 0; i--) printf("%i", (x >> i) & 1);
    printf("\n");
}
// Utility function to print out a separator
void printSep() {
    for (int i = 31; i>= 0; i--) printf("-");
    printf("\n");
}

int main()
{
    while (1)
    {
        unsigned int a, b;

        printf("Enter two unsigned integers separated by spaces: ");
        scanf("%u %u", &a, &b);
        getchar();

        printBin(a);
        printBin(b);
        printSep();

            /************ The actual algorithm starts here ************/

        // These are all the bits in a that are less than their corresponding bits in b.
        unsigned int ltb = ~a & b;

        // These are all the bits in a that are greater than their corresponding bits in b.
        unsigned int gtb = a & ~b;

        ltb |= ltb >> 1;
        ltb |= ltb >> 2;
        ltb |= ltb >> 4;
        ltb |= ltb >> 8;
        ltb |= ltb >> 16;

        // Nonzero if a > b
        // Zero if a <= b
        unsigned int isGt = gtb & ~ltb;

        // If you want to make this exactly '1' when nonzero do this part:
        isGt |= isGt >> 1;
        isGt |= isGt >> 2;
        isGt |= isGt >> 4;
        isGt |= isGt >> 8;
        isGt |= isGt >> 16;
        isGt &= 1;

            /************ The actual algorithm ends here ************/

        // Print out the results.
        printBin(ltb); // Debug info
        printBin(gtb); // Debug info
        printSep();
        printBin(isGt); // The actual result
    }
} 
```

*注意：如果您翻转两个*输入的最高位，这也适用于有符号整数，例如`a ^= 0x80000000`.

# **剧透**

如果您想要一个满足所有要求的答案（包括 25 个或更少的运算符）：

```
int isGt(int a, int b)
{
    int diff = a ^ b;
    diff |= diff >> 1;
    diff |= diff >> 2;
    diff |= diff >> 4;
    diff |= diff >> 8;
    diff |= diff >> 16;

    diff &= ~(diff >> 1) | 0x80000000;
    diff &= (a ^ 0x80000000) & (b ^ 0x7fffffff);

    return !!diff;
} 
```

我会解释为什么它对你有用。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-11T07:30:18.697

要转换`001xxxxx`为`00100000`，首先执行：

```
x |= x >> 4;
x |= x >> 2;
x |= x >> 1; 
```

（这是 8 位；要将其扩展到 32，请在序列的开头添加 8 和 16 的移位）。

这给我们留下了`00111111`（这种技术有时被称为“位涂抹”）。然后我们可以砍掉除前 1 位之外的所有内容：

```
x ^= x >> 1; 
```

留给我们`00100000`。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-04-10T23:49:06.423

一种**无符号**变体，可以使用逻辑（&&，||）和比较（！=，==）。

```
int u_isgt(unsigned int a, unsigned int b)
{
    return a != b && (    /* If a == b then a !> b and a !< b.             */
               b == 0 ||  /* Else if b == 0 a has to be > b (as a != 0).   */
               (a / b)    /* Else divide; integer division always truncate */
           );             /*              towards zero. Giving 0 if a < b. */
} 
```

`!=`并且`==`很容易被淘汰，即：

```
int u_isgt(unsigned int a, unsigned int b)
{
    return a ^ b && (
               !(b ^ 0) ||
               (a / b)
           );
} 
```

对于**已签名**的，然后可以扩展为：

```
int isgt(int a, int b)
{
    return
    (a != b) &&
    (
        (!(0x80000000 & a) && 0x80000000 & b) ||  /* if a >= 0 && b < 0  */
        (!(0x80000000 & a) && b == 0) ||
        /* Two more lines, can add them if you like, but as it is homework
         * I'll leave it up to you to decide. 
         * Hint: check on "both negative" and "both not negative". */
    )
    ;
} 
```

可以更紧凑/消除操作。（至少一个），但为了清楚起见，这样写。

而不是`0x80000000`一个人可以说，即：

```
#include <limits.h>
static const int INT_NEG = (1 << ((sizeof(int) * CHAR_BIT) - 1)); 
```

使用它来测试：

```
void test_isgt(int a, int b)
{
    fprintf(stdout,
        "%11d > %11d = %d : %d %s\n",
        a, b,
        isgt(a, b), (a > b),
        isgt(a, b) != (a>b) ? "BAD!" : "OK!");
} 
```

结果：

```
 33 >           0 = 1 : 1 OK!
        -33 >           0 = 0 : 0 OK!
          0 >          33 = 0 : 0 OK!
          0 >         -33 = 1 : 1 OK!
          0 >           0 = 0 : 0 OK!
         33 >          33 = 0 : 0 OK!
        -33 >         -33 = 0 : 0 OK!
         -5 >         -33 = 1 : 1 OK!
        -33 >          -5 = 0 : 0 OK!
-2147483647 >  2147483647 = 0 : 0 OK!
 2147483647 > -2147483647 = 1 : 1 OK!
 2147483647 >  2147483647 = 0 : 0 OK!
 2147483647 >           0 = 1 : 1 OK!
          0 >  2147483647 = 0 : 0 OK! 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-06T07:19:55.667

[Kaganar 较小的 isGt 函数](https://stackoverflow.com/a/10097167/1950848)的完全**无**分支版本可能如下所示：

```
int isGt(int a, int b)
{
    int diff = a ^ b;
    diff |= diff >> 1;
    diff |= diff >> 2;
    diff |= diff >> 4;
    diff |= diff >> 8;
    diff |= diff >> 16;

    //1+ on GT, 0 otherwise.
    diff &= ~(diff >> 1) | 0x80000000;
    diff &= (a ^ 0x80000000) & (b ^ 0x7fffffff);

    //flatten back to range of 0 or 1.
    diff |= diff >> 1;
    diff |= diff >> 2;
    diff |= diff >> 4;
    diff |= diff >> 8;
    diff |= diff >> 16;
    diff &= 1;

    return diff;
} 
```

这大约有 60 条指令用于实际计算（MSVC 2010 编译器，在 x86 架构上），另外还有大约 10 个堆栈操作用于函数的序言/结语。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-11T06:55:31.710

尽管我不想做别人的作业，但我无法抗拒这个.. :) 我相信其他人可以想到一个更紧凑的..但这是我的.. 效果很好，包括负数。 .

编辑：虽然有几个错误。我将把它留给 OP 来查找并修复它。

```
 #include<unistd.h>
    #include<stdio.h>
    int a, b, i, ma, mb, a_neg, b_neg, stop;

    int flipnum(int *num, int *is_neg) {
        *num = ~(*num) + 1;
        *is_neg = 1;

        return 0;
    }

    int print_num1() {
        return ((a_neg && printf("bigger number %d\n", mb)) ||
             printf("bigger number %d\n", ma));
    }

    int print_num2() {
        return ((b_neg && printf("bigger number %d\n", ma)) ||
             printf("bigger number %d\n", mb));
    }

    int check_num1(int j) {
        return ((a & j) && print_num1());
    }

    int check_num2(int j) {
        return ((b & j) && print_num2());
    }

    int recursive_check (int j) {
        ((a & j) ^ (b & j)) && (check_num1(j) || check_num2(j))  && (stop = 1, j = 0);

        return(!stop && (j = j >> 1) && recursive_check(j));
    }

    int main() {
        int j;
        scanf("%d%d", &a, &b);
        ma = a; mb = b;

        i = (sizeof (int) * 8) - 1;
        j = 1 << i;

        ((a & j) && flipnum(&a, &a_neg));

        ((b & j) && flipnum(&b, &b_neg));

        j = 1 << (i - 1);

        recursive_check(j);

        (!stop && printf("numbers are same..\n"));
    } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-10T21:39:35.813

### 编辑：

好的，代码存在一些问题，但我修改了它并且以下工作。

此辅助函数比较数字的第 n 个有效数字：

```
int compare ( int a, int b, int n )
{
    int digit = (0x1 << n-1);
    if ( (a & digit) && (b & digit) )
       return 0; //the digit is the same

    if ( (a & digit) && !(b & digit) )
       return 1; //a is greater than b

    if ( !(a & digit) && (b & digit) )
       return -1; //b is greater than a
} 
```

以下应递归返回较大的数字：

```
int larger ( int a, int b )
{
    for ( int i = 8*sizeof(a) - 1 ; i >= 0 ; i-- )
    {
       if ( int k = compare ( a, b, i ) )
       {
           return (k == 1) ? a : b;
       }
    }
    return 0; //equal
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-05-11T05:23:32.600

我想我有一个包含 3 个操作的解决方案：

在第一个数字上加一个，从您可以表示的最大可能数字中减去它（全为 1）。将该数字添加到第二个数字。如果它溢出，那么第一个数字小于第二个。

我不是 100% 确定这是否正确。那就是你可能不需要加 1，而且我不知道是否可以检查溢出（如果没有，那么只需保留最后一位并测试它最后是否为 1。）

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2012-04-10T21:41:33.937

编辑：约束使底部的简单方法无效。我正在添加二进制搜索功能和最终比较以检测更大的值：

```
unsigned long greater(unsigned long a, unsigned long b) {
    unsigned long x = a;
    unsigned long y = b;
    unsigned long t = a ^ b;
    if (t & 0xFFFF0000) {
        x >>= 16;
        y >>= 16;
        t >>= 16;
    }
    if (t & 0xFF00) {
        x >>= 8;
        y >>= 8;
        t >>= 8;
    }
    if (t & 0xf0) {
        x >>= 4;
        y >>= 4;
        t >>= 4;
    }
    if ( t & 0xc) {
        x >>= 2;
        y >>= 2;
        t >>= 2;
    }
    if ( t & 0x2) {
        x >>= 1;
        y >>= 1;
        t >>= 1;
    }
    return (x & 1) ? a : b;
} 
```

这个想法是从我们感兴趣的单词的最重要的一半开始，看看那里是否有任何设置位。如果有，那么我们不需要最低有效的一半，因此我们将不需要的位移开。如果没有，我们什么也不做（反正一半是零，所以不会妨碍）。由于我们无法跟踪移动的数量（它需要添加），我们还移动了原始值，以便我们可以进行最终`and`确定更大的数字。我们用前一个掩码的一半大小重复这个过程，直到我们将感兴趣的位折叠到位位置 0。

我没有故意在这里添加相同的大小写。

* * *

老答案：

最简单的方法可能是最好的家庭作业。一旦你得到了不匹配的位值，你就从 0x80000000 的另一个掩码开始（或任何适合你的字大小的最大位位置），并继续向右移动它，直到你碰到在你的不匹配值中设置的位。如果您的右移以 0 结束，则不匹配值为 0。

我假设您已经知道确定较大数字所需的最后一步。

# asp.net-mvc - 使用 MVC3，如何根据“接受”标头更改控制器/操作？

> ID：10096605
> 
> 赞同：1
> 
> 时间：2012-04-10T21:17:27.950
> 
> 标签：asp.net-mvc, rest, http-headers

我有一个应用程序将充当可能来自各种目标的请求的“包罗万象”。我希望能够根据“接受”标头的值重定向到我的应用程序中的不同控制器/操作。

澄清：如果可能的话，我想在没有 HTTP 处理程序的情况下执行此操作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T06:39:22.313

您可以编写自定义路线：

```
public class MyRoute : Route
{
    public MyRoute(string url, object defaults)
        : base(url, new RouteValueDictionary(defaults), new MvcRouteHandler())
    {

    }

    public override RouteData GetRouteData(HttpContextBase httpContext)
    {
        var rd = base.GetRouteData(httpContext);
        if (rd == null)
        {
            return null;
        }

        var accept = httpContext.Request.Headers["Accept"];
        if (string.Equals("xml", accept, StringComparison.OrdinalIgnoreCase))
        {
            rd.Values["action"] = "xml";
        }
        else if (string.Equals("json", accept, StringComparison.OrdinalIgnoreCase))
        {
            rd.Values["action"] = "json";
        }
        return rd;
    }
} 
```

然后注册这条路线：

```
public static void RegisterRoutes(RouteCollection routes)
{
    routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

    routes.Add(
        "Default", 
        new MyRoute(
            "{controller}/{action}/{id}",
            new { controller = "Home", action = "Index", id = UrlParameter.Optional }
        )
    );
} 
```

现在，当您 POST`/home`并将`Accept`请求标头设置为控制器`xml`的`Xml`操作时，`Home`将被命中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T22:29:46.420

制作一个路由..只是一个简单的类并从`RouteBase`这里派生它，您会发现`GetRouteData(System.Web.HttpContextBase httpContext)`返回类型为`RouteData` u 的方法可以从中挑选出您选择的标头，并将您`httpcontext`的路由的值添加到函数的返回值中..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T23:37:13.700

你可以使用 Phil haack [Route Magic](http://haacked.com/archive/2011/01/30/introducing-routemagic.aspx)插件，它有[HttpHandler Routing](http://haacked.com/archive/2009/11/04/routehandler-for-http-handlers.aspx)但它使用 HttpHandler 你可以看看，看看你是否喜欢

[路线魔法](http://haacked.com/archive/2011/01/30/introducing-routemagic.aspx)

# ruby-on-rails - 如何以正确的方式在 Rails 中执行 history.js？

> ID：10096608
> 
> 赞同：5
> 
> 时间：2012-04-10T21:17:37.203
> 
> 标签：ruby-on-rails, history.js

# 大家好，

现在是我第四次尝试在 Rails 应用程序中实现 history.js。我有一种方法运行得很好，但是代码太丑了。今天我再次查看代码并想：我怎样才能使它更好，更容易，更干？！

# 到目前为止我所做的（并且工作得很好，并不完美）：

*   设置`remote: true`为我的链接
*   jquery-ujs 获取`js.erb`

我的 HTML 看起来像：

```
<body>
  <div id="content">
    some content with buttons, etc.
  </div>
</body> 
```

`js.erb`包含：

```
History.pushState(
  {
    func: '$(\'#content\').html(data);',
    data: '<%= j(render template: "news/index", formats: [:html]) %>'
  },
  'test title',
  '<%= request.url %>'
); 
```

然后 history.js 获取该函数并为其提供数据。所以它将`content`-div 替换为新生成的代码。它还会更新 URL。这段代码我必须放在每个（！）`js.erb`文件中。

# 我最后想让它不那么难看的想法是：

*   设置`remote: true`为我的链接
*   当一个链接被点击时，它会获取一些`js.erb`替换`content`-div
*   所有链接`data-remote="true"`都将获得一个`ajax:success`-handler
*   在`ajax:success`新 URL 上被推送到 history.js

但是里面还有一个问题。然后我有 JavaScript 代码：

```
$(document).on('ajax:success', 'a[data-remote="true"]', function() { ... }); 
```

问题是：`ajax:success`如果我替换`div`链接（应该触发事件）所在的 -tag，则永远不会触发。

***也许有人可以解决我的问题...***

# 或者，还有更好的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-12-17T19:08:44.400

我只用jquery-ujs和pushState，popState。

在这里查看我的答案：

[https://stackoverflow.com/a/27532946/345996](https://stackoverflow.com/a/27532946/345996)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-07T14:25:50.393

关于什么：

```
History.Adapter.bind(window, 'statechange', function() {
    var state = History.getState();
    ...
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-10T22:40:00.380

我使用*beforeSend*事件作为所有数据远程的全局侦听器来更改浏览器的历史记录。我更喜欢 beforeSend 因为我希望链接在单击后立即更改，而不管 ajax 请求的结果如何...

```
$(document).bind('ajax:beforeSend', function(event,data){
    history.pushState(null, '', event.target.href)
}); 
```

这解决了您的问题，因为在对 DOM 进行任何修改之前触发了该事件。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-06-16T10:27:56.067

你试过[涡轮链接](https://github.com/rails/turbolinks/)吗？这将是 Rails 4 中的默认设置。

# php - 如何在 codeigniter 中创建设置函数？

> ID：10096609
> 
> 赞同：0
> 
> 时间：2012-04-10T21:17:41.493
> 
> 标签：php, database, codeigniter

我创建了一个 MY_Controller 并通过我的主控制器链接到它......我现在正在尝试创建一个设置函数，它将从数据库中获取所有结果并返回你想要的结果......我唯一的问题我正在使用模板引擎来做...

```
protected function settings()
{
    // select all settings from database
    $query = $this->db->query('SELECT * FROM settings');

    // get result from database
    $this->data['settings'] = $query->result_array();

    // return array of data
    return $this->data['settings'];
} 
```

我该怎么办？

我目前可以访问它的唯一方法是：

```
{settings}
    {name}
    {value}
{/settings} 
```

PS 我`$this->settings()`在 __construct() 函数中调用了该函数，我也忘了提到我正在使用 codeigniter

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T21:59:41.353

控制器代码：

```
$data['settings'] = $this->settings();
$this->load->view('whatever_your_view_file_is_named', $data); 
```

现在，在您的视图中，设置属性将作为名为 settings 的对象的成员提供，因为这是您在传递给视图的数据数组中设置的键。

查看代码：

```
echo $settings->name; 
```

# php - 从另一个数组项列表创建分组数组

> ID：10096613
> 
> 赞同：1
> 
> 时间：2012-04-10T21:18:03.327
> 
> 标签：php, arrays

我有一系列具有如下 ID 和类别的应用程序：

```
[apps] => Array
            (
                [0] => stdClass Object
                    (
                        [id] => 0
                        [categoryid] => 0
                    )

                [1] => stdClass Object
                    (
                        [id] => 31265
                        [categoryid] => 12
                    )

                [2] => stdClass Object
                    (
                        [id] => 15965
                        [categoryid] => 2
                    )

                [3] => stdClass Object
                    (
                        [id] => 16554
                        [categoryid] => 12
                    )
) 
```

我正在尝试根据此请求获取某个类别的所有应用程序。因此，结果输出为：

```
For CategoryId 12:
----------------
[apps] => Array
            (
                [0] => 31265
                [1] => 16554
            )

For CategoryId 2:
----------------
[apps] => Array
            (
                [0] => 15965
            )

For CategoryId 0:
----------------
[apps] => Array
            (
                [0] => 0
            ) 
```

我相信我需要使用嵌套的 foreach 循环，但是有没有一种有效的方法？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T21:24:56.200

您可以循环浏览它们，并将它们放入类别数组中：

```
foreach ( $apps as $app ) {
  $catArray[ $app[CategoryID] ][] = $app;
} 
```

这应该产生一个数组，其键代表一个类别，其嵌套数组代表该类别中的那些应用程序。

我已经在网上做了一个演示：http: [//codepad.org/WZXIvQ58](http://codepad.org/WZXIvQ58)

# wpf - WPF 投影触发器

> ID：10096616
> 
> 赞同：0
> 
> 时间：2012-04-10T21:18:14.617
> 
> 标签：wpf

我正在创建一个按钮样式。将其粘贴到窗口中以查看想法：

```
<Style x:Key="SelectionButton3"
        TargetType="{x:Type Button}">

    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="{x:Type Button}">

                <Grid HorizontalAlignment="Stretch"
                        VerticalAlignment="Stretch"
                        ClipToBounds="False">

                    <Grid.RowDefinitions>
                        <RowDefinition Height="75"/>
                    </Grid.RowDefinitions>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="100"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>

                    <Border x:Name="TheBorder" 
                            BorderThickness="0,1.5,1.5,1.5"
                            CornerRadius="3"
                            Background="SteelBlue"
                            Height="35"
                            Grid.Column="1"
                            Grid.Row="0"
                            Margin="-31"
                            BorderBrush="DarkSlateBlue">

                        <Border.BitmapEffect>
                            <DropShadowBitmapEffect x:Name="BorderShadow" 
                                                    ShadowDepth="0"/>
                        </Border.BitmapEffect>

                    </Border>

                    <Rectangle Fill="SteelBlue"
                                Stroke="DarkSlateBlue"
                                Grid.Row="0"
                                Grid.Column="0">

                        <Rectangle.LayoutTransform>
                            <RotateTransform Angle="-45" />
                        </Rectangle.LayoutTransform>

                        <Rectangle.BitmapEffect>
                            <DropShadowBitmapEffect ShadowDepth="5"/>
                        </Rectangle.BitmapEffect>

                    </Rectangle>

                    <ContentPresenter x:Name="ContentArea"
                                        VerticalAlignment="Center"
                                        HorizontalAlignment="Center"
                                        Content="{Binding Path=Content, RelativeSource={RelativeSource TemplatedParent}}" />
                </Grid>

            </ControlTemplate>
        </Setter.Value>

    </Setter>

    <Setter Property="Foreground"
            Value="LightGray" />
    <Setter Property="FontFamily"
            Value="Segoe UI" />

</Style> 
```

```
<Button Click="Button_Click"
        Style="{StaticResource SelectionButton3}"
        Width="185">

</Button> 
```

我想要发生的是当鼠标悬停在边框或矩形上时，边框阴影会出现。我知道我需要一个触发器，但我不确定在哪里以及如何做。

有人可以指出我正确的方向吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T21:32:00.117

```
<Style x:Key="SelectionButton3"
        TargetType="{x:Type Button}">

    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="{x:Type Button}">

                <Grid HorizontalAlignment="Stretch"
                        VerticalAlignment="Stretch"
                        ClipToBounds="False">

                    <Grid.RowDefinitions>
                        <RowDefinition Height="75"/>
                    </Grid.RowDefinitions>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="100"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>

                    <Border x:Name="TheBorder" 
                            BorderThickness="0,1.5,1.5,1.5"
                            CornerRadius="3"
                            Background="SteelBlue"
                            Height="35"
                            Grid.Column="1"
                            Grid.Row="0"
                            Margin="-31"
                            BorderBrush="DarkSlateBlue">
                    </Border>

                    <Rectangle Name="rect" Fill="SteelBlue"
                                Stroke="DarkSlateBlue"
                                Grid.Row="0"
                                Grid.Column="0">

                        <Rectangle.LayoutTransform>
                            <RotateTransform Angle="-45" />
                        </Rectangle.LayoutTransform>

                    </Rectangle>

                    <ContentPresenter x:Name="ContentArea"
                                        VerticalAlignment="Center"
                                        HorizontalAlignment="Center"
                                        Content="{Binding Path=Content, RelativeSource={RelativeSource TemplatedParent}}" />
                </Grid>
                <ControlTemplate.Triggers>
                  <Trigger Property="IsMouseOver" Value="True">
                    <Setter TargetName="TheBorder" Property="BitmapEffect">
                      <Setter.Value>
                        <DropShadowBitmapEffect ShadowDepth="0" />
                      </Setter.Value>
                    </Setter>
                    <Setter TargetName="rect" Property="BitmapEffect">
                      <Setter.Value>
                        <DropShadowBitmapEffect ShadowDepth="5"/>
                      </Setter.Value>
                    </Setter>
                  </Trigger>
                </ControlTemplate.Triggers>
            </ControlTemplate>
        </Setter.Value>

    </Setter>

    <Setter Property="Foreground"
            Value="LightGray" />
    <Setter Property="FontFamily"
            Value="Segoe UI" />

</Style> 
```

请注意，除非您使用的是 .NET 3.0 或 3.5 pre SP1，否则您应该使用 .NET`Effect`而不是`BitmapEffect`. 该`BitmapEffect`属性已在 3.5 SP1 中弃用

# mysql - 连接到 mysql 时更改 default_character_set

> ID：10096620
> 
> 赞同：0
> 
> 时间：2012-04-10T21:18:22.637
> 
> 标签：mysql, sql

有没有办法在连接到特定数据库的 MySQL（在 shell 中的意思）时更改`--default-character-set`to ？我试过类似的东西：`utf8``mysql>`

```
mysql> --default-character-set=utf8 database_name 
```

但这不起作用。

请提供任何帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T09:16:44.903

在*/config/database.properties*添加字符编码：

```
connectionProperties.characterEncoding=UTF-8 
```

或者在 shell 中这个[链接](http://confluence.jetbrains.net/display/TCD3/Configuring+UTF8+Character+Set+for+MySQL)非常有用。

# javascript - 引用 Raphael 对象

> ID：10096622
> 
> 赞同：2
> 
> 时间：2012-04-10T21:18:25.040
> 
> 标签：javascript, raphael

我需要在我的程序中创建几个 Raphael 对象。field1 和 field2 是 div 元素。每个 Raphael 对象（paper1、paper2、...）都将具有独特的画布，并且它们都需要具有完全相同的功能。Raphael 对象需要在以后动态创建。在下面的示例代码中，我需要知道哪些对象会触发 mousedown 事件。我还想知道在哪个 div 元素（此处为 field1/field2）中触发了 mousedown 事件。如何获取信息？

```
var myProgram = (function() {
var paper1 = Raphael("field1", 200, 400, fieldActions);
var paper2 = Raphael("field2", 200, 400, fieldActions);

var planeAttrs = {
    fill: "#fff"  
};

function fieldActions(){
    var that = this;

    that.field = that.rect(0, 0, 200, 400, 30);

    that.field.attr(planeAttrs);

    that.field.mousedown( function(e) {
    });
});
}()); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T07:12:17.600

```
that.field.mousedown( function(e) {
 console.log(this, this.node, this.paper.canvas, this.paper.canvas.parentNode)
}); 
```

`this`- rect raphael 对象

`this.node`- rect svg dom 元素

`this.paper.canvas`- svg dom 元素

`this.paper.canvas.parentNode`- 具有 id (field2/field1) 的 div，其中包含被点击的 svg。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T21:37:27.050

干得好：

```
that.field.mousedown( function(e) {
  var target = e.target;
  var svgElem = target.parentNode;
  var div = svgElem.parentNode;
  alert(div.id);
}); 
```

[http://jsfiddle.net/mihaifm/UyPn6/3/](http://jsfiddle.net/mihaifm/UyPn6/3/)

# android - 处理带有两个片段的操作栏

> ID：10096625
> 
> 赞同：4
> 
> 时间：2012-04-10T21:18:33.543
> 
> 标签：android, android-layout, android-fragments, actionbarsherlock

我有一个包含两个片段的布局，两个片段都有自己的操作栏，每个操作栏都有自己的操作项和菜单。当我的应用程序处于横向模式并且两个片段都显示在屏幕上时，看起来框架正在选择在“右侧”（或第二个片段）显示操作栏，这意味着左侧的片段（第一个片段) 缺少其操作项和菜单选项。

当应用程序处于纵向模式时，一切正常，所以我不确定当它们都显示时我是否应该做一些事情来处理片段。谢谢。

编辑

在我的每个片段中，我都使用此代码将菜单项添加到操作栏：

在片段 1 中：

```
 @Override
    public void onCreateOptionsMenu(final Menu menu, final MenuInflater inflater) {
        inflater.inflate(R.menu.fragment_menu_1, menu);
        super.onCreateOptionsMenu(menu, inflater);
    } 
```

在片段 2 中：

```
 @Override
    public void onCreateOptionsMenu(final Menu menu, final MenuInflater inflater) {
        inflater.inflate(R.menu.fragment_menu_2, menu);
        super.onCreateOptionsMenu(menu, inflater);
    } 
```

更新：

显然使用`setRetainInstance(true)`是导致菜单不刷新的原因。我之所以使用它，是因为我有一个 AsyncTask，如果设备旋转，它会引发异常。所以我解决了一个问题，但解决了另一个问题。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-10T21:49:00.533

我认为您对此的思考不正确。操作栏不显示为任何片段的一部分，但实际上是活动的一部分。如果您在片段中声明您通过 提供操作项`setHasOptionsMenu(true)`，则所有内容都将显示为操作栏的一部分。然后，您可以通过覆盖来采取适当的行动`onOptionsItemSelected(MenuItem item)`。

# css - 如何将 CSS 样式应用于出现在表头中的链接？

> ID：10096628
> 
> 赞同：-2
> 
> 时间：2012-04-10T21:18:46.547
> 
> 标签：css

我想将 CSS 样式应用于出现在我网页的列标题中的链接。我在我的 CSS 中添加了以下内容：

```
thead tr td a { color: White; } 
```

但是，我的链接仍然是标准的蓝色（跟随时为紫色）。

列标题中的链接是嵌入在嵌入`td`标签中的`tr`标签中的锚标签`thead`，对吗？

为什么我的 CSS 没有产生预期的结果？

**更新：**
有趣的是，这也不起作用：页面上的所有链接仍然是蓝色和紫色。

```
a { color: white; }
a:hover { color: white; }
a:visited { color: white; }
a:active { color: white; } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T21:21:07.177

采用

```
thead tr td a { color: white; }
thead tr td a:hover { color: white; }
thead tr td a:visited { color: white; }
thead tr td a:active { color: white; } 
```

看这个活生生的[例子](http://jsfiddle.net/jackdent/sdah4/)

`text-decoration: none;`删除第一个标签中的下划线

如果这仍然不起作用，请尝试`!important`在每个之后使用

# c# - 对象引用未设置为对象的实例 - Web 服务

> ID：10096629
> 
> 赞同：0
> 
> 时间：2012-04-10T21:18:54.163
> 
> 标签：c#, web-services, object, instance, webservice-client

我的网络服务中出现了这个错误，即使我查看了关于 null 问题的文章，我也无法找到解决这个错误的方法

这是我的代码：

```
 SendInvUpdate.InvServices.UpdateRatePackagesRequest urq = new SendInvUpdate.InvServices.UpdateRatePackagesRequest();
    SendInvUpdate.InvServices.UpdateRatePackagesOperationResponse ors = new SendInvUpdate.InvServices.UpdateRatePackagesOperationResponse();

    protected void Page_Load(object sender, EventArgs e)
    {
        Int64 HID = 819942;
        Int64 HRID = 154482;

        SendInvUpdate.InvServices.UpdateRatePackagesRequest request = new SendInvUpdate.InvServices.UpdateRatePackagesRequest();

        ChannelManagerAccount account = new ChannelManagerAccount();
        request.HotelId = HID;

        int avail = 4;
        DateTime frodte = Convert.ToDateTime("2012-04-12");
        DateTime todte = Convert.ToDateTime("2012-04-30");
        int NoofRatePackages = 3;
        UpdateRatePackageRequest[] RatePackages = new UpdateRatePackageRequest[NoofRatePackages];
        string res;
        request.RatePackages = new UpdateRatePackageRequest[NoofRatePackages];
        request.RatePackages = RatePackages;

        UpdateRatePackageRequest rp = new UpdateRatePackageRequest();

        for (int i = 0; i < NoofRatePackages; i++)
        {        
            rp.RatePackageId = HRID;        

            RateDetails[] Rates = new RateDetails[NoofRatePackages];

            rp.Rates = new RateDetails[NoofRatePackages];
            rp.Rates = Rates;

            RateDetails rd = new RateDetails();

            for (int j = 0; j < NoofRatePackages; j++)
            {
                rd.Availability = avail;

                rd.AvailabilityApplicationType = SendInvUpdate.InvServices.AvailabilityApplicationType.SET;

                rd.FromDate = frodte;

                rd.ToDate = todte;

            }

        }

       SendInvUpdate.InvServices.InventoryServiceClient icc = new SendInvUpdate.InvServices.InventoryServiceClient();            
        // ( *Line where the error appears*)
        ors = icc.UpdateRatePackages(request); 

        res = ors.Results.ToString();          
    } 
```

我知道它与 RateDetails 数组有关，并将 RateDetails 的值初始化到请求的那一刻，但我不确定如何或如何处理。在调试模式下查看 rp 的值时，没有 rp.Rates[0],rp.Rates[1],rp.Rates[2] 的值，RatePackages[0],RatePackages[1],RatePackages[2] 也是也为空，所以我有一种强烈的感觉，那就是我的问题所在，但我不知道如何解决。

将不胜感激任何形式的洞察力，我哪里出错了！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T21:24:41.027

将您的 page_load 代码中的 icc 服务引用的初始化移动为

```
SendInvUpdate.InvServices.InventoryServiceClient icc = new SendInvUpdate.InvServices.InventoryServiceClient(); 
ors = icc.UpdateRatePackages(request); ( Line where the error appears) 
```

我不是 asp.net 方面的专家，但如果你不将它们保存在某个持久性容器中，你就不能将你的代码基于全局变量（搜索 SESSION、VIEWSTATE）

编辑：这里也有问题

```
 UpdateRatePackageRequest[] RatePackages = new UpdateRatePackageRequest[NoofRatePackages]; 
   string res; 
   request.RatePackages = new UpdateRatePackageRequest[NoofRatePackages]; 
   request.RatePackages = RatePackages; 
```

应该只是`request.RatePackages = new UpdateRatePackageRequest[NoofRatePackages];`？

EDIT2：您向 InventoryServiceClient 发送一个`request`包含 UpdateRatePackageRequest 数组的对象，但在创建该数组后，您没有设置任何 UpdateRatePackageRequest 实例。所以我想 InventoryServiceClient 在从数组中读取值时失败。我将尝试以这种方式更改您的 for 循环

```
 for (int i = 0; i < NoofRatePackages; i++)       
   {               
        UpdateRatePackageRequest rp = new UpdateRatePackageRequest(); 
        request.RatePackages[i] = rp;
        .... 
```

与 RateDetails 相同的错误。您创建数组，但不要使用 RateDetails 的实际实例设置数组的任何值

```
 for (int j = 0; j < NoofRatePackages; j++) 
        { 
            RateDetails rd = new RateDetails();  
            rp.Rates[j] = rd;
            .... 
```

# c# - RavenDB ForEach 扩展方法抽象

> ID：10096638
> 
> 赞同：1
> 
> 时间：2012-04-10T21:19:45.470
> 
> 标签：c#, linq, ravendb

我正在对 RavenDb 中的数据进行大量后端数据操作（而不是网站 crud）。我有几十种方法散布在各处，用于执行基本相同的跳过/获取查询，但参数不同。我想要的大部分内容很简单：数据库中与此查询匹配的每个文档，执行此操作。

我创建了一个小帮手，但似乎无法弄清楚如何将选择器应用于它。例如，我的最终目标可能是写：

```
MyDocStore.ForEach<Users>( 
     x => x.Where(u => u.LastName == "Smith").OrderBy( u => u.FirstName), 
     x => Console.WriteLine( "{0}", x.FirstName),
     take: 12); 
```

这是我到目前为止所拥有的：

```
public static class RavenHelper
{
    public static void ForEach<TSource>(
         this IDocumentStore documentStore, 
          Func<TSource, IEnumerable<TSource>> selector, 
          Action<TSource> action, 
          int take = 128)
    {
        var skip = 0;
        while( true )
        {
            using( var session = documentStore.OpenSession() )
            {
                var list = session.Query<TSource>();
                // How do I apply more selectors? 
                var result = list.Take( take ).Skip( skip ).ToList();

                if( !result.Any() )
                {
                    return;
                }

                foreach( var il in result )
                {
                    action(il);
                }

                skip += take;
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T05:40:59.670

你需要：

```
 Expression<Func<TSource, bool>> selector, 
```

然后调用：

```
 .Where(selector) 
```

# java - 如何延迟 onCreateOptionsMenu（菜单菜单）？

> ID：10096647
> 
> 赞同：1
> 
> 时间：2012-04-10T21:20:08.460
> 
> 标签：java, android, android-actionbar

我是动态创建和选项菜单，选项菜单取决于在 onCreate() 阶段创建的数据。

问题是在创建数据之前调用了 onCreateOptionsMenu()。有没有办法在 onCreate() 之后执行？

谢谢法比

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T21:22:35.127

您可以使用[`invalidateOptionsMenu()`](http://developer.android.com/reference/android/app/Activity.html#invalidateOptionsMenu%28%29)，但它需要 API 级别 11。

此外，您可以选择覆盖[`onPrepareOptionsMenu()`](http://developer.android.com/reference/android/app/Activity.html#onPrepareOptionsMenu%28android.view.Menu%29)，这将使您有机会在每次显示之前修改菜单。

# html - Twitter 引导顶部栏 rtl

> ID：10096649
> 
> 赞同：1
> 
> 时间：2012-04-10T21:20:10.933
> 
> 标签：html, css, twitter-bootstrap

尝试使用推特引导程序

在我的母版页中创建一个顶部导航栏。

![在此处输入图像描述](../Images/ad7e4b601f3e70f9936f59e07384c926.png)

[http://jsfiddle.net/ZqCah/1/](http://jsfiddle.net/ZqCah/1/)

我有一些错误，希望得到一些帮助：

1-我想把我所有的内容都变成rtl。

意义`My site`将是最右边的，`register`也将是最左边的。

2-物品处于不同的高度。

如何将它们对齐到条的中间？

3-我想在栏中添加我的网站徽标，如此处所示

[向 html 页面表格布局寻求帮助](https://stackoverflow.com/questions/10088858/ask-assitance-for-html-page-tabular-layout)

它可以像酒吧本身一样粘在屏幕上吗？

它可以与酒吧本身共享尺寸吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-07-20T10:18:33.760

Bootstrap 现在（3.3.5）支持 RTL！您所要做的就是将 bootstrap.css 文件中的所有“left”替换为“right”（或者更好，直接在“less”源文件上）。旋转木马可能需要一些调整，但 99% 的东西都可以正常工作。这是一个[例子](http://itgoldman.com/itay-bs-rtl/bootstrap-3.3.5/less/Theme%20Template%20for%20Bootstrap.htm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T09:30:08.480

您可能想探索在 CSS 中使用 FLOAT 和 POSITION。尝试将 DIV 中的每个元素分开并试验 FLOAT 和 POSITION 属性。

例如，您的第 1 个问题...您可以使用以下方式输入“我的网站”：

```
<div style="float:left">my site</div>
<div style="float:right">register</div> 
```

可以参考这个定位教程[http://www.barelyfitz.com/screencast/html-training/css/positioning/](http://www.barelyfitz.com/screencast/html-training/css/positioning/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-29T09:35:04.773

如果你想用 twitter bootstrap 创建 RTL 网站，你可以使用它的 RTL 版本。

[http://pyjamacoder.com/2012/02/01/twitter-bootstrap-v2-rtl-edition/](http://pyjamacoder.com/2012/02/01/twitter-bootstrap-v2-rtl-edition/)

和

[https://github.com/donaldducky/bootstrap-rtl](https://github.com/donaldducky/bootstrap-rtl)

我用这些创建网页

sushiant.com 使用 rtl 版本的 bootstrap 创建

# perl - 来自两个 Perl 数组的公共元素

> ID：10096652
> 
> 赞同：0
> 
> 时间：2012-04-10T21:20:28.980
> 
> 标签：perl

> **可能重复：**
> [使用 Perl 比较两个数组](https://stackoverflow.com/questions/2933347/comparing-two-arrays-using-perl)

我正在尝试查找两个文件中共有的元素：下面是我的代码。请告诉我我在做什么错误。

```
open IN,  "New_CLDB.txt"     or die "couldn't locate input file";
open IN1, "New_adherent.txt" or die "couldn't locate input file";
use Data::Dumper;
@array = ();
while (<IN>) {
    $line = $_;
    chomp $line;
    $a[$i] = $line;
    ++$i;
}
while (<IN1>) {
    $line1 = $_;
    chomp $line1;
    $b[$m] = $line1;
    ++$m;
}
for ( $k = 0; $k < $i; ++$k ) {
    for ( $f = 0; $f < $m; ++$f ) {
        if ( $a[$k] ne $b[$f] ) {
            push( @array, $a[$k] );
        }
    }
}
print @array, "\n"; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-10T21:42:46.893

> 请告诉我我在做什么错误。

从表面上看你的代码，这里有一个列表：

*   不使用`strict`编译指示
*   没有你想要达到的精确规格
*   试图一次做太多事情

远离代码一步，用简单的英语思考它。你需要做什么？

*   读取文件 - 打开、读取、关闭
*   将文件数据读入数组 - 究竟如何？
*   使用函数不要重复文件 A 和文件 B
*   比较数组

单独执行每项任务，始终使用`strict`. 总是。只有这样，才能将单个步骤组合成更大的脚本。

你也可以看看[这个其他 SO question](https://stackoverflow.com/questions/2933347/comparing-two-arrays-using-perl)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-10T22:53:46.283

如果第二组中没有重复项：

```
my %set1;
while (<$fh1>) {
   chomp;
   ++$set1{$_};
}

while (<$fh2>) {
   chomp;
   print("$_ is common to both sets\n")
      if $set1{$_};
} 
```

如果第二组中可能有重复项：

```
my %set1;
while (<$fh1>) {
   chomp;
   ++$set1{$_};
}

my %set2;
while (<$fh2>) {
   chomp;
   print("$_ is common to both sets\n")
      if $set1{$_} && !$set2{$_}++;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-10T21:46:26.637

有几点需要改进：

1.  总是`use strict;`和`use warnings;`
2.  使用三参数版本`open`
3.  使用词法文件句柄
4.  使用*有意义的*格式/缩进
5.  附加一个数组`push @array, $value;`

对于 SO 问题......你的问题到底是什么，你期望什么。

# python - python子进程调用的不可预测的行为

> ID：10096656
> 
> 赞同：0
> 
> 时间：2012-04-10T21:20:50.413
> 
> 标签：python, subprocess

我正在编写一个 python 脚本，通过进行子进程调用，在循环中执行一系列操作，如下所示：

```
os.system('./svm_learn -z p -t 2 trial-input model')
os.system('./svm_classify test-input model pred')
os.system('python read-svm-rank.py')
score = os.popen('python scorer.py -g gold-test -i out').readline() 
```

当我在外壳中一个接一个地单独拨打电话时，它们工作正常。但在脚本中，它们总是会中断。我已经追踪了错误的来源，似乎输出文件在最后被截断（让我相信在没有完成之前的调用的情况下进行了调用）。

我尝试使用 subprocess.Popen ，然后使用 Popen 对象的 wait() 方法，但无济于事。脚本仍然中断。

有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T22:58:50.657

我可能会先重写一点以使用 subprocess 模块而不是 os 模块。

然后我可能会通过研究系统调用跟踪来仔细检查出了什么问题：http: [//stromberg.dnsalias.org/~strombrg/debugging-with-syscall-tracers.html](http://stromberg.dnsalias.org/~strombrg/debugging-with-syscall-tracers.html)

希望文件末尾附近会有一个“E”错误代码，它会告诉您遇到了什么错误。

另一种选择是注释掉子进程的子集（假设第 n+1 个不严重依赖于第 n 个的输出），以确定其中哪个有问题。之后，您可以在有问题的脚本中添加一些额外的错误报告以查看它在做什么。

但是，如果您没有被 C-ish 系统调用跟踪所推迟，那可能会更容易。

# php - CRUD - 使用“call_user_func_array”创建新的（php-activerecord）记录？

> ID：10096662
> 
> 赞同：0
> 
> 时间：2012-04-10T21:21:15.667
> 
> 标签：php, codeigniter, crud, phpactiverecord

我今晚没有环境设置来测试这个，但是这个问题整晚都在困扰着我，所以很抱歉。

我在我的 codeigniter 框架中使用[phpactiverecord](http://www.phpactiverecord.org/)以及我尝试的 CRUD 库。我对函数“call_user_func_array”没有太多经验——真丢脸。所以我想我的问题是......我的预期结果是否与此函数的实际结果相同

```
public static function create_record($obj, $attr){
     $ORM = new $obj;
     return (bool) call_user_func_array(array($ORM, "create"), $attr);
     //self::create_record('Object', array);
     //Expected:  (bool)Object::create($attr);
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T12:10:33.123

如果：

```
CRUD::create_record('User', $this->input->post()); 
```

就好像：

```
User::create($this->input->post()); 
```

然后只需执行以下操作，这要简单得多：

```
$obj = 'User';
$obj::create($this->input->post()); 
```

如果您使用命名空间，它也可以工作。

```
$obj = 'app\models\User';
$obj::create($this->input->post()); 
```

# c# - 投影包含列表的新项目

> ID：10096667
> 
> 赞同：0
> 
> 时间：2012-04-10T21:21:59.077
> 
> 标签：c#, linq, linq-to-entities

我正在执行一个查询，其中我将查询投影到使用列表的业务对象中。问题是 Linq to entity 抱怨“LINQ to Entities 仅支持无参数构造函数和初始化程序”。

我一直在把头发拉出来。我的查询看起来像这样：

```
var q = from d in db.Items select new BusinessObject 
  {
      MyList = new List<MyObject>(d.Select(x => new MyObject {// set fields})
  } 
```

我不能使用初始化程序，因为它似乎只接受一个项目，而不是它们的集合。我不能做 .ToList() 因为 EF 然后抱怨它不知道 MyObject 的列表是什么（显然，它正在尝试将其转换为 SQL）。

我无法在查询之外创建列表，因为我需要为父表中的每一行创建一个新列表。

这里有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T21:54:42.433

查询对我来说看起来很奇怪 - 什么是 db？它应该是您的上下文还是您的上下文的 IQueryable 属性？

假设它是您的上下文，当您查询 BusinessObject 集合时，您可以尝试预先加载 items 属性（这是什么集合？），然后转换为 List，然后将 items 属性投影到内存集合上的 List 中：

```
var q = db.BusinessObjectsContextProperty.Select(d => d.items)  //eager load the items property
   .ToList() // get it into memory
   .Select(d => new BusinessObject { MyList = d.items
      .Select(item => new MyObject { ... } ) // project the in-memory list
   ); 
```

# jquery - jQuery Superfish 菜单和 SEO

> ID：10096668
> 
> 赞同：-1
> 
> 时间：2012-04-10T21:22:17.200
> 
> 标签：jquery, seo, superfish

我在侧边栏中使用 Superfish 菜单，在悬停时动态显示其子菜单选项。由于各种原因，我需要动态创建子/子菜单元素，这会为“可抓取性”和良好的 SEO 带来问题。

有人对如何克服这个障碍有一些想法吗？我担心在页面加载时创建子菜单选项并简单地将它们隐藏直到悬停会造成 SEO 混乱，但我需要在抓取页面时搜索机器人可以访问这些链接，并创建好的站点地图。

谢谢！

用于动态子菜单的代码：

```
$(document).ready(function(){
var id;
var visits = 0;
var arrCounties = ["cities1.txt","cities2.txt","cities3.txt","cities4.txt","cities5.txt","cities6.txt","cities7.txt","cities8.txt","cities9.txt"];

var page = "-page-url.aspx";

for(id=0;id<arrCounties.length;id++){

    $('#smItem_'+id).append("<ul id='submenu_"+id+"' class='seo_submenu'></ul>");

    $.ajax({
        type: "GET",
        url: "http://www.domain.com/COUNTIES/"+arrCounties[id],
        async: false,
        success: function(data){
            var cities = data.split("\r\n");

            for(var i=0;i<cities.length;i++){
                var cName = cities[i].substr(0,cities[i].indexOf(','));
                cName = cName.replace(/\s+/g,'-');

                $('#submenu_'+id).append("<li class='current'><a class='cityLinks' href='http://www.domain.com/location/" + cName + page + "'>"+cities[i]+"</a></li>");
            }
        }
    });

} 
```

});

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T21:34:37.287

确保链接位于纯 HTML 源代码中。那么从 SEO 的角度来看根本没有任何伤害。

编辑：在浏览器中使用 JavaScript 添加链接不利于抓取能力，使用服务器端编程语言添加它们是可以的。只要它们在服务器返回的纯 HTML 中，它们被隐藏起来并不重要。

# javascript - Chrome 后退按钮：仅提供初始页面的缓存版本，没有任何 Ajaxed 内容

> ID：10096671
> 
> 赞同：17
> 
> 时间：2012-04-10T21:22:26.877
> 
> 标签：javascript, ajax, caching, google-chrome

我有两个页面，A和B。流程如下：

*   去A
*   javascript Ajaxes一堆内容添加到A，形成A'
*   去乙
*   按 [Back] 返回 A，而不是 A'，没有所有 Ajaxed 内容

有没有其他人注意到这一点，如果是这样，你如何解决它？

如果 Chrome 在转到 B 之前缓存 A' 状态，并在后面重现 A'，那将是可以接受的。如果 Chrome 简单地重新加载整个 A（包括将其转换为 A' 的 Ajax 请求），那也可以。当前的行为是加载一个旧的、不完整的 A 版本，这不是我想要的。

编辑：我知道它正在加载缓存版本，因为当我点击 [Back] 时服务器没有收到任何新请求。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-12-10T23:32:32.200

这个话题很老，但我想我会分享我的解决方案。为了让 Firefox、Chrome 和 Safari 的行为一致，您必须在返回时需要重新加载的页面上设置一个卸载处理程序，并使用缓存破坏标头。

例子

在 HTTP 标头中

`Cache-Control: must-revalidate, no-store, no-cache, private`

在页面的javascript中

```
$(window).unload(function(){}); // Does nothing but break the bfcache 
```

阅读此处了解更多信息： http: [//madhatted.com/2013/6/16/you-do-not-understand-browser-history](http://madhatted.com/2013/6/16/you-do-not-understand-browser-history)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-04T20:34:34.437

我知道这个话题很老，但这个问题的解决方案并不容易找到我只是浪费了几个小时来解决它。这两行代码为我解决了 Chrome 问题：

```
Response.Cache.SetCacheability(HttpCacheability.NoCache);

Response.Cache.SetNoStore(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T21:29:24.297

好吧，如果您使用的是 xhr 请求而不是隐藏帧，则后退和前进按钮不会绑定到 xhr 请求

# orientation - UIWindow 的根视图控制器在应用启动时不会旋转到横向

> ID：10096672
> 
> 赞同：1
> 
> 时间：2012-04-10T21:22:33.323
> 
> 标签：orientation, landscape, uiwindow

我正在开发一个基于 xib 的纯横向应用程序。该应用程序以横向正确启动。但是，我的主 ViewController 中的视图以纵向显示。也就是说，它被旋转了 90 度，因此图像看起来被裁剪并且不占据整个屏幕。如果我使用我的界面呈现一个模态视图控制器，然后返回到主 ViewController，问题就会自行纠正（视图以横向呈现）。这个问题在 Xcode 4.2 下没有出现。它发生在升级到 Xcode 4.3 之后，并且当我升级项目设置时，Xcode 自动实现了唯一的代码更改。

根据其他帖子中的建议，我验证了我的 Info.plist 设置支持的界面方向和初始界面方向。我为每个视图控制器覆盖了 shouldAutorotateToInterfaceOrientation 方法，只为横向返回 YES。另外，我关闭了视图的自动调整大小，因为我不希望视图的大小/方向发生变化。

根据此链接 [1] 中的想法，我怀疑问题是视图在启动时没有收到更改方向的调用，可能是由于删除了 MainWindow.xib 概念，它似乎被以下内容取代AppDelegate.m 中的 Xcode 插入代码：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    self.viewController = [[ViewController alloc] initWithNibName:@"ViewController" bundle:nil];
    self.window.rootViewController = self.viewController;
    [self.window makeKeyAndVisible];

    return YES;
} 
```

我修改了这个方法来生成一个通用的根视图控制器，从中显示我的 ViewController 类，如下面的代码所示：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    ViewController* myViewController = [[ViewController alloc] initWithNibName:@"ViewController" bundle:nil];
    self.viewController = [[UIViewController alloc] init];
    self.window.rootViewController = self.viewController;
    [self.window makeKeyAndVisible];
    [self.viewController presentModalViewController:myViewController animated:NO];
    return YES;
} 
```

瞧！这解决了我的问题。然而，对我来说，这感觉就像是一个根本层面的改变，我不想在我的发展阶段做出这样的改变。我打算成为我的根视图控制器的东西现在是一个模态视图。有人对此问题有其他解决方案吗？

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T21:01:55.443

我遇到了同样的问题：一个本来应该在横向的应用程序，它假设 ViewController 总是在纵向。我对项目和 info.plist 的各个方面进行了大量更改，包括为主 UIWindow 提供一个横向的根视图控制器。它仍然没有工作。我最终撤消了所有更改，并将下面提到的两行添加到我的应用程序委托中：

```
- (void)applicationDidFinishLaunching:(UIApplication *)application 
{
    [_window addSubview:[_viewController view]];
    glView = _viewController.glView;

    // THIS FIXED ORIENTATION FOR ME IN IOS 6
    _window.rootViewController = self.viewController;
    [self.window makeKeyAndVisible];
    // END

    ...my other setup code here...
} 
```

没有其他必要了。

似乎出于某种原因，在 iOS 6 中 UIWindow root-view-controller 设置有时会在 Interface Builder 中被忽略。我确信我的推理在某处是错误的，但我认为这很可能有助于促使某人朝着更全面、更详尽的答案方向发展。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-12T10:08:37.687

在 iOS 8 中，还需要将窗口框架设置为 UIScreen，因为它不会自动更新。

```
self.window.frame = [UIScreen mainScreen].bounds; 
```

# facebook - Facebook 无法抓取我的网址

> ID：10096681
> 
> 赞同：8
> 
> 时间：2012-04-10T21:23:36.257
> 
> 标签：facebook, codeigniter, facebook-opengraph

我的页面的 HTML 结构如下所示。我已经添加了所有元 og 标签，但 facebook 仍然无法从我的网站上抓取任何信息。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Frameset//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-frameset.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"  xmlns:fb="http://www.facebook.com/2008/fbml">
    <head>
            <meta http-equiv="Content-Type" content="text/html;" charset=utf-8"></meta>
            <title>My Site</title>
            <meta content="This is my title" property="og:title">
            <meta content="This is my description" property="og:description">
            <meta content="http://ia.media-imdb.com/images/rock.jpg" property="og:image">
            <meta content="<MYPAGEID>" property="fb:page_id">
            .......
    </head>
    <body>
    ..... 
```

当我在 facebook 调试器（https://developers.facebook.com/tools/debug）中输入 URL 时，我收到以下消息：

```
Scrape Information
Response Code   404

Critical Errors That Must Be Fixed
Bad Response Code   URL returned a bad HTTP response code.

Errors that must be fixed

Missing Required Property   The 'og:url' property is required, but not present.
Missing Required Property   The 'og:type' property is required, but not present.
Missing Required Property   The 'og:title' property is required, but not present.

Open Graph Warnings That Should Be Fixed
Inferred Property   The 'og:url' property should be explicitly provided, even if a    value can be inferred from other tags.
Inferred Property   The 'og:title' property should be explicitly provided, even if a value can be inferred from other tags. 
```

为什么 facebook 不读取元标签信息？该页面是可访问的，而不是隐藏在登录等后面。

**更新**

好的，我做了一些调试，这就是我发现的。我在我的目录中设置了 htaccess 规则-我正在使用 PHP Codeigniter 框架并有 htaccess 规则从 url 中删除 index.php。

因此，当我将 url 提供给没有 index.php 的 facebook 调试器（https://developers.facebook.com/tools/debug）时，facebook 显示 404，但是当我使用 index.php 提供 url 时，它能够解析我的页面。

现在，当 url 没有 index.php 时，如何让 facebook 抓取内容？

这是我的 htaccess 规则：

```
<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteBase /

    #Removes access to the system folder by users.
    #Additionally this will allow you to create a System.php controller,
    #previously this would not have been possible.
    #'system' can be replaced if you have renamed your system folder.
    RewriteCond %{REQUEST_URI} ^system.*
    RewriteRule ^(.*)$ /index.php?/$1 [L]

    #When your application folder isn't in the system folder
    #This snippet prevents user access to the application folder
    #Submitted by: Fabdrol
    #Rename 'application' to your applications folder name.
    RewriteCond %{REQUEST_URI} ^application.*
    RewriteRule ^(.*)$ /index.php?/$1 [L]

    #Checks to see if the user is attempting to access a valid file,
    #such as an image or css document, if this isn't true it sends the
    #request to index.php
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule ^(.*)$ index.php?/$1 [L]
</IfModule>

<IfModule !mod_rewrite.c>
    # If we don't have mod_rewrite installed, all 404's
    # can be sent to index.php, and everything works as normal.
    # Submitted by: ElliotHaughin

    ErrorDocument 404 /index.php
</IfModule> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-10T21:32:00.650

Facebook 文档包含有关开放图形协议的详细信息以及如何包含正确的元标记，以便 Facebook 可以准确地抓取您的 URL。

[https://developers.facebook.com/docs/opengraphprotocol/](https://developers.facebook.com/docs/opengraphprotocol/)

本质上，您想要做的是`og:tags`在您现有的元标记中包含一些特殊的替代（或附加）。

```
 <head>
    <title>Ninja Site</title>
    <meta property="og:title" content="The Ninja"/>
    <meta property="og:type" content="movie"/>
    <meta property="og:url" content="http://www.nin.ja"/>
    <meta property="og:image" content="http://nin.ja/ninja.jpg"/>
    <meta property="og:site_name" content="Ninja"/>
    <meta property="fb:admins" content="USER_ID"/>
    <meta property="og:description"
          content="Superhuman or supernatural powers were often
                   associated with the ninja. Some legends include
                   flight, invisibility and shapeshifting..."/>
    ...
  </head> 
```

如果您有一个`.htaccess`文件重定向内容并使 Facebook 难以抓取您的 URL，您可能能够通过检测 Facebook 的爬虫`.htaccess`并为其提供正确的标签而侥幸逃脱。我相信 Facebook 爬虫提供的用户代理是这样的：

```
facebookexternalhit/1.1 (+http://www.facebook.com/externalhit_uatext.php) 
```

该文档还有一节讨论[确保他们的爬虫可以访问您的站点](https://developers.facebook.com/docs/opengraph/howtos/maximizing-distribution-media-content/#crawl)。

根据您的配置，您可以通过查看您的服务器 access_log 来测试它。在运行 apache 的 UNIX 系统上，访问日志位于`/var/log/httpd/access_log`.

因此，您可以在`.htaccess`文件中使用与此类似的条目 -

```
RewriteCond %{HTTP_USER_AGENT} ^facebookexternalhit
RewriteRule ^(.*)$ ogtags.php?$1 [L,QSA] 
```

我放在那里的`[L,QSA]`标志表明这是将在当前请求 ( ) 上强制执行的最后一条规则，并且(Query String **Append** ) 表明在重写 URL 时将传递给定的任何查询字符串。例如，一个 URL，例如：`L``QSA`

```
https://example.com/?id=foo&action=bar 
```

会传到`ogtags.php`这样- `ogtags.php?id=foo&action=bar`。您的`ogtags.php`文件将根据传递的参数生成动态 og:meta 标签。

现在，只要您的`.htaccess`文件检测到 Facebook 用户代理，它就会将`ogtags.php`文件传递给他（可以包含正确的 og:meta 信息）。请注意您的任何其他规则`.htaccess`以及它们可能如何影响新规则。

从`.htaccess`您详细介绍的条目中，我建议将这条新的“Facebook 规则”作为第一条规则。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-31T08:31:08.093

我遇到了同样的问题，即：错误的响应代码：URL 返回了错误的 HTTP 响应代码。

但奇怪的是，这就是解决它的方法：我添加了

```
 <meta property="og:locale" content="en_US" /> 
```

到我的网站 HEAD 标签，它工作。

Also, not to forget, in your application dashboard (where you get your APP ID) you must have atleast "Website with Facebook Login" enabled and enter the URL of the website. Otherwise it won't work...regardless if you are not using any Facebook Logins on your site.

# android - 编写向后兼容的 ICS Android 应用程序

> ID：10096684
> 
> 赞同：2
> 
> 时间：2012-04-10T21:24:05.503
> 
> 标签：android, calendar, android-4.0-ice-cream-sandwich

我正在编写一个添加日历事件的应用程序。

对于 ICS 之前的操作系统版本，我需要使用不受支持且可能会更改的 contentResolver 查询。

使用 ICS，执行此类操作的 API 是使用 CalendarContract 提供程序。因此，我计划检测 OS API 版本并针对 ICS 前操作系统和 ICS 使用适当的方法。

在我的清单中，我有以下内容来支持 Android 2.1 到 4.x：

```
uses-sdk android:minSdkVersion="7" android:targetSdkVersion="14" 
```

但是除非我将 CalendarContract 设置为 14，否则无法导入 CalendarContract `minSdkVersion`，这使得在 ICS 之前运行任何东西的任何人都无法访问该应用程序。

如何在支持 ICS 手机的新操作系统功能的同时支持旧版本的操作系统？

我是否要创建两个版本的应用程序并将两个版本都上传到市场？用户会看到适合其操作系统的版本吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T21:27:43.087

这就是您可以做的事情：

将 minSDK 版本设置为 2.1，将目标版本设置为 ICS。

然后，在项目的属性中，针对 ICS (android 4.0) 构建..

这样，您将针对 4.0 进行构建，它将包含您在 ICS 中所需的功能，但您仍将支持 android 2.1

只要你在 2.1 上运行时不调用任何 ICS API（如果你这样做，你会得到 classnotfound 异常），你会没事的。

# f# - 从 Seq 继承

> ID：10096693
> 
> 赞同：6
> 
> 时间：2012-04-10T21:24:43.960
> 
> 标签：f#

我想创建自己的自定义集合类型。

我将我的收藏定义为：

```
type A(collection : seq<string>) =
   member this.Collection with get() = collection

   interface seq<string> with
      member this.GetEnumerator() = this.Collection.GetEnumerator() 
```

但这不能编译`No implementation was given for 'Collections.IEnumerable.GetEnumerator()`

我该怎么做呢？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-10T21:32:26.207

在 F#`seq`中实际上只是`System.Collections.Generic.IEnumerable<T>`. 泛型`IEnumerable<T>`还实现了非泛型`IEnumerable`，因此您的 F# 类型也必须这样做。

最简单的方法是只将非泛型调用到泛型调用中

```
type A(collection : seq<string>) =
  member this.Collection with get() = collection

  interface System.Collections.Generic.IEnumerable<string> with
    member this.GetEnumerator() =
      this.Collection.GetEnumerator()

  interface System.Collections.IEnumerable with
    member this.GetEnumerator() =
      upcast this.Collection.GetEnumerator() 
```

# javascript - child 和 parent 都是事件处理程序。可能的？

> ID：10096696
> 
> 赞同：-1
> 
> 时间：2012-04-10T21:24:55.347
> 
> 标签：javascript, jquery

我的用户界面是`<li><a href='#'>hello</a></li>`

锚标记已经有事件处理程序，即`click(function(){})` 我想提供另一个单击功能来列出项目，但它不起作用

更新 - 我只想让事件处理程序列出项目而不是锚标记作为父项

请建议我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T21:33:41.280

这是一个例子。如果你有这个 HTML

```
<li> <a href="#">Hello</a></li> 
```

然后你可以有这个 jquery 处理程序：

```
 $("li").click(function () {
            alert("li clicked");
        });

        $("li > a").click(function (e) {
            e.preventDefault();
            alert("anchor clicked");
            return false;
        }); 
```

请注意，您需要“return false;”。

希望这会有所帮助，-covo

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T21:36:37.033

在你的锚标签的点击事件中使用 jQuery 的`event.stopPropagation()`方法来防止锚事件冒泡。

像这样：

```
$('your existing anchor selector').click(function(event){
    event.stopPropagation();
    //Your other code
}); 
```

# asp.net - ASP.NET MVC - 在授权属性登录重定向后保留 POST 数据

> ID：10096700
> 
> 赞同：3
> 
> 时间：2012-04-10T21:25:08.407
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3, forms-authentication

我有一个带有评论的博客文章页面。任何用户（无论是否登录）都可以在页面底部看到一个表单来发表评论。当用户输入评论并且她未被授权时 - 用户被重定向到登录/注册页面。登录后，用户被重定向回操作，但包含评论正文的 POST 数据丢失。

我使用 ASP.NET MVC Authorize 属性要求对某些操作进行授权：

```
[AcceptVerbs(HttpVerbs.Post), Authorize]
public ActionResult Create(int blogPostID, string commentBody) {
    var comment = new Comment {
       Body = commentBody,
       BlogPostID = blogPostID,
       UserName = User.Identity.Name
    }
    // persist the comment and redirect to a blog post page with recently added comment
} 
```

你怎么解决这个问题？

我认为在显示评论表单之前让用户登录是一个坏主意。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T21:48:44.153

我可能只是保存 siteId 并在 Session 中发表评论。然后为 Create 创建另一个不带任何参数的重载。它检查会话中是否存在这些变量 - 如果存在，请将其传递给您的原始 Create 方法。

为此，您必须删除 Authorize 属性并自己进行安全检查。像这样的东西：

```
var user = HttpContext.User;

if (!user.Identity.IsAuthenticated)
{ 
   Session["Comment"] = comment;
   Session["SiteId"] = siteId;
   return RedirectToAction("LogOn", "Account", 
                           new { returnUrl = "/ControllerName/Create"} );
} 
```

然后你的重载创建：

```
public ActionResult Create()
{
    var comment = (Session["Comment"] ?? "").ToString();
    int siteId = 0;
    if (Session["siteId"] != null)
        siteId = (int)Session["siteId"];

    return Create(siteId, comment);
} 
```

当然，这并不是那么通用，也不能处理更复杂的场景，但这是一个想法。（希望上面的代码有效，我还没有机会测试它）。似乎您可以通过动作过滤器执行类似的操作，但我没有任何示例代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T21:42:37.163

您可以在授权表上使用隐藏字段。将用户的评论放在该字段（您的初始 POST 数据）。之后，如果授权表单只是重定向到您的评论表单，您仍然无法使用评论表单上的数据。因此，将您的授权表发布到评论表中，隐藏字段中的数据也会被发布，因此您可以使用它。

# java - ActiveMQ 配置和 Spring 表达式语言 (SpEL)

> ID：10096703
> 
> 赞同：0
> 
> 时间：2012-04-10T21:25:35.770
> 
> 标签：java, spring, activemq

我必须在具有持久嵌入式代理的同一台机器上启动该服务的多个实例（单独的 JVM）。所有配置文件都是预先生成的，并且在服务启动之前在编译方式上完成了它们的变量替换。我在尝试获取 AMQ 数据目录和 KahaDB 锁的几个实例时遇到问题，显然第一个实例成功获取锁，其余实例继续尝试失败。

我需要设置这样的东西：

```
. . .
<amq:broker dataDirectory="${activemq.directory}/data" id="broker" persistent="true" useJmx="false" >
. . . 
```

我尝试了 PropertyPlaceholderConfigurer，但据我了解，它从 Spring 配置中指定的文件加载属性，并且在它启动时已经为时已晚。我正在尝试使用 Spring 表达式语言，所以我最终得到了这样的结果：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:p="http://www.springframework.org/schema/p"
       xmlns:context="http://www.springframework.org/schema/context"
       xmlns:jms="http://www.springframework.org/schema/jms"
       xmlns:amq="http://activemq.apache.org/schema/core"
       xsi:schemaLocation="http://www.springframework.org/schema/beans
                           http://www.springframework.org/schema/beans/spring-beans.xsd
                           http://www.springframework.org/schema/context
                           http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
                           http://www.springframework.org/schema/jms
                           http://www.springframework.org/schema/jms/spring-jms-3.0.xsd
                           http://activemq.apache.org/schema/core
                           http://activemq.apache.org/schema/core/activemq-core-5.5.0.xsd">

    <!--  Embedded ActiveMQ Broker         -->
    <amq:broker dataDirectory="#{systemProperties['activemq.directory']}/data" id="broker" persistent="true" useJmx="false" >
   ... 
```

我通过命令行

```
-Dactivemq.directory=<my-directory> 
```

在我看到的日志上

```
 nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No bean named '{systemProperties['activemq.directory']}/data' is defined 
```

好像我缺少 AMQ 和 Spring3 SpEL 的东西？是否有其他解决方案同样认为我可能会失踪？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T13:56:49.577

**1\. 如果您想使用 PropertyPlaceholderConfigurer，一个非常讨厌（但至少有效）的解决方案是在开头放置一个空格。**

```
<amq:broker useJmx="false" persistent="false">
  <amq:transportConnectors>
    <amq:transportConnector uri=" #{myconf.getConfigurationValue('JMS_URI')}" />
  </amq:transportConnectors>
</amq:broker> 
```

myconf.properties: JMS_URI=tcp://localhost:0?daemon=false

**2\. 有趣的是，如果您至少明确设置了协议，那么它也可以工作：**

```
<amq:broker useJmx="false" persistent="false">
  <amq:transportConnectors>
    <amq:transportConnector uri="tcp://#{myconf.getConfigurationValue('JMS_URI')}" />
  </amq:transportConnectors>
</amq:broker> 
```

myconf.properties: JMS_URI=localhost:0?daemon=false

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T22:06:11.493

我最终只使用了旧的 PropertyPlaceholderConfigurer 并删除了 SpEL 符号，它就像一个魅力。

# c# - 映射泛型对象集合 nHibernate

> ID：10096708
> 
> 赞同：0
> 
> 时间：2012-04-10T21:26:21.553
> 
> 标签：c#, nhibernate-mapping, abstract-class

所以，我坚持这个设置......假设是一个有孩子名单的班级，并且有两种类型的孩子：男孩和女孩

```
public class ClassRoster
{
public IList<Child> Children{get;set;}
}

public abstract class Child
{
public string Sex {get;}
}

pubic class Boy
: Child
{
public override string Sex { get { return "M"; } }
}

public class Girl
: Child
{
public override string Sex { get { return "F"; } }
} 
```

（很可能，这是一个不好的例子）......当我从数据库中检索子列表时，我是否需要为集合指定鉴别器值，或者 nHibernate 可以使用我为 Child 完成的映射/男孩/女孩已经？

我之所以这么说，是因为当我为我正在从事的项目做类似的事情时，我得到了从 nHibernate 抛出的“WrongClassException”。

* * *

我觉得这还不够清楚。在我的项目中，我已经处理了映射，我可以调用到数据库中，并拉出一个孩子列表，它会按预期映射男孩和女孩。我正在尝试做的是调用班级名册，并获取包含所有男孩和女孩的儿童名单。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T21:49:11.487

我相信您正在寻找的是[NHibernate - 继承映射](http://knol.google.com/k/nhibernate-chapter-8-inheritance-mapping#)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T14:41:38.953

最终成为愚蠢的东西。我没有考虑到第 3 级，而 ClassRoster 和 School 之间的映射是问题......我必须进行一对一的映射才能链接到“School”而不是“High School” ”。

如果我可以足够概括代码，我会将其发布在这里以供进一步参考……老实说，这是一个 pebcak 错误。

# python - 拆分文件名，更新日期，将文件名重新连接在一起，python

> ID：10096722
> 
> 赞同：1
> 
> 时间：2012-04-10T21:28:15.240
> 
> 标签：python, range, enumerate

鉴于文件名列表是：

```
shortname = [H04_IF_FigF2_LCC_05Apr12_mm, H04_BS_IF_FigF2_LCC_05Apr12_mm_2, HH_IF_FigF2_SS_05Apr12_mm, D01_BS_IF_FigF2_LCC_05Apr12_mm_1, D01_BS_FigF2_Overview_05Apr12_mm] 
```

我想用每个下划线剖析每个文件名：

```
for x,y in enumerate(shortname.split("_")): 
```

我想将日期更新为当前日期：

```
strftime("%d%b%y") 
```

然后使用下划线将它们粘合在一起，但我希望它能够以交互方式执行此操作，因为文件名的“部分”计数不同，日期“部分”所在的位置也是如此（即在名字，有6个“部分”，日期是第5个“部分”，第二个，有8个，日期是第6个“部分”）

我正在尝试使用枚举器来获取数字和文本字符串的列表。我尝试获取一系列 x 并遍历每个文件名部分，但我坚持尝试将日期与其余部分隔离开来，然后如何以交互方式将这些部分粘合在一起。

有什么建议么？谢谢，迈克

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T21:41:53.633

我只是尝试将所有内容解析为日期，然后在成功时更新：

```
import datetime

shortnames = ['H04_IF_FigF2_LCC_05Apr12_mm', 
             'H04_BS_IF_FigF2_LCC_05Apr12_mm_2', 'HH_IF_FigF2_SS_05Apr12_mm', 
             'D01_BS_IF_FigF2_LCC_05Apr12_mm_1', 'D01_BS_FigF2_Overview_05Apr12_mm']

def update_time(name):
    old_split = name.split('_')
    new_split = []
    date_fmt = '%d%b%y'
    new_date = datetime.datetime.strftime(datetime.datetime.now(), date_fmt)
    for n in old_split:
        try:
            old_date = datetime.datetime.strptime(n, date_fmt)
            new_split.append(new_date)
        except ValueError:
            new_split.append(n)
    return '_'.join(new_split)

>>> [update_time(filename) for filename in shortnames]
['H04_IF_FigF2_LCC_10Apr12_mm', 'H04_BS_IF_FigF2_LCC_10Apr12_mm_2', 'HH_IF_FigF2_SS_10Apr12_mm', 'D01_BS_IF_FigF2_LCC_10Apr12_mm_1', 'D01_BS_FigF2_Overview_10Apr12_mm'] 
```

这样我就不必关心任何内部细节。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T21:40:52.007

这对你有用吗？

```
>>> from datetime import datetime
>>> name = ["H04_IF_FigF2_LCC_05Apr12_mm", "H04_BS_IF_FigF2_LCC_05Apr12_mm_2", "HH_IF_FigF2_SS_05Apr12_mm", "D01_BS_IF_FigF2_LCC_05Apr12_mm_1", "D01_BS_FigF2_Overview_05Apr12_mm"]
>>> now = datetime.strftime(datetime.now(),"%d%b%y")
>>> ["_".join(i.split("_")[:-2]+[now]+[i.split("_")[-1]]) for i in name]
['H04_IF_FigF2_LCC_10Apr12_mm', 'H04_BS_IF_FigF2_LCC_05Apr12_10Apr12_2', 'HH_IF_FigF2_SS_10Apr12_mm', 'D01_BS_IF_FigF2_LCC_05Apr12_10Apr12_1', 'D01_BS_FigF2_Overview_10Apr12_mm'] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-10T21:41:07.533

您可以保留拆分的结果，替换选定的部分，然后再次加入以形成新的文件名：

```
for fn in shortname:
    parts = fn.split("_")
    # Ask the user about what date to replace
    #(skipped, result in variable i)
    parts[i] = datetime.date.today().strftime("%d%b%y")
    newname = "_".join(parts)
    os.rename(fn, newname) 
```

# maven - maven - 如何构建具有依赖项的 uberjars

> ID：10096723
> 
> 赞同：2
> 
> 时间：2012-04-10T21:28:17.713
> 
> 标签：maven, applet, uberjar

我有一个生成 jar 文件的 Maven 模块。我被要求开发其他几个 uberjar 文件作为构建过程的副产品。我还被告知这 2 个 jar 文件是 applet jar 文件，需要包含来自 maven 模块依赖项的一些类。

我环顾四周并缩小到这三个选项 -

1.  [Maven Assembly 插件](http://maven.apache.org/plugins/maven-assembly-plugin/) - 这可以从 maven 模块生成的类构建自定义 jar。不能包含第三方依赖项。
2.  通过 Maven 使用 ant - 使用[maven-dependency-plugin](http://maven.apache.org/plugins/maven-dependency-plugin/)解包依赖项，然后通过 ant 脚本打包 applet jar。
3.  使用[Maven shade 插件](http://maven.apache.org/plugins/maven-shade-plugin/)- 虽然这个插件不直接适合我的要求，但我可以让它工作。

虽然我可以使用 (b) 和 (c)，但我无法决定使用哪一个。我注意到的一件事是使用依赖插件非常耗时。

我想知道人们是否有其他方法可以达到相同的要求。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T00:25:11.330

您可以使用带有元素的程序集插件包含依赖项`dependencySet`，请参阅：

*   [http://maven.apache.org/plugins/maven-assembly-plugin/assembly.html#class_dependencySet](http://maven.apache.org/plugins/maven-assembly-plugin/assembly.html#class_dependencySet)

具体来说，这是取自[Andrew E Bruno 博客](http://left.subtree.org/2008/01/24/creating-executable-jars-with-maven/)的示例：

```
<dependencySets>
  <dependencySet>
    <outputDirectory></outputDirectory>
    <outputFileNameMapping></outputFileNameMapping>
    <unpack>true</unpack>
    <scope>runtime</scope>
    <includes>
      <include>commons-lang:commons-lang</include>
      <include>commons-cli:commons-cli</include>
    </includes>
  </dependencySet>
</dependencySets> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T20:45:22.367

我最终使用了与上述相同的方法来使用程序集插件。我离开了 shade 插件，因为我也使用 maven 外部的资源生成了几个程序集，并且 shade 插件对此类任务没有很好的支持。

# google-docs-api - 没有身份验证的 Google Docs API

> ID：10096724
> 
> 赞同：5
> 
> 时间：2012-04-10T21:28:22.027
> 
> 标签：google-docs-api

是否可以在未经身份验证的情况下查询 Google Docs 中公开共享的用户文档？

我正在寻找的具体最终目标是能够提供一个用户 ID，然后列出所有在集合中带有特定标记的公开共享文档。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T11:22:12.963

Google Docs API 无法做到这一点，您需要获得授权才能列出这些公开共享的文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T08:33:44.623

我不认为这个答案是 100% 正确的。如果文档在全球范围内共享（可公开访问），那么根据这些 Stack Overflow 帖子应该是可能的：

[在没有身份验证的情况下使用 Zend 访问 Google 电子表格](https://stackoverflow.com/questions/5807684/accessing-google-spreadsheet-with-zend-without-authentication)

或者

[读取 Google Drive 中公共共享文件的内容](https://stackoverflow.com/questions/11664332/read-content-of-public-shared-file-in-google-drive)

# xcode - 如何在 Xcode 4 上为 ExternalBuildToolExecution 指定活动文件夹？

> ID：10096726
> 
> 赞同：2
> 
> 时间：2012-04-10T21:28:25.107
> 
> 标签：xcode, templates, xcode4, makefile

在 Xcode 4x 上为外部构建系统使用 make 时，如何指定活动文件夹？

活动文件夹出现在第一行 cd/

ExternalBuildTool 执行操作

```
cd /Users/myName/Documents/Xcode/myProject
setenv ACTION 
```

默认情况下，它是项目的文件夹，即 /Users/myName/Documents/Xcode/ **myProject**。

但是，当项目是通过模板创建时，Xcode 项目会添加一个层：

*   /Users/myName/Documents/Xcode/ **myProjec**包含 myProject.xcodeproject 和另一个名为

*   /Users/myName/Documents/Xcode/ **myProject/myProject 里面**有所有的源代码。

所以我需要指定 /Users/myName/Documents/Xcode/ **myProject/myProject**

另一种解决方案包括在目标中定义目录，但问题[是 Xcode 模板中定义目标中目录的关键是什么？](https://stackoverflow.com/questions/9240258/what-is-the-key-in-xcode-template-to-define-directory-in-a-target)仍未得到答复。

# zend-framework - 让 Netbeans 自动建议 Zend Framework 组件

> ID：10096728
> 
> 赞同：1
> 
> 时间：2012-04-10T21:28:30.027
> 
> 标签：zend-framework, netbeans-7

我最近安装了 ZF，使用它没有任何问题，但是当我在 Netbeans 中工作时，我希望它能够识别并建议 ZF 组件。例如，当我输入：

```
$config = new Zend_ 
```

我希望它自动完成或建议：

```
Zend_Registry 
```

或者当我尝试使用：

```
Zend_Registry::getInstance(); 
```

我希望 Netbeans 自动建议 getInstance 并识别它的文档。我认为这与在应用程序中包含库有关，但我不确定在哪里设置它？我在 php.ini 中为 include_path 设置了库，并且组件在浏览器中按预期工作，所以没有问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T22:16:31.667

在 Netbeans 菜单中，`Tools > Options > PHP`在`General`选项卡`Global Include Path`部分下单击`Add Folder`。`Zend`从您的图书馆添加文件夹，确认一切。让 Netbeans 完成扫描，您就完成了。

# jquery - 使 css 规则覆盖 jQuery .css 更改

> ID：10096729
> 
> 赞同：5
> 
> 时间：2012-04-10T21:28:34.753
> 
> 标签：jquery, css, printing, media-queries

我有两个样式表：`media="print"`一个和`media="screen"`一个。我还有一些在窗口调整大小时运行的 jQuery 代码，改变`margin-left`了 div 的大小。

目前，当用户打印时，此 div 偏向右侧。我希望`margin-left`用户打印时始终为零。

我怎么能这样做呢？提前致谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-10T21:30:51.703

给它一个`id`并将其设置为`#your-id { margin-left: whatever !important; }`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T21:31:50.783

`!important`在您的 CSS 样式表中使用是一种选择。

另一种选择可能是删除内联样式属性，然后添加您自己的 using `removeAttr('style')`.

# ruby-on-rails - 合并 DateTime 字段的组件

> ID：10096732
> 
> 赞同：0
> 
> 时间：2012-04-10T21:29:34.330
> 
> 标签：ruby-on-rails, ruby-on-rails-3, datetime

我有两个属性`start_time`和`end_time`.

我如何使用输入的日期（不包括时间）`start_time`来包含在`end_time`字段中（因为开始+结束时间将发生在同一天，所以提示用户输入两次是没有意义的）。

看法：

```
<div class="day">
    <div class="field">
       <%= f.label :start_time, "Date"  %>
       <%= f.date_select :start_time,:default => Time.now+1.week, :order => [:month, :day, :year], :ampm => true %>
    </div>
    <div class="field">
        <%= f.label :start_time, "Start Time" %>
        <%= f.time_select :start_time, :ignore_date => true, :minute_step => 15, :ampm => true, :default => Time.now.beginning_of_day + 9.hours %>
    </div>
    <div class="field">
        <%= f.label :end_time, "End Time" %>
        <%= f.time_select :end_time, :minute_step => 15, :ampm => true, :default => Time.now.beginning_of_day + 15.hours %>
    </div>
    <%= link_to_function "Remove this day", "remove_fields(this)" %>
</div> 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T02:14:22.923

真的没有一个很好的方法来做到这一点。您将不得不提取各个组件：

```
t1 = start_time
t2 = end_time
t2 = Time.local(t1.year,t1.month,t1.day,t2.hour,t2.min,t2.sec).in_time_zone 
```

请注意您在哪个时区工作。您可能需要使用`Time.utc`而不是`Time.local`.

# universe - 如何在一个 I-Descriptor 中进行多项交易？

> ID：10096736
> 
> 赞同：1
> 
> 时间：2012-04-10T21:30:12.247
> 
> 标签：universe

目前，我有一个 IDescriptor 可以从另一个文件中提取 1、2、3 期间的销售额。我希望能够从期间 1、2、3 中提取成本并减去总计以获得利润。

当前的 I-Descriptor 语句是：

```
TRANS(SAS1,ITEM,4,'X');@1<1,1,1>+@1<1,1,2>+@1<1,1,3> 
```

*   4 = 销售额
*   3 = 成本
*   @1<1,1,1> = 周期 1
*   @1<1,1,2> = 周期 2
*   @1<1,1,3> = 周期 3
*   @1<1,1,4> = 周期 4

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T23:49:09.480

你正在寻找`EXTRACT`

因此，请尝试以下 loc 属性：

`TRANS(SAS1,ITEM,4,'X');EXTRACT(@1,1,1,1)+EXTRACT(@1,1,1,2)+EXTRACT(@1,1,1,3)`

下一个问题对我来说并不完全清楚，所以如果我做出了不正确的假设，请告诉我。

成本来自属性（字段）3 的当前文件（该字典文件所在的文件）。它与销售数据的格式相同（<1,1,1 到 3>）。在这种情况下，您需要使用@RECORD。

`TRANS(SAS1,ITEM,4,'X');EXTRACT(@1,1,1,1)+EXTRACT(@1,1,1,2)+EXTRACT(@1,1,1,3);EXTRACT(@RECORD,1,1,1)+EXTRACT(@RECORD,1,1,2)+EXTRACT(@RECORD,1,1,3);@2-@3`

所以，让我们分解一下：

*   从文件 SAS1 中的记录 ITEM 中读取属性 4。如果项目不存在，则返回一个空字符串。将其保持在位置 1 (@1)：

`TRANS(SAS1,ITEM,4,'X');`

*   从位置 1 的值中提取多个子值 1 到 3，然后将它们加在一起 ​​()。将其保持在位置 2：

`EXTRACT(@1,1,1,1)+EXTRACT(@1,1,1,2)+EXTRACT(@1,1,1,3);`

*   从当前记录中提取多个子值 1 到 3 并将它们相加。将其保持在位置 3：

`EXTRACT(@RECORD,1,1,1)+EXTRACT(@RECORD,1,1,2)+EXTRACT(@RECORD,1,1,3);`

*   最后，从位置 2 的值（总销售额）中减去位置 3 的值（总成本）。由于这是最后一个位置，因此返回结果：

`@2-@3`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T12:42:53.793

丹的答案中唯一缺少的是您需要另一个 TRANS 来获取您的 COST 字段，因此 TRANS(SAS1,ITEM,3,'X');

在对 EXTRACT 进行第一次操作之后。

# solr - 破解 Solr DataImportHandler 完全导入

> ID：10096739
> 
> 赞同：1
> 
> 时间：2012-04-10T21:30:28.523
> 
> 标签：solr, dataimporthandler

我的任务是向 DataImportHandler 完整导入过程添加“你确定”确认。有没有办法在不编辑 DataImportHandler 源的情况下完成此操作？

换句话说，[http://solr.local:8080/solr/dataimport?command=full-import](http://solr.local:8080/solr/dataimport?command=full-import)应该在进行完全导入之前要求确认。

我在 Sun JVM v. 1.6.0_16-b01 下的 Tomcat 7.0.26 下运行 Solr 3.5.0。我不是开发人员，但过去做过一些 Java 编码。

最好的祝愿，迈尔斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T09:12:48.250

让人们使用另一个界面。不要将用户定向到`full-import`url；`full-import`创建另一个 HTML 页面，用户必须在调用命令之前单击 javascript 警报上的“确定” 。无需黑客攻击。

# php - 解谜：在 PHP 中查找较大单词中的所有单词

> ID：10096744
> 
> 赞同：2
> 
> 时间：2012-04-10T21:31:22.023
> 
> 标签：php, string, word, puzzle, scramble

所以我有一个长度在 3 到 20 个字符之间的单词数据库。我想在 PHP 中编写一些代码，以查找包含在较大单词中的所有较小单词。例如，在“向内”一词中，有“雨”、“赢”、“摆脱”等词。

起初我考虑在 Words 表中添加一个字段（Words3 到 Words20，表示单词中的字母数），例如“LetterCount”……例如，“rally”将表示为 10000000000200000100000010：1 个实例字母 A，字母 B 的 0 个实例，... 字母 L 的 2 个实例，等等。然后，遍历每个表中的所有单词（如果指定了找到单词的目标长度，则为一个表）并比较每个单词的 LetterCount 到源单词的 LetterCount（上例中的“向内”）。

但后来我开始认为这会给 MySQL 数据库和 PHP 脚本带来过多的负载，调用每个单词的 LetterCount，将每个数字与源词的数字进行比较，等等。

有没有更简单，或许更直观的方法来做到这一点？如果它以任何方式有助于开销，我愿意使用存储过程。只是一些建议将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-10T21:51:27.317

这是一个简单的解决方案，应该非常有效，但只能在一定大小的单词范围内工作（可能会分解大约 15-20 个字符，具体取决于组成单词的字母是否是具有较低值的低频字母或具有较高值的​​高频字母）：

1.  根据它的频率为每个字母分配一个质数。`e`2、`t`= 3、`a`= 5 等也是如此。使用[此处](http://pages.central.edu/emp/lintont/classes/spring01/cryptography/letterfreq.html)或类似来源的频率值。
2.  通过将单词中字母的质数相乘来预先计算单词列表中每个单词的值，并将其存储在表中的`bigint`数据类型列中。例如，`tea`将有一个值`3*2*5=30`。如果一个词有重复的字母，重复这个因子，所以它`teat`的值应该是`3*2*5*3=90`。
3.  当检查一个词（例如`rain`）是否包含在另一个词（例如 ）中时，检查 for 的值是否与 for的值相除`inward`就足够了。在这种情况下，，， 和可以被 整除，所以单词在单词内部。`rain``inward``inward = 14213045``rain = 7315``14213045``7315``rain``inward`
4.  bigint 列的最大值为`9223372036854775807`，最多可以包含 15-20 个字符（取决于单词中字母的频率）。例如，我从[这里](http://www.wordbyletter.com/words_starting_with.php?q=a&letters=20)选择了第一个 20 个字母的单词，即`anitinstitutionalism`, 并且它的值`6901041299724096525`几乎不能放在 bigint 列中。但是，14 个字母的单词`xylopyrography`的值为`635285791503081662905`，太大了。您可能必须使用替代方法将非常大的情况作为特殊情况处理，但希望它们的数量足够少，它仍然会相对有效。

该查询将类似于我在这里准备的演示：[http ://www.sqlfiddle.com/#!2/9bd27/8](http://www.sqlfiddle.com/#!2/9bd27/8)

# jquery - 如何使用本地存储保留复选框状态以过滤项目

> ID：10096745
> 
> 赞同：0
> 
> 时间：2012-04-10T21:31:34.227
> 
> 标签：jquery, checkbox, filtering, local-storage

我在主页上有一个链接列表，可以通过不同的复选框进行过滤。当用户单击指向新 URL 的链接之一然后返回此主页时，我想保留所有复选框的状态。

我有两个似乎无法解决的问题：

1.  取消选中输入时，不会始终显示共享类的结果（取消选中 In-App 然后 In-Stream，In-Banner 的唯一结果是 Link 1，它应该是 #1 和 #3）
2.  我似乎无法让 Check/Uncheck All 功能与 localStorage 一起使用以保留用户选择。一直在尝试很多事情，但没有什么对我有用。

如果我的代码不完全一致，请原谅；一直在学习和尝试新事物。任何帮助或建议表示赞赏。

这是我到目前为止所做的事情，其中​​一些基于上一篇文章...[在重新加载时保存复选框状态](https://stackoverflow.com/questions/3313595/saving-checkbox-state-on-reload)

在这里摆弄... [http://jsfiddle.net/JFlo/689rA/](http://jsfiddle.net/JFlo/689rA/)

HTML

```
<fieldset class="tags">
<p><label><input type="checkbox" id="check-all" class="checkAll" checked /><span>Select All</span></label></p>
<p><label><input type="checkbox" class="filter" id="in-app" checked />In-App</label></p>
<p><label><input type="checkbox" class="filter" id="in-stream" checked />In-Stream</label></p>
<p><label><input type="checkbox" class="filter" id="in-banner" checked />In-Banner</label></p>
</fieldset>

<ul class="results">
<li class="in-banner"><a href="/link/within_site/" >Link 1</a></li>
<li class="in-stream"><a href="/link/within_site/" >Link 2</a></li>
<li class="in-stream in-banner"><a href="/link/within_site/" >Link 3</a></li>
<li class="in-app"><a href="/link/within_site/" >Link 4</a></li>
</ul> 
```

JS

```
function getStorage(key_prefix) {
// this function will return us an object with a "set" and "get" method
// using either localStorage if available, or defaulting to document.cookie
if (window.localStorage) {
    // use localStorage:
    return {
        set: function(id, data) {
            localStorage.setItem(key_prefix+id, data);
        },
        get: function(id) {
            return localStorage.getItem(key_prefix+id);
        }
    };
} else {
    // use document.cookie:
    return {
        set: function(id, data) {
            document.cookie = key_prefix+id+'='+encodeURIComponent(data);
        },
        get: function(id, data) {
            var cookies = document.cookie, parsed = {};
            cookies.replace(/([^=]+)=([^;]*);?\s*/g, function(whole, key, value) {
                parsed[key] = unescape(value);
            });
            return parsed[key_prefix+id];
        }
    };
}
}

jQuery(function($) {
var $inputs = $('input.filter'), $checkall = $('input.checkAll'), $storedData = getStorage('web_checkboxes_');

// Check/Uncheck All events
$checkall.live('change', function(){

    // Change text for Check All box
    $(this).next().text( this.checked ? 'Uncheck All' : 'Check All');

    // Set Input Filter
    $inputs.attr('checked', this.checked ? 'checked' : ''); // This line not working in newer versions of jQuery
    // Toggle visibility of all results
    var $lis = $('.results > li').toggle();

    // Toggle checkboxes
    $lis.toggle($(this).is(':checked'));
});        

// Individual input events
$inputs.live('change', function(){
    // Change text for Check All box
    $inputs.length === $inputs.find(':checked').length 
        ? $checkall.attr('checked', 'checked').next().text('Uncheck All') 
        : $checkall.removeAttr('checked').next().text( 'Check All' );

    $('.results .'+this.id).toggle($(this).is(':checked'));
    $storedData.set(this.id, $(this).is(':checked')?'checked':'not');
    //For each one checked
}).each(function(){
    //var $lis = $j('.results > li').hide();
    //$lis.filter('.' + $j(this).attr('ID')).show();
    var val = $storedData.get(this.id);
    if (val == 'checked') $(this).attr('checked', 'checked');
    if (val == 'not') $(this).removeAttr('checked');
    if (val) $(this).trigger('change');
});

});​ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T03:08:10.970

我有...

```
// 4/11
$j('.tags').delegate('input:checkbox', 'change', function(){
    var $lis = $j('.results > li').hide();
    $j('input:checked').each(function(){
        $lis.filter('.' + $j(this).attr('ID')).show();
    });
});
// 4/11
$checkall.live('change', function(){
    $storedData.set(this.id, $j(this).is(':checked')?'checked':'not');
    $inputs.attr('checked', this.checked ? 'checked' : '');
    $j(this).next().text( this.checked ? 'Uncheck All' : 'Check All');
    var $lis = $j('.results > li').hide();
    //For each one checked
     $inputs.each(function(){
        $lis.filter('.' + $j(this).attr('ID')).show();
        $storedData.set(this.id, $j(this).is(':checked')?'checked':'not');
        var val = $storedData.get(this.id);
        if (val == 'checked') $j(this).attr('checked', 'checked');
        if (val == 'not') $j(this).removeAttr('checked');
        if (val) $j(this).trigger('change');
    });
});

// 4/11
$inputs.live('change', function(){
    $storedData.set(this.id, $j(this).is(':checked')?'checked':'not');
}).each(function(){
    var val = $storedData.get(this.id);
    if (val == 'checked') {
        $j(this).attr('checked', 'checked');
        $checkall.attr('checked');
    }
    if (val == 'not') {
        $j(this).removeAttr('checked');
        $checkall.removeAttr('checked');
    }
    if (val) $j(this).trigger('change');
}); 
```

# mysql - 数据库移动导致 IP 被阻止？

> ID：10096750
> 
> 赞同：0
> 
> 时间：2012-04-10T21:32:00.823
> 
> 标签：mysql, wordpress, timeout, ip, connection-timeout

我最近遇到的一个问题让我完全困惑。我已将 WordPress 网站的 MySQL 数据库从一台服务器移动到另一台服务器。在此之后，我的客户报告说他们无法从办公室访问他们的网站，但可以在其他任何地方访问它。

我已经告诉他们清除缓存、历史记录、cookie 等。没有运气。网站在他们的办公室里无法正常工作，而在其他任何地方都可以正常工作。他们继续收到超时错误。

我在任何浏览器上都可以看到网站，无论是登录还是注销。

这可能与数据库移动有关吗？这是一个不相关的问题，恰好与此数据库移动相吻合吗？

你的帮助将不胜感激，因为我傻眼了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T01:20:31.773

检查无法访问该站点的 PC 上的主机文件或防火墙。

如果他们可以远离办公室到达现场，请检查办公室的路由器。

# jquery - Django / Jquery 表单提交

> ID：10096752
> 
> 赞同：1
> 
> 时间：2012-04-10T21:32:05.267
> 
> 标签：jquery, django

我试图创建一个带有表单验证的简单输入框，但我不能 100% 确定如果成功，如何将帖子发布到 URL。我不是 100% 确定我是否需要在 jquery 脚本中发布帖子，或者我是否还需要修改 views.py 文件中的任何内容......

```
<html>
 <head>
    <meta charset="utf-8">
    <title>Demo</title>
  </head>

<body>

<script src="{{ STATIC_URL }}js/jquery.js"></script>

<script type="text/javascript">
jQuery(function(){
        $("#btn-search").click(function(){
        $(".error").hide();
        var hasError = false;
        var searchReg = /^[a-zA-Z0-9-]+$/;
        var searchVal = $("#search-text").val();
        if(searchVal == '') {
            $("#search-text").after('<span class="error">Please enter a search term.</span>');
            hasError = true;
        } else if(!searchReg.test(searchVal)) {
            $("#search-text").after('<span class="error">Enter valid text.</span>');
            hasError = true;
        }
        if(hasError == true) {return false;}
                            else {
                                    $("#search-text").after('<span class="error">Search term accepted.</span>');
                                    return false;
                            }
    });
});
</script>

<form method="post" name="form1" action="/whatmask_output/">
{% csrf_token %}
     <fieldset>
          <div><label>Search:</label><input type="text" name="search-text" id="search-text" value="" size="32" /></div>
          <div><label></label><input type="submit" value="Submit" id="btn-search" /></div>
     </fieldset>
</form>

</body>
</html> 
```

有任何想法吗 ？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T21:37:11.120

有两件事要改变。一、更换

```
$("#btn-search").click(function(){ 
```

和

```
$("form").submit(function(){ 
```

因为可以通过在文本框中点击返回/输入来提交搜索表单，完全绕过按钮。

二、改变

```
else {
    $("#search-text").after('<span class="error">Search term accepted.</span>');
    return false;
} 
```

到

```
else {
    $("#search-text").after('<span class="error">Search term accepted.</span>');
    return true;
} 
```

这应该允许在`submit`没有进一步干预的情况下继续进行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T21:36:02.000

给你的表单一个 id：

```
<form method="post" id="form1" name="form1" action="/whatmask_output/"> 
```

每当您准备提交使用时：

```
$('#form1').submit(); 
```

# c# - 如何修复这个奇怪的实体框架错误？

> ID：10096753
> 
> 赞同：1
> 
> 时间：2012-04-10T21:32:11.280
> 
> 标签：c#, asp.net, entity-framework, entity-framework-4

尝试在设计器中配置实体数据源时收到此错误消息：

![在此处输入图像描述](../Images/efe04a331c33e62298952adc7a0b8270.png)

我的 .edmx 文件位于同一解决方案的类库中。我添加了必要的 DLL 并将连接复制到 web.config。奇怪的是我可以查询数据库，并且可以很好地获取数据，所以我知道我的连接字符串是正确的。有人遇到过这个吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T21:36:17.870

您可以删除并重新创建 edmx 文件吗？这将解决问题（尽管这是一个生硬的措施）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T02:03:03.187

试试这个步骤：

重建您的解决方案

转到您的类库 app.config

复制您创建的 EDMx 的连接字符串并将其粘贴到

您的 asp.net 项目的 web.config 连接字符串部分..

我之前也遇到过这个错误，这就是我所做的。

如果这不起作用，请尝试删除您的 edmx 文件（及其在 app.config 上的连接字符串）并重新创建它。然后再次执行上述步骤。

最好的祝福

# java - 这行java代码有什么问题？

> ID：10096755
> 
> 赞同：0
> 
> 时间：2012-04-10T21:32:18.990
> 
> 标签：java, nullpointerexception, binary-tree

```
if (current.leftChild.iData != '+' && current.rightChild.iData != '+') 
```

对于这行代码，我试图检查当前节点的 leftChild 和当前节点的 rightChild 是否都 == '+' 或字符加号。如果其中任何一个不 = 字符 + 我想执行其他代码。我得到了这一行的空指针异常以及我用来调用这行代码的方法。iData 只是节点内部的信息。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-10T21:35:46.513

如果您收到空指针异常，则表示以下两种情况。
1\. 当前为空。
2\. leftChild 为空/rightChild 为空。
3\. iData 为空

但是因为你没有提供很多细节。我将无法帮助你。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T21:35:55.947

要么`current.leftChild`or `current.rightChild`（或`current`本身）没有被正确设置并且是`null`. 尝试访问`null`结果中的成员`NullPointerException`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-10T21:34:46.783

如果`current`，`current.leftChild`或者`current.rightChild`是`null`，你会得到一个`NullPointerException`. 您需要先执行空检查。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-10T23:54:53.973

使用断点查看 current.leftChild.iData 和 current.rightChild.iData 的值。或者你可以写：

> System.out.println("leftChild:" + current.leftChild.iData);
> 
> System.out.println("leftChild:" + current.rightChild.iData);

您将需要检查对这些值的更改，因为在您的代码中某处已将它们设置为空。一旦它们为空，系统将给您 NullPointerException，因为这些对象不再存在。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-11T18:30:09.023

首先尝试打印每一部分以找出什么是空的，当你到达给你带来麻烦的那部分时，你应该得到一个 NPE，这将左右分开成单独的故障。请注意，如果您制作这些单独的行并且两者都失败了，那么您只会得到第一行的失败。

现在：

> if (current.leftChild.iData != '+' && current.rightChild.iData != '+') 对于>这行代码我试图检查当前节点的leftChild和>当前节点的rightChild两者 == '+' 或字符加号。如果>其中任何一个都不=字符+我想执行其他代码

你写的代码不会（一旦它不抛出异常）测试你说你想要的。你说你想看看是否有一个是 != 到 '+'，但是这段代码只测试两者是否都是 != '+'，因此你错过了一些我相信你想要捕捉的条件。事实上，如果你真的想执行*其他*代码，如果其中一个不等于'+'，那么你想要的是

```
if (current.leftChild.iData == '+' && current.rightChild.iData == '+')
{
    //code you execute if both are equal to '+'
}
else
{
    //code you execute if either (or both) is not equal to '+'
} 
```

# ios - 从可变数组中删除一系列对象时 CFRelease 崩溃

> ID：10096759
> 
> 赞同：2
> 
> 时间：2012-04-10T21:32:40.027
> 
> 标签：ios, memory, crash, nsmutablearray

我们的一位测试人员报告了以下崩溃：

```
0 APP_NAME_WAS_HERE 0x00074892 testflight_backtrace + 158
1 APP_NAME_WAS_HERE 0x000754bc TFSignalHandler + 244
2 libsystem_c.dylib 0x378ea7ec _sigtramp + 48
3 CoreFoundation 0x30ef42e6 CFRelease + 94
4 CoreFoundation 0x30f09a36 -[__NSArrayM removeObjectAtIndex:] + 294
5 CoreFoundation 0x30f4a65e -[NSMutableArray removeObjectsInRange:] + 90
6 APP_NAME_WAS_HERE 0x000570ca -[StoryViewController rewindToChunkIndex:] + 558
7 APP_NAME_WAS_HERE 0x00057396 -[StoryViewController restartChapter] + 22 
```

不幸的是，我们无法重现崩溃——我们只能通过 TestFlight 获取崩溃日志。

我们确实收到了调试日志，以确认确实收到了正在执行的操作`removeObjectsInRange`的有效范围。`NSMutableArray`（此外，这会引发异常而不是发出信号，对吗？）

我唯一的想法是该对象正在获得双重释放，但我不确定在 ARC 开启的情况下如何实现？

请注意，要删除的对象是`UIView`子类，并且在此之前，它们中的一些或全部可能已从其父视图中删除。所以如果他们在这个阶段被释放我不会感到惊讶，我只是不明白为什么会导致它崩溃！

**编辑**：为了验证它是否是一个过度释放的对象，我人为地尝试过度释放一个对象（`CFRelease(__bridge (CFTypeRef) obj)`用于在 ARC 环境中强制释放）以查看它将产生的崩溃日志的类型。不幸的是，它有点不同，所以也许它毕竟不是过度发布？也许是某种涂鸦？

这是明确的过度发布的样子：

```
Exception Type:  EXC_CRASH (SIGABRT)
Exception Codes: 0x00000000, 0x00000000
Crashed Thread:  0

Thread 0 name:  Dispatch queue: com.apple.main-thread
Thread 0 Crashed:
0   libsystem_kernel.dylib          0x369c732c __pthread_kill + 8
1   libsystem_c.dylib               0x36c20208 pthread_kill + 48
2   libsystem_c.dylib               0x36c19298 abort + 88
3   libsystem_c.dylib               0x36bd437a free + 374
4   libobjc.A.dylib                 0x375e4d72 object_dispose + 14
5   CoreFoundation                  0x362e9618 -[NSObject dealloc] + 76
6   UIKit                           0x310323a8 -[UIView dealloc] + 620
7   libobjc.A.dylib                 0x375e416e _objc_rootRelease + 30
8   CoreFoundation                  0x362dc2e0 CFRelease + 88
9   APP_NAME_WAS_HERE                   0x000cea98 -[StoryViewController rewindToChunkIndex:] (StoryViewController.m:584) 
```

以下是过度发布的崩溃日志的样子：

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T00:41:25.997

如果查看堆栈跟踪，崩溃的发生不是因为索引错误，而是因为对象的过度释放。

NSArray 在添加对象时发送保留消息，在删除对象时发送释放消息。显然，该版本正在崩溃。

这意味着，您过度释放了添加到数组中的对象。

**更新**

您的子视图是否被强烈拥有？您的所有权修饰符是“强”、“弱”还是 unsafe_unretained？即使在 ARC 中，如果您没有正确“拥有”您的变量，也可能会出现不平衡的保留调用。例如，由于您手动将视图添加和删除到另一个数组中，因此您应该“拥有”它。从 superview 中删除将向视图发送释放，而 addSubview 将发送保留。当您使用 XIB 构建视图时，XIB 加载机制使用 property'w 所有权修饰符，并在将其添加到视图 (StoryViewController.view) 时相应地增加保留计数。由于 XIB 加载机制将其添加到子视图中，因此您不应该卸载它。如果您想卸载它，您应该通过将子视图（插座）的属性类型更改为“强”来“拥有”它，

当您编写 ARC 所有权修饰符时，开始考虑对象图以及谁拥有什么。ARC 不像垃圾收集。这样的事情还是会发生:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T01:03:54.460

我对该问题的解决方法是将编译器的优化级别从目标构建设置中`None [-O0]`的默认设置（仅在发行版中设置）降低。`Fastest, Smallest [-Os]`

我不确定它是否只是在回避问题，或者编译器中是否确实存在错误，但你去吧。它解释了为什么只有测试人员才能得到它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-20T04:59:38.167

没有看到代码，很难说出真正的问题是什么。我敢打赌这是一个过度发布的东西。请记住，ARC 不适用于 Core Foundation 对象。

您可能已经使用便捷构造函数而不是使用`alloc`and分配了属性`init`。此类对象是自动释放的，必须明确保留，否则它们将在下一个循环中立即释放。

# subsonic - 亚音速死了吗？

> ID：10096762
> 
> 赞同：3
> 
> 时间：2012-04-10T21:32:55.193
> 
> 标签：subsonic, data-access-layer

我工作的公司几乎都使用亚音速 DAL 来完成我们所做的一切。

我最近注意到该[域](http://subsonicproject.com/)已被释放。

那么亚音速死了吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-10T21:41:07.230

该域似乎已经死了。他们的[github 存储库](https://github.com/subsonic)仍然在线，最近的活动是一个月前的。作者 Rob[有一个博客](http://wekeroad.com/)，但他似乎没有解决他可怜的领域，尽管他似乎承认它并没有引起他的太多关注。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-17T12:21:47.360

对于您的所有信息，该域已备份（可能在 Rob 的收件箱中丢失了）。

在 2012 年 1 月至 2 月期间，我花了很多时间来修复 SubSonic 2 中的所有未解决的错误，包括修补、修复或删除许多失败的单元测试（有很多）、处理未完成的拉取请求，以及一般情况下给它一个很好的调整。

我还添加了一个 MS Access 提供程序和一个自动枚举生成器。

但是 SS2 现在已经非常“成熟”了，除了错误修复之外，我看不到它发生了太多变化。也就是说，现在帮助资源已备份，它仍然是一个很棒且完整的软件包。如果没有太多的活动补丁，那可能是因为它不需要任何补丁。

SS3 将项目带向了一个非常不同的方向。我很高兴使用它，但与所有这些事情一样，我主要专注于我可以用它做什么，而不是工具本身。SS3 上有大量优秀的东西积压，我对 LINQ 不感兴趣，甚至不热衷，所以不知道我将如何尝试解决与此有关的任何问题。

Rob 已经转向 Massive，他的 .NET 4 动态工具。

更新：实际的 SubSonic 官方网站位于：subsonic.wekeroad.com

Subsonicproject.com 是以前由贡献者 Eric Kemp 注册的二级站点，被域名抢注，大部分损坏。当罗伯告诉我这件事时，我差点摔倒。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-11-23T17:40:41.127

是的！

安息吧，我的老朋友：（

# forms - 用户加入电子邮件列表后如何隐藏电子邮件注册表单？

> ID：10096763
> 
> 赞同：0
> 
> 时间：2012-04-10T21:32:58.237
> 
> 标签：forms, email, aweber

我使用 Aweber 在我的博客上托管多个电子邮件注册表单。

有人加入电子邮件列表后，如何隐藏这些表单？一旦他们已经加入，就无需要求他们注册，这将使网站更干净，更用户友好。

您能否将用户 IP 地址链接到 Aweber 列表，验证他们是否已注册，然后删除表单？或者以某种方式放下一个cookie来做同样的事情？

我从来没有做过这样的事情，所以我只是想了解一下选择和需要什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T21:35:49.860

随着 IP-Adress 的变化，最好设置一个 cookie 的时间长一点。如果设置了此 cookie，您可以隐藏表单。

# php - MySQL 从 3 个表中选择并将其放入 PHP 数组中

> ID：10096764
> 
> 赞同：4
> 
> 时间：2012-04-10T21:33:00.023
> 
> 标签：php, mysql, select, join

抱歉英语不好，标题不好！

我有表“发布”

```
id    title
1     test Thread
2     hello
3     just 
```

所以有**“标签”**

```
tagid   tagname
1       test
2       russia
3       new site 
```

所以有一个**post_tags**

```
tagid    postid
1        1
2        1
3        1 
```

我需要一个来自下面的 var_dump 的数组：

```
$posts = array(
    1 => array(
        'title' => 'test Thread',
        'tags' => array(
            'test', 'russia', 'new site',
        ),
    ),
    2 => array(
        'title' => 'hello',
        'tags' => NULL
    ),
    3 => array(
        'title' => 'just',
        'tags' => NULL
    ),
) 
```

我试着去做，但我得到的不是我想要的。

```
SELECT `post`.`id`, `post`.`title`, `tags`.`tagname` FROM `post` 
LEFT JOIN `post_tags` ON `post_tags`.`tagid` = `post`.`id` 
LEFT JOIN `tags` ON `post_tags`.`tagid` = `tags`.`tagid` 
```

我接下来进入 SQL：

```
id  title            tagname
1   test Thread     test
1   test Thread     russia
1   test Thread     newsite
2   hello           NULL
3   just            NULL 
```

**PHP**

```
$query = mysql_query("SELECT `post`.`id`, `post`.`title`, `tags`.`tagname` FROM `post` 
    LEFT JOIN `post_tags` ON `post_tags`.`tagid` = `post`.`id` 
    LEFT JOIN `tags` ON `post_tags`.`tagid` = `tags`.`tagid`");
$posts = array();
while ($row = mysql_fetch_assoc($query))
{
    $posts[] = $row;
}

var_dump($posts); 
```

谢谢！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T21:40:03.357

查询没问题。您只需要在循环中添加一些逻辑：

```
while ($row = mysql_fetch_assoc($query))
{
    if (isset($posts[$row['id']])) {
        $posts[$row['id']]['tags'][] = $row['tagname'];
    }
    else {
        $posts[$row['id']] = array(
            'title' => $row['title'],
            'tags' => $row['tagname'] === null ? null : array($row['tagname'])
        );
    }
} 
```

如果您已经看到具有相同帖子 ID 的行，那么您想要从当前行获得的只是标签名称（因此将其添加到“标签”数组中）。如果这是第一次看到具有此帖子 ID 的行，只需将其添加到`$posts`，请小心将“标签”设置为其中一个`null`或具有一个元素的数组。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T21:43:26.607

您无法从 mysql 数据库中获取多维数组。如果您希望以这种形式获得结果，则必须对结果进行自己的后期处理。可能是这样的？

```
$posts = array();
while ($row = mysql_fetch_assoc($query))
{
    if (!isset($posts[$row['id']])) {
        $posts[$row['id']] = array();
        $posts[$row['id']]['title'] = $row['title'];
        $posts[$row['id']]['tags'] = array();
    }
    if ($row['tagname'] != null) $posts[$row['id']]['tags'][] = $row['tagname'];
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-10T21:41:03.097

试试这个：

```
while ($row = mysql_fetch_assoc($query))
{
    if( !isset( $posts[$row["id"]] ) ) {
        $posts[ $row["id"] ] = array( "title" => $row["title"], "tags" => array() );
    }
    array_push( $posts[ $row["id"] ][ "tags" ], $row["tagname"] );
} 
```

我无法调试它，所以如果您遇到任何错误，请告诉我

# ruby-on-rails - 为什么 :dependent => :restrict 会抛出错误？

> ID：10096768
> 
> 赞同：3
> 
> 时间：2012-04-10T21:33:15.523
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord, has-and-belongs-to-many

这个问题[Check all associations before destroy in rails](https://stackoverflow.com/questions/6301054/check-all-associations-before-destroy-in-rails)建议使用`:dependent => :restrict`.

为什么我会得到`ArgumentError: Unknown key(s): dependent`？

这适用`has_and_belongs_to_many`吗？

为什么文档中没有提及？[http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html](http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html)

是在 3.0.7 之后引入的吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-11T01:41:57.923

`:dependent`不能与`has_and_belongs_to_many`. 您链接的文档列出了接受它的关联方法`has_many`：`has_one`和`belongs_to`.

您可以添加一个`before_remove`钩子并手动进行相关检查。

# jsp - 在 Spring 中，可以使用 JSP tile 和 Velocity tile 呈现相同的页面

> ID：10096769
> 
> 赞同：0
> 
> 时间：2012-04-10T21:33:38.917
> 
> 标签：jsp, spring-mvc, velocity, apache-tiles

有人可能想知道为什么我需要这个，但是我们有一个应用程序，它目前使用 spring + JSP tile 来呈现页面，其中说所有页面都有一个共同的左侧导航与内容。

但是现在企业要求自由地将左侧导航与同一页面中的其余 UI 分离。原因是，他们希望左侧导航中的迭代速度比页面的其余部分更快。专门的设计师可能会为此工作。

因此，我想在左侧导航中给他们 Velocity 模板，页面的其余部分仍然使用 jsp 磁贴显示。

我只遇到了这个[http://forum.springsource.org/showthread.php?10714-MVC-Using-JSP-Velocity-Tiles-in-Same-WebAp](http://forum.springsource.org/showthread.php?10714-MVC-Using-JSP-Velocity-Tiles-in-Same-WebAp)

但找不到什么可说的，可以使用velocity和jsp图块（一起）显示同一页面。

我愿意将 Velocity 与 Spring 中没有提供标准集成的瓦片一起使用（Struts 确实提供了一个）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T22:51:00.647

瓦片可以使用任何受支持的模板机制——没有什么说所有瓦片必须使用相同的渲染引擎。

# java - Datanucleus、JDO 和可执行 jar - 怎么做？

> ID：10096772
> 
> 赞同：5
> 
> 时间：2012-04-10T21:33:53.993
> 
> 标签：java, jdo, datanucleus

我正在为嵌入式 H2 数据库开发一个带有 Datanucleus 和 JDO 的桌面应用程序。当我从 Eclipse 运行它时一切正常，但是当我尝试从中制作可执行 jar 时它停止工作。我收到以下错误：

**org.datanucleus.exceptions.NucleusUserException：已指定持久性进程使用名称为“jdo”的 ClassLoaderResolver，但 DataNucleus 插件机制尚未发现此问题。请检查您的 CLASSPATH 和插件规范。**

当然它表明我没有正确配置一些东西 - 我错过了什么？如果我遗漏了一些大的东西，它根本就不起作用，所以我假设它是一个有缺陷的可执行 jar。我在其他应用程序中看到过这个错误，比如 JPOX，它已被修复，但没有给出任何解决方案。

整个错误堆栈跟踪：

```
Exception in thread "main" javax.jdo.JDOFatalInternalException: Unexpected exception caught.
        at javax.jdo.JDOHelper.invokeGetPersistenceManagerFactoryOnImplementation(JDOHelper.java:1193)
        at javax.jdo.JDOHelper.getPersistenceManagerFactory(JDOHelper.java:808)
        at javax.jdo.JDOHelper.getPersistenceManagerFactory(JDOHelper.java:701)
        at db.PersistenceManagerFilter.init(PersistenceManagerFilter.java:44)
        at Main.main(Main.java:26)
NestedThrowablesStackTrace:
java.lang.reflect.InvocationTargetException
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
        at java.lang.reflect.Method.invoke(Unknown Source)
        at javax.jdo.JDOHelper$16.run(JDOHelper.java:1965)
        at java.security.AccessController.doPrivileged(Native Method)
        at javax.jdo.JDOHelper.invoke(JDOHelper.java:1960)
        at javax.jdo.JDOHelper.invokeGetPersistenceManagerFactoryOnImplementation(JDOHelper.java:1166)
        at javax.jdo.JDOHelper.getPersistenceManagerFactory(JDOHelper.java:808)
        at javax.jdo.JDOHelper.getPersistenceManagerFactory(JDOHelper.java:701)
        at db.PersistenceManagerFilter.init(PersistenceManagerFilter.java:44)
        at Main.main(Main.java:26)
Caused by: org.datanucleus.exceptions.NucleusUserException: Persistence process has been specified to use a ClassLoaderResolver of name "jdo" yet this has not been found by the DataNucleus plugin mechanism. Please check your CLASSPATH and plugin specification.
        at org.datanucleus.NucleusContext.<init>(NucleusContext.java:233)
        at org.datanucleus.NucleusContext.<init>(NucleusContext.java:196)
        at org.datanucleus.NucleusContext.<init>(NucleusContext.java:174)
        at org.datanucleus.api.jdo.JDOPersistenceManagerFactory.<init>(JDOPersistenceManagerFactory.java:364)
        at org.datanucleus.api.jdo.JDOPersistenceManagerFactory.createPersistenceManagerFactory(JDOPersistenceManagerFactory.java:294)
        at org.datanucleus.api.jdo.JDOPersistenceManagerFactory.getPersistenceManagerFactory(JDOPersistenceManagerFactory.java:195)
        ... 12 more 
```

它指向的行是 PersistenceManagerFilter init 方法：

```
pmf = JDOHelper.getPersistenceManagerFactory(getProperties()); 
```

属性文件如下所示：

```
 javax.jdo.PersistenceManagerFactoryClass=org.datanucleus.api.jdo.JDOPersistenceManagerFactory
datanucleus.ConnectionDriverName=org.h2.Driver
datanucleus.ConnectionURL=jdbc:h2:datanucleus
datanucleus.ConnectionUserName=sa
datanucleus.ConnectionPassword= 
```

我拥有来自 maven 的所有依赖项，目标是使用依赖项进行部署。依赖关系如 datanucleus 页面[http://www.datanucleus.org/products/datanucleus/jdo/maven.html所述](http://www.datanucleus.org/products/datanucleus/jdo/maven.html)

有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-11T12:58:35.657

DataNucleus jar 都支持 OSGi，并使用插件机制来识别功能，因此包含*plugin.xml*和*META-INF/MANIFEST.MF*文件。这些需要与它们在原始 DN jar 中的位置相同（从 jar 的根目录）。如果您解压缩然后重新打包它们，您将需要从 DN jar 中合并任何 plugin.xml 和 META-INF/MANIFEST.MF ...所有信息，而不仅仅是其中的一些信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-11-20T01:16:20.297

为了在需要单个 jar 的 Apache Storm 拓扑中使用 DataNucleus 4.x，我不得不做两次 hack 以保持他们的 PluginRegistry 东西正常工作。问题是 DataNucleus 核心尝试将模块加载为 OSGi 包，即使它没有在 OSGi 容器中运行。只要 jar 没有被合并（我不希望合并我的依赖项，但这对我来说不是一个选项），它就可以正常工作。

首先，我将所有 plugin.xml 文件合并到 datanucleus-core plugin.xml 中。诀窍是扩展点 id 是相对于其父插件的 id 的。因此，如果您使用的任何模块定义了新的扩展点，例如 datanucleus-rdbms，您必须重写 id，以便它们与新的父插件相关。

其次，我在 jar 的 MANIFEST.MF 中添加了以下条目：

```
Premain-Class: org.datanucleus.enhancer.DataNucleusClassFileTransformer
Bundle-SymbolicName: org.datanucleus;singleton:=true 
```

这个解决方案并不理想，因为我们的应用程序本质上是在伪装成 DataNucleus 核心 OSGi 包。然而，这就是我在休息几天后把头砸在桌子上的结果。

可能可以提供不同的 PluginRegistry 实现，但我还没有研究过。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-13T08:02:16.667

添加到 DataNucleus 答案。
为了满足您的需要，您应该使用**maven-dependency-plugin**
并将以下内容添加到您的 pom.xml

```
<build>
    <plugins>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-dependency-plugin</artifactId>
            <version>2.4</version>
            <executions>
                <execution>
                    <id>copy-dependencies</id>
                    <phase>package</phase>
                    <goals>
                        <goal>copy-dependencies</goal>
                    </goals>
                    <configuration>
                        <outputDirectory>${project.build.directory}/jars</outputDirectory>
                        <overWriteReleases>false</overWriteReleases>
                        <overWriteSnapshots>false</overWriteSnapshots>
                        <overWriteIfNewer>true</overWriteIfNewer>
                    </configuration>
                </execution>
            </executions>
        </plugin>
    </plugins>
</build> 
```

然后依赖项将在*target/jars*目录中。

要执行您的应用程序，请使用命令：

Windows：
*java -cp "yourFile.jar;jars/*" package.className*

Linux：
*java -cp "yourFile.jar:jars/*" package.className*

注意：不要使用 jars/* .jar，这不起作用

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-06-28T20:12:27.830

对于其他努力合并 datanucleus plugin.xml 文件的人，我使用以下代码来提供帮助。使用此命令从 3 个单独的 datanucleus plugin.xml 文件中传输内容，这将告诉您哪里有明确需要合并的扩展：

`cat plugin_core.xml plugin_rdbms.xml plugin_api.xml | grep -h "extension point" | tr -d "[:blank:]"| sort | uniq -d`

更多详细信息在[单独的帖子](https://stackoverflow.com/questions/62414127/apache-spark-project-with-single-executable-jar-with-datanucleus/62627698#62627698)中。

# java - 如何通过 Java 将二进制数据从 AS3 发送到文件系统？

> ID：10096774
> 
> 赞同：1
> 
> 时间：2012-04-10T21:34:01.660
> 
> 标签：java, actionscript-3, google-app-engine, servlets, google-cloud-storage

我在 AS3 中有需要压缩的 XML 数据，在我的 Java Google App Engine servlet 上进行验证，然后保存到 Google Cloud Storage 中的文件中。稍后，该文件将由 AS3 客户端打开并解压缩。如果我使用纯 XML 或文本执行此过程，则该过程有效，但如果我使用 ByteArray#compress 数据，它会在 ByteArray#uncompress 期间因“解压缩数据时出错”而死。

我已经尝试在不同的点设置内容类型和 mime 类型，以及使用 Base64 进行编码，但每次尝试似乎都以不同的方式中断，我从来没有收到与我发送的相同的 XML。我需要使用多部分？我应该在服务器上压缩吗？这样做的最佳做法是什么？

从 AS3 发送数据：

```
// compress xml using zlib
var xml:XML = <contents><thing>value</thing></contents>;
var bytes:ByteArray = new ByteArray();
bytes.writeObject(xml);
bytes.position = 0;
bytes.compress();

var request:URLRequest = new URLRequest(url);
var urlVariables :URLVariables = new URLVariables();
urlVariables.filename = "somefile.bin";
urlVariables.contents = bytes;
request.data = urlVariables;
request.method = URLRequestMethod.POST;
loader = new URLLoader();
loader.load(request); 
```

在 Java servlet 中接收它并创建文件：

```
public void doPost(HttpServletRequest req, HttpServletResponse resp) throws IOException {
    String filename = req.getParameter("filename");
    byte[] contents = req.getParameter("contents").getBytes();

    GSFileOptionsBuilder optionsBuilder = new GSFileOptionsBuilder()
        .setBucket("bucketname")
        .setKey(filename)
        .setAcl("public-read")
        .setMimeType("binary/octet-stream");
    AppEngineFile writableFile = fileService.createNewGSFile(optionsBuilder.build());
    boolean lockForWrite = true;
    FileWriteChannel writeChannel = fileService.openWriteChannel(writableFile, lockForWrite);
    writeChannel.write(ByteBuffer.wrap(contents));
    writeChannel.closeFinally();
} 
```

在 AS3 中打开新文件：

```
var url :String = "http://commondatastorage.googleapis.com/bucketname/somefile.bin";
var request:URLRequest = new URLRequest(url);
request.method = URLRequestMethod.GET;
loader = new URLLoader();
loader.addEventListener(Event.COMPLETE, handleComplete);
loader.load(request);

protected function handleComplete (event:Event):void {
    var bytes:ByteArray = new ByteArray();
    bytes.writeObject(event.target.data);

    // dies on this line with "There was an error decompressing the data."
    bytes.uncompress();

    var xml:XML = new XML(new String(bytes));
    trace(xml);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T22:43:16.577

这是我用来保存 xml 的代码。我将数据发送到 PHP，但我认为它对您的工作方式相同......我没有遇到任何问题。

```
var createXMLURL:URLRequest = new URLRequest("createXML.php");
createXMLURL.method = URLRequestMethod.POST;
var Variables:URLVariables = new URLVariables();
Variables.xmlString = xml.toXMLString();
Variables.filename = filename;
createXMLURL.data = Variables;
var loader:URLLoader = new URLLoader();
loader.dataFormat = "VARIABLES";
loader.addEventListener(Event.COMPLETE, xmlCreated);
loader.load(createXMLURL); 
```

如果您对某些变量有任何疑问，请告诉我，因为我没有包含它们的声明（我认为它们很容易弄清楚）。

现在这不会像您要求的那样以二进制格式发送该数据，但是我不知道为什么如果您确实需要原始字节，那么一旦您在 java 中收到它就无法将字符串转换为二进制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T16:15:59.877

如果来自客户端，我会在您 POST 之前进行 base64 编码，以这种方式将其存储在 TextProerty 中，然后在客户端收到返回时进行 base64 解码/解压缩。如果你想将它作为二进制存储在 GAE 上，那么 base64 将它解码成一个 Blob。以下是我使用您的代码拼凑的一些代码片段，以及我使用 HttpService 所做的类似事情——提前道歉，因为没有进行广泛的校对。HTH。

```
private var _serviceHttp:HTTPService = new HTTPService;

private function postBytes():void {
    var xml:XML = <contents><thing>value</thing></contents>;
    var bytes:ByteArray = new ByteArray();
    bytes.writeObject(xml);
    bytes.position = 0;
    bytes.compress();
    var enc:Base64Encoder = new Base64Encoder();
    enc.encodeBytes(bytes, 0, bytes.length);
    var myObj:Object = new Object();
    myObj["bytes"] = enc.toString();
    // myObj["other_variables"] = your_other_varaibles;
    _serviceHttp.method = "POST";
    _serviceHttp.resultFormat = "flashvars";
    _serviceHttp.url = your_url_here;
    _serviceHttp.addEventListener(ResultEvent.RESULT, urlHandler);
    _serviceHttp.addEventListener(FaultEvent.FAULT, urlErrorHandler);
    _serviceHttp.send(myObj);
} 
```

# c# - c#静态构造函数中的竞争条件

> ID：10096776
> 
> 赞同：5
> 
> 时间：2012-04-10T21:34:06.377
> 
> 标签：c#, race-condition, static-constructor

我正在和一个朋友辩论，他说静态构造函数可以让位于竞争条件，因为静态构造函数可以被多次调用。似乎这只能发生在大容量多线程环境中。这甚至可能吗？

我找不到任何文件来证明他错了。有人对此有任何见解吗？

谢谢！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-10T21:35:18.527

> 这甚至可能吗？

不会。CLR 会为您处理这个问题，并防止静态构造函数被多次调用。

这在 C# 语言规范中多次说明。例如，第 3.1 节规定：

> 每个应用程序域最多运行一次类型的静态构造函数。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-10T21:37:21.867

每个 AppDomain 只调用一次静态构造函数。
ECMA-335 规定 CLI 应保证：

> “对于任何给定的类型，类型初始化程序应只执行一次，除非用户代码显式调用。”

而且我还没有听说过在 C# 中调用类型初始值设定项的便捷方法。

如果您在类型初始化程序之间创建循环依赖关系，您只会遇到问题。
有关该问题的有趣文章，请参见此处：
[https](https://msmvps.com/blogs/jon_skeet/archive/2012/04/07/type-initializer-circular-dependencies.aspx) ://msmvps.com/blogs/jon_skeet/archive/2012/04/07/type-in​​itializer-circular-dependencies.aspx ）

# java - 设置 Solr 的最佳方法（Ant vs Maven）？

> ID：10096777
> 
> 赞同：3
> 
> 时间：2012-04-10T21:34:07.793
> 
> 标签：java, maven, ant, solr

我有一个当前使用 ant 构建的项目，它通过 git 将 Solr 的最新主干版本拉入，然后通过 ant 构建。在这一点上，我已经习惯了 Maven 及其依赖系统，并且发现我们旧的 ant 做事方式非常混乱且难以维护。话虽如此，基本上我似乎在网上看到的所有地方，人们都在用 Ant 构建 solr，而我发现的一些使用 Maven 做事的教程都与[这个类似](http://uomesh.blogspot.com/2011/11/building-solr-as-maven-project.html)，这似乎不起作用。

因此，需要明确的是，我在这里寻找的只是一种在 Eclipse 中开发项目并能够部署它的干净方法。我敢肯定，以前一定有人这样做过，并且必须有一个很好的答案。我真的很想听听。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T15:45:58.980

我刚刚通过将所有依赖项放入 Maven 中，为 Solr 4.0-SNAPSHOT 的挂钩版本创建自己的 repo，将 web.xml 从中复制到 src/main/webapp/WEB-INF/ 中，并通过 mvn 运行它来工作jetty:run 使用作为参数传入的显着变量：

```
mvn jetty:run -Dsolr.dataDir="./solr-data" -Dsolr.master-host="localhost" -Dsolr.solr.home="./solr-home" 
```

官方不支持此方法，但这意味着我不再需要为丑陋的 ant 配置或将所有 Lucene 和 Solr 保存在附加到我的项目的 git repos 中，所以我可以从它们构建。这也意味着更改/更新版本只需要在我的 pom.xml 中进行一行更改，而不是挖掘和切换一大堆无关的配置。我很高兴，一旦我对 Solr 应该如何工作有了更好的感觉，重新配置项目真的没那么糟糕。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T22:01:29.217

这个答案可能更多是评论，但评论太小而无法全部暴露。

我对 Solr 一无所知，但从中立的角度来看，我会说你有两个选择：

1.  Mavenize Solr（看起来像您的文章所建议的）。也许您可以就使用他们的解决方案遇到的问题发布另一个问题。
2.  使用 maven-antrun-plugin 调用原始 ant 任务。这也可能需要附加构建的 jars（或者如果它只包含类/资源，请先将它们 jar）。您可以决定使用 maven-install-plugin 在本地安装它们，或者使用 maven-build-helper-plugin 附加它们。

在 Eclipse 中，有很多技巧可以访问构建的文件。您可以简单地将项目添加为依赖项。

第二个选项应该可以，但我觉得它不是很干净

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-11T07:30:01.660

如果您愿意，您应该能够使用 Maven，我知道一些 Solr 开发人员会这样做。看看这里：[http](http://wiki.apache.org/solr/HowToContribute#Maven) ://wiki.apache.org/solr/HowToContribute#Maven 。虽然这不是最受支持的方式，但我无法帮助您，因为我从未尝试过。

我实际上与 Solr + Ant 一起工作，基本上每件事都有一个任务：`ant test`，`ant dist`等等。我同意这有点过时，但它有效。最近，构建有了很大改进，引入了 Ivy 作为依赖管理工具，以便从源代码树中删除所有 jar。

如果您对 ant 有一些具体问题，请告诉我，也许我可以为您提供更多帮助。

# powershell - 在 PowerShell 模块中设置属性

> ID：10096785
> 
> 赞同：7
> 
> 时间：2012-04-10T21:34:41.397
> 
> 标签：powershell, powershell-2.0

我有一个名为 Test.psm1 的 PowerShell 模块。我想在一个变量上设置一个值，并且当我在该模块中调用另一个方法时可以访问它。

```
#Test.psm1
$property = 'Default Value'

function Set-Property([string]$Value)
{
     $property = $Value
}

function Get-Property
{
     Write-Host $property
}

Export-ModuleMember -Function Set-Property
Export-ModuleMember -Function Get-Property 
```

从 PS 命令行：

```
Import-Module Test
Set-Property "New Value"
Get-Property 
```

此时我希望它返回“新值”，但它正在返回“默认值”。我试图找到一种方法来设置该变量的范围，但没有任何运气。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-10T22:18:23.467

杰米是正确的。在您的示例中，在第一行中，`$property = 'Default Value'`表示文件范围的变量。在`Set-Property`函数中，当您分配时，您分配给在函数外部不可见的局部范围变量。最后，在 中`Get-Property`，由于没有同名的本地范围变量，因此读取了父范围变量。如果您将模块更改为

```
#Test.psm1
$property = 'Default Value'

function Set-Property([string]$Value)
{
         $script:property = $Value
}

function Get-Property
{
         Write-Host $property
}

Export-ModuleMember -Function Set-Property
Export-ModuleMember -Function Get-Property 
```

根据 Jamey 的示例，它会起作用。请注意，您不必在第一行使用范围限定符，因为默认情况下您处于脚本范围内。此外，您不必在 Get-Property 中使用范围限定符，因为默认情况下将返回父范围变量。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-10T21:59:43.580

你在正确的轨道上。在访问 $property 时，您需要强制模块中的方法使用相同的范围。

```
$script:property = 'Default Value'
function Set-Property([string]$Value) { $script:property = $value; }
function Get-Property { Write-Host $script:property }
Export-ModuleMember -Function * 
```

有关更多信息，请参阅[about_Scopes](http://technet.microsoft.com/en-us/library/dd315289.aspx)。

# facebook-graph-api - 如何在新闻提要的图库视图中显示打开的图形对象？

> ID：10096788
> 
> 赞同：1
> 
> 时间：2012-04-10T21:34:59.653
> 
> 标签：facebook-graph-api, facebook-opengraph, feed

我将 Facebook Open Graph 与一个名为“订单”的已批准操作一起使用。当我们的用户在网站上进行购买时，我们会在时间线和新闻提要中发布他们购买的内容。我选择了聚合中的画廊视图。它在时间线中正确显示，但在新闻提要中显示不正确。在新闻源中，产品在列表视图中。我的猜测是我将产品页面的 url 传递回 facebook，因此它显示为项目列表，而不仅仅是图片。什么是让产品以画廊形式出现在新闻提要中的正确方法，比如 pinterest 或 instagram？

这是我发布产品的代码

```
purchase.products.each do |product|
  graph_api.put_connections("me", "#{namespace}:order?product=#{product_url(product)}")
end 
```

谢谢

# php - URL 重写 - 仅适用于数字

> ID：10096789
> 
> 赞同：2
> 
> 时间：2012-04-10T21:35:17.807
> 
> 标签：php, apache, .htaccess, url

我实际上正在为学校工作，我尝试使用 .htaccess 创建 URL 重写。

所以这是我的 .htaccess 中的代码

```
Options +FollowSymlinks
RewriteEngine on
RewriteRule profile/([0-9]+) profile/index.php?id=$1 [L]
RewriteRule profile/([a-zA-Z]+) profile/index.php?username=$1 [L] 
```

我尝试使用 ID 或用户名创建重写，如果我删除最后一行，我的代码适用于数字，但如果用户名永远无法使用。我不太擅长 url 重写，暂时学习。但是有没有可能做到这一点？

如果可能的话，我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T21:38:22.403

```
Options +FollowSymlinks
RewriteEngine on
RewriteRule profile/([0-9]+)$ profile/index.php?id=$1 [L]
RewriteRule profile/([a-zA-Z]+)$ profile/index.php?username=$1 [L] 
```

你忘了美元。

# xcode - 从 UIView 继承的 xcode 新类不会创建 XIB 文件

> ID：10096790
> 
> 赞同：1
> 
> 时间：2012-04-10T21:35:17.927
> 
> 标签：xcode

我正在创建一个继承自 UIView 的新类。我记得 xcode 3 有一个复选框，可以选择创建附加到该类的 XIB，但我在 xcode 4 中看不到它。我完成了对话框，最终得到的是我的新类（.h 和.m 文件）但不是 xib。

我究竟做错了什么 ？

谢谢，丹尼尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T21:50:16.090

您必须输入一个支持 xib 的子类：

![在此处输入图像描述](../Images/be71a9562cd7e13adccc8d9e7d482f1b.png)

否则复选框被禁用： ![在此处输入图像描述](../Images/437398eef4139fff7a828c75533d2456.png)

# jquery - Jquery UI 滑块显示错误

> ID：10096799
> 
> 赞同：0
> 
> 时间：2012-04-10T21:36:13.853
> 
> 标签：jquery, asp.net-mvc-3, jquery-ui

嗨，人们在 MVC3 中遇到问题，我的 jquery 滑块在我需要滑块的地方显示以下错误：

```
[object Object] 
```

滑块不可见，我添加的 jquery 脚本如下：

```
<script type="text/javascript">

    $(function () {
        $("#slider-range-max").slider({
            range: "max",
            min: 1,
            max: 10,
            value: 2,
            slide: function (event, ui) {
                $("#Score").val(ui.value);
            }
        });
        $("#Score").val($("#slider-range-max").slider("value"));
    });
    </script> 
```

在我看来，它指的是这个领域：

```
 <div class="editor-label">
        @Html.LabelFor(model => model.Score)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.Score)
        @Html.ValidationMessageFor(model => model.Score)
    </div> 
```

我已将以下 jquery 脚本添加到我的视图中：

```
<script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery-1.5.1.min.js")" type="text/javascript"</script>
<link href="../../Content/themes/base/jquery.ui.all.css" rel="stylesheet" type="text/css"/>
<script src="../../Scripts/jquery-ui-1.8.11.min.js" type="text/javascript"></script>
<script src="../../Scripts/jquery.ui.core.js" type="text/javascript"></script>
<script src="../../Scripts/jquery.ui.widget.js" type="text/javascript"></script>
<script src="../../Scripts/jquery.ui.slider.js" type="text/javascript"></script>
<script src="../../Scripts/jquery.ui.mouse.js" type="text/javascript"></script>
<script src="../../Scripts/modernizr-1.7.js" type="text/javascript"></script> 
```

如果您需要其他信息，请询问我，谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T00:17:37.273

首先，您需要添加以下 jquery 脚本：

```
<link rel="stylesheet" href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.16/themes/base/jquery-ui.css" type="text/css" media="all" />
<link rel="stylesheet" href="http://static.jquery.com/ui/css/demo-docs-theme/ui.theme.css" type="text/css" media="all" />
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js" type="text/javascript"></script>
<script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.16/jquery-ui.min.js" type="text/javascript"></script>
<script src="http://jquery-ui.googlecode.com/svn/tags/latest/external/jquery.bgiframe-2.1.2.js" type="text/javascript"></script>
<script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.16/i18n/jquery-ui-i18n.min.js" type="text/javascript"></script> 
```

其次将此添加到您的视图中：

```
<script type="text/javascript">
    $(function() {
        $( "#slider-range-max" ).slider({
            range: "max",
            min: 1,
            max: 10,
            value: 2,
            slide: function( event, ui ) {
                $("#PutYourValueHere").val(ui.value);
            }
        });
$("#PutYourValueHere").val($("#slider-range-max").slider("value"));
    });
    </script> 
```

上面显示的 PutYourValueHere 与 model.PutValueHere 相对应。

```
 @Html.EditorFor(model => model.PutYourValueHere) 
```

按照这些步骤应该可以工作。

# jquery - 如何使用 on() 复制 jQuery live() stopPropagation 覆盖

> ID：10096805
> 
> 赞同：0
> 
> 时间：2012-04-10T21:36:38.140
> 
> 标签：jquery

我知道这是一个骇人听闻的问题，但基本上我想利用 live() 的一个缺陷，但不希望我的代码因使用它而过时，因为它已被弃用。

这是我的情况：

我在 Wordpress 中使用 Aloha 编辑器。我想要做的是在编辑器处于活动状态并单击图像时在图像上启动一些额外的功能。

问题是 Aloha 停止传播围绕图像的链接的点击。通过使用 live() 我可以覆盖它，就像我使用 on() 它遵守停止传播一样。我不想使用已弃用的代码，所以有谁知道我可以如何让 on() 也忽略这个停止传播？

我认为在 jQ notes for live() 中有一条线索

> 在事件处理程序中调用 event.stopPropagation() 对停止附加在文档下方的事件处理程序无效；该事件已经传播到文档。

所以我认为我需要对 on() 做同样的事情，但只是不知道该怎么做。我想我可能应该对 Aloha 进行一些更改，但它如此庞大，有点吓人。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-04-21T10:35:42.540

这将覆盖 event.stopPropagation() `document.querySelector('#adv_search_i').addEventListener('click', function(e){ //code });`

# android - Android - 活动/片段捆绑中的额外参数数量

> ID：10096808
> 
> 赞同：0
> 
> 时间：2012-04-10T21:36:53.043
> 
> 标签：android, android-intent, arguments, bundle

在创建新活动或片段时，可以在`Bundle`/中发送任意数量的原始数据吗？`Intent`关于可以使用 bundle 传递的参数数量是否有任何警告？

每次我向现有活动或片段添加功能时，如果它简化了问题，我只需在包中添加另一个原始数据类型并在其中处理它。我不确定这是否是个好主意。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T21:44:39.427

谷歌组中有一个类似的帖子，由 Android 框架工程师回答，声称 1MB [https://groups.google.com/forum/#!topic/android-developers/KKEyW6XdDvg/discussion](https://groups.google.com/forum/#!topic/android-developers/KKEyW6XdDvg/discussion)也看到类似的[SO](https://stackoverflow.com/questions/8552514/is-there-some-limits-in-android-bundle)帖子。

# javascript - 编码 DRY 如何结合这两个对象中的通用功能？

> ID：10096817
> 
> 赞同：0
> 
> 时间：2012-04-10T21:37:50.157
> 
> 标签：javascript

DRY - 不要重复自己

ControlSignUp 和 ControSignIn 几乎相同。我在仅有的 4 行不同的地方评论了“这里”。我怎样才能结合这个常见的功能？

实际上这似乎很明显......我可以通过构造函数传入一个变量......只需一秒钟。

回答：

```
 /**
 *      ControlSign
 */

var ControlSign = function( type ) 
{
    var form_element = document.getElementById( type ); 
    var response_element = document.getElementById( type + '_response' ); 
    var text_object = new Text( form_element );
    var message_object = new Message( response_element );

    this.invoke = function( ) 
    {
        if( Global.validate_input_on === 1 )
        {
            if( !text_object.checkEmpty() ) 
            {
                message_object.display( 'empty' );
                return false;
            }
            if( type === 'signup' && !text_object.checkPattern( 'name' ) ) 
            {
                message_object.display( 'name' );
                return false;
            }
            if( !text_object.checkPattern( 'email' ) ) 
            {
                message_object.display( 'email' );
                return false;
            }
            if( !text_object.checkPattern( 'pass' ) ) 
            {
                message_object.display( 'pass' );
                return false;
           }
        }
        AjaxNew.repeatUse( ajaxSerialize( form_element ) + '&ajax_type=' + type + '_control', function( server_response_text ) { ajaxType( server_response_text, response_element, 'respond' ); } );
    }
};

ControlSign.in = function()
{
    new ControlSignIn( 'signin' ).invoke();
};
ControlSign.up = function()
{
    new ControlSignUp( 'signup' ).invoke();
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T21:43:15.520

简单的解决方案：使它成为一个`ControlSign`带有参数的函数，用`"in"`or调用`"up"`。你可以称之为“工厂模式”。

复杂的解决方案：您使用~~工厂~~函数来创建两个构造函数。好的，我的意思是使用闭包来创建构造函数：

```
function makeControlSign(type) {
    function constructor(...) {
        this.invoke = function(){...};
        // use the variable "type" where needed
        ...
     }
     constructor[type] = function(){...};
     return constructor;
}
var ControlSignUp = makeControlSign("up");
var ControlSignIn = makeControlSign("in"); 
```

我想这既不应该被称为“工厂模式”也不应该被称为“抽象工厂模式”。

# javascript - YouTube 视频结束时隐藏 Div

> ID：10096820
> 
> 赞同：0
> 
> 时间：2012-04-10T21:37:58.493
> 
> 标签：javascript, video, youtube

我有一个绝对放置的 div，其中嵌入了 YouTube 视频。我将它放在我网站上的另一张图片上，目的是向首次访问者展示一段短视频，然后隐藏带有视频的 div 以显示页面的原始内容。

我知道如何通过点击事件隐藏和显示我的 div，但我对 Javascript 非常陌生。我需要帮助编写确定 YouTube 视频已结束并将可见性：隐藏到我的 div 的函数。任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T21:48:58.577

您需要仔细查看[文档](https://developers.google.com/youtube/js_api_reference#Events)，特别注意事件部分。

你将使用

> onStateChange：每当玩家的状态发生变化时都会触发此事件。可能的值是未开始 (-1)、结束 (0)、播放 (1)、暂停 (2)、缓冲 (3)、视频提示 (5)。首次加载 SWF 时，它将广播未启动 (-1) 事件。当视频被提示并准备好播放时，它将广播视频提示事件 (5)。

当 state 等于 0 时，你会想要做一些事情，这意味着结束，类似于下面的事情：

```
// attach your listener
    function onYouTubePlayerReady(playerId) {
      var ytplayer = getElementById("myytplayer");
      ytplayer.addEventListener("onStateChange", "onytplayerStateChange");
    }
// your callback function   
    function onytplayerStateChange(newState) {
       if (newState === 0){
            $('yourContainingDiv').hide();
            // or if you want to just remove it...
            $('yourContainingDiv').remove();
       }
    } 
```

如果您在使用 addEventListener 时遇到问题，请查看[YouTube 播放器 api - addEventListener() 对我不起作用？](https://stackoverflow.com/questions/2660914/youtube-player-api-addeventlistener-does-not-work-for-me)

addEventListener 看起来它不受早期版本的 IE 支持，并且可能有点错误

# windows-phone-7 - 需要帮助使用 VPDexpress.exe 从命令行构建 Windows Phone 7

> ID：10096821
> 
> 赞同：0
> 
> 时间：2012-04-10T21:38:07.877
> 
> 标签：windows-phone-7, jenkins, visual-studio-express

我有一个关于使用 VPDexpress.exe 通过命令行构建 Windows Phone 7 的问题

我通过以下方式调用 VPDexpress：

VPDexpress.exe solutions_file.sln" /build "Release" /log "C:\build_log.txt"

问题：如何通过命令行获得有关构建过程的反馈（警告/失败等），与我在 Visual Studio Express 中获得的反馈相同？我如何验证 /build "Release" 确实在构建正确的配置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T22:01:23.283

在该命令之后，您可以执行`cat C:\build_log.txt`并查看构建输出。

# php - 合并 MySQL 查询的结果

> ID：10096822
> 
> 赞同：0
> 
> 时间：2012-04-10T21:38:08.090
> 
> 标签：php, mysql

我会尽力设置场景。***点燃蜡烛**

我想要实现的是这个

1.  搜索`image_likes`以查看用户是否喜欢任何图像，然后将它们包含在下一个查询中。
2.  抓取`images`该用户上传的所有图像。
3.  显示两个结果以及 ORDER BY `id`DESC。

当涉及到包含不同的表结果时，我在 MySQL 上很糟糕，所以我希望我已经包含了足够的信息。如果您需要，请告诉我。

**表结构**

`image_likes`

编号 | 用户 ID | image_id

`images`

编号 | 上传者 ID | 日期

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T23:22:44.633

您真的应该尝试掌握 JOIN。你会不断地编写糟糕的代码，并设计糟糕的数据库来解决不知道如何使用它们的问题。

```
SELECT *
FROM images
LEFT JOIN image_likes ON image_likes.image_id = images.id
WHERE image_likes.user_id = $my_id
OR images.creator_id = $my_id
ORDER BY images.id DESC 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-10T22:06:14.923

1：

```
SELECT * FROM Image_Likes WHERE User_Id = x ORDER BY Id DESC 
```

2：

```
SELECT * FROM Images WHERE Uploader_Id = x ORDER BY Id DESC 
```

3：（一起）

```
SELECT L.*, I.* FROM Image_Likes L LEFT JOIN Images I ON L.Image_id = I.Id WHERE L.User_ID = x  ORDER BY I.Id DESC 
```

将 x 替换为用户 ID

# sql - 如何显示前几行的值

> ID：10096823
> 
> 赞同：4
> 
> 时间：2012-04-10T21:38:09.873
> 
> 标签：sql, sql-server, tsql, sql-server-2008

我有两个表，我正在努力编写一个生成我需要的结果的查询。

**表格1**

```
CREATE TABLE [Table 1](
    [ID] [int] NOT NULL,
    [Active_Status] [char](1) NOT NULL,
    [Status Change Date] [date] NOT NULL
)

INSERT INTO [Table 1] VALUES (1,'Y','2000-01-15')
INSERT INTO [Table 1] VALUES (1,'N','2003-01-20')
INSERT INTO [Table 1] VALUES (2,'N','2002-01-25')
INSERT INTO [Table 1] VALUES (2,'Y','2003-01-15')
INSERT INTO [Table 1] VALUES (2,'N','2010-01-20')
INSERT INTO [Table 1] VALUES (3,'Y','2005-01-25')
INSERT INTO [Table 1] VALUES (3,'Y','2007-01-20')
INSERT INTO [Table 1] VALUES (3,'N','2011-01-15') 
```

**表 2**

```
CREATE TABLE [Table 2](
    [ID] [int] NOT NULL,
    [Decision] [varchar](4) NOT NULL,
    [Decision Change Date] [date] NOT NULL
)

INSERT INTO [Table 2] VALUES (1,'BUY' ,'2000-05-15')
INSERT INTO [Table 2] VALUES (1,'SELL','2010-05-20')
INSERT INTO [Table 2] VALUES (1,'SELL','2012-05-25')
INSERT INTO [Table 2] VALUES (2,'HOLD','2004-05-15')
INSERT INTO [Table 2] VALUES (2,'BUY' ,'2011-05-10')
INSERT INTO [Table 2] VALUES (3,'SELL','2008-05-15')
INSERT INTO [Table 2] VALUES (3,'BUY' ,'2011-05-25') 
```

**我想要的输出**

![结果表](../Images/217e3d0c01a384a667e933690b0ee6f7.png)

首先，我需要按`ID`and对结果表进行排序`Decision Change Date`。随后我需要查找`Active_Status`相应的`Decision Change Date`.

同样，我需要显示上一时期的`Active_Status`and `Decision`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T23:08:00.150

在聊天后进行最终编辑以获得最终解决方案：

```
DECLARE @Result TABLE
(   
  TICKR_SYMB VARCHAR (15) NOT NULL
  ,fromReviewStatus char(10)
  ,toReviewStatus char(10)
  ,ReviewStatusChangeDate DATETIME
  ,fromRestrictionStatus char(10)
  ,toRestrictionStatus char(10)
  ,RestrictionStatusChangeDate DATETIME
  ,fromCoverageStatus char(10)
  ,toCoverageStatus char(10)
  ,CoverageStatusChangeDate DATETIME
  ,fromRating VARCHAR(20)
  ,toRating VARCHAR(20)
  ,RatingChangeDate DATETIME
)

/* Rating History */
;WITH DecisionsHistory AS
(
    SELECT
        ROW_NUMBER() OVER(PARTITION BY H.TICKR_SYMB ORDER BY H.[Rating Change Date]) AS Row
        ,H.TICKR_SYMB
        ,H.[to Rating] AS toRating
        ,H.[Rating Change Date]
    FROM tblTickerRatingHistory H
)
INSERT @Result
(
    TICKR_SYMB
    ,fromRating
    ,toRating
    ,RatingChangeDate
)
SELECT
     CurrentHistory.TICKR_SYMB
    ,LastHistory.toRating AS fromRating
    ,CurrentHistory.toRating
    ,CurrentHistory.[Rating Change Date]
FROM DecisionsHistory CurrentHistory
LEFT JOIN DecisionsHistory LastHistory
    ON LastHistory.Row = (CurrentHistory.Row - 1)
    AND LastHistory.TICKR_SYMB = CurrentHistory.TICKR_SYMB

/* ReviewStatus */
;WITH ReviewStatusHistory AS 
(
  SELECT
    ROW_NUMBER() OVER(PARTITION BY R.TICKR_SYMB, R.RatingChangeDate ORDER BY H.ReviewStatusChangeDate DESC) AS Row
    ,R.TICKR_SYMB 
    ,R.RatingChangeDate
    ,H.ReviewStatus AS ToReviewStatus
    ,H.ReviewStatusChangeDate
  FROM @Result R
  LEFT JOIN tblTickerStatusHistory H
    ON H.TICKR_SYMB = R.TICKR_SYMB
    AND H.ReviewStatusChangeDate < R.RatingChangeDate
)
UPDATE R
SET 
  fromReviewStatus = LastActiveHistory.toReviewStatus
  ,toReviewStatus = CurrentActiveHistory.toReviewStatus
  ,ReviewStatusChangeDate = CurrentActiveHistory.ReviewStatusChangeDate
FROM @Result R
LEFT JOIN ReviewStatusHistory CurrentActiveHistory
  ON CurrentActiveHistory.TICKR_SYMB = R.TICKR_SYMB
  AND CurrentActiveHistory.RatingChangeDate = R.RatingChangeDate
  AND CurrentActiveHistory.Row = 1
LEFT JOIN ReviewStatusHistory LastActiveHistory
    ON LastActiveHistory.TICKR_SYMB = R.TICKR_SYMB
    AND LastActiveHistory.RatingChangeDate = R.RatingChangeDate
    AND LastActiveHistory.Row = 2

/* CoverageStatus */
;WITH CoverageStatusHistory AS 
(
  SELECT
    ROW_NUMBER() OVER(PARTITION BY R.TICKR_SYMB, R.RatingChangeDate ORDER BY H.CoverageStatusChangeDate DESC) AS Row
    ,R.TICKR_SYMB 
    ,R.RatingChangeDate
    ,H.CoverageStatus AS ToCoverageStatus
    ,H.CoverageStatusChangeDate
  FROM @Result R
  LEFT JOIN tblTickerStatusHistory H
    ON H.TICKR_SYMB = R.TICKR_SYMB
    AND H.CoverageStatusChangeDate < R.RatingChangeDate
)
UPDATE R
SET 
  fromCoverageStatus = LastActiveHistory.toCoverageStatus
  ,toCoverageStatus = CurrentActiveHistory.toCoverageStatus
  ,CoverageStatusChangeDate = CurrentActiveHistory.CoverageStatusChangeDate
FROM @Result R
LEFT JOIN CoverageStatusHistory CurrentActiveHistory
  ON CurrentActiveHistory.TICKR_SYMB = R.TICKR_SYMB
  AND CurrentActiveHistory.RatingChangeDate = R.RatingChangeDate
  AND CurrentActiveHistory.Row = 1
LEFT JOIN CoverageStatusHistory LastActiveHistory
    ON LastActiveHistory.TICKR_SYMB = R.TICKR_SYMB
    AND LastActiveHistory.RatingChangeDate = R.RatingChangeDate
    AND LastActiveHistory.Row = 2

 /*RestrictionStatus */
;WITH RestrictionStatusHistory AS 
(
  SELECT
    ROW_NUMBER() OVER(PARTITION BY R.TICKR_SYMB, R.RatingChangeDate ORDER BY H.RestrictionStatusChangeDate DESC) AS Row
    ,R.TICKR_SYMB 
    ,R.RatingChangeDate
    ,H.RestrictionStatus AS ToRestrictionStatus
    ,H.RestrictionStatusChangeDate
  FROM @Result R
  LEFT JOIN tblTickerStatusHistory H
    ON H.TICKR_SYMB = R.TICKR_SYMB
    AND H.RestrictionStatusChangeDate < R.RatingChangeDate
)
UPDATE R
SET 
  fromRestrictionStatus = LastActiveHistory.toRestrictionStatus
  ,toRestrictionStatus = CurrentActiveHistory.toRestrictionStatus
  ,RestrictionStatusChangeDate = CurrentActiveHistory.RestrictionStatusChangeDate
FROM @Result R
LEFT JOIN RestrictionStatusHistory CurrentActiveHistory
  ON CurrentActiveHistory.TICKR_SYMB = R.TICKR_SYMB
  AND CurrentActiveHistory.RatingChangeDate = R.RatingChangeDate
  AND CurrentActiveHistory.Row = 1
LEFT JOIN RestrictionStatusHistory LastActiveHistory
    ON LastActiveHistory.TICKR_SYMB = R.TICKR_SYMB
    AND LastActiveHistory.RatingChangeDate = R.RatingChangeDate
    AND LastActiveHistory.Row = 2

SELECT
  R1.TICKR_SYMB
  ,R1.fromCoverageStatus
  ,R1.toCoverageStatus
  ,R1.CoverageStatusChangeDate
  ,R1.fromReviewStatus
  ,R1.toReviewStatus
  ,R1.ReviewStatusChangeDate
  ,R1.fromRestrictionStatus
  ,R1.toRestrictionStatus
  ,R1.RestrictionStatusChangeDate
  ,R1.fromRating
  ,R1.toRating
  ,R1.RatingChangeDate
FROM @Result R1
ORDER BY TICKR_SYMB, RatingChangeDate 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T22:33:45.817

这应该让你开始。

```
 create table t1 (
  id int, act char(1), scd date
  )

create table t2 (
  id int, decs varchar(4), dcd date
  )

insert into t1 values

( 1, 'y', '20000115'),
( 1, 'n', '20030120'),
( 2, 'n', '20020125'),
( 2, 'y', '20030115'),
( 2, 'n', '20100120'),
( 3,'y','20050125'),
( 3,'y','20070120'),
( 3,'n','20110115')

insert into t2 values

(1,'buy','20000515' ),
(1,'sell', '20100520' ),
(1,'sell', '20120525' ),
(2,'hold', '20040515'),
(2,'buy', '20110510' ),
(3,'sell', '20080515'),
(3,'buy','20110525' )

with decisions as (

  select row_number() over (partition by id order by dcd) as rn,
   id, decs, dcd from t2
  ),
activities as 
(
  select row_number() over (partition by id order by scd) as rn,
  id, act, scd from t1
  )

select dec_to.id, x.from_act, x.to_act, x.scd, x.from_act, x.to_act, x.scd as scd, dec_from.decs as from_dec, dec_to.decs as to_dec, dec_to.dcd from decisions dec_from
right outer join decisions dec_to on dec_from.id = dec_to.id and 
dec_to.rn = dec_from.rn + 1
outer apply (
  select top 1 act_to.id, act_from.act as from_act, act_to.act as to_act, act_to.scd
  from activities act_to
  left outer join activities as act_from
  on act_from.id = act_to.id and act_from.rn = act_to.rn - 1
  where act_to.id = dec_to.id and act_to.scd <= dec_to.dcd
  order by act_to.scd desc
) x  

order by dec_to.id, dec_to.rn 
```

是的，它很丑。如果没有适当的索引，可能不会在大型数据集上表现良好。但是您的要求是模糊的，并且您使用的关于行去哪里的规则没有多大意义。

这里的假设是您想要在决策日期或之前的“最新”活动更改行。这很好用并产生以下

```
ID  FROM_ACT    TO_ACT  SCD     FROM_DEC    TO_DEC  DCD
1           y   2000-01-15          buy 2000-05-15
1   y       n   2003-01-20  buy     sell    2010-05-20
1   y       n   2003-01-20  sell        sell    2012-05-25
2   n       y   2003-01-15          hold    2004-05-15  
2   y       n   2010-01-20  hold        buy 2011-05-10
3   y       y   2007-01-20          sell    2008-05-15
3   y       n   2011-01-15  sell        buy 2011-05-25 
```

[你可以在SQLFiddle](http://sqlfiddle.com/#!3/85a4e/4)玩它

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-01-02T22:59:30.720

您可以通过使用[`CROSS APPLY`](https://docs.microsoft.com/en-us/sql/t-sql/queries/from-transact-sql?view=sql-server-ver15)和来做到这一点[`LAG`](https://docs.microsoft.com/en-us/sql/t-sql/functions/lag-transact-sql?view=sql-server-ver15)。

```
SELECT t2.ID,
       LAG(t1.Active_Status, 1, NULL) OVER (PARTITION BY t2.ID ORDER BY t2.[Decision Change Date]) AS [From Active Status],
       t1.Active_Status AS [To Active Status], t1.[Status Change Date] AS [Active Status Change Date],
       LAG(t2.Decision, 1, NULL) OVER (PARTITION BY t2.ID ORDER BY t2.[Decision Change Date]) AS [From Decision Status],
       t2.Decision AS [To Decision Status], t2.[Decision Change Date]
FROM [Table 2] t2
CROSS APPLY (SELECT TOP 1 *
             FROM [Table 1]
             WHERE ID = t2.ID AND [Status Change Date] < t2.[Decision Change Date]
             ORDER BY [Status Change Date] DESC) t1
ORDER BY t2.ID, [Decision Change Date] 
```

# c# - 根据另一个列表从列表中获取元素

> ID：10096826
> 
> 赞同：0
> 
> 时间：2012-04-10T21:38:31.253
> 
> 标签：c#

我有两个课程，例如：

```
public class Person
{
    public long Id { get; set; }
    public string Name { get; set; }
}

public class Vampire
    {
    public long Id { get; set; }
} 
```

然后，我有两个列表，一个人员列表和一个吸血鬼列表。所有的吸血鬼都是人。

我需要的是两个儿童名单，感染者和未感染者。我正在使用 for 构建两个列表，但我知道可以使用 linq 或其他东西。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T21:40:11.993

像这样的东西：

```
var vampireIds = new HashSet<long>(vampireList.Select(x => x.Id));
var infectedPersons = personList.Where(x => vampireIds.Contains(x.Id));
var regularPersons = personList.Where(x => !vampireIds.Contains(x.Id)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T21:51:17.847

我会选择以下内容：

```
void Main()
{
    var list = new List<Person>(){ new Person(){ Id = 1 }, new Vampire(){ Id = 2 } };
    var infected    = list.Where (x => x is Vampire);
    var notInfected = list.Except(infected);
}

public class Person
{
    public long Id { get; set; }
    public string Name { get; set; }
}

public class Vampire : Person
{
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T21:41:54.527

如果只有一个人可以是吸血鬼，你可以从 Person 继承 Vampire，然后遍历所有的人，看看他们是否是吸血鬼；如果是 -> 添加到吸血鬼列表，否则添加到非吸血鬼列表。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-10T21:51:19.377

尝试这个：

```
var people = new List<Person>
             {
                 new Person {Id = 1, Name = "John"},
                 new Person {Name = "Dave", Id = 2},
                 new Person {Id = 3, Name = "Sarah"}
             };

var vamps = new List<Vampire> {new Vampire {Id = 1}};

var theInfected = people.Where(p => vamps.Select(v => v.Id).Contains(p.Id));

var theAfraid = people.Except(theInfected);

foreach (var person in theInfected)
   {
       System.Console.WriteLine(person.Name + " Is Infected!");
   }

foreach (var person in theAfraid)
  {
     System.Console.WriteLine(person.Name + " Is Afraid!");
  } 
```

希望它有帮助。

# jquery-mobile - 是否可以使用没有滑块的滑块步骤表单元素？

> ID：10096830
> 
> 赞同：0
> 
> 时间：2012-04-10T21:38:48.123
> 
> 标签：jquery-mobile, slider

我想在不需要滑块的情况下使用 jQuery Mobile 的 Slider step 元素。在保持完整功能的同时这是否可行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T01:08:14.753

# kml - 为什么 GE Plugin (6.2.1.6014) 在执行 fetchKml 但仅在 ie9 中会在刷新时崩溃

> ID：10096831
> 
> 赞同：2
> 
> 时间：2012-04-10T21:38:51.357
> 
> 标签：kml, google-earth-plugin

我一直在使用一些相当普通的 JavaScript 代码将 KML 加载到 GE 插件中。它仍然可以在 Windows 7 FireFox 和 Chrome 中正常工作，直到我升级到 IE9 才能在 IE 中工作。现在，当我重新加载页面或加载另一个类似页面时，我收到消息：“Google 地球插件出现问题......”。

我已使用 IE F12 调试器工具尝试隔离问题。它总是在我执行 fetchKml 函数以加载 kmz 文件时发生。ge 插件在执行语句时总是崩溃：

windows.earth.TermsOfUseManager.prototype.db = function(){var = ...., c=agetTermOfUseX_(),

我有一个带有屏幕抓取和其他信息的 PDF 文件。

我相信IE9和最新的GE插件之间一定有互动。

存在此问题的页面的 URL 是： [http ://reynsoft.com/Travel/Gallery/Baltic_2012/Day_2_At_Sea/Day_2_At_Sea.aspx](http://reynsoft.com/Travel/Gallery/Baltic_2012/Day_2_At_Sea/Day_2_At_Sea.aspx)

我希望有人可以提供帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-21T11:09:07.170

显然，谷歌地球插件需要明确声明 IE9 兼容模式。

```
<meta http-equiv="X-UA-Compatible" content="IE=9" /> 
```

只需从 Google Earth 文档中获取[Sample](https://developers.google.com/earth/documentation/index)并添加此行`<head>`以查看行为差异（或者，按 F12 并强制*IE9 标准*模式）。

请注意，关闭 IE10 中的“增强保护模式”没有帮助。

# c# - 解析引用的 .NET 程序集中的类型

> ID：10096832
> 
> 赞同：0
> 
> 时间：2012-04-10T21:38:52.683
> 
> 标签：c#, .net, compiler-errors, assembly-resolution, .net-client-profile

我无法在单独的程序集中引用某些类型。奇怪的是，当我在对象模型中浏览引用的程序集时，我可以看到我在那里寻找的类型。但是当我尝试引用该类型时，编译器会给我“找不到类型或命名空间名称”。

更奇怪的事实：

*   我可以在同一个程序集和命名空间中引用另一种类型
*   我可以从另一个程序集中引用缺少的类型（一个 MVC 项目，有问题的项目是 C# Windows 服务）

有谁知道会发生什么？

**更新**

我刚刚注意到，如果我删除依赖库引用，他们重新添加它，类型引用会立即解析。但是，当我尝试构建依赖项目时，它再次说找不到引用。

这是课程

*依赖库项目*

```
namespace LibProject
{
    public class HelloWorld {}
} 
```

*依赖项目*

```
namespace MyProject
{
    public class HelloTest
    {
        LibProject.HelloWorld test;   // Type or namespace name could not be found
    }
} 
```

**结束更新**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T22:12:57.533

Which framework are you targeting? I had a similar problem once where the class wasn't in the Client Profile, but it was in the full framework (same version number, sans "Client Profile").

# c++ - 是否有连接到设备的 GDB 用户界面？

> ID：10096833
> 
> 赞同：0
> 
> 时间：2012-04-10T21:38:53.463
> 
> 标签：c++, gdb, remote-debugging, embedded-linux

我在我的 PC 上使用 GDB 连接到我的设备（使用 iMX51）上的 GDBServer，我可以正常调试。但是我听说过的任何 GDB UI（例如在[C++ gdb GUI](https://stackoverflow.com/questions/79023/c-gdb-gui)中）都可以用于此目的吗？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T22:38:09.870

您可以使用 Eclipse 使用 GDB 进行远程调试。

大致流程如下：

1.  首先安装 Eclipse CDT。
2.  为 C/C++ 插件安装 C/C++ GNU 工具链调试支持和 Eclipse 调试器。
3.  为您的项目创建调试配置（运行->调试配置）
4.  指向交叉编译器的 GDB 可执行文件（例如，如果您使用的 CodeSourcery 将是 bin/xxxx-gdb ）。
5.  在调试器选项卡中选择“gdbserver”并输入远程目标详细信息。
6.  创建一个 gdb init 命令文件来设置您的 sysroot、库路径，并使用 file 命令将 gdb 指向您的可执行文件。

如果您使用 Eclipse 搜索远程 gdb 调试，您将能够找到更多信息。

# python - pop3 连接是否超时？

> ID：10096834
> 
> 赞同：1
> 
> 时间：2012-04-10T21:38:55.050
> 
> 标签：python, pop3, poplib

我正在使用 python [poplib](http://docs.python.org/library/poplib.html#poplib.POP3)。

一段时间不活动后 POP3 连接是否超时？有没有办法设置这个超时？这样的超时是否会导致标记为删除的电子邮件被删除，就像调用了 quit() 一样？

我看到提到的唯一超时是指连接尝试超时

```
class poplib.POP3(host[, port[, timeout]]) 
```

我的 POP3.quit() 调用抛出了一个带有“超时”消息的 poplib.error_proto 异常，我想知道连接是否会自行超时。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T21:46:20.787

> 一段时间不活动后 POP3 连接是否超时？

这主要取决于另一端的服务器软件。某些套接字库可能允许您指定本地超时。连接将在本地和远程超时之间最短的时间超时。

> 有没有办法设置这个超时？

除非您控制服务器软件设置（例如，您运行自己的服务器），否则您无法更改远程超时。

> 这样的超时是否会导致标记为删除的电子邮件被删除，就像调用了 quit() 一样？

超时行为通常与手动关闭套接字（有或没有关闭）相同。如果您不发送退出命令，消息将不会从服务器中删除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T21:50:43.600

POP3 是一种事务性的。所以如果你从服务器下载并删除一条消息，直到你优雅地关闭连接后它才会生效。POP3.quit [()](http://docs.python.org/release/2.6.5/library/poplib.html#poplib.POP3.quit)方法对其进行了深入的描述。神奇的词是**commit**。

连接超时通常是服务器设置，当然，当服务器超时连接时，它被认为是*回滚*。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-04-10T21:45:11.283

是的，POP3 套接字最终会超时。看这里，你在构造函数中传递了超时。

[http://docs.python.org/library/poplib.html](http://docs.python.org/library/poplib.html)

```
class poplib.POP3(host[, port[, timeout]]) 
```

# android - TextView 抛出显示字符串资源的设计器错误

> ID：10096835
> 
> 赞同：0
> 
> 时间：2012-04-10T21:38:55.080
> 
> 标签：android, embedded-resource

在使用默认布局的 Eclipse 中处理一个新的 Android 项目时，我发现了一种行为，我确信该行为已记录在案……某处……但我无法确定在哪里。

当 strings.xml "hello" 资源包含如下所示的字符串时：

```
 <string name="hello" 
    formatted="false">@BrandingName: Branding phrase ending with @
    </string> 
```

Eclipse 设计器抛出 ArrayIndexOutOfBounds 解析资源值。我认为这是因为它不知道如何正确转义“@BrandingName:”的某些部分？使用 TextView 正确显示此内容的方法是什么？

作为参考，TextView 节点如下所示：

```
 <TextView
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="@string/hello" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T21:56:08.587

尝试使用实体而不是 '@' - @

而且，如果你想为你的字符串设置一个格式，你可以像这样使用 CDATA：

```
<string name="hello"><![CDATA[ @BrandingName: Branding phrase ending with @ ]]></string> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T17:05:35.423

以“@”开头的字符串资源会导致设计器出错。前导空格将防止该错误。前导空格似乎未在 TextView 中呈现。

# html - 页面加载时始终选中 HTML 复选框

> ID：10096836
> 
> 赞同：0
> 
> 时间：2012-04-10T21:39:01.100
> 
> 标签：html, checkbox

如何在 HTML 中将复选框设置为未选中？我试过这些，它总是按检查加载

```
 <input id="chkBox" checked type="checkbox" />
  <input id="chkBox" checked=false type="checkbox" />
  <input id="chkBox" checked="false" type="checkbox" /> 
```

我可以通过 javascript 修改选中的属性。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-10T21:40:32.607

您根本不做任何事情，默认情况下未选中。

```
<input id="chkBox" type="checkbox" /> 
```

# ruby-on-rails - Heroku NoMethodError - 回形针

> ID：10096841
> 
> 赞同：0
> 
> 时间：2012-04-10T21:39:32.290
> 
> 标签：ruby-on-rails, heroku, paperclip

**编辑2~**

大家好，

我通过根据[这个](http://codeglot.com/posts/68-upoading_pictures_to_apps_on_heroku)更改我的模型文件解决了我以前的新错误。我不知道为什么，但它解决了它。我现在有这个错误要处理。: |

没有钥匙？我的控制器中的方法。我需要包括它吗？如果是这样，怎么做？

```
NoMethodError in ProductPhotosController#index

undefined method `key?' for nil:NilClass
Rails.root: /Users/cj3kim/Desktop/rails_projects/chocosite 
```

这是完整的跟踪：

```
actionpack (3.2.2) lib/action_controller/metal/hide_actions.rb:36:in `visible_action?'
actionpack (3.2.2) lib/action_controller/metal/hide_actions.rb:18:in `method_for_action'
actionpack (3.2.2) lib/action_controller/metal/implicit_render.rb:14:in `method_for_action'
actionpack (3.2.2) lib/action_controller/metal/compatibility.rb:61:in `method_for_action'
actionpack (3.2.2) lib/abstract_controller/base.rb:115:in `process'
actionpack (3.2.2) lib/abstract_controller/rendering.rb:45:in `process'
actionpack (3.2.2) lib/action_controller/metal.rb:203:in `dispatch'
actionpack (3.2.2) lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
actionpack (3.2.2) lib/action_controller/metal.rb:246:in `block in action'
actionpack (3.2.2) lib/action_dispatch/routing/route_set.rb:67:in `call'
actionpack (3.2.2) lib/action_dispatch/routing/route_set.rb:67:in `dispatch'
actionpack (3.2.2) lib/action_dispatch/routing/route_set.rb:30:in `call'
journey (1.0.3) lib/journey/router.rb:68:in `block in call'
journey (1.0.3) lib/journey/router.rb:56:in `each'
journey (1.0.3) lib/journey/router.rb:56:in `call'
actionpack (3.2.2) lib/action_dispatch/routing/route_set.rb:594:in `call'
actionpack (3.2.2) lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
rack (1.4.1) lib/rack/etag.rb:23:in `call'
rack (1.4.1) lib/rack/conditionalget.rb:25:in `call'
actionpack (3.2.2) lib/action_dispatch/middleware/head.rb:14:in `call'
actionpack (3.2.2) lib/action_dispatch/middleware/params_parser.rb:21:in `call'
actionpack (3.2.2) lib/action_dispatch/middleware/flash.rb:242:in `call'
rack (1.4.1) lib/rack/session/abstract/id.rb:205:in `context'
rack (1.4.1) lib/rack/session/abstract/id.rb:200:in `call'
actionpack (3.2.2) lib/action_dispatch/middleware/cookies.rb:338:in `call'
activerecord (3.2.2) lib/active_record/query_cache.rb:64:in `call'
activerecord (3.2.2) lib/active_record/connection_adapters/abstract/connection_pool.rb:443:in `call'
actionpack (3.2.2) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
activesupport (3.2.2) lib/active_support/callbacks.rb:405:in     `_run__3068104272435367366__call__4006997629250885704__callbacks'
activesupport (3.2.2) lib/active_support/callbacks.rb:405:in `__run_callback'
activesupport (3.2.2) lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
activesupport (3.2.2) lib/active_support/callbacks.rb:81:in `run_callbacks'
actionpack (3.2.2) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
actionpack (3.2.2) lib/action_dispatch/middleware/reloader.rb:65:in `call'
actionpack (3.2.2) lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
actionpack (3.2.2) lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
actionpack (3.2.2) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
railties (3.2.2) lib/rails/rack/logger.rb:26:in `call_app'
railties (3.2.2) lib/rails/rack/logger.rb:16:in `call'
actionpack (3.2.2) lib/action_dispatch/middleware/request_id.rb:22:in `call'
rack (1.4.1) lib/rack/methodoverride.rb:21:in `call'
rack (1.4.1) lib/rack/runtime.rb:17:in `call'
activesupport (3.2.2) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
rack (1.4.1) lib/rack/lock.rb:15:in `call'
actionpack (3.2.2) lib/action_dispatch/middleware/static.rb:61:in `call'
railties (3.2.2) lib/rails/engine.rb:479:in `call'
railties (3.2.2) lib/rails/application.rb:220:in `call'
rack (1.4.1) lib/rack/content_length.rb:14:in `call'
railties (3.2.2) lib/rails/rack/log_tailer.rb:14:in `call'
rack (1.4.1) lib/rack/handler/webrick.rb:59:in `service'
/Users/cj3kim/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/httpserver.rb:138:in `service'
/Users/cj3kim/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/httpserver.rb:94:in `run'
/Users/cj3kimactionpack (3.2.2) lib/action_controller/metal/hide_actions.rb:36:in `visible_action?'
actionpack (3.2.2) lib/action_controller/metal/hide_actions.rb:18:in `method_for_action'
actionpack (3.2.2) lib/action_controller/metal/implicit_render.rb:14:in `method_for_action'
actionpack (3.2.2) lib/action_controller/metal/compatibility.rb:61:in `method_for_action'
actionpack (3.2.2) lib/abstract_controller/base.rb:115:in `process'
actionpack (3.2.2) lib/abstract_controller/rendering.rb:45:in `process'  
actionpack (3.2.2) lib/action_controller/metal.rb:203:in `dispatch'
actionpack (3.2.2) lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
actionpack (3.2.2) lib/action_controller/metal.rb:246:in `block in action'
actionpack (3.2.2) lib/action_dispatch/routing/route_set.rb:67:in `call'
actionpack (3.2.2) lib/action_dispatch/routing/route_set.rb:67:in `dispatch'
actionpack (3.2.2) lib/action_dispatch/routing/route_set.rb:30:in `call'
journey (1.0.3) lib/journey/router.rb:68:in `block in call'
journey (1.0.3) lib/journey/router.rb:56:in `each'
journey (1.0.3) lib/journey/router.rb:56:in `call'
actionpack (3.2.2) lib/action_dispatch/routing/route_set.rb:594:in `call'
actionpack (3.2.2) lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
rack (1.4.1) lib/rack/etag.rb:23:in `call'
rack (1.4.1) lib/rack/conditionalget.rb:25:in `call'
actionpack (3.2.2) lib/action_dispatch/middleware/head.rb:14:in `call'
actionpack (3.2.2) lib/action_dispatch/middleware/params_parser.rb:21:in `call'
actionpack (3.2.2) lib/action_dispatch/middleware/flash.rb:242:in `call'
rack (1.4.1) lib/rack/session/abstract/id.rb:205:in `context'
rack (1.4.1) lib/rack/session/abstract/id.rb:200:in `call'
actionpack (3.2.2) lib/action_dispatch/middleware/cookies.rb:338:in `call'
activerecord (3.2.2) lib/active_record/query_cache.rb:64:in `call'
activerecord (3.2.2) lib/active_record/connection_adapters/abstract/connection_pool.rb:443:in `call'
actionpack (3.2.2) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
activesupport (3.2.2) lib/active_support/callbacks.rb:405:in     `_run__3068104272435367366__call__4006997629250885704__callbacks'
activesupport (3.2.2) lib/active_support/callbacks.rb:405:in `__run_callback'
activesupport (3.2.2) lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
activesupport (3.2.2) lib/active_support/callbacks.rb:81:in `run_callbacks'
actionpack (3.2.2) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
actionpack (3.2.2) lib/action_dispatch/middleware/reloader.rb:65:in `call'
actionpack (3.2.2) lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
actionpack (3.2.2) lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
actionpack (3.2.2) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
railties (3.2.2) lib/rails/rack/logger.rb:26:in `call_app'
railties (3.2.2) lib/rails/rack/logger.rb:16:in `call'
actionpack (3.2.2) lib/action_dispatch/middleware/request_id.rb:22:in `call'
rack (1.4.1) lib/rack/methodoverride.rb:21:in `call'
rack (1.4.1) lib/rack/runtime.rb:17:in `call'
activesupport (3.2.2) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
rack (1.4.1) lib/rack/lock.rb:15:in `call'
actionpack (3.2.2) lib/action_dispatch/middleware/static.rb:61:in `call'
railties (3.2.2) lib/rails/engine.rb:479:in `call'
railties (3.2.2) lib/rails/application.rb:220:in `call'
rack (1.4.1) lib/rack/content_length.rb:14:in `call'
railties (3.2.2) lib/rails/rack/log_tailer.rb:14:in `call'
rack (1.4.1) lib/rack/handler/webrick.rb:59:in `service'
/Users/cj3kim/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/httpserver.rb:138:in `service'
/Users/cj3kim/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/httpserver.rb:94:in `run'
/Users/cj3kim/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/server.rb:191:in `block in    start_thread'/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/server.rb:191:in `block in start_thread' 
```

这是我的控制器：

```
1 class ProductPhotosController < ApplicationController
2   # GET /product_photos
3   # GET /product_photos.json
4   def index
5     @product_photos = ProductPhoto.all
6 
7     respond_to do |format|
8       format.html # index.html.erb
9       format.json { render json: @product_photos }
10     end
11   end 
```

这是我的模型：

```
1 class ProductPhoto < ActiveRecord::Base
2   has_attached_file :image,
3     :style => {:small => "150x150"},
4     :storage => :s3,
5     :s3_credentials => "#{RAILS_ROOT}/config/s3.yml",
6     :path => "chocosite/:attachment/:style/:id.:extension"
7 end 
```

**结束编辑**

* * *

**编辑~**

Heroku 加载错误 - 回形针

问题是我在模型中发现的语法错误。我现在有一个新问题

我做了什么：

此问题发生在以 sqlite3 作为 db 的本地主机上。我登录到 s3 模块并将曾经在**“public/system/images/000/000/”**中的所有相关文件夹上传到 s3上的存储桶 choco_photos 中的文件夹**“images”中。**我还更改了 URL 和 PATH 以反映它，但我很确定我做错了什么。

PATH AND URL 文件是否反映了图像在 S3 上的存储和访问位置？

我会提到，即使在看了回形针上的 railscast 之后，我仍然对配置感到困惑。我查看了 AWS 推荐的文档，但[没有](http://rubydoc.info/gems/paperclip/Paperclip/Storage/S3#s3_url_options-instance_method)帮助。具体来说，我对这种说法感到困惑：

```
# File 'lib/paperclip/storage/s3.rb', line 203

def s3_object style_name = default_style
  s3_bucket.objects[path(style_name).sub(%r{^/},'')]
end 
```

任何和所有的帮助表示赞赏。

更多信息：

```
LoadError in Product_photos#index

Showing /Users/cj3kim/Desktop/rails_projects/chocosite/app/views/product_photos/index.html.erb where line #4 raised:

cannot load such file -- aws-sdk (You may need to install the aws-sdk gem)
Extracted source (around line #4):

1: <div id="container_product_photos"> 
2: <% @product_photos.each do |photo| %>
3:   <div class="product_box" >
4:     /*#<%= link_to image_tag(photo.image.url(:small)), product_photo_path(photo) %>*/
5:     <p class='description'><%= photo.Name %> </p>
6:   </div> 
7: <% end %> 
```

这是我的模型文件：

```
1 class ProductPhoto < ActiveRecord::Base
2   has_attached_file :image,
3     :storage => :s3,
4     :s3_credentials => {
5       :access_key_id => ENV['Access Key'],
6       :secret_access_key => ENV['Secret Key']
7     },
8     :bucket => ENV['choco_photos'],
9     :style => {
10       :small => "150x150"
11     },
12     :url => "/images/:id/:style/:basename.:extension",
13     :path => "/images/:id/:style/:basename.:extension"
14 end 
```

~

这是我的宝石文件：

```
12 group :production do
13     gem 'pg'
14 end
15 
16 gem 'bootstrap-sass', '2.0.0'
17 gem 'paperclip', '~> 3.0'
18 gem 'aws-sdk', '~> 1.3.4' 
```

**编辑结束**

* * *

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T21:55:53.737

对于问题 1：Heroku 在 Cedar 堆栈上运行 1.9.2，您基于应用程序的 URL 运行该堆栈。我相信 1.9.1 只是一个目录，实际上与版本无关......我在文件夹名称中的 1.9.1 和我的系统实际运行 1.9.2 或 1.9.3 之间得到相同的“不匹配”（和我只通过 RVM 运行 1.9.2 或 1.9.3）。

您可以通过在 heroku 上打开 Rails 控制台来验证 Heroku 版本...

1.  打开终端/控制台
2.  导航到您的项目目录
3.  类型：heroku 运行控制台（假设您已经安装了 heroku gem 或 CLI 工具）
4.  控制台加载后，输入：RUBY_VERSION（您应该看到 1.9.2 或 1.9.3 输出）

对于问题 2：我必须更改 Gemfile 中的回形针。我使用它，它适用于雪松：

```
gem 'paperclip', "~> 3.0"
gem "aws-sdk" 
```

在我的相关模型中：

```
has_attached_file :photo,
                :storage => :s3,
                :s3_credentials => "#{Rails.root}/config/s3.yml",
                :styles => {
                    :large => "600x480",
                    :medium => "330x230",
                    :small => "210x150",
                    :thumb => "90x90"
                },
                :path => 'images/products/:style/:filename' 
```

在我的 s3.yml 文件中：

```
development: 
access_key_id: MYKEY
secret_access_key: MYSUPERSECRETACCESSKEY
bucket: bucketname 
```

希望有帮助！

# html - CSS div元素高度问题

> ID：10096842
> 
> 赞同：0
> 
> 时间：2012-04-10T21:39:34.107
> 
> 标签：html, css

我会保持简短。我正在尝试将 div 元素高度设置为 100%。所有的父元素都设置为 100% 的高度，所以这应该不是问题。原始代码在这里： http: [//pastebin.com/THK13a2q](http://pastebin.com/THK13a2q)

这是情况/问题的图片。深灰色背景 (id="content") 的高度应该是 100%。 [http://i.imgur.com/kOK9H.png](http://i.imgur.com/kOK9H.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T21:55:25.717

添加到您的 css 文件

```
#content {
  overflow: hidden;
} 
```

正如 mikevoermans 指出的那样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T22:16:23.013

我认为这与浮动有关`#rightfeed`。您需要将其设置为`clear: both`或在应用后直接添加一个 div `clear: both`。

如果这不起作用，请创建一个 jsfiddle，以便我们有一些东西可以玩。

# css - CSS悬停不起作用

> ID：10096843
> 
> 赞同：-1
> 
> 时间：2012-04-10T21:39:34.940
> 
> 标签：css

我正在我的网站中通过 jQuery 制作一个选项卡式导航菜单。所有单独的选项卡都有类`navBarLink`，这里是与它相关的 CSS：

```
.navBarLink:link,.navBarLink:visited
{
display:block;
height:27px;
width:120px;
color:#FFF;
background-color:#06C;
text-align:center;
padding:4px;
text-decoration:none;
border:0;
margin:2px 2px 0 2px;
}
.navBarLink:hover,.navBarLink:active
{
background-color:#FFF;
color:#06C;
border-bottom-style:solid;
border-bottom-color:#FFFFFF;
border-bottom-width:1px;
} 
```

问题是当我单击选项卡时背景颜色会发生变化，但当我将鼠标悬停在选项卡上时不会改变。基本上我的悬停和点击不能同时工作。知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T21:57:00.777

[http://jsfiddle.net/UnFhQ/](http://jsfiddle.net/UnFhQ/)

这行得通。（我从第一个 css 代码中删除了 :link，这样我就可以看到 div 的背景颜色...）但是单击此按钮并让我们知道代码不起作用的原因。谢谢

# java - 如何创建一个有数字的圆圈？

> ID：10096851
> 
> 赞同：15
> 
> 时间：2012-04-10T21:40:17.840
> 
> 标签：java, android, andengine

我正在使用 AndEngine 编写 Android 游戏。我想创建一个有数字的圆圈，如下图所示：

![](../Images/de32dd0f9b101d61b07c4739d5a29e36.png)

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-04-10T22:00:30.230

像这样的东西：

circle.xml（在 res/drawable 中）

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android"
    android:shape="oval" >

    <solid android:color="#aaf" />

</shape> 
```

和 circletext.xml（在 res/layout 中）：

```
<?xml version="1.0" encoding="utf-8"?>
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@android:color/white"
    android:orientation="vertical" >

    <TextView
        android:layout_width="80dp"
        android:layout_height="80dp"
        android:layout_gravity="center"
        android:background="@drawable/circle"
        android:gravity="center"
        android:shadowColor="@android:color/white"
        android:shadowRadius="10.0"
        android:text="4"
        android:textColor="@android:color/black"
        android:textSize="18sp" />

</FrameLayout> 
```

看起来像这样：

![在此处输入图像描述](../Images/fe576830bf4b43d2d7d1c714d5143483.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T21:42:23.217

嗯，我想最简单的方法就是把这样的图片放在哈哈。您始终可以使用带有圆圈的图像，然后将带有数字的文本叠加在其顶部。

# php - MySQL插入子查询（在联结表上）

> ID：10096855
> 
> 赞同：0
> 
> 时间：2012-04-10T21:40:47.643
> 
> 标签：php, mysql, subquery, insert-into

基本上，我想插入一个联结表，从另一个表中获取值。

像这样：

```
 $sql= "INSERT INTO cars_owners (car_id, owner_id ) VALUES ($id, SELECT owners.owner_id FROM owners WHERE owners.owner_name='$name'))"; 
```

但是，这个不起作用，有人知道为什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T21:44:06.947

您将插入一组值的语法与从 SELECT 语句插入的语法混合在一起。`VALUES`从 SELECT 插入时没有关键字。

```
INSERT INTO cars_owners 
    (car_id, owner_id )
    SELECT $id, owners.owner_id 
        FROM owners 
        WHERE owners.owner_name='$name' 
```

# sql - 需要帮助编写 SQL 触发器

> ID：10096861
> 
> 赞同：1
> 
> 时间：2012-04-10T21:41:16.683
> 
> 标签：sql, postgresql, triggers

一直在尝试编写此触发器，但我无法真正解决它..

我需要做什么：

从项目表中删除项目，但同时删除与该项目关联的任何问题以及与该问题关联的任何问题更新。然后需要将这些已删除的记录存储在存档表中，并附上删除时间以及删除它们的操作员的 ID。

一个问题可能有多个与之相关的更新，就像一个项目可能有很多与之相关的问题一样。

我已经把所有的模式都放在了 SQL 小提琴中，因为在那里工作要容易得多，但如果需要，我会把它放在这里。

SQL小提琴的链接：

[http://sqlfiddle.com/#!1/1bb25](http://sqlfiddle.com/#!1/1bb25)

编辑：我想我不妨把它放在这里..

```
Tables:

CREATE TABLE Operator
(
    ID      INTEGER NOT NULL PRIMARY KEY,
    Name        VARCHAR(40) NOT NULL
);

CREATE TABLE Item
(
    ID      INTEGER NOT NULL PRIMARY KEY,
    Name        VARCHAR(40) NOT NULL
);

CREATE TABLE Faq
(
    ID      INTEGER NOT NULL PRIMARY KEY,
    Question    VARCHAR(150) NOT NULL,
    Answer  VARCHAR(2500) NOT NULL,
    ItemID  INTEGER,
    FOREIGN KEY (ItemID) REFERENCES Item(ID)
);

CREATE TABLE Customer
(
    ID      INTEGER NOT NULL PRIMARY KEY,
    Name        VARCHAR(20) NOT NULL,
    Email       VARCHAR(20) NOT NULL
);

CREATE TABLE Question
(
    ID      INTEGER NOT NULL PRIMARY KEY,
    Problem VARCHAR(1000),
    AskedTime   TIMESTAMP NOT NULL,
    CustomerID  INTEGER NOT NULL,
    ItemID  INTEGER NOT NULL,
    FOREIGN KEY (ItemID) REFERENCES Item(ID),
    FOREIGN KEY (CustomerID) REFERENCES Customer(ID)
);

CREATE TABLE qUpdate
(
    ID      INTEGER NOT NULL PRIMARY KEY,
    Message VARCHAR(1000) NOT NULL,
    UpdateTime  TIMESTAMP NOT NULL,
    QuestionID  INTEGER NOT NULL,
    OperatorID INTEGER,
    FOREIGN KEY (OperatorID) REFERENCES Operator(ID),
    FOREIGN KEY (QuestionID) REFERENCES Question(ID)
);

-- Archive Tables

CREATE TABLE DeletedQuestion
(
    ID      INTEGER NOT NULL PRIMARY KEY,
    Problem VARCHAR(1000),
    AskedTime   TIMESTAMP NOT NULL,
    CustomerID  INTEGER NOT NULL,
    ItemID  INTEGER NOT NULL
    );

CREATE TABLE DeletedqUpdate
(
    ID      INTEGER NOT NULL PRIMARY KEY,
    Message VARCHAR(1000) NOT NULL,
    UpdateTime  TIMESTAMP NOT NULL,
    Question    INTEGER NOT NULL
);

    CREATE TABLE DeletedItem
(
    ID      INTEGER NOT NULL PRIMARY KEY,
    Name        VARCHAR(40) NOT NULL,
    OperatorDeleteID INTEGER NOT NULL,
    FOREIGN KEY (OperatorDeleteID) REFERENCES Operator(ID)
); 
```

一些样品插入测试

```
--Product Inserts
INSERT INTO Item (ID, Name) VALUES (1, 'testitem1');
INSERT INTO Item (ID, Name) VALUES (2, 'testitem2');

--Operator Inserts
INSERT INTO Operator (ID, Name) VALUES (1, 'testname1');
INSERT INTO Operator (ID, Name) VALUES (2, 'testname2');

--Faq Inserts

INSERT INTO Faq (ID, Question, Answer, ItemID) VALUES (1, 'testq1', 'testa1', 1);
INSERT INTO Faq (ID, Question, Answer, ItemID) VALUES (2, 'testq2', 'testa2', 2);

-- Customer Inserts

INSERT INTO Customer (ID, Name, Email) VALUES (1, 'testcust1', 'testemail1');
INSERT INTO Customer (ID, Name, Email) VALUES (2, 'testcust2', 'testemail2');

-- Question Inserts

INSERT INTO Question (ID, Problem, AskedTime, CustomerID, ItemID) VALUES (1,'testproblem1','2012-03-14 09:30',1,1);

INSERT INTO Question (ID, Problem, AskedTime, CustomerID, ItemID) VALUES (2,'testproblem1','2012-07-14 09:30',2,1);

INSERT INTO qUpdate (ID, Message, UpdateTime, OperatorID, QuestionID) VALUES (1, 'test1','2012-05-14 09:30', 1, 1);

INSERT INTO qUpdate (ID, Message, UpdateTime, OperatorID, QuestionID) VALUES (2, 'test2','2012-08-14 09:30', 2, 1); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T22:30:05.723

首先要明白，在PostgreSQL中，一条语句将一个触发器*函数*`CREATE TRIGGER`绑定到一个表上的一个或多个操作上，那么让我们从函数的语法开始。您可以用各种脚本语言编写触发器函数，但最常见的是 plpgsql。一个简单的函数可能如下所示：

 *```
CREATE OR REPLACE FUNCTION Question_delete_trig_func()
  RETURNS TRIGGER
  LANGUAGE plpgsql
AS $$
BEGIN
  INSERT INTO DeletedQuestion
    SELECT OLD.*;
  RETURN OLD;
END;
$$; 
```

要在删除后运行它：

```
CREATE TRIGGER Question_delete_trig
  AFTER DELETE ON Question
  FOR EACH ROW EXECUTE PROCEDURE Question_delete_trig_func(); 
```

这应该足以让你开始。

对于应该保存已删除行的每个表，您应该有一个这样的触发器。然后，您需要确定如何进行删除。您可以只定义适当的外键 as`ON DELETE CASCADE`并让 PostgreSQL 为您完成。*

# javascript - javascript each - 自动检测 (key,val) 中的 val 名称

> ID：10096863
> 
> 赞同：0
> 
> 时间：2012-04-10T21:41:33.073
> 
> 标签：javascript, jquery, each

我有一个 JSON 文件，它的名称值对比我想输入的要多。懒惰或优雅。而不是使用下面我必须输入所有名称值对的内容，必须有一个 val 的属性，如 val.name ，因此不必输入所有其他对。搜索找到答案的正确术语是什么？或者代码也会很好:)

当我想，“废话，我必须输入所有 *#&@$ ！”时，这就是我开始使用的。

```
$.each(data, function(key, val) {
            items.push(key + val.TimeStamp + val.bandwidth + ); 
```

JSON

```
{
    "Router": "HS-DSCS1",
    "router_data": [
        {
            "TimeStamp": "2012/01/01 06:00:00",
            "NeighborIP": "192.168.1.1",
            "State": "Full",
            "Bytes001": "21362.95663",
            "Bytes002": "2.67 KB",
            "Bytes003": "9887.99707",
            "Bytes004": "1.24 KB",
            "Bytes005": "Serial0/1/0"
        }
    ]
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T21:44:56.353

如果我正确理解您的问题，请使用`for..in`.

```
for (field in val){
   // something with val[field]
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T21:47:37.803

好像你只是在做字符串连接。如果是这样的话 ...

```
$.each(data, function(key, val) {
    items.push(key + $.map(val, String).join('') );
}); 
```

***演示：http:*** [//jsfiddle.net/ZVDcy/](http://jsfiddle.net/ZVDcy/)

* * *

或者，如果您正在构建一个新数组，您可以这样做......

```
var items = $.map(data, function(val, key) {
    return key + $.map(val, String).join('');
}); 
```

***演示：http:*** [//jsfiddle.net/ZVDcy/1/](http://jsfiddle.net/ZVDcy/1/)

# pascal - 来自form1的Lazarus Listview，可以由form2添加

> ID：10096870
> 
> 赞同：0
> 
> 时间：2012-04-10T21:41:56.327
> 
> 标签：pascal, lazarus

我很抱歉有另一个类似的问题，但我希望找到一个更简单的解决方案来解决我遇到的问题。

我在 form1 中有一个列表视图，我希望 form2 能够添加到该列表视图中。Form2 由 form1 通过按下按钮创建。Form2 有一个列表视图，当我单击 form2 中的按钮时，我希望它将所有项目添加到 form1 中的列表视图并关闭 form2。完成此任务的最简单方法是什么？

*我尝试使用 Windows 消息传递，但由于某种原因 Lazarus 不适用于 TWM_CopyData。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T00:35:16.460

因为我更喜欢单位引用，所以这可能会对你有所帮助。在`Form2`声明的公共属性`TargetListView`中，分配了`Form1`之前`Form2`显示的列表视图。现在您可以从范围访问`Form1`列表视图，`Form2`并且可以在关闭它之前将项目复制到那里。

这是第一个单元的简化代码：

```
unit Unit1;

uses
  Unit2;

type
  TForm1 = class(TForm)
    Button1: TButton;
    ListView1: TListView;
    procedure Button1Click(Sender: TObject);
  private
    { private declarations }
  public
    { public declarations }
  end; 

procedure TForm1.Button1Click(Sender: TObject);
begin
  Form2 := TForm2.Create(Self);
  Form2.TargetListView := ListView1;
  Form2.Show;
end; 
```

这是第二个单元的简化代码：

```
unit Unit2;

type
  TForm2 = class(TForm)
    Button1: TButton;
    ListView1: TListView;
    procedure Button1Click(Sender: TObject);
  private
    { private declarations }
  public
    TargetListView: TListView;
  end;

procedure TForm2.Button1Click(Sender: TObject);
var
  I: Integer;
begin
  TargetListView.Items.BeginUpdate;
  try
    for I := 0 to ListView1.Items.Count - 1 do
      TargetListView.Items.Add.Assign(ListView1.Items[I]);
  finally
    TargetListView.Items.EndUpdate;
  end;
  Close;
end; 
```

# silverlight - Silverlight 应用程序的可执行文件/程序集/实际安装在我的硬盘上的什么位置？

> ID：10096874
> 
> 赞同：2
> 
> 时间：2012-04-10T21:42:32.487
> 
> 标签：silverlight, windows-7

我在 Windows 7 上安装了一个 silverlight 应用程序，它在桌面上放置了一个快捷方式，并且运行良好。例如，在没有互联网连接的情况下工作正常。

让我担心的是，目前尚不清楚该应用程序现在在我的机器上的确切位置。我检查了这个桌面快捷方式，它显示“C:\Program Files (x86)\Microsoft Silverlight\sllauncher.exe”[随机整数]。[与应用关联的 URL 名称]

很好。那么 sllauncher.exe 实际加载的可执行文件/程序集/任何东西在哪里？

ETA：好的，这家伙[http://www.qa.com/about-qa/blogs/2011/september/where-is-an-out-of-browser-silverlight-xap-stored/](http://www.qa.com/about-qa/blogs/2011/september/where-is-an-out-of-browser-silverlight-xap-stored/)声称 Silverlight 文件有扩展名XAP 并保存在 C:\Users\Username\AppData\LocalLow\Microsoft\Silverlight\OutOfBrowser 中。不确定这通常是多么真实，但对于我的机器的具体情况并非如此。AFAICT 我的 OutOfBrowser 文件夹非常小，不包含 XAP 文件、隐藏文件等。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T22:33:55.863

好的，所以事实证明 XAP 包没有安装在 C:\Users\Username\AppData\LocalLow\Microsoft\Silverlight\OutOfBrowser 中，正如友好的 Silverlight 培训师和博主所建议的那样。不，它安装在 C:\Users\Username\AppData\Local\Microsoft\Silverlight\OutOfBrowser 中。

“因为我们不满意，直到你不满意” [http://www.despair.com/cudi.html](http://www.despair.com/cudi.html)一定是Windows团队的新座右铭。

# php - 如何将代码收集到一个变量中

> ID：10096876
> 
> 赞同：0
> 
> 时间：2012-04-10T21:42:39.493
> 
> 标签：php

我需要能够将所有这些信息（作为文本）放入变量 $all 中，以便稍后在我的脚本中使用它。但是当我稍后回显 $all 时，它不起作用。不要有人说字体标签的使用，我和你一样沮丧。

```
 $all = <<< STOPTHISCRAZYTHING
    echo "<br><br><textarea rows=\"30\" cols = \"100\">";
    echo "<div align=\"center\"><font size=\"7\">I Have</font></div>";
    foreach($same as $match)
        {
        echo "<img src=\"" . $match . "\">";
        }
    echo "<div align=\"center\"><font size=\"7\">I Need</font></div>";
    foreach($different as $diff)
        {
        if(!in_array($diff, $reject))
        {
        echo "<img src=\"" . $diff . "\">";
        }
        }
    echo "<div align=\"center\"><font size=\"7\">I Am Unable To Obtain</font></div>";
    foreach($retired_different as $unabletoget)
        {
        echo "<img src=\"" . $unabletoget . "\">";
        }
    echo "</textarea>";
STOPTHISCRAZYTHING; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T21:45:28.127

您不能在 heredoc 语法中嵌入循环结构。您需要在以下范围之外处理您的 foreach 循环：

```
$all = STOPTHISCRAZYTHING
    ...
STOPTHISCRAZYTHING; 
```

**编辑：**

“回声”声明同上。您可以在heredoc 分配中使用变量，但您可以将其视为字符串分配右侧的整个块。不是执行 PHP 命令的块。

**编辑2：**

这是一个有效的例子，使用你的例子（部分）

```
 $all = <<< STOPTHISCRAZYTHING
        <br><br><textarea rows="30" cols ="100">
        <div align="center"><font size="7">I Have</font></div>
STOPTHISCRAZYTHING; 
```

...请注意您如何输入所需的文本，您不必回显，也不必转义引号。

文档：[http ://www.php.net/manual/en/language.types.string.php#language.types.string.syntax.heredoc](http://www.php.net/manual/en/language.types.string.php#language.types.string.syntax.heredoc)

干杯

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T21:51:33.090

我不确定你的意思，`It's all messed up, though it's printed.`但在我看来它打印得很好，但浏览器正在向你显示渲染版本：只需检查源代码。

如果您想将其视为真实文本，您需要做的是：

*   将其包装在`<pre>`标签中以保留换行符（或`nl2br()`在回显之前在字符串上使用）
*   在回显变量之前使用`htmlspecialchars()`变量，以便将`<`等符号转换为 html 实体。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-10T21:55:01.220

您正在寻找[输出缓冲](http://www.php.net/manual/en/ref.outcontrol.php)：

```
ob_start(); // Start capturing the script's output

echo "<br><br><textarea rows=\"30\" cols = \"100\">";
echo "<div align=\"center\"><font size=\"7\">I Have</font></div>";
foreach($same as $match)
    {
    echo "<img src=\"" . $match . "\">";
    }
echo "<div align=\"center\"><font size=\"7\">I Need</font></div>";
foreach($different as $diff)
    {
    if(!in_array($diff, $reject))
    {
    echo "<img src=\"" . $diff . "\">";
    }
    }
echo "<div align=\"center\"><font size=\"7\">I Am Unable To Obtain</font></div>";
foreach($retired_different as $unabletoget)
    {
    echo "<img src=\"" . $unabletoget . "\">";
    }
echo "</textarea>";

$all = ob_get_flush(); // Stop capturing output, and store the output 
// that was captured up until now into the variable $all 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-10T21:55:11.107

我相信您正在尝试做的事情，您可以通过使用 ob_start() 和朋友来完成。heredoc (<<<) 仅用于在不使用引号的情况下创建大型字符串变量。您不能将代码和所有这些东西放在heredoc 字符串中。

[http://php.net/manual/en/function.ob-start.php](http://php.net/manual/en/function.ob-start.php)

ob_start() 可以让您缓冲打印的所有内容。然后，您可以使用其他 ob 函数来获取该缓冲输出并将其放入变量或您想要对其执行的任何操作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-10T21:58:07.550

你在那里有一些有趣的括号....

你需要使用`Heredoc`吗？为什么不使用“。”将其全部添加到变量中？运算符将它们连接起来。此外，为了简化事情，您可以混合使用单引号和双引号：

> ```
> $all = "<br><br><textarea rows='30' cols = '100'>";
> $all = $all . "<div align='center'><font size='7'>I Have</font></div>";
> foreach($same as $match)
> {
>     $all = $all . "<img src='" . $match . "'>";
> }
> $all = $all . "<div align='center'><font size='7'>I Need</font></div>";
> foreach($different as $diff)
> {
>     if(!in_array($diff, $reject))
> {
> $all = $all . "<img src='" . $diff . "'>";
> $all = $all . "<div align='center'><font size='7'>I Am Unable To Obtain</font></div>";
> foreach($retired_different as $unabletoget)
> {
>     $all = $all . "<img src='" . $unabletoget . "'>";
> }
> $all = $all . "</textarea>"; 
> ```

现在，当您回显 $all 变量时，您将获得所需的完整输出

> ```
> echo $all; 
> ```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-04-10T21:53:06.973

**解决方案 A：**

```
<?php
   $all = <<< STOPTHISCRAZYTHING
    echo "&lt;br&gt;&lt;br&gt;&lt;textarea rows=\"30\" cols = \"100\"&gt;";
    echo "&lt;div align=\"center\"&gt;&lt;font size=\"7\"&gt;I Have&lt;/font&gt;&lt;/div&gt;";
    foreach($same as $match)
        {
        echo "&lt;img src=\"" . $match . "\"&gt;";
        }
    echo "&lt;div align=\"center\"&gt;&lt;font size=\"7\"&gt;I Need&lt;/font&gt;&lt;/div&gt;";
    foreach($different as $diff)
        {
        if(!in_array($diff, $reject))
        {
        echo "&lt;img src=\"" . $diff . "\"&gt;";
        }
        }
    echo "&lt;div align=\"center\"&gt;&lt;font size=\"7\"&gt;I Am Unable To Obtain&lt;/font&gt;&lt;/div&gt;";
    foreach($retired_different as $unabletoget)
        {
        echo "&lt;img src=\"" . $unabletoget . "\"&gt;";
        }
    echo "&lt;/textarea&gt;";
STOPTHISCRAZYTHING;

echo $all;

?> 
```

**解决方案 B *（使用`htmlentities`）*：**

```
<?php
   $all = <<< STOPTHISCRAZYTHING
    echo "<br><br><textarea rows=\"30\" cols = \"100\">";
    echo "<div align=\"center\"><font size=\"7\">I Have</font></div>";
    foreach($same as $match)
        {
        echo "<img src=\"" . $match . "\">";
        }
    echo "<div align=\"center\"><font size=\"7\">I Need</font></div>";
    foreach($different as $diff)
        {
        if(!in_array($diff, $reject))
        {
        echo "<img src=\"" . $diff . "\">";
        }
        }
    echo "<div align=\"center\"><font size=\"7\">I Am Unable To Obtain</font></div>";
    foreach($retired_different as $unabletoget)
        {
        echo "<img src=\"" . $unabletoget . "\">";
        }
    echo "</textarea>";
STOPTHISCRAZYTHING;

echo htmlentities($all);

?> 
```

**解决方案 C *（将其包装在`<pre>`...`</pre>`标签中）*：**

```
<?php
   $all = <<< STOPTHISCRAZYTHING
    <pre>
    echo "<br><br><textarea rows=\"30\" cols = \"100\">";
    echo "<div align=\"center\"><font size=\"7\">I Have</font></div>";
    foreach($same as $match)
        {
        echo "<img src=\"" . $match . "\">";
        }
    echo "<div align=\"center\"><font size=\"7\">I Need</font></div>";
    foreach($different as $diff)
        {
        if(!in_array($diff, $reject))
        {
        echo "<img src=\"" . $diff . "\">";
        }
        }
    echo "<div align=\"center\"><font size=\"7\">I Am Unable To Obtain</font></div>";
    foreach($retired_different as $unabletoget)
        {
        echo "<img src=\"" . $unabletoget . "\">";
        }
    echo "</textarea></pre>";
STOPTHISCRAZYTHING;

echo $all;

?> 
```

# gcc - 如何分析编译器警告的 make 输出？

> ID：10096877
> 
> 赞同：3
> 
> 时间：2012-04-10T21:42:43.557
> 
> 标签：gcc, makefile, compiler-warnings, gcc-warning

我正在开发适用于 Windows、Mac OS X 和 Linux 的跨平台 C++ 应用程序。开发在 Windows 上完成，然后在 Mac OS X 和 Linux 上测试与 gcc 的兼容性。在 Windows 上，我们使用 Visual Studio 进行编译，在 Linux 和 Mac OS X 下，我们使用 Makefile。

有没有办法过滤每个项目/模块的编译器警告？大多数项目都有自己的 Makefile，然后为子项目调用 qmake。在这种情况下，它们是收集编译器警告和错误的工具还是可靠的方法？理想情况下，我希望有 html 输出，每个项目的摘要和实际错误的详细信息页面。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-10T21:50:48.037

GCC 向标准错误（文件描述符`2`）发送警告和错误，而正常输出到标准输出（文件描述符`1`）。您可以将警告或错误重定向到额外的文件并解析输出以生成报告。

```
$ make 1> log 2> error_log 
```

# android - 如何在 AsyncTask 类中访问其值？

> ID：10096879
> 
> 赞同：0
> 
> 时间：2012-04-10T21:42:49.097
> 
> 标签：android, class, android-asynctask

这是我的课：

```
class  InputTaskResult {
    int pos;
    String[] imagesurls;
} 
```

这就是我在适配器中使用它的方式：

```
public View getView(int position, View view, ViewGroup group){
    InputTaskResult inputtask=null;
    inputtask.pos=position;
    inputtask.imagesurls=imageIds;
    new LoginProgressTask().execute(inputtask); 
```

我的 AsyncTask 称为 LogiProcessTask：

```
class LoginProgressTask extends AsyncTask<InputTaskResult,Void,Bitmap> {
..
    protected Bitmap doInBackground(InputTaskResult... input) {
    int post=input.pos; --error
    String[] urls=input.imagesurl;  --error 
```

如何访问我输入的值？我尝试的每件事都会给我一个错误

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T21:47:36.213

试试这个：

```
int post=input[0].pos;
String[] urls=input[0].imagesurls; 
```

# macos - 在 mac os x 上用于 Web 开发的一些好的智能手机模拟器是什么？

> ID：10096881
> 
> 赞同：0
> 
> 时间：2012-04-10T21:43:14.337
> 
> 标签：macos, testing, mobile-website

我正在寻找一些好的智能手机模拟器，用于在 mac os x 上进行 Web 开发。

对于 iPhone，我们使用运行良好的 iOS 模拟器，但我们一直在使用 Eclipse 进行 Android 仿真，而且它很笨重。我们主要对Android、诺基亚、Palm 和黑莓感兴趣。如果有 Windows 7 移动模拟器，那就太好了，但我对此表示怀疑。

谢谢，

詹姆士

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T19:56:03.140

android、palm 或 blackberry 默认浏览器对您没有多大帮助，因为您很可能需要在 mac 上运行 windows 才能获得它们的模拟器，但是您还有其他一些选择。

诺基亚为注册开发者提供在线模拟器套件（免费） [http://www.developer.nokia.com/Devices/Remote_device_access/](http://www.developer.nokia.com/Devices/Remote_device_access/)

刚查了一下，诺基亚模拟器没有windows phone

然后是一些浏览器模拟器

[http://www.opera.com/developer/tools/mobile/](http://www.opera.com/developer/tools/mobile/) http://www.mozilla.org/en-US/mobile/

# jquery - 将 div 调整为其中的 div

> ID：10096884
> 
> 赞同：0
> 
> 时间：2012-04-10T21:43:23.850
> 
> 标签：jquery, scrollto

我在调整带有 ID 的 div 大小时遇到​​了一些问题`mask`，我习惯于使用 scrollTo() 效果。

的`#mask`大小为 100% 浏览器两侧和`overflow: hidden`，因此当我单击菜单时，蒙版会滚动到所选的 div。

HTML 如下所示：

```
<div id="mask">
  <div id="scrollcontent">
     <div id="content1">
     </div>
     <div id="content2">
     </div>       
     etc.....
</div> 
```

问题是掩码中的一个 div 的内容对于掩码 div 来说太大了，我无法完全看到它。有没有办法将掩码 div 调整为里面的内容 div 以便它可以完全显示？

同样，掩码是`overflow:hidden`：/

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T21:48:09.217

最简单的方法是在末尾添加一个额外的 div 以清除所有浮动

```
<div id="mask">
    <div id="scrollcontent">
       <div id="content1">
       </div>
       <div id="content2">
       </div>
       <div style="clear: both"></div>
    </div>
</div> 
```

您还可以使用[Micro Clearfix Hack](http://nicolasgallagher.com/micro-clearfix-hack/)进行一些伪类样式设置。

**编辑：**要让它在外部 div 上使用滚动条，请更改`overflow: hidden`为`overflow: scroll`.

# css - 专注于标签导航不起作用

> ID：10096891
> 
> 赞同：0
> 
> 时间：2012-04-10T21:43:56.440
> 
> 标签：css, focus

如果我问错了，请纠正我，

这是一个小css选项卡导航，控制选项卡框时链接不会聚焦，但它们可以正常聚焦。例如。

这不会集中。

```
 <a href="#one" class="won">doesn't focus</a> 
```

这个将重点

```
 <a href="#">does focus</a> 
```

这是我正在努力解决的完整示例。www.blackbeltweb.net/focus.html

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T21:48:33.420

你有一个`outline:none`班级`.won`。因此，焦点不会像默认情况下那样用虚线轮廓突出显示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T21:50:08.380

在 Chrome 中为我工作。也许你可以尝试设置[tabindex](https://developer.mozilla.org/en/DOM/element.tabIndex)

# jquery - Django - jquery 弹出窗口只被分配给一个按钮（6 个）

> ID：10096892
> 
> 赞同：0
> 
> 时间：2012-04-10T21:44:02.287
> 
> 标签：jquery, django, popup, pagination

我正在设计一个食谱网站，但我被困在这个问题上。

我正在尝试将 django 分页与这个平滑的弹出 jquery 插件结合起来：

[http://yensdesign.com/2008/09/how-to-create-a-stunning-and-smooth-popup-using-jquery/](http://yensdesign.com/2008/09/how-to-create-a-stunning-and-smooth-popup-using-jquery/)

当我加载内容时，只有第一个配方按钮会激活弹出窗口，它将显示您单击的任何配方我相信这是因为只有一个按钮对象的实例并且被分配给第一个配方（参见代码片段) 在分页结果中

如何修改代码以允许多个按钮？

这是相关代码的块内容：

修改后的模板：现在可以使用

```
{% block content %}
    {% autopaginate recipe_list 6 %}
        <div id="recipe_cont">
        {% for recipe in recipe_list %}
        <div id="recipe">
            <img src="{{ STATIC_URL }}chicknbraw.jpg" alt="" height="30" width="30" style=display:"inline"; />
            <div id="button{{ forloop.counter }}"><input type="submit" value="View" /></div>        
            <h4>{{ recipe.name }}</h4></a>
            <h5>{{ recipe.author}}</h5>
            <h5>Prep Time: {{ recipe.prep_time }} minutes</h5>
            <h6><a href="/addrecipe/{{ recipe.id }}">Add Recipe</a>
            <a href="/removerecipe/{{ recipe.id }}">Remove Recipe</a></h6>
            <div id="popupContact{{ forloop.counter }}">
                <a id="popupContactClose{{ forloop.counter }}" style="cursor:pointer;float:right;">x</a>
                <h1>{{ recipe.name }}</h1>
                <h3>{{ recipe.author }}</h3>
                <p id="contactArea">
                    Ingredients: {{ recipe.ingredients }}
                    <br/><br/>
                    Steps: {{ recipe.steps }}
                </p>
            </div>
            <div id="backgroundPopup"></div>        
        </div>
        {% endfor %}
        </div>
        <div id="col2-footer">
        {% paginate %}
        <p id="recipe_order_text"> order by: <a href="/account/ordered/name">abc</a>|<a href="/account/ordered/date">date</a> 
        </div>

    {% endblock %} 
```

修改后的jQuery：

```
/***************************/
//@Author: Adrian "yEnS" Mato Gondelle
//@website: www.yensdesign.com
//@email: yensamg@gmail.com
//@license: Feel free to use it, but keep this credits please!                  
/***************************/

//SETTING UP OUR POPUP
//0 means disabled; 1 means enabled;
var popupStatus = 0;

//loading popup with jQuery magic!
function loadPopup1(){
    //loads popup only if it is disabled
    if(popupStatus==0){
        $("#backgroundPopup").css({
            "opacity": "0.7"
        });
        $("#backgroundPopup").fadeIn("slow");
        $("#popupContact1").fadeIn("slow");

        popupStatus = 1;
    }
}
function loadPopup2(){
    //loads popup only if it is disabled
    if(popupStatus==0){
        $("#backgroundPopup").css({
            "opacity": "0.7"
        });
        $("#backgroundPopup").fadeIn("slow");
        $("#popupContact2").fadeIn("slow");

        popupStatus = 1;
    }
}
function loadPopup3(){
    //loads popup only if it is disabled
    if(popupStatus==0){
        $("#backgroundPopup").css({
            "opacity": "0.7"
        });
        $("#backgroundPopup").fadeIn("slow");
        $("#popupContact3").fadeIn("slow");

        popupStatus = 1;
    }
}
function loadPopup4(){
    //loads popup only if it is disabled
    if(popupStatus==0){
        $("#backgroundPopup").css({
            "opacity": "0.7"
        });
        $("#backgroundPopup").fadeIn("slow");
        $("#popupContact4").fadeIn("slow");

        popupStatus = 1;
    }
}
function loadPopup5(){
    //loads popup only if it is disabled
    if(popupStatus==0){
        $("#backgroundPopup").css({
            "opacity": "0.7"
        });
        $("#backgroundPopup").fadeIn("slow");
        $("#popupContact5").fadeIn("slow");

        popupStatus = 1;
    }
}
function loadPopup6(){
    //loads popup only if it is disabled
    if(popupStatus==0){
        $("#backgroundPopup").css({
            "opacity": "0.7"
        });
        $("#backgroundPopup").fadeIn("slow");
        $("#popupContact6").fadeIn("slow");

        popupStatus = 1;
    }
}
//disabling popup with jQuery magic!
function disablePopup1(){
    //disables popup only if it is enabled
    if(popupStatus==1){
        $("#backgroundPopup").fadeOut("slow");
        $("#popupContact1").fadeOut("slow");
        popupStatus = 0;
    }
}
function disablePopup2(){
    //disables popup only if it is enabled
    if(popupStatus==1){
        $("#backgroundPopup").fadeOut("slow");
        $("#popupContact2").fadeOut("slow");
        popupStatus = 0;
    }
}
function disablePopup3(){
    //disables popup only if it is enabled
    if(popupStatus==1){
        $("#backgroundPopup").fadeOut("slow");
        $("#popupContact3").fadeOut("slow");
        popupStatus = 0;
    }
}
function disablePopup4(){
    //disables popup only if it is enabled
    if(popupStatus==1){
        $("#backgroundPopup").fadeOut("slow");
        $("#popupContact4").fadeOut("slow");
        popupStatus = 0;
    }
}
function disablePopup5(){
    //disables popup only if it is enabled
    if(popupStatus==1){
        $("#backgroundPopup").fadeOut("slow");
        $("#popupContact5").fadeOut("slow");
        popupStatus = 0;
    }
}
function disablePopup6(){
    //disables popup only if it is enabled
    if(popupStatus==1){
        $("#backgroundPopup").fadeOut("slow");
        $("#popupContact6").fadeOut("slow");
        popupStatus = 0;
    }
}
//centering popup
function centerPopup1(){
    //request data for centering
    var windowWidth = document.documentElement.clientWidth;
    var windowHeight = document.documentElement.clientHeight;
    var popupHeight = $("body").height();
    var popupWidth = $("body").width();
    //centering
    $("#popupContact1").css({
        "position": "absolute",
        "top": windowHeight/2-popupHeight/2,
        "left": windowWidth/2-popupWidth/2
    });
    //only need force for IE6

    $("#backgroundPopup").css({
        "height": windowHeight
    });

}
function centerPopup2(){
    //request data for centering
    var windowWidth = document.documentElement.clientWidth;
    var windowHeight = document.documentElement.clientHeight;
    var popupHeight = $("body").height();
    var popupWidth = $("body").width();
    //centering
    $("#popupContact2").css({
        "position": "absolute",
        "top": windowHeight/2-popupHeight/2,
        "left": windowWidth/2-popupWidth/2
    });
    //only need force for IE6

    $("#backgroundPopup").css({
        "height": windowHeight
    });

}
function centerPopup3(){
    //request data for centering
    var windowWidth = document.documentElement.clientWidth;
    var windowHeight = document.documentElement.clientHeight;
    var popupHeight = $("body").height();
    var popupWidth = $("body").width();
    //centering
    $("#popupContact3").css({
        "position": "absolute",
        "top": windowHeight/2-popupHeight/2,
        "left": windowWidth/2-popupWidth/2
    });
    //only need force for IE6

    $("#backgroundPopup").css({
        "height": windowHeight
    });

}
function centerPopup4(){
    //request data for centering
    var windowWidth = document.documentElement.clientWidth;
    var windowHeight = document.documentElement.clientHeight;
    var popupHeight = $("body").height();
    var popupWidth = $("body").width();
    //centering
    $("#popupContact4").css({
        "position": "absolute",
        "top": windowHeight/2-popupHeight/2,
        "left": windowWidth/2-popupWidth/2
    });
    //only need force for IE6

    $("#backgroundPopup").css({
        "height": windowHeight
    });

}
function centerPopup5(){
    //request data for centering
    var windowWidth = document.documentElement.clientWidth;
    var windowHeight = document.documentElement.clientHeight;
    var popupHeight = $("body").height();
    var popupWidth = $("body").width();
    //centering
    $("#popupContact5").css({
        "position": "absolute",
        "top": windowHeight/2-popupHeight/2,
        "left": windowWidth/2-popupWidth/2
    });
    //only need force for IE6

    $("#backgroundPopup").css({
        "height": windowHeight
    });

}
function centerPopup6(){
    //request data for centering
    var windowWidth = document.documentElement.clientWidth;
    var windowHeight = document.documentElement.clientHeight;
    var popupHeight = $("body").height();
    var popupWidth = $("body").width();
    //centering
    $("#popupContact6").css({
        "position": "absolute",
        "top": windowHeight/2-popupHeight/2,
        "left": windowWidth/2-popupWidth/2
    });
    //only need force for IE6

    $("#backgroundPopup").css({
        "height": windowHeight
    });

}
//CONTROLLING EVENTS IN jQuery
$(document).ready(function(){   
    //LOADING POPUP
    //Click the button event!
    $("#button1").click(function(){
        //centering with css
        centerPopup1();
        //load popup
        loadPopup1();
    });
    $("#button2").click(function(){
        //centering with css
        centerPopup2();
        //load popup
        loadPopup2();
    });
    $("#button3").click(function(){
        //centering with css
        centerPopup3();
        //load popup
        loadPopup3();
    });
    $("#button4").click(function(){
        //centering with css
        centerPopup4();
        //load popup
        loadPopup4();
    }); 
    $("#button5").click(function(){
        //centering with css
        centerPopup5();
        //load popup
        loadPopup5();
    });
    $("#button6").click(function(){
        //centering with css
        centerPopup6();
        //load popup
        loadPopup6();
    });                 
    //CLOSING POPUP
    //Click the x event!
    $("#popupContactClose1").click(function(){
    disablePopup1();
});
    $("#popupContactClose2").click(function(){
    disablePopup2();
});
    $("#popupContactClose3").click(function(){
    disablePopup3();
});
    $("#popupContactClose4").click(function(){
    disablePopup4();
});
    $("#popupContactClose5").click(function(){
    disablePopup5();
});
    $("#popupContactClose6").click(function(){
    disablePopup6();
});
    //Click out event!
    $("#backgroundPopup").click(function(){
        disablePopup();
    });
    //Press Escape event!
        $(document).keypress(function(e){
        if(e.keyCode==27 && popupStatus==1){
            disablePopup1();
        }
    });
        $(document).keypress(function(e){
        if(e.keyCode==27 && popupStatus==1){
            disablePopup2();
        }
    });
        $(document).keypress(function(e){
        if(e.keyCode==27 && popupStatus==1){
            disablePopup3();
        }
    });
        $(document).keypress(function(e){
        if(e.keyCode==27 && popupStatus==1){
            disablePopup4();
        }
    });
        $(document).keypress(function(e){
        if(e.keyCode==27 && popupStatus==1){
            disablePopup5();
        }
    });
        $(document).keypress(function(e){
        if(e.keyCode==27 && popupStatus==1){
            disablePopup1();
        }
    });
}); 
```

tldr：我相信我需要为列表中的每个食谱创建一个新按钮。我只是不知道如何使用 djangos 标记语言来允许这样做，同时将 css 和 html 与 django 站点分开。由于我每页分页 6 个对象，我想我可以以某种方式命名 6 个按钮中的每一个，以对应于占据该位置的任何配方

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T03:06:38.403

网页的 DOM 中不应有少数具有相同 ID 的元素。您应该制作不同的 ID（例如，使用`{{ forloop.counter }}`）或使用类（这是您的情况，恕我直言）。因此，将一个类而不是 ID 附加到每个元素并在您的 JS 中引用该类。

# architecture - N 层问题

> ID：10096897
> 
> 赞同：1
> 
> 时间：2012-04-10T21:44:20.693
> 
> 标签：architecture

在一个典型的 N 层应用程序中，我对层的理解如下：

DAL - 与 db BLL 交互的代码 - 业务规则（这与 DAL 有何不同？它是否调用 DAL？什么是示例 BLL 类？）

表示层

另外，“服务层”在哪里出现？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T22:02:41.290

好吧，让我们从 DAL 开始。它可以让您在编写 BLL 时忘记 DB 的所有问题。即：DAL 负责插入、选择、更新、删除操作，负责事务，执行存储过程等。你如何在现实生活中使用它？假设您的数据库中有一个表 TBL1 。在 DAL 中创建一个名为 Tbl1Adapter 的类。使用虚拟方法 CreateRecord、GetRecord(id)、UpdateRecord(id, newData)、DeleteRecord(Id)。您的 BLL 将调用此方法。但是 Tbl1Adapter 类会在里面做数据库工作。它将调用存储过程或将 SQL 命令发送到 DB 或将使用一些棘手的 DB 驱动程序来满足您对 BLL 的要求 :) 除了 DAL 不仅意味着数据库，它还可以用于处理 ASCII 文件、输入设备、别的东西。该层提供数据。

接下来是 BLL：BLL 就是处理您的数据。它从 DAL 获取数据，并将数据提供给 DAL 以保存它。但是所有对数据的操作都出现在 BLL 中：数字相乘，条件 (IF...THEN...) 已满，执行一些其他火箭科学逻辑......所以 BLL 是您应用程序的核心。这一层是您的应用程序的大脑。

表示层：这是最容易理解且开发非常有趣的一层。这完全取决于您的应用程序如何呈现其工作结果。它可能是一个带有数据网格和按钮的窗体，它可能是一个网页，它可能是一些很酷的音频界面。这一层是应用程序的一个面：眼睛和耳朵从用户（或另一个系统）获取数据，嘴巴将数据提供给用户（或另一个系统）。

好吧，服务层有点棘手。它通常是其他应用程序的 API。假设我有一个可以乘以数字的网络服务。它被称为 MegaBrain :) 你有一个应用程序，它从用户那里获取两个数字。但是，您决定使用我的 MegaBrain 的服务，而不是在您的应用程序中实现 BLL - 给他这些数字并取回结果。所以服务层是……嗯，我不知道怎么用两个词来形容。服务层让您的应用程序使用另一个应用程序的 BLL。它类似于 DAL，但数据访问层仅存储和提供数据，而服务层对输入数据执行一些操作并产生一些结果（返回乘法结果或打开电视；）

# android - Android OnGestureListener onScroll MotionEvent

> ID：10096898
> 
> 赞同：0
> 
> 时间：2012-04-10T21:44:37.680
> 
> 标签：android, gesturedetector

OnGestureListener 的 onScroll 事件有问题。

方法签名如下：

```
public boolean onScroll(MotionEvent e1, MotionEvent e2, float distanceX, float distanceY); 
```

问题是 MotionEvent e1 在第一次滚动后似乎总是相同的。当我在示例中对第一个 srcolling 执行 e1.getX() 时，它返回 100。当我停止滚动并在屏幕的不同位置开始第二个滚动时，它也给出 100。只有 MotionEvent e2 改变了它的值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T21:52:17.550

`e1`将始终是触摸事件的初始运动事件（ACTION_DOWN 事件）。`e2`是当前的运动事件。

# javascript - 使用 toggleClass 将事件处理更新为新类

> ID：10096902
> 
> 赞同：0
> 
> 时间：2012-04-10T21:45:07.063
> 
> 标签：javascript, jquery

不是全职的 jQuery 或 Javascript 开发人员，如果是愚蠢的问题，我很抱歉。我想我需要像 live 函数这样的东西来交换我所做的类的交换来处理哪个值与选择器相关联。

我基本上有这样的标记：

禁用：

```
<span id="enable-1695" data-id="1695" class="unenable-item">unenable</span> 
```

用于启用：

```
<span id="enable-1695" data-id="1695" class="enable-item">enable</span> 
```

单击 unenable 后，我想使用 toggleClass 更新到 enable-item。此外，我需要选择器将运行时更新为这些新值。我认为这曾经是通过 live 方法发生的。我将如何实现这一目标。我目前正在手动执行此操作，但 Javascript 运行时未正确更新事件处理。

我将使用什么 javascript 来确保它正常工作？

任何帮助表示赞赏。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T22:46:58.533

首先，也许“禁用”在这里可能是一个更好的词选择，但我们不是在这里挑剔语法......

我假设当您单击“未启用”链接时，它应该更改为“启用”链接：

```
$('.unenable-item').live('click', function () {
    $(this)
        .removeClass('unenable-item')
        .addClass('enable-item')
        .text('enable');
    doSomethingWith($(this).data('id'));
});
$('.enable-item').live('click', function () {
    // the inverse of the above
}); 
```

在这里，我使用了[`live`](http://api.jquery.com/live)kinda-sorta 类似的函数`.on`或其已弃用的 alias `.bind`，只是它实际上并未将事件处理程序附加到选择器选择的对象上。相反，它将处理程序附加到文档，并且每当单击任何内容时，它都会检查选择器以查看它是否匹配。您还可以[`.delegate`](http://api.jquery.com/delegate/)用于更有针对性的匹配。文档中存在对这些事情的更好解释（链接）。

# c# - 匹配字符串中所有模式的最佳方法？

> ID：10096906
> 
> 赞同：4
> 
> 时间：2012-04-10T21:45:13.953
> 
> 标签：c#, regex, string

匹配给定字符串中存在的所有一组模式的最佳方法是什么。例如，假设我有数千个中等长度的字符串（每个大约 30-50 个字符）的集合。用户需要能够指定将评估每个字符串的一组模式（甚至不是模式，实际上只是一系列字符），字符串必须包含所有指定的模式。

所以假设用户想要评估以下模式：

```
123
xyz
abc 
```

一个字符串，如：

```
john_smith_123456_abcdef_9999_tuv 
```

将是错误的，因为它只包含 3 个中的 2 个，而字符串如下：

```
jane_doe_abcdef_123_9999_tuvwxyz 
```

会是真的，因为它包含所有 3

那么首先，regex 还是 string.Contains()？还是有一个权衡点，其中一个表现比另一个更好？其次，假设正则表达式是要走的路，那么用于这种情况的最佳正则表达式类型是什么？

多谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T21:48:10.987

以下正则表达式将起作用：

```
^(?=.*123)(?=.*xyz)(?=.*abc).*$ 
```

这使用[前瞻](http://www.regular-expressions.info/lookaround.html)来确保您要查找的三个子字符串包含在字符串中的某个位置，然后`.*`如果找到所有子字符串，则用于使用整个字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T21:49:42.470

您正在寻找的是大字符串中的特定字符串，对吗？如果是这样，正则表达式在这里不会对你有多大好处。当然，你可以做一些前瞻性的事情，但你并没有真正获得任何东西——无论是在可读性方面，还是在性能方面。正则表达式用于查找文本中的*模式*，而不是*子字符串*。

只需遍历列表、数组等...并使用 . 查找每个子字符串`Contains`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-10T21:50:10.597

正则表达式几乎总是简单匹配的较慢选项。`String.Contains()`除非您确实需要正则表达式功能，否则您应该使用它。如果只允许用户输入实际字符串进行测试，则不需要正则表达式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-11T01:07:34.790

没有经验法则来决定基于正则表达式的解决方案何时会太慢。事实上，没有理由期望正则表达式比任何其他技术都慢。像任何其他工具一样，如果您有能力使用它并且它似乎提供了最简单的方法，请继续尝试。当您编写了足够多的代码以使测试变得有意义时，请对其进行基准测试。

此外，如果模式如此简单以至于您可以使用，那么弄乱正则表达式并创建~~共振级联~~灾难性回溯场景`Contains()`的可能性也很小。请记住：正则表达式不会炸 CPU，正则表达式作者会。:D

 ~~我倾向于同意您对[FJ](https://stackoverflow.com/a/10096932/20938)提出的多重前瞻方法的看法；这份工作可能太慢了。`Contains()`它实际上与多次调用相同，但由于回溯而产生了额外的开销。无论如何都值得测试，但我会先尝试这种方法：

```
^(?>(?:123()|xyz()|abc()|.)+$\1\2\3) 
```

前瞻方法必须扫描每个搜索词的整个字符串，而这个正则表达式只扫描一次，并且永远不会回溯。每次它在一个搜索词上命中时，紧随该词的捕获组被认为*参与了比赛*，即使它什么也没捕获。当到达字符串末尾时，如果该组参与匹配，则每个反向引用再次“不匹配”；否则它报告失败并且整体匹配失败。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-10T21:50:15.747

对于这样一个简单的任务，正则表达式似乎有点矫枉过正。您实际上并不是在寻找一个*模式*，而是一个子字符串，在这种情况下`String.Contains()`非常适合这项工作（假设您没有没有告诉我们的“隐藏”要求）。~~

# wpf - Canvas.Top 不渲染

> ID：10096910
> 
> 赞同：0
> 
> 时间：2012-04-10T21:45:42.280
> 
> 标签：wpf, xaml, itemtemplate

我在 itemControl 中有一个画布，对于我使用省略号的数据模板。每个椭圆的位置代表一天中早上 6 点到晚上 11 点之间的时间。我根据画布的大小以及分配给椭圆的时间所在的位置绑定该值。椭圆顶部根本没有在画布中移动。我试图删除绑定并使用硬值，它仍然在同一个地方。

这是容器的 XAML

```
 <ItemsControl Grid.Column="1" ItemsSource="{Binding AngerData}" VerticalAlignment="Stretch" Canvas.ZIndex="1">
            <ItemsControl.ItemsPanel>
                <ItemsPanelTemplate>
                    <Canvas VerticalAlignment="Stretch"></Canvas>
                </ItemsPanelTemplate>
            </ItemsControl.ItemsPanel>
            <ItemsControl.ItemTemplate>
                <DataTemplate>
                    <Ellipse Height="10" Width="10" Stroke="White" StrokeThickness="1" 
                             Canvas.Top="{Binding Top, Converter={StaticResource ResourceKey=ellipsePositionConverter}, ConverterParameter=Month}" >"
                             Fill="{Binding AngerRating, Converter={StaticResource angerRatingConverter}}"
                             Canvas.ZIndex="100">
                    </Ellipse>
                </DataTemplate>
            </ItemsControl.ItemTemplate>
        </ItemsControl> 
```

这是转换器，我认为这不是问题，因为移除它不会移动椭圆的位置

```
public class CalendarDayEllipsePositionConverter : IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        double gridPosition = 0;

        if (parameter.ToString().Equals("Month", StringComparison.InvariantCultureIgnoreCase))
        {
            gridPosition = double.Parse(value.ToString()) * 110;
        }

        return gridPosition;
    }

    public object ConvertBack(object value, Type targetTypes, object parameter, System.Globalization.CultureInfo culture)
    {
        throw new NotImplementedException();
    }
} 
```

任何帮助，将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T12:46:45.073

Canvas 控件是否设置了高度？

您可以在 Converter 中的 Convert 方法的第一行设置一个断点，以检查它是否被调用？

...试试这个：

```
<Canvas VerticalAlignment="Stretch">
            <ItemsControl Grid.Column="1"
                      VerticalAlignment="Stretch"
                      Canvas.ZIndex="1"
                      ItemsSource="{Binding AngerData}">
                <ItemsControl.ItemTemplate>
                    <DataTemplate>
                        <Ellipse Canvas.Top="{Binding 
                                                  Converter={StaticResource ResourceKey=ellipsePositionConverter},
                                                  ConverterParameter=Month}"
                             Width="10"
                             Height="10"
                             Canvas.ZIndex="100"
                             Fill="Red"
                             Stroke="White"
                             StrokeThickness="1" />
                    </DataTemplate>
                </ItemsControl.ItemTemplate>

            </ItemsControl>
        </Canvas> 
```

# java - 将 Tapestry 应用程序从 5.0.18 升级到 5.3.2

> ID：10096911
> 
> 赞同：0
> 
> 时间：2012-04-10T21:46:03.013
> 
> 标签：java, javascript, tapestry

我正在将我的应用程序从 5.0.18 升级到 5.3.2，但出现以下错误。进行了一些更改，但不确定是哪一个导致了此错误。日志中没有任何内容。此错误会在 UI 上弹出。以下是所做的更改。

*   更改为`@IncludeStylesheet`_`@IncludeJavaScriptLibrary``@Import`
*   改为`RenderSupport`_`JavaScriptSupport`
*   改为`@ApplicationState`_`@SessionState`

我在 UI 中收到以下错误。

```
Function Tapestry.Initializer.activate() does not exist.
Function Tapestry.Initializer.formEventManager() does not exist 
```

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T06:23:51.140

它可以像缓存问题一样简单。清除缓存并查看它是否仍然存在。否则，听起来您有一些自定义 javascript 或来自第三方 Tapestry 组件的 javascript，这些组件是围绕 5.0.18 版 Tapesty.js 开发的。检查错误的 javascript 堆栈跟踪，查看调用的来源并更新 js 代码。

# ruby-on-rails - 红宝石键和值？

> ID：10096912
> 
> 赞同：0
> 
> 时间：2012-04-10T21:46:18.927
> 
> 标签：ruby-on-rails, ruby

我正在使用 ruby​​ 键和值字段将 jquery 函数保存到数据库中，一切正常，但是如何分离值参数？

```
def update_background
  key = "#{current_user}.profile.background"
  settings = Settings.find_by_key(key) || Settings.new(key: key)
  settings.value = params[:bg_id], params[:color_id]

  respond_to do |format|
    format.json do
      if settings.save
        render text: "success"
      else
        render text: "failure"
      end
    end
  end
end 
```

上面的代码工作正常，但问题是我的 css 格式不正确。代码通常显示如下

```
background:  url(../assets/stripes.png rgb(76, 72, 128)) 
```

在我的帮助文件中。

```
def saved_background
  key = "#{current_user}.profile.background"
  settings = Settings.find_by_key(key)
   if settings
     "url(#{settings.value})"
  end
end 
```

如何将 2 个参数的值分开，以便我的代码看起来像

```
background: rgb(76, 72, 128) url(../assets/stripes.png) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T21:49:15.747

您基本上是将数组保存到，并在字符串中`settings.value`全部使用它。`url`

要么将设置分成单独的值，要么单独使用每个元素：

```
"url(#{settings.value[0]}) #{settings.value[1]}" 
```

* * *

*编辑*啊，这是一个 AR 字段——所以它很可能被保存为数组的字符串 rep。微不足道的检查，你应该已经。

你需要以你真正想要的格式保存它——所以：

```
settings.value = "url(#{params[:bg_id]}) #{params[:color_id]}" 
```

和：

```
def saved_background
  key = "#{current_user}.profile.background"
  settings = Settings.find_by_key(key)
  settings.value if settings
end 
```

# c++ - 用 boost python 包装 C++ 模板类

> ID：10096914
> 
> 赞同：7
> 
> 时间：2012-04-10T21:46:21.470
> 
> 标签：c++, templates, boost, vector, wrapper

我正在尝试用展位 python 包装一个 C++ 模板类。我收到当前包装器的错误。该程序基本上是用于创建自定义矢量并在 python 中使用它。

```
#include <boost/python.hpp>

template <class T> class allocator{
  public:
  T* allocate(size_t);
  void deallocate(T* , size_t);
  void construct(T*,T);
  void destroy(T*);
};

template <class T> class vec{

  typedef T* iterator;
  typedef const T* const_iterator;
  typedef size_t size_type;
  typedef T value_type;

  vec(){ create();  }
  explicit vec(size_type n, const T& t =T()){ create (n,t);}
  vec(const vec& v){ create(v.begin(),v.end());}
  vec& operator= (const vec&);

  ~vec(){uncreate;}

  T& operator[](size_type i){return data[i];}
  const T& operator[]( size_type i) const { return data[i];}

  void push_back(const T& t){
    if (avail==limit)
      grow();
    unchecked_append(t);
  }
  size_type size() const{return avail-data;}

  iterator begin () {return data;}
  const_iterator begin () const {return data;}

  iterator end () {return avail;}
  const_iterator end () const {return avail;}

  iterator data;
  iterator limit;
  iterator avail;

  allocator<T> alloc;

  void uninitialized_fill(T*, T*, const T&);
  T* uninitialized_copy(T*,T*,T*);

  void create();
  void create(size_type,const T&);
  void create (const_iterator, const_iterator);
  void uncreate();

  void grow();
  void unchecked_append(const T&);
};

// create
template <class T> void vec<T>:: create(){
  data = avail = limit = 0;
}

template <class T> void vec<T>::create(size_type n, const T& val){
  data =alloc.allocate(n);
  limit = avail = data + n;
  uninitialized_fill(data, limit, val);
}

template <class T>
void vec<T>::create(const_iterator i, const_iterator j){
  data =  alloc.allocate(j - i);
  limit = avail = uninitialized_copy(i,j, data);
}

//uncreate
template < class T> void vec<T>::uncreate(){
  if (data){
    iterator it = avail;
    while (it != data)
      alloc.destroy(--it);

    alloc.deallocate(data, limit - data);
  }
  data = limit =avail = 0;
}

//grow
template <class T> void vec<T>::grow(){
  size_type new_size = max(2 * (limit-data), ptrdiff_t(1));

  iterator new_data = alloc.allocate(new_size);
  iterator new_avail = uninitialized_copy(data, avail, new_data);

  uncreate();

  data = new_data;
  avail = new_avail;
  limit = data + new_size;
}

template <class T> void vec<T>::unchecked_append(const T& val){
  alloc.construct(avail++,val);
} 
```

Boost python 包装如下：

```
BOOST_PYTHON_MODULE(vbox_shmem_box_vec_ext)
{
  using namespace boost::python;
  class_<vec>("vec");
    .def("size",&std_item<vec>::size,
      return_value_policy<copy_non_const_reference>());
    .def("begin",&std_item<vec>::begin,
      return_value_policy<copy_non_const_reference>());
    .def("end",&std_item<vec>::end,
      return_value_policy<copy_non_const_reference>());
} 
```

这是错误

```
vec_ext.cpp:113:13: error: type/value mismatch at argument 1 in template parameter list for 'template<class T, class X1, class X2, class X3> class boost::python::class_'
vec_ext.cpp:113:13: error:   expected a type, got 'vec'
vec_ext.cpp:114:5: error: expected primary-expression before '.' token
vec_ext.cpp:114:18: error: 'std_item' was not declared in this scope
vec_ext.cpp:114:30: error: missing template arguments before '>' token
vec_ext.cpp:114:31: error: '::size' has not been declared
vec_ext.cpp:114:31: note: suggested alternative:
size_fwd.hpp:20:38: note:   'boost::mpl::size'
vec_ext.cpp:116:5: error: expected primary-expression before '.' token
vec_ext.cpp:116:31: error: missing template arguments before '>' token
vec_ext.cpp:116:32: error: '::begin' has not been declared
vec_ext.cpp:116:32: note: suggested alternative:
begin_end_fwd.hpp:22:38: note:   'boost::mpl::begin'
vec_ext.cpp:118:5: error: expected primary-expression before '.' token
vec_ext.cpp:118:29: error: missing template arguments before '>' token
vec_ext.cpp:118:30: error: '::end' has not been declared
vec_ext.cpp:118:30: note: suggested alternative:
begin_end_fwd.hpp:23:38: note:   'boost::mpl::end' 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-10-30T19:25:39.727

您的任务最简单的方法是从 STL 向量接口继承并使用 Boost Python `vector_indexing_suite`，否则您必须手动为 Python 接口实现切片操作，这不是那么快速和琐碎。

但是对于原始问题**Wrap C++ template class**那么我在包装模板时遇到了下一个问题：

```
template<typename LinksT>
class Base {
public:
  virtual ~Base()  {}
  virtual Base* x() = 0;
};

template<typename LinksT>
class BaseWrap : public Base<LinksT>, public wrapper<Base<LinksT>> {
public:
  virtual Base<LinksT>* x() { return this->get_override("x")(); }
};

BOOST_PYTHON_MODULE(xxx)
{
    class_<BaseWrap<LinksT>, noncopyable>("Base", no_init)
      .def("x", pure_virtual(&Base<LinksT>::x), return_internal_reference<>())
      ;
} 
```

无法在 Linux 下的 GCC 4.8 上编译，认为直接类可以正常工作：

```
class Base {
public:
  virtual ~Base()  {}
  virtual Base* x() = 0;
};

class BaseWrap : public Base, public wrapper<Base> {
public:
  virtual Base* x() { return this->get_override("x")(); }
};

BOOST_PYTHON_MODULE(xxx)
{
    class_<BaseWrap, noncopyable>("Base", no_init)
      .def("x", pure_virtual(&Base::x), return_internal_reference<>())
      ;
} 
```

有2个问题：

> 1.  我必须指定**-ftemplate-backtrace-limit** =64（默认为 10）编译器标志以允许实例化更多内部模板
> 2.  我必须在声明**之前实例化模板：`BOOST_PYTHON_MODULE(xxx)`**

```
template class BaseWrap<SimpleLinks>;
BOOST_PYTHON_MODULE(xxx)
{ ... 
```

然后它工作正常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-09-09T10:54:42.340

您还可以为您的类添加另一个模板，这样您就不必为每个 int/float 类型编写/实例化。

```
template<typename LinksT>
class Base {
public:
  virtual ~Base()  {}
  virtual Base* x() = 0;
};

#include <boost/python.hpp>
using namespace boost::python;

template<typename LinksT>
class BaseWrap : public Base<LinksT>, public wrapper<Base<LinksT> > {
public:
  virtual Base<LinksT>* x() { return this->get_override("x")(); }
};

template<typename LinksT>
void export_virtualfunction()
{
    class_<BaseWrap<LinksT>, boost::noncopyable>("Base", no_init)
        .def("x", pure_virtual(&Base<LinksT>::x), return_internal_reference<>())
        ;
}

BOOST_PYTHON_MODULE(test_template_python)
{
    export_virtualfunction<int>();
} 
```

注意导出类的不同类型。给它起不同的名字。参考[链接](http://imicrov.com/small-tech/python/export-c-template-class-to-python-boost)

# java - 使用 Java 使用 jxl 库向 Excel 文件中的单元格添加注释

> ID：10096915
> 
> 赞同：5
> 
> 时间：2012-04-10T21:46:25.700
> 
> 标签：java, excel, jxl

我正在尝试向 Excel 中的单元格添加注释。我正在使用 jxl 库来做到这一点：

```
 cell = sheet.getWritableCell(1, 2); // cols, rows
   WritableCellFeatures wcf = cell.getWritableCellFeatures();
   wcf.setComment("comment2"); 
```

最后一行返回：`Exception in thread "AWT-EventQueue-0" java.lang.NullPointerException`。尽管进行了多次尝试，但我无法修复它。帮助将不胜感激。谢谢你。

**--EDIT--**
这是修改后的addNumber方法：

```
private static void addNumber(WritableSheet sheet, int column, int row,
        double d) throws WriteException, RowsExceededException {

    Number number;
    number = new Number(column, row, d, timesStandard);

    //sheet.addCell(number); // need to add the cell first

    if (user wants to add a comment) {
        WritableCellFeatures wcf = new WritableCellFeatures();
        wcf.setComment("the comment");
        number.setCellFeatures(wcf);
    }

    //sheet.addCell(number); // but may need to add the cell with comments as well
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-14T20:02:16.270

您之前是否在该位置添加了一个单元格？问题是您不能在 an 上设置单元格特征，`EmptyCell`并且它将始终`null`作为其单元格特征返回。

如果您先添加一个单元格，它会起作用（为清楚起见，省略了 try/catch），如下面的代码所示。请注意，它还首先`WritableCellFeatures`在新`Label`单元格上设置 a，因为最初，单元格特征始终为`null`。

```
 WritableWorkbook book = Workbook.createWorkbook(new File("output.xls"));
            WritableSheet sheet = book.createSheet("Some Sheet", 0);

            Label label = new Label(1, 2, "Some label"); 
            sheet.addCell(label); // add cell!

            WritableCellFeatures wcf = new WritableCellFeatures();
            wcf.setComment("Hello!");

            // set cell features!
            label.setCellFeatures(wcf);

            book.write();
            book.close(); 
```

**将其与 OP 中的方法一起使用：**

我修改了返回创建（并添加！）`Number`实例的方法。如果您不希望这样，您可以`WritableWorkbook.getWritableCell()`使用相同的行/列来检索相同的单元格。

```
public static void main(String[] args) throws IOException, RowsExceededException, WriteException {

    File file = new File("output.xls");
    WritableWorkbook workbook = Workbook.createWorkbook(file);
    WritableSheet sheet = workbook.createSheet("First Sheet", 0);

    Number number = addNumber(sheet, 3, 2, 565d);

    WritableCellFeatures wcf = number.getWritableCellFeatures();
    if (wcf == null) wcf = new WritableCellFeatures();
    wcf.setComment("the comment");
    number.setCellFeatures(wcf);

    workbook.write(); 
    workbook.close();

}

private static Number addNumber(WritableSheet sheet, int column, int row,
        double d) throws WriteException, RowsExceededException {

    Number number = new Number(column, row, d, timesStandard);
    sheet.addCell(number); // need to add the cell first
    return number;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-14T21:32:15.597

从评论和：

*   [http://www.docjar.org/html/api/jxl/demo/ReadWrite.java.html](http://www.docjar.org/html/api/jxl/demo/ReadWrite.java.html)
*   [http://kickjava.com/src/jxl/demo/Write.java.htm](http://kickjava.com/src/jxl/demo/Write.java.htm)

我做的 ：

```
private static void addNumber(WritableSheet sheet, int column, int row,
    double d) throws WriteException, RowsExceededException {

   Number number;
   number = new Number(column, row, d, timesStandard);

   sheet.addCell(number);

   if (user wants to add a comment) {
     WritableCell cell = sheet.getWritableCell(column, row)
     Label l = (Label) cell;
     WritableCellFeatures cellFeatures = new WritableCellFeatures();
     cellFeatures.setComment("the cell comment");
     l.setCellFeatures(cellFeatures);
     sheet.addCell(l);
  }

} 
```

# delphi - 检查字符是否是 Delphi (Unicode) 中的字母

> ID：10096919
> 
> 赞同：12
> 
> 时间：2012-04-10T21:46:44.263
> 
> 标签：delphi, delphi-xe, pascal

Delphi 中是否有预定义的字符集来检查字符是否为字母？

在可可中，我使用类似的东西

```
if ([[NSCharacterSet whitespaceCharacterSet] characterIsMember:character]) 
```

我知道我可以在德尔福做

```
if c in ['A'..'Z'] then 
```

但这会涵盖 Á、À、Ú、É 等外国重音字符吗？

在 Delphi 中检查这一点的最有效方法是什么。我需要检查一个字符串是否完全由字母组成。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-04-10T21:48:33.297

尝试使用[`Character.TCharacter.IsLetter`](http://docwiki.embarcadero.com/VCL/en/Character.TCharacter.IsLetter)or[`Character.IsLetter`](http://docwiki.embarcadero.com/VCL/en/Character.IsLetter)函数

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-06-13T10:45:35.997

在 Rad Studio XE4 上，我被告知`TCharacter`已弃用并改为使用[`System.Character.TCharHelper`](http://docwiki.embarcadero.com/Libraries/Tokyo/en/System.Character.TCharHelper)。它是一个记录助手，`Char`使用方法语法中的函数扩展类型。这意味着我现在添加`System.Character`到我的使用列表中，然后可以调用例如`C.IsLetterOrDigit`where `C`is of type `Char`。

# php - 更改路径/目录破坏了 SSL 证书？

> ID：10096920
> 
> 赞同：-1
> 
> 时间：2012-04-10T21:47:01.337
> 
> 标签：php, apache, ssl, subdomain

[我为http://store.mywebsite.com](http://store.mywebsite.com)订购了 3 年的 SSL 证书，它在我所有的测试中都运行良好。该网站今天上线了，这就是正在发生的事情：

我正在为商店（Lemonstand）使用 CMS，它动态生成带有漂亮 URL 的页面（例如 mywebsite.com/store）。

之前，在测试中，我实际上将 CMS 安装在 SSL 证书所用的目录 /store 中。我将 CMS 目录移到了根目录（我一直都在计划这样做），并将与商店相关的页面仍然链接到 /store，但现在它们是动态生成的，而不是真正的文件夹。

现在 SSL 证书不起作用。子域也不起作用。

有什么办法可以配置它工作吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T21:53:37.273

您想要一个包含 subjectAltName 的证书，`mywebsite.com`并且`store.mywebsite.com`这种双域设置可以使用单个证书。URL 的目录部分不相关。`mywebsite.com`并且`store.mywebsite.com`是 Internet X.509 PKI 中 SSL/TLS 上下文中的不同域。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T21:52:13.993

如果您的证书适用于，除非它是证书，否则它对（或“存储”之外的任何子域）`store.website.com`无效。`www.website.com``*.website.com`

# objective-c - 无法实现俄罗斯方块移动方法

> ID：10096925
> 
> 赞同：0
> 
> 时间：2012-04-10T21:47:17.453
> 
> 标签：objective-c, ios

我现在正在写俄罗斯方块，我有一种方法可以将数字一个一个地放到屏幕上的同一位置，该方法在双击屏幕后开始工作，并在 while 循环中调用：

```
while (gameState == gamePlaying) {} 
```

问题是我不知道如何使我的`moveLeft`or`moveRight`方法通过`UISwipeGesture`甚至仅通过使用按钮来工作，因为在 drop 方法有效时，我无法使用任何按钮或手势（如果我理解正确的话）那么如何我可以创建一个比目前有效的方法具有更高优先级的按钮吗？！（或`UISwipeGestures`在这种情况下如何使用？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T22:27:06.337

我还建议使用 NSTimer 来安排游戏逻辑。如果您只是想在后台线程中执行操作以使用户界面不会阻塞，您可以使用例如：

```
-(void)performGameLogic
{
    //Do the game logic
}

-(void)startGame
{
    [self performSelectorInBackground:@selector(performGameLogic) withObject:nil];
} 
```

NSTimer 变体：

```
@interface Game
{
    NSTimer * timer;
}

-(void)performGameLogic
{
    //Do the game logic
}

-(void)startGame
{
    timer = [NSTimer scheduledTimerWithTimeInterval: 0.1 target:self selector:@selector(performGameLogic:) userInfo:nil repeats: YES];
}

@end 
```

# facebook - 从一个视频播放器切换到另一个视频播放器莫名其妙地破坏了 Facebook 共享

> ID：10096926
> 
> 赞同：1
> 
> 时间：2012-04-10T21:47:30.823
> 
> 标签：facebook, facebook-graph-api, video

我工作的站点已决定从使用 Flowplayer 切换到使用 JWPlayer。除了切换短代码等明显的烦恼之外，进行切换还破坏了 Facebook 在新闻源中显示视频的能力。

所有打开的图元标记都在那里。由于他们安装了所有插件，因此存在一些重复，但使用旧播放器（即 Flowplayer）的视频仍然可以正常显示。

我们在 Wordpress 上，为 flowplayer 使用 fv-wordpress-flowplayer 插件并进行了一些修改，为 jw player 使用 jw-player-plugin-for-wordpress，也进行了非常小的修改。

jw 播放器的测试页面是[http](http://elitedaily.com/elite/videos/test-video-2/)
://elitedai​​ly.com/elite/videos/test-video-2/ 使用 flowplayer 的同一视频的页面，在 facebook 提要中工作，在[http ://elitedai​​ly.com /精英/视频/凯特厄普顿/](http://elitedaily.com/elite/videos/kate-upton/)

（很抱歉视频。我只是抓住了我发现的第一个已经在网站上的视频，没想到会与大家分享。应该是SFW，但绝对是一个女模特的视频穿着轻薄的衣服拍摄。）

两个页面的 facebook 调试器链接：

[已编辑——因为我是新来的，所以不会让我发布两个以上的链接。我想我会这样做是为了您的方便，但我想我会让您使用 google facebook 调试器并自己输入网址]

这是 facebook 发现的 og 标签：

```
<meta property="fb:app_id" content="183957921720103" />
<meta property="og:description" content="test meta" />
<meta property="og:site_name" content="Elite Daily" />
<meta property="og:type" content="article" />
<meta property="og:title" content="Test video" />
<meta property="og:url" content="http://elitedaily.com/elite/videos/test-video-2/" />
<meta property="og:site_name" content="Elite Daily" />
<meta property="og:description" content="Test excerpt " />
<meta property="og:type" content="video.other" />
<meta property="og:video:type" content="application/x-shockwave-flash" />
<meta property="og:video" content="http://cdn.elitedaily.com/elite/wp-content/uploads/jw-player-plugin-for-wordpress/player/player.swf?file=http%3A%2F%2Felitedaily.com%2Felite%2Fwp-content%2Fuploads%2F2012%2F03%2FBest_of_Upton.flv" /> 
```

顺便说一句，我最初尝试将 flowplayer swf 用于 og 视频标签（为了方便起见），但这也不起作用。输入浏览器时，这两个网址都可以正常工作。

欢迎任何想法、攻击路线，或者当然是答案。我不确定在这里还能做什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T15:07:53.893

问题实际上是它缺少 og:image 标签。这是因为 Flowplayer 和 JW 播放器处理占位符图像的方式不同。

对于 Flowplayer，图像实际上是作为`img`标签放置在页面上的，而 JW 播放器将其直接拉入 flash 对象中，这意味着 Facebook 无法在页面上找到它。在这种情况下，页面上没有其他图像，因此没有缩略图。

底线：如果页面上没有图像或 og:image 标签，Facebook 将不会播放您的视频。

# vector - 如何知道两条线段是否接近共线

> ID：10096930
> 
> 赞同：4
> 
> 时间：2012-04-10T21:48:05.963
> 
> 标签：vector, parallel-processing, dot-product, cross-product

由于浮点精度，我在确定两条线段是否共线时遇到了一些麻烦。如何确定线段是否共线并具有一定的公差？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T22:18:30.923

编辑：

如果线段包含两个相同的点，则它们是共线的。如果它们共享一个点并且几乎平行，则它们几乎是共线的。

如果向量之间的角度小于您声明的阈值，则向量实际上是平行的。可能小于 0.000027 度，即十分之一度秒的十进制等值（以纬度距离表示，相当于赤道处的经度距离，相差约 10 英尺；这大约是民用 GPS 的精度）。

您没有告诉我们您使用的是什么语言或库；在 .NET 的 System.Windows.Media.3D 库中有一个 Vector3D 结构，它有一个 AngleBetween() 方法，使这个检查成为一个单行。

“基本”数学（它实际上是向量三角函数，而不是大多数定义的“基本”概念）是 θ=cos ^(-1) ( A*B / |A||B| ); 即，两个向量的标量积除以它们的大小的乘积的反余弦值。

向量 A 和向量 B 的点积（均包含 X、Y 和 Z）为 X [A] X [B] + Y [A] Y [B] + Z [A] Z [B]。向量 A 的大小为 sqrt(X [A] ² + Y [A] ² + Z [A] ² )。

因此，在伪 C-ish 中：

```
//Vector is a simple immutable class or struct containing integer X, Y and Z components
public bool CloseEnough(Vector a, Vector b, decimal threshold = 0.000027m)
{
   int dotProduct = a.X*b.X + a.Y*b.Y + a.Z*b.Z;
   decimal magA = sqrt(a.X*a.X + a.Y*a.Y + a.Z*a.Z); //sub your own sqrt
   decimal magB = sqrt(b.X*b.X + b.Y*b.Y + b.Z*b.Z); //sub your own sqrt

   decimal angle = acos(dotProduct/(magA*magB)); //sub your own arc-cosine

   if(angle <= threshold
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-01-07T01:41:40.947

如果两个段接近共线，我需要知道我的应用程序。这是关于从激光扫描中提取线条。我将解释我正在使用的解决方案。它工作得很好。（原谅我的英语！）

我认为**KeithS**提出的近似共线性的条件是错误的。

> 如果它们共享一个点并且几乎平行，则它们几乎是共线的。

如果两条线段（或线）平行但很接近，我们可以认为它们接近共线。

我的解决方案在于使用线条的极坐标表示。

> y * sin(theta) = rho - x * cos(theta)

通过这种表示，可以使用 theta 和 rho 将一条线表示为一个点。诀窍是，如果这些“点”很近，那么这些线几乎是共线的。您只需要计算欧几里德距离并使用阈值来确定它们是否接近共线。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-08-22T12:14:17.250

根据您对“几乎共线”的定义，几种解决方案似乎是合理的。

# 通过 4 个点拟合一条线

两条线段由 4 个点定义，您可以通过两条线段的起点和终点拟合一条线。

您可以使用 SVD 通过 4 个点获得一条线的最小二乘拟合，类似于此答案：[https ://stackoverflow.com/a/2333251/5069869](https://stackoverflow.com/a/2333251/5069869)

使用这种方法，您可以考虑线段的方向以及第一条线段的末端和第二条线段的起点之间的偏移量。

但是，如果两条线段平行但不共线，并且相对于它们之间的距离较短，则拟合线将垂直于两条线段。这对于单元测试来说没有问题，你喜欢“几乎共线到零后面的几个数字”，但对于其他应用程序，这可能是一个问题。

# 独立使用平均方向和平均位置

或者，您可以使用两条线段的平均方向作为目标线的方向来构造目标线。`(v1/|v1|+v2/|v2|)/2`如果向量`v1`和`v2`指向相同的方向， Tuis 可以通过 计算。然后使用 4 个点的平均值作为目标线的锚点。

最后，您可以计算 4 个点到目标线的各个[距离](http://mathworld.wolfram.com/Point-LineDistance3-Dimensional.html)，并将它们用作共线性的度量。

# 段的长度和段之间的空间的影响

当您找到“几乎共线”的合适定义时，您需要考虑不同长度的线段如何影响结果，正如 Vahid 在评论中指出的那样。此外，您应该考虑两条线段之间的空间的影响。

通过计算 4 个点到目标线的距离，我试图减少不同段长度的影响（每个段只贡献 2 个点），但我不能完全消除它

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-06-11T08:01:22.280

我认为，如果两条线近似共线，则应满足以下条件：

> 1.  两条线的夹角小于一个阈值
> 2.  一个点到两条线段的距离小于一个阈值

我的解决方案：

```
import math
import numpy as np

def line_to_angle(line, use_abs=True):
    x1, y1, x2, y2 = line[:4]
    if abs(x2 - x1) <= 0.0000001:
        angle_val = 90 if y2 > y1 else -90
    else:
        angle_val = np.degrees(math.atan((y2 - y1) / (x2 - x1)))
    if use_abs:
        angle_val = abs(angle_val)
    return angle_val

def distance_line_point(p, line):
    p1 = np.array(p)
    p2, p3 = np.array(line[:2]), np.array(line[2:4])
    return np.abs(np.cross(p2-p1, p1-p3) / np.linalg.norm(p2-p1))

def near_collinear(linea, lineb, angle_thres=1.5, distance_thres=5):
    pointa = ((linea[0] + lineb[0]) / 2, (linea[1] + lineb[1]) / 2)
    pointb = ((linea[2] + lineb[2]) / 2, (linea[3] + lineb[3]) / 2)
    mid_angle = line_to_angle([*pointa, *pointb], use_abs=False)
    angle_a, angle_b = line_to_angle(linea, use_abs=False), line_to_angle(lineb, use_abs=False)
    angle_diff_a, angle_diff_b = abs(angle_a - mid_angle), abs(angle_b - mid_angle)
    angle_diff_a = min(angle_diff_a, 180 - angle_diff_a)
    angle_diff_b = min(angle_diff_b, 180 - angle_diff_b)
    if angle_diff_a > angle_thres or angle_diff_b > angle_thres:
        return False
    mid_point = ((pointa[0] + pointb[0]) / 2, (pointa[1] + pointb[1]) / 2)
    distance_a = distance_line_point(mid_point, linea)
    distance_b = distance_line_point(mid_point, lineb)
    if distance_a > distance_thres or distance_b > distance_thres:
        return False
    return True 
```

# php - 如何使用 Windows 在 Potgresql 上安装 PL/php？

> ID：10096947
> 
> 赞同：1
> 
> 时间：2012-04-10T21:49:12.977
> 
> 标签：php, windows, postgresql

我正在尝试在我的 PostgreSQL 服务器上安装它以使用 PHP [https://public.commandprompt.com/documents/5](https://public.commandprompt.com/documents/5)编写程序， 文档看起来很棒，但问题是它们适用于 linux，而我的公司只能访问 Windows服务器。有人可以告诉我如何在 Windows 上安装 PL/php 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T04:38:48.867

在我看来，您可能需要从源代码编译，可能使用 mingw 或 Visual Studio，并且您需要 PostgreSQL 头文件。

我的建议是避免使用这种语言的插件并等待其他人为您做，或者参与其中，为自己构建它，然后发布您自己的 Windows 构建作为您的业务的广告并努力减少移植维护.

# sql - 非常棘手的 ADO.Net 情况，不会引发错误，但应该

> ID：10096949
> 
> 赞同：0
> 
> 时间：2012-04-10T21:49:18.020
> 
> 标签：sql, sql-server-2008, ado.net, raiserror

我有如下 ADO.Net 代码，它调用存储过程。在存储过程中，我首先通过 SELECT 查询获取结果集，`RAISERROR`如果传递的 @companyId 参数值不存在，则在 SELECT 语句调用后调用。我已经多次使用 @companyId 的值对此代码运行单元测试，因此`RAISEERROR`被调用，但我从未看到`ExecuteReader`引发错误的调用。**为什么会发生这种奇怪的违反直觉的事情？**

```
sqlCmd = new SqlCommand("dbo.xyz_sp_Attributes_GetValues", new  SqlConnection(System.Configuration.ConfigurationManager.ConnectionStrings["VHA_EDM_ConnectionString"].ConnectionString));
sqlCmd.CommandType = CommandType.StoredProcedure;
sqlCmd.Parameters.AddWithValue("@attributeId", attributeId);
sqlCmd.Parameters.AddWithValue("@companyId", companyId);
sqlCmd.Parameters.AddWithValue("@attributeScope", "Company");
sqlCmd.Connection.Open();
SqlDataReader dr = sqlCmd.ExecuteReader(CommandBehavior.CloseConnection);
while (dr.Read())
{
    attributeValue = dr["AttributeValue"].ToString();
} 
```

存储过程代码如下所示

```
SELECT col1, col2, ... where CompanyId = @companyId and AttributeId = @attributeId
if @companyId not exists (select companyId from Company where CompanyId = @companyId)
begin
 set @errMessage = N'Invalid Company Error'
 RAISERROR (@errMessage, 16, 1)
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T22:03:34.677

在这种情况下，将返回多个记录集。第一个是空的，这就是为什么你没有收到任何错误。您必须调用 NextRecordset 来获取错误。

```
dr.NextResult(); // This will throw the error caused by RAISEERROR 
```

在客户端代码中进行错误检查而不是调用 RAISEERROR 会容易得多，在任何情况下都必须将其作为异常处理。

[使用 SqlDataReader 在客户端捕获 Sql Server RAISERROR](http://blogs.msdn.com/b/spike/archive/2009/04/06/catch-a-sql-server-raiserror-at-client-side-using-sqldatareader.aspx)

# javascript - 如何在页面加载后将焦点设置为 goog.ui.Component 或 goog.ui.Control 子类组件？

> ID：10096950
> 
> 赞同：1
> 
> 时间：2012-04-10T21:49:21.203
> 
> 标签：javascript, keyboard, custom-component, google-closure-library

我制作了这样的自定义组件：

```
my.Cmp = function(opt_domHelper) {
    goog.ui.Component.call(this, opt_domHelper);

    ...

};
goog.inherits(my.Stamina, goog.ui.Component);

my.Cmp.prototype.createDom = function() {
    this.decorateInternal(this.dom_.createDom('div', 'сmp-inner-div'));
};

my.Cmp.prototype.decorateInternal = function(element) {
    my.Cmp.superClass_.decorateInternal.call(this, element);
    var elem = this.getElement();

    ...

};

my.Cmp.prototype.disposeInternal = function() {
    my.Stamina.superClass_.disposeInternal.call(this);

    ...

};

my.Cmp.prototype.enterDocument = function() {
   ...
}

my.Cmp.prototype.exitDocument = function() {
   ...
} 
```

然后我在 html 文档中创建了一个实例

```
var cmp = new my.Cmp();
cmp.render(goog.dom.getElement('cmpContainerDivId')); 
```

该组件使用键盘。它在鼠标单击后获得键盘焦点并且工作正常。我找不到如何在页面加载后给予 kb 焦点。我试图从 goog.ui.Control 继承 my.Cmp 组件并使用它的 setFocused 方法。getState() 显示焦点集中，但在单击鼠标或按下 Tab 键之前​​对 kb 键入没有反应。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T03:24:24.383

大概有以下几点：

```
my.Comp.prototype.setFocused = function(focused) {
    goog.base(this, 'setFocused', focused);
    if (focused) this.getElement().focus();
};

// ...

goog.events.listen(goog.dom.getWindow(), goog.events.EventType.LOAD, function() {
    // ... other init
    theCmp.setFocused(true);
}); 
```

`setFocused()`似乎主要用于簿记，类似`isFocused()`和类似的状态方法。

# asp.net-mvc - 如何在 MVC4 中调用自定义模型绑定器？

> ID：10096957
> 
> 赞同：5
> 
> 时间：2012-04-10T21:49:53.453
> 
> 标签：asp.net-mvc, asp.net-mvc-4, asp.net-web-api

所以似乎有几个人（比如[这里](http://geekswithblogs.net/jdothoffman/archive/2012/03/06/mvc-4-beta-web-api-bug-with-binding-route-values.aspx)和[这里）对 ApiControllers 的](http://blogs.msdn.com/b/carlosfigueira/archive/2012/02/27/disabling-model-binding-on-asp-net-web-apis-beta.aspx)**MVC4 模型绑定**有问题，但他们似乎都没有完全解决我看到的问题。

我真正想做的就是更改整数列表的数组绑定行为。所以说我有一个这样的请求类型：

```
public class MyRequestModel
{
    public List<long> ListOfIntegers { get; set; }

    ...
} 
```

还有一个像这样的 API GET 方法：

```
public ResultsResponseModel Get(MyRequestModel request)
{
    // use request.ListOfIntegers meaningfully

    ...

    return response;
} 
```

我基本上希望能够说出`/api/results/?listOfIntegers=1+2+3+4+5`并对`List<long>`财产有这样的决心。

我已经尝试过我常用的模型绑定技巧，但与**MVC4 中的大多数 Web API 一样，它似乎有一个完全独立的模型绑定路径。**

我得到的最远的是使用`System.Web.Http.ModelBinding.ModelBinder`属性`MyRequestModel`，并创建一个“实现”的模型绑定器`System.Web.Http.ModelBinding.IModelBinder`。这始终会产生一个对象引用异常，其堆栈跟踪从未触及我的代码。

有人打这个吗？对下一步要尝试什么有想法？

**更新**：这是我在自定义中捕获的堆栈跟踪`ExceptionFilterAttribute`：

```
Object reference not set to an instance of an object.
    at System.Web.Http.ModelBinding.DefaultActionValueBinder.BindParameterValue(HttpActionContext actionContext, HttpParameterBinding parameterBinding)
    at System.Web.Http.ModelBinding.DefaultActionValueBinder.<>c__DisplayClass1.BindValuesAsync>b__0(RequestContentReadKind contentReadKind)
    at System.Threading.Tasks.TaskHelpersExtensions.<>c__DisplayClass38.<ToAsyncVoidTask>b__37()
    at System.Threading.Tasks.TaskHelpers.RunSynchronously[TResult](Func`1 func, CancellationToken cancellationToken) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T03:48:01.193

如果您在谈论 ApiControllers，那么您正在尝试在 Web API 和现在 MVC 中进行模型绑定 这是一个示例模型绑定器

```
 public class MyRequestModelBinderProvider : ModelBinderProvider
    {
        MyRequestModelBinder binder = new MyRequestModelBinder();
        public IdeaModelBinderProvider()
        {          
        }

        public override IModelBinder GetBinder(HttpActionContext actionContext, ModelBindingContext bindingContext)
        {
            if (bindingContext.ModelType == typeof(MyRequestModel))
            {
                return binder;
            }

            return null;
        }
    } 
```

这是注册自定义模型绑定器提供程序的示例

```
 IEnumerable<object> modelBinderProviderServices = GlobalConfiguration.Configuration.ServiceResolver.GetServices(typeof(ModelBinderProvider));
 List<Object> services = new List<object>(modelBinderProviderServices);
 services.Add(new MyRequestModelBinderProvider());
 GlobalConfiguration.Configuration.ServiceResolver.SetServices(typeof(ModelBinderProvider), services.ToArray()); 
```

现在在您的自定义模型绑定器中，您使用上下文来访问查询字符串值

```
 public class MyRequestModelBinder :  IModelBinder
    {
        public MyRequestModelBinder()
        {

        }

        public bool BindModel(HttpActionContext actionContext, ModelBindingContext bindingContext)
        {
            MyRequestModel yourModel; 
            //use contexts to access query string values
            //create / update your model properties

            bindingContext.Model = yourModel;  
            //return true || false if binding is successful
        } 
```

确保您使用 WebAPI 而不是 MVC 的类和接口。有些名称相同，但命名空间和 dll 不同

# android - Android 读写图库

> ID：10096958
> 
> 赞同：0
> 
> 时间：2012-04-10T21:50:02.100
> 
> 标签：android

是否可以在 Android 上读取和写入图库？我希望能够获取图库中所有图像的列表，并将这些图像存储到服务器上。我还希望能够从服务器下载图像并将它们保存到图库中。那可能吗？

我似乎找不到执行此操作的 API，所以如果您能指出我正确的方向，那就太好了！谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T22:20:22.877

`ContentResolver.query()`您可以使用该方法从图库中阅读。例如：

```
Cursor c = getContentResolver().query( Images.Media.EXTERNAL_CONTENT_URI, IMAGES_PROJECTION, null, null, Images.Media.DEFAULT_SORT_ORDER ); 
```

这将为您提供`Cursor`数据库中的所有照片。`IMAGES_PROJECTION`是`String[]`您有兴趣从中获取值的列。这些列在 中列出`Images.ImageColumns`。

要获取`Bitmap`图库中每张图片的值，您需要获取`_ID`光标中每一行的值，然后调用：

```
Images.Media.getBitmap( getContentResolver(), Uri.withAppendedPath( Images.Media.EXTERNAL_CONTENT_URI, Integer.toString( id ) ) ); 
```

要写入内容数据库，您可以使用：

```
Images.Media.insertImage( getContentResolver(), bitmap, title, description ); 
```

插入视频有点复杂。如果您需要示例代码，请告诉我，我也可以为您获取。

# amazon-ec2 - 如何将自定义操作系统移植到 EC2？

> ID：10096963
> 
> 赞同：2
> 
> 时间：2012-04-10T21:50:18.973
> 
> 标签：amazon-ec2

是否可以在 EC2 上运行自定义操作系统？我四处寻找，无法找到如何完成或是否可以完成的答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T22:47:43.290

您对“自定义操作系统”的定义是什么？您可以为 Windows Server 和各种 Linux 发行版 (http://aws.amazon.com/ec2/#os) 使用各种预构建的机器映像 (AMI)。您也可以修改这些 AMI 并将这些修改保存为自定义 AMI。

# javascript - 更改使用 bbui.js (data-bb-img) 创建的图像列表的图标

> ID：10096965
> 
> 赞同：1
> 
> 时间：2012-04-10T21:50:34.580
> 
> 标签：javascript, blackberry-webworks

[bbUI.js](https://github.com/blackberry/bbUI.js)通过此语法创建一个针对手指使用优化的图像列表

```
<div data-bb-type="screen">
    <div data-bb-type="image-list">
        <div data-bb-type="item" data-bb-img="icon1.png" data-bb-title="Hi">foo</div>
    </div>
</div> 
```

它创建这个 HTML：

```
<div id="1" class="bb-hires-image-list-item" data-bb-type="item" onmouseover="this.setAttribute('class','bb-hires-image-list-item-hover')" onmouseout="this.setAttribute('class','bb-hires-image-list-item')" x-blackberry-focusable="true">
<img src="images/icons/icon11.png">
<div class="details">
    <span class="title">Hi</span>
    <div class="description">foo</div>
</div>
</div> 
```

现在，我想同时更改描述 div 中的 img src 和 foo，但我没有找到使用 Javascript 的方法，我会执行“getElementById”，但它没有 ID。

我怎么能那样做？

# c++ - 标头中定义并从 cpp 文件错误调用的函数

> ID：10096968
> 
> 赞同：1
> 
> 时间：2012-04-10T21:50:40.453
> 
> 标签：c++, oop, object, static

我有这两个简单的文件，它们定义了一个带有 tryME 函数的 C++ 类

```
______myclass.h________________
#pragma once

void tryME()
{

}

class myclass
{
public:
    myclass(void);
    myclass(void);

    void callTryME();
};

_________myclass.cpp____________

#include "myclass.h"

myclass::myclass(void)
{
}

myclass::~myclass(void)
{
}

void myclass::callTryME()
{
    tryME();
} 
```

这给出了错误

> 1>myclass.obj : 错误 LNK2005: "void __cdecl TryME(void)" (?TryME@@YAXXZ) 已在 tryout.obj 中定义 1>C:\tryout.exe : 致命错误 LNK1169: 找到一个或多个多重定义的符号

如果我将 tryME() 函数声明为静态，问题就解决了。但为什么？

我知道 .h 文件包含在 .cpp 文件中，然后编译（到翻译单元中）并且静态变量和函数对它们包含的整个翻译单元都是可见的，但是为什么程序不起作用没有“静态”关键字？函数 tryME 应该在类之外是“全局的”，因此是可见的，不是吗？调用是否在 tryME() 之前放置了“this->”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T21:53:11.340

这：

```
inline void tryME()
{

} 
```

否则，您将违反**单一定义规则**。

在头文件中定义非`inline`方法将导致它被包含该头文件的所有翻译单元导出，因此错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T21:55:04.617

它确实是可见的。它在每个加载头文件的文件中作为单独的定义可见，因此在链接时，链接器面临多个同名的函数，并正确地抱怨它不知道您打算使用哪个函数。

不要在头文件中定义函数。声明它们是好的；定义它们，不是那么多。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-11T13:28:13.343

您可以在头文件和源文件中分离函数声明和定义。在您的情况下，您可以将 tryMe() 定义从“myclass.h”移动到“myclass.cpp”，并在“myclass.h”中仅保留 tryMe() 的声明。其他方法是使用“内联”关键字，正如其他答案中已经提到的那样。

# sql - 作为 t-sql 选择的一部分，如何执行简单的字符串映射？

> ID：10096969
> 
> 赞同：13
> 
> 时间：2012-04-10T21:50:42.667
> 
> 标签：sql, sql-server, sql-server-2008, tsql

在 T-SQL 中，我可以将算术作为选择的一部分。例如，假设我有一个表 Math，其中有一列名为 Decimal。我可以做以下查询。

```
SELECT 100*Decimal FROM Math 
```

我想知道是否也可以在 SELECT 中执行逻辑，在其中创建一个映射，例如 { A=>B, F=>Z} 以便每次列为 A 时返回 B，每次列为 F ，它返回 Z。

如果这是一个新手问题，我深表歉意，因为我在 SQL 方面不是很有经验。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-10T21:52:22.217

我认为您想使用[CASE](http://msdn.microsoft.com/en-us/library/ms181765%28v=sql.100%29.aspx)表达式：

```
SELECT 
  CASE column1 
    when 'A' THEN 'B' 
    when 'F' THEN 'Z' 
  END 
FROM Tbl 
```

另请注意，它有两种不同的语法，请选择最适合您的一种。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-11T03:25:19.390

您可以创建一个包含两列的表变量，一列用于映射的内容，另一列用于映射到的内容。然后只需在要重新映射的列上加入该表变量。

CASE 语句适用于少量比较，但如果您想进行多次重新映射，那么表变量可能是更好的选择。

像这样的东西......

```
DECLARE @Mappings TABLE
(
  MapFrom VARCHAR(50),
  MapTo VARCHAR(50)
)

insert into @Mappings values 
('A', 'B'), 
('F', 'Z'), 
('other', 'mappings');

select m.MapTo
from yourTable t
inner join @Mappings m on m.MapFrom = t.columnName 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-10T21:52:50.843

```
SELECT CASE WHEN YourColumn = 'A' THEN 'B'
            WHEN YourColumn = 'F' THEN 'Z'
            ELSE YourColumn
       END AS MappedColumn
    FROM YourTable 
```

# php - PHP：mysql查询给出一个布尔值

> ID：10096976
> 
> 赞同：0
> 
> 时间：2012-04-10T21:51:07.253
> 
> 标签：php, mysql

```
<?php
class Page {
    function getPage($urlOfPage){
        $result = mysql_query('SELECT category, title FROM rs-planet WHERE url = "'.  mysql_real_escape_string($urlOfPage));
        if(mysql_num_rows($result) === 0){
            header('HTTP/1.0 404 Not Found');
            exit;
        }
        else{
            return $page[] = mysql_fetch_array($result);
        }
    }
}

?> 
```

我有这个错误：

> 警告：mysql_num_rows() 期望参数 1 是资源，布尔值在第 6 行的 C:\xampp\htdocs\rs-planet\classes\page.php 中给出
> 
> 警告：mysql_fetch_array() 期望参数 1 是资源，布尔值在第 11 行的 C:\xampp\htdocs\rs-planet\classes\page.php 中给出我没有看到问题......

如果我做 var_dump @ $result 我得到一个布尔值。（如果它是在 @ db 成立的，它给出了 true，如果不是，它给出了 false。）

PS。对不起我的英语不好，我的主要语言是荷兰语。

编辑：var_dump(mysql_error) =

> string(152) "您的 SQL 语法有错误；请查看与您的 MySQL 服务器版本相对应的手册，以在第 1 行的 '"index' 附近使用正确的语法"

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T21:53:47.490

`mysql_query`如果无法执行查询（即语法错误），则返回 false。尝试`rs-planet`用反引号包围：

```
$result = mysql_query('SELECT category, title FROM `rs-planet` WHERE url = "'.  mysql_real_escape_string($urlOfPage) . '"'); 
```

我在想`-`表名中的 搞砸了语法。

编辑：此外，PDO 使调试这些问题变得更加容易，因为您不需要使用`mysql_error()`来获取错误消息 - 它包含在 PDO 抛出的异常中。 [http://php.net/manual/en/book.pdo.php](http://php.net/manual/en/book.pdo.php)

第二次编辑：实际上问题可能是缺少报价。修复了我的代码，但请参阅其他答案...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T21:55:41.443

`mysql_query`返回`false`错误。

`WHERE url="`url 字符串后没有右引号。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-10T21:55:53.883

`mysql_query`出错时返回 FALSE。您的错误是您没有关闭查询中的报价。试试这个：

```
 $result = mysql_query('SELECT category, title FROM rs-planet WHERE url = "'.  mysql_real_escape_string($urlOfPage).'"'); 
```

# php - 如何检查文件输入字段是否为空？

> ID：10096977
> 
> 赞同：23
> 
> 时间：2012-04-10T21:51:09.360
> 
> 标签：php, validation, file-upload, input-field

我很难使用`$_FILES`

我想检查文件上传字段是否为空，然后应用一个条件，如果文件上传为空，则脚本不会尝试上传文件。我该如何执行？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-09-04T22:14:21.683

```
if($_FILES["file"]["error"] != 0) {
//stands for any kind of errors happen during the uploading
} 
```

还有

```
if($_FILES["file"]["error"] == 4) {
//means there is no file uploaded
} 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-04-10T21:55:14.640

这应该工作

```
if ( ! empty($_FILES)) {...} 
```

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2012-09-04T20:10:35.277

其他答案对我不起作用。所以我发布我的解决方案：

```
if($_FILES['theFile']['name']=='')
{
    //No file selected
} 
```

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2015-04-30T20:11:58.370

这对我有用：

```
if ($_FILES['theFile']['tmp_name']!='') {
    // do this, upload file
} // if no file selected to upload, file isn't uploaded. 
```

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2015-02-04T18:58:40.167

您可以使用[**UPLOAD_ERR_NO_FILE**](http://php.net/manual/en/features.file-upload.errors.php)值：

```
function isset_file($file) {
    return (isset($file) && $file['error'] != UPLOAD_ERR_NO_FILE);
}

if(isset_file($_FILES['input_name'])) {
    // It's not empty
} 
```

**更新：**由于发送*$_FILES['input_name']*可能会引发*通知*

```
function isset_file($name) {
    return (isset($_FILES[$name]) && $_FILES[$name]['error'] != UPLOAD_ERR_NO_FILE);
}

if(isset_file('input_name')) {
    // It's not empty
} 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2013-03-04T06:29:23.453

这个问题是重复的，但你的答案是[is_uploade_file()](http://php.net/manual/en/function.is-uploaded-file.php)函数。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-04-10T22:58:49.473

```
if(!empty($_FILES['myFileField'])) {
    // file field is not empty..
} else {
    // no file uploaded..
} 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2020-01-04T17:40:52.350

要检查文件类型的输入是否为**空**，您必须获取任何`$_FILES`数组并针对空数组进行检查。我在上面看到的只是检查一个无效的空字符串。 **例子：**

```
if($_FILES["your_field_name"]["size"] == [' '])
{
Perform your validation here•
} 
```

我希望这有帮助。

# php - php - 获取最近通过的星期六（上星期六）

> ID：10096978
> 
> 赞同：1
> 
> 时间：2012-04-10T21:51:11.367
> 
> 标签：php, date

> **可能重复：**
> [从上周六（每周）获取时间戳？](https://stackoverflow.com/questions/4896452/getting-the-timestamp-from-last-saturday-every-week)

如果今天是 4 月 8 日星期日......我希望我的日期变量设置为 4 月 7 日星期六。

如果今天是 4 月 7 日星期六...我希望我的日期变量设置为 3 月 31 日星期六。

答案在这里：[如何在给定时区的最后一个/上一个星期六获取日期](https://stackoverflow.com/questions/9285528/how-to-get-date-on-last-previous-saturday-in-given-timezone) 会起作用，除非今天是 4 月 8 日星期日，否则它会给我 3 月 31 日星期六......这不是我想要的。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-10T21:54:13.773

```
strtotime("last Saturday") 
```

不确定您是否需要日期格式，因为这会给您一个时间戳。如果你需要一个日期，我可以编辑。

编辑：

```
date('Ymd', strtotime("last Saturday")); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T21:56:51.443

您可以使用[`strtotime()`](http://php.net/manual/en/function.strtotime.php). 例如，您可能想要的是：

```
$ts = strtotime('last saturday'); 
```

如果你想要一个格式化的日期/时间字符串，你可以这样做：

```
$dateStr = date('Y-m-d', strtotime('last saturday')); 
```

# ios - UITextField 的自定义 inputView ，如何将输入引导回文本字段？

> ID：10096979
> 
> 赞同：13
> 
> 时间：2012-04-10T21:51:17.567
> 
> 标签：ios, cocoa-touch, uitextfield, first-responder, inputview

我已经`inputView`为我的`UITextField`. 我需要一种方法来显示在我的自定义`inputView`中选择的数据`UITextfield`。我想以与系统键盘相同的方式实现这一点。

有谁知道这是怎么做到的？系统键盘如何获得`UITextfield`对第一响应者的引用？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-14T19:38:47.403

在将自定义输入视图中的输入发送回文本字段时，请注意您可以（应该）使用符合的`UIKeyInput`协议方法`UITextField`。即：

```
- (void)deleteBackward;
- (void)insertText:(NSString *)text; 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-04-11T05:40:01.000

> 系统键盘如何获得对作为第一响应者的 UITextfield 的引用？

它只是向系统询问第一响应者；不幸的是，这是一个私有的 UIKit 方法（或者是，上次我检查过）。您可以通过遍历视图层次结构并询问每个视图来找到第一响应者，但这非常笨拙。

相反，您可以在输入视图上添加指向文本字段的链接（我假设您的输入视图是自定义 UIView 子类）：

```
@property(nonatomic, assign) UITextField* target; 
```

然后使用视图控制器中的 UITextField 委托方法来查看文本字段何时被聚焦：

```
- (void)textFieldDidBeginEditing:(UITextField*)textField
{
    if ( [textField.inputView isKindOfClass:[MyInputView class]] )
        ((MyInputView*)textField.inputView).target = textField;
}

- (void)textFieldDidEndEditing:(UITextField*)textField
{
    if ( [textField.inputView isKindOfClass:[MyInputView class]] )
        ((MyInputView*)textField.inputView).target = nil;
} 
```

# c++ - 使用 wstring 而不是 wchar_t 实例化 C++ 函数

> ID：10096981
> 
> 赞同：-1
> 
> 时间：2012-04-10T21:51:18.550
> 
> 标签：c++, function, wchar-t, wstring

我有一个 C++ 重载函数，它的一个变体接收一个 wstring 作为参数，但是当我调用它时`myfunc(L"Some text")`，编译器抱怨没有接受的函数变体`wchar_t *`。

我该怎么办？

后期编辑：

```
Lucru();
Lucru(short,short,short,short,wstring,wstring,wstring,wstring,wstring,wstring); 
```

这就是函数在其声明中的样子。正如这所暗示的，它是一个类的构造函数......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T21:54:49.237

显式构造宽字符串：

```
myFunc(std::wstring(L"text")); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T22:48:43.153

将函数更改为`wstring`通过 const 引用接受值：

```
Lucru(short,short,short,short,const wstring&,const wstring&,const wstring&,const wstring&,const wstring&,const wstring&); 
```

# objective-c - iOS - EXC_BAD_ACCESS 错误

> ID：10096982
> 
> 赞同：3
> 
> 时间：2012-04-10T21:51:19.220
> 
> 标签：objective-c, ios, error-handling, exc-bad-access

我正在开发一个 iPhone/iPod 应用程序。以下代码是 UIViewController 的 .m 文件。我得到以下信息：

```
Thread 1: EXC_BAD_ACCESS (code=2...... 
```

当我点击以下行时：

```
cell.textLabel.text = [datasource objectAtIndex:indexPath.row]; 
```

我知道这通常发生在您在释放对象后尝试访问它时，但我在尝试访问它之前不会释放它。我在下面附上了完整的代码。

任何帮助都将不胜感激！

```
#import "HomePage.h"
#import "HusbandryRecordsMain.h"
#import "TaskManagerMain.h"
#import "AnimalInventoryMain.h"
#import "FeedInventoryMain.h"

@implementation HomePage
@synthesize options, datasource;

- (void)didReceiveMemoryWarning {
    [super didReceiveMemoryWarning];
    // Release any cached data, images, etc that aren't in use.
}

#pragma mark - View lifecycle

- (void)viewDidLoad {
    [self setupArray];
    [super viewDidLoad];

    // Do any additional setup after loading the view, typically from a nib.
}

-(void)setupArray{
    options = [NSMutableArray  arrayWithObjects:@"Husbandry Records", @"Task Manager", @"Feeder Inventory", @"Animal Inventory", nil];

    datasource = options;
}
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
    //#warning Incomplete method implementation.
    // Return the number of rows in the section.
    return 4;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = (UITableViewCell *) [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier];    
    }

    [[cell textLabel] setBackgroundColor:[UIColor clearColor]];
    [[cell detailTextLabel] setBackgroundColor:[UIColor clearColor]];

    // THE FOLLOWING LINE IS THROWING THE ERROR!
    cell.textLabel.text = [datasource objectAtIndex:indexPath.row]; 

    //Arrow 
    cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;

    return cell;
}

-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath{
    if (indexPath.row == 0){
        HusbandryRecordsMain *hrm = [self.storyboard instantiateViewControllerWithIdentifier:@"Husbandry Records - Main"];
        [self.navigationController pushViewController:hrm animated:YES];
    }
    else if (indexPath.row == 1){
        TaskManagerMain *tmm = [self.storyboard instantiateViewControllerWithIdentifier:@"Task Manager - Main"];
        [self.navigationController pushViewController:tmm animated:YES];
    } 
    else if (indexPath.row == 2){
        FeedInventoryMain *fim = [self.storyboard instantiateViewControllerWithIdentifier:@"Feeder Inventory - Main"];
        [self.navigationController pushViewController:fim animated:YES];
    }  
    else if (indexPath.row == 3){
        AnimalInventoryMain *aim = [self.storyboard instantiateViewControllerWithIdentifier:@"Animal Inventory - Main"];
        [self.navigationController pushViewController:aim animated:YES];
    }

    [tableView deselectRowAtIndexPath:indexPath animated:YES];
}

//----------------------TABLEVIEWCELL HEIGHT -------------------------------------------

- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath{

    return 70;

}

- (void)viewDidUnload {
    [super viewDidUnload];
    // Release any retained subviews of the main view.
    // e.g. self.myOutlet = nil;
}

- (void)viewWillAppear:(BOOL)animated {
    [super viewWillAppear:animated];
}

- (void)viewDidAppear:(BOOL)animated {
    [super viewDidAppear:animated];
}

- (void)viewWillDisappear:(BOOL)animated {
    [super viewWillDisappear:animated];
}

- (void)viewDidDisappear:(BOOL)animated {
    [super viewDidDisappear:animated];
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {
    // Return YES for supported orientations
    return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
}

@end 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-10T21:55:55.510

```
-(void)setupArray{
    options = [NSMutableArray  arrayWithObjects:@"Husbandry Records", @"Task Manager", @"Feeder Inventory", @"Animal Inventory", nil];

    datasource = options;
} 
```

您正在将一个自动释放的对象`datasource`直接分配给实例变量，然后在崩溃的代码行中释放它后尝试使用它。如果您打开僵尸检测，它很可能会直接捕捉到这一点。同样，静态分析器（构建和分析）应该已经捕获了它。

（当然，除非您启用了 ARC，此时正在发生其他事情......）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T21:59:53.773

什么类型的文件选项和数据源？还可以尝试 self.options 等。

# inheritance - 如何在多模块 maven 项目中利用继承，以便可以单独部署每个子模块？

> ID：10096988
> 
> 赞同：1
> 
> 时间：2012-04-10T21:51:36.490
> 
> 标签：inheritance, maven, module

我正在研究一个非常大的多模块 maven 项目，我最近在其中应用了继承。整个事情运行良好，甚至每个模块都得到了很好的打包。（有效的pom由于继承而拥有它所需要的一切）

但是，还有其他团队正在使用独立于大型项目的子模块。

我检查了创建的 jar 文件中的 pom，但它既不是有效的 pom，也不是保留必要依赖项的 pom。这正是我在子模块中拥有的...

无论如何我可以使用继承，而子模块仍然可以独立使用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T05:14:03.833

`<parent>`如果它需要成为多模块项目的一部分，则需要在子模块的 pom 中有一个部分。

但是，子模块仍然可以独立使用。当您在子模块上运行 maven 目标时，它会自动从父 pom 中提取继承的项目（感谢该`<parent>`部分）。

# javascript - 从回调函数中获取值

> ID：10096992
> 
> 赞同：1
> 
> 时间：2012-04-10T21:52:11.983
> 
> 标签：javascript, function, callback, anonymous

我正在尝试从回调函数返回一个值并将其分配给一个变量，尽管我正在努力解决它 - 任何帮助将不胜感激......

```
var latlng1;

function getLocation(){
  navigator.geolocation.getCurrentPosition (function (position){
    coords = position.coords.latitude + "," + position.coords.longitude;
    callback();         
  })
}

//how can I assign the coords value from the callback to variable latlng1 with global scope?
getLocation (function(){
  //alert(coords);
  return coords;
})

// -----------
//I'm trying something like this....but no joy
latlng1 = getLocation (function(){
  return coords;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-10T21:55:52.293

我很困惑您是否希望回调能够访问该`coords`值或只是从`getLocation`函数中返回它。如果它只是对`coords`回调可用，则将其作为参数传递。

```
function getLocation(callback) {
  navigator.geolocation.getCurrentPosition (function (position){
    var coords = position.coords.latitude + "," + position.coords.longitude;
    callback(coords);         
  })
}

getLocation (function(coords){
  alert(coords);
}) 
```

另一方面，如果要将其分配给返回，`getLocation`则这是不可能的。API 是异步的`getCurrentPosition`，因此您不能从`getLocation`方法中同步返回它。相反，您需要传递想要使用的回调`coords`。

**编辑**

OP 说他们只想要`coords`. `latlng1`这是你如何做到这一点的

```
var latlng1;
function getLocation() {
  navigator.geolocation.getCurrentPosition (function (position){
    var coords = position.coords.latitude + "," + position.coords.longitude;
    latlng1 = coords; 
  })
} 
```

请注意，这不会改变 API 的异步特性。在异步调用完成之前，该变量`latlng1`不会具有该值。`coords`因为这个版本不使用回调你无法知道什么时候完成（除了`latlng1`检查`undefined`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T22:03:12.693

怎么样：

```
var latlng1;

function getLocation(){
  navigator.geolocation.getCurrentPosition (function (position){
    latlng1 = position.coords.latitude + "," + position.coords.longitude;
    callback();         
  })
}

getLocation (function(){
  alert(latlng1);
}) 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-10T21:55:37.150

您可以将坐标传递给回调调用，并在回调中为其定义一个参数。它比试图解释更容易阅读：

```
var latlng1;

function getLocation(callback){
  navigator.geolocation.getCurrentPosition (function (position){
    coords = position.coords.latitude + "," + position.coords.longitude;
    callback(coords);         
  })
}

//how can I assign the coords value from the callback to variable latlng1 with global scope?
getLocation (function(coords){
  //alert(coords);
  return coords;
}) 
```

# node.js - 在 Node.js 中的 createReadStream 中替换数据

> ID：10096997
> 
> 赞同：0
> 
> 时间：2012-04-10T21:52:32.467
> 
> 标签：node.js

我不确定我在这里问的是正确的问题......所以请不要攻击我。

我正在为一种跟踪实现创建自己的异步回调库。用户必须在他们的网站上安装一段代码，其中包含一个唯一的帐号。想想谷歌分析。

库调用到达我的节点服务器并在查询参数中传递帐户 ID。

Node 使用分析库进行响应，因此可以在用户站点上调用各种跟踪功能。

我的问题是，如何修改基于查询参数流回用户页面的静态跟踪库？例如，一旦从查询字符串中读取帐户 ID，我就会进行数据库查找以在库中查找特定于该用户的一些值，并希望适当地修改我的库中的特定函数。

我正在从本地服务器读取静态文件： fs.createReadStream("./file.js");

如何修改该文件以将其中的某些值替换为其他值？

或者我应该在启动时将文件读入内存对象，然后通过响应对象简单地写出修改后的数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T01:10:28.693

您可以为此简单地使用*eco*或*ejs*模板，但只是为了有一个想法，或者如果您更喜欢自己制作，我认为您应该根据您的模板制作一个模板`file.js`，然后使用相应的数据编写用户特定的代码部分使用一组正则表达式。

例如：

***模板.js***

```
var get_user = function () {
  return "Hi %%USER_NAME%%"
} 
```

然后 req.send()` 将*template.js*的内容替换为如下内容：

```
var result = cached_template_data;
if (!result) {
  fs.readFile("./template.js", function (err, data) {
    result = cached_template_data = data;
    if (!err) {
      result = result.replace(/%%USER_NAME%%/g, user.name)
      res.send(result);
    } else {
      // Big oops
      res.send({error:true}, 500);
    }
  })
} else {
  result = result.replace(/%%USER_NAME%%/g, user.name)
  res.send(result);
} 
```

**更新**

顺便说一句，尽可能考虑缓存...