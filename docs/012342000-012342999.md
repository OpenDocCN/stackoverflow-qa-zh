# StackOverflow 问答 12342000-12342999

# python - 在 Sublime Text2 中设置 Python 版本时遇到问题

> ID：12342004
> 
> 赞同：2
> 
> 时间：2012-09-09T18:59:38.537
> 
> 标签：python, macports, sublimetext2

我无法在 Sublime Text2 中设置构建环境。我正在使用 Macports 进行 Python 和软件包安装。

我的 python.sublime-build 文件如下所示：

```
{
    "cmd": ["python", "-u", "$file"],
    "file_regex": "^[ ]*File \"(...*?)\", line ([0-9]*)",
    "selector": "source.python"
} 
```

我认为（通过搜索）我需要修改“cmd”行以指向 Macports 版本。有人成功做到这一点吗？

从终端，一切构建/运行正常，只有 Sublime Text2 的构建仍然在获取系统版本。

附加信息：

```
which python
/opt/local/bin/python 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-09T20:00:57.077

您的 Sublime Text 2 环境与您的 shell 环境不同；该`$PATH`变量可能未指向相同的目录，并且选择了错误的可执行文件。

您有几个选项可以解决这个问题：

1.  设置一个`"path"`选项，包括`/opt/local/bin` 需要为您的`python`可执行文件使用绝对路径，因为 Sublime Text 2 不共享您的 shell 使用的相同环境 PATH 变量。检查`echo $PATH`并将其用作模板：

    ```
    {
        "cmd": ["python", "-u", "$file"],
        "path": "/opt/local/bin:/opt/local/sbin:/Library/Frameworks/Python.framework/Versions/Current/bin:/Users/yourloginname/bin:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin:/usr/X11/bin",
        "file_regex": "^[ ]*File \"(...*?)\", line ([0-9]*)",
        "selector": "source.python"
    } 
    ```

    这将用于`/bin/bash`运行命令，我认为该命令`$PATH`与您的终端具有相同的设置。

2.  `"shell"`通过设置选项而不是通过 shell 运行命令：

    ```
    {
        "cmd": ["python", "-u", "$file"],
        "shell": true,
        "file_regex": "^[ ]*File \"(...*?)\", line ([0-9]*)",
        "selector": "source.python"
    } 
    ```

3.  使用 python 命令的完整路径：

    ```
    {
        "cmd": ["/opt/local/bin/python", "-u", "$file"],
        "file_regex": "^[ ]*File \"(...*?)\", line ([0-9]*)",
        "selector": "source.python"
    } 
    ```

# javascript - 为什么 JavaScript 找不到给定的 InnerHTML 并返回无法设置属性“innerHTML”为空？

> ID：12342005
> 
> 赞同：1
> 
> 时间：2012-09-09T18:59:39.810
> 
> 标签：javascript, addeventlistener

为什么网站[http://xn--wiadomesny-37b.pl/test/](http://xn--wiadomesny-37b.pl/test/) throws `Uncaught TypeError: Cannot set property 'innerHTML' of null`？

**HTML** ( [http://xn--wiadomesny-37b.pl/test/](http://xn--wiadomesny-37b.pl/test/) ):

```
<div class="castle_array" id="2x1" name="2x1"></div>
<div class="castle_array" id="3x1" name="3x1"></div>
<div class="castle_array" id="4x1" name="4x1"></div>
... 
```

**JavaScript** ( [http://xn--wiadomesny-37b.pl/test/B_modeWindow.js](http://xn--wiadomesny-37b.pl/test/B_modeWindow.js) ):

```
for (x = 1; x <= 5; x++) {
for (y = 1; y <= 5; y++) {
  document.getElementById(x+"x"+y).addEventListener("click",B_modeWindow('1',this.id));
}} 
```

当我改变

`("click",B_modeWindow('1',this.id)`

到

`("click",B_modeWindow('1','string')`

它就像一个魅力 - 为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T19:17:30.797

您的代码有两个基本问题。

首先，当你这样做时`addEventListener("click", B_modeWindow('1', this.id));`，你并***没有***将`B_modewindow`回调分配给点击事件处理程序，你实际上是在***执行***函数。

其次，在那个上下文`this` **中不是**指被点击的元素，它指的是**`Window`**对象，因此`this.id`给你`undefined`, 使用`event.target.id`：

要修复它，请改用以下内容：

```
var el = document.getElementById(x+"x"+y);
el.addEventListener("click", function (event) {
  B_modeWindow('1', event.target.id);
}); 
```

这是一个简化的**[DEMO](http://jsfiddle.net/ZcsC3/)**。

# security - 如何在 Zend Framework 2 视图中自动转义变量

> ID：12342008
> 
> 赞同：4
> 
> 时间：2012-09-09T18:59:59.413
> 
> 标签：security, view, escaping, zend-framework2

在 Zend Framework 2 视图中，我会多次调用`$this->escapeHtml()`以确保我的数据是安全的。有没有办法将此行为从黑名单切换到白名单？

PS：阅读 Padraic Brady 的一篇文章，该文章表明[自动转义是一个坏主意](http://blog.astrumfutura.com/2012/06/automatic-output-escaping-in-php-and-the-real-future-of-preventing-cross-site-scripting-xss/)。额外的想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T18:33:41.687

您可以编写自己的`ViewModel`类，当变量分配给它时转义数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-10-06T20:52:07.650

感谢 Rob 的评论，我将 ZF2 ViewModel 扩展如下：

```
namespace Application\View\Model;

use Zend\View\Model\ViewModel;
use Zend\View\Helper\EscapeHtml;

class EscapeViewModel extends ViewModel
{
/**
 * @var Zend\View\Helper\EscapeHtml
 */
protected $escaper = null;

/**
 * Proxy to set auto-escape option
 *
 * @param  bool $autoEscape
 * @return ViewModel
 */
public function autoEscape($autoEscape = true)
{
    $this->options['auto_escape'] = (bool) $autoEscape;
    return $this;
}

/**
 * Property overloading: get variable value;
 * auto-escape if auto-escape option is set
 *
 * @param  string $name
 * @return mixed
 */
public function __get($name)
{
    if (!$this->__isset($name)) {
        return;
    }

    $variables = $this->getVariables();
    if($this->getOption('auto_escape'))
        return $this->getEscaper()->escape($variables[$name]);
    return $variables[$name];
}

/**
 * Get instance of Escaper
 *
 * @return Zend\View\Helper\EscapeHtml
 */
public function getEscaper()
{
    if (null === $this->escaper) {
        $this->escaper = new EscapeHtml;
    }

    return $this->escaper;
}
} 
```

在 Controller 中可以这样使用：

```
public function fooAction()
{
    return new EscapeViewModel(array(
        'foo' => '<i>bar</i>'
    ));

    //Turn off auto-escaping:
    return new EscapeViewModel(array(
        'foo' => '<i>bar</i>'
    ),['auto_escape' => false]);
} 
```

**问题：** 如果有人能发表评论，如果这是最佳实践或者是否有更好的和 ecp，我将不胜感激。更高效和节省资源的方式？

# jquery - jQuery - 水平滚动条选择

> ID：12342010
> 
> 赞同：0
> 
> 时间：2012-09-09T19:00:06.307
> 
> 标签：jquery, html, scroll, image

我在一个容器中有两张图片，图片下方有一个按钮选择器栏。我希望能够选择一个按钮，并且 2 张图片将更改为下一行。

这就像一场狂欢，但不是 1 个图片/div 改变，而是 2 个，我希望它们能够滑过以获得动画效果：

![在此处输入图像描述](../Images/9945ed814791c62572ad13a41135c58a.png)

因此，当我选择红色按钮旁边的按钮时，图片/div 将变为 2 和 3，然后是 3 和 4，然后是 4 和 5，然后是 5 和 6……嗯，你明白了。

无论如何，这是我的代码：

*   [HTML](http://pastebin.com/vZwtn4sA)
*   [JavaScript](http://pastebin.com/pyBHznPe)
*   [jsFiddle](http://jsfiddle.net/oliverj777/Btv7V/4/)

关于如何实现这一点的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T19:19:45.020

jQuery 有一个 hide 方法，可以让您将元素滑入和滑出显示。

所以我会为每组图像创建容器 div，即显示一对。当您的导航按钮（沿着底部）被点击时，隐藏当前显示的容器并显示下一个。

有关详细信息，请参阅 jQuery API [http://docs.jquery.com/UI/Effects/Slide 。](http://docs.jquery.com/UI/Effects/Slide)但它允许方向，左/右。和模式，显示/隐藏

# servicestack - 使用 servicestack.net 下载静态文件时的速度

> ID：12342015
> 
> 赞同：1
> 
> 时间：2012-09-09T19:00:52.290
> 
> 标签：servicestack

我正在测试一个非常基本的 ServiceStack 设置，我现在想在其中托管一些静态静态文件。我通过将静态文件直接放在 servicestack 根目录中来托管它们。

当我想获取文件时，我只需发出一个正常的 get 请求，如下所示：[http](http://somehost.net/somefile.bin) ://somehost.net/somefile.bin 当我使用 chrome 在托管 servicestack 的计算机上发出此请求时，我会立即下载文件。如果我尝试从 LAN（1Gbit 网络）上的另一台计算机下载文件，下载速度约为 6Kb/秒。

在使用 servicestack 托管这样的文件时，还有其他人遇到过速度问题吗？

PS：这不是网络问题。

# javascript - 加速我的复杂函数绘图仪（canvas+javascript）

> ID：12342016
> 
> 赞同：2
> 
> 时间：2012-09-09T19:00:52.543
> 
> 标签：javascript, performance, canvas, complex-numbers

我有以下用于复杂函数绘图仪的代码。它创建了复函数 f(z) = z*(z+5)(zv) 的相位图，其中 v 是鼠标指向的位置。如您所见，它非常缓慢。有什么办法可以加快速度并获得流畅的动画吗？只是指出我正确的方向会有所帮助。

```
<html>
<head>
<script type="text/javascript" src="jquery-1.8.1.js"></script>
<script type="application/javascript">
function draw() {
var canvas = document.getElementById("canvas");
var ctx;// = canvas.getContext("2d");

//The following functions convert pixel Xs and Ys to real and imaginary 
//parts of a complex    number, and back again
var pixToReal = function(n){return n/15.0-10.0};
var pixToImag = function(n){return  - n/15.0+10}
var realToPix = function(x){return Math.round((x+10.0)*15)}
var imagToPix = function(y){return Math.round((-y+10.0)*15)}

//Storing the complex number a+bi as [a,b], the following functions add, 
//multiply, and  find the modulus of the complex number
var add = function(z1,z2){return [z1[0]+z2[0],z1[1] + z2[1]]}
var mult = function(z1,z2){return [z1[0]*z2[0]-z1[1]*z2[1],z1[0]*z2[1]+z1[1]*z2[0]]}
var modulus = function(z){
    if (z[1]>0){return Math.atan2(z[1],z[0])}
    else {return Math.atan2(z[1],z[0])+2*Math.PI}
    };

//Takes a complex number and returns the RGB value of the corresponding 
//point on the color wheel.
var complexToRGB = function(z){
var theta = modulus(z)%(2*Math.PI)
var Hp = (theta/(2*Math.PI))*6
var X = Math.abs(Math.round((1 - Math.abs(Hp%2 -1))*255))
var C =  "rgb(0,0,0)"
if (Hp>=0 && Hp<1){
    C = "rgb("+255+","+X+",0)"
    };
if (1<=Hp && Hp<2){
    C = "rgb("+X+","+255+",0)"}
if (2<=Hp && Hp<3){
    C = "rgb("+0+","+255+","+X+")"}
if (3<=Hp && Hp<4){
    C = "rgb("+0+","+X+","+255+")"}
if (4<=Hp && Hp<5){
    C = "rgb("+X+","+0+","+255+")"}
if (5<=Hp && Hp<6){
    C = "rgb("+255+","+0+","+X+")"}
return  C

}

//a complex number
var v = [0,4] 

//the function f(z) = z*(z+5)*(z+v)
var f = function(z){return mult(add(mult(z,z),mult([5,5],z)),add(z,v))}

//makes v the opposite complex number your mouse is pointing at, 
//i.e. your mouse points at a root of f
function onMouseMove(evt) {
v = [-pixToReal(evt.pageX), -pixToImag(evt.pageY)];
}

$(document).mousemove(onMouseMove);

makeFrame = function(){
 ctx.clearRect(0,0,300,300);
 for (var n =0;n<300;n++){
     for (var m=0;m<300;m++){
        var x = pixToReal(n)
        var y = pixToImag(m)
        var z = [x,y]
        var w = f(z) 
        ctx.fillStyle = complexToRGB(w)
        ctx.fillRect(n,m,1,1)
        }
       }
   }

 function animate() {
 ctx = canvas.getContext("2d");
 return setInterval(makeFrame, 1);
 }

 animate();

}
 </script>
</head>
<body onload="draw()">
  <canvas id="canvas" width="300" height="300"></canvas>
</body> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-09T19:52:48.463

[我在这里](http://jsfiddle.net/Cz4xT/5/)做了一个小提琴，使用`requestAnimationFrame`和绘图`ImageData`。效果很好，也许您可​​以将我的方法与 strille 的方法合并。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-09T19:41:53.463

我进行了一些快速优化，使其速度提高了约 500%。我认为您可以进一步加快速度，但这需要更多的工作。

我所做的是：

*   不是使用 fillStyle 和 fillRect 设置像素值，而是将所有像素值作为数组 (imageData) 检索，然后 makeFrame() 操作 imageData 数组，然后使用 putImageData() 一次设置所有像素。
*   上述更改要求 complexToRGB() 重新调整具有红色、绿色和蓝色值的数组，而不是字符串。
*   在 complexToRGB() 函数中，if-cases 列表已更改为 if-else 链（这更快，因为不会评估真实条件之后的条件）。
*   将 setInterval 从 1000 fps 更改为 25。算法无法跟上该帧速率，因此最好将其设置为更真实的帧速率。

[这是 jsFiddle 的代码](http://jsfiddle.net/mUdDN/)。

下一步：我还将尝试删除尽可能多的函数调用，例如在内部 for 循环中内联 pixToReal() 和 pixToImag() 公式：

```
for (var m = 0; m < 300; m++) {
   var x = n / 15.0 - 10.0;
   var y = -m / 15.0 + 10; 
```

然后优化 complexToRGB() 中的代码，并考虑对该函数执行相同的操作以删除该函数调用。

# javascript - CSS不会填满视口

> ID：12342019
> 
> 赞同：0
> 
> 时间：2012-09-09T19:01:04.587
> 
> 标签：javascript, html, css

我有一个 div 覆盖，当单击链接时会弹出，我的问题是您必须滚动才能单击链接，然后覆盖保留在页面顶部，而不是用户当前正在查看的区域。

您可以通过向下滚动并单击任何链接来查看它，例如“多个订单”以及底部的条款和条件。

这是CSS：

```
 .black_overlay{
        display: none;
        position: absolute;
        /*top: 0%;
        left: 0%;
        width: 100%;
        height: 1000px; */
        top: 0px;
        right: 0px;
        left: 0px;
        bottom: 0px;
        height: 100%;

        background-color: black;
        z-index:1001;
        -moz-opacity: 0.8;
        opacity:.80;
        filter: alpha(opacity=80);
   }
 .white_content {
        display: none;
        position: absolute;
        top: 25%;
        left: 25%;
        width: 50%;
        height: 50%;
        padding: 16px;
        border: 5px solid blue;
        background-color: white;
        z-index:1002;
        overflow: auto;
  } 
```

和 JavaScript：

```
<a href = "javascript:void(0)" onclick =    "document.getElementById('light3').style.display='block';document.getElementById('fade').style.display='block'">here</a> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T19:05:51.107

`position: fixed`在您的叠加元素（`.black_overlay`和）上使用，`.white_content`而不是`position: absolute;`

# javascript - jQuery 对话框未完全显示

> ID：12342024
> 
> 赞同：0
> 
> 时间：2012-09-09T19:01:40.963
> 
> 标签：javascript, jquery, html

我的 jQuery 弹出对话框有问题。仅显示图像和“关闭”超链接。我想我会按照这个例子得到一个漂亮的用户界面：http: [//blog.nemikor.com/2009/04/08/basic-usage-of-the-jquery-ui-dialog/](http://blog.nemikor.com/2009/04/08/basic-usage-of-the-jquery-ui-dialog/)

这是正在发生的事情：

![哦，好空……](../Images/4e5847f2a39a5e3dedadb9328bff4d2a.png)

这是我的代码：

```
theDiv.append('<div id="editDialog"></div>');
    $("#editDialog").dialog({
    height: 350,
        width: 400,
        modal: true,
        position: 'center',
        autoOpen:true,
        title:'Hello World',
        zIndex: 10000,
        overlay: { opacity: 0.5, background: 'black'}
    }); 
```

感谢您在这里的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T19:06:32.833

从评论中我了解到您应该阅读本指南：[jQuery UI - 入门](http://jqueryui.com/docs/Getting_Started)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-09T19:20:43.570

我觉得你没有添加 jquery-custom css 和 jquery-custom js 文件，为了探索它请看这里[http://jqueryui.com/demos/dialog/#modal](http://jqueryui.com/demos/dialog/#modal)，你可以从这里下载演示和文档[http ://jqueryui.com/download](http://jqueryui.com/download)。

我希望它会帮助你。

谢谢。

# c - 关于 C 中的结构，下面的代码是什么意思？

> ID：12342025
> 
> 赞同：2
> 
> 时间：2012-09-09T19:01:47.427
> 
> 标签：c, pointers, struct

我对 C 编程真的很陌生，我仍在尝试理解使用指针和使用 typedef 结构的概念。

我在下面有这个代码片段，我需要在程序中使用它：

```
typedef struct
{
    char* firstName;
    char* lastName;
    int id;
    float mark;
}* pStudentRecord; 
```

我不确定这是做什么的——对我来说，这似乎与在 Objective-C 中使用接口相似，但我认为情况并非如此。

然后我有这条线

```
pStudentRecord* g_ppRecords; 
```

我基本上需要根据一个数字添加`pStudentRecord`几个`g_ppRecords`。我了解如何为类型的对象创建和分配内存`pStudentRecord`，但我不确定如何实际将多个对象添加到`g_ppRecords`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T19:15:55.977

定义了一个指向花括号中描述的结构的指针，这是一个更简单的示例

```
typedef struct {
    int x;
    int y;
}Point,* pPoint;

int main(void) {
   Point point = {4,5};
   pPoint point_ptr = &point;
   printf("%d - %d\n",point.x,point_ptr->x);

   pPoint second_point_ptr = malloc(sizeof(Point));
   second_point_ptr->x = 5;
   free(second_point_ptr);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-09T19:21:23.883

第一个声明了一个未命名的结构，以及`pStudentRecord`一个指向它的类型。第二个声明`g_ppRecords`是指向 a 的指针`pStudentRecord`。换句话说，一个指向结构的指针的*指针*。

将第二个视为“指针数组”可能更容易。因此，`g_ppRecords[0]`可能指向一个`pStudentRecord`和`g_ppRecords[1]`另一个。（它又指向一个记录结构。）

为了添加它，您需要知道它是如何存储指针的，也就是说，如何知道其中存储了多少指针。某处有一个大小，对于 size `N`，意味着至少`N * sizeof(pStudentRecord*)`分配了内存，并`g_ppRecords[0]`通过`g_ppRecords[N-1]`保存`N`项目。或者，它是 NULL 终止的，对于 size `N`，意味着至少`(N+1) * sizeof(pStudentRecord*)`分配了内存并`g_ppRecords[0]`通过`g_ppRecords[N-1]`保存`N`项目，并`g_ppRecords[N]`持有`NULL`，标记字符串的结尾。

在此之后，创建或添加到`g_ppRecords`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-09T19:28:58.500

结构是一种复合数据类型，这意味着它是一个包含其他变量的变量。您熟悉 Objective C，因此您可能会认为它有点像“仅数据”类；也就是说，一个没有方法的类。这是一种将相关信息存储在一起的方法，您可以将这些信息作为一个单元传递。

Typedef 是一种让您将自己的数据类型命名为 C 中内置类型的同义词的方法。它使代码更具可读性并允许编译器捕获更多错误（您实际上是在向编译器教授更多关于程序意图的信息。 ) 经典的例子是

```
typedef int BOOL; 
```

（旧的 ANSI C 中没有内置的 BOOL 类型。）

这意味着您现在可以执行以下操作：

```
BOOL state = 1; 
```

并声明带`BOOL`参数的函数，然后让编译器确保您传递`BOOL`s，即使它们实际上只是`int`s：

```
void flipSwitch(BOOL isOn); /* function declaration */
...
int value = 0;
BOOL boolValue = 1;
flipSwitch(value); /* Compiler will error here */
flipSwitch(boolValue); /* But this is OK */ 
```

因此，您上面的 typedef 正在为学生记录结构创建同义词，因此您可以传递学生记录，而不必`struct StudentRecord`每次都调用它们。它使代码更清晰、更易读。除了这里还有更多，在你的例子中。我刚才描述的是：

```
typedef struct {
  char * firstName;
  char * lastName;
  int id;
  float mark;
} StudentRecord; 
```

您现在可以执行以下操作：

```
StudentRecord aStudent = { "Angus\n", "Young\n", 1, 4.0 }; 
```

或者

```
void writeToParents(StudentRecord student) {
    ...
} 
```

但是你有一个`*`在 typedef 之后。那是因为您要对包含指向 StudentRecord 的指针的数据类型进行 typedef，而不是对 StudentRecord 本身进行 typedef。诶？继续阅读...

你需要这个指向 StudentRecord 的指针，因为如果你想传递 StudentRecords 并能够修改它们的成员变量，你需要传递指向它们的指针，而不是变量本身。typedef 对此非常有用，因为编译器可以再次捕获细微的错误。上面我们所做`writeToParents`的只是读取 StudentRecord 的内容。假设我们想改变他们的成绩；我们无法使用简单的 StudentRecord 参数设置函数，因为我们无法直接更改成员。所以，我们需要一个指针：

```
void changeGrade(StudentRecord *student, float newGrade) {
  student->mark = newGrade;
} 
```

很容易看出您可能会错过 *，因此，改为 typedef 为 StudentRecord 的指针类型，编译器将提供帮助：

```
typedef struct { /* as above */ } *PStudentRecord; 
```

现在：

```
void changeGrade(PStudentRecord student, float newGrade) {
  student->mark = newGrade;
} 
```

更常见的是同时声明两者：

```
typedef struct {
  /* Members */
} StudentRecord, *PStudentRecord; 
```

这也为您提供了普通的 struct typedef 和指针 typedef。

那么什么是指针呢？一个变量，它将地址保存在另一个变量的内存中。听起来很简单；从表面上看确实如此，但它变得非常微妙并且很快就被卷入其中。试试[这个教程](http://pw1.netcom.com/~tjensen/ptr/pointers.htm)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-09T19:08:20.557

这定义了指向结构的指针的名称，而不是结构本身的名称。尝试更改为：

```
typedef struct
{
    char* firstName;
    char* lastName;
    int id;
    float mark;
} StudentRecord;

StudentRecord foo;
StudentRecord *pfoo = &foo; 
```

# git - 如何在提交过程的不同阶段删除git中的文件

> ID：12342026
> 
> 赞同：0
> 
> 时间：2012-09-09T19:01:53.700
> 
> 标签：git

在这些情况下，从 Git 中删除文件的正确方法是什么？

**案例 1：**我创建了一个新文件，但我还没有完成`git add new_file.html` **解决方案：**我可以从我的计算机中删除 new_file.html。

**案例2：**我创建了一个新文件，我已经完成了`git add new_file.html`，但我没有提交这些更改。 **解决方案：** ?

**案例3：**我创建了一个新文件，我已经完成了`git add new_file.html`，我已经完成了`git commit -m 'added a new file here!'`。 **解决方案：** ?

**案例4：**我创建了一个新文件，我已经完成了`git add new_file.html`，我已经完成了`git commit -m 'added a new file here!'`，并且我已经将该分支与**master**分支合并。 **解决方案：** ?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T19:05:59.637

对于案例 2

```
git reset HEAD new_file.html && rm new_file.html 
```

对于案例 3

```
git reset --hard HEAD~ 
```

对于案例 4，只需还原提交

```
git revert HEAD # git revert <commit-id> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T19:23:00.980

对于情况 3 和 4，有`git rm <file>`. 除此之外，dmp's answer很好地涵盖了它。

# android - 让 TextView 显示由另一个 Thread android 设置的文本

> ID：12342027
> 
> 赞同：0
> 
> 时间：2012-09-09T19:01:54.510
> 
> 标签：android, synchronization, textview

我有一些工作线程使用地理编码器获取地址，完成后，我想在应用程序线程的 TextView 上显示结果，使用工作线程中的 setText() 会导致异常，那么最佳实践是什么去做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T19:11:05.787

在要设置文本的线程中尝试此操作：

```
 // you should finalize your text before using it in another thread, 
    // else the IDE would show an error
    final String text = yourTextToBeSet;
    runOnUiThread(new Runnable() {
        @Override
        public void run() {
            textView.setText(text);
        }
    }); 
```

在非 UI 线程上调用 setText() 时遇到的异常是因为在非 UI 线程上时无法调用与 UI 相关的任何内容。如上所述，您可以轻松调用 runOnUiThread(Runnable) 来转移 UI 线程上的代码执行。

请记住，如果您的代码没有那么简单，则此解决方案还不够好，在这种情况下，建议使用[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-09T19:13:15.380

Android UI 视图不能被外部线程触及，任何调用视图方法的代码都只能在 UI 线程中运行。你应该使用[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)。它提供了有用的回调方法来从在单独线程中运行的任务更新 UI。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-09T19:24:18.797

如果不查看您的代码或不知道什么异常，很难说：

但检查是否：

*   您的 textView 对象与布局中的对象链接（findViewById(R.id.textView1)）
*   它在你的布局中可见吗？（有时当元素的尺寸不相加时，视图被推离屏幕）
*   它真的是您要设置的字符串吗？（不是 int 左右？）

# c# - 显示一个数组

> ID：12342032
> 
> 赞同：-2
> 
> 时间：2012-09-09T19:02:21.293
> 
> 标签：c#

我正在尝试在 Visual Studio 2010 中编译有关数组和类的代码，但是在运行它时遇到问题（consoleapplication.Carray 不包含采用 0 个参数的构造函数）正在显示，有人可以告诉我我错了吗做代码只显示和数组，或者有什么办法可以做到吗？？？？代码

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace ConsoleApplication1
{
    class Program
    {
        static void Main()
        {
            CArray CArray;
            CArray nums = new CArray();
            for (int i = 0; i <= 49; i++)
                nums.insert(i);
            nums.displayElements();
        }
    }

    class CArray
    {
        private int[] arr;
        private int upper;
        private int numElements;
        public CArray(int size)
        {
            arr = new int[size];
            upper = size - 1;
            numElements = 0;

        }
        public void insert(int item)
        {
            arr[numElements] = item;
            numElements++;
        }
        public void displayElements()
        {
            for (int i = 0; i <= upper; i++)
                Console.Write(arr[i] + " ");

        }
        public void clear()
        {
            for (int i = 0; i <= upper; i++)
                arr[i] = 0;
            numElements = 0;

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-09T19:09:03.487

好的，几个问题。一个你有一个请求数组大小的构造函数，而你的主程序没有将它提供给构造函数。这也是有问题的，因为您在 displayelements() 循环中使用了数组的大小。这不会编译，因为您的构造函数需要一个参数。您至少需要更改您的 Main() 程序，以便它将数组的大小提供给您在类 CArray 中定义的构造函数。更改以下内容：

```
 CArray nums = new CArray(50); //since 50 is the length of your array 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-09T19:11:58.273

您的 CArray 类中有一个构造函数，该构造函数将整数作为参数（int 大小）。您没有将该值传递给您的 main 方法中的 CArray 类。

```
static void Main()
     {
      int size = 33; //<-- declare an integer "size"
      CArray nums = new CArray(size); // <-- make an array with a size of "size", in this case, 33
      for (int i = 0; i <= size-1; i++) // <-- fill the integer with "size" numbers
      nums.insert(i);
      nums.displayElements();                  
     } 
```

我也不会硬编码您在示例中发布的 for 循环中的大小。现在你说它`(int i = 0; i <= 49; i++)`基本上忽略了你应该传递给构造函数的数组的大小。如果您使用我发布的示例，您将始终拥有一个 x 元素数组。如果你留下这个`i <= 49`位并且你的大小是 100，那么你的 displayElements 方法将打印出从 0 到 49 的数字，然后是一大堆 0。我不认为那是你想要的^^

# java - 存储 Location 对象的好方法是什么？

> ID：12342037
> 
> 赞同：4
> 
> 时间：2012-09-09T19:03:17.100
> 
> 标签：java, android, persistence, sharedpreferences

我想存储一个 Location 对象，并试图选择一个好方法来做到这一点。我只有一个小对象，我需要它是私有的，所以 SharedPreferences 或 Internal Storage 对我来说最有意义。

我看到一个对象可以[写入一个字节数组，作为一个字符串存储在 SharedPreferences 中，然后写回一个对象，如此处所述](https://stackoverflow.com/questions/5418160/store-and-retrieve-a-class-object-in-shared-preference)。

这是一个合理的方法吗？有没有更好的办法？

感谢您的任何建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T10:36:00.070

保存简单数据时，我更喜欢使用 JSON 对象，因为与操作字节数组相比，代码对于未来的维护者来说更简单、更容易理解。由于对象很小，使用字符串而不是字节数组的大小损失并不重要。

```
private static final String LATITUDE = "com.somepackage.name.LATITUDE";
private static final String LONGITUDE = "com.somepackage.name.LONGITUDE";

/**
 * Save a location/key pair.
 * 
 * @param key the key associated with the location
 * @param location the location for the key
 * @return true if saved successfully false otherwise
 */
public boolean saveLocation(String key, Location location) {
    LOG.info("Saving location");
    try {
        JSONObject locationJson = new JSONObject();

        locationJson.put(LATITUDE, location.getLatitude());
        locationJson.put(LONGITUDE, location.getLongitude());
        //other location data
        SharedPreferences.Editor edit = preferences.edit();
        edit.putString(key, locationJson.toString());
        edit.commit();
    } catch (JSONException e) {
        LOG.error("JSON Exception", e);
        return false;
    }

    LOG.info("Location {}  saved successfully at key: {}", preferences.getString(key, null),key);
    return true;
}

/**
 * Gets location data for a key.
 * 
 * @param key the key for the saved location
 * @return a {@link Location} object or null if there is no entry for the key
 */
public Location getLocation(String key) {
    LOG.info("Retrieving location at key {} ", key);
    try {
        String json = preferences.getString(key, null);

        if (json != null) {
            JSONObject locationJson = new JSONObject(json);
            Location location = new Location(STORAGE);
            location.setLatitude(locationJson.getInt(LATITUDE));
            location.setLongitude(locationJson.getInt(LONGITUDE));
            LOG.info("Returning location: {}" , location);
            return location;
        }
    } catch (JSONException e) {
        LOG.error("JSON Exception", e);
    }

    LOG.warn("No location found at key {}",  key);
    //or throw exception depending on your logic
    return null;
} 
```

# sql - 实体框架安装失败和崩溃 Visual Studio

> ID：12342043
> 
> 赞同：0
> 
> 时间：2012-09-09T19:03:51.370
> 
> 标签：sql, visual-studio, entity-framework, visual-studio-2012, entity-framework-5

我正在尝试将 Entity Framework 5.0 安装到 Visual Studio 2012 Pro 项目中。在安装过程中，它失败并导致 Visual Studio 崩溃。我怀疑它试图找出失败时使用哪个 SQL Server 版本。我安装了 SQL 2008 R2、SQL 2012 和 SQL 2012 Localdb。在它崩溃之前，没有连接字符串被添加到配置文件中。我一直在搜索论坛并尝试了很多东西，但还没有运气。任何帮助，将不胜感激。使用 Visual Studio 2010 Pro 时同样失败。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T19:03:40.193

我发现 EF 安装程序无法处理并排安装的多个 SQL 版本。删除除一个之外的所有程序后，程序运行正常。

# url-rewriting - oracle webcenter 站点 11gR1 的 URL 重写会话问题

> ID：12342047
> 
> 赞同：0
> 
> 时间：2012-09-09T19:05:12.887
> 
> 标签：url-rewriting, webcenter, webcenter-sites

我正在尝试将 url 从“美丽的”人类可读的 url 重写为 webcenter 内部表示，反之亦然。我正在使用 AssetDataManager 将资产 ID 映射到我在 URL 中使用的资产描述，反之亦然。这就是我的 url 程序集：

```
Session ses = SessionFactory.getSession();
AssetDataManager mgr = (AssetDataManager) ses
   .getManager(AssetDataManager.class.getName());
List<AssetId> assets = new ArrayList<AssetId>();
assets.add(new AssetId()
{
    private long   id   = assetId;
    private String type = "Page";

    @Override
    public String getType()
    {
        return type;
    }

    @Override
    public long getId()
    {
        return id;
    }
});
Iterable<AssetData> assetDataItems = mgr.read(assets); 
```

这是用于 url 反汇编：

```
Session ses = SessionFactory.getSession();
AssetDataManager mgr = (AssetDataManager) ses
  .getManager(AssetDataManager.class.getName());
final String assetType = "Page";

final String subType = null; 
final Condition condition = ConditionFactory.createCondition(
        "description", OpTypeEnum.EQUALS, pageName);
final List<String> desiredAttributes = Arrays.asList("id");
Query query = new SimpleQuery(assetType, subType, condition,
        desiredAttributes);
query.getProperties().setIsBasicSearch(true);

Iterable<AssetData> assetDataItems = mgr.read(query); 
```

两者都在我的自定义汇编器的上下文中使用，它扩展了 QueryAssembler。组装工作正常，重用现有会话，但反汇编失败：

```
COM.FutureTense.Common.ContentServerException: ContentServerException: (Unexpected runtime exception) Error code:GENERIC SERVER ERROR
    at com.openmarket.Satellite.servlet.BaseServlet.doGet(BaseServlet.java:126)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:617)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at com.fatwire.wem.sso.cas.filter.CASFilter.doFilter(CASFilter.java:554)
    at com.fatwire.wem.sso.SSOFilter.doFilter(SSOFilter.java:51)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:298)
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:859)
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:588)
    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)
    at java.lang.Thread.run(Thread.java:619)
Caused by: com.openmarket.Satellite.RequestContext$RequestContextInitializationException: Co-resident Satellite Server failed to capture ICS
    at com.openmarket.Satellite.RequestContext.getICS(RequestContext.java:1030)
    at com.openmarket.Satellite.RequestContext.captureInputCoResident(RequestContext.java:518)
    at com.openmarket.Satellite.RequestContext.<init>(RequestContext.java:428)
    at com.openmarket.Satellite.servlet.BaseServlet.doGet(BaseServlet.java:112)
    ... 18 more
Caused by: java.lang.NullPointerException
    at COM.FutureTense.Common.CS.PushVars(CS.java:217)
    at com.openmarket.framework.objects.ContentCatalog.Lookup(ContentCatalog.java:305)
    at com.openmarket.framework.objects.AbstractContent.Read(AbstractContent.java:510)
    at com.openmarket.framework.objects.AbstractObject.Read(AbstractObject.java:460)
    at com.openmarket.framework.objects.AbstractObject.Read(AbstractObject.java:446)
    at com.openmarket.xcelerate.asset.AssetType.Load(AssetType.java:499)
    at com.fatwire.assetapi.util.AssetUtil.isComplexAsset(AssetUtil.java:125)
    at com.fatwire.assetapi.util.AssetUtil.isFlexAsset(AssetUtil.java:274)
    at com.fatwire.assetapi.data.AssetDataManagerImpl.read(AssetDataManagerImpl.java:79)
    at mypackage.urlassembler.ComplexDisassemblyData.getAssetIdFromPageName(ComplexDisassemblyData.java:189)
    at mypackage.urlassembler.ComplexDisassemblyData.valueOf(ComplexDisassemblyData.java:145)
    at mypackage.urlassembler.MyCustomURLAssembler.getDisassemblyContext(MyCustomURLAssembler.java:79)
    at com.fatwire.cs.core.uri.AbstractAssembler.disassemble(AbstractAssembler.java:418)
    at com.fatwire.cs.core.uri.AssemblerEngine.disassemble(AssemblerEngine.java:242)
    at COM.FutureTense.Servlet.ServletRequest.disassembleURI(ServletRequest.java:852)
    at COM.FutureTense.Servlet.ServletRequest.initializeParameters(ServletRequest.java:1023)
    at COM.FutureTense.Servlet.ServletRequest.getParameters(ServletRequest.java:786)
    at COM.FutureTense.Servlet.FRequestObj.prepInput(FRequestObj.java:1090)
    at COM.FutureTense.Servlet.FRequestObj.init(FRequestObj.java:973)
    at COM.FutureTense.Servlet.FRequestObj.<init>(FRequestObj.java:271)
    at COM.FutureTense.Servlet.FRequestObj.newInstance(FRequestObj.java:231)
    at COM.FutureTense.Servlet.FRequestObj.newInstance(FRequestObj.java:218)
    at COM.FutureTense.CS.Factory.newCS(Factory.java:66)
    at com.openmarket.Satellite.RequestContext.getICS(RequestContext.java:1026)
    ... 21 more 
```

这似乎很奇怪。由于某种原因，它无法使用现有会话。如果我将反汇编会话检索更改为此，它可以正常工作：

```
Session ses = SessionFactory.newSession(userName, pass); 
```

但是，我当然不想每次要解析 url 时都创建另一个会话。为什么我会得到异常？什么是处理这个问题的好方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T18:39:02.470

好的，显然 URL 反汇编不能做任何与 DB 内容相关的事情，因为它应该在没有连接的卫星服务器上执行。不过，对于使用数据库的 URL 汇编很好......

因此，基于[此](http://www.sciabarra.com/fatwire/2011/04/17/improving-the-firstsiteii-url-assembler/)，我发现我需要将我的 Asset API 代码移动到一个从未缓存的包装器调用的帮助器类。从那里它工作正常。

# ios - Xcode, iOS - 图像线条/形状识别

> ID：12342049
> 
> 赞同：6
> 
> 时间：2012-09-09T19:05:20.120
> 
> 标签：ios, image-processing, uiimageview, uiimage

我想识别我的`UIImageView`（或`UIImage`）内的正方形/矩形。

我查看了“ [iOS 上非常简单的图像识别](https://stackoverflow.com/questions/4695268/very-simple-image-recognition-on-ios)”，但这并不是我想要的。

目前我有一个不时`UIImageView`给出的。`UIImage`

大多数`UIImage`es 都有这样的黑色正方形/矩形： ![图像](../Images/d5e4a8e027cef0bd03cafa90253a93e6.png). 但是角落可能（或可能没有）有圆形边缘。

如何识别第一个黑色正方形/矩形的大小？最终结果将是调整我的大小`UIImageView`以使第一个黑色方块`UIImage`填满屏幕。像这样： ![img 与 iPhone](../Images/b05ce7ae3f0bf4e445b6148cc5004c12.png)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-12T23:45:16.457

如果您的图像在水平行中始终是锐利的黑色方块，您可以使用角检测来识别矩形，然后挑选出最左边的四个角。在基于 Harris、Noble 和 Shi-Tomasi 角点检测方法的开源[GPUImage](https://github.com/BradLarson/GPUImage)框架中，我有三种角点检测器变体。

对阈值为 0.4 且灵敏度为 4.0 的框运行 GPUImageHarrisCornerDetectionFilter 会产生以下结果：

![Harris角点检测结果](../Images/9ec3dbe13b50d3522cf854b57dc1caff.png)

它们有点难以看到，但红色十字准线标记了探测器发现盒子角落的位置。同样，您只需要使用最左边的四个点来找到您的目标矩形，然后简单地缩放您的图像或视图，以便该矩形现在填充您的视图。

可以在我的框架中的 FilterShowcase 或 FeatureExtractionTest 示例中找到如何运行此类特征检测的示例。我在 Signal Processing的[这个答案](https://dsp.stackexchange.com/questions/401/how-to-detect-corners-in-a-binary-images-with-opengl/2237#2237)中描述了我这样做的过程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T16:59:26.110

似乎最简单的解决方案是：

1.  将所有像素垂直汇总到最顶行（如 Excel 表）
2.  具有最小/最大值的行是您的“差距”区域

宽度可以从（2）得出。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-09-17T14:37:53.383

根据我对您的问题的理解，您需要实施[Canny 边缘检测算法](http://en.wikipedia.org/wiki/Canny_edge_detection)来检测图像中黑色边框的边缘。

为此，您应该使用以下链接中提供的图像处理框架

*   [谷歌](http://code.google.com/p/simple-iphone-image-processing/source/checkout)
*   [Github](https://github.com/mro/simple-iphone-image-processing)

使用**Image.m**文件中的`ImageWrapper *Image::cannyEdgeExtract(float tlow, float thigh)`函数。

# qt - 在 QPlainTextEdit 中添加结束行标记

> ID：12342052
> 
> 赞同：1
> 
> 时间：2012-09-09T19:05:43.647
> 
> 标签：qt, qplaintextedit

我想添加一条垂直线来标记 80 个字符`QPlainTextEdit`。我查看了文档，但在文档中看不到任何内容。我需要自己画吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T20:13:54.057

我认为一种可能的方法是在调用基类实现后重新实现[paintEvent](http://doc-snapshot.qt-project.org/4.8/qplaintextedit.html#paintEvent) ()并使用QPainter画线。[可以使用QFontMetrics](http://doc-snapshot.qt-project.org/4.8/qfontmetrics.html)计算线条的位置。

# ruby-on-rails-3 - 将本地 rails 变量传递给 javascript 到部分

> ID：12342058
> 
> 赞同：1
> 
> 时间：2012-09-09T19:06:25.580
> 
> 标签：ruby-on-rails-3

我放弃了我的搜索，我通常会尝试自己解决这些问题，但我正在努力奋斗，我只想让这个工作

我在下面看到了link_to，其中@puser 是我当前正在查看的个人资料的用户。

```
<%= link_to 'Request', new_or_edit_relationship_path(nil), :remote => true, :locals => { :puser => @puser} %> 
```

这反过来又调用 new_relationship_path 这是一个 .js.erb 文件，如下所示

```
alert("<%= escape_javascript(puser.id) %>") 
```

为什么这行不通！？这是说 puser 变量或方法未定义。如果我只是在当地人中渲染部分传递但没有，这很完美。Javascript不想玩得很好

谁能帮助解释为什么我或程序很愚蠢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T19:14:39.250

当您执行`link_to`as`remote`时，用户在单击链接时将开始一个全新的请求。因此，传递 a`local`对新请求没有任何意义。（`local`在新请求中不再存在。）

因此，为了`@puser`在新请求中存在 ，您需要通过 URL传递`id`for （无论您做什么）。新的请求需要通过那个来查找，然后才能在JS中使用。`@puser``new_or_edit_relationship_path``puser``id``alert()`

希望能有所帮助，并且比泥浆更清晰。

# jquery-mobile - 带有 data-type="horizo ntal" 的 jQuery 移动电台列表以动态形式失败

> ID：12342061
> 
> 赞同：2
> 
> 时间：2012-09-09T19:07:00.760
> 
> 标签：jquery-mobile

这是一个演示该问题的示例 HTML 页面：

```
 <!DOCTYPE html> 
    <html> 
            <head> 
            <title>My Page</title> 
            <meta name="viewport" content="width=device-width, initial-scale=1"> 
            <link rel="stylesheet" href="http://code.jquery.com/mobile/1.1.1/jquery.mobile-1.1.1.min.css" />
            <script src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
            <script src="http://code.jquery.com/mobile/1.1.1/jquery.mobile-1.1.1.min.js"></script>
    </head> 
<body> 

<div data-role="page">

    <div data-role="header">
        <h1>My Title</h1>
    </div><!-- /header -->

    <div data-role="content" id="cp">   
        <form id="form">
            <div data-role="fieldcontain">
                <fieldset data-role="controlgroup" data-type="horizontal" data-mini="true">
                    <legend>Test 1:</legend>
                    <input type="radio" name="r1" id="r1a" value="none" checked="checked" /><label for="r1a">A</label>
                    <input type="radio" name="r1" id="r1b" value="detail"/><label for="r1b">B</label>
                    <input type="radio" name="r1" id="r1c" value="measure"/><label for="r1c">C</label>
                </fieldset>
            </div>
        </form>     
    </div><!-- /content -->

</div><!-- /page -->

<script type="text/javascript">
$(document).ready(function() {
    var form = $('#form');

    form.append('<div data-role="fieldcontain">');
    form.append('   <fieldset data-role="controlgroup" data-type="horizontal">');
    form.append('      <legend>Test 2:</legend>');
    form.append('      <input type="radio" name="r2" id="r2a" value="none" checked="checked" /><label for="r2a">A</label>');
    form.append('      <input type="radio" name="r2" id="r2b" value="detail"/><label for="r2b">B</label>');
    form.append('      <input type="radio" name="r2" id="r2c" value="measure"/><label for="r2c">C</label>');
    form.append('   </fieldset>');
    form.append('</div');

    form.trigger('create');
});
</script>

</body>
</html> 
```

保存此页面并将其加载到浏览器中。您将看到“Test 1”单选列表呈水平排列（因为该`data-type="horizontal"`属性应该如此）。然而，动态添加的“测试 2”单选列表垂直出现，这是默认设置。似乎`data-type="horizontal"`对动态创建的广播列表没有影响。

是否有任何人知道我应该在 DOM 中的某处触发以使其工作的刷新或事件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T01:39:43.050

问题在于您将新元素添加到表单的方式。如果您将 javascript 函数更改为此，您会看到它可以工作：

```
$(document).ready(function() {
    var form = $('#form');

    var newElement = '';
    newElement += '<div data-role="fieldcontain" data-type="horizontal">';
    newElement += '   <fieldset data-role="controlgroup" data-type="horizontal">';
    newElement += '      <legend>Test 3:</legend>';
    newElement += '      <input type="radio" name="r3" id="r3a" value="none" checked="checked" /><label for="r3a">A</label>';
    newElement += '      <input type="radio" name="r3" id="r3b" value="detail"/><label for="r3b">B</label>';
    newElement += '      <input type="radio" name="r3" id="r3c" value="measure"/><label for="r3c">C</label>';
    newElement += '   </fieldset>';
    newElement += '</div>';

    form.append(newElement);

    form.trigger('create');
}); 
```

这样想：每次使用 append() 函数时，浏览器都会尝试将您提供的任何内容添加到 DOM。但是因为你已经在对 append() 的不同调用中破坏了你的元素，所以浏览器必须尝试理解它。所以当你有这个时：

```
form.append('<div data-role="fieldcontain">'); 
```

浏览器看到你已经离开了一个结束的 div 标签，并试图通过添加它来为你修复它。这意味着您对 append() 的下一次调用将不会进入您刚刚添加的 div 内部，而是在它之后，因为浏览器已自动为您关闭它。

您应该添加完整的、格式良好的元素以避免此问题。

# scala - Dispatch 0.9的基本用法

> ID：12342062
> 
> 赞同：9
> 
> 时间：2012-09-09T19:07:05.330
> 
> 标签：scala, scala-dispatch

我想发布到一个 URL，设置查询参数和标题，并在正文中传递一个原始字符串。然后我想做请求并获取输出字符串，以便我可以将其转换为 JSON。我还希望异常处理能够响应不同类型的错误（并处理重定向）

但是 Dispatch 0.9 的文档记录很差，使用文档版本破坏 API 并且非常古怪，所以我无法提出完整的解决方案。我**完全被卡住**了，因此我要求很多。

* * *

这就是我能想到的，但是设置查询参数很奇怪：

```
val solr = host("localhost", 8983)
val req  = solr / "update" / "json" 
    setQueryParameters( Map( "commit" -> "true")) 
    setHeader( "Content-type", "application/json")
    setBody( a) 
```

但是设置查询参数给了我一个严重的错误：

```
<console>:14: error: type mismatch;
 found   : scala.collection.immutable.Map[java.lang.String,java.lang.String]
 required: com.ning.http.client.FluentStringsMap
       val req  = solr / "update" / "json"  setQueryParameters( Map( "commit" -> "true")) 
```

* * *

请帮助完全设置请求：HTTPS、重定向、查询参数、标头和 POST 方法。

还有助于（同步地，我希望这样）执行请求以获取正文（和标头）并根据响应代码（200、301、302、400、500）进行分支。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-09T21:23:12.407

你离得并不远。以下内容适用于您的请求定义：

```
import dispatch._

val params = Map("commit" -> "true")
val headers = Map("Content-type" -> "application/json")

val solr = host("localhost", 8983)

val req = solr / "update" / "json" << a <<? params <:< headers 
```

或者，更少的操作性：

```
val req = url("http://localhost:8983/update/json").POST
  .setBody(a)
  .addQueryParameter("commit", "true")
  .addHeader("Content-type", "application/json") 
```

`.secure`如果您想使用 HTTPS，请在某处放一个。

你可以像这样得到一个 Promise（它本质上代表一个延迟请求操作的结果）：

```
val result = Http(req OK as.String).either 
```

然后像这样使用它，例如：

```
result() match {
  case Right(content)         => println("Content: " + content)
  case Left(StatusCode(404))  => println("Not found")
  case Left(StatusCode(code)) => println("Some other code: " + code.toString)
} 
```

虽然我同意[0.9 文档](http://dispatch.databinder.net/Dispatch.html)在某些地方很少见，但它确实为如何使用 Promise 处理异步请求操作提供了非常有用的解释。

* * *

**OP的补充：**这一点为我完成了这个答案。这以一种简单的阻塞方式获得响应。

```
val response = Http(req)()
val body response.getResponseBody 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T20:18:01.543

我在 Dispatch 0.9.1 的简​​单用例中使用 POST，设置如下：

```
val SERVICES_URL = "http://myhost/mycontext"

val postFields: Map[String, String] = ...
val request = url(SERVICES_URL) << postFields OK as.String
val post = Http(request) 
```

# iframe - 如何以百分比设置 twitter 的嵌入式时间线宽度（响应式/流体设计）

> ID：12342069
> 
> 赞同：7
> 
> 时间：2012-09-09T19:07:51.757
> 
> 标签：iframe, twitter, responsive-design, timeline, fluid-layout

我正在寻找设置[twitter 的嵌入式时间线](https://dev.twitter.com/docs/embedded-timelines)，当你有一个固定的设计时，这很容易，但这不是我的情况，我实际上正在为一个新网站构建一个流畅和响应式的设计。

我的问题是，我如何设置[twitter 的嵌入式时间线](https://dev.twitter.com/docs/embedded-timelines)，因为它是一个 iframe 并且你应该在你的 twitter 帐户中设置 with in px ？

谢谢 ：）

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-18T21:13:21.933

这似乎对我有用：

```
 #twitter-widget-0 {
    width:100%;
  } 
```

其中 #twitter-widget-0 是它生成的 iframe，放置在适当样式的容器中。它并不完美：小部件根据宽度生成其内容略有不同，并且调整大小后边距等不会完全相同；但这似乎微不足道。

我很好奇为什么简单的 CSS 不适合你——如果我遗漏了什么，我很抱歉。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-22T15:39:51.727

这个逻辑将至少改变宽度和高度：

```
#twitter-widget-0, #twitter-widget-1 {
  float: none; 
  width: 100% !important;  
  height: 250px !important;
} 
```

缩短高度的唯一问题是它隐藏了人们发送推文的文本框，但它确实缩短了高度。我的猜测是，如果你想添加其他 CSS 样式，你可以放 !important 子句。我还假设如果您有三个小部件，您将定义 #twitter-widget-2 等。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-01-15T11:39:52.570

感谢你们所有人，我找到了自己的方式：几乎就像缺乏所说的那样，但我们不得不专注于 iframe：

```
.MyClassForTheDivThatContainTheiFrame iframe{
    width:100%;
} 
```

当然 .MyClassForTheDivThatContainTheiFrame 也具有 % 宽度

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-22T11:59:00.493

这是一个有用的线程，谢谢。我正在开发一个使用较旧的 Twitter 个人资料小部件的网站，我发现它更易于定制。因此，另一种方法是使用它来显示提要（定制以适应）：

```
<script>
    new TWTR.Widget({
      version: 2,
      type: 'profile',
      rpp: 5,
      interval: 6000,
      width: 300,
      height: 400,
      theme: {
        shell: {
          background: 'transparent',
          color: '#151515'
        },
        tweets: {
          background: 'transparent',
          color: '#151515',
          links: '#007dba'
        }
      },
      features: {
        shell: false,
        scrollbar: true,
        loop: false,
        live: true,
        hashtags: true,
        timestamp: true,
        avatars: true,
        behavior: 'all'
      }
    }).render().setUser('BlueLevel').start();
</script> 
```

然后通过将其添加到样式表来覆盖宽度：

```
.twtr-doc {
width:100% !important; 
```

}

您可以在兼容模式下使用IE9查看要修改的各种类，然后使用F12开发人员工具查看html/css。

希望对某人有所帮助！

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-25T22:42:02.743

超级hacky，但你也可以这样做：

```
 <script type="text/javascript">
        var checkTwitterResize = 0;
        function resizeTwitterWidget() {
            if ($('#twitter-widget-0').length > 0) {
                checkTwitterResize++;
                if ($('#twitter-widget-0').attr('width') != '100%') checkTwitterResize = 0;
                $('#twitter-widget-0').attr('width', '100%');
                // Ensures it's checked at least 10 times (script runs after initial resize)
                if (checkTwitterResize < 10) setTimeout('resizeTwitterWidget()', 50);
            } else setTimeout('resizeTwitterWidget()', 50);
        }
        resizeTwitterWidget();
    </script> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-25T14:25:24.417

如果你绝对必须做一个流体，你可以编写一个 javascript，在调整大小事件或使用一些 javascript 计时器后更改 iframe 的宽度。

我们可以看看你的一些代码来为此制作一些js代码吗？

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-03-29T17:28:15.643

属性选择器应该可以工作：

```
iframe[id*="twitter-widget"] {
  width: 100%;
} 
```

更多[在这里](http://www.w3schools.com/css/css_attribute_selectors.asp)。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-09-12T01:09:52.517

这是不可能的。您可以使用锚选项卡中的 html 宽度和高度来设置精确的宽度和高度。除此之外，你运气不好。没有响应或流畅的能力。

它还具有 220 像素的最小宽度和 520 像素的最大宽度。

```
<a class="twitter-timeline" width="520" height="700" data-dnt=true href="https://twitter.com/vertmob" data-widget-id="WIDGET_ID_HERE">Tweets by @vertmob</a>
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script> 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-09-09T23:42:54.773

你可以给你的 iframe 一个类，并尝试将 CSS 应用到它。至少将宽度更改为 %。

# html - HTML 压缩器 | 标签之间有空格的原因？

> ID：12342070
> 
> 赞同：1
> 
> 时间：2012-09-09T19:07:53.660
> 
> 标签：html

HTML Compressor 在我的标签之间留有空格。这是必要的吗？有没有删除它们的选项？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T19:12:17.763

没有必要。使用激进的选项。

# jquery - 用点击按钮隐藏表格

> ID：12342073
> 
> 赞同：1
> 
> 时间：2012-09-09T19:08:17.233
> 
> 标签：jquery

我可以使用 jquery 显示带有链接标签的表格，其中包含以下代码。

```
 $(document).ready(function()
{
    $("#show").click(function()
    {
        $("#table").show();
    });
}); 
```

但是当我想为一个按钮执行此操作时，它会显示表格一秒钟，然后它将被隐藏。这些是按钮的代码：

```
$(document).ready(function()
{
    $("#button").click(function()
    {
        $("#table").show();
    });
}); 
```

更新 ：

```
 $(document).ready(function()
{
    $("#table").hide();
    $("#button").click(function()
    {
        $("#table").show();
    });

}); 
```

以下是代码：

```
 <script type="text/javascript" src="jquery-1.8.1.min.js"></script>
<script type="text/javascript">
$(document).ready(function()
{
    $("#table").hide();
    $("#button").click(function()
    {
        $("#table").show();
    });

});
</script>
</head>

<body>
<p><a href="#" id="show">Show</a> <a href="#" id="hide">Hide</a></p>
<form id="form1" name="form1" method="post" action="">
  <p>
    <input type="submit" name="button" id="button" value="Show" />
  </p>
  <p>&nbsp; </p>
</form>
<table width="515" border="0" class="table1" id="table">
  <tr>
    <td width="509" class="table1"><img src="Image/Tulips.jpg" width="400" height="400" alt="Tulips" /></td>
  </tr>
</table> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-09T19:13:41.530

你的代码工作得很好，也许你说的是`toggle`这里你去：[**Demo**](http://jsfiddle.net/ZUXyx/)

我刚`.show()`变成[`.toggle()`](http://api.jquery.com/toggle/)

```
$(document).ready(function()
{
    $("#button").click(function()
    {
        $("#table").toggle();
    });
}); 
```

**更新：** 问题是您`type="submit"`在按钮上使用导致表单提交...将其更改为`type="button"`

**另一种方式**（保持在`type="submit"`那里）：

```
$(document).ready(function()
{
    $("#table").hide();
    $("#button").click(function()
    {
        $("#table").show();
        return false;           
    });

}); 
```

我添加`return false;`以防止按钮默认操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-09T19:13:23.253

```
$(document).ready(function()
{
    $("#button").click(function()
    {
        $("#table:hidden").show();
        $("#table:visible").hide();
    });
}); 
```

或者：

```
$(document).ready(function()
{
    $("#button").click(function()
    {
        $("#table").toggle();
    });
}); 
```

**编辑**如您的评论中所述：

```
$(document).ready(function()
{
    $("#button").click(function()
    {
        $("#table").show();
        setTimeout(function()
        {
            $("#table").hide();
        }, 2000);
    });
}); 
```

该表将出现 2000 毫秒（2 秒），然后隐藏。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-27T05:01:40.030

只需在此处使用这些 if 语句。

0"> 然后你的表格标签到这里。我们可以使用上面的 javascript，但是，如果提交按钮有一些动作要做它不知道要调用哪个动作..隐藏表格或执行后面给出的任务提交按钮。所以使用上面的 if 语句。它对我来说就像一个魅力！:)

# scala - Scala 模式匹配和类型推断

> ID：12342074
> 
> 赞同：5
> 
> 时间：2012-09-09T19:08:19.430
> 
> 标签：scala, pattern-matching, type-inference, type-erasure

有人可以解释为什么下面的代码会编译吗？

```
Option("foo") match {
  case x: List[String] => println("A")
  case _ => println("B")
} 
```

这给了我一个关于类型擦除的（预期的）警告，但它仍然可以编译。我希望这会引发类型错误，就像我匹配 on`"foo"`而不是`Option("foo")`.

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-10T06:41:33.657

代码被注释了，所以让我们花点时间来细细品味：

```
 /** If we can absolutely rule out a match we can fail early.
   *  This is the case if the scrutinee has no unresolved type arguments
   *  and is a "final type", meaning final + invariant in all type parameters.
   */ 
```

例如，请注意 None 不是最终的。我知道，对吧？

如果你曾经尝试过 scalac -Ypatmat-debug，这里的评论可能会有所帮助：

[https://github.com/scala/scala/pull/650](https://github.com/scala/scala/pull/650)

可达性几乎触手可及：

[https://issues.scala-lang.org/browse/SI-6146](https://issues.scala-lang.org/browse/SI-6146)

但我看不到任何关于有朝一日可能会受到警告的承诺。出于性能原因？也可以说，它为什么要对 instanceOf[Foo[_]] 发出警告？

目前，规范第 8.2 - 8.4 节说明了为什么与 Foo[a] 匹配是有趣的（因为 a 获得的边界）。我想我会再读一遍。喝了杯咖啡之后。

```
trait Foo[+A]
final class Fuzz[+A] extends Foo[A]
final object Fooz extends Foo[Nothing]
object Futz extends Foo[Nothing]

//error
Fooz match {
  case x: List[_] => println("A")
  case _ => println("B")
}
//no error
Futz match { ... } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-09T20:41:41.513

我会假设编译器同时将`Option`and`List`视为`Product`，这就是它编译的原因。正如您所说，有关类型擦除的警告是预期的。这是使用另一个产品的示例：

```
scala> Option("foo") match {
 | case x: Tuple2[String,String] => println("TUPLE")
 | case x: List[String] => println("LIST")
 | case _ => println("OTHER")
 | }
<console>:9: warning: non variable type-argument String in type pattern (String, String)       is unchecked since it is eliminated by erasure
          case x: Tuple2[String,String] => println("TUPLE")
                  ^
<console>:10: warning: non variable type-argument String in type pattern List[String] is unchecked since it is eliminated by erasure
          case x: List[String] => println("LIST")
                  ^ 
```

更新 w/r/t 案例类（因为下面的评论）：

```
scala> case class Foo(bar: Int)
defined class Foo

scala> val y: Product = Foo(123)
y: Product = Foo(123) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-09T20:58:35.233

我注意到当你匹配的值的类被声明为 final 时会显示一个错误（我们知道那`String`是 final）。我仍然不知道为什么没有它就没有错误。

# entity-framework - 从 Entity Framework 4 升级到 5 导致错误

> ID：12342083
> 
> 赞同：1
> 
> 时间：2012-09-09T19:09:21.537
> 
> 标签：entity-framework, entity-framework-4, asp.net-mvc-4, entity-framework-5

升级到 EF 5 后，我不断进入`Validation failed for one or more entities. See 'EntityValidationErrors' property for more details'`我的代码的特定实例。

事实证明，我在数据库中有一个可以为 NVARCHAR 为空的字段，并且它在部分类中标记为具有 [Required] 和 Data 注释。有问题的字段以编程方式设置为 null。这在 EF4 中运行良好，因为它已针对数据库模型（NVARCHAR 可为空）进行了验证。

我需要将该字段标记为 [Required]，因为它在其他情况下也需要用户输入。

我有哪些选择？我可以在之前忽略该属性/验证错误`SaveChanges()`吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-09T19:14:59.547

这就是为什么强烈建议您使用视图模型，而不是将实体直接传递给视图的原因。您的视图和数据模型有不同的要求，尝试使用相同的模型进行验证会导致问题。

相反，从您的数据模型中删除所需的属性并创建一个具有所需属性的视图模型，然后使用 AutoMapper 之类的东西在它们之间进行映射。

# javascript - 如何使用javascript检测触摸设备浏览器与桌面？

> ID：12342092
> 
> 赞同：2
> 
> 时间：2012-09-09T19:10:36.547
> 
> 标签：javascript, user-agent, browser-detection, device-detection

使用 userAgent.match 检测触摸设备（智能手机和平板电脑）与桌面浏览器并返回布尔变量（例如“isipad”）的代码是什么？

我需要主要针对 Android 和 Apple 设备进行测试。如果设备浏览器是 Android 或 Apple，则返回 isipad = false。否则，返回 isipad = true。

到目前为止，我是这样进行的（用于 iDevice 浏览器检测）：

```
if( navigator.userAgent.match(/iPhone/i) || navigator.userAgent.match(/iPod/i) ||navigator.userAgent.match(/iPad/i) )
{var isipad = true;}
else
{var isipad = false;} 
```

它似乎有效，但是在这种情况下，我也希望能够添加 android 浏览器。

提前致谢。亚历克斯

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-17T11:14:58.940

```
if ("ontouchstart" in document.documentElement)
{
  alert("It's a touch screen device.");
}
else
{
 alert("Others devices");
} 
```

我在这里和那里浏览了很多后发现的最简单的代码

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-09T19:25:36.343

你真的不应该试图弄清楚它是什么类型的设备。相反，您应该检查主机设备的功能，并让您的代码适应它找到的功能，无论它是什么类型的设备。这称为“特征检测”，被认为是比检测特定浏览器或设备更好的方法。

例如，当 Windows 8 平板电脑问世时，就会有鼠标和触控的设备。

有很多关于如何检测触摸功能的文章。见这些想法：

[http://alastairc.ac/2010/03/detecting-touch-based-browsing/](http://alastairc.ac/2010/03/detecting-touch-based-browsing/)

[针对触控设备优化网站](https://stackoverflow.com/questions/2607248/optimize-website-for-touch-devices)

[https://stackoverflow.com/a/4819886/816620](https://stackoverflow.com/a/4819886/816620)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-18T13:39:49.430

我已经使用 iPad mini 和 Surface 平板电脑对 detectmobilebrowsers.com 进行了测试，它们都返回“未检测到移动浏览器”。

最奇怪的是，iPad mini 的 User-Agent 字符串实际上包含“Mobile”这个词，这表明它作为移动设备并不难确定。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-06T01:38:41.883

尽管我同意@jfriend00 的观点，即您应该使用“特征检测”而不是使用用户代理，但听起来用户代理是您唯一的选择。我使用[这个网站](http://detectmobilebrowsers.com/)进行移动浏览器检测。他们经常根据新设备更新他们的代码，所以偶尔更新你的。这是JS代码：

```
(function(a,b){if(/android.+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|meego.+mobile|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(a)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(di|rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(a.substr(0,4)))window.location=b})(navigator.userAgent||navigator.vendor||window.opera,'http://detectmobilebrowser.com/mobile'); 
```

这是它在行动中的一个[小技巧。](http://jsfiddle.net/D82Ay/)

# php - PHP foreach - 以相反顺序循环遍历数组

> ID：12342095
> 
> 赞同：1
> 
> 时间：2012-09-09T19:10:55.060
> 
> 标签：php, foreach

有没有办法循环通过与通常方式相反的 foreach 循环？例如，我在 $_FILES 变量中有未知数量的文件（$_FILES['file']、$_FILES['file2']、$_FILES['3'] 等...）。使用此代码

```
foreach($_FILES as $i) 
```

$i 将输出为 file3、file2、file。我需要它来输出文件，file2，file3。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-09T19:12:17.487

[array_reverse](http://php.net/array_reverse)应该可以解决问题：

```
foreach(array_reverse($_FILES) as $i) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-09T19:12:53.460

```
foreach(array_reverse($_FILES) as $i) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-09T19:20:57.857

这是另一种不使用 a 的方法`for`：

```
$i = count($_FILES);
while ($i-->0)
    // Do stuff 
```

我觉得它稍微漂亮一点。

*几年后，我回首这件事，我皱起了眉头。*

# php - php数组转换为多维数组foreach

> ID：12342098
> 
> 赞同：0
> 
> 时间：2012-09-09T19:11:22.160
> 
> 标签：php, multidimensional-array, foreach

我有一个数组：$types：

```
Array
(
    [0] => Array
        (
            [id] => 1
            [cat] => Main
            [type] => name0        )

    [1] => Array
        (
            [id] => 2
            [cat] => Main
            [type] => Name1        )

    [2] => Array
        (
            [id] => 3
            [cat] => Main
            [type] => Name2        )

    [3] => Array
        (
            [id] => 4
            [cat] => Main
            [type] => Name3        )

    [4] => Array
        (
            [id] => 5
            [cat] => Secondary
            [type] => Name4        )

    [5] => Array
        (
            [id] => 6
            [cat] => Secondary
            [type] => Name5        )

    [6] => Array
        (
            [id] => 7
            [cat] => Secondary
            [type] => Name6        )

    [7] => Array
        (
            [id] => 8
            [cat] => Other
            [type] => Name7
        )

    [8] => Array
        (
            [id] => 9
            [cat] => Other
            [type] => Name8
        )

    [9] => Array
        (
            [id] => 10
            [cat] => Other
            [type] => Name9
        )

    [10] => Array
        (
            [id] => 11
            [cat] => Other
            [type] => name10
        )

) 
```

我想将它重新构建为一个多向阵列。但是按 cat 分组在一起，因此它们是 Main、Secondary 和 Other *那些确实或可能从数据库中更改的。随着时间的推移会增加更多，因此`$types['cat']`建议使用。

我还有一个。有 cat1/cat2 我需要做同样的事情，但在我得到这个工作之后，我希望我能把那个工作出来。

我在这里看过，在谷歌上看过。这里有一些类似的例子，但我无法让它们中的任何一个正常工作。据我所知，我认为最好的方法是使用`foreach()`然后构建一个新数组？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T19:18:45.070

像这样的东西？

```
<?
$all = array(
    array('id'=>1, 'cat'=>'Main','type'=>'Name0'),
    array('id'=>2, 'cat'=>'Main','type'=>'Name1'),
    array('id'=>3, 'cat'=>'Main','type'=>'Name3'),
    array('id'=>4, 'cat'=>'Sec','type'=>'Name4'),
    array('id'=>5, 'cat'=>'Sec','type'=>'Name5'),
    array('id'=>6, 'cat'=>'Sec','type'=>'Name6'),
);

$result = array();
foreach($all as $array){
    $result[$array['cat']][] = array('id'=>$array['id'],'type'=>$array['type']);
}

die(print_r($result)); 
```

# javascript - HTML5 获取圆弧末端的坐标

> ID：12342102
> 
> 赞同：7
> 
> 时间：2012-09-09T19:11:58.523
> 
> 标签：javascript, html

如果我们画一条弧线，我们如何获得弧线终点（最后一点）相对于中心的坐标。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-09T19:36:20.300

见[http://jsfiddle.net/5DdQt/](http://jsfiddle.net/5DdQt/)

利用

```
function getPoint(c1,c2,radius,angle){
    return [c1+Math.cos(angle)*radius,c2+Math.sin(angle)*radius];
} 
```

*   `c1``c2`是圆弧中心的坐标
*   `radius`是弧的半径
*   `angle`***是以弧度表示***的最后一点的角度。

弧度 = `(degrees * Math.PI) / 180`.

# vba - VBA中的奇怪错误消息，不应该出现

> ID：12342109
> 
> 赞同：1
> 
> 时间：2012-09-09T19:12:31.997
> 
> 标签：vba

我正在尝试编写一个简单的 VBA 代码来查找预定义范围中的特定文本，并根据搜索字符串（mykey）选择大小写。

```
Dim min As Integer 
Dim R As Range
Dim month As String

Worksheets("MyWorkSheet").Activate

If mykey.Text <> "" Then   'mykey being a combobox

Select Case mykey.Text
Case Is = "0 deg"
Worksheets("MyWorkSheet").Range("B4:B39").Find(mykey.Text).Activate
Case Is = "30 deg"
Worksheets("MyWorkSheet").Range("B44:B79").Find(mykey.Text).Activate
Case Is = "45 deg"
Worksheets("MyWorkSheet").Range("B84:B119").Find(topothesia.Text).Activate
Case Is = "60 deg"
Worksheets("MyWorkSheet").Range("B124:B159").Find(mykey.Text).Activate
Case Is = "90 deg"
Worksheets("MyWorkSheet").Range("B164:B199").Find(mykey.Text).Activate
End Select 
```

偶尔！当我运行代码时，我在处理所选 deg 的 Case 语句上收到一条错误消息，提示：对象变量或未设置块变量，但每次运行代码时都不会出现。

6/10 倍。

为什么会发生这种奇怪的事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T01:58:42.870

试试这个（不是真正的回答，但太长不能作为评论发表，对此感到抱歉）：

```
Dim rng As Range
Set rng = Worksheets("MyWorkSheet").Range("B4:B39").Find(mykey.Text)
If Not rng Is Nothing Then
    rng.Activate
Else
    MsgBox "Nothing found"
End If 
```

调整它以适应所有情况（只有一个声明，将其余的放在每种情况下，并且可能每次添加不同的错误消息）。如果在没有收到消息框的情况下仍然发生这种情况，那么您应该回来告诉我们更多关于您发现的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T11:58:33.523

您的 find 方法实际上并没有找到正确的结果。

如果您使用`Find`并且*找不到*匹配项，如果您尝试对结果执行某些操作（例如在您的情况下），它将返回该错误`Activate`- 这可能是因为文本框中的数据与您的内容不匹配`B`柱子。

尝试这样的事情：

```
Dim min As Integer 
Dim R As Range
Dim month As String

Worksheets("MyWorkSheet").Activate
dim result as Range
If mykey.Text <> "" Then   'mykey being a combobox

Select Case mykey.Text
Case Is = "0 deg"
    set result = Worksheets("MyWorkSheet").Range("B4:B39").Find(mykey.Text)
Case Is = "30 deg"
    set result = Worksheets("MyWorkSheet").Range("B44:B79").Find(mykey.Text)
Case Is = "45 deg"
    set result = Worksheets("MyWorkSheet").Range("B84:B119").Find(topothesia.Text)
Case Is = "60 deg"
    set result = Worksheets("MyWorkSheet").Range("B124:B159").Find(mykey.Text)
Case Is = "90 deg"
    set result = Worksheets("MyWorkSheet").Range("B164:B199").Find(mykey.Text)
End Select

'notify on a lack of result
if (result is nothing) then
    msgbox( "No successful match found for " & Is & "!")
end if 
```

这将有助于隔离您的问题。您可能必须以某种方式验证`mykey`和`topothesia`文本框实际上在您的代码中是否匹配或进行一些验证/错误检查（我无法为您进行验证，因为我不知道您的电子表格是什么样的，所以我添加了错误检查:) ）。

# html - 新行上的 div

> ID：12342111
> 
> 赞同：0
> 
> 时间：2012-09-09T19:12:45.053
> 
> 标签：html, css

我有以下内容：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<style type="text/css">
#scale div {
    float: left;
    width: 75px;
    padding: 5px;
    border: 0px #333 solid;
}
</style>
</head>
<body>
<div style="font-size: 10px;" id="scale">
    <div id="box" align="center" style="background:#88ff88;" >&nbsp</div>
    <div id="a">&nbsp1 &nbsp&nbsp</div>
    <div id="box" align="center" style="background:#ff8888;">&nbsp</div>
    <div id="b">&nbsp2 &nbsp&nbsp</div>
    <div id="box" align="center" style="background:#ff88ff;">&nbsp</div>
    <div id="c">&nbsp3 &nbsp&nbsp</div>
</div>
</body>
</html> 
```

我怎样才能在三行上获得上述内容。即一个色块和一个数字在一行。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-09T19:23:22.243

首先，您有多个具有相同 ID 的元素。它不是那样工作的。ID是唯一的，多个元素可以有同一个类。

其次，我建议在您的盒子的 div 中只使用一个空的 span 标签。默认情况下，Divs 显示块（占用整行），因此您可以拥有一个内联块跨度（仅占用所需的空间，但被视为块元素），并设置宽度和高度以及旁边的数字。

此外，内联样式使代码看起来凌乱且难以阅读和使用。您应该将 CSS 与 HTML 分开。

```
<div id="scale">
  <div id="a"><span></span>1</div>
  <div id="b"><span></span>1</div>
  <div id="c"><span></span>1</div>
</div>

#scale div span {
  width: 100px;
  height: 20px;
  display: inline-block;
}

#a span{
  background-color:#00F;
}

#b span{
  background-color:#0F0;
}

#c span{
  background-color:#F00;
} 
```

[**演示**](http://jsbin.com/ewimox/1/edit)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-09T19:22:28.330

在你的`style`标签中，在你`display: inline-block`所有的盒子 div 上使用。

# web-services - jax-rpc(jsr224) 和 jax-ws(jsr101) 有什么区别

> ID：12342112
> 
> 赞同：1
> 
> 时间：2012-09-09T19:12:49.483
> 
> 标签：web-services, java, jsr

我只是想弄清楚这两个JSR有什么区别，它们都是用不同的方式来实现web服务的，一个看起来像使用注解，已经包含在jre1.6中，另一个是需要下载一些包轴，所以我只是认为只有两个包来实现 web 服务或肥皂？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T19:16:48.313

是的，rpc比较老，实现webserive和client都不一样，其实是两个不同的包

# wordpress - 在 Wordpress 侧边栏小部件中访问帖子自定义字段

> ID：12342114
> 
> 赞同：1
> 
> 时间：2012-09-09T19:12:55.207
> 
> 标签：wordpress, widget, sidebar

我正在构建一个简单的侧边栏小部件来显示自定义帖子类型“显示”的循环。

每个“节目”都有大约 3 个自定义字段，我也想通过循环输出。这是我正在使用的代码：

这是我的插件代码中的循环：

```
<?php
// WIDGET CODE GOES HERE
$args = array( 'post_type' => 'shows', 'posts_per_page' => 10 );
$loop = new WP_Query( $args );
while ( $loop->have_posts() ) : $loop->the_post();
    $month = get_post_meta($post->ID,'month-abbreviation',true);
    $date = get_post_meta($post->ID,'date',true);
    $citystate = get_post_meta($post->ID,'city-state',true); ?> 
    <article class="sidebar-show clearfix">
        <a class="show-link" href="<?php the_permalink(); ?>">
            <div class="date-box">
                <span class="month"><?php echo $month; ?></span>
                <span class="date"><?php echo $date; ?></span>
            </div>
            <div class="venue-box">
                <?php echo "<h4>".get_the_title()."</h4>"; ?>
                <?php echo "<p>".$citystate."</p>"; ?> 
            </div>
        </a>
    </article>
<?php endwhile;
wp_reset_query();
wp_reset_postdata();
?>
<?php 
    echo $after_widget;
  }

}
add_action( 'widgets_init', create_function('', 'return register_widget("ShowsSidebarWidget");') );?> 
```

此代码提取帖子标题，但不显示自定义字段月份缩写、日期和城市状态。

这里缺少什么？

编辑：avexdesign 回复后删除了双引号。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-04T13:17:58.333

你确定 $post->ID 在这种情况下可用吗？

也许您应该尝试：**get_the_ID()**代替。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T19:59:09.637

好的，我看到了一些你可以尝试的方法。

1.  月份缩写 - 应该是单引号。像“月份缩写”

2.  尝试取出： `$month=`  `$date=`和 `$citystate =`

3.  可能需要`echo`

所以试试：

`echo get_post_meta($post->ID,'month-abbreviation', true);`

`echo get_post_meta($post->ID,'date', true);`

`echo get_post_meta($post->ID,'city-state', true);`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-09T20:35:18.990

尝试类似：

`<?php $loop = new WP_Query( array( 'post_type' => 'shows', 'posts_per_page' => 10 ) ); ?>`

`<?php while ( $loop->have_posts() ) : $loop->the_post(); ?>`

`<span class="month"><?php echo get_post_meta($post->ID, 'month-abbreviation', true); ?></span>`

`<span class="date"><?php echo get_post_meta($post->ID, 'date', true); ?></span>`

等等...对于您的其他自定义 ID

# c# - 触发事件 WPF 的计时器

> ID：12342116
> 
> 赞同：3
> 
> 时间：2012-09-09T19:13:16.280
> 
> 标签：c#, .net, wpf, events, timer

我在这里有一个项目，默认情况下，动作由 MouseEnter 事件发生。我的意思是，打开一个窗口、关闭、返回等等，都只发生在 MouseEnter 事件中。

我被要求仅在 3 秒后触发事件。这意味着用户将鼠标放在控件上，并且仅在 3 秒后，窗口中的所有控件都必须发生事件。

所以，我想到了一个全局计时器或类似的东西，它会返回 false 直到计时器达到 3 ......我认为就是这样......

Geez，有人知道我怎么能做这样的事情吗？

谢谢！！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-09T19:24:37.573

您可以定义一个类，该类将公开一个`DelayedExecute`方法，该方法接收要执行的操作并根据延迟执行的需要创建计时器。它看起来像这样：

```
public static class DelayedExecutionService
{
    // We keep a static list of timers because if we only declare the timers
    // in the scope of the method, they might be garbage collected prematurely.
    private static IList<DispatcherTimer> timers = new List<DispatcherTimer>();

    public static void DelayedExecute(Action action, int delay = 3)
    {
        var dispatcherTimer = new System.Windows.Threading.DispatcherTimer();

        // Add the timer to the list to avoid it being garbage collected
        // after we exit the scope of the method.
        timers.Add(dispatcherTimer);

        EventHandler handler = null;
        handler = (sender, e) =>
        {
            // Stop the timer so it won't keep executing every X seconds
            // and also avoid keeping the handler in memory.
            dispatcherTimer.Tick -= handler;
            dispatcherTimer.Stop();

            // The timer is no longer used and shouldn't be kept in memory.
            timers.Remove(dispatcherTimer);

            // Perform the action.
            action();
        };

        dispatcherTimer.Tick += handler;
        dispatcherTimer.Interval = TimeSpan.FromSeconds(delay);
        dispatcherTimer.Start();
    }
} 
```

然后你可以这样称呼它：

```
DelayedExecutionService.DelayedExecute(() => MessageBox.Show("Hello!")); 
```

或者

```
DelayedExecutionService.DelayedExecute(() => 
{
    DoSomething();
    DoSomethingElse();
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T15:26:51.617

我只是想添加一个更简单的解决方案：

```
public static void DelayedExecute(Action action, int delay = 3000)
{
    Task.Factory.StartNew(() => 
    {
        Thread.Sleep(delay);
        action();
    }
} 
```

然后就像在[其他答案中一样使用它](https://stackoverflow.com/a/12342208/677014)

# php - 如何从 PHP 对象数组中检索项目？

> ID：12342117
> 
> 赞同：-1
> 
> 时间：2012-09-09T19:13:18.897
> 
> 标签：php, arrays, object

我想从这个数组中检索数量。

```
 invoice Object
    (
    [data:private] => Array
    (
    [i_status] => pend
    [i_title] => 500 HLCoins , 500 HLCoins x8
    [i_member] => 1
    [i_items] => Array
    (
    [0] => Array
    (
    [act] => new
    [app] => nexus
    [type] => product
    [cost] => 0
    [tax] => 0
    [renew_term] => 0
    [renew_units] =>
    [renew_cost] => 0
    [quantity] => 1
    [physical] =>
    [shipping] => Array
    (
    )
    [weight] => 0
    [itemName] => 500 HLCoins
    [itemID] => 3
    [cfields] => Array
    (
    )
    [extra] =>
    [opt_id] => 0
    [associated] =>
    [assocBought] =>
    [groupRenewals] => 0
    [methods] => Array
    (
    )
    [k] => 0
    [_tax] => 0
    )
    [1] => Array
    (
    [act] => new
    [app] => nexus
    [type] => product
    [cost] => 0
    [tax] => 0
    [renew_term] => 0
    [renew_units] =>
    [renew_cost] => 0
    [quantity] => 8
    [physical] =>
    [shipping] => Array
    (
    )
    [weight] => 0
    [itemName] => 500 HLCoins
    [itemID] => 3
    [cfields] => Array
    (
    )
    [opt_id] => 0
    [groupRenewals] => 0
    [methods] => Array
    (
    )
    [_tax] => 0
    )
    )
    [i_total] => 0
    [i_date] => 1347217384
    [i_return_uri] =>
    [i_paid] => 0
    [i_status_extra] => a:1:{s:4:"type";s:4:"zero";}
    [i_discount] => 0
    [i_temp] =>
    [i_ordersteps] => 0
    [i_noreminder] => 1
    [i_renewal_ids] => Array
    (
    )
    [i_po] =>
    [i_notes] =>
    [i_shipaddress] =>
    [i_id] => 229
    )

        [takeAction] => 1
    ) 
```

我尝试了一堆代码，如 $invoice->quantity、$invoice[1]->quantity、$this->$invoice->quantity，但它们似乎都没有显示。

它仍然根本不显示，我试图 print_r 那就是它给我的数组。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-09T19:16:45.397

所有变量都`private`意味着您无法从对象外部访问它们。查看发票类的类定义。应该有一些函数可以从对象中获取数量，否则您可以将这样的功能添加到类中。

重点是关注点分离。该类将来可能会发生变化并且可能不会使用相同的结构，因此您应该使用对象函数来访问属性，不要直接将它们作为变量访问。

[您可以在手册](http://www.php.net/manual/en/language.oop5.visibility.php)或有关面向对象编程的书籍中阅读有关此主题的更多信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-09T19:17:00.533

似乎所有数据都在一个`private`属性中。您不能直接从外部访问它。

**阅读该课程的文档。**它应该有一些你可以调用的方法，比如`getQuantity()`，它会为你获取数据。这取决于类是如何编写的以及它应该如何使用。

# mysql - 如何在不弄乱查询的情况下连接两个表

> ID：12342118
> 
> 赞同：0
> 
> 时间：2012-09-09T19:13:19.333
> 
> 标签：mysql, sql

例如，我有这个查询（很好，它可以按我的意愿工作）

```
SELECT  `discusComments`.`memberID`, COUNT( `discusComments`.`memberID`) AS postcount 
FROM `discusComments`
GROUP BY  `discusComments`.`memberID` ORDER BY postcount DESC 
```

示例结果：

```
memberid    postcount
3             283
6             230
9             198 
```

现在我想将 discusComments 表的 memberid 与 discusTopic 表的 memberid 连接起来（因为我真正想做的只是从特定的 GROUP 中获取我的结果，而 group id 只在主题表中而不在评论中一个因此加入。

```
SELECT  `discusComments`.`memberID`, COUNT( `discusComments`.`memberID`) AS postcount 
FROM `discusComments`
LEFT JOIN `discusTopics` ON `discusComments`.`memberID` =  `discusTopics`.`memberID`
GROUP BY  `discusComments`.`memberID` ORDER BY postcount DESC 
```

示例结果：

```
memberid    postcount
3             14789
6              8678
9              6987 
```

我怎样才能阻止 postcount 发生这种巨大的增长？我需要像以前一样保存它。

一旦我完成了这个排序，我希望有一些这样的行`WHERE discusTopics.groupID = 6`，例如

```
CREATE TABLE IF NOT EXISTS `discusComments` (
  `id` bigint(255) NOT NULL auto_increment,
  `topicID` bigint(255) NOT NULL,
  `comment` text NOT NULL,
  `timeStamp` bigint(12) NOT NULL,
  `memberID` bigint(255) NOT NULL,
  `thumbsUp` int(15) NOT NULL default '0',
  `thumbsDown` int(15) NOT NULL default '0',
  `status` int(1) NOT NULL default '1',
  PRIMARY KEY  (`id`)
) ENGINE=MyISAM  DEFAULT CHARSET=latin1 AUTO_INCREMENT=7190 ; 
```

.

```
CREATE TABLE IF NOT EXISTS `discusTopics` (
  `id` bigint(255) NOT NULL auto_increment,
  `groupID` bigint(255) NOT NULL,
  `memberID` bigint(255) NOT NULL,
  `name` varchar(255) NOT NULL,
  `views` bigint(255) NOT NULL default '0',
  `lastUpdated` bigint(10) NOT NULL,
  PRIMARY KEY  (`id`),
  KEY `groupID` (`groupID`)
) ENGINE=MyISAM  DEFAULT CHARSET=latin1 AUTO_INCREMENT=913 ; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T20:53:21.027

```
SELECT  `discusComments`.`memberID`, COUNT( `discusComments`.`memberID`) AS postcount 
FROM `discusComments`
JOIN `discusTopics` ON `discusComments`.`topicID` =  `discusTopics`.`id`
GROUP BY  `discusComments`.`memberID` ORDER BY postcount DESC 
```

在两个表中加入 topicid 解决了 memberID 问题。谢谢@Andiry M

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T19:18:58.300

您只需要使用 JOIN 而不是 LEFT JOIN ，您可以在 ON 之后添加 AND discusTopics.memberID = 6 `discusComments`。`memberID`= `discusTopics`。`memberID`

您可以像这样使用子查询

```
SELECT  `discusComments`.`memberID`, COUNT( `discusComments`.`memberID`) AS postcount 
FROM `discusComments` where `discusComments`.`memberID` in 
(select distinct  memberid from `discusTopics` WHERE GROUPID = 6) 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-09T19:20:37.450

如果我理解你的问题，你根本不需要在这里使用 JOIN 。如果您有多对多关系并且需要为一个表中的每个值选择另一个表中的所有对应值，则需要 JOIN。

但是，如果我做对了，您将拥有多对一的关系。然后你可以像这样简单地从两个表中选择

```
SELECT a.*, b.id FROM a, b WHERE a.pid = b.id 
```

这是一个简单的请求，不会像 JOIN 那样产生巨大的开销

PS：将来尝试使用您的查询进行试验，尽量避免 JOIN，尤其是在 MySQL 中。它们的复杂性缓慢而危险。对于 90% 的情况，当您想使用 JOIN 时，有一个简单且更快的解决方案。

# jquery-mobile - jquery-mobile以编程方式导航返回

> ID：12342121
> 
> 赞同：1
> 
> 时间：2012-09-09T19:14:21.730
> 
> 标签：jquery-mobile

我有一个用户可以从应用程序的不同部分到达的页面。同样从这个登陆页面，用户可以导航到另一个页面并返回到这个登陆页面。

使用默认的后退按钮功能会将用户带回该页面。简而言之，当用户第一次到达此页面时，我需要保留 url 而不是`changePageto`这个 url。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-05-22T11:47:15.513

`$.mobile.back()`

它甚至可以处理反向转换。从来源：

```
$.mobile.back = function() {
    var nav = window.navigator;

    // if the setting is on and the navigator object is
    // available use the phonegap navigation capability
    if( this.phonegapNavigationEnabled &&
        nav &&
        nav.app &&
        nav.app.backHistory ){
        nav.app.backHistory();
    } else {
        window.history.back();
    }
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T10:06:36.727

我不确定我是否明白你的意思。也许你应该使用 javascript 和 localStorage 机制。从页面 A 导航到 B 时设置 localStorage("source", "a.html")，然后在页面 B init 上，试试这个链接：

```
window.location.href = ('file:///android_asset/path.../' + localStorage.getItem("source") ); 
```

这应该可以解决问题。

# javascript - 动态加载fancybox并附加它？

> ID：12342122
> 
> 赞同：0
> 
> 时间：2012-09-09T19:14:27.440
> 
> 标签：javascript, jquery, html, fancybox

我正在尝试通过 getScript 动态加载 fancybox，然后将其附加到一个元素。我已经准备好将fancybox动态加载到文档中...

就这样。

```
documents ready -> getScript 
```

但它似乎不想附加到我的 a 标签 ( `.fancybox`) 如果我执行 console.log`jQuery('.fancybox')`我得到一个 [] 但元素已经加载？如果我`jQuery('.fancybox').fancybox();`在谷歌浏览器的控制台中输入它仍然不起作用？

知道我做错了什么吗？

```
jQuery.getScript("/fancybox/jquery.fancybox.pack.js", function() {
      console.log(jQuery(".fancybox"),jQuery("a"));
      return jQuery(".fancybox").fancybox();
    }); 
```

该元素是一个简单的包装图像的标签，它不是动态加载的。

```
<div class="youtube"><a href="http://www.youtube.com/watch?v=1svYgdfgfdf" class="fancybox"><img height="181" src="images/youtube-video.png" width="326"></a></div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T19:42:26.517

准备好文档还为时过早尝试将其包装起来，`$(window).load(function(){//CODE HERE});`因为它只需要在 DOM 加载后运行，这样它就可以将您的 fancybox 应用到您的 DOM 元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T19:47:56.293

试试这个：

```
jQuery.getScript("/fancybox/jquery.fancybox.pack.js", function() {
  jQuery(document).ready(function() {
    jQuery(".fancybox").fancybox();
  });
}); 
```

**编辑：**函数调用已修复

# java - 处理事件：实现接口或使用内部类处理接口。哪个更好

> ID：12342125
> 
> 赞同：6
> 
> 时间：2012-09-09T19:14:56.193
> 
> 标签：java, android, oop

要处理事件，有两种方法：

1.  实现回调接口，例如

    ```
    public class A implements View.OnClickListener {
        public void onClick(View v) {
            ....
        }

        @Override
        protected void onCreate(Bundle savedInstanceState) {
            ...
            aboutLayout = (LinearLayout) findViewById(R.id.aboutLayout);
            aboutLayout.setOnClickListener(this);
        }
    } 
    ```

2.  创建实现回调接口的内部类

    ```
    public class ActivityAbout  {
        private class ViewClickListener implements View.OnClickListener {
            public void onClick(View v) {
                ..
            }
        }

        @Override
        protected void onCreate(Bundle savedInstanceState) {
            ...
            ViewClickListener listener = new ViewClickListener();
            aboutLayout = (LinearLayout) findViewById(R.id.aboutLayout);
            aboutLayout.setOnClickListener(listener);
        }
    } 
    ```

哪一个更好？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-09T19:30:29.367

选择完全取决于您计划使用该类的方式，每种方法都是有效的并且有其相应的优点和缺点：

*   方法 1 可以快速编写代码，但将您限制在一个`onClick()`功能上，这可能会或可能不会成为组织混乱。
*   方法 2 允许您创建多个`onClick()`函数并以更合乎逻辑的方法使用它们。

但我想介绍方法 3，一个匿名回调：

```
public class MyActivity extends Activity {
    OnClickListener myClickListener1 = new OnClickListener() {
        public void onClick(View v) {
            ..
        }
    }

    OnClickListener myClickListener2 = new OnClickListener() {...}

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        ...
        view.setOnClickListener(myClickListener1);
    }
} 
```

请注意，与方法 2 不同，我没有创建自定义类。除非您要添加更多功能、保留局部变量或以其他方式修改 OnClickListener 的基本功能，否则我会避免创建新的自定义类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-09T19:29:18.587

如果代码很长（并且需要组织或方法化），或者如果我打算一遍又一遍地使用相同的代码，我倾向于使用内部类。`Surface`为了清楚起见，甚至我的回调也被组织为内部类。

如果代码简短且易于处理（可能只是事件中的一行），我会使用匿名类。

如果事件与类本身直接相关，我*只会*使用第一个实现，并且永远不需要附加其他侦听器。这是一种非常罕见的情况。（我也将它用于简单的调试，但这在这里无关紧要。）

# c++ - C++、libxslt：释放样式表后释放样式表文档会导致崩溃

> ID：12342128
> 
> 赞同：0
> 
> 时间：2012-09-09T19:15:10.283
> 
> 标签：c++, libxml2, libxslt

我正在使用 libxml2 和 libxslt 从 C++ 程序进行 XML 处理。为了使用 XSL 转换 XML 文档，我使用以下函数（删除了错误处理）：

```
xmlDocPtr
transformXmlDocument(
    const xmlDocPtr inputDocument,
    const std::string& stylesheetString
    ) {

    exsltRegisterAll();

    // Read the stylesheet document.
    xmlDocPtr stylesheetDocument = xmlReadMemory(
            stylesheetString.c_str(),
            stylesheetString.length(),
            "stylesheet.xsd",
            0, // No encoding set - get it from the file header.
            0  // No further options.
    );

    // Parse the stylesheet
    xsltStylesheetPtr stylesheet = xsltParseStylesheetDoc(stylesheetDocument);

    // Transform the document
    xmlDocPtr result = xsltApplyStylesheet(stylesheet, inputDocument, 0);

    // Free used resources
    xsltFreeStylesheet(stylesheet);
    xsltCleanupGlobals();

    // Here the program crashes
    xmlFreeDoc(stylesheetDocument);

    return result;
} 
```

问题是程序在倒数第二行因访问冲突而崩溃（glibc 说：free(): invalid pointer: 0x00000000026d8090 ** ）。*

我在文档中找不到 xsltFreeStylesheet 也释放底层文档或其他东西的任何提示，那么这里有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T19:40:22.980

> *xsltFreeStylesheet 也释放底层文档什么的*

[精美的手册](http://xmlsoft.org/XSLT/html/libxslt-xsltInternals.html#xsltParseStylesheetDoc)有一些提示，表明确实有可能发生这种情况。

# objective-c - nsmutable 数组中的数据并非在所有方法中都可见

> ID：12342129
> 
> 赞同：0
> 
> 时间：2012-09-09T19:15:13.700
> 
> 标签：objective-c, ios, nsmutablearray

我知道这是基本的客观 C 问题，但我有严重的问题。我有一个 NSMutable 数组，我在 connectionDidFinishLoading 中填充了值。我可以在 NSLog 中看到值被正确分配。但是当我试图在 DidSelectRow 中获取这些值时（当我使用表格视图时，我得到一个 BAD_ACESS 错误）

这是我的代码：

```
@implementation MainMap
{

    NSMutableArray *condition ;
}
..
- (void)viewDidLoad
{
    [super viewDidLoad];
}
...
- (void)connectionDidFinishLoading:(NSURLConnection *)connection {
condition= [NSMutableArray array];
..adding objects..
}

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
    //app crashes in here
NSLog(@"Condition of pressed item is %@",[condition objectAtIndex:indexPath.row]);
} 
```

如果我将 `condition= [NSMutableArray array];`ViewDidLoad 放在里面，我会得到一个`SIGBART`.

此外，我尝试将声明放在 .h 文件中并将其作为属性，然后在 .m 中合成它，但仍然没有。也许我错过了一些东西，所以你能解决它吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T19:21:11.893

试试`[NSMutableArray new]`吧`[NSMutableArray array]`。`condition`然后你应该在你的- 方法中释放`dealloc`。

否则，您可以启用 ARC (http://longweekendmobile.com/2011/09/07/objc-automatic-reference-counting-in-xcode-explained/)。使用 ARC，您不能自己处理引用计数。

# java - 返回二叉树中节点的父节点

> ID：12342131
> 
> 赞同：1
> 
> 时间：2012-09-09T19:15:31.713
> 
> 标签：java, algorithm, tree, binary-search-tree

我正在编写一个代码来返回任何节点的父节点，但我被卡住了。我不想使用任何预定义的 ADT。

```
//Assume that nodes are represented by numbers from 1...n where 1=root and even 
//nos.=left child and odd nos=right child.
public int parent(Node node){
    if (node % 2 == 0){
       if (root.left==node)
       return root;
    else
       return parent(root.left);
    }
    //same case for right
} 
```

但是这个程序不起作用并且给出了错误的结果。我的基本算法是程序从`root`检查它是否`left`在`right`. 如果是孩子，或者如果`node`被查询`else`，则与孩子一起递归。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T14:45:33.057

这可以改写为遍历二叉树以找到给定节点的父节点。

假设你有一个

```
class Node {
  int node;
  Node left;
  Node right;

  Node(int node, Node left, Node right) {
    this.node = node;
    this.left = left;
    this.right = right;
  }
  @Override
  public String toString (){
     return "("+node+")";
  }
} 
```

为简单起见，我们将只定义全局变量。

```
Node root;
int target;
boolean found; 
```

它们将通过下一个方法访问。首先，我们初始化一个方法调用

```
public Node findParent(int target){
  found = false;
  this.target = target;
  return internalFindParent(root, null);
} 
```

二、我们写一个实现

```
private Node internalFindParent(Node node, Node parent){
  if (found) return parent;
  if (node.node == target) {
    found = true;
    return parent;
  }
  if (node.left == null) return null;
  Node temp = internalFindParent(node.left, node);
  if(temp != null)
    return temp;
  if (node.right == null) return null;
  temp = internalFindParent(node.right, node);
  if(temp != null)
    return temp;
  return null;
} 
```

如果找到给定的节点，此方法会遍历树并立即返回结果。为了演示它是如何工作的，我们应该创建一个示例树并将其分配给`root`节点。我们用用作目标的唯一编号对每个节点进行计数。

```
public void init() {
  root = new Node (0,
    new Node(1,
      new Node (2,
        new Node (3,
          new Node (4, null, null),
          new Node (5, null, null)
        ),
        new Node (6,
          new Node (7, null, null),
          new Node (8, null, null)
        )
      ),
      new Node (9,
        new Node (10,
          new Node (11, null, null),
          new Node (12, null, null)
        ),
        new Node (13,
          new Node (14, null, null),
          new Node (15, null, null)
        )
      )
     ),
    new Node(21,
      new Node (22,
        new Node (23,
          new Node (24, null, null),
          new Node (25, null, null)
        ),
        new Node (26,
          new Node (27, null, null),
          new Node (28, null, null)
        )
      ),
      new Node (29,
        new Node (30,
          new Node (31, null, null),
          new Node (32, null, null)
        ),
        new Node (33,
          new Node (34, null, null),
          new Node (35, null, null)
        )
      )
    )
  );
} 
```

为简单起见，只需在构造函数中进行所有测试

```
FindingParent(){
  init();
  for (int i=0; i<=35; i++){
    Node parent = findParent(i);
    if (parent != null)
      System.out.println("("+parent.node+", "+i+")");
  }

}
/**
 * @param args
 */
public static void main(String[] args) {
  new FindingParent();
  System.exit(0);
} 
```

此输出结果为树中每个节点的（父、子）对。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-22T07:54:39.293

试试这个。它可能有效：

```
public BinaryTreeNode getParent(BinaryTreeNode root, BinaryTreeNode node) {

    BinaryTreeNode lh = null, rh = null;
    if (null == root)
        return null;

    if (root.getLeft() == node || root.getRight() == node)
        return root;

    lh = getParent(root.getLeft(), node);
    rh = getParent(root.getRight(), node);

    return lh != null ? lh : rh;

} 
```

# c - pthread_cond_broadcast 被 dlsym 破坏？

> ID：12342133
> 
> 赞同：6
> 
> 时间：2012-09-09T19:16:00.243
> 
> 标签：c, pthreads, segmentation-fault, glibc, dlsym

我正在尝试使用 LD_PRELOAD 机制插入对 pthread_cond_broadcast 的调用。我插入的 pthread_cond_broadcast 函数只是调用了原始的 pthread_cond_broadcast。但是，对于一个同时调用 pthread_cond_wait 和 pthread_cond_broadcast 的非常简单的 pthread 代码，我要么在 glibc 中出现段错误（对于 glibc 2.11.1），要么程序挂起（对于 glibc 2.15）。有什么线索吗？

插入代码（编译为共享库）：

```
#define _GNU_SOURCE
#include <stdio.h>
#include <stdlib.h>
#include <pthread.h>
#include <dlfcn.h>

static int (*orig_pthread_cond_broadcast)(pthread_cond_t *cond) = NULL;

__attribute__((constructor))
static void start() {
    orig_pthread_cond_broadcast =
        (int (*)()) dlsym(RTLD_NEXT, "pthread_cond_broadcast");
    if (orig_pthread_cond_broadcast == NULL) {
        printf("pthread_cond_broadcast not found!!!\n");
        exit(1);
    }
}

__attribute__((__visibility__("default")))
int pthread_cond_broadcast(pthread_cond_t *cond) {
    return orig_pthread_cond_broadcast(cond);
} 
```

简单的 pthread 程序：

```
#include <stdio.h>
#include <pthread.h>
#include <unistd.h>

pthread_mutex_t cond_mutex;
pthread_cond_t cond_var;
int condition;

void *thread0_work(void *arg) {
    pthread_mutex_lock(&cond_mutex);
    printf("Signal\n");
    condition = 1;
    pthread_cond_broadcast(&cond_var);
    pthread_mutex_unlock(&cond_mutex);
    return NULL;
}

void *thread1_work(void *arg) {
    pthread_mutex_lock(&cond_mutex);
    while (condition == 0) {
        printf("Wait\n");
        pthread_cond_wait(&cond_var, &cond_mutex);
        printf("Done waiting\n");
    }
    pthread_mutex_unlock(&cond_mutex);
    return NULL;
}

int main() {
    pthread_t thread1;

    pthread_mutex_init(&cond_mutex, NULL);
    pthread_cond_init(&cond_var, NULL);

    pthread_create(&thread1, NULL, thread1_work, NULL);

    // Slowdown this thread, so the thread 1 does pthread_cond_wait.
    usleep(1000);

    thread0_work(NULL);

    pthread_join(thread1, NULL);

    return 0;
} 
```

编辑：

对于 glibc 2.11.1，gdb bt 给出：

```
(gdb) set environment LD_PRELOAD=./libintercept.so
(gdb) run
Starting program: /home/seguljac/intercept/main 
[Thread debugging using libthread_db enabled]
[New Thread 0x7ffff7436700 (LWP 19165)]
Wait
Signal
Before pthread_cond_broadcast

Program received signal SIGSEGV, Segmentation fault.
0x00007ffff79ca0e7 in pthread_cond_broadcast@@GLIBC_2.3.2 () from /lib/libpthread.so.0
(gdb) bt
#0  0x00007ffff79ca0e7 in pthread_cond_broadcast@@GLIBC_2.3.2 () from /lib/libpthread.so.0
#1  0x00007ffff7bdb769 in pthread_cond_broadcast () from ./libintercept.so
#2  0x00000000004008e8 in thread0_work ()
#3  0x00000000004009a4 in main () 
```

编辑2：

（已解决）正如 R.. 所建议的那样（谢谢！），问题是在我的平台上 pthread_cond_broadcast 是一个版本符号，而 dlsym 给出了错误的版本。这个博客非常详细地解释了这种情况：http: [//blog.fesnel.com/blog/2009/08/25/preloading-with-multiple-symbol-versions/](http://blog.fesnel.com/blog/2009/08/25/preloading-with-multiple-symbol-versions/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T18:48:14.563

通过您的函数进行的调用似乎最终以不同版本的函数结束：

```
With LD_PRELOAD:    __pthread_cond_broadcast_2_0 (cond=0x804a060) at old_pthread_cond_broadcast.c:37
Without LD_PRELOAD: pthread_cond_broadcast@@GLIBC_2.3.2 () at ../nptl/sysdeps/unix/sysv/linux/i386/i686/../i486/pthread_cond_broadcast.S:39 
```

所以你的情况类似于这个问题，即你得到不兼容的 pthread 函数版本：[符号版本控制和 dlsym](https://stackoverflow.com/questions/5587718/symbol-versioning-and-dlsym)

这个页面提供了一种解决问题的方法，虽然有点复杂：[http ://blog.fesnel.com/blog/2009/08/25/preloading-with-multiple-symbol-versions/](http://blog.fesnel.com/blog/2009/08/25/preloading-with-multiple-symbol-versions/)

# django - 在 django 中创建结果页面

> ID：12342137
> 
> 赞同：0
> 
> 时间：2012-09-09T19:16:17.023
> 
> 标签：django, forms

我正在创建我的第一个 Web 应用程序，并试图了解如何编写一个显示提交表单结果的页面，并希望获得有关如何执行此操作的一些指导。

我写了一个有效的表格。该表单运行一些将结果输出到数据库的 api。我想在结果页面中显示数据库中的值。数据库有一个表，其中包含一个在提交表单时创建的测试 ID。我可以通过执行从数据库中获取 ID

```
select max(id) from test 
```

因此，如果我是用户并提交了表单，我希望被定向到该 ID 的结果页面。假设测试 ID 为 10，则 url 应为 http:///results/id，其中 id 是 select max(id) from test 返回的值。我考虑过使用隐藏字段来获取表单中的 ID，这样我就可以使用它来创建 url。有没有人对如何做到这一点有任何想法。

谢谢 - Vioilly

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T13:39:54.933

运行诸如从数据库获取最大 ID 之类的东西相当糟糕。如果其他人在您之后发布表单并且您获得该 ID 为最大值怎么办？

而是做类似的事情（在模型形式的情况下）

```
if form.is_valid():
  o = form.save()
  return HttpResponseRedirect('results/'+str(o.id)+'/') 
```

艾伦

# android - 通过 Android 应用程序创建 Excel 时出错

> ID：12342142
> 
> 赞同：0
> 
> 时间：2012-09-09T19:16:55.517
> 
> 标签：android, excel, jxl

我正在使用 jxl 包创建一个 excel 文件并通过我的 android 应用程序将其导出到 SD 卡。我已将 jxl.jar 添加到我在 eclipse 中的应用程序包中的引用库中。

但是当我运行应用程序时，它仍然被强制关闭，并且我在 logcat 中收到以下错误

09-10 00:10:31.242: E/dalvikvm(321): 找不到类“jxl.WorkbookSettings”，引用自方法 h.pkg.main.ExportActivity$2.onClick

请参阅下面我的代码以供参考..

```
 export.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View arg0) {
            // TODO Auto-generated method stub
            String Fnamexls="Report-" + tname + ".xls";
            String Fnamehtml="Report-" + tname + ".htm";
            File sdCard = Environment.getExternalStorageDirectory();
            File directory = new File (sdCard.getAbsolutePath() + "/TripManager");
            directory.mkdirs();

            if (fityp == 0){
                File file = new File(directory, Fnamexls); 

                WorkbookSettings wbSettings = new WorkbookSettings();

                wbSettings.setLocale(new Locale("en", "EN"));

                WritableWorkbook workbook;
                try {
                    workbook = Workbook.createWorkbook(file, wbSettings);
                    workbook.createSheet("Report", 0);
                    WritableSheet excelSheet = workbook.getSheet(0);
                    createExcel(excelSheet);
                } catch (IOException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                } catch (WriteException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
            } 
```

在上面的代码中创建 WorkbookSettings 对象 wbSettings 时出现找不到类错误。请让我知道如何解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T19:22:11.060

转到项目属性（右键单击项目 -> `Properties`，假设您在 Eclipse 中），转到`Java Build Path`，然后转到`Order and Export`选项卡。确保选中旁边的`jxl.jar` *复选框*。

# php - Curl 返回 400 错误请求（带有空格的 URL）

> ID：12342149
> 
> 赞同：6
> 
> 时间：2012-09-09T19:17:34.317
> 
> 标签：php, curl

当我使用 curl 库并尝试从 url 获取图像时，我收到 400 bad request 错误。我发现这个问题与编码网址有关。但在我的情况下，它不起作用，因为我的网址 - 它是服务器端图像的路径 - 就像

```
http://example.com/images/products/product 1.jpg 
```

我知道名称文件中的用户空间是不好的做法，但它不是我的服务器，也不是我创建的那些文件。

```
$ch = curl_init();
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_URL, urlencode($url));
echo $ret = curl_exec($ch); 
```

当我使用 urlencode 函数时 - curl 返回 http_code = 0

**更新**

```
$url = str_replace(' ', '+', $url); 
```

**不起作用，服务器返回 404 错误。**

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-09-09T19:30:03.547

这可能有用吗？

```
$url = 'http://host/a b.img';
$url = str_replace(" ", '%20', $url);

$ch = curl_init();
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_URL, $url);
echo $ret = curl_exec($ch); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-01-20T19:43:51.313

您需要使用[rawurlencode()](http://php.net/rawurlencode)函数：

```
$ch = curl_init();
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_URL, rawurlencode($url));
echo $ret = curl_exec($ch); 
```

[rawurlencode()](http://php.net/rawurlencode)必须始终是首选。[urlencode()](http://php.net/urlencode)仅保留用于遗留使用。有关更多详细信息，请查看[此 SO 答案](https://stackoverflow.com/a/996161/2648942)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-09T19:21:26.923

您不能对整个字符串进行 urlencode，因为这将对斜杠和您需要保持未编码的其他内容进行编码。如果空格是您唯一的问题，则可以这样做：

```
str_replace(' ', '+', $url); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-01-20T11:50:51.517

使用 curl 比其他方式面临更多挑战。只需使用 shell_exec

```
$cmd = "curl -k -v -X POST 'https://serveraddress:8243/?foo=bar' -H 'Authorization: Basic cEZ.....h'";

$result = shell_exec($cmd);         
$output =  json_decode($result,true);
print_r($output); 
```

# shell - Shell 脚本中的地图支持

> ID：12342150
> 
> 赞同：0
> 
> 时间：2012-09-09T19:17:48.233
> 
> 标签：shell, map

我是新来的`Shell Scripting`，但是我很友好`Java Maps`。我只是想知道我如何`Map`在`Shell Scripting`. 以下是我需要在 shell 中使用的设施-

```
 HashMap<String, ArrayList<String>> users = new HashMap<String, ArrayList<String>>();

    String username = "test_user1";
    String address = "test_user1_address";
    String emailId = "test_user1_emailId";

    ArrayList<String> values = new ArrayList<String>();
    values.add(address);
    values.add(emailId);

    users.put(username, values);

    String anotherUser = "test_user2";

    if (users.containsKey(anotherUser)) {
        System.out.println("Do some stuff here");
    } 
```

简而言之，我想使用 a `Map`，它具有`String`as `key`，`Vector`或者`ArrayList`as 值（否则我已经使用`Arrays`而不是`ArrayList`手动处理`indexes`），`put`方法`insert`和另一种方法来检查`key`现有`Map`.

上面的代码是一个示例代码。先感谢您。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-09T19:19:56.000

bash 不支持这样的嵌套结构。为每个数组使用单独的变量，或者使用功能更强大的东西，例如 Python。

# java - JGit 和寻找头部

> ID：12342152
> 
> 赞同：28
> 
> 时间：2012-09-09T19:18:18.427
> 
> 标签：java, git, scala, jgit

我正在尝试使用 JGit 进行 HEAD 提交：

```
val builder = new FileRepositoryBuilder()
val repo = builder.setGitDir(new File("/www/test-repo"))
  .readEnvironment()
  .findGitDir()
  .build()

val walk: RevWalk = new RevWalk(repo, 100)

val head: ObjectId = repo.resolve(Constants.HEAD)
val headCommit: RevCommit = walk.parseCommit(head) 
```

我发现它可以很好地打开 repo，但`head`值设置为`null`. 我想知道为什么它找不到HEAD？

我正在阅读这份文档：[http ://wiki.eclipse.org/JGit/User_Guide](http://wiki.eclipse.org/JGit/User_Guide)

存储库的构建就像文档所说的`RevWalk`那样，也是如此。我正在使用`2.0.0.201206130900-r`来自[http://download.eclipse.org/jgit/maven](http://download.eclipse.org/jgit/maven)的最新版本的 JGit 。

我的问题：我需要在我的代码中进行哪些更改才能让 JGit 返回实际实例，`RevCommit`而不是`null`像现在这样？

**更新：**此代码：

```
val git = new Git(repo)
val logs: Iterable[RevCommit] = git.log().call().asInstanceOf[Iterable[RevCommit]] 
```

给了我这个例外：`No HEAD exists and no explicit starting revision was specified`

例外很奇怪，因为一个简单的`git rev-parse HEAD`告诉我`0b0e8bf2cae9201f30833d93cc248986276a4d75`，这意味着存储库中有一个 HEAD。我尝试了不同的存储库，我的和其他人的。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-09-09T21:57:54.373

调用时需要指向 Git 元数据目录（可能`/www/test-repo/.git`）`setGitDir`，而不是工作目录（`/www/test-repo`）。

我不得不承认我不确定`findGitDir`应该做什么，但我之前遇到过这个问题并且指定`.git`目录有效。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-10-13T13:57:16.370

为了完整起见，这是一个完整的示例，如何获取 HEAD 提交的哈希：

```
public String getHeadName(Repository repo) {
  String result = null;
  try {
    ObjectId id = repo.resolve(Constants.HEAD);
    result = id.getName();
  } catch (IOException e) {
    e.printStackTrace();
  }
  return result;
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-10-02T14:02:05.847

对我来说（使用 4.5.0.201609210915-r），解决方案是`RepositoryBuilder`使用`FileRepositoryBuilder`. 在我进行此更改之前，所有方法都在返回`null`。

```
rb = new org.eclipse.jgit.lib.RepositoryBuilder()
    .readEnvironment()
    .findGitDir()
    .build();

headRef = rb.getRef(rb.getFullBranch());
headHash = headRef.getObjectId().name(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-07-10T21:13:29.810

您也可以使用`val git: Git = Git.open( new File( "/www/test-repo" ) )`. 然后 JGit 将扫描给定文件夹中的 git 元目录（通常是`.git`）。如果找不到此文件夹，`IOException`则会抛出 an 。

# ios - 在 iOS 应用程序中以编程方式注销

> ID：12342159
> 
> 赞同：0
> 
> 时间：2012-09-09T19:19:02.137
> 
> 标签：ios, ipad, login, uiviewcontroller, logout

我的 iOS 应用程序包含登录页面。进入应用程序后，有一个注销按钮。当用户以编程方式按下注销按钮时，我想再次显示登录页面，就好像用户第一次登录一样。您能否建议我如何在我的 iPad 应用程序中实现这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T14:02:06.277

我在我的应用程序中执行此操作。我有一个用于登录用户的 tabbarcontroller。当他们注销（或第一次使用）时，我向 appDelegate 发送消息，从窗口中删除标签栏并使登录视图成为根视图。登录后，该视图将被选项卡栏控制器替换。

我什至更进一步。在每次切换时，我都会完全释放所有其他对象，因此我确信当用户看到这些视图中的任何一个时，它都是完全“新鲜的”，并且只对该用户自定义的任何内容使用默认值。

# jquery - 让 Masonry jQuery 加载到 Rails 应用程序中

> ID：12342160
> 
> 赞同：1
> 
> 时间：2012-09-09T19:19:03.523
> 
> 标签：jquery, ruby-on-rails, ruby-on-rails-3, jquery-masonry

第一次玩 JS/jQuery。我无法让 Masonry 参与我的 Rails 项目。该脚本似乎没有加载。我知道我们不必加载 jQuery，因为它是 Rails 默认的。

index.html.erb

```
<script src="/path/to/jquery.masonry.min.js"></script>

<script>
var $container = $('#allreview_container_reviewindex');
$container.imagesLoaded(function(){
  $container.masonry({
    itemSelector : '.eachreview_container_reviewindex',
   // columnWidth : 240
  });
});
</script>

<% if !@reviews.blank? %>
  <div id="allreview_container_reviewindex">
  <% @reviews.each do |review| %>
    <div class="eachreview_container_reviewindex">
       //Image + text
    </div>            
  <% end %>
  </div>
<% end %> 
```

宝石文件

```
gem 'jquery-rails' 
```

资产/javascripts/jquery.masonry.min.js

```
//I copied the source from http://masonry.desandro.com/ 
```

**知道我在哪里搞砸了吗？**

**编辑：我检查以确保 jquery.masonry.min.js 正在通过资产管道加载 - 它正在加载但脚本无法为我提供 Pinterest 布局。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T20:23:35.483

让它工作。不得不像这样封闭脚本：

```
$(function () {
  var $container = $('#allreview_container_reviewindex');
    $container.imagesLoaded(function(){
      $container.masonry({
       itemSelector : '.eachreview_container_reviewindex',
       //columnWidth : 240
    });
  });
}); 
```

# google-apps-script - 使用脚本的带有命名范围谷歌电子表格的getRange

> ID：12342164
> 
> 赞同：20
> 
> 时间：2012-09-09T19:19:31.227
> 
> 标签：google-apps-script, google-sheets, named-ranges

可以`getRange`使用命名范围而不是区域吗？
当我似乎这样做时，它说参数必须是一个范围。例如，

代替：

```
 getRange("A4:E7"); 
```

的区域`A4:E7`已在 sheet1 中制成名为“名称”的命名范围。

你可以使用：

```
var tableRange = SpreadsheetApp.getActiveSpreadsheet();.getRangeByName("Names");
getRange(tableRange); 
```

或者有没有其他方法可以做到这一点。完整的代码是：

```
function onEdit(event){
    var ss = SpreadsheetApp.getActiveSpreadsheet();
    var editedCell = ss.getActiveCell();

    var columnToSortBy = 1;
    var tableRange = ss.getRangeByName("Names");

    if(editedCell.getColumn() == columnToSortBy){ 
        var range = ss.getRange(tableRange); 
        range.sort( { column : columnToSortBy } );
    }
} 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-09-28T04:28:31.057

[https://developers.google.com/apps-script/reference/spreadsheet/spreadsheet#getrangebynamename](https://developers.google.com/apps-script/reference/spreadsheet/spreadsheet#getrangebynamename)

自定义函数返回命名范围的 A1 地址：

```
function myGetRangeByName(n) {  // just a wrapper
  return SpreadsheetApp.getActiveSpreadsheet().getRangeByName(n).getA1Notation();
} 
```

然后，在电子表格的一个单元格中：

```
=myGetRangeByName("Names") 
```

这会将任何“名称”定义为单元格。由于 GAS 的积极缓存，它不会在您重新定义“名称”时更新。但是，您可以强制 GAS 在每次工作表计算时更新它。

```
=myGetRangeByName("Names",now()) 
```

javascript 将忽略未使用的参数。

以下代码执行我认为您想要的。编辑工作表的第一列时，它会根据该列对范围进行排序。

```
function onEdit(e) {
  var ss = SpreadsheetApp.getActiveSpreadsheet();
  var editedCell = ss.getActiveCell();
  var columnToSortBy = 1;
  var tableRange = ss.getRangeByName("Names");
  if ( editedCell.getColumn() == columnToSortBy ) {
    tableRange.sort(columnToSortBy);
  }
} 
```

如果您将列表从 A 列移开，这将不起作用，因为`getColumn()`返回的是绝对列，而不是范围内单元格的位置。您将不得不添加代码来进行调整。

# youtrack - YouTrack 中的泳道概念是什么？

> ID：12342176
> 
> 赞同：9
> 
> 时间：2012-09-09T19:20:54.507
> 
> 标签：youtrack

YouTrack (JetBrains) 中泳道的意义/目的是什么？这只是一个概念，您可以将几个正常的任务组合在一起，最终形成一个大目标吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-09T19:55:39.383

是的，这看起来正是它们的用途。

[http://www.jetbrains.com/youtrack/features/agile_project_management.html](http://www.jetbrains.com/youtrack/features/agile_project_management.html)

# java - 尝试在 Android 上扩展和使用 Activity 时出错

> ID：12342178
> 
> 赞同：2
> 
> 时间：2012-09-09T19:21:09.407
> 
> 标签：java, android, android-intent, android-activity

我正在尝试使用一个`Activity`在 Android 设备上启用蓝牙。以下是我扩展`Activity`课程的课程。调用该方法时收到`NullPointerException`错误消息。`startActivityForResult()`有什么建议么？谢谢！

```
public class Activities extends Activity{
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
    }
    protected void connectBluetooth(){
        Intent intentBluetooth = new Intent(BluetoothAdapter.ACTION_REQUEST_ENABLE);

        startActivityForResult(intentBluetooth, 0); 
    }
} 
```

日志输出如下：

```
?:??: W/?(?): [ 09-09 18:08:38.497 15231:15246 W/System.err ]
?:??: W/?(?): java.lang.NullPointerException
?:??: W/?(?): [ 09-09 18:08:38.497 15231:15246 W/System.err ]
?:??: W/?(?):   at android.app.Activity.startActivityForResult(Activity.java:3351)
?:??: W/?(?): [ 09-09 18:08:38.497 15231:15246 W/System.err ]
?:??: W/?(?):   at android.app.Activity.startActivityForResult(Activity.java:3312)
?:??: W/?(?): [ 09-09 18:08:38.497 15231:15246 W/System.err ]
?:??: W/?(?):   at com.eyesore.bluetooth.Activities.connectBluetooth(Activities.java:28)
?:??: W/?(?): [ 09-09 18:08:38.497 15231:15246 W/System.err ]
?:??: W/?(?):   at com.eyesore.bluetooth.BluetoothModule.example(BluetoothModule.java:77)
?:??: W/?(?): [ 09-09 18:08:38.497 15231:15246 W/System.err ]
?:??: W/?(?):   at org.appcelerator.kroll.runtime.v8.V8Object.nativeFireEvent(Native Method)
?:??: W/?(?): [ 09-09 18:08:38.497 15231:15246 W/System.err ]
?:??: W/?(?):   at org.appcelerator.kroll.runtime.v8.V8Object.fireEvent(V8Object.java:60)
?:??: W/?(?): [ 09-09 18:08:38.497 15231:15246 W/System.err ]
?:??: W/?(?):   at org.appcelerator.kroll.KrollProxy.doFireEvent(KrollProxy.java:636)
?:??: W/?(?): [ 09-09 18:08:38.497 15231:15246 W/System.err ]
?:??: W/?(?):   at org.appcelerator.kroll.KrollProxy.handleMessage(KrollProxy.java:831)
?:??: W/?(?): [ 09-09 18:08:38.497 15231:15246 W/System.err ]
?:??: W/?(?):   at org.appcelerator.titanium.proxy.TiViewProxy.handleMessage(TiViewProxy.java:307)
?:??: W/?(?): [ 09-09 18:08:38.497 15231:15246 W/System.err ]
?:??: W/?(?):   at android.os.Handler.dispatchMessage(Handler.java:95)
?:??: W/?(?): [ 09-09 18:08:38.497 15231:15246 W/System.err ]
?:??: W/?(?):   at android.os.Looper.loop(Looper.java:137)
?:??: W/?(?): [ 09-09 18:08:38.497 15231:15246 W/System.err ]
?:??: W/?(?):   at org.appcelerator.kroll.KrollRuntime$KrollRuntimeThread.run(KrollRuntime.java:104)
?:??: W/?(?): [ 09-09 18:08:38.497 15231:15231 E/TiJSError ]
?:??: W/?(?): (main) [6,293329] ----- Titanium Javascript Runtime Error -----
?:??: W/?(?): [ 09-09 18:08:38.497 15231:15231 E/TiJSError ]
?:??: W/?(?): (main) [0,293329] - In app.js:71,12
?:??: W/?(?): [ 09-09 18:08:38.497 15231:15231 E/TiJSError ]
?:??: W/?(?): (main) [0,293329] - Message: Uncaught Error: Java Exception occurred
?:??: W/?(?): [ 09-09 18:08:38.497 15231:15231 E/TiJSError ]
?:??: W/?(?): (main) [0,293329] - Source:   bluetooth.example();
?:??: W/?(?): [ 09-09 18:08:38.517 15231:15246 E/V8Exception ]
?:??: W/?(?): Exception occurred at app.js:71: Uncaught Error: Java Exception occurred 
```

下面的清单文件 -

```
<manifest>
    <uses-permission android:name="android.permission.BLUETOOTH_ADMIN"/>
    <uses-permission android:name="android.permission.BLUETOOTH"/>
    <uses-permission android:name="android.bluetooth.adapter.action.REQUEST_ENABLE"/>
        <application>
            <activity android:name=".Activities" android:label="@string/app_name">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER"/>
            </intent-filter>
        </activity>
    </application>            
</manifest> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T19:46:35.687

根据 OP 中的评论，您没有`Activity`正确启动。你**永远不**应该开始`Activity`使用`new`.

首先，你`Activites`应该看起来像这样，`connectBluetooth()`自己调用。

```
public class Activities extends Activity{
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        connectBluetooth();
    }
    protected void connectBluetooth(){
        Intent intentBluetooth = new Intent(BluetoothAdapter.ACTION_REQUEST_ENABLE);

        startActivityForResult(intentBluetooth, 0); 
    }
} 
```

当 Android 应用程序启动时，它会运行 main `Activity`，它[在 manifest 中定义](https://stackoverflow.com/questions/3631982/change-applications-starting-activity-android)。**如果`Activities`是您的 main`Activity`**，则不需要进一步的代码。

但是，我有预感，这是第二个`Activity`，它是从其他地方开始的。所以假设你有这个：

```
public class MainActivity extends Activity{
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        Activities testActivities = new Activities(); // This is bad!
        testActivities.connectBluetooth(); // This too!
    }
} 
```

你应该做的是：

```
public class MainActivity extends Activity{
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        startActivity(new Intent(this, Activities.class)); // Starts an Activity properly
    }
} 
```

这将启动您的`Activity`, 呼叫`onCreate`并正确创建您的蓝牙连接。您应该阅读有关生命周期的[文档](http://developer.android.com/training/basics/activity-lifecycle/starting.html)`Activity`。

# c++ - 如何使用在 C++ 标头中声明的变量和函数

> ID：12342184
> 
> 赞同：1
> 
> 时间：2012-09-09T19:21:39.187
> 
> 标签：c++, header

首先，这可能很混乱，因为我对一般编程很陌生。
好吧，我正在制作一个 rpg 游戏，我希望我所有的武器都放在一个名为 Weapons.cpp 的文件中。
我这样做是为了在名为 common.h 的头文件中获取所有全局变量，例如“weaponDamage”和“weaponName”，这样我就可以从我的主文件和 .cpp 文件中访问和操作这些变量。但问题是它似乎无法在我的标题中找到这些变量和函数。

这是一些代码：

**常见的.h：**

```
#include <string>  
#ifndef COMMON_H_INCLUDED  
#define COMMON_H_INCLUDED  

//global variables  
extern int pureDamage = 0;  
extern int pureHealth = 0;  
extern int weaponDamage;  
extern int armorDefense;  
extern int totalDamage = pureDamage + weaponDamage;  
extern int totalHealth = pureHealth + armorDefense;  
extern int totalLuck;  
extern string starsign;  
extern string weaponName;  

//all weapons  

void weaponSwordIron();  
void weaponSwordGold();  
void weaponSwordSwordOfTheHeavens();  
void weaponBowSimple();  
void weaponBowLongBow();  
void weaponBowThunder();  
void weaponStaffStaffOfFlames();  
void weaponStaffStaffOfLightning();  
void weaponStaffStaffOfAssKicking();  

#endif // COMMON_H_INCLUDED 
```

**武器.cpp：**

```
#include <iostream>  
#include <string>  
#include <common.h>  

using namespace std;

void weaponSwordIron()
{
    int weaponDamage = 5;
    string weaponName = "Iron Sword";
}
void weaponSwordGold()
{
    int weaponDamage = 8;
    string weaponName = "Gold Sword";
}
void weaponSwordSwordOfTheHeavens()
{
    int weaponDamage = 15;
    string weaponName = "Sword Of The Heavens";
}
void weaponBowSimple()
{
    int weaponDamage = 5;
    string weaponName = "Simple Bow";
}
void weaponBowLongBow()
{
    int weaponDamage = 8;
    string weaponName = "Long Bow";
}
void weaponBowThunder()
{
    int weaponDamage = 15;
    string weaponName = "Thunder Bow";
}
void weaponStaffStaffOfFlames()
{
    int weaponDamage = 5;
    string weaponName = "Staff Of Flames";
}
void weaponStaffStaffOfLightning()
{
    int weaponDamage = 8;
    string weaponName = "Staff Of Lightning";
}
void weaponStaffStaffOfAssKicking()
{
    int weaponDamage = 15;
    string weaponName = "Staff Of Ass Kicking";
} 
```

和我的主要功能的一小部分，该功能称为`GiveWeapon()`：

```
void GiveWeapon()
{

    system("cls");
    if (starsign == "mage")
    {
        weaponSwordIron();
        cout << weaponDamage;
        cout << weaponName;
    }
    else if (starsign == "warrior")
    {
        weaponBowSimple();
    }
    else if (starsign == "archer")
    {
        weaponStaffStaffOfFlames();
    }
    else
    {
        ChooseStarsign();
    }
    AssignAttributes();
} 
```

是的，我确实记得包含 common.h
现在我的 IDE`Code::Blocks`出现的错误是：error: common.h: no such file or directory
我不知道为什么会出现这种情况，所以请帮忙。

抱歉发了这么长的帖子，并在此先感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T19:24:13.990

使用`"common.h"`而不是`<common.h>`. 有角度的用于库文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T06:01:47.313

你的“common.h”放在哪里？您必须从带有“Weapons.cpp”的文件夹中指定它们的相对路径。

其次，您在函数中定义局部变量。您的 Weapons.cpp 文件必须如下所示：

```
#include <iostream>
#include <string>
#include "relative/path/to/common.h"

//global variables
int pureDamage = 0;
int pureHealth = 0;
int weaponDamage;
int armorDefense;
int totalDamage = pureDamage + weaponDamage;
int totalHealth = pureHealth + armorDefense;
int totalLuck;
string starsign;
string weaponName;

using namespace std;

void weaponSwordIron()
{
    weaponDamage = 5;
    weaponName = "Iron Sword";
}
void weaponSwordGold()
{
    weaponDamage = 8;
    weaponName = "Gold Sword";
}
... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-09T19:23:25.317

`"common.h"`你不应该使用`< common.h>`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-09T19:32:55.793

weopens.cpp 大多是无意义的。

我尝试编译以下内容：

```
void a() {
 int b = 5; }

int main()
{
 a();
 return 0;
} 
```

而 g++ 不喜欢这个主意。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-01-29T00:09:15.777

除了其他人提到的标头位置问题和局部变量阴影之外，我认为您还会遇到多个定义错误的问题：

```
extern int pureDamage = 0; 
```

此声明上的初始化程序会覆盖`extern`，因此此变量不仅会被声明，而且会在包含此标头的任何编译单元中定义。您的链接器会抱怨。

当您真的想在多个文件中使用全局变量时，您需要在源文件中定义和初始化变量*一次*，并在头文件中声明它`extern`（没有初始化程序）。`const`然而，变量是一个例外。

# c++ - 谷歌如何检查拼写错误？

> ID：12342185
> 
> 赞同：3
> 
> 时间：2012-09-09T19:21:40.823
> 
> 标签：c++, c, algorithm, data-structures, time-complexity

> **可能重复：**
> [您如何实现“您的意思是”？](https://stackoverflow.com/questions/41424/how-do-you-implement-a-did-you-mean)
> [谷歌“你的意思是什么？” 算法工作？](https://stackoverflow.com/questions/307291/how-does-the-google-did-you-mean-algorithm-work)

谷歌非常快速准确地进行拼写更正，但是如何，我无法理解他们的想法。我尝试关注研究[论文](http://static.googleusercontent.com/external_content/untrusted_dlcp/research.google.com/en/us/pubs/archive/36180.pdf)，也关注了另一个[链接](http://norvig.com/spell-correct.html)，但未能理解。

谁能给我一个基本的了解谷歌如何在没有字典的情况下使用错误和语言模型来做到这一点？

或者如果可以给我任何其他有用的链接。

# javascript - 打开抽屉的Javascript打印命令

> ID：12342186
> 
> 赞同：0
> 
> 时间：2012-09-09T19:22:03.800
> 
> 标签：javascript, php, printing

我正在使用使用 PHP 和 MySQL 的 localhost (windows 7) 销售点，我现在需要做的就是在单击“现金按钮”后打开抽屉。我拥有 V-tech Cash Drawer USB 接口 (Prolific USB-to-Serial Comm Port (COM3)) - 如设备管理器所示。根据其手册，打开此抽屉的唯一方法是创建打印机并将其设置为默认值并选择 COM3。我已经创建了一个，我通过 Google Chrome 使用此代码作为我的浏览器访问 POS 对其进行了测试

```
<button onclick="window.print()">Print Test</button> 
```

它会打开一个打印视图页面，然后我单击打印...它会打开钱箱！但是单击相同的“打印测试”按钮，它将排队，因为第一个打印没有从打印作业状态中清除。

我找到了可能的解决方案，但我没有尝试过测试[如何取消打印或删除打印作业](http://support.microsoft.com/kb/946737)-**方法 D**

另外，我将如何禁用 Google chrome 打印视图，或者是否有可能在单击“现金按钮”后直接打印。我注意到 PHP printer_open 如下：

```
 <?php
$handle = printer_open("Xerox Phaser 6120 PS");
$handle = printer_open();
?> 
```

我收到此错误**致命错误：在第 2 行的 C:\xampp\htdocs\frame\print.php 中调用未定义函数 printer_open()**

有没有可能的方法呢？谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T17:19:10.137

您可以在启动 chrome 时在命令行中使用 --disable-print-preview 。 [http://techlogon.com/2012/03/29/how-to-disable-print-preview-in-chrome/](http://techlogon.com/2012/03/29/how-to-disable-print-preview-in-chrome/) 似乎不适用于原始打印，即使用 zpl 命令到斑马打印机。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-16T03:28:53.893

这可以在 FireFox 中轻松完成。转到 about:config，使用“printer”过滤。

找到“print.always_print_silent”并设置为 true。

现在从 FireFox 打印的任何内容都直接使用默认打印机跳过打印机选择对话框。

请记住，PHP 只发生在服务器上，因此与 Javascript 相比，它更远离运行浏览器的硬件。

# php - 如何在 ZF2 中创建表单输入/元素

> ID：12342189
> 
> 赞同：11
> 
> 时间：2012-09-09T19:22:15.800
> 
> 标签：php, doctrine-orm, zend-framework2

编辑：我的主要问题现在变成了“如何以某种干净的方式将带有原则实体管理器的 ServiceManager 交给我的表单、元素和输入类？” 继续阅读以查看完整的帖子。

我将尝试在这里举例提问，所以请耐心等待。让我知道我哪里错/对了，或者哪里可以改进

我正在尝试创建一个注册表单。我可以使用 ZfcUser 模块，但我想自己做。我也将 ZF2 与 Doctrine2 一起使用，这样我就稍微远离了那个模块。

我的策略是这样的，

1.  创建一个名为注册表单的表单类

2.  为每个元素创建单独的“元素”类，其中每个元素都有一个输入规范

3.  由于每个元素都是表单中的一个单独的类，因此我可以单独对每个元素进行单元测试。

一切似乎都很好，直到我想向我的用户名元素添加一个验证器，以检查用户名是否尚未使用。

这是到目前为止的代码

```
namepsace My\Form;

use Zend\Form\Form,
    Zend\Form\Element,
    Zend\InputFilter\Input,
    Zend\InputFilter\InputFilter,

/**
 * Class name : Registration
 */
class Registration
    extends Form
{

    const USERNAME     = 'username';
    const EMAIL        = 'email';
    const PASSWORD     = 'password';
    const PASS_CONFIRM = 'passwordConfirm';
    const GENDER       = 'gender';
    const CAPTCHA      = 'captcha';
    const CSRF         = 'csrf';
    const SUBMIT       = 'submit';

    private $captcha = 'dumb';

    public function prepareForm()
    {
        $this->setName( 'registration' );

        $this->setAttributes( array(
            'method' => 'post'
        ) );

        $this->add( array(
            'name'       => self::USERNAME,
            'type'       => '\My\Form\Element\UsernameElement',
            'attributes' => array(
                'label'     => 'Username',
                'autofocus' => 'autofocus'
            )
            )
        );

        $this->add( array(
            'name'       => self::SUBMIT,
            'type'       => '\Zend\Form\Element\Submit',
            'attributes' => array(
                'value' => 'Submit'
            )
        ) );

    }

} 
```

我删除了很多我认为没有必要的内容。下面是我的用户名元素。

```
namespace My\Form\Registration;

use My\Validator\UsernameNotInUse;
use Zend\Form\Element\Text,
    Zend\InputFilter\InputProviderInterface,
    Zend\Validator\StringLength,
    Zend\Validator\NotEmpty,
    Zend\I18n\Validator\Alnum;

/**
 *
 */
class UsernameElement
    extends Text
    implements InputProviderInterface
{

    private $minLength = 3;
    private $maxLength = 128;

    public function getInputSpecification()
    {
        return array(
            'name'     => $this->getName(),
            'required' => true,
            'filters'  => array(
                array( 'name'       => 'StringTrim' )
            ),
            'validators' =>
            array(
                new NotEmpty(
                    array( 'mesages' =>
                        array(
                            NotEmpty::IS_EMPTY => 'The username you provided is blank.'
                        )
                    )
                ),
                new AlNum( array(
                    'messages' => array( Alnum::STRING_EMPTY => 'The username can only contain letters and numbers.' )
                    )
                ),
                new StringLength(
                    array(
                        'min'      => $this->getMinLength(),
                        'max'      => $this->getMaxLength(),
                        'messages' =>
                        array(
                            StringLength::TOO_LONG  => 'The username is too long. It cannot be longer than ' . $this->getMaxLength() . ' characters.',
                            StringLength::TOO_SHORT => 'The username is too short. It cannot be shorter than ' . $this->getMinLength() . ' characters.',
                            StringLength::INVALID   => 'The username is not valid.. It has to be between ' . $this->getMinLength() . ' and ' . $this->getMaxLength() . ' characters long.',
                        )
                    )
                ),
                array(
                    'name'    => '\My\Validator\UsernameNotInUse',
                    'options' => array(
                        'messages' => array(
                            UsernameNotInUse::ERROR_USERNAME_IN_USE => 'The usarname %value% is already being used by another user.'
                        )
                    )
                )
            )
        );
    }    
} 
```

现在这是我的验证器

```
namespace My\Validator;

use My\Entity\Helper\User as UserHelper,
    My\EntityRepository\User as UserRepository;
use Zend\Validator\AbstractValidator,
    Zend\ServiceManager\ServiceManagerAwareInterface,
    Zend\ServiceManager\ServiceLocatorAwareInterface,
    Zend\ServiceManager\ServiceManager;

/**
 *
 */
class UsernameNotInUse
    extends AbstractValidator
    implements ServiceManagerAwareInterface
{

    const ERROR_USERNAME_IN_USE = 'usernameUsed';

    private $serviceManager;

    /**
     *
     * @var UserHelper
     */
    private $userHelper;
    protected $messageTemplates = array(
        UsernameNotInUse::ERROR_USERNAME_IN_USE => 'The username you specified is being used already.'
    );

    public function isValid( $value )
    {
        $inUse = $this->getUserHelper()->isUsernameInUse( $value );
        if( $inUse )
        {
            $this->error( UsernameNotInUse::ERROR_USERNAME_IN_USE, $value );
        }

        return !$inUse;
    }

    public function setUserHelper( UserHelper $mapper )
    {
        $this->userHelper = $mapper;
        return $this;
    }

    /**
     * @return My\EntityRepository\User
     */
    public function getUserHelper()
    {
        if( $this->userHelper == null )
        {
            $this->setUserHelper( $this->getServiceManager()->get( 'doctrine.entitymanager.orm_default' )->getObjectRepository( 'My\Entity\User') );
        }
        return $this->userHelper;
    }

    public function setServiceManager( ServiceManager $serviceManager )
    {
        echo get_class( $serviceManager );
        echo var_dump( $serviceManager );
        $this->serviceManager = $serviceManager;
        return $this;
    }

    /**
     *
     * @return ServiceManager
     */
    public function getServiceManager( )
    {
        return $this->serviceManager;
    }

} 
```

为什么这对我来说似乎是个好主意？

1.  这似乎是一个很好的可测试性/重用选择，因为如果需要，我可以在我的应用程序中单独重用元素。

2.  我可以对每个元素生成的每个输入进行单元测试，以确保它正确接受/拒绝输入。

这是我对元素的单元测试的示例

```
public function testFactoryCreation()
{
    $fac = new Factory();

    $element = $fac->createElement( array(
        'type' => '\My\Form\Registration\UsernameElement'
        ) );
    /* @var $element \My\Form\Registration\UsernameElement  */

    $this->assertInstanceOf( '\My\Form\Registration\UsernameElement',
                             $element );

    $input      = $fac->getInputFilterFactory()->createInput( $element->getInputSpecification() );
    $validators = $input->getValidatorChain()->getValidators();
    /* @var $validators \Zend\Validator\ValidatorChain */

    $expectedValidators = array(
        'Zend\Validator\StringLength',
        'Zend\Validator\NotEmpty',
        'Zend\I18n\Validator\Alnum',
        'My\Validator\UsernameNotInUse'
    );

    foreach( $validators as $validator )
    {
        $actualClass = get_class( $validator['instance'] );
        $this->assertContains( $actualClass, $expectedValidators );

        switch( $actualClass )
        {
            case 'My\Validator\UsernameNotInUse':
                $helper = $validator['instance']->getUserHelper();
                //HAVING A PROBLEM HERE
                $this->assertNotNull( $helper );
                break;

            default:

                break;
        }
    }

} 
```

我遇到的问题是验证器无法正确获取 UserHelper，这实际上是来自学说的 UserRepository。发生这种情况的原因是验证器只能作为 ServiceManager 访问 ValidatorPluginManager，而不是访问应用程序范围的 ServiceManager。

我在验证器部分收到此错误，但如果我在通用服务管理器上调用相同的 get 方法，它可以正常工作。

```
1) Test\My\Form\Registration\UsernameElementTest::testFactoryCreation
Zend\ServiceManager\Exception\ServiceNotFoundException: Zend\ServiceManager\ServiceManager::get was unable to fetch or create an instance for doctrine.entitymanager.orm_default 
```

验证器中的 var_dump( $serviceManager ) 显示它属于 ValidatorPluginManager 类。

我尝试像这样在 service_manager 条目中放置一个工厂

```
'service_manager' => array(
                'factories' => array(
                    'My\Validator\UsernameNotInUse' => function( $sm )
                    {
                        $validator = new \My\Validator\UsernameNotInUse();
                        $em        = $serviceManager->get( 'doctrine.entitymanager.orm_default' );
                        /* @var $em \Doctrine\ORM\EntityManager */
                        $validator->setUserHelper( $em->getRepository( '\My\Entity\User' ) );

                        return $validator;
                    }
                ) 
```

但这不起作用，因为它没有咨询应用程序级服务经理。

所以，总的来说，这是我的问题：

1.  这种形式和元素分离的策略是一个好的策略吗？我应该一直这样下去吗？什么是替代品？（为了可测试性，我是为了分解东西）我本来打算只测试表单本身，并结合所有输入，但似乎我会尝试做太多事情。

2.  我该如何解决我上面的问题？

3.  我应该以我没有看到的其他方式使用 Zend 的表单/元素/输入部分吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-13T19:34:03.557

这是我的验证器，使用静态方法注入 entityManager 并使用任何 doctine 实体。

```
<?php

namespace Base\Validator;

use Traversable;
use Zend\Stdlib\ArrayUtils;
use Zend\Validator\AbstractValidator;
use Doctrine\ORM\EntityManager;

class EntityUnique extends AbstractValidator
{
    const EXISTS = 'exists';

    protected $messageTemplates = array(
        self::EXISTS => "A %entity% record already exists with %attribute% %value%",
    );

    protected $messageVariables = array(
        'entity' => '_entity',
        'attribute' => '_attribute',
    );

    protected $_entity;
    protected $_attribute;
    protected $_exclude;

    protected static $_entityManager;

    public static function setEntityManager(EntityManager $em) {

        self::$_entityManager = $em;
    }

    public function getEntityManager() {

        if (!self::$_entityManager) {

            throw new \Exception('No entitymanager present');
        }

        return self::$_entityManager;
    }

    public function __construct($options = null)
    {
        if ($options instanceof Traversable) {
            $options = ArrayUtils::iteratorToArray($token);
        }

        if (is_array($options)) {

            if (array_key_exists('entity', $options)) {

                $this->_entity = $options['entity'];
            }

            if (array_key_exists('attribute', $options)) {

                $this->_attribute = $options['attribute'];
            }

            if (array_key_exists('exclude', $options)) {

                if (!is_array($options['exclude']) ||
                    !array_key_exists('attribute', $options['exclude']) ||
                    !array_key_exists('value', $options['exclude'])) {

                    throw new \Exception('exclude option must contain attribute and value keys');
                }

                $this->_exclude = $options['exclude'];
            }
        }

        parent::__construct(is_array($options) ? $options : null);
    }

    public function isValid($value, $context = null)
    {
        $this->setValue($value);

        $queryBuilder = $this->getEntityManager()
            ->createQueryBuilder()
            ->from($this->_entity, 'e')
            ->select('COUNT(e)')
            ->where('e.'. $this->_attribute . ' = :value')
            ->setParameter('value', $this->getValue());

        if ($this->_exclude) {

            $queryBuilder = $queryBuilder->andWhere('e.'. $this->_exclude['attribute'] . ' != :exclude')
                ->setParameter('exclude', $this->_exclude['value']);
        }

        $query = $queryBuilder->getQuery();        
        if ((integer)$query->getSingleScalarResult() !== 0) {

            $this->error(self::EXISTS);
            return false;
        }

        return true;
    }
} 
```

IE。我将它用于这些表单元素，这些元素也经过测试并且工作正常：

```
<?php

namespace User\Form\Element;

use Zend\Form\Element\Text;
use Zend\InputFilter\InputProviderInterface;

class Username extends Text implements InputProviderInterface
{
    public function __construct() {

        parent::__construct('username');
        $this->setLabel('Benutzername');
        $this->setAttribute('id', 'username');
    }

    public function getInputSpecification() {

        return array(
            'name' => $this->getName(),
            'required' => true,
            'filters'  => array(
                array(
                    'name' => 'StringTrim'
                ),
            ),
            'validators' => array(
                array(
                    'name' => 'NotEmpty',
                    'break_chain_on_failure' => true,
                    'options' => array(
                        'messages' => array(
                            'isEmpty' => 'Bitte geben Sie einen Benutzernamen ein.',
                        ),
                    ),
                ),
            ),
        );
    }
} 
```

创建新用户时

```
<?php

namespace User\Form\Element;

use Zend\InputFilter\InputProviderInterface;
use User\Form\Element\Username;

class CreateUsername extends Username implements InputProviderInterface
{
    public function getInputSpecification() {

        $spec = parent::getInputSpecification();
        $spec['validators'][] = array(
            'name' => 'Base\Validator\EntityUnique',
            'options' => array(
                'message' => 'Der name %value% ist bereits vergeben.',
                'entity' => 'User\Entity\User',
                'attribute' => 'username',  
            ),    
        );

        return $spec;
    }
} 
```

编辑现有用户时

```
<?php

namespace User\Form\Element;

use Zend\InputFilter\InputProviderInterface;
use User\Form\Element\Username;

class EditUsername extends Username implements InputProviderInterface
{
    protected $_userId;

    public function __construct($userId) {

        parent::__construct();
        $this->_userId = (integer)$userId;
    }

    public function getInputSpecification() {

        $spec = parent::getInputSpecification();
        $spec['validators'][] = array(
            'name' => 'Base\Validator\EntityUnique',
            'options' => array(
                'message' => 'Der name %value% ist bereits vergeben.',
                'entity' => 'User\Entity\User',
                'attribute' => 'username',
                'exclude' => array(
                    'attribute' => 'id',
                    'value' => $this->_userId,  
                ),
            ),    
        );

        return $spec;
    }
} 
```

# java - 使用 ANT_OPTS 影响目标 java 应用程序

> ID：12342196
> 
> 赞同：2
> 
> 时间：2012-09-09T19:23:03.493
> 
> 标签：java, linux, ant

我有一个 2gig linux 64 位操作系统。我正在使用 ant 1.7.1 和 jdk 1.6_31。我有一个简单的打印应用程序，它询问最大 java 堆的大小并打印它。我正在使用 export ANT_OPTS="-Xmx64M" 但是当我在 build.xml 中使用 ant 目标运行我的小应用程序时，它报告 446Meg。

```
<target name="askmem">
    <java
        fork="true"
        classname="com.stagirite.test.AskMemory"
        classpathref="project.classpath">

        <classpath path="${build.dir}"/>
    </java>
</target> 
```

我一定做错了什么？（我从 stackoverflow 中发现，对于这个 JVM，默认堆是总内存的 1/4，这是正在发生的事情，而不是我在 ANT_OPTS 中指定的值。

安迪

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T20:11:20.117

无论如何，您都在分叉 Java，因此即使`ANT_OPTS` *确实*影响了`java`任务，我认为他们也不会转移到它。`ANT_OPTS`是针对蚂蚁本身的。

如果要控制分叉`java`任务使用的 JVM，请使用嵌套`<jvmargs>`元素。

# objective-c - 为 C 程序员学习面向对象

> ID：12342202
> 
> 赞同：6
> 
> 时间：2012-09-09T19:23:49.973
> 
> 标签：objective-c, c, oop

大约 10 年以来，我一直从事 C 语言专业编程，并且只使用 C 语言，担任过各种角色。

正如预期的那样，我非常了解该语言的习语，除此之外还有一些设计细微差别——公开哪些 API、谁调用什么、谁做什么、应该重入什么等等。我是在阅读“编写可靠代码”的过程中长大的，它是早期的 C 版本，而不是基于 C++ 的版本。

但是，我从来没有用 OO 语言编程过。现在，我想迁移到为 iPhone（可能是 android）编写应用程序，所以想学习使用 Objective-C 并以适合专业程序员的能力使用它。

我如何围绕 OO 的东西转转？你对我的最小阅读清单建议是什么。

是否有一本书包含某种相对真实的示例 OO 设计 Objective-C？

此外，阅读你会推荐我阅读哪些源代码。

TIA

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T19:52:05.570

请注意，我在这里推荐的书是 1991 年出版的（第 2 版）。

[Object Oriented Programming: An Evolutionary Approach](https://rads.stackoverflow.com/amzn/click/com/0201548348)由 Objective-C 的创建者 Brad Cox 撰写的一本书，旨在向世界介绍他的语言，而那是一个不熟悉面向对象编程理念的世界。所以这本书非常温和，介绍了所有的基本思想。

Brad Cox 对 Objective-C 将如何提供真正强大的组件重用有一些想法，但事情并没有真正像他预期的那样发展。他仍然是一个聪明的人，如果你能掌握它，我会推荐他的书。

为了完整起见，我将第二个 tuğrul 指向[https://stackoverflow.com/questions/7571/cocoa-and-objective-c-resources](https://stackoverflow.com/questions/7571/cocoa-and-objective-c-resources)的指针，其中列出了所有现代书籍。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-09T19:59:47.183

尽管我要向您推荐的这本书并不是专门针对 Objective-C 的（它涵盖了 OOP 的所有概念，而没有深入研究任何特定的语言），但它可能是我读过的关于该主题的最好的书，适合需要的初学者对这个主题的介绍，它对我帮助很大！

这本书是： [面向对象的思维过程](https://rads.stackoverflow.com/amzn/click/com/0672330164)

我喜欢这本书，因为它假定绝对没有任何 OOP 知识，但在基本的编程概念上浪费时间并不枯燥。它使您从过程范式轻松到 OO 范式。如果作者开始使用技术术语，他肯定会先解释清楚。语言通俗易懂，最重要的是这本书读起来不乏味，它没有使用繁重的学术语言。

这本书也很好地给你一些例子，使解释更清楚易懂。

# javascript - 防止“jQuery(html)”触发浏览器请求图片和其他引用的内容

> ID：12342204
> 
> 赞同：3
> 
> 时间：2012-09-09T19:24:08.453
> 
> 标签：javascript, jquery, dom

使用 jQuery 从文本创建新的 DOM 元素。

例子：

```
jQuery('<div><img src="/some_image.gif"></img></div>'); 
```

执行此语句时，它会导致浏览器向服务器请求文件“some_img.gif”。

有没有办法执行此语句，以便可以从 DOM 遍历中使用生成的 jQuery 对象，但实际上不会导致浏览器通过请求图像和其他引用内容来访问服务器？

例子：

```
var jquery_elememnts = jQuery('<div><img class="a_class" src="/some_image.gif"></img></div>');
var img_class = jquery_elememnts.find('img').attr('class'); 
```

我现在唯一的想法是使用正则表达式从图像元素和其他将触发浏览器请求的东西中删除所有“src”标签，然后再使用 jQuery 来评估 HTML。

如何使用 jQuery 来评估 HTML，而不触发浏览器向服务器请求评估的 HTML 中的引用内容？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-09T21:35:55.780

如果你用正则表达式的方式，也许是一个简单的方式

```
 htmlString.replace(/[ ]src=/," data-src="); 
```

会做这项工作吗？

所以不要寻找：

```
 jquery_elememnts.find('img').attr('src'); 
```

你将不得不寻找：

```
 jquery_elememnts.find('img').data('src'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-09T19:27:22.753

那是不可能的。当浏览器加载一个 HTML 片段时，例如一个包含 的 HTML 片段，`img`它通过 引用另一个资源`src`，它会尝试获取它。

但是，如果您只需`class`要从 中获取属性，则`img`可以使用[`$.parseXML()`](http://api.jquery.com/jQuery.parseXML/)来获取`XMLDocument`，然后对其进行[处理](http://www.w3schools.com/dom/dom_nodes_get.asp)以获取所需的属性。这样，将永远不会加载 HTML 片段，因此不会获取图像：

```
var jquery_elememnts = $.parseXML('<div><img class="a_class" src="http://4.bp.blogspot.com/-B6PMBqTyqpk/UC7syX2eRLI/AAAAAAAABL0/SEoLWoxgApo/s1600/google10.png"></img></div>');
var img = jquery_elememnts.getElementsByTagName("img")[0];
var img_class = img.getAttribute("class"); 
```

**[演示](http://jsfiddle.net/bj8J3/)**。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-09T19:46:23.767

您可以`parseXML`在 jQuery 中使用。

```
var elements = jQuery.parseXML('<div><img class="a_class" src="/some_image.gif"></img></div>');
var img_class = $(elements).find('img').attr('class');
alert(img_class); 
```

该字符串应该是一个完美的 XML。这是我用于类似目的的解决方法，但不知道这是否能解决您的问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-08-31T08:20:22.510

```
var jquery_elememnts = (new DOMParser()).parseFromString('<div><img class="a_class" src="/some_image.gif"></img></div>', 'text/html'); 
var img_class = jQuery(jquery_elememnts).find('img').attr('class'); 
```

# python - 计算文本文件中字母的频率

> ID：12342207
> 
> 赞同：6
> 
> 时间：2012-09-09T19:24:21.680
> 
> 标签：python, text

在 python 中，如何遍历文本文件并计算每个字母的出现次数？我意识到我可以使用“for x in file”语句来完成它，然后设置 26 个左右的 if elif 语句，但肯定有更好的方法吗？

谢谢。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-09T19:26:59.477

使用[`collections.Counter()`](https://docs.python.org/library/collections.html#collections.Counter)：

```
from collections import Counter
with open(file) as f:
    c = Counter()
    for line in f:
        c += Counter(line) 
```

如果文件不是那么大，可以将其全部作为字符串读入内存，并`Counter`在一行代码中将其转换为对象：

```
c = Counter(f.read()) 
```

例子：

```
>>> c = Counter()
>>> c += Counter('aaabbbcccddd eee fff ggg')
>>> c
Counter({'a': 3, ' ': 3, 'c': 3, 'b': 3, 'e': 3, 'd': 3, 'g': 3, 'f': 3})
>>> c += Counter('aaabbbccc')
Counter({'a': 6, 'c': 6, 'b': 6, ' ': 3, 'e': 3, 'd': 3, 'g': 3, 'f': 3}) 
```

或者使用[`count()`](https://docs.python.org/library/stdtypes.html#str.count)字符串的方法：

```
from string import ascii_lowercase     # ascii_lowercase =='abcdefghijklmnopqrstuvwxyz'
with open(file) as f:
    text = f.read().strip()
    dic = {}
    for x in ascii_lowercase:
        dic[x] = text.count(x) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-09T19:26:29.870

使用字典 - 基本上`letters[char]++`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-09T19:40:18.190

**这种方式为每个字符**创建字典直方图，可用于创建条形图或类似图。如果要将其限制为字母或某个子集，则需要`freqs`在末尾添加额外的条件或过滤器。

```
freqs = {}
with open('your_filename.txt') as f:
    for line in f:
        for char in line:
            if char in freqs:
                freqs[char] += 1
            else:
                freqs[char] = 1

print(freqs) 
```

您还可以使用以下方法编写相同的逻辑[`dict.setdefault`](https://docs.python.org/library/stdtypes.html#dict.setdefault)：

```
freqs = {}
with open('your_filename.txt') as f:
    for line in f:
        for char in line:
            freqs.setdefault(char, 0)
            freqs[char] += 1 
```

或使用[`collections.defaultdict`](https://docs.python.org/library/collections.html#collections.defaultdict)：

```
from collections import defaultdict

freqs = defaultdict(int)
with open('your_filename.txt') as f:
    for line in f:
        for char in line:
            freqs[char] += 1 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-09T19:53:41.540

基本上，没有导入： is_letter 是一个函数来确定某事物是否是字母，这样您就可以计算除通常的英文字母之外的其他事物

```
def add_or_init(dictionary, c):
        if(c in dictionary):
                dictionary[c]+=1
        else:
                dictionary[c]=1
def count_one_letter(dictionary, c, is_letter):
        if is_letter(c):
                add_or_init(dictionary, c)
def count_letters(dictionary, string, is_letter):
        for c in string:
                count_one_letter(dictionary, c, is_letter)
        return dictionary

#count all characters
count_letters(dict(),'aaabbbcccddd eee fff ggg',lambda x: True)
# => {'a': 3, ' ': 3, 'c': 3, 'b': 3, 'e': 3, 'd': 3, 'g': 3, 'f': 3} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-09T19:38:25.150

Counter 是实现此目的的好方法，但 Counter 仅在 3.1 及更高版本以及 2.7 中可用。

如果您使用的是 3.0 或 2.[56]，您可能应该使用 collections.defaultdict(int) 代替。

# ios - iOS 选择单元格

> ID：12342209
> 
> 赞同：-2
> 
> 时间：2012-09-09T19:24:53.007
> 
> 标签：ios, cell, selection

这可能真的很容易回答，但我已经搜索了网络、堆栈和书籍，但找不到我需要的东西。

基本上我有一个带有表格的非常点头应用程序，表格有 5 个部分，每个部分有大约 5 行，我需要的只是一些代码放入 Didselectrow 过程中，告诉我选择了哪个单元格然后做一些事情 -

因此，如果单元格 2 则显示地图等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T19:33:30.190

所选单元格由您输入的索引路径参数指示`-tableView:didSelectRowAtIndexPath:`。NSIndexPath 上有一个类别，可以为您提供`-section`方法`-row`；使用这些来确定选定的行，然后在此基础上采取任何行动。

# linux - 检查用户在 Qt 中使用的是哪个桌面环境（Linux）

> ID：12342214
> 
> 赞同：1
> 
> 时间：2012-09-09T19:25:53.890
> 
> 标签：linux, qt, unity3d, menubar

是否可以检查用户正在使用哪个桌面环境（例如 KDE 或 Unity）。问题是我有一个带有菜单栏的窗口，但取决于桌面环境，菜单是否绘制在上面（例如，在 Unity 中，菜单栏绘制在面板上）。我知道我可以禁用 nativeMenuBar 功能，但我更愿意启用它。在我的情况下，我不能使用布局，所以只有两个选项是检查桌面环境或禁用 nativeMenuBar 功能。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T19:50:20.847

您可以检查 DESKTOP_SESSION 环境变量。使用 getenv() 来做到这一点。

# node.js - Nodejs：何时执行刻度

> ID：12342217
> 
> 赞同：1
> 
> 时间：2012-09-09T19:26:32.597
> 
> 标签：node.js, asynchronous

Nodejs 有一种方法`process.nextTick(fn)`可以将函数的执行延迟到下一个刻度。根据[这篇文章](http://howtonode.org/understanding-process-next-tick)，这可用于在这样的对象的构造函数中发出事件（从 artice 复制）：

```
function StreamLibrary(resourceName) {      
    var self = this;

    process.nextTick(function() {
        self.emit('start');
    });

}

var stream = new StreamLibrary('fooResource');

stream.on('start', function() {
    console.log('Reading has started');
}); 
```

没有`process.nextTick`这个是行不通的，因为在你有机会监听事件之前事件就已经发出了。但是，如何确定在添加事件侦听器之前不会发出事件？如果它是完全异步的，则有可能在构造函数结束之前执行下一个刻度，因此忽略事件侦听器。那么这个过程背后的规则是什么？node什么时候执行nextTick？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-09T19:57:50.770

下一个刻度在……下一个刻度上执行。我认为这里的混乱就是你所说的“完全异步”。

使用 Node.js，您的所有代码都在单个线程上运行。在当前刻度完成之前，不会执行为下一个刻度安排的代码。

因此，当您从构造函数中的下一个滴答声发出事件时，可能附加处理程序的代码将在下一个滴答声发生之前全部执行完毕。

Node的异步和多线程部分是处理网络和IO等操作。这些函数调用在您的 JavaScript 代码运行时运行，但是当数据传回您的代码时，它不会运行，直到下一个滴答声。

# opengl - 如何覆盖opengl中的纹理颜色？

> ID：12342219
> 
> 赞同：1
> 
> 时间：2012-09-09T19:26:55.863
> 
> 标签：opengl, texture2d, text-rendering

我正在开发引擎 (http://b2dengine.com/) 来实现我的游戏创意，该创意已经在进行中。现在很长一段时间我都被文本渲染的这个问题所困扰。

我的纹理图集在单个 png 图像中包含所有支持/需要的字符。字符映射由`Font`类定义。一切正常，字符被正确和准确地渲染。事情是我还需要改变文本颜色的能力。这听起来，我敢打赌它很简单，但我不能让它工作。

我正在使用这个 gl 混合功能来获得所需的效果。

```
GL.instance.glBlendFunc(GL.instance.GL_SRC_ALPHA, GL.instance.GL_ONE_MINUS_SRC_ALPHA); 
```

在大多数情况下，只要颜色有点暗，它就可以工作。但是当它设置为白色时，我可以看到伪影。如果需要，我可以提供屏幕截图。同样要使其正常工作，纹理中的“文本”必须是白色的。

我正在使用 opengl 1.1（是的，我知道它很旧，但我还没有准备好使用着色器）。

所以简而言之，我的问题是：如何渲染纹理并完全替换颜色？仅保留 Alpha 通道。例如，如果它在 png 中是黑色且 80%​​ 透明，当我渲染时，我希望它在屏幕上以 80% 的透明度呈现绿色。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T22:17:37.640

我*认为*这会起作用，尽管这些是一些古老的已弃用的功能，我不再记得太多关于它们的事情了。

激活具有文本纹理的纹理单元，尝试设置以下选项：

```
glTexEnv(GL_TEXTURE_ENV, GL_COMBINE_RGB, GL_REPLACE);
glTexEnv(GL_TEXTURE_ENV, GL_COMBINE_ALPHA, GL_REPLACE);
glTexEnv(GL_TEXTURE_ENV, GL_SRC0_RGB, GL_PRIMARY_COLOR);
glTexEnv(GL_TEXTURE_ENV, GL_SRC0_ALPHA, GL_TEXTURE); 
```

我相信这将用传入的片段颜色（glColor）替换片段的 RGB，并完全忽略纹理的 RGB 通道。话虽如此，如果您刚开始上传一个 Alpha 通道纹理会更好。

确保检查错误，如果它不起作用，你可以看看我是否从这里错误地抓取了一些东西：[http ://www.opengl.org/sdk/docs/man/xhtml/glTexEnv.xml](http://www.opengl.org/sdk/docs/man/xhtml/glTexEnv.xml)

# mysql - 使用 GROUP_CONCAT 检索所有行数据

> ID：12342224
> 
> 赞同：0
> 
> 时间：2012-09-09T19:27:12.777
> 
> 标签：mysql, select, field, group-concat

我在 mysql 中使用 GROUP_CONCAT() 从存储的 ID 列表中检索数据，如下所示：

```
**Table : Visitor**
ID   |  name  |  id_visited_place
--------------------------
1    |  tom   |  222,235,455

**Table : Places**
ID   |  Country  |  City     | Date
--------------------------------------
222  |  France   |  Paris    | 2010-08-11
235  |  Belgium  |  Antwerp  | 2009-04-24
455  |  Germany  |  Berlin   | 2009-03-17 
```

问题是这个查询只返回一个字段：

```
SELECT visitor.*, GROUP_CONCAT(places.country) AS country FROM visitor
LEFT JOIN Places ON FIND_IN_SET(places.id, visitor.id_visited_place)
GROUP BY visitor.id 
```

**但是对于id_visited_place**中的每个 ID，我想返回与该 ID 关联的每个字段，例如：“我于 2010 年 8 月 11 日访问了法国**的****巴黎**”

 ***** * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T20:13:44.837

然后只需通过以下方式离开该组：

```
SELECT concat('I visited ', p.city, ', ', p.country, ' on ', date)
FROM visitor v left outer join
      Places p
      ON FIND_IN_SET(p.id, v.id_visited_place)
GROUP BY v.id 
```

您的联接将行相乘以获得每个位置的单独行。然后 group by 将其减少回每位访客一行。

也就是说，您的数据结构不应该为此目的使用集合。访问的地点数量可能会超过最大设置大小。此外，连接很难遵循并且不能利用索引。****

# jquery - Jquery 动画 2 窗格 Div

> ID：12342228
> 
> 赞同：1
> 
> 时间：2012-09-09T19:27:36.737
> 
> 标签：jquery, html, jquery-animate, jsfiddle, panes

所以，

我正在使用 David Walsh[在此处](http://davidwalsh.name/google-extension-effect)详述的 Jquery 集成两个窗格 DIV 。我已将他的代码迁移到[JSfiddle](http://jsfiddle.net/Koubenec/3BMfu/11/)并进行了一些调整，但动画似乎不起作用。如果有人知道我在代码中缺少什么，我将不胜感激输入！

-马卡

jQuery：

```
jQuery(document).ready(function() {
  jQuery(".itemJQuery").bind({
    mouseenter: function() {
      var self = jQuery(this), billboard = self.data("billboardElement");
      if(!billboard) {
        billboard = jQuery(jQuery(".item-billboard", this)[0]);
        self.data("billboardElement", billboard);
      }
      jQuery(billboard).stop().animate({
        "margin-top": "-200px"
      });
    },
    mouseleave: function() {
      jQuery(this).data("billboardElement").stop().animate({
        "margin-top": 0
      });
    }
  });
}); 
```

HTML：

```
<div class="item">
    <div class="item-billboard">
      <h3>Angry Birds</h3>
    </div>
    <div class="item-detail">
      <p>There's more detail about the item inside this DIV!</p>
    </div>
</div> 
```

CSS：

```
.item {position: relative;width: 240px;overflow: hidden;border: 1px solid #ccc;}
.item {height: 200px;}      
.item a {text-decoration: none;color: #000;}     
.item-billboard, .item-detail {padding: 10px;height: 180px;}     
.item-billboard {margin-top: 0;background: red;}
.item-billboard h3 {font-size: 13px;font-weight: bold;color: #262626;font-family: "Open Sans", arial, sans-serif;}
.item-detail {background: #ececec;} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T19:33:07.200

更改`jQuery(".itemJQuery")`为`jQuery(".item")`，它的工作原理。

代码：http: [//jsfiddle.net/3BMfu/12/](http://jsfiddle.net/3BMfu/12/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-09T19:36:23.620

我不了解大卫沃尔什，但在 SO，我们构建了这样的东西 :)

## *[jsBin 演示](http://jsbin.com/uxizew/5/edit)*

```
$('.item').on('mouseenter mouseleave',function(e){
    $(this).stop().animate({scrollTop: e.type=='mouseenter'?200:0 }, 400);    
}); 
```

# sql - 有“IN”功能的对立面吗？

> ID：12342231
> 
> 赞同：4
> 
> 时间：2012-09-09T19:27:52.043
> 
> 标签：sql, oracle

我有这个查询：

```
Select
Sysdate,Sum(Count(P.Init_Dtime))
From Player p,player_source ps
Where
Ps.Group_Id In (44,9,42,15,23,73,45,33,69,63,7,49,96,81,28,57,98,74,92,38) 
And P.Player_Id=Ps.Player_Id 
and
Trunc(p.Init_Dtime) > Trunc(Sysdate) - 7 
And
Trunc(P.Create_Dtime) >= To_Date('2012-mar-01','yyyy-mon-dd')
And Trunc(P.Create_Dtime) < To_Date('2015-sep-9','yyyy-mon-dd')
Group By Trunc(P.Init_Dtime)
Order By Trunc(P.Init_Dtime) Asc 
```

我正在使用“IN”函数来仅包含具有特定数字的 Group_ID。Group_ID 列的值可以是 1-100。如何更改此查询，以使结果包含所有不是 (44,9,42,15,23,73,45,33,69,63,7,49,96,81,28,57,98 的 Group_Id 数字,74,92,38)?

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-09T19:30:01.103

您可以使用 NOT 来否定表达式。

所以你可以说：

```
Where
Ps.Group_Id NOT IN (44,9 ...) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-09T19:44:51.680

正如彼得所写，使用**“NOT IN”**是真正的答案。
*问题是为什么你使用这个列表作为一个列表*......
我认为这个列表有一些意义，并且你可能有几个像这样的列表将一些组“分组”在一起。
如果是这种情况，您可能希望拥有**另一个**包含这些组的表，并在这个新表之间进行**连接**`Ps.Group_Id`......

* * *

编辑：
另一方面，如果您有索引 on`p.Init_Dtime`或 on `P.Create_Dtime`，**Oracle 不能使用这些索引**，因为您在函数中使用这些列。
您可能需要考虑如何在没有函数的情况下工作（您可以再添加 2 个列来保存这些列的截断值，也将它们编入索引并在查询中使用它们）

* * *

Edit2：
如果您想用表格中的信息快速而肮脏地替换列表，请记住您可以在零件**`select`**内部使用**`not in`**。
如果你有`t1`col`Group_Id`和 col的表`Valid_Groups`，你可以这样做：

```
... Where 
    Ps.Group_Id In (Select Group_Id from T1 where Valid_Groups = 'true') And ... 
```

同样适用于“**不在**”...

# java - 如何使用 ant 从命令行构建应用程序？

> ID：12342233
> 
> 赞同：1
> 
> 时间：2012-09-09T19:28:14.607
> 
> 标签：java, android, eclipse, ant, eclipse-plugin

我正在尝试从命令行构建 android 项目。我试图在命令行中运行这一行：

```
C:\Users\davida\workspace_8\MyApp>ant debug 
```

这就是答案：

```
'ant' is not recognized as an internal or external command,
operable program or batch file. 
```

我尝试了 android 开发人员[http://developer.android.com/tools/building/building-cmdline.html](http://developer.android.com/tools/building/building-cmdline.html)，但没有运气。

首先，我怎么知道我的电脑上是否安装了ant？（如果我通过 Eclipse 工具栏导航到窗口 -> 首选项，我的窗口左侧的 Ant 菜单包含“编辑器”和“运行时”）这是否意味着安装了 ant，我可以从命令行使用它构建？

我可以通过 Eclipse 使用模拟器和我的设备进行调试和运行。

搜索后我读到我需要设置java变量所以我做了：

```
JAVA_HOME = C:\Progra~2\Java\jdk1.7.0_01 
```

我的操作系统：win7

好吧..我失去了任何帮助？？如果有人有一步一步的样本，我会很高兴。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T19:43:22.413

首先，您需要确保`ant`安装了构建系统（[因为它没有与 Android SDK 捆绑在一起](https://stackoverflow.com/a/2577638/700926)）——您可以`ant`从这里下载： http: [//ant.apache.org/bindownload.cgi](http://ant.apache.org/bindownload.cgi)。

其次，您必须确保`ant`已将其添加到您的`PATH`.

# iphone - 从保存在 NSDocumentDirectory 的视频中加载缩略图

> ID：12342236
> 
> 赞同：0
> 
> 时间：2012-09-09T19:28:33.597
> 
> 标签：iphone, ios4, avfoundation, ios5, nsdocumentdirectory

我使用以下代码从给定路径的视频中获取图像。

```
- (UIImage*) thumbnailImageForVideo:(NSURL *)videoURL atTime:(NSTimeInterval)time {
    AVURLAsset *asset = [[AVURLAsset alloc] initWithURL:videoURL options:nil];
    NSParameterAssert(asset);
    AVAssetImageGenerator *assetImageGenerator = [[AVAssetImageGenerator alloc] initWithAsset:asset];
    assetImageGenerator.appliesPreferredTrackTransform = YES;
    assetImageGenerator.apertureMode = AVAssetImageGeneratorApertureModeEncodedPixels;

    CGImageRef thumbnailImageRef = NULL;
    CFTimeInterval thumbnailImageTime = time;
    NSError *thumbnailImageGenerationError = nil;
    thumbnailImageRef = [assetImageGenerator copyCGImageAtTime:CMTimeMake(thumbnailImageTime, 60) actualTime:NULL error:&thumbnailImageGenerationError];

    if (!thumbnailImageRef)
        NSLog(@"thumbnailImageGenerationError %@", thumbnailImageGenerationError);

    UIImage *thumbnailImage = thumbnailImageRef ? [[UIImage alloc] initWithCGImage:thumbnailImageRef]  : nil;
    previewImage = thumbnailImage;

    return thumbnailImage;
} 
```

但是，这不适用于保存在 NSDocumentDirectory 中的视频。我们不能使用 NSURL 访问 NSDocumentDIrectory 吗？如果没有其他选择。主要思想是显示保存在文档目录中的图像的缩略图，然后允许它上传到服务器。这也可以是一个临时目录。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T17:30:32.773

当你使用 NSURL *outputURL = [[NSURL alloc] initFileURLWithPath: path];

# java - 为什么这不起作用

> ID：12342237
> 
> 赞同：-2
> 
> 时间：2012-09-09T19:28:40.240
> 
> 标签：java, variables, double

```
static final double HotDogcp  = MyConstants.HotDog[0]-(MyConstants.HotDog[0] * MyConstants.mu);
static final double [] HotDog = {18, 8, 10, 0};
static double mu =0.25; 
```

为什么 HotDogcp 不等于 13.5

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-09T19:32:46.347

静态变量按照它们声明的顺序进行初始化。

在您的情况下，`mu`初始化时变量仍然为 0（双精度值的默认值）`HotDogcp`，因此`HotDogcp`初始化为`MyConstants.HotDog[0]`.

如果您`static double mu =0.25;`在第一行之前声明，它可能会达到您的预期。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-09T19:33:08.547

因为Java不是数学方程求解器。因此，陈述的顺序很重要。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-09T19:36:05.027

因为它们还没有初始化。将该计算放在 mu pls 下。

将初始化放在构造函数中。对外声明。

# java - 使用 Jersey 将 mp3 提供给 Java 中的移动 Safari 浏览器

> ID：12342239
> 
> 赞同：1
> 
> 时间：2012-09-09T19:29:14.833
> 
> 标签：java, mobile-safari, jax-rs, audio-streaming, html5-audio

我在使用此代码时遇到问题，

```
@Path("/play")
public class Player {

    @GET
    @Produces("audio/mpeg")
    public Response get(@DefaultValue("C:\\Users\\Ben\\Music\\sample.mp3") @QueryParam("file") String file) {
        File song = new File(file);
        return Response.ok().entity(song).build();
    }
} 
```

Chrome 能够播放由此返回的内容，但移动版 Safari 不能。

当我将 sample.mp3 移动到静态网络文件夹时，它可以在 Safari 移动浏览器中播放。

如何让移动 Safari 播放使用 JAX-RS 返回的音频？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T20:27:05.823

我使用`AudioAttributes`和`EncodingAttributes`类将文件转换为正确的编解码器。它非常慢并且浪费大量存储空间，因为每次播放歌曲时都必须创建一个新文件。稍后我可能会更改此代码，以便在转换后缓存文件。然后在我转换之前我检查我是否已经转换。此外，最好在转换原始文件之前测试原始文件是否与设备兼容。这是当前的代码。

```
 @GET
    @Path("/audio")
    @Produces("audio/mpeg")
    public Response getAudio(
            @DefaultValue("C:\\Users\\Ben\\Music\\sample.mp3") @QueryParam("file") String file,
            @DefaultValue("medium") @QueryParam("quality") String quality) throws EncoderException, IOException {
        File song = new File(file);
        File rootMusicDir = new File(AUDIO_PATH);
        File rootVideoDir = new File(VIDEO_PATH);
        if (!directoryService.isSubDirectory(rootMusicDir, song) && !directoryService.isSubDirectory(rootVideoDir, song)) {
            return Response.status(500).build();
        }

        AudioAttributes audio = new AudioAttributes();
        audio.setCodec("libmp3lame");
        if (quality.equalsIgnoreCase("high")) {
            audio.setBitRate(new Integer(256000));
            audio.setChannels(new Integer(2));
            audio.setSamplingRate(new Integer(44100));
        } else if (quality.equalsIgnoreCase("medium")) {
            audio.setBitRate(new Integer(128000));
            audio.setChannels(new Integer(2));
            audio.setSamplingRate(new Integer(44100));
        } else {
            audio.setBitRate(new Integer(64000));
            audio.setChannels(new Integer(1));
            audio.setSamplingRate(new Integer(22050));
        }

        EncodingAttributes attrs = new EncodingAttributes();
        attrs.setFormat("mp3");
        attrs.setAudioAttributes(audio);
        Encoder encoder = new Encoder();

        String random = new BigInteger(130, new SecureRandom()).toString(32);
        File songMP4 = new File(TEMP_PATH + file.replaceAll("[^\\dA-Za-z ]", "").replaceAll("\\s+", "+") + random);
        encoder.encode(song, songMP4, attrs);
        return Response.ok().entity(songMP4).build();
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-01T13:09:15.060

你能澄清一下你的问题的根本原因是什么吗？我不太明白为什么重新编码文件应该解决问题？据我了解，您有一个 .mp3 在静态服务时在 Safari 移动设备中运行良好，但在按照您的上述代码提供时却不行。因此，我认为您的原始 .mp3 是以 iOS 可以处理的方式编码的（否则静态提供的文件将无法正确播放）。

您与提供的 .mp3 一起发送的标头是否存在问题？我问的原因是我在向移动 Safari 提供 mp3 时遇到了类似的问题，该 Safari 由 Perl 脚本提供服务。静态提供文件时工作正常。当使用 Perl 提供相同的文件时，它会在 Safari 移动设备中提供 404（OSX 上的 Safari 工作正常）。

# java - Java 中的 Trim() 不能按我预期的方式工作？

> ID：12342244
> 
> 赞同：-3
> 
> 时间：2012-09-09T19:29:45.357
> 
> 标签：java, regex, substring, trim

> **可能重复：**
> [查询 Java 中的 trim() 方法](https://stackoverflow.com/questions/12343765/query-about-the-trim-method-in-java)

我正在解析站点的用户名和其他信息，每个站点后面都有一堆空格（但单词之间有空格）。例如：“Bob the Builder”或“Sam thewelder”。空格的数量因名称而异。我想我会使用 .trim()，因为我以前用过这个。但是，这给我带来了麻烦。我的代码如下所示：

```
for (int i = 0; i < splitSource3.size(); i++) {
            splitSource3.set(i, splitSource3.get(i).trim());
} 
```

结果是一样的；最后没有空格被删除。提前感谢您的出色回答！

更新：

完整的代码有点复杂，因为首先解析出 HTML 标记。它完全是这样的：

```
for (String s : splitSource2) {
        if (s.length() > "<td class=\"dddefault\">".length() && s.substring(0, "<td class=\"dddefault\">".length()).equals("<td class=\"dddefault\">")) {
                splitSource3.add(s.substring("<td class=\"dddefault\">".length()));
        }
}

System.out.println("\n");
    for (int i = 0; i < splitSource3.size(); i++) {
            splitSource3.set(i, splitSource3.get(i).substring(0, splitSource3.get(i).length() - 5));
            splitSource3.set(i, splitSource3.get(i).trim());
            System.out.println(i + ": " + splitSource3.get(i));
    }
} 
```

更新：

冷静下来。我从来没有说问题出在 Java 上，我也从来没有说它是一个错误或损坏或任何东西。我只是说我遇到了麻烦，并发布了我的代码供您协作并帮助解决我的问题。注意短语“我的问题”而不是“java 的问题”。我实际上已经打印了代码

```
System.out.println(i + ": " + splitSource3.get(i) + "*"); 
```

在之后的每个循环中。

这就是我知道我有问题的方式。顺便说一句，问题仍然没有解决。

更新：

示例输出（减去单引号）：

```
'0: Olin D. Kirkland                                          '
'1: Sophomore                                          '
'2: Someplace, Virginia  12345<br />VA SomeCity<br />'
'3: Undergraduate                                          ' 
```

**编辑**OP 在[Query 中重新表述了他关于 Java 中的 trim() 方法](https://stackoverflow.com/questions/12343765/query-about-the-trim-method-in-java)的问题，其中发现问题是 Unicode 空白字符与`String.trim()`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T20:20:05.567

对我来说没有问题。

在这里，您的代码进行了一些重构，并且（也许）更具可读性：

```
final String openingTag = "<td class=\"dddefault\">";
final String closingTag = "</td>";
List<String> splitSource2 = new ArrayList<String>();
splitSource2.add(openingTag + "Bob the Builder " + closingTag);
splitSource2.add(openingTag + "Sam the welder " + closingTag);
for (String string : splitSource2) {
    System.out.println("|" + string + "|");
}
List<String> splitSource3 = new ArrayList<String>();
for (String s : splitSource2) {
    if (s.length() > openingTag.length() && s.startsWith(openingTag)) {
        String nameWithoutOpeningTag = s.substring(openingTag.length());
        splitSource3.add(nameWithoutOpeningTag);
    }
}

System.out.println("\n");
for (int i = 0; i < splitSource3.size(); i++) {
    String name = splitSource3.get(i);
    int closingTagBegin = splitSource3.get(i).length() - closingTag.length();
    String nameWithoutClosingTag = name.substring(0, closingTagBegin);
    String nameTrimmed = nameWithoutClosingTag.trim();
    splitSource3.set(i, nameTrimmed);
    System.out.println("|" + splitSource3.get(i) + "|");
} 
```

* * *

*我知道这不是一个真正的答案，但我不能发表评论，而且这个代码作为评论不合适，所以我把它作为一个答案，这样 Olin Kirkland 就可以检查他的代码。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T06:04:25.750

我突然想到，当我从事屏幕抓取项目时，我曾经遇到过这种问题。关键是有时下载的 HTML 源代码包含不可打印的字符，这些字符也是非空白字符。这些很难复制粘贴到浏览器。我想这可能发生在你身上。

如果我的假设是正确的，那么您有两个选择：

1.  使用二进制阅读器并找出这些字符是什么 - 并使用 String.replace() 删除它们；例如：

    ```
    私人静态无效cutCharacters（字符串fromHtml）{
        字符串结果 = fromHtml;
        char[] 有问题的Characters = {'\000', '\001', '\003'}; //这也可以是一个私有的静态最终常量
        for (char ch: 有问题的字符) {
            结果 = result.replace(ch, ""); //我知道，修改输入参数很脏。但它会作为一个例子
        }
        返回结果；
    }

    ```

2.  如果您在要解析的 HTML 中发现某种重复出现的模式，那么您可以使用正则表达式和子字符串来删除不需要的部分。例如：

    ```
    私人字符串 getImportantParts（字符串 fromHtml）{
        模式 p = Pattern.compile("(\\w*\\s*)"); //这也可以是一个私有的静态最终常量。
        匹配器 m = p.matcher(fromHtml);
        StringBuilder buff = new StringBuilder();
        而（m.find（））{
            buff.append(m.group(1));
        }
        返回 buff.toString().trim();
    }

    ```

# html - 如何从块引用中删除底部填充？

> ID：12342248
> 
> 赞同：4
> 
> 时间：2012-09-09T19:29:49.047
> 
> 标签：html, css, wordpress

我的块引用上有很多底部填充。我无法摆脱它。看到这张图片：http: [//imgur.com/PGCeY](http://imgur.com/PGCeY)

我的 CSS 设置是：

```
* {
   padding:0;
   margin:0;
}
blockquote {
width: 640px;
margin-bottom: 1em;
padding: 0px 0px 0px 0px;
} 
```

我用一个红色矩形概述了我想要摆脱的东西。在这张图片中：http: [//imgur.com/PGCeY](http://imgur.com/PGCeY)

我也在使用 pagelines wordpress 主题。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-09T20:16:36.670

尝试将其添加到 CSS 的末尾：

```
blockquote p {
    padding:0;
    margin:0;
} 
```

如果这不起作用，请右键单击并查看页面的源代码以查看原始 HTML。然后你就会知道哪些元素被添加到`blockquote`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-09T19:34:08.373

您的块引用中有一个段落（应该是）？它可能是内部元素的边距。

很高兴看到代码的实际示例。据我所知，您在这里向我们展示的代码不是问题的一部分。

# android - 安卓静音按钮

> ID：12342254
> 
> 赞同：1
> 
> 时间：2012-09-09T19:30:35.887
> 
> 标签：android, keycode, mute

一些新的 Android 设备有一个静音按钮，如 Iphone。它是一个实际的物理按钮，可让您静音来电，而不是长按音量降低硬件控制或按下电源按钮。

我的问题：什么是关键代码事件，或者我如何捕获它以便我的应用程序响应它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T19:39:25.507

我想你正在寻找[`KeyEvent.KEYCODE_MUTE`](http://developer.android.com/reference/android/view/KeyEvent.html#KEYCODE_MUTE). 请注意，没有任何旗舰 Android 设备具有此按钮，因此您将受制于制造商的操作系统是否实际发送此事件。

# javascript - Javascript：“单击”和“输入键”之间的不同响应

> ID：12342257
> 
> 赞同：0
> 
> 时间：2012-09-09T19:30:54.250
> 
> 标签：javascript, jquery

我做了一个网站，用户在填写文本框后需要点击一个按钮。当他按下图像时，图像会发生变化（就像命令幻灯片一样）。我的问题是，当您触摸“输入”而不是用鼠标单击时，它不会产生淡入淡出效果。

网站是这样的，你可以试试：[http ://www.tuttoscorre.net/esame-storia-arte-moderna.php](http://www.tuttoscorre.net/esame-storia-arte-moderna.php)

我怎么处理这个？

该网站的目的是将文本框中的答案存储在 javascript 数组中，以在幻灯片（10 张幻灯片）的末尾显示。

这是按钮和幻灯片的代码：

```
 <script type="text/javascript">
        //Dichiaro Array Globale
        var risposte = new Array();
        var count = 0;
        $('.risultati').css({opacity: 0.0});

        //Salvo risposta, svuoto text, proseguo con le slide
        function conferma(frm) {
            if (frm.nome.value == "") alert("Non hai scritto nulla!");
            else {
                risposte[count] = frm.nome.value;
                count = count + 1;
                frm.nome.value = "";
                prossima();
            }
        }

        //Nuova slide sempre verso dx
        function prossima(frm) {
            var $active = $('#slideshow img.active');

            if (!$active.next('img').length) {
                risultati();
            } else {
                var $next = $active.next(); 

                $next.css({opacity: 0.0})
                    .addClass('active')
                    .animate({opacity: 1.0}, 1000, function() {
                        $active.removeClass('active');
                    });
            }

        }

        //Tolgo slide e mostro risultati
        function risultati() {
            $('#slideshow').animate({opacity: 0.0}, 1000);
            $('#compila').animate({opacity: 0.0}, 1000);
            $('#risultati').animate({opacity: 1.0}, 1000, function() {
                $('#risultati').addClass('visibile');
            });

            $('#1').append(risposte[0] + "<br/>Risposa corretta: " + "<?php echo $soluzioni[0]; ?>");
            $('#2').append(risposte[1]+ "<br/>Risposa corretta: " + "<?php echo $soluzioni[1]; ?>");
            $('#3').append(risposte[2]+ "<br/>Risposa corretta: " + "<?php echo $soluzioni[2]; ?>");
            $('#4').append(risposte[3]+ "<br/>Risposa corretta: " + "<?php echo $soluzioni[3]; ?>");
            $('#5').append(risposte[4]+ "<br/>Risposa corretta: " + "<?php echo $soluzioni[4]; ?>");
            $('#6').append(risposte[5]+ "<br/>Risposa corretta: " + "<?php echo $soluzioni[5]; ?>");
            $('#7').append(risposte[6]+ "<br/>Risposa corretta: " + "<?php echo $soluzioni[6]; ?>");
            $('#8').append(risposte[7]+ "<br/>Risposa corretta: " + "<?php echo $soluzioni[7]; ?>");
            $('#9').append(risposte[8]+ "<br/>Risposa corretta: " + "<?php echo $soluzioni[8]; ?>");
            $('#10').append(risposte[9]+ "<br/>Risposa corretta: " + "<?php echo $soluzioni[9]; ?>");
        }

    </script> 
```

这是带有按钮的表单：

```
 <form id="compila">
                <input id="enterTxt" class="okText" type="text" name="nome" />
                <input id="enterButt" class="okIcon" type="Button" value="ok" onClick="conferma(this.form)">
            </form> 
```

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T19:43:29.947

您必须`.preventDefault()`在发送表单的函数中使用事件。

[文档](http://api.jquery.com/event.preventDefault/)

或仅使用：

```
$("#compila").submit(function() {
    conferma(this);
    return false;
}); 
```

我的答案使用 JQuery。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-09T19:35:41.373

将您的函数绑定到 form.submit() 而不是 button.click

# css - 对齐 ul 标签中的中心菜单选项

> ID：12342263
> 
> 赞同：0
> 
> 时间：2012-09-09T19:32:15.217
> 
> 标签：css, html, menu, html-lists

我想居中对齐菜单，我尝试使用 text-align 但仍然没有结果

以下是html代码：

```
<div id="menu" class="clearfix">
  <ul>
    <li><a href="{$base_url}/index.php">HOME</a></li>
    <li><a href="{$base_url}/recent/">WATCH</a></li>
    <li><a href="{$base_url}/tags/">TAGS</a></li>
    <li><a href="{$base_url}/channels/">CHANNELS</a></li>
  </ul>
  <br style="clear:both">
</div> 
```

使用的css：

```
#menu {
  width: 100%;
  margin-bottom: 2em;
  margin-top: 5px;
  border-top: 1px solid #333;
  border-bottom: 1px solid #515152;
  text-align: center;
  background-image: url("./images/menu.gif");
}

#menu ul {
  font: bold 11px Arial;
  margin: 0px;
  padding: 0px;
  list-style: none;
}

#menu li {
  float: left;
  display: inline;
  background-color: black;
} 
```

有什么建议么？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T19:35:02.560

你`float:left`在`li`. 把这条线拿出来：

```
#menu li {
  display: inline;
  background-color: black;
} 
```

由于您不再需要浮动，您也可以摆脱它，`<br style="clear:both">`因为它现在只会在菜单下方放置一个空行。

[这是有关如何正确使用 float](http://www.tizag.com/cssT/float.php)的教程。

> 浮动通常用于将图像推到一侧或另一侧，同时让段落的文本环绕它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T19:46:12.343

我相信您正在尝试使用 text-align:center 将 #menu 标记的内容居中。这行不通，因为你里面有'ul'。我要做的是从 #menu 标记中删除 text-align:center 。

然后在“#menu ul”标签中添加：

```
margin: 0 auto; /* this will center the UL, but needs to be used with a width set */
width: 500px; /* change this to the width you desire */ 
```

为了使块级元素在页面上居中，您需要提供一个小于嵌套它的父元素宽度的宽度，然后将左侧和右侧的边距设置为自动。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-09T19:39:42.293

放

```
 #menu ul{
   text-align:center;
 } 
```

然后设置

```
#menu li{
  margin:0px auto;
} 
```

这会将顶部和底部边距保留为 0px，但会自动检测左右边距并使它们相等并居中。

另外，删除

```
float:left; 
```

从

```
#menu li 
```

# java - java - 如何在 GUI 中反映长期运行的工作流程？

> ID：12342264
> 
> 赞同：1
> 
> 时间：2012-09-09T19:32:35.833
> 
> 标签：java, python, swing, user-interface, event-dispatch-thread

我有一个最终导致部署某些东西的功能工作流程。步骤如下：

1.  运行 python 脚本会产生一些输出。

2.  运行一个 bash 脚本，将此输出复制到给定位置

3.  运行一个运行 java 程序的 bash 脚本（取决于 1,2 的输出）（运行 make 需要几个小时）

4.  在此输出上运行另一个 bash 脚本 - 最后一步

我希望能够从提供一组参数的 GUI 启动此工作流程。

然后，我希望能够获得每个步骤的状态报告——以便运行用户知道当前正在运行哪个步骤。

这里的主要问题是每个步骤都可能需要很长时间才能完成。我在 Java 中开发 GUI 的经验是有限的。

关于我应该去的方向有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T19:40:58.670

如果你真的想用 Java 写这个，那么你应该尝试找到一个好的向导库。有关详细信息，请参阅[此](https://stackoverflow.com/questions/88889/recommend-a-java-wizard-library)问题。

然后，如果你的脚本有可能提供一些反馈，比如操作完成的百分比，那么你可以`JProgressBar`独立地为每个步骤提供一个反馈，并为用户提供一个整体的反馈，以向用户展示在任何时候完成了多少工作。

# c++ - GDB：仅当先前的中断在 func2 上时才在 func1 上中断

> ID：12342271
> 
> 赞同：5
> 
> 时间：2012-09-09T19:33:11.280
> 
> 标签：c++, c, gdb

我有两个函数，`func1`并且`func2`，每个函数都有一个断点集。

`func2`如果前一个断点命中是，是否可以让 GDB 在断点处停止`func1`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T19:51:28.140

最好的方法是在断点中使用命令。

当命中两个断点时，您可以指示 GDB 执行某些命令（例如，递增计数器）。根据这些变量/标志的计数有条件地停止执行。

我在[这个链接](http://blog.timac.org/?p=118)上找到了这个信息。详情请参阅相同内容。这篇文章写得很好，有适当的例子。希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-10-21T07:10:04.443

让一个断点设置另一个断点。为避免 gdb spaghetti 使用`define`创建函数，建议使用。

# 主文件

```
int c1=0, c2=0;

void func1(){
    c1++;
}

void func2(){
    c2++;
}

int main(){

    // we shouldn't see a breakpoint here
    for(int i=0; i < 5; i++)
        func1();

    func2();

    // get a breakpoint
    func1();

    return 0;
} 
```

# 编译并运行 gdb

```
clang++ main.cpp -o main.exe -g
gdb --args ./main.exe 
```

# gdb 命令

```
break func2
commands
    break func1
    # run a few commands when we hit func1()
    commands
    print c1
    backtrace
    end
    # continue to func1() breakpoint
    continue
end
run 
```

# c# - 共享变量并将文本框数据放入数组

> ID：12342280
> 
> 赞同：1
> 
> 时间：2012-09-09T19:34:33.650
> 
> 标签：c#, asp.net

我对这个主题很陌生，很迷茫。我的网站上有一个文本框。*输入到文本框*的数据将被*放入一个数组*中，并且*计数器会增加*。一旦*计数器达到 5*，您*就不能*向数组中添加更多。

将有一个按钮显示输入到数组中的所有名称，这也清除了数组和计数器。

我不知道如何在 C# 中排序类和方法。我将按钮放在主类中，以便我可以在它们之间共享变量，但是我无法访问文本框。

那里有一些代码，因为我试图弄清楚这一点，但它可能不属于这里。代码也相当简单，因为我只是想弄清楚。任何帮助表示赞赏。

```
<script runat="server"> 

public partial class Arrays
{
  private int Counter = 0;    

  protected void btnEnter_Click(object sender, EventArgs e)
  {
    Button btn = (Button)sender;
    btn.Text = (Int32.Parse(btn.Text) + 1).ToString();
    Label1.Text = "Enter Another student's name";
  }

  public void btnEnter_Click2(object sender, EventArgs e)
  {
     Label1.Text = "Enter a student's name ";        
  }
}

</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T20:05:23.360

首先，您需要关注如何将以前的数据保留在页面上。

从 Post 到 Post，您可以将它们存储在`ViewState`ether 上的`control`.

正如我所见，在 上保存了以前的状态`btn.Text`，这不是很酷，但可以接受。

```
protected void btnEnter_Click(object sender, EventArgs e)
{
    Button btn = (Button)sender;
     // the btn.Text keeps the number of post backs (enters of name).
    var Counter = Int32.Parse(btn.Text);
    Counter++;

    if(Counter >= 5)
    {   
        Label1.Text = "No more studen's names please";
    }
    else
    {    
        btn.Text = Counter.ToString();          
        Label1.Text = "Enter Another student's name";
    }
} 
```

如您所见，是“存储”柜台中的`btn.Text`一个使用它知道许多帖子已经完成。

您可以使用某种方式来存储输入的名称。我更喜欢将它保存在视图状态中，我可以用这段代码来做到这一点。

```
const string cArrNameConst = "cArr_cnst";

public string[] cArrKeepNames
{
    get
    {
        if (!(ViewState[cArrNameConst] is string[]))
        {
            // need to fix the memory and added to viewstate
            ViewState[cArrNameConst] = new string[5];
        }

        return (string[])ViewState[cArrNameConst];
    }
} 
```

并且使用该代码，您可以在代码上从 0->4 添加任何名称，`cArrKeepNames[]`并在回发后拥有它，因为它保持在页面的视图状态。

```
protected void btnEnter_Click(object sender, EventArgs e)
{
    Button btn = (Button)sender;
    var Counter = Int32.Parse(btn.Text);

    // here you save the name in the array
    //  an magically is saved inside the page on viewstates data
    //  and you can have it anywhere on code behind.
    cArrKeepNames[Counter] = NameFromEditor.Text;

    Counter++;
    if(Counter >= 5)
    {   
        btn.Enable = false;
        Label1.Text = "No more studen's names please";
    }
    else
    {  
        btn.Text = Counter.ToString();

        Label1.Text = "Enter Another student's name";
    }
} 
```

像这样的简单代码可以随时读取数组：

```
foreach (var One in cArrKeepNames)
    txtOutput.Text += "<br>" + One; 
```

我对其进行了测试并且运行良好。

# php - 即使 cookie 被加密，CodeIgniter 数据库会话是否更安全？

> ID：12342283
> 
> 赞同：1
> 
> 时间：2012-09-09T19:35:44.103
> 
> 标签：php, codeigniter, session, cookies

## 问题 1

基本上，我要问的是：`$config['sess_use_database'] = TRUE;`即使更安全`$config['sess_encrypt_cookie'] = TRUE;`？

我一直在博客、Stackoverflow 帖子，甚至是声称`$config['sess_use_database'] = TRUE;`更安全的 CI Docs 上磕磕绊绊，但如果 cookie 被加密，从安全角度来看，存储位置（在 cookie 或数据库中）似乎`user_data`并不重要。

## 问题2

如果您设置`$config['sess_encrypt_cookie'] = FALSE;`并检查 cookie，无论 的值如何，都会`$config['sess_use_database']`在 cookie 的末尾卡住一个（似乎是 md5）哈希 - 这是一个示例：

```
a:4{
  s:10:"session_id";
  s:32:"a2caac03fc72d709ac280540a09d8ed7";
  s:10:"ip_address";
  s:9:"127.0.0.1";
  s:10:"user_agent";
  s:100:"Mozilla/5.0 (X11; Linux i686) AppleWebKit/537.4 (KHTML, like Gecko) Chrome/22.0.1229.14 Safari/537.4";
  s:13:"last_activity";
  i:1347228760;
}7aa8ebe3fc462bd86c0c0544a969cbda 
```

有什么意义`7aa8ebe3fc462bd86c0c0544a969cbda`？它从哪里来的？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-09T20:31:52.443

**问题 1**
这取决于您认为什么是安全的。

您设置的自定义数据将存储在数据库中，但 session_id、ip_address、user_agent 和 last_activity 仍将存储在 cookie 中。如果您认为这些数据会受到影响，那么答案是肯定的。否则答案是否定的。

**问题 2**
它是包含会话数据和加密密钥的序列化数据的哈希值。这用于确保 cookie 数据未被篡改。

# android - 画布缩放保留像素大小

> ID：12342291
> 
> 赞同：1
> 
> 时间：2012-09-09T19:37:19.143
> 
> 标签：android, image-processing, scaling

我正在尝试对相机预览进行一些图像处理，但是在采样时间图像下太慢了，并且在较小的范围内进行处理。然后我将处理后的（阈值）图像覆盖在预览上。我的问题是，当我缩放较小的图像以适应相机预览时，像素保持相同的大小......由于缩放，我想看到一些大像素，但我不能。

这是 XML：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:keepScreenOn="true"
    android:orientation="vertical" >

    <SurfaceView
        android:id="@+id/svPreview"
        android:layout_width="match_parent"
        android:layout_height="match_parent" />

    <SurfaceView
        android:id="@+id/svOverlay"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:adjustViewBounds="true" />
</RelativeLayout> 
```

以及获取相机预览图像字节并进行阈值处理的线程：

```
class PathThread extends Thread implements PreviewCallback
{
    private final int width, height;
    private final SurfaceHolder holder;
    private Canvas overlayCanvas;
    private int samples = 8;

    final private float scale;
    final private Paint red, blue, yellow;

    public PathThread(int canvasWidth, int canvasHeight, SurfaceView canvasView)
    {
        // This is how much smaller image I want
        width = canvasWidth / samples;
        height = canvasHeight / samples;
        holder = canvasView.getHolder();

        // Scale to fit the camera preview SurfaceView
        scale = (float) canvasView.getWidth() / height;

        // No smoothing when scaling please
        yellow = new Paint();
        yellow.setColor(Color.parseColor("#ffbb33"));
        yellow.setAntiAlias(false);  
        yellow.setDither(false);  
        yellow.setFilterBitmap(false);
    }

    public void onPreviewFrame(byte[] data, Camera camera)
    {
        overlayCanvas = holder.lockCanvas();
        overlayCanvas.drawColor(0, Mode.CLEAR);
        overlayCanvas.scale(scale, scale);

        // Do the image processing and make a [samples] times smaller image
        // Boring, pseudo-optimized, per-pixel thresholding process

        holder.unlockCanvasAndPost(overlayCanvas);
    }
} 
```

这是结果：

![缩放的叠加像素具有原始大小](../Images/10674b26a63779202f6a559fe603f3ca.png)

我知道它有点偏移，但这是我的问题中最少的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T21:40:22.753

# 解决方案：

经过 2 多天的搜索，它很简单，但不是很容易找到/理解：

对于我绘制的 SurfaceView 的持有者，我不得不称之为：

```
canvasHolder.setFixedSize(width, height); 
```

我尝试了不同的值并找到了我需要的东西。这使得*大像素*。

# c++ - 在 shared_ptr 的复制构造函数内部

> ID：12342292
> 
> 赞同：2
> 
> 时间：2012-09-09T19:37:21.780
> 
> 标签：c++, c++11, shared-ptr, copy-constructor

我对 shared_ptr 复制构造函数有些困惑。请考虑以下两行：

1.  它是对 shared_ptr 对象的“常量”引用，它被传递给复制构造函数，以便初始化另一个 shared_ptr 对象。

2.  复制构造函数还应该增加一个成员数据 - “引用计数器” - 它也在所有 shared_ptr 对象之间共享，因为它是一个指向某个整数的引用/指针，告诉每个 shared_ptr 对象其中有多少仍然存在活。

但是，如果复制构造函数试图增加引用计数成员数据，它不会“击中”通过引用传递的 shared_ptr 的常量吗？或者，复制构造函数是否在内部使用 const_cast 运算符来临时删除参数的 const 性？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-09T20:11:25.900

您遇到的现象对于共享指针来说并不特殊。这是一个典型的原始示例：

```
struct Foo
{
    int * p;
    Foo() : p(new int(1)) { }
};

void f(Foo const & x)  // <-- const...?!?
{
    *x.p = 12;         // ...but this is fine!
} 
```

里面确实有`x.p`类型，但*不是*！换句话说，你不能改变，但你*可以*改变。`int * const``f`*`int const * const``x.p`*`*x.p`**

 **这本质上是共享指针复制构造函数中发生的事情（其中`*p`扮演引用计数器的角色）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-10T00:51:47.013

尽管其他答案是正确的，但它们的应用方式可能不会立即显现出来。我们所拥有的是这样的：

```
template <class T>
struct shared_ptr_internal {
    T *data;
    size_t refs;
};

template <class T>
class shared_ptr {
    shared_ptr_internal<T> *ptr;
public:
    shared_ptr(shared_ptr const &p) { 
        ptr = p->ptr;
        ++(ptr->refs);
    }
    // ...
}; 
```

这里重要的一点是 shared_ptr 只包含一个指向*包含*引用计数的结构的指针。事实上，它`shared_ptr`本身`const`并不影响它指向的对象（我称之为`shared_ptr_internal`）。因此，即使/如果`shared_ptr`本身是`const`，操作引用计数也不是问题（并且不需要 a`const_cast`或`mutable`两者之一）。

我可能应该补充一点，实际上，您的代码结构可能与此有所不同——特别是，您通常会将更多（全部？）代码用于操作引用计数到 shared_ptr_internal （或任何您决定调用它）本身，而不是与父`shared_ptr`类中的那些混淆。

您通常还会支持`weak_ptr`s. 为此，您需要对`weak_ptr`指向同一`shared_ptr_internal`对象的 s 数量进行第二个引用计数。当`shared_ptr`引用计数变为 0 时销毁最终的指针对象，但仅当引用计数*和*`shared_ptr_internal`引用计数都变为 0 时才销毁该对象。`shared_ptr` *`weak_ptr`*

 ** * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-09T19:40:40.213

它使用不继承参数竞争的内部指针，例如：

```
(*const_ref.member)++; 
```

已验证。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-09T20:13:26.120

指针是常量，但不是指向的值。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-10T11:30:56.273

哇，这真是令人大开眼界！感谢大家，我能够确定混淆的根源，因为我总是假设以下内容（“a”包含“b”的地址）都是等价的。

```
int const  *a = &b;    // option1
const int  *a = &b;    // option2
int * const a = &b;    // option3 
```

但是我错了！只有前两个选项是等效的。第三个完全不同。

使用 option1 或 option2，“a”可以指向它想要的任何东西，但不能更改它所指向的内容。

使用选项 3，一旦确定“a”指向什么，它就不能指向其他任何东西。但是可以自由更改它所指向的内容。因此，shared_ptr 使用 option3 是有道理的。***

# java - Morphia 中泛型的使用

> ID：12342295
> 
> 赞同：0
> 
> 时间：2012-09-09T19:38:02.810
> 
> 标签：java, generics, morphia

尽管我将此问题标记为 Morphia 问题，但我认为它更笼统，但无论如何，感谢您的帮助。

我有**IUser**界面，我无法控制它：

```
public interface IUser<T> {
    ...
    public String getFirstName();
    ...
} 
```

我也有这个接口的实现**用户**（Morphia 实体）：

```
@Entity
public class User implements IUser<ObjectId> {
    @Id
    private ObjectId id;

    @Property
    private String firstName;

    public String getFirstName() {
        return this.firstName;
    }
    ...
} 
```

当 Morphia 要求映射类时，我提供 User.class，因为这是 Morphia 实体。因此，当我扩展 BasicDAO 时，我提供**User**和**ObjectId**作为类型：

```
public class UserDAO extends MongoDAO<User, ObjectId> {
    public List<IUser<ObjectId>> getUsers(String id) {
        return ds.find(IUser.class, Mapper.ID_KEY, new ObjectId(id)).asList(); 
    }
} 
```

现在，问题出现在**getUsers**方法中。如您所见，我想继续使用这个类之外的接口；这就是为什么我期望`List<IUser<ObjectId>>`作为返回类型。

**ds.find(...)**方法的第一个参数是一个`Class<T>`类型，所以我提供了 IUser.class。但是，正因为如此，我不能再期待`List<IUser<ObjectId>>`结果了，只是`List<IUser>`。这样，我就失去了 IUser 的类型。是否有可能强制此 Morphia 的方法返回参数化 IUser 对象的列表？

提前谢谢你，兹拉特科

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T20:09:23.050

有几个选项。

Guava、Guice 和类似库所做的是接受一个[`TypeToken`](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/reflect/TypeToken.html)利用匿名内部类来具体化类型的 a。它看起来像这样：

```
return ds.find(new TypeToken<IUser<ObjectId>>(){}, ...); 
```

但显然这不是一个真正的选择，因为您无法更改库。然而，这是我认为正确的解决方案。

第二个选项是只强制转换类以包含泛型参数。这会导致未经检查的警告，但是需要抑制或忽略该警告：

```
@SuppressWarnings({"unchecked"}) 
Class<IUser<ObjectId>> userClass = (Class<IUser<ObjectId>>) (Object) IUser.class;
return ds.find(userClass, ...); 
```

## 编辑：

应该真正注意的是，上面的建议实际上并不比在返回之前将整个列表从 a`List<IUser>`转换为 a更好。`List<IUser<ObjectID>>`两者都需要抑制警告。

# c# - WPF中的分组

> ID：12342302
> 
> 赞同：0
> 
> 时间：2012-09-09T19:39:40.200
> 
> 标签：c#, wpf, datagrid, grouping

我正在尝试修改现有代码，该代码允许按行添加文章并在需要的地方删除它们，问题是我试图找到一种方法来对同一类别的文章进行分组。因此，当用户添加 DVD 类别的新文章时，它将直接添加到该类别中（我尝试从这里获取一些想法，但没有成功：http: [//msdn.microsoft.com/en-us/library /ff407126.aspx](http://msdn.microsoft.com/en-us/library/ff407126.aspx)

这是数据背后的代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.ComponentModel;
using System.Collections.ObjectModel;
namespace WpfDataGridWithDataTable
{
    public class Article
    {
        public  Article ()
        {

        }
        private int  _modelNumber;
        public int ModelNumber
        {
            get { return _modelNumber; }
            set { _modelNumber = value; OnPropertyChanged("ModelNumber"); }
        }

        private string _modelName;
        public string ModelName
        {
            get { return _modelName; }
            set { _modelName = value; OnPropertyChanged("ModelName"); }
        }

        private decimal  _unitCost;
        public decimal UnitCost
        {
            get { return _unitCost; }
            set { _unitCost = value; OnPropertyChanged("UnitCost"); }
        }

        private string  _description ;
        public string Description
        {
            get { return _description; }
            set { _description = value; OnPropertyChanged("Description"); }
        }

        #region INotifyPropertyChanged Membres

        public event PropertyChangedEventHandler PropertyChanged;
        private void OnPropertyChanged(string propName)
        {
            if (PropertyChanged != null)
            {
                PropertyChanged(this, new PropertyChangedEventArgs(propName));
            }
        }
        #endregion
    }
    public class ListArticles : ObservableCollection<Article > 
    {
        public Article a;
        public ListArticles()
        {

                a = new Article();
                this.Add(a);

        }

    }

} 
```

这是 XAML 代码：

```
<Window x:Class="WpfDataGridWithDataTable.Window1"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:local="clr-namespace:WpfDataGridWithDataTable"
        Title="Window1" Height="300" Width="300">
    <Grid
        Name="gridPanel">
        <Grid.RowDefinitions>
            <RowDefinition Height="*"></RowDefinition>
            <RowDefinition Height="40"></RowDefinition>
        </Grid.RowDefinitions>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*"></ColumnDefinition>
            <ColumnDefinition Width="*"></ColumnDefinition>
        </Grid.ColumnDefinitions>
        <DataGrid 
            Grid.Column="0"
            Name="dataGrid1"  
            AutoGenerateColumns="True"  
            CanUserAddRows="True" 
            CanUserDeleteRows="True"
            CanUserResizeColumns="True"
            IsSynchronizedWithCurrentItem="True"
            ItemsSource="{Binding}"/>
        <ListBox 
            Grid.Column="1"
            Name="listBox1" 
            IsSynchronizedWithCurrentItem="True"
            ItemsSource="{Binding}">
            <ListBox.ItemTemplate>
                <DataTemplate DataType="{x:Type local:Article}">
                    <StackPanel    
                        Orientation="Horizontal">
                        <TextBlock 
                            Width="100"
                            Margin="10"  
                            Background="DarkBlue"
                            Foreground="White"
                            FontSize="14"
                            Text="{Binding ModelNumber}"/>
                        <TextBlock 
                            Width="100"
                            Margin="10" 
                            Background="DarkBlue"
                            Foreground="White"
                            FontSize="14"
                            Text="{Binding ModelName}"/>
                    </StackPanel>
                </DataTemplate>
            </ListBox.ItemTemplate>
        </ListBox>
            <Button 
                Grid.Row="1"
                Grid.Column="0"
                HorizontalAlignment="Left"
                Width="100"
                Name="btnAdd"
                Content="Add Item"
                Click="btnAdd_Click">
            </Button>
            <Button
                Grid.Row="1"
                Grid.Column="1"
                HorizontalAlignment="Right"
                Width="100"
                Name="btnDelete"
                Content="Delete Item"
                Click="btnDelete_Click" >
            </Button>
    </Grid>
</Window> 
```

以及表单背后的代码：

```
namespace WpfDataGridWithDataTable
{
    /// <summary>
    /// Logique d'interaction pour Window1.xaml
    /// </summary>
    public partial class Window1 : Window
    {
        private ListArticles myList;
        public Window1()
        {
            InitializeComponent();
            myList = new ListArticles();

            this.DataContext = myList;

        }

        private void btnAdd_Click(object sender, RoutedEventArgs e)
        {
            myList.Add(new Article());
        }

        private void btnDelete_Click(object sender, RoutedEventArgs e)
        {
            myList.Remove(this.dataGrid1.SelectedItem as Article);
        }

    }
} 
```

感谢您的回答。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T20:24:57.257

我终于解决了这个问题，但我不知道为什么它没有工作。将数据网格与 CollectionViewSource 绑定时，问题位于 XAML 代码中。我放：

```
 <DataGrid Name="dataGrid1"  
            AutoGenerateColumns="True"  
            CanUserAddRows="True" 
            CanUserDeleteRows="True"
            CanUserResizeColumns="True"
            IsSynchronizedWithCurrentItem="True"
            Grid.ColumnSpan="2" 
            ItemsSource="{Binding Source={StaticResource cvsListArticles}}"> 
```

最后一行是问题，当我简单地`ItemsSource="{Binding}"`说它终于起作用了。

以下是那些可能有同样问题并希望从中受益的人的代码：

数据背后的代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.ComponentModel;
using System.Collections.ObjectModel;
namespace WpfDataGridWithDataTable
{
    public class Article
    {
        public Article()
        {

        }
        private int _modelNumber;
        public int ModelNumber
        {
            get { return _modelNumber; }
            set { _modelNumber = value; OnPropertyChanged("ModelNumber"); }
        }

        private string _modelName;
        public string ModelName
        {
            get { return _modelName; }
            set { _modelName = value; OnPropertyChanged("ModelName"); }
        }

        private decimal _unitCost;
        public decimal UnitCost
        {
            get { return _unitCost; }
            set { _unitCost = value; OnPropertyChanged("UnitCost"); }
        }

        private string _description;
        public string Description
        {
            get { return _description; }
            set { _description = value; OnPropertyChanged("Description"); }
        }

        #region INotifyPropertyChanged Membres

        public event PropertyChangedEventHandler PropertyChanged;
        private void OnPropertyChanged(string propName)
        {
            if (PropertyChanged != null)
            {
                PropertyChanged(this, new PropertyChangedEventArgs(propName));
            }
        }
        #endregion
    }
    public class ListArticles : ObservableCollection<Article>
    {
        public Article a;
        public ListArticles()
        {
            a = new Article();
            this.Add(a);

        }

    }

} 
```

XAML 代码：

```
<Window x:Class="WpfDataGridWithDataTable.Window1"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:local="clr-namespace:WpfApplication18"
        Title="Window1" mc:Ignorable="d" xmlns:d="http://schemas.microsoft.com/expression/blend/2008" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" Height="480" Width="760">

     <Window.Resources>
            <CollectionViewSource x:Key="cvsListArticles" Source="Article">

            <CollectionViewSource.GroupDescriptions>
                <PropertyGroupDescription PropertyName="ModelName"/>
            </CollectionViewSource.GroupDescriptions>
            </CollectionViewSource>
        </Window.Resources> 

    <Grid
        Name="gridPanel">
        <Grid.RowDefinitions>
            <RowDefinition Height="*"></RowDefinition>
            <RowDefinition Height="40"></RowDefinition>
        </Grid.RowDefinitions>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*"></ColumnDefinition>
            <ColumnDefinition Width="*"></ColumnDefinition>
        </Grid.ColumnDefinitions>
        <DataGrid Name="dataGrid1"  
            AutoGenerateColumns="True"  
            CanUserAddRows="True" 
            CanUserDeleteRows="True"
            CanUserResizeColumns="True"
            IsSynchronizedWithCurrentItem="True"
            ItemsSource="{Binding}" Grid.ColumnSpan="2" >

            <DataGrid.GroupStyle>

                <GroupStyle>
                    <GroupStyle.ContainerStyle>
                        <Style TargetType="{x:Type GroupItem}">
                            <Setter Property="Margin" Value="0,0,0,5"/>
                            <Setter Property="Template">
                                <Setter.Value>
                                    <ControlTemplate TargetType="{x:Type GroupItem}">
                                        <Expander IsExpanded="True" Background="#FF112255" BorderBrush="#FF002255" Foreground="#FFEEEEEE" BorderThickness="1,1,1,5">
                                            <Expander.Header>
                                                <DockPanel>
                                                    <TextBlock FontWeight="Bold" Text="{Binding Path=Name}" Margin="5,0,0,0" Width="100"/>
                                                </DockPanel>
                                            </Expander.Header>
                                            <Expander.Content>
                                                <ItemsPresenter />
                                            </Expander.Content>
                                        </Expander>
                                    </ControlTemplate>
                                </Setter.Value>
                            </Setter>
                        </Style>
                    </GroupStyle.ContainerStyle>
                </GroupStyle>
            </DataGrid.GroupStyle>
        </DataGrid>

        <Button 
                Grid.Row="1"
                Grid.Column="0"
                HorizontalAlignment="Left"
                Width="100"
                Name="btnAdd"
                Content="Add Item"
                Click="btnAdd_Click">
        </Button>
        <Button
                Grid.Row="1"
                Grid.Column="1"
                HorizontalAlignment="Right"
                Width="100"
                Name="btnDelete"
                Content="Delete Item"
                Click="btnDelete_Click" >
        </Button>
        <Button Content="Group" Grid.ColumnSpan="2" Grid.Row="1" Height="23" HorizontalAlignment="Left" Margin="294,5,0,0" Name="GroupButton" VerticalAlignment="Top" Width="145" Click="GroupButton_Click" />
    </Grid>
</Window> 
```

表单背后的代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Data;
using System.Windows.Documents;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Imaging;
using System.Windows.Shapes;
using System.Collections.ObjectModel;
using System.ComponentModel;

namespace WpfDataGridWithDataTable
{

    public partial class Window1 : Window
    {
        private ListArticles myList;
        public Window1()
        {
            InitializeComponent();

            myList = new ListArticles();

            this.DataContext = myList;

        }

        private void btnAdd_Click(object sender, RoutedEventArgs e)
        {
            myList.Add(new Article());
        }

        private void btnDelete_Click(object sender, RoutedEventArgs e)
        {
            myList.Remove(this.dataGrid1.SelectedItem as Article);
        }

        private void GroupButton_Click(object sender, RoutedEventArgs e)
        {
            ICollectionView cvsListArticles = CollectionViewSource.GetDefaultView(dataGrid1.ItemsSource);
            if (cvsListArticles != null && cvsListArticles.CanGroup == true)
            {
                cvsListArticles.GroupDescriptions.Clear();
                cvsListArticles.GroupDescriptions.Add(new PropertyGroupDescription("ModelName"));
            }
        }

    }
} 
```

# ruby - Dir.entries(目录).reject{|f| [".", "..", "images", ".zip"].include? F}

> ID：12342307
> 
> 赞同：2
> 
> 时间：2012-09-09T19:40:22.543
> 
> 标签：ruby, dir

```
 dirs=Dir.entries(directory).reject{|f| [".", "..", "images", ".zip"].include? f} 
```

我需要避免在“目录”中的“dirs”中包含一个 zip 文件，这不是正确的，如果我不知道 zip 文件的名称，正确的语法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T19:56:50.943

怎么样`Dir.entries(directory).reject { |f| f =~ /\.$|images|\.zip/ }`？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T19:48:05.183

```
Dir.entries(directory).reject{|f| [".", "..", "images"].include? f}.reject{|f|f=~%r(\.(?i:)(?:zip)$)} 
```

这可以做得更好吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-09T19:56:18.713

您可以在拒绝呼叫中使用正则表达式：

```
Dir.entries(directory).reject {|f| /\A(\.\.?|images|.*\.zip)\Z =~ f} 
```

它有点难看，但它允许您使用通配符匹配。希望有帮助！

# delphi - 调用 TObject.GetInterface 自由对象

> ID：12342313
> 
> 赞同：2
> 
> 时间：2012-09-09T19:41:12.570
> 
> 标签：delphi

我正在尝试执行这样的代码：

```
IFoo = Interface
   procedure DoFoo;
end;

TFoo = class (TInterfaceObject, IFoo)
  .....
   procedure DoFoo;
end;

TFoo2 = class (TInterfaceObject)
  ......
end;

TGenClass = class
  class function DoSomething<T: class, cronstructor>: T;
end;

class function TGenClass.DoSomething<T>: T;
var Obj: T;
    Foo: IFoo;
begin
   Obj := T.Cretae;
   if Obj.GetInterfaceEntry(IFoo) <> nil then 
   begin
     Obj.GetInterface(IFoo, Foo);
     Foo.DoFoo;
   end;
   result := Obj;
end; 
......
var f: TFoo;
    f2: TFoo2; 
begin
  f:= TGenClass.DoSomeThing<TFoo>;
  f2:= TGenClass.DoSomeThing<TFoo2>;
  f2.free;
  f.free;
end; 
```

当我执行此代码时， f.free 引发异常，因为我想它已经是免费的，因为如果我评论这行

```
Obj.GetInterface(IFoo, Foo);
Foo.DoFoo; 
```

这行得通。

¿ 如何在没有自由对象的情况下执行 IFoo 接口？

谢谢。

添加：

谢谢大家。我明白。

我试图以相同的结果返回 IFoo。我的问题是 T 不能是 TInterfacedObject。我尝试转换的 Java 代码是：

```
public  void dataIterate(int recNo, ResultSet data) throws SQLException {

    try {

        Constructor c = itemClass.getDeclaredConstructor();
        c.setAccessible(true);
        Object item = c.newInstance();
        if (item instanceof CustomInitialize) ((CustomInitialize)item).initialize(data);
        else {

            if (metadata == null ) metadata = data.getMetaData();
            for (int i=1; i<= metadata.getColumnCount(); i++)
                assignProperty(itemClass, item, "set"+metadata.getColumnName(i).toLowerCase(), data.getObject(i));

        }
        add((E)item);

    } catch (Exception ex) {
        throw new SQLDataException(ex);
    }
   .......... 
```

德尔福示例代码：

```
program Project4;

{$APPTYPE CONSOLE}

{$R*.res}

uses
   System.SysUtils,  System.Rtti;

type
  IFoo = Interface
     ['{F2D87AE6-1956-4B82-A28F-DC011C529849}']
     procedure DoFoo;
  end;

  TFoo = class (TInterfacedObject, IFoo)
  private
    FName: String;
  public
     procedure DoFoo;
     property Name: String Read FName write FName;
  end;

  TFoo2 = class (TObject)
  private
    FName: String;
  published
      property Name: String Read FName write FName;
  end;

TGenClass = class
  class function DoSomething<T: class, constructor>: T;
end;

class function TGenClass.DoSomething<T>: T;
var Obj: T;
    Foo: IFoo;
    Ap: TRttiProperty;
    Ctx: TRttiContext;
begin
   Obj := T.Create;
   if Obj.GetInterfaceEntry(IFoo) <> nil then
   begin
     Obj.GetInterface(IFoo, Foo);
     Foo.DoFoo;
   end;
   Ctx.GetType(TypeInfo(T)).GetProperty('Name').SetValue(TObject(Obj),'AName');
   result := Obj;
end;
{ TFoo }

procedure TFoo.DoFoo;
begin
  writeln('Foo executed.');
end;
var f: TFoo;
    f2:TFoo2;
begin
  try
    f:= TGenClass.DoSomeThing<TFoo>;
    f2:= TGenClass.DoSomeThing<TFoo2>;
    writeln(f2.Name);
    writeln(f.Name);   //<-- raise exception
    f.free;
    f2.Free;
    readln;

  except
    on E: Exception do
      Writeln(E.ClassName, ': ', E.Message);
  end; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-09T19:45:53.003

让我们看一下这段代码：

```
class function TGenClass.DoSomething<T>: T;
var Obj: T;
    Foo: IFoo;
begin
   Obj := T.Create;
   if Obj.GetInterfaceEntry(IFoo) <> nil then 
   begin
     Obj.GetInterface(IFoo, Foo);
     Foo.DoFoo;
   end;
   result := Obj;
end; 
```

之后`Obj := T.Create`，对象的引用计数为零，因为还没有接口变量引用它。然后你调用`GetInterface`并在`Foo`. 所以对象现在的引用计数为 1。然后函数返回并`Foo`超出范围。这将引用计数减少到 0，因此对象被释放。

当您使用 时`TInterfacedObject`，您必须始终持有一个接口变量。这样引用计数就可以管理对象的生命。在这种情况下，您有混合的对象引用和接口变量，这总是会导致痛苦和痛苦。

我真的不能就你的代码应该是什么样子给你建议，因为我不知道你的问题是什么。我所做的只是为您解释这种行为。也许 `DoSomething`应该是回归`IFoo`而不是`T`。或者您可能需要停止使用引用计数生命周期管理。从这里很难确定。

# emmet - 产生N个元素的Zen编码间隔

> ID：12342317
> 
> 赞同：1
> 
> 时间：2012-09-09T19:41:45.650
> 
> 标签：emmet

这是一个关于 Zen Coding 的快速问题。如果：

```
div.foo-$*3 
```

产生这个：

```
<div class="foo-1"></div>
<div class="foo-2"></div>
<div class="foo-3"></div> 
```

例如，如果我想生成`.foo-27`until`.foo-245`怎么办？有没有办法以这种方式设置生成元素的间隔？当前版本的 Zen Coding 可以吗？我知道手动删除不必要的标签是一种方法，但是 Zen Coding 应该可以加快速度，对吧？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T11:38:19.737

目前，这是不可能的。由于这是非常具体的用例，您可以在[https://github.com/sergeche/zen-coding/issues填写问题](https://github.com/sergeche/zen-coding/issues)

如果它获得足够的选票，我可能会考虑升级此功能的语法。

# ruby-on-rails - 使用带有 Mongoid 的 Rails 表单助手

> ID：12342325
> 
> 赞同：0
> 
> 时间：2012-09-09T19:42:50.480
> 
> 标签：ruby-on-rails, ruby-on-rails-3, mongoid

我正在尝试使用 Mongoid 作为 ORM 使用 MongoDB 构建一个新的 Rails 应用程序。身份验证由魔法宝石处理。

我的 Users#new 视图中出现以下错误。

`undefined method 'password_confirmation' for #<User:0x007feff2a23890>`

我的模型看起来像这样。

```
class User                                                                                                                                                              
 include Mongoid::Document                                                                                                                                             
 authenticates_with_sorcery!                                                                                                                                           

 attr_accessible :username, :email, :password, :password_confirmation                                                                                                  

 field :username                                                                                                                                                       
 field :email                                                                                                                                                          
 field :password                                                                                                                                                       
end 
```

`field`如果模型中没有每个字段的定义，我会收到此错误。该字段是一个虚拟字段，因此无论如何`password_confirmation`它都不应该有定义。`field`如何在表单助手中使用 Mongoid 中的动态和虚拟字段（在配置中设置为 true）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T19:47:22.850

只需添加：

```
attr_accessor :password_confirmation 
```

# objective-c - 不可见视图控制器的 uinavigationviewcontroller 行为

> ID：12342328
> 
> 赞同：0
> 
> 时间：2012-09-09T19:43:10.603
> 
> 标签：objective-c, uinavigationcontroller

如果我有当前显示 MyViewController "a" 的 UINavigationController 并且我推送 AnotherViewController "b" ，稍后如果我弹出 UINavigationController 我会得到 MyViewController "a" （正是那个 MyViewController，不是新的）。如何获取由 NavigationController 显示的 MyViewController 的新实例？只需推动 MyViewController “c”？ViewControllers 堆栈中仍然会有“a”（内存问题等）可以吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T19:49:49.833

对于您的 b 控制器，使用视图确实出现方法而不是 viewdidload。还尝试释放视图确实消失的任何内容。抱歉，如果这不是答案，但您的问题有点误导。

# wpf - 隐藏光标wpf WebBrowser控件？

> ID：12342329
> 
> 赞同：0
> 
> 时间：2012-09-09T19:43:12.307
> 
> 标签：wpf, internet-explorer

两者都不

```
<WebBrowser x:Name="wbMain" Cursor="None"></WebBrowser> 
```

也不

```
*{cursor:none} 
```

正在为我工​​作。我在网上找不到任何资源告诉我如何完成此操作。用例是一个运行全屏的应用程序，仅在设置完成后才能查看。

编辑：我忘了补充一点，在 IE9 浏览器中查看网站时，css 会按预期工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T19:54:58.217

我不知道这是一个好习惯还是坏习惯，但您可以添加 System.Windows.Forms 参考

然后

```
private void MouseEnter(object sender, MouseEventArgs e)
        {
            System.Windows.Forms.Cursor.Hide();
        }

        private void MouseLeave(object sender, MouseEventArgs e)
        {
            System.Windows.Forms.Cursor.Show();
        } 
```

在 web 浏览器控件中的 mouseEnter 表单示例上使用此代码

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-02-11T09:00:52.097

对于那些不喜欢添加 WinForms 参考的人，请尝试

```
[DllImport("user32.dll")]
static extern int ShowCursor(bool bShow); 
```

并在需要时调用 ShowCursor(false)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-09-06T15:02:20.760

在 app.cs 中

```
protected override void OnStartup(StartupEventArgs e)
{

    System.Windows.Forms.Cursor.Hide();

} 
```

# java - 在 XsltView 中获取 Spring MVC 模型属性

> ID：12342335
> 
> 赞同：-4
> 
> 时间：2012-09-09T19:43:39.307
> 
> 标签：java, xml, spring, xslt, spring-mvc

如何在 XsltView 中访问和处理模型属性 ( *model.setAttribute()* )？有这种可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T06:59:54.407

[Spring Reference](http://static.springsource.org/spring/docs/3.1.2.RELEASE/spring-framework-reference/html/view.html#view-xslt)中甚至还有一个示例：Chapter 17.5 XSLT

*我强烈建议在提问之前阅读参考资料。*

# java - 为什么在使用 Schema 验证 XML 时未验证数据类型？

> ID：12342339
> 
> 赞同：1
> 
> 时间：2012-09-09T19:44:27.840
> 
> 标签：java, xml, xsd, saxparser

这是 XML 模式：

```
<?xml version="1.0" encoding="utf-8"?>
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema">
  <xs:element name="id" type="xs:long" />
</xs:schema> 
```

经过一致性验证的 XML 文件：

```
<?xml version="1.0" ?>
<id>invalid_data</id> 
```

使用 XML 并应测试一致性的 Java 代码：

```
SAXParserFactory factory = SAXParserFactory.newInstance();
factory.setValidating(false);
SchemaFactory schemaFactory = SchemaFactory.newInstance(XMLConstants.W3C_XML_SCHEMA_NS_URI);
factory.setSchema(schemaFactory.newSchema(new File(xmlSchema)));
parser = factory.newSAXParser();
MySaxHandler handler = new MySaxHandler();
parser.parse(new File(xmlFile), handler); 
```

在调用此代码期间，NumberFormatException 会`characters`在`MySaxHandler`. MySaxHandler 还包含覆盖方法 warning、error 和 fatalError 但它们不会被执行。

我不希望抛出这个 NumberFormatException。我希望根据 Schema 验证数据类型。我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T07:36:25.147

我想知道这是否只是一个时间问题。在到达结束元素事件之前，模式验证器无法测试元素的内容，但是在到达结束元素事件*之前*将文本节点报告给 ContentHandler 。尝试在您的应用程序中屏蔽异常，以查看验证错误是否会在稍后报告。

# nhibernate - 使用 NHibernate 自定义 ADO.NET 数据提供程序

> ID：12342343
> 
> 赞同：0
> 
> 时间：2012-09-09T19:44:38.747
> 
> 标签：nhibernate, ado.net

我正在编写一个连接到 ESRI 的文件地理数据库的应用程序，这是一个专有数据库。我为此文件地理数据库找到了一个自定义 ADO.NET 数据提供程序。我喜欢用 NHibernate 访问这个数据库。我可以在不为 NHibernate 编写任何自定义代码的情况下将此 ADO.NET 数据提供程序与 NHibernate 一起使用吗？是否有处理通用 ado.net 提供程序的驱动程序？到目前为止，我发现，他们告诉我实现 IDriver 和 IDialect 以实现这一目标。如果我必须编写自己的实现，是否有任何文档描述如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T22:29:20.047

有一个`GenericDialect`（功能不是很全，因为很少有东西比 SQL 更标准），但是您需要实现一个驱动程序，以便 NH 可以连接到数据库。

您可以将[https://github.com/nhibernate/nhibernate-core/tree/master/src/NHibernate/Driver](https://github.com/nhibernate/nhibernate-core/tree/master/src/NHibernate/Driver)中的任何更简单的驱动程序作为起点。

# php - 如何从 PHP 私有对象数组中检索项目？

> ID：12342350
> 
> 赞同：0
> 
> 时间：2012-09-09T19:45:23.940
> 
> 标签：php, arrays, object, private

我到处搜索，IPB 论坛，谷歌，到处都是。

我在 IPB/IP.Nexus 论坛上找不到任何文档，因为他们没有，它是用 Zend 加密的。

我试图做的是从它传递到的函数中的私有对象数组中检索项目“数量”。

这是php文件。

```
<?php 
class custom_actions_ibeconomy
{
        /**
         * Item Purchased (run before onPurchaseGenerated)
         *
         * @param       array   The member purchasing
         * @param       array   Package data (combined array with row from nexus_packages and nexus_packages_*, depending on the package type)
         * @param       invoice Invoice Model
         * @return      void
         */
        public function onPaid( $member, $package, $invoice )
        {

        }

        /**
         * Purchase record generated (run after onPaid)
         *
         * @param       array   The member purchasing
         * @param       array   Package data (combined array with row from nexus_packages and nexus_packages_*, depending on the package type)
         * @param       invoice Invoice Model
         * @param       array   Row from nexus_purchases [since Nexus 1.5]
         * @return      void
         */
        public function onPurchaseGenerated( $member, $package, $invoice, $purchase )
        {
        #What package have we purchased here?
        switch($package['p_id']) {
                        case 3: // 500 HLcoins
                                $value = 500;
                                break;
                        case 4: // 1000 HLcoins
                                $value = 1000;
                                break;

                        default: //Neither? 0 HLcoins.
                                $value = 0;
                                break;;
                }       
        #Find current members HLcoins?           
        $amount = $this->$invoice->quantity * $value;

        #execute points
        ipsRegistry::DB()->update( 'pfields_content', 'eco_points=eco_points+'.$amount, 'member_id=' . $member['member_id'] , true, true );   
        }

        /**
         * Purchase Renewed, but was still active anyway
         *
         * @param       array   The member renewing
         * @param       array   Package data (combined array with row from nexus_packages and nexus_packages_*, depending on the package type)
         * @param       invoice Invoice Model
         * @param       array   The row from nexus_purchases [since Nexus 1.5]
         * @return      void
         */
        public function onRenew( $member, $package, $invoice, $purchase )
        {

        }        

        /**
         * Purchase Renewed after had expired
         *
         * @param       array                   The member renewing
         * @param       array                   Package data (combined array with row from nexus_packages and nexus_packages_*, depending on the package type)
         * @param       invoice|null    Invoice Model [May not be set if manually reactivating]
         * @param       array                   The row from nexus_purchases [since Nexus 1.5]
         * @return      void
         */
        public function onReactivate( $member, $package, $invoice, $purchase )
        {

        }

        /**
         * Purchase Expired
         *
         * @param       array                   The member the purchase belongs to
         * @param       array                   Package data (combined array with row from nexus_packages and nexus_packages_*, depending on the package type)
         * @param       invoice|null    Will usually be null. If the purchase is expiring because the invoice which previously renewed it is now being marked unpaid, the invoice object will be passed.
         * @param       array                   The row from nexus_purchases [since Nexus 1.5]
         * @return      void
         */
        public function onExpire( $member, $package, $invoice, $purchase )
        {

        }

        /**
         * Purchase Cancelled or Deleted
         *
         * @param       array                   The member the purchase belongs to
         * @param       array                   Package data (combined array with row from nexus_packages and nexus_packages_*, depending on the package type)
         * @param       invoice|null    Will usually be null. If the purchase is being cancelled because the invoice which was used to purchase it it is now being marked unpaid, the invoice object will be passed.
         * @param       array                   The row from nexus_purchases [since Nexus 1.5]
         * @return      void
         */
        public function onCancel( $member, $package, $invoice, $purchase )
        {

        }

        /**
         * Purchase is transferred to another member
         *
         * @param       array           Old owner
         * @param       array           Package data (combined array with row from nexus_packages and nexus_packages_*, depending on the package type)
         * @param       array           The row from nexus_purchases
         * @param       customer        New owner
         * @return      void
         */
        public function onTransfer( $oldOwner, $package, $purchase, $newOwner )
        {

        }

        /**
         * Purchase is upgraded/downgraded
         *
         * @param       array           The member the purchase belongs to
         * @param       array           Old package data (combined array with row from nexus_packages and nexus_packages_*, depending on the package type)
         * @param       array           The row from nexus_purchases
         * @param       package         New package object
         * @return      void
         */
        public function onchange( $member, $oldPackage, $purchase, $newPackage )
        {

        }

        /**
         * Purchases' parent purchase is changed
         *
         * @param       array                   The member the purchase belongs to
         * @param       array                   Package data (combined array with row from nexus_packages and nexus_packages_*, depending on the package type)
         * @param       array                   The row from nexus_purchases
         * @param       array|null        The previous parent (may be null if had no parent previously)
         * @param       array|null        The new parent (may be null if was previously associated and now not)
         * @return      void
         */
        public function onAssociate( $member, $package, $purchase, $oldParent, $newParent )
        {

        }

}
?> 
```

但是它什么也不返回。

我已经将数组打印出来，它被列为私有，但它在函数中，所以我应该能够检索它，我只是不知道如何，我需要你的帮助。

```
invoice Object
(
    [data:private] => Array
    (
    [i_status] => pend
    [i_title] => 500 HLCoins , 500 HLCoins x8
    [i_member] => 1
    [i_items] => Array
        (
            [0] => Array
            (
    [act] => new
    [app] => nexus
    [type] => product
    [cost] => 0
    [tax] => 0
    [renew_term] => 0
    [renew_units] =>
    [renew_cost] => 0
    [quantity] => 1
    [physical] =>
    [shipping] => Array
        (
            )
        [weight] => 0
        [itemName] => 500 HLCoins
        [itemID] => 3
        [cfields] => Array
(
)
[extra] =>
[opt_id] => 0
[associated] =>
[assocBought] =>
[groupRenewals] => 0
[methods] => Array
(
)
[k] => 0
[_tax] => 0
)
[1] => Array
(
[act] => new
[app] => nexus
[type] => product
[cost] => 0
[tax] => 0
[renew_term] => 0
[renew_units] =>
[renew_cost] => 0
[quantity] => 8
[physical] =>
[shipping] => Array
(
)
[weight] => 0
[itemName] => 500 HLCoins
[itemID] => 3
[cfields] => Array
(
)
[opt_id] => 0
[groupRenewals] => 0
[methods] => Array
(
)
[_tax] => 0
)
)
[i_total] => 0
[i_date] => 1347217384
[i_return_uri] =>
[i_paid] => 0
[i_status_extra] => a:1:{s:4:"type";s:4:"zero";}
[i_discount] => 0
[i_temp] =>
[i_ordersteps] => 0
[i_noreminder] => 1
[i_renewal_ids] => Array
(
)
[i_po] =>
[i_notes] =>
[i_shipaddress] =>
[i_id] => 229
)
[customer:private] => customer Object
(
[data] => Array
(
[member_id] => 1
[name] => Administrator
[member_group_id] => 4
[email] => honlegends@gmail.com
[joined] => 1346519183
[ip_address] => 108.251.14.208
[posts] => 19
[title] => Administrator
[allow_admin_mails] => 0
[time_offset] => -8
[skin] => 5
[warn_level] => 0
[warn_lastwarn] => 0
[language] => 1
[last_post] => 1347048210
[restrict_post] =>
[view_sigs] => 1
[view_img] => 1
[bday_day] => 0
[bday_month] => 0
[bday_year] => 0
[msg_count_new] => 0
[msg_count_total] => 1
[msg_count_reset] => 0
[msg_show_notification] => 1
[misc] =>
[last_visit] => 1347174074
[last_activity] => 1347217377
[dst_in_use] => 1
[coppa_user] => 0
[mod_posts] =>
[auto_track] =>
[temp_ban] => 0
[login_anonymous] => 0&1
[ignored_users] => a:0:{}
[mgroup_others] => 7
[org_perm_id] => ,,,,,8,
[member_login_key] => 341ebfc939f1c5acb5dbe8b9a6819b21
[member_login_key_expire] => 1347820877
[has_blog] =>
[blogs_recache] =>
[has_gallery] => 0
[members_auto_dst] => 1
[members_display_name] => PAPA_bert
[members_seo_name] => papa-bert
[members_created_remote] => 0
[members_cache] => a:7:{s:11:"report_temp";a:0:{}s:19:"report_last_updated";i:1347139096;s:10:"report_num";s:1:"0";s:13:"msgAlertReset";i:1346520781;s:13:"notifications";a:19:{s:13:"report_center";a:1:{s:8:"selected";a:1:{i:0;s:5:"email";}}s:11:"new_comment";a:1:{s:8:"selected";a:1:{i:0;s:5:"email";}}s:11:"post_quoted";a:1:{s:8:"selected";a:0:{}}s:9:"new_likes";a:1:{s:8:"selected";a:1:{i:0;s:6:"inline";}}s:15:"followed_topics";a:1:{s:8:"selected";a:1:{i:0;s:5:"email";}}s:15:"followed_forums";a:1:{s:8:"selected";a:1:{i:0;s:5:"email";}}s:22:"followed_topics_digest";a:1:{s:8:"selected";a:1:{i:0;s:5:"email";}}s:22:"followed_forums_digest";a:1:{s:8:"selected";a:1:{i:0;s:5:"email";}}s:15:"profile_comment";a:1:{s:8:"selected";a:1:{i:0;s:6:"inline";}}s:14:"friend_request";a:1:{s:8:"selected";a:1:{i:0;s:6:"inline";}}s:22:"friend_request_approve";a:1:{s:8:"selected";a:1:{i:0;s:6:"inline";}}s:19:"new_private_message";a:1:{s:8:"selected";a:1:{i:0;s:5:"email";}}s:21:"reply_private_message";a:1:{s:8:"selected";a:1:{i:0;s:5:"email";}}s:22:"invite_private_message";a:1:{s:8:"selected";a:1:{i:0;s:5:"email";}}s:17:"reply_your_status";a:1:{s:8:"selected";a:0:{}}s:16:"reply_any_status";a:1:{s:8:"selected";a:0:{}}s:20:"friend_status_update";a:1:{s:8:"selected";a:0:{}}s:7:"warning";a:1:{s:8:"selected";a:1:{i:0;s:5:"email";}}s:12:"warning_mods";a:1:{s:8:"selected";a:1:{i:0;s:6:"inline";}}}s:23:"show_notification_popup";i:0;s:7:"friends";a:1:{i:11;s:1:"1";}}
[members_disable_pm] => 0
[members_l_display_name] => papa_bert
[members_l_username] => administrator
[failed_logins] =>
[failed_login_count] => 0
[members_profile_views] => 575
[members_pass_hash] => cf407e695cc8d14e0a7079c8e0e1f4b4
[members_pass_salt] => ]s:%5
[member_banned] => 0
[member_uploader] => flash
[members_bitoptions] => 0
[fb_uid] => 0
[fb_emailhash] =>
[fb_lastsync] => 0
[members_day_posts] => 0,0
[live_id] =>
[twitter_id] =>
[twitter_token] =>
[twitter_secret] =>
[notification_cnt] => 0
[tc_lastsync] => 0
[fb_session] =>
[fb_token] =>
[ips_mobile_token] =>
[unacknowledged_warnings] =>
[feedb_percent] => -1
[feedb_pos] => 0
[feedb_neg] => 0
[feedb_neu] => 0
[sospromote_vip] => 0
[sospromote_vip_eterno] => 0
[sospromote_vip_g_origem] => 0
                    [sospromote_vip_dias] => 0
                    [sospromote_vip_secondary] => 0
                    [sospromote_vip_removesecondary] => 0
                    [sub_end] => 0
                    [subs_pkg_chosen] => 0
                    [cm_credits] => 0
                    [cm_reg] => 0
                    [referred_by] => 0
                    [cm_no_sev] => 0
                    [cim_profile_id] => 
                    [cim_payment_id] => 0
                    [cim_method] => 0
                    [cm_return_group] => 0
                    [my_member_id] => 1
                    [pp_member_id] => 1
                    [pp_last_visitors] => a:2:{i:1346978590;i:7;i:1346536186;i:2;}
                    [pp_rating_hits] => 0
                    [pp_rating_value] => 0
                    [pp_rating_real] => 0
                    [pp_main_photo] => http://www.honlegends.com/community/uploads/profile/photo-1.jpg?_r=1347002709
                    [pp_main_width] => 170
                    [pp_main_height] => 125
                    [pp_thumb_photo] => http://www.honlegends.com/community/uploads/profile/photo-thumb-1.jpg?_r=1347002709
                    [pp_thumb_width] => 100
                    [pp_thumb_height] => 100
                    [pp_setting_moderate_comments] => 0
                    [pp_setting_moderate_friends] => 0
                    [pp_setting_count_friends] => 1
                    [pp_setting_count_comments] => 1
                    [pp_setting_count_visitors] => 1
                    [pp_about_me] => 
                    [pp_reputation_points] => 1
                    [pp_gravatar] => 
                    [pp_photo_type] => custom
                    [signature] => [center][img]http://tomeisopa.files.wordpress.com/2009/11/snooze-snorlax.png[/img][/center]
                    [avatar_location] => 
                    [avatar_size] => 0
                    [avatar_type] => 
                    [pconversation_filters] => 
                    [fb_photo] => 
                    [fb_photo_thumb] => 
                    [fb_bwoptions] => 0
                    [tc_last_sid_import] => 0
                    [tc_photo] => 
                    [tc_bwoptions] => 0
                    [pp_customization] => 
                    [pp_profile_update] => 1347002709
                    [cache_content] => <p class='bbc_center'><span rel='lightbox'><img src='http://tomeisopa.files.wordpress.com/2009/11/snooze-snorlax.png' alt='Posted Image' class='bbc_img' /></span></p>
                    [full] => 1
                    [_canBeIgnored] => 
                    [bw_is_spammer] => 0
                    [bw_from_sfs] => 0
                    [bw_vnc_type] => 0
                    [bw_forum_result_type] => 0
                    [bw_no_status_update] => 0
                    [bw_status_email_mine] => 0
                    [bw_status_email_all] => 0
                    [bw_disable_customization] => 0
                    [bw_local_password_set] => 0
                    [bw_disable_tagging] => 0
                    [bw_disable_prefixes] => 0
                    [bw_using_skin_gen] => 0
                    [bw_disable_gravatar] => 0
                    [_group_formatted] => <span style="color: #46c843; font-weight: bold; text-shadow: 0 0 .7em #59ff55;">Administrators</span>
                    [member_rank_img] => http://www.honlegends.com/community/public/style_extra/team_icons/admin.png
                    [member_rank_img_i] => img
                    [show_warn] => 1
                    [custom_fields] => 
                    [_has_photo] => 1
                    [pp_small_photo] => http://www.honlegends.com/community/uploads/profile/photo-thumb-1.jpg?_r=1347002709
                    [pp_small_width] => 50
                    [pp_small_height] => 50
                    [pp_mini_photo] => http://www.honlegends.com/community/uploads/profile/photo-thumb-1.jpg?_r=1347002709
                    [pp_mini_width] => 25
                    [pp_mini_height] => 25
                    [_online] => 1
                    [_last_active] => Today, 12:02 PM
                    [_pp_rating_real] => 0
                    [members_display_name_formatted] => <span style="color: #46c843; font-weight: bold; text-shadow: 0 0 .7em #59ff55;">PAPA_bert</span>
                    [members_display_name_short] => PAPA_bert
                    [author_reputation] => Array
                        (
                            [text] => Neutral
                            [image] => 
                        )

                    [member_title] => Administrator
                    [cm_first_name] => Albert
                    [cm_last_name] => Yang
                    [cm_address_1] => 2919 Warwick Ave
                    [cm_address_2] => 
                    [cm_city] => Los Angeles
                    [cm_state] => CA
                    [cm_zip] => 90032
                    [cm_country] => US
                    [cm_phone] => 3233160892
                    [_name] => Albert Yang
                )

            [cardhandler:private] => 
        )

    [takeAction] => 1
) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T19:50:53.733

无法访问私有属性。只有调试工具`var_dump()`才能看到它们。

您应该找到`invoice`该类的定义并添加一个新函数来编辑该属性（假设它还没有）或将其更改为 public。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T19:53:52.093

您可以扩展该类，并创建一个访问器方法（或“getter”）来检索值：

```
<?php
class YourClassName extends custom_actions_ibeconomy
{
    public function getQuantity()
    {
        return $this->quantity;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-09T20:00:03.473

理论上：

```
ob_start();
var_dump($object);
$objectStr = ob_get_clean(); 
```

然后使用字符串函数来获取值 - 类似于：

```
$qPos = strpos($objectStr,"quantity",0);
$value = substring($objectStr$qPos+SOMEVALUE,$qPOS+SOMEVALUE+LENGTH); 
```

这不是一个完美的答案，您必须对其进行调整。

然而，正如@abhi-beckert 所说，这样做是不好的形式，并且可能对性能很不利。检查文档，看看是否有不同的方法。

你不能扩展类来做到这一点——私有的不是继承的。

# windows - Windows 8 上的 Redmine

> ID：12342353
> 
> 赞同：0
> 
> 时间：2012-09-09T19:45:56.060
> 
> 标签：windows, iis, windows-8, redmine, bug-tracking

[在本教程](http://www.helicontech.com/articles/installing-redmine-on-windows-in-production/)中尝试在 Windows 8 上安装 Redmine 。收到此错误：

![在此处输入图像描述](../Images/2d64c57d13e9578d6d93a05ca1ebe2bd.png)

也试过[Bitnami 的安装程序](http://bitnami.org/stack/redmine)，但我已经有 IIS Web 服务器，不需要捆绑的 Apache 网络服务器。安装程序没有让我选择它的组件。它默认安装 Apache。所以，Bitnami 的 Redmine 不适合我。

我错过了什么？

还有其他好的错误和请求跟踪软件吗？请不要谷歌并建议我一些随机结果。建议您使用过并且非常适合Redmine的东西

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-15T19:39:59.317

1.  一旦出现上述错误，请确保新网站的 AppPool 对硬盘上的站点文件夹具有写入权限，以完成安装过程。
2.  然后在浏览器中打开该网站，安装将完成。
3.  安装完成后相应地设置安全性。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-10T19:33:21.563

使用适合您所有需求的[WebIssues](http://webissues.mimec.org/)多平台错误和请求跟踪软件，而不是 Redmine。

WebIssues 是一个用于问题跟踪和团队协作的开源、多平台系统。它可用于存储、共享和跟踪具有各种属性、评论和文件附件的问题。它易于安装和使用，但具有许多功能并且高度可定制。

**主要特点：**

1.  桌面客户端应用程序可以在 Windows、Linux 和 OS X 上本地运行
2.  Web Client 可用于使用 Web 浏览器访问系统
3.  该服务器可以安装在任何具有 PHP 5.2 或更新版本以及 MySQL、PostgreSQL 或 SQL Server 的主机上
4.  可以使用具有可配置过滤条件的公共和个人视图过滤问题
5.  可以发送电子邮件通知，桌面客户端可以定期检查满足各种标准的新问题和修改问题
6.  各种报告可以直接从桌面客户端打印或导出为 HTML 和 PDF 文档

# android - ImageButton.setEnabled() 抛出异常

> ID：12342356
> 
> 赞同：0
> 
> 时间：2012-09-09T19:46:33.190
> 
> 标签：android

这里是 Android/Java 的新手，但在 C/C++ 和 Object Pascal 方面很有基础。我有 5 个 ImageButtons，只启用了一个。然后在某个时间点按下单独的启用按钮时，其他四个也应该通过调用带有布尔值（ enableBtn2..3.. 等）传递的 setEnabled() 来启用。但是，每当我按下单独启用的按钮来调用成员 newRung() 进而调用另一个成员 refreshMnuButtons() 时，就会引发异常，我怀疑该异常是由对 setEnabled() 父类成员的调用引起的。有人可以请教吗？指出漏洞？我疯狂地寻找解释，但似乎找不到合适的答案。请看我附上的代码：

```
public class MyActivity extends Activity {
    private ImageView cell1,cell2,cell3,cell4,cell5,cell6,rungClose;
    private ImageButton mnuBtn1,mnuBtn2,mnuBtn3,mnuBtn4,mnuBtn5;
    private boolean enableBtn1 = true,
            enableBtn2 = false,
            enableBtn3 = false,
            enableBtn4 = false,
            enableBtn5 = false;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_pic_ladder_main);

        // setup toolbar
        TableLayout tbl = (TableLayout)findViewById(R.id.tblToolbar);
        ImageButton mnuBtn1 = new ImageButton(this);

        mnuBtn1.setImageResource(R.drawable.rungopentool);
        mnuBtn1.setEnabled(enableBtn1);
        //setup mnuBtn1 listener

        mnuBtn1.setOnClickListener(new View.OnClickListener() {
            @Override   
            public void onClick(View view) {
                newRung();
            }
        });
        ImageButton mnuBtn2 = new ImageButton(this);

        mnuBtn2.setImageResource(R.drawable.noc);
        mnuBtn2.setEnabled(enableBtn2);
        //setup mnuBtn2 listener

        mnuBtn2.setOnClickListener(new View.OnClickListener() {
            @Override   
            public void onClick(View view) {
                addNOC();
            }
        });
        final ImageButton mnuBtn3 = new ImageButton(this);

        mnuBtn3.setImageResource(R.drawable.ncc); 
        mnuBtn3.setEnabled(enableBtn3);
        //setup mnuBtn3 listener

        mnuBtn3.setOnClickListener(new View.OnClickListener() {
            @Override   
            public void onClick(View view) {
                addNCC();
            }
        });
        ImageButton mnuBtn4 = new ImageButton(this);

        mnuBtn4.setImageResource(R.drawable.process);
        mnuBtn4.setEnabled(enableBtn4);
        //setup mnuBtn4 listener

        mnuBtn4.setOnClickListener(new View.OnClickListener() {
            @Override   
            public void onClick(View view) {
                addProcess();
            }
        });
        ImageButton mnuBtn5 = new ImageButton(this);

        mnuBtn5.setImageResource(R.drawable.coil);
        mnuBtn5.setEnabled(enableBtn5);
        //setup mnuBtn5 listener

        mnuBtn5.setOnClickListener(new View.OnClickListener() {
            @Override   
            public void onClick(View view) {
                addCoil();
            }
        });

        TableRow  mnurow = new TableRow(this);
        mnurow.setBackgroundColor(0x3F000000);

        // display menu
        mnurow.addView(mnuBtn1); 
        mnurow.addView(mnuBtn2);
        mnurow.addView(mnuBtn3); 
        mnurow.addView(mnuBtn4); 
        mnurow.addView(mnuBtn5);

        tbl.addView(mnurow); 
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_pic_ladder_main, menu);
        return true;
    }

    private  void  createRungImages() {
        // TODO
    }

    private void newRung()
    {
        Toast.makeText(this, "New Rung" ,Toast.LENGTH_SHORT).show();
        enableBtn2 = true;
        enableBtn3 = true;
        enableBtn4 = true;
        enableBtn5 = true;
        enableBtn1 = false;
        refreshMnuButtons();
    }
    private void addNOC()
    {
        Toast.makeText(this, "NOC" ,Toast.LENGTH_SHORT).show();
    }
    private void addNCC()
    {
        Toast.makeText(this, "NCC" ,Toast.LENGTH_SHORT).show();
    }
    private void addProcess()
    {
        Toast.makeText(this, "Add Process" ,Toast.LENGTH_SHORT).show();
    }
    private void addCoil()
    {
        Toast.makeText(this, "Coil" ,Toast.LENGTH_SHORT).show();
    }

    public void refreshMnuButtons()
    {
        try {  
            mnuBtn1.setEnabled(enableBtn1);
            mnuBtn2.setEnabled(enableBtn2);
            mnuBtn3.setEnabled(enableBtn3);
            mnuBtn4.setEnabled(enableBtn4);
            mnuBtn5.setEnabled(enableBtn5);
        }
        catch(Exception e) {Toast.makeText(this, "Exception" ,Toast.LENGTH_SHORT).show(); }
    }
} 
```

这是我的 xml：请注意，我正在尝试通过代码生成大部分图形元素。

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <RelativeLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="false"
        android:layout_alignParentTop="true"
        android:layout_centerHorizontal="true"
        android:layout_marginBottom="44dp" >

        <ScrollView
            android:id="@+id/scrollView1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" >

            <TableLayout
                android:id="@+id/ladderSheet"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content" >

            </TableLayout>

        </ScrollView>

    </RelativeLayout>

    <RelativeLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true" >

       <HorizontalScrollView
           android:id="@+id/horizontalScrollView1"
           android:layout_width="fill_parent"
           android:layout_height="wrap_content" >

           <TableLayout
               android:id="@+id/tblToolbar"
               android:layout_width="fill_parent"
               android:layout_height="wrap_content"
               android:scrollbarStyle="outsideInset"
               android:scrollbars="horizontal" >
           </TableLayout>

       </HorizontalScrollView>

    </RelativeLayout>

</RelativeLayout> 
```

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-09T19:59:02.713

您正在创建两个`mnuBtnX`变量：一个是本地变量，一个是类范围的。当您像这样声明按钮时：

```
private  ImageButton mnuBtn1,mnuBtn2,mnuBtn3,mnuBtn4,mnuBtn5; 
```

这些显然是类变量，但随后在`onCreate()`您使用：

```
ImageButton mnuBtn1 = new ImageButton(this); 
```

**令人沮丧**的是（对于我们 C/C++ 人来说）这不会引发警告或错误，告诉您您创建了一个与类变量同名的局部变量。此本地`mnuBtn1`与类无关' `mnuBt1`。因此，`refreshMnuButtons()`您可能会收到 NullPointerException ，因为 class'`mnuBtn1`仍然是`null`.

**只需**在以下位置执行此操作`onCreate()`：

```
mnuBtn1 = new ImageButton(this); 
```

# android - 键盘背景状态

> ID：12342357
> 
> 赞同：2
> 
> 时间：2012-09-09T19:46:32.847
> 
> 标签：android, background, keyboard

```
<selector xmlns:android="http://schemas.android.com/apk/res/android">
<item
android:drawable="@drawable/key" />
<item
android:state_pressed="true"
android:drawable="@drawable/key_pressed" />
<item
android:state_checkable="true"
android:drawable="@drawable/key_function" />
<item
android:state_checkable="true"
android:state_pressed="true"
android:drawable="@drawable/key_pressed" />
<item
android:state_checkable="true"
android:state_checked="true"
android:drawable="@drawable/key_function" />
<item
android:state_checkable="true"
android:state_checked="true"
android:state_pressed="true"
android:drawable="@drawable/key_pressed" />
</selector> 
```

测试结果：

普通键->@drawable/key

普通按键 ->@drawable/key_pressed

粘滞键->@drawable/key_function

按下粘滞键 ->@drawable/key_function <---这是问题所在

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T19:52:44.947

> 选择不是基于“最佳匹配”，而只是满足该州最低标准的第一个项目。

[http://developer.android.com/guide/topics/resources/drawable-resource.html#StateList](http://developer.android.com/guide/topics/resources/drawable-resource.html#StateList)

所以这是错误的可绘制对象，因为其中一个状态与当前状态匹配

```
<item
android:state_checkable="true"
android:drawable="@drawable/key_function" />  
<item
android:state_checkable="true"
android:state_checked="true"
android:drawable="@drawable/key_function" /> 
```

试着放

```
<item
android:state_checkable="true"
android:state_checked="true"
android:state_pressed="true"
android:drawable="@drawable/key_pressed" /> 
```

在顶部或将条件添加到以前的案例。

# java - 细化代码。搜索字符串

> ID：12342360
> 
> 赞同：2
> 
> 时间：2012-09-09T19:46:35.643
> 
> 标签：java, string

所以我的代码是用于家庭作业，用户输入一个句子（字符串），我需要搜索字符串并返回最小的单词。但是，必须在字符串的第一个位置输入一个数字。例如：“4 这是什么”。输出应为“IS”并忽略数字。我想出如何忽略数字的唯一方法是让循环跳过数字所在的第一个位置。它本身就可以工作，但是每当我将其放入程序的其余部分时，它就会停止工作。反正有没有让这个程序更干净？

```
public static void main(String[] args) {
    Scanner sc = new Scanner(System.in);
    // Lexicographically smallest word
    String TheSentence = sc.nextLine();
    String[] myWords = TheSentence.split(" ");
    int shortestLengths, shortestLocation;
    shortestLengths = (myWords[1]).length();
    shortestLocation = 1;
    for (int i = 1; i < myWords.length; i++) {
        if ((myWords[i]).length() < shortestLengths) {
            shortestLengths = (myWords[i]).length();
            shortestLocation = i;
        }
    }
    System.out.println(myWords[shortestLocation]);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T19:51:10.190

在你的`for`循环内（应该从 开始`i = 0`），添加如下代码：

```
try {
  double value = Double.parseDouble(myWords[i]);
} catch (NumberFormatException e) {
  // add the rest of your code here
} 
```

这个想法是您尝试将单词转换为数字，如果失败，则表示它不是数字，因此您可以在单词上使用长度逻辑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T20:08:57.320

您应该做的第一件事是创建您想要使用的函数，而不是将练习的相关代码与从输入流中读取一行等内容混合在一起。

您可以使用 测试字符是否为字母`Character.isLetter(char)`。`String.charAt(int)`一个好的练习是仅使用该函数构建一个解决方案，并在循环中分别查看每个字符（方法）。解决方案是记住当前最短的单词从哪里开始以及它有多长。

* * *

在实践中，我只会使用这样的正则表达式：

```
public static String shortestWord(String sentence) {
  String shortest = null;
  Pattern word = Pattern.compile("\\w+");
  Matcher m = word.matcher(sentence);
  while (m.find()) {
    String candidate = m.group();
    if (shortest == null || shortest.length() > candidate.length())
      shortest = candidate;
  }
  return shortest;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-09T20:14:34.377

您可以尝试使用子字符串，例如

```
String result=inputString.substring(1) 
```

'1' 是字符串中的第二个字母，子字符串返回除第一个之外的每个值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-15T06:27:10.230

下面基本上只是缩短了您的代码..除此之外它没有太大变化。话虽如此..在一个名为 shortestWord() 或其他东西的方法中创建所有这些会更好。下面的代码确实没有理由不工作。

修改后的代码：

```
public static void main(String[] args) {
    Scanner sc = new Scanner(System.in);
    String[] myWords = (sc.nextLine()).split(" ");
    int shortestLocation = 1
    for (int i = 2; i < myWords.length; i++) { // No reason to start at 1 as you have
                                               // already made shortestLocation = 1
        if (myWords[i].length() < myWords[shortestLocation].length()) {
            shortestLocation = i;
        }
    }
    System.out.println(myWords[shortestLocation]);
} 
```

建议代码：

```
public static void main(String[] args) {
    Scanner sc = new Scanner(System.in);
    String[] myWords = (sc.nextLine()).split(" ");
    System.out.println("The shortest word is: " + shortestWord(myWords));
}

public static String shortestWord(String[] myWords) {
    int shortestLocation = 1
    for (int i = 2; i < myWords.length; i++) { // No reason to start at 1 as you have
                                               // already made shortestLocation = 1
        if (myWords[i].length() < myWords[shortestLocation].length()) {
            shortestLocation = i;
        }
    }
    return myWords[shortestLocation];
} 
```

# c++ - 这些链接器错误是什么意思？

> ID：12342361
> 
> 赞同：0
> 
> 时间：2012-09-09T19:46:35.877
> 
> 标签：c++, visual-studio, linker, static-libraries

我希望我可以问“我需要链接哪些库”，但它非常具体（wwise 引擎集成），所以我需要帮助自己解决这个问题。当我尝试创建在头文件中定义的类型的变量时会出现问题（编译器发现头文件没有问题）。我收到 22 个链接器错误，但我不明白读出的内容，有人可以引导我完成它并准确地告诉我缺少哪个符号，这样我就可以弄清楚我缺少哪些库？除了没有链接的库之外，它可能是其他任何东西吗？Wwise 附带了一个演示项目，它可以编译但没有链接到比我更多的库。

以下是其中的 5 个错误。我正在使用视觉工作室。

```
1>main.obj : error LNK2019: unresolved external symbol "public: enum AKRESULT __thiscall CAkDefaultIOHookBlocking::Init(struct AkDeviceSettings const &,bool)" (?Init@CAkDefaultIOHookBlocking@@QAE?AW4AKRESULT@@ABUAkDeviceSettings@@_N@Z) referenced in function "bool __cdecl InitSoundEngine(void)" (?InitSoundEngine@@YA_NXZ)
1>main.obj : error LNK2001: unresolved external symbol "public: virtual void __thiscall CAkDefaultIOHookBlocking::GetDeviceDesc(struct AkDeviceDesc &)" (?GetDeviceDesc@CAkDefaultIOHookBlocking@@UAEXAAUAkDeviceDesc@@@Z)
1>main.obj : error LNK2001: unresolved external symbol "public: virtual unsigned long __thiscall CAkDefaultIOHookBlocking::GetDeviceData(void)" (?GetDeviceData@CAkDefaultIOHookBlocking@@UAEKXZ)
1>main.obj : error LNK2001: unresolved external symbol "public: virtual enum AKRESULT __thiscall CAkDefaultIOHookBlocking::Read(struct AkFileDesc &,struct AkIoHeuristics const &,void *,struct AkIOTransferInfo &)" (?Read@CAkDefaultIOHookBlocking@@UAE?AW4AKRESULT@@AAUAkFileDesc@@ABUAkIoHeuristics@@PAXAAUAkIOTransferInfo@@@Z)
1>main.obj : error LNK2001: unresolved external symbol "public: virtual enum AKRESULT __thiscall CAkDefaultIOHookBlocking::Write(struct AkFileDesc &,struct AkIoHeuristics const &,void *,struct AkIOTransferInfo &)" (?Write@CAkDefaultIOHookBlocking@@UAE?AW4AKRESULT@@AAUAkFileDesc@@ABUAkIoHeuristics@@PAXAAUAkIOTransferInfo@@@Z) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T19:54:11.327

您有一个文件`AkDefaultIOHookBlocking.cpp`尚未添加到您正在构建的项目中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-09T19:58:04.407

符号是：

```
enum AKRESULT CAkDefaultIOHookBlocking::Init(struct AkDeviceSettings const &,bool)
virtual void CAkDefaultIOHookBlocking::GetDeviceDesc(struct AkDeviceDesc &)
virtual unsigned long CAkDefaultIOHookBlocking::GetDeviceData(void)
virtual enum AKRESULT CAkDefaultIOHookBlocking::Read(struct AkFileDesc &,struct AkIoHeuristics const &,void *,struct AkIOTransferInfo &)
virtual enum AKRESULT CAkDefaultIOHookBlocking::Write(struct AkFileDesc &,struct AkIoHeuristics const &,void *,struct AkIOTransferInfo &) 
```

据我所知，您只有声明 class 的标头`CAkDefaultIOHookBlocking`，这意味着您尝试使用上述任何符号，您需要链接到库。

> Wwise 附带了一个演示项目，它可以编译但没有链接到比我更多的库。

要么不使用符号，要么在该项目中编译定义这些符号的源文件 - [http://gmwwise.googlecode.com/svn-history/r2/trunk/GMWwise/wwise/AkDefaultIOHookBlocking.cpp](http://gmwwise.googlecode.com/svn-history/r2/trunk/GMWwise/wwise/AkDefaultIOHookBlocking.cpp)

# c# - 面板上的 Visual C# 鼠标事件未触发

> ID：12342363
> 
> 赞同：3
> 
> 时间：2012-09-09T19:46:55.157
> 
> 标签：c#, winforms, events, mouse

我正在使用 Visual C# 2008 并且卡在面板上的鼠标事件中。我已经定义了鼠标按下，鼠标离开，鼠标进入。我做得很简单。

我按下面板选择了我需要的那些事件，它会自动生成我需要的代码来触发鼠标事件。

在我的接收事件代码中插入了一个断点，但它永远不会触发。

Visual C# 中是否存在错误？我找不到我做错了什么。

一些代码，`Form1.Designer`：

```
this.pagepanel.MouseDown += new System.Windows.Forms.MouseEventHandler(this.pagepanel_MouseDown);
this.pagepanel.MouseEnter += new System.EventHandler(this.pagepanel_MouseEnter);
this.pagepanel.MouseLeave += new System.EventHandler(this.pagepanel_MouseLeave); 
```

Form1.cs：

```
private void pagepanel_MouseLeave(object sender, EventArgs e) =>
    this.Cursor = Cursors.Default;
private void pagepanel_MouseEnter(object sender, EventArgs e) =>
    this.Cursor = Cursors.WaitCursor;

private void pagepanel_MouseDown(object sender, MouseEventArgs e)
{
    if (mode == MODE_BUTTON)
    {
        int x = e.X;
        int y = e.Y;

        switch (e.Button)
        {
            case MouseButtons.Right: break;
            case MouseButtons.Left:   break;
            case MouseButtons.Middle: break;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-09T20:52:05.813

确保您的面板在前面。在设计器中使用*带到前面*。也许另一个容器控件正在阻碍。

# php - PHP 显示为注释

> ID：12342370
> 
> 赞同：0
> 
> 时间：2012-09-09T19:48:03.717
> 
> 标签：php, html, web

出于某种原因，我放置在`index.php`页面中的 PHP 无法正常工作。当我检查元素时，PHP 脚本是一个简单的`include`语句，被读取为 HTML 注释。我该如何解决？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-09T19:50:31.457

两个可能的原因。首先是您的 Web 服务器未配置为处理 PHP。

其次，您可能正在使用较短的开放标签 ( `<?`)，而这些标签可能在您的 PHP.ini 中被禁用。

一旦你修复了 PHP 文件的处理，我相信它会起作用。如果没有，请发布您的代码并重试，以便我们提供更具体的答案。

# javascript - 使用 JavaScript 或 jQuery 刷新父页面后如何保留 iframe src？

> ID：12342372
> 
> 赞同：2
> 
> 时间：2012-09-09T19:48:05.060
> 
> 标签：javascript, jquery, html, iframe

我正在设计一个在 ASP.NET 中具有母版页和 iframe 的应用程序。当我单击母版页中的链接时，该链接会在 iframe 中打开，但如果我刷新父页面，iframe 会丢失它的源并返回一个空白框架。

`src`像Parallel的Plesk Panel这样刷新页面后如何保留iframe属性？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-09T20:14:05.443

有几种方法可以临时存储`URL`iframe，然后在下一页重新加载时检索它。

1.  将其存储为 cookie
2.  采用`localStorage`
3.  ~~使用`window.name`——呃，不。哈。只是在开玩笑。这是一个糟糕的黑客行为。~~
4.  使用管理 localStorage 的小包之一，如果必须的话，默认返回 cookie。

您可能需要阅读[HTML5 本地存储后备解决方案](https://stackoverflow.com/questions/4692245/html5-local-storage-fallback-solutions)以获取有关这些选项的更多信息。

# grails - Grails“发生异常后不刷新会话”错误消息

> ID：12342373
> 
> 赞同：1
> 
> 时间：2012-09-09T19:48:14.810
> 
> 标签：grails, groovy, grails-domain-class

我看到这个错误消息已经在休眠的上下文中发布了好几次。

我在使用 grails 服务和域类时遇到此错误，任何帮助将不胜感激

领域类

```
class Coupon {
    Date dateCreated
    Date lastUpdated
    String code
    String email
    String address
    String state
    String city
    String zip
    def couponCodeGeneratorService

    def beforeValidate() {
        println code+"---------8-"
        code = couponCodeGeneratorService.generate()
        println code+"----------"
    }
    static constraints = {
        email blank:false,email:true
        address blank:false
        state blank:false
        city blank:false
        zip blank:false
    }
} 
```

服务

```
class CouponCodeGeneratorService {
    Random randomGenerator = new Random()
    def serviceMethod() {

    }
    def generate(){
        def group1 =  randomGenerator.nextInt(9999)+"";
        def group2 =  randomGenerator.nextInt(9999)+"";
        def group3 =  randomGenerator.nextInt(9999)+"";
        def group4 =  randomGenerator.nextInt(9999)+"";
        return group1.padLeft(4,"0") +group2.padLeft(4,"0")+group3.padLeft(4,"0")+group4.padLeft(4,"0")
    }
} 
```

我得到的错误是

```
---------8-
4844634041715590----------
4844634041715590---------8-
| Error 2012-09-10 11:32:54,938 [http-bio-8080-exec-7] ERROR hibernate.AssertionFailure  - an assertion failure occured (this may indicate a bug in Hibernate, but is more likely due to unsafe use of the session)
Message: null id in com.easytha.Coupon entry (don't flush the Session after an exception occurs)
   Line | Method
->>  19 | beforeValidate     in com.easytha.Coupon
- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - 
|    46 | onApplicationEvent in org.grails.datastore.mapping.engine.event.AbstractPersistenceEventListener
|    24 | save . . . . . . . in com.easytha.CouponController
|   186 | doFilter           in grails.plugin.cache.web.filter.PageFragmentCachingFilter
|    63 | doFilter . . . . . in grails.plugin.cache.web.filter.AbstractFilter
|   886 | runTask            in java.util.concurrent.ThreadPoolExecutor$Worker
|   908 | run . . . . . . .  in     ''
^   662 | run                in java.lang.Thread
| Error 2012-09-10 11:32:54,944 [http-bio-8080-exec-7] ERROR errors.GrailsExceptionResolver  - AssertionFailure occurred when processing request: [POST] /EasyTha/coupon/save - parameters:
zip: asdf
address: asd
email: s.s@s.xom
state: asd
code: 
create: Create
city: asdf
null id in com.easytha.Coupon entry (don't flush the Session after an exception occurs). Stacktrace follows:
Message: null id in com.easytha.Coupon entry (don't flush the Session after an exception occurs)
   Line | Method
->>  19 | beforeValidate     in com.easytha.Coupon
- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - 
|    46 | onApplicationEvent in org.grails.datastore.mapping.engine.event.AbstractPersistenceEventListener
|    24 | save . . . . . . . in com.easytha.CouponController
|   186 | doFilter           in grails.plugin.cache.web.filter.PageFragmentCachingFilter
|    63 | doFilter . . . . . in grails.plugin.cache.web.filter.AbstractFilter
|   886 | runTask            in java.util.concurrent.ThreadPoolExecutor$Worker
|   908 | run . . . . . . .  in     ''
^   662 | run                in java.lang.Thread 
```

我对Hibernate不是很熟悉，这也是创建看起来像信用卡号的优惠券代码的正确方法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-10T13:10:17.583

我怀疑问题可能`CouponCodeGeneratorService`是事务性的。因此，当您从内部调用服务方法时，`beforeValidate`您正在打开和关闭事务（即使您没有在方法内部触摸数据库），这将导致会话再次刷新。

尝试使服务非事务性：

```
static transactional = false 
```

# php - 如何集成两个不同的应用程序？网络应用

> ID：12342376
> 
> 赞同：2
> 
> 时间：2012-09-09T19:48:36.347
> 
> 标签：php, web-services, intersystems-cache, database-abstraction

大家好，我是一名学生，在医院从事一个项目，我们设计了一个应用程序，患者可以在该应用程序中预约与此应用程序类似的医生 (apphp.com/php-medical-appointment/examples/sample2/index.php) 和我们的应用程序使用 php 和 mysql 并在 microcms 框架上运行现在我们要做的是让这个应用程序与 MedTrak (http://www.intersystems.com/trakcare/) 集成，它使用 CACHE DB (Intersystems Cache db a post relational db）我们已经使用 mysql 编写了我们的应用程序，所以有什么可能的方法可以将数据从我们的应用程序发送到他们的数据库。从他们的 db 中获取数据 到目前为止，我们已经尝试了这些方法 odbc 它会起作用吗，因为我们必须再次在 ODBC 中编写我们的应用程序

帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T17:00:08.573

Enterprise Application Patterns 是一本很棒的书，我强烈推荐它。但是，我要补充一点，即使您拥有一流的消息传递中间件来确保两个应用程序尽可能松散耦合，在某些时候您将不得不读取或写入缓存数据库，并且您可能需要两者.

此外，在学生项目中，一种复杂的集成方法可能可行，也可能不可行。也许让您的大部分代码与封装精确集成的抽象通信层对话就足够了？你可以从最容易实现的东西开始，但可以有一个关于以后如何改变它的故事。即使这对于学生项目来说也可能已经够难了，因为接口确实应该假设通信是异步的。

无论如何，在某些时候橡胶会遇到道路，您将不得不读取和/或写入缓存数据库。那时，ODBC*可用*，听起来它对您来说是个不错的选择。还有其他方法可以连接到 Cache，但 ODBC 被广泛使用（因此可能更可靠），并且不需要您学习 Cache Object Script，这对于您的情况来说是很多额外的工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T19:57:20.903

有很多方法可以实现这一点——了解这一点的最佳方法是阅读[“企业集成模式”](http://www.eaipatterns.com/)。

我不建议直接写入彼此的数据库 - 这是将应用程序粘合在一起的一种脆弱方式，因为一个模式的更改需要您同时更改另一个应用程序。您必须处理奇异的故障模式 - 一个数据库可能因备份而关闭，这意味着您无法将另一个数据库的更改写入它。

阅读本书寻找替代方案！

# javascript - 将显示属性更改为可见的轻弹并再次消失

> ID：12342378
> 
> 赞同：1
> 
> 时间：2012-09-09T19:48:40.507
> 
> 标签：javascript, css

我有一个 php 页面，其中包含一个我只想在单击链接后才显示的表格。

我的问题如下：我有一个设置为 display="none" 的 div

```
<div name="details" style="display:none;"> 
```

使用 javascript，我将其更改为内联表，或者只是阻止，对于这种情况无关紧要。

```
function showDetails(){
        var elems = document.getElementsByName("details");
        document.getElementById("dis").innerHTML = elems.length;
        for (var i=0; i<elems.length; i++)
            elems[i].style.display = "inline-table";
    } 
```

当我单击触发此脚本的链接时，div 内容会显示几分之一秒并再次消失。这是一个视频：http: [//dl.dropbox.com/u/17289984/ SRFile2012_9_9_22_43_58_463.avi](http://dl.dropbox.com/u/17289984/SRFile2012_9_9_22_43_58_463.avi)

我已经检查了大约 5-6 页关于更改显示属性的谷歌链接，当然还检查了 stackoverflow，但没有找到相关的答案......

有人有线索吗？

提前致谢！

PS这里是我的完整代码： [http ://codeviewer.org/view/code:299e](http://codeviewer.org/view/code:299e)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-09T19:59:51.487

请记住，您正在单击一个`<a>`标签，该标签通常用于链接，他们可以将您发送到另一个页面（这正是正在发生的事情）。你的 href 属性是空的，所以当你点击它时它会刷新页面。

试试这个： `<a href="" onclick="showDetails();return false;">show details</a>`

注意`return false;`。这将取消默认操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T20:02:14.597

该`name`属性不应该像那样使用（实际上，它已被弃用，除了表单字段外不应使用）。将您的代码更改为：

```
<table class="details"> 
```

并使用它来找到它们：

```
var elems = document.getElementByClassName("details"); 
```

此外，在设置 display 属性时，您应该使用“none”来隐藏一个元素，并使用一个空字符串将其恢复为浏览器默认值（可以从一个浏览器更改为另一个）：

```
elem.style.display = ""; // remove "none" value to make it visible. 
```

getElementByClassName 功能在旧浏览器中不存在。快速谷歌搜索将找到示例代码，使其在所有浏览器中都能正常工作。

此外，@Lian 是正确的，您应该在 onclick 中返回 false。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-09T20:02:14.737

您提供的链接中的代码与您在此处发布的内容有所不同。它在其他代码中说您将可见性更改为仅可见。可见性的优先级低于显示。如果可见性可见但显示仍然没有，这意味着该事物仍然不可见，因为显示仍然没有显示。您必须完全忘记可见性，仅将显示无更改为显示块。

# r - 如何将 URL 写入文件名？

> ID：12342381
> 
> 赞同：-1
> 
> 时间：2012-09-09T19:49:51.940
> 
> 标签：r, filenames

我想使用 URL 地址作为文件名而不是“i”。认为这是小菜一碟，只是`links[i,0]`在写函数中而不是“i”，但它似乎不起作用。

```
library(RCurl) 
library(foreach) 
library(foreign)

links <- read.table("CSV FILE WITH N LINKS", header = T, quote = "\"")

outpath <- "RANDOM FOLDER"

foreach(i = 1:nrow(links)) %do% {
text <- getURL(links[i,])  print(i) 
write(as.character(text), file = paste(outpath, "/", i, ".txt", sep = ""))} 
```

我收到以下错误：

```
10: In file(file, ifelse(append, "a", "w")) :
  cannot open file '/Users/kasper2304/Desktop/Lego test/Star Wars output/http://news.lugnet.com/starwars/?n=10.txt': No such file or directory 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T17:15:52.880

在`:`Windows 或 Mac OS 中，不接受作为文件名中的字符。从文件名中删除`:`字符以解决问题。有人可能会`strsplit()`为此目的使用。

# c - 替换 C 中的字符

> ID：12342382
> 
> 赞同：1
> 
> 时间：2012-09-09T19:49:54.373
> 
> 标签：c, character-replacement

这是[实验室作业的一部分](http://www.cs.purdue.edu/homes/cs240/labs/lab2.pdf)

我必须实现以下功能......

> ```
> void replaceChar(char s[], char c,int len) 
> ```
> 
> *说明：*`s`用替换每个字符`c`。`len`表示 的长度`s`。

我将此提交给我的班级使用的自动评分器，它告诉我“*替换字符串的长度有不同的长度。* ”我已经对此进行了广泛的测试，没有发现任何问题。这是我的完整功能：

```
void replaceChar(char s[], char c, int len) {
    printf("\n");
    for (int i = 0; i < len; i++) {
        s[i] = c;
        printf("%c",s[i]);
    }
} 
```

我很感激你能给我的任何帮助！

以下是我的一些测试用例：

```
char s1[5] = {'h','e','l','l','o'};

char s3[10] = {'h','e','l','l','o',' ','h','i','i','i'};
char rep1 = 'x';
replaceChar(s1,rep1,5);
replaceChar(s3,rep1,10); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T20:07:07.200

见[我的评论](https://stackoverflow.com/questions/12342382/replacing-characters-in-c#comment16570355_12342382)：

> 您是否尝试过明确标记 NUL 终止符？`s[len] = '\0';`

尽管这解决了问题，但我仍然会与您的教授联系并询问他们为什么首先需要这样做。实验室没有指定字符串`s`需要以 NUL 结尾。

顺便说一句（最初在[我的另一个评论](https://stackoverflow.com/questions/12342382/replacing-characters-in-c#comment16570407_12342382)`s1`中提到），您应该在初始化and时利用字符串文字`s3`，即

```
char s1[] = "hello";
char s3[] = "hello hiii"; 
```

这不仅看起来更简洁（并且避免了显式提及数组长度的需要），而且还保证了字符串也是以 NUL 结尾的。

# android - Android 向 ListView 添加搜索功能

> ID：12342384
> 
> 赞同：0
> 
> 时间：2012-09-09T19:50:10.147
> 
> 标签：android, search, android-activity, android-edittext

遵循本教程：[tuto](http://www.androidhive.info/2012/09/android-adding-search-functionality-to-listview/)

我想在我的 ListActivity 中添加一个带有 EditText 的搜索功能。

本教程解释了如何做到这一点，但使用一个简单的 ArrayAdapter ：

```
// Listview Data
    String products[] = {"Dell Inspiron", "HTC One X", "HTC Wildfire S", "HTC Sense", "HTC Sensation XE",
                            "iPhone 4S", "Samsung Galaxy Note 800",
                            "Samsung Galaxy S3", "MacBook Air", "Mac Mini", "MacBook Pro"};

    lv = (ListView) findViewById(R.id.list_view);
    inputSearch = (EditText) findViewById(R.id.inputSearch);

    // Adding items to listview
    adapter = new ArrayAdapter<String>(this, R.layout.list_item, R.id.product_name, products);
    lv.setAdapter(adapter);

    /**
     * Enabling Search Filter
     * */
    inputSearch.addTextChangedListener(new TextWatcher() {

        @Override
        public void onTextChanged(CharSequence cs, int arg1, int arg2, int arg3) {
            // When user changed the Text
            MainActivity.this.adapter.getFilter().filter(cs);
        }

        @Override
        public void beforeTextChanged(CharSequence arg0, int arg1, int arg2,
                int arg3) {
            // TODO Auto-generated method stub

        }

        @Override
        public void afterTextChanged(Editable arg0) {
            // TODO Auto-generated method stub
        }
    }); 
```

我也可以做到，但使用我的自定义：ArrayAdapter

编辑 ：

它现在正在使用我的对象的 toString() 返回值查找。

现在我有这个问题：

在我的 EditText 中，我有“wine”，在我的列表中，我只有一个包含这个词的元素：我的列表：

```
-----------------
---------
The god of wine and orange juice
---------------
---------------------- 
```

工作正常，我现在在结果上只有“上帝……”，但如果我在酒后加一个空格，结果就会消失……

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T19:54:24.727

您可以在 中添加任何您想要的内容`ArrayAdapter`，即... `ArrayAdapter<MyObject>`，只需覆盖`toString()`模型类中的方法以设置将在列表中显示的内容。

# templates - Joomla 模板管理器不更新模板列表

> ID：12342396
> 
> 赞同：1
> 
> 时间：2012-09-09T19:52:31.250
> 
> 标签：templates, joomla

我刚刚使用 jUpgrade 将我的 1.5.26 站点更新为 2.5.6。我对旧的自定义模板进行了备份，我也将其更新到了新版本。我遇到的问题是模板管理器没有更新模板列表。这是我看到的：

*   如果我删除了我不使用的用户模板文件夹，例如 Beez5，模板列表不会更新。
*   我更新并更新了 templateDetail.xml 文件的旧模板无法识别。
*   我复制了默认的 Atom 模板文件夹并对 templateDetails.xml 文件进行了更改，但模板列表仍然无法识别新模板。

我正在使用 Mamp Pro 2.0.5 在我的 Mac 上运行它。我在系统默认情况下有错误报告，并且在错误日志中看不到任何内容。

我还尝试下载 2.5.6 的新版本并使用相同的问题更新 configuration.php。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T01:58:47.600

您必须了解模板在 2.5 中的工作方式与在 1.5 中的工作方式大不相同。它们的行为更像普通扩展，必须使用扩展管理器进行安装和卸载。您不能只删除 1.5 中可能拥有的文件，就像您不能只将文件放置到位一样。2.5 还增加了模板样式的概念。这些本质上是存储在 template_styles 表中的参数设置集。您必须删除样式以及卸载模板本身。如果您通过使用模板管理器模板中的模板复制按钮制作了 Atomic 副本，您的副本的新样式将自动插入到数据库中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T09:43:43.047

要查找模板的副本，您可以使用*Extension Manager > Discover*：

1.  清除缓存
2.  发现
3.  安装

如果您想在更新 templateDetails.xml 后刷新 Joomla，请使用*Extension Manager > Manage*：

1.  在列表中查找模板
2.  标记它并使用*刷新缓存*

# asp.net-mvc-4 - SimpleMembership、MVC4、AuthorizeAttribute 和角色

> ID：12342398
> 
> 赞同：11
> 
> 时间：2012-09-09T19:52:42.097
> 
> 标签：asp.net-mvc-4, simplemembership

我正在尝试向我的一些 MVC4 控制器添加授权属性，只要它是一个计划`[Authorize]`或`[Authorize(Users="myuser")]`，它们就可以正常工作，但是当我添加任何类型的角色过滤时，它就会分崩离析，例如。`[Authorize(Roles="admin")]`. 然后我开始收到如下错误：

> “/”应用程序中的服务器错误。
> 
> 建立与 SQL Server 的连接时发生与网络相关或特定于实例的错误。服务器未找到或无法访问。验证实例名称是否正确以及 SQL Server 是否配置为允许远程连接。（提供者：SQL 网络接口，错误：26 - 错误定位服务器/指定的实例）
> 
> 说明：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。
> 
> SQLExpress 数据库文件自动创建错误：
> 
> 连接字符串使用应用程序 App_Data 目录中的数据库位置指定本地 Sql Server Express 实例。提供者试图自动创建应用程序服务数据库，因为提供者确定该数据库不存在。成功检查应用程序服务数据库是否存在并自动创建应用程序服务数据库需要以下配置要求：
> 
> 如果应用程序在 Windows 7 或 Windows Server 2008R2 上运行，则需要特殊的配置步骤来启用提供程序数据库的自动创建。其他信息可在以下网址获得：http: [//go.microsoft.com/fwlink/ ?LinkId=160102](http://go.microsoft.com/fwlink/?LinkId=160102). 如果应用程序的 App_Data 目录尚不存在，则 Web 服务器帐户必须具有对应用程序目录的读写权限。这是必要的，因为如果 App_Data 目录不存在，Web 服务器帐户将自动创建它。如果应用程序的 App_Data 目录已经存在，则 Web 服务器帐户只需要对应用程序的 App_Data 目录具有读写权限。这是必要的，因为 Web 服务器帐户将尝试验证 Sql Server Express 数据库是否已存在于应用程序的 App_Data 目录中。从 Web 服务器帐户撤消对 App_Data 目录的读取访问权限将阻止提供程序正确确定 Sql Server Express 数据库是否已存在。当提供程序尝试创建现有数据库的副本时，这将导致错误。需要写入权限，因为在创建新数据库时会使用 Web 服务器帐户的凭据。机器上必须安装 Sql Server Express。Web 服务器帐户的进程标识必须具有本地用户配置文件。有关如何为计算机和域帐户创建本地用户配置文件的详细信息，请参阅自述文件。
> 
> 源错误：
> 
> 在执行当前 Web 请求期间生成了未处理的异常。可以使用下面的异常堆栈跟踪来识别有关异常起源和位置的信息。
> 
> 堆栈跟踪：
> 
> [SqlException (0x80131904)：建立与 SQL Server 的连接时发生与网络相关或特定于实例的错误。服务器未找到或无法访问。验证实例名称是否正确以及 SQL Server 是否配置为允许远程连接。（提供者：SQL 网络接口，错误：26 - 错误定位服务器/指定实例）]
> System.Data.SqlClient.SqlInternalConnection.OnError（SqlException 异常，布尔 breakConnection，操作1 重试，DbConnectionOptions userOptions，DbConnectionInternal& 连接）+5311874 System.Data .ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 wrapCloseInAction) +5295167 System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose) +242
> System.Data.SqlClient.TdsParser.Connect(ServerInfo serverInfo, SqlInternalConnectionTds connHandler, Boolean ignoreSniOpenTimeout, Int64 timerExpire, Boolean encrypt, Boolean trustServerCert, Boolean integratedSecurity, Boolean withFailover) +5307115
> System.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, Boolean withFailover) +145
> System.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout) +920
> System.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance) +307
> System.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions) +434
> System.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions) +5309659
> System.Data.ProviderBase.DbConnectionFactory.CreateNonPooledConnection(DbConnection owningConnection, DbConnectionPoolGroup poolGroup, DbConnectionOptions userOptions) +38
> System.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`
> `1 retry, DbConnectionOptions userOptions) +143
> System.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 次重试) +83 System.Data.SqlClient.SqlConnection.Open() +96
> System.Web.Management.SqlServices.GetSqlConnection(String server, String user, String password, Boolean trust, String connectionString) +76
> 
> [HttpException (0x80004005): 无法连接到 SQL Server 数据库。]
> System.Web.Management.SqlServices.GetSqlConnection(String server, String user, String password, Boolean trust, String connectionString) +131
> System.Web.Management.SqlServices。 SetupApplicationServices（字符串服务器，字符串用户，字符串密码，布尔信任，字符串连接字符串，字符串数据库，字符串 dbFileName，SqlFeatures 功能，布尔安装）+89
> System.Web.Management.SqlServices.Install（字符串数据库，字符串 dbFileName，字符串连接字符串） +27
> System.Web.DataAccess.SqlConnectionHelper.CreateMdfFile（字符串 fullFileName，字符串 dataDir，字符串 connectionString）+386
> 
> 版本信息：Microsoft .NET Framework 版本：4.0.30319；ASP.NET 版本：4.0.30319.17929

我真的不确定这里发生了什么。同样，如果我删除了授权属性的角色位，那么它可以正常工作（至少可以阻止未经授权的用户），但是如果我必须将管理员用户硬编码到应用程序中，那就不好了！

知道这里发生了什么，以及如何使其正常工作吗？

谢谢，

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-09T20:07:55.300

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-13T00:48:51.490

您不需要移动第一行。我通过添加过滤器进行了测试

```
filters.Add(new InitializeSimpleMembershipAttribute()); 
```

虽然如果您正在创建一个需要您登录的站点，您可以将它放在那个控制器上，而不必将它放在所有控制器上。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-06T14:31:25.527

由 MVC 4 的 Internet 模板生成的 InitializeSimpleMembershipAttrribute 设计用于在开发人员未使用表单身份验证的情况下延迟加载 SimpleMembership 数据库。如果您使用表单身份验证，建议删除此过滤器并直接对其进行初始化。本文[介绍了如何](http://kevin-junghans.blogspot.com/2013/01/seeding-customizing-aspnet-mvc.html)执行此操作。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-07-28T14:32:39.097

在 MVC4 中，我能够将注释添加到我的家庭控制器中，并且此错误停止出现：

```
[InitializeSimpleMembership] 
```

还必须根据需要在顶部引入进口：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Transactions;
using System.Web;
using System.Web.Mvc;
using System.Web.Security;
using DotNetOpenAuth.AspNet;
using Microsoft.Web.WebPages.OAuth;
using WebMatrix.WebData; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-10-15T20:37:33.107

检查`InitializeSimpleMembershipAttribute`SimpleProviders 的使用情况、web.config 设置，还可以考虑`InitializeSimpleMembershipAttribute`在使用时专门制作授权过滤器`Authorize(Roles="any")`

# jquery - HighCharts 性能问题和替代方案

> ID：12342400
> 
> 赞同：3
> 
> 时间：2012-09-09T19:52:46.757
> 
> 标签：jquery, charts, highcharts

当我们拥有真正的大数据时，是否有性能更好的 HighCharts 替代解决方案？

例如：

尝试使用：

[http://www.highcharts.com/studies/performance.php?seriesType=line+-+no+markers&chartCount=1&seriesPerChart=2&pointsPerSeries=4000&chartWidth=500&libSource=%2Fhighcharts.src.js](http://www.highcharts.com/studies/performance.php?seriesType=line+-+no+markers&chartCount=1&seriesPerChart=2&pointsPerSeries=4000&chartWidth=500&libSource=%2Fhighcharts.src.js)

并测试添加 3 个或更多具有 4000 和更多点的系列。有很多性能问题。有解决办法吗？我能以某种方式克服这个问题，还是应该使用图表的替代解决方案？

我需要显示大约 33 个系列的图表，每个系列有 10.000 点或更多点。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-09T20:05:55.970

您是否尝试过[Highstock](http://www.highcharts.com/products/highstock)？
大数据演示：
[52,000 个点，数据分组](http://www.highcharts.com/stock/demo/data-grouping)
[170 万个点，异步加载](http://www.highcharts.com/stock/demo/lazy-loading)

认真33个系列同时10K点？！？！在javascript中也是如此？你为什么不试试闪光灯或银光？我用过[Telerik](http://demos.telerik.com/silverlight/)，它有一个不错的 silverlight 图表套件，性能也很好

# java - 在 Java 中显示字节数组内容

> ID：12342401
> 
> 赞同：0
> 
> 时间：2012-09-09T19:52:46.577
> 
> 标签：java, dialog

我有以下字节：

```
byte[] data = {(byte) 0x91,(byte) 0x92,(byte) 0x93,(byte) 0x94,(byte) 0x95,
               (byte) 0x96,(byte) 0x97,(byte) 0x98,(byte) 0x99,
               0x0A,0x0A,0x0A,0x0A,0x0A}; 
```

我想制作一个循环以制作带有字节内容的对话框：

```
(byte) 0x91
(byte) 0x92
(byte) 0x93 
```

等等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T19:56:30.510

如果您想在循环中使用字符串表示形式，可以尝试以下方法：

```
for(int index = 0; index < data.length){
    System.out.println(String.format("%02X", data[index));
} 
```

# symfony - Symfony 2 升级到 2.1：LogicException：容器扩展“安全”未注册

> ID：12342406
> 
> 赞同：3
> 
> 时间：2012-09-09T19:52:57.013
> 
> 标签：symfony, symfony-2.1

只需升级到 Symfony 2.1。一直遵循指南：

*   [https://github.com/symfony/symfony-standard/blob/master/UPGRADE.md](https://github.com/symfony/symfony-standard/blob/master/UPGRADE.md)
*   [https://github.com/symfony/symfony/blob/master/UPGRADE-2.1.md](https://github.com/symfony/symfony/blob/master/UPGRADE-2.1.md)

一切似乎都很顺利，但现在我不断收到以下异常

> LogicException：容器扩展“安全”未注册

我已将我的设置与 Symfony 2.1 的最新可用下载进行了比较，但我不明白为什么没有注册安全扩展。谁能帮我吗？

安全.yml

```
jms_security_extra:
    secure_all_services: false
    expressions: true

security:
    encoders:
        Steve\MyBundle\Entity\UserToken:
            algorithm: sha512

    role_hierarchy:
        ROLE_GUEST:
        ROLE_USER:  ROLE_GUEST
        ROLE_ADMIN: ROLE_USER

    providers:
        default:
          id: steve_my_bundle.security.provider

    firewalls:
        dev:
            pattern:  ^/(_(profiler|wdt)|css|images|js)/
            security: false

        main:
            pattern: ^/
            anonymous: ~
            form_login:
                login_path: /login
                check_path: /login_check
            logout:
                path: /logout
                target: /

    access_control:
        - { path: ^/login,  roles: IS_AUTHENTICATED_ANONYMOUSLY }
        - { path: ^/static, roles: IS_AUTHENTICATED_ANONYMOUSLY }
        - { path: ^/about,  roles: IS_AUTHENTICATED_ANONYMOUSLY }
        - { path: ^/admin,  roles: 'ROLE_ADMIN' }
        - { path: ^/,       roles: 'ROLE_USER' } 
```

配置.yml

```
imports:
    - { resource: parameters.yml }
    - { resource: security.yml }

framework:
    #esi:             ~
    #translator:      { fallback: %locale% }
    secret:          %secret%
    router:
        resource: "%kernel.root_dir%/config/routing.yml"
        strict_requirements: %kernal.debug%
    form:            true
    csrf_protection: true
    validation:      { enable_annotations: true }
    templating:      { engines: ['twig','php'] } #assets_version: SomeVersionScheme
    default_locale: %locale%
    trust_proxy_headers: false
    session:
        auto_start: ~

# Twig Configuration
twig:
    debug:            %kernel.debug%
    strict_variables: %kernel.debug%

# Assetic Configuration
assetic:
    bundles: []
    debug:          %kernel.debug%
    use_controller: false
    # java: /usr/bin/java
    filters:
        cssrewrite: ~
        # closure:
        #     jar: %kernel.root_dir%/java/compiler.jar
        # yui_css:
        #     jar: %kernel.root_dir%/java/yuicompressor-2.4.2.jar

# Doctrine Configuration
doctrine:
    dbal:
        default_connection: default
        connections:
          default:
            driver:   %ownd_source_pwnd_database_driver%
            host:     %ownd_source_pwnd_database_host%
            port:     %ownd_source_pwnd_database_port%
            dbname:   %ownd_source_pwnd_database_name%
            user:     %ownd_source_pwnd_database_user%
            password: %ownd_source_pwnd_database_password%
            charset:  UTF8
            unix_socket: /tmp/mysql.sock

    orm:
      #auto_mapping: false
      default_entity_manager: default
      entity_managers:
        default:
          connection: default
          mappings:
            SteveMyBundleBundle: ~

# Swiftmailer Configuration
swiftmailer:
    spool: { type: memory }
    transport: %mailer_transport%
    host:      %mailer_host%
    username:  %mailer_user%
    password:  %mailer_password% 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-25T16:49:49.387

似乎缓存的容器配置有问题。我通过运行以下命令解决了这个问题：

```
rm app/bootstrap.php.cache
composer install 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-11T15:41:04.283

看来你的依赖关系坏了，

尝试更新你的作曲家，如果可行，给我发回答案

```
php composer.phar update 
```

# c# - 在哪里可以下载使用 Lucene.NET 的项目示例源代码？

> ID：12342407
> 
> 赞同：0
> 
> 时间：2012-09-09T19:52:57.700
> 
> 标签：c#, asp.net, asp.net-mvc-3, lucene.net

在哪里可以下载使用 Lucene.NET for ASP.NET MVC3 Web 应用程序的项目示例源代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T20:08:35.730

已经问过并回答过：[寻找一个将 Lucene.net 与 ASP.NET 结合使用的示例](https://stackoverflow.com/questions/339740/looking-for-an-example-of-using-lucene-net-with-asp-net)。Corey Trager 引用了他的开源项目[BugTracker.net：http://www.ifdefined.com/blog/post/2009/02/Full-Text-Search-in-ASPNET-using-LuceneNET.aspx](http://www.ifdefined.com/blog/post/2009/02/Full-Text-Search-in-ASPNET-using-LuceneNET.aspx)。

# python - 在python中将值分配给字典会导致错误键中的值

> ID：12342412
> 
> 赞同：0
> 
> 时间：2012-09-09T19:53:30.853
> 
> 标签：python, dictionary

我正在通过[Project Euler](https://projecteuler.net)进行编程，但遇到了一个奇怪的问题。我想找到从两个自然数生成（自然）数的所有可能方法。我创建了一个简单的循环，我注意到奇怪的结果。例如，1 是从 3 和 1 生成的。一些调查结果如下：

```
#Importing stuff I often use in my solutions/tests
from math import sqrt, log, floor, pow, fabs, factorial
from sets import Set
from random import randint
from itertools import permutations
import sys

dub = dict()

c = 0 #Counting the number of elements in dub[18], use to track changes
for i in range (1,10):
    if 18 in dub: #setting c = len(dub[18])
        c = len(dub[18])
    for j in range (i+1,10):
        pair = [[i,j]]
        v = i+j
        if v in dub:
            dub[v].append(pair[0])
        else:
            dub[v] = pair
        v = i*j        
        if v in dub:
            dub[v].append(pair[0])
        else:
            if i == 3 and j == 8: print 'here', v # The value that is added to dub[18] instead of dub[24]
            dub[v] = pair
        if 18 in dub and not c == len(dub[18]): #This is how I found that something is wrong.
            c = len(dub[18])
            print dub[18]
            print v,i,j
            raw_input() 
```

结果如下：

```
[[2, 9]]
18 2 9

[[2, 9], [3, 6]]
18 3 6

here 24
[[2, 9], [3, 6], [3, 8]]
24 3 8 
```

我应该使用的键是 24，但列表放在键 18 下。为什么会这样？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-09T20:02:13.810

您正在为多个键重用相同的列表。线

```
pair = [[i,j]] 
```

创建一个包含一对的列表。此列表用于两个`else`分支

```
else:
    dub[v] = pair 
```

导致两个不同的键使用*相同的列表对象*。由于它是同一个对象，因此对于这两个键中的任何一个，附加到列表中的键在另一个中可见。

**编辑**：这是一个演示此行为的最小示例：

```
>>> d = {}
>>> a = []
>>> d[0] = a
>>> d[1] = a
>>> d[0].append(2)
>>> d[0]
[2]
>>> d[1]
[2] 
```

显而易见的解决方法是仅将对分配给 name `pair`，并在需要时创建一个包含该对的新列表：

```
dub = {}
for i in range (1, 10):
    for j in range (i + 1, 10):
        pair = [i, j]
        v = i + j
        if v in dub:
            dub[v].append(pair)
        else:
            dub[v] = [pair]
        v = i * j
        if v in dub:
            dub[v].append(pair)
        else:
            dub[v] = [pair] 
```

为了进一步简化此代码，您可以将`if`s替换为`dict.setdefault()`：

```
dub = {}
for i in range (1, 10):
    for j in range (i + 1, 10):
        pair = [i, j]
        dub.setdefault(i + j, []).append(pair)
        dub.setdefault(i * j, []).append(pair) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-13T04:35:39.883

如果你使用`fromkeys`，它也会导致这个问题。

> data = dict.fromkeys([int(x) for x in row[1:]], [])

解决方案是使用`setdefault`而不是`fromkeys`启动字典的默认值：

> data.setdefault(idx, []).append((row[0], val))

# frameworks - 什么是应用程序堆栈？

> ID：12342415
> 
> 赞同：0
> 
> 时间：2012-09-09T19:53:58.963
> 
> 标签：frameworks

我是一名自学成才的软件开发人员，几乎使用了我所知道的所有语言（尽管我现在在学校学习 Java）。我从桌面应用程序领域开始，但在寻找工作时滑入了 Web 应用程序领域。现在，我经常面临以下问题：

*   你用的是什么堆栈？
*   你的发布策略是什么？
*   你不喜欢 PHP？

最后一个有点笑话，我喜欢PHP。但我不确定如何回答前两个。据我所知，**堆栈**将包含您用来向公众展示您的应用程序的工具和软件。Rails 或 Zend 之类的东西将是 Web 应用程序的 MVC 处理堆栈，我假设 Qt 或 GTK+ 将是 MVC 的桌面应用程序堆栈（如果您构建这样的桌面应用程序，我已经习惯了 Window-Object-Service事物的流动）。

# xaml - 在 WinRT 中更改 ListBox 的样式

> ID：12342417
> 
> 赞同：1
> 
> 时间：2012-09-09T19:54:19.503
> 
> 标签：xaml, windows-8, windows-runtime, winrt-xaml

我想更改列表框的样式，因为在 WinRT 中，列表框在选择项目后具有浅色背景。但我希望列表框在选择一个项目后仍然具有透明背景。我怎样才能做到这一点？我不想更改 ListBoxItem，因为那里一切正常。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-09T20:23:55.007

右键单击列表框，选择编辑模板 -> 编辑副本。

导航到 Border 里面`<ControlTemplate TargetType="ListBox">`。选择背景属性，单击高级选项方块，选择重置。您现在可以将背景设置为您想要的任何内容。

# android - 安卓。一起滚动 2 个列表视图

> ID：12342419
> 
> 赞同：24
> 
> 时间：2012-09-09T19:54:31.240
> 
> 标签：android, listview, scroll

好的。我想要实现的是一种与 Excel 中的冻结窗格具有相同效果的布局。也就是说，我想要一个与主 ListView 水平滚动的标题行和一个与主 ListView 垂直滚动的左侧 ListView。在另一个维度中滚动时，标题行和左侧列表视图应保持静止。

这是xml布局：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/recordViewLayout"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="horizontal">
    <LinearLayout android:layout_width="160dp"
        android:layout_height="match_parent"
        android:orientation="vertical">

        <CheckBox
            android:id="@+id/checkBoxTop"
            android:text="Check All"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" />
        <ListView android:id="@+id/engNameList"
            android:layout_width="160dp"
            android:layout_height="wrap_content"/>
    </LinearLayout> 

    <HorizontalScrollView  
        android:layout_width="match_parent"
        android:layout_height="wrap_content">

        <LinearLayout android:id="@+id/scroll"  
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:orientation="vertical">

            <include layout="@layout/record_view_line" android:id="@+id/titleLine" />

            <ListView 
                android:id="@android:id/list"
                android:layout_height="wrap_content"
                android:layout_width="match_parent"/>

        </LinearLayout>

    </HorizontalScrollView>
</LinearLayout> 
```

然后我在 ListActivity 中使用此代码

```
public void onScroll(AbsListView view, int firstVisibleItem, int visibleItemCount, int totalItemCount) {
    View v = recordsListView.getChildAt(0);
    int top = (v == null) ? 0 : v.getTop();

((ListView)findViewById(R.id.engNameList)).setSelectionFromTop(firstVisibleItem, top);      
} 
```

当用户滚动右手时，这应该会导致左手 ListView 滚动。不幸的是，它没有。

我有一点谷歌，似乎 setSelectionFromTop() 函数不适用于嵌套在多个布局中的 ListView。

如果是这种情况，任何人都可以提出一种让他们一起滚动的方法，或者一种不同的方式来设置布局或完全不同的技术。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-09-09T20:47:28.503

**改写**

将一个 ListView 中的滚动操作传递给另一个时，我运气不佳。所以我选择了另一种方法：通过`MotionEvent`. 这让每个人都可以`ListView`计算自己的平滑滚动、快速滚动或其他任何内容。

**首先，**我们需要一些类变量：

```
ListView listView;
ListView listView2;

View clickSource;
View touchSource;

int offset = 0; 
```

我添加的每个方法`listView`都几乎相同`listView2`，唯一的区别是`listView2`引用`listView`（而不是自身）。我没有包含重复的`listView2`代码。

**其次，**让我们从 OnTouchListener 开始：

```
listView = (ListView) findViewById(R.id.engNameList);
listView.setOnTouchListener(new OnTouchListener() {
    @Override
    public boolean onTouch(View v, MotionEvent event) {
        if(touchSource == null)
            touchSource = v;

        if(v == touchSource) {
            listView2.dispatchTouchEvent(event);
            if(event.getAction() == MotionEvent.ACTION_UP) {
                clickSource = v;
                touchSource = null;
            }
        }

        return false;
    }
}); 
```

为了防止循环逻辑：`listView`调用`listView2`调用`listView`调用...我使用了一个类变量`touchSource`来确定何时`MotionEvent`应该传递 a。我假设您不希望一行 click in`listView`也 click in `listView2`，所以我使用了另一个类变量`clickSource`来防止这种情况。

**三、** OnItemClickListener：

```
listView.setOnItemClickListener(new OnItemClickListener() {
    @Override
    public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
        if(parent == clickSource) {
            // Do something with the ListView was clicked
        }
    }
}); 
```

**第四，**传递每个触摸事件并不完美，因为偶尔会出现差异。OnScrollListener 非常适合消除这些：

```
listView.setOnScrollListener(new OnScrollListener() {
    @Override
    public void onScroll(AbsListView view, int firstVisibleItem, int visibleItemCount, int totalItemCount) {
        if(view == clickSource) 
            listView2.setSelectionFromTop(firstVisibleItem, view.getChildAt(0).getTop() + offset);
    }

    @Override
    public void onScrollStateChanged(AbsListView view, int scrollState) {}
}); 
```

**（可选）最后，**您提到您遇到了麻烦，`listView`并且`listView2`从布局中的不同高度开始......我**强烈**建议修改布局以平衡 ListView，但我找到了解决此问题的方法。然而，这有点棘手。
在渲染整个布局之前，您无法计算两个布局之间的高度差，但此时没有回调......所以我使用了一个简单的处理程序：

```
Handler handler = new Handler() {
    @Override
    public void handleMessage(Message msg) {
        // Set listView's x, y coordinates in loc[0], loc[1]
        int[] loc = new int[2];
        listView.getLocationInWindow(loc);

        // Save listView's y and get listView2's coordinates
        int firstY = loc[1];
        listView2.getLocationInWindow(loc);

        offset = firstY - loc[1];
        //Log.v("Example", "offset: " + offset + " = " + firstY + " + " + loc[1]);
    }
}; 
```

我*假设*半秒的延迟足以渲染布局并在以下位置启动计时器`onResume()`：

```
handler.sendEmptyMessageDelayed(0, 500); 
```

如果您确实使用了偏移量，我想清楚`listView2`的是 OnScroll 方法减去偏移量而不是添加它：

```
listView2.setSelectionFromTop(firstVisibleItem, view.getChildAt(0).getTop() - offset); 
```

希望有帮助！

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-14T16:08:09.890

好的。我现在有答案了。问题是 .setSelectionFromTop() 仅在列表视图位于顶部布局（即未嵌套）时才有效。经过一番摸索后，我意识到我可以将我的布局设置为 RelativeLayout 并获得相同的外观，但不必为复选框和列表视图嵌套布局。这是新的布局：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/recordViewLayout"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="horizontal">

    <CheckBox android:id="@+id/checkBoxTop"
        android:text="Check All"
        android:layout_width="160dp"
        android:layout_height="wrap_content"/>

    <ListView android:id="@+id/engNameList"
        android:layout_width="160dp"
        android:layout_height="wrap_content"
        android:layout_below="@+id/checkBoxTop"/>       

    <HorizontalScrollView  
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_toRightOf="@+id/checkBoxTop">

        <LinearLayout android:id="@+id/scroll"  
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:orientation="vertical">

            <include layout="@layout/record_view_line" android:id="@+id/titleLine" />

            <ListView 
                android:id="@android:id/list"
                android:layout_height="wrap_content"
                android:layout_width="match_parent"/>

        </LinearLayout>

    </HorizontalScrollView>

</RelativeLayout> 
```

这基本上是布局的代码。

在 onCreate()

```
engListView=getListView();
engListView.setOnTouchListener(this);

recordListView=(ListView)findViewById(R.id.recordList);
recordListView.setOnScrollListener(this); 
```

和监听器方法：

```
public boolean onTouch(View arg0, MotionEvent event) {
    recordListView.dispatchTouchEvent(event);
    return false;
}

public void onScroll(AbsListView view, int firstVisibleItem, int visibleItemCount, int totalItemCount) {
    View v=view.getChildAt(0);
    if(v != null)
        engListView.setSelectionFromTop(firstVisibleItem, v.getTop());
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-02-16T13:16:47.727

该线程帮助我找到了解决我一直在努力解决的类似问题的方法。它也是基于拦截触摸事件。在这种情况下，同步适用于多个列表视图并且是完全对称的。

主要挑战是防止列表项点击传播到其他列表视图。我需要仅由最初接收到触摸事件的列表视图分派的单击和长单击，尤其包括当您刚刚触摸某个项目时的高亮反馈（拦截 onClick 事件是没有用的，因为它在调用层次结构中为时已晚）。

这样做的关键是两次拦截触摸事件。首先，初始触摸事件被转发到其他列表视图。同一个 onTouch 处理函数会捕获这些并将它们提供给 GestureDetector。在`GestureDetector`回调中，静态触摸事件（`onDown`等）被消耗（`return true`）而运动手势不是（`return false`），因此它们可以由视图本身进一步调度并触发滚动。

使用`setPositionFromTop`inside`onScroll`对我不起作用，因为它使滚动行为非常缓慢。当新的 ListViews 添加到 Syncer 时，OnScroll 用于对齐初始滚动位置。

到目前为止唯一存在的问题是上面 s1ni5t3r 提出的问题。如果您双击 listView，那么它们仍然会断开连接。

```
public class ListScrollSyncer
    implements AbsListView.OnScrollListener, OnTouchListener, OnGestureListener
{
    private GestureDetector gestureDetector;
    private Set<ListView>   listSet = new HashSet<ListView>();
    private ListView currentTouchSource;

    private int currentOffset = 0;
    private int currentPosition = 0;

    public void addList(ListView list)
    {
        listSet.add(list);
        list.setOnTouchListener(this);
        list.setSelectionFromTop(currentPosition, currentOffset);

        if (gestureDetector == null)
            gestureDetector = new GestureDetector(list.getContext(), this);
    }

    public void removeList(ListView list)
    {
        listSet.remove(list);
    }

    public boolean onTouch(View view, MotionEvent event)
    {
        ListView list = (ListView) view;

        if (currentTouchSource != null)
        {
            list.setOnScrollListener(null);
            return gestureDetector.onTouchEvent(event);
        }
        else
        {
            list.setOnScrollListener(this);
            currentTouchSource = list;

            for (ListView list : listSet)
                if (list != currentTouchSource)
                    list.dispatchTouchEvent(event);

            currentTouchSource = null;
            return false;
        }
    }

    public void onScroll(AbsListView view, int firstVisibleItem, int visibleItemCount, int totalItemCount)
    {
        if (view.getChildCount() > 0)
        {
            currentPosition = view.getFirstVisiblePosition();
            currentOffset   = view.getChildAt(0).getTop();
        }
    }

    public void onScrollStateChanged(AbsListView view, int scrollState) { }

    // GestureDetector callbacks
    public boolean onFling(MotionEvent e1, MotionEvent e2, float velocityX, float velocityY) { return false; }
    public boolean onScroll(MotionEvent e1, MotionEvent e2, float distanceX, float distanceY) { return false; }
    public boolean onSingleTapUp(MotionEvent e) { return true; }
    public boolean onDown(MotionEvent e) { return true; }
    public void onLongPress(MotionEvent e) { }
    public void onShowPress(MotionEvent e) { }
} 
```

编辑：双重问题可以通过使用状态变量来解决。

```
private boolean scrolling;

public boolean onDown(MotionEvent e) { return !scrolling; }

public void onScrollStateChanged(AbsListView view, int scrollState) 
{
    scrolling = scrollState != SCROLL_STATE_IDLE;
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-09-06T09:16:02.257

我通过将 ListView 更改为 RecyclerView 来解决它，使用 RecyclerView .addOnScrollListener 来同步滚动事件。而且没有差异，很完美！

```
private void syncScrollEvent(RecyclerView leftList, RecyclerView rightList) {

    leftList.setOnTouchListener(new View.OnTouchListener() {
        @Override
        public boolean onTouch(View v, MotionEvent event) {
            return rightList.getScrollState() != RecyclerView.SCROLL_STATE_IDLE;
        }
    });
    rightList.setOnTouchListener(new View.OnTouchListener() {
        @Override
        public boolean onTouch(View v, MotionEvent event) {
            return leftList.getScrollState() != RecyclerView.SCROLL_STATE_IDLE;
        }
    });

    leftList.addOnScrollListener(new RecyclerView.OnScrollListener() {

        @Override
        public void onScrolled(RecyclerView recyclerView, int dx, int dy) {
             if (recyclerView.getScrollState() != RecyclerView.SCROLL_STATE_IDLE) {
                 rightList.scrollBy(dx, dy);
            }
        }
    });
    rightList.addOnScrollListener(new RecyclerView.OnScrollListener() {
         @Override
        public void onScrolled(RecyclerView recyclerView, int dx, int dy) {
            if (recyclerView.getScrollState() != RecyclerView.SCROLL_STATE_IDLE) {
                leftList.scrollBy(dx, dy);
            }
        }
    });

} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-12-03T10:10:47.863

根据 Sam 的说明，我开发了一个简单的应用程序，显示两个列表视图一起滚动。实际上我的主要目的是创建一个具有固定/冻结列的水平滚动可扩展列表视图，并在完成后对其进行处理，很快就会分享它 [https://github.com/huseyinDaVinci/Android/tree/master/FrozenListViews](https://github.com/huseyinDaVinci/Android/tree/master/FrozenListViews)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-04-12T11:30:17.123

**试试下面的解决方案它适用于我的情况**

```
leftlist.setOnScrollListener(new SyncedScrollListener(rightlist));
rightlist.setOnScrollListener(new SyncedScrollListener(leftlist)); 
```

**SyncedScrollListener.java**

```
package com.xorbix.util;

import android.view.View;
import android.widget.AbsListView;
import android.widget.AbsListView.OnScrollListener;

public class SyncedScrollListener implements OnScrollListener{
    int offset;
    int oldVisibleItem = -1;
    int currentHeight;
    int prevHeight;
    private View mSyncedView;

    public SyncedScrollListener(View syncedView){

        if(syncedView == null){
            throw new IllegalArgumentException("syncedView is null");
        }

        mSyncedView = syncedView;
    }

    public void onScroll(AbsListView view, int firstVisibleItem,
            int visibleItemCount, int totalItemCount) {

        int[] location = new int[2];

        if(visibleItemCount == 0){
            return;
        }

        if(oldVisibleItem != firstVisibleItem){

            if(oldVisibleItem < firstVisibleItem){
                prevHeight = currentHeight;
                currentHeight = view.getChildAt(0).getHeight();

                offset += prevHeight;

            }else{
                currentHeight = view.getChildAt(0).getHeight();

                View prevView;
                if((prevView = view.getChildAt(firstVisibleItem - 1)) != null){
                    prevHeight = prevView.getHeight();
                }else{
                    prevHeight = 0;
                }

                offset -= currentHeight;
            }

            oldVisibleItem = firstVisibleItem;
        }

        view.getLocationOnScreen(location);
        int listContainerPosition = location[1];

        view.getChildAt(0).getLocationOnScreen(location);
        int currentLocation = location[1];

        int blah = listContainerPosition - currentLocation + offset;

        mSyncedView.scrollTo(0, blah);

    }

    public void onScrollStateChanged(AbsListView view, int scrollState) {
        // TODO Auto-generated method stub

    }
} 
```

# facebook-graph-api - Facebook 墙贴赞不计入 fql 查询

> ID：12342421
> 
> 赞同：1
> 
> 时间：2012-09-09T19:55:16.393
> 
> 标签：facebook-graph-api, video, facebook-like, facebook-timeline

我有一个应用程序，它在上传到 youtube 后在时间轴上分享视频。我们计算喜欢的人的喜欢次数。问题是每当有人喜欢个人墙上的视频时，它就没有连接到 youtube url。

时间线帖子有 13 个赞，但 FQL 仅显示 11 个，不包括分享数。

任何帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-28T13:36:20.490

Facebook好像没有给出准确的Like结果，起初以为是用户隐私设置造成的，但是和自己的朋友做了一些测试，API仍然显示like total_count和返回的like objects数量之间存在差异。这要么是一个错误，要么是 Facebook 的一个神秘的深思熟虑的决定。

请检查这些其他人问类似的问题：

*   [帖子的点赞数和点赞数据之间的区别？](https://stackoverflow.com/questions/8043467/difference-between-a-posts-likes-count-and-the-likes-data)
*   [Facebook Graph API 和 FQL 之类的对照片的计数都不正确？](https://stackoverflow.com/questions/7808391/facebook-graph-api-and-fql-like-count-on-photos-both-incorrect)
*   [喜欢表没有用户完成的所有喜欢](https://stackoverflow.com/questions/15133837/like-table-doesnt-have-all-the-likes-done-by-the-user)

# asp.net - 您可以使用 Mono Develop 直观地编辑 asp.net 项目的 html / view 部分吗？

> ID：12342422
> 
> 赞同：2
> 
> 时间：2012-09-09T19:55:21.397
> 
> 标签：asp.net, vb.net, mono, monodevelop

我已经下载并安装了 Monodevelop 的 Windows 二进制安装程序。

我开始了一个新的 web/vb.net 项目，但我真的找不到如何切换到 html 页面的“可视”视图编辑器。

我还在这里阅读了[http://www.mono-project.com/ASP.NET_Visual_Designer，MD](http://www.mono-project.com/ASP.NET_Visual_Designer)开发人员说他们现在已经将 aspnetedit 直接集成到 monodevelop 中（我想，与以前一样作为独立编辑器相反）

但是后来有关于如何安装它的说明，所以我很困惑..如果它集成在monodevelop中，为什么现在给我如何安装它的说明？然后我认为对于“集成”，他们只是说 aspneteditor 本身不再是一个不同的项目，而是存在于 monodevelop 源代码中，但由于某些原因，您仍然需要单独编译它......

还是我弄错了？

为什么 monodevelop 开发人员不能制作包含 aspnededit 的二进制文件？

如果我的方法全错了，谁能告诉我如何在 MonoDevelop 中设置和使用 AspNetEdit？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-10T00:03:50.633

根据网站的说法，编辑器还没有准备好生产，所以它没有在二进制文件中发布。您需要自己构建和安装它。

# javascript - 防止标签缓存jquery-ui

> ID：12342427
> 
> 赞同：0
> 
> 时间：2012-09-09T19:56:06.520
> 
> 标签：javascript, jquery, jquery-ui, datatables, jquery-ui-tabs

我有一组使用 jquery-ui 完成的选项卡。我不想缓存选项卡内容。所以我正在做以下事情：

```
$(".leftPanel").tabs(
  {cache : false,
   ajaxOptions : {
     cache : false,
     error : function(xhr, status, index, anchor) {
               $(anchor.hash).html("Oops ... There was an error");
             }
   }
}); 
```

这有效，并且每当我切换选项卡时它实际上都会获取数据。第一个选项卡有一个[jquery 数据](http://datatables.net)表。第二个选项卡有一个带有按钮的表单，该按钮创建另一个数据表。

现在，当第二个选项卡中生成的数据表为空时，就会出现问题。此数据表已正确生成。但是当我切换到 tab1 时，数据表中的先前值会出现“Flash of Unstyled Content”。然后会显示一条警报，显示“DataTables 警告（表 id = 'table-2'）：从第 0 行的数据源请求未知参数 '1'”。请注意，当第二个表为空时会发生这种情况。我需要解决这个问题。

提前致谢！

更新：更多信息：当我隐藏警报时，选项卡 1 中的表格会刷新并显示正确的信息。但是警报很烦人。我需要正确的方法来摆脱它。请注意，仅当第二个选项卡中的表格为空时才会发生。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T16:44:06.923

我发现问题不是由选项卡缓存引起的。我在具有特定类的所有对象上调用该方法，而我应该在具有特定 id 的元素上调用该方法。

# php - 如何使用 PHP Simple HTML DOM Parser 来解析这个？

> ID：12342430
> 
> 赞同：3
> 
> 时间：2012-09-09T19:56:18.143
> 
> 标签：php, html, parsing

这是我需要解析为 PHP 程序的 HTML 示例：

```
 <div id="dump-list">    
<div class="dump-row"> 
 <div class="dump-location odd" data-jmapping="{id: 35, point: {lng: -73.00898601, lat: 41.71727402}, category: 'office'}">

    <div class="SingleLinkNoTx">
    <a href="#10" class="loc-link">Acme Software</a><br/><strong>John Doe, MBA</strong><br/>123 Main St.<br />New York, NY 10036<br /><strong class="telephone">(212) 555-1234</strong><br/>
    </div><!-- END.SingleLinkNoTx -->

    <a href="http://www.example.com" target="_blank" class="web_link">Visit Website</a><span><br />(0.3 miles)</span>   
    <div class="loc-info">
            <div class="loc-info-text ">
        John Doe, MBA<br /><a href="http://maps.google.com/?daddr=41.71727402,-73.00898601" target="_blank">Get Directions &raquo;</a>    
        </div>

    </div>

</div> 
```

这是我想从上面的 HTML 示例中提取到 PHP 中的信息：

```
lng: -73.00898601, lat: 41.71727402
category: 'office'
Acme Software
John Doe, MBA
123 Main St.
New York, NY 10036
(212) 555-1234
http://www.example.com 
```

我曾尝试使用 PHP Simple HTML DOM Parser，但我是新手，找不到与我需要做的事情相关的有效 PHP 示例。我尝试了一些这样的 PHP 代码来理解它是如何工作的，但是 var_dump($e) 会产生大量的输出，并且在 var_dump 中有关于递归的消息。所以我迷失了如何真正使用它。非常感谢一些帮助！

```
$e = $html->find('.dump-location', 0)->find('.SingleLinkNoTx', 0);
echo $e;
var_dump($e); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-09T21:20:36.230

使用 XPath 在 HTML/XML 文档中查找和提取元素 - 特别是[SimpleXMLElement::xpath](http://us2.php.net/manual/en/simplexmlelement.xpath.php)方法。

以下示例将查找某个位置的电话号码：

```
$doc = new DOMDocument();
$doc->loadHTML('your html snippet goes here - or use loadHTMLFile()');
$xml = simplexml_import_dom($doc);
$elements = $xml->xpath('//*[contains(@class, "dump-location")]/div[@class="SingleLinkNoTx"]/strong[@class="telephone"]');
print_r($elements); 
```

最复杂的部分是 XPath 表达式。快速细分：

1.  `//`
    *   该规则告诉解析器递归地将规则应用于文档中的所有元素。
2.  `*[contains(@class, "dump-location")]`
    *   匹配任何具有`dump-location`该类的元素
3.  `/`
    *   告诉解析器仅将下一个规则应用于具有`dump-location`父元素的元素。
4.  `div[@class="SingleLinkNoTx"]`
    *   匹配任何`DIV`具有`SingleLinkNoTx`类（且没有其他类名）的元素。
5.  `strong`
    *   `STRONG`将所有标签与一个`telephone`类匹配的规则。

在问题中提供的 HTML 片段上使用此 XPath 表达式将产生如下输出。从以下位置迭代和提取信息相当容易：

```
Array
(
    [0] => SimpleXMLElement Object
        (
            [@attributes] => Array
                (
                    [class] => telephone
                )

            [0] => (212) 555-1234
        )

) 
```

如果您知道文档结构，则可以为要提取的每条信息构造一个 XPath 表达式。或者，使用更通用的 XPath 表达式（例如，检索所有`dump-location`元素的表达式）并手动迭代元素可能更简单。

# c# - 我需要在 C# 中使用 sendmessage 选择 sysListView32 的一项

> ID：12342433
> 
> 赞同：0
> 
> 时间：2012-09-09T19:56:34.593
> 
> 标签：c#, winapi, listview, sendmessage

我正在自动化元交易者问题。我需要使用 C# 中的 sendmessage 在 syslistview32 (Listview) 上选择一个项目。任何人都可以帮助我吗？

普拉泰克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T21:03:50.827

ListView 消息记录[在这里](http://msdn.microsoft.com/en-us/library/windows/desktop/ff485961%28v=vs.85%29.aspx)。

最简单的方法可能是使用`LVM_SETITEMSTATE`消息。它接收指向结构的指针`LVITEM`，因此可能需要一些编组技巧。

要设置的实际字段实际上很容易：

*   `mask = LVIF_STATE`
*   `state = LVIS_SELECTED | LVIS_FOCUSED`
*   `stateMask = LVIS_SELECTED | LVIS_FOCUSED`
*   `iItem = <the index of the item to be selected>`

这应该足以选择您想要的项目。

# objective-c - 在 OSX 上的 Objective-C 中发送/检索 RAW 以太网帧（ARP 请求）

> ID：12342434
> 
> 赞同：0
> 
> 时间：2012-09-09T19:56:40.120
> 
> 标签：objective-c, macos, sockets, ethernet

是否可以在 Objective-C 中发送/检索 ARP 帧？

我想通过 ARP 请求从代码中检查本地网络中多个设备的可用性。

我认为这是唯一的方法，因为 ICMP 可能已禁用，并且并非所有设备都安装了 bonjure。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T20:15:37.393

去吧。任何你可以在 C 中做的事情，你都可以在 Objective-C 中做。

# twitter-bootstrap - 带有模板内容的引导弹出框

> ID：12342435
> 
> 赞同：2
> 
> 时间：2012-09-09T19:56:40.243
> 
> 标签：twitter-bootstrap, knockout.js, popover

如何在引导弹出窗口中使用淘汰模板作为内容？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-09T21:08:04.937

目前尚不清楚您在寻找什么。这是一个示例小提琴，希望对您有所帮助：

[http://jsfiddle.net/V3nVd/3/](http://jsfiddle.net/V3nVd/3/)

它展示了两个概念：

1) 使用自定义绑定添加所需的 Popover 属性

2）使用模板封装用于创建带有弹出框的按钮的HTML（包括自定义绑定）。

以下是您可以发送到 Popover的[选项。](http://twitter.github.com/bootstrap/javascript.html#popovers)

* * *

编辑：http: [//jsfiddle.net/V3nVd/7/](http://jsfiddle.net/V3nVd/7/)

更新了 fiddle 以显示从呈现的模板中提取 html 内容。还要注意在弹出框初始化中使用 html 选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T10:03:16.033

如果我将文本绑定更改为值绑定，则不会呈现该值，如果我使用 jquery 选择具有 ID 的元素并在控制台中打印她的值，则该值是正确的，但未显示。

```
<center>
  <h2>Popover Demo</h2>
  <div data-bind="template: {name: 'popoverTemplate', foreach: commands}"></div>
</center>

<script type="text/html" id="popoverTemplate">
    <div style="display:none;" data-bind="attr: {'id': $data.command + 'Content'}, template: {name: 'popoverContent', data: $data.content}"></div>    
    <a href="#" class="btn" data-bind='text: $data.command, popover: $data'></a>
</script>

<script type="text/html" id="popoverContent">
    <p>Name: <input type="text" data-bind='value: $data.name'></p>
    <p>Email: <b data-bind='text: $data.email'></b></p>
</script> 
```

​</p>

这是示例[http://jsfiddle.net/mounir/V3nVd/15/](http://jsfiddle.net/mounir/V3nVd/15/)

谢谢

**编辑：**

这是一个完整的工作示例，当我们希望将按钮关联到例如根视图模型中的函数时，我将其更改`ko.applyBindings()`为`ko.applyBindingsToDescendants`包含绑定上下文 $root 和 $parent。

```
$(element).click(function() {
            $(this).popover('toggle');
            var thePopover = document.getElementById(attribute.id+"-popover");
            childBindingContext = bindingContext.createChildContext(viewModel);
            ko.applyBindingsToDescendants(childBindingContext, thePopover);
        }); 
```

看看@JSFiddle [http://jsfiddle.net/mounir/Mv3nP/4/](http://jsfiddle.net/mounir/Mv3nP/4/)

# javascript - 查找带有边框的 HTML5 Canvas（单击）事件的坐标

> ID：12342438
> 
> 赞同：6
> 
> 时间：2012-09-09T19:56:47.667
> 
> 标签：javascript, html, css, canvas, dom-events

Stack Overflow 上有很多关于如何获取 Canvas 元素上的事件相对于 Canvas 本身的坐标的答案。我正在使用以下**解决**方案`getEventPosition`（

 **```
/**** This solution gives me an offset equal to the border size
 **** when the canvas has a border. Example:
 **** <canvas style='border: 10px solid black; background: #333;' id='gauge_canvas' width='500' height='500'></canvas>
 ****/

// Get DOM element position on page
this.getPosition = function(obj) {
    var x = 0, y = 0;
    if (obj.offsetParent) {
        do {
            x += obj.offsetLeft;
            y += obj.offsetTop;
            obj = obj.offsetParent;
        } while (obj);
    }
    return {'x': x, 'y': y};
};

// Get mouse event position in DOM element (don't know how to use scale yet).
this.getEventPosition = function(e, obj, aux_e, scale) {

    var evt, docX, docY, pos;

    evt = (e ? e : window.event);
    if (evt.pageX || evt.pageY) {
        docX = evt.pageX;
        docY = evt.pageY;
    } else if (evt.clientX || evt.clientY) {
        docX = evt.clientX + document.body.scrollLeft +
            document.documentElement.scrollLeft;
        docY = evt.clientY + document.body.scrollTop +
            document.documentElement.scrollTop;
    }
    // This works on hammer.js
    else if (typeof aux_e !== 'undefined') {
        docX = aux_e.touches[0].x;
        docY = aux_e.touches[0].y;
    }
    pos = this.getPosition(obj);
    if (typeof scale === 'undefined') {
        scale = 1;
    }
    return {'x': (docX - pos.x) / scale, 'y': (docY - pos.y) / scale};
}; 
```

由于此代码属于我的库，并且可以采用用户提供的任何画布元素，因此当用户为库提供带边框的画布时，事情就会破裂。有没有考虑到边界的解决方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-09T21:05:25.740

这是我在最近的实验中一直使用的。

[http://jsfiddle.net/simonsarris/te8GQ/5/](http://jsfiddle.net/simonsarris/te8GQ/5/)

```
var stylePaddingLeft = parseInt(document.defaultView.getComputedStyle(can, undefined)['paddingLeft'], 10) || 0;
var stylePaddingTop = parseInt(document.defaultView.getComputedStyle(can, undefined)['paddingTop'], 10) || 0;
var styleBorderLeft = parseInt(document.defaultView.getComputedStyle(can, undefined)['borderLeftWidth'], 10) || 0;
var styleBorderTop = parseInt(document.defaultView.getComputedStyle(can, undefined)['borderTopWidth'], 10) || 0;
var html = document.body.parentNode;
var htmlTop = html.offsetTop;
var htmlLeft = html.offsetLeft;

function getMouse(e) {
    var element = can,
        offsetX = 0,
        offsetY = 0,
        mx, my;

    // Compute the total offset
    if (element.offsetParent !== undefined) {
        do {
            offsetX += element.offsetLeft;
            offsetY += element.offsetTop;
        } while ((element = element.offsetParent));
    }

    // Add padding and border style widths to offset
    // Also add the <html> offsets in case there's a position:fixed bar
    offsetX += stylePaddingLeft + styleBorderLeft + htmlLeft;
    offsetY += stylePaddingTop + styleBorderTop + htmlTop;

    mx = e.pageX - offsetX;
    my = e.pageY - offsetY;

    // We return a simple javascript object (a hash) with x and y defined
    return {
        x: mx,
        y: my
    };
} 
```

它适用于任何边框和填充，也适用于在偏移 HTML 的对象中填充的页面（如 stumbleupon 栏）。如果浏览器被缩放，它也可以工作。

它似乎在触摸设备上也能正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T20:01:47.727

试试这个：

```
this.getPosition = function(obj) {
    var x = 0, y = 0;
    if (obj.offsetParent) {
        do {
            x += obj.clientLeft;
            y += obj.clientTop;
            obj = obj.offsetParent;
        } while (obj);
    }
    return {'x': x, 'y': y};
}; 
```

`clientLeft`并`clientTop`包括边界，但`offsetLeft`不`offsetTop`包括。

如果您不想包含其他元素，也许以下内容会起作用：

```
this.getPosition = function(obj) {
    return{'x': obj.clientLeft,
           'y': obj.clientTop};
}; 
```**

# java - 使用包含可编辑 JTextArea 的 JPanel 渲染 JTree 叶

> ID：12342440
> 
> 赞同：2
> 
> 时间：2012-09-09T19:56:56.480
> 
> 标签：java, swing, editor, jtree, jtextarea

我正在尝试渲染一个 JTree 叶以具有一个包含可编辑 JTextArea 的 JPanel，以便用户可以输入文本并能够在添加文本时向下滚动，

并且还使用包装器来限制文本的宽度，使其向下延伸以允许更多空间而不是左右滚动。

到目前为止，我已经实现了以下内容，但它看起来很奇怪，当我运行代码时，好像有两个叶子，默认的一个和渲染的。任何类型的帮助都将受到高度赞赏。

我只想知道我想做的事情是否可以实现，如果不能，我在哪里可以修改。

我不想更改图标，只更改叶子。

```
import java.awt.Component;
import java.awt.event.ComponentEvent;
import java.awt.event.ComponentListener;
import java.awt.event.ItemEvent;
import java.util.EventObject;
import javax.swing.*;
import javax.swing.tree.DefaultTreeCellRenderer;
import javax.swing.tree.TreeCellEditor;
import javax.swing.tree.TreeCellRenderer;

/**
 *
 * @author Razaractor
 */
class LeafRenderer extends AbstractCellEditor implements
        TreeCellRenderer, TreeCellEditor {

    //Text area to be place on JPanel
    JTextArea text = new JTextArea();
    DefaultTreeCellRenderer nonLeafRenderer = new DefaultTreeCellRenderer();

    @Override
    public Object getCellEditorValue() {
        return text.getText();
    }

    @Override
    public boolean isCellEditable(final EventObject event) {
        return true;
    }

    @Override
    public Component getTreeCellRendererComponent(
            final JTree tree, final Object value,
            final boolean selected,
            final boolean expanded,
            final boolean leaf,
            final int row,
            final boolean hasFocus) {
        //Default leaf
        Component render = nonLeafRenderer.getTreeCellRendererComponent(tree,
                value, selected, expanded, leaf, row, hasFocus);
        if (selected && leaf) {
            final JPanel panel = new JPanel();
            BoxLayout layout = new BoxLayout(panel, BoxLayout.X_AXIS);
            panel.setLayout(layout);
            text.setColumns(20);
            text.setLineWrap(true);
            text.setRows(5);
            text.setWrapStyleWord(true);
            text = new JTextArea(String.valueOf(value));
            text.addComponentListener(new ComponentListener() {

                @Override
                public void componentResized(ComponentEvent e) {
                    panel.setSize(panel.getPreferredSize());
                }

                @Override
                public void componentShown(ComponentEvent e) {
                }

                @Override
                public void componentMoved(ComponentEvent e) {
                }

                @Override
                public void componentHidden(ComponentEvent e) {
                }
            });
            JScrollPane scroll = new JScrollPane(text);
            panel.add(scroll);
            render = panel;
            return panel;
        }
        return render;
    }

    @Override
    public Component getTreeCellEditorComponent(
            final JTree tree,
            final Object value,
            final boolean isSelected,
            final boolean expanded,
            final boolean leaf,
            final int row) {
        Component editor = nonLeafRenderer.getTreeCellRendererComponent(tree,
                value, true, expanded, leaf, row, true);
        final JPanel p = new JPanel();
        if (editor instanceof JPanel) {
            editor = (JPanel) editor;
        }
        return editor;
    }

    public void itemStateChanged(ItemEvent itemEvent) {
        if (stopCellEditing()) {
            fireEditingStopped();
        }
    }
} 
```

![在此处输入图像描述](../Images/ba0075f7574132206121f8c8a2b45a61.png)

![在此处输入图像描述](../Images/768bd1e51a1cb8a6c388d18d5f78b348.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T21:47:03.943

我不知道您真正想要实现什么，但请尝试这些更改。

```
import java.awt.Component;
import java.awt.Dimension;
import java.awt.event.ComponentEvent;
import java.awt.event.ComponentListener;
import java.awt.event.ItemEvent;
import java.util.EventObject;
import javax.swing.*;
import javax.swing.tree.DefaultTreeCellRenderer;
import javax.swing.tree.TreeCellEditor;
import javax.swing.tree.TreeCellRenderer;

/**
 *
 * @author Razaractor
 */
class LeafRenderer extends AbstractCellEditor implements
        TreeCellRenderer, TreeCellEditor {

    //Text area to be place on JPanel
    JTextArea text = new JTextArea();
    DefaultTreeCellRenderer nonLeafRenderer = new DefaultTreeCellRenderer();

    @Override
    public Object getCellEditorValue() {
        return text.getText();
    }

    @Override
    public boolean isCellEditable(final EventObject event) {
        return true;
    }

    @Override
    public Component getTreeCellRendererComponent(
            final JTree tree, final Object value,
            final boolean selected,
            final boolean expanded,
            final boolean leaf,
            final int row,
            final boolean hasFocus) {
        //Default leaf
        Component render = nonLeafRenderer.getTreeCellRendererComponent(tree,
                value, selected, expanded, leaf, row, hasFocus);
        if (selected && leaf) {
            final JPanel panel = new JPanel();
            BoxLayout layout = new BoxLayout(panel, BoxLayout.X_AXIS);
            panel.setLayout(layout);
            //Changed code
            //moved from
            text = new JTextArea(String.valueOf(value));
            text.setColumns(20);
            text.setLineWrap(true);
            text.setRows(5);
            text.setWrapStyleWord(true);
            //here. You were creating just ordinary JTextArea.
            text.addComponentListener(new ComponentListener() {

                @Override
                public void componentResized(ComponentEvent e) {
                    panel.setSize(panel.getPreferredSize());
                }

                @Override
                public void componentShown(ComponentEvent e) {
                }

                @Override
                public void componentMoved(ComponentEvent e) {
                }

                @Override
                public void componentHidden(ComponentEvent e) {
                }
            });
            JScrollPane scroll = new JScrollPane(text);
            //changed Code
            //if you want to hide scrollbars uncomment one of these
            //scroll.getVerticalScrollBar().setPreferredSize(new Dimension(0, 0));
            //scroll.getHorizontalScrollBar().setPreferredSize(new Dimension(0, 0));
            panel.add(scroll);
            render = panel;
            return panel;
        }
        return render;
    }

    @Override
    public Component getTreeCellEditorComponent(
            final JTree tree,
            final Object value,
            final boolean isSelected,
            final boolean expanded,
            final boolean leaf,
            final int row) {
        Component editor = nonLeafRenderer.getTreeCellRendererComponent(tree,
                value, true, expanded, leaf, row, true);
        final JPanel p = new JPanel();
        if (editor instanceof JPanel) {
            editor = (JPanel) editor;
        }
        return editor;
    }

    public void itemStateChanged(ItemEvent itemEvent) {
        if (stopCellEditing()) {
            fireEditingStopped();
        }
    }
} 
```

# php - 如何为会话变量添加令牌？

> ID：12342442
> 
> 赞同：0
> 
> 时间：2012-09-09T19:57:31.247
> 
> 标签：php, token

我遇到了会话变量的问题。问题是，对于会话变量，经过一段时间后，如果用户刷新页面或类似的东西，它将开始显示通知，说明存在一些未定义的索引。

现在我仍然想使用会话变量，但我怎样才能让会话持续更长时间？我听说我们开发人员可以使用类似令牌的东西，这样即使用户闲置一两天甚至更长时间，当他们刷新页面或导航到另一个页面时，也不会出现任何未定义索引的通知在屏幕上。

有没有人有任何使用令牌的例子？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T20:12:45.713

会话变量用于会话 - 默认情况下，它们的生命周期很短（20 分钟左右）。

这意味着当您的会话超时时，您将开始看到不再定义的会话变量的通知，当您尝试使用它们时（至少如果您启用了通知的错误报告）。

通常，您检查会话变量是否存在 - 如果不存在则处理它：

```
if( ! isset( $_SESSION['my_var'] ) )
{
  // This session doesn't exist anymore - I'd better head over to the start page...
  header('Location: index.php');
  exit;
} 
```

现在，我不建议您将会话的生命周期设置为两三天。相反，您应该查看[设置 cookie](http://php.net/setcookie)并为其中的每一个定义内容和生命周期：

```
setcookie('my_var', 'My Value', time() + 60 * 60 * 24 * 3); // a cookie lasting three days 
```

但是，如果您不检查 cookie 的存在，您将在第四天的通知中遇到同样的问题：

```
if( ! isset( $_COOKIES['my_var'] ) )
{
  // This cookie doesn't exist anymore - I'd better head over to the start page...
  header('Location: index.php');
  exit;
} 
```

# javascript - 根据当前幻灯片删除“上一张”和“下一张”

> ID：12342445
> 
> 赞同：0
> 
> 时间：2012-09-09T19:57:51.587
> 
> 标签：javascript, jquery, slideshow

我正在尝试根据当前幻灯片删除/隐藏“上一个”或“下一个”按钮。

如果用户已经到了终点，他将只能向后移动，如果他在起点，他只能向前。

我正在使用 AnythingSlider jQuery 插件。可以在这里找到：[http ://css-tricks.com/anythingslider-jquery-plugin/](http://css-tricks.com/anythingslider-jquery-plugin/)

JavaScript 代码可以在这里找到：[https ://github.com/CSS-Tricks/AnythingSlider/blob/master/js/jquery.anythingslider.js](https://github.com/CSS-Tricks/AnythingSlider/blob/master/js/jquery.anythingslider.js)

悬停，我更愿意将参数传递给任何滑块函数。因为我相信它会让它更加用户友好（特别是对于那些将来会阅读这个问题的人）。

基本上我们正在谈论添加一个新选项。

先感谢您。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-09T20:50:35.130

所以让我们从逻辑思维开始。我们需要找到什么？单击下一个幻灯片按钮后，我们需要隐藏下一个箭头。或者如果 Prev Slide 按钮是第一张图片 - 我们需要隐藏 prev 按钮。所以..似乎一开始我们需要找到滚动页面操作。
我查看了代码（天哪... 900 行），最后在**第 518 行**找到了这样的代码：

```
base.gotoPage = function(page, autoplay, callback, time) { 
```

调用此函数以将页面从一个滚动到另一个。所以我们“需要更深入”。在代码中我们可以找到导航更新功能。**第 569 行**：

```
// Set visual
if (o.buildNavigation){
    base.setNavigation(base.targetPage);
} 
```

我们只需要添加隐藏箭头的新功能，只需检查它是最后一页还是第一页。让我们走吧（在**第 572 行**插入之后）：

```
if (o.showNullArrows){
    base.hideNullArrows(base.targetPage);
} 
```

所以在这里我们绑定了动作。让我们向下滚动并粘贴完整的功能代码。例如，在**第 692 行**之后：

```
base.hideNullArrows = function(page){
    if(page==0) 
        base.$back.hide();
    if(page==base.pages) 
        base.$forward.hide();
}; 
```

好的，现在我们在更改页面后有了完整的绑定操作调用。但是..还有另一个滚动页面的功能！**第 660 行**：

```
base.setCurrentPage = function(page, move) { 
```

嗯..我猜..现在你知道该怎么处理这个了。祝你好运 ：）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-09T20:50:53.347

它在文档中。你必须搜索一下它:)。

这是一个 jsfiddle：http: [//jsfiddle.net/Mottie/ycUB6/85/](http://jsfiddle.net/Mottie/ycUB6/85/)

```
$('#slider').anythingSlider({

    // if false, the slider will not wrap
    infiniteSlides: false,

    // If true & the slideshow is active, the  slideshow will stop on the last page. This also stops the rewind effect  when infiniteSlides is false.
    stopAtEnd: true

});​ 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-09T20:02:56.010

您应该尝试自己查看代码，并在中间某处创建一个 if 语句，并尝试找到某种键来告诉您在哪个图像上。

# mysql - 结合 DROP USER 和 DROP DATABASE 与 SELECT .. WHERE 查询？

> ID：12342448
> 
> 赞同：2
> 
> 时间：2012-09-09T19:58:16.457
> 
> 标签：mysql, sql, bash

我想做一个非常简单的事情，[复制mysql的交互式mysql_secure_installation脚本的功能](https://superuser.com/questions/472013/how-to-secure-mysql-using-command-line)。我的问题是 MySQL 中是否有一种简单的内置方法可以将 SELECT 查询的输出与 DROP 用户或 DROP 数据库脚本的输入结合起来？

例如，如果我想删除所有密码为空的用户。我怎么能用 DROP USER 语句做到这一点？我知道一个明显的解决方案是运行所有内容，例如从 Python 脚本，

1.  运行查询`mysql -Bse "select..."`
2.  用一些程序解析输出
3.  构造 drop 查询
4.  运行。

有没有一种简单的方法可以在简单的 SQL 查询中做到这一点？我在这里看到了一些例子，但我不会说它简单：[https ://stackoverflow.com/a/12097567/518169](https://stackoverflow.com/a/12097567/518169)

您会建议进行组合查询，还是仅使用 Python 或 bash 脚本/sed 解析输出？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-09T21:34:27.310

您可以动态构建 SQL，例如：

```
SELECT CONCAT('DROP USER ', GROUP_CONCAT(QUOTE(User), '@', QUOTE(Host)))
INTO   @sql
FROM   mysql.user
WHERE  PASSWORD = '' 
```

然后从中[准备一个声明：](http://dev.mysql.com/doc/en/sql-syntax-prepared-statements.html)

```
PREPARE stmt FROM @sql 
```

然后执行该语句：

```
EXECUTE stmt 
```

最后，释放准备好的语句：

```
DEALLOCATE PREPARE stmt 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-12-11T13:37:20.980

我的解决方案是使用`--skip-column-names`标志并将`SELECT CONCAT(..)`查询的输出传送回另一个 mysql 会话：

```
echo 'select concat("DROP USER ",user,"@\"",host,"\";") from mysql.user where User = "alex"' \
| mysql -uroot --skip-column-names \
| mysql -uroot 
```

来源[https://stackoverflow.com/a/47902078/410939](https://stackoverflow.com/a/47902078/410939)

# linux - 我应该使用哪个工具从字符串中提取数据？

> ID：12342451
> 
> 赞同：2
> 
> 时间：2012-09-09T19:58:24.047
> 
> 标签：linux, bash, sed, awk

作为一个全新的 Linux 用户，我从未（真正）使用过`sed`和`awk`（或任何其他）工具来解析文本。我想从中提取

> 速度：1624.127424 Kib/s in 9.410000 秒

以秒为单位的时间值，就在`seconds`单词之前，

我应该为此研究哪个工具？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-09T20:00:41.237

您可以使用许多工具，但[`awk`](http://www.gnu.org/software/gawk/manual/gawk.html)都可以：

```
echo "Speed : 1624.127424 Kib/s in 9.410000 seconds" | awk '{print $6}' 
```

或（如果您的数据在文件中）：

```
awk '{print $6}' data.txt 
```

给你

```
9.410000 
```

*说明*：

这假设您感兴趣的值在行上的相对位置将保持不变（在这种情况下是第 6 个空格分隔的字段），相应地进行调整。

`awk`将输入行拆分为基于空格的字段。您感兴趣的字段是第 6 个字段，因此您使用`$6`.

或者，您也可以使用`awk '{print $(NF-1)}'`打印行上的倒数第二个字段（`NF`是一个 awk 变量，它知道给定行上的字段数）。这提供了更多的灵活性，因为它可以使用长度线（即字段数），只要您感兴趣的字段是倒数第二个）。

--

[`cut`](http://linux.die.net/man/1/cut)将是另一种也可以使用的工具：

```
echo "Speed : 1624.127424 Kib/s in 9.410000 seconds" | cut -d' ' -f 6 
```

在这种情况下，根据空格分隔符（由 指定`-d`）分割行，我们再次对第 6 个字段 ( `-f 6`) 感兴趣。

还有其他方法，但这两种方法似乎很直接，首先想到了。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-09T20:35:23.453

或者，如果您不知道它在字符串中的确切位置，但您知道它在“秒”一词之前，则可以使用`sed`. 这涉及到正则表达式，它不像计算字段那么简​​单，但它们可以让您从可能没有这种严格约束格式的字符串中获取数据。这是一种方式（这`<<<`只是将字符串作为输入提供给命令的另一种方式）：

```
sed -n 's/^.* \([0-9.]\+\) seconds.*$/\1/p'  <<<"Speed : 1624.127424 Kib/s in 9.410000 seconds" 
```

由于只有一行输入，`-n`and`/p`在这里是无关的，但它们形成了一个有用的模式：它们告诉`sed`默认情况下不要打印所有行，而只打印搜索和替换成功的行。

该`s/old/new/`语法执行搜索和替换，其中“旧”部分是正则表达式模式。

该模式`[0-9.]\+ seconds`匹配一​​个或多个数字或句点，后跟一个空格和单词“秒”。在模式的一部分周围放置反斜杠括号会导致与该模式的该部分匹配的实际字符串保存在变量中以供以后使用；所以`\([0-9.]\+\) seconds`捕获所需的数字。

*因为*我们只想打印那个值，所以我们把它放在`^.*`匹配“从行首开始的所有内容”和`.*$`匹配“直到行尾的所有内容”之间。这样一来，整条线都将被替换。然而，因为`.*`是贪心的，如果我们把它放在模式前面，它会吃掉除我们数字的最后一位以外的所有数字，这是我们不想要的。在模式中添加数字前的空格可以防止这种情况发生。

我们用什么代替线？With `\1`，它是匹配（第一对）反斜杠括号之间的模式部分的字符串。

**编辑添加：**

Perl 未在问题中列出，但与上述方法类似的`sed`方法是：

```
perl -lne 'print $1 if /([0-9.]+) seconds/'  <<<"Speed : 1624.127424 Kib/s in 9.410000 seconds" 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-10T09:48:32.123

只是为了完成，perl 可以在类似 awk 的模式下运行。假设您的数据在，那么`data.txt`。

```
$ perl -lane 'print $F[5] data.txt'
9.410000 
```

`-a`打开自动拆分模式——perl 会自动将空格上的输入行拆分到 @F 数组中。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-09T20:10:07.403

如果变量中有单个字符串，则可以使用 shell 本身。如果您知道它是第六个字段（就像@Levon 的 awk 解决方案假设的那样），您可以这样做：

```
set -- $variable
seconds=$6 
```

或者如果你知道单词后面跟着单词`seconds`，你可以使用字符串替换；

```
prefix=${variable%\ seconds*}
seconds=${prefix##*\ } 
```

（临时变量包含空格后的任何内容，“秒”被修剪掉的原始变量。我们同样将所有内容从开头的最后一个空格修剪掉。）

不要低估外壳，它用途广泛，尽管有时有些古怪。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-09T20:01:34.893

另外，`cut`.

```
echo "Speed : 1624.127424 Kib/s in 9.410000 seconds" | cut -f 6 -d' ' 
```

文档（摘录）：

> `cut`- 从每行文件中删除部分
> 
> **`-d, --delimiter=DELIM`**
> 
> 使用`DELIM`而不是`TAB`用于字段分隔符
> 
> **`-f, --fields=LIST`**
> 
> 仅选择这些字段；还打印任何不包含分隔符的行，除非`-s`指定了该选项

# ios - 核心数据一对多关系。许多人出现

> ID：12342452
> 
> 赞同：0
> 
> 时间：2012-09-09T19:58:49.343
> 
> 标签：ios, xcode, cocoa-touch, core-data

我在核心数据中设置了一对多关系。我可以从“主”实体查看/添加/删除对象，但是现在我想查看/添加/删除对象到许多“子”实体，每个主实体应该有单独的子对象列表。

我试过这段代码：

```
NSManagedObjectContext *context = [[DataSingleton sharedSingleton] thisMain].managedObjectContext;
NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];
NSEntityDescription *entity = [NSEntityDescription
                               entityForName:@"Subs" inManagedObjectContext:context];
[fetchRequest setEntity:entity];

NSError *error;
NSArray *fetchedObjects = [context executeFetchRequest:fetchRequest error:&error];

wolArray = [NSMutableArray arrayWithArray:fetchedObjects]; 
```

[[DataSingleton sharedSingleton] thisMain] 是我试图获取 Subs 的 Main。我做错了吗？它似乎给了我所有电源的所有 Subs。

现在有可能我将它们添加错了，并且它们没有被添加到 Main 的 Subs 中（如果那可能吗？）

这就是我添加它们的方式：

```
NSManagedObjectContext *context = [[DataSingleton sharedSingleton] thisMain].managedObjectContext;
Subs *subsInfo = [NSEntityDescription
                                insertNewObjectForEntityForName:@"Subs"
                                inManagedObjectContext:context];
subsInfo.name = [newDevice objectForKey:@"name"];
subsInfo.address = [newDevice objectForKey:@"address"];
subsInfo.post = [newDevice objectForKey:@"post"];
NSError *error;
if (![context save:&error]) {
    NSLog(@"Whoops, couldn't save: %@", [error localizedDescription]);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-09T20:34:46.150

如果`thisMain`是“主”对象并且`subs`是从“主”到“子”的一对多关系，那么你可以这样做

```
NSArray *thisSubs = [thisMain.subs allObjects]; 
```

获取所有“Subs”的数组`thisMain`。不需要获取请求。

对于您的第二个任务，您需要定义从“Subs”到“Main”的逆关系“main”。当您创建了新的“Subs”对象`subsInfo`后，

```
subsInfo.main = thisMain; 
```

将其添加到主对象。

# ruby-on-rails - 为什么 Rails 报告缓存未命中？

> ID：12342453
> 
> 赞同：0
> 
> 时间：2012-09-09T19:58:49.600
> 
> 标签：ruby-on-rails, ruby-on-rails-3, caching

我为我的应用程序中的某些操作启用了操作缓存。当我在生产模式下运行时（启用缓存，使用内存缓存），我在第一个请求时得到以下输出：

```
cache: [GET /users/user72] miss
Started GET "/users/user72" for 127.0.0.1 at 2012-09-09 20:46:10 +0100
Processing by UsersController#show as HTML
Parameters: {"username"=>"user72", "user"=>{"username"=>"user72"}}
Read fragment views/localhost:4000/users/user72 (0.0ms)
Write fragment views/localhost:4000/users/user72 (0.0ms)
Rendered text template within layouts/application (0.0ms)
Completed 200 OK in 87ms (Views: 0.2ms | ActiveRecord: 9.7ms) 
```

都好。然后在第二个请求中：

```
cache: [GET /users/user72] miss
Started GET "/users/user72" for 127.0.0.1 at 2012-09-09 20:46:11 +0100
Processing by UsersController#show as HTML
Parameters: {"username"=>"user72", "user"=>{"username"=>"user72"}}    
Read fragment views/localhost:4000/users/user72 (0.0ms)
Rendered text template within layouts/application (0.0ms)
Completed 200 OK in 5ms 
```

看起来像我期望的那样从缓存中提供了第二个请求，但似乎被报告为缓存未命中。有谁知道为什么？我错了吗，真的是缓存未命中吗？还是 Rails 在说谎？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T20:00:24.253

第一次缓存未命中似乎是页面缓存检查。

第二个是片段缓存检查，这很好。

# asp.net - 解析 ASP.NET 网站细节

> ID：12342454
> 
> 赞同：0
> 
> 时间：2012-09-09T19:58:52.570
> 
> 标签：asp.net, parsing, fiddler

我为许多站点编写了许多解析器（可以从 Windows UI 调用某些站点功能的实用程序）。这个网站是用 PHP、Perl、Python 编写的……而且一切正常。但现在我需要为 ASP.NET 站点编写相同的实用程序。而且我发现了一个大问题。

当我尝试重复成功的网络会话时（我只使用 Fiddler->Composer 和以前成功的网络会话数据）我得到了错误。不是错误，但与成功会话的结果不同。所以我可以从浏览器登录网站（输入登录名和密码并按下按钮）。但是当我从 Fiddler 调用**完全相同**的 POST 请求时，我没有登录用户。

我发现所有网站都基于一种*形式*（不采取行动）。还有 __EVENTTARGET、__EVENTARGUMENT、__VIEWSTATE 变量。前两个是空的。还有很多其他变量。所以网站写成ASP.NET。也许我需要一些特殊的细微差别来使用 ASP.NET 站点？或者它只是对这个网站的一些程序员保护？它可以是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T20:08:56.633

ViewState 依赖于显示的先前页面的状态，因此您需要重新创建整个流程并每次重新发送视图状态，尝试查看 Visual Studio 负载测试组件是如何做到的。

# python - Python 中 `len()` 函数的大写法是什么？

> ID：12342457
> 
> 赞同：9
> 
> 时间：2012-09-09T19:59:32.417
> 
> 标签：python, big-o

> **可能重复：**
> [len() 函数的成本](https://stackoverflow.com/questions/1115313/cost-of-len-function)

是否`len()`遍历列表中的对象然后返回它们的计数？因此给它一个**O(n)**。

或者....

python列表是否保留附加到它并从中删除的任何对象的计数，然后在`len()`调用时简单地返回这个“计数”？因此给它**O(1)**。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-09T20:00:28.100

Python 列表知道自己的长度；`len`花费[O(1) 时间](http://docs.python.org/faq/design.html#how-are-lists-implemented)。[列表实际上是数组](http://docs.python.org/faq/design.html#how-are-lists-implemented)`length`，而不是像 Lisp 中那样需要线性时间的链表。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-09-09T20:00:55.667

对于定义 的所有内置对象`__len__()`，它将是 O(1)。如果您`__len__()`为自己的对象实现，它可能是任何东西。

# multithreading - Perl 中的多线程

> ID：12342458
> 
> 赞同：3
> 
> 时间：2012-09-09T19:59:35.153
> 
> 标签：multithreading, perl

请帮助我使我的脚本成为多线程的。我已阅读该[`threads::shared`](https://metacpan.org/module/threads%3a%3ashared)模块的文档，但对理解如何做没有帮助

```
 use threads;
use threads::shared;
use LWP::UserAgent;
use HTTP::Cookies;

my $NUM_WORKERS = 2;

sub worker {
   my ($i) = @_;
   my ($web, $ck) = browser();
    ($username, $password) = split ':', $acc;
    my $url = 'http://www.site.ru/?tkn'. int(rand(10000));
    my $response = $web->post($url, Content =>
                    [//////]);
    while(1)
    {
        my $url = 'http://www.site.ru/dk?st.page='.$i.'&st.name=%D0%B0';
        my $response  = $web->get($url);
        @list = ($response->content =~ /card_wrp"><div class="photoWrapper"><div><a href="\/(.*?)\?/g);
        @popl = ($response->content =~/<\/div><div class="info">(.*?)<\/div>/g);

        for ($j = 0; $j <= scalar @list - 1; $j++)
        {
            $popl[$j] =~ s/&nbsp;//g;
            open F, ">>gr.txt";
            print F $list[$j].':'.$popl[$j]. "\n";
            close F;
        }
        print "[+] Page $i \n";

    }
}

my $i :shared = 1;
my $last = 79265;
my @workers;
for (1..$NUM_WORKERS) {
   push @workers, async {
      while (1) {
         my $i;
         {
            lock $I;
            return if $i == $last;
            $i = ++$I;
         }
         worker($i);
      }
   };
}

$_->join() for @workers;
sub browser 
{
 my $web = new LWP::UserAgent;
 my $ck = new HTTP::Cookies;
    $web->cookie_jar($ck);
    $web->agent('Opera/9.80 (Windows 7; U; en) Presto/2.9.168 Version/11.50');
    $web->requests_redirectable(0); 

    $web->timeout(5);
 return $web, $ck;
}
sub loadf {
    open (F, "<".$_[0]) or erroropen($_[0]); 
    chomp(my @data = <F>);
    close F;
    return @data;
} 
```

我不明白我需要分享什么变量。非常感谢所有帮助我的成员

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-09T20:05:51.163

如果您没有线程，则工作循环看起来像

```
for my $i (1..79265) {
   worker($i);
} 
```

问题是该变量是不可共享的，并且 `for`维护着一个无法共享的内部状态，因此我们需要将其重写为没有这些问题的东西。

选项1：

```
my @a = 1..79265;
while (@a) {
   worker(shift(@a));
} 
```

选项 2：

```
my $i = 0;
while (++$i <= 79265) {
   worker($i);
} 
```

并行化任一版本所需要做的就是确保`@a`/`$i`在您检查它和使用它的时间之间不会发生变化。这是通过添加锁来完成的。

选项1：

```
my @a :shared = 1..79265;
while (1) {
   my $i;
   { lock @a; return if !@a; $i = shift(@a); }
   worker($i);
} 
```

选项 2：

```
my $I :shared = 1;
while (1) {
   my $i;
   { lock $I; $i = $I; return if ++$I > 79265; }
   worker($i);
} 
```

选项 1 是后面的 Thread::Queue 解决方案的基础（尽管它可以按原样使用）。选项 2 在下面按原样使用。

* * *

我通常使用[Thread::Queue](http://search.cpan.org/perldoc?Thread::Queue)或[Thread::Queue::Any](http://search.cpan.org/perldoc?Thread::Queue::Any)：

```
use threads;
use Thread::Queue qw( );

my $NUM_WORKERS = 5;

sub worker {
   my ($i) = @_;
   ... put your download code here ...
}

my $q = Thread::Queue->new();
my @workers;
for (1..$NUM_WORKERS) {
   push @workers, async {
      while (defined(my $i = $q->dequeue())) {
         worker($i);
      }
   };
}

$q->enqueue($_) for 1..79265;
$q->enqueue(undef) for @workers;
$_->join() for @workers; 
```

但是我们可以很容易地做到这一点：

```
use threads;
use threads::shared;

my $NUM_WORKERS = 5;

sub worker {
   my ($i) = @_;
   ... put your download code here ...
}

my $I :shared = 1;
my $last = 79265;
my @workers;
for (1..$NUM_WORKERS) {
   push @workers, async {
      while (1) {
         my $i;
         {
            lock $I;
            $i = $I;
            return if ++$I > $last;
         }
         worker($i);
      }
   };
}

$_->join() for @workers; 
```

# php - 使用 PHP 和 cURL 调整远程图像的大小

> ID：12342465
> 
> 赞同：0
> 
> 时间：2012-09-09T20:00:12.320
> 
> 标签：php, curl, image-resizing

昨晚我问如何在不使用 fopen() 的情况下使用 url 作为 'imagecreatefrom...()' 中的参数。cURL 是作为我的答案提出的，但是当我尝试插入它时，以及在网上找到一些建议时，我就是无法让它工作。

```
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, 'http://curious.astro.cornell.edu/images/xraysun.gif'); 
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_BINARYTRANSFER, 1); 
$data = curl_exec($ch);
curl_close($ch);

$image = imagecreatefromstring($data);

$thumb_width = 200;
$thumb_height = 150;

$width = imagesx($image);
$height = imagesy($image);

$original_aspect = $width / $height;
$thumb_aspect = $thumb_width / $thumb_height;

if ( $original_aspect >= $thumb_aspect )
{
// If image is wider than thumbnail (in aspect ratio sense)
$new_height = $thumb_height;
$new_width = $width / ($height / $thumb_height);
}
else
{
// If the thumbnail is wider than the image
$new_width = $thumb_width;
$new_height = $height / ($width / $thumb_width);
}

$thumb = imagecreatetruecolor( $thumb_width, $thumb_height );

// Resize and crop
imagecopyresampled($thumb,
$image,
0 - ($new_width - $thumb_width) / 2, // Center the image horizontally
0 - ($new_height - $thumb_height) / 2, // Center the image vertically
0, 0,
$new_width, $new_height,
$width, $height);

imagejpeg($thumb); 
```

这是`imagejpeg()`输出：

```
����JFIF��>CREATOR: gd-jpeg v1.0 (using IJG JPEG v80), default quality ��C      $.' ",#(7),01444'9=82<.342��C     2!!22222222222222222222222222222222222222222222222222����"��   ���}!1AQa"q2���#B��R��$3br� %&'()*456789:CDEFGHIJSTUVWXYZcdefghijstuvwxyz��������������������������������������������������������������������������� ���w!1AQaq"2�B����    #3R�br� $4�%�&amp;'()*56789:CDEFGHIJSTUVWXYZcdefghijstuvwxyz��������������������������������������������������������������������������?��)�P< ����ZxZUZ�R����4GR�UJ�R����2���S�&gt;�uw�K #��6��b1�V1��#�85k�+nIO�hZh�7.�e�r;Weoḭrȹ����w-R����ӕS��>y�;复����{�B��F z��(ZF�$��U��YIh�;�7P)�F�Cs&G�@�&gt;���^OY�El��|�u�H&��mͶ9B���Zq��(\3�&lt;�;1���R��":ȳ���'>��s�MD����e/���*�$�o��Z41��`7�Ӛ����Ȗ#�Ðx��A������t��T�ܮ4rWp��{V|��]}��N�f&�%����\Bcb�#��[]MXƵ>ddȘ�kBH� �A3ƫAܢ�Q���*N��g�R�Eb)�T�j2*�9���)�QL�ĸH��J��l���z�N�ME���v=*4�*%N��֕0:�ޝn�~���};���_��:j(��L��?��[�l����/ 1ޔG ̈́�p�g$c�hUd�����5�ԩ���滗IDB@   �e }3T�m��.@;���֭B�$O��%0���(�ZI6����}Er�腡 AVe�1�s�ǧC�1#�m��Y�nM�A���WbH#.�\�����֙4�6��#�;������m�w,Z��)��p9�8���jz�f5P���J�IK�/�-��c����$��&��J��v��SՓk�q4��X�7F�4�gX����T��>�����[ȧa�J��R��)PФ���*�9h;2k�VR�Y�� ϶*�Β�Q���!G<`���S��<�*�P:�G�_Ӛlw%ʰA�����GX����9+�6KY�J����"u���(�B�"�yA���9�Iop����eO�z�lg2��"pRG:ђ:Uy""��4WKa&G#�a� V �賂�O�����̆J���ʘ��+�;�%jVer(�����qԲ��E�D��F+6z�c�I9\.    ���)d��+E?;O�a�8��WY�m��E�_m��$�n�s������IG���Us��=�y�3����΍UZ�z4B2K�J͌/�:}i]fr���=03'\w���m��p�2|��<���5,��.#(���-��K�ٚ���gO�x�������Mv%�d�c�@'v}=��N{k[�kF�i�y%Y%���~uGːFm���7�"1�zZ(�n���l��P��$k;�H�n�����[��I;}�ݭ��|��zdbS�ZHQ~PX�{�����Cp�,�;�$e����qBM6�5��.�"�e���U����C�pS��E[�y(G�"�A��|U=��5���JHb�F��c����b���H"�6_,d0����`�b�ؼ�EZӭ��;�{��#(�z�G?�K6����,<�e���=*9���'�\f�bYa�7Nꌹ�A���lSU���m��;��Է�pT�v��9�UmB����n��#��-;!�������#��#ڹ�J܆/����,�Ep���e�:�S�Y��B�i�Xm]X�gN�Iֵ��k:U��~����(r�� )�(��&Qԝ*�u]j�u�=:��X1t@���x�V֒>�$�тȁT�� *��7��$��4��|1*�    �͎�?�Z��5%ҧk�P �&lt;�֪Z�r��B������}�!T�sF�4{�����*�e+�H�II4�6u]k�ȇ1��N�xA�*��0����UC`�u?�V��ꕃ�*7`���Ҡ��od1F�1�����Z��  <�2�,�nX� ��7�:d��#,�w�e�����J�t�ʿ���kM�ۨ�EX���^rA�y⡚7�/p���Ѓߊ�-����6ǉЙw��}* ������R$EP@#����k+j�J�[��?��,bs�]��ܒ3^�}�4����%�N�01���+ƅ��v�Ll�(@X��j����E���&lt;� �O�:iQ�����n�2�i�΃�OQ�#�G)A��'!2a6��ќp:Z�|C�-��p6;c���Z共��27��Z� 7�[t:pʢ�����;װk�T�"��鰎�֩^_Gv�P�VfWyD��U>���r����A��]T(���S]�&lt;3}k2^�zS�� �v����c3*0�����,��֬�UTՈ��A�\N������|�&gt;k��������ҡYt����$~?�c^v6V���PZ\����d���0��~������Yf3��c�z�g�U�!w���Lq��u�X!�����e$�;�+�w7b�iL�� ����j��y2�HŔ�T��S���M�M��Xʸ<�ydu� ����,�-��9PcauX�;>����͊��m�"[F<��R��O�_J�&lt;�B�����$6w(8��j�1�v#����vzg8�S�X;٥��  ��a�/���IE�Ù-����eB 'v0�|�ƧHJM7 ��D�G��Ԉ��@�c2۱�ñ��ZΩt!��<��� g��=��7!�M{�&lt;����L�\��>c��@�U�+�g�cP�n��3�$��������S^��w&���;�&lt;�u���Tr��$�BCl�)��r"e�s����U������{�(�y�� ����1����i�,���#��v�Đ&lt;����n�U�#���֢j�]49#�.�#*���Zx�Yf�E�"I�n��ڢV�������$��������[�&amp;H��  ��A�v�W�P�e&H�%�d����My�]o1��@l�1ӯ��騾M�3N����c�jT�9�M���FA�6�����țrB�|��8\�ߥs:��L?.�^�6�����6U�y�8���@*�=:���i=I��3��� � "�Iֽ��yX��QJ�V�����b3U��CJF�e��WE�L�b?o��s5miS&���CG?���d9����N�锘�"+K)ʎ1��zTI,�p���О���$M�YY1c��g���Y�L�~F@�g�$�;  d�8%�"��&Y��3��z�&gt;�82�1���!��HN���dEC��p��=���Q���9>Z�Pv��$��>�:5�$��bo?�R��!�9�Ǩ=��1u4�8t!$^\y==x��8�&gt;b    bS+�{��J����s���īl?���P�m��Q&\:���8�⡑ƞ[<(Y�X��L�(yH��>�����Yw3��=���B�a�v��Ms"  �awd�z��޲�B���hfb�����Ϧi��ɔ��b@RF01���Q-�o*30E�1�-���1M;��N�$�b�#���s�c�������,p,��&M�BH��P]�S������c�i�I���L��ljpF=x�����@�ƚ#3���x���ʴ/��\i�B  @�����#�ګ^��g*N�S�ګ�̒8�R�ǵkd��k�HV�pd ��`c4�h���wg��S뎔�B$ܒ�*(-׀ �Җ�s)v��>E����M=|�@҈�ۖ;���c���~����Rq�WC1�j2�FrGA���e��v�&amp;�pkV�EisT�zJ�-z���1H��R��<�nD��CU���:��D��ǯjlΓoT�Q��T���5�sW1ޱ���=�4���d�iH�1V8_Zpx�F!/ʋ�ϧ�di�"Ehdp����j�82���*��{zׇR��|����+�W���&lt;�6�'$w�_֤�$�A� 2��wv<��-���ꊒ�\(���2�m�b̀xON `����g2*�s�΄�����N}�m��!��a������5�ĩ�Yc9�o9E'���b���@��3�z��*�0#/���sX����J{�y`p� �f�S��RGd���͹Cǌ��4�w.�   h���oS�����MA��Z��wS[\1�q,��@8:�x'��$A���ˌ�{�SSZ�o.�c:�^1� Ѷ�eiX#7�Τ63���5\ʖ���� �#�)n7:`����jQM�a̱0 K�H�O�[p�R��{��U%����)�iM�$�^���S������k9�U}~�%^��,ev`��2J���WO��|Ĝ�&gt;�w�T�Oh�) +�#���c�ƙon�&amp;�    ���S:'��7`�T���w=i�l�S[�&lt;���1_((۱s��֩[��"ƥ����>��M"2��b��@��V-c��]���^F�ps�?.?Z�+-�3��x� y-��w�?�Q��d�ӎp8���MQ��E*��2���|VN��e@=�jSWI�\����Jj��J^��Gc��2�u��������"�Ii'��v�+3D�a�5f���a��Im�����n��~J�Ei��Ż�a�������R#���������;V-��:Zŋx�8����Kӝ]yt`    ��n�r1I�үY]%�r����]R7[�Ҥ�-������)�&lt;�O�!�ԏ| [��cL��FR0�ۥ�� �ݴt�?���yq��; m��H=;���+Kݠ�l�z���f��s�&gt;�:�r!qTxQ�O�s�����8�2DC(�s��)@���J� ���{������ItA�M�(���$��sUa��bC�9�;�ǽXG=����g�#�;c�~5n��"�pKw'|h��GOj�nU��)��$w$wp n��^���1yp�#�V=:����O.��a�9��[ֵ�Y���+� ��Y��5ڽ�L])և$]��j�;�n`��W ��=�y����x���P��is�5��N�`���3���:���k����,�ҵu*֚�W�A��R�/q|�p�J�Pl���9�p?J�!��d��Z�`#�G`?¬�l�,R�"�!�Q�h00$c�"�o���K��WFj��i�*��O�ޭiڒ�H$X��,��v���j)�+�Y�ڣ���)��ܼ�  ���b���j�׆d�-��c��z��/�`�pI�*���I��c�$�ϭvP��ni:�(dҊ�#f�#櫹�V(�15���4SI��<��*>�"���F8 ��.E��e�ƴ-�p�$�VP��W��S;����wL���"G������!���ås�\2p�Jӳ�%��`���d¹�Ni�'�a� s\��ֆ�tu-� 0:V�\3���kd���zW?���M�_�&gt;=ZX�����ʸ����Q�;��I�s\�l[���*�4a��d��{t�Z�!��}��1\����#�`���OC���&gt;��{6п�W���Ey5�ΛwV!���R��,q#�r�w}�z����"������9�}Ej��t$)I�X�O�]]69H�r�)����k�ڴ�f���G=�B�e[� ����^��`|�byw^B�L}j��dܟ�R����>��H4�@��b�w��R�}�Ջ[�f�D�s�ێ�F['���H2F�ZF�)�_bq��v���#�m�o�PJ�$9��#;�R���Л��'�U\��<�!p�2q�ͼ�E��M������U�MTG,��rF��� �e���c�=k��a��l[ij��2���ۜ�^�����j&�=��޽jT]�z�▃�J��=���5t�y�k��Bƕ��Mh��T�ƓE4�*�f�����E3�� R6���V��L��d��T�SE p��RS�h[�w0Ʊ�#"�)�O��Vs�d��s��I.����.�*�z�Ҵ��Y����� �d�Q^}l�)���-D)ò�2�Nrd�~��(`��x�Ɗ+8���bٙs��O�+��Z̖�YX�����(��ti��G-J�[233�����$�i�Mjș�Q&�*�9Ɍ-Q�EH��c �Eg<��EPd��� 
```

A `var_dump`on`data`为网站上的数千行提供了基本相同的内容：

```
string(123362) "GIF89a������!)19J��������������������������!�!�!�!�!�!�)�)�)�)�)�1�1�1�1�9�9�9�B�B�J�R�Z�c�k�s�������޽��c��1��!���{��{��Z��J��9��)��!�����޵�֥�ƌ��s��R��B��1��)����������Δ�Ƅ��9��1��!�����ޭ�΄��{��R��B����J��9�ޥ�֌��k��������{��s���������19Bs{����JR����Zck���������������,��@� H�@�8q (h�@�"lx�D���Сŏ�I8r�Ǌ&amp;㘄�1���!E�,`����8Sތ3g�J�rz�왳蜟s��,:�hS�$��<��S�D�NM���V�N�^e���T�9�|��v�ڶn��Mjq��u������˽[�x�pE�=N���ǈ-=0��䅔R0���A `4hͦ?�&lt;�t��\�M��l�j����ܾy��-@Rǖ�*������JG����#k������e���Cໜ�?-��y5΁�f��9{3$�9��uj�(]����z�u�U�y�VW�)�_\�$a��%��Hj���[i��Y<]��X�a`Sf���R%�՗M,���K%�$�z�dBHݏE6�F�U���-$�o���Yg���i���䑶���l��v�o[��� �en�X䏃-�\r,I��c'���F�4I|n�RL�!�ލ!j�{6Q�Q/���I �{O�G`�Vu�aSY�'�ZN(a�V�|&�W`�"���|2��֪���j[�J����k��%`|*����6x!{q-�3���x*�g���y�fGY榛qP��@��%t�i�k�F�����[����֤��n�o��rY�o��ɛq�f$.�'�{tU�'G4Ť�76�w��4�u��t����a��.{_�a�Z�ʽ�묺���|o��\�+ ����j��+� ���2']t�&gt;��H����@���S?���4_H��s�ڠJ�����)���J�)D�����B}�\���Pf�E�)�gVNIo���ko�a�[ۘ����c���0M�)��t�]��Kn�hRQ��M�UF]��Wj�r�����ϫ����C���T�HѻC��B-������C'���H_] ���&lt;�W����G�����&lt;�Pg?���#�����/>�������;�3�L�h��6�'R�!�Qcp{�4"��d�`�қhR%���]}�R�^C�z�k5^ڗo��xbA�2�9*&�YQ�,�B��%@��T��!�mg���Өf��Aw=��������I��ǻ^��w>�)1���"����'���XD ��E,��]̢�0*��T�"�p=:�qd��8�-�Q�׻��H�$�ωK������ (׹�����(�1�Y`A$��w��o�r����~}�^[rMs9�$�:-9["ϣ�j��&3JP��ZMeh� �������{����W<"�o�Sf2�xEb:��X|���;汚u�#6��M6�������)G7���朣9��Mq�����C� �nΓ����>�Y�O{���t\#��E1:1����!���Nr8�s$b0D2�h���]�H��`���(ŦKY:\q��H�P=<ʓOPh����,���d!�\�UR�/�v�Y �|�l�����&lt;���-��(U�jq��̪;�Y�rs���*X�i�yڡ���Z�zO����p}+[��V>ԁ|�^��W���}�k��v�~��������=�`�X�浭n-k<��F�F�}���j�"�ܥD�J  u��0�����[S�ji5�I�(x�y�0�JHL�+�V"�&lt;�)�r_x3A�*fF����(��}��(ը*э��*5�HNm�1�] (A�Iϴ���d��]�*��N6���CckX?H�~`�����.��N���7��� �+���p�� ? ��GL�[�8��W��?������X�구l�g<��G-:q������:�ve<�Y ��#�I��e�Է��\�M�%�V��K�Mgz3��''�AOupZ�����dNs�����fz7�ټ�Ùg��w��L'��� b��o~�:W��S�sc�hD��C"K�q�S��x�2R�A虂���N�h~�yq��8�%��àd ����^��(�i�1��,�6�i:❇�6+��zVvC���o}����"������do�ڢ�y�w0�� �9�� T��T;6(v���sm�z��F��=}�h����f��{-�O7����� t��m�`jOu�m-kO���.�;���������6��U�� X�N��]�׵z�ߌ㝡���e�!��֕����N�T�L_����_Ř�t�k����>'b�Wi'`��fɆj>7jߦlBl�fi�l�fm��v5�k�vl��kd'k�6w��k6�i�kh}���s3�|�uc��V��Y�tU�FU��FU$d�D;�r!�B?A-"9��0����$�&amp;�I �Q�8h�(pq{ʢC�s>b䃝^��U:�h��r�7_Us��`��`�Vn}t�/�a    ��i��t�V~@J0�ht7�DWtE�:���ij5�����+Ƈ�Hv�t�VjCPk��~>�m��t��k"��w�l�f�C �XtD�GGt�xtfgk�uw�t��u�v�8�ӆl�6m8��v��t��k8m�6cphs/�r8V|��c`V��GbhE��<,�r!?!)���Qw$�S��@r�$��eQ���,W+>�5�3=P��No�4h��ho5O�GY�VYvX��s;Gns8}x�a-�a �a f���t�6����ؒFWt:`w��kCG�u��F��vЈw�V��i9�j�t��s�&amp;b�&amp;���CЌ��iK����u��uF7��v�I�vCpH�p����u-��C����s_wwlW��H�v+iw�6j��j_�tG��:�5�w�k��~ �a &iٸ��Ic��W��c6�U��G��C�s;�R#+�"�S(�s-%pR�&amp;O7�4&#:C4EE�EcN�y���V�r�5Yp�`0�a�a Ynf'����|H��8��Ƈ+��R�~��uE��(��8�A0�N��k�֝9���&amp;�6��6tD�v�w'��m爣6k'pl�6�@ ���s���:l]7l1@t}�t�ɝ90^v�����+�w���fi�8d����tȈj���9@ W!��:`i�j����l��v�i�G���`qh���~��x5��u�^%P�dUu=�H*Sq(�d�649�Q����dI�c+V�מ)mG 
```

A `var_dump`on`$image`之后`curl_close()`给出：

```
resource(65) of type (gd) 
```

此外，如果我在所有调整大小的代码之前尝试使用`imagejpeg()`，它仍然给出基本相同的东西。我被困住了：/

* * *

即使 Musa 修复了设置内容标题，它仍然只显示原始图像数据：

```
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, 'http://www...../image31.jpg'); //Actually full URL in code
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_BINARYTRANSFER, 1); 
$data = curl_exec($ch);

curl_close($ch);

$image = imagecreatefromstring($data);
//var_dump($image);
$thumb_width = 200;
$thumb_height = 150;

$width = imagesx($image);
$height = imagesy($image);

$original_aspect = $width / $height;
$thumb_aspect = $thumb_width / $thumb_height;

if ( $original_aspect >= $thumb_aspect )
{
// If image is wider than thumbnail (in aspect ratio sense)
$new_height = $thumb_height;
$new_width = $width / ($height / $thumb_height);
}
else
{
// If the thumbnail is wider than the image
$new_width = $thumb_width;
$new_height = $height / ($width / $thumb_width);
}

$thumb = imagecreatetruecolor( $thumb_width, $thumb_height );

// Resize and crop
imagecopyresampled($thumb,
$image,
0 - ($new_width - $thumb_width) / 2, // Center the image horizontally
0 - ($new_height - $thumb_height) / 2, // Center the image vertically
0, 0,
$new_width, $new_height,
$width, $height);

header('Content-Type: image/jpg');
imagejpeg($thumb); 
```

尝试使用 jpeg 开始只是为了看看它是否改变了任何东西，但仍然有相同的结果，胡言乱语。

* * *

* * *

在显示图像后，我尝试在标题中为此代码创建一个函数：

```
function resizeJpeg($url, $thumb_width, $thumb_height)
{
echo "URL: " . $url . "<br />";
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, $url); 
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_BINARYTRANSFER, 1); 
$data = curl_exec($ch);

curl_close($ch);

$image = imagecreatefromstring($data);

$width = imagesx($image);
$height = imagesy($image);

$original_aspect = $width / $height;
$thumb_aspect = $thumb_width / $thumb_height;

if ( $original_aspect >= $thumb_aspect )
{
// If image is wider than thumbnail (in aspect ratio sense)
$new_height = $thumb_height;
$new_width = $width / ($height / $thumb_height);
}
else
{
// If the thumbnail is wider than the image
$new_width = $thumb_width;
$new_height = $height / ($width / $thumb_width);
}

$thumb = imagecreatetruecolor( $thumb_width, $thumb_height );

// Resize and crop
imagecopyresampled($thumb,
$image,
0 - ($new_width - $thumb_width) / 2, // Center the image horizontally
0 - ($new_height - $thumb_height) / 2, // Center the image vertically
0, 0,
$new_width, $new_height,
$width, $height);

header('Content-Type: image/jpeg');
return $thumb;
// Also tried 'return imagejpeg($thumb);' and simply 'imagejpeg($thumb);'
} 
```

并尝试以这种方式使用它：

```
$imageData = resizeJpeg('http://upload.wikimedia.org/wikipedia/commons/1/1e/Stonehenge.jpg', 150, 150);
header('Content-Type: image/jpeg');
$imageSrc = "<img src = '" . imagejpeg($imageData) . "' />"; 
```

它必须在文件中还是有办法让它将其视为 URL？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T20:05:27.970

您必须为浏览器设置 mime 类型才能将数据呈现为图像，这可以通过在输出图像之前设置内容类型标头来完成。

```
header('Content-Type: image/jpeg'); 
```

# ruby-on-rails - Rails 迭代巨大的数据库表

> ID：12342468
> 
> 赞同：3
> 
> 时间：2012-09-09T20:00:29.337
> 
> 标签：ruby-on-rails, ruby

我有巨大的数据库表，我需要在这里做点什么，但我该怎么做呢？如果我写：

```
@person = Person.all
@person.each do |p|
//something
end 
```

它的负载，负载系统，并需要时间。有什么方法可以通过不将所有数据加载到某个变量来迭代表？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-09T20:03:09.153

这是一个使用`find_in_batches`or的用例`find_each`。

这将逐块加载数据，[请参阅 doc](http://api.rubyonrails.org/classes/ActiveRecord/Batches.html#method-i-find_in_batches)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T20:09:53.310

这个问题的最佳起点可能是[Rails Guide 条目 Active Record Query Interface](http://guides.rubyonrails.org/active_record_querying.html#retrieving-multiple-objects-in-batches)。

本质上，就内置方法而言，您可以在 和 之间进行`find_each`选择`find_in_batches`。前者的使用方式与 find 相同（意味着每次迭代都会为您提供一条记录）。后者为您提供批次数组。

# internet-explorer - Internet Explorer 不适合精确测量

> ID：12342479
> 
> 赞同：0
> 
> 时间：2012-09-09T20:01:45.450
> 
> 标签：internet-explorer, html

我在我的网站主页上使用了一个功能框，它在注册表旁边有一个 nivo 滑块。滑块的宽度是 701，表格 255 使整个 div 为 956px。这将显示这些元素紧密相邻。这在 Chrome 和 Firefox 中完美运行，但在 Internet Explorer 中它只适用于 occassion。大多数情况下，IE 将其散布在整个页面上，就好像它放不下一样。那是怎么回事。我能够使其工作的唯一方法是将其扩大 1px。但我宁愿两者之间没有这么小的差距。有谁知道为什么IE会这样做？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-09T20:11:34.370

没有比这更好的表达方式了：IE 那样做，因为它很糟糕！

无论如何，只要 MS 不修复他们的浏览器，我们 Web 开发人员就应该修复 IE，如下所述：[http ://webdesignerwall.com/tutorials/css-specific-for-internet-explorer](http://webdesignerwall.com/tutorials/css-specific-for-internet-explorer)

希望能帮助到你 ：）

# jquery - slideDown 不会“隐藏”元素

> ID：12342482
> 
> 赞同：1
> 
> 时间：2012-09-09T20:02:05.293
> 
> 标签：jquery, hide, slide, effect, drawer

我想显示/隐藏订单表格的动画效果很好，除了一个问题，表格在向下滑动时不会隐藏，它的一部分仍然可见。

HTML：

```
<div class="post">
    <div class="post-content">
        <a href="" class="order"></a>
        ...
    </div>
    <div class="order-form">
        <a href="" class="close"></a>
        ...
    </div>
</div> 
```

jQuery：

```
$(".post .order").click(function () {
          $(this).fadeOut();
          $(this).parents('.post-content').slideUp();
          $(this).parents('.post-content').next('.order-form').show();
          $(this).parents().find('.close').fadeIn();
          return false;
    });
    $(".order-form .close").click(function () {
        $(this).fadeOut();
        $(this).parents('.order-form').slideDown();
        $(this).parents('.order-form').prev('.post-content').slideDown(function(){
            $(this).parents('.order-form').prev('.post-content').css('display', 'none');
        });
        $(this).parents().find('.order').fadeIn();
        return false;
    }); 
```

..如您所见，我尝试过`.hide()`，但没有按预期工作，它禁用了整洁的抽屉（正确的词？）所需的滑动动画效果。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T20:22:36.140

我尝试这样的[http://jsfiddle.net/2yrj6/2/](http://jsfiddle.net/2yrj6/2/)
但我不知道这是否是你想要的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T20:23:11.490

我看到你在`$(this).parents('.order-form').prev('.post-content').css('display', 'none');`回调函数中调用。除了，`$(this)`不再是关闭按钮。它是刚刚隐藏的元素。尝试`$this`在点击回调的第一行声明 var。然后使用`$this`而不是`$(this)`.

其他注意事项：你应该这样做`parents('.post')`而不是`parents()`为了更好的性能。您可以使用`.hide()`而不是`.css('display', 'none')`.

# jquery - 悬停和clearQueue上的图像放大

> ID：12342491
> 
> 赞同：0
> 
> 时间：2012-09-09T20:03:41.927
> 
> 标签：jquery, effects

我遇到了以下问题，这几乎是我需要的，除了一件事。

[悬停时图像放大，div框内的内容附加到图像](https://stackoverflow.com/questions/6632539/image-enlarge-on-hover-with-content-inside-div-box-attached-to-image)

最佳答案示例： [http ://demo.superdit.com/jquery/zoom_hover/](http://demo.superdit.com/jquery/zoom_hover/)

当我在鼠标悬停然后鼠标移出几次非常快时，动画在鼠标移出后继续播放几次。

鼠标悬停后动画如何只播放一次而没有锯齿状运动？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T20:55:04.690

下面是[工作代码](http://jsfiddle.net/q7TX2/4/)。

```
$(document).ready(function() {
  var cont_left = $("#container").position().left;
  $("a img").each(function() {
    var $this = $(this);
    var left = $this.position().left, top = $this.position().top;
    $(this).hover(function() {
      // hover in
      $(this).parent().parent().css("z-index", 1);
      $(this).stop().animate({
        height: "250",
        width: "250",
        left: left - 50,
        top: top - 50
      }, "fast");
    }, function() {
      // hover out
      $(this).parent().parent().css("z-index", 0);
      $(this).stop().animate({
        height: "150",
        width: "150",
        left: left,
        top: top
      }, "fast");
    });
  });

  $(".img").each(function(index) {
    var left = (index * 160) + cont_left;
    $(this).css("left", left + "px");
  });
});​ 
```

所做的更改：

*   添加[`.stop()`](http://api.jquery.com/stop/).
*   固定动画的位置以使其强制`.stop()`（使其可停止。）

# subsonic - 警告 发现多个指令

> ID：12342492
> 
> 赞同：0
> 
> 时间：2012-09-09T20:03:57.950
> 
> 标签：subsonic, subsonic3

我使用亚音速 3。当我编译 ORM 时，我得到了错误。我也有以下警告，我正在连接到 mysql 数据库

```
<#@ template language="C#v3.5" debug="True" hostspecific="True" #>
<#@ assembly name="EnvDTE" #>
<#@ assembly name="System.Core.dll" #>
<#@ assembly name="System.Data" #>
<#@ assembly name="System.Xml" #>
<#@ assembly name="System.Configuration" #>
<#@ import namespace="System.Collections.Generic" #>
<#@ import namespace="System.Data" #>
<#@ import namespace="System.Data.SqlClient" #>
<#@ import namespace="System.Data.Common" #>
<#@ import namespace="System.Diagnostics" #>
<#@ import namespace="System.Globalization" #>
<#@ import namespace="System.IO" #>
<#@ import namespace="System.Linq" #>
<#@ import namespace="System.Text" #>
<#@ import namespace="System.Text.RegularExpressions" #>
<#@ import namespace="System.Configuration" #> 
```

警告 9 在模板中发现了多个模板指令。除第一个之外的所有内容都将被忽略。模板指令的多个参数应在一个模板指令中指定。D:\TradingTools\CODE\ConsoleApplication8\subsoniccomponents\Settings.ttinclude 1 4 backtester

我得到的错误是

```
Error   5   ; expected  D:\TradingTools\CODE\ConsoleApplication8\subsoniccomponents\ActiveRecord.cs 1800    17  backtester 
```

自动生成的代码如下所示

```
decimal? _sum(revenueinCDn);
        public decimal? sum(revenueinCDn)
        {
            get { return _sum(revenueinCDn); }
            set
            {
                if(_sum(revenueinCDn)!=value){
                    _sum(revenueinCDn)=value;
                    var col=tbl.Columns.SingleOrDefault(x=>x.Name=="sum(revenueinCDn)");
                    if(col!=null){
                        if(!_dirtyColumns.Any(x=>x.Name==col.Name) && _isLoaded){
                            _dirtyColumns.Add(col);
                        }
                    }
                    OnChanged();
                }
            }
        } 
```

此自动生成的代码中有太多错误。我该如何解决？

# php - 像@static这样的冗余php docblock标签有什么意义？

> ID：12342493
> 
> 赞同：6
> 
> 时间：2012-09-09T20:03:57.980
> 
> 标签：php, phpdoc, phpstorm, docblocks

在 PhpStorm 中使用自动 php docblock 生成时，我最终得到`@static`了静态方法上的注释：

```
/**
 * Reset the singleton instance, for the tests only
 * @static
 */
public static function reset() {
    self::$singletonInstance = null;
} 
```

如果可以从代码中推断出这些标签，它们有什么用处吗？我正在尝试决定是否应该保留它或删除它（并且在任何地方都这样做，以便保持一致）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-09T20:07:01.503

这些标签是为不允许在代码中使用此类关键字的遗留 PHP 4 代码引入的。在 PHP 5 中，代码有效地自我记录，所以这些标签确实是多余的；我看不出有什么理由让他们留在身边。

事实上，如果您曾经为您的 PHP 5 源文件生成文档，phpDocumentor 应该仍然能够确定这些是静态方法。[phpDocumentor 文档](http://manual.phpdoc.org/HTMLSmartyConverter/HandS/phpDocumentor/tutorial_tags.static.pkg.html)中提到了这一点：

> 只需在代码中使用**static**关键字就足以让 PHP5 上的 PhpDocumentor 识别静态变量和方法，并且 PhpDocumentor 会将它们标记为静态。

# xtext - 从 Xtext Typesystem Framework 注入 ITypesystem 时，Xtext 编辑器崩溃

> ID：12342500
> 
> 赞同：1
> 
> 时间：2012-09-09T20:05:03.487
> 
> 标签：xtext

我已经使用包含表达式的[Xtext](http://www.eclipse.org/Xtext/)实现了域特定语言（DSL） ，因此为了轻松检查它们的有效性，我决定使用[Xtext-typesystem Framework](http://code.google.com/a/eclipselabs.org/p/xtext-typesystem/)。
我试图实现本[教程](http://www.infoq.com/articles/xtext_ts)中给出的示例，但是当我使用

```
@Inject   private ITypesystem ts; 
```

然后尝试运行 Launch Runtime Eclipse 以检查我的规则的有效性，编辑器不会打开并且我收到很多错误。下面是其中一些：

```
java.lang.NoClassDefFoundError: org/eclipse/xtext/xbase/lib/Procedures$Procedure1
at java.lang.Class.getDeclaredConstructors0(Native Method)
at java.lang.Class.privateGetDeclaredConstructors(Class.java:2404)
at java.lang.Class.getDeclaredConstructors(Class.java:1853)
at com.google.inject.spi.InjectionPoint.forConstructorOf(InjectionPoint.java:243)
at com.google.inject.internal.ConstructorBindingImpl.create(ConstructorBindingImpl.java:96)
at com.google.inject.internal.InjectorImpl.createUninitializedBinding(InjectorImpl.java:629)
at com.google.inject.internal.InjectorImpl.createJustInTimeBinding(InjectorImpl.java:845) 
```

...

```
org.eclipse.papyrus.core.services.ServiceNotFoundException: Can't get the current Eclipse Active Editor. No ServiceRegistry found.
at org.eclipse.papyrus.core.utils.ServiceUtilsForActionHandlers.getServiceRegistry(ServiceUtilsForActionHandlers.java:67)
at org.eclipse.papyrus.core.utils.ServiceUtilsForActionHandlers.getTransactionalEditingDomain(ServiceUtilsForActionHandlers.java:88)
at org.eclipse.papyrus.diagram.common.handlers.GraphicalCommandHandler.getEditingDomain(GraphicalCommandHandler.java:135)
at org.eclipse.papyrus.diagram.common.handlers.LoadHandler.getCommand(LoadHandler.java:49)
at org.eclipse.papyrus.diagram.common.handlers.GraphicalCommandHandler.isEnabled(GraphicalCommandHandler.java:107)
at org.eclipse.ui.internal.handlers.HandlerProxy.isEnabled(HandlerProxy.java:320)
at org.eclipse.core.commands.Command.isEnabled(Command.java:833)
at org.eclipse.core.commands.Command.setHandler(Command.java:965) 
```

（Papyrus 和这个有什么关系？）

```
!MESSAGE A conflict occurred for ALT+CTRL+I:Binding(ALT+CTRL+I,
ParameterizedCommand(Command(org.eclipse.egit.ui.team.Ignore,Ignore,
    ,
    Category(org.eclipse.egit.ui.commandCategory,Git,null,true),
    org.eclipse.egit.ui.internal.actions.IgnoreActionHandler,
    ,,true),null),
org.eclipse.ui.defaultAcceleratorConfiguration,
org.eclipse.ui.contexts.window,,,system)Binding(ALT+CTRL+I,
ParameterizedCommand(Command(org.eclipse.team.svn.ui.command.AddToSVNIgnoreCommand,Add to svn:ignore...,
    ,
    Category(org.eclipse.team.svn.ui.command.category,SVN,null,true),
    ,
    ,,true),null),
org.eclipse.ui.defaultAcceleratorConfiguration,
org.eclipse.ui.contexts.window,,,system) 
```

还有很多其他错误。关于为什么会发生这种情况的任何想法？

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T20:52:08.937

不知何故，您向包 org.eclipse.xtext.xbase.lib 引入了（传递？）依赖项。请确保将其导入清单中，并且不要将其从启动配置中排除。eGit / SVN 键绑定冲突似乎与此无关。

# django - Django、推特和它的新 API

> ID：12342501
> 
> 赞同：0
> 
> 时间：2012-09-09T20:05:12.620
> 
> 标签：django, twitter

我需要检索某些用户的推文。我发现了 2 个看起来很有希望的包，但是最近有一个 Twitter API 更新到 1.1，所以我不确定下面的选项是否能正常工作。API 更新后，有人对 python-twitter 和 ECL-twitter 有任何经验吗？

[http://code.google.com/p/python-twitter/](http://code.google.com/p/python-twitter/)

[https://github.com/elmcitylabs/ECL-Twitter](https://github.com/elmcitylabs/ECL-Twitter)

或者你会给我推荐别的东西吗？正如我所说，我需要检索某些用户的推文，这些用户不必在我的朋友列表中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T12:44:42.683

我使用 python-twitter 从多个站点上的某些用户那里检索推文。由于您不需要为此登录，因此完全没有问题。

# java - CSV 解析器使用 Scanner.useDelimiter("\r\n") 分隔行不起作用

> ID：12342505
> 
> 赞同：1
> 
> 时间：2012-09-09T20:05:42.433
> 
> 标签：java, regex, parsing, csv

由于我们知道 CSV 文件内容的每一行都使用 分隔`\r\n`，因此我们可以轻松获取每一行。代码如：

```
scanner.useDelimiter("\r\n"); 
while(scanner.hasNext()){
    scanner.next();
} 
```

但是如果CSV文件的一个字段里面有“\r\n”，那么这段代码就不起作用了！就像这里的 CSV：

```
Row1: "abc\r\nabc","abc","abc"
Row2: "efg", "efg", "efg"
Row3: "hjk", "hjk" 
```

我想使用扫描仪读取为：

```
"abc\r\nabc","abc","abc"
"efg", "efg", "efg"
"hjk", "hjk" 
```

但如果只是使用`\r\n`，结果会是：</p>

```
“abc
abc","abc","abc"
"efg", "efg", "efg"
"hjk", "hjk" 
```

我应该做什么改变？如何修改`scanner.useDelimiter("\r\n")`以使模式可行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T20:15:35.537

首先，我建议您研究现有的 CSV 解析库。我想他们会很好地处理您的字段分隔符 ( )之间存在的*任何内容，包括终止您的行的相同字符。*`""`请参阅相关问题：[CSV API for Java](https://stackoverflow.com/questions/101100/csv-api-for-java)。

如果做不到这一点，我会尝试实现这个 SO 问题中提出的解决方案：[Java: split a comma-separated string but ignoring commas in quotes](https://stackoverflow.com/questions/1757065/java-splitting-a-comma-separated-string-but-ignoring-commas-in-quotes)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T22:23:43.663

推出自己的解决方案总是很诱人，但是嵌入式换行符之类的问题使使用 CSV 库变得更加容易。

[Super CSV](http://supercsv.sourceforge.net/)适合嵌入式换行符（它[符合 RFC4180](http://supercsv.sourceforge.net/csv_specification.html) - CSV 的 MIME 类型定义），以及嵌入式引号和分隔符（均可配置）。除了能够读入 List、Map 或 POJO 之外，您还可以定义[处理器](http://supercsv.sourceforge.net/cell_processors.html)来转换或验证您的数据，当出现问题时您将获得更多信息（行号、行号、列号、 ETC）。

我们（Super CSV 团队）刚刚发布了一个[新版本](http://supercsv.sourceforge.net/release_notes.html)，它带来了许多改进和错误修复以及一个[强大的新扩展](http://supercsv.sourceforge.net/examples_dozer.html)，它使用 Dozer 在 CSV 文件和 POJO 之间进行映射。

它可以在 SourceForge 或 Maven 上[下载。](http://supercsv.sourceforge.net/downloading.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-09T20:16:36.553

您可以尝试分隔符：

```
 "\"\r\n\"" 
```

**如果每行都以"**开头和结尾，这应该可以工作。尽管如果您的一个字符串*只*包含换行符，它仍然会被破坏。

# objective-c - 在objective-c中的实现中放置变量

> ID：12342514
> 
> 赞同：2
> 
> 时间：2012-09-09T20:07:11.770
> 
> 标签：objective-c, cocoa, static

在以下代码段中：

```
@implementation Foo
NSString* bar = @"Some text.";

...

@end 
```

是`bar`静态变量，还是某种类或实例变量？具体来说，它与执行以下操作有何不同：

```
static NSString* bar = @"Some text.";
@implementation Foo

...

@end 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-09T20:13:57.893

在第一个示例中，`bar`是一个全局变量，具有对外部世界的全局链接器可见性。

在第二个示例中，`bar`是一个静态变量，仅具有本地文件可见性（即，该符号在当前编译单元之外不可见）。

对于这两个示例，它们相对于 Objective-C 关键字的定位`@implementation`是无关紧要的。它们与 Objective-C 类完全没有关系，无论在范围内还是`@implementation`范围外，它们的操作都是一样的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T20:18:16.517

据我了解，在方法之外定义的所有变量都是全局定义的。它们与大多数语言中的全局变量相同。它们不是隐式静态的（AFAIK），但可以明确地这样做。~~我认为您的两个示例之间没有区别，但我可能错了。~~我没有注意到您将第二个示例明确设为静态。顶部是全局的，底部是全局的和静态的（文件范围）。

# html - 将 a:visited 与 a:after 结合，或将伪类与伪元素链接起来

> ID：12342516
> 
> 赞同：18
> 
> 时间：2012-09-09T20:07:29.893
> 
> 标签：html, css, css-selectors

假设我想在链接被访问后在链接旁边添加一个形状（如复选标记），而不是让它变成紫色，使用 a:after 和 a:visited。

我不确定是否应该选择这样的形状：

```
a:visited:after { 
```

或像这样：

```
a:visited a:after 
```

或者

```
a:visited :after { 
```

（我对何时应该或不应该在伪元素之前添加空格也有点模糊，或者它甚至重要吗？）

或者可能是不同的东西？

现在我的CSS看起来像这样：

```
a:visited:after {
    /* check mark shape */
    content:'\00a0';
    color: black;
    position: relative;
    left:15px;
    display:inline-block;
    width: 3px;
    height: 6px;
    border: solid black;
    border-width: 0 2px 2px 0;  
    -webkit-transform: rotate(45deg);
    -moz-transform: rotate(45deg);
    -o-transform: rotate(45deg);
} 
```

[来自http://webitect.net/design/webdesign/creating-fancy-bullet-points-with-pure-css3/](http://webitect.net/design/webdesign/creating-fancy-bullet-points-with-pure-css3/)的复选标记形状代码

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-09-09T20:11:57.473

你应该`a:visited:after`像现在一样使用。它不起作用不是因为您的代码中的错误，而是因为问题在于伪类 - 由于[隐私问题](https://hacks.mozilla.org/2010/03/privacy-related-changes-coming-to-css-vistited)`:visited`，它不允许使用伪元素。

因此，基本上，您将无法仅将复选标记图标应用于访问过的链接。

关于这一点：

> （我对何时应该或不应该在伪元素之前添加空格也有点模糊，或者它甚至重要吗？）

这很重要，因为空格代表后代组合器：

1.  选择器`a:visited a:after`代表`:after`an 的伪元素，`a`它是另一个`a`被访问链接的后代，这在 HTML 中不太有意义。

2.  选择器`a:visited :after`类似于`a:visited a:after`，除了它代表`:after`的*任何*一种后代`a:visited`。

    可以改写为`a:visited *:after`。请参阅规范中[的通用选择器。](http://www.w3.org/TR/selectors/#universal-selector)

通过省略空格，您将伪元素直接应用于它之前的选择器表示的元素，在您的情况下，它是`a:visited`，而不是它的任何后代。

# c# - 如何通过单击asp.net中的按钮来播放声音？

> ID：12342519
> 
> 赞同：-2
> 
> 时间：2012-09-09T20:07:54.027
> 
> 标签：c#, asp.net

> **可能重复：**
> [如何在 asp.net 网页中播放声音？](https://stackoverflow.com/questions/12329191/how-to-play-a-sound-in-asp-net-web-page)

嗨，我正在尝试通过单击按钮播放声音。但它不会播放此声音。它会播放另一种声音。我不想使用绝对地址我需要使用相对地址。这是我的代码

```
 protected void Button1_Click1(object sender, EventArgs e)
    {

       System.Reflection.Assembly a = System.Reflection.Assembly.GetExecutingAssembly();
       System.IO.Stream s = a.GetManifestResourceStream("chimes.wav");
       SoundPlayer player = new SoundPlayer(s);
       player.Play();       
    } 
```

在这段代码中，s 的值始终为 NULL，我不知道为什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T20:22:01.630

您必须区分在服务器上运行的代码和在客户端浏览器上运行的代码。

您在此处编写的代码是“尝试”在服务器上运行，即使它运行，IT 经理也会开始听到“点击”而不是用户。

您可以从您之前的同一个问题中查看此答案[https://stackoverflow.com/a/12329209/159270](https://stackoverflow.com/a/12329209/159270)并尝试了解不同之处，声音必须在客户端浏览器上播放，而不是在服务器上播放。

您还可以阅读此问题答案，详细了解：[如何在网络浏览器中播放音频和视频文件？](https://stackoverflow.com/questions/10648471/how-to-play-audio-and-video-files-in-web-browser)

[![](../Images/3f192e6b0aef364e327d4179a4eb683c.png)](https://i.stack.imgur.com/mE5Z9.gif)
[（来源：[planethost.gr](http://www.planethost.gr/ClicksOnServer.gif)）]

# php - woocommerce - 尝试为缺货商品返回课程

> ID：12342521
> 
> 赞同：2
> 
> 时间：2012-09-09T20:07:56.500
> 
> 标签：php, wordpress, woocommerce

我在使用 WooCommerce 时遇到问题，试图在已售罄的商品上退回特定类别的“已售罄”。我正在使用一个返回 div 而不是经典下拉列表的插件。所以你可以选择[S][M][L][XL]等。看看我的意思 - [http://www.shultzilla.com/product/tees/greater-than/](http://www.shultzilla.com/product/tees/greater-than/) -

所以我有一个要添加这个类的 div。我会设计它以使您无法单击它，并且会使其在产品售罄时甚至无法单击该项目。

这是我想要做的，但它似乎根本没有返回任何东西。甚至没有错误：

```
public function is_in_stock() {
        if ( $this->managing_stock() ) :
            if ( ! $this->backorders_allowed() ) :
                if ( $this->get_total_stock() <  1 ) :
                    return false;
                else :
                    if ( $this->stock_status == 'instock' ) return true;
                    return false;
                endif;
            else :
                return true;
            endif;
        endif;
        if ( $this->stock_status == 'instock' ) return true;
        return false;
    }

function is_sold_out () {
         if ($product->is_in_stock()) {
          $soldOutClass = 'in-stock';
         } else {
          $soldOutClass = 'sold-out';
         }  
    }

public function get_output($placeholder = true, $placeholder_src = 'default') {
        global $woocommerce;

        $out = '<div class="select-option swatch-wrapper '.$soldOutStatus .'" data-value="' . $this->term_slug . '" ' . ($this->selected ? 'data-default="true"' : '') . '>';

        if ($this->type == 'photo' || $this->type == 'image') {

            $out .= '<a href="#" style="width:' . $this->width . 'px;height:' . $this->height . 'px;" title="' . $this->term_label . '">';
            $out .= '<img src="' . $this->thumbnail_src . '" alt="Thumbnail" class="wp-post-image swatch-photo' . $this->meta_key() . '" width="' . $this->width . '" height="' . $this->height . '"/>';
            $out .= '</a>';
        } elseif ($this->type == 'color') {
            $out .= '<a href="#" style="text-indent:-9999px;width:' . $this->width . 'px;height:' . $this->height . 'px;background-color:' . $this->color . ';" title="' . $this->term_label . '">' . $this->term_label  . '</a>';
        } elseif ($placeholder) {
            if ($placeholder_src == 'default') {
                $src = $woocommerce->plugin_url() . '/assets/images/placeholder.png';
            } else {
                $src = $placeholder_src;
            }

            $out .= '<a href="#" style="width:' . $this->width . 'px;height:' . $this->height . 'px;" title="' . $this->term_label . '">';
            $out .= '<img src="' . $src . '" alt="Thumbnail" class="wp-post-image swatch-photo' . $this->meta_key() . '" width="' . $this->width . '" height="' . $this->height . '"/>';
            $out .= '</a>';
        } else {
            return '';
        }

        $out .= '</div>';

        return $out;
    }' 
```

如您所见，我正在尝试的方法不起作用。我不确定我做错了什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T09:03:58.767

在您的模板 php 中尝试此功能：

```
function is_out_of_stock() {
    global $post;
    $post_id = $post->ID;
    $stock_status = get_post_meta($post_id, '_stock_status',true) == 'outofstock';
} 
```

然后您可以执行以下操作：

```
<img class="<?php echo is_out_of_stock()? 'outofstock':''; ?>" src="..."></img> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T17:58:32.397

在主题目录中创建一个名为 的`/woocommerce`文件夹，然后在其中创建另一个文件夹`/loop`，最后将`add-to-cart.php`插件中的文件放在其中，将第 17 行修改为： `..class="out-of-stock mycustomclasshere"><?php echo apply_filters('out_of_stock_add_to_cart_text',__( 'Out of Stock','woocommerce'));?>..`

mycustomclasshere 显然是您自己的 CSS 样式输出。

# haskell - 声明数据类型

> ID：12342522
> 
> 赞同：1
> 
> 时间：2012-09-09T20:08:00.447
> 
> 标签：haskell

我有一种数据类型，我用它来表示行列和行列：

```
data Object a = Row a
                |Column a

data Row a = Object a
             | Left(Row a)(Row a)

data Column a = Object a
             | Above(Column a)(Column a)

testfunction::Object a->String
testfunction Row(Left(c)(d)) = "Recognized row" 
```

我想知道如何声明 Object 数据类型定义中的构造函数可能“包含”在其他地方定义的任何构造函数，而 Object 数据类型定义中的不同构造函数可能“包含”一组不同的构造函数。

所以：

```
data Object a = Object1(Set1 a)
                | Object2(Set2 a)

data Set1 a = A a| B a| C a| D a
data Set2 a = X a| Y a| Z a 
```

所以唯一有效的组合是 Object1(A a) Object1(B a) Object1(C a) Object1(D a)、Object2(X a)、Object2(Y a) 和 Object2(Z a)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T20:22:07.217

您的`Object a`类型适用于*所有*类型`a`。所以如果你有一个值`Object a`（就像你在你的函数中所做的那样），你对什么是*一无所知*`a`- 特别是，你*不*知道它是一个类型的值`Row a`！

现在，这有点令人困惑，因为您已经指定`Row`了两次——作为类型和作为 type 的构造函数`Object`。这两者完全没有关系。也就是说，在

```
data Object a = Row a 
```

没有任何东西强制`Row a`包含 type 的值`Row`。

最简单的修复——也可能是你真正想要写的——是这样的：

```
data Object a = Row (Row a)
              | Column (Column a) 
```

这有点令人困惑，因为您看到`Row`和`Column`两次，但它们每次都意味着不同的东西。如果你把它写成这样会更清楚：

```
data Object a = ObjRow (Row a)
              | ObjColumn (Column a) 
```

（这些特定的名称不是很好，因为我想不出该怎么称呼它们，但希望它们能清楚地区分它们。）

在你这样定义之后`Object`，你应该能够按照你想要的方式进行模式匹配。

# django - 如何按需启动 django 会话？

> ID：12342523
> 
> 赞同：0
> 
> 时间：2012-09-09T20:08:04.223
> 
> 标签：django

使用 django 中间件时，对于每个新访问者，都会创建一个新的会话记录或会话文件。这很好，除了大流量部分不需要会话的网站（例如：一个被许多人看到但只有一个人写的博客）。是否可以只为某些 url 激活会话中间件这么多 I/O会得救吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T20:45:43.213

这实际上是不正确的。会话是延迟创建的，因此只有将数据放入会话中才会创建新记录。看看这里：

[https://github.com/django/django/blob/master/django/contrib/sessions/middleware.py#L27](https://github.com/django/django/blob/master/django/contrib/sessions/middleware.py#L27)

# android - 带有警报管理器的通知在 Android 中不起作用

> ID：12342533
> 
> 赞同：1
> 
> 时间：2012-09-09T20:09:23.363
> 
> 标签：android, android-notifications

我已经搜索并尝试了许多通知的源代码。现在我正在使用此代码发送通知：

**报警主**

```
 System.out.println("Lancio sveglia");

Date dat  = new Date();//initializes to now
    Calendar cal_alarm = Calendar.getInstance();
    Calendar cal_now = Calendar.getInstance();
    cal_now.setTime(dat);
    cal_alarm.setTime(dat);
    cal_alarm.set(Calendar.HOUR_OF_DAY,18);//set the alarm time
    cal_alarm.set(Calendar.MINUTE, 00);
    cal_alarm.set(Calendar.SECOND,0);

  //Create a new PendingIntent and add it to the AlarmManager
    Intent intent2 = new Intent(this, AlarmReceiverActivity.class);

    PendingIntent pendingIntent = PendingIntent.getService(this,
        34567, intent2, PendingIntent.FLAG_CANCEL_CURRENT);

    AlarmManager am =
        (AlarmManager)getSystemService(Activity.ALARM_SERVICE);

    am.cancel(pendingIntent);
    am.set(AlarmManager.RTC_WAKEUP, cal_alarm.getTimeInMillis(), pendingIntent); 
```

**警报接收器活动**

```
@Override
public void onCreate() {
    //super.onCreate(savedInstanceState);

    System.out.println("Arrivo in AlarmReceiverActivity");

    Context context =  this.getApplicationContext();

    nm = (NotificationManager) context.getSystemService(Context.NOTIFICATION_SERVICE);
          CharSequence from = "[text]";
          CharSequence message = "S[text]";
          PendingIntent contentIntent = PendingIntent.getActivity(this, 001,
            new Intent(), 0);
          Notification notif = new Notification(R.drawable.ic_launcher,
            "[text]", System.currentTimeMillis());
          notif.setLatestEventInfo(context, from, message, contentIntent);
          nm.notify(1, notif); 
```

但是通知警报在某些设备中每 30 分钟重复一次，另一种则每 1 小时重复一次。但现在我还没有设置闹钟重复。

我如何设置系统以发送一次通知。有任何想法吗？任何帮助都会很棒

# c# - 自定义项目控制和选择支持

> ID：12342537
> 
> 赞同：3
> 
> 时间：2012-09-09T20:09:54.113
> 
> 标签：c#, .net, wpf, xaml

我想创建一个控件：

*   派生自 ItemsControl，
*   可以绑定到枚举列表，
*   对于每个枚举，它将显示 RadioButton，
*   选择放射线量时，选择InitiTem将包含与RadioButton关联的枚举值。

我已经设法实现了上面列表中的前三点，但我对第四项有问题。我怀疑它可能与项目容器类的错误实现或 generic.xaml 中的错误项目模板定义有关。

物品容器如下所示：

```
public class MyEnumSelectorItem : ContentControl
{
public static readonly DependencyProperty IsSelectedProperty;

static MyEnumSelectorItem()
{
    IsSelectedProperty = Selector.IsSelectedProperty.AddOwner(typeof(MyEnumSelectorItem));
}

public bool IsSelected
{
    get { return (bool)GetValue(IsSelectedProperty); }
    set { SetValue(IsSelectedProperty, value); }
}

static readonly DependencyProperty ModeProperty = 
    DependencyProperty.Register("Mode", typeof(MyEnum), typeof(MyEnumSelector), new PropertyMetadata());
public MyEnum Mode
{
    get { return (MyEnum)GetValue(ModeProperty); }
    set { SetValue(ModeProperty, value); }
}
} 
```

`System.Windows.Controls.Primitives.Selector`项目容器类型使用`IsItemItsOwnContainerOverride/GetContainerForItemOverride/PrepareContainerForItemOverride`方法覆盖与选择器控件（派生自）相关联。

generic.xaml 的相关片段如下所示：

```
<Style TargetType="{x:Type controls:MyEnumSelector}">
    <Setter Property="ItemTemplate">
        <Setter.Value>
            <DataTemplate>
                <RadioButton Content="{Binding}" 
                     IsChecked="{Binding IsSelected, Mode=TwoWay}" 
                     GroupName="enumSelector" Height="25" FontWeight="Bold"  />
            </DataTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

以上假设 IsSelected 属性的正确绑定将自动导致 SelectedItem 属性被设置（我希望这是正确的，不是吗？）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T20:37:56.167

在我看来，仅仅打电话`Selector.IsSelectedProperty.AddOwner`是不够的。

查看[ILSpy](http://wiki.sharpdevelop.net/ILSpy.ashx)`ListBoxItem`中的代码，您可以看到可能正在执行其他几项操作以在所选项目和选择器本身之间进行同步，例如引发 Selected/Unselected 事件。

```
static ListBoxItem()
{
    ListBoxItem.IsSelectedProperty = Selector.IsSelectedProperty.AddOwner(typeof(ListBoxItem), new FrameworkPropertyMetadata(BooleanBoxes.FalseBox, FrameworkPropertyMetadataOptions.BindsTwoWayByDefault | FrameworkPropertyMetadataOptions.Journal, new PropertyChangedCallback(ListBoxItem.OnIsSelectedChanged)));
    ListBoxItem.SelectedEvent = Selector.SelectedEvent.AddOwner(typeof(ListBoxItem));
    ListBoxItem.UnselectedEvent = Selector.UnselectedEvent.AddOwner(typeof(ListBoxItem));
    ...
}

private static void OnIsSelectedChanged(DependencyObject d, DependencyPropertyChangedEventArgs e)
{
    ListBoxItem listBoxItem = d as ListBoxItem;
    bool flag = (bool)e.NewValue;
    Selector parentSelector = listBoxItem.ParentSelector;
    if (parentSelector != null)
    {
        parentSelector.RaiseIsSelectedChangedAutomationEvent(listBoxItem, flag);
    }
    if (flag)
    {
        listBoxItem.OnSelected(new RoutedEventArgs(Selector.SelectedEvent, listBoxItem));
    }
    else
    {
        listBoxItem.OnUnselected(new RoutedEventArgs(Selector.UnselectedEvent, listBoxItem));
    }
    listBoxItem.UpdateVisualState();
} 
```

我自己还没有尝试过，看看这是否真的解决了问题，但我认为这是一个很好的起点。您还应该考虑让您的项目源自`ListBoxItem`而不是`ContentControl`.

# java - 具有优先队列的 Java 可比对象

> ID：12342539
> 
> 赞同：2
> 
> 时间：2012-09-09T20:10:10.163
> 
> 标签：java, interface, queue, comparable

我正在尝试在自定义类上使用优先级队列（java.util.PriorityQueue）。我知道 PriorityQueue 类使用 Comparable 接口，所以我在我的自定义类中实现了它：

```
public class State implements Comparable<State> {
    public int val;

    public State(){
        this.val = 0;
    }

    public int compareTo(State other){
        return this.val - other.val;
    }
} 
```

为了使用队列，我做了：

```
PriorityQueue<State> q = new PriorityQueue<State>();
q.add(myState1);
q.add(myState2);
// etc. 
```

它编译正确，但在运行时出现此异常：

```
Exception in thread "main" java.lang.ClassCastException: State cannot be cast to
java.lang.Comparable
    at java.util.PriorityQueue.siftUpComparable(Unknown Source)
    at java.util.PriorityQueue.siftUp(Unknown Source)
    at java.util.PriorityQueue.offer(Unknown Source)
    at java.util.PriorityQueue.add(Unknown Source)
    at MapTable.search(MapTable.java:308)
    at Map.main(Map.java:67) 
```

我究竟做错了什么？据我所知，这就是我实现可比性的方式。感谢所有的答案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-09T20:40:11.133

[阿米特](https://stackoverflow.com/users/572670/amit)最初在他的评论中提出了一条非常明智的建议；本质上，请确保您没有引用另一个名为`State`的类，该类将您自己`State`的视图隐藏起来，例如`java.lang.Thread.State`and `javax.swing.plaf.nimbus.State`。这通常是许多错误的原因，因此请确保记住这一点。

不幸的是，这里不是这样。[正如我在评论](https://stackoverflow.com/questions/12342539/java-comparable-object-with-priority-queue#comment16570753_12342539)中指出的那样，在这种情况下，异常将打印任何其他的*限定*`State`名称作为异常消息的一部分。由于限定名称是`State`，因此您可能忘记重新编译是有道理的`State`。:-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-09T20:20:33.847

您的代码在我的 Eclipse ide 中正常工作。也许您已经从不同的包中导入了一个类 State？

# c - printf("%s") 返回符号

> ID：12342540
> 
> 赞同：1
> 
> 时间：2012-09-09T20:10:19.893
> 
> 标签：c, printf

做 K&R 练习 1-16，并且想简单地打印一个 char 数组的内容。

```
#define MAXLINE 1000        /* max num of input chars */
char longest[MAXLINE];      /* char array to hold longest input */

...get input, store, calculate longest input line...

printf("Length : %d, Text was : %s\n", max, longest); 
```

我得到这个作为输出：

![C程序的shell输出](../Images/82ab648866cb7f8790751fe7d22ae44d.png)

我应该怎么做才能打印文本，这些是 unicode 字符吗？

PS。我到处找...

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-09T20:22:51.057

改变

```
(c = getchar() != EOF) 
```

到

```
(c = getchar()) != EOF 
```

您的版本将每个字符读取的 c 设置为 1，将 eof 设置为 0。

# android - 将 FILE* 转换为 ifstream C++、Android NDK

> ID：12342542
> 
> 赞同：4
> 
> 时间：2012-09-09T20:10:35.657
> 
> 标签：android, c++, file, android-ndk

我正在使用 NDK C++ 组件编写一个 Android 项目，并且有一个需要大量解析的文件。NDK 只允许我获得一个指向我正在处理的文件的 FILE* 指针，而不是一个 ifstream ，它有一些与之相关的更多便利功能。无论如何将 FILE* (cstdio) 转换为 ifstream (iostream)？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-09T20:45:51.957

通常，您**不能**将 a 转换`FILE*`为`std::ifstream`. 但是，无论如何这并不是必需的：创建一个可用于初始化`std::istream`. 使用 an`std::istream`应该就足够了，因为 by 提供的额外功能`std::ifstream`无论如何都不能真正帮助解析。只要您不需要使用 seek，创建一个用于从 a 读取的流缓冲区`FILE*`就非常简单。所需要的只是覆盖该`std::streambuf::underflow()`函数：

```
class stdiobuf
    : std::streambuf
{
private:
    FILE* d_file;
    char  d_buffer[8192];
public:
    stdiobuf(FILE* file): d_file(file) {}
    ~stdiobuf() { if (this->d_file) fclose(this->d_file); }
    int underflow() {
        if (this->gptr() == this->egptr() && this->d_file) {
            size_t size = fread(this->d_file, 8192);
            this->setg(this->d_buffer, this->d_buffer, this->d_buffer + size);
        }
        return this->gptr() == this->egptr()
            ? traits_type::eof()
            : traits_type::to_int_type(*this->gptr());
    }
}; 
```

剩下的就是初始化 a`std::istream`以使用 a `stdiobuf`：

```
stdiobuf     sbuf(fopen(...));
std::istream in(&sbuf); 
```

我刚刚输入了上面的代码，目前我无法尝试。然而，基本应该是正确的，尽管可能有类型，甚至可能有一点缺陷。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-09T20:18:29.680

请注意，没有办法检索，`std::ifstream`但您*可以获得*`std::istream`.

虽然不是标准 C++ 的一部分，但有时会通过[构造函数](http://stdcxx.apache.org/doc/stdlibref/basic-filebuf.html#idx49)`std::basic_filebuf`公开扩展，该构造函数采用.[`std::FILE *`](http://stdcxx.apache.org/doc/stdlibref/basic-filebuf.html#idx49)

> ```
> basic_filebuf(FILE *fp, char_type *buf = 0, 
>               streamsize n = /* default size */); 
> ```
> 
> 构造一个类的对象`basic_filebuf`，用 初始化基类`basic_streambuf<charT,traits>()`。然后它调用`open(fp, buf, n)`.

你应该使用它的方式如下......

```
FILE *pf = ...; /* e.g. fopen("/etc/passwd", "r") */
std::filebuf buf(pf);
std::istream stream(&buf); 
```

现在，如果这个扩展不可用，那么恐怕除了尝试实现自己的`std::streambuf`实现所需的工作之外，您无能为力。

# tableview - 将小图像添加到表格视图

> ID：12342543
> 
> 赞同：0
> 
> 时间：2012-09-09T20:10:37.847
> 
> 标签：tableview

我有一个`UITableView`带有`NSMutableArray`很多类名称（1A、1B、2A ...）的 a，我想在行中的文本之前显示图像。如果单元格中的文本 = 到 1A，如何显示 1A 图像？任何想法或代码示例？

非常感谢，因为我在这个世界上很新：D

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-15T05:02:37.733

这是如何做到的：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

  static NSString *cellIdentifier = @"Cell";

  UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:Identifier];

if (cell == nil) {
    cell = [[UITableViewCell alloc]initWithStyle:UITableViewCellStyleDefault reuseIdentifier:Identifier];
}

//This piece of code will allow you to display your images beside your text in the tableView

cell.imageView.image = [UIImage imageNamed:[self.classNameArray objectAtIndex:indexPath.row]]; 
```

}

我希望这会有所帮助，它对我有用。:) 干杯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T19:30:16.830

你是这个意思吗？

[http://www.appcoda.com/customize-table-view-cells-for-uitableview/](http://www.appcoda.com/customize-table-view-cells-for-uitableview/)

如果是，上面的链接提供了有关如何制作自己的 tableviewcells 的教程，并且在制作这样的单元格时，如果您想要一个 nsstring、uiimage 或每个 tableviewcell 中显示的任何内容，您可以自己提供。

# asp.net-mvc - 使用 NoSQL DB 的 asp.net 动态数据支架

> ID：12342548
> 
> 赞同：1
> 
> 时间：2012-09-09T20:11:21.017
> 
> 标签：asp.net-mvc, entity-framework, nosql, asp.net-mvc-scaffolding

有什么方法可以使用 NoSQL DB (CouchDB) 使用 ASP.NET 动态数据 WebApp 或 Scaffold 我有一个对象类库 - 标记为 ContextModel。

我想我必须从我的对象模型生成一个 EDMX 文件 - 但我不确定如何。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T18:04:13.093

我认为您想要的是创建一个自定义脚手架。Steven Sanderson 有一个关于 MvcScaffolding 的精彩系列文章，其中[一篇文章专门讨论了这个主题](http://blog.stevensanderson.com/2011/04/07/mvcscaffolding-creating-custom-scaffolders/)。所以你会做类似的事情

```
> scaffold CustomScaffolder CouchRepository 
```

如果要将其设置为默认存储库：

```
> Set-DefaultScaffolder Repository CouchRepository 
```

您不需要生成 EDMX，因为您不需要 EntityFramework。
当您搭建控制器时，请务必使用“-Repository”开关。看这篇[文章](http://blog.stevensanderson.com/2011/01/28/mvcscaffolding-one-to-many-relationships/)

# cordova - 如何在 Sencha Touch 2 中将 ChildBrowser 插件放入面板中？

> ID：12342560
> 
> 赞同：1
> 
> 时间：2012-09-09T20:12:34.290
> 
> 标签：cordova, touch, extjs, childbrowser

我想将 ChildBrowser 放入 Sencha Touch 2 网页的面板中。我第一次使用 iframe，但尺寸很奇怪。现在想把Childbrowser插件放到一个面板里，但是不知道怎么做。请问有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T00:50:28.117

这不是 ChildBrowser 的工作方式。Sencha Touch 的内容位于 PhoneGap 提供的主 web 视图中。ChildBrowser 是*另一个*web 视图，您可以使用它在 Internet 上显示各种内容，而无需劫持您的主应用程序的 web 视图。没有办法把一个放在另一个。

# arrays - 如何创建一个excel列的内容数组

> ID：12342568
> 
> 赞同：2
> 
> 时间：2012-09-09T20:13:25.023
> 
> 标签：arrays, excel, scalable, vba

我在excel电子表格的A列中有10个值（它会更多）有没有办法获取列的值并将它们放入数组中？

如果可能的话，是否可以将这些值以不同于它们在电子表格中的顺序放置。例如，如果我的电子表格值是“Apple”“Orange”和“Banana”，那么我希望我的数组看起来像位置 0“Orange”、位置 1“Banana”和位置 2“Apple”。

有人知道如何做到这一点吗？顺便说一句，它需要从 10 扩展到 1000 个值，而无需过多编辑代码

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T02:32:43.703

您可以为单个列创建索引数组而无需循环，如下所示

```
Sub GetArray()
Dim X
Dim lngCol As Long
lngCol = Cells(Rows.Count, "A").End(xlUp).Row
X = Application.Transpose(Application.Evaluate("If(row(A1:A" & lngCol & "),row(1:" & lngCol & ")-1 & A1:a" & lngCol & ",0)"))
End Sub 
```

您没有发布您想要如何对数据进行排序？ ![在此处输入图像描述](../Images/09a3e9f14f73b500662f963879065a31.png) **针对随机排序进行了更新**

```
Sub GetArray2()
Dim X()
Dim lngCol As Long
lngCol = Cells(Rows.Count, "A").End(xlUp).Row
X = Application.Transpose(Range("A1:A" & lngCol))
Call ShuffleArrayInPlace(X())
End Sub 
```

下一个子使用[Chip Pearson 的 ShuffleArray的修改版本](http://www.cpearson.com/excel/ShuffleArray.aspx)

```
Sub ShuffleArrayInPlace(InArray() As Variant)
'http://www.cpearson.com/excel/ShuffleArray.aspx
''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''
' ShuffleArrayInPlace
' This shuffles InArray to random order, randomized in place.
''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''
    Dim N As Long
    Dim Temp As Variant
    Dim J As Long

    Randomize
    For N = LBound(InArray) To UBound(InArray)
        J = CLng(((UBound(InArray) - N) * Rnd) + N)
        If N <> J Then
            Temp = InArray(N)
            InArray(N) = InArray(J)
            InArray(J) = Temp
        End If
    Next N
      For N = LBound(InArray) To UBound(InArray)
      InArray(N) = N - 1 & " " & InArray(N)
      Debug.Print InArray(N)
      Next N
End Sub 
```

![在此处输入图像描述](../Images/18d941f7a7f00abce01f69ffbd72d015.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T22:04:38.400

一种将整个范围读入数组的方法：

```
Sub readText()

    Dim i As Integer
    Dim dataStr As String
    Dim arr As Variant

    'read data
    arr = Range("A1:A10").Value

    'display the data...
    For i = 1 To UBound(arr)
        'add the value at this point - given by arr(i,1) - to the string. You can access these elements 
        'directly via this sort of array notation
        dataStr = dataStr & arr(i, 1) & vbCrLf

    Next i
    'show what was in those cells
    MsgBox (dataStr)
    MsgBox (arr(3,1) )
End Sub 
```

几乎可以肯定，首先在 Excel 中排序（即按字母顺序？增加？按顺序？等）而不是在 vba 中这样做。

# ios - 没有越狱检测

> ID：12342571
> 
> 赞同：8
> 
> 时间：2012-09-09T20:13:34.670
> 
> 标签：ios, objective-c, jailbreak

我正在尝试制作一个仅适用于越狱 iDevices 的应用程序。我已经有越狱检测代码：

```
([[UIApplication sharedApplication] canOpenURL:[NSURL URLWithString:@"cydia://"]]);{
    UIAlertView *cydiaisinstalled=[[UIAlertView alloc]initWithTitle:@"Cydia is installed!"
                                                            message:@"You can use Respring!"
                                                           delegate:self
                                                  cancelButtonTitle:@"OK"
                                                  otherButtonTitles:nil];
    [cydiaisinstalled show];
}} 
```

但现在我需要能够检测设备是否未越狱。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-09T20:23:23.493

尝试访问应用程序沙箱之外的任何文件。例如：

```
BOOL IsDeviceJailbroken(void) {
    #if TARGET_IPHONE_SIMULATOR
    return NO;
    #else
    return [[NSFileManager defaultManager] fileExistsAtPath: @"/bin/bash"];
    #endif
} 
```

请注意，安装 Cydia 和拥有越狱设备是两件事。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-09T23:06:31.440

我编写了一个函数来检测设备是否因另一个问题而越狱，但在这里似乎相关：

```
- (BOOL) isJailbroken() {

    //If the app is running on the simulator
    #if TARGET_IPHONE_SIMULATOR
        return NO;

    //If its running on an actual device
    #else
        BOOL isJailbroken = NO;

        //This line checks for the existence of Cydia
        BOOL cydiaInstalled = [[NSFileManager defaultManager] fileExistsAtPath:@"/Applications/Cydia.app"];

        FILE *f = fopen("/bin/bash", "r");

        if (!(errno == ENOENT) || cydiaInstalled) {

            //Device is jailbroken
            isJailbroken = YES;
        }            
        fclose(f);
        return isJailbroken;
    #endif
} 
```

该功能使用两个检查来查看手机是否越狱：它首先检查是否安装了 Cydia。并非所有越狱设备都安装了 Cydia，尽管大多数都安装了，所以我还检查了 bash 的存在，它也只出现在越狱设备上。请注意，此功能几乎适用于所有情况，但可能不是 100%。唯一在越狱的 iDevice 上没有 Cydia 的人可能是那些正在尝试越狱设备而不是使用它们来获得调整和主题等优势的人。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-16T20:28:57.400

好的，感谢所有答案，但我自己发现了。这是代码：

```
if ([[UIApplication sharedApplication] canOpenURL:[NSURL URLWithString:@"cydia://"]]) {
    //insert action if cydia is installed
}
if ([[UIApplication sharedApplication] canOpenURL:[NSURL URLWithString:@"cydia://"]] == NO) {
    //insert action if Cydia is not installed
} 
```

使用此代码，您可以检测 idevice 上的任何应用程序，只要该应用程序具有 URL 方案，您可以在此处找到大部分 URL 方案：http: [//handleopenurl.com](http://handleopenurl.com)

PS：你必须用你的动作替换绿色部分:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-04-07T09:42:52.097

对于那些在 2021 年来到这里的人来说，这是一种非常快速的方法来检测您是否已越狱，并且与其他答案不同，这将有助于处理现有的所有数十种不同的越狱：

```
FILE * filepath = fopen("/var/mobile/test-jb", "w");

    if (!filepath) {
        fclose(filepath);
        fprintf(stderr,"Random processes are running sandboxed. Not jailbroken\n");
        return -2;
    }

    printf("Detected sandbox escape. This device is likely jailbroken.\n");
    fclose(filepath); 
```

这样做的目的是尝试将测试文件写入`/var/mobile`. 如果您越狱并拥有适当的权利，它通常可以工作。在未越狱的设备上，这将`deny()`在控制台中失败。

确保您使用以下权利签署您的应用程序：

```
<key>com.apple.private.security.no-container</key>
    <true/>
<key>platform-application</key>
    <true/> 
```

# streamreader - PrintWriter (java), StreamReader(C#)

> ID：12342572
> 
> 赞同：-1
> 
> 时间：2012-09-09T20:13:35.333
> 
> 标签：streamreader, printwriter

我已经建立了一个基本的服务器-客户端连接（服务器是 Java，客户端是 C#），当服务器使用 PrintWriter 向客户端发送大量数据时，客户端在使用 StreamReader 时不会读取一些数据

服务器发送给客户端：

```
Socket TEMP_SOCK = (Socket) RandomServer.Connections.get(1);
PrintWriter TEMP_OUT = new PrintWriter(TEMP_SOCK.getOutputStream());
TEMP_OUT.println("test");
TEMP_OUT.flush(); 
```

客户端从服务器接收：

```
while(true) {
    NetworkStream Stream = connection.GetStream();
    StreamReader streamin = new StreamReader(Stream);
    string returndata = IN.ReadLine();
    print(return data);
} 
```

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T20:37:12.560

您需要重新使用原始`StreamReader`版本，而不是在每次迭代中创建一个新版本。

现在，每个 StreamReader 将消耗额外的字符来填充其内部缓冲区，并且由于您不再使用每个字符，这些字符将被吞噬。

# objective-c - 在比较 2 个整数或浮点数时，Objective-C 是否有可以返回 -1、0 或 1 的运算符、函数或方法？

> ID：12342582
> 
> 赞同：1
> 
> 时间：2012-09-09T20:14:23.883
> 
> 标签：objective-c

我尝试在 Google 或 Stackoverflow 上搜索，但找不到这样的运算符。在 C 中，我们曾经定义过一个`cmp`宏，但是有内置的东西吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-09T20:22:57.997

正如@Kashiv 提到的，100% 的 C 在 Objective-C 中可用。但是，如果您正在使用 Cocoa 框架并询问更“可可”的方法，则 NSNumber 有一个[compare:](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/nsnumber_Class/Reference/Reference.html#//apple_ref/doc/uid/20000178-BABDGHEE)方法，它返回一个[NSComparisonResult](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Miscellaneous/Foundation_Constants/Reference/reference.html#//apple_ref/doc/c_ref/NSComparisonResult)，它可以是 -1、0 或 1。

但是，如果我们在编程中完全是 Cocoa，我们应该进一步从 -1、0 和 1 的具体知识中抽象出来，并使用常量 NSOrderedAscending、NSOrderedSame 和 NSOrderedDescending。这些是语义命名的，这就是以这种方式编程的真正价值。

```
NSComparisonResult order = [myInt compare:anotherInt];
switch(order) {
  case NSOrderedAscending:
    // myInt is greater than anotherInt
  break;
  // ... etc
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T20:18:13.803

在 C 中可以做的任何事情，都可以在 Objective-C 中完成。

# php - 使用正则表达式实现 mb_trim – 最后一个符号不会被删除

> ID：12342583
> 
> 赞同：0
> 
> 时间：2012-09-09T20:14:24.730
> 
> 标签：php, regex

我想用空格和连字符修剪字符串

```
$str = mb_ereg_replace("^([ \-]+)|([ \-]+)$", "", $str); 
```

对于英文文本来说还不错。但是当俄语出现时，问题突然出现了：最后一个符号——无论是连字符还是空格——似乎都没有被删除。这仅对以俄语符号结尾的文本有效：

*   `наркоман штоле --- -`– 附近的空间`е`将保留；

*   `наркоман штоле? lol u mad --- -`– 修剪成功。

    发生了什么？

# android - GCM 服务器在在线域上崩溃

> ID：12342585
> 
> 赞同：0
> 
> 时间：2012-09-09T20:14:30.420
> 
> 标签：android, jsp, servlets, google-cloud-messaging, java-server

嘿，我一直在关注 gcm 教程来创建 gcm-demo-server 和 demo-client。一切在tomcat上运行良好，

然后我将 .war 文件上传到一个免费的 jsp 域

首先，当我从我的 android 注册时，页面显示“未注册设备”，似乎有 1 个设备已注册

我按下发送按钮在设备上发送通知，服务器因以下错误而崩溃

```
 ype Exception report

message

description The server encountered an internal error () that prevented it from fulfilling this request.

exception

java.security.AccessControlException: access denied (java.net.SocketPermission android.googleapis.com:443 connect,resolve)
    java.security.AccessControlContext.checkPermission(AccessControlContext.java:323)
    java.security.AccessController.checkPermission(AccessController.java:546)
    java.lang.SecurityManager.checkPermission(SecurityManager.java:532)
    java.lang.SecurityManager.checkConnect(SecurityManager.java:1034)
    sun.net.www.http.HttpClient.openServer(HttpClient.java:527)
    sun.net.www.protocol.https.HttpsClient.<init>(HttpsClient.java:271)
    sun.net.www.protocol.https.HttpsClient.New(HttpsClient.java:328)
    sun.net.www.protocol.https.AbstractDelegateHttpsURLConnection.getNewHttpClient(AbstractDelegateHttpsURLConnection.java:172)
    sun.net.www.protocol.http.HttpURLConnection.plainConnect(HttpURLConnection.java:793)
    sun.net.www.protocol.https.AbstractDelegateHttpsURLConnection.connect(AbstractDelegateHttpsURLConnection.java:158)
    sun.net.www.protocol.http.HttpURLConnection.getOutputStream(HttpURLConnection.java:896)
    sun.net.www.protocol.https.HttpsURLConnectionImpl.getOutputStream(HttpsURLConnectionImpl.java:230)
    com.google.android.gcm.server.Sender.post(Sender.java:479)
    com.google.android.gcm.server.Sender.post(Sender.java:458)
    com.google.android.gcm.server.Sender.sendNoRetry(Sender.java:170)
    com.google.android.gcm.server.Sender.send(Sender.java:121)
    com.google.android.gcm.demo.server.SendAllMessagesServlet.doPost(SendAllMessagesServlet.java:94)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:641)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    java.lang.reflect.Method.invoke(Method.java:597)
    org.apache.catalina.security.SecurityUtil$1.run(SecurityUtil.java:274)
    org.apache.catalina.security.SecurityUtil$1.run(SecurityUtil.java:271)
    java.security.AccessController.doPrivileged(Native Method)
    javax.security.auth.Subject.doAsPrivileged(Subject.java:517)
    org.apache.catalina.security.SecurityUtil.execute(SecurityUtil.java:306)
    org.apache.catalina.security.SecurityUtil.doAsPrivilege(SecurityUtil.java:166)
note The full stack trace of the root cause is available in the Apache Tomcat/7.0.26 logs. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T08:15:59.607

看起来一些身份验证问题可能是由于您使用的密钥。我不知道其中的确切问题。请参考本教程，它可能会对您有所帮助，

[http://androidv5.wordpress.com/2012/08/15/how-to-implement-google-cloud-messaging/](http://androidv5.wordpress.com/2012/08/15/how-to-implement-google-cloud-messaging/)

这对我来说可以。

# django - 如果重新启动服务器，所有带有 ETA 的 celery-tasks 都会消失

> ID：12342587
> 
> 赞同：0
> 
> 时间：2012-09-09T20:14:33.900
> 
> 标签：django, redis, celery

有什么想法可以在机器重新启动后“坚持”这些任务以恢复？

该系统是：

经纪人：redis 服务器 2.4.8

redis==2.4.11

django-celery==3.0.9

芹菜==3.0.9

# ios - 卡片扫描功能 iOS

> ID：12342588
> 
> 赞同：1
> 
> 时间：2012-09-09T20:14:37.623
> 
> 标签：ios, touch, scanning

我从这个[视频](http://vimeo.com/42738280)中发现了 iOS 的这个非常酷的功能。知道这怎么可能吗？希望他们可以利用这个奇妙的功能

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T20:17:32.243

这是一个完整的猜测，但卡的某些部分可能是导电的（毕竟你可以得到[导电墨水](http://en.wikipedia.org/wiki/Conductive_ink)），因此当按下屏幕时会产生看起来像正常的多点触控活动。

谜团已揭开。:-)

# jquery - Kendo Gauge 绑定到 XML/JSON 数据源

> ID：12342590
> 
> 赞同：1
> 
> 时间：2012-09-09T20:15:15.007
> 
> 标签：jquery, xml, json, datasource, kendo-ui

有没有人有如何将 Kendo Gauge 绑定到 XML 或 JSON 数据源的示例？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T20:26:48.117

您可以尝试`ajax`响应`json`：

```
...
success: function(data){
   $("#mygauge").data("kendoLinearGauge").value(data.yourValue);
}
... 
```

# php - 使用 multipart/form-data 上传卷曲文件

> ID：12342594
> 
> 赞同：3
> 
> 时间：2012-09-09T20:15:34.753
> 
> 标签：php, curl, upload

我在使用 curl 上传文件时遇到问题。我想在视频托管网站上上传我的服务器文件。脚本需要`Content-type: multipart/form-data`and `Content-type: video/mp4`，但我不知道该怎么做。上传文件后有`content type application/octet-stream`.

这是脚本

```
class curl
{
         function __construct($use = 1)
         {
         $this->ch = curl_init();
                 if($use = 1)
                 {
                         curl_setopt ($this->ch, CURLOPT_POST, 1);
                         curl_setopt ($this->ch, CURLOPT_COOKIEJAR, 'cookie.txt');
                         curl_setopt ($this->ch, CURLOPT_FOLLOWLOCATION, 1);
                         curl_setopt ($this->ch, CURLOPT_RETURNTRANSFER, 1);
                 }
                 else
                 {
                         return 'There is the possibility, that this script wont work';
                 }
         }
         function first_connect($loginform,$logindata)
         {
                 curl_setopt($this->ch, CURLOPT_URL, $loginform);
                 curl_setopt($this->ch, CURLOPT_POSTFIELDS, $logindata);
         }
         function store()
         {
                 $this->content = curl_exec ($this->ch);
         }
         function execute($page)
         {
                 curl_setopt($this->ch, CURLOPT_URL, $page);
                 $this->content = curl_exec ($this->ch);
         }
         function close()
         {
                 curl_close ($this->ch);
         }

         function __toString()
         {
         return $this->content;
         }

         function upload($file)
         {
            curl_setopt($this->ch, CURLOPT_HTTPHEADER, array("Content-type: multipart/form-data"));
            curl_setopt($this->ch, CURLOPT_URL, 'http://uploadsite.com/index.php?act=files&do=upload');
            $postdata = array("file[]" => "@/".realpath($file));
            echo $postdata;
            curl_setopt($this->ch, CURLOPT_POSTFIELDS, $postdata);
            curl_exec ($this->ch);
         }
}

$getit = new curl();
$getit->first_connect('http://uploadsite.com/index.php?act=login&login=true','login=true&file_session=&email=xxx%40yahoo.de&password=xxx&upload=Login');
$getit->store();
$getit->execute('http://uploadsite.com/index.php?act=user&do=home');
$getit->upload('Sample.mp4'); 
```

和包从`livehttpheaders`

```
http://uploadsite.com/index.php?act=files&do=upload

POST /index.php?act=files&do=upload HTTP/1.1
Host: yourupload.com
User-Agent: Mozilla/5.0 (Windows NT 6.1; rv:15.0) Gecko/20100101 Firefox/15.0.1
Accept: text/javascript, text/html, application/xml, text/xml, */*
Accept-Language: de-de,de;q=0.8,en-us;q=0.5,en;q=0.3
Accept-Encoding: gzip, deflate
Connection: keep-alive
X-Requested-With: XMLHttpRequest
Referer: http://yourupload.com/index.php?act=user&do=home
Content-Length: 41648931
Content-Type: multipart/form-data; boundary=---------------------------265001916915724
Cookie: _pk_ref.9.d1ba=%5B%22%22%2C%22%22%2C1347200605%2C%22http%3A%2F%2F62.75.242.162%2Findex.php%22%5D; _pk_id.9.d1ba=08e499ca1b88c81c.1345157523.12.1347203814.1347189831.; PHPSESSID=jjajqi2mi7fe1blso5qvge9ue5; _pk_ses.9.d1ba=*; member_id=3051; member_pass=xxx
Pragma: no-cache
Cache-Control: no-cache
-----------------------------265001916915724
Content-Disposition: form-data; name="file[]"; filename="Sample.mp4"
Content-Type: video/mp4

HTTP/1.1 200 OK
Server: nginx/0.7.67
Date: Sun, 09 Sep 2012 15:23:56 GMT
Content-Type: text/html
Transfer-Encoding: chunked
Connection: keep-alive
X-Powered-By: PHP/5.3.3-7+squeeze13
Expires: Thu, 19 Nov 1981 08:52:00 GMT
Cache-Control: no-store, no-cache, must-revalidate, post-check=0, pre-check=0
Pragma: no-cache 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-09T20:19:48.107

替换这一行：

```
$postdata = array("file[]" => "@/".realpath($file)); 
```

和：

```
$postdata = array("file[]" => "@/".realpath($file).";type=video/mp4"); 
```

它应该可以工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-22T20:08:11.830

我使用 curl 连接 Web 服务并使用与这篇文章类似的想法上传文件，但它不起作用。与上一个答案不同的原因，所以我将描述我的解决方案；也许我的经验对其他人有用。

我有两个问题。第一个是我的网络服务不喜欢文件名中的绝对路径。如果 OP 代码中的 $file 有路径，则使用：

```
$postdata = array('file[]' => "@/".realpath($file)); 
```

变成：

```
Content-Disposition: form-data; name="file[]"; filename="/tmp/iy56ham" 
```

并且该路径生成了一个错误的请求。所以我不得不使用 chdir、basename 和 dirname 以避免在 $postdata 中使用路径。

另一方面，curl 发送了一个额外的标头，在 OP 中没有显示：

```
Expect: 100-continue 
```

我的网络服务不喜欢它（推特 WS 也不喜欢），它的回答是：

```
417 Expectation Failed 
```

为避免 curl 发送有问题的标头，您可以使用：

```
curl_setopt( $curlHandler, CURLOPT_HTTPHEADER, array('Expect:') ); 
```

所以你设置了一个空的 Expect 标题，curl 不会被 100-continue 覆盖。

希望这可以帮助某人...

# postgresql - PostgreSQL：数据类型小于 smallint？

> ID：12342596
> 
> 赞同：2
> 
> 时间：2012-09-09T20:16:02.447
> 
> 标签：postgresql

是否有小于 smallint（16 位）的数据类型？我需要一个只有从 1 到 31 的数字的列，所以我认为 5 位就足够了，我不想浪费每个元组 11 位的开销来浪费空间。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-09T20:30:57.677

在[文档](http://www.postgresql.org/docs/9.1/static/datatype-numeric.html)中没有这样的 1 字节整数，所以我认为最好的方法是使用 small int。如果您不考虑进行任何数学运算，您也可以只使用 varchar(2) （但这不是最好的主意）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-09T23:01:24.023

如果您需要 31个*值*，而不是 31 个数字，则可以使用 CHAR(1) 和 CHECK() 约束。

```
your_column char(1) not null
  check (your_column in ('a','b','c'...'z','1','2','3','4','5')) 
```

但我不认为这是一个好主意。（无论如何，5 位“类型”通常会被填充到 8 位边界。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-09T20:28:47.990

这是一个实际的担忧吗？浪费了多少磁盘和内存？您是否准备好应对因数据类型发生此类更改而导致的任何可能的减速或代码更改？

如果是肯定的，请查看[位字符串类型](http://www.postgresql.org/docs/current/static/datatype-bit.html)。

# octave - Octave 不在 Mac OS X Mountain Lion 中生成绘图

> ID：12342600
> 
> 赞同：3
> 
> 时间：2012-09-09T20:17:05.707
> 
> 标签：octave, osx-mountain-lion

Octave 没有在 Mountain Lion 中制作任何地块。问题是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-09T20:17:05.707

这与 X11 和 GNUPLOT 有关，但可以通过终端中的以下代码解决：

```
cd /Applications/Gnuplot.app/Contents/Resources/lib
mv libfreetype.6.dylib libfreetype.6.dylib.bak
ln -s /usr/X11/lib/libfreetype.6.dylib . 
```

它对我有用，希望它也对你有用。

[在http://octave.1599824.n4.nabble.com/Mac-OS-X-Mountain-Lion-Octave-can-not-execute-sombrero-td4643502.html](http://octave.1599824.n4.nabble.com/Mac-OS-X-Mountain-Lion-Octave-can-not-execute-sombrero-td4643502.html)上感谢 Slava

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-20T16:14:52.153

仅供参考：我通过 Macports 重新安装 Gnuplot 设法解决了这个问题。所以基本上我所做的就是以下。

[1) 通过从 octave 网站 ( http://wiki.octave.org/Octave_for_MacOS_X](http://wiki.octave.org/Octave_for_MacOS_X) )下载二进制安装程序来安装 octave 。这将为您提供最新版本的 octave。

2) 使用 macports 安装 GnuPlot（这将确保您正在运行的 GNUPlot 版本已编译为在 OSX 上运行）。我想这一步也可以用 Homebrew 来执行。

# qt - Qt GUI 的响应性

> ID：12342602
> 
> 赞同：2
> 
> 时间：2012-09-09T20:17:14.767
> 
> 标签：qt, qtgui

我在应用程序启动时在 Qt GUI 线程中做了大量活动（创建/预分配和隐藏超过一千个小部件，主要作为运行时/初始化权衡，它是一个嵌入式系统，需要在运行期间保持响应）。

响应式操作的目标已经实现 - 但现在我面临着使初始化更具响应性的挑战。将初始化线程化到工作线程不是一种选择——大部分 CPU 负载来自对 QtGui 的调用，而这些负载需要在主线程中进行。

所以，我想知道是否有一个选项可以让应用程序控制来处理所有其他事件？做重绘等？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-09T20:40:30.680

更简洁，无需在代码中添加`processEvents()`调用：将创建/预分配实现为插槽。让它成为一个带有封装状态机的插槽（知道接下来要做什么），或者做更多的插槽，或者委托给一些具有通用接口的类，取决于你的设计和品味。每次完成对插槽的调用后，再次将调用作为排队连接发布给自己。

```
slots: void makeWidget();
signals: void widgetMade();
...
connect(this,SIGNAL(widgetMade()),this,SLOT(makeWidget()),Qt::QueuedConnection); 
```

这样，您的小部件创建将与其他 GUI 活动一样排队。显式的第 5 个参数限定符是必需的，默认值`Qt::AutoConnection`将被解析为，`Qt::DirectConnection`因为您在同一个线程中。作为奖励，你实际上可以做一个非阻塞的初始化进度条，因为你知道要初始化多少个小部件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T20:29:42.103

似乎我的 GoogleFu 已经抛弃了我一段时间：

```
qApp->processEvents() 
```

这会处理所有未完成的 GUI 事件——只要经常调用它就可以解决问题。

# javascript - 访问 TableView 的 UIAutomation 问题

> ID：12342603
> 
> 赞同：1
> 
> 时间：2012-09-09T20:17:27.157
> 
> 标签：javascript, ios, ios-ui-automation

现在我遇到了与他[UIAutomation, UITableView inside UITableViewCell](https://stackoverflow.com/q/11022166/1631314)相同的问题，但我无法像他那样解决它。我的屏幕与他的屏幕相似，有四个单元格，但它们的名称不同。使用函数 LogElementTree 我得到了与他相同的层次结构，但有点不同。在他的情况下，他得到了这个：

```
UIAWindow
UIATableView

   UIATableCell

      UIATableView

          UIATableCell 1

          UIATableCell 2

          UIATableCell 3

          UIATableCell 4 
```

但我有这个：

```
UIAWindow
UIATableCell 1

UIATableCell 2

UIATableCell 3

UIATableCell 4 
```

使用他的回答我写了我的代码：

```
target.frontMostApp().mainWindow().cells()["Author"].tap(); 
```

或者

```
target.frontMostApp().mainWindow().cells()[0].tap(); 
```

但它没有用。所以有人可以描述如何解决我的问题，拜托。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T04:06:49.437

尝试这个：

```
 target.frontMostApp().mainWindow().tableViews()[0].cells()[0].tap(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-04T18:38:09.077

尝试这样的事情 -

```
target.frontMostApp().mainWindow().tableViews()[0].cells()[0].tableViews()[0].cells()[0].tap(); 
```

# java - Java 错误 预期的

> ID：12342610
> 
> 赞同：-1
> 
> 时间：2012-09-09T20:18:37.527
> 
> 标签：java, compiler-errors

我目前正在做一个扑克 java 游戏练习，我遇到了这个我无法理解的丑陋错误。这一定是某种语法错误，因为编译器会抛出其中的 100 个错误。但我只是不知道错误在哪里？？

```
import java.util.Random;

public class Poker
{
    private Card[] deck;
    private Card[] hand;
    private int currentCard;
    private int numbers[], triples, couples;
    private String faces[], suits[];

    private boolean flushOnHand, fourOfAKind, isStraight;
    private static final int NUMBER_OF_CARDS = 52;

    private static final Random randomNumbers = new Random();

    Poker()
    {
        faces = { "Ace", "Deuce", "Three", "Four", "Five",
            "Six", "Seven", "Eight", "Nine", "Ten", "Jack", "Queen", "King"};
        suits = { "Hearts", "Diamonds", "Clubs", "Spades" };

        numbers = new int[ 13 ];

        deck = new Card[ NUMBER_OF_CARDS ];

        triples = 0; // right here's where the compiler starts complaining
        couples = 0;
            ... 
```

虽然我无法发现任何语法错误？

顺便说一句，这`Card`是一个单独的类。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T20:22:47.217

没有理由`triples`不能在您指示错误的地方分配变量。

但是，您需要像这样分配字符串数组：

```
faces = new String[] { "Ace", "Deuce", "Three", "Four", "Five",
         "Six", "Seven", "Eight", "Nine", "Ten", "Jack", "Queen", "King"};
suits = new String[] { "Hearts", "Diamonds", "Clubs", "Spades" }; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-09T20:22:59.320

**您初始化数组值的语法不正确。**

我不确定为什么编译器在开始抱怨之前要等待另外四行，但是您的数组声明在上面的几行中是无效的。

```
 faces = { "Ace", "Deuce", "Three", "Four", "Five",
        "Six", "Seven", "Eight", "Nine", "Ten", "Jack", "Queen", "King"};
    suits = { "Hearts", "Diamonds", "Clubs", "Spades" }; 
```

应该是这样的...

```
 faces = new String[] { "Ace", "Deuce", "Three", "Four", "Five",
        "Six", "Seven", "Eight", "Nine", "Ten", "Jack", "Queen", "King"};
    suits = new String[] { "Hearts", "Diamonds", "Clubs", "Spades" }; 
```

如果您在声明它的同一行初始化它，则只能使用第一个结构，如下所示：

```
private String faces[] = { "Ace", "Deuce", "Three", "Four", "Five",
        "Six", "Seven", "Eight", "Nine", "Ten", "Jack", "Queen", "King"};
private String suits[] = { "Hearts", "Diamonds", "Clubs", "Spades" }; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-09T20:57:42.613

我意识到这里已经接受了一个答案，但我想指出，如果变量不依赖于构造函数的任何参数，那么在声明时初始化变量会更容易，即

```
public class Poker
{
    private static final int NUMBER_OF_CARDS = 52;
    private Card[] deck = new Card[ NUMBER_OF_CARDS ];
    private int numbers[] = new int[ 13 ]
    private int triples = 0;
    private int couples = 0;
    private String faces[] = { "Ace", "Deuce", "Three", "Four", "Five", "Six", "Seven",
                               "Eight", "Nine", "Ten", "Jack", "Queen", "King"};
    private String suits[] = { "Hearts", "Diamonds", "Clubs", "Spades" }; 
```

等等

# jquery - 获取多个 div 内容

> ID：12342611
> 
> 赞同：0
> 
> 时间：2012-09-09T20:18:39.763
> 
> 标签：jquery

我有这样的html结构：

```
 <div class='inside'>
    <div>429185</div>
    <div>492128</div>               
 </div> 
```

有时里面只有一个div。我需要获取这两个数字，并通过 ajax 将它们发送到 php 脚本。这是ajax的样子：

```
var value_of_divs = jQuery(".inside div").text();

jQuery.ajax({
    type: 'POST',
    data: {
        action: 'someaction',
        code: value_of_divs
    },
    url: '/somescript.php',
    success: function(msg) {
    jQuery('#somediv').html(msg);
    }
}); 
```

但正如您所见，这仅在一个 div 位于“内部”div 中时才有效。当有两个 div 时（如示例中），我从 php 脚本中一无所获。如何获取两个 div 的内容（作为数组？）并将它们发送到 ajax？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-09T20:22:08.980

```
var value_of_divs = $.map($('.inside div'), function (div) {
    return div.innerHTML
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-09T20:26:17.290

```
var value_of_divs = [];

jQuery(".inside div").each(function(){
    value_of_divs.push(jQuery(this).text());

});

jQuery.ajax({
    type: 'POST',
    data: {
        action: 'someaction',
        code: value_of_divs
    },
    url: '/somescript.php',
    success: function(msg) {
    jQuery('#somediv').html(msg);
    }

}); 
```

# ruby-on-rails - 在engineyard中设置环境变量

> ID：12342612
> 
> 赞同：6
> 
> 时间：2012-09-09T20:18:42.320
> 
> 标签：ruby-on-rails, engineyard

我从 heroku 知道可以通过在`heroku config:add MY_ENV_VAR=123`本地运行来添加环境变量。我怎样才能用engineyard实现同样的目标？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-18T13:10:54.657

我们遇到了同样的问题，并向 EngineYard 寻求帮助。来自安永的 Jim Neath 回复如下：

> 不幸的是，乘客没有从系统获得传递的环境变量。您需要做的是创建一个 ruby​​ 包装器，该包装器定义您的环境变量并使用它启动乘客，如下所述：
> 
> [http://blog.phusion.nl/2008/12/16/passing-environment-variables-to-ruby-from-phusion-passenger/](http://blog.phusion.nl/2008/12/16/passing-environment-variables-to-ruby-from-phusion-passenger/)
> 
> 我已经为您创建了一个基本的自定义厨师食谱，它将做到这一点：
> 
> [https://github.com/jimneath/ey-cloud-recipes/tree/master/cookbooks/passenger_env_vars](https://github.com/jimneath/ey-cloud-recipes/tree/master/cookbooks/passenger_env_vars)
> 
> 您将需要使用您的环境变量更新以下文件：
> 
> /ey-cloud-recipes/blob/master/cookbooks/passenger_env_vars/templates/default/env.custom.erb

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-06T10:25:45.003

This is pretty simple for Unicorn using env.custom. Take a look at my answer here [https://stackoverflow.com/a/13741463/1520775](https://stackoverflow.com/a/13741463/1520775)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-21T07:43:34.207

我不认为你可以=/。

我们在 Rails 应用程序中使用的一种解决方法是通过 ssh（ey ssh）到 EngineYard 并在 vim /data/your_app_name/shared/config/exports.rb 中创建一个文件。该文件可能如下所示：

```
ENV["AWS_ACCESS_KEY_ID"] = "your key"
ENV["AWS_SECRET_ACCESS_KEY"] = "your secret"
ENV["AWS_BUCKET"] = "your bucket" 
```

然后在 config/boot.rb 你需要这个文件：

```
require File.expand_path('./exports', File.dirname(__FILE__)) 
```

这既不漂亮，也不轻松。但是，它允许您在应用程序中使用不应检查源代码控制的秘密！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-09-27T04:37:37.347

如果要运行需要这些环境变量的 rake 任务（即 cron 作业），请将变量存储在 /data/my_app/shared/config/env.custom

```
source /data/my_app/shared/config/env.custom && cd /data/my_app/current/ && bundle exec rake my_rake_task 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-07-22T03:15:11.983

我以前也在使用，`Heroku`现在我搬到了`Engineyard`. 这就是我在`Heroku` 添加 gem中获取 ENvironemnt 变量的方式[`figaro`](https://github.com/laserlemon/figaro)。这个 gem 基本上需要目录`application.yml`中的`app/config`文件。当`Rails`应用程序初始化时，它会被执行并将格式设置的键值对加载`YAML`到内存中。在`Heroku` `Figaro`有选项来设置的内容`application.yml`。

```
$ figaro heroku:set -e production 
```

但是，`Engineyard`我们需要手动复制 package 的`application.yml`using`SCP`选项，`EY`其余的事情将由[figaro](https://github.com/laserlemon/figaro)完成。

首先在 gemfile 中包含 gem [figaro](https://github.com/laserlemon/figaro)并安装 gem。
然后我们需要使用[engineyard-hooks](https://support.cloud.engineyard.com/hc/en-us/articles/205407008-Use-Ruby-Deploy-Hooks)将文件复制`/data/[your_app]/shared/config/application.yml`到`/data/[your_app]/current/config/application.yml`. 我们需要使用`before_restart`钩子

```
# inside your project repo create a 'deploy' folder and
#   inside deploy/before_restart.rb paste the following code with or without modifications
# This file is executed everytime after deploy just before your app restarts
on_app_servers_and_utilities do
  # Copy the yaml files from `shared/config` to `current/config`
  ['application.yml'].each do |file_name|
    run "ln -nfs #{config.shared_path}/config/#{file_name} #{config.release_path}/config/#{file_name}"
  end
end 
```

提交您的更改并推送到您的 github 存储库或其他地方。

至此，该文件不存在`/data/[your_app]/shared/config/application.yml`。现在使用以下命令将文件从本地复制到服务器

```
# This copies the application.yml to every instance like app_master, app_slave, utilities, database, etc    
$ ey scp config/application.yml HOST:/data/[your_app_name]/shared/config/ -e app_environment --all 
```

现在您可以部署您的应用程序并获得所有环境变量。

> 注意：每次启动环境时，您都需要调用上述命令将文件复制到服务器。意味着如果您停止登台（例如）并在一段时间后启动它，那么您需要调用上面的命令

# ruby-on-rails - 模型共享的模型架构/设计模式

> ID：12342613
> 
> 赞同：0
> 
> 时间：2012-09-09T20:18:45.363
> 
> 标签：ruby-on-rails, ruby, architecture, software-design

我正在构建一个使用 twitter 和 facebook API 的应用程序。

我打算将每条推文或状态存储在它自己的模型中，让我们调用模型`Tweet`和`Fb_Status`. 我打算创建一个更通用的模型，其中包含两者的文本内容，我们称之为`Statement`。

我应该如何构建这个？

验收标准将类似于：

*   `Statement.all`返回具有两个属性`message`和的记录`word_count`。`message`继承自or `Tweet`，`Fb_Status`无论语句代表什么，while`word_count`是`Statement`模型的唯一属性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T20:29:23.637

既然你已经用 Ruby on Rails 标记了这个问题，我假设你想知道 Rails 可能会提供什么来解决这个问题。

只要使用 Ruby，您当然可以使用类继承来获得对象的所需行为。在此之上，Rails 提供单表继承 (STI)，它将共享某些功能的所有模型映射到一个数据库表。[性传播感染的讨论](http://railsforum.com/viewtopic.php?id=3815)

STI 有其局限性，这就是您可能不想使用它的原因。相反，您可以将不同的模型映射到不同的数据库表。这在 Rails 中不直接支持，但这里[讨论的是多表继承 (MTI)](http://techspry.com/ruby_and_rails/multiple-table-inheritance-in-rails-3/)

# jakarta-ee - Liferay 6.0的Ext插件

> ID：12342618
> 
> 赞同：0
> 
> 时间：2012-09-09T20:19:24.613
> 
> 标签：jakarta-ee, liferay, portlet, liferay-6

我需要向我的 portlet 添加一些功能（发送电子邮件）。我想用 ext-plugin 来做，并`<portlet:actionURL ...>`在我的 jsp 页面中使用。如何使用 ext-plugin 实现此操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T07:07:20.840

您*不想*使用 ext-plugin：它具有侵入性，您可以访问 Liferay 的实现细节，您可能会无意中使用并依赖这些细节。

因此，如果它是您自己的 portlet，请帮自己一个忙，并在适当的插件中实现它们。请注意，在 ext-plugins 中已弃用 portlet 支持，并将从以后的版本中删除：您最好现在进行转换，并停止使用 ext 用于 portlet。

澄清一下，因为我说过你*不想*使用 ext：你可能*需要*使用 ext，而 ext 是一种很好的机制来覆盖许多 Liferay 的实现——效果很好并且已经建立了很长时间。但是，它是侵入性的，并且与其他正确分离的插件相比，它会导致更多的升级困难。但是，即使你*需要*使用 ext: 尽量保持它的小，并在它之外，在插件中完成你的大部分工作。

现在回答你的问题：

我的印象是您已经有了 portlet（因为您想向它们添加一些东西）并且不明白您在问什么：是“我如何在 java 中发送邮件？” 或“如何对 portlet API 进行编程？” 或“我如何使用 Liferay 的服务发送电子邮件？”

前两个问题在这种情况下回答有点过于宽泛，第三个问题你可能想看看 Liferay 的`MailLocalServiceUtil`类，插件也可用。

# objective-c - 在image2 xcode的白色部分显示另一个image2后面的image1，目标c

> ID：12342620
> 
> 赞同：1
> 
> 时间：2012-09-09T20:19:53.033
> 
> 标签：objective-c, ios, xcode, image, draw

我有一个包含表格的图像 (cercle withe bordure )，我想在图像下方绘制一个卡门贝尔进程，并在图像的白色部分显示卡门贝尔进程

我成功地绘制了没有此图像的卡门培尔（圆形），但是当我绘制图像时，卡门培尔完全被图像覆盖，我无法在图像的白色部分看到它

所以我的问题是如何在图像的白色部分显示表格或图像背后的内容

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T21:03:12.337

顶部图像需要是透明的，你想看透它。您还需要使您的图像视图不透明，以便在其后面绘制其他视图：

*   在 iOS 上，您可以将`opaque`UIImageView 的属性设置为`NO`
*   在 Mac 上，您需要将 NSImageView 子类化以`NO`从`-isOpaque`

# vb.net - UltraGrid Win 如果没有过滤器，则隐藏所有行

> ID：12342622
> 
> 赞同：1
> 
> 时间：2012-09-09T20:20:00.573
> 
> 标签：vb.net, row, show-hide, infragistics, ultrawingrid

我正在为 Win Forms (vb.net 2010 Framework 3.5) 使用 UltraWin Grid 12 (Infragistics)。

有没有办法隐藏所有行并只显示过滤的 In 行？除非选择了过滤器，否则我不需要显示任何内容，并且当未选择所有过滤器时，再次隐藏所有行。

我尝试了 For Each ... row.hidden = true，但没有运气。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T19:03:14.403

当没有任何行被过滤时，您可以使用绘图过滤器隐藏所有行：

```
public class HideRowsDrawFilter:IUIElementDrawFilter
{
    private UltraGrid grid;
    public HideRowsDrawFilter(UltraGrid grid)
    {
        this.grid = grid;
    }

    public bool DrawElement(DrawPhase drawPhase, ref UIElementDrawParams drawParams)
    {
        if (this.grid.DisplayLayout.Rows.GetFilteredOutNonGroupByRows().Length == 0)
            return true;
        return false;
    }

    public DrawPhase GetPhasesToFilter(ref UIElementDrawParams drawParams)
    {
        if (drawParams.Element is RowUIElement)
            return DrawPhase.BeforeDrawElement;
        return DrawPhase.None;
    }
} 
```

要设置网格的绘制过滤器，请使用以下命令：

```
this.ultraGrid1.DrawFilter = new HideRowsDrawFilter(this.ultraGrid1); 
```

请注意，这只会阻止绘制行并且它们仍然存在，因此除非您以其他方式禁用它们，否则仍然会发生选择、编辑和激活。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T07:55:02.623

您不能将默认大小设置为 0 吗？

```
 myGrid.Rows.DefaultSize = 0
    myGrid.Refresh() 
```

当您完成获得所需的过滤器时，只需稍后添加行。当未选中时，只需再次输入您的默认大小。

# java - 网络响应太晚？

> ID：12342623
> 
> 赞同：0
> 
> 时间：2012-09-09T20:20:02.960
> 
> 标签：java, android, string

我有一个注册功能，可以在我的应用程序中注册用户。如果注册成功，我的 webapi 将返回“成功”，否则返回“错误”。

即使我的状态变量是“成功”，这部分也总是“其他”：

```
if(register_response=="success") { 
```

[http://pastie.org/private/jizl7udishhbdgvf5qlb9q](http://pastie.org/private/jizl7udishhbdgvf5qlb9q)

怎么可能？我看不到错误：|

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-09T20:20:57.483

这是[java相关](https://stackoverflow.com/a/767379/1635817)的。

比较时`String`，您应该使用`equals()`

# facebook - FQL 和 Graph API：查找所有 Facebook 好友之间的共同好友

> ID：12342627
> 
> 赞同：2
> 
> 时间：2012-09-09T20:20:31.760
> 
> 标签：facebook, api, batch-processing

我正在尝试获取用户与其每个朋友之间的共同朋友的数量。

我已经广泛研究了图形 api 和 fql 来尝试解决这个问题。我看过图api`me/mutualfriends/<uid>`

但是，如果对大量朋友（>1k）执行此操作，那么在每个朋友之间请求共同朋友就太过分了。

然后，我使用 FQL 和 Graph API 对批处理请求（一次最多 50 个）进行了尝试。这仍然会导致一个查询来获取所有朋友，然后 N 查询每个朋友的共同朋友。即使一次批处理 50 个，这也需要相当长的时间。

这是主要的 FQL 查询：

```
select uid1 from friend where uid2 = FRIEND_ID and uid1 in (select uid2 from friend where uid1 = me())'; 
```

这是图形 api 网址：

```
/me/mutualfriends/FRIEND_ID 
```

我正在使用批处理，例如：

```
$facebook->api('/?batch='.json_encode($batch), 'POST'); 
```

批处理中的每个查询都是一个数组，例如：

```
$cur = array('method'=>'GET', 'relative_url'=> $relative_url); 
```

使用图形 api 而不是 fql 似乎更快，但是有没有办法在一个查询中为所有朋友获取共同的朋友？或者实际上有更快的方法来做到这一点？我已经在 SO 的不同部分阅读了有关相互朋友计数的信息，但还没有让它发挥作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T20:28:49.870

我刚刚让mutual_friend_count 工作，如此处所示。但是，我仍然很好奇您是否可以构建单个 FQL 查询来获取此数据。

```
$fql = "SELECT name,mutual_friend_count FROM user WHERE uid IN(SELECT uid2 FROM friend WHERE uid1=me())";

$response = $facebook->api(array(
    'method' => 'fql.query',
    'query' =>$fql,
)); 
```

来自[拥有最多共同好友的好友](https://stackoverflow.com/questions/8376647/friend-with-the-highest-number-of-mutual-friends)

# c++ - 如何使用可变参数模板打印出函数的参数？

> ID：12342633
> 
> 赞同：2
> 
> 时间：2012-09-09T20:21:09.960
> 
> 标签：c++, templates, variadic-templates, generic-programming, function-templates

此示例使用常见的可变参数模板和函数。我想打印出传递给的参数`f`：

```
#include <iostream>

template <typename T>
void print(T t) 
{
    std::cout << t << std::endl;
}

template <typename...T>
void f(T &&...args) 
{
    print(args...);
    f(args...);
}

int main() 
{
    f(2, 1, 4, 3, 5);
} 
```

但我收到以下错误：

```
Compilation finished with errors:<br>
source.cpp: In instantiation of '`void f(T ...)` [with `T = {int, int, int, int, int}`]':<br>
source.cpp:16:20: required from here <br>
source.cpp:10:4: error: no matching function for call to '`print(int&, int&, int&, int&, int&)`'<br>
source.cpp:10:4: note: candidate is:<br>
source.cpp:4:6: note: `template<class T> void print(T)`<br>
source.cpp:4:6: note: template argument deduction/substitution failed: 
source.cpp:10:4: note: candidate expects 1 argument, 5 provided 
```

这实际上是我第一次使用可变参数函数，我并不完全了解如何很好地使用它们。

我也不明白为什么这不起作用以及我能做些什么来帮助它。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2020-08-16T08:33:02.603

## **[c++17](/questions/tagged/c%2b%2b17 "显示标记为“c++17”的问题")更新！**

由于这个问题很笼统，而且在 C++17 中你可以做得更好，我想给出两种方法。

## 解决方案 - 我

使用[折叠表达式](https://en.cppreference.com/w/cpp/language/fold)，这可能很简单

```
#include <iostream>
#include <utility>  // std::forward

template<typename ...Args>
constexpr void print(Args&&... args) noexcept
{
   ((std::cout << std::forward<Args>(args) << " "), ...);
}

int main()
{
   print("foo", 10, 20.8, 'c', 4.04f);
} 
```

输出：

```
foo 10 20.8 c 4.04 
```

**（[见在线直播](https://godbolt.org/z/osWGnf)）**

* * *

## 解决方案 - II

在 的帮助下[`if constexpr`](https://en.cppreference.com/w/cpp/language/if#Constexpr_If)，现在我们可以避免为递归[可变参数模板函数](https://en.wikipedia.org/wiki/Variadic_template)提供基本情况/ 0 参数情况。这是因为编译器在`if constexpr`编译时丢弃了错误语句。

```
#include <iostream>
#include <utility>  // std::forward

template <typename T, typename...Ts>
constexpr void print(T&& first, Ts&&... rest) noexcept
{
   if constexpr (sizeof...(Ts) == 0)
   {
      std::cout << first;               // for only 1-arguments
   }
   else
   {
      std::cout << first << " ";        // print the 1 argument
      print(std::forward<Ts>(rest)...); // pass the rest further
   }
}

int main()
{
   print("foo", 10, 20.8, 'c', 4.04f);
} 
```

输出

```
foo 10 20.8 c 4.04 
```

**（[见在线直播](https://godbolt.org/z/deqeME)）**

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-09T20:26:55.590

你去吧。您的代码中有几个错误，您可以在下面的行之间看到注释：

```
#include <iostream>

template <typename T>
void print(T t) {
   std::cout << t << std::endl;
}

// Base case, no args
void f() {}

// Split the parameter pack.
// We want the first argument, so we can print it.
// And the rest so we can forward it to the next call to f
template <typename T, typename...Ts>
void f(T &&first, Ts&&... rest) {
    // print it
    print(std::forward<T>(first));
    // Forward the rest.
    f(std::forward<Ts>(rest)...);
}

int main() {
    f(2, 1, 4, 3, 5);
} 
```

请注意，在这里使用右值引用是没有意义的。您没有将参数存储在任何地方，因此只需通过 const 引用传递它们就可以了。这样你也可以避免`std::forward`仅仅为了保持（无用的）完美转发。

因此，您可以重写`f`如下：

```
template <typename T, typename...Ts>
void f(const T &first, const Ts&... rest) {
    print(first);
    f(rest...);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-09T20:23:44.563

你无限递归。您每次都需要从包中删除一个元素：

```
void print() { }                            // 0-argument overload

template <typename Head, typename ...Tail>
void print(Head const & h, Tail const &... t)         // 1+-argument overload
{
    std::cout << h;
    print(t...);
} 
```

您可以使用打印包装您的函数调用：

```
template <typename ...Args>
void print_and_f(Args &&... args)
{
    print(args...);
    f(std::forward<Args>(args)...);
} 
```

用法：

```
print_and_f(1, 2, 3);  // calls "f(1, 2, 3)" eventually. 
```

# iphone - 如何组合视图层次结构以增强动画性能？

> ID：12342634
> 
> 赞同：0
> 
> 时间：2012-09-09T20:21:20.213
> 
> 标签：iphone, ios, performance, ipad, core-animation

我有几个带有很多子视图的视图，并且在动画期间性能很差。

一种可能有所帮助的方法是通过将层次结构呈现到上下文中来展平层次结构。为此，我希望能够展平的每个视图都必须以这样一种方式构造，即它们的所有子视图都添加到容器中，而不是直接添加到视图中。此外，我必须实现 -drawRect: 来执行层次结构的展平：

```
- (void)drawRect:(CGRect)rect {
    CGContextRef context = UIGraphicsGetCurrentContext();
    [self.containerLayer renderInContext:context];
} 
```

诀窍是这个容器层没有添加为`self.layer`. 对于核心动画，它看起来层次结构是平的。

但是在尝试这样的事情之前，有没有更好的方法呢？

我担心的是我必须创建一个额外的容器层来保存我想要按需展平的视图的视图层次结构。-drawRect: 仅在我调用 -setNeedsDisplay 时才被调用，所以这看起来很好。

有没有办法在不需要这样的容器的情况下展平视图的子视图？

问题是我的许多子视图都是通过调用 -addSubview: 添加的，所以`self.layer`如果我没有容器，那么除了它自己之外，没有任何一层我可以展平。

如果我这样做怎么办：

```
- (void)drawRect:(CGRect)rect {
    CGContextRef context = UIGraphicsGetCurrentContext();
    [self.layer renderInContext:context];
} 
```

这不会有多大意义吧？我的意思是子视图的整个层次结构将附加到该层，但是该层与视图相关联，因此将其渲染到上下文中是多余的，因为视图层次结构不会是平坦的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T21:51:40.540

首先，看`[CALayer shouldRasterize]`。它可能会处理您尝试做的大部分事情。

Second, having "many" subviews is often a bad idea. Views are heavyweight objects. Unless you need event (touch) handling on them all, you should really consider changing your views to layers. In some cases it can be worth it even if you have to do your own layer hit testing (i.e. let the view figure out which layer was touched).

Finally, calling `renderInContext:` in `drawRect:` is unlikely to give any benefit at all. Calling `renderInContext:` only really gives a benefit if you can call it either (a) on a background thread or (b) less often than `drawRect:`. Otherwise you're just doing all the same work.

# r - 通过一个问题计算 R 和 off 中两个值之间的百分比变化

> ID：12342635
> 
> 赞同：4
> 
> 时间：2012-09-09T20:21:28.437
> 
> 标签：r, function

我正在尝试以以下形式计算 R 中两点之间的百分比变化：

```
(X_(i+1) - X_(i))/(X_(i)) 
```

到目前为止，这是我想出的：

```
#x is a vector from the dataframe
#lag is distance between two points being compared
percent_change = function(x,lag = 1)
{
    n = length(x)
    pchange = c((x[(1+lag):n] - x[1:(n-lag)])/x[1:(n-lag)],NA)
    return(pchange)
} 
```

但是，为了在 RI 中完成此任务，必须绑定 NA 以避免：

```
Error in \`$<-.data.frame\`(\`*tmp*\`, "Change", value = c(0.00248221082243916,  : 
  replacement has 4616 rows, data has 4617 
```

有了这个添加，操作就会发生并与我计算出的应该在纸上对齐。

有没有办法让我不必附加 NA？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-09T20:30:23.807

`NA`如果要将`pc_change`结果存储回原始数据框中，则确实需要：

由于数组的最后一个元素没有`x+1`可比较的元素，因此它会产生一个比原始元素短的向量 1（或滞后）。

* * *

**警告：**请注意，您`NA`添加了一个 - 这对于这种情况是正确的，`lag=1`但更一般地说，您需要`lag`×`NA`元素。

尝试替换`NA`为`rep(NA,lag)`.

* * *

这是使用内置函数的更紧凑的函数版本`diff`：

```
pcchange=function(x,lag=1) c(diff(x,lag),rep(NA,lag))/x 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-09T20:26:35.090

对我来说，添加 NA 似乎是一个有效的解决方案。但是，有一些函数可以执行这种操作。看一下`lag`获取滞后时间序列的函数。一般来说，对于时间序列分析，请查看用于处理时间序列的`xts`和`zoo`包。专用于时间序列的[CRAN TaskView](http://cran.r-project.org/web/views/TimeSeries.html)也是一个有价值的信息来源。

# c# - 支持获取、设置和删除某些索引的 java arraylist 的 C# 等效项

> ID：12342637
> 
> 赞同：21
> 
> 时间：2012-09-09T20:21:42.083
> 
> 标签：c#, java, collections, arraylist, linked-list

我是一名 Java 程序员，我以前使用过 Java `ArrayList`，现在我想在 C# 中使用类似的东西。我需要的一些选项在这个 Java 代码中：

```
String[] strs = new String[]{"str1" , "str2" , "str3" , "str4"};
ArrayList arrayList = new ArrayList(35);
arrayList.add(strs[0]);
arrayList.add(strs[1]);
arrayList.remove(0);
arrayList.set(0, strs[2]);
String s = (String) arrayList.get(1); 
```

我使用了 C#`ArrayList`和`LinkedList`，但它们没有我需要的这些简单选项。C# 中是否有另一个选项支持使用索引访问对象、插入和删除某个索引？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-09-09T20:24:50.303

采用`List <T>`

```
 String[] strs = new String[]{"str1" , "str2" , "str3" , "str4"};
 List<string> stringList = new List<string>();
 stringList.add(strs[0]);
 stringList.add(strs[1]);
 stringList.RemoveAt(indexYouWantToDelete)     
 String s = stringList[0]; 
```

c# 中的 ArrayLists 来自前通用时代。从 C# 2.0 开始，我们就有了泛型集合，`List <T>`就是其中的一个例子。正如对此答案的评论所说，如果您使用 ArrayList，则必须将放入 arraylist 的元素装箱（到`Object`，因为这是 ArrayList 唯一作为输入的东西）。如果您想在那之后访问它们，则必须明确地将它们拆箱，就像您在问题中所做的那样。( --> `String s = (String) arrayList.get(1);`)

使用泛型集合（如`List <T>`），不再有装箱，因为编译器知道列表将包含什么数据类型。在这种情况下，字符串。您还可以使用`List<int>`,`List<char>`或`List<whatever>`, 并且可以在它们上使用相同的索引功能。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-09T20:23:35.830

使用`List<T>`..................................................

其中有`Add` `Remove`，`RemoveAt`索引器之类的`list[i]`。

# java - 执行 jar 文件返回 nullPointerException 导致找不到文本文件

> ID：12342638
> 
> 赞同：0
> 
> 时间：2012-09-09T20:21:59.837
> 
> 标签：java, jar, text-files

我正在尝试以 Java 语言访问我的项目目录中的文本文件。那是代码片段：

```
buffer = new BufferedReader(new `FileReader(getClass().getClassLoader().getResource("English_names.txt").getPath()));` 
```

当你在 Eclipse 上运行程序时，它工作正常，一旦你打印了这个路径

```
getClass().getClassLoader().getResource("English_names.txt").getPath() 
```

代码返回它完全指向文件。但是一旦我创建了可运行的 jar 文件，程序就不会从 jar 文件开始：缺少主类或其他东西（屏幕上的反馈）。在命令行上运行`java -jar jarfile.jar`命令后，它会说找不到文件（返回 NullPointerException） 有什么问题？谢谢

# wordpress - wordpress csv 导出在输出中包含 html

> ID：12342643
> 
> 赞同：2
> 
> 时间：2012-09-09T20:22:26.583
> 
> 标签：wordpress, csv

我正在尝试从 WordPress 中动态创建可下载的 csv 文件。要包含的数据正确，并成功创建文件以供下载。但是，创建的 csv 文件包含模板 HTML 输出。

如果没有模板中的 HTML，如何输出数据？

这是功能。使用 sql 查询正确填充数组，但结果与此相同。

```
function exportAsCSV (  ) {
  $csv = '';
  $header_array = array('Header 1', 'Header 2', 'Header 3');
  $data_array = array(
    array('Row 1 A', 'Row 1 B', 'Row 1 C'),
    array('Row 2 A', 'Row 2 B', 'Row 2 C'), 
  ); 

  $csv .= implode(', ', $header_array);
  $csv .= '\n';

  foreach($data_array as $row){
    $csv .= implode(', ', $row);
    $csv .= '\n';  
  } 

    $now = gmdate('D, d M Y H:i:s') . ' GMT';

    header('Content-Type: text/csv');
    header('Expires: ' . $now);

    header('Content-Disposition: attachment; filename="data.csv"');
    header('Pragma: no-cache'); 

    echo $csv; 
    exit();
} 
```

该函数是这样调用的：

```
if(isset($_GET['export_data'])){
  ob_end_clean();   
  exportAsCSV();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T02:36:34.370

我想到了。更多级别的输出缓冲。现在，我打电话`ob_get_level()`来确定要`ob_end_clean()`. 输出中不再有额外的 HTML。

# batch-file - 如何在 Windows 批处理程序中为变量赋值并检查它是否为空？

> ID：12342644
> 
> 赞同：0
> 
> 时间：2012-09-09T20:22:33.487
> 
> 标签：batch-file, operating-system, command, cmd

这是我写的代码：

```
 @echo off
:top
set chkScheduleTime=""
set chkScheduleName=""

set /p scheduleName=Enter the name of the schedule?
cls
set /p scheduleTime=Enter the time to schedule task?
cls

set chkScheduleTime=%scheduleTime =%
set  chkScheduleName=%scheduleName =%

IF /I "%chkScheduleName%"=="" ( 
    set errorMessage=*Name of schedule required 
)

IF /I "%chkScheduleTime%"=="" (
    set errorMessage=%errorMessage% *Time of schedule required 
)

IF NOT defined "%errorMessage%" (

    echo %errorMessage%
    pause
    cls
    goto top
)

echo Schedule Name %scheduleName% 
echo.
echo Time: %scheduleTime%

:end 
```

我要做的是从用户那里接受两个参数，即任务计划名称和任务时间。然后程序将检查变量是否为空并为空的变量显示错误，然后提示用户重新输入变量（如果没有输入一个或两个）。但是，即使用户输入了计划名称和时间，程序也会显示以下内容：

*需要时间表的名称 *需要时间表的时间

另请注意，代码的以下部分用于帮助检查用户输入的值是否仅为空格。因此它相当于常规编程中的 Trim() ：

```
set chkScheduleTime=%scheduleTime =%
set  chkScheduleName=%scheduleName =% 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T21:04:03.640

你需要使用

```
set chkScheduleTime=%scheduleTime: =% 
```

从 中去除空格`scheduleTime`。

此外，您永远不会重置`errorMessage`，因此一旦出现错误，它就不会消失。

另外我认为您可能想使用`if defined errorMessage`.

# return-value - 具有良好 f & p 值和较小 R 平方值的 ANOVA 检验

> ID：12342651
> 
> 赞同：1
> 
> 时间：2012-09-09T20:23:14.143
> 
> 标签：return-value, anova

我使用单向方差分析测试来测量拟合度，或者换句话说，实验数据与我预测的其他数据之间的差异。我在 Minitab 软件上进行了测试，得到了 F 和 P 值的可接受值，而 R2 值很小 0.30 %，如下所示：

单因素方差分析：ANN Sr, Exp.Sr

来源：DF=1，SS=0.824，MS=0.824，F=1.89，P=0.170

S = 0.6605 , R-Sq = 0.30% , R-Sq(adj) = 0.14%

根据 f & p 值（分别为 1.89 和 0.17），我会说我的预测数据是准确的，并且实验数据和预测数据之间没有区别。

我的问题是：

这个 R-sq=0.30% 的小值会影响我的决定吗？？？我可以拒绝我预测的数据并说与实验数据存在显着差异，即使 f&p 值是可以接受的？？？。

谢谢

# python - statsmodels 使用 ARMA 模型进行预测

> ID：12342653
> 
> 赞同：11
> 
> 时间：2012-09-09T20:23:24.447
> 
> 标签：python, time-series, forecasting, statsmodels

我想预测时间序列数据。我在以前的帖子中读到，模块 statsmodels 具有使用 ARMA 方法进行预测所需的工具，这正是我一直在寻找的工具。尽管如此，我在预测数据时遇到了麻烦。有人可以解释模型中使用的各种参数和/或提供示例吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-11T00:27:36.010

这个问题非常笼统，对于背景信息 Rob Hyndman 的链接或任何用于时间序列分析的教科书都会很有用。

Skipper Seabold 在 scipy 会议上展示了一个教程，其中包括一个 ARMA 示例

[https://github.com/jseabold/tutorial/blob/master/tsa_arma.py](https://github.com/jseabold/tutorial/blob/master/tsa_arma.py)

ARMA 的文档中描述了各种方法和选项

[http://statsmodels.sourceforge.net/devel/generated/statsmodels.tsa.arima_model.ARMA.html](http://statsmodels.sourceforge.net/devel/generated/statsmodels.tsa.arima_model.ARMA.html)

据我所知，目前没有关于 statsmodels 中 ARMA 模型的书籍或文章风格的描述，但如果你问一个更具体的问题，比如你想做什么以及你的麻烦是什么，也许你会得到更具体的答案。

# php - 我在 Joomla 1.5 的 controller.php 代码中做错了什么

> ID：12342654
> 
> 赞同：-1
> 
> 时间：2012-09-09T20:23:24.920
> 
> 标签：php

我尝试通过在 controller.php 中使用会话 ID 来验证验证码

下面是我尝试保存验证码会话的代码（通过修改controller.php）-但它不起作用-我在此代码中做错了什么请建议

它在提交时显示服务器错误，我提到了原始代码（验证码之前）和修改后的代码（验证码之后）

**原始代码（Controller.php 中的验证码会话之前）**

```
 function register_save()
{
    global $mainframe;

    // Check for request forgeries
    JRequest::checkToken() or jexit( 'Invalid Token' );

    // Get required system objects
    $user       = clone(JFactory::getUser());
    $pathway    =& $mainframe->getPathway();
    $config     =& JFactory::getConfig();
    $authorize  =& JFactory::getACL();
    $document   =& JFactory::getDocument();

    // If user registration is not allowed, show 403 not authorized.
    $usersConfig = &JComponentHelper::getParams( 'com_users' );
    if ($usersConfig->get('allowUserRegistration') == '0') {
        JError::raiseError( 403, JText::_( 'Access Forbidden' ));
        return;
    }

    // Initialize new usertype setting
    $newUsertype = $usersConfig->get( 'new_usertype' );
    if (!$newUsertype) {
        $newUsertype = 'Registered';
    }

    // Bind the post array to the user object
    if (!$user->bind( JRequest::get('post'), 'usertype' )) {
        JError::raiseError( 500, $user->getError());
    }

    // Set some initial user values
    $user->set('id', 0);
    $user->set('usertype', $newUsertype);
    $user->set('gid', $authorize->get_group_id( '', $newUsertype, 'ARO' ));

    $date =& JFactory::getDate();
    $user->set('registerDate', $date->toMySQL());

    // If user activation is turned on, we need to set the activation information
    $useractivation = $usersConfig->get( 'useractivation' );
    if ($useractivation == '1')
    {
        jimport('joomla.user.helper');
        $user->set('activation', JUtility::getHash( JUserHelper::genRandomPassword()) );
        $user->set('block', '1');
    }

    // If there was an error with registration, set the message and display form
    if ( !$user->save() )
    {
        JError::raiseWarning('', JText::_( $user->getError()));
        $this->register();
        return false;
    }

    // Send registration confirmation mail
    $password = JRequest::getString('password', '', 'post', JREQUEST_ALLOWRAW);
    $password = preg_replace('/[\x00-\x1F\x7F]/', '', $password); //Disallow control chars in the email
    UserController::_sendMail($user, $password);

    // Everything went fine, set relevant message depending upon user activation state and display message
    if ( $useractivation == 1 ) {
        $message  = JText::_( 'REG_COMPLETE_ACTIVATE' );
    } else {
        $message = JText::_( 'REG_COMPLETE' );
    }

    $this->setRedirect('https://www.2checkout.com/checkout/spurchase?sid=1689498&product_id=2&quantity=1', $message);
} 
```

**最终修订代码（根据现在在 controller.php 中建议的修改）**

```
 function register_save()
  {
    global $mainframe;

    // Check for request forgeries
    JRequest::checkToken() or jexit( 'Invalid Token' );

    session_start();
        $post = JRequest::get( 'post' );
        if(($_SESSION['security_code'] == $post['security_code']) && (!empty($_SESSION['security_code'])) ) 
        {
        $newUsertype = $usersConfig->get( 'new_usertype' );
        if (!$newUsertype) 
            {
            $newUsertype = 'Registered'; 
            }
        unset($_SESSION['security_code']);
        } 

        if($_SESSION['security_code'] != $post['security_code'] || $post['security_code']=="")
        {
            JError::raiseWarning('', JText::_( $user->getError()));
            $this->register();
            return false;
        }

    // Get required system objects
    $user       = clone(JFactory::getUser());
    $pathway    =& $mainframe->getPathway();
    $config     =& JFactory::getConfig();
    $authorize  =& JFactory::getACL();
    $document   =& JFactory::getDocument();

    // If user registration is not allowed, show 403 not authorized.
    $usersConfig = &JComponentHelper::getParams( 'com_users' );
    if ($usersConfig->get('allowUserRegistration') == '0') {
        JError::raiseError( 403, JText::_( 'Access Forbidden' ));
        return;
    }

    // Initialize new usertype setting
    $newUsertype = $usersConfig->get( 'new_usertype' );
    if (!$newUsertype) {
        $newUsertype = 'Registered';
    }

    // Set some initial user values
    $user->set('id', 0);
    $user->set('usertype', $newUsertype);
    $user->set('gid', $authorize->get_group_id( '', $newUsertype, 'ARO' ));

    $date =& JFactory::getDate();
    $user->set('registerDate', $date->toMySQL());

    // If user activation is turned on, we need to set the activation information
    $useractivation = $usersConfig->get( 'useractivation' );
    if ($useractivation == '1')
    {
        jimport('joomla.user.helper');
        $user->set('activation', JUtility::getHash( JUserHelper::genRandomPassword()) );
        $user->set('block', '1');
    }

    // If there was an error with registration, set the message and display form
    if ( !$user->save() )
    {
        JError::raiseWarning('', JText::_( $user->getError()));
        $this->register();
        return false;
    }

    // Send registration confirmation mail
    $password = JRequest::getString('password', '', 'post', JREQUEST_ALLOWRAW);
    $password = preg_replace('/[\x00-\x1F\x7F]/', '', $password); //Disallow control chars in the email
    UserController::_sendMail($user, $password);

    // Everything went fine, set relevant message depending upon user activation state and display message
    if ( $useractivation == 1 ) {
        $message  = JText::_( 'REG_COMPLETE_ACTIVATE' );
    } else {
        $message = JText::_( 'REG_COMPLETE' );
    }

    $this->setRedirect('https://www.2checkout.com/checkout/spurchase?sid=1689498&product_id=2&quantity=1', $message);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T20:27:02.283

以下行使用`$post`代替`$_POST`：

```
if($_SESSION['security_code'] != $post['security_code'] || $post['security_code']=="") 
```

如果满足条件，随后的代码会引发错误（假设它是您收到的错误）。尝试更新使用`$_POST`，它应该修复它：

```
if($_SESSION['security_code'] != $_POST['security_code'] || $_POST['security_code']=="") 
```

代码块中有几个地方会引发错误 - 这只是可能触发的众多地方之一。如果您发布特定错误，则可能更容易诊断（如果这实际上不能解决问题）。

# php - 将用户制作的 SVG (raphael.js) 发送到服务器 (php)，以便可以通过电子邮件发送

> ID：12342656
> 
> 赞同：3
> 
> 时间：2012-09-09T20:23:29.663
> 
> 标签：php, javascript, image, raphael

我有一个页面，用户可以在其中创建自己的 SVG 图像。现在我想在服务器 (php) 上访问这些图像，以便将它们发送到电子邮件地址。

通过这些[说明](https://stackoverflow.com/questions/3975499/convert-svg-to-image-jpeg-png-etc-in-the-browser/3976034#3976034)，我可以将 SVG 转换为画布，然后将画布转换为 jpeg/png。我不再担心 SVG 树，因为它不再需要编辑，因此将其转换为普通图像（我假设这会更容易处理，最终我想将该图像作为附件发送到电子邮件）。

这样做最有效的方法是什么？是否可以将转换后的 jpeg/png 发布到服务器？谢谢大家，这里有点迷路了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-10T11:28:42.283

经过大量阅读后，我设法找到了一个相当简单的解决方案，以防有人在这里遇到类似的问题：

[使用canvg](http://code.google.com/p/canvg/)将 SVG 转换为普通画布后，您可以使用 canvas.toDataURL() 方法，然后您需要做的就是发布生成的 URL 并在服务器上对其进行解码。我为此使用了一个隐藏的输入字段。注意不要使用 JQuery 来获取画布，因为 JQuery 不返回实际的画布，而是返回一个 JQuery 对象。

```
var canvas = document.getElementById('canvas');
var dataUrl = canvas.toDataURL();
$('#hiddenInput').val(dataUrl); 
```

在服务器端：

```
$encodeData = $_POST['dataUrl'];
$encodeData = substr($encodeData, strpos($encodeData, ',') + 1); //strip the URL of its headers
$decodeData = base64_decode($encodeData);
$handle = fopen('test.png', 'x+');
fwrite($handle, $decodeData);
fclose($handle); 
```

SVG 现在以 png 格式在服务器上。

# android - 是否可以将消息从我的应用程序直接发布到 GooglePlus？

> ID：12342664
> 
> 赞同：0
> 
> 时间：2012-09-09T20:24:02.753
> 
> 标签：android, google-api, google-plus

我一直在玩 API，找到了一个很好的例子来说明如何恢复 Google Tasks，但我还没有找到任何例子来展示如何发布 Google+ 墙。

有人知道吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-09T20:25:55.450

你不可以做这个。目前，Google+ API 是只读的。从[文档中](https://developers.google.com/+/api/)（粗体表示强调）：

> 注意：Google+ API目前提供对公共数据**的只读访问权限。**所有 API 调用都需要 OAuth 2.0 令牌或 API 密钥。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T16:56:14.353

您可以使用[Google+ 历史 API](https://developers.google.com/+/history)将时刻发布到用户的私人 Google+ 历史中。用户可以批准您的应用/网站自动发布到他们的信息流。

**注意：** Google+ 历史记录功能仍处于[开发者预览版](https://developers.google.com/+/history/preview/)中，这意味着您可以开始开发您的应用、测试您的应用，但**只有**注册了开发者预览版的用户才能使用该功能。当 Google+ 历史记录功能全面退出时，您将能够向公众发布您的应用程序。

# google-visualization - 更改谷歌图表 API 标题和轴位置以及字体样式设置？

> ID：12342665
> 
> 赞同：5
> 
> 时间：2012-09-09T20:24:12.457
> 
> 标签：google-visualization

我正在使用google chart api创建散点图，但似乎标题的位置只能更改为'in'或'out'，并与左侧对齐。如何将其更改为在图表之外居中？另外，如何取消轴标签的斜体样式？谢谢你的帮助！！

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-16T14:29:50.223

要取消轴标题上的斜体样式，请执行以下操作：

```
vAxis: {title: "Hours", titleTextStyle: {italic: false}},
hAxis: {title: "Month", titleTextStyle: {italic: false}}, 
```

这是一个未记录的功能，但它在大多数情况下都有效。

# validation - 如何验证文本字段中的整数和字符？

> ID：12342668
> 
> 赞同：0
> 
> 时间：2012-09-09T20:24:45.813
> 
> 标签：validation, angularjs

我需要验证：

1.  用于电话和价格的文本字段。如何删除文本字段右侧的两个按钮？这些是更高或更低的价值。我不需要它们。此外，如果电话以 0 开头，那么它会变得混乱和红色。

2.  用于名称的文本字段。只允许 AZ,az,space。

编辑* 我不知道为什么我的代码没有出现在 stackoverflow 上。 [http://jsfiddle.net/instajsf/LbYVK/](http://jsfiddle.net/instajsf/LbYVK/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T20:32:26.787

我猜您在输入字段上看到的向上/向下按钮是由您的用户代理（Web 浏览器）放入的。在 Chrome 下，我什么也看不到。

至于您问题的第二部分，有很多很多关于如何验证用户输入的帖子。

搜索“javascript alphanumeric”将其作为我的第一个结果： [RegEx for Javascript to allow only alphanumeric](https://stackoverflow.com/questions/388996/regex-for-javascript-to-allow-only-alphanumeric)

如果您要将此数据发送到服务器，请不要忘记您还**必须**验证服务器端。 来自客户的*任何东西都不可信。*

# cocos2d-iphone - Cocos2D for iPhone：Y 接触点不连贯

> ID：12342670
> 
> 赞同：0
> 
> 时间：2012-09-09T20:25:16.537
> 
> 标签：cocos2d-iphone, touch, appdelegate

我正在开发一个垂直滚动游戏，但我无法获得一些东西。我想我设法让精灵正确移动。例如，我让一些敌人生成在屏幕上角的中心（x:160 和 y:480），并通过在每次更新时将 y 减 1 来让它们下来。

奇怪的是，当我在作为子项添加到 GameScene 的 InputLayer 中检测到触摸时，我得到了关于触摸 x 位置的信息，但 y 是颠倒的。换句话说，如果我触摸生成点 (x:160 和 y:480)，我会得到值 x:160 和 y:0，如果我触摸屏幕底部 (y:0)，我会得到 y=480 .

**这是为什么？精灵不应该遵循相同的 y 参考吗？** 我想这可能与 AppDelegate 中应用程序的初始化有关，因此我将代码粘贴在这里：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    // Create the main window
    window_ = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];

    // Create an CCGLView with a RGB565 color buffer, and a depth buffer of 0-bits
    CCGLView *glView = [CCGLView viewWithFrame:[window_ bounds]
                                   pixelFormat:kEAGLColorFormatRGB565   //kEAGLColorFormatRGBA8
                                   depthFormat:0    //GL_DEPTH_COMPONENT24_OES
                            preserveBackbuffer:NO
                                    sharegroup:nil
                                 multiSampling:NO
                               numberOfSamples:0];

    [glView setMultipleTouchEnabled:YES];
    director_ = (CCDirectorIOS*) [CCDirector sharedDirector];

    director_.wantsFullScreenLayout = YES;

    // Display FSP and SPF
    [director_ setDisplayStats:YES];

    // set FPS at 60
    [director_ setAnimationInterval:1.0/60];

    // attach the openglView to the director
    [director_ setView:glView];

    // for rotation and other messages
    [director_ setDelegate:self];

    // 2D projection
    [director_ setProjection:kCCDirectorProjection2D];
    //  [director setProjection:kCCDirectorProjection3D];

    // Enables High Res mode (Retina Display) on iPhone 4 and maintains low res on all other devices
    if( ! [director_ enableRetinaDisplay:YES] )
        CCLOG(@"Retina Display Not supported");

    // Create a Navigation Controller with the Director
    navController_ = [[UINavigationController alloc] initWithRootViewController:director_];
    navController_.navigationBarHidden = YES;

    // set the Navigation Controller as the root view controller
    //  [window_ setRootViewController:rootViewController_];
    [window_ addSubview:navController_.view];

    // make main window visible
    [window_ makeKeyAndVisible];

    // Default texture format for PNG/BMP/TIFF/JPEG/GIF images
    // It can be RGBA8888, RGBA4444, RGB5_A1, RGB565
    // You can change anytime.
    [CCTexture2D setDefaultAlphaPixelFormat:kCCTexture2DPixelFormat_RGBA8888];

    // If the 1st suffix is not found and if fallback is enabled then fallback suffixes are going to searched. If none is found, it will try with the name without suffix.
    // On iPad HD  : "-ipadhd", "-ipad",  "-hd"
    // On iPad     : "-ipad", "-hd"
    // On iPhone HD: "-hd"
    CCFileUtils *sharedFileUtils = [CCFileUtils sharedFileUtils];
    [sharedFileUtils setEnableFallbackSuffixes:NO];             // Default: NO. No fallback suffixes are going to be used
    [sharedFileUtils setiPhoneRetinaDisplaySuffix:@"-hd"];      // Default on iPhone RetinaDisplay is "-hd"
    [sharedFileUtils setiPadSuffix:@"-ipad"];                   // Default on iPad is "ipad"
    [sharedFileUtils setiPadRetinaDisplaySuffix:@"-ipadhd"];    // Default on iPad RetinaDisplay is "-ipadhd"

    // Assume that PVR images have premultiplied alpha
    [CCTexture2D PVRImagesHavePremultipliedAlpha:YES];

    //Initializes static classes to create shared instance
    PlayerData *playerData = [PlayerData playerData];
    MusicLayer *musicLayer = [MusicLayer music];

    // and add the scene to the stack. The director will run it when it automatically when the view is displayed.
    [director_ pushScene: [MainMenuScene scene]]; 

    return YES;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T22:30:52.923

您需要反转触摸，因为它们是 UIKit 对象 (UITouch*)。有一种方法可以解决这个问题

```
UITouch *touch = [touches anyObject];
CGPoint location = [touch locationInView: [touch view]];
location = [[CCDirector sharedDirector] convertToGL:location]; 
```

# python - 截断不正确的日期时间值

> ID：12342683
> 
> 赞同：0
> 
> 时间：2012-09-09T20:26:41.233
> 
> 标签：python, mysql, django

我有以下在 SQLyog 中运行的查询

```
SELECT * FROM mytable WHERE created > UNIX_TIMESTAMP(STR_TO_DATE('2012-09-09 00:00:00-05:00','%Y-%m-%d %k:%i:%s') - INTERVAL 1 DAY); 
```

如果我在 Python 或 Django 中运行相同的查询，我会收到以下消息：

```
Warning: Truncated incorrect datetime value: '2012-09-09 00:00:00-05:00' 
```

我已经从 python 打印出查询以确保它与上面的相同。它是相同的（包括结尾的分号）。我怀疑它的时区偏移有问题，但我不知道为什么它会在 SQLyog 中工作。

打印的查询是：

```
--------------------------------------------------
SELECT * FROM sb_bans WHERE created > UNIX_TIMESTAMP(STR_TO_DATE('2012-09-09 00:00:00-05:00','%Y-%m-%d %H:%i:%s') - INTERVAL 1 DAY);
-------------------------------------------------- 
```

用于运行此查询的 Django 代码是：

```
query = """SELECT * FROM sb_bans WHERE created > UNIX_TIMESTAMP(STR_TO_DATE('2012-09-09 00:00:00-05:00','%Y-%m-%d %H:%i:%s') - INTERVAL 1 DAY);"""
myCursor = connections[system_db].cursor()
results = myCursor.execute(query)    # Dies on this statement
resultcount = results.fetchall() 
```

为什么这个查询在我直接运行时有效，但在我的代码执行时却失败了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T20:30:32.433

*您的两个查询之间*存在差异：

第一的：

```
STR_TO_DATE('2012-09-09 00:00:00-05:00','%Y-%m-%d %k:%i:%s') 
```

姜戈代码：

```
STR_TO_DATE('2012-09-09 00:00:00-05:00','%Y-%m-%d %H:%i:%s') 
```

一个有一个`%k`，另一个有一个`%H`。也许这就是你问题的根源？

# ip-address - 服务提供商如何获得足够的 IP 地址

> ID：12342684
> 
> 赞同：1
> 
> 时间：2012-09-09T20:26:40.923
> 
> 标签：ip-address

我脑子里有些东西让我发疯。

假设互联网服务提供商具有以下 IP 地址范围：

`41.96.0.0 to 41.111.255.255`给他`1048576`客户的IP地址。

现在我想理解的疯狂的事情是，我知道每台机器都有一个唯一的 IP 地址，并且不可能找到两台具有一个 IP 地址的机器（如果我错了，请纠正我）；但是这家互联网服务提供商有大约 3,000,000 个客户，每个客户都有一个唯一的 IP！他们是如何做到的呢 ？他们如何为所有这些客户提供唯一的 IP 地址？

num clients = 地址数是合乎逻辑的

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T21:02:44.540

直到最近，服务提供商通过记录他们拥有多少客户以及每个客户需要多少 IP 地址（通常每个住宅只有 1 个，但可能更多），来简单地向全球 5 个区域 IP 地址注册机构之一证明他们的 IP 地址需求是合理的。登记处将根据需要分配给他们。在 IPv4 中，这不再是真的，因为 IPv4 地址的供应已经耗尽。ISP 和 5 个区域 IP 地址注册机构目前正在摸索 IPv4 桶的底部。

当没有更多的 IPv4 地址可供分配时，ISP 将被迫使用 NAT（网络地址转换）在每个 IP 地址上放置多个客户。多年来，移动 ISP 基本上已经将他们的客户置于 NAT 之后。最终用户已经这样做了更长时间，以便能够在仅带有一个 IPv4 地址的消费级 Internet 连接后面连接多个设备。

在 IPv6 中，可用 IP 地址的数量预计不会在协议的整个生命周期内成为问题。

# ruby-on-rails - 使用复选框将搜索限制为所属对象

> ID：12342687
> 
> 赞同：0
> 
> 时间：2012-09-09T20:26:57.170
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord

我正在开发一个基本上充当带有标签的博客的 rails 3.2 应用程序。

标签与 has_many :through 关联中的帖子相关。（帖子通过 taggigns 有很多标签）不知道为什么该应用程序没有 habtm 关联，因为它的工作方式相同，但这就是我所拥有的。

该应用程序现在可以显示属于这样一个标签的帖子列表：

```
class TagsController < ApplicationController

  def show
    @tag = Tag.find(params[:id])    
    @posts = @tag.posts.paginate(page: params[:page], :per_page => 10) 
  end
  ...
end 
```

这样，页面 example.com/tags/1 将显示标签匹配 ID 1 的所有帖子。

我要做的是修改这个应用程序，使其具有标签复选框，并将搜索限制为例如同时具有标签 1 和 4 的帖子。

有人可以给我一个关于从哪里开始或寻找一些资源的意见吗？我想我应该使用一个连接，但我不确定情况是否如此。

谢谢你。

========

编辑：谢谢你的回答。无论如何，正如 ok32 所建议的，user1083138 的解决方案是创建重复项。同时 ok32 的结果是空数组（可能是由于我对标记系统的实施不佳）。

我提出了这个很好的解决方案：

```
 def self.tag_query(list)
    Post.joins(:tags).where(:tags => { :name => list } ).having("count(tags.name) = ?", list.count ).group('posts.id')
  end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T21:16:03.223

是的，JOIN 是你的朋友：

```
Post.joins(:tags).where(:tags => { :id => [tag_ids] } ) 
```

检查此[导轨指南](http://guides.rubyonrails.org/active_record_querying.html#using-array-hash-of-named-associations)作为参考。

您还必须创建\修改视图和控制器以显示复选框并填充“tag_ids”变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T21:58:11.910

JOIN 是你的朋友，但是.. 为了避免重复的结果，我建议使用类似的东西：

在控制器中：

```
@tags = Tag.find(params[:tag_ids])
@posts = Post.tagged_with(@tags) 
```

在`Post`模型中：

```
def self.tagged_with(tags)
  post_ids = select('posts.id').joins(:tags).where('tags.id in (?)', tags)
  where(id: post_ids)
end 
```

**更新：**

我稍微修改了模型方法：

```
def self.tagged_with(tags)
  post_ids = joins(:taggings).where('taggings.tag_id in (?)', tags)
  where(id: post_ids)
end 
```

发生了什么变化：

1.  我删除了不必要`select('posts.id')`的 . 没有它它工作得很好。

2.  Now it generates more efficient query (it joins with one table instead of two).

# java - Java JFreeChart 在 JPanel 中未完全显示图表

> ID：12342688
> 
> 赞同：1
> 
> 时间：2012-09-09T20:27:01.313
> 
> 标签：java, swing, jpanel, jfreechart, pie-chart

我一直在为即将到来的项目尝试 JFreeChart，并查看它们似乎非常简单的教程。我创建了一个简单的小程序，它要求提供一些数据并显示一个 3D 饼图。它可以工作，但是在面板中显示图表时，它仅部分显示图表。如果您在面板内部单击，它将增长到显示面板的大小。我尝试在不同的地方设置各种 setPreferredSize() ，但似乎都不起作用。我错过了什么？

```
import java.awt.Dimension;
import java.awt.EventQueue;
import javax.swing.JFrame;
import java.awt.Rectangle;
import javax.swing.JPanel;
import javax.swing.border.EtchedBorder;
import javax.swing.JComponent;
import javax.swing.JOptionPane;
import javax.swing.JLabel;
import javax.swing.JSpinner;
import javax.swing.JTextField;
import javax.swing.JButton;
import org.jfree.chart.ChartFactory;
import org.jfree.chart.ChartPanel;
import org.jfree.chart.JFreeChart;
import org.jfree.chart.plot.PiePlot3D;
import org.jfree.data.general.DefaultPieDataset;
import org.jfree.util.Rotation;
import java.awt.event.ActionListener;
import java.awt.event.ActionEvent;
import net.miginfocom.swing.MigLayout;

@SuppressWarnings("serial")
public class mWindow extends JFrame{

private JPanel pnlDisplay;
private JPanel panel;
private JLabel label_1;
private JLabel label_2;
private JSpinner spinner;
private JButton button;

/**
 *  Window Constructor
 */
private mWindow(){
    setBounds(new Rectangle(0, 0, 600, 500));
    getContentPane().setLayout(new MigLayout("", "[200px:200.00][564px,grow]", "[120px:120.00][308px,grow]"));

    panel = new JPanel();
    panel.setLayout(null);
    panel.setBorder(new EtchedBorder(EtchedBorder.RAISED, null, null));
    getContentPane().add(panel, "cell 0 0,grow");

    label_1 = new JLabel("Control Panel");
    label_1.setBounds(10, 10, 100, 20);
    panel.add(label_1);

    label_2 = new JLabel("Number of Values");
    label_2.setBounds(10, 40, 100, 20);
    panel.add(label_2);

    spinner = new JSpinner();
    spinner.setBounds(120, 40, 40, 20);
    panel.add(spinner);

    button = new JButton("Create Pie Chart");
    button.addActionListener(new ActionListener() {
        public void actionPerformed(ActionEvent e) {
            createPieChart();
        }
    });
    button.setBounds(10, 70, 150, 40);
    panel.add(button);

    pnlDisplay = new JPanel();
    pnlDisplay.setBorder(new EtchedBorder(EtchedBorder.RAISED, null, null));
    getContentPane().add(pnlDisplay, "cell 0 1 2 1,grow");
    pnlDisplay.setLayout(null);

}

private void createPieChart(){

    //  create the data set
    //  create the chart
    //  put chart in a panel
    //  set default configuration for panel
    //  add panel to our displayPanel

    int numVal = (int) spinner.getValue();
    JTextField label = new JTextField();
    JTextField value = new JTextField();        
    DefaultPieDataset dds = new DefaultPieDataset();

    final JComponent[] fieldInput = new JComponent[]{
            new JLabel("Label Name"), label,
            new JLabel("Value"), value
    };

    for(int index = 0; index < numVal; index++){
        // Display a dialog asking for the Information Needed to add a job
        int n = JOptionPane.showConfirmDialog(
                this, 
                fieldInput, 
                "Create Data Set " + (index+1), 
                JOptionPane.PLAIN_MESSAGE
        ); 

        if(n < 0){
            JOptionPane.showMessageDialog(this, "No Data Set has been created", 
                    "Data Set Add Canceled ", JOptionPane.ERROR_MESSAGE);
            return;
        } 

        String Label = label.getText();
        int Value = Integer.parseInt(value.getText());
        dds.setValue(Label, Value);
        label.setText("");
        value.setText("");
    }

    // Data set ready ~ create the chart
    JFreeChart chart = ChartFactory.createPieChart3D("Our Pie Chart",          // chart title
            dds,                // data set
            true,               // include legend
            true,               // enable tool tips
            false);             // use urls

    PiePlot3D plot = (PiePlot3D) chart.getPlot();
    plot.setStartAngle(290);                        // angel of first data set
    plot.setDirection(Rotation.CLOCKWISE);          // rotation of chart
    plot.setForegroundAlpha(0.2f);                  // set alpha transparency

    // create a panel to track chart changes and set it's default size
    final ChartPanel chartPanel = new ChartPanel(chart);
    chartPanel.setPreferredSize(pnlDisplay.getSize());

    chartPanel.setBounds(10,10,pnlDisplay.getWidth()-20,pnlDisplay.getHeight()-20);

    // add our chart to our display panel
    pnlDisplay.add(chartPanel);
    pnlDisplay.validate();

}

/**
 *  Initializes and Show the GUI
 */
private static void InitalizeAndShowGUI(){
    mWindow mainWindow = new mWindow();
    mainWindow.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    mainWindow.setTitle("Chart Demo v0.1");
    Dimension windowSize = new Dimension(600,700);
    mainWindow.setMinimumSize(windowSize);
    mainWindow.setLocation(100, 100);
    mainWindow.pack();
    mainWindow.setVisible(true);
}

public static void main(String[] args) {
    EventQueue.invokeLater(new Runnable() {
        public void run() {
            try {
                InitalizeAndShowGUI();
            } catch (Exception e) {
                e.printStackTrace();
            }
        }
    });
}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-09T22:18:39.823

添加新的图表组件后，您需要重新绘制它以使其完全显示：

```
chartPanel.repaint(); 
```

# ruby-on-rails - 升级到 Rails 3.2.8 会导致 ActiveRecord 的堆栈级别太深错误

> ID：12342691
> 
> 赞同：1
> 
> 时间：2012-09-09T20:27:30.273
> 
> 标签：ruby-on-rails, ruby, activerecord, ruby-on-rails-3.2

我对 Ruby 还很陌生，但是我遇到了一个问题，我无法深入了解。

我的简单应用程序运行良好，然后在将 Rails 版本升级到 3.2.8 后，我在尝试查询数据库中的记录时遇到了问题。这在使用 Rails 3.0.7 时工作正常，但在升级到 rails 3.2.8 后它开始失败，并出现 Stack Level too deep 错误。

我的模型如下所示：

```
class Resource < ActiveRecord::Base 
  validates :title, :presence => true, 
                    :length => { :minimum => 5} 
  validates :link,  :presence => true 
  validates :date_submitted,  :presence => true 

  has_many :comments 

  validates_format_of :link, :with => URI::regexp(%w(http https)) 
  validates :link, :uniqueness => {:scope => :link, :message => "This item has already been submitted"} 
end 
```

当我从控制台调用 Resource.all 时，失败并出现以下错误：

> SystemStackError: stack level too deep from /home/tom/.rvm/rubies/ruby-1.9.2-p180/lib/ruby/1.9.1/irb/workspace.rb:80 也许是 IRB 错误！

它似乎也发生在其他型号上，而且在升级之前它运行良好的事实似乎表明它是另一回事。有没有人知道我应该在哪里寻找 - 错误信息非常有限。

更新：在进行更多挖掘之后，当更改为 Rails 3.2.1 时，这似乎开始中断。Rails 3.2.0 及更低版本 - 我的应用程序运行良好 - 3.2.1 或更高版本导致堆栈级别太深问题。

更新2：发现问题。我正在使用导致问题的[SearchLogic gem。](https://github.com/binarylogic/searchlogic)从 GemFile 中删除它解决了我的问题。

# iphone - iPhone / ios 开发 - 检查密码是否足够安全的最佳方法？

> ID：12342692
> 
> 赞同：0
> 
> 时间：2012-09-09T20:27:32.877
> 
> 标签：iphone, ios, passwords

在 iOS 开发中检查密码强度的最佳方法是什么？我遇到了这篇文章： [检查密码强度的最佳方法是什么？](https://stackoverflow.com/questions/75057/what-is-the-best-way-to-check-the-strength-of-a-password) 但这不是 iOS 特定的。我的问题是 - Apple 或第三方库是否默认提供任何库，我可以用来检查用户是否输入了安全密码？

如果不是，那么正如上面的帖子所说，使用正则表达式是最好的方法吗？

Apple 是否有任何要求我们的应用程序需要实施以确保用户拥有安全密码？

我打算使用钥匙串来存储密码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T21:36:35.463

不，Apple 没有提供用于确定密码强度的标准或库 - 他们没有关于在这种情况下构成“安全”的共同政策。

您链接的帖子是否描述了最佳方式通常是一个见仁见智的问题 - 亚历克斯布朗在评论中描述了为什么尝试验证密码可能会适得其反的一些原因。不过，这个讨论可能有点超出 StackOverflow 的范围。

# c# - 在 Silverlight 中单击并拖动似乎很慢

> ID：12342695
> 
> 赞同：0
> 
> 时间：2012-09-09T20:28:00.720
> 
> 标签：c#, silverlight, graphics, 3d, silverlight-5.0

我已经构建了一个完整的 c# 软件渲染器，它现在是 SilverLight 安全的（再也不会出现），它似乎在尝试通过简单的鼠标单击和拖动来旋转场景时出现故障。这有点复杂，但它使用 WriteableBitmap 类。它非常快，但并不顺利。

看看[http://www.alansimes.com/warp3dsilverlighttestpage.html](http://www.alansimes.com/warp3dsilverlighttestpage.html)

# c# - 获取C#中2个列表中最大年龄的名称

> ID：12342697
> 
> 赞同：3
> 
> 时间：2012-09-09T20:28:27.757
> 
> 标签：c#, list

我对 C# 比较陌生。

我正在尝试从姓名和年龄列表中查找最大年龄的名称。与下面的示例不同，我不知道提前给出了哪些名字或哪些年龄。

姓名和年龄是从下面的两个列表中创建的。

```
List<string> name = new List<string>();
List<double> age = new List<double>(); 
```

我知道如何使用 Max() 方法找到最大年龄，但如何获得相应的名称？通过下面的示例，是否可以从列表中创建新对象？

```
/// This class implements IComparable to be able to  
/// compare one Pet to another Pet. 
/// </summary> 
class Pet : IComparable<Pet>
{
    public string Name { get; set; }
    public int Age { get; set; }

    /// <summary> 
    /// Compares this Pet to another Pet by  
    /// summing each Pet's age and name length. 
    /// </summary> 
    /// <param name="other">The Pet to compare this Pet to.</param>
    /// <returns>-1 if this Pet is 'less' than the other Pet,  
    /// 0 if they are equal, 
    /// or 1 if this Pet is 'greater' than the other Pet.</returns> 
    int IComparable<Pet>.CompareTo(Pet other)
    {
        int sumOther = other.Age + other.Name.Length;
        int sumThis = this.Age + this.Name.Length;

        if (sumOther > sumThis)
            return -1;
        else if (sumOther == sumThis)
            return 0;
        else 
            return 1;
    }
}

public static void MaxEx3()
{
    Pet[] pets = { new Pet { Name="Barley", Age=8 },
                   new Pet { Name="Boots", Age=4 },
                   new Pet { Name="Whiskers", Age=1 } };

    Pet max = pets.Max();

    Console.WriteLine(
        "The 'maximum' animal is {0}.",
        max.Name);
}

/*
 This code produces the following output:

 The 'maximum' animal is Barley.
*/ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T20:32:09.117

```
var pet = pets.OrderByDescending(p => p.Age).First();    

var name = pets.OrderByDescending(p => p.Age).First().Name; 
```

你也可以使用[morelinq 的 MaxBy](http://code.google.com/p/morelinq/source/browse/MoreLinq/MaxBy.cs?r=2da75c30d5bda7959e5113b702b4bb204a0e4a2c)

```
var name = pets.MaxBy(p=>p.Age).Name; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-09T20:48:37.150

另一种解决方案是修改`CompareTo()`方法：

```
int IComparable<Pet>.CompareTo(Pet pet)
{
    return this.Age.CompareTo( pet.Age );
} 
```

然后：

```
var olderPet = pets.Max(); 
Console.WriteLine(olderPet.Name); 
```

**编辑1：**

> 我如何从两个列表中获取姓名和年龄？列表名称 = 新列表（）；列表年龄=新列表（）；是我有信息的地方。

如果我理解您需要从给定的两个列表中创建另一个宠物列表。因此，您必须将其添加到`Pet`类中：

```
public Pet(string Name, int Age){
    this.Name = Name;
    this.Age = Age;
} 
```

然后执行此操作以从两个列表中创建 Pets 列表：

```
List<Pet> listPets = new List<Pet>();
for(int i = 0; i < listNames.Count; i++){
    listPets.Add(new Pet(name[i], age[i]));
} 
```

请记住，这两个列表必须具有相同的长度，否则此代码将抛出`ArgumentOutOfRangeException`.

**编辑2：**

> 然而，当我把它们放在一起时，我得到了“Pet.Pet”的输出。如何粘贴代码以显示？

如果要打印新列表的所有内容，可以执行以下操作：

```
foreach(Pet pet in listPets)
  Console.WriteLine("Name: " + pet.Name + "," + "Age: " + pet.Age.ToString()); 
```

或者您可以将其添加到您的宠物类中：

```
public override string ToString(){
   return "Name: " + Name + "," + "Age: " + Age.ToString();
} 
```

然后使用此代码打印列表的所有内容：

```
foreach(Pet pet in listPets)
  Console.WriteLine(pet.ToString()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-09T20:42:09.957

我很困惑。你问“我如何得到对应的名字？” 并且您的代码返回正确答案。然后你问“有没有办法从列表中创建新对象？” 答案是肯定的，但你到底想通过这样做来归档什么？

如果你想找到最老的宠物，你的 CompareTo 方法是不正确的。它应该如下所示：

```
public int IComparable<Pet>.CompareTo(Pet other)
{
    return this.Age - other.Age;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-10T11:55:45.443

您可以使用 Zip 迭代这两个列表：

```
var pets = names.Zip(ages, (n, a) => new Pet { Name = n, Age = a }); 
```

然后你可以使用 Max 根据你的比较函数得到最大值：

```
var maxPet = pers.Max(); 
```

# javascript - 如何按类将文本区域转换为 nicEditor？

> ID：12342698
> 
> 赞同：1
> 
> 时间：2012-09-09T20:28:37.200
> 
> 标签：javascript, rich-text-editor, nicedit

我不需要转换页面上的**所有**文本区域。但我发现只有一种转换方法 - nicEditors.allTextAreas

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T20:41:16.153

有它的[例子](http://nicedit.com/demos.php?demo=3)。你需要使用[`nicEditor.panelInstance`](http://wiki.nicedit.com/w/page/521/Javascript%20API).

```
var options = { ... };
var editor = new nicEditor(options).panelInstance('textareaID'); 
```

然而，这也适用于元素的 ID。但是，您可以为所需元素动态生成随机 ID 并将其提取到`nicEditor.panelInstance`.

# php - 如何在 kohana 中添加类似 example.com/module/controller/function/params 的路由

> ID：12342702
> 
> 赞同：1
> 
> 时间：2012-09-09T20:29:18.290
> 
> 标签：php, module, kohana

例如：

`/modules/test/controllers/index.php`- 文件夹结构

`example.com/test/index/param1/someValue`- 网址

或类似的东西。

我需要在引导程序中写什么来制作这条路径？

```
Route::set('test', 'test')
  ->defaults(array(
      'directory'  => 'modules/test/controllers',
      'controller' => 'index',
      'action'     => 'index',
  )); 
```

但这不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T20:45:34.610

我发现 Kohana 路由文档有点缺乏，并写了一个非常详细的概述来回答你的问题：[http ://www.kineticklink.com/kohana-3-routing/](http://www.kineticklink.com/kohana-3-routing/)

注意：我从来没有接触过更高级的正则表达式匹配的东西——将成为第 3 部分

# tomcat - JBoss 7 中 Tomcat 生命周期侦听器的等价物？

> ID：12342708
> 
> 赞同：3
> 
> 时间：2012-09-09T20:30:13.173
> 
> 标签：tomcat, jboss, jboss7.x

我有一个在 Tomcat 7 上运行的应用程序，它在 server.xml 中使用 LifeCycle 侦听器。我想知道 JBoss 7 中是否有等价物，因为我正在考虑将我的应用程序移植到这个平台上。谢谢马克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T20:20:38.410

我还找到了另一种选择，注册一个可以在 JBoss AS 7 中使用的 MXBean。
有关@MXBean 注释的更多信息可以在以下链接中找到：http: [//docs.oracle.com/javase/6/docs/ api/javax/management/MXBean.html](http://docs.oracle.com/javase/6/docs/api/javax/management/MXBean.html)

# tomcat - Tomcat部署完成。如何正常访问网站？

> ID：12342710
> 
> 赞同：0
> 
> 时间：2012-09-09T20:30:22.683
> 
> 标签：tomcat

我已经设法将我的战争文件部署到 Tomcat。但是，我只能通过 foo.com:8080/SomeApp 访问我的网站。我想要的是正常访问我的网站，例如 foo.com 应该自动将我带到我的网站。然而这并没有发生？我该如何解决？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T07:56:23.030

您可能已经安装了`SomeApp.war`. 如果你的 webapp 应该在 root（意思是`/`）上下文中运行，它应该被命名为`ROOT.war`. 但是，如果您只想转发 from`http://foo.com/`到`http://foo.com/SomeApp`，您可以`index.html`在 Tomcat 的`webapps`文件夹中添加一个包含元标头的：

```
<meta http-equiv="refresh" content="0; URL=/SomeApp" /> 
```

对于端口重定向 (80 -> 8080)，这取决于您的安装：您是否在您的 Tomcat 中使用 Apache HTTPD，然后查看[如何从 Apache 重定向到 Tomcat？](https://stackoverflow.com/questions/603765).

# php - 参数的数据结构变化时的递归函数？

> ID：12342713
> 
> 赞同：2
> 
> 时间：2012-09-09T20:30:31.973
> 
> 标签：php, recursion, overloading, reddit

抱歉，如果标题令人困惑，但我正在尝试使用递归函数获取所有评论及其回复。问题是顶级评论对象的数据结构与评论不同。从 访问顶级评论，`$comment_object->data->children`而从 访问所有评论回复`$comment->data->replies`。这是我到目前为止所拥有的：

```
public function get_top_comments()
{
    $comments_object = json_decode(file_get_contents("http://www.reddit.com/comments/$this->id.json"));
    sleep(2); // after every page request

    $top_comments = array();
    foreach ($comments_object[1]->data->children as $comment)
    {
        $c = new Comment($comment->data);
        $top_comments[] = $c;
    }
    return $top_comments;
}

public function get_comments($comments = $this->get_top_comments) //<-- doesn't work
{
    //var_dump($comments);

    foreach ($comments as $comment)
    {
        if ($comment->data->replies != '')
        {
            //Recursive call
        }
    }
} 
```

我试图指定`$comments = $this->get_top_comments`为递归函数的默认参数，但我猜 PHP 不支持这个？我是否必须在函数中使用 if-else 块来分隔不同的结构？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-09T20:38:27.967

我只需要`get_comments()`as的默认值`NULL`，然后检查它是否为空；如果是，请使用热门评论。无论如何，您都不希望传递的评论`NULL`。

```
public function get_comments($comments = NULL)
{
    //var_dump($comments);

    if (is_null($comments))
        $comments = $this->get_top_comments;

    foreach ($comments as $comment)
    {
        if ($comment->data->replies != '')
        {
            //Recursive call
        }
    }
} 
```

[PHP 文档中的](http://php.net/manual/en/functions.arguments.php)一个示例就是这样做的。请注意文档中的此评论：

> 默认值必须是常量表达式，而不是（例如）变量、类成员或函数调用。

# c# - 如何比较两个字节数组

> ID：12342714
> 
> 赞同：25
> 
> 时间：2012-09-09T20:30:37.193
> 
> 标签：c#, bytearray

我有两个内容完全相同的字节数组。我试过：

```
if (bytearray1 == bytearray2) {...} else {...} 
```

和

```
if (Array.Equals(bytearray1, bytearray2)) {....} else {...} 
```

一直到其他地方！我不知道为什么！我手动检查了这两个数组好几次！！！

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2012-09-09T20:31:43.357

尝试使用[`SequenceEqual`](http://msdn.microsoft.com/en-us/library/bb348567.aspx)扩展方法。例如：

```
byte[] a1 = new byte[] { 1, 2, 3 };
byte[] a2 = new byte[] { 1, 2, 3 };
bool areEqual = a1.SequenceEqual(a2); // true 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-09-09T20:32:15.260

`==`运算符按引用进行比较；这是两个不同的例子。

`Array.Equals`是真的`Object.Equals`，它调用实例`Equals`方法。
由于数组不覆盖`Equals()`，这也通过引用进行比较。

相反，您应该调用 LINQ`SequenceEqual()`方法。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-09-09T20:31:57.347

运算符和 Equals 方法都`==`将测试引用相等性。由于您有两个单独的数组，它们永远不会相等。

由于您要测试两个数组是否以相同的顺序具有相同的内容，请尝试改用该[`SequenceEqual`](http://msdn.microsoft.com/en-us/library/bb348567.aspx)方法。

* * *

## 回答 #4

> 赞同：-5
> 
> 时间：2012-09-10T01:07:34.593

作为替代方案，如果您不习惯使用[LINQ](http://en.wikipedia.org/wiki/Language_Integrated_Query)，您可以使用 System.Convert 类...

```
byte[] a1;
byte[] a2;

if (System.Convert.ToBase64String(a1) == System.Convert.ToBase64String(a2)) {
    doSomething();
}
else {
    doSomethingElse();
} 
```

# windows-8 - 如何直接从我的应用程序启动 App-store 应用程序

> ID：12342728
> 
> 赞同：1
> 
> 时间：2012-09-09T20:32:42.980
> 
> 标签：windows-8, windows-runtime, windows-store

我想在我的应用程序中放置一个按钮或链接，如果应用程序处于试用模式，用户可以使用该按钮或链接启动应用程序商店并购买我的应用程序。

我找不到任何相关信息。我该如何实施？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-09T20:48:00.787

MSDN 文档：[使用 Windows Store 协议创建链接](http://msdn.microsoft.com/en-us/library/windows/apps/Hh974767.aspx)。或者，可以使用该[`Windows.ApplicationModel.Store.CurrentApp.LinkUri`](http://msdn.microsoft.com/en-us/library/windows/apps/windows.applicationmodel.store.currentapp.linkuri)属性访问商店中应用程序的 URI。

[然后，您可以使用Windows.System.Launcher.LaunchUriAsync](http://msdn.microsoft.com/en-US/library/windows/apps/hh701480)在商店中打开指向您的应用程序的链接。

# javascript - 向状态栏添加通知

> ID：12342731
> 
> 赞同：0
> 
> 时间：2012-09-09T20:33:19.000
> 
> 标签：javascript, firefox, firefox-addon, firefox-addon-sdk

如何在底部的状态栏上运行滚动条，其中包含当前时间和根据程序中的时间放置的文本。

我可以使用以下方法弹出窗口：

```
notifications.notify({ 
```

不知道如何每 5 分钟重复一次。（或）将其从弹出窗口重定向到状态栏中

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T11:28:59.090

对于这种功能，您需要小部件模块：

[https://addons.mozilla.org/en-US/developers/docs/sdk/latest/packages/addon-kit/widget.html](https://addons.mozilla.org/en-US/developers/docs/sdk/latest/packages/addon-kit/widget.html)

小部件可以包含一个 html 文档。

# sql - 在 SQL 中查询此搜索的不同方法？

> ID：12342734
> 
> 赞同：1
> 
> 时间：2012-09-09T20:34:01.547
> 
> 标签：sql, sql-server, sql-server-2008, join

我正在自学 MS-SQL，并试图找到不同的方法来从这 3 个表中找到按地区分组的 2012 年已付和未付索赔计数。如果有返回日期，则未支付索赔，如果返回日期为空，则支付索赔。

我将附上我运行的代码，但我不确定是否有更好的方法来做到这一点。

谢谢。

这是代码：

```
SET dateformat ymd;

CREATE TABLE Claims
  (
     ClaimID      INT,
     SubID        INT,
     [Claim Date] DATETIME
  );

CREATE TABLE Phoneship
  (
     ClaimID           INT,
     [Shipping Number] INT,
     [Claim Date]      DATETIME,
     [Ship Date]       DATETIME,
     [Returned Date]   DATETIME
  );

CREATE TABLE Enrollment
  (
     SubID           INT,
     Enrollment_Date DATETIME,
     Channel         NVARCHAR(255),
     Region          NVARCHAR(255),
     Status          FLOAT,
     Drop_Date       DATETIME
  );

INSERT INTO [Phoneship]
            ([ClaimID],
             [Shipping Number],
             [Claim Date],
             [Ship Date],
             [Returned Date])
VALUES     (102,
            201,
            '2011-10-13 00:00:00',
            '2011-10-14 00:00:00',
            NULL);

INSERT INTO [Phoneship]
            ([ClaimID],
             [Shipping Number],
             [Claim Date],
             [Ship Date],
             [Returned Date])
VALUES     (103,
            202,
            '2011-11-02 00:00:00',
            '2011-11-03 00:00:00',
            '2011-11-20 00:00:00');

INSERT INTO [Phoneship]
            ([ClaimID],
             [Shipping Number],
             [Claim Date],
             [Ship Date],
             [Returned Date])
VALUES     (103,
            203,
            '2011-11-02 00:00:00',
            '2011-11-22 00:00:00',
            NULL);

INSERT INTO [Phoneship]
            ([ClaimID],
             [Shipping Number],
             [Claim Date],
             [Ship Date],
             [Returned Date])
VALUES     (105,
            204,
            '2012-01-16 00:00:00',
            '2012-01-17 00:00:00',
            NULL);

INSERT INTO [Phoneship]
            ([ClaimID],
             [Shipping Number],
             [Claim Date],
             [Ship Date],
             [Returned Date])
VALUES     (106,
            205,
            '2012-02-15 00:00:00',
            '2012-02-16 00:00:00',
            '2012-02-26 00:00:00');

INSERT INTO [Phoneship]
            ([ClaimID],
             [Shipping Number],
             [Claim Date],
             [Ship Date],
             [Returned Date])
VALUES     (106,
            206,
            '2012-02-15 00:00:00',
            '2012-02-27 00:00:00',
            '2012-03-06 00:00:00');

INSERT INTO [Phoneship]
            ([ClaimID],
             [Shipping Number],
             [Claim Date],
             [Ship Date],
             [Returned Date])
VALUES     (107,
            207,
            '2012-03-12 00:00:00',
            '2012-03-13 00:00:00',
            NULL);

INSERT INTO [Phoneship]
            ([ClaimID],
             [Shipping Number],
             [Claim Date],
             [Ship Date],
             [Returned Date])
VALUES     (108,
            208,
            '2012-05-11 00:00:00',
            '2012-05-12 00:00:00',
            NULL);

INSERT INTO [Phoneship]
            ([ClaimID],
             [Shipping Number],
             [Claim Date],
             [Ship Date],
             [Returned Date])
VALUES     (109,
            209,
            '2012-05-13 00:00:00',
            '2012-05-14 00:00:00',
            '2012-05-28 00:00:00');

INSERT INTO [Phoneship]
            ([ClaimID],
             [Shipping Number],
             [Claim Date],
             [Ship Date],
             [Returned Date])
VALUES     (109,
            210,
            '2012-05-13 00:00:00',
            '2012-05-30 00:00:00',
            NULL);

INSERT INTO [Claims]
            ([ClaimID],
             [SubID],
             [Claim Date])
VALUES     (101,
            12345678,
            '2011-03-06 00:00:00');

INSERT INTO [Claims]
            ([ClaimID],
             [SubID],
             [Claim Date])
VALUES     (102,
            12347190,
            '2011-10-13 00:00:00');

INSERT INTO [Claims]
            ([ClaimID],
             [SubID],
             [Claim Date])
VALUES     (103,
            12348723,
            '2011-11-02 00:00:00');

INSERT INTO [Claims]
            ([ClaimID],
             [SubID],
             [Claim Date])
VALUES     (104,
            12349745,
            '2011-11-09 00:00:00');

INSERT INTO [Claims]
            ([ClaimID],
             [SubID],
             [Claim Date])
VALUES     (105,
            12347190,
            '2012-01-16 00:00:00');

INSERT INTO [Claims]
            ([ClaimID],
             [SubID],
             [Claim Date])
VALUES     (106,
            12349234,
            '2012-02-15 00:00:00');

INSERT INTO [Claims]
            ([ClaimID],
             [SubID],
             [Claim Date])
VALUES     (107,
            12350767,
            '2012-03-12 00:00:00');

INSERT INTO [Claims]
            ([ClaimID],
             [SubID],
             [Claim Date])
VALUES     (108,
            12350256,
            '2012-05-11 00:00:00');

INSERT INTO [Claims]
            ([ClaimID],
             [SubID],
             [Claim Date])
VALUES     (109,
            12347701,
            '2012-05-13 00:00:00');

INSERT INTO [Claims]
            ([ClaimID],
             [SubID],
             [Claim Date])
VALUES     (110,
            12350256,
            '2012-05-15 00:00:00');

INSERT INTO [Claims]
            ([ClaimID],
             [SubID],
             [Claim Date])
VALUES     (111,
            12350767,
            '2012-06-30 00:00:00');

INSERT INTO [Enrollment]
            ([SubID],
             [Enrollment_Date],
             [Channel],
             [Region],
             [Status],
             [Drop_Date])
VALUES     (12345678,
            '2011-01-05 00:00:00',
            'Retail',
            'Southeast',
            1,
            NULL);

INSERT INTO [Enrollment]
            ([SubID],
             [Enrollment_Date],
             [Channel],
             [Region],
             [Status],
             [Drop_Date])
VALUES     (12346178,
            '2011-03-13 00:00:00',
            'Indirect Dealers',
            'West',
            1,
            NULL);

INSERT INTO [Enrollment]
            ([SubID],
             [Enrollment_Date],
             [Channel],
             [Region],
             [Status],
             [Drop_Date])
VALUES     (12346679,
            '2011-05-19 00:00:00',
            'Indirect Dealers',
            'Southeast',
            0,
            '2012-03-15 00:00:00');

INSERT INTO [Enrollment]
            ([SubID],
             [Enrollment_Date],
             [Channel],
             [Region],
             [Status],
             [Drop_Date])
VALUES     (12347190,
            '2011-07-25 00:00:00',
            'Retail',
            'Northeast',
            0,
            '2012-05-21 00:00:00');

INSERT INTO [Enrollment]
            ([SubID],
             [Enrollment_Date],
             [Channel],
             [Region],
             [Status],
             [Drop_Date])
VALUES     (12347701,
            '2011-08-14 00:00:00',
            'Indirect Dealers',
            'West',
            1,
            NULL);

INSERT INTO [Enrollment]
            ([SubID],
             [Enrollment_Date],
             [Channel],
             [Region],
             [Status],
             [Drop_Date])
VALUES     (12348212,
            '2011-09-30 00:00:00',
            'Retail',
            'West',
            1,
            NULL);

INSERT INTO [Enrollment]
            ([SubID],
             [Enrollment_Date],
             [Channel],
             [Region],
             [Status],
             [Drop_Date])
VALUES     (12348723,
            '2011-10-20 00:00:00',
            'Retail',
            'Southeast',
            1,
            NULL);

INSERT INTO [Enrollment]
            ([SubID],
             [Enrollment_Date],
             [Channel],
             [Region],
             [Status],
             [Drop_Date])
VALUES     (12349234,
            '2012-01-06 00:00:00',
            'Indirect Dealers',
            'West',
            0,
            '2012-02-14 00:00:00');

INSERT INTO [Enrollment]
            ([SubID],
             [Enrollment_Date],
             [Channel],
             [Region],
             [Status],
             [Drop_Date])
VALUES     (12349745,
            '2012-01-26 00:00:00',
            'Retail',
            'Northeast',
            0,
            '2012-04-15 00:00:00');

INSERT INTO [Enrollment]
            ([SubID],
             [Enrollment_Date],
             [Channel],
             [Region],
             [Status],
             [Drop_Date])
VALUES     (12350256,
            '2012-02-11 00:00:00',
            'Retail',
            'Southeast',
            1,
            NULL);

INSERT INTO [Enrollment]
            ([SubID],
             [Enrollment_Date],
             [Channel],
             [Region],
             [Status],
             [Drop_Date])
VALUES     (12350767,
            '2012-03-02 00:00:00',
            'Indirect Dealers',
            'West',
            1,
            NULL);

INSERT INTO [Enrollment]
            ([SubID],
             [Enrollment_Date],
             [Channel],
             [Region],
             [Status],
             [Drop_Date])
VALUES     (12351278,
            '2012-04-18 00:00:00',
            'Retail',
            'Midwest',
            1,
            NULL);

INSERT INTO [Enrollment]
            ([SubID],
             [Enrollment_Date],
             [Channel],
             [Region],
             [Status],
             [Drop_Date])
VALUES     (12351789,
            '2012-05-08 00:00:00',
            'Indirect Dealers',
            'West',
            0,
            '2012-07-04 00:00:00');

INSERT INTO [Enrollment]
            ([SubID],
             [Enrollment_Date],
             [Channel],
             [Region],
             [Status],
             [Drop_Date])
VALUES     (12352300,
            '2012-06-24 00:00:00',
            'Retail',
            'Midwest',
            1,
            NULL);

INSERT INTO [Enrollment]
            ([SubID],
             [Enrollment_Date],
             [Channel],
             [Region],
             [Status],
             [Drop_Date])
VALUES     (12352811,
            '2012-06-25 00:00:00',
            'Retail',
            'Southeast',
            1,
            NULL); 
```

和查询1

```
SELECT Count(ClaimID)                       AS 'Paid Claim',
       (SELECT Count(ClaimID)
        FROM   dbo.phoneship
        WHERE  [returned date] IS NOT NULL) AS 'Unpaid Claim'
FROM   dbo.Phoneship
WHERE  [Returned Date] IS NULL
GROUP  BY claimid 
```

查询2

```
SELECT Count(*)                             AS 'Paid Claims',
       (SELECT Count(*)
        FROM   dbo.Phoneship
        WHERE  [Returned Date] IS NOT NULL) AS 'Unpaid Claims'
FROM   dbo.Phoneship
WHERE  [Returned Date] IS NULL; 
```

查询3

```
Select Distinct(C.[Shipping Number]), Count(C.ClaimID) AS 'COUNT ClaimID', 
        A.Region, A.SubID 
From dbo.HSEnrollment A 
Inner Join dbo.Claims B On A.SubId = B.SubId 
Inner Join dbo.Phoneship C On B.ClaimID = C.ClaimID 
Where C.[Returned Date] IS NULL 
Group By A.Region, A.Subid, C.ClaimID, C.[Shipping Number] Order By A.Region 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T20:52:08.920

您需要将所有表连接在一起以获得该区域。此版本假设每个索赔最多有 Phoneship 记录：

```
SELECT e.region, count(*) as numclaims,
       sum(case when ps.ReturnedDate is not null then 1 else 0 end) AS 'Paid Claim',
       sum(case when ps.ReturnedDate is null then 1 else 0 end) AS 'Unpaid Claim'
FROM   claims c join
       enrollment e
       on c.sub_id = e.sub_id left outer join
       Phoneship ps
       on ps.claimid = c.claimdid
WHERE  [Returned Date] IS NULL
GROUP  BY e.region 
```

如果有多个，则计数将被取消，因为将计算每个电话号码而不是每个索赔。要解决此问题，请将两个总和更改为：

```
count(distinct case when ps.ReturnedDate is not null then c.claimid end)
count(distinct case when ps.ReturnedDate is null then c.claimid end) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T03:33:06.123

很难回答这个问题，因为我明白你在问什么，但是还有许多其他小问题导致你的查询困难。

**我的回答**
因此，当且仅当我正确解释您的表结构时，我会在这里回答您的问题的核心（更多内容将在此基础上进行）。

我没有包括索赔的数量，因为那会影响数字。我已经包含了两个查询，最终查询和分解查询。对于总和（因为您正在学习），我使用 WITH ROLLUP 来获取每个分组列的总和。

```
SELECT 
    e.Region,
    paid = SUM(CASE WHEN p.[Returned Date] IS NULL THEN 1 ELSE 0 END),
    unpaid = SUM(CASE WHEN p.[Returned Date] IS NULL THEN 0 ELSE 1 END)
FROM claims c
    INNER JOIN enrollment e
        ON e.SubID = c.SubID
    INNER JOIN phoneship p
        ON p.ClaimID = c.ClaimID
GROUP BY e.Region
WITH ROLLUP 
```

**分解**
这是利用内部虚拟表（结果表-结果集等）的子选择的分解查询。我这样做是为了证明一个观点。

```
SELECT 
    x.Region,
    -- if the Returned Date is null then add 1, otherwise add 0
    paid = SUM(CASE WHEN x.ReturnedDate IS NULL THEN 1 ELSE 0 END),
    -- if the Returned Date is null then add 0, otherwise add 1
    unpaid = SUM(CASE WHEN x.ReturnedDate IS NULL THEN 0 ELSE 1 END)
FROM
(
-- Run this inner query to see what data you are actually working with
-- for your grouping/sums
SELECT 
    c.ClaimID,
    c.SubID,
    E = '#', -- This is just a separator
    e_SubID = e.SubID, -- This is equivalent to saying e.SubID AS e_SubID
    e.Region,
    P = '#', -- This is just a separator
    p_ClaimID = p.ClaimID,
    ShippingNo = p.[Shipping Number], -- Getting rid of those nasty spaces
    ReturnedDate = p.[Returned Date]
FROM claims c
    INNER JOIN enrollment e
        ON e.SubID = c.SubID
    -- Initially this was a LEFT JOIN but you are missing Claims in your 
    -- Phoneship table which will produce bogus results, therefore the
    -- INNER JOIN will filter out any rows that don't match
    INNER JOIN phoneship p
        ON p.ClaimID = c.ClaimID
) as x
GROUP BY x.Region
WITH ROLLUP 
```

如果可以的话，尽可能避免使用 Sub Selects。它们对性能不是很好，但当然会有一些你无法避免的时候。

您的表结构/关系是您难以执行此查询的根本原因。查看结构后，我发现您正在复制数据（这是不可以的），并且您无法将详细信息全部提取到 1 个不错的查询中。

**我看到的问题领域（以及一些友好的建议）**

1.  您将 ClaimDate 列从 Claims 表复制到 PhoneShip 表。我不确定它们是否有不同的含义，但如果它是重复的 - 避免这种情况。

2.  可能应该删除 Claims 表中的 SubID。如果将 ClaimID 作为[外键](http://msdn.microsoft.com/en-us/library/ms177463%28v=sql.105%29.aspx)(FK) 放入 Enrollment 表中会更好。

3.  为 Phoneship 表提供其自己的[主键](http://msdn.microsoft.com/en-us/library/ms181043%28v=sql.105%29.aspx)(PK) - 它易于使用，除了 ClaimID 和 ShippingNumber 的组合之外，每一行都是唯一的。查看[表关系](http://msdn.microsoft.com/en-us/library/ms189049.aspx)和[唯一约束](http://msdn.microsoft.com/en-us/library/ms191166%28v=sql.105%29.aspx)。

4.  我对使用 NULL 作为衡量某物是否已支付或未支付的良好指标有点不确定。只有设计者会知道空字段意味着付费。为此，您最好使用默认值为零并标记为 NOT NULL 的位字段 - 这样它就永远不会为空。毕竟这将为您省去编写 case 语句的麻烦，您可以直接使用该位作为您的总和 例如：SUM(x.Paid)。此外，由于各种原因，列有时会被错误地标记为 NULL。

5.  考虑将 Channel 和 Region 列完全拉出 Enrollment 表。用整数 PK 将它们放在他们自己的表中。您可以使用 ChannelID 和 RegionID 在任何需要的地方引用 PK。这样，如果名称需要更改，您就不必担心数据完整性问题（UPDATE Table SET NameCol = 'a' WHERE NameCol = 'b' -- 这可能会导致意外的重命名灾难。）

6.  将 RegionID 和 ChannelID 放入 Claims 表中。现在，如果您按照上面的步骤 2 操作，则在 Enrollment 表中不需要它（在 Enrollment 表中有一个 ClaimID FK）。

恭喜你主动学习了这些东西。这是无价的知识（除非您上大学，在这种情况下，它的价值约为 50K 或更差……学生贷款……叹息……）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T05:51:39.427

试试这个

```
SELECT e.Region, COUNT(c.SubID) TotalClaims, COUNT(p.[returned date]) UnpaidClaims, COUNT(c.SubID)-COUNT(p.[returned date]) PaidClaims
FROM
    Claims c
    INNER JOIN enrollment e ON c.SubID = e.SubID
    INNER JOIN phoneship p ON p.ClaimID = c.ClaimID
GROUP BY e.Region 
```

# gnu-make - 成功配置后gnu出错

> ID：12342735
> 
> 赞同：0
> 
> 时间：2012-09-09T20:34:08.100
> 
> 标签：gnu-make, libtiff

我正在尝试构建依赖于 libtiff 的“lcms2”静态库。libtiff 再次依赖于 libjbig。我已经使用以下参数成功配置了 libtest：

```
CFLAGS="-fPIC" CXXFLAGS="-fPIC" LIBS="-ljbig" ./configure --prefix=/usr/local --enable-static=yes --enable-shared=no --with-zlib=yes --with-jpeg=yes --with-tiff=yes --with-pic=PIC 
```

配置报告没有错误：

```
checking for TIFF support ... 
checking tiff.h usability... yes
checking tiff.h presence... yes
checking for tiff.h... yes
checking tiffio.h usability... yes
checking tiffio.h presence... yes
checking for tiffio.h... yes
checking for TIFFOpen in -ltiff... yes
checking for TIFFClientOpen in -ltiff... yes
checking for TIFFIsByteSwapped in -ltiff... yes
checking if TIFF package is complete... yes
checking tiffconf.h usability... yes
checking tiffconf.h presence... yes
checking for tiffconf.h... yes
configure: creating ./config.status
config.status: creating Makefile
config.status: creating lcms2.pc
config.status: creating include/Makefile
config.status: creating src/Makefile
config.status: creating utils/tificc/Makefile
config.status: creating utils/transicc/Makefile
config.status: creating utils/linkicc/Makefile
config.status: creating utils/jpgicc/Makefile
config.status: creating utils/psicc/Makefile
config.status: creating testbed/Makefile
config.status: executing depfiles commands
config.status: executing libtool commands 
```

当我创建库时，它会引发以下错误：

```
/bin/sh ../../libtool --tag=CC   --mode=link gcc -std=gnu99  -fPIC   -o tificc tificc.o xgetopt.o vprf.o ../../src/liblcms2.la -ltiff -ljpeg -lz -lm 
libtool: link: gcc -std=gnu99 -fPIC -o tificc tificc.o xgetopt.o vprf.o  ../../src/.libs/liblcms2.a -ltiff -ljpeg -lz -lm
/usr/local/lib/libtiff.a(tif_jbig.o): In function `JBIGDecode':
tif_jbig.c:(.text+0xc4): undefined reference to `jbg_dec_init'
tif_jbig.c:(.text+0xe4): undefined reference to `jbg_newlen'
tif_jbig.c:(.text+0x116): undefined reference to `jbg_dec_in'
tif_jbig.c:(.text+0x12a): undefined reference to `jbg_strerror'
tif_jbig.c:(.text+0x177): undefined reference to `jbg_dec_getimage'
tif_jbig.c:(.text+0x188): undefined reference to `jbg_dec_getsize'
tif_jbig.c:(.text+0x1ac): undefined reference to `jbg_dec_free'
/usr/local/lib/libtiff.a(tif_jbig.o): In function `JBIGEncode':
tif_jbig.c:(.text+0x402): undefined reference to `jbg_enc_init'
tif_jbig.c:(.text+0x40d): undefined reference to `jbg_enc_out'
tif_jbig.c:(.text+0x418): undefined reference to `jbg_enc_free'
collect2: ld returned 1 exit status
make[1]: *** [tificc] Error 1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T20:44:31.093

> libtool：链接：gcc -std=gnu99 -fPIC -o tificc tificc.o xgetopt.o vprf.o ../../src/.libs/liblcms2.a -ltiff -ljpeg -lz -lm

链接命令中没有对 JBIG 库的引用（我不记得它应该在之前还是之后进行 - 有些库需要两者 - 对 libtiff 的引用，`-ltiff`），因此`jbg_*`无法解析引用。链接 LCMS 对您没有帮助，因为 JBIG 没有链接到 JBIG，而只是被 JBIG 引用。

添加`-ljbig`到链接命令。

或者，手动编辑 Makefile 并将 -ljbig 添加到 LIBS（例如 LIBS = -ljbig）。

# html - 当用户按下回车键时，如何选择点击哪个表单按钮（默认）？

> ID：12342738
> 
> 赞同：2
> 
> 时间：2012-09-09T20:34:24.813
> 
> 标签：html, forms

> **可能重复：**
> [在带有多个提交按钮的表单中提交带有 enter 按钮的表单](https://stackoverflow.com/questions/4068082/submitting-a-form-with-the-enter-button-in-a-form-with-several-submit-buttons)

我有一个带有两个提交按钮的 html 表单。

当用户在所述表单中按 Enter 时，如何设置“单击”的默认按钮？

正如@quentin 指出的那样，第一个按钮用于在按下“输入”时提交......

那么，例如，我如何将第二个按钮设为默认值？

**编辑**：澄清一下：假设有一个表单可以兼作登录和注册表单。有两个按钮：一个是注册；一个注册。如果我希望在用户按下回车键时“点击”第二个按钮怎么办？

谢谢！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T20:36:47.087

首先放置该按钮（在使用 enter 提交表单时将触发任何按钮的浏览器中（并在服务器端处理器中没有一个按钮成功时设置默认值）。

# c# - 从二进制文件中读取字符串，不同的编码

> ID：12342739
> 
> 赞同：0
> 
> 时间：2012-09-09T20:34:25.877
> 
> 标签：c#, java, android, character-encoding, io

我正在尝试读取由 C# 程序创建的 Java (android) 中的二进制文件，但是我偶然发现了一个问题。C# 默认使用 UTF-7 编码二进制文件中的字符串，Java 使用 UTF-8。这当然意味着字符串没有正确加载。

我想知道如何将字符串读取为 UTF-7 而不是 UTF-8。我还注意到我在浮动方面遇到了类似的问题。C# 和 Java 是否以不同的方式处理它们，如果是，我如何在 Java 中正确读取它。

编辑：我在 C# 程序中使用 BinaryWriter 类，在 java 中使用 DataInputStream 类。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T20:35:18.740

除非另有说明，否则 C# 使用 UTF-8 编码。

**编辑**这里的文档不正确。
查看源代码，使用以下代码`BinaryWriter`将字符串长度写入*7 位编码整数：*

```
 protected void Write7BitEncodedInt(int value) {
        // Write out an int 7 bits at a time.  The high bit of the byte, 
        // when on, tells reader to continue reading more bytes. 
        uint v = (uint) value;   // support negative numbers
        while (v >= 0x80) { 
            Write((byte) (v | 0x80));
            v >>= 7;
        }
        Write((byte)v); 
    } 
```

您需要将此代码移植到 Java 以了解要读取的字节数。

# event-handling - 使用 Native Client 的鼠标控制

> ID：12342742
> 
> 赞同：1
> 
> 时间：2012-09-09T20:34:51.137
> 
> 标签：event-handling, mouseevent, google-nativeclient

我有一个疑问，我仍在寻找如何做到这一点。我可以制作一个控制鼠标光标的 Native Client 应用程序吗？像这样：我想在 Native Client 应用程序中使用键盘箭头来控制鼠标光标。

感谢您的帮助/指导，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T21:38:49.800

您不能对 NaCl 应用程序执行此操作，因为没有可用于控制鼠标光标位置的 API。

如果您开发 Pepper 插件，这是可能的，因为 Pepper 插件可以调用本机 OS API，所以问题变成了如何在平台 X 上以编程方式控制鼠标光标？

[http://code.google.com/p/ppapi/](http://code.google.com/p/ppapi/)

约翰

# algorithm - 找到偶数出现的数字

> ID：12342743
> 
> 赞同：14
> 
> 时间：2012-09-09T20:35:06.290
> 
> 标签：algorithm, time-complexity, space-complexity, bitwise-xor

给定一个数组，其中每个数字的出现次数为奇数，但出现次数为偶数的数字除外。找到偶数出现的数字。

例如

```
1, 1, 2, 3, 1, 2, 5, 3, 3 
```

输出应该是：

```
2 
```

以下是约束：

1.  数字不在范围内。
2.  就地进行。
3.  所需的时间复杂度为 O(N)。
4.  数组可能包含负数。
5.  数组未排序。

由于上述限制，我所有的想法都失败了：基于比较的排序、计数排序、BST、散列、蛮力。

我很想知道：XORing 会在这里工作吗？如果是，如何？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T22:31:51.760

这个问题已经困扰了我好几天的地铁行程。这是我的想法。

如果 A. Webb 是对的，并且这个问题来自采访或者是某种学术问题，我们应该考虑一下我们所做的（错误的）假设，并可能尝试探索一些简单的案例。

想到的两个极端子问题如下：

*   该数组包含**两个值**：一个重复偶数次，另一个重复奇数次。
*   该数组包含**n-1 个不同的值**：所有值都出现一次，除了一个值出现两次。

也许我们应该根据不同值数量的复杂性来拆分案例。

如果我们假设**不同值的数量为 O(1)**，则每个数组将具有`m`不同的值，且与`m`无关`n`。在这种情况下，我们可以遍历原始数组擦除并计算每个值的出现次数。在这个例子中，它会给

```
1, 1, 2, 3, 1, 2, 5, 3, 3 -> First value is 1 so count and erase all 1
2, 3, 2, 5, 3, 3 -> Second value is 2, count and erase
-> Stop because 2 was found an even number of times. 
```

这将解决复杂度为的**第一个极端示例**`O(mn)`，其计算结果为`O(n)`。

更好的是：如果不同值的数量是`O(1)`，我们可以在哈希映射中计算值的出现次数，在读取整个数组后遍历它们并返回出现偶数次的值。这仍然被认为是`O(1)`记忆。

第二种**极端情况**是在数组中找到唯一重复的值。这在 中似乎是不可能的`O(n)`，但在某些特殊情况下我们可以做到：如果数组中有`n`元素并且内部的值是`{1, n-1}`+ 重复值（或某些变体，例如*x 和 y 之间的所有数字*）。在这种情况下，我们将所有值相加，从**总和**中减去`n(n-1)/2`，然后检索重复的值。

在我看来，用数组内的随机值解决第二个极端情况，或者在常量内存和时间中`m`不是常量 on的一般情况似乎是不可能的。`n``O(n)`

**额外说明：**这里，XORing 不起作用，因为我们想要的数字出现偶数次，而其他数字出现奇数次。如果问题是“给出出现*奇数次*的数字，所有其他数字出现*偶*数次”，我们可以对所有值进行异或运算并在最后找到奇数。

我们可以尝试使用这种逻辑寻找一种方法：我们需要一个类似函数的东西，对一个数字应用奇数次将产生 0，而偶数次将产生恒等式。不要认为这是可能的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-26T17:23:57.567

**介绍**

这是一个可能的解决方案。这是相当做作且不实用的，但是问题也是如此。如果我的分析中有漏洞，我将不胜感激。如果这是一个“官方”解决方案的作业或挑战问题，我也很想看看原始海报是否仍然存在，因为距离被问到已经过去了一个多月。

首先，我们需要充实问题的一些不明确的细节。所需的时间复杂度是`O(N)`，但什么是`N`？大多数评论员似乎都在假设`N`数组中的元素数量。如果数组中的数字具有固定的最大大小，这将是可以的，在这种情况下，Michael G 的基数排序解决方案将解决问题。但是，在原始发帖人没有澄清的情况下，我将约束 #1 解释为不需要固定最大位数。因此，如果`n`（小写）是数组中的元素个数，以及元素`m`的*平均*长度，那么要应对的总输入大小为`mn`。求解时间的下界是`O(mn)`因为这是验证解决方案所需的输入的通读时间。因此，我们想要一个与总输入大小成线性关系的解决方案`N = nm`。

例如，我们可能有`n = m`，即平均长度的`sqrt(N)`元素。`sqrt(N)`比较排序需要`O( log(N) sqrt(N) ) < O(N)`运算，但这不是胜利，因为运算本身平均需要`O(m) = O(sqrt(N))`时间，所以我们回到`O( N log(N) )`.

`O(mn) = O(N)`此外，如果`m`是*最大*长度而不是*平均*长度，则将采用基数排序。如果假设数字落在某个有界范围内，则最大和平均长度将处于相同的顺序，但如果不是这样，我们可能会有一个小百分比的数字大且可变，而大百分比的数字数字少. 例如，10% 的数字可能是 length`m^1.1`和 90% 的 length `m*(1-10%*m^0.1)/90%`。平均长度是`m`，但最大长度`m^1.1`是 ，所以基数排序是`O(m^1.1 n) > O(N)`。

免得有人担心我对问题定义的改动太大，我的目标仍然是描述一种时间复杂度与元素数量成线性关系的算法，即`O(n)`. 但是，我还需要对每个元素的长度执行线性时间复杂度的操作，因此这些操作在所有元素上平均为`O(m)`. 这些操作将是计算元素哈希函数和比较所需的乘法和加法。如果这个解决方案确实解决了 中的问题`O(N) = O(nm)`，那么这应该是最佳复杂度，因为验证答案需要相同的时间。

问题定义中省略的另一个细节是是否允许我们在处理数据时销毁数据。为了简单起见，我将这样做，但我认为如果格外小心，它可以避免。

**可能的解决方案**

首先，可能存在负数的约束是空的。通过一次数据，我们将记录最小元素`z`和元素数量`n`。在第二次通过时，我们将添加`(3-z)`到每个元素，所以现在最小的元素是 3。（请注意，恒定数量的数字可能会因此溢出，因此我们应该首先对数据进行恒定数量的额外遍历以进行测试这些是解决方案。）一旦我们有了解决方案，我们只需简单地减去`(3-z)`即可将其恢复为原始形式。现在我们可以使用三个特殊的标记值`0`、`1`和`2`，它们本身不是元素。

*步骤1*

使用[中位数选择算法](http://en.wikipedia.org/wiki/Selection_algorithm)来确定数组的第 90 个百分位元素 ，`p`并将数组`A`划分为两个集合，`S`其中`T`元素大于和小于。这需要步骤（平均总步骤）时间。匹配的元素可以放在或中，但为了简单起见，遍历数组一次并通过将其替换为 来测试和消除它。Set最初跨越索引，其中是 about of和 set`S``10% of n``p``T``p``O(n)``O(m)``O(N)``p``S``T``p``0``S``0..s``s``10%``n``T`跨越其余 90% 的索引`s+1..n`。

*第2步*

现在我们要循环遍历`i in 0..s`每个元素`e_i`，我们要计算一个散列函数`h(e_i)`到`s+1..n`. 我们将使用[通用散列](http://en.wikipedia.org/wiki/Universal_hashing)来获得均匀分布。因此，我们的散列函数将进行乘法和加法，并在每个元素的长度上花费线性时间。

我们将对碰撞使用修改后的线性探测策略：

1.  `h(e_i)``T`被（意思是`A[ h(e_i) ] < p`但不是标记`1`或）的成员占据，`2`或者是`0`。这是一个哈希表未命中。`e_i`通过从插槽`i`和交换元素来插入`h(e_i)`。

2.  `h(e_i)``S` 被（意思`A[ h(e_i) ] > p`）或标记`1`或的成员占据`2`。这是一个哈希表冲突。进行线性探测，直到遇到 or 的副本或`e_i`成员。`T``0`

    *   如果是 的成员`T`，这又是一个哈希表未命中，因此`e_i`通过`(1.)`交换到 slot 来插入`i`。

    *   如果 的重复`e_i`，这是一个哈希表命中。检查下一个元素。如果那个元素是`1`or `2`，我们已经不止一次看到`e_i`了，将`1`s 更改为`2`s ，反之亦然，以跟踪其奇偶校验的变化。如果下一个元素不是`1`or `2`，那么我们之前只见过`e_i`一次。我们希望将 a 存储`2`到下一个元素中，以表明我们现在已经看到`e_i`了偶数次。我们寻找下一个“空”槽，也就是一个被`T`我们移动到槽的成员占用的槽`i`，或者一个 0，然后将元素向上移动以`h(e_i)+1`向下索引，这样我们旁边就有空间`h(e_i)`来存储我们的奇偶校验信息. 注意我们不需要存储`e_i`本身又一次，所以我们没有用完额外的空间。

所以基本上我们有一个功能哈希表，其中槽数是我们希望哈希的元素的 9 倍。一旦我们开始获得命中，我们也开始存储奇偶校验信息，所以我们最终可能只有 4.5 倍的插槽数，仍然是一个非常低的负载因子。有几种碰撞策略可以在这里工作，但由于我们的负载因子很低，平均碰撞次数也应该很低，线性探测应该以适当的时间复杂度平均解决它们。

*第 3 步*

`0..s`一旦我们完成了into的元素散列`s+1..n`，我们就遍历`s+1..n`. 如果我们找到 S 的一个元素后跟 a `2`，那是我们的目标元素，我们就完成了。任何元素后跟指示`e`的另一个元素只遇到一次并且可以归零。同样，后面是我们看到奇数次的手段，我们可以将和 标记归零。`S``S``e``e``1``e``e``1`

*根据需要冲洗并重复*

如果我们还没有找到我们的目标元素，我们重复这个过程。我们的第 90 个百分位分区会将 10% 的`n`剩余最大元素移动到开头，`A`并将剩余元素（包括空`0`标记槽）移动到末尾。我们像以前一样继续进行散列。我们最多必须这样做 10 次，因为我们`n`每次处理 10%。

**结论分析**

通过中位数算法进行分区的时间复杂度为`O(N)`，我们做了 10 次，仍然是`O(N)`。`O(1)`由于哈希表负载较低，并且*总共*`O(n)`执行了哈希操作（10 次重复中的每一次，大约为 n 的 10%），因此每个哈希操作平均进行。每个元素都有一个为它们计算的散列函数，时间复杂度与它们的长度成线性关系，因此平均而言是所有元素。因此，总体上的散列操作是。所以，如果我已经正确分析了这一点，那么总的来说这个算法是. （如果加法、乘法、比较和交换操作被假定为相对于输入的恒定时间，也是如此。）*`n``O(m)``O(mn) = O(N)``O(N)+O(N)=O(N)``O(n)`*

 *请注意，该算法没有利用问题定义的特殊性质，即只有一个元素出现偶数次。我们没有利用问题定义的这种特殊性质，这使得存在更好（更聪明）算法的可能性成为可能，但最终也必须是 O(N)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T10:21:58.160

请参阅以下文章：[在 O(n) 时间内运行并在原地排序的排序算法](https://stackoverflow.com/questions/5688484/sorting-algorithm-that-runs-in-time-on-and-also-sorts-in-place)，假设最大位数是恒定的，我们可以在 O(n) 时间内对数组进行原地排序。

之后就是计算每个数字的出现次数，平均需要 n/2 时间才能找到出现次数为偶数的数字。*

# sql - 根据条件查询匹配的股票交易买卖双方

> ID：12342749
> 
> 赞同：0
> 
> 时间：2012-09-09T20:37:02.367
> 
> 标签：sql, sql-server, sql-server-2008

我正在尝试创建一个存储过程来匹配虚假股票市场程序的买家和卖家。我最终想用它来填充交易表以完成人们的订单。这也将在 SQL Server 代理作业中。这是我的表：

```
Id    UserId    Type    QtyRemaining    Price   CreatedOn
1      3        BUY     50              1.00    2012-09-09 05:25:48.4470000
2      6        BUY     50              1.00    2012-09-09 19:25:34.4300000
3      5        SELL    30              1.00    2012-09-09 19:22:59.5900000
4      3        SELL    50              0.90    2012-09-09 06:39:34.9100000
5      2        SELLALL 50              1.00    2012-09-09 04:10:01.8400000 
```

进行这些匹配需要满足几个条件：

1.  如果是“卖出”订单，买方必须寻找具有 >= 买方想要的股份数量的卖方。如果是“SELLALL”订单，则买方购买股票的数量必须相等。例如，卖方必须卖出 50 股，而买方必须以相同或更低的价格买入 50 股。
2.  买家想要股票的最低价格。
3.  如果有多个卖家符合上述条件，买家先在最低价格后购买最旧的销售库存。

所以交易者对将是#1 和#4、#2 和#5。因此#3 仍将处于未决状态。

这是我正在使用的代码，但我无法让它与最低价格和最旧的优先匹配：

```
select o.*, oa.*, r.* from [Order] o
join OrderActivity oa on o.Id = oa.OrderId
join (
    select o2.Id, o2.VideoId, o2.UserId, oa2.Price, oa2.QtyRemaining, o2.[Type] from [Order] o2
    join OrderActivity oa2 on o2.Id = oa2.OrderId
    where o2.Type = 'buy' and oa2.Status = 'open'
) as r on (o.VideoId = r.VideoId and oa.Price <= r.Price and r.QtyRemaining = oa.QtyRemaining and o.UserId != r.UserId)
where (o.Type = 'sell' or o.Type = 'sellall') and oa.Status = 'open' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T10:37:06.667

试试这个

简要地 ，

1.根据createddate对买家进行排名（以下查询中称为stocks）
2.根据价格对卖家进行排名，createddate（称为lowNoldstock）
3.获取**匹配排名**

```
select stocks.*,lowNoldStock.* 
from    (select *,row_number() over(order by createdon) as buyerrank
         from stocktable(nolock)  where c='buy' ) stocks 
inner join 
       (select  *,row_number() over(order by price,createdon) as sellerrank
        from stocktable(nolock) where [type]='sell' or [type]='sellall' ) lowNoldstock
on      (stocks.qty<=lowNoldStock.qty and lowNoldStock.type='sell') 
       or (lowNoldStock.type='sellall' and stocks.qty=lowNoldStock.qty and stocks.price>=lowNoldStock.price)
where  lowNoldStock.sellerrank=stocks.buyerrank 
```

[sql fiddle 中的测试脚本](http://sqlfiddle.com/#!3/ece20/7/0)，由于某种原因，它在 sql fiddle 中显示部分结果这适用于我的本地数据库

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T00:56:05.627

欢迎你玩这个：

```
declare @Transactions as Table
  ( Id Int, UserId Int, Type VarChar(8), QtyRemaining Int, Price Money, CreatedOn DateTime )
insert into @Transactions ( Id, UserId, Type, QtyRemaining, Price, CreatedOn ) values
  ( 1, 3, 'BUY',     50, 1.00, '2012-09-09 05:25:48.447' ),
  ( 2, 6, 'BUY',     50, 1.00, '2012-09-09 19:25:34.430' ),
  ( 3, 5, 'SELL',    30, 1.00, '2012-09-09 19:22:59.590' ),
  ( 4, 3, 'SELL',    50, 0.90, '2012-09-09 06:39:34.910' ),
  ( 5, 2, 'SELLALL', 50, 1.00, '2012-09-09 04:10:01.840' )

-- Split the transactions into temporary working tables.
declare @Buyers as Table
  ( Id Int, UserId Int, Type VarChar(8), QtyRemaining Int, Price Money, CreatedOn DateTime )
declare @Sellers as Table
  ( Id Int, UserId Int, Type VarChar(8), QtyRemaining Int, Price Money, CreatedOn DateTime )
insert into @Buyers
  select Id, UserId, Type, QtyRemaining, Price, CreatedOn
    from @Transactions
    where Type = 'BUY'
insert into @Sellers
  select Id, UserId, Type, QtyRemaining, Price, CreatedOn
    from @Transactions
    where Type like 'SELL%'

-- Process the buy orders in the order in which they were created.
declare @BuyerId as Int = ( select top 1 Id from @Buyers order by CreatedOn )
declare @SellerId as Int
declare @Balance as Int

while @BuyerId is not NULL
  begin
  -- Pair a seller, if possible, with the current buyer.
  ; with Willard as (
  select Row_Number() over ( order by S.Price, S.CreatedOn ) as Priority,
    S.Id as S_Id, S.QtyRemaining as S_QtyRemaining,
    B.QtyRemaining as B_QtyRemaining
    from @Sellers as S inner join
      @Buyers as B on B.Id = @BuyerId and
        case 
          when S.Type = 'SELL' and B.QtyRemaining <= S.QtyRemaining then 1
          when S.Type = 'SELLALL' and B.QtyRemaining = S.QtyRemaining then 1
          else 0
          end = 1
    ) 
  select @SellerId = S_Id, @Balance = S_QtyRemaining - B_QtyRemaining
    from Willard
    where Priority = 1
  -- Display the result.
  select @BuyerId as BuyerId, @SellerId as SellerId, @Balance as RemainingShares
  -- Update the working tables.
  if @Balance = 0
    delete from @Sellers
      where Id = @SellerId
  else
    update @Sellers
      set QtyRemaining = @Balance
      where Id = @SellerId
  delete from @Buyers
    where Id = @BuyerId
  -- Find the next buy order.
  set @BuyerId = ( select top 1 Id from @Buyers order by CreatedOn )
  end

-- Display any unfilled orders.
select 'Unmatched Buy', *
  from @Buyers
select 'Unmatched Sell', *
  from @Sellers 
```

# behat - Behat 2.4 升级问题，或“behat”下无法识别的选项“extensions” - 尝试通过 behat.yml 激活 sahi 扩展时出错

> ID：12342758
> 
> 赞同：2
> 
> 时间：2012-09-09T20:38:14.400
> 
> 标签：behat, sahi, mink

Behat 的东西相当新，我遇到了一个我似乎无法绕过的障碍。我一直在盯着文档，在谷歌上搜索就像这是我的工作，并尽我所能避免把我的电脑从防火梯上扔掉。

我正在处理一个相当复杂的项目，而我不是设置它的人。所以我在某些方面有点迷茫。

目前，我正在尝试使用 Sahi 驱动程序，因为 selenium 并没有为我需要测试的一些动态形式削减它。我可以使用默认的 selenium 驱动程序很好地运行测试，但测试失败，因为它没有充分触发表单输入上的 JavaScript 事件。具体来说，它将与该链接中涵盖的解决方法一起使用，但前提是我将浏览器放在焦点上。这意味着当测试在酱汁中或通过 jenkins 与 xvfb 运行时，它会失败。

我解释这一切只是因为这是我的更大问题，我试图通过使用 Sahi 驱动程序来解决这个问题。这让我想到：

```
[Symfony\Component\Config\Definition\Exception\InvalidConfigurationException]  
Unrecognized options "extensions" under "behat" 
```

这就是我尝试按照文档所说的方式为我的 bahat.yml 中的特定配置文件激活 Sahi 驱动程序时得到的结果。

这是默认配置文件和我当前在我的 behat.yml 中使用的配置文件（稍作修改以供公众使用）：

```
 default:
        paths:
            features: 'features'
            bootstrap: '%behat.paths.features%/bootstrap'

    sahi:
        extensions:
            Behat\MinkExtension\Extension:
                 sahi:    ~
        context:
            class: 'FeatureContext'
            parameters:
                environment: 'staging'
                mink: 'sahi' 
```

Fwiw，测试在一个 vm 上，我 ssh -X 进入，然后使用运行测试

```
$ behat --tags @test_name_tag --profile=sahi 
```

当我使用默认的 selenium 驱动程序和 @javascript 标签时，浏览器会弹出并且测试运行并通过（当然，假设我保持浏览器处于焦点）。

我使用 composer 安装了额外的驱动程序：

```
 {
        "require": {
                "behat/behat": "2.4.*@stable",
                "behat/mink": "1.4@stable",
                "behat/mink-extension": "*",
                "behat/mink-selenium2-driver": "*",
                "behat/mink-sahi-driver": "*"
        }
    } 
```

我已经添加`use Behat\Mink\Driver\SahiDriver;`到我的 MinkContext.php、EnvironmentContext.php 和 FeatureContext.php，虽然我猜这可能是矫枉过正或没有必要。不过，在这一点上似乎没有什么不同。无论有没有它，我都会遇到同样的错误。

我还添加了一个`sahi.php`位于 features/bootstrap/mink 中的：

```
 <?php

    return
    array(
        'default_session' => 'sahi',
        'sahi' => array(
            'capabilities' => array(
                'browserName' => 'firefox',
                'browserVersion' => 7,
            ),
        ),
    ); 
```

`exensions`我想也许出于某种原因在 features/bootstrap 中添加一个目录可能会有所帮助。甚至在其中插入了一个名为`sahi.php`. 那没有多大帮助。

我认为这涵盖了一切。提前感谢您的帮助，如果其他地方对此有所帮助，请指导我，因为我已经花了无数个小时寻找并没有找到任何可以帮助我的东西。

更新：

[我按照此https://lestbddphp.wordpress.com/2012/08/31/behatcomposer/](https://lestbddphp.wordpress.com/2012/08/31/behatcomposer/)卸载了旧版本的 behat、mink 和 gherkin，并安装了 2.4 等

我一直在通过文档中的“从 Behat 2.3 迁移到 2.4”。（抱歉，不允许我发布更多链接，但它在 Behat 官方文档中。）

我的`composer.json`：

```
{
  "require": {
    "behat/behat": "2.4.*@stable",
    "behat/mink": "1.4@stable",
    "behat/mink-goutte-driver": "*",
    "behat/symfony2-extension": "*",
    "symfony/class-loader": "2.1.*",
    "symfony/form": "2.1.*",
    "symfony/validator": "2.1.*",
    "behat/mink-selenium-driver": "*",
    "behat/mink-selenium2-driver": "*",
    "behat/mink-extension": "*",
    "behat/mink-sahi-driver": "*"
  },
  "minimum-stability": "dev",
  "config": {
    "bin-dir": "bin/"
  }
} 
```

我`behat.yml`按照指示将文件移动到项目的根目录。我将我的`default`个人资料更新为：

```
default:
    paths:
        features: 'features'
        bootstrap: '%behat.paths.features%/bootstrap'
    extensions:
      Behat\Symfony2Extension\Extension:
        mink_driver: true
        kernel:
          env: test
          debug: true
      Behat\MinkExtension\Extension:
        default_session: symfony2
        sahi:    ~ 
```

虽然我不完全确定这就是我需要的。只需按照文档中给出的示例进行即可。

我更新了我`vendor/autoload.php`的替换`require_once`为`require`：

```
<?php

// autoload.php generated by Composer

require __DIR__ . '/composer' . '/autoload_real.php';

return ComposerAutoloaderInit::getLoader(); 
```

但我对此有点困惑，因为该文件[与 docs 中的示例代码](http://extensions.behat.org/symfony2/migrating_from_2.3_to_2.4.html#including-autoloader-from-composer)不同。如果我要在此处的文档中添加该行，而不是已经存在的内容，那么它只会加载自己。（我试过了。它吐了。）我是不是完全密集，还是这里的措辞令人困惑/误导？我做对了吗？

正如我之前提到的，我有 3 个上下文文件`features/bootstrap`：

```
FeatureContext.php
EnvironmentContext.php
MinkContext.php 
```

通过 cli 运行测试时，我将它传递`--profile`给`behat.yml`. 在几乎所有的配置文件中，`FeatureContext`都使用了。

```
 context:
        class: 'FeatureContext' 
```

`FeatureContext`然后得到`EnvironmentContext`and `MinkContext`，据我所知。所以，理论上，一切都应该在那里工作。

只是它不是。

```
$  bin/behat --profile=sahi

  [ReflectionException]           
  Class AppKernel does not exist 
```

在我添加所有 Symfony 的东西之前，我得到了这个：

```
Warning: require(Behat\Symfony2Extension\Extension): failed to open stream: No such file or directory in /path/to/project/vendor/behat/behat/src/Behat/Behat/Extension/ExtensionManager.php on line 112

Fatal error: require(): Failed opening required 'Behat\Symfony2Extension\Extension' (include_path='/usr/share/pear:/usr/share/php:/usr/share/git core/templates/hooks:.') in /path/to/project/vendor/behat/behat/src/Behat/Behat/Extension/ExtensionManager.php on line 112 
```

这就是为什么我通过作曲家添加 Symfony 的东西。

还可能值得注意的是：当我忘记通过作曲家安装 Symfony 的东西之前给它传递一个 --profile 时，我得到了这个：

```
Notice: Undefined index: environment in /home/lbaron/development/BeHat-Functional/features/bootstrap/FeatureContext.php on line 43

Warning: include(/path/to/project/features/bootstrap/environment/.php): failed to open stream: No such file or directory in /path/to/project/features/bootstrap/FeatureContext.php on line 44

Warning: include(): Failed opening '/path/to/project/features/bootstrap/environment/.php' for inclusion (include_path='/usr/share/pear:/usr/share/php:/usr/share/git-core/templates/hooks:.') in /path/to/project/features/bootstrap/FeatureContext.php on line 44

Catchable fatal error: Argument 1 passed to EnvironmentContext::__construct() must be an array, boolean given, called in /path/to/project/features/bootstrap/FeatureContext.php on line 44 and defined in /path/to/project/features/bootstrap/EnvironmentContext.php on line 27 
```

我想这是可以预料的。

所以我现在很茫然。想法？

我将继续努力，看看我是否能弄清楚，但任何想法/输入将不胜感激。

再次更新：

从 yml 中删除扩展部分给了我这个：

```
Catchable fatal error: Argument 2 passed to Symfony\Component\BrowserKit\Client::__construct() must be an instance of Symfony\Component\BrowserKit\History, array given, called in /usr/share/pear/mink/src/Behat/Mink/Behat/Context/MinkContext.php on line 163 and defined in /home/lbaron/development/BeHat-Functional/vendor/symfony/browser-kit/Symfony/Component/BrowserKit/Client.php on line 52 
```

behat.yml 的当前状态：

```
default:
    paths:
        features: 'features'
        bootstrap: '%behat.paths.features%/bootstrap'
    formatter:
        parameters:
            language: 'en'
    extensions:
      Behat\MinkExtension\Extension:
          sahi: ~
          goutte: ~ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T08:22:31.917

您正在运行比 2.4（当前版本）更旧的 behat 版本。我可以说是因为您使用的命令是“behat”而不是“bin/behat”。旧版本具有不同的体系结构并且不使用扩展。behat.org 网站上的文档都是新的 2.4 版本，据我所知，不再提供旧版本的文档。[您应该将您的 behat 版本升级到 2.4，这里](http://extensions.behat.org/symfony2/migrating_from_2.3_to_2.4.html)有关于如何执行此操作的指南

# c# - 变量未声明或从未分配警告

> ID：12342760
> 
> 赞同：6
> 
> 时间：2012-09-09T20:38:37.673
> 
> 标签：c#, .net, winforms

我有这样的代码：

这是基类：

```
public class BaseClass : UserControl
{
     protected ListView list;
     protected TreeView tree;

     public BaseClass()
     {
         //...
     }
     //...
} 
```

儿童班

```
public partial class MyClass : BaseClass
{
     public MyClass()
     {
         InitializeComponent();
         this.BackColor = VisualStyleInformation.TextControlBorder;
         this.Padding = new Padding(1);
     }
     //...
}

partial class MyClass
{
    //...

    private void InitializeComponent()
    {
         this.tree = new System.Windows.Forms.TreeView();
         this.list = new System.Windows.Forms.ListView();
         //...
         this.tree.Location = new System.Drawing.Point(0, 23);
         this.tree.Name = "blablabla";
    }
} 
```

和警告：

```
Warning 1 The variable 'tree' is either undeclared or was never assigned.
Warning 2 The variable 'list' is either undeclared or was never assigned. 
```

我究竟做错了什么 ？该变量在基类中声明，并在子类中分配。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-03-14T08:16:15.230

这个问题没有*答案*，所以这里......

**重建解决方案然后重新启动 Visual Studio**为我工作:-)

感谢[**SLaks**](https://stackoverflow.com/users/34397/slaks)的上述评论。

也在讨论：

[stackoverflow.com - 变量“variable_name”要么未声明，要么从未分配。](https://stackoverflow.com/questions/8521600/the-variable-variable-name-is-either-undeclared-or-was-never-assigned)

[social.msdn.microsoft.com - 变量“control_name”未声明或从未分配。](http://social.msdn.microsoft.com/Forums/windows/en-US/4718ac1f-7443-423c-81d2-25059fec444d/the-variable-controlname-is-either-undeclared-or-was-never-assigned#0ececae7-fc50-4257-b80b-aecce43fb9ab)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-11-05T22:02:10.137

我和设计师遇到了这个问题，每次的主要原因是我的解决方案是为 x64 输出设置的。目前，设计人员无法处理 x64 解决方案集中的控件，因此您需要将其更改为 Any CPU，进行编辑，然后将其更改回 x64 以进行运行/调试。

# html - 渐变然后颜色背景？

> ID：12342761
> 
> 赞同：1
> 
> 时间：2012-09-09T20:38:38.803
> 
> 标签：html, css

我想让一个css`background-image`成为一个从上到下的渐变，然后是一个颜色。例如，如果我想要顶部为 #FF0000 的渐变，距离顶部 400 像素的 #00FF00 ，然后立即切换到 #EFEFEF，该怎么做？`background-image-repeat`我可以使用某种形式吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-09T20:44:18.337

实际属性称为`background-repeat`。您需要结合使用它`background-size`来将渐变限制为 400 像素高并防止其平铺：

```
html {
    background-color: #efefef;
    background-image: linear-gradient(#ff0000, #00ff00);
    background-repeat: no-repeat;
    background-size: 100% 400px;
} 
```

[jsFiddle 预览](http://jsfiddle.net/BoltClock/dGCJs)

当然，这假设您使用的是 CSS3 渐变，在这种情况下，浏览器支持不是问题，因为所有实现 CSS3 渐变的浏览器也都实现了`background-size`. 但是，如果您使用图像文件作为渐变并且需要支持旧版浏览器，则必须创建一个额外的元素或具有适当高度和位置的伪元素，以仅包含渐变。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-09T20:43:59.977

是的，使用`background-color`和渐变，设置正确的`background-repeat`& `background-size`。

[**演示**](http://dabblet.com/gist/3687162)

```
background: #EFEFEF linear-gradient(#FF0000, #00FF00) repeat-x;
background-size: 1px 400px; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T02:37:40.470

为您的渐变添加第三个停止也是一种选择（如果有支持渐变但不支持背景大小的浏览器）。将第 2 和第 3 个停靠点放置在 400 像素处，将第 3 个渐变的颜色作为您想要的背景颜色。

# windows - 如何使用 COPY 命令附加到文件

> ID：12342764
> 
> 赞同：18
> 
> 时间：2012-09-09T20:39:03.703
> 
> 标签：windows, batch-file, cmd, windows-7-x64

我正在运行 Windows 7 Ultimate x64，但我的经验可以追溯到 DOS 3.0。

由于与 DOS 3.1 一样，您可以使用 COPY 命令将文件附加到另一个文件：

```
COPY FILE1+FILE2=FILE1 
```

不需要临时 FILE3。

这是一个非常方便的命令，因为每当您添加新程序时，您经常需要更新您的`CONFIG.SYS`和`AUTOEXEC.BAT`文件。

过去，获得正确的顺序也很重要，否则您最终会得到一个空的 FILE1。

但是今天当我尝试这样做时，它没有受到`FILE1`影响，当我颠倒顺序时，它（可以理解）`FILE1` 复制了`FILE2`.

有谁知道它是否已被另一种方法取代，以及何时发生这种变化？

**编辑：**

我一直在做更多的测试，奇怪的是，即使上面的代码不起作用，你仍然可以从控制台复制并将其附加到现有文件中，如下所示：

```
copy file1+con=file1
Type some text to append to file1
^Z ([CTRL]+Z the End Of File character) 
```

我想知道我的 Windows 版本是否以某种方式搞砸了。任何机构都可以复制我的发现吗？

**编辑：**

它适用于 95 / 98 / ME / 2000 / XP / XP Mode / 7 Professional x64 / 8 x64。所以我想这不是`7 Ultimate x64`问题，而是我的机器的问题。

***叹息 *

**编辑：**

最后一次编辑，我保证。:)

这不是我的机器的问题，而是 File1 的问题。显然，当我第一次将 File2 附加到它时，[CTRL]+Z（EOF 字符）从未被覆盖，导致文件如下所示：

```
Original Data
Original Data
[EOF]
Appended Data
Appended Data
Appended Data 
```

您可以在命令提示符下通过以下实验自己复制它。（其中 ^Z 是字符 [CTRL]+Z ）

在命令提示符下键入：

```
copy con file1
File One
^Z^Z

copy con file2
File Two
^Z

copy con file3
File Three
^Z

copy file1+file2=file1

copy file2+file3=file2

TYPE file1
TYPE file2 
```

你会看见：

`file1`

```
File One 
```

`file2`

```
File Two
File Three 
```

您可以`type file2 >> file1`或使用几乎任何其他连接文件的方法，当您键入时，`file1`它仍然只会显示包含`File One`. 但是如果你`FIND "searchterm" file`用来解析文件，它会告诉你真正发生了什么。在这种情况下类型：

```
FIND " " file1 
```

您将获得以下奖励：

```
---------- FILE1
File One
→File Two 
```

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-09-09T21:10:43.603

视窗 8 x86：

```
微软视窗 [版本 6.2.9200]
(c) 2012 年微软公司。版权所有。

C:\Users\Nikos>echo foo>file1

C:\Users\Nikos>回显栏>file2

C:\Users\Nikos>copy /b file1 + file2 file1
文件 1
文件2
        已复制 1 个文件。

C:\Users\Nikos>输入文件1
富
酒吧

```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-09T20:44:37.087

关于什么`type file2 >> file1`

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-05-14T09:53:05.617

回答：“**如何使用 COPY 命令附加到文件**”

**警告**：如果您有一个希望通过 COPY 命令组合的文件列表，这很简单，但可能会破坏您的文件。

**危险的方式**：

`copy /b one + two + three`-- 将 "two" 和 "three" 的内容附加到文件 "one" 。所以原来的“一”现在有3个文件的内容，顺序正确。如果在复制过程中出现问题，您将无法恢复原始“一个”，因为它会损坏并且您的数据基本上会丢失。几乎没有理由使用这种方式。

**安全方式**：

`copy /b one + two new_filename`-- 将合并 2 个文件（当然你可以列出两个以上），创建一个包含“一个”和“两个”的新文件名，并按正确的顺序保留原始文件。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-09T22:18:41.680

确保从从未尝试复制的新文件开始。
我刚刚发现在我的（XP sp3）上`copy a+b a`没有`/b`附加`1A`（`SUB`）到文件末尾，这使得它从输出中消失后的任何内容`type`（但`more`会显示它）。`Copy /b a+b a`作品。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-09-03T14:06:42.853

```
@echo off

cls

type "file2.txt" >> "file1.txt"

exit 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-09-09T20:59:50.040

你试过了吗`copy /b file1 + file2 file1`

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-09-09T21:06:02.390

`copy /b input1 + input2 output`
`del input1`
`ren output input1`
也许这个？:P

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-09-09T21:15:45.890

```
C:\Users\Nikos>输入文件1
富
酒吧

C:\Users\Nikos>复制文件1+con=file1
文件 1
骗局
伊堆
奥希德
^Z
        已复制 1 个文件。

C:\Users\Nikos>输入文件1
富
酒吧
伊堆
奥希德

```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2015-08-28T05:25:10.377

等待！还有更多！(Win7 专业版)

```
>ver

Microsoft Windows [Version 6.1.7601]

>copy file.a.txt + file.b.txt file.ab.txt
file.a.txt
1 file(s) copied

>copy fileA.txt + fileB.txt fileAB.txt
fileA.txt
fileB.txt
1 files(s) copied 
```

撇开“已复制 1 个文件”通知不谈，它只是不喜欢名称有趣的文件。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2019-01-23T11:03:33.410

复制到二进制文件...

将所有文件放在同一个文件夹中，例如`G:\Files`

```
g:
cd Files
copy /B *.* TargetFilename.ext 
```

并且`.ext`是所需的文件类型

* * *

## 回答 #11

> 赞同：-2
> 
> 时间：2014-10-17T15:14:49.757

1.  将所有文件放在同一个文件夹中。
2.  `copy *.* ´target.ext'`
3.  ？？？
4.  利润！

# android - websockets 在移动应用程序中是否可以在不连接浏览器的情况下工作？

> ID：12342765
> 
> 赞同：0
> 
> 时间：2012-09-09T20:39:30.820
> 
> 标签：android, iphone, html, cordova, websocket

我正在用原生 html/css/javascript 编写一个应用程序，它几乎可以在每个主要的移动平台上运行。我正在使用 websockets 进行客户端-服务器通信。
我已经在 pc 上进行了测试，它可以完美运行，但我不知道它是否可以在不使用浏览器的情况下在移动设备（iphone、android 等）上运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T20:59:49.837

CanIUse.com 是解决这类问题的好网站。

[http://caniuse.com/#search=websocket](http://caniuse.com/#search=websocket)

可悲的是，websockets 没有在 Android 上实现。PhoneGap Android 可能有一个插件，但我没有使用过。

# sql - 在 xml 列中搜索多个值

> ID：12342767
> 
> 赞同：0
> 
> 时间：2012-09-09T20:39:47.670
> 
> 标签：sql, xml, xquery-sql

环境：SQL Server 2012。主要和次要（值）索引建立在 xml 列上。

假设我有一个带有 xml 列 WordIndex 的表 Message。我还有一个包含 WordId 和 WordText 的表格 Word。Message.WordIndex 的 XML 具有以下架构：

```
<xs:schema attributeFormDefault="unqualified"
           elementFormDefault="qualified"
           xmlns:xs="http://www.w3.org/2001/XMLSchema"
           targetNamespace="http://www.example.com">
    <xs:element name="wi">
        <xs:complexType>
            <xs:sequence>
                <xs:element maxOccurs="unbounded" name="w">
                    <xs:complexType>
                        <xs:sequence>
                            <xs:element maxOccurs="unbounded" name="p" type="xs:unsignedByte" />
                        </xs:sequence>
                        <xs:attribute name="wid" type="xs:unsignedByte" use="required" />
                    </xs:complexType>
                </xs:element>
            </xs:sequence>
        </xs:complexType>
    </xs:element>
</xs:schema> 
```

以及一些与之相关的数据：

```
<wi xmlns="http://www.example.com">
  <w wid="1">
    <p>28</p>
    <p>72</p>
    <p>125</p>
  </w>
  <w wid="4">
    <p>89</p>
  </w>
  <w wid="5">
    <p>11</p>
  </w>
</wi> 
```

我需要使用 OR 或 AND 在我的 xml 列 WordIndex 中搜索多个值。我所做的是相当初级的，因为我是 XQuery 中的 n00b（取自调试输出，因此是真实值）：

```
with xmlnamespaces(default 'http://www.example.com')
select
    m.Subject,
    m.MessageId,
    m.WordIndex.query('
        let $dummy := 0
        return
            <word_list>
            {
                for $w in /wi/w
                    where $w/@wid=64
                    return <word wid="64" pos="{data($w/p)}"/>
            }
            {
                for $w in /wi/w
                    where $w/@wid=70
                    return <word wid="70" pos="{data($w/p)}"/>
            }
            {
                for $w in /wi/w
                    where $w/@wid=63
                    return <word wid="63" pos="{data($w/p)}"/>
            }
            </word_list>
        ') as WordPosition
from
    Message as m
-- more joins go here ...
where
    -- more conditions go here ...
    and m.WordIndex.exist('/wi/w[@wid=64]') = 1
    and m.WordIndex.exist('/wi/w[@wid=70]') = 1
    and m.WordIndex.exist('/wi/w[@wid=63]') = 1 
```

如何优化？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T21:35:52.680

不确定我是否理解您的预期结果，但您可以使其更加通用和数据驱动（例如使用 sql:column 或 sql:variable）。尝试这样的事情：

```
declare @wids table ( wid INT PRIMARY KEY )

insert into @wids ( wid )
values ( 64 ), ( 70 ) 

;with xmlnamespaces(default 'http://www.example.com') 
select 
    m.Subject, 
    m.MessageId, 
    m.WordIndex.query(' 
        return 
            <word_list> 
            { 
                for $w in /wi/w
                where $w/@wid = sql:column("w.wid")
                return <word wid="{$w/@wid}" pos="{data($w/p)}"/> 
            } 
            </word_list> 
        ') as WordPosition 
from 
    Message as m
    cross apply @wids w 
where m.WordIndex.exist('wi/w[@wid=sql:column("w.wid")]') = 1 
```

# android - 安卓谷歌地图动态标记

> ID：12342768
> 
> 赞同：0
> 
> 时间：2012-09-09T20:39:57.857
> 
> 标签：android, google-maps

我想在我的地图叠加层中添加一个标记（项目）。我的问题是我的标记设置为 ImageView 布局。它有一个 9 补丁 png 作为背景，用户的 Facebook 个人资料图片作为 src。

我的问题是我懒惰下载个人资料图片。如果还没有加载，我会在 src 中放置一个临时图像，然后抛出 AsyncTask 我正在从 Facebook 下载个人资料图片。当图片下载后，我想把它放在标记中..

我该怎么做 ？在所有方法中，标记都将 Drawable 作为对象...

也许与 LayerDrawable 有关？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T14:10:37.380

覆盖类应该像下面

```
public class MapItemOverlay extends ItemizedOverlay<OverlayItem> {

    private ArrayList<OverlayItem> mOverlays = new ArrayList<OverlayItem>();
    private Context mContext;
    private JSONArray marrJson;
    private JSONObject mjsonObj;

    public MapItemOverlay(Drawable defaultMarker, JSONArray arrJson,
            Context context) {
        super(boundCenterBottom(defaultMarker));
        marrJson = arrJson;
        mContext = context;
    }

    public void addOverlay(OverlayItem overlay) {
        mOverlays.add(overlay);
        populate();
    }

    @Override
    protected OverlayItem createItem(final int i) {

        OverlayItem result = mOverlays.get(i);

        LayerDrawable marker = (LayerDrawable) mContext.getResources()
                .getDrawable(R.drawable.marker);

        GetFBImageTask task = new GetFBImageTask(i, marker, result);
        task.execute(new Void[] {});

        result.setMarker(boundCenter(marker));

        return result;
    }

    @Override
    public int size() {
        return mOverlays.size();
    }

    public MapItemOverlay(Drawable defaultMarker, Context context) {
        super(boundCenterBottom(defaultMarker));
        mContext = context;
    }

    @Override
    protected boolean onTap(int index) {
        return true;
    }

    public class GetFBImageTask extends AsyncTask<Void, Void, LayerDrawable> {
        private LayerDrawable marker;
        private OverlayItem result;
        private int index;

        public GetFBImageTask(int i, LayerDrawable Mmarker, OverlayItem result1) {
            marker = Mmarker;
            result = result1;
            index = i;
        }

        @Override
        protected void onPostExecute(LayerDrawable bmp) {
            super.onPostExecute(bmp);
            if (bmp != null) {
                result.setMarker(boundCenter(bmp));
            }

        }

        @Override
        protected LayerDrawable doInBackground(Void... p) {

try {

Bitmap bmp = null;
                        String[] params = new String[2];
                params[0] = "http://your image url";
                params[1] = your image name;
                URL ulrn = new URL(params[0]);
                HttpURLConnection con = (HttpURLConnection) ulrn
                                    .openConnection();
                InputStream is = con.getInputStream();
                bmp = BitmapFactory.decodeStream(is);

if (null != bmp) {

    if (params[1] != null) {
                    OutputStream fOut = null;
                    File file = new File(Preference.ImagePath,                                              params[1] + ".jpg");

        if (!file.exists()) {
                            fOut = new FileOutputStream(file);
                                 bmp.compress(Bitmap.CompressFormat.PNG,90, fOut);
                                             fOut.flush();
                                             fOut.close();
                        }
                    }

                }

if (bmp != null) {

                        Drawable photo = new BitmapDrawable(
                                mContext.getResources(), bmp);
                        marker.setDrawableByLayerId(
                                R.id.frame,
                                mContext.getResources().getDrawable(
                                        R.drawable.pa3_map_people_img1));
                        marker.setDrawableByLayerId(R.id.photo, photo);
                        marker.setLayerInset(1, 4, 4, 4, 11);
                        return marker;
                }

            } catch (Exception e) {

            }

            return null;
        }
    }

} 
```

* * *

drawble/marker.xml 应该像下面

```
<item
    android:id="@+id/frame"
    android:drawable="@drawable/pa3_map_people_img1"/>
<item
    android:id="@+id/photo"
    android:drawable="@drawable/pa3_map_people_img1"/> 
```

# javascript - 如何找到数组中的最大数

> ID：12342771
> 
> 赞同：0
> 
> 时间：2012-09-09T20:40:11.210
> 
> 标签：javascript, arrays

如何从我在数组中输入的数字中找到最大的数字？

我已经尝试过的事情：

```
var largest = Math.max.apply(Math, number[i]);
var smallest = Math.min.apply(Math, number[i]); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-09T20:42:16.073

你非常接近：

```
Math.max.apply(Math, number); 
```

您需要将数组的所有元素传递给`max()`方法；`[i]`在这里没有意义。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-09T20:56:54.210

Math.max.apply 是其他答案中所说的选项，但我认为 reduce 在语言中更常见：

```
var number=[1,2,3,2,1,1]; 
number.reduce(function(a,b){return a>b ? a : b;});
// returns 3
Math.max.apply(Math.max, number);
// returns 3 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-09T20:44:51.270

```
var max = number[0], i = 0;

for (i = 0; i < n; ++i) {
  if (number[i] > max) {
    max = number[i];
  }
} 
```

或者我推荐[underscore.js](http://underscorejs.org/#max)

```
var max = _.max(number); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-09T20:42:03.513

你很接近，试试这个：

```
Math.max.apply(Math.max, number); 
```

即，第二个参数将数组转换为参数列表。

（实际上，因为*Math.max*从来不需要*this*，所以你不需要*apply*的第一个参数；所以`Math.max.apply(null, number)`or`Math.max.apply('aaaaahhh', number)`也可以。）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-01-19T03:21:43.760

```
function compare(a, b) {

  if (a > b) return 1
  else if (a < b) return -1
  else return 0
}

var arr = [ 1, 2, 15, 12.5, 16, 3.35 ]

arr.sort(compare)

alert( arr[2] ) // your n number

// i used sort() but because by default it sorting in lexicographical order i 
passed it throuth custom comparisom , it works fine for me 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-04-12T06:25:44.877

使用 -`Array.prototype.reduce()`很酷！

`[267, 306, 108].reduce((acc,val)=> (acc>val)?acc:val)`

其中**acc = 累加器**和**val = 当前值**；

# java - 在 Android 中使用 Web 服务的 HTTP 客户端的最佳实现是什么

> ID：12342775
> 
> 赞同：0
> 
> 时间：2012-09-09T20:40:28.620
> 
> 标签：java, android, web-services, rest

我有以下 RESTful 代码，它可以访问此 Web 服务并发布一个值并获得回报。该代码有效，但是正如您所见，它位于 onCreate() 方法的 MainActivity 中。我不必详细说明这是一种不好的做法。那么，为了让应用程序具有最佳性能并且不会崩溃，我应该怎么做才能放置此代码。我想我正在寻找类似于设计模式的东西，以便使用 HTTPClient 来实现最强大的应用程序来使用 Web 服务。谢谢

[http://www.w3schools.com/webservices/tempconvert.asmx/CelsiusToFahrenheit](http://www.w3schools.com/webservices/tempconvert.asmx/CelsiusToFahrenheit)

```
public class MainActivity extends Activity {
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();
    StrictMode.setThreadPolicy(policy);

    BufferedReader in = null;
    try {
        HttpClient client = new DefaultHttpClient();
        HttpPost request = new HttpPost(
                "http://www.w3schools.com/webservices/tempconvert.asmx/CelsiusToFahrenheit");
        request.addHeader("Content-Type", "application/x-www-form-urlencoded");
        List<NameValuePair> postParameters = new ArrayList<NameValuePair>();
        postParameters.add(new BasicNameValuePair("Celsius", "77"));
        UrlEncodedFormEntity formEntity = new UrlEncodedFormEntity(postParameters);
        request.setEntity(formEntity);

        HttpResponse response = client.execute(request);

        in = new BufferedReader(new InputStreamReader(response.getEntity().getContent()));
        StringBuffer sb = new StringBuffer("");
        String line = "";
        String NL = System.getProperty("line.separator");
        while ((line = in.readLine()) != null) {
            sb.append(line + NL);
        }
        in.close();

        String page = sb.toString();
        // Log.i(tag, page);
        System.out.println(page);
    } catch (Exception e) {
        e.printStackTrace();
    } finally {
        if (in != null) {
            try {
                in.close();
            } catch (IOException e) {
                e.printStackTrace();
            }
        }
    }
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T20:46:58.387

我会将它放在一个类中并在其构造函数中设置所有内容并从活动中调用其方法。

# javascript - contains 是对象没有方法吗？

> ID：12342787
> 
> 赞同：2
> 
> 时间：2012-09-09T20:42:10.677
> 
> 标签：javascript, jquery

我正在尝试查找 JS 中的字符串中是否有某些字符

像那样 ：

```
$('.upld_btn').bind("click", function () {

    changeApiFormat($('#embbed').val());

});

if ($('#embbed.contains("?vid=")')) {
....

....
} 
```

我的谷歌浏览器控制台出现错误：

```
Object XXXX has no method 'contains' 
```

怎么会？！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-09T20:45:32.920

我假设`#embbed`是某种类型的输入值（因为您对`.val()`上面的调用）。所以，你也想在这里提取它的值，并使用`indexOf`（`-1`表示未找到）：

```
if ($("#embbed").val().indexOf('?vid=') != -1) { 
```

[这是一个说明概念验证的 jsFiddle](http://jsfiddle.net/V5qWp/)。在框中输入“Hi”或“aHia”或类似的内容（区分大小写）并单击链接，您将获得成功弹出窗口。否则你会得到一个失败的弹出窗口。

使用的代码：

```
​$(document).ready(function() {
    $(".clicky").click(function() {
        if ($("#input").val().indexOf('Hi') != -1) {
            alert("Contains 'Hi'!");​​​​​​​​​​​​​​​​​​​​​​​​​​​​​
        } else {
            alert("No luck!");
        }
        return false;
    ​}​);
});​ 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-09T20:45:30.180

要使用[**contains()**](http://api.jquery.com/contains-selector/)选择器，您的语法不正确，假设这是您要实现的目标：

```
if ($('#embbed:contains("?vid=")').length) {
    ....
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-09T20:45:21.240

请参阅[http://api.jquery.com/contains-selector/](http://api.jquery.com/contains-selector/)

它`:contains`不是`.contains`：

```
$('#embbed:contains("?vid=")') 
```

# r - 如何将文件导入R？

> ID：12342790
> 
> 赞同：9
> 
> 时间：2010-09-08T02:08:55.547
> 
> 标签：r

我是 R 的新用户，对不起，如果我的问题太基本了。我已经在 Windows 7 上安装了最新版本的 R，作为练习，我尝试使用打开一个 .txt 文件

```
students<-read.table("students.txt",header=T,sep="\t") 
```

但总是有如下错误信息：

```
Error in file(file, "rt") : cannot open the connection
In addition: Warning message:
In file(file, "rt") :
  cannot open file 'students.txt': No such file or directory 
```

我已经将目录更改为students.txt所在的目录；但它只是不起作用。请帮忙！

如果有人可以帮助我解决问题，请提前非常感谢。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2010-09-08T02:17:18.087

有[**一整本 R 手册专门针对数据导入/导出问题**](http://cran.r-project.org/doc/manuals/R-data.html)。

现在，如果您未能正确指定文件名和路径，`file.choose()`请改用允许您指向、单击和射击的功能：

```
students<-read.table(file.choose(),header=T,sep="\t") 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2010-09-08T02:12:15.320

错误消息是说它找不到 students.txt 文件。你应该尝试两件事：

1.  调用`getwd()`并确认文件在返回的目录中。
2.  尝试在`read.table()`调用中指定文件的完整路径。

查看`help("read.table")`有关该功能的更多详细信息。例如，您可能希望将默认值更改为`stringsAsFactors=FALSE`，具体取决于您的应用程序。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-09-09T20:46:52.047

如果您使用我强烈推荐的[RStudio](http://www.rstudio.org)，那么您可以使用它自己的目录创建一个项目。 `read.csv`然后默认情况下，朋友们会从该目录中读取，这使得一切变得简单而轻松。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-01-06T10:40:55.350

这适用于 R：

首先复制表格；然后打开R并输入：

```
c <- read.table("clipboard") 
```

然后按`Enter`。

# c++ - bzip2：写入正常，刷新正常，读取失败

> ID：12342795
> 
> 赞同：0
> 
> 时间：2012-09-09T20:42:50.443
> 
> 标签：c++, flush, bzip2

bzip2 1.0.6

任务：压缩网络数据包。问题：bzip2“BZ_FLUSH”不工作，只有“BZ_FINISH”工作，但我需要刷新当前数据并为每个连接保留流，而不是为每个数据包单独流。

此代码中有#if 预处理器标记：“#if 0”（现在是）使 bzip2 完成 - 它正在工作；"#if 1" 使 bzip2 刷新 - 不工作（永远卡在读取中）。

```
#include <bzlib.h>
#include <memory.h>
#include <assert.h>
#include <iostream>
using namespace std;

int main()
{
    typedef unsigned char U1;
    U1 temp[10000];
    size_t temp_count;

    U1 bbb[256];
    for ( size_t i=0; i<sizeof(bbb); ++i )
        bbb[i] = i;

    {
        bz_stream s;
        memset(&s,0,sizeof(s));
        BZ2_bzCompressInit(&s,1,4,0);
        s.next_in = (char*)&bbb[0];
        s.avail_in = sizeof(bbb);
        s.next_out = (char*)&temp[0];
        s.avail_out = sizeof(temp);
        do
        {
            int res = BZ2_bzCompress(&s,BZ_RUN);
            assert( res == BZ_RUN_OK );
            cout << "s.avail_in=" << s.avail_in << endl;
        }
        while ( s.avail_in );
#if 0
        do
        {
            int res = BZ2_bzCompress(&s,BZ_FLUSH);
            cout << "res=" << res << endl;
            cout << "s.avail_in=" << s.avail_in << endl;
            if ( res == BZ_RUN_OK )
                break;
            assert( res == BZ_FLUSH_OK );
        }
        while ( true );
#else
        do
        {
            int res = BZ2_bzCompress(&s,BZ_FINISH);
            cout << "res=" << res << endl;
            cout << "s.avail_in=" << s.avail_in << endl;
            if ( res == BZ_STREAM_END )
                break;
            assert( res == BZ_FINISH_OK );
        }
        while ( true );
#endif
        temp_count = sizeof(temp) - s.avail_out;
        BZ2_bzCompressEnd(&s);
        cout << "temp_count=" << temp_count << endl;
    }

    memset( &bbb[0], 0, sizeof(bbb) );

    {
        bz_stream s;
        memset(&s,0,sizeof(s));
        BZ2_bzDecompressInit(&s,4,0);
        s.next_in = (char*)&temp[0];
        s.avail_in = temp_count;
        s.next_out = (char*)&bbb[0];
        s.avail_out = sizeof(bbb);
        do
        {
            cout << "s.avail_in=" << s.avail_in << endl;
            int res = BZ2_bzDecompress(&s);
            cout << "res=" << res << endl;
            cout << "s.avail_out=" << s.avail_out << endl;
            if( res == BZ_OK )
                continue;
            assert( res == BZ_STREAM_END );
            assert( !s.avail_in );
            break;
        }
        while ( true );
        BZ2_bzDecompressEnd(&s);
    }

    for ( size_t i=0; i<sizeof(bbb); ++i )
        assert( bbb[i] == i );

    return 0;
} 
```

# javascript - 我如何让其他广告在谷歌网站上运行？例如 Adbrite 代码未链接图片

> ID：12342797
> 
> 赞同：1
> 
> 时间：2012-09-09T20:43:24.513
> 
> 标签：javascript, html, ads, sites

我使用 html 框并粘贴 adbrite 提供的代码。我对代码一无所知！但它似乎解析，没有红线。谷歌说 javascript 不能链接到图片，这是否意味着广告不起作用？我的网站是 www.blisstropic.tv 广告在标题下。在框中输入的代码如下。是否有应用程序或方法可以让其他广告发挥作用？我几乎无缘无故被禁止使用adsense！我以前喜欢谷歌，现在我想，呃不！

```
<!-- Begin: adBrite, Generated: 2012-09-09 15:57:20  -->
<script type="text/javascript">
var AdBrite_Title_Color = '00FF80';
var AdBrite_Text_Color = 'FF6FCF';
var AdBrite_Background_Color = '000000';
var AdBrite_Border_Color = '66B5FF';
var AdBrite_URL_Color = 'FFFFFF';
var AdBrite_Page_Url = '';
try{var AdBrite_Iframe=window.top!=window.self?2:1;var AdBrite_Referrer=document.referrer==''?document.location:document.referrer;AdBrite_Referrer=encodeURIComponent(AdBrite_Referrer);}catch(e){var AdBrite_Iframe='';var AdBrite_Referrer='';}
</script>
<span style="white-space:nowrap;"><script type="text/javascript">document.write(String.fromCharCode(60,83,67,82,73,80,84));document.write(' src="http://ads.adbrite.com/mb/text_group.php?sid=2209268&zs=3436385f3630&ifr='+AdBrite_Iframe+'&ref='+AdBrite_Referrer+'&purl='+encodeURIComponent(AdBrite_Page_Url)+'" type="text/javascript">');document.write(String.fromCharCode(60,47,83,67,82,73,80,84,62));</script>
<a target="_top" href="http://www.adbrite.com/mb/commerce/purchase_form.php?opid=2209268&afsid=1"><img src="http://files.adbrite.com/mb/images/adbrite-your-ad-here-banner.gif" style="background-color:#66B5FF;border:none;padding:0;margin:0;" alt="Your Ad Here" width="11" height="60" border="0" /></a></span>
<!-- End: adBrite --> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T01:24:46.160

您不能`<script>`在 Google 协作平台 HTML 框中使用标签，也不打算在 Google 协作平台中放置自己的广告。Google 协作平台旨在成为一个简单的网站创建者，不适用于大多数 HTML、属性和高级 CSS。

# objective-c - 将图像附加到录制的音频文件？

> ID：12342800
> 
> 赞同：0
> 
> 时间：2012-09-09T20:43:40.457
> 
> 标签：objective-c

在我使用 AVAudioRecorder 录制音频并将其存储在文件中后，我从应用程序将其通过电子邮件发送给用户。它工作正常。

但是，现在我需要拍摄我在应用程序中的图像并将其附加到视频中，然后通过电子邮件发送，因此当视频播放时，您将在播放器中看到该图像。

我怎样才能做到这一点？

谢谢。

我这样发送电子邮件：

```
NSArray *toRecipients = [NSArray arrayWithObject:@"your email"];
    [picker setToRecipients:toRecipients];

    NSString *sound=[NSString stringWithFormat:@"sound%d.caf",[memoryInstnace getLastRecordSoundNumber]];

    NSArray *paths2 = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *dataPath = [[paths2 objectAtIndex:0] stringByAppendingPathComponent:sound];
    NSData *data = [NSData dataWithContentsOfFile:dataPath];
    [picker addAttachmentData:data mimeType:@"caf" fileName:sound];// 
```

# android - 在 Android 应用程序中打包地图？

> ID：12342803
> 
> 赞同：0
> 
> 时间：2012-09-09T20:43:59.330
> 
> 标签：android, google-maps, osmdroid

我对这个话题进行了一些研究，发现最后一次被问到这个问题（特别是谷歌地图）时，答案是“这是非法的”。既然谷歌地图现在为您提供了自己进行离线缓存的能力，为什么它仍然是非法的？

无论如何，我有一个应用程序，我需要为（几平方英里）打包一张小地图。我已经考虑过做 osmdroid，但很难理解他们在做什么。我查看了他们的 SVN 存储库并在 Play 商店中查看了他们的示例应用程序，但很失望。该应用程序本身几乎完全符合我的需要，但它使用了一些奇怪的代码形式，未包含在 SDK 中。osmdroid 似乎是我目前最好的选择，但似乎没有太多可用的参考资料。

如果有人能指出我开始使用 osmdroid 的正确方向，或者只是其他一些允许打包地图的 SDK，我将不胜感激。

注意：我试过在 osmdroid 中做，但是做的时候

```
 mapView.setUseDataConnection(false); 
```

即使文件似乎位于正确的目录中，地图也不会加载任何内容（因为它也会在那里下载所有文件）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T21:05:38.317

要像 Google Maps 一样使用 Osmdroid，您只需要在项目中添加几个 jar 文件，其中一个是 osmdroid-android-3.0.x.jar（对于 x - 我使用了版本 5 和版本 7 ）。另一个 jar 是 slf4j-android-1.5.8.jar。（可能有这个的更高版本，不记得我从哪里得到它，但应该在某个地方的 Osmdroid 网站上有一个链接）。该代码与谷歌地图非常相似。这是我可以制作的最小的工作示例

```
package osmdemo.demo;

import org.osmdroid.tileprovider.tilesource.TileSourceFactory;
import org.osmdroid.util.GeoPoint;
import org.osmdroid.views.MapController;
import org.osmdroid.views.MapView;

import android.app.Activity;
import android.os.Bundle;

// This is all you need to display an OSM map using osmdroid
public class OsmdroidDemoMap extends Activity {

    private MapView         mMapView;
    private MapController   mMapController;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
            setContentView(R.layout.osm_main);
        mMapView = (MapView) findViewById(R.id.mapview);
        mMapView.setTileSource(TileSourceFactory.MAPNIK);
        mMapView.setBuiltInZoomControls(true);
        mMapController = mMapView.getController();
        mMapController.setZoom(13);
        GeoPoint gPt = new GeoPoint(51500000, -150000);
        //Centre map near to Hyde Park Corner, London
        mMapController.setCenter(gPt);

    }
}
/* HAVE THIS AS YOUR osm_main.xml
---------------------------------------------------------- XML START
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    >
    <org.osmdroid.views.MapView
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent" 
        android:layout_height="fill_parent"
        android:id="@+id/mapview"
        ></org.osmdroid.views.MapView>
</LinearLayout>
---------------------------------------------------------- XML END
Include slf4j-android-1.5.8.jar and osmdroid-android-3.0.5.jar in the build path
(Google search for where to get them from)
*/ 
```

至于离线缓存，请使用 Mobile Atlas creator (MOBAC) 制作感兴趣区域的 Osmdroid Zip 格式的 Atlas。我使用 OpenStreetMap 作为瓦片源。获得 zip 文件后，只需将其放入设备上的 Osmdroid 目录即可。它应该为您提供离线功能。我一直在伦敦的自己的应用程序中使用它，并关闭数据包数据，以降低数据下载（及其成本）。

# android - 如何为 WCF REST API 生成提到的 json 格式

> ID：12342805
> 
> 赞同：0
> 
> 时间：2012-09-09T20:44:11.893
> 
> 标签：android, gson, wcf-rest

有人可以帮助我提供一些关于如何在 Android 应用程序中使用 GSON 谷歌库构建我的 Json 字符串的代码，如下所述。

我已经使用 JsonStringer 生成了下面提到的字符串，如下所述。

```
 JSONStringer stringer = new JSONStringer()
                    .object()
                    .key("loginRequest")
                    .object()
                    .key("UserId").value("007")
                    .key("Password").value("125987563")
                    .key("LicenseKey").value("My Project Key")
                    .key("MobileId").value("This is mobile id")
                    .endObject()
                    .endObject();

{"loginRequest":{"UserId":"007","Password":"125987563","LicenseKey":"This is License Key","MobileId":"This is mobile id"}} 
```

请建议我如何使用 Gson 生成上述字符串。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T21:09:55.507

它几乎完全相同：

```
final StringWriter sw = new StringWriter();
new JsonWriter(sw)
.beginObject()
.name("loginRequest")
.beginObject()
.name("userId").value("007")
.name("password").value("123")
.endObject()
.endObject()
.close(); 
```

# python - pyqt4，功能静音/取消静音麦克风和扬声器 [PJSIP]

> ID：12342807
> 
> 赞同：0
> 
> 时间：2012-09-09T20:44:18.520
> 
> 标签：python, pyqt4, pjsip

# 你好朋友和同事

**我正在尝试为我在 pyt4 上的程序软电话和使用库 PJSIP 制作功能静音/取消静音麦克风和扬声器**

**我在代码 pjsip 中找到了这个**

### pjsip:

```
    def conf_set_tx_level(self, slot, level):
        """调整要从桥接器传输的信号电平到
        通过使其更响或更安静来指定端口。

        关键字参数：
        slot -- 整数，用于标识会议时隙号。
        level -- 信号电平调整。值 1.0 表示没有级别
                       调整，而值 0 表示静音端口。
        """
        lck = self.auto_lock()
        err = _pjsua.conf_set_tx_level(slot, level)
        self._err_check("conf_set_tx_level()", self, err)

    def conf_set_rx_level(self, slot, level):
        """调整从指定端口接收的信号电平
        （对桥）使声音变大或变小。

        关键字参数：
        slot -- 整数，用于标识会议时隙号。
        level -- 信号电平调整。值 1.0 表示没有级别
                       调整，而值 0 表示静音端口。
        """
        lck = self.auto_lock()
        err = _pjsua.conf_set_rx_level(slot, level)
        self._err_check("conf_set_rx_level()", self, err)

```

**好吧，我知道我需要发送一个参数 0，但怎么办？
并返回工作声音设备和麦克风。
也许是 """""pjsua_conf_adjust_tx_level(slot_number, 0 )"""""**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T13:59:11.387

**自己回答:-)**

**在我的情况下是这样的**

```
        # 调用窗口

        ################
        self.MuteMic = False
        self.MuteSpeaker = False
        ################

        #btn 信号
        self.connect(self.MuteUnmuteMicButton, QtCore.SIGNAL("clicked()"), self.MuteUnmuteMic)
        self.connect(self.MuteUnmuteSpeakerButton, QtCore.SIGNAL("clicked()"), self.MuteUnmuteSpeaker)

    def MuteUnmuteMic(self):
        尝试：
            如果 self.MuteMic：
                self.MuteMic = False
                self.parent().unmute_mic()
            别的：
                self.MuteMic = True
                self.parent().mute_mic()

        除了：
                调试（“ошибка при вызове функции включение или отключение микрофона（调用窗口）。”）

    def MuteUnmuteSpeaker(self):
        尝试：
            如果 self.MuteSpeaker：
                self.MuteSpeaker = False
                self.parent().unmute_speaker()
            别的：
                self.MuteSpeaker = True
                self.parent().mute_speaker()

        除了：
                调试（“ошибка при вызове функции включение или отключение микрофона（调用窗口）。”）

# 其他代码

----------

# ----------------------我的应用程序的核心
# ---导入 PJUA 库----

        def 静音麦克风（自我）：
            #this 在我的情况下你需要我的应用程序连接到 pjua“self.lib”
            self.lib.conf_set_rx_level(0,0)

            调试（“вызвана функция выключение микрофона”）
        def unmute_mic(self):
            self.lib.conf_set_rx_level(0,1)

        调试（“вызвана функция включение микрофона”）
        def 静音扬声器（自我）：         
            self.lib.conf_set_tx_level(0,0)

            调试（“вызвана функция выключение динамиков”）
        def unmute_speaker(self):
            self.lib.conf_set_tx_level(0,1)

        调试（“вызвана функция включение динамиков”）

```

# javascript - 从页面中删除脚本元素及其操作/事件

> ID：12342808
> 
> 赞同：1
> 
> 时间：2012-09-09T20:44:21.007
> 
> 标签：javascript, jquery

我的网页中有一个脚本元素不在我的标题中（我不知道这是否重要）

脚本.js

```
 $(function(){
    $('.test').click(function(){
      alert(' this button was clicked ! ');
    })
 }) 
```

我需要将其从我的页面中删除

```
var script = $('script[src$="js/script.js"]') ;
if(sript.length == 0 )
{
  alert(" script cannot be found  ");
}
else
{
  script.remove();
  alert(" done ! ");
} 
```

但在此之后我仍然可以在我的源代码中看到脚本，当我点击按钮时我仍然收到消息

**我不想取消绑定该按钮的单击事件。这只是一个例子，我想要脚本，所有的事件都消失了**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T20:46:26.197

您只需要取消绑定事件处理程序，例如：

```
$('.test').off('click') 
```

如果您有多个`click`附加处理程序 - 那么您需要使用`namespaces`对绑定/解除绑定进行更细粒度的控制

# ios - iOS - 在 iCarousel 中添加自定义 UIView

> ID：12342809
> 
> 赞同：0
> 
> 时间：2012-09-09T20:44:22.747
> 
> 标签：ios, icarousel

我正在尝试将自定义 UIViews（使用 Core Plot 绘制的图形）添加为 iCarousel 中的元素，但我没有看到正在绘制的图形。这是我的头文件：

```
@interface MTViewController : UIViewController <iCarouselDataSource, iCarouselDelegate,    

CPTBarPlotDataSource, CPTBarPlotDelegate>
@property (strong, nonatomic) IBOutlet iCarousel *aCarousel;
@property (strong, nonatomic) IBOutlet UILabel *label;
@property (nonatomic) BOOL wrap;
@property (strong, nonatomic) IBOutlet CPTGraphHostingView *graphView;

@property (nonatomic, retain) NSMutableArray *data;
@property (strong, nonatomic) NSMutableArray *animals;

@property (nonatomic, retain) CPTXYGraph *graph;
@property (strong, nonatomic) NSMutableArray *graphs;
@property (strong, nonatomic) NSMutableArray *descriptions;

@end 
```

实现文件是：

```
 - (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {

        //set up carousel data
        wrap = NO;

        self.graphs = [NSMutableArray arrayWithObjects: self.graphView,nil];
    }

    return self;
}

- (void)viewDidLoad
{
    aCarousel.type = iCarouselTypeCoverFlow2;
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
}

- (void)viewDidUnload
{
    [self setACarousel:nil];
    [self setLabel:nil];
    [super viewDidUnload];
    // Release any retained subviews of the main view.
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation == UIInterfaceOrientationLandscapeLeft || interfaceOrientation == UIInterfaceOrientationLandscapeRight);
}

#pragma - mark iCarousel Delegate

- (NSUInteger)numberOfItemsInCarousel:(iCarousel *)carousel 
{
    return [self.graphs count];
}

- (NSUInteger)numberOfVisibleItemsInCarousel:(iCarousel *)carousel
{
    // limit the number of item views loaded concurrently (for performance)
    return 1;
}

- (CPTGraphHostingView*)carousel:(iCarousel *)carousel viewForItemAtIndex:(NSUInteger)index reusingView:(CPTGraphHostingView *)view
{
    // create a numbered view
//    view = [[UIImageView alloc] initWithImage:[UIImage imageNamed:[animals objectAtIndex:index]]];
//    return view;

    CGSize size = self.graphView.frame.size;
    float width = size.width;
    CPTGraphHostingView *currentGraph ;
    for (int i = 0; i < self.graphs.count; i++) {
        CGRect frame;
        frame.origin.x = width * i;
        frame.origin.y = 0;
        frame.size = size;

        currentGraph = [graphs objectAtIndex:i];
        currentGraph.frame = frame;
        [self generateBarPlot:frame];
    }
    return currentGraph;
}

- (NSUInteger)numberOfPlaceholdersInCarousel:(iCarousel *)carousel
{
    return 1;
}

- (CGFloat)carouselItemWidth:(iCarousel *)carousel
{
    // usually this should be slightly wider than the item views
    return 240;
}

- (BOOL)carouselShouldWrap:(iCarousel *)carousel
{
    return self.wrap;
}

- (void)carouselDidScroll:(iCarousel *)carousel
{
    //[label setText:[NSString stringWithFormat:@"%@", [descriptions objectAtIndex:carousel.currentItemIndex]]];
    [label setText:[NSString stringWithFormat:@"Testing"]];
} 
```

....接着是生成图形的方法

任何帮助将不胜感激。

谢谢阅读。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T22:01:54.093

I solved it by casting the Custom View to UIView.

# android - 更新片段内的内容

> ID：12342816
> 
> 赞同：0
> 
> 时间：2012-09-09T20:44:46.700
> 
> 标签：android, android-fragments

我正在开发一个 android 项目，我正在尝试研究如何使用片段为我的应用程序制作一个平板电脑友好的 UI。但我不确定如何根据片段 A 中发生的情况更新片段 B。我知道我需要某种接口，但我不知道如何实现它。

基本上，我有一个名为 MainActivity 的活动，它设置片段的布局。

在横向模式下，XML 文件是。

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="horizontal"
    android:layout_width="match_parent"
    android:layout_height="match_parent">
    <fragment android:name="com.BoardiesITSolutions.FragmentTest.FragmentA"
        android:id="@+id/list"
        android:layout_weight="1"
        android:layout_width="0px"
        android:layout_height="match_parent">
    </fragment>
    <FrameLayout android:id="@+id/viewer"
        android:layout_weight="1"
        android:layout_width="0px"
        android:layout_height="match_parent"
        android:background="?android:attr/detailsElementBackground">
    </FrameLayout>
</LinearLayout> 
```

在纵向模式下

目前 MainActivity 只是`SetContentView`在`onCreate`方法中使用 inside 将内容视图设置为上面的 XML 文件。下面是它的外观。

![片段布局](../Images/d59b1e6e04749c249c996f8aa39bc3e5.png)

在 FragmentA 类文件中，它扩展了 ListFragment 并包含项目的 ListView，我想要做的是根据在 Fragment A 中选择的内容更新 Fragment B 中的 textview。

下面是片段 A 的代码。

```
@Override
    public View onCreateView(LayoutInflater inflator, ViewGroup container, Bundle savedInstanceState)
    {
        return inflator.inflate(R.layout.fragment_a, container, false);
    }

    @Override
    public void onActivityCreated(Bundle savedInstanceState)
    {
        super.onActivityCreated(savedInstanceState);

        myListView = getListView();

        ArrayList<String> arrayList = new ArrayList<String>();
        arrayList.add("Item1");
        arrayList.add("Item2");
        arrayList.add("Item3");

        ArrayAdapter<String> arrayAdapter = new ArrayAdapter<String>(getActivity().getApplicationContext(), 
                android.R.layout.simple_list_item_activated_1, arrayList);
        setListAdapter(arrayAdapter);

        View fragmentB = getActivity().findViewById(R.id.viewer);
        mDualPane = fragmentB != null && fragmentB.getVisibility() == View.VISIBLE;

        if (savedInstanceState != null)
        {
            mCurCheckPosition = savedInstanceState.getInt("curChoice", 0);
        }

        if (mDualPane)
        {
            myListView.setChoiceMode(ListView.CHOICE_MODE_SINGLE);
            showDetails(mCurCheckPosition);
        }
    }

    @Override
    public void onListItemClick(ListView l, View view, int position, long id)
    {
        showDetails(position);
    }

    private void showDetails(int index)
    {
        mCurCheckPosition = index;
        if (mDualPane)
        {
            myListView.setItemChecked(index, true);
            FragmentB details = (FragmentB)getFragmentManager().findFragmentById(R.id.viewer);
            if (details == null || details.getShownIndex() != index)
            {
                details = FragmentB.newInstance(index);

                FragmentTransaction fragmentTransaction = getFragmentManager().beginTransaction();
                fragmentTransaction.replace(R.id.viewer, details);
                fragmentTransaction.setTransition(FragmentTransaction.TRANSIT_FRAGMENT_FADE);
                fragmentTransaction.commit();
            }
        }
        else
        {
            Intent intent = new Intent(getActivity(), FragmentBActivity.class);
            intent.putExtra("index", index);
            startActivity(intent);
        }
    }

    @Override
    public void onSaveInstanceState(Bundle outState)
    {
        super.onSaveInstanceState(outState);
        outState.putInt("curChoice", mCurCheckPosition);
    } 
```

FragmentB 包含以下代码，该类扩展了 Fragment

```
public View onCreateView(LayoutInflater inflator, ViewGroup container, Bundle savedInstanceState)
    {
        if (container == null)
        {
            return null;
        }
        View view = inflator.inflate(R.layout.fragment_b, container, false);
        return view;
    }

    public static FragmentB newInstance(int index)
    {
        FragmentB fragmentB = new FragmentB();
        Bundle args = new Bundle();
        args.putInt("index", index);
        //rgs.putString("content", content);
        fragmentB.setArguments(args);

        return fragmentB;
    }

    public int getShownIndex()
    {
        return getArguments().getInt("index", 0);
    } 
```

在 FragmentB 的 Activity 文件中，它包含以下内容

```
@Override
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        if (getResources().getConfiguration().orientation == Configuration.ORIENTATION_LANDSCAPE)
        {
            finish();
            return;
        }

        if (savedInstanceState == null)
        {
            FragmentB fragmentB = new FragmentB();
            fragmentB.setArguments(getIntent().getExtras());
            getFragmentManager().beginTransaction().add(android.R.id.content, fragmentB).commit();
        }
    } 
```

正如您从上面的屏幕截图中看到的那样，我有片段工作的基础，当我单击每个项目时，它会显示当前选择的项目是什么，但我不知道如何告诉它更新片段 b 中的文本视图基于用户从片段 a 中单击的内容以及在纵向和横向模式下如何处理。

感谢您的任何帮助，您可以提供。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T21:09:50.817

您可以覆盖 的`onActivityCreated()`方法`FragmentB`，通过该 TextView 的 id 查找视图，并对其进行更新。

这是一个模拟：

```
public class FragmentB extends Fragment{

    //......

    @Override
    public void onActivityCreated(Bundle savedInstanceState) {
        super.onActivityCreated(savedInstanceState);

        TextView textView = getActivity().findViewById(R.id.my_textview);
        textView.setText("Hello World!");
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T22:29:24.973

> 但我不知道如何告诉它根据用户从片段 a 中单击的内容以及在纵向和横向模式下如何处理它来更新片段 b 中的文本视图。

让 Fragment A 在宿主 Activity 上调用一个方法，让它知道用户点击了某些东西。然后托管活动可以调用 Fragment B 上的方法（如果该 Fragment 存在），或者启动 Fragment B（如果该 Fragment 不存在但有空间），或者启动一个负责显示 Fragment 的活动B（例如，在电话上）。

我不会做的是你正在做的事情：让片段 A 创建片段 B。片段 A 不应该关心片段 B 是否存在；这是活动的工作。片段 A 应该只关心片段 A，以及将必要的事件传递给活动。

# android - 如何在 Android 中更改 tabStrip 的颜色？

> ID：12342818
> 
> 赞同：1
> 
> 时间：2012-09-09T20:44:54.813
> 
> 标签：android, android-activity, tabs, android-widget

我正在尝试将 tabStrip 的颜色更改为白色，下面的代码不起作用？我究竟做错了什么 ？

```
getTabHost().getTabWidget().setLeftStripDrawable(Color.WHITE);
getTabHost().getTabWidget().setRightStripDrawable(Color.WHITE);
getTabHost().getTabWidget().setStripEnabled(true); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T12:20:44.703

使用任何可绘制对象而不是颜色

表示 setLeftStripDrawable 需要可绘制资源，但您将 int 作为参数。

所以要么在这里使用可绘制的图像。或者使用包含颜色的drawable中的xml。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-17T05:26:24.960

我希望你想改变标签条背景的颜色。您可以通过创建一个具有根元素的布局来实现这一点

tab_strip.xml

```
<?xml version="1.0" encoding="utf-8"?>
<android.support.design.widget.TabLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:background="#FFFFFF">

</android.support.design.widget.TabLayout> 
```

在您使用选项卡的 xml 中，您可以添加 tab_strip.xml，如下所示

```
<include android:id="@+id/tab_layout"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_below="@+id/toolbar"
        layout="@layout/tab_strip"/> 
```

这将使您的标签条颜色变为白色。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-21T12:24:23.443

您可以在 Tablayout 中使用**app:tabIndicatorColor="@color/indicator_color**更改颜色。

```
<android.support.design.widget.TabLayout
    app:tabIndicatorColor="@color/indicator_color
        /> 
```

# java - Java 计时器无法正常工作

> ID：12342819
> 
> 赞同：4
> 
> 时间：2012-09-09T20:44:56.263
> 
> 标签：java, timer

```
....

public class mainClass {
    public mainClass(){
        Timer time = new Timer();
        mainClass.calculate calculate = new mainClass.calculate();
        time.schedule(calculate, 1 * 1000);
    }

    public static void main(String[] args){
        new mainClass();
    }

    class calculate extends TimerTask{
        @Override
        public void run() {
            System.out.println("working..");

        }
    }
} 
```

我在控制台中只看到一次“工作..”消息。我想看到每一秒“工作..”代码有什么问题？我的另一个问题是我想每秒运行我自己的方法，但是如何？

对不起我的英语不好..

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-09T20:50:42.700

[`Timer.schedule(TimerTask task, long delay)`](http://docs.oracle.com/javase/7/docs/api/java/util/Timer.html#schedule%28java.util.TimerTask,%20long%29)仅在第二个参数中的毫秒数之后运行 TimerTask 一次。

要重复运行 TimerTask，您需要使用其他`schedule()`重载之一[`Timer.schedule(TimerTask task, long delay, long period)`](http://docs.oracle.com/javase/7/docs/api/java/util/Timer.html#schedule%28java.util.TimerTask,%20long,%20long%29)，例如：

```
time.schedule(calculate, 1000, 1000); 
```

它安排任务在 1000 毫秒后执行，并每 1000 毫秒重复一次。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-09T20:52:01.963

根据文档，它应该是一次：

> public void schedule(TimerTask task, long delay) 安排指定任务在指定延迟后执行。参数： task - 要调度的任务。delay - 任务执行前的延迟毫秒数。抛出： IllegalArgumentException - 如果延迟为负，或者延迟 + System.currentTimeMillis() 为负。IllegalStateException - 如果任务已被安排或取消，或者计时器被取消。

你可能想打电话

> public void schedule(TimerTask task, long delay, long period)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-09T20:48:40.747

您需要在主线程中等待计时器被触发。当所有非守护线程都完成时，JVM 将退出。运行你的 main 方法的线程实际上是唯一的非 damon 线程，所以你应该让它等到你的工作完成。

像这样更改您的主要方法：

```
 public static void main(String[] args){
     new mainClass();
     Thread.sleep(2 * 1000); // wait longer than what the timer 
                             // should wait so you can see it firing.
 } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-09T20:51:11.730

你需要使用：

```
zaman.schedule(calculate, 0, 1000); 
```

安排计时器运行不止一次。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-09T20:53:44.377

您正在使用的版本`Timer.schedule()`仅在延迟后执行一次任务。您需要使用[`Timer.schedule(TimerTask, long, long)](http://docs.oracle.com/javase/7/docs/api/java/util/Timer.html#schedule%28java.util.TimerTask,%20long,%20long%29)使任务重复。

# python - 在浏览器关闭时删除会话片段

> ID：12342820
> 
> 赞同：1
> 
> 时间：2012-09-09T20:45:06.963
> 
> 标签：python, django, session, cookies

我将在 Django 的会话 cookie 中存储大量信息。我希望这些数据在用户访问网站的整个过程中都保持不变。当他离开时，数据应该被删除，但会话必须保持。我不希望用户每次返回网站时都需要登录。

我找到了每次用户离开网站时清除整个会话 cookie 的方法，但理想情况下，我只想删除我明确设置的 cookie 的选定部分。有谁知道如何做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T21:23:22.420

你有点把事情搞糊涂了。

唯一存储在“Django 的会话 cookie”中的是一个 ID。该 ID 指的是存储在会话后端中的数据：这通常是一个数据库表，但也可能是一个文件或缓存位置，具体取决于您的 Django 配置。

现在数据更新的唯一时间是当它被 Django 修改时。您不能自动使数据过期，除非 cookie 本身过期（在这种情况下，整个数据集都保留在会话存储中，但不再与客户端关联）或通过在服务器上运行修改会话的进程以编程方式。

当用户离开网站或关闭浏览器时，服务器端无法得知。因此，管理此问题的唯一方法是在您的服务器上运行一个 cron 作业，该作业获取最后一次修改（例如）两小时前的会话，并遍历它们以删除您要删除的数据。

# javascript - 使用 jQuery 预加载目录中的所有图像

> ID：12342821
> 
> 赞同：2
> 
> 时间：2012-09-09T20:45:09.367
> 
> 标签：javascript, jquery, directory, preloading

我想将所有图像预加载到一个名为 的目录`img`中，该目录还包含名为`ui_images`.

我知道如何通过将它们的名称放在一个数组中并进行预加载工作来预加载特定图像，但我想知道如何告诉脚本动态搜索该目录中的所有图像`img`和`img/ui_images`？

这是我的代码：

```
var preloadImg = function(imgArr){
    $.each(imgArr, function(index,value){
        $("<img/>")[0].src = value;
    }); 
}

var arrimg = ['img/check.png','img/add_sub.png'];
preloadImg(arrimg); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-09T20:55:57.000

在 http 中没有一般可用的工具来进行目录列表。我能想到的选项是：

1.  以可预测的方式命名您的图像，例如（img001、img002 等），然后您可以加载图像，直到出现错误。

2.  以可预测的方式命名您的图像，例如（img001、img002 等...），然后将一个数值限制值编码到您的网页中，以确定有多少。

3.  创建一个 ajax 调用（在客户端和服务器上），它将为您提供要预加载的图像名称列表。

4.  让您的服务器将一组图像名称嵌入到页面中，以便您知道要预加载什么。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-08-28T21:53:50.380

我正在考虑提高我的一个网站的性能并对此进行了研究。我的解决方案似乎有效，我还没有在其他任何地方看到它。

它是使用 jquery 和 php 的两步方法

1.  // 通过 jquery 预加载图像 .load 并在通过回调缓存后删除

    ```
    <div id="preload"></div>

    $('#preload').load('preload.php', function() {   
    $('#preload').remove();   
    }); 
    ```

2.  // preload.php 下面 - 遍历图像文件夹并将图像插入隐藏的 div

    ```
    <div style="display:none">
    <?php
    $dirf = 'images';
    $dir  = scandir($dirf);
    foreach ($dir as $file) {
    if (($file != '..') && ($file != '.')) {
        echo "<img src='images/$file' />";
        }
    }
    ?>
    </div> 
    ```

这在 Firefox 中有效，但请随时批评或改进

# python - Python：尝试除了 KeyError 与 if has_key()

> ID：12342822
> 
> 赞同：18
> 
> 时间：2012-09-09T20:45:15.263
> 
> 标签：python, performance

在下面的代码中，什么更高效/更“Pythonic”？使用 try-catch 子句还是 if-else 子句？

```
fname = 'AdobeARM.log'

letters = {}

with open(fname,'r') as f:
    for line in f:
        for c in line:
            try:
                letters[c] += 1
            except KeyError:
                letters[c] = 1

print letters 
```

VS。

```
fname = 'AdobeARM.log'

letters = {}

with open(fname,'r') as f:
    for line in f:
        for c in line:
            if letters.has_key(c):
                letters[c] += 1
            else:
                letters[c] = 1

print letters 
```

我倾向于使用 try catch 选项，但我不知道为什么。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-09-09T20:46:23.353

使用[`dict.get()`](https://docs.python.org/2/library/stdtypes.html#dict.get)：

> `get(key[, default])`
> 
> `key`如果在字典中，则返回键的值，否则返回`default`。如果 `default`未给出，则默认为`None`，因此此方法永远不会引发`KeyError`。

换句话说`d.get('x', c)`，相当于`d['x'] if 'x' in d else c`。

**例子：**

```
In [24]: d = {'a':1, 'b':2}

In [27]: d['d'] = d.get('d', 0) + 1  # 0 is the default value

In [28]: d
Out[28]: {'a': 1, 'b': 2, 'd': 1}

In [29]: d['d'] = d.get('d', 0) + 1

In [30]: d
Out[30]: {'a': 1, 'b': 2, 'd': 2} 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-09-09T20:52:47.080

根据您的 python 版本，您可能希望在此处使用 a[`defaultdict`](http://docs.python.org/library/collections.html#collections.defaultdict)或 a [`Counter`](http://docs.python.org/library/collections.html#collections.Counter)，因为它是最合适的。

现在，关于哪种选择是最 Pythonic 的，这取决于你要问的人。一方面，[基于异常的流控制有时不受欢迎](https://stackoverflow.com/a/4513009/873145)，因为异常应该在异常情况下引发，而不是用作条件。

但是，另一方面，在某些[情况下，您宁愿使用 try / except](https://stackoverflow.com/a/7604717/873145)，因为条件语句不实用。

最后，从性能的角度来看，这取决于您是否希望您的密钥大部分时间都在那里（`if`语句有点慢，但引发异常*时*会慢很多），如果性能是一个问题，您在决定之前，应该衡量你在这两种实现中的表现。

* * *

总而言之，我认为一般的经验法则是默认使用条件，但如果它们更实用/更有意义/给你真正需要的加速，则使用例外。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-09-09T20:52:37.377

更多的pythonic是使用专门的工具来完成这项工作：

```
from collections import Counter

with open(fname, 'r') as f:
    letters = Counter(f.read()) 
```

另请注意，`has_key`不赞成使用`in`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-04-18T19:14:47.763

看看你是否可以使用这个技巧以 python 方式处理异常。

```
adict = {}
default = None
val = adict.get('dogname', default)
# val will be None rather than raise an exception. 
```

参考：[https ://wiki.python.org/moin/KeyError](https://wiki.python.org/moin/KeyError)

# php - json_encode 不会删除反斜杠

> ID：12342823
> 
> 赞同：-2
> 
> 时间：2012-09-09T20:45:16.250
> 
> 标签：php, json

我正在尝试在 php 中生成 JSON。我的问题是一些反斜杠保留在 json 字符串中，即使我使用`json_encode`：

```
header('Cache-Control: no-cache, must-revalidate');
header('Expires: Mon, 26 Jul 1997 05:00:00 GMT');
header('Content-type: application/json');

$jsonurl = 'http://api.flickr.com/services/rest/?method=flickr.photos.getSizes&api_key=e6c27be80b3b54c55376a5f59009a8db&photo_id=7962163506&format=json&nojsoncallback=1';
$json = file_get_contents($jsonurl);

echo json_encode($json); 
```

**结果：**

```
"{\"sizes\":{\"canblog\":0, \"canprint\":0, \"candownload\":1, \"size\":[{\"label\":\"Square\", \"width\":75, \"height\":75, \"source\":\"http:\\\/\\\/farm9.staticflickr.com\\\/8318\\\/7962163506_139d6bf0a0_s.jpg\", \"url\":\"http:\\\/\\\/www.flickr.com\\\/photos\\\/87015633@N08\\\/7962163506\\\/sizes\\\/sq\\\/\", \"media\":\"photo\"}, {\"label\":\"Large Square\", \"width\":\"150\", \"height\":\"150\", \"source\":\"http:\\\/\\\/farm9.staticflickr.com\\\/8318\\\/7962163506_139d6bf0a0_q.jpg\", \"url\":\"http:\\\/\\\/www.flickr.com\\\/photos\\\/87015633@N08\\\/7962163506\\\/sizes\\\/q\\\/\", \"media\":\"photo\"}, {\"label\":\"Thumbnail\", \"width\":\"100\", \"height\":\"66\", \"source\":\"http:\\\/\\\/farm9.staticflickr.com\\\/8318\\\/7962163506_139d6bf0a0_t.jpg\", \"url\":\"http:\\\/\\\/www.flickr.com\\\/photos\\\/87015633@N08\\\/7962163506\\\/sizes\\\/t\\\/\", \"media\":\"photo\"}, {\"label\":\"Small\", \"width\":\"240\", \"height\":\"159\", \"source\":\"http:\\\/\\\/farm9.staticflickr.com\\\/8318\\\/7962163506_139d6bf0a0_m.jpg\", \"url\":\"http:\\\/\\\/www.flickr.com\\\/photos\\\/87015633@N08\\\/7962163506\\\/sizes\\\/s\\\/\", \"media\":\"photo\"}, {\"label\":\"Small 320\", \"width\":\"320\", \"height\":212, \"source\":\"http:\\\/\\\/farm9.staticflickr.com\\\/8318\\\/7962163506_139d6bf0a0_n.jpg\", \"url\":\"http:\\\/\\\/www.flickr.com\\\/photos\\\/87015633@N08\\\/7962163506\\\/sizes\\\/n\\\/\", \"media\":\"photo\"}, {\"label\":\"Medium\", \"width\":\"500\", \"height\":\"331\", \"source\":\"http:\\\/\\\/farm9.staticflickr.com\\\/8318\\\/7962163506_139d6bf0a0.jpg\", \"url\":\"http:\\\/\\\/www.flickr.com\\\/photos\\\/87015633@N08\\\/7962163506\\\/sizes\\\/m\\\/\", \"media\":\"photo\"}, {\"label\":\"Medium 640\", \"width\":\"640\", \"height\":\"424\", \"source\":\"http:\\\/\\\/farm9.staticflickr.com\\\/8318\\\/7962163506_139d6bf0a0_z.jpg\", \"url\":\"http:\\\/\\\/www.flickr.com\\\/photos\\\/87015633@N08\\\/7962163506\\\/sizes\\\/z\\\/\", \"media\":\"photo\"}, {\"label\":\"Medium 800\", \"width\":\"800\", \"height\":530, \"source\":\"http:\\\/\\\/farm9.staticflickr.com\\\/8318\\\/7962163506_139d6bf0a0_c.jpg\", \"url\":\"http:\\\/\\\/www.flickr.com\\\/photos\\\/87015633@N08\\\/7962163506\\\/sizes\\\/c\\\/\", \"media\":\"photo\"}, {\"label\":\"Large\", \"width\":\"1024\", \"height\":\"678\", \"source\":\"http:\\\/\\\/farm9.staticflickr.com\\\/8318\\\/7962163506_139d6bf0a0_b.jpg\", \"url\":\"http:\\\/\\\/www.flickr.com\\\/photos\\\/87015633@N08\\\/7962163506\\\/sizes\\\/l\\\/\", \"media\":\"photo\"}]}, \"stat\":\"ok\"}" 
```

**预期结果：**

```
{"sizes":{"canblog":0, "canprint":0, "candownload":1, "size":[{"label":"Square", "width":75, "height":75, "source":"http:\/\/farm9.staticflickr.com\/8306\/7962671096_61367d4804_s.jpg", "url":"http:\/\/www.flickr.com\/photos\/87015633@N08\/7962671096\/sizes\/sq\/", "media":"photo"}, {"label":"Large Square", "width":"150", "height":"150", "source":"http:\/\/farm9.staticflickr.com\/8306\/7962671096_61367d4804_q.jpg", "url":"http:\/\/www.flickr.com\/photos\/87015633@N08\/7962671096\/sizes\/q\/", "media":"photo"}, {"label":"Thumbnail", "width":"100", "height":"66", "source":"http:\/\/farm9.staticflickr.com\/8306\/7962671096_61367d4804_t.jpg", "url":"http:\/\/www.flickr.com\/photos\/87015633@N08\/7962671096\/sizes\/t\/", "media":"photo"}, {"label":"Small", "width":"240", "height":"159", "source":"http:\/\/farm9.staticflickr.com\/8306\/7962671096_61367d4804_m.jpg", "url":"http:\/\/www.flickr.com\/photos\/87015633@N08\/7962671096\/sizes\/s\/", "media":"photo"}, {"label":"Small 320", "width":"320", "height":212, "source":"http:\/\/farm9.staticflickr.com\/8306\/7962671096_61367d4804_n.jpg", "url":"http:\/\/www.flickr.com\/photos\/87015633@N08\/7962671096\/sizes\/n\/", "media":"photo"}, {"label":"Medium", "width":"500", "height":"331", "source":"http:\/\/farm9.staticflickr.com\/8306\/7962671096_61367d4804.jpg", "url":"http:\/\/www.flickr.com\/photos\/87015633@N08\/7962671096\/sizes\/m\/", "media":"photo"}, {"label":"Medium 640", "width":"640", "height":"424", "source":"http:\/\/farm9.staticflickr.com\/8306\/7962671096_61367d4804_z.jpg", "url":"http:\/\/www.flickr.com\/photos\/87015633@N08\/7962671096\/sizes\/z\/", "media":"photo"}, {"label":"Medium 800", "width":"800", "height":530, "source":"http:\/\/farm9.staticflickr.com\/8306\/7962671096_61367d4804_c.jpg", "url":"http:\/\/www.flickr.com\/photos\/87015633@N08\/7962671096\/sizes\/c\/", "media":"photo"}, {"label":"Large", "width":"1024", "height":"678", "source":"http:\/\/farm9.staticflickr.com\/8306\/7962671096_61367d4804_b.jpg", "url":"http:\/\/www.flickr.com\/photos\/87015633@N08\/7962671096\/sizes\/l\/", "media":"photo"}]}, "stat":"ok"} 
```

我需要更改什么才能获得正确的 JSON 字符串？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-09T20:47:32.037

看起来您`json_encode`对 JSON 字符串的调用，只需输出即可。

```
header('Cache-Control: no-cache, must-revalidate');
header('Expires: Mon, 26 Jul 1997 05:00:00 GMT');
header('Content-type: application/json');

$jsonurl = 'http://api.flickr.com/services/rest/?method=flickr.photos.getSizes&api_key=e6c27be80b3b54c55376a5f59009a8db&photo_id=7962163506&format=json&nojsoncallback=1';
echo file_get_contents($jsonurl); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-09T20:49:48.200

你已经有了一个 JSON 字符串，不需要`json_encode`再次调用，当你有一些数据结构并且想要序列化为 JSON 时应该使用该函数，在这种情况下你可以直接输出。

# css - :hover 不会回到原始状态

> ID：12342832
> 
> 赞同：1
> 
> 时间：2012-09-09T20:46:19.677
> 
> 标签：css, hover

我正在为我的导航（文本和图像）做悬停效果，从托盘外观开始，然后在悬停时它们变亮。此效果有效，但鼠标离开项目后，除了在 Firefox 中之外，它不会恢复到其原始状态。

下面是一个没有图像和徽标的小型工作对象。 [http://jsfiddle.net/bjxCn/](http://jsfiddle.net/bjxCn/)

在正常向左或向下滚动后，它们似乎回到了原始状态。看起来很奇怪。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T20:55:57.433

看起来问题在于您将*div*元素而不是*li*嵌套在*ul*中。这~~可能~~是也可能不是有效的 HTML；当我替换 ul-div-li 布局时，奇怪的悬停问题消失了（尽管破坏了布局）：http: [//jsfiddle.net/GppCG/](http://jsfiddle.net/GppCG/)

# javascript - 在 Javascript 中对特殊字符进行排序 (Æ)

> ID：12342839
> 
> 赞同：5
> 
> 时间：2012-09-09T20:46:40.477
> 
> 标签：javascript, node.js, sorting, special-characters

我正在尝试根据对象的`name`属性对对象数组进行排序。有些名字以“Æ”开头，我希望它们像“Ae”一样被排序。我目前的解决方案如下：

```
myArray.sort(function(a, b) {
  var aName = a.name.replace(/Æ/gi, 'Ae'),
      bName = b.name.replace(/Æ/gi, 'Ae');
  return aName.localeCompare(bName);
}); 
```

我觉得应该有更好的方法来处理这个问题，而不必手动替换每个特殊字符。这可能吗？

如果有任何区别，我会在 Node.js 中执行此操作。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-10T04:55:58.053

没有更简单的方法。不幸的是，即使问题中描述的方式也太简单了，至少在可移植性有任何问题的情况下。

该`localeCompare`方法根据定义是依赖于实现的，它通常取决于底层操作系统的 UI 语言，尽管它也可能在同一台计算机中的浏览器（或其他 JavaScript 实现）之间有所不同。很难找到关于它的任何文档，因此即使您的目标是编写不可移植的代码，您也可能需要进行大量测试以查看应用了哪种排序规则。参照。对字符串进行[排序比您想象的要困难得多！](https://stackoverflow.com/questions/127913/sorting-strings-is-much-harder-than-you-thought)

因此，要进行可控且可移植的比较，您需要自己编写代码，除非您有幸找到恰好适合您需求的其他人的代码。积极的一面是，*大小写转换*方法是 JavaScript 中为数不多的本地化就绪的部分之一：它们应用 Unicode 大小写映射规则，因此例如`'æ'.toUpperCase()`在任何实现中都会产生 Æ。

通常，对字符串进行排序需要一个复杂的函数，该函数应用为一种语言或其他一些规则定义的特定排序规则，例如泛欧排序规则（用于多语言内容）。但是，如果我们可以限制自己的排序规则只处理除了 Ascii 之外的少数字母，我们可以使用如下代码简化德语排序（摘自[Going Global with JavaScript and Globalize.js](http://www.bytelevelbooks.com/books/global_javascript.html)一书）：

```
String.prototype.removeUmlauts = function () {
  return this.replace(/Ä/g,'A').replace(/Ö/g,'O').replace(/Ü/g,'U');
}; 
function alphabetic(str1, str2) {
  var a = str1.toUpperCase().removeUmlauts();
  var b = str2.toUpperCase().removeUmlauts();
  return a < b ? -1 : a > b ? 1 : 0;
} 
```

`replace(/Æ/gi, 'Ae')`在分析可能出现的字符并决定如何处理它们之后，您可以添加其他映射，例如。删除变音符号（例如将 É 映射到 E）很简单，但通常已经足够好了，而且肯定比让实现来决定 É 是否在 Z 之后更好。至少你会在不同的实现中得到一致的结果，你会看到什么出现问题并需要修复，而不是等待其他用户抱怨您的代码排序错误（在他们的环境中）。

# jquery - 响应式设计中图像的垂直居中在 WebKit 中表现不同

> ID：12342844
> 
> 赞同：0
> 
> 时间：2012-09-09T20:46:59.343
> 
> 标签：jquery, jquery-plugins, responsive-design, vertical-alignment

我目前正在构建一个响应式网站，该网站使用一个出色的脚本，该脚本将图像垂直居中在父级中，最大高度和溢出设置为隐藏：

[http://demo.solemone.de/overflow-image-with-vertical-centering-for-responsive-web-design/](http://demo.solemone.de/overflow-image-with-vertical-centering-for-responsive-web-design/)

当页面上只有一个容器实例时，该脚本可以完美运行，但是当找到一个或多个容器实例时，垂直居中就会被破坏。似乎脚本对页面上的所有图像应用了相同的边距，在我的情况下考虑到这并不理想：

1.  容器的不同实例具有不同的最大高度。
2.  图像具有不同的高度，因此应该具有唯一的边距。

为了克服我面临的问题，我稍微修改了脚本，使用 jQuery .each() 函数迭代对象并运行该函数。结果可以在以下 URL 中看到：

[http://www.lewismalpas.co.uk/rwd](http://www.lewismalpas.co.uk/rwd)

这似乎按预期工作，每个图像都有一个独特的边距，这很好，但是我遇到了一些我无法解决的问题，我非常感谢你的帮助。首先，我在控制台中遇到无法修复的 JS 错误：

`ReferenceError: centerImage is not defined`

我在 Safari/Chrome 中也得到了意想不到的结果，因为图像在页面加载或刷新时没有垂直居中，但是使用 URL 字段按返回似乎会使图像居中，但这并不理想。

对于这些问题/不一致的任何帮助将不胜感激，

谢谢，

刘易斯。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T21:37:28.757

---------对不起放弃我的答案，未能阅读完整的问题--------------

你是对的。只是快速浏览了代码。

您可能希望将 centerImage() 函数更改为如下所示：

```
 function centerImage() {
   $container.each(function() { //iterate through every single container
      $this = $(this); // wrap the current container in jQuery so you can call some jQuery methods.
      $img = $this.find('img'); // finding the image inside current container.
      imageHeight = $img.height();
      wrapperHeight = $this.height();
      overlap = (wrapperHeight - innerHeight) / 2;
      $img.css('margin-top', overlap);
   });
 } 
```

其他一切都很好。

希望能帮助到你 ：）

# gridview - 如何从选定的 GridView 行中检索图像

> ID：12342845
> 
> 赞同：1
> 
> 时间：2012-09-09T20:47:03.323
> 
> 标签：gridview

我想找到另一种正确的方法，如何从 XtragridControl gridview 中的选定行检索图片或图像到表单中的图片框。

这就是场景。

我有一个带有多个按钮的功能区控件，第一个按钮打开客户数据，您可以在其中找到一个带有 2 个按钮的用户控件第一个按钮打开客户表单以添加新客户，第二个按钮打开编辑客户表单，您可以在其中编辑客户从网格中选择特定客户后，我想要一种更简单的方法，可以让我检索客户的图像或照片以及所有其他信息。

在下面找到我的代码示例：

```
// this my class Holding Field from table in database 

using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.IO;
using System.Drawing;

   namespace YoungWoman
   {
       public static class GetRowData
      {      

   public static int LesseeId;

   public static byte image; // 

   public static string LesseeName;
   public static string LesseeLastName;
   public static string PassportNo;
   public static string IDNo;
   public static DateTime BirthDate;
   public static string Gender;
   public static string Country;
   public static string City;
   public static string Province;
   public static string LesseePostalCode;
   public static string MobileNo;
   public static string HomePhoneNo;
   public static string TutorName;
   public static string TutorLastName;
   public static string AddressTutor;
   public static string AddressLessee;
   public static string TutorPhoneNo;
   public static string TutorEmail;

   }
  }

   // this user control containing the XtragridControl and how i retrieve values from the grid to get the form populated 

      private void EditLesseeFrm_Click(object sender, EventArgs e)
    {
        Lesseefrm Lessee = new Lesseefrm(Utils.Formtype.edit, 1);
        Lessee.LesseeEventHandler += new EventHandler(RefreshLesseeGrid);
        Lessee.RefreshLabeslEvent += new EventHandler(RefreshingLabels);

        GetRowData.LesseeId = Convert.ToInt32(gridView1.GetRowCellValue(gridView1.FocusedRowHandle, "LesseeId"));
        //GetRowData.LesseePic = ByteImageConve(gridView1.GetRowCellValue(gridView1.FocusedRowHandle, "LesseePic")); // this line of code return an error 
        GetRowData.LesseeName = Convert.ToString(gridView1.GetRowCellValue(gridView1.FocusedRowHandle, "LesseeName"));
        GetRowData.LesseeLastName = Convert.ToString(gridView1.GetRowCellValue(gridView1.FocusedRowHandle,"LesseeLastName"));
        GetRowData.PassportNo = Convert.ToString(gridView1.GetRowCellValue(gridView1.FocusedRowHandle,"PassportNo"));
        GetRowData.Gender = Convert.ToString(gridView1.GetRowCellValue(gridView1.FocusedRowHandle, "Gender"));
        GetRowData.Province = Convert.ToString(gridView1.GetRowCellValue(gridView1.FocusedRowHandle, "Province"));
        GetRowData.BirthDate = Convert.ToDateTime(gridView1.GetRowCellValue(gridView1.FocusedRowHandle, "BirthDate"));
        GetRowData.City = Convert.ToString(gridView1.GetRowCellValue(gridView1.FocusedRowHandle, "City"));
        GetRowData.Country = Convert.ToString(gridView1.GetRowCellValue(gridView1.FocusedRowHandle, "Country"));
        GetRowData.MobileNo = Convert.ToString(gridView1.GetRowCellValue(gridView1.FocusedRowHandle, "MobileNo"));
        GetRowData.HomePhoneNo = Convert.ToString(gridView1.GetRowCellValue(gridView1.FocusedRowHandle, "HomePhoneNo"));
        GetRowData.IDNo = Convert.ToString(gridView1.GetRowCellValue(gridView1.FocusedRowHandle, "IDNo"));
        GetRowData.AddressLessee = Convert.ToString(gridView1.GetRowCellValue(gridView1.FocusedRowHandle, "AddressLessee"));
        GetRowData.AddressTutor = Convert.ToString(gridView1.GetRowCellValue(gridView1.FocusedRowHandle, "AddressTutor"));
        GetRowData.LesseePostalCode = Convert.ToString(gridView1.GetRowCellValue(gridView1.FocusedRowHandle, "LesseePostalCode"));
        GetRowData.TutorName = Convert.ToString(gridView1.GetRowCellValue(gridView1.FocusedRowHandle, "TutorName"));
        GetRowData.TutorLastName = Convert.ToString(gridView1.GetRowCellValue(gridView1.FocusedRowHandle, "TutorLastName"));
        GetRowData.TutorPhoneNo = Convert.ToString(gridView1.GetRowCellValue(gridView1.FocusedRowHandle, "TutorPhoneNo"));
        GetRowData.TutorEmail = Convert.ToString(gridView1.GetRowCellValue(gridView1.FocusedRowHandle, "TutorEmail"));

        Lessee.ShowDialog();
    }

       // this the form to receive the values from the grid to update

            if (formtype == Formtype.edit && Lesseeid > 0)
            {

                LesseeIdtextEdit.Enabled = false;
                ClearBtnlayoutControlItem26.Visibility = DevExpress.XtraLayout.Utils.LayoutVisibility.Never;
                SaveBtn.Text = "&Edit";
                SaveBtn.Image = Resources.brush_16;
                this.Text = string.Format(" Edit Lessee Information - YW Residence ");

                LesseeIdtextEdit.Text = Convert.ToInt32(GetRowData.LesseeId).ToString();
                txtName.Text = GetRowData.LesseeName;
                txtLAstname.Text = GetRowData.LesseeLastName;
                txtPassport.Text = GetRowData.PassportNo;
                txtID.Text = GetRowData.IDNo;
                GendercomboBoxEdit.SelectedItem = GetRowData.Gender;
                DobdateEdit.DateTime = GetRowData.BirthDate;
                CountrycomboBoxEdit.SelectedItem = GetRowData.Country;
                txtProvince.Text = GetRowData.Province;
                txtCity.Text = GetRowData.City;
                txtPostalCode.Text = GetRowData.LesseePostalCode;
                LesseememoEdit1.Text = GetRowData.AddressLessee;
                txtMobile.Text = GetRowData.MobileNo;
                txtHomePhone.Text = GetRowData.HomePhoneNo;
                txtTutorName.Text = GetRowData.TutorName;
                txttutorLastname.Text = GetRowData.TutorLastName;
                tutorAddresstxt.Text = GetRowData.AddressTutor;
                txtTutorMobile.Text = GetRowData.TutorPhoneNo;
                txtEmail.Text = GetRowData.TutorEmail;

            }

       and this how i save before proceeding to any update 

             private void SaveBtn_Click(object sender, EventArgs e)
    {

        if (formtype == Formtype.add)
        {
            if (txtPassport.Text.Length >= 8)
            {
                dxErrorProvider1.ClearErrors();

                try
                {

                    MemoryStream ms = new MemoryStream();
                    PicBox1.Image.Save(ms, System.Drawing.Imaging.ImageFormat.Jpeg);
                    byte[] Pic_arr = new byte[ms.Length];
                    ms.Position = 0;
                    ms.Read(Pic_arr, 0, Pic_arr.Length);

                    da.InsertCommand = new SqlCommand(" insert into LesseeYW (LesseePic,LesseeName,LesseeLastName,PassportNo,IDNo,BirthDate,Gender,Country,LesseePostalCode,City,Province,MobileNo,HomePhoneNo,TutorName,TutorLastName,AddressTutor,AddressLessee,TutorPhoneNo,TutorEmail)Values(@image1,@name,@LastName,@pass1,@IDno,@DOB,@Gender,@Country1,@Postal,@City,@Province,@Mobile,@Phone,@Tname,@TLast,@address1,@address2,@Tphone,@Email)", conne);
                    da.InsertCommand.Parameters.AddWithValue("@id", GetRowData.LesseeId);
                    da.InsertCommand.Parameters.AddWithValue("@image1", Pic_arr);
                    da.InsertCommand.Parameters.AddWithValue("@name", txtName.Text);
                    da.InsertCommand.Parameters.AddWithValue("@LastName", txtLAstname.Text);
                    da.InsertCommand.Parameters.AddWithValue("@pass1", txtPassport.Text);
                    da.InsertCommand.Parameters.AddWithValue("@IDno", txtID.Text);
                    da.InsertCommand.Parameters.AddWithValue("@DOB", DobdateEdit.DateTime);
                    da.InsertCommand.Parameters.AddWithValue("@Gender", GendercomboBoxEdit.SelectedItem.ToString());
                    da.InsertCommand.Parameters.AddWithValue("@Country1", CountrycomboBoxEdit.SelectedItem.ToString());
                    da.InsertCommand.Parameters.AddWithValue("@Postal", txtPostalCode.Text);
                    da.InsertCommand.Parameters.AddWithValue("@City", txtCity.Text);
                    da.InsertCommand.Parameters.AddWithValue("@Province", txtProvince.Text);
                    da.InsertCommand.Parameters.AddWithValue("@Mobile", txtMobile.Text);
                    da.InsertCommand.Parameters.AddWithValue("@Phone", txtHomePhone.Text);
                    da.InsertCommand.Parameters.AddWithValue("@Tname", txtTutorName.Text);
                    da.InsertCommand.Parameters.AddWithValue("@TLast", txttutorLastname.Text);
                    da.InsertCommand.Parameters.AddWithValue("@address1", tutorAddresstxt.Text);
                    da.InsertCommand.Parameters.AddWithValue("@address2", LesseememoEdit1.Text);
                    da.InsertCommand.Parameters.AddWithValue("@Tphone", txtTutorMobile.Text);
                    da.InsertCommand.Parameters.AddWithValue("@Email", txtEmail.Text);

                    da.InsertCommand.ExecuteNonQuery();
                    conne.Close();
                    MessageBox.Show(" Lessee Data Successfully Added ", " Confirmation Lessee Data ", MessageBoxButtons.OK, MessageBoxIcon.Information);
                    this.Close();
                }

                catch (Exception Ex)
                {
                    MessageBox.Show(Ex.Message);
                }
            }

            else
            {
                MessageBox.Show("Invalid PassportNo","Warning", MessageBoxButtons.OK, MessageBoxIcon.Warning);
                dxErrorProvider1.SetError(txtPassport, "Invalid Passport No");

            }

            if (LesseeEventHandler != null)
            {
                LesseeEventHandler(sender, e);
            }

            if (LsEventHandler != null)
            {
                LsEventHandler(sender, e);
            }

            if (SelectEventHandler != null)
            {
                SelectEventHandler(sender, e);
            }
            if (LabelsEvent != null)
            {
                LabelsEvent(sender, e);
            }

        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T12:12:09.897

我会使用强类型数据集或 EF，将表的内容绑定到您的网格。这样您就无需考虑加载和保存数据了。

由于您使用的是 devexpress，我还将使用 DataLayoutControl 来绑定数据源中的不同字段。

您已将图像声明为字节，这是错字吗？使用 byte[] 或 Image

如果你想使用你的类，用属性替换你的变量，然后你可以将它们绑定到 gui 控件，在类中使用属​​性也是一个更好的设计。

# mongodb - MongoDB C# - 不允许使用自定义强类型对象更新？

> ID：12342846
> 
> 赞同：1
> 
> 时间：2012-09-09T20:47:04.490
> 
> 标签：mongodb, mongodb-.net-driver, mongodb-query

我正在尝试使用强类型对象执行更新。例如，

```
public void setAppointmentPrefs(string UserName, IEnumerable<AppointmentInfo> info)
{
    var query = new QueryDocument {{ "ProviderId", UserName}};
    var update = Update.Set("Prefs",prefs);    // prefs.toList() gives same error
    // providerprefs initialized in constructor
    providerprefs.Update(query, update);
} 
```

我收到一个编译器错误说：`Error 14 The best overloaded method match for 'MongoDB.Driver.Builders.Update.Set(string, MongoDB.Bson.BsonValue)' has some invalid arguments`

显然 Mongo 驱动程序不会让我根据我自己的对象（无论是 IEnumerable 还是 prefs.toList()）进行更新，这似乎与它允许我插入或查询自定义对象的方式形成对比。当然，我遗漏了一些明显的东西，可以让我避免反序列化、弱输入然后创建通用 BsonDocument！TIA。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T20:58:17.567

您可以根据自己的类型进行更新！您是否尝试过使用类型化的查询和更新构建器？

尝试这样的事情：

```
var query = Query<AppointmentInfo>.EQ(i => i.ProviderId, userName);
var update = Update<AppointmentInfo>.Set(i => i.Prefs, info.Prefs); 
```

不确定我是否从您的部分代码中获得了类型和所有内容，但这应该会给您一个大致的想法。

如果您还有其他问题，请告诉我。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T13:20:21.343

我知道这已经得到解答，但我个人并不完全理解罗伯茨的回答。

我所做的只是调用“ToBsonDocument()”方法，将对象作为参数除外

所以：

```
customObject.ToBsonDocument() 
```

如果文档中有一组对象：

```
var query = Query.EQ("_id", ObjectId.Parse(id.ToString()));
var update = Update.Push("ArrayOfObjects", customObject.ToBsonDocument());
collection.Update(query, update); 
```

# google-maps - 错误：KmlLayer 未定义

> ID：12342848
> 
> 赞同：0
> 
> 时间：2012-09-09T20:47:13.793
> 
> 标签：google-maps, google-maps-api-3, overlay, kml

我正在尝试从我在服务器上托管的文件创建覆盖。我一直在查看 Google Maps API v3 文档，但我现在被卡住了。[正如我从这部分文档中](https://developers.google.com/maps/documentation/javascript/reference#KmlLayer)了解到的那样，我可以
`new KmlLayer(url: "http://www.mydomain.com/kmllayer.txt");`
用来调用图层文件。当我打开页面时，我在控制台中收到一条错误消息：“Uncaught ReferenceError: KmlLayer is not defined”

我已经能够通过访问 maps.google.com 并在搜索栏中输入 kml 图层文件所在的 url 来使用该图层，它显示得很好，所以我知道问题不在于图层本身。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T22:36:58.800

有几种可能性：

1.  一种是 geocodezip 指出您正在尝试在 API 加载之前创建图层。
2.  您正在调用错误的函数。正确的语法是：

    新的 google.maps.KmlLayer("http://my.public.server/file.kml", options);

# javascript - 为什么在定义 var 时 JavaScript 会抛出“Uncaught ReferenceError: var is not defined”

> ID：12342849
> 
> 赞同：-2
> 
> 时间：2012-09-09T20:47:15.463
> 
> 标签：javascript

我的 JavaScript 函数

```
function B_modeWindow (id,cords) {  
    loading();

    var xmlhttp;

    if (window.XMLHttpRequest) {
        xmlhttp=new XMLHttpRequest();
    } else {
        xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
    }

    xmlhttp.onreadystatechange=function() {
        if (xmlhttp.readyState==4 && xmlhttp.status==200) {

            var cords = document.getElementById(cords)
            cords.innerHTML=xmlhttp.responseText;
            var xy = cords.split("x");          
            hideloading();
        }
    }

    xmlhttp.open("GET","processMapEdit.php?id="+id+"&x="+xy[0]+"&y="+xy[1],true);
    xmlhttp.send();
} 
```

返回：

```
Uncaught ReferenceError: xy is not defined 
```

在：

```
xmlhttp.open("GET","processMapEdit.php?id="+id+"&x="+xy[0]+"&y="+xy[1],true); 
```

似乎 xy 不存在，但它在上面仅定义了 5 行！这里有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T20:49:03.713

您需要在函数`xy`之外定义变量，`onreadystatechange`以便在您使用它的地方可用。

这应该有效：

```
function B_modeWindow (id,cords) {  
    var xy = null; // defined xy here

    loading();

    var xmlhttp;

    if (window.XMLHttpRequest) {
        xmlhttp=new XMLHttpRequest();
    } else {
        xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
    }

    xmlhttp.onreadystatechange=function() {
        if (xmlhttp.readyState==4 && xmlhttp.status==200) {

            var cords = document.getElementById(cords)
            cords.innerHTML=xmlhttp.responseText;
            xy = cords.split("x");          // removed var keyword here
            hideloading();
        }
    }

    xmlhttp.open("GET","processMapEdit.php?id="+id+"&x="+xy[0]+"&y="+xy[1],true);
    xmlhttp.send();
} 
```

请注意，ajax 调用默认是异步的，因此即使范围是固定的，`xy`变量也可能没有您要查找的内容。在这种情况下，您将不得不以某种方式在 ajax 请求中使用回调来捕获实际值

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T20:50:51.373

`xy`只定义在匿名函数的范围内`xmlhttp.onreadystatechange = function () { // valid scope of xy }`。因此，在此匿名函数*之外无法访问它。*请改用以下内容：

```
function B_modeWindow (id,cords) {  
    loading();

    var xmlhttp;

    if (window.XMLHttpRequest) {
        xmlhttp=new XMLHttpRequest();
    } else {
        xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
    }

    var xy = cords.split("x"); 

    xmlhttp.onreadystatechange=function() {
        if (xmlhttp.readyState==4 && xmlhttp.status==200) {
            var cordsElement = document.getElementById(cords);
            cordsElement.innerHTML=xmlhttp.responseText;      
            hideloading();
        }
    }

    xmlhttp.open("GET","processMapEdit.php?id="+id+"&x="+xy[0]+"&y="+xy[1],true);
    xmlhttp.send();
} 
```

这样，作用域`xy`是函数`B_modeWindow`而不是匿名函数。

另外，请注意，即使***您***可以`xy`在匿名函数之外访问（您不能），`xy`也不会被定义，因为您仅在 AJAX 请求完成时才定义它，并且您需要实际使用它进行 AJAX 调用。

另一个建议是为`cords`. 您首先使用它来分割其内容`x`，然后定义另一个`cords`变量来分配一个 DOM 元素。虽然这可行，但它可能会令人困惑。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-09T20:50:54.320

您将声明放在错误的函数中。此外，您需要`cords`在回调中给回调一个不同的名称，否则事情会中断。

```
function B_modeWindow (id,cords) {
    var xy = cords.split("x");

    loading();

    var xmlhttp;

    if (window.XMLHttpRequest) {
        xmlhttp = new XMLHttpRequest();
    } else {
        xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
    }

    xmlhttp.onreadystatechange = function() {
        if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
            var cordsElement = document.getElementById(cords);
            cordsElement.innerHTML = xmlhttp.responseText;
            hideloading();
        }
    };

    xmlhttp.open("GET", "processMapEdit.php?id=" + id + "&x=" + xy[0] + "&y=" + xy[1], true);
    xmlhttp.send();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-09T20:51:02.417

是的，xy 已定义，但它是在花括号中定义的——它超出了范围，或者在您到达问题行时停止退出。**编辑：见下面的评论。我的这个陈述完全是错误的**

要修复它，只需在线上方定义 xy 即可`xmlhttp.onreadystatechange=function()`。或者更好的是，在函数的顶部。

# asp.net-mvc-3 - Kendo UI 数据源和数组

> ID：12342851
> 
> 赞同：1
> 
> 时间：2012-09-09T20:47:26.830
> 
> 标签：asp.net-mvc-3, kendo-ui

我将一系列数组值从已发布的表单发送到 MVC3 控制器。我希望默认的模型绑定器能够解析这个，但我遇到了一些困难。

数组格式如下：

```
order[0].[type]=some value. 
```

我认为这就是模型绑定器没有解析我的值的原因，因为我的模型中没有填充任何内容。

还有什么方法可以处理这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T18:12:02.490

1据我记得正确的格式是：

```
orders[0].OrderID=13;
orders[0].Name="test";
orders[1].OrderID=15;
orders[1].Name="again test"; 
```

索引应该从 0 开始并增加 1。

看看这个：[http ://haacked.com/archive/2008/10/23/model-binding-to-a-list.aspx](http://haacked.com/archive/2008/10/23/model-binding-to-a-list.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T02:19:58.520

可能需要发布更多你的代码，这样我才能看到你在做什么。但是，您需要将模型传递给您尝试在发布请求中检索的响应的视图/部分视图。

如果不是，您将不得不遍历将返回的表单集合和操作方法类型，例如 ActionMethodName(FormCollection 表单)，一个问题是名称与 id，它是用于获取值的 Kendo UI 控件的名称，而不是ID。

# perl - 哈希的花括号

> ID：12342856
> 
> 赞同：0
> 
> 时间：2012-09-09T20:47:38.140
> 
> 标签：perl

在 Perl 中创建如下哪个结构？

```
my $self = { Name => $name, Color => $class->default_color }; 
```

如果它是一个哈希，那么官方符号不是以下（括号，`%`而不是`$`）：

```
my %self = ( Name => $name, Color => $class->default_color ); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-09T20:49:44.353

中的数据`{ ... }`是哈希参考。

里面的数据`( ... )`是一个列表，但是上下文使它变成了一个散列。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-09T20:49:10.423

好吧，它仍然是一个哈希 - 但一个匿名的。并将其引用分配给`$self`. [医生](http://perldoc.perl.org/perlref.html#Making-References)说：

> 可以使用大括号创建对匿名哈希的引用：

```
$hashref = {    
  'Adam'  => 'Eve',     
  'Clyde' => 'Bonnie',
}; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-09T22:27:26.857

Perl 没有散列的文字表示，所以我们创建一个散列作为键值对的列表。匿名散列构造函数或对命名散列的赋值将键值对列表转换为散列。

第一行创建了一个哈希引用，您将其分配给一个标量变量：

```
my $self = { Name => $name, Color => $class->default_color }; 
```

底线将列表分配给命名哈希：

```
my %self = ( Name => $name, Color => $class->default_color ); 
```

# javascript - Youtube JavaScript API 未初始化

> ID：12342858
> 
> 赞同：0
> 
> 时间：2012-09-09T20:47:51.557
> 
> 标签：javascript, api, youtube, initialization

使用 YouTube 的 JavaScript API 控制 iFrame 嵌入。我已经设置了函数并且没有看到任何错误...但是我没有记录[此处](https://developers.google.com/youtube/js_api_reference#EventHandlers)记录的 API 初始化。

是的，它在服务器上运行，而不是在本地运行：http: [//jp.redwoodmatthews.com](http://jp.redwoodmatthews.com)

我错过了什么吗？下面是 HTML 和 JavaScript！谢谢你的帮助。

* * *

iFrame HTML：

```
<iframe id="ryanBingham" src="http://www.youtube.com/v/Xz5SNppHRxc?rel=0?enablejsapi=1&version=3&playerapiid=video" frameborder="0"></iframe> 
```

JavaScript：

```
function onYouTubePlayerReady(playerId) {
    video = document.getElementById('ryanBingham');

    video.addEventListener('onStateChange', 'onytplayerStateChange');

    console.log('YouTube API initiated');
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T21:10:31.737

您使用了错误的 API 文档。这适用于 iframe：[https ://developers.google.com/youtube/iframe_api_reference](https://developers.google.com/youtube/iframe_api_reference)

由于相同的来源限制，它的工作方式略有不同。此外，就绪函数被命名为`onYouTubeIframeAPIReady`.

最后但同样重要的是，确保[加载 API JS 文件](https://developers.google.com/youtube/iframe_api_reference#Getting_Started)

# mysql - 学习 SQL：UNION 还是 JOIN？

> ID：12342866
> 
> 赞同：0
> 
> 时间：2012-09-09T20:49:20.840
> 
> 标签：mysql, sql

如果这看起来像是常识，请原谅我，因为我仍在学习如何在多个表之间拆分数据。

基本上，我有两个：

*   **`general`**与田野`userID,owner,server,name`
*   **`count`**与田野`userID,posts,topics`

我希望从他们那里获取数据，但无法决定我应该如何做：在一个 UNION 中：

```
SELECT `userID`, `owner`, `server`, `name`
FROM `english`.`general` 
WHERE `userID` = 54 LIMIT 1 
UNION
SELECT `posts`, `topics` 
FROM `english`.`count` 
WHERE `userID` = 54 LIMIT 1 
```

或加入：

```
SELECT `general`.`userID`, `general`.`owner`, `general`.`server`, 
       `general`.`name`, `count`.`posts`, `count`.`topics` 
FROM `english`.`general` 
JOIN `english`.`count` ON 
     `general`.`userID`=`count`.`userID` AND `general`.`userID`=54 
LIMIT 1 
```

您认为哪种方法更有效，为什么？或者也许两者都太乱了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T20:52:01.123

这与效率无关，而与它们的工作方式有关。

`UNION`只是联合 2 个不同的*独立*查询。所以你一个接一个地得到 2 个结果集。

`JOIN`将一个结果集中的每一行附加到另一个结果集中的每一行。因此，在整个结果集中，您有“长”行（就列数而言）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-21T11:58:59.200

只是为了完整性，因为我认为其他地方没有提到它：通常 UNION ALL 是人们使用 UNION 时的意图。

UNION 将删除重复项（因此相对昂贵，因为它需要排序）。这将删除最终结果中的重复项（因此，单个查询中是否存在重复项或来自单个 SELECT 的相同数据并不重要）。UNION 是一个集合操作。

UNION ALL 只是将结果粘在一起：没有排序，没有重复删除。这将比 UNION 更快（或至少不会更糟）。

如果您知道单个查询不会返回重复的结果，请使用 UNION ALL。（事实上​​，如果您需要这种行为，通常最好假设 UNION ALL 并考虑 UNION；将 SELECT DISTINCT 与 UNION 一起使用是多余的）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-09T20:51:47.940

您想使用 JOIN。连接用于创建单个集合，该集合是相关数据的组合。您的联合示例没有意义（并且可能不会运行）。UNION 用于链接具有相同列的两个结果集以创建具有组合行的集合（它不会“联合”列。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-09T20:59:57.030

如果您想获取用户并靠近用户帖子和主题。您需要使用 JOIN 编写 QUERY，如下所示：

```
SELECT general.*,count.posts,count.topics FROM general LEFT JOIN count ON general.userID=count.userID 
```

# vba - 如何避免 VBA 中的默认属性陷阱？

> ID：12342869
> 
> 赞同：10
> 
> 时间：2012-09-09T20:49:52.057
> 
> 标签：vba, excel

我只是偶尔使用 VBA，每次我回到它时，我都会被以下的一些变化所吸引：

我有一个`Range`对象 ，`currentCell`我用它来跟踪我在电子表格中使用的单元格。当我更新它以指向不同的单元格时，我写道：

```
currentCell = currentCell.Offset(ColumnOffset:=1) 
```

问题是我忘记了`Set`关键字，所以上面这行实际上是使用`Range`对象的默认属性：

```
currentCell.Value = currentCell.Offset(ColumnOffset:=1).Value 
```

所以当前单元格的内容被新单元格中的内容覆盖，我的`currentCell`变量没有改变为指向一个新单元格，当我意识到我已经一百次犯了同样的错误时，我充满了愤怒.

可能没有比在我的显示器上贴一个便利贴说“你记得今天使用 Set 了吗？”更好的答案了，但如果有人有任何建议可以帮助我，我会很高兴听到他们的意见。尤其：

*   当您隐式使用默认属性时，有什么方法可以打开警告？我从来没有故意这样使用它们，`Range.Value`如果我是这个意思，我总是会打电话。
*   将变量标记为“这只应用于从电子表格中读取”有什么好的做法吗？在我编写的大多数代码中，几乎所有变量都用于收集数据，如果某些东西开始无意中编辑这样的单元格，那么得到警告会很方便。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-09T21:55:11.843

我花了一段时间才明白你是如何遇到问题的，因为尽管多年来我一直使用范围对象，但我认为我*从来没有遇到*过这个问题。在考虑了一些事情之后，我意识到我在使用单元格时 100% 的时间都在做以下事情——我经常使用`offset`or`cells`函数——我很少用它`Set`来重新定义当前变量。

如果我有一个循环遍历电子表格，我可能会做类似的事情

```
Dim startRng as Range
Set startRng = range("A1")

for i = 1 to 100
   startRng.offset(i,0).value = i
   startRng.offset(i,1).value = startRng.offset(i,0).value
next i 
```

或者

```
for i = 1 to 100
    cells(i,0).value = i
    cells(i,1).value = cells(i,0).value
next i 
```

这些符号中的任何一个都意味着我几乎不需要`Set`与范围对象一起使用 - 几乎总是这种情况发生一次（如果有的话）并指示我将迭代或引用的范围中的第一个单元格。

它是什么也很清楚`offset`- 因为您指定了 a `row/column`- 这使得代码中发生的事情变得非常简单并且更容易跟踪，因为它引用了单个单元格。您不必追踪并追溯至您更新`currentCell` `Range`对象的最后 3 个位置。

采用使用这些风格的编码风格应该可以消除您所犯的几乎所有这些错误。当我说我不记得在编写 VBA 的这些年中曾经犯过类似的错误时，我非常认真 - 我在我的代码中连续使用`offset`and`cells`函数（这些示例中的循环，但我在代码中的所有其他示例中使用类似的方法）而不是将范围设置为新范围。副作用是，当您在代码中设置范围时，它几乎总是紧跟在`Dim`语句之后并且更加清晰。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-09T21:43:13.897

无论你选择做什么，恐怕你都需要便利贴。毕竟，将范围对象的值设置为另一个单元格中的值是一件非常有效且常见的事情。代码无法知道您希望它做任何事情，而不是您要求它做的事情。

您可以尝试在更新之前和之后检查范围对象的地址以确保它不同，但如果您记得这样做，您最好简单地使用`set`关键字以您想要的方式更新对象。

既然这个问题已经激怒了您，以至于发布您的问题，我想您将永远不会再忘记它，无论您下次访问 VBA 之前有多少时间。所以也许你根本就不需要便利贴。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-10T06:32:50.590

> 可能没有比在我的显示器上贴一个便利贴说“你记得今天使用 Set 了吗？”更好的答案了，但如果有人有任何建议可以帮助我，我会很高兴听到他们的意见。尤其：

我会稍微改变一下 Post It 上的措辞

*“你确定你没有忘记使用选项显式和错误处理吗？”*

否则相信我没有更好的办法！话虽如此，我想确认“使用 Set”是您最不担心的问题。你最担心的应该是“编写好的代码”，这不是一朝一夕的事。这一切都来自实践。

我对所有初学者的建议。永远不要假设！例如，`.Value`是范围的默认属性，所以

```
Range("A1") = "Blah" 
```

是正确的。但仍然避免使用它。

1.  始终完全限定您的变量
2.  始终使用选项显式
3.  始终使用错误处理

例如，这有效。

```
Option Explicit

Sub Sample()
    Dim ws As Worksheet
    Dim rng As Range

    On Error GoTo Whoa

    Set ws = ThisWorkbook.Sheets("Sheet1")
    Set rng = ws.Range("A1")
    rng.Value = "Blah"

    Exit Sub
Whoa:
    MsgBox Err.Description
End Sub 
```

现在让我们在不使用 Set 命令的情况下尝试上面的代码。试试下面的代码。发生什么了？

```
Option Explicit

Sub Sample()
    Dim ws As Worksheet
    Dim rng As Range

    On Error GoTo Whoa

    ws = ThisWorkbook.Sheets("Sheet1")
    rng = ws.Range("A1")
    rng.Value = "Blah"

    Exit Sub
Whoa:
    MsgBox Err.Description
End Sub 
```

**推荐阅读。**

**主题**：“犯错”是人之常情

**链接**：[http ://siddharthout.wordpress.com/2011/08/01/to-err-is-human/](http://siddharthrout.wordpress.com/2011/08/01/to-err-is-human/)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-09-10T06:50:17.860

> 当您隐式使用默认属性时，有什么方法可以打开警告？

不。

> 将变量标记为“这只应用于从电子表格中读取”有什么好的做法吗？

好吧，您可以制定自己的变量命名约定，就像[让错误的代码看起来错误](http://www.joelonsoftware.com/articles/Wrong.html)一样，但您仍然必须直观地检查自己的代码，编译器不会帮助您做到这一点。所以我不会太依赖这个。

更好的选择是完全避免重复重新定义`currentCell`使用的需要`.Offset`。

取而代之的是，将感兴趣的整个范围读取到 Variant 数组，在该数组上进行操作，然后在完成修改后将其重新放到工作表上。

```
Dim i As Long
Dim j As Long
Dim v As Variant
Dim r As Range

Set r = Range("A1:D5") 'or whatever

v = r.Value 'pull from sheet

For i = 1 To UBound(v, 1)
    For j = 1 To UBound(v, 2)
        'code to modify or utilise element v(i,j) goes here
    Next j
Next i

r.Value = v 'slap v back onto sheet (if you modified it) 
```

瞧。不使用默认属性或任何可能被混淆的东西。作为奖励，这将加快您的代码执行速度。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-09T23:11:57.603

我认为 enderland 强调了基本的解决方案，即在一个循环中处理多个单元格。为了更进一步，我建议使用 For Next 循环在单元格中循环。我写的最常见的代码可能是这样的：

```
Dim cell as Excel.Range
Dim rngCellsToProcess as Excel.Range

Set rngCellsToProcess = 'whatever you set it to
For each cell in rngCellsToProcess 
   'do something
Next cell 
```

这不会消除对 Set 的需要，但可能有助于提醒您使用它，同时让您更清楚正在发生的事情。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-09T21:12:01.750

也许编写您自己的自定义函数并改用它？

```
Sub offset_rng(ByRef my_rng As Range, _
    Optional row As Integer, Optional col As Integer)
    Set my_rng = my_rng.Offset(row, col)
End Sub 
```

可以这样使用：

```
Sub test()
    Dim rng As Range
    Set rng = Range("A1")
    offset_rng my_rng:=rng, col:=1
    rng.Value = "test1"
    offset_rng my_rng:=rng, col:=1
    rng.Value = "test2"
    offset_rng my_rng:=rng, col:=1
    rng.Value = "test3"
    offset_rng my_rng:=rng, col:=1
    rng.Value = "test4"
End Sub 
```

# html - web - 组合框选择和 jquery

> ID：12342871
> 
> 赞同：0
> 
> 时间：2012-09-09T20:50:22.933
> 
> 标签：html, combobox

```
<div id="1">
<select id="combobox1">
 <option value="">mark this</option>
 <option value="green">long</option>
 <option value="blue">normal</option>     
</select>

<select id="combobox2">
 <option value="">mark this</option>
 <option value="green">long</option>
 <option value="blue">normal</option>     
</select>
</div>

<div id="2">
<span id="span1" >hello world</span>
<span id="span2" >good morning</span>
</div>

<div id="3">
</div>
<div id="4">
</div> 
```

我想根据组合框的选择向 span 标签添加背景颜色。

“combobox1”用于“span1”，“combobox2”用于“span2”。更改颜色时应在“div3”内添加一个带有href“#[跨度标签的id]”的锚标签。

谢谢你的回答。

“我需要获取 id 和值 auto。”

```
$('#combobox1').change(function() {
$('#span1').css('backgroundColor', $(this).val());
$('#div3').html('<a href="#span1">span1</a>');
}); 
```

在这里（上面是来自 stackoverflow 用户的回答 1）组合框的 ID 被定义。如果 id 不是静态的会发生什么？动态ID？？？就我而言，有几个文本框和组合框。跨度标签没有问题。

我需要得到 ID 和 VALUE 自动而不像上面那样预先定义它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T23:29:32.923

将`change`事件处理程序附加到每个组合框：

```
$('#combobox1').change(function() {
    $('#span1').css('backgroundColor', $(this).val());
    $('#div3').html('<a href="#span1">span1</a>');
});

$('#combobox2').change(function() {
    $('#span2').css('backgroundColor', $(this).val());
    $('#div3').html('<a href="#span2">span2</a>');
}); 
```

# c++ - 最后挂钩一个过程

> ID：12342875
> 
> 赞同：0
> 
> 时间：2012-09-09T20:50:44.850
> 
> 标签：c++, winapi, hook

我目前正在为一个应用程序制作一个插件，由于它不处理 WM_MBUTTONDOWN 消息，我决定挂钩 WNDPROC 但似乎另一个插件也挂钩它并处理此消息（因为应用程序按字母顺序加载插件，有可能我可能不会最后挂钩 WNDPROC，导致其他插件首先处理消息）。这意味着我必须是最后一个挂钩 WNDPROC 才能获取这些消息的人。

那么，是否有任何可靠的（不依赖于字母顺序等）最后挂钩程序的方法？

编辑：通过使用 SetWindowLong 函数将窗口的 DWL_WNDPROC 属性更改为地址挂钩过程来完成挂钩。然后使用 CallWindowProc 从挂钩过程中调用原始的 DWL_WNDPROC。抱歉没有说清楚！

谢谢，通图尼。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T21:09:27.300

好吧，在您安装的窗口 proc 回调中，您可以通过`GetWindowLongPtr`调用检查当前窗口 proc，`SetWindowLongPtr`如果有人更改它，则重新安装您的 proc。当然，这很危险，至少需要保护您的窗口进程免于重入（通常使用静态计数器）以避免无限递归。

您也可以尝试使用由[`SetWindowsHookEx`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644990%28v=vs.85%29.aspx)API 函数安装的系统范围的钩子而不是窗口子类化 -[`WH_MOUSE`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644988%28v=vs.85%29.aspx)或[`WH_MOUSE_LL`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644986%28v=vs.85%29.aspx)钩子而不是`WH_CALLWNDPROC`. 它应该在窗口过程被调用之前被调用（在`GetMessage`LL 钩子上甚至在鼠标消息发布时），因此它应该在`WH_CALLWNDPROC`调用任何钩子之前发生。

# ios - 'homeViewController' 的本地声明隐藏实例变量警告 IOS 错误

> ID：12342880
> 
> 赞同：0
> 
> 时间：2012-09-09T20:51:03.243
> 
> 标签：ios, uiviewcontroller, uinavigationcontroller

```
 //Skip straight to main home view
    MySpyHomeViewController *homeViewController = [[MySpyHomeViewController alloc] initWithNibName:nil bundle:nil];
    self.navController = [[UINavigationController alloc] initWithRootViewController:homeViewController]; 
```

如果用户已经登录到应用程序，我使用上面的代码直接跳到一个视图。

我在最后一行收到错误。'homeViewController' 的本地声明隐藏了实例变量警告。

我已经阅读了一些其他线程，例如：[本地声明隐藏实例变量警告](https://stackoverflow.com/questions/8470502/local-declaration-hides-instance-variable-warning) 我不完全理解为什么会发生此错误。有人可以

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T20:54:35.133

如果您已经`homeViewController`在头`.h`文件 () 中声明了变量，那么将上述代码放在您的实现 ( `.m`) 文件中意味着实例（全局）变量不会被设置为 的实例`MySpyHomeViewController`，而是实例化一个局部变量并设置为的一个实例`MySpyHomeViewController`。

为了解决这个问题，您需要更改第一行代码，如果 homeViewController 打算成为以下实例，则它看起来像这样`MySpyHomeViewController`：

```
//Skip straight to main home view
homeViewController = [[MySpyHomeViewController alloc] initWithNibName:nil bundle:nil];
self.navController = [[UINavigationController alloc] initWithRootViewController:homeViewController]; 
```

否则，您需要将此变量重命名为其他名称，以免与全局变量的名称冲突

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-09T20:54:42.833

这意味着您在同一范围内有一个实例变量，其名称为`homeViewController`.

因此，您希望通过重命名临时文件来避免歧义：

```
MySpyHomeViewController * homeView = [[MySpyHomeViewController alloc] 
                          ^^^^^^^^              initWithNibName:nil bundle:nil];
self.navController =
  [[UINavigationController alloc] initWithRootViewController:homeView];
                                                             ^^^^^^^^ 
```

* * *

更详细地说，您的示例出现在一个实例方法中，并且实现该方法的类有一个名为的实例变量`homeViewController`——一个实例变量可以在 objc 的许多地方声明，例如：

* * *

```
@interface MONClass : NSObject
{
@private
  HomeViewController * homeViewController;
} 
```

* * *

```
@interface MONClass ()
{
  HomeViewController * homeViewController;
} 
```

* * *

```
@implementation MONClass
{
  HomeViewController * homeViewController;
} 
```

* * *

```
@interface MONClass : NSObject
@property (nonatomic, retain, readwrite) HomeViewController * homeViewController;
@end

@implementation MONClass
@synthesize homeViewController = homeViewController;
@end 
```

# sqlite - 将 Python3 和 sqlite3 与复杂的 unicode 字符串一起使用

> ID：12342889
> 
> 赞同：2
> 
> 时间：2012-09-09T20:52:08.930
> 
> 标签：sqlite, unicode, python-3.x

我必须在数据库中存储复杂的 unicode 字符串，例如“ʘ̃”（[一个 IPA 符号](http://en.wikipedia.org/wiki/Nasal_clicks)）。这些字符串包含特殊字符，例如带有不寻常变音符号的 k͡p。我决定使用 sqlite3 并编写以下行来创建我的数据库：

```
import sqlite3
conn = sqlite3.connect('/tmp/example.db')
c = conn.cursor()
c.execute('create table mytable (mystring unicode)')
c.execute("insert into mytable values ('ʘ̃ʘ͡qʘ͡qʼ)") 
```

然后我用这些说明阅读了“mytable”：

```
c.execute('select * from mytable order by trans')
for row in c:
    print(c) 
```

但是我只得到一个缺少字符的格式错误的字符串，而我的字符串中最简单的字符仍然存在。相同的代码与常用字符（如 é、â、ö、...）完美配合。此代码来自[Python 3.2.3 文档](http://docs.python.org/py3k/library/sqlite3.html)。sqlite3 不能存储任何 unicode 字符吗？

任何帮助将不胜感激 ！

PS：我的文件使用 utf-8 编码：

```
# -*- coding: utf-8 -*- 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T21:26:05.790

很抱歉给您带来不便，但我的代码运行良好：是我的终端显示了有关 sqlite 返回值的错误信息。

# c - 如何在不丢失任何信息的情况下将十六进制的 unsigned int[16] 转换为 unsigned char 数组？

> ID：12342890
> 
> 赞同：0
> 
> 时间：2012-09-09T20:52:21.583
> 
> 标签：c, byte, memcpy

我有一个 unsigned int[16] 数组，打印出来时看起来像这样：

4418703544ED3F688AC208F53343AA59

用于打印出来的代码是这样的：

```
for (i = 0; i < 16; i++)
    printf("%X", CipherBlock[i] / 16), printf("%X",CipherBlock[i] % 16);
printf("\n"); 
```

我需要将这个无符号整数数组“CipherBlock”传递给只接受无符号字符 * 的解密（）方法。如何正确地将“CipherBlock”数组中的所有内容存储到无符号字符数组中而不会丢失信息？

我的理解是 unsigned int 是 4 个字节， unsigned char 是 1 个字节。由于“CipherBlock”是 16 个无符号整数，因此以字节为单位的总大小 = 16 * 4 = 64 字节。这是否意味着我的 unsigned char[] 数组长度必须为 64？

如果是这样，以下工作是否可行？

```
unsigned char arr[64] = { '\0' };
memcpy(arr,CipherBlock,64); 
```

这似乎不起作用。由于某种原因，它只将“CipherBlock”的第一个字节复制到“arr”中。此后“arr”的其余部分为“\0”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T21:02:22.703

为什么不直接将`CipherBlock`指针投射到`unsigned char *`并传递它？

```
decrypt((unsigned char *)CipherBlock); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-09T21:14:02.087

An*至少为*`int`16位，在这方面与 a 相同。*`short`*

 *在您的情况下，看起来每个`unsigned int`都有值 0-255 或 00-FF，这是`unsigned char`. 但是，将一个转换为另一个的正确方法是强制转换：

```
for (int i=0; i<16; ++i) arr[i] = (unsigned char) CipherBlock[i]; 
```

但是您还没有指定`decrypt()`期望什么样的数据。从签名中，我怀疑整数数据（字符串通常是`char*`or `const char*`）但是如果没有上下文就很难确定。

请注意，您也可以`printf("%02X", CipherBlock[i]);`进行打印。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-09T21:14:50.180

您需要重新打包数字，这样您就不能使用 memcpy 或直接转换它。Aib 说得对。

```
unsigned char array[16];
for(int i = 0; i < 16; i++) {
    array[i] = CipherBlock[i];
} 
```*

# c - 我可以将什么用作 select() 的文件描述符的存根

> ID：12342891
> 
> 赞同：0
> 
> 时间：2012-09-09T20:52:29.313
> 
> 标签：c, sockets

我正在尝试`select()`2 个套接字。我有一个主循环和一组我是`fd_set()`fds 的。其中一个文件描述符在开始时是未知的，只有在我从另一个套接字获取 fd 之后，我才知道第一个，但对我来说只有 1 个主循环和 1 个仍然很重要`select()`。

是否有可能/良好做法执行以下操作：

```
a = -1;    // IS THIS RIGHT TO GIVE -1 TO SELECT?
b = known_file_descriptor;

while(1)
{
    fd_zero(set) 
    fd_set(set, a); 
    fd_set(set, b);

    select(set,read,NULL,NULL,NULL)

    if(is_Set(a))
    ...

    if(is_set(b))
    ...
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T20:14:49.813

文件描述符只是整数。我建议您使用一个整数数组来存储文件描述符，并使用一个附加的 fd_number 变量来存储数组中描述符的数量。如果您只有 2 个，则可以将它们保存在单独的变量（a 和 b）中，并保留第三个变量来告诉您设置 a 或不设置的天气。

```
int a, b, a_is_known=0;
b = known_file_descriptor;

while(1)
{
    fd_zero(set) 
    fd_set(set, b); 
    if (a_is_known) {
        fd_set(set, a);
    }    

        select(set,read,NULL,NULL,NULL)
    if (a_is_known){    
        if(is_Set(a))
        ...
    }
    if(is_set(b))
        ...
} 
```

# asp.net-mvc - 返回 json 的非常小的 asp.net mvc 动作的单元测试

> ID：12342892
> 
> 赞同：0
> 
> 时间：2012-09-09T20:52:35.567
> 
> 标签：asp.net-mvc, unit-testing, action

我的操作的第一行通过额外的集成测试进行了测试。第二行是用额外的单元测试测试自动映射器映射的东西第三行然后是未经测试的。

下面的单元测试是否测试第三行？因为它只是测试返回类型。

这对我来说似乎很愚蠢或太琐碎。该方法还应该返回什么？？？

此操作中没有 if/else 逻辑。因此，仅测试 type == JsonNetResult 对我来说似乎是多余的。如果有人删除了 success = true 匿名类型，我什至不会在我的单元测试中意识到。

我应该用 QUnit 测试 JsonNetResult 的数据吗？

我会很高兴得到一些指导和提示，因为返回 Json 数据的操作让我发疯......它只是从 db 中获取数据并将其放入 JsonNetResult 对象中。

**行动**

```
[HttpGet]
public ActionResult GetTemplateRootUnits(int templateId)
{
    IEnumerable<Unit> units = _dataProvider.GetTemplateRootUnits(templateId);
    IEnumerable<UnitTreeViewModel> unitTreeViewModels = Mapper.Map<IEnumerable<Unit>, IEnumerable<UnitTreeViewModel>>(units);
    return new JsonNetResult(new { data = unitTreeViewModels, success = true });
} 
```

**单元测试**

```
[Test]
public void GetTemplateRootUnits_TemplateExists_ReturnsJsonNetResult()
{
    // ARRANGE  
    Mock<IUnitDataProvider> mock1 = new Mock<IUnitDataProvider>();
    Mock<IMappingEngine> mock2 = new Mock<IMappingEngine>();
    Mock<ControllerContext> mock3 = new Mock<ControllerContext>();
    UnitController controller = new UnitController(mock1.Object, mock2.Object);
    mock1.Setup(m => m.GetTemplateRootUnits(1)).Returns(new List<Unit> 
    { 
        new Unit{ UnitId = 1, Name = "Name1", HasChildren = false},
        new Unit{ UnitId = 2, Name = "Name2", HasChildren = false},
        new Unit{ UnitId = 3, Name = "Name3", HasChildren = false},
    });

    var unitTreeViewModels = new List<UnitTreeViewModel> 
    { 
        new UnitTreeViewModel { Id = 1, Name = "Name1", HasChildren = false},
        new UnitTreeViewModel { Id = 2, Name = "Name2", HasChildren = false},
        new UnitTreeViewModel { Id = 3, Name = "Name3", HasChildren = false},
    };

    // Thats the way AutoMapper is mocked
    mock2.Setup(m => m.Map<IEnumerable<Unit>, IEnumerable<UnitTreeViewModel>>(It.IsAny<IEnumerable<Unit>>())).Returns(unitTreeViewModels);

    // ACT
    ActionResult result = controller.GetTemplateRootUnits(1);

    // ASSERT - check that the dataProvider.GetTestplanRootUnits() was called
    mock1.Verify(m => m.GetTemplateRootUnits(1));

    // ASSERT
    Assert.IsInstanceOfType(typeof(JsonNetResult), result);
} 
```

**JsonNetResult.cs**

```
public class JsonNetResult : ContentResult
    {
        private readonly object _data;
        public JsonNetResult(object data)
        {
            _data = data;
        }

        public override void ExecuteResult(ControllerContext context)
        {
            Content = JsonConvert.SerializeObject(_data);
            ContentType = "application/json";
            base.ExecuteResult(context);
        }
        public object Data { get { return _data; } }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T20:59:37.997

您不需要测试返回值的类型。您需要在方法的签名中设置返回值的类型。

```
public JsonNetResult GetTemplateRootUnits(int templateId); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T07:06:25.370

您还没有展示这个`JsonNetResult`类是什么，但我会假设它是使用 JSON.NET 作为序列化程序而不是默认的 JavaScriptSerializer 的一些自定义操作结果。我还将假设这个类公开了一个对象类型的公共属性，称为`Data`保存要序列化的模型：

```
public class JsonNetResult: ActionResult
{
    public JsonNetResult(object data)
    {
        Data = data;
    }
    public object Data { get; private set; }

    ...
} 
```

因此，您可以测试结果中的数据：

```
// ASSERT
Assert.IsInstanceOfType(typeof(JsonNetResult), result);

var jsonResult = result as JsonNetResult;
var data = new RouteValueDictionary(jsonResult.Data);
Assert.IsTrue((bool)data["success"]);
Assert.IsInstanceOfType(data["data"], typeof(IEnumerable<UnitTreeViewModel>));
Assert.AreEqual(unitTreeViewModels, data["data"]); 
```

# mysql - MySQL 查询仅在字符串不包含数字时有效

> ID：12342895
> 
> 赞同：0
> 
> 时间：2012-09-09T20:53:07.907
> 
> 标签：mysql, mamp

好的，所以查询非常简单：

```
SELECT a, b, c FROM d WHERE a = ('x' OR 'y' OR 'z'); 
```

这个查询效果很好，但如果我要查询的话，这个：

```
SELECT a, b, c FROM d WHERE a = ('x' OR 'y' OR 'z' OR 'x1'); 
```

由于“x1”中的数字，不会返回任何行。

我正在使用 mysql 5.5.9，并且我正在使用 MAMP 在我的 Mac 上运行虚拟服务器（如果重要的话）

谢谢你们的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T21:04:43.730

试试这些

```
SELECT a, b, c FROM d WHERE a IN ('x','y','z','x1'); 
```

或者

```
SELECT a, b, c FROM d 
WHERE a = 'x' OR a = 'y' OR a = 'z' OR a = 'x1'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-09T21:04:54.250

正确的查询是：

```
select a, b, c from d where a IN ('x', 'y', 'x1') 
```

`IN`子句根据其他结果评估表达式。如果您的字段 a 是 varchar，则应将所有 varchars 放入您的`IN`子句

该查询应该有效。如果您想阅读有关内容`IN`，请参阅此[示例](http://www.tutorialspoint.com/mysql/mysql-in-clause.htm)

# php - iPhone 强制下载文件？

> ID：12342896
> 
> 赞同：1
> 
> 时间：2012-09-09T20:53:17.153
> 
> 标签：php, javascript, jquery, iphone, html

我正在尝试允许用户下载文件。

下载文件后，它会显示在浏览器窗口中，而不是下载它。

有谁知道让 iPhone 下载文件而不是查看文件的方法。

此外，我尝试过的所有代码都在 Android 设备上运行良好。

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-09T21:07:51.690

你不能。苹果故意阻止这样的事情，以保护他们的 iOS 免受黑客和恶意软件的侵害；您无权访问（除非您是开发人员，在这种情况下受限制）手机集成数据存储。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T01:28:05.300

您是在编写一个下载图像的程序，还是以用户身份尝试这样做？

如果您正在编写程序，则只能将文件下载到有限数量的位置。您的应用程序的文档目录是最明显的选择。

您将需要创建一个 NSURLRequest，然后是一个 NSURLConnection，然后实现一些委托方法来处理传入的数据。然后您需要使用 NSFileManager 方法将数据写入文件。

# javascript - 调用时 For-Loop 不运行

> ID：12342898
> 
> 赞同：0
> 
> 时间：2012-09-09T20:53:33.430
> 
> 标签：javascript, for-loop

**代码：**

```
function SnakeGame() {
    "use strict";

    /***** Constant & Global Variables ***********************************/
    var canvas = $("#canvas")[0];
    var ctx  = canvas.getContext('2d');
    var width = $("#canvas").width();
    var height = $("#canvas").height();

    var snake, food;

    function Snake() {
    var startLength = 5; // default for starting size of snake
    this.body = [];

    this.chgStartLength = function(length) {
        startLength = length;
    };

    this.create = function() {
        var i;
        for(i=0; i>5; i++) {
        this.body.push({x:i, y:0});
        }
    };  
    }

    var paintCanvas = function() {
    ctx.fillStyle = 'white';
    ctx.fillRect(0, 0, width, height);
    ctx.strokeStyle = 'black';
    ctx.strokeRect(0, 0, width, height);
    };

    var paintFrame = function() {
    var i, length = snake.body.length;
    for(i=0; i<length; i++) {
        var cell = snake.body[i];
        ctx.fillStyle = 'black';
        ctx.fillRect(cell.x*10, cell.y*10, 10, 10);
        ctx.strokeStyle = 'white';
        ctx.strokeRect(cell.x*10, cell.y*10, 10, 10);
    }
    };

    this.start = function() {
    snake = new Snake();
    snake.create();

    paintCanvas();
    paintFrame();
    console.log(snake.body); //for testing
    };

} 
```

由于某种原因`snake.body`，即使在`start`执行之后也是一个空数组。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-09T20:55:43.897

```
for(i=0; i>5; i++) { 
```

我相信这`>`是朝着错误的方向前进。

```
for(i = 0; i < 5; i++) { 
```

# php - 使用 PostgreSQL 和 PHP 获取查询结果

> ID：12342901
> 
> 赞同：1
> 
> 时间：2012-09-09T20:54:25.843
> 
> 标签：php, sql, database, postgresql

我正在尝试让我的 postgresql 工作。我以前使用过 sql，但从未使用过 postgres。

我觉得下面应该显示一个很好的输出表。

我已经在几个地方测试了 php，结果变量似乎没有返回任何东西，所以是一个 false 值的布尔值，所以没有任何东西被检索。如果有人可以帮助我找到错误，我将不胜感激。

```
if($queryType != NULL)

    echo'<table>;
    if($limit == NULL && $offset == NULL)
    {
    $query = 'SELECT * FROM $1';
    $stmt = pg_prepare($connection, "limitoffset", $query);
    $result = pg_execute($connection, "limitoffset", array($queryType));

    if($queryType == 'city'){
    while($row = pg_fetch_assoc($result)){
    echo '<tr>'; 
    echo '<td>' . $row['id] . '</td>';
    echo '</tr>';
    }
 echo '</table>'; 
```

再次，它编译并运行，但似乎 $row 在查询后返回为假，因此循环没有运行以打印结果，因为它没有。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T21:22:44.903

您不能使用占位符作为标识符（即表或列名），因此：

```
select * from $1 
```

不会工作。如果您希望表名成为变量，我认为您会遇到字符串插值：

```
$table = pg_escape_identifier($queryType);
$query = "SELECT * FROM $table"; 
```

您将希望使用它[`pg_escape_identifier`](http://php.net/manual/en/function.pg-escape-identifier.php)来避免出现奇怪值的问题，`$queryType`但请记住，这`pg_escape_identifier`将给标识符加上双引号，这可能会给您带来区分大小写的问题。

您的问题中还缺少两个单引号：一个 in`echo'<table>;`和另一个 in`. $row['id] .`但这些可能只是在您的问题文本中，因为您说代码可以编译和运行。

# python - python noob 在发送谷歌语音文本时遇到问题

> ID：12342907
> 
> 赞同：2
> 
> 时间：2012-09-09T20:55:08.167
> 
> 标签：python, sms, beautifulsoup, google-voice

我正在编写一个简单的小脚本，以便在 Ultra 音乐节早鸟票开始销售时向我发送一条短信，以便我抢购它们。当我开始写这篇文章时，我认为 python 将是实现我目标的一种快速方法。我所做的是收集链接，然后对它们进行计数并确定是否有变化并将谷歌语音短信发送到几个号码。这是我针对 stackoverflow 运行的代码。

```
from googlevoice import Voice
from googlevoice.util import input
from bs4 import BeautifulSoup, SoupStrainer
from time import sleep
import urllib2
from array import *

#define login details
email = 'example@gmail.com'
password = 'password'
url = 'http://stackoverflow.com/questions'

def send_message(var_text):
    voice = Voice()
    voice.login(email, password)

    phoneNumber = array('L',[9998675309, 9998675309])   
    for i in phoneNumber:
        voice.send_sms(i, var_text)

#init
soup = BeautifulSoup(urllib2.urlopen(url).read(), parse_only=SoupStrainer('a'))

link_count = len(soup)

#start the loop
var = 1
while var == 1 :  # This constructs an infinite loop
    soup = BeautifulSoup(urllib2.urlopen(url).read(), parse_only=SoupStrainer('a'))
    if link_count != len(soup): 
        string = str('Link Count Changed\n\nSite:\n' + url + '\nPrev:\n' + str(link_count) + '\nNew:\n' + str(len(soup)))
        send_message(string)
        print (string)
        link_count = len(soup)
        sleep(10)
        pass
    else:
        print('Number of links ('+ str(link_count) + ') has not changed, going to sleep now.') 
        sleep(10)
        pass
print "Good bye!" 
```

这是我不断收到的错误（似乎只在发送到多个号码时发生）

```
doesn't work array('L',[9998675309, 9998675309])
works array('L',[9998675309]) 
```

错误：

```
bash-3.2# python gvsendalert.py 
Number of links (195) has not changed, going to sleep now.
Traceback (most recent call last):
  File "gvsendalert.py", line 32, in <module>
    send_message(string)
  File "gvsendalert.py", line 19, in send_message
    voice.send_sms(i, var_text)
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/googlevoice/voice.py", line 151, in send_sms
    self.__validate_special_page('sms', {'phoneNumber': phoneNumber, 'text': text})
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/googlevoice/voice.py", line 225, in __validate_special_page
    load_and_validate(self.__do_special_page(page, data))
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/googlevoice/util.py", line 65, in load_and_validate
    validate_response(loads(response.read()))
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/googlevoice/util.py", line 59, in validate_response
    raise ValidationError('There was a problem with GV: %s' % response)
googlevoice.util.ValidationError: There was a problem with GV: {u'data': {u'code': 58}, u'ok': False} 
```

好的，我已经考虑了你们中的一些人发布的内容并提出了这个问题。对于发送我的谷歌语音号码两次的号码数组，它将发送 2 条消息。如果我把我的朋友号码放在第二个它会打破它。这可能是因为我的朋友号码不是谷歌语音号码吗？我已经能够使用 Google Voice 和其他一些第 3 方 iPhone 应用程序向这个号码发送消息，所以我认为 python 模块会以相同的方式工作。

这是我的第二次修订代码：

```
def send_message(var_text):
    voice = Voice()
    voice.login(email, password)

    phoneNumber = ['myrealgooglenumber', 'myfriendsactualphonenumber']  
    for i in phoneNumber:
        print( str('sending to: ') + str(i))
        voice.send_sms(str(i), str(var_text))
        sleep(5)

#init
soup = BeautifulSoup(urllib2.urlopen(url).read(), parse_only=SoupStrainer('a'))

link_count = len(soup)

#start the loop
var = 1
while var == 1 :  # This constructs an infinite loop
    soup = BeautifulSoup(urllib2.urlopen(url).read(), parse_only=SoupStrainer('a'))
    if link_count != len(soup): 
        string = ('Link Count Changed\n\nSite:\n{0}\nPrev:\n{1}\nNew:\n{2}').format(url, link_count, len(soup))     
        send_message(string)        
        link_count = len(soup)
        print (string)
        sleep(10)
        pass
    else:
        string = ('Number of links ({0}) has not changed, going to sleep now.').format(str(link_count))
        print(string) 
        sleep(10)
        pass
print "Good bye!" 
```

已经用 2 个谷歌语音号码进行了测试，并且可以正常工作。仍然不适用于非谷歌语音号码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T22:00:55.353

Google 可能有一个计时器来防止您背靠背发送过多的 SMS 消息。

也许您可以尝试将循环更改为：

```
for i in phoneNumber:
    voice.send_sms(i, var_text)
    sleep(5) 
```

另一种想法是，如果您使用 2 个不同的电话号码会更好吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T22:10:04.803

看起来您正在使用整数作为电话号码。

电话号码*不是*真实的数字。

尝试使用字符串：

```
phoneNumber = ['9998675309', '9998675309'] 
```

此外，在样式说明中，请查看字符串格式：

```
string = 'Link Count Changed\n\nSite:\n{0}\nPrev:\n{1}\nNew:\n{2}').format(url, link_count, len(soup)) 
```

# bash - 将 Sublime Text 添加回 gitbash 命令行

> ID：12342909
> 
> 赞同：0
> 
> 时间：2012-09-09T20:55:42.063
> 
> 标签：bash, path, sublimetext2

我是编程和 bash 脚本的新手，所以这可能是一个简单的问题。

不久前，我安装了 Sublime Text 2 并对我的系统路径做了一些事情，这样每当我输入

$ sublime_text 文件.py

它会使用 Sublime 在当前文件夹中打开或创建 file.py。

但是，如果我现在这样做，我会收到一条错误消息“此 Sublime 版本已过期”。

关于我现在需要做什么的任何想法？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T21:05:40.123

[您可能正在使用 Sublime Text 2 的 beta 版本。更新您的应用程序并通过从此处](http://www.sublimetext.com/2)下载最新版本来确保您拥有最新版本

# visual-studio-2010 - 对象浏览器、完全限定程序集名称和配置文件

> ID：12342916
> 
> 赞同：3
> 
> 时间：2012-09-09T20:56:14.690
> 
> 标签：visual-studio-2010, .net-4.0, configuration, versioning

我需要在我的配置文件中添加一个 System 类，发现除非给定一个完全限定的程序集名称，否则它将无法工作。好的，不用担心，我会简单地查一下。

哦哦。

我希望 Visual Studio 中的对象浏览器拥有该信息。那太明显了。它不在那里。我开始搜索如何获取这些信息，发现[MSDN for .net 4 告诉我使用 Mscorcfg.msc](http://msdn.microsoft.com/en-us/library/2exyydhb%28v=vs.100%29.aspx)，除了 MSDN 还说[Mscorcfg.msc “已从 .NET 4 及更高版本中删除”。](http://msdn.microsoft.com/en-us/library/2bc0cxhc%28v=vs.100%29.aspx) 这不是一个吉祥的开始。

当然，有一些答案可以解释如何以编程方式进行操作；我已经知道该怎么做，这不是重点。我不想编写自己的程序只是为了找到要放入配置文件的程序集的 publickeytoken。

然后，我找到一篇[文章，建议将“sn.exe”](https://stackoverflow.com/questions/1710935/how-do-i-find-the-publickeytoken-for-a-particular-dll)用于不在 GAC 中的文件，并找到[建议 gacutil](https://stackoverflow.com/a/4682593/284758)用于其他所有文件的答案。其他一些人建议使用 RedGate 的 Reflector。叹。

我试图弄清楚为什么如此常见的活动 - 将完全限定的程序集名称插入配置文件 - 需要这样的“Visual Studio 6 时代”hokey-pokey firerill 来完成如此简单的事情。所以我们绕了一圈：为什么在地球上的对象浏览器不简单地提供这些信息？请告诉我，我错过了一个简单的 VS 配置选项，它解释了这是如何完成的。

需要明确的是，是的，我已经获得了我正在寻找的 FQAN。我只是不相信在谷歌搜索了一段时间后诉诸 GACUTIL.exe 应该是正确的答案。我错过了什么？

# python - 在子进程中的共享 c_wchar_p 中设置字符串的值？

> ID：12342917
> 
> 赞同：5
> 
> 时间：2012-09-09T20:56:18.320
> 
> 标签：python, multiprocessing, ctypes, shared

我有这样的情况：

主进程生成一些子进程，他们应该将结果写入字符串和数字类型的共享对象中，对于数字类型没有问题，但是对于字符串，值会丢失。

```
import multiprocessing as mp
from ctypes import Structure, c_double, c_wchar_p, c_int

# shared obj class
class SharedObj(Structure):
    _fields_ = [('name', c_wchar_p), ('val', c_double) ]

def run_mp( values , lock , s ) :
    for i in range( s , len( values ) , 2 ):
        lock.acquire()
        values[i].name = str( i ) # write the string value in the shared obj
        values[i].val = float( i )
        print( "tmp: %d" % i )
        lock.release()

def main():
    # creating the shared obj and mutex
    values = mp.Array(  SharedObj , [SharedObj() for i in range( 10 )] )
    lock_j = mp.Lock()

    # creating two sub-process form the function run_mp
    p1 = mp.Process( target=run_mp , args=( values , lock_j , 0 ))
    p2 = mp.Process( target=run_mp , args=( values , lock_j , 1 ))

    p1.start()
    p2.start()

    p1.join()
    p2.join()

    for v in  values:
        print()
        print( "res name: %s" % v.name )
        print( "res val: %f " % v.val )

if __name__ == '__main__':
    main() 
```

结果共享对象中包含 c_double 的字段被写入到字段中，但子进程 rum-mp( `string values[i].name = str( i )`) 中生成的字符串会在主进程中丢失。

有一种方法可以保存子流程中生成的字符串吗？

此代码的**输出**如下所示：

主进程中生成的字符串是完全随机的。

```
tmp: 0
tmp: 2
tmp: 3
tmp: 4

res name: ����羍����羍
res val: 0.000000
res name: ����羍����羍
res val: 1.000000
res name:
res val: 2.000000   .... 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-09T21:23:41.057

这是您的代码稍作修改的版本：

```
#!/usr/bin/env python

将多处理导入为 mp

def run_mp（值）：
    对于 c_arr，c_double 的值：
        c_arr.value = '你好 foo'
        c_double.value = 3.14

定义主（）：
    锁定 = mp.Lock()
    child_feed = []
    对于范围内的 i (10)：
        child_feed.append((
            mp.Array('c', 15, lock = lock),
            mp.Value('d', 1.0/3.0, lock = lock)
        ))

    p1 = mp.Process(target=run_mp, args=(child_feed,))
    p2 = mp.Process(target=run_mp, args=(child_feed,))

    p1.start()
    p2.start()

    p1.join()
    p2.join()

    对于 child_feed 中的 c_arr、c_double：
        打印（）
        print("资源名称: %s" % c_arr.value )
        print("res val: %f" % c_double.value)

如果 __name__ == '__main__'：
    主要的（）

```

看看[http://docs.python.org/library/multiprocessing.html](http://docs.python.org/library/multiprocessing.html)有一个使用 Array of chars 的例子。

还有一个 mmap 模块可以共享内存[http://docs.python.org/library/mmap.html](http://docs.python.org/library/mmap.html)但是你必须通过信号量来同步访问自己。如果您喜欢更简单的方法，只需使用管道。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T17:23:44.133

我不想使用`multiprocessing.Array`，因为需要提前指定其大小的明显要求。以下内容适用于我，而不是拥有一个兼容多处理的`unicode`对象。它使用 Python 2.6 进行了多进程测试。

```
>>> shared_str = multiprocessing.Manager().Value(unicode, 'some initial value')
>>> shared_str.value
'some initial value'
>>> shared_str.value = 'some new value'
>>> shared_str.value
'some new value' 
```

为了解决作者关于共享字符串和数字的具体问题，也许可以创建一个可序列化的对象来存储这些对象并将其提供给`Value`。

您当然可以反对需要`Manager`为此目的使用。如果是这样，请提供替代解决方案。

# php - 使用 PHP 阻止用户下载代码，但代码是 cpu 密集型的

> ID：12342920
> 
> 赞同：4
> 
> 时间：2012-09-09T20:56:35.550
> 
> 标签：php, javascript

我有一些专有公式，用于计算一些车辆动态的东西。我把它全部放在一个 php 文件中，用户可以从客户端 javascript 中的 ajax 访问它。

我相信通过这样做，用户永远无法访问 php 脚本中的公式，这是真的吗（如果我正确设置了访问权限）？

我遇到的实际问题是，可能有 80 个方程，并且循环运行 200 次以获得最终答案及其 CPU 密集型。运行 1 很好，但如果我有 10 个人使用该站点，它会降低服务器速度。

我不能把所有的公式都放在客户端，否则他可以下载它们。而且我不能说 90% 的方程式在客户端，而将其余的方程式留在服务器上，因为那样我就必须在循环内使用 ajax 来回前进 200 次才能获得一次答案。

我有哪些选择可以在客户端完成工作但保护公式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T03:01:34.057

如果不让客户端看到该代码，就无法在客户端运行代码。你可以混淆你的代码，但是对于像数学方程式这样的东西，我怀疑你可以做很多混淆的方式，这会使内容模糊到足以防止有人弄清楚方程式是什么。

您的选择是：

*   投资一些更好的硬件，以便您的服务器可以处理更多用户。这可能意味着在不同于 Web 服务器层的层上运行计算。
*   优化您的方程式。这可能意味着在 C 中将它们重新实现为 PHP 扩展模块，或者至少启用操作码缓存。

# python - 如何获取函数的关键字参数

> ID：12342921
> 
> 赞同：1
> 
> 时间：2012-09-09T20:56:41.913
> 
> 标签：python, metaprogramming

```
>>> def test(arg1, arg2, arg3=None): pass
>>> test.func_code.co_varnames
('arg1', 'arg2, 'arg3') 
```

我想要的是这样的：

```
{'args': ('arg1', 'arg2'), 'kwargs': {'arg3': None}} 
```

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-09T20:58:37.810

您可以使用[`inspect.getargspec()`](http://docs.python.org/library/inspect.html#inspect.getargspec)来获取函数期望的参数。

```
>>> inspect.getargspec(test)
ArgSpec(args=['arg1', 'arg2', 'arg3'], varargs=None, keywords=None,
        defaults=(None,)) 
```

如您所见，该`keywords`属性`None`与任何参数都可以作为 kwarg 传递；`**kwargs`如果存在，它将包含参数的名称。

要获取将参数名称映射到默认值的 dict，您可以使用此代码`as`作为返回的 ArgSpec `inspect.getargspec()`：

```
defaults = dict(zip(*[reversed(l) for l in (as.args, as.defaults or [])])) 
```

# java - 后台任务碎片和“onSaveInstanceState 后无法执行此操作”

> ID：12342923
> 
> 赞同：0
> 
> 时间：2012-09-09T20:56:55.877
> 
> 标签：java, android, multithreading, android-fragments

我在 Fragment 中有以下 AsyncTask（为了清楚地显示错误而简化了示例）：

```
private class LoginTask extends AsyncTask<Void, Void, Void> {

    @Override
    protected Void doInBackground(Void... params) {

        // Do network login
        return null;
    }

    @Override
    protected void onPostExecute(Void result) {
        FragmentActivity act = (FragmentActivity) getActivity();
        if (act != null && isAdded()) {
            act.getSupportFragmentManager().beginTransaction()
                    .add(new LoginDialogFragment(), "loginMessage").commit();
        }
    }

} 
```

有一次，在任务运行时离开应用程序，我收到了一个`IllegalStateException: Can not perform this action after onSaveInstanceState`.

我想这是因为我在活动的 onSaveInstanceState 和从活动中取消附加片段之间调用了它（或者因为在 getActivity() 调用和 add-fragment 调用之后活动没有附加。

那么以后如何避免这个错误呢？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-09T21:00:04.843

[isFinishing()](http://developer.android.com/reference/android/app/Activity.html#isFinishing%28%29)方法应该在这里为您提供帮助。

```
@Override
    protected void onPostExecute(Void result) {
        FragmentActivity act = (FragmentActivity) getActivity();
        if (act != null && !act.isFinishing() && isAdded()) {
            act.getSupportFragmentManager().beginTransaction()
                    .add(new LoginDialogFragment(), "loginMessage").commit();
        }
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-09T20:59:35.187

在`onPause`、`onStop`或`onDestroy`中，调用`.cancel()`（`AsyncTask`这可能要求您`AsyncTask`是活动中的成员变量）。然后，在您的`onPostExecute()`方法中，检查该过程是否被取消。

```
protected void onPostExecute(Void result) {
    if (!isCancelled()) { // Do stuff only if not cancelled
        FragmentActivity act = (FragmentActivity) getActivity();
        if (act != null && isAdded()) {
            act.getSupportFragmentManager().beginTransaction()
                    .add(new LoginDialogFragment(), "loginMessage").commit();
        }
    }
    return null;
} 
```

注意：您可能还需要检查`isCancelled()`您所在的任何循环，`doInBackground()`这样您就不会在该人离开应用程序后继续做任何事情。

# android - 为什么我的自定义主题不会影响我的自定义列表项布局的文本视图？

> ID：12342924
> 
> 赞同：1
> 
> 时间：2012-09-09T20:57:18.147
> 
> 标签：android, android-layout, android-theme

我正在尝试使用自定义主题管理我的应用程序样式：

```
<?xml version="1.0" encoding="utf-8"?>
<resources xmlns:android="http://schemas.android.com/apk/res/android">

    <style name="Theme.Styled" parent="Theme.Sherlock.Light.DarkActionBar">
        <item name="actionBarStyle">@style/Widget.Styled.ActionBar</item>
        <item name="actionBarTabStyle">@style/Widget.Sherlock.Light.ActionBar.TabView</item>
        <item name="android:actionBarStyle">@style/Widget.Styled.ActionBar</item>
        <item name="android:textViewStyle">@style/MyTextViewStyle</item>
    </style>

    <style name="Widget.Styled.ActionBar" parent="Widget.Sherlock.Light.ActionBar.Solid.Inverse">
        <item name="background">@drawable/background</item>
        <item name="android:background">@drawable/background</item>
    </style>

    <style name="MyTextViewStyle" parent="@android:style/Widget.TextView">
        <item name="android:textColor">@color/text</item>
    </style>

</resources> 
```

如您所见，我将 TextView 默认颜色设置为 @color/text (#ff000000)。这在我的应用程序的所有 TextView 中都可以正常工作，除了我的自定义列表项布局中的那些：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" >

    <TextView
        android:id="@+id/mov_concept"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:layout_marginLeft="5dp"
        android:layout_marginTop="2dp"
        android:textSize="16dp"
        android:textStyle="bold" />

    <TextView
        android:id="@+id/mov_category"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@id/mov_concept"
        android:layout_marginLeft="5dp"
        android:textAppearance="?android:attr/textAppearanceSmall" />

    <TextView
        android:id="@+id/mov_amount"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/mov_category"
        android:layout_centerHorizontal="true"
        android:layout_marginBottom="6dp"
        android:textAppearance="?android:attr/textAppearanceMedium" />

    <TextView
        android:id="@+id/mov_period"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/mov_amount"
        android:layout_marginBottom="5dp"
        android:layout_marginLeft="5dp"
        android:textAppearance="?android:attr/textAppearanceSmall" />

    <TextView
        android:id="@+id/mov_until"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBaseline="@+id/mov_period"
        android:layout_alignBottom="@+id/mov_period"
        android:layout_alignParentRight="true"
        android:layout_marginBottom="2dp"
        android:layout_marginRight="5dp"
        android:textAppearance="?android:attr/textAppearanceSmall" />

    <TextView
        android:id="@+id/mov_date"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBaseline="@+id/mov_concept"
        android:layout_alignBottom="@+id/mov_category"
        android:layout_alignParentRight="true"
        android:layout_marginRight="5dp"
        android:layout_marginTop="2dp" />

</RelativeLayout> 
```

不知道为什么会这样，先谢谢了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-04-23T01:56:25.877

由于使用应用程序上下文而不是 ListAdapter 的活动上下文，我遇到了同样的问题。为了解决这个问题，我更改了我的代码

```
MyAdapter adapter = new MyAdapter(getApplicationContext(), ...) 
```

到

```
MyAdapter adapter = new MyAdapter(MyActivity.this, ...) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T21:03:19.507

这是因为您将 a`android:textAppearance`应用于您的`textviews`which 会覆盖您样式的颜色。

# ios - 在 ARC 项目中使用 box-api？

> ID：12342925
> 
> 赞同：0
> 
> 时间：2012-09-09T20:57:26.827
> 
> 标签：ios, automatic-ref-counting, box-api

如何在使用 ARC 的项目中使用 box-api？我将 SDK 文件夹复制到我的项目中并添加了它们，但我无法构建我的项目，因为它使用了 ARC。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T16:16:47.240

您必须为这些文件禁用 ARC：

1.  转到**您的项目**>**您的目标**>**构建阶段**
2.  选择所有 Box 文件，按**Enter**并插入“ **-fno-objc-arc** ”，不带配额
3.  清洁和建造！;)

![在此处输入图像描述](../Images/3e888d459175658329eaf00b52c53163.png)

# c - 在C中将float转换为int（按位）

> ID：12342926
> 
> 赞同：17
> 
> 时间：2012-09-09T20:57:32.553
> 
> 标签：c, floating-point, bit-manipulation, bitwise-operators

给定代表 IEEE 754 浮点数的 32 位，如何将数字转换为整数，在表示上使用整数或位操作（而不是使用机器指令或编译器操作进行转换）？

我有以下功能，但在某些情况下会失败：

输入：int x（包含 IEEE 754 格式的 32 位单精度数）

```
 if(x == 0) return x;

  unsigned int signBit = 0;
  unsigned int absX = (unsigned int)x;
  if (x < 0)
  {
      signBit = 0x80000000u;
      absX = (unsigned int)-x;
  }

  unsigned int exponent = 158;
  while ((absX & 0x80000000) == 0)
  {
      exponent--;
      absX <<= 1;
  }

  unsigned int mantissa = absX >> 8;

  unsigned int result = signBit | (exponent << 23) | (mantissa & 0x7fffff);
  printf("\nfor x: %x, result: %x",x,result);
  return result; 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-11-22T18:23:25.620

C 有“联合”来处理这种类型的数据视图：

```
typedef union {
  int i;
  float f;
 } u;
 u u1;
 u1.f = 45.6789;
 /* now u1.i refers to the int version of the float */
 printf("%d",u1.i); 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-09-09T21:01:27.780

`&x`给出 x 的地址，所以有`float*`类型。

`(int*)&x`将该指针转换为指向事物的`int`指针`int*`。

`*(int*)&x`将该指针取消引用为一个`int`值。在不同尺寸的机器上`int`，它不会做你相信的事情。`float`

并且可能存在字节顺序问题。

该解决方案用于[快速反平方根](https://en.wikipedia.org/wiki/Fast_inverse_square_root#Overview_of_the_code)算法。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-09-09T23:49:34.390

（有人应该仔细检查这个答案，特别是边界情况和负值的四舍五入。另外，我写它是为了四舍五入。为了重现 C 的转换，这应该改为向零舍入。）

本质上，该过程是：

将 32 位分为 1 个符号位 ( *s* )、8 个指数位 ( *e* ) 和 23 个有效位 ( *f* )。我们将它们视为二进制补码整数。

如果*e*为 255，则浮点对象要么是无穷大（如果*f*为零）要么是 NaN（否则）。这种情况下不能进行转换，应该报错。

否则，如果*e*不为零，则将 2 ^(24)添加到*f*。（如果*e*不为零，则有效数在其前面隐含 1 位。添加 2 ^(24)使该位在*f*中显式。）

*从e*中减去 127 。（这会将指数从其偏差/编码形式转换为实际指数。如果我们要对任何值进行一般转换，我们将不得不处理*e*为零时的特殊情况：减去 126 而不是 127。但是，因为我们只是转换为整数结果，我们可以忽略这种情况，只要这些微小输入数字的整数结果为零。）

如果*s*为 0（符号为正）且*e*为 31 或更大，则该值溢出有符号 32 位整数（它为 2 ^(31)或更大）。无法进行转换，应该报错。

如果*s*为 1（符号为负）且*e*大于 31，则该值溢出有符号 32 位整数（小于或等于 -2 ^(32)）。如果*s*为 1，*e*为 32，并且*f*大于 2 ^(24)（设置了任何原始有效位），则该值溢出有符号 32 位整数（小于 -2 ^(31)；如果原始*f*为零，它将恰好是 -2 ^(31)，不会溢出）。以上任何一种情况都无法进行转换，应该报错。

现在我们有一个*s*、一个*e*和一个*f*来表示一个不会溢出的值，所以我们可以准备最终值。

如果*s*为 1，则将*f*设置为*-f*。

指数值适用于 1（包括）和 2（不包括）之间的有效位，但我们的有效位从 2 ^(24)位开始。所以我们必须对此进行调整。如果*e*是 24，我们的有效位是正确的，我们就完成了，所以返回*f*作为结果。如果*e*大于 24 或小于 24，我们必须适当地移动有效数。此外，如果我们要将*f*向右移动，我们可能必须对其进行四舍五入，以将结果四舍五入为最接近的整数。

如果*e*大于 24，则将*f*左移*e* -24 位。返回*f*作为结果。

如果*e*小于 -1，则浮点数在 -½ 和 ½ 之间，互斥。返回 0 作为结果。

否则，我们将*f*右移 24 *-e*位。但是，我们将首先保存舍入所需的位。将*r*设置为将 f 转换为无符号 32 位整数并将其左移 32-(24- *e* ) 位（等效地，左移 8+ *e*位）的结果。这需要将移出*f*的位（如下）并在 32 位中“向左调整”它们，因此我们有一个固定的起始位置。

*将f*右移24 *-e*位。

如果*r*小于 2 ^(31)，则什么也不做（这是向下舍入；移位截断位）。如果*r*大于 2 ^(31)，则将*f*加一（这是向上取整）。如果*r*等于 2 ^(31 ，则将)*f*的低位添加到*f*。（如果*f是奇数，则将**f*加一。在两个相等接近的值中，这将舍入为偶数。）返回*f*。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2018-11-23T14:00:10.660

```
// With the proviso that your compiler implementation uses
// the same number of bytes for an int as for a float:
// example float
float f = 1.234f;
// get address of float, cast as pointer to int, reference
int i = *((int *)&f);
// get address of int, cast as pointer to float, reference
float g = *((float *)&i);
printf("%f %f %08x\n",f,g,i); 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2012-09-09T21:28:52.743

```
float x = 43.133;
int y;

assert (sizeof x == sizeof y);
memcpy (&y, &x, sizeof x);
... 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-08-11T20:41:24.550

您可以使用参考来投射浮点数。像这样的演员不应该生成任何代码。

C++

```
float f = 1.0f;
int i = (int &)f;
printf("Float %f is 0x%08x\n", f, i); 
```

输出：

```
Float 1.000000 is 0x3f800000 
```

如果你想要 c++ 风格的演员，请使用 reinterpret_cast，就像这样。

```
int i = reinterpret_cast<int &>(f); 
```

它不适用于表达式，您必须将其存储在变量中。

```
 int i_times_two;
    float f_times_two = f * 2.0f;
    i_times_two = (int &)f_times_two;

    i_times_two = (int &)(f * 2.0f);
main.cpp:25:13: error: C-style cast from rvalue to reference type 'int &' 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-09T21:00:03.220

您不能（有意义地）以这种方式将浮点数转换为“整数”（`signed int`或`int`）。

它可能最终具有整数类型，但它实际上只是 IEEE754 编码空间的索引，本身并不是一个有意义的值。

您可能会争辩说`unsigned`int 作为位模式和整数值具有双重用途，但`int`事实并非如此。

* * *

有符号整数的位操作也存在[平台问题。](https://www.securecoding.cert.org/confluence/display/seccode/INT13-C.+Use+bitwise+operators+only+on+unsigned+operands)

# javascript - jQuery Mobile Theme Roller 生成破碎的主题？

> ID：12342930
> 
> 赞同：1
> 
> 时间：2012-09-09T20:58:36.170
> 
> 标签：javascript, jquery, html, css, jquery-mobile

我有一个使用 jQuery Mobile themeroller ( [http://jquerymobile.com/themeroller/?ver=1.1.1&style_id=20120909-36](http://jquerymobile.com/themeroller/?ver=1.1.1&style_id=20120909-36) ) 创建的样本。在themeroller中看起来像这样：

![在此处输入图像描述](../Images/64d944e0d7eb4f16a00a5555b8895a51.png)

...但是按照指示下载和安装它看起来像这样：

![在此处输入图像描述](../Images/f8daa1aa81307ce410e92ff6ecd850c7.png)

我已按照`<head>`页面部分中的说明安装了主题，如下所示：

```
<link rel="stylesheet" href="http://localhost/Bon%20Cuisson/project-files/bin-debug/system/stylesheets/bc-swatch-mobile.min.css" />
<link rel="stylesheet" href="http://code.jquery.com/mobile/1.1.1/jquery.mobile.structure-1.1.1.min.css" />
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
<script src="http://code.jquery.com/mobile/1.1.1/jquery.mobile-1.1.1.min.js"></script> 
```

谁能告诉我为什么 CSS 出现损坏，即使它只是直接复制和粘贴？

感谢您的时间。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-09T22:57:13.830

嗯...我最初只用一个样本生成了这个主题。通过复制这个样本两次（给我总共三个相同的样本）并重试安装，它成功了。我只是按照 jQM 的建议至少 3 个样本，然后它就没有问题了。

为什么？没有线索，但我希望这可以帮助某人。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-18T15:44:51.513

默认情况下，JQuery Mobile 将不同的样本字母分配给不同的控件。样本 a 用于页眉和页脚，b 用于列表视图，嵌套列表页眉和 c 用于内容块。我怀疑这可能是您需要多个 1 的原因？[Jquery Mobile 主题和默认值](http://demos.jquerymobile.com/1.2.0/docs/api/themes.html)

# windows-7 - 关键的 Windows 7 系统文件？

> ID：12342932
> 
> 赞同：2
> 
> 时间：2012-09-09T20:59:01.553
> 
> 标签：windows-7

哪些 Windows 7 文件对引导至关重要？

换句话说，假设我们有 root 权限，通过批处理脚本不可逆转地拆除 Windows 7 实例的最短方法是什么？

我用谷歌搜索了一下，但我发现了模棱两可的信息。

*我是出于好奇而问这个 - 不要做坏事。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T21:33:56.640

关于引导文件的事情是它们都可以很容易地恢复。如果您想不可逆转地降低 Windows 的性能，那么您唯一能做的就是销毁注册表文件。有关注册表档案的位置，请参见此链接。

[http://www.easydesksoftware.com/regfiles.htm](http://www.easydesksoftware.com/regfiles.htm)

# windows - 设置递归深度

> ID：12342933
> 
> 赞同：1
> 
> 时间：2012-09-09T20:59:08.783
> 
> 标签：windows, batch-file

我目前面临的问题是我必须在目录的每个第一个目录“层”中进行操作。

我有一个包含数千个子目录的文件夹，我只想用 /r 执行一个 for 循环，但问题是，这些子目录包含更多子目录，我不想进入这些子目录。对于可视化：

```
Root Dir
----Sub-Dir 1
--------Sub-Dir 1 of Sub-Dir 1
--------Sub-Dir 2 of Sub-Dir 1
----Sub-Dir 2
--------Sub-Dir 1 of Sub-Dir 2
--------Sub-Dir 2 of Sub-Dir 2
----Sub-Dir 3
--------Sub-Dir 1 of Sub-Dir 3
--------Sub-Dir 2 of Sub-Dir 3 
```

我只想进入第一个“层”子目录 1、2、3 等，不要触摸每个子目录。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-09T21:12:00.917

您所需要的只是嵌套的 FOR /D 语句（总共 2 个）。

```
@echo off
pushd "rootDir"
call :doCommands
for /d %%F in (*) do (
  pushd "%%F"
  call :doCommands
  for /d %%F in (*) do (
    pushd "%%F"
    call :doCommands
    popd
  )
  popd
)
popd
exit /b

:doCommands
echo processing "%cd%"
exit /b 
```

**编辑**

这是一个通用解决方案，允许您将根文件夹指定为 arg1 (%1) 以及要向下多少级作为 arg2 (%2)。

```
@echo off
set currentLevel=0
set maxLevel=%2
if not defined maxLevel set maxLevel=0

:procFolder
pushd %1
echo processing "%cd%"
if %currentLevel% lss %maxLevel% (
  for /d %%F in (*) do (
    set /a currentLevel+=1
    call :procFolder "%%F"
    set /a currentLevel-=1
  )
)
popd 
```

# php - PHP 格式化长变量和占位符

> ID：12342935
> 
> 赞同：0
> 
> 时间：2012-09-09T20:59:13.027
> 
> 标签：php, csv, long-integer, placeholder

我正在尝试创建一个不同类型的变量数组。

我的目标是创建一个 .csv 文件以与加拿大邮政电子运输工具一起使用。（此处不包含创建 .csv 文件的代码）

我正在使用加拿大邮政的电子运输指南的 **2.2.4 进口订单项目记录 - 布局类型 5**文档。

我必须创建 52 个元素数组并在数组中保留一些“整数”、“布尔”、“货币”、“长”和“占位符值”。

我的问题是。

1.  如何定义**长**值？
2.  我应该怎么做才能填写“占位符”值。

这是占位符要求的示例。

字段编号：32，字段：美国邮政信箱指示符类型：占位符长度：1 格式说明：“1”表示该字段为空白。

下面是我用来创建数组的代码

```
<?php
$record_count_array = array();
//Create an integer value
$integer = 00;
$integer =  (integer)$integer ;
//Create a boolean value
$boolean = 1;
$boolean =  (boolean )$boolean  ;
//Fake long value -  Please lset me know your suggestions
$long    = 100000;
$string  = "string_value";
//Create a currency value
$currency = 10.00;
$currency = money_format('%i', $currency);
//Fake spaceholder value -  Please lset me know your suggestions
$placeholder = 2;
//Create a 52 item array
for($count = 0; $count< 52 ; $count++)
{
if($count == 0 || $count == 23 || $count == 47){
$record_count_array[] = $integer;
}
elseif($count == 18 || $count == 24 || $count == 25 || $count == 26) {
$record_count_array[] = $long;
}elseif($count == 27 || $count == 28 || $count == 29 || $count == 32
|| $count == 33 || $count == 34 || $count == 35 || $count == 36
|| $count == 37 || $count == 38 || $count == 39 || $count == 40
|| $count == 41 || $count == 44 || $count == 48 || $count == 49
|| $count == 50) {
$record_count_array[] = $boolean;
}elseif($count == 31 || $count == 42 || $count == 43) {
$record_count_array[] = $placeholder;
}elseif($count == 46) {
$record_count_array[] = $currency;
}
else{
$record_count_array[] = $string;
}
}
var_dump($record_count_array)."<br />";
?> 
```

这是我得到的输出（使用 var_dump()）

```
array(52) 
{[0]=> int(0) [1]=> string(12) "string_value" 
[2]=> string(12) "string_value" [3]=> string(12) "string_value" 
[4]=> string(12) "string_value" [5]=> string(12) "string_value" 
[6]=> string(12) "string_value" [7]=> string(12) "string_value" 
[8]=> string(12) "string_value" [9]=> string(12) "string_value" 
[10]=> string(12) "string_value" [11]=> string(12) "string_value" 
[12]=> string(12) "string_value" [13]=> string(12) "string_value" 
[14]=> string(12) "string_value" [15]=> string(12) "string_value" 
[16]=> string(12) "string_value" [17]=> string(12) "string_value" 
[18]=> int(100000) [19]=> string(12) "string_value" 
[20]=> string(12) "string_value" [21]=> string(12) "string_value" 
[22]=> string(12) "string_value" [23]=> int(0) [24]=> int(100000) 
[25]=> int(100000) [26]=> int(100000) [27]=> bool(true) 
[28]=> bool(true) [29]=> bool(true) [30]=> string(12) "string_value" 
[31]=> int(2) [32]=> bool(true) [33]=> bool(true) 
[34]=> bool(true) [35]=> bool(true) [36]=> bool(true) 
[37]=> bool(true) [38]=> bool(true) [39]=> bool(true) 
[40]=> bool(true) [41]=> bool(true) [42]=> int(2) 
[43]=> int(2) [44]=> bool(true) 
[45]=> string(12) "string_value" [46]=> string(5) "10.00" 
[47]=> int(0) [48]=> bool(true) 
[49]=> bool(true) [50]=> bool(true) 
[51]=> string(12) "string_value" } 
```

有人可以指导我吗

1.  正确格式化长变量。
2.  了解什么是“占位符”变量以及如何格式化它们？

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T21:04:43.910

1 - 您可以将 long 视为整数，因为 PHP 没有 long 类型 (AFAIK) 2 - 对于占位符，我不知道我是否正确理解了这个问题，但我建议你看看`sprintf`( [http://se2.php.net/sprintf](http://se2.php.net/sprintf) ) 格式化字符串。

# flash - 嵌入 Flash 对象无法在 Google Chrome 中播放

> ID：12342950
> 
> 赞同：1
> 
> 时间：2012-09-09T21:01:48.393
> 
> 标签：flash, google-chrome, object

在网站 click-storm.ru 上，我不能让滑块中的对象视频开始播放。它们在 Opera、IE 等中表现出色。有趣的是，iframe 视频在 Chrome 中表现出色。对象视频在滑块外播放效果很好。无法猜测出什么问题=（这是滑块的代码：

```
<!-- wrapper -->
<div>
<!-- wrapper -->

<!-- slider -->
<div style="float:left; margin-left:50px;">
<!-- slider -->

<div id="banner-example-1" class="light">

            <ul>                                

                    <!-- THE 1\. SLIDE -->
                    <li data-transition="slide"><img src="images/slides/big1.jpg" data-thumb="images/thumbs/s1b.jpg" data-thumb_bw="images/thumbs/s1g.jpg">

                            <div class="video_container">
                                <div class="video_container_wrap">  

<object type="application/x-shockwave-flash" height="491" width="806" id="live_embed_player_flash" data="http://www.twitch.tv/widgets/live_embed_player.swf?channel=thorzain" bgcolor="#000000"><param name="allowFullScreen" value="true" /><param name="allowScriptAccess" value="always" /><param name="allowNetworking" value="all" /><param name="movie" value="http://www.twitch.tv/widgets/live_embed_player.swf" /> <param  name="flashvars" value="hostname=www.twitch.tv&channel=thorzain&auto_play=false&start_volume=25" />
</object>                                   
                                                                    </div>
                            </div>  

                            <div  class="creative_layer">
                                <div class="caption_blue fadeleft" style="top:120px;left:590px;">ThorZain</div>                 
                                <div class="caption_white faderight" style="top:120px;left:722px;">Английский</div>
                                <div class="caption_black smallcap fadeup" style="top:163px;left:590px;">Один из лучших терранов планеты</div>                                  
                            </div>

                    </li>

                    <!-- THE 2\. SLIDE -->
                    <li data-transition="slide"><img src="images/slides/big2.jpg" data-thumb="images/thumbs/s2b.jpg" data-thumb_bw="images/thumbs/s2g.jpg">

                            <div class="video_container">
                                <div class="video_container_wrap2"> 
                                    <iframe height="468" width="832" frameborder="0" src="http://www.own3d.tv/liveembed/172637"></iframe>

                                                                    </div>
                            </div>  

                            <div  class="creative_layer">
                                <div class="caption_blue fadeleft" style="top:120px;left:590px;">MillForGG</div>                    
                                <div class="caption_white faderight" style="top:120px;left:722px;">Английский</div>
                                <div class="caption_black smallcap fadeup" style="top:163px;left:590px;">Сильный корейский терран</div>                                 
                            </div>

                    </li>

<!-- THE 3\. SLIDE -->
                    <li data-transition="slide"><img src="images/slides/big3.jpg" data-thumb="images/thumbs/s3b.jpg" data-thumb_bw="images/thumbs/s3g.jpg">

                            <div class="video_container">
                                <div class="video_container_wrap">  
                                    <object type="application/x-shockwave-flash" height="495" width="806" id="live_embed_player_flash" data="http://www.twitch.tv/widgets/live_embed_player.swf?channel=liquidret" bgcolor="#000000"><param name="allowFullScreen" value="true" /><param name="allowScriptAccess" value="always" /><param name="allowNetworking" value="all" /><param name="movie" value="http://www.twitch.tv/widgets/live_embed_player.swf" /><param name="flashvars" value="hostname=www.twitch.tv&channel=liquidret&auto_play=false&start_volume=25" /></object>
                                                                    </div>
                            </div>  

                            <div  class="creative_layer">
                                <div class="caption_blue fadeleft" style="top:120px;left:590px;">LiquidRet</div>                    
                                <div class="caption_white faderight" style="top:120px;left:722px;">Английский</div>
                                <div class="caption_black smallcap fadeup" style="top:163px;left:590px;">Зерг из Голландии</div>                                    
                            </div>

                    </li>

<!-- THE 4\. SLIDE -->
                    <li data-transition="slide"><img src="images/slides/big4.jpg" data-thumb="images/thumbs/s4b.jpg" data-thumb_bw="images/thumbs/s4g.jpg">

                            <div class="video_container">
                                <div class="video_container_wrap2"> 
                                    <iframe height="468" width="832" frameborder="0" src="http://www.own3d.tv/liveembed/136659"></iframe>

                                                                    </div>
                            </div>  

                            <div  class="creative_layer">
                                <div class="caption_blue fadeleft" style="top:120px;left:590px;">Virtus.Pro</div>                   
                                <div class="caption_white faderight" style="top:120px;left:722px;">Русский</div>
                                <div class="caption_black smallcap fadeup" style="top:163px;left:590px;">Трансляции от KTS и kaby</div>                                 
                            </div>

                    </li>                   
                </ul>
                <div class="bigleft"></div>
                <div class="bigright"></div>
            </div>      <!-- THE END OF THE BANNER EXMAPLE -->

            <!--
            ##############################
             - ACTIVATE THE BANNER HERE -
            ##############################
            -->
            <script type="text/javascript">

                var tpj=jQuery;
                tpj.noConflict();

                tpj(document).ready(function() {

                if (tpj.fn.cssOriginal!=undefined)
                    tpj.fn.css = tpj.fn.cssOriginal;

                    tpj('#banner-example-1').paradigm(
                        {                                       
                            width:832,
                            height:491,

                            thumbWidth:90,
                            thumbHeight:50,
                            thumbAmount:4,                          
                            thumbSpaces:4,
                            thumbPadding:4,
                            thumbStyle:"thumb",
                            thumbVideoIcon:"on",
                            bulletXOffset:0,
                            bulletYOffset:0,

                            shadow:'true',

                            parallaxX:500,
                            parallaxY:10,
                            captionParallaxX:-40,
                            captionParallaxY:2,

                            touchenabled:'on',

                            timer:10                        
                        });

            });
            </script>
<!-- slider -->
</div>
<!-- slider -->

<!-- chat -->
<div style="float:right;">
<!-- chat -->

    <!-- BEGIN CBOX - www.cbox.ws - v001 -->
<div id="cboxdiv" style="text-align: center; line-height: 0">
<div><iframe frameborder="0" width="230" height="453" src="http://www7.cbox.ws/box/?boxid=549330&amp;boxtag=f0tgr5&amp;sec=main" marginheight="2" marginwidth="2" scrolling="auto" allowtransparency="yes" name="cboxmain7-549330" style="border:#ababab 1px solid;" id="cboxmain7-549330"></iframe></div>
<div><iframe frameborder="0" width="230" height="107" src="http://www7.cbox.ws/box/?boxid=549330&amp;boxtag=f0tgr5&amp;sec=form" marginheight="2" marginwidth="2" scrolling="no" allowtransparency="yes" name="cboxform7-549330" style="border:#ababab 1px solid;border-top:0px" id="cboxform7-549330"></iframe></div>
</div>
<!-- END CBOX -->

<!-- chat -->
</div>
<!-- chat -->

<!-- wrapper -->
</div>
<!-- wrapper -->

<div style="height:15px"></div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T08:51:07.087

您为什么不尝试首先使用[swfobject](http://code.google.com/p/swfobject/)嵌入您的 Flash 电影？这是最被接受的方式，并且有[据可查](http://code.google.com/p/swfobject/wiki/documentation)。这也是最标准的方式，并被证明在大多数情况下都有效。

您可以静态和动态地嵌入电影，但我通常更喜欢动态地嵌入。您可以在文档中检查这两种模式。

对于动态模式，在您的情况下，您需要以下内容：

`<script type="text/javascript" src="swfobject.js"></script>`

> ```
> var flashvars = {};
>     flashvars.hostname= "www.twitch.tv";
>     flashvars.channel= "liquidret";
>     flashvars.auto_play= "false";
>     flashvars.start_volume= "25";
>     swfobject.embedSWF("http://www.twitch.tv/widgets/live_embed_player.swf", "video_container_wrap", "491", "806", "9.0.0", flashvars); 
> ```

它还带有自己的[代码生成器](http://code.google.com/p/swfobject/wiki/generator)，您可以尝试一下。

# php - 数组只传递最后一个变量

> ID：12342952
> 
> 赞同：0
> 
> 时间：2012-09-09T21:01:58.573
> 
> 标签：php

我正在从 API 检索和解析一些数据。我可以获取数据并将其用于数组。然后我可以在表单中显示数据。但是，当我从表单进行处理时，我只返回最后一个数组函数而不是所需的响应。有任何想法吗？

这是部分，我遇到了麻烦。

** 请注意，来自 API 的信息格式不太理想，因此我必须在发布到我的表单之前对其进行清理。

```
$info = array();

$byline = explode("\n", $data);

foreach ($byline as $i=> $value) {

if ($value !=""){
$info[] = $value ;
} 

if ($info !=""){
$number = array();
foreach ($info as $newdata){
$row = explode(",", $newdata);
$number[] = $row[0];
}

echo "<table style='border' cellspacing=0 cellpading=1> 
<form method=POST action=numberfinal.php name = Number>
<input type=hidden name=CUST value=$CUST>
<tr><td><input readonly name=number value=$number[0]></td>
<td>$rate</td><td>$CUST</td><td><input type=submit value=Order name=Order></td></select> 
</tr> 

<tr><td><input readonly name=number value=$number[1]></td><td>$rate</td><td>$CUST</td>   <td><input type=submit value=Order name=Order></td></select> 
</tr> 

<tr><td><input readonly name=number value=$number[2]></td><td>$rate</td><td>$CUST</td> <td><input type=submit value=Order name=Order></td></select> 
</tr> 

<tr><td><input readonly name=number value=$number[3]></td><td>$rate</td><td>$CUST</td> <td><input type=submit value=Order name=Order></td></select> 
</tr> 

</table>"; 
```

** 为了更清楚，无论我按哪个提交（第 1 行或第 4 行），相同的数字都会传递到我的帖子。我想确保通过适当的数字，即 $number[0] 或 $number[4] 取决于请求的提交**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T22:52:48.837

您需要为每个`INPUT`元素指定不同的名称，以便在处理表单时可以分别检索它们。如果这是一个相似输入的数组，这样做的方法是添加`[]`到输入名称的末尾；PHP 会自动为它们构建一个数组`$_POST`：

```
<input readonly name='number' value='$number[3]'> 
```

处理表单时，请使用：

```
foreach ($_POST['number'] as $number) 
```

处理每个条目。

# html - 图片库无法正常工作

> ID：12342954
> 
> 赞同：0
> 
> 时间：2012-09-09T21:02:15.833
> 
> 标签：html, css

我的投资组合[网站](http://www.oprant.com/FK/#!/page_works)有问题。

```
DETAYLI BILGI > English Language > More Details

<div class="img1" id="active">
    <img src="images/big_img.jpg" alt="">
    <a href="#!/cendla" class="link1"><span></span>detaylı bilgi</a>
</div>
<div class="img2">
    <img src="images/big_img1.jpg" alt="">
    <a href="#!/oprant" class="link1"><span></span>detaylı bilgi</a>
</div>
<div class="img3">
    <img src="images/big_img2.jpg" alt="">
    <a href="#!/cendla" class="link1"><span></span>detaylı bilgi</a>
</div> 
```

它们都是指向以下页面的链接：

```
/oprant
/cendla 
```

但最后`div menu (img 15) is /kadisozluk`，它正在显示`ALL IMAGE GALLERYS to /kadisozluk`。

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T14:03:02.293

您的网页链接无效。请检查您的href的拼写，将新页面的文件名复制并粘贴到href可能会更容易。

您可能希望使用 w3 验证器来验证您的页面，它可以帮助您删除页面上的任何错误。

由于您需要提供更多信息和代码，因此我无法诊断问题。

# c++ - 促进不透明类型的序列化

> ID：12342956
> 
> 赞同：1
> 
> 时间：2012-09-09T21:02:25.660
> 
> 标签：c++, boost, boost-serialization

我希望能够序列化一个 Windows HANDLE：

```
typedef void *HANDLE 
```

如果我尝试使用以下方法进行编译：

```
struct Foo
{
    HANDLE file;

protected:
    friend class boost::serialization::access;

    template<class Archive>
    void serialize(Archive & ar, const unsigned int /*version*/)
    {
        ar & file;
    }
}; 
```

我得到编译错误：

```
c:\projects\3rdparty\src\boost\include\boost/mpl/print.hpp(51) : warning C4308: negative integral constant converted to unsigned type
        c:\projects\3rdparty\src\boost\include\boost/serialization/static_warning.hpp(92) : see reference to class template instantiation 'boost::mpl::print<T>' being compiled
        with
        [
            T=boost::serialization::BOOST_SERIALIZATION_STATIC_WARNING_LINE<98>
        ]
        c:\projects\3rdparty\src\boost\include\boost/archive/detail/check.hpp(98) : see reference to class template instantiation 'boost::serialization::static_warning_test<B,L>' being compiled
        with
        [
            B=false,
            L=98
        ]
        c:\projects\3rdparty\src\boost\include\boost/archive/detail/oserializer.hpp(313) : see reference to
function template instantiation 'void boost::archive::detail::check_object_tracking<T>(void)' being compiled
        with
        [
            T=Foo
        ]
        c:\projects\3rdparty\src\boost\include\boost/archive/detail/oserializer.hpp(525) : see reference to
function template instantiation 'void boost::archive::detail::save_non_pointer_type<Archive>::invoke<T>(Archive &,T &)' being compiled
        with
        [
            Archive=boost::archive::text_oarchive,
            T=Foo
        ] 
```

但是，如果我更改`file`为`int`，一切都很好。如何告诉 boost 将 HANDLE 序列化为整数？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-09T21:09:31.667

`HANDLE`是在`winnt.h`. 根据[MSDN](http://msdn.microsoft.com/en-us/library/windows/desktop/aa383751.aspx#HANDLE)，

> 对象的句柄。该类型声明`WinNT.h`如下：
> 
> ```
> typedef PVOID HANDLE; 
> ```

所以，现在我们看到它`HANDLE`实际上只是`void *`——代表一个对象的句柄。想想你想要做什么；在 Windows API 中序列化指向某个对象的*指针*有意义吗？

相反，尝试序列化检索等价物所需的内容`HANDLE`；从成员的名字来看，我猜你用过[`CreateFile`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa363858.aspx)——所以，你需要知道......

*   文件名
*   所需的访问权限（例如`GENERIC_READ | GENERIC_WRITE`）
*   共享模式（例如`FILE_SHARE_DELETE`）
*   可选地，安全属性
*   创作倾向（即`CREATE_NEW`,`TRUNCATE_EXISTING`等）
*   文件或设备标志和属性
*   （可选）模板文件——用于在创建文件时复制其属性

* * *

现在，如果你*真的*不想这样做——你**肯定**你想要指针值——也许在通过[`reinterpret_cast`](http://en.cppreference.com/w/cpp/language/reinterpret_cast)to `std::intptr_t`or转换之后尝试序列化它`std::uintptr_t`（*可能*`cstdint`在C++11中定义）。

```
ar & reinterpret_cast<std::intptr_t>(file); 
```

...那么您应该将其与以下内容结合起来（反序列化时）：

```
std::intptr_t _file;
ar & _file;
HANDLE file = std::reinterpret_cast<HANDLE>(_file); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T22:44:40.837

最终通过拆分序列化来解决问题。虽然看起来像一个黑客：

```
struct Foo
{
    HANDLE file;

protected:
    friend class boost::serialization::access;

    template<class Archive>
    void save(Archive & ar, const unsigned int /*version*/) const
    {
        unsigned int _file = reinterpret_cast<unsigned int>(file);
        ar & _file;
    }

    template<class Archive>
    void load(Archive & ar, const unsigned int /*version*/)
    {
        unsigned int _file;
        ar & _file;
        file = reinterpret_cast<HANDLE>(_file);
    }
    BOOST_SERIALIZATION_SPLIT_MEMBER()
}; 
```

# haskell - 格式化表格中的字符串

> ID：12342959
> 
> 赞同：0
> 
> 时间：2012-09-09T21:02:50.207
> 
> 标签：haskell

我仍在尝试解决字符串格式的问题，但似乎无法正常工作。

我有两个函数可以输出整数，因为它们只是计算，我想在第三个和新输出中创建一个包含这两个计算的字符串，并让它变得漂亮漂亮。我想以表格（列和行）的形式呈现它。

到目前为止我正在尝试的是：

```
 tableShow :: Int -> Int -> String
   tableShow n 0 = putStrLn (n  power1  power2)
   tableShow n k 
       | let list_k = [0..k]
       | k > 0      =  show(unlines[n ++ "\t" calc1 x k ++ "\t" ++ "\t" ++ calc2 x k | x <- list_k]) 
```

calc1 和 calc2 只取用户给定的两个整数并对它们进行简单的计算，返回一个值。至少我让那些像魅力一样工作的人。:)

任何人都知道我哪里出错了？！？有没有人可以指出我正确的方向？

任何和所有的想法和建议都将不胜感激，我整个周末都在这：/

//问候

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-09T21:53:55.903

```
tableShow :: Int -> Int -> String
tableShow n 0 = putStrLn (n  power1  power2)
tableShow n k 
    | let list_k = [0..k]
    | k > 0      =  show(unlines[n ++ "\t" calc1 x k ++ "\t" ++ "\t" ++ calc2 x k | x <- list_k]) 
```

你没有提到你的问题是错误还是你的函数没有按预期工作，但是你的`let`绑定语法是关闭的，你错过了一个`++`. 我不知道你打算做什么`n power1 power2`，但我猜你想要乘法。它应该是：

```
tableShow :: Int -> Int -> String
tableShow n 0 = putStrLn (n * power1 * power2)
tableShow n k
    | k > 0 = let list_k = [0..k] in 
              show(unlines[n ++ "\t" ++ calc1 x k ++ "\t" ++ "\t" ++ calc2 x k | x <- list_k]) 
```

您可能需要查看一两个教程以了解语法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-10T01:15:58.880

要将 Ints 等基本值转换为字符串，请使用 show。

```
multMsg x y = "The product of " ++ show x ++ " and " ++ show y ++ " is " ++ show (x*y) 
```

不过，我通常在这种情况下使用 concat 。

```
multMsg2 x y = concat ["The product of ", show x, " and ", show y, " is ", show (x*y)] 
```

# c - 添加功能

> ID：12342962
> 
> 赞同：-4
> 
> 时间：2012-09-09T21:03:23.470
> 
> 标签：c

```
#include <stdio.h>
int bitCount(unsigned int n);

int main(void) {
    printf ("# 1-bits in base 2 representation of %u = %d, should be 0\n", 0, bitCount (0));
    printf ("# 1-bits in base 2 representation of %u = %d, should be 1\n", 1, bitCount (1));
    printf ("# 1-bits in base 2 representation of %u = %d, should be 17\n", 2863377066u, bitCount(2863377066u));
    printf ("# 1-bits in base 2 representation of %u = %d, should be 1\n", 268435456, bitCount(268435456));
    printf ("# 1-bits in base 2 representation of %u = %d, should be 31\n", 4294705151u, bitCount(4294705151u));
    return 0;
}

int bitCount(unsigned int n) {
    /* your code here */
} 
```

您已决定希望上面的 bitcount 程序从命令行运行

```
# ./bitcount 17
2
# ./bitcount 255
8
# ./bitcount 10 20
too many arguments!
# ./bitcount
[the same result as from part a] 
```

我知道我们必须在 `printf("too many arguments!")`下面包含以上内容，`return 0`但它一直给我一个错误。谁能帮我这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T21:08:05.820

修改您的`main`声明以接受参数：

```
int main(int argc, char * argv[]) { 
```

确保参数计数 ( `argc`) 为 2（一个用于命令，一个用于参数）：

```
if(argc < 2) {
    // Give some usage thing
    puts("Usage: bitcount <whatever>");
    return 0;
}

if(argc > 2) {
    puts("Too many arguments!");
    return 0;
} 
```

然后，将参数解析为`argv[1]`使用类似的`int`东西`atoi`：

```
printf("%d\n", bitCount(atoi(argv[1]))); 
```

（`stdlib.h`顺便说一下，它在 中。而且您可能还想做一些错误检查。）

# python - 调用超类的 __call__ 方法

> ID：12342963
> 
> 赞同：6
> 
> 时间：2012-09-09T21:03:37.090
> 
> 标签：python, inheritance

[http://code.google.com/p/python-hidden-markov/source/browse/trunk/Markov.py](http://code.google.com/p/python-hidden-markov/source/browse/trunk/Markov.py)

包含一个类`HMM`，它继承自`BayesianModel`一个新式类。每个人都有一个`__call__`方法。`HMM`的`__call__`方法是在第 227 行调用 BayesianModel 的：

```
return super(HMM,self)(PriorProbs) 
```

但是，这失败了一个例外

```
super(HMM,self) 
```

不可调用。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-09T21:04:58.403

您需要`__call__`显式调用方法本身：

```
return super(HMM, self).__call__(PriorProbs) 
```

这适用于*任何*需要调用超类上的重写方法的钩子。

`super()`返回一个代理对象，其[`.__getattribute__()`方法](http://docs.python.org/reference/datamodel.html#object.__getattribute__)在超类层次结构中搜索您正在搜索的属性。这个代理本身是不可调用的；它没有`__call__`自己的方法。*只有*当您将方法明确查找`__call__`为该代理的属性时，python 才能为您找到正确的实现。

# android - 拆分操作栏 - 单击项目后创建菜单

> ID：12342969
> 
> 赞同：0
> 
> 时间：2012-09-09T21:04:26.753
> 
> 标签：android, android-actionbar

我想创建这样的东西：![在此处输入图像描述](../Images/eddcc78a09549b8408fd55e484a2bf96.png)

到目前为止我所做的：

```
public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
    case R.id.menu_layer:
        //I want to create my menu here
        break;

    case R.id.menu_direction:

        break;

    default:
        break;
    }
    return (true);
}` 
```

这是我的主 menu.xml ：

```
<menu xmlns:android="http://schemas.android.com/apk/res/android">
<item android:id="@+id/menu_layer"
      android:icon="@drawable/ic_action_search"
      android:title="@string/menu_layers"
      android:showAsAction="ifRoom|withText" />
<item android:id="@+id/menu_direction"
      android:icon="@drawable/ic_action_search"
      android:title="@string/menu_directions"
      android:showAsAction="ifRoom|withText" />
</menu> 
```

＆这是我单击 menu_layer 后要创建的菜单：

```
<menu xmlns:android="http://schemas.android.com/apk/res/android" >
<item
android:id="@+id/satView"
android:icon="@drawable/ic_action_search"
android:orderInCategory="0"
android:showAsAction="always"
android:title="@string/sat_View"/>
<item
android:id="@+id/streetView"
android:icon="@drawable/ic_action_search"
android:orderInCategory="1"
android:showAsAction="always"
android:title="@string/street_View"/>  
</menu> 
```

谁能帮我解决这个问题？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T21:44:03.043

您在该地图应用程序中看到的是一个自定义对话框。您确实可以制作自己的完全自定义的对话框。创建一个布局，就像你的 Activity 布局（比如 custom_dialog.xml）

```
<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="match_parent"
>
   <TextView
      android:layout_width="match_parent"
      android:layout_height="wrap_content"
      android:text="Hey!"
   />

   <ListView
      android:layout_width="match_parent"
      android:layout_height="match_parent"
   />
</LinearLayout> 
```

将此文件放入项目/布局文件夹中。

并将这段代码放到 Activity 的 onCreateDialog(int) 中，您可以在其中创建要显示的对话框。

```
Dialog dialog = new Dialog(getApplicationContext());
dialog.setContentView(R.layout.custom_dialog);

[... misc. initialization] 
```

我试图简单地回答您的问题，但有大量可用资源，[Android 的 API 指南](http://developer.android.com/guide/topics/ui/dialogs.html) 充分解释了如何创建和自定义对话框。

# iphone - 在测试用户上安装应用

> ID：12342988
> 
> 赞同：1
> 
> 时间：2012-09-09T21:06:59.050
> 
> 标签：iphone, ios, installation

我最近完成了我的应用程序开发，现在我需要用相当多的用户对其进行测试。所以我想把它安装在我朋友的设备上。在每台设备上从我的 Macbook 手动安装应用程序会很困难，那么有没有办法让他们自己安装应用程序？也许给他们发个链接什么的..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T21:10:16.050

您可以使用 TestFlight 服务[https://testflightapp.com](https://testflightapp.com)。

这是一项免费服务，可让您定义测试用户群、通知和邀请他们并轻松分发您的应用程序以供他们测试。

基本逻辑与 Apple 相同，但它非常易于学习和使用——即使是真正“普通”iPhone 用户的测试人员也可以轻松地被邀请并开始测试您的应用程序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-09T21:10:19.560

您可以使用[TestFlight App](http://testflightapp.com/)之类的工具来自动化通过电子邮件发送构建的过程，以便您的 Beta 测试人员可以单击链接并直接在设备上安装该应用程序。但是，您最初需要将他们的设备 UUID 添加到每个构建的签名证书中

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-10T05:36:48.160

这是一个关于将构建分发给测试人员的不错的教程：

[如何举办 Beta 测试](http://www.raywenderlich.com/1669/how-to-host-a-beta-test-for-your-ios-app)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-09T21:11:36.457

我认为他们能够做到这一点的唯一方法是在您的 Apple Developers 帐户上注册他们的设备，并且他们将需要您提供的配置许可证。然后，一旦他们有了项目，如果他们有 Macintosh，他们就可以将其上传到他们的设备。

# php - 如何使用链接在php中下载文件

> ID：12342991
> 
> 赞同：-1
> 
> 时间：2012-09-09T21:07:37.260
> 
> 标签：php, html

我正在使用以下代码填充下拉框并选择一个文件并下载它。它工作完美。但我尝试使用每个文件显示为链接并在单击链接时下载它。

```
echo "<form id=\"form\" name=\"psform\" action=\"download_logic.php\" method=\"post\"><label>Select File:&nbsp</label><select name=\"file\" >";
            while ($row = mysql_fetch_array($result)) {
             echo "<option  value='" . $row['location'] . "'>"  . $row['location'] . "</option>";
            }

            echo "</select></label>";
        echo"<br>";
            echo "<input id=\"submit\" type=\"submit\"  name=\"filesubmit\" value=\"Download\" />  </form>"; 
```

它给了我错误....请提供任何帮助....

我正在使用以下代码：

```
while ($row = mysql_fetch_array($result)) {

    echo "<a  href=\"download_logic.php?f=\". $row['location'] .\". $row['fileshare'] .\">"  . $row['fileshare'] . "</a>";

} 
```

这是`<a>`标签中的错误***错误（意外的T_ENCAPSED_AND_WHITESPACE）***

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T21:28:24.553

这应该工作：

```
echo '<a  href="download_logic.php?f='. $row['location'] .'/'. $row['fileshare'] .'">'  . $row['fileshare'] . '</a>'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T21:32:58.233

真的很抱歉，我无法告诉您为什么会发生这种情况，但是如果您将所有的**\"**更改为**'**它应该对您有用。

```
echo "<form id='form' name='psform' action='download_logic.php' method='post'><label>Select File:&nbsp</label><select name='file' >";
            while ($row = mysql_fetch_array($result)) {
             echo "<option  value='" . $row['location'] . "'>"  . $row['location'] . "</option>";
            }

            echo "</select></label>";
        echo"<br>";
            echo "<input id='submit' type='submit'  name='filesubmit' value='Download' />  </form>"; 
```

至于下一部分，您不能仅通过编写来将变量添加到字符串中

```
"variable: . $take['variable']" 
```

如果您希望将变量添加到字符串，请关闭字符串的 writen 部分，然后添加变量，如下所示：

```
"variable: ". $take['variable'] 
```

这是它的样子：

```
 while ($row = mysql_fetch_array($result)) {

    echo "<a  href='download_logic.php?f=". $row['location'] . $row['fileshare'] ."'>"  . $row['fileshare'] . "</a>";

} 
```

# python - 尝试从 C 调用 Python

> ID：12342993
> 
> 赞同：3
> 
> 时间：2012-09-09T21:08:01.093
> 
> 标签：python, c, visual-c++

```
#include <Python.h>

static PyObject* helloworld(PyObject* self)
{
    return Py_BuildValue("s", "Hello, Python extensions!!");
}

static char helloworld_docs[] =
    "helloworld( ): Any message you want to put here!!\n";

static PyMethodDef helloworld_funcs[] = {
    {"helloworld", (PyCFunction)helloworld, 
     METH_NOARGS, helloworld_docs},
    {NULL}
};

void inithelloworld(void)
{
    Py_InitModule3("helloworld", helloworld_funcs,
                   "Extension module example!");
} 
```

我一直在尝试用 C 扩展 Python，因此一直在尝试在 Visual Studio 中编译上述代码。但是，我反复收到以下错误：

```
LINK : fatal error LNK1104: cannot open file 'python27.lib' 
```

将 python27.lib 添加到项目后，我收到以下错误：

```
HiWorld.obj : error LNK2001: unresolved external symbol __imp__Py_BuildValue
HiWorld.obj : error LNK2001: unresolved external symbol __imp__Py_InitModule4 
```

我已经坚持了很长一段时间，非常感谢任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T21:22:35.597

这是一个链接问题，最常见的错误是忘记了 Release 配置文件和 Debug 配置文件使用不同的符号集，因此只能成功链接到不同版本的库；这意味着在 Debug 模式下您应该提供`library-debugVersion.lib`并在 Release 中`library.lib`。

我也不会过多地使用 Visual Studio，但我认为将我经常需要的所有库放在公共文件夹中会更方便，`C:\Program Files (x86)\Microsoft SDKs\Windows\v6.0A\`这样无论单个项目的设置如何，VS 都可以自动为您找到正确的库.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T21:16:55.843

假设您的代码是正确的，使其工作的最佳方法是使用`setup.py`文件。例如，这是我在创建 hello world 模块时使用的代码：

设置.py：

```
from distutils.core import setup, Extension

setup(
    ext_modules = [
        Extension("ext1", sources=["ext1.c"]),
   ],
) 
```

在这里，"`ext1"`将替换您的模块名称，而 '"ext1.c"' 将替换您的 C 源文件的名称。

然后你从这样的终端运行它：

```
setup.py install 
```

仅供参考，这是我的 C 源代码：

ext1.c：

```
#include "Python.h"

static PyObject *
hello_world(PyObject * self, PyObject * args)
{
    return Py_BuildValue("s", "Hello World!");
}

static PyMethodDef
module_functions[] = {
    { "hello_world", hello_world, METH_VARARGS, "Says Hello World."},
    { NULL }
};

void
initext1(void)
{
    Py_InitModule3("ext1", module_functions, "My additional Module");
} 
```

# r - paste0-在 plyr:rename 中构建一个参数（现在有更新）

> ID：12342996
> 
> 赞同：2
> 
> 时间：2012-09-09T21:08:18.750
> 
> 标签：r, rename, paste, plyr

[正如Jared](https://stackoverflow.com/users/260533/jared)所建议的那样，我正在根据[这个答案](https://stackoverflow.com/questions/11367485/rename-columns-of-a-data-frame-by-searching-column-name/11379464#11379464)尝试优化 中的第二个参数。`plyr:rename`

简而言之*，他们*`plyr`正在使用这样的方式重命名数据框中的某些列，

```
df <- data.frame(col1=1:3,col2=3:5,col3=6:8)
df
newNames <- c("new_col1", "new_col2", "new_col3")
oldNames <- names(df)

require(plyr)
df <- rename(df, c("col1"="new_col1", "col2"="new_col2", "col3"="new_col3"))
df 
```

顺便说一句， [Jared](https://stackoverflow.com/users/260533/jared)写道：“你可以创造性地使第二个参数重命名，这样它就不会那么手动了。”

我试过像这样*有创意，*

```
df <- data.frame(col1=1:3,col2=3:5,col3=6:8)
df
secondArgument <- paste0('"', oldNames, '"','=', '"',newNames, '"',collapse = ',')
df <- rename(df, secondArgument)
df 
```

但它不起作用，任何人都可以帮我自动化这个吗？

谢谢！

### 更新 9 月 9 日星期日晚上 11:55:42

我意识到我应该更具体地回答我的问题。

我正在使用`plyr::rename`，因为在我的现实生活示例中，我有其他变量，而且我并不总是知道要重命名的变量的位置。我将更新我的问题

我的案例看起来像这样，但有 100 多个变量

```
df2 <- data.frame(col1=1:3,col2=3:5,col3=6:8)
df2
df2 <- rename(df2, c("col1"="new_col1", "col3"="new_col3"))
df2

df2 <- data.frame(col1=1:3,col2=3:5,col3=6:8)
df2
newNames <- c("new_col1", "new_col3")
oldNames <- names(df[,c('col1', 'col3')])
secondArgument <- paste0('"', oldNames, '"','=', '"',newNames, '"',collapse = ',')
df2 <- rename(df2, secondArgument)
df2 
```

如果有什么我需要澄清的，请添加评论。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-09T21:26:37.050

将名称设置为`newNames`来自的名称`oldNames`：

```
R> names(newNames) <- oldNames
R> newNames
      col1       col2       col3 
"new_col1" "new_col2" "new_col3" 
R> df <- rename(df, newNames)
R> df
  new_col1 new_col2 new_col3
1        1        3        6
2        2        4        7
3        3        5        8 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-09T23:22:21.013

修改问题的解决方案：

```
df2 <- data.frame(col1=1:3,col2=3:5,col3=6:8)
df2
newNames <- c("new_col1", "new_col3")
oldNames <- names(df2[,c('col1', 'col3')]) 
```

（根据定义不`oldNames`等于？）`c('col1','col3')`

解决方案`plyr`：

```
secondArgument <- setNames(newNames,oldNames)
library(plyr)
df2 <- rename(df2, secondArgument)
df2 
```

或者在基础 R 中，你可以这样做：

```
names(df2)[match(oldNames,names(df2))] <- newNames 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-09T21:31:39.840

`plyr::rename`需要一个命名字符向量，新名称作为值，旧名称作为名称。

这应该有效：

```
names(newNames) <- oldNames
df <- rename(df, newNames)
df
  new_col1 new_col2 new_col3
1        1        3        6
2        2        4        7
3        3        5        8 
```

# asp.net-mvc-3 - 如何设置formauthentication过期时间？它不起作用，10分钟后过期

> ID：12342997
> 
> 赞同：2
> 
> 时间：2012-09-09T21:08:40.047
> 
> 标签：asp.net-mvc-3

嗨，我使用了表单身份验证并创建票证并将其添加到响应中，效果很好。

当我查看通过 Firefox 工具>pageinfo>security>cookies 创建的 cookie 时，发现当前在 cookie 上设置的过期时间。

它在本地运行良好，但是当我将其上传到服务器（服务器 2008-iis7）上时，过期时间不起作用，但设置在 cookie 上，并且我的 cookie 总是过期约 10 减去会员将注销。有一些特殊设置，我在互联网上查看了一些示例，但找不到任何东西。

我的验证码：

```
 FormsAuthenticationTicket ticket = new FormsAuthenticationTicket(
        1,
    username,//username
    DateTime.Now,
    DateTime.Now.AddMinutes(120),
    true,
    rollname,
    FormsAuthentication.FormsCookiePath); 

    string hashCookies = FormsAuthentication.Encrypt(ticket);
    HttpCookie cookie = new HttpCookie(FormsAuthentication.FormsCookieName,hashCookies); // Hashed ticket
    cookie.Expires = DateTime.Now.AddMinutes(120);

      Response.Cookies.Add(cookie); 
```

我在 global.asax 中使用此方法检查请求身份验证：

```
protected void Application_AuthenticateRequest(object sender, EventArgs e)
    {
        // look if any security information exists for this request
        if (System.Web.HttpContext.Current.User != null)
        {

         // see if this user is authenticated, any authenticated cookie (ticket) exists for this user
            if (HttpContext.Current.User.Identity.IsAuthenticated)
            {

                // see if the authentication is done using FormsAuthentication
                if (System.Web.HttpContext.Current.User.Identity is FormsIdentity)
                {

                   // Get the roles stored for this request from the ticket
                    // get the identity of the user
                    FormsIdentity identity = (FormsIdentity)System.Web.HttpContext.Current.User.Identity;

                   // get the forms authetication ticket of the user
                    FormsAuthenticationTicket ticket = identity.Ticket;

                   // get the roles stored as UserData into the ticket 
                    string[] roles = ticket.UserData.Split(',');

                    // create generic principal and assign it to the current request
                    System.Web.HttpContext.Current.User = new  System.Security.Principal.GenericPrincipal(identity, roles);
                }
            }
        }
    } 
```

在我的网络配置中：

```
<authentication mode="Forms">

  <forms loginUrl="~/Home.aspx" timeout="120" />

</authentication> 
```

# objective-c - Objective-C，改变 NSButton 功能？

> ID：12342998
> 
> 赞同：0
> 
> 时间：2012-09-09T21:08:43.430
> 
> 标签：objective-c, cocoa, nsbutton

如何更改以前使用的按钮的功能？例如，如果我有一个“继续/取消”按钮，假设您“继续”，那么按钮会变成“查看/返回”之类的东西吗？基本上我想将相同的按钮重新用于其他事情，但是因为我不知道有人可以如何帮助我更好地理解它。谢谢你。

```
- (IBAction)someButton:(NSButton *)sender {

       if ([someString isEqualToString:someThing]) {
            isAllowed = YES;
            [oneButton setTitle:@"Proceed"];
            [self continue];
        }
        else {
            [oneButton setTitle:@"Cancel"];
            return;
            }
        }

- (void)continue {

// I would like to make someButton (above) take on different functionality 
// here if that's even possible. such as:

  [oneButton setTitle:@"View"];
  [self whatNow]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-09T21:16:32.647

在您的程序生命周期的某个时刻，您可以将 a 的先前目标和/或操作替换为`NSButton`所需的目标和/或操作。

```
[oneButton setAction:@selector(continue)]; 
```

这将导致`continue`调用您的选择器而不是`someButton:`实例`oneButton`。

OBS：只需注意您的选择器，因为 NIB 文件中的选择器有一个参数`@selector(someButton:)`，而您正在创建的选择器没有任何参数，因此它保持为`@selector(continue)`

如此处所示：[Cocoa forControlEvents:WHATGOESHERE](https://stackoverflow.com/questions/4685886/cocoa-forcontroleventswhatgoeshere)

# php - PHP 字符串的问题

> ID：12342999
> 
> 赞同：0
> 
> 时间：2012-09-09T21:09:15.923
> 
> 标签：php, regex, string

我的字符串有一些非常奇怪和严重的问题......

出于某种原因，字符串中的某些字符没有正确地通过任何函数，并且仅在一个 PHP 文件中（它在其他页面上工作正常）。

两天前我有一些工作，但现在有问题。

例如，我有一个如下所示的字符串：

```
http://example.com/v/asd238 
```

我正在尝试将其更改为如下所示：

```
http://example.com/first/second/v/asd238 
```

所以我以前有这个：

```
preg_replace('/http\:\/\/example\.com\/([v|u]*)\/([a-z0-9]*)/i', 'http://example.com/first/second/v/$1/$2'); 
```

但由于某种原因，“：”和“。” make function 基本上什么都不做。即使在 strpos() 或 str_replace() 之类的函数上。

我想知道为什么，如果我什至用'\'逃避这两个，发生了什么？我什至无法远程弄清楚为什么我会遇到这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T21:15:57.503

我认为这是最好的方法：

```
str_replace('http://example.com/', 'http://example.com/first/second/', $url); 
```

更多关于[`str_replace()`](http://php.net/manual/en/function.str-replace.php)