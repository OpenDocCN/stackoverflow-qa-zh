# StackOverflow 问答 12221000-12221999

# visual-studio-2010 - 有没有办法让 Visual Studio 2010 数据库项目对 DML 使用 DROP 和 CREATE 而不是 ALTER

> ID：12221005
> 
> 赞同：0
> 
> 时间：2012-08-31T18:47:57.383
> 
> 标签：visual-studio-2010, database-project

在为 Visual Studio 2010 SQL 数据库项目构建部署脚本时，是否有任何方法可以指示进程对存储过程和其他 DML 使用 DROP 和 CREATE 而不是始终更改它们？

例如，如果我更改存储过程，部署脚本将生成类似这样的内容......

```
ALTER PROCEDURE MyProc
AS
SELECT yadda... 
```

我希望部署脚本创建类似这样的东西

```
IF EXISTS MyProc
  DROP MyProc

CREATE PROCEDURE MyProc
AS 
SELECT yadda.... 
```

这将使版本控制的升级脚本更易于管理，并且部署的更改会执行得更好。此外，如果这是不可能的，那么至少使用 ALTER 发出 RECOMPILE 的方法会有所帮助。

[这个](https://stackoverflow.com/q/7519445/16391)问题提出了一些看起来相似的问题，但我不希望表的这种行为，只是 DML。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T20:28:31.750

我对数据库项目不够熟悉，无法回答是否可以进行 DROP 和 CREATE。但是，总的来说，我发现 CREATE 和 ALTER 比 DROP 和 CREATE 更好。

通过 CREATE 和 ALTER 我的意思是：

```
IF NOT EXISTS (SELECT 1 FROM INFORMATION_SCHEMA.ROUTINES 
                WHERE ROUTINE_NAME = 'MyProc'
                AND ROUTINE_TYPE = 'PROCEDURE')
BEGIN;
    -- CREATE PROC has to be the first statement in a batch so 
    --  cannot appear within a conditional block.  To get around 
    --  this, make the statement a string and use sp_ExecuteSql.
    DECLARE @DummyCreateText NVARCHAR(100);
    SET @DummyCreateText = 'CREATE PROC dbo.MyProc AS SELECT 0;';
    EXEC sp_ExecuteSql @DummyCreateText;
END;
GO

ALTER PROCEDURE dbo.MyProc  
AS
    SELECT yadda... 
```

CREATE 和 ALTER 优于 DROP 和 CREATE 的优点是存储过程只创建一次。一旦创建，它就永远不会被删除，因此权限不会被删除并且不会被重新创建。

在完美的世界中，存储过程的权限将通过数据库角色应用，因此在删除并重新创建存储过程后重新应用它们很容易。然而，实际上，我经常发现几年后其他应用程序可能会开始使用相同的存储过程，或者出于某种原因，好心的 DBA 可能会申请新的权限。所以我发现 DROP 和 CREATE 往往会导致应用程序在几年后崩溃（当它是你一无所知的其他人的应用程序时，情况总是更糟）。CREATE 和 ALTER 避免了这些问题。

顺便说一句，虚拟创建语句 "CREATE PROC dbo.MyProc AS SELECT 0" 可用于任何存储过程。如果真正的存储过程将有参数或返回一个包含多个列的记录集，这些列都可以在 ALTER PROC 语句中指定。CREATE PROC 语句只需要创建最简单的存储过程。（当然，CREATE PROC 语句中存储过程的名称需要更改以匹配您的存储过程的名称）

# heroku - Heroku 和 53 号公路

> ID：12221007
> 
> 赞同：8
> 
> 时间：2012-08-31T18:48:01.133
> 
> 标签：heroku, dns

我的注册商是 Godaddy，我在 Heroku 上运行我的应用程序。我想使用 Route 53 指向我的应用程序。

由于 heroku 不推荐指向其代理的 A 名称，我应该使用什么设置？（或者推荐的设置方法是什么。我不想使用他们在 heroku 教程中讨论的 SimpleDNS）。

谢谢，

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-27T19:37:23.803

我刚刚写完[Amazon Route 53 上 Heroku 文档的 Naked Domain 部分](https://devcenter.heroku.com/articles/route-53#nakedroot-domain)。这解释了如何使用 Amazon S3 和 Route 53设置从**example.com**到**www.example.com的 302 重定向。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T16:42:47.027

首先，您应该将您的 DNS 传输到 Amazon Route 53。之后，您使用 your-app.herokuapp.com 创建一个 CNAME。

您还应该在“域”下的应用程序设置页面上添加指向您的 heroku 实例的域名。

之后它应该工作。

# ios - IOS在NS(Mutable)Dictionary里面获取一个数组

> ID：12221008
> 
> 赞同：5
> 
> 时间：2012-08-31T18:48:05.657
> 
> 标签：ios

我试图在 NSMutableDictionary 中获取一个数组，如下所示：

```
{
coments =     (
);
"foto_user" = "<null>";
fotos =     (
            {
        fecha = "2012-08-31 19:44:31";
        id = 4926;
        nombre = "image5773.jpg";
        posicion = 0;
        ruta = "img/";
        tipo = 1;
    },
            {
        fecha = "2012-08-31 19:44:31";
        id = 4927;
        nombre = "image1779.jpg";
        posicion = 0;
        ruta = "img/";
        tipo = 1;
    },
            {
        fecha = "2012-08-31 19:44:31";
        id = 4928;
        nombre = "image5938.jpg";
        posicion = 0;
        ruta = "img/";
        tipo = 1;
    },
            {
        fecha = "2012-08-31 19:44:32";
        id = 4929;
        nombre = "image4424.jpg";
        posicion = 0;
        ruta = "img/";
        tipo = 1;
    }
);
"have_coments" = 0;
id = 40505;
"id_lugar" = "<null>";
"id_pais" = 28;
"id_user" = "<null>";
iso = fr;
link = "<null>";
lugar = Paris;
"nombre_pais" = "France";
root = "http://www.domain.com/";
tags =     (
);
titulo = "Sunset";
"url_share" = "http://www.friktrip.com/experiencia/40505";
videos =     (
);
} 
```

我正在使用这段代码：

```
 //Get data from dictionary
             NSMutableArray *foto = [[NSMutableArray alloc]init];
             foto = [OnlineObjects objectAtIndex:1]; 
```

但是“fotoarray”数组保持空，试图从 NSMutableArray 获取信息。

```
 //Get only the nombre Key of the NSMutableArray
             NSArray *fotoarray = [foto valueForKey:@"nombre"]; 
```

用键名为“nombre”的所有对象制作数组的方法是什么？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-31T18:55:34.897

您发布的是一个`NSDictionary`（让我们`myDict`从现在开始调用它）的描述。从数组中获取所有`nombre`值的最快方法是：`fotos`

```
NSArray *nombres = [myDict valueForKeyPath:@"fotos.nombre"]; 
```

# multithreading - actionscript 中的线程或后台处理

> ID：12221009
> 
> 赞同：0
> 
> 时间：2012-08-31T18:48:09.447
> 
> 标签：multithreading, actionscript

我知道 Actionscript 不是多线程的。但是，我想以某种方式解决这个问题。在呈现 UI 时，我需要向服务器发出多个请求（UI 呈现多个图形）。

我找到[了这篇文章](http://blogs.adobe.com/aharui/2008/01/threads_in_actionscript_3.html)，我正在探索如何在我的情况下充分利用它。

有没有替代的朋友？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T13:04:20.807

1) 在闪存中，**所有**远程调用（如`RemoteObject`、`URLLoader`等`HTTPService`）都是**异步**的。所以服务器请求不需要任何多线程 - UI 不会被冻结！

2) 在 FlashPlayer 11.4 和 Air 3.4 中，多线程成为可能，但尚未在已知应用程序中真正使用......请参阅这些： http: [//helpx.adobe.com/flash-player/release-note/fp_114_air_34_release_notes.html](http://helpx.adobe.com/flash-player/release-note/fp_114_air_34_release_notes.html) [http ://www.bytearray.org/?p=4423](http://www.bytearray.org/?p=4423)

3) 此外，可以使用延迟和调用超时来避免 Flash 中长流程操作的 UI 冻结，例如异步 JPEG 编码器的示例：

[快速或异步 AS3 JPEG 编码](https://stackoverflow.com/questions/2509554/fast-or-asynchronous-as3-jpeg-encoding)

[http://www.switchonthecode.com/tutorials/flex-tutorial-an-asynchronous-jpeg-encoder](http://www.switchonthecode.com/tutorials/flex-tutorial-an-asynchronous-jpeg-encoder)

[http://blog.inspirit.ru/?p=201](http://blog.inspirit.ru/?p=201)

# spring-mvc - 如何在maven打包过程中动态更新tiles.xml中的常量值？

> ID：12221012
> 
> 赞同：1
> 
> 时间：2012-08-31T18:48:24.403
> 
> 标签：spring-mvc, maven-2, tiles, maven-war-plugin

我是 Spring MVC、Tiles 和 Maven 框架的新手，我希望有人能引导我找到正确的方向，以更好地实践更新平台相关属性。我有一个tiles.xml，它定义了一个带有JavaScript/CSS 导入列表的JSP 路径。

```
<definition name="abc" extends="base.definition">
  <put-attribute name="imports" value="/WEB-INF/jsp/imports.jsp" /> 
</definition> 
```

在部署期间，我想切换到导入不同 JSP 文件中列出的 JavaScript/CSS 文件的缩小版本。

```
<put-attribute name="imports" value="/WEB-INF/jsp/importsMinified.jsp" /> 
```

我假设在 mvn 部署生命周期之一期间切换资源或重写该 tiles.xml 或某种属性文件的内容，这些文件定义了特定于环境的定义。但是，我找不到完成这项任务的好例子。如果有人遇到过这种情况，您能否告诉我转换进口的更好解决方案是什么？我也不确定分成两个 JSP 文件是否是更好的解决方案。

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T05:26:55.170

我不知道有一个插件会专门为您执行此操作`Tiles`，但您始终可以让 maven 过滤文件以查找替换变量。

例如...

**pom.xml**

```
<build>
  <resources>
    <resource>
      <directory>src/main/webapp/WEB-INF</directory>
      <filtering>true</filtering>
      <includes>
        <include>**/tiles.xml</include>
      </includes>
    </resource>
  </resources>
</build> 
```

**瓷砖.xml**

```
<definition name="abc" extends="base.definition">
  <put-attribute name="imports" value="/WEB-INF/jsp/${importsjsp}" /> 
</definition> 
```

从这里您可以选择如何管理`imports.path`财产：

*   在命令行上传递一个属性`mvn -Dimportsjsp=importsMinified.jsp package`
*   `profiles`在你的 pom 中添加一个具有不同值的节。调用 maven`-P`显式传递开关以选择您的配置文件，或满足激活要求。

# ajax - 如何在 CodeIgniter 中获取服务器端 AJAX 查询的参数？

> ID：12221015
> 
> 赞同：0
> 
> 时间：2012-08-31T18:48:42.610
> 
> 标签：ajax, codeigniter

我有 AJAX 代码，它调用 CodeIgniter 后端的控制器：

```
<script>
    $(document).ready(function(){

            $("#select_bank").change(function(){
                selected_bank = $("#select_bank option:selected").text();

                $.ajax({
                    url:'<?=base_url().'atm/select_region/&'+selected_bank; ?>',
                    success:function(msg){

                    }
                });

            });

    }); 
```

所以，我想在控制器（CodeIgniter）中获取这个参数，但是，因为这不是任何形式，所以使用

```
$bank = $this->input->post('') 
```

没有效果。真的，我想澄清这一刻

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T18:59:13.467

您需要告诉 ajax 函数您正在发送 POST 数据

```
$.ajax({
                type: "POST",
                dataType: 'html',
                url: <?= base_url ?> + "atm/select_region",
                data: {nameofpostvariable:valuethatyousend},
                success: function(output){

                },
                error: function(output){                
                    alert('error');                         
                }               
            }); 
```

在`data: {nameofpostvariable:valuethatyousend},`您创建 $_POST['nameofpostvariable']的行上

# eclipse - 在 Google Drive/DropBox 中存储代码

> ID：12221016
> 
> 赞同：2
> 
> 时间：2012-08-31T18:49:00.080
> 
> 标签：eclipse, visual-studio-2010, batch-file, backup, cloud

首先，我知道我可能应该使用 GitHub 或其他一些在线存储库，但我想探索一些使我的方法起作用所必需的概念。

每次关闭 Visual Studio、Eclipse、记事本时，我都想运行一个批处理脚本/程序。具体来说，我想运行一个复制程序，将我使用该程序生成的所有源代码复制到 Google Drive/Dropbox 文件夹中的一个文件夹中。这样我就知道它已保存到云端。这样我就不必在每个开发环境中设置特殊的备份扩展。

首先，是否有一个内置的简单解决方案来执行上述操作？或者我是否需要编写一个自定义服务来检查这些程序何时关闭？如果这是我应该去哪里寻找如何开始的例子？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T17:58:38.163

我认为您可以及时运行脚本而不是采用这种方法 - 比如说每 15 分钟。

本次评估将具有以下优点：

1.  易于实施
2.  工具无关
3.  及时备份
4.  重复使用

所以我认为你的问题将通过这种方法得到解决。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T00:39:49.733

不，没有简单的内置方法可以在需要时备份所需的文件。

相反，您可以简单地将您的工作目录指向您的 Gdrive 或 DropBox 文件夹，并在其中为每个文件夹创建一个文件夹。

或者，您可以创建一个每 10 分钟或多长时间复制一次文件的任务。

* * *

但是，如果您希望它仅在您退出指定的程序时运行：是的，您几乎需要为要备份的每个程序编写一个批处理文件。然后调用批处理文件而不是程序。

`startVS.bat`

```
set DropBox=C:\Wherever\
start /wait "" "C:\Program Files (x86)\Microsoft Visual Studio 9.0\Common7\IDE\devenv.exe"
xcopy /s /e /d /y "%userprofile%\Documents\Visual Studio 2008\Projects\*.*" "%DropBox%" 
```

如果你想拥有相同的图标，并为批处理文件运行最小化：

1) 打开 Windows 资源管理器，导航到 startVS.bat，右键单击它，然后单击`Create Shortcut`。
2) 右键单击`startVS - ShortCut`​​ ->`Click Rename`并重命名`Visual Studios`，然后按`[ENTER]`。
3) 右键单击​​新建`Visual Studios`-> `Properties`-> `Change Icon`-> `Browse`
4) 粘贴`%ProgramFiles% (x86)\Microsoft Visual Studio 9.0\Common7\IDE\devenv.exe`到`File Name`框中。
5) 单击`Open`-> `OK`
6) 单击`Normal Window`-> `Minimized`-> `OK`
7) 将`Visual Studios`（真正命名的`Visual Studios.lnk`）的副本放在您想要的任何位置，例如在`Start`菜单中。

如果您运行的不是 64 位系统，请在步骤 4 中粘贴`%ProgramFiles%\Microsoft Visual Studio 9.0\Common7\IDE\devenv.exe`到`File Name`框中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-14T21:26:40.437

对于 Google Drive，我一直在使用 GoogleCL：（我在 Linux/Crunchbang 上）

```
$ sudo apt-get install python-gdata
$ sudo apt-get install googleCL 
```

这会给你'google'命令：

```
$ which google
$ man google 
```

您可以上传文件：

```
$ google docs upload foo.txt 
```

（似乎将其存储为'foo'）

并下载它：（在我看来，语法不一致）

```
$ google docs get --title foo 
```

（由于某种原因它不会找到 foo.txt）

到目前为止，我对此并不满意。我想加密文件并将它们停在那里，但它似乎扼杀了它们。我已经尝试对它们进行 uuencoding，这样我就可以上传一个文本文件，但是对于不是那么大（1.6 MB）的文件，结果不一致。也许谷歌不想处理它不能得到任何搜索结果的文件？无论如何，也许 Dropbox 更好；还没试过。

# javascript - Javascript可以引入Jquery吗？

> ID：12221024
> 
> 赞同：1
> 
> 时间：2012-08-31T18:49:33.483
> 
> 标签：javascript, jquery, html

问题是：是否可以使用 Javascript 引入 Jquery。

这是我的代码：

```
 <html><head></head><body>

    <div id="ttt">replace me!</div>

    <div id="apxtoo"></div>
    <script type="text/javascript">
      var sc = document.createElement('script');
      sc.src = 'http://code.jquery.com/jquery-1.5.js';
      sc.type = 'text/javascript';
      document.getElementById("apxtoo").appendChild(sc);
    </script>

    <script type="text/javascript">
    $("#ttt").text = "Cancel";
    </script>

    </body></html> 
```

但是 Jquery 部分没有运行......有什么想法可以解决它吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T18:56:10.120

在执行任何依赖于它的命令之前，您需要等待脚本加载。

[http://jsfiddle.net/EZ8uL/](http://jsfiddle.net/EZ8uL/)

```
<div id="ttt">replace me!</div>

<div id="apxtoo"></div>
<script type="text/javascript">
  var sc = document.createElement('script');
  sc.src = 'http://code.jquery.com/jquery-1.5.js';
  sc.type = 'text/javascript';
  document.getElementById("apxtoo").appendChild(sc);

  sc.onload = function(){   // this is quick and dirty, use attachEvent or addEventListener
    $("#ttt").text("Cancel");
  }
</script>​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T19:23:57.920

你也可以使用 document.write 但它是有争议的，看看这个步骤：

[为什么 document.write 被认为是“坏习惯”？](https://stackoverflow.com/questions/802854/why-is-document-write-considered-a-bad-practice)

话又说回来，你会遇到它，所以值得知道它是如何工作的。例如在 Html5 样板中。 [https://github.com/h5bp/html5-boilerplate/blob/master/index.html](https://github.com/h5bp/html5-boilerplate/blob/master/index.html)

另一个信息性阅读在这里： http: [//www.stevesouders.com/blog/2012/04/10/dont-docwrite-scripts/](http://www.stevesouders.com/blog/2012/04/10/dont-docwrite-scripts/)

我认为 Google Analytics 有他们的 document.write 代码段，但现在没有了。

# java - 在 Java-GAE 上将 PDF 页面转换为 JPG

> ID：12221026
> 
> 赞同：6
> 
> 时间：2012-08-31T18:49:52.737
> 
> 标签：java, image, google-app-engine, pdf

我正在寻找一个开源 java 库，它使我能够在服务器端将 PDF 的单页呈现为 JPG 或 PNG。

不幸的是，它不能使用任何其他`java.awt.*`类

*   `java.awt.datatransfer.DataFlavor`
*   `java.awt.datatransfer.MimeType`
*   `java.awt.datatransfer.Transferable`

如果有任何办法，一个小代码片段会很棒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-19T04:52:01.777

我相信[icepdf](http://www.icesoft.org/java/projects/ICEpdf/overview.jsf)可能有你正在寻找的东西。

我曾经使用过这个开源项目，将上传的 pdf 文件转换为图像，以便在在线目录中使用。

```
import org.icepdf.core.exceptions.PDFException;
import org.icepdf.core.exceptions.PDFSecurityException;
import org.icepdf.core.pobjects.Document;
import org.icepdf.core.pobjects.Page;
import org.icepdf.core.util.GraphicsRenderingHints;

public byte[][] convert(byte[] pdf, String format) {

    Document document = new Document();
    try {
        document.setByteArray(pdf, 0, pdf.length, null);

    } catch (PDFException ex) {
        System.out.println("Error parsing PDF document " + ex);
    } catch (PDFSecurityException ex) {
        System.out.println("Error encryption not supported " + ex);
    } catch (FileNotFoundException ex) {
        System.out.println("Error file not found " + ex);
    } catch (IOException ex) {
        System.out.println("Error handling PDF document " + ex);
    }
    byte[][] imageArray = new byte[document.getNumberOfPages()][];
    // save page captures to bytearray.
    float scale = 1.75f;
    float rotation = 0f;

    // Paint each pages content to an image and write the image to file
    for (int i = 0; i < document.getNumberOfPages(); i++) {
        BufferedImage image = (BufferedImage)
                document.getPageImage(i,
                                      GraphicsRenderingHints.SCREEN,
                                      Page.BOUNDARY_CROPBOX, rotation, scale);
       try {
            //get the picture util object
            PictureUtilLocal pum = (PictureUtilLocal) Component
            .getInstance("pictureUtil");
            //load image into util
            pum.loadBuffered(image);

            //write image in desired format
            imageArray[i] = pum.imageToByteArray(format, 1f);

            System.out.println("\t capturing page " + i);

        } catch (IOException e) {
            e.printStackTrace();
        }
        image.flush();
    }
    // clean up resources
    document.dispose();
    return imageArray;
} 
```

不过请注意，这个库在 open-jdk 上抛出 SegFault 时遇到了麻烦。在 Sun 上运行良好。不确定它会在 GAE 上做什么。我不记得有问题的版本是什么，所以请注意。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-26T07:40:02.767

您可以为此目的使用 apache [PDF box APi](http://pdfbox.apache.org/downloads.cgi)并使用以下代码将两个 pdf 逐页转换为 JPG。

```
public  void convertPDFToJPG(String src,String FolderPath){

           try{
               File folder1 = new File(FolderPath+"\\");
               comparePDF cmp=new comparePDF();
               cmp.rmdir(folder1);

           //load pdf file in the document object
           PDDocument doc=PDDocument.load(new FileInputStream(src));
           //Get all pages from document and store them in a list
           List<PDPage> pages=doc.getDocumentCatalog().getAllPages();
           //create iterator object so it is easy to access each page from the list
           Iterator<PDPage> i= pages.iterator();
           int count=1; //count variable used to separate each image file
           //Convert every page of the pdf document to a unique image file
           System.out.println("Please wait...");
           while(i.hasNext()){
            PDPage page=i.next(); 
            BufferedImage bi=page.convertToImage();
            ImageIO.write(bi, "jpg", new File(FolderPath+"\\Page"+count+".jpg"));
            count++;
            }
           System.out.println("Conversion complete");
           }catch(IOException ie){ie.printStackTrace();}
          } 
```

# php - 链接到我的 wordpress 子主题中的 pdf 文件夹

> ID：12221028
> 
> 赞同：0
> 
> 时间：2012-08-31T18:49:55.197
> 
> 标签：php, wordpress

我想链接到我的子主题的 pdf 文件夹中的 aa pdf，目前我正在使用以下 php

```
<?php echo esc_url( home_url( '/wp-content/themes/child-theme/pdf/bar.pdf' ) ); ?> 
```

并且想知道是否有更优雅的方式来做到这一点，不涉及包括 wp-content/themes ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T19:06:55.937

The best way to reach your child theme is through `get_stylesheet_directory_uri()`.

```
<?php echo get_stylesheet_directory_uri() . '/pdf/bar.pdf'; ?> 
```

You can find more information in the Codex: [get stylesheet directory uri](http://codex.wordpress.org/Function_Reference/get_stylesheet_directory_uri)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T18:56:39.517

只需在您的根目录中创建一个名为的新目录`pdf`

```
echo '<a href="/pdf/doc.pdf">Anchor Text</a>'; 
```

但是，我不确定这会带来什么真正的好处。

# objective-c - Objective-C 类继承

> ID：12221029
> 
> 赞同：0
> 
> 时间：2012-08-31T18:50:04.863
> 
> 标签：objective-c, inheritance, dao

我想问一个我面临的问题：我有两个类，**Photo**和**RemotePhoto**，它代表使用手机相机拍摄的照片和下载的照片。**RemotePhoto**继承自**Photo**，因为它需要重新定义相同的逻辑。

我将两种照片类型信息都保存到数据库中，在一个名为**Photo**的表中，因为它们共享相同的详细信息，并使用一列作为标志来区分它们。我使用 DAO 从 DB 获取照片信息。

问题是：

*如果一行引用本地照片应该映射到Photo*类，否则使用*RemotePhoto*，我该如何管理这一事实？我想在 DAO 实现中做出这样的区分，但我想知道是否有一些缺点。我还想知道是否可以利用一些 ObjectiveC 特性以一种优雅的方式完成这一任务（所以，也许，我可以学到一些新东西；）。

最后，如果有人遇到类似的问题，我也对一些不同的 DB 组织提案感兴趣：直到现在我还没有在 DB 上保存远程照片信息，所以我及时更新 DB 模式 :)！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T20:05:29.663

如果你的类是 NSObjects，你可以使用 isKindOfClass(RemotePhoto) 来判断对象是否是 RemotePhoto

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T20:17:07.030

您是否考虑过使用协议而不是继承。如果您的 RemotePhoto 类必须重新实现 Photo 类中保存的登录名，那么继承可能不是最好的解决方案:)

创建两个类：它们都是协议的子类`LocalPhoto`并实现了协议。有一个方法（或 PhotoFactory，如果你喜欢的话）可以接受你的 DAO 并返回. 您的应用程序的其余部分不需要关心它是本地照片还是远程照片。`RemotePhoto``NSObject``Photo``id <Photo>`

# sql - 在查询和处理异常中使用 SQL 函数

> ID：12221033
> 
> 赞同：0
> 
> 时间：2012-08-31T18:50:14.270
> 
> 标签：sql, function, clr, .net-assembly

在查询中，我使用的是 SQL 函数（它调用 .NET 函数进行 xml 转换）

```
SELECT ApplyXMLTransform((subquery which returns XML type), (subquery which gets the XSLT) FROM SomeTable 
```

当函数 ApplyXMLTransform 遇到异常时，整个查询就会爆炸......有没有办法防止异常破坏整个记录集（查询明智，我意识到我可以修改函数以处理托管代码中的异常）？

异常本身也是一个谜，因为当我查询罪魁祸首的记录时，我没有看到会构成异常的无效字符等......但这是另一个蠕虫罐......这是错误：

```
Msg 6522, Level 16, State 1, Line 3
A .NET Framework error occurred during execution of user-defined routine or aggregate "ApplyXsltTransform": 
System.Xml.XmlException: Invalid character in the given encoding. Line 21, position 417.
System.Xml.XmlException: 
   at System.Xml.XmlTextReaderImpl.Throw(Exception e)
   at System.Xml.XmlTextReaderImpl.InvalidCharRecovery(Int32& bytesCount, Int32& charsCount)
   at System.Xml.XmlTextReaderImpl.GetChars(Int32 maxCharsCount)
   at System.Xml.XmlTextReaderImpl.ReadData()
   at System.Xml.XmlTextReaderImpl.ParseText(Int32& startPos, Int32& endPos, Int32& outOrChars)
   at System.Xml.XmlTextReaderImpl.ParseText()
   at System.Xml.XmlTextReaderImpl.ParseElementContent()
   at System.Xml.XmlWriter.WriteNode(XmlReader reader, Boolean defattr)
   at System.Data.SqlTypes.SqlXml.CreateMemoryStreamFromXmlReader(XmlReader reader)
   at System.Data.SqlTypes.SqlXml..ctor(XmlReader value)
   at NF.Sql.Extensions.XSLTTransform.Transform(SqlXml inputDataXML, SqlXml inputTransformXML)
. 
```

# sql - 如何将行数据查询为列？

> ID：12221037
> 
> 赞同：7
> 
> 时间：2012-08-31T18:50:32.917
> 
> 标签：sql, tsql, sql-server-2005, pivot

我确定我在这里遗漏了一些东西。

我有一个这样的数据集：

```
FK RowNumber 值类型状态
1 1 aaaaa A 新
1 2 bbbbb B 好
1 3 ccccc A 坏
1 4 ddddd C 好
1 5 eeeee B 好
2 1 fffff C 坏
2 2 ggggg 一个新的
2 3 hhhhh C 不好
3 1 iiiiii 好
3 2 jjjjj 好

```

我想查询前 3 个结果并将它们作为列进行透视，因此最终结果集如下所示：

```
FK 值 1 类型 1 状态 1 值 2 类型 2 状态 2 值 3 类型 3 状态 3
1 aaaaa A 新 bbbbb B 好 ccccc A 坏
2 fffff C 坏 ggggg A 新 hhhhh C 坏
3 iiiiii 好 jjjjj 好

```

如何在 SQL Server 2005 中完成此操作？

我一直在尝试使用[PIVOT](http://msdn.microsoft.com/en-us/library/ms177410%28SQL.105%29.aspx)进行此操作，但我仍然对该关键字非常不熟悉，并且无法让它按照我想要的方式工作。

```
SELECT * --Id, [1], [2], [3]
FROM
(
    SELECT Id, Value, Type, Status
    , ROW_NUMBER() OVER (PARTITION BY Id ORDER Status, Type) as [RowNumber]
    FROM MyTable
) as T
PIVOT
(
    -- I know this section doesn't work. I'm still trying to figure out PIVOT
    MAX(T.Value) FOR RowNumber IN ([1], [2], [3]),
    MAX(T.Type) FOR RowNumber IN ([1], [2], [3]),
    MAX(T.Status) FOR RowNumber IN ([1], [2], [3])
) AS PivotTable; 
```

我的实际数据集比这个复杂一点，我需要前 10 条记录，而不是前 3 条，所以我不想简单地`CASE WHEN RowNumber = X THEN...`为每一条都做。

**更新**

我测试了下面的所有答案，发现它们中的大多数看起来都差不多，在较小的数据集（大约 3k 条记录）中没有明显的性能差异，但是在对较大的数据集运行查询时略有不同。

这是我使用 80,000 条记录并查询前 10 行中的 5 列的测试结果，所以我的最终结果集是 50 列 +`Id`列。我建议您自己测试它们，以确定哪一种最适合您和您的环境。

*   [bluefoot](https://stackoverflow.com/a/12221580/302677)对数据进行反透视和重新透视的答案平均最快，大约为 12 秒。我也喜欢这个答案，因为我发现它最容易阅读和维护。

*   [Aaron 的回答](https://stackoverflow.com/a/12221510/302677)和[koderoid 的回答](https://stackoverflow.com/a/12221623/302677)都建议使用`MAX(CASE WHEN RowNumber = X THEN ...)`, 并且在 13 秒左右的平均值之后紧随其后。

*   [Rodney](https://stackoverflow.com/a/12221475/302677)使用多个`PIVOT`语句的答案平均约为 16 秒，尽管使用较少的 PIVOT 语句可能会更快（我的测试有 5 个）。

*   [亚伦回答](https://stackoverflow.com/a/12221510/302677)的前半部分建议使用 CTE 并且`OUTER APPLY`是最慢的。我不知道运行需要多长时间，因为我在 2 分钟后取消了它，那是大约 3k 条记录、3 行和 3 列而不是 80k 记录、10 行和 5 列。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-31T19:32:09.657

您可以尝试在三个单独的数据透视语句中进行数据透视。请试一试：

```
SELECT Id
    ,MAX(S1) [Status 1]
    ,MAX(T1) [Type1]
    ,MAX(V1) [Value1]
    --, Add other columns
FROM
(
    SELECT Id, Value , Type, Status
    , 'S' + CAST(ROW_NUMBER() OVER (PARTITION BY Id ORDER BY Status, Type) AS VARCHAR(10)) [Status_RowNumber]
    , 'T' + CAST(ROW_NUMBER() OVER (PARTITION BY Id ORDER BY Status, Type) AS VARCHAR(10)) [Type_RowNumber]
    , 'V' + CAST(ROW_NUMBER() OVER (PARTITION BY Id ORDER BY Status, Type) AS VARCHAR(10)) [Value_RowNumber]
    FROM MyTable
) as T
PIVOT
(   
    MAX(Status) FOR Status_RowNumber IN ([S1], [S2], [S3],[S4],[S5],[S6],[S7],[S8],[S9],[S10])
)AS StatusPivot
PIVOT(
    MAX(Type) FOR Type_RowNumber IN ([T1], [T2], [T3],[T4],[T5],[T6],[T7],[T8],[T9],[T10])
)AS Type_Pivot
PIVOT(
    MAX(Value) FOR Value_RowNumber IN ([V1], [V2], [V3],[V4],[V5],[V6],[V7],[V8],[V9],[V10])
)AS Value_Pivot
GROUP BY Id 
```

我不知道选择前十名记录的标准的全部范围，但这会产生和输出可能会让你更接近你的答案。

[SQL 小提琴示例](http://sqlfiddle.com/#!3/15be1/1)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-31T19:41:31.013

你可以对数据做一个`UNPIVOT`然后再做一个`PIVOT`。这可以静态或动态完成：

静态版本：

```
select *
from
(
  select fk, col + cast(rownumber as varchar(1)) new_col,
    val
  from 
  (
    select fk, rownumber, value, cast(type as varchar(10)) type,
      status
    from yourtable
  ) x
  unpivot
  (
    val
    for col in (value, type, status)
  ) u
) x1
pivot
(
  max(val)
  for new_col in
    ([value1], [type1], [status1], 
     [value2], [type2], [status2],
    [value3], [type3])
) p 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/3290f/6)

`unpivot`动态版本，这将在运行时获取到然后到的列列表`pivot`：

```
DECLARE @colsUnpivot AS NVARCHAR(MAX),
    @query  AS NVARCHAR(MAX),
    @colsPivot as  NVARCHAR(MAX)

select @colsUnpivot = stuff((select ','+quotename(C.name)
         from sys.columns as C
         where C.object_id = object_id('yourtable') and
               C.name not in ('fk', 'rownumber')
         for xml path('')), 1, 1, '')

select @colsPivot = STUFF((SELECT  ',' 
                      + quotename(c.name 
                         + cast(t.rownumber as varchar(10)))
                    from yourtable t
                     cross apply 
                      sys.columns as C
                   where C.object_id = object_id('yourtable') and
                         C.name not in ('fk', 'rownumber')
                   group by c.name, t.rownumber
                   order by t.rownumber
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

set @query 
  = 'select *
      from
      (
        select fk, col + cast(rownumber as varchar(10)) new_col,
          val
        from 
        (
          select fk, rownumber, value, cast(type as varchar(10)) type,
            status
          from yourtable
        ) x
        unpivot
        (
          val
          for col in ('+ @colsunpivot +')
        ) u
      ) x1
      pivot
      (
        max(val)
        for new_col in
          ('+ @colspivot +')
      ) p'

exec(@query) 
```

见[SQL Fiddle with Demo](http://sqlfiddle.com/#!3/3290f/33)

两者都会产生相同的结果，但是如果您不提前知道列数，动态效果会很好。

动态版本在行号已经是数据集的一部分的假设下工作。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-31T19:36:10.513

罗德尼的多支点很聪明，这是肯定的。当您进入 10X 与 3X 区域时，这里还有另外两个选择当然不那么吸引人。

```
;WITH a AS
(
    SELECT Id, Value, Type, Status, 
      n = ROW_NUMBER() OVER (PARTITION BY Id ORDER BY [Status], [Type])
    FROM dbo.MyTable
)
SELECT a.Id, 
 Value1 = a.Value, Type1 = a.[Type], Status1 = a.[Status],
 Value2 = b.Value, Type2 = b.[Type], Status2 = b.[Status],
 Value3 = c.Value, Type3 = c.[Type], Status3 = c.[Status]
FROM a
OUTER APPLY (SELECT * FROM a AS T2 WHERE n = a.n + 1 AND id = a.id) AS b
OUTER APPLY (SELECT * FROM a AS T2 WHERE n = b.n + 1 AND id = b.id) AS c
WHERE a.n = 1
ORDER BY a.Id; 
```

- 或者 -

```
;WITH a AS
(
    SELECT Id, Value, [Type], [Status], 
      n = ROW_NUMBER() OVER (PARTITION BY Id ORDER BY [Status], [Type])
    FROM dbo.MyTable
)
SELECT Id,
  Value1  = MAX(CASE WHEN n = 1 THEN Value    END),
  Type1   = MAX(CASE WHEN n = 1 THEN [Type]   END),
  Status1 = MAX(CASE WHEN n = 1 THEN [Status] END),
  Value2  = MAX(CASE WHEN n = 2 THEN Value    END),
  Type2   = MAX(CASE WHEN n = 2 THEN [Type]   END),
  Status2 = MAX(CASE WHEN n = 2 THEN [Status] END),
  Value3  = MAX(CASE WHEN n = 3 THEN Value    END),
  Type3   = MAX(CASE WHEN n = 3 THEN [Type]   END),
  Status3 = MAX(CASE WHEN n = 3 THEN [Status] END)
FROM a
GROUP BY Id
ORDER BY a.Id; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-31T19:44:12.963

这可能对您有用，尽管它并不优雅。

```
select aa.FK_Id
    , isnull(max(aa.Value1), '') as Value1
    , isnull(max(aa.Type1), '') as Type1
    , isnull(max(aa.Status1), '') as Status1
    , isnull(max(aa.Value2), '') as Value2
    , isnull(max(aa.Type2), '') as Type2
    , isnull(max(aa.Status2), '') as Status2
    , isnull(max(aa.Value3), '') as Value3
    , isnull(max(aa.Type3), '') as Type3
    , isnull(max(aa.Status3), '') as Status3
from
(       
    select FK_Id
            , case when RowNumber = 1 then Value else null end as Value1
            , case when RowNumber = 1 then [Type] else null end as Type1
            , case when RowNumber = 1 then [Status] else null end as Status1
            , case when RowNumber = 2 then Value else null end as Value2
            , case when RowNumber = 2 then [Type] else null end as Type2
            , case when RowNumber = 2 then [Status] else null end as Status2
            , case when RowNumber = 3 then Value else null end as Value3
            , case when RowNumber = 3 then [Type] else null end as Type3
            , case when RowNumber = 3 then [Status] else null end as Status3
    from Table1
) aa
group by aa.FK_Id 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-31T20:54:56.763

尝试这样的事情：

```
declare @rowCount int 
set @rowCount = 10

declare @isNullClause varchar(4024)
set @isnullClause = ''
declare @caseClause varchar(4024)
set @caseClause = ''

declare @i int 
set @i = 1

while(@i <= @rowCount) begin 
    set @isnullClause = @isNullClause + 
                        ' , max(aa.Value' + CAST(@i as varchar(3)) + ') as Value'    + CAST(@i as varchar(3)) +
                        ' , max(aa.Type' + CAST(@i as varchar(3)) + ') as Type'  + CAST(@i as varchar(3)) +
                        ' , max(aa.Status' + CAST(@i as varchar(3)) + ') as Status'  + CAST(@i as varchar(3)) + ' '; 
    set @caseClause = @caseClause + 
        ' , case when RowNumber = ' + CAST(@i as varchar(3)) + ' then Value else null end as Value' + CAST(@i as varchar(3)) +
        ' , case when RowNumber = ' + CAST(@i as varchar(3)) + ' then Type else null end as Type' + CAST(@i as varchar(3)) +
        ' , case when RowNumber = ' + CAST(@i as varchar(3)) + ' then Status else null end as Status' + CAST(@i as varchar(3)) + ' '

    set @i = @i + 1; 
end

declare @sql nvarchar(4000)
set @sql = 'select aa.FK_Id ' + @isnullClause + ' from ( select FK_Id ' 
            + @caseClause + '  from Table1) aa group by aa.FK_Id '

exec SP_EXECUTESQL @sql 
```

# file-upload - 在 Drupal 6 中显示实际附加文件不作为链接？

> ID：12221038
> 
> 赞同：0
> 
> 时间：2012-08-31T18:50:37.640
> 
> 标签：file-upload, drupal-6

我在 Drupal 6 中启用`File Upload`了模块，所以如果我创建类似的内容`Page`，我将能够上传像图像或文档这样的文件。我在内容中附加了一张图片，当我查看它时，它显示的不是图片而是链接。我该怎么做才能显示实际图像？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T20:34:29.467

您将在 node-contentType.tpl.php 和 page.tpl.php 中获得图像路径。在任何页面中，您都可以显示图像而不是显示图像路径。

# c# - 如何从 JSON 请求中获取数据并在 Metro 应用程序中显示

> ID：12221039
> 
> 赞同：1
> 
> 时间：2012-08-31T18:50:55.280
> 
> 标签：c#, json, parsing, microsoft-metro

我有一个包含此 JSON 数据的 URL：

```
[{"title":"Snow White & the Huntsman","year":2012,"released":1338534000,"url":"http://localhost/movie/snow-white-and-the-huntsman-2012","trailer":"http://youtube.com/watch?v=11Wn-_uyT48","runtime":127,"tagline":"","overview":"After the Evil Queen marries the King, she performs a violent coup in which the King is murdered and his daughter, Snow White, is taken captive. Almost a decade later, a grown Snow White is still in the clutches of the Queen. In order to obtain immortality, The Evil Queen needs the heart of Snow White. After Snow escapes the castle, the Queen sends the Huntsman to find her in the Dark Forest.","certification":"PG-13","imdb_id":"tt1735898","tmdb_id":"58595","poster":"http://trakt.us/images/posters_movies/180748.1.jpg","images":{"poster":"http://trakt.us/images/posters_movies/180748.1.jpg","fanart":"http://trakt.us/images/fanart_movies/180748.1.jpg"},"watchers":15,"ratings":{"percentage":68,"votes":105,"loved":71,"hated":34},"genres":["Adventure","Fantasy","Action","Drama"]} 
```

我正在尝试解析它并将其显示在我的地铁应用程序中，但我无法让它为我的生活工作！我已经尝试了很多这样的事情：

```
 string trendingURL = "http://Localhost/movies/trending.json/";

        MovieDetails newMovie = new MovieDetails();
        newMovie.title = "";
        newMovie.cover = "";

        //DataContractJsonSerializer ser = new DataContractJsonSerializer(typeof(MovieDetails));

        //StreamReader sr = new Stream(trendingURL);

        HttpClient client = new HttpClient();

        HttpResponseMessage response = await client.GetAsync(trendingURL);
        var str = await response.Content.ReadAsStreamAsync();
        var ser = new DataContractJsonSerializer(typeof(MovieDetails));
        var collection = (MovieDetails)ser.ReadObject(str);
        var results = collection.title; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T19:50:36.597

您尝试过[Json.NET](http://json.codeplex.com/)库吗？根据 Codeplex，它也支持 Windows 8，所以你可以这样做：

```
var o = JObject.Parse(YOUR_JSON_STRING);
var newMovie = new MovieDetails();
newMovie.title = (string)o["title"];
newMovie.cover = (string)o["cover"]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T00:29:37.970

使用[Json.Net](http://json.codeplex.com/)

```
using (var wc = new WebClient())
{
    string json = await wc.DownloadStringTaskAsync(trendingURL);
    dynamic obj = JsonConvert.DeserializeObject(json);
    foreach (var item in obj)
    {
        Console.WriteLine("{0} - {1} - {2} - {3}", 
                    item.title, 
                    item.year, 
                    item.images.poster, 
                    item.ratings.votes);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-01T05:09:14.380

使用speakeasy：

```
var client = new HttpClient("http://Localhost/");
var details = client.Get("movies/trending.json").OnOk().As<MovieDetails>(); 
```

你可以使用nuget安装speakeasy。

# jquery - jQuery：当类是条件的一部分时，removeClass

> ID：12221042
> 
> 赞同：-2
> 
> 时间：2012-08-31T18:51:06.727
> 
> 标签：jquery, removeclass

我只是想知道这是否可以使用 jQuery：

```
if (jQuery(".the-title").is('.selected')) {
    jQuery('.the-copy').css('display', 'block');
    jQuery(".the-title").removeClass('.selected'); //is this possible?
} 
```

基本上我想知道我是否可以删除在 if 语句中创建条件的类。如果没有，关于如何实现这一目标的任何想法？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T18:56:25.427

是的，这是可能的。但是，您的 for 语法`removeClass`不正确。它不应包括前一个时期：

```
if($(".the-title").is('.selected')) 
{
    $('.the-copy').css('display', 'block');
    $(".the-title").removeClass('selected'); //is this possible?
} 
```

请参阅此 jsFiddle 以获取演示 > [http://jsfiddle.net/QL7ds/1/](http://jsfiddle.net/QL7ds/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T18:53:30.970

是的。运行此代码非常好，因为在内部块运行之前评估条件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T18:54:08.237

是的，这是可能的。您只是在评估元素是否具有类，如果有，则可以确定是否要删除它或执行其他操作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-31T18:54:36.707

是的

```
if ($(".the-title").is('.selected')) {
   $('.the-copy').show(); //does display -> block without animation
   $(".the-title").removeClass('selected');
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-31T18:55:38.130

绝对可以。记住 jQuery 中的 removeClass 和 addClass 不需要点。正确（和更简单）的代码是：

```
$('.the-title.selected')
    .removeClass('selected')
    .siblings('.the-copy').css('display', 'block'); 
```

这是假设 .the-copy 是 .the-title 的兄弟。您可以将其替换为任何其他 jquery dom 遍历函数

# pycrypto - 使用 pycrypto 混淆间歇性故障

> ID：12221043
> 
> 赞同：1
> 
> 时间：2012-08-31T18:51:17.007
> 
> 标签：pycrypto

我一直在玩 python 的加密库，并构建了一个简单的线程服务器来加密和解密。我遇到的问题是大约三分之一的解密返回不正确。这是代码：

```
class ThreadedTCPRequestHandler(SocketServer.BaseRequestHandler):

    def handle(self):
        global KEY
        request_text = ''
        while request_text.rfind("\n") == -1:
            sock_data='';
            recv_size=8192
            sock_data=self.request.recv(recv_size)
            if sock_data == '':
                print "hangup"
                break
            request_text = request_text + sock_data

        args = json.loads(request_text)
        print request_text
        print "\n"
        if args['command'] == 'encrypt':
            iv = Random.new().read(AES.block_size)
            cipher = AES.new(KEY, AES.MODE_CFB, iv)
            crypted_message = iv + b'|' + cipher.encrypt(unquote_plus(args['message']))
            response = {'encrypted_message': binascii.hexlify(crypted_message)}

        if args['command'] == 'decrypt':
            unhexed = binascii.unhexlify(args['message'])
            components = unhexed.split('|')
            iv = components[0]
            cipher = AES.new(KEY, AES.MODE_CFB, iv)
            decrypted_message = cipher.decrypt(components[1])
            response = {'decrypted_message': decrypted_message}

        self.request.sendall(json.dumps(response) + "\n") 
```

通常，我从 python 得到这个错误：

```
 Traceback (most recent call last):
  File "/usr/local/lib/python2.7/SocketServer.py", line 582, in process_request_thread
    self.finish_request(request, client_address)
  File "/usr/local/lib/python2.7/SocketServer.py", line 323, in finish_request
    self.RequestHandlerClass(request, client_address, self)
  File "/usr/local/lib/python2.7/SocketServer.py", line 639, in __init__
    self.handle()
  File "cryptoserver.py", line 40, in handle
    cipher = AES.new(KEY, AES.MODE_CFB, iv)
  File "build/bdist.macosx-10.4-x86_64/egg/Crypto/Cipher/AES.py", line 95, in new
    return AESCipher(key, *args, **kwargs)
  File "build/bdist.macosx-10.4-x86_64/egg/Crypto/Cipher/AES.py", line 59, in __init__
    blockalgo.BlockAlgo.__init__(self, _AES, key, *args, **kwargs)
  File "build/bdist.macosx-10.4-x86_64/egg/Crypto/Cipher/blockalgo.py", line 141, in __init__
    self._cipher = factory.new(key, *args, **kwargs)
ValueError: IV must be 16 bytes long
---------------------------------------- 
```

但同样经常，我没有收到错误，但解密无法正常工作。我正在使用这个 php 来测试它：

```
<?php
include_once("config.php");

function encrypt($text) {
    $package = array("command" => "encrypt",
                    "message" => base64_encode($text));
    $package_json = json_encode($package);
    $serverSays = transmit($package_json);
    $serverSaysArray = json_decode($serverSays);
    return $serverSaysArray->encrypted_message;
}

function decrypt($text) {
    $package = array("command" => "decrypt",
                    "message" => $text);

    $package_json = json_encode($package);
    $serverSays = transmit($package_json);
    $serverSaysArray = json_decode($serverSays);
    return base64_decode($serverSaysArray->decrypted_message);
}

function transmit($package) {
    global $CRYPTO_PORT;
    global $CRYPTO_HOST;

    $serverLink = fsockopen($CRYPTO_HOST, $CRYPTO_PORT);
    if ($serverLink === FALSE) {
        error_log("Could not connect to encryption server");
        return FALSE;
    }
    fwrite($serverLink, $package . "\n");

    $response = '';
    while (!feof($serverLink)) {
        $response .= fgets($serverLink, 128);
    }
    fclose($serverLink);
    return $response;
}

while (TRUE) {
    $enc = encrypt('totsadaddywoopxxx');
    print "$enc\n";
    $dec = decrypt($enc);
    print "$dec\n";
    $enc = encrypt('totsadaddywoopxxx');
    print "$enc\n";
    $dec = decrypt($enc);
    print "$dec\n";
    $enc = encrypt('totsadaddywoopxxx');
    print "$enc\n";
    $dec = decrypt($enc);
    print "$dec\n";
    #print decrypt('1c6dee677126551fa4b3f0732986dc3b7c985c64c07075e3651213d7a69435bcd87083e729e8de860c');
    #print "\n";
    #print decrypt('550cbec7498371dc01bcd6b88fc623b47cb2efd1881da6e07ee992229308305992bbc7ccc374f00c91d56d10a68d6110e2');
    print "===========================\n";

    sleep(1);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T19:43:39.520

在您的解密例程中，您使用：

```
 unhexed.split('|') 
```

找到IV和密文之间的边界。但是，IV 是由发送者随机生成的。有时，它的 16 个字节之一是 124，即边界字符“|”。

当这种情况发生时（大约 6% 的情况），解密程序将初始化密码

*   长度在 1 到 15 个字节之间的 IV，这会导致异常，或者
*   长度为 0 的 IV，这会导致不正确的解密，因为在 PyCrypto 版本<2.6 中，默认情况下将使用全零的 16 字节 IV

在解密例程中，您应该改为：

```
components = [ unhexed[:AES.block_size], unhexed[AES.block_size+1:] ] 
```

或者你可以去掉'|' 完全分隔符。

# resize - flexslider 幻灯片无法正确调整大小

> ID：12221044
> 
> 赞同：0
> 
> 时间：2012-08-31T18:51:17.397
> 
> 标签：resize, carousel, flexslider

我已经在我的网站上设置了带有拇指的 Flexslider Carousel。出于某种原因，当我将其缩小到一定大小以下时，它无法正确调整大小然后消失（溢出：隐藏可能导致第二个问题）我坦率地承认我的 java 技能有限，所以我希望这里有人将能够告诉我我搞砸了什么......

[http://studiobilodeau.com/VLSB/slideshows/the_body2.php](http://studiobilodeau.com/VLSB/slideshows/the_body2.php)

谢谢你的帮助！v

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T10:18:00.400

试试这个，给你包含的 div (#container) 宽度以 % 为单位，以便它根据你的浏览器窗口调整或为不同的视口设置它的宽度。

# sql - Oracle SQL 分层查询：扁平化层次结构并执行聚合

> ID：12221047
> 
> 赞同：2
> 
> 时间：2012-08-31T18:51:38.190
> 
> 标签：sql, oracle, aggregate-functions, hierarchical-data, hierarchical

我正在尝试提高我已经编写的概念证明的性能，但没有运气。我认为这种方法可能存在缺陷，但我正在努力寻找另一种解决方案。我已经涵盖了我能找到的所有 Ask Tom 文章和论坛帖子。

我们正在运行 Oracle 10g R2。

我们有按层次结构排列的项目。数量是在关系上定义的。层次结构中有两种类型的对象：作为逻辑分组的程序集和表示实际项目的项目。因此，如果我们代表一个完整的工具集，我们将有一个代表整个工具集的根，以及一个代表实际工具的叶子。所以：

工具组 -> 螺丝刀 -> 平头螺丝刀 -> 小平头螺丝刀

组件可以在层次结构中重复使用，项目也可以。

我需要展平层次结构，以便项目的每个实例都有一行和数量。任何关系的数量都可以 >= 1。要获得项目的数量，我们需要从根到叶的所有关系中获取数量的乘积。

我的解决方案有效，但不能很好地扩展。针对实际数据运行大约需要 8 分钟才能生成 6000 多行，我们的层次结构可以生成 50k 多行。理想情况下，这将在 10 秒或更短的时间内完成，但我知道那是……乐观的 ;)

我的解决方案和简化数据集如下。任何反馈将不胜感激！

```
CREATE TABLE ITEMHIER
(
  PARENT          VARCHAR2(30 BYTE),
  CHILD           VARCHAR2(30 BYTE),
  QUANTITY        NUMBER(15,2),
  ISLEAF          NUMBER
);

INSERT INTO ITEMHIER (PARENT, CHILD, QUANTITY, ISLEAF) VALUES ('ASSY005','ITEM001',2,1);
INSERT INTO ITEMHIER (PARENT, CHILD, QUANTITY, ISLEAF) VALUES ('ASSY005','ITEM002',1,1);
INSERT INTO ITEMHIER (PARENT, CHILD, QUANTITY, ISLEAF) VALUES ('ASSY005','ITEM003',5,1);
INSERT INTO ITEMHIER (PARENT, CHILD, QUANTITY, ISLEAF) VALUES ('ASSY006','ITEM002',10,1);
INSERT INTO ITEMHIER (PARENT, CHILD, QUANTITY, ISLEAF) VALUES ('ASSY006','ITEM004',3,1);
INSERT INTO ITEMHIER (PARENT, CHILD, QUANTITY, ISLEAF) VALUES ('ASSY007','ITEM005',12,1);
INSERT INTO ITEMHIER (PARENT, CHILD, QUANTITY, ISLEAF) VALUES ('ASSY007','ITEM006',1,1);
INSERT INTO ITEMHIER (PARENT, CHILD, QUANTITY, ISLEAF) VALUES ('ASSY008','ITEM006',2,1);
INSERT INTO ITEMHIER (PARENT, CHILD, QUANTITY, ISLEAF) VALUES ('ASSY008','ITEM005',5,1);
INSERT INTO ITEMHIER (PARENT, CHILD, QUANTITY, ISLEAF) VALUES ('ASSY002','ASSY005',2,0);
INSERT INTO ITEMHIER (PARENT, CHILD, QUANTITY, ISLEAF) VALUES ('ASSY002','ASSY007',1,0);
INSERT INTO ITEMHIER (PARENT, CHILD, QUANTITY, ISLEAF) VALUES ('ASSY003','ASSY006',3,0);
INSERT INTO ITEMHIER (PARENT, CHILD, QUANTITY, ISLEAF) VALUES ('ASSY003','ASSY008',2,0);
INSERT INTO ITEMHIER (PARENT, CHILD, QUANTITY, ISLEAF) VALUES ('ASSY004','ASSY007',1,0);
INSERT INTO ITEMHIER (PARENT, CHILD, QUANTITY, ISLEAF) VALUES ('ASSY004','ASSY005',3,0);
INSERT INTO ITEMHIER (PARENT, CHILD, QUANTITY, ISLEAF) VALUES ('ASSY004','ASSY006',2,0);
INSERT INTO ITEMHIER (PARENT, CHILD, QUANTITY, ISLEAF) VALUES ('ASSY001','ASSY002',1,0);
INSERT INTO ITEMHIER (PARENT, CHILD, QUANTITY, ISLEAF) VALUES ('ASSY001','ASSY003',2,0);
INSERT INTO ITEMHIER (PARENT, CHILD, QUANTITY, ISLEAF) VALUES ('ASSY001','ASSY004',1,0);

COMMIT;
/

CREATE OR REPLACE FUNCTION GETQTY(P_NAVPATH   IN VARCHAR2,
                                  P_STARTWITH IN VARCHAR2) RETURN INTEGER AS

R_QTY  INTEGER;

BEGIN

    SELECT EXP(SUM(LN(QUANTITY)))
    INTO R_QTY
    FROM (
           SELECT QUANTITY, SYS_CONNECT_BY_PATH(CHILD,'/') NAV_PATH
           FROM ITEMHIER
           START WITH PARENT = P_STARTWITH
           CONNECT BY PRIOR  CHILD = PARENT
         )
    WHERE INSTR(P_NAVPATH, NAV_PATH) = 1; 

    RETURN R_QTY;
END;
/

SELECT 'ASSY001' || SYS_CONNECT_BY_PATH(CHILD,'/') NAV_PATH,
      GETQTY(SYS_CONNECT_BY_PATH(CHILD,'/'), 'ASSY001') QTY,
      CHILD
FROM ITEMHIER
WHERE ISLEAF = 1
START WITH PARENT = 'ASSY001'
CONNECT BY PRIOR CHILD = PARENT; 
```

- - 编辑

使用该`WITH`子句，我能够将处理时间缩短大约 1/2，这是一个很大的收获！还有其他想法吗？

```
with
h as (
    select sys_connect_by_path(child,'/') navpath,
          child,
          quantity qty,
          isleaf
    from itemhier
    start with parent = 'ASSY001'
    connect by prior child = parent
)
select h1.navpath,
       h1.child,
       (SELECT exp(sum(ln(h2.qty)))
        FROM h h2
        WHERE instr(h1.navpath, h2.navpath) = 1) qty
from h h1
where isleaf = 1 
```

**编辑 2**

jonearles 建议使用 sys_connect_by_path 来构建算术表达式，然后使用 PL/SQL 来评估它似乎是要走的路。针对我最大的数据集运行，我能够在 55 秒内生成 77k 行输出。

我也尝试使用并行性，但正如他所指出的，几乎没有性能提升。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-01T07:06:07.410

Podiluska 的建议很好。如果您有 Oracle 11g R2，则可以使用公用表表达式。新语法的递归性质将允许您放弃`sys_connect_by_path`组合 with `instr`，这将严重损害您的性能。

尝试这个：

```
select
  child,
  sum(total_quantity) total_quantity
from (
  with h (parent, child, isleaf, quantity, total_quantity) as (
    select 
      parent,
      child,
      isleaf,
      quantity,
      quantity total_quantity
    from
      itemhier
    where
      parent = 'ASSY001' 
    union all
    select
      ih.parent,
      ih.child,
      ih.isleaf,
      ih.quantity,
      ih.quantity * h.total_quantity total_quantity
    from
      itemhier ih
    join 
      h on h.child = ih.parent
  )
  select * from h
  where isleaf = 1
)
group by child; 
```

这是 sqlfiddle： [http ://sqlfiddle.com/#!4/9840f/6](http://sqlfiddle.com/#!4/9840f/6)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T19:01:29.643

您应该查看`WITH`语句和公用表表达式/子查询分解，这将允许您在单个 SQL 语句中遍历您的层次结构。它可能也会更快。

例如：

找到“assy002”的所有叶子

```
with cte as
(
    select * from #ITEMHIER
    union all
    select i.PARENT, cte.CHILD, cte.QUANTITY, cte.ISLEAF
    from #ITEMHIER i
        inner join cte on i.CHILD = cte.PARENT
)
    select CHILD,QUANTITY, isleaf from cte
    where PARENT='assy002'
    and isleaf=1; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-04T05:20:34.223

您可以使用`SYS_CONNECT_BY_PATH`生成表达式，即分支中所有数量的乘积。然后使用函数动态执行该表达式以获得最终数量。

这不是一个理想的解决方案。SQL 和 PL/SQL 之间的上下文切换需要一些时间。而且您需要担心 SQL 注入。但至少可以避免两次查询同一张表。

（正如 Dan A. 和 podiluska 所建议的那样，递归 CTE 很可能是最好的解决方案。根据我的经验，即使两种语法做同样的事情并使用相似的访问路径，递归 CTE 也可能比`connect by`.但是您需要等到升级到 11gR2。）

```
CREATE OR REPLACE FUNCTION EVALUATE_EXPRESSION(P_EXPRESSION IN VARCHAR2) RETURN NUMBER AS
    R_QTY  INTEGER;
BEGIN
    EXECUTE IMMEDIATE 'SELECT '||P_EXPRESSION||' FROM DUAL' INTO R_QTY;
    RETURN R_QTY;
END;
/

SELECT 'ASSY001' || SYS_CONNECT_BY_PATH(CHILD,'/') NAV_PATH,
      GETQTY(SYS_CONNECT_BY_PATH(CHILD,'/'), 'ASSY001') QTY,
      SUBSTR(SYS_CONNECT_BY_PATH(QUANTITY,'*'), 2) QTY_EXPRESSION,
      EVALUATE_EXPRESSION(SUBSTR(SYS_CONNECT_BY_PATH(QUANTITY,'*'), 2)) QTY2,
      CHILD
FROM ITEMHIER
WHERE ISLEAF = 1
START WITH PARENT = 'ASSY001'
CONNECT BY PRIOR CHILD = PARENT; 
```

另外，您提到该表具有索引。但是查询是否使用索引？你能发布解释计划吗？

最后，对于这么慢的查询，您可能需要研究并行性。不幸的是，我在使用并行性和`connect by`.

# c# - 使用 boundfield 时如何更新 GridView

> ID：12221055
> 
> 赞同：2
> 
> 时间：2012-08-31T18:52:16.937
> 
> 标签：c#, asp.net, sql, gridview

我有一个`GridView`，它绑定到一个数据库。我在更新`GridView` 数据库中的相应表时发现困难。

`GridView`我绑定到 SQLdatasource 后的 asp 代码是：

```
<asp:GridView ID="GridView2" runat="server" OnRowEditing="GridView2_RowEditing"
    OnRowUpdating="GridView2_RowUpdating" CellPadding="4" ForeColor="#333333" OnRowCancelingEdit="GridView2_RowCancelingEdit"
    OnRowDataBound="GridView2_RowDataBound" AutoGenerateColumns="False" 
    DataSourceID="SqlDataSource1" AutoGenerateEditButton="True" DataKeyNames="Locations">
    <Columns>
        <asp:BoundField DataField="Locations" HeaderText="Locations" 
            SortExpression="Locations" ReadOnly="true"/>
        <asp:BoundField DataField="Lamp_pro4" HeaderText="Lamp_pro4" 
            SortExpression="Lamp_pro4" />
        <asp:BoundField DataField="Lamp_pro5" HeaderText="Lamp_pro5" 
            SortExpression="Lamp_pro5" />
        <asp:BoundField DataField="AC_Profile5" HeaderText="AC_Profile5" 
            SortExpression="AC_Profile5" />
    </Columns>

</asp:GridView>
<asp:SqlDataSource ID="SqlDataSource1" runat="server" 
    ConnectionString="<%$ ConnectionStrings:TouchPadConnectionString %>" 
    SelectCommand="SELECT * FROM [Quantity]">
</asp:SqlDataSource> 
```

我的数据键是 Locations 并且它是只读的。

用于更新的 .cs 代码是：

```
protected void GridView2_RowUpdating(object sender, GridViewUpdateEventArgs e)
    {
        SqlConnection con = new SqlConnection("Data Source=ARCHANA-PC\\ARCHANA;Initial Catalog=TouchPad;Integrated Security=True");
        string LocName = GridView2.DataKeys[e.RowIndex].Values["Locations"].ToString();
        TextBox txt1 = (TextBox)GridView2.Rows[e.RowIndex].FindControl("Lamp_pro4");
        TextBox txt2 = (TextBox)GridView2.Rows[e.RowIndex].FindControl("Lamp_pro5");
        TextBox txt3 = (TextBox)GridView2.Rows[e.RowIndex].FindControl("AC_Profile5");
        string updStmt = "UPDATE Quantity set Lamp_pro4=@Lamp_pro4,Lamp_pro5=@Lamp_pro5,AC_Profile5=@AC_Profile5 where Locations=@locName";

        con.Open();
        SqlCommand updCmd = new SqlCommand(updStmt, con);

        updCmd.Parameters.AddWithValue("@locName", LocName);
        updCmd.Parameters.AddWithValue("@Lamp_pro4", txt1.Text);
        updCmd.Parameters.AddWithValue("@Lamp_pro5", txt2.Text);
        updCmd.Parameters.AddWithValue("@AC_Profile5", txt3.Text);
        updCmd.ExecuteNonQuery();
        GridView2.DataBind();

    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-31T18:55:52.357

1) 您必须`GridView2.DataBind()`在治疗结束时致电

```
protected void GridView2_RowUpdating(object sender, GridViewUpdateEventArgs e)
{
    //GridViewRow row = (GridViewRow)GridView2.Rows[e.RowIndex];

    string LocName = GridView2.DataKeys[e.RowIndex].Values["Locations"].ToString();
    TextBox txt1 = (TextBox)GridView2.Rows[e.RowIndex].FindControl("Lamp_pro4");
    TextBox txt2 = (TextBox)GridView2.Rows[e.RowIndex].FindControl("Lamp_pro5");
    TextBox txt3 = (TextBox)GridView2.Rows[e.RowIndex].FindControl("AC_Profile5");
    con.Open();
    SqlCommand cmd = new SqlCommand("UPDATE Quantity set Lamp_pro4='" + txt1.Text + "',Lamp_pro5='" + txt2.Text + "',AC_Profile5='" + txt3.Text + "' where Locations=" + LocName, con);
    cmd.ExecuteNonQuery();
    con.Close();

    GridView2.EditIndex = -1;
    //BindQuantity();
    GridView2.DataBind();
} 
```

2）定义`UpdateCommand`你的`SqlDataSource`

```
<asp:SqlDataSource ID="SqlDataSource1" runat="server" 
    ConnectionString="<%$ ConnectionStrings:TouchPadConnectionString %>" 
    SelectCommand="SELECT * FROM [Quantity]"
    UpdateCommand="UPDATE Quantity set Lamp_pro4 = @Lamp_pro4 ,Lamp_pro5=@Lamp_pro5,AC_Profile5=@AC_Profile5 where Locations=@Locations">
</asp:SqlDataSource> 
```

链接：http: [//msdn.microsoft.com/fr-fr/library/system.web.ui.webcontrols.sqldatasource.updatecommand.aspx](http://msdn.microsoft.com/fr-fr/library/system.web.ui.webcontrols.sqldatasource.updatecommand.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T18:55:41.953

只需调用`GridView2.DataBind()`将您的数据重新绑定到控件上。

无论如何，您应该真正使用**SQL 参数**来防止 SQL 注入！看看这个例子

```
string connetionString = "YOUR_CONSTR" ;
string updStmt = "UPDATE Quantity set Lamp_pro4=@lamp_pro4,Lamp_pro5=@Lamp_pro5,AC_Profile5=@ac_profile5 " + 
                 "where Locations=@locName";

using (SqlConnection cnn = new SqlConnection(connetionString))
{
  cnn.Open();
  SqlCommand updCmd = new SqlCommand(updStmt , cnn);

  // use sqlParameters to prevent sql injection!
  updCmd.Parameters.AddWithValue("@lamp_pro4", txt1.Text);

  // or define dataType if necessary
  SqlParameter p1 = new SqlParameter();
  p1.ParameterName = "@Lamp_pro5";
  p1.SqlDbType = SqlDbType.Int;
  p1.Value = txt2.Text;
  updCmd.Parameters.Add(p1);

  // demo code must be adapted!! (correct paramNames, textbox names, add missing params ...)

  int affectedRows = updCmd.ExecuteNonQuery();
  Debug.WriteLine(affectedRows + " rows updated!");
} 
```

如果您在访问文本框时遇到问题，您可以修改此示例

```
protected void GridView1_RowUpdating(object sender, GridViewUpdateEventArgs e)
{
    string Lamp_pro4 = e.NewValues["Lamp_pro4"].ToString();
    Debug.WriteLine("Lamp_pro4: " + Lamp_pro4); // to check if everything works fine!
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T19:48:16.603

使用数据绑定网格视图和绑定列不需要任何代码。ASPX 标记为您完成所有更新。

```
<asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="False" DataKeyNames="recid" DataSourceID="SqlDataSource1">
        <Columns>
            <asp:CommandField ShowEditButton="True" />
            <asp:BoundField DataField="recid" HeaderText="recid" InsertVisible="False" ReadOnly="True" SortExpression="recid" />
            <asp:BoundField DataField="BranchName" HeaderText="BranchName" SortExpression="BranchName" />
            <asp:BoundField DataField="ParentId" HeaderText="ParentId" SortExpression="ParentId" />
        </Columns>
    </asp:GridView>

    <asp:SqlDataSource ID="SqlDataSource1" runat="server" 
        ConnectionString="<%$ ConnectionStrings:ZA_testConnectionString %>" 
        SelectCommand="SELECT * FROM [Branch]" 
        UpdateCommand="UPDATE [BRANCH] SET BranchName=@BranchName , ParentId=@ParentId WHERE recid=@recid">
    </asp:SqlDataSource> 
```

我已经测试了这段代码，它会读取表格，并允许编辑记录。值得关注的点。确保您有更新查询。确保更新中的参数与字段名称（@branchName、@ParentId）匹配。在 gridview 控件上选择启用编辑。

# objective-c - iPhone 密码学

> ID：12221058
> 
> 赞同：1
> 
> 时间：2012-08-31T18:52:39.583
> 
> 标签：objective-c, ios5, encryption, smime, zimbra

我正在尝试为 iPhone 制作一个软件来连接到一个安全的邮件服务器并执行基本的加密功能。这将是加密签名和解密。

我发现了一些框架，例如[http://www.chilkatsoft.com/](http://www.chilkatsoft.com/)甚至可以用于 iOS 编程，但根据[http://support.apple.com/kb/HT4979#](http://support.apple.com/kb/HT4979#) iOS 5 有支持，所以它会使用 iOS 功能比使用第三方代码更容易，对吧？

但并非所有用户都能设置安全邮件。我正在考虑编写一个仅在用户的 iPhone 上设置邮件帐户的应用程序。

这个应用程序只需要获取用户名和密码（记住我想要一个服务器）并进行配置，就像上面链接中描述的那样；可能吗？如果是怎么办？[http://www.rootmanager.com/iphone-ota-configuration/iphone-ota-setup-with-signed-mobileconfig.html](http://www.rootmanager.com/iphone-ota-configuration/iphone-ota-setup-with-signed-mobileconfig.html)可以满足我的要求吗？

> ***附加信息：***

1.  Zimbra 5 正在服务器端工作！
2.  这里没有人是 iOS 专家。我们已经用 Java 编写了服务器代码，也为客户端编写了一些应用程序，但现在我们不得不添加对 iPhone 的支持！
3.  随时询问更多信息！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T23:14:19.540

[您可以使用iPhone 配置实用程序](http://support.apple.com/kb/DL1466)生成的配置文件在用户手机上“安装”邮件设置

用于向其他用户发送邮件的 S/mime 密钥通过交换或通过接收来自其他用户的邮件来分发。[苹果简介](http://support.apple.com/kb/HT4979)

* * *

您提供的 Apple 链接用于发送加密电子邮件；这与保护与邮件服务器的连接不同。iphone 两者兼得。

# clojure - 反向并发故障

> ID：12221059
> 
> 赞同：0
> 
> 时间：2012-08-31T18:52:47.540
> 
> 标签：clojure

我正在尝试实现一个在列表中相应位置插入数字元素的函数，但是括号有问题

> (不 (= (1 3 5 6 7 9 16) (((1 3) 5) 6 7 9 16)))

我怀疑是因为反向以一种奇怪的方式执行，因为如果我执行

> （我的扁平化'（（（1 3）5）6 7 9 16））

我得到了真正的答案：

> (1 3 5 6 7 9 16)

这是我的代码：

```
(defn insert [x lst]
    (loop [prev () lst lst]
        (cond
        (empty? lst) (my-flatten (cons (reverse prev) (list x)))
        (> (first lst) x) (my-flatten (cons (cons (reverse prev) (list x)) lst))
        :else (recur (conj prev (first lst)) (rest lst))))) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T20:59:56.730

首先，您没有“括号问题”，而是列表有问题。

而不是先使用`cons`然后展平，你应该只使用`concat`. 然后，您也可以组合这两个基本案例。

在效率方面，您不应该在循环中将单个元素附加到单链表的末尾，因为这会导致二次运行时间。相反，完成后追加到前面并反转。

```
(if (or (empty? lst) (> (first lst) x))
    (concat (reverse prev) (list x) lst)
    (recur (cons (first lst) prev) (rest lst))) 
```

读者练习：什么是前置条件和后置条件，什么是循环不变量？

# ruby - 带有 Builder::Xmlmarkup 的 Savon 没有逃避更小/更大的标志

> ID：12221061
> 
> 赞同：0
> 
> 时间：2012-08-31T18:52:54.653
> 
> 标签：ruby, soap, savon

下面的代码，生成下面的 xml。

您可能会看到较小/较大的符号未显示为“<”或“>”，并且服务器对此不满意。

任何提示/建议表示赞赏。谢谢！

```
<env:Body>
<find>
    <filter>&lt;and&gt;&lt;equal name="foo" value="1"/&gt;&lt;/and&gt;</filter>
</find>
</env:Body>

def find 
    s_xml = Builder::XmlMarkup.new
    s_xml.and do
        s_xml.equal(:name => "foo", :value => 1)
    end

    body = {
        :filter => [s_xml.target!],
    }
    _send_query :find, body 
end

def _send_query method, body, server=@primary_server
    client = Savon::client do
        wsdl.endpoint = server
        wsdl.namespace = server
    end

    client.config.pretty_print_xml = true

    response = client.request method do 
        soap.body = body
    end

    return response.to_hash
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T19:25:16.203

答案是一个感叹号，（不是＆符号@rubiii），例如：：filter！=> [s_xml.target！]

> > <<过滤后！！

# jquery - jQuery 单选按钮组 .change 方法

> ID：12221064
> 
> 赞同：16
> 
> 时间：2012-08-31T18:53:13.683
> 
> 标签：jquery, radio-button

我正在使用一个带有单选按钮的表单，它是一组收音机的一部分，一次只能选择一个（单选没问题）。其中一个收音机必须在每次选择不同的代码时触发一个代码，当它被取消选择时（另一个收音机被选中），我正在使用`.change`方法，当你点击它时它会触发代码，但在它失去选择时不会触发。我想要的是切换或能够知道它何时失去选择。

我可以将代码添加到其他无线电`.change`方法，但是有很多无线电集，这会很痛苦，我正在寻找一次性配置。

**编辑**

标记由 ASP MVC Razor 引擎组成，如下所示：

```
@Html.RadioButtonFor(x => x.SomeModel, new { @class = "special-radio" })
@* Other radios but without the 'specia-radio' class *@ 
```

js：

```
// logging
$(function(){
  $('.special-radio').change(function(){
    console.log('change');
  });
}); 
```

字符串更改仅在您单击“特殊无线电”单选时出现。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T19:07:18.770

There is no event triggered when a radio is unchecked, because it would be redundant. Try this instead:

[http://jsfiddle.net/hmartiro/g4YqD/1/](http://jsfiddle.net/hmartiro/g4YqD/1/)

It puts a change event on the set of radios and just fires one event if the selected radio is special and another event otherwise.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T19:21:12.783

如果无法添加类。您可以为这些单选按钮使用带有标识符的容器。这样您就可以隔离更改事件。 [演示小提琴](http://jsfiddle.net/cTDw9/62/)

```
var prev_data;
$('#special_radios input').change(function(){
    var me = $(this);
    //running function for check
  $('#log').html('<p>firing event for check: '+ me.attr('id') +'</p>');
    if(prev_data)
      uncheck_method(prev_data);  
  prev_data = me;
});

//@param obj = jquery raidio object
function uncheck_method(obj){
    $('#log').append('<p>firing event for uncheck: '+obj.attr('id')+'</p>');
    obj.prop('checked', false) 
    //console.log($('#special_radios input:checked'));
}

​ 
```

html

```
<input type="radio" name="zz" id="5"/>
<div id="special_radios">
   <input type="radio" name="rx" id="1"/>
   <input type="radio" name="ry"  id="2" />
   <input type="radio" name="rz" id="3"/>
   <input type="radio" name="ra"  id="4"/>
</div>
<div id="log"></div>
​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-01-23T23:00:01.313

简单的解决方案

```
var newValue; // vale of checked radio button
var oldValue; // value of unchecked radio button

$('.special-radio').change(function(){
    oldValue = newValue;
    newValue = $(this).val();
}); 
```

如果 oldValue 和 newValue 相同，则表示没有取消选中。

# javascript - 无法通过 Javascript 更新属于 Arraylist 的表单对象

> ID：12221068
> 
> 赞同：0
> 
> 时间：2012-08-31T18:53:27.570
> 
> 标签：javascript, jsp, struts-1

我需要更新一个属性，`formBean`该属性是用户选中或取消选中复选框时`ArrayList`的一部分。 该属性的值默认设置为在页面加载之前。 当用户取消选中时，我试图将值设为. 我能够看到更改为使用 firebug 调试器的值，但在提交时，表单对象的值始终保持不变。`formBean`
`"on"``formBean`
`"off"`
`"off"``"on"`

我的 JSP 代码如下。如果我以错误的方式设置值，请告诉我。

Struts 应用程序

JSP中的显示逻辑：

```
 <input type="checkbox"
           name="importedFiles[<c:out value='${stts.count - 1}'/>].importEnabled"
           id="importedFiles[<c:out value='${stts.count - 1}'/>].importEnabled"
           onClick="replicateCheckbothis, <c:out value='${stts.count - 1}'/> )"
           <c:if test="${importedFiles.importEnabled != null}">checked</c:if> /> 
```

我们正在尝试在通过 JS 提交期间更改`importEnabled`其是 arrayList`importedFiles`的一部分的值。`maintainDownloadForm`请在下面找到使用的逻辑：

```
function checkSelectedAndImport()
{
    var anyClicked = "none";

    for(var i = 0; i < <c:out value='${maintainDownloadForm.importedFileLength}' />; i++)
    {
        var element = document.getElementById("importedFiles[" + i + "].importEnabled");

        if(element != null)
        {
            if(element.checked)
            {
                anyClicked = "true";
                element.setAttribute('value', 'on'); alert('Selected--->'+element.getAttribute('value'));
            }
            else
            {
                element.setAttribute('value', 'off');
                alert('Not Selected--->'+document.getElementById("importedFiles[" + i + "].importEnabled").value);

            }
        }
    }

    if(anyClicked != "none")
    {
        submitDGForm(getVMWareForm(),'saveImport');
    }
    else
    {
        alert("No rows have been selected for import. Please select data to import. To cancel the import, click on cancel.");
    }
} 
```

`else`在上面的逻辑中，当用户取消选中并按预期打印时，我们可以进入循环，`alert`但是表单属性没有得到更新，`importEnabled`因为它始终保持`"on"`在页面加载之前的情况。

请让我知道编码逻辑是否有任何问题以及相同的修复，因为它会非常有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T08:05:44.057

不幸的是，我认为你不能。我使用的解决方案是在表单中保留一个字符串数组（String[]），并使用 javascript 向 HTML DOM 添加（或删除）一些隐藏的输入，所有这些都使用表单字符串数组的名称。这些隐藏的输入有一个值，可以让我唯一地识别用户选择了哪些复选框。

# php - 即使第二个表没有对应的条目，也可以从 2 个 db 表中获取查询结果

> ID：12221070
> 
> 赞同：0
> 
> 时间：2012-08-31T18:53:33.093
> 
> 标签：php, mysql, sql

这是我的问题：即使第二个表没有相应的条目，也可以从 2 个 db 表中获取查询结果。

这是我在 SQL 中使用的一些示例代码

```
SELECT DISTINCT apps.id, apps.*, req.status
FROM applications AS apps, requests AS req
WHERE apps.id = {$app_id} 
```

但问题是它不会提取没有 request.status 值/条目的应用程序，所以问题是：是否可以修改这个简单的查询以提取所有 application.* 行的结果，即使有是没有对应的requests.status 行/条目？

**编辑如下：**

所以这是我收到的反馈中的新查询（这很好用）

```
SELECT DISTINCT 
    apps.*, req.status
FROM 
    applications AS apps
    LEFT JOIN requests AS req ON (req.app_id = apps.id AND req.uid = {$user_id})
WHERE 
    apps.id = {$app_id} 
```

**但是：**当我在 where 子句中添加一个新表达式来过滤请求状态时，我遇到了与隐式查询相同的问题，我没有得到结果（查询如下）

```
SELECT DISTINCT 
    apps.*, req.status
FROM 
    applications AS apps
    LEFT JOIN requests AS req ON (req.app_id = apps.id AND req.uid = {$user_id})
WHERE 
    apps.id = {$app_id}
AND
    (req.status = 2 OR req.status = 5) 
```

**另一个编辑**

这是要查看的更新代码。现在的问题是，如果我添加一个子查询，子查询将提取所有行，然后将 NULL 作为状态列的值，但是一旦我添加 WHERE status != 2 它只会删除所有条目，这不应该还有所有为空的行吗？因为 null 显然是 != 2。

```
SELECT DISTINCT
    apps . *
FROM
    (SELECT 
        apps . *, req.status
    FROM
        appstore_app AS apps
    LEFT JOIN app_user_request AS req ON (req.uid = 187 AND req.appid = apps.appid)
    WHERE
        apps.appid > 0 AND apps.company_id = 122) AS apps
WHERE
    apps.status != 2
ORDER BY apps.average_user_rating DESC 
```

**最终编辑**

感谢您的帮助！

这是对我有用的最终查询：

```
SELECT 
    apps.*, req.status
FROM
    appstore_app AS apps
        LEFT JOIN
    app_user_request AS req ON (req.uid = {$user_id} AND req.appid = apps.appid AND (req.status IS NULL OR req.status != 2))
WHERE
    apps.appid > 0 AND apps.company_id = {$company_id} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T18:55:36.647

您的查询使用隐式交叉连接，从两个表中选择数据，而不指定关联两个表的方法。你真正想要的是左连接。

```
SELECT DISTINCT apps.id, apps.*, req.status
    FROM applications AS apps
        LEFT JOIN requests AS req
            ON apps.id = req.apps_id /* Guessing on the relationship here */
    WHERE apps.id = {$app_id} 
```

一旦你得到正确的语法，看看是否`DISTINCT`真的需要这个查询。它可能是可以消除的昂贵的开销。

**编辑**：添加以下部分以响应已编辑的问题。

当您`req.status`在 WHERE 子句中测试 LEFT JOINed 列（在您的情况下）时，您强制该连接表现得好像它是一个 INNER JOIN。相反，使这些测试成为连接条件的一部分。

```
SELECT DISTINCT 
    apps.*, req.status
FROM 
    applications AS apps
    LEFT JOIN requests AS req ON (req.app_id = apps.id AND req.uid = {$user_id})
        AND  (req.status = 2 OR req.status = 5)
WHERE 
    apps.id = {$app_id} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T18:55:46.727

```
SELECT DISTINCT 
  apps.*, req.status
FROM 
  applications AS apps
  LEFT JOIN requests AS req on req.app_id = apps.id
WHERE 
  apps.id = {$app_id} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T18:56:46.097

`LEFT JOIN`即使没有相应的 requests.status 存在，A也会显示您的所有应用程序。

```
SELECT DISTINCT apps.id, apps.*, req.status
FROM applications apps
LEFT JOIN requests req ON req.? = applications.?
WHERE apps.id = {$app_id} 
```

您需要添加将`?`两个表链接在一起的列 ( )。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-31T18:58:52.600

您将需要像这样使用显式 LEFT JOIN：

```
SELECT DISTINCT apps.id, apps.*, req.status
FROM applications AS apps
LEFT JOIN requests AS req ON apps.whatever_field_relates = req.whatever_field_relates
WHERE apps.id = {$app_id} 
```

使用隐式 JOINS like`FROM table1, table2`不是 IMO 的好习惯。这使得其他程序员很难一目了然地理解 JOIN 的确切性质，而不必参考数据库模式。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-31T19:04:00.463

```
SELECT DISTINCT app.*,req.status 
from applications apps 
left join request as req on req.appid = apps.id
where apps.id ={$app_id} 
```

做一个左连接就可以了，我习惯了 TSQL 语法，但我相信它会在 Mysql 中工作。您需要两个表中的应用程序 ID，才能加入它们。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-31T19:52:35.880

OP 说：

> **但是：**当我在 where 子句中添加一个新表达式来过滤请求状态时，我 > 得到与隐式查询相同的问题，我没有得到结果（查询如下）
> 
> ```
> SELECT DISTINCT 
>        apps.*,
>        req.status
> FROM applications  apps
> LEFT JOIN requests req ON req.app_id = apps.id
>                       AND req.uid    = {$user_id}
> WHERE apps.id = {$app_id}
>   AND (    req.status = 2
>         OR req.status = 5
>       ) 
> ```

问题是该`where`子句过滤了结果集，因此您对 a`req.status`的 2 或 5 的测试会抛出任何`req.status`为 null 的内容，因为没有行与 table 匹配`applications`。

`select`一个语句的一般的、理论上的（因为只有一个微不足道的实现实际上会做这样的事情）的操作顺序是：

*   `from`产生子句中列出的每个表的完整笛卡尔积。
*   通过应用指定的`join`条件并消除未通过指定测试的行来过滤它。
*   应用子句中指定的筛选条件`where`，删除未通过指定测试的行。
*   `group by`根据子句中指定的表达式对结果集进行排序，并将结果集划分为组。
*   将每个这样的组折叠成一行，计算所有指定聚合函数的值。
*   从结果集中删除`select`语句列列表中未列出的所有列。
*   `order by`按子句中指定的列/表达式对最终结果集进行排序。

您可以执行以下两项操作之一：

*   更改您的查询以测试无效性：

    ```
    where...( req.status is null OR req.status in (2,5) )... 
    ```

*   将测试移至`req.status`加入标准：

    ```
    left join requests req on req.app_id =  apps.id
                          and req.uid    =  {$user_id}
                          and req.status in (2,5) 
    ```

# c - 为数组赋值需要 memcpy

> ID：12221071
> 
> 赞同：3
> 
> 时间：2012-08-31T18:53:44.857
> 
> 标签：c, arrays, linker

我遇到了一个奇怪的错误。

我正在为引导加载程序编写代码，所以我没有很多花哨的库。

代码本身很简单，就是

`int array[32] = { 1, 2, 3, [...snip...], 31, 32 };`

此代码导致有关 memcpy 未链接的未解决的外部问题。但是这段代码编译和链接很好

`int array[12] = { 1, 2, 3, [...snip...], 11, 12 };`

事实上，错误发生在

`int array[12] = { 0 };`
和
`int array[13] = { 0 };`

第一个链接很好，但第二个无法链接。我只是不明白为什么在大小为 13 时，编译器突然决定依赖 memcpy 来解决这个问题。我尝试了-O0和-O3。我的编译器是一个名为 cl470 的 Windows 可执行文件，不确定它来自哪里。

另一个奇怪的事情是，当我把它放在一个函数中时，这是有问题的，但是如果我全局声明数组，那么就没有问题了。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-31T18:57:31.167

您的编译器正在执行[时空权衡](http://en.wikipedia.org/wiki/Space%E2%80%93time_tradeoff)。

对于较小的数组，编译器发出单独的指令来初始化堆栈上的每个数组槽：

```
mov [ebp-4], 1
mov [ebp-8], 2
mov [ebp-12], 3
... 
```

对于较大的数组，编译器将数据放在程序的[只读数据段中](http://en.wikipedia.org/wiki/Data_segment)，并使用以下命令将其复制到堆栈中`memcpy`：

```
.rodata:
    _array_initialiser = { 1, 2, 3, ... }

push ebp-4
push _array_initialiser
push 32
call memcpy 
```

这就是为什么制作数组文件范围或`static`将消除`memcpy`; 该数组可以直接放在数据段中并在编译时初始化。

使用`memcpy`更大的数组更有效，因为它减少了代码大小，从而减少了[指令缓存](http://en.wikipedia.org/wiki/CPU_cache)未命中。

您可以尝试的一些事情是将数组移动到文件范围或自己将其设为静态；如果您需要每次通过数组重新初始化它，您可以手动将其复制到本地数组中（尽管编译器也可以将这样的循环转换为`memcpy`！）

```
static const int array_data[] = { 1, 2, 3, ... };
int array[sizeof(array_data) / sizeof(array_data[0]))];
for (size_t i = 0; i < sizeof(array_data) / sizeof(array_data[0])); ++i)
    array[i] = array_data[i]; 
```

另一种选择是以编程方式生成数组；看起来像一个简单的`for`循环就可以了。

第三种选择是自己编写和链接`memcpy`；它不应该需要超过几行代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T19:03:39.910

以下代码将存储在可执行文件中的数据复制到堆栈。

```
int array[12] = { blah }; 
```

我猜当数组大小大于某个数字时，优化器会使用 memcpy。

你可能想要这样做：

```
static int array[12] = { blah }; 
```

通过使用 static 关键字，您可以防止编译器生成将静态数据复制到堆栈的代码。

# haskell - 将固定长度向量函数应用于较长的固定长度向量的初始部分

> ID：12221080
> 
> 赞同：16
> 
> 时间：2012-08-31T18:54:25.667
> 
> 标签：haskell, ghc, type-systems, dependent-type, type-level-computation

我有以下使用 ghcs 扩展的固定长度向量的定义`GADTs`，`TypeOperators`并且`DataKinds`：

```
data Vec n a where
    T    :: Vec VZero a
    (:.) :: a -> Vec n a -> Vec (VSucc n) a 

infixr 3 :.

data VNat  =  VZero |  VSucc VNat  -- ... promoting Kind VNat

type T1 = VSucc VZero
type T2 = VSucc T1 
```

以及 TypeOperator 的以下定义`:+`：

```
type family (n::VNat) :+ (m::VNat) :: VNat 
type instance VZero :+ n = n
type instance VSucc n :+ m = VSucc (n :+ m) 
```

为了使我的整个意图库有意义，我需要将类型的固定长度向量函数`(Vec n b)->(Vec m b)`应用于较长向量的初始部分`Vec (n:+k) b`。让我们调用那个函数`prefixApp`。它应该有类型

```
prefixApp :: ((Vec n b)->(Vec m b)) -> (Vec (n:+k) b) -> (Vec (m:+k) b) 
```

这是一个示例应用程序，其`change2`定义如下：

```
change2 :: Vec T2 a -> Vec T2 a
change2 (x :. y :. T) = (y :. x :. T) 
```

`prefixApp`应该能够应用于`change2`任何长度> = 2的向量的前缀，例如

```
Vector> prefixApp change2 (1 :. 2 :. 3 :. 4:. T)
(2 :. 1 :. 3 :. 4 :. T) 
```

有谁知道如何实施`prefixApp`？（问题是，必须使用固定长度向量函数类型的一部分来获取正确大小的前缀......）

**编辑**：Daniel Wagners（非常聪明！）解决方案似乎与 ghc 7.6 的一些候选版本（不是官方版本！）一起使用。恕我直言，它不应该工作，但是，有两个原因：

1.  for 的类型声明在上下文中`prefixApp`缺少一个（用于正确类型检查。`VNum m``prepend (f b)`
2.  更有问题：ghc 7.4.2 不假设 TypeOperator`:+`在其第一个参数中是单射的（也不是第二个，但这里不是必需的），这会导致类型错误：从类型声明中，我们知道`vec`必须有type并且类型检查器为定义右侧`Vec (n:+k) a`的表达式推断出. 但是：类型检查器无法推断出这一点（因为没有单射的保证）。`split vec``Vec (n:+k0) a``k ~ k0``:+`

有谁知道第二个问题的解决方案？我怎样才能在它的第一个论点中声明`:+`是单射的和/或我怎样才能完全避免遇到这个问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-31T19:41:24.173

做一个类：

```
class VNum (n::VNat) where
    split   :: Vec (n:+m) a -> (Vec n a, Vec m a)
    prepend :: Vec n a -> Vec m a -> Vec (n:+m) a

instance VNum VZero where
    split     v = (T, v)
    prepend _ v = v

instance VNum n => VNum (VSucc n) where
    split   (x :. xs)   = case split xs of (b, e) -> (x :. b, e)
    prepend (x :. xs) v = x :. prepend xs v

prefixApp :: VNum n => (Vec n a -> Vec m a) -> (Vec (n:+k) a -> (Vec (m:+k) a))
prefixApp f vec = case split vec of (b, e) -> prepend (f b) e 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-06T14:53:40.257

这是 split 不在类型类中的版本。在这里，我们为自然数 (SN) 构建了一个单例类型，它可以在 split 的定义中对“n”进行模式匹配。然后可以通过使用类型类 (ToSN) 来隐藏这个额外的参数。

类型 Tag 用于手动指定非推断参数。

（此答案与 Daniel Gustafsson 合着）

这是代码：

```
{-# LANGUAGE TypeFamilies, TypeOperators, DataKinds, GADTs, ScopedTypeVariables, FlexibleContexts #-}
module Vec where
data VNat = VZero | VSucc VNat  -- ... promoting Kind VNat

data Vec n a where
    T    :: Vec VZero a
    (:.) :: a -> Vec n a -> Vec (VSucc n) a·

infixr 3 :.

type T1 = VSucc VZero
type T2 = VSucc T1

data Tag (n::VNat) = Tag

data SN (n::VNat) where
  Z :: SN VZero
  S :: SN n -> SN (VSucc n)

class ToSN (n::VNat) where
  toSN :: SN n

instance ToSN VZero where
  toSN = Z

instance ToSN n => ToSN (VSucc n) where
  toSN = S toSN

type family (n::VNat) :+ (m::VNat) :: VNat
type instance VZero :+ n = n
type instance VSucc n :+ m = VSucc (n :+ m)

split' :: SN n -> Tag m -> Vec (n :+ m) a -> (Vec n a, Vec m a)
split' Z     _ xs = (T , xs)
split' (S n) _ (x :. xs) = let (as , bs) = split' n Tag xs in (x :. as , bs)

split :: ToSN n => Tag m -> Vec (n :+ m) a -> (Vec n a, Vec m a)
split = split' toSN

append :: Vec n a -> Vec m a -> Vec (n :+ m) a
append T ys = ys
append (x :. xs) ys = x :. append xs ys

prefixChange :: forall a m n k. ToSN n => (Vec n a -> Vec m a) -> Vec (n :+ k) a -> Vec (m :+ k) a
prefixChange f xs = let (as , bs) = split (Tag :: Tag k) xs in append (f as) bs 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-04T16:12:45.740

如果您可以使用稍微不同类型的 prefixApp：

```
{-# LANGUAGE GADTs, TypeOperators, DataKinds, TypeFamilies #-}

import qualified Data.Foldable as F

data VNat  =  VZero |  VSucc VNat  -- ... promoting Kind VNat

type T1 = VSucc VZero
type T2 = VSucc T1
type T3 = VSucc T2

type family (n :: VNat) :+ (m :: VNat) :: VNat
type instance VZero :+ n = n
type instance VSucc n :+ m = VSucc (n :+ m)

type family (n :: VNat) :- (m :: VNat) :: VNat
type instance n :- VZero = n
type instance VSucc n :- VSucc m = n :- m

data Vec n a where
    T    :: Vec VZero a
    (:.) :: a -> Vec n a -> Vec (VSucc n) a 

infixr 3 :.

-- Just to define Show for Vec
instance F.Foldable (Vec n) where
    foldr _ b T = b
    foldr f b (a :. as) = a `f` F.foldr f b as

instance Show a => Show (Vec n a) where
    show = show . F.foldr (:) []

class Splitable (n::VNat) where
    split :: Vec k b -> (Vec n b, Vec (k:-n) b)

instance Splitable VZero where
    split r = (T,r)

instance Splitable n => Splitable (VSucc n) where
    split (x :. xs) =
        let (xs' , rs) = split xs
        in ((x :. xs') , rs)

append :: Vec n a -> Vec m a -> Vec (n:+m) a
append T r = r
append (l :. ls) r = l :. append ls r

prefixApp :: Splitable n => (Vec n b -> Vec m b) -> Vec k b -> Vec (m:+(k:-n)) b
prefixApp f v = let (v',rs) = split v in append (f v') rs

-- A test
inp :: Vec (T2 :+ T3) Int
inp = 1 :. 2 :. 3 :. 4:. 5 :. T

change2 :: Vec T2 a -> Vec T2 a
change2 (x :. y :. T) = (y :. x :. T)

test = prefixApp change2 inp -- -> [2,1,3,4,5] 
```

事实上，您的原始签名也可以使用（带有增强的上下文）：

```
prefixApp :: (Splitable n, (m :+ k) ~ (m :+ ((n :+ k) :- n))) =>
             ((Vec n b)->(Vec m b)) -> (Vec (n:+k) b) -> (Vec (m:+k) b)
prefixApp f v = let (v',rs) = split v in append (f v') rs 
```

适用于 7.4.1

**更新：**只是为了好玩，Agda 中的解决方案：

```
data Nat : Set where
  zero : Nat
  succ : Nat -> Nat

_+_ : Nat -> Nat -> Nat
zero + r = r
succ n + r = succ (n + r)

data _*_ (A B : Set) : Set where
  _,_ : A -> B -> A * B

data Vec (A : Set) : Nat -> Set where
  [] : Vec A zero
  _::_ : {n : Nat} -> A -> Vec A n -> Vec A (succ n)

split : {A : Set}{k n : Nat} -> Vec A (n + k) -> (Vec A n) * (Vec A k)
split {_} {_} {zero} v = ([] , v)
split {_} {_} {succ _} (h :: t) with split t
... | (l , r) = ((h :: l) , r)

append : {A : Set}{n m : Nat} -> Vec A n -> Vec A m -> Vec A (n + m)
append [] r = r
append (h :: t) r with append t r
... | tr = h :: tr

prefixApp : {A : Set}{n m k : Nat} -> (Vec A n -> Vec A m) -> Vec A (n + k) -> Vec A (m + k)
prefixApp f v with split v
... | (l , r) = append (f l) r 
```

# java - wsimport 生成的代码——打包代码的最佳实践

> ID：12221084
> 
> 赞同：7
> 
> 时间：2012-08-31T18:54:53.193
> 
> 标签：java, maven, wsdl, jax-ws

我有一个关于使用 wsimport 工具生成 Java 工件的问题（由 Maven Jax-WS 提供）

当我从 WSDL 生成 Java 工件时，我想将 Web 服务项目打包为 WAR 文件，并将其客户端打包为 JAR 文件。

将生成的工件放在哪里以及将 WSDL 放在哪里？组织 Web 服务项目的最佳实践是什么？

先感谢您！

最好的问候， Jurica Krizanic

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T19:05:14.877

客户端和服务器端都需要这些工件，因此将它们打包在第三个 jar 中并将其设置为两者的依赖项。WSDL 应该转到 war 的 WEB-INF 文件夹，并且应该设置和 的`wsdlLocation`属性以反映它的路径。`@WebService``@WebServiceClient`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T10:49:54.257

[JSR 109: Web Services for Java EE, Version 1.3](http://jcp.org/en/jsr/detail?id=109)中定义了托管服务的打包选项。

对于服务：

> **5.4.2 EJB 模块封装**
> 
> ...EJB-JAR 文件中的 Web 服务部署描述符位置是`META-INF/webservices.xml`. wsdl 目录位于 `META-INF/wsdl`.
> 
> **5.4.3 Web App模块打包**
> 
> ...Web 服务部署描述符位于 WAR 中 `WEB-INF/webservices.xml`，wsdl 目录位于 `WEB-INF/wsdl`.

对于客户：

> 客户端可以是以下任何一种：Java EE 应用程序客户端、Web 组件、EJB 组件或其他 Web 服务。
> 
> Web 服务客户端部署描述符在模块中的位置是特定于模块的。WSDL 文件相对于模块的根目录定位，并且通常位于`wsdl`与模块部署描述符位于同一位置的目录或其子目录中。

请注意，此规范仅限于 Java EE 客户端；这并不意味着您不能在其中显式提供 WSDL的[非托管客户端。](http://illegalargumentexception.blogspot.co.uk/2011/04/java-jax-ws-web-services-and-clients.html#ws_client)

交叉参考这些规范以获取更多详细信息：

*   [JSR 244](http://jcp.org/en/jsr/detail?id=224) (JAX-WS)
*   [JSR 109](http://jcp.org/en/jsr/detail?id=109)（与 Java EE 集成）
*   [JSR 316](http://jcp.org/en/jsr/detail?id=316) (Java EE 6)

# javascript - 有没有更好的方法来编写这个简单的 jQuery 行？

> ID：12221085
> 
> 赞同：0
> 
> 时间：2012-08-31T18:55:04.587
> 
> 标签：javascript, jquery

我正在学习 jQuery，我编写了一个非常简单的脚本，效果很好。现在我想知道是否有更好的方法来编写这一行。

```
$("form").submit(function() {
    $('div.beforeRecover').animate({ opacity: 'toggle' }, 300).delay(800);
    $('div.betweenRecover').animate({ opacity: 'toggle' }, 200).delay(1200);
    $('div.betweenRecover').animate({ opacity: 'toggle' }, 800);
    $('div.afterRecover').delay(1800).animate({ opacity: 'toggle' }, 1400);
    return false;
}); 
```

简要说明：

1.  表单被提交
2.  形式消失
3.  出现加载 gif
4.  加载 gif 渐变
5.  出现确认信息。

我很感激任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T18:58:03.380

```
var fadeToggle = { opacity: 'toggle' };

$("form").submit(function() {

    $('div.beforeRecover').animate(fadeToggle, 300).delay(800);

    $('div.betweenRecover')
        .animate(fadeToggle, 200).delay(1200)
        .animate(fadeToggle, 800).delay(1800);

    $('div.afterRecover').animate(fadeToggle, 1400);

    return false;
}); 
```

事实上，有一个完全独立的方法叫做[**`.fadeToggle()`**](http://api.jquery.com/fadeToggle/)

# c# - 按下 TAB 键时如何触发事件？

> ID：12221089
> 
> 赞同：0
> 
> 时间：2012-08-31T18:55:24.917
> 
> 标签：c#, javascript, jquery, textbox, keydown

当某些用户在文本框中按下 TAB 键时，我只想“捕捉”。我正在一个简单的 CRUD asp.net 应用程序中工作，c# 作为代码后面。

我尝试将其作为测试：

```
private void KeyForm_KeyDown( object sender, KeyEventArgs e )
      {
         keyInfoLabel.Text =
            "KeyCode: " + e.KeyCode + '\n' +
            "KeyData: " + e.KeyData + '\n' +
            "KeyValue: " + e.KeyValue;
      } 
```

但它只适用于 C# 桌面应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T05:39:28.387

KeyPress 或 KeyDown 无法捕获 TAB 键。所以要满足您的要求，请使用文本框的离开事件。

在离开事件定义中将焦点移回文本框...

像这样...

`private void textBox1_Leave(object sender, EventArgs e)` `{`
`textBox1.Text="Khan Pressed the TAB";` `textBox1.Focus();` `}`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T19:10:01.950

```
$('#textbox').live('keydown', function(e) { 
  var keyCode = e.keyCode || e.which; 

  if (keyCode == 9) { 
    e.preventDefault(); 
    // call custom function here
  } 
}); 
```

使用java脚本

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T17:35:54.873

```
$(document).ready(function () {
    $('#<%= testTextBox.ClientID%>').keydown(function (e) {
       var code = (e.keyCode ? e.keyCode : e.which);
           if (code == 9) {
             $('#<%= 2ndTextBox.ClientID%>').focus()
                return false;
             }
    });
}); 
```

它可能对某人有用。

问候

# django - Django 模型 - 如何覆盖保存方法并创建另一条记录

> ID：12221096
> 
> 赞同：0
> 
> 时间：2012-08-31T18:55:43.930
> 
> 标签：django, django-models

假设我有这两个类，我想创建一个项圈记录并将其附加到每个创建的狗记录，如下所示：

```
class Collar(models.Model):
    serial_number =  models.IntegerField(primary_key=True, db_column='serial_number')
    weight = models.CharField(max_length=10)
    class Meta:
        db_table = u'existing_table_from_before_django_was_born'

class Dog(models.Model):
    size = models.CharField(max_length=10)
    collar = models.OneToOneField(Collar,blank=True, null=True, editable=False)

    def save(self, *args, **kwargs):
        if not self.id:
            self.collar = Collar()
        if self.collar:
            self.collar.weight = '10'
            self.collar.save()
        super(Dog,self).save(*args, **kwargs) 
```

当我运行此代码时，正在创建新的 Collar 记录，但问题是 Dog.collar_id 在表中显示为 null。

您可以注意到这里的扭曲是 Collar 类引用了一个现有的表。我让它的主键在 MySQL 中自动递增，但也许那里出了点问题。

当我逐步执行 save 方法时，我看到它创建了 Collar 对象并更新了值，但 self.collar.serial_number 打印了“none”。

任何想法可能会发生什么？我会永远感激不尽。（我在 1.2.5）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T20:04:51.713

您应该将您的`Collar.serial_number`字段设置为`AutoField`，以便 Django 知道它在保存时自动获取一个值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T19:04:56.947

*在*保存之前，您`Collar`没有PK，这意味着此时分配将不起作用。

 *```
collar = Collar()
 ...
collar.save()
self.collar = collar 
```*

# php - PHP 类知道在该类中调用了什么方法

> ID：12221101
> 
> 赞同：-1
> 
> 时间：2012-08-31T18:55:52.157
> 
> 标签：php, oop

假设我们有一堂课

```
class foo{

} 
```

它没有方法，但在代码的某个地方，一些天才开发人员调用了该类并像这样使用它：

```
$x = new foo();
$x->run(); 
```

我们的类中没有“run”方法，但是这个 foo 类是否可以知道某些代码称为“run”方法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-31T18:59:12.667

您可以给该类一个[名为的魔术方法`__call`](http://www.php.net/manual/en/language.oop5.overloading.php#object.call)，该方法在调用不存在的方法时被调用：

```
class foo{
  function __call($method, $params) {
    echo "Non extisent method $method is called";
  }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T18:59:50.030

我很确定您正在寻找的是[__call()](http://php.net/manual/en/language.oop5.overloading.php)魔术方法。它被定义为：

**__call() 在对象上下文中调用不可访问的方法时触发。**

此时您可以处理调用的动态处理。

```
class Dog
{
    function __call($method, $params)
    {
        echo("Sorry, this dog cant " . $method);
    }
}

$bulldog = new Dog();
$bulldog->run(); 
```

输出： **对不起，这只狗不能跑**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-31T19:00:34.040

我认为可以通过[set_error_handler来实现](http://www.php.net/manual/en/function.set-error-handler.php)

# emacs - Emacs Lisp 函数，将区域写入文件并删除它

> ID：12221103
> 
> 赞同：1
> 
> 时间：2012-08-31T18:55:56.307
> 
> 标签：emacs, lisp, buffer, elisp, region

我想编写一个 ELisp 函数，它将：将当前区域附加到一个新文件（它已经在 ELisp 标准库中写入，它被称为 write-region），然后在后台将此文件作为新缓冲区打开，以便我稍后编辑它.

但我也希望删除当前选定的区域。

我想做这样的事情：

```
(defun write-region-delete-and-open(start end filename)
  "function takes current region, and writes it to specified file"
  (interactive "r\nsFilename: ")
  (write-region start end filename t)
  (kill-region start end)) 
```

但它不像我想象的那样工作。当我切割该区域时，它总是会在缓冲区中的该区域之后杀死所有内容。我还想使用 (ido-find-file) 选择要写入自助餐的文件。我完全不知道如何在后台打开创建的文件。请帮我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T20:18:53.193

要使用，请将参数`ido-find-file`的交互规范更改为。那是：`filename``F`

```
(interactive "r\nFFilename: ") 
```

这是假设您已经在使用 ido 打开其他文件，就像`(ido-mode 1)`在您的`.emacs`文件中一样。

在后台打开文件的功能，我假设您的意思是打开文件而不立即显示它，称为`find-file-noselect`.

我不知道为什么该区域之后的整个缓冲区会被调用杀死`kill-region`；当我使用您的代码时，我没有看到这种情况发生。

# jquery - Jquery Mobile 1.2.0 Alpha 1 弹出和动态列表视图

> ID：12221104
> 
> 赞同：2
> 
> 时间：2012-08-31T18:55:58.487
> 
> 标签：jquery, jquery-ui, listview, jquery-mobile, popup

我在让我的移动应用程序为 1.2 更改和升级做好准备时遇到了问题。在使用新的弹出窗口时，我发现了一些我已经意识到并破解的错误来开始工作。

1.  创建弹出窗口时，您不能将`<a>`与标签分开。`<div>`似乎 jQm 正在寻找`<a data-rel>`and`<div data-role>`在同一个 div 包装内（这可能是错误的，只是猜测）。

    *   如果有人知道这是否只是因为它是 alpha 请告诉我们，因为弹出窗口是基于对话框的，而对话框没有这个问题
2.  您不能调用弹出窗口的生成，然后立即调用该弹出窗口的打开。

    *   在调用它打开之前你必须给`$('#selector').popup()`它几秒钟的时间来工作，所以简单的解决方法是在你的打开周围包装一个 setTimeout。
    *   `setTimeout('$('#selector').popup("open")',100);`

只是想分享并希望可以节省很多人浪费时间摆弄 alpha 版本。

这是我放在一起的一些 Jsfiddle，所以你可以明白我的意思。 [http://jsfiddle.net/2VGZX/31/](http://jsfiddle.net/2VGZX/31/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T17:21:41.970

如果弹出 div 位于页面 div 中，则`$('#selector').popup().popup('open')`可以正常工作。

我真的不明白你对`<div>`and的问题`<a>`。

# sql - 索引未使用 Postgres

> ID：12221114
> 
> 赞同：0
> 
> 时间：2012-08-31T18:56:45.347
> 
> 标签：sql, database, postgresql

跟踪索引并分析添加索引的表，我们遇到一些情况：我们的一些表有索引，但是当我在索引字段上执行带有子句的查询时`where`，并没有分别考虑到您的 idx_scan 字段。相同的 relname 和 schemaname，所以，我不会错的。

测试更多，我删除并再次创建表，之后查询返回到帐户`idx_scan`。

这也发生在另一个表中，我们执行了一些带有索引的查询并且没有考虑 idx_scan 字段，仅在 seq_scan 中，即使我在同一个表中创建另一个带索引的字段，这个新字段也不计算 idx_scan。

这些表有什么问题？我们做错了什么？仅当我使用 idx_scan 中帐户的索引创建一个新表时，才在一个有错误的旧表中。我们有时会使用这个数据库进行迁移，也许这可能是问题所在？发生在本地主机和在线服务器上。

我们看到的另一个事件，一些索引被计入了，idx_scan > 0，并且当执行查询选择时，没有再次增加 idx_scan，数量是固定的，只是增加了 seq_scan。我相信这些问题可能是相关的。

我很感激一些帮助，这是我们数据库的一个大谜团，不知道问题可能是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T01:44:37.493

一些建议（以及要添加到您的问题中的内容）。

首先是索引扫描并不总是优于顺序扫描。例如，如果您的表很小或规划器估计需要获取大多数页面，则将省略索引扫描以支持顺序扫描。

请记住：没有任何计划比从磁盘上检索单个页面并按顺序运行它更好。

类似地，如果你必须检索一个关系的 50% 的页面，那么进行索引扫描将会用更少的磁盘/IO 总量来换取更多的随机磁盘/IO。如果您使用 SSD，但肯定不是使用传统硬盘驱动器，这可能是一个胜利。毕竟你真的不想等待盘片转动。如果您使用的是 SSD，您可以相应地调整规划器设置。

所以索引与顺序扫描并不是故事的结局。问题是检索了多少行，表有多大，检索了多少磁盘页面，等等。

如果它真的选择了一个糟糕的计划（而不是一个你没有考虑过的好计划！）那么问题就变成了为什么。有一些方法可以设置统计目标，但这些方法可能并没有真正的帮助。

最后，在您可能喜欢的某些情况下，计划者确实无法选择索引。例如，假设我有一个包含 5 年记录的 1000 万行表（平均每年大约 200 万行）。我想得到不同的年份。我不能用标准查询和索引来做到这一点，但我可以构建一个 WITH RECURSIVE CTE 来基本上每年执行一次相同的查询，并且将使用索引。当然，在这种情况下你最好有一个索引，否则 WITH RECURSIVE 将每年进行一次顺序扫描，这肯定不是你想要的！

tl;博士：这很复杂。在得出结论之前，您要确保这确实是一个糟糕的计划，然后如果这是一个糟糕的计划，请根据您的配置查看您可以做些什么。

# audio - 如何从 Arduino 的 FM 调谐器扩展板获取音频或向其获取音频

> ID：12221117
> 
> 赞同：2
> 
> 时间：2012-08-31T18:57:01.387
> 
> 标签：audio, arduino

我有一个 Arduino Uno 和一个无线电接收器[屏蔽](http://www.arduino.cc/en/Main/ArduinoShields)( [Si4735](https://www.sparkfun.com/products/10342) )。我正在尝试让另一个音频源通过屏蔽上当前连接的 1/8 插孔播放，或者将来自屏蔽的音频通过管道传输到 Arduino，在那里我可以将其重定向到其他源。

我在 Arduino 或硬件方面没有太多经验，但是作为一名软件开发人员，我非常有经验。关于从哪里开始的任何建议，或者这个盾牌是否支持这些功能中的任何一个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T22:45:54.530

[根据原理图](http://dlnmh9ip6v2uc.cloudfront.net/datasheets/Dev/Arduino/Shields/SI4735%20Shield-v12.pdf)，Si4735 芯片的音频输出直接连接到耳机插孔——无法将输出发送到其他地方，或向其发送其他音频。

# zend-framework - Zend 框架中未包含的模型

> ID：12221119
> 
> 赞同：-1
> 
> 时间：2012-08-31T18:57:26.800
> 
> 标签：zend-framework, model

我对 Zend Framework 非常陌生，并且在常规 Apache 2 + PHP 服务器上使用它。

我想使用扩展 Zend_Table_Abstract 的模型。我把它放在我的 /application/models 目录中，但这些文件甚至没有被包含（它们有语法错误，但我的应用程序工作得很好）。需要采取哪些措施才能将它们包括在内？在 Bootstrap 中应该做什么以及应该遵循哪些命名约定？我见过人们只使用常规名称，例如*Users*或*Articles*。

`/application/models/Languages.php:`

```
<?php
adasdasdadasd
echo 'hi';

class Languages extends Zend_Db_Table_Abstract {
    protected $_name = 'languages';
} 
```

`/application/controllers/LanguageController.php`

```
<?php

class LanguagesController extends Zend_Controller_Action {
    public function indexAction() {
        $languages = new Languages();

        $this->view->languages = $languages->select();
    }
} 
```

`/application/Bootstrap.php`（有一些代码只是因为我从一些示例或答案中复制了它）

```
class Bootstrap extends Zend_Application_Bootstrap_Bootstrap {
    protected function _initAutoload() {
        $moduleLoader = new Zend_Application_Module_Autoloader(array(
            'namespace' => '',
            'basePath' => APPLICATION_PATH)
        );

        $autoloader = Zend_Loader_Autoloader::getInstance();
        $autoloader->registerNamespace(array('Application_'));

        return $moduleLoader;
    }

    protected function _initResourceAutoloader()
    {
        $autoloader = new Zend_Loader_Autoloader_Resource(array(
            'basePath'  => APPLICATION_PATH,
            'namespace' => 'Application_',
        ));

        return $autoloader;
    }

    protected function _initFrontController()
    {
        $controller = Zend_Controller_Front::getInstance();

        $controller->setControllerDirectory(APPLICATION_PATH . '/controllers');

        if ($controller->getParam('bootstrap') === null) {
            $controller->setParam('bootstrap', $this);
        }

        return $controller;
    }

    protected function _initApplication() {
    }

    protected function _initModuleConfig()
    {
    }

    protected function _initLayout(){ 
        return Zend_Layout::startMvc(); 
    }

    protected function _initViewHelpers() {
        $this->bootstrap('layout');
        $layout = $this->getResource('layout');
        $view = $layout->getView();
        $view->doctype('XHTML1_STRICT');
        $view->headMeta()->appendHttpEquiv('Content-Type', 'text/html;charset=utf-8');
        $view->headTitle()->setSeparator(' - ');
        $view->headTitle('My Application');
        $view->headLink()->appendStylesheet('css/general.css');
        $view->headLink()->appendStylesheet('css/navigation.css');
    }

    protected function _initNavigation() {
        $this->bootstrap('layout');
        $layout = $this->getResource('layout');
        $view = $layout->getView();

        $config = new Zend_Config_Xml(APPLICATION_PATH . '/configs/navigation.xml', 'nav');

        $navigation = new Zend_Navigation($config);
        $view->navigation($navigation);
    }
} 
```

`/application/configs/application.ini`：

```
[production]

; Models
includePaths.models = APPLICATION_PATH "/models/"

; Debug output
phpSettings.display_startup_errors = 0
phpSettings.display_errors = 0

; Bootstrap
bootstrap.path = APPLICATION_PATH "/Bootstrap.php"
bootstrap.class = "Bootstrap"

; Database
resources.db.adapter = "PDO_MYSQL"
resources.db.params.host = "localhost"
resources.db.params.dbname = "dabase"
resources.db.params.username = "root"
resources.db.params.password = "password"
resources.db.isDefaultTableAdapter = true

[development : production]

; Debug output
phpSettings.display_startup_errors = 1
phpSettings.display_errors = 1

; Database
resources.db.adapter = "PDO_MYSQL"
resources.db.params.host = "localhost"
resources.db.params.dbname = "dabase"
resources.db.params.username = "root"
resources.db.params.password = "password"
resources.db.isDefaultTableAdapter = true 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T19:10:03.557

您需要更改命名模型的方式，因为 Zend 自动加载器无法根据加载模型的方式简单地找到正确的文件。所以不要有这样的模型：

```
class Language extends Zend_Db_Table_Abstract {
....
} 
```

你应该这样命名它：

```
class Application_Model_Language extends Zend_Db_Table_Abstract {
....
} 
```

然后实例化：

```
$languages = new Application_Model_Language(); 
```

请注意，模型的映射方式不同，您的`Application_Model_Language`模型类必须放入其中`application/models/Language.php`才能正常工作。

# jquery - head.ready() 与 $(document).ready

> ID：12221122
> 
> 赞同：4
> 
> 时间：2012-08-31T18:57:33.790
> 
> 标签：jquery, document-ready, head.js

最近发现了[head.js](http://headjs.com/)库，我对它很满意，尽管我仍然对一件事有点困惑。

来自 headjs.com：

> 当脚本到达时，诸如 $(document).ready() 之类的“DOM 就绪”事件已经被触发。如果加载的脚本依赖于该事件，请确保您的库可以处理此问题。jQuery 1.4+ 有效。

考虑到这一点，如果 $(document).ready() 中的代码依赖于使用 head.js 加载的外部脚本，那么设置使用 jQuery 的页面的最佳方法是什么？

我们是否可以一起丢失 $(document).ready() 调用并仍然成功地设置依赖于准备好的文档的事件侦听器之类的东西？前任：

```
head.js("script1.js", "script2.js", "script3.js", function() {
    $('#button').click(function(event) {
        alert("clicked");
    });
}); 
```

还是我们想在函数中包装 $(document).ready() ？

只是想知道最佳实践是什么，以确保一切都在需要的时候准备就绪。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-31T19:04:13.390

无论哪种方式都很好。如果 DOM 已经完全初始化，则立即调用传递给[ready()的处理程序。](http://api.jquery.com/ready/)

为了获得*小*的性能提升，您可能希望删除`ready`处理程序并直接包含您的代码，除非您依赖于像 jQuery 的`$`对象被传递给处理程序这样的副作用。

# node.js - 如何对 node.js 服务器进行负载测试？

> ID：12221128
> 
> 赞同：26
> 
> 时间：2012-08-31T18:58:05.193
> 
> 标签：node.js, load, stress-testing

我想用 node.js 和 MongoDB 编写一个 Web 应用程序，我什至有任务测试它。我想知道是否有任何工具，如 JMeter 或其他任何用于 Node.js 负载/压力测试的工具？

**编辑**

我的应用程序将是一种信息提取类型的应用程序，客户希望提取一个文档的时间不应超过 10 秒。目前我用 C# 编写了相同的应用程序，但它没有达到客户的期望。然后我遇到了这个漂亮而快速的 Node.js。我认为 Node.js 可以帮助我很多。

请赐教！！！

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-13T08:03:40.983

Try [nodeload](https://npmjs.org/package/nodeload): it's a collection of node.js modules for load testing HTTP services.

> As a developer, you should be able to write load tests and get informative reports without having to learn another framework. You should be able to build by example and selectively use the parts of a tool that fit your task. Being a library means that you can use as much or as little of nodeload as makes sense, and you can create load tests with the power of a full programming language. For example, if you need to execute some function at a given rate, just use the 'nodeload/loop' module, and write the rest yourself

Just found out that this package is no longer under development so here are some active forks:

*   [https://github.com/gamechanger/nodeload](https://github.com/gamechanger/nodeload)
*   [https://github.com/Samuel29/NodeStressSuite](https://github.com/Samuel29/NodeStressSuite)

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2016-02-20T22:32:25.167

为什么不能用 JMeter 测试节点服务器？对于大多数负载测试来说，你的服务器是什么语言并不重要，你只是用一堆请求来打它。

在任何情况下，您都可以尝试在 node.js 中实现的[loadtest](https://github.com/alexfernandez/loadtest)。

> 对选定的 HTTP 或 WebSockets URL 运行负载测试。API 允许在您自己的测试中轻松集成。

编辑：

这个答案提供了更多选择：

[NodeJs 压力测试工具/方法 [关闭]](https://stackoverflow.com/questions/14463703/nodejs-stress-testing-tools-methods)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2019-05-14T16:41:43.633

试试[火炮](https://artillery.io/)。以下是它的功能，其描述取自文档：

> *   多种协议：负载测试 HTTP、WebSocket、Socket.io、Kinesis、HLS 等。
> *   场景：支持复杂场景以测试您的 API 或 Web 应用程序中的多步交互（非常适合电子商务、事务 API、游戏服务器等）。
> *   负载测试和功能测试：重用相同的场景定义在您的 API 或后端运行性能测试或功能测试。
> *   性能指标：获取详细的性能指标（延迟、每秒请求数、并发性、吞吐量）。
> *   Scriptable：在 JS 中编写自定义逻辑，使用数千个有用的 npm 模块中的任何一个。
> *   集成：开箱即用的 statsd 支持实时报告（与 Datadog、Librato、InfluxDB 等集成）。
> *   可扩展：编写自定义报告器、自定义插件、自定义协议引擎等。
> *   和更多！HTML 报告、漂亮的 CLI、CSV 文件的参数化。

# android - Google Play 如何处理架构的停产？

> ID：12221129
> 
> 赞同：0
> 
> 时间：2012-08-31T18:58:06.117
> 
> 标签：android, android-ndk, google-play

如果您在 Google Play 上有一个带有本机库的应用程序，并且在某个时候发布了一个不再支持架构（例如 x86）的更新版本，Google Play 会告诉 x86 用户升级吗？这些用户是否仍然能够下载支持 x86 的旧版 APK？

示例：版本 1 具有为 ARM 和 x86 构建的本机库。有些人从 Google Play 安装它。然后我，作者，发布版本 2，其中所述库仅为 ARM 构建。v1 的现有用户会看到应用更新通知吗？Android/x86 用户是否会在 Google Play 上看到该应用程序（有 v1 可供下载）？

我没有带有 Google Play 的非 ARM Android 设备，所以我无法检查。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T19:19:40.813

因此，您拥有 x86 和 ARM 的本机支持库，并且您想在未来某个时候停止使用 x86，并且您想知道当您这样做时会发生什么？

在这种情况下，您为什么要告诉 x86 用户下载他们已经拥有的东西？（旧版本）甚至关于新版本（他们无法使用）

这里有一些类似的[SO 问题](https://stackoverflow.com/questions/10846758/android-ndk-and-google-play-filtering)可能对您的问题有所帮助，但据我了解，如果您需要本机库支持，则仅允许具有该架构的设备下载、更新与否。

[此处记录了](http://developer.android.com/guide/google/play/publishing/multiple-apks.html)多个 APK 支持

我想我并不完全清楚你的用例是什么，问题可能只是我已经连续工作了 26 小时...... ;-)

# c++ - cppreference 在这个例子中的任务是什么？

> ID：12221136
> 
> 赞同：2
> 
> 时间：2012-08-31T18:58:37.657
> 
> 标签：c++, c++11, future, packaged-task

[在from cppreference的这个](http://en.cppreference.com/w/cpp/thread/packaged_task)描述的例子中`packaged_task`，出现了一个名为的类`task`。它是什么？

```
#include <iostream>
#include <future>
#include <thread>

int main()
{
    std::packaged_task<int()> task([](){return 7;}); // wrap the function
    std::future<int> result = task.get_future();  // get a future
    std::thread(std::move(task)).detach(); // launch on a thread
    std::cout << "Waiting...";
    result.wait();
    std::cout << "Done!\nResult is " << result.get() << '\n';
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-31T19:00:11.700

`task`是一个类型的对象`std::packaged_task<int()>`。它是在第一行创建的。

# jquery - 进行水平滑动布局的最有效方法

> ID：12221141
> 
> 赞同：3
> 
> 时间：2012-08-31T18:58:43.100
> 
> 标签：jquery, html, css, layout, navigation

以下面的布局为例。

![在此处输入图像描述](../Images/9cc607e9949b171357f58cc513cc19d8.png)

黑色边框代表用户屏幕。

三个小矩形代表导航按钮，点击后大框对应的颜色会水平滑动到用户屏幕。

例如，当我单击蓝色小按钮时，蓝色大框（这是一个 div）将向左滑动到用户屏幕，其他导航按钮也是如此。

您能否为我指出如何实现这一目标的正确方向？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-31T19:23:49.253

您可能正在寻找内容滑块。与您想要的类似的示例如下：[http](http://bxslider.com/examples/auto-show-pager) ://bxslider.com/examples/auto-show-pager 。

或者，您可以自己制作：

[http://jsfiddle.net/charlescarver/N3RZY/5/](http://jsfiddle.net/charlescarver/N3RZY/5/)

HTML

```
<div class="viewport">
    <div class="inside">
        <div class="one"></div>
        <div class="two"></div>
        <div class="three"></div>
    </div>
</div>

<div class="three-l">Green</div>
<div class="two-l">Blue</div>
<div class="one-l">Red</div> 
```

jQ

```
$(".three-l").click(function() {
  $(".viewport").animate({scrollLeft: 400}, 500);
});
$(".two-l").click(function() {
  $(".viewport").animate({scrollLeft: 200}, 500);
});
$(".one-l").click(function() {
  $(".viewport").animate({scrollLeft: 0}, 500);
}); 
```

CSS

```
.viewport{
    width:200px;
    height:200px;
    overflow-x:scroll;

}

.inside{
    width:1000px;
    height:200px;
}

.inside div{
    height:200px;
    width:200px;
    float:left;
}

.one{
    background-color:red;
}

.two{
    background-color:blue;
}

.three{
    background-color:green;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-31T19:57:30.830

边缘有点粗糙，但这应该给你一个不错的参考：

[http://jsfiddle.net/howlx5/5E9nn/](http://jsfiddle.net/howlx5/5E9nn/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-31T19:24:53.043

正是你想象它的方式。这是一个小演示，可以满足您的要求：[little link](http://jsfiddle.net/glee/gQH38/2/)。该代码非常不言自明，但如果它含糊不清，我很乐意解释任何部分。这是 JavaScript 部分的注释版本：

```
$(".nav div").click(function() { //when a nav div is clicked
    var cur = $(this); //get the div that was clicked
    var idx = cur.index(); //get its index (0, 1 or 2)
    $($(".screen div")[idx]).animate({width: "100%"}); //show the appropriate screen-filling div
    $(".screen div").not(":eq(" + idx + ")").animate({width: "0"}); //hide all others
}); 
```

希望这可以帮助！

# c++ - 指向指针的指针 (C++)

> ID：12221170
> 
> 赞同：-2
> 
> 时间：2012-08-31T19:01:07.747
> 
> 标签：c++, pointers

好的，我理解指针指针的概念。但我不知道为什么这不起作用。

```
void function(int **x) 
{
    *x = 10;
} 
```

我不断收到错误消息：“int”类型的值不能分配给“int*”类型的实体

我做错了什么或者我对指针的指针不了解什么？

omg x_x 我把 C 和 C++ 混淆了。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-31T19:02:12.487

x 是指向指针的指针，因此您必须取消引用它两次才能到达实际对象。例如`**x = 10;`

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-31T19:02:47.653

> 好的，我理解指针指针的概念。

呐……

`*x`是一个`int*`，所以你不能分配一个`int`给它。

指针对指针的概念来自 C，其中引用不可用。它允许引用语义——即您可以更改原始指针。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-08-31T19:11:23.503

简而言之，您需要取消引用两次。取消引用返回指针指向的东西，所以：

```
int   n     = 10;   //here's an int called n
int*  pInt  = &n;   //pInt points to n (an int)
int** ppInt = &pInt //ppInt points to pInt (a pointer)

cout << ppInt;      //the memory address of the pointer pInt (since ppInt is pointing to it)
cout << *ppInt;     //the content of what ppInt is pointing to (another memory address, since ppInt is pointing to another pointer
cout << *pInt;      //the content of what pInt is pointing to (10)
cout << **ppInt;    //the content of what the content of ppInt is pointing to (10) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-31T19:02:21.483

x 指向的类型是`int *`，而不是`int`。你要么想做，`static int i = 10; *x = &i`要么`**x = 10`。

# java - JFC 中的 getHelper().enterDragAndLeave() 问题

> ID：12221178
> 
> 赞同：2
> 
> 时间：2012-08-31T19:01:58.907
> 
> 标签：java, swing, drag-and-drop, jtree

我正在使用 getHelper().enterDragAndLeave() 将 JTree 节点从源拖到目标。测试用例有时会成功运行，有时会无法拖放节点。谁能给我一个想法可能是什么问题？

# jquery-ui - JQuery UI Sortable - 将占位符添加到列表以模拟空白空间

> ID：12221179
> 
> 赞同：6
> 
> 时间：2012-08-31T19:01:59.107
> 
> 标签：jquery-ui, jquery-ui-sortable

JQuery UI Sortable 适用于没有间隙的列表，但是说我想呈现一个有间隙的项目列表，例如

1, 2, 空的, 4, 5, 6, 空的, 8

其中数字代表槽号。然后预期的行为是如果用户将一个元素拖到 2 槽上，2 值被推到空槽 3，用户可以将新元素放在 2 槽中，而如果他们将新元素拖到空 3 槽，列表项不会下推，用户只需将新项目放入空 3 槽。希望这是有道理的。

我一直在查看 JQuery UI 可排序代码，似乎我需要利用更改并接收回调来实现这一点，但是，一般来说，作为 JQuery/JS 的新手，我不清楚使用什么添加这些空插槽占位符并管理选择列表，这样我就不会使用自定义代码破坏排序功能。

任何指针、示例等将不胜感激。

在对此进行了一段时间的研究之后，我创建了一个 jsFiddle：http: [//jsfiddle.net/pdHnX/](http://jsfiddle.net/pdHnX/)

帮助解释问题。我相信我想要完成的所有事情都可以在重写的 _rearrange 方法中发生。小提琴代码处理项目替换填充项目的情况，但有一个奇怪的问题，如果您将项目从项目列表拖动到填充列表，放下项目，然后在填充列表中拖动相同的项目，填充列表缩小了1，这是一个问题。

一旦您开始将更多项目拖到填充列表中，就会出现更多问题，但这就是我目前遇到的问题。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-06T10:05:07.867

我不确定我是否理解正确，但这是我想出的：

[http://jsfiddle.net/py3DE/](http://jsfiddle.net/py3DE/)

```
$(".source .item").draggable({ revert: "invalid", appendTo: 'body', helper: 'clone',
    start: function(ev, ui){ ui.helper.width($(this).width()); }                    // ensure helper width
});

$(".target .empty").droppable({ tolerance: 'pointer', hoverClass: 'highlight',
    drop: function(ev, ui){
        var item = ui.draggable;
        if (!ui.draggable.closest('.empty').length) item = item.clone().draggable();// if item was dragged from the source list - clone it
        this.innerHTML = '';                                                        // clean the placeholder
        item.css({ top: 0, left: 0 }).appendTo(this);                                // append item to placeholder
    }
}); 
```

**假设：**

*   如果您从顶部列表中拖动项目 - 它将被“克隆”（原始将保留在列表中）
*   如果您从底部列表中拖动项目 - 它会移动（留下空占位符）
*   如果您将任何项目放在底部列表的占位符上 - 它将替换占位符
*   如果您将任何项目放在底部列表的非空占位符/项目上-它将替换它
*   两个列表的大小始终保持不变

让我知道这是否有帮助，或者您是否正在寻找其他东西。还解释整个任务（这个拖动的目的是什么）可能会有所帮助:-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T15:27:00.160

抱歉，这是一个很难详细说明的问题。这些要求非常具体，难以描述。

这是我正在寻找的解决方案。

这里的其他答案虽然可能是对描述不佳的问题的解决方案，但并不是我想要的。

[http://jsfiddle.net/vfezJ/](http://jsfiddle.net/vfezJ/)

不幸的是，sortable.js 代码非常繁琐，因此那里链接的代码也非常繁琐。我发布的解决方案还对 CSS 类和 DOM id 进行了一些假设以完成工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T17:49:40.207

[http://jsbin.com/igozat/2](http://jsbin.com/igozat/2)

这是我掀起的东西。它并不完美，也不值得称赞，因为 sortable() 不能在拖动中被打断。如果这是可能的，那么丢弃操作可以完全接管。此外，我重新排序的尝试是错误的。我知道这种方法只适用于普通的 jQuery，但它不适用于 jQuery UI，这让我很生气。

冒着听起来像个混蛋的风险，如果是我，我会只用 jQuery 编写功能。jQuery UI 并不像它想象的那样。:P

# javascript - addClass 改变 bg-image 但在第一次加载时没有闪烁

> ID：12221183
> 
> 赞同：1
> 
> 时间：2012-08-31T19:02:21.340
> 
> 标签：javascript, jquery, css, preload

我在每个键盘按键上运行一个函数来监视一个文本字段。

根据输入，我使用 jquery`.removeClass("classwithBGImage").addClass("classwithnewBGimage")`

这工作得很好，预计在第一次加载时背景图像中有闪烁。

`.removeClass("classwithBGImage").addClass("classwithnewBGimage")`我曾尝试使用 Javascript 和 CSS 预加载图像，甚至尝试使用精灵 - 但是在触发时第一次加载时总是会闪烁。

更新：似乎是一个记录在案的 chrome 错误： [http ://code.google.com/p/chromium/issues/detail?id=102706](http://code.google.com/p/chromium/issues/detail?id=102706)

正如这个jsfiddle所见证的那样：http: [//jsfiddle.net/QpvUQ/2/](http://jsfiddle.net/QpvUQ/2/)

有任何想法吗？非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T19:03:36.417

将背景图像应用到`div`绝对定位和`left:-99999px`.

```
#preload{
   background-image : url(large-image.png);
   position:absolute;
   left:-99999px;
} 
```

稍后，将其用于实际的 div

```
.classwithnewBGimage{
  background-image : url(large-image.png);
} 
```

这是我知道的用于预加载图像的技巧之一，以便在您实际使用它们时它们不会花费时间。

* * *

此外，`.removeClass()`没有参数什么都不做。为避免闪烁，请使用平滑过渡。

```
.stylesWithoutImage{
 ///
}

.classwithnewBGimage{
//img
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T20:57:39.757

使用[Move.js](http://visionmedia.github.com/move.js/)，您可以为 CSS 更改设置动画。

```
move('.box')
  .set('background-image', 'url(img)')
  .end(); 
```

PS：没有尝试过，但它说你可以用它为 CSS 制作动画。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T20:41:51.957

我已经找到了问题，以防其他人遇到同样的问题。

通过预加载，图像会被预加载，但许多浏览器仍会收到图像的 304 响应，导致首次加载时出现闪烁。在使用 rails 应用程序的情况下，您可以强制浏览器缓存图像。

[在 Rails 3.1 的开发模式下启用图像缓存](https://stackoverflow.com/questions/8916813/enable-image-caching-in-development-mode-in-rails-3-1)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-04T17:04:18.383

我做了一个只有 CSS 的实现，与你的 jsfiddle 一样。

*这个怎么运作？*

```
.class {
  background: url(...);
}

.class:hover {
  background: url(...);
} 
```

如果你需要用 Javascript 来做，我留下了 JS 代码，但只有 CSS 就足够了。

[http://jsfiddle.net/QpvUQ/7/](http://jsfiddle.net/QpvUQ/7/)

# api - Twitter4j 执行的 API URL 是什么？（搜索 API）

> ID：12221184
> 
> 赞同：0
> 
> 时间：2012-08-31T19:02:23.587
> 
> 标签：api, url, search, twitter, twitter4j

我使用 Twitter4J 库通过其 Search API 访问 Twitter。我向 Twitter4j 提供了这样一个查询：

```
Query{query='#hungergames', lang='null', locale='null', maxId=-1, rpp=100, page=-1, since='null', sinceId=241378725860618240, geocode='null', until='null', resultType='recent', nextPageQuery='null'} 
```

和

```
result = twitter.search(query); 
```

但我不确定内部执行的是什么 URL。 **关于如何找到它的任何见解？**

我知道 Twitter API 记录了我应该如何形成 URL 以[在此处](https://dev.twitter.com/docs/using-search)查询某些内容，但我想知道 Twitter4J 执行了什么 URL。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T01:45:11.533

最简单的方法可能是使用[Wireshark](http://www.wireshark.org/download.html)之类的工具来嗅探网络流量。

我使用以下代码复制您的查询：

```
public static void main(String[] args) throws TwitterException {
    Twitter twitter = new TwitterFactory().getInstance();
    Query query = new Query("#hungergames");
    query.rpp(100);
    query.setSinceId(241378725860618240L);
    query.setResultType(Query.RECENT);
    System.out.println(query);
    QueryResult result = twitter.search(query);
    for (Tweet tweet : result.getTweets()) {
        System.out.println(tweet.getFromUser() + ":" + tweet.getText());
    }
} 
```

打印查询的行给了我：

> 查询{query='#hungergames', lang='null', locale='null', maxId=-1, rpp=100, page=-1, since='null', sinceId=241378725860618240, geocode='null' , 直到='null', resultType='recent'}

通过嗅探网络流量，我发现代码正在请求以下 URL：

[http://search.twitter.com/search.json?q=%23hungergames&rpp=100&since_id=241378725860618240&result_type=recent&with_twitter_user_id=true&include_entities=true](http://search.twitter.com/search.json?q=%23hungergames&rpp=100&since_id=241378725860618240&result_type=recent&with_twitter_user_id=true&include_entities=true)

# gmail - 有没有办法将 Google Apps 脚本嵌入到 Gmail 上下文小工具中？我需要通过 Gmail 小工具访问 Apps Script API 功能

> ID：12221186
> 
> 赞同：2
> 
> 时间：2012-08-31T19:02:36.067
> 
> 标签：gmail, google-apps-script

有没有办法在 Gmail 上下文小工具中嵌入或访问 Google Apps 脚本？我需要从 Gmail 上下文小工具访问 Apps Script API 功能。

我创建了一个测试 Web 服务，当从 wget 调用时，它返回我的公司单点登录页面（使用 Google 的 SAML）而不是“Hello World”。

```
function doGet(e) {
  var output = ContentService.createTextOutput();
  output.setContent("Hello world");
  return output;
}

$ wget https://script.google.com/a/macros/example.com/s/AKfycbz-aVKchJk3AQltnd5CKabbGJawCu0U3ySChcT5QxBNWBS_FoU/exec
--2012-08-31 14:37:03--  https://script.google.com/a/macros/example.com/s/AKfycbz-aVKchJk3AQltnd5CKabbGJawCu0U3ySChcT5QxBNWBS_FoU/exec
Resolving script.google.com... 74.125.225.97, 74.125.225.99, 74.125.225.110, ...
Connecting to script.google.com|74.125.225.97|:443... connected.
HTTP request sent, awaiting response... 302 Moved Temporarily
Location: https://www.google.com/a/example.com/ServiceLogin?service=wise&passive=1209600&continue=https://script.google.com/a/macros/example.com/s/AKfycbz-aVKchJk3AQltnd5CKabbGJawCu0U3ySChcT5QxBNWBS_FoU/exec&followup=https://script.google.com/a/macros/example.com/s/AKfycbz-aVKchJk3AQltnd5CKabbGJawCu0U3ySChcT5QxBNWBS_FoU/exec [following]
--2012-08-31 14:37:03--  https://www.google.com/a/example.com/ServiceLogin?service=wise&passive=1209600&continue=https://script.google.com/a/macros/example.com/s/AKfycbz-aVKchJk3AQltnd5CKabbGJawCu0U3ySChcT5QxBNWBS_FoU/exec&followup=https://script.google.com/a/macros/example.com/s/AKfycbz-aVKchJk3AQltnd5CKabbGJawCu0U3ySChcT5QxBNWBS_FoU/exec
Resolving www.google.com... 209.85.225.147, 209.85.225.104, 209.85.225.105, ...
Connecting to www.google.com|209.85.225.147|:443... connected.
HTTP request sent, awaiting response... 302 Moved Temporarily
Location: https://extsignon.example.com:443/amserver/SSORedirect/metaAlias/emplFed/idp?SAMLRequest=...... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T16:50:13.023

这应该是可能的，因为有人使用 Apps 脚本作为日历小工具的数据源（[请参阅此处](https://plus.google.com/u/0/103231502413952116096/posts/GyCe8kqu4Vf)）。在您的情况下，您将获得一个登录屏幕，因为您以不允许匿名访问的方式发布了您的网络应用程序，并且 wget 没有传递您的 cookie。

# c# - 具有 IQueryable 属性的 Linq to Entities 对象同时运行所有查询

> ID：12221189
> 
> 赞同：0
> 
> 时间：2012-08-31T19:02:41.750
> 
> 标签：c#, linq, entity-framework, linq-to-entities, iqueryable

我有一个在 WCF 服务中创建的 List<Obj1>。Prop3 实际上是作为 实现的`IQueryable`，但是是`IEnumerable`因为我需要通过网络将已解析的查询传回，因为从 WCF 返回值时上下文会丢失，这就是问题所在。出于性能原因，我希望能够在 sql server 上一次运行 Prop3 中的所有查询。目前，我正在做`list.ForEach(o => o.Prop3 = o.Prop3.ToArray())`，但这显然一次运行这些查询。有没有办法将所有内容发送到 sql server 一次处理？

不明显的一件事：

```
builder.CreateObject returns an IQueryable<Obj1>

public IEnumerable<Obj1> CreateListOfObjects(IQueryable<Entity> query)
{
  List<Obj1> list = new List<Obj1>();
  foreach(var builder in Builders)
    list.AddRange(builder.CreateObject(query));
  }

  list.ForEach(o => o.Prop3 = o.Prop3.ToArray());
  return list.ToArray();
}

public class Obj1
{
  public string Prop1 {get;set;}
  public string Prop2 {get;set;}
  public IEnumerable<Obj2> Prop3 {get;set;}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T21:44:20.727

我不确定我是否完全清楚问题是什么，但是`IQueryable<T>` **IS** an `IEnumerable<T>`，所以从界面的角度来看你应该没问题。

这一行：

```
list.ForEach(o => o.Prop3 = o.Prop3.ToArray()); 
```

似乎表明您的查询正在延迟加载`Obj2`s 并且您需要`Obj2`通过调用显式加载 s `ToArray()`。`Obj2`当您使用以下方式加载 s 时，您可能只需要包含s `Obj1`：

```
list.AddRange(builder.CreateObject(query.Include("Prop3"))); 
```

是`Prop3`模型中导航属性的名称（通常是实体名称的复数形式）。

**笔记**

我不知道这是否是最好的调用位置`Include`（可能在您的对象构建器中更有意义），但这是您提供的代码中的最佳位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T19:16:50.583

听起来您正在寻找 Contains 扩展方法。请参阅[http://www.thinqlinq.com/Post.aspx/Title/Use-the-new-LINQ-Contains-extension-method-for-the-SQL-IN-clause](http://www.thinqlinq.com/Post.aspx/Title/Use-the-new-LINQ-Contains-extension-method-for-the-SQL-IN-clause)。

# javascript - html画布中的等距立方体投影

> ID：12221192
> 
> 赞同：2
> 
> 时间：2012-08-31T19:02:53.390
> 
> 标签：javascript, html, isometric

你如何在canvas 2d中做等距立方体？我已经按照[HTML5 Canvas 的 True Isometric Projection](https://stackoverflow.com/questions/6668834/true-isometric-projection-with-html5-canvas)来获得立方体的顶部，但是你如何做左侧和右侧呢？

注意：我想使用 Kinetic.js 对象，其事件处理功能完好无损。

这就是我现在所拥有的：

```
<!DOCTYPE HTML>
<html>
  <head>
    <style>
      body {
        margin: 0px;
        padding: 0px;
      }
      canvas {
        border: 1px solid #9C9898;
      }
    </style>
    <script src="http://www.html5canvastutorials.com/libraries/kinetic-v4.0.0.js"></script>
    <script>
      window.onload = function() {
        var stage = new Kinetic.Stage({
          container: "container",
          width: 578,
          height: 200,
          //scale: [1, 0.5],
          //scale: [1, 0.86062],
          //rotation: -30 * Math.PI /180,
        });

        var layer = new Kinetic.Layer({
            scale: [1,0.5],
        });

        var foo = false;

        layer.beforeDraw(function(){
            if (!foo) {
                var context = this.getContext();
                var sx = 45*Math.PI/180;
                // .75 horizontal shear
                var sy = 0;
                // no vertical shear

                // apply custom transform
                //context.transform(1, sy, sx, 1, 0, 0);
                //context.scale(1, 0.5);
                //context.rotate(45 * Math.PI /180);
                //var angle = 30;
                //context.setTransform(1, Math.tan(30), 0, 1, 0, 0);
            }
            foo = true;

        });

        layer.afterDraw(function(){
            var context = this.getContext();

            //context.scale(1, 2);
            //context.rotate(-45 * Math.PI /180);

        });

        var rect = new Kinetic.Rect({
          x: 200,
          y: 100,
          width: 50,
          height: 50,
          fill: "blue",
          stroke: "black",
          strokeWidth: 4,

          rotation: -45 * Math.PI /180,
          //scale: [1, 0.5],

        });

        rect.on("mouseover", function() {
                //alert(this.getFill());
                this.setFill("red");

                layer.draw();
         });   

         rect.on("mouseout", function() {
                //alert(this.getFill());
                this.setFill("blue");

                layer.draw();
         });  

        // add the shape to the layer
        layer.add(rect);

    // add the layer to the stage
    stage.add(layer);

  };

</script> 
```

​</p>

演示：http: [//jsfiddle.net/F5SzS/](http://jsfiddle.net/F5SzS/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T16:18:07.377

也许改用多边形？这是一个例子；

[http://jsfiddle.net/Ygnbb/](http://jsfiddle.net/Ygnbb/)

我将 3 个部分分开，但我猜你可以将其作为一个 ploygon 来完成。位置和大小需要一些调整...

# c++ - boost.proto + 从特定于域的表达式包装器中解包表达式

> ID：12221193
> 
> 赞同：3
> 
> 时间：2012-08-31T19:02:53.320
> 
> 标签：c++, boost, dsl, template-meta-programming, boost-proto

背景问题：[boost.proto + 就地修改表达式树](https://stackoverflow.com/q/12122191/1245083)

嗨，考虑以下转换以`value_type`从 a中提取`vector_expr`（请参阅前面的问题）

```
template <class T> struct value_type_trait;

template <std::size_t D, class T>
struct value_type_trait<vector<D, T> >
{
    typedef typename vector<D, T>::value_type type;
};

struct deduce_value_type
    : proto::or_<
            proto::when <vector_terminal, value_type_trait<proto::_value>() >
        ,   proto::when <scalar_terminal, proto::_value>
        ,   proto::otherwise <
                    proto::_default<deduce_value_type>()
            >
    >
{}; 
```

上面的代码可用于为表达式树提供“最大”value_type，这是应用通常的 C++ 提升规则和 Boost.TypeOf 魔法获得的。以上使用如下

```
template <class Expr>
struct vector_expr : proto::extends <Expr, vector_expr <Expr>, vector_domain>
{
    typedef proto::extends <Expr, vector_expr <Expr>, vector_domain> base_type;
    // OK! now my expression has a 'value_type'
    typedef typename boost::result_of<deduce_value_type(Expr)>::type value_type;

    vector_expr (Expr const &e) : base_type (e) {}
}; 
```

但是现在，以下代码（检查上一个问题：[boost.proto + modify expression tree in place](https://stackoverflow.com/q/12122191/1245083)和接受的答案中的代码）被破坏了（为了我的快乐，使用通常的巨大模板实例化错误回溯）

```
int main ()
{
   double data[] = {1, 2, 3};
   vector<3, double> a(data, data+3), b(data,data+3), c(data,data+3);

   auto iter = vector_begin_algo()(a + b);
   return 0;
} 
```

原因很简单。的类型`typename boost::result_of<vector_begin_algo(a+b)>::type`是：

```
vector_expr<
    basic_expr<
        tag::plus
      , list2< expr<tag::terminal, term<vector_iterator<double*> >, 0l>
             , expr<tag::terminal, term<vector_iterator<double*> >, 0l> 
        >
      , 
    2l>
> 
```

因此，外部`vector_expr<...>`触发了嵌套的评估`value_type`，但`deduce_value_type`算法不知道如何从中提取`value_type`嵌套`vector_iterator<double*>`。一种解决方案是定义一个新的特征并修改`deduce_value_type`如下

```
// A further trait
template <class Iter>
struct value_type_trait<vector_iterator<Iter> >
{
    typedef typename std::iterator_traits<Iter>::value_type type;
};

// Algorithm to deduce the value type of an expression.
struct deduce_value_type
    : proto::or_<
            proto::when <vector_terminal, value_type_trait<proto::_value>() >
        ,   proto::when <scalar_terminal, proto::_value>
        ,   proto::when <proto::terminal<vector_iterator<proto::_> > , value_type_trait<proto::_value>()> // <- need this now
        ,   proto::otherwise <
                    proto::_default<deduce_value_type>()
            >
    >
{}; 
```

这种方法有几个问题，但最重要的是：对于我发现在`vector_expr`结构中方便定义的每个 typedef 或静态常量，我需要执行上述所有操作才能编译表达式，即使是迭代器表达式IS-NOT 向量表达式，扩大 vector_expr 的接口以适应转换后的树是没有意义的。

问题是：有一种方法可以转换`vector_expr`树，将向量节点转换为迭代器节点，同时从树本身中移除*向量*，这样我就不会遇到上述问题？预先感谢，最好的问候！

**更新** 抱歉，我现在更改了问题的最后一部分，因为我更清楚（我认为）应该实现什么。同时，我尝试自己解决问题并取得了部分成功（？），但我觉得应该有更好的方法（所以我仍然需要帮助！）。

在我看来，问题来自于将所有树节点都包裹在`vector_expr`事物中，这具有对终端提出要求的副作用（主要是成功编译的静态内容）。OTOH，一旦`vector_exp`构造了有效的（即：遵守`vector_grammar`），那么我可以将其转换为有效的 iterator_tree 而无需进一步检查。

我试图创建一个转换，`vector_expr`将树中的所有节点都改回“proto::expr”。代码如下：

```
template <class Expr, long Arity = Expr::proto_arity_c>
struct deep_copy_unwrap_impl;

template <class Expr>
struct deep_copy_unwrap_impl <Expr,0>
{
    typedef typename proto::tag_of <Expr>::type Tag;
    typedef typename proto::result_of::value<Expr>::type A0;
    typedef typename proto::result_of::make_expr<Tag, proto::default_domain, A0>::type result_type;

    template<typename Expr2, typename S, typename D>
    result_type operator()(Expr2 const &e, S const &, D const &) const
    {
        return proto::make_expr <Tag, proto::default_domain> (e.proto_base().child0);
    }
};

template <class Expr>
struct deep_copy_unwrap_impl <Expr,1>
{
    typedef typename proto::tag_of <Expr>::type Tag;
    typedef typename proto::result_of::child_c<Expr, 0>::type A0;
    typedef typename proto::result_of::make_expr<Tag, proto::default_domain, A0>::type result_type;

    template<typename Expr2, typename S, typename D>
    result_type operator()(Expr2 const &e, S const &, D const &) const
    {
        return proto::make_expr <Tag, proto::default_domain> (e.proto_base().child0);
    }
};

template <class Expr>
struct deep_copy_unwrap_impl <Expr,2>
{
    typedef typename proto::tag_of <Expr>::type Tag;
    typedef typename proto::result_of::child_c<Expr, 0>::type A0;
    typedef typename proto::result_of::child_c<Expr, 1>::type A1;
    typedef typename proto::result_of::make_expr<Tag, proto::default_domain, A0, A1>::type result_type;

    template<typename Expr2, typename S, typename D>
    result_type operator()(Expr2 const &e, S const &, D const &) const
    {
        return proto::make_expr <Tag, proto::default_domain> (e.proto_base().child0, e.proto_base().child1);
    }
};

struct unwrap : proto::callable
{
    template <class Sig> struct result;

    template <class This, class Expr>
    struct result <This(Expr)>
    {
        typedef typename
            deep_copy_unwrap_impl <Expr>
            ::result_type type;
    };

    template <class This, class Expr>
    struct result <This(Expr&)> 
        : result<This(Expr)> {};

    template <class This, class Expr>
    struct result <This(Expr const&)>
        : result<This(Expr)> {};

    template <class Expr>
    typename result <unwrap(Expr)>::type
    operator () (Expr const &e) const
    {
        return deep_copy_unwrap_impl<Expr>()(e, 0, 0);
    }
};

struct retarget
    : proto::otherwise <
                unwrap(proto::nary_expr<proto::_, proto::vararg<retarget> >)
            >
{};

int main ()
{
    int data[] = {1, 2, 3};
    vector<3, int> a(data, data+3), b(data,data+3), c(data,data+3);

    auto x=a+b+c; // <- x is an expression tree made up of vector_expr<...> nodes
    auto y=retarget()(x); // <- y is an expression tree made up of proto::expr<...> nodes
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-01T20:31:27.237

您遇到的问题是 Proto 的`pass_through`转换创建了与原始表达式位于同一域中的新表达式。这发生在您的`vector_begin_algo`算法中，在`otherwise`子句中。你不想要这个，但它`pass_through`给了你。您有两种策略：不要使用`pass_through`，或欺骗`pass_through`在默认域中构建表达式。

如果您使用的是最新版本的 Proto (1.51)，您可以使用`make_expr`和解[包表达式](http://www.boost.org/doc/libs/1_51_0/doc/html/proto/users_guide.html#boost_proto.users_guide.back_end.expression_transformation.unpacking_expressions)来代替`pass_through`：

```
// Turn all vector terminals into vector iterator terminals
struct vector_begin_algo
  : proto::or_<
        proto::when<
            proto::terminal<std::vector<_, _> >
          , proto::_make_terminal(
                vector_iterator<begin(proto::_value)>(begin(proto::_value))
            )
        >
      , proto::when<
            proto::terminal<_>
          , proto::_make_terminal(proto::_byval(proto::_value))
        >
      , proto::otherwise<
            proto::lazy<
                proto::functional::make_expr<proto::tag_of<_>()>(
                    vector_begin_algo(proto::pack(_))...
                )
            >
        >
    >
{}; 
```

`proto::lazy`这里需要，因为您首先需要构建`make_expr`函数对象，然后才能调用它。这不是一件美丽的事情，但它确实有效。

如果您使用的是旧版本的 Proto，则可以`pass_through`通过首先从表达式中删除特定于域的包装器来进行欺骗，从而获得相同的效果。首先，我编写了一个可调用来剥离特定于域的包装器：

```
struct get_base_expr
  : proto::callable
{
    template<typename Expr>
    struct result;

    template<typename This, typename Expr>
    struct result<This(Expr)>
    {
        typedef
            typename boost::remove_reference<Expr>::type::proto_base_expr
        type;
    };

    template<typename Expr>
    typename Expr::proto_base_expr operator()(Expr const &expr) const
    {
        return expr.proto_base();
    }
}; 
```

然后，`vector_begin_algo`将更改如下：

```
// Turn all vector terminals into vector iterator terminals
struct vector_begin_algo
  : proto::or_<
        proto::when<
            proto::terminal<std::vector<_, _> >
          , proto::_make_terminal(
                vector_iterator<begin(proto::_value)>(begin(proto::_value))
            )
        >
      , proto::when<
            proto::terminal<_>
          , proto::_make_terminal(proto::_byval(proto::_value))
        >
      , proto::otherwise<
            proto::_byval(proto::pass_through<
                proto::nary_expr<_, proto::vararg<vector_begin_algo> >
            >(get_base_expr(_)))
        >
    >
{}; 
```

这也不是一件艺术品，但它可以完成工作。不要忘记`proto::_byval`解决`pass_through`转换中的 const 怪异问题（固定是 boost trunk 并且将在 1.52 中，顺便说一句）。

I can think of one final solution that takes advantage of the fact that Proto expressions are Fusion sequences of their children. You create a Fusion `transform_view` that wraps the expression and transforms each child with `vector_begin_algo`. That gets passed to `proto::functional::unpack_expr`, much like in the first example with `make_expr`. You'd need `proto::lazy` there also, for the same reason.

Thanks for pointing out this limitation on Proto's built-in `pass_through` transform. It'd be good to have a nicer way to do this.

# jquery - 通过隐藏电子邮件地址打击垃圾邮件（显示：无）

> ID：12221195
> 
> 赞同：0
> 
> 时间：2012-08-31T19:03:08.700
> 
> 标签：jquery, spam-prevention, email-spam

如果我设置它，是否可以防止垃圾邮件机器人爬遍我的电子邮件地址`display: none`？如果你愿意的话，我有一个小游戏的想法，用户点击电子邮件的链接，然后它会显示一两个“你确定你不是机器人”之类的问题。一旦这些都得到了回答，它就会显示真正的链接。

问题是我假设机器人可以看到链接，因为它显然存在于 HTML 中，即使它不可见。有没有解决的办法？

此外，我希望这些问题淡出，但据我了解，CSS3 过渡不支持显示或可见性属性。我必须求助于jQuery吗？`display: none`如果是这样，任何人都可以指导我在从 切换到时替代淡入元素`display: block`吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T19:05:52.297

No, `display: none` would not work.

The only real way around this is to not have it in your HTML whatsoever. Make it an image for example, or use JavaScript to descramble it into individual elements that can be placed absolutely (and individually) for a browser's human viewer to see correctly.

Note that if you go the image route, spambots can of course read images, so perhaps you should obfuscate it a little bit with some random images like the good old captchas.

With regards to CSS3 not supporting `visibility`/`display`, you'd be right, but you can use the opacity property to fade in the content of however you decide to display your email address. `opacity` is fully supported by CSS3 transitions.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T19:06:20.673

Most crawlers analyse the markup of a page, not the visual rendered version. Using `display: none` will have very little effect.

Also, you don't need to use jQuery for fading effects. Setting the opacity and then using the following will work nicely:

```
-webkit-transition: opacity 0.2s linear;
        transition: opacity 0.2s linear; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T19:08:57.053

您可能希望实现一个联系表单，而不是显示电子邮件地址。您可以使用验证码或一些蜜罐方法来保护该表单。此外，您可以使用 Javascript 呈现表单，因为许多机器人不会运行 Javascript（我希望如此）。

# ajax - 使用剑道 + 淘汰的 Ajax Asp Mvc3 提交时不触发服务器验证

> ID：12221196
> 
> 赞同：2
> 
> 时间：2012-08-31T19:03:15.323
> 
> 标签：ajax, asp.net-mvc-3, knockout.js, fluentvalidation

我有 Asp Mvc3 应用程序。在我看来，我正在使用 kendoui + knockoutjs。我正在使用剑道验证器处理客户端验证。我对 asp mvc3 很陌生，我无法让我的服务器端验证工作。

这是我的业务对象：

```
[Validator(typeof(FranchiseInfoValidator))]
    public class FranchiseInfo
    {
        public string FullName { get; set; }
        public string ShortName { get; set; }
    }
} 
```

我正在使用 FluentValidation。这是我的验证规则的实现：

```
public class FranchiseInfoValidator : AbstractValidator<FranchiseInfo>
    {
        public FranchiseInfoValidator()
        {
            RuleFor(franchiseInfo => franchiseInfo.FullName).NotEmpty();
            RuleFor(franchiseInfo => franchiseInfo.ShortName).NotEmpty();
        }
    } 
```

这是我的视图模型：

```
public class FranchiseInfoViewModel
    {
        public string FullName { get; set; }
        public string ShortName { get; set; }
    } 
```

这是我对 FranchiseInfoViewModel 的强类型视图：

```
@model MvcApplication2.Models.FranchiseInfoViewModel

<script src="../../Scripts/Details.js" type="text/javascript"></script>

<form id="franchiseForm" action="" style="font-family: Trebuchet MS, Verdana, Helvetica, Sans-Serif;"> 
     <table>
            <tr>
                <td><label for="fullName">FullName:</label></td>
                <td><input id="fullName" data-bind= "value: FullName" /></td>
            </tr>
            <tr>
                <td><label for="shortName">ShortName:</label></td>
                <td><input id="shortName" data-bind= "value: shortName" /></td>
            </tr>
    </table>
    <button id="submit" class="k-button" data-bind="click: save" form="franchiseForm">Save Franchise</button>
</form> 
```

在提交表单时，我正在调用 javascript 函数保存：

```
$(function () {

    save = function () {

        // some logic

        $.ajax({
            url: "/franchise/SaveFranchise",
            type: "POST",
            data: { franchiseInfoViewModel: jsonData },               
            dataType: 'json',
            success: function (data, textStatus, xhr) {
                window.location.href = data.redirectToUrl;
            }
        });
    }
}); 
```

在保存时，我以 json 格式提交数据并将数据发送到 SaveFranchise 控制器：

```
public ActionResult SaveFranchise(string franchiseInfoViewModel)
        {
            var franchiseInfoVM = JsonConvert.DeserializeObject<FranchiseInfoViewModel>(franchiseInfoViewModel);

            if (!ModelState.IsValid)
            { 
                // do some action
            }

            return View();
        } 
```

我想要完成的是`(!ModelState.IsValid)`返回视图并显示流畅的验证错误消息。出于某种原因，在我的情况下 ModelState.IsValid 总是正确的。

如前所述，我对 Asp Mvc 3 非常陌生。从我读过的文章中，示例是将表单提交到有绑定的服务器（没有 javascript），并将服务器验证消息返回到视图。但是那里的视图是用 Razor 实现的，客户端验证是通过 jquery 完成的。

在我看来，我正在使用带有数据绑定（ kendoui + 淘汰赛）的 javascript 视图模型。在我的情况下，我应该怎么做服务器端验证。请帮我。感谢您的时间和精力！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-31T23:22:59.933

*简短的回答：*

您应该在控制器操作中使用模型绑定 - 这样做可以让您使用`ModelState.IsValid`.

所以你的控制器动作：

```
public ActionResult SaveFranchise(string franchiseInfoViewModel) 
```

..应该改为：

```
public ActionResult Create(FranchiseInfo franchiseInfo) 
```

请务必以使模型绑定器能够实例化模型实例的格式发布您的表单`FranchiseInfo`。您可以使用 JSON 来执行此操作，但我认为如果您只使用表单上的标准`action`属性发布表单会更好（并且更简单）。

*详细回答：*

我建议的第一件事是使用 ASP.NET MVC 框架提供的模型验证，包括用于服务器端验证的模型绑定、模型状态和数据注释，以及用于客户端验证的不显眼的 javascript。这样做将为您提供一种更加[DRY](http://en.wikipedia.org/wiki/Don%27t_repeat_yourself)的实施方式，具有明确[的关注点分离 (SoC)](http://en.wikipedia.org/wiki/Separation_of_concerns)。

要到达那里 - 我建议您首先开始查看 ASP.NET MVC 中的模型绑定。

如[“ASP.NET MVC 模型绑定的特性和缺点”中](http://msdn.microsoft.com/en-us/magazine/hh781022.aspx)所述：

> 通过模型绑定，控制器操作可以专注于提供业务价值，避免浪费时间进行普通的请求映射和解析。

要看到这一点，这篇[MSDN 文章](http://msdn.microsoft.com/en-us/library/dd410405%28v=vs.90%29.aspx)对模型绑定器有一个很好的定义：

> MVC 中的模型绑定器提供了一种将发布的表单值映射到 .NET Framework 类型并将类型作为参数传递给操作方法的简单方法。(...) 模型绑定器类似于类型转换器，因为它们可以将 HTTP 请求转换为传递给操作方法的对象。

有了这个抽象，您将很快看到以下签名：

```
public ActionResult SaveFranchise(string franchiseInfoViewModel) 
```

..可以更改为：

```
public ActionResult Create(FranchiseInfo franchiseInfo) 
```

...在这一点上，事情已经开始看起来更干净了，因为像您的自定义数据映射这样的代码：

```
var franchiseInfoVM = JsonConvert.DeserializeObject<FranchiseInfoViewModel>(franchiseInfoViewModel); 
```

...可以删除。

一般来说，您不需要将表单序列化为 JSON 并发布 - 相反，您应该利用 MVC 中的模型绑定并以标准方式提交表单数据（通过使用`action`表单元素上的属性 - 好吧，模型binder 能够基于 JSON 绑定对象，但我想你明白我的意思..)。实际上，ASP.NET MVC 使得为模型生成表单变得非常简单——[这里显示了](http://www.asp.net/mvc/tutorials/getting-started-with-aspnet-mvc3/cs/examining-the-edit-methods-and-edit-view)[`Html.BeginForm`](http://msdn.microsoft.com/en-us/library/system.web.mvc.html.formextensions.beginform%28v=vs.108%29.aspx)一个使用示例。

因此，现在当您重构视图以使用一个表单来发布其数据而不将表单数据序列化为 JSON 时，您应该看看 MVC3 中的数据注释。

如[本例](http://www.asp.net/mvc/tutorials/getting-started-with-aspnet-mvc3/cs/adding-validation-to-the-model)`System.ComponentModel.DataAnnotations`所述，.NET的命名空间...

> 提供了一组内置的验证属性，您可以以声明方式将其应用于任何类或属性。(...) 验证属性指定您希望对应用它们的模型属性强制执行的行为。

可用的注释之一是`Required`属性——它定义了一个特定的模型属性必须有一个值。还有[其他几个属性](http://msdn.microsoft.com/en-us/library/system.componentmodel.dataannotations.aspx)，如`Range`, `MaxLength`,`RegularExpression`等。一些属性的示例使用如下所示：

```
public class Movie
{
    public int ID { get; set; }

    [Required(ErrorMessage = "Title is required")]
    public string Title { get; set; }

    [Required(ErrorMessage = "Date is required")]
    public DateTime ReleaseDate { get; set; }

    [Required(ErrorMessage = "Genre must be specified")]
    public string Genre { get; set; }

    [Required(ErrorMessage = "Price Required")]
    [Range(1, 100, ErrorMessage = "Price must be between $1 and $100")]
    public decimal Price { get; set; }

    [StringLength(5)]
    public string Rating { get; set; }
} 
```

（示例借鉴自：[http](http://www.asp.net/mvc/tutorials/getting-started-with-aspnet-mvc3/cs/adding-validation-to-the-model) ://www.asp.net/mvc/tutorials/getting-started-with-aspnet-mvc3/cs/adding-validation-to-the-model ）

使用数据注释填充模型使您可以在提交给定表单时轻松检查模型是否有效，并且您可以在给定操作中检查所提供模型的有效性 -它在这里`ModelState.IsValid`被证明是有用的。

[正如这篇文章](http://www.asp.net/mvc/tutorials/getting-started-with-aspnet-mvc3/cs/adding-validation-to-the-model)中提到的：

> (...) 第二个 Create 方法调用`ModelState.IsValid`来检查电影是否有任何验证错误。调用此方法会评估已应用于对象的任何验证属性。

所以在这一点上，您应该能够看到使用数据注释来声明模型上的约束/所需行为将允许您拥有一个简单的实现，其中逻辑在模型中定义并且可以使用`ModelState.IsValid`.

为了对此进行扩展，我可以告诉您一些我在 ASP.NET MVC3 中的服务器端和客户端进行模型验证的经验。

`ModelState.IsValid`正如您可能已经猜到的那样，在模型验证方面，我使用 ASP.NET MVC3 的最佳体验是使用数据注释以及通过不显眼的 JavaScript对服务器端验证和客户端验证的内置支持。

对于数据注释，我使用内置注释和[数据注释扩展](http://dataannotationsextensions.org/)项目提供的扩展的组合。

使用 ASP.NET MVC3 对不显眼的客户端验证的支持有几个好处。

*   首先，[SoC](http://en.wikipedia.org/wiki/Separation_of_concerns)真的很容易实现，因为模型验证逻辑只定义在一个地方——那就是它所属的模型中。
*   其次，您可以在您的视图中获得更[DRY](http://en.wikipedia.org/wiki/Don%27t_repeat_yourself)的实现（避免重复的逻辑并获得更易于维护的代码）并让框架为您完成繁重的工作。

可以在 [此处](http://www.asp.net/mvc/tutorials/older-versions/javascript/creating-a-mvc-3-application-with-razor-and-unobtrusive-javascript)找到如何在 ASP.NET MVC3 中使用不显眼的客户端验证的示例。

但是，有时使用注释可能看起来不那么直接 - 例如，当您想要验证信用卡和文件扩展名等属性时。在这些需要对基本注释以外的替代方案进行逻辑调用的情况下，我倾向于使用[数据注释扩展](http://dataannotationsextensions.org/)（除非我可以将我的应用程序定位为 .NET 4.5，例如，[它添加了一系列更多属性](http://msdn.microsoft.com/en-us/library/system.componentmodel.dataannotations%28v=vs.110%29.aspx)，例如） ，`FileExtensionAttribute`因为它们提供了一系列开箱即用的出色注释扩展（[存在用于 MVC3 的数据注释扩展 nuget 包](http://nuget.org/packages/DataAnnotationsExtensions.MVC3)- 因此设置和开始使用非常简单）。

还有一些特殊情况，您可能拥有取决于数据库状态的属性 - 例如，如果您想在用户填写用户注册表单时检查用户名是否已经存在。在这种情况下，ASP.NET MVC3 远程验证注释是您的朋友。正如这篇[MSDN 文章所述](http://msdn.microsoft.com/en-us/library/gg508808%28VS.98%29.aspx)：

> ASP.NET MVC 3 提供了一种机制，可以进行远程服务器调用以验证表单字段，而无需将整个表单发布到服务器。当您有一个无法在客户端上验证的字段并且因此在提交表单时可能无法通过验证时，这很有用。

ASP.NET MVC3 中远程验证的好处是，它也可以使用数据注释来表示（如[这篇博](http://www.aaronstannard.com/post/2010/12/07/remote-validation-asp-net-mvc3.aspx)文和这篇[MSDN 文章](http://msdn.microsoft.com/en-us/library/gg508808%28VS.98%29.aspx)中所示）。

综上所述 - 使用这些框架功能 (imo) 确实为您提供了一系列工具，可以或多或少地涵盖 ASP.NET MVC3 中“正确方式”的任何类型的模型验证。

# jdo - 持久化对象时出现 JDOUserException：据说不正确的类型与预期的类型相同

> ID：12221201
> 
> 赞同：2
> 
> 时间：2012-08-31T19:03:43.563
> 
> 标签：jdo, datanucleus

尝试持久化对象会导致引发此异常。它抱怨不正确的类型，但随后期望*相同*的类型。将项目从 dbd2012_p2 重命名为 dbd2012_p3 后开始出现异常（这是之前分配的延续）。

我在谷歌上没有找到关于这个例外的信息。我已经检查了元数据文件，确保没有留下任何 dbd2012_p2 实例，我现在很困惑。

我们的数据库基本上是多对多的关系：Prova 和 Tag。Mesura 使用一些额外的属性（活动、日期时间、x、y 和 z 坐标）对关系进行建模。

## 例外

```
javax.jdo.JDOUserException: The owner field prova of element class dbd2012_p3.Mesura has an incorrect type "dbd2012_p3.Prova". Should be "dbd2012_p3.Prova"
javax.jdo.JDOUserException: The owner field prova of element class dbd2012_p3.Mesura has an incorrect type "dbd2012_p3.Prova". Should be "dbd2012_p3.Prova"
    at org.datanucleus.api.jdo.NucleusJDOHelper.getJDOExceptionForNucleusException(NucleusJDOHelper.java:519)
    at org.datanucleus.api.jdo.JDOPersistenceManager.jdoMakePersistent(JDOPersistenceManager.java:736)
    at org.datanucleus.api.jdo.JDOPersistenceManager.makePersistent(JDOPersistenceManager.java:756)
...
    at dbd2012_p3.dbd2012_p3.main(dbd2012_p3.java:28) 
```

## 代码

```
for (String name : names) {
    for (String seq : seqs) {
        Prova prova = new Prova(name, seq);
        pm.makePersistent(prova); // Exception thrown here
    }
} 
```

### Prova.java

```
@PersistenceCapable
public class Prova {
        @PrimaryKey //OJO
        private String nom_persona = null;
        @PrimaryKey
        private String num_seq = null;
        private Set tagRelations = new HashSet();

        public Prova(String nou_nom_persona, String nou_num_seq) {
                nom_persona = nou_nom_persona;
                num_seq = nou_num_seq;
        }

        public Prova(){} 
```

## 包-mysql.orm

这就是我们定义表的方式：

```
<?xml version="1.0"?>
<!DOCTYPE orm SYSTEM "file:/javax/jdo/orm.dtd">
<orm>
        <package name="dbd2012_p3">
                <class name="Prova" type="application" table="prova">
                        <field name="nom_persona" primary-key="true">
                                <column name="nom_persona" length="45" jdbc-type="VARCHAR"/>
                        </field>
                        <field name="num_seq" primary-key="true">
                                <column name="num_seq" length="45" jdbc-type="VARCHAR"/>
                        </field>
                        <field name="tagRelations" persistence-modifier="persistent" mapped-by="prova">
                                <collection element-type="Mesura" />
                        </field>
                </class>

                <class name="Tag" type="application" table="tag">
                        <field name="codi" primary-key="true">
                                <column name="codi" length="45" jdbc-type="VARCHAR" />
                        </field>
                        <field name="nom">
                                <column name="nom" length="45" jdbc-type="VARCHAR" />
                        </field>
                        <field name="provaRelations" persistence-modifier="persistent" mapped-by="tag">
                                <collection element-type="Mesura" />
                        </field>
                </class>

                <class name="Mesura" type="datastore" table="mesura">
                        <field name="datetime" column="datetime"/>
                        <field name="prova" />
                        <field name="tag" />
                        <field name="activitat" />
                        <field name="x">
                            <column name="x" jdbc-type="DECIMAL" length="3" scale="1" />
                        </field>
                        <field name="y">
                                <column name="y" jdbc-type="DECIMAL" length="3" scale="1" />
                        </field>
                        <field name="z">
                                <column name="z" jdbc-type="DECIMAL" length="3" scale="1" />
                        </field>
                </class>
        </package>
</orm> 
```

注意：我没有将此标记为家庭作业，因为作业是关于将数据挖掘技术应用于我们添加到数据库中的数据。我可以将项目重命名回它的旧名称，然后它又可以工作了，但是这个例外真的让我很烦。

# wpf - 如何将 MahApps Spin 与 Caliburn Micro 绑定

> ID：12221202
> 
> 赞同：1
> 
> 时间：2012-08-31T19:03:47.057
> 
> 标签：wpf, caliburn.micro, mahapps.metro

我正在尝试在登录 wpf 表单中使用 MahApps Spin 控件。但是caliburn绑定不起作用。

```
<Controls:ProgressRing IsActive="{Binding Busy}" Grid.Row="6" Grid.Column="1" x:Name="Busy"/> 
```

我的模型有类似的东西

```
bool _busy;
public bool Busy
{
    get
    {
        return _busy;
    }
    set
    {
        _busy = value;
        NotifyOfPropertyChange(() => _busy);
    }
}

public void Login(string username, string password) 
{
    try
    {
        Busy = true;
    ... 
```

但它没有在 wpf 表单上显示 Spin 控件

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T19:07:58.627

查看您的通知，您是在现场而不是财产上通知。

改变

```
NotifyOfPropertyChange(() => _busy); 
```

至

```
NotifyOfPropertyChange(() => Busy); 
```

# java - Selenium 2.0 WebDriver：元素不再附加到使用 Java 的 DOM 错误

> ID：12221204
> 
> 赞同：0
> 
> 时间：2012-08-31T19:03:58.750
> 
> 标签：java, dom, automation, webdriver, selenium-webdriver

我正在为我的 UI 自动化使用 PageObject/PageFactory 设计模式。使用 Selenium 2.0 WebDriver，JAVA，我随机得到错误：org.openqa.selenium.StaleElementReferenceException：元素不再附加到 DOM，当我尝试这样的逻辑时：

```
@FindBy(how = HOW.ID, using = "item")
private List<WebElement> items

private void getItemThroughName(String name) {
    wait(items);

    for(int i = 0; i < items.size(); i++) {
        try {
            Thread.sleep(0500);
        } catch (InterruptedException e) { }

        this.wait(items);
        if(items.get(i).getText().contains(name)) {
            System.out.println("Found");
            break;
        }
    }
} 
```

错误随机发生在 if 语句行，如您所见，我已经尝试了几件事来避免这种情况，比如睡一小段时间，或者再次等待元素，都不是 100% 的时间

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T21:45:38.253

首先，如果您确实有多个 ID 为“item”的元素，您应该记录一个错误或与网站上的开发人员交谈以修复它。ID 是唯一的。

由于对该问题的评论已经暗示您应该在这种情况下使用 ExplicitWait ：

```
private void getItemThroughName(String name) {
    new WebDriverWait(driver, 30)
               .until(ExpectedConditions.presenceOfElementLocated(
                 By.xpath("id('item')[.='" + name + "']")
               ));
    // A timeout exception will be thrown otherwise
    System.out.println("Found");
} 
```

# jquery - 如何根据下拉列表的“选定”值使字段“必填”？

> ID：12221205
> 
> 赞同：0
> 
> 时间：2012-08-31T19:03:59.020
> 
> 标签：jquery, validation, rule

我正在尝试编写一个脚本，它将对文件施加**“必需”**的验证规则。

例如：

1.  我正在使用 2 个下拉菜单（“need_accomodation”（是/否）和“accomadation_type（GUESTHOUSE/HOTEL）”）

2.  当我选择**YES** of **need_accomodation**时，会显示**accomadation_type**。我使用了 jQuery 的**hide()**和**show()**方法。

但我需要应用**accomadation_type****所需**的验证规则，并在其标签 "Accomodation Type"上 附加一个**红色 (*) 。**

 ****没有找到合适的解决方法。

仅供参考：我正在使用 jQuery.validation.js 插件。

请建议我如何解决这个问题。

提前致谢。

到目前为止我所取得的成就：

```
 {literal}
$("#need_accomodation").change(function() {
if ($("#need_accomodation").val() == "yes") {
     $("#accomodation_type").parent().show();
}
else {
    $("#accomodation_type").parent().hide();
    $("#accomodation_type").val('');
}
});
{/literal}

{literal}
$("#accomodation_type").parent().hide();
{/literal}{literal}
if ($("#need_accomodation").val() == "yes") {
     $("#accomodation_type").parent().show();
}
{/literal} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T06:56:49.910

您可以使用基于依赖表达式的条件必需子句来执行此操作。此外，正如 BradBrening 在评论中建议的那样，您应该使用复选框从用户那里收集 need_accommodation 的值。

以下是有关如何在验证规则中使用依赖表达式的完整说明：http: [//docs.jquery.com/Plugins/Validation/Methods/required#dependency-expression](http://docs.jquery.com/Plugins/Validation/Methods/required#dependency-expression)****

# jquery - Why is jQuery loading multiple dialogs?

> ID：12221208
> 
> 赞同：0
> 
> 时间：2012-08-31T19:04:15.153
> 
> 标签：jquery, jquery-ui, jquery-plugins

I click on the image. Then the dialog opens. I close the dialog and reclick the image to open it. The I see 2 dialogs opened when I scroll down. Can anyone explain why is it happening. I want the dialog to be opened and closed only once.

jsFiddle link here: [http://jsfiddle.net/Wqtfu/](http://jsfiddle.net/Wqtfu/)

```
jQuery(document).ready(function(){
    var dialogOpts = {
            title: "Fullscreen",
            modal: true,
            autoOpen: false,
            width: jQuery(window).width(),
            height: jQuery(window).height(),
            maxwidth: jQuery(window).width(),
            maxheight: jQuery(window).height(),
            closeOnEscape: true,
            draggable: false,
            resizable: false,
            zIndex: 99999999,
            open: function() {
               jQuery("#zoomframe").append(jQuery("<iframe />").attr({src: "www.google.com",
                                                                        frameborder: "0",
                                                                        scrolling: "no",
                                                                        width: jQuery(window).width(),
                                                                        height: jQuery(window).height()
                                                                         }));
            },
            close: function() {
                jQuery(this).hide();
            }

            };

    jQuery("#zoomframe").dialog(dialogOpts);

    jQuery("#mainimage").click(
                function (event){
                    event.preventDefault();
                    jQuery("#zoomframe").dialog("open");
                    return false;
    });

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T15:06:06.837

**正如MrOBrian**在对问题的评论中所说的那样，我将我的代码更新为以下内容并且它有效！

```
jQuery(document).ready(function(){
    var dialogOpts = {
            title: "Fullscreen",
            modal: true,
            autoOpen: false,
            width: jQuery(window).width(),
            height: jQuery(window).height(),
            maxwidth: jQuery(window).width(),
            maxheight: jQuery(window).height(),
            closeOnEscape: true,
            draggable: false,
            resizable: false,
            zIndex: 99999999,
            open: function() {
               jQuery("#zoomframe").append(jQuery("<iframe />").attr({src:    "www.google.com",
                                                                        id: "myzoomframe",
                                                                        frameborder: "0",
                                                                        scrolling: "no",
                                                                        width: jQuery(window).width(),
                                                                        height: jQuery(window).height()
                                                                         }));
            },
            close: function() {
                jQuery(this).hide();
                jQuery('#myzoomframe').remove();
            }

            };

    jQuery("#zoomframe").dialog(dialogOpts);

    jQuery("#mainimage").click(
                function (event){
                    event.preventDefault();
                    jQuery("#zoomframe").dialog("open");
                    return false;
    });

}); 
```

# c# - How to find overlapping / redundant nodes in a tree

> ID：12221209
> 
> 赞同：0
> 
> 时间：2012-08-31T19:04:22.293
> 
> 标签：c#, asp.net, algorithm, tree

I have a list of nodes in a big hierarchy. How do I efficiently determine which of my nodes are descendants of any others in my list?

Specifically this is a list of ASP.NET controls. My code examines each of these nodes and their descendants, so I am trying to eliminate redundancy.

A simple example is this tree:

```
 Parent
         /    \
    Gladis    Arthur
    /    \
 Jon      Sam 
```

My list contains `{ Parent, Jon }`.

I would like to write an algorithm that reduces the list to just `Parent` based on the fact that the `Parent` node contains `Jon` as a descendant.

Here is code:

```
 public class Node
    {
        public Node(string name_, params Node[] children_)
        {
            this.children = children_;
        }
        public string name;
        public Node[] children;
    }

    public class NodeAnalysis
    {
        public Node node;
        public Node containingAncestor = null;
    }

    static void Main(string[] args)
    {
        Node jon = new Node("jon");
        Node parent = new Node("parent",
            new Node("Gladis",
                jon,
                new Node("Sam")),
            new Node("Arthur")
        );

        List<NodeAnalysis> results = new List<NodeAnalysis>();
        results.Add(new NodeAnalysis{ node = parent });
        results.Add(new NodeAnalysis{ node = jon });

        foreach (NodeAnalysis item in results)
        {
            // ??? populate item.containingAncestor
        }
    } 
```

I can't think of an efficient algorithm to accomplish this. I cannot control the order in which the nodes are added to the list. It seems like it could be optimized by examining both the tree and the relationships I've already identified in the list as I traverse it.

**EDIT: `.parent` is available in the `Node` struct. It's easier to discover ancestral relationship using `.parent`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T19:29:22.113

这是一种方法：

```
public static void RemoveDescendants(IList<Node> list)
{
    for (int index = 0; index < list.Count; index++)
        RemoveDescendants(list[index], list);
}
private static void RemoveDescendants(Node node, IList<Node> list)
{
    foreach (var child in node.children)
    {
        list.Remove(child);
        RemoveDescendants(child, list);
    }
} 
```

# jquery - 使用 jquery 向表中添加新行

> ID：12221210
> 
> 赞同：0
> 
> 时间：2012-08-31T19:04:40.230
> 
> 标签：jquery, html

当我尝试添加新行时，一行中的字段如下

```
$('#building').val()   $('#floor').val() 
```

但我想显示它包含的值。

jQuery：

```
var newRow =
    $("<tr><td>$('#building').val()</td><td>$('#floor').val()</td><td></td></tr>");     
    $('#building-table').append(newRow); 
```

html:

```
<select id="building" name="building" >
<option>1</option>
<option>2</option>
</select>
<input id="floor" name="floor" type="text" />
<input type="button" id="save" value="save" /> 
```

谁可以帮我这个事？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T19:05:54.033

也许这个？

```
var newRow = "<tr><td>"+$('#building').val()+"</td><td>"+$('#floor').val()+"</td><td></td></tr>";
$('#building-table').append(newRow); 
```

# mysql - 字符串真实性如何在 MySQL 中工作？

> ID：12221211
> 
> 赞同：4
> 
> 时间：2012-08-31T19:04:45.113
> 
> 标签：mysql, casting

我想查找某个字符串字段不是空白或 null 的记录，所以我简单地写了`SELECT ... FROM myTable WHERE x`，假设空白和 null 字符串的计算结果为 false，但情况似乎并非如此。

字符串“02306”为真，而“N06097EIP”不知何故为假。

这是怎么回事？

**编辑：**我知道解决方法，我只是想知道铸造是如何工作的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-31T19:16:13.890

在这些表达式中，字符串首先被转换为数字。"02306" 被转换为 >0 的 2306，因此被视为`true`，而 "N06097EIP"（以非数字开头）被转换为 0，被评估为`false`。

比较结果：

```
select convert("N06097EIP",signed) 
```

和

```
select convert("02306",signed) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-31T20:23:34.277

在布尔上下文中，例如

```
WHERE x 
```

表达式`x`将被评估为整数值。请注意，MySQL 将 BOOLEAN 视为数字类型。

[http://dev.mysql.com/doc/refman/5.1/en/numeric-type-overview.html](http://dev.mysql.com/doc/refman/5.1/en/numeric-type-overview.html)

表达式的类型无关紧要`x`。根据文档化的转换规则，它要么是 INTEGER 类型，要么将转换为 INTEGER 类型。

最终结果是表达式`x`将被评估为 NULL、整数零或非零整数。

这些对应于 NULL、FALSE 和 TRUE 的布尔“真实性”值。

之所以`'02306'`认为 TRUE 是因为此字符串转换为非零的整数值 2306。

被认为是 FALSE的原因`'N06097EIP'`是因为此字符串转换为整数值 0。

可以运行一个简单的测试用例来验证：

```
SELECT IF( 0 = 'N06097EIP', 'is zero', 'is not zero')
SELECT 0 = 'N06097EIP' 
```

您观察到的行为完全是意料之中的。这一切都很简单。您可能没有意识到，因为规范模式是让我们避免这种类型的评估，而是使用“解决方法”（如您所说）返回布尔值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T19:09:41.857

不要试图用语法快捷方式对此过于可爱。如果不出意外，下一个必须弄清楚你在做什么的开发人员总是更难。

只需说出你想要的。

```
SELECT *
    FROM myTable
    WHERE x IS NOT NULL AND x <> ''; 
```

或者，如果您愿意：

```
SELECT *
    FROM myTable
    WHERE COALESCE(x, '') <> ''; 
```

# mysql - How can I replace HTML line in MySQL?

> ID：12221214
> 
> 赞同：1
> 
> 时间：2012-08-31T19:05:06.097
> 
> 标签：mysql, html

I need to replace an html code in multiple posts. This is the code I am using:

```
UPDATE wp_posts SET post_content = REPLACE(post_content, 'target="_top" class="text"') WHERE 'post_content'  = 'class="text"' 
```

But I am getting an error:

> #1064 - You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ') WHERE 'post_content' = 'class="text"'' at line 1

Is there any solution to make it work properly ?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T19:06:17.530

`REPLACE` takes three arguments, you only gave two. You didn't tell it what to replace the matched text with.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T19:08:38.963

请查看[手册](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_replace)以正确使用`REPLACE`. 您需要提供 3 个参数：

`REPLACE(str, from_str, to_str)`

> 返回字符串 str，其中所有出现的字符串 from_str 都替换为字符串 to_str。REPLACE() 在搜索 from_str 时执行区分大小写的匹配。
> 
> ```
> mysql> SELECT REPLACE('www.mysql.com', 'w', 'Ww');
>         -> 'WwWwWw.mysql.com' 
> ```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-31T19:09:56.500

你需要三个参数来替换，你还需要`LIKE`在你的`WHERE`子句中使用，否则你不会得到任何匹配。最后，您不希望`post_content`在`WHERE`子句中使用单引号。要么使用反引号，要么什么都不用。

```
UPDATE wp_posts
SET post_content = REPLACE(post_content, 'class="text"', 'target="_top" class="text"')
WHERE post_content LIKE '%class="text"%' 
```

# python - Python 2 安装 Python 3 模块

> ID：12221221
> 
> 赞同：1
> 
> 时间：2012-08-31T19:05:24.117
> 
> 标签：python, installation

我正在尝试安装最新[的guess_language](https://bitbucket.org/spirit/guess_language)模块。描述说它可以使用[lib3to2](https://bitbucket.org/amentajo/lib3to2)安装。但我该怎么做呢？首先我安装3to2。然后

> 3to2guess_language-spirit-0.5a​​1 -w

打破包装。在我跑之后

> python setup.py 安装

我收到消息：

> **UNKNOWN==0.0.0**的已完成处理依赖项

 *** * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T19:17:22.853

该软件包在安装时为您`setup.py`运行`lib3to2`转换器，无需手动运行转换器。

以下（使用我`pip`为python 2.7安装的命令）对我来说很好；using`pip`是最简单的选择：

```
pip install https://bitbucket.org/spirit/guess_language/downloads/guess_language-spirit-0.5a1.tar.bz2 
```

前提是您安装了附魔 C 库。

或者，如果您安装了`3to2`python 包，以下操作也可以：

```
$ cd guess_language-spirit-0.5a1
guess_language-spirit-0.5a1 $ ../bin/python setup.py install
RefactoringTool: Skipping implicit fixer: collections
RefactoringTool: Skipping implicit fixer: int
RefactoringTool: Skipping implicit fixer: memoryview
RefactoringTool: Skipping implicit fixer: printfunction
RefactoringTool: Skipping implicit fixer: unittest
RefactoringTool: Refactored build/py2k/generate_data.py
RefactoringTool: Refactored build/py2k/guess_language/__main__.py
[..many more lines..]
Processing dependencies for guess-language-spirit==0.5a1
Finished processing dependencies for guess-language-spirit==0.5a1 
```

但请确保您使用干净解包的发行版（您没有尝试运行 3to2 转换器的发行版）来做到这一点。**

# jquery - My jQuery code stops working when I use & instead of $

> ID：12221222
> 
> 赞同：-8
> 
> 时间：2012-08-31T19:05:48.473
> 
> 标签：jquery

I just started using jQuery and I love it. Don't know how I lived without it.

I started off small by doing some basic showing and hiding, and fading in, then fading back out. It works great.

My problem occurs when I decided to use the "&" symbol for my jQuery variables instead of the normal "$" (isn't that right?). I don't really like the look of the $ sign as it reminds my of my mortgage payment thats 3 months overdue. But I had to have this new MacBook Pro retina display...anyway I diverge.

So I'm trying to do basic stuff using the &, like so:

```
&('body').show('superfast'); 
```

But it's not working. I also tried to make all of the blink tags on my page blink twice as fast like this:

```
&('blink').animate({
    'speed': 'faster'
}) 
```

Lastly when the user puts their mouse over any of the images on my web page I want to play a cat sound...my website sells massage therapy sessions for dogs and the cat sound will probably make them happy right? I tried this:

```
&('image').mouseover(function(){
    var audio = new Audio("noise.mp3");
    audio.play();
}); 
```

Can somebody help me please? I really don't want to use the $ because it makes me realize all of the money I'm losing from my webpage until this code runs. Help?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-31T19:15:18.167

`$`用作函数引用的原因是`jQuery`它很短，也不是保留符号。

该`&`符号不起作用，因为它是为按位与运算保留的，因此不能用作变量名。

您的选择是`jQuery`直接使用该功能，例如：

```
jQuery(function () { ... }); 
```

或使用`$`如：

```
$(function () { ... }); 
```

您还可以分配其他内容，例如：

```
var _ = jQuery; 
```

或者

```
var IHateDollarSign = jQuery; 
```

只要不保留标识符。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-31T19:08:06.243

您可以使用“jQuery”而不是“$”

```
$('body').show('superfast'); 
```

是相同的

```
jQuery('body').show('superfast'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T19:10:20.507

我不认为你正在尝试做的是一个好主意。你不应该改变它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-31T19:10:28.563

您可以只使用随机字符。JQuery 将自身映射到 $。你可以通过简单地将jQuery对象分配给类似'q'的东西来映射它，方法是这样写：`var q = window.jQuery;`

# html - Website design using asp.net controls

> ID：12221225
> 
> 赞同：0
> 
> 时间：2012-08-31T19:06:06.250
> 
> 标签：html, asp.net

Is there any template site out there that has templates utilizing specifically:Asp.net button,asp.net gridview, asp.net textbox , asp.net menu, ajax control toolkit accordion, ajax control toolkit tabs.

Has applied sample css to show what can be done to make a web application look professional that i can then leverage?. i have seen millions of templates that use css and html and images and they look good but none that are using asp.net controls.. and look good. Any websites or an example of a descent site that utilizes these controls and makes them look realy good is welcome. thanks, Damo

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T19:08:14.930

您可能想研究 .NET 皮肤和主题。我很确定您可以在 Microsoft 的网站上找到示例，或者其中一本 MCPD 考试准备书会有所帮助。

[.NET 皮肤和主题](http://msdn.microsoft.com/en-us/library/ykzx33wh%28v=vs.100%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T19:08:16.473

你可以试试这个网站，他查看代码并执行

[链接： http](http://quickstart.developerfusion.co.uk/quickstart/aspnet/) ://quickstart.developerfusion.co.uk/quickstart/aspnet/

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T20:05:24.720

我最终在所有 varous div 上使用 css 着色，如下所示，半径边框如下所示，最后 CSS 到我的 gridviews。现在看起来真的很好。我可能会将所有 asp.net 按钮更改为图像按钮并为它们提供图标。谢谢达摩

```
.TabControls

{

    margin-top:2px;  
    margin-bottom:2px;
    margin-right:2px;
    margin-left:2px;

    padding-top:2px;
    padding-bottom:2px;
    padding-right:2px;
    padding-left:2px;     
    width: auto;

    border-width: 1px;  
    border-style: solid;  
    border-radius: 5px;

        filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#FFFFFF', endColorstr='#99CCFF'); /* for IE */
    background: -webkit-gradient(linear, left top, left bottom, from(#FFF), to(#9CF)); /* for webkit browsers */
    background: -moz-linear-gradient(top,  #FFF,  #9CF); /* for firefox 3.6+ */ 
    height:120px;

} 
```

# jquery - Understanding JQuery Filter Property

> ID：12221229
> 
> 赞同：0
> 
> 时间：2012-08-31T19:06:21.093
> 
> 标签：jquery, filter

I am trying to understand how the filter works and wrote a small html code as follows

```
<div id='btnContainer'>
    <input type="button" id='btnContinue' value='Continue'>
    </input>
    <input type="button" id='btnCancel' value='Cancel'>
    </input>
</div> 
```

```
alert($('#btnContainer').filter('#btnContinue').length); 
```

This results in a alert msg of 0 instead of the 1 I expect - jquery 1.44

Pointers please

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T19:09:03.830

阅读手册：

> 将匹配元素集减少为匹配选择器或通过函数测试的元素。

选择器的匹配元素`$('#btnContainer')`仅是父元素，不包括任何子元素。如果要过滤输入，请使用：

```
alert($('#btnContainer').children().filter('#btnContinue').length); 
```

此外，`input`元素是自动关闭的......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T19:09:27.707

filter 方法通过输入到方法中的选择器减少匹配的元素集。您选择了一个项目 #btnContainer，然后尝试过滤此选择以查找 ID 为 #btnContinue 的元素。在您选择的一组元素中，没有 ID 为 #btnContinue 的元素，只有一个 ID 为 #btnContainer 的元素，这就是您收到 0 的原因。

正确使用过滤器方法是选择多个项目，例如一堆具有相同类名的 div，然后使用其他条件过滤您选择的 div。

此演示说明了过滤方法的正确使用：http: [//jsfiddle.net/8AMYx/1/](http://jsfiddle.net/8AMYx/1/)

查看 JQuery 文档以获取其他示例： [http ://api.jquery.com/filter/](http://api.jquery.com/filter/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T19:09:29.780

`$('#btnContainer')`匹配单个元素 - 您的第一个顶级 div。

[`.filter()`](http://api.jquery.com/filter)将匹配的元素集减少到仅匹配新的辅助选择器的那些元素——在这种情况下`#btnContinue`。由于顶级 div 与 id-selector 不匹配`#btnContinue`，因此新匹配的集合为空。

如果您希望初始选择器匹配元素及其所有子元素，请执行以下操作：

```
var matchedSet = $('#btnContainer').find('*').andSelf(); 
```

然后你可以这样做：

```
alert( matchedSet.filter('#btnContinue').length ); // == 1 
```

[**修正代码演示**](http://jsfiddle.net/QEXAf/)

有关更多详细信息，请参阅 jQuery 文档[`.filter()`](http://api.jquery.com/filter)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-31T19:10:23.353

它返回 0 个项目，因为没有具有 id 的项目`btnContainer`和`btnContinue`

filter 会将结果集减少为仅与`filter`选择器匹配的项目。

你可能想要这个：`$('#btnContainer input').filter('#btnContinue').length`

# jquery - 以循环模式滚动到下一个元素

> ID：12221232
> 
> 赞同：0
> 
> 时间：2012-08-31T19:06:36.663
> 
> 标签：jquery

我正在尝试使用 next 和 prev 箭头来切换图像，并使用 next() 淡化下一张图像，但是当没有图像留下时，它显然不会从第一张图像中回收。如何使此代码工作并让下一个按钮在到达该类的图像元素末尾后转到第一个图像。

我的代码：

```
$('.nextImage').live('click',function(){
    $('.main-image .zoom:visible').fadeOut(800);
    $('.main-image .zoom:visible').next().fadeIn(800);
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T19:32:32.000

只需测试是否有下一个元素，如果没有，则返回开头。

```
$('.nextImage').on('click',function(){  // .live() is deprecated
    var $img = $('.main-image .zoom:visible').last(),  // just want one
        $next = $img.next();
    if (0==$next.length) {
       $next = $img.siblings().first();
    }
    $img.fadeOut(800);
    $next.fadeIn(800);
}); 
```

[http://jsfiddle.net/tAChA/](http://jsfiddle.net/tAChA/)

# asp.net - asp:ListBox SelectedValue 未设置（动态或单击时）

> ID：12221233
> 
> 赞同：0
> 
> 时间：2012-08-31T19:06:42.390
> 
> 标签：asp.net, vb.net, list

我有一个 asp:ListBox，它是根据另一个 asp:List 框的选定值从 js 动态填充的。问题是第二个列表框总是返回“”的 SelectedValue，无论我设置 lstBox.selectedIndex = 0 还是实际选择列表中的项目。

.js 添加到列表然后设置默认选定项

```
var Option = document.createElement("option");
lstId = document.getElementById(lstId);
Option.text = lstItem;
lstId.add(Option);    
lstId.selectedIndex = 0; 
```

.vb 获取选定的值

```
Dim selSchedule As String = lstCRMSched.SelectedValue 
```

现在，由于此列表由 javascript 填充，因此我必须设置我的 @page EnableEventValidation = "false" 否则稍后的回发将失败。

**旁注：**我注意到当您使用隐藏的 div 作为基于菜单选择不隐藏的覆盖时，asp.net 不喜欢它，因为它所做的一切都需要回发，这会消除其他 div 的状态。我是否应该为每个 div 设置一个 10 个 .aspx 文件，然后使用会话从代码隐藏中切换位置以传输要在另一个 div 中显示的选定值和数据等内容？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T19:56:54.857

您可以`SelectedValue`通过对象访问下拉列表的 ，`Request`因为表单中具有名称的每个元素都在请求中提交。

你只需要这样做：

```
Dim selSchedule As String = Request[lstCRMSched.UniqueID] 
```

现在，这将起作用，因为您在页面上禁用了 EventValidation。你得到的错误是完全正常的。ASP.NET 只是确保没有人发送最初不是由服务器呈现的数据以防止攻击。如果要在页面上启用 EventValidation，则需要通过[ClientScriptManager.RegisterForEventValidation注册验证列表](http://msdn.microsoft.com/en-us/library/ms223397.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T19:33:26.850

如果您**将项目添加到****客户端**的下拉列表中，这些项目**不会保留在服务器上**！

但是您可以尝试*在*一些**隐藏的输入字段中***保存*动态添加的*项目*（文本值对）并在服务器上解析它们。有关工作示例，请参阅此[链接。](http://forums.asp.net/t/1275211.aspx)对于您的示例，您还必须将*selectedIndex***保存**在*另一个隐藏字段*中，以便能够在服务器上访问它。

 *********编辑**

**演示.aspx**

```
<script type="text/javascript">
function saveValue() {
    var hiddenField1 = document.getElementById("hiddenField1");
    hiddenField1.value = "hello world";
}
</script>
<form id="Form1" method="post" runat="server">
    <input type="hidden" id="hiddenField1" name="hiddenField1" value="" />
    <asp:Button ID="btnPostBack" runat="server" Text="PostBack" 
        OnClientClick="saveValue()" onclick="btnPostBack_Click" />
</form> 
```

**演示.aspx.cs**

```
protected void btnPostBack_Click(object sender, EventArgs e)
{
    Debug.WriteLine("Value of hiddenField1: " + Request["hiddenField1"]);
    Debugger.Break();
} 
```

这个对我有用。我`"hello world"`上了服务器。

**编辑 2**

Icarus 指出，您始终可以通过引用 Request 对象来**访问任何提交给服务器的元素，当然他是***绝对正确的*！根据您的问题，我认为您希望访问**所有***动态创建的项目*- 即 - 使用下面显示的解决方案 -**不可能**。

**aspx页面**

```
<script type="text/javascript">
    function saveToList() {
        var ListBox1 = document.getElementById("ListBox1");
        var ListBox2 = document.getElementById("ListBox2");
        var Option = document.createElement("option");
        Option.text = ListBox1.options[ListBox1.selectedIndex].text;
        ListBox2.add(Option);
        ListBox2.selectedIndex = 0;
    }
</script>
<form id="Form1" method="post" runat="server">
<asp:ListBox ID="ListBox1" runat="server">
    <asp:ListItem Text="entry1" Value="1" />
    <asp:ListItem Text="entry2" Value="2" />
    <asp:ListItem Text="entry3" Value="3" />
    <asp:ListItem Text="entry4" Value="4" />
</asp:ListBox>
<asp:ListBox ID="ListBox2" runat="server" Width="100"></asp:ListBox>
<input id="Button1" type="button" value="Save to List" onclick="saveToList()" />

<asp:Button ID="btnPostBack" runat="server" Text="PostBack" OnClick="btnPostBack_Click" /> 
```

**代码隐藏**

```
protected void btnPostBack_Click(object sender, EventArgs e)
{
    Debug.WriteLine("SelectedValue of ListBox2: " + Request["ListBox2"]);
    // no access to all other clientSide created items in ListBox2
    Debugger.Break();
} 
```*******

# windows - Can I use a .cer file obtained from Apple Developer/Xcode to codesign a Windows application?

> ID：12221240
> 
> 赞同：1
> 
> 时间：2012-08-31T19:07:24.603
> 
> 标签：windows, macos, certificate, codesign

I have a .cer file obtained through Xcode and apple developer site that I use to codesign my application on OSX. Is it possible to codesign the Windows version of the app with the same .cer file?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-21T10:15:48.377

我想从这篇文章的年龄开始，这对迈克来说已经不再重要了，但其他人可能也在尝试做同样的事情。所以这里是如何：

您需要做的就是将证书及其密钥从 Mac Dev 框中的 Keychain 中导出为 pkcs12（使用扩展名 .pfx），并将其与 windows 框上的 signtool.exe 一起使用。

如果您在执行此操作时遇到问题，可以将密钥和证书导出为 PEM 格式，然后执行以下命令来创建 windows 签名 pfx。

```
openssl pkcs12 -export -out sign_cert.pfx -inkey your_key.key -in your_cert.pem -certfile your_intermediate_chain.pem 
```

# windows - OpenCL-GL Interop memory not in sync

> ID：12221242
> 
> 赞同：0
> 
> 时间：2012-08-31T19:07:46.850
> 
> 标签：windows, opengl, opencl, ati

I'm having troubles with OpenCL-GL shared memory.

I have a application that's working in both linux and windows. The CL-GL sharing works in linux, but not in windows.

The windows driver says that it supports sharing, the examples from AMD work so it should work. My code for creating the context in windows is:

```
 cl_context_properties properties[] = {
            CL_CONTEXT_PLATFORM, (cl_context_properties)platform_(),
        CL_WGL_HDC_KHR, (intptr_t) wglGetCurrentDC(),
        CL_GL_CONTEXT_KHR, (intptr_t) wglGetCurrentContext(),
        0
    };

platform_.getDevices(CL_DEVICE_TYPE_GPU, &devices_);

context_ = cl::Context(devices_, properties, &CL::cl_error_callback, nullptr, &err);

err = clGetGLContextInfoKHR(properties, CL_CURRENT_DEVICE_FOR_GL_CONTEXT_KHR, sizeof(device_id), &device_id, NULL);

context_device_ = cl::Device(device_id);

queue_ = cl::CommandQueue(context_, context_device_, 0, &err); 
```

My problem is that the CL and GL memory in a shared buffer is not the same. I print them out (by memory mapping) and I notice that they differ. Changing the data in the memory works in both CL and GL, but only changes that memory, not both (that is both buffers seems intact, but not shared).

Also, clGetGLObjectInfo on the cl-buffer returns the correct gl buffer.

**Update:** I have found that if I create the opencl-context on the cpu it works. This seems weird, as I'm not using integrated graphics, and I don't belive the cpu is handling opengl. I'm using SDL to create the window, could that have something to do with this?

I have now confirmed that the opengl context is running on the gpu, so the problem lies elsewhere.

**Update 2:** Ok, so this is weird. I tried again today, and suddenly it works. As far as I know I didn't install any new drivers before I shut down the computer yesterday, so I don't know what could have brought this about.

**Update 3:** Right, I noticed that changing the number of particles caused this to work. When I allocated so many particles that the shared buffer is slightly above one MB it suddenly starts to work.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T15:59:42.280

I solved the problem. OpenGL buffer object must be created "after" OpenCL context was created. If "before", we can't share the OpenGL data. I use RadeonHD5670 ATI Catalyst 12.10 Maybe, ATI driver's problem because Nvidia-Computing-SDK samples don't depend on the order.

# java - Android活动被杀死，如何使其无限期运行

> ID：12221249
> 
> 赞同：1
> 
> 时间：2012-08-31T19:08:02.373
> 
> 标签：java, android

我有一个类似于数码相框的应用程序。它可以展示一个静态站点，只是一个显示本地 HTML 的 web 视图。我希望它不确定地运行，我已经获得了唤醒锁，但它看到一段时间后应用程序不断被杀死。我如何防止 android 杀死我的长时间运行活动？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-31T19:15:16.153

你应该。

1）可能有一个正在运行的服务。2) 使用 AlarmManager/Receiver 来保证有周期性活动。3）启动服务为粘性。4）了解android是800磅的大猩猩，如果它想关闭你的应用程序，它可以。

# python - wxPython：sizer，网格让我发疯

> ID：12221251
> 
> 赞同：4
> 
> 时间：2012-08-31T19:08:11.327
> 
> 标签：python, user-interface, wxpython

我正在学习wxPython，并且正在尝试编写一个学生信息管理器。我已经编写 CLI 程序很多年了，所以我没有太多制作 GUI 的经验。

首先，我为我的 UI 绘制了一个蓝图。 ![我的 UI 蓝图](../Images/c226a7ad3e4f41378fb17566267b09d3.png)

然后，我尝试在 wxPython 中实现它，但 sizer 真的让我发疯了。我以前从未使用过任何类型的sizer！（Visual Basic 是我学习的第一门语言 ^__^）

最后，我写了这段代码：

```
import wx
from wx.lib import sheet

class Sheet(sheet.CSheet):
    def __init__(self, parent, row, col):
        sheet.CSheet.__init__(self, parent)
        self.row = self.col = 0
        self.SetNumberRows(row)
        self.SetNumberCols(col)

        for i in range(row):
            self.SetRowSize(i, 20)

class ChartPanel(wx.Panel):
    '''This is the panel for the chart, but the still working on it. '''
    def __init__(self, parent):
        wx.Panel.__init__(self, parent)

class MainPanel(wx.Panel):
    def __init__(self, parent):
        wx.Panel.__init__(self, parent)
        sizer = wx.GridBagSizer(5, 5)

        # However, just put the chart into main frame.
        chart = ChartPanel(self)
        chart.SetBackgroundColour("blue")

        Students = Sheet(self, 5, 2)
        History = Sheet(self, 2, 2)

        button1 = wx.Button(self, label="Button #1")
        button2 = wx.Button(self, label="Button #2")
        button3 = wx.Button(self, label="Button #3")

        sizer.Add(Students, pos=(0, 0), span=(5, 2), flag=wx.EXPAND)
        sizer.Add(History, pos=(0, 2), span=(2, 2), flag=wx.EXPAND)
        sizer.Add(chart, pos=(2, 2), span=(3, 2), flag=wx.EXPAND)

        sizer.Add(button1, pos=(5, 0), span=(1, 1))
        sizer.Add(button2, pos=(5, 1), span=(1, 1))
        sizer.Add(button3, pos=(5, 2), span=(1, 1))

        sizer.AddGrowableCol(5)
        sizer.AddGrowableRow(5)

        self.SetSizer(sizer)
        self.Fit()

class MainFrame(wx.Frame):
    def __init__(self):
        wx.Frame.__init__(self, None, title="BoxSizer Example")
        panel = MainPanel(self)
        self.Show()

if __name__ == "__main__":
    app = wx.App(False)
    frame = MainFrame()
    app.MainLoop() 
```

但是这个程序是丑陋和错误的。有人可以教我如何以一种聪明的方式使用sizer，并帮助我修改我的代码吗？

非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-01T02:45:35.643

首先，我不得不删除你的`AddGrowableColumn()`和`AddGrowableRow()`行，因为它们给了我错误。我阅读了这些函数的[文档](http://wxpython.org/docs/api/wx.FlexGridSizer-class.html#AddGrowableRow)，我认为你不想调用它们（但只有你知道你希望你的 UI 看起来如何）。

实际上，您似乎对 sizers 有很好的掌握。问题是`MainPanel`不知道 的大小`MainFrame`，所以你的部分 UI 被切断了。解决这个问题很容易，你有两个选择。

**选项 1**
在`MainFrame.__init__()`中，放置`panel`在 sizer 内。这将允许 sizer 根据 的大小设置 的`panel`大小`MainFrame`。现在它们的大小之间没有联系。更改将如下所示：

```
class MainFrame(wx.Frame):
    def __init__(self):
        wx.Frame.__init__(self, None, title="BoxSizer Example")
        panel = MainPanel(self)
        sizer = wx.BoxSizer(wx.HORIZONTAL)
        sizer.Add(panel)
        self.SetSizer(sizer) #this allows panel and MainFrame to influence each other's sizes
        self.Show()
        self.Fit() 
```

**选项 2**
`MainFrame`中只有 1 个对象，一个`MainPanel`. 那么为什么不将这两个类合二为一呢？只需将所有代码从`MainPane1`into`MainFrame`然后删除即可`MainPanel`。重要的部分是`MainPanel.__init__()`调用`SetSizer()`. 如果您将该代码移入，`MainFrame.__init__()`那么您仍然完全按照我在选项 1 中的建议进行操作，但您的课程更少。看起来像这样：

```
class MainFrame(wx.Frame):
    def __init__(self):
        wx.Frame.__init__(self, None, title="BoxSizer Example")
        sizer = wx.GridBagSizer(5, 5)

        # However, just put the chart into main frame.
        chart = ChartPanel(self)
        chart.SetBackgroundColour("blue")

        Students = Sheet(self, 5, 2)
        History = Sheet(self, 2, 2)

        button1 = wx.Button(self, label="Button #1")
        button2 = wx.Button(self, label="Button #2")
        button3 = wx.Button(self, label="Button #3")

        sizer.Add(Students, pos=(0, 0), span=(5, 2), flag=wx.EXPAND)
        sizer.Add(History, pos=(0, 2), span=(2, 2), flag=wx.EXPAND)
        sizer.Add(chart, pos=(2, 2), span=(3, 2), flag=wx.EXPAND)

        sizer.Add(button1, pos=(5, 0), span=(1, 1))
        sizer.Add(button2, pos=(5, 1), span=(1, 1))
        sizer.Add(button3, pos=(5, 2), span=(1, 1))

        #I removed these lines because they gave me errors and I don't understand why you needed them
        #sizer.AddGrowableCol(5) 
        #sizer.AddGrowableRow(5)

        self.SetSizer(sizer)
        self.Fit()
        self.Show() 
```

最后，我不喜欢使用`wx.GridBagSizer`. 我更喜欢使用嵌套`wx.BoxSizer`对象。我发现我获得了更多的控制权，它使我可以仅从代码中可视化我的 UI 的外观，因为我将 UI 分成更小的块。但是，**这是个人喜好问题，您应该使用您理解和熟悉的任何方法**。查看您的蓝图，我看到有两列。所以首先我们需要一个sizer来处理这些列。然后，每一列可以分成两行。并且按钮需要一个更大的尺寸来容纳它们。代码如下所示：

```
def __init__(self, parent):
    wx.Panel.__init__(self, parent)
    mainSizer = wx.BoxSizer(wx.HORIZONTAL) #this will make the columns

    rightSizer = wx.BoxSizer(wx.VERTICAL) #this will be the rows on the right
    # However, just put the chart into main frame.
    chart = ChartPanel(self)
    chart.SetBackgroundColour("blue")
    History = Sheet(self, 2, 2)

    rightSizer.Add(History, 1, wx.EXPAND)
    rightSizer.Add(chart, 1, wx.EXPAND)

    leftSizer = wx.BoxSizer(wx.VERTICAL) #this will be the rows on the left
    Students = Sheet(self, 5, 2)

    buttonSizer = wx.BoxSizer(wx.HORIZONTAL) #this will organize the buttons
    button1 = wx.Button(self, label="Button #1")
    button2 = wx.Button(self, label="Button #2")
    button3 = wx.Button(self, label="Button #3")

    buttonSizer.Add(button1)
    buttonSizer.Add(button2)
    buttonSizer.Add(button3)

    leftSizer.Add(Students, 1, wx.EXPAND)
    leftSizer.Add(buttonSizer)

    mainSizer.Add(leftSizer, 1, wx.EXPAND)
    mainSizer.Add(rightSizer, 1, wx.EXPAND)

    self.SetSizer(mainSizer)
    self.Fit() 
```

# arm - AOSP 中的工具链

> ID：12221263
> 
> 赞同：3
> 
> 时间：2012-08-31T19:09:24.610
> 
> 标签：arm, android-source, toolchain

我正在开发 AOSP 4.0.4 分支并为 PandaBoard 平台做一些定制。我正在查看用于构建 Android 文件系统映像的 ARM 跨工具链，我看到了 2 个主要变体。

```
arm-eabi-4.x (set in ARM_EABI_TOOLCHAIN env var)
arm-linux-androideabi-4.x (set in ANDROID_EABI_TOOLCHAIN env var) 
```

我搜索了很多地方，但找不到有关工具链的任何信息。

1.  按照命名约定，我猜测以下内容 - 这些是否正确？

    *   arm-eabi- 是一个裸机工具链
    *   arm-linux-androideabi- 是用于在 AFS 中构建与仿生 libc 以及用于 NDK 的工具链相关的所有本机代码的工具。
2.  有人可以给我使用裸机工具链的 AOSP 树中的代码示例（除了 u-boot、x-loader、内核 - 所有这些都构建在单独的树中）？

3.  我将对这些工具链进行小幅修改，因此需要重建它们。有人可以指出这些工具链的存储库和构建说明吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-09-14T10:19:32.910

1.  是的你是对的。`arm-eabi-`是一个裸机工具链，例如用于构建 u-boot。

2.  我不确定是否有

3.  我找不到`arm-linux-androideabi-4.x`准确的信息，但您可以查看此链接：[https ://android.googlesource.com/platform/prebuilts/gcc/linux-x86/arm/](https://android.googlesource.com/platform/prebuilts/gcc/linux-x86/arm/)

我希望它有帮助:)

# java - 使用当前壁纸作为动态壁纸背景

> ID：12221270
> 
> 赞同：2
> 
> 时间：2012-08-31T19:09:52.253
> 
> 标签：java, android, bitmap, android-canvas, live-wallpaper

我使用以下代码获取当前壁纸：

```
 final WallpaperManager wallpaperManager = WallpaperManager.getInstance(this);
  final Drawable wallpaperDrawable = wallpaperManager.getDrawable(); 
```

如何从中创建位图？

就像我从 res 文件夹创建位图时一样，我使用它

```
 Resources res = getApplicationContext().getResources();
    b = BitmapFactory.decodeResource(res, R.drawable.wall); 
```

我应该使用什么代码将当前壁纸放入位图中，以便可以在画布上绘制并将其用作动态壁纸背景？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-31T19:34:53.683

fetched`Drawable`应该真的是一个[`BitmapDrawable`](http://developer.android.com/reference/android/graphics/drawable/BitmapDrawable.html). `instanceof`如有必要，您可以使用来验证这一点。

既然如此，你所要做的就是：

```
final Drawable wallpaperDrawable = wallpaperManager.getDrawable();
final Bitmap wallpaperBitmap = ((BitmapDrawable) wallpaperDrawable).getBitmap(); 
```

*编辑*：如果事实证明`Drawable`is NOT a `BitmapDrawable`，您可以使用以下方法对其进行转换（在[此答案](https://stackoverflow.com/a/10600736/1438733)中找到，归功于[André](https://stackoverflow.com/users/259237/andre)）：

```
public static Bitmap drawableToBitmap(Drawable drawable) {
    if (drawable instanceof BitmapDrawable) {
        return ((BitmapDrawable)drawable).getBitmap();
    }

    Bitmap bitmap = Bitmap.createBitmap(drawable.getIntrinsicWidth(), drawable.getIntrinsicHeight(), Config.ARGB_8888);
    Canvas canvas = new Canvas(bitmap); 
    drawable.setBounds(0, 0, canvas.getWidth(), canvas.getHeight());
    drawable.draw(canvas);

    return bitmap;
} 
```

# jboss - Jboss JMS 内存不足

> ID：12221273
> 
> 赞同：0
> 
> 时间：2012-08-31T19:10:00.733
> 
> 标签：jboss, jms

我正在使用 JBOSS 5.1。我们正在使用 JMS(topic) 发布消息，JMS 客户端将接收这些消息，具体来说我使用的是持久订阅。它适用于许多系统，但在一个系统上我总是在两天后看到这个错误。

```
2012-08-30 12:59:27,045 WARNING [sun.rmi.transport.tcp] (RMI TCP Accept-1101) RMI TCP Accept-11101: accept loop for ServerSocket[addr=/0.0.0.0,port=0,localport=11101] throws
java.lang.OutOfMemoryError: unable to create new native thread
    at java.lang.Thread.start0(Native Method)
    at java.lang.Thread.start(Thread.java:597)
    at java.util.concurrent.ThreadPoolExecutor.addIfUnderMaximumPoolSize 
```

不知道为什么它只发生在一个系统上，并且只有一个 JMS 客户端连接到 Jboss 以侦听消息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T17:22:45.357

你应该提到你的系统的细节，特别是你正在运行的操作系统和你的 jboss 启动脚本中包含的 Java 启动参数。很有可能你的线程资源/文件描述符用完了，或者你设置了一个不够的线程堆栈。 [看到这个帖子](https://stackoverflow.com/questions/12221273/jboss-jms-out-of-memory) 希望它有帮助

# eclipse - Eclipse Juno 中的菜单项不起作用 - 无响应

> ID：12221277
> 
> 赞同：1
> 
> 时间：2012-08-31T19:10:04.877
> 
> 标签：eclipse, ide, eclipse-juno

我似乎无法在`Eclipse Juno`. 我无法运行我的项目，即使我尝试做一些事情，比如`Windows -> Preferences`没有弹出首选项，我也没有得到任何回应。我已经尝试过`Refresh`,`Clean`和重新启动 Eclipse 和我的系统。依然没有。我通过命令行打开了 Eclipse 并得到了一些输出，但不知道它是什么意思。这就是它给我的：

```
Aug 31, 2012 3:01:50 PM com.aragost.javahg.log.JULLogger info
INFO: Copy resource /javahg.py to /tmp/1346439710466-0/javahg.py
Aug 31, 2012 3:01:50 PM com.aragost.javahg.log.JULLogger info
INFO: Command server started: /home/jordan/Workspaces/pos
Aug 31, 2012 3:01:50 PM com.aragost.javahg.log.JULLogger info
INFO: runcommand(22ms) status --modified --added --removed --deleted --unknown --clean 
Aug 31, 2012 3:01:50 PM com.aragost.javahg.log.JULLogger info
INFO: Random bytes generated: #CEa68#=[;bCQXECR%&^
Aug 31, 2012 3:01:50 PM com.aragost.javahg.log.JULLogger info
INFO: Copy resource /styles/changesets.style to /tmp/1346439710466-0/styles/changesets.style
Aug 31, 2012 3:01:50 PM com.aragost.javahg.log.JULLogger info
INFO: Copy resource /styles/changesets-eager.style to /tmp/1346439710466-0/styles/changesets-eager.style
Aug 31, 2012 3:01:50 PM com.aragost.javahg.log.JULLogger info
INFO: runcommand(5ms) parents --debug --style /tmp/1346439710466-0/styles/changesets.style 
Aug 31, 2012 3:01:50 PM com.aragost.javahg.log.JULLogger info
INFO: runcommand(2ms) branch 
Aug 31, 2012 3:01:50 PM com.aragost.javahg.log.JULLogger info
INFO: runcommand(3ms) resolve --list 
Aug 31, 2012 3:01:52 PM com.aragost.javahg.log.JULLogger info
INFO: runcommand(19ms) parents --debug --style /tmp/1346439710466-0/styles/changesets.style 
Aug 31, 2012 3:01:52 PM com.aragost.javahg.log.JULLogger info
INFO: Copy resource /styles/tags.style to /tmp/1346439710466-0/styles/tags.style
Aug 31, 2012 3:01:52 PM com.aragost.javahg.log.JULLogger info
INFO: runcommand(4ms) log --debug --style /tmp/1346439710466-0/styles/tags.style --rev 899668f6b2cdd3383d823a341c746a2a29e1f841 
Aug 31, 2012 3:01:52 PM com.aragost.javahg.log.JULLogger info
INFO: runcommand(2ms) parents --debug --style /tmp/1346439710466-0/styles/changesets.style 
Aug 31, 2012 3:01:53 PM com.aragost.javahg.log.JULLogger info
INFO: runcommand(10ms) parents --debug --style /tmp/1346439710466-0/styles/changesets.style
Aug 31, 2012 3:02:24 PM com.aragost.javahg.log.JULLogger info
INFO: Command server stopped: /home/jordan/Workspaces/pos
Aug 31, 2012 3:02:42 PM com.aragost.javahg.log.JULLogger info
INFO: Command server started: /home/jordan/Workspaces/pos
Aug 31, 2012 3:02:42 PM com.aragost.javahg.log.JULLogger info
INFO: runcommand(6ms) parents --debug --style /tmp/1346439710466-0/styles/changesets.style 
Aug 31, 2012 3:03:12 PM com.aragost.javahg.log.JULLogger info
INFO: Command server stopped: /home/jordan/Workspaces/pos 
```

任何人都知道 Eclipse 有什么问题以及如何让我的程序再次运行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T15:18:14.880

当您尝试查看首选项时，请打开“错误日志”视图以查看发生了什么异常。然后，您可以输入错误或卸载导致问题的任何插件。

# python - 发送低级原始tcp数据包python

> ID：12221285
> 
> 赞同：1
> 
> 时间：2012-08-31T19:10:34.763
> 
> 标签：python

我最近一直在为原始数据包开发一个程序。我们最近有一个关于原始数据包的讲座，所以我一直在努力学习并完全按照我的教授告诉我的去做。我的程序有问题，它出现一个错误，说需要目标地址，它是原始的，所以我不想做 socket.connect(destaddr) ，即使这会修复错误。这是我的代码：这是类和函数：

```
#not real mac address to protect privacy also removed preamble
class packet(object):
    b = ""
    def __init__(self, payload):
        self.payload = payload

    def ether(self):
        #preamble = "55555555555555D5" 
        macdest = "123456789101" #my mac address - needed to remove colons 
        macsource = "123456789101" #router mac address without colons
        ethertype = "0800" #removed 0x because it is not needed
        fcs = "" #frame check sequence none so far
        frame = macdest+macsource+ethertype
        return frame

    def ip(self): #in hexadecimal
        version = "4" #ipv4 hex
        ihl = "5" #header length hex
        dscp = "00" #default
        ecn = "00" #default
        length = "36" #ether-24 + ip-20 + tcp-30 = 54 to hexa = 35
        idip="0000" #random id
        flags = "40" #dont fragment flag is 2 to hex is 4
        offset = "00" #space taker
        ttl = "40"#hex(64) = 40
        protocol = "06" #for tcp
        checksum = "0000"
        ipaddrfrom = "c0a8010a"
        ipaddrto =   "c0a80101"
        datagram = version+ihl+dscp+ecn+length+idip+flags+offset+ttl+protocol+checksum+ipaddrfrom+ipaddrto
        return datagram

    def tcp(self):
        portsrc = "15c0" #5568
        portdest = "0050" #80
        syn = "00000000" 
        ack = "00000000"
        nonce = "80"
        fin = "10"
        windowscale = "813b"
        checksum = "0000"
        segment = portsrc+portdest+syn+ack+nonce+fin+windowscale + checksum
        return segment

    def getpacket(self):
        frame = self.ether()
        datagram = self.ip()
        segment = self.tcp()
        payload = self.payload
        packet = frame+datagram+segment+payload

        a = 0
        b = ""
        for char in packet:
            a = a+1
            b = b + char
            if a == 4:
                b = b + " "
                a=0
        self.fmtpacket = b
        return packet

def raw():
    s = socket(AF_INET, SOCK_RAW, IPPROTO_IP)
    s.bind(('192.168.1.10', 0))
    pckt = packet("")
    netpacket = pckt.getpacket()
    print "Sending: " + pckt.fmtpacket
    print ""
    s.sendall(netpacket)
    data = s.recv(4096)
    print data 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T20:13:45.783

如果您的教授对此表示满意，您可能会发现[Scapy](http://www.secdev.org/projects/scapy/ "斯卡皮")在 python 中创建原始数据包时更容易使用。

从他们的网站：

> Scapy 是一个强大的交互式数据包操作程序。它能够伪造或解码大量协议的数据包，通过网络发送它们，捕获它们，匹配请求和回复等等。它可以轻松处理大多数经典任务，如扫描、跟踪路由、探测、单元测试、攻击或网络发现（它可以替代 hping、85% 的 nmap、arpspoof、arp-sk、arping、tcpdump、tethereal、p0f 等）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-21T11:09:00.743

要发送的数据包应包含实际字节而不是字符串。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-31T19:21:04.133

是否有理由绑定到“0.0.0.0”？创建原始套接字时，您需要将其绑定到接口。

我注意到的一件事是您需要 '\x' 十六进制前缀。

现在，您正在将字符串在一起。

例如，在 ip() 中，版本 + ihl = '45'。这是一个字符串，而不是十六进制值。当您将其作为原始数据包发送时，这是两个字节，而不是您想要的字节。你想发送'\x45'，而不是'45'。

# html - CSS负边距，我做错了什么？

> ID：12221286
> 
> 赞同：0
> 
> 时间：2012-08-31T19:10:34.790
> 
> 标签：html, css

我正在尝试实现 1 列灵活/1 列固定布局。'col-a' 应该是灵活的，占用 100% - 110px，'col-b' 应该是固定的并正确对齐。

我试图使用负边距，但运气不佳。

```
<div class="cont">

    <div class="col-a">
    Be flexible 
    </div>

    <div class="col-b">
    Be fixed
    </div>

</div>​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​

.cont {
background-color: #00f;
padding: 10px;
overflow:hidden;
}

.col-a {
background-color: #0ff;
padding-right: 110px;
margin-right: -110px;
float: left;
}

.col-b {
background-color: #ff0;
width: 110px;
float: left;
} 
```

可以只使用这个标记来完成吗？/*找到答案*/这是解决方案

```
.cont {
  background-color: #00f;
  overflow:hidden;
  padding: 10px;
}

.col-a {
  width: 100%;
  background-color: #0ff;
  margin-right: -110px;
  float: left;
}

.col-b {
  background-color: #ff0;
  width: 110px;
  float: right;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T19:20:08.617

我不会为此使用负边距。

这就是我将如何设置它。

1.  将列父容器设置为相对位置。
2.  将 A 列的 padding-right 设置为 110px（为 B 列腾出空间）
3.  将 B 列设置为绝对位于顶部，右侧固定宽度为 110 像素。

这将使您的 A 列水平扩展 100%，同时在右侧为 B 列留出空间。

这是我上面概述的一个例子：http: [//jsfiddle.net/NPn8d/](http://jsfiddle.net/NPn8d/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T19:26:36.210

那么，这样的事情怎么样。

```
<style type="text/css"> 
     .cont{position:relative;}
     .col-a{
             border:1px solid #0000ff;
             width:auto;
             margin:0,110,0,0;
           } 
     .col-b{
             border:1px solid #ff0000;
             width:110px;
             float:right;
             top:0;
             position:absolute;
             margin:0,0,0,-110
     } 
</style> 
<div class="cont"> 
    <div class="col-a">Be flexible</div> 
    <div class="col-b">Be fixed</div> 
</div> 
```

# asp.net-mvc - 使用 NHibernate 插入 n:n 关系

> ID：12221287
> 
> 赞同：0
> 
> 时间：2012-08-31T19:10:40.317
> 
> 标签：asp.net-mvc, nhibernate, fluent-nhibernate

我有 Orders、Items 和 OrderItems 实体，Orders 和 Items 表之间有 n:n 关系。我正在使用 Fluent Hibernate 进行映射，在“订单”实体中有“列表”属性，该属性具有“保护集”。我在插入时面临以下问题。

```
new Order.Items.Add(alreadyexistingitem); 
```

由于它已经存在项目，在 orderitems 表中，需要将一条记录插入到 orderitems 表中，其中包含新的 orderid 和现有的项目 id。但是只有新的订单详细信息被插入到订单表中，而不是关联表中。

在订单实体中为“items”包设置了“Inverse”属性。所以，我需要在添加如下项目时附加新添加的订单，但我该怎么做，因为它是带有保护集的列表对象。

```
Orders.Items.Add(alreadyexistingitem, *order = "neworder"*); 
```

下面是映射：

```
 model.Override<Order>(m =>
   {      

                    m.HasManyToMany(c => c.Items)
                        .Table(Constants.TABLE_PREFIX + "OrderItem")
                        .Inverse()
                        .Cascade.AllDeleteOrphan();
    });

  model.Override<Item>(m => m.HasManyToMany(c => c.Orders)
                                            .Table(Constants.TABLE_PREFIX + "OrderItem")
                                            .Cascade.None()); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T19:16:52.153

作为初步答案，NHibernate 足够聪明，可以知道何时在两个地方使用了相同的对象引用。您只需要在 Order 和 Item 之间的映射中建立一个“HasManyToMany”关系。

可能不应该在订单方面使用逆。Inverse 告诉 NHibernate，关系的另一方有权定义和破坏关系。订单有物品；项目无法“选择”它们所属的顺序。

# active-directory - 如何获取 LDAP/AD 中的嵌套组？

> ID：12221288
> 
> 赞同：3
> 
> 时间：2012-08-31T19:10:39.847
> 
> 标签：active-directory, ldap

我们有一个特定用户的 LDAP 登录问题，我怀疑这是由于 LDAP 中的循环组分配，即用户被分配到组 A、B、C、D。组 A 包含子组 E、F、G，组 E 再次包含组 A。

如果我查询用户，我可以看到他被分配了 50 多个组，每个组可能包含更多组，每个组可能包含更多......

我的问题是，如果有一个查询我可以运行以获取这些主要组中的嵌套组，而不是去每个组并手动执行？

服务器是AD

![在此处输入图像描述](../Images/5c0f5de2ce51d6e550608e9ea31ca1f4.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-03T05:06:30.187

要查找“user1”所属的所有组（[对此](https://stackoverflow.com/a/6289205/608772)答案的改编，请参阅[AD 搜索过滤器](http://msdn.microsoft.com/en-us/library/aa746475%28v=vs.85%29.aspx)）：

*   将 base 设置为组容器 DN；例如根 DN (dc=dom,dc=fr)
*   将范围设置为子树
*   使用以下过滤器：（成员：1.2.840.113556.1.4.1941:=cn=user1,cn=users,DC=x）

**LDIFDE.EXE**示例（Windows 上的本机命令行 AD 搜索）：****

 **```
ldifde -f t.txt -d "DC=dom,DC=fr" -r "(member:1.2.840.113556.1.4.1941:=CN=jblanc,OU=MonOu,DC=dom,DC=fr)" 
```

**备注**：据我所知，括号中的用户 DN 名称存在小的语法差异。'1.2.840.113556.1.4.1941' 在 W2K3 SP1 中不起作用，它开始在 SP2 中起作用。我认为它与 W2K3 R2 相同。我在这里用 W2K8R2 测试。

使用 Apache 目录工作室： ![AD中的Apache LDAP递归查询](../Images/3f49a6d5af607dcac2059399a2e78e87.png)

结果 ：

![AD中的Apache LDAP递归查询结果](../Images/d73a79807ab0351755b4f24dd3171586.png)**

# ruby-on-rails - 预计是 != 到 . 测试失败

> ID：12221292
> 
> 赞同：1
> 
> 时间：2012-08-31T19:11:12.497
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我的测试如下：

```
test "should post make_admin" do
    user = FactoryGirl.create(:user, admin: true)
    sign_in(user)
    before_value = user.admin
    post :make_admin, id: user.id
    after_value = user.admin
    assert_not_equal before_value, after_value
    assert_response :redirect
  end 
```

控制器看起来像这样：

```
def make_admin
    user = User.find_by_id(params[:id])
    user.toggle!(:admin)
    redirect_to static_pages_user_index_path
  end 
```

但我不断收到此错误：

```
Failure:
test_should_post_make_admin(StaticPagesControllerTest) [..../functional/static_pages_controller_test.rb:48]:
<true> expected to be != to
<true>. 
```

关于我做错了什么的任何想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-31T19:29:34.700

我会替换：

```
after_value = user.admin 
```

和：

```
after_value = user.reload.admin 
```

# c# - 时间：2019-04-01 标签：c#regex crazyness

> ID：12221293
> 
> 赞同：-1
> 
> 时间：2012-08-31T19:11:23.137
> 
> 标签：c#, sql-server-2008

我正在对一个大字符串进行正则表达式匹配。那么，问题是我可以重复相同的表达次数有限制吗？在这种情况下，我重复`[+-]?((\d+(\.\d*)?)|\.\d+)([eE][+-]?[0-9]+)?`了 10 次以上。它在 2e-007 点不匹配。但是，如果您单独使用数字，则表达式将匹配。这让我发疯，想知道有没有更简单的方法。您可以使用正则[表达式看到这一点](http://gskinner.com/RegExr/)

示例输入

> 为估值规范“RiskSettings1D”持有“xxxxx”是有问题的。由于校准错误，将忽略市场价格并使用历史波动率。期权是欧洲看跌期权。假设期权价格为 2.000000000000001e-005，执行价格为 100，标的价格为 64.77914897148099，无风险利率为 0.01329492130017084，持有成本为 0，到期年数为 0.005479452054794521。零波动的价格是 35.2208253705315。波动率为 500 的价格为 36.96626067864203。模型没有校准到 2e-007 的给定市场价格。实际总数为 0.352208。

正则表达式：

> *为估值规范“[^”]*持有“[^” ]是有问题的。[\s]*给定的市场价格将被忽略，由于校准错误，将使用历史波动率。[\s]*选项是(n)? [^.]* .[\s]*给定期权价格为 [+-]?((\d+(.\d* )?)|.\d+)([eE][+-]?[0-9]+) ?, 行使价为 [+-]?((\d+(.\d*)?)|.\d+)([eE][+-]?[0-9]+)?, 标的价格为 [+ -]?((\d+(.\d*)?)|.\d+)([eE][+-]?[0-9]+)?, 无风险利率为 [+-]?((\ d+(.\d*)?)|.\d+)([eE][+-]?[0-9]+)?, 携带成本为 [+-]?((\d+(.\d* )?)|.\d+)([eE][+-]?[0-9]+)?，有效期为 [+-]?((\d+(.\d*)?)|.\ d+)([eE][+-]?[0-9]+)?.[\s]*波动率为零的价格是 [+-]?((\d+(.\d* )?)|.\d+) ([eE][+-]?[0-9]+)?.[\s]*波动率为 500 的价格为 [+-]?((\d+(.\d* )?)|.\d+)([eE][+-]?[0-9]+)?.[\s]*Models没有校准到给定的市场价格

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T21:17:33.583

我稍微调整了你的正则表达式（`"[^"]" -> "[^"]+"`和类似的，将所有空格设为零或多，这在你提供的那个中没有结果，并添加了似乎丢失的输入的最后一部分？）这与示例相匹配输入。它在 RegExr 中不起作用，我不确定捕获组的数量是否有限制或类似的东西？相反，我使用了 rubular.com，请在此处查看确切的查询：[http ://rubular.com/r/OHr0UdI1lO](http://rubular.com/r/OHr0UdI1lO)

> 持有 "[^"]+" 为估值规范 "[^"]+" 创建有问题。\s*给定的市场价格将被忽略，由于校准错误，将使用历史波动率。\s*选项是 a( n)? [^.]+.\s*给定期权价格为 [+-]?((\d+(.\d+)?)|.\d+)([eE][+-]?[0-9]+) ?,\s*行使价为 [+-]?((\d+(.\d+)?)|.\d+)([eE][+-]?[0-9]+)?,\s*基础价格为 [+-]?((\d+(.\d+)?)|.\d+)([eE][+-]?[0-9]+)?,\s*无风险利率为 [ +-]?((\d+(.\d+)?)|.\d+)([eE][+-]?[0-9]+)?,\s*进位成本为 [+-]? ((\d+(.\d+)?)|.\d+)([eE][+-]?[0-9]+)?,\s*有效期为 [+-]?((\d+ (.\d+)?)|.\d+)([eE][+-]?[0-9]+)?.\s*波动率为零的价格为 [+-]?((\d+(.\ d+)?)|.\d+)([eE][+-]?[0-9]+)?.\s*波动率为 500 的价格为 [+-]?((\d+(.\d+)? )|.\d+)([eE][+-]?[0-9]+)?.

# javascript - 如何使用 jQuery 以文字形式显示现金价值？

> ID：12221295
> 
> 赞同：2
> 
> 时间：2012-08-31T19:11:34.397
> 
> 标签：javascript, jquery

> **可能重复：**
> [数字到单词 - jquery](https://stackoverflow.com/questions/7257575/number-to-word-jquery)

我还想用文字显示收据中的总账单金额。如何使用 jQuery 实现它？

前任。

```
Item         Qty      Unit Price            Line Price
------------------------------------------------------
Pen           2         100                 200
Note Book     3          30                  90
------------------------------------------------------
Total                                       290
In Words: Rupees Two Hundred and Ninety Only 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-31T20:06:20.487

[工作演示](http://javascript.about.com/library/bltoword.htm)

```
<form name="test"><input type="text" size="18" value="" name="inum"><br><br><input type="button" onclick="test.rnum.value = toWords(test.inum.value);" value="To Words"><br><br><textarea rows="5" cols="40" name="rnum"></textarea></form><body>

<script type="text/javascript">
// American Numbering System
var th = ['', 'thousand', 'million', 'billion', 'trillion'];

var dg = ['zero', 'one', 'two', 'three', 'four', 'five', 'six', 'seven', 'eight', 'nine'];

var tn = ['ten', 'eleven', 'twelve', 'thirteen', 'fourteen', 'fifteen', 'sixteen', 'seventeen', 'eighteen', 'nineteen'];

var tw = ['twenty', 'thirty', 'forty', 'fifty', 'sixty', 'seventy', 'eighty', 'ninety'];

function toWords(s) {
    s = s.toString();
    s = s.replace(/[\, ]/g, '');
    if (s != parseFloat(s)) return 'not a number';
    var x = s.indexOf('.');
    if (x == -1) x = s.length;
    if (x > 15) return 'too big';
    var n = s.split('');
    var str = '';
    var sk = 0;
    for (var i = 0; i < x; i++) {
        if ((x - i) % 3 == 2) {
            if (n[i] == '1') {
                str += tn[Number(n[i + 1])] + ' ';
                i++;
                sk = 1;
            } else if (n[i] != 0) {
                str += tw[n[i] - 2] + ' ';
                sk = 1;
            }
        } else if (n[i] != 0) {
            str += dg[n[i]] + ' ';
            if ((x - i) % 3 == 0) str += 'hundred ';
            sk = 1;
        }
        if ((x - i) % 3 == 1) {
            if (sk) str += th[(x - i - 1) / 3] + ' ';
            sk = 0;
        }
    }
    if (x != s.length) {
        var y = s.length;
        str += 'point ';
        for (var i = x + 1; i < y; i++) str += dg[n[i]] + ' ';
    }
    return str.replace(/\s+/g, ' ');

}
    </script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T19:35:48.813

```
<!doctype html>
<html lang= "en">
<head>
<meta charset= "utf-8">
<title> Number Strings</title>
<style>
body{
    font-size:120%;
    margin:0 1em;   
}
h1 span{
    font-weight: bold; 
    color: navy; 
    font-size:smaller;
}
h2{
    border-top:5px navy ridge;
    margin:1em 0;
}
div{
    margin:1ex;
    position:relative;
}
label, input, button, textarea, select{
    font-size:1em;
    color:black;
    font-weight:600;
}
label, button{
    cursor:pointer;
    text-decoration:none;
    color:black;
    font-size:1em;
    font-weight:bold;
}
p{margin:1em 0}
button:hover, button:focus{
    color:red
}
button:disabled, button:hover:disabled, button:focus:disabled{
    cursor:default;
    color:gray;
}
textarea, textarea[readonly]{
    min-width:500px;
    width:90%;
    overflow-y:scroll;
    margin:1ex auto;
    font-weight:600;
    background-color:white;
    color:black;
    font-family:Arial, sans-serif;
}
#numstringDiv{
    background-color:white;
    color:black;
    position:relative;
    padding:1em;
    max-width:1200px;
}
@media all and(max-width:1000px){
    body{
        font-size:100%;
    }
}
</style>
<script>
/* US English words from numbers*/
Numword={
    cashwords: function(n){
        n= Number(n);
        if(!n) return NaN;
        var I= Math.floor(n),
        dec= n%1, str= '', r= '';
        str= I.toWords() || '';
        if(dec){
            dec= dec.toFixed(2)*100;
            r= dec.toWords();
        }
        if(I> 0){
            str+= ' dollar';
            if(I> 1) str+= 's';
            if(r) str+= ' and ';
        }
        if(r){
            str+= r+' cent';
            if(dec> 1) str += 's';
        }
        return str;
    },
    forget: function(){
        delete Numword.vocab;
        return true;
    },
    fracValue: function(s, prec){
        var I= 0, dec= 0, M=/(\d+ +)?(\d+)\/(\d+)$/.exec(s);
        if(M){
            if(M[1]) I= +(M[1].trim());
            dec= M[2]/M[3];
            if(typeof prec== 'number') dec= +(dec.toFixed(prec));
        }
        return I+dec;
    },
    getExponent: function(s, sign){
        var rx=  /(\d+(\.\d+)?|\.\d+)[eE]([+-]?\d+)/, num, pow,
        M= rx.exec(s);
        if(M){
            num= (+M[1]).toWords();
            pow= (+M[3]).toWords().ordinal();
            return sign+ num+ ' times ten to the '+ pow;
        }
        return NaN;
    },
    getWords: function(input, ord){
        s= String(input).trim();
        var d= s.replace(/(,| and)/g, ''),
        Num, I, dec, str= '', r= '',
        M, d2, d3, da,
        sign=  /^-.+/.test(d)? 'minus ':'';
        if(sign) d= d.substring(1);

        if(/infinity/i.test(s)) return sign? 'Negative Infinity':'Infinity';
        if(!s || !/\d/.test(s)) return '';

        if(d.charAt(0)=== '$'){
            d= Number(d.substring(1));
            return d? Numword.cashwords(d):'';
        }
        else if(d.indexOf('/')!= -1){
            return Numword.printFraction(d, sign) || '';
        }
        if(/^\d+\: *\d+/.test(d)){
            return d.match(/\d+/g).map(function(itm){
                return (+itm).toWords();
            }).join(' ');
        }
        d= d.replace(/[^\d\.eE+-]/g, '');
        da= Number(d);
        if(da> Math.pow(10, 17) || da< Math.pow(10, -6)) d= da.toExponential();
        else d= String(da);
        if(/\d[eE][+-]?\d/.test(d)) return Numword.getExponent(d, sign);
        str= da.toWords().trim();
        if(da=== Math.round(da) && ord) str= str.ordinal();
        return sign+str;
    },
    ordinal: function(){
        var ax, suffix, str= ' '+this.trim();
        if(str.charAt(str.length-1)== 'y') return str.slice(0, -2)+'tieth';
        var ax= str.lastIndexOf(' ');
        suffx= str.substring(ax);
        if(ax> 1) str= str.substring(0, ax);
        else str= ' ';
        switch(suffx.trim()){
            case 'one': return str+' first';
            case 'two': return str+' second';
            case 'three': return str+' third';
            case 'five': return str+' fifth';
            case 'eight': return str+' eighth';
            case 'nine': return str+' ninth';
            case 'twelve': return str+' twelfth';
            default: return str+suffx+'th';
        }
    },
    printFraction: function(d, sign, ret){
        var num, M=/(\d+\s+)?(\d+)\s*\/\s*(\d+)/.exec(d);
        if(!M) return NaN;
        num= M[1]? (+M[1]).toWords().replace(/ and /g, ' ')+' and ':'';
        num+= (+M[2]).toWords()+'-';
        if(M[3]=== '2') num+= 'half';
        else if(M[3]=== '4') num+= 'quarter';
        else num+= (+M[3]).toWords().ordinal();
        if(M[2]!== '1') num= num.replace(/([^s])$/, '$1s');
        return sign+num.replace(/ *\- */, '-');
    },
    strums:[
        'US-English',
        ['zero', 'one', 'two', 'three', 'four', 'five', 'six', 'seven', 'eight', 'nine',
        'ten', 'eleven', 'twelve', 'thirteen', 'fourteen', 'fifteen', 'sixteen', 'seventeen', 'eighteen', 'nineteen'],
        ['naught', 'ten', 'twenty', 'thirty', 'forty', 'fifty', 'sixty', 'seventy', 'eighty', 'ninety'],
        ['hundred', 'thousand', 'million', 'billion', 'trillion', 'quadrillion']
    ],
    toWords: function(ord){
        var W= Numword.strums, dec= '', N= '', I,
        A= [], L, tem, h, t, t2, o, str,
        sign= this<0? 'minus ':'',
        n= Math.abs(this);
        if(n && !isFinite(n)) return sign+' Infinity';
        I= Math.floor(n);
        if(n!== I) dec= String(n).split('.')
        if(dec[1]){
            dec= ' point '+ dec[1].split('').map(function(itm){
                return W[1][+itm];
            }).join(' ');
            if(I=== 0) return sign+'zero'+dec;
            else ord= false;
        }
        while(I> 0){
            tem= I%1000;
            I= (I-tem)/1000;
            if(tem=== 0) A.push('');
            else{
                str= '';
                t= tem%100;
                if(tem>= 100){
                    h= Math.floor(tem/100);
                    str= W[1][h]+' hundred ';
                }
                if(t> 0){
                    if(A.length== 0 && (h> 0 || I> 0)) str+= ' and ';
                    if(t<20){
                        if(W[1][t]) str+= W[1][t]+' ';
                    }
                    else{
                        t2= Math.floor(t/10);
                        o= t%10;
                        if(W[2][t2]) str+= W[2][t2];
                        if(o> 0 && W[1][o]) str+= ' '+W[1][o];
                    }
                }
                A.push(str);
            }
        }
        N= A.map(function(itm, i){
            if(!itm) return '';
            var tem= '';
            if(i> 0) tem= ' '+W[3][i];
            return itm+tem;
        }).reverse().join(' ');
        if(ord) N= N.ordinal();
        N= sign+ N.replace(/ion (?=\S+)/g, 'ion, ')+ dec;
        return N.replace(/ {2,}/g, ' ');
    }
}
Number.prototype.toWords= function(mod){
    return Numword.toWords.call(this, mod);
}
String.prototype.ordinal= function(){
    return Numword.ordinal.call(this);
}
/* equalizer for cross-browser support*/
String.prototype.trim= ''.trim || function(){
    return this.replace(/^\s+/g, '').replace(/\s+$/g, '');
}
Array.prototype.forEach= [].forEach || function(fun, scope){
    var T= this, L= T.length, i= 0;
    if(typeof fun== 'function'){
        while(i< L){
            if(i in T){
                fun.call(scope, T[i], i, T);
            }
            ++i;
        }
    }
    return T;
}
Array.prototype.map= [].map || function(fun, scope){
    var T= this, L= T.length, A= Array(L), i= 0;
    if(typeof fun== 'function'){
        while(i< L){
            if(i in T){
                A[i]= fun.call(scope, T[i], i, T);
            }
            ++i;
        }
        return A;
    }
}
/*end equalizer */
/*demo program */
window.Run={
    doc: function(what, pa, hoo, txt, sty){
        var tag, el, mod, ref;
        what= what.toLowerCase().split('_');
        tag= what[0], mod= what[1], ref= mr(pa);
        el= document.createElement(tag);
        if(hoo) el.id= hoo;
        if(sty) el.style.cssText= sty;
        if(ref){
            if(mod== 'b4') ref.parentNode.insertBefore(el, ref);
            else if(mod== 'bf' && ref.firstChild){
                ref.insertBefore(el, ref.firstChild);
            }
            else ref.appendChild(el);
        }
        if(txt) el.appendChild(document.createTextNode(txt));
        return el;
    },
    sayNext: function(hoo, text, css){
        Run.doc('br', hoo);
        return Run.doc('span', hoo, '', text, css);
    },
    zap: function(who){
        who= mr(who);
        while(who.lastChild) who.removeChild(who.lastChild);
    }
}
window.mr= function(hoo){
    if(typeof hoo== 'string') hoo= document.getElementById(hoo) || '';
    return (hoo.nodeType== 1)? hoo:null;
}
window.onload= function(){
    Numword.display= function(){
        var who= mr('strum_in'), v= who.value.trim(),
        v2, nw, n2, p2, w= '';
        if(!/(\d|Infinity)/i.test(v)) return;
        if(/^\.\d/.test(v)) v= '0'+v;
        if(/[$.\/eE-]/.test(v)){
            mr('ord_cbx').checked= false;
        }
        nw= Numword.getWords(v)+'';
        if(nw){
            if(mr('ord_cbx').checked) nw= nw.ordinal();
            Run.doc('p_bf', 'numword_div', '', v+'= '+nw);
        }
        who.value= '';
        mr('strum_in').focus()
    }
    Numword.sampler= function(){
        mr('ord_cbx').checked= false;
        var doc= Run.doc, A,B,C;
        A= ['150', '0.12', '65.35', '$65.45', '2012', '98.6', '897456971.25',
        '1 1/2', '12 and 3/4', '-9', '33 and 1/3','12:15','09:30',
        '1.155e+17', '1.222e3', '4.5e-10', '3.125e-3'].map(function(itm){
            return itm+'= '+Numword.getWords(itm);
        });
        B= [1, 2, 3, 21, 28, 112].map(function(itm){
            return itm+ '= '+itm.toWords().ordinal();
        });
        B.unshift('Ordinal format:');
        A= A.concat(B);
        Run.zap('numword_div');
        A.forEach(function(itm){
            p2= doc('p', 'numword_div', '',itm);
        });
        mr('strum_in').focus()
    }
    mr('toWordsBtn').onclick= Numword.display;
    mr('demoWordsBtn').onclick= Numword.sampler;
    mr('clearWordsBtn').onclick= function(){
        Run.zap('numword_div');
        mr('strum_in').focus();
    };
    setTimeout(function(){
        mr('strum_in').focus();
    },
    100);
}
</script>
</head>
<body>
<div id= "numstringDiv">
<h1> Numbers to Words<br>
<span> US- English version</span> </h1>
<div style= "max-width:900px; font-family:Georgia, 'Times New Roman',serif;">
<p> Besides digits, numerical input can include a negative sign(-50), dollar sign ($50.25),
decimal point (.), exponential (1.15e+25) or a real number with a division slash (1/2 or 9 3/4).</p>
<p> If you are expressing a positive integer you can return an ordinal number-
that is, 21 converts to "twenty first" and 12 to "twelfth".</p>
</p>
<p id= " "> Use the "Demo" button for some examples.</p>
</div>
<h3 style= "margin-top: 1em;"> Enter a number to convert to words</h3>
<div>
<label> Ordinal:<input id= "ord_cbx" type= "checkbox"> </label>
<input autocomplete= "off" size= "40" id= "strum_in" type= "text">
<button id= "toWordsBtn" type= "button" style= "margin-left: 1em;"> Convert</button>
<button type= "button" id= "demoWordsBtn"> Demo</button>
<button id= "clearWordsBtn" type= "button"> Clear</button>
</div>
<div style= "font-weight: bold;" id= "numword_div">
</div>
</div>
</body>
</html> 
```

# java - 无法从 itemSet 中迭代项目

> ID：12221296
> 
> 赞同：0
> 
> 时间：2012-08-31T19:11:41.010
> 
> 标签：java

嘿，伙计们无法迭代或从`ItemSet`以下获取项目是我的代码

物品类别

```
public class Item {

    private String id; 
    private int count;
    private String  name;

    public int getcount() {
       return this.count; 
    }

    public Item(String name) {
        this.name=name;
        this.id = "";
    }

    public Item(String id, String name) {
        this.name=name;
        this.id=id;
    }

    public Item(int count) {
        this.count=count;
    }

    public String getItemName() {
        return this.name;
    }

    public String getItemId() {
        return this.id;
    }

    public Item returnItems(ItemSet itemset) {
        Item item=null;
        return item;
    }

} 
```

ItemSet 类保存项目列表

```
public  class ItemSet   {

    private List<Item> hold;

    ItemSet(Item item) {
        hold = new ArrayList<Item>();
        this.hold.add(item); 
    }

    ItemSet() {
        //throw new UnsupportedOperationException("Not yet implemented");
    }   

    public List<Item> getItemSet() {
        return this.hold;
    }    

    public void addItems(Item item) {
        hold = new ArrayList<Item>();
        this.hold.add(item);
    }

} 
```

这是我的 Transaction 类包含 ItemSets 列表

```
public class Transaction  {

    private List<ItemSet> trans;

    public ItemSet getUniqueItem() {
        ResultSet rs;
        Database d=new Database();
        ItemSet unique=new ItemSet();
        String query="Select id,name from item";
        rs=d.sendQuery(query);
        try{  
            while(rs.next()) {
                System.out.println(rs.getString(1)+"\t"+rs.getString(2));
                Item item=new Item(rs.getString(1),rs.getString(2));
                unique.addItems(item);      
            } 
        } catch(Exception e) { 
            System.out.print(e.getMessage());
        }
        return unique;
    }

} 
```

这是我的主要课程

```
public class Ap {

    public static void main(String args[]) {
        Transaction t=new Transaction();
        Transaction Ci=new Transaction();
        Transaction Li=new Transaction();

        ItemSet I=t.getUniqueItem();    //11
    }
} 
```

我不知道如何在 11 时从 ItemSet 中获取项目

我尝试使用

```
foreach(Item i:I) {

} 
```

但我收到错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T19:17:18.690

为了使用'foreach'语句，你的`ItemSet`类应该实现`java.lang.Iterable`接口

更新：

看到这个关于如何实现 Iterable 接口的[答案](https://stackoverflow.com/questions/601658/java-how-to-implement-iterable)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T19:18:41.543

为了能够使用`for (Item i : itemSet)`，您的`ItemSet`类必须实现[可迭代](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Iterable.html)接口。您可以通过将以下方法添加到`ItemSet`类来做到这一点：

```
public Iterator<Item> iterator() {
    return hold.iterator();
} 
```

请记住，您应该添加`implements Iterable<Item>`到类声明中。

请注意，您始终可以使用`for (Item i : itemSet.getItemSet())`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T19:19:44.623

`getUniqueItem()`你的类中的方法`Transaction`返回一个`ItemSet`没有实现[`Iterable`](http://docs.oracle.com/javase/6/docs/api/java/lang/Iterable.html)接口的方法，所以你不应该期望能够迭代它。您需要通过调用并迭代它来`List<Item>`获取。`ItemSet``getItemSet()`

顺便说一句，该方法`getItemSet()`可能不是一个好名字，因为它返回一个`List<Item>`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-31T19:31:08.580

我认为您的代码没有多大意义，我真的不明白为什么每个人都想实现 Iterator 接口。

首先，您为包含列表的类使用名称 Set。*然后在addItems()*方法中重新创建 List 的一个新实例，它应该是*addItem()*因为您想将单个项目添加到您的列表中。

您所做的基本上是制作一个列表并向其中添加一个项目，但是您添加的下一个项目会重新创建列表，并将它的引用分配给上一个列表的引用，从而有效地删除它。因此，您的列表将永远不会包含超过 1 项。

如果您想将列表作为类的属性，那么您的类的名称是直观的，例如*ItemList*，因为它告诉您您有一个项目列表，而这正是它的本质。但是，如果它只包含一个列表，那么实际上根本不需要它，因为您唯一要做的就是在两者之间添加一个方法调用。您可以只使用 List 接口或任何实现它的类，例如 ArrayList。

我拿走了你的代码并重写了它，就像它有意义一样。我希望它可以帮助你;）

```
public class Transaction  {

    public ItemList getUniqueItems() {

        Database d = new Database();
        ItemList unique = new ItemList();
        String query="Select id,name from item";
        ResultSet rs = d.sendQuery(query);
        try {  
            while(rs.next()) {
                System.out.println(rs.getString(1)+"\t"+rs.getString(2));
                unique.addItem(new Item(rs.getString(1),rs.getString(2)));      
            } 
        }
        catch(Exception e){
            System.out.print(e.getMessage());
        }
        return unique;
    }

}

public class Ap {

    public static void main(String args[]) {
        Transaction t  = new Transaction();

        ItemList i = t.getUniqueItems();  
        List<Item> list = i.getItemList();
        list.get(10);    //11 because 0 counts also
    }
} 
```

较短的版本是：1：Transation 类

```
public class Transaction  {

    public List<Item> getUniqueItems() {

        Database d = new Database();
        List<Item> unique = new ArrayList<Item>();

        String query="Select id,name from item";
        ResultSet rs = d.sendQuery(query);
        try {  
            while(rs.next()) {
                System.out.println(rs.getString(1)+"\t"+rs.getString(2));
                unique.add(new Item(rs.getString(1),rs.getString(2)));      
            } 
        }
        catch(Exception e){
            System.out.print(e.getMessage());
        }
        return unique;
    }

} 
```

2：Ap类：

```
public class Ap {

    public static void main(String args[]) {
        Transaction t  = new Transaction();
        List<Item> list = t.getUniqueItems();
        list.get(10);    //11 because 0 counts also

                // iteration with a foreach loop
                for (Item i : list) {
                   System.out.println(i);
                }

                // iteration with a for loop 
                for (int n = 0, s = list.size(); n < s; n++) {
                    System.out.println(list.get(n));
                }

                // iteration with a Iterator
                Iterator<Item> iterator = list.iterator();
                while (i.hasNext()) {
                    System.out.println(i.next());
                }
    }
} 
```

所以完全没有必要在任何地方实现 Iterator 接口。

# biztalk - 从同一消息中丰富消息

> ID：12221302
> 
> 赞同：1
> 
> 时间：2012-08-31T19:12:05.493
> 
> 标签：biztalk, biztalk-2010

使用 Biztalk 2010，我收到了具有以下结构的传入消息：

```
<xml><blocks>
<block id="level">
<message id="code">100</message>
<message id="description">Some description</message>
</block>
<block id="level">
<message id="code">101</message>
<message id="description">More description</message>
</block>
</blocks>
<blocks>
<block id="change">
<message id="table">1</message>
<message id="oldvalue">100</message>
<message id="newvalue">101</message>
</block>
</blocks>
</xml> 
```

我需要将上面的内容映射到这个结构：

```
<terms>
<termItem>
<code>100</code>
<description>Some description</description>
<deleted>false</deleted>
</termItem>
<termItem>
.....and so on with values from the above xml file, except that the item from the "change" block should be added as a new record to output, so the total output will be 3 items (<block>). 
```

地图视图是这样的：![在此处输入图像描述](../Images/10159ecdfd0c5b06beeee51785c6dad1.png)

在选择要使用的 functoid 的正确组合或解决这一挑战的另一种方法时，我需要一些帮助。

我可以选择具有“级别”值的所有块并过滤掉“更改”块，但无法将两者结合起来。

任何提示，建议都非常受欢迎。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T08:34:44.143

似乎有更多的东西

1.  传入的 xml 似乎是嵌套的（根据可视映射器中的模式），因此示例输入 xml 结构可能不太正确？
2.  此外，可能是 RHS 上的模式是分批的，即每个公司 id 一个 PaymentTerms 消息，所以除非您只需要映射第一个公司，否则您需要为所有映射的公司创建一个包装模式，具有任意根节点，然后在发送前对它们进行分批。

也就是说，通过使用[自定义 xslt 而不是视觉映射器](https://stackoverflow.com/questions/3716608/biztalk-2010-mapping-an-xsd-with-a-lot-of-elements-with-the-same-name/3718014#3718014)来获得输出的一般结构相对简单。我假设你的图表上的 RHS 模式是真实的输出模式（不是你的术语示例）。

```
<xsl:stylesheet version="1.0"
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  exclude-result-prefixes="xsl xsi">
  <xsl:output method="xml" indent="yes" />
  <xsl:strip-space elements="*" />

  <!--Outer template-->
  <xsl:template match="/">
    <PaymentTerms CompanyCode="Unsure">
      <xsl:apply-templates />
    </PaymentTerms>
  </xsl:template>

  <!--Root blocks only-->
  <xsl:template match="block[@id='level']">
    <PaymentTerm>
      <Code>
        <xsl:value-of select="message[@id='code']/text()"/>
      </Code>
      <Description>
        <xsl:value-of select="message[@id='description']/text()"/>
      </Description>
      <Deleted>
        <!--No idea how you want this populated-->
        <xsl:value-of select="'false'"/>
      </Deleted>
    </PaymentTerm>
    <xsl:apply-templates select="blocks/block"></xsl:apply-templates>
  </xsl:template>

  <!--Nested blocks only-->
  <xsl:template match="block[@id='change']">
    <PaymentTerm>
      <Code>
        NestedCode
      </Code>
      <Description>
        NestedDescription
      </Description>
      <Deleted>
        NestedDeleted
      </Deleted>
    </PaymentTerm>
  </xsl:template>
</xsl:stylesheet> 
```

您没有提供太多关于如何映射嵌套块的信息，因此我同时提供了占位符。

！

# php - 使用 htaccess 删除 .php 并允许路径

> ID：12221303
> 
> 赞同：1
> 
> 时间：2012-08-31T19:12:08.113
> 
> 标签：php, apache, .htaccess

我目前有一个 .htaccess 文件，允许人们在没有 php 扩展名的情况下输入 URL，例如[http://domain.com/account](http://domain.com/account)重定向到 account.php

我希望能够拥有它，这样如果我输入[http://domain.com/account/contactinfo](http://domain.com/account/contactinfo)（或[http://domain.com/account/settings/groups](http://domain.com/account/settings/groups)等），它仍然会进入帐户。 php，但我不确定如何改变我必须实现的目标。

当前 .htaccess ：

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME}.php -f
RewriteRule ^(([A-Za-z0-9\-_\.]+/)*[A-Za-z0-9\-_\.]+)?$ $1.php 
```

任何帮助表示赞赏！显然，如果存在一个文件夹，它应该遵循该路径（例如，如果 /folder/page.php 存在，那么[http://domain.com/folder/page/create](http://domain.com/folder/page/create)将转到文件夹/page.php）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T19:24:14.747

试试这个，你不需要将任何 URI 信息传递到查询字符串中（即你的应用程序仍然会查看`$_SERVER['REQUEST_URI']`）

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^([A-Za-z0-9\-_\.]+)(/[A-Za-z0-9\-_\.]*)?$ $1.php&q=$2 [QSA]
# Note the optional '&q=$2' on line above if you want to make removed part of URI available as passed parameter

RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^.*$ / [L,QSA] 
```

请注意，由于我删除了检查有效 php 文件的条件，因此我添加了第二个条件重写规则，如果重写的请求未指向有效的 PHP 文件，则仅重定向到站点根目录。您显然可以将其重定向到 404 页面或您可能想要重定向到的任何其他页面。或者你可以完全删除它，让 Apache 给它默认的 404 响应。

# javascript - 将拉丁数字更改为波斯数字并通过jQuery函数添加逗号

> ID：12221304
> 
> 赞同：2
> 
> 时间：2012-08-31T19:12:56.180
> 
> 标签：javascript, jquery

我想将拉丁数字更改为波斯数字并添加逗号，但这对我来说不起作用。我该怎么办？

[**演示：**](http://jsfiddle.net/39rKM/3/)
请看我的演示，输出`&#1,782;&#1,783;&#1,783;&#1,782;&#1,781;&#1,781;&#1,782;&#1,783;&#1,783;&#1,784;&#1,784;&#1,785;&#1,785;&#1,784;&#1,783;&#1,784;&#1,780;&#1,776;&#1,784;&#1,776;`不是正确的数字。

```
function numentofa(n) {
var digits = [],
    r;
do {
    r = n % 10;
    n = (n - r) / 10;
    digits.unshift(['&#', r + 1776, ';'].join(''));
} while (n > 0);
return digits.join('');
}
function addCommas(nStr) {
    nStr += '';
    x = nStr.split('.');
    x1 = x[0];
    x2 = x.length > 1 ? '.' + x[1] : '';
    var rgx = /(\d+)(\d{3})/;
    while (rgx.test(x1)) {
        x1 = x1.replace(rgx, '$1' + ',' + '$2');
    }
    return x1 + x2;
}
var oooook = addCommas(numentofa(67765567788998776676));
//$('.numbers').append(oooook);
    alert(oooook);​ 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-31T19:19:41.750

不要使用 HTML 字符代码，而是使用实际字符：

```
digits.unshift(String.fromCharCode(r+1776)); 
```

而不是对数字进行正则表达式，而是将其推广到任何非逗号字符：

```
var rgx = /([^,]+)([^,]{3})/; 
```

[更新小提琴](http://jsfiddle.net/39rKM/4/)

# php - 来自不包含数据的 php 函数的 XMLHttpRequest 响应

> ID：12221310
> 
> 赞同：0
> 
> 时间：2012-08-31T19:14:26.507
> 
> 标签：php, javascript, codeigniter, xmlhttprequest

我正在使用一个 codeigniter 应用程序，它根据从我的模型中的函数返回的数据库查询动态生成一些 html 元素。

在我的一个观点中，我使用 XMLHttpRequest 在我的一个控制器中调用一个 php 函数，该函数又以字符串的形式从我的模型中获取数据并将其回显给 responseText。我的 javascript 代码如下所示：

```
var xmlHttp = new XMLHttpRequest();
xmlHttp.open("POST", "/controller/my_function", true);
var postStr = "name="+proposalName+"&data="+data;
xmlHttp.setRequestHeader("Content-Type","application/x-www-form-urlencoded");
xmlHttp.send(postStr);
var response = xmlHttp.responseText; 
```

被调用的函数如下所示：

```
public function my_function(){
$data['name'] = $this->input->post('name');
$data['data'] = $this->input->post('data');
$string = $this->my_model->my_model_function($data);
echo $string;
} 
```

该模型正确地返回了字符串，即使只是在函数中回显了一个随机数或字符串，它仍然没有从响应文本中得到任何东西。无论我尝试在函数中回显什么，响应文本中似乎都没有任何内容。我在这里做错了什么？如何让 responseText 从我的 php 函数中获取正确的值？

编辑：修复了 postStr 变量的复制问题

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T19:17:16.393

```
var post Str = "name="+proposalName+"&data="+data; 
```

那是语法错误。JavaScript 碰到`Str`. 永远不会发送 HTTP 请求。

即使它已发送，您也在发出异步请求（`open`is的第三个参数`true`），因此在收到响应之前它不会锁定整个页面。您将`xmlHttp.responseText`在响应设置之前阅读。

你需要一个`onreadystatechange`函数。

请参阅包含示例[的 XMLHttpRequest 的 MDN 文档。](https://developer.mozilla.org/en-US/docs/DOM/XMLHttpRequest)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T19:20:21.440

几个主要问题：

1) 您的 Javascript*无效*。

```
var post Str = "name="+proposalName+"&data="+data; 
```

`post Str`有空间。无论如何，这段代码都不会运行。

2）你真的需要阅读如何使用`XMLHttpRequest`

阅读此内容，它应该会有所帮助： [http ://www.jibbering.com/2002/4/httprequest.html](http://www.jibbering.com/2002/4/httprequest.html)

# asp.net-mvc - 如何将复选框绑定到列表 视图模型的属性？

> ID：12221314
> 
> 赞同：8
> 
> 时间：2012-08-31T19:14:49.753
> 
> 标签：asp.net-mvc

我一直在阅读有关视图模型和复选框的各种帖子，但我的大脑开始锁定，我需要朝着正确的方向努力。

这是我的简化视图模型。我有需要用它们的值填充列表的复选框。我认为这不会自动发生。我不确定如何正确弥合字符串值数组和 List 之间的差距。建议？

```
public int AlertId { get; set; }

public List<int> UserChannelIds { get; set; }

public List<int> SharedChannelIds { get; set; }

public List<int> SelectedDays { get; set; } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-31T19:36:51.477

让您的 View Model 像这样来表示 CheckBox 项

```
public class ChannelViewModel 
{
  public string Name { set;get;}
  public int Id { set;get;}
  public bool IsSelected { set;get;}
} 
```

现在你的主 ViewModel 将是这样的

```
public class AlertViewModel
{
  public int AlertId { get; set; }
  public List<ChannelViewModel> UserChannelIds { get; set; }      
  //Other Properties also her

  public AlertViewModel()
  {
    UserChannelIds=new List<ChannelViewModel>();       
  }

} 
```

现在在您的`GET`操作中，您将填充 ViewModel 的值并将其发送到视图。

```
public ActionResult AddAlert()
{
    var vm = new ChannelViewModel();

    //The below code is hardcoded for demo. you mat replace with DB data.
    vm.UserChannelIds.Add(new ChannelViewModel{ Name = "Test1" , Id=1});
    vm.UserChannelIds.Add(new ChannelViewModel{ Name = "Test2", Id=2 });

    return View(vm);
} 
```

现在让我们创建一个 EditorTemplate。转到并创建一个名为“ **EditorTemplates**`Views/YourControllerName` ”的文件夹，并在那里创建一个与 Property Name( )同名的新视图**`ChannelViewModel.cshtml`**

 **将此代码添加到您的新编辑器模板中。

```
@model ChannelViewModel
<p>
  <b>@Model.Name</b>   :
  @Html.CheckBoxFor(x => x.IsSelected) <br />
  @Html.HiddenFor(x=>x.Id)
</p> 
```

`EditorFor`现在在您的主视图中，使用Html Helper 方法调用您的编辑器模板。

```
@model AlertViewModel
<h2>AddTag</h2>
@using (Html.BeginForm())
{
    <div>
        @Html.LabelFor(m => m.AlertId)
        @Html.TextBoxFor(m => m.AlertId)
    </div>    
    <div>  
      @Html.EditorFor(m=>m.UserChannelIds)         
    </div>    
    <input type="submit" value="Submit" />
} 
```

现在，当您发布表单时，您的模型将拥有`UserChannelIds`Collection，其中 Selected Checkboxes 将具有属性`True`值。`IsSelected`

```
[HttpPost]
public ActionResult AddAlert(AlertViewModel model)
{
   if(ModelState.IsValid)
   {
      //Check for model.UserChannelIds collection and Each items
      //  IsSelected property value.
      //Save and Redirect(PRG pattern)
   }
   return View(model);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-04T16:14:12.917

我的视图模型的一部分：

```
public List<int> UserChannelIds { get; set; }

public List<int> SharedChannelIds { get; set; }

public List<int> Weekdays { get; set; }

public MyViewModel()
{
    UserChannelIds = new List<int>();
    SharedChannelIds = new List<int>();
    Weekdays = new List<int>();
} 
```

我使用部分视图来显示我的可重用复选框（此时我还不知道编辑器模板）：

```
@using AlertsProcessor
@using WngAlertingPortal.Code
@model List<int>
@{
    var sChannels = new List<uv_SharedChannels>();
    Utility.LoadSharedChannels(sChannels);
}

<p><strong>Shared Channels:</strong></p>
<ul class="channel-list">
@{
    foreach (var c in sChannels)
    {
        string chk = (Model.Contains(c.SharedChannelId)) ? "checked=\"checked\"" : "";

        <li><input type="checkbox" name="SharedChannelIds" value="@c.SharedChannelId" @chk /> @c.Description (@c.Channel)</li>
    }
} 
```

所有三个复选框部分视图彼此相似。复选框的值是整数，因此通过将我的视图模型列表名称与复选框名称对齐，绑定可以工作。

因为我正在使用 int 值，所以我觉得我不需要额外的类来表示复选框。只发送选中的复选框，所以我不需要验证它们是否被选中；我只想要发送的值。通过在构造函数中初始化 List，我应该避免空异常。

这是更好，更差还是与其他解决方案一样好？其他解决方案（涉及额外的课程）是最佳实践吗？

以下文章对我有帮助：

[http://forums.asp.net/t/1779915.aspx/1?Checkbox+in+MVC3](http://forums.asp.net/t/1779915.aspx/1?Checkbox+in+MVC3)

[http://haacked.com/archive/2008/10/23/model-binding-to-a-list.aspx](http://haacked.com/archive/2008/10/23/model-binding-to-a-list.aspx)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-02-15T07:32:56.037

与视图模型的绑定列表

这个网站处理得很好

[https://www.exceptionnotfound.net/simple-checkboxlist-in-asp-net-mvc/](https://www.exceptionnotfound.net/simple-checkboxlist-in-asp-net-mvc/)

[![在此处输入图像描述](../Images/630d1854c5767306df35618dae60071d.png)](https://i.stack.imgur.com/MYwtK.png)

```
public class AddMovieVM  
{
  [DisplayName("Title: ")]
  public string Title { get; set; }

public List<CheckBoxListItem> Genres { get; set; }

public AddMovieVM()
{
    Genres = new List<CheckBoxListItem>();
}
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-06-25T11:29:08.467

```
 public class MembershipViewData
 {
   public MembershipViewData()
   {
      GroupedRoles = new List<GroupedRoles>();
      RolesToPurchase = new List<uint>();
   }

   public IList<GroupedRoles> GroupedRoles { get; set; }
   public IList<uint> RolesToPurchase { get; set; }
 }

//view

 @model VCNRS.Web.MVC.Models.MembershipViewData
 @{
    ViewBag.Title = "MembershipViewData";
    Layout = "~/Views/Shared/_Layout.cshtml";
    int i = 0;
  }

@using (Html.BeginForm("Membership", "Account", FormMethod.Post, new { id = "membershipForm" }))
{
   <div class="dyndata" style="clear: left;">
      <table width="100%" cellpadding="0" cellspacing="0" class="table-view list-view">

        foreach (var kvp2 in Model.GroupedRoles)
        {
          string checkBoxId = "RolesToPurchase" + kvp2.RoleType;
          <tr>
            <td width="240px">
              <label class="checkbox-label" for="@checkBoxId">
                 <input type="checkbox" class="checkbox" name="RolesToPurchase[@i]" 
                   id="@checkBoxId" value="@kvp2.RoleType" />
                   @kvp2.Key
              </label>
            </td>
          </tr>

          i++;
}

   <tr style="background-color: #ededed; height: 15px;">
      <td colspan="5" style="text-align: right; vertical-align: bottom;">                                  
         @Html.SubmitButton(Resources.MyStrings.Views_Account_Next)
      </td>
   </tr>
 </table>
</div>
}

//Post Action

[HttpPost]
public ActionResult Membership(MembershipViewData viewData)
{
 ..........................
}
} 
```**

# java - GetByteArrayElements 使用直接内存？

> ID：12221316
> 
> 赞同：0
> 
> 时间：2012-08-31T19:14:52.423
> 
> 标签：java, java-native-interface, out-of-memory, directmemory

我的程序中有一个 Direct Memory OOM。

java中使用的程序`ByteBuffer.allocateDirect()`，C++端将数据写入该缓冲区。但是当我试图改变`ByteBuffer.allocateDirect()`to`ByteBuffer.allocate()`和 using`GetByteArrayElements()`来写入数据时。我仍然得到相同的直接内存OOM。

我很困惑，这是`GetByteArrayElements()`使用直接内存复制数组吗？

非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T19:25:44.347

AFAIK GetByteArrayElements 用于访问`byte[]`支持堆 ByteBuffer.allocate() 的对象。

要访问直接 ByteBuffer，您需要使用 GetDirectBufferAddress 和 GetDirectBufferCapacity

[http://download.java.net/jdk8/docs/technotes/guides/jni/jni-14.html](http://download.java.net/jdk8/docs/technotes/guides/jni/jni-14.html)

# haskell - 在haskell中编写一个无限运行的（while（true）{}）用户输入函数

> ID：12221320
> 
> 赞同：0
> 
> 时间：2012-08-31T19:15:20.733
> 
> 标签：haskell, functional-programming

我正在尝试在 Haskell 中实现词法分析器。为了方便控制​​台输入和输出，我使用了中间数据类型**Transition Table**。

```
type TransitionTable = [(Int, Transitions String Int)]
type Transitions a b = [(a, b)] 
```

我想从用户那里获取所有状态和转换的输入。我不想事先了解州的总数。我希望它继续输入每个状态的转换，直到用户输入*"--"*。如果用户键入*"---"*，则丢弃当前状态并终止输入。

经过多次尝试，我想出了这个，我认为这是可怕的代码。

```
-- |A function to emulate the while loop for easy IO functionality.
--  Defination:- while @comparator @func @start:
--      *comparator @arg: A function which returns True or False on the basis of @arg.
--          The loop stops when False is returned.
--      *func: The function which is executed repeadly.
--          It is responsible for returning the next @arg for the comparator on the basis of the current @arg.
--      *start: The starting value of @arg to pass to the comparator.
while :: (Monad m) => (a -> Bool) -> (a -> m a) -> a -> m a
while comparator func start =
    if comparator start then do
        nxt <- func start
        while comparator func nxt
    else
        return start

-- |A modification of putStr which flushes out stdout. Corrents buffer problems.
myPutStr :: String -> IO ()
myPutStr str = putStr str >> hFlush stdout >> return () 
```

* * *

```
-- Takes input from the console to generate a TransitionTable.
inputTransitionTable :: IO TransitionTable
inputTransitionTable = do
    putStrLn "Type -- for next state and --- for completing input entering."
    retVal <- while notFinished takeInfo (0, [])
    return (snd retVal)
        where
            -- Returns True when input entry is over.
            notFinished (i, _) = i > -1

            -- Takes the current state number and the incomplete corrosponding transition table which is populated 
            -- with user input. Input ends when user enters "---". State number is set to -1 when input is over.
            takeInfo (i, states) = do
                putStrLn ("Adding transitions to state " ++ show i ++ ": ")
                retVal <- while entryNotFinished takeStateInfo ("", [])
                let (inpStr, stateInfo) = retVal
                case inpStr == "---" of
                    True -> return (-1, states)
                    False -> return (i+1, states ++ [(i, stateInfo)])

            -- Checks if input entry is over. Returns False if finished.
            entryNotFinished (s, _)
                | s == "--" || s == "---"  =  False
                | otherwise  =  True

            -- Takes the input state number along with the corresponding transitions.
            -- Input ends when the user enters "--".
            takeStateInfo (str, state_info) = do
                myPutStr "\tEnter transitions symbol: "
                symbol <- getLine
                if symbol == "--" || symbol == "---" then
                    return (symbol, state_info)
                else do
                    myPutStr "\t\tEnter the transition state number: "
                    state' <- getLine
                    let state = read state' :: Int
                    return (str, (symbol, state):state_info) 
```

基本上这是它的运行方式：

```
*Main> x <- inputTransitionTable
Type -- for next state and --- for completing input entering.
Adding transitions to state 0: 
    Enter transitions symbol: a
        Enter the transition state number: 1
    Enter transitions symbol: b
        Enter the transition state number: 2
    Enter transitions symbol: --
Adding transitions to state 1: 
    Enter transitions symbol: a
        Enter the transition state number: 2
    Enter transitions symbol: b
        Enter the transition state number: 3
    Enter transitions symbol: --
Adding transitions to state 2: 
    Enter transitions symbol: a
        Enter the transition state number: 3
    Enter transitions symbol: --
Adding transitions to state 3: 
    Enter transitions symbol: --
Adding transitions to state 4:
    Enter transitions symbol: ---
(0.03 secs, 344420 bytes)

-- Output
*Main> prettyPrintTransitionTable x
State   Transitions
0  ("b",2)  ("a",1)
1  ("b",3)  ("a",2)
2  ("a",3)
3 
```

有一个更好的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T05:59:52.310

如果您添加“派生读取”声明并且不关心交互，它可能就像这样简单。

```
main = do
    allInput <- getContents -- scarfs all stdin up to eof
    let inLines = lines allInput
    let (tableLines, _:otherlines) = break (== "endtable") inLines
    let table = ((read $ unlines tableLines) :: TransitionTable)
    -- process otherlines here 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-01T17:32:25.953

正如其他人所建议的那样，对于与解析相关的任务，您应该查看`Parsec`. 虽然我没有这方面的经验，但我仍然可以建议另一种编写解析应用程序的方法。

```
module Main where

  import Control.Monad (liftM)

  computeTransitions :: [String] -> [(Int, [(String, Int)])]
  computeTransitions is = foldl folder [] is
    where
      getState states            = if null states then (0, []) else last states
      getTransition transitions  = if null transitions  then 0 else (snd $ head transitions)
      prepend state transition   = let (c, ts) = state in (c, transition:ts)
      swapLastState states state = if null states then [state] else init states ++ [state]
      folder states i =
        let currentState = getState states
            currentTransition = getTransition (snd currentState)
        in case i == "--" of False -> swapLastState states (prepend currentState (i, currentTransition + 1))
                             True  -> states ++ [((fst currentState) + 1, [])]

  main = do
    inputLines <- liftM (takeWhile (/="---")) (liftM lines getContents)
    let result = computeTransitions inputLines
    mapM_ (\(s, t) -> putStrLn $ show s ++ "\t" ++ show t) result 
```

我不知道您的要求是否要打印出中间消息，但是转换的计算可以转换为折叠操作（如果您想打印中间消息，则可以转换为 foldM）；而不是“while”循环，我使用`takeWhile`提升到 Monadic 空间的函数（所以我可以将它应用于 type `IO [String]`）。

另请注意，`getContents`评估是惰性的，并且结合`lines`将作为“读取时行”执行。

**编辑：**

根据@pat 的建议（以及提出的建议`hlint`），这里是重构版本：

```
module Main where

  import Control.Monad (liftM)

  computeTransitions :: [String] -> [(Int, [(String, Int)])]
  computeTransitions = foldl folder []
    where
      getState []                = (0, [])
      getState states            = last states

      getTransition []           = 0
      getTransition ((_, t):_)  = t

      prepend (c,ts) transition  = (c, transition:ts)

      swapLastState [] state     = [state]
      swapLastState states state = init states ++ [state]

      folder states i =
        let currentState = getState states
            currentTransition = getTransition (snd currentState)
        in if i == "--"
          then states ++ [(fst currentState + 1, [])]
          else swapLastState states (prepend currentState (i, currentTransition + 1))

  main = do
    inputLines <- liftM (takeWhile (/="---") . lines) getContents
    mapM_ (\(s, t) -> putStrLn $ show s ++ "\t" ++ show t) (computeTransitions inputLines) 
```

# jquery-mobile - 如何为大量数据提高 jquery mobile 的性能

> ID：12221325
> 
> 赞同：0
> 
> 时间：2012-08-31T19:15:59.107
> 
> 标签：jquery-mobile

我正在使用带有大量数据的 jquery mobile。我正在使用 ajax 加载数据，问题是在加载所有数据约 600 条记录后，当我向上滚动并单击标题中的搜索框（输入类型文本）时，响应时间过长。请帮我解决问题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T19:38:22.893

解决此问题的正常方法是尝试一次将较少的数据加载到 DOM 中。一次渲染更少的记录（比如 50 条），并添加分页（或 prev/next、更多等）

在 jQuery Mobile 中，您可以通过向页面添加一些按钮或链接来显示 prev/next 等，并且在按钮的事件处理程序中，您可以使用一组新记录更新您的列表视图。您必须调用 .listview('refresh') 来恢复列表视图的完整样式和行为。

我知道只显示部分记录可能并不理想，但考虑到移动设备的有限硬件性能，为了获得可接受的性能可能有必要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T18:54:59.240

[从我的](https://stackoverflow.com/questions/12205787/should-i-enhance-jquery-mobile-elements-on-the-client-or-send-enhanced-markup-wi)回答中尝试其中任何一个

1.  `send`你的记录`enhanced markup`= 做 Jquery Mobile 对服务器端 500 条记录所做的事情（这将增加你传输的数据量！）

2.  使用`data-enhance=false`（加上配置）或`don't listview("refresh")`阻止 JQM 增强您已经增强的代码

3.  手动`gzip your ajax`响应服务器端以再次减小文件大小

这样可以防止 JQM 增强 500 个列表项并将传输的文件大小保持在最低限度

# streaming - 用于构建第二个屏幕电视应用程序的最佳 ACR（自动内容识别）技术是什么？

> ID：12221327
> 
> 赞同：-3
> 
> 时间：2012-08-31T19:16:04.050
> 
> 标签：streaming, video-streaming, broadcast, image-recognition, television

用于构建第二屏幕电视应用程序的最佳 ACR（自动内容识别）技术是什么？

潜在的解决方案可能包括：tvsync、tvtak.tv、civolution 和有声魔法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T16:34:07.507

Civolution 主要提供水印技术，Audible Magic 提供数字指纹。水印对取证很有用，但指纹更适合第二个屏幕应用程序。TVtak 要求您使用手机上的摄像头，用户使用起来可能不太方便。Civolution 和 Audible Magic 都通过麦克风收听。TVsync 是市场上的新事物，未经证实。Audible Magic 可能是历史最长的，并且拥有许多专利，这给了他们一个显着的优势。

使用水印，在制作过程中需要在原始内容中插入几乎无法察觉的音调。指纹识别并非如此。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-02T12:25:44.510

如上所述，“什么是最好的 ACR？”没有直接的答案。因为这取决于要求以及您要涵盖的用例以及您要交付的内容。我们[mufin](http://www.mufin.com/usecase/second-screen/)提供了一种非常强大的**音频指纹识别技术**，并且针对不一定需要互联网连接的移动应用程序进行了优化。与水印相比，音频指纹识别不需要修改参考音频信号，这是主要优点之一。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-06T09:50:07.320

您可以查看 syntec tv（音频指纹识别解决方案）以了解他们提供的内容。他们可以提供真正有效和快速的识别。

# javascript - 检查输入是否未更改

> ID：12221328
> 
> 赞同：0
> 
> 时间：2012-08-31T19:16:09.933
> 
> 标签：javascript, jquery, callback, thumbnails

是否可以使用事件检查输入是否**未更改**`change()`？

我正在与我一起工作，`<input type='file' />`我想警告用户他自己的行为没有做出任何改变。

现在，我只是做了一个正常的`change()`事件：

```
 // fire the thumbnail (img preview)
$("#file-input").on("change", function () {
    readURL(this); // create the thumbnail
}); 
```

我错过了什么？

**上一页解决方案：**

好吧，我找到了解决方法，真正的问题是我为用户提供了隐藏缩略图的选项，如果他愿意，请再次打开...

但是缩略图只会在用户选择图像时打开，这就是问题所在，因为更改事件会触发此选项以打开，因此，如果没有更改，则不会打开缩略图。

所以，当我隐藏缩略图时，我会更改`input file` 一个新的，使更改事件始终触发。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-31T19:18:05.913

使用变量存储输入的最后一个值，并与更改事件的当前值进行比较，如果它们相同，则没有进行任何更改：

```
var last_value = $("#file-input").val();

$("#file-input").on("change", function () {
    if (this.value === last_value) alert('no change');
    last_value=this.value;
}); 
```

编辑：或者您总是可以将输入标签替换为另一个标签，就像这个[SO 答案](https://stackoverflow.com/questions/4109276/how-to-detect-input-type-file-change-for-the-same-file)建议：

```
var $c  = $("#container");
var $f1 = $("#container .f1");

function FChange() {
    alert("f1 changed");

    $(this).remove();
    $("<input type='file' class='f1' />").change(FChange).appendTo($c);
}

$f1.change(FChange); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T19:21:02.877

```
<input type="file" id="file-input" data-url="intial-value" />

$("#file-input").on("change", function () {
    if($(this).val() != $(this).data('url'){
       //value has changed
       $(this).data('url', $(this).val())
    }
    else{
       return false;
    }

}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T19:25:11.060

```
 $("#file-input").on("change", function () {
    if($(this).data('last-val')){
        // do something
    } else {
       $(this).data('last-val',$(this).val());
       //do something else
    }
 }); 
```

# operating-system - 操作系统特权级别与硬件特权级别

> ID：12221330
> 
> 赞同：2
> 
> 时间：2012-08-31T19:16:24.947
> 
> 标签：operating-system, computer-architecture, instruction-set

操作系统特权级别和底层硬件的特权级别有什么区别？所有系统调用都会导致内核陷入陷阱吗？为什么系统调用会导致陷阱？是因为他们的汇编代码中有特权指令，例如 IN 吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T19:46:51.670

直接回答您的问题：

> 操作系统特权级别和底层硬件的特权级别有什么区别？

必须在代码级别（即特权指令）强制执行的特权必须在硬件中得到支持。许多操作系统安全级别（即访问特定硬件设备的权限）不需要硬件支持来验证非常特定的功能，但它至少需要硬件支持来阻止代码访问设备。因此，简而言之，操作系统实现特权级别的能力取决于底层硬件，但两者不必相同。

> 所有系统调用都会导致内核陷入陷阱吗？为什么系统调用会导致陷阱？是因为他们的汇编代码中有特权指令，例如 IN 吗？

这基本上是正确的。陷阱是非特权代码转换到特权级别的自然机制。例如，如果用户程序需要访问某个硬件，则 IN 和 OUT 具有特权，因此它必须“捕获”到内核，然后内核将执行所需的操作并返回。

# android - 在 ListView 顶部显示新项目

> ID：12221333
> 
> 赞同：10
> 
> 时间：2012-08-31T19:16:41.920
> 
> 标签：android, list, listview, insert

我正在使用列表来填充 ListView ()。用户能够将项目添加到列表中。但是，我需要将项目显示在 ListView 的顶部。如何在列表的开头插入一个项目以便以相反的顺序显示它？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-08-31T19:19:08.570

默认情况下，列表在底部添加元素。这就是为什么您添加的所有新元素都将显示在底部的原因。如果您希望它以相反的顺序排列，可能在设置为 listadapter/view 反转列表之前

就像是：

```
Collections.reverse(yourList); 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2014-06-13T11:59:35.180

另一种不修改原始列表的解决方案，覆盖Adapter中的getItem()方法

```
@Override
public Item getItem(int position) {
    return super.getItem(getCount() - position - 1);
} 
```

更新：示例

```
public class ChatAdapter extends ArrayAdapter<ChatItem> {
public ChatAdapter(Context context, List<ChatItem> chats) {
    super(context, R.layout.row_chat, chats);
}

@Override
public Item getItem(int position) {
    return super.getItem(getCount() - position - 1);
}

@Override
public View getView(int position, View convertView, ViewGroup parent) {
    if(convertView == null) {
        convertView = inflater.inflate(R.layout.row_chat, parent, false);
    }

    ChatItem chatItem = getItem(position);
    //Other code here

    return convertView;
} 
```

}

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-08-31T19:40:47.150

您可能应该使用[`ArrayAdapter`](http://developer.android.com/reference/android/widget/ArrayAdapter.html)and 使用该[`insert(T, int)`](http://developer.android.com/reference/android/widget/ArrayAdapter.html#insert%28T,%20int%29)方法。

前任：

```
ListView lv = new ListView(context);
ArrayAdapter<String> adapter = new ArrayAdapter<String>(context, R.id...);
lv.setAdapter(adapter);
...
adapter.insert("Hello", 0); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-31T19:20:16.100

ListView 显示存储在数据源中的数据。

当您在数据库中添加时，最后必须添加元素。因此，当您通过 Cursor 对象获取所有数据并将其分配给 ArrayAdapter 时，它仅按该顺序排列。您基本上应该尝试将数据放在数据库的开头，而不是最后，可能有一些时间戳。

使用 ArrayList，你可以通过**`Collections.reverse(arrayList)`**或者如果你使用 SQLite，你可以使用**`order by`**.

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2017-12-04T05:38:03.863

您可以在列表的开头添加元素：like

```
arraylist.add(0, object) 
```

那么它将始终在顶部显示新元素。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-09-29T17:22:52.170

mBlogList 是一个回收站视图...

```
mBlogList=(RecyclerView) findViewById(R.id.your xml file);
mBlogList.setHasFixedSize(true);

LinearLayoutManager mLayoutManager = new LinearLayoutManager(this);
mLayoutManager.setReverseLayout(true);
mLayoutManager.setStackFromEnd(true);
mBlogList.setLayoutManager(mLayoutManager);//VERTICAL FORMAT 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-29T11:27:02.490

您始终可以使用 LinkedList 代替，然后使用 addFirst() 方法将元素添加到列表中，它将具有所需的行为（ListView 顶部的新项目）。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-08-31T19:50:04.067

你总是可以在你的对象中有一个日期戳，并根据它对你的列表视图进行排序..

```
 public class CustomComparator implements Comparator<YourObjectName> {
        public int compare(YourObjectName o1, YourObjectName o2) {
            return o1.getDate() > o2.getDate() // something like that.. google how to do a compare method on two dates
        }
    } 
```

现在对您的列表进行排序

```
Collections.sort(YourList, new CustomComparator()); 
```

这应该对您的列表进行排序，以使最新的项目排在最前面

# c++ - 如何让 QLayouts 正确扩展？

> ID：12221345
> 
> 赞同：0
> 
> 时间：2012-08-31T19:17:52.907
> 
> 标签：c++, qt, layout, widget, qwebview

我的结构如下：

```
QWidget
    -QHBoxLayout
         -QLabel
         -QVBoxLayout
              -QLabel
              -QWebView

```

我希望 HBoxLayout 填充宽度，无论容器可能有多大，但不会多或少。但是，我希望 QVBoxLayout 扩展以适应其内容在垂直方向上的大小。

```
+-------------+------------------+
| 固定标题：| 扩展到宽度标题 +
| |------------------------------+
| | +
| | 这是一个包含到+的测试
| | 下一行 +
| | +
| | +
| | +
| | 呜呜呜呜+
| | +
| | +
| | +
| | 没有垂直滚动 +
| | 这里的酒吧 +
+-------------+------------------+

```

在此示例中，FixedTitle 的宽度可以任意大，但永远不会调整大小。扩展至宽度标题会填满剩余的水平空间。

到目前为止，我有：

```
 this->setSizePolicy(QSizePolicy::Expanding, QSizePolicy::Fixed);
QHBoxLayout *layout = new QHBoxLayout;
this->setLayout(layout);

layout->addWidget(new QLabel(QString("FixedTitle")), 0, Qt::AlignTop);

QVBoxLayout *v_layout = new QVBoxLayout;
v_layout->setSizeConstraint(QLayout::SetNoConstraint);
layout->addLayout(v_layout);

v_layout ->addWidget(new QLabel(QString("Expanding to Width Title")), 1, Qt::AlignTop | Qt::AlignLeft);

QWebView *view = new QWebView();

QTextEdit text;
text.setPlainText(QSString("\nthis is a test which wraps to the next line\n\n\nbla bla bla\n\n\nthere are no vertical scroll bars here"));
view->setHtml(text.toHtml());

int width = view->page()->mainFrame()->contentsSize().width();
int height = view->page()->mainFrame()->contentsSize().height();
view->page()->setViewportSize(QSize(width, height));
view->resize(width, height);
view->setFixedSize(width, height);

v_layout->addWidget(view); 
```

这有两个问题：1.它忽略了容器的宽度和2.它仍然没有正确获得QWebView的高度。

我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T20:19:53.487

这是我对答案的看法……请原谅我，但它是用 PyQt 写的。

我觉得您不应该过多考虑将包含小部件的大小调整为 QWebView 的内容，而只是将大小策略设置为扩展，关闭滚动条，并将大小调整到此容器添加到的任何布局. 尝试手动调整它的大小是没有意义的。

```
from PyQt4 import QtCore, QtGui, QtWebKit

class WebWidget(QtGui.QWidget):

    def __init__(self):
        super(WebWidget, self).__init__()

        layout = QtGui.QHBoxLayout(self)

        title = QtGui.QLabel("FixedTitle:")
        # title.setText("A much larger fixed title")

        title.setSizePolicy(
            QtGui.QSizePolicy.Preferred, 
            QtGui.QSizePolicy.Fixed)

        layout.addWidget(title, 0, QtCore.Qt.AlignTop)

        v_layout = QtGui.QVBoxLayout()
        layout.addLayout(v_layout)

        expandingTitle = QtGui.QLabel("Expanding to Width Title")
        expandingTitle.setSizePolicy(
            QtGui.QSizePolicy.Expanding, 
            QtGui.QSizePolicy.Fixed)

        v_layout.addWidget(expandingTitle)

        text = QtGui.QTextEdit()

        view = QtWebKit.QWebView()
        view.setSizePolicy(
            QtGui.QSizePolicy.Expanding, 
            QtGui.QSizePolicy.Expanding)

        view.page().mainFrame().setScrollBarPolicy(
            QtCore.Qt.Vertical, 
            QtCore.Qt.ScrollBarAlwaysOff )

        view.page().mainFrame().setScrollBarPolicy(
            QtCore.Qt.Horizontal, 
            QtCore.Qt.ScrollBarAlwaysOff )

        v_layout.addWidget(view, 1)

        text.setPlainText("""
            this is a test which wraps to the next line\n\n\n
            bla bla bla\n\n\nthere are no vertical scroll bars here
            """)
        view.setHtml(text.toHtml())

        v_layout.addStretch()

        self.view = view
        view.page().mainFrame().contentsSizeChanged.connect(self.updateWebSize)

    def updateWebSize(self, size=None):
        if size is None:
            size = self.view.page().mainFrame().contentsSize()
        self.view.setFixedSize(size)

    def resizeEvent(self, event):
        super(WebWidget, self).resizeEvent(event)
        self.updateWebSize()

if __name__ == "__main__":

    app = QtGui.QApplication([])

    w = QtGui.QScrollArea()
    w.resize(800,600)

    web = WebWidget()
    w.setWidget(web)
    w.setWidgetResizable(True)

    w.show()

    app.exec_() 
```

*   左侧标题设置为首选宽度和固定高度，以便获得所需的宽度但不会垂直增长。
*   扩展标题获得扩展宽度策略和固定高度。
*   QWebView 获得双向扩展策略，并且它的滚动条关闭。

举个例子。我刚刚创建了一个 QScrollArea 并将 WebWidget 设置在其中，这样您就可以看到父布局将允许 Web 视图随心所欲地增长，但会处理滚动条溢出。

# ios - 擦除内部触摸时的文本字段值

> ID：12221346
> 
> 赞同：0
> 
> 时间：2012-08-31T19:17:53.763
> 
> 标签：ios

我有一个默认值“密码”的密码文本字段。该字段被标记为安全。一旦用户在文本字段内进行触摸，我就会尝试删除默认值。

```
- (IBAction)PasswordTouchUpInside:(id)sender
{
  if (Password.text == @"Password")
  {
    Password.text = @"";
  }
} 
```

是否在错误的事件中进行了修饰？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T19:20:44.883

[`isEqualToString`](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html)您应该使用if 条件中的方法比较字符串：

```
if ([Password.text isEqualToString:@"Password"]) {
    Password.text = @"";
} 
```

或者，您可以简单地使用该[`placeHolder`](http://developer.apple.com/library/ios/documentation/uikit/reference/UITextField_Class/Reference/UITextField.html#//apple_ref/doc/uid/TP40006888-CH3-SW14)属性，以便`UITextField`自动执行此行为，而无需编写`PasswordTouchUpInside`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T19:21:10.153

您可能想要 Touch Down，而不是 Up。

# html - 是否有支持多特征搜索的浏览器兼容性数据库？

> ID：12221347
> 
> 赞同：3
> 
> 时间：2012-08-31T19:17:56.647
> 
> 标签：html, css, cross-browser

我正在寻找/希望有一种类似于[caniuse](http://caniuse.com)的工具，它支持一次性搜索多个功能。

我不想搜索单个功能（例如“border-radius”），而是想输入给定站点使用的所有 HTML/CSS/JS API/等，并显示一个浏览器支持级别表*所有*功能，汇总。

搜索示例：*border-radius、FileAPI、canvas、video、audio*

这个想法是，您可以提供给定站点的所有功能的列表，并获得一个非常准确的列表，其中列出了哪些浏览器将支持该站点的所有功能。它会回答“浏览器 X 是否与我的网站兼容？”的问题，而 caniuse 会回答“浏览器 X 是否与功能 Y 兼容？”的问题。

这样的事情存在吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T20:27:04.770

从来没听说过。

caniuse 在页面顶部有一个建议链接。你应该建议这个。

可能难以汇总多个功能的支持信息，特别是在功能有限的浏览器支持、仅通过供应商前缀可用或在特定情况下存在已知问题的情况下。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T20:15:37.777

[这个网站](http://www.findmebyip.com/litmus)呢？这不完全符合您的要求，但比一次搜索一件事更方便。

# java - 在运行时将不同的（新的）JPanel 分配给 JTabbedPane

> ID：12221357
> 
> 赞同：2
> 
> 时间：2012-08-31T19:19:02.630
> 
> 标签：java, swing, jpanel, jtabbedpane

我有一个有一个标签的 JTabbedPane（比如 myTabPane）（为了清楚起见，我们只取一个标签）。在创建 JTabbedPane 时，我在此选项卡中添加了一个 JPanel（比如 panel_A）。我在这个 JPanel 上有一个按钮。该选项卡完美地显示了我的 JPanel，上面有按钮。到现在为止还挺好。

我在按钮上定义了一个监听器，它创建了另一个扩展 JPanel 的类的实例（比如 panel_B）。这个 JPanel 上有一组不同的组件。我希望 panel_B 叠加 panel_A。也就是说，JTabbedPane 的选项卡应该显示 panel_B 并隐藏 panel_A。请注意，当我在创建 JTabbedPane 期间将各个面板（其中一个）“绑定”到选项卡时，我能够显示 panel_A 或 panel_B。但是，我希望通过单击按钮（即在运行时）仅对其中一个面板进行选择性显示（或绑定，只要可能）。如何做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T19:54:26.630

这将满足您的需要：

```
myTabPane.removeTabAt(0);
myTabPane.addTab("B", panelB); 
```

# facebook - Facebook“赞”和“发送”按钮消失

> ID：12221361
> 
> 赞同：1
> 
> 时间：2012-08-31T19:19:24.667
> 
> 标签：facebook, button, facebook-like

就在几天前，Facebook Like 和 Send 按钮从我的网站产品页面中消失了。该代码仍然存在，并且在它们消失之前已经工作了几个月。产品页面之一的链接是[http://www.finesgas.com/details/gas_grill_brands/broilmaster_brands/popular_models/p3sx](http://www.finesgas.com/details/gas_grill_brands/broilmaster_brands/popular_models/p3sx)

这是我现在拥有的代码。

```
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en" xmlns:og="http://opengraphprotocol.org/schema/" xmlns:fb="http://www.facebook.com/2008/fbml">

<meta property="og:title" content=" Broilmaster P3SX Grill With Portable Cart" />
<meta property="og:type" content="product" />
<meta property="og:description" content="Broilmaster P3SX gas Grill With Portable Cart Base " />
<meta property="og:site_name" content="FinesGas" />
<meta property="fb:admins" content="1222761017" />
<meta property="og:image" content="http://www.finesgas.com/images/broilmaster-p3sx-loaded.jpg" />

<div id="fb-root"></div>
<script>(function(d, s, id) {
var js, fjs = d.getElementsByTagName(s)[0];
if (d.getElementById(id)) {return;}
js = d.createElement(s); js.id = id;
js.src = "//connect.facebook.net/en_US/all.js#xfbml=1";
fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>

<fb:like send="true" layout="button_count" width="250" show_faces="false" action="Like" font="tahoma"></fb:like>
<div style="padding:5px;"></div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T01:04:36.907

将以下内容添加到您的 html 标记...

```
xmlns:fb="http://ogp.me/ns/fb#" 
```

# c - SGABIOS 编译错误

> ID：12221362
> 
> 赞同：1
> 
> 时间：2012-08-31T19:19:27.637
> 
> 标签：c, gcc, assembly, compiler-errors, binaryfiles

我正在尝试在我的 Macbook Pro 上构建[SGABIOS 。](http://code.google.com/p/sgabios/)不幸的是，我遇到了一些我不熟悉的奇怪编译错误。当我尝试运行 make 时，这是我得到的输出：

```
Ajax-2:sgabios-read-only dash$ make
rm -f .depend
cc -E -M -Wall -Os -m32 -nostdlib  sgabios.S >.tmpdepend && mv .tmpdepend .depend
make clean
rm -f sgabios.bin csum8  sgabios.o *.elf *.srec *.com version.h
touch sgabios.S
cc -Wall -Os -m32 -nostdlib -DBUILD_DATE="\"Fri Aug 31 19:10:03 UTC 2012\"" -DBUILD_SHORT_DATE="\"08/31/12\"" -DBUILD_HOST="\"Ajax-2.local\"" -DBUILD_USER="\"dash\""   -c -o sgabios.o sgabios.S
sgabios.S:24:Unknown pseudo-op: .type
sgabios.S:24:Rest of line ignored. 1st junk character valued 95 (_).
sgabios.S:30:Unknown pseudo-op: .size
sgabios.S:30:Rest of line ignored. 1st junk character valued 95 (_).
sgabios.S:33:Unknown pseudo-op: .type
sgabios.S:33:Rest of line ignored. 1st junk character valued 108 (l).
sgabios.S:156:Alignment too large: 15\. assumed.
make: *** [sgabios.o] Error 1 
```

我的GCC版本信息如下：

```
Ajax-2:sgabios-read-only dash$ gcc -v
Using built-in specs.
Target: i686-apple-darwin11
Configured with: /private/var/tmp/llvmgcc42/llvmgcc42-2336.1~22/src/configure --disable-checking --enable-werror --prefix=/Developer/usr/llvm-gcc-4.2 --mandir=/share/man --enable-languages=c,objc,c++,obj-c++ --program-prefix=llvm- --program-transform-name=/^[cg][^.-]*$/s/$/-4.2/ --with-slibdir=/usr/lib --build=i686-apple-darwin11 --enable-llvm=/private/var/tmp/llvmgcc42/llvmgcc42-2336.1~22/dst-llvmCore/Developer/usr/local --program-prefix=i686-apple-darwin11- --host=x86_64-apple-darwin11 --target=i686-apple-darwin11 --with-gxx-include-dir=/usr/include/c++/4.2.1
Thread model: posix
gcc version 4.2.1 (Based on Apple Inc. build 5658) (LLVM build 2336.1.00) 
```

我进行了广泛的谷歌搜索和猴子搜索，但似乎没有任何效果。我也尝试过 cygwin 中的整个混乱，我得到了几乎相同的东西。供您参考，我从最新版本上传了一些文件：

[sgabios](http://catull.us/files/sgabios.S)

[sgabios.h](http://catull.us/files/sgabios.h)

[生成文件](http://catull.us/files/Makefile)

**更新：**在 cygwin 中发布 make 的输出：

```
dash@Ajax_virtual ~/sgabios-read-only
$ make
rm -f .depend
cc -E -M -Wall -Os -m32 -nostdlib  sgabios.S >.tmpdepend && mv .tmpdepend .depen                                    d
make clean
make[1]: Entering directory `/home/dash/sgabios-read-only'
rm -f sgabios.bin csum8  sgabios.o *.elf *.srec *.com version.h
make[1]: Leaving directory `/home/dash/sgabios-read-only'
touch sgabios.S
cc -Wall -Os -m32 -nostdlib -DBUILD_DATE="\"Fri, Aug 31, 2012 10:14:21 PM\"" -DB                                    UILD_SHORT_DATE="\"08/31/12\"" -DBUILD_HOST="\"Ajax_virtual\"" -DBUILD_USER="\"d                                    ash\""   -c -o sgabios.o sgabios.S
sgabios.S: Assembler messages:
sgabios.S:22: Error: junk at end of line, first unrecognized character is `"'
sgabios.S:24: Warning: .type pseudo-op used outside of .def/.endef ignored.
sgabios.S:24: Error: junk at end of line, first unrecognized character is `_'
sgabios.S:30: Warning: .size pseudo-op used outside of .def/.endef ignored.
sgabios.S:30: Error: junk at end of line, first unrecognized character is `_'
sgabios.S:33: Warning: .type pseudo-op used outside of .def/.endef ignored.
sgabios.S:33: Error: junk at end of line, first unrecognized character is `l'
<builtin>: recipe for target `sgabios.o' failed
make: *** [sgabios.o] Error 1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T19:56:37.133

这是因为汇编程序文件是为[GNU as](http://en.wikipedia.org/wiki/GNU_Assembler)而编写的，但 OS X 不使用它，而是使用它自己的汇编程序。

此外，根据指令[文档，GNU 中`.type`指令](http://sourceware.org/binutils/docs-2.22/as/Type.html#Type)的含义取决于目标平台。链接文件中的指令仅对 linux（和其他 unice）上使用的 ELF 目标有效，但 cygwin 是 COFF 目标。

# javascript - 在更改事件中了解 jQuery 中“this”的范围

> ID：12221363
> 
> 赞同：4
> 
> 时间：2012-08-31T19:19:27.870
> 
> 标签：javascript, jquery, scope

我为我正在处理的项目编写了一个快速的 jQuery 自定义扩展。我很难理解我想要实现的自定义 onChange 方法中“this”的范围。如果在我调用 web 服务的代码中间省略了，但是如果您检查最后两种方法，您将看到我的问题出在哪里。我想用所选值更改调用 updateDetails 方法。但是，当在 onchange 事件中调用该方法时，我显然失去了“this”的范围，因为 this.materialListResponse 在此上下文中返回为未定义。任何帮助我理解这一点的帮助将不胜感激。

```
$.fn.appendMaterials = function (options) {

       this.options = options;

       //Set Default Options

       this.defaults = {

           typeID: '66E1320D-51F9-4900-BE84-6D5B571F9B80'

       };

       this.options = $.extend({}, this.defaults, options);

       //
       Code here to call web service and generate response XML
       //

       this.materialListResponse = $.xml2json(

       $.parseXML($(this.materialListWebservice()).find("GetMaterialTreeResponse").text())).Materials.Material;

       this.appendOptionString = function () {
           var i = 0;
           this.optionString = '<option>'
           for (i = 0; i < this.materialListResponse.length; i++) {
               this.optionString += '<option>' + this.materialListResponse[i].MaterialCode + '</option>';
           };

           this.append(this.optionString);

           return this;
       };

       this.appendOptionString();

       this.updateDetails = function () {
           for (i = 0; i < this.materialListResponse.length; i++) {

               if (this.materialListResponse[i].MaterialCode === this.val()) {

                   $('#table1 #MaterialDescription').val(this.materialListResponse[i].Description);

               }
           }
       }

       this.change(this.updateDetails)

   }; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-31T19:27:15.670

将对象`this`作为数据传递给事件：

```
this.change({that: this}, this.updateDetails) 
```

然后就可以`that`在事件回调的范围内访问

```
this.updateDetails = function(event) {
    var that = event.data.that;
    ...
} 
```

**资源**

*   [http://api.jquery.com/event.data/](http://api.jquery.com/event.data/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T19:23:45.377

当您退出扩展时，稍后将调用事件处理程序。它在元素的范围内被调用，因此`this`将被更改的元素。

将对列表的引用复制到一个局部变量，并在事件处理程序中使用它：

```
var list = this.materialListResponse;
this.updateDetails = function() {
    for (i = 0; i < list.length; i++) {
        if (list[i].MaterialCode === this.val()) {
            $('#table1 #MaterialDescription').val(list[i].Description);
        }
    }
} 
```

通过在函数中使用局部变量，该变量将成为函数闭包的一部分，因此它将在声明它的扩展方法的范围内存活。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-31T19:38:42.753

当一个方法在 JavaScript 中作为回调调用时，它的行为就像一个函数。在这种情况下，“this”指的是这个函数的所有者，通常是 Web 浏览器中的 Window 对象。

# php - 致命错误：调用未定义函数 mysql_connect() 无法解决

> ID：12221364
> 
> 赞同：1
> 
> 时间：2012-08-31T19:19:29.473
> 
> 标签：php, mysql, apache, dll

我已经在 Google 中搜索了这个错误并尝试了我找到的所有内容，但它仍然无法正常工作。我已经在我的 php.ini 中设置了

```
extension_dir ="C:\php\ext\" 
```

未注释

```
extension=php_mysql.dll
extension=php_mysqli.dll 
```

这些文件存在于扩展路径中，我重新启动了 Apache。但是 phpinfo(); 仍然没有显示任何关于 MySQL 的信息。那么你对加载这些模块有什么建议吗？

注意：我使用的是 Windows 7（64 位）、MySQL 5.5、Apache 2.0.49 和 PHP 5.3.16

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-18T11:47:57.447

最后，我解决了同样的问题，所以，这是我的解决方案。我猜该行的最后一个斜线

`extension_dir ="C:\php\ext\`

可以制造麻烦。让它作为

`extension_dir ="C:\php\ext`

此外，尝试通过以下方式解决问题：

*我的电脑运行的是 Windows 7 (Apache 2.2 & PHP 5.2.17 & MySQL 5.0.51a)，文件“httpd.conf”中的语法 (C:\Program Files (x86)\Apache Software Foundation\Apache2.2\ conf\httpd.conf) 对斜杠很敏感。您可以检查是否从正确的目录中读取了“php.ini”。只需在浏览器中输入“localhost/index.php”。index.php 的代码如下： `<?php echo phpinfo(); ?>` 有一行（离顶部不远）称为“加载的配置文件”。因此，如果没有添加任何内容，那么问题可能是您的“php.ini”未被读取，即使您未注释（extension=php_mysql.dll 和 extension=php_mysqli.dll）。所以，为了让它工作，我做了以下步骤。我需要改变

`PHPIniDir 'c:\PHP\'`

至

`PHPIniDir 'c:\PHP'`

**注意最后一个斜线扰乱了一切！**

现在“加载的配置文件”行在刷新“localhost/index.php”（在我重新启动 Apache2.2 之前）后得到“C:\PHP\php.ini”，并且 mysql 块在那里。MySQL 和 PHP 正在协同工作！*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-17T05:24:47.327

我一直遇到和你一样的问题。我（字面上）在 2 分钟前解决了它。

我在 Win 7 上运行 Apache 2.4 64 位。

我下载的 php 版本给了我两个 php.ini 文件：

1)php.ini-生产和 2)php.ini-开发

我以为那都是肉汁，每次我对其中一个进行更改时，我都会对另一个进行完全相同的操作。

当我第一次遇到问题时，我加载了 index.php（在我的本地服务器上）并查看了从顶部开始的第六个框，称为“加载的配置文件”。简单地说“没什么”。

然后我参考[了这个](http://www.php.net/manual/en/configuration.file.php)页面，发现 PHP（一旦开始）是如何寻找 php.ini 文件的。我尝试将开发和生产（上面引用）文件都放在上面链接指定的所有目录中。没有什么。

然后我想，到底有什么值得一试的，并将 php.ini-production 更改为“php.ini”。

巴姆。它开始工作了。如此简单的修复，但我认为 Apache 无法找到“php.ini”的原因是有道理的。该文件不存在逐字记录。

我真的希望这会有所帮助，遇到这个问题肯定很糟糕。

我很抱歉，如果这看起来很傲慢，因为它太简单了。我总是从这个网站进行故障排除，很多答案需要的不仅仅是对一个主题的基本理解，而且由于这似乎是初学者会遇到的问题（和解决方案），我想我会以某种方式把它拼出来我会在 6 个月前欣赏的。

# node.js - Mongoose - 如何将模式中间件接入“init”事件？

> ID：12221368
> 
> 赞同：13
> 
> 时间：2012-08-31T19:19:42.197
> 
> 标签：node.js, mongodb, mongoose, middleware

[Mongoose 文档](http://mongoosejs.com/docs/middleware.html)中建议我应该能够使用插入“init”钩子的中间件来控制流程。

但是，到目前为止，我仅通过“保存”和“验证”取得了成功。

当我做这样的事情时，这些中间件都不会被调用：

```
MySchema.post( "init", function (next) { console.log("post init") });
MySchema.pre( "init", function (next) { console.log("pre init") }); 
```

我错过了什么吗？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-09-04T17:34:52.113

事实证明，“init”事件/钩子在创建新模型时不会被触发，它只会在从数据库加载现有模型时被触发。看来我应该改用 pre/validate 钩子。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T22:26:47.647

我已经成功地使用了像 Mongoose 这样的中间件，然后为查询`MySchema.post('init', function() { ... });`中加载的每个模型实例执行该中间件。`find`请注意，没有`next`使用此中间件调用的参数，它应该在完成后返回。

# asp.net-mvc - ASP MVC 应用程序的存储库模式设计

> ID：12221370
> 
> 赞同：3
> 
> 时间：2012-08-31T19:19:49.063
> 
> 标签：asp.net-mvc, design-patterns, architecture, repository-pattern, data-access-layer

这更多是一个设计问题。

我正在构建一个应用程序，并且我创建了我的存储库模式结构，如下所示：

我的核心名称空间是 DAL/Repository/BusinessLogic 层程序集。

顺便说一句，我使用 Dapper.NET micro ORM 作为我的数据连接，这就是为什么你会在我的 SqlConnection 对象上看到一个扩展。

对于我的数据访问，我创建了一个基础存储库类：

```
namespace Core
{
    public class BaseRepository<T>: IDisposable where T : BaseEntity 
    {
        protected SqlConnection conn = null;

        #region Constructors
        public BaseRepository() : this("LOCAL")
        {

        }

        public BaseRepository(string configurationKey = "LOCAL")
        {
            conn = new SqlConnection(ConfigurationManager.ConnectionStrings[configurationKey].ConnectionString);
        }
        #endregion

        #region IDisposable
        public void Dispose()
        {
            conn.Dispose();
        }
        #endregion

        /// <summary>
        /// returns a list of entities
        /// </summary>
        /// <typeparam name="T">BaseEntity type</typeparam>
        /// <param name="sproc">optional parameters, stored procedure name.</param>
        /// <returns>BaseEntity</returns>
        protected virtual IEnumerable<T> GetListEntity(string sproc = null)
        {
            string storedProcName = string.Empty;
            if (sproc == null)
            {
                storedProcName = "[dbo].sp_GetList_" + typeof(T).ToString().Replace("Core.",string.Empty);
            }
            else
            {
                storedProcName = sproc;
            }

            IEnumerable<T> items = new List<T>();
            try
            {
                conn.Open();
                items = conn.Query<T>(storedProcName,
                                                     commandType: CommandType.StoredProcedure);
                conn.Close();
            }
            finally
            {
                conn.Close();
            }

            return items;
        }

    }
} 
```

对于我拥有的每个实体，可以说 ExtendedUser, Messages ，我正在像这样在 Interface-Class 对上创建它：

```
namespace Core
{
    public class ExtendedUserRepository : BaseRepository<UsersExtended>,IExtendedUserRepository
    {

        public ExtendedUserRepository() : this("PROD") 
        {
        }

        public ExtendedUserRepository(string configurationKey) : base(configurationKey)
        {
        }

        public UsersExtended GetExtendedUser(string username)
        {
            var list = GetListEntity().SingleOrDefault(u => u.Username == username);
            return list;
        }

        public UsersExtended GetExtendedUser(Guid userid)
        {
            throw new NotImplementedException();
        }

        public List<UsersExtended> GetListExtendedUser()
        {
            throw new NotImplementedException();
        }
    }
} 
```

等等

上面的代码只是实体之一：ExtendedUser。

问题是：我应该为我拥有的每个实体创建一个 Interface-ClassThatImplemenetsInterface 对吗？或者我应该只有一个 RepositoryClass 和一个 IRepository 接口，其中包含来自我所有实体的所有方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T19:42:43.197

我认为您不需要无缘无故地创建界面。我什至不明白为什么在这里需要基础存储库类。我什至认为这不是存储库而是 DAL（数据访问层），但这是定义争论。

我认为良好的 DAL 实现应该将数据库结构与业务逻辑结构解耦 - 但硬编码 sp_GetList_XXXEntityNameXXX 模式或在 DAL 之外传递存储过程名称并不是解耦。

如果您认为所有实体列表都是通过一种方式获取的，那么您非常乐观或者您的应用程序非常简单，并且您将始终需要业务逻辑中的全套实体而无需任何参数。

仅当您计划替换/包装不同的实现或在一个类中混合几个接口时才需要将接口与实现分离。否则不需要。

创建存储库时不要考虑实体。存储库包含业务逻辑，应该构建在使用场景之上。拥有像你这样的类更多的是关于数据访问层 - DAL 是建立在你在业务逻辑中需要的查询之上的。可能您永远不会一次需要所有用户的列表 - 但经常需要活动用户、特权用户等的列表。

很难预测您将需要哪些查询 - 所以我更喜欢从业务逻辑开始设计并顺便添加 DAL 方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T21:54:40.217

> 具有复杂域模型的系统通常受益于一层，例如 Data Mapper (165) 提供的层，该层将域对象与数据库访问代码的细节隔离开来。在这样的系统中，在查询构造代码集中的映射层之上构建另一个抽象层是值得的。
> 
> [http://martinfowler.com/eaaCatalog/repository.html](http://martinfowler.com/eaaCatalog/repository.html)

使用通用存储库，您可以使用常用方法，如、`findBy(array('id' => 1))`、`findOneBy(array('email' => 'john@bar.com'))`等。事实上，它将只有一个界面。`findById()``findAll()`

您将始终必须创建一个具体的实现，该实现将指示哪个是将由存储库管理的域对象以完成此操作`getUsersRepository().findAll()`

此外，如果您需要更复杂的查询，您可以在具体实现上创建新方法，例如`findMostActiveUsers()`然后在您的应用程序中重用它。

**现在，回答你的问题：**

您的应用程序将期望至少有一个接口（通用接口，具有通用方法）。但是如果你设法拥有特定的方法，就像我刚才提到的那样，你最好拥有另一个接口（例如RepositoryInterface 和UsersRepositoryInteface）。

考虑到这一点，您将只依赖存储库接口。查询构造将被具体实现封装。因此，您将能够更改您的存储库实现（例如使用完整的 ORM），而不会影响应用程序的其余部分。

# date - GMail 邮件在导入后显示错误的日期

> ID：12221371
> 
> 赞同：2
> 
> 时间：2012-08-31T19:20:07.693
> 
> 标签：date, import, gmail

我创建了一个**Google Apps**帐户，然后从我自己的基于 IMAP 的邮件服务器中对我的旧电子邮件进行了重要处理。为此，我使用了 imapsync。有一些邮件在**Thunderbird中查看时显示****良好**- 有趣的是，在旧的 IMAP 服务器**上和在 GMail 上一样**。他们正确的原始发送日期为**2008 年 12 月 2 日**。从 GMail 网络界面查看完整的邮件源（“原始邮件”）时，其**标题**为（某些地方为匿名的 XXX）：

 ******```
X-Account-Key: account6
X-UIDL: 10f6988675937085b6eXXX
X-Mozilla-Keys:                                                                                 
Return-Path: <XXX@t-online.de>
X-Flags: 0000
Delivered-To: GMX delivery to XXX@gmx.de
Received: (qmail invoked by alias); 02 Dec 2008 09:16:48 -0000
Received: from mailout09.t-online.de (EHLO mailout09.t-online.de) [194.25.134.84]
  by mx0.gmx.net (mx086) with SMTP; 02 Dec 2008 10:16:48 +0100
Received: from fwd02.aul.t-online.de 
by mailout09.sul.t-online.de with smtp 
id 1L7RN9-XXX; Tue, 02 Dec 2008 10:16:47 +0100
Received: from localhost (Tti8HrZYYh01uPSGlzL36WA4trfZ2XXX@[172.20.101.250]) by fwd02.aul.t-online.de
with esmtp id 1L7RMr-XXX; Tue, 2 Dec 2008 10:16:29 +0100
MIME-Version: 1.0
Received: from 77.185.232.243:1675 by cmpweb16.aul.t-online.de with HTTP/1.1
 (Kommunikationscenter V9-2-23 on API V3-3-19)
Date: Tue, 02 Dec 2008 10:16:29 +0100
Reply-To: "XXX@t-online.de" <XXX@t-online.de>
To: XXX@gmx.de
X-Priority: 3
X-UMS: email
X-Mailer: TOI Kommunikationscenter V9-2-23
Subject: XXX
From: "XXX@t-online.de" <XXX@t-online.de>
Content-Type: multipart/mixed;
boundary="=_71bfbbb1eca6e77241917c40d55c1078"
Message-ID: <1L7RMr-XXX@fwd02.aul.t-online.de>
X-ID: Tti8HrZYYh01uPSGlzL36WA4trfZ2Ib9MXXX@t-dialin.net
X-TOI-MSGID: 6a3e3035-aa28-XXX
X-GMX-Antivirus: 0 (no virus found)
X-GMX-Antispam: 0 (Mail was not recognized as spam)
X-GMX-UID: GcoGeJ9WIyd1gjzXXX 
```

但在 Web 界面的概览列表中，它显示为 2011 年 10 月**7 日**。该日期可能是先前导入的日期（到我自己的 IMAP 服务器）。

但我不知道谷歌从哪里获取该日期以及如何将该日期更改为消息真正发送的日期。有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-20T07:26:09.643

我发现这对我有用-

1.  通过 IMAP 将所有邮件从 GMail 复制到本地/不同的帐户文件夹
2.  现在使用他们的 Web 界面从 GMail 中删除所有邮件
3.  清空 Gmail 垃圾箱
4.  将所有邮件从本地/不同帐户复制回 GMail

来源 - [http://productforums.google.com/d/msg/gmail/0PU1gQuXNi8/HGu6GRigerMJ](http://productforums.google.com/d/msg/gmail/0PU1gQuXNi8/HGu6GRigerMJ)******

# ios - 禁止 ipad 在谷歌地图上创建地标

> ID：12221378
> 
> 赞同：9
> 
> 时间：2012-08-31T19:20:50.230
> 
> 标签：ios, ipad, google-maps, kml

我有一张用 KML 创建的谷歌地图：

![在此处输入图像描述](../Images/bdd45779e2fcb26def5c9691fb460b6b.png)

这是地图的链接：

[http://goo.gl/maps/dkfjU](http://goo.gl/maps/dkfjU)

这是完整的 KML 文件：

[https://dl.dropbox.com/u/94943007/02bb39645a3c9d95afeed5cb9bd5d07c040d8ca8a4ee56b9fb367d38.kml](https://dl.dropbox.com/u/94943007/02bb39645a3c9d95afeed5cb9bd5d07c040d8ca8a4ee56b9fb367d38.kml)

**使用 safari**使用我的 IPAD 浏览此地图时，出于某种原因，当我点击地图上的任何位置时，它会在地图上创建一个点。

**如何禁用地图上的点创建，以使 IPAD 用户无法执行此操作？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T10:10:20.723

**如果您在 safari 中浏览地图，则无法禁用添加地标**

如果您使用 iOS SDK 的地图工具包 iOS API，您**可以控制它。**

*   要将 KML 数据导入该 SDK，您可以使用 Apple 的示例代码：http: [//developer.apple.com/library/ios/#samplecode/KMLViewer/Introduction/Intro.html](http://developer.apple.com/library/ios/#samplecode/KMLViewer/Introduction/Intro.html)
*   但是 iOS SDK 中没有内置的 KML 导入。您可以在这里使用其他框架作为 mapbox/Simple-KML [https://github.com/mapbox/Simple-KML](https://github.com/mapbox/Simple-KML)

如果您想在 Safari 中执行此操作，那么您就迷路了，除非您可以**使用 JavaScript 进行操作！！！**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-01T09:23:58.637

我也检查了链接，马塞洛似乎是正确的。要拥有能够打开和关闭图层的地图，您需要构建自己的站点，并且可能使用 Javascript 和 Google-maps API 来构建它。也许从这里开始：[https ://developers.google.com/maps/documentation/javascript/tutorial](https://developers.google.com/maps/documentation/javascript/tutorial)

# continuous-integration - 让您的持续集成系统提交到存储库是不是不好的形式

> ID：12221379
> 
> 赞同：4
> 
> 时间：2012-08-31T19:21:01.970
> 
> 标签：continuous-integration

我最近负责构建我们的“软件基础架构”，因此我正在组装一个持续集成服务器。

在构建完成后，CI 系统将其创建的一些工件检入到标签中以便以后可以轻松获取它会被认为是错误的形式（或者如果构建中断，您可以更轻松地重新创建问题。）

作为记录，我们在这里使用 SVN 和 BuildMaster（免费版）。

这更像是一个最佳实践问题，而不是一个操作方法问题。（使用 BuildMaster 很容易做到）

赛斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T19:43:07.383

如果您认为这种方法对您有益，请继续这样做。只要您清楚地跟踪用于构建每个工件的源代码，就可以了。

您应该将此工件存储库与源代码存储库分开。

然而，为此使用源代码存储库有点奇怪——这些通常用于会*发生变化*的事情，而您的工件绝对*不应该这样*做。

源代码存储库也经常用于您想要检查“一切”的上下文中，例如整个主干。对于工件，您通常会寻找特定版本，并且只有在将它们导出到其他介质时才能检查所有内容。

有几个专门用于此的工件存储库，例如[Artifactory](http://www.jfrog.com/home/v_artifactory_opensource_overview)或[Apache Archiva](http://archiva.apache.org/)，但是正确备份的文件服务器将仔细考虑访问设置可能是一个简单且足够好的解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T21:41:51.780

我会说将二进制文件作为标签签入是一种气味。您的构建工件应该与构建系统中的特定构建版本相关联，并且该构建应该与特定签入相关联。您应该能够根据该信息重新创建确切的源代码。如果您正在寻找的是一个一站式功能来打开生成损坏构建的精确源代码修订，我建议您花一些时间来构建一个 Powershell 模块来为您做到这一点。

带有类似签名的东西： OpenBuild -projectName "some project name" -buildNumber "some build number"

# php - 如何在不改变价格的情况下将税率从 18% 更改为 21%

> ID：12221383
> 
> 赞同：1
> 
> 时间：2012-08-31T19:21:11.247
> 
> 标签：php, e-commerce, prestashop

我想在我的 Prestashop 中将税率从 18% 更改为 21%。但我不想改变价格，我只想表明它必须投入 18%，新的 IVA。例如，在 PDF 发票上。

我将 18% 税的所有字符串更改为“21 TAX”，它在后端工作，但是例如，当 PDF 发票似乎采用数值时，我想更改它。

该文件是类/pdf.php

任何想法？

新：代码太长，stackoverflow 不允许我在这里复制代码。这是[http://dl.dropbox.com/u/3915869/PDF.php](http://dl.dropbox.com/u/3915869/PDF.php)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T19:41:43.617

这听起来像是应该在配置文件中的那种东西。我正在查看第 666 行：

```
Configuration::get('PS_TAX') 
```

也许更改配置文件中 PS_TAX 的值？

# linux - 如何从 unix/linux 中的大文件中提取第一个 x 兆字节？

> ID：12221387
> 
> 赞同：12
> 
> 时间：2012-08-31T19:21:49.457
> 
> 标签：linux, unix, command-line, dd

我有一个大文件，我只对头部的前几兆字节感兴趣。

如何从 unix/linux 中的大文件中提取第一个 x 兆字节并将其放入单独的文件中？

（我知道 split 命令可以将文件拆分成许多部分。使用 bash 脚本我可以删除我不想要的部分。我更喜欢更简单的方法）

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-31T19:26:54.813

例如

```
 dd if=largefile count=6 bs=1M > largefile.6megsonly 
```

拼写假定为`1M`GNU dd。否则，你可以做

```
 dd if=largefile count=$((6*1024)) bs=1024 > largefile.6megsonly 
```

这再次假设 bash 风格的*算术* *评估*。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2017-01-29T15:42:46.540

Head 处理二进制文件，语法比 dd 更简洁。

```
head -c 2M input.file > output.file 
```

如果您想要文件结尾，Tail 的工作方式相同。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-31T19:24:36.857

试试命令 dd。您可以使用[“man dd”](http://linux.die.net/man/1/dd)来了解它的主要思想。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-07-28T20:58:25.747

在 Mac (Catalina) 上，`head`and`tail`命令似乎不采用大写或小写的 m（mega）和 g（giga）之类的修饰符，但会采用像这样的大整数字节数 50 MB

```
head -c50000000 inputfile.txt > outputfile.txt 
```

# php - 猫鼬不适用于 php-cgi

> ID：12221390
> 
> 赞同：0
> 
> 时间：2012-08-31T19:22:09.910
> 
> 标签：php, http, mongoose-web-server

我尝试使用带有*php-cgi的**mongoose*嵌入式网络服务器，但文件仍然显示源代码：

 *```
<?php echo "1"; ?> 
```

我将此命令与*mongoose*一起使用：

```
./mongoose -C php -I /usr/bin/php-cgi 
```

你能帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-04T14:21:56.410

you should modify the file '/etc/php5/cgi/php.ini' or '/etc/php.ini/',set the 'doc_root' same to the 'document_root'.It will be ok！</p>

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T13:50:45.640

它似乎`mongoose`工作正常，但`php`不是。

您确定`php-cgi`在您的系统上可用吗？或者可能`php-cgi`已安装但您使用的路径 ( `/usr/bin/php-cgi`) 不正确。

尝试在您的终端上运行`which php-cgi`并检查响应。如果您没有收到任何响应，则意味着您必须安装它。要`php-cgi`在 MacOS 上安装，请阅读以下内容：[http](http://wayneeaker.com/blog/2012/04/05/setting-php-cgi-mac-os-x) ://wayneeaker.com/blog/2012/04/05/setting-php-cgi-mac-os-x ，它对我有用。在 ubuntu 上更容易：`sudo apt-get install php5-cgi`.*

# magento - Magento 添加到搜索结果页面上的购物车 2< 创建无限循环

> ID：12221392
> 
> 赞同：2
> 
> 时间：2012-08-31T19:22:33.240
> 
> 标签：magento

在 1.7.0.2 Magento 搜索结果页面上，如果尝试将产品添加到购物车，则会创建无限循环。这仅在您浏览 2 个或更多搜索结果页面时发生。

与网址有关吗？“目录搜索/结果/索引/?p=2&q=searchquery”

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T12:37:08.563

我有一个非常相似的问题，除了搜索页面之外，添加到购物车按钮在任何地方都可以使用。

我设法通过增加对 js 文件夹的权限来解决问题，不确定这是否也能解决您的问题。

# c - 为什么 *p++ 与 *p += 1 不同？

> ID：12221396
> 
> 赞同：48
> 
> 时间：2012-08-31T19:22:53.390
> 
> 标签：c

考虑：

```
void foo1(char **p) { *p++; }
void foo2(char **p) { *p += 1; } 
```

和

```
char *s = "abcd";
char *a = s; 
foo1(&a); 
printf("%s", a); //abcd 
```

但如果我使用`foo2()`而不是：

```
char *a = s; 
foo2(&a); 
printf("%s", a); //bcd 
```

有人可以解释一下吗？

* * *

## 回答 #1

> 赞同：97
> 
> 时间：2012-08-31T19:25:34.317

关键是`+=`and`++`运算符的优先级。的`++`优先级高于`+=`（事实上，赋值运算符在 C 中的优先级倒数第二），所以运算

```
*p++ 
```

意味着取消引用指针，然后将指针**本身**增加 1（通常，根据指针算术规则，它不一定是一个字节，而是`sizeof(*p)`关于结果地址）。另一方面，

```
*p += 1 
```

意味着**将指针指向**的值加一（并且对指针本身不做任何事情）。

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2012-08-31T19:25:56.637

优先权。后缀`++`比前缀绑定得更紧密，`*`所以它递增`p`。与普通赋值运算符一起位于优先级列表的`+=`低端，因此它将 1 添加到`*p`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-23T18:13:13.560

前缀 ++ 和 * 的优先级相同。两者的关联性是从右到左。后缀 ++ 的优先级高于 * 和前缀 ++。后缀 ++ 的结合性是从左到右的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-05-02T13:13:42.727

让我们从`*p += 1`

我会尝试从一个不同的角度来回答这个问题... 第 1 步让我们看看运算符和操作数：在这种情况下，它是一个操作数（指针 p），我们有两个运算符，在这种情况下 *用于取消引用，+= 1 用于增量。具有更高优先级的第 2 步 * 优先于 +=

* * *

`*P++` 这个有点棘手......甚至可能是邪恶的 我们有一个操作数（p 指针）和两个运算符，只是现在用于取消引用的 * 和 ++ 后增量具有相同的优先级。（在某些表格中，帖子中的 ++ 具有更高的优先级。）

第 1 步让我们看一下运算符和操作数：在这种情况下，它是操作数，并且您有两个运算符，在这种情况下，* 表示取消引用，++ 表示递增。第 2 步哪个优先级更高？++ 的优先级高于 * 注意：即使它们具有相同的优先级，它们也会从右到左关联，同样，++ 在 * 步骤 3 之前（棘手的部分......） ++ 在哪里？它在操作数的右侧，这意味着**POST Increment在这种情况下，编译器会记下“心理笔记”以在****AFTER 之后**执行增量**它与所有其他操作员一起完成......之后是什么意思？这意味着它只会将增量应用为下一个“;”之前的最后一步。所以它将与同一“行”上的所有其他运算符一起完成注意：如果它是 *++p 那么它将在同一行上的任何其他运算符之前执行它所以在这种情况下，它等同于采取处理器的两个寄存器，一个将保存取消引用的 *p 的值，另一个将保存递增的 p++ 的值，在这种情况下有两个原因是 POST 活动......这是在这种情况下这很棘手，而且看起来很矛盾。人们会期望 ++ 优先于 *，它确实如此，只是 POST 意味着它将仅在所有其他操作数之后应用，在下一个 ';' 之前 令牌...**

 **就像我说的，棘手的部分是操作数右侧的任何增量都将被搁置一旁，并在移至下一行之前作为 LAST 操作应用......**

# mysql - 更新记录时如何防止时间戳字段更新其值

> ID：12221397
> 
> 赞同：1
> 
> 时间：2012-08-31T19:23:00.510
> 
> 标签：mysql, timestamp

可以说我以这种方式输入记录

```
"insert into table (value,time) VALUES ('4',NOW())" 
```

这就是我更新值的方式

```
"update table set value = '5' WHERE id = '1'" 
```

问题是，在最后一次查询中，时间值再次用 current_timestamp 更新，所以时间是错误的。

我怎样才能防止这种情况？（我希望时间的值在插入时保持为 current_timestamp，而不是更新）

PD：我尝试使用 sqlBuddy 从行中删除值 CURRENT_TIMESTAMP 但它再次被应用，就像没有保存更改一样。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-31T19:32:52.867

您可以像这样在更新查询中简单地添加字段的当前值：

```
update table set value = '5', timestamp_value = timestamp_value WHERE id = '1' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T19:25:43.390

只需将该字段设为默认值为 CURRENT_TIMESTAMP 的 DateTime 字段。因此它将在创建新记录时设置，但仅在您需要时更新。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T19:25:57.497

您应该将默认值设置为`CURRENT_TIMESTAMP`

```
CREATE TABLE t1 (
  ts TIMESTAMP DEFAULT CURRENT_TIMESTAMP
); 
```

这应该可以减轻你的痛苦。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2018-06-10T05:18:04.857

TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP 在更新 CURRENT_TIMESTAMP 属性时删除。

它适用于 PhpmyAdmin。

# css - iPad 上的 Wordpress CSS 下拉菜单

> ID：12221399
> 
> 赞同：1
> 
> 时间：2012-08-31T19:23:14.060
> 
> 标签：css, ipad, wordpress, menu

所以当谈到为 iPad 开发时，我真的什么都不知道。我有一个 Wordpress 网站，我正在使用 WPTouch 向移动设备展示。桌面版本正在为 iPad 展示，看起来相当不错。问题是下拉菜单功能很糟糕。菜单是 100% CSS。如果将其悬停，菜单有时会出现但会消失。如果它没有消失，点击任何链接都证明是徒劳的（只是关闭下拉菜单）。

有没有不创建 iPad 主题的简单解决方案？我的顶级类别链接也指向页面，但如有必要，我可以禁用它们来代替功能。

该网站是： http: [//pureamericannaturals.com](http://pureamericannaturals.com)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T11:32:22.117

这是我们使用的最简单的解决方案 - 将以下行添加到您的 span、li 或 anchor 中，使 iPad 在 Mac 上表现得像 safari，然后单击打开下拉菜单

```
onClick="return true" 
```

在这里查看它的实际效果 - [http://www.naturalsal.it/](http://www.naturalsal.it/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T20:30:23.153

好的，我让这个尽可能简单，方法如下：

1.  我创建了一个自定义 Wordpress 菜单。任何具有子类别项目的顶部菜单链接都被替换为以 a`#`作为 href 的自定义链接。如果顶部菜单链接没有子类别项目，它可以保留默认链接。
2.  在我`header.php`的测试中，我做了一个快速测试来查看用户代理是否是 iPad

    ```
    if (!strstr($_SERVER['HTTP_USER_AGENT'], 'iPad')) {
        wp_nav_menu( array( 'theme_location' => 'primary' ) );
            } else {
        wp_nav_menu( array( 'menu' => 'iPad Menu', 'menu_class' => 'menu_ipad' ) );
    } 
    ```

3.  `touchstart`通过自定义事件将所有内容整合在一起

    ```
    $('.menu_ipad ul a').bind('touchstart', function(e) {
        e.preventDefault();
        var newLoc = $(this).attr('href');
        window.location.href = newLoc;
    }); 
    ```

# xcode - Mac - 用于在 Xcode、终端、Safari、Firefox 中循环浏览选项卡的键盘快捷键

> ID：12221400
> 
> 赞同：9
> 
> 时间：2012-08-31T19:23:17.483
> 
> 标签：xcode, macos, tabs, terminal

我在 Mountain Lion 上运行 Xcode 4.4。

是否有用于循环浏览窗口中打开的选项卡的键盘快捷键？

我知道`COMMAND`+```循环通过 Xcode 窗口，但我想循环通过选项卡。

有这个键盘快捷键吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-31T19:27:29.737

这适用于终端、Xcode、Safari、Firefox，可能还有许多其他：

上一个标签：`COMMAND`+`{`

下一个标签：`COMMAND`+`}`

很容易记住：

*   大括号指向左右（朝向它们激活的选项卡）
*   这些键在键盘上彼此相邻，非常方便。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-08-24T05:54:40.843

这是在 Mac 应用程序之间循环选项卡的另一种方法：`ctrl`+`tab`

添加`shift`到切换方向。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-12-21T23:38:54.477

[![在此处输入图像描述](../Images/711e466c58062104756a011762311a16.png)](https://i.stack.imgur.com/zAYEp.png)

Model.m 到 AttachmentFile.swift 选项卡使用：`ctrl`+ `tab`; `ctrl`+ `shift`+`tab`后退

Model.m 到 Entitlement.swift 迷你选项卡使用：`cmd`++或`shift``{``}`

到 Xcode 的其他窗口使用：`cmd`+`~`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-11-04T13:05:36.347

命名快捷方式不会激活*最近的*选项卡，但有助于在任一方向*循环浏览选项卡。*Firefox 有一个很好的功能，使用的选项卡可以作为**堆栈**使用，并且可以以操作系统允许在最近使用的应用程序之间切换的相同方式访问（在 FF 中它`Ctrl+Tab`位于 macOS 上）。

# android - Android：无法创建 SD 卡

> ID：12221401
> 
> 赞同：0
> 
> 时间：2012-08-31T19:23:20.393
> 
> 标签：android, macos, bash, terminal

> **可能重复：**
> [很难在 mac osx 上安装 ia32-lib](https://stackoverflow.com/questions/12223192/hard-time-installing-ia32-lib-on-mac-osx)

我正在尝试使用 64 位 Java 6 在 Leopard OSX 上运行的 Eclipse 中的 ADT 创建一个新的虚拟设备，当涉及到从我得到的 SDK 管理器创建 sd 卡时

```
[2012-08-31 21:10:17 - SDK Manager] Failed to create the SD card. 
```

[2012-08-31 21:10:17 - SDK Manager] 无法在 AVD 文件夹中创建 sdcard。

我调查了一下，发现问题是SDK目录中工具目录中文件的权限，所以我将其更改为对所有文件rwxrwxrwx的完全权限，重新启动Eclipse问题仍然存在，所以我再次调查并发现因为 Android 在 32 位 JDK 上运行，因为我安装了 64 位，所以我必须安装 ia32-libs，现在的问题是，当我运行命令“sudo apt-get install ia32-libs”时，外壳响应： sudo: apt-get: command not found

确实在“man apt”下我找不到“get”选项。你对我如何安装这个库有什么建议吗？

谢谢你们，

# c# - 在Visual C#公共类中隐藏变量

> ID：12221402
> 
> 赞同：0
> 
> 时间：2012-08-31T19:23:21.000
> 
> 标签：c#, variables, constructor

这似乎是一个相当简单的问题，但我很难找到明确的答案。目前，我有一个公共类，在构造函数中我定义了一个像这样的变量：

```
private String password = "abcd123456"; 
```

然后我有一个这样的方法：

```
public String getValue(String inputValue)
{
    String returnValue = encryptor.decrypt(inputValue, password);
    return returnValue;
} 
```

该类也被定义为公共的。当我从表单中引用此类时，我正在这样做：

```
ValueGetter vg = new ValueGetter();
String decryptedValue = vg.getValue("xfr3sf342d#2"); 
```

我认为通过将密码定义为私有，只有该类才能看到它。但是，如果我在调试中，将鼠标悬停在“vg”变量上以查看对象的内容后，我可以清楚地看到密码。有没有办法让变量密码只有该类知道，但仍然在构造函数中定义？类中将有几个方法使用该变量，可以从外部表单调用，所以我宁愿在构造函数中使用它，而不是在每个方法中重新定义变量。

提前致谢！

我使用密码作为您想要隐藏变量的最明显原因，但实际上，我不希望有人为类编写接口，并得到一堆对他们没有任何意义的垃圾出对象。所以我可能有一个名为 beach 的类和一个名为 getBeachBall 的方法。它返回给我一个橙色的沙滩球，充气 xx 磅的空气等。在包含该方法的类中，我有另一个名为 TableShape 的变量。这种颜色将始终是白色的，并且不可更改。我只是想知道 tableShape 是否可以被屏蔽，因为只有 Beach 类会使用它。最初的调用者永远不会知道关于 tableColor 变量的任何事情。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T19:36:20.733

将某些东西设为私有并不会使它不可见。

访问修饰符用于编译器，它决定了您如何从代码中访问事物。将成员设为私有意味着您不能编写常规代码从对象外部访问它。

调试器可以看到所有内容，您还可以使用反射从代码中访问所有内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T19:26:24.290

在代码中存储密码是个坏主意。最接近隐藏代码的方法是通过混淆。否则，任何有权访问已编译代码的人都可以运行任何免费的反编译器并获得该值。

[这是一个 SO question，其中有一些关于存储密码的好链接](https://stackoverflow.com/questions/1054022/best-way-to-store-password-in-database)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-31T19:31:30.340

OOP 中标记为“private”的字段并不意味着“private”，就像“private corespondence”中那样。这是面向对象的设计概念，它告诉程序员从哪里可以预期任何字段更改（仅来自内部类代码）。

考虑为此目的使用 SecureString：http: [//msdn.microsoft.com/en-us/library/system.security.securestring.aspx](http://msdn.microsoft.com/en-us/library/system.security.securestring.aspx)。但是，它不会使您的代码免受反编译。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-31T20:54:52.327

虽然您可以通过调试器看到私有字符串密码的值，但我敢打赌它在监视窗口中列为私有成员。要确认，请尝试通过以下方式访问它：

```
ValueGetter vg = new ValueGetter();
String decryptedValue = vg.getValue("xfr3sf342d#2");
string password = vg.password; //won't compile because password is private 
```

您将收到一个编译器错误，指出密码是私有的。

调试器将让您查看该值，因为查看私有属性以进行调试很有用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-31T19:28:43.290

如果您将信息存储在代码中，则（可证明）您无法阻止任何人访问该信息。

> 您可以让它变得更难，您可以添加越来越多的箍让他们跳过，但归根结底，如果您将所有内容包含在您提供给用户的可执行文件中，那么他们就是控制者；他们可以访问您隐藏在其中的任何信息。
> 
> 如果你混淆了代码，你不会阻止它被反编译，你只会让它变得更难。它使项目的完全重新设计变得不切实际，但找到埋在其中的密码仍然很实用。
> 
> 您可以加密密码，但问题是可执行文件本身需要具备解密密码才能使用的所有内容。用户可以在您解密后从内存中获取密码，或者只需提取加密密码和加密密钥并自行解密。
> 
> 如果用户无法访问该信息很重要，那么您根本无法将其包含在您在任何情况下提供给他们的程序代码中。

[资源](http://social.msdn.microsoft.com/Forums/en-US/csharpgeneral/thread/7a915daa-1355-4f85-beb3-e8910a635cdf/#0acc7448-b5b9-45f4-9cb2-0d8a4c0999ba)

# html - 从游戏服务器接收信息并立即更新到网站

> ID：12221405
> 
> 赞同：-1
> 
> 时间：2012-08-31T19:23:34.107
> 
> 标签：html

参考标题。

是否可以从游戏服务器接收信息并在我们的网站上立即更新？

游戏服务器示例：http: [//maple.asiasoftsea.com/index](http://maple.asiasoftsea.com/index)

如果可能，我应该使用哪种方法？

是否视为非法行为？

非常感谢。

P/S：对不起，如果我把错误的标签放错了。因为我不知道我应该使用哪个标签。很抱歉问了一个不好的问题。

并感谢那些纠正我的人。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T19:45:30.873

你已经从你的帖子中释放了很多东西，但无论如何我都会深入探讨。

* * *

> 是否可以从游戏服务器接收信息并在我们的网站上立即更新？

是的，这是可能的...

> 如果可能，我应该使用哪种方法？

...布尔。我快到那里了。

你最好的选择是使用[jQuery.ajax()](http://api.jquery.com/jQuery.ajax/)。这将允许您在不重新加载网站的情况下更新您的网站。这通常通过单击一个按钮来实现，该按钮将从您获取新信息的任何地方提取新信息。

但是，您必须考虑“游戏服务器”使用什么来显示其内容，以及如何检索它。我猜这个内容不是托管在你自己的域上的，所以你需要制作一个跨域的 AJAX 脚本。可以在[这里](http://usejquery.com/posts/the-jquery-cross-domain-ajax-guide)找到一个很好的教程。

您提到您希望页面自动加载新内容。发出请求的通常方式`AJAX`是通过用户交互，但我想你可以让它每隔一段时间检查新内容，或者让它检查当前内容和远程内容，看看是否有变化，如果有，拉入新内容。

> 是否视为非法行为？

这样做是否违法？如果它是您自己的网站和您自己的内容，那么不是。如果是其他人的，您可能应该在使用之前获得他们的许可。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T19:39:46.870

取决于您是否拥有游戏服务器，如果不是，他们是否提供了一个 api 供您从中收集信息（我相信反恐精英有一个用于此的 api）。如果您有访问权限，那么 Comet 就是您需要研究的关键字/流行语。根据[维基百科](http://en.wikipedia.org/wiki/Comet_%28programming%29)：

> Comet 是一种 Web 应用程序模型，其中长期持有的 HTTP 请求允许 Web 服务器将数据推送到浏览器，而无需浏览器显式请求它

使用的技术包括长轮询、隐藏 iframe 和使用 Java 小程序的旧技术。

一个示例实现是[ape](http://www.ape-project.org/)或 ajax 推送引擎。它是一个实现ajax推送的开源项目。包括一个服务器和 js 框架。

可以在这里找到一个长轮询的例子，[这里](http://www.webreference.com/programming/javascript/rg28/index.html?utm_source=twitterfeed&utm_medium=twitter)有一个例子的堆栈溢出帖子：[实现彗星的在线教程（服务器推送）](https://stackoverflow.com/questions/824604/online-tutorials-for-implementing-comets-server-push)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T19:35:21.497

如果您不希望您的网页在每次请求/响应/更新时重新加载，我建议您考虑使用 Ajax 之类的东西。

# c# - 将一个 ListItem 绑定到 .NET 表单中的多个下拉列表

> ID：12221406
> 
> 赞同：1
> 
> 时间：2012-08-31T19:23:41.627
> 
> 标签：c#, .net, winforms, binding

也许这对你们 .NET 人来说是一个非常简单的问题，但由于我来自 MFC C++ 开发团队，这种行为让我们的开发团队都想知道发生了什么。（在 MFC 中，当我们创建下拉数据源时，源是共享的，但每个下拉列表的值不受影响）

这是一个非常简单的情况。我的表格中有 3 个要求街道的下拉列表。您所在的街道和其他 2 条最近的街道。这些下拉列表中的每一个都具有相同的数据源。所以我们所做的是（顺便说一句，ComboList 只是一个继承 ListItem 并具有更多功能的类）

```
//Combo Street
ComboList cboNomRue = new ComboList();
Tools.GetCombo(cboNomRue, Tools.ComboTypeRt.RT_NOM_RUE, true, true);
ddlNomRue.DisplayMember = "Numero";
ddlNomRue.ValueMember = "ID";
ddlNomRue.DataSource = cboNomRue;

//Combo Street From
ddlDe.DisplayMember = "Numero";
ddlDe.ValueMember = "ID";
ddlDe.DataSource = cboNomRue;

//Combo Street To
ddlA.DisplayMember = "Numero";
ddlA.ValueMember = "ID";
ddlA.DataSource = cboNomRue; 
```

使用此代码，当用户更改 ddlNomRue 中的值时，3 下拉列表更改为该值！所以为了解决这个问题，我做到了。

```
//Combo Street
ComboList cboNomRue = new ComboList();
Tools.GetCombo(cboNomRue, Tools.ComboTypeRt.RT_NOM_RUE, true, true);
ddlNomRue.DisplayMember = "Numero";
ddlNomRue.ValueMember = "ID";
ddlNomRue.DataSource = cboNomRue;

ComboList cboNomRue2 = new ComboList(cboNomRue);
ComboList cboNomRue3 = new ComboList(cboNomRue);

//Combo Street From
ddlDe.DisplayMember = "Numero";
ddlDe.ValueMember = "ID";
ddlDe.DataSource = cboNomRue2;

//Combo Street To
ddlA.DisplayMember = "Numero";
ddlA.ValueMember = "ID";
ddlA.DataSource = cboNomRue3; 
```

我不喜欢这样，因为当真正需要一个变量时它会复制变量。这是处理这种情况的好方法还是我还能做些什么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T10:25:26.287

我不清楚您使用的 ComboList 类，但是如果您使用 List 来存储要在 comboBox 中显示的项目是更好的选择。

您采用的方式不好，因为一次又一次地创建对象。要克服这个问题，请使用 List 并将其称为函数 AsReadOnly();

例子：

```
 List<string> Mylist = new List<string>();
            Mylist.Add("salman");
            Mylist.Add("khan");
            Mylist.Add("yousafzai");
            Mylist.Add("ranizai");
            Mylist.Add("kachokhail");

            this.tUsersTableAdapter.Fill(this.dbAIASDataSet.tUsers);
            comboBox1.DataSource = Mylist.AsReadOnly();
            comboBox1.DisplayMember = "ID";
            comboBox1.ValueMember = "ID";

           comboBox2.DataSource = Mylist.AsReadOnly();
           comboBox2.DisplayMember = "ID";
           comboBox2.ValueMember = "ID"; 
```

但是如果你必须使用 ComboList 的对象，那么在 ComboList 中实现接口 icloneable 或使用任何其他方式来创建浅拷贝。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T01:25:59.343

`BindingContext`表单会自动为表单上支持数据绑定的所有对象创建一个默认值。`BindingContext`允许表单知道该对象中集合条目的计数和当前位置。当您在第一个列表中选择一个项目时，您会更改其位置，并且由于其他两个控件绑定到相同的`BindingContext`，它们也都会更改。要解决此问题，只需`BindingContext`为每个控件创建一个不同的控件，如下所示：

```
ddlNomRue.BindingContext = new BindingContext();
ddlDe.BindingContext = new BindingContext();
ddlA.BindingContext = new BindingContext(); 
```

现在您可以将相同的绑定`ComboList`到所有三个控件，您仍然会得到您想要的行为。

# uitabbar - 在 UITabBarItem 上检测 UIControlEventTouchDown

> ID：12221411
> 
> 赞同：1
> 
> 时间：2012-08-31T19:24:02.483
> 
> 标签：uitabbar, uicontrol, uicontrolevents

我想在用户触摸 UITabBarItem 后立即设置标签栏的选定图像。

目前在亮点出现之前有一个小的延迟。有没有办法在 UITabBarItem 级别获取 UIControlEvents ？

# python - 在 Windows 中为 python 3 安装 Swampy

> ID：12221420
> 
> 赞同：2
> 
> 时间：2012-08-31T19:24:58.373
> 
> 标签：python, windows-7, module, python-3.x

我是一名 Python 初学者，使用“Think Python”一书，我必须在其中安装模块名称 Swampy。说明和下载提供的链接有一个[tar.gz](http://pypi.python.org/pypi/swampy/2.1.1)文件。[我在这里](http://code.google.com/p/swampy/downloads/detail?name=swampy.1.4.python3.zip&can=2&q=)用谷歌搜索找到了 swampy 的 python 3 版本。模块的所有[设置工具](http://pypi.python.org/pypi/setuptools#downloads)都在 python 3 下。我很迷茫，我该如何安装/使用模块？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T20:06:27.323

您不必安装 Python 模块。只有`import`他们。（其实`swampy`就是一个包，基本上就是模块的集合。）

```
import swampy 
```

当然，Python 必须知道*从*哪里导入它们。在这种情况下，您要做的最简单的事情是从包含文件夹的目录中调用 Python `swampy`，因为解释器将首先在当前目录中搜索模块。`os.chdir`从任何地方调用 Python 后，您都可以等效地访问该目录。

不要担心`setuptools`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T20:50:01.827

对于 python 2.7，我转到 C:/Python27/Scripts 目录，然后尝试**"easy_install"**或**"pip install"**。可以是一个文件。如果没有帮助：尝试解压缩下载的源文件并从命令提示符执行**“python setup.py install”**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-06T21:52:49.847

该链接是正确的，但即使对于经验丰富的 Windows 开发人员来说，解释也很模糊。它假定对 Python 安装过程 IMO 有太多了解。

例如“使用此代码的最简单方法是将其解压缩到您的主目录中，cd 进入解压缩的目录并在那里工作。” “主目录”是什么意思？然后是对“解压缩目录”的引用，我认为它是指主目录。名称的变化令人困惑。

不过，假设解压缩到 C:\Python33\lib\swampy-2.1，然后从那里开始工作。这是什么意思？我只能假设这意味着将您的代码保存在沼泽的“主目录”中。将 Python 代码保存在库目录中并不是最佳做法。我使用 \dev\python\test\ 但后来

```
Python 3.3.3 (v3.3.3:c3896275c0f6, Nov 18 2013, 21:18:40) [MSC v.1600 32 bit (Intel)] on win32
Type "copyright", "credits" or "license()" for more information.
>>> import swampy
Traceback (most recent call last):
  File "<pyshell#0>", line 1, in <module>
    import swampy
ImportError: No module named 'swampy' 
```

但是，如果将 swampy 目录简单地重命名为 swampy（来自 swampy-2.1），那么一切正常！

```
>>> import swampy
>>> from swampy.Gui import *
>>> g=Gui()
>>> g.title('Swampy.GUI')
>>> g.mainloop() 
```

仅供参考，这是我的路径（我的开发驱动器是 E: 而不是 C:)

```
E:\Python33\Lib>path
PATH=E:\Python33\;E:\WINDOWS\system32;E:\WINDOWS;E:\WINDOWS\System32\Wbem;E:\Program Files\Microsoft SQL Server\100\Tool
s\Binn\;E:\Program Files\Microsoft SQL Server\100\DTS\Binn\;E:\WINDOWS\system32\WindowsPowerShell\v1.0;E:\Program Files\
Microsoft\Web Platform Installer\;E:\Program Files\Microchip\xc8\v1.21\bin;E:\Program Files\GtkSharp\2.12\bin 
```

而且我没有其他帖子建议的 PYTHONPATH 环境变量。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-05-15T19:39:12.023

一种简单的方法是将内容解压缩到 Python 根目录中自己的目录中。然后将 Python 指向文件 **modulepaths.pth**中模块的位置 （您可能需要在 python 安装的根目录中创建此文件。）您可以放置​​完整路径或仅放置相对路径。我的 modulepaths.pth 看起来像这样，有一个相对路径和一个完整路径：

```
swampy
c:\Python34\arduino 
```

# php - 设置 Zend Framework 2

> ID：12221431
> 
> 赞同：3
> 
> 时间：2012-08-31T19:25:56.750
> 
> 标签：php, zend-framework2

我在共享服务器上设置 ZF2。它在本地主机上完美运行，但在共享服务器上我收到此错误：

```
 Warning: Unexpected character in input: '\' (ASCII=92) state=1 in /home/content/82/5123082/html/tmp/ZendSkeletonApplication/public/index.php on line 12

Parse error: syntax error, unexpected T_STRING in /home/content/82/5123082/html/tmp/ZendSkeletonApplication/public/index.php on line 12 
```

**在 index.php 代码的第 12 行：**

```
Zend\Mvc\Application::init(include 'config/application.config.php')->run()->send(); 
```

**账号运行的PHP版本：** PHP 5.3.13 (cli) (build: May 14 2012 16:26

**使用的 Linux 服务器是：** Linux ...secureserver.net ... #1 SMP Fri Jul 15 08:15:44 EDT 2011 i686 i686 i386 GNU/Linux CentOS release 5.5（Final）

我没有使用医生——它现在甚至没有加载 Skeleton 应用程序——好像命名空间有问题，它没有加载它。好像运行的 PHP 版本不是 PHP 5.3。

任何想法我做错了什么？我尝试通过作曲家安装它并从我的本地机器上传一个工作解决方案，但都没有工作..

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-31T22:11:31.613

显然，服务器在 SSH 控制台中运行 PHP 5.3，但 Apache 服务器仍在使用 PHP 5.2，因此无法使用命名空间。

因此，即使该帐户是为“PHP 5.3”设置的，也需要更改 .htaccess 以支持它。

为了解决这个问题，将以下行添加到 /public/ 文件夹中的 .htaccess 文件中：

```
AddHandler x-httpd-php5-3 .php 
```

# php - PHP-5.3.16 Apache 在图像上传/调整大小时崩溃

> ID：12221437
> 
> 赞同：0
> 
> 时间：2012-08-31T19:26:22.137
> 
> 标签：php, apache

我正在使用简单的图像上传/调整大小功能。上传图像后，Apache 会显示“发送错误报告”/“不发送”警报。

上传的图像是 .jpeg 和 apache`imagecreatefromjpeg`在线崩溃。

我正在使用：PHP-5.3.16

上传适用于：PHP-5.2.17 版本，但由于代码功能，我必须使用更高版本。

**有谁知道如何修复这个错误，或者如何使它与 PHP-5.3.x 一起工作？**

*PS：我尝试使用 PHP-5.4.6 但它也显示此错误。*

这是 Apache 错误日志：

```
[Fri Aug 31 22:36:43 2012] [warn] RSA server certificate is a CA certificate (BasicConstraints: CA == TRUE !?)
[Fri Aug 31 22:36:43 2012] [warn] RSA server certificate CommonName (CN) `openserver' does NOT match server name!?
[Fri Aug 31 22:36:43 2012] [warn] RSA server certificate is a CA certificate (BasicConstraints: CA == TRUE !?)
[Fri Aug 31 22:36:43 2012] [warn] RSA server certificate CommonName (CN) `openserver' does NOT match server name!?
[Fri Aug 31 22:36:43 2012] [warn] RSA server certificate is a CA certificate (BasicConstraints: CA == TRUE !?)
[Fri Aug 31 22:36:43 2012] [warn] RSA server certificate CommonName (CN) `openserver' does NOT match server name!?
[Fri Aug 31 22:36:43 2012] [warn] RSA server certificate is a CA certificate (BasicConstraints: CA == TRUE !?)
[Fri Aug 31 22:36:43 2012] [warn] RSA server certificate CommonName (CN) `openserver' does NOT match server name!?
[Fri Aug 31 22:36:43 2012] [warn] RSA server certificate is a CA certificate (BasicConstraints: CA == TRUE !?)
[Fri Aug 31 22:36:43 2012] [warn] RSA server certificate CommonName (CN) `openserver' does NOT match server name!?
[Fri Aug 31 22:36:43 2012] [warn] Init: Name-based SSL virtual hosts only work for clients with TLS server name indication support (RFC 4366)
[Fri Aug 31 22:36:43 2012] [notice] Apache/2.2.22 (Win32) mod_ssl/2.2.22 OpenSSL/0.9.8u configured -- resuming normal operations
[Fri Aug 31 22:36:43 2012] [notice] Server built: Mar 19 2012 19:56:33
[Fri Aug 31 22:36:43 2012] [notice] Parent: Created child process 728
[Fri Aug 31 22:36:43 2012] [notice] Disabled use of AcceptEx() WinSock2 API
[Fri Aug 31 22:36:44 2012] [warn] RSA server certificate is a CA certificate (BasicConstraints: CA == TRUE !?)
[Fri Aug 31 22:36:44 2012] [warn] RSA server certificate CommonName (CN) `openserver' does NOT match server name!?
[Fri Aug 31 22:36:44 2012] [warn] RSA server certificate is a CA certificate (BasicConstraints: CA == TRUE !?)
[Fri Aug 31 22:36:44 2012] [warn] RSA server certificate CommonName (CN) `openserver' does NOT match server name!?
[Fri Aug 31 22:36:44 2012] [warn] RSA server certificate is a CA certificate (BasicConstraints: CA == TRUE !?)
[Fri Aug 31 22:36:44 2012] [warn] RSA server certificate CommonName (CN) `openserver' does NOT match server name!?
[Fri Aug 31 22:36:44 2012] [warn] RSA server certificate is a CA certificate (BasicConstraints: CA == TRUE !?)
[Fri Aug 31 22:36:44 2012] [warn] RSA server certificate CommonName (CN) `openserver' does NOT match server name!?
[Fri Aug 31 22:36:44 2012] [warn] RSA server certificate is a CA certificate (BasicConstraints: CA == TRUE !?)
[Fri Aug 31 22:36:44 2012] [warn] RSA server certificate CommonName (CN) `openserver' does NOT match server name!?
[Fri Aug 31 22:36:44 2012] [warn] Init: Name-based SSL virtual hosts only work for clients with TLS server name indication support (RFC 4366)
[Fri Aug 31 22:36:45 2012] [warn] RSA server certificate is a CA certificate (BasicConstraints: CA == TRUE !?)
[Fri Aug 31 22:36:45 2012] [warn] RSA server certificate CommonName (CN) `openserver' does NOT match server name!?
[Fri Aug 31 22:36:45 2012] [warn] RSA server certificate is a CA certificate (BasicConstraints: CA == TRUE !?)
[Fri Aug 31 22:36:45 2012] [warn] RSA server certificate CommonName (CN) `openserver' does NOT match server name!?
[Fri Aug 31 22:36:45 2012] [warn] RSA server certificate is a CA certificate (BasicConstraints: CA == TRUE !?)
[Fri Aug 31 22:36:45 2012] [warn] RSA server certificate CommonName (CN) `openserver' does NOT match server name!?
[Fri Aug 31 22:36:45 2012] [warn] RSA server certificate is a CA certificate (BasicConstraints: CA == TRUE !?)
[Fri Aug 31 22:36:45 2012] [warn] RSA server certificate CommonName (CN) `openserver' does NOT match server name!?
[Fri Aug 31 22:36:45 2012] [warn] RSA server certificate is a CA certificate (BasicConstraints: CA == TRUE !?)
[Fri Aug 31 22:36:45 2012] [warn] RSA server certificate CommonName (CN) `openserver' does NOT match server name!?
[Fri Aug 31 22:36:45 2012] [warn] Init: Name-based SSL virtual hosts only work for clients with TLS server name indication support (RFC 4366)
[Fri Aug 31 22:36:46 2012] [notice] Child 728: Child process is running
[Fri Aug 31 22:36:46 2012] [notice] Child 728: Acquired the start mutex.
[Fri Aug 31 22:36:46 2012] [notice] Child 728: Starting 32 worker threads.
[Fri Aug 31 22:36:46 2012] [notice] Child 728: Listening on port 443.
[Fri Aug 31 22:36:46 2012] [notice] Child 728: Listening on port 80. 
```

# layout - 修复了 html 中的高度 div 分页

> ID：12221441
> 
> 赞同：0
> 
> 时间：2012-08-31T19:26:38.377
> 
> 标签：layout, html, pagination

我的网站有一个内容 div，它必须具有特定的高度。假设是 800 像素。

我正在寻找一种可以在该 div 中输入内容并使 div 将其分解并通过一些“下一个”锚点使其可用的方法。

在常规的 html 页面中是否有可能，没有 wordpress 没有 drupal 没有插件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T19:29:33.443

使用溢出设置您的 div:hidden; 然后添加一个按钮使其向下滚动 800px

您还应该使用溢出：滚动-y；让它变得简单。

# python - 忽略停止迭代

> ID：12221443
> 
> 赞同：3
> 
> 时间：2012-08-31T19:26:54.510
> 
> 标签：python, csv, error-handling, stopiteration

我刚刚阅读了一堆关于如何在 Python 中处理 StopIteration 错误的帖子，但是我在解决我的特定示例时遇到了麻烦。基本上，我有一个带有很多前缀的 csv 文件。此文件有两列带标题：字数和计数。计数是该前缀出现的频率。我还有另一个包含公司名称列表的文件。前缀文件从公司文件中每个公司名称的第一个单词中获取前缀。我正在尝试删除重复项，而我现在想要做的是：

每次发生此错误时忽略 StopIteration 错误。

换句话说，我不必在下面写下所有注释掉的“if”语句，我只想要一行说：如果生成了 StopIteration 错误，只需通过将有问题的“前缀”视为某种方式来忽略该错误，就好像它是前缀文件中出现两次以上的前缀，因此我们应该返回不包含前缀的公司名称的值。我意识到这忽略了前缀文件中存在不同的前缀值和公司名称的实际前缀这一事实，但通常它与 python 和 excel 之间存储的非美式英文字母以及其他一些看起来不是特别系统的方式，所以我稍后会手动删除它们。

我的代码是：

```
def remove_prefix(prefix, first_name):
   #try:
   #EXCEPTIONS:
   #if '(' in prefix:
   #    prefix = prefix[1:]
      #if ')' in prefix:
    #  prefix = prefix[:-1]
    """
      if prefix == "2-10":
        prefix = "2"
      if prefix == "4:2:2":
        prefix = "4"
      if prefix == "5/0" or prefix == "5/7" or prefix == "58921-":
        prefix = "5"
    """
    #except StopIteration:
   #    pass

   print(first_name, prefix)
   input_fields = ('Word', 'Count')
   reader = csv.DictReader(infile1, fieldnames = input_fields)
   #if the prefix has a frequency of x >=2 in the prefix file, then return first_name  without prefix
   #else, return first_Name
   infile1.seek(0)
   #print(infile1.seek(0))
   next(reader)
   first_row = next(reader)
   while prefix != first_row['Word'] and prefix[1:]!= first_row['Word']:
      first_row = next(reader)
      #print(first_name, prefix)
      #print(first_row, first_name, prefix, '\t' + first_row['Word'], prefix[1:])
   if first_row['Count'] >= 2:
      length = len(prefix)
      first_name = first_name[length+1:]
  #print("first name is ", first_name)
  return first_name 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T19:47:07.627

我不认为这是由你认为的原因造成的。StopIteration 异常是在生成器 ( `reader`) 用完要读取的行时引起的。

例如：

```
def g():
    "generates 1 (once)"
    yield 1

a = g()
next(a) # is 1
next(a) # StopIteration exception (nothing left to yield) 
```

要解决此问题，您可以`next`尝试将其包装起来，除了（通过）：

```
while prefix != first_row['Word'] and prefix[1:]!= first_row['Word']:
    try:
        first_row = next(reader)
    except StopIteration:
        pass 
```

*然而，正如大卫指出的那样，这可能不是你应该这样做的方式。*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T19:39:49.950

这可以通过首先从文件中创建前缀列表，然后`startswith`在每个前缀上使用该方法来以更简单的方式完成。例如：

```
reader = csv.DictReader(infile1)
# # this is assuming there are only two columns in the file: Word and Count
prefixes = [l["Word"] for l in list(reader) if int(l["Count"]) >= 2]

def remove_prefix(first_name):
    for p in prefixes:
        if first_name.startswith(p):
            return first_name[len(p):]
    return first_name 
```

那不是更简单吗？另一个优点是它只读取文件一次，而不是为要替换的每个单词重新打开它。

# android - AirDroid - 它是如何工作的

> ID：12221445
> 
> 赞同：1
> 
> 时间：2012-08-31T19:26:55.187
> 
> 标签：android

我一直在互联网上搜索，但我没有找到我想要的，所以我想知道你们是否知道如何做到这一点。

有一个名为 AirDroid 的应用程序，我想你知道，但对于那些不知道的人来说，它可以在你的设备和浏览器之间进行通信。因此，如果两者都连接在同一个 Wi-Fi 上，您就可以通过互联网控制您的智能手机。

你们知道我要学什么吗？Android SDK 有一些启用它的类？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-31T19:32:17.240

> Android SDK 有一些启用它的类？

不具体。

> 你们知道我要学什么吗？

我将假设“做”意味着“编写我自己的同一件事的实现”。

由于它是一个 Web 应用程序，因此您需要学习如何使用一些适合在嵌入式设备上运行的轻量级框架来编写 Web 应用程序。

# asp.net-mvc-3 - MVC3 授权属性

> ID：12221447
> 
> 赞同：0
> 
> 时间：2012-08-31T19:27:14.070
> 
> 标签：asp.net-mvc-3, authorize

如何将角色和用户添加到控制器上的相同操作。

我试过：

```
[Authorize(Roles = "admin" , Users = "userName")]
public ActionResult Action()
{
....
....
}

[Authorize(Roles = "admin")]
[Authorize(Users = "userName")]
public ActionResult Action()
{
....
....
} 
```

我必须创建自定义授权属性吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T19:40:46.937

这是正确的方法：

```
[Authorize(Users="userName", Roles="admin")] 
```

# ruby-on-rails - 将路线映射到 Sinatra 中的布局，帮我清理一下

> ID：12221450
> 
> 赞同：1
> 
> 时间：2012-08-31T19:27:37.193
> 
> 标签：ruby-on-rails, ruby, sinatra

我是一个越来越喜欢使用 sinatra 的前端人员。我目前正在构建一个应用程序，并试图找到一种优雅的方式来干燥 myapp.rb 文件中的路线。

目前我有这些路线：

```
get '/' do
  haml :content 
end

get '/content' do
  haml :content, :layout => :empty
end

get '/show_layout' do
  haml :show_layout
end

get '/conversion' do
  haml :conversion, :layout => :empty
end

get '/optout' do
  haml :optout, :layout => false
end

get '/terms' do
  haml :terms, :layout => :empty
end 
```

关于模板，我知道我可以做这样的事情来组合它们：

```
get '/:name' do
  haml params[:name].to_sym
end 
```

但是布局呢？这里只有 2 个布局，layout.haml 和 empty.haml（:layout 和 :empty），如果算上 3 个 :layout => false

这是最好使用哈希完成的事情吗？就像是：

```
layout_map = {
  "" => "",
  :content => "",
  :show_layout => "",
  :conversion => :empty,
  :optout => false,
  :terms => :empty    
}

get '/:name' do
  haml params[:name].to_sym, :layout => layout_map[:name]
end 
```

似乎它在正确的轨道上，但我无法让它正常工作。

感谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T20:03:11.327

您可以使用您的：

```
get '/:name' do
  haml params[:name].to_sym
end 
```

加上将设置您的布局的前路线：

```
before '/:name' do
  layout_map = {
    :content => "",
    :show_layout => "",
    :conversion => :empty,
    :optout => false,
    :terms => :empty    
  }
  set :layout => layout_map[params[:name]]
end 
```

这将根据`params[:name]`每次调用设置您的布局。但是要小心`.sim`每条路线。如果有人调用了许多 404，您会创建很多没有被垃圾收集的死符号，最终会使您的应用程序崩溃。最好这样做：

```
get '/:name' do
  halt 404 unless File.exist?("views/#{params[:name]}.haml")
  time = File.stat("views/#{params[:name]}.haml").ctime
  last_modified(time)
  haml params[:name].intern
end 
```

`params[:name]`如果有一个具有该名称的文件，这只会创建一个符号。所以你是安全的，因为符号已经存在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T14:55:44.123

感谢大家的帮助。由于应用程序的一些其他要求，最终将其作为我的解决方案。

```
get "/:base_route/" do
  haml :"#{params[:base_route]}/content", :layout => :"#{params[:base_route]}/layout"  
end

get "/:base_route/:name" do
  layout_map = {
    :landing => :layout,
    :content => :empty,
    :show_layout => :layout,
    :conversion => :empty,
    :terms => :empty    
  }        
  haml :"#{params[:base_route]}/#{params[:name]}", :layout => :"#{params[:base_route]}/#{layout_map[params[:name].to_sym]}"
end 
```

# java - 使用递归 xsl 文件

> ID：12221454
> 
> 赞同：0
> 
> 时间：2012-08-31T19:28:47.340
> 
> 标签：java, xml, xslt, xsd

我一直在开发两个 xsl（例如 A 和 B）文件。*A.xsl*依赖于*B.xsl*。在*B.xsl*文件中，我对一些元素进行了硬编码，之后它应该依赖于*A.xsl*。反正有没有递归检查这两个 xsl 文件。

有没有办法做到这一点。或者如果没有？如果不适用，请回答“否”。

在这里，我对转换 xml 文件感兴趣，其中大多数 xml 元素都很常见，然后我想开发一个 xsl 文件，该文件具有一个模板的共同元素，并使用 include 从其他 xsl 文件中调用它。然而，我被困在一个元素有必要硬编码的地方，然后应该再次使用通用 xsl。下面是例子： 这个例子是通用的，我不想在每次用于许多其他要开发的 xsls 时硬编码通用 xsl 文件。

这是输入 xml 的示例。

```
<element>
   <subelement></subelement>
</element> 
```

这是输出 xml 的示例。

```
<element>
   <element2></element2>
   <subelement></subelement2>
</element> 
```

这是 A.xsl

```
<xsl:inculde href="B.xsl">
<xsl:call-template name="ele"/> 
```

这是 B.xsl

```
<xsl:template name="ele">
<xsl:copy-of select="element"/>
</xsl:template> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T18:55:40.187

*尚不完全清楚 A.xsl 和 B.xsl相互依赖*是什么意思，但听起来您可能正在寻找一种方法来为两个在常见但在某些方面有所不同。

具体而言，我将假设您心中有两个转换，我将它们称为红色和绿色（以避免将它们与您的 A 和 B 混淆，它们可能完全相同，也可能不完全相同），它们具有财产：

*   许多元素（例如，元素 C1、C2、... Cn）在两个变换中的处理方式相同。
*   某些元素（D1、D2、... Dn）的处理方式不同。
*   此外，可能存在仅在 Red 变换的输入中可见的元素 R1、R2、...Rn 和仅在 Green 变换的输入中可见的 G1、G2、...Gn。

有几种方法可以在 XSLT 中构建红色和绿色转换。其中两个最容易解释是这些。

（1）制作三个样式表：C.xsl（通用元素）、R.xsl（R元素和D元素的红色变换）、G.xsl（G元素和D元素的绿色变换） . R.xsl 和 G.xsl 都包含或导入 C.xsl，因此具有单一处理方法的公共元素的代码仅在一个地方编写和维护。

(2) 制作两个样式表。Red.xsl 定义了完整的 Red 转换；它涵盖了常见的元素 C1、C2 等，不同处理的元素（D1、D2 等）以及 Red 变换特有的元素（R1、R2 等）。它什么也不进口。

Green.xsl 导入 Red.xsl 并包含 D 和 G 元素的模板。因为它没有 C 元素的模板，所以 C 元素在绿色转换中的处理方式与在红色转换中的处理方式相同。因为 Green.xsl 是 Green 转换的主要样式表，所以 D 元素的 Green.xsl 模板将比相同元素的 Red.xsl 模板具有更高的优先级。R 元素的模板也将被导入，但由于输入中没有出现 R 元素，因此它们不会匹配任何内容并且不会造成任何伤害。

您需要在任何好的参考书（或 XSLT 规范，它是完全可读的技术散文）中阅读的内容是`xsl:import`and`xsl:include`元素、`priority`on 属性和*导入优先级*`xsl:template`的概念。

# date - 我可以使用 api 在 shopify 博客上更改日期吗？

> ID：12221455
> 
> 赞同：0
> 
> 时间：2012-08-31T19:28:55.190
> 
> 标签：date, curl, blogs, shopify, put

我必须简短一点，时间不多了……

我正在尝试回溯一些在我们的商店推出前写的博客文章。

我在命令行中使用 curl，我可以发布新的博客文章，也可以对现有的博客文章进行 PUT 更改，但我还不能调整现有文章的日期。

你能帮助我吗？

谢谢！

这是我的卷曲请求...

```
curl -i  -H "Content-Type: application/json" -H "Accept: application/json" -X PUT -d '{ "article": {"id": xxxxxx, "created_at": "2012-08-25"}}' https://key:passwordlongstringhere@storename.myshopify.com/admin/blogs/#blogID/articles/#articleID.json 
```

是的，所有适当的 xxxx 和 #blogID 在我的请求中都有正确的信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T21:48:56.663

无法通过 API 或管理员设置创建日期。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-02T01:03:59.560

正如 John 所提到的，该`created_at`字段是只读的。但是，您**可以**根据需要更改`published_at`日期以回溯帖子。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T12:17:03.347

除非您将 --sslv3 添加到 curl 参数，否则连接将失败并显示“curl: (35) Unknown SSL protocol error in connection to shopname.myshopify.com:443”。我已成功使用您的示例和此参数通过 api 更改博客文章的发布日期。

# etl - 使用 StAX / Kettle (Pentaho) 读取 XML 文件

> ID：12221456
> 
> 赞同：0
> 
> 时间：2012-08-31T19:29:02.220
> 
> 标签：etl, business-intelligence, pentaho, stax, kettle

我正在使用 Pentaho (Spoon / Kettle) 进行 ETL 过程，我想在其中读取 XML 文件并将元素值存储到 db。

这适用于“从 XML 获取数据”-组件...但是 XML 文件很大，有几个千兆字节，因此读取文件需要很长时间。

Pentaho 维基 说：

> 现有的从 XML 获取数据步骤更易于使用，但使用需要在内存处理中的 DOM 解析器，当这些部分非常大时，甚至清除文件的某些部分是不够的。
> 
> XML 输入流 (StAX) 步骤使用完全不同的方法来解决具有非常大和复杂的数据结构以及需要非常快速的数据加载的用例......

因此，我现在正尝试对 StAX 做同样的事情，但它似乎并没有按计划进行。我正在使用只有一个元素组的 XML 文件对此进行测试。读取该文件，然后将其映射/插入到表中......但现在我得到多行到表中，其中所有值都是“未定义”的，有些行我有正确的值。表中总共有 92 行，即使它应该只有一行。

流程如下：

1) 用 StAX 读取

2) 修改后的 Java Script 值

3) 输出到数据库

在第 2 步）我正在执行以下操作：

> 变量编号；
> 
> if ( xml_data_type_description.equals("CHARACTERS") && xml_path.equals("/labels/label/id") ) { id = xml_data_value; } ...

我以[http://forums.pentaho.com/showthread.php?83480-XPath-in-Get-data-from-XML-tool&p=261230#post261230](http://forums.pentaho.com/showthread.php?83480-XPath-in-Get-data-from-XML-tool&p=261230#post261230)中的 positional-staz.zip 为例。

如何使用 StAX 读取 XML 文件并将元素值存储到 DB？

我一直在尝试寻找示例，但没有找到太多。上面的示例在插入行之前使用了“Filter Rows”组件。我不太明白为什么要使用它，我不能只映射我需要的值吗？可能是因为我不使用或不知道如何使用 Filter Rows 组件而出现此问题。

干杯!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T17:02:16.167

我在上面列出的论坛上发布了一个可能的基于 StAX 的解决方案，但我将在此处发布它的要点，因为它正在等待版主批准。

使用 StAX 解析器，您可以只选择那些您关心的元素，即数据类型为 CHARACTERS 的元素。对于论坛示例，您基本上需要对 4 组（EXPR、EXCH、DATE、ASK）中的行进行非规范化。为此，您将行号添加到流中（使用添加序列步骤），然后使用计算器确定“桶号”= INT((rownum-1)/4)。这将为您提供 Row Denormaliser 步骤的分组字段。

帖子获得批准后，您将看到一个使用 StAX 和我在上面描述的方法的转换的链接。

这是你要找的吗？如果不是，请让我知道我在哪里误解了，也许我可以提供帮助。

# php - 如何创建算法来推荐用户

> ID：12221463
> 
> 赞同：1
> 
> 时间：2012-08-31T19:29:56.557
> 
> 标签：php, mysql

我对 Mysql 中的复杂查询没有非常先进的知识。

我有一个系统，用户可以互相关注并随时了解他的新闻。

我有两张表：一张用于用户，一张用于保持两个用户之间的连接。

我是否需要朋友提示系统，例如您建议的 Facebook 朋友。

我想做点什么。例如，我关注了一个特定的用户，而这关注了另一个用户，但我没有关注他关注的那个用户。我们三个来自圣保罗的同一个城镇，我想查询一个我仍然不关注的用户，因为他是我朋友的朋友，因为他和我在同一个城市。

我的桌子是：

```
tb_usuario
id | name  | city
1  | Halan | Sao Paulo
2  | John  | Sao Paulo
3  | Maria | Sao Paulo 
```

tb_ligacao

```
id | user_id | id_usuario_seguido
1  | 1       | 2
2  | 2       | 3 
```

有人能帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T19:41:34.860

似乎您正在尝试查看谁是朋友的朋友。为此，请使用您的代码：

```
select * from tb_usario as a left join tb_ligacao as b on a.id = b.id_usuario_seguido where b.user_id = 1 
```

上面的代码将为 ID 为 1 的用户获取所有朋友。要获取他们的所有朋友，您将循环并运行相同的代码，但将 ID 更改为循环的变量。

# c# - 转换 ?: 处理超过 2 个答案的语句

> ID：12221465
> 
> 赞同：2
> 
> 时间：2012-08-31T19:30:19.677
> 
> 标签：c#, linq

我对编程还很陌生，但我的任务是维护一些由以前的员工创建的应用程序。我有一个 ?: 声明，现在需要处理的不仅仅是一个真假声明，但我不知道如何去做。有问题的代码是：

```
 MailDomainContext mail = new MailDomainContext();
      mail.Load(mail.GetMailsQuery("Workforce Attendence Issue",
               loadEmp.Entities.Where(emp => emp.EmployeeID == _EmployeeID).First().Username,
               (loadEmp.Entities.Where(emp => emp.EmployeeID == _EmployeeID).First().EmployeeShiftID >= 2 ? "supervisor1" : "supervisor2"),
               loadEmp.Entities.Where(emp => emp.EmployeeID == _EmployeeID).First().FirstName,
               attendence.AttendenceDate.ToString("MM/dd/yyyy"),
               attendence.TimeLost,
               loadAbs.Entities.Where(abs => abs.AbsenceID == attendence.AbsenceID).First().AbsenceDescription,
               (from inf in loadAtt.Entities
               where inf.EmployeeID == _EmployeeID
               where inf.AttendenceDate > DateTime.Now.AddDays(30 * -1)
               where inf.Approved == false
               select inf).Count() + 1,
               attendence.UTOUsed
               ), null, null); 
```

更具体地说，这一行：

```
 (loadEmp.Entities.Where(emp => emp.EmployeeID == _EmployeeID).First().EmployeeShiftID >= 2 ? "supervisor1" : "supervisor2"), 
```

我需要在列表中再添加 4 名主管，但还没有找到一种不会让其他一切都不愉快的方法。如果这是一个太简单的问题，或者我遗漏了一些您可能需要知道的细节，我深表歉意，因为我说过我对这一切都很陌生。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-31T19:41:56.800

这段代码不必要地难以维护，而且效率低下而且不是很有防御性。该代码正在检索员工三次。

```
loadEmp.Entities.Where(emp => emp.EmployeeID == _EmployeeID).First().Username 
```

`_EmployeeID`如果员工不存在，上述行（和其他行）将引发异常。相反，您可以使用`FirstOrDefault`，或者`SingleOrDefault`如果您希望只有一名员工具有该 ID（应该是这种情况，因为它看起来像该实体的主键）。如果`loadEmp`实际上是一个实体框架`DbContext`，那么您也可以使用`Find`.

您可以执行一次此查询并将结果存储在局部变量中。

```
var employee = loadEmp.Entities.SingleOrDefault(emp => emp.EmployeeID == _EmployeeID);

if (employee == null)
{
   // Handle employee not found
} 
```

然后，要根据员工获取主管字符串，您可以创建一个方法，该方法采用计算主管字符串所需的最少信息量，并将其传递给方法以获取结果。

```
GetSupervisorRole(employee.EmployeeShiftID);

...

private string GetSupervisorRole(int employeeShiftID)
{
   // Logic here
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-31T19:38:27.250

一种方法是将该代码提取到一个方法中，然后以您想要的任何方式编写该方法。

另一种方法是使用字典将键（如果它们的数量很少）映射到值。

```
var id =3;
var mapping = new Dictionary<int, string>() { 
  { 1, "first" },
  { 2, "second" },
  { 3, "first" } //you can map 2 values (1,3) to the same "first" string
};

string value;
if (!mapping.TryGetValue(id, out value))
{
  value = "unknown";
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-31T19:45:11.030

我会替换整个部分

```
loadEmp.Entities.Where(emp => emp.EmployeeID == _EmployeeID).First().Username,
(loadEmp.Entities.Where(emp => emp.EmployeeID == _EmployeeID).First().EmployeeShiftID >= 2 ? "supervisor1" : "supervisor2"),
 loadEmp.Entities.Where(emp => emp.EmployeeID == _EmployeeID).First().FirstName, 
```

和

```
//Assign these variables ahead of time so others reading your code can 
//figure out what's going on
var EmpID = loadEmp.Entities.Where(emp => emp.EmployeeID == _EmployeeID).First();
var UserName = EmpID.UserName;
var FirstName = EmpID.FirstName;
var Title = GetTitle(EmpID.EmployeeShiftID);

//Your original call
Mail.Load(mail.GetMailsQuery("Workforce Attendence Issue",
     UserName,
     Title,
     FirstName,
     //...Etc
);

//New method you will need to add, you could do this logic in line, but this will
//be less messy
private string GetTitle(int ShiftID)
{
    switch (ShiftID)
    {
         case 1:
             return "supervisor1";
             break;
         case 2:
             return "supervisor2";
             break;
         //...etc
    }
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-31T19:43:01.797

创建以下方法：

```
string GetSupervisor(int employeeShiftId) {
    if (employeeShiftId == 1) supervisor = "supervisor1";
    else if (employeeShiftId == 2) supervisor = "supervisor2";
    else if (employeeShiftId == 3) supervisor = "supervisor3";
    else if (employeeShiftId == 4) supervisor = "supervisor4";
} 
```

然后从您的代码中调用它并将结果分配给一个变量`supervisor`，然后您可以使用它`mail.Load()`：

```
int employeeShiftId = loadEmp.Entities
          .Where(emp => emp.EmployeeID == _EmployeeID).First()
          .EmployeeShiftID;
string supervisor = GetSupervisor(employeeShiftId);

MailDomainContext mail = new MailDomainContext();
mail.Load(mail.GetMailsQuery("Workforce Attendence Issue",
               loadEmp.Entities.Where(emp => emp.EmployeeID == _EmployeeID).First().Username,
               supervisor, // <-- Then use it here
               ...
); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-31T19:38:16.050

并不是说这是一个好主意，但是您可以像这样组合内联：

```
 static void Main(string[] args)
    {
        int EmpId = 2;
        string supervisor = EmpId == 4 ? "Supervisor4" :
                            EmpId == 3 ? "Supervisor3" :
                            EmpId == 2 ? "supervisor2" :
                                         "supervisor1" ;
        Console.WriteLine(supervisor);

    } 
```

您可以在另一个堆栈问题中看到另一个示例：[Legible or not: C# multiple ternary operator + Throw if unmatched](https://stackoverflow.com/questions/2320371/legible-or-not-c-sharp-multiple-ternary-operators-throw-if-unmatched)

我可能会改用 KDiTraglia 建议的 Method 方法，您只需传入 EmpId 并取回主管名称，或者像 Alexei Levenkov 提出的 Dictionary 查找方法。

# sql - 在 WHERE 子句中使用聚合进行 SQL 更新

> ID：12221466
> 
> 赞同：4
> 
> 时间：2012-08-31T19:30:32.417
> 
> 标签：sql, sql-server-2005

我正在尝试将列日期的日期字段设置为表 1 中的“10/11/2012”，此时表 2 中与该 ID 相关的所有金额的总和（通过 fk_id）= 0。这就是我的意思：

从：

表格1

```
 id    date
    1     10/11/2011
    2      
    3     10/12/2011 
```

表 2

```
 fk_id    amount
    1     200
    2     0
    2     0
    3     100 
```

至：

表格1

```
 id    date
    1     10/11/2011
    2     10/11/2012
    3     10/12/2011 
```

表 2

```
 fk_id    amount
    1     200
    2     0
    2     0
    3     100 
```

这是我目前拥有的：

```
update table1
set date = '10/11/2012
FROM table1 inner join table 2 on table1.id = table2.fk_id
HAVING sum(table2.amount) = 0 
```

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-31T19:38:30.733

```
UPDATE table1 
SET date = '10/11/2012' 
FROM table1 
WHERE id IN (SELECT FK_ID FROM table2 GROUP BY FK_ID HAVING SUM(Amount)=0) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T19:39:00.543

这应该有效：

```
UPDATE T1
SET [date] = '20121011'
FROM table1 T1
INNER JOIN (SELECT fk_id, SUM(amount) Amount
            FROM table2
            GROUP BY fk_id
            HAVING SUM(amount) = 0) T2
ON T1.id = T2.fk_id 
```

# python - 在 Mac OSX Mountain Lion 上安装 matplotlib

> ID：12221468
> 
> 赞同：5
> 
> 时间：2012-08-31T19:31:08.130
> 
> 标签：python, macos, matplotlib

我正在尝试安装 matplotlib 但面临很多问题。我从 pip install matplotlib 以及尝试从源代码构建都收到一个常见错误，即：

```
BUILDING MATPLOTLIB

        matplotlib: 1.1.1

            python: 2.7.2 (default, Jun 20 2012, 16:23:33)  [GCC 4.2.1

                    Compatible Apple Clang 4.0

                    (tags/Apple/clang-418.0.60)]

          platform: darwin 
```

所需的依赖项

```
 numpy: 1.6.1

                    * Could not find the headers for numpy.  You may

                    * need to install the development package. 
```

编辑：终于解决了。我需要安装 gfortran 和 gcc 编译器。用 brew 做的吗，一切都像魅力一样！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-31T20:40:39.140

在 Mountain Lion 上安装 matplotlib 需要安装 matplotlib 的开发版本。

尝试`pip install git+https://github.com/matplotlib/matplotlib.git#egg=matplotlib-dev`

您可能需要`numpy 1.6.2`它才能工作。

[一般来说，对于 Mountain Lion，您可以在此链接](http://www.thisisthegreenroom.com/2011/installing-python-numpy-scipy-matplotlib-and-ipython-on-lion/)找到很好的建议和详细描述的分步过程来安装 numpy/scipy/matplotlib/IPhython

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-11T11:17:31.850

终于解决了。我需要安装 gfortran 和 gcc 编译器。用 brew 做的吗，一切都像魅力一样！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-08T18:56:07.550

macports 或 brew 是在 mac 上处理此类事情的最佳方式。我的经验

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-31T19:33:46.943

安装 numpy。

```
pip install numpy 
```

它应该为您解决依赖关系 - 我不确定它为什么不起作用。

# java - 在 Java 中优化文件加密

> ID：12221483
> 
> 赞同：0
> 
> 时间：2012-08-31T19:32:39.970
> 
> 标签：java, optimization, io, bouncycastle, jce

我正在开发一个加密其输入文件的应用程序。
我的代码是用于加密文件的（文件大小从 KB 到 4GB 不等）：

```
 SecretKeySpec   key = new SecretKeySpec(keyBytes, "AES");
    IvParameterSpec ivSpec = new IvParameterSpec(ivBytes);
    Cipher          cipher = Cipher.getInstance("AES/CBC/PKCS5Padding", "BC");
    byte[] block = new byte[8];
    int i;

    cipher.init(Cipher.ENCRYPT_MODE, key, ivSpec);

    BufferedInputStream bIn=new BufferedInputStream(new ProgressMonitorInputStream(null,"Encrypting ...",new FileInputStream("input")));
    CipherInputStream       cIn = new CipherInputStream(bIn, cipher);
    BufferedOutputStream bOut=new BufferedOutputStream(new FileOutputStream("output.enc"));

    int ch;
    while ((i = cIn.read(block)) != -1) {
        bOut.write(block, 0, i);
    }
    cIn.close();
    bOut.close(); 
```

我可以让它更优化（时间、IO、CPU）吗？
如何？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T19:35:57.393

这是一个复杂而难以回答的问题。首先，无论你做什么，加密 4GB 的文件都需要时间。

像[蜂鸟](http://www.reveresecurity.com/_pdfs/HB2%20Cipher.pdf)这样的轻量级加密算法将帮助您到达那里 - 但是，您必须确保无论您在哪里使用它，AES 都不是绝对必要的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T19:58:11.377

选择更好的`byte[] block`大小会有所帮助（在 8k 到 1MB 的范围内，测试以找到适合您的场景的最佳大小），但除此之外，您无能为力使其更快（假设您保持当前的加密算法）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-03T08:21:28.907

您可以做的是使用`AESFastEngine`库`bouncycastle`来加速`aes`块计算。

```
crypto/src/org/bouncycastle/crypto/engines 
```

这个快速引擎使用`T`的表格是四舍五入的预计算表格，并且肯定会提高性能。

# python - 为什么我无法在别人的 AES 解密器上解密我的 AES 加密消息？

> ID：12221484
> 
> 赞同：0
> 
> 时间：2012-08-31T19:32:39.890
> 
> 标签：python, aes, pycrypto

```
from Crypto.Cipher import AES
import os

key = 'mysecretpassword'
iv = os.urandom(16)
plaintext1 = 'Secret Message A'
encobj = AES.new(key, AES.MODE_CBC, iv)
ciphertext1 = encobj.encrypt(plaintext1) 
encryptedText = ciphertext1.encode('base64')
print encryptedText
decobj = AES.new(key, AES.MODE_CBC, iv)
print decobj.decrypt(ciphertext1) 
```

`encryptedText`我从我的代码中复制了和的打印值`key`并粘贴到下面的网站。

[http://www.everpassword.com/aes-encryptor](http://www.everpassword.com/aes-encryptor)

[http://www.nakov.com/blog/2011/12/26/online-aes-encryptor-decryptor-javascript/](http://www.nakov.com/blog/2011/12/26/online-aes-encryptor-decryptor-javascript/)

我希望它能够解密我的密码，但事实并非如此。因此我必须使用 pycrypto 错误。我该如何解决？这两个站点都可以相互加密和解密，但我的站点不能。这两个网站都确实使用了 CBC 模式。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T20:13:57.547

如果您查看相关网站的页面源代码，您会发现它使用了[gibberish-aes](https://github.com/mdp/gibberish-aes) javascript 库。要了解您必须做些什么才能使其发挥作用，您必须研究它的作用。

查看它的[源代码](https://github.com/mdp/gibberish-aes/blob/ba17eb3cec5c4bd41a8d52c98421cee4b99b3d48/src/gibberish-aes.js)，它似乎使用随机盐进行加密。即，在字符串前面`Salted__`形成密文的开头，然后再进行 base64 编码。

```
randArr = function(num) {
    var result = [], i;
    for (i = 0; i < num; i++) {
        result = result.concat(Math.floor(Math.random() * 256));
    }
    return result;
}, 
```

和

```
enc = function(string, pass, binary) {
        // string, password in plaintext
        var salt = randArr(8),
        pbe = openSSLKey(s2a(pass, binary), salt),
        key = pbe.key,
        iv = pbe.iv,
        cipherBlocks,
        saltBlock = [[83, 97, 108, 116, 101, 100, 95, 95].concat(salt)];
        string = s2a(string, binary);
        cipherBlocks = rawEncrypt(string, key, iv);
        // Spells out 'Salted__'
        cipherBlocks = saltBlock.concat(cipherBlocks);
        return Base64.encode(cipherBlocks);
    }, 
```

对于解密，它使用在 base64 解码（第一个`slice`运算符）后从密文开头挑选盐的随机部分：

```
dec = function(string, pass, binary) {
    // string, password in plaintext
    var cryptArr = Base64.decode(string),
    salt = cryptArr.slice(8, 16),
    pbe = openSSLKey(s2a(pass, binary), salt),
    key = pbe.key,
    iv = pbe.iv;
    cryptArr = cryptArr.slice(16, cryptArr.length);
    // Take off the Salted__ffeeddcc
    string = rawDecrypt(cryptArr, key, iv, binary);
    return string;
}, 
```

现在缺少的部分是`openSSLkey`函数：

```
openSSLKey = function(passwordArr, saltArr) {
    // Number of rounds depends on the size of the AES in use
    // 3 rounds for 256
    // 2 rounds for the key, 1 for the IV
    // 2 rounds for 128
    // 1 round for the key, 1 round for the IV
    // 3 rounds for 192 since it's not evenly divided by 128 bits
    var rounds = Nr >= 12 ? 3: 2,
    key = [],
    iv = [],
    md5_hash = [],
    result = [],
    data00 = passwordArr.concat(saltArr),
    i;
    md5_hash[0] = GibberishAES.Hash.MD5(data00);
    result = md5_hash[0];
    for (i = 1; i < rounds; i++) {
        md5_hash[i] = GibberishAES.Hash.MD5(md5_hash[i - 1].concat(data00));
        result = result.concat(md5_hash[i]);
    }
    key = result.slice(0, 4 * Nk);
    iv = result.slice(4 * Nk, 4 * Nk + 16);
    return {
        key: key,
        iv: iv
    };
}, 
```

所以基本上你必须把`openSSLKey`函数翻译成 Python 并输入你的密码和盐。这将创建一个 (key, iv) 元组。使用它们来加密您的数据。`Salted__`在使用 base64 对其进行编码之前，将字符串和盐添加到密文中。然后它应该工作，我想。

# linq - 如何通过查询将组绑定到 linq 中的 DataGridview？

> ID：12221485
> 
> 赞同：0
> 
> 时间：2012-08-31T19:32:44.837
> 
> 标签：linq

我想将以下查询绑定到 DataGridview。我该怎么办？

```
int[] numbers = { 5, 4, 1, 3, 9, 8, 6, 7, 2, 0 };
var numberGroups =
                 from num in numbers
                 group num by num % 5 into numGroup
                 select new { Remainder = numGroup.Key, Numbers = numGroup }; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T20:08:57.990

您希望它如何在 DGV 中表示，因为 Numbers 可能包含多个项目，这将如何进入 DGV 行？

或者，这应该工作：

```
var numberGroups = from num in numbers
                   group num by num % 5 into numGroup
                   select new { Remainder = numGroup.Key, Count = numGroup.Count() };

yourGridView.DataSource = numberGroups.ToList();
yourGridView.DataBind();  //don't use if WinForm DGV 
```

# mongodb - Doctrine QueryBuilder 不适用于 DBRef

> ID：12221489
> 
> 赞同：2
> 
> 时间：2012-08-31T19:33:13.993
> 
> 标签：mongodb, doctrine-orm

我目前在帖子集合的文档上有一个字段，它是用户集合的 ReferenceOne。在 shell 上查询`db.posts.findOne({"usuario_stream.$id": ObjectId("5012d7674dfbad7f4e000084")})`工作正常，但使用 QueryBuilder 它根本行不通。

`$this->doctrine->createQueryBuilder('Documents\Posts')->field('usuario_stream.$id')->equals(new MongoId('5012d7674dfbad7f4e000084'))->eagerCursor(true)->getQuery()->execute();`在探查器显示`{ "$query" : { "usuario_stream.$id" : null }, "$orderby" : [ ] }`。

我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T07:22:02.690

如果您使用 ID 作为字符串而不是 MongoID 的实例查询 usuario_stream.$id，它应该可以工作：

```
->field('usuario_stream.$id')->equals('5012d7674dfbad7f4e000084') 
```

# c# - 如何在 Webbrowser 控件中禁用“安全警告”窗口

> ID：12221490
> 
> 赞同：5
> 
> 时间：2012-08-31T19:33:20.387
> 
> 标签：c#, winforms, security, https, browser

我正在使用 Webbrowser 控件登录到 HTTPS 站点。但我弹出“安全警告”：

![安全警告窗口](../Images/cdf9bf4a3aeae8d6ce6234d52d904847.png)

下面的代码不起作用。为什么？

```
ServicePointManager.ServerCertificateValidationCallback = new RemoteCertificateValidationCallback(ValidateServerCertificate);

    public static bool ValidateServerCertificate(object sender, X509Certificate certificate, X509Chain chain, SslPolicyErrors sslPolicyErrors)
    {
        return true;
    } 
```

我应该把这些代码放在哪里？

stackoverflow 中还有另一个带有 codeproject 链接的旧线程。
它也不起作用......

如何禁用此警报？

> 我正在使用 Visual Studio 2010 和 .net 4 ...

提前致谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-31T19:38:58.813

将控件的`ScriptErrorsSuppressed`属性更改为.`WebBrowser``true`

# magento - 清理似乎已损坏的产品 magento 表

> ID：12221492
> 
> 赞同：-1
> 
> 时间：2012-08-31T19:33:27.507
> 
> 标签：magento

我正在尝试导出数据馈送，它工作正常，但有些产品导出了 2 次和 3 次。我的 magento 安装有 2 个网站。但我们只使用一个

但是我过去安装的 magento 有更多的网站。

我最好的猜测是有些表格带有孤立的项目，我的猜测是当我删除网站时，它并没有删除产品，因为正如您在屏幕截图中看到的标题不同。

我什至注意到产品名称不同，但 SKU 相同。此外，如果我尝试在后端搜索其中一个重复的产品，它也不会出现。

我需要知道的是如何通过 mysql 摆脱这些产品？`enter code here` ![在此处输入图像描述](../Images/6bae66003877f959434075b1240b4b0f.png)

**编辑：**

```
<action type="catalog/convert_adapter_product" method="load">
    <var name="store"><![CDATA[9]]></var>
    <var name="filter/price/from"><![CDATA[1]]></var>
    <var name="filter/price/to"><![CDATA[5000]]></var>
    <var name="filter/status"><![CDATA[1]]></var>
</action>

<action type="catalog/convert_parser_product" method="unparse">
    <var name="store"><![CDATA[9]]></var>
    <var name="url_field"><![CDATA[0]]></var>
</action>

<action type="dataflow/convert_mapper_column" method="map">
    <var name="map">
        <map name="sku"><![CDATA[Unique ID ]]></map>
        <map name="name"><![CDATA[Name ]]></map>
        <map name="condition"><![CDATA[Condition]]></map>
        <map name="description"><![CDATA[Description]]></map>
        <map name="price"><![CDATA[Price]]></map>
        <map name="brand"><![CDATA[Manufacturer]]></map>
        <map name="sku"><![CDATA[Manufacturer Part Number]]></map>
        <map name="brand"><![CDATA[Brand]]></map>
        <map name="meta_keyword"><![CDATA[Keywords ]]></map>
        <map name="weight_box1"><![CDATA[Weight ]]></map>
        <map name="special_price"><![CDATA[Sale Price ]]></map>
        <map name="special_from_date"><![CDATA[special_from_date]]></map>
        <map name="special_to_date"><![CDATA[special_to_date]]></map>
        <map name="free_shipping"><![CDATA[free_shipping]]></map>
    <map name="is_in_stock"><![CDATA[is_in_stock]]></map>
        <map name="status"><![CDATA[status]]></map>
    </var>
    <var name="_only_specified">true</var>
</action>

<action method="unparse" type="exportextension/modifier">
    <var name="remove_line_breaks">true</var>
    <var name="remove_html_tags">true</var>
    <var name="add_categories">true</var>
    <var name="category_field_name">category</var>
    <var name="category_delimiter">#</var>
    <var name="first_category_level">2</var>
    <var name="category_path_delimiter"><![CDATA[>]]></var>
    <var name="add_absolute_url_to_field">Url</var>
    <var name="add_image_url_to_field">Image Url</var>
</action>

<action type="dataflow/convert_parser_csv" method="unparse">
    <var name="delimiter"><![CDATA[,]]></var>
    <var name="enclose"><![CDATA["]]></var>
    <var name="fieldnames">true</var>
</action>

<action type="dataflow/convert_adapter_io" method="save">
    <var name="type">file</var>
    <var name="path">var/export</var>
    <var name="filename"><![CDATA[godatafeed.csv]]></var>
</action> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T20:03:30.687

好的，这是一个想法：

[http://www.magentocommerce.com/wiki/1_-_installation_and_configuration/db-repair-tool](http://www.magentocommerce.com/wiki/1_-_installation_and_configuration/db-repair-tool)

> 数据库修复工具比较 2 个数据库（参考 [“corrupted”] 和目标），并通过执行以下操作更新目标数据库，使其具有与参考数据库相同的结构：
> 
> *   添加缺少的表，或修复它们以具有相同的引擎类型和字符集
> *   添加缺失的字段或修复它们
> *   从具有损坏外键引用的表中删除不一致的数据
> *   添加缺少的外键和索引
> 
> 此工具的一个典型用例是修复存在上述一些错误的现有 Magento 安装的数据库。

# javascript - Primefaces 返回 Command Link 的对象

> ID：12221496
> 
> 赞同：0
> 
> 时间：2012-08-31T19:34:07.987
> 
> 标签：javascript, primefaces

我正在尝试通过 javascript 调用 primefaces commanlink，并想知道它是否成功执行，如果成功，我需要获取回调函数发送的值。我正在捕获 commandlinke 的返回值，它是一堆 javascript。如何在我的 senario 中获取 args(topicComment) 值。我想我可以通过设置更多隐藏字段来解决问题，但我想看看如何直接获取它。

**Javascript**

```
$('.postButton').livequery("click", function (){
        var comment_content = $(this).parent().siblings().children('textarea').val();
        $('#topic_comment').val(comment_content);
        var object=$('#postCmdLink').click();
        var output;
        for (property in object) {
              output += property + ': ' + object[property]+'; ';
            }
            console.log(output);
} 
```

**服务器端**

```
public void addComment(){
        .................................
        context = RequestContext.getCurrentInstance();
        context.addCallbackParam("topicComment", topicBean.getTopicCommentVO().getTopicCommentGuid()); 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T16:01:14.630

`CommandLink`而不是通过jQuery点击：

```
var object=$('#postCmdLink').click(); 
```

使用 Primefaces AjaxAPI 调用 ajax 并注册回调获取结果：

```
PrimeFaces.ajax.AjaxRequest({
         formId:'userForm'
         ,source:'userForm'
            ,process:'userForm'
         ,update:'msgs'
         ,params:{
            'param_name1':'value1',
            'param_name2':'value2'
         }
          ,oncomplete:function(xhr, status, args) {alert('Done');}  
        }); 
```

Primefaces 用户文档 3.1.1 部分`7.2 Ajax API`第 454 页。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T12:26:41.887

我不太明白你想对返回的值做什么，但你可以使用 oncomplete 在 JavaScript 中访问它。

支持豆：

```
public class TestBean
{
    public void test()
    {
        RequestContext.getCurrentInstance().addCallbackParam("name", "value");
    }
} 
```

JSF：

```
<p:commandButton action="#{testBean.test()}" oncomplete="test(xhr, status, args)" value="test" />
<script type="text/javascript">
    function test(xhr, status, args)
    {
        if (args.name)
        {
            alert(args.name);
        }
    }
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T21:23:15.107

INMO

如果您想确保`p:commandLink`成功*执行*，只需将一些 js 代码放入`onsuccess`

像这样的东西

```
<p:commandLink onsuccess="alert('yes!')" id="myId".... 
```

# javascript - 仅针对一个特定帖子显示表单

> ID：12221498
> 
> 赞同：0
> 
> 时间：2012-08-31T19:34:34.880
> 
> 标签：javascript, show-hide

在我的网站上，您可以发帖。评论帖子的表单是隐藏的，当您单击“回复”按钮时应该会出现。问题是，使用普通的 JS 隐藏/显示脚本，它会隐藏/显示所有表单，我不确定如何使其仅针对一种表单。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T19:37:48.360

将表单包装在 div 中，给 div 一个特定的 id，然后使用 GetElementById.... BAM。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T19:51:25.243

用已经发布的答案很容易解决，但是如果你不提供一些代码来玩它，看看你在做什么，如果很难猜出你的代码中有什么。

在 //猜测模式开启//...

**CSS**

```
form{display:none} 
```

**HTML**

```
<form id="one">contact</form>
<form id="two">reply</form>
<form id="tree">buy</form>

<div id="reply_button" onclick="document.getElementById('two').style.display='block'">reply</div> 
```

# actionscript - AIR 应用程序的自动更新

> ID：12221502
> 
> 赞同：0
> 
> 时间：2012-08-31T19:35:07.037
> 
> 标签：actionscript, flex4

我正在学习 AIR 应用程序的自动更新功能。我创建了不起作用的简单应用程序。代码如下：

## 自动更新.mxml

```
<?xml version="1.0" encoding="utf-8"?>
<s:WindowedApplication xmlns:fx="http://ns.adobe.com/mxml/2009" 
                   xmlns:s="library://ns.adobe.com/flex/spark" 
                   xmlns:mx="library://ns.adobe.com/flex/mx" 
                   creationComplete="checkForUpdate()" >
<fx:Script><![CDATA[
    import air.update.ApplicationUpdaterUI;
    import air.update.events.UpdateEvent;

    private var appUpdater:ApplicationUpdaterUI=new ApplicationUpdaterUI();

    private function checkForUpdate():void
    {
        setApplicationVersion(); 
        appUpdater.delay = 1;
        appUpdater.isDownloadProgressVisible = true;
        appUpdater.isDownloadUpdateVisible = true

        appUpdater.isInstallUpdateVisible = true;
        appUpdater.isFileUpdateVisible = true;

        appUpdater.updateURL = "http://localhost:8081/DynamicWeb/release/update.xml";           
        appUpdater.isCheckForUpdateVisible = false; 
        appUpdater.addEventListener(UpdateEvent.INITIALIZED, onUpdate);
        appUpdater.addEventListener(ErrorEvent.ERROR, onError);
        appUpdater.initialize();
                   } 
    }

    // Find the current version for our Label below
    private function setApplicationVersion():void
    {
        var appXML:XML = NativeApplication.nativeApplication.applicationDescriptor;
        var ns:Namespace = appXML.namespace();
        lbl.text = "Current version is " + appXML.ns::version;
        //Common.helpDetails = appXML.ns::versionLabel;

    }

    private function onError(event:ErrorEvent):void
    {
        //Alert.show(event.toString());
    }

    private function onUpdate(event:UpdateEvent):void
    {
        appUpdater.checkNow(); // Go check for an update now         } 
    }

]]></fx:Script>

<s:HGroup x="89" y="124" width="413" height="34">
    <s:Label id="lbl" />
</s:HGroup>

</s:WindowedApplication> 
```

* * *

*最初在 AutoUpdate-app.xml 和 update.xml 文件中的版本标签设置为 1.0.0

## * 服务器端 update.xml 文件是：

```
<?xml version="1.0" encoding="UTF-8"?>
<update xmlns="http://ns.adobe.com/air/framework/update/description/1.0">
<version>1.0.0</version>
<url>http://localhost:8081/DynamicWeb/release/Update_air.air</url>
<description><![CDATA[
 Typically, this is used to summarize what's new in the release
 ]]></description>
</update> 
```

* * *

*   现在我已经导出应用程序并安装了它。之后，我将文件 AutoUpdate-app.mxml 和 update.xml(server side) 的版本更改为 2.0.0 。现在我导出了应用程序并将其转储到服务器（在 update.xml 所在的“发布”文件夹中。）。现在当我启动应用程序时，更新功能不起作用。它什么也没发生。CheckNow() 方法被调用但什么也不做。请帮我。

我正在研究 AIR 3.1
它没有给出任何错误。只有更新窗口不起作用。请告诉我我做错了什么。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-28T06:30:19.387

在您的服务器端 update.xml 中，您应该将标签**版本**替换为**versionNumber**。自 AIR 2.5 以来，这种情况发生了变化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T12:54:42.443

1）跟踪真实版本并从 update.xml 并确保你做对了。您必须确保使用 1.0.0 版本运行旧应用程序。顺便说一句，您可以使用属性`ApplicationUpdaterUI.currentVersion`而不是`NativeApplication.nativeApplication.applicationDescriptor`

2）您在 checkNow() 调用后不监听事件。听所有的事件，就像在这篇文章中一样。在

[http://thanksmister.com/2009/09/13/custom-air-updater-interface-using-applicationupdater/](http://thanksmister.com/2009/09/13/custom-air-updater-interface-using-applicationupdater/)（参见*UpdateManager.as#initialize()*）：

```
appUpdater.addEventListener(UpdateEvent.INITIALIZED, updaterEvent);
appUpdater.addEventListener(StatusUpdateEvent.UPDATE_STATUS, updaterEvent);
appUpdater.addEventListener(UpdateEvent.BEFORE_INSTALL, updaterEvent);
appUpdater.addEventListener(StatusUpdateErrorEvent.UPDATE_ERROR, updaterEvent);
appUpdater.addEventListener(UpdateEvent.DOWNLOAD_START, updaterEvent);
appUpdater.addEventListener(ProgressEvent.PROGRESS, updaterEvent);
appUpdater.addEventListener(UpdateEvent.DOWNLOAD_COMPLETE, updaterEvent);
appUpdater.addEventListener(DownloadErrorEvent.DOWNLOAD_ERROR, updaterEvent);
appUpdater.addEventListener(ErrorEvent.ERROR, updaterEvent);

private function updaterEvent(event : Event) : void {
    trace(event.type);
} 
```

可能，你错过了一些东西......

# properties - Liferay：在语言 portlet 中更改时，所有语言都可以使用，默认的除外

> ID：12221506
> 
> 赞同：1
> 
> 时间：2012-08-31T19:35:42.243
> 
> 标签：properties, liferay, portal

当我选择门户默认语言 (DE) 时，会显示英语，但其余一切正常。令人惊讶的是，当更改为德语时，经过 i18n'ed 的 portlet 运行良好，但门户菜单仍然是英文的。如果我更改为任何第三种语言，则翻译正确。

我能错过什么？问题的根源在哪里？我没有（认真地）修改任何门户属性文件。不抛出异常。

# c++ - 将遗留 C 代码头更新到 C++ 标准库

> ID：12221508
> 
> 赞同：2
> 
> 时间：2012-08-31T19:35:53.583
> 
> 标签：c++

继承了大量遗留 C 代码，并且正在将其移植到使用 GCC (g++) 在 Linux 上编译。由于我们将在未来使用 C++，并且无论如何我都会修复“自定义”库头文件（以及编译器警告），因此更新旧的 C 头文件以使用较新的 C++ 样式的头文件是否安全。

所以像

```
#include <cstdlib> 
```

代替

```
#include <stdlib.h> 
```

据我所知，两者之间的唯一区别是 cstdlib 在`std::`命名空间中有东西。

有什么会让这成为一个坏主意吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T19:37:40.057

除了命名空间之外，它们完全相同（在大多数系统上）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T19:45:55.587

由于 C++ 标准头文件使用重载，而 C 使用不同的名称，因此您的代码可能会以非常微妙的方式发生变化。这最有可能给`cmath`.

`stdlib.h`不会去任何地方，所以请随时继续使用它。

例如，比较：

```
#include <iostream>
using namespace std;

#include <stdlib.h>
#include <math.h>

int main(void)
{
    double x = -2;
    cout << (3/abs(x)) << endl;
    return 0;
} 
```

即使在两种情况下使用完全相同的 C++ 编译器和选项，切换到 C++ 头文件[之前](http://ideone.com/ECd3s)和[之后](http://ideone.com/p2Wv6)的结果也大不相同。

# objective-c - 没有参数但带有 NSError 的 Objective-C 选择器命名

> ID：12221513
> 
> 赞同：0
> 
> 时间：2012-08-31T19:36:38.953
> 
> 标签：objective-c, ios

命名不带参数但可以返回错误的 Objective-C 选择器的最佳实践是什么？

示例（从 Web 获取音轨数据的方法）：

```
- (NSData*) soundtrackData:????? error:(NSError**)error; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-31T19:44:06.117

怎么样

```
- (NSData*)soundtrackDataWithError:(NSError**)error; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-02T10:14:01.350

Apple 在 Cocoa 框架中使用两种样式之一：

```
- (NSData *)soundtrackData:(NSError **)error; 
```

例如`-[NSManagedObjectContext save:]`

```
- (NSData *)soundtrackDataAndReturnError:(NSError **)error; 
```

例如`-[NSURL checkResourceIsReachableAndReturnError:`

如今，Apple 似乎倾向于新 API 的第二种风格，但任何一种都可以接受。我喜欢第一种风格的简洁性，但第二种风格确实有一个很好的优势，您可以搜索`error:`以查找代码中具有错误处理的所有方法。

# php - 你应该在 MySQL 请求中引用数字吗？

> ID：12221515
> 
> 赞同：-2
> 
> 时间：2012-08-31T19:36:53.023
> 
> 标签：php, mysql, request

使用简单的 mysql 而不是 PDO 或任何东西会更专业和防错方法

我通常这样做

```
 $sql_request = "SELECT * 
                      FROM myusers 
                          WHERE user_id = {$user_id} 
                            AND email = '{$email_address}' 
                              LIMIT 0,1"; 
```

但是我也应该引用`{$user_id}`吗？

即使当我得到用户输入时，我也不会引用数字，但是我会在处理它们之前检查 ctype_digit()。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-31T19:42:08.337

不，不需要在数字文字周围加上引号。

对于 MySQL，如果数字文字用单引号括起来就可以了；我认为我们经常看到它这样做的原因是为了方便程序员不必关心它是字符还是数字，只需在所有文字周围加上引号即可。

当值不是数字文字时，引用值和不引用值时的行为有所不同。例如，给定一个`id`类型为 的列`INTEGER`，在这种情况下

```
... WHERE id = '1X' 
```

这里`'1X'`将被解释为值为 1 的文字数字，但在此上下文中

```
... WHERE id = 1X 
```

这里`1X`将被解释为列名，而不是数字文字。这可能会导致 MySQL 抛出“未知列”异常。

考虑如何解释这些差异......

```
... WHERE id = 'id'   -- 'id' will be interpreted as numeric literal value 0

... WHERE id = id     -- id will be interpreted as a column name 
```

因此，当您期望被解释为数字文字的东西不是数字时，它真的归结为哪种行为最适合您的应用程序。

* * *

我个人的偏好是*不*引用数字文字。这可能是由于我使用其他 DBMS 的经验以及需要避免由隐式数据转换引起的问题。我个人的偏好也是使用准备好的语句，并避免我的语句在 SQL 文本中包含值作为文字。（对于 MySQL，这一点主要是没有意义的，因为带有绑定变量的准备好的语句在发送到数据库时会转换为纯 SQL 文本......但这是由 MySQL 库完成的，而不是我的代码。再说一次，这是偏好可能最了解我使用其他 RDBMS（Oracle、Teradata、DB2、SQL Server）而不是 MySQL 本身的长期经验。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T19:51:21.040

我强烈建议在引用数值时要小心——这就是发生在我身上的事情：一个优化的、经常运行的查询产生了疯狂的 IO 和相当多的 CPU 负载：

```
SELECT blah FROM foo WHERE intcolumn='17'; 
```

选择性是数百万行中的大约 100 行。我检查了执行计划：你瞧，对驱动表进行全表扫描。`foo(intcolumn)`我一次又一次地检查索引，甚至删除并重新创建它，没有运气。查询时间以分钟为单位。

```
SELECT blah FROM foo WHERE intcolumn=17; 
```

不到0.1秒。出于某种原因，MySQL 选择将 all`foo.intcolumn`转换为`VARCHAR`，然后进行字符串比较`'17'`。当然，这包括忽略索引。

我不知道，如果我在旧版本的 MySQL 中遇到了一个奇异的错误，但我肯定会带走一件事：确保解析器知道我打算使用什么数据类型。这个ofocurse可能会因引用数字而变得棘手。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-31T19:52:00.540

普遍的共识是，将 SQL 语句编写为插值（您的示例）或连接字符串不是一个好主意（即，既不专业也不防错）。**您应该改用准备好的语句。**

在黑暗时代，我使用了如下函数：

```
// This is obsolete!!
function escape_input($s) {
  if (!ctype_digit($s))
    return "'" . mysql_real_escape_string($s) . "'";
  else
    return $s;
} 
```

如您所见，我引用了字符串输入，但允许整数输入不带引号通过。（尽管你可以引用整数输入而不会产生任何不良影响。）我在每个 MySQL 输入上都使用了这个函数，无论我是否知道输入是整数。通过强迫自己遵循这种模式，我认为我从来没有向 SQL 注入攻击敞开心扉。但同样，我不会再这样做了。我会使用 PDO 或 mysqli_* 中的准备好的语句。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-31T19:44:21.777

> 使用简单的 mysql 而不是 PDO 或任何东西会更专业和防错方法

我会说它是[`sprintf`](http://php.net/sprintf)并且编写可读的代码。您通常不希望将变量名称放入字符串中，而是稍后根据顺序添加它们。这使它更加解耦并且更易于阅读。

您还可以指定数字数据，`%d`以确保它是整数值并且不易发生字符串注入。数字文字通常不需要引号。所以`sprintf`和 SQL 在这里配合得很好。`%s`需要引号，`%d`不需要。然而，报价也不会受到伤害：

```
$sql_request = "SELECT * 
                  FROM myusers 
                      WHERE user_id = '%d'
                        AND email = '%s' 
                          LIMIT 0,1";

$query = sprintf($sql_request, $user_id, mysql_real_escape_string($email_address, $link)); 
```

但是，我在您的问题中读到了关于不是 mysqli 或 PDO 的问题。如果可以，切换到 PDO 并使用准备好的语句/参数化查询。如果这是一个旧应用程序，请在`mysql_*`函数前面加上一些东西，然后根据 PDO 自己实现它们，然后缓慢而稳定地用新代码替换旧代码。

还请看一下这个问题，它也应该可以帮助您开始移植代码，它的工作速度相对较快：

*   [PHP 文件无法输入部分代码](https://stackoverflow.com/questions/11575531/php-file-cannot-enter-some-part-of-code)

以及如何切换到 PDO：

*   [如何使用已弃用的 mysql_* 函数成功重写旧的 mysql-php 代码？](https://stackoverflow.com/q/10919277/367456)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-31T19:39:15.160

不应引用 User_id 列，因为它是数字的。但是您必须确保传递了数值。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-31T19:40:19.480

`$user_id`只要*确保*变量包含数字，就不需要引用。

如果不是这样，它可能会破坏您的查询，甚至损坏您的数据库！

更好的解决方案是使用使用 PDO 或其他库的准备好的语句。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-08-31T19:39:08.077

我会推荐引用。你永远不能太确定！（你会让 MySQL 处理可能的错误）。此外，习惯在变量周围添加引号可以帮助您记住一旦习惯了就始终将它们放在引号中，从而减少错误。（也不要忘记转义您的输入）

或者，将 PDO 或 MySQLi 与准备好的语句一起使用！你甚至不必再引用了。（是的，对不起。回答一个真正想要使用已弃用的东西的问题会让我提供更好的选择）

# java - 为什么我的代码会导致编译器标记“未经检查或不安全的操作”警告？

> ID：12221516
> 
> 赞同：0
> 
> 时间：2012-08-31T19:37:07.500
> 
> 标签：java, compiler-construction, javac, unsafe, unchecked

我的 java 编译器抱怨我的代码使用“未经检查或不安全的操作”。知道这两个代码片段中哪些行导致了这种情况吗？

```
 @SuppressWarnings("unchecked")
private final void prepareChannelAccountStringsParserImplementedClassConstructor() {
    try {
        String channelAccountStringsParserImplementedClassName = channelIdentifier + "AccountStringsParser";
        Class channelAccountStringsParserImplementedClass = Class.forName(channelAccountStringsParserImplementedClassName);
        Class[] channelAccountStringsParserImplementedClassArguments = new Class[1];
        channelAccountStringsParserImplementedClassArguments[0] = String.class;
        channelAccountStringsParserImplementedClassConstructor = channelAccountStringsParserImplementedClass.getConstructor(channelAccountStringsParserImplementedClassArguments);
        channelAccountStringsParserImplementedParseMethod = channelAccountStringsParserImplementedClass.getMethod("parse", String.class);
        channelAccountStringsParserGetRequestIDMethod = channelAccountStringsParserImplementedClass.getMethod("getRequestID");
    } catch (ClassNotFoundException classNotFoundException) {
        NotifyMeListenersLogsDB notifyMeListenersLogsDB = DatabaseController.getInstance().getNotifyMeListenersLogsDB();
        notifyMeListenersLogsDB.writeDeveloperException(classNotFoundException);
    } catch (NoSuchMethodException noSuchMethodException) {
        NotifyMeListenersLogsDB notifyMeListenersLogsDB = DatabaseController.getInstance().getNotifyMeListenersLogsDB();
        notifyMeListenersLogsDB.writeDeveloperException(noSuchMethodException);
    }
}

    @SuppressWarnings("unchecked")
public synchronized final void requestChannelAccountsCompletionSuccess(String responseContent) {
    Object channelAccountStringsParserImplementedInstance;
    ArrayList<ChannelAccount> channelAccounts = null;
    String requestID = null;
    try {
        channelAccountStringsParserImplementedInstance = channelAccountStringsParserImplementedClassConstructor.newInstance(responseContent);
        channelAccounts = (ArrayList<ChannelAccount>) channelAccountStringsParserImplementedParseMethod.invoke(channelAccountStringsParserImplementedInstance, responseContent);
        requestID = (String) channelAccountStringsParserGetRequestIDMethod.invoke(channelAccountStringsParserImplementedInstance);
    } catch (InstantiationException instantiationException) {
        NotifyMeListenersLogsDB notifyMeListenersLogsDB = DatabaseController.getInstance().getNotifyMeListenersLogsDB();
        notifyMeListenersLogsDB.writeDeveloperException(instantiationException);
    } catch (IllegalAccessException illegalAccessException) {
        NotifyMeListenersLogsDB notifyMeListenersLogsDB = DatabaseController.getInstance().getNotifyMeListenersLogsDB();
        notifyMeListenersLogsDB.writeDeveloperException(illegalAccessException);
    } catch (InvocationTargetException invocationTargetException) {
        NotifyMeListenersLogsDB notifyMeListenersLogsDB = DatabaseController.getInstance().getNotifyMeListenersLogsDB();
        notifyMeListenersLogsDB.writeDeveloperException(invocationTargetException);
    }
    channelAccountStringsParserImplementedInstance = null;
    try {
        startChannelConnections(channelAccounts);
        isStarted = true;
        LoadBalancer.getInstance().sendSuccessAcknowledgement(requestID);
    } catch (NotifyMeListenersApplicationInitializationException notifyMeListenersApplicationInitializationException) {
        NotifyMeListenersLogsDB notifyMeListenersLogsDB = DatabaseController.getInstance().getNotifyMeListenersLogsDB();
        notifyMeListenersLogsDB.writeNotifyMeListenersException(notifyMeListenersApplicationInitializationException);
        System.exit(1);
    }
} 
```

当然，我放了@SuppressWarnings 来压制它，但我想知道原因。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T19:54:30.197

类是一个参数化的类。您应该使用`Class<?>`（或必要时更具体的东西）。当然，编译器错误可能会准确地告诉您问题出在哪里。

此外，这一行是未经检查的演员表，但你别无选择：

```
channelAccounts = (ArrayList<ChannelAccount>)channelAccountStringsParserImplementedParseMethod.invoke(channelAccountStringsParserImplementedInstance, responseContent); 
```

# android - RSS显示安卓

> ID：12221517
> 
> 赞同：2
> 
> 时间：2012-08-31T19:37:12.493
> 
> 标签：android, rss

嗨，我正在尝试显示我的 rss 提要，但问题是，在尝试显示标题时，rss 提要以某种方式显示了所有内容（链接、标题，甚至是我试图从中读取提要的页面的名称） . 这是代码示例。

```
 public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        List<JSONObject> jobs = new ArrayList<JSONObject>();
        try {

        } catch (Exception e) {
        Log.e("RSS ERROR", "Error loading RSS Feed Stream >> " + e.getMessage() + " //" + e.toString());
        }

        final Button button1 = (Button) findViewById(R.id.button1);

        button1.setText(aaa);

    }

    public static List<JSONObject> getLatestRssFeed(){

        String feed = "http://www.net.hr/rss/feeds/naslovnica/index.xml";

    RSSHandler rh = new RSSHandler();
    List<Article> articles = rh.getLatestArticles(feed);
    Log.e("RSS ERROR", "Number of articles " + articles.size());
    return fillData(articles);

    }

    private static List<JSONObject> fillData(List<Article> articles) {

        List<JSONObject> items = new ArrayList<JSONObject>();
        for (Article article : articles) {
            JSONObject current = new JSONObject();
            try {
             buildJsonObject(article, current);

                 aaa=article.getTitle();
         /*
This is where I'm trying to get the title from actually
*/        
        } catch (JSONException e) {
        Log.e("RSS ERROR", "Error creating JSON Object from RSS feed");
        }
        items.add(current);
            }

            return items;
        }

        private static void buildJsonObject(Article article, JSONObject current) throws JSONException {
    String title = article.getTitle();

    } 
```

还有这个课

```
public class RSSHandler extends DefaultHandler {

private Article currentArticle = new Article();
private List<Article> articleList = new ArrayList<Article>();

private int articlesAdded = 0;

private static final int ARTICLES_LIMIT = 1;

StringBuffer chars = new StringBuffer();

public void startElement(String uri, String localName, String qName, Attributes atts) {
chars = new StringBuffer();
}

public void endElement(String uri, String localName, String qName) throws SAXException {

if (localName.equalsIgnoreCase("title"))
{
Log.d("LOGGING RSS XML", "Setting article title: " + chars.toString());
currentArticle.setTitle(chars.toString());

}
else if (localName.equalsIgnoreCase("description"))
{
Log.d("LOGGING RSS XML", "Setting article description: " + chars.toString());
currentArticle.setDescription(chars.toString());
}
else if (localName.equalsIgnoreCase("pubDate"))
{
Log.d("LOGGING RSS XML", "Setting article published date: " + chars.toString());
currentArticle.setPubDate(chars.toString());
}
else if (localName.equalsIgnoreCase("encoded"))
{
Log.d("LOGGING RSS XML", "Setting article content: " + chars.toString());
currentArticle.setEncodedContent(chars.toString());
}
else if (localName.equalsIgnoreCase("item"))
{

}
else if (localName.equalsIgnoreCase("link"))
{
try {
Log.d("LOGGING RSS XML", "Setting article link url: " + chars.toString());
currentArticle.setUrl(new URL(chars.toString()));
} catch (MalformedURLException e) {
Log.e("RSA Error", e.getMessage());
}

}

if (localName.equalsIgnoreCase("item")) {

articleList.add(currentArticle);

currentArticle = new Article();

articlesAdded++;
if (articlesAdded >= ARTICLES_LIMIT)
{
throw new SAXException();
}
}
}

public void characters(char ch[], int start, int length) {
chars.append(new String(ch, start, length));
}

public List<Article> getLatestArticles(String feedUrl) {
URL url = null;
try {

SAXParserFactory spf = SAXParserFactory.newInstance();
SAXParser sp = spf.newSAXParser();
XMLReader xr = sp.getXMLReader();

url = new URL(feedUrl);

xr.setContentHandler(this);
xr.parse(new InputSource(url.openStream()));

} catch (IOException e) {
Log.e("RSS Handler IO", e.getMessage() + " >> " + e.toString());
} catch (SAXException e) {
Log.e("RSS Handler SAX", e.toString());
} catch (ParserConfigurationException e) {
Log.e("RSS Handler Parser Config", e.toString());
}

return articleList;
}

} 
```

还要注意，因为这是我第一次在编程时遇到 rss，所以这不是我的代码，但这里是链接 [https://github.com/robhinds/AndroidRssReader/blob/master/src/com/tmm/android /rssreader/RssListAdapter.java](https://github.com/robhinds/AndroidRssReader/blob/master/src/com/tmm/android/rssreader/RssListAdapter.java) 所以我想知道是否还有其他问题（比如不同的 rss 版本或其他问题），但我认为不会导致他的链接对我的应用程序也有同样的影响。

无论如何，我需要该应用程序仅获取 12 条最新新闻的标题和新闻链接。谢谢

# ruby-on-rails - RoR：无法更新模型

> ID：12221518
> 
> 赞同：0
> 
> 时间：2012-08-31T19:37:14.910
> 
> 标签：ruby-on-rails, rest, routes, partial-views, put

我尝试为我的一个模型创建一个带有更新表单的部分，但是当我运行服务器并浏览带有部分的页面时，我得到了一个奇怪的异常：

```
NoMethodError in Simpadmin/transactions#index

Showing /home/ben/proj/Simplee/master/app/views/simpadmin/transactions/_transaction_actions.html.haml where line #17 raised:

undefined method `payments_transaction_path' for #<#<Class:0x00000007bf1768>:0x00000007bceb00>
Extracted source (around line #17):

14:   %span.refund-success= flash[:refund_success]
15: 
16: .refund-edit
17:   = form_for transaction do |refund_form|
18:     .refund-reason
19:       = refund_form.label(:refund_reason, "Reason for refund:")
20:       = select_tag(:refund_reason, options_for_select(possible_refund_emails), :class => 'refund-reason-select') 
Trace of template inclusion: app/views/simpadmin/transactions/_

item.html.haml, app/views/simpadmin/transactions/index.html.haml 
```

也许我的溃败有问题（？）我应该改变部分本身的东西吗？

编辑：路线不是我写的。无论如何，这是交易的路线部分：

```
 resources :transactions, :only => [:index, :update, :show] do                                                        
155       collection do                                                                                                      
156         get :export                                                                                                      
157         post :edit_cashed_checks                                                                                         
158         put :update_cashed_checks                                                                                        
159       end                                                                                                                
160       member do                                                                                                          
161         match :update_payee, :via => [:post, :put]                                                                       
162         match :add_comment, :via => :post                                                                                
163         put :refund                                                                                                      
164       end                                                                                                                
165     end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T19:01:45.193

当您使用 form_for 并传递某些模型的对象时，在这种情况下，rails 隐式假定要使用帮助程序调用的操作。Rails 使用 xyzs_path 帮助器来找出匹配的路由，其中​​ Xyz 是我们将其对象传递给 form_for 的模型名称。这意味着应该有

```
 resources :xyzs 
```

或者

匹配命名路由

```
 match 'some_url' => 'some_controller#action', :as => 'xyzs' 
```

在您的情况下，您需要定义

```
 resources :payments_transaction 
```

或者

命名路线

```
 match 'some_url' => 'some_controller#action', :as => 'payments_transaction' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T19:40:32.027

您尚未定义此表单的路线。你必须在你的路由文件中这样定义它：

```
resources :payments do
  resources :transactions
end 
```

有关详细信息，请参阅[路由指南](http://guides.rubyonrails.org)。

# objective-c - 如何向嵌套的 Core Data 对象添加新值？

> ID：12221519
> 
> 赞同：0
> 
> 时间：2012-08-31T19:37:19.060
> 
> 标签：objective-c, core-data, nsmanagedobject

我的核心数据对象模型具有三个嵌套对象，如下所示：

```
Item
  Beverage
    Brand 
```

当我第一次创建 Item 的实例时

```
Item *item = [NSEntityDescription insertNewObjectForEntityForName:@"Item" inManagedObjectContext:self.objectContext]; 
```

item.beverage 属性为零。接下来我想在 item.beverage.brand.title 属性中存储一个值。

我是否必须创建一个 Beverage 实例并将其分配给 item.beverage，然后创建一个 Brand 实例并将其分配给 item.beverage.brand。

```
item.beverage = [NSEntityDescription insertNewObjectForEntityForName:@"Beverage" inManagedObjectContext:self.objectContext];

item.beverage.brand = [NSEntityDescription insertNewObjectForEntityForName:@"Brand" inManagedObjectContext:self.objectContext]; 
```

在我最终可以将值分配给 title 属性之前？

```
item.beverage.brand.title=@"Sample Title"; 
```

有没有更短/更简洁的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T21:06:26.953

您需要在对象图中创建每个对象。我不知道任何核心数据提供的快捷方式。如果您发现自己编写了大量样板代码，您当然可以编写自己的方法、类别或宏来减少冗长。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T21:10:23.837

如果您的单独实体的目的主要是封装行为或数据规范化，则有时您永远不希望在不自动插入子项的情况下插入父项。在您的情况下，这可能是一个始终无误地具有 Beverage 的 Item。

在这种情况下，您可以使用级联删除规则将 Item 和 Beverage 之间的关系设置为非可选且一对一的关系。总之，这些反映了一个事实，即没有另一个是没有意义的。不幸的是，在这种情况下，插入 Item*仍然不会*插入 Beverage。为此，请覆盖`awakeFromInsert`以执行此插入，然后每当创建 Item 实例时它都会自动出现。

另一方面，如果一个项目可能没有饮料，但是当它有时，饮料总是有一个名称，正如另一位发帖人评论的那样，也有可能添加自定义逻辑 - `Item.setBrandname`，插入饮料如果它不存在 - 是一个可行的解决方案。

您的业​​务逻辑推动了这种决策。

此外，fwiw, 'item' 虽然不是保留关键字，但可能是一个避免作为类/变量名称的好词，因为它是一个抽象/编程相关的概念。这与我的其他答案完全不同。;-)

# ruby-on-rails-3 - BatmanJS 和 Rails3：在控制器中获取对象属性

> ID：12221521
> 
> 赞同：1
> 
> 时间：2012-08-31T19:37:20.183
> 
> 标签：ruby-on-rails-3, batman.js

我认为这将在我的 BatmanJS 控制器中工作：

```
project = Project.find parseInt(params.id, 10), (err) ->
  throw err if err

@set 'project', project
**@set 'owner_id', project.get("owner_id")** 
```

但 project.get("owner_id") 始终未定义。我想知道我对 Project.find 的调用是否错误，因为我认为它与 rails 非常相似。我究竟做错了什么？

owner_id 是项目的属性，在视图中有效：

```
%p{"data-bind" => "owner_id"} 
```

工作并吐出正确的所有者ID。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T20:30:46.670

像 JS 中的许多东西一样，`Batman.Model.find`是一种异步方法，来自[docs](http://batmanjs.org/docs/batman.html#batman-model-find) ...

> `Model.find()`要求模型使用给定`callback`的记录调用给定`id`。

所以，这是代码中发生的事情的顺序......

1.  Call`Project.find`告诉我们在从数据库中检索数据后`Batman.Model`调用我们的函数。`callback`
2.  分配该函数的返回值（这是一种**稍后**将填写的承诺）。
3.  设置该`'project'`承诺的关键路径。
4.  立即尝试调用`#get`该承诺（在它具有价值之前）。
5.  一段时间后，`find`来自数据库的返回`project`等因此您的`'project'`keypath 将使用您的项目的值进行更新 - 但`'owner_id'`仍然未定义。

通过不尝试设置中间键路径来解决此问题，而只是直接绑定到视图中模型的属性。

IE。在你的控制器中有这个...

```
@set 'project', Project.find parseInt(params.id, 10), (err) -> throw err if err 
```

...然后在您看来...

```
<p data-bind="project.owner_id"></p> 
```

当项目最终从数据库到达时，该元素将更新为`owner_id`

或者，如果您想在控制器中**使用**该`owner_id`值执行某些操作，则为 keypath 设置一个观察者，该观察者将在`project`从数据库到达时触发，例如。

```
@observe 'project.owner_id', (id) =>
  if id
    @set 'owner', Owner.find id, (e) -> throw e if e

@set 'project', Project.find parseInt(params.id, 10), (err) -> throw err if err 
```

因此，当`Project.find`返回时，它将设置keypaths`'project'`并依次设置`'project.owner_id'`​​keypaths，这将触发您的观察者去检索`Owner`并设置`'owner'`keypaths。所以现在你可以在你的视野中......

```
<h3 data-bind="owner.name"></h3> 
```

# android - 是否可以创建具有一些透明区域的 PNG？

> ID：12221523
> 
> 赞同：1
> 
> 时间：2012-08-31T19:37:31.370
> 
> 标签：android, transparency, android-imageview

我正在为小部件背景创建九个补丁图像，并且我希望只有图像的一个区域部分透明。. 是否可以创建这样的 PNG 或在 android 中使用某种透明度贴图？setImageAlpha 设置整个 PNG 的透明度。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-31T19:45:44.977

是的，没有任何问题。PNG可以具有所谓的alpha通道，换句话说就是透明度。它是具有其所属图像尺寸的单独层，并且 alpha 通道的每个像素定义图像相应像素的透明度。

在 PNG 中，alpha 是一个字节值（从 0（完全透明）到 255（不透明）），当然，是为每个像素单独设置的。要使用透明度，您的图像应该是 RGB（真彩色，或者实际上是 ARGB，其中“A”代表 alpha 通道）PNG 文件，并且任何理智的图形应用程序都应该支持它。

PNG还支持索引（颜色映射）图像的透明度，但它的工作方式不同 - 在这种情况下，您在图像调色板中选择单一颜色，如果像素处于该颜色，则它是完全透明的，否则它从调色板中获取颜色。因此，您对透明度的控制较少，因为它是 0-1 类型——颜色要么是透明的，要么不是。没有渐变。

我建议使用任何图形程序，如 Gimp 或 Photoshop 并使用它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T19:38:46.187

好吧，您可以使用任何图像编辑器使 PNG 的背景透明。

# ios - IOS - 安装企业配置文件或企业签名应用程序需要回调苹果？

> ID：12221525
> 
> 赞同：3
> 
> 时间：2012-08-31T19:37:40.713
> 
> 标签：ios, enterprise, provisioning, provisioning-profile

全部：

我的雇主认为他们在向我们的客户分发企业签名应用程序方面存在法律漏洞，但我不确定这在技术上是否可行。（我们在我们的环境中处于IOS的起步阶段）

> “根据 [Apple 企业协议] 开发的内部使用应用程序可以通过两种方式部署在部署设备上：(1) 部署供员工内部使用，以及**(2) 部署供客户在您的物理场所** 或直接使用监督和物理控制您的员工在其他地点，但苹果有权审查和批准此处规定的此类部署。不需要 App Store 批准流程。

在我们的例子中，这是真的——客户将在我们的远程物理站点上。（就我个人而言，我认为第 2 条实际上是针对公司向客户提供的设备——想想博物馆等或承包商，即使这是一个漏洞，也可能会被锁定。但那是暂时没有实际意义。）

我们的位置没有蜂窝服务不可用，并且我们提供仅限于我们的 Intranet 的唯一可用 Wifi - 我们不允许客户免费访问互联网，除非我们不希望客户以非常昂贵的成本在这里做）。因此，我们的想法是在我们的本地 LAN 中本地托管应用程序 (IPA) 和配置文件，让客户安装企业配置文件，然后从本地源安装我们的应用程序。

所以我的问题是，这在技术上是否可行---是否可以在不回拨苹果的情况下通过无线（Wifi）安装配置文件？如果是这样，是否也可以安装企业签名的应用程序，而无需回电 Apple。最终用户是否得到比“您想在您的设备上安装 MegaCorps Enterprise Provisioning Profile”更可怕的事情吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T20:15:43.673

您可以允许从安全网页安装应用程序。只需按照此处的说明进行操作：

[https://developer.apple.com/library/ios/#featuredarticles/FA_Wireless_Enterprise_App_Distribution/Introduction/Introduction.html](https://developer.apple.com/library/ios/#featuredarticles/FA_Wireless_Enterprise_App_Distribution/Introduction/Introduction.html)

它位于*内部应用程序*>*部署应用程序*>*无线安装应用程序*部分。Apple 没有说明需要将单个 UDID 添加到配置文件中。我认为他们不想大肆宣传它，以免滥用变得猖獗。

不过，我没有任何法律建议。

# objective-c - NSDate：获得独立于设备时钟的精确时间？

> ID：12221528
> 
> 赞同：8
> 
> 时间：2012-08-31T19:38:06.823
> 
> 标签：objective-c, ios, nsdate

> **可能重复：**
> [如何在应用程序运行之间本地检测用户的 iPhone 时钟提前？](https://stackoverflow.com/questions/7122216/how-can-i-locally-detect-iphone-clock-advancement-by-a-user-between-app-runs)
> [有没有办法确定 iOS 中的实际时间和日期（不是设备的时间）](https://stackoverflow.com/questions/12006245/is-there-a-way-to-determine-the-actual-time-and-date-in-ios-not-the-time-of-the)
> [iOS 中有没有可以使用的时钟，用户无法更改](https://stackoverflow.com/questions/11413616/is-there-a-clock-in-ios-that-can-be-used-that-cannot-be-changed-by-the-user)

## **简短的**

我正在使用基于自动更新订阅的应用程序。当应用程序收到来自 Apple 的最新收据时，它会将`expires_date_ms`密钥存储在`NSUserDefaults`. 在该日期后的 30 天，该应用程序会与 Apple 核对订阅是否仍然有效。该应用程序可以被视为离线应用程序，但它必须每 30 天连接一次互联网以检查订阅状态。这个时间比较将用于告诉用户他/她必须连接。

## **问题**

我正在使用下面的代码将当前时间与`expires_date_ms`：

```
NSTimeInterval expDateMS = [[productInfo objectForKey:@"expires_date_ms"] doubleValue];
NSTimeInterval currentDateMS = ([[NSDate date] timeIntervalSince1970] * 1000);

if (currentDateMS > expDateMS)
    subExpired = YES; 
```

这很好，效果很好，但据我所知，有一个可以利用的漏洞 - 如果用户将设备的时钟设置回一小时/月/十年，时间比较将变得不可靠，因为`[NSDate date]`使用设备的当前时间（请如我错了请纠正我）。

## **问题**

有没有办法以毫秒为单位检索与设备无关的时间？一种可以在不考虑设备时钟的情况下准确可靠地测量？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-31T19:40:37.230

您需要从可靠的官方时间服务器连接/检索信息，并在您的应用程序中使用该时间数据。例如，[这是一个具有易于使用的 API 的世界时间服务器](http://worldtimeengine.com/api/geo)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-31T19:58:38.543

虽然 Kevin 和 H2CO3 是完全正确的，但还有其他用于检查订阅的解决方案（我希望不需要毫秒精度......）

首先观看`UIApplicationSignificantTimeChangeNotification`，以便您在时间突然变化时收到通知。如果您被停职，这甚至会交付给您（尽管我不相信如果您被终止，您将不会收到）。当有运营商时间更新时会调用它，我*相信*当有手动时间更新（检查）时会调用它。它还在当地午夜和 DST 更改时调用。关键是当时间突然改变时，它经​​常被调用。

跟踪您进入后台的时间。跟踪您回到前台的时间。如果时间从根本上倒退（超过一两天），请建议您访问网络进行检查。每当您向服务器登记时，它应该会告诉您它认为的时间。您可以使用它来同步系统。

您可以类似地跟踪您的实际运行时间。如果它与明显的运行时间严重不同步，那么再次请求访问网络以同步。

我敢肯定，攻击者可以从这个系统中偷偷溜出 35 天或任何时间，而不是 30 天，但是任何愿意努力工作的人都会破解您的软件并完全退出。这里的重点是那些只是在弄乱他们的时钟的未提交攻击者。而且你可以很好地捕捉到。

您应该仔细测试这一点，并且非常犹豫地指责用户任何事情。只需连接到您的服务器就足以让合法用户再次工作。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-31T19:56:02.250

以下是我能想到的三个选项：

1.  **`clock_gettime(CLOCK_MONOTONIC)`**获取当前系统正常运行时间。这是相对不可靠的，因为如果用户重新启动，它会被重置。您可以保存最后使用的值并在启动时使用最后保存的值作为偏移量，但这样做的问题是不会计算设备关闭的时间。

2.  **`mach_absolute_time()`**计算自上次重新启动以来的 CPU 滴答数。它可以很容易地通过`CACurrentMediaTime`. 请注意，这可以通过重新启动设备简单地重置，所以如果更改时间非常重要，我不确定你是否会这样做。

3.  网络时间协议 (NTP) 是一种用于同步计算机系统时钟的网络协议。实际上，所有 NTP 都是在查询时间服务器。可以在[此处](https://github.com/jbenet/ios-ntp)找到用于 NTP 的 iOS 库。

所以前两种方法不需要连接，而第三种方法需要。但是，第三种方法是唯一万无一失的方法。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-31T19:40:52.000

不存在在重新启动后仍然存在的非可变设备时钟。获得可信时间的唯一方法是联系您信任的远程服务器并询问其时间。

# java - 如何按分钟更频繁地安排执行某些事情？

> ID：12221537
> 
> 赞同：3
> 
> 时间：2012-08-31T19:38:42.397
> 
> 标签：java, scheduled-tasks, cron4j

目前，使用`cron4j`，我可以安排在 13:01 执行事件。虽然很好，但据我了解，它不允许在 13:01:10（10 秒后）安排活动。

有没有一种工具可以在调度中实现这种粒度？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T16:26:20.127

在 Java 中，您可以使用 Timer 和 Timer 任务类来安排任务，例如 demo

```
import java.util.Timer;
import java.util.TimerTask;
public class MyTask extends TimerTask{
    Timer timer;
    int count=0;
    public MyTask(){        
    }
    public MyTask(Timer timer){
        this.timer=timer;
    }
    public void toDo(){
        System.out.println("count-> "+(count++));        
    }
    @Override
    public void run() {
        toDo();
        if(count>10){//this is the condition when you want to stop the task.
            timer.cancel();
        }
    }
} 
```

对于这个计时器，您可以按如下方式运行它

```
public static void main(String[] args){
     Timer timer=new Timer();
     MyTask myTask=new MyTask(timer);
     int firstSart=1000;// it means after 1 second.
     int period=1000*2;//after which the task repeat;
     timer.schedule(myTask,firstSart,period);//the time specified in millisecond.     
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T19:43:12.530

如果您正在寻找图书馆，您应该查看[Quartz](http://quartz-scheduler.org/documentation/quartz-2.1.x/quick-start "石英快速入门指南")。它是一个非常灵活的调度器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T19:42:33.440

[Timer](http://docs.oracle.com/javase/6/docs/api/java/util/Timer.html#scheduleAtFixedRate%28java.util.TimerTask,%20java.util.Date,%20long%29)类呢？它允许以精确到毫秒的定期间隔安排执行。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-27T16:12:42.250

我**个人**觉得石英是一个非常复杂和强大的调度器，所以快速上手并不容易。它可能不是一个有效的解决方案，但您可以`sleep(long)`在执行每分钟安排的任务之前。

```
public void execute(TaskExecutionContext context){
    sleep(TimeUnit.SECONDS.toMilliseconds(10));
} 
```

**我没有检查前面代码的语法，所以您可能需要验证它。**

# varnish - 使用 Varnish 缓存选定的 URL

> ID：12221538
> 
> 赞同：1
> 
> 时间：2012-08-31T19:38:45.847
> 
> 标签：varnish, varnish-vcl

有没有办法提供要缓存的静态 URL 列表？我知道我可以在 VCL 中放置一堆“if”语句，但我想知道是否有更优雅的方式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T18:15:19.450

把它们放到正则表达式中

```
if (req.url ~ "^/(some/url/1|some/url/2|....|some/urlN)") {
    unset req.http.Cookie;
    return (lookup);
}
else {
    return (pass);
} 
```

或仅列出 ||

```
 if (req.url ~ "^/some/url/1"
    || req.url ~ "^/some/url/2
    ...
    || req.url ~ "^/some/urlN"
    ) {
            unset req.http.Cookie;
            return (lookup);
    } 
```

# c# - 有没有办法将进程的当前工作集扩展到 1GB？

> ID：12221541
> 
> 赞同：7
> 
> 时间：2012-08-31T19:38:52.710
> 
> 标签：c#, .net, .net-4.0

> **可能重复：**
> [有没有办法在 C++ 中强制进程的 WorkingSet 为 1GB？](https://stackoverflow.com/questions/12228321/is-there-any-way-to-force-the-workingset-of-a-process-to-be-1gb-in-c)

我们希望提前将 .NET 进程的 WorkingSet 增加到 1GB，以避免出现页面错误。

有没有办法在.NET中做到这一点？

**更新**

不幸的是，即使我们调用[SetProcessWorkingSetSizeEx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms686237%28v=vs.85%29.aspx)，垃圾收集仍然会绕过 MinWorkingSet 修剪工作集（参见下图中的“自动 GC.Collect()”）。

在下图中，有没有办法将进程 WorkingSet（绿线）锁定为 1GB，以避免在向进程分配新内存时出现页面错误（红线）的峰值？

这很棒的原因是每次发生页面错误时，它都会阻塞线程 250us，这会严重影响应用程序性能。

![在此处输入图像描述](../Images/775bca9100506ba6c697439004b74178.png)

**更新**

引自：“Windows via C/C++, Fifth Edition, Jeffrey Richter (Wintellect)”

> 单个进程对 SetProcessWorkingSetSize 的调用将被忽略，除非该进程只是试图清空其工作集。要设置此限制，请在 LimitFlags 成员中指定 JOB_OBJECT_LIMIT_WORKINGSET 标志。

这本书暗示设置工作集的唯一方法是将进程分配给作业对象并设置JOB_OBJECT_LIMIT_WORKINGSET和MinimumWorkingSetSize。

**更新**

SetProcessWorkingSetSizeEx 与软页面错误完全无关。它仅指硬页面错误，因为它防止当前工作集中的内存被分页到硬盘驱动器。

**更新**

事实证明，增加 WorkingSet 的唯一方法是使用用 C++ 编写的极其专业的[CLR 主机](https://stackoverflow.com/questions/2348207/what-is-clr-hosting)运行 .NET （请参阅下面的答案）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-31T19:56:05.567

为了实现你想要的，你需要调用/调用[SetWorkingSetSizeEx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms686237%28v=vs.85%29.aspx)，最小 1 GB（第二个参数）和`QUOTA_LIMITS_HARDWS_MIN_ENABLE`第四个参数，确保工作集大小不会低于你给出的最小值，即使在系统的“高内存压力”条件下.

系统行为还取决于调用者的权限，取决于您可能需要的操作系统版本等`SE_INC_WORKING_SET_NAME`和/或`SE_INC_BASE_PRIORITY_NAME`！

在“幕后”使用这些 API 的另一个（更好的）选项是 .NET 包装器，您可以在[此处](http://jobobjectwrapper.codeplex.com/)找到。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-31T19:45:38.570

如果您的问题是您的进程在内存不足的情况下过于激进地修剪其 WS，您可以通过调用`SetProcessWorkingSetSize`或仅设置[`Process.CurrentProcess.MinWorkingSet`](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.minworkingset).

但是，您所展示的是您的工作集被 GC 减少了。这告诉我，真正发生的是 GC 正在重新分配构成您的 WS 的页面。如果是这种情况，则您遇到的是地址空间问题而不是工作集问题，并且您无法进行系统调用来防止它。理想情况下，您可以告诉 GC 不要将其内存返回给操作系统，但 .NET 没有这样的功能。

要解决地址空间问题，您将不得不重用已分配的对象。如果您的问题与大对象堆有关，则很可能是由于集合所致。例如，与其创建一个新的数组/列表/字典，不如调用它的`Clear`方法并重用它。如果您的问题是字符串，您可能可以使用`StringBuilder`s 避开 LOH。

如果您创建了很多特定类型的对象，请考虑创建一个可回收的对象池。我从来没有做过这样的事情，但是如果我要实现它，我会创建一个带有静态工厂方法的对象，该方法将对象从池中拉出并调用初始化程序而不是公共构造函数，并在其上放置一个终结器将其放回池中并清空其中的任何引用。根据需要，池可能是`ConcurrentBag<WeakReference<T>>`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-01T07:58:09.590

我认为将流程分配给作业对象和设置[`JOB_OBJECT_LIMIT_WORKINGSET`并且`MinimumWorkingSetSize`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms684147.aspx)可能会起作用。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-21T11:46:47.153

我们可以找到在 .NET 下增加进程的 WorkingSet 以减少软页面错误的唯一方法是在自定义[CLR Host](http://msdn.microsoft.com/en-us/magazine/cc163567.aspx)下运行整个 .NET 应用程序。这是一个非常重要的练习，需要大约 800 行自定义编写的、相当密集的 C++ 代码。C++ 代码拦截了对 Win32 内存管理方法的 .NET 调用，改变了 .NET 运行时的行为，因此它不会像往常那样积极地释放内存。

这会在应用程序启动时引发所有软页面错误，因此在正常的应用程序执行期间，.NET 应用程序中的软页面错误数量几乎降至零。

这意味着应用程序可能会占用大量内存，但它运行得更快。换句话说，我们正在牺牲内存使用来提高实时性能。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-02T13:26:46.243

我认为这里有一个误解：释放未使用内存的 GC 是*好的*。仅仅为了在 WS 指标中看到更高的数字而保留它是没有用的……您不想*在*WS 中使用未使用的内存。您正在针对错误的指标进行优化。

页面错误的数量意义不大，因为存在软错误和硬错误。从磁盘读取的硬故障。在大多数情况下，软故障毫无意义。它们是操作系统的实现细节。例如，对于您触摸的每个新分配的页面，都会发生软故障。

这里有一些证据表明您的红色图表没有显示硬故障：最后它显示大约 500/秒。您的磁盘无法提供 500 IOPS，因此它不可能是硬故障。

您可能只想测量（并减少）硬故障。只有硬故障才会以有意义的方式影响性能。

此外，设置 WS 限制不会影响 GC 的功能。GC 不是操作系统组件。Is 是一个用户模式库。它与操作系统决定用作工作集的内容无关。因此，您不能通过设置 WS 限制来使 GC 不释放内存。

那么为什么 GC 运行时 WS 会收缩呢？因为 GC*删除*了一些内存。设置一些 WS 限制不能防止删除内存。

在评论中，有人建议 GC 本身可能会调用一些 API 来缩小工作集。我根本看不出它为什么会这样做。为什么 GC 会强制页面退出进程？记住：WS 和分配的页面是不一样的（根本不一样！）。GC 可能会*释放*内存。它不会强制 WS 收缩。那会有什么目的？

# html - 嵌入 iframe 的书签主页？

> ID：12221544
> 
> 赞同：0
> 
> 时间：2012-08-31T19:39:04.560
> 
> 标签：html, iframe, bookmarks

iframe 的内容实际上是在单击主页侧边栏上的链接时加载的 perl 生成的 html。但即使它只是普通的 html。有没有办法将主页与指定的 iframe 内容一起添加为书签？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T19:45:37.723

您始终可以将查询字符串或哈希标记添加到 URL。然后让你的 iframe 根据查询/哈希输入加载 HTML（当然是在清理之后）。这样，当用户为页面添加书签时，适当的内容将填充 iframe。

# c++ - mainwindow.ui 和 dialog.ui 设置/读取通信日期

> ID：12221552
> 
> 赞同：0
> 
> 时间：2012-08-31T19:39:43.790
> 
> 标签：c++, qt, c++11

我有两个窗口：**mainwindow.ui**和**dialog.ui**。在**mainwindow.cpp 中**，我在另一个类的堆上初始化一些对象用于以太网通信，并使用这些对象的函数从总线读取日期并显示**mainwindow.ui**中的值。在**dialog.ui 中**，我想在总线上设置值，但问题是访问**mainwindow.cpp**中的通信功能和对象。我想将 dialog.cpp 定义为朋友类，但我做错了。这是一些代码：

**主窗口.h**

```
class MainWindow : public QMainWindow 
{protected: DateReg *myPosReg;...} 
```

**主窗口.cpp**

```
...   
myPosReg = new DateReg(DateValue->AddReg());
...
myPosReg->GetValue(a,b,c);
myPosReg->setValue(a,b,c);
    ... 
```

我可以以某种方式访问**​​ dialog.cpp中的***setValue()*函数吗？我应该始终将**dialog.cpp**用于**dialog.ui**还是可以在**mainwindow.cpp中使用****dialog.ui** -date ？**要在dialog.ui**中设置值，我使用 QDoubleSpinBox。在**mainwindow.ui**我调用**dialog.ui**。对不起我的英语。

 ******* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T20:52:42.000

据我了解，您有两个类：`MainWindow`和`Dialog`. 由于`MainWindow::myPosReg`受保护，您只能在 中访问它`Dialog`，如果`Dialog`它来自`MainWindow`或如果它是朋友。

以下设计应该有效：

```
class MainWindow : public QMainWindow 
{
    [...]
  protected: 
    DateReg *myPosReg; 
    friend class Dialog; 
};

class Dialog
{
    [...]
    MainWindow* myMainWindow;

    void someFunction()
    {
        myMainWindow->myPosReg->setValue([...]);
    }
}; 
```

作为替代方案，我建议通过使用信号和插槽来使用更 Qt 的方式。当旋转框发生`Dialog`变化时，发出一个`MainWindow`监听的信号。

我们从对话框开始：

```
class Dialog : public QDialog
{
    [...]
    Dialog()
    {
        [...init ui...]
        connect(ui->spinBoxA, SIGNAL(valueChanged(int)),
                this, SLOT(onSpinBoxValueChanged()));
        connect(ui->spinBoxB, SIGNAL(valueChanged(int)),
                this, SLOT(onSpinBoxValueChanged()));
        connect(ui->spinBoxC, SIGNAL(valueChanged(int)),
                this, SLOT(onSpinBoxValueChanged()));
    }

  signals:
    void valuesChanged(int a, int b, int c);

  private slots:
    void onSpinBoxValueChanged()
    {
        emit valuesChanged(ui->spinBoxA->value(), ui->spinBoxB->value(),
                           ui->spinBoxC->value());
    }
}; 
```

所以对话框有一个内部 slot `onSpinBoxValueChanged()`，当其中一个 spinbox 更改其值时会调用它。这个槽的唯一目的是发出另一个信号`valuesChanged`，我们将连接主窗口（即对话框的内部槽将三个值组合成一个信号）。

主窗口可能如下：

```
class MainWindow : public QMainWindow
{
    [...]
    DateReg *myPosReg;
  public slots:
    void setValues(int a, int b, int c)
    {
        myPosReg->setValues(a, b, c);
    }
}; 
```

以及连接两者的代码

```
int main()
{
    [...]
    MainWindow* mainWindow = new MainWindow;
    Dialog* dialog = new Dialog;
    connect(dialog, SIGNAL(valuesChanged(int,int,int)),
            mainWindow, SLOT(setValues(int,int,int)));
} 
```

当用户更改旋转框中的值时，会发生以下连锁反应：

```
QSpinBox::valueChanged(int) -> Dialog::onSpinBoxValueChanged() 
  -> Dialog::valuesChanged() -> MainWindow::setValues() -> DateReg::setValues() 
```

优点是您可以解耦`MainWindow`并且`Dialog`：`Dialog`仅表示值已更改，但不关心它们会发生什么，并`MainWindow`更改它`myPosReg`但不关心值的来源。******

# grails - 查找与另一种类型关联的类型的所有实例

> ID：12221555
> 
> 赞同：0
> 
> 时间：2012-08-31T19:39:48.840
> 
> 标签：grails

我有一些看起来像这样的类：

```
class User {
    boolean enabled
    String username
}

class ExampleClass {
    User firstUser
    User secondUser
} 
```

我的最终目标是找到`User`where `enabled == true`OR 的实例`User`与`ExampleClass`.

运行此代码的位置我无权访问变量名称`firstUser`或`secondUser`.

**话虽如此，我需要能够找到关联的所有实例，`User`而不管关联是通过`ExampleClass`哪个变量（`firstUser`或）。`secondUser`** 我该怎么做呢？

**更新：**

我能想到的最好的方法是我的`User`域类中的这种方法。在上面给出的示例中，我有一个类型`ExampleClass`的多个字段`User`。事实上，我有多个具有多个类型字段的`User`类。这就是为什么我从传入的对象中获取域类，而不仅仅是键入`ExampleClass`.

```
static List findAllEnabledOrAssociatedWith( Object obj = null ) {
    if( obj?.id ) { // Make sure the object in question has been saved to database.
        List list = [] 
        obj.domainClass.getPersistentProperties().each {
            if( it.getReferencedPropertyType() == User ) {
                def propertyName = it.getName()
                list += User.executeQuery( "SELECT DISTINCT ${propertyName} FROM ${obj.class.getSimpleName()} obj INNER JOIN obj.${propertyName} ${propertyName} WHERE obj =:obj", [ obj: obj ] )
            }
        }
        list.unique()
        return User.executeQuery( "SELECT DISTINCT users FROM User users WHERE users.enabled=true OR users IN(:list)", [ list: list ] )
    } else {
        return User.executeQuery( "SELECT DISTINCT users FROM User users WHERE users.enabled=true" )
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T20:11:06.553

```
def sql = '''
    from 
        User u, 
        ExampleClass ex 
    where 
        u.enabled = 1 or (u = ex.firstUser or u = ex.secondUser)'''
def users = User.findAll(sql) 
```

# perl - -x 选项在 Perl 中究竟是什么意思 if

> ID：12221559
> 
> 赞同：2
> 
> 时间：2012-08-31T19:39:55.533
> 
> 标签：perl, if-statement

我不知道 Perl，所以请耐心等待！这有点来自脚本，它会产生错误：

```
 if (-x '/usr/bin/gcc') {
        $gcc = Fink::Services::enforce_gcc(<<GCC_MSG);
Under CURRENT_SYSTEM, Fink must be bootstrapped or updated with gcc
EXPECTED_GCC, however, you currently have gcc INSTALLED_GCC selected.
This typically is due to alteration of symlinks which were
installed by Xcode. To correct this problem, you will need
to restore the compiler symlinks to the configuration that
Apple provides.
GCC_MSG
        $gcc = "-gcc" . $gcc;
    } 
```

这个脚本在 Mac 上安装 fink 包管理器。（我不是 Mac 用户，试图帮助我的朋友安装一个最初是 GNU 程序并且需要从源代码编译的程序）。

安装脚本抱怨 GCC 的版本不是它所期望的。我怀疑这是失败的地方，但不太明白它在做什么。

我尝试为已安装的 GCC 创建一个符号链接，它是 4.2.1 版，而 fink 想要 4.2 版。

如果我将 GCC 的符号链接放入 /usr/bin，则会显示此消息。否则它会正确识别 GCC 的版本并拒绝安装。

我认为该`-x`开关类似于 Bash，意味着它正在检查文件是否为可执行文件，但我不确定它在 Perl 中到底做了什么，它会将指向可执行文件的链接视为可执行文件吗？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-31T19:51:01.623

它测试文件是否设置了可执行位。在您的情况下：`chmod -x /usr/bin/gcc`将导致您的`if`块不执行。 `chmod +x /usr/bin/gcc`将导致您的`if`块被执行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T21:17:35.360

Perl 的文件测试操作符（您可以使用命令查看文档：perldoc -f -x）通常遵循符号链接，除了`-l`and `lstat()`。如果你特别想测试链接而不是目标，你可以先做一个，然后测试`-x _`；`_`作为参数使其重用最后的统计结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T20:01:51.683

```
-X  File is executable by real uid/gid 
```

# mysql - 更改 mySQL 中的视图以添加属于另一个表的另一列

> ID：12221565
> 
> 赞同：2
> 
> 时间：2012-08-31T19:40:17.780
> 
> 标签：mysql, view, alter

我有一个名为 dev 的数据库和一个名为 employees_view 的视图（主键 - idEmployee）。现在，我想将属于另一个（现有）表 Ref_Employee_Categories（主键 - idEmployee_Category）的名为 Employee_Type (VARCHAR 45) 的另一个（现有）列添加到我的视图 - employees_view。

我对数据库不太了解，所以我需要知道，我该怎么做。我所知道的关于改变视图的所有信息是：ALTER VIEW dev.employee_view ADD dev.Ref_Employee_Categories.Employee_Type varchar (45)

我上面写的对吗？如果不是这样做的正确语法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T19:50:50.187

noup，这是不正确的，例如，它（就像）只是一种进行查询的简单方法。

如果你有这样的事情：

`select * from table_1 as t1 join table_2 as t2 on t1.id=t2.id join table_3 ....... join table_100 on t100.id=t99.id`

您可以恢复所有查询并进行：

`CREATE VIEW big_query AS select * from table_1 as t1 join table_2 as t2 on t1.id=t2.id join table_3 ....... join table_100 on t100.id=t99.id;`

如果你现在 make`select * from big_query`你将执行 100 的连接。

**如果要更改视图并添加另一列，则必须手动编写查询，然后创建一个视图**

你可以在这里找到更多信息：http: [//dev.mysql.com/doc/refman/5.0/en/create-view.html](http://dev.mysql.com/doc/refman/5.0/en/create-view.html)

# php - PHP中的数据结构

> ID：12221567
> 
> 赞同：1
> 
> 时间：2012-08-31T19:40:24.787
> 
> 标签：php, data-structures

是否可以在 PHP 中定义以下数据结构？

```
typedef struct
{
  int maxrank;          
  float rankrat[maxpop];
  int rankno[maxpop]; 
  individual ind[maxpop],
    *ind_ptr; 
}population ; 

population pop; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-31T19:41:36.347

您无法`class`在 PHP 中定义除 a 之外的数据结构，因此您始终可以这样做。它看起来有点像这样：

```
class Population
{
    public $maxrank;
    public $rankrat = array();
    public $rankno = array();
    public $ind = array();
    public $ind_ptr;
}

$population = new Population(); 
```

再看一下数据结构，您还需要一个`Individual`类，该类将从`$population->ind_ptr`and中引用`$population->ind[]`。请记住，PHP 是松散类型的，因此您`$ind_ptr`也可以立即成为`array`，`string`或其他任何东西。解决此问题的一种快速方法是使用带有类型提示的 setter 方法（以及后续的 getter），如下所示：

```
protected $_ind_ptr;
public function setIndPtr(Individual $ind)
{
    $this->_ind_ptr = $ind;
}
public function getIndPtr()
{
    return $this->_ind_ptr;
} 
```

或者，如果它仅在一个位置，则使用数组来定义它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T19:43:14.243

是的，在课堂上。

```
class Population
{
    public $maxrank;
    public $rankrat = array();
    public $rankno = array();
} 
```

# video-streaming - x264 速率控制

> ID：12221569
> 
> 赞同：2
> 
> 时间：2012-08-31T19:40:32.947
> 
> 标签：video-streaming, x264, bitrate

我们在视频会议项目中使用 x264 编码器，我们有基本的流视频工作，但是，我们无法理解各种速率控制设置如何确定最终比特率。我们设置以下参数：

```
x264_param_t params;
x264_param_default_preset(&params, "ultrafast", "zerolatency");
params.i_threads = 1;
params.i_width = width;
params.i_height = height;
params.i_fps_num = fps;
params.i_keyint_max = fps;
params.b_intra_refresh = 1;
params.b_repeat_headers = 1;
params.b_annexb = 1;

//Set rate control stuff here

x264_param_apply_profile(&params, "baseline"); 
```

如果我们只设置 params.rc.i_bitrate 参数，编码器似乎大大超过了比特率。如果我们设置 i_vbv_max_bitrate 和 i_vbv_buffer_size 参数，我们会看到一个比特率达到峰值（有时超过） i_vbv_max_bitrate 设置。显然，严格控制比特率对于视频会议很重要，但文档有点不透明。还有其他人使用 x264 进行视频会议吗？你是如何设置编码器的？任何帮助表示赞赏，在此先感谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-31T20:14:20.747

如果您处于低延迟视频会议模式以获得最小的抖动和可靠的性能，您需要处于 CBR 模式而不是 VBR 模式。正是 VBR 模式提供了实时低延迟系统无法处理的突增和峰值。

有专门用于低延迟视频通信/监视应用程序的 vbr 算法，但 x264 没有。所以不要使用它的vbr。它的 vbr 用于存储。

有一个 --nal-hrd cbr 来启用 cbr

您无法保证比特率不会超过某个点，因为事情是统计的。但是，只要满足某些假设，您就可以在 99% 的时间内控制它。

您的 vbv 缓冲区大小必须是从质量角度来看可以处理的最小大小，有两个目的 1\. 不允许比特率有太多变化 2\. 减少端到端延迟 这是编码器假定在解码器端可用的缓冲. 越小质量越差。找到您可以处理的最小值。

vbv 最大比特率需要设置为 cbr 目标比特率值。这是 rc 的指导方针，这是您允许的最大瞬时比特率。将其设置为目标比特率。请记住它的指导方针。由于视频的统计性质，它可能会被过度拍摄。

确保您有内部刷新，因此 I 图片已关闭。

如果不覆盖某些设置，超快可能不是一个很好的预设。明确设置您的参考图片、b 图片、个人资料。将你的 me 和 subme 设置为更高的级别。[如果我是你的最高级别]。这是您获得射击的原因之一。编码器因此无法做好工作。当编码器有更好的 me 和 subme 时，它​​需要更少的比特来编码发生发射的困难部分！一般不懂视频的人是不会明白的。他们一直在问为什么我/subme 对比特率和射击很重要。相信我确实如此。当编码的困难部分出现时，你得到多少完全取决于编码器的算法，而我是关键之一。

查看您需要使用的个人资料。Cabac 提供高达 20% 的改进。因此，如果您可以做主要配置文件，那就去做。仅使用 1 张参考图片，不使用 B 图片。但是，如果可以使用 cabac 来获得比特率优势，那绝对没有什么坏处。

编辑：一般来说，没有神奇的药丸。以上是多年从事多媒体工作和理解视频所获得的建议。但是，您仍然需要进行一些尝试才能在质量/延迟和特定于您的系统的其他约束之间找到最佳设置。确保您在调整它们之前理解这些术语，否则您将永远在圈子里跑来跑去。还要记住视频是统计的。没有什么是永远100%完美的。

# php - 格式化输出以列出关联数组

> ID：12221579
> 
> 赞同：0
> 
> 时间：2012-08-31T19:41:29.567
> 
> 标签：php, arrays

我在列出复杂数组的内容时遇到了一些麻烦。该数组包含网站的部分和子部分。

HTML 代码如下所示：

```
<table class="listing">
                <thead>
                    <tr>
                        <th class="checkable">#</th>
                        <th>Name</th>
                        <th>Type</th>
                        <th>Date added</th>
                        <th class="actions">Actions</th>
                    </tr>
                </thead>
                <tbody>
                    <?php for ($i = 0; $i < count($sections); $i++): ?>
                    <tr <?php if ($i % 2 == 0): ?>class="alt"<?php endif; ?>>
                        <td class="checkable"><?php echo $i+1; ?></td>
                        <td><?php echo stripslashes($sections[$i]['name']); ?></td>
                        <td><?php echo $sections[$i]['type_name']; ?></td>                                                                                                                                                             
                        <td><?php echo $sections[$i]['date_added']; ?></td>                                                                                                                                                                                                                                                                                                                                                                         
                        <td>
                            <ul class="listing-actions">
                                <li class="default">Actions</li>                                    
                                <li>                            
                                    <a href="edit-section.php?section_id=<?php echo $sections[$i]['section_id']; ?>">Edit</a>                                        
                                    <form action="delete-section.php" method="post" data-prompt="Are you sure you want to delete this element?" >
                                        <input type="hidden" name="section_id" value="<?php echo $sections[$i]['section_id']; ?>" />
                                        <a href="#">Delete</a>
                                    </form>
                                </li>
                            </ul>
                        </td>
                    </tr>
                    <?php if (count($sections[$i]['siblings']) > 0): ?>
                        <?php for ($j = 0; $j < count($sections[$i]['siblings']); $j++): ?>
                        <tr <?php if ($i % 2 != 0): ?>class="alt"<?php endif; ?>>
                            <td class="checkable"><?php echo $j+1; ?></td>
                            <td>&nbsp;&nbsp;&nbsp;&nbsp;|_&nbsp;&nbsp;&nbsp;&nbsp;<?php echo stripslashes($sections[$i]['siblings'][$j]['name']); ?></td>
                            <td><?php echo $sections[$i]['siblings'][$j]['type_name']; ?></td>                                                                                                                                                             
                            <td><?php echo $sections[$i]['siblings'][$j]['date_added']; ?></td>                                                                                                                                                                                                                                                                                                                                                                         
                            <td>
                                <ul class="listing-actions">
                                    <li class="default">Actions</li>                                    
                                    <li>                            
                                        <a href="edit-section.php?section_id=<?php echo $sections[$i]['siblings'][$j]['section_id']; ?>">Edit</a>                                        
                                        <form action="delete-section.php" method="post" data-prompt="Are you sure you want to delete this element?" >
                                            <input type="hidden" name="section_id" value="<?php echo $sections[$i]['siblings'][$j]['section_id']; ?>" />
                                            <a href="#">Delete</a>
                                        </form>
                                    </li>
                                </ul>
                            </td>
                        </tr>                            
                        <?php endfor; ?>
                    <?php endif; ?>
                    <?php endfor; ?>
                </tbody>
            </table> 
```

输出是这样的：[http ://cl.ly/image/240C1S2A3J3J](http://cl.ly/image/240C1S2A3J3J)

现在这是我的问题：我怎样才能得到正确的编号，怎样才能得到正确的交替行颜色？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T20:41:33.620

您的嵌套循环引起了问题。. . 需要单独的变量来跟踪行。. .

```
<table class="listing">
                <thead>
                    <tr>
                        <th class="checkable">#</th>
                        <th>Name</th>
                        <th>Type</th>
                        <th>Date added</th>
                        <th class="actions">Actions</th>
                    </tr>
                </thead>
                <tbody>
                    <?php 
                        $rowNum = 0;
                        for ($i = 0; $i < count($sections); $i++): 
                            $rowNum++;
                    ?>
                    <tr <?php if ($rowNum % 2 == 0): ?>class="alt"<?php endif; ?>>
                        <td class="checkable"><?php echo $rowNum; ?></td>
                        <td><?php echo stripslashes($sections[$i]['name']); ?></td>
                        <td><?php echo $sections[$i]['type_name']; ?></td>                                                                                                                                                             
                        <td><?php echo $sections[$i]['date_added']; ?></td>                                                                                                                                                                                                                                                                                                                                                                         
                        <td>
                            <ul class="listing-actions">
                                <li class="default">Actions</li>                                    
                                <li>                            
                                    <a href="edit-section.php?section_id=<?php echo $sections[$i]['section_id']; ?>">Edit</a>                                        
                                    <form action="delete-section.php" method="post" data-prompt="Are you sure you want to delete this element?" >
                                        <input type="hidden" name="section_id" value="<?php echo $sections[$i]['section_id']; ?>" />
                                        <a href="#">Delete</a>
                                    </form>
                                </li>
                            </ul>
                        </td>
                    </tr>
                    <?php if (count($sections[$i]['siblings']) > 0): ?>
                        <?php 
                           for ($j = 0; $j < count($sections[$i]['siblings']); $j++): 
                           $rowNum++;
                        ?>
                        <tr <?php if ($rowNum % 2 == 0): ?>class="alt"<?php endif; ?>>
                            <td class="checkable"><?php echo $rowNum; ?></td>
                            <td>&nbsp;&nbsp;&nbsp;&nbsp;|_&nbsp;&nbsp;&nbsp;&nbsp;<?php echo stripslashes($sections[$i]['siblings'][$j]['name']); ?></td>
                            <td><?php echo $sections[$i]['siblings'][$j]['type_name']; ?></td>                                                                                                                                                             
                            <td><?php echo $sections[$i]['siblings'][$j]['date_added']; ?></td>                                                                                                                                                                                                                                                                                                                                                                         
                            <td>
                                <ul class="listing-actions">
                                    <li class="default">Actions</li>                                    
                                    <li>                            
                                        <a href="edit-section.php?section_id=<?php echo $sections[$i]['siblings'][$j]['section_id']; ?>">Edit</a>                                        
                                        <form action="delete-section.php" method="post" data-prompt="Are you sure you want to delete this element?" >
                                            <input type="hidden" name="section_id" value="<?php echo $sections[$i]['siblings'][$j]['section_id']; ?>" />
                                            <a href="#">Delete</a>
                                        </form>
                                    </li>
                                </ul>
                            </td>
                        </tr>                            
                        <?php endfor; ?>
                    <?php endif; ?>
                    <?php endfor; ?>
                </tbody>
            </table> 
```

# internet-explorer - Yahoo WebPlayer：不支持内容类型的音频/mpeg

> ID：12221583
> 
> 赞同：0
> 
> 时间：2012-08-31T19:41:37.903
> 
> 标签：internet-explorer, firefox, mp3, yahoo-api

我正在使用雅虎网络播放器播放一些文件。

它在 Chrome 中运行良好。但在 Firefox 中显示错误消息：**不支持内容类型音频/mpeg**

如果我在 mensagem 中获取文件 url 并在另一个选项卡中打开，则可以正常工作。

它也不适用于IE。

> 适用于 Firefox 12，但不适用于 Firefox 15

错误信息：

> this.currentEngine 为空
> 
> 82 号线

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T21:15:45.510

Yahoo WebPlayer 依赖于 Firefox 和 IE 中的 Flash Player。

# sql-server - SQL NO CHECK FOREIGN KEY after data，重新启用查询优化器

> ID：12221584
> 
> 赞同：16
> 
> 时间：2012-08-31T19:41:39.260
> 
> 标签：sql-server, foreign-keys

我有一个带有引用的外键约束的 SQL Server 2012 数据库`Countries.CountryID = States.CountryID`

我需要重新创建`Countries`表，所以我从表中删除了这个 FOREIGN KEY `States`（否则它不允许我删除国家/地区）

在我这样做之后，我想重新创建 FK，`States`但它不允许我这样做，除非我`NO CHECK`这样指定：

```
ALTER TABLE States 
    WITH NOCHECK
    ADD CONSTRAINT FK_StatesCountries FOREIGN KEY (CountryID) REFERENCES Countries(CountryID) 
GO 
```

起初我没有意识到有些州的行有`CountryID`没有匹配的`Countries.CountryID`记录。显然`WITH NOCHECK`允许我继续没有错误。

现在 SQLServer 将此 FK 标记为“不可信”，MSDN 表示通过检查所有约束来重新启用查询优化器。那么为什么即使某些州的 CountryID 无效，以下行也不会给我一个错误？

```
 ALTER TABLE States
      CHECK CONSTRAINT ALL
 GO 
```

我认为这应该引发错误。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-31T19:43:53.003

要使约束再次受信任，您需要使用这种语法，诚然这看起来有点奇怪。这`WITH CHECK`是导致现有数据验证的原因。

```
 ALTER TABLE States
      WITH CHECK CHECK CONSTRAINT ALL
 GO 
```

和以前一样，这将引发错误，直到您解决具有错误 CountryID 值的州。

# c# - C# Winforms 访问用另一个程序打开的打印对话框

> ID：12221587
> 
> 赞同：-1
> 
> 时间：2012-08-31T19:41:54.440
> 
> 标签：c#, winforms, printdialog

我可以访问打印对话框并从 Winforms 以编程方式关闭它吗？此打印对话框将由其他程序（如 Web 浏览器、记事本或绘图）打开。

例如，某人在 Internet Explorer 上并在任何网站上按 ctrl+p，然后打开打印对话框。我的控制台/winform 应用程序会找到它并自动点击确定或取消。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T19:54:34.437

如果您只想执行一个简单的操作，AutoHotkey 之类的程序可能非常适合这种情况。它旨在帮助完成诸如此类的小任务。它可以根据可见的窗口执行不同的操作。它可以执行击键，在这种情况下可以是 Enter、Escape 或 Alt-K。如果您想要更多地与您的应用程序集成，这可能不是正确的解决方案。但是，如果您只是想提高自动化程度，我认为它（或类似的解决方案）是完美的。

[http://www.autohotkey.com/](http://www.autohotkey.com/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-31T19:44:52.300

这是可能的。但是，您将不得不使用非托管代码，我建议使用 WinDows API 来执行此操作。您可以使用函数找到窗口句柄`FindWindow`，然后您可以将相应的消息发布到该窗口。或者您可以获取该按钮的坐标并在激活此窗口后按下它。

# asp.net-mvc - 如何解决 MVC4 在视图中呈现布尔值的重大变化

> ID：12221590
> 
> 赞同：6
> 
> 时间：2012-08-31T19:42:03.727
> 
> 标签：asp.net-mvc, asp.net-mvc-4, .net-4.5

我们最近将现有的 .NET 4 MVC 3 项目升级到 .NET 4.5 和 MVC 4。

我们在哪里有这样的事情：

```
@Model.MyBool
<input type="hidden" name="foo" value="@Model.MyBool" /> 
```

用于呈现为：

```
True
<input type="hidden" name="foo" value="True" /> 
```

或者：

```
False
<input type="hidden" name="foo" value="False" /> 
```

但现在它呈现为：

```
True
<input type="hidden" name="foo" value="value" /> 
```

或者：

```
False
<input type="hidden" name="foo" /> 
```

也就是说，当布尔属性在视图中呈现为隐藏输入的 value 属性的值时，它不会呈现为`True`or `False`（就像它在其他地方所做的那样），而是呈现为`value`，或完全错过该属性。

两个问题：

1.  怎么回事？
2.  有没有一种很好的简单方法可以修复这破坏了我的应用程序的众多地方？这是一个很大的应用程序，我不喜欢浏览每一个视图来尝试识别我在输入字段中放入布尔值的任何地方。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T19:55:01.660

> 怎么回事？

[Razor 2 条件属性](http://www.davidhayden.me/blog/conditional-attributes-in-razor-view-engine-and-asp.net-mvc-4)

> 有没有一种很好的简单方法可以修复这破坏了我的应用程序的众多地方？

没有我能想到的（这就是你应该使用的原因`@Html.Hidden("foo", Model.MyBool)`）。我最好的猜测是使用类似 Resharper 的结构化替换。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-21T06:57:08.027

看起来这是有效的：

```
<input type="hidden" name="foo" value="@Model.MyBool.ToString()" /> 
```

# java - RAP：如何访问 ViewPart 中的对象

> ID：12221594
> 
> 赞同：4
> 
> 时间：2012-08-31T19:42:10.940
> 
> 标签：java, swt, eclipse-rcp, jface

我如何从其他地方访问`Object`一个？`View`

（以下代码只是为了勾勒我想要做的事情）

```
public class View extends ViewPart {

    public static final String ID = "view";
    private static List list;

    public View() {
    }

    @Override
    public void createPartControl(Composite parent) {
        list = new List(parent, SWT.BORDER);
    }

    @Override
    public void setFocus() {
    }

    public static void addToList(String string) {
        list.add(string);
    }
} 
```

现在我希望能够`View.addToList("Message")`在应用程序的任何地方使用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T20:09:16.487

使用以下代码片段，并替换`[ID]`为您在`plugin.xml`.

```
IViewPart viewPart = PlatformUI.getWorkbench().getActiveWorkbenchWindow().getActivePage().findView( [ID] ); 
```

id 通常采用 的形式，`com.domain.something.viewName`可以在您的视图贡献下找到。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T20:51:51.307

`View`以及在工作台启动时`ViewPart`注册。`ViewRegistry`包含所有注册的`Workbench`视图和编辑器。从工作台注册表获取该视图信息的最简单方法。首先你检查如果`PlatformUI.getWorkbench().isStarting()`. 一旦此方法返回`false`，您可以获得

```
IViewDescriptor descriptor = PlatformUI.getWorkbench().getViewRegistry().find("view"); 
```

当工作台启动时，它会注册所有贡献给它的视图和编辑器，但是要运行您的代码，您需要确保工作台正在运行并且您有一个视图实例。

要创建一个实例，`View`您将使用代码

```
try {
    IViewPart view = descriptor.createView();
    view.createPartControl();
} catch (CoreException e) {
    // TODO something with e
    e.printStackTrace();
} 
```

现在你`be able to use View.addToList("Message") anywhere in the application`。

# ruby-on-rails - rails中的rspec模型测试：方法有效，但测试不会通过

> ID：12221596
> 
> 赞同：1
> 
> 时间：2012-08-31T19:42:16.367
> 
> 标签：ruby-on-rails, testing, rspec

我有两个模型 Indicator belongs_to Privacy。

在指标中，我编写了一个方法来返回隐私设置的正确名称

```
def privacy
    Privacy.find(privacy_tag_id).content
end 
```

这适用于rails控制台。如果我创建一个指标然后运行 ​​Indicator.privacy 我会返回“红色”或“绿色”或其他任何内容。但我无法让我的 rspec 通过。这是测试

```
describe "indicator" do
    it "should return a human named when asked for its privacy level" do
        @privacy = PrivacyTag.create(:content => "Secret")
        @ind = Indicator.new(:content => 'test',
                             :privacy_tag_id => @privacy.id)
        @ind.privacy.should == "Secret"
    end
end 
```

当我运行测试时，我收到以下消息：

```
Failures:

  1) indicator should return a human named when asked for its privacy level
     Failure/Error: @ind.privacy.should_equal "Secret"
     ActiveRecord::RecordNotFound:
       Couldn't find PrivacyTag without an ID
     # ./app/models/indicator.rb:13:in `privacy'
     # ./spec/models/indicator_model_spec.rb:9:in `block (2 levels) in <top (required)>' 
```

我在测试中做错了什么？有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T19:45:19.750

我怀疑该`Privacy`对象没有被创建。尝试调用`create!`而不是`create`. 如果它引发异常，则意味着您的`Privacy`模型中有一些验证。

首先看到您的模型会非常有帮助。

# css - 不透明度不适用于 IE8 中的图像

> ID：12221600
> 
> 赞同：0
> 
> 时间：2012-08-31T19:42:39.457
> 
> 标签：css, image, internet-explorer-8, background-image, opacity

在 IE8 中具有不透明度的 DIV 中的图像不会继承不透明度，我不知道为什么。一个是通过 HTML 的图像，其他图像在 CSS 中设置为背景（以实现翻转效果）。它可以在 IE7、IE9、Chrome、Firefox 和 Safari 中正常运行。

我的代码在这个小提琴中：http: [//jsfiddle.net/46AKc/5/](http://jsfiddle.net/46AKc/5/)

如果我申请

```
opacity: .75; /* Standards Compliant Browsers */
filter: alpha(opacity=75); /* IE 7 and Earlier */
    /* Next 2 lines IE8 */
-ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=75)";
filter: progid:DXImageTransform.Microsoft.Alpha(Opacity=75); 
```

到**#hover-prod1**，翻转的不透明度会发生变化，但它不会像在其他浏览器中那样无缝融入**.slide-out**，所以我认为这不是正确的解决方案。

我尝试了以下帖子中的解决方案，但没有成功： [Opacity CSS not working in IE8](https://stackoverflow.com/questions/1948176/opacity-css-not-working-in-ie8)
[Opacity in IE8 works on <p> but not on <a>](https://stackoverflow.com/questions/3452868/opacity-in-ie8-works-on-p-but-not-on-a?lq=1)
[Opacity not working on img in IE8](https://stackoverflow.com/questions/5377603/opacity-not-working-on-img-in-ie8)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T19:54:27.070

那是因为

```
.hover-products{
   position:relative;
} 
```

只需将其删除。

在这里看到它：http: [//jsfiddle.net/46AKc/7/](http://jsfiddle.net/46AKc/7/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T20:11:12.997

是的，改变这两行：

.slide-out a:hover{color:#F36F21;}

.hover-products{位置：相对；宽度：338px；边距：20px 0 50px 15px；高度：90 像素；}

对此：

.slide-out a:hover{color:#F36F21; 位置：相对；}

.hover-products{宽度：338px; 边距：20px 0 50px 15px；高度：90 像素；}

# vb.net - VB.NET 计划任务

> ID：12221611
> 
> 赞同：0
> 
> 时间：2012-08-31T19:43:20.467
> 
> 标签：vb.net, scheduled-tasks

我有一个 VB.NET 程序，它被许多 Windows 计划任务使用并且是参数驱动的。因此可能有五个 applicationname.exe 进程同时运行。

我最近遇到了一些计划任务“挂起”的问题。我知道这其中的原因。但是，有一些我无法解释的奇怪行为。当运行错误计划任务的进程挂起时，其他任何一个都不会运行（计划任务说在 Windows 计划任务中运行，但似乎也挂起）。但是，在停止计划任务后（发生挂起时），其他计划任务都不会正常运行大约十分钟，然后一切恢复。

为什么所有计划任务只有一个问题时会挂起？如果这个问题太模糊，那么我将发布一些具体的代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T21:57:36.640

挂起的原因是什么？

对于 a) 挂起的应用程序 b) 任务无法启动，Windows 事件日志中报告了什么？

您可能想尝试[procmon](http://technet.microsoft.com/en-us/sysinternals/bb896645.aspx)以查看有关挂起进程的其他信息（可能是对锁定资源的共享访问？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T19:49:56.283

您可以查看任务触发工具，例如 Quartz( [http://quartznet.sourceforge.net/](http://quartznet.sourceforge.net/) )，它对 .net 应用程序有很好的支持。它们允许您使用类似计时器的语法来安排/触发作业。

我知道这不是您查询的直接答案，但认为它可能有助于寻找基于计划任务的解决方案的人。

# c# - 如何通过函数参数传递和使用大量不同类型的参数？

> ID：12221618
> 
> 赞同：0
> 
> 时间：2012-08-31T19:43:53.960
> 
> 标签：c#

在我的函数内部的某个地方，我需要做这样的事情：

```
 smsg["isin"].set(ii.ISIN);
        smsg["client_code"].set(Constants.CLIENT_CODE);
        smsg["type"].set(1);
        smsg["dir"].set(order.Operation == Side.Buy ? 1 : 2);
        smsg["amount"].set(order.Lots);
        smsg["price"].set(textPrice);
        smsg["ext_id"].set(0); 
```

`set`方法有很多可以接受的重载，`int`总共大约15 种方法。`string``boolean``DateTime`

**重构后**，我决定函数只使用参数列表而忽略其他变量`order` `ii`等。问题是我不知道如何通过函数参数传递这些参数

```
 public uint ExecuteTransaction(Dictionary<string, object> parameters)
    {
        ....
        foreach (var parameter in parameters)
        {
            smsg[parameter.Key].set(parameter.Value);  // compile time error!
        } 
```

编译器不知道要使用哪个重载，所以我有这样的错误：

```
The best overloaded method match has some invalid arguments 
```

我的字典包含每个参数的适当值。所以布尔参数包含布尔值等。这就是我声明 Dictionary 包含通用类型的原因`object`。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T20:01:28.640

那么你可以...

1.  修改`set`以接受对象参数并让**类**管理类型。
2.  在你的`foreach`块中设置逻辑。

例子：

```
foreach (var parameter in parameters)         
{             
    // int example
    if (parameter.Value as int? != null)
        smsg[parameter.Key].set((int)parameter.Value);  // No error!         
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T19:52:14.587

您应该实现 set(object value) 方法，该方法将确定参数类型并调用类型化的 set(T value)。这是以这种方式使用 set 的唯一方法。

更新：如果您无权将其设置为库，则可以编写扩展方法

```
public static class Ext
{
  public static void set(this YOUR_LIB_TYPE lib, object value)
  {
    if(value is int)
    {
      lib.set((int) value);
    }
    else if(value is string)
    {
      lib.set((string) value);
    }
    ...
  }
} 
```

# python - 试图将一个大的 .pdf 拆分为多个文件。（蟒蛇，pdftk）

> ID：12221619
> 
> 赞同：1
> 
> 时间：2012-08-31T19:43:56.643
> 
> 标签：python, split, bookmarks, pdftk

我用 Python 编写了一个脚本，它将按章节/书签拆分 .pdf。这基本上是我的程序的症结所在：

```
for each chapter:
    system('pdftk A=file.pdf cat A{start}-{end} output file2.pdf') 
```

该工具包工作得很好，但一遍又一遍地调用它显然不是一项省时的任务。解析一个 200mb 的 .pdf 文件需要 15-20 秒的时间，而在大约 30 个单独的章节中这样做需要*很长时间*。打开文件所花费的时间比实际写入任何数据所花费的时间更多。

由于似乎没有在工具包中对多个命令进行字符串处理的固有方法，因此我可以在 Python 或 CMD 中提取任何内存技巧来解决这个问题（即保持 .pdf 打开）？如果你能推荐一个模块，我也会看看另一个模块（[虽然 pyPdf](http://pybrary.net/pyPdf/)有它自己的一系列问题）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T21:04:08.323

要将 pdf 文件保存在内存中，请将其读入`StringIO`缓冲区并告诉 pdftk 从标准输入读取。具体来说：使用`subprocess.call`而不是`os.system`, 以您的`StringIO`缓冲区作为`stdin`参数：

```
mybuffer = StringIO.StringIO(open('file.pdf').read())
subprocess.call('pdftk ...', stdin=mybuffer) 
```

它仍然需要每次重新解析 pdf 文件，但至少您不会过度旋转硬盘驱动器。唯一真正快速的方法是使用可以一次性完成的工具（例如，解决您在使用 pypdf 时遇到的任何问题）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-07T22:03:17.713

例如，如果您有一个`input.pdf`包含 20000 页的文件，并且您想将其拆分为 1..20.pdf 文件，每个文件包含 1000 页。

```
for (( i=0; i<=20; i++ )); do let n=$i*1000; let m=$[i+1]*1000; pdftk input.pdf cat $n-$m output $i.pdf; done; 
```

# asp.net - MVC3：如何强制 Html.TextBoxFor 使用模型值而不是 POSTed 值

> ID：12221620
> 
> 赞同：5
> 
> 时间：2012-08-31T19:44:02.043
> 
> 标签：asp.net, asp.net-mvc-3

在许多情况下，我遇到了一个问题，即我在服务器上创建了一个模型，该模型是由于回发的值而创建的。在处理模型时，一些模型值会发生变化，然后重新显示在页面上。是否有一些简单的方法可以覆盖导致 MVC 框架使用 POSTed 值而不是我的模型值的行为。

例子：

模型

```
public class MyModel {
    public string Value1 { get; set; }
} 
```

控制器

```
public MyController : Controller {
    public ActionResult MyAction() {
        var model = new MyModel();
        model.Value1 = "OldValue";
        return View(model);
    }
    [HttpPost]
    public ActionResult MyAction(MyModel model) {
        model.Value1 = "NewValue";
        return View(model);
    }
} 
```

看法

```
@using(Html.BeginForm("MyAction", "My", FormMethod.Post) {
    @Html.TextBoxFor(m => m.Value1)
    <input type="submit"/>
} 
```

首次加载此页面时，文本框将包含“OldValue”。单击提交后，文本框仍然包含“OldValue”，因为这是回传到服务器的内容，但我希望它使用模型（NewValue）中的值创建第二个页面（在 POST 之后）。

有没有一种简单的方法来告诉 MVC 以这种方式行事？我不确定在这种情况下我应该怎么做才能得到我想要的结果。

注意 - 这都是伪代码，所以我可能有一些错误，但这个概念应该存在。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-31T19:45:58.707

在您的帖子重定向中（帖子 - 重定向 - 获取模式）。

```
[HttpPost]
public ActionResult MyAction(MyModel model) {
    model.Value1 = "NewValue";
    return RedirectToAction("MyAction");
} 
```

**编辑**

清除模型状态以传回已编辑的模型

```
 [HttpPost]
    public ActionResult MyAction(MyModel model)
    {
        var newModel = new MyModel();
        newModel = model;
        ModelState.Clear();
        newModel.Value1 = "NewValue";
        return View(newModel);
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-18T09:47:44.627

没有办法使用内置的助手来做到这一点。你必须手动完成

使用助手获取名称：

```
<input type="text" name="@Html.NameFor(m => m.MyField)" value="@Model.MyField"/> 
```

# java - Java中有某种“和”语句吗？

> ID：12221625
> 
> 赞同：-1
> 
> 时间：2012-08-31T19:44:22.620
> 
> 标签：java, boolean

我有一个想回答的问题。我正在制作一个需要使用布尔值的应用程序。到目前为止，这是我的代码

```
if (but1 = true){
    //Do Something
} 
```

但我想使用某种类型的`and`函数，所以我可以说类似

```
if (but1 = true and but2 = true){
    //Do Something      
} 
```

我已经声明了我所有的布尔变量，并且想知道是否有任何类型的函数可以让我支持我需要的这种类型的代码。谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-31T19:48:29.890

这是 ：

```
if (but1 && but2){
    //Do Something      
} 
```

只是简单的Java。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T19:48:53.293

我认为应该这样写：

```
if (but1) {
    //Do Something      
}

if (but1 && but2){
        //Do Something      
            } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-31T19:53:36.923

逻辑和是`&`。`&&`如果第一个参数为假，将缩短评估。例子：

```
// foo() and bar() will be called
if (foo() & bar()) {
}

// bar() will not be called if foo() returns false
if (foo() && bar()) {
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-31T20:03:16.470

好的，这个问题已经得到了很好的回答，但只是为了让你知道：

```
if (but1 = true){
    //Do Something
} 
```

将**始终**评估为真，因为它采用分配给的新值`but1`

布尔值也不需要使用“==”运算符。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-31T20:55:13.623

&& 也是一个短路运算符。如果第一次评估失败，则不检查第二次。您可以使用一个 & 来检查语句的两个部分。

例如

```
if (a() && b()){...} 
```

如果 a() 为假，则不会评估 b()。如果你有一个 & 然后 b() 被评估，即使 a() 是假的

这对于 or (¦ 和 ¦¦) 是一样的

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-08-31T19:48:59.520

您不能将变量与`=`. 单个等号用于赋值，其中`==`用于比较。

在 Java 中，您可以执行以下操作：

```
if (a == true && b == true)
{
//do code
} 
```

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2012-08-31T19:48:31.233

尝试这个：

```
if (but1 == true && but2 == true) {
    // do something
} 
```

# c# - 控制台应用程序中的消息泵

> ID：12221626
> 
> 赞同：9
> 
> 时间：2012-08-31T19:44:26.493
> 
> 标签：c#, .net, console-application, message-pump

我有一个用.NET 编写的相当简单的控制台应用程序。有时应用程序在没有操作员的情况下以批处理模式运行，有时它是“自掏腰包”运行的。如果它以批处理模式运行，则有一个定义的默认选项允许程序自动运行。如果存在操作员，则还有其他选项允许用户从功能列表中进行选择。

由于我不想进入的原因，命令行参数不是首选。相反，我创建了一个 10 秒的窗口，操作员可以在其中选择一个功能。目前，我正在使用一个简单的 while 循环并从“in”流中读取输入。我在末尾添加了一个[Thread.Sleep](http://msdn.microsoft.com/en-us/library/system.threading.thread.sleep%28v=vs.110%29.aspx)调用，以防止 while 循环完全消耗处理器，但我想知道是否有更好的方法。

在 Windows 应用程序（[Windows 窗体](http://en.wikipedia.org/wiki/Windows_Forms)或[WPF](http://en.wikipedia.org/wiki/Windows_Presentation_Foundation)）中有一个消息泵，它能够读取消息队列，然后将控制权返回给系统。[即使是 Visual Studio、 SAS Enterprise Guide](http://en.wikipedia.org/wiki/SAS_%28software%29#Technical_overview_and_terminology)和[SQL Server Management Studio](http://en.wikipedia.org/wiki/SQL_Server_Management_Studio)等重型应用程序，它们在空闲时也几乎使用了 0% 的处理器。我的控制台应用程序可以达到同样的效果吗？

Thread.Sleep 正在工作，但是，正如我所说，我想知道是否有更好的方法。

这是源代码：

```
class Program {
    static void Main( string[] args ) {

        DateTime l_startTime = DateTime.Now;

        Console.CursorVisible = false;
        Console.WriteLine( "Please select an option within 10 seconds..." );
        Console.WriteLine( "" );
        Console.WriteLine( " [1] Option A (DEFAULT)" );
        Console.WriteLine( " [2] Option 2" );
        Console.WriteLine( " [3] Option III" );

        int l_elapsedSeconds = 0;

        bool l_exit = false;
        while ( !l_exit ) {

            int l_currentElapsedSeconds = (int) Math.Floor( ( DateTime.Now - l_startTime ).TotalSeconds );
            if ( l_currentElapsedSeconds > l_elapsedSeconds ) {
                Console.CursorTop = 0;
                Console.CursorLeft = 0;
                l_elapsedSeconds = l_currentElapsedSeconds;

                int l_remainingSeconds = 10 - l_elapsedSeconds;

                Console.WriteLine( String.Format( "{0,-80}", "Please select an option within " + l_remainingSeconds + " seconds..." ) );
            }

            if ( l_elapsedSeconds >= 10 ) {
                OptionA();
                break;
            }

            if ( Console.KeyAvailable ) {
                var l_key = Console.ReadKey( true );

                switch ( l_key.Key ) {
                    case ConsoleKey.D1:
                        OptionA();
                        l_exit = true;
                        break;

                    case ConsoleKey.D2:
                        Option2();
                        l_exit = true;
                        break;

                    case ConsoleKey.D3:
                        OptionIII();
                        l_exit = true;
                        break;
                }
            }

            if ( !l_exit )
                // Don't eat all the processor
                System.Threading.Thread.Sleep( 100);
        }

        Console.CursorTop = 7;
        Console.CursorLeft = 0;

        Console.Write( "Press any key to continue...");
        Console.ReadKey( true);

    }

    static void OptionA() {
        Console.CursorTop = 6;
        Console.CursorLeft = 0;

        Console.WriteLine( "Option A Selected!");
    }

    static void Option2() {
        Console.CursorTop = 6;
        Console.CursorLeft = 0;

        Console.WriteLine( "Option 2 Selected!");
    }

    static void OptionIII() {
        Console.CursorTop = 6;
        Console.CursorLeft = 0;

        Console.WriteLine( "Option III Selected!");
    }
} 
```

[**注意：这个问题不关心超时......它是关于在等待响应时使用 0% 的处理器时间（如窗口应用程序）。**]

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-31T20:03:56.580

您可以启动一个在后台读取按键的线程。将键添加到阻塞队列并在主线程中等待队列被填充，例如

```
var queue = new BlockingCollection<ConsoleKeyInfo>();

new Thread(() =>
{
    while (true) queue.Add(Console.ReadKey(true));
})
{ IsBackground = true }.Start();

Console.Write("Welcome! Please press a key: ");

ConsoleKeyInfo cki;

if (queue.TryTake(out cki, TimeSpan.FromSeconds(10))) //wait for up to 10 seconds
{
    Console.WriteLine();
    Console.WriteLine("You pressed '{0}'", cki.Key);
}
else
{
    Console.WriteLine();
    Console.WriteLine("You did not press a key");
} 
```

后台线程和主线程在分别等待 ReadKey 和 TryTake 返回时都会休眠（使用 0% 的处理器时间）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-22T10:46:36.047

您可以使用.NET 的事件处理机制。从[这里](http://www.dreamincode.net/forums/topic/255069-waiting-for-key-press-console-app/)转发。

```
Imports System.Threading.Thread

Module Module1
    Private Second As Integer = 1
    Private Tick As New Timers.Timer(1000)

    Sub Main()

        AddHandler tick.Elapsed, AddressOf Ticker 'Event for the timer tick

        Dim NewThread As System.Threading.Thread = New System.Threading.Thread(AddressOf LookForKeyPress) 'New thread to check for key press
        NewThread.Start() 'Start thread

        Console.WriteLine("Now awaiting key presses...")
        tick.Enabled = True 'Enable the timer
    End Sub

    Private Sub Ticker()
        'every tick this sub is called and the seconds are displayed till a key is pressed
        Console.WriteLine(Second)
        Second += 1

    End Sub

    Private Sub LookForKeyPress()

        While True
            Dim k As ConsoleKeyInfo = Console.ReadKey() 'read for a key press
            If Not k.Key.ToString.Length <= 0 Then 'check the length of the key string pressed, mainly because the key in this case will be apart of the system.consolekey
                Console.WriteLine(Environment.NewLine & "Key Pressed: " & k.Key.ToString) 'display the key pressed
                Second = 1 'restart the timer
            End If
        End While

    End Sub

End Module 
```

希望我有所帮助！

# hibernate - 休眠 HQL 到条件

> ID：12221628
> 
> 赞同：0
> 
> 时间：2012-08-31T19:44:51.177
> 
> 标签：hibernate, hibernate-criteria

我正在尝试将一个简单的 HQL 转换为 Criteria API，有人可以帮我吗？这是我的 HQL：

```
SELECT ch FROM Parent p JOIN p.childeren ch WHERE p.id = :id
```

结果我得到了孩子。重要的是没有从孩子到父母的关系。Parent 与孩子之间只有这样的关系：

```
@OneToMany(fetch = FetchType.LAZY, cascade = { CascadeType.ALL })
@JoinColumn(name="parent_id")
私人名单儿童；

```

如何使用标准 API 获得相同的结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T03:00:56.647

使用 Criteria API 仅获取关联实体是一件非常痛苦的事情。您将需要子查询：

```
 DetachedCriteria subCriteria = DetachedCriteria.forClass(Parent.class);
    subCriteria.createCriteria("children", "c");
    subCriteria.setProjection(Projections.property("c.id"));
    subCriteria.add(Restrictions.eq("id", 1));
    // Assuming Children is the name of the class
    Criteria criteria = sess.createCriteria(Children.class);
    criteria.add(Subqueries.propertyIn("id", subCriteria));
    criteria.list(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T22:17:02.807

此问题的一个可能解决方案是使用**sqlRestriction**，如下例所示，但这并不好，因为它需要使用数据库列名。

`Criteria crit = sessionFactory.getCurrentSession().createCriteria(Child.class); crit.add(Restrictions.sqlRestriction("{alias}.parent_id = ?", parentId, LongType.INSTANCE));`

*有人有更好的解决方案吗？*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T22:39:41.547

您不需要对此进行查询，因为您可以执行以下操作：

```
Set<Child> children = session.get(Parent.class, id).getChildren();
children.size(); // trigger lazy initialization 
```

# ruby-on-rails - 获取 JSON 作为 POST 参数

> ID：12221634
> 
> 赞同：7
> 
> 时间：2012-08-31T19:45:17.580
> 
> 标签：ruby-on-rails, json, post

我有一个 ruby​​ 应用程序，我需要从客户端接收 JSON。接收 JSON 就像接收字符串一样？我只需要做类似的事情：

```
information = params[:json_data]
data_parsed = JSON.parse(information) 
```

仅此而已，还是在获取 JSON 时我必须做一些不同的事情？发件人必须向我发送类似的字符串？

谢谢！

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-09-01T02:35:19.400

您所描述的内容是可以的，但这意味着有一个名为 的参数`json_data`。如果你的意思是整个`POST`身体不过是`JSON`，那你要看看[`request.raw_post`](http://apidock.com/rails/ActionDispatch/Request/raw_post)。你最终会得到这样的东西：

```
information = request.raw_post
data_parsed = JSON.parse(information) 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2016-08-29T13:21:07.380

[官方文件](http://guides.rubyonrails.org/action_controller_overview.html#json-parameters)说，

> 如果您的请求的“Content-Type”标头设置为“application/json”，Rails 会自动将您的参数加载到 params 哈希中，您可以像往常一样访问它。
> 
> 例如，如果您要发送此 JSON 内容：
> 
> ```
> { "company": { "name": "acme", "address": "123 Carrot Street" } } 
> ```
> 
> `params[:company]`您的控制器将收到`{ "name" => "acme", "address" => "123 Carrot Street" }`.
> 
> 此外，如果您`config.wrap_parameters`在初始化程序中打开或`wrap_parameters`在控制器中调用，则可以安全地省略 JSON 参数中的根元素。在这种情况下，参数将被克隆并使用基于控制器名称选择的密钥进行包装。所以上面的 JSON POST 可以写成：
> 
> ```
> { "name": "acme", "address": "123 Carrot Street" } 
> ```
> 
> 并且，假设您将数据发送到 CompaniesController，然后它将`:company`像这样包装在密钥中：
> 
> ```
> { name: "acme", address: "123 Carrot Street", company: { name: "acme", address: "123 Carrot Street" } } 
> ```

因此，如果您发送/POST`{ "hello": "world"}`到`apples/`，那么 `params['apple']`将是 Json 有效负载的对象。

```
class ApplesController < ApplicationController
  def create
    # params['apple'] is the object represents Json payload
  end
end 
```

# javascript - 一个数字后跟一个单词的正则表达式

> ID：12221637
> 
> 赞同：1
> 
> 时间：2012-08-31T19:45:31.450
> 
> 标签：javascript, regex, replace

在 JavaScript 中，一个数字后跟一个单词的正则表达式是什么？我需要抓住数字和单词并在计算后将它们都替换掉。

以下是示例形式的条件：

```
123 dollars => Catch the '123' and the 'dollars'.
foo bar 0.2 dollars => 0.2 and dollars
foo bar.5 dollar => 5 and dollar (notice the dot before 5)
foo bar.5.6 dollar => 5.6 and dollar
foo bar.5.6.7 dollar => skip (could be only 0 or 1 dot)
foo bar5 dollar => skip
foo bar 5dollar => 5 and dollar
5dollar => 5 and dollar
foo bar5dollar => skip 
```

*   当然 123.555、0.365、5454.1 也是数字。
*   为了使事情更简单，这个词是一个特定的词（例如美元|欧元|日元）。

*   好的..谢谢大家...这是我到目前为止所做的基本功能：

    var text = "foo bar 15 美元。bla bla .."; var 货币 = { 美元：0.795 };

    document.write(text.replace(/\b((?:\d+.)?\d+) *([a-zA-Z]+)/, function(a,b,c){ return currency[c] ? b * 货币[c] + '欧元' : a; } ));

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-31T19:50:10.860

尝试这个：

```
/\b(\d*\.?\d+) *([a-zA-Z]+)/ 
```

这也将匹配诸如`.5 tests`. 如果你不想要那个，使用这个：

```
/\b((?:\d+\.)?\d+) *([a-zA-Z]+)/ 
```

并避免匹配“5.5.5 美元”：

```
/(?:[^\d]\.| |^)((?:\d+\.)?\d+) *([a-zA-Z]+)/ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T19:49:27.587

快速尝试：

```
text.match( /\b(\d+\.?\d*)\s*(dollars?)/ ); 
```

如果你想做美元/美元和欧元/欧元，那么：

```
text.match( /\b(\d+\.?\d*)\s*(dollars?|euros?)/ ); 
```

也`\s`将匹配所有空格，包括制表符。如果您只想要空格，那么只需放置一个空格（就像其他答案一样）：

```
text.match( /\b(\d+\.?\d*) *(dollars?|euros?)/ ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T20:10:30.973

```
string.replace(/\d+(?=\s*(\w+))/, function(match) {
    return 'your replace';
}); 
```

# javascript - 为什么此代码在内容页面中不起作用？

> ID：12221645
> 
> 赞同：0
> 
> 时间：2012-08-31T19:46:11.200
> 
> 标签：javascript, google-maps, google-maps-markers, content-pages

我在 aspx.net 中编写了这段代码，它运行良好，但是当写入内容页面时，它就不行了。有谁知道为什么？注意：我使用 Artem GoogleMap 控件并在其上设置图钉，然后获取其位置。

```
<asp:ScriptManager ID="ScriptManager1" runat="server">
</asp:ScriptManager>
<asp:TextBox ID="TextBox1" runat="server"></asp:TextBox>
<artem:GoogleMap ID="GoogleMap1" runat="server" 
  EnableMapTypeControl="False" MapType="Roadmap" >        
</artem:GoogleMap>      
<artem:GoogleMarkers ID="GoogleMarkers1" runat="server" 
  TargetControlID="GoogleMap1" onclientpositionchanged="handlePositionChanged">
</artem:GoogleMarkers> 
<asp:Label ID="Label1" runat="server" Text="Label"></asp:Label>
<asp:Label ID="Label2" runat="server" Text="Label"></asp:Label>
<asp:HiddenField ID="Hidden1" runat="server" />
<asp:Button ID="Button2" runat="server" Text="Button2" onclick="Button2_Click" />
<asp:UpdatePanel ID="UpdatePanel1" runat="server">
  <ContentTemplate>
    <asp:Button ID="Button1" runat="server" Text="Split" onclick="Button1_Click" />
    <asp:TextBox ID="TextBox2" runat="server"></asp:TextBox>
  </ContentTemplate>
</asp:UpdatePanel>

<script type="text/javascript">
  var list = document.getElementById("Label1");
  function handlePositionChanged(sender, e) {
    printEvent("Position Changed", sender, e);
  }
  function printEvent(name, sender, e) {
    var position = e.latLng || sender.markers[e.index].getPosition();
    document.getElementById('Label1').innerHTML = position.lat();
    document.getElementById('Label2').innerHTML = position.lng();

    document.getElementById('<%= Hidden1.ClientID %>').value = position.lat();

  }
</script>

protected void Page_Load(object sender, EventArgs e)
{
    this.GoogleMap1.MapType = Artem.Google.UI.MapType.Roadmap;
    this.GoogleMap1.Zoom = 12;
    if (!Page.IsPostBack)
    {
        GoogleMaps.LocationServices.GoogleLocationService obj = new GoogleMaps.LocationServices.GoogleLocationService();

        GoogleMaps.LocationServices.AddressData add = new GoogleMaps.LocationServices.AddressData();
        add.City = "somewhere";
        add.Country = "somewhere";
        GoogleMaps.LocationServices.MapPoint mp = new GoogleMaps.LocationServices.MapPoint();
        mp.Latitude = 29.6248771158687;
        mp.Longitude = 52.5227701663971;
        double x = mp.Latitude;
        GoogleMaps.LocationServices.MapPoint pt = obj.GetLatLongFromAddress(add);
        GoogleMap1.Latitude = mp.Latitude;
        GoogleMap1.Longitude = mp.Longitude;
    }
}

protected void Button1_Click(object sender, EventArgs e)
{
    TextBox2.Text = Hidden1.Value;
}

protected void Button2_Click(object sender, EventArgs e)
{
    string add = TextBox1.Text;
    GeoRequest request = new GeoRequest(add);
    GeoResponse response = request.GetResponse();
    GeoLocation location = response.Results[0].Geometry.Location;
    double latitude = location.Latitude;
    double longitude = location.Longitude;
    GoogleMap1.Latitude = latitude;
    GoogleMap1.Longitude = longitude;

    Artem.Google.UI.Marker mk1 = new Artem.Google.UI.Marker();
    mk1.Draggable = true;
    mk1.Address = add;
    GoogleMarkers1.Markers.Add(mk1);
} 
```

更新：我更改了这部分代码并且它可以工作，但不知道为什么：

```
document.getElementById('<%= Label1.ClientID %>').innerHTML = position.lat(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T20:02:50.797

我认为您需要在 Master 页面中添加 scriptmanager 标记，并在 contetn 页面中添加 scriptmanagerproxy 标记。

# xcode - 如何在 Mac 框架中调用 cpuid 指令？

> ID：12221646
> 
> 赞同：6
> 
> 时间：2012-08-31T19:46:18.290
> 
> 标签：xcode, macos, assembly, x86, cpuid

我想使用 cpuid 指令来识别 Intel CPU 的功能。我在 Kernel.framework 中找到了 cpuid.h 标头，因此我将 Kernel.framework 添加到我的项目中并包含`<Kernel/i386/cpuid.h>`在我的源文件中。那产生了

```
kern/kern_types.h: No such file or directory 
```

我不明白。但是`do_cpuid`我认为我想要使用的函数是内联定义的，所以我尝试将它复制到我的源代码中。

```
static inline void
do_cpuid(uint32_t selector, uint32_t *data)
{
    asm("cpuid"
        : "=a" (data[0]),
          "=b" (data[1]),
          "=c" (data[2]),
          "=d" (data[3])
        : "a"(selector));
} 
```

这给了我错误：

```
error: can't find a register in class 'BREG' while reloading 'asm'
error: 'asm' operand has impossible constraints 
```

谷歌搜索该错误使我想到了这个问题：[Mac 上的问题：“在重新加载 asm 时找不到 BREG 类中的寄存器”](https://stackoverflow.com/questions/4010069/problem-on-mac-cant-find-a-register-in-class-breg-while-reloading-asm)

但是该问题的解决方案是使用 dynamic-no-pic 选项（`GCC_DYNAMIC_NO_PIC`构建设置），并且 Xcode 对构建设置的帮助说“不适合共享库（需要与位置无关）。” 我正在构建一个框架，我认为它算是一个共享库。那么我怎样才能使这项工作呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-09-13T03:18:11.503

这个相当神秘的错误消息：

```
error: can't find a register in class 'BREG' while reloading 'asm'
error: 'asm' operand has impossible constraints 
```

正在发生，因为其中一个约束是不允许的。在这种情况下，它是`EBX`。使用`-fPIC`选项（位置无关代码）编译 32 位代码时，`EBX`寄存器用于重定位。它不能用作输出或显示为损坏的寄存器。

尽管大多数人建议使用特殊的编译器标志进行编译，但可以通过修改汇编代码来重写该函数以支持*x86-64* / *IA32*和*PIC* / *non-PIC*`EBX` ，以保存寄存器本身并在之后恢复它。这可以通过以下代码完成：

```
#include <inttypes.h>

static inline void
do_cpuid(uint32_t selector, uint32_t *data)
{
    __asm__ __volatile__ (
        "xchg %%ebx, %k[tempreg]\n\t"
        "cpuid\n\t"
        "xchg %%ebx, %k[tempreg]\n"
        : "=a" (data[0]),
          [tempreg]"=&r" (data[1]),
          "=c" (data[2]),
          "=d" (data[3])
        : "a"(selector),
          "c"(0));
} 
```

显着的变化是该`data[1]`值将在编译器选择的可用寄存器中返回。该`=&r`约束告诉编译器它选择的任何寄存器都不能是任何其他输入寄存器（我们很早就用`xchg`代码破坏了寄存器）。在我们`EBX`与编译器选择的可用寄存器交换的代码中。之后我们再换回来。完成`EBX`后将包含其原始值，并且选择的空闲寄存器将包含`CPUID`. 然后，汇编器模板将该空闲寄存器的内容移动到`data[1]`.

通过允许编译器选择一个空闲寄存器，我们有效地规避了这个问题。编译器足够聪明，`EBX`如果它被捆绑就不会使用它，因为它可能用于可重定位代码。64 位代码`EBX`不像 32 位代码那样用于重定位，因此它可能可供使用。

精明的观察者可能已经注意到`xor %%ecx,%%ecx`. 这是我独立于`EBX`问题所做的更改。现在认为清除是一种很好的做法，`ECX`因为如果 AMD 制造的某些处理器`ECX`不为零，则可能会返回陈旧值。如果您仅针对非 PPC Mac 平台进行开发，则无需进行此更改，因为 Apple 使用的 Intel 处理器不会出现这种行为。

通常`EBX`在 32 位可重定位/PIC 代码中是特殊的，这就是编译器最初抱怨其神秘消息的原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-10-15T16:47:34.683

因此，这可能无法回答问题，但应该为至少有些人在这里找到自己的方式提供一个足够有趣的解决方法。

* * *

`sysctl`在 macOS 上提供了很多关于机器 CPU 的信息。对于初学者，输入`man sysctl`终端并查看以 . 为前缀的所有内容`machdep.cpu`。`feature_bits`以替换`uint64_t cpuid_features(void);`from为例`cpuid.h`：

`sysctl machdep.cpu.feature_bits`为您提供实际功能位掩码，虽然不是很可读。 `sysctl machdep.cpu.features`做得更好一点，并为您提供最容易理解的首字母缩略词。

现在，以编程方式执行此操作更加有趣并且实际上非常可行：

```
#include <sys/sysctl.h>

// ...

int64_t value = 0;
size_t valueByteSize = sizeof(value);
int error = sysctlbyname("machdep.cpu.feature_bits", &value, &valueByteSize, NULL, 0);
if (!error)
{
   // Check for the next best bit defined in cpuid.h
   // Since you can't build with cpuid.h directly, just copy over the definitions you actually need
   bool hasFPU = value & CPUID_FEATURE_FPU;
} 
```

# java - 解析多种文件类型的文本

> ID：12221647
> 
> 赞同：0
> 
> 时间：2012-08-31T19:46:29.570
> 
> 标签：java, android, text

我目前正在 sd 卡中搜索任何文件类型*.csv*和*.txt*。我将这些文件的行显示为敬酒。我现在只想显示包含已定义关键字的行。在我看来，我应该使用[RuleBasedCollat​​or](http://developer.android.com/reference/java/text/RuleBasedCollator.html)，但我不确定如何实现它。

这是我应该这样做的正确方法还是有另一种更好的解决方案？

谢谢

代码（我已经评论了`if`我的问题所在的第二个）：

```
 private void conductScan() {

    File[] file = Environment.getExternalStorageDirectory().listFiles();  

    for (File f : file)
    {
       if (f.isFile() && f.getPath().endsWith(".xml") || f.getPath().endsWith(".txt")) {
           StringBuilder text = new StringBuilder();
           try {
               BufferedReader br = new BufferedReader(new FileReader(f));
               String line;
               while ((line = br.readLine()) != null) {
                   text.append(line);
                   text.append('\n');
                   if (line ) {  //here I want to define if line contains "test" then show the toast"
                       Toast.makeText(getApplicationContext(),line,Toast.LENGTH_LONG).show();
                       } else {
                           Toast.makeText(getApplicationContext(),"No keyewords found",Toast.LENGTH_LONG).show();
                       }
                   }
               }
           catch (IOException e) {
               Toast.makeText(getApplicationContext(),"Error reading file!",Toast.LENGTH_LONG).show();
           }
               String [] mStrings=text.toString().split("\n");
       }

    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T19:50:45.647

要检查该行是否包含子字符串，您可以使用：

[`public boolean contains(CharSequence s)`](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/String.html#contains%28java.lang.CharSequence%29)

类的`String`。

不确定这是否是问题所在。这样做的问题是，您的循环将非常快地遍历行，并且您将无法看到消息。

您可以将这些行打印到`Log`或另一个文本文件中，以便稍后对其进行分析。

**编辑：**

你可以改变这部分：

```
while ((line = br.readLine()) != null) 
{
    //be careful! with this, you will add all the lines of
    //the currently processed file to a locally created 
    //StringBuilder object. Is this really what you want?
    text.append(line);
    text.append('\n');

    //here if line contains "test" you can do whatever you want with it.
    if (line.contains("test")) 
    {
        //do something with it
    }
    else
    {
        //no "test" keyword in the current line
    }
} 
```

# c++ - 发现元素何时插入到 std::map

> ID：12221648
> 
> 赞同：1
> 
> 时间：2012-08-31T19:46:30.750
> 
> 标签：c++, visual-studio-2010, debugging, map

我的程序正在（使用 [] 运算符]）将一些数据 [地址] 插入到 std::map 中。我可以跟踪 137 个元素的插入。它们都插入了有效值。

在某个阶段，我迭代地图并尝试对值 [地址] 进行一些操作，我在开始迭代地图之前设置了一个断点。当我在调试器中检查地图时，我仍然看到 137 个元素。但是当我迭代它直到

`iterator != map.end`我发现地图有 138 个值 - 最后一个是非法的。

我需要找到一种方法来检测何时插入最后一个有问题的值。我使用 VS 2010。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-31T20:09:06.907

你可以，只是为了调试，`std::map`用一个隐藏成员函数的包装类替换`std::map::insert`一个打印出调试信息的类。

```
#include <map>
#include <iostream>
#include <utility>
#include <string>

template<class Key, 
         class Value, 
         class Compare = std::less<Key>, 
         class Allocator = std::allocator<std::pair<const Key, Value>>>
struct wrap_map : std::map<Key, Value, Compare, Allocator>
{
  typedef std::map<Key, Value, Compare, Allocator> base_type;

  std::pair<iterator,bool> insert( const value_type& value )
  {
    std::cout << "Inserted: [" << value.first << "] : " << value.second << std::endl;
    return base_type::insert( value );
  }
};

int main()
{
  wrap_map<int, std::string> mymap;

  mymap.insert( std::make_pair( 10, std::string( "Hello, World!" ) ) );
  std::cout << mymap[10] << std::endl;
} 
```

输出：

```
Inserted: [10] : Hello, World!
Hello, World! 
```

您必须为[`std::map::insert`](http://en.cppreference.com/w/cpp/container/map/insert)您在代码中使用的任何其他重载创建重载，并且`std::map::operator[]`如果您使用它来将元素插入到地图中。

您还可以打印出诸如`__LINE__`指示插入发生位置的宏。

请注意，`std::map`它没有虚拟析构函数，因此如果您正在动态分配映射，那么使用这种方法可能会导致未定义的行为，除非您将任何地方的类型名称替换为`wrap_map`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-31T20:11:37.793

您可以尝试在插入函数中放置条件断点`std::map`

对我来说（使用 VC10），合适的位置是C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\include\xtree的第 755 行（对于`std::map::insert`）和第 767 行（对于）`std::map::operator[]`

您可以在每个断点上添加一个条件来捕获将大小增加到 138`_Mysize == 137`的插入。`map`

最可能的罪魁祸首可能是，[`operator[]`](http://en.cppreference.com/w/cpp/container/map/operator_at)因为很容易错误地将其视为仅访问器。

# database - Vertica 货币处理问题！！怎么解决

> ID：12221649
> 
> 赞同：-1
> 
> 时间：2012-08-31T19:46:34.150
> 
> 标签：database, currency, collation, vertica

好的，我正在阅读文档，我到达了以排序为主题的地步

想象一下：在美国你有 30[color=#FF0000].[/color]00$ 在巴西你有 30[color=#FF0000],[/color]00 R$

- 我该如何解决这个问题！这样数据库就不会解释错了吗？

Vertica 文档 [quote]注释 • 尽管 ICU 语言环境通常可以指定排序规则、货币和日历首选项，但 Vertica 仅支持排序规则组件。SET DATESTYLE TO ... 命令提供日历的某些方面；[color=#FF0000]货币仅支持美元[/color]。任何与排序无关的关键字都将被拒绝。[/引用]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T20:10:19.090

我实现货币存储的方式是将金额存储在一个字段中，将货币类型存储在另一个字段中。

如果您只想更改结果中的货币符号，请查看`Template patterns for Numeric Formatting`6.0 中的第 271 页`SQL Reference Manual.pdf`。

那是我在文档中找到“货币”的唯一位置。

# php - PHP 5.3+ enable_dl 不启用 dl()？

> ID：12221650
> 
> 赞同：7
> 
> 时间：2012-08-31T19:46:45.107
> 
> 标签：php, php-extension

我正在尝试在 Ubuntu 11.10 上将第 3 方 PHP 扩展 (.so) 安装到 PHP 5.3.6-13 中并在 Web 环境中使用它。供应商的文档建议使用该`dl()`函数来动态加载库。

当我尝试他们的示例代码时，我发现`dl()`不可用（致命错误：调用未定义的函数 dl()），因为`dl()`函数在 PHP 5.3 中已被弃用。但是 php.ini 中有一个`enable_dl`配置规则，[其他消息来源](https://stackoverflow.com/questions/7689360/php-extension-loading-from-script-using-dl)说我应该能够通过更改 php.ini 变量（`enable_dl=On`, `safe_mode=Off`，未在 中列出`disable_functions`）并重新启动 apache 来使用 dl()。当我尝试时，`dl()`仍然未定义。

因此，我深入研究了[PHP 5.3 SAPI 更改说明](http://www.php.net/manual/en/migration53.sapi.php)并找到了以下内容：

> dl() 函数现在默认禁用，现在仅在 CLI、CGI 和嵌入 SAPI 下可用。

这是否意味着它`dl()`不仅在使用 web SAPI 的 PHP 5.3+ 中*“默认禁用” ，而且实际上****“即使修改 PHP 配置选项也完全不可用”***？`dl()`在我看来就是这样，因为无论我如何调整，我都无法开始工作。

澄清一下：我*可以*修改 php.ini 并直接加载扩展，所以这*不是*关于如何让扩展工作的问题，而是关于`dl()`PHP 5.3+ 中的函数及其状态的问题。如果它在任何情况下不再可用，我希望能够告诉供应商，以便他们可以更新他们的文档。但是，如果它应该可用并且我只是缺少一些东西，我也想听听。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-01T10:12:40.857

> 此函数已从 PHP 5.3 中的某些 SAPI 中删除。[--`dl()`](http://www.php.net/manual/en/function.dl.php)

因此，如果您将 ini 设置`enable_dl`设置为`on`但它仍然无法正常工作，那么它在您使用的 SAPI 中被禁用。

如果您想知道是指哪些 SAPI，则同一页面上的更改日志更详细：

> 唯一允许的 SAPI`dl()`是 CLI 和 Embed。

您没有使用这两个中的任何一个。而是使用[扩展加载指令](http://www.php.net/manual/en/ini.core.php#ini.extension)，你很好。

# php - php imagecopy 不适用于 gif 图像

> ID：12221654
> 
> 赞同：0
> 
> 时间：2012-08-31T19:46:57.853
> 
> 标签：php, animated-gif

我正在使用此代码对图像进行水印，然后将其保存为水印。当我尝试为 gif 图像添加水印时的问题是，我只获得了该 gif 的第一帧。

```
imagecopy(
   // source
   $main_image,
   // destination
   $logoImage,
   // destination x and y
   $imageWidth-$logoWidth, $imageHeight-$logoHeight,
   // source x and y
   0, 0,
   // width and height of the area of the source to copy
   $logoWidth, $logoHeight);
    if($type == "png"){imagepng($main_image, $new_path);}
    if($type == "jpeg"){imagejpeg($main_image, $new_path);}
    if($type == "gif"){imagegif($main_image, $new_path);} 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T21:15:49.057

`image*`PHP 中的函数使用 GD 库。尽管 PHP 手册中没有说明，GD 库不支持 GIF 动画（尽管网站上的许多评论都提到了它）。目前，[GD Project 的](http://www.libgd.org)网站也无法进一步确认。

或者，如果你[`ImageMagick`](http://www.imagemagick.org/script/index.php)有空，你可以使用[`exec()`](http://php.net/exec)调用`convert`应用程序来渲染你的水印+动画服务器端（[参考](https://stackoverflow.com/questions/10531514/watermark-on-animated-gif-with-php)）：

```
$animated_gif = "source.gif";
$gif_with_watermark = "destination.gif";
$watermark = "watermark.png";

$cmd = 'convert '
       . escapeshellarg($animated_gif)
       . ' -coalesce -gravity South -geometry +0+0 null: '
       . escapeshellarg($watermark)
       . ' -layers composite -layers optimize '
       . escapeshellarg($gif_with_watermark);
exec($cmd); 
```

# validation - Drupal 7 - 网络表单 - 验证

> ID：12221656
> 
> 赞同：0
> 
> 时间：2012-08-31T19:47:04.400
> 
> 标签：validation, drupal-7, drupal-webform

我正在使用 Drupal 7 安装，并且正在使用网络表单来管理一些数据的提交。

字段如下：

1.  捕获日期输入的日期字段
2.  两个捕获数值的文本字段
3.  捕获客户接受度的复选框

我希望能够根据是否允许提交表单：

*   (1) 大于某个日期
*   (2)中的值之和大于某个值
*   (3) 中的复选框被选中

在 Drupal 7 中完成此任务的最干净的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-10-17T20:01:57.737

我最终使用 hook_form_alter() 和连接到 $form['submit']['#validate'][] 的回调函数完成了这项工作。

```
function mymodule_form_alter(&$form, &$form_state, $form_id) {
  if ($form_id == 'myform') {
    $form['submit']['#validate'][] = 'validation_function';
  }
}

function validation_function($form, &$form_state) {
  // Validation logic here
  // If in validation failed set error message here
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-23T08:35:20.397

使用**网络表单验证**模块。见[http://drupal.org/project/webform_validation](http://drupal.org/project/webform_validation)

# ruby-on-rails - ActiveRecord：默认受保护的属性。他们怎么能公开？

> ID：12221665
> 
> 赞同：2
> 
> 时间：2012-08-31T19:48:42.633
> 
> 标签：ruby-on-rails, attributes, rails-activerecord

我刚刚开始使用 Rails 进行编码。我正在使用：Rails 3.2.8 ruby​​ 1.9.3p194

我创建了一个迁移和一个相应的模型，它们都在它们应该存在的文件中（为了简洁起见，我将它们一起呈现）：

```
class CreateMovies < ActiveRecord::Migration
  def up
    create_table 'movies' do |t|
    t.string 'title'
    t.timestamps
  end
end

def down
  drop_table 'movies'
end
end

class Movie < ActiveRecord::Base
end 
```

因此，我想进入“rails 控制台”并使用数据库作为学习过程。

这是我输入的内容和收到的错误消息：

```
1.9.3p194 :021 > k = Movie.new(:title => 'coco')
 ActiveModel::MassAssignmentSecurity::Error: Can't mass-assign protected attributes: title 
```

我不得不说，如果我附加 :without_protection => true，上述语句可以正常工作。

我查阅了关于批量分配的信息，我明白这是我们应该非常小心的事情。但是，似乎默认情况下rails激活了质量分配保护。就我而言，我想使用哈希创建条目，这对于调试和学习非常有用！

有没有办法取消这种保护？我想默认有公共属性！我怎样才能做到这一点？

奇怪的是，在我的网络研究中，我得出的结论是默认情况下不存在此功能，即默认情况下 ActiveModel 不会创建受保护的属性。（http://stackoverflow.com/questions/3764899/is-there-a-way-to-make-rails-activerecord-attributes-private）但就我而言，所有属性都是私有的！

在我的代码中，将来，我应该尝试单独分配所有属性吗？这将是乏味的。有没有更好的方法既能保证安全又能避免这个繁琐的过程？

提前从我的内心深处感谢您！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-31T19:57:37.600

不！请不要取消激活此保护。这对于阻止人们设置他们不应该设置的属性非常有帮助。关闭它是一个*非常糟糕的主意*，我会*非常非常强烈地*建议不要这样做。

你应该在你的模型中这样做：

```
class Movie < ActiveRecord::Base
  attr_accessible :title
end 
```

这将使*您*的对象的`title`属性可分配，如果没有标志或设置设置为`Movie`，则无法分配其他任何内容。`without_protection``config.active_record.whitelist_attributes``false`

如果您不注意这个警告，那么 Murifox 的答案就是您想要的答案。

* * *

想象一下这样一种情况，您有一个用户可以更新其密码的表单。够无辜的。现在假设您关闭了属性保护并且您的`users`表上有一个`admin`字段。

实际上，有人非常容易将页面的 HTML 保存到他们的计算机，添加一个字段`admin`，然后将其设置为“on”或其他任何内容，然后*blammo*，他们是您网站的管理员。

您网站的新管理员可以快速有效地对您的应用程序*发动政变*，使他们声称的“异议数据”消失。在未来的几年里，这个残暴的独裁者以某种方式积累了足够的核材料来制造核武器。他与一个鲜为人知的国家（比方说苏里南）相处得不好，并与他的军队发动了进攻。军队是怎么来的，全凭你的想象。

数十万苏里南人（我不得不查一下）要么被杀，要么流离失所到邻国，主要是法属几内亚和圭亚那。有些人试图前往巴西，即使不是*南美洲*最伟大的国家之一，也只是被远足的距离或丛林中的生物杀死。

苏里南军队，剩下的就是对抗独裁者和他的军队。使用核武器打破了僵局，独裁者将苏里南及其民众的生命列入了他所破坏的清单。清单很短：他唯一毁掉的另一件事就是你的申请。

**你想在你的意识上这样做吗？！** *为什么没有人想到~~苏里南~~的属性？！*

请，我请求，使用`attr_accessible`. 学会爱它，否则后果会很可怕。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T20:07:19.023

```
class Movie < ActiveRecord::Base
   attr_accessible :title, :as => :user
   attr_accessible :title, :disabled, :as => :admin
end 
```

现在，当您创建新电影时，请执行以下操作：

```
k = Movie.create({:title => "A new movie"}, {:as => :user})
k.update_attributes({:disabled => true}, {:as => :admin}) 
```

大括号是可选的，但用于解释目的。现在这意味着您可以保护不同角色的属性。您可以拥有一个可以修改标题但不能禁用电影的用户角色。

现在您可以使用此代码并亲自查看标题和禁用的访问者不受管理员保护，但用户角色只能访问标题。

这确保您没有未经授权访问子属性和其他持久的关键属性，例如提到的 Ryan Bigg。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T20:01:58.183

您可以将此行添加到您的应用程序

```
config.active_record.whitelist_attributes = true 
```

重新启动服务器/控制台

在这里查看官方文档

[http://guides.rubyonrails.org/security.html#highlighter_14621](http://guides.rubyonrails.org/security.html#highlighter_14621)

但我建议从一开始就使用它，不要停用它。它就像一把神奇的钥匙，只打开你希望别人允许的门。

根据我的个人经验，我们在第一步中学到的东西是我们主要遵循的并且很难改变。只是 JMHO :)

只需将字段添加到模型屁股`attr_accessible`

```
class ModelName < ActiveRecord::Base
  attr_accessible :column_1,:column_2,:column_3
end 
```

并且它们将可用于批量分配。永远不要列`user_active`或`admin`包含非常敏感的信息`attr_accessible`

您始终可以单独分配该值

例如：让我们假设一个模型`User`的列说明用户`active`与否，并且 `admin`列没有质量分配

```
user = User.new(:active=>true)
user.save   #wont update the active column should throw mass assign assignment error

user = User.new
user.admin = true
user.save  #should save successfully 
```

这需要更多的努力，但你可以睡个好觉:)

# java - 从网络驱动器加载图像？

> ID：12221672
> 
> 赞同：0
> 
> 时间：2012-08-31T19:49:32.523
> 
> 标签：java, image, swing, imageicon

我的工作站正在运行 Windows，我们开发在 Windows 上运行的 Java 应用程序。在这些 Windows 桌面上，我们可以访问我们的共享网络驱动器。所以我需要从网络驱动器加载图像，但它不起作用。我做错了吗？

```
import java.awt.Image;
import java.awt.Toolkit;

import javax.swing.ImageIcon;
import javax.swing.JOptionPane;

public class LoadImage {
    public static void main(String[] args) {
        try  {
            Image image = Toolkit.getDefaultToolkit().getImage("\\\\networkdive\\folderonnetwork\\image.jpg");  
            JOptionPane.showMessageDialog(null, "", "", JOptionPane.INFORMATION_MESSAGE, new ImageIcon(image));
        } catch (Exception e) {
            e.printStackTrace();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T20:43:14.097

我不认为 Samba/CIFS 路径是有效的 URL 或本地文件。改为查看[JCIFS](http://jcifs.samba.org/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T20:05:20.717

如果您遇到严重的网络延迟，您可以将加载推迟到 的实例`SwingWorker`，如本[示例](https://stackoverflow.com/a/4530659/230513)所示。

请注意，该示例使用`ImageIO.read()`而不是[`Toolkit#getImage()`](http://docs.oracle.com/javase/7/docs/api/java/awt/Toolkit.html#getImage%28java.lang.String%29)，它“可能仍包含在先前调用后从文件中加载的陈旧信息”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-29T21:25:04.647

我有同样的问题，并通过谷歌找到了这个。我通过在 samba url 前面使用“file:\\\\”解决了这个问题。

# url - C# 使 URL 有效

> ID：12221677
> 
> 赞同：-1
> 
> 时间：2012-08-31T19:50:02.547
> 
> 标签：url, search-engine

我正在用 C# 编写一个爬虫。有没有办法使 URL 有效？例如，在抓取 youtube 时，我得到`/watch?foo=bar`和`bar.foo.google.com`. 我想得到`http://www.youtube.com/watch?foo=bar`和`http://bar.foo.google.com`。我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T19:53:38.893

你需要问一个更具体的问题。“使 URL 有效”非常模糊。

在第一种情况下，你想`/watch?foo=bar`成为`http://www.youtube.com/watch?foo=bar`，对吗？那很简单。前者是相对 URL。要生成后者，您只需获取您所在页面的基本 URL ( `http://www.youtube.com`) 并将其添加到相对 URL 之前，以获得完整的绝对 URL。

在第二种情况下，你有`bar.foo.google.com`，并且想要得到`http://bar.foo.google.com`，对吗？那么这也很简单。您只需将协议部分 ( `http://`) 添加到域的前面。

*   [相对和绝对网址](http://www.webdevelopersnotes.com/design/relative_and_absolute_urls.php3)

# c++ - 如果某个字符与数组中的前一个字符相同，则跳过该字符

> ID：12221680
> 
> 赞同：2
> 
> 时间：2012-08-31T19:50:07.227
> 
> 标签：c++, algorithm, language-agnostic, cstring

我问了一个类似的问题，但遗漏了一个重要的细节。我正在对字符数组（cstring）进行一些文本处理。输入数组被复制到输出数组，除了某些字符被改变（例如 a->b）。这是通过使用 switch 语句来完成的。我想要的是，如果在一行中找到两个或多个特定字符，则只有其中一个被复制到新数组中（所以我不希望一行中有两个空格）。

这就是我到目前为止所得到的，它可以在不跳过某些字符的一行中的两个或多个的情况下工作：

```
char cleanName[ent->d_namlen];
    for(int i = 0; i < ent->d_namlen; i++)
    {
        switch(ent->d_name[i])
        {

            case 'a' :
                cleanName[i] = 'b';//replace a's with b's (just an example)
                break;
            case ' ' ://fall through
            case '-' :
            case '–' :
            case '—' :
                cleanName[i] = '_';//replace spaces and dashes with spaces
                break;
            ....//more case statments
           default: 
                cleanName[i] = ent->d_name[i];
  }
} 
```

例如，如果一行中的两个字符被下划线替换，我该怎么做？我只执行`switch`语句`if(ent->d_name[i] != previous || (ent->d_name[i] != '-' && ent->d_name[i] != '_' && ent->d_name[i] != ' ')`

**这可能更像是一个算法问题，而不是特定于实现的问题。**

示例输入：abbc--de
输出：bbbc_d_e（为简单起见，假设“a”映射到“b”，但实际上不止于此）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T19:54:05.043

好吧，对于这类文本处理算法，我会使用状态机。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T19:54:21.857

在现有转换之后，最简单的方法是[`std::unique`](http://en.cppreference.com/w/cpp/algorithm/unique)与自定义谓词一起使用：

```
cleanName.erase(std::unique(std::begin(cleanName), std::end(cleanName),
    [](char c, char d) { return c == '_' && d == '_'; }), std::end(cleanName)); 
```

对于`char`数组：

```
length = std::unique(cleanName, &cleanName[length],
    [](char c, char d) { return c == '_' && d == '_'; }) - cleanName;
cleanName[length] = '\0'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T19:55:26.420

需要注意的一件事是，根据索引的工作方式，您需要意识到 cleanName 的长度不一定与输入数组的长度相同。因此，您需要小心索引 i。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-31T20:09:07.553

我的建议是将最后找到的字符保留在临时变量中。这样，如果出现相同的字符，您可以忽略它。有两种方法可以做到这一点：
在 switch 之后添加一个 while 语句，它消耗每个字符等于找到的最后一个字符。如果 cstring 有很多重复字符，这很有用：

```
 char cleanName[ent->d_namlen];
 char parent;
    for(int i = 0; i < ent->d_namlen; i++)
    {
        switch(ent->d_name[i])
        {
            case 'a' :
                cleanName[i] = 'b';//replace a's with b's (just an example)
                parent = ent->d_name[i];
                break;
            case ' ' ://fall through
            case '-' :
            case '–' :
            case '—' :
                cleanName[i] = '_';//replace spaces and dashes with spaces
                parent = ent->d_name[i];
                break;
            ....//more case statments
           default: 
                cleanName[i] = ent->d_name[i];
        }
        while((parent == ent->d_name[i++]) && ent->d_name[i++] != NULL)
            i++;
    } 
```

这里唯一的问题是，如果您有一系列交错的空格和破折号，它可能无法识别它并保留各种“_”。一种解决方案是保留父母的集合而不是单个字符。

另一种方法是在每次迭代中将当前字符与下一个字符进行比较。您保留“父”变量，并在每个切换案例中将当前字符与父字符进行比较，如果它们相同，则不要将其添加到 cleanName cstring。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-31T21:29:29.420

`unique_copy`这是一个关于算法和[`transform_iterator`来自 Boost](http://www.boost.org/doc/libs/1_50_0/libs/iterator/doc/transform_iterator.html)的想法：

```
#include <boost/iterator/transform_iterator.hpp>
#include <iterator>
#include <iostream>
#include <string>
#include <algorithm>

char transform(char c)
{
    switch(c) {
        case 'a' :
            return 'b';
        case ' ' :
        case '-' :
        case '–' :
        case '—' :
            return '_';
        default:
            return c;
    }
}

int main()
{
    std::string in = "abbc--d-e";
    std::string out;

    std::unique_copy(
        boost::make_transform_iterator(in.begin(), transform),
        boost::make_transform_iterator(in.end(), transform),
        std::back_inserter(out),
        [](char c1, char c2){ return c1 == '_' && c2 == '_'; });

    std::cout << out; // bbbc_d_e
} 
```

# .htaccess - 在一个根目录中使用多个域时，跨多个子文件夹重写同一文件

> ID：12221682
> 
> 赞同：0
> 
> 时间：2012-08-31T19:50:13.263
> 
> 标签：.htaccess, mod-rewrite, rewrite

我真的不知道如何用一句话来描述我的问题，所以我将用一个例子来解释：

假设我有一个如下所示的文件夹结构：

> /根
> 
> /root/clientfolder1/testfile.php
> 
> /root/clientfolder2/testfile.php

ETC...

并且 testfile.php 在所有子文件夹中都是相同的。

现在假设我刚刚在所有子文件夹中推出了一个名为 testfile2.php 的新文件，所以现在 testfile2.php 存在于所有子文件夹中。

我添加了一个重定向，将旧的 testfile.php 指向新的 testfile2.php

因此，在我的 .htaccess 中，我添加了以下内容（是的，'RewriteEngine On' 已在 .htaccess 文件中设置）：

```
RewriteRule (.*)/testfile\.php /$1/testfile2.php [R=301,L] 
```

好的，现在一切似乎都正常，但是（这是事情变得棘手的地方）在我的 htaccess 文件中，我还为多个域设置了规则，以指向特定的文件夹，如下所示：

```
RewriteCond %{HTTP_HOST} domain-one.com
RewriteCond %{REQUEST_URI} !^/clientfolder1
RewriteRule ^(.*)$ clientfolder1/$1 [L]

RewriteCond %{HTTP_HOST} domain-two.com
RewriteCond %{REQUEST_URI} !^clientfolder2
RewriteRule ^(.*)$ clientfolder2/$1 [L] 
```

ETC...

我还有一个主站点（默认域名），用于我的主站点（根目录中的文件）让我们称之为 main-domain.com

所以以下工作：

```
domain-one.com/testfile.php
domain-one.com/testfile2.php
domain-two.com/testfile.php
domain-two.com/testfile2.php
main-domain.com/clientfolder1/testfile.php
main-domain.com/clientfolder2/testfile.php 
```

**现在这是我的问题/问题：**

我在上面添加的新重定向以用 testfile2.php 替换 testfile.php 导致发生以下情况：

**domain-one.com/testfile.php**重定向到： **main-domain.com/clientfolder1/testfile2.php**

但我需要它重定向到**domain-one.com/testfile2.php**

我无法让它工作......并且感到沮丧，因为我确信有一个简单的解决方案，我只是错过了一些明显的东西。这可以做到吗？怎么做？

在此先感谢您的帮助-非常感谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T21:00:37.340

Apache 完全按照您的规则执行。

```
RewriteCond %{HTTP_HOST} domain-one.com 
```

如果域是“domain-one.com”...

```
RewriteCond %{REQUEST_URI} !^/clientfolder1 
```

...并且 URI 不**以**“/clientfolder1”开头 ...

```
RewriteRule ^(.*)$ clientfolder1/$1 [L] 
```

...然后在 URI 前面加上“clientfolder1/”。

# ios - 如何刷新屏幕上的所有内容

> ID：12221685
> 
> 赞同：1
> 
> 时间：2012-08-31T19:50:41.827
> 
> 标签：ios, xcode, core-animation

我正在使用 XCode 为 iOS 制作游戏，但是我遇到了一个问题：

如果我使用循环，图形直到循环完成后的下一帧才会更新；所以如果例如我有这样的事情：

```
something.center = CGPointMake(20, something.center.y);
while(something.center.x < 50)
{
    something.center = CGPointMake(something.center.x + 1, something.center.y);
    // Just a delay:
    [NSThread sleepForTimeInterval:0.01];
} 
```

UIImageView 的“东西”将直接从 20 变为 50。我知道在这种情况下我应该使用 NSTimer，但我只是做了这个例子来保持简单。

那么有没有我可以调用来更新屏幕的函数，某种 VBL？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T20:39:19.673

> 那么有没有我可以调用来更新屏幕的函数，某种 VBL？

不，这不是绘画的工作方式。如果您在一个循环中更改视图 50 次，则运行循环永远不会有机会在更改之间更新显示，因此他的所有更改似乎都是一次发生的。您需要定期使视图无效，并让操作系统调用您的代码以进行每次更改。

这并不难，但有一个更简单的方法：使用 Core Animation。CA 让您说“在 n 秒内平滑地将此视图的中心更改为我的新值”。一旦你开始动画，你就可以忘记它——CA会处理剩下的事情：

```
[UIView animateWithDuration:3.0 animations:^{something.center = newCenter}]; 
```

这会将 的中心移动`something`到`newCenter`3 秒以上。你可以做很多很多，但你可以自己阅读。

如果要使用计时器，则需要编写一个更新例程，它只执行动画的*一个*步骤并返回。然后让计时器在每次触发时调用更新例程，以便视图移动一点点。当视图到达目的地时，终止计时器。但是 CA 为您完成了这一切，而且做得更好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-01T07:05:23.763

我认为您不应该在这种情况下使用计时器。当我寻找类似的东西时，我发现 a`CADisplayLink`更合适。当`CADisplayLink`屏幕内容更新时，您会收到通知。也就是说，不是在固定的时间间隔内调用方法，而是计算经过的时间并相应地更新您的内容。我已经使用这种机制来实现一个[`UIScrollView`子类](https://github.com/plancalculus/MOScrollView/blob/master/MOScrollView/MOScrollView.m)，它的内容偏移可以使用其他时间函数而不是线性时间来动画。每次显示链接触发时，我都会相应地设置内容偏移量。请注意，实施可能并不完美，因为它尚未经过深入测试。但是，也有很好的使用教程`CADisplayLink`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T20:24:10.453

由于将主线程用于 UI 是最佳实践（如提到的 H2CO3），因此我不建议使用`sleepForTimeInterval`，因为它阻塞了可以说是最重要工作的线程（至少对用户而言）。相反，您可以使用这样的计时器：

```
- (void) updatePosition {

    while(something.center.x < 50) {
        something.center = CGPointMake(something.center.x + 1, something.center.y);
    }
}

NSTimer *timer = [NSTimer timerWithTimeInterval:0.05 target:self selector:@selector(updatePosition) userInfo:nil repeats:YES];
[timer fire]; 
```

当然，您必须调整代码并进行一些修改，但这是您应该做的要点。

# jquery - Jquery下拉菜单没有选择性地加载内容

> ID：12221688
> 
> 赞同：0
> 
> 时间：2012-08-31T19:50:50.887
> 
> 标签：jquery

我在这里的另一个线程中找到了以下代码来创建 Jquery 下拉菜单：

```
$(document).ready(function() {
   $('#myselector').change(function(){
      $('.statecontent').hide();
      $('#' + $(this).val()).show();    
   });
}); 
```

HTML 看起来像这样

```
<select id="myselector">
   <option value="state1">State 1</option>
   <option value="state2">State 2 </option>
   <option value="state3">State 3</option>
</select>

<div id="state1" class="statecontent">State1 Specific Page Content Goes here</div>
<div id="state2" class="statecontent">State2 Specific Page Content Goes here</div>
<div id="state3" class="statecontent">State3 Specific Page Content Goes here</div> 
```

这工作得很好，除了一个问题：当页面加载时，它会显示所有三个选项的文本。但是，一旦选择了一个选项，其他文本就会消失，只显示相关文本。为什么加载所有三个选项的文本？如何修复它，以便在用户选择另一个选项之前只显示第一个选项的文本？在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T19:59:43.310

你可以试试这个：

```
$(document).ready(function() {

   $('.statecontent').hide();
   $('#' + $('#myselector').val()).show();
   $('#myselector').change(function(){
      $('.statecontent').hide();
      $('#' + $(this).val()).show();    
   });
}); 
```

这是工作[小提琴](http://jsfiddle.net/yFNWa/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T19:53:55.673

```
$(document).ready(function() {
  // this is for the case an option comes selected from server
  showRelatedDiv();

   $('#myselector').change(function(){
       showRelatedDiv();
   });
});

function showRelatedDiv(){
   $('.statecontent').hide();
   $('#' + $('#myselector').val()).show();        
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-31T19:55:48.880

只需在页面加载时触发更改事件，如下所示：

```
$(function() {
   $('#myselector').on('change', function(){
      $('#' + this.value).show().siblings('.statecontent').hide();    
   }).change();
});​ 
```

[**小提琴**](http://jsfiddle.net/CqruM/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-31T19:55:54.577

加载页面后，您需要执行一些处理。您的过滤仅在更改事件发生时启动。

```
$(document).ready(function() {
   //Hide all states on load
   $('.statecontent').hide();
   //Determine which state is selected and show
   $('#' + $('#myselector').val()).show();

   //Bind the change event.
   $('#myselector').change(function(){
      $('.statecontent').hide();
      $('#' + $(this).val()).show();    
   });
}); 
```

工作示例：http: [//jsfiddle.net/7cEXZ/](http://jsfiddle.net/7cEXZ/)

# asp.net - 在 Sql 更新查询中使用 gridview 的 DataKeyName

> ID：12221689
> 
> 赞同：0
> 
> 时间：2012-08-31T19:50:54.963
> 
> 标签：asp.net, data-binding, gridview

有人可以给我一个代码示例，说明如何将网格视图中的选定数据键用作 C#.net 中 SQL 更新查询的参数

例如 。我有一个充满模板字段的gridview。当我单击 gridview 中的选择按钮时，所选行信息显示在 gridview 外部的文本框中。现在，用户可以编辑该信息并单击更新按钮并更新记录。要执行此更新操作，我希望使用所选行数据的 DataKeyNames 属性。就像在 Gridview 中一样... DataKeyNames="EntryID"。所以我再次需要这个 ID 来更新表中的记录。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T19:56:22.057

> 要执行此更新操作，我希望使用所选行数据的 DataKeyNames 属性。

实际上，当您填写编辑器时，您将当前 ID 保存在页面的某个位置，然后再次使用它来进行更新。

**最简单的方法是将其保存在带有标题id**的只读文本编辑器中：并在更新的回帖中，您有此 value-id 来进行更新。

另一种方法是将其保存在视图状态中。

您还可以阅读：[当用户选择记录时，推荐哪种方式来填充 Web 表单上的所有控件？](https://stackoverflow.com/questions/11358559/which-is-the-recommended-way-to-fill-all-controls-on-a-web-form-when-user-select)

# html - HTTP 错误 405.0 - 方法不允许 - POST 失败

> ID：12221692
> 
> 赞同：3
> 
> 时间：2012-08-31T19:51:01.857
> 
> 标签：html, http-post

我有一个 HTML 网页应该提交给自己，但如果 method="POST" 会不断失败。它适用于 GET，但我们真的想要 POST。我已经删除了所有代码，直到只剩下一个输入和一个提交，但它总是得到 405 错误。这个临时网页已尽可能精简。

我正在运行 IIS 7 的 PC 上运行此测试。

```
<form id="form1" action="PhoneTest3.html" method="POST">
    <label for="contactPhoneExt">Contact Phone: </label>
    <input id="contactPhoneExt" name="contactPhoneExt" />
    <br/>

    <input type="submit" value="Submit" />
</form> 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-31T19:55:50.127

如果它真的是一个 HTML 页面（而不是隐藏在 .HTML 扩展名后面的脚本页面），那么您就不能发布到它。

但是，您可以使用 GET 并通过 Javascript 可以读取的命令行传递值。

编辑：更多细节。

`GET`通过 URL 传递值。它们成为 URL 的一部分，可以添加书签、复制、轻松修改等。

`POST,`另一方面，通过程序员调用的方式提供值`stdin.` `stdin`就像*程序*读取然后处理的文件一样。可以通过这种方式传递大量数据，但是需要在服务器上运行的程序才能访问任何这些数据——因此，接收发布数据的任何本地文件都*必须*能够在服务器上运行。

它变得令人困惑，因为可以设置 Web 服务器以`.html`在其文件上显示扩展名，但这些文件实际上`PHP`是运行的脚本。

# c# - MVC3 - 为以下场景创建 CRUD 的最佳方法

> ID：12221698
> 
> 赞同：1
> 
> 时间：2012-08-31T19:51:30.273
> 
> 标签：c#, asp.net-mvc-3

我有两张桌子学生和活动。每个学生必须有 10 个活动，可以是不同的活动。为这种情况创建 CRUD 的最佳方法是什么？

目前我正在这样做：

```
using System; 
using System.Collections.Generic; 

namespace StudentActivity.Models 
{ 
    public class Student 
    { 
        public int StudentID { get; set; } 
        public string LastName { get; set; } 
        public string FirstMidName { get; set; } 
        public string ActivityId{ get; set; } 
        public virtual ICollection<Activity> Activity { get; set; } 
    } 
} 
```

为上述场景创建 CRUD 控制器。但这使得它非常难以管理。因为我必须为每个学生分别创建 10 个活动。有一个更好的方法吗？这样我看到一个学生和它下面的 10 个活动文本框一次填充。而不是一一填写。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T01:12:24.680

你肯定在这里混合了两种不同的东西。业务实体应设计为以一种有意义的方式表示业务逻辑，而与任何 UI 无关。

作为一个好的实践，当你设计你的业务层时，你应该假设它需要与不同类型的 UI 一起使用，而变化很小或没有变化。

现在在这里查看您的业务案例，您有一个父类（学生）和一个子类（活动）。每个学生都需要有很多活动。所以你这里的设计是正确的。如何在 UI 中渲染它应该绝对不会影响这个设计。

视图是负责显示信息和接受用户输入的实体。给定这个包含活动集合的 Student 类，我不明白为什么不能显示它以便一次输入所有活动。你试过什么了？

# ios - 在表格视图中单击行时，在下一个视图中显示带有该标题的地图

> ID：12221700
> 
> 赞同：-1
> 
> 时间：2012-08-31T19:51:46.180
> 
> 标签：ios, uitableview, mkmapview

我有一个表格视图，其中包含从 sqlite 检索到的地图标题（还存储了纬度和经度值）。

单击每个标题时，我希望在下一个视图中显示该标题的地图。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath;
{
    static NSString *CellIdentifier = @"Cell1";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) 
    {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];

    }

    AppDelegate *appDelegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];

    MapColumns *mc=(MapColumns *)[appDelegate.outputArray objectAtIndex:indexPath.row];

    cell.textLabel.text=mc.Title;
    cell.accessoryType=UITableViewCellAccessoryDetailDisclosureButton;
   return cell;

}

-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{

    MapView *mv=[[MapView alloc]initWithNibName:@"MapView" bundle:nil];
    [self.navigationController pushViewController:mv animated:YES];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T20:26:47.610

在为您的地图设置标题方面，您可以`title`在实例化 MapView 视图控制器时设置它的属性`didSelectRowAtIndexPath:`。通过再次访问 appDelegate 的 outputArray 来获取标题的值，方法与`cellForRowAtIndexPath:`.

您还需要一种将 MapColumns 对象传递给 MapView 视图控制器类的方法。为此，请在 MapView 类上创建一个属性并将 MapView 对象分配给该属性，然后再调用`pushViewController:`

```
-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    MapView *mv = [[MapView alloc]initWithNibName:@"MapView" bundle:nil];

    MapColumns *mc = (MapColumns *)[appDelegate.outputArray objectAtIndex:indexPath.row];
    mv.title = mc.Title;

    mv.mapColumns = mc;  // set this property here you you can access the MapColumns object in your MapView view controller

    [self.navigationController pushViewController:mv animated:YES];
} 
```

然后在 MapView 的`viewDidLoad`方法中，使用`mapColumns`您设置的属性值来检索纬度和经度并适当地配置您的地图。

如果您不知道如何设置地图并显示注释，您应该从阅读 Apple 的[Location Awareness Programming Guide](http://developer.apple.com/library/ios/#documentation/userexperience/conceptual/LocationAwarenessPG/MapKit/MapKit.html#//apple_ref/doc/uid/TP40009497-CH3-SW1)开始。

可以在[这里](http://www.raywenderlich.com/2847/introduction-to-mapkit-on-ios-tutorial)找到另一个有用的 MapKit 教程。

# c# - C#中的'out'修饰符

> ID：12221703
> 
> 赞同：4
> 
> 时间：2012-08-31T19:52:01.407
> 
> 标签：c#, out

> **可能重复：**
> [C# - 引用类型仍需要通过 ref 传递？](https://stackoverflow.com/questions/1381881/c-sharp-reference-type-still-needs-pass-by-ref)

```
class OutReturnExample
{
    static void Method(out int i, out string s1, out string s2)
    {
        i = 44;
        s1 = "I've been returned";
        s2 = null;
    }
    static void Main()
    {
        int value;
        string str1, str2;
        Method(out value, out str1, out str2);
        // value is now 44
        // str1 is now "I've been returned"
        // str2 is (still) null;
    } 
```

我是 C# 新手，正在学习修饰符。我[在 MSDN 上看到了这个片段](http://msdn.microsoft.com/en-us/library/ee332485.aspx)。

我知道这里对于 int 原始变量很有用，但是对于字符串变量，即使没有修饰符，`out`引用也会传递给被调用的方法，对吧？`out`

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-31T19:56:23.280

> `out`即使没有修饰符，引用也会传递给被调用的方法，对吗？

是的，但没有`out`它们将不会被传回：

```
void M(string s1, out string s2)
{
    s1 = "one";
    s2 = "two";
}

void Main()
{
    string s = "hello", t = "world";
    // s = "hello"
    // t = "world"
    M(s, out t);
    // s = "hello"
    // t = "two"
} 
```

* * *

`string`被设计为不可变的。您可能正在考虑*可变*引用类型：

```
class Person { public string Name { get; set; } }

void Main()
{
    var p = new Person { Name = "Homer" };
    // p != null
    // p.Name = "Homer"
    M2(p);
    // p != null
    // p.Name = "Bart"
}

void M2(Person q)
{
    q.Name = "Bart";   // q references same object as p
    q = null;          // no effect, q is a copy of p
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-31T19:57:41.140

> 但是对于字符串变量，即使没有 out 修饰符，引用也会传递给被调用的方法，对吗？

是的，但您不能更改引用本身。当您`s1 = "I've been returned";`在方法内部设置时，您将一个新的字符串实例分配给 s1 变量。变量本身是按值传递的，所以调用函数看不到这个赋值。

如果你有一堂课，这会更清楚：

```
class Foo
{
     public string Value { get; set; }
} 
```

如果你将它传递给一个没有 ref 或 out 的方法，你仍然可以看到实例*内部的变化，因为它正在传递引用：*

```
static void Method(Foo foo)
{
    foo.Value = "Bar";
} 
```

有了这个，你可以调用：

```
Foo foo = new Foo { Value = "Foo" };
Method(foo);
Console.WriteLine(foo.Value); // Prints Bar 
```

但是，如果您将该值设置为不同的实例：

```
static void Method2(Foo foo)
{
    foo = new Foo {Value = "Bar" };
} 
```

这不会出现：

```
Foo foo = new Foo { Value = "Foo" };
Method2(foo);
Console.WriteLine(foo.Value); // Prints Foo, not Bar! 
```

通过 ref 或 out 传递，您可以重新分配变量本身：

```
static void Method3(ref Foo foo)
{
    foo = new Foo {Value = "Bar" };
}

Foo foo = new Foo { Value = "Foo" };
Method3(ref foo); // This will change what foo references now
Console.WriteLine(foo.Value); // Prints Bar again 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-31T19:58:47.063

区别在于：如果不是`out`，则调用者中的值不会更新。

```
static void Method(string s1, out string s2)
{
    s1 = "I've been returned";
    s2 = "changed!!!";
}

static void Main()
{
    string str1 = "one";
    string str2 "two";
    Method(str1, out str2);
    // str1 is still "one"
    // str2 is "changed!";
} 
```

请注意，您的示例中的`null`for`str2`实际上来自 Method。您只是看不到差异，因为它在通话前后为*空*。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-31T19:57:39.373

您**需要**在从方法返回之前设置[`out`参数。](http://msdn.microsoft.com/en-us/library/ee332485.aspx)所以传入什么并不重要，因为它保证会被覆盖。

> 尽管作为输出参数传递的变量在传递之前不必初始化，但被调用的方法需要在方法返回之前分配一个值。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-31T20:01:27.937

对于您的主要问题，这有点离题，但我认为这可能会帮助您更好地理解`out`修饰符的目的。

参数的另一种有用模式`out`在方法中可以看到，`Int32.TryParse(String value, out int i)`这些方法允许您编写不必手动处理常见异常的代码，例如，

```
int i;
if (Int32.TryParse("blah", out i))
{
  Console.WriteLine("Valid Integer");
}
else
{
  Console.WriteLine("Invalid input");
} 
```

这是一个简单的例子，但它是一种相当常见且有用的模式，尝试执行一些操作并返回它是否成功和结果值。

.NET 中另一个更广泛使用的示例是`TryGetValue()`字典上的方法 - 请参阅*[Dictionary.TryGetValue Method (TKey, TValue)](http://msdn.microsoft.com/en-us/library/bb347013)* (MSDN)。

# android - android 屏幕尺寸,values-v11,values-v14

> ID：12221705
> 
> 赞同：17
> 
> 时间：2012-08-31T19:52:15.600
> 
> 标签：android, android-resources, screen-size

`values`我在我的文件夹中找到了几个文件`res`夹：

```
xlarge screens are at least 960dp x 720dp
large screens are at least 640dp x 480dp
normal screens are at least 470dp x 320dp
small screens are at least 426dp x 320dp  
res/values-normal/ ==    res/values-v11/ ???
res/values-xlarge/ ==   res/values-v14/  ??? 
```

我对吗？或者我是否需要创建另一个名为`values-xlarge`,的文件夹`values-normal`？

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-08-31T19:54:37.243

`values-v11`是 API 版本 11`values-v14`的值， 是 API 版本 14 的值。

值得指出的是 ie`values-v11`将用于 API 11**及**更高版本，除非有另一个文件夹获得更高版本。例如，如果您有`values-v11`和`values-v14`文件夹，则`values-v11`and 将用于 API 11、12、13 但在 API 14 及更高版本上，`values-v14`将使用的内容

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-31T19:54:32.300

不，这个“方程式”不正确：

```
res/values-normal/ == res/values-v11/ ???
res/values-xlarge/ == res/values-v14/ ??? 
```

`xlarge`定义屏幕尺寸（因此这些值将在具有显示匹配`xlarge`要求的设备上使用）同时`v14`确定 API 版本（Ice Cream Sandwitch -[请参见此处](http://developer.android.com/reference/android/os/Build.VERSION_CODES.html)）。不能保证（甚至假设）每个`xlarge`设备都必须运行`v14`API，或者每个 ICS 设备都具有`xlarge`屏幕功能。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-09T13:27:25.300

values-v11 中的 v11 是 Android sdk 版本 v11 的限定符。

请查看[http://developer.android.com/guide/topics/resources/providing-resources.html](http://developer.android.com/guide/topics/resources/providing-resources.html)，了解有关 Android 如何支持不同 sdk 版本、屏幕、语言或其他设备配置的资源的详细说明。

[http://developer.android.com/guide/practices/screens_support.html](http://developer.android.com/guide/practices/screens_support.html)包含有关支持多屏幕尺寸的更详细说明。

# java - 使用 JSON 进行 Ajax 调用时出现 400 错误

> ID：12221707
> 
> 赞同：2
> 
> 时间：2012-08-31T19:52:20.553
> 
> 标签：java, ajax, json, spring-mvc

我不确定我这样做的方式有什么问题......我收到一个 400 错误，说这是一个错误的请求，但我找不到我的语法有什么问题。

```
$.ajax({
        url : '/my_project/rest/runs/1234?token=moo',
        type : 'POST',
        data: { job_position : JSON.stringify(38) },
        contentType: 'application/json',
        dataType: 'json',
        success : function(html) {
        }
    }); 
```

接收控制器：

```
@RequestMapping(value="/runs/{userId}", method = RequestMethod.POST, consumes = {"application/json"})
    public @ResponseBody boolean myMethod(@PathVariable String userId, @RequestParam("token") String authenticationToken, @RequestBody @Valid Long job_position){
        return true;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T19:54:43.897

您的数据部分是否缺少引号？数据：{“job_position”：JSON.stringify(38)}

只是一个想法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T19:57:31.797

`/my_project/rest/runs/1234?token=moo`- 这是 GET 请求语法

制作
`url : '/my_project/rest/runs/1234'`
和
`data: { "job_position" : JSON.stringify(38) , "token" : "moo"}`

如此完整的请求看起来像

```
$.ajax({
        url : '/my_project/rest/runs/1234',
        type : 'POST',
        data: { "job_position" : 38, "token" : "moo"},
        contentType: 'application/json',
        dataType: 'json',
        success : function(html) {
        }
    }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-31T20:17:48.790

您实际上并未在请求中发送 JSON，jQuery 会将您的对象转换为查询字符串。为了防止这种情况自己串起来。

```
$.ajax({
        url : '/my_project/rest/runs/1234',
        type : 'POST',
        data: JSON.stringify({ job_position : 38, token: 'moo' }),
        contentType: 'application/json',
        dataType: 'json',
        success : function(html) {
        }
}); 
```

# excel - 子或函数未定义

> ID：12221709
> 
> 赞同：0
> 
> 时间：2012-08-31T19:52:24.223
> 
> 标签：excel, vba

自学成才，我还没有学到有关 Excel VBA 的所有知识。老实说，我知道一些基础知识，但没有我应该知道的那么多，所以这个问题虽然可能是一个通用的基本问题，但可能应该由了解 VBA 的人知道，但在我学习我需要的情况下继续前进...所以我需要一个解释。

什么时候需要定义 Sub 或 Function？为什么需要定义 Sub 或 Function？定义 Sub 或 Function 的目的是什么？

我只问，因为这个：

```
Option Explicit

Sub OpenOrderReportExport()

    Dim wsJL As Worksheet   'Jobs List
    Dim wsPOT As Worksheet  'PO Tracking
    Dim wsTNO As Worksheet  'Tel-Nexx OOR
    Dim wbBK2 As Workbook   'New Workbook
    Dim wsWS1 As Worksheet  'Sheet1
    Dim wsWS2 As Worksheet  'Sheet2
    Dim wsWS3 As Worksheet  'Sheet3

    Set wsJL = Sheets("Jobs List")      'Jobs List
    Set wsPOT = Sheets("PO Tracking")   'PO Tracking
    Set wsTNO = Sheets("Tel-Nexx OOR")  'Tel-Nexx OOR
    Set wbBK2 = Workbook("Book2")       'New Workbook
    Set wsWS1 = Sheets("Sheet1")        'Sheet1
    Set wsWS2 = Sheets("Sheet2")        'Sheet2
    Set wsWS3 = Sheets("Sheet3")        'Sheet3

        Application.ScreenUpdating = False    ' Prevents screen refreshing.
        CurrentFile = ThisWorkbook.FullName
        NewFileType = "Excel Files 2007 (*.xlsx)"
        NewFile = Application.GetSaveAsFilename(InitialFileName:="Open Order Log - " & Format(Date, "dd-mm-yyyy") & ".txt", fileFilter:=NewFileType)

End Sub 
```

为什么需要定义这个 sub？我把它作为一个标准模块，并努力设置它，一旦按下按钮，我就可以将几页移到一个新的工作簿，删除空白的，然后从那里开始保存功能你告诉它在哪里保存。

我还有很长的路要走，但我想测试保存功能，然后从那里开始，因为对我来说这将是最难的事情。

所以在没有解决我的整个难题的情况下，我想知道为什么需要定义这样的东西？以及它需要如何定义......如果有人能给出答案，将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-31T23:58:46.983

您的帖子围绕以下问题展开，让我一一解释。

**你的问题**

1.  什么时候需要定义 Sub 或 Function？
2.  为什么需要定义 Sub 或 Function？
3.  定义 Sub 或 Function 的目的是什么？
4.  为什么需要定义这个 sub？

VBA 支持两种类型的过程：**子过程**和**函数过程**。

**Sub 过程**由一系列语句组成，可以通过多种方式执行，例如

```
Sub Sample()
    MsgBox "Hello Matt Ridge"
End Sub 
```

或者

```
Sub Sample()
    Sample1 "Hello Matt Ridge"
End Sub

Sub Sample1(s As String)
    MsgBox s
End Sub 
```

![在此处输入图像描述](../Images/3c9ca4bc67acd15ddd83e7e93f6436ae.png)

另一方面，VBA**函数返回单个值或可能返回数组。**可以从另一个 VBA 过程调用函数或在工作表公式中使用函数。例如

```
Sub Sample()
    Dim Ret As String

    Ret = GreetUser("Matt Ridge")

    MsgBox Ret
End Sub

Public Function GreetUser(User As String)
    GreetUser = "Hello " & User
End Function 
```

也可以在工作表中调用相同的函数。例如，单元格 A1 具有`Matt Ridge`并且当您在单元格 B1 中键入此公式时

```
=GreetUser(A1) 
```

您将进入`Hello Matt Ridge`单元格 B1。请参阅下面的快照。

![在此处输入图像描述](../Images/935defd6965288d9f9e365ea525b06db.png)

现在查看您的代码。

当你说

```
 Dim wbBK2 As Workbook 
```

然后 VBA 期望您按照提到的 enderland 相应地设置变量。在您的情况下，VBA 正在寻找`WORKBOOKS()`哪个是内置方法。但是，当 VBA 发现`WORKBOOK()`它无法识别时，它会尝试`SUB PROCEDURE`在模块中找到 （*希望您可能已经在某个地方定义了它*），当它找不到它时，它会弹出该错误。:)

希望这能回答你的问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-31T20:29:16.347

你误解了这个问题。

以下代码行不正确。它不会像您想象的那样创建新的工作簿。该函数`Workbook`不存在 - 当您尝试运行/编译 VBA 编辑器时会抱怨该函数不存在。

```
Set wbBK2 = Workbook("Book2")       'New Workbook 
```

将其更改为

```
set wbBK2 = Workbooks.add 
```

它将创建一个新工作簿并将参考保存在`wbBK2`. `Workbook`或者，如果您不尝试创建新工作簿，则可以通过添加“s”来引用打开的工作簿：

```
Set wbBK2 = Workbooks("Book2")       'New Workbook 
```

您最终还需要将这些变量标注为字符串：

```
 Dim CurrentFile as String        
    Dim NewFileType as String
    Dim NewFile as String

    CurrentFile = ThisWorkbook.FullName
    NewFileType = "Excel Files 2007 (*.xlsx)"
    NewFile = Application.GetSaveAsFilename(InitialFileName:="Open Order Log - " & Format(Date, "dd-mm-yyyy") & ".txt", fileFilter:=NewFileType) 
```

* * *

另一个注意事项 - 当你使用

```
Set wsWS1 = Sheets("Sheet1")        'Sheet1
Set wsWS2 = Sheets("Sheet2")        'Sheet2
Set wsWS3 = Sheets("Sheet3")        'Sheet3 
```

您可能想要更改它以引用其他工作簿中的工作表

```
Set wsWS1 = wbBK2.Sheets("Sheet1")        'Sheet1
Set wsWS2 = wbBK2.Sheets("Sheet2")        'Sheet2
Set wsWS3 = wbBK2.Sheets("Sheet3")        'Sheet3 
```

因为保持对这些工作表的正确引用将非常有帮助，即使您添加了其他工作簿。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-02T13:00:42.473

您遇到的问题是您正在使用 OPTION EXPICIT，这意味着所有变量都必须被定义。实现这一点并使您的代码美观和可读的一种方法是在您首次定义和设置对象时使用冒号作为行继续：

下面的例子：

```
Option Explicit 

Sub OpenOrderReportExport() 

    Dim wsJL As Worksheet:  Set wsJL = Sheets("Jobs List")      'Jobs List 
    Dim wsPOT As Worksheet: Set wsPOT = Sheets("PO Tracking")   'PO Tracking 
    Dim wsTNO As Worksheet: Set wsTNO = Sheets("Tel-Nexx OOR")  'Tel-Nexx OOR
    Dim wbBK2 As Workbook:  Set wbBK2 = Workbook("Book2")       'New Workbook 
    Dim wsWS1 As Worksheet: Set wsWS1 = wbBK2.Sheets("Sheet1")  'Sheet1 
    Dim wsWS2 As Worksheet: Set wsWS2 = wbBK2.Sheets("Sheet2")  'Sheet2  
    Dim wsWS3 As Worksheet: Set wsWS3 = wbBK2.Sheets("Sheet3")  'Sheet3 

    Application.ScreenUpdating = False    ' Prevents screen refreshing. 
    Dim CurrentFile as string: CurrentFile = ThisWorkbook.FullName 
    Dim NewFileType as string: NewFileType = "Excel Files 2007 (*.xlsx)" 
    Dim NewFileType as string: NewFile = Application.GetSaveAsFilename(InitialFileName:="Open Order Log - " & Format(Date, "dd-mm-yyyy") & ".txt", fileFilter:=NewFileType) 

End Sub 
```

# jakarta-ee - 如何使用 JMS 适配器侦听 Amazon SQS

> ID：12221715
> 
> 赞同：8
> 
> 时间：2012-08-31T19:52:47.190
> 
> 标签：jakarta-ee, amazon-web-services, jms, amazon-sqs

是否有任何方法可以设置 Amazon SQS 队列或 Amazon SNS 主题以用作本机 XA JMS 资源适配器？

这个想法是用 SQS 代替在大型应用程序中使用 activemq，但避免不必要的代码重写开销。

当消息可见性超时时，自动中止当前的 XA 事务会很棒。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-23T03:53:49.670

[Nevado](http://nevado.skyscreamer.org/)是一个支持 SQS 和 SNS 的 JMS 驱动程序。它非常关注 JMS 规范合规性，因此它应该是移植 ActiveMQ 的好工具。

# windows - 无法 telnet / ping 安装在虚拟机上的服务器

> ID：12221734
> 
> 赞同：2
> 
> 时间：2012-08-31T19:54:50.173
> 
> 标签：windows, ubuntu, virtual-machine, telnet, zabbix

我正在尝试在已安装在 Ubuntu 虚拟机上的 ZABBIX SERVER 和已安装在我的本地计算机（Windows）上的 ZABBIX AGENT 之间建立连接。

我不确定这是 zabbix.server.conf 和 zabbix.agent.conf 文件的问题还是虚拟机的问题。因此，非常感谢任何建议/建议！

Zabbix 服务器详细信息：（安装在 Ubuntu 上）

1.  IP地址 ![在此处输入图像描述](../Images/830f13e7cda24629ed314f6276f46fd1.png)

2.  虚拟机 NAT 详细信息 ![在此处输入图像描述](../Images/67c4bc4dedf01c05a206f899c52253a1.png)

Zabbix 代理详细信息（安装在 Windows 上）

1.  ![在此处输入图像描述](../Images/ec66e4b4ab836dd958e7978324be22a8.png)

代理（在 windows 上）和服务器（在 ubuntu 上）之间的测试

1.  从服务器到代理 ping 成功 ![在此处输入图像描述](../Images/6eda501a43d931169f688332725f0a3a.png)

2.  从代理到服务器的 ping 失败 ![在此处输入图像描述](../Images/e05af0f1f24ac22018577c183045a609.png)

3.  在这两种情况下 telnet 失败 ![在此处输入图像描述](../Images/ce56c5699976fc7c00130c815bd270f5.png)

    和

    ![在此处输入图像描述](../Images/25f04b99d5df84f9685aff56348bd1bd.png)

注意：服务器正在运行，代理也在运行

基于**Ansgar**的故障排除答案：

1.  转发端口 ![在此处输入图像描述](../Images/43b5f7034279a4bd7c30cd8cca4b0d42.png)

2.  ubuntu 上的 tcptrace ![在此处输入图像描述](../Images/09c1c5a95510edc072ec60de5d65a1d9.png)

    正如你提到的，它显示了打开的连接

3.  Windows 上的 tcptrace ![在此处输入图像描述](../Images/6ff2964f49aa4ce2258d7ed9706094d2.png)

    仍然连接关闭，我在端口转发中做错了什么？我也尝试将主机 ID 设为 127.0.0.1

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T20:27:33.397

只有第二个 telnet 连接失败（无法打开连接）。第一个建立成功（连接到10.184.230.129），但随后被远程主机关闭（连接被外部主机关闭）。

连接 client->server 很可能失败，因为 server-VM 位于 NATed 接口后面。您必须将所需的端口从主机转发到来宾（网络适配器配置中的“端口转发”按钮）。

但是，这并不能解释为什么连接服务器-> 客户端失败。

服务器和代理监听哪些端口？用于`netstat`检查。此外，主机显然位于不同的网络上，所以我会检查`tcptraceroute`（Linux）和[tracetcp](http://tracetcp.sourceforge.net/)（Windows，你还需要[WinPcap](http://www.winpcap.org/)才能工作）在哪一跳连接失败。

服务器->客户端：`tcptraceroute -n 10.184.230.129 10050`

客户端->服务器：`tracetcp 10.0.2.15:10051 -n`

# android - 安卓自定义设置

> ID：12221736
> 
> 赞同：1
> 
> 时间：2012-08-31T19:55:21.167
> 
> 标签：android

欢迎。如何做出自己的设计选择？

像这样的东西：

![在此处输入图像描述](../Images/78422056b610309d18a9db09ead59624.png)

我只想做出自己的设计选择

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T19:59:12.733

这些似乎只是带有自定义背景和文本的自定义按钮..

Google android 自定义主题和 android styles.xml

# matplotlib - 发出 show() 后不会出现图形窗口

> ID：12221737
> 
> 赞同：4
> 
> 时间：2012-08-31T19:55:25.183
> 
> 标签：matplotlib, ipython, updates, figure, enthought

我最近将 ipython 和 pandas 更新到了它们最新的稳定版本。它导致 matplotlib 中出现一些奇怪的行为，如果我从终端运行（以前的行为）脚本，我将无法显示数字。如果我在 ipython qtconsole 中，即使发出 show() 命令也无法显示绘图。除非那是我在发出 plot 命令后发出 figure(1) 命令（请参阅下面的粘贴代码）。我的 python 环境是 Enthought 的最新（我相信）安装。

这是一个 ipython 会话的代码/过程。没有数字出现，直到最后一行，这似乎不正确。

```
In[1]: figure()
Out[1]: <matplotlib.figure.Figure at 0x2f05910>

In[2]: show()

In[3]: plot(arange(10))
Out[3]: [<matplotlib.lines.Line2D at 0x3196b90>]

In[4]: show()

In[5]: draw()

In[6]: figure()
Out[6]: <matplotlib.figure.Figure at 0x31a6210>

In[7]: figure(1)
Out[7]: 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-31T21:28:05.310

这看起来像是您使用的后端的问题。如果您从选项开始`ipython`，则`--pylab`不需要调用`show()`或`draw()`。尝试使用不同的后端（如果您安装了它们）。一些例子：

```
ipython --pylab=tk
ipython --pylab=qt
ipython --pylab=wx
ipython --pylab=gtk
ipython --pylab=osx 
```

我怀疑环保署可能只有 tk 后端，但我可能是错的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-26T17:19:15.257

我使用以下命令在命令行中启动了 ipython notebook：

```
C:\..\cur_dir> ipython notebook --pylab=inline 
```

然后我尝试了：

```
plot(arange(10)) 
```

和显示的图像。

# ios - iOS 上的计时器不起作用

> ID：12221739
> 
> 赞同：2
> 
> 时间：2012-08-31T19:55:41.643
> 
> 标签：ios, timer

我正在尝试自己制作一个计时器，但它不起作用。似乎每次重复都为零，有人吗？它适用于 OS X，但不适用于 iOS。

我只需要一个工作**循环方法**- 有什么建议吗？

标题：

```
@interface ViewController : UIViewController
@property (strong, nonatomic) IBOutlet UILabel *timerOutlet;
- (void)timer:(id)sender;
@end 
```

执行：

```
@synthesize timerOutlet;

- (void)viewDidLoad
{
    [super viewDidLoad];
    started = TRUE;
    [self timer:nil];
}

- (void)timer:(id)sender {
    int test = 1;
    NSString *number = [NSString stringWithFormat:@"%i",test];
    timerOutlet.text = number;
    [self performSelector:@selector(timer:) withObject:Nil afterDelay:1.0];
    test ++;                
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T20:02:15.223

`test`问题是您每次执行计时器方法时都重新声明并为其分配 1。因此，如果您要么省略声明并创建`test`一个实例变量，要么 make it `static`，那应该会有所帮助。但是，除此之外，您应该真正使用 NSTimer 对象而不是强行使用框架。

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    started = TRUE;
    test = 1;
    [NSTimer scheduledTimerWithTimeInterval:1.0f target:self selector:@selector(timer:) userInfo:nil repeats:YES];
}

- (void)timer:(id)sender {
    NSLog(@"%i",test);
    test++;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T20:04:21.387

您在 int test = 1; 中忘记了“静态”

```
static int test = 1; 
```

你应该很高兴。

# asp.net - 将 gridview 导出为 MS word 保留格式

> ID：12221740
> 
> 赞同：2
> 
> 时间：2012-08-31T19:55:47.833
> 
> 标签：asp.net

有没有办法将 gridview 导出到 MS word 并保留 gridview 的格式。下面的代码可以导出gridview，但我不知道如何保持格式。（我不能使用任何第三方软件）

```
 Response.Clear()
    Response.Buffer = True
    Response.AddHeader("content-disposition", "attachment;filename=GridViewExport.doc")
    Response.Charset = ""
    Response.ContentType = "application/vnd.ms-word"

    Dim sw As New StringWriter()
    Dim hw As New HtmlTextWriter(sw)
    GridView1.RenderControl(hw)
    Response.Output.Write(sw.ToString())
    Response.Flush()
    Response.End() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T20:09:30.743

我最好的猜测是，您正在定义大多数网格的颜色、列对齐方式等，通过`classes`在`CSS`文件中定义，当您导出时，这些类将不再被引用。

要修复它，您需要使用内联样式，以便在将网格编写为 Word 文档时，呈现的 HTML 是自包含的，并且颜色和其他格式会被保留。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T20:07:25.667

forums.asp.net 的这个示例声称可以完成这项工作：

```
Response.AppendHeader("content-disposition", "attachment;filename=FileEName.doc");
Response.Cache.SetCacheability(HttpCacheability.NoCache);
Response.ContentType = "application/vnd.ms-word";
this.EnableViewState = false;
Response.Write(word.InnerHtml);
Response.End(); 
```

[http://forums.asp.net/t/1823755.aspx/1](http://forums.asp.net/t/1823755.aspx/1)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-10T11:18:38.217

```
 >First bind your grid 
     >Response.ClearContent();
       Response.AddHeader("content-disposition", string.Format("attachment; 
       filename={0}", "Customers.doc"));              

     Response.Charset = "";
    Response.ContentType = "application/ms-word";
    StringWriter sw = new StringWriter();
    HtmlTextWriter htw = new HtmlTextWriter(sw);
    GridView1.RenderControl(htw);
    Response.Write(sw.ToString());
    Response.End();
   ><%@ Page Language="C#" AutoEventWireup="true" CodeFile="Records.aspx.cs"  
       Inherits="Records"
     MasterPageFile="~/Master.master"  EnableEventValidation="false" %>
   >use this code if img click event not fired
     protected void mswrd_imgbtn_PreRender(object sender, EventArgs e)
     {
    ImageButton btn = sender as ImageButton;
    ScriptManager sc = ScriptManager.GetCurrent(this.Page);
    sc.RegisterPostBackControl(btn);
     } 
```

# sql - 在数据库表多值列中查找值

> ID：12221747
> 
> 赞同：0
> 
> 时间：2012-08-31T19:56:07.257
> 
> 标签：sql, sql-server-2008, coldfusion, coldfusion-9, multivalue

我有下表

```
search_redirect
sr_id | sr_keyword | sr_redirect | sr_synonyms
------------------------------------------------------
1     | chair      | www.url.com | recliner,seat,stool
2     | couch      | www.url.com | sofa,divan
3     | dresser    | www.url.com | chest,drawers 
```

当有人在我的网站上使用搜索功能时，我希望能够将他们搜索的内容与同义词列表进行比较。我对解决方案的尝试是这样的：

```
SELECT sr_redirect
FROM search_redirect
WHERE '#url.q#' IN (sr_redirect) 
```

不幸的是，虽然这是一个完全合法的举动，但它并没有像我想象的那样做。我的下一次尝试是尝试在 中的值中添加单引号`sr_synonyms`，但这也没有产生成功的结果。这个问题很难说，所以我无法在这种情况下找到任何帮助。任何我能得到的建议将不胜感激。我在 SQL Server 2008 中使用 ColdFusion 9 服务器端脚本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T19:59:03.843

为了维护一个纯 sql 解决方案，我会将您的表更改为 2 个表。

第一个可能有：

搜索重定向

## sr_id | sr_keyword | sr_redirect

第二个可能有

search_keyword_to_synonym

## sr_id | sr_同义词

然后在第二个表中每行只有 1 个同义词。您的解决方案可能是：

```
SELECT sr_redirect FROM search_redirect
INNER JOIN search_keyword_to_synonym
ON search_redirect.sr_id=search_keyword_to_synonym.sr_id
WHERE search_redirect.sr_keyword=whatever_input_you_have. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T20:02:15.167

首先：

**如果您想单独访问它们，切勿将多个信息放入一个字段中。绝不**

也就是说，这很容易纠正：创建一个表“同义词”，如

```
synonym | sr_id
---------------
recliner| 1
seat    | 1
stool   | 1
sofa    | 2
divan   | 2 
```

并完成它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T20:03:31.987

您可以使用与此类似的语法：

```
SELECT sr_redirect
FROM search_redirect
WHERE substr('#url.q#',sr_synonyms) > 0 
```

但是，我同意其他人的看法-重新规范化

# odbc - 我如何知道在免费表 fox pro 目录中索引了哪些字段？

> ID：12221748
> 
> 赞同：0
> 
> 时间：2012-08-31T19:56:07.913
> 
> 标签：odbc, indexing, visual-foxpro

我知道在 Fox Pro 中创建索引时，索引存储在与 (.dbf) 表同名的文件中，但扩展名不同，例如 .cdx 或 .idx。

那就是说如何以编程方式确定表的哪些字段被索引？

PS 我正在尝试在使用 Fox Pro 的第三方产品上运行查询，我没有 Visual Fox Pro 的副本可供使用，但我有 ODBC 和 SQuirreL SQL。查询真的很慢，这就是我询问索引的原因。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-31T20:34:01.667

使用 ATagInfo() 函数。它用表的索引标签列表填充数组。请注意，仅包含开放索引，因此如果您使用的不是结构 CDX（与表同名的索引），则必须确保在使用 ATagInfo() 之前打开其他索引。

（不推荐使用结构索引文件以外的任何东西，但如果您处理的是足够老的产品，您可能会找到它们。）

添马舰

# c# - 扩展 TextBox 的 UseSystemPasswordChar 安全性

> ID：12221752
> 
> 赞同：1
> 
> 时间：2012-08-31T19:56:22.453
> 
> 标签：c#, winforms, security, textbox, password-protection

在处理记住我功能（对于用户名和密码凭据）时，我注意到可以恢复将 UseSystemPasswordChar 属性设置为 true 时隐藏的密码。下面的屏幕截图示例：

![UseSystemPasswordChar 属性设置为 true](../Images/829518d170013ed5e02184d98eed6cf0.png)

我还注意到，虽然很多应用程序都会遇到同样的问题，但并非所有应用程序都会遇到这种情况，所以我认为必须有办法避免这种情况。

问题是，我需要采取什么方法来确保无法使用此方法检索凭据？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T20:12:01.840

保存密码后，当您再次向用户显示旧密码时，不要将旧密码放回框中。您放置一些占位符文本，如果文本框与您使用存储的密码的占位符文本匹配。

至于其他一些技巧，如果可能的话，将密码的哈希值而不是密码本身存储在内存中。您可以使用 Process Explorer 之类的字符串实用程序在内存中查找密码字符串。

如果无法存储哈希而不是密码（例如，如果您连接到其他服务并且需要提交明文密码），您可以使用[SecureString](http://msdn.microsoft.com/en-us/library/system.security.securestring.aspx)并且这将保持内存中的字符串加密。

至于长期安全地存储密码，而不仅仅是在内存中，请在将字符串写入硬盘驱动器之前使用[ProtectedData类对其进行加密，并将](http://msdn.microsoft.com/en-us/library/system.security.cryptography.protecteddata)[DataProtectionScope](http://msdn.microsoft.com/en-us/library/system.security.cryptography.dataprotectionscope)设置为`CurrentUser`只有登录用户才能获取数据。

请记住：您不能让某人无法找到存储的密码，但您可以显着提高获取密码的难度。

# facebook - 带有 PHP SDK 的通知 API

> ID：12221757
> 
> 赞同：1
> 
> 时间：2012-08-31T19:57:12.400
> 
> 标签：facebook, notifications

我正在尝试向我的一位用户（https://developers.facebook.com/docs/app_notifications/）发送通知，但我无法使用我的 PHP SDK 来完成这项工作。

我正在使用这段代码：

```
$data = array(
    'href'=> 'https://apps.facebook.com/MY_APP/',
    'access_token'=> $app_token,
    'template'=> 'test'
);
$sendnotification = $facebook->api('/USER_ID/notifications', 'post', $data); 
```

这就是我得到的错误：

> 致命错误：未捕获的 OAuthException：无效的 OAuth 访问令牌签名。在第 1039 行的 /usr/home/test/base_facebook.php 中抛出

这就是我获取应用程序访问令牌的方式：

```
$APPLICATION_ID = "MY_APP_ID";
$APPLICATION_SECRET = "MY_APP_SECRET";

$token_url =    "https://graph.facebook.com/oauth/access_token?" .
                "client_id=" . $APPLICATION_ID .
                "&client_secret=" . $APPLICATION_SECRET .
                "&grant_type=client_credentials";
$app_token = file_get_contents($token_url); 
```

我究竟做错了什么？

* * *

access_token 有问题，如果我直接在 sode 中使用访问令牌，它现在可以工作。

```
'access_token'=> 'K3Rds2y0cGm...', 
```

有谁知道应用程序访问令牌持续多长时间？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-02T16:34:14.177

这是使用 Facebook PHP SDK V3.2.0 时设置应用程序访问令牌的正确方法：

```
 $this->_objFacebook->setAccessToken($this->_objFacebook->getAppId().'|'.$this->_objFacebook->getAppSecret()); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-14T04:47:53.840

问题是 var $app_token 是 $app_token = "access_token=YOUR_APP_ACCESS_TOKEN" 形式的字符串

您需要使用的是第二部分，YOUR_APP_ACCESS_TOKEN，因此，在使用 $app_token 作为有效令牌之前，您必须删除字符串“access_token =”的第一部分

解决方案：

```
$APPLICATION_ID = "MY_APP_ID";
$APPLICATION_SECRET = "MY_APP_SECRET";

$token_url =    "https://graph.facebook.com/oauth/access_token?" .
                "client_id=" . $APPLICATION_ID .
                "&client_secret=" . $APPLICATION_SECRET .
                "&grant_type=client_credentials";
$app_token = file_get_contents($token_url);
$app_token = str_replace("access_token=", "", $app_token);

$data = array(
    'href'=> 'https://apps.facebook.com/MY_APP/',
    'access_token'=> $app_token,
    'template'=> 'test'
);
$sendnotification = $facebook->api('/USER_ID/notifications', 'post', $data); 
```

希望能帮助到你

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-19T14:46:07.513

```
$accessToken = $appId . '|' . $secret;
$params = array(
            'access_token' => $accessToken,
            'href' => $canvasPage,
            'template' => $message,
        );
$facebookObject->api('/' . $userId . '/notifications/', 'post', $params); 
```

这对我有用。参考：[http ://calibrate.be/labs/facebook-notification-api-php-sdk](http://calibrate.be/labs/facebook-notification-api-php-sdk)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-31T20:04:08.440

您是否检查过 php.ini 中是否启用了 OAuth？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-31T20:22:34.840

检查您使用的访问令牌在[Facebook 的调试工具](https://developers.facebook.com/tools/debug)中是否有效- 您的代码中没有任何地方实际验证检索应用访问令牌的请求是否有效。

您还需要检查该应用程序是否

1.  不在沙盒模式下（可能不相关，但值得检查）
2.  未在高级设置中配置为“本机/桌面” - 该配置中不信任应用访问令牌

# asp.net - Process.Start 从 ASP.NET

> ID：12221759
> 
> 赞同：1
> 
> 时间：2012-08-31T19:57:13.350
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3, iis, process

我有一个 asp.net mvc 4 应用程序，它具有对控制台应用程序的 Process.Start() 调用（用 C++ 编写）。

问题是控制台应用程序不能从 asp.net 应用程序正确运行（它从站点生成图像，并且图像全是白色的）。

当我从控制台应用程序使用相同的调用时，它可以完美运行。

在我看来，这应该是权限问题。

我不确定 ASP.NET 是否从同一个用户运行，但我在[这里](https://stackoverflow.com/questions/8446359/what-account-does-iis-express-run-under)看到它在我的用户帐户（管理员）下运行，所以这真的很奇怪。

我尝试过的事情：

1.  process.StartInfo.UseShellExecute = true/false。

2.  process.StartInfo.UserName 和管理员用户的密码。

3.  编辑 C:\Users\MyUser\Documents\IISExpress\config\applicationhost.config 中的 IIS 配置文件：

    ```
    <applicationPoolDefaults managedRuntimeLoader="v4.0" >
        <processModel/>
    </applicationPoolDefaults> 
    ```

    至：

    ```
     <applicationPoolDefaults managedRuntimeLoader="v4.0" >
            <processModel userName="administrator username" password="administrator password"/>
        </applicationPoolDefaults> 
    ```

    因此，如果匿名请求将以进程的身份执行，并且进程没有权限，则将使用显式用户进行匿名身份验证。[取自这里](https://stackoverflow.com/questions/4348615/iis-express-impersonate-a-windows-account)

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T01:46:39.787

**查看“在代码中模拟特定用户”部分**

[http://support.microsoft.com/kb/306158#4](http://support.microsoft.com/kb/306158#4)

在模拟指定用户后，您应该能够从您的代码中调用 Process.Start，并且将使用该身份创建进程。流程启动后，您应该调用“impersonationContext.Undo()”将用户身份返回给 App Pool Identity。

如果您使用另一种方法从 ASP.NET 中模拟用户，则整个应用程序将具有提升的权限。最好将这些提升的权限限制在此过程中。

# java - java jndi - 如何在 weblogic 中找到一些 bean

> ID：12221765
> 
> 赞同：1
> 
> 时间：2012-08-31T19:57:38.600
> 
> 标签：java, weblogic, jndi

我有两个托管服务器的 weblogic，当我打开 MS1 时，有 JNDI 视图，我可以在那里看到我的会话 bean。有 MyBean#com 节点，可以按包展开，直到找到最后一部分。当我打开它时，有绑定名称：MyBean#com.company.MyInterface。

该 bean 使用位于 ear MyApp 内的远程注释进行注释。然后我有一个普通的java客户端。我向服务器打开 InitialContext：

```
ht.put(Context.INITIAL_CONTEXT_FACTORY, "weblogic.jndi.WLInitialContextFactory");
ht.put(Context.PROVIDER_URL, "t3://hostname:7081");
ht.put(Context.SECURITY_PRINCIPAL, "weblogic");
ht.put(Context.SECURITY_CREDENTIALS, "weblogic");
_ctx = new InitialContext(ht); 
```

并查一下：

```
_ctx.lookup("MyBean#com.company.MyInterface") 
```

但它失败了：

```
javax.naming.NameNotFoundException: While trying to lookup 'MyBean#com.company.MyInterface' didn't find subcontext 'MyBean#com'. Resolved '']; remaining name 'MyBean#com.company.MyInterface' 
```

您能帮我构建正确的 JNDI 名称吗？我很困惑，因为我可以在 WebLogic 10.3.4 的 JNDI 视图中看到它。十分感谢。

# java - 使用 JavaMail 从 Java 发送电子邮件

> ID：12221768
> 
> 赞同：0
> 
> 时间：2012-08-31T19:57:53.823
> 
> 标签：java, unix, jakarta-mail, sendmail

我有两个 Unix 服务器，每个服务器都执行相同的代码来发送电子邮件，使用 JavaMail API 将电子邮件发送到给定地址。

```
Message msg = new MimeMessage(getSession());
msg.setFrom(fromAddress);
msg.setSubject(subject);
msg.setRecipients(Message.RecipientType.TO, toAddresses);
msg.setRecipients(Message.RecipientType.CC, ccAddresses);
msg.setRecipients(Message.RecipientType.BCC, bccAddresses);

Transport.send(msg); 
```

这在其中一台服务器上完美运行，但在另一台服务器上却不行。我知道第二台服务器上的问题是，在其环境中，邮件需要通过给定的中继才能实际发送，***我可以使用 SendMail 直接从服务器发送电子邮件***。所以我的问题是，有什么方法可以使用 Java 代码发送电子邮件，以便我的代码能够在两个服务器上发送电子邮件？

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T20:18:29.260

如果您可以使用 sendmail 在该服务器上发送电子邮件，请将该服务器上运行的 JavaMail 配置为发送到该服务器上运行的 sendmail。您可能需要配置 sendmail 以支持中继，具体取决于您在邮件中使用的地址。

如果这不起作用，您将需要提供更多详细信息，说明在哪里失败，以及哪些错误消息。

# javascript - 从 Sonar 中排除 JavaScript 库

> ID：12221770
> 
> 赞同：21
> 
> 时间：2012-08-31T19:58:02.793
> 
> 标签：javascript, sonarqube

如果您查看这个使用 Sonar 分析 JavaScript 的站点，您会发现 JavaScript 库报告了很多错误。

[http://nemo.sonarsource.org/drilldown/violations/jquery?rids%5B%5D=421365&severity=MAJOR](http://nemo.sonarsource.org/drilldown/violations/jquery?rids%5B%5D=421365&severity=MAJOR)

如何防止 Sonar 报告我正在使用的 JavaScript 库中的错误（因为我无法修复任何问题）？

同时，如果我确实设法排除了该库，我不希望像“未定义变量”这样的错误出现在我的文件中，因为它们引用了 JavaScript 库。

如果有什么不同，我使用的是 ExtJS 4.0。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2016-09-13T17:12:36.743

您可以将库添加为*分析范围*配置中的源文件排除项，并且您应该使用一些遗嘱卡来帮助您。

[![在此处输入图像描述](../Images/fced2b6fde34581ac8eb7eb6dcd7e2d5.png)](https://i.stack.imgur.com/PiWpA.png)

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-09-11T19:50:50.560

我在我的项目中使用 Maven 和 ExtJS 4.1。通过将这些行放在我的`pom.xml`：

```
<properties>
    <sonar.language>js</sonar.language>
    <sonar.exclusions>extjs/**</sonar.exclusions>
</properties>

<build>
    <sourceDirectory>src/main/webapp</sourceDirectory>
</build> 
```

我不知道你是否也在使用 Maven，但也许这会给你一些提示。

* * *

## 回答 #3

> 赞同：-7
> 
> 时间：2012-08-31T20:18:02.373

通常，您可以使用 cdata 包装器向其他解释器隐藏您的 JavaScript：

```
<script type="text/javascript">
/*<![CDATA[*//*---->*/

alert('Your Javascript is working!');

/*--*//*]]>*/
</script> 
```

# .net - COM EXE 中的 .NET DLL 对象无法实例化

> ID：12221774
> 
> 赞同：0
> 
> 时间：2012-08-31T19:58:35.097
> 
> 标签：.net, vb6, interop

我有一个只发生在一台机器上的问题。

这是场景。我有一个目前仍在 VB6 中开发的 EXE，但我成功地将它的 DLL 迁移到 .NET。EXE 包含对 DLL 中的类的对象引用，并在启动期间用引用的 DLL 初始化对象。

由于某种原因，仅在一台机器上无法初始化对象，即使 DLL 已正确注册（使用 ragasm.exe）。所有其他机器都没有问题。

有问题的机器是 Windows XP 32 位计算机，用户以管理员身份登录。我什至手动注册了 DLL，没有任何问题，但程序仍然无法创建对它的引用。

不确定我可以采取哪些其他步骤来调试此问题。从逻辑上讲，它应该可以正常工作，因为它已正确注册。

谢谢，克里斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T23:41:01.113

使用进程监视器查看您的应用程序偏离轨道的位置。

[http://technet.microsoft.com/en-us/sysinternals/bb896645.aspx](http://technet.microsoft.com/en-us/sysinternals/bb896645.aspx)

您应该看到 VB6 应用程序在注册表中找到了 DLL 的位置，然后看到它访问文件系统来定位 DLL。如果您在那之后仍然被卡住，请发回结果。

# c# - 媒体播放器控件

> ID：12221779
> 
> 赞同：0
> 
> 时间：2012-08-31T19:58:44.103
> 
> 标签：c#, wpf, media-player, caliburn.micro

我有一个 WPF Caliburn.Micro 应用程序，我想用来`System.Window.Media.MediaPlayer`播放音频。我知道如何开始播放，但我怎么知道播放何时完成，所以我可以禁用暂停按钮等？

**我的代码：**

```
var audio = Tpv.GetAudio(tpv.TpvId);
var file = Path.GetTempFileName().Replace(".tmp", ".wma");
File.WriteAllBytes(file, audio);

var player = new MediaPlayer();
player.Open(new Uri(file, UriKind.Absolute));
player.Play(); 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T20:04:47.673

您可以订阅 MediaPlayer 上的 MediaEnded 事件。

*   [http://msdn.microsoft.com/en-us/library/system.windows.media.mediaplayer.mediaended](http://msdn.microsoft.com/en-us/library/system.windows.media.mediaplayer.mediaended)

如果您想对播放进行更多控制，例如暂停和搜索，请使用 MediaTimeline 和 Storyboard。

*   [http://msdn.microsoft.com/en-us/library/system.windows.media.mediatimeline.source.aspx](http://msdn.microsoft.com/en-us/library/system.windows.media.mediatimeline.source.aspx)

*   [WPF：实现 MediaPlayer 音频/视频搜索器](https://stackoverflow.com/questions/869761/wpf-implementing-a-mediaplayer-audio-video-seeker)

# objective-c - 连接 Apple TV 时如何保持 MPVolumeView 的滑块可见？

> ID：12221787
> 
> 赞同：3
> 
> 时间：2012-08-31T19:59:46.690
> 
> 标签：objective-c, mpvolumeview

我正在使用 MPVolumeView 来控制我的应用程序中 AVPlayer 的音量。当我使用音量滑块旁边的 Airplay 按钮连接到 AppleTV 时，滑块会消失。如何避免这种情况？

当我使用音乐应用程序将音乐流式传输到同一个 AppleTV 时，音乐应用程序中的音量滑块保持可见。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T07:31:41.910

`allowsExternalPlayback`解决方案是在 AVPlayer 上设置为 NO：

```
self.player = [AVPlayer playerWithURL:self.streamUrl];
self.player.allowsExternalPlayback = NO; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T03:42:07.960

我也有类似的情况。我的解决方法是：

```
player.allowsAirPlayVideo = NO; // keeps volume slider from disappearing 
```

# python - 如何让 Tkinter 在 Mac 上工作

> ID：12221788
> 
> 赞同：13
> 
> 时间：2012-08-31T19:59:48.303
> 
> 标签：python, tkinter

> **可能重复：**
> [在 Python 中导入 Tkinter 时出现 ImportError](https://stackoverflow.com/questions/7498658/importerror-when-importing-tkinter-in-python)

我有一台安装了 Mountain Lion 的 Mac。我想在它上面开发 Python，所以我抓住了一个 Python 3.3 候选版本并开始使用它。但是，我试图开始使用 Tkinter 图形，当我尝试这一行时：

```
from Tkinter import * 
```

Eclipse（和 IDLE）给了我这个讨厌的错误

```
Traceback (most recent call last):
File "/Users/venkatsmoorthy/Documents/workspace/Python/python/tkinterGUI/tkinter_1.py" line 7, in <module>
from Tkinter import *
ImportError: No module named 'Tkinter' 
```

我不想降级。虽然我愿意，但只到3.2.3。请不要让我这样做。

我用谷歌搜索了一下，发现 OSX 对 Tkinter 有一些问题。我尝试了一些解决方案，但没有骰子。请用您自己的说明回答如何让 tkinter 在 python 3.3/3.2 上工作。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-08-31T20:46:42.933

Python 3 称之为`tkinter`not `Tkinter`。

# xslt - XSLT：reocurring xpath 的缩写

> ID：12221789
> 
> 赞同：3
> 
> 时间：2012-08-31T19:59:59.880
> 
> 标签：xslt, xpath, xslt-1.0

在 XSL 转换中，我有一个相当长的 XPath（大约 20 个不同节点的联合）。因为经常需要这条路径，所以它的缩写会很好。

缩写必须以它在当前上下文中评估的方式进行，因此使用全局变量或其他东西是行不通的。

目标版本是带有 EXSLT 扩展的 XSLT 1.0。

谢谢，
约斯特

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T20:04:09.487

如果你不能有一个全局变量，那么一个[函数](http://www.exslt.org/func/elements/function/index.html)可能是解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-01T00:37:17.597

**您可以使用实体来提供冗长的 XPath 的缩写**。

XSLT 是一个 XML 文件，因此 XML 实体可以在 XSLT 中的任何位置使用。在解析 XSLT 时，实体将被扩展和解析。

您可以对全局 XSLT 变量无法使用的实体执行的操作是在 XPath 中使用实体并匹配表达式。

例如，您可以为长 XPath 语句创建一个实体并在多个位置重新使用它，如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE stylesheet [
<!ENTITY lengthyXPath "elem1 | elem2 | elem3 | elem4 | elem5 | elem6 | elem7 | elem8 | elem9 | elem10 | elem11 | elem12 | elem13 | elem14 | elem15 | elem16 | elem17 | elem18 | elem19 | elem20">
]>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    version="1.0">
    <xsl:output indent="yes"/>
    <xsl:template match="/">
        <output>
           <xsl:apply-templates select="/*/*"/>     
        </output>
    </xsl:template>

    <xsl:template match="foo">
            <xsl:comment>mached foo child elements from: &lengthyXPath;</xsl:comment>
            <xsl:apply-templates select="&lengthyXPath;"/>
    </xsl:template>

    <xsl:template match="bar">
            <xsl:comment>mached bar child elements from: &lengthyXPath;</xsl:comment>
            <xsl:apply-templates select="&lengthyXPath;"/>
    </xsl:template>

    <xsl:template match="baz">
            <xsl:comment>mached baz child elements from: &lengthyXPath;</xsl:comment>
            <xsl:apply-templates select="&lengthyXPath;"/>
    </xsl:template>

    <xsl:template match="&lengthyXPath;">
        <xsl:copy-of select="."/>
    </xsl:template>

</xsl:stylesheet> 
```

应用于此 XML 时：

```
 <doc>
    <foo>
        <elem>no match</elem>
        <elem1>1</elem1>
        <elem>no match</elem>
        <elem3>3</elem3>
        <elem>no match</elem>
        <elem5>5</elem5>
    </foo>
    <bar>
        <elem>no match</elem>
        <elem7>7</elem7>
        <elem>no match</elem>
        <elem9>9</elem9>
        <elem>no match</elem>
        <elem10>10</elem10>
    </bar>
    <baz>
        <elem>no match</elem>
        <elem11>11</elem11>
        <elem>no match</elem>
        <elem13>13</elem13>
        <elem>no match</elem>
        <elem15>15</elem15>
    </baz>
</doc> 
```

产生以下输出：

```
<?xml version="1.0" encoding="UTF-8"?>
<output><!--mached foo child elements from: elem1 | elem2 | elem3 | elem4 | elem5 | elem6 | elem7 | elem8 | elem9 | elem10 | elem11 | elem12 | elem13 | elem14 | elem15 | elem16 | elem17 | elem18 | elem19 | elem20--><elem1>1</elem1>
   <elem3>3</elem3>
   <elem5>5</elem5>
   <!--mached bar child elements from: elem1 | elem2 | elem3 | elem4 | elem5 | elem6 | elem7 | elem8 | elem9 | elem10 | elem11 | elem12 | elem13 | elem14 | elem15 | elem16 | elem17 | elem18 | elem19 | elem20--><elem7>7</elem7>
   <elem9>9</elem9>
   <elem10>10</elem10>
   <!--mached baz child elements from: elem1 | elem2 | elem3 | elem4 | elem5 | elem6 | elem7 | elem8 | elem9 | elem10 | elem11 | elem12 | elem13 | elem14 | elem15 | elem16 | elem17 | elem18 | elem19 | elem20--><elem11>11</elem11>
   <elem13>13</elem13>
   <elem15>15</elem15>
</output> 
```

# svn - 如何在存储库中知道是否签出任何文件

> ID：12221791
> 
> 赞同：0
> 
> 时间：2012-08-31T20:00:13.573
> 
> 标签：svn, ant, hudson

我正在尝试通过 Hudson、ant 进行构建过程，我们使用 SVN 存储库。

在将文件从 SVN 存储库复制到 Hudson 中的工作区之前，我想检查是否有人没有签入他们签出的文件。

如果有人签出，我想停止构建过程并发送消息：

* * *

User1：当前签出 File1、File2。

User13：当前签出 File9。

中止构建过程。请签入所有文件并重新启动进程。

* * *

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T20:34:07.643

此信息在签出的代码中不可用。但是，您可以使用[locks](http://svnbook.red-bean.com/en/1.7/svn.advanced.locking.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T20:35:29.400

我认为您正在谈论[Subversion 中文件锁](http://svnbook.red-bean.com/en/1.7/svn.advanced.locking.html)的检测。据我所知，Hudson/Jenkins 不支持此功能

# go - 如何在旅途中连接字符串和float64？

> ID：12221793
> 
> 赞同：2
> 
> 时间：2012-08-31T20:00:26.633
> 
> 标签：go

我正在尝试解决这个问题： http: [//tour.golang.org/#58](http://tour.golang.org/#58)

这是我所做的；

```
#imports omitted
type ErrNegativeSqrt float64

func (e ErrNegativeSqrt) Error() string {
    return "Cannot Sqrt negative number: " + string(e)
}

func Sqrt(f float64) (float64, error) {
    if f < 0 {
        return 0, ErrNegativeSqrt(1)
    }
    # calculate z here...
    return z, nil
}
# main omitted 
```

我也尝试过`e.String()`，`e.string()`但那些也没有用...

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-31T20:21:28.793

尝试使用`fmt`包

```
import "fmt"
...
return fmt.Sprint("Cannot Sqrt negative number ", float64(e)) 
```

# javascript - 在桌面应用程序和在线存储和可视化超大型社交图

> ID：12221795
> 
> 赞同：2
> 
> 时间：2012-08-31T20:00:32.090
> 
> 标签：javascript, graph, nosql, bigdata

任何人都知道存储和可视化具有数百万条边的大型图的最有效方法吗？

我知道格菲。但是它无法可视化这么大的数据集。（至少在我的笔记本电脑有4G内存。它总是崩溃或内存不足。）有没有其他软件可以处理它？或者可能还有其他关于 Gephi 的技巧来可视化这样一个大数据集。

我使用 Python 库 NetworkX 来处理图形，效果很好。但是存储图表是另一个问题。到目前为止，我使用文本文件和二进制文件 pickle 来存储图形。没事。但我的研究还涉及到节点对之间的计算，可能高达1亿对。计算它们需要时间，但存储和查询它们似乎需要更多时间。我尝试了传统的数据库，比如 Postgre，但是存储和查询都很慢。我还尝试了一个 NoSQL db，Neo4j，它用于存储图形数据，但是将整个图形和计算结果转储到其中非常慢。存储 2/5 的数据大约需要 20 小时，然后我不知从哪里得到了一个错误。有人可以推荐我一些其他强大的工具来摆脱这个吗？

另外，我的老板让我在图表上构建我的研究结果的在线可视化版本。从图上之前的经验来看，我觉得普通的js库是做不到这么大的数据集的。我知道我确实需要为可视化和交互构建一些数据层次结构，但是我应该采用什么样的架构或框架，从数据库到浏览器端库？

PS我不是一个原始的计算机科学人，所以我对这些技术的了解是有限的，滥用术语可能是不可避免的。

欢迎任何建议。

# android - 当与其他片段一起查看时，如何使片段显示仅选择菜单项？

> ID：12221796
> 
> 赞同：0
> 
> 时间：2012-08-31T20:00:37.640
> 
> 标签：android, android-fragments, android-menu

我有两个框架，当在手机上查看时，一次一个，它们每个都有自己的菜单。一些菜单项是相同的，在两个片段之间。

当在平板电脑上并排查看时，它们每个都会引入自己的菜单项并将它们显示在操作栏中。不幸的是，由于两个片段都有一些相同的菜单项，例如“注销”，因此有些项目是额外的并且不需要。

我怎样才能让一个片段引入它的所有菜单项并告诉另一个片段只引入它的一些菜单项？

注意：这不是有时在旋转设备时出现的重复菜单项问题。我也有这个问题，但是解决了。;)

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T20:14:38.797

> 一些菜单项是相同的，在两个片段之间。

为什么？

> 不幸的是，由于两个片段都有一些相同的菜单项，例如“注销”，因此有些项目是额外的并且不需要。

那么注销不是任何一个片段的责任，而是托管片段的活动的责任。让活动成为添加该操作栏项目的活动，而不是任何一个片段。

# templates - 带有模板的自定义指令以显示来自 WS AngularJS 的数据

> ID：12221797
> 
> 赞同：0
> 
> 时间：2012-08-31T20:00:42.460
> 
> 标签：templates, angularjs, watch, directive

**我需要什么**：创建一个自定义指令来显示一个表格，只是为了练习。

**我所拥有**的：我有带有数据编码的指令，例如在这个[小提琴](http://jsfiddle.net/mfE48/8/)中，并且工作正常。

**我的问题**：当我在控制器上使用 $http 将数据硬编码为来自 WS 的数据时，数据不会显示在表上（我认为是同步问题）。

我相信问题是因为从 WS 获取数据时没有刷新数据。但我不知道如何使用 $watch 以及是否需要。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T12:09:06.580

我意识到问题出在 WS 女巫的 JSON 数据结构形式与预期的指令结构不匹配。数据在变化时会自动刷新，我相信这是因为我在里面使用了 ng-repeat，它在代码中实现了 watch。

如果有人可以确认我将不胜感激。谢谢

# jenkins - 如何自定义 Jenkins 构建名称？

> ID：12221799
> 
> 赞同：39
> 
> 时间：2012-08-31T20:00:57.990
> 
> 标签：jenkins, jenkins-plugins

当我在 Jenkins 中运行作业时，每个构建都有一个名称，该名称显示在 UI 中的构建历史中，基本上是当前日期和时间。

我希望能够在那里输入构建参数，以便我可以在构建历史中看到哪些分支已经构建以及何时构建。

我已经四处寻找插件来执行此操作，但我找不到任何插件。有吗？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-08-31T20:06:04.383

听起来像[Build Name Setter 插件](https://wiki.jenkins-ci.org/display/JENKINS/Build+Name+Setter+Plugin)。

但是，如果您使用的是[Pipeline](https://jenkins.io/doc/book/pipeline/)，则可以执行以下操作：

```
currentBuild.description = "#${BUILD_NUMBER}, branch ${BRANCH}" 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2014-01-06T16:32:45.100

[回复Patrice M.上面的评论，只是我没有足够的声誉发表评论]：

当与[Token Macro 插件一起使用时，](https://wiki.jenkins-ci.org/display/JENKINS/Token+Macro+Plugin) [Build Name Setter](https://wiki.jenkins-ci.org/display/JENKINS/Build+Name+Setter+Plugin)插件可以表达各种变量，包括环境变量。此外，构建参数也可用作环境变量；因此，例如，如果您的构建有一个参数“MYPARAM”，那么您可以在构建名称中简单地使用它（假设您已经安装了令牌宏插件），如下所示：

```
Built with parameter MYPARAM: ${ENV, var="MYPARAM"} 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2015-08-20T10:24:43.023

也可以使用[Jenkins Groovy 插件](https://wiki.jenkins-ci.org/display/JENKINS/Groovy+plugin)“手动”设置构建名称。只需按照以下步骤操作：

1.  生成一个新的构建名称。如果您要在单独的作业步骤中执行它，您可能需要将其保存到属性文件中，例如名称为“newVersion”并使用[Jenkins EnvInject 插件](https://wiki.jenkins-ci.org/display/JENKINS/EnvInject+Plugin)执行“注入环境变量”步骤。
2.  下一步 - 运行 System Groovy 脚本：

    ```
    def build = Thread.currentThread().executable
    assert build
    def newBuildName = build.getEnvironment().get('newVersion')
    try {
        if (newBuildName) build.displayName = newBuildName
        println "Build display name is set to ${newBuildName}"
    } catch (MissingPropertyException e) {} 
    ```

如您所见，我们在`build.displayName`这里使用了一个变量。它的值是 Jenkins 中可见的构建名称。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-10-30T05:30:47.497

要修改默认显示名称，请使用`currentBuild.displayName = "#${BUILD_NUMBER}, branch ${BRANCH}"`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-03-29T23:31:47.467

警告：这只适用于 *nix 环境。对于单个 shell 步骤，您可以执行 <command> 代替：

```
/usr/bin/env JOB_NAME="Old JOB_NAME: ${JOB_NAME}" <command> 
```

假设您的项目名为“myproject”，<command> 会将 JOB_NAME 环境变量视为“Old JOB_NAME: myproject”

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-02-16T10:28:23.810

这个插件“[构建名称设置器插件](https://wiki.jenkins-ci.org/display/JENKINS/Build+Name+Setter+Plugin)”可以帮助你。作为构建名称的来源，您可以使用磁盘上的文本文件或环境变量，也可以将插件与[EnvInject等插件结合使用](https://wiki.jenkins-ci.org/display/JENKINS/EnvInject+Plugin)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-12-08T09:47:14.133

您可以使用构建名称和描述设置器插件（[https://plugins.jenkins.io/build-name-setter/](https://plugins.jenkins.io/build-name-setter/)）并将构建名称作为字符串参数传递 [![在此处输入图像描述](../Images/2909923c4108047ed5ef48c9ce31e6d9.png)](https://i.stack.imgur.com/A8PdS.png) [![在此处输入图像描述](../Images/4eaf1b8aa849cafc7039a5877615b3f4.png)](https://i.stack.imgur.com/b9WxS.png)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-08-13T11:30:55.373

text-finder-plugin 的分支，[https://github.com/judovana/text-finders-plugin](https://github.com/judovana/text-finders-plugin)可以根据控制台输出中的行或其他构建工件设置显示名称

# android - 使用 SimpleCursorTreeAdapter 保存和恢复 ExpandableListActivity 的折叠状态

> ID：12221800
> 
> 赞同：7
> 
> 时间：2012-08-31T20:01:03.887
> 
> 标签：android, expandablelistview, parcelable

在花了几天时间研究这个问题之后，我终于放弃并发布了这个问题。类似的问题已在此处（部分）得到解答，并提出了解决方案，但最终没有一个对我有所帮助。讨论的主题和我的问题的区别似乎是：其他人似乎都没有使用**SimpleCursorTreeAdapter**来提供列表......

问题：更改我的设备（Samsung Galaxy S）的方向时，不会保留和恢复组的展开状态。所有组都显示为关闭，列表滚动到顶部。

**这个问题在 Android API 演示**中已经很明显了。如果您安装了它们，请导航至：

视图 --> 可扩展列表 --> 2\. 光标（人物）：启动示例，展开任何组，转动您的设备，结果显示该组处于折叠状态。

在下面的代码中，我执行了以下操作： 从 API 演示 (ExpandableList2.java) 中获取代码，并使用 onSaveInstantState()、onRestoreInstanceState() 和 onResume() 的实现对其进行扩展。这些方法的实现取自此处的另一个讨论线程（[如何在 ExpandableListView 中保留滚动位置](https://stackoverflow.com/questions/5713585/how-to-preserve-scroll-position-in-an-expandablelistview)）。

```
import android.app.ExpandableListActivity;
import android.content.AsyncQueryHandler;
import android.content.ContentUris; 
import android.content.Context;
import android.database.Cursor;
import android.net.Uri;
import android.os.Bundle;
import android.os.Parcelable;
import android.provider.ContactsContract.CommonDataKinds.Phone;
import android.provider.ContactsContract.Contacts;
import android.view.View;
import android.widget.CursorTreeAdapter;
import android.widget.ExpandableListView;
import android.widget.SimpleCursorTreeAdapter;

public class MainActivity extends ExpandableListActivity {

private static final String LIST_STATE_KEY = "levelSelectListState";
private static final String LIST_POSITION_KEY = "levelSelectListPosition";
private static final String ITEM_POSITION_KEY = "levelSelectItemPosition";

private static final String[] CONTACTS_PROJECTION = new String[] {
        Contacts._ID, Contacts.DISPLAY_NAME };
private static final int GROUP_ID_COLUMN_INDEX = 0;

private static final String[] PHONE_NUMBER_PROJECTION = new String[] {
        Phone._ID, Phone.NUMBER };

private static final int TOKEN_GROUP = 0;
private static final int TOKEN_CHILD = 1;

private static final class QueryHandler extends AsyncQueryHandler {
    private CursorTreeAdapter mAdapter;

    public QueryHandler(Context context, CursorTreeAdapter adapter) {
        super(context.getContentResolver());
        this.mAdapter = adapter;
    }

    @Override
    protected void onQueryComplete(int token, Object cookie, Cursor cursor) {
        switch (token) {
        case TOKEN_GROUP:
            mAdapter.setGroupCursor(cursor);
            break;

        case TOKEN_CHILD:
            int groupPosition = (Integer) cookie;
            mAdapter.setChildrenCursor(groupPosition, cursor);
            break;
        }
    }
}

public class MyExpandableListAdapter extends SimpleCursorTreeAdapter {

    // Note that the constructor does not take a Cursor. This is done to
    // avoid querying the
    // database on the main thread.
    public MyExpandableListAdapter(Context context, int groupLayout,
            int childLayout, String[] groupFrom, int[] groupTo,
            String[] childrenFrom, int[] childrenTo) {

        super(context, null, groupLayout, groupFrom, groupTo, childLayout,
                childrenFrom, childrenTo);
    }

    @Override
    protected Cursor getChildrenCursor(Cursor groupCursor) {
        // Given the group, we return a cursor for all the children within
        // that group

        // Return a cursor that points to this contact's phone numbers
        Uri.Builder builder = Contacts.CONTENT_URI.buildUpon();
        ContentUris.appendId(builder,
                groupCursor.getLong(GROUP_ID_COLUMN_INDEX));
        builder.appendEncodedPath(Contacts.Data.CONTENT_DIRECTORY);
        Uri phoneNumbersUri = builder.build();

        mQueryHandler.startQuery(TOKEN_CHILD, groupCursor.getPosition(),
                phoneNumbersUri, PHONE_NUMBER_PROJECTION, Phone.MIMETYPE
                        + "=?", new String[] { Phone.CONTENT_ITEM_TYPE },
                null);

        return null;
    }
}

private QueryHandler mQueryHandler;
private CursorTreeAdapter mAdapter;
private Parcelable listState;
private int listPosition;
private int itemPosition;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    // Set up our adapter
    mAdapter = new MyExpandableListAdapter(
            this,
            android.R.layout.simple_expandable_list_item_1,
            android.R.layout.simple_expandable_list_item_1,
            new String[] { Contacts.DISPLAY_NAME }, // Name for group
                                                    // layouts
            new int[] { android.R.id.text1 },
            new String[] { Phone.NUMBER }, // Number for child layouts
            new int[] { android.R.id.text1 });

    setListAdapter(mAdapter);

    mQueryHandler = new QueryHandler(this, mAdapter);

    // Query for people
    mQueryHandler.startQuery(TOKEN_GROUP, null, Contacts.CONTENT_URI,
            CONTACTS_PROJECTION, Contacts.HAS_PHONE_NUMBER + "=1", null,
            null);
}

@Override
protected void onDestroy() {
    super.onDestroy();

    // Null out the group cursor. This will cause the group cursor and all
    // of the child cursors
    // to be closed.
    mAdapter.changeCursor(null);
    mAdapter = null;
}

@Override
protected void onSaveInstanceState(Bundle outState) {
    super.onSaveInstanceState(outState);

    ExpandableListView listView = this.getExpandableListView();
    listState = listView.onSaveInstanceState();
    outState.putParcelable(LIST_STATE_KEY, listState);

    listPosition = listView.getFirstVisiblePosition();
    outState.putInt(LIST_POSITION_KEY, listPosition);

    View itemView = listView.getChildAt(0);
    itemPosition = itemView == null ? 0 : itemView.getTop();
    outState.putInt(ITEM_POSITION_KEY, itemPosition);
}

@Override
protected void onRestoreInstanceState(Bundle state) {
    super.onRestoreInstanceState(state);

    listState = state.getParcelable(LIST_STATE_KEY);
    listPosition = state.getInt(LIST_POSITION_KEY);
    itemPosition = state.getInt(ITEM_POSITION_KEY);
}

@Override
protected void onResume() {
    super.onResume();

    ExpandableListView listView = this.getExpandableListView();
    if (listView != null) {
        if (listState != null) {
            // yes, this code is reached
            listView.onRestoreInstanceState(listState);
            listView.setSelectionFromTop(listPosition, itemPosition);
        }
    }
}
} 
```

使用我确定的调试器，当设备方向改变时，所有这些方法实际上都以正确的顺序调用。但是：恢复状态是没有效果的。

进一步调试，我发现onRestoreInstanceState()中恢复的**listState**的内容包含一个空数组，而onSaveInstanceState()中的**listState**在放入outState时包含其数组中的数据。

所以我的假设是，listState Parcelable 没有被系统保存或正确检索......

任何人都可以指出出了什么问题，或者提供一个使用 SimpleCursorTreeAdapter 并“工作”恢复展开/折叠状态的工作示例？

（注意：要重现上面活动代码的这个问题，需要提供android.permission.READ_CONTACTS权限）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T03:13:52.667

这可能会引起我们一些更谨慎的程序员的鄙视，但是您是否只是尝试使您的状态容器成为`static`对象？但即使在此之前，也许您可​​能会`notifydatasetchanged()`在检索对象后从添加某处受益。

# vb.net - 从 VB.NET 调用 Oracle 过程仅在前 2 次有效

> ID：12221801
> 
> 赞同：0
> 
> 时间：2012-08-31T20:01:03.603
> 
> 标签：vb.net, oracle, stored-procedures

我正在处理一个读取文件的项目，为文件的每一行调用 Oracle 存储过程，根据过程的返回值重命名文件，并将文件移动到服务器。我已经完成了所有这些工作，但由于某种原因，该过程仅在前两次被调用时返回一个值。在那之后，我什么也得不到。我尝试关闭循环中的连接并重新打开它，但这无济于事。我也真的不想这样做。

名称已更改以保护无辜的服务器。

```
Do While Not endOfData
    Dim dataRecord As String = dataReader1.GetRecord
    If dataRecord = "End of Data" Then
        endOfData = True
    Else
        ' Read in record '
        indexRec = indexLoader.LoadPointerIndex(dataRecord, PointerIndexRecordType.Original)

        'Format date values '
        effdate = indexRec.EffDate.ToString("M/dd/yyyy")
        dir = "/" & easyFile & "/" & indexRec.EffDate.Year & "/" & indexRec.EffDate.Month & "/"

        'Connect to Oracle '
        Dim conn As New OracleConnection(connString)
        conn.Open()
        'Call proc with indexRec values '
        Dim myCMD As New OracleCommand()
        myCMD.Connection = conn
        myCMD.CommandText = "SCHEMA.PROC"
        myCMD.CommandType = CommandType.StoredProcedure
        'Setup Parameters '
        myCMD.Parameters.Add("P_CONTRACT_ID", OracleDbType.Varchar2, 10, Nothing, ParameterDirection.Input).Value = indexRec.Contract
        myCMD.Parameters.Add("P_EFFT_DATE", OracleDbType.Date, ParameterDirection.Input).Value = indexRec.EffDate
        myCMD.Parameters.Add("P_DIRECTORY", OracleDbType.Varchar2, 18, Nothing, ParameterDirection.Input).Value = dir
        myCMD.Parameters.Add("P_FILENAME_OUT", OracleDbType.Varchar2, 13, Nothing, ParameterDirection.Output)

        myCMD.ExecuteNonQuery()

        Result = CType(myCMD.Parameters("P_FILENAME_OUT").Value.ToString, String)
        myCMD.Dispose()
        conn.Close()
        conn.Dispose()

        'Rename PDF based on returned result '
        My.Computer.FileSystem.RenameFile(rootDirectory & "\" & configSettings.appFolder & "\" & indexRec.Contract & ".pdf", Result)

        'Verify that folder exists on server '
        sFolder = sDir & indexRec.EffDate.Year & "\" & indexRec.EffDate.Month
        If (Not Directory.Exists(sFolder)) Then
            Directory.CreateDirectory(sDir & indexRec.EffDate.Year & "\" & indexRec.EffDate.Month)
        End If

        'Move PDF to proper folder '
        My.Computer.FileSystem.CopyFile(rootDirectory & "\" & configSettings.appFolder & "\" & Result, sFolder & "\" & Result)
    End If
Loop 
```

这是另一个团队管理的 Proc。

```
create or replace
PROCEDURE PROC(P_CONTRACT_ID  IN VARCHAR2,
               P_EFFT_DATE    IN DATE,
               P_DIRECTORY    IN VARCHAR2,
               P_FILENAME_OUT OUT VARCHAR2)
--*****************************************************
    -- Name: PROC
    -- Purpose: Insert a contract statement                                       
    -- Authored by: 
    -- Created on: 
    -- Modifications:
    -- Seq Who Date Description
    -- ----------------------------------------------------
    -- 001 DAT 08/27/2012 Initial Release
    --*****************************************************
 AS

    V_CONTRACT_UID       NUMBER;
    V_CORRESPONDENCE_UID NUMBER;
    V_DEL_COUNT          NUMBER;
    V_NEW_FILE_URL       VARCHAR2(254);

BEGIN

    --Get the contract_uid
    SELECT CONTRACT_UID
       INTO V_CONTRACT_UID
       FROM ODS.CONTRACTS
       WHERE CONTRACT_ID = P_CONTRACT_ID;

    --If existing, delete the entry and add (dont do a merge).
    SELECT COUNT(CORRESPONDENCE_UID)
      INTO   V_DEL_COUNT
      FROM   CORRESPONDENCES
      WHERE  CONTRACT_UID = V_CONTRACT_UID
             AND TRUNC(CORRESPONDENCE_CREATION_DATE) = TRUNC(P_EFFT_DATE);

    IF V_DEL_COUNT > 0 THEN
      DELETE FROM CORRESPONDENCES
        WHERE  CORRESPONDENCE_UID IN
                  (SELECT CORRESPONDENCE_UID
                     FROM   CORRESPONDENCES
               WHERE  CONTRACT_UID = V_CONTRACT_UID
                 AND TRUNC(CORRESPONDENCE_CREATION_DATE) = TRUNC(P_EFFT_DATE));
    END IF;

    -- *** Create Correspondence Row and New File Name ***
    -- *** Create new file name ***
    V_CORRESPONDENCE_UID := CORRESPONDENCES_SEQ.NEXTVAL;
    P_FILENAME_OUT       := RTRIM(LTRIM(TO_CHAR(V_CORRESPONDENCE_UID) || '.pdf'));
    V_NEW_FILE_URL       := 'http://armstorage.integritycompanies.com' || P_DIRECTORY || P_FILENAME_OUT;

    INSERT INTO CORRESPONDENCES
        (CORRESPONDENCE_UID,
         CORRESPONDENCE_TYPE,
         CORRESPONDENCE_CREATION_DATE,
         CORRESPONDENCE_CONTENT_TYPE,
         CORRESPONDENCE_IMAGE_FILE_NAME,
         CORRESPONDENCE_IMAGE_FILE_EXT,
         CORRESPONDENCE_UPDATED,
         CORRESPONDENCE_URL,
         CORRESPONDENCE_DESC,
         CONTRACT_UID)
    VALUES
        (V_CORRESPONDENCE_UID,
         'ST',
         P_EFFT_DATE,
         'application/pdf',
         P_FILENAME_OUT,
         '.pdf',
         SYSDATE,
         V_NEW_FILE_URL,
         'Contract Statement',
         V_CONTRACT_UID);

    COMMIT;

EXCEPTION
    WHEN OTHERS THEN
        DBMS_OUTPUT.PUT_LINE(SQLERRM);
        DBMS_OUTPUT.PUT_LINE(DBMS_UTILITY.FORMAT_ERROR_BACKTRACE);
        ROLLBACK;

END; 
```

有什么建议或要求吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T13:54:08.660

Proc 正在寻找我传递的参数之一，并在我无权访问的另一个表上检查它的值。如果未找到该值，则返回“null”值。检查该问题的一些标准纠正了该问题。

# c# - 截屏并转换为 Byte[]（图像比较方法）

> ID：12221808
> 
> 赞同：0
> 
> 时间：2012-08-31T20:01:39.293
> 
> 标签：c#, hash, image-conversion, image-comparison

我有一些关于图像比较的帖子，我尝试保存从屏幕捕获的图像，然后将其存储在文件系统中。

我使用转换方法将捕获的图像转换`byte[]`为以供以后使用。

然后，当我想将它与第二个屏幕截图进行比较时，我加载（保存到的文件`byte[]`）并将其与`byte[]`以相同方式转换为的新截图进行比较。

现在，当同时进行第一次捕获和第二次捕获时，在内存中，进行比较的方法很少，我想首先与其他人分享这篇文章以寻找相同的答案并让我知道：

哪个更快，我如何控制相似度的百分比？

如果选择（相等的）百分比反对最快的计算方式......我可以忽略它，尽管当性能问题不存在时我可以在其他项目中使用它，并根据其需要

这些是我知道可用于完成任务的代码

我想与您核实更快的想法，以及是否有更好的方法，无论是否有平等百分比。谢谢你。

```
static bool ByteArrayCompare(byte[] a1, byte[] a2)
{     
  IStructuralEquatable eqa1 = a1;     
  return eqa1.Equals(a2, StructuralComparisons.StructuralEqualityComparer); 
} 
```

对比

```
public enum CompareResult
{
  ciCompareOk,
  ciPixelMismatch,
  ciSizeMismatch
};

CompareResult cr = CompareResult.ciCompareOk;

byte[] hash1 = shaM.ComputeHash(btImage1);
byte[] hash2 = shaM.ComputeHash(btImage2);

//Compare the hash values
for (int i = 0; i < hash1.Length && i < hash2.Length 
                  && cr == CompareResult.ciCompareOk; i++)
{
    if (hash1[i] != hash2[i])
        cr = CompareResult.ciPixelMismatch;
} 
```

后者正在使用`System.Security.Cryptography`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T21:05:52.777

比较图像和比较字节数组/文件内容是两个不同的任务，因为图像格式可能会很谨慎。因此，假设您对字节比较感兴趣（即，如果用于捕获图像的相同代码结果应该相同）。否则，您需要搜索“比较图像”问题（例如Jensen Somers 建议的[How to compare Image objects with C# .NET? ）。](https://stackoverflow.com/questions/3384967/how-to-compare-image-objects-with-c-sharp-net/3385221#3385221)

要比较字节数组/文件，您最终需要逐字节比较字节内容。对于字节数组/文件肯定不匹配的情况，您可以优化检查以不执行任何操作，并且仅在严格必要时才进行字节比较：

*   检查尺寸是否相同
*   检查数组/文件的哈希（缓存计算的哈希值，因为每次计算哈希不会比逐字节比较快）。SHAxxxx 散列很好，但任何合理的散列函数，即使是几个随机获取的数组字节也可以。只需从数组中选择值，您就可以完全避免缓存散列。
*   如果您希望文件的不同之处多于相同，则比较固定大小的数组块（即图像的中间某处）。

如果上面说数组/文件可能与逐字节比较数组/文件相同（相同的长度/哈希/部分内容）。

# java - 正确传输和保护 Web 应用程序的用户密码

> ID：12221811
> 
> 赞同：6
> 
> 时间：2012-08-31T20:02:07.553
> 
> 标签：java, javascript, tomcat, passwords, hsqldb

我正在为我的硕士项目开发一个网络应用程序。这是一个教授管理学生项目的系统，它使用Java作为服务器端代码，使用HSQLDB作为数据库，使用JSP作为表示层，它运行在tomcat上。将存储的数据不包括任何敏感信息（学生证、财务信息等），但用户名和密码是必需的，所以我想在学生使用密码的情况下自行保护密码我的应用程序，他们用于其他更重要的应用程序（即使我告诉人们不要这样做，这无疑也会发生）。

我以前从未研究过这种事情，我很迷茫。我确实找到了一篇很好的文章，解释了如何使用 Java[创建密码哈希](http://www.devbistro.com/articles/Java/Password-Encryption)，并且我在[tomcat 文档](http://tomcat.apache.org/tomcat-7.0-doc/config/realm.html)中找到了解释如何设置在领域中使用的哈希方案以及如何[使用 tomcat 进行 SSL 的](http://tomcat.apache.org/tomcat-6.0-doc/ssl-howto.html)信息，以及用于从密码创建散列的[JavaScript 库](http://code.google.com/p/crypto-js/#SHA-2)，但我不确定如何将所有部分放在一起，以及我需要哪些部分。

如果我使用 JavaScript 库对密码进行哈希处理并使用 SSL 进行登录步骤（我认为此后没有必要，因为其他数据不需要保护），那么仅将密码的哈希版本存储在数据库中，就足够了? 还是我需要做更多的事情？我遇到了[一个问题](https://crypto.stackexchange.com/questions/760/webapp-password-storage-salting-a-hash-vs-multiple-hashes)，其中答案讨论了 PBKDF2 和其他一些事情，但这让我更加困惑......如果我应该使用这些答案中提到的方案之一，我该怎么做？我没有在 tomcat 或其他文档中看到对它们的引用，所以我不知道如何使用它们......

如果有人能消除我的困惑并告诉我安全传输和存储密码的正确方法是什么，我将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T20:05:42.130

SSL 负责保护整个传输层。您无需担心通过 HTTPS 发送的数据。

永远不要在数据库中存储真实密码。仅存储使用适当安全（即不是 MD5）哈希函数制作的盐渍哈希。为每个哈希使用不同的盐。

如果你遵循这些原则，无论你使用什么组件，你都会有一个合理的用户名/密码存储机制。

# ios - 应用商店自动提示我的应用需要 5.1 及更高版本

> ID：12221812
> 
> 赞同：0
> 
> 时间：2012-08-31T20:02:12.560
> 
> 标签：ios, app-store

我不记得在我的项目设置中指定我将仅支持 iOS 5.1 及更高版本的任何地方。我只将我的 iOS 部署目标设置为 5.0。我的应用最近开始说设备需要 5.1 或更高版本。不过我想支持5.0。如果新更新有任何我不知道的问题，请告诉我。或者，如果我无意中更改了设置此要求的内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T20:19:48.840

在 Xcode 中，单击左侧菜单顶部的项目，带有蓝图图标。在“信息”下，第一件事应该是“iOS 部署目标”。改变它。它将在您下次向商店提交更新时生效。

# c - 当我按位移动 1 << 45 时，我怎么会得到一个大整数

> ID：12221819
> 
> 赞同：1
> 
> 时间：2012-08-31T20:03:04.197
> 
> 标签：c, bit-manipulation, shift

为什么我会得到这么大的整数？

```
int ans = 1 << 45;
printf("Check: %d", ans);
return 0; 
```

查询：1858443624

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-31T20:07:14.957

这是 C 中未定义的行为。任何事情都可能发生，包括处理器异常或程序其他部分中不可预测的变化（这可能是积极的编译器优化的副作用）。

> 6.5.7/3 [...] 如果右操作数的值为负数或大于或等于提升的左操作数的宽度，则行为未定义。

[来源](https://stackoverflow.com/questions/3871650/gcc-left-shift-overflow)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T20:07:38.133

根据C标准

> 表达式移动负数或移动量大于或等于提升表达式的宽度 (6.5.7)。

是未定义的行为，因此编译器可以自由地为您在此处提供的代码做任何事情。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-31T20:07:47.193

90？没门。您需要阅读[位移位的](http://en.wikipedia.org/wiki/Bitwise_operation#Bit_shifts)作用。`1<<45` 本质上是`2^45`. 此外，`int`只有 31 位（不包括符号位），因此通过尝试移动 45 位，您会导致未定义的行为。

快速示例：

```
1 << 0  =  1  = 0x01  = 00000001b
1 << 1  =  2  = 0x02  = 00000010b
1 << 2  =  4  = 0x04  = 00000100b
1 << 3  =  8  = 0x08  = 00001000b 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-31T20:14:26.267

clang（在 X-Code 中使用；AFAIK 他们不再使用 gcc）对此很有趣：

```
stieber@gatekeeper:~$ clang Test.c -Wno-shift-count-overflow; ./a.out
Check: -1344872728
stieber@gatekeeper:~$ clang Test.c -Wno-shift-count-overflow; ./a.out
Check: -1066238232
stieber@gatekeeper:~$ clang Test.c -Wno-shift-count-overflow; ./a.out
Check: -1373126936
stieber@gatekeeper:~$ clang Test.c -Wno-shift-count-overflow; ./a.out
Check: 779153128 
```

显然，他们随机化了结果:-)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-31T20:11:47.780

1）正如大家已经说过的，答案是“未定义的行为”。

2）在实践中，几乎我熟悉的每个编译器都会给你“0”。

3）在实践中，大多数自尊的编译器也会给你一个警告：

```
x.cpp: In function `int main (int, char **)':
x.cpp:7: warning: left shift count >= width of type 
```

# ruby-on-rails - 引用本地路径的 Rails 夹具

> ID：12221820
> 
> 赞同：0
> 
> 时间：2012-08-31T20:03:07.623
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, unit-testing, fixtures

我正在使用固定装置，并且正在运行一个测试，我需要从某个人那里访问文件的 URL。我不想每次都通过互联网获取这个，所以我已经下载了文件并将它放在我的测试目录`"/test/sample/somefile.html"`中。

如何在我的夹具文件中写入本地路径，以便我可以`file_path`在我的测试中访问。

```
#BEFORE
three: 
 id: 3
 user: Joey
 file_path: http://www.google.com/somefile.html
 last_modified:

#AFTER
three: 
 id: 3
 user: Joey
 file_path: <%= "./test/sample/somefile.html" %>
 last_modified: 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T20:04:50.100

做：

```
three: 
  id: 3
  user: Joey
  file_path: <%= "#{Rails.root}/test/sample/somefile.html" %>
  last_modified: 
```

或者`RAILS_ROOT`，如果您有旧版本的 Rails，请使用。

# c++ - Boost函数赋值抛出异常

> ID：12221821
> 
> 赞同：1
> 
> 时间：2012-08-31T20:03:10.467
> 
> 标签：c++, boost, boost-function

当我尝试将一个函数 1 分配给另一个函数 1 时，Boost::function 十次中有一次抛出异常。

Task 是`boost::function1<void, void*>`.

下面是具体代码：

```
 // the Task object sent in as Task task
    void Sleeper(void* arg)
    {
        int32_t sleepTime = *(int32_t*)arg;

        SleepCurrentThread((int32_t)sleepTime);
    }

    struct ThreadInfo
    {
        ThreadInfo() : mState(DETACHED), mTask(NULL), mArg(NULL)
        { }

        ThreadState mState;
        Task mTask;
        void* mArg;
    };

    Thread::Thread(Task task, void* arg, IMemoryAllocator& allocator, ILogManager& logger) : mAllocator(allocator), mLogger(logger)
    {
        mThreadInfo = (ThreadInfo*) mAllocator.Allocate(sizeof(ThreadInfo));  // simnple heap allocation

        mThreadInfo->mArg = arg;
        mThreadInfo->mState = Thread::RUNNING;
        mThreadInfo->mTask = task;     //<--------- throws... sometimes

        mHandle = _CreateThread(&Run, (void*)mThreadInfo);
        if (!mHandle)
            Detach();

    } 
```

我专门在 boost function_template.hpp 中将其跟踪到赋值运算符，在这段代码中，它最终抛出：

```
// Assignment from another BOOST_FUNCTION_FUNCTION
    BOOST_FUNCTION_FUNCTION& operator=(const BOOST_FUNCTION_FUNCTION& f)
    {
      if (&f == this)
        return *this;

      this->clear();
      BOOST_TRY {
        this->assign_to_own(f);        // <--- throws, and then line below re-throws
      } BOOST_CATCH (...) {
        vtable = 0;
        BOOST_RETHROW;
      }
      BOOST_CATCH_END
      return *this;
    } 
```

为什么是这样？我的代码有什么容易发现的问题吗？还有什么需要的吗？

谢谢

编辑：我知道我会被要求使用 boost::threads，但我正在尝试我自己的 win32/pthread 包装器，（为了好玩）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-31T20:18:01.190

你`struct`有一个非平凡的构造函数，但你不调用它。它使`Task`成员未初始化。要初始化它，要么用 分配整个对象`new`，要么使用placement new 来初始化它，如下所示：

```
 void *mem = mAllocator.Allocate(sizeof(ThreadInfo));  // simnple heap allocation
    mThreadInfo = new(mem) ThreadInfo; // placement new

    mThreadInfo->mArg = arg;
    mThreadInfo->mState = Thread::RUNNING;
    mThreadInfo->mTask = task; 
```

Placement new 在已分配的原始（未初始化）内存中构造一个对象。

# node.js - 下一个 Node.Js 中间件

> ID：12221825
> 
> 赞同：2
> 
> 时间：2012-08-31T20:03:31.183
> 
> 标签：node.js, express

> **可能重复：**
> [很难理解 express.js 中的 'next/next()'](https://stackoverflow.com/questions/8710669/having-a-hard-time-trying-to-understand-next-next-in-express-js)

我的 app.js 中有以下代码来处理请求

```
app.get ('/' , routes.index);
require('./services/Category')(app); 
```

我有具有所需功能的类别文件，它工作正常。但是当我探索中间件概念时，每个方法中都会传递一个名为“next”的特定关键字。“下一个”是如何工作的？它携带什么？

# java - OpenCV / JavaCV 从图像中选定的四边形创建新的矩形图像

> ID：12221834
> 
> 赞同：0
> 
> 时间：2012-08-31T20:04:39.903
> 
> 标签：java, opencv, javacv

我创建了一个显示图像并让用户使用 4 个点选择此图像中的任何区域的 java 应用程序。

我现在要做的是获取这个选定的四边形并从中创建一个新的矩形图像，但 OpenCV 一直给我：*OpenCV 错误：cvPerspectiveTransform* 的 cvarrToMat中的参数错误（未知数组类型）

这是我的代码：

```
IplImage i2 = IplImage.createFrom(bTmp); 
tmpImage = new IplImage(i2.width()*i2.height());
CvMat m = CvMat.create(3, 3);

cvGetPerspectiveTransform(new float[]{0,0,20,0,20,20,0,20}, new float[]{0,0,20,0,203,20,20,203}, m);
cvPerspectiveTransform(i2, tmpImage, m); 
```

有任何想法吗？

# vba - 以编程方式在 VBA 中添加对 Outlook 2010 的引用

> ID：12221837
> 
> 赞同：2
> 
> 时间：2012-08-31T20:04:44.600
> 
> 标签：vba, outlook, outlook-2010

我有一个用于 Outlook 的宏，它部分地编辑电子邮件或日历项目的内容，这需要添加“Microsoft Word 14.0 对象库”参考。我知道如何在 Excel 中执行此操作`ActiveWorkbook.VBProject.References.AddFromGuid()`，但在 Outlook 中找不到有关执行此操作的任何信息。

是否可以？

每个 Remou 的示例代码：

```
Sub CreateNotesEmailFromAppointment()
  Dim oMeeting As AppointmentItem
  Dim oEmailTemplate As Outlook.MailItem
  Dim oEmailWordDoc As Word.Document

  If Application.ActiveInspector.CurrentItem.Class = olAppointment Then
    Set oMeeting = Application.ActiveInspector.CurrentItem
    Set oEmailTemplate = Application.CreateItemFromTemplate(PathToTemplateFile)
    oEmailTemplate.Display
    Set oEmailWordDoc = Application.ActiveInspector.WordEditor

    With oEmailWordDoc.Content.Find
        .Text = "<Date>"
        .Replacement.Text = Month(oMeeting.Start) & "/" & Day(oMeeting.Start)
        .Execute Replace:=wdReplaceAll
    End With
    'More editing and formatting of oEmailWordDoc follows'
  End If
End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T07:13:46.923

考虑后期绑定：

```
Dim wd As Object

Set wd = CreateObject("Word.Application")
wd.Visible = True
wd.Documents.Open "C:\Docs\Temp.doc" 
```

如果 Word 的实例可能正在运行：

```
On Error Resume Next
Set wd = GetObject(,"Word.Application")

If Err.Number <> 0 Then
   Set wd = CreateObject("Word.Application")
End If

wd.Visible = True 
```

这是 2002 年的，但比最近的参考更好：http: [//support.microsoft.com/kb/307216](http://support.microsoft.com/kb/307216)

不使用 word 而是使用模板的 HTMLBody 的不同方法怎么样：

```
 Dim oMeeting As AppointmentItem
  Dim oEmailTemplate As Outlook.MailItem

  If Application.ActiveInspector.CurrentItem.Class = olAppointment Then
    Set oMeeting = Application.ActiveInspector.CurrentItem
    Set oEmailTemplate = Application.CreateItemFromTemplate(PathToTemplateFile)
    oEmailTemplate.Display
    oEmailTemplate.HTMLBody = _
       Replace(oEmailTemplate.HTMLBody, "&lt;date&gt;", Month(oMeeting.Start) _
          & "/" & Day(oMeeting.Start))
  End If 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T20:18:31.117

根据我的发现，出于安全原因，Outlook VBA 不允许这样做。也许创建一个加载项将是一个解决方案。

# git - 如何使用 git stash 检索未跟踪的文件

> ID：12221842
> 
> 赞同：15
> 
> 时间：2012-08-31T20:05:03.617
> 
> 标签：git

所以我使用隐藏了一些未跟踪的文件

```
git stash --include-untracked 
```

然后切换到另一个分支。

如果我查看隐藏了哪些更改：

```
backend/infinispan-rar/pom.xml                     |   12 ++++++++++--
backend/pom.xml                                    |   13 +++++++++++--
backend/test/pom.xml                               |    3 +--
.../main/resources/com/mojiva/testDbContext.xml    |    6 +++---
data/mojiva.xml                                    |    2 +-
dbmigration/pom.xml                                |   16 ++++++++++------
.../main/resources/db/changelogs/issue-17544.xml   |    4 ++--
pom.xml                                            |   11 +++++++++++ 
```

然后我尝试使用

```
git stash pop 
```

得到这个：

```
backend/activator/effective.pom already exists, no checkout
backend/adverter/src/test/java/com/mojiva/presenter/RequestParamReplacerTest.java already exists, no checkout
backend/dao/.cpath already exists, no checkout
backend/dao/.e0 already exists, no checkout
backend/dao/PutObjectStoreDirHere/defaultStore/Recovery/TransactionStatusManager/#22#/0_ffffc0a86465_cfd2_5016b5cb_1 already exists, no checkout
backend/dao/dep.tree already exists, no checkout
backend/feeds-test/.e0 already exists, no checkout
backend/feeds-test/dep.tree already exists, no checkout
data/wurfl-patch.xml already exists, no checkout
run/linksDB.log already exists, no checkout
run/linksDB.properties already exists, no checkout
run/linksDB.script already exists, no checkout
Could not restore untracked files from stash 
```

请注意，没有一个文件是相同的？

这里发生了什么？

谢谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2018-02-20T09:56:11.443

从下面提到的关于如何应用使用`-a`而不是创建的存储的博客中`-u`：

找到 stash 的提交：

```
git log --graph --all --decorate --oneline 
```

一探究竟

```
git checkout <sha> 
```

重置父级：

```
git reset HEAD~1 
```

创建一个干净的存储：

```
git stash -u 
```

您现在可以结帐`master`并应用新的存储。

[https://blog.tfnico.com/2012/09/git-stash-blooper-could-not-restore.html#](https://blog.tfnico.com/2012/09/git-stash-blooper-could-not-restore.html#)！

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-05-09T14:53:20.923

我今天做了完全相同的事情，但没有找到有用的帮助。所以我做了这个技巧：

*   `git checkout stash`

这将创建一个临时分支。然后你可以在它上面应用存储。

*   `git stash apply`

*   手动将所有更改的文件复制到安全的地方。

*   忽略临时分支并结帐到原始分支。

*   将文件粘贴到您最初找到它们的位置。

完毕。

这个问题很老了。但答案可能会帮助像我这样的人。所以...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-10-10T14:31:10.120

Git 2.34 处理导致“无法从存储中恢复未跟踪文件”的另一种情况：

" [`git stash`](https://github.com/git/git/blob/4a6fd7d3c7d135f7be43c3ecc534c4487b21c1ec/Documentation/git-stash.txt)" ^(( [man](https://git-scm.com/docs/git-stash) ))，其中暂定更改涉及将目录更改为文件（反之亦然），令人困惑，已在 Git 2.34（2021 年第四季度）中更正。

请参阅[Elijah Newren ( ) 的](https://github.com/newren)[commit bee8691](https://github.com/git/git/commit/bee8691f197ae6b74ca26081c1a3fa218e2b9db7)、[commit 3d40e37](https://github.com/git/git/commit/3d40e3723b1bc86d22136ff01b0787809a3267a4)、[commit 4dbf7f3](https://github.com/git/git/commit/4dbf7f30b1d6469474d6a7e6759c9f84d305b95c)（2021 年 9 月 10 日[）](https://github.com/newren)。^(（由)^([Junio C Hamano 合并](https://github.com/gitster))^([——](https://github.com/gitster))^在^([提交 4a6fd7d](https://github.com/git/git/commit/4a6fd7d3c7d135f7be43c3ecc534c4487b21c1ec))^(中，2021 年 10 月 3 日）)[`newren`](https://github.com/newren)
^([`gitster`](https://github.com/gitster))

> ## [`stash`](https://github.com/git/git/commit/bee8691f197ae6b74ca26081c1a3fa218e2b9db7): 恢复跟踪的文件后恢复未跟踪的文件
> 
> ^(签字人：以利亚·纽伦)

> 如果用户删除一个文件并在其中放置一个未跟踪文件的目录，然后隐藏所有这些更改，则在删除路径中的相应文件之前，无法恢复未跟踪的文件目录。
> 因此，请在恢复未跟踪文件之前恢复对跟踪文件的更改。
> 
> 用户删除未跟踪的文件然后在其位置添加已跟踪的文件时，无需担心相应的问题。
> Git 不跟踪未跟踪的文件，因此不会知道未跟踪的文件已被删除，因此将无法隐藏该文件的删除。

* * *

在 Git 2.35（2022 年第一季度）之前，“ [`git stash apply`](https://github.com/git/git/blob/6e223455917954f414cea98b00b67aac91e2b619/Documentation/git-stash.txt#L110)” ^(（[man](https://git-scm.com/docs/git-stash#Documentation/git-stash.txt-apply--index-q%7C--quietltstashgt)）)在无法恢复对跟踪文件的更改时忘记尝试恢复未跟踪文件。

请参阅[Elijah Newren ( ) 的](https://github.com/newren)[commit 71cade5](https://github.com/git/git/commit/71cade5a0b172ece7edf0ccb4420dd5b9a07e71a)（2022 年 1 月 4 日[）](https://github.com/newren)。^(（由)^([Junio C Hamano 合并 --](https://github.com/gitster)) ^([--](https://github.com/gitster))^在^([提交 6e22345](https://github.com/git/git/commit/6e223455917954f414cea98b00b67aac91e2b619))^(中，2022 年 1 月 10 日）)[`newren`](https://github.com/newren)
^([`gitster`](https://github.com/gitster))

> ## [`stash`](https://github.com/git/git/commit/71cade5a0b172ece7edf0ccb4420dd5b9a07e71a)：在恢复未跟踪的文件之前不要返回
> 
> ^(报告人：AJ Henderson)
> ^(测试案例：Randall S. Becker)
> ^(签字人：Elijah Newren)

> 在[提交 bee8691](https://github.com/git/git/commit/bee8691f197ae6b74ca26081c1a3fa218e2b9db7)（“ `stash`：在恢复跟踪的文件后恢复未跟踪的文件”，2021-09-10，Git v2.34.0-rc0 --[批次 #10](https://github.com/git/git/commit/0785eb769886ae81e346df10e88bc49ffc0ac64e)中列出的[合并](https://github.com/git/git/commit/4a6fd7d3c7d135f7be43c3ecc534c4487b21c1ec)）中，我们正确地确定我们应该在尝试之前恢复对跟踪文件的更改恢复未跟踪的文件，并相应地将用于恢复未跟踪文件的代码移到. 不幸的是，中间行有一些早期的返回语句，这意味着我们在某些情况下突然停止恢复未跟踪的文件。`do_apply_stash()`
> 
> 甚至在上一次提交之前，当前代码还存在另一个可能的问题——当我们遇到冲突（或其他错误条件）时，本应在恢复存储后运行的 post-stash-apply ' [`git status`](https://github.com/git/git/blob/71cade5a0b172ece7edf0ccb4420dd5b9a07e71a/Documentation/git-status.txt)' ^(( [man](https://git-scm.com/docs/git-status) ))被跳过)，这似乎有点不一致。
> 
> 通过保存返回状态并让其他功能在返回之前运行来解决这两个问题。

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-08-31T20:07:07.430

您应该忽略日志和其他不是源代码的文件。无论哪种方式，您都可以添加`--force`以覆盖它们。

您的情况是，您隐藏的文件在弹出时将尝试覆盖您在工作文件夹中已有的文件。如果你在那里有重要的工作，git 会安全地进行，不会盲目地覆盖它们。

最好的建议是清理您的设置：

1.  将不是源代码的文件（如日志文件）添加到您的`.gitignore`文件中。
2.  配置文件应该有抽象的连接字符串，这样它们就不会在每次切换分支或环境时发生变化（在不同的机器上使用 repo）。请参阅 progit.org/book 中 git 属性一章中的涂抹/清洁脚本。

如果您是新手，请在 webchat.freenode.net 上保持#git IRC 频道开放 :)

# jpa - Websphere App Server 7、EJB 3.0、OpenJPA EntityExistsException 上的 JMS JPA 并发问题

> ID：12221843
> 
> 赞同：3
> 
> 时间：2012-08-31T20:05:07.360
> 
> 标签：jpa, jms, ejb-3.0, openjpa

用例是发送 JMS 消息的设备，其中包含由 MDB 处理的 GPS 信息。如果数据库中不存在设备，则创建/插入它并创建/插入 GPS 记录。当消息在发送时得到处理时，一切正常。当来自同一设备的消息在彼此之间建立并在几毫秒内处理时，就会出现此问题。在另一个 JMS 进程检查实体（并且它不存在）和尝试插入实体（并且它已经存在）的时间之间，似乎存在一个 JMS 消息进程插入实体的竞争条件。

该进程正在尝试多次插入设备实体，因为在某些时候该进程发现不存在任何记录。引发以下异常，因为该记录已由正在处理的先前消息插入。我尝试将 IsolationLevels 更改为 SERIALIZABLE 的每个值，但没有成功。任何想法将不胜感激！WAS 7、OpenJPA 2.0.2、EJB3.0

```
[8/30/12 11:14:01:319 EDT] 0000002a RegisteredSyn E   WTRN0074E: Exception caught
  from before_completion synchronization operation:
  <openjpa-2.0.2-SNAPSHOT-r422266:1295351 fatal store error>
  org.apache.openjpa.persistence.EntityExistsException: The transaction has been
  rolled back. See the nested exceptions for details on the errors that occurred.

Caused by: <openjpa-2.0.2-SNAPSHOT-r422266:1295351 fatal store error>
  org.apache.openjpa.persistence.EntityExistsException: ORA-00001:
  unique constraint (SPW_OWN.PK_DEVICE) violated 
```

执行此过程的 SSB 片段：

```
 Device device = deviceManager.findDeviceByDeviceI(deviceString);

                //check to see if device entity exists
                if(device == null){
                    Log.logDebug(this, "device " + deviceString +" is null");

                    device.setDeviceI(deviceString);

                    //tried both create and update with no luck
                    //deviceManager.createDevice(device);

                    deviceManager.updateDevice(device);
                } 
```

JPA 单边带：

```
@Action(Action.ACTION_TYPE.UPDATE)
public String updateDevice(Device device) throws Exception {
    EntityManager em = getEntityManager();
    try {
        device = em.merge(device);
    } finally {
        em.close();
    }
    return "";
} 
```

做一些测试，我找到了一份体面的工作，尽管我仍然不是 100% 满意。欢迎任何其他建议：

*   将 JMS MDB 设置为 Bean Managed 事务类型，并将其他后续 SSB 保持在 Container 模式，以便我仍然可以管理 Container 以进行回滚的实际数据操作。
*   在 MDB 中设置编程阈值以重试和处理消息 X 次。
*   调用 SSB 时捕获 EJBTransactionRolledbackException（由 EntityExistsException 引起）
*   使用阈值再次重试处理消息（在我的情况下第二次成功，因为之前的事务已提交，重试发现实体存在并成功处理消息）
*   我以编程方式设置了我的阈值，以在将消息发送到错误队列之前尝试处理消息两次。

我通常不喜欢使用异常捕获作为控制流。我还想象有一种方法可以将 JMS MDB 保持为容器管理事务并让 Java EE 服务器重新处理消息。

# arrays - 如何在 Coldfusion 中访问二维数组中的元素？

> ID：12221844
> 
> 赞同：3
> 
> 时间：2012-08-31T20:05:08.290
> 
> 标签：arrays, loops, coldfusion, 2d

我正在运行`Coldfusion8`并且正在努力访问我设置的数组。

我的数组设置如下：

```
Application.strConfig.respH = arrayNew(2);
Application.strConfig.respH[1][1] = "s";
Application.strConfig.respH[1][2] = 127;
Application.strConfig.respH[2][1] = "m";
Application.strConfig.respH[2][2] = 230;
... 
```

结果是：

```
RESPH:  
[array]
1) [array]
    1) s 
    2) 127  
2) [array]
    1) m 
    2) 230 
```

我需要根据我在页面上获得的大小来获取默认数字。因此，例如，当我结束时，`m`我需要`respH`获取`m`. 现在我正在尝试这个：

```
 <cfscript>
 LOCAL.runner = "s,m,l,xl"; 
 LOCAL.lt = ListGetAt(LOCAL.runner, LOCAL.i, ",");
 LOCAL.height = Application.strConfig.respH[ LOCAL.lt ];
 </cfscript> 
```

这样做，Coldfusion 抱怨道`The value m cannot be converted to a number`。

**问题**：
如何访问`strConfig`对象中的元素？

感谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T20:29:52.760

（来自评论......）

如果您需要通过特定键查找数据，请不要使用数组。使用结构。对于数组，您必须循环查找匹配的键。（CF9+支持`ArrayFind`）

# javascript - 移动 Safari、jQuery 和绑定到未来的 DOM 元素

> ID：12221848
> 
> 赞同：3
> 
> 时间：2012-08-31T20:05:28.673
> 
> 标签：javascript, jquery, ios, html, mobile-safari

我有一个为汽车仪表板显示单元构建的 HTML5/JavaScript 应用程序，我被要求移植到浏览器中运行。

简单的任务，做了一些简单的更改，现在在我尝试过的每个桌面浏览器中一切正常。

然后，问题来了。出于演示目的，我被要求特别确保它可以在 iPad 上运行。

**问题：**

该应用程序使用单页导航，当用户导航到不同的“屏幕”时，使用 jQuery.load 加载必要的页面片段。然而，所有的 jQuery 绑定都集中在一个地方，因此它们在应用程序启动时执行，即使它们绑定的元素可能还不存在于 DOM 中。

使用 jQuery.live 或 .on 很好，因为它们允许绑定到未来的 DOM 元素。至少在桌面浏览器中。

在 Mobile Safari 中，.live/.on 根本不适用于绑定到尚不存在的元素。

我有一个例子来说明这个问题：http: [//dhines.com/jquery-test/](http://dhines.com/jquery-test/)

请注意，所有“应该工作”链接都可以在桌面浏览器中使用，但在 Mobile Safari 中则不行！

环顾网络和 SO，我发现的唯一解决方案是将 onclick="function(){}" 添加到我的所有可点击元素中。这似乎很愚蠢。

我看到的另一个选择是分散我的绑定并让它们发生在它们适用的特定片段上，但是考虑到大量的片段和绑定，这不会很有趣。

看看我的例子，谁能给我一个更好的解决方案？或者也许指出我是否使用 .load 不正确或什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T21:34:16.337

我无法对此进行测试（我没有苹果产品），但是我发现了关于 jquery 票证系统的讨论：

[http://bugs.jquery.com/ticket/5677#comment:7](http://bugs.jquery.com/ticket/5677#comment:7)

诀窍似乎是将 { cursor : pointer } 添加到我已经看到您的示例未定义此 css 属性的元素。试试这个...

也许 Apple Safari 开发人员认为单击事件对没有 curosr:pointer 的元素没有意义。

# windows - 如何在 Windows 7 上更新 OpenSSL？

> ID：12221854
> 
> 赞同：4
> 
> 时间：2012-08-31T20:05:45.217
> 
> 标签：windows, openssl, cygwin

我正在使用 Windows 7 x64 并且在我的 cgywin 提示符中我可以运行

```
$ openssl version
OpenSSL 0.9.8e 23 Feb 2007 
```

并查看当前版本。我想将此更新到最新版本，但找不到有关如何执行此操作的官方资源。最简单的方法是什么？我希望他们的命令行我可以在同一个窗口中使用。

谢谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-31T22:17:23.710

要升级 Cygwin 的 openssl，您只需运行安装程序并选择较新的版本。Cygwin 的网站声明如下：

> setup.exe 实用程序会跟踪所有已安装组件的版本，并提供用于安装或更新此站点上为 Cygwin 提供的所有内容的机制。

升级步骤如下：

1.  转到[Cygwin 的站点](http://cygwin.com/install.html)并下载[setup.exe](http://cygwin.com/setup.exe)。
2.  **运行 setup.exe**并单击下一步，直到您点击“选择包”页面。
3.  在搜索框中键入要升级的包 (openssl)。
4.  选择要安装的版本。
5.  单击下一步并等待它安装/下载它。

![Cygwin OpenSSL 安装](../Images/57a079baff0e6ea3f516d14c9e46ac4b.png)

安装/升级完成后，您应该能够使用以下命令在 Cygwin 中看到新版本：

```
$ openssl version
OpenSSL 1.0.1c 10 May 2012

$ which openssl
/usr/bin/openssl 
```

您也可以从源代码构建 Openssl，但我从未尝试过。我认为 Cygwin 处理安装/升级是有原因的。

此外，可以在没有 Cygwin 的情况下使用以下位置的二进制文件之一安装 OpenSSL：http: [//slproweb.com/products/Win32OpenSSL.html](http://slproweb.com/products/Win32OpenSSL.html)

# tsql - TSQL 变量和游标范围

> ID：12221857
> 
> 赞同：0
> 
> 时间：2012-08-31T20:06:04.420
> 
> 标签：tsql, cursor, sybase

我想在条件变量上创建一个游标，以下是一个简短的片段：

```
DECLARE
  @my_var VARCHAR(8)

SET @my_var = (some value is obtained and set for @myvar)

DECLARE my_cursor CURSOR FOR
  SELECT
    my_cols
  FROM
    my_table
  WHERE
    some_col < @my_var 
```

在声明游标之前，我需要从变量中获得的条件`@my_var`，但 Sybase 抱怨`DECLARE CURSOR`必须在它自己的批处理中。但是，如果我在`GO`之前放置 a ，`DECLARE CURSOR`则该变量`@my_var`将超出范围。

如何解决此范围界定问题？

导致问题的部分代码：

```
DECLARE
  @threshold_date VARCHAR(8),
  @retain_period INT

SET @retain_period =
(
  SELECT
    RETAIN_PERIOD
  FROM
    ARCHIVE_RETAIN_PERIOD
)
IF(@retain_period > 0)
  SET @retain_period = @retain_period * -1

SET @threshold_date = CONVERT(VARCHAR(8), DATEADD(DAY, @retain_period, GETDATE()), 112)

DECLARE archive_cursor CURSOR FOR
  SELECT
    TIMESTAMP,
    TIMESTAMP_GRP,
    CL_ORDER_ID,
    CL_ORDER_GROUP_ID,
    CL_PARENT_CHILD,
    CL_PARENT_ORDER_ID,
    CL_NUM_CHILDREN,
    CL_PRIMARY_STATE,
    CL_SECONDARY_STATE,
    CL_PENDING_CHANGE,
    CL_QUANTITY_FILLED,
    CL_QUANTITY_FILLED_HOUSE,
    CL_QUANTITY_FILLED_BROKER,
    CL_QUANTITY_FILLED_CLIENT,
    CL_QUANTITY_REMAINING,
    CL_NUM_EXECUTIONS,
    CL_CHILD_QUANTITY,
    CL_CHILD_QUANTITY_REMAINING,
    CL_GROSS_AVG_PRICE,
    CL_GROSS_AVG_PRICE_HOUSE,
    CL_GROSS_AVG_PRICE_BROKER,
    CL_QUANTITY_BOOKED,
    CL_BOOKING_PRICE,
    COMPLETION_REASON,
    COMMISSION,
    SALES_CREDIT,
    MARKUP,
    ROUTED_COUNTERPARTY_ID,
    CURRENT_EXECUTOR_ID,
    LAST_EXECUTOR_ID,
    RETAINED_EXECUTOR_ID,
    ROUTED_TO,
    RETAINED_SERVICE_ID,
    UPDATE_COUNT,
    UPDATE_USER,
    UPDATE_DATE,
    TRADER_MANAGED
  FROM
    my_db
  WHERE
    TIMESTAMP < @threshold_date
  AND
    CL_PRIMARY_STATE = "C"
GO 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T20:47:02.893

这一点让我有点疑惑：

```
IF(@retain_period > 0)
    SET @retain_period = @retain_period * -1 
```

认为它可能需要

```
IF @retain_period>0 THEN
    SET @retain_period=@retain_period *-1;
END IF 
```

这可能会使事情变得混乱并给您错误消息。

**编辑**每天学习新东西：多行 IF-THEN 必须以 Sybase 中的两个字 END IF 结尾：

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T20:55:36.727

```
SET @retain_period =
(
  SELECT
    ABS(RETAIN_PERIOD) * -1
  FROM
    ARCHIVE_RETAIN_PERIOD
) 
```

只是说。

# php - 使用jquery动态加载textarea

> ID：12221859
> 
> 赞同：0
> 
> 时间：2012-08-31T20:06:14.263
> 
> 标签：php, javascript, jquery, sql, database

如何在输入文本字段（文章 ID）中动态加载文章（文本区域）？我想检查我的数据库中的 ID 并加载与之关联的文章。你们能给我举个例子吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T20:14:56.470

如果可能，请使用 ajax。

```
<textarea id="id_name"></textarea>

<script>
jQuery(function(){
    jQuery.ajax({
        url: "content_page.jsp", // .php or whatever file you are using
        method: "GET",
        success: function(data){
            jQuery("textarea#id_name").val(data);
        }
    }); 
});

</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T20:19:26.057

改进版

```
<textarea id="id_name"></textarea>

<script>
$(document).ready(function(){
    $.ajax({
        url: "content_page.php",
        method: "GET",
        success: function(data){
                 $("textarea#id_name").val(data);
         }
    }); 
});

</script> 
```

有关此[http://api.jquery.com/ready/的更多信息](http://api.jquery.com/ready/)

# java - GNU JavaMail：没有地址提供者：rfc822

> ID：12221863
> 
> 赞同：1
> 
> 时间：2012-08-31T20:06:36.667
> 
> 标签：java, ant, jakarta-mail

使用 OpenJDK 1.7.0 和 GNU JavaMail 1.1.2。

在实际的消息发送调用期间：

```
SMTPTransport.send(msg); 
```

有时候是这样的：

```
javax.mail.NoSuchProviderException: No provider for address: rfc822
    at javax.mail.Session.getTransport(Session.java:641)
    at javax.mail.Transport.doSend(Transport.java:149)
    at javax.mail.Transport.send(Transport.java:75) 
```

Transport.send(msg) 产生相同的结果。

我很确定我的类路径没问题。以下是它在 JAR 任务的 build.xml 中的定义方式：

```
<zipfileset src="${sys}/inetlib.jar" includes="**/*.java **/*.class"/>
<zipfileset src="${sys}/gnumail-providers.jar" includes="**/*.java **/*.class"/>
<zipfileset src="${sys}/gnumail.jar" includes="**/*.java **/*.class"/> 
```

其中 ${sys} 是 /usr/share/java。我是否必须接受它并使用 Oracle JavaMail API？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-08-20T15:37:54.477

我遇到了和你一样的问题，碰巧是罐子`geronimo-javamail_1.4_spec`把事情搞砸了。一个简单的解决方案是将其从依赖项中排除。使用 Maven，假设它是 CXF 的依赖项：

```
<dependency>
  <groupId>org.apache.cxf</groupId>
  <artifactId>cxf-rt-core</artifactId>
  <version>2.7.5</version>
  <exclusions>
    <exclusion>
      <groupId>org.apache.geronimo.specs</groupId>
      <artifactId>geronimo-javamail_1.4_spec</artifactId>
  </exclusion>
  </exclusions>
</dependency> 
```

至于确切原因，我没有花时间进一步调查。这肯定是一个多线程安全错误（当多个线程同时使用 SMTP 时，我得到了它）。

解决方案的原始参考[here](http://www.devsumo.com/technotes/2014/03/javamail-random-nosuchproviderexception-errors-sending-smtp-mail/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T21:32:42.147

看起来您的程序正在尝试将 rfc822 设置为要用于传输层的域地址。这是一个有效的地址吗？我建议在您的代码中搜索此参考，因为问题无疑是在该区域周围。

# android - 为什么我包含的布局的标签返回 null？

> ID：12221865
> 
> 赞同：3
> 
> 时间：2012-08-31T20:07:06.667
> 
> 标签：android, android-layout, include

使用以下布局，`getView(R.id.included).getView(R.id.text_view)`计算结果为`null`。如果我包围`TextView`在一个`LinearLayout`问题消失了。这里发生了什么？

**`layout.xml`**

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
   android:layout_width="fill_parent"
   android:layout_height="fill_parent">
   <include android:id="@+id/included"
      layout="@layout/included" />
</LinearLayout> 
```

**`included.xml`**

```
<?xml version="1.0" encoding="utf-8"?>
<TextView
   android:id="@+id/text_view"/> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-31T20:07:32.487

`<include>`没有完全[有据可查](http://developer.android.com/training/improving-layouts/reusing-layouts.html)。

托诺拜[写道](http://code.google.com/p/android/issues/detail?id=36918#c3)：

`<include>`标签不是真实的视图，所以不会`findByView`找到它。该`@id`属性（以及您在包含标签上设置的任何其他属性）改为应用于包含布局的根标签。所以你`activity.getView(R.id.included1)`实际上应该是`<TextView>`它本身。

# javascript - 如何使用 jQuery 插件参数变量

> ID：12221871
> 
> 赞同：0
> 
> 时间：2012-08-31T20:07:26.597
> 
> 标签：javascript, jquery, jquery-plugins

我正在尝试构建一个相当基本的 jQuery 插件（主要是出于学习原因），在添加该方法之前我没有出现错误`limit`，这看起来很简单，但是我在控制台中收到以下错误

> 未捕获的 ReferenceError：未定义限制

它适用于下面的第二种 if 方法（标有注释）

```
$.fn.query = function(params) {

    // Parameters //
    var options = $.extend({
        'shuffle' : false,
          'limit' : undefined
    }, params),
        output = this;

    // Shuffle //
    if (shuffle) {
        output = shuffle(this);
    }

    // Limit // !!!ERROR!!! //
    if (limit !== undefined) {
        output = output.slice(0, limit);
    }

    return output;
}; 
```

然后运行插件

```
var query = $(example).query({
    shuffle: true,
    limit: 5
}); 
```

我试图遵循所有最佳实践，但如果您发现任何奇怪之处，请告诉我。

这是一个包含所有代码的 jsFiddle，您可以在控制台中看到错误。

> [http://jsfiddle.net/JamesKyle/CfXhw/](http://jsfiddle.net/JamesKyle/CfXhw/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-31T20:11:45.173

`options.`在限制前面添加。

```
options.limit 
```

[http://jsfiddle.net/JamesKyle/UWDsz/](http://jsfiddle.net/JamesKyle/UWDsz/)

您正在创建一个对象，因此为了访问它，您可以使用按句点分隔的对象和变量名称`object.variable`

更正了 jQuery 代码：

```
$.fn.query = function(params) {

    // Parameters //
    var options = $.extend({
        'shuffle' : false,
          'limit' : undefined
    }, params),
        output = this;

    // Shuffle //
    if (options.shuffle) {
        output = shuffle(this);
    }

    // Limit // !!!ERROR!!! //
    if (options.limit !== undefined) {
        output = output.slice(0, options.limit);
    }

    return output;
}; 
```

# ruby-on-rails - 如何在 ruby rails 中的两个日期之间进行搜索？

> ID：12221873
> 
> 赞同：0
> 
> 时间：2012-08-31T20:07:30.947
> 
> 标签：ruby-on-rails, ruby, jruby

好的，所以我需要进行设置如下的搜索：

从：（搜索字段）到：（搜索字段）

它只需要显示等于或介于这些字段之间的日期。我该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-31T20:09:13.637

这是写在[Rails 指南](http://guides.rubyonrails.org/active_record_querying.html#pure-string-conditions)中，第 2.2.1 段：

```
Client.where("created_at >= :start_date AND created_at <= :end_date", {:start_date => params[:start_date], :end_date => params[:end_date]}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T21:00:08.617

你可以像下面这样写条件，

User.where("created_at >= ? and end_date <= ?",from_date, end_date),
from_date,end_date --> 你需要的 from_date 和 end_date 存储在变量中

希望能帮助到你！！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-01T00:21:22.547

您可以使用范围进行这种搜索。例如：

`User.where(registred_at: from_field..to_field)`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-07T17:47:53.110

首先在 form_tag 搜索中设置您的参数

```
= form_tag foo_path(@foo), :method => :get do
  = text_field_tag :start_date, params[:start_date]
  = text_field_tag :end_date, params[:end_date]
  = submit_tag "Search", :class => "btn btn-primary" 
```

最重要的是在控制器中设置参数的定义，如果您的搜索在索引中

```
def index
  @foos = Foo.all
  if params[:start_date].present?
    start_date = Date.parse(params[:start_date])
    @foos = @foos.where("foo.foo_date >= ?", start_date)
  end
  if params[:end_date].present?
    start_date = Date.parse(params[:end_date])
    @foos = @foos.where("foo.foo_date >= ?", end_date)
  end
end 
```

# javascript - 使用 javascript 的 iOS 5 加速度计数据

> ID：12221880
> 
> 赞同：1
> 
> 时间：2012-08-31T20:08:29.637
> 
> 标签：javascript, ios, web, accelerometer

在 iOS 4.2+ 中，我们曾经能够在 javascript 中调用 accelerationIncludingGravity 来访问加速度计数据，但是，它在我的 iPad 上的 iOS 5.1.1 中不再工作了。这是正常的吗？有什么解决方法吗？

曾经工作的代码：

```
 window.addEventListener('devicemotion', function (e) {
        x1 = e.accelerationIncludingGravity.x;
        y1 = e.accelerationIncludingGravity.y;
        z1 = e.accelerationIncludingGravity.z;          
    }
    , false); 
```

# php - $_SERVER['REMOTE_ADDR'] 可信吗？

> ID：12221881
> 
> 赞同：5
> 
> 时间：2012-08-31T20:08:32.343
> 
> 标签：php, networking

> **可能重复：**
> [在 PHP 中检索用户正确 IP 地址的最准确方法是什么？](https://stackoverflow.com/questions/1634782/what-is-the-most-accurate-way-to-retrieve-a-users-correct-ip-address-in-php)
> [$_SERVER['REMOTE_ADDR'] 总是 isset() 吗？](https://stackoverflow.com/questions/8187714/is-serverremote-addr-always-isset)

那么，我想知道是否`$_SERVER['REMOTE_ADDR']`总是包含http请求的发送者的IP？不管它是代理、vpn 还是真实的客户端 IP，这个 var 是否总是包含有效的 IP 地址，或者它是否可以由客户端以任何方式更改？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T20:10:02.773

根据接收请求的服务器，它将始终包含请求来自的 IP 地址。

含义：如果请求来自防火墙/NAT/代理后面的计算机，则内容将是防火墙/NAT/代理的内容。

# redis - SO post如何用redis写？

> ID：12221882
> 
> 赞同：7
> 
> 时间：2012-08-31T20:08:37.953
> 
> 标签：redis

我在想如何使用redis实现stackoverflow。最困难的部分是我应该如何发表评论并以一种我不会循环的方式来获得每条评论的支持。我决定修改二进制块。UVComment 有点复杂。

每次我考虑使用哈希时，我最终都会使用集合或列表。我对redis很陌生，所以如果我犯了错误我不会感到惊讶。这是精心设计的吗？

###  CreatePost/Question（除了设置了标志并且答案中的标签为空外，其他情况相同

```
postId=incr postCount
MULTI
rpush p:postId bin[IsQuestion,authorId,title,body,tags,datetimestamp]
foreach tag in tags
    sadd tags:tag postId
EXEC 
```

###  更新帖子/问题

```
WATCH p:postId  //dont want a new revision in the meantime
old=lrange p:postId -1 -1 //current but now old
MULTI
rpush p:postId bin[IsQuestion,authorId,title,body,tags,datetimestamp] //new revision
foreach tag in old.tags
    srem tags:tag postId
foreach tag in tags
    sadd tags:tag postId
EXEC 
```

###  赞成/反对的帖子

```
//up
sadd pUV:postId user
srem pDV:postId user
//down
sadd pDV:postId user
srem pUV:postId user
//undo up/down
srem pUV:postId user
srem pDV:postId user 
```

###  评论：

```
commentId=incr commentCount
multi
SET comment_post:commentId postId //for later use when we flag comments. We'll need to know where in the db it is
RPUSH post_comment:postId bin[authorId,text,HasBeenEdited,datetimestamp,commentId, UVCount]
exec 
```

###  紫外线评论

```
watch commentUV:commentId
res=SISMEMBER commentUV:commentId userId
if res>0 //already upvoted
    unwatch
    return
watch post_comment:postId
lrange post_comment:postId 0 -1 //then we find which index matches our commentId
//modify UVCount
MULTI
lset post_comment:postId targetIndex modifiedData
sadd commentUV:commentId userId
EXEC 
```

### 获取邮政逻辑

```
lrange p:postId -1 -1 //current revision
scard pUV:postId
scard pDV:postId
comments=lrange post_comment:postId 0 -1 //get all comments 
```

# java - 什么警告“找不到 Web 服务端点”？

> ID：12221884
> 
> 赞同：1
> 
> 时间：2012-08-31T20:08:53.227
> 
> 标签：java, soap, jaxb

```
@WebService(targetNamespace = "http://ekokontrol.lenobl.smev.ru", name="Ekokontrol")
@SOAPBinding(style=SOAPBinding.Style.RPC, use=SOAPBinding.Use.LITERAL)
public interface EkokontrolIF {

    @WebMethod(operationName="inspection", action="urn:inspection")
    @WebResult(name="return")
    public BaseMessageType inspection(
        @WebParam(name="request")BaseMessageType requestBaseMessage);

} 
```

> [annotationProcessing] 将 1 个源文件编译到 /home/sabo/workspace/ekokontrol/build/classes [annotationProcessing] 警告：找不到 Web 服务端点
> 
> [annotationProcessing] 1 个警告

```
@WebService(endpointInterface = "ekokontrol.server.EkokontrolIF")
public class EkokontrolImpl {
...
} 
```

什么警告“找不到 Web 服务端点”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T08:05:25.433

```
@WebService(endpointInterface = "ekokontrol.server.EkokontrolIF")  
public class EkokontrolImpl implements EkokontrolIF {
...
} 
```

# html - 通过不同的缩放级别排列不同大小的 div

> ID：12221892
> 
> 赞同：0
> 
> 时间：2012-08-31T20:09:16.610
> 
> 标签：html, css

这是我正在做的一个例子：http: [//jsfiddle.net/wFjXD/](http://jsfiddle.net/wFjXD/)

在某个缩放级别（我机器上的默认值）下，前 2 个 div 与后 10 个 div 具有相同的宽度。

这是因为我以像素为单位设置宽度，每个小 div 的宽度为 20px，边框为 1px。较大的 div 的宽度为 108 px，这使得每个长 div 与 5 个小 div 对齐。

问题是，如果您在浏览器中使用 ctrl + 或 ctrl - 放大或缩小，所有这些都会发生变化，并且 div 将不再对齐。

是否有 css 修复以通过不同的缩放级别保持相同的相对大小？还是有另一种最佳实践方式来完成我想做的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T20:26:09.440

如果您希望*比例*保持不变，请使用`%`而不是`px`. 对于你的问题，这是我能想到的最好的。尽管它必须是固定数量的孩子，并且您必须适当地包装它们。

给你一个[想法](http://jsfiddle.net/wFjXD/13/)...

# android - 旧版 Android API 未出现在 SDK 管理器中

> ID：12221893
> 
> 赞同：0
> 
> 时间：2012-08-31T20:09:17.313
> 
> 标签：android, android-sdk-2.3

我最近尝试安装 API 13，这是我最近下载的一个流行的 android 库项目所需要的。令我沮丧的是，当我运行 SDK Manager 时，我没有看到 API 13 或其他几个。我做了一些谷歌搜索，发现一些关于在运行 eclipse 时运行 SDK Manager 的问题的帖子，所以我关闭了 eclipse 并自己运行了 SDK Manager，只是为了达到相同的结果 - API 13 和其他几个较旧的 API 没有出现。我还选中和取消选中了更新、已安装和过时复选框，以及选项中的“强制 https 源使用 http”框，但没有任何运气。

我目前已经安装了 API 2.3、4.0.x 和其他一些。我过去常常看到这些较旧的 API。它们是否已从下载站点中删除？或者是否可以手动安装这些 API，即下载它们并将它们复制到 androidsdk 文件夹？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T20:19:00.023

尝试更新您的 SDK。如果这不起作用，请检查以确保您的 AVD 指向您当前的 SDK 文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-29T14:02:07.183

只需确保在 Android SDK 管理器底部的 Obsolete 选项上有一个勾号。祝你好运

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-11T13:29:02.783

在我的情况下，如果您打开 sdk 管理器并单击它，问题是“弃用” `Packages/Show Obsoletes Packages`，就是这样，将出现 api 级别 14（在我的情况下）。

# php - 您如何对单个 Skydrive 帐户进行身份验证而不要求用户提供凭据？

> ID：12221896
> 
> 赞同：5
> 
> 时间：2012-08-31T20:09:39.620
> 
> 标签：php, oauth-2.0, onedrive

我有一个客户想使用 SkyDrive 作为网站的云存储。该网站**不会**要求该网站的用户提供他们的 SkyDrive 帐户以向他们展示他们的文件，而是该网站的所有者将在 SkyDrive 中存储一些文件，并希望与登录到其网站的用户共享这些文件。我的问题是，如何直接从网站的后端 PHP 代码向 SkyDrive API 发送凭据？

Live Connect ( [http://msdn.microsoft.com/en-us/library/live/hh243647.aspx](http://msdn.microsoft.com/en-us/library/live/hh243647.aspx) ) 上的 API 文档似乎专注于向用户提供登录表单以将用户的凭据发送到服务。再说一次，这不是我想要的。该网站的用户无需执行任何操作，只需转到该页面，他们将看到从 SkyDrive 帐户镜像的文件。凭据应存储在服务器上，并在用户请求页面时发送。

我问了一个关于 Google Docs 的类似问题（[How do I connect to the Google Calendar API without the oAuth authentication?](https://stackoverflow.com/questions/8995451/how-do-i-connect-to-the-google-calendar-api-without-the-oauth-authentication)）。这个问题的答案是设置一个临时脚本来获取一个刷新令牌，该令牌可以一遍又一遍地用于身份验证。我试过了，它确实有效。但是，我不确定刷新令牌的持续时间以及相同的方法是否适用于 SkyDrive API。

编辑：在做了更多研究之后，Live Connect Docs ( [http://msdn.microsoft.com/en-us/library/live/hh826540](http://msdn.microsoft.com/en-us/library/live/hh826540) ) 说：

> 在用户提供同意后，Live Connect 会为您的应用程序提供一个特殊代码或访问令牌，让您的应用程序可以使用他或她同意的用户信息部分。通常，此访问令牌的有效期约为一小时。在这一小时结束后，您的应用将无法再使用用户的信息——它必须要求用户再次完成登录和同意流程。要解决此问题，您可以要求用户同意 wl.offline_access 范围。这为您的应用程序提供了一个额外的代码，称为刷新令牌，您的应用程序可以在需要时使用它来获取新的访问令牌 - 即使在用户注销之后 - 通常长达一年。但是，用户可以随时撤销您的应用程序的访问权限。如果用户选择撤销对您的应用的同意，

因此，刷新令牌似乎持续了一年。这意味着我可以装配一些东西来获取刷新令牌，存储它，然后在每个页面请求上，使用刷新令牌来获取访问令牌并显示数据。但是，每年一次，我必须更新此客户端的刷新令牌并存储它。这听起来对吗？这是最好的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T17:49:11.257

OAuth 2 专门为此提供了一个特殊流程，称为[Client Credentials Grant](https://datatracker.ietf.org/doc/html/draft-ietf-oauth-v2-31#section-4.4)。

正如您对其他问题的[回答](https://stackoverflow.com/a/12006101/1467115)中所提到的，Google 已经使用*Service Accounts*和*Client certificate实现了这一点。*

但是，到目前为止，Microsoft 还**没有** [实现该流程](http://msdn.microsoft.com/en-us/library/live/hh243647.aspx#flows)，因此您目前最好的方法是使用您已经用于 Google Docs 的解决方法。

# java - Java - Hibernate 在选择查询中不返回特殊字符

> ID：12221898
> 
> 赞同：2
> 
> 时间：2012-08-31T20:10:03.190
> 
> 标签：java, mysql, hibernate, character-encoding

我正在做这样的查询：

```
Query query = PlatoonApp.getEntityManager().createQuery(
                "SELECT c FROM Client c WHERE c.type1 LIKE ? or c.type2 LIKE ? or c.type3 LIKE ?" +
                " or c.type4 LIKE ? ORDER BY c.type", Client.class);

        query.setParameter(1, legalStrQuery + "%");
        query.setParameter(2, legalStrQuery + "%");
        query.setParameter(3, individualStrQuery + "%");
        query.setParameter(4, individualStrQuery + "%");

        query.setFirstResult(startPosition);

        if (maxResults != 0)
            query.setMaxResults(maxResults);

        return (List<Client>) query.getResultList(); 
```

这是查询。我有一些使用“´”、“~”的信息行，这些字符正在被替换。为什么会这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T20:16:28.350

通过在单引号之前添加另一个单引号来转义单引号，例如`'`将变为`''`.

我不认为这`~`是一个非法字符，它只是让你挂断的单引号。

注意：我认为您可以用以下正则表达式替换所有单引号，`(?!<')['](?!')`因此您可以执行类似..

```
stringInstance.replaceAll( "(?!<')['](?!')", "''" ); 
```

# java - Android ICS 和 Jelly Bean 有什么区别？

> ID：12221900
> 
> 赞同：0
> 
> 时间：2012-08-31T20:10:06.423
> 
> 标签：java, android, android-4.0-ice-cream-sandwich, android-4.2-jelly-bean

我很好奇果冻豆和 ICS（冰淇淋三明治）之间的区别。在为任一操作系统开发时，我需要做些什么特别的事情吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T20:11:55.570

从一个到另一个，您似乎不需要做任何特别的事情。Jelly Bean 只是有一些框架更新等。

**资源**

*   [http://developer.android.com/about/versions/android-4.1.html](http://developer.android.com/about/versions/android-4.1.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T20:13:49.123

对于每个版本，您都可以在 developer.android.com 上找到列出的亮点，这样您就可以了解总体上发生了什么变化，因此您至少可以检查您感兴趣的领域是否受到影响。有关更详细的更改日志，我怀疑您应该潜入代码仓库，但起初您可能想看这里：http: [//developer.android.com/about/versions/jelly-bean.html](http://developer.android.com/about/versions/jelly-bean.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T20:16:19.260

你可以看看@这里：

[http://www.androidauthority.com/android-4-0-ice-cream-sandwich-vs-android-4-1-jelly-bean-comparison-video-105805/](http://www.androidauthority.com/android-4-0-ice-cream-sandwich-vs-android-4-1-jelly-bean-comparison-video-105805/)

[http://blogs.computerworld.com/mobile-and-wireless/20661/android-41-jelly-bean](http://blogs.computerworld.com/mobile-and-wireless/20661/android-41-jelly-bean)

希望您能了解 Android ICS 和 Jelly Bean 之间的区别。它定义良好且精确。

# ios - 带有 UITextField 的“搜索”标签文本

> ID：12221901
> 
> 赞同：0
> 
> 时间：2012-08-31T20:10:11.570
> 
> 标签：ios, uitextfield, uilabel

我有一个 UILabel 和一个 UITextField。每次用户在字段中输入文本时，我都需要检查标签文本中是否存在文本字段文本（基本上我正在搜索标签的文本）。我正在使用

```
NSRange range = [sentenceRequestLabel.text rangeOfString:resultString];
if (range.location == NSNotFound) {
    NSLog(@"string was found");
} else {
    NSLog(@"string was not found");
} 
```

检查（resultString 是 textfield.text），但即使文本字段中的标签文本甚至不接近标签的文本 NSLog 也会说“找到字符串”。有什么想法有什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T20:13:56.830

```
if (range.location == NSNotFound) {
    NSLog(@"string was found"); 
```

表示“如果未找到字符串，则打印已找到”。那`==`应该是一个`!=`.

# android - 自定义对话框 - 只有匿名侦听器有效

> ID：12221903
> 
> 赞同：2
> 
> 时间：2012-08-31T20:10:23.617
> 
> 标签：android, button, dialog, listener

我在编写应用程序时遇到了一个“小”问题。我有自定义对话框，单击按钮后会显示什么。在这个自定义对话框中，我有一些文本视图和按钮.. 我想要以下内容：如果我单击对话框中的按钮，应用程序将开始调用（它不是问题的重点，它会做任何事情）。

但问题是，我无法编写侦听器。一直以来，如果我在 xml 布局文件中编写侦听器，我的应用程序就会崩溃。有一个解决方案 - 像匿名侦听器一样编写侦听器。但是我不太喜欢匿名侦听器（如果布局中有 100 个按钮并且所有按钮都需要添加匿名侦听器，那么代码会很混乱）。

我不确定是否需要编写 View.OnClickListener() 或 DialogInterface.OnClickListener() - 我认为是第一个，但我不确定。匿名侦听器适用于视图一，非匿名（通过 xml 布局文件）也不适用于视图一和秒。谁能说我“为什么”？

代码：

这项工作：

```
 b.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
            Log.e("err","I am here");   
        }
    }); 
```

这不起作用：

-xml_layout_file

```
<Button 
    android:id="@+id/btn_startCall"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:onClick="onClick_startCall"
    android:text="@string/btn_startCall" /> 
```

-myDialog.java（扩展对话框）

```
public void onClick_startCall(View v){
    Log.e("err","I am here");       
} 
```

日志输出：

```
08-31 22:08:05.469: W/dalvikvm(9456): threadid=1: thread exiting with uncaught exception (group=0x40a3b1f8)
08-31 22:08:05.475: E/AndroidRuntime(9456): FATAL EXCEPTION: main
08-31 22:08:05.475: E/AndroidRuntime(9456): java.lang.IllegalStateException: Could not find a method onClick_startCall(View) in the activity class android.view.ContextThemeWrapper for onClick handler on view class android.widget.Button with id 'btn_startCall'
08-31 22:08:05.475: E/AndroidRuntime(9456):     at android.view.View$1.onClick(View.java:3031)
08-31 22:08:05.475: E/AndroidRuntime(9456):     at android.view.View.performClick(View.java:3511)
08-31 22:08:05.475: E/AndroidRuntime(9456):     at android.view.View$PerformClick.run(View.java:14105)
08-31 22:08:05.475: E/AndroidRuntime(9456):     at android.os.Handler.handleCallback(Handler.java:605)
08-31 22:08:05.475: E/AndroidRuntime(9456):     at android.os.Handler.dispatchMessage(Handler.java:92)
08-31 22:08:05.475: E/AndroidRuntime(9456):     at android.os.Looper.loop(Looper.java:137)
08-31 22:08:05.475: E/AndroidRuntime(9456):     at android.app.ActivityThread.main(ActivityThread.java:4673)
08-31 22:08:05.475: E/AndroidRuntime(9456):     at java.lang.reflect.Method.invokeNative(Native Method)
08-31 22:08:05.475: E/AndroidRuntime(9456):     at java.lang.reflect.Method.invoke(Method.java:511)
08-31 22:08:05.475: E/AndroidRuntime(9456):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:789)
08-31 22:08:05.475: E/AndroidRuntime(9456):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:556)
08-31 22:08:05.475: E/AndroidRuntime(9456):     at dalvik.system.NativeStart.main(Native Method)
08-31 22:08:05.475: E/AndroidRuntime(9456): Caused by: java.lang.NoSuchMethodException: onClick_startCall [class android.view.View]
08-31 22:08:05.475: E/AndroidRuntime(9456):     at java.lang.Class.getConstructorOrMethod(Class.java:460)
08-31 22:08:05.475: E/AndroidRuntime(9456):     at java.lang.Class.getMethod(Class.java:915)
08-31 22:08:05.475: E/AndroidRuntime(9456):     at android.view.View$1.onClick(View.java:3024)
08-31 22:08:05.475: E/AndroidRuntime(9456):     ... 11 more 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T20:18:31.693

通常，我更喜欢有一个监听器，链接到所有按钮

```
// in onCreate() method
MyListener buttonListener = new MyListener();
button1.setOnClickListener(buttonListener);
button2.setOnClickListener(buttonListener);
button3.setOnClickListener(buttonListener);

// definition of my listener (inner or simple class)
public class MyListener implements View.OnClickListener {

    public void onClick(View v) {
        switch (v.getId()) {
           case R.id.button1 :
             // Do this for button 1
             break;

           case R.id.button2 :
             // Do this for button 2
             break;

           case R.id.button3 :
             // Do this for button 3
             break;

        } 
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T20:21:36.863

Dialog 类不扩展`onClick`属性所必需的 Context。

从[文档](http://developer.android.com/reference/android/R.attr.html#onClick)

> 此名称必须对应于只采用一个 View 类型参数的公共方法。例如，如果您指定 android:onClick="sayHello"，则必须声明您的上下文（通常是您的 Activity）的 public void sayHello(View v) 方法。

* * *

你可以这样做：

```
OnClickListener startButtonListener = new View.OnClickListener() {
    public void onClick(View v) {
        Log.e("err","I am here");   
    }
}); 
```

稍后参考：

```
b.setOnClickListener(startButtonListener); 
```

如果这可以帮助您更好地组织代码（我喜欢它，以及 Orabig 的建议）。

# sql - SQL 查询：需要将多个字段值更改为 NULL

> ID：12221908
> 
> 赞同：1
> 
> 时间：2012-08-31T20:11:04.177
> 
> 标签：sql

SQL Query 业余爱好者在这里.....我有一个包含多个表的数据库，每个表都包含多个字段。一些敏感字段中的数据需要更改为NULL。如何创建一个查询来定义我需要更改的表中的字段，并将字段的内容（无论它是什么）更改为 NULL。

例如，我需要将所有记录中的所有社会安全号码、出生日期和家庭电话字段更改为 NULL 值。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-31T20:12:34.460

```
update YourTable 
set
SS = null,
Birthdate = null,
HomePhone = null 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T20:15:32.910

您将需要为每个表创建一个 UPDATE 查询。您可以执行以下操作：

UPDATE TABLE1 SET SecurityNumber=NULL, Birthdate=NULL

更新表 2 设置 HomePhone=NULL

# jquery - 在 ul 中动态创建可点击的 li 并选择 li 内容

> ID：12221911
> 
> 赞同：1
> 
> 时间：2012-08-31T20:11:10.920
> 
> 标签：jquery, html-lists, clickable

抱歉，如果这个主题已经被多次讨论，我已经阅读了多篇关于这个的帖子，并且还在 jsfiddle 中尝试了各种方法。

基本上，我想在下面的情况下访问 lis 的内容，我通过单击按钮将 lis 添加到 ul（在这种情况下，单击总是添加相同的内容 - 苹果，在真正的应用程序中，内容每个 li 都不一样。我希望能够单击一个 li 并访问该特定 li 的内容。

下面的代码将我带到 ul 但不是 ul 中的特定 li 或该 li 的内容 - 任何想法将不胜感激。

```
<!DOCTYPE html>
<html>
    <head>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript"></script>
    </head>

    <body>
    <button id="testfood" type="button">Test</button>

        Fruits: <div id="fruits"><ul id="ul_fruits"  class="ul_fruits"><li>Fruit test li</li></ul></div>    </body>
</html> 
```

这是JS

```
<script type="text/javascript">
$(document).ready(function() {

    $("#testfood").click(function(event) {
        $('#ul_fruits').append("<li><a href='#'>" + "apple" + "</a>" + "</li>");
    });

    $("#ul_fruits").click(function(e){
        console.log("click on #ul_fruits");
        alert(this);

        var index = $(this).index();
        alert("index " + index);
    });
});
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T20:20:52.393

您可以使用 jQuery 的事件委托系统。基本上，你会得到`<a>`被点击的，它会自动为你添加的元素工作。此外，`<a href="#">`将导航您可能不想要的。

```
// bind it to the <ul>, run when an <a> is clicked inside the <ul>
$("#ul_fruits").on("click", "a", function(e) {
  e.preventDefault();  // prevent navigating
  var text = $(this).closest("li").text();  // `this` is the <a>; get the text of the <li>
}); 
```

# html - 指定缺少的图像图标

> ID：12221921
> 
> 赞同：8
> 
> 时间：2012-08-31T20:12:37.060
> 
> 标签：html, css, image

> **可能重复：**
> [jQuery/Javascript 替换损坏的图像](https://stackoverflow.com/questions/92720/jquery-javascript-to-replace-broken-images)

这应该很容易我只是不知道要搜索的术语。我认为这是 HTML/CSS，如果图像链接被破坏，它通常会显示一个丢失的图像图标，显示一个带有红色、绿色、蓝色形状的页面。在 HTML 中是否可以配置“如果图像链接断开，则使用此图像？”

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-31T20:27:42.040

一个“错误”示例：

```
<img src="fail.jpg" onerror="this.src='https://www.google.com.br/logos/2012/montessori-res.png';"> 
```

[http://jsfiddle.net/u4hQd/](http://jsfiddle.net/u4hQd/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T20:25:54.107

我认为核心是如何为 CSS 添加动态功能。除了检测浏览器之外，我不知道 CSS 中的 if/else 检查，但是，如果我需要做这样的事情，我会这样做。

如果你使用 php，你可以这样做：

```
$imagename = "image.png";
if (file_exists($imagename)){
   echo '<p class="exists">';
} else {
   echo '<p class="dne">';
} 
```

然后在css中你可以拥有

```
.exists{background:url("../img/git-sprite.png") no-repeat 0px -32px;}
.dne{background:url("../img/git-sprite2.png") no-repeat 0px -32px;} 
```

这样，您可以在 CSS 本身中为此添加 if/else 功能。您不必使用 PHP，我相信 javascript 也可以

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T20:19:10.050

你在用php吗？

您可以在发送文件之前进行检查，如下所示：

```
$filename = "whatever.png";
if (file_exists($filename)){
   $html = "<img src=\"$filename\">";
} else {
   $html = "<img src=\"someotherpath.jpg\">";
}
echo $html; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-31T20:19:57.637

您的问题是可以理解的，无需任何额外的术语。不幸的是，HTML 中没有你想要的方法。

您可以做的是使用 JS（jQuery 会有所帮助），循环浏览文档中的所有 img 标签，并检查其中哪些有图像（检查是否为空）。对于那些错过图像的人，您可以加载其他图像（一些默认值）。

但是请记住在页面完全加载后运行此脚本（所有资产：JS，CSS，图像），因为如果您在页面加载完成之前运行它，您可能会错误地将默认图像放入某个 img 标签，这没有时间加载它的真实图像。

# codeigniter - 如何将codeigniter站点从本地主机传输到实时服务器

> ID：12221929
> 
> 赞同：3
> 
> 时间：2012-08-31T20:13:54.867
> 
> 标签：codeigniter

我在 codeigniter 中开发了一个具有基本功能的站点，现在我想将此站点更新到我的实时服务器。但是当我将我的网站上传到实时服务器时，它显示 404 - 页面未找到。

[http://www.nawtist.com/test/ams/](http://www.nawtist.com/test/ams/)

请告诉我我需要做什么。我对此进行了很多搜索，但没有找到任何有用的信息。那么在将其上传到实时服务器之前，我是否需要更改任何 base_url 或其他任何内容，非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-11-12T11:16:11.753

请记住，许多服务器都区分大小写，使用 CodeIgniter v3，您应该将控制器的首字母文件和模型的首字母文件更改为大写。这也对我有用。最好的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T20:20:16.307

您的 htaccess 文件有问题，或者该服务器上禁用了 mod_rewrite。当您[使用 index.php 访问页面时，](http://www.nawtist.com/index.php/test/ams/)它可以工作（尽管 css 文件由于路由错误而无法工作）

还要检查`$config['index_page']='';`它是否应该在没有 index.php 的情况下工作

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-02T09:20:14.987

我以前也遇到过同样的问题，我记得在 codeigniter 中有 4 点需要关注：

*   检查“config.php”中的**base_url值**
*   检查“database.php”中的**数据库设置**
*   检查**.htaccess**文件内容是否已定义一次
*   如果您定义了任何自定义路由，请检查**routes.php**

就这样！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-07-28T17:07:09.027

如果您在将本地文件上传到实时服务器后在 Codeigniter 中**找不到 404 页面，请按照以下步骤操作**

1.  更改您的控制器和文件名首字母大写
2.  模型类和文件名的变化与上述相同，即首字母大写

按照上面的步骤，你的问题就可以解决了，谢谢。

# python - 无法导入 Scrapy 的设置模块或其 scrapy.cfg

> ID：12221937
> 
> 赞同：10
> 
> 时间：2012-08-31T20:14:56.830
> 
> 标签：python, django, environment-variables, scrapy

这是一篇很长的帖子，但经过广泛研究后，我找不到解决方案。我在 OSX 10.8 上有一个混合的 Django 1.4.1 / Scrapy 0.14.4 项目，我使用 Django 项目的`manage.py`命令控制 Scrapy，如此[处](https://stackoverflow.com/a/9197627/1125413)所述。例如，调用

```
python manage.py scrapy crawl example_spider 
```

工作没有问题。现在我要设置`scrapyd`Web 服务来部署我的蜘蛛。但是，当我执行

```
python manage.py scrapy server 
```

然后我得到这个异常：

```
scrapy.exceptions.NotConfigured: Unable to find scrapy.cfg file to infer project data dir 
```

因此，显然 Scrapy 找不到该`scrapy.cfg`文件，因为我没有从 Scrapy 项目中执行它。然而，其他 Scrapy 命令可以工作，因为在我的 Django 项目中，`settings.py`我做了以下操作：

```
sys.path.append('/absolute/path/to/my/Scrapy/project')
os.environ['SCRAPY_SETTINGS_MODULE'] = 'my_scrapy_project_name.settings' 
```

**问题 1：**为什么 Scrapy`scrapy.cfg`在我的设置中检测不到文件？我该如何解决这个问题？

* * *

由于上面提到的东西不起作用，我试图让`scrapyd`服务器运行只使用`scrapy`我的 Scrapy 项目目录中的命令。从我的Scrapy`scrapy server`项目的顶级目录执行会产生以下结果：

```
$ scrapy server
UserWarning: Cannot import scrapy settings module my_scrapy_project_name.settings
warnings.warn("Cannot import scrapy settings module %s" % scrapy_module)
2012-08-31 21:58:31+0200 [-] Log opened.
2012-08-31 21:58:32+0200 [-] Scrapyd web console available at http://localhost:6800/
2012-08-31 21:58:32+0200 [Launcher] Scrapyd started: max_proc=8, runner='scrapyd.runner'
2012-08-31 21:58:32+0200 [-] Site starting on 6800
2012-08-31 21:58:32+0200 [-] Starting factory <twisted.web.server.Site instance at 0x101dd3d88> 
```

服务器运行没有问题，但是`settings.py`找不到我的 Scrapy 项目的文件，因为不再设置相应的环境变量。这就是我在终端中执行以下操作的原因：

```
export PYTHONPATH=/absolute/path/to/my/Scrapy/project
export SCRAPY_SETTINGS_MODULE=my_scrapy_project_name.settings 
```

不幸的是，这两个命令没有任何效果。每当我执行`scrapy server`（或任何其他 Scrapy 命令）时，我都会收到 Scrapy 无法导入其项目的设置模块的消息。

我`scrapy.cfg`目前只有以下内容：

```
[settings]
default = my_scrapy_project_name.settings

[deploy:scrapyd]
url = http://localhost:6800/
project = my_scrapy_project_name 
```

当我尝试将我的 Scrapy 项目部署到`scrapyd`服务器时，它一开始似乎可以工作，但后来我意识到没有一个蜘蛛被上传，可能是因为无法检测到设置文件。这是控制台输出：

```
$ scrapy deploy scrapyd -p my_scrapy_project_name
/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-
packages/scrapy/utils/project.py:17: UserWarning: Cannot import scrapy
settings module my_scrapy_project_name.settings
 warnings.warn("Cannot import scrapy settings module %s" %
scrapy_module)
Building egg of event_crawler-1346531706
'build/lib' does not exist -- can't clean it
'build/bdist.macosx-10.6-intel' does not exist -- can't clean it
'build/scripts-2.7' does not exist -- can't clean it
zip_safe flag not set; analyzing archive contents...
Deploying event_crawler-1346531706 to http://localhost:6800/addversion.json
Server response (200):
{"status": "ok", "project": "my_scrapy_project_name", "version": "1346531706", "spiders": 0} 
```

**问题2：**如何正确导出上面的路径和环境变量，让这个警告消失？

**问题 3：**由于`scrapyd`服务器似乎工作正常，我怎样才能正确上传我的蜘蛛？

提前谢谢了！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T06:22:13.340

如果您查看[引发此异常的代码分支](https://github.com/scrapy/scrapy/blob/1e2efe5664/scrapy/utils/project.py#L30)和它调用的[函数的](https://github.com/scrapy/scrapy/blob/1e2efe5664/scrapy/utils/conf.py#L24)[定义，`closest_scrapy_cfg`](https://github.com/scrapy/scrapy/blob/1e2efe5664/scrapy/utils/conf.py#L24) scrapy 查找您的 scrapy.cfg 的唯一位置是在您运行命令的目录和任何父目录中。你可以`os.chdir`在你的 manage.py 中运行，或者将你的 scrapy.cfg 移动到你正在运行的目录中。

# asp.net - 从 FormView 模板内的 ListBox(with multipleselect) 中获取选定的元素

> ID：12221942
> 
> 赞同：0
> 
> 时间：2012-08-31T20:15:32.553
> 
> 标签：asp.net

所以我有一个**FormView**。在**InsertTemplate**里面我有一个*ListBox*

```
<asp:ListBox ID="AppsList" runat="server" DataSourceID="SqlDataSource3"
             DataTextField="Name" DataValueField="Id" SelectedValue='<%# Bind("Id") %>'
             AppendDataBoundItems="True" SelectionMode="Multiple"/>` 
```

在我的**ObjectDataSource**中，我只得到第一个选择（如果我有两个或三个选择的元素，则只提交第一个的 id）。

```
public void InsertOperator(string companyName, string address, string phoneNumber, string email, 
                           string NrPoints, string perimeterPointsList,object Id) 
```

我实际上为参数 Id（来自 ListBox）放置了“对象”类型，以查看传递给该方法的类型。它是一个字符串。那么我怎样才能使它成为所有选定 ID 的列表/数组，而不仅仅是第一个选定的 ID？

# html - 某些计算机上未显示图像

> ID：12221946
> 
> 赞同：0
> 
> 时间：2012-08-31T20:15:48.933
> 
> 标签：html, css

[这](http://magic.cardbinder.com/)是我正在研究的一个概念的 CSS ......

它会显示图片，一旦您将鼠标悬停在卡片上，它就会翻转它。我遇到的问题是它不适用于某些计算机。奇怪的是，它在我的一台电脑上不起作用。是Windows XP。它不适用于任何现代浏览器。另一台计算机运行 OSX 10.5 和 chrome。问题是，您只能看到 的向后文本，然后如果翻转到正常视图。

```
.sleeve {
  float: left;
  margin: 5px;
  width: 240px; height: 340px;
  perspective: 1000px;
  -webkit-perspective: 1000px;
  -moz-perspective: 1000px;
  -o-perspective: 1000px;   
}
.card {
  width: 240px;
  height: 340px;
  transform-style: preserve-3d;
  transition: all 0.5s ease-in;
  -webkit-transform-style: preserve-3d;
  -webkit-transition: all 0.5s ease-in;
  -moz-transform-style: preserve-3d;
  -moz-transition: all 0.5s ease-in;
  -o-transform-style: preserve-3d;
  -o-transition: all 0.5s ease-in;
}
.sleeve:hover .card {
  transform: rotateY(180deg);
  box-shadow: -5px 5px 5px #333333;
  -webkit-transform: rotateY(180deg);
  -webkit-box-shadow: -5px 5px 5px #333333;
  -moz-transform: rotateY(180deg);
  -moz-box-shadow: -5px 5px 5px #333333;
  -o-transform: rotateY(180deg);
  -o-box-shadow: -5px 5px 5px #333333;
}
.face {
  position: absolute;
  width: 100%;
  height: 100%;
  backface-visibility: hidden;
  -webkit-backface-visibility: hidden;
  -moz-backface-visibility: hidden;
  -o-backface-visibility: hidden;
}
.face.front img {
  height: 340px;
  width: 240px;
  }
.face.back {
  display: block;
  transform: rotateY(180deg);
  box-sizing: border-box;
  -webkit-transform: rotateY(180deg);
  -webkit-box-sizing: border-box;
  -moz-transform: rotateY(180deg);
  -moz-box-sizing: border-box;
  -o-transform: rotateY(180deg);
  -o-box-sizing: border-box;
  border: 5px solid #000000;
  padding: 5px 0 0 10px;
  height: 340px;
  width: 240px;
  overflow: auto;
  color: black;
  text-align: left;
  background-color: #FFFFFF;
  } 
```

如果我添加：

```
.face.front {
  z-index=10;
} 
```

它显示图片，但是当它翻转时，图像只是向后。

# asp.net - Azure 是托管我的 ASP.NET Web 应用程序以提供数据可视化的正确选择吗？

> ID：12221947
> 
> 赞同：0
> 
> 时间：2012-08-31T20:15:52.147
> 
> 标签：asp.net, azure, analytics, saas, paas

我正在创办一家分析公司，该公司分析我的客户数据，将分析结果保存在服务器上，并允许我的客户使用我编写的 ASP.NET Web 应用程序访问结果并查看图表和图形。每个客户显然都可以通过使用他们的安全密码登录来访问他们自己的 Web 应用程序。

Azure 是提供此类服务的正确选择吗？它是否托管我的 SQL Server 许可证？它是否适用于每个需要自己的 Web 应用程序版本的许多用户？

感谢您的时间，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T14:45:39.077

这些是我在熟悉 Azure 时使用的一些很好的链接。我希望他们也能帮助你。

[Azure 简介](http://www.windowsazure.com/en-us/develop/other/fundamentals/intro-to-windows-azure/)- 请完整阅读此内容。

[如何在 SaaS 中使用 Azure](http://www.notsotrivial.net/blog/post/2012/05/30/Windows-Azure-Recipe-Software-as-a-Service-%28SaaS%29.aspx) - 这就是它的实际表现。

看来您在这里谈论的是多租户应用程序。Azure 是非常适合此类应用程序的平台。在构建解决方案时，您可以利用 SQL Azure 联合和 SQL 报告等很酷的功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T20:18:01.757

Azure 网站和 SQL Azure 应该能够很好地处理这个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-02T01:40:25.133

我想说这取决于您估计将获得多少流量以及您将产生多少数据。

如果它像我想的那样是商业智能分析，那么设置自己的本地 Hadoop 集群和 Web 服务器可能会更好。

# c# - 如何使用 Newtonsoft 反序列化可以是数组或字典的对象？

> ID：12221950
> 
> 赞同：5
> 
> 时间：2012-08-31T20:16:13.130
> 
> 标签：c#, json, deserialization, json.net

我正在使用一个返回我需要反序列化的 json 对象的 API。我的问题是这些对象的成员之一有时是一个空数组（“[]”），有时是一个字典（“{“1”：{...}，“2”：{...}}” ）。我想将它反序列化为数组或字典，因为我不关心 ID，我只想要所有对象的列表。这是我反序列化对象的方法：

```
var response = JsonConvert.DeserializeObject<Response>(json); 
```

这是 Response 类的定义：

```
public class Response
{
    [JsonProperty(PropertyName = "variations")]
    public Dictionary<int, Variation> Variations { get; set; }
} 
```

当 Response 在其变体字段中包含字典时，它工作得很好，但是当它包含一个空数组时它会失败。我从 Newtonsoft 收到一个错误，说不能将数组反序列化为字典。如果我将 Variations 属性定义为一个数组，它适用于空数组，但当它是一个字典时它会失败。我该怎么做才能正确反序列化两个可能的值，或者忽略空数组并将 Variations 设置为 null 当它是一个数组而不是失败时。

谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2017-08-04T10:59:53.620

这是使用 JsonConverter 的替代解决方案

```
public class Response
{
    [JsonProperty(PropertyName = "variations")]
    [JsonConverter(typeof(EmptyArrayOrDictionaryConverter))]
    public Dictionary<int, Variation> Variations { get; set; }
}

public class EmptyArrayOrDictionaryConverter : JsonConverter
{
    public override bool CanConvert(Type objectType)
    {
        return objectType.IsAssignableFrom(typeof(Dictionary<string, object>));
    }

    public override object ReadJson(JsonReader reader, Type objectType, object existingValue, JsonSerializer serializer)
    {
        JToken token = JToken.Load(reader);
        if (token.Type == JTokenType.Object)
        {
            return token.ToObject(objectType, serializer);
        }
        else if (token.Type == JTokenType.Array)
        {
            if (!token.HasValues)
            {
                // create empty dictionary
                return Activator.CreateInstance(objectType);
            }
        }

        throw new JsonSerializationException("Object or empty array expected");
    }

    public override void WriteJson(JsonWriter writer, object value, JsonSerializer serializer)
    {
        serializer.Serialize(writer, value);
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-14T20:39:11.900

这是 Carl 示例的变体（对不起，双关语）。我也有类似的需求，但我不需要返回字典，而是需要一个数组。我使用的 API 说它返回一个数组。但是，在结果中只有一项的情况下，它会作为对象返回！

```
public class VarationsContainer
{
    [JsonIgnore]
    public Varation[] Varations
    {
        get
        {
            return ParseObjectToArray<Variation>(VariationObject);
        }
    }

    [JsonProperty(PropertyName = "varations")]
    public object VarationsObject { get; set; }

    protected T[] ParseObjectToArray<T>(object ambiguousObject)
    {
        var json = ambiguousObject.ToString();
        if (String.IsNullOrWhiteSpace(json))
        {
            return new T[0]; // Could return null here instead.
        }
        else if (json.TrimStart().StartsWith("["))
        {
            return JsonConvert.DeserializeObject<T[]>(json);
        }
        else
        {
            return new T[1] { JsonConvert.DeserializeObject<T>(json) };
        }
    }
} 
```

我希望这对其他一些悲伤的 API 消费者有用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-04T16:08:47.893

这是我使用的解决方案：

```
 public Dictionary<int, Variation> Variations
    {
        get
        {
            var json = this.VariationsJson.ToString();
            if (json.RemoveWhiteSpace() == EmptyJsonArray)
            {
                return new Dictionary<int, Variation>();
            }
            else
            {
                return JsonConvert.DeserializeObject<Dictionary<int, Variation>>(json);
            }
        }
    }

    [JsonProperty(PropertyName = "variations")]
    public object VariationsJson { get; set; } 
```

基本上，变体首先在基本对象中反序列化。当我想读取值时，我检查对象是否为空数组，如果是，则返回一个空字典。如果对象是一个好的字典，我会反序列化它并返回它。

# xcode - UITextView 中是否可以有可变的文本大小？（制作标签云）

> ID：12221956
> 
> 赞同：0
> 
> 时间：2012-08-31T20:16:33.520
> 
> 标签：xcode, uitextview, tag-cloud

我想创建一个标签云，我想使用 UITextView。UITextView 中是否可以有可变的文本大小？如果没有，关于使用哪些 UI 元素来生成标签云的任何其他建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T20:28:04.957

我建议`UILabel`根据需要以编程方式添加对象。每个 只能有一种字体大小`UITextView`，plus`UITextView`通常用于可编辑文本。粗略地说，你可以使用这样的东西：

```
 UILabel *example = [[UILabel alloc] initWithFrame:<#(CGRect)#>];
 [example setFont:<#(UIFont *)#>];
 [example setText:<#(NSString *)#>];
 [self.view addSubview:example]; 
```

你可以把它放在一个循环中并填写空白。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-01T07:03:56.423

这在 iOS 6 中应该是可能的（如果你能等那么久），因为 Apple 终于增加了`NSAttributedString`在`UITextView`.

# javascript - 函数中的innerHTML（全局变量？）

> ID：12221957
> 
> 赞同：0
> 
> 时间：2012-08-31T20:16:45.327
> 
> 标签：javascript, javascript-events

我正在努力让这个工作。该`dispatch()`功能似乎被触发（通过警报测试），但这些`innerHTML`行似乎不起作用。

此外，`i`尽管`i++`.`onSubmit`

这是有问题的功能：

```
function dispatch(passengers,i,timesArray)
{
    alert('value of i is '+i);
    timesArray[i]=getTime();

    var avTime=getAverageTime(timesArrary);

    var throughput=passengers*3600000/avTime;

    if(i==0)
    {
        document.getElementById('output').innerHTML = 'Calculating...';
    }
    else
    {
        document.getElementById('output').innerHTML = throughput;
    }
    //and possibly a list (w/e)
} 
```

这是表格：

```
<form method="post" action="javascript:void(0);" name="applesForm" onSubmit="dispatch(document.applesForm.numPassengers.value, num, times);i++;">
    <input type="text" name="numApples" id="numPassengers" />
    <br/>
    <input type="submit" name="Submit" value="Press on Dispatch!"/>
</form> 
```

这可能是无法从函数内部更改全局变量的问题吗？

或者，使功能停止的`avTime`or行是否有问题？`throughput`

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T20:28:34.473

在这一行：

```
<form method="post" action="javascript:void(0);" name="applesForm" onSubmit="dispatch(document.applesForm.numPassengers.value, num, times);i++;"> 
```

`i`是一个全局变量，但 in`dispatch()` `i`是一个不在全局范围内的参数。它在`dispatch()`该函数的本地范围内，不能在全局范围内增加。因此我认为你`onSubmit()`应该是：

```
onSubmit="dispatch(document.applesForm.numPassengers.value, num, times);num++;"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T21:28:00.857

为什么在函数外增加变量？它不应该在函数内部并在那里增加吗？

此外，如果 num 是全局的，则不需要将其作为参数传递。

```
// global
var num = 0;

function dispatch(passengers, timesArray)
{
    alert('value of num is ' + num);
    timesArray[num]=getTime();

    var avTime = getAverageTime(timesArrary);

    var throughput = passengers * 3600000 / avTime;

    if(num == 0)
    {
         document.getElementById('output').innerHTML = 'Calculating...';
    }
    else
    {
        document.getElementById('output').innerHTML = throughput;
    }
    //and possibly a list (w/e)

    // increasing num here!
    num++;
} 
```

然后，您的表单可以删除变量的增加以及调用中的 num。

```
<form method="post" action="javascript:void(0);" name="applesForm" onSubmit="dispatch(document.applesForm.numPassengers.value, times)"> 
```

干杯，阿波克。

# jdbc - 使用 CallableStatement 调用 HSQLDB IDENTITY 函数以获取输出

> ID：12221960
> 
> 赞同：1
> 
> 时间：2012-08-31T20:17:13.827
> 
> 标签：jdbc, hsqldb

我正在尝试使用 CallableStatements 从 Java JDBC 获取 HSQLDB 中 IDENTITY() 的值。

我可以prepareCall很好。问题在于 registerOutputParameter。无论我传入什么索引，我都会得到“参数索引超出范围”。

我已经尝试过像“{? = CALL IDENTITY()}”这样的 SQL 片段，但没有成功。

有什么线索吗？我是否完全偏离了如何从 JDBC 调用 HSQLDB 函数例程？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-01T10:05:20.007

代替 using `IDENTITY()`， use[`getGeneratedKeys()`](http://hsqldb.org/doc/src/org/hsqldb/jdbc/JDBCPreparedStatement.html#getGeneratedKeys%28%29)来检索由 (insert) 语句生成的任何键。

请注意，您确实需要使用将启用此功能的方法之一`Statement.execute...`。`Connection.prepare...`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T21:03:18.793

嘎。

[http://sourceforge.net/tracker/index.php?func=detail&aid=3530755&group_id=23316&atid=378134](http://sourceforge.net/tracker/index.php?func=detail&aid=3530755&group_id=23316&atid=378134)

不支持函数调用的输出参数。使用 executeQuery 并获取 ResultSet。

# c# - 使用 C# (Visual Studio) 从访问数据库中删除条目时遇到问题

> ID：12221966
> 
> 赞同：0
> 
> 时间：2012-08-31T20:18:08.933
> 
> 标签：c#, database, visual-studio-2010, ms-access

我在删除数据库中的条目时遇到了一些麻烦。我可以插入数据，但我不能删除它们。

我有一个 2 变量数据库，我想管理这些数据。

但是当我调试程序时，第一个按钮 (btnAdicionar) 工作正常，但是当我按下按钮“btnRemover”时，我在“cmd.ExecuteNonQuery();”行出现错误

我究竟做错了什么？谢谢

这是代码：

```
 private void btnAdicionar_Click(object sender, EventArgs e)
    {
        OleDbConnection conn = new OleDbConnection("Provider=Microsoft.Jet.OLEDB.4.0;Data Source=c:\\BancodeDados\\Nomes.mdb");
        string sql = "INSERT INTO Nomes (Nome, Sobrenome) VALUES(?, ?)";
        OleDbCommand cmd = new OleDbCommand(sql, conn);
        conn.Open();
        cmd.Parameters.AddWithValue("Nome", txtNome.Text);
        cmd.Parameters.AddWithValue("Sobrenome", txtSobre.Text);
        cmd.ExecuteNonQuery();
        conn.Close();
        this.nomesTableAdapter.Fill(this.nomesDataSet.Nomes);
    }

    private void btnRemover_Click(object sender, EventArgs e)
    {
        OleDbConnection conn = new OleDbConnection("Provider=Microsoft.Jet.OLEDB.4.0;Data Source=c:\\BancodeDados\\Nomes.mdb");
        string sql = "DELETE FROM Nomes (Nome, Sobrenome) WHERE (?, ?)";
        OleDbCommand cmd = new OleDbCommand(sql, conn);
        conn.Open();
        cmd.Parameters.AddWithValue("Nome", txtNome.Text);
        cmd.Parameters.AddWithValue("Sobrenome", txtSobre.Text);
        cmd.ExecuteNonQuery();
        conn.Close();
        this.nomesTableAdapter.Fill(this.nomesDataSet.Nomes);
    } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-31T20:20:15.820

您的删除语句不是有效的 SQL，因此在您调用时出现错误`ExecuteNonQuery`

它应该是这样的：

```
DELETE FROM Nomes WHERE Nome= ? and Sobrenome = ? 
```

# soundcloud - 动态嵌入 soundcloud 剪辑

> ID：12221971
> 
> 赞同：0
> 
> 时间：2012-08-31T20:18:29.587
> 
> 标签：soundcloud

如果您想动态嵌入 youtube，那么这非常容易。您只需替换嵌入代码中的视频 ID。

```
<iframe width="420" height="315" src="http://www.youtube.com/embed/<?=$youtubeid;?>" frameborder="0" allowfullscreen></iframe> 
```

我正在努力用 soundcloud 做同样的事情。是否可以？- 嵌入代码如下：

```
<iframe src="http://w.soundcloud.com/player/?url=http%3A%2F%2Fapi.soundcloud.com%2Ftracks%2F57162664&show_artwork=true"></iframe> 
```

在我看来，您似乎需要知道此 api 代码才能嵌入轨道，因此您每次都必须查找它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T22:35:35.550

'api code'`tracks/`后面紧跟 track id（或`groups/`组 id 等），与 YouTube 没有太大区别，只是不像 YouTube 那样容易访问，因为 id 不在 URL 中。您可以通过查看轨道上的共享代码来获取 id，但更简单的是使用[oembed 服务](http://developers.soundcloud.com/docs/api/reference#oembed)来获取所需的完整嵌入 HTML（它还计算要包含的 iframe 的正确高度），并且只需要您在曲目页面上看到的“永久链接”网址。

未来几周内更新的小部件版本也应该支持开箱即用的永久链接 url。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T20:25:18.967

看起来您必须使用 API 来动态获取嵌入代码：

这是文档：

[http://developers.soundcloud.com/docs#playing](http://developers.soundcloud.com/docs#playing)

# c++ - C++中的流控制结构，如何修改？

> ID：12221976
> 
> 赞同：1
> 
> 时间：2012-08-31T20:18:47.153
> 
> 标签：c++, loops, if-statement, for-loop

这是代码段。如果 if 语句成功，我想回到循环 1。如果 if 语句成功，我需要程序不要添加 1000。

`editA.i`== 0 在程序的开头。

我想比较两列字符串并获得距离度量。

我已经尝试过 break 和 continue 命令，但它们都没有按我的意愿工作。

谢谢你

```
for(editA.i; editA.i<6; editA.i++)  // Loop 1
{
    for(editB.j=0; editB.j<6; editB.j++)    // Loop 2
    {
        if(editA.A[editA.i] == editB.B[editB.j])  // if this statment works, 
            // I want to go back to "Loop 1". How???

            sum+= abs(editA.i - editB.j);

        else
            sum+= 1000;
    }

} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-31T20:23:17.493

```
for(editA.i; editA.i<6; editA.i++)  // Loop 1 
{ 
    for(editB.j=0; editB.j<6; editB.j++)    // Loop 2 
    { 
        if(editA.A[editA.i] == editB.B[editB.j])  // if this statment works  I want to go back to "Loop 1"
        {
            sum+= abs(editA.i - editB.j); 
            break ;
        }

        else 
            sum+= 1000; 
    } 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T20:38:08.153

如果您只想逃离内部循环，我会在“if 语句”中添加一个 break 语句。如果要完全转义两个循环，则应使用 return 语句。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-31T20:54:53.717

Grzegorz 的回答是正确的，但是，您的要求可能会有所不同。

这是你想要的吗？

```
for(editA.i; editA.i<6; editA.i++)  // Loop 1
{
    bool found = false;
    for(editB.j=0; editB.j<6; editB.j++)    // Loop 2
    {
        if(editA.A[editA.i] == editB.B[editB.j]) {  
           sum+= abs(editA.i - editB.j);
           found = true;
           break; 

       }

    }
    if ( !found ) {
        sum += 1000;
    }
} 
```

# html - 强制链接到页面顶部

> ID：12221990
> 
> 赞同：0
> 
> 时间：2012-08-31T20:20:10.307
> 
> 标签：html, anchor, hyperlink

我有一个在单个 index.html 中包含多个页面的网站。

菜单元素使用路径“#!/...”调用这些页面

```
<nav class="menu">
                <ul id="menu">
                    <li id="item1"><span></span><a "javascript:void(0)" href="#!/">home</a></li>
                    <li id="item2"><span></span><a href="#!/page_about">about us</a></li>
                    <li id="item3"><span></span><a href="#!/page_services">what we do</a></li>
                    <li id="item4"><span></span><a href="#!/page_work">our work</a></li>
                    <li id="item5"><span></span><a href="#!/page_links">links</a></li>
                    <li id="item6"><span></span><a href="#!/page_alert"><span></span>opportunity alert</a></li>
                    <li id="item7"><span></span><a href="#!/page_contacts">contact us</a></li>
                </ul>
          </nav> 
```

这似乎可以正常工作，除非您向下滚动页面，然后单击另一个链接，然后单击指向您向下滚动的上一页的链接。这会将您返回到之前向下滚动的位置。当您单击任何页面链接时，我需要它让您返回到每个页面的顶部。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T20:23:09.247

只需取出英镑符号：

```
<nav class="menu">
    <ul id="menu">
        <li id="item1"><span></span><a "javascript:void(0)" href="/">home</a></li>
        <li id="item2"><span></span><a href="/page_about">about us</a></li>
        <li id="item3"><span></span><a href="/page_services">what we do</a></li>
        <li id="item4"><span></span><a href="/page_work">our work</a></li>
        <li id="item5"><span></span><a href="/page_links">links</a></li>
        <li id="item6"><span></span><a href="/page_alert"><span></span>opportunity alert</a></li>
        <li id="item7"><span></span><a href="/page_contacts">contact us</a></li>
    </ul>
</nav> 
```

# cornerstone - 如何在 Cornerstone svn 中更改文件类型关联

> ID：12221995
> 
> 赞同：0
> 
> 时间：2012-08-31T20:20:48.933
> 
> 标签：cornerstone

我最近开始使用 Cornerstone 作为 svn 客户端。我还没有弄清楚如何更改文件扩展名关联。就我而言，与扩展名关联的默认文件类型似乎`.m`是目标 C。

在我的情况下，这些文件应该与 matlab 文件相关联。基石文档看起来很轻，所以有人知道我如何/在哪里可以改变这种行为吗？

![在此处输入图像描述](../Images/db8c8643d282f01b78a744d3b5b68a51.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T20:58:26.943

在 Cornerstone 中，单击要更改的文件类型的文件。然后选择检查器（右上角的 i）。在“信息”选项卡下，如果您一直滚动到底部，您应该会看到可以配置的“打开方式”选项。

# visual-studio-2012 - 从 msbuild 为 Visual Studio 2012 调用发布

> ID：12221999
> 
> 赞同：13
> 
> 时间：2012-08-31T20:21:16.320
> 
> 标签：visual-studio-2012, web-deployment-project

对于 VS2010 以及在我使用 Web 部署项目 (WDP) 来帮助打包我的网站以进行生产部署之前。我有一个 MSBuild 脚本，它在发布模式下编译了解决方案。其输出是由 WDP 编译和清理的生产就绪网站文件。

我看到 2012 年的 WDP 已被删除，并且已在 Web 应用程序的属性中创建了一个新选项卡。选项是相同的，但现在通过 Publish 选项来调用它（在您刚刚在发布模式下编译之前）。

所以问题是这样的。如何从 MSBuild 脚本调用发布操作？我发现了一些旧帖子...

```
msbuild /target:publish 
```

会成功的。但这在 2012 年似乎行不通。

另外，我尝试了我的 msbuild 任务......

```
<MSBuild Properties="Configuration=Publish;" 
         StopOnFirstFailure="true" 
         Projects="$(BuildDirectory)\MySolution.sln"></MSBuild> 
```

...但`msbuild`只是报告了“未知配置”。

如何`msbuild`从命令行运行发布选项？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-27T16:02:29.293

现在似乎有一些其他选项可以从命令行发布。具体来说，现在似乎可以通过对 Visual Studio 2012 的一些 RC 更新来实现以下内容。

```
msbuild mywap.csproj /p:DeployOnBuild=true;PublishProfile=MyProfileName 
```

有关更多详细信息，请查看[Scott Hanselman 的这篇文章](http://www.hanselman.com/blog/VisualStudio2012RCIsReleasedTheBigWebRollup.aspx)并查看**发布**部分。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-31T21:51:05.260

我无法让发布运行，但查看 Visual Studio 的输出，我想我找到了替代解决方案。原来 obj\Release\AspnetCompileMerge 文件夹有一个可部署且干净的项目版本。它包含与最终输出文件夹相同的字节文件。

我确实必须更改我的 msbuild 脚本以包含 DeployOnBuild 选项...

```
<MSBuild Properties="Configuration=Release;DeployOnBuild=True;" 
         StopOnFirstFailure="true" 
         Projects="$(BuildDirectory)\BigWave.ALL.sln"></MSBuild> 
```