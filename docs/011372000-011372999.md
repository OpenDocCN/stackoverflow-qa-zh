# StackOverflow 问答 11372000-11372999

# ios - 为什么没有执行代码时内存使用量会发生变化？(as3)

> ID：11372005
> 
> 赞同：1
> 
> 时间：2012-07-07T03:24:42.607
> 
> 标签：ios, actionscript-3, memory

![图表](../Images/198ca7936442c2a9dd3b13e0fecf492e.png)

您好，正如您从分析器的图表中看到的，在 1 分钟的时间里，内存上升了大约 2mb，然后又下降到原来的位置。这是一个几乎空白的屏幕，没有代码在运行。没有创建新对象。我还注意到，在 iOS 上，CPU 使用率也在以类似的模式上升和下降——从 20% 上升到 70%。
谢谢阅读。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T06:51:10.710

有很多原因。我最近遇到了类似的情况，CPU 异常高。

我的调试方法是注释掉除样板文档类构造函数之外的所有代码，并慢慢引入变量、类和方法（以块的形式，而不是一次一个！）直到问题再次出现。

在我的特殊情况下，它与我错误设置的网络监视器类有关。

# regex - 正则表达式消除具有已知开始和停止字符串的多行文本

> ID：11372010
> 
> 赞同：0
> 
> 时间：2012-07-07T03:26:37.127
> 
> 标签：regex

我正在尝试使用单个正则表达式命令消除两个特定文本字符串之间的所有文本。原文如下所示：

```
<html>
  <!-- template name: text.tpl -->
  <head>
    <title>Cross-Collection Search</title>    
    <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
    <script src="/t/text/textclass.js" language="JavaScript"></script>
    <link rel="STYLESHEET" type="text/css" href="/t/text/textclass.css">
    <link rel="stylesheet" href="/t/text/textclass-specific.css" type="text/css">
    <script src="/t/text/bbagWindow.js" type="text/javascript" language="javascript"></script>
    <script type="text/javascript" language="javascript">
     <!-- 

     window.name = "mainwindow";

     //-->
    </script>    
  </head>

  <!-- -------------------------------------------------- -->

<body bgcolor="#FFFFFF" marginwidth="0" marginheight="0">

  <!-- -------------------------------------------------- -->

<table width="100%" border="0" cellspacing="0" cellpadding="0">
  <tr> 
    <td height="54" class="hdrcolor" background="/t/text/graphics/hdr-bg1.gif">
    <a name="top"></a>
    <a href="http://ecfr.gpoaccess.gov/cgi/t/text/text-idx?c=ecfr;c=sampletc;cc=ecfr;xc=1;sid=75189253ab69c67a4a0484a5acb0c128;tpl=%2Fusr%2Flocal%2Fdlxs%2Fweb%2Ft%2Ftext%2Fhome.tpl" target="_top"><img src="/t/text/graphics/umdlt-smbanner.gif" border="0"></a></td>
     <td height="54" class="hdrcolor" align="right" valign="top" background="/t/text/graphics/hdr-bg2.gif">
      <table border="0" cellspacing="1" cellpadding="3">
        <tr>

          <td align="right" nowrap valign="top" bgcolor="#CCCCCC">&nbsp;<font size="-1"><a class="globnav" href="">Authorized user login</a></font>&nbsp;</td>
          <td align="right" bgcolor="#FFCC66" nowrap>&nbsp;<font size="-1"><a class="globnav" href="javascript:popupBBagWindow( 'http://ecfr.gpoaccess.gov/cgi/t/text/text-idx?c=ecfr;c=sampletc;cc=ecfr;xc=1;sid=75189253ab69c67a4a0484a5acb0c128;page=bbaglist' , true )">View 
            bookbag</a></font>&nbsp;</td>

        </tr>
      </table>
          <font class="navinfo" size="2"><br>your bookbag has <strong>0</strong> items</font>&nbsp;
    </td>
  </tr>

<!-- BEGIN rows outlining the navigation proper  -->

<!-- this row contains a table controlling layout for the top border lines of the navbar   -->

  <tr> 
    <td class="navcolor" colspan="2" align="left" height="1" nowrap>
    <table border="0" cellspacing="0" cellpadding="0">
        <tr> 
      <!-- home  -->
          <td width="70" height="1" align="center" nowrap><img src="/t/text/graphics/plug.gif" width="1" height="1" border="0"></td>        
          <td width="1"><img src="/t/text/graphics/plug.gif" width="1" height="1" border="0"></td>
      <!-- search  -->
          <td width="90" height="1" align="center" nowrap><img src="/t/text/graphics/plug.gif" width="1" height="1" border="0"></td>
      <td width="1"><img src="/t/text/graphics/plug.gif" width="1" height="1" border="0"></td> 
      <!-- browse -->
          <td width="75" height="1" align="center" nowrap><img src="/t/text/graphics/plug.gif" width="1" height="1" border="0"></td>
      <!-- blankspace  -->
      <td width="75" height="1" align="center" nowrap><img src="/t/text/graphics/plug.gif" width="1" height="1" border="0"></td>
      <!-- help  -->
      <td width="75" height="1" align="center" nowrap><img src="/t/text/graphics/plug.gif" width="1" height="1" border="0"></td>
        </tr></table>
    </td>
  </tr>

<!-- this row contains a table controlling layout for the nav tabs themselves   -->
  <tr> 
    <td class="navcolor" colspan="2" align="left" bgcolor="#666699" height="23" nowrap>
      <table border="0" cellspacing="0" cellpadding="0">
        <tr> 
          <!-- home  -->
          <td width="70" height="23" align="center" nowrap><font class="navlinks" color="#ffffff"><a href="http://ecfr.gpoaccess.gov/cgi/t/text/text-idx?c=ecfr;c=sampletc;cc=ecfr;xc=1;sid=75189253ab69c67a4a0484a5acb0c128;tpl=%2Fusr%2Flocal%2Fdlxs%2Fweb%2Ft%2Ftext%2Fhome.tpl" class="nav">Home</a></font></td>
          <!-- search  -->      
          <td width="90" height="23" align="center" nowrap><font class="navlinks" color="#000000"><a href="http://ecfr.gpoaccess.gov/cgi/t/text/text-idx?c=ecfr;c=sampletc;cc=ecfr;xc=1;sid=75189253ab69c67a4a0484a5acb0c128;page=simpleext" class="nav">Search</a></font></td >
           <!-- browse  -->

           <td width="90" height="23" align="center" nowrap><font class="navlinks" color="#ffffff"><a href="http://ecfr.gpoaccess.gov/cgi/t/text/text-idx?c=ecfr;cc=ecfr;xc=1;sid=75189253ab69c67a4a0484a5acb0c128;tpl=browse.tpl" class="nav">Browse</a></font></td >

          <!-- blankspace  -->
          <td width="50" height="23" align="center" nowrap>&nbsp;</td >
          <!-- help  -->
          <td width="70" height="23" align="center" nowrap><font class="navlinks" color="#ffffff"><a href="/t/text/help" target="helpwin" class="nav">Help</a></font></td >
        </tr>
      </table>
         </td >
        </tr>

<!-- this row contains the table that controls layout for the lower nav border lines   -->

<tr> 
    <td class="navhrcolor" colspan="2" align="left" height="1" nowrap bgcolor="#999999">
    <table border="0" cellspacing="0" cellpadding="0">
        <tr> 
          <td width="70" height="1" align="center" nowrap><img src="/t/text/graphics/plug.gif" width="1" height="1" border="0"></td>
          <td width="1"><img src="/t/text/graphics/plug.gif" width="1" height="1" border="0"></td>
          <td width="90" height="1" align="center" nowrap><img src="/t/text/graphics/plug.gif" width="1" height="1" border="0"></td>
          <td width="1"><img src="/t/text/graphics/plug.gif" width="1" height="1" border="0"></td>
          <td width="75" height="1" align="center" nowrap><img src="/t/text/graphics/plug.gif" width="1" height="1" border="0"></td>
          <td width="75" height="1" align="center" nowrap><img src="/t/text/graphics/plug.gif" width="1" height="1" border="0"></td>
        </tr></table>
    </td>
  </tr>
</table>

    <table cellspacing="0" cellpadding="5" width="100%">
      <tr> 
        <td valign="top" nowrap>

    <hr size="1">
    </td>
   </tr>
</table>

    <table cellspacing="0" cellpadding="15">
      <tr> 
        <td>    

          <br>
<strong><span class=mainheader> 
```

正则表达式搜索和替换后的完整文本需要如下所示：

```
<html>
<strong><span class="mainheader"> 
```

出于某种原因，仅使用以下内容是行不通的。为什么？

```
<html>(.*)<strong><span class=mainheader> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T03:39:10.260

您可能需要全点模式（以`.`匹配换行符），或者只是替换`.`为`[\s\S]`（确保所有字符都匹配，无论您的语言是否支持全点模式）。

# java - 在 Java 的 switch 语句中使用访问器方法

> ID：11372011
> 
> 赞同：0
> 
> 时间：2012-07-07T03:26:49.863
> 
> 标签：java, methods, switch-statement

我`switch`在 Java 程序中有几条语句。我的问题是，如果我构造`switch`类似这样的语句：

```
switch (getNum()) {
    case 0: // do something
    case 1: // do something
    ...
} 
```

要切换的变量是从访问器方法（又名“getter”方法）返回的，switch 语句是否会在`getNum()`每次检查案例时调用？还是会`int`为返回的对象分配一个临时变量`getNum()`以检查每个案例？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-07T04:05:20.620

> switch 语句会在每次检查案例时调用 getNum() 吗？

它根本不会“检查每个案例”。它通过取决于实现的几种技术之一对表达式求值一次并立即跳转到相关的情况。

> 或者它会为从 getNum() 返回的 int 分配一个临时变量来检查每种情况？

它也不这样做：见上文。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-07T04:02:29.207

> switch 语句会在每次检查案例时调用 getNum() 吗？或者它会为从 getNum() 返回的 int 分配一个临时变量来检查每种情况？

表达式将`getNum()`只计算一次。有关语义的详细信息，请参阅[JLS 14.11 节](http://docs.oracle.com/javase/specs/jls/se7/html/jls-14.html#jls-14.11)

（事实上​​，switch 语句*通常*被编译为不会针对每个案例测试值的代码。但这取决于案例的数量和分布，以及 Java 编译器的详细信息。）

* * *

> 当您说“立即跳转到案例”时，您是什么意思？

（本机）机器代码级别的“技巧”是为不同情况创建一个分支地址表。然后使用 switch 表达式的值来索引表。在伪代码中是这样的：

```
 value = evaluate(expression)
  branchAddress = switchTable[value]
  jump(branchAddress) 
```

如您所见，这避免了对`value`. 但缺点是，如果 switch case 值的范围很大，你最终可能会得到一个很大的 switch 表。因此，我在上面的警告：JIT 编译器需要决定是以这种方式编译开关，还是作为一系列测试，或者使用这两种方法的组合。

# mpi - MPI 多台同时广播

> ID：11372012
> 
> 赞同：1
> 
> 时间：2012-07-07T03:26:55.243
> 
> 标签：mpi, broadcast

我有一个 2D 处理器网格 (3*3)：

P00、P01、P02 在 R0 中，P10、P11、P12 在 R1 中，P20、P21、P22 在 R2 中。P*0 在同一台计算机上。所以对 P*1 和 P*2 也是如此。

现在我想让R0、R1、R2同时调用MPI_Bcast从P*0广播到p*1和P*2。

我发现当我使用 MPI_Bcast 时，只需要在一行中广播就需要三倍的时间。

例如，如果我只在 R0 中调用 MPI_Bcast，则需要 1.00 秒。但是如果我在所有 R[0, 1, 2] 中调用三个 MPI_Bcast，总共需要 3.00 秒。这意味着 MPI_Bcast 不能并行工作。

有什么方法可以同时广播 MPI_Bcast 吗？（一个节点同时广播三个频道。）

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-07T10:28:06.080

如果我正确理解您的问题，您希望同时进行逐行广播：

```
P00 -> P01 & P02
P10 -> P11 & P12
P20 -> P21 & P22 
```

这可以使用子通信器来完成，例如一个只包含第 0 行的进程的子通信器，另一个只包含第 1 行的进程的子通信器，依此类推。`MPI_Bcast`然后，您可以通过使用适当的通信器参数在每个子通信器中发出同时广播。

如果您首先使用笛卡尔通信器，则创建逐行子通信器非常容易。MPI`MPI_CART_SUB`为此提供了操作。它是这样工作的：

```
// Create a 3x3 non-periodic Cartesian communicator from MPI_COMM_WORLD
int dims[2] = { 3, 3 };
int periods[2] = { 0, 0 };
MPI_Comm comm_cart;

// We do not want MPI to reorder our processes
// That's why we set reorder = 0
MPI_Cart_create(MPI_COMM_WORLD, 2, dims, periods, 0, &comm_cart);

// Split the Cartesian communicator row-wise
int remaindims[2] = { 0, 1 };
MPI_Comm comm_row;

MPI_Cart_sub(comm_cart, remaindims, &comm_row); 
```

Now`comm_row`将包含一个新子通信器的句柄，该子通信器将只跨越调用进程所在的同一行。现在只需一次调用`MPI_Bcast`即可执行三个同时的逐行广播：

```
MPI_Bcast(&data, data_count, MPI_DATATYPE, 0, comm_row); 
```

这是有效的，因为在位于不同行的进程中`comm_row`，返回的`MPI_Cart_sub`结果会有所不同。`0`这是子通信器中第一个进程的等级，由于拓扑的构造方式`comm_row`，它将对应。`P*0`

如果您不使用笛卡尔通信器而是对其进行操作`MPI_COMM_WORLD`，则可以使用`MPI_COMM_SPLIT`将世界通信器拆分为三个逐行子通信器。`MPI_COMM_SPLIT`采用`color`用于将进程分组为新的子通信器的 a - 具有相同`color`最终的进程在同一个子通信器中。在您的情况下`color`，应该等于调用进程所在的行数。拆分操作还需要一个`key`用于对新子通信器中的进程进行排序的 a。它应该等于调用进程所在的列数，例如：

```
// Compute grid coordinates based on the rank
int proc_row = rank / 3;
int proc_col = rank % 3;
MPI_Comm comm_row;

MPI_Comm_split(MPI_COMM_WORLD, proc_row, proc_col, &comm_row); 
```

将再次`comm_row`包含一个子通信器的句柄，它只跨越与调用进程相同的行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-07T05:50:17.543

MPI-3.0 草案包括一个非阻塞`MPI_Ibcast`集合。虽然非阻塞集合还没有正式成为标准的一部分，但它们已经在 MPICH2 和（我认为）在 OpenMPI 中可用。

或者，您可以从单独的线程开始阻塞`MPI_Bcast`调用（我假设 R0、R1 和 R2 是不同的通信器）。

第三种可能性（可能或不可能）是重组数据，以便只需要一次广播。

# javascript - jScrollpane 正在工作但没有创建容器

> ID：11372015
> 
> 赞同：0
> 
> 时间：2012-07-07T03:27:22.927
> 
> 标签：javascript, jquery, jscrollpane

我有 jScrollpane 在家里的 mac 上工作，但是我刚刚将它上传到我的 CentOS Web 服务器，但我遇到了问题。滚动条按原样显示，但是我设置了“showArrows：true”，但没有得到任何箭头。此外，当我在 windows 和 mac 上检查 firefox 或 chrome 中的元素时，class="jspContainer" 和所有其他元素、jspPane、jspVerticalBar 等都不会出现在 html 中。考虑到这种情况，如果根本没有滚动条会更有意义。

我在drupal中使用它，所以我不确定这是否是因为还有其他javascripts正在运行。主要问题是，如果没有由 javascript 创建的容器等，我无法为滚动条设置主题，因为没有为 css 创建 div 来对其进行操作。

我最初在我的 Mac 上遇到了同样的问题，我注释掉了我在 jQuery(document).ready 中运行的其他一些 js，然后它开始工作。在启动 jScrollpane 后，我放回了我在 jQuery(document).ready 中运行的所有其他东西，它继续工作。我已经重新启动了 apache，清除了 mac 上的缓存等，以确保它不仅仅是从缓存中工作，而且我在服务器上也做了同样的事情。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T03:00:59.690

我刚刚从 drupal 安装了 jScrollPane 模块，而不是手动添加脚本，解决了这个问题。我应该记得在尝试自己做之前先寻找一个模块，这要快得多。

# xcode - 如何在 Xcode 4.5 中关闭垃圾收集，并在打开 ARC 时摆脱 clang 错误 1？

> ID：11372018
> 
> 赞同：9
> 
> 时间：2012-07-07T03:28:04.103
> 
> 标签：xcode, compiler-errors

我刚刚重新打开了一个设置为使用垃圾收集的项目，并且我上次在 Xcode 3 中打开它。现在在 Xcode 4.5 中再次打开它，并希望对其进行现代化改造，我正在尝试打开 ARC。但是，在构建时，它导致了 clang 错误 1。查看 Xcode 日志中的更多详细信息，我看到了以下消息：

clang：错误：不能同时指定“-fobjc-arc”和“-fobjc-gc-only”

啊，我需要关闭我之前使用的垃圾收集。但是，在搜索“垃圾”或“收集”一词的构建设置时，我在 Xcode 中找不到该设置（使用目标信息中构建设置中的搜索字段）。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-07T03:28:05.787

可能是因为垃圾收集现在已弃用，该设置已变成用户定义的设置，并使用 gcc 名称“GCC_ENABLE_OBJC_GC”。这就是为什么在搜索“垃圾”或“收藏”时它不会出现的原因。相反，您必须在 Build Settings 底部查找该设置，或使用搜索字段搜索字符串 GCC_ENABLE_OBJC_GC。

这需要在项目级别或目标级别完成。

# mysql - 如何使用 group by 删除重复值

> ID：11372023
> 
> 赞同：2
> 
> 时间：2012-07-07T03:29:53.217
> 
> 标签：mysql

示例数据库：

```
ID StudentName StudentClass
1  John        A
2  John        B
3  Peter       A
4  John        A
5  John        B 
```

我想要的结果应该是

```
ID StudentName StudentClass
1  John        A
2  John        B
3  Peter       A 
```

声明

```
DELETE FROM Student
 WHERE ID NOT IN (SELECT * 
                    FROM (SELECT MIN(n.ID)
                            FROM Student n
                        GROUP BY n.StudentName) x) 
```

我如何在**A 和 B类上保留****John**的名字？

 *** * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T03:49:52.470

```
DELETE a FROM Student a
LEFT JOIN
    (
        SELECT MIN(ID) AS minid
        FROM Student
        GROUP BY StudentName, StudentClass
    ) b ON a.id = b.minid
WHERE
    b.minid IS NULL 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-07T04:32:09.417

甚至禁止插入此类重复项的更好方法是多列唯一索引（它也会优化您的搜索）。方法如下：

```
ALTER TABLE `Student`
  ADD UNIQUE INDEX `idx` (`StudentName`, `StudentClass`) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-07T03:45:21.483

您应该能够`Students`使用 JOIN 谓词来连接自身，以确保 JOIN 匹配重复的学生，并删除加入的行：

```
DELETE 
  duplicate_students.* 
FROM Students JOIN Students as duplicate_students 
  ON Students.StudentName = duplicate_students.StudentName
  AND Students.StudentClass = duplicate_students.StudentClass
  AND duplicate_students.ID > Students.ID 
```

注意：请先备份您的数据；我对丢失的数据不承担任何责任 :-) 这是一个概念性的想法，尚未经过测试。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-07T05:12:26.340

这应该有效：

```
DELETE S FROM Student S
INNER JOIN(
    SELECT MIN(ID) AS ID,StudentName,StudentClass FROM Student
    GROUP BY StudentName,StudentClass
) S2 ON S.ID != S2.ID AND S.StudentName = S2.StudentName AND S.StudentClass = S2.StudentClass 
```

它基本上从子查询中的所有重复记录中选择最小 ID。然后我们简单地删除与该类和名称匹配的所有内容，但我们不匹配最小 ID，因此在一天结束时，我们将（可能）保留第一个记录而不是重复记录并消除休息。**

# linux - GCC 错误消息“错误：不支持 `mov'”是什么意思？

> ID：11372024
> 
> 赞同：7
> 
> 时间：2012-07-07T03:29:59.660
> 
> 标签：linux, assembly, gcc, system-calls, inline-assembly

我只是想编译一些我从书中输入的简单示例代码，而 GCC 给了我上述错误。这是我的代码：

```
$ cat -n test.cpp

 1  #define READ_COMMAND    3
 2  
 3  #define MSG_LENGTH  128
 4  
 5  #include <stdlib.h>
 6  #include <stdio.h>
 7  
 8  int main(int argc, char *arg[])
 9  {
10      int syslog_command = READ_COMMAND;
11      int bytes_to_read = MSG_LENGTH;
12      int retval;
13      char buffer[MSG_LENGTH];
14  
15      asm volatile(
16          "movl %1, %%ebx\n\t"
17          "movl %2, %%ecx\n\t"
18          "movl %3, %%edx\n\t"
19          "movl $103, %%eax\n\t"
20          "int $128\n\t"
21          "movl %%eax, %0"
22          :"=r" (retval)
23          :"m"(syslog_command),"r"(buffer),"m"(bytes_to_read)
24          :"%eax","%ebx","%ecx","%edx");
25      if (retval > 0) printf("%s\n", buffer);
26  
27  }
28  
29 
```

该代码应该调用系统调用以从内核环形缓冲区`syslog()`读取最后 128 个字节。`printk()`以下是有关我的操作系统和系统配置的一些信息：

`uname -a`：

> Linux 3.2.0-26-generic #41-Ubuntu SMP Thu Jun 14 17:49:24 UTC 2012 x86_64 x86_64 x86_64 GNU/Linux

`gcc -v`：

```
Using built-in specs.
COLLECT_GCC=gcc
COLLECT_LTO_WRAPPER=/usr/lib/gcc/x86_64-linux-gnu/4.6/lto-wrapper
Target: x86_64-linux-gnu 
```

> 配置：../src/configure -v --with-pkgversion='Ubuntu/Linaro 4.6.3-1ubuntu5' --with-bugurl=file:///usr/share/doc/gcc-4.6/README。错误 --enable-languages=c,c++,fortran,objc,obj-c++ --prefix=/usr --program-suffix=-4.6 --enable-shared --enable-linker-build-id --with- system-zlib --libexecdir=/usr/lib --without-included-gettext --enable-threads=posix --with-gxx-include-dir=/usr/include/c++/4.6 --libdir=/usr/ lib --enable-nls --with-sysroot=/ --enable-clocale=gnu --enable-libstdcxx-debug --enable-libstdcxx-time=yes --enable-gnu-unique-object --enable-plugin --enable-objc-gc --disable-werror --with-arch-32=i686 --with-tune=generic --enable-checking=release --build=x86_64-linux-gnu --host=x86_64- linux-gnu --target=x86_64-linux-gnu

```
Thread model: posix

gcc version 4.6.3 (Ubuntu/Linaro 4.6.3-1ubuntu5) 
```

这是完整的错误：

```
$ gcc test.cpp

test.cpp: Assembler messages:

test.cpp:25: Error: unsupported for `mov' 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-07-07T03:55:39.020

您正试图在 64 位机器上编译 32 位汇编代码。您列出的内联程序集编译为：

```
movl -24(%rbp), %ebx
movl %rsi, %ecx       <--- error here
movl -28(%rbp), %edx
movl $103, %eax
int $128
movl %eax, %r12d 
```

如您所见，您试图将 64 位寄存器存储在 32 位寄存器中，这是非法的。更重要的是，这也不是 64 位 ABI 系统调用协议。

尝试编译`-m32`以强制使用 32 位 ABI。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-08-19T07:59:33.430

您应该使用“movq”来移动 64 位值。

像这样看：

```
int main(void) 
{
  long str_len = 15;
  const char* str = "hello world!\n\r";

asm volatile(
    "movl $4, %%eax\n\t"
    "movl $1, %%ebx\n\t"
    "movq %0, %%rcx\n\t"
    "movq %1, %%rdx\n\t"
    "int      $0x80\n\t"
    :       
    :"r"(str), "r"(str_len)
    :"eax","ebx", "rcx", "rdx"
);
return 0; 
```

}

# python - 找不到 Python urllib2

> ID：11372033
> 
> 赞同：-1
> 
> 时间：2012-07-07T03:31:08.863
> 
> 标签：python, urllib2

测试安装在运行 SDK 2.2 的 Android 模拟器上的 python 脚本时出现错误

我在模拟器中安装了“Python_for_android_r1.apk”和“sl4a_r5.apk”。看来我的代码正在尝试导入以下内容：

```
from urllib import urlencode
from urllib2 import urlopen 
```

根据下面的错误，我可以告诉 urllib2 没有找到。

```
( FILE "/home/manuel/A;tanaStudio3Workspace/python-for-android/python-build/output/usr/lib/python2.6/urllib2.py, line 124 in urlopen ) 
```

有什么想法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T16:37:56.560

似乎找到了您的 urllib 模块。如果未找到该模块，python 将在导入时返回错误。

查看错误，您似乎遇到了 urlopen 问题。您尝试打开的网址是否有效？urllib2 中的第 124 行是指您用来获取响应的开启程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T18:42:08.997

`A;tanaStudio3Workspace`

这很奇怪。您的导入模块没有问题，但路径看起来确实错误。我可以假设如果你修复了路径，它会没事的，但为了进一步调查，你需要提供一个真正的回溯。

# c++ - SOCKET 没有命名类型

> ID：11372036
> 
> 赞同：0
> 
> 时间：2012-07-07T03:31:24.797
> 
> 标签：c++, linux, sockets

正如问题所说，我对以下代码有疑问：

```
#pragma once
#include "includes.h"
#include "buffer.h"

class CSocket
{
    bool udp;
    int format;
    char formatstr[30];
    static sockaddr SenderAddr;
    int receivetext(char*buf, int max);
public:

    SOCKET sockid;
    CSocket(SOCKET sock);
    CSocket();
    ~CSocket();
    bool tcpconnect(char*address, int port, int mode);
    bool tcplisten(int port, int max, int mode);
    CSocket* tcpaccept(int mode);
    char* tcpip();
    void setnagle(bool enabled);
    bool tcpconnected();
    int setsync(int mode);
    bool udpconnect(int port, int mode);
    int sendmessage(char*ip, int port, CBuffer* source);
    int receivemessage(int len, CBuffer*destination);
    int peekmessage(int size, CBuffer*destination);
    int lasterror();
    static char* GetIp(char*address);
    static int SockExit(void);
    static int SockStart(void);
    static char* lastinIP(void);
    static unsigned short lastinPort(void);
    static char* myhost();
    int SetFormat(int mode, char* sep);
}; 
```

我正在使用代码::块。我在构建时收到以下错误：

```
/home/nick/Desktop/39dylibsource/Base Code/39dll/socket.h|15|error: ‘SOCKET’ does not name a type|
/home/nick/Desktop/39dylibsource/Base Code/39dll/socket.h|16|error: expected ‘)’ before ‘sock’|
/home/nick/Desktop/39dylibsource/Base Code/39dll/main.cpp|16|error: expected constructor, destructor, or type conversion before ‘(’ token|
/home/nick/Desktop/39dylibsource/Base Code/39dll/main.cpp|25|error: expected constructor, destructor, or type conversion before ‘(’ token|
/home/nick/Desktop/39dylibsource/Base Code/39dll/main.cpp|34|error: expected constructor, destructor, or type conversion before ‘(’ token|
/home/nick/Desktop/39dylibsource/Base Code/39dll/main.cpp|43|error: expected constructor, destructor, or type conversion before ‘(’ token|
/home/nick/Desktop/39dylibsource/Base Code/39dll/main.cpp|50|error: expected constructor, destructor, or type conversion before ‘(’ token|
/home/nick/Desktop/39dylibsource/Base Code/39dll/main.cpp|59|error: expected constructor, destructor, or type conversion before ‘(’ token|
/home/nick/Desktop/39dylibsource/Base Code/39dll/main.cpp|66|error: expected constructor, destructor, or type conversion before ‘(’ token|
/home/nick/Desktop/39dylibsource/Base Code/39dll/main.cpp|74|error: expected constructor, destructor, or type conversion before ‘(’ token|
/home/nick/Desktop/39dylibsource/Base Code/39dll/main.cpp|85|error: expected constructor, destructor, or type conversion before ‘(’ token|
||=== Build finished: 11 errors, 0 warnings ===| 
```

我在引用的includes.h中包含了以下内容：

```
#include <sys/socket.h>
#include <sys/types.h>

#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <iostream> 
```

我是否缺少指令或库？SOCKET 拼写不同吗？任何照明都会很棒！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T03:38:35.743

套接字文件描述符只是一个整数。`SOCKET`因此，在您的代码中替换`int`为，或使用`typedef`. （我不确定你以前在哪里看到`SOCKET`过，但这不是标准的。）

# c++ - 无符号与有符号范围保证

> ID：11372044
> 
> 赞同：9
> 
> 时间：2012-07-07T03:32:56.093
> 
> 标签：c++, c

我花了一些时间研究标准参考资料，但我无法找到以下问题的答案：

*   C/C++ 标准是否在技术上保证，给定有符号整数类型 S 及其无符号对应物 U，每个可能的 S 的绝对值始终小于或等于 U 的最大值？

我得到的最接近的是来自 C99 标准的第*6.2.6.2*节（C++ 的措辞对我来说更神秘，我认为它们在这方面是等价的）：

> 对于有符号整数类型，对象表示的位应分为三组：值位、填充位和符号位。(...) 作为值位的每个位应与对应无符号类型的对象表示中的相同位具有相同的值（如果有符号类型中有 M 个值位，无符号类型中有 N 个值位，则 M≤ N)。

那么，在假设的 4 位有符号/无符号整数类型中，是否有任何东西阻止无符号类型具有 1 个填充位和 3 个值位，以及有符号类型具有 3 个值位和 1 个符号位？在这种情况下，无符号的范围是 [0,7]，而有符号的范围是 [-8,7]（假设二进制补码）。

万一有人好奇，我现在依靠一种技术来提取负整数的绝对值，该技术包括首先转换为无符号对应物，然后应用一元减运算符（例如 - 3 通过强制转换变为 4，然后通过一元减号变为 3）。这将在上面的 -8 示例中中断，无法以无符号类型表示。

编辑：感谢 Keith 和 Potatoswatter 下面的回复。现在，我的最后一点疑问是标准措辞中“子范围”的含义。如果这意味着严格的“小于”包含，那么我上面的示例和 Keith 下面的示例不符合标准。如果子范围可能是无符号的整个范围，那么它们就是。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-07T04:08:57.087

对于 C，答案是否定的，没有这样的保证。

我将讨论类型`int`和`unsigned int`；这同样适用于任何对应的有符号和无符号类型对（除了`char`and `unsigned char`，它们都不能有填充位）。

在您引用的部分中，该标准隐含地保证`UINT_MAX >= INT_MAX`，这意味着每个非负值`int`都可以表示为`unsigned int`。

但以下是完全合法的（我将用它`**`来表示幂）：

```
CHAR_BIT == 8
sizeof (int) == 4
sizeof (unsigned int) == 4
INT_MIN  = -2**31
INT_MAX  = +2**31-1
UINT_MAX = +2**31-1 
```

这意味着它`int`有 1 个符号位（它必须）和 31 个值位，一个普通的 2 的补码表示，并且`unsigned int`有 31 个值位和一个填充位。 `unsigned int`设置了该填充位的表示可能是陷阱表示，或者是未设置填充位的值的额外表示。

这可能适用于支持 2 补码有符号算术但对无符号算术支持较差的机器。

鉴于这些特征，`-INT_MIN`（数学值）在 范围之外`unsigned int`。

另一方面，我严重怀疑是否存在这样的现代系统。填充位是标准允许的，但非常罕见，我不希望它们变得更常见。

您可以考虑添加如下内容：

```
#if -INT_MIN > UINT_MAX
#error "Nope"
#endif 
```

到你的源代码，所以只有当你能做你想做的事情时它才会编译。（当然，您应该考虑比 更好的错误消息`"Nope"`。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-07T03:47:31.293

你说对了。在 C++11 中，措辞更加清晰。§3.9.1/3：

> 有符号整数类型的非负值范围是对应无符号整数类型的子范围，每个对应的有符号/无符号类型的值表示应相同。

但是，这两种对应类型之间的联系究竟有什么意义呢？它们的大小相同，但是如果您只有局部变量，那就没关系了。

> 万一有人好奇，我现在依靠一种技术来提取负整数的绝对值，该技术包括首先转换为无符号对应物，然后应用一元减运算符（例如 - 3 通过强制转换变为 4，然后通过一元减号变为 3）。这将在上面的 -8 示例中中断，无法以无符号类型表示。

您需要处理机器支持的任何数字范围。与其强制转换为无符号对应物，不如强制转换为任何无符号类型就足够了：如果需要，比对应物大一个。如果没有足够大的类型存在，那么机器可能无法执行您想要的操作。

# javascript - 在服务器端创建 html 元素 VS 以 JSON 格式获取数据并使用 javascript 创建标签

> ID：11372048
> 
> 赞同：0
> 
> 时间：2012-07-07T03:33:54.713
> 
> 标签：javascript, ajax, performance

我想创建一个 AJAX 搜索来查找和列出论坛中的主题（只是主题链接和主题）。问题是：哪种方法更好更快？

1.  GET 线程列表作为 JSON 字符串并将其转换为对象，然后遍历项目并创建一个`<li/>`or `<tr>`，写入数据（链接、主题）并将其附加到线程列表。（jQuery 驱动）

2.  获取包含在 HTML 标记中的线程列表并打印（或使用`innerHTML`and `$(e).html()`）

谢谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T03:56:43.197

我更喜欢第二种方法。

我认为在服务器端，您必须将数据转换为 JSON 或 html 格式，所以为什么不直接转到浏览器理解的格式并避免在客户端重新处理它。您还可以轻松地调整第二种方法，以便为禁用 JavaScript 的用户优雅地降级（这样他们仍然可以通过标准的非 JS 链接看到结果。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T04:05:04.910

我不确定哪种方法更好（我认为第二种方法更好，因为它似乎更少接触数据），但确定的方法是尝试两种方法并衡量哪种方法更好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T14:19:58.140

如果 javascript 需要很长时间来处理 JSON 并填充 html，那么服务器生成的 HTML 肯定会更快。

但是，为了可维护性，JS 更好。您可以通过更改 JS 来更改 HTML 生成，而不必更新服务器端代码、制作 delta 版本等。

最好的方法是衡量它到底有多慢。有时我们认为它很慢，但是当你在现实世界中尝试它时，你并没有真正看到很大的不同。您在传输 JSON 对象时可能会有很大的延迟。如果您从服务器发送 html 表示，该延迟仍然会存在并且实际上会增加。

所以，如果你的瓶颈真的是解析 JSON 并生成 html，而不是从服务器传输，那么从服务器发送 html 是有意义的。

但是，您可以在生成 html 和解析 JSON 时进行大量优化。有很多技巧可以让它更快。最好是你给我看代码，我可以帮你做一个快速的基于 JS 的实现，或者告诉你在服务器上做。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-07T05:14:18.397

“更快”可能是第二种方法。

“更好”可能是主观的。

例如，我一直处于无法更改服务器返回的 html 的情况（作为前端开发人员），我希望他们刚刚交付了一个 json 对象，这样我就可以按照我想要的方式设计页面。

此外，（可能不是特定于您的用例），在初始页面加载时提供所有 html 可能会增加页面大小和加载时间。

# assembly - 锁前缀的范围是什么？

> ID：11372052
> 
> 赞同：3
> 
> 时间：2012-07-07T03:35:25.207
> 
> 标签：assembly, linux-kernel, x86, kernel

据说以“lock”为前缀的汇编指令是原子的。我想知道“锁”是否只能影响一条汇编指令；汇编指令本身不是原子的吗？

以下是 linux 内核中的原子函数示例：

```
static __inline__ int atomic_sub_and_test(int i, atomic_t *v)
 { unsigned char c;
 __asm__ __volatile__(
 LOCK "subl %2,%0; sete %1" 
    :"=m" (v->counter), "=qm" (c) 
     :"ir" (i), "m" (v->counter) : "memory"); 
return c; } 
```

在这个例子中 subl 和 sete 可以被打断吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-07T03:42:15.773

锁定前缀影响单个指令。

指令在修改多个 CPU 之间共享的内存时不再是原子的。涉及读取内存操作数、对其执行某些操作（例如 AND、XOR、INC 等）然后将其写回的修改不会被其他 CPU 视为原子操作。锁定前缀“锁定”了内存位置，因此 3 个步骤（读取、修改、写入）看起来是一个，即其他 CPU 只能观察锁定指令之前和之后的内容。

请参阅 Intel 或 AMD 的官方 CPU 文档。

**编辑**：在您新添加的示例中，如果我们谈论的是中断，这些指令都不能被中断。中断发生在整个指令之间。锁定前缀使`sub`指令具有原子性。该`sete`指令不是原子的，它可以将`ZF`标志转换为零或非零整数值。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-07T03:41:10.780

相对于在其他 CPU 内核上同时运行的其他指令而言，一条指令不是原子的。前缀的`LOCK`作用是锁定总线，以便在锁定指令运行时其他内核无法访问内存，从而防止两个内核尝试同时访问同一位置的冲突。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-07T03:41:08.333

只有极少数特定的汇编指令是原子的。x86 在很大程度上是一种 CISC 架构，这意味着单条指令可以完成*大量*工作，其中单条指令可以将内存地址中的值加载到寄存器中，对其执行操作，然后将结果存储回内存中。这是一个复杂的操作，需要很多时间和 CPU 周期来执行；为了提高性能，许多这样的指令都是流水线的，它们的执行顺序是交织在一起的。

基本上，汇编是一门与其他语言一样的语言。特别是在谈到 CISC 架构时，可以在单个命令中执行许多“高级”构造和操作，除非在指令文档或`lock`修饰符中明确指定，否则它们不能保证原子执行。

# python - 随机选择一个目录下的100个文档

> ID：11372054
> 
> 赞同：7
> 
> 时间：2012-07-07T03:35:35.470
> 
> 标签：python, python-3.x

目录下大约有2000个文档。我想随机选择一些文档并自动将它们复制到新目录。

关于在某个目录下生成一个文档名的[一些相关信息。](https://stackoverflow.com/questions/701402/best-way-to-choose-a-random-file-from-a-directory)

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-07T03:37:18.190

尝试：

```
import shutil, random, os
dirpath = 'your/read/location'
destDirectory = 'your/destination'

filenames = random.sample(os.listdir(dirpath), 100)
for fname in filenames:
    srcpath = os.path.join(dirpath, fname)
    shutil.copyfile(srcpath, destDirectory) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-11-24T16:57:37.093

```
import shutil, random, os
dirpath = 'your/read/location'
destDirectory = 'your/destination'

filenames = random.sample(os.listdir(dirpath), 100)
for fname in filenames:
    srcpath = os.path.join(dirpath, fname)
    destPath = os.path.join(destDirectory, fname)
    shutil.copyfile(srcpath, destPath) 
```

根据@inspectorG4dget 的回答（并由@olinox14 编辑），我发现这个小调整最适合我的情况。我不断从 shutil.copyfile() 得到一个“IsDirectoryError”，所以我检查了文档并意识到函数复制到文件（而不是目录）。此调整将文件名保留在新目录中。

# android - 为什么 Eclipse 无法识别 Notification.Builder 类中的 build() 方法来返回 Notification 对象？

> ID：11372055
> 
> 赞同：5
> 
> 时间：2012-07-07T03:35:45.793
> 
> 标签：android, eclipse, deprecated, notificationmanager

这是我的代码：

* * *

```
NotificationManager mNotificationManager = (NotificationManager) c.getSystemService(ns);

    //Instantiate the notification

    CharSequence tickerText = "Hello";
    long when = System.currentTimeMillis();
    Notification.Builder builder = new Notification.Builder(c)
                                .setTicker(tickerText)
                                .setWhen(when)
                                .setContentTitle("Test Notification")
                                .setContentText(arg1.getStringExtra("info"))
                                .setSmallIcon(R.drawable.ic_launcher)
                                .setAutoCancel(true);
    Notification notification = builder.getNotification();
    mNotificationManager.notify(88, notification); 
```

它可以找到，但`Notification notification = builder.getNotification();`不推荐使用。正如我应该做的那样`Notification notification = builder.build();`。问题是 Eclipse 没有这样识别它，这意味着它不会让我编译。该文档很清楚`build()`存在并且它是首选方法，但它不适用于我的目的。我想使用非弃用的代码，所以任何帮助将不胜感激。

**进口**

* * *

```
import android.app.Notification;
import android.app.Notification.Builder;
import android.app.NotificationManager;
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.util.Log; 
```

请注意，这`import android.app.Notification.Builder;`是说它没有被使用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T14:23:11.543

如果您想为**低于**11 的版本 SDK 开发，您可以使用此代码代替**android.app.Notification.Builder**类进行创建通知：

```
private void createNotification(){
    NotificationManager mNotificationManager = (NotificationManager) getSystemService(Context.NOTIFICATION_SERVICE);
    Notification notification = new Notification(R.drawable.ic_launcher, "Hello", System.currentTimeMillis());
    Intent notificationIntent = new Intent(this, YourActivity.class);

    Random r = new Random();
    int notificationId = r.nextInt();
    notificationIntent.putExtra("n_id", notificationId);
    PendingIntent contentIntent = PendingIntent.getActivity(this, notificationId, notificationIntent, PendingIntent.FLAG_UPDATE_CURRENT);
    notification.defaults |= Notification.DEFAULT_SOUND;
    notification.setLatestEventInfo(this, "Party", "Welcome!", contentIntent);
    mNotificationManager.notify(notificationId, notification);      
} 
```

您可以像这样在 YourActivity 中取消此通知：

```
public class YourActivity extends Activity{ 

  @Override
  public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.your_activity);

    int notificationId = getIntent().getIntExtra("n_id", -1);

    if (notificationId!=-1) {
        NotificationManager mNotificationManager = (NotificationManager) getSystemService(Context.NOTIFICATION_SERVICE);
        mNotificationManager.cancel(notificationId);
    }
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-07T04:33:24.167

这只发生在您针对不包含所需**方法/api**（在您的情况下是`build()`）的版本编译您的应用程序代码时。

如果您正在编译的版本中没有 build，我建议您使用更高版本的 Android 进行编译，为了向后兼容，您始终在 manifest 中有**最低 sdk 版本。**

谢谢

# javascript - 如何制作具有鼠标悬停效果的水平滚动条？

> ID：11372060
> 
> 赞同：1
> 
> 时间：2012-07-07T03:37:21.813
> 
> 标签：javascript, jquery, scrollbar

大家好，我一直在网上搜索一些 jquery 或 javascript 教程或水平滚动条插件，我找到了许多插件 asnd 教程，但不是我想要的。

现在我正在使用 tinyscroll，我发现它有很多错误，有人可以帮助我处理下一个效果。

鼠标悬停：鼠标悬停在右侧或左侧时，它会自行滚动。隐藏时的阴影：当图像隐藏在左侧或右侧时，阴影效果会产生“它在该图层的底部”效果。滚动条：具有 80% 不透明度鼠标滚动的简单条：可以使用鼠标滚动。

我需要这个页面中的电影滚动条之类的东西：

Cuevana.tv

我知道 html 和 css，但 css -webkit 样式无法做到这一点。

我真的没有任何代码可以开始，请帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T03:42:23.370

我在这里引用了一个好的 SOF 答案：[jquery Horizo​​ntal scroll](https://stackoverflow.com/questions/6122635/jquery-horizontal-scroll)

试试 hoverscroll jQuery 插件 - [http://rascarlito.free.fr/hoverscroll/](http://rascarlito.free.fr/hoverscroll/)

也可以试试 Smooth Div Scroll - [http://www.smoothdivscroll.com/demo.html](http://www.smoothdivscroll.com/demo.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T04:28:54.613

试试[这个](http://www.tonylea.com/go/examples/jquery-horizontal-scrollbars/)。

它具有水平滚动条和鼠标滚动功能。

使用css，您可以让它看起来与您发布的链接中的完全一样。（通过图像容器等定位左右插入符号等......）

# django - django-registration - 我如何更改电子邮件中的 example.com？

> ID：11372064
> 
> 赞同：10
> 
> 时间：2012-07-07T03:39:44.460
> 
> 标签：django, django-registration

我有 django-registration 设置，它会发送电子邮件 - 耶！

但是，我决定将我的网站称为“example.com”，这不是我决定使用的名称。很酷的名字，但不适合我。

如何将 example.com 更改为其他内容？我在某处读到了我去管理页面的地方，但是 - 剧透警告 - 我从未在 django 中使用过管理页面，目前也没有积极计划（但也许有一天？）

所以我去管理页面——`/admin/sites/site/`果然我可以看到“example.com”和“域名”。但现在呢？我添加了我的网站域名和“显示名称”，但如何*选择*使用它？我什至删除了example.com！

但是，该电子邮件坚持仍然发送 example.com。我阅读的所有网站都只是说“使用管理员”，但我不知道我的管理员是否坏了（这很奇怪，因为我真的没有碰过它）或者我是否缺少链接？

有任何想法吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-07T04:54:57.007

您最初在`admin/sites/site/`页面上看到的带有`example.com`和的条目`domain name`是您应该简单地编辑以获得最快结果的条目（而不是添加新的 Site 对象）。

**到底发生了什么？**

在您的设置文件中，Django`SITE_ID`在您创建项目时自动定义一个属性，默认设置为`1`. 这指向`example.com`您在管理员中看到的站点。如果您想使用`Site`您创建的对象，或者稍后在需要该功能时更改站点对象，您可以将该属性更改为您创建`SITE_ID`的对象的 id 。`Site`希望这可以帮助！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-07-17T13:53:52.893

模板中的站点对象来自 Django Site 模型。当您执行同步数据库时，它会自动默认为 example.com

如果您登录到 Django 的管理界面，您将找到“站点”。在里面，您将能够更改`example.com`为您喜欢的任何内容。`settings.py`只需在 as 中设置您要用作当前站点的站点的 ID `SITE_ID = ID`。例如，如果您将`example.com`域名编辑为`mysite.com`并将名称显示为`MYSITE`. 然后`SITE_ID = 1`因为这是我们“站点”表中唯一的内容，它`ID`是`1`. 如果想添加另一个“站点”详细信息而`example.com`保持不变，请记住将您添加的那个设置`SITE_ID`为`ID`

![在此处输入图像描述](../Images/0b9bedb9836990e0126a514ecaab9aec.png)

# arrays - MongoDB：如何更新数组中的单个子元素，由数组中的索引引用？

> ID：11372065
> 
> 赞同：101
> 
> 时间：2012-07-07T03:39:52.213
> 
> 标签：arrays, mongodb

我正在尝试更新 mongodb 文档中数组中包含的单个子元素。我想使用它的数组索引来引用该字段（数组中的元素没有任何我可以保证是唯一标识符的字段）。似乎这应该很容易做到，但我无法弄清楚语法。

这是我想在伪 json 中做的事情。

前：

```
{
  _id : ...,
  other_stuff ... ,
  my_array : [
    { ... old content A ... },
    { ... old content B ... },
    { ... old content C ... }
  ]
} 
```

后：

```
{
  _id : ...,
  other_stuff ... ,
  my_array : [
    { ... old content A ... },
    { ... NEW content B ... },
    { ... old content C ... }
  ]
} 
```

似乎查询应该是这样的：

```
//pseudocode
db.my_collection.update(
  {_id: ObjectId(document_id), my_array.1 : 1 },
  {my_array.$.content: NEW content B }
) 
```

但这不起作用。我花了太长时间搜索 mongodb 文档，并尝试了这种语法的不同变体（例如使用`$slice`等）。我找不到任何关于如何在 MongoDB 中完成这种更新的明确解释。

* * *

## 回答 #1

> 赞同：84
> 
> 时间：2012-07-07T14:29:00.327

正如预期的那样，一旦您知道如何查询，查询就很容易了。这是python中的语法：

```
db["my_collection"].update(
    { "_id": ObjectId(document_id) },
    { "$set": { 'documents.'+str(doc_index)+'.content' : new_content_B}}
) 
```

* * *

## 回答 #2

> 赞同：61
> 
> 时间：2015-12-09T11:40:15.460

Mongo Shell 中由索引（例如 1 ）引用的数组元素的更新也可以通过直接指示索引值来完成：

```
db.my_collection.update(
    {_id : "document_id"},
    {$set : {"my_array.1.content" : "New content B"}}
) 
```

* * *

## 回答 #3

> 赞同：60
> 
> 时间：2015-05-05T17:03:38.157

在 mongo 风格中，使用 '$' 位置运算符。查看此[链接](http://docs.mongodb.org/manual/reference/operator/update/positional/?_ga=1.12567092.1864968360.1429722620#up._S_)了解详情。

```
db.my_collection.update(
  {_id: ObjectId(document_id), my_array.1 : 1 },
  { $set: { "my_array.$.content" : "NEW content B" } }
) 
```

* * *

## 回答 #4

> 赞同：24
> 
> 时间：2020-05-20T17:20:33.347

当需要更新数组元素而不知道它的实际索引但具有**元素的唯一标识符时：**

```
// Modify a comment in a bucket
db.POST_COMMENT.update(
    {
        "_id": ObjectId("5ec424a1ed1af85a50855964"),
        "bucket.commentId": "5eaf258bb80a1f03cd97a3ad_lepf4f"
    },
    {
        $set: {
            "bucket.$.text": "Comment text changed",
            "bucket.$.createdDate": ISODate("2015-12-11T14:12:00.000+0000")
        }
    }
) 
```

这`"bucket.commentId"`是数组元素的唯一标识符。

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2017-07-21T10:48:28.843

```
db.my_collection.update(
  {_id: ObjectId(document_id), my_array : { ... old content A ... } },
  { $set: { "my_array.$.content" : "NEW content B" } }
) 
```

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2020-03-15T20:27:47.793

在 Javascript 中使用反引号的一种简洁方法是：

```
 const index = 1;

 ...  {   $set: { [`myArray.${index}.value`]: "new content"}  },  ... 
```

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2020-06-16T17:14:32.387

*当需要更新数组元素而不知道它是实际索引但具有元素的唯一标识符时*

```
db.getCollection('profiles').update(
  {
    'userId':'4360a380-1540-45d9-b902-200f2d346263',
    'skills.name':'css'
  },
  {
      $set: {'skills.$.proficiencyLevel': 5}
  }, 
  {
      multi: true
  }
) 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2019-05-03T14:33:22.550

您可以使用 mongoDB 的 updateOne 函数传递数组中元素的索引，如果*旧内容 B*的键是每个示例的“值”：

```
[
...
"value" : "old content A"
"value" : "old content B"
"value" : "old content C"
...
] 
```

命令应该是这样的：

```
db.collection.updateOne({"_id" : "...,"},{$set: {"my_array.1.value": "NEW content B"}}) 
```

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2021-06-12T11:19:25.367

如果您想从以下文档更新具有 _id = 60c4918d74c30165ba585c14 的推荐的作者姓名：

```
"business": {
    "ownerId": "60a5ebad7432d91b853c0277",
    "testimonials": [
        {
            "_id": "60c4912877dd5664f2201b08",
            "authorName": "user1",
            "authorBio": "User from 10 years",
            "image": "user1/img1",
            "review": "asdfiuahsdfpoiuashdpfoaspdlfkjn;alsfpuoh"
        },
        {
            "_id": "60c4918d74c30165ba585c14",
            "authorName": "user2",
            "authorBio": "User from 3 years",
            "image": "user/img1",
            "review": "asdpfuahsfljnsadfoihsf."
        }
    ],
    "createdAt": "2021-06-11T20:12:56.666Z",
    "updatedAt": "2021-06-12T11:11:56.696Z",

} 
```

然后以下猫鼬查询有效：

```
await BusinessModel.updateOne(
        {
            '_id': Mongoose.Types.ObjectId(businessId),
            'testimonials._id': Mongoose.Types.ObjectId('60c4918d74c30165ba585c14')
        },
        {
            $set: { 'testimonials.$.authorName' : 'new author name' } 
        }
    ); 
```

另请参阅[https://docs.mongodb.com/drivers/node/fundamentals/crud/write-operations/embedded-arrays/](https://docs.mongodb.com/drivers/node/fundamentals/crud/write-operations/embedded-arrays/)

# haskell - 调试不需要的严格性？

> ID：11372076
> 
> 赞同：11
> 
> 时间：2012-07-07T03:43:04.990
> 
> 标签：haskell, lazy-evaluation, strictness, tying-the-knot

我有一个问题，我不知道如何推理。我正要问是否有人可以帮助我解决具体问题，但我突然意识到我可以问一个更笼统的问题，并希望因此得到更好的总体理解。希望。所以这里是：

当您的程序太懒惰时，这通常很明显，因为您最终会遇到诸如空间泄漏之类的明显问题。我有相反的问题：我的程序太严格了。我正在尝试[打结](http://mergeconflict.com/archives/57) [，](https://stackoverflow.com/questions/11060565/tying-the-knot-with-a-state-monad)并发现我尝试做的某些事情会以某种方式击败我需要的懒惰。所以我的一般问题是，**如何调试不需要的严格性？**

* * *

为了完整起见，这是我的具体情况：我在 中`RWS`，编写器组件填充地图，阅读器组件观察该地图的最终状态。在完成填充之前，我不能对这张地图做任何严格的事情。在地图中查找值似乎没有问题，例如：

```
do
  m <- ask
  val <- m ! key
  doSomething val -- etc. 
```

但是`(!)`使用失败`error`，我宁愿使用我的 monad 失败`fail`。所以我想做如下的事情：

```
do
  m <- ask
  maybe
    (fail "oh noes")
    (doSomething)
    (lookup key m) 
```

这导致我的程序`<<loop>>`，我不明白。*在我看来，这似乎*不应该比 using 更严格`(!)`，但显然我错了......

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-07T06:26:19.900

您的第一个示例在地图中是严格的。下面查找`print "1"`，然后运行它，程序实际打印 1。当然，这需要评估`m`。

```
main = do let m = Map.fromList [(1, print "1")]
          val <- m ! 1
          return val 
```

你可能打算写一些只读取地图的东西。以下不是严格的，因为`val`没有在 case 表达式中使用。

```
main = do let m = Map.fromList [(1, print "1")]
          let val = m ! 1
          return val 
```

您的第二个示例很严格，因为它检查结果是否`lookup`成功以决定如何完成执行块。这需要阅读地图。它相当于：

```
do m <- ask
   case lookup key m of
     Nothing -> fail "oh noes"
     Just x  -> doSomething x 
```

## 调试严格性问题

评估总是由 case 表达式或某些内置运算符（如`+`整数）强制执行。如果你怀疑你的程序失败是因为一个值在它可用之前就被强制了，你会想知道哪个值被强制了，它在哪里被强制了。

### 哪个值是强制的？

在这种错误中，程序尝试评估取决于其自身评估结果的表达式。您可以使用`trace`它来跟踪正在评估的表达式。在这个问题中，看起来 的值`m`是被强制的，所以`trace`在它被评估之前使用它来打印一条消息：

```
do m1 <- ask
   let m = trace "Using m" m1
   ... 
```

如果“Using m”是程序的最后一个输出（在 之前`<<loop>>`），那么您离错误越来越近了。如果它不在输出中，那么`m`就没有被评估，所以问题出在其他地方。如果输出中这行后面有内容，则程序继续执行，稍后发生错误，因此问题一定出在其他地方。

### 哪里被逼的？

这告诉您，在停止之前，评估至少达到了这一点。但它走了多远？问题真的发生在很久以后吗？要看到这一点，请尝试在`trace`稍后评估的内容上添加一个。我们知道`m`评估是为了决定`maybe`运行的哪个分支，所以我们可以放在`trace`这些点上。

```
do m1 <- ask
   let m = trace "Using m" m1
   maybe (trace "Used m" $ fail "oh noes")
         (\x -> trace "Used m" $ doSomething x)
         (lookup key m) 
```

如果您在输出中看到“Using m”后跟“Used m”，那么您知道评估`m`完成并且程序继续运行。如果您只看到“使用 m”，则程序在这些点之间停止。在这种特殊情况下，您不应看到“Used m”，因为会`maybe`强制评估`m`并导致`<<loop>>`.

# mysql - XAMPP + OSX + Virtualhosts + 在 httpd.conf 中更改用户 = phpmyadmin 创建数据库不起作用

> ID：11372079
> 
> 赞同：1
> 
> 时间：2012-07-07T03:44:49.737
> 
> 标签：mysql, macos, configuration, xampp, virtualhost

我已经在 OSX Lion 上安装了 XAMPP。因为我想从我的一个开发文件夹中提供一个文件夹，所以我添加了一个虚拟主机到`/Applications/XAMPP/xamppfiles/etc/extra/httpd-vhosts.conf`

```
<VirtualHost *:80>
ServerAdmin email@gmail.com
DocumentRoot "/Users/myosxUsername/Documents/dir/dir/htdocs"
ServerName qmh
ErrorLog "logs/qmh-error_log"
CustomLog "logs/qmh-access_log" common
</VirtualHost> 
```

并且还在主机文件中添加了一个条目

```
127.0.0.1 qmh 
```

由于服务器访问目录的权限问题，`/Users/myosxUsername/Documents/dir/dir/htdocs`我还将用户更改`httpd.conf`为我的`myosxUsername`

```
User myosxusername
Group admin
# previous setting below
# User nobody
# Group nobody 
```

在这些更改之后，虚拟主机工作正常。问题是，当我现在使用 phpmyadmin 创建新数据库时，我收到错误消息

> db_create.php：缺少参数：new_db

如果我将用户改回：

```
User nobody
Group nobody 
```

然后 phpmyadmin 工作正常，但由于权限问题无法访问我的虚拟主机目录。

我想我必须以某种方式告诉apache不要以某种方式使用新用户进行mysql访问？感谢您的帮助。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T03:58:43.700

请参阅 phpMyAdmin 常见问题 ( [http://wiki.phpmyadmin.net/pma/FAQ_2.8](http://wiki.phpmyadmin.net/pma/FAQ_2.8) )中的第 2.8 项

> *   在 php.ini 指令 session.save_path 和 upload_tmp_dir 中，如果这些目录不存在，是只读的或不可访问的（fe 由于 base_dir 限制）会出现此错误。见 trk
>     *   从包（例如 rpm）安装的 PHP 可能会为假定用户（例如“apache”）设置这些目录的权限。- 其他网络服务器的用户，例如 Lighttpd，可能需要更改这些目录的所有权（例如，更改为“lighttpd”）。
>     *   在 Windows 上，如果 PHP 使用主“Temp”目录中某处的 session.save_path 和 upload_tmp_dir 目录，您必须自己创建这些目录；与其他 Windows 程序不同，PHP 不会自己创建它们。
> *   如果您使用 Hardened-PHP (/suhosin patch) 并将 ini 指令 varfilter.max_request_variables 设置为默认值 (200) 或其他低值，如果您的表具有大量列，您可能会收到此错误。相应地调整此设置（请求限制，感谢 Klaus Dorninger 的提示）。
> *   在 config.inc.php 中，尝试将 $cfg['PmaAbsoluteUri'] 指令留空。另见常见问题解答 4.7。
> *   也许您的 PHP 安装损坏，或者您需要升级 Zend Optimizer。请参阅[http://bugs.php.net/31134](http://bugs.php.net/31134)。
> *   在 php.ini 指令 arg_separator.input 中，值为“;” 会导致这个错误。将其替换为“&;”。

（来自[https://serverfault.com/questions/385465/phpmyadmin-missing-parameter](https://serverfault.com/questions/385465/phpmyadmin-missing-parameter)的提示）

# php - PHP curl 无法读取页面

> ID：11372082
> 
> 赞同：0
> 
> 时间：2012-07-07T03:45:18.373
> 
> 标签：php, curl

我们本地主机上的 PHP curl 可以正常工作，但不能在任何其他服务器上

这是代码

```
$ch = curl_init();

curl_setopt($ch, CURLOPT_USERAGENT, "Mozilla/5.0 (X11; Ubuntu; Linux i686; rv:13.0) Gecko/20100101 Firefox/13.0.1" );
curl_setopt($ch, CURLOPT_URL, 'http://50.7.243.50:8054/played.html');
curl_setopt($ch, CURLOPT_POST, 0);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_HEADER ,0);    
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, true);  
curl_setopt($ch,CURLOPT_TIMEOUT,120);
curl_setopt($ch,CURLOPT_MAXREDIRS,20);

$data = curl_exec ($ch);
if ($data == false)
    echo "CURL ERROR : ".curl_error($ch)."<br>";
curl_close ($ch); 
```

即使我们这样做

```
curl_setopt($ch, CURLOPT_URL, 'http://50.7.243.50/played.html');
curl_setopt($ch, CURLOPT_PORT, 8054); 
```

它显示错误**无法连接到主机**

任何帮助表示赞赏....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T04:23:26.707

试试这个代码，我已经测试过并且可以工作了。

```
$html = "http://50.7.243.50:8054/played.html";
$header = array();
$header[] = 'Accept: text/xml,application/xml,application/xhtml+xml,text/html;q=0.9,text/plain;q=0.8,image/png,*/*;q=0.5';
$header[] = 'Cache-Control: max-age=0';
$header[] = 'Connection: keep-alive';
$header[] = 'Keep-Alive: 300';
$header[] = 'Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.7';
$header[] = 'Accept-Language: en-us,en;q=0.5';
$header[] = 'Pragma: ';
$ch = curl_init();

$proxy_ip = '122.72.112.148';
$proxy_port = 80;

 curl_setopt($ch, CURLOPT_PROXYPORT, $proxy_port);
 curl_setopt($ch, CURLOPT_PROXYTYPE, 'HTTP');
 curl_setopt($ch, CURLOPT_PROXY, $proxy_ip);

curl_setopt($ch, CURLOPT_URL, $html);
curl_setopt ($ch, CURLOPT_PORT , 8054);
curl_setopt($ch, CURLOPT_USERAGENT, 'Mozilla/5.0 (Windows; U; Windows NT 6.0; en-US; rv:1.9.0.11) Gecko/2009060215 Firefox/3.0.11 (.NET CLR 3.5.30729)');
curl_setopt($ch, CURLOPT_HTTPHEADER, $header);
curl_setopt($ch, CURLOPT_AUTOREFERER, true); 
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
    curl_setopt($ch, CURLOPT_FOLLOWLOCATION, true);
curl_setopt($ch, CURLOPT_ENCODING, '');
curl_setopt($ch, CURLOPT_TIMEOUT, 20);
$result = curl_exec($ch);
curl_close ($ch);
echo $result; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T04:03:44.053

试试下面的代码：

```
$html = "http://50.7.243.50:8054/played.html";
$header = array();
$header[] = 'Accept: text/xml,application/xml,application/xhtml+xml,text/html;q=0.9,text/plain;q=0.8,image/png,*/*;q=0.5';
$header[] = 'Cache-Control: max-age=0';
$header[] = 'Connection: keep-alive';
$header[] = 'Keep-Alive: 300';
$header[] = 'Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.7';
$header[] = 'Accept-Language: en-us,en;q=0.5';
$header[] = 'Pragma: ';
$ch = curl_init();

curl_setopt($ch, CURLOPT_URL, $html);
curl_setopt($ch, CURLOPT_USERAGENT, 'Mozilla/5.0 (Windows; U; Windows NT 6.0; en-US; rv:1.9.0.11) Gecko/2009060215 Firefox/3.0.11 (.NET CLR 3.5.30729)');
curl_setopt($ch, CURLOPT_HTTPHEADER, $header);
curl_setopt($ch, CURLOPT_AUTOREFERER, true); 
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 1);
curl_setopt($ch, CURLOPT_ENCODING, '');
curl_setopt($ch, CURLOPT_TIMEOUT, 20);
$result = curl_exec($ch);
curl_close ($ch);
echo $result; 
```

# drupal - 添加到购物车时以编程方式将价格更改为 Ubercart 商品

> ID：11372087
> 
> 赞同：1
> 
> 时间：2012-07-07T03:47:20.200
> 
> 标签：drupal, ubercart, cart

我已经构建了一个为产品提供自定义配置的 Javascript 应用程序。从那个 JS 应用程序中，我将相关数据提交到我也准备好的 Drupal 模块。该模块的目的是验证输入并将详细信息提交给 Ubercart 系统。

从模块提交自定义构建时，我需要根据从该模块中选择的项目提交自定义价格。我查看了 uc_variable_price、uc_custom_price 和 hook_add_to_cart，但没有看到以编程方式添加自定义价格的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T06:24:33.510

```
/**
 * Implements hook_cart_item().
 */
function module_cart_item($op, &$item) {
  switch ($op) {
    case 'load':
      $order = db_result(
        db_query("SELECT price_total FROM {module_orders} WHERE id = %d", 
          $id)
        );
      if (!empty($order)) {
        $item->price = $order;
      }
      break;
  }
} 
```

检查逻辑

# javascript - 如何应对 iframe 安全问题？

> ID：11372097
> 
> 赞同：0
> 
> 时间：2012-07-07T03:50:34.243
> 
> 标签：javascript, html, iframe, xhtml

我听说使用 iframe 时可能会出现许多安全问题。我已经处理了 XSS，我还应该怎么做才能确保没有问题发生？

我遇到了一些使用 top.window 的 JS 代码，但我担心的是任何客户端代码都不可靠，我还能从服务器端做什么？（我目前正在使用 php，但如果解决方案是通用的，那就太棒了）

更新：为了让事情更清楚，我实际上使用的是 iframe，这只是因为我不希望每次都刷新标题、菜单等。所以我试图找到一种方法来使用 iframe 而不会陷入安全问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T03:58:40.860

您可以将`X-FRAME-OPTIONS`标头设置为拒绝。这会让浏览器知道如果资源是通过 iframe 加载的，那么就不会显示。

您可以阅读有关此内容的更多信息并配置服务器以发送此标头[@MDN](https://developer.mozilla.org/en/The_X-FRAME-OPTIONS_response_header)。此外，您可以在 PHP 中使用

```
header("X-FRAME-OPTIONS: DENY") 
```

# android - Android Jsoup 登录获取响应

> ID：11372099
> 
> 赞同：0
> 
> 时间：2012-07-07T03:51:03.753
> 
> 标签：android, login, jsoup

我正在尝试获取移动网站登录失败或成功的响应。这是我的代码的一部分。

**编辑**

* * *

```
public String login(String User, String Pass) throws Exception{
    // Create a new HttpClient and Post Header
    HttpClient httpclient = new DefaultHttpClient();

    HttpPost httppost = new HttpPost(AmwayURL);
    String result = "nothing";
    try {
        // Add user name and password
        String username = User;
        String password = Pass;

        List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(2);
        nameValuePairs.add(new BasicNameValuePair("userid", username));
        nameValuePairs.add(new BasicNameValuePair("userpswd", password));
        httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));

        CookieStore cookieStore = new BasicCookieStore();
        HttpContext localContext = new BasicHttpContext();
        localContext.setAttribute(ClientContext.COOKIE_STORE, cookieStore);

        HttpResponse response = httpclient.execute(httppost, localContext);

        result = inputStreamToString(response.getEntity().getContent()).toString();

        HttpEntity entity = response.getEntity();

        System.out.println("----------------------------------------");
        System.out.println(response.getStatusLine());
        if (entity != null) {
            System.out.println("Response content length: " + entity.getContentLength());
        }
        List<Cookie> cookies = cookieStore.getCookies();
        for (int i = 0; i < cookies.size(); i++) {
            System.out.println("Local cookie: " + cookies.get(i));
        }

        // Consume response content
        //EntityUtils.consume(entity);

        System.out.println("----------------------------------------");

    } catch (ClientProtocolException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    } finally {
        // When HttpClient instance is no longer needed,
        // shut down the connection manager to ensure
        // immediate deallocation of all system resources
        httpclient.getConnectionManager().shutdown();
    }
    return result;
} 
```

我确实得到了回复，如果我检查它，我可以看到我确实执行了登录，但我的问题是如何使用编程方式来确定登录是否成功？

我不能使用重定向代码，因为该站点位于同一页面上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T18:14:00.320

将您的响应传递给字符串，然后只需按照官方文档进行解析！

[http://jsoup.org/cookbook/input/parse-document-from-string](http://jsoup.org/cookbook/input/parse-document-from-string)

如果您需要解析特定元素，您可以随时执行以下操作：

```
doc.select(your CSS query here searching a tag, element, class, id or even some atribute value) 
```

# api - 谷歌名人搜索结果 API？

> ID：11372100
> 
> 赞同：2
> 
> 时间：2012-07-07T03:51:12.827
> 
> 标签：api

我发现在谷歌中，当你在搜索栏中输入名人的名字时，会出现一个侧边栏，上面有该名人的肖像照片、简要说明以及其他一些相关信息和相关人员。我想知道这是否已经包含在 Google 提供的某些 API 中，因为我的应用确实需要收集此类信息（我们目前使用 wiki API）。谁能给我一个链接或建议？和/或也许其他一些 API 提供了类似的信息？（我想比较这些结果）提前致谢。

# android - 在线创建文件JSON并获取URL

> ID：11372105
> 
> 赞同：7
> 
> 时间：2012-07-07T03:52:24.087
> 
> 标签：android, json

从字符串 JSON，我想创建一个 URL 来显示该字符串 JSON。

你知道支持这个的网站吗！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-07T04:42:22.287

您可以使用[gist.github.com](https://gist.github.com/)。选择语言`JavaScript`。我在[这里](https://gist.github.com/anonymous/3064729)创建了一个示例。您还可以获取原始格式的 JSON。

* * *

以下 SO 帖子指定了 gist 的替代方法：

[Json-Viewer：URL 中的数据](https://stackoverflow.com/questions/10812517/json-viewer-data-in-url)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-07T04:00:28.373

您必须创建以 JSON 格式创建数据的 Web 服务。.net 框架很可能会这样做。因此，使用创建 Web 服务并提供 url 的 .net Web 服务。然后您就可以使用该 url 来解析它。

希望它会帮助你。

享受。

:)

# javascript - 使用 Google Analytics 进行内容脚本跟踪

> ID：11372107
> 
> 赞同：15
> 
> 时间：2012-07-07T03:53:29.880
> 
> 标签：javascript, google-chrome-extension, google-analytics

我正在开发一个使用内容脚本修改某些页面的 Google Chrome 扩展程序。为了了解应用这些更改的时间和地点，我们正在研究谷歌分析，因为我们已经将它用于其他网络资产。

我们通过清单文件包含 ga.js 库，并在我们对页面应用更改时通过同步页面调用触发 _trackPageview。

```
var pageTracker = _gat._getTracker("UA-our-UA");    
pageTracker._setDomainName("none");
pageTracker._setAllowLinker(true);    
pageTracker._trackPageview(window.location.href); 
```

这里的问题是，不同域中的每个 pageView 都算作新访问和访问者。它有办法规避吗？例如，它使用 chrome 扩展 sqlite 数据库或浏览器中的键值存储来存储唯一的用户 id 并独立访问 id 域。这可能吗？

谢谢

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-07-07T07:06:28.583

您不应该在其他人的网站内执行该代码。Google Analytics 配置有些敏感，如果网站有自定义实现，您可能会为该访问者破坏它。

您应该在自己的后台页面中包含 Google Analytics。然后在每次需要跟踪事件时从 content_script 与后台页面进行通信。

通过在您的后台脚本中包含 GA 脚本很好，因为您不会干扰网站上的其他代码，并且它始终从同一域执行，因此将使用相同的 cookie 不会导致重复访问/访问者。

以下是有关如何在背景页面上安装 GA 的更多信息。

[https://developer.chrome.com/docs/extensions/mv2/tut_analytics/](https://developer.chrome.com/docs/extensions/mv2/tut_analytics/)

这是将信息从内容脚本传递到背景页面的文档：

[http://code.google.com/chrome/extensions/messaging.html](http://code.google.com/chrome/extensions/messaging.html)

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2015-07-27T13:12:37.513

正如 Eduardo 在他的回答中所说，您需要一个背景页面，因此可以这样做：

在您的**manifest.json**文件中：

```
,
"content_security_policy": "script-src 'self' https://ssl.google-analytics.com; object-src 'self'"
, 
```

在**content_scripts.js**中，每当您想跟踪事件时，向后台页面发送消息以触发该事件。

```
chrome.runtime.sendMessage({action: "yourEvent"}); 
```

**背景.js**

```
 (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = 'https://ssl.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();

    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-XXXXXXX-X']);

    // here we receive the coming message from the content script page
    chrome.runtime.onMessage.addListener(function( request, sender, sendResponse ) {
        if(request.action == "yourEvent"){
            _gaq.push(['_trackEvent', "eventCategory", 'eventType']);
        }
    }); 
```

# git - 我将如何维护在两个不同程序中使用的大量代码（使用 git）？

> ID：11372111
> 
> 赞同：0
> 
> 时间：2012-07-07T03:53:48.840
> 
> 标签：git, version-control

假设我有很多 Javascript 代码将部署在桌面应用程序中并用作 Web 应用程序（部署到服务器）。

对我来说唯一显而易见的方法是让桌面应用程序在构建时提取源代码。

有没有更好的方法来处理这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T04:14:44.780

看看 git 子模块。您会将 JS 视为共享库，因此将其作为子模块包含在 Web 和桌面应用程序中。

[http://git-scm.com/book/en/Git-Tools-Submodules](http://git-scm.com/book/en/Git-Tools-Submodules)

# c# - 如何通过 USB 使用 C# 控制 LED

> ID：11372112
> 
> 赞同：1
> 
> 时间：2012-07-07T03:54:02.040
> 
> 标签：c#, usb, hardware, microcontroller, led

我想通过 USB 端口控制 LED 灯条。我有使用 PIC 微控制器（18f 系列）并将其与 USB 端口连接的原理图。我知道 Microchip 库将使我更容易做到这一点。唯一的问题是我找不到它们。接口执行的功能是..

> 当我单击屏幕上的按钮时，LED 会发光。当我单击另一个按钮时，LED 停止发光。

在这里，我打算用一个 LED 灯条替换一个 LED。就像有用于 android 编程的库一样，我需要一个指向这些库的链接，这些库为我提供了可以通过 USB 端口发送数据的方法。

# sql - 关于在使用基于 SQL 的数据库时是否尊重 OOP/MVC 数据模型设计的讨论

> ID：11372114
> 
> 赞同：0
> 
> 时间：2012-07-07T03:54:36.680
> 
> 标签：sql, model-view-controller, oop, model, dao

我希望人们就以下问题对 Data Modeling Vs SQL (OOP Vs Select Statement) 的概念发表意见：在研究 MVC 和 OOP 概念时，很容易看到如下所示的自然形式：

```
<php? | <% | <#

Class Country{
     _name:String;
     _language:String;      
}

Class Estate{
     _name:String;
     _country:Country;
}

?> | % | #> 
```

我想要得到的观点是一个简单的父子关系。现在，正如我在 ExtJS + PHP 和 JSF 2.0（使用 Converter 的 Java）上所看到的那样，很常见的是，DAO（数据访问对象）的定义如下所示：

```
Abstract class CountryDAO{
     public function getCountry();//This function returns an ArrayList.
     public function getCountryById(countryId:Integer);//This function returns a Country Object;
     ...
}

Class EstateDAO{
     public function getEstate(){
         $sql = "SELECT * FROM tbl_estate";
         //[your favorite way to comunicate with the database here]
         //Declare an ArrayList or something to store the result:
         $arrayList;
         while($result = $ResultSet.next()){
              $obj = new Estate();
              $obj->name = $result['name'];
              $obj->Country = new CountryDAO().getCountryById($result['country_id']);
              $arrayList->addItem($obj);
         }
     }
} 
```

*很抱歉混合了语言语法，我尽量不要太依赖语言，只是概念*

现在完成我的想法：根据理论，这是正确的概念。就个人而言，我认为不同意它是不对的，因为这是事情的逻辑。但在实践中，现实世界永远不会像你想要的那样闪耀，我从中看到：

**如果我有 10 个 Estates，我将在硬盘级别执行 11 个 SQL 语句（根据操作系统的理论，它是所有存储内存中最慢的）。**

**如果我有 100 个庄园，我将执行 101 条 SQL 语句。**

**如果我有*n 个*Estates，我将执行*n+1 个*SQL 语句。**

我的最后一点：我认为，如果您要对可能有数千条记录的数据实体进行建模，那可能会很痛苦。由于这种思路，我在使用 Flex + PHP 时拒绝使用这种设计逻辑。但是现在我正在尝试构建一个将 Flex 和 ExtJS 作为查看器并使用 PHP 作为服务器端的应用程序，我只想确定我不会因为无关紧要的原因而选择最困难的路径。不尊重这种 MVC/OOP 逻辑是否更安全？我夸大其词了吗？您如何看待 OOP 上的 SQL 与数据模型？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T04:36:53.620

我建议远离直接映射到数据库表的 DAO 实现。相反，您应该研究[数据映射器](http://martinfowler.com/eaaCatalog/dataMapper.html)模式。

基本上，这个想法是，在模型层中，您将业务逻辑分离为[域对象](http://c2.com/cgi/wiki?DomainObject)，将数据库交互分离为数据映射器。这样，当您需要获取项目集合（如 100 个庄园的详细信息）时，映射器仅执行 1 或 2 个查询，并将数据转储到处理集合的域对象中。

并且每个映射器都可以轻松处理多个数据库表。映射器的目标是获取域对象并将其与存储接口。没有法律规定您的域对象只能使用一张表。

无论如何，MVC 设计模式与您存储信息的位置无关。它只处理用户界面和域业务逻辑的分离。SQL 交互（如果您甚至使用 SQL 数据库而不是其他数据源）深埋在模型层中。

我强烈建议您阅读这篇文章：*Martin Fowler*的[***GUI 架构***](http://martinfowler.com/eaaDev/uiArchs.html)。

 *此外，如果您主要处理 PHP，您可能会发现[此注释](https://stackoverflow.com/a/5864000/727208)很有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T04:15:28.490

你可以两全其美。您不需要以对象存储在内存中的方式存储对象，即使这样做，您也可以对其他对象进行建模，以便能够以有效的方式保存它们：给定：

```
Class Country{
     _name:String;
     _language:String;      
}
Class Estate{
     _name:String;
     _country:Country;
} 
```

您可以创建：

```
Class EstateWithCountryInformation{
     _estateName:String;
     _countryName:String;
     _language:String;      
     getEstate();
     getCountry();
} 
```

并且只有表 Country 和 EstateWithCountryInformation。这样您就可以在单个查询中获得所需的内容。如果您只需要查询 Estate 信息，您也可以从 EstateWithCountryInformation 表中获取它，或者您甚至可以创建一个 DataBase 视图来模拟该表。

我不知道你用什么来访问数据库，但我知道一些带有高级映射选项的 ORM，它允许你使用你最初定义的类，并自动映射到 EstateWithCountryInformation 之类的表，当你查询一个Estate，然后调用 new CountryDAO().getCountryById() 他们将信息缓存在内存中，因此它不会执行任何额外的数据库访问。*

# c++ - 大端整数转换

> ID：11372115
> 
> 赞同：2
> 
> 时间：2012-07-07T03:54:38.220
> 
> 标签：c++

在大端机器中，如果我有一个`long`变量并将其转换为 a `char`，语言规范是否保证我将在转换后获得最低有效位？

换句话说：

```
long a = 50;
char b = (char)a;
assert(b == 50); /* Is it true? */ 
```

我知道这对于小端机器来说是正确的，但是大端机器呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-07T04:01:33.037

> ...如果它可以在目标类型（和位域宽度）中表示，则该值不变；否则，该值是实现定义的。（§4.7/3）。

由于`char`必须能够容纳至少 127 的值，因此在这种情况下，结果必须为 50。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-07T03:58:22.400

是的。否则很多代码会中断。

# javascript - 如何在不覆盖样式的情况下使用 javascript 显示元素？

> ID：11372116
> 
> 赞同：0
> 
> 时间：2012-07-07T03:55:08.740
> 
> 标签：javascript, javascript-events

我有以下代码来显示以前隐藏的 div：

```
document.getElementById('theDiv').style.display = 'block'; 
```

问题是，当我执行此操作时， div 会丢失所有先前的 CSS 格式。有没有办法在保持 CSS 格式的同时拥有相同的功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T03:58:49.130

设置`style.display`为`block`对其他 CSS 格式没有影响。我能想到的唯一一个例外是，如果该项目之前是`display:inline`，那么将其设置为`display:block`会改变布局。但是，所有其他 CSS 项目将不受影响。

如果这不是您所观察到的，那么您可能没有在这里告诉我们整个故事，并且您没有向我们展示您的代码的其他事情必须正在进行。如果是这种情况，那么请尝试将您的测试用例简化为 jsFiddle 中的一个小示例，以便我们可以看到导致问题的实际代码。

# c# - requiredfieldvalidator 与 formview 冲突

> ID：11372122
> 
> 赞同：0
> 
> 时间：2012-07-07T03:57:15.697
> 
> 标签：c#, asp.net

任何人都可以帮助我吗？当我将 requiredfieldvalidator 放在我的创建事件的选项卡容器上时，我无法更新另一个选项卡上的表单视图 >>> 编辑事件的选项卡。我完全不知道会发生什么，当我反复试验时，我发现 requiredfieldvalidator 是导致我的 formview 停止更新到我的数据库中的那个。而且我这个 requiredfieldvalidator 在另一个选项卡上，那么它是如何影响的？！？！？请指定或显示，例如，因为我真的很新而且很糟糕！

这是创建选项卡的代码>>>

```
 <asp:TextBox ID="tb_eventName" runat="server" ValidationGroup="vg"></asp:TextBox>

    <asp:RequiredFieldValidator ID="RequiredFieldValidator1" runat="server" 
                    ControlToValidate="tb_eventName" ErrorMessage="Enter event" 
                    ForeColor="Red" ValidationGroup="vg" SetFocusOnError="True" >*        </asp:RequiredFieldValidator>

        <asp:Button ID="bn_createEvent" runat="server"  
                    Text="Create Event" onclick="bn_createEvent_Click"    ValidationGroup="vg"/>` 
```

这是编辑事件选项卡的代码>>>

```
 <asp:FormView ID="FormView1" runat="server" CellPadding="4" DataKeyNames="eventID" 
                    DataSourceID="SqlDataSource2" 
                    OnItemDeleted="FormView1_ItemDeleted"   OnItemInserted="FormView1_ItemInserted" 
                    OnItemUpdated="FormView1_ItemUpdated" ForeColor="Black"   BackColor="White" 
                    BorderColor="#DEDFDE" BorderStyle="None" BorderWidth="1px" 
                    GridLines="Vertical" >
                    <EditItemTemplate>
                        ID:
                        <asp:Label ID="eventIDLabel1" runat="server" Text='<%#   Eval("eventID") %>' />
                        <br />
                        <br />
                        Name:&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp
                        <asp:TextBox ID="eventNameTextBox" runat="server" 
                            Text='<%# Bind("eventName") %>' />
                        &nbsp&nbsp
                        <br />
                        <br />

                        Date:&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp
                        <asp:TextBox ID="eventDateTextBox" runat="server" 
                            Text='<%# Bind("eventDate") %>' />
                        <br />
                        <br />

                        Start-Time:&nbsp
                        <asp:TextBox ID="eventStartTimeTextBox" runat="server" 
                            Text='<%# Bind("eventStartTime") %>' />
                        <br />
                        <br />

                        End-Time:&nbsp&nbsp&nbsp
                        <asp:TextBox ID="eventEndTimeTextBox" runat="server" 
                            Text='<%# Bind("eventEndTime") %>' />
                        <br />
                        <br />

                        Location:&nbsp&nbsp&nbsp&nbsp&nbsp
                        <asp:TextBox ID="eventLocationTextBox" runat="server" 
                            Text='<%# Bind("eventLocation") %>' />
                        <br />
                        <br />

                        Email:&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp
                        <asp:TextBox ID="eventEmailTextBox" runat="server" 
                            Text='<%# Bind("eventEmail") %>' />
                        <br />
                        <br />

                        Contact No:&nbsp
                        <asp:TextBox ID="eventContactNoTextBox" runat="server" 
                            Text='<%# Bind("eventContactNo") %>' />
                        <br />
                        <br />

                        Description:
                        <asp:TextBox ID="eventDescriptionTextBox" runat="server" 
                            Text='<%# Bind("eventDescription") %>' />
                        <br />
                        <br />

                        Image:&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp
                        <asp:TextBox ID="eventImageTextBox" runat="server" 
                            Text='<%# Bind("eventImage") %>' />
                        <br />
                        <br />

                        <asp:LinkButton ID="UpdateButton" runat="server" 
                            CommandName="Update" Text="Update" /> 
```

`

添加 requiredfieldvalidator 后，它不会将我的表单视图更新到数据库

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T05:55:24.100

尝试向`ValidationGroup`FormView 中的按钮添加一个。与导致 formview 更新失败的必填字段验证器相比，请确保使用不同的组名。

```
<asp:LinkButton ID="UpdateButton" runat="server"
    CommandName="Update" Text="Update"
    ValidationGroup="formViewValidation" /> 
```

那应该使它成为req。`vg`单击按钮更新时不会触发的字段验证器。

**编辑**：只是为了检查。如果添加`CausesValidation="False"`更新按钮会发生什么？

# php - PHP 在 HTML 下拉列表中拉取所选项目，该下拉列表从数组填充以传递到数据库

> ID：11372125
> 
> 赞同：0
> 
> 时间：2012-07-07T03:57:24.337
> 
> 标签：php, mysql, html, database

好的，首先我为这个令人费解且过长的标题道歉，但我对这一切都很陌生，我不太确定如何解释它甚至开始......所以我就这样做了！

我现在正在做的是从我的 MySQL 数据库中填充一个 HTML 下拉列表，然后我想采用用户从下拉列表中选择的任何选项，并以某种方式将该数据输入到另一个表中。

我用来从表中获取数据的代码是：

```
<td>Model of Bike</td>
<td><select type ="text" name="bikeBrand">
<?php 
    $sql = mysql_query("SELECT bikeDescr, bikeID FROM Bikes");
    while ($row = mysql_fetch_array($sql))
    {
        echo "<option value='bikeDescr'>" . $row['bikeDescr'] . "</option>";
    }
?> 
```

现在，一旦用户选择了所需的自行车，假设它是一辆 Trek，我希望能够获取该信息并将其放入我的 Insert into () Values () 中，以便我可以跟踪他们每次选择了哪辆自行车创建一个新的票证。

希望我没有混淆或使事情变得更糟，但是对于我需要做什么或在哪里寻找的任何帮助将不胜感激。

谢谢你的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T04:11:36.137

我建议你做一些改进，它们是：

1）`select`标签没有`type`属性，所以正确的使用方法是：

```
<select name="bikeBrand"> 
```

2) 当您在数据库中获取bikeDescr 和bikeID 字段时，我建议您使用bikeID 作为每个选项的值，并使用bikeDescr 来显示选项的名称。例如：

```
<td>Model of Bike</td>
<td><select name="bikeBrand">

<?php 

    $sql = mysql_query("SELECT bikeDescr, bikeID FROM Bikes");

    while ($row = mysql_fetch_array($sql))
    {
        echo "<option value='" . $row['bikeID'] . "'>" . $row['bikeDescr'] . "</option>";
    }
?> 
```

因此，您可以在下一个文件中检索 bikeBrand 值并将其插入数据库中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T04:03:14.767

您必须更改语句：

```
echo "<option value='bikeDescr'>" . $row['bikeDescr'] . "</option>"; 
```

对此：

```
echo "<option value='" . htmlentities($row['bikeDescr']) . '>" . $row['bikeDescr'] . "</option>"; 
```

这一切都应该在一个表格内。至于`INSERT`查询，您是想在同一页面上调用它，还是在单击按钮或提交表单后调用它？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-07T04:07:14.357

要获得值，您可以在表单上作为另一个 php 文件执行操作，所以

```
<form action="submit.php" method="POST">
<td><select name="bikeBrand">
<?php 
    $sql = mysql_query("SELECT bikeDescr, bikeID FROM Bikes");
    while ($row = mysql_fetch_array($sql))
    {
        echo "<option value='". $row['bikeDescr'] ."'>" . $row['bikeDescr'] . "</option>";
    }
?>
</form> 
```

submit.php 看起来像

```
$value = $_POST['bikeBrand']
if(isset($value)){
// Database info goes here//
$sql = mysql_query("INSERT INTO table VALUES('$value')");
} 
```

# c# - 为什么我可以在这个参数中使用方法名而不是委托？

> ID：11372127
> 
> 赞同：1
> 
> 时间：2012-07-07T03:57:59.490
> 
> 标签：c#, delegates

```
public delegate void HandlerDelegate(int val);

public class Process
{
    public static void Execute(HandlerDelegate del)
    {
        del(5);
    }
}

class Program
{
    static void Main(string[] args)
    {
       //HandlerDelegate handler = Task; normally I would do this first
        Process.Execute(Task); // but this works - how?
    }

    public static void Task(int val)
    {
      Console.WriteLine(val);
    }         

} 
```

我知道委托是对方法的引用，但是我如何能够将看起来像方法名称的东西传递给接受委托作为其参数的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T05:34:59.703

它只是实例化委托的众多方法之一

例如：

```
public delegate void Del<T>(T item);//delegate
public void Notify(int i) { }//instance method 
```

**使用Notify**方法实例化上述委托**Del**的不同方法

 **```
Del<int> d1 = new Del<int>(Notify); 
```

或者

```
Del<int> d2 = Notify; 
```

[更多信息在这里](http://msdn.microsoft.com/en-us/library/ms173176%28v=vs.80%29.aspx)**

# c++ - 有没有更快的方法或优化可以应用于我的临时内存池？

> ID：11372133
> 
> 赞同：2
> 
> 时间：2012-07-07T03:58:35.650
> 
> 标签：c++, memory-management

我有几个不同的对象，它们分配某些对象以相互通信，我决定给它们每个都一个本地管理的内存池，其中一个节点可以通过在其中设置一个标志来标记为空闲。

这个想法是这样的：

```
struct cat {/**couple data fields*/};

struct rat
{
    rat() : poolIndex_(0), poolSize_(INITIAL_SIZE), pool_(new cat *[poolSize_])
        {
            for (size_t i = 0; i < poolSize_; ++i)
                pool_[i] = new cat;
        }

    size_t poolIndex_;
    size_t poolSize_;
    cat** pool_;
}; 
```

我提供了一个非会员功能，让`rat`他和他的朋友在他们用完空闲`cat`节点时调整他们的池大小（通过 分配节点`poolIndex_++ % poolSize_;`）。非成员函数如下：

```
void quadruplePool(cat*** pool, size_t& poolIndex, size_t& poolSize)
{
    poolIndex = poolSize;
    cat** tmp = new cat *[poolSize*4];
    for (size_t i = 0; i < poolSize; ++i)
        tmp[i] = (*pool)[i];
    delete[] (*pool);
    (*pool) = tmp;
    poolSize = poolSize*4;
    for (size_t i = poolIndex; i < poolSize; ++i)
        (*pool)[i] = new cat;
} 
```

代码中有什么东西可以让我比我现在拥有的更快吗？（速度对我来说至关重要）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T04:06:19.533

我认为对 s 进行数组分配效率更高`cat`，当它们被释放时，将它们放在空闲列表中。

```
struct CatPool {
    size_t poolSize_;
    size_t i_;
    cat *pool_;
    cat *free_;
    typedef std::unique_ptr<cat[]> PoolPtr;
    std::list<PoolPtr> cleanup_;

    CatPool (size_t pool_size) : poolSize_(pool_size), free_(0) { grow(); }

    void grow () {
        i_ = 0;
        pool_ = new cat[poolSize_];
        cleanup_.push_back(PoolPtr(pool_));
    }

    cat * get () {
        cat *c = free_;
        if (c) {
            free_ = free_->next_;
            return c;
        }
        for (;;) {
            if (i_ < poolSize_) return &pool_[i_++];
            grow();
        }
    }

    void put (cat *c) {
        c->next_ = free_;
        free_ = c;
    }
}; 
```

但是，您应该考虑使用现有的池分配器实现。例如，Boost 的`object_pool`.

# android - 根据进程id过滤logcat

> ID：11372151
> 
> 赞同：2
> 
> 时间：2012-07-07T04:00:48.520
> 
> 标签：android

> **可能重复：**
> [根据线程 ID 过滤 adb logcat 的输出](https://stackoverflow.com/questions/7576579/filter-output-of-adb-logcat-based-on-thread-id)

是否可以仅从某些线程获取输出，我能够获取线程 ID 但不能获取过滤后的输出。我尝试了所有获取日志的方法，但无法根据进程 ID 进行过滤。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T04:13:04.690

如果您使用的是 Eclipse + ADT，您可以打开 DDMS 透视图，激活 LogCat 选项卡，您可以在面板顶部的 InputTextBox 中输入类似“pid:18467”的文本。然后LogCat会过滤掉pid为18467的app的所有消息。</p>

# c# - 如何证明某个版本的程序更节省内存？

> ID：11372153
> 
> 赞同：2
> 
> 时间：2012-07-07T04:01:24.397
> 
> 标签：c#, .net, performance, memory-management

我有一个必须处理数十万条记录的应用程序。现在，我一次只能处理 500 个。每批最多可能需要 5 分钟来处理/分析（总共约 10 小时的处理时间）。限制 500 条记录的原因是内存消耗。我认为我们的程序占用这么多内存的主要原因之一是我们没有设置列表或字典的大小（例如 new List() 而不是 new List(100000)）。我进行了更改以设置集合的大小，以便 .NET 停止创建和复制具有额外容量的新列表。

这是我的问题：如何证明某个版本的程序内存效率更高？是否有我应该查看的性能计数器？工具？监控？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-07T04:52:57.660

有像[.net 内存分析器](http://memprofiler.com/)这样的工具，您可以从中深入分析 .net 应用程序的内存管理和内存泄漏。

> .NET Memory Profiler 是一个强大的工具，用于查找内存泄漏并优化用 C#、VB.NET 或任何其他 .NET 语言编写的程序中的内存使用。在分析指南、自动内存分析器和专门的跟踪器的帮助下，您可以确保您的程序没有内存或资源泄漏，并且内存使用尽可能最佳。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-07T06:51:57.073

我认为分析器不会让您真正了解一个版本比另一个版本的效率高多少。

我建议使用内存性能计数器来执行此操作。`perfmon`您可以使用, 为您的应用程序的两个版本设置一些数据收集会话。

您应该首先只监视[进程内存](http://msdn.microsoft.com/en-us/library/windows/desktop/aa965225%28v=vs.85%29.aspx#process_memory_performance_information)（当然是您的进程的）。您还可以添加一些其余的[系统内存性能计数器](http://technet.microsoft.com/en-us/library/cc768048.aspx#XSLTsection131121120120)，以查看整个虚拟内存状态在您的进程生命周期内如何变化。

如果存在差异并且您仍然无法获得良好的概述和结论，您可以开始挖掘[.NET CLR 内存性能计数器](http://msdn.microsoft.com/en-us/library/x2tyfybc.aspx)。不像我之前提到的那样容易分析，但更详细。

考虑到您的应用程序执行的处理时间很长，您可能应该将每个会话运行一两个小时以获得一些好的数据。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-07T06:43:34.400

如果您有 Visual Studio Ultimate，则可以使用内置的 Performance Profiler 工具：**Debug -> Start Performance Analysis**。如果你没有这个可用的，你可以使用JetBrains 的[dotTrace ，它可以完成同样的事情。](http://www.jetbrains.com/profiler/)

您还可以使用[Stopwatch](http://msdn.microsoft.com/en-us/library/system.diagnostics.stopwatch.aspx)类来测量执行时间。与 DateTime.Now 相比，秒表专门设计用于测量经过的时间，并且可以（如果在您的硬件上可用）使用底层高频硬件计时器提供良好的粒度/准确性。通过使用 Stopwatch 类并比较两个执行时间，您可以看到哪个运行得更快。这不会提供任何有关 CPU 或内存使用情况的信息。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-08T08:46:32.490

使用大量内存通常不会真正减慢您的速度，直到您用完实际内存并开始使用交换文件。您可以在应用程序运行时在任务管理器中进行检查。您还可以在其中查看应用程序的内存峰值和工作量。

我会稍微分析一下（有几个可用的内存分析器）以查看哪些对象占用了您的内存。

至于名单；我认为设置列表的容量不会解决您的问题。List 类通过使容量增加一倍而增长（经过测试，因为我找不到文档）。最坏的情况是您使用两倍的内存。如果您创建的新列表过多，您可以创建一个对象缓存来重新使用这些列表。但根据我的经验 .NET 这在 .NET 中没有多大帮助，因为运行时非常高效。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-16T20:04:50.143

您可以使用 CLR GC ETL 事件。从 Microsoft 下载 perfview，在其下运​​行您的应用程序，然后只需检查 GC 页面。

只需检查“总内存分配”和“在 GC 中花费的时间”即可让您了解托管内存的使用方式。

如果您想了解更多详细信息，请检查 CLR 分配滴答事件。

Perfview 还可以分析您的托管堆活动对象。

# xpath - 如何在 xpath 中进行组捕获

> ID：11372160
> 
> 赞同：3
> 
> 时间：2012-07-07T04:03:18.437
> 
> 标签：xpath

我正在寻找 xpath 中可以做的事情：`//foo[@n="$1"]//bar[@n="$2"]` 它可以返回我`$1`和`$2`. 或者至少把两个都还给`<foo>`我`<bar>`

这里有更多细节，我有一个 xml 文档：

```
<xml>
  <foo>
    <a n="1">
      <b n="1"/>
      <b n="2"/>
    </a>
  </foo>
  <a n="2">
    <b n="1"/>
  </a>
  <a n="3">
    <b n="1"/>
    <foo>
      <b n="2"/>
    </foo>
    <b n="3"/>
  </a>
</xml> 
```

我想根据 in 的 n 属性生成一个字符串`<a>`，`<b>` 所以我有 xpath:`//a[@n]//b[@n]` 然后对于我返回的每个结果，我使用：`./@n`并`./ancestor::a/@n`获取我想要的信息。

这工作正常，但我需要更智能的东西，因为我有很多这样的结构，需要自动生成 xpath。

所以对于上面的例子，我正在寻找一些 xpath，比如：`//a[@n="$1"]//b[@n="$2"]` 然后返回我：`(1, 1), (1, 2), (2, 1), (3, 1), (3, 2), (3 , 3)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-07T15:39:39.347

**这是一个选择所有需要的`n`属性的 XPath 1.0 表达式：**

```
//a[.//b]/@n | //a//b/@n 
```

如果不进行优化，上述表达式的求值将执行至少两次完整的 XML 文档遍历。

**这个 XPath 1.0 表达式可能更有效**：

```
//*[self::a and .//b or self::b and ancestor::a]/@n 
```

**如果保证每个`a`都有一个`b`后代**，则可以简化这两个表达式。

它们分别变成：

```
//a/@n | //a//b/@n 
```

和：

```
//*[self::a or self::b and ancestor::a]/@n 
```

**如果保证每个`a`都有一个后代`b`并且每个`b`都有一个祖先，那么进一步的简化是可能的`a`。**：

```
//*[self::a or self::b]/@n 
```

**不可能在单个 XPath 1.0 表达式中获得所有需要的属性的字符串值**。需要使用上述表达式之一获取所有属性，然后在每个选定的属性上应用第二个 XPath 表达式：`string()`.

**在 Xpath 2.0 中，可以使用单个表达式获取所需属性的所有字符串值**——只需将每个表达式附加`/string(.)`

例如，对于最简单的一个：

```
//(a|b)/@n/string(.) 
```

**更新**：

OP已经澄清了他的问题。现在我们知道他想要产生这个结果：

> ```
> (1, 1), (1, 2), (2, 1), (3, 1), (3, 2), (3, 3) 
> ```

使用单个 XPath 1.0 表达式不可能产生想要的结果。

**下面的 XPath 2.0 表达式产生了想要的结果**：

```
for $a in //a[@n and .//b[@n]],
    $b in $a//b[@n]
  return
     concat('(', $a/@n, ',', $b/@n, ') ') 
```

# java - 确保 JAVA_HOME 设置正确

> ID：11372166
> 
> 赞同：37
> 
> 时间：2012-07-07T04:05:02.850
> 
> 标签：java, macos

对 Java 和 Mac 来说都很新……我想确保设置 JAVA_HOME 以便在其他程序中我可以使用它的路径。所以我做了一些谷歌搜索，这就是我得到的：

如果我在终端输入**/usr/libexec/java_home**我得到这个： **/System/Library/Java/JavaVirtualMachines/1.6.0.jdk/Contents/Home** 但是如果我在终端输入**echo $JAVA_HOME**，我什么也得不到.

你能告诉我这里发生了什么吗？

谢谢。

* * *

## 回答 #1

> 赞同：76
> 
> 时间：2012-07-07T04:09:41.813

JAVA_HOME 在 OSX 上默认没有设置。您可以通过打开终端并执行以下操作来解决此问题：

```
echo "export JAVA_HOME=`/usr/libexec/java_home`" >> ~/.profile    
. ~/.profile 
```

这将导致 JAVA_HOME 在启动时设置（而不仅仅是当前会话），并立即添加它。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2016-01-01T18:25:00.100

# 检查 JAVA_HOME 路径

尝试在您的根目录中运行`source .bash_profile`之前。`echo $JAVA_HOME`如果您设置`JAVA_HOME`正确，这应该可以解决问题。如果您不确定您是否在根目录中，只需键入`cd ~`，按回车键即可。

[![根目录](../Images/e3bd223ccd338ed520978e2e5d018cd0.png)](https://i.stack.imgur.com/nlJZ1.png)

*   **说明**：`source`加载并运行您的 bash_profile。

如果您没有`JAVA_HOME`正确设置，请按照以下说明进行操作。

*   `vim .bash_profile`—*在 Vim 中打开你的 bash_profile。*
    *   > *我在下面列出了您可能需要编辑 .bash_profile 的 VIM 命令列表。*

*   `export JAVA_HOME=$(/usr/libexec/java_home)`—*创建一个 ENV_VAR（环境变量）并将 JDK 的主路径设置/存储为`(/usr/libexec/java_home)`*.
*   退出 vim 并在终端输入以下内容*
*   `source .bash_profile`—*加载并运行你更新的 bash_profile*
*   `echo $JAVA_HOME`—*返回存储在 JDK 中的值`ENV_VAR JAVA_HOME`，它是 JDK 安装的主路径。*

* * *

> # VIM 命令：
> 
> Vim 是一个用于创建或编辑文本文件的编辑器。vim 有两种模式。
> 
> *   **命令模式：**用户可以移动文件，删除文本等。
>     
>     
> *   **插入模式：**用户可以插入文本。
>     
>     
> 
> ## 在模式之间切换：
> 
> **命令模式到插入模式**
> 
> *   为您想要的操作键入适当的字母（a、A、i、I、o、O）——下面字母的详细信息。
> 
> **插入模式到命令模式**
> 
> *   按 Esc（退出键）
> 
> ### 文本输入命令*（用于开始文本输入）*
> 
> *   **a** -- 在当前光标位置后追加文本
>     
>     
> *   **A** -- 将文本追加到当前行的末尾
>     
>     
> *   **i** -- 在当前光标位置之前插入文本
>     
>     
> *   **I** -- 在光标行的开头插入文本
>     
>     
> *   **o** -- 在当前行之后打开一个新行并在那里添加文本
>     
>     
> *   **O** -- 在当前行前面打开一个新行并在那里添加文本
>     
>     
> 
> ### 光标移动命令*（仅用于命令模式。）*
> 
> *   **h** -- 将光标向左移动一个字符
>     
>     
> *   **l** -- 将光标向右移动一个字符
>     
>     
> *   **k** -- 光标上移一行
>     
>     
> *   **j** -- 光标下移一行
>     
>     
> *   **nG 或 :n** -- 光标转到指定的 (n) 行
>     
>     
> *   （例如 10G 到第 10 行）
>     
>     
> *   **$** -- 将光标移动到当前行的末尾
>     
>     
> *   **0** --（零）将光标移动到当前行的开头
>     
>     
> *   **w** -- 转发一个词
>     
>     
> *   **b** -- 后退一个词
>     
>     
> 
> ### 退出命令
> 
> *   **:wq** -- 将文件写入磁盘并退出编辑器
>     
>     
> *   **：问！**-- 退出（无警告）
>     
>     
> *   **:q** -- 退出（如果未保存修改的文件，则会打印警告）
>     
>     
> *   **ZZ** -- 保存工作空间并退出编辑器（与 :wq 相同）

[VIM 编辑器命令 -- 完整列表](http://www.radford.edu/~mhtay/CPSC120/VIM_Editor_Commands.htm)

[osx](/questions/tagged/osx "显示标记为“osx”的问题")[终端](/questions/tagged/terminal "显示标记为“终端”的问题")[java](/questions/tagged/java "显示标记为“java”的问题")

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-07-07T04:18:31.843

echo 命令的空值意味着该值没有按照您的预期正确设置。您可以尝试通过添加以下行来创建/编辑 ~/.profile：

```
vi ~/.profile
export JAVA_HOME=/System/Library/Java/JavaVirtualMachines/1.6.0.jdk/Contents/Home 
```

如果您还不习惯**vi 编辑器**，您也可以使用Mac中的**TextEdit程序在您的主目录中创建该文件。**并执行

```
source ~/.profile 
```

这将加载设置 JAVA_HOME 属性。接下来，您可以尝试执行 echo $JAVA_HOME 以检查它是否已按预期正确设置。

您可能还需要将 PATH 环境变量设置为：

```
export PATH=PATH:$JAVA_HOME/bin 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-07T04:14:38.770

`/etc/launchd.conf`在您的文本编辑器中编辑您的。如果它不存在，则创建它。

然后将以下行附加到文件中： `setenv JAVA_HOME /path/to/java/installation`

## 或者

只需在终端中键入以下命令
`sudo echo setenv JAVA_HOME /path/to/java/installation >> /etc/launchd.conf` 然后在提示时输入您的密码即可。

现在重新启动您的计算机，更改应该已经发生。

**注意：**
我根据我在 Linux 方面的经验给你建议。但是，这些也应该在 MAC 上工作。

[来源](http://www.digitaledgesw.com/node/31)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-12T22:26:04.810

这对新安装的 JDK 没有弹性。根据 Apple 的说法： - 你不应该在全局范围内设置它 - 你应该使用 libexec

[http://lists.apple.com/archives/java-dev/2011/May/msg00040.html](http://lists.apple.com/archives/java-dev/2011/May/msg00040.html)

你可能会认为：

$ cat /etc/launchd.conf setenv JAVA_HOME`/usr/libexec/java_home`

会起作用 - 但不，它会按字面意思设置。

但是，正如我所说，根据那个苹果工程师的说法，无论如何你都不应该在全局范围内设置它。:(

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-08-14T08:09:12.130

用 jenv 设置 JAVA_HOME 后我遇到了这个问题。您可以通过编辑文件来解决问题

```
/Applications/Eclipse.app/Contents/Info.plist 
```

只需通过取消注释/编辑文件的适当部分来设置您的 java 版本的路径。对于使用 homebrew 安装的 AdoptOpenJDK，它看起来像这样：

```
<key>Eclipse</key>
<array>
    <string>-vm</string><string>/Library/Java/JavaVirtualMachines/adoptopenjdk-11.jdk/Contents/Home/bin/java</string>
    <!-- to use a specific Java version (instead of the platform's default) uncomment one of the following options,
                   or add a VM found via $/usr/libexec/java_home -V
        <string>-vm</string><string>/System/Library/Java/JavaVirtualMachines/1.6.0.jdk/Contents/Commands/java</string>
        <string>-vm</string><string>/Library/Java/JavaVirtualMachines/1.8.0.jdk/Contents/Home/bin/java</string>
    -->
        <string>-keyring</string>
    <string>~/.eclipse_keyring</string>
</array> 
```

# php - 优化我的 MySQL 数据库的方法

> ID：11372174
> 
> 赞同：2
> 
> 时间：2012-07-07T04:06:29.370
> 
> 标签：php, mysql, database, optimization, database-design

我有一个 MySQL 数据库，其中包含标准英文字母表中的所有单词，我用它来创建一个简单的 Scrabble 单词生成器。该数据库分为 26 个表：字母表中的每个字母对应一个表。每个表包含两列：

*   “Word”列：该列是主键，类型为 char(12)，不接受空值。
*   “长度”列：该列包含一个无符号的 tinyint 值并且不接受空值。

在我的应用程序中，用户在文本框中输入任意数量的字母（表示他们的图块），然后我使用以下代码查询数据库：

```
// this is looped over 26 times, and $char is a letter between 'A' and 'Z'
// check if the user entered in character $char or a blank tile (signified by ? in app)
// this check prevents me from having to query useless tables
if (in_array($char, $lettersArray) || $blanks)
{
    // if so, select all words that have a length that's possible to make
    $query = 'SELECT Word FROM '.$char.'Words WHERE Length <= '.strlen($letters);
    $result = $db->query($query);
    $num_results = $result->num_rows;

    for ($j = 0; $j < $num_results; $j++)
    {
        // determine if it's possible to create word based on letters input
        // if so, perform appropriate code
    }
} 
```

一切正常，但与竞争对手相比，我的应用程序需要很长时间（即理论上的竞争；这更像是我为自己创建的一个学习项目，我怀疑我会在互联网上发布它），尽管事实上应用程序在我的本地计算机上。我尝试使用 phpMyAdmin 的自动优化功能，但这并没有提供明显的速度提升。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-07T04:55:16.040

我不认为性能问题真的是数据库。数据存储的结构将对算法的性能产生最显着的影响。

解决该问题的一种相当容易理解的方法是将问题作为字谜来处理。您可以按字母顺序排列每个单词中的所有字母，并将其存储为带有索引的列。

```
word      dorw
--------  -------
DALE      ADEL
LEAD      ADEL
LED       DEL
HELLO     EHLLO
HELP      EHLP 
```

然后，给定一组字母，您可以在数据库中查询所有匹配的字谜。只需按字母顺序排列传入的字母集，然后运行查询。

```
SELECT word FROM dictionary WHERE dorw = 'AERT'

RATE
TARE
TEAR 
```

然后，您可以查询字母的子集：

```
SELECT word FROM dictionary WHERE dorw IN ('AER','AET','ART','ERT') 
```

这种方法会让你首先返回最长的单词。

这不是最有效的方法，但它是可行的。

处理“空白”图块将需要更多工作，您需要用一个可能的字母代替它，并且可以在一个查询中完成所有 26 种可能性的检查，

例如，如果他们有字母 ABCD 和空白瓷砖......

```
SELECT word FROM dictionary WHERE dorw IN ('AABCD','ABBCD', 'ABCCD'
 , 'ABCDD', 'ABCDE', 'ABCDE', 'ABCDF', ..., 'ABCDZ') 
```

当您开始处理子集时，这会变得更加痛苦......

（在填字游戏和拼图游戏中，没有任何空白图块）

所以这可能不是最适合拼字游戏的算法。

* * *

还有其他算法可能更有效，尤其是在首先返回较短的单词时。

一种方法是构建一棵树。

根节点是一个“零”字母词。作为根节点的子节点，将是所有单字母单词的节点。每个节点都将被标记它是否代表一个有效的单词。作为这些节点的子节点，您将拥有所有可能的三字母词，再次标记为它是否有效。

那将是很多节点。对于长度不超过 12 个字母的单词，可能的总空间为`1 + 26 + 26**2 + 26**3 + 26**4 + ...`

但是您不需要存储每个可能的节点，您只需存储那些产生有效单词的分支。你不会在下面有分支 ->Z->Z 或 ->X->Q

但是，您将在 ->X->Y->L 下有一个分支，即使 XYL 不是一个词，它也会是通向“XYLOPHONE”的分支的开始

但那是一种树遍历算法，这是根本不同的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-07T04:15:19.703

听起来您需要了解[索引](http://dev.mysql.com/doc/refman/5.0/en/create-index.html)。如果在数据库中创建索引，即使所有数据都在一张表中，也不会查询“无用字母”。

不过，您应该提供更多信息，如果从 mysql 控制台运行查询需要多长时间才能返回结果，将结果从数据库移动到 PHP 引擎需要多长时间。例如，您可能会为正在运行的每个查询带回一个 100 兆的结果集，如果是这种情况，请将结果限制为第一个或多个可能的结果。

要查看返回了多少数据，请在控制台中手动运行一个查询，然后查看返回了多少记录。如果数字很大，则将数据传递给 PHP 需要更长的时间，但这也意味着您的代码必须遍历更多的结果。`for`在找到第一个可以接受的单词后，您可能需要考虑删除我们的循环。如果至少有一个单词是可能的，在放置另一个字母之前不要再次检查它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-07T04:21:14.917

我知道这个问题是关于优化你的数据库，但如果我这样做，我只会从数据库中读取一次单词，初始化一些数据结构并搜索该结构，而不是不断地查询数据库。

抱歉，如果这完全无关紧要。

# actionscript-3 - 单击后退按钮转到功能 goHomePage (evt:Event):void { 后，我无法删除此影片剪辑的子项

> ID：11372175
> 
> 赞同：1
> 
> 时间：2012-07-07T04:06:33.443
> 
> 标签：actionscript-3, removechild

帮助。单击后退按钮返回主页后，我需要删除 newContainer（这是一个影片剪辑）。但它只是加载主页并且 newContainer 仍然存在。：（ 我哪里做错了？

```
import flash.events.MouseEvent;
import flash.events.Event;
import fl.motion.MotionEvent;
import flash.net.URLVariables;
import flash.display.MovieClip;
import flashx.textLayout.elements.Configuration;

var ctr:int = 0;
var now:Date = new Date();

var myurl:String = "http://localhost:8888/eventspictures/getdata.php";

var scriptLoader:URLLoader = new URLLoader();
var scriptRequest:URLRequest = new URLRequest();
var newContainer:MovieClip;

scriptRequest.url = myurl + "?ck=" + now.getTime();

scriptLoader.addEventListener(Event.COMPLETE, handleLoadSuccess);
scriptLoader.addEventListener(IOErrorEvent.IO_ERROR, handleError);

scriptRequest.method = URLRequestMethod.POST;
scriptLoader.load(scriptRequest);

function handleLoadSuccess(evt:Event):void
{

for (var j:Number = 0; j <4; j++)
{
    var newContainer:MovieClip = new con();

    newContainer.name = String(ctr);

    newContainer.y = j*80 +65;
    newContainer.x= 16;

    stage.addChild(newContainer);

    var variables:URLVariables = new URLVariables(evt.target.data);
    trace(variables.output);

    var parse:String = variables.output;
    var parsed:Array = parse.split("<|>");

    var tab:String = '&#09;';
    var eventname:String = '';
    var date:String='';
    var slotsleft:String='';

// different variable names to assign to different column names(etc; eventname, date, slotsleft)
    // loop through.. start from O

        for (var i:Number = 0; i<parsed.length-1; i++)
    {
        trace(parsed[i]);

        var item:String = parsed[i];
        var itemarray:Array = item.split(",");

        eventname +=  itemarray[2] + tab + "<br>";
        date += itemarray[3] + tab;
        slotsleft += itemarray[4] + tab;

        trace(eventname);

        newContainer.eventname_txt.htmlText = eventname;
    newContainer.date_txt.htmlText= date;
    newContainer.slotsleft_txt.htmlText=slotsleft;

}

    }

    //slotsleft_txt.x = 270;
}
function handleError(evt:IOErrorEvent):void
{
}

backbutton_mc.addEventListener(MouseEvent.CLICK, goHomePage);

function goHomePage (evt:Event):void{

    gotoAndPlay("dashboard"); 
```

removeChild(newContainer); }

```
stop(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T06:11:36.457

在您的函数`handleLoadSuccess()`中，您有一个创建 4`MovieClip`并将它们添加到舞台的循环。

但是在您的`goHomePage()`函数中，您只尝试从舞台上移除一个对象。事实证明，这个对象可能`null`在您的示例中（如果您使用调试 Flash 播放器，尝试删除`null`应该生成错误的对象）。

原因可能`null`是因为您在代码中定义了两个命名变量`newContainer`：一个在脚本开头声明，第二个在函数内部`handleLoadSuccess()`（因为您`var`在每一行都使用关键字）。

函数内部创建的变量仅在该函数执行时存在。在函数外部创建的变量似乎永远不会收到值。

您可以使用两种方法：

**跟踪您添加到舞台的内容，方法是将它们放在`Array`：**

`newContainer`将函数外部的变量替换为`Array`被调用的`containers`：

```
var containers:Array = []; 
```

在函数`handleLoadSuccess()`中，当您将每个添加`MovieClip`到阶段时，也将它们添加到`containers`数组中：

```
stage.addChild(newContainer);
containers.push(newContainer); 
```

最后在函数中`goHomePage()`遍历`containers`数组以删除每个`MovieClip`：

```
for (var j:int = 0; j < containers.length; j++)
{
    stage.removeChild( containers[j] );

}
// reset the containers array so it's empty for the next time
// and to remove the references to the MovieClips (to prevent a memory leak)
containers=[]; 
```

**盲目地从舞台上移除所有东西**

如果这是可以接受的，那就容易多了。只需在您的函数中向后迭代舞台的孩子`goHomePage()`：

```
for (var j:int = stage.numChildren; j >= 1; j--)
{
    stage.removeChildAt(j - 1);
} 
```

# php - 加载 CodeIgniter 站点时出错

> ID：11372176
> 
> 赞同：0
> 
> 时间：2012-07-07T04:06:34.573
> 
> 标签：php, codeigniter, codeigniter-2

[我的网站](http://maya3dmodels.com/index.php)是使用 CodeIgniter 开发的，之前运行良好，但现在显示错误。

当我检查错误日志时，它显示：

> [07-Jul-2012 09:17:11] PHP 警告：PHP 启动：Suhosin 扩展不再正式支持 PHP 5.2 及以下版本，因为它已停产。需要您自担风险使用它。在第 0 行的未知 [07-Jul-2012 09:17:11] PHP 警告：
> require(/home/maya3d/public_html/system/codeigniter/Common.php) [href='function.require'>function.require] ：无法打开流：第 38 行的 /home/maya3d/public_html/system/codeigniter/CodeIgniter.php 中没有这样的文件或目录 [07-Jul-2012 09:17:11] PHP 致命错误：require() [href ='function.require'>function.require]：打开失败需要'/home/maya3d/public_html/system/codeigniter/Common.php'>（include_path='.:/usr/lib/php:/usr/local/ lib/php') 在第 38 行的 /home/maya3d/public_html/system/codeigniter/CodeIgniter.php

谁能帮我解决它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T04:10:25.407

登录到服务器并运行：

`ls -l /home/maya3d/public_html/system/codeigniter/Common.php`

如果它说该文件不存在，那就是你的问题。它也可能与权限相关。

# django - 如何在 Django 模板上使用 if/else 条件？

> ID：11372177
> 
> 赞同：58
> 
> 时间：2012-07-07T04:06:37.897
> 
> 标签：django, templates, django-templates

我将以下字典传递给渲染函数，源是字符串列表，标题是可能等于源中的字符串之一的字符串：

```
{'title':title, 'sources':sources}) 
```

在 HTML 模板中，我想在以下几行中完成一些事情：

```
{% for source in sources %}
  <tr>
    <td>{{ source }}</td>
    <td>
      {% if title == {{ source }} %}
        Just now!
      {% endif %}
    </td>
  </tr>
{% endfor %} 
```

但是，以下文本块会导致错误：

```
TemplateSyntaxError at /admin/start/
Could not parse the remainder: '{{' from '{{' 
```

...以`{% if title == {{ source }} %}`红色突出显示。

* * *

## 回答 #1

> 赞同：90
> 
> 时间：2012-07-07T04:15:24.933

您不应该在or语句中使用双括号`{{ }}`语法，您可以像在普通 python 中一样简单地访问那里的变量：`if``ifequal`

```
{% if title == source %}
   ...
{% endif %} 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2018-10-29T07:06:57.497

很抱歉在旧帖子中发表评论，但如果您想使用**else if**语句，这将对您有所帮助

```
{% if title == source %}
    Do This
{% elif title == value %}
    Do This
{% else %}
    Do This
{% endif %} 
```

有关更多信息，请参阅[https://docs.djangoproject.com/en/3.2/ref/templates/builtins/#if](https://docs.djangoproject.com/en/3.2/ref/templates/builtins/#if)

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-07-07T04:13:57.573

```
{% for source in sources %}
  <tr>
    <td>{{ source }}</td>
    <td>
      {% ifequal title source %}
        Just now!
      {% endifequal %}
    </td>
  </tr>
{% endfor %}

                or

{% for source in sources %}
      <tr>
        <td>{{ source }}</td>
        <td>
          {% if title == source %}
            Just now!
          {% endif %}
        </td>
      </tr>
    {% endfor %} 
```

[参见 Django 文档](https://docs.djangoproject.com/en/dev/ref/templates/builtins/?from=olddocs#ifequal)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-08-31T11:58:34.853

你**试试**这个。

我已经在我的**django 模板**中尝试过了。

它会正常工作。只需从**{{source}}**中删除花括号对**{{**和**}** } 即可。

 **我还添加了**<table>**标签，***仅此而已***。

修改后，您的**代码**将如下所示。

```
{% for source in sources %}
   <table>
      <tr>
          <td>{{ source }}</td>
          <td>
              {% if title == source %}
                Just now! 
              {% endif %}
          </td>
      </tr>
   </table>
{% endfor %} 
```

我的字典如下所示，

```
{'title':"Rishikesh", 'sources':["Hemkesh", "Malinikesh", "Rishikesh", "Sandeep", "Darshan", "Veeru", "Shwetabh"]} 
```

**一旦我的模板**被渲染，**输出**看起来像下面。

 **```
Hemkesh 
Malinikesh  
Rishikesh   Just now!
Sandeep 
Darshan 
Veeru   
Shwetabh 
```****

# c++ - 如何有效地确定用于循环的预渲染正弦波音频缓冲区的最小必要大小？

> ID：11372183
> 
> 赞同：2
> 
> 时间：2012-07-07T04:08:44.190
> 
> 标签：c++, math, trigonometry

我编写了一个程序，它以用户指定的频率生成正弦波，并在 96kHz 音频通道上播放。为了节省一些 CPU 周期，我采用了将一小段音频预渲染到缓冲区中，然后循环播放缓冲区的旧技巧，这样我就可以避免每秒调用 sin() 函数 96000 次程序的持续时间，而只是做简单的内存复制。

我的问题是有效地确定这个预渲染缓冲区的最小可用大小。对于某些频率，这很容易——例如，一个 8kHz 正弦波可以通过生成一个 12 样本缓冲区并在循环中播放来完美表示，因为 (8000*12 == 96000)。然而，对于其他频率，正弦波的单个周期需要非整数个样本来表示，因此循环一个周期的样本值会导致不可接受的毛刺。

然而，对于其中一些频率，可以通过预渲染一个以上的正弦波周期并将其循环来解决这个问题——如果我能弄清楚需要多少个周期，以便在缓冲区将是整数，同时还保证缓冲区中的样本数是整数。例如，12.8kHz 的正弦波频率转换为 7.5 个样本的单周期缓冲区大小，这不会干净地循环，但是如果我将正弦波的两个连续周期渲染到 15 个样本的缓冲区中，那么我可以干净地循环结果。

我目前解决这个问题的方法是蛮力：我尝试所有可能的循环计数，看看它们中的任何一个是否会导致缓冲区大小，其中包含整数个样本。我认为这种方法不能令人满意，原因如下：

1）效率很低。例如，下面显示的程序（打印 0Hz 到 48kHz 之间 480,000 个可能频率值的缓冲区大小结果）在我的 2.7GHz 机器上需要 35 分钟才能完成。我认为必须有一种更快的方法来做到这一点。

2) 由于浮点错误，我怀疑结果不是 100% 准确的。

3) 如果找不到小于 10 秒长的可接受缓冲区大小，算法将放弃。（我可以提高限制，但当然这会使算法更慢）。

那么，有什么方法可以分析计算最小可用缓冲区大小，最好是在 O(1) 时间内？看起来应该很容易，但我无法弄清楚我应该使用什么样的数学。

提前感谢您的任何建议！

```
#include <stdio.h>
#include <math.h>

static const long long SAMPLES_PER_SECOND              = 96000;
static const long long MAX_ALLOWED_BUFFER_SIZE_SAMPLES = (SAMPLES_PER_SECOND * 10);

// Returns the length of the pre-render buffer needed to properly
// loop a sine wave at the given frequence, or -1 on failure.
static int GetNumCyclesNeededForPreRenderedBuffer(float freqHz)
{
   double oneCycleLengthSamples = SAMPLES_PER_SECOND/freqHz;

   for (int count=1; (count*oneCycleLengthSamples) < MAX_ALLOWED_BUFFER_SIZE_SAMPLES; count++)
   {
      double remainder = fmod(oneCycleLengthSamples*count, 1.0);
      if (remainder > 0.5) remainder = 1.0-remainder;
      if (remainder <= 0.0) return count;
   }
   return -1;
}

int main(int, char **)
{
   for (int i=0; i<48000*10; i++)
   {
      double freqHz = ((double)i)/10.0f;
      int numCyclesNeeded = GetNumCyclesNeededForPreRenderedBuffer(freqHz);
      if (numCyclesNeeded >= 0)
      {
         double oneCycleLengthSamples = SAMPLES_PER_SECOND/freqHz;
         printf("For %.1fHz, use a pre-render-buffer size of %f samples (%i cycles, %f samples/cycle)\n", freqHz, (numCyclesNeeded*oneCycleLengthSamples), numCyclesNeeded, oneCycleLengthSamples);
      }
      else printf("For %.1fHz, there was no suitable pre-render-buffer size under the allowed limit!\n", freqHz);
   }
   return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T06:49:44.767

```
number_of_cycles/size_of_buffer = frequency/samples_per_second 
```

这意味着如果您可以简化频率/samples_per_second 分数，您可以找到缓冲区的大小和缓冲区中的周期数。如果frequency和samples_per_second都是整数，可以通过求最大公约数来化简分数，否则可以使用连分数的方法。

例子：

假设你的频率是 1234.5，你的 samples_per_second 是 96000。我们可以通过乘以 10 将它们变成两个整数，所以我们得到比率：

频率/samples_per_second = 12345/960000

最大公约数是 15，所以可以降到 823/64000。

因此，您需要在 64000 个样本缓冲区中进行 823 个周期才能准确地再现频率。

# android - 如何在 android 谷歌地图视图中的三个坐标之间绘制路径或线？

> ID：11372184
> 
> 赞同：1
> 
> 时间：2012-07-07T04:08:53.407
> 
> 标签：android, google-maps, geocoding

如何在 android 谷歌地图视图中的三个地理点（坐标）之间画一条线？大多数示例显示在两个地理点之间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T04:21:09.273

我认为您可以覆盖 Overlay 以使用您的点定义您的自定义绘制（无论您有 2 个或三个点，您都可以自己控制绘制逻辑）

# python - Python 2 和 Python 3 双重开发

> ID：11372190
> 
> 赞同：27
> 
> 时间：2012-07-07T04:10:04.780
> 
> 标签：python, python-3.x, python-2to3

我刚刚开始一个新的 Python 项目，理想情况下，我想从一开始就提供 Python 2 和 3 支持，并且开发开销最小。我的问题是，对于全新的项目，最好的方法是什么？

作为安装脚本的一部分，我遇到过运行 2to3 甚至 3to2 的项目。这似乎是一种很常见的方式。但是，似乎有几种不同的方法可以做到这一点。我也遇到了[Distribute](http://packages.python.org/distribute/python3.html)。

还可以选择尝试编写多语言 Python 2/Python 3 代码。尽管这似乎是一个可怕的想法，但我注意到我最近倾向于编写比 Python 3 代码更惯用的代码，即使我仍然将它作为 Python 2 运行。我觉得这只会帮助我自己的过渡，当日子终于到来了，但并没有为提供或至少帮助双重支持做太多事情。

我看到的大多数提供双重支持的项目都在后期添加了 Python 3 支持，所以我特别好奇是否有更好的方法更适合新项目，您可以从中受益。

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-07T06:02:09.397

根据我的经验，这取决于项目的类型。

如果它是一个库或非常独立的应用程序，一个常见的选择是在 Python 2.7 中开发，尽可能避免在 Python 3.x 中弃用的结构，并诉诸自动化测试来识别 py2to3 留下的需要手动修复的漏洞。

另一方面，对于现实生活中的应用程序，请准备好不断偶然发现尚未移植到 py3k 的库（有时是重要的库）。大多数情况下，您别无选择，只能将库移植到 Python 3，因此，如果您负担得起，那就去吧。通常我不能，这就是为什么我不支持这种项目的 Python 3（但我很难编写在合适的时候更容易移植的代码）。

对于 unicode 处理，我发现这个[PyCon 2012 视频](http://pyvideo.org/video/948/pragmatic-unicode-or-how-do-i-stop-the-pain)非常有用。该建议对 Python 2.x 和 3.x 都有好处：将来自外部的每个字符串视为字节，并尽快转换为 unicode，并尽可能晚地输出转换为字节的字符串。还有另一个关于[日期/时间处理](http://pyvideo.org/video/946/what-you-need-to-know-about-datetimes)的内容丰富的视频。

[更新]

这是一个古老的答案。**截至今天（2019 年），使用 Python 2.x 启动项目没有很好的理由，并且有几个令人信服的理由将旧项目移植到 Python 3.7+ 并放弃对 Python 2.x 的支持**。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-03-12T15:49:15.563

根据我的经验，最好**不要使用类似的库`six`**；相反，我`compat.py`对每个包都有一个只包含所需代码的包，这与[Scott Griffiths 的方法](https://stackoverflow.com/a/11377521/918959)不同。`six`还有试图支持早已消失的 Python 版本的负担：事实是，当你接受 Python <=2.6 和 <=3.2 已经消失时，生活会容易得多。在 2.7 中，有向后移植的兼容性功能，例如s`.view*`上的方法，`dict`其工作方式与 Python 3 上的非前缀版本完全相同；另一方面，Python 3.3`u`再次支持 unicode 字符串的前缀。

即使对于非常大的包，一个`compat.py`允许其他代码不变地工作的模块也可能很短：这是我和我的同事帮助制作 2/3 polyglot的[包中](https://github.com/pika/pika/blob/master/pika/compat.py)[的一个示例。`pika`](https://github.com/pika/pika/blob/master/pika/compat.py)Pika 是那些内部将 unicode 和 8 位字符串混合在一起的项目之一，但现在我们已经在 Python 3 的生产环境中使用它超过 6 个月了，没有出现任何问题。

* * *

另一个重要的事情是在开发时始终使用以下`__future__`s：

```
from __future__ import absolute_import, division, print_function 
```

我建议不要使用`unicode_literals`，因为有些字符串需要是`str`在任一平台上调用的类型。如果您*不使用* `unicode_literals`，您可以执行以下操作：

*   `b'123'`是 8 位字符串文字
*   `'123'`是`str`两个平台上的类型
*   `u'123'`在两个平台上都是正确的 unicode 文本

* * *

在任何情况下，请*不要*在安装/包构建时间上做 2to3；过去，一些包曾经这样做过——`pip install`这些包在 Python 2 上需要几秒钟，但在 Python 3 上更接近一分钟。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-07T05:08:20.707

选择 2 或 3，无论是你最喜欢的风格，并通过单元测试让它在其中工作得很好。然后确保这些测试在通过 py2to3 或 py3to2 运行后正常工作。最好维护一个版本的代码。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-07T18:19:12.287

我个人的经验是，编写在 Python 2 和 3 中都能正常工作的代码比依赖 2to3/3to2 脚本更容易，因为后者通常无法完全正确地翻译。

也许我的情况很不寻常，因为我正在使用字节类型做很多事情，而 2to3 在转换这些类型方面有一项艰巨的任务，但是拥有一个代码库的便利性超过了在代码中进行一些 hack 的讨厌。

作为一个具体的例子，我的[bitstring](http://code.google.com/p/python-bitstring/)模块是早期转换为 Python 3 的，相同的代码用于 Python 2.6/2.7/3.x。[源代码](http://code.google.com/p/python-bitstring/source/browse/trunk/bitstring.py)超过 4000 行，这是我需要让它适用于不同主要版本的代码：

```
# For Python 2.x/ 3.x coexistence
# Yes this is very very hacky.
try:
    xrange
    for i in range(256):
        BYTE_REVERSAL_DICT[i] = chr(int("{0:08b}".format(i)[::-1], 2))
except NameError:
    for i in range(256):
        BYTE_REVERSAL_DICT[i] = bytes([int("{0:08b}".format(i)[::-1], 2)])
    from io import IOBase as file
    xrange = range
    basestring = str 
```

好吧，这并不漂亮，但这意味着我可以以良好的 Python 2 风格编写 99% 的代码，并且所有单元测试仍然通过 Python 3 中的相同代码。这条路线并不适合所有人，但它是可以考虑的选项。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-08T20:17:18.030

如果您需要对 Python 2.5 或更早版本的支持，使用 Distribute 及其 2to3 集成通常是最好的方法。但是如果你只需要支持 Python 2.6 或更高版本，我会让代码在 Python 2 和 Python 3 下运行而不需要转换。我也会使用[六个](http://packages.python.org/six/)库来简化此操作。

# java - 在 JXTable 中，根列不采用其他列颜色

> ID：11372198
> 
> 赞同：1
> 
> 时间：2012-07-07T04:12:10.740
> 
> 标签：java, swingx, jxtable

![在此处输入图像描述](../Images/ec86a7ff2fbd0dab785ea366f698a7a7.png)

我使用swingx作为table。第一列没有对JxTable进行颜色渲染。请提出您宝贵的建议。提前谢谢。

# iphone - Storyboard 中新视图控制器的类

> ID：11372208
> 
> 赞同：12
> 
> 时间：2012-07-07T04:14:31.407
> 
> 标签：iphone, objective-c, ios, xcode

在我的故事板中，我拖动了一个新的视图控制器。我的 Storyboard 现在有两个视图控制器：一个是我创建文件时出现的主视图控制器，另一个是拖动的。

当我进入“助理编辑器”并选择主视图控制器时，我得到了 ViewController.h 类。但是当我选择另一个控制器时，我得到 UIViewController.h 这是一个 Apple 文件。

如何为每个视图控制器链接/创建这些类？有没有一种自动化的方法可以做到这一点，或者我做得不对。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-07-07T04:19:30.923

您需要创建自己的 UIViewController 子类，并将新创建的视图控制器设置为故事板中的自定义类。

1.  按 cmd+n 或转到文件 > 新文件
2.  选择 Objective-C 类并点击下一步
3.  在第二个框中输入 UIViewController 并在第一个框中输入新类的名称（类似于 MyClassViewController）
4.  进入故事板，选择拖出的视图控制器，查看检查器并转到自定义类选项卡并将自定义类设置为新创建的视图控制器（例如 MyClassViewController）

# lua - math.random 如何与指数一起在 Lua 中工作？

> ID：11372214
> 
> 赞同：1
> 
> 时间：2012-07-07T04:15:22.863
> 
> 标签：lua

我试图在 Lua 中获得一个随机的 16 位数字。我写的东西在逻辑上不适合我。math.random 如何处理指数？

这就是我不断得到的。

```
 > return math.random(10^15, 10^16)
 > -1637272360 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T04:25:46.393

如果您想要一个 16 位数字，请尝试以这种方式生成它们：

```
local num = math.random( 10^7, 10^8 )
num = tostring(num)..math.random( 10^7, 10^8 ) 
```

然后将变量保留为`num`字符串类型。作为一个数字，它将值转换为指数形式（因为非常大；在您的情况下`> 10^14`；指数值）或其他方式，您可以将它们存储为（n）十六进制字符串？

# python - 未找到 Virtualenvwrapper

> ID：11372221
> 
> 赞同：5
> 
> 时间：2012-07-07T04:16:05.123
> 
> 标签：python, virtualenv, python-module, virtualenvwrapper

鉴于我对 Python 的了解，我遇到的问题不应该发生。我用 pip 在 Mac OS X Snow Leopard 上安装了 virtualenvwrapper。它在 /Library/Python/2.6/site-packages 中。但是当我尝试导入 virtualenvwrapper 时，Python 告诉我没有同名的模块。其他模块（例如 virtualenv）加载得很好，并且 /Library/Python/2.6/site-packages 就在我的 Python 路径的顶部。那么 virtualenvwrapper 有什么奇怪的地方，以至于 Python 没有找到它吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T04:24:19.987

我的位于 /usr/local/bin/virtualwrapper.sh 但您应该能够将其添加到您的 .bashrc、.bash_profile 或 .profile 以放入您的环境中。（记得做 source .bashrc 或者打开一个新的终端窗口）

```
source /Library/Python/2.6/site-packages/virtualenvwrapper.sh 
```

*编辑*这是我与 pip、virtualenv 和 virtualenv 包装器相关的整个 bash 配置文件，因为它看起来很难看作为评论

```
# python
export PATH=/usr/local/share/python:$PATH
export PYTHONPATH=/usr/bin/python:$PYTHONPATH

export PATH=/usr/local/MacPorts/Library/Frameworks/Python.framework/Versions/2.7/bin:$PATH
export VIRTUALENVWRAPPER_PYTHON=/usr/local/MacPorts/Library/Frameworks/Python.framework/Versions/2.7/bin/python

#virtualenv wrapper
export WORKON_HOME=~/.virtualenvs

# mkvirtualenv --no-site-packages myenv
source /usr/local/MacPorts/Library/Frameworks/Python.framework/Versions/2.7/bin/virtualenvwrapper.sh
export PIP_VIRTUALENV_BASE=$WORKON_HOME
export PIP_RESPECT_VIRTUALENV=true 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T04:23:32.870

尝试使用`**sudo** pip virtualenvwrapper`. 它可能指的是它安装在 /usr/local/bin 中的 shell 脚本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-25T03:11:23.020

我在带有 XCode 5.1.1 的 Mac OS X 10.9.2 上，对我来说`virtualenvwrapper.sh`文件存在于

```
/usr/local/bin/virtualenvwrapper.sh 
```

所以我只是将它复制到`~/.profile`文件中：

```
source /usr/local/bin/virtualenvwrapper.sh 
```

现在我的`~/.profile`文件看起来像这样：

```
# MacPorts Installer addition on 2014-02-23_at_17:28:39: adding an appropriate PATH variable for use with MacPorts.
export PATH=/opt/local/bin:/opt/local/sbin:$PATH
# Finished adapting your PATH environment variable for use with MacPorts.

source /usr/local/bin/virtualenvwrapper.sh 
```

现在我可以`virtualenvwrapper`毫无问题地使用命令了

希望这可以帮助！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-23T21:05:46.247

这对我有用：

```
source ~/.bashrc 
```

# xml - 在 XSLT 1.0 中规范化混合内容元素中的空白

> ID：11372222
> 
> 赞同：1
> 
> 时间：2012-07-07T04:16:07.867
> 
> 标签：xml, xslt

[编辑：更改标题以更好地概念化问题。]

属性的值`@xml:space`可以是`"default"`或`"preserve"`。XML 指定第二个含义，但将第一个留给应用程序。（我想我是对的。）那么如果应用程序想要`default`实现 XSchema 的`collapse`呢？XSLT 1.0 如何真正做到这一点？

我认为处理文本的内置模板，即

```
<xsl:template match="text()">
   <xsl:value-of select="."/>
</xsl:template> 
```

需要用类似这样的伪代码替换：

```
<xsl:choose>
   <xsl:when test="../@xml:space='preserve'"
     <xsl:value-of select="."/>
   </xsl:when>
   <xsl:otherwise>

      if position(.)=1 then output LTRIM(value-of(.))
      if position(.)=last() then output RTRIM(value-of(.))
      if position(.)= 1 and last()=1 then output normalize-space(.)

   </xsl:otherwise>
</xsl:choose> 
```

然后这个输入：

```
<persName> The man is 
   <forename>Edward</forename>

   <forename>George</forename>
   <surname type="linked">Bulwer-Lytton</surname>, <roleName>Baron Lytton of
   <placeName>Knebworth</placeName>
   </roleName>
</persName> 
```

将被正确渲染，就像修剪`The man is Edward George Bulwer-Lytton, Baron Lytton of Knebworth`前后的空间`The man`以及折叠和折叠之间的空间一样。（示例来自 TEI。）`Knebworth``Edward``George`

[编辑：我在这里删除了一个不正确且具有误导性的段落。]

需要为每个文本节点执行用于实现该伪代码的 XSLT 1.0。那岂不是又丑又慢？[编辑：也许不是。我简化了伪代码。有快速修剪程序吗？选择真的那么慢吗？】

底线：如何在 XSLT 1.0 中实现 XSchema 的折叠（只有浏览器嵌入的扩展）？

我希望我说的都是正确的。我希望代码很简单。我还没有看到它是怎么回事。[编辑：将 xs:collapse 更改为 XSchema 的崩溃。]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T05:55:09.633

这里有一些接近你想要的东西......

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output method="text" indent="yes"/>
<xsl:strip-space elements="*"/>  

<xsl:template match="/">
Demonstration of collapsed white space.
=======================================
<xsl:apply-templates select="*"/>
</xsl:template>

<xsl:template match="text()">
  <xsl:value-of select="concat(normalize-space(.),' ')" />  
</xsl:template>

</xsl:stylesheet> 
```

这会产生输出......

```
Demonstration of collapsed white space.
=======================================
The man is Edward George Bulwer-Lytton , Baron Lytton of Knebworth 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T14:53:29.507

**你没有正确理解 的定义`xml:space`。**

它仅适用于*空白文本节点*。它不适用于包含在也具有非空白字符的文本节点中的空白字符（也称为“重要空白”）。

**从[XML 1.0 规范](http://www.w3.org/TR/2008/REC-xml-20081126/#sec-white-space)**：

> “*另一方面，在交付版本中应该保留的“重要”空白很常见，例如在诗歌和源代码中*“

**因此，“修剪”文本节点的整个想法与`xml:space`.**

**[此资源](http://www.xmlplease.com/xml/xmlspace/)**包含一个易于理解的`xml:space`属性说明。

**更新**：

答案中的 OP 改变了他的初始要求。现在他想要的只是（如果我对他的答案的理解是正确的）删除所有具有相同父级的纯空白文本节点中的第一个（我也认为是最后一个）纯空白文本节点。

**这很简单——只需将此模板添加到 XSLT 样式表**：

```
<xsl:template match=
   "text()[not(normalize-space())][position() = 1 or position() = last()]"/> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-07T16:51:59.320

很好的编辑。谢谢迪米特。

我不相信我读错了规范，但暂时假设我是；让我修正一下我的例子（也许我应该在它来到我的时候离开）。

```
<persName>
   <forename>Edward</forename>
   <forename>George</forename>
   <surname type="linked">Bulwer-Lytton</surname>, <roleName>Baron Lytton of
   <placeName>Knebworth</placeName>
   </roleName>
</persName> 
```

我希望默认处理是删除之前的纯空格文本节点，`<forename>Edward</forename>`而不是删除之后的纯空格文本节点`<forename>Edward</forename>`。

但是，我也不清楚 xml:space 仅指包含或删除纯空白文本节点，例如 xsl:strip-space 就是这样。实际上，正如您所注意到的，2.10 White Space Handling 使用诗歌和源代码作为示例。这些是空间位于文本节点内的情况。@xml:space 标识应该如何处理该空间。是否应该以应用程序的默认方式保留或处理？

我认为[http://www.xmlplease.com/xml/xmlspace/](http://www.xmlplease.com/xml/xmlspace/)是错误的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-25T13:01:20.790

我在 xml-dev 进行了检查，结果证明我对 @xml:space 的含义和预期用途是正确的。

这是规范混合内容元素中的空白的代码（这是表达我想要做的更好的方式）：

```
<xsl:template priority=".7" match="text()[position()=1 and not((ancestor::node()/@xml:space)[position()=last()]='preserve')]">
    <xsl:value-of select="normalize-space()"/>
    <xsl:if test="normalize-space(substring(., string-length(.))) = ''">
        <xsl:text> </xsl:text>
    </xsl:if>
</xsl:template>
<xsl:template priority=".7" match="text()[position()=last() and not((ancestor::node()/@xml:space)[position()=last()]='preserve')]">
    <xsl:if test="normalize-space(substring(., 1, 1)) = ''">
        <xsl:text> </xsl:text>
    </xsl:if>
    <xsl:value-of select="normalize-space()"/>
</xsl:template>
<xsl:template priority=".8" match="text()[position()=1 and position()=last() and not((ancestor::node()/@xml:space)[position()=last()]='preserve')]" >
    <xsl:value-of select="normalize-space(.)"/>
</xsl:template> 
```

过滤`@xml:space`允许`preserve`覆盖。这`test=`只是测试空格的一种方法。优先级解决了当节点是元素中唯一的文本节点时引起的冲突，因此既是第一个节点也是最后一个节点。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-04-21T20:53:05.730

基于您之前的答案...如果您有一个看起来像这样的文件

```
<document>
<p>A paragraph of text with subtags (whitespace after; no whitespace only between): Lorem
        <italic>Before/After</italic> dolor sit amet, consectetur adipiscing elit, sed do eiusmod
    tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim <italic>Before/After</italic>
    quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.</p>
<p>A paragraph of text with subtags (whitespace between: Lorem ipsum dolor sit amet, consectetur
    adipiscing elit, sed do eiusmod <italic>Before/After</italic>
    <italic>Before/After</italic> incididunt ut labore et dolore magna aliqua. Ut enim ad minim
    veniam, <italic>Before/After</italic> <italic>Before/After</italic> laboris nisi ut aliquip 
    ex ea commodo consequat. </p>
</document> 
```

然后斜体标记之间的位不会被您的规范化空间模板捕获，因为它们既不在块的开头也不在块的结尾。

据我所知，您必须添加第四个来检查打开和关闭空间（并保留它），然后规范化两者之间的东西。

```
<xsl:template priority=".7" match="text()[not(position()=1) and not(position()=last()) 
    and not((ancestor::node()/@xml:space)[position()=last()]='preserve')]" >
    <xsl:if test="normalize-space(substring(., 1, 1)) = ''">
        <xsl:text> </xsl:text>
    </xsl:if>
        <xsl:value-of select="normalize-space()"/>
    <xsl:if test="normalize-space(substring(., string-length(.), 1)) = ''">
        <xsl:text> </xsl:text>
    </xsl:if>
</xsl:template> 
```

# eclipse - 组合的动态刷新

> ID：11372224
> 
> 赞同：0
> 
> 时间：2012-07-07T04:16:23.743
> 
> 标签：eclipse, swt, eclipse-rcp, custom-component

我在专门的查看器旁边有一个树查看器。在树查看器中选择某些内容时，有关此对象的详细信息将显示在专用查看器中。`TreeViewer tree`, `Composite control`, 和`MySpecializedViewer viewer`是实例变量。

```
public TheEverythingViewer(Composite parent) {
    control = new Composite(parent, SWT.NONE);
    control.setLayout(new GridLayout(2, false));

    tree = new TreeViewer(control);
    tree.setContentProvider(new MyContentProvider());
    tree.setLabelProvider(new MyLabelProvider());
    tree.setUseHashlookup(true);
    tree.getControl().setLayoutData(new GridData(GridData.BEGINNING, GridData.FILL, false, true, 1, 1));

    tree.addSelectionChangedListener(new ISelectionChangedListener() {
        @Override public void selectionChanged(SelectionChangedEvent event) {
            try {
                IStructuredSelection sel = (IStructuredSelection) event.getSelection();
                MyClass myInput = (MyClass) sel.getFirstElement();

                if (viewer != null)
                    if (!viewer.getControl().isDisposed())
                        viewer.getControl().dispose();
                viewer = new MySpecializedViewer(control, table);

                control.getShell().layout();
            } catch (Exception e) {
                if (viewer != null)
                    if (!viewer.getControl().isDisposed())
                        viewer.getControl().dispose();
                viewer = null;
            }
        }
    });
} 
```

难道我做错了什么？我只是想：

```
+--------------+--------------------------------------------+
| + Node       |                                            |
|   - Node     |                                            |
|   + Node     |                       My                   |
|     - Node   |                                            |
|   - Node     |      Specialized                           |
|              |                              Viewer        |
|              |                                            |
|              |                                            |
|              |                                            |
|              |                                            |
|              |                                            |
|              |                                            |
|              |                +--------+                  |
|              |                |        |                  |
|              |                |        |                  |
|              |                |        |                  |
|              |                +--------+                  |
|              |                                            |
|              |                                            |
|              |                                            |
|              |                                            |
+--------------+--------------------------------------------+ 
```

专用查看器具有需要根据所选节点消耗更多或更少空间的表。目前，创建专用查看器的新实例比更改其输入要简单得多（这在 ATM 上不起作用）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T06:21:24.300

Yes, you shouldn't be recreating the viewer every time selection changes in your tree, you should just be sending the tree's selection to the existing viewer as its input, at which point it can do whatever you want it to do with the new input. You're also never setting the layout data on your specialized viewer's control, and then forcing the entire shell to re-layout is wasteful.

# javascript - Phonegap deviceReady 未触发

> ID：11372227
> 
> 赞同：0
> 
> 时间：2012-07-07T04:17:21.033
> 
> 标签：javascript, iphone, debugging, cordova

如果这是我忽略的简单事情，请原谅。我正在使用 PhoneGap/Cordova 平台首次涉足应用程序开发，我似乎陷入了第一个障碍。我的 deviceReady 侦听器似乎没有触发。

我的代码如下所示：

```
alert('0');

document.addEventListener("deviceready", function(){
    alert('1');
    db = window.openDatabase("testproject", "1.0", "PhoneGap Test", 200000);
    alert('2');
    if (dbCreated){
        alert('3');
        db.transaction(getData, transaction_error);
    } else {
        alert('4');
        db.transaction(populateDB, transaction_error, populateDB_success);
    }
}, false); 
```

初始`alert('0')`（放入以确保我实际连接到文件）正在触发，但没有其他任何事情发生。

在这里的另一篇文章中。有人提示有类似问题的其他人尝试`document.addEventListener("deviceready", deviceReadyFunction, true)`为他们解决了这个问题，但对我没有。

作为一个附带问题，您如何在 PhoneGap 开发中调试 javascript 和检查客户端数据库？在为 web 开发时，我显然有 firebug 和许多其他工具，但是由于 PhoneGap 开发人员严重依赖不是由浏览器触发的 deviceready，我应该注意什么工具？（我在 Coda 中编写代码，但从 Xcode 编译）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T04:38:38.983

我将代码放在一起，效果很好，我已经使用 Cordova 1.7 和 Android 2.2 进行了测试

```
 var dbCreated = false;
    document.addEventListener("deviceready",
            function() {
                alert('1');
                db = window.openDatabase("testproject", "1.0", "PhoneGap Test",
                        200000);
                alert('2');
                if (dbCreated) {
                    alert('3');
                    db.transaction(getData, transaction_error);
                } else {
                    alert('4');
                    db.transaction(populateDB, transaction_error,
                            populateDB_success);
                }
            }, false);

    function getData() {

    }

    function transaction_error() {

    }

    function populateDB(tx) {

    }

    function populateDB_success() {

    } 
```

完整源代码 - [https://gist.github.com/3064728](https://gist.github.com/3064728)

对于调试，使用 weinre 它是一个非常好的工具，可以在移动设备上调试 javascript 应用程序。

[http://people.apache.org/~pmuellr/weinre/docs/latest/](http://people.apache.org/~pmuellr/weinre/docs/latest/)

PhoneGap 也通过 debug.phonegap.com 使用它

# sql - 如果不指定所谓的可选参数，则无法调用存储过程

> ID：11372228
> 
> 赞同：0
> 
> 时间：2012-07-07T04:17:30.393
> 
> 标签：sql, sql-server, stored-procedures, ado.net

我正在尝试使用几个必需参数和几个可选参数调用存储过程。在我出现之前，程序的开头是这样编写的：

```
USE [MYDB]
GO

SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO

ALTER PROCEDURE [dbo].[SP_GetStudents]
(
    @SortOrder          varchar(50),
    @SortColumn         varchar(150),
    @SortLetter         varchar(10),
    @Status             varchar(250),
    @PageIndex              int,
    @PageSize           int,
    @User_ID            int,
    @Reference_No           varchar(50) = NULL,
    @First_Name         varchar(50) = NULL,
    @Middle_Name            varchar(50) = NULL,
    @Last_Name          varchar(50) = NULL
)
As
BEGIN
-- other stuff here 
```

一切似乎都很好。然后我在末尾添加了另一个参数：

```
USE [MYDB]
GO

SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO

ALTER PROCEDURE [dbo].[SP_GetStudents]
(
    @SortOrder          varchar(50),
    @SortColumn         varchar(150),
    @SortLetter         varchar(10),
    @Status             varchar(250),
    @PageIndex              int,
    @PageSize           int,
    @User_ID            int,
    @Reference_No           varchar(50) = NULL,
    @First_Name         varchar(50) = NULL,
    @Middle_Name            varchar(50) = NULL,
    @Last_Name          varchar(50) = NULL,
    @ContextID          int = NULL
)
As
BEGIN
-- other stuff here 
```

现在它坏了。当我使用 ADO.NET 通过设置带有参数的命令对象来调用存储过程时，它会引发异常，因为我没有设置`@ContextID`参数。

知道为什么吗？我想如果我将它设置为默认值`NULL`，那么它实际上是完全可选的。

*更新*：这是 SqlCommand 的设置方式，我可以在这里表示它：

```
SqlCommand cmd = new SqlCommand("SP_GetStudents");
cmd.CommandType = CommandType.StoredProcedure;
SqlParameter param = new SqlParameter();
param.ParameterName = "@SortOrder";
param.Value = sortOrder;
param.Direction = ParameterDirection.Input;

SqlParameter param2 = new SqlParameter();
param2.ParameterName = "@SortColumn";
param2.Value = sortColumn;
param2.Direction = ParameterDirection.Input;
cmd.Parameters.Add(param);
cmd.Parameters.Add(param2);
cmd.Parameters.Add(new SqlParameter("@SortLetter", sortLetter));
cmd.Parameters.Add(new SqlParameter("@Status", status));
cmd.Parameters.Add(new SqlParameter("@PageIndex", pageIndex));
cmd.Parameters.Add(new SqlParameter("@PageSize", pageSize));

// here, the code splits a search expression into multiple parameters, looping over a switch statement like this:

foreach (string token in tokens)
{
    switch(token)
    {
        case "Reference_No":
            cmd.Parameters.Add(new SqlParameter("@Reference_No", (object)value ?? DBNull.Value));
            break;
        case "First_Name":
            cmd.Parameters.Add(new SqlParameter("@First_Name", (object)value ?? DBNull.Value));
            break;
        case "Last_Name":
            cmd.Parameters.Add(new SqlParameter("@Last_Name", (object)value ?? DBNull.Value));
            break;
        case "Middle_Name":
            cmd.Parameters.Add(new SqlParameter("@Middle_Name", (object)value ?? DBNull.Value));
            break;
        case "Generation":
            cmd.Parameters.Add(new SqlParameter("@Generation", (object)value ?? DBNull.Value));
            break;
        case "ContextID":
            cmd.Parameters.Add(new SqlParameter("@ContextID", (object)value ?? DBNull.Value));
            break;
    }
}

cmd.Parameters.AddWithValue("@User_ID", userID);
// fires off cmd through a DAL 
```

这是例外（类型`System.Data.SqlClient.SqlException`）：

> 参数化查询 '(@Reference_No varchar(50), @First_Name varchar(5' 需要参数 '@ContextID'，但未提供该参数。

我觉得这条消息有点奇怪，因为格式似乎被劫持了。无论如何，在引擎盖下，该命令`SqlDataAdapter`是通过用于填充 a 的 a执行的`DataSet`。`Fill`在方法执行期间抛出异常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T04:47:32.583

在此[http://msdn.microsoft.com/en-us/library/ms187926.aspx](http://msdn.microsoft.com/en-us/library/ms187926.aspx)链接上，提到了以下行。

> 每个声明参数的值必须由用户在调用过程时提供，除非定义了参数的默认值或将该值设置为等于另一个参数。如果过程包含表值参数，并且调用中缺少该参数，则传入一个空表。

因此，基于此，我可以说，如果您使用“默认”密钥工作，您的问题将得到解决。

同样在同一页面上，还提到了有关默认值的信息，其中包含以下详细信息。

> default 参数的默认值。如果为参数定义了默认值，则可以在不为该参数指定值的情况下执行过程。默认值必须是常量，也可以为 NULL。常量值可以是通配符的形式，使得在将参数传递到过程中时可以使用 LIKE 关键字。请参见下面的示例 C。
> 
> 默认值仅记录在 sys.parameters.default 列中，用于 CLR 过程。对于 Transact-SQL 过程参数，该列将为 NULL。

谢谢， 吉格

# iphone - 在 NSMutableArray 中添加对象是否有任何限制..？

> ID：11372231
> 
> 赞同：3
> 
> 时间：2012-07-07T04:18:34.483
> 
> 标签：iphone, objective-c, nsmutablearray

最近我正在做一个需要大量编号的项目。对象应该添加到 NSMutableArray。

我有点困惑我们可以在**NSMutableArray**中添加多少对象..？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T04:23:24.663

这可能都取决于内存。与较新的设备相比，较旧的设备在运行应用程序时获得的 RAM（内存）份额较小。因此，旧设备的限制可能低于新设备。也就是说，它可能无法精确定位到特定数字（除非我弄错了）。

相反，您应该尝试做的是弄清楚您是否可以在这里更好地处理内存，这样您就不必担心大小限制:)

**编辑** 来自 Steffen Itterheim 的“使用 iOS 5 学习 Cocos2D 游戏开发”，根据设备的已安装内存，以下是对应用程序可以使用的内存量的粗略估计：

已安装 128MB => 35-40MB 可用，内存警告为 20-25MB；

已安装 256MB => 120-150MB 可用，内存警告为 80-90MB；

已安装 512 MB => 340-370MB 可用，内存警告为 260-300MB。

当然这些是粗略的估计，但是根据设备的不同，您可以清楚地看到 NSMutableArray 的大小取决于可用内存

# ios - stringWithFormat 浮动的奇怪行为

> ID：11372232
> 
> 赞同：3
> 
> 时间：2012-07-07T04:18:47.940
> 
> 标签：ios, floating-point, nsstring, lldb

```
(lldb) po [NSString stringWithFormat:@"%.1f", 0.01]
(id) $21 = 0x003a2560 19991592471028323832250853378750414848.0
(lldb) po [NSString stringWithFormat:@"%.1f", 0.1]
(id) $22 = 0x0de92240 -0.0 
```

有人理解这里的行为吗？我正在设备上运行。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-07T04:40:59.873

这是`lldb`. 如果您在 中尝试相同的操作`gdb`，它可以正常工作。我怀疑`lldb`只传递了参数的低 32 位。IEEE 表示的 0.01 及其打印的数字如下：

```
47ae147b3778df69 = 19991592471028323832250853378750414848.00
3f847ae147ae147b = 0.01 
```

请注意，0.01 的低 32 位与另一个数字的高 32 位匹配。

该错误也发生在`printf`：

```
(lldb) expr (void)printf("%.1f\n", 0.01)
19991592257096858016910903319197646848.0
<no result> 
```

它不会发生在`+[NSNumber numberWithDouble:]`：

```
(lldb) po [NSNumber numberWithDouble:0.01]
(id) $3 = 0x0fe81390 0.01 
```

所以我怀疑这个错误是在`lldb`处理可变参数函数中。

您可以在[LLVM bugzilla](http://llvm.org/bugs/)和/或[Apple 的错误报告器（又名 rdar）](https://bugreport.apple.com/)上打开错误报告。

# google-app-engine - Google App Engine - 设置索引/主页

> ID：11372233
> 
> 赞同：0
> 
> 时间：2012-07-07T04:19:22.340
> 
> 标签：google-app-engine, yaml

据我了解，Google App Engine 项目中的 app.yaml 文件可以将文件用作“主页”。但是，当我导航到我的域时，它总是给我一个 404。我的 app.yaml 在 war 目录中。这就是我的 app.yaml 的样子：

```
application: therealtest
version: 10
runtime: python
api_version: 1

handlers:

- url: /
  static_files: site/index-static.html
  upload: site/index-static\.html 
```

我期望它做的是在我转到该站点的域时显示页面 index-static.html，但它没有。这不是正确的方法吗？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T12:13:25.633

站点目录在您的战争目录中吗？应该是，因为这是您所说的 app.yaml 文件所在的位置。

FWIW，将您的 web 应用程序放在 war 目录中意味着您正在用 Java 术语思考，但您的 app.yaml 片段告诉我们您正在使用 Python。在 Java 中，WAR 代表 Web Archive，它是一个带有某些必需目录和文件的 zip 文件。

# php - 关于显示来自两个或更多博客的帖子

> ID：11372235
> 
> 赞同：0
> 
> 时间：2012-07-07T04:19:32.200
> 
> 标签：php, blogs

我想在我的网站上显示两个或更多博客的帖子现在正在使用**magpierss-0.72**来获取帖子，我的代码是

```
require_once('rss_fetch.inc');
    $url = 'http://rajs-creativeguys.blogspot.com/feeds/posts/default?alt=rss'
    /*'http://raghuks.wordpress.com/feed/'*/;
    $rss = fetch_rss($url);
    foreach ($rss->items as $i => $item ) { 
        $title = strtoupper ($item['title']);
        $url   = $item['link'];
        $date = substr($item['pubdate'],0,26);
        //code to fetch only some text
        $desc = '';
        $max = 30;
        $arr = explode(' ', strip_tags($item['description']));
        $l = count($arr);
        if($l < $max) $max = $l;
        for($j=0;$j<$max;++$j) {
            $desc .= $arr[$j] . ' ';
        }
        $desc .= '.....';
        echo "<div class=\"blog\"><a target=\"_blank\" href=$url><h1>$title</h1>$desc<br/><br/>DATED : $date <br/><br/></a></div> ";
        if($i == 3) break; 
    } 
```

在这里我只能指定一个提要的 url 并且可以获取但现在我想显示两个或更多博客的帖子请给我解决方案

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T04:30:28.033

只需使用一个数组并放入另一个 foreach：

```
<?php
require_once('rss_fetch.inc');

$urls = array(
'http://rajs-creativeguys.blogspot.com/feeds/posts/default?alt=rss',
' more urls ... ',
);

foreach($urls as $url) {
    /*'http://raghuks.wordpress.com/feed/'*/;
    $rss = fetch_rss($url);
    foreach ($rss->items as $i => $item ) { 
        $title = strtoupper ($item['title']);
        $url   = $item['link'];
        $date = substr($item['pubdate'],0,26);

        //code to fetch only some text
        $desc = '';
        $max = 30;
        $arr = explode(' ', strip_tags($item['description']));
        $l = count($arr);
        if($l < $max) $max = $l;
        for($j=0;$j<$max;++$j)
        {
            $desc .= $arr[$j] . ' ';
        }
        $desc .= '.....';
        echo "<div class=\"blog\"><a target=\"_blank\" href=$url><h1>$title</h1>$desc<br/><br/>DATED : $date <br/><br/></a></div> ";
        if($i == 3) break; 
    }
} 
```

# php - 使用ajax进行表单提交，页面上php生成的多个表单

> ID：11372239
> 
> 赞同：-1
> 
> 时间：2012-07-07T04:20:40.393
> 
> 标签：php, jquery, ajax, facebook-like

我有一个包含多个表单的页面，它们执行相同的操作，充当`like`页面中每个帖子的按钮，并且在它旁边是名为“likes”.$id 的 div 中的喜欢数，因此我可以确定在哪里在ajax调用之后写下喜欢计数。我试图使用 jQuery ajax 函数，但我无法设置什么 div 来编写函数的结果。

```
$.ajax({
  type:'POST', 
  url: 'likepost.php', 
  data:$('#like').serialize(), 
  success: function(response) {
    $('#like').find('#likediv').html(response);
  }
}); 
```

我将如何访问 likepost.php 上的数据？我对javascript很糟糕，所以我希望有人能帮助我并解释jQuery函数是如何工作的，因为我一直在复制和粘贴它而不知道我在做什么。

这行得通吗？

```
 $(function () {

    $("#likebutton").click(function () {

            var id = $('input[name=id]'); // this is me trying to get a form value

        $.ajax({
           type: "POST",
           url: "likepost.php",
           data: $("#like"+id).serialize(), // the form is called like+id e.g. like12
           success: function(data){

                 $("#likes"+id).html(data); // write results to e.g. <div id='likes12'>

               }
         });            
    });
}); 
```

我把它放在代码中，但是当点击按钮时，通常的帖子刷新页面就完成了。这是为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T04:26:25.587

当您真正想做的只是将 ID 发送到 likepost.php 脚本时，制作一个迷你表单、对其进行序列化并发布它似乎是一项繁重的工作。

为什么不直接检索 ID 并将其发布到脚本中呢？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T04:36:10.447

首先让我们分解您的函数：Type 是我们正在发出的请求的类型，您在此处指定 POST。这意味着在您的 PHP 文件中，您将使用 $_POST 访问我们发送的数据。接下来是 URL，它只是您发送数据的 URL，在这种情况下是您的 php 文件。

之后是数据，即我们发送到 url (likepost.php) 的数据。您正在序列化 ID 为“like”的任何内容并将其发送到 php 文件。最后成功是一个函数，一旦请求成功就运行，我们从 PHP 中得到一个响应，并在函数中使用它来输出响应。

至于多种形式，我建议这样做： [http ://www.kavoir.com/2009/01/php-checkbox-array-in-form-handling-multiple-checkbox-values-in-an-array .html](http://www.kavoir.com/2009/01/php-checkbox-array-in-form-handling-multiple-checkbox-values-in-an-array.html)

这是我们讨论过的内容的文档，如果您对 jquery 感到困惑，只需将其分解并搜索每个部分。

[http://api.jquery.com/serialize/](http://api.jquery.com/serialize/)

[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-26T08:34:21.033

你可以试试 ：

```
function submitform(id) {
    var jqxhr = $.post('./likepost.php',$("#"+id).serialize(), function(data) {
        $("#"+id).find('#likediv').html(data);
    }, "json")
    return false;
} 
```

通知：

```
<form method="post" id="likeForm" onsubmit="return submitform(this.id);">
    <input..... />
    <input type="submit" value="Submit" />
</form> 
```

在 likepost.php 添加第一行：

```
if ($_SERVER['HTTP_X_REQUESTED_WITH'] != "XMLHttpRequest") {
    header("location: " . $_SERVER['HTTP_REFERER']);
    exit();
} 
```

你可以看到更多：`http://api.jquery.com/serialize/` 为我工作。

# ember.js - Ember JS 中的动作助手不调用函数

> ID：11372241
> 
> 赞同：0
> 
> 时间：2012-07-07T04:21:06.727
> 
> 标签：ember.js, handlebars.js

```
<a class="btn btn-primary" href="#" {{action "toggleStatus"}}><i class="icon-plus icon-white"></i> Add Staff</a> 
```

这是在一个名为 stafflist.handlebars 的视图模板中。内容如下

```
<div class="page-header">
    <h3>{{staff.title}} <small>List of users who has access to this application</small></h3>
  </div>

<div class="commands pull-right">

sta
<a class="btn btn-primary" href="#" {{action "toggleStatus"}}><i class="icon-user icon-white"></i> {{staff.btnTitle}}</a>

</div>
<div class="pull-left">
<input type="text" class="search-query" placeholder="Search">
</div>
<table class="table table-striped table-bordered">
<thead>
<tr>
<td>NAME</td>
<td>ID</td>
</tr>
<thead>
<tbody>
{{#each staff}}
<tr>
<td>{{this.fname}}</td>
<td>{{this.id}}</td>
</tr>
{{/each}}
</tbody>
</table> 
```

查看文件如下

```
App.StaffListView = Em.View.extend({
    templateName:'sellap-web/~templates/stafflist',
    staffBinding:'App.staffController',
    toggleStatus: function() {
        alert('Hurray');
    }
}); 
```

单击按钮时，该操作永远不会调用警报。这里出了什么问题。我正在使用 ember-skeleton 进行编译。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T11:34:02.520

找到了罪魁祸首。我的 App.create 有一个名为 init 的方法。我将名称更改为其他名称，现在它可以正常工作了。我没有叫超级。

# php - 近交免疫数据库结构

> ID：11372248
> 
> 赞同：2
> 
> 时间：2012-07-07T04:23:09.363
> 
> 标签：php, mysql, cakephp, database-design

我有一个需要“简单”家谱的应用程序。我希望能够执行查询，给我一个来自家庭成员的 id 的整个家庭的数据。我说简单，因为它不需要考虑采用或任何其他模糊性。申请要求如下：

*   如果他们来自同一基因系，任何两个人都将无法繁殖
*   需要允许增加新的家族（没有前世家族的新人）
*   需要能够通过查询分别拉取兄弟姐妹、父母

我无法为数据库提出正确的结构。到目前为止，我已经提出了两种解决方案，但它们不是很可靠，并且可能很快就会失控。

解决方案 1 涉及在 people 表上放置一个 family_ids 字段并存储唯一家庭 ID 的列表。每次两个人繁殖时，都会相互检查列表以确保没有 id 匹配，如果所有检查结果都将合并两个列表并将其设置为孩子的 family_ids 字段。

例子：

```
Father (family_ids: (null)) breeds with Mother (family_ids: (213, 519)) ->
Child (family_ids: (213, 519)) breeds with Random Person (family_ids: (813, 712, 122, 767)) ->
Grandchild (family_ids: (213, 519, 813, 712, 122, 767)) 
```

等等等等......我看到的问题是随着时间的推移列表变得不合理地大。

方案二使用 cakephp 的关联声明：

```
public $belongsTo = array(
    'Father' => array(
        'className' => 'User',
        'foreignKey' => 'father_id'
    ),
    'Mother' => array(
        'className' => 'User',
        'foreignKey' => 'mother_id'
    )
); 
```

现在将 recursive 设置为 2 将获取母亲和父亲的结果，以及他们的母亲和父亲，依此类推。这条路线的问题是数据位于嵌套数组中，我不确定如何有效地处理代码。

如果有人能够引导我以最有效的方式处理我想要实现的目标，那将非常有帮助。非常感谢任何和所有帮助，我很乐意回答任何人的任何问题。非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T09:00:43.207

在 SQL（更准确地说，RDBS）中，我将使用以下解决方案：

1) 创建一个`people`包含以下字段的表 - `id`, `name`, `father_id`, `mother_id`. 第一个是典型的主键列，father_id 和mother_id 引用该列但可以为NULL（以允许添加新的家庭行）。

2) 创建一个`relatives`包含以下字段的表 - `person_id`, `ancestor_id`. 两者都不是NULL，都形成复合主键，也都是FK `person.id`。

就是这样。不完全是！) 现在考虑你的任务：

*   添加一些没有家庭的人

这也是相当可行的：`INSERT INTO people (name) VALUES ('some_name')`. 诀窍是将另一个与这个新人相关的插入到亲戚中： `INSERT INTO relatives VALUES (%new_person_id%, %new_person_id%)`

那个有什么用途？考虑最常见的任务：添加一些实际上已经在您的表格中列出了父亲和母亲的人。使用这种结构，它的完成非常简单（在将相应的记录插入到`people`中，并得到它`person_id`作为结果之后）......

```
INSERT INTO relatives 
    SELECT %new_person_id%, ancestor_id 
      FROM relatives 
     WHERE person_id IN (%father_id%, %mother_id%);
INSERT INTO relatives VALUES (%new_person_id%, %new_person_id%); 
```

*   如果他们来自同一基因系，任何两个人都将无法繁殖。

使用上面描述的结构，它相当简单：您必须在其中查找在字段`relatives`中具有相同值的两条记录。`ancestor_id`例如：

```
 SELECT COUNT(*) 
      FROM relatives ra 
INNER JOIN relatives rb ON ra.ancestor_id = rb.ancestor_id
     WHERE ra.person_id = %person_a_id%
       AND rb.person_id = %person_b_id% 
```

在这个结构中查找所有的祖先和孩子是很容易的；但我仍然更喜欢非规范化方法（即，将father_id 和mother_id 存储在第一个表中）以加快查找直接父母/孩子的速度——它实际上可以单独使用第一个表来完成。

这是一个有效的（虽然有点短）[SQL Fiddle](http://sqlfiddle.com/#!2/0bd39/10)示例，以更实用的颜色显示。)

# c# - 阅读 IMDB 电影列表的最有效方法

> ID：11372254
> 
> 赞同：2
> 
> 时间：2012-07-07T04:24:42.260
> 
> 标签：c#, .net, filestream, streamreader, imdb

我正在从我的硬盘驱动器上的文本文件中读取 IMDB 电影列表（最初可从[ftp://ftp.fu-berlin.de/pub/misc/movies/database/movies.list.gz](ftp://ftp.fu-berlin.de/pub/misc/movies/database/movies.list.gz)的 IMDB 站点获得）。

在我的机器（基本信息：Win7 x64bit，16GB RAM，500 GB SATA Hardisk 7200 RPM）上使用下面的代码逐行读取此文件大约需要 5 分钟。

我有两个问题：

1.  有什么方法可以优化代码以提高读取时间？

2.  数据访问不需要是顺序的，因为我不介意从上到下/从下到上或任何顺序读取数据，只要它一次读取一行。我想知道有没有办法从多个方向阅读以提高阅读时间？

该应用程序是 Windows 控制台应用程序。

更新：许多回复正确地指出写入控制台需要大量时间。考虑到在 Windows 控制台上显示数据现在是可取的但不是强制性的。

//代码块

```
string file = @"D:\movies.list";

FileStream fs = new FileStream(file, FileMode.Open, FileAccess.Read, FileShare.None, 8, FileOptions.None);

using (StreamReader sr = new StreamReader(fs))
{
  while (sr.Peek() >= 0)
  {
    Console.WriteLine(sr.ReadLine());
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T23:15:08.230

首先，如果您不关心将列表打印到控制台，请编辑您的问题。

其次，我创建了一个计时程序来测试建议的不同方法的速度：

```
class Program
{
    private static readonly string file = @"movies.list";

    private static readonly int testStart = 1;
    private static readonly int numOfTests = 2;
    private static readonly int MinTimingVal = 1000;

    private static string[] testNames = new string[] {            
        "Naive",
        "OneCallToWrite",
        "SomeCallsToWrite",
        "InParallel",
        "InParallelBlcoks",
        "IceManMinds",
        "TestTiming"
        };

    private static double[] avgSecs = new double[numOfTests];

    private static int[] testIterations = new int[numOfTests];

    public static void Main(string[] args)
    {
        Console.WriteLine("Starting tests...");
        Debug.WriteLine("Starting tests...");

        Console.WriteLine("");
        Debug.WriteLine("");

        //*****************************
        //The console is the bottle-neck, so we can
        //speed-up redrawing it by only showing 1 line at a time.
        Console.WindowHeight = 1;
        Console.WindowWidth = 50;

        Console.BufferHeight = 100;
        Console.BufferWidth = 50;
        //******************************

        Action[] actionArray = new Action[numOfTests];

        actionArray[0] = naive;
        actionArray[1] = oneCallToWrite;
        actionArray[2] = someCallsToWrite;
        actionArray[3] = inParallel;
        actionArray[4] = inParallelBlocks;
        actionArray[5] = iceManMinds;
        actionArray[6] = testTiming;

        for (int i = testStart; i < actionArray.Length; i++)
        {
            Action a = actionArray[i];
            DoTiming(a, i);
        }

        printResults();

        Console.WriteLine("");
        Debug.WriteLine("");

        Console.WriteLine("Tests complete.");
        Debug.WriteLine("Tests complete.");

        Console.WriteLine("Press Enter to Close Console...");
        Debug.WriteLine("Press Enter to Close Console...");

        Console.ReadLine();
    }

    private static void DoTiming(Action a, int num)
    {
        a.Invoke();

        Stopwatch watch = new Stopwatch();
        Stopwatch loopWatch = new Stopwatch();

        bool shouldRetry = false;

        int numOfIterations = 2;

        do
        {
            watch.Start();

            for (int i = 0; i < numOfIterations; i++)
            {
                a.Invoke();
            }

            watch.Stop();

            shouldRetry = false;

            if (watch.ElapsedMilliseconds < MinTimingVal) //if the time was less than the minimum, increase load and re-time.
            {
                shouldRetry = true;
                numOfIterations *= 2;
                watch.Reset();
            }

        } while (shouldRetry);

        long totalTime = watch.ElapsedMilliseconds;

        double avgTime = ((double)totalTime) / (double)numOfIterations;

        avgSecs[num] = avgTime / 1000.00;
        testIterations[num] = numOfIterations;
    }

    private static void printResults()
    {
        Console.WriteLine("");
        Debug.WriteLine("");

        for (int i = testStart; i < numOfTests; i++)
        {
            TimeSpan t = TimeSpan.FromSeconds(avgSecs[i]);

            Console.WriteLine("ElapsedTime: {0:N4}, " + "test: " + testNames[i], t.ToString() );
            Debug.WriteLine("ElapsedTime: {0:N4}, " + "test: " + testNames[i], t.ToString() );
        }
    }

    public static void naive()
    {
        FileStream fs = new FileStream(file, FileMode.Open, FileAccess.Read, FileShare.None, 8, FileOptions.None);

        using (StreamReader sr = new StreamReader(fs))
        {
            while (sr.Peek() >= 0)
            {
                 Console.WriteLine( sr.ReadLine() );

            }
        }
    }

    public static void oneCallToWrite()
    {
        FileStream fs = new FileStream(file, FileMode.Open, FileAccess.Read, FileShare.None, 8, FileOptions.None);

        using (StreamReader sr = new StreamReader(fs))
        {
            StringBuilder sb = new StringBuilder();

            while (sr.Peek() >= 0)
            {
                string s = sr.ReadLine();

                sb.Append("\n" + s);
            }

            Console.Write(sb);
        }
    }

    public static void someCallsToWrite()
    {
        FileStream fs = new FileStream(file, FileMode.Open, FileAccess.Read, FileShare.None, 8, FileOptions.None);

        using (StreamReader sr = new StreamReader(fs))
        {
            StringBuilder sb = new StringBuilder();
            int count = 0;
            int mod = 10000;

            while (sr.Peek() >= 0)
            {
                count++;

                string s = sr.ReadLine();

                sb.Append("\n" + s);

                if (count % mod == 0)
                {
                    Console.Write(sb);
                    sb = new StringBuilder();
                }
            }

            Console.Write( sb );
        }
    }

    public static void inParallel()
    {
        string[] wordsFromFile = File.ReadAllLines( file );

        int length = wordsFromFile.Length;

        Parallel.For( 0, length, i => {

            Console.WriteLine( wordsFromFile[i] );

        });

    }

    public static void inParallelBlocks()
    {
        string[] wordsFromFile = File.ReadAllLines(file);

        int length = wordsFromFile.Length;

        Parallel.For<StringBuilder>(0, length,
            () => { return new StringBuilder(); },
            (i, loopState, sb) =>
            {
                sb.Append("\n" + wordsFromFile[i]);
                return sb;
            },
            (x) => { Console.Write(x); }
        );

    }

    #region iceManMinds

    public static void iceManMinds()
    {
        string FileName = file;
        long ThreadReadBlockSize = 50000;
        int NumberOfThreads = 4;
        byte[] _inputString;

        var fi = new FileInfo(FileName);
        long totalBytesRead = 0;
        long fileLength = fi.Length;
        long readPosition = 0L;
        Console.WriteLine("Reading Lines From {0}", FileName);
        var threads = new Thread[NumberOfThreads];
        var instances = new ReadThread[NumberOfThreads];
        _inputString = new byte[fileLength];

        while (totalBytesRead < fileLength)
        {
            for (int i = 0; i < NumberOfThreads; i++)
            {
                var rt = new ReadThread { StartPosition = readPosition, BlockSize = ThreadReadBlockSize };
                instances[i] = rt;
                threads[i] = new Thread(rt.Read);
                threads[i].Start();
                readPosition += ThreadReadBlockSize;
            }
            for (int i = 0; i < NumberOfThreads; i++)
            {
                threads[i].Join();
            }
            for (int i = 0; i < NumberOfThreads; i++)
            {
                if (instances[i].BlockSize > 0)
                {
                    Array.Copy(instances[i].Output, 0L, _inputString, instances[i].StartPosition,
                               instances[i].BlockSize);
                    totalBytesRead += instances[i].BlockSize;
                }
            }
        }

        string finalString = Encoding.ASCII.GetString(_inputString);
        Console.WriteLine(finalString);//.Substring(104250000, 50000));
    }

    private class ReadThread
    {
        public long StartPosition { get; set; }
        public long BlockSize { get; set; }
        public byte[] Output { get; private set; }

        public void Read()
        {
            Output = new byte[BlockSize];
            var inStream = new FileStream(file, FileMode.Open, FileAccess.Read, FileShare.ReadWrite);
            inStream.Seek(StartPosition, SeekOrigin.Begin);
            BlockSize = inStream.Read(Output, 0, (int)BlockSize);
            inStream.Close();
        }
    }

    #endregion

    public static void testTiming()
    {
        Thread.Sleep(500);
    }
} 
```

这些测试中的每一个都将文件打印到控制台。

在默认控制台设置下运行时，每个测试都在 5:30 到 6:10（Min:Sec）之间进行。

考虑了Console属性后，通过使Console.WindowHeight = 1，即一次只显示1行，（可以上下滚动查看最近的100行），实现了提速。

目前，对于大多数方法，该任务只需 2:40 多一点（Min:Sec）即可完成。

在您的计算机上尝试一下，看看它如何为您工作。

有趣的是，不同的方法基本上是等效的，OP 的代码基本上是最快的。

计时代码预热代码然后运行它两次并平均它所花费的时间，它为每个方法执行此操作。

随意尝试自己的方法并计时。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T05:46:58.460

这个问题的答案实际上取决于您将如何处理数据。如果您的意图确实只是读入文件并将内容转储到控制台屏幕，那么最好使用[StringBuilder 类](http://msdn.microsoft.com/en-us/library/system.text.stringbuilder.aspx)构建一个字符串，例如 1000 行，然后将内容转储到屏幕，重置然后将字符串读入另外 1000 行，转储它们，等等……

但是，如果您正在尝试构建属于较大项目的一部分并且使用 .NET 4.0，则可以使用[MemoryMappedFile 类](http://msdn.microsoft.com/en-us/library/system.io.memorymappedfiles.memorymappedfile.aspx)来读取文件并创建[CreateViewAccessor](http://msdn.microsoft.com/en-us/library/dd267546.aspx)来创建仅在一部分上运行的“窗口”数据而不是读取整个文件。

另一种选择是让线程一次读取文件的不同部分，然后最后将它们放在一起。

如果您可以更具体地说明您打算如何处理这些数据，我可以为您提供更多帮助。希望这可以帮助！

编辑：

试试这个代码。使用 Threads，我能够在 3 秒内阅读整个列表：

```
using System;
using System.IO;
using System.Text;
using System.Threading;

namespace ConsoleApplication36
{
    class Program
    {
        private const string FileName = @"C:\Users\Public\movies.list";
        private const long ThreadReadBlockSize = 50000;
        private const int NumberOfThreads = 4;
        private static byte[] _inputString;

        static void Main(string[] args)
        {
            var fi = new FileInfo(FileName);
            long totalBytesRead = 0;
            long fileLength = fi.Length;
            long readPosition = 0L;
            Console.WriteLine("Reading Lines From {0}", FileName);
            var threads = new Thread[NumberOfThreads];
            var instances = new ReadThread[NumberOfThreads];
            _inputString = new byte[fileLength];

            while (totalBytesRead < fileLength)
            {
                for (int i = 0; i < NumberOfThreads; i++)
                {
                    var rt = new ReadThread { StartPosition = readPosition, BlockSize = ThreadReadBlockSize };
                    instances[i] = rt;
                    threads[i] = new Thread(rt.Read);
                    threads[i].Start();
                    readPosition += ThreadReadBlockSize;
                }
                for (int i = 0; i < NumberOfThreads; i++)
                {
                    threads[i].Join();
                }
                for (int i = 0; i < NumberOfThreads; i++)
                {
                    if (instances[i].BlockSize > 0)
                    {
                        Array.Copy(instances[i].Output, 0L, _inputString, instances[i].StartPosition,
                                   instances[i].BlockSize);
                        totalBytesRead += instances[i].BlockSize;
                    }
                }
            }

            string finalString = Encoding.ASCII.GetString(_inputString);
            Console.WriteLine(finalString.Substring(104250000, 50000));
        }

        private class ReadThread
        {
            public long StartPosition { get; set; }
            public long BlockSize { get; set; }
            public byte[] Output { get; private set; }

            public void Read()
            {
                Output = new byte[BlockSize];
                var inStream = new FileStream(FileName, FileMode.Open, FileAccess.Read, FileShare.ReadWrite);
                inStream.Seek(StartPosition, SeekOrigin.Begin);
                BlockSize = inStream.Read(Output, 0, (int)BlockSize);
                inStream.Close();
            }
        }
    }
} 
```

您需要更改 FileName 以匹配您的 movies.list 文件的位置。此外，您可以调整线程总数。我用了4，但你可以随意减少或增加。您还可以更改块大小...这是每个线程读取的数据量。另外，我假设它是一个 ASCII 文本文件。如果不是，您需要将编码类型更改为 UTF8 或文件​​所在的任何编码。祝您好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-07T04:28:49.137

我不确定这是否更有效，但另一种方法是使用[File.ReadAllLines](http://msdn.microsoft.com/en-us/library/s2tte0y1.aspx)：

```
var movieFile = File.ReadAllLines(file);
foreach (var movie in movieFile)
    Console.WriteLine(movie); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-07T04:38:42.337

在 .net 4 中，您可以使用 File.ReadLines 进行延迟评估，从而在处理大文件时降低 RAM 使用率。

您可以直接对文件执行 linq 操作，这与 File.ReadLines 一起可以缩短加载时间。

为了更好地理解你可以检查，[Read text file word-by-word using LINQ](https://stackoverflow.com/questions/3932620/read-text-file-word-by-word-using-linq)

您也可以进行比较，但要设置时间间隔。

但是，如果您制作 Web 应用程序，您可以在应用程序启动事件中读取整个文件并将它们缓存在应用程序池中以获得更好的性能。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-07T05:05:25.500

我不是 ac# 开发人员，但是如何使用文件（这将是一次）批量插入数据库。然后，您也可以重用数据并导出。

# c# - 如何从 Web 服务返回响应

> ID：11372257
> 
> 赞同：2
> 
> 时间：2012-07-07T04:26:03.837
> 
> 标签：c#, asp.net

我做了一个网络服务，客户会调用它的方法。假设一个方法有四个参数，我想检查其中任何一个参数是否为空，我想将响应发送回客户端，并且我想像警报一样发送它，以便客户端知道哪个参数为空。我不能强迫客户提供准确的所有参数。这可能吗？

```
[WebMethod]
Public void Method1(string str1,string str2,string str3,string str4)
{
    if((str1=="") || (str2==""))
    {
        //send response back to client in form of an alert
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-07T04:42:56.540

据我所知，您可以将一些商定的对象发送回发送者，发送者应该准备好接收这些对象。它可以像包含“OK”或“ERROR”的字符串一样简单，也可以很复杂并且具有错误代码、描述、严重级别等。发送者在使用它时如何处理它完全取决于他们虽然。

例如，您可以将响应中的某个字段设置为严重级别*（可能使用 Microsoft 的[Severity enum](http://msdn.microsoft.com/en-us/library/microsoft.visualstudio.package.severity.aspx)之类的东西）*，然后发件人可以使用它来确定他们是否向用户显示警报或只是在某处记录错误他们的系统。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-07T05:11:34.257

你说你无法控制调用 web 方法的人。由于该方法是 void 类型，因此用户只会知道是否发生了剧烈的事情。抛出异常怎么样，错误会传播到什么细节，这取决于托管 Web 服务的 Web 服务器和托管客户端的 Web 服务器的设置（如果客户端是网页）。

```
throw new Exception("str1 or str2 in Method1 is empty"); 
```

在“最佳”情况下，用户将看到错误消息“方法 1 中的 str1 或 str2 为空。在“最坏”情况下，用户将获得标准 IIS/ASP.NET 错误页面。就像你说的你没有对调用者的控制，取决于调用者如何编码客户端以及如何部署应用程序。但无论如何，它会引起他的注意！

我把最好和最差放在引号里，因为最好和最差对不同的人意味着不同的东西。对于想要最大安全性的人来说，最好是错误页面没有说明错误。对于想要用户友好和快速故障排除的人来说，最好是在错误消息有很多细节和下一步做什么的时候。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-07T05:17:22.073

不要用自定义对象重新发明轮子。看看[这篇 MSDN 文章](http://msdn.microsoft.com/en-us/library/ds492xtk%28VS.71%29.aspx)。

最简单的事情就是抛出一个异常（听起来`ArgumentException`你的情况是合适的），客户端将收到一个`SoapException`.

`SoapException`如果您想要更多控制权，例如设置故障代码的能力，或者自己扔一个。

# regex - Perl Slurp 正则表达式捕获

> ID：11372265
> 
> 赞同：3
> 
> 时间：2012-07-07T04:27:31.203
> 
> 标签：regex, perl, capture

使用 perl，我在一个包含下面文本的大文件中“slurped”，我正在尝试`$1`为给定的正则表达式捕获文件中的所有正则表达式匹配项。我的正则表达式是

```
=~ /((GET|PUT|POST|CONNECT).*?(Content-Type: (image\/jpeg)))/sgm 
```

目前正在捕获粗体文本，但是，最后一次捕获正在处理行

```
"GET /~sgtatham/putty/latest/x86/pscp.exe HTTP/1.1" to "Content-Type: text/html; charset=iso-8859-1" 
```

作为最后一次捕获的一部分，它不应该 b/c "text/html" 不等于我的`(image\/jpeg)`. 我希望能够在没有

```
"GET /~sgtatham/putty/latest/x86/pscp.exe HTTP/1.1" to "Content-Type: text/html; charset=iso-8859-1" being included. 
```

感谢任何帮助，谢谢。

```
**GET /~sgtatham/putty/latest/x86/pscp.exe HTTP/1.1  
Host: the.earth.li  
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.6; rv:13.0) Gecko/20100101 Firefox/13.0  
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8  
Accept-Language: en-us,en;q=0.5  
Accept-Encoding: gzip, deflate  
Connection: Keep-Alive  
Content-Type: text/html; charset=iso-8859-1  
<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML 2.0//EN">  
<html><head>  
\.+"  
GET /~sgtatham/putty/0.62/x86/pscp.exe HTTP/1.1  
Host: the.earth.li  
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.6; rv:13.0) Gecko/20100101 Firefox/13.0  
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8  
Accept-Language: en-us,en;q=0.5  
Content-Length: 315392  
Keep-Alive: timeout=15, max=99  
Connection: Keep-Alive  
Content-Type: image/jpeg**  
Platform: Digital Engagement Platform; Version: 1.1.0.0 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-07T06:29:20.693

你可以很容易地做到这一点`(?!pattern)`，这是一个消极的前瞻断言。回顾一下这篇文章[正面和负面前瞻性的正面例子（ourcraft.wordpress.com）](http://ourcraft.wordpress.com/2009/03/25/positive-examples-of-positive-and-negative-lookahead/)

**正则表达式**

```
$text =~ /
(                                 # start capture
    (?:GET|PUT|POST|CONNECT)      # start phrase
    (?:
        (?!GET|PUT|POST|CONNECT)  # make sure we'havent any these phrase
        .                         # accept any character
    )*?                           # any number of times (not greedy) 
    Content-Type:\simage\/jpeg    # end phrase
)                                 # end capture
/msx;
print $1; 
```

**所有出现**

```
while($text =~ m/REGEXP/msxg) {

    print $1;
} 
```

**输出**

```
GET /~sgtatham/putty/0.62/x86/pscp.exe HTTP/1.1  
Host: the.earth.li  
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.6; rv:13.0) Gecko/20100101     Firefox/13.0  
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8  
Accept-Language: en-us,en;q=0.5  
Content-Length: 315392  
Keep-Alive: timeout=15, max=99  
Connection: Keep-Alive
Content-Type: image/jpeg 
```

# opencv - OpenCV 中的 cvGetRows() 函数有什么用？

> ID：11372275
> 
> 赞同：2
> 
> 时间：2012-07-07T04:30:51.700
> 
> 标签：opencv

我什么时候应该使用这个功能。任何人都可以用一个例子来解释我吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-07T05:25:00.647

根据[文档，](http://docs.opencv.org/modules/core/doc/old_basic_structures.html?highlight=getrows#getrow-s)它`Returns array row or row span.`返回您指定的行。

我将在 Python 终端的帮助下解释它：

以灰度模式加载图像并检查其宽度和高度。

```
>>> import cv2.cv as cv
>>> img = cv.LoadImage('approx2.jpg',0)
>>> img
<iplimage(nChannels=1 width=300 height=300 widthStep=300 )> 
```

看，图像是 300x300 大小。下面是图片。

![在此处输入图像描述](../Images/eef0149f00429d0558a8e51575dcb59e.png)

对所有像素求和，

```
>>> cv.Sum(img)
(1252271.0, 0.0, 0.0, 0.0) 
```

现在我们应用我们的第一个函数 cv.GetRow()

```
>>> row = cv.GetRow(img,150)
>>> row
<cvmat(type=42424000 8UC1 rows=1 cols=300 step=300 )>

>>> cv.Sum(row)
(14279.0, 0.0, 0.0, 0.0) 
```

我取了第 150 行并取了该行中所有元素的总和。看到结果图像的高度 = 1。

现在采用函数 cv.GetRows()。

```
>>> rows = cv.GetRows(img,0,150)
>>> rows
<cvmat(type=42424000 8UC1 rows=150 cols=300 step=300 )>

>>> cv.Sum(rows)
(802501.0, 0.0, 0.0, 0.0) 
```

我从第 150 行中取出所有行。看到它的高度是 150。查看下图：

![在此处输入图像描述](../Images/f73b0e9dbf8b6a818d574e9e52330737.png)

现在这个函数有第四个参数`delta_row`可以用作增量。它将选择作为上述步长增量的行，跳过其间的所有内容。即，如果指定，`the function extracts every delta_row -th row from start_row and up to (but not including) end_row .`

```
>>> rows = cv.GetRows(img,0,300,5)
>>> rows
<cvmat(type=42420000 8UC1 rows=60 cols=300 step=1500 )> 
```

看，现在高度只有 30，因为它每 5 行提取一次。

结果如下：

![在此处输入图像描述](../Images/22455e019b0a879579fa665ef8335108.png)

情况类似`cv.GetCol() and cv.GetCols()`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T04:58:30.137

我发现了另一个方法调用。让我们考虑这个 C++ 代码段。

```
CvMat* input_matrix,sub_matrix;
int start,end;
//declarations of variables go here
cvGetRows(input_matrix, &sub_matrix, start, end); 
```

函数获取 input_matrix 中从 start_row 到 end_row 的行，并通过 sub_matrix 指针指向它。现在我们可以使用该指针在 input_matrix 中将起始行的值填充到结束行。

# php - 如何创建每次调用公共方法时都会调用的方法？

> ID：11372277
> 
> 赞同：4
> 
> 时间：2012-07-07T04:31:00.843
> 
> 标签：php, oop

如何创建每次调用公共方法时都会调用的方法？你也可以说这是一个 post-method-call-hook。

我当前的代码：

```
<?php
class Name {
   public function foo() {
      echo "Foo called\n";
   }

   public function bar() {
      echo "Bar called\n";
   }

   protected function baz() {
      echo "Baz called\n";
   }
}

$name = new Name();
$name->foo();
$name->bar(); 
```

此代码中的当前输出将是：

```
Foo called
Bar called 
```

我希望每次调用另一个公共方法时都调用 baz() 方法。例如

```
Baz called
Foo called
Baz called
Bar called 
```

我知道我可以做这样的事情：

```
public function foo() {
    $this->baz();
    echo "Foo called\n";
} 
```

但这并不能真正解决我的问题，因为这并不是真正的正交，如果我有 100 个方法需要在它们之前调用其他方法，那么实现起来会相对痛苦。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T04:37:04.753

可能不是您所期望或想要的，但通过使用魔术方法`__call`并将这些公共方法标记为受保护或私有，您可以获得所需的效果：

```
<?php
class Name {
    public function __call($method, $params) {
        if(!in_array($method, array('foo', 'bar')))
            return;
        $this->baz();
        return call_user_func_array(
                    array($this, $method), $params);
    }

   protected function foo() {
      echo "Foo called\n";
   }

   protected function bar() {
      echo "Bar called\n";
   }

   protected function baz() {
      echo "Baz called\n";
   }
}

$name = new Name();
$name->foo();
$name->bar(); 
```

# java - 爪哇。org.json 的问题

> ID：11372279
> 
> 赞同：1
> 
> 时间：2012-07-07T04:32:28.767
> 
> 标签：java, android, json, parsing, org.json

我有 Json 字符串，其中包含“键”：“值”对，我需要使用 Java 和导入 org.json 知道该字符串的键。我尝试使用迭代器，但最后第一对键打印。

例如字符串：

```
{
   "firstName": "sam",
   "lastName": "Smith",
   "address": {
       "streetAddress": "somestreet",
       "city": "somecity",
       "postalCode": 101101
   },
   "phoneNumbers": [
       "812 123-1234",
       "916 123-4567"
   ]
} 
```

我想打印：“ firstName lastName address phoneNumbers ”。但我有：“姓氏地址电话号码名字”

```
 JSONObject JO = new JSONObject(JsonString);
    Iterator<String> It = JO.keys();

       while (It.hasNext()){        
       System.out.println(It.next());
       } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T04:47:50.817

从[JavaDoc](http://www.json.org/javadoc/org/json/JSONObject.html)：

> JSONObject 是名称/值对的无序集合。

如果您想订购钥匙，您必须 1) 将它们放在一个列表中，并且 2) 根据您的需要订购该列表。请记住，这是数据的键/值表示 - 元素的顺序无关紧要。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-07T04:49:39.267

使用 json-simple 您可以使用以下代码执行此操作

```
import org.json.simple.JSONObject;
import org.json.simple.parser.JSONParser;
import org.json.simple.parser.ParseException;

public class TestJsonKeys {
    public static void main(String[] args) throws ParseException {
        final String jsonText = "{\n" + "   \"firstName\": \"sam\",\n" + "   \"lastName\": \"Smith\",\n"
                + "   \"address\": {\n" + "       \"streetAddress\": \"somestreet\",\n"
                + "       \"city\": \"somecity\",\n" + "       \"postalCode\": 101101\n" + "   },\n"
                + "   \"phoneNumbers\": [\n" + "       \"812 123-1234\",\n" + "       \"916 123-4567\"\n" + "   ]\n"
                + "}";
        JSONParser parser = new JSONParser();
        JSONObject json = (JSONObject) parser.parse(jsonText);
        System.out.println(json.keySet());
    }
} 
```

# php - 使用当前范围内的值定义匿名函数？

> ID：11372282
> 
> 赞同：0
> 
> 时间：2012-07-07T04:33:19.553
> 
> 标签：php, scope, anonymous-function

我正在尝试创建一个匿名函数，但需要从其定义中的当前范围访问变量：

```
class test {
    private $types = array('css' => array('folder' => 'css'));

    public function __construct(){

        //define our asset types
        foreach($this->types as $name => $attrs){
            $this->{$name} = function($file = ''){
                //this line is where is falls over!
                //undefined variable $attrs!
                return '<link href="'.$attrs['folder'].'/'.$file.'" />';                
            }
        }
    }
}

$assets = new test(); 
```

显然，这个例子非常简约，但它涵盖了我想要做的事情。所以，我的问题是，我怎样才能只为函数的定义访问父作用域？（一旦定义，当函数被调用时，我显然不需要那个上下文）。

* * *

## 编辑#1

好的，在使用[马修的回答](https://stackoverflow.com/questions/11372282/define-anonymous-function-using-values-from-current-scope#answer-11372286)后，我添加`use`了如下内容；但现在我的问题是，当我调用该函数时，我没有得到任何输出。

如果我在函数中添加 a `die('called')`，那么它会产生，但如果我回显或返回某些东西则不会。

```
class test {
    private $types = array('css' => array('folder' => 'css'));

    public function __construct(){

        //define our asset types
        foreach($this->types as $name => $attrs){
            $this->{$name} = function($file = '') use ($attrs){
                //this line is where is falls over!
                //undefined variable $attrs!
                return '<link href="'.$attrs['folder'].'/'.$file.'" />';                
            }
        }
    }

    public function __call($method, $args)
{
    if (isset($this->$method) === true) {
        $func = $this->$method;
        //tried with and without "return"
        return $func($args);
    }
}
}

$assets = new test();
echo 'output: '.$assets->css('lol.css'); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T04:34:23.153

```
function($file = '') use ($attrs) 
```

# google-feed-api - 如何：Google Feed API contentSnippet 删除阅读全文

> ID：11372284
> 
> 赞同：1
> 
> 时间：2012-07-07T04:33:25.963
> 
> 标签：google-feed-api

我一直在搜索，但找不到解决方案。有没有办法从 contentSnippet 中删除“阅读更多”文本？

干杯，君

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T05:29:14.480

在 entry[] 中有两个部分，contentSnippet 和 content。

内容 - 此条目的正文，包括 HTML 标记。由于此值可以包含 HTML 标记，因此您应该使用elem.innerHTML = entry.content 显示此值（而不是使用 document.createTextNode）。对应于 Atom 中的 or 元素和 RSS 中的元素。

contentSnippet - 内容属性的片段（< 120 个字符）版本。该片段不包含任何 HTML 标记。

所以我想如果你使用来自内容的数据，那么你想要获得 contentSnippet 的“阅读更多”。

# mysql - 检查是否已经过去一年

> ID：11372285
> 
> 赞同：0
> 
> 时间：2012-07-07T04:33:42.213
> 
> 标签：mysql, ruby, datetime, time

我经营一家网页设计公司，我们还每年向客户出售托管服务。我正在编写一个 Ruby 脚本来从 MySQL 数据库中读取所有客户，并检查是否已经过去了一年。如果它已经（或至少接近到期），我希望它向他们发送一封电子邮件。

我已经关闭了电子邮件部分，但是如何使用 Time 类或其他基于 SQL 的解决方案检查一年是否已经过去？

（回顾这次编辑，似乎我不太了解所需的 SQL，因此感谢您提供任何帮助）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-07T04:50:10.163

如果你真的想用 ruby​​ 解决这个问题，你可以`>>`在处理 a 时使用`Date`它来增加`N`几个月（例如*11*，这会给你的客户一些时间来处理付款）。

当你得到这个递增的日期时，你应该将它与当前日期进行比较，看看它是否小于或等于（即日期是过去的），如果是的话；发送您的电子邮件。

```
>> (Date.strptime('2012-07-07') >> 11).to_s
=> "2013-06-07"

>> if (Date.strptime('2011-06-15') >> 11) < DateTime.now
>>   print "More than 11 months has passed!"
>> end
More than 11 months has passed!=> nil 
```

* * *

*不过，直接在SQL 查询*中解决这个问题要好得多，这可以归结为以下内容：

```
SELECT field1, field2, ..., fieldN
FROM `customers_table`
WHERE ADDDATE(last_payment, INTERVAL 11 MONTHS) <= NOW () 
```

# python - 在图表上分散标签以获得更好的可视化的算法

> ID：11372287
> 
> 赞同：2
> 
> 时间：2012-07-07T04:35:49.393
> 
> 标签：python, plot, visualization, matplotlib, scatter-plot

基本上，我想让这张图看起来更漂亮。您可以看到存在极度透支的区域。我当然可以手动缩写名称并缩小字体大小，但我想要一些算法可以将过度绘制区域中的标签分开，以便它们的文本更具可读性。我认为这一定是一个研究得很好的问题，我只是不知道它叫什么。

已经用 Python 实现的解决方案会很棒，但我将满足于对在实践中往往起作用的技术的描述。

![统治计划卡名](../Images/f49379dc68da409111dda7267474613d.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T21:28:47.357

本文中的算法应该有效：

M. Luboschik、H. Schumann 和 H. Cords。*基于粒子的标记：快速点特征标记，不会遮挡其他视觉特征。*TVCG: IEEE Transactions on Visualization and Computer Graphics, 2008, 14, 1237-1244。DOI: [10.1109/TVCG.2008.152](http://dx.doi.org/10.1109/TVCG.2008.152)

# android - /res/layout 中没有 main.xml

> ID：11372288
> 
> 赞同：1
> 
> 时间：2012-07-07T04:35:59.983
> 
> 标签：android

我已经开始阅读 developer.android.com 中的“构建你的第一个应用程序”。
当他们开始创建不同的 UI 时，他们会将您引至 /res/layout/main.xml 文件。但我找不到它 - 在 /res/layout 下只有 activity_first.xml 文件（我的活动名称是 FirstActivity ）。

我读过这可能是因为 API16，但我遇到了与 API15 相同的问题。

有任何想法吗？谢谢！:)

如果重要，我在 Linux Debian 上使用 Eclipse 3.7.2 ( Indigo )

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T04:46:30.330

> 在 new`ADT 20`中，`activity_main`如果您的活动名称是 `MainActivity`

我认为`activity_first.xml is your main.xml.`.see 在你的活动中有`setContentView(R.layout.activity_first);`

# iphone - NSLog 显示错误“未使用的表达式结果”并且不起作用。苹果手机？

> ID：11372294
> 
> 赞同：2
> 
> 时间：2012-07-07T04:36:55.710
> 
> 标签：iphone, nslog

我只是想在 xcode 上 NSLog 一些东西，它给出了错误“未使用的表达式结果”，我无法使用 NSLog 打印任何东西。实际上我将编辑方案中的构建配置更改为调试。我不知道实际上是什么错误？

需要一些帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-01-09T03:34:17.587

我也有类似的情况。我的原因是下一个代码。
#define NSLog
请检查是否对 NSLog 进行了重新定义。

# javascript - 如何在javascript中同时对多个对象执行多个函数？

> ID：11372295
> 
> 赞同：0
> 
> 时间：2012-07-07T04:37:00.670
> 
> 标签：javascript, jquery

假设我有 5 个不同的 JavaScript 计时器，当我单击“开始”时它们开始计时，每个都在变量 timer1、timer2、timer3、timer4、timer5 中引用。

如果这些计时器都在一个数组中，我将不得不在伪代码中做这样的事情：

```
foreach timer in timerarray {
    timer.stop;
    timer.setstoptime(time that it stopped);
} 
```

这里的问题是，如果我要获得“getstoptime”，由于必须为每个计时器遍历数组，所有计时器在它们停止的时间都会有不同的值。是否有某种方法可以跟踪所有计时器并使其在我单击停止时，如果我能够检索它们的停止时间，它们都将是相同的？

我知道这不太可能发生在 javascript 非常快地遍历数组的情况下，但是因为数组必须迭代，所以在每个计时器停止之前有一个小的时间间隔。

我正在寻找一种方法来确保同时对它们执行“停止”。如果有人可以提供某种示例代码和一些如何确保发生这种情况的建议，那就太好了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T04:46:53.420

无论您是否使用 JS，都没有任何方法可以满足您的要求。如果您能够使用线程，您仍然无法保证所有计时器都会在同一时刻停止。

如果您希望它们都具有相同的停止时间，为什么不在循环开始之前获取该值一次，然后在所有计时器中显式设置该值。

# android - app fc 查询 sqlite 数据库

> ID：11372300
> 
> 赞同：0
> 
> 时间：2012-07-07T04:38:41.793
> 
> 标签：android, sqlite

对不起，noop 问题，但我只是无法缝合让它工作。我用这个命令创建了我的数据库表：

```
 newLeaseTable = "create table '" + leaseName + "' (_id integer primary key autoincrement,"
            + " Date TEXT, StockTank1Ft NUMERIC, StockTank1Inch NUMERIC,"
            + " StockTank2Ft NUMERIC, StockTank2Inch NUMERIC, StockTank3Ft NUMERIC,"
            + " StockTank3Inch NUMERIC, StockTank4Ft NUMERIC, StockTank4Inch NUMERIC,"
            + " Change1 NUMBER, Change2 NUMBER, Change3 NUMBER, Change4 NUMBER, User TEXT);";
    myDataBase.execSQL(newLeaseTable); 
```

当我使用 rawquery 或查询语句查询数据库时，应用程序崩溃并且日志指向我的查询语句。我想在表“LeaseNames”中查找与变量字符串“enterLogLN”（来自editText）匹配的“colLeaseNames”列中的字符串，然后从同一行的“colWaterWells”列返回整数。任何人都可以帮助解决这个问题，

谢谢

在这种情况下，变量“enterLogLN”是“关于”他

```
re is my rawquery and logcat:
    String col[] = {"colLeaseNames", "colWaterWells"};
    String test = "Select * from LeaseNames Where " + col + " ='" + enterLogLN + "'";
    return Cursor cRWLeaseInfo = myDataBase.rawQuery(test, null);
logcat:
     Caused by: android.database.sqlite.SQLiteException: unrecognized token: "[Ljava.lang.String;@405397e0 ='about'": , while compiling: Select * from LeaseNames Where [Ljava.lang.String;@405397e0 ='about' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T04:55:55.927

我们就是这样在Android中做数据库插入操作的。

```
 SqliteDataBase SDB = this.getWritableDatabase();

    ContentValues values = new ContentValues();// values to insert into DB Table
    values.put(COLUMNE_NAME1, "data1");
    values.put(COLUMND_NAME2, "data2");
    values.put(COLUMND_NAME3, "data3");
    long id = SDB.insert(TABLE_NAME, null, values); // inserting into table_name will return row id
    Log.d(TAG, "Event Inserted : " + id); 
    SDB.close(); 
```

你为什么不试试这个方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T05:04:41.417

这是你的问题：

```
String test = "Select * from LeaseNames Where " + col + " ='" + enterLogLN + "'"; 
```

改成：

```
String test = "Select * from LeaseNames Where " + col[0] + " ='" + enterLogLN + "'"; 
```

更好的查询：

```
Cursor cursor = myDataBase.query("LeaseNames", null, "colLeaseNames=?", new String[] { enterLogLN } , null, null, null); 
```

# javascript - JSON 不保留顺序

> ID：11372309
> 
> 赞同：0
> 
> 时间：2012-07-07T04:41:00.280
> 
> 标签：javascript, json

我对序列化很陌生，我遇到了问题。我正在使用 javascript 和 JSON 序列化由浮点数、字符串和浮点数或字符串数​​组组成的键列。我有一个规则。出于比较的目的，数组大于字符串，字符串大于浮点数。字符串按字母顺序比较，浮点数按数字比较。所以在序列化之前，我对键列进行了排序，但是当 JSON 序列化键列时，顺序就消失了。

例如，如果我从以下键列开始：

```
11,
2,
"1" 
```

排序后我会得到：

```
"1",
2,
11 
```

但序列化后，我会得到：

```
"11",
"2" ,
""1"" 
```

有谁知道如何保存订单？是否有任何其他序列化方法可以保留此顺序？任何建议都受到高度赞赏。太感谢了。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-07T04:52:29.703

如果我没记错的话，JSON 可能会重新排列键顺序。不同的浏览器会以不同的方式排列对象键。保持顺序的唯一方法是使用数组或 []。

# fancybox - Fancybox Modal 控制位置

> ID：11372314
> 
> 赞同：0
> 
> 时间：2012-07-07T04:42:42.760
> 
> 标签：fancybox, fancybox-2

我正在使用 Fancybox afterShow 通过叠加在侧面显示图像描述，如下所示：

```
afterShow : function (){
    var description = "<div class='hidden_tab'>"+$("#tab").html()+"</div>"
    $('#fancybox-overlay').html(description);
} 
```

问题是我需要 modal 为 false 以便用户可以点击退出。但是 hidden_​​tab 选项卡在单击时也会退出fancybox。

有没有办法分割模态影响的部分？还是解决方法？我尝试将`z-index`hidden_​​tab 设置为高，但这并没有成功。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T08:18:16.783

如果您需要设置，请`modal : false`尝试添加`closeClick : false`（单击 INSIDE fancybox 时防止关闭）

`modal`顺便说一句，默认值为`false`. 不要假设人们一定会理解为什么在您的脚本`modal`中设置为。`true`

# css - CSS3 Flexbox - 在 960grid 的 Safari 中失败

> ID：11372319
> 
> 赞同：2
> 
> 时间：2012-07-07T04:44:55.470
> 
> 标签：css, webkit, 960.gs, flexbox

我让 flexbox 在 Firefox 中工作，但在 webkit 浏览器中 display:box div 失去了背景。
这是在线测试：
[http ://www.angeloalpaca.railsperu.com/html/](http://www.angeloalpaca.railsperu.com/html/)

这是一个简单的例子，看到背景在浮动的 flexbox div(webkit) 中消失了：
[http ://www.angeloalpaca.railsperu.com/html/simple.html](http://www.angeloalpaca.railsperu.com/html/simple.html)

**的HTML：**

```
<div id="main-wrapper" class="container_12">
  <div id="main">
    <div id="sidebar-first" class="grid_3">

    </div>
    <div id="content" class="grid_8">

    </div>
  </div>
</div> 
```

**款式**

```
#main{
  display: -webkit-box;
  -webkit-box-orient: vertical;

  display: -moz-box;
  box-orient: vertical;

  display: box;
  box-orient: vertical} 

#main #sidebar-first{
  padding-top:170px; background:#1a8099; 
  -webkit-box-flex: 1;
  -moz-box-flex: 1;
  box-flex: 1}

#content{
  min-height:800px; background:red } 
```

**款式 960 格**

```
body{min-width:960px}.container_12{margin-left:auto;margin-right:auto;width:960px}.grid_3,.grid_8{display:inline;float:left;margin-left:10px;margin-right:10px} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T23:07:32.620

我在 Chrome 中查看它，并且在为 flexbox 赋予 float 属性时似乎存在问题。来自 960 网格的网格类包括一个*float: left*。

当网格类被删除时，它们具有相同的行为。

# java - 如何轻松维护跨多个应用程序（如服务器和客户端）的 RMI 接口？

> ID：11372330
> 
> 赞同：0
> 
> 时间：2012-07-07T04:48:21.600
> 
> 标签：java, interface, rmi

任何与 RMI 打交道的人肯定会遇到这种困境，即如何轻松地维护对象接口，从而为其他客户端应用程序提供远程方法调用服务。每当我们决定对接口中声明的方法声明或添加/删除方法进行微小更改时，我们必须手动复制所有将使用该接口从远程服务器访问 RMI 服务的客户端中的更改。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T07:47:30.620

考虑拥有一个可下载（Serializable）代理，该代理具有客户端使用的更稳定的接口，并使用远程接口完成其工作。您可以使用代码库功能来确保其对所有客户端的可用性。代理需要包含存根。您可以将代理绑定到注册表，或从其他远程方法返回它。

或者，使用 JWS 分发新版本的客户端。

或者，更稳定地设计您的远程接口，这样它们就不必更改 -:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T04:48:23.737

我想出的一个很好的解决方法是

1.  将 RMI 服务器提供的所有接口放在一个单独的项目中，该项目将在构建时将自身打包到一个 jar 文件中。
2.  然后只需将该 jar 文件添加为依赖项或添加到服务器应用程序的类路径中，这旨在提供 RMI 服务以及任何想要使用这些接口来调用远程方法的客户端应用程序。

这将通过在一个地方更新它们来简化维护 RMI 接口的任务。在某些接口中更改方法签名的额外工作将仅限于更改调用该方法的应用程序代码。

# c++ - C++ 链接 boost 库

> ID：11372340
> 
> 赞同：0
> 
> 时间：2012-07-07T04:51:17.550
> 
> 标签：c++, boost, linker

1.  首先，我通过转到`/usr/local/boost_1_49_0/`并运行`bootstrap.sh`. 这一切顺利。
2.  步骤（1）创建了所有的`.so`和`.a`文件`/usr/local/boost_1_49_0/stage/lib`
3.  我测试了与库的链接，比如`lboost_regex`在`#include <boost/regex>`我的源代码中。这也顺利。
4.  最后尝试了 asio 上的示例，我尝试了：

    ```
    g++ -I/usr/local/boost_1_49_0 MAIN.cpp -o MAIN -L/usr/local/boost_1_49_0/stage/lib -lboost_thread -lboost_system -lpthread 
    ```

(4) 编译好了。但是当我使用 运行程序时`./MAIN`，出现以下错误：

```
./MAIN: error while loading shared libraries: libboost_system.so.1.49.0: cannot open shared object file: No such file or directory 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-07T04:59:42.697

该`-L`选项仅设置*编译时*库搜索路径；如果您希望在运行时找到共享库，则必须在运行时知道其目录。

设置它的一种方法`g++`是通过编译器传递`-rpath`给链接器；在你的情况下，你可以说`-Wl,-rpath -Wl,/usr/local/boost_1_49_0/stage/lib`。（这会将目录嵌入到可执行文件中。）

另一种方法是将库安装在链接器默认搜索的位置（例如`/usr/local/lib`，可能是这样的位置，取决于系统的配置方式）。

另一种方法是设置一个环境变量，例如`LD_LIBRARY_PATH`（Linux 或 Solaris）或`DYLD_LIBRARY_PATH`（Mac OS X），以告诉链接器在从设置了变量的 shell 启动可执行文件时在哪里搜索。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-07T04:59:07.550

您确定共享库位于加载程序可以找到的位置吗？将它放在系统范围的目录或与可执行文件相同的目录中。

[这是一个链接，其中包含有关加载程序的更多信息。](http://grahamwideman.wordpress.com/2009/02/09/the-linux-loader-and-how-it-finds-libraries/)

# javascript - 创建具有不同值的模块的多个实例

> ID：11372341
> 
> 赞同：0
> 
> 时间：2012-07-07T04:51:49.380
> 
> 标签：javascript

这可能是一个简单的问题，但我需要创建相当于 N 个“类”实例的 JavaScript，其状态必须完全独立。

像：

```
var car = new Car('Ford');
var car = new Car('Toyota'); 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-07T04:53:28.923

您可以使用数组对象来存储它们：

```
var cars = [];

cars.push(new Car('Ford'));
cars.push(new Car('Toyota'));

cars[0].beep(); 
```

您可以使用循环遍历所有存储的实例`for`：

```
for (var i = 0; i < cars.length; i++) {
  var car = cars[i];

  car.beep();
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-07T04:58:35.613

如果很难看出这里有什么问题。

从您的代码片段中，我可以看到您在创建新实例时可能遇到的唯一问题是您为其赋予了相同的名称。

给它一些其他的 var 名称：

```
var ford = new Car('Ford');
var toyota = new Car('Toyota'); 
```

否则，如果您有一个不同品牌的数组并希望将其转换为汽车对象数组，您可以这样做：

```
var types = ["Ford", "Toyota", "VW", "renault"];

var cars = {};

for (var i = 0; i != types.length ; i++)
  cars[types[i]] = new Car(types[i]); 
```

您可以像这样访问这些汽车：

```
var ford = cars.Ford; 
```

或像这样：

```
var ford = cars["Ford"]; 
```

# c - 在 C 中使用 void 指针对任何类型的元素进行排序

> ID：11372342
> 
> 赞同：0
> 
> 时间：2012-07-07T04:52:07.830
> 
> 标签：c, sorting, void-pointers

大家好，我正在编写一个用于在 C 中对一般元素进行排序的程序。它可以对任何类型的对象（整数、浮点数、复数、对象）进行排序

我想到的是使用 void 指针，

```
void qsort(void *ptr,int sz,int i,int j,int (*fptr) (const void *,const void *) )
{

if(i<j)
{
    int p=(i+j)/2;
    p=partition(ptr,sz,i,j,p,fptr);
    qsort(ptr,size,i,p-1,fptr); 
    qsort(ptr,size,p+1,j,fptr); 
}
} 
```

比较

通过 sz 的值，我们将知道它是否是指向 string、int、char、float 等的指针

```
int compare(const void* a,const void* b,int sz)
{
if(sz==0)             //means pointer to a string
return strcmp( (char*)a, (char*)b );
else if(sz==1)  //means int
return  *(int*)a -  *(int*)b;
else if(sz==2)  //means float
return *(float*)a-  *(float*)b;
else if(sz==3)
return *(char*)a-  *(char*)b;
} 
```

交换两个元素

```
void swap(void *a,void *b,int sz)//for swapping
{
     if(sz==0)
     { 
      void *c;
      c=a;
      a=b;
      b=c;
      }
     else if(sz==1)
      {
      a=(int*)a;
      b=(int*)b;
      int c;
      c= *a;
      *a=*b;
      *b=c;
       }

     else if(sz==2)
     {
       a=(float*)a;
       b=(float*)b;
       float c;
       c= *a;
       *a=*b;
       *b=c;
     } 
```

已编辑

> qsort(arr,4,0,9,&compare);

完整的代码正在建设中，请告诉我是否可以在我的方法中进行一些优化，或者为这个问题提供一些更好的替代方案。在我看来，它的尺寸真的会很大

很多很多提前谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T05:11:23.443

由于该函数可能会使用您的交换例程`partition`，因此它应该与任意大小的对象一起使用，而不仅仅是您计划传递给代码的对象。

```
void swap (void *a, void *b, int sz) {
    char buf[512];
    void *p = buf;
    if (sz > sizeof(buf)) p = malloc(sz);
    memcpy(p, a, sz);
    memcpy(a, b, sz);
    memcpy(b, p, sz);
    if (p != buf) free(p);
} 
```

从您编写比较例程的方式来看，您似乎只打算发送某些类型的数组。但是，`sz`通常用于告诉数组中的单个元素有多大，而不是作为类型标识符，因为您似乎正在尝试使用它。

```
struct x { int key; /*...*/ };

int cmp_x (const void *a, const void *b) {
    const struct x *xa = a;
    const struct x *xb = b;
    return (xa->key > xb->key) - (xa->key < xb->key);
}

struct x array_x[100];
/* populate array */
qsort(array_x, sizeof(struct x), 0, 100, cmp_x); 
```

这就是我想你`qsort`应该被调用的方式。（感谢 Ambroz Bizjak 的漂亮[比较实现](https://stackoverflow.com/questions/10996418/efficient-integer-compare-function/)。）

对于一个数组`int`：

```
int cmp_int (const void *a, const void *b) {
    int ia = *(const int *)a;
    int ib = *(const int *)b;
    return (ia > ib) - (ia < ib);
}

int array_i[100];
/* populate array */
qsort(array_i, sizeof(int), 0, 100, cmp_int); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-07T04:57:08.533

问题是这不允许对自定义类型（如结构）进行排序。通常的方法是接受一个函数指针，您调用它来进行比较。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-07T05:05:27.060

您应该做的是将比较作为函数指针传递。您正在传递一个函数指针，但您似乎没有使用它来比较值。您不必预先定义所有比较，因为您可以在使用它们时为您使用的值类型定义它们。

# php - 如何从表单中传递codeigniter中的控制器功能参数？

> ID：11372346
> 
> 赞同：0
> 
> 时间：2012-07-07T04:53:04.213
> 
> 标签：php, codeigniter

我的网站上有一个搜索城市，我的搜索栏是一个选项，他们可以在其中选择他们想要查看的城市。但是当我在我的网站上搜索一个城市时，它会指向这个网址：foobar.com/s/

现在我希望网址变成这样：foobar.com/s/california

我的选择选项具有以下格式：

```
<select name='city'>
<option value='california'>California</option>
</select> 
```

我怎样才能在 url 中看到选项的值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T05:27:58.677

一旦用户从下拉列表中选择了选项，您需要首先重定向到 foobar.com/s/california，然后进行路由以将您的 URL 发送到相应的控制器

就像是

```
 $route['s/(:any)'] = "s/your_method_name/$1"; 
```

# android - eclipse android res文件夹警告

> ID：11372349
> 
> 赞同：0
> 
> 时间：2012-07-07T04:53:57.960
> 
> 标签：android, eclipse

我是 java 新手（和 android 相关的），最近我在我的 res 文件夹中的 png、mp3 文件上遇到了很多错误，这是我几周前没有的。即使发生这种情况时我没有更新我的 SDK，我的类文件中也突然出现随机错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T05:09:40.083

由于自动脚本，Eclipse 有时会抛出不需要的错误和警告。纠正错误和警告的一些方法是，

1.  尝试清理项目（Eclipse Toolbar->Project->Clean）
2.  修复您的项目属性（您的项目右键单击 -> Android 工具 -> 修复项目属性）

如果没有任何变化，只需重新启动您的 Eclipse。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-07T05:04:36.940

文件名必须仅包含 [a-z0-9_.]。您不得在 Res 名称中包含任何大写字母。您总是可以在错误/问题窗口中看到错误。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-07T08:38:47.497

卸载并重新安装eclipse。

我不知道这个错误的原因。请记住在继续卸载之前保存您的工作区文件夹。

# python - 从 pip 安装 pymongo 后无法运行 mongod 命令

> ID：11372352
> 
> 赞同：1
> 
> 时间：2012-07-07T04:54:37.087
> 
> 标签：python, mongodb, pymongo

我在 osx 10.7.4 上运行 virtualenv，我试图安装 MongoDB for python，它是 2.7.3 版本。

我刚刚从 pip 安装它，并试图看看如果我运行 mongod 命令会发生什么，但事实证明我无法运行该命令。

以下是我的终端发生的事情，有人可以在这里帮忙看看可能出了什么问题吗？

```
(test1)Dus-MacBook-Air:~ mepine$ pip install pymongo
Downloading/unpacking pymongo
  Downloading pymongo-2.2.1.tar.gz (230Kb): 230Kb downloaded
  Running setup.py egg_info for package pymongo

Installing collected packages: pymongo
  Running setup.py install for pymongo
    building 'bson._cbson' extension
    /usr/bin/clang -fno-strict-aliasing -Os -w -pipe -march=native -Qunused-arguments -fwrapv -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -Ibson -I/usr/local/Cellar/python/2.7.3/include/python2.7 -c bson/_cbsonmodule.c -o build/temp.macosx-10.4-x86_64-2.7/bson/_cbsonmodule.o
    /usr/bin/clang -fno-strict-aliasing -Os -w -pipe -march=native -Qunused-arguments -fwrapv -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -Ibson -I/usr/local/Cellar/python/2.7.3/include/python2.7 -c bson/time64.c -o build/temp.macosx-10.4-x86_64-2.7/bson/time64.o
    /usr/bin/clang -fno-strict-aliasing -Os -w -pipe -march=native -Qunused-arguments -fwrapv -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -Ibson -I/usr/local/Cellar/python/2.7.3/include/python2.7 -c bson/buffer.c -o build/temp.macosx-10.4-x86_64-2.7/bson/buffer.o
    /usr/bin/clang -fno-strict-aliasing -Os -w -pipe -march=native -Qunused-arguments -fwrapv -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -Ibson -I/usr/local/Cellar/python/2.7.3/include/python2.7 -c bson/encoding_helpers.c -o build/temp.macosx-10.4-x86_64-2.7/bson/encoding_helpers.o
    /usr/bin/clang -bundle -undefined dynamic_lookup -L/usr/local/Cellar/readline/6.2.2/lib build/temp.macosx-10.4-x86_64-2.7/bson/_cbsonmodule.o build/temp.macosx-10.4-x86_64-2.7/bson/time64.o build/temp.macosx-10.4-x86_64-2.7/bson/buffer.o build/temp.macosx-10.4-x86_64-2.7/bson/encoding_helpers.o -o build/lib.macosx-10.4-x86_64-2.7/bson/_cbson.so
    building 'pymongo._cmessage' extension
    /usr/bin/clang -fno-strict-aliasing -Os -w -pipe -march=native -Qunused-arguments -fwrapv -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -Ibson -I/usr/local/Cellar/python/2.7.3/include/python2.7 -c pymongo/_cmessagemodule.c -o build/temp.macosx-10.4-x86_64-2.7/pymongo/_cmessagemodule.o
    /usr/bin/clang -fno-strict-aliasing -Os -w -pipe -march=native -Qunused-arguments -fwrapv -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -Ibson -I/usr/local/Cellar/python/2.7.3/include/python2.7 -c bson/buffer.c -o build/temp.macosx-10.4-x86_64-2.7/bson/buffer.o
    /usr/bin/clang -bundle -undefined dynamic_lookup -L/usr/local/Cellar/readline/6.2.2/lib build/temp.macosx-10.4-x86_64-2.7/pymongo/_cmessagemodule.o build/temp.macosx-10.4-x86_64-2.7/bson/buffer.o -o build/lib.macosx-10.4-x86_64-2.7/pymongo/_cmessage.so

Successfully installed pymongo
Cleaning up...
(test1)Dus-MacBook-Air:~ mepine$ mongod
-bash: mongod: command not found 
```

多谢你们！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T05:19:46.283

我想也许您将 python mongo 驱动程序与 mongo 服务器本身混淆了。

你安装了 mongodb（mongod、mongo 等），还是只安装了 pymongo？

有一个用于 mongodb 的自制软件包，以防万一您想要一种简单的方法来安装它——或者您可以直接从[http://www.mongodb.org/downloads](http://www.mongodb.org/downloads)下载它。

# mysql - sql distinct 函数麻烦

> ID：11372353
> 
> 赞同：0
> 
> 时间：2012-07-07T04:54:39.763
> 
> 标签：mysql, sql, sqlite

我有一个查询

```
 SELECT   m1.mid mid, m1.uid uid, m1.date, m1.body body
 FROM messages  m1
 WHERE m1.chat_id IS NULL  
   and deleted = 0  
   AND m1.date in    
    ( 
       SELECT MAX(m2.date) 
       FROM messages m2   
       WHERE m2.uid = m1.uid 
         AND m2.chat_id IS NULL 
         and m2.deleted = 0  
    ) 
```

这个查询实际上不是我写的，我在[这里](https://stackoverflow.com/questions/11111766/cant-agregate-on-max-function)得到了帮助- 非常感谢他们。

但我有一个问题。当有多条具有相同日期和 uid（来自同一用户）值的消息时，我会得到两条或多条具有相同日期和 uid 的记录，但我只想有一条（不管是哪个，或者中 fe 最大的消息）

我尝试使用 distinct(uid) 没有成功结果。有没有其他方法可以达到我想要的结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T05:03:47.813

您可以使用此解决方案来查找最近的消息`uid`：

```
SELECT b.*
FROM
(
    SELECT MAX(mid) AS maxmid
    FROM messages
    WHERE chat_id IS NULL
    GROUP BY uid
) a
INNER JOIN messages b ON a.maxmid = b.mid 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T04:58:27.430

相反，您可以添加一个额外的列“计数”并显示同一天来自用户的消息数量！

通过这个你可以避免，得到重复的记录！

# javascript - Chrome以外的浏览器中的语音识别？

> ID：11372355
> 
> 赞同：4
> 
> 时间：2012-07-07T04:54:43.560
> 
> 标签：javascript, html, cross-browser

如何在不使用 Flash 的情况下使用 JavaScript 或 HTML5 访问麦克风？我使用`webkit-speech`. 我需要在其他浏览器中执行此操作。任何答案将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T05:04:41.490

这是 Google 提出的一项功能，似乎仅在其产品中受支持。

请参阅：[https ://stackoverflow.com/a/6619632/1504847](https://stackoverflow.com/a/6619632/1504847)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T05:06:20.973

看看这个教程。它可能会帮助你。[http://www.html5rocks.com/en/tutorials/getusermedia/intro/](http://www.html5rocks.com/en/tutorials/getusermedia/intro/)

在这一点上，它只会将您的选项扩展到 opera... 但是对于 Firefox 和 IE（以及 Midori 等其他），您仍然需要依赖插件.... 希望随着 HTML5 越来越接近成为官方标准，我们将看到广泛的支持。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-22T03:34:27.210

*   `x-webkit-speech`仅适用于 Chrome
*   有一个具有相同目的的 html5 属性：`speech`.
    但是现在它在 Chrome 31.xx 和 Firefox 25 上都不起作用

这是属性的[w3c 文档页面](http://lists.w3.org/Archives/Public/public-xg-htmlspeech/2011Feb/att-0020/api-draft.html)`<input>``speech`

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-02-15T09:46:14.847

看看这个项目：[https ://github.com/TalAter/annyang](https://github.com/TalAter/annyang)

这是一个相当不错的 SpeechRecognition 库。你可以看到它是如何完成的。

# php - 在 PyroCMS 中定义多个流并向每个流添加字段

> ID：11372363
> 
> 赞同：1
> 
> 时间：2012-07-07T04:56:11.670
> 
> 标签：php, pyrocms

我是 PyroCMS 的新手，我愿意建立一个工作网站，其中将有 2 个主要用户，即雇主和求职者。为了让他们在网站上注册，我使用 PyroCMS 的 Streams API 来构建表单。这些用户将成为 2 个不同模块的一部分，即**雇主**模块和**求职者**模块。

在 details.php 文件的 install() 函数下，我想创建多个流（数据库表）。下面的代码帮助我们添加一个流：

```
$this->streams->streams->add_stream(); 
```

下面的代码然后帮助我们定义要添加到流中的字段：

```
$this->streams->fields->add_fields($fields); 
```

我关心的是如何添加多个像上面的流并为每个流添加字段？换句话说，语法将如何

```
$this->streams->fields->add_fields($fields); 
```

知道将字段添加到哪个流？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T14:32:26.770

您可以像此示例一样添加多个流。

```
 // Add banners streams
    if ( ! $this->streams->streams->add_stream(lang('banner:banners'), 'banners', 'banner', 'banner_', null)) return false;

    // Add groups streams
    if ( ! $this->streams->streams->add_stream(lang('banner:groups'), 'groups', 'banner', 'banner_', null)) return false;

    // Add some fields
    $fields = array(
    // BANNERS
        array(
            'name' => 'Banner Title',
            'slug' => 'banner_title',
            'namespace' => 'banner',
            'assign' => 'banners',
            'type' => 'text',
            'extra' => array('max_length' => 200),
            'title_column' => true,
            'required' => true,
            'unique' => true
        ),
    // GROUPS
        array(
            'name' => 'Group Title',
            'slug' => 'group_title',
            'namespace' => 'banner',
            'assign' => 'groups',
            'type' => 'text',
            'extra' => array('max_length' => 200),
            'title_column' => true,
            'required' => true,
            'unique' => true
        )
);

    $this->streams->fields->add_fields($fields); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T17:49:50.963

查看 Streams API 的[Fields Driver](http://docs.pyrocms.com/2.1/manual/index.php/developers/tools/streams-api/fields-driver)文档。字段和流是独立的实体，两者之间不需要关联。添加字段时，您可以将其分配给如下流：

```
$field = array(
'name'          => 'Question',
'slug'          => 'question',
'namespace'     => 'streams_sample',
'type'          => 'text',
'extra'         => array('max_length' => 200),
'assign'        => 'STREAM_SLUG_GOES_HERE',
'title_column'  => true,
'required'      => true,
'unique'        => true
);

$this->streams->fields->add_field($field); 
```

或者您可以分别创建流和字段，然后将每个字段分配给这样的流：

```
$this->streams->fields->assign_field('streams_sample', 'STREAM_SLUG_GOES_HERE', 'question', array('required' => true)); 
```

所有这些关于田野和溪流的话题让我想出去……

# .net - 现有 blob 的 Azure WritePages 是否适用于存储模拟器

> ID：11372364
> 
> 赞同：0
> 
> 时间：2012-07-07T04:56:11.823
> 
> 标签：.net, azure, cloud, azure-blob-storage

我的存储模拟器上已有一个页面 blob。现在我正在尝试使用 WritePages 向它写入更多字节，但它似乎不起作用。存储模拟器是否支持这一点，或者我做错了什么？

这就是我正在尝试的方法。

```
 var account = CloudStorageAccount.Parse("UseDevelopmentStorage=true");

            var blobClient = account.CreateCloudBlobClient();

            var blobContainer = blobClient.GetContainerReference("mycontainer");
            blobContainer.CreateIfNotExist();
            blobContainer.SetPermissions(new BlobContainerPermissions() { PublicAccess = BlobContainerPublicAccessType.Blob });

            var pageBlob = blobContainer.GetPageBlobReference("filepage.txt");
            pageBlob.FetchAttributes();

            byte[] data = File.ReadAllBytes(@"C:\Temp\moretext.txt");
            Array.Resize(ref data, 512);

            pageBlob.WritePages(new MemoryStream(data), 0); 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T20:36:52.843

我相信你一定是在你的 blob 上犯了一些错误，或者你的 blob 可能不是页面 blob。我刚刚使用了以下代码并验证 WritePage API 在 Emulator 上是否可以正常工作：

```
var account = CloudStorageAccount.Parse("UseDevelopmentStorage=true");
var blobClient = account.CreateCloudBlobClient();

var blobContainer = blobClient.GetContainerReference("mycontainer");
blobContainer.CreateIfNotExist();
blobContainer.SetPermissions(new BlobContainerPermissions() { PublicAccess = BlobContainerPublicAccessType.Blob });

// Create a Page Blob
CloudPageBlob pageBlob = blobContainer.GetPageBlobReference("mypageblob");
pageBlob.Create(5120); 
// After above line execution, check Azure Emulated Storage and download the PageBlob locally and verify that it is a 5120 size Page blob

byte[] data = File.ReadAllBytes(@"C:\2012\100text.txt"); // About 300byte text
Array.Resize(ref data, 512);

pageBlob.WritePages(new MemoryStream(data), 0);
// After above line execution, again check Azure Emulated Storage and download the PageBlob locally and verify that it is still a 5120 size Page blob with text in it. 
```

# javascript - ExtJS 中的单击事件/监听器

> ID：11372365
> 
> 赞同：-1
> 
> 时间：2012-07-07T04:56:27.487
> 
> 标签：javascript, extjs, click

你好：我在使用 EXTJS 处理点击事件时遇到了困难。

我在小部件视图定义中定义了一个新小部件，但无论出于何种原因，在 Click 上都没有调用以下代码。任何帮助深表感谢。谢谢。

```
Ext.define('MemOS.view.Shortcut', {
    extend: 'Ext.view.View',
    alias: 'widget.shortcut',

    name: 'shortcut',
    singleSelect: true,
    store: 'Apps',
    tpl: [
        '<tpl for=".">',
            '<div id="iconGroup" class="icon-wrap">',
                '<div id="icon" class="icon">',
                    '<img src="/images/icons/" />',
                '</div>',
                '<span> {appName} </span>',
            '</div>',
        '</tpl>'
    ],  
    itemSelector: 'div.icon',
    listeners: {
        click: function(d, i, n, e){
            alert('foo');
        }
    },
}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-07T07:30:08.650

您不能只编造事件名称，可用的列表在底部：[http ://docs.sencha.com/ext-js/4-1/#!/api/Ext.view.View](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.view.View)

# c++ - 可能的内存泄漏：new char[strlen()]

> ID：11372367
> 
> 赞同：2
> 
> 时间：2012-07-07T04:57:24.367
> 
> 标签：c++, memory-leaks

这是一个相当基本的问题，我很确定我知道答案，但是看到错误的后果是我想我应该问的一个段错误。我已经以以下方式使用`strlen()`和`new char[]`操作符已经有一段时间了，只是注意到一些引发了危险信号的事情：

```
void genericCopy(char *somestring, char *someOtherString) {
    someOtherString = new char[strlen(somestring)];
    strcpy(someOtherString,somestring);
} 
```

我的问题是，看到一个字符串应该是空终止的，我应该这样做：

```
void genericCopy(char *somestring, char *someOtherString) {
    someOtherString = new char[strlen(somestring)+1];
    strcpy(someOtherString,somestring);
    someOtherString[strlen(someOtherString)] = '\0';
} 
```

到目前为止，我从来没有遇到过第一种方法的问题，但这并不意味着我做得对。由于返回的长度是`strlen()`字符串中没有空终止符的字符数，所以 new 没有为 '/0' 保留空间......至少我不认为它是。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-07T05:00:28.500

首先，你应该知道你的这个函数是没有意义的写，只是使用[`strdup`](http://linux.die.net/man/3/strdup)（如果在你的系统上可用）。

但是，是的，你需要一个额外的字节来存储`\0`，所以总是做类似`new char[strlen(somestring)+1];`. 但是，无需手动添加`\0`; `strcpy`已经这样做了。

您应该使用[Valgrind 之](http://valgrind.org/)类的东西来发现代码中的这个和类似的错误。

但是，您的代码中还有一个问题；你的代码总是会泄漏`someOtherString`；它不会返回到您调用它的位置。您要么需要将方法更改为：

```
char *genericCopy(char *something) {
    char *copy = new char[strlen(somestring)+1];
    strcpy(copy,somestring);
    return copy;
} 
```

然后按如下方式获取副本：

```
copy = genericCopy(something); 
```

或者您需要将方法更改为：

```
void genericCopy(char *something, char **copy) {
    *copy = new char[strlen(somestring)+1];
    strcpy(*copy,somestring);
} 
```

并将其称为：

```
genericCopy(something, &copy); 
```

如果您将使用 C++，您也可以将方法原型更改为：

```
void genericCopy(char* somestring, char*& someOtherString) 
```

并将其称为：

```
genericCopy(something, copy); 
```

然后`someOtherString`将作为引用传递，您分配给它的新值将传播到您的方法之外。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-07T05:01:44.863

是的，你的怀疑是正确的。您应该分配一个额外的字符，并确保复制的字符串以空值结尾。（strcpy() 本身会执行此操作，但是当有人建议您切换到 strncpy() 时，他们无疑会（它更安全！）您需要格外小心，因为不能保证复制'/0'。）

但是，如果您已经在使用 C++，建议您改用 std::string。它通常是一种更简单、更不容易出错的操作字符数组的方法。

但是，这是您需要解决的进一步问题。您正在将新字符数组分配给 someOtherString 的副本。您需要进行一些更改：

```
void genericCopy(char *somestring, char **someOtherString) {
    *someOtherString = new char[strlen(somestring)+1];
    strcpy(*someOtherString,somestring);
    (*someOtherString)[strlen(somestring)] = '\0';
} 
```

这样，您将在函数调用之外取回新的字符缓冲区。

# android - 将地图信息窗口从警报对话框更改为简单的地图信息

> ID：11372369
> 
> 赞同：0
> 
> 时间：2012-07-07T04:58:24.977
> 
> 标签：android, infowindow

我在 Android 中有一个地图应用程序。

当我点击标记时有一个警报对话框，但我想将警报对话框转换为一个简单的信息窗口，如下所示：

[http://3.bp.blogspot.com/-PrYuYQMcGcc/Ta__3fCcw7I/AAAAAAAAAGU/xCxjK3slU4k/s1600/google_map_marker_tooltip_popup_android.JPG](http://3.bp.blogspot.com/-PrYuYQMcGcc/Ta__3fCcw7I/AAAAAAAAAGU/xCxjK3slU4k/s1600/google_map_marker_tooltip_popup_android.JPG)

这是我用来填充的代码`Infowindow`：

```
public class CustomItemizedOverlay extends ItemizedOverlay<OverlayItem> {

    private ArrayList<OverlayItem> mapOverlays = new ArrayList<OverlayItem>();

    private Context context;

    public CustomItemizedOverlay(Drawable defaultMarker) {
          super(boundCenterBottom(defaultMarker));
    }

    public CustomItemizedOverlay(Drawable defaultMarker, Context context) {
          this(defaultMarker);
          this.context = context;
    }

    @Override
    protected OverlayItem createItem(int i) {
        return mapOverlays.get(i);
    }

    @Override
    public int size() {
        return mapOverlays.size();
    }

    @Override
    protected boolean onTap(int index) {
        OverlayItem item = mapOverlays.get(index);
        AlertDialog.Builder dialog = new AlertDialog.Builder(context);
        dialog.setTitle(item.getTitle());
        dialog.setMessage(item.getSnippet());
        dialog.show();
        return true;
    }

    public void addOverlay(OverlayItem overlay) {
        mapOverlays.add(overlay);
        this.populate();
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T05:44:00.650

[http://android-codes-examples.blogspot.in/2011/04/google-map-example-in-android-with-info.html](http://android-codes-examples.blogspot.in/2011/04/google-map-example-in-android-with-info.html) 你从哪里得到那个图像？？？它实际上来自这个链接，它还包含如何做到这一点....但不是 onTap。

如果您想要 onTap，只需从 onTap 方法中删除该警报对话框和所有内容，然后添加一个告诉位置的 toast ......这是一般做法。

# sed - 使用 sed / awk 在水平分隔符之间获取多行文本

> ID：11372371
> 
> 赞同：2
> 
> 时间：2012-07-07T04:58:27.643
> 
> 标签：sed, awk

我想在水平分隔符之间获取多行文本，并忽略分隔符之前和之后的任何其他内容。

一个例子是： -

```
Some text here before any delimiter
----------
Line 1
Line 2
Line 3
Line 4
----------
Line 1
Line 2
Line 3
Line 4
----------
Some text here after last delimiter 
```

我想得到

```
Line 1
Line 2
Line 3
Line 4

Line 1
Line 2
Line 3
Line 4 
```

如何使用带有正则表达式的 awk / sed 执行此操作？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-07T09:10:55.060

你可以试试这个。

> 文件：a.awk：

```
BEGIN { RS = "-+" } 

{
    if ( NR > 1 && RT != "" )
    {
        print $0      
    }
} 
```

> 运行：awk -f a.awk data_file

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T09:11:02.853

这可能对您有用：

```
sed '1,/^--*$/d;:a;$!{/\(^\|\n\)--*$/!N;//!ba;s///p};d' file 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-07T07:45:34.147

如果您可以轻松地将整个文件放入内存中，并且如果可以接受 Perl 而不是 awk 或 sed，

```
perl -0777 -pe 's/\A.*?\n-{10}\n//s;
    s/(.*\n)-{10}\n.*?\Z/\1/s;
    s/\n-{10}\n/\n\n\n/g' file >newfile 
```

这里的主要常见问题解答是`-0777`选项（slurp 模式）和`/s`（点匹配换行符）正则表达式标志。

# sql-server - 将触发器 Oracle 迁移到 SQL Server

> ID：11372372
> 
> 赞同：0
> 
> 时间：2012-07-07T04:58:32.743
> 
> 标签：sql-server, oracle, triggers

人们，

我需要将 Oracle 触发器迁移到 SQL Server，但我做不到。

Oracle中的触发器很简单：

```
CREATE OR REPLACE TRIGGER trigger_teste      
BEFORE INSERT OR UPDATE  
ON teste  
FOR EACH ROW  
DECLARE  
BEGIN  
:new.id      := (coalesce(:NEW.id,      0));  
:new.vlr_sal := (coalesce(:NEW.vlr_sal, 0.00));  
END; 
```

我尝试了几种方法，但都没有成功！

感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T08:55:46.423

我的 T-SQL 有点生锈，但这样的东西应该可以工作。请注意，SQL Server 没有行级触发器，只有语句级触发器。

```
CREATE TRIGGER trigger_teste      
ON teste  
BEFORE INSERT OR UPDATE  
AS 
   update inserted
      set      id = coalesce(id, 0),
          vlr_sal = coalesce(vlr_sal, 0.0)
GO 
```

（不确定我是否错过了分号。我不明白 SQL Server 何时需要或不需要分号）

有关详细信息，请参阅手册：

[http://msdn.microsoft.com/en-US/library/ms189799%28v=sql.90%29](http://msdn.microsoft.com/en-US/library/ms189799%28v=sql.90%29)
[http://msdn.microsoft.com/en-US/library/ms191300%28v=sql.90%29](http://msdn.microsoft.com/en-US/library/ms191300%28v=sql.90%29)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-07T08:27:18.600

在任何类型的 RDBMS 中，这都不适合使用触发器。SQL 标准允许我们在使用[DEFAULT 约束语法](http://www.w3schools.com/sql/sql_default.asp)创建表时定义默认值。Oracle 和 SQL Server 都有这个。

显然，您在创建表时还没有这样做。好消息是我们可以使用 ALTER TABLE 添加默认约束。像这样的东西

```
alter table teste 
   alter column id set default 0 
```

这是针对 SQL Server 的。在 Oracle 中它将是：

```
alter table teste 
   modify id default 0 
```

* * *

正如无名马指出的那样，触发器的完整替换必须包括对受影响列的 NOT NULL 约束。如果现有表缺少非空约束，我们可以使用与上面所示相同的语法添加它们，将 DEFAULT 子句替换为`NOT NULL`- 甚至在同一语句中组合这两个子句。

# ios - 从 drawRect() 调整 UIView 的大小

> ID：11372376
> 
> 赞同：1
> 
> 时间：2012-07-07T04:59:16.977
> 
> 标签：ios, drawrect

我有一个 UIView 并从中绘制其内容`drawRect()`，但有时我需要根据绘制期间完成的一些计算来调整视图的大小：

当我更改大小时，绘图会按比例缩小，而不是使用从调整大小获得的额外大小。

这就是我调整表格大小的方式`drawRect()`

```
 CGRect limits = self.frame ;
 limits.size.width = 400;
 self.frame = limits; 
```

它看起来像上下文不知道调整大小并且正在使用旧尺寸进行绘制。调整大小后我已经尝试`[self setNeedsDisplay]`过，但不会再次调用 draw 方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T06:20:13.327

计算应该提前完成，而不是在绘图期间完成，仅出于性能原因（尽管早期计算也可以避免这个问题）。

例如，如果您的计算取决于因素和`X`，则安排在或发生更改时重做这些计算。如有必要，缓存计算结果，并在那时调整视图框架的大小。实现应该只进入它给定的区域。`Y``Z``X``Y``Z``drawRect:`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T13:16:33.390

对于任何为此苦苦挣扎的人。

显然 [self setNeedsDisplay] 如果从 drawRect 调用：（或从 drawRect 调用的任何方法：）将没有任何效果。不知何故，它只是跳过了通话。

为了使事情发生，请改用以下

```
[self performSelector:@selector(setNeedsDisplay) withObject:nil afterDelay:0]; 
```

当主队列再次空闲时，这将被正确调用；只需确保在 drawRect 内部使用一些条件来调用 needsDisplay - 否则您将陷入循环。

# scala - Scala 模式匹配编译器警告

> ID：11372384
> 
> 赞同：4
> 
> 时间：2012-07-07T05:01:35.460
> 
> 标签：scala

我在我的代码中造成了一个更难找到我想要的错误，以及我希望将来避免的错误。我希望 Scala 编译器会警告我我的错误（除非我遗漏了什么）。

我已将其简化为微不足道的情况：

```
Vector.maybeGetVector match {
  case v:Vector => true
  case _ => false
}

case class Vector(x:Int, y:Int)

object Vector {
  def maybeGetVector : Option[Vector] = Some(new Vector(1,2))
} 
```

我使用`wildcard`而不是`None`失败的唯一原因是我只想匹配返回的子类型`Option`。

我期待一个编译器警告，因为很容易推断第一个 case 语句包含无法访问的代码。`Option[Vector]`不能是 的子类型`Vector`。

奇怪的是，如果我添加以下 case 语句：

```
 case i:Int => false 
```

它会引发错误并告诉我这`Option[Vector]`是必需的。

在命名约定之外，有没有办法以这种方式防止程序员错误。唯一可以与 an 匹配的东西`Option`是`Some/None/null`。我觉得我错过了一些明显的东西。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-07T06:49:00.980

如果您使用`final`修饰符定义 Vector 类，您将收到您所期望的“模式类型与预期类型不兼容”错误。

对我来说，Scala 认为您的 Option[Vector] 可能以某种方式是 Vector 子类型的一个实例。（这对我来说似乎是不可能的，但我认为这就是起作用的原因。）使 Vector 最终排除了这种看似遥远的可能性。

所以，如果第一个 case 语句应该是不可访问的，那不是因为，正如你所说， Vector 不能是 Option[Vector] 的子类型；而是因为 Option[Vector] 不能是 Vector 子类型的实例。也许这就是你的意思:)

# javascript - 如果未启用 JavaScript，则冻结屏幕 w/覆盖

> ID：11372388
> 
> 赞同：2
> 
> 时间：2012-07-07T05:01:58.593
> 
> 标签：javascript, html, css, noscript

我想使页面变暗并锁定（防止点击/滚动），并有一些白色文字说明用户没有启用 JavaScript。

我知道正确的做法是在没有 JavaScript 的情况下优雅地降级 - 但我现在不想走这条路。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-25T20:23:25.263

```
<noscript>
<div id="nojs-overlay">
  Please Enable Javascript to View This Site<br>
  <a href="instructions.html">Instructions on how to enable javascript</a>
</div>
</noscript> 
```

上面的示例仅在未启用 javascript 的情况下加载 overlway div。所选答案将导致慢速设备闪烁或延迟。

确保您的 nojs-overlay div（或一系列 div）的样式覆盖整个屏幕。

# blackberry - 黑莓屏幕的内存限制？

> ID：11372389
> 
> 赞同：0
> 
> 时间：2012-07-07T05:02:01.793
> 
> 标签：blackberry, memory-leaks, bitmap

我想知道黑莓主屏幕是否有内存限制？我的意思是我的游戏中有*车库屏幕*和 60 辆汽车 + 其他图像启动，并且加载时间似乎会导致真实设备上的错误，Bold 9700。图像是否可能导致内存错误？/res 文件夹中这些图像的总大小约为 2mb。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T15:29:12.173

可能。您可以尝试的一种解决方法是不要一次将所有图像加载到内存中，而是可以根据需要加载图像。这将节省内存。

谢谢

纳文 M

# security - 安全图像有什么好处，比如银行网站登录？

> ID：11372390
> 
> 赞同：5
> 
> 时间：2012-07-07T05:02:14.767
> 
> 标签：security

几个网站（我记得雅虎也这样做过，早在我使用雅虎帐户时），例如美国银行，会显示用户在输入用户名后但在输入密码之前选择的 SiteKey 或类似图像。从表面上看，这确保了登录页面对每个用户都是唯一的，因此网络钓鱼者不能只显示看起来像银行网站的静态登录页面，而是阻止他们在后台简单地访问银行网站并转发图像（或其他安全挑战）用户的权利？我承认，这让网络钓鱼者的工作稍微难了一点，但对我来说似乎真的没有那么有价值。这种行为的理由是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T05:04:56.847

如果单个服务器不断访问他们的站点，请求不同用户 ID 的图像（尤其是用户之前没有登录的用户），这将是非常可疑的，因此网络钓鱼者更难隐藏。

# python - 将 c_char_p 转换为 c_char 数组

> ID：11372391
> 
> 赞同：2
> 
> 时间：2012-07-07T05:02:43.347
> 
> 标签：python, ctypes

我需要通过将 char* 转换为数组来访问它的内容

这是一个演示：

```
from ctypes import *

foo = (c_char * 4)()
foo.value = "foo"
print foo.raw # => 'foo\x00'
foo_ptr = cast(foo, c_char_p)
print foo_ptr.value # => 'foo' 
```

现在我想将 foo_ptr 转换回 (c_char * 4)。这些都不起作用

```
foo_ = (c_char * 4)(foo_ptr)
foo_ = cast(foo_ptr, c_char * 4) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-07T05:29:46.210

找到了

```
foo_ = (c_char * 4).from_address(foo_ptr._get_buffer_value())

print foo_.raw # => 'foo\x00' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-07T05:28:40.017

你为什么不保留原来的*foo*？：

```
>>> foo = (c_char * 4)()
>>> foo_ptr_1 = ct.cast( foo, ct.c_char_p )
>>> foo_ptr_1
c_char_p(28211760)
>>> foo_ptr_2 = ct.cast( foo, ct.c_char_p )
>>> foo_ptr_2
c_char_p(28211760) 
```

所以强制转换操作不会复制数据，而只是返回指向数组内容的指针。您也可以通过指针进行索引，尽管这有点不安全。

或者，如果要*从头*创建数组，请执行以下操作：

```
>>> array_type = (c_char * 4 )
>>> foo = array_type.from_address( foo_ptr )
>>> foo.value
'abc' 
```

# javascript - Fancybox 中的 jQuery 不起作用 html() 和 hide()

> ID：11372393
> 
> 赞同：1
> 
> 时间：2012-07-07T05:03:01.480
> 
> 标签：javascript, jquery, fancybox, fancybox-2

我目前有 Fancybox 打开一个 hidden_​​div afterShow()

hidden_​​div 上有一个链接可以调用这个函数：

```
 $('#image_tagged').html('');       // these work
        $('#image_name_tagged').hide();    // these work
        $('#image_tagged_fancybox').live("remove icons", function(){  // this does not work
            $(this).html('');
        });
        $('#image_tagged_fancybox_name').hide();  // this does not work
    }
}); 
```

jQuery`#image_tagged`和`#image_name_tagged work`-- 这些 ID 不在 fancybox-overlay 之上（调用 fancybox 之后的隐藏选项卡）。

带有`#image_tagged_fancybox`（从隐藏选项卡中的链接调用的 jQuery）的 jQuery 不起作用。有趣的是...

```
$('#image_tagged_fancybox_name').html(); 
```

仍然给我正确的信息。

任何帮助，将不胜感激！

# python - 如何使用特定用户拥有的对象创建 ModelForm

> ID：11372395
> 
> 赞同：2
> 
> 时间：2012-07-07T05:03:27.970
> 
> 标签：python, django, django-models, django-forms

> **可能重复：**
> [如何过滤 Django ModelForm 中的 ForeignKey 选择？](https://stackoverflow.com/questions/291945/how-do-i-filter-foreignkey-choices-in-a-django-modelform)

假设我有一些看起来像这样的模型：

```
from django.db import models
from django.contrib.auth.models import User

class Author(models.Model):
    first_name = models.CharField(max_length=100)
    last_name = models.CharField(max_length=100)
    owner = models.ForeignKey(User)

class Book(models.Model):
    title = models.CharField(max_length=100)
    authors = models.ManyToManyField(Author)
    owner = models.ForeignKey(User) 
```

如果我为 Book 模型创建一个 ModelForm，则允许用户从*所有*作者中进行选择，而不仅仅是他们拥有的作者。我将如何为 Book 模型创建一个 ModelForm，让用户只选择他/她拥有的作者？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-07T05:49:16.560

您可以覆盖模型表单的`__init__`方法并限制作者[模型选择字段的](https://docs.djangoproject.com/en/dev/ref/forms/fields/#modelchoicefield)查询集。

```
class BookForm(forms.ModelForm):

    class Meta:
        model = Book
        # exclude the owner and set it in the view
        exclude = ('owner',) 

    def __init__(self, *args, **kwargs):
        super(BookForm, self).__init__(*args, **kwargs)
        if self.instance.owner:
            self.fields['author'].queryset = Author.objects.filter(owner=self.instance.owner) 
```

在您看来，请确保使用已经设置了所有者的实例来实例化表单。例如要添加一本书，它看起来像这样：

```
def add_book(request):
    book = Book(owner=request.owner)
    form = BookForm(data=request.POST or None, instance=book)
    if form.is_valid():
        book.save()
        return HttpResponseRedirect('/success-url/')
    return render(request, "my_template.html", {'form': form}) 
```

# php - PHP：会话在某些服务器上自动过期

> ID：11372400
> 
> 赞同：0
> 
> 时间：2012-07-07T05:04:17.720
> 
> 标签：php

我有一个使用 PHP 构建的网站。我的网站包含一些教育材料/文档，用户只有通过 clickbank 付费才能获得这些材料/文档。在后端，他们的付款状态将从“未付款”变为“已付款”。

但是当我通过在 clickbank 网站上付款并重定向回我的网站来测试它时，会话会自动到期。它在我的系统上运行良好，但在客户的系统上运行良好。

请告诉我这是什么问题？如果有任何进一步的查询，我会解释更多。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T12:37:10.570

您应该调查使用 ClickBank API 进行处理，这样可以让用户留在您的网站上，而不是将他们重定向到 ClickBank API 并破坏您的会话。

[https://sandbox.clickbank.com/api_12_examples/api_example.php](https://sandbox.clickbank.com/api_12_examples/api_example.php)

这将返回一个成功/失败代码，然后您可以在决定将订单标记为已付款或未付款时使用该代码。

# javascript - 如何将 npm 用于前端依赖项？

> ID：11372408
> 
> 赞同：43
> 
> 时间：2012-07-07T05:04:49.813
> 
> 标签：javascript, node.js, npm, package-managers

我想问是否可以（通常是一个好主意）使用 npm 来处理前端依赖项（Backbone、jQuery）。

我发现 Backbone、jQuery 等都可以通过 npm 获得，但我必须设置另一个提取点（默认为`node_modules`）或符号链接或其他东西......

以前有人这样做过吗？

可能吗？

我必须改变`package.json`什么？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2014-07-02T18:48:21.823

+1 使用 Browserify。我们在 diy.org 使用它并喜欢它。Browserify 背后的最佳介绍和推理可以在[Browserify 手册](https://github.com/substack/browserify-handbook)中找到。那里涵盖了 CommonJS 和 AMD 解决方案、构建管道和测试等主题。

Browserify 运行良好的主要原因是它透明地与 NPM 一起工作。只要需要一个模块，它就可以被浏览器化（尽管并非所有模块都可以在浏览器中工作）。

基本：

```
npm install jquery-browserify 
```

main.js

```
var $ = require('jquery-browserify');
$("img[attr$='png']").hide(); 
```

然后运行：

```
browserify main.js > bundle.js 
```

然后包含`bundle.js`在您的 HTML 文档中，其中的代码`main.js`将执行。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-07-07T05:24:17.533

简短的回答：*有点*。

很大程度上取决于模块作者是否支持这一点，但这并不常见。Socket.io 就是这样一个支持模块的一个例子，正如他们的登陆页面所展示的那样。但是，还有其他解决方案。这些是我实际上知道的两个：

*   [http://ender.no.de/](http://ender.no.de/) - Ender JS，客户端模块的自我描述 NPM 模拟。对我的口味来说有点太投入了。
*   [https://github.com/substack/node-browserify](https://github.com/substack/node-browserify) - Browserify，一个实用程序，它将遍历您的依赖项并允许您通过模拟 node.js 模块模式来输出单个脚本。你可以使用 jake|cake|rake|make 构建脚本来生成你的 application.js，如果你想看的话，甚至可以自动化它。我简单地使用了它，但觉得它有点笨重，调试起来很烦人。此外，并非所有双环境 npm 模块都喜欢通过 browserify 运行。

就个人而言，我目前选择使用 RequireJS ( [http://requirejs.org/](http://requirejs.org/) ) 并手动管理我的模块，类似于 Mozilla 使用其 BrowserQuest 示例应用程序 ( [https://github.com/mozilla/BrowserQuest](https://github.com/mozilla/BrowserQuest) ) 的方式。请注意，这带来了挑战，即必须对诸如骨干或下划线之类的模块进行填充，从而删除了对 AMD 样式模块加载器的支持。您可以在此处找到匀场所涉及的示例：http: [//tbranyen.com/post/amdrequirejs-shim-plugin-for-loading-incompatible-javascript](http://tbranyen.com/post/amdrequirejs-shim-plugin-for-loading-incompatible-javascript)

真的似乎无论如何都会受到伤害，这就是为什么原生模块支持如此热门的话题。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-07-02T19:06:36.843

我们的团队维护了一个名为[Lineman](http://linemanjs.com)的工具，用于构建前端项目。该工具是基于节点的，因此一个项目依赖于许多在服务器端运行的 npm 模块*来**构建*您的资产，但它开箱即用地希望在复制并提交到.*`vendor/js`*

 *然而，很多人（包括我自己）已经尝试与 browserify 集成，我们遇到了很多复杂性和问题，包括 (a) 由第三方维护的 npm 模块，这些模块要么已过期，要么已添加不必要的更改，到 (b)由于 AMD/Require.js 的包袱，在*传统上*每当定义了一个名为的顶级函数时加载时实际库开始失败。`require`

我的短期建议是推迟并坚持使用良好的老式脚本连接，直到尘埃落定。在您遇到足够大或足够复杂的问题以保证它之前，我怀疑您将花费更多的时间来调试和修复您的构建。而且我认为我们大多数人都同意最好的利用时间是专注于您的应用程序代码，而不是它的构建工具。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-07-02T22:35:19.727

你可能想看看[http://jspm.io/](http://jspm.io/)这是一个浏览器包管理器。也有很好的 ES6 支持。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-07-02T22:04:48.503

我个人在我的小项目中使用[webmake](https://www.npmjs.org/package/webmake)。它是 browserify 的替代方案，它将 npm 依赖项带入浏览器，而且显然更轻。

我没有机会详细比较 browserify 和 webmake，但我注意到 webmake 在内部使用诸如 socket.io 之类的全局变量（无论如何 IMO 都充满了膨胀）的模块不能很好地工作。

我会对上面推荐的 RequireJS 持谨慎态度。因为它是一个*AMD 加载器*，所以你的浏览器会异步加载你的 JS 文件。它会在您的客户端和服务器之间引发更多的交流，并可能降低人们从移动网络/在不良 WiFi 下浏览的用户体验。此外，如果你成功地让你的 JS 代码保持简单和小巧，那么绝对不需要异步加载！*

# android - android运行时分析工具

> ID：11372415
> 
> 赞同：-1
> 
> 时间：2012-07-07T05:06:40.490
> 
> 标签：android, analytics

**有哪些免费的android运行时分析工具？**

我正在寻找一种工具来帮助我分析我在我的 android 应用程序中运行的算法。我一直无法找到适用于 android 的免费软件。我为 java 找到了一些，但没有看到任何关于如何让它们为 android 工作的教程或操作方法。

这是我想从这个工具中得到的一些东西。

*   执行时间处理时间
*   在某些方法上花费的时间
*   方法被调用的次数
*   循环迭代

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T05:12:25.380

看看[使用 Traceview 和 dmtracedump进行分析](http://developer.android.com/tools/debugging/debugging-tracing.html)

# android - 将图标添加到 TabHost for Android 的正确方法是什么？

> ID：11372418
> 
> 赞同：0
> 
> 时间：2012-07-07T05:07:41.103
> 
> 标签：android, eclipse, android-tabhost, tabwidget

我是 Android 开发的新手。

我已经在我的 Android 应用程序中添加了一个 TabHost，并且可以更改我拥有的三个选项卡的文本。我可以单击它们以显示不同的视图等。

但是在哪里以及如何将图标添加到特定选项卡？不是以编程方式更改它，而是实际将其添加到布局设计中？在 XML 中还是以某种方式使用设计器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T05:12:36.817

执行以下操作：

```
 TabHost tabHost=getTabHost();
    TabHost.TabSpec spec;
    TabHost.TabSpec spec=tabHost.newTabSpec("hello").setIndicator("hello",getResources().getDrawable(R.drawable.ic_launcher)).setContent(intent);
    tabHost.addTab(spec); 
```

这是将图标设置为特定选项卡的最简单方法。

# javascript - 如何使用 MVC-Servlet、JPS 和 JavaScript 获取数据

> ID：11372419
> 
> 赞同：0
> 
> 时间：2012-07-07T05:07:41.277
> 
> 标签：javascript, model-view-controller, jsp, servlets

我有具有链接的 JSP 页面（当人们单击链接时，它应该转到一个 servlet，然后是 Bean 类和 DB Connection 类来提取数据）..当用户单击我试图显示使用 AJAX 的页面......但是我目前没有得到任何数据/页面。有人可以解释如何实现这一目标吗？

这是我在我的 HTML 页面中的链接..但是当我点击它时没有显示任何内容。

```
 <a href="myservlet" onclick="grabfile(this.href); return false;">VT </a> 
```

谢谢你的帮助

对不起，这是我的代码

```
public class VacationTrackerDAO {

public static List<VactionTrackerBean> list() throws SQLException{
    List<VactionTrackerBean> appr= new ArrayList<VactionTrackerBean>();

    try{

        DBConnection conObj=new DBConnection(); 
        Connection dbCon= conObj.getCon();
        Statement stmt=conObj.getStmt();
        String queryCPList="select * from Capacity_Plan";
        String queryApprList="Select First_Last_Name from Vacation_Approvers";
        PreparedStatement preStmtCPList=dbCon.prepareStatement(queryCPList);//get metadat
        PreparedStatement preStmtApprList=dbCon.prepareStatement(queryApprList);//get names
        ResultSet rsCPList=preStmtCPList.executeQuery();
        ResultSet rsApprList=preStmtCPList.executeQuery();

        ResultSetMetaData metaCPList=rsCPList.getMetaData();

        VactionTrackerBean vtBean=new VactionTrackerBean();
        while(rsApprList.next()){
            vtBean.setApprover((rsApprList.getString("First_Last_Name")));
            appr.add(vtBean);
        }
}catch(Exception e){
    System.out.println("In the Vacation TrackerDAO.java class:"+e);
}
return appr;
}
} 
```

这是我的 Servlet 获取请求。

```
protected void doPost(HttpServletRequest request, HttpServletResponse response) 
        throws ServletException, IOException {

    try{

    List<VactionTrackerBean> vacBean=VacationTrackerDAO.list();
    request.setAttribute("vacTracker", vacBean);
    request.getRequestDispatcher("WEB-INF/VacationTracker.jsp").forward(request,response);

    }catch (SQLException e){
        System.out.println("Error in VacationTracker.java due to VactionTrackerDA.java:"+e);
        request.getRequestDispatcher("WEB-INF/Error.jsp").forward(request,response);
    } 
```

这是我在 JSP 页面中的代码。

```
<li>  <a href="Main.jsp" > home </a>        </li>
<li><a href="VacationTracker" onclick="grabfile(this.href); return false;">Vacation     Tracker </a>  </li>
</ul> 
```

这是我的 Javascript 的代码

```
function getHTTPObject(){

var xhr=false;

if(window.XMLHttpRequest){

    xhr= new XMLHttpRequest();

} else if(window.ActiveXObject){
    try{
        xhr= new ActiveXObject("Msxml2.XMLHTTP");

    } catch(e){
        try{
        xhr=new ActiveXObject("Microsoft.XMLHTTP");
        }catch (e){
            xhr=false;
        }
    } 

}

return xhr; 
```

}

```
function grabfile(file){
var request=getHTTPObject();
if(request){

    request.onreadystatechange=function(){ displayResponse(request);};

}
request.open("POST",file,true);
request.send(null); 
```

}

```
function displayResponse(request){

if(request.readyState==4){
    if(request.status==200){

        document.getElementById    ("middle_sub").innerHTML=request.responseText;
    }

}

} 
```

# ajax - AjaxForm 结果中的 AjaxForm

> ID：11372421
> 
> 赞同：1
> 
> 时间：2012-07-07T05:07:44.193
> 
> 标签：ajax, asp.net-mvc, asp.net-mvc-3, asp.net-mvc-ajax

这是我的观点：

```
@foreach(var item in Model) {
 <tr id="TR@(item.Id)">
    @{Html.RenderPartial("_PhoneRow", item);}
 </tr>
} 
```

`_PhoneRow`：

```
@model PhoneModel
@using(Ajax.BeginForm("EditPhone", new { id = Model.Id }, new AjaxOptions {
UpdateTargetId = "TR" + Model.Id
})) {
<td>@Html.DisplayFor(modelItem => Model.PhoneNumber)</td>
<td>@Html.DisplayFor(modelItem => Model.PhoneKind)</td>
<td><input type="submit" value="Edit" /></td>
} 
```

控制器：

```
public ActionResult EditPhone(long Id) {
  //Get model by id
  return PartialView("_EditPhoneRow", model);
}

public ActionResult SavePhone(PhoneModel model) {
  //Save Phone, and Get Updatet model
  return PartialView("_PhoneRow", model);
} 
```

`_EditPhoneRow`

```
 @model PhoneModel
@using(Ajax.BeginForm("SavePhone", new { id = Model.Id }, new AjaxOptions {
UpdateTargetId = "TR" + Model.Id
})) {
<td>@Html.EditorFor(modelItem => Model.PhoneNumber)</td>
<td>@Html.EditorFor(modelItem => Model.PhoneKind)</td>
<td><input type="submit" value="Save" /></td>
} 
```

因此，当我单击`Edit`按钮`_EditPhoneRow`时完美替换，但是当我单击`Save`按钮时没有任何获取，问题出在哪里？为什么当使用新的局部视图更新行时，新的 Ajax 表单不起作用？我认为这个问题很受欢迎，我只需要 Edit-Save With Ajax 在任何一行，你有什么建议？或任何来源或好的样本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T07:20:42.833

你破坏了标记。禁止将`<form>`元素直接嵌套在 a 之下`<tr>`。当你破坏了标记时，你可能会得到未定义的结果。在您的情况下，这个未定义的结果通过以下事实进行转换：当您单击第二个表单的提交按钮时，不会引发提交事件并且没有任何反应，因为 unobtrusive-ajax 库为此事件而存在/委托。[解决方法](https://stackoverflow.com/a/1249715/29407)包括使用另一个表。

所以：

`_PhoneRo.cshtml`：

```
@model PhoneModel
<td>
    @using (Ajax.BeginForm("EditPhone", new { id = Model.Id }, new AjaxOptions { UpdateTargetId = "TR" + Model.Id }))
    {
        <table>
            <tr>
                <td>@Html.DisplayFor(modelItem => modelItem.PhoneNumber)</td>
                <td>@Html.DisplayFor(modelItem => modelItem.PhoneKind)</td>
                <td><input type="submit" value="Edit" /></td>
            </tr>
        </table>
    }
</td> 
```

`_EditPhoneRow.cshtml`：

```
@model PhoneModel
<td>
    @using (Ajax.BeginForm("SavePhone", new { id = Model.Id }, new AjaxOptions { UpdateTargetId = "TR" + Model.Id }))
    {
        <table>
            <tr>
                <td>@Html.EditorFor(modelItem => modelItem.PhoneNumber)</td>
                <td>@Html.EditorFor(modelItem => modelItem.PhoneKind)</td>
                <td><input type="submit" value="Save" /></td>
            </tr>
        </table>
    }
</td> 
```

# asp.net - 如何将 MS ACCESS DB 与我的 asp.net 网站连接

> ID：11372422
> 
> 赞同：0
> 
> 时间：2012-07-07T05:07:45.423
> 
> 标签：asp.net, database

我正在尝试将我的 MS Access Db 与我的 asp.net 网站连接起来。当我运行我的代码（仅在本地主机上）时，它不会显示任何错误或异常，但它只是等待服务器响应。我正在关注代码：

```
 string connection = "Provider =Microsoft.ACE.OLEDB.12.0; datasource=I:/Adittya/test.accdb";

        string query = "select * from test";
        OleDbConnection con = new OleDbConnection(connection);
        OleDbCommand cmd = new OleDbCommand();
        cmd.CommandText = query;
        cmd.CommandType = CommandType.Text;
        OleDbDataReader dr = cmd.ExecuteReader();
        DataTable dt = new DataTable();
        dt.Load(dr);

        testGrid.DataSource = dt;
        testGrid.DataBind(); 
```

我的数据库的另一件事是在我的笔式驱动器中，其位置是静态的。

我的代码是否有问题，或者我们无法连接到笔式驱动器中的数据库。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-07T05:21:55.640

您的代码中有问题，您没有设置与命令对象的连接，也没有打开连接。下面的代码对我有用。试试这个

```
 string connection = "Provider=Microsoft.ACE.OLEDB.12.0;Data Source=D:\\Test1.accdb";

    string query = "select * from [Table]";
    OleDbConnection con = new OleDbConnection(connection);
    OleDbCommand cmd = new OleDbCommand();     
    cmd.CommandText = query;
    cmd.CommandType = CommandType.Text;
    cmd.Connection = con;
    con.Open();
    OleDbDataReader dr = cmd.ExecuteReader();
    DataTable dt = new DataTable();
    dt.Load(dr);
    con.Close();
    testGrid.DataSource = dt;
    testGrid.DataBind(); 
```

或使用 SqlDataSource 尝试此解决方案

示例：我创建了一个测试 Acess 数据库，并且我使用了 Sql 数据源，它工作正常。试试这个解决方案

```
<connectionStrings>       
    <add name="ConnectionString" connectionString="Provider=Microsoft.ACE.OLEDB.12.0;Data Source=D:\Test1.accdb"
        providerName="System.Data.OleDb" />
  </connectionStrings>
 <asp:SqlDataSource ID="SqlDataSource1" runat="server" ConnectionString="<%$     ConnectionStrings:ConnectionString %>" ProviderName="<%$ ConnectionStrings:ConnectionString.ProviderName %>" SelectCommand="SELECT * FROM [Table]"></asp:SqlDataSource>
 <asp:GridView ID="GridView1" DataSourceID="SqlDataSource1" runat="server"></asp:GridView> 
```

它对我来说很好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-07T05:15:11.533

试试你的数据源

```
datasource=I:\\Adittya\\test.accdb 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-07-14T06:35:35.270

用这个

```
"Provider=Microsoft.Jet.OLEDB.4.0; " + 
     "Data Source=" + Server.MapPath("Database/TestDB.mdb")) 
```

# ios - 加载视图后如何自动隐藏状态栏

> ID：11372423
> 
> 赞同：0
> 
> 时间：2012-07-07T05:08:07.727
> 
> 标签：ios, uistatusbar

伙计们，我想在代码中隐藏状态栏。加载视图后，状态栏会显示，一段时间后会自动隐藏。怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-07T05:25:57.150

你想要`UIApplication`的`setStatusBarHidden:withAnimation:`

```
[[UIApplication sharedApplication] setStatusBarHidden:YES withAnimation:UIStatusBarAnimationSlide]; 
```

请参阅[文档](http://developer.apple.com/library/ios/DOCUMENTATION/UIKit/Reference/UIApplication_Class/Reference/Reference.html#//apple_ref/occ/instm/UIApplication/setStatusBarHidden%3awithAnimation%3a)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-03T23:31:46.647

您必须选择您的项目并`Hide during application launch`在标题 General 中选择，`Deployment Info`如下所示：

![在此处输入图像描述](../Images/d3a2c60022b6f16e693092366404a8ef.png)

在 info.plist 中设置`View controller-based status bar`为 NO：

![在此处输入图像描述](../Images/37e50f254c3cf00499fb0d7bbe0b3931.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-07T05:19:29.230

尚未对其进行测试，可能有更好的方法，但是如果您将以下内容放入加载视图函数中：

```
[self performSelector:@selector(hideNavBar) withObject:nil afterDelay:0.0]; 
```

然后有这个功能

```
-(void) hideNavBar {
    if (self.navigationController.navigationBar.hidden == NO)
    {
        [self.navigationController setNavigationBarHidden:YES animated:YES];
    }
} 
```

您可能必须在视图动画块中隐藏导航栏。但一些组合应该有效

查看 [链接](https://stackoverflow.com/questions/2340399/keeping-uinavigationcontrollers-navigationbar-hidden-after-uisearchdisplaycontr "关联")

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-03T18:51:21.277

当 applicationDidBecommeActive （“加载后的视图”）时，您可以简单地在 AppDelegate 中执行此操作。在 400 毫秒后设置隐藏状态，使用 UIView 动画块并计算您的根视图控制器的导航栏

```
// AppDelegate.m

#import "AppDelegate.h"
#import "SomeViewController.h"

@interface AppDelegate ()
@property (nonatomic, strong) SomeViewController *someViewController;
@end

@implementation AppDelegate

- (void)applicationDidBecomeActive:(UIApplication *)application
{
    UINavigationBar *navBar = self.someViewController.navigationController.navigationBar;
    if (![[UIApplication sharedApplication] isStatusBarHidden]) {
       [[UIApplication sharedApplication] setStatusBarHidden:YES
                                               withAnimation:UIStatusBarAnimationSlide];
       [UIView animateWithDuration:0.4
                        animations:^{
                            navBar.frame = CGRectMake(navBar.frame.origin.x, 0, navBar.frame.size.width, navBar.frame.size.height);
                     } completion:nil];
    }
}

@end 
```

就是这样，“加载视图（didBecomeActive）后，状态栏将显示并在一段时间后自动隐藏（400ms）”

# jquery - 点击时jquery调用函数

> ID：11372425
> 
> 赞同：0
> 
> 时间：2012-07-07T05:08:38.890
> 
> 标签：jquery

我在点击时调用函数时遇到问题。以下是我的代码：

**JavaScript：**

```
$(document).ready(function(){       
    function showMessage(msg) {
        alert(msg);
    };      
}) 
```

**HTML：**

```
<input type="button" value="ahaha"  onclick="$(this).showMessage('msg');" /> 
```

由于某些原因，我无法使用`click()`功能。请帮我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-07T05:14:25.543

一些东西：

*   `showMessage()`不是 jQuery 对象的属性。这只是一个常规功能。
*   如果您使用的是 jQuery，请不要使用`onclick`. 使用 JavaScript 绑定所有事件。

有几种方法可以修复此代码。这是一个：

**JavaScript**：

```
$.fn.showMessage = function(message) {
  alert(message);
};

$(document).ready(function() {  
  $('#button').on('click', function() {
    $(this).showMessage('I am a message');
  });
}); 
```

**HTML**：

```
<input type="button" value="ahaha" id="button" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-07T05:13:41.507

没有`$(this)`请..就像这样打电话：`onclick="showmessage('msg')"`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-07T05:15:18.967

```
$(document).ready(function(){      
        function showMessage(msg) {
       alert(msg);
    };      <-----  i think this semicolon is not needed
        })  <-----  Should provide semicolon here as its the main function ending 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-07T05:22:46.027

有几种方法可以做到这一点。

让我对您的 html 进行一些更改，

```
<input id="myTest" value="CLICK ME!!!" title="HELLO WORLD!!!" type="button" /> 
```

接下来让我们看看如何用 jQuery 做到这一点

```
$(document).ready(function() {
  $('input#myTest').click(function() {
    var el = $(this),
        msg = el.attr('title');
    alert(msg);
  });
}); 
```

希望这会有所帮助，干杯

# ios - 获取 Alpha 值 Objective-C

> ID：11372430
> 
> 赞同：1
> 
> 时间：2012-07-07T05:10:50.487
> 
> 标签：ios, objective-c, if-statement, alpha, nsbox

如何获取 NSBox 的 alpha 值并在 if 语句中使用它？

如果值等于 0，我想检查 NSBox 的 alpha 然后做点什么。

```
if ([Preferences alphaValue ==0]) {
        [[[[Preferences subviews] objectAtIndex:0] animator] setAlphaValue:0.0];

    } else {
        [[[[Preferences subviews] objectAtIndex:0] animator] setAlphaValue:1];

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T05:18:38.000

你想要

```
if ([Preferences alphaValue] == 1.0) 
```

或者其他的东西？

你需要更清楚地解释你想要做什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T15:58:25.033

`if ([PreferencesButton state]== 0) {`

```
 [[[[Preferences subviews] objectAtIndex:0] animator] setAlphaValue:0.0];

} else {

    [[[[Preferences subviews] objectAtIndex:0] animator] setAlphaValue:1];
} 
```

我使用的是切换按钮，需要使用按钮的状态而不是首选项框的 alpha。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-25T21:22:16.850

`[Preferences alpha] == 0.0f`

应该是你要找的

# java - 变量声明，其名称包含来自循环的值

> ID：11372432
> 
> 赞同：1
> 
> 时间：2012-07-07T05:11:08.780
> 
> 标签：java, android

我是 php 开发人员，刚开始使用 java 我想在循环中声明动态变量，为此我必须将循环值附加到变量名称，这就是我想要的。

```
I would like to make  statement like this 

for (i=1; i<6; i++)
{
String new_variable_ + i;
} 
```

上面的代码在java中不起作用怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T06:20:14.737

变量声明被声明为静态标识符，并且不能包含 java 中的任何计算值（我敢说这在任何静态类型语言中都是正确的）。

你说你找不到关联数组。你见过 java.util.Map 接口（及其实现）吗？根据定义，它是一个关联数组：

维基百科：在计算机科学中，关联数组、映射或字典是由（键、值）对的集合组成的抽象数据类型，这样每个可能的键在集合中最多出现一次。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T21:10:33.317

> 你想要做的事情在java中是不可能的......这种语言不像php那样失去......它是一种类型严格的语言

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-07T05:22:01.150

就像我在评论中说的那样，Java 中没有动态变量。充其量你可以这样做：

```
HashMap variableMap = new HashMap<String,String>();

for (int i = 1; i < 6; i++) {
   variableMap.put("new_variable_" + i, "some variable value");
} 
```

然后要访问它们，您可以：

```
String value = variableMap.get("new_variable_2"); 
```

或者要更新它，您可以：

```
variableMap.put("new_variable_2", "new value"); 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-07-07T05:14:27.883

如果您只想在循环中使用 i 的字符串版本，则需要：

```
for (int i=1; i<6; i++)
{
  String new_variable_ = "" + i;
  //use new_variable here.
} 
```

如果您正在寻找不同的东西，我需要更多详细信息。祝你好运！

# php - PHP-教程上的错字？

> ID：11372437
> 
> 赞同：0
> 
> 时间：2012-07-07T05:11:59.490
> 
> 标签：php

[我在 youtube 上关注了这个 phpacademy 教程，](http://www.youtube.com/watch?NR=1&feature=endscreen&v=Fw6rOAiSDuQ)但无法通过 echo 打印关键字。相反，我得到：

```
`keywords` LIKE '%keyword%' 
```

什么？代码已逐字复制。可能是平台问题？

这个语句 ->`$where .= "`关键字有问题`LIKE '%keyword%'";`吗？

```
<?php

    include 'db.inc.php';

    function search_results($keywords) {
        $returned_results=array();
        $where="";

        $keywords=preg_split('/[\s]+/', $keywords);
        $total_keywords = count($keywords);

        foreach($keywords as $key=>$keyword){
            $where .= "`keywords` LIKE '%keyword%'"; // Where's the issue?
            if($key != ($total_keywords-1)){
                $where .= " AND ";  
            }
        }  

        echo $where;
    }

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T05:23:44.967

我对你的代码做了一些重构，现在更清楚了。请参阅代码中的注释。

```
include 'db.inc.php';

function search_results($keywords) {
    $where = array();

    // skip empty results with PREG_SPLIT_NO_EMPTY flag
    $keywords = preg_split('/[\s]+/', $keywords, -1, PREG_SPLIT_NO_EMPTY);

    foreach ($keywords as $keyword) {
        // escape string (anti sql injection)
        $keyword = mysql_real_escape_string($keyword);

        // your problem was using keyword instead of $keyword
        $where[] = "`keywords` LIKE '%$keyword%'";
    }  

    echo implode(' AND ', $where);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T05:20:21.877

当你看到下面的代码时，

```
`keywords` LIKE '%keyword%' 
```

本教程告诉您，您需要`%keyword%`用两者之间的任何关键字替换它`%`。因此，您的代码应如下所示：

```
<?php

    include 'db.inc.php';

    function search_results($keywords) {
        $returned_results=array();
        $where="";

        $keywords=preg_split('/[\s]+/', $keywords);
        $total_keywords = count($keywords);

        foreach($keywords as $key=>$keyword){
            $where .= "`keywords` LIKE '%$keyword%'"; // Issue fixed.
            if($key != ($total_keywords-1)){
                $where .= " AND ";  
            }
        }  

        echo $where;
    }

?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-07T05:38:09.277

在我看来，这只是教程中 where 子句中的一个错字 - 在关键字变量名之前缺少 $ 字符。其他答案提供了答案，但没有指出它看起来像一个错字。对于来自其他不需要像 PHP 那样的变量名前缀的语言的人来说，这是一个常见的错字。

# android - 我们可以在 Android 上使用 Hadoop 和任何 NoSQL 数据库而不是 SQLite

> ID：11372449
> 
> 赞同：2
> 
> 时间：2012-07-07T05:14:28.513
> 
> 标签：android, mongodb, hadoop, nosql

任何人都可以告诉我们，我们可以使用 Hadoop 和任何 NoSQL 数据库，如 MongoDB tec 与 Android 而不是 SQLite。如果是，那么该怎么做（我的意思是这样做的过程是什么），因为 SQLite 嵌入在 Android 中，对于 MongoDB 等，我们将不得不使用单独的服务器等，或者它可以用作嵌入式。
以及哪个数据库更适合使用 SQLite 或 MongoDB

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T06:03:18.343

Hadoop 本身是非常资源密集型的。它是为大型机器集群而不是单个移动设备而开发的。除此之外，NoSQL 的优势还在于可以处理它们的大型机器集群。如果您的存储和处理器能力有限，例如移动设备，您将承受巨大的开销。

也许设置 Hadoop 和 NoSQL 是可能的，但你将不得不付出数量级的性能。我强烈建议您不要这样做——最好从学习传统 SQL 开始。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-07T06:23:47.833

在某些情况下，当关系数据库可以使用时，hadoop 和 NoSQL 解决方案通常是较差的解决方案。通常，可扩展性和容错性是以牺牲性能和效率为代价的。因此，如果您的负载/数据量需要扩展到集群，我不建议您尝试这些解决方案。

# java - 带有 SQL 的 Java Swing 计时器

> ID：11372450
> 
> 赞同：0
> 
> 时间：2012-07-07T05:14:31.977
> 
> 标签：java, sql, timer

我正在尝试设置一个线程，该线程每 100 毫秒循环一次，每次迭代都会查询 SQL 数据库中的表。这是我的公共静态无效主类中的内容。如何在侦听器之外定义连接并仅在循环中调用查询？

```
 // Database credentials
    final String url = "jdbc:mysql://192.168.0.0/";
    final String db = "db";
    final String driver = "com.mysql.jdbc.Driver";
    final String table = "table";
    public final Connection conn = null;

    // Define listner
    ActionListener taskPerformer = new ActionListener() {
        public void actionPerformed(ActionEvent evt) {
            //...Perform a task...

            System.out.println("Reading Info.");
            try {
                Class.forName(driver);
                try {
                    conn = DriverManager.getConnection(url+db,"root","pass");
                    Statement st = (Statement) conn.createStatement();
                    String sql = "";
                    st.executeUpdate(sql);
                    conn.close();

                } catch (SQLException s) {
                    s.printStackTrace();
                    JOptionPane.showMessageDialog(null, "ERROR: Please try again!");
                }
            } catch (ClassNotFoundException cnfe){
                JOptionPane.showMessageDialog(null, "ERROR:");  
            }
        }
        };
    Timer timer = new Timer( 100 , taskPerformer);
    timer.setRepeats(true);
    timer.start();

    Thread.sleep(100); 
```

}

现在它给了我以下错误：

线程“AWT-EventQueue-0”java.lang.Error 中的异常：未解决的编译问题：无法分配最终的局部变量 conn，因为它是在封闭类型中定义的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T05:16:52.453

你不想。根据 JDBC 规范，连接不是线程安全的。因此，没有理由或理由证明 Connection 变量不是线程本地的。为什么不是？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T08:32:01.367

既然您对非直接问题有了答案，让我用您的直接问题来补充。你有这个：`public final Connection conn = null;`这没有任何意义。您已分配`null`给一个`final`变量。您可能已经添加`final`，因为编译器抱怨您在内部类中使用了非最终变量。您可能想要实现的是延迟初始化的单例。删除`final`修饰符，然后编写一个单独的同步函数来检索连接并根据需要对其进行初始化：

```
private Connection conn;
private synchronized Connection connection() {
  if (conn == null) conn = createConnection();
  return conn;
} 
```

当然，您最好确保从不同时使用连接，但您的用例不需要这样做。这种简单的连接池方法的另一个问题是连接处于无效状态。

# python - CSV 删除字段值换行引号

> ID：11372460
> 
> 赞同：6
> 
> 时间：2012-07-07T05:16:08.710
> 
> 标签：python, csv, file-io, double-quotes

我正在尝试将列表写入 csv，但是当我这样做时，我会在字段值周围得到包装引号：

```
number1,number2
"1234,2345"
"1235.7890"
"2345.5687" 
```

使用此代码：

```
with open('C:\\temp\\test.csv', 'wb') as out_file:
...     csv_writer = csv.writer(out_file, delimiter=',')
...     csv_writer.writerow(('number1','number2'))
...     for f in myList:
...         csv_writer.writerow(f) 
```

经过进一步研究，我发现您可以使用以下方法删除引号的书写：

> quotechar='', quoting=csv.QUOTE_NONE**

当我将此应用于我的代码时，我收到此错误：

> Traceback（最近一次调用最后一次）：文件“”，第 4 行，错误：需要转义，但没有设置转义字符

```
with open('C:\\temp\\test.csv', 'wb') as out_file:
...     csv_writer = csv.writer(out_file, delimiter=',',quotechar='', quoting=csv.QUOTE_NONE)
        csv_writer.writerow(('number1','number2'))
...     for f in myList:
...         csv_writer.writerow(f) 
```

如何删除这些引号？

**编辑**

**myList 看起来像：**

```
 [['1234,2345'], ['1235,7890'], ['2345,5687']] 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-07T05:55:03.893

您列表中的内容不是数字，而是文本，甚至包含分隔符。这意味着将其导出为 csv 它必须被转义。

如果您希望正确写入数据，则需要先将数据转换为数字，然后再将其导出为 csv。

编辑：另一方面，您的数据看起来已经包含逗号分隔值 - 为什么不直接将其写入文件而不使用 csv 写入器？

# jquery - jquery中的参数函数

> ID：11372463
> 
> 赞同：0
> 
> 时间：2012-07-07T05:16:53.773
> 
> 标签：jquery

我想用参数制作函数。我使用下面的代码，但它不工作。谁能告诉我我做错了什么。

```
<head>
    <script type="text/javascript" src="jquery-1.7.2.js"></script>
    <script type="text/javascript">
        $(function hide(fn){
            $(fn).click(function(){
                $('div').hide()
            })
        })
    </script>
    <style>
        div { width:500px; height:500px; background:#FF0000; }
    </style>
</head>
<body>
    <button onclick="hide(this)">click for hide</button>
    <a href="#">click</a>
    <button>click</button>
    <div></div>
</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T05:32:03.147

一件重要的事情：您应该编写[不显眼的 JavaScript](http://en.wikipedia.org/wiki/Unobtrusive_JavaScript)，因为它被认为是最佳实践。有了它，您可以保持内容与代码的分离。因此，第一步是删除元素`onclick`上的处理程序。`<button>`

我假设你想点击“点击隐藏”按钮来隐藏`<div>`. 好的，让我们将一些骨架代码放入`<script>`：

```
$(document).ready(function() {
    $(<button>).click(function() {
        $(<div>).hide();
    });
}); 
```

但是我们需要以某种方式将该`click`处理程序链接到该按钮，并将该`hide`函数链接到实际的`div`. 这是执行此操作的最简单方法：提供您的`<button>`和`<div>`一些 ID。比方说...

```
<button id="hide-button">...</button>
<div id="hide-div">...</div> 
```

现在，我们只需要对我们的骨架代码进行一些修改：

```
$("#hide-button").click(function() {
    $("#hide-div").hide();
}); 
```

这就是这个简单代码的作用。当您的 DOM 加载时，会从文档的 ready 事件中调用一个无名函数（您不能为动态定义的函数命名*）。这个无名函数将`click`处理程序附加到您的`#hide-button`按钮，因此当您单击该按钮时，会调用另一个匿名函数。该函数调用`hide`，它执行了一些适用于所有浏览器的 jQuery 魔术，在该`#hide-div`div 上隐藏它。

*好吧，你可以，但前提是你先定义它们然后传递它们。像这样：

```
var fn = function() {...};
$(document).ready(fn); 
```

**编辑**

由于提问者不想使用 ID 或类，这里有一个替代解决方案：

```
<script>
    function hide() {
        $('div').hide();
    }
</script>
...
<button onclick="hide()">click for hide</button>
<div></div> 
```

注意不要放在`function hide()`jQuery 的 document-ready idiom 中。`hide()`这样做会因为范围界定而拒绝您访问。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T05:19:12.627

您的代码当前仅在您单击按钮时*设置单击处理程序。*

如果您想继续在元素上使用`onclick`处理程序，则将您的功能更改为简单（不包括该部分）。如果您更愿意使用该函数来设置处理程序，则从元素中删除该属性，并在顶部的函数中更改为，在为您的按钮提供 id 之后。`button``hide``$('div').hide()``$(fn).click``click``onclick``button``$(fn).click``$('#button').click``button`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-07T05:27:36.877

您将紧凑的 jQuery`ready()`函数与其他东西混淆了，所以我会改用可读的`$(document).ready()`语法：

```
$(document).ready(function() {
    $('.hide').on('click', function(){
        $(this).next('div').hide()
    })
}) 
```

并稍微更改您的 HTML：

```
<button class="hide">click for hide</button> 
```

不是将函数绑定到元素，而是将事件处理程序绑定到具有`hide`. 单击它们时，搜索最近的`<div>`元素并将其隐藏。

# sql - 如何使用 SQL 查找双打？

> ID：11372464
> 
> 赞同：0
> 
> 时间：2012-07-07T05:16:55.120
> 
> 标签：sql

使用[Chinook 测试数据库](http://chinookdatabase.codeplex.com/)，我编写了这个 SQL 语句来显示两个特定客户订购的所有曲目：

```
SELECT inv.BillingCity,cus.LastName,tra.Name
        FROM invoice AS inv
        JOIN customer AS cus ON inv.CustomerId=cus.CustomerId
        JOIN invoiceline inl ON inv.InvoiceId=inl.InvoiceId
        JOIN track tra ON tra.TrackId=inl.TrackId
        WHERE cus.LastName IN ('Schneider','Schröder')
        ORDER BY inv.BillingCity,cus.LastName,tra.Name 
```

我看到有一个轨道被一位客户订购了两次：

![在此处输入图像描述](../Images/8854c0f7b58fcbb7936d03ee0a4741b2.png)

**我将如何编写一个 SQL 语句来查找这样的双打，即“返回一个客户多次订购的所有曲目”？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T05:24:39.293

尝试这个：

```
SELECT cus.CustomerId,tra.Name,COUNT(cus.CustomerId) AS tot
       FROM invoice AS inv
       JOIN customer AS cus ON inv.CustomerId=cus.CustomerId
       JOIN invoiceline inl ON inv.InvoiceId=inl.InvoiceId
       JOIN track tra ON tra.TrackId=inl.TrackId
       GROUP BY cus.CustomerId,tra.Name
       HAVING tot > 1 
```

# jquery - Firefox 中的流体布局问题

> ID：11372465
> 
> 赞同：0
> 
> 时间：2012-07-07T05:17:17.657
> 
> 标签：jquery, css, firefox, cross-browser, liquid-layout

stackoverflow 帮助学习了很多很酷的东西，但不幸的是我被困在了一些东西上，不知道如何研究我的出路……所以这里提出了一个问题，我希望有一个简单的答案。

我已经布置了一个运行良好的网站，这正是我想要的，它使用了一个名为 LemmonSlider.js 的很棒的插件，我已经设法让它在布局中完全流动......几乎！

问题是它在 Safari、iOS 和 Chrome 上运行良好，但是当我在 Firefox 上测试它时，事情变得很糟糕，非常糟糕。我没有在 IE 中测试过，但我可以想象事情会一样时髦。

下面是一些简化的代码，让您了解我所做的事情......

我已经尝试在 body, html 标签中使用 min-height ，但这似乎没有帮助。

任何输入将不胜感激

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
    <head>
        <title>Example layout for the nice folk at stackoverflow</title>
        <script src="http://code.jquery.com/jquery-latest.min.js"
        type="text/javascript"></script>
        <style type="text/css">
            html, body {
                width:100%;
                height:100%;
                padding:0;
                margin:0;
                background-color:red;
            }
            #content {
                position:absolute;
                top:50%;
                margin-top:-25%;
                width:100%;
                height:50%;
                background-color:blue;
                overflow:hidden;
            }
            #content ul {
                position:relative;
                margin:0;
                padding:0;
                height:100%;
                background-color:yellow;
            }
            #content li {
                list-style:none;
                float:left;
                height:inherit;
                background-color:orange;
                margin:0px 10px 0px 10px;
            }
            #content img {
                height:inherit;
            }
        </style>
        <script type="text/javascript">
            $(window).bind('resize', function () {
                location.reload();
            });
        </script>
    </head>
    <body>
        <div id="content">
            <ul>
                <li>
                    <img src="any/sized/image" />
                </li>
                <li>
                    <img src="any/sized/image" />
                </li>
                <li>
                    <img src="any/sized/image" />
                </li>
                <li>
                    <img src="any/sized/image" />
                </li>
                <li>
                    <img src="any/sized/image" />
                </li>
            </ul>
        </div>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T05:44:17.093

更改#内容

```
#content {
  position:absolute;
  top:25%;
  width:100%;
  height:50%;
  background-color:blue;
  overflow:hidden;
} 
```

否则......如果你不投资你的CSS。我完全推荐使用 1140 网格。它非常酷，因为网格还带有用于响应式设计的媒体查询。

希望这对你有用

干杯

# php - 我应该在哪个 XML 文件中使用依赖元素（Magento）？

> ID：11372470
> 
> 赞同：4
> 
> 时间：2012-07-07T05:18:01.647
> 
> 标签：php, xml, magento

我们知道 Magento 中的模块开发有 2 个必要的 XML 文件。

1.  Package_Module.xml
2.  等/config.xml

有些人`<depends>`在第一个 XML 文件中使用（如果取决于任何现有模块）标签，在第二个文件中使用一些标签

2.)

```
<modules>
    <Company>
        <NewProduct>
            <version>0.7.32</version>
            <depends>
                <!-- no dependencies -->
            </depends>
        <NewProduct>
    </Company>
<modules> 
```

1.)

```
<modules>
    <(NameSpace_ModuleName)>
        <active>[true|false]</active>
        <codePool>[core|community|local]</codePool>
        <depends>
            <(AnotherNameSpace_ModuleName) />
        </depends>
        <version>(version_number)</version>
    </(NameSpace_ModuleName)>
</modules> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-07T12:47:19.260

配置分多个步骤编译。正因为如此，`<depends>`节点应该在模块声明文件中定义`app/etc/modules/`。

**请注意，`<depends>`指令仅建立模块`config.xml`文件的加载顺序（或错误），而不是其他。**

# android - Android 视图 state_pressed 蓝色背景

> ID：11372474
> 
> 赞同：0
> 
> 时间：2012-07-07T05:18:41.710
> 
> 标签：android, background, states, pressed, tint

我有很多自定义视图，并且我有 state_pressed 的样式。基本上它是一个矩形

坚硬的`android:color="#DC2D5A8C"`

我想做的是模拟标准视图/控件附带的蓝色背景颜色。例如：当您单击按钮或列表视图项时，背景变为蓝色（on_pressed）。

我让它与上述风格一起工作，但问题是让我们称之为色调效果。在按钮中，文本标题为黑色。按下时，背景为蓝色，文本颜色变为白色。

现在如何在自定义控件的视图中实现这种所谓的“色调”变化？

非常感谢您的回复。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T05:28:19.567

您可以使用选择器 xml 文件来执行此操作。您必须为按钮设置背景。而不是将 xml 文件设置为其背景。在您的可绘制文件夹中创建 selector.xml 文件，如下所示并将该 xml 文件设置为背景那个按钮就像：android:background="@drawable/selector"

```
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <!-- When selected, use blue -->
    <item android:drawable="@drawable/btn_blue"
          android:state_pressed="true" />
    <!-- When not selected, use black-->
    <item android:drawable="@drawable/btn_black"/>

 </selector> 
```

通过这样做，您将为您的按钮获得所谓的色调效果。希望这会对您有所帮助。

# c++ - 函数的签名

> ID：11372476
> 
> 赞同：3
> 
> 时间：2012-07-07T05:18:56.703
> 
> 标签：c++

我是一名初级程序员，刚刚开始学习 C++ 编程，

我查看了一个名为“FUNCTION OVERLOADING”的功能，虽然我已经了解了代码级别的目的和实现，但我不明白它是如何在编译器级别实现的，即编译器如何区分具有相同名称的不同功能，并且会

```
return-type func-name (data-type 1 , data-type-2); 
```

将具有相同的签名

```
return-type func-name (data-type 2 , data-type-1); 
```

同样的事情也适用于重载的构造函数吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-07T05:20:36.527

编译器使用一种称为[名称修饰](http://en.wikipedia.org/wiki/Name_mangling)的技术。

简而言之，编译器将参数的数量和类型编码为写入目标文件的实际名称。Wikipedia 文章中有一些关于该主题的示例，包括来自 C++ 的示例。

作为一个具体的例子，我在 Mac 上使用 g++ 编译了以下 C++ 文件：

### 测试.cpp

```
int f(int x) {}

int f(double x, char y) {} 
```

和

```
g++ -S test.cpp 
```

这会生成汇编语言文件（有些省略）：

### 测试.s

```
.globl __Z1fi
__Z1fi:
    pushq   %rbp
    movq    %rsp, %rbp
    movl    %edi, -4(%rbp)
    leave
    ret
.globl __Z1fdc
__Z1fdc:
    pushq   %rbp
    movq    %rsp, %rbp
    movsd   %xmm0, -8(%rbp)
    movb    %dil, -12(%rbp)
    leave
    ret 
```

这里重要的部分是函数被调用`__Z1fi`并`__Z1fdc`在汇编语言输出中，链接器将看到。您可能可以推断出这`f`是函数的名称，对于参数，我们有`i`(int) 和`dc`(double 和 char)。请注意，参数的顺序也是编码的！

现在考虑如果你有会发生什么

```
int f(int x) {}
int f(int y) {} 
```

就语言而言，这当然不是可接受的情况，因为`f(10)`无法解决类似的呼叫。理论上，一种语言可以指定第二个声明替换第一个声明，但 C++ 不会这样做。这简直是​​非法的重载。

事实证明，名称修饰实际上说明了为什么这应该是一个错误。编译器会尝试使用名称创建两个不同的函数`__Z1fi`（实际名称不是由语言定义的，而是依赖于编译器的）。在这个级别的程序中，我们不能有两个同名的函数。

# ruby-on-rails - 创建新记录时哪个轨道 ActiveRecord 回调与服务（条带）同步并且仍然正确使用错误？

> ID：11372477
> 
> 赞同：0
> 
> 时间：2012-07-07T05:18:59.040
> 
> 标签：ruby-on-rails, mongoid, stripe-payments

我有一个 User 和一个 StripeCustomer 模型。每个用户嵌入一个并接受_nested_attributes_for StripeCustomer。

创建新用户时，我总是创建一个相应的 StripeCustomer，如果您提供 CC 或优惠券代码，我会创建一个订阅。

在我的 StripeCustomer 中：

```
attr_accessible :coupon_id, :stripe_card_token 
```

我想做的是，如果优惠券无效，请执行以下操作：

```
errors.add :coupon_id, "bad coupon id" 
```

因此，正常的 rails 控制器模式如下：

```
if @stripe_customer.save
    ....
else
    ....
end 
```

会工作的。并且能够使用普通的 rails field_with_errors 东西来处理不良优惠券。

所以问题是，我应该在哪个活动记录回调处调用 Stripe::Customer.create 并保存 stripe_customer_token？

我在 before_create 上使用了它，因为我希望它只有在您真的要保留记录时才完成。但这会做一些奇怪的事情吗？更糟糕的是，如果您要通过用户创建它，即使您在 before_create 回调中执行 errors.add ，用户和 StripeCustomer 的保存实际上也会*成功！*我认为问题在于，只有在添加错误并在 before_validation 处返回 false 时，保存才会失败。

最后一部分我不确定这是否是一个 mongoid 问题。

我可以将它移动到 before_validation :on => :create 但即使我刚刚调用了valid，它也会创建一个新的 Stripe::Customer？我不想要。

无论如何，我一般都很好奇任何由远程服务记录支持或链接到的模型的最佳实践以及如何处理错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T17:03:43.473

Ok here is what I did, I split the calls to stripe into 2 callbacks, one at before_validation and one before_create (or before_update).

In the before_validation, I do whatever I can to check the uncontrolled inputs (directly from user) are valid. In the stripe case that just means the coupon code so I check with stripe that it is valid and add errors to :coupon_code as needed.

Actually creating/updating customers with stripe, I wait to do until before_create/before_update (I use two instead of just doing before_save because I handle these two cases differently). If there is an error then, I just don't handle the exception instead of trying to add to errors after validation which (a) doesn't really make any sense and (b) sort of works but fails to prevent saves on nested models (in mongoid anyway, which is very bad and strange).

This way I know by the time I get to persisting, that all the attributes are sound. Something could of course still fail but I've minimized my risk substantially. Now I can also do things like call valid? without worrying about creating records with stripe I didn't want.

In retrospect this seems pretty obvious.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T05:47:44.790

我不确定我是否完全理解这种情况。你写了：

> 每个用户嵌入一个并接受_nested_attributes_for StripeUser

您是说 StripeCustomer 吗？

所以你有一个用户有一个持有优惠券信息的客户？

如果是这样，我认为在用户中接受客户的嵌套属性就足够了，将验证放在客户代码中，就是这样。看[这里](http://api.rubyonrails.org/classes/ActiveRecord/NestedAttributes/ClassMethods.html)

如果我把你的问题弄错了，请告诉我...

# android - 无法将活动绑定到服务

> ID：11372480
> 
> 赞同：1
> 
> 时间：2012-07-07T05:19:23.320
> 
> 标签：android, android-intent, bind, android-service

我无法让 onServiceConnected() 方法运行，这意味着它没有将我的活动绑定到服务。

这可能是我错过了一些简单的事情 - 但我已经尝试了很多次 - 从头开始​​。

开始了...

**我的服务等级**

```
import android.app.Service;
import android.content.Intent;
import android.os.IBinder;

public class QuickService extends Service {

private final IBinder mBinder = new QuickBinder(this);

@Override
public IBinder onBind(Intent intent) {
    return mBinder;
}

} 
```

**我的活页夹类**

```
import android.os.Binder;

public class QuickBinder extends Binder {

private final QuickService service;

public QuickBinder(QuickService service){
    this.service = service;
}

public QuickService getService(){
    return service;
}

} 
```

**而且... Activity 试图绑定到服务。**

```
import android.app.Activity;
import android.content.ComponentName;
import android.content.Context;
import android.content.Intent;
import android.content.ServiceConnection;
import android.os.Bundle;
import android.os.IBinder;

public class QuickActivity extends Activity {

QuickService mService;

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_connecting);
}

@Override
protected void onStart() {
    super.onStart();
    Intent intent = new Intent(this, QuickService.class);
    bindService(intent, mConnection, Context.BIND_AUTO_CREATE);
}

@Override
protected void onStop() {
    super.onStop();
    // Unbind from the service
        unbindService(mConnection);
    }

/** Defines callbacks for service binding, passed to bindService() */
private ServiceConnection mConnection = new ServiceConnection() {

    @Override
    public void onServiceConnected(ComponentName className,
            IBinder service) {
        Logger.d("Connected!!! :D");
        // We've bound to LocalService, cast the IBinder and get LocalService instance
        QuickBinder binder = (QuickBinder) service;
        mService = binder.getService();
    }

    @Override
    public void onServiceDisconnected(ComponentName arg0) {
    }
};
} 
```

此外，清单文件中定义的服务 - 如果您认为这是问题所在。

```
<service android:name=".QuickService"></service> 
```

那么，我在这里做错了什么？为什么不调用 onServiceConnected() 方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T05:25:38.117

使用以下更新它

```
 <service android:name=".QuickService">
            <intent-filter>
                <action android:name=".QuickService .BIND" />
                <category android:name="android.intent.category.DEFAULT"/>
            </intent-filter>
        </service> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-07T05:36:41.960

而不是写：

```
Intent intent = new Intent(this, QuickService.class);
    bindService(intent, mConnection, Context.BIND_AUTO_CREATE); 
```

你可以写：

```
startService(new Intent(QuickActivity.this, QuickService.class)); 
```

你想在哪里开始服务。

希望这会帮助你。

# ruby-on-rails - Rails 将验证放在模块 mixin 中？

> ID：11372484
> 
> 赞同：30
> 
> 时间：2012-07-07T05:19:58.400
> 
> 标签：ruby-on-rails, ruby, validation, models

在我的模型中，一些验证是重复的：

```
validates :name, :length => { :minimum => 2 }, :presence => true, :uniqueness => true
validates :name_seo, :length => { :minimum => 2 }, :presence => true, :uniqueness => true 
```

我怎么把它放在mixin中？如果我只是将它们放入 mixin 中，我会收到此错误

```
app/models/validations.rb:5: undefined method `validates' for Validations:Module (NoMethodError) 
```

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-07-07T05:37:52.760

```
module Validations
  extend ActiveSupport::Concern

  included do
    validates :name, :length => { :minimum => 2 }, :presence => true, :uniqueness => true
    validates :name_seo, :length => { :minimum => 2 }, :presence => true, :uniqueness => true
  end
end 
```

必须在包含器的`validates`上下文中评估宏，而不是在模块的上下文中（就像您可能正在做的那样）。

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2012-07-07T05:38:23.240

您的模块应如下所示：

```
module CommonValidations
  extend ActiveSupport::Concern

  included do
    validates :name, :length => { :minimum => 2 }, :presence => true, :uniqueness => true
    validates :name_seo, :length => { :minimum => 2 }, :presence => true, :uniqueness => true
  end
end 
```

然后在你的模型中：

```
class Post < ActiveRecord::Base
  include CommonValidations

  ...
end 
```

我在这里使用[ActiveSupport::Concern](http://api.rubyonrails.org/classes/ActiveSupport/Concern.html)来使代码更清晰一些。

# ruby-on-rails - 如何将设计设置为需要填充电子邮件或用户名之一以进行保存？

> ID：11372486
> 
> 赞同：0
> 
> 时间：2012-07-07T05:20:03.897
> 
> 标签：ruby-on-rails, login, devise

我跟着这个：[https ://github.com/plataformatec/devise/wiki/How-To:-Allow-users-to-sign-in-using-their-username-or-email-address](https://github.com/plataformatec/devise/wiki/How-To:-Allow-users-to-sign-in-using-their-username-or-email-address)

哪个有效。所以现在我可以使用 :username 和 :password 或 :email 和 :password 登录。

但是，当我在控制台中创建帐户时，如果我将电子邮件留空，则会收到验证错误。显然电子邮件仍然需要创建用户。

我希望能够仅使用 :username 和 :password 或 :email 和 :password 创建用户。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T11:40:03.973

请尝试将以下内容添加到您的用户模型中：

```
def email_required?
  false
end 
```

您可能还需要创建一个迁移，它允许用户表上的电子邮件列为空（如果它不是允许为空的列）：

```
change_column :users, :email, :string, :null => true 
```

**编辑**：

您剩下要做的就是确保至少存在用户名或电子邮件。您可以通过设置以下验证语句来做到这一点：

```
validate :username_or_email_is_present

def username_or_email_is_present
  if self.username.blank && self.email.blank?
    errors.add(:base, "Email or Username must be set")
  end
end 
```

# c++ - 回调函数设计 C++

> ID：11372487
> 
> 赞同：1
> 
> 时间：2012-07-07T05:20:09.790
> 
> 标签：c++, visual-c++

我正在尝试实现一个回调管理器，它可以注册和执行来自不同类的回调，每个类都来自不同的 DLL。

这些类中的每一个都派生自一个公共基类。我知道单个类如何使用如下模板类来注册和调用自己的函数，但是如何将其应用于共享同一个回调管理器的多个类？

任何帮助将不胜感激。

```
file: callbacktemplate.h
------------------------
#include <functional>
#include <string>
template <class cInstance>
class cCallBackManager
{
private:
    typedef void (cInstance::*tFunction)();
    typedef std::map<std::string, tFunction> funcMap;
     funcMap i_funcMap;
public:
    void SetFunPointer(std::string funcName, tFunction function)
    {
        i_funcMap.insert(std::pair<std::string, tFunction>(funcName, function));            
    }

    void GetFunPointer(cInstance& obj) //how to call this without knowing the type?
    {
        for (funcMap::iterator it = i_funcMap.begin();it!=i_funcMap.end(); ++it)
        {
            (obj.*(it->second))(); 
        }
    }
};

file:example.h
---------------
#include "callbacktemplate.h"
class A: public base
{
private:
    cCallBackManager<A> callback;
public:
     A()
     {
         callback.SetFunPointer<A>("eventA", &A::testcallback);
         callback.GetFunPointer(&this);   //how to generalize this so this can be called from the callback manager with the class object?
     };
     ~A(){};
     void testCallback();
};

class B: public base
{
private:
    cCallBackManager<B> callback;
public:
     B()
     {
         callback.SetFunPointer<B>("eventB", &B::testcallback);
     };
     ~B(){};
     void testCallback();
};

file: main.cpp
------------------
#include "derived.h"

int main()
{
 A a;
 B b;
 //create a callback manager to execute the callback?
 callbackmgr.execute() //execute all the callback

 return 0;
} 
```

如果不使用模板化回调管理器，我该如何实现 SetFunPointer(EVENT_NAME, (Base Class)A::testCallback)？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T03:44:27.580

多谢你们。我已经设法用你的“指针”想出了一些东西。:)

文件：cCallBackInterface.h

```
template<class cClass>
class cCallBackInterface
{
public:
cCallBackInterface(){};
~cCallBackInterface(){};

typedef void (cClass::*Function)();

cCallBackInterface(cClass* obj, Function _Function)
{
    cInstance = obj;
    m_Function = _Function;
}

void execute()
{
     (cInstance->*m_Function)();
}

private:
cClass* cInstance;
Function m_Function;
}; 
```

文件：base.h

```
class BaseModel;
typedef cCallBackInterface<BaseModel> CallBackInterface;
typedef void(BaseModel::*basefn)();

class BaseModel 
{
public:
BaseModel(){};
~BaseModel(){};

}
};

class derived : public BaseModel
{
public:
derived(){};
~derived(){};

void dosomething()
{
    cout << "derived class is doing something." << endl;
}

}; 
```

文件：main.cpp

```
int main()
{  
derived a;

std::vector<CallBackInterface> callback;

callback.push_back(CallBackInterface(&a, (basefn)(&derived::Adosomething)));

for(int i = 0; i < callback.size(); i++)
    callback[i].execute();

return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T11:15:03.537

您可以查看有关[使用成员函数指针的](https://stackoverflow.com/q/3957348/15161)问题。

它归结为您需要实例以及 mem-func 指针，您不能在任何地方使用通用的。

# java - HtmlUnit submitbuttonClick 不起作用，它适用于我的 apache tomcat 而不是客户端

> ID：11372488
> 
> 赞同：1
> 
> 时间：2012-07-07T05:20:09.840
> 
> 标签：java, button, htmlunit

它对我来说很好，但是当我尝试在客户端服务器上运行它时，它没有单击按钮。如果它比我不知道会发生什么点击它不会重定向到第二页。我得到的是同一页而不是第二页，我在循环中单击它大约 10 次，但它不起作用它在我的系统中非常好用。请帮我解决这个问题..我对此很困惑。不知道出了什么问题..如果代码错误，它将不会在我的系统中运行，但它可以完美运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T05:25:25.623

如果您使用的是`click()`方法，这不会影响当前`HtmlPage`对象，但会返回`HtmlPage`. 您需要将新实例分配给现有`HtmlPage`引用：

```
page = button.click(); 
```

或将其分配给新的参考：

```
HtmlPage page2 = button.click(); 
```

# facebook - 如何通过 api 删除 Facebook 页面标签

> ID：11372492
> 
> 赞同：1
> 
> 时间：2012-07-07T05:20:48.837
> 
> 标签：facebook, facebook-graph-api

几个小时以来，我一直在努力解决这个问题……而且似乎无法通过 api 删除 facebook 页面选项卡。使用的访问令牌具有以下所有权限“offline_access,publish_stream,manage_pages,publish_actions”

我试着打电话

```
https://graph.facebook.com/[page id]/tabs/app_[app_id]?method=delete&access_token=[access token] 
```

回应是

```
{
   "error": {
      "message": "(#210) Subject must be a page.",
      "type": "OAuthException",
      "code": 210
   }
} 
```

* * *

如果我使用 facebook 图形资源管理器

```
http://developers.facebook.com/tools/explorer 
```

响应是选项卡对象 json... 不会删除

* * *

如果我做 javascript api 调用

```
 FB.api(**pageid/tabs/app_1234**, 'delete', {access_token: **My Access tocken**}  ,function(response) {
            alert(response);
        }); 
```

响应是**(#210) 主题必须是一个页面。**

* * *

我已经读过，如果你包含完整的 pagid/tabs/tabid 那么它会变成 /paigeid/tabs/pagaid/tabs/tabid 所以我试过了

```
 FB.api(**app_1234**, 'delete', {access_token: **My Access tocken**}  ,function(response) {
            alert(response);
        }); 
```

回应是

```
(#803) Some of the aliases you requested do not exist: app_XXXXXXXXXXXX 
```

* * *

如果我使用 C# facebook 客户端

```
fc.Delete( "pageid/tabs/tabid") 
```

结果又是

```
 (#210) Subject must be a page. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T05:29:47.663

错误消息似乎令人困惑。我过去也遇到过这个问题。

您没有使用正确的 access_token。使用 access_token 作为页面。

# android - 如何在调试中查看活动堆栈？

> ID：11372494
> 
> 赞同：8
> 
> 时间：2012-07-07T05:21:08.917
> 
> 标签：android, activity-stack

*我有一个问题，我的一项活动在我认为*我完成后弹出。

有没有办法查看活动的堆栈？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-07T07:35:46.987

1-您可以 `Hierarchy Viewer`在`Eclipse`.You 中使用。您可以看到所有连接的设备和模拟器以及`activity stack`. 此外，在树视图中，您可以看到有关视图本身的更多信息：
![在此处输入图像描述](../Images/15f84dbb1c4f569f91bce96d30483547.png)

2-从 中`command line`，您可以使用：`adb shell dumpsys activity`。这要求活动管理器打印其当前状态的转储。第一部分是按任务组织的完整活动历史记录。
你可以看到更多细节[`here`](https://stackoverflow.com/questions/2442713/view-the-tasks-activity-stack)。

# extjs4 - Treenode 到 GridView

> ID：11372505
> 
> 赞同：0
> 
> 时间：2012-07-07T05:23:08.253
> 
> 标签：extjs4, draggable, drag, treenode, gridpanel

ExtJS4

我正在尝试将树节点移动到网格面板。我希望将其关联数据插入此处。但是每当我移动树节点时，它都会在该位置创建一个空行。我将树创建为：

```
 var treeData = {
        text: 'Business Processes',
        children:[
            {text: 'Process7', lob: 'Lob7', leaf:true},
            {text: 'Process8', lob: 'Lob8', leaf:true},
            {text: 'Process9', lob: 'Lob9', leaf:true},
            {text: 'Process10', lob: 'Lob10', leaf:true},
            {text: 'Process11', lob: 'Lob11', leaf:true},
            {text: 'Process12', lob: 'Lob12', leaf:true}
        ]
    };
    bpTreeStore = Ext.create('Ext.data.TreeStore',{});
    bpTreeStore.setRootNode(treeData);

    new Ext.TreePanel({
        id:'businessProcessTree',
        store : bpTreeStore,
        viewConfig: {
            plugins:{
                ptype: 'treeviewdragdrop',
                dropGroup: 'dragGroup',
                dragGroup: 'dragGroup',
                dragText: 'Place the node to grid'
              }
        }
    }); 
```

和网格一样

```
Ext.define('BusinessProcessStoreModel',{
extend:'Ext.data.Model',
fields: [
{ name:'businessProcessName', type:'string' },
{ name:'businessProcessLob', type:'string' }
]
});
bpMappingStore = Ext.create('Ext.data.ArrayStore', {
        model:'BusinessProcessStoreModel',
        data:[
            ['Process1', 'Lob1'],
            ['Process2', 'Lob2'],
            ['Process3', 'Lob3']
        ]
    });
var bpMappingGrid = Ext.create('Ext.grid.Panel',{
        id:'bpGridPanel',
        region:'center',
        frame:true,
        layout:'fit',
        height:300,
        columns:[
        { header:'Process Name', dataIndex:'businessProcessName' },
        { header:'Process Lob', dataIndex:'businessProcessLob' }
        ],
        store:bpMappingStore,
        viewConfig: {
            plugins:{
                ptype: 'gridviewdragdrop',
                dropGroup: 'dragGroup',
                dragGroup: 'dragGroup',
                dragText: 'Place the node to grid'
              },
            listeners: {
                drop: function(node, data, overModel, dropPosition)
                {
                    var position = (dropPosition=='after'?overModel.index + 1: overModel.index -1);
                    Ext.getCmp('bpGridPanel').store.insert(position, [[data.records[0].data.text, 'LOB']]);
 //data.records[0].data.lob is undefined don't know why

                }
            }
        }
    }); 
```

请告诉我如何引用要插入到网格面板的两列中的树节点的“文本”和“lob”。

在这里我创建了我自己的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T07:57:08.570

我解决了这个问题。确保被拖动的 Treenode 必须包含网格正在使用的模型中的属性。

这里，treedata 可以定义为

```
var treeData = {
        text: 'Business Processes',
        children:[
            {text: 'Process7', businessProcessName: 'Process7', businessProcessLob: 'Lob7', leaf:true},
            {text: 'Process8', businessProcessName: 'Process8', businessProcessLob: 'Lob8', leaf:true},
            {text: 'Process9', businessProcessName: 'Process9', businessProcessLob: 'Lob9', leaf:true},
            {text: 'Process10',businessProcessName: 'Process10', businessProcessLob: 'Lob10', leaf:true},
            {text: 'Process11', businessProcessName: 'Process11', businessProcessLob: 'Lob11', leaf:true},
            {text: 'Process12', businessProcessName: 'Process12', businessProcessLob: 'Lob12', leaf:true}
        ]
    };
    this.bpTreeStore = Ext.create('Ext.data.TreeStore',{root: this.treeData}); 
```

但是当我们将这个 treedata 对象分配给 treestore 时。它删除了新属性（businessProcessName 和 businessProcessLob）。

所以要添加它们，可以运行一个循环。

```
for(var index in treeData.children)
{
    this.bpTreeStore.tree.root.childNodes[index].data.businessProcessName = treeData.children[index].businessProcessName;
    this.bpTreeStore.tree.root.childNodes[index].data.businessProcessLob = treeData.children[index].businessProcessLob;
} 
```

在此之后，拖动工作正常:)

# java - 在 Java 中反转字符串时出错

> ID：11372512
> 
> 赞同：-3
> 
> 时间：2012-07-07T05:24:30.420
> 
> 标签：java, string, reversing

我想反转一个字符串，我知道有成千上万的例子，但我想自己完成这项工作，我创建了这个，但它不能正常工作。

```
 public String ReverseString(String str){
        str = str.toLowerCase();

        char normalArr[] = str.toCharArray();
        char reversedArr[] = new char[str.length()];

        for (int i=str.length()-1; i<=0; i--){
            int count = 0;
            reversedArr[count] = normalArr[i];
            count++;
        }

        String retValue = new String(reversedArr);
        return retValue;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T05:27:23.587

看看你的循环的条件 - 它应该是`i >= 0`
另外 - 你的解决方案分配了一个不必要的数组（有些算法用一个数组执行这个，而不是你的） - 我认为你应该努力编写你的程序以使用很棒的表演。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-07T05:28:29.717

除了@zaskes 回答之外，您还需要`int count = 0;`在循环之前，而不是在里面。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-07T06:20:50.083

这是一个执行相反逻辑的实现：

```
StringBuffer reversed = new StringBuffer(str.length());
int loc = str.length();
while (loc > 0) {
  char c1 = str.charAt(--loc);
  if (Character.isLowSurrogate(c1)) {
    assert loc >= 0;
    char c2 = str.charAt(--loc);
    reversed.append(c2);
  }
  reversed.append(c1);
}
return reversed.toString(); 
```

如果您考虑使用`StringBuffer`for simple appends 作弊，您可以将其替换为：

```
char[] reversed = new char[str.length()];
int next = 0;
...
reversed[next++] = c1; // instead of .append(c1) 
```

# c++ - 如何一般有效地填充缓冲区？（通过插入迭代器？容器？等）

> ID：11372516
> 
> 赞同：1
> 
> 时间：2012-07-07T05:25:26.360
> 
> 标签：c++, stl, iterator, buffer

如果我正在创建一个需要填充缓冲区的方法（例如，用于 的包装器`fread`），并且在*某些*情况下（在运行时确定）它可以很好地猜测所需的缓冲区大小，我应该将什么传递给这个方法为了利用这个机会，同时仍然允许任何合理的缓冲区并且不需要用户多次调用？

*   我想*使用*一个`insert_iterator`，但我不能告诉它保留一定数量的内存。

*   另一方面，如果我将*容器*作为模板参数传递，我会遇到麻烦，因为容器没有标准接口！（例如`vector`，并且`string`有，`reserve`但又没有。或者容器可能没有——我不相信我已经看到这是强制性的。等等）`deque``list``push_back`

那么在这样的情况下，什么是合适的做法呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T05:52:10.140

您可以创建带有迭代器的非常通用的函数，然后创建一系列更专业的函数，这些函数采用各种序列容器类型（向量、列表、双端队列、字符串），并在转发到更通用的函数之前采取适当的操作，例如：

```
template<typename OutputIterator>
fill_buffer_iterator_version(OutputIterator it)
{
    // fill data through output iterator
} 

// default generic version uses back_inserter, all standard
// sequence containers support push_back
template<typename Container>
fill_buffer(Container & c)
{
    fill_buffer_iterator_version(std::back_inserter(c));
}

// specialize for vector   
fill_buffer(std::vector<char> & v)
{
    v.reserve(100);
    fill_buffer_iterator_version(std::back_inserter(v));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T05:40:15.393

您知道要读取多少字节，因此`resize`在调用之前使用方法`fread`。通过，`begin`给它。或者，在自定义（模板化）版本中，您可以传递容器（通过引用），在“文件读取”之前为其分配内存并做同样的事情。

# java - 即使使用匹配的大括号，插入 } 以完成 ClassBody 错误

> ID：11372524
> 
> 赞同：6
> 
> 时间：2012-07-07T05:27:26.923
> 
> 标签：java, android

是的。我知道这是微不足道的。但这越来越愚蠢。

证明错误的图像：

![在此处输入图像描述](../Images/7bb7536c1c8e20840072cd6488d409a3.png)

编码：

```
package apack.age;

import android.app.Activity;
import android.content.Intent;
import android.net.Uri;
import android.os.Bundle;
import android.view.View;

public class DisplayContactActivity extends Activity
{
    @Override
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.display_contact_layout);
    }

    public void openSubreddit(View view)
    {
        startActivity(new Intent(Intent.ACTION_VIEW, Uri.parse("http://www.reddit.com")));
    }

    public void openTwitter(View view)
    {
        startActivity(new Intent(Intent.ACTION_VIEW, Uri.parse("http://twitter.com")));
    }

    public void openGmail(View view)
    {
        startActivity(new Intent(Intent.ACTION_VIEW, Uri.parse("www.gmail.com")));
    }
} 
```

严重地。有 5 个开括号和 5 个闭括号。这是我第一次尝试 Android 应用程序，但我有 3 年的 Java 经验，所以这非常令人沮丧。

运行错误。刷新什么都不做。清理项目什么都不做。eclipse 中的自动代码格式（CTRL + SHIFT + F）什么都不做。

编辑 1：将代码复制到一个新类可以编译它。我正在运行新版本的 Eclipse：Juno。我已经完成了 source -> cleanup，它每次都说“没什么可改变的”！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-07T05:42:38.337

编辑：请升级到 ADT 20.0.1，此问题已得到修复。

* * *

切换到**Lint**视图，使用 Clean 按钮删除所有 lint 错误。[ADT 20 中的 lint](https://code.google.com/p/android/issues/detail?id=33985)存在一个错误，它有时会接管 Java 编译器错误。

您可以通过在“问题”视图中查看此错误的“起源”列来验证这是否真的是问题所在。通常这应该是这个错误的“Java 问题”，但它会是“Lint”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-07T05:29:54.467

尝试用 保存文件`Ctrl+S`，它有时会发生在我身上。此外，您似乎忘记在代码开头插入包名称：

```
package com.example.my_application; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-07T05:36:30.010

你的日食中必须有一个解决问题的方法。您是否尝试过处女 Eclipse 安装？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-17T04:59:01.177

以下是给遇到此问题的 Eclipse 用户的一些提示。请尝试以下方法，它为我解决了这个问题（我正在使用 IDE 的这个下载：eclipse-SDK-4.2-macosx-cocoa-x86_64.tar）：

1) mv 有问题的源 .java 文件到一个新文件。2）刷新eclipse（通过右键单击项目名称的项目）。3) mv 将新文件改回原来的名称。4）再次刷新eclipse。

这为我解决了这个问题。这与代码无关，它发生在我身上，在我的编码过程中间歇性地发生，即使在一个非常小的文件中，不容易放错任何右括号:-)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-04-01T00:04:51.527

我尝试了这里建议的一些解决方案，没有运气，然后尝试了以下，似乎不错。

我将 Java 文件移出源代码树。当然，编译错误在树的其他任何地方都会亮起。

我为该类创建了一个新的 Java 文件。我右键单击错误以生成文件。我在对话框中设置了父类。

我用临时代码修复了文件中的错误——由于父类需要构造函数。

在文本编辑器 (Notepad++) 中打开旧代码后，我逐块复制粘贴旧代码，通过右键单击错误修复导入。

它现在可以愉快地编译了。

叽。片状工具。叽。

# php - 通过 Jquery 从外部 excel 文件中获取数据而不使用 mysql

> ID：11372534
> 
> 赞同：0
> 
> 时间：2012-07-07T05:29:32.650
> 
> 标签：php, javascript, jquery, json

我有一个外部 excel 文件“my_rate.xls”，其中包含行“Sl_no”、“Item_code”、“Item-desc”、“unit”、“Item_rate”。现在我想放置一个连接外部 excel 文件的 HTML 交互式表单用 PHP. 这样任何主体点击 HTML 表单的项目，都会知道速率。

请帮助提供源代码以通过 PHP 表单获取 excel 表所需的数据。也可以使用任何 jquery / JSOnN 脚本（但我不是 MYSQL）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T05:46:14.980

您可以通过 odbc 读取 excel 文件，就好像它们是数据库一样： http: [//docstore.mik.ua/orelly/webprog/php/ch15_04.htm](http://docstore.mik.ua/orelly/webprog/php/ch15_04.htm)

[http://ca2.php.net/manual/en/book.uodbc.php](http://ca2.php.net/manual/en/book.uodbc.php)

谷歌在如何做到这一点上有许多其他的成功。所需的驱动程序可能存在特定于平台的问题，但是......

# java - 一个应用程序中的多个选项卡活动

> ID：11372536
> 
> 赞同：0
> 
> 时间：2012-07-07T05:29:38.897
> 
> 标签：java, android, tabs, tabactivity

例如，请参阅以下[教程](http://www.androidhive.info/2011/08/android-tab-layout-tutorial/)，了解我的选项卡最初是如何设置的。

我想要另一个 TabActivity，而不是在其中一个选项卡上运行正常活动。所以我想要做的是在 TabActivity 中运行 TabActivity。我认为问题在于ID的冲突。我试图通过更改辅助活动的 xml 文件上的 ID 并在活动中手动调用这些 ID 来解决此问题，但没有运气。

我一直在寻找解决这个问题的几个小时，但一无所获。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T11:31:34.593

一个应用程序的多个选项卡活动是可能的。

例如：应用程序包含一个带有两个选项卡的 Launcher TabActivity (HomeTabActivity)：选项卡 1 和选项卡 2

```
Tab 1 can be a TabActivity with two or more tabs.
Tab 2 can be a TabActivity with two or more tabs. 

FirstTab, SecondTab, ThirdTab and FourthTab are simple activities actings as child for child of HomeTabActivity.

xml files containing TabHost as parent element
1\. hometab.xml
2\. tab1.xml
3\. tab2.xml

To differentiate between HomeTabActivity and Its child TabActivities i.e Tab1 and Tab2 
I have put TabWidget at top for HomeTabActivity and at bottom for Tab1 and Tab2. 
```

**HomeTabActivity（第一个主选项卡活动）：**

```
public class HomeTabActivity extends TabActivity 
{
    private TabHost mTabHost = null;
    private Intent mIntent = null;
    private TabHost.TabSpec mTabSpec = null;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.hometab); 
        initializeTabs();
    }

    private void initializeTabs() {
        mTabHost = getTabHost();

        mIntent = new Intent().setClass(this, Tab1.class);
        mTabSpec = mTabHost
                .newTabSpec("Tab1")
                .setIndicator("Tab1",
                        getResources().getDrawable(R.drawable.ic_launcher))
                .setContent(mIntent);
        mTabHost.addTab(mTabSpec);

        mIntent = new Intent().setClass(this, Tab2.class);
        mTabSpec = mTabHost
                .newTabSpec("Tab2")
                .setIndicator("Tab2",
                        getResources().getDrawable(R.drawable.ic_launcher))
                .setContent(mIntent);
        mTabHost.addTab(mTabSpec);

        mTabHost.setCurrentTab(0);
    }

} 
```

**Tab1（嵌入在 HomeTabActivity 中的 TabActivity）：**

```
public class Tab1 extends TabActivity 
{
    private TabHost mTabHost = null;
    private Intent mIntent = null;
    private TabHost.TabSpec mTabSpec = null;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.tab1);
        initializeTabs();
    }

    private void initializeTabs() {
        mTabHost = getTabHost();
        mIntent = new Intent().setClass(this, FirstTab.class);

        mTabSpec = mTabHost
                .newTabSpec("Tab1 Child 1")
                .setIndicator("Tab1 Child 1",
                        getResources().getDrawable(R.drawable.ic_launcher))
                .setContent(mIntent);
        mTabHost.addTab(mTabSpec);

        mIntent = new Intent().setClass(this, SecondTab.class);
        mTabSpec = mTabHost
                .newTabSpec("Tab1 Child 2")
                .setIndicator("Tab1 Child 2",
                        getResources().getDrawable(R.drawable.ic_launcher))
                .setContent(mIntent);
        mTabHost.addTab(mTabSpec);
        mTabHost.setCurrentTab(0);
    }
} 
```

**Tab2（嵌入在 HomeTabActivity 中的另一个 TabActivity）：**

```
public class Tab2 extends TabActivity 
{
    private TabHost mTabHost = null;
    private Intent mIntent = null;
    private TabHost.TabSpec mTabSpec = null;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.tab2);
        initializeTabs();
    }

    private void initializeTabs() {
        mTabHost = getTabHost();
        mIntent = new Intent().setClass(this, ThirdTab.class);

        mTabSpec = mTabHost
                .newTabSpec("Tab2 Child 1")
                .setIndicator("Tab2 Child 1",
                        getResources().getDrawable(R.drawable.ic_launcher))
                .setContent(mIntent);
        mTabHost.addTab(mTabSpec);

        mIntent = new Intent().setClass(this, FourthTab.class);
        mTabSpec = mTabHost
                .newTabSpec("Tab2 Child 2")
                .setIndicator("Tab2 Child 2",
                        getResources().getDrawable(R.drawable.ic_launcher))
                .setContent(mIntent);
        mTabHost.addTab(mTabSpec);
        mTabHost.setCurrentTab(1);
    }
} 
```

**主页选项卡.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<TabHost xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@android:id/tabhost"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:orientation="vertical" >

        <TabWidget
            android:id="@android:id/tabs"
            android:layout_width="match_parent"
            android:layout_height="wrap_content" >
        </TabWidget>

        <FrameLayout
            android:id="@android:id/tabcontent"
            android:layout_width="match_parent"
            android:layout_height="match_parent" >
        </FrameLayout>
    </LinearLayout>

</TabHost> 
```

**tab1.xml 和 tab2.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<TabHost xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@android:id/tabhost"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:orientation="vertical" >

        <FrameLayout
            android:id="@android:id/tabcontent"
            android:layout_width="match_parent"
            android:layout_height="match_parent" 
            android:background="@color/androidblue"
            android:layout_weight="1">
        </FrameLayout>

        <TabWidget
            android:id="@android:id/tabs"
            android:layout_width="match_parent"
            android:layout_height="wrap_content" 
            android:layout_weight="0">
        </TabWidget>
    </LinearLayout>

</TabHost> 
```

# f# - 用 F# 绘制图表不包含 Seq？

> ID：11372538
> 
> 赞同：2
> 
> 时间：2012-07-07T05:29:46.687
> 
> 标签：f#, charts, f#-interactive

从关于绘制条形图和柱形图的[Real-World Functional Programming 博客](http://msdn.microsoft.com/en-us/library/hh297095)继此之后，我试图为我的数据绘制一个直方图，该直方图以惰性序列存储在一组元组 (data_value, frequency) 中。

除非我将序列转换为列表，否则它不起作用，错误消息是序列“ `the IEnumerable 'T does not support the Reset function`”的情况。有没有办法使用 .NET 库从延迟评估的序列中生成直方图/图表等？

另外（好的新手查询警报），当程序从控制台运行时，有什么方法可以使图表保持不变？通常`System.Console.ReadKey() |> ignore`会使图表窗口挂起，否则它会立即消失。到目前为止，我一直在使用“Send to Interactive”查看结果。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-07T10:09:46.967

问题是使用 F# 序列表达式表示法生成的序列（类型为`seq<T>`，这只是 的别名`IEnumerable<T>`）不支持该`Reset`方法。图表库需要该方法（因为每次重绘屏幕都需要获取数据）。

这意味着，例如，以下内容将不起作用：

```
seq { for x in data -> x } |> FSharpChart.Line 
```

模块中的许多标准库函数`Seq`都是使用序列表达式实现的，因此结果将不支持`Reset`. 您可以通过将数据转换为列表（使用`List.ofSeq`）或数组（使用`Array.ofSeq`）或使用列表编写代码来解决此问题：

```
[ for x in data -> x ] |> FSharpChart.Line 
```

...如果您正在使用某些功能，您可以从中获取一个`List`（并非所有`Seq`功能都可用于`List`，因此有时您需要使用转换）：

```
[ for x in data -> x ] |> List.choose op |> FSharpChart.Line 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-07T10:01:37.370

不，它不接受序列。

也就是说，不支持 seq 是有充分理由的。它与结构本身有关：seq 就是一个 seq，因此不也不***应该***支持绘制图形所需的操作。也就是说，我真的希望这个堆栈更高级并支持更多的使用风格。

所以答案是

```
|> Seq.toArray 
```

或者

```
|> Seq.toList 
```

在发送到图表库之前

# mysql - 如何将这两个查询组合成一个优化查询以避免 Select N+1

> ID：11372544
> 
> 赞同：0
> 
> 时间：2012-07-07T05:30:11.797
> 
> 标签：mysql, sql

这是一个在线照片库。我有两张桌子；“照片搜索”和“照片”。第一个，“photoSearch”，只有几列，包含照片的所有可搜索数据，例如“photoID”、“headline”、“caption”、“people”、“dateCaptured”和“keywords”。它有一个多栏全文索引（标题、标题、人物、关键字）。第二个表“照片”包含所有照片数据；高度、宽度、版权、标题、ID、日期等等。两者都有 500K+ 行，标题和标题字段有时会返回 2000+ 个字符。

这大概是查询现在的样子：（注意事项：我不能将连接与全文搜索一起使用，因此关键字存储在一列中 - 在“非规范化”表中。此外，这种伪代码作为我的应用程序代码在别处 - 但它很接近）

这个特定的查询正在循环通过并在循环内，正在执行另一个 SQL 语句......

```
 SELECT photoID FROM photoSearch
 WHERE MATCH (headline, caption, people, keywords)
 AGAINST ('"&booleanSearchStr&"' IN BOOLEAN MODE)
 AND dateCaptured BETWEEN '"&fromDate&"' AND '"&toDate&"';" 
```

这是为上述查询中的每一行执行的 SQL 语句：

```
 SELECT photoID, setID, eventID, locationID, headline, caption, instructions, dateCaptured, dateUploaded, status, uploaderID, thumbH, thumbW, previewH, previewW, + more 
 FROM photos 
 LEFT JOIN events AS e USING (eventID) 
 LEFT JOIN location AS l USING (locationID) 
 WHERE photoID = " & photoID & ";" 
```

测试时，在自己的表“photoSearch”上拥有全文索引而不是大表“photos”，似乎在一定程度上提高了速度。我没有添加“photoSearch”表，它已经存在 - 这不是我的应用程序。如果我尝试加入两个表以丢失第二个查询，我会一起丢失我的索引，从而导致很长时间 - 所以我不能使用全文连接。这似乎是最快的方法。如果不是因为全文和连接问题，我早就将这两个查询结合起来了。

是否可以将这两个查询合并为一个，以使流程更有效地运行，而不是为查询 1 中的每个结果执行查询 #2 1000 次？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T07:43:19.267

如果 Join 不起作用，请尝试子查询：

```
SELECT photoID, setID, eventID, locationID, headline, caption, instructions, dateCaptured, dateUploaded, status, uploaderID, thumbH, thumbW, previewH, previewW, + more 
FROM (
    SELECT photoID 
    FROM photoSearch
    WHERE
        MATCH (headline, caption, people, keywords)
            AGAINST ('"&booleanSearchStr&"' IN BOOLEAN MODE)
        AND dateCaptured BETWEEN '"&fromDate&"' AND '"&toDate&"';"
) as SelectedPhotos
LEFT JOIN photos USING (photoID)
LEFT JOIN events AS e USING (eventID) 
LEFT JOIN location AS l USING (locationID) 
```

或尝试找出连接不起作用的原因，我应该使用：

```
SELECT photoID, setID, eventID, locationID, headline, caption, instructions, dateCaptured, dateUploaded, status, uploaderID, thumbH, thumbW, previewH, previewW, + more 
FROM photoSearch
LEFT JOIN photos USING (photoID)
LEFT JOIN events AS e USING (eventID) 
LEFT JOIN location AS l USING (locationID)
WHERE
    MATCH (headline, caption, people, keywords)
        AGAINST ('"&booleanSearchStr&"' IN BOOLEAN MODE)
    AND dateCaptured BETWEEN '"&fromDate&"' AND '"&toDate&"';" 
```

# java - PrintStream 与 PrintWriter

> ID：11372546
> 
> 赞同：29
> 
> 时间：2012-07-07T05:30:42.983
> 
> 标签：java

我搜索了该站点并找到了一些答案，但我无法理解这两个类之间的区别。有人可以解释这两个类之间的区别吗？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-07-07T06:09:07.393

`PrintStream`是处理编码字符和其他数据类型的原始桥梁。如果您查看 javadoc，`java.io.OutputStream`您将看到仅用于编写两种不同数据类型的方法：`byte`和`int`.

在 JDK (1.0.x) 的早期版本中，当您想要写入字符时，您可以执行以下两种操作之一，将字节写入输出流（假定在系统默认字符集中）：

```
outputStream.write("foobar".getBytes()); 
```

或将另一个包装`outputStream`在`PrintStream`：

```
PrintStream printStream = new PrintStream(outputStream);
printStream.write("foobar"); 
```

看到不同？ `PrintStream`正在处理字符到字节的转换以及编码（上面的构造函数调用使用系统默认编码，但您可以将其作为参数传递）。它还提供了方便的书写方法`double`，`boolean`等等......

事实上`System.out`和`System.err`被定义为`PrintStream`实例。

JDK 1.1 随之而来，他们意识到他们需要一种更好的方法来处理纯字符数据，因为`PrintStream`仍然有基于字节的写入方法。所以他们引入了`Writer`抽象类来严格处理`char`,`String`和`int`数据。

`PrintWriter`为其他类型添加方法，如`double`,`boolean`等...

现在`PrintWriter`也有格式打印等的`format()`/方法...`printf()`

作为一般规则，如果您正在编写字符数据，请使用`Writer`实例。如果您正在编写二进制（或混合）数据使用`OutputStream`实例。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-07-07T05:46:45.497

来自[PrintWriter 的 Javadoc](http://docs.oracle.com/javase/6/docs/api/java/io/PrintWriter.html)：

> 将对象的格式化表示打印到文本输出流。此类实现了 PrintStream 中的所有打印方法。它不包含写入原始字节的方法，程序应该使用未编码的字节流。

可以这样想： a`PrintStream`位于 some 之上`OutputStream`。由于输出流处理的是字节而不是字符，因此 PrintStream*必须*负责将字符编码为字节。OutputStream“仅仅”将字节写入文件/控制台/套接字。

另一方面， A`PrintWriter`位于 a 之上`Writer`。由于 Writer 负责将字符编码为字节，因此 PrintWriter 不进行编码。我只知道换行符等。（是的，PrintWriters 确实有带`File`s 和`OutputStream`s 的构造函数，但这些只是方便。例如，[`PrintWriter(OutputStream)`](http://docs.oracle.com/javase/6/docs/api/java/io/PrintWriter.html#PrintWriter%28java.io.OutputStream%29).

> 从现有的 OutputStream 创建一个新的 PrintWriter，而不自动刷新行。这个方便的构造函数创建了必要的中间 OutputStreamWriter，它将使用默认字符编码将字符转换为字节。

顺便说一句，如果您认为s`PrintWriter`真的没有太多实用程序，请记住 PrintWriter 和 PrintStream 都`IOException`从打印逻辑中吸收 s 。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-03-20T12:23:47.553

添加马特的答案：

我比较`PrintStream`了`PrintWriter`最有用的部分，构造函数和*print()、println()、printf()/format()*函数都被这两个类所支持。*`ClassName`*`(String fileName, String charsetName)`

 *区别在于：

因为`JDK1.0`vs`JDK1.1`

构造函数：

```
PrintStream(OutputStream out, boolean autoFlush, String charsetName)
PrintWriter(Writer wr)
PrintWriter(Writer wr, boolean autoFlush) 
```

`FilterOutputStream`从/ `OutputStream`vs继承的方法`Writer`，差异归结为`byte`vs `char`：

```
PrintStream.write(byte[] buffer, int offset, int count)
PrintStream.write(byte[] buffer)
PrintStream.write(int oneByte)

PrintWriter.write(int oneChar)
PrintWriter.write(char[] buf)
PrintWriter.write(char[] buf, int offset, int count)
PrintWriter.write(String str)
PrintWriter.write(String str, int offset, int count) 
```

`PrintStream.printf()`对应于`PrintWriter.format()`

它确实看起来像在 1.1 中。他们想出了一个更好的类，但不能在不破坏现有程序的情况下删除旧的 1.0 类。*

# android - 如何在下拉事件中显示按钮？

> ID：11372557
> 
> 赞同：0
> 
> 时间：2012-07-07T05:32:58.267
> 
> 标签：android, jquery, cordova, drop-down-menu, textbox

海，我有一个按钮和下拉菜单。当我更改下拉菜单时，我隐藏了按钮，它工作正常。在我想显示按钮之后发生事件。如何执行此操作。

一旦我隐藏我无法查看按钮。我只需要隐藏下拉更改功能，其他时候我想显示按钮。

**代码**

```
<html>
<head>
 <script src="http://code.jquery.com/jquery-latest.js"></script>
  <script src="http://code.jquery.com/jquery-1.7.2.js"></script>
</head>
<script type="text/javascript">
$(document).ready(function() {
    $("select").change(function(){
$("#myHeader").hide();
    });
});
</script>
<body>

<select id="header">
    <option value="1">1</option>
    <option value="2">2</option>
    <option value="3">3</option>
</select>
<input type="button"  id="myHeader" style="width:20%;background-color:blue" />
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T05:44:01.440

如下更改您的脚本，它将创建切换类型事件

```
<script type="text/javascript">
    $(document).ready(function () {
        $("select").change(function () {
            ($("#myHeader").is(":visible")) ? $("#myHeader").hide() : $("#myHeader").show();
        });
    });
</script> 
```

让我知道您正在寻找这种类型的功能的天气？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T05:45:31.010

那时您不应该使用`.change()`，您的问题/代码令人困惑。我想这就是你要找的：

```
 $(document).ready(function() {

     $("select").focus(function(){
         $("#myHeader").hide();
     });

     $("select").blur(function(){
         $("#myHeader").show();
     });

 }); 
```

查看此[演示](http://jsfiddle.net/yRmH8/1/)并让我知道它是否是您要查找的内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-07T06:18:53.330

试试这个：

```
$("select").focus(function(){
     $("#myHeader").hide();
});

 $("select").blur(function(){
     $("#myHeader").show();
});

$("select").change(function(){
     $(this).trigger('blur');
}); 
```

[演示](http://jsfiddle.net/TjZSu/)

# silverlight - 方向改变时保持相同的布局

> ID：11372559
> 
> 赞同：4
> 
> 时间：2012-07-07T05:33:39.440
> 
> 标签：silverlight, windows-phone-7, layout, autorotate

我有一个 Silverlight 页面，我希望在纵向和横向模式下具有以下外观。本质上，三个图像排列在一个网格中。大图像跨越两列。当手机旋转时，图像会旋转，但整体布局不会。小图像保持靠近后退/窗口/搜索按钮，大图像保持在手机顶部。

![在此处输入图像描述](../Images/5692a642ceca2f76413a5b5c3bddadea.png)

我尝试了多种方法来达到这种效果，但都以某种方式证明了它们并不令人满意。我希望有人能指出我遗漏的东西，或者至少可以防止其他人不得不浪费 4 或 5 天时间得出与我相同的结论。 **粗体问题：**

*   我尝试的第一件事是将 RotateTransform 应用于 LayoutRoot 元素，并在手机旋转变为横向时将其旋转 -90 度。我不得不将布局根的高度和宽度硬编码为 800 和 400 而不是“自动”，否则它会被压扁。该解决方案几乎可以工作，但在绘制页面后会应用 RotateTransform。因为它在 800x400 屏幕上绘制为 400x800 图像，所以不会绘制顶部 200 和底部 200 像素。这在它旋转并且（现在）左右部分丢失后变得很明显。 **有没有办法强制布局引擎画出屏幕，以便在应用 RotateTransform 后所有像素都在那里？**

*   我考虑的下一件事（但没有尝试）是将页面 SupportedOrientations 设置为“PortraitOnly”，然后使用加速度计生成我自己的“OnOrientationChanged”事件，然后当手机倾斜到横向时有选择地将图像旋转 90 度. 我认为这是一个坏主意，因为当我的应用程序中的旋转方式与其他所有应用程序中的旋转方式不同时，我可能会以某种微妙的方式弄错，从而导致混乱。 **有没有办法在不自动更新包含我的元素的网格布局的情况下触发 OnOrientationChanged 事件？或者，是否有其他可用于检测手机方向的钩子？**

*   我尝试的最后一件事与此处提供的建议类似：[Windows Phone 7 applications - Orientation Change](https://stackoverflow.com/questions/3934811/windows-phone-7-applications-orientation-change)和此处：http: [//blogs.msdn.com/b/ptorr/archive/2010/03/27/strategies-for-dealing -with-orientation-changes.aspx](http://blogs.msdn.com/b/ptorr/archive/2010/03/27/strategies-for-dealing-with-orientation-changes.aspx)。这个解决方案对我来说似乎有点脆弱，因为它迫使我在 OnOrientationChanged 事件处理程序以及 xaml 代码中更改网格行和列的相对大小。在纵向模式下，第一行设置为 5*，第二行设置为 2*。然后当我切换到横向时，每行需要设置为 1*，列需要分别设置为 5* 和 2*。或者，我可以硬编码小图像的大小并将行和列设置为自动，但我仍然坚持硬编码。**由于我已经用尽了所有其他选择，我认为这是我坚持的解决方案。**

我错过了什么，还是这样做的方式？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T06:54:29.163

你真的不需要硬编码任何东西。你需要的是巧妙的设计。要开发具有多方向支持的优秀应用程序，您应该想出一个巧妙的网格布局，它可以让您以您想要的方式重新定位对象而不会造成混乱。

根据您的情况考虑布局：

```
 <Grid x:Name="LayoutRoot" Background="Transparent">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="3.5*" />
            <ColumnDefinition Width="1.5*" />
            <ColumnDefinition Width="2*" />
        </Grid.ColumnDefinitions>
        <Grid.RowDefinitions>
            <RowDefinition Height="2.5*"/>
            <RowDefinition Height="1.5*" />
            <RowDefinition Height="1.5*" />
            <RowDefinition Height="2*"/>
        </Grid.RowDefinitions>

        <!--TitlePanel contains the name of the application and page title-->
        <StackPanel x:Name="TitlePanel" Margin="12,17,0,28" Grid.ColumnSpan="3" Grid.RowSpan="3"></StackPanel>
        <Image Name="bigSmiley" Margin="8" Grid.RowSpan="3" Grid.ColumnSpan="3" Source="big.jpg"
               Stretch="Fill"/>
        <Image Name="smallSmiley1" Grid.Row="3" Source="smiley.jpg" Stretch="Fill" Margin="8"/>
        <Image Name="smallSmiley2" Grid.Row="3" Grid.Column="1"
               Source="smiley.jpg" Stretch="Fill" Margin="8"
               Grid.ColumnSpan="2" />
        <!--ContentPanel - place additional content here-->
    </Grid> 
```

![布局](../Images/3d6709103ce097976f41c7328a3d78e1.png)

你的方向改变方法应该是这样的：

```
private void PhoneApplicationPage_OrientationChanged(object sender, OrientationChangedEventArgs e)
        {
            if ((e.Orientation & PageOrientation.Portrait) == PageOrientation.Portrait)
            {
                Grid.SetRow(bigSmiley, 0);
                Grid.SetColumn(bigSmiley, 0);
                Grid.SetColumnSpan(bigSmiley, 3);
                Grid.SetRowSpan(bigSmiley, 3);
                Grid.SetRow(smallSmiley1, 3);
                Grid.SetColumn(smallSmiley1, 0);
                Grid.SetColumnSpan(smallSmiley1, 1);
                Grid.SetRowSpan(smallSmiley1, 1);
                Grid.SetRow(smallSmiley2, 3);
                Grid.SetColumn(smallSmiley2, 1);
                Grid.SetColumnSpan(smallSmiley2, 2);
                Grid.SetRowSpan(smallSmiley2, 1);
            }
            else
            {
                Grid.SetRow(bigSmiley, 0);
                Grid.SetColumn(bigSmiley, 0);
                Grid.SetColumnSpan(bigSmiley, 2);
                Grid.SetRowSpan(bigSmiley, 4);
                Grid.SetRow(smallSmiley1, 0);
                Grid.SetColumn(smallSmiley1, 2);
                Grid.SetColumnSpan(smallSmiley1, 1);
                Grid.SetRowSpan(smallSmiley1, 2);
                Grid.SetRow(smallSmiley2, 2);
                Grid.SetColumn(smallSmiley2, 2);
                Grid.SetColumnSpan(smallSmiley2, 1);
                Grid.SetRowSpan(smallSmiley2, 2);
            }
        } 
```

结果： ![结果](../Images/89610875e3af30c1a0c0f08db12d7f67.png)

我希望这能解决你的问题。请记住，总有更好的设计可以解决您的问题！:)

# android - 视频意图未将视频保存到所需位置

> ID：11372565
> 
> 赞同：4
> 
> 时间：2012-07-07T05:35:43.710
> 
> 标签：android, android-intent

我已经实现了将捕获的视频保存到自定义位置的代码。

```
// Constants
final static int REQUEST_VIDEO_CAPTURED = 1;
String CAPTURE_TITLE="MyVideo.3gp";

// Specified the desired location here 
File file = new File(Environment.getExternalStorageDirectory() + "/DCIM", CAPTURE_TITLE);
Uri outputFileUri = Uri.fromFile( file ); 

Intent intent = new Intent(android.provider.MediaStore.ACTION_VIDEO_CAPTURE);
intent.putExtra(android.provider.MediaStore.EXTRA_OUTPUT, outputFileUri);
startActivityForResult(intent, REQUEST_VIDEO_CAPTURED); 
```

现在在活动结果上，我只获得默认路径，而不是我打算保存视频的所需路径。

```
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data)
{
       if (resultCode == RESULT_OK)
    {
          Uri capturedImageUri = data.getData();
          Toast.makeText(this, capturedImageUri .getPath(), TOAST.LENGTH_LONG).show();     
        }
    } 
```

现在我不知道为什么它没有将其保存到所需的位置，类似于我尝试使用图像捕获并且它有效。

我还添加了所需的权限。

有什么想法吗！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T05:43:43.553

```
File file = new File(Environment.getExternalStorageDirectory() + "/DCIM", CAPTURE_TITLE); 
```

改成：

```
File file = new File(Environment.getExternalStorageDirectory() + "/DCIM/", CAPTURE_TITLE); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-06T19:33:04.563

试试这个...

```
File file = new File(Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_DCIM)), CAPTURE_TITLE); 
```

# jquery-ui - 这个 Jquery UI 里面有什么？

> ID：11372568
> 
> 赞同：1
> 
> 时间：2012-07-07T05:36:16.537
> 
> 标签：jquery-ui

这是演示幻灯片：http://www.pixedelic.com/plugins/camera/。最后两个图像之间的转换，它使图片变成一个网格并一张一张地动画。如何做到这一点？

我的想法是，当发生变换时，它会创建许多 div 元素，每个 div 将使用相同的背景图像，并使用背景位置，使每个 div 呈现该图像的不同区域，这样看起来就像图像被拆成一个格子。只需在 jQuery 中使用 .animate() 使其具有动画效果或一些 CSS3 效果，例如旋转或缩放以生成幻灯片效果。

我不知道，我的想法是否正确？有谁知道这种效果背后的机制？

# sql - 难以为日期格式输入正确的脚本

> ID：11372570
> 
> 赞同：0
> 
> 时间：2012-07-07T05:36:35.520
> 
> 标签：sql, sql-server, sql-server-2008

这是我的查询

```
SELECT Fullname, rank, id_no, TIN, birthdate, 
hair, eyes, Blood, height, weight, marks, name, address
FROM  [******_DOMAIN\****_*****].*******view 
```

我想将 dateformat 默认值从 更改`yyyymmdd`为`mm/dd/yyyy`，但我在编写更改 dateformat 的正确脚本时遇到了困难。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T05:50:25.657

用这个

```
select CONVERT(VARCHAR,dateColumn,101)
from your TableName 
```

这里的第三个参数可以是任何支持的格式数字。

欲了解更多信息，请[转到此处](http://www.sql-server-helper.com/tips/date-formats.aspx)

# c# - 页面重音问题

> ID：11372579
> 
> 赞同：0
> 
> 时间：2012-07-07T05:37:54.487
> 
> 标签：c#, asp.net

我有一个没有正确显示重音的 ASP.NET。而不是`Direção Hidráulica\Elétrica`我得到：`DireÃ§Ã£o HidrÃ¡ulica\ElÃ©trica`。

我试过不成功：

通过在 head 标签上使用**HTML ：**

```
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" /> 
```

通过使用**C#.NET**：

```
Response.Charset = "utf-8"; 
```

在`.aspx`页面顶部：

```
<%@ Page  CodePage="65001" Language="C#" .. 
```

我不知道如何解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T06:56:22.393

这里的问题是您使用了无效的编码。

## 将文本转换为 html 实体

[通过将字符转换为HTML 实体](http://www.w3schools.com/html/html_entities.asp)，您可以在 html 中使用 UTF-8 。在线转换器位于此处： http: [//konieczny.be/unicode.html](http://konieczny.be/unicode.html)

这是生成的字符串（删除&之间的空格，stackoverflow会自动转换它）：

> 可怕的ção Hidráulica\Elétrica

## 将文件另存为 UTF-8

你得到这些奇怪字符的原因是因为你将文件保存为 ANSI。假设您使用的是记事本，请转到文件 -> 另存为。在底部，您将找到“文本编码”。将其更改为 UTF-8。

这将在您使用的编辑器中可用。即使您在 HTML 标签中使用“charset=utf-8”，它也不会改变它的保存方式。

# asp.net-mvc-3 - Telerik MVC DatePicker 禁用星期几

> ID：11372585
> 
> 赞同：2
> 
> 时间：2012-07-07T05:39:11.367
> 
> 标签：asp.net-mvc-3, telerik, telerik-datepicker

有没有办法让 DatePicker 允许用户只从弹出日期中选择星期日/星期六，因为星期从星期日开始并在星期六结束？

我有 2 个 DatePickers 作为一个范围（从 & 到），验证是允许用户只在 from 框中选择星期日，在 to 框中选择星期六。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T04:46:58.527

也许您可以为工作日的所有链接添加一个 jquery 事件处理程序（周末在 td 上有一个周末课程）并防止默认行为，因此无论何时单击它们都不做任何事情。此外，您可能想要更改工作日值的样式，这样用户就不会因为点击而没有得到想要的效果而烦恼

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-10T11:36:06.687

在aspx中添加以下代码

```
 <%@ Page Language="C#" AutoEventWireup="true" CodeFile="DefaultCS.aspx.cs" Inherits="DefaultCS" %>

 <%@ Register TagPrefix="radcln" Namespace="Telerik.WebControls" Assembly="RadCalendar.Net2" %>
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" >
<head runat="server">
<title>Untitled Page</title>
</head>
<body>
<form id="form1" runat="server">
<div>

        <script type="text/javascript">
        function OnDayRender(calendarInstance, args)
        {   
            var jsDate = new Date(args.Date[0], args.Date[1] - 1, args.Date[2]);
            if (jsDate.getDay() != 0)//(jsDate.getDay()!=6) for Saturday 
            {
                var otherMonthCssClass = "otherMonth_" + calendarInstance.Skin;    
                args.Cell.className = otherMonthCssClass; 
                args.Cell.innerHTML = "<span>" + args.Date[2] + "</span>";
                args.Cell.DayId = "";
            }  
        }
        </script>

        <radcln:RadDatePicker ID="RadDatePicker1" runat="server">
            <Calendar OnDayRender="Calendar_OnDayRender">
                <ClientEvents OnDayRender="OnDayRender" />
            </Calendar>
        </radcln:RadDatePicker>        

</div>
</form> 
```

并在cs文件中

```
using System;
using System.Web.UI.WebControls;
using Telerik.WebControls;
using Telerik.WebControls.Base.Calendar.Enumerations;

public partial class DefaultCS : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {
        if (!Page.IsPostBack)
    {
        RadDatePicker1.Calendar.SpecialDays.Clear();
    }
}

protected void Calendar_OnDayRender(object sender, Telerik.WebControls.Base.Calendar.Events.DayRenderEventArgs e)
{
    if (e.Day.Date.DayOfWeek != DayOfWeek.Sunday) //(e.Day.Date.DayOfWeek != DayOfWeek.Saturday) for Saturday
    {
        string calendarSkin = RadDatePicker1.Calendar.Skin != "" ? RadDatePicker1.Calendar.Skin : "Default";
        string otherMonthCssClass = String.Format("otherMonth_{0}", calendarSkin);
        e.Cell.Text = "";
        e.Cell.CssClass = otherMonthCssClass; //set new CssClass for the disabled calendar day cells (e.g. look like other month days here)
        Label label = new Label();
        label.Text = e.Day.Date.Day.ToString();
        e.Cell.Controls.Add(label);
        RadCalendarDay calendarDay = new RadCalendarDay();
        calendarDay.Date = e.Day.Date;
        calendarDay.IsSelectable = false;
        calendarDay.ItemStyle.CssClass = otherMonthCssClass;
        RadDatePicker1.Calendar.SpecialDays.Add(calendarDay);
    }

} 
```

}

# objective-c - UITableView reloadData 导致 UITextField resignFirstResponder

> ID：11372589
> 
> 赞同：11
> 
> 时间：2012-07-07T05:39:53.490
> 
> 标签：objective-c, ios, uitableview

我有一个 textField 设置为使用输入的每个字母（并调用 reloadData）来更改 tableView 的数据源。

但是由于某种原因，每次输入一个字母时，键盘就会关闭。

有谁知道为什么？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-07T16:33:55.240

您的文本字段正在辞职，因为重新加载的单元格会收到一条`-resignFirstResponder`消息，因为重新加载后无法保证它们的生存。有关更多信息，请参阅此[相关](https://stackoverflow.com/questions/6409370/uitableview-reloaddata-resigns-first-responder)问题。

* * *

## 回答 #2

> 赞同：-6
> 
> 时间：2012-07-07T05:51:23.650

使用此方法并在 yourClass.h 文件中`textFieldShouldReturn:`添加委托。`UITextFieldDelegate`将委托设置为 yourTextfield 并在`viewDidLoad`方法中编写以下代码。

`yourTextfield.delegate = self;`

并执行`textFieldShouldReturn:`如下

```
- (BOOL)textFieldShouldReturn:(UITextField *)theTextField {

        [theTextField resignFirstResponder];

   return YES; 
} 
```

我想这会对你有所帮助。

# windows-phone-7.1 - wp7 XNA 应用程序 - Microsoft 广告未出现在下载的应用程序中

> ID：11372590
> 
> 赞同：0
> 
> 时间：2012-07-07T05:40:02.057
> 
> 标签：windows-phone-7.1

我目前面临着非常奇怪的问题。我有使用 XNA 框架构建的 windows phone 7 应用程序。我已经把微软的广告控制了。

问题是，我提交给 Marketplace 的 .XAP 文件；如果我将该文件部署到我的手机上，微软的广告就很好了。

但是，当我通过 wi-fi 从市场下载应用程序时，应用程序启动后，广告不会出现。

我验证了所有，这真的很奇怪。我一无所知，谁能告诉我是否遇到过这样的问题？

谢谢，大卫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T17:12:25.080

Do you see the advertising control on your page? Does it just appear as a black box without ads? I have never used the adevertising SDK with an XNA app before but I know they take a few seconds to appear in my XAML-based apps.

I am including this [MSDN](http://code.msdn.microsoft.com/Advertising-SDK-for-91c0d463) link to a sample app that uses XNA and the advertising SDK. Hopefully this will help you out.

# sql - 使用 SQL 连接两个查询

> ID：11372595
> 
> 赞同：4
> 
> 时间：2012-07-07T05:41:55.903
> 
> 标签：sql, join, nosql

```
SELECT test2.user_id,myTable1.myCol1 FROM testingtable2 test2 LATERAL VIEW 
explode(test2.purchased_item.product_id) myTable1 AS myCol1; 
```

我使用上述查询得到以下输出结果。

```
 USER_ID    |     myCol1  
-------------+---------------
1015826235      220003038067

1015826235      300003861266

1015826235      140002997245

1015826235      200002448035 
```

如果将查询的上述输出与以下数据进行比较，则上述查询输出中缺少数据`Table2`的最后一行。`Table2`

这是第二个Table2。

```
 BUYER_ID    |       ITEM_ID      |        CREATED_TIME
-------------+--------------------+--------------------------
1015826235        220003038067          2012-06-21 07:57:39 

1015826235        300003861266          2012-06-21 21:11:12 

1015826235        140002997245          2012-06-14 20:10:16 

1015826235        200002448035          2012-06-08 22:02:17 

*1015826235*     *260003553381*        *2002-01-30 23:12:18* 
```

我需要基本上使用 打印最后一行，所以在我上面写的查询和数据之间`JOIN`的输出应该是这样的。`JOIN``Table2`

```
*1015826235*     *260003553381*         *2002-01-30 23:12:18* 
```

因此，我需要在`JOIN`我编写的上述查询和`Table2`数据之间进行处理，并从上述查询数据的输出中获取所有不存在的数据。有什么建议吗？

**只是添加`myCol1`and`ITEM_ID`是同一件事和`USER_ID`and`BUYER_ID`是同一件事。**

PS-我需要使用上面的查询来与 Table2 进行 JOIN。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-07T07:24:49.110

正如@latr0dectus 指出的那样，您正在寻找`EXCEPT`. 在您的示例中，您可以使用`NOT IN`. 以下查询将为您提供：

> 表 2 中未在上表中的所有数据

```
SELECT *
FROM Table2
WHERE ITEM_ID NOT IN
(
    SELECT ITEM_ID
    FROM AboveTable
) 
```

**更新：**好吧，如果您想以`JOIN`任何方式使用这两个表，那么您可以使用`LEFT JOIN`. 请注意，您必须添加`WHERE t1.myCol1 IS NULL`才能仅从 Table2 中获取不在上表中的所有数据：

```
SELECT * 
FROM Table2 t2
LEFT JOIN AboveTable t1 ON t2.ITEM_ID = t1.myCol1
WHERE t1.myCol1 IS NULL 
```

## [演示](https://data.stackexchange.com/stackoverflow/query/74848)

**更新 2：** SQL 标准规定`TableReference1 JOIN TableReference2 ON ...`如下图¹所述：

![在此处输入图像描述](../Images/7e0366ead17848a891b493b803305cb6.png)

表引用可以是`Table2`直接像我上面的查询中的表名，也可以是联接表，或者是仅选择您在列中发布的某些特定列的 SELECT 语句。

* * *

^(¹来自[SQL 查询的图像，仅适用于凡人](https://rads.stackoverflow.com/amzn/click/com/0201433362))

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-07T06:17:30.553

如果您使用的是 SQL Server，则可以使用`EXCEPT`. 如果是 Oracle，您可以使用`MINUS`. 它基本上会返回查询 1 和查询 2 之间的差异。

在您的情况下，请执行第二个查询，然后`EXCEPT`是第一个查询。

# django - 带有 PyDev 的 Eclipse Juno 删除了我的 django 文件

> ID：11372596
> 
> 赞同：1
> 
> 时间：2012-07-07T05:41:57.230
> 
> 标签：django, eclipse, pydev

我试图在一台新计算机上设置 Eclipse，并认为我不妨尝试使用 Juno 而不是我以前使用的 Indigo。

但是，尝试导入我的 PyDev/Django 文件很麻烦，我最终创建了一个新的 Django 项目并复制了我的源文件。

但是，当我点击 Refresh 时，Eclipse 会删除一堆文件，包括 urls.py！

我现在已经放弃了——回到记事本++——但是有没有人知道是什么原因造成的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T12:25:38.900

我必须说这是我第一次听说 PyDev 正在删除 .py 文件...（它确实有一个选项可以删除孤立的 .pyc 文件，您可以在窗口 > 首选项 > pydev > 构建器 > 如何处理.pyc/$py.class 删除）。

你确定它真的删除了文件系统中的那些文件吗？你能重现吗？（如果是这样，请提供这样做的步骤，因为我在这里尝试了很多东西并且无法复制该行为）。如果您检查它是否真的删除了文件系统中的文件，那就太好了（即：可能由于某种原因它只过滤了 PyDev 包资源管理器中的文件？）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T17:42:44.123

I just lost 3 hours of work using pydev and eclipse, without using django. So this is not django specific.

# android - 需要减小微调器字体大小和宽度

> ID：11372598
> 
> 赞同：0
> 
> 时间：2012-07-07T05:42:08.140
> 
> 标签：android

我需要减小微调器的字体大小和宽度，这意味着我需要小微调器。下面我复制微调器的代码。

我的代码：在 main.xml 中：

```
<Spinner 
    android:id="@+id/fromSpinner"
    android:layout_width="100dp"
    android:layout_height="30dp"
    android:layout_marginLeft="50dp"  
    android:layout_marginTop="-20dp"     
    android:prompt="@string/country_prompt"       
    android:entries="@array/from_spinner"/> 
```

在 strings.xml 中：选择一个国家

```
<string-array name="from_spinner">
  <item>Chennai</item>
  <item>Salem</item>
  <item>Delhi</item>
  <item>Mumbai</item>   
</string-array>  ` 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T05:59:57.713

更简单的方法是在子类化数组适配器时更改微调器项目视图：不要使用`android.R.layout.simple_spinner_item`

利用

```
ArrayAdapter<CharSequence> adapter = ArrayAdapter.createFromResource(this, R.array.planets_array, R.layout.my_item_spinner_layout); 
```

代替

```
ArrayAdapter<CharSequence> adapter = ArrayAdapter.createFromResource(this, R.array.planets_array,android.R.layout.simple_spinner_item) 
```

`my_item_spinner_layout.xml`例如看起来像这样

```
<TextView xmlns:android="http://schemas.android.com/apk/res/android"
     android:text="@+id/TextView01" 
     android:layout_width="wrap_content" 
     android:layout_height="wrap_content" 
     android:textSize="18sp">
</TextView> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T05:50:11.990

**您将需要使用自定义视图并使用适配器对其进行膨胀以获得完全控制。**

如果您在 strings.xml 中定义数组并分配您有限控制的条目。您可以在 XML 本身中使用 HTML 格式进行一些控制。

例如：加粗一个条目将是（这有效）

```
<item><b>Chennai</b></item> 
```

**我不知道这是否适用于大小，但试试看....**

```
<item><small>Chennai</small></item>
<item><big>Salem</big></item> 
```

# database - 在 Ubuntu 中设置数据库

> ID：11372601
> 
> 赞同：0
> 
> 时间：2012-07-07T05:42:43.610
> 
> 标签：database, ubuntu

我正在开发 Ubuntu 12.04。我需要借助 SQL Server 之类的工具来设置数据库。或者无论如何我们自己建立一个数据库？

我需要练习使用 SQL，现在我正在研究“Informix AIX”系统来练习。我需要尽快完成这个设置。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-07T18:40:28.407

我建议安装 MySQl，因为它是开源的并且可以免费用于教育目的。如果您想将其重新分发用于商业目的，则需要许可证（我想以防万一）。

在 Ubuntu 上安装非常简单，只需在终端中输入 sudo apt-get install mysql-server ，剩下的就交给你了。它会提示您为数据库设置密码，但是一旦安装完成，服务器应该会自动启动并准备好开始使用。

如果您有任何疑问，可以在以下位置找到一个很好的教程：[https ://help.ubuntu.com/12.04/serverguide/mysql.html](https://help.ubuntu.com/12.04/serverguide/mysql.html)

要从命令行访问数据库，只需使用：（`mysql -u <username> -p`不要给`-p`开关提供参数；只需按 Enter 并确保`-p`是命令行上的最后一个单词）。该命令将提示您输入密码。密码应该以交互方式输入，因为命令历史以纯文本形式保存，因此如果您在命令行中输入密码，任何人都可以按向上箭头键查找您的密码。

希望有帮助，

特雷弗

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2015-02-02T22:08:56.067

MySQL 很流行，但我更喜欢 PostgreSQL。它对 SQL 标准和 ACID 事务有更完整的支持。但它在读取操作方面没有 MySQL 的性能。

# python - libSVM Python 接口中的错误

> ID：11372604
> 
> 赞同：0
> 
> 时间：2012-07-07T05:43:16.610
> 
> 标签：python, libsvm

我打了电话

```
 model = svm_model(svm_problem(prob_y, prob_x), svm_param) 
```

但我得到错误：

```
Traceback (most recent call last):
  File "./multiprob.py", line 267, in <module>
    main()
  File "./multiprob.py", line 226, in main
    train_x, train_y, test_x, test_y, param, outfile)
  File "./multiprob.py", line 89, in testing
    model[i,j]=base_train(cls_x[i], cls_x[j], param)
  File "/data/svm/svmprob-1.2/svmPlatt.py", line 15, in SvmPlattTrain
    model = svm_model(svm_problem(prob_y, prob_x), svm_param)
TypeError: __init__() takes exactly 1 argument (3 given) 
```

我在 /usr/lib64/python2.6/site-packages/libsvm/svm.py 查看代码

```
class svm_model(Structure):
>---_names = ['param', 'nr_class', 'l', 'SV', 'sv_coef', 'rho',
>--->--->---'probA', 'probB', 'label', 'nSV', 'free_sv']
>---_types = [svm_parameter, c_int, c_int, POINTER(POINTER(svm_node)),
>--->--->---POINTER(POINTER(c_double)), POINTER(c_double),
>--->--->---POINTER(c_double), POINTER(c_double), POINTER(c_int),
>--->--->---POINTER(c_int), c_int]
>---_fields_ = genFields(_names, _types)

>---def __init__(self):
>--->---self.__createfrom__ = 'python' 
```

init_**只**采用一个参数...如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T18:18:19.507

这是针对 libSVM 的版本错误。libSVM 3.x 更改了 libSVM 2.8.9 中使用的模型。

# json - Flash：解析具有名为 Class 的节点的 JSON 文件

> ID：11372608
> 
> 赞同：0
> 
> 时间：2012-07-07T05:44:04.457
> 
> 标签：json, flash, actionscript

本质上，我正在尝试解析 JSON 并将结果分配给变量，其中之一是“var = JSON.class;” 类是 JSON 中返回的内容。但是，flash 不会让我解析它，因为它被称为类，它用于创建新类。是否有任何解决方法或者我将无法获取此节点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T06:34:24.940

我不确定这是否是您要问的，但如果您的 JSON 对象中有一个名为“class”的属性，您应该能够如下所示解析它。

```
// assuming JSON object looks like this, and is stored in a var named 'jsonData'
var jsonData:Object = { "id": 0, "class": "MyClassName", "values": [1,2,3] }

// trying to parse like this won't work w/keywords like 'class':
var parsedValue : String = jsonData.class;

// parse it with this way, using the square brackets:
var parsedValue : String = jsonData["class"]; 
```

# linux - 如何检查中断向量

> ID：11372610
> 
> 赞同：1
> 
> 时间：2012-07-07T05:44:51.273
> 
> 标签：linux, linux-kernel, x86, hardware, virtualization

如何检查中断向量？我要检查的是 PMI（性能监控中断）。以前假设它可能与 NMI 相同，因为它们的编号在我的计算机上的 /proc/interrupt 中始终相同。现在我意识到我错了。那么有人可以告诉我如何检查它的向量，也许是什么类型？它是外部中断、NMI 还是其他类型？

我正在做的是首先在 VMM 中识别 PMI，然后将其注入来宾。

谢谢。

# java - 哈希密码

> ID：11372611
> 
> 赞同：0
> 
> 时间：2012-07-07T05:45:11.453
> 
> 标签：java, cryptography, passwords

我一直在玩在[这里](http://www.javacodegeeks.com/2012/05/secure-password-storage-donts-dos-and.html)找到的代码。我得到了类似的东西

```
UKepQT7tW8mGtOJzNaLV2X+Ij/E= 
```

当我使用查看散列密码时

```
String t = base64EncoderDecoder.encodeAsString(f.generateSecret(spec).getEncoded()); 
```

对于我的哈希密码。它应该有像 +/= 这样的符号吗？我也预计哈希会更长。我搞砸了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-07T06:15:24.237

> 它应该有像 +/= 这样的符号吗？

好吧，根据谷歌的第一个结果应该是什么（[关于 Base64 编码的维基百科文章](http://en.wikipedia.org/wiki/Base64)），`+`并且`/`是分别映射到 62 和 63 的有效符号。 `=`是一个填充字符。

> 我也预计哈希会更长。

为什么？这只是您使用的编码方法的结果。以 16 进制编码会多占用 50% 的字符（因为每 4 位需要 1 个字符，而不是每 6 位需要 1 个字符）。从您引用的参考资料中：

> ```
> // SHA-1 generates 160 bit hashes, so that's what makes sense here 
> ```

160 位产生 27 个字符的 Base64 编码（160/6 ~= 27），这就是你所拥有的，所以对我来说这似乎是合理的。

# django - 在 django 模板中处理 ajax 和 jquery

> ID：11372612
> 
> 赞同：0
> 
> 时间：2012-07-07T05:45:11.830
> 
> 标签：django, jquery, django-templates

我正在尝试分两部分加载页面。第二部分仅在用户单击“显示更多详细信息”时呈现

```
<script>
$(document).ready(function(){
    $('#toggle_details').click(function(e){
        e.preventDefault();
        if ($(this).hasClass('up')){
            $(this).removeClass('up').addClass('down');
            $('#toggle_text').html('Show More Details');
        }
        else {
            $(this).removeClass('down').addClass('up');
            $.ajax({
                url: 'some_url_returning_json',
                data: $(this).serialize(),
                processData: false,
                dataType: "json",
                success: function(data) {
                    $( '.name' ).html(data.name);
                    $( '.lname' ).html(data.lname);
                    alert(data.name);
                }
            })
            $('#toggle_text').html('Hide Details');
        }
        $('#details').slideToggle("slow");
        return false;
    });
    $('#details').hide();
});    
</script> 
```

我的html是：

```
<div class="ad-grp-tbl creative-tbl custom-tbl">
    <table width="100%">
        <tr>
            <th>Status:</th>

            <td id='status'>{{ status }}</td>
        </tr>
    </table>
    <table width="100%" id="details">
        <tr>
            <th>Name:</th>
            <td id="name" >{{data.name}}</td>
        </tr>

        <tr>
            <th>Last Name:</th>
            <td id ="lname">{{ data.lname}}</td>
        </tr>
    </table>
    <table>
        <tr>
            <th class="tog">
                <span id="toggle_text" style="color:blue;font-weight:bold">Show More Details</span>
                <span class="down" id="toggle_details"></span>
            </th>
            <td></td>
        </tr>
    </table>
</div> 
```

所以基本上我无法在模板中加载 json 返回值。我可以修复它吗？或者我解决问题的方法是错误的。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-03-05T12:54:48.320

我给你看一个例子：

```
def post_ajax(request):
    TOTLE = 5
    OFFSET = int(request.GET.get('offset', 0))
    END = OFFSET + TOTLE

    if OFFSET + 1 >= Post.objects.count():
        LOADED = "已经全部加载完毕"
        return HttpResponse(LOADED)
    posts = Post.objects.filter(pub_time__lte=timezone.now())[OFFSET:END]

    json_list = []
    for post in posts:
        t = get_template('blog/ajax_post.html')
        html = t.render(Context({'post': post}))
        # print(html)
        json_list.append({
            'html': html,
        })
    data = json.dumps(json_list)
    return HttpResponse(data, content_type="application/json") 
```

这是你需要的吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T06:01:06.350

Ajax + JQuery 将得到响应并应在页面中适当地放置数据。原始页面的模板没有太大的作用。

但是，您必须实现单独的 url+view+template 来处理 ajax 请求。您可以使用现有视图，但需要处理 ajax 请求（即仅发送部分 html，可能使用另一个模板）。

ajax 响应的模板应该只发送 html 的相关部分，而不是整个 html 页面。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T23:32:02.867

在 HTML 中，您设置了 id，但您使用的是类选择器。

它应该是：

```
$( '#name' ).html(data.name);
$( '#lname' ).html(data.lname); 
```

代替：

```
$( '.name' ).html(data.name);
$( '.lname' ).html(data.lname); 
```

`.`是类选择器，`#`是 id 选择器。

您可以尝试使用 Firebug 或 Chrome 开发工具来查看上述返回的项目。

# python - 将 Python 运算符和函数放入类的最佳方法？

> ID：11372614
> 
> 赞同：0
> 
> 时间：2012-07-07T05:45:31.397
> 
> 标签：python, io, code-generation

这是我要问的最后一个问题的后续问题，您可以在此处阅读：

[使用 Python 的基本 I/O 来操作或创建 Python 文件？](https://stackoverflow.com/questions/11350509/using-pythons-basic-i-o-to-manipulate-or-create-python-files)

基本上，我在寻求允许 Python 编辑其他 Python 程序源的最佳方法，目的是为了搞砸/实验，看看我是否可以将它们连接到遗传算法或某种反向传播网络以获得结果。

基本上，其中一个答案建议将每个 python 运算符或代码位（例如“=”、“if”等）放入类中，然后我/其他各种程序可以使用这些类来拼凑/编辑其他 python文件，利用 Python 的基本文件 i/o 作为一种操作手段。

每个类在初始化时都会获得自己的唯一 ID，该 ID 将与行号、类型等一起存储在 SQLite3 数据库中以用于日志记录，并由其他类/基本文件 i/系统。

我的问题是：这是一个理智的任务吗？如果没有，我可以改变什么或做些不同的事情？我是在做一些有价值的事情，还是完全愚蠢？如果您需要澄清，请询问，我想知道我正在做的事情在外部来源看来是否合理，或者我是否应该重新考虑/取消整个交易......

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T08:50:45.320

不要生成代码修改代码的 AST。

```
import ast
p = ast.parse("testcode") 
```

AST 文档： http: [//docs.python.org/library/ast.html](http://docs.python.org/library/ast.html)

修改代码示例： http: [//docs.python.org/library/ast.html#ast.NodeTransformer](http://docs.python.org/library/ast.html#ast.NodeTransformer)

示例：（将 3*3 修改为 3+3）

```
from ast import *
tree = parse("print(3*3)") #parse the code
tree.body[0].value.args[0].op = Add() #modify multiplication to plus
codeobj = compile(tree,"","exec") # compile the code
exec(codeobj) #run it - it should print 6 (not 9 which the original code would print) 
```

顺便说一句，我对遗传算法很感兴趣。如果你开始一个项目，我可以帮助你。

# objective-c - MathJax：隐藏 Mathjax 加载过程

> ID：11372615
> 
> 赞同：17
> 
> 时间：2012-07-07T05:45:32.693
> 
> 标签：objective-c, uiwebview, loading, mathjax

我`Mathjax`在我的代码中显示了`UIWebView`. 在`Mathjax`加载时，它显示了我的左下角的加载过程`UIWebView`，如下图所示，我想隐藏它们。我不希望我的用户看到它们。

![加载过程](../Images/adcd14c21746d20694c01531c347cb6d.png)

![加载过程](../Images/63d3edeeae461edad2754ed517dba6b7.png)

**注意**：虚拟解决方案在加载过程完成后显示假的“正在加载”，然后显示`UIWebView`。我真的不想用这种方式。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-07-09T10:56:09.660

在您的 MathJax 配置中，您可以添加以下内容：

```
messageStyle: "none" 
```

根据文档，这应该可以解决问题：http: [//docs.mathjax.org/en/latest/options/hub.html](http://docs.mathjax.org/en/latest/options/hub.html)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2015-01-22T15:31:28.177

试试这个，它对我有用：

```
MathJax.Hub.Config({messageStyle: 'none',tex2jax: {preview: 'none'}}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-09-08T15:34:56.783

同时添加`showProcessingMessages: false`.

# iphone - 对 Objective-C 语法感到困惑

> ID：11372618
> 
> 赞同：1
> 
> 时间：2012-07-07T05:45:52.593
> 
> 标签：iphone, objective-c, syntax

> **可能重复：**
> [Objective-C 中的方法语法](https://stackoverflow.com/questions/683211/method-syntax-in-objective-c)

我刚开始学习Objective-C，我对这个说法有点困惑。

```
+(NSMutableArray *) array; 
```

这是我的理解：

1.  `+`表示这是一个响应类的方法（这使它成为静态方法）

2.  `NSMutableArray`是一个可以改变大小的数组

3.  `*`指针（内存位置参考）

4.  `array`是 NSMutableArray 类型的数组的名称。

5.  `()`为什么这个方法需要在对象指针'（NSMutableArray *）'周围加上括号

我不知道如何概念化这些部分作为一个整体的含义。你能给我解释一下吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T06:11:48.313

在 C 语法中，这将被写为：

```
static NSMutableArray *array(); 
```

`NSMutableArray *`是返回类型。`array`是方法的名称。没有论据，但如果有的话会是这样的：

```
+ (ReturnType)methodName:(ArgType)argName; 
```

或者如果有多个参数：

```
+ (ReturnType)firstPartOfMethodName:(Arg1Type)arg1Name secondPartOfMethodName:(Arg2Type)arg2Name; 
```

对于很多 Obj-C 新手来说，这可能是一个困惑点。方法名称在参数之间分开的事实对于大多数来自其他语言的程序员来说可能非常混乱。

以这种方式排序的原因是为了使论点清晰。使用以下方法时：

```
- (id)initWithBitmapDataPlanes:(unsigned char **)planes 
                pixelsWide:(NSInteger)width 
                pixelsHigh:(NSInteger)height 
             bitsPerSample:(NSInteger)bps 
           samplesPerPixel:(NSInteger)spp 
                  hasAlpha:(BOOL)alpha
                  isPlanar:(BOOL)isPlanar 
            colorSpaceName:(NSString *)colorSpaceName
              bitmapFormat:(NSBitmapFormat)bitmapFormat 
               bytesPerRow:(NSInteger)rowBytes
              bitsPerPixel:(NSInteger)pixelBits 
```

[（这是来自 Cocoa 框架的真实方法，以最长](http://oleb.net/blog/2010/12/method-names-in-objective-c/)而闻名），知道将哪个参数放在第一位、第二位、第三位等非常有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-07T06:00:06.060

1,2,3 陈述是正确的。但第四个是，`array`是方法的名称。第五个是，`array`方法的返回类型是`NSMutableArray *`.

最后`array`是类方法，它有`NSMutableArray *`返回类型，也没有任何参数。

它看起来像`- (void)viewDidLoad`。`viewDidLoad`是实例方法，它有`void`返回类型，也没有任何参数。

# php - 为什么会出现这个错误？解析错误：语法错误，意外的 T_ELSE

> ID：11372619
> 
> 赞同：0
> 
> 时间：2012-07-07T05:46:11.370
> 
> 标签：php

我正在制作一个系统来更改我的密码，但我不知道为什么会收到此错误。我有这个错误信息：

> 解析错误：语法错误，第 37 行 /home/zenonhos/public_html/system/changepass.php 中的意外 T_ELSE

```
<?php
session_start();

$user = $_SESSION['username'];

if ($user)
{

    if ($_POST['submit'])
    {
        $oldpassword = md5($_POST['oldpassword']);
        $newpassword = md5($_POST['newpassword']);
        $repeatnewpassword = md5($_POST['repeatnewpassword']);

        $connect = mysql_connect("*******","******","*****");
        mysql_select_db("zenonhos_lr");

        $queryget = mysql_query("SELECT `password` FROM `users` WHERE username='$user'") or die();
        $row = mysql_fetch_assoc($queryget);
        $oldpassworddb = $row['password']; 

        if ($oldpassword==$oldpassworddb)
        {
            if ($newpassword == "") {
                echo "Password cannot be blank";
            } else {

                if ($newpassword==$repeatnewpassword)
                {
                    $querychange = mysql_query("UPDATE `users` SET password='$newpassword' WHERE username='$user'");

                    session_destroy();
                    die("Password successfully changed! <a href='index.php'>Return to home page</a>");
                } else {
                    die("New passwords do not match");
                } else {
                    die("Old password does not match");
                } echo "<form action='changepass.php' method='POST'>
                    Old Password: <input type='password' name='oldpassword'><br>
                    New Password: <input type='password' name='newpassword'><br>
                    Repeat New Password: <input type='password' name='repeatnewpassword'><br>
                    <input type='submit' name='submit' value='Change Password'>";
            } else {
                die("You must be logged in to view this page.");
            }

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T05:54:00.657

您尚未关闭此 if 语句的括号：

```
if ($user)
{

if ($_POST['submit'])
{
if ($oldpassword==$oldpassworddb)
{ 
```

要修复它，只需将它们放在`} } }`源代码的末尾即可。

另外，我强烈推荐阅读[这篇](http://en.wikipedia.org/wiki/Indentation)文章。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T05:56:05.827

你错过了 tree`}`并且有两个 sintax 错误，因为两个`else`. 以下是您更新的代码。

```
$user = $_SESSION['username'];

if ($user)
{
    if ($_POST['submit'])
    {
        $oldpassword = md5($_POST['oldpassword']);
        $newpassword = md5($_POST['newpassword']);
        $repeatnewpassword = md5($_POST['repeatnewpassword']);

        $connect = mysql_connect("*******","******","*****");
        mysql_select_db("zenonhos_lr");

        $queryget = mysql_query("SELECT `password` FROM `users` WHERE username='$user'") or die();
        $row = mysql_fetch_assoc($queryget);
        $oldpassworddb = $row['password']; 

        if ($oldpassword==$oldpassworddb)
        {
            if ($newpassword == "") 
            {
                echo "Password cannot be blank";
            } 
            else 
            {

                if ($newpassword==$repeatnewpassword)
                {
                    $querychange = mysql_query("UPDATE `users` SET password='$newpassword' WHERE username='$user'");

                    session_destroy();
                    die("Password successfully changed! <a href='index.php'>Return to home page</a>");
                } 
                else 
                {
                    die("Old password does not match");
                } 
            } 
        }
    }
}

echo "
    <form action='changepass.php' method='POST'>
    Old Password: <input type='password' name='oldpassword'><br>
    New Password: <input type='password' name='newpassword'><br>
    Repeat New Password: <input type='password' name='repeatnewpassword'><br>
    <input type='submit' name='submit' value='Change Password'>";

?> 
```

# php - 如何使用 php 代码限制每小时发送 90 封电子邮件？

> ID：11372626
> 
> 赞同：2
> 
> 时间：2012-07-07T05:47:40.180
> 
> 标签：php, email, sendmail

我想使用 php 代码限制每小时发送 90 封电子邮件

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-07T06:46:56.377

您可以使用 PHP 以这种非常 hackish 的方式执行此操作：

创建一个名为 count_offset.txt 的空白文件，这将是一个跟踪分块集的 90 个用户的偏移量的文件。

创建另一个名为 count_emails.txt 的空白文件，这将是一个跟踪特定小时内发送的电子邮件数量的文件。

然后，运行电子邮件功能（通过 cron）的 PHP 脚本可以打开第一个文本文件以检查已发送的分块集，并发送给下一组用户。它可以检查第二个文件的 90 个电子邮件限制。

例如：

```
$userCount = getNumberOfUsers(); // Whatever query you may have that counts how many total users there are.

$numChunks = ceil($userCount/90); // How many different groups to send the email.

$chunkFile = fopen('chunk_offset.txt', 'r+'); // Loads the file as resource.
$currentChunk = fread($chunkFile, filesize('chunk_offset.txt')); // Load the contents of chunk_offset.txt into variable.
$currentChunk = ($currentCount == '' ? 0 : (int)$currentChunk); // Load 0 if contents of file blank.

$countFile = fopen('count_emails.txt', 'r+'); // Loads the file as a resource in variable $countFile.
$currentCount = fread($countFile, filesize('count_emails.txt')); // Load the content of the file into variable $currentCount.
$currentCount = ($currentCount == '' ? 0 : (int)$currentCount); // If the value of $currentCount is blank, then sets it to integer 0, otherwise sets the variable as the integer value of file contents.

if ($currentCount <= 90) // Test the variable to see if it's under the limit. If it's under, send the email.
{
    foreach ($whateverUserListYouHave as $integerKey => $emailAddress) // Iterating through whatever array of users you have.
    // Hopefully index number => email, but the index number is important.
    // Also, consistent ordering of the list of users is important.
    // Remember, you can always create your own counter.
    {
        // The magic:
        // You're testing for set of people who fall within the current chunk.
        if ($integerKey >= ($currentChunk * 90) && $integerKey < ($currentChunk * 90 + 90))
        {
            send_email($emailAddress); // Whatever arbitrary email function you have here.
        }
    }
}

$currentCount++; // Iterate up the count.
fwrite($countFile, $currentCount); // Write the new count into the file.

if ($currentChunk == $numChunks) // If the current chunk number hits the total number of groups of 90, then reset the file to blank...
{
    $currentChunk = '';
}
else if ($currentChunk < $numChunks) // ... Otherwise iterate up and let it hit the next chunk on the next hour.
{
    $currentChunk++; // Iterate up the chunk.
}
fwrite($chunkFile, $currentChunk); 
```

之后，编写另一个 cron，每小时清除 count_emails.txt 文件（或将内容变为 0）。如果您愿意，这个其他 cron 可以运行另一个 PHP 脚本或者可以是 Bash 命令。

如果您想使用 Bash 命令执行此操作，这将是 cron：

```
0 * * * * cat /dev/null > count_emails.txt 
```

上述行添加到 cron 时，使用 cat 清除 count_emails.txt 文件的内容。

干杯，祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-07T05:50:03.543

PHP 本身不足以胜任这项工作。您可以编写 PHP 来执行实际发送（以及 90 的限制），但对于调度，您需要在您的服务器上使用[cron](http://en.wikipedia.org/wiki/Cron)或类似机制，它被配置为定期调用您的 PHP 文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-17T17:47:30.110

[在https://a1websitepro.com/sending-emails-every-hour-server-limit-php/](https://a1websitepro.com/sending-emails-every-hour-server-limit-php/)上有一个关于这个主题的深入教程 这是您将使用 cron 运行的代码。

```
 <?php
include('config.php');
$result = $con->query("SELECT * FROM newsletter     ORDER BY id DESC LIMIT 1") ;
while ($row = $result->fetch_assoc()) {
 $newid=$row['id'];
$thtetitle=$row['title'];
$thecontent=$row['content'];
echo '<hr/>';
}
$resultt = $con->query("SELECT * FROM users WHERE      emailed <> $newid ORDER BY id ASC LIMIT 50") ;
while ($rowt = $resultt->fetch_assoc()) {
$userid=$rowt['id'];
$email= $rowt['email'];
echo '<hr/>';
$to = $email;
$subject = $thetitle;
$message = $thecontent;
$headers = 'From: you@yourwebsite.com' . "\r\n" .
'Reply-To: noreply@yourwebsite.com' . "\r\n" .
'X-Mailer: PHP/' . phpversion();
mail($to, $subject, $message, $headers);
mysqli_query($con,"UPDATE users SET     emailed='$newid'
WHERE id='$userid' ");
}
$con->close();
?> 
```

这是上传教程中的所有脚本后，您将在 cPanel 中插入的 cron 代码。/usr/bin/php -q /home/cpanelusername/public_html/sendnewsletter.php

# jasper-reports - 导出为 excel 格式的 Jasper 报告不显示背景颜色

> ID：11372632
> 
> 赞同：0
> 
> 时间：2012-07-07T05:48:38.793
> 
> 标签：jasper-reports

我正在使用 jasper reports-4.5.0 。使用它，我可以正确生成报告并导出为不同的格式，如 pdf、csv、xls、html。除了 .xls 格式外，所有的都工作正常。当我将报告导出到 .xls 时，它不会向页眉带显示背景颜色。我正在使用的代码如下。页眉带内

```
<image>
    <reportElement mode="Opaque" x="0" y="0" width="236" height="57" backcolor="#E6E6E6"/>
    <imageExpression><![CDATA[new File($P{Image}, "images/flower-logo.png")]]></imageExpression>
</image> 
```

对于花朵图像，我正在应用背景颜色。它以除 .xls 格式外的所有其他格式出现。excel格式可能是什么问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T15:41:49.283

JasperReports XLS 导出器仅支持标准 Excel 调色板。我想你可以在这里看到颜色列表。[http://dmcritchie.mvps.org/excel/colors.htm](http://dmcritchie.mvps.org/excel/colors.htm)

# php - 如何在codeigniter中检索最近上传的文件名

> ID：11372634
> 
> 赞同：1
> 
> 时间：2012-07-07T05:49:20.440
> 
> 标签：php, codeigniter

我正在用 php 开发一个网站，用户可以在其中上传 csv 文件。单击“上传”按钮后，文件被重命名并以“上传”.time() 格式保存。我需要在上传文件后显示上传文件的内容。到目前为止，我已经能够正确上传文件，并且我已经使用静态文件名进行了测试，并且能够完美地读取 csv 文件。但是当我在上传后尝试获取最近上传的文件名时，我无处可去。搜索了整个网站，但没有得到任何适合我的解决方案。我正在使用 codeigniter 2.1.0 。

控制器文件：

```
<?php     
class Csv_ci extends CI_Controller {

function is_logged() {
    $is_logged_in = $this->session->userdata('is_logged_in');
    if (!isset($is_logged_in) || $is_logged_in != true)
        return false;
    else
        return true;
}

function index() {
    if ($this->is_logged() == TRUE) {
        $this->load->model('Csv_model');

        if ($this->input->post('upload')) {
            $name = $this->Csv_model->do_upload();
            //print_r($name);
            if (isset($name)) {
                $filePath = "localhost/map_ci/csv/" . $name;
                //$filePath = './csv/bank_data.csv';
                $row = 1;
                if (($handle = fopen($filePath, "r")) !== FALSE) {
                    while (($data = fgetcsv($handle, 0, ",")) !== FALSE) {
                        $num = count($data);

                        $file_data[$row]['district_name'] = $data[1];
                        $file_data[$row]['bank_name'] = $data[2];
                        $file_data[$row]['area_name'] = $data[3];
                        $file_data[$row]['address'] = $data[4];
                        $row++;
                    }

                    fclose($handle);
                }
                $this->load->view('csvshow', array('file_data' => $file_data));
            }
        }
    }
    else $this->load->view('invalid_member');
     }
} 
```

模型文件：

```
 <?php

class Csv_model extends CI_Model {

var $gallery_path;
var $gallery_path_url;

function Csv_model() {
    parent::__construct();

    $this->gallery_path = realpath(APPPATH . '../csv');
    $this->gallery_path_url = base_url() . 'csv/';
}

function do_upload() {
    $config = array(
        'upload_path' => $this->gallery_path,
        'allowed_types' => 'text/csv|csv|text/x-comma-separated-values|text/comma-separated-values|application/x-csv|text/x-csv|text/csv|application/csv|',
        'max_size' => '5000',
        'file_name' => 'upload' . time()
    );

    $this->load->library('upload', $config);

    if (!$this->upload->do_upload())
        echo $this->upload->display_errors();
    else {
        $file_info = $this->upload->data();
        $csvfilepath = "csv/" . $file_info['file_name'];
        $this->addfromcsv($csvfilepath);
        $filename = $file_info['file_name'];
        // print_r($filename);
        return $filename;
    }
} 
} 
```

检索我正在做的文件名 `file_info['file_name']`。请帮我找到解决方案。

更新：从我的代码中删除这两行后，我当前的问题已经解决。`$csvfilepath = "csv/" . $file_info['file_name']; $this->addfromcsv($csvfilepath);`现在它返回上传的文件名。但要检查是否完全工作。

更新 2：代码运行良好感谢大家的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T07:37:36.973

您可以返回`$config['upload_path']`& `$config['file_name']`from的连接`do_upload()`并使用它来读取相应的文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T07:53:45.617

只需使用：

```
$this->upload->file_name; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-07T10:45:21.583

我认为问题出在`$this->upload->data()`

尝试`$config['file_name']`从`do_upload()`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-07T20:36:12.457

```
$data = $this->upload->data();
print_r($data); 
```

返回：

```
Array
(
[file_name]    => mypic.jpg
[file_type]    => image/jpeg
[file_path]    => /path/to/your/upload/
[full_path]    => /path/to/your/upload/jpg.jpg
[raw_name]     => mypic
[orig_name]    => mypic.jpg
[client_name]  => mypic.jpg
[file_ext]     => .jpg
[file_size]    => 22.2
[is_image]     => 1
[image_width]  => 800
[image_height] => 600
[image_type]   => jpeg
[image_size_str] => width="800" height="200"
)` 
```

所以：`$file_name = $data['file_name'];`

-或者-

`$file = $data['file_path'].$data['file_name'];`

# ruby-on-rails - 如何为 ApplicationHelper 编写 Minitest 规范？

> ID：11372635
> 
> 赞同：1
> 
> 时间：2012-07-07T05:49:34.953
> 
> 标签：ruby-on-rails, ruby-on-rails-3, minitest

我知道如何为 Minitest 编写以下测试风格...

```
需要“minitest_helper”

类 ApplicationHelperTest < ActionView::TestCase
  def test_nav_element_for_current_page
    self.stub(:current_page?, true) 做
      nav_element('Home', '#').must_equal(
        '<li class="active"><a href="#">首页</li>')
    结尾
  结尾

  def test_nav_element_for_non_current_page
    self.stub(:current_page?, false) 做
      nav_element('Home', '#').must_equal(
        '<li><a href="#">首页</li>')
    结尾
  结尾
结尾

```

...但我想以规范格式编写它。这是我尝试过的，但它不起作用：

```
需要“minitest_helper”

描述 ApplicationHelper 做
  它“当前页面的导航元素”做
    self.stub(:current_page?, true) 做
      nav_element('Home', '#').must_equal(
        '<li class="active"><a href="#">首页</li>')
    结尾
  结尾

  它“用于非当前页面的导航元素”做
    self.stub(:current_page?, false) 做
      nav_element('Home', '#').must_equal(
        '<li><a href="#">首页</li>')
    结尾
  结尾
结尾

```

我如何告诉 Minitest`ApplicationHelper`应该自动包含`ActionView::TestCase`？我已经尝试了几件事，但还没有运气。

仅作为背景，`application_helper.rb`包含：

```
模块 ApplicationHelper
  def nav_element（文本，路径）
    选项 = {}
    options[:class] = 'active' if current_page?(path)
    link_tag = content_tag(:a, text, href: 路径)
    content_tag(:li, link_tag, 选项)
  结尾
结尾

```

我正在使用这些捆绑的宝石：

```
  * 导轨 (3.2.6)
  * 迷你测试 (3.2.0)
  * minitest-rails (0.1.0.alpha.20120525143907 7733031)

```

（请注意，这是`minitest_rails`(https://github.com/blowmage/minitest-rails) 的头部版本。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-07T16:33:17.390

MiniTest::Rails 直到今天早上才实现 ActionView::TestCase。感谢您引起我的注意！:)

此修复程序将在 0.1 版本中。现在，更改您的 Gemfile 并链接`minitest-rails`到我的 git 存储库：

```
gem "minitest-rails", :git => "git://github.com/blowmage/minitest-rails.git" 
```

**编辑：**这现在有效。您的代码应如下所示：

```
require "minitest_helper"

describe ApplicationHelper do
  it "nav_element for current page" do
    # Stub with Ruby!
    def self.current_page?(path); true; end
    nav_element('Home', '#').must_equal(
      '<li class="active"><a href="#">Home</a></li>')
  end

  it "nav_element for non-current page" do
    def self.current_page?(path); false; end
    nav_element('Home', '#').must_equal(
      '<li><a href="#">Home</a></li>')
  end
end 
```

这应该是你需要做的所有事情。如果您有任何其他问题，请在邮件列表中开始讨论。[https://groups.google.com/group/minitest-rails](https://groups.google.com/group/minitest-rails)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-07T15:42:48.810

也许使用 mintiest-spec-rails，它解决了所有这些必须使用生成器等的问题，并允许现有的 Rails 单元、功能和集成测试正常工作，同时允许使用 MiniTest::Spec 断言和语法。

*   [http://github.com/metaskills/minitest-spec-rails](http://github.com/metaskills/minitest-spec-rails)
*   [http://metaskills.net/2011/03/26/using-minitest-spec-with-rails/](http://metaskills.net/2011/03/26/using-minitest-spec-with-rails/)

# validation - 违反“唯一粒子归属”

> ID：11372637
> 
> 赞同：1
> 
> 时间：2012-07-07T05:49:43.260
> 
> 标签：validation, xsd

当我想验证我的 xsd 文件时，我收到了这个错误

cos-nonambig: "my xsd file":layout 和 "my xsd file":layout （或它们替换组中的元素）违反了“唯一粒子属性”。在针对此模式进行验证期间，将为这两个粒子创建歧义。

并让我参考这个标签

```
<xs:complexType name="pageType">
    <xs:choice>
        <xs:element type="main:layoutType" name="layout" minOccurs="0" maxOccurs="1"/>
        <xs:group ref="main:WidgetsGroup" maxOccurs="unbounded" minOccurs="0"/>
    </xs:choice>
    <xs:attribute type="xs:string" name="name"/>

    <xs:attribute type="xs:string" name="layout"/>
    <xs:attribute type="xs:string" name="dataModel"/>
    <xs:attribute type="xs:string" name="domain"/>
</xs:complexType> 
```

问题是什么？我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T07:57:32.277

我已经通过将 WidgetGroup 内容插入到我的 xsd 来解决它：

```
<xs:complexType name="pageType">
    <xs:choice>
        <xs:element type="main:layoutType" name="layout" minOccurs="0" maxOccurs="1"/>
        <xs:sequence>
            <xs:choice maxOccurs="unbounded">
                <xs:element name="spinner" type="main:SpinnerType" minOccurs="0"/>
                <xs:element name="datePicker" type="main:DatePickerType" minOccurs="0"/>
                <xs:element name="button" type="main:ButtonType" minOccurs="0"/>
                <xs:element name="combo" type="main:ComboBoxType" minOccurs="0"/>
                <xs:element name="checkBox" type="main:CheckBoxType" minOccurs="0"/>
                <xs:element name="radioButton" type="main:RadioButtonType" minOccurs="0"/>
                <xs:element name="image" type="main:ImageType" minOccurs="0"/>
                <xs:element name="label" type="main:LabelType" minOccurs="0"/>
                <xs:element name="listBox" type="main:ListBoxType" minOccurs="0"/>
                <xs:element name="textBox" type="main:TextBoxType" minOccurs="0"/>
                <!--<xs:element name="layout" type="main:layoutType" minOccurs="0"/>-->
            </xs:choice>
        </xs:sequence>
    </xs:choice>

    <xs:attribute type="xs:string" name="name"/>

    <xs:attribute type="xs:string" name="layout"/>
    <xs:attribute type="xs:string" name="dataModel"/>
    <xs:attribute type="main:domainType" name="domain"/>
    <xs:attribute type="xs:string" name="title"/>
</xs:complexType> 
```

# mysql - 如何从 MySQL 函数或触发器中进行 shell 调用

> ID：11372638
> 
> 赞同：0
> 
> 时间：2012-07-07T05:49:53.613
> 
> 标签：mysql, shell, stored-procedures, triggers, shellexecute

我有一个记录位置（gps）并触发插入触发器的表，我根据需要通知的结果（发送电子邮件或短信）检查新点是在区域内部还是外部。

我可以从触发器中检测到我需要发送通知，但希望能够进行 shell 调用或 http 到 url 来调用和发送电子邮件。类似[http://myserver.com/sendemail.php?to=email@address.com&subject=New+Messaje&body=You+are+inside](http://myserver.com/sendemail.php?to=email@address.com&subject=New+Messaje&body=You+are+inside)

如果这是不可能的，怎么可能是另一种/更好的方法。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T07:34:27.230

数据库触发器不适合这种应用程序逻辑。此逻辑的正确位置是在您的应用程序中，您将数据插入到表中。（方便的是，您的应用程序也比数据库更适合发送邮件。）

# joomla - Joomla 网站“未找到”错误

> ID：11372641
> 
> 赞同：0
> 
> 时间：2012-07-07T05:50:07.400
> 
> 标签：joomla, http-status-code-404, joomla2.5

我设置了一个 Joomla 2.5 站点，但是当我尝试访问该域时，屏幕上出现**间歇性错误，只是说“未找到”。**它有时在访问时发生`www`，有时与`http://`，有时与`http://www`。

这是错误：http: [//imgur.com/7f6ak](http://imgur.com/7f6ak)

我已经对域进行了彻底的检查，所有 DNS 和记录都按预期工作，并且在世界各地都能正确解析，这让我认为这一定是某种 Joomla 错误。我也尝试将站点域输入到配置文件中的 $live_url 中，但它仍然发生了。

非常感谢任何帮助或想法

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T09:19:26.490

Either you installed Joomla to another directory or the DNS still haven't resolved. Try to ping your site to see which IP it's responding to.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T17:24:55.003

简而言之，*有时*找不到您的站点，因此不知道您是托管站点还是使用服务...

如果我们没有在负载均衡器上的所有服务器上复制站点，我们偶尔会遇到这种情况 - 也许检查您的所有服务器是否都有该站点，或者您的主机是否具有负载均衡并且没有正确传播。还要确保 apache 或 htaccess 设置是否相同，以说明 www 与否。

# android - 如何在 Android 中为 Layout (RelativeLayout) 设置图像边框？

> ID：11372643
> 
> 赞同：1
> 
> 时间：2012-07-07T05:50:12.007
> 
> 标签：android, border

我想使用边框图像如下：

![在此处输入图像描述](../Images/3cc36ef6d3fc21baa46303263a208dbd.png) 为布局设置边框...？我应该这样做吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-07T05:55:19.137

```
<?xml version="1.0" encoding="UTF-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android">
<solid android:color="#FFFFFF" />
<stroke android:width="1dp" android:color="#000000" />
<padding android:left="1dp" android:top="1dp" android:right="1dp" android:bottom="1dp" /></shape> 
```

将此文件另存为`customborder.xml`文件 `drawbale`夹。在你的布局文件中添加这一行`android:background="@drawable/customborder"`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-07T16:28:13.460

您可以制作一个 9-patch 图像作为背景。使中间透明并按照您想要的方式填充边框。

这是官方文档：http: [//developer.android.com/guide/topics/graphics/2d-graphics.html#nine-patch](http://developer.android.com/guide/topics/graphics/2d-graphics.html#nine-patch)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-07T05:54:39.903

您可以做的是创建一个自定义的可绘制形状，该形状将用作 ImageView 的背景，这将创建一个边框。

类似于下面的xml，您可以自己自定义。放到drawable/image_border.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android" >

    <solid android:color="#FFFFFF" />

    <stroke
        android:width="1dp"
        android:color="#000000" />

    <padding
        android:bottom="1dp"
        android:left="1dp"
        android:right="1dp"
        android:top="1dp" />

</shape> 
```

应用它作为 ImageView 的背景。它应该为您的 ImageView 创建一个边框。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-05-24T09:39:24.567

首先创建简单的border.xml并保存到drawable

```
<?xml version="1.0" encoding="utf-8"?>
<layer-list xmlns:android="http://schemas.android.com/apk/res/android">
 <item>
 <shape android:shape="rectangle" >
 <corners android:radius="15dip" />
 <solid android:color="#00000000" />
<stroke android:width="2dp" android:color="#000000"/>
</shape>
</item>
</layer-list> 
```

然后在设置线性/相对布局的背景之后

```
android:background="@drawable/imageee_color" 
```

# c# - 如果该字符串可能为空，我如何在 C# 中获取字符串的子字符串和长度？

> ID：11372644
> 
> 赞同：1
> 
> 时间：2012-07-07T05:50:12.017
> 
> 标签：c#

我有以下字符串：

```
var temp = null;
var temp = "";
var temp = "12345678";
var temp = "1234567890"; 
```

我需要做的是，如果输入变量的长度为 8 或 10 个字符，是否有一个函数可以为我提供输入变量的最后四位数字。否则我需要它返回“”；

有没有一种简单的方法可以在 C# 中做到这一点。我只是不确定如何处理 null，因为如果我得到 null 的长度，那么我认为这会给我一个错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T05:55:38.877

```
int length = (temp ?? "").Length;
string subString = "";
if(length == 8 || length == 10)
{
   subString = temp.Substring(length - 4);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-07T05:56:41.997

您可以使用 IsNullOrEmpty，如果字符串为空或空，则子字符串是不可能的。

```
if (!String.IsNullOrEmpty(str) && (str.Length == 8 || str.Length == 10)) 
{
    string substr = str.Substring(str.Length-4);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-07T05:57:50.770

试试这个

```
string YourFunctionName(string input)
    {
        string rVal = "";
        if (string.IsNullOrEmpty(input))
            return rVal;
        if (input.Length == 8 || input.Length == 10)
            rVal = input.Substring(input.Length - 4);
        return rVal;
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-07T07:08:37.390

如果写一个函数，我可能会这样写：

```
string GiveMeABetterName (string input) {
    if (input != null
          && (input.Length == 8 || input.Length == 10)) {
        return input.Substring(input.Length - 4);
    } else {
        return "";
    }
} 
```

从所有答案都可以看出，有多种方法可以实现这一点。

# ios - 如何使用系统 API 在 iOS 的滚动视图中绘制插入符号？

> ID：11372646
> 
> 赞同：2
> 
> 时间：2012-07-07T05:50:17.637
> 
> 标签：ios, cursor, caret

我正在开发一个编辑应用程序，该视图继承自滚动视图，并且我手动绘制了大部分内容。我需要一个插入指示器，它可能指的是插入符号（我知道 Windows 使用这个术语）或光标（不是鼠标光标）。我不确定苹果使用什么术语。我之前用谷歌搜索过，我知道我可以手动将它画成一条线，或者在它上面创建一个清晰的背景文本视图，但我不喜欢这些方式。我希望有系统 API 可以做到这一点，它更原生。任何人都可以弄清楚吗？

# c++ - 引用捕获异常时未创建临时对象？

> ID：11372648
> 
> 赞同：2
> 
> 时间：2012-07-07T05:50:28.087
> 
> 标签：c++, visual-c++, exception, exception-handling

```
class Error1
{

public:

int errorcode;
Error1(int x):errorcode(x){ cout<<"CTOR Error1"<<endl; }
//Error1(Error1& obj ){
//    errorcode = obj.errorcode;
//    cout<<"CopyCTOR Error1"<<endl;
//}
~Error1(){cout<<"DTOR Error1"<<endl; }
};

void fun()
{
cout<<"Inside fun"<<endl;
throw(Error1(5));
}

int main()
{
try{

    fun();
}
catch(Error1& eobj)
{
    cout<<"Error1 type occured with code:"<<eobj.errorcode<<endl;
}
cin.get();

} 
```

输出：

```
Inside fun

CTOR Error1

DTOR Error1

Error1 type occured with code:5

DTOR Error1 
```

此输出表明 Error1 对象是为 catch 处理程序复制构造的。由于没有为 Error1 对象定义复制构造函数，因此使用了默认复制构造函数。

当我取消注释用于定义复制构造函数的注释部分时，我得到以下输出。

```
Inside fun

CTOR Error1

Error1 type occured with code:5

DTOR Error1 
```

为什么只有一个 DTOR 被调用？即使异常被引用捕获，我相信仍然会创建一个临时的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T06:30:12.497

你用的是什么编译器？

当您使用参数引入（即取消注释）您的复制构造函数版本时`Error1& obj`，代码应该变得无效。`throw`应该能够创建其参数的副本，而您的复制构造函数版本会禁用临时对象的复制。代码格式不正确。如果您的编译器接受它，可能是因为它非法允许将非常量引用绑定到临时对象（我怀疑它是启用了扩展的 MSVC++ 编译器）。

原始实验按预期/允许的方式工作。的参数`throw`被复制到内部临时文件中，该临时文件稍后用于初始化`catch`参数。尽管允许编译器直接使用您的原始临时文件，但相应地延长了它的生命周期。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-07T06:53:48.527

可能还有其他错误，但我现在看到的是`throw(Error1(5));`创建了一个临时（或`rvalue`）类型`Error1`。你想要一个`lvalue`，这意味着你应该这样做`throw(*new Error1(5));`（我相信这会造成内存泄漏，但我可能是错的），或者你可以创建一个全局`Error1`对象并抛出它。

**PS：**`throw(*new Error1(5));`如果有人想发表评论，我很想知道是否会造成内存泄漏。会`catch`破坏它捕获的物体吗？如果是这样，我认为您只需`Error1`在需要时创建新的 s 就可以了。

# iphone - 如何在 TabBarController 中添加更多按钮？

> ID：11372649
> 
> 赞同：-4
> 
> 时间：2012-07-07T05:50:35.380
> 
> 标签：iphone, uitabbarcontroller

我正在开发一个应用程序。一个小问题是，我们在这里使用一个 TabBarController 应用程序。我们在标签菜单中添加了一些 NavigationControllers，我们成功完成了。一个要求是在最后一个 tabBarButton 中我们添加了一个更多按钮。但它不是一个视图。只是一个简单的按钮。当我们按下这些按钮时，它们会执行一些操作。我试过了，但没有从我这边完成。有你给我一些指导..提前谢谢..

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-07T10:37:19.377

当您添加超过 5 个`UIViewController`对象时`UITabBarController`，iOS 会自动为您创建**更多**按钮。

来自[UITabBarController 的 Apple 文档](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UITabBarController_Class/Reference/Reference.html)

> **更多导航控制器**
> 
> 选项卡栏用于显示自定义项目的空间有限。如果将六个或更多自定义视图控制器添加到选项卡栏控制器，则选项卡栏控制器仅显示前四个项目以及选项卡栏上的标准更多项目。点击更多项目会弹出一个标准界面，用于选择剩余项目。
> 
> 标准更多项目的界面包括一个编辑按钮，允许用户重新配置选项卡栏。默认情况下，允许用户重新排列选项卡栏上的所有项目。但是，如果您不希望用户修改某些项目，您可以从可定制的ViewControllers 属性中的数组中删除适当的视图控制器。

# qt - 从命令行运行的 Qt Quick 应用程序

> ID：11372650
> 
> 赞同：0
> 
> 时间：2012-07-07T05:50:41.147
> 
> 标签：qt, qt-quick

当我尝试从命令行运行 Qt Quick 桌面应用程序 exe 时，除了一个普通的空窗口之外，它没有显示任何内容。但是当我从 Qt 创建者运行时，它工作正常。

请让我知道我错过了什么吗？如何从命令行运行 Qt Quick 项目？

谢谢，BR

# android - 我忘记了我的 SharedPreferences 文件的名称。

> ID：11372651
> 
> 赞同：2
> 
> 时间：2012-07-07T05:50:52.760
> 
> 标签：android, sharedpreferences

我忘记了我不久前创建的 SharedPreferences 文件的名称。我的平板电脑没有root。有没有办法查看/列出所有已创建的 SharedPreferences 文件？如果没有，那么似乎我有一块内存，我再也无法访问了。

1.  我已经尝试过 adb shell >> 导航到包 >> ls 方法。但我没有扎根，所以我收到回复：“opendir failed, Permission denied”

2.  我在我的项目目录以及 Eclipse 内部环顾四周，我找不到任何看起来像 sharedpreferences 文件的文件名。

3.  我已经通过 USB 将我的平板电脑连接到我的 PC 并从 Windows 中搜索文件资源管理器，Android > 数据 > 没有列出我的项目。

我要做什么？如何找出过去创建的 SharedPreferences 文件的所有名称？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T05:53:43.427

在您的 Android 模拟器上安装该应用程序并使用 DDMS 文件资源管理器查找 :)

# php - _POST 数据中的 PHP

> ID：11372656
> 
> 赞同：0
> 
> 时间：2012-07-07T05:51:42.107
> 
> 标签：php, html

最近我遇到了一种情况，在 _POST 设置中使用动态变量很有价值，但它似乎不起作用。例如：

```
for($i = 0; $i<$limit; $i++){
    if (isset($_POST['value_{$i}'])){
    // do something
    }
} 
```

_POST 的值工作正常；如果我在那里硬编码一个“1”或“2”，我就会得到我的数据。它似乎与 _POST 中的 {$i} 不一致。有人知道为什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T05:53:35.630

您需要使用双引号来解析字符串中的变量，例如

```
for($i = 0; $i<$limit; $i++){
    if (isset($_POST["value_{$i}"])){
    // do something
    }
} 
```

[http://www.php.net/manual/en/language.types.string.php#language.types.string.syntax.double](http://www.php.net/manual/en/language.types.string.php#language.types.string.syntax.double)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-07T05:55:12.237

您可以将其与单引号一起使用，但将其连接起来

```
for($i = 0; $i<$limit; $i++){
        if (isset($_POST['value_'.$i])){
        }
    } 
```

# magento - Magento 编译未在管理面板中启用

> ID：11372661
> 
> 赞同：1
> 
> 时间：2012-07-07T05:53:21.503
> 
> 标签：magento

我试图在 Magento 管理面板中启用**“编译” 。**当我单击启用按钮时，它显示“**编译器包含路径已启用**”消息，但 magento“**编译器状态**”显示“**禁用”**并且按钮在右上角显示“**启用”选项。**

如何在管理面板中解决此问题？请建议我解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T22:58:32.903

Web 服务器写入的权限`includes/`很可能是无效的。

启用/禁用编译器`includes/config.php`文件时，如果设置适当的权限不起作用，请尝试注释掉文件`require`中的两个语句`config.php`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-14T00:39:10.853

我想补充：

APC 可以通过加载以前缓存的 php 文件来阻止启用编译。在包含文件夹上正确设置权限后，在 magento 上启用缓存。然后通过重新启动主机进程来重新启动 APC。在带有 apache 的 Debian 服务器上，运行 service apache2 restart。然后刷新屏幕，将启用编译。

# ajax - 在 ASP.NET MVC3 中使用 Ajax 进行 CRUD 的最佳方法

> ID：11372663
> 
> 赞同：0
> 
> 时间：2012-07-07T05:53:35.063
> 
> 标签：ajax, asp.net-mvc, asp.net-mvc-3, crud

我有一个简单的表格，需要使用 Ajax 编辑 - 保存、新建 - 保存和删除？你的建议是什么？你在这个问题上使用什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T07:47:09.607

我会将 jqueryui 的 dialog() 与 jquery ajax 一起使用，并带有部分视图。

# eclipse - 如何读取日食错误

> ID：11372672
> 
> 赞同：1
> 
> 时间：2012-07-07T05:54:42.510
> 
> 标签：eclipse

有人可以在这里解释如何准确定位 eclipse 中的错误吗？例如像这样..

```
07-07 00:46:34.968: E/AndroidRuntime(401): FATAL EXCEPTION: main
07-07 00:46:34.968: E/AndroidRuntime(401): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.localhost.one/com.localhost.one.Main}: java.lang.NullPointerException
07-07 00:46:34.968: E/AndroidRuntime(401):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663)
07-07 00:46:34.968: E/AndroidRuntime(401):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
07-07 00:46:34.968: E/AndroidRuntime(401):  at android.app.ActivityThread.access$2300(ActivityThread.java:125)
07-07 00:46:34.968: E/AndroidRuntime(401):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
07-07 00:46:34.968: E/AndroidRuntime(401):  at android.os.Handler.dispatchMessage(Handler.java:99)
07-07 00:46:34.968: E/AndroidRuntime(401):  at android.os.Looper.loop(Looper.java:123)
07-07 00:46:34.968: E/AndroidRuntime(401):  at android.app.ActivityThread.main(ActivityThread.java:4627)
07-07 00:46:34.968: E/AndroidRuntime(401):  at java.lang.reflect.Method.invokeNative(Native Method)
07-07 00:46:34.968: E/AndroidRuntime(401):  at java.lang.reflect.Method.invoke(Method.java:521)
07-07 00:46:34.968: E/AndroidRuntime(401):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
07-07 00:46:34.968: E/AndroidRuntime(401):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
07-07 00:46:34.968: E/AndroidRuntime(401):  at dalvik.system.NativeStart.main(Native Method)
07-07 00:46:34.968: E/AndroidRuntime(401): Caused by: java.lang.NullPointerException
07-07 00:46:34.968: E/AndroidRuntime(401):  at org.json.JSONTokener.nextCleanInternal(JSONTokener.java:112)
07-07 00:46:34.968: E/AndroidRuntime(401):  at org.json.JSONTokener.nextValue(JSONTokener.java:90)
07-07 00:46:34.968: E/AndroidRuntime(401):  at org.json.JSONArray.<init>(JSONArray.java:87)
07-07 00:46:34.968: E/AndroidRuntime(401):  at org.json.JSONArray.<init>(JSONArray.java:103)
07-07 00:46:34.968: E/AndroidRuntime(401):  at com.localhost.one.Main.onCreate(Main.java:80)
07-07 00:46:34.968: E/AndroidRuntime(401):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
07-07 00:46:34.968: E/AndroidRuntime(401):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
07-07 00:46:34.968: E/AndroidRuntime(401):  ... 11 more 
```

Eclipse IDE 非常棒，因为它有很多插件，但缺少 VS 的很多东西。如果有人可以告诉我如何准确定位我的错误或我的空指针在哪里，从什么变量，从 Eclipse 中的什么方法？谢谢。在eclipse中查找错误非常耗时..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-07T06:01:15.927

在这里你可以找到你的包名和错误

```
Caused by: java.lang.NullPointerException <<<<Error
07-07 00:46:34.968: E/AndroidRuntime(401):  at org.json.JSONTokener.nextCleanInternal(JSONTokener.java:112)
07-07 00:46:34.968: E/AndroidRuntime(401):  at org.json.JSONTokener.nextValue(JSONTokener.java:90)
07-07 00:46:34.968: E/AndroidRuntime(401):  at org.json.JSONArray.<init>(JSONArray.java:87)
07-07 00:46:34.968: E/AndroidRuntime(401):  at org.json.JSONArray.<init>(JSONArray.java:103)
07-07 00:46:34.968: E/AndroidRuntime(401):  at com.localhost.one.Main.onCreate(Main.java:80)

Line no.80 and class name Main.java 
```

# jquery - jquery 或 javascript 在正则表达式之前对 html 对象的属性进行排序

> ID：11372682
> 
> 赞同：0
> 
> 时间：2012-07-07T05:56:01.130
> 
> 标签：jquery, html, regex, sorting

作为上一个问题的后续，[使用 jquery 使用 regex 在 .attr() 上查找 .each](https://stackoverflow.com/questions/11363585/using-jquery-to-find-each-on-attr-with-regex/11363790#comment14984726_11363790)，

我想在通过 .each() 运行属性之前按字母顺序对属性进行排序。最终输出是按属性顺序添加子 div。

```
<div id="myElement" extra1="a" stuff="z" extra9="c" more="y" extra5="b" /div> 
```

当我通过下面的代码解析它时，它输出值`b,c,a`，我需要先对元素进行排序，`extra1, extra5, extra9, more, stuff`然后通过 .each()+regex 运行它，这样值就出来了`a,b,c`

```
var el = $('#myElement');
var attributes = el[0].attributes;

$.each(attributes,function(i,attr){
var name = attr.nodeName;
var val = attr.nodeValue;
var regex = /^extra\d$/;

  if(name.match(regex)) {
    $(parentDiv).append("<div id="+val+" /div>");
  }
});​ 
```

thx提前艺术

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T06:10:29.647

根据[这个 MDN 文档](https://developer.mozilla.org/en/DOM/Node.attributes)，属性集合是一个映射，而不是一个数组，因此它没有定义的顺序。如果你想让它排序，你首先必须把它放在数组中，排序，然后`.each()`在排序后的数组上做。

或者，您可以将您的结果收集`.each()`到一个数组中，对这些结果进行排序，然后在最后以所需的顺序附加排序后的结果。查看您的代码，我认为工作量较少，因此您可以这样做：

```
var el = $('#myElement');
var attributes = el[0].attributes;
var output = [];

$.each(attributes,function(i,attr){
    var name = attr.nodeName;
    var val = attr.nodeValue;
    var regex = /^extra\d$/;

    if(name.match(regex)) {
        output.push("<div id="+val+" /div>");
    }
});​
$(parentDiv).append(output.sort().join("")); 
```

如果您的属性可以按字典顺序排序并且您不超出`extra9`. 如果它超出了单个数字，那么您必须将数字转换为数字并使用自定义排序函数生成正确的排序顺序，如下所示：

```
var el = $('#myElement');
var attributes = el[0].attributes;
var output = [];
var regex = /^extra(\d+)$/;

$.each(attributes,function(i,attr){
    var name = attr.nodeName;
    var val = attr.nodeValue;
    var matches, item;

    if(matches = name.match(regex)) {
        item = {};
        item.html = "<div id="+val+" /div>";
        item.num = parseInt(matches[1], 10);
        output.push(item);
    }
});​
// sort array of objects with a custom sort function
output.sort(function(a, b) {
    return(a.num - b.num);
});
// append data in correct order now that the items are sorted
for (var i = 0; i < output.length; i++) {
    $(parentDiv).append(output[i].html);
} 
```

# android - Nexus 的 AutoCompletetextView 问题（可能是 4.0.X）

> ID：11372684
> 
> 赞同：0
> 
> 时间：2012-07-07T05:56:12.643
> 
> 标签：android, android-4.0-ice-cream-sandwich, autocompletetextview

我的问题是我有一个庞大的自动完成列表。例子：

1.  A店
2.  B店
3.  C店
4.  D店
5.  F店
6.  H店
7.  商店我

如您所见，他们都使用 Store，当我开始输入 store 时，我在手机中看到 (...)，在那里我可以看到其他商店，但如果我在其中选择一个 (...)，它将被添加到自动完成，而不是由 OnItemClick 处理。有没有办法解决这个问题？

谢谢指教

示例图片 ![在此处输入图像描述](../Images/5234917c0cd138d115df13f6bc6bc38e.png) 这里是商店搜索

![在此处输入图像描述](../Images/287dab6b8a4e7cb2ee140419dde82cb2.png) 这里我点击了Store B，你可以看到它是由 OnItemClick 处理的 Toast

![在此处输入图像描述](../Images/d653948017ebaf2314b65b1c5a131296.png) 在这里您可以看到 (...) 额外的商店。![在此处输入图像描述](../Images/038cd17a5191eb6a150ce348e2863d54.png) 最后你可以看到它被添加到 AutoCompleteTextView 而不是由 OnItemClick 处理

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T01:59:16.543

好吧，这是ICS的问题，现在我在JB，问题就消失了。

# silverlight - Silverlight 图表系列中的数据点样式（ColumnSeries/BarSeries/LineSeries）

> ID：11372688
> 
> 赞同：1
> 
> 时间：2012-07-07T05:57:05.797
> 
> 标签：silverlight, charts, silverlight-toolkit

我对 Silverlight Charting 控件的样式有一个非常奇怪的问题。当我为 anyseries 创建 DataPointStyle 时，它​​会忽略现有的默认颜色组合。即使我没有在 DataPointStyle 的背景中设置任何内容，它也会开始向我显示相同的（橙色）颜色。

我想要的是创建一些自定义工具提示并保持背景不变。但它不适合我。任何建议都非常感谢。

干杯!

维诺德

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T10:14:31.127

我认为诀窍不是将数据点样式应用于图表本身，而是应用于构成调色板的各个颜色。

我从以下开始，它使用饼图。使用其他类型的图表时应适用相同的原则：

```
<UserControl x:Class="ChartPaletteDemo.MainPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:toolkit="http://schemas.microsoft.com/winfx/2006/xaml/presentation/toolkit"
    mc:Ignorable="d"
    d:DesignHeight="300" d:DesignWidth="400">
    <UserControl.Resources>
        <Style x:Key="pointStyle" TargetType="toolkit:DataPoint">
            <Setter Property="DependentValueStringFormat"
                    Value="The value is {0:N0}" />
            <Setter Property="RatioStringFormat" Value="" />
        </Style>
    </UserControl.Resources>

    <toolkit:Chart>
        <toolkit:Chart.Series>
            <toolkit:PieSeries ItemsSource="{Binding Path=Data}"
                               IndependentValueBinding="{Binding Path=Key}"
                               DependentValueBinding="{Binding Path=Value}"
                               DataPointStyle="{StaticResource pointStyle}" />
        </toolkit:Chart.Series>
    </toolkit:Chart>
</UserControl> 
```

这给了我一个带有自定义工具提示文本的饼图，但所有段都是橙色的。

下一步是设置自定义调色板。Silverlight Toolkit 图表使用的调色板是`ResourceDictionaryCollection`，每个包含`ResourceDictionary`代表调色板中的一种颜色。您可以在`Themes\generic.xaml`程序集中找到图表的“默认”调色板`System.Windows.Controls.DataVisualization.Toolkit`。您可以使用 Blend 或 ILSpy 等工具来获取此调色板。

我采用了这个“默认”调色板，并且：

*   删除了所有的setter `DataShapeStyle`（我不确定它们是否必要，但如果你愿意，你可以保留它们），
*   将`TargetType`每个`DataPointStyle`的更改`Control`为`toolkit:DataPoint`, 和
*   添加`BasedOn="{StaticResource pointStyle}"`到每个`DataPointStyle`.

最后一点是为每个调色板条目设置自定义工具提示格式的原因。

这给我留下了类似以下的内容，我将其添加到`<UserControl.Resources>`：

```
 <toolkit:ResourceDictionaryCollection x:Key="chartPalette">
        <!-- Blue -->
        <ResourceDictionary>
            <RadialGradientBrush x:Key="Background" GradientOrigin="-0.1,-0.1"
                                 Center="0.075,0.015" RadiusX="1.05"
                                 RadiusY="0.9">
                <GradientStop Color="#FFB9D6F7" />
                <GradientStop Color="#FF284B70" Offset="1" />
            </RadialGradientBrush>
            <Style x:Key="DataPointStyle" TargetType="toolkit:DataPoint"
                   BasedOn="{StaticResource pointStyle}">
                <Setter Property="Background"
                        Value="{StaticResource Background}" />
            </Style>
        </ResourceDictionary>
        <!-- other styles copied similarly, but omitted for brevity -->
   </toolkit:ResourceDictionaryCollection> 
```

然后我`DataPointStyle="{StaticResource pointStyle}"`从 中删除`PieSeries`并添加`Palette="{StaticResource chartPalette}"`到`<toolkit:Chart>`元素中。当我运行应用程序时，我让饼图的四个部分使用不同的颜色。

致谢：大部分内容来自 atomlinson 在 Silverlight 论坛上的帖子 [http://forums.silverlight.net/post/330170.aspx](http://forums.silverlight.net/post/330170.aspx)。

# raphael - 以流程图连接器样式连接两个 Raphael 对象的 JavaScript 库？

> ID：11372689
> 
> 赞同：0
> 
> 时间：2012-07-07T05:57:15.670
> 
> 标签：raphael

我正在寻找适用于 Raphael 对象的 js 库。表示以流程图连接器样式连接多个 Raphael 对象。我与 jsplumb 一起工作，但与 Raphael 对象一起工作。所以请告诉我是否有人知道这样的js lib。提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T20:14:59.027

*   [德古拉](http://www.graphdracula.net/)很好，虽然不再很活跃。
*   Raphaël 提供了自己的扩展，称为*graffle*，就是为此目的而制作的。你可以玩[这个演示](http://raphaeljs.com/graffle.html)。

另请参阅[Dracula 的作者在类似帖子上的此答案](https://stackoverflow.com/questions/7034/graph-visualization-code-in-javascript/2366237#2366237)，其中列出了许多替代方案。

# html - Twitter bootstrap：如何摆脱 1200px 大屏？

> ID：11372696
> 
> 赞同：10
> 
> 时间：2012-07-07T05:59:47.760
> 
> 标签：html, css, twitter-bootstrap, less

如果您查看： http: [//twitter.github.com/bootstrap/scaffolding.html#responsive](http://twitter.github.com/bootstrap/scaffolding.html#responsive)他们几乎为每个设备提供了类别。我想消除最后一个支持设备条目：

```
Large display   1200px and up   70px    30px 
```

我是后端程序员，不是设计师，所以我的 css 知识有限。有人可以指出我需要修改的文件以摆脱对大显示器的支持吗？

谢谢！

（PS 如果有人想知道我为什么要这样做，这是公司标准等等等等 1024px 等等等等。）

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-06-26T01:02:37.783

如果您使用的是 maxcdn 版本的 bootstrap 或者只是不想接触源代码，只需在加载 bootstrap 样式表后粘贴以下 css 即可。

```
@media (min-width: 1200px) {
    .container,
    .navbar-static-top .container,
    .navbar-fixed-top .container,
    .navbar-fixed-bottom .container {
      width: 940px;
    }
    .row-fluid {
      width: 100%;
      *zoom: 1;
    }
    .row-fluid:before,
    .row-fluid:after {
      display: table;
      content: "";
      line-height: 0;
    }
    .row-fluid:after {
      clear: both;
    }
    .row-fluid [class*="span"] {
      display: block;
      width: 100%;
      min-height: 30px;
      -webkit-box-sizing: border-box;
      -moz-box-sizing: border-box;
      box-sizing: border-box;
      float: left;
      margin-left: 2.127659574468085%;
      *margin-left: 2.074468085106383%;
    }
    .row-fluid [class*="span"]:first-child {
      margin-left: 0;
    }
    .row-fluid .controls-row [class*="span"] + [class*="span"] {
      margin-left: 2.127659574468085%;
    }
    .row-fluid .span12 {
      width: 100%;
      *width: 99.94680851063829%;
    }
    .row-fluid .span11 {
      width: 91.48936170212765%;
      *width: 91.43617021276594%;
    }
    .row-fluid .span10 {
      width: 82.97872340425532%;
      *width: 82.92553191489361%;
    }
    .row-fluid .span9 {
      width: 74.46808510638297%;
      *width: 74.41489361702126%;
    }
    .row-fluid .span8 {
      width: 65.95744680851064%;
      *width: 65.90425531914893%;
    }
    .row-fluid .span7 {
      width: 57.44680851063829%;
      *width: 57.39361702127659%;
    }
    .row-fluid .span6 {
      width: 48.93617021276595%;
      *width: 48.88297872340425%;
    }
    .row-fluid .span5 {
      width: 40.42553191489362%;
      *width: 40.37234042553192%;
    }
    .row-fluid .span4 {
      width: 31.914893617021278%;
      *width: 31.861702127659576%;
    }
    .row-fluid .span3 {
      width: 23.404255319148934%;
      *width: 23.351063829787233%;
    }
    .row-fluid .span2 {
      width: 14.893617021276595%;
      *width: 14.840425531914894%;
    }
    .row-fluid .span1 {
      width: 6.382978723404255%;
      *width: 6.329787234042553%;
    }
    .row-fluid .offset12 {
      margin-left: 104.25531914893617%;
      *margin-left: 104.14893617021275%;
    }
    .row-fluid .offset12:first-child {
      margin-left: 102.12765957446808%;
      *margin-left: 102.02127659574467%;
    }
    .row-fluid .offset11 {
      margin-left: 95.74468085106382%;
      *margin-left: 95.6382978723404%;
    }
    .row-fluid .offset11:first-child {
      margin-left: 93.61702127659574%;
      *margin-left: 93.51063829787232%;
    }
    .row-fluid .offset10 {
      margin-left: 87.23404255319149%;
      *margin-left: 87.12765957446807%;
    }
    .row-fluid .offset10:first-child {
      margin-left: 85.1063829787234%;
      *margin-left: 84.99999999999999%;
    }
    .row-fluid .offset9 {
      margin-left: 78.72340425531914%;
      *margin-left: 78.61702127659572%;
    }
    .row-fluid .offset9:first-child {
      margin-left: 76.59574468085106%;
      *margin-left: 76.48936170212764%;
    }
    .row-fluid .offset8 {
      margin-left: 70.2127659574468%;
      *margin-left: 70.10638297872339%;
    }
    .row-fluid .offset8:first-child {
      margin-left: 68.08510638297872%;
      *margin-left: 67.9787234042553%;
    }
    .row-fluid .offset7 {
      margin-left: 61.70212765957446%;
      *margin-left: 61.59574468085106%;
    }
    .row-fluid .offset7:first-child {
      margin-left: 59.574468085106375%;
      *margin-left: 59.46808510638297%;
    }
    .row-fluid .offset6 {
      margin-left: 53.191489361702125%;
      *margin-left: 53.085106382978715%;
    }
    .row-fluid .offset6:first-child {
      margin-left: 51.063829787234035%;
      *margin-left: 50.95744680851063%;
    }
    .row-fluid .offset5 {
      margin-left: 44.68085106382979%;
      *margin-left: 44.57446808510638%;
    }
    .row-fluid .offset5:first-child {
      margin-left: 42.5531914893617%;
      *margin-left: 42.4468085106383%;
    }
    .row-fluid .offset4 {
      margin-left: 36.170212765957444%;
      *margin-left: 36.06382978723405%;
    }
    .row-fluid .offset4:first-child {
      margin-left: 34.04255319148936%;
      *margin-left: 33.93617021276596%;
    }
    .row-fluid .offset3 {
      margin-left: 27.659574468085104%;
      *margin-left: 27.5531914893617%;
    }
    .row-fluid .offset3:first-child {
      margin-left: 25.53191489361702%;
      *margin-left: 25.425531914893618%;
    }
    .row-fluid .offset2 {
      margin-left: 19.148936170212764%;
      *margin-left: 19.04255319148936%;
    }
    .row-fluid .offset2:first-child {
      margin-left: 17.02127659574468%;
      *margin-left: 16.914893617021278%;
    }
    .row-fluid .offset1 {
      margin-left: 10.638297872340425%;
      *margin-left: 10.53191489361702%;
    }
    .row-fluid .offset1:first-child {
      margin-left: 8.51063829787234%;
      *margin-left: 8.404255319148938%;
    }
} 
```

基本上它对 1200px 强制使用 960px css。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-07-07T06:19:36.090

好的，这并不难，从 bootstrap-responsive.css 的第 437 行开始，删除整个部分：

```
@media (min-width: 1200px) {
...
} 
```

现在只需更改这一行

```
@media (max-width: 979px) { 
```

对此：

```
@media (min-width: 1200px) { 
```

轻松破解！

编辑更好的解释：

如果您查看 bootstrap-responsive.css，然后查看除“媒体查询”之外的所有废话，您将基本上得到以下大纲：

```
/* Landscape phones and down */
  @media (max-width: 480px) { ... }

  /* Landscape phone to portrait tablet */
  @media (max-width: 767px) { ... }

  /* Portrait tablet to landscape and desktop */
  @media (min-width: 768px) and (max-width: 979px) { ... }

  /* Desktop */
  @media (max-width: 979px) { ... }

  /* Large desktop */
  @media (min-width: 1200px) { ... } 
```

看看它是如何逐渐扩大的？我所做的是删除最后一部分，然后将第二部分更改为最后一部分以取代它。

编辑：

顺便说一句，如果您使用 boostrap 自定义向导，您可以通过取消选择大型显示器支持在他们的 GUI 上执行此操作。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-10-23T08:23:32.710

无需破解或更新引导 CSS 文件。您可以通过限制容器进一步增长来禁用效果。采用：

```
.container-fluid,
.container {
  // Disable large-desktop breakpoint.
  max-width: $container-md;
} 
```

该`$container-md`值通常为`970px`，除非您更改了`$grid-gutter-width`. 对于 LESS，将`$`变量的 替换为`@`。对于常规 CSS，将变量替换为硬编码的像素大小。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-03-12T15:22:38.237

最好的只是删除：

```
@media (min-width: 1200px) { ... } 
```

它只会对`@media (max-width: 979px)`所有桌面尺寸使用格式

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-03-09T02:05:00.873

另一种方法是将 1200px 网格变量设置为常规网格值的那些值。使用此方法，您可以避免更新源并避免升级问题：

@gridColumnWidth1200：60px；

@gridGutterWidth1200：20 像素；

# css - 悬停时可见性不变

> ID：11372698
> 
> 赞同：1
> 
> 时间：2012-07-07T06:00:03.113
> 
> 标签：css, hover

我正在使用可见性属性制作一个简单的导航栏，其中包含悬停时的下拉菜单。但是当我悬停时，条件不会生效。这背后的逻辑是什么？

[http://jsfiddle.net/MAvQp/](http://jsfiddle.net/MAvQp/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-07T06:06:04.730

您的 html 格式错误，`ul`应该是非`li`兄弟姐妹的孩子

[小提琴](http://jsfiddle.net/MAvQp/4/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-07T06:13:51.697

您正在尝试使子项可见

```
ul li:hover ul{
    visibility: visible;
} 
```

但是子项`ul`没有嵌套在 中`li`，因此`ul li ul`与子项不匹配。因此，将您的 html 更改为类似

```
<ul>
    <li>Menu Item 1 
            <ul>
            <li>Sub-Menu1 Item 1</li>
            <li>Sub-Menu1 Item 2</li>
            <li>Sub-Menu1 Item 3</li>
            </ul>
    </li>
…

</ul> 
```

另请参阅[我的分叉小提琴](http://jsfiddle.net/LVVZz/)。

# python - 自动更正拼写检查器

> ID：11372700
> 
> 赞同：9
> 
> 时间：2012-07-07T06:00:12.000
> 
> 标签：python, r, spell-checking, nltk, aspell

我有一个 TSV（制表符分隔值）文件，我需要对拼写错误和组合词（即“我爱你”与“我爱你”）进行拼写检查。

我已经在我的机器上安装了 Aspell，并且可以使用 aspell() 函数通过 R 运行它。

```
files <- "train2.tsv"
 res <- aspell(files)
 str(res)
 summary(res) 
```

然而，在 R 中运行它的输出只是一个拼写错误的单词和可能的建议的列表。

```
>  summary(res)
Possibly mis-spelled words:
 [1] "amant"        "contaneir"    "creat"        "ddition"      "EssaySet"     "EssayText"    "experiament"  "expireiment"  "expirement"  
[10] "Fipst"        "infomation"   "Inorder"      "measureing"   "mintued"      "neccisary"    "officialy"    "renuminering" "rinsen"      
[19] "sticlenx"     "sucessfully"  "tipe"         "vineager"     "vinigar"      "yar"   

>  str(res)
Classes ‘aspell’ and 'data.frame':      27 obs. of  5 variables:
 $ Original   : chr  "EssaySet" "EssayText" "expirement" "expireiment" ...
 $ File       : chr  "train2.tsv" "train2.tsv" "train2.tsv" "train2.tsv" ...
 $ Line       : int  1 1 3 3 3 3 3 3 6 6 ...
 $ Column     : int  4 27 27 108 132 222 226 280 120 156 ...
 $ Suggestions:List of 27
  ..$ : chr  "Essay Set" "Essay-Set" "Essayist" "Essays" ...
  ..$ : chr  "Essay Text" "Essay-Text" "Essayist" "Sedatest" ...
  ..$ : chr  "experiment" "excrement" "excitement" "experiments" ...
  ..$ : chr  "experiment" "experiments" "experimenter" "excrement" ...
  ..$ : chr  "Amandy" "am ant" "am-ant" "Amanda" ...
  ..$ : chr  "year" "ya" "Yard" "yard" ... 
```

有没有办法让 aspell（或任何其他拼写检查器）自动更正拼写错误的单词？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-07T06:42:58.050

看起来您可以执行以下操作：

```
s = load_up_users_dictionary()

for word in text_to_check:
    if word not in s:
        new_words = s.suggest( word )
        replace_incorrect_word( word, new_words[0] )#Pick the first word from the returned list. 
```

只需快速浏览一下文档，您就可以自动使用建议的正确拼写。

[http://0x80.pl/proj/aspell-python/index-c.html](http://0x80.pl/proj/aspell-python/index-c.html)

编辑：意识到您可能不是在寻找 python 代码，但这将是使用 python 执行此操作的最简单方法，因为问题被标记为 python。可能有一种更有效的方法可以做到这一点，但是已经很晚了，首先想到的是。

# javascript - 创建自定义对象的二维数组

> ID：11372702
> 
> 赞同：1
> 
> 时间：2012-07-07T06:00:34.967
> 
> 标签：javascript, arrays, oop

以下代码的目标是创建一个二维数组，使得

*   Clip 是一个自定义对象
*   银行是 (8) 个剪辑的数组
*   银行是（8）银行的数组
*   bank[a][b] 可以访问每个剪辑，其中 a 是银行（银行）中的索引，b 是剪辑（剪辑）中的索引

在当前状态下，它返回未定义，唉，我不知道为什么。任何关于我做错了什么的建议将不胜感激

```
var banks = []

function Clip(a,b)

{
this.track = a
this.slot = b
}

function Bank(w)

{

for (var j, j = 0; j <= 7; j++) {
    var clips = []
    var aClip = new Clip(w,j);
    //post(i)
    //post(aClip.length)
    clips[j] = aClip
}
//post();
return clips
}

function makeBanks()

{

for (var k, k = 0; k <= 7; k++) {
    var aBank = Bank(k);
    //post(i)
    //post (aClip.length)
    banks[k] = aBank
}
}

makeBanks();

console.log(banks[0][0])​ 
```

提前谢谢了

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-07T06:49:15.503

您最大的错误在这里（内部`Bank`）：

```
for (var j, j = 0; j <= 7; j++) {
    var clips = []
    var aClip = new Clip(w,j);
    //post(i)
    //post(aClip.length)
    clips[j] = aClip
} 
```

您每次通过循环都重新初始化`clips`，因此唯一保留的值是最后一个值（因为循环在您有机会再次覆盖它之前终止）。为了说明，这是第一次调用返回的内容`Bank`：

```
[undefined, undefined, undefined, undefined, undefined, 
     undefined, undefined, Clip { track=0, slot=7}] 
```

将声明移到循环之外解决了这个基本问题：

```
var clips = [];
for (var j = 0; j <= 7; j++) {
    var aClip = new Clip(w, j);
    clips[j] = aClip;
}
return clips; 
```

## 额外的清理

现在我们已经解决了基本问题，我们可以做更多的事情来清理它：

*   始终使用分号
*   除非您打算将它们用作构造函数，否则不要以首字母大写字母命名函数
*   一致缩进
*   不要依赖全局变量
*   一步声明和分配（即`var j, j = 0`应该是`var j = 0`）

结果：

```
function Clip(a, b) {
    this.track = a;
    this.slot = b;
}

function makeBank(w) {
    var clips = [];
    for (var j = 0; j <= 7; j++) {
        var aClip = new Clip(w, j);
        clips[j] = aClip;
    }
    return clips;
}

function makeBanks() {
    var banks = [];
    for (var k = 0; k <= 7; k++) {
        var aBank = makeBank(k);
        banks[k] = aBank;
    }
    return banks;
}

var banks = makeBanks();
console.log(banks[0][0]); 
```

# php - PHP文件不会在浏览器中更新

> ID：11372704
> 
> 赞同：10
> 
> 时间：2012-07-07T06:01:05.503
> 
> 标签：php, browser

出于某种奇怪的原因，每次我更新文件时，它都不会在浏览器内更新（localhost - wampserver）。更加具体。如果我有一个简单的 php 脚本：

```
echo "hello world"; 
```

它在浏览器中运行良好，并显示文本“hello world”。

但是，如果我将其更新为

```
echo "goodbye world"; 
```

并刷新浏览器，没有任何反应。文本仍然是“hello world”。

这以前不是问题，并且非常令人耳目一新。我尝试清除浏览器缓存，在多个浏览器上进行测试，重新启动我的 wamp 服务器，然后重新启动计算机。似乎没有任何工作。

似乎更新代码的唯一方法是从我的 IDE 运行脚本。然后它会在浏览器中显示更新的代码。如何解决这个问题？我希望它恢复到原来的状态并能够从浏览器中刷新。

使用 wampserver php - 5.3.13、apache 2.2.22

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2016-06-02T14:09:00.673

您的脚本使用[opcache](http://php.net/manual/en/intro.opcache.php)功能缓存在内存中。禁用它`php.ini`：

```
opcache.enable = 0 
```

但是您还必须**重新启动服务器**。如果您使用托管，请使用控制面板重新启动或尝试将 php 版本更改为另一个并还原。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-10-10T13:22:34.247

由于这是在 Google 上搜索此类问题时的第一个结果，我想补充一点，**如果您启用了 opcache，则不一定需要完全禁用它**。

您可能已`opcache.validate_timestamps`设置为`0`根据上次修改日期停止自动更新文件。

在 php.ini 文件中修改此参数：

```
opcache.validate_timestamps = 1 
```

重新启动 php-fpm 服务（或 apache，具体取决于您的情况），您的脚本在下次执行时应该是最新的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-10-30T14:58:42.623

我建议重新启动服务器并禁用 php.ini 中的脚本：

```
opcache.enable = 0 
```

# jsp - 如何从 Mysql 获取数据在 servlet 中的文本值中

> ID：11372706
> 
> 赞同：0
> 
> 时间：2012-07-07T06:01:07.087
> 
> 标签：jsp, servlets

如何从 Mysql 获取数据在 servlet 中的文本值中

我尝试了这段代码，但它不起作用

```
 while(rs.next()){
        out.println("<form action=\"userpage\" method=\"post\">"
                + "    <input type=\"text\" name=\"ID_customer\" value=\"<%=rs.getString(1)%>\">"
                 +  "</form>");
           } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T06:30:08.203

您应该必须创建单独的*视图*(.jsp)，而不是在 .js 中生成 html 的动态内容`Servlet`。

首先`List<T>`在 servlet 或模型类中创建表示数据库结果的对象，并通过方法将该`list`对象分配给请求（请求范围） 。`request.setAttribute()`

```
public class Customer
{
   private int id;
   .....
   public void setId(int id) { }
   public int getId() { return id;}
} 
```

在 servlet 中，

```
List<Customer> listOfCustomer=new ArrayList<Customer>();
//code to populate the listOfCustomer from database

request.setAttribute("list",listOfCustomer);
request.getRequestDispatcher("/show.jsp").forward(request,response); 
```

*视图*show.jsp应该是：

```
<c:forEach var="customer" items="${listOfCustomer}">
   <form method='post' action='servlet_url'>
        <input type="text" 
               name="ID_customer" 
               value="${customer.id}" />
   </form>
</c:forEach> 
```

# javascript - RequireJs 定义默认的 deps

> ID：11372709
> 
> 赞同：4
> 
> 时间：2012-07-07T06:01:43.547
> 
> 标签：javascript, requirejs, js-amd

通常一个 requirejs 模块看起来像：

```
define('ModuleName', ['jquery', 'underscore', 'backbone'], function($, _, Backbone){

}); 
```

因为我的设置中的每个文件都需要下划线和主干，所以我希望它们在模块中自动可用，而不必将它们定义为依赖项。

所以像：

```
define('ModuleName', ['jquery'], function($){
    $("div.someClass").addClass('hide'); // works
    var Model = Backbone.Model.extend(); // works too
}); 
```

这可能吗？

如果是的话，我必须寻找的关键字是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T06:10:39.680

您感兴趣的模块必须附加到外部范围。默认情况下，Backbone、Underscore、jQuery 等保持附加到全局范围，除非您对它们调用 noConflict()（并非所有模块都提供这种精确性）。将您的模块附加到全局范围不是一个很好的解决方案，但可以完成您的要求，并且无论如何都是默认行为。更好的选择是定义一个外部模块（或只是一个 require() 调用），除了您命名的子模块之外，它还包含这些依赖项。否则，使用 RequireJS 的大部分理由都会丢失。

编辑例如：

```
require(['underscore', 'backbone'],
    function (_, Backbone) {
        define('ModuleName', ['jquery'], function($){
            $("div.someClass").addClass('hide'); // works
            var Model = Backbone.Model.extend(); // works too
         });

        //Other modules here, otherwise this is pointless too
    }
); 
```

即使这仅在您在同一个文件中定义多个命名模块时才有用。不幸的是，从我的角度来看，*最好*的解决方案是显式导入您的模块并允许隐式模块命名，但上面的示例最接近您的要求。至于隐式模块名称，来自[RequireJS api docs](http://requirejs.org/docs/api.html)：

> 您可以自己显式命名模块，但这会降低模块的可移植性——如果将文件移动到另一个目录，则需要更改名称。

# java - 在 Java 中使用 AudioClip 播放声音 - JackRouter 错误？

> ID：11372710
> 
> 赞同：2
> 
> 时间：2012-07-07T06:01:52.097
> 
> 标签：java, audio, plugins, applet, javasound

我对 Java 比较陌生，但现在我在这里更深入地研究了一点。

我正在创建一个显示鸡按钮的程序，单击此按钮后，将播放鸡咯咯声的音频剪辑。看起来很简单，但我真的根本无法让音频正常工作。

我正在使用 AudioClip 来尝试完成此操作。我用来自学的书，Y. Daniel Liang 的 [i]Introduction to Java Programming[/i]（第八版）告诉我，尽管 AudioClip 位于非 Applet 程序中，但我仍然可以使用它.

不过，我无法让它发挥作用，所以这就是我到目前为止所拥有的。我会给你我的代码，然后给你我收到的错误。

顺便说一句，我暂时在 Mac 上，还没有机会在 Windows 上试用它。不知道为什么这会影响任何事情，但你去了。

```
//this is the class that plays the sound. The main class follows.

import javax.swing.JApplet;
import java.applet.*;
import java.net.URL;

public class ChickenSound extends JApplet
{
private AudioClip chSound; //creates AudioClip

public ChickenSound()
{
    URL url = getClass().getResource("resources/chicken-sound.wav"); //creates a url that is the path of the soundfile
    chSound = this.newAudioClip(url); //sets AudioClip equal to the url
    chSound.play(); //plays AudioClip
}
}

//main class
// some of these imports are unnecessary but I will clean them up later
import java.applet.*;
import java.awt.*;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.net.*;

import java.net.URL;
import javax.swing.*;

public class ChickenButton extends JFrame
{
private ImageIcon chBtnIcon = new ImageIcon("resources/chicken-side.png");
private JButton chBtn = new JButton(chBtnIcon);
private JPanel panel = new JPanel(new GridBagLayout());

public ChickenButton() //main window
{
    GridBagConstraints c = new GridBagConstraints();

    chBtn.setBorder(BorderFactory.createEmptyBorder());
    chBtn.setContentAreaFilled(false);
    Font bigFont = new Font("Times New Roman", Font.BOLD, 25);
    JLabel chLbl = new JLabel("Click the Chick'n");
    chLbl.setFont(bigFont);

    c.gridheight = 1;
    c.gridx= 0;
    c.gridy = 0;
    c.weighty = 2;
    panel.add(chLbl,c);
    c.gridheight=2;
    c.gridx= 0;
    c.gridy = 1;
    c.weighty = 2;
    panel.add(chBtn, c);
    add(panel);

    chBtn.addActionListener(new ChLstnr()); //creates click listener for button
}

public static void main(String[] args)
{
    ChickenButton window = new ChickenButton();
    window.setLocationRelativeTo(null);
    window.setTitle("Chick'n Button");
    window.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    window.setSize(300, 400);
    window.setVisible(true); //creates window

}

class ChLstnr implements ActionListener
{   
    public void actionPerformed(ActionEvent e) 
    {
        System.out.println("Cluck cluck cluck"); //for button functionality testing purposes (and it works)
        ChickenSound chSnd = new ChickenSound(); //this is supposed to play the sound. This doesn't work.
    }   
}

} 
```

我收到的错误是......

```
2012-07-06 15:44:33.365 java[41264:ff03] Error loading /Library/Audio/Plug-Ins/HAL/JackRouter.plugin/Contents/MacOS/JackRouter:  dlopen(/Library/Audio/Plug-Ins/HAL/JackRouter.plugin/Contents/MacOS/JackRouter, 262): no suitable image found.  Did find:/Library/Audio/Plug-Ins/HAL/JackRouter.plugin/Contents/MacOS/JackRouter: no matching architecture in universal wrapper

2012-07-06 15:44:33.367 java[41264:ff03] Cannot find function pointer New_JackRouterPlugIn for factory 7CB18864-927D-48B5-904C-CCFBCFBC7ADD in CFBundle/CFPlugIn 0x102191490 </Library/Audio/Plug-Ins/HAL/JackRouter.plugin> (bundle, not loaded) 
```

我真的不知道这意味着什么。显然是和一个无法加载的音频插件有关，但我真的不知道。从看起来这可能是我的计算机出现的错误，而不是我弄乱 Java 的问题，但到目前为止我还没有找到解决方案。我已经用两个 IDE、Eclipse 和 Netbeans 进行了尝试，它们都产生了相同的错误。有谁知道这是怎么回事？

任何帮助是极大的赞赏。

谢谢。

编辑：它现在才有效。不知何故。

# java - 在不同的操作系统中使用 jar

> ID：11372716
> 
> 赞同：1
> 
> 时间：2012-07-07T06:03:26.610
> 
> 标签：java, android, jar

我在 Windows 7 操作系统中的 JRE 1.7 合规级别的 Java 项目的 Eclipse 中创建了一个 jar 文件。生成的 jar 在我的系统上的示例测试应用程序中运行良好。

现在我想在带有 JRE 1.6.0 的 Mac OS 上的我的 android 应用程序中使用这个 jar。是否会因此而出现任何冲突，因为`ClassNotFound Exception`在使用 ADT 20 或`davlik conversion failed error 1`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T06:27:28.283

为了让您的 android 项目在其他平台上编译，您需要确保您在应用程序中定位的 Android API 级别已安装在该平台上。我认为 Java 1.7 的任何功能都不会造成问题，因为 Android sdk 会限制您使用它们。

操作系统的改变不应该引起任何问题——这就是为什么他们说Java是平台无关的。

# python - 使用opencv python绑定将帧从网络摄像头保存到磁盘

> ID：11372718
> 
> 赞同：3
> 
> 时间：2012-07-07T06:03:53.857
> 
> 标签：python, opencv, webcam

我正在尝试使用 opencv 将来自网络摄像头的帧保存为 jpg 或 png 或其他格式。事实证明它比我想象的要困难，尽管这里有这样的例子：[Capturing a single image from my webcam in Java or Python](https://stackoverflow.com/questions/11094481/capturing-a-single-image-from-my-webcam-in-java-or-python)

我正在尝试这样做：

```
if __name__ == "__main__":
print "Press ESC to exit ..."

# create windows
cv.NamedWindow('Raw', cv.CV_WINDOW_AUTOSIZE)
cv.NamedWindow('Processed', cv.CV_WINDOW_AUTOSIZE)

# create capture device
device = 0 # assume we want first device
capture = cv.CaptureFromCAM(0)
cv.SetCaptureProperty(capture, cv.CV_CAP_PROP_FRAME_WIDTH, 640)
cv.SetCaptureProperty(capture, cv.CV_CAP_PROP_FRAME_HEIGHT, 480)

# check if capture device is OK
if not capture:
    print "Error opening capture device"
    sys.exit(1)

while 1:
    # do forever

    # capture the current frame
    frame = cv.QueryFrame(capture)
    if frame is None:
        break

    # mirror
    cv.Flip(frame, None, 1)

    # face detection
    detect(frame)

    # display webcam image
    cv.ShowImage('Raw', frame)

    # handle events
    k = cv.WaitKey(10)

    if k == 0x1b: # ESC
        print 'ESC pressed. Exiting ...'
        break

    if k == 0x63 or k == 0x43:
        print 'capturing!'
        s, img = capture.read()
        if s:
            cv.SaveImage("r'C:\test.jpg", img) 
```

如您所见，我尝试使用 Froyo 在另一个问题中建议的代码的修改，使其在按下字母 c 时捕获图像。它不起作用，我找不到使它起作用的文档。

请帮忙！非常感谢，亚历克斯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-07T06:24:50.633

更改您的保存部分如下：

```
if k == 0x63 or k == 0x43:
    print 'capturing!'
    cv.SaveImage("test.jpg",frame) 
```

它对我有用。由于您已经捕获了用于检测的帧，因此您需要再次捕获它以保存它。

cv.CaptureFromCam() 和 cv.VideoCapture() 也不同。他们不能混为一谈。

# c# - 在 iPhone 应用程序中使用来自 Sqlite 数据库的数据填充 UIPickerView --

> ID：11372719
> 
> 赞同：0
> 
> 时间：2012-07-07T06:04:19.433
> 
> 标签：c#, iphone, sqlite, xamarin.ios

我有一个带有表'BikeInfo'的**sqlite数据库**

```
[BikeID, BikeName] 
```

现在我希望我的pickerview 填充这个数据库中的自行车名称。在 .Net 中，这很容易。但是作为 MonoTouch 的一个完整的初学者，我不知道如何解决这个问题。我做了一些谷歌搜索，发现我必须创建某种从该类扩展的自定义`UIPickerViewModel`类并覆盖其各种方法。但仅此而已。我找不到任何示例代码、教程或任何东西。我已经为此奋斗了三天。我完全糊涂了。到目前为止，我已经编写了一个函数，它从表中获取数据并返回一个类对象列表[我编写的包含属性 BikeName 和 BikeId]。也许我在寻找所有错误的地方。但我需要以任何方式完成这项工作。

任何类型的教程或 C# 中处理此特定目标场景的示例代码都会对我有所帮助。

下一个目标是在用户触摸一个特定项目时显示一条警报消息，显示相应的自行车 ID。我认为我们必须在该自定义类中定义选定的事件。这是我从互联网上挑选的。

谢谢。

* * *

这是我到目前为止所做的。我创建了一个包含属性`BikeID`和`BikeName`.

```
namespace ASTONAPP
{
    public class PickerFacilityTemplate
    {
        public PickerFacilityTemplate ()
        {
        }

        public int BikeID{get; set;}
        public string BikeName{get; set;}
    }
} 
```

之后，我在我的数据库处理程序类中编写了该函数，该函数返回上述类类型的类对象列表。

```
public List<PickerFacilityTemplate> FetchFacility()
{
    DataSet ds = new DataSet ();
    string sql = "select * from BikeInfo order by BikeName";
    this.CreateDBConnection ();
    SqliteDataAdapter sda = new SqliteDataAdapter (sql, sconn);
    sda.Fill (ds);
    List<PickerFacilityTemplate> objfcl=new List<PickerFacilityTemplate>();

    for(int i=0; i<ds.Tables[0].Rows.Count; i++)
    {
        PickerFacilityTemplate pft=new PickerFacilityTemplate();
        pft.BikeID=Convert.ToInt32(ds.Tables[0].Rows[i]["BikeID"].ToString());
        pft.BikeName=ds.Tables[0].Rows[i]["BikeName"].ToString ();
        objfcl.Add (pft);
    }

    this.CloseDBConnection ();
    return objfcl.ToList ();
}

public class PickerDataModelSource: UIPickerViewModel
{
    public PickerDataModelSource ()
    {
    }

    public PickerDataModelSource (List<PickerFacilityTemplate> lst)
    {
        this.Items=lst;
    }

    public event EventHandler<EventArgs> ValueChanged;

    public List<PickerFacilityTemplate> Items;

    List<PickerFacilityTemplate> _items = new List<PickerFacilityTemplate>();

    public PickerFacilityTemplate SelectedItem 
    {
        get 
        { 
            return this._items[this._selectedIndex];                
        } 
    }

    public int _selectedIndex = 0;

    public override int GetRowsInComponent (UIPickerView picker, int component) 
    {
        return this._items.Count;
    }

    public override string GetTitle (UIPickerView picker, int row, int component) 
    {
        return items[row].BikeName.ToString();

    }
    public override int GetComponentCount (UIPickerView picker) 
    {
        return 1;
    }

    public override void Selected(UIPickerView picker, int row, int component)
    {
        this._selectedIndex = row;
        if (this.ValueChanged != null) 
        {
            this.ValueChanged (this, new EventArgs ());
        }
    }
} 
```

现在在我有pickerview的屏幕的类文件中，我写了，

```
PickerDataModelSource _pickerSource; 
```

并在`ViewDidLoad`方法中：

```
this.Picker.Source=this._pickerSource;
this.Picker.Model=this._pickerSource; 
```

但是当我运行应用程序时，我的pickerview 是空白的。我错过了什么吗？我的逻辑错误在哪里？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T16:42:47.847

如何使用选取器的一个示例是“厨房水槽”示例 - [https://github.com/xamarin/monotouch-samples/tree/master/MonoCatalog-MonoDevelop](https://github.com/xamarin/monotouch-samples/tree/master/MonoCatalog-MonoDevelop) - 特别是在[https://github.com/xamarin /monotouch-samples/blob/master/MonoCatalog-MonoDevelop/PickerViewController.xib.cs](https://github.com/xamarin/monotouch-samples/blob/master/MonoCatalog-MonoDevelop/PickerViewController.xib.cs)

总的来说，我发现 repo 对于许多 mt 开发任务都是必不可少的。

# infrastructure - 本地 MTA，即使有可靠的远程 MTA 可用

> ID：11372720
> 
> 赞同：3
> 
> 时间：2012-07-07T06:04:20.107
> 
> 标签：infrastructure, mta

我与我们的开发团队讨论了在应用程序服务器上安装本地 MTA，或者他们是否应该使用位于内部网络上的 MTA 服务器来发送电子邮件。两种解决方案各有利弊。

优点：发送电子邮件的程序可以将其发送到本地 MTA，而无需担心发送、重试或任何可能出现的错误。

缺点：发送电子邮件的用户可能会被告知发送邮件有问题。如果远程服务器不可用，程序可以立即检测到。缺点：安全性。必须充分配置本地 MTA 以确保服务器的安全 缺点：过程中增加了一层复杂性。

在我看来，我们应该保持简单。我们不是在谈论与不受我们控制且我们不知道其状态的 MTA 服务器进行通信的程序。在我看来，如果您不确定您的对应部件，则有一个本地 MTA 是必要的，但是在这里，该程序会将其交付给“已知”的 MTA 系统。所以我认为额外的层是没有必要的。此外，在尝试发送电子邮件的每个系统上都有一个本地 MTA 也可能导致额外的问题/错误和更多的管理任务（维护/修补）。有人可能会说，在 Unix 系统上，您总是有一个本地 MTA（sendmail）在运行，但在我们的组织中，我们将系统剥离到最低限度，以确保不会运行额外的服务，这可能会导致潜在的风险。

但是，我很想知道您将如何设计基础设施，记住您与已知/受控/受监控的 MTA 系统进行通信。还是只是观点问题？

非常感谢您的反馈。

伊夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-10-01T00:15:09.877

本地 MTA，即使远程服务器处于同一管理之下。在某些时候，远程 MTA 必须打补丁并重新启动。通过直接访问远程 MTA，它会创建一个硬依赖关系，这样当远程 MTA 重新启动时应用程序会遇到错误等。应用程序现在需要实现重试逻辑，与多个远程 MTA 通信；基本上成为一个精简的MTA。本地 MTA 仍应中继到远程 MTA，而不是直接传递电子邮件——这使得管理和保护电子邮件传递更容易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T10:12:05.437

如果远程 MTA（“ *……位于内部网络上的 MTA 服务器……* ”）与提议的本地 MTA 处于相同的管理之下，**并且**后者将仅交付给远程 MTA（充当一种中继“[智能主机](http://en.wikipedia.org/wiki/Smart_host)”），则不需要本地 MTA。

那么唯一的问题是，发送邮件的本地应用程序/用户在尝试访问远程 MTA 时是否可以承受网络故障的潜在*额外风险。*

# java - Java 中的小程序

> ID：11372722
> 
> 赞同：-2
> 
> 时间：2012-07-07T06:05:01.383
> 
> 标签：java

小程序是一种特殊的 Java 程序，旨在通过

Internet 并由兼容 Java 的 Web 浏览器自动执行。

**Google、Yahoo Facebook 等的主页是 Applet 吗？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T06:06:41.373

不可以。小程序是下载的独立程序。谷歌等使用服务器端解释代码向客户端浏览器发送 http 响应，这是一个明显不同的设置。

# javascript - 使用 Javascript 或 VBscript 将本地 Html 表单数据导出到 CSV

> ID：11372723
> 
> 赞同：3
> 
> 时间：2012-07-07T06:05:12.333
> 
> 标签：javascript, html, csv, vbscript

我创建了一个 HTML 表单，它将在本地计算机上使用，并希望将表单数据保存在 CSV 文件中。

每次提交表单时，都应在 CSV 文件中添加一行。

这需要在本地运行，因此不能使用 PHP 或 JSP。

任何帮助或想法表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T08:57:30.800

我认为这是一个仅限 IE 的问题（VBScript）。如果是这样，您可以使用名为 FileSystemObject 的 ActiveXObject。

JavaScript：

```
csv=[]; // Collect form values to this array.

function saveFile(csv){
    var fso,oStream;
    fso=new ActiveXObject('Scripting.FileSystemObject');
    oStream=fso.OpenTextFile('absolute_file_path',8,true);
    oStream.WriteLine(csv.join(','));
    oStream.Close();
    return;
}

function readFile(path){
    var fso,iStream,n,csv=[];
    fso=new ActiveXObject('Scripting.FileSystemObject');
    iStream=fso.OpenTextFile(path,1,true);
    for(n=0;!iStream.AtEndOfStream;n++){
        csv[n]=iStream.ReadLine().split(',');
    }
    iStream.Close();
    return csv;
} 
```

[您可以在MSDN](http://msdn.microsoft.com/en-us/library/6kxy1a51%28v=vs.84%29.aspx)中阅读有关 FileSystemObject 的更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-05T18:19:50.927

老问题，但我想用一个很好的可靠回应来更新：

另一种方法是在将运行脚本的机器上使用模拟器。这样，您就可以像托管在服务器上一样构建表单处理脚本。查看[WAMP](http://www.wampserver.com/en/)（或Mac 的[MAMP](http://www.mamp.info/en/)），它将在您的系统上使用 PHP/MySQL 创建一个自包含运行的 Apache 实例。然后，您只需将站点的文件放入模拟器指定的目录（通常为“www”或“htdocs”），然后您可以通过浏览器在本地运行它，就好像它直接在带有 PHP/MySQL 的服务器上一样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-07T23:14:31.687

@Ekkehard.Horner 是正确的，因为浏览器无法直接写入本地文件系统。

*但是*，在提交表单时，如果您的浏览器启用了 JavaScript，当然可以更新浏览器窗口的另一部分。然后，如果这是您的目标，您可以将浏览器中累积的内容剪切并粘贴到文件中。

下面是我整理的一个简单示例，它仅用一点 JavaScript 和一些简单的表单元素来说明这个概念：

```
<?xml version="1.0" encoding="UTF-8"?>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>Capture Form Fields to CSV</title>
<script type="text/javascript">
<!--
function saveValues() {
    var frm = document.form1;

    var record = ""
            +       frm.text1.value
            + "," + frm.text2.value
            + "," + frm.text3.value
            + "\n";

    frm.textarea1.value += record;
}

function clearText() {
    document.form1.textarea1.value = "";
}
//-->
</script>
</head>
<body>
<h1>Capture Form Fields to CSV</h1>

<form name="form1" action="javascript:null">
  <p>
    F1: <input name="text1" type="text" value="field1" /><br />
    F2: <input name="text2" type="text" value="field2"/><br />
    F3: <input name="text3" type="text" value="field3"/>
  </p>
  <p>
    <input name="save" type="button" value="Save"
           onclick="saveValues(); return false"/>
    &#0160;
    <input name="clear" type="button" value="Clear"
           onclick="clearText(); return false"/>
  </p>
  <p>
    <i>Click 'Save' to add content</i><br />
    <textarea name="textarea1" rows="5" cols="40"></textarea>
  </p>
</form>

</body>
</html> 
```

如果您愿意使用诸如 jQuery 之类的 JavaScript 库深入研究 DHTML，那么您当然可以得到比这***更有趣的东西。***想想这个网站提供的奇妙的编辑模式吧！

# c# - 压延机以各种频率重复

> ID：11372724
> 
> 赞同：3
> 
> 时间：2012-07-07T06:05:28.003
> 
> 标签：c#, asp.net

我有一个 ASP.Net 日历功能，它允许用户添加事件并配置它们是否以各种频率重复（即每天、每周、每月、周六/周日等）。我正在寻找的是一些 C# 代码，它将根据开始日期和结束日期计算“每隔一周”的日期。

示例：如果用户输入日期为 2012 年 7 月 7 日的事件，并希望它每隔一周重复一次，直到 2012 年 7 月 31 日，代码将返回以下日期：

2012 年 7 月 7 日 2012 年 7 月 14 日 2012 年 7 月 21 日 2012 年 7 月 28 日

还有一项功能可以选择一周中的日子（即星期一、星期二、星期三……）。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T06:11:19.523

```
DateTime date = new Date(2005, 10, 03);
List<DateTime> dates = new List<DateTime>();
do
{
   var newDate = date.Add(7);  
   dates.Add(newDate);
}While(newDate.Month == 10) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T06:13:56.863

您可能需要一个函数，该函数采用两个 DateTime 对象（开始日期和结束日期）以及事件之间的一些间隔。然后，您可以使用[DateTime.AddDays(double value)](http://msdn.microsoft.com/en-us/library/system.datetime.adddays.aspx)函数生成所有中间日期。要每隔一周获得一次，您的间隔将是 14。您将继续增加 14 天，直到您获得的日期在结束日期之后。

```
//Create a list of DateTimes including the start date, with the specified
//number of days in between each item in the list.
public static IList<DateTime> GetRepeatingEvents(DateTime start, DateTime end, int intervalInDays)
{
  List<DateTime> allEvents = new List<DateTime>();
  allEvents.Add(start); //Make sure the start date is included in the list of dates!

  var tempDate = start;
  while (tempDate <= end) //Less than or Equals means the end date will be added as well
  {
    tempDate = tempDate.AddDays(intervalInDays);
    allEvents.Add(tempDate);
  }
  return allEvents;
} 
```

如果您的开始日期和结束日期也包含时间组件，则需要小心一点。例如，如果：

*   您的开始日期是 2012 年 7 月 7 日**上午 10:30**
*   您的结束日期是 2012 年 7 月 28 日**上午 9:00**
*   您的间隔是一周（7 天）

那么上面的函数不会在列表中包含 7 月 28 日的日期，因为 7 月 7 日上午 10:30 之后的 21 天是 7 月 28 日上午 10:30，这不满足条件，`while(tempDate <= end)`因为结束发生在上午 9:00

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-07T06:54:57.497

```
 if (DrpEvRepeats.SelectedValue == "Weekly")
    {
        int Weekly = Convert.ToInt32(DrpRptWeekly.SelectedValue);
        TimeSpan WeeklyDifference = Convert.ToDateTime(txtWeeklyEnd.Text.Substring(6, 4) + "/" + txtWeeklyEnd.Text.Substring(3, 2) + "/" + txtWeeklyEnd.Text.Substring(0, 2) + " " + drpHHEnd.SelectedValue + ":" + drpMMEnd.SelectedValue) - Convert.ToDateTime(txtStartDate.Text.Substring(6, 4) + "/" + txtStartDate.Text.Substring(3, 2) + "/" + txtStartDate.Text.Substring(0, 2) + " " + drpHHStart.SelectedValue + ":" + drpMMStart.SelectedValue);
        foreach (RepeaterItem rpI in rptEvRepeat.Items)
        {
            for (int i = 0; i <= Convert.ToInt32((Convert.ToInt32(WeeklyDifference.TotalDays)) / 7); i += Weekly)
            {
                DataRow objDR = dtEvRepeat.NewRow();
                objDR["SrNo"] = "";

                //string rptOn = "";
                //for (int j = 0; j < chkRptOn.Items.Count; j++)
                //{
                //    if (chkRptOn.Items[j].Selected)
                //        rptOn += chkRptOn.Items[j].Value + ",";
                //}
                //rptOn = rptOn.TrimEnd(',');

                if (txtStartDate.Text != "")
                    objDR["StartDate"] = Convert.ToDateTime(txtStartDate.Text.Substring(6, 4) + "/" + txtStartDate.Text.Substring(3, 2) + "/" + txtStartDate.Text.Substring(0, 2) + " " + drpHHStart.SelectedValue + ":" + drpMMStart.SelectedValue).AddDays(i * 7);
                else
                    objDR["StartDate"] = "";

                if (txtEndDate.Text != "")
                    objDR["EndDate"] = Convert.ToDateTime(txtEndDate.Text.Substring(6, 4) + "/" + txtEndDate.Text.Substring(3, 2) + "/" + txtEndDate.Text.Substring(0, 2) + " " + drpHHEnd.SelectedValue + ":" + drpMMEnd.SelectedValue).AddDays(i * 7);
                else
                    objDR["EndDate"] = "";

                dtEvRepeat.Rows.Add(objDR);
            }
        }
    } 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-07T06:12:17.580

伪代码：

```
var startTime = new DateTime(2012, 7, 7);
var stopTime = new DateTime(2012, 7, 31);

do {
    Console.WriteLine(startTime.ToShortDate());
    startTime.AddDays(7);
} while ( startTime < stopTime ); 
```

# php - 会话和登录的主要问题

> ID：11372725
> 
> 赞同：0
> 
> 时间：2012-07-07T06:05:38.853
> 
> 标签：php, session, login

好的，我的网站一直存在这个主要问题。发生的事情是当我从一个页面到另一个页面时它没有保持它的会话。这是同一目录中的几个源代码。好的，所以我有一个带有模式框的索引，其中包含 login.php 和 logout.php 的 iframe。它让我登录，但是一旦我进入另一个页面，它就不会携带会话，然后当我单击登录时，它会说我已经登录并拥有会话。另外，我如何将 cookie 添加到我的网站，我发现这些令人困惑。

只是片段：

header.php 的一部分出现在每个页面上

```
<?php session_start(); if($_SESSION["username"]) { ?>

<div style="display: inline-block; font-size: 14px; padding-left: 20px;">Hello <?php  echo $_SESSION['username']; ?> 
```

登录.php

```
<?php session_start(); require_once('connections/Main.php');

        if($_SESSION['username']) {

            echo '<div class="error_message">Attention! You, '.$_SESSION['username'].' are already logged in.</div>';
            echo "<br />";
            echo "Go <a target='top' href='index.php'>back</a> to the page you were viewing before this.</li>";

            exit();
        }
    ... database funcctions go here then add session
    if($rowCheck > 0) { 
        while($row = mysql_fetch_array($result)) { 

          // Start the session and register a variable 

          session_start(); 
          $_SESSION['username'] = $user;
          //session_register('username'); 

          echo '<script> parent.document.location.href = "index.php"; </script>';

          } 
```

注销.php

```
 <?php session_start(); ?>
    <?php if($_SESSION['username']) {
    session_unset(); 
    session_destroy(); 
    header("Location: index.php"); } 
    else { header("Location: index.php"); } ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T17:27:48.123

找出遇到此问题的任何人的真正问题所在。您必须确保用户访问的每个 URL 都是[http://website.com](http://website.com)或[http://www.website.com](http://www.website.com)但不能混用。您不能同时拥有不同的页面，否则会话将消失。这是因为 www 它存储在 www/website/ 而不仅仅是 website/

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T06:18:29.353

Cookie 不存储在服务器端。cookie 的目的是将信息存储在浏览器中，以便信息在页面之间保持不变。它们记录在客户端的浏览器中。要将 cookie 存储在传入客户端的浏览器中，您需要使用

```
setcookie(<name-of-cookie>, <value>, <the time the cookie expires>, <path>, <domain>, <flag to indicate whether cookie is transmitted over HTTPS>) 
```

基本上使用前三个参数。其余如非必要无需赘述。一切顺利。

# android - 我在下面的代码中尝试了在edittext字段中设置增量和减量值。但是为什么它不起作用？

> ID：11372729
> 
> 赞同：0
> 
> 时间：2012-07-07T06:06:39.293
> 
> 标签：android, numbers, android-edittext, increment, decrement

```
package com.inc.increment;
import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;
import android.view.View.OnClickListener;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;

public class Increment extends Activity implements OnClickListener {
int a,b;    
Button b1,b2;
EditText editText;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_increment);

    b1 = (Button) findViewById(R.id.button1);
    b1.setOnClickListener(this);
    b2 = (Button) findViewById(R.id.button2);
    b2.setOnClickListener(this);
        }

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_increment, menu);
    return true;
}
    public void onClick(View v) {     

    // now perform the increment/decrement
    if (R.id.button1 == v.getId()) {

        editText = (EditText) findViewById(R.id.timepicker_input);
            a=Integer.parseInt(editText.getText().toString());
            b=a+1;
        String s1 = String.valueOf(b);
        editText.setText(s1);

    } else if (R.id.button2 == v.getId()) {

        editText = (EditText) findViewById(R.id.timepicker_input);
        int a=Integer.parseInt(editText.getText().toString());
            int b=a-1;
        String s1 = String.valueOf(b);
       editText.setText(s1);
    }       
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T06:22:18.263

您是否为 timepicker_input 设置了默认值？如果它在活动 onCreate 期间为空白，并且 onclick 将出错，因为 parseInt 将因 Numberformatexception 而失败...

你的错误是什么？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-07T07:30:52.643

请为此使用以下代码。

```
public class MainActivity extends Activity implements OnClickListener {

    Button b1, b2;
    EditText editText;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        editText = (EditText) findViewById(R.id.timepicker_input);
        b1 = (Button) findViewById(R.id.button1);
        b1.setOnClickListener(this);
        b2 = (Button) findViewById(R.id.button2);
        b2.setOnClickListener(this);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.options_menu, menu);
        return true;
    }

    public void onClick(View v) {

        // now perform the increment/decrement
        if (R.id.button1 == v.getId()) {

            if (editText.getText().toString().equals(null)
                    || editText.getText().toString().equals("")
                    || editText.getText().toString().equals("null")) {
                Toast.makeText(this, "Enter Some Value", Toast.LENGTH_SHORT)
                        .show();
            } else {
                int a = Integer.parseInt(editText.getText().toString());
                int b = a + 1;
                String s1 = String.valueOf(b);
                editText.setText(s1);
            }
        } else if (R.id.button2 == v.getId()) {
            if (editText.getText().toString().equals(null)
                    || editText.getText().toString().equals("")
                    || editText.getText().toString().equals("null")) {
                Toast.makeText(this, "Enter Some Value", Toast.LENGTH_SHORT)
                        .show();
            } else {
                int a = Integer.parseInt(editText.getText().toString());
                int b = a - 1;
                String s1 = String.valueOf(b);
                editText.setText(s1);
            }
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-07T06:24:30.287

我对您的代码进行了一些更改，使用下面的代码，它将起作用。

```
package com.inc.increment;
import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;
import android.view.View.OnClickListener;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;

public class Increment extends Activity implements OnClickListener {
int a,b;    
Button b1,b2;
EditText editText;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_increment);
   editText = (EditText) findViewById(R.id.timepicker_input);    
    b1 = (Button) findViewById(R.id.button1);
    b1.setOnClickListener(this);
    b2 = (Button) findViewById(R.id.button2);
    b2.setOnClickListener(this);

        }

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_increment, menu);
    return true;
}
    public void onClick(View v) {     

    // now perform the increment/decrement
    if (R.id.button1 == v.getId()) {

            a=Integer.parseInt(editText.getText().toString());
            b=a+1;
        String s1 = String.valueOf(b);
        editText.setText(s1);

    } else if (R.id.button2 == v.getId()) {

         a=Integer.parseInt(editText.getText().toString());
             b=a-1;
        String s1 = String.valueOf(b);
       editText.setText(s1);
    }       
  }
} 
```

不要在点击时创建edittext实例，它应该在oncreate中

# linux - 自机器创建以来如何查找 shell 命令的历史记录？

> ID：11372732
> 
> 赞同：2
> 
> 时间：2012-07-07T06:07:04.457
> 
> 标签：linux, unix, history

几周前我创建了一个 Ubuntu virtualbox 机器，从那时起就一直在它上面进行项目。

现在我想找到我一周前在终端中键入的一些命令的语法，但是我已经打开和关闭了终端窗口并重新启动了无数次机器。

**如何让`history`命令返回到我在创建机器后键入的第一个命令，或者是否有其他所有命令都存储在 Ubuntu 中的地方？**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-07T06:29:17.387

1) 历史文件的大小由环境变量 HISTSIZE 控制。大多数系统上的默认值为 500 行。

2）您可以在 ~/.bashrc （或其他）初始化文件中设置 $HISTSIZE 。

3) 您只需键入“历史”即可查看您当前的历史。

4）您可以通过键入“man history”来了解有关命令和各种选项的更多信息。

这是一篇关于这个主题的好文章：

*   [http://blog.macromates.com/2008/working-with-history-in-bash/](http://blog.macromates.com/2008/working-with-history-in-bash/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-07T07:19:43.053

在一般情况下，没有工具可以永久记录所有 shell 中的所有命令。Bash 的历史有限，但是一旦你的命令从历史列表中删除，它们就消失了。如果您的命令涉及`sudo`，系统日志可能包含您想要检索的全部或部分命令行。您正在使用的虚拟机可能会提供一种及时倒退的功能。

# android - GLES 2 安卓模拟器

> ID：11372734
> 
> 赞同：3
> 
> 时间：2012-07-07T06:07:28.720
> 
> 标签：android, error-handling, android-emulator, opengl-es-2.0, andengine

尝试在模拟器上运行 OpenGLES 2 应用程序时，我不断收到此错误，它正在运行 4.0.3 并启用了 gpu 仿真：

> 无法创建上下文 0x3005 仿真器：警告：无法使用软件渲染器初始化 OpenglES 仿真。无法获取 wglGetExtensionsStringARB 无法获取 wglGetExtensionsStringARB 无法获取 wglGetExtensionsStringARB 无法获取 wglGetExtensionsStringARB 无法获取 wglGetExtensionsStringARB 无法获取 wglGetExtensionsStringARB 无法获取 wglGetExtensionsStringARB 无法获取 wglGetExtensionsStringARB

: 我试图找到一个合适的驱动程序来解决这个问题，但是没有用。任何帮助，将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T13:26:57.397

设备上是否启用了“强制 gpu 渲染”？

我的意思是设置中的选项=>开发人员设置=>强制gpu渲染

# android - 清单文件中的国际化

> ID：11372735
> 
> 赞同：1
> 
> 时间：2012-07-07T06:07:57.170
> 
> 标签：android

我在清单文件中有一些标签，其中有英文文本我怎么能用其他语言也有它们。例如

```
<activity
        android:name=".activity.MainMenuActivity"
        android:label="Main Menu Options" 
        android:configChanges="locale" 
        >
    </activity> 
```

我想将标签转换为波斯文本。我该怎么做。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T06:16:04.780

只需在 strings.xml 中添加您的标签值，例如：

```
<?xml version="1.0" encoding="utf-8"?>
<resources>

    <!-- String Resources -->
    <string name="main_menu_activity">جرای برنامه نمی‌توان&lt;/string>

</resources> 
```

并调用你的清单`android:label="@string/main_menu_activity"`

编辑：对于菜单项，像这样使用它：

```
<menu xmlns:android="http://schemas.android.com/apk/res/android" >
   <item
      android:id="@+id/add"
      android:icon="@android:drawable/ic_menu_add"
      android:title="@string/mu_title_1"/>

   <item
      android:id="@+id/help"
      android:icon="@android:drawable/ic_menu_help"
      android:title="@string/mu_title_2"/>
</menu> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T06:14:46.700

将标签放在值文件夹中的 String.xml 中，并使用应用程序名称之类的字符串

android:label="@string/my_label"

# c# - System.Diagnostics.Process.Start 在服务器上抛出 threadabort 异常

> ID：11372736
> 
> 赞同：0
> 
> 时间：2012-07-07T06:08:01.637
> 
> 标签：c#, asp.net, system.diagnostics, threadabortexception

在我的网站中，我使用 System.Diagnostics.Process.Start 来预览特定文件。它在本地服务器上工作正常，但是当我尝试预览文件时，它会在在线服务器上抛出 ThreadAbortException。

预览发生在中继器的按钮单击上。代码如下：

```
if (e.CommandName == "Preview")
            {
                Button btn = (Button)e.CommandSource;
                string filePath = Server.MapPath("~/Upload");
                string _DownloadableProductFileName = filename;
                System.Diagnostics.Process.Start(filePath + "\\" + _DownloadableProductFileName);
            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T06:50:57.623

要在 ASP.NET 服务器上使用 Process，您需要[将应用程序配置为完全信任。](http://msdn.microsoft.com/en-us/library/wyts434y.aspx)

您确定需要生成此进程服务器端吗？看来您没有使用它的输出。

# vim - Vimscript - 映射函数

> ID：11372737
> 
> 赞同：0
> 
> 时间：2012-07-07T06:08:14.960
> 
> 标签：vim

假设我有一个函数给我一个作为参数传递的字符的 ASCII 值，并将其称为 AsciiFunc（已经很晚了，我想不出有创意的名字）。是否可以定义一个调用 AsciiFunc 并将键入的字符传递给它的映射。例如。如果函数被映射到，`<leader>a`那么按下`<leader>af`将调用函数 AsciiFunc 并将'f'作为参数传递？

只是为了避免混淆，我知道这`ga`给出了光标下字符的 ascii 和其他信息，这不是我想要的。我正在寻找一种方法来避免必须为 AsciiFunc 可以作为参数的每个可能值创建多个映射。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-07T06:17:32.223

你可以在里面调用`getchar()`函数`AsciiFunc()`。它会等待输入。

# php - 我需要帮助使用 PHP 转义 javascript 函数的字符串参数

> ID：11372742
> 
> 赞同：0
> 
> 时间：2012-07-07T06:10:09.057
> 
> 标签：php, javascript

我正在动态创建一个调用 javascript 函数的锚。它适用于一个字符串参数，但不适用于两个。我相信我没有正确地转义参数周围的引号。在寻找答案时，我遇到了以下问题

```
onclick="alert('<?echo $row['username']?>')" 
```

我发现的下一个让我完全困惑

```
echo('<button type="button" id="button'.$ctr.'"onClick="showMapsInfo(\''.str_replace("'", "\\'", $maps_name).'\', \''.str_replace("'", "\\'", $ctr).'\');"><img src="img/maps_logo.gif"></button><br/>'); 
```

如果有人愿意

1.  解释为什么用户名周围的单引号不必转义？

2.  在转义字符上写有“假人”的地方，因此我可以尝试破译第二个示例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T06:28:46.177

让我们检查您的第一个示例

```
onclick="alert('<?echo $row['username']?>')" 
```

这里重要的部分是，除此之外的所有内容`<? … ?>`都是纯 HTML，PHP 解释器从未查看过。因此，唯一与 PHP 相关的部分是里面的代码`<? … ?>`，即`echo $row['username']`. 在这里，不需要进行任何转义。

相比之下，你的第二个例子

```
echo('<button type="button" id="button'.$ctr.'"onClick="showMapsInfo(\''.str_replace("'", "\\'", $maps_name).'\', \''.str_replace("'", "\\'", $ctr).'\');"><img src="img/maps_logo.gif"></button><br/>'); 
```

纯粹用 PHP 编写，没有周围的 HTML。因此，您必须小心使用引号。让我们从头开始构建它，看看这里会发生什么。当你构建这样的东西时，你可能会从

```
echo('<button type="button" id="button1" onClick="showMapsInfo(\'...\');"><img src="img/maps_logo.gif"></button><br/>'); 
```

因为单引号已经被用作字符串分隔符，所以它们必须在字符串中用`\'`. 现在对于javascript函数内部的部分。更简单地说，上面的代码归结为

```
echo('showMapsInfo(\'...\');'); 
```

这导致

```
showMapsInfo('...'); 
```

当我们想要插入一些动态部分而不是 '...' 部分时，我们需要用 结束字符串`'`并将其连接在一起`.`。假设您想在其中插入一个变量`$foobar`，那么您将编写：

```
echo('showMapsInfo(\''.$foobar.'\');'); 
```

这导致

```
showMapsInfo('<VALUE OF $foobar>'); 
```

您的示例不会插入`$foobar`此字符串，而是插入以下表达式：

```
str_replace("'", "\\'", $maps_name).'\', \''.str_replace("'", "\\'", $ctr) 
```

它用于`str_replace`再次转义内容，但有点扭曲：它不是为 PHP 转义的，而是为生成的 Javascript 转义的！每个单`'`引号在输出中都会变成一个转义的单引号`\'`，但是您需要编写`\\'`，因为反斜杠需要自行转义，以便生成反斜杠作为输出。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-07T06:29:41.240

您可以替换引号，然后使用[heredoc](http://php.net/manual/en/language.types.string.php)，它更清晰易懂。

```
$maps_name = str_replace("'", "\\'", $maps_name);
$ctr       = str_replace("'", "\\'", $ctr);

echo <<<HTML

<button type="button" id="button$ctr" onClick="showMapsInfo('$maps_name', '$ctr');"><img src="img/maps_logo.gif"></button><br/>

HTML; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-07T06:19:24.873

您可以`json_encode`对 javascript 变量使用函数。

```
echo sprintf(
  '<button type="button" id="button%s" onClick="showMapsInfo(%s, %s);">
   <img src="img/maps_logo.gif"></button><br/>',
    htmlspecialchars($ctr), json_encode($maps_name), json_encode($ctr)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-07T06:22:15.200

1.  用户名周围的单引号不必转义，因为它是 PHP 变量的一部分，而不是 JavaScript。

2.  可以在[此处找到有关将 PHP 变量注入 JavaScript 的信息，并](http://www.the-art-of-web.com/php/javascript-escape/)[在此处](http://www.the-art-of-web.com/javascript/escape/)找到更多信息。

    如果变量是字符串，您只需将 PHP 变量括在引号中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-07T06:25:45.840

我认为您在转义单引号时没有问题，因为该功能在您工作时正在工作

仅使用一个参数调用它。

检查您是否正确地创建了整个参数字符串，是否正确添加了逗号，如果单引号出现在 bot 参数周围，则在 javascript 中。

最后参数字符串应该看起来像

“参数 1”、“参数 2”

# python - 为文件夹观察程序启用启动、停止功能

> ID：11372754
> 
> 赞同：0
> 
> 时间：2012-07-07T06:12:28.450
> 
> 标签：python, pyinotify

下面的代码不像我想要的那样工作。当我这样做时`svc.run()`，程序运行正常。我对文件夹工作文件所做的任何更改。但是当我这样做时，我认为`svc.stop()`它并没有完全停止。也许必须有更好的方法来做线程部分......

```
import pyinotify
import threading
import time
import os
class fs_event_handler(pyinotify.ProcessEvent):
    def __init__(self, callback):
        self._callback = callback
    def process_IN_CREATE(self, e):
        self._callback(e.path, e.name, 'created')
    def process_IN_DELETE(self, e):
        self._callback(e.path, e.name, 'deleted')
    def process_IN_MODIFY(self, e):
        self._callback(e.path, e.name, 'modified')

class NotificationService():
    def __init__(self, path, callback):
        mask = pyinotify.IN_CREATE | pyinotify.IN_DELETE \
            | pyinotify.IN_MODIFY
        w = pyinotify.WatchManager()
        self.__notifier = pyinotify.Notifier(w, fs_event_handler(callback))
        wdd = w.add_watch(path, mask, rec=True, auto_add=True)
        self.__loop = True
    def start(self):
        while self.__loop:
            self.__notifier.process_events()
            if self.__notifier.check_events():
                self.__notifier.read_events()
    def run(self):
        fm = FileMonitor(self)
        fm.start()
        print 'Service Running...'

    def stop(self):
        self.__notifier.stop()
        self.__loop = False

class FileMonitor(threading.Thread):
    def __init__(self, srvc):
        threading.Thread.__init__(self)
        self.__svc = srvc
    def run(self):
        self.__svc.start()
        print 'Service stopped'

def _callback(path, name, operation):
    zpad = lambda x: ''.join(['0', str(x)])[:2]
    ts = time.localtime()
    t = ':'.join(map(zpad, [ts.tm_hour, ts.tm_min, ts.tm_sec]))
    print t, ':', '%s was %s' % (os.path.join(path, name), operation)

p = '/home/deostroll/scripts/tmp'
svc = NotificationService(p, _callback)
svc.run() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T07:00:36.910

我不熟悉 pyinorify，但似乎在某些事件发生之前不会读取这些`self.__notifier.process_events()`块。`self.__loop`

您可以`pyinotify.ThreadedNotifier`改用：

```
class NotificationService():
    def __init__(self, path, callback):
        self.path = path
        self.callback = callback

    def start(self):
        mask = pyinotify.IN_CREATE | pyinotify.IN_DELETE \
            | pyinotify.IN_MODIFY
        w = pyinotify.WatchManager()
        wdd = w.add_watch(self.path, mask, rec=True, auto_add=True)
        self.__notifier = pyinotify.ThreadedNotifier(w, fs_event_handler(self.callback))
        self.__notifier.start()
        print 'Service Running...'

    def run(self):
        self.start()

    def stop(self):
        self.__notifier.stop()
        print 'Service Stopped' 
```

# apache-flex - Adobe AIR - 无法为签名者构建有效的证书链

> ID：11372755
> 
> 赞同：5
> 
> 时间：2012-07-07T06:12:34.033
> 
> 标签：apache-flex, air, certificate

我购买了 p12 证书，但使用起来有困难。尝试签署我的应用程序时，我总是收到以下错误：

*创建 AIR 文件时出错：无法为签名者构建有效的证书链。*

![截屏](../Images/3846e62d5483365ded9b3e5358adcdc1.png)

**当我使用自签名证书签署应用程序时，这不是问题。**

我正在尝试为桌面签署一个 .air 文件。我在 Mac OSX 上。在使用 p12 文件之前我必须做些什么吗？

我之前（2 年前）从同一供应商处购买了 p12 密钥，并且没有任何问题。不过，那个密钥现在已经过期了。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-07T07:29:14.043

环顾四周后，我能够生成一个有效的新 P12 证书。耶！

此 Adob​​e 论坛中的最后一个答案有效：

[http://forums.adobe.com/message/1975832#1975832](http://forums.adobe.com/message/1975832#1975832)

以下是论坛上列出的步骤：

1.  我从客户那里获得证书 cert-client.p12
2.  双击并从 Windows 资源管理器安装证书
3.  打开 Internetexplorer > 工具 > Internet 选项 > 内容 > 证书
4.  选择之前导入的证书，点击导出
5.  下一个
6.  是的，导出私钥
7.  格式：PKCS，（选中）在...中包含所有证书，（选中）启用强保护，（未选中）删除私钥...
8.  下一个
9.  输入证书密码
10.  接下来输入文件名并导出文件
11.  将文件重命名为 pk12

# c# - 如何在没有包装器的情况下访问 Skype API？

> ID：11372756
> 
> 赞同：3
> 
> 时间：2012-07-07T06:12:48.950
> 
> 标签：c#, sharepoint, sharepoint-2010, skype, skype4com

我需要编写一个 Webpart（在 Sharepoint 2010 中），它应该能够读取 Skype 中的聊天记录。为了实现这个目标，我必须使用 Skype API。我见过的所有教程都使用包装器。

问题：如何在没有包装器的情况下访问 Skype API？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T12:20:10.873

要与 Skype API 交互，我必须使用[SKYPE4COM](http://developer.skype.com/accessories/skype4com)，但应启动 Skype 客户端以使您的代码正常工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-09T07:52:37.960

在这个答案中访问skype db怎么样。 [https://stackoverflow.com/a/1941233/880434](https://stackoverflow.com/a/1941233/880434)

* * *

*编辑*

**SKYPE4COMLib**将帮助您做到这一点。

# rubymotion - 如何隐藏 RubyMotion 中弹出的键盘？

> ID：11372757
> 
> 赞同：1
> 
> 时间：2012-07-07T06:13:34.927
> 
> 标签：rubymotion

如何隐藏在文本字段中弹出的虚拟键盘？

隐藏它的按钮似乎没有出现，在我的情况下，加载的下一个屏幕（没有文本字段）仍将键盘处于加载位置。

谢谢！

更新：

使用以下允许键盘返回：

```
 def textFieldShouldReturn textField
     textField.resignFirstResponder
    'YES'
  end 
```

但是，它在下一个屏幕上仍然保持打开状态。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T09:32:53.680

它应该是 true 而不是 'YES' 并且不要忘记设置文本字段委托

```
 def textFieldShouldReturn textField
    textField.resignFirstResponder
    true
  end 
```

# join - 如何在 Squeel 中加入带有条件的子查询

> ID：11372763
> 
> 赞同：1
> 
> 时间：2012-07-07T06:15:57.390
> 
> 标签：join, subquery, squeel

# 序幕

我已经拥抱了 Squeel——并且享受每一步！非常感谢你的分享，厄尼米勒！

我正在使用 ruby​​ 1.9.2 和 Squeel 1.0.2 和 Rails 3.2.5 进行开发

（我承认已经完全重组了问题 - 希望增加可读性并更好地获得答案）<:)

# 用例

我希望（超级）用户能够像这样分配授权和权限

*   一个 user_group 应该能够拥有多个授权
*   一个授权应该能够拥有多个权限
*   权限应该能够控制对（操作）数据的访问
    *   通过控制器（请求路径）
    *   在类的实例上
    *   在任何特定情况下

ACL 系统应该是*惰性*的——即如果没有给出角色/授权，用户显然根本不关心 ACL。

# 迁移

我从用例中确定了**角色**和（多态）可**角色**实体，因此我有

一个与众不同的角色

```
create_table :roles do |t|
  t.references :ox
  t.string :name
  t.boolean :active, default: true
  t.timestamps
end 
```

和一个角色更具描述性

```
create_table :roleables do |t|
  t.references :ox
  t.references :role
  t.references :roleable, polymorphic: true
  t.string :authorization
  t.string :controller
  t.boolean :active, default: true
  t.timestamps
end 
```

# 课程

系统有一个通用类 - AbstractActionBase - 它继承自 ActiveRecord:Base，所有类都继承自它（允许我在一个地方添加系统范围的属性和方法）

所以 - 部分 - 我的 AbstractActionBase 看起来像

```
class AbstractActionBase < ActiveRecord::Base
  self.abstract_class=true

  require 'tempfile'

  belongs_to :ox

  has_many :roleables, as: :roleable

  attr_accessible :ox_id

  validates_presence_of :ox_id

  #
  # all models inheriting from this will have versions
  has_paper_trail
  #
  #

  # 
  # Class method to providing for index SELECT's being married with roleables (permissions)
  # used from abstraction_actions_controller where build_collection calls this method 
  # the result 'should' be an ActiveRelation - used for the Kamanari 'result' call to readying pagination
  #
  def self.with_authorizations    

    # 
    # SELECT * FROM any_table at
    # left join (
    #     select r.roleable_id, r.roleable_type, group_concat( r.authorization )
    #   from roleables r
    #   where r.authorization is not null
    #   and r.roleable_id=at.id
    #   and r.roleable_type=at.base_class
    #   and r.role_id not in (1,2,3) <--- ID's are current_user.roles
    # ) rm on rm.roleable_id=at.id and rm.roleable_type=at.base_class
    #
    # which will provide for this:
    #
    # |.......| last column in table 'at' | roleable_id | roleable_type | authorizations |
    # |.......| some value                | 1           | 'UserGroup'   | 'insert,create'|
    # |.......| yet another value         | 92          | 'UserGroup'   | 'read'         |
    #
    #
    self.where{ active==true }
  end

  # compile a collection of records - regard search using Ransack
  def base.collection( params, resource_set )
    #
    # kaminari (and continous scrolling)
    #
    params[:page] ||= 1
    params[:per_page] ||= self.per_page
    params[:o] ||= self.resource_order_by
    distinct = params[:distinct].nil? ? false : params[:distinct].to_i.zero?
    resource_set = (resource_set.respond_to?( "result")) ? resource_set.result(:distinct => distinct) : resource_set
    (resource_set.respond_to?( "page")) ? resource_set.order(params[:o]).page( params[:page] ).per( params[:per_page] ) : resource_set.order(params[:o])
  end
end 
```

Role 类的一部分看起来像这样

```
class Role < AbstractActionBase

  has_many :roleables

  scope :active, where{ active.eq true }

  #
  # what does this role allow
  def permissions
    roleables.permissions.scoped
  end

  # 
  # to whom does this role allow
  def authorizations
    roleables.authorizations.scoped
  end

  # returns true if the roleables (permissions) authorizes the options
  # options are { controller: "", action: "", record: Instance, is_class: boolean }
  def authorizes?( options={} )
    coll = permissions
    coll = coll.on_action(options.delete(:action)) if options.keys.include? :action
    coll = coll.on_entity( options.delete(:record), options.delete(:is_class) || false ) if options.keys.include? :record
    coll = coll.on_controller(options.delete(:controller)) if options.keys.include? :controller
    (coll.count>0) === true
  end
end 
```

Roleable 类看起来像这样

```
class Roleable  < AbstractActionBase
  belongs_to :role
  belongs_to :roleable, polymorphic: true

  # roleables authorizes users through user_groups
  # (in which case the authorization is "-")
  # providing them permissions on controllers, actions and instances
  scope :authorizations, where{ authorization == nil }
  scope :permissions, where{ authorization != nil }

  # using Squeel, find roleables on a particular controller or any controller
  def self.on_controller(ctrl)
    where{ (controller==ctrl) | (controller==nil) }
  end

  # using Squeel, find roleables on a particular authorization or allowed 'all'
  def self.on_action(action)
    where{ (authorization=~ "%#{action}%") | (authorization=="all") }
  end

  # using Squeel, find roleables on a particular instance/record or class
  def self.on_entity(entity, is_class=false)
    if is_class
      where{ ((roleable_type==entity.base_class.to_s ) & ( roleable_id==nil)) | ((roleable_type==nil) & (roleable_id==nil)) }
    else
      where{ ((roleable_type==entity.class.to_s ) & ( roleable_id==entity.id)) | ((roleable_type==nil) & (roleable_id==nil)) }
    end
  end
end 
```

# 逻辑

## 创造

这允许我*授权*- 将角色分配给某人/某物 - 在这种情况下，授权字符串为零，例如

> 使用 Roleable.create({ role: @sales, roleable: @user_group })为user_group **sales**分配角色**sales**

同时我可以做*权限*——描述任何角色的细节——比如

> 角色**sales**对 OrderHead 和 OrderDetail 表具有*索引*、*创建*、*编辑*和*删除权限*

*   Roleable.create（{角色：@sales，授权：“索引，创建，编辑，删除”，角色：@user_group，控制器：“order_heads”}）
*   Roleable.create（{角色：@sales，授权：“索引，创建，编辑，删除”，角色：@user_group，控制器：“order_details”}）

这些“细节”可以是空灵的

> Roleable.create（{角色：@sales，授权：“索引”}）

有点真实

> Roleable.create（{角色：@sales，授权：“索引”，角色类型：'OrderHead'}）

或非常表达

> Roleable.create({ 角色：@sales，授权：“索引”，角色：OrderHead.first })

## 选择

大多数控制器都从定义索引（和其他操作）的 AbstractActionsController 继承。它自己从 InheritedResources:Base 继承的那个控制器就像这样

```
class AbstractActionsController < InheritedResources::Base # < ApplicationController

  append_view_path ViewTemplate::Resolver.instance

  respond_to :html, :xml, :json, :js, :pdf

  belongs_to :ox, :optional => true

  before_filter :authorize!
  before_filter :authenticate!
  before_filter :warn_unless_confirmed!
  before_filter :fix_money_params, :only => [:create,:update]

  # GET /collection - printers
  def index

    # session[:params] = params
    #
    # preparing for Ransack
    unless params[:q].nil?
      params[:q]= { :"#{params[:q_fields]}" => params[:q] }
    end

    super do |format|
      format.html 
      format.js { render layout: false }
      format.pdf{ render :pdf => generate_pdf(false) and return }
      format.xml { render layout: false }
      format.json do
        # field lookup request?
        unless params[:lookup].nil?
          render layout: false, :json => collection.map(&:select_mapping)
        else
          render json: collection.map { |p| view_context.grow_mustache_for_index(p, collection, (parent? ? collection : resource_class.order(:id)), @selected ) }
        end
      end
    end
  end

  # the collection method on inherited_resources 
  # gets overloaded with Ransack search and Kaminari pagination (on the model)
  def collection
    # @collection ||= build_collection
    # TODO - test whether caching the collection is possible
    build_collection
  end

  def build_collection
    unless params[:belongs].nil?
      # debugger
      parent = params[:belongs].constantize.find(params[:belongs_id])
      @selected = parent.nil? ? [] : parent.send( rewrite_association(params[:assoc],parent) )
      @search_resource = core_entity(params[:assoc].constantize)
      @search_resource = @search_resource.search(params[:q]) unless params[:q].nil?
    else
      @search_resource = rewrite_end_of_association_chain(resource_class)
      @search_resource = core_entity(@search_resource)
      @search_resource = @search_resource.search(params[:q]) unless params[:q].nil?
    end
    # authorize rows
    @search_resource = @search_resource.with_authorizations                 # left joins roleables coalescing a "authorization" field from roles ID's not owned by current_user through his user_groups
    @resources ||= resource_class.collection( params, @search_resource )
  end

end 
```

# 挑战

提出一个简短的问题是多么漫长的故事<:)

如何编写`with_authorizations`返回 ActiveRelation 的方法（最好使用 Squeel）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T13:58:53.587

沃尔特，

您可能会使这变得比必要的更复杂。如果我没看错，子查询的主要目的是获取结果中可用授权的串联列表。如果是这种情况，您可以简单地 eager_load 授权并通过 Role 模型上的方法公开其名称，该方法为您执行连接。这具有与 MySQL 以外的数据库兼容的次要优势。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T15:37:37.183

就像我说的 - 最好使用 Squeel :)

事实证明（从马口中可以这么说）*加入是为了*在 Squeel 县建立协会；）

那么该怎么办？好吧，我用我的 SQL 到 ActiveRecord 套索摆动做了最后一次*巡回演出*，你瞧！有人问了一个很好的问题——还有一个更大的答案！完美的。

在短短的几近疯狂的失明时刻，我使用所描述的技术破解了 - 和 Heureka ！

以前，我添加了一个 pastebin 来帮助可能的“回答者”——所以我将结果添加到了[Pastiebin——](http://pastiebin.com/?page=p&id=4ffd750774d38)但简而言之，它是这样的：

```
Model.select("something").joins("to your hearts contend") 
```

干杯，瓦尔特

# php - 我无法存储通过 jquery ajax 传递的会话值。在 codeigniter php 框架中

> ID：11372767
> 
> 赞同：0
> 
> 时间：2012-07-07T06:16:34.047
> 
> 标签：php, codeigniter, jquery

我在存储会话值时遇到问题；我无法通过 AJAX Jquery 调用增加会话计数变量，并将一些值传递给函数，我之前设置的存储会话的数组也用新的数组更改。

这里有什么问题：

1>当我使用一个控制器功能时

```
startOnlineTest($testid=0)
 i set session countnew as 0
$this->session->set_userdata('countnew',0);
  and in view i use jquery to pass data to other function of same controller
  public function ResponseOnline($qid,$response) 
```

使用jquery的变化效果

```
 echo "[removed]$(document).ready(function(){";
         foreach($question['childQuestion'] as $q=>$aq){  // 
echo "\$(\"input:radio[name=qid-$q]\").live('change',function(){
var sr=\$(\"input:radio[name=qid-$q]:checked\").map(function() {
          return $(this).val();
          }).get().join(); 
       var qid = \$(\"input:radio[name=qid-$q]\").attr(\"qaid\");
       "; echo "\$.get('"; echo base_url();echo "testpapers/ResponseOnline/'+qid+'/'+sr,{},function(data)
 {\$('#res').html(data)});
 });";}
 echo"});[removed]" ;// this script is working fine 
```

现在的问题是，尽管我使用数组我的 ResponseOnline 代码是，但我得到了当前值覆盖的会话值

```
public function ResponseOnline($qid,$response)
  {
  echo "this" .$this->session->userdata('countnew'); // this is not echo as set above by function  startOnlineTest($testid=0)[/color]
     i set session countnew as
     $this->session->set_userdata('countnew',0)

 echo $d=$qid; // i know its no use but to save time as tested on $d

 $s=$response;

if($this->session->userdata('countnew')==0)   //  algo for this function i check the                                       
                                               //countnew session varaible   if 0 do this 
{                                                
$sc=$this->session->userdata('countnew');     // store the countnew variable
echo $sc=$sc+1;                               // increment the counter variable
$this->session->set_userdata('countnew',$sc);  // store it in session 
echo "this is incrementes session value";     
echo $this->session->userdata('countnew');
$r2[$d]=$s;                               // store array value $r2 with key $d and value $s
$this->session->set_userdata('res',$r2);  //set this array value in session 
}
else{                                  // if session countnew!=0 then do this
$r2=$this->session->userdata('res');  // first store $r2 as array return from session
 $r2[$d]=$s;                         //then add value to this array                      

 $this->session->set_userdata('res',$r2); // storing this array to session
}
echo '<pre>';
print_r($r2);       // printing the array

} 
```

我得到的结果说第一次调用很好，但第二次调用我的值是覆盖会话显示`Array([32323]=>23))`如果我通过函数`(32323,23)`如果我通过了`(33,42)` 我`Array([33]=>42)`的旧值被破坏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T06:42:30.687

您可能应该在 php 中使用常规会话，因为 codeigniter 中的会话仅允许您存储单个项目。像这样的东西：

```
$_SESSION['item'][] = $array; 
```

或者，也许您仍然可以通过执行以下操作来使用 CodeIgniter 会话：

```
$items = $this->session->userdata('items');
array_push($items, $new_item);
$this->session->set_userdata('items', $items); 
```

如果您还想定义键：

```
$items = $this->session->userdata('items');
$items['your_key'] = $new_item; 
$this->session->set_userdata('items', $items); 
```

# vb.net - 如何使用记录集 movelast

> ID：11372770
> 
> 赞同：0
> 
> 时间：2012-07-07T06:17:14.767
> 
> 标签：vb.net, visual-studio-2010, sql-server-2008, ado.net

我需要代码帮助，我可以使用旧的 rs.movelast 到 vb.net 2010 .. 任何简单的方法来查询我的记录，自动选择最后一个..

这是我的连接示例，我只是以任何形式调用它..///

```
Public Function ExecuteSQLQuery(ByVal SQLQuery As String) As DataTable
    Try
        Dim sqlCon As New OleDbConnection(CnString)
        Dim sqlDA As New OleDbDataAdapter(SQLQuery, sqlCon)
        Dim sqlCB As New OleDbCommandBuilder(sqlDA)
        sqlDT.Reset() ' refresh 
        sqlDA.Fill(sqlDT)
    Catch ex As Exception
        MsgBox("Error : " & ex.Message)
    End Try
    Return sqlDT
End Function 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T06:37:00.873

sqlDT.rows(sqlDT.rows.count-1) 将是 DataTable sqlDT 的最后一条记录。sqlDT.rows.count-1 将返回填充表中行的最后一个索引。希望它会帮助你。谢谢

```
Imports System.Data.OleDb

Public Class Form1

Public CnString As String = "Provider=SQLOLEDB;Data Source=HP-PC\SQLEXPRESS;Persist Security Info=True;Password=sa;User ID=sa;Initial Catalog=Accounts"

Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click

    Dim ssql As String = "Select * from TBL_Access"
    Dim dt As DataTable

    dt = ExecuteSQLQuery(ssql)
    TextBox1.Text = dt.Rows(dt.Rows.Count - 1)(0) 'Value of First Column of Last Row of DataTable dt
    TextBox2.Text = dt.Rows(dt.Rows.Count - 1)(1) 'Value of Second Column of Last Row of DataTable dt
End Sub

Public Function ExecuteSQLQuery(ByVal SQLQuery As String) As DataTable
    Try

        Dim sqlCon As New OleDbConnection(CnString)
        Dim sqlDA As New OleDbDataAdapter(SQLQuery, sqlCon)
        Dim sqlCB As New OleDbCommandBuilder(sqlDA)
        Dim sqlDT As New DataTable
        sqlDT.Reset() ' refresh  
        sqlDA.Fill(sqlDT)
        Return sqlDT
    Catch ex As Exception
        MsgBox("Error : " & ex.Message)
        Return Nothing

    End Try
End Function

End Class 
```

# version-control - 我应该如何在 VCS 中组织文件？

> ID：11372777
> 
> 赞同：2
> 
> 时间：2012-07-07T06:18:23.643
> 
> 标签：version-control

我正在制作一个网站并制作多个设计原型。我想保留所有这些以供将来参考。

1.  这是使用分支的合适地方，还是应该将它们放在文件夹中？
2.  我应该如何管理外部依赖项（例如 jQuery），我应该为每个设计包含一个缩小版本，还是为整个项目保留一个，或者只是链接到在线版本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T06:53:55.667

分支很好，如果：

*   您想比较同一文件在您网站的多个变体中的差异
*   并行开发上述变体，[隔离（参见“你应该何时分支？”）](https://stackoverflow.com/questions/2100829/when-should-you-branch/2107672#2107672)。

这不会阻止您将它们部署在不同的目录中（您只需检查 Web 服务器上不同文件夹中的每个分支）

任何公共部分（如一些 JQuery 脚本）都应位于子目录中，该子目录在其自己的存储库中进行版本控制，并由您的主 Web 存储库作为[子模块](http://git-scm.com/book/en/Git-Tools-Submodules)引用。

# bash - 如何在没有 -o 的情况下使用 grep -o

> ID：11372783
> 
> 赞同：1
> 
> 时间：2012-07-07T06:19:34.200
> 
> 标签：bash

我有 BusyBox v1.01 提供我的命令。因此，-o 不包含在 grep 中。`grep -o`如果没有 ... -o，我如何获得行为？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-07T06:44:56.033

`awk`解决方案：

```
awk '/PATTERN/{match($0,/PATTERN/);print substr($0,RSTART,RLENGTH)}' inputFile 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-07T06:30:13.047

如果你有`sed`你可以使用简单的正则表达式。（见[linuxquestions.org](http://www.linuxquestions.org/questions/programming-9/sed-emulation-of-grep-o-580625/)）

```
sed -n 's/.*\(PATTERN\).*/\1/p' FILE 
```

因此，仅查找您要编写`StackOverflow`的文件中的文本`file.txt`

```
sed -n 's/.*\(StackOverflow\).*/\1/p' file.txt 
```

请记住 sed 命令中的模式是正则表达式。因此，如果您的模式包含正则表达式的任何元字符，则需要对其进行转义。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-07T06:37:32.297

您可以改用 Perl：

```
perl -lne 'print $1 while /(pattern)/g' FILE 
```

# iphone - 从 iphone 的照片库中获取所有图像

> ID：11372789
> 
> 赞同：4
> 
> 时间：2012-07-07T06:20:24.673
> 
> 标签：iphone, objective-c, ios, xcode4, alassetslibrary

我试图从照片库中检索图像并使用 AssetsLibrary 在我的应用程序中显示。我得到了照片的 URL 路径，但我不知道如何通过它获取照片。

我的代码如下：

```
 NSMutableArray* assetURLDictionaries = [[NSMutableArray alloc] init];

   void (^assetEnumerator)( ALAsset *, NSUInteger, BOOL *) = ^(ALAsset *result, NSUInteger index, BOOL *stop) {
       if(result != nil) {
           if([[result valueForProperty:ALAssetPropertyType] isEqualToString:ALAssetTypePhoto]) {
                [assetURLDictionaries addObject:[result valueForProperty:ALAssetPropertyURLs]];

                NSLog(@"result is:%@",result);
                NSLog(@"asset URLDictionary is:%@",assetURLDictionaries);
                NSURL *url= (NSURL*) [[result defaultRepresentation]url]; 

                [library assetForURL:url
                         resultBlock:^(ALAsset *asset) { [assetsp addObject:asset]; }
                        failureBlock:^(NSError *error){ NSLog(@"test:Fail"); } ]; 
           } 
       }
   };

   NSMutableArray *assetGroups = [[NSMutableArray alloc] init];
   void (^ assetGroupEnumerator) ( ALAssetsGroup *, BOOL *)= ^(ALAssetsGroup *group, BOOL *stop){
        NSLog(@"hi");
        if(group != nil) {
            [group enumerateAssetsUsingBlock:assetEnumerator];
            [assetGroups addObject:group];

            NSLog(@"Number of assets in group :%d",[group numberOfAssets]);           
        }
   };

   assetGroups = [[NSMutableArray alloc] init];
   ALAssetsLibrary *library = [[ALAssetsLibrary alloc] init];

   [library enumerateGroupsWithTypes:ALAssetsGroupAll
                          usingBlock:assetGroupEnumerator
                        failureBlock:^(NSError *error) {NSLog(@"A problem occurred");}]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T06:36:41.930

我的代码如下：

```
- (void)viewDidLoad
{
    carousel.type = iCarouselTypeCoverFlow2;
    [super viewDidLoad];
    xy =[[NSMutableArray alloc]init];

    NSMutableArray* assetURLDictionaries = [[NSMutableArray alloc] init];

    ALAssetsLibrary *library = [[ALAssetsLibrary alloc] init];

    void (^assetEnumerator)( ALAsset *, NSUInteger, BOOL *) = ^(ALAsset *result, NSUInteger index, BOOL *stop) {
        if(result != nil) {
            if([[result valueForProperty:ALAssetPropertyType] isEqualToString:ALAssetTypePhoto]) {
                [assetURLDictionaries addObject:[result valueForProperty:ALAssetPropertyURLs]];

                NSLog(@"result is:%@",result);
                NSLog(@"asset URLDictionary is:%@",assetURLDictionaries);
                NSURL *url= (NSURL*) [[result defaultRepresentation]url]; 

                [library assetForURL:url
                         resultBlock:^(ALAsset *asset) {
                             [xy addObject:[UIImage imageWithCGImage:[[asset defaultRepresentation] fullScreenImage]]];
                             NSLog(@" xy is:%@",xy);
                             image =[ [UIImageView alloc ] initWithImage:[xy objectAtIndex:0]];
                             NSLog(@"image is:%@",image);
                         }
                         failureBlock:^(NSError *error){ NSLog(@"test:Fail"); } ]; 
            } 
        }
    };

    NSMutableArray *assetGroups = [[NSMutableArray alloc] init];
    void (^ assetGroupEnumerator) ( ALAssetsGroup *, BOOL *)= ^(ALAssetsGroup *group, BOOL *stop) {
        NSLog(@"hello");
        if(group != nil) {
            [group enumerateAssetsUsingBlock:assetEnumerator];
            [assetGroups addObject:group];
            NSLog(@"Number of assets in group :%d",[group numberOfAssets]);
            NSLog(@"asset group is:%@",assetGroups);
        }
    };

    assetGroups = [[NSMutableArray alloc] init];

    [library enumerateGroupsWithTypes:ALAssetsGroupAll
             usingBlock:assetGroupEnumerator
             failureBlock:^(NSError *error) {NSLog(@"A problem occurred");}]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-07T11:31:59.827

[这段代码是从这里](https://github.com/AalokParikh/ELCImagePickerController)的一些 ELCImagePickerController 示例中获取的 。为了简化，做了一些修改。

愿这对你有帮助

```
[self.assetGroup enumerateAssetsUsingBlock:^(ALAsset *result, NSUInteger index, BOOL *stop) 
     {         
         if(result == nil) 
             return;
         UIImageView *assetImageView = [[UIImageView alloc] initWithFrame:viewFrames];
        [assetImageView setContentMode:UIViewContentModeScaleToFill];
        [assetImageView setImage:[UIImage imageWithCGImage:[result thumbnail]]];
     }]; 
```

快乐编码:)

**新答案**

只需使用

```
[UIImage imageWithCGImage:[[asset defaultRepresentation] fullScreenImage]] 
```

直接存储图像，而不是在存储资产时存储资产`assetsp`

如下

```
void (^assetEnumerator)( ALAsset *, NSUInteger, BOOL *) = ^(ALAsset *result, NSUInteger index, BOOL *stop) {
       if(result != nil) {
           if([[result valueForProperty:ALAssetPropertyType] isEqualToString:ALAssetTypePhoto]) {
                [assetURLDictionaries addObject:[result valueForProperty:ALAssetPropertyURLs]];

                NSLog(@"result is:%@",result);
                NSLog(@"asset URLDictionary is:%@",assetURLDictionaries);
                NSURL *url= (NSURL*) [[result defaultRepresentation]url]; 

                [library assetForURL:url
                         resultBlock:^(ALAsset *asset) { //Your line
                                                           //[assetsp addObject:asset];
                                                         //My Changed line will store image directly to assetsp
                                                           [assetsp addObject:[UIImage imageWithCGImage:[[asset defaultRepresentation] fullScreenImage]]];
                                                       }
                        failureBlock:^(NSError *error){ NSLog(@"test:Fail"); } ]; 
           } 
       }
   }; 
```

**新答案 1**

尝试使用此代码将 ALAsset 数据存储在可变数组中

```
NSMutableArray *returnArray = [[NSMutableArray alloc] init];

    for(ALAsset *asset in _assets) {

        NSMutableDictionary *workingDictionary = [[NSMutableDictionary alloc] init];
        [workingDictionary setObject:[asset valueForProperty:ALAssetPropertyType] forKey:@"UIImagePickerControllerMediaType"];
        [workingDictionary setObject:[UIImage imageWithCGImage:[[asset defaultRepresentation] fullScreenImage]] forKey:@"UIImagePickerControllerOriginalImage"];
        [workingDictionary setObject:[[asset valueForProperty:ALAssetPropertyURLs] valueForKey:[[[asset valueForProperty:ALAssetPropertyURLs] allKeys] objectAtIndex:0]] forKey:@"UIImagePickerControllerReferenceURL"];

        [returnArray addObject:workingDictionary]; 
```

并在 UIImageView 中获取图像只需执行此操作

```
NSDictionary *dict = [info objectAtIndex:i];
        UIImageView *imageview = [[UIImageView alloc] initWithImage:[dict objectForKey:UIImagePickerControllerOriginalImage]];
        [imageview setContentMode:UIViewContentModeScaleAspectFit]; 
```

# linq - Linq 嵌套内连接

> ID：11372792
> 
> 赞同：0
> 
> 时间：2012-07-07T06:20:55.643
> 
> 标签：linq, linq-to-sql, nested-queries, linq-query-syntax, nested-query

我想加入以下表格

```
1\. B_Book[1st Table]
      -B_BID (Book ID)(PK)
      -B_Name
      -B_CategroyID (FK)
2\. BI_BookInstance [2nd Table]
      -BI_IID(Instance ID)
      -BI_BID (FK)
      -BI_Price
3\. BC_BookCategory [3rd Table]
      -BC_CategoryID (PK)
      -BC_CategoryName 
```

首先加入 B_Book 和 BI_BookInstance，然后将它们的结果加入 BookCategory。（第一次连接）[B_BID 等于 BI_BID] （第二次嵌套连接）[第一次连接 B_CategoryID 的结果等于 BC_CategoryID]

***编辑***

SQL 将类似于以下内容：

```
SELECT * FROM
   (SELECT * FROM B_Book b JOIN BI_BookInstance bi on b.B_BID = bi.BI_BID) as t1
   JOIN BC_BookCategoryID bc on bc.BC_CategoryID = t1.B_CategoryID 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T18:53:37.630

与您在 LINQ 中的查询匹配的内容如下（您会注意到与 SQL 的相似性）。我还提供了一些关于如何重命名返回字段的示例，例如价格或类别名称：

```
var results = from b in B_Book
    join bi in BI_BookInstance
    on b.B_BID equals bi.BI_BID
    join bc in BC_BookCategory
    on b.B_CategoryID equals bc.BC_CategoryID
    select new
      {
        // put in whatever fields you want returned here:
    b.B_BID, 
    b.B_CategoryID, 
    b.B_Name,
    bi.BI_BID,
    bi.BI_IID,
    Price = bi.BI_Price,
    bc.BC_CategoryID,
    CategoryName = bc.BC_CategoryName
      }; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T10:19:52.737

You can do this without explicitly using linq's join statement, provided that navigation properties are in place:

```
from b in ctx.B_Book
from bi in b.BookInstances
select new { b.Property1, bi.Property2, b.BookCategory.Name } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-07T17:53:01.867

我假设内部连接（你的 FK 不为空），所以我想这样查询：

```
 var ctx = new YourEntities();

    var query = from b in ctx.B_Book
                from bi in ctx.BI_BookInstance
                from bc in ctx.BC_BookCategory
                where b.B_BID == bi.BI_BID && b.B_CategoryID == bc.BC_CategoryID
                select new 
                {
                    BInstID = bi.BI_IID,
                    BName = b.B_Name,
                    BPrice = bi.BI_Price,
                    BCategory = bc.BC_CategoryName
                };

    foreach (var item in query)
    {
        Console.WriteLine(item.BInstID);
        Console.WriteLine(item.BName);
        Console.WriteLine(item.BPrice);
        Console.WriteLine(item.BCategory);
        Console.WriteLine("");
    } 
```

# iphone - cocos-2d：当我通过任务管理器关闭它时，我的应用程序崩溃了

> ID：11372795
> 
> 赞同：3
> 
> 时间：2012-07-07T06:21:21.383
> 
> 标签：iphone, ios, cocos2d-iphone

我有奇怪的问题，当我通过任务管理器关闭我的应用程序时，我的应用程序在线崩溃

```
int retVal = UIApplicationMain(argc, argv, nil, @"AppDelegate"); 
```

抛出**“线程：1 信号 SIGKILL”**错误，我根本无法重新打开我的应用程序。其他时候效果很好。请有人帮我解决这个问题。我是 cocos-2d 的新手，所以请温柔:(，谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-07T06:28:04.383

据我所知，这是正常的预期行为。我认为这看起来很奇怪的原因是，当您从 Xcode 运行时，您的可执行文件附加到 Xcode 中的调试器，因此它有时会阻止执行操作（例如，在崩溃或 SIG_KILL 场景中）。这只是在提示您使用任务栏关闭应用程序时苹果正在做什么......它会向进程发送 SIGKILL :-)

编辑：出于好奇，我进行了一些测试，发现`applicationWillTerminate:`不是首先调用的，这对于应用程序的消费者来说实际上是令人鼓舞的。你真的在 SIGKILLing 这些东西。我认为这意味着（使用后台处理工作流程）调用该方法的唯一情况是您[选择退出后台执行](http://developer.apple.com/library/ios/#DOCUMENTATION/iPhone/Conceptual/iPhoneOSProgrammingGuide/ManagingYourApplicationsFlow/ManagingYourApplicationsFlow.html#//apple_ref/doc/uid/TP40007072-CH4-SW5)。好消息是，为了以这种方式杀死一个应用程序，您需要先将其移至后台，因此拆卸的规范位置是 applicationWillResignActive:*但您知道...*

编辑：避免无法再次运行问题的说明：

1.  从 Xcode 在您的设备上构建和运行应用程序
2.  应用程序“启动并运行”后，在 Xcode 中单击“停止”
3.  当应用程序关闭时，它现在与 Xcode “分离”，您可以根据需要终止它并重新打开。请记住，它将不再将任何 NSLog 调用或其他方式记录到 Xcode。

# php - 警告：file_get_contents(image.jpg) [function.file-get-contents]：打开流失败：php 中没有这样的文件或目录

> ID：11372800
> 
> 赞同：0
> 
> 时间：2012-07-07T06:21:39.940
> 
> 标签：php, wordpress, email-attachments

1.这里我正在尝试使用 php mail() 函数将我的 jpg 图像文件作为附件发送到邮件。

2.我的邮件附件与word文档（.doc作为附件）一起发送很好。但是，当我尝试将.jpg作为附件发送时抛出错误。我使用的代码：

```
<?php
/*If there is no error, send the email*/
if(isset($_POST['submit-button-name'])) {       
  $uname=$_POST['uname'];                           
  $to = $_POST['mailid'];
  $mobileno=$_POST['mobile'];
  $location=$_POST['location'];
  $from = "Urname <urname@domainname.com>";
  $subject = $_POST['uname']." testing";
  $separator = md5(time());
  /* carriage return type (we use a PHP end of line constant)*/
    $eol = PHP_EOL;
  /*attachment name*/
    $filename = "image.jpg";
    $attachment = chunk_split(base64_encode(file_get_contents('image.jpg')));
  /*main header*/
    $headers  = "From: ".$from.$eol;
    $headers .= "MIME-Version: 1.0".$eol; 
    $headers .= "Content-Type: multipart/mixed; boundary=\"".$separator."\"";
  /*no more headers after this, we start the body!*/
    $body = "--".$separator.$eol;
    $body .= "Content-Transfer-Encoding: 7bit".$eol.$eol;
    $body .= "Check out the attachment.".$eol;
 /*message*/
    $body .= "--".$separator.$eol;
    $body .= "Content-Type: text/html; charset=\"iso-8859-1\"".$eol;
    $body .= "Content-Transfer-Encoding: 8bit".$eol.$eol;
    $body .= $message.$eol;
 /*attachment*/
    $body .= "--".$separator.$eol;
$body .= "Content-Type: image/jpg; name=\"".$filename."\"".$eol; 
$body .= "Content-Transfer-Encoding: base64".$eol;
$body .= "Content-Disposition: attachment; file=\"".$filename."\"".$eol.$eol;
$body .= $attachment.$eol;
$body .= "--".$separator."--";
 /*send message*/
if (mail($to, $subject, $body, $headers)) {
    $mail_sent=true;
    echo "<font color='white'>Mail sent</font>";
    $frm="urname@domainname.com";
    $subj="Acknowledgement mail for Brochure form";
    $msg = $_POST['username'] . ",\n\nThank you for your recent enquiry.";
    $body = "Name: ".$_POST['uname'] ."\n\nEmail: ".$_POST['mailid'] ."\n\nMobile: 
        ".$_POST['mobile'] ."\n\nLocation: ".$_POST['location'];
    $headers = 'From: '.'careers@domainname.com';
    mail($frm,$subj,$body,$headers);
} else {
    $mail_sent=false;
}
if($mail_sent == true)
{
/*to clear the post values*/
  $uname="";
  $to="";
  $mobileno="";
  $location="";
}
else{
  echo "Error,Mail not sent";
}
    }
    ?> 
```

3.错误被提出为：

警告：file_get_contents(image.jpg) [function.file-get-contents]：无法
打开流：第 48 行的 footer.php 中没有此类文件或目录

4.我曾经收到带有正文内容的邮件（“检查附件”），附件为image.jpg，0k（没有打开图像）。

5.please help.thanks提前。它的紧急。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T06:31:34.350

我认为内容类型是 jpeg 而不是 jpg。

`Content-Type: image/jpeg;`

在您添加附件的部分中。

还有以下几行：

`$body .= "Content-Disposition: attachment; file=\"".$filename."\"".$eol.$eol;`

`$body .= "--".$separator."--";`

大概应该是：

`$body .= "Content-Disposition: attachment;".$eol.$eol;`

`$body .= "--".$separator."--".$eol;`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T06:43:26.527

通过给出我的绝对路径来解决问题 - file_get_contents('absolute path'); 我用 $_SERVER['DOCUMENT_ROOT'].'filename'; 它成功了。另外，我将图像/jpg 更改为图像/jpeg。谢谢大家。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T05:26:36.477

我通过在这行代码中提供图像的完整绝对路径解决了我的问题：

```
$attachment = chunk_split(base64_encode(file_get_contents('http://wordpress1/wp-content/themes/MyTheme/VyTCDC-brochure.jpg'))); 
```

所以，你可以走你的完整路径。现在，它就像一个魅力。

# c# - C# 优先级列表

> ID：11372808
> 
> 赞同：4
> 
> 时间：2012-07-07T06:24:02.233
> 
> 标签：c#, data-structures

我无法找到正确的 C# 数据结构。我正在寻找优先级列表。它需要具备以下条件：

*   只有一个项目具有给定的优先级
*   必须始终保持分类
*   能够将项目添加到列表的末尾 -- prorityList.Add(item)
*   能够以给定的优先级插入项目——priorityList.Add(3, item)
*   能够使用优先级访问任何元素——priorityList[3]
*   能够以给定的优先级删除项目——priorityList.RemoveAt(3)
*   当添加或删除一个项目时，列表的其余部分必须适当地向上或向下移动——例如，如果第三个项目被删除，第四个项目变成第三个项目，第五个项目变成第四个项目，等等。

C# 的 SortedList 看起来很有希望，但它无法处理以已存在的优先级插入或以给定优先级删除元素（在两种情况下都适当地移动列表）。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-07T06:27:54.810

如果您只使用一个标准，该标准`List<T>`应该可以满足您的所有要求，如果您使用`priority == index.`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T06:37:17.920

使用`SortedDictionary<TKey, TValue>`where key is priority 怎么样？它并不完全符合您的所有要求，并且不清楚您是否希望优先级是唯一的。如果您不希望优先级独一无二，那么`LinkedList<T>`这可能是您最好的选择。

# php - Yii 页面变体

> ID：11372813
> 
> 赞同：0
> 
> 时间：2012-07-07T06:26:02.577
> 
> 标签：php, yii, url-routing

我有一个需要有不同页面的网站。

例如：

```
website.com/variation1/page1
website.com/variation2/page1
website.com/variation3/page1 
```

所有这些都具有相同的数据库并具有相同的功能。唯一的区别是这些变体在页面模板上有所不同，即。页眉、页脚、内容等。这是为了分析页面访问量。

有了这个，最好的方法是什么？在 Yii 中，有一个通用的布局，所以页眉/页脚取决于布局。在这种情况下，页眉/页脚应该特定于每个页面，以便用户可以只修改特定页面的页眉/页脚/内容而不会影响其他页面。

那么，什么是最好的方法呢？

先感谢您。

**编辑：**

我想我知道我在这里寻找什么：有没有办法从布局中覆盖/添加视图文件中的标题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T11:05:11.080

创建三个不同的布局，比如variation1.php、variation2.php、variation3.php，然后根据action(website.com/variation/pageone)或参数(website.com/variation/page/1)改变布局(in行动）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T07:13:00.883

我刚刚找到了处理页面变化的可能解决方案。

在我的视图目录下，我创建了一个`varation`包含页面的目录，即

```
/view/variation/1/page1.php
/view/variation/2/page1.php 
```

所以当我想渲染变量时，我会在控制器中调用每个变量，并包含参数。

前任。`$this->render('variation/1/page1')`有些。

在每个页面中，如果您想使用特定的标题信息，您可以使用

注册元标签

注册脚本文件/脚本

注册 CSS 文件/CSS

让我知道是否有更好的方法来做到这一点。

# java - 是否有像 JAD 对 JDK5 类一样支持 Windows/Linux/AIX 的命令反编译工具？

> ID：11372814
> 
> 赞同：1
> 
> 时间：2012-07-07T06:26:10.460
> 
> 标签：java, decompiling

我使用[JAD](http://www.varaneckas.com/jad/)（不再更新？）来反编译 .class 文件，但在 AIX 或 Linux 上，JAD 不支持 jdk 5 类（由 @Thilo 在此[线程](https://stackoverflow.com/questions/11361955/jad-version-mismatch-major-minor-49-0-expected-45-3-whats-version-of)中回复）。

我知道一些反编译工具是基于 JAD 的，但是有没有这样的工具既提供命令行界面（我知道 DJ 有一个我不想要的 GUI）我可以从 Java 调用它并支持 JDK5 .class？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T20:34:38.517

是的，有一个，这是一个托管在 free.fr 上的法国项目。幸运的是，Archive.org 的 Wayback 机器已将其编入索引，包括下载的二进制文件。

它也反编译 Java 1.5 和 1.6。

这是链接 [http://web.archive.org/web/20110416091052/http://java.decompiler.free.fr/](http://web.archive.org/web/20110416091052/http://java.decompiler.free.fr/)

# javascript - 使用 JavaScript 在父窗口中隐藏弹出窗口

> ID：11372816
> 
> 赞同：1
> 
> 时间：2012-07-07T06:27:19.867
> 
> 标签：javascript, jquery, windows

在我的网站注册是通过一步一步的过程完成的。

在第一步中，我使用 JavaScript 打开一个弹出窗口，并在该窗口中的任务完成后自动关闭此弹出窗口。

接下来，我通过单击按钮进入下一步。第二步还有一个按钮可以返回到第一步。

当我通过单击第二步中的后退按钮进入第一步时，将加载第一步中的弹出窗口。

返回第一步时不需要加载这个弹窗。

我怎样才能做到这一点？

这是 JavaScript 代码：

```
function show_gal()
{

    var windowSizeArray = [ "width=935,height=580",
                                    "width=935,height=600,scrollbars=yes" ];
    var url1 = "<?php echo base_url();?>plugin/index.php";
    var id = $("#hidtuid").val();
    var url = url1+"?usrid=" + id;
    var windowName = "Image Upload";
    var windowSize = windowSizeArray;
    window.open(url, windowName, windowSize);
} 
```

这是完成弹出窗口中的任务后弹出窗口中的代码：

```
window.close(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T06:44:16.503

它更像是一个合乎逻辑的问题，你会找到不同的方法来做到这一点。一种方法是：

您是否在页面加载时加载第一个窗口？

如果是这样，当第一个弹出窗口关闭时，在您的第一页中使用隐藏变量为隐藏字段分配一些值。

在调用弹出窗口之前在您的页面加载功能上检查此隐藏字段的值，如果未分配它，您将不会显示弹出窗口。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T06:57:37.383

你试过这个吗？

```
window.parent.close(); 
```

# xna - XNA游戏组件

> ID：11372818
> 
> 赞同：2
> 
> 时间：2012-07-07T06:27:35.373
> 
> 标签：xna, xna-4.0, xnanimation

我对如何将变量值从一个游戏组件传递到另一个感到困惑。我正在使用 xna 4.0。

我创建了两个游戏组件，拉绳和输入管理器。我想读取用户的键盘输入并将其传递到将更新位置的拉绳上。

我无法在drawstring（drawablegamecomponent）上添加组件。我可以在课堂上做，但不能在游戏组件上做。你们能在这里发布一些例子吗？对新手而言。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T19:01:52.960

用于`GameComponent`您希望`Update`在每一帧上调用的东西，并`DrawableGameComponent`用于您想要`Draw`在每一帧上`LoadContent`调用并在适当时调用的东西（在程序开始时，以及每当设备丢失时，例如当用户在 Windows 上按下***Ctrl-Alt-Del时）。***

因为`InputManager`您可能需要一种`Update`方法，以便您可以更新用户输入，因此`InputManager`可以是`GameComponent`. `DrawString`听起来不需要。这两个类听起来都像是服务。`Initialize`在游戏类的构造函数或方法中，执行以下操作：

```
Components.Add(mInputManager = new InputManager(this));
Services.AddService(typeof(InputManager), mInputManager);
Services.AddService(typeof(DrawString), mDrawString = new DrawString(this)) 
```

（`DrawString`以及您想要从中获取游戏服务的任何其他类都需要对该`Game`对象的引用。）

（请注意，`GameComponent`s 不一定必须是服务，服务也不一定必须是`GameComponent`s。要获取`Update`和/或被`Draw`调用，您必须调用`Components.Add(...)`; 单独地，要获取可作为服务检索的对象，您必须打电话`Services.AddService(...)`）。

然后，当您想在其他游戏组件（或您已将引用传递给游戏对象的任何类）中使用`InputManager`or服务时，您可以这样做：`DrawString`

```
InputManager input = (InputManager)Game.Services.GetService(typeof(InputManager)); 
```

就个人而言，我编写了一个扩展方法以使其更简洁：

```
using XNAGame = Microsoft.XNA.Framework.Game;

...

   public static T GetService<T>(this XNAGame pXNAGame)
   {
      return (T)pXNAGame.Services.GetService(typeof(T));
   } 
```

然后获取输入服务的行变为：

```
InputManager input = Game.GetService<InputManager>(); 
```

# jquery - jquery动态地将选择器添加到现有函数作为监视对象

> ID：11372821
> 
> 赞同：2
> 
> 时间：2012-07-07T06:28:13.923
> 
> 标签：jquery, selector

作为 jquery 的新手，我想知道是否可以动态地将一个`selector`对象或任何对象添加到函数监视列表中（还不知道正确的术语）`$(selector).function()`

例如，我已经动态地向模态添加了一个取消按钮。这个按钮的id是随机的。有没有办法将它添加到下面`$('#closeX', '#mask', '#RANDOM_BUTTON_ID')`以执行与 closeX & mask 相同的操作？

```
$('#closeX, #mask').on('click', function() {
  $('#modalBox').fadeOut(300 , function() {
    $("#mask").css("display", "none");
      // code to remove dynamic button from parent
    });
   return false;
 }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T06:33:51.370

您可以使用公共类将事件动态添加到多个控件，而不是控件的 id。将公共类分配给所有现有的和动态添加的控件，并`on`用于绑定事件动态添加的控件。

使用`$('.commonclass')`代替`$('#closeX', #mask', '#RANDOM_BUTTON_ID')`

**HTML**

```
 <input type="button" id="closeX" class="commonclass" />
  <input type="#mask" id="closeX" class="commonclass" /> 
```

**Javascript**

```
$('.commonclass').on('click', function() {
  $('#modalBox').fadeOut(300 , function() {
    $("#mask").css("display", "none");
      // code to remove dynamic button from parent
    });
   return false;
 }); 
```

# xcode - 如何让 UISearchBar 从过滤后的结果中进行选择？

> ID：11372822
> 
> 赞同：0
> 
> 时间：2012-07-07T06:28:31.120
> 
> 标签：xcode, uisearchbar

我希望有一个人可以帮助我。我实现了一个搜索栏，它确实按照预期的方式过滤了结果。问题是当我从过滤结果中选择时，它是从原始数组中选择的。根据我的阅读，一种方法是从过滤后的数组中删除所有项目并添加所选项目。另一种方法是删除所有与搜索条件不匹配的项目。

问题是我不知道该怎么做——尽管搜索了几个小时。对于正确方向的任何帮助或指示，我将不胜感激。

**这是我的代码：**

```
(void)viewDidLoad
{
    [super viewDidLoad];

    self.tableView.scrollEnabled = YES;

    categories = [NSArray arrayWithObjects:
                  @"Other",
                  @"Breakfast",
                  @"Chemist",
                  @"Computer",
                  @"Dinner",
                  @"Drinks",
                  @"Entertainment",
                  @"Fuel",
                  @"Groceries",
                  @"Haircut",
                  @"Hotel",
                  @"Internet",
                  @"Laundry",
                  @"Lunch",
                  @"Meals",
                  @"Medical",
                  @"Parking",
                  @"Snacks",
                  @"Stationery",
                  @"Taxis",
                  @"Telephone",
                  @"Transport",
                  @"Travel Taxes",
                  nil];

    self.allCatgeories = categories;

    [self.tableView reloadData];

} 
```

和

```
(void)filterContentForSearchText:(NSString*)searchText scope:(NSString*)scope
{

    NSPredicate *resultPredicate = [NSPredicate 
                                    predicateWithFormat:@"SELF contains[cd] %@",
                                    searchText];

    self.searchResults = [self.allCatgeories filteredArrayUsingPredicate:resultPredicate];

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T21:05:22.287

您可以在下面使用，它对我来说很好用：

```
- (void)filterContentForSearchText:(NSString*)searchText scope:(NSString*)scope
{
[self.filteredInboxItems removeAllObjects];
/*
 Search the main list for products whose type matches the scope (if selected) and whose name matches searchText; add items that match to the filtered array.
 */
for (NSNumber *id in self.inboxItemDAO.inboxItemIDs)
{
    NSDictionary *inboxItem = [self.inboxItemDAO getInboxItem:id];
    if ([scope isEqualToString:@"bla bla 1"])
    {
        NSComparisonResult result = [[inboxItem objectForKey:@"Subject"] compare:searchText options:(NSCaseInsensitiveSearch|NSDiacriticInsensitiveSearch) range:NSMakeRange(0, [searchText length])];
        if (result == NSOrderedSame)
        {
            [self.filteredInboxItems addObject:inboxItem];
        }
    }
    else if ([scope isEqualToString:@"bla bla2"])
    {
        NSComparisonResult result = [[inboxItem objectForKey:@"Sender"] compare:searchText options:(NSCaseInsensitiveSearch|NSDiacriticInsensitiveSearch) range:NSMakeRange(0, [searchText length])];
        if (result == NSOrderedSame)
        {
            [self.filteredInboxItems addObject:inboxItem];
        }
    }
    else if ([scope isEqualToString:@"bla bla 3"])
    {
        NSComparisonResult result = [[inboxItem objectForKey:@"Action"] compare:searchText options:(NSCaseInsensitiveSearch|NSDiacriticInsensitiveSearch) range:NSMakeRange(0, [searchText length])];
        if (result == NSOrderedSame)
        {
            [self.filteredInboxItems addObject:inboxItem];
        }
    }
} 
```

}

# html - 在 html 中创建选框

> ID：11372825
> 
> 赞同：1
> 
> 时间：2012-07-07T06:28:47.553
> 
> 标签：html, marquee

我想创建一个选取框，当文本从一侧退出并显示在另一侧时

就像我有类似的代码

```
<marquee behavior="scroll" scrollamount="1.5">Hello World</marquee> 
```

当第一个字母隐藏它进入左侧时，它显示 Hello World 从左向右移动，然后我希望我不再隐藏它从左侧开始。就像 H 从左侧隐藏然后 H 显示在右侧。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T06:33:25.823

放

> 选框行为=“替代”>

要解决这个问题...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-07T06:36:22.300

试试这个

```
 <marquee behavior="alternate" >Heloo welcome</marquee> 
```

演示[http://jsfiddle.net/XAzv5/](http://jsfiddle.net/XAzv5/)

# android - Android BitmapFactory.decodeStream(...) 不在模拟器上加载 HTTPS URL

> ID：11372831
> 
> 赞同：2
> 
> 时间：2012-07-07T06:29:39.973
> 
> 标签：android

在模拟器上运行时，应用程序不会从 HTTPS URL 加载图像。

示例代码：

```
URL url = new URL("https://someserver.com/photo.jpg");
mImageView.setImageBitmap(BitmapFactory.decodeStream(url.openStream())); 
```

在实际设备上运行时，图像加载得很好。如果通过 HTTP 而不是 HTTPS 访问图像，模拟器也会加载图像。

我做错了什么还是这是一个已知问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-07T06:54:45.640

使用下面的代码从 url 在 imageview 中显示图像。

```
ImageView mImageView = (ImageView)findViewById(R.id.mImageView1);

URL url = new URL(address);
InputStream content = (InputStream)url.getContent();
Drawable d = Drawable.createFromStream(content , "src"); 
mImageView.setImageDrawable(d); 
```

并为此使用下面的代码。

```
try {
    URL url = new URL(imageUrl);
    HttpGet httpRequest = null;

    httpRequest = new HttpGet(url.toURI());

    HttpClient httpclient = new DefaultHttpClient();
    HttpResponse response = (HttpResponse) httpclient.execute(httpRequest);

    HttpEntity entity = response.getEntity();
    BufferedHttpEntity b_entity = new BufferedHttpEntity(entity);
    InputStream input = b_entity.getContent();

    Bitmap bitmap = BitmapFactory.decodeStream(input);

    ImageView mImageView = (ImageView) findViewById(R.id.mImageView);
    mImageView.setImageBitmap(bitmap);
} catch (MalformedURLException e) {
    Log.e("log", "bad url", t);
} catch (IOException e) {
    Log.e("log", "io error", t);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-07T06:40:24.727

这是一个受信任的 https 站点吗？如果不是，您将遇到连接问题。

看看这个...

[http://droidos-coding.blogspot.com/2012/03/android-trusting-all-https-self-signed.html](http://droidos-coding.blogspot.com/2012/03/android-trusting-all-https-self-signed.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-07T06:53:43.470

试试这个代码：

```
imageView.setImageBitmap(LoadImageFromWebOperations(url));

private Bitmap LoadImageFromWebOperations(String url){
           try{
             String encodedurl = url.replace(" ", "%20");
             InputStream is = (InputStream) new URL(encodedurl).getContent();
             Bitmap d = BitmapFactory.decodeStream(is);
             return d;
           }catch (Exception e) {
            e.printStackTrace();
//          System.out.println("Exc="+e);
            return null;
           }
         } 
```

请确保您在清单文件中添加了**互联网权限**。这将帮助你这样做。

# c++ - 关于引用运算符返回类型的 C++ 基本概念

> ID：11372833
> 
> 赞同：8
> 
> 时间：2012-07-07T06:29:57.430
> 
> 标签：c++, function, reference, operator-keyword

我需要明确一个基本概念。这段代码工作正常。有人可以解释一下，如果函数 calDouble 已经返回 int 的地址（引用），为什么我需要在 main int *j = &calDouble(i); 中进一步使用 & 运算符 获取int的地址（参考）？谢谢。

```
int& calDouble(int x)
{
    x = x*2;
    return x;

}

int main(int argc, char *argv[])
{
    int i = 99;
    int *j = &calDouble(i);

    system("PAUSE");
    return EXIT_SUCCESS;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-07T06:31:55.843

`int& calDouble(int x)`不返回地址，而是对`int`.

您需要获取引用的地址才能将其分配给指针。

但是请注意，您的代码会调用**未定义的行为**。因为您按值传递参数，所以会在函数内部创建它的副本。所以你通过引用返回一个局部变量，这是不合法的。

我认为您的困惑来自`&`. 这可以通过两种方式使用：

*   应用于变量`&x`，它获取它的地址
*   在声明中时`int& x`，它定义了一个引用

引用只是一个别名，一个变量的不同名称。

```
int x = 0;
int& y = x; 
```

现在，`x`并`y`引用相同的变量。

```
int* z = &x; 
```

采用 的地址`x`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-07T06:37:43.177

`int&`是引用类型。这**不是**地址。

要看看有什么`&calDouble(i)`作用，请考虑我们是否将其分解为两个语句：

```
int& x = calDouble(i);
... = &x; 
```

该`calDouble()`函数返回一个引用类型，然后前面的函数`&`获取返回的*地址*。所以类型是 now `int*`，这就是编译该行的原因。

但是，您的程序表现出未定义的行为！一旦函数结束，`x`in`calDouble()`就会消失。最初存在的值*可能仍在内存中*，这就是您的程序“工作”的原因。但这在生产代码中是不可靠的，有朝一日，您完美运行的测试程序可能会在部署时崩溃。

出于这种不同的原因，返回对局部变量的引用通常是一个坏主意。（您将看到类方法返回对成员数据的引用，只要对象仍在范围内就可以了，因为这些变量仍然存在。）只需返回一个常规`int`并继续生活。如果您真的担心返回大对象时的性能，优化编译器可以进行一些[返回值优化。](http://en.wikipedia.org/wiki/Return_value_optimization)

# javascript - Twitter API：更新工作，但过滤器没有

> ID：11372835
> 
> 赞同：0
> 
> 时间：2012-07-07T06:30:11.633
> 
> 标签：javascript, oauth, twitter

Twitter API：更新工作，但过滤器没有 javascript twitter oauth twitter-api jsoauth

`OAuth`在下面的代码中，我通过 bytespider 从 jsOAuth 库中实例化了一个实例

```
 // jsoauth API reference:
    // http://bytespider.github.com/jsOAuth/api-reference/

    var twitter = new OAuth(oauthOptions);

    //authentication occurs

    console.log('url: ' + url);
    console.log('data: ' + JSON.stringify(data));

    twitter.post(
        url,
        data,
        success,
        failure
    ); 
```

当我访问流时：

```
 url: https://stream.twitter.com/1/statuses/filter.json 
    data: {"track":"%40twitterapi"} 
    --> This does not work, neither the `success` nor `failure` callbacks get called, just hangs 
```

当我发推文时：

```
 url: https://api.twitter.com/1/statuses/update.json 
    data: {"status":"foobar","trim_user":true,"include_entities":true} 
    --> This works, the `success` callback gets called 
```

我的猜测是身份验证详细信息没有通过`stream.twitter.com`API，即使它通过`api.twitter.com`API。可以安全地排除 OAuth 问题，因为能够发送推文表明身份验证已成功。

我在这里做错了什么？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T10:58:28.780

这并不是说

> 这不起作用，既不调用`success`也不`failure`调用回调，只是挂起

因为您正在使用[Streaming API](https://dev.twitter.com/docs/streaming-apis)，这意味着“挂起”，因为使用这意味着您正在打开与 Twitter 服务器的连接，只要应用程序正在运行，该服务器就会保持活动状态。然后，每条新推文都会像通过管道的水一样实时发送到该连接。

您应该考虑使用[HTML5 WebSockets](http://www.html5rocks.com/en/tutorials/websockets/basics/)。

# javascript - 从父窗口调用 iframe 函数

> ID：11372840
> 
> 赞同：2
> 
> 时间：2012-07-07T06:30:37.807
> 
> 标签：javascript, jquery

如何从父窗口调用 ifram 中的 javascript 函数。我有一个包含 iframe 的 jsp 页面。jsp 页面由“a.yeama.net”服务器提供服务，而 iframe 由“b.yeama.net”服务器提供服务。

```
<iframe width="1200" height="640" name="data" id="dataId" >
</iframe>   
<br/>
<input type="button" name="data" value="Save data" onclick="callSaveData();" /> 
```

从父 jsp 页面尝试以下代码并在 IE 中收到权限被拒绝错误

```
window.frames['data'].callData(); 
```

也试过

```
document.getElementById('dataId').contentWindow.callData(); //didn't work 
```

## iframe 中的函数

```
window.callData = function(){
   alert('Iframe function');
} 
```

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T07:46:52.490

你可以通过在一个通用的 .js 文件中声明你的函数来做到这一点。因此，你可以从任何你想要的地方访问你的函数。

祝你今天过得愉快

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-07T08:06:52.110

我建议您使用 jquery.load 方法而不是 iframe 将您的第二页加载到第一页的 div 中，然后您可以从两个页面调用任何方法

```
$('#result').load('PageWhichYouAreOpeningInIFrame.html'); 
```

或者如果您仍然想使用 IFrame，那么您可以使用：

[从父页面调用 iframe 中的 JavaScript 代码](https://stackoverflow.com/questions/251420/invoking-javascript-in-iframe-from-parent-page)

[http://api.jquery.com/load/](http://api.jquery.com/load/)

# codeigniter - Codeigniter：不在表中插入数据

> ID：11372841
> 
> 赞同：1
> 
> 时间：2012-07-07T06:31:01.160
> 
> 标签：codeigniter

# 更新：解决了..

由于某种原因，数据没有被插入到表中。然而，正如我在 var dump 中看到的那样，它是从表单中发布的，但除此之外，不会这样做。所以，这里有3个模块。这是一个非常简单的测试方案：只是一个包含两个字段的表单，您按下提交并应该被插入。（我可以用一个页面在普通的 PHP 中完成所有这些，但是，MVC 框架在这方面是一场噩梦，您编写的代码比程序所需的代码多 30 倍。

```
<?php

class Inserting_controller extends CI_Controller {

     public function __construct()
       {
            parent::__construct();
            $this->load->model('Inserting_model');

       }

     public function index ()
     {

        $this->load->view('inserting_view'); 
     }

    // Controller
     public function insert()
     {
     $data = array(
        'username' => $this->input->post('username', TRUE),
        'password' => sha1($this->input->post('password', TRUE)
     ));

     var_dump($data); // We do get the data posted
      exit;

     $this->Inserting_model->insertdata($data); // this should forward them to the Model
}
}
?>

==============
MODEL

    <?php

    class Inserting_model extends CI_Model{

        function __construct()
        {
            // Call the Model constructor
            parent::__construct();
            $this->load->database();
        }

            public function insertdata($data)
                {
                 $this->db->insert('users', $data);
                } 

    }

    ?>

========
VIEW

    <div id="inserting_form">

            <?php echo form_open('index.php/Inserting_controller/insert/'); ?> 

          <ul>

                <li>

                <label>Username</label>      

                <div><?php echo form_input(array('id' => 'username', 'name' => 'username')); ?></div>

               </li>
               <li>
                <label>Password</label>      

                <div><?php echo form_password(array('id' => 'password', 'name' => 'password')); ?></div>   
                </li>   

                <li><?php echo validation_errors();?></li>

                <li><?php echo form_submit(array('name' =>'submit'),'Insert');?> </li>

          </ul>

          <?php echo form_close(); ?>

            </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T06:41:29.017

脸红：/

在编写调试代码时，我忘记删除出口；因此，程序在那之后立即退出......

# shell - 奇怪的外壳行为

> ID：11372843
> 
> 赞同：1
> 
> 时间：2012-07-07T06:31:28.547
> 
> 标签：shell

这是一个简单的 bash 脚本：

```
a="asd"
b="qf"
echo "$a.$b"
echo "$a_$b" 
```

它的输出是：

```
asd.qf
qf 
```

为什么第二行不是“ `asd_qf`”而是“ `qf`”？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-07T06:33:21.643

因为你还没有定义一个名为`a_`. 要使第二个打印输出正常工作，请使用：

```
echo "${a}_$b" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-07T06:34:04.990

您的第二个`echo`显示未设置的变量的值`$a_`。

采用`echo "${a}_$b"`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-07T06:34:59.447

shell 有关于变量名可以包含什么的规则，并被`$a_`解释为命名的变量`a_`（没有具有该名称的变量，因此其值为空）。

您始终可以添加大括号以明确。在这种情况下，`${a}_$b`将清楚地识别变量名称是什么，结果将是您所期望的。

# c# - 从 Freckle API 获取时间条目

> ID：11372854
> 
> 赞同：1
> 
> 时间：2012-07-07T06:34:25.753
> 
> 标签：c#, api

我想在某些特定日期使用其 API 获取 Freckle 的时间条目，但要么我得到 404 - Not Found，要么当我更改 URL 的格式时，它会生成 406 - Not Acceptable。**当我想在不使用日期过滤器的情况下访问它们时，它工作正常**。我为日期过滤器发送的 URI 是：

```
 string dFilter = @"\ -data'search[from]=2012-07-05'";
        string uri = @"https://apitest.letsfreckle.com/api/entries.xml"+dFilter;
        webRequest = (HttpWebRequest)WebRequest.Create(uri);
        webRequest.Headers.Add("X-FreckleToken:lx3gi6pxdjtjn57afp8c2bv1me7g89j");
        webRequest.Method = "GET";
        WebResponse webResponse = webRequest.GetResponse();
        StreamReader sr = new StreamReader(webResponse.GetResponseStream());
        responseXML = sr.ReadToEnd(); 
```

你能告诉我如何正确使用这个日期过滤器吗？API 的文档可以在以下位置找到： [文档](http://madrobby.github.com/freckle-apidocs/entries.html)

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-07T06:41:03.047

我认为问题在于您使用作为命令一部分的空格和命令行选项在 URL 中包含过滤器`curl`。

该文档显示如下内容：

```
curl -G -H "[stuff]" https://apitest.letsfreckle.com/api/entries.xml \
  -d 'search[from]=2009-10-10' 
```

有`\`一个续行，`-d`用于传递请求的数据。引号只是为了将其全部保存在 shell 的一个参数中。`-G`说仍然使用请求`GET`，并将数据放在 URL 中......但这并不像你所做的那样。试试这个：

```
string filter = "search[from]=2012-07-05";
string uri = @"https://apitest.letsfreckle.com/api/entries.xml?" + filter; 
```

（另请注意，您应该为 the和 the使用`using`声明。）`WebResponse``StreamReader`

# c++ - std::绑定到 std::function？

> ID：11372855
> 
> 赞同：25
> 
> 时间：2012-07-07T06:34:27.110
> 
> 标签：c++, function, c++11, bind, std

我使用这个得到一个编译错误：

```
std::vector<std::function<int(int)>> functions;

std::function<int(int, int)> foo = [](int a, int b){ return a + b; };
std::function<int(int)> bar = std::bind(foo, 2);

functions.push_back(bar); 
```

错误是：

> /usr/include/c++/4.6/functional:1764:40: 错误：不匹配调用 '(std::_Bind(int)>) (int)'

有人可以告诉我如何将 a 转换`std::bind`为 a`std::function`吗？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-07-07T06:44:52.963

```
std::function<int(int)> bar = std::bind(foo, 2, std::placeholders::_1); 
```

# javascript - 使用 Javascript 替换 textarea 中的文本

> ID：11372857
> 
> 赞同：0
> 
> 时间：2012-07-07T06:34:32.960
> 
> 标签：javascript

我需要使用 Javascript 替换正则表达式的所有匹配项直到文本区域中的插入符号位置。例如，如果 textarea 中的文本是：“6 个学生将 2 本书带到 5 个班级”并且光标放在书本上并且正则表达式是 /\d/，则数字 6 和 2 应该替换为，例如， 4\. 我知道替换功能，我知道如何获得插入符号的位置，但是我该如何解决这个问题？提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-07T07:03:27.440

```
textareaClicked = function(e){
    var pos = e.target.selectionStart;
    var beforeSelection = e.target.innerHTML.slice(0,pos);
    var afterSelection = e.target.innerHTML.slice(pos);
    var newHTML = beforeSelection.replace(/\d/g,4) + afterSelection;
    e.target.innerHTML = newHTML;
    e.target.setSelectionRange(pos,pos);
};

document.getElementById('foo').onclick=textareaClicked; 
```

[在这个 jsfiddle](http://jsfiddle.net/pBnyh/)中看到它的实际效果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T07:00:16.507

可能有一种更优雅的方式，但我只是从文本区域复制文本，将字符串拆分为插入符号位置的两个子字符串（你说你知道如何找到），对第一个子字符串进行替换，然后将它与第二个子字符串连接起来。将其复制回文本区域，确保适当地更新插入符号的位置。

# javascript - 在 JavaScript 中通过引用传递参数？

> ID：11372861
> 
> 赞同：0
> 
> 时间：2012-07-07T06:35:39.543
> 
> 标签：javascript

我有一个技术挑战，我正试图找出解决的最佳方法。这是场景。

我有一个启动另一个 HTML 页面的 HTML 页面......我们称它为 main.html，它有一个调用 test.html 的按钮 在 test.html 中，用户可以回答一系列问题并将结果提交给学习管理系统。每次他们进行测试时，我在 test.html 页面中有一个 JavaScript 变量，该变量从 A 到 B 再到 C 等。例如，如果他们第一次进行测试，它将类似于 0001A，第二次0001B。

这很好用，但是如果他们关闭 test.html 页面，因为这个 JavaScript 变量在其中，如果用户尝试进行另一个测试，计数器将再次从 0001A 开始。我想要的是用户提交的下一个测试是 0001C。不知道该怎么做...

我想通过以下方式将变量传递给 test.html 页面：test.html&id=C 但这意味着调用 test.html 的 main.html 需要知道用户已经完成了两个测试，而我没有确定您可以将值从 HTML 页面传回给调用它的 HTML 页面吗？

无论如何，我想知道解决这个问题的最佳方法是什么？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T06:43:55.697

我认为解决此问题的最佳方法是通过 JavaScript 在浏览器中设置 Cookie：

```
document.cookie = 'mycookie=testcookie; expires=Sun, 8 Jul 2012 20:47:11 UTC; path=/'; 
```

您可以轻松混淆或加密此 cookie 以防止更改。这是使用 JavaScript 创建 cookie 的一个[很好的指南](http://www.quirksmode.org/js/cookies.html)。

# c - libc(glibc) 在我们的 linux 应用程序中的作用是什么？

> ID：11372872
> 
> 赞同：85
> 
> 时间：2012-07-07T06:37:47.850
> 
> 标签：c, linux, gnu

当我们使用 调试程序时，我们通常会看到在( ?)`gdb`中定义的具有奇怪名称的函数。我的问题是：`libc``glibc`

1.  是`libc/glibc`一些标准 C/C++ 函数的标准实现，如`strcpy`, `strlen`, `malloc`?
2.  或者，它不仅是上面描述的第一个用法，而且还是 Unix/Linux 系统调用的包装器，如`open`, `close`, `fctl`? 如果是这样，为什么我们不能直接发出系统调用，没有`libc`？
3.  `libc`仅包含一个 lib (`.a`或`.so`) 文件，还是包含多个 lib 文件（在这种情况下，`libc`是这组 lib 的通用名称）？这些 lib 文件在哪里？
4.  `libc`和 和有什么不一样`glibc`？

* * *

## 回答 #1

> 赞同：98
> 
> 时间：2012-07-07T07:28:22.707

`libc`既实现了标准的 C 函数，也实现了`strcpy()`POSIX 函数（可能是系统调用），如`getpid()`. 请注意，并非所有标准 C 函数都在`libc`- 大多数数学函数都在`libm`.

您不能像调用普通函数一样直接进行系统调用，因为对内核的调用不是普通函数调用，因此链接器无法解析它们。相反，特定于体系结构的汇编语言 thunk 用于调用内核 - 您当然也可以直接在自己的程序中编写它们，但您不需要，因为`libc`它们为您提供。

请注意，在 Linux 中，它是内核和`libc`提供 POSIX API 的组合。 `libc`增加了相当多的价值 - 并非每个 POSIX 函数都一定是系统调用，并且对于那些，内核行为并不总是符合 POSIX。

`libc`是单个库文件（`.so`和`.a`版本都可用），大多数情况下位于`/usr/lib`. 然而，glibc (GNU libc) 项目提供的不仅仅是`libc`- 它还提供了`libm`前面提到的以及其他核心库，如`libpthread`. 这`libc`只是 glibc 提供的库之一 - 除了 glibc 之外，还有其他替代实现`libc`。

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2012-07-07T07:27:20.243

关于前两个，glibc 既是 C 标准库（例如，“标准 C 函数”）又是系统调用的包装器。您不能直接发出系统调用，因为编译器不知道如何——glibc 包含发出系统调用所必需的“胶水”，它是用汇编语言编写的。（可以自己重新实现它，但这比它的价值要麻烦得多。）

（C++ 标准库是一个独立的东西；它被称为`libstdc++`.）

glibc 不是单个`.so`（动态库）文件——有很多文件，但 libc 和 libm 是最常用的两个。所有静态和动态库都存储在`/lib`.

libc 是一个通用术语，用于指代所有 C 标准库——有几个。glibc 是最常用的一种；其他包括 eglibc、uclibc 和 Dietlibc。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-07T06:42:16.973

它是“标准库”。它就像 Windows 世界中的“MSVCRTL”。

Gnu 标准库（“glibc”）是 Linux 系统上最常见（几乎普遍？）的 libc 实现。以下是旧 Suse Linux 系统上的相关文件：

```
ls -l /lib =>
-rwxr-xr-x  1 root root 1383527 2005-06-14 08:36 libc.so.6

ls -l /usr/lib =>
-rw-r--r--  1 root root 2580354 2005-06-14 08:20 libc.a
-rw-r--r--  1 root root     204 2005-06-14 08:20 libc.so 
```

此链接应回答您可能遇到的任何其他问题（包括对完整和完整 GLibc 源代码的引用）：

*   [http://sourceware.org/glibc/wiki/HomePage](http://sourceware.org/glibc/wiki/HomePage)

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2018-02-19T13:21:27.257

您可以通过在 shell 上键入“man libc”，从 linux 系统的手册页中查看有关“libc”和“glibc”的详细信息，复制如下；

```
LIBC(7)      Linux Programmer's Manual      LIBC(7)   

NAME
       libc - overview of standard C libraries on Linux

DESCRIPTION
       The term "libc" is commonly used as a shorthand for the "standard C library", a library of standard functions that can be
       used by all C programs (and sometimes by programs in other languages).  Because of some history (see below), use  of  the
       term "libc" to refer to the standard C library is somewhat ambiguous on Linux.

   glibc
       By  far  the most widely used C library on Linux is the GNU C Library ⟨http://www.gnu.org/software/libc/⟩, often referred
       to as glibc.  This is the C library that is nowadays used in all major Linux distributions.  It is  also  the  C  library
       whose details are documented in the relevant pages of the man-pages project (primarily in Section 3 of the manual).  Doc‐
       umentation of glibc is also available in the glibc manual, available via the command info libc.  Release 1.0 of glibc was
       made in September 1992\.  (There were earlier 0.x releases.)  The next major release of glibc was 2.0, at the beginning of
       1997.

       The pathname /lib/libc.so.6 (or something similar) is normally a symbolic link that points to the location of  the  glibc
       library,  and executing this pathname will cause glibc to display various information about the version installed on your
       system.

   Linux libc
       In the early to mid 1990s, there was for a while Linux libc, a fork of glibc 1.x created by  Linux  developers  who  felt
       that  glibc  development  at  the  time  was  not  sufficing for the needs of Linux.  Often, this library was referred to
       (ambiguously) as just "libc".  Linux libc released major versions 2, 3, 4, and 5 (as well as many minor versions of those
       releases).  For a while, Linux libc was the standard C library in many Linux distributions.

       However, notwithstanding the original motivations of the Linux libc effort, by the time glibc 2.0 was released (in 1997),
       it was clearly superior to Linux libc, and all major Linux distributions that had been using  Linux  libc  soon  switched
       back to glibc.  Since this switch occurred long ago, man-pages no longer takes care to document Linux libc details.  Nev‐
       ertheless, the history is visible in vestiges of information about Linux libc that remain in some manual pages,  in  par‐
       ticular, references to libc4 and libc5. 
```

# ios - 以编程方式回调按钮时发送到实例的无法识别的选择器

> ID：11372874
> 
> 赞同：0
> 
> 时间：2012-07-07T06:38:34.087
> 
> 标签：ios, ios5, uiviewcontroller, uinavigationcontroller, segue

单击表中的记录时，我正在查看详细信息视图。当我使用从详细视图调用后退按钮时

```
- (IBAction)loadDispensary 
{
    [self.navigationController popViewControllerAnimated:YES];
} 
```

我收到无法识别的选择器错误。

我尝试通过以下两种方式推送详细控制器。

```
Push type 1
detailViewController *detailView = [[self storyboard] instantiateViewControllerWithIdentifier:@"detailView"];
detailView.strain = self.selectedStrain;
[self.navigationController pushViewController:detailView animated:YES];

Push type 2
[self performSegueWithIdentifier: @"detailSegue" sender: self];
//Set the strain on the prepareForSegue 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T18:48:04.963

有人让我粘贴完整的错误代码，当我这样做时，我看到按钮指向的方法不再存在，所以它试图调用一个不存在的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T18:52:29.950

按钮是如何连接的？你可以显示代码吗？也许您可能没有将按钮正确链接到 IBAction。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-07T13:22:34.920

我认为您可能正在尝试弹出一个已经弹出的视图控制器。如果你有一个 UINavigationController 并且你通过 segue “推送”一个视图控制器，那么显示在屏幕左上角的后退按钮已经配置好了。您不必自己放一个。如果您以编程方式将按钮放置在左侧栏按钮位置，它将代替 UINavigation 的按钮显示。

尝试删除按钮并允许 UINavigationController 管理返回，看看是否效果更好。

# asp.net - 在 asp.net 中输入“www.mysite.com/myname”时加载特定页面

> ID：11372876
> 
> 赞同：-2
> 
> 时间：2012-07-07T06:40:17.267
> 
> 标签：asp.net, url-rewriting

我的要求 - 当站点访问者输入像“www.mysite.com/myname”这样的网址并按回车时，我需要加载一个lookup.aspx 页面。

我怎样才能做到这一点？

希望得到回应。

提前致谢。

我试过跟随。web.config 中的代码，但它进入无限循环。

逻辑 - 在 lookup.aspx 的 page_load 上，我正在检查 DB 中的“myname”，如果存在，则将页面重定向到“Home.aspx”，但如果 DB 中不存在“myname”，则重定向到 nomemberfound.aspx 页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T06:46:07.360

看看[这里](http://weblogs.asp.net/scottgu/archive/2009/10/13/url-routing-with-asp-net-4-web-forms-vs-2010-and-net-4-0-series.aspx)和[这里](http://msdn.microsoft.com/en-us/library/ms972974.aspx) 在 asp.net 中的路由/URL 重写

下面是一个没有参数的例子：

```
 void RegisterRoutes(RouteCollection routes)
    {
       routes.MapRoute(
       "My Route", //Route name
       "myname", //URL without parameters
       "~lookup.aspx" //The asp.net page
    );
    }
    void Application_Start()
    {
      RegisterRoutes(RouteTable.Routes);//Register route on startup
    } 
```

如果您接受参数，请使用：

```
"myname/{param}" instead of `"myname"` in the above code. 
```

并从代码隐藏中检索值

```
void Page_Load(object sender, EventArgs e)
{
     string param=Page.RouteData.Values["param"] as string;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T06:46:37.283

在 global.asax

```
void Application_Start(object sender, EventArgs e)
{
    // Code that runs on application startup
    RouteTable.Routes.MapPageRoute("SomeRoute",
    "/{name}",
    "~/lookup.aspx");
} 
```

要在 lookup.aspx 中获取名称：

```
string name = Page.RouteData.Values["name"] as string;
    if (name != null)
    {
        if (name == "somename")
        {
           //Do something
        }
    } 
```

**更新：**

这是一篇不错的[文章](http://msdn.microsoft.com/en-us/magazine/dd347546.aspx)，其中包含有关如何在 .NET Framework 3.5 中执行此操作的示例。希望能帮助到你！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-08T06:12:17.157

您可以让 IIS 使用[URL Rewrite 2.0](http://www.iis.net/download/urlrewrite)来完成。

该页面上有一个视频，提供了概述。这是一个非常简单的任务。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-27T07:56:02.777

我得到了非常简单的解决方案-

您只需要添加以下内容。“”下 web.config 中的代码

```
<rewrite>
        <rules>
            <rule name="RewriteASPX">
                <match url="(.*)" />
                <conditions logicalGrouping="MatchAll">
                    <add input="{REQUEST_FILENAME}" matchType="IsFile" negate="true" />
                    <add input="{REQUEST_FILENAME}" matchType="IsDirectory" negate="true" />
                    <add input="{URL}" pattern="WebResource.axd" negate="true"/>                        
                    <add input="{URL}" pattern="ScriptResource.axd" negate="true"/>                     
                    <add input="{URL}" pattern=".js" negate="true"/>
                </conditions>
                <action type="Rewrite" url="memberlogin.aspx?member={R:0}" />
            </rule>
        </rules>
    </rewrite> 
```

# django - Django-Nonrel：非关系数据库不支持多表继承

> ID：11372877
> 
> 赞同：2
> 
> 时间：2012-07-07T06:40:21.673
> 
> 标签：django, django-models, django-nonrel

我有一个名为`MyModel`.

我还有 2 个名为`Node`和的常规模型类`Author`。`Author`继承自`MyModel`，`Node`但不继承。（`Node`并且`Author`按预期工作。）

我想进行更改`Node`，以便它也继承自`MyModel`. 当我尝试更改`Node`以使其也继承自`MyModel`时，出现以下错误：

```
 raise DatabaseError("Multi-table inheritance is not "
TemplateSyntaxError: Caught DatabaseError while rendering: Multi-table inheritance is not supported by non-relational DBs. 
```

我从数据库中删除了所有`Node`对象，但仍然收到错误消息。实际上，我想删除`Node`并重新实现它。如何让数据库识别`Node`应该继承自`MyModel`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-08T21:14:31.703

django-nonrel 不支持多表继承。

如果*MyModel*继承自*django.db.models.Model*并且*Node*和*Author*继承自*MyModel*，那么你有一个多表继承（即使*MyModel*没有字段）。

*您可以通过使MyModel*成为[抽象基类](https://docs.djangoproject.com/en/dev/topics/db/models/#abstract-base-classes)来避免这种情况。

# mysql - 存储付款详情和订阅详情

> ID：11372879
> 
> 赞同：3
> 
> 时间：2012-07-07T06:40:34.323
> 
> 标签：mysql, payment-gateway, payment-processing, storing-data

我正在尝试为一个项目创建一个基于订阅的支付模块。

有三个计划

1.  将花费 49 美元，但现在在我们获得用户之前它将是免费的。
2.  499 美元，试用期为 15 天
3.  799 美元也将有 15 天的试用期。

我们正在使用 Stripe 进行支付集成。

我有一个用户表如下

用户（姓名，电子邮件，密码，....）

现在我想存储以下

1.  定义和维护计划
2.  用户订阅了哪个计划
3.  当用户订阅计划时 - 有关付款的详细信息 - 升级 - 降级等。

有人可以分享我如何通过 Mysql 表做到这一点，如果我缺少任何需要存储的关键信息吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T07:04:40.957

这是我在这种情况下会做什么的一个小草图：

## 表

*   **用户**

    id, nameemail, 密码, ...

*   **维护计划**

    id, user_id, 名字, ...

*   **付款**

    id, 名称, user_id, ...

*   **运营**

    id，类型，user_id，名称，...

## 笔记

*   user_id字段当然引用了user表的id主键
*   当然，每个表都可以包含更多包含更多信息或关系的列（我只插入了要领。
*   操作类型字段应该包含一个具有可能值的枚举（升级、降级），可以定义到枚举器或引用的另一个表中（甚至更好）......

# php - 使用php替换部分xml

> ID：11372880
> 
> 赞同：0
> 
> 时间：2012-07-07T06:40:34.553
> 
> 标签：php, jquery, xml, ajax

我正在尝试通过 ajax 将一些数据发布到写入一些 xml 的 php 文件中。我基本上想发布一些数据并替换xml的某个部分。

js：

```
$(".aSave").click(function(){
    var name = $(this).attr("data-name");
    var value = $(this).attr("data-value");
    var dataObj = {};
    dataObj[name]=value;

    $.ajax({
        url: 'view/template/common/panel.php',
        type: 'post',
        data: dataObj,
    }).done(function(){
        alert("saved!");
    });
}); 
```

php：

```
<?php
    $fruits [] = array(
        $orangesValue = $_POST['oranges'],
        $applesValue = $_POST['apples'], 
    ); 

    $doc = new DOMDocument(); 
    $doc->formatOutput = true; 

    $mainTag = $doc->createElement( "fruits" ); 
    $doc->appendChild( $mainTag ); 

    $oranges = $doc->createElement("oranges"); 
    $oranges->appendChild($doc->createTextNode($orangesValue)); 
    $mainTag->appendChild($oranges);

    $apples = $doc->createElement("apples"); 
    $apples->appendChild($doc->createTextNode($applesValue)); 
    $mainTag->appendChild($apples);

    echo $doc->saveXML(); 
    $doc->save("fruits.xml")
?> 
```

因此，现在当我发送橙子值时，它会写入一个仅包含橙子值的新 xml 文件。是否可以仅替换我发布的值。

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T08:54:06.877

因此，如果我理解正确，您想读取现有的 XML 文档，替换元素的文本内容`oranges`并再次保存文档？

那么试试这个：

```
$fileName = '/my/absolute/path/to/my/file.xml';
$doc = new DOMDocument();
$doc->load($fileName);
$nodes = $doc->getElementsByTagName('oranges');

if (NULL != $nodes) {
  $nodes->item(0)->nodeValue = $_POST['oranges'];
}

$doc->save($fileName); 
```

但这过于复杂（或者我讨厌 DOM 扩展）。如果您有可用的[simplexml](http://de.php.net/manual/en/book.simplexml.php)扩展，请尝试以下操作：

```
$fileName = 'blabla.xml';
$xml = simplexml_load_file($fileName);
$xml->oranges = $_POST['oranges'];
$xml->asXML($fileName); 
```

当然，在将`$_POST`数据写入 XML 文件之前，您需要检查数据的正确性。如果您想根据您发布的是苹果还是橙子采取行动，请`oranges`用变量替换：

```
foreach ($_POST as $fruit => $val) {
  $xml->{$fruit} = $val;
} 
```

# ios - UITableView: 使用 moveRowAtIndexPath:toIndexPath: 和 reloadRowsAtIndexPaths:withRowAnimation: 一起出现损坏

> ID：11372884
> 
> 赞同：5
> 
> 时间：2012-07-07T06:41:05.800
> 
> 标签：ios, uitableview, ios5, uikit

我想使用 iOS 5 漂亮的行移动调用来为 tableview 设置动画以匹配一些模型状态更改，而不是旧式的删除和插入。

更改可能包括重新排序和就地更新，我想为两者设置动画，所以有些行需要`reloadRowsAtIndexPaths`.

但！`UITableView`如果更新的单元格由于移动而移动位置，则在存在移动的情况下处理行重新加载似乎是完全错误的。以一种等效的方式使用较旧的 delete+insert 调用可以正常工作。

这是一些代码；我为冗长道歉，但它确实可以编译和运行。肉在`doMoves:`方法。下面进行说明。

```
#define THISWORKS

@implementation ScrambledList // extends UITableViewController
{
  NSMutableArray *model;
}

- (void)viewDidLoad
{
  [super viewDidLoad];
  model = [NSMutableArray arrayWithObjects:
           @"zero",
           @"one",
           @"two",
           @"three",
           @"four",
           nil];
  [self.navigationItem setRightBarButtonItem:[[UIBarButtonItem alloc] initWithTitle:
#ifdef THISWORKS
                                              @"\U0001F603"
#else
                                              @"\U0001F4A9"
#endif
                                                                              style:UIBarButtonItemStylePlain
                                                                             target:self
                                                                             action:@selector(doMoves:)]];
}

-(IBAction)doMoves:(id)sender
{
  int fromrow = 4, torow = 0, changedrow = 2; // 2 = its "before" position, just like the docs say.

  // some model changes happen...
  [model replaceObjectAtIndex:changedrow
                   withObject:[[model objectAtIndex:changedrow] stringByAppendingString:@"\u2032"]];  
  id tmp = [model objectAtIndex:fromrow];
  [model removeObjectAtIndex:fromrow];
  [model insertObject:tmp atIndex:torow];

  // then we tell the table view what they were
  [self.tableView beginUpdates];
  [self.tableView reloadRowsAtIndexPaths:[NSArray arrayWithObject:[NSIndexPath indexPathForRow:changedrow inSection:0]]
                        withRowAnimation:UITableViewRowAnimationRight]; // again, index for the "before" state; the tableview should figure out it really wants row 3 when the time comes
#ifdef THISWORKS
  [self.tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:[NSIndexPath indexPathForRow:fromrow inSection:0]]
                        withRowAnimation:UITableViewRowAnimationAutomatic];
  [self.tableView insertRowsAtIndexPaths:[NSArray arrayWithObject:[NSIndexPath indexPathForRow:torow inSection:0]]
                        withRowAnimation:UITableViewRowAnimationAutomatic];
#else // but this doesn't
  [self.tableView moveRowAtIndexPath:[NSIndexPath indexPathForRow:fromrow inSection:0]
                         toIndexPath:[NSIndexPath indexPathForRow:torow inSection:0]];
#endif
  [self.tableView endUpdates];
}

#pragma mark - Table view data source boilerplate, not very interesting

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
  return model.count;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
  UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@""];
  if (cell == nil)
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:@""];
  [cell.textLabel setText:[[model objectAtIndex:indexPath.row] description]];
  [cell.detailTextLabel setText:[NSString stringWithFormat:@"this cell was provided for row %d", indexPath.row]];
  return cell;
} 
```

代码的作用：建立一个微型模型（小型可变数组）；当按下按钮时，它会对列表的中间元素进行微小的更改，并将最后一个元素移动到第一个元素。然后它更新表视图以反映这些更改：重新加载中间行，删除最后一行并插入一个新行零。

这行得通。事实上，添加日志记录`cellForRowAtIndexPath`表明，虽然我要求重新加载第 2 行，但表视图正确地要求第 3 行，因为在实际进行更新时插入。嘘！

现在注释掉顶部的#ifdef 以改用 moveRowAtIndexPath 调用。

现在，tableview*删除*了第 2 行，请求新的第*2*行（错误！），并将其插入到最后的第 2 行位置（也是错误的！）。最终结果是第 1 行向下移动了*两个*插槽而不是一个，并且将其滚动到屏幕外以强制重新加载显示它是如何与模型不同步的。我可以理解是否`moveRowAtIndexPath`以不同的顺序更改了 tableview 的私有模型，需要在重新加载或模型获取中使用“新”而不是“旧”索引路径，但这不是正在发生的事情。请注意，在第二张“之后”图片中，第三行和第四行的顺序相反，无论我重新加载哪个单元格，都不应该发生这种情况。

![状态之前](../Images/07859428f1167c394f4d093c39cf664b.png)

![一键按下后，删除插入样式](../Images/214d13ad263540b3975627c785a495a2.png)

![一键按下后，移动式](../Images/d2cec244b6dc0363f831a2cb949f7202.png)

我诅咒苹果的词汇变得丰富多彩。我应该诅咒自己吗？行移动是否与同一更新块中的行重新加载完全不兼容（以及，我怀疑，插入和删除）？在我提交错误报告之前，任何人都可以启发我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-07T17:40:53.077

我刚刚花了一些时间玩你的代码，我同意；看起来它只是行不通。

这整个领域的文档有点不足，但他们实际上并没有说您可以`moveRowAtIndexPath:toIndexPath:`与重新加载方法混合使用。它*确实*说它可以与行插入和行删除方法混合使用。如果我修改您的代码以执行这些代码，这些似乎可行。因此，您可能要求增强，而不是提交错误。不管怎样，我肯定会把它发送到雷达上。

# java - Java 7 WatchService 释放资源

> ID：11372888
> 
> 赞同：5
> 
> 时间：2012-07-07T06:41:38.580
> 
> 标签：java, watchservice

我正在使用 Java 7 WatchService 来监视目录。我不断更改我正在观看的目录。我遇到了异常：

java.io.IOException：已达到网络 BIOS 命令限制。

在 50 个目录之后。我确定在创建新的 WatchService 之前，我会在创建的每个 WatchService 上调用 close() 。

有谁知道释放 WatchService 的正确方法，这样你就不会遇到这个限制？

谢谢，

戴夫

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-07T07:08:20.097

*我*认为您需要做的就是`close()`服务。我知道你说过你认为你已经这样做了，但我怀疑你错过了一些。例如，您可能无法在出现异常的情况下关闭服务实例。您应该将 WatchService 实例视为其他 IO 资源并在 finally 块中关闭它；例如

```
WatchService ws = ...
try {
    // use it ...
} finally {
    ws.close();
} 
```

或使用 Java 7“尝试资源”语法。

```
try (WatchService ws = ...) {
    // use it ...
} 
```

当`WatchService`它关闭时，它应该立即释放它持有的任何 O/S 级资源。

* * *

唯一的另一种可能性是您在`WatchService`实现中遇到了一些 Java 错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-07T16:58:53.687

如果我正确地阅读了 Javadoc，那么您只需要一个 WatchService，您可以在开始时实例化它，并在应用程序结束时关闭（）。

您通过 .register 提交您想要一次注册一个的路径和事件，并取回一个 WatchKey。您将这些 WatchKeys 保留在周围，可能在由 Path 键入的 ConcurrentMap 中。

当您想删除一个时，只需在 WatchKey 上调用 cancel() 并从 Map 中删除。

[观察服务](http://openjdk.java.net/projects/nio/javadoc/java/nio/file/WatchService.html)

[路径注册](http://openjdk.java.net/projects/nio/javadoc/java/nio/file/Path.html#register%28java.nio.file.WatchService,%20java.nio.file.WatchEvent.Kind%5B%5D,%20java.nio.file.WatchEvent.Modifier...%29)

[监视键](http://openjdk.java.net/projects/nio/javadoc/java/nio/file/WatchKey.html)

# facebook-graph-api - OAuthException (#368) 尝试的操作被视为滥用或以其他方式被禁止

> ID：11372890
> 
> 赞同：10
> 
> 时间：2012-07-07T06:41:57.287
> 
> 标签：facebook-graph-api, feed

我正在尝试在我的墙上或使用 Graph API 的一些朋友的墙上发布提要。我授予了此应用程序所需的所有权限，当我从我的页面发出请求时允许它们，我拥有有效的访问令牌，但即使发生此异常并且没有发布提要。我的帖子请求看起来不错，已授予权限。我需要做什么才能在 Facebook 应用程序上显示我不是虐待者。我做的最后一个想法是在我的应用程序 Auth Dialog 中挖掘以设置我需要的所有权限，并写下我为什么需要这些权限。如果您告诉我发生了什么并指出我需要做什么来解决这个问题，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T06:21:49.613

我相信遇到此消息的原因有两个：

1.  您的帖子包含恶意链接
2.  您正在尝试通过非 https 连接发出 POST 请求。

第二个尚未得到证实，但我已经看到了这种行为。虽然我的 heroku 托管应用程序中的相同代码运行良好，但它在我的 000webhost 托管的 .tk 域上给出了这个 #368 错误，该域不受 SSL 保护

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T15:36:17.963

有同样的问题。我发现 Facebook 拒绝了我的短链接，这让我有点生气……但我明白了，因为短链接可能被用来宣传恶意内容……所以如果你在测试中使用了短链接，用完整的网址替换它们...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-16T20:31:13.297

以防万一有人仍在为此苦苦挣扎，当您放置不在您自己的应用程序域中的 URL 或“操作链接”时会出现问题，如果您确实需要发布到外部页面，则必须发布到您的首先应用程序，然后使用脚本或其他东西从那里重定向。希望有帮助。

在我看来，使用 HTTPS 链接也更好，因为有时我看到 http 链接会被拒绝的行为，但这是断断续续的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-16T05:57:20.803

我最近在运行单元测试时也开始注意到这一点。我运行的一项测试是提交一个我知道 Facebook 已阻止的链接，以验证我是否正确处理了错误。我曾经收到此错误：

**警告：此消息包含被阻止的内容：此消息中的某些内容已被 Facebook 报告为滥用...**

但从 7 月 4 日开始，我开始收到此错误：

**(#368) 尝试的操作被视为滥用或以其他方式被禁止'**

这两个错误都表明 Facebook 不喜欢您发布的内容。

# android - 如何在android中正确设置表格布局的方向

> ID：11372896
> 
> 赞同：-1
> 
> 时间：2012-07-07T06:42:33.150
> 
> 标签：android

以下是我的代码以及 xml 文件，我在 2 个框架布局中有 2 个表格布局。第一个表格布局用于设置表格的标题，而第二个表格用于在第二个表格布局中动态设置行，尽管标题似乎非常合适，但标题下方的行没有正确对齐可能是我在做设置表格布局参数的一些错误。我正在修复中。任何帮助将不胜感激。谢谢你。

```
package com.table;

import android.app.Activity;
import android.graphics.Bitmap;
import android.graphics.Color;
import android.graphics.YuvImage;
import android.os.Bundle;
import android.text.Editable;
import android.text.InputType;
import android.text.TextWatcher;
import android.util.Log;
import android.view.Gravity;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;
import android.widget.RelativeLayout.LayoutParams;
import android.widget.ImageView;
import android.widget.LinearLayout;
import android.widget.TableLayout;
import android.widget.TableRow;
import android.widget.TextView;
import java.util.List;

public class TableActivity extends Activity 
{
    TableLayout table,table_values;
    Button scan,add;
    String value;

    EditText ed1;

    @Override
    public void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        createTableLayout(); 
        addrows();

        scan = (Button)findViewById(R.id.read);
        if(scan != null) 
        {
            scan.setOnClickListener(new OnClickListener() {

                public void onClick(View v) 
                {

                }
            });
        }

        try 
        {
            scan.setOnClickListener(new View.OnClickListener() 
            {

                @Override
                public void onClick(View v) 
                {
                   setContentView(R.layout.code);
                    add=(Button)findViewById(R.id.button2);

                }
            });
        } catch (Exception e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        try {
            add.setOnClickListener(new View.OnClickListener() 
            {

                @Override
                public void onClick(View v) 
                {

                }
            });
        } catch (Exception e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

    }

    public void createTableLayout()
     {
            table = (TableLayout) findViewById(R.id.tableLayout1);
          //  table.setBackgroundResource(R.drawable.sky);
            //TableRow tr_heading = new TableRow(this);
            table_values = (TableLayout) findViewById(R.id.tableLayout2);
            TableRow tr_heading = new TableRow(this);
            tr_heading.setId(10);
            tr_heading.setBackgroundColor(Color.GRAY);
            tr_heading.setLayoutParams(new LayoutParams(LayoutParams.MATCH_PARENT,LayoutParams.FILL_PARENT));

            TextView Serial = new TextView(this);
            Serial.setId(20);
            Serial.setText("Sr No.   ");
            Serial.setTextColor(Color.BLACK);
            tr_heading.addView(Serial); // add the column to the table row

            //TextView label_question = new TextView(this);
            TextView Name = new TextView(this);
            Name.setId(20);
            Name.setText("ID        ");
            Name.setWidth(40);
            Name.setTextColor(Color.BLACK);
            tr_heading.addView(Name); // add the column to the table row

            //TextView label_question = new TextView(this);
            TextView Quantity = new TextView(this);
            Quantity.setId(20);
            Quantity.setText("                             Quantity");
            Quantity.setTextColor(Color.BLACK);
            tr_heading.addView(Quantity); // add the column to the table row

            TextView amt = new TextView(this);
            amt.setId(20);
            amt.setText("            Amt");
            amt.setTextColor(Color.BLACK);
            tr_heading.addView(amt); 

            table.addView(tr_heading, new TableLayout.LayoutParams(
                    LayoutParams.MATCH_PARENT, LayoutParams.FILL_PARENT));

     }   

            //--------------------------Adding Rows to your Table --------------------------------------

        public void addrows()
            {

                            Integer count = 0;
                            for (int count1 = 0; count1<3; count1++)
                             { 

                                TableRow tr = new TableRow(this);
                                if (count % 2 != 0)
                                tr.setId(100 + count);
                                tr.setClickable(true);

                                tr.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT,LayoutParams.WRAP_CONTENT));

                                TextView sr = new TextView(this);
                                sr.setText("1");
                                //sr.setGravity(Gravity.CENTER );
                                sr.setPadding(2, 0, 5, 0);
                                sr.setTextColor(Color.WHITE);
                                sr.setClickable(true);
                                tr.addView(sr);

                                TextView idval = new TextView(this);

                                idval.setText(value);
                                idval.setGravity(Gravity.CENTER );
                                idval.setText("             fdfj");
                                idval.setPadding(2, 0, 5, 0);

                                idval.setTextColor(Color.WHITE);
                                idval.setClickable(true);
                                tr.addView(idval);

                                EditText quantity = new EditText(this);
                                //quantity.setId(200 + count);
                                quantity.setGravity(Gravity.CENTER );
                                quantity.setTextColor(Color.BLACK);
                        //      quantity.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT,LayoutParams.WRAP_CONTENT));
                        //      quantity.setWidth(1);
                                quantity.setText("1");
                                quantity.setInputType(InputType.TYPE_CLASS_NUMBER);
                                int val=Integer.parseInt((quantity.getText().toString()));
                        //      quantity.setHeight(2);
                                quantity.setEnabled(true);
                                quantity.setPadding(2,0,5,0);
                                tr.addView(quantity);

                                TextView amount=new TextView(this);
                                amount.setGravity(Gravity.CENTER);
                                amount.setTextColor(Color.WHITE);
                                amount.setClickable(true);
                                //amount.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT,LayoutParams.WRAP_CONTENT));
                                amount.setEnabled(true);
                                //amount.setText("             1000");
                                amount.setText(String.valueOf((    val*10)));
                        //      amount.setWidth(1);
                        //      amount.setHeight(2);
                                tr.addView(amount);

                                // finally add this to the table row
                                table_values.addView(tr, new TableLayout.LayoutParams(
                                        LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));
                                count++;

                             }
            }

}

     **Xml file is below:
     <?xml version="1.0" encoding="utf-8"?>
<LinearLayout
  xmlns:android="http://schemas.android.com/apk/res/android"
  android:orientation="vertical"
  android:layout_width="match_parent"
  android:layout_height="match_parent">
    <FrameLayout 
        android:id="@+id/frameLayout1" 
        android:layout_height="match_parent" 
        android:layout_width="match_parent">
    <FrameLayout 
        android:id="@+id/frameLayout2"  
        android:layout_height="match_parent" 
        android:layout_marginTop="40dp" 
        android:layout_marginBottom="70dp" 
        android:layout_width="match_parent">
            <TableLayout 
                android:layout_height="wrap_content" 
                android:id="@+id/tableLayout1" 
                android:layout_width="match_parent">
           </TableLayout>
    <FrameLayout
                android:id="@+id/frameLayout4" 
                android:layout_width="match_parent" 
                android:layout_height="match_parent">
         <TableLayout 
         android:layout_height="wrap_content" android:id="@+id/tableLayout2" android:layout_width="match_parent">
    </TableLayout>

        </FrameLayout>

    </FrameLayout>
    <FrameLayout android:id="@+id/frameLayout3" android:layout_height="wrap_content" android:layout_width="match_parent" android:layout_gravity="bottom">

        <Button 
            android:text="Scan" 
            android:id="@+id/button1" 
            android:layout_width="wrap_content" 
            android:layout_height="wrap_content" android:layout_marginLeft="10dp">
        </Button>
        <Button 
            android:id="@+id/button2" android:layout_height="wrap_content" android:layout_width="wrap_content" android:text="Button"  android:layout_gravity="center_horizontal">
        </Button>

    </FrameLayout>
    </FrameLayout>

</LinearLayout>

screen shot:   http://i.stack.imgur.com/0nqsR.png 

![This is ther screen image[1]

  [1]: http://i.stack.imgur.com/0nqsR.png 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T09:32:57.780

您有 2 个 framelayouts ，因此它们相互重叠，因为它们没有得到任何使它们位于另一个下方的东西。

无论如何，我建议使用单个 tableLayout、listView 或 gridLayout。

这是一个表格布局的示例：

[http://wowjava.wordpress.com/2011/04/01/dynamic-tablelayout-in-android/](http://wowjava.wordpress.com/2011/04/01/dynamic-tablelayout-in-android/)

# php - Simple_XML 类：获取 info 节点上的属性和信息

> ID：11372899
> 
> 赞同：0
> 
> 时间：2012-07-07T06:43:16.260
> 
> 标签：php, xml, simplexml

我正在使用 ANN api 提取信息。我使用 simpleXML 类来获取信息。

```
function explodeTest() {
            $result = $this->_restGenerator($this->ann, '6236');
            //print_r($result);
            foreach ($result->anime as $data) {
                print_r($data->info);
            } 
        } 
```

_restGenerator 函数：

```
function _restGenerator($url,$q) {
        $url = $url . strtolower($q);
        if(strlen($q) > 0) {
            $q = file_get_contents($url);
            //$q = simplexml_load_file($url)
            return simplexml_load_string($q);
        }
    } 
```

常数：

```
$this->ann = 'http://cdn.animenewsnetwork.com/encyclopedia/api.xml?anime='; 
```

当我运行该函数时，我得到了这个：

```
SimpleXMLElement Object ( [@attributes] => Array ( [gid] => 3506750509 [type] => Picture [src] => http://cdn.animenewsnetwork.com/thumbnails/fit200x200/encyc/A6236-259.jpg ) ) 
```

但实际的 XML 标记显示为：

```
<anime id="6236" gid="1601610894" type="TV" name="Gintama" precision="TV" generated-on="2012-07-07T04:58:39Z">
   <info gid="3506750509" type="Picture" src="http://cdn.animenewsnetwork.com/thumbnails/fit200x200/encyc/A6236-259.jpg"/>
   <info gid="1229282479" type="Main title" lang="JA">Gintama</info>
   <info gid="556528412" type="Alternative title" lang="RU">Гинтама</info>
   <info gid="1383170257" type="Alternative title" lang="JA">銀魂&lt;/info>
   <info gid="380581077" type="Alternative title" lang="KO">은혼&lt;/info>
   <info gid="3483398015" type="Genres">action</info>
   <info gid="1567209986" type="Genres">adventure</info>
   <info gid="1221683927" type="Genres">comedy</info>
   <info gid="3139902810" type="Genres">drama</info>
   <info gid="2565080252" type="Genres">fantasy</info>
   <info gid="971885680" type="Genres">science fiction</info>
   <info gid="2312087995" type="Objectionable content">TA</info>
   <info gid="1950277303" type="Plot Summary">...</info>
   <info gid="2741727987" type="Running time">25</info>
   <info gid="3466023682" type="Number of episodes">201</info>
   <info gid="2618069239" type="Vintage">2006-04-04 to 2010-03-25</info>
   <info gid="820682777" type="Vintage">2007-12-04 (Italia, MTV Italia)</info>
   <info gid="2490517434" type="Vintage">2009-02-03 (Spain, Canal Extremadura)</info>
   <info gid="1770356394" type="Vintage">2009-08-30 (Malaysia, TV2)</info>
   <info gid="2362558760" type="Vintage">2010-01-18 (Philippines, ABS-CBN - Team Animazing)</info>
   <info gid="803932272" type="Vintage">2011-03-23 (Philippines - Hero, League of Heroes)</info>
   <info gid="2236361640" type="Vintage">2011-04-04</info>
   <info gid="1161326503" type="Opening Theme">#1: "Pray" by Tommy Heavenly6 (eps 1-24)</info>
   <info gid="2241431608" type="Opening Theme">#2: "Tooi Nioi" by YO-KING (eps 25-49)</info>
   <info gid="1855414862" type="Opening Theme">
#3: "Gin-iro no Sora" (銀色の空; "Silver Sky") by redballoon (eps 50-)
</info> ... 
```

当我做 print_r($result) ...信息节点显示为

```
[info] => Array ( 
                    [0] => SimpleXMLElement Object ( 
                            [@attributes] => Array ( 
                                                [gid] => 3506750509 
                                                [type] => Picture 
                                                [src] => http://cdn.animenewsnetwork.com/thumbnails/fit200x200/encyc/A6236-259.jpg ) 
                                                ) 
                    [1] => Gintama 
                    [2] => Ð“Ð¸Ð½Ñ‚Ð°Ð¼Ð° 
                    [3] => éŠ€é­‚ 
                    [4] => ì€í˜¼ 
                    [5] => action 
                    [6] => adventure 
                    [7] => comedy 
                    [8] => drama 
                    [9] => fantasy 
                    [10] => science fiction 
                    [11] => TA 
                    [12] => Twenty years ago .. <synopsis>
                    [13] => 25 
                    [14] => 201 
```

我需要获取节点的类型属性以使数组可区分，或者至少按类型属性过滤信息节点。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T07:04:35.870

使用[attributes 函数](http://php.net/simplexmlelement.attributes)获取属性。

```
foreach ($result->anime as $data) {
    foreach($data->info as $info){
        $a = $info->attributes();
        echo $a['type']. "\n";
    }
} 
```

# sql - SQL查询以选择具有非聚合值和聚合函数表达式的列

> ID：11372901
> 
> 赞同：6
> 
> 时间：2012-07-07T06:43:32.340
> 
> 标签：sql, foxpro, visual-foxpro

使用的表：

> 1) v(日期 d, 姓名 c(25), desc c(50), 借方 n(7), 贷方 n(7))
> 
> 'v' 中的名称指的是 vn 表中的名称
> 
> 2）vn（日期d，名称c（25），类型c（25），obal n（7））
> 
> 'vn' 中的名称是主键，不同的名称按类型分组
> 
> 例如：名称 abc、def、ghi 属于类型“bank”，名称 xyz、pqr 属于类型“ledger”，...

我有这样的查询：

```
SELECT vn.type, SUM(vn.obal + IIF(v.date < sd, v.credit-v.debit, 0)) OpBal, ;
    SUM(IIF(BETWEEN(v.date, sd, ed), v.credit-v.debit, 0)) CurBal ;
    FROM v, vn WHERE v.name = vn.name GROUP BY vn.type ;
    ORDER BY vn.type HAVING OpBal + CurBal != 0 
```

它工作正常，但唯一的问题是，obal 是一个值，在表“vn”中每个名称只输入一次，但是对于表“v”中的每个贷记借方计算的查询，obal 被多次添加并显示在欧宝。当查询修改如下：

```
SELECT vn.type, vn.obal + SUM(IIF(v.date < sd, v.credit-v.debit, 0)) OpBal, ;
    SUM(IIF(BETWEEN(v.date, sd, ed), v.credit-v.debit, 0)) CurBal ;
    FROM v, vn WHERE v.name = vn.name GROUP BY vn.type ;
    ORDER BY vn.type HAVING OpBal + CurBal != 0 
```

它显示一条错误消息，例如“Group by 子句丢失或无效”！

RDBMS 使用 MS Visual Foxpro 9。sd 和 ed 是用于查询的日期类型变量，其中 sd < ed。

请帮助我得到预期的结果。非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T12:27:46.567

几分钟前，我第一次看到了带有 VFP 的 SQL 的 SQL 语法，所以这很可能充满了错误，但作为一种“猜测性的预感”：

```
SELECT vn.type, 
       SUM(vn.obal + (SELECT SUM(IIF(v.date < sd, v.credit-v.debit, 0)) 
                      FROM v 
                      WHERE v.name = vn.name)) OpBal,
       SUM(SELECT SUM(IIF(BETWEEN(v.date, sd, ed), v.credit-v.debit, 0))
           FROM v 
           WHERE v.name = vn.name) CurBal
FROM vn
GROUP BY vn.type
ORDER BY vn.type 
HAVING OpBal + CurBal != 0 
```

基本上，我刚刚将选择从 v 转换为子选择，以避免重复 vn.obal。v 无关紧要，它首先获得个人的总和，然后再将它们加在一起。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T02:10:17.167

只是几件事。VFP 9 有一个设置，即不要求对所有非聚合进行分组，以实现向后兼容性和类似的结果，如 MySQL，并非所有列都必须是聚合。例如从客户记录中查询额外的列，无论您在其 PK 列（姓名、地址、电话等）上加入多少条记录，这些列永远不会改变。

```
SET ENGINEBEHAVIOR 80 
```

VFP 9 的默认值

```
SET ENGINEBEHAVIOR 90 
```

要求所有非分组列都是聚合以遵守。

接下来...看起来您正在处理的表中有非常糟糕的列... VFP 中的 3 个保留字...“日期”、“名称”和“类型”，但是您可以通过将它们限定在带有 alias.column 参考的查询。

以下示例代码将创建您在问题中描述的结构的临时表（游标）。我还插入了一些示例数据并模拟了您的“sd”（开始日期）和“ed”（结束日期）变量

```
CREATE CURSOR vn;
   ( date d, ;
     name c(25), ;
     type c(25), ;
     obal n(7) )

INSERT INTO vn VALUES ( CTOD( "5/20/2012" ), "person 1", "person type 1", 125 )
INSERT INTO vn VALUES ( CTOD( "5/20/2012" ), "person 2", "another type ", 2155 )

CREATE CURSOR v;
   ( date d, ;
     name c(25), ;
     desc c(50), ;
     debit n(7), ;
     credit n(7))

INSERT INTO V VALUES ( CTOD( "6/1/2012" ), "person 1", "description 1", 10, 32 )
INSERT INTO V VALUES ( CTOD( "6/2/2012" ), "person 1", "desc 2", 235, 123 )
INSERT INTO V VALUES ( CTOD( "6/3/2012" ), "person 1", "desc 3", 22, 4 )
INSERT INTO V VALUES ( CTOD( "6/4/2012" ), "person 1", "desc 4", 53, 36 )
INSERT INTO V VALUES ( CTOD( "6/5/2012" ), "person 1", "desc 5", 31, 3 )
INSERT INTO V VALUES ( CTOD( "6/1/2012" ), "person 2", "another 1", 43, 664 )
INSERT INTO V VALUES ( CTOD( "6/4/2012" ), "person 2", "more desc", 78, 332 )
INSERT INTO V VALUES ( CTOD( "6/6/2012" ), "person 2", "anything", 366, 854 )

sd = CTOD( "6/3/2012" )      && start date of transactions
ed = DATE()  && current date as the end date... 
```

现在，查询...您正在尝试按类型获取组，但每个人（姓名）需要首先在每个人的基础上预先聚合。现在，您似乎正在尝试获取开始日期 (sd) 之前交易的总期初余额作为给定时间点的基础，然后查看相关开始/结束日期内的活动。首先执行此操作，但不要处理从“vn”表中添加“obal”列。由于它需要非按列分组的聚合，我将只使用列的“MAX()”。由于它是基于 PK（名称）的，因此您最终会得到任何结果，但会使用汇总的事务总数，但通过...将所有数据预先汇总到一行中

```
select;
      vn.name,;
      vn.type,;
      MAX( vn.obal ) as BalByNameOnly,;
      SUM( IIF( v.date < sd, v.credit-v.debit, 000000.00 )) OpBal, ;
      SUM( IIF( BETWEEN(v.date, sd, ed), v.credit - v.debit, 000000.00 )) CurBal ;
   FROM ;
      v,;
      vn ;
   WHERE ;
      v.name = vn.name;
   GROUP BY ;
      vn.Name,;
      vn.Type;
   INTO ;
      CURSOR C_JustByName READWRITE 
```

有了这个结果（来自我的样本数据）看起来像......

```
Name      Type            BalByNameOnly   OpBal   CurBal
person 1  person type 1       125         -90     -63 
person 2  another type       2155         621     742 
```

您按类型获取的最终聚合，您只需查询上述结果“光标”（C_JustByName）并使用 IT 来按类型、拥有等进行分组......类似

```
SELECT ;
      JBN.type, ;
      JBN.BalByNameOnly - JBN.OpBal as OpBal,;
      JBN.CurBal ;
    FROM ;
       C_JustByName JBN ;
    GROUP BY ;
       vn.type ;
    ORDER BY ;
       vn.type ;
    HAVING ;
       OpBal + CurBal != 0;
    INTO ;
       CURSOR C_Final 
```

现在，我只是简化上述内容，因为我不知道您真正在寻找什么作为“VN”中的日期（看起来像一个客户表），日期不清楚其目的和它的 oBal 列关于事务表。

VFP 的好处是您可以在不创建永久表的情况下查询临时游标，并使用 IT 作为之后任何查询的基础......它有助于提高可读性，而不必在查询中嵌套查询。它还允许您查看每一层的结果，并知道您正在获得您期望的答案，然后再继续下一个查询阶段......

希望这将帮助您朝着您要解决的问题的方向前进。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-09-04T11:20:18.767

再一次，这个问题被推到了前面:(在我发表评论之前：

> 不幸的是，这个 6 年前的问题被撞到了头版 :( 原因是这个问题渴望得到一些解释，而设计中充满了缺陷。不知道这些细节，没有答案是好的。1）从不永远依靠旧的引擎行为来解决此错误。这是一个错误并已更正。依靠错误不是要走的路。2）要创建一个日期值，永远不要通过从字符串转换来做到这一点。这取决于设置。最好使用可靠的 date()、datetime() 函数或严格的 date\datetime 文字。

无论如何，该评论仍然存在，还有更多。

让我们根据我对问题的理解添加更多关于缺陷和回复的信息。

在问题中，OP 说：“

```
SELECT vn.type, SUM(vn.obal + IIF(v.date < sd, v.credit-v.debit, 0)) OpBal, ;
    SUM(IIF(BETWEEN(v.date, sd, ed), v.credit-v.debit, 0)) CurBal ;
    FROM v, vn WHERE v.name = vn.name GROUP BY vn.type ;
    ORDER BY vn.type HAVING OpBal + CurBal != 0 
```

工作正常。”

但是当然，任何使用 SQL 的经验丰富的开发人员都会立即发现它不能正常工作，结果可能只是巧合。让我们弄清楚为什么它不会真正起作用。首先让我们创建一些描述 OP 数据的游标：

```
CREATE CURSOR vn ( date d, name c(25), type c(25), obal n(7) )

INSERT INTO vn (date, name, type, obal) VALUES ( DATE(2012,5,20), "abc", "bank", 100 )
INSERT INTO vn (date, name, type, obal) VALUES ( DATE(2012,5,20), "def", "bank", 200 )
INSERT INTO vn (date, name, type, obal) VALUES ( DATE(2012,5,20), "ghi", "bank", 300 )
INSERT INTO vn (date, name, type, obal) VALUES ( DATE(2012,5,20), "xyz", "ledger", 400 )
INSERT INTO vn (date, name, type, obal) VALUES ( DATE(2012,5,20), "pqr", "ledger", 500 )

CREATE CURSOR v ( date d, name c(25), desc c(50), debit n(7), credit n(7))

INSERT INTO V (date,name,desc,debit,credit) VALUES ( DATE(2012,6,1), "abc", "description 1", 50, 0 )
INSERT INTO V (date,name,desc,debit,credit) VALUES ( DATE(2012,6,2), "abc", "description 1", 60, 0 )
INSERT INTO V (date,name,desc,debit,credit) VALUES ( DATE(2012,6,3), "abc", "description 1", 70, 0 )
INSERT INTO V (date,name,desc,debit,credit) VALUES ( DATE(2012,6,1), "def", "description 1", 50, 0 )
INSERT INTO V (date,name,desc,debit,credit) VALUES ( DATE(2012,6,2), "def", "description 1", 60, 0 )
INSERT INTO V (date,name,desc,debit,credit) VALUES ( DATE(2012,6,3), "def", "description 1", 70, 0 )
INSERT INTO V (date,name,desc,debit,credit) VALUES ( DATE(2012,6,1), "ghi", "description 1", 50, 0 )
INSERT INTO V (date,name,desc,debit,credit) VALUES ( DATE(2012,6,2), "ghi", "description 1", 60, 0 )
INSERT INTO V (date,name,desc,debit,credit) VALUES ( DATE(2012,6,4), "xyz", "description 1", 50, 0 )
INSERT INTO V (date,name,desc,debit,credit) VALUES ( DATE(2012,6,5), "xyz", "description 1", 60, 0 )
INSERT INTO V (date,name,desc,debit,credit) VALUES ( DATE(2012,6,6), "pqr", "description 1", 50, 0 )
INSERT INTO V (date,name,desc,debit,credit) VALUES ( DATE(2012,6,7), "pqr", "description 1", 60, 0 )
INSERT INTO V (date,name,desc,debit,credit) VALUES ( DATE(2012,6,8), "pqr", "description 1", 70, 0 ) 
```

让我们对这些数据运行 OP 的查询：

LOCAL sd,ed sd = date(2012,6,1) && 交易开始日期 ed = DATE() && 当前日期作为结束日期...

```
SELECT vn.type, SUM(vn.obal + IIF(v.date < sd, v.credit-v.debit, 0)) OpBal, ;
    SUM(IIF(BETWEEN(v.date, sd, ed), v.credit-v.debit, 0)) CurBal ;
    FROM v, vn WHERE v.name = vn.name GROUP BY vn.type ;
    ORDER BY vn.type HAVING OpBal + CurBal != 0 
```

我们得到如下结果：

```
TYPE    OPBAL   CURBAL
------- -----   ------
bank     1500     -470
ledger   2300     -290 
```

这显然是不正确的。通过这样的查询，您获得的贷方或借方越多，您的期初余额就越多。让我们看看为什么会发生这种情况，删除分组依据和聚合，检查我们真正总结的内容：

```
SELECT vn.type, vn.name, v.date, vn.obal, v.credit, v.debit ;
    FROM v, vn ;
    WHERE v.name = vn.name 
```

输出：

```
 TYPE     NAME DATE         OBAL CREDIT DEBIT
  bank     abc  06/01/2012    100      0    50
  bank     abc  06/02/2012    100      0    60
  bank     abc  06/03/2012    100      0    70
  bank     def  06/01/2012    200      0    50
  bank     def  06/02/2012    200      0    60
  bank     def  06/03/2012    200      0    70
  bank     ghi  06/01/2012    300      0    50
  bank     ghi  06/02/2012    300      0    60
  ledger   xyz  06/04/2012    400      0    50
  ledger   xyz  06/05/2012    400      0    60
  ledger   pqr  06/06/2012    500      0    50
  ledger   pqr  06/07/2012    500      0    60
  ledger   pqr  06/08/2012    500      0    70 
```

您可以看到，假设 'abc' OBal 100 重复了 3 次，因为 v 中有 3 个条目。当它只有 100 时，求和会使它变成 300。

当您使用像 SUM() 或 AVG() 这样的聚合时，您应该先在没有连接的情况下进行聚合，然后再进行连接。您仍然可以使用连接进行聚合，提供，连接会产生一对多的关系。如果上述结果集是：

```
 TYPE   NAME OBAL CREDIT DEBIT
  bank    abc  100      0   180
  bank    def  200      0   180
  bank    ghi  300      0   110
  ledger  xyz  400      0   110
  ledger  pqr  500      0   180 
```

可以 SUM() BY 类型（一对多的一侧）。

话虽如此，添加 VFP 支持子查询让我们编写一个解决方案：

```
Local sd,ed
sd = Date(2012,6,1)  && start date of transactions
ed = Date()          && current date as the end date...

Select vn.Type, Sum(vn.OBal - tmp.TotCd) As Opbal, Sum(tmp.Curbal) As Curbal ;
    FROM vn ;
    LEFT Join ;
       (Select v.Name, Sum(Iif(v.Date < sd, v.credit-v.debit, 0)) TotCd, ;
               SUM(Iif(Between(v.Date, sd, ed), v.credit-v.debit, 0)) Curbal ;
        FROM v ;
        GROUP By v.Name ) tmp On tmp.Name = vn.Name ;
    GROUP By vn.Type ;
    ORDER By vn.Type ;
    HAVING Sum(vn.OBal - tmp.TotCd + tmp.Curbal) != 0 
```

我们得到了我们想要的：

```
TYPE    OPBAL   CURBAL
------- -----   ------
bank      600     -470
ledger    900     -290 
```

# database - magento 从 1.6.2 升级到 1.7.0.2 - 数据库基础会改变吗？

> ID：11372903
> 
> 赞同：1
> 
> 时间：2012-07-07T06:43:52.483
> 
> 标签：database, magento

我正在考虑将我的 magento 社区从 1.6.2 升级到 1.7.0.2。

首先，我将在我的测试服务器上执行此操作，但是在 magento connect 更新过程中出现了一些错误，所以我必须自己上传一些文件......

但是当我要将这些数据放到实时环境中时，我可以简单地将我的数据从 ftp 复制到实时网站吗？

或者数据库中是否还有一些新的/更改的设置？

如果最后一个问题是肯定的，哪些行会改变？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T11:05:36.597

我能够使用 Connect Manager 成功地将 Magento 从 1.6.1 升级到 1.7。这是我制定并遵循的步骤

1.  转到您的域。com/magento/downloader/ （当然，请使其与您的安装路径匹配。
    1.  因为我使用带有我想使用的皮肤的 tar.gz 包安装了 Magento，所以 Magento Connect 没有列出所有要升级的扩展。我必须在“安装新扩展/粘贴扩展密钥安装”中输入“connect20.magentocommerce.com/community/Mage_All_Latest”
    2.  如果你遇到类似“CONNECT ERROR: Package 'Mage_All_Latest' is invalid”的错误，重复多次，每个包一次，这是因为文件已经存在，你必须删除一行代码才能它覆盖数据。
    3.  一切都更新后，您可能会遇到一些错误。确保清理缓存和会话目录（删除 /var/cache 和 /var/session 中的所有内容）
    4.  如果您收到“500 内部服务器错误”，很可能是因为文件和文件夹权限。将所有权限重置为所需的权限需要 0.5 秒。
    5.  如果您在 Magento 格式的标头上收到“服务暂时不可用服务器暂时无法为您的请求提供服务”错误，可能是因为商店设置为离线模式以防止访问者搞砸安装过程。要解决此问题，请删除在您的 magento 安装目录的根目录中找到的“maintenance.flag”文件。
    6.  一切都应该准备好了！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-07T08:59:05.110

避免通过 ftp 上传核心库更改。

最快和更安全的方法是使用[diff 文件修补您的应用程序](http://www.magentocommerce.com/download/diff)

补丁 -p0 -f < 1.6.2.0-1.7.0.0.diff

然后，当您第一次访问您的站点时，Magento 会自动升级您的数据库

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-08T12:25:39.997

最好的更新方法是获取一个新的 mage zip 1.7.1 或其他版本，并将其连接到您当前的数据库。当您进入索引时 - 新安装会将您的数据库更新到最新的 MAge 数据库。这样您就不必使用连接等。法师 zip 有自己的 sql 更新。

确保将当前主题放入新安装等中，并在 localhost 等上进行第一次测试。

# html - 是否有任何同时支持 Web 和桌面应用程序的 GUI 框架？

> ID：11372905
> 
> 赞同：0
> 
> 时间：2012-07-07T06:44:16.223
> 
> 标签：html, user-interface

是否有任何 GUI 框架可以呈现我创建为 Web 应用程序和桌面应用程序的 UI，例如使用 Qt 或 GTK 创建的？我不想要的是一个只在窗口中显示 HTML UI 的“本机”应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T07:04:59.547

如果您不介意 .NET 编码，请查看 Silverlight。可以使用相同的代码库进行桌面和 Web。[在此处查看示例](http://www.silverlight.net/learn/overview/out-of-browser-applications/out-of-browser-applications-%28silverlight-quickstart%29)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T06:51:36.330

[您可以使用Quickly](https://wiki.ubuntu.com/Quickly)轻松为基于 Linux 的操作系统创建本机应用程序。

此外，如果您决定只创建一个显示 HTML 的本机应用程序，请注意[Prism](http://www.ghacks.net/2009/09/26/install-prism-on-linux-for-easy-to-use-web-apps/)将是一个很好的使用平台。

仅仅拥有一个显示 HTML 的本机应用程序外壳可能会为您节省大量时间，因为不会有额外的编码。

我不知道有任何程序可以将 HTML 直接转换为本机 UI。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-07T11:48:36.337

正在努力使用 QML 为 Qt 实现这一点：

[QML2Web](http://gitorious.org/porting-qt-qml-to-web#more)

# iphone - 如何从此调试器警告中删除

> ID：11372919
> 
> 赞同：0
> 
> 时间：2012-07-07T06:47:43.663
> 
> 标签：iphone, objective-c, ios, xcode, debugging

> **可能重复：**
> [使用 UIImagePickerController 获得“使用两阶段旋转动画”警告](https://stackoverflow.com/questions/2878947/getting-using-two-stage-rotation-animation-warning-with-uiimagepickercontrolle)

在我的 iphone 应用程序中，登录后我有一个登录屏幕，我正在导航到一个班级（我有标签栏控制器，这里有 5 个标签）

像这样我以编程方式创建标签栏

```
 tabBarController = [[UITabBarController alloc] init];

    NSMutableArray *arrControllers = [[NSMutableArray alloc] initWithCapacity:5];

    //Add PunchClock to tab View Controller
    PunchClock* objPunchClock = [[PunchClock alloc] initWithTabBar];
    NavigationController = [[UINavigationController alloc] initWithRootViewController:objPunchClock];
    NavigationController.navigationBar.tintColor = [UIColor brownColor];
    [arrControllers addObject:NavigationController];
    [NavigationController release];
    [objPunchClock release];
 tabBarController .viewControllers = arrControllers;

    [arrControllers release];
    [self.view addSubview:[tabBarController view]]; 
```

在导航到此类时登录后，我收到此调试器警告

```
2012-07-07 12:09:27.988 WorkForce[1475:207] Using two-stage rotation animation. To use the smoother single-stage animation, this application must remove two-stage method implementations.
2012-07-07 12:09:28.074 WorkForce[1475:207] Using two-stage rotation animation is not supported when rotating more than one view controller or view controllers not the window delegate 
```

这是什么意思，，，如何删除此警告？请帮帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T06:53:33.787

我不知道该错误消息是什么意思，但是当您收到这样一个特定的错误消息时，[将整个错误消息用引号括起来](http://www.google.com/search?q=%22To%20use%20the%20smoother%20single-stage%20animation%22)进行搜索以查看其他人是否遇到过它通常会有所帮助。

显然他们有。请报告并告诉我们这意味着什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T06:57:59.787

两半动画方法类似于`willAnimateFirstHalfOfRotationToInterfaceOrientation:duration:`并且`willAnimateSecondHalfOfRotationToInterfaceOrientation:duration:`是一种较旧的方法。如果您已经实现了这些方法，则应将其删除，以便可以使用一步式方案（在本例中为`willAnimateRotationToInterfaceOrientation:duration:`）。

# selenium - Selenium IDE：在新选项卡中打开并将焦点转移到新选项卡不起作用

> ID：11372921
> 
> 赞同：8
> 
> 时间：2012-07-07T06:48:03.537
> 
> 标签：selenium, selenium-ide

我在 selenium ide 中停留了一点

场景是这样的

```
Login-----

go to dashboard page---------

mouse over any menu on the top navigational bar----

on mouseover sub menu will appear as drop down--

now click any link from the drop down --

after clicking link will open in new tab 
```

现在从那时起，我们必须将注意力转移到那个新选项卡上，因为其余的测试将在那个新选项卡上完成。

我写的代码如下

```
 <tr>
    <td>open</td>
    <td>/magma/dev/</td>
    <td></td>
</tr>
<tr>
    <td>type</td>
    <td>name=user_id</td>
    <td>abcd</td>
</tr>
<tr>
    <td>type</td>
    <td>name=pass</td>
    <td>1234</td>
</tr>
<tr>
    <td>clickAndWait</td>
    <td>id=btnLogin</td>
    <td></td>
</tr>
<tr>
    <td>verifyTextPresent</td>
    <td>Costing List</td>
    <td></td>
</tr>
<tr>
    <td>verifyTextPresent</td>
    <td>Fuel</td>
    <td></td>
</tr>
<tr>
    <td>mouseOver</td>
    <td>//div[@id='smoothmenu1']/ul/li[3]</td>
    <td></td>
</tr>
<tr>
    <td>click</td>
    <td>link=Fuel Cost</td>
    <td></td>
</tr>
<tr>
    <td>selectWindow</td>
    <td>http://10.0.1.101/magma/dev/fuelcost/</td>
    <td></td>
</tr>
<tr>
    <td>verifyTextPresent</td>
    <td>Manage Fuel Cost</td>
    <td></td>
</tr>
<tr>
    <td>clickAndWait</td>
    <td>link=Logout</td>
    <td></td>
</tr> 
```

此代码正常工作，直到从下拉菜单中单击子菜单，之后它不起作用并且日志中显示错误

因此，当我尝试运行该测试用例时，它会显示错误

**[警告] 链接有目标“_blank”，Selenium 不支持！随机化目标为：selenium_blank84419**

谁能帮我正确编写代码

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-03T09:07:20.223

以下代码适用于我：

```
<tr>
    <td>storeEval</td>
    <td>selenium.getAllWindowNames()[1]</td>
    <td>windowName</td>
</tr>
<tr>
    <td>getEval</td>
    <td>this.doEcho("array length: "+selenium.getAllWindowNames().length);this.doEcho("Available window names: "+selenium.getAllWindowNames());this.doEcho("Selecting window: "+storedVars['windowName']);</td>
    <td></td>
</tr>
<tr>
    <td>selectWindow</td>
    <td>${windowName}</td>
    <td></td>
</tr> 
```

I hope it will help others who face a similar type of problem

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-10T09:53:59.460

use `selectPopUp`, but not `storeEval` and `selectWindow`, both of them are too complicated.

selectPopUp:

*   Arguments: windowID - an identifier for the popup window, which can take on a number of different meanings

*   Simplifies the process of selecting a popup window (and does not offer functionality beyond what selectWindow() already provides).

    *   If windowID is either not specified, or specified as "null", the first non-top window is selected. The top window is the one that would be selected by selectWindow() without providing a windowID . This should not be used when more than one popup window is in play.
    *   Otherwise, the window will be looked up considering windowID as the following in order: 1) the "name" of the window, as specified to window.open(); 2) a javascript variable which is a reference to a window; and 3) the title of the window. This is the same ordered lookup performed by selectWindow .

The code below ( selenium script, I copied from the selenium IDE ) indicates the action of:

1.click a 'edit' link

2.wait for 2 seconds ( waiting for the new window opened)

3.focus on the new window

```
<tr>
    <td>click</td>
    <td>link=edit</td>
    <td></td>
</tr>
<tr>
    <td>pause</td>
    <td>2000</td>
    <td></td>
</tr>
<tr>
    <td>selectPopUp</td>
    <td></td>
    <td></td>
</tr> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-07T07:20:03.317

```
<tr>
    <td>selectWindow</td>
    <td>http://10.0.1.101/magma/dev/fuelcost/</td>
    <td></td>
</tr> 
```

替换`<td>http://10.0.1.101/magma/dev/fuelcost/</td>`为`window ID`or`window title`或`window name`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-08-08T13:27:55.333

Try with option selectWindow() Just provide the window title name withing (). For Ex: Window Title is Testing, then command : selectWindow title : Testing

To know the title of the newly opened window follow the steps: Go to the new window Right click->view page source Press ctrl+F. Type title and serch. You will get the title of the new window

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-04-01T16:24:30.110

I hope this helps someone out there! It worked well for me. You do still get the warning in the log, but the test works.

![Selenium IDE workaround for _blank error](../Images/c97f7db176b5a9365cee3009abe9e7cd.png)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-01-24T09:47:01.080

Please add waitForPopUp and selectPopUp event after clicking the new tab event. It's worked for me.

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-03-20T10:53:51.650

I am using the following and it works for me, hope it helps! :)

```
storeEval | this.browserbot.findElement('link=link name').href |    myUrl | 
open | ${myUrl} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-05-11T14:39:34.643

I use `storeAttribute` incombination with `open`.

Link: [http://www.seleniumwiki.com/software-testing/how-to-solve-the-link-has-target-_blank-which-is-not-supported-in-selenium/](http://www.seleniumwiki.com/software-testing/how-to-solve-the-link-has-target-_blank-which-is-not-supported-in-selenium/)

I use it like this:

[![enter image description here](../Images/6d346925f3425da7b926d2bc96332f85.png)](https://i.stack.imgur.com/ysgiC.jpg)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-05-16T21:57:11.660

As an alternative, it's possible to remove the target attribute from the link before clicking it. Here's the code to remove all target attributes from all links on the current page:

```
<tr>
    <td>runScript</td>
    <td>Array.from(document.links).forEach(function(link){link.removeAttribute('target')})</td>
    <td></td>
</tr> 
```

# hibernate - OO设计和休眠

> ID：11372926
> 
> 赞同：0
> 
> 时间：2012-07-07T06:49:31.227
> 
> 标签：hibernate, ooad

我试图对工作门户用例进行建模，如下面的类图所示。我已将 Skill 实体设置为可供工作以及希望重用的求职者共享。

我已经修改了我的 oo 设计，因为我分享了我认为这意味着它的 M:N 关系而不是 1:N 的技能。

*   [http://imagebin.org/219822](http://imagebin.org/219822)（修改了 M:N 与 Skill 的关系）
*   [http://imagebin.org/219680](http://imagebin.org/219680)（旧与技能 1:N 关系）

问题：

如何使用 hibernate 做以下事情？我需要求助于 SQL 吗？

1.  由于 Skill 具有 M:N 关系，因此需要关联表 JobSkill 和 SeekerSkill。如何创建工作或求职者实例，以便他们使用数据库中的现有技能？
2.  我需要进行技能匹配，以便工作技能要求是候选人技能的子集：
    a）雇主 e1：找到所有候选人 - 1{job + 1{candidate}N }N
    b）候选人 c1：找到所有工作 - 1{job + 雇主 }N

我正在考虑为这种情况添加一个业务服务类作为 JobPortal，其中一些方法如下伪代码。如果可以回答**findJobsForSeeker**方法所需的 HQL 查询：

```
public class JobPortal {

  public int createEmployer(String name, Address address) {
    Employer e = null;
    HBUtil.create(e = new Employer(name, address));
    return e.getId();
  }

  public void addJobToEmployer(int empid, String jobName, String[][] skills) {
    Employee e = HBUtil.get(empid, Employee.class);
    Job j = new Job(jobName);
    Skill s = null;
    for(int i=0; i<skills.length; i++) {
      s = HBUtil.find(skills[i][0], skills[i][1], Skill.class);
      if (null == s) {
        s = new Skill(skills[0], Interger.parseInt(skills[1])); //name, experience
      }
      j.add(s);

    }
    e.add(j);
    HBUtil.save(e);
  }

  public int createSeeker(String name) {
    Seeker s = null;
    DBUtil.create(s = new Seeker(name));
    return s.getId();
  }

  public void addSkillsToSeeker(int sid, String[][] skills) {
    Seeker seeker = HBUtil.get(sid, Seeker.class);
    for(int i=0; i<skills.length; i++) {
      s = HBUtil.find(skills[i][0], skills[i][1], Skill.class);
      if (null == s) {
        s = new Skill(skills[0], Interger.parseInt(skills[1])); //name, experience
      }
      seeker.add(s);
    }
    HBUtil.save(seeker);
  }

  public void findJobsForSeeker(int sid) {
   //what HQL do use ? 
  }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T12:08:45.730

回答您的第一个问题：您搜索要附加到新工作或求职者的技能（使用 HQL 查询）。找到技能后，将它们添加到新工作或求职者的技能集合中：

```
List<Skill> skills = session.createQuery("select skill from Skill skill where ...")
                            .list();
for (Skill skill : skills) {
    newJob.addSkill(skill);
} 
```

我不明白您的第二个问题中使用的语法。如果您想找到所有具有给定技能中所有技能的求职者：

```
select seeker from Seeker seeker where not exists (
    select skill.id from Skill skill where skill in (:skillSet)
    and skill.id not in (select skill2.id from Seeker seeker2
                         inner join seeker2.skills skill2
                         where seeker2 = seeker)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-07T14:11:40.663

不完全清楚你在问什么，但我会尝试添加更多

1）如果您的问题是如何在休眠中映射实体，您可以使用 ManyToMany 和 JoinTable 注释查找

（http://www.dzone.com/tutorials/java/hibernate/hibernate-example/hibernate-mapping-many-to-many-using-annotations-1.html）。

如果您创建了一个实际的 SeekerSkill 实体（例如，一个 Seeker 有许多 SeekerSkills，而一个 Skill 有许多 SeekerSkills），您也可以使用 2 OneToMany 建模 ManyToMany 关系。

如果您的问题是如何使用数据库中的现有技能填充工作/求职者 - 那么我只需编写一个一次性 SQL 脚本来使用适当的技能（jobSkills 和 seekerSkills）填充我的关联表。

2）检查子集的一种方法，假设工作/求职者没有多次列出相同的技能，那就是加入技能，按工作/求职者分组，并确保你得到适当的计数。

例如
Seeker - jeff 有技能：java、web 开发、设计
Job - jobA 需要技能：java、设计

杰夫正在寻找与他的技能相匹配的工作

这是 SQL，因此您必须将其转换为 HQL

```
select job_id from job_skill
  inner join seeker_skill on job_skill.skill = seeker_skill.skill
 where seeker_id = :seeker_id // this is a var for jeff's id
 group by job_id
having count(*) > :num_required_skills // in our case, 2 
```

# jquery - 如何导入 .js 文件

> ID：11372928
> 
> 赞同：1
> 
> 时间：2012-07-07T06:50:29.003
> 
> 标签：jquery, jquery-ui, jquery-mobile, cordova

嗨，我正在开发 phonegap 应用程序。如果我在 index.html 文件中使用 console.log ，那么它会打印，但如果我在另一个文件中使用它，它不会打印。如果假设我在 index.html 文件中导入文件，例如：

```
<!DOCTYPE html>

<html>

<head>  

    <link rel="stylesheet" href="jquery.mobile/jquery.mobile-1.1.0.css" />
    <link rel="stylesheet" href="docs/assets/css/jqm-docs.css" />
    <link rel="stylesheet" href="docsdemos-style-override.css" />

    <script type="text/javascript" charset="utf-8" src="cordova-1.6.1.js"></script>             
    <script type="text/javascript" src="jquery.mobile/jquery-1.7.2.min"></script>       
    <script type="text/javascript" src="jquery.mobile/jqm.autoComplete-1.4.js"></script>    
    <script type="text/javascript" src="jquery.mobile/jquery.mobile-1.1.0.js"></script>

    <script type="text/javascript">

        console.log("!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!");
    </script>

</head>

<body>

<div data-role="page" id="home" data-add-back-btn="true">
    <div data-role="content" >

        <a href="UI/Equity/test.html" data-role="button" id="myButton">index</a>            

    </div>
</div>

</body>
</html> 
```

然后用按钮显示页面并打印！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！但是单击按钮时，它会显示 test.html 文件，如下所示：

```
<!DOCTYPE html>

<html>

<head>  

    <link rel="stylesheet" href="jquery.mobile/jquery.mobile-1.1.0.css" />
    <link rel="stylesheet" href="docs/assets/css/jqm-docs.css" />
    <link rel="stylesheet" href="docsdemos-style-override.css" />

    <script type="text/javascript" charset="utf-8" src="cordova-1.6.1.js"></script>             
    <script type="text/javascript" src="jquery.mobile/jquery-1.7.2.min"></script>       
    <script type="text/javascript" src="jquery.mobile/jqm.autoComplete-1.4.js"></script>    
    <script type="text/javascript" src="jquery.mobile/jquery.mobile-1.1.0.js"></script>

    <script type="text/javascript">

        console.log("@@@@@@@@@@@@@@@@@@@@@@@@@@@@");
    </script>

</head>

<body>

<div data-role="page" id="home" data-add-back-btn="true">
    <div data-role="content" >

        <a href="#" data-role="button" id="myButton">Test</a>           

    </div>
</div>

</body>
</html> 
```

但是这里不打印@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-07T07:09:08.797

> 当您拥有跨不同 HTML 文件的 jQuery 移动“页面”时，框架所做的是抓取 data-role="page" 元素的内容并将其插入到当前页面的 DOM 中。
> 
> 任何不在该 data-role="page" 元素中的内容都将被完全忽略。这意味着，实际上只有您点击的第一页（在本例中为 index.html）的头部中的脚本被下载并运行，这就是为什么需要在所有页面的所有头部中引用您的脚本的原因。

[在这里](http://jquerymobile.com/test/docs/api/events.html)查看`PageCreate`活动

或者

另一种选择是强制刷新页面，以便执行第 2 页中的脚本，您可以通过设置来执行此操作：

```
<div data-role="page" id="home" data-add-back-btn="true">
    <div data-role="content" >

        <a href="UI/Equity/test.html" data-ajax="false" data-role="button" id="myButton">index</a>            

    </div>
</div> 
```

添加了 data-ajax="false"

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-07T06:59:07.380

您需要提供导入 javascript 文件的相对路径。您可能需要将其更改为 impo

假设来自 index.html 的 Test.html 的目录路径类似于

```
index.html
UI\Equity\Test.html 

<script type="text/javascript" charset="utf-8" src="../../cordova-1.6.1.js"></script>             
<script type="text/javascript" src="../../jquery.mobile/jquery-1.7.2.min"></script>       
<script type="text/javascript" src="../../jquery.mobile/jqm.autoComplete-1.4.js"></script>    
<script type="text/javascript" src="../../jquery.mobile/jquery.mobile-1.1.0.js"></script> 
```

# ios - 如何删除 UIPageViewControllers 中 UIButtons 上的 goBack 事件？

> ID：11372929
> 
> 赞同：1
> 
> 时间：2012-07-07T06:50:36.167
> 
> 标签：ios, uibutton, uipageviewcontroller

在我一直使用的 XCode 项目（iOS 5.1）中`UIPageViewController`，我注意到当我点击任何按钮时，自动操作是发送`goBack`事件并将页面翻回上一个索引。

我对此感到困惑，因为检查响应者是否与事件或任何其他事件`UIButton`无关。`goBack`

关于如何消除这种行为的任何线索？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T08:40:10.420

好的，经过更多搜索，我意识到真正发生了什么。

显然`UIButton`没有抛出 goBack 事件；由于按钮位于`UIPageViewController`子视图的左侧字段中，因此`UITapGesture`在该区域捕获并启动`goBack`事件。

如果 a`UIButton`在 的右侧，也会发生同样的事情`UIPageViewController`，这将导致一个`goForward`事件。

有关如何解决此问题的详细信息在此问题中：[UIPageViewController Gesture Recognizers](https://stackoverflow.com/questions/7788780/uipageviewcontroller-gesture-recognizers)

# asp.net - 如何为 ASP.net 中的所有页面创建一个通用功能？

> ID：11372930
> 
> 赞同：0
> 
> 时间：2012-07-07T06:50:37.623
> 
> 标签：asp.net, function, menu

我正在制作一个网站，在所有需要经常更改的页面上都有一个菜单。现在我正在复制所有页面中的菜单代码，因此，如果需要更改菜单，我必须打开每个页面并在那里更改菜单。

有什么方法可以在某个文件中定义一个函数，该函数只使用 Response.Write() 编写菜单代码，然后在所有需要菜单的页面上继续调用该函数？这样，每当我需要对菜单进行更改时，我只会在函数定义中进行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-07T06:58:21.843

看看[用户控件](http://msdn.microsoft.com/en-us/library/y6wb1a0e.aspx)或[母版页](http://msdn.microsoft.com/en-us/library/wtxbf3hh.aspx)。更详细，以便我们可以更好地帮助您。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-07T06:53:09.150

听起来您应该考虑对菜单使用[用户控件](http://msdn.microsoft.com/en-us/library/y6wb1a0e.aspx)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-07T07:05:36.993

如果您在母版页中定义一个菜单，它应该反映在所有子页面中。

您需要做的就是创建一个母版页并在其中定义您的菜单。

之后，您应该使用选项 >> WebForm using MasterPage 创建您的子页面

除了母版页中的任何其他功能之外，您可以在子页中调用它们，如下所示：

您可以像这样在 MasterPage 中调用方法：

```
var master = Master as MyMasterPage;
if (master != null)
{
   master.Method();
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-07T07:06:55.713

母版页是完美的候选人。

在母版页中添加菜单。

您也可以为此创建一个用户控件。

但是，如果您想要一个在整个站点中执行常见任务的功能，请创建一个类

并添加功能就是那个类。创建该类的对象并调用该函数

在网站的任何地方。

# java - 防止表单提交中的非美国信件（java）

> ID：11372933
> 
> 赞同：0
> 
> 时间：2012-07-07T06:50:55.377
> 
> 标签：java, jsp, tomcat, servlets

我在 Tomcat 中有一个 java JSP/servlet 应用程序，前面有一个 Apache。

服务器端检查以确保仅接受 [A..Z][a..z] 范围内的字母、数字和标点符号。

但是，例如，当输入一个汉字时，服务器端的值看起来像“ᝈ”。

因此，就服务器端而言，这些是有效的标点符号和数字。

任何可以提供帮助的指针？10 次编码马拉松后让我发疯。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T07:03:44.197

您可以在 Java中使用 Apache Commons [StringEscapeUtils.unescapeHTML() 。](http://commons.apache.org/lang/api-2.6/org/apache/commons/lang/StringEscapeUtils.html#unescapeHtml%28java.lang.String%29)

```
unescapeHtml(String str) 
```

执行以下操作：

> 将包含实体转义的字符串取消转义为包含与转义对应的实际 Unicode 字符的字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T07:06:27.707

您需要使用 UTF-8 等 unicode 编码来处理文本。

首先确保您的服务器正在处理使用 UTF-8 编码的请求。您设置或配置的位置取决于您如何实现 JSP/Servlet，但请参阅：[http://docs.oracle.com/javaee/6/api/javax/servlet/ServletRequest.html#setCharacterEncoding(java. lang.String)](http://docs.oracle.com/javaee/6/api/javax/servlet/ServletRequest.html#setCharacterEncoding%28java.lang.String%29)

# c++ - 用于字符串指针的 malloc：它怎么会是灾难性的？

> ID：11372939
> 
> 赞同：3
> 
> 时间：2012-07-07T06:52:11.507
> 
> 标签：c++, string, malloc

在[这个 Informit C++ 指南](http://www.informit.com/guides/content.aspx?g=cplusplus&seqNum=34)中，我读到了这个：

> `malloc()`用于创建非 POD 对象会导致未定义的行为：
> 
> ```
> //disastrous!
> std::string *pstr =(std::string*)malloc(sizeof(std::string)); 
> ```

我不明白这里有两点：

*   指针是 POD。那为什么这里叫非POD呢？（也许我必须更好地理解 POD。）
*   怎么会这么惨？（我想我必须为此了解字符串内部。）

请解释！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-07T06:53:48.493

> 指针是 POD 那么为什么在这里它被称为非 POD

它不是在谈论指针，而是在谈论`std::string`.

这是灾难性的，因为`malloc`不调用构造函数，因此您将有`pstr`一个`std::string`指向`std::string`未正确构造的 a 的指针。由于缺少构造函数调用，内存已分配但未正确初始化。

正确的方法是

```
std::string *pstr = new std::string; 
```

干净的方法是在自动存储中有一个变量：

```
std::string str; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-07T07:03:14.887

在这里，您*分配的是标准字符串*，而不是*分配指向标准字符串的指针*。请注意，您正在传递`sizeof(std::string)`给 malloc；那就是您要返回的内存量...注意对象的大小大于指针的大小。如果您只是分配一个指针，您会期望传入的大小为`sizeof(std::string*)`.

您收到的指针是您跟踪分配结果的方式，但该指针并不存在于堆上。在这里，它只是存储在一个普通变量中。如果您分配了一个指针，那么您要跟踪它的变量将需要是一个指向指针的指针。

无论如何，如果你愿意，你可以合法地*分配一个指向标准字符串的指针，*如下所示：

```
std::string str;
std::string** ptr_to_pstr = (std::string**)malloc(sizeof(std::string*);
*ptr_to_pstr = &str; 
```

为什么你会想要并不完全清楚。但也不清楚为什么要在 C++ 中使用 malloc。:)

# for-loop - 使用嵌套循环

> ID：11372941
> 
> 赞同：1
> 
> 时间：2012-07-07T06:52:27.823
> 
> 标签：for-loop, xquery

嵌套循环代码：

```
xquery version "1.0";
let $message := (1, 2)
for $s in $message
    let $message1 := count($message)
    for $i in ((1 to $message1))

        return 
            <results>
                <count>{$i}</count>
            </results> 
```

通过使用这个嵌套的 for 循环，我得到这个序列加倍。那么如何使用嵌套循环获得单次结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T16:21:07.113

**只需使用**：

```
 for $i in 1 to count($message)
    return 
        <results>
            <count>{$i}</count>
        </results> 
```

**说明**：

原始代码导致的重复是由于以下原因：

```
for $s in $message 
```

因为`$message`是一个包含两项的序列，所以`for`表达式的主体被执行了两次。这个内部`for`不是必需的，因为在这个表达式`$s`的主体中根本没有引用变量。`for`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T07:37:22.047

我不明白你为什么首先使用循环。如果您只想要消息计数：

```
xquery version "1.0";
let $message := (1, 2)
let $i := count( $message )

return 
    <results>
        <count>{$i}</count>
    </results> 
```

# android - 从 IntentService 类调用 Activity 的问题

> ID：11372943
> 
> 赞同：3
> 
> 时间：2012-07-07T06:52:45.797
> 
> 标签：android

在我的应用程序中，我正在使用`IntentService`该类在后台启动另一个活动。但是我遇到的问题是，假设我从`IntentService`课堂上开始我的活动，这会打开我的活动，之后我不会关闭我的活动。然后我注意到，当`IntentService`班级再次想要开始我的同一个活动时，它不会被调用，因为同一个活动没有关闭。

所以，我的问题是：我怎样才能一次又一次地开始同样的活动，无论它是在`IntentService`课堂上开放还是关闭？

**IntentService 类中的代码**

```
public class AlarmService extends IntentService
{       

    public void onCreate() {
        super.onCreate();
    }

    public AlarmService() {
        super("MyAlarmService");
    }

    @Override
    public int onStartCommand(Intent intent, int flags, int startId) {
        super.onStartCommand(intent, startId, startId);
        return START_STICKY;
    }

    @Override
    protected void onHandleIntent(Intent intent) {          
        startActivity(new Intent(this, 
            AlarmDialogActivity.class).setFlags(Intent.FLAG_ACTIVITY_NEW_TASK));
    }       
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-07T06:56:41.390

在清单文件中使用 launchMode 标记

```
 <activity
        android:name=".ActivityName"

        android:launchMode="singleTask"  /> 
```

如果已经可用，它不会创建不同的活动实例。

请参阅此链接[launchMode](http://developer.android.com/guide/topics/manifest/activity-element.html#lmode)以更好地理解

# php - 在php中计算2次之间的时间段列表？

> ID：11372944
> 
> 赞同：0
> 
> 时间：2012-07-07T06:52:52.500
> 
> 标签：php, date, time, period

我想在两次之间生成 3 个时间段列表列。

```
if
$start_time = '08:00 AM';
$end_time = '10:00: PM';

Time Period List As: 

Morning ----- Noon ----- Eve
8:00 AM       1:00 PM    6:00 PM
8:30 AM       1:30 PM    6:30 PM
9:00 AM       2:.0 PM    7:00 PM
to            to         to
...           ...        ...
12:00 PM      5:00 PM    10:00 PM 
```

我将 $start_time 和 $end_time 之间的时间计算为：

```
$time = time();
$rounded_time = $time % 900 > 450 ? $time += (900 - $time % 900):  $time -= $time % 900;
$start = strtotime('08:00 AM');
$end = strtotime('10:00 PM');
 for( $i = $start; $i <= $end; $i += 1800) 
 {
    echo  "<input name='start_time' type='radio' value='".date('g:i A', $i)."' />"." ".date('g:i A', $i)."<br>";
 } 
```

如上所述，将这些时间分为三列的剩余工作

提前感谢我所有的伙伴。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T07:03:49.693

您可以使用 strtotime 方法从给定时间添加和减去时间段。例如：

```
$time = strtotime('10:00'); 
$halfAnHourBefore = date("H:i", strtotime('-30 minutes', $time)); 
$halfAnHourAfter = date("H:i", strtotime('+30 minutes', $time)); 
```

会给 $halfAnHourBefore 作为 09:30 和 $halfAnHourAfter 作为 10:30

# google-maps - 谷歌地图方向渲染器

> ID：11372953
> 
> 赞同：1
> 
> 时间：2012-07-07T06:53:43.530
> 
> 标签：google-maps, marker

我正在寻找更改谷歌地图的标记图标，同时使用 DirectionsRenderer 创建路径。尝试这样做，我按照以下步骤操作。

*   为起点和终点创建了两个图标。
*   在 rendererOptions 中设置 suppressMarkers: false
*   然后将这两个标记放置到路径的起​​点和终点

所以现在我在两端都有我习惯创建的图标。

但我的要求是这些标记应该是可拖动的。所以我设置了**draggable：true**，现在它工作正常。

但现在我的问题是在拖动图标时，路径应该是动态更改的，应该类似于 [https://google-developers.appspot.com/maps/documentation/javascript/examples/directions-draggable](https://google-developers.appspot.com/maps/documentation/javascript/examples/directions-draggable)

我试图通过向这两个标记添加侦听器来做到这一点：“拖动”事件 - 并在拖动标记的同时绘制路径。但是我得到的结果与“directions-draggable”示例不同。事实上，虽然我可以渲染路径，但之前绘制的路径仍然存在于地图上。但是清除地图上存在的所有路径然后重新绘制所有路径不是我的要求。

那么有没有办法在更改标记图标时获得与“可拖动方向”相同的结果/效果。

提前致谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T13:06:09.113

这个[使用可拖动自定义图标的方向](http://www.geocodezip.com/v3_directions_custom_icons_draggable.html)示例是在引入可拖动方向功能之前开发的。

**代码片段：**

```
// this variable will collect the html which will eventually be placed in the side_bar 
var side_bar_html = "";

var gmarkers = [];
var map = null;
var startLocation = null;
var endLocation = null;
var directionsService = null;
var polyline = new google.maps.Polyline({
  path: [],
  strokeColor: '#FF0000',
  strokeWeight: 3
});

function initialize() {
  var center = new google.maps.LatLng(24.7756, 121.0062);

  map = new google.maps.Map(document.getElementById('map_canvas'), {
    center: center,
    zoom: 13,
    mapTypeId: google.maps.MapTypeId.ROADMAP
  });
  google.maps.event.addListener(map, 'click', function() {
    infowindow.close();
  });
  directionsService = new google.maps.DirectionsService();
  var request = {
    origin: "532 Beacon St., Boston, MA",
    destination: "77 Massachusetts Ave, Cambridge, MA",
    travelMode: google.maps.DirectionsTravelMode.WALKING
  };
  directionsService.route(request, RenderCustomDirections);
}

function RenderCustomDirections(response, status) {
  if (status == google.maps.DirectionsStatus.OK) {
    var bounds = new google.maps.LatLngBounds();
    var route = response.routes[0];
    var summaryPanel = document.getElementById("directions_panel");
    var detailsPanel = document.getElementById("direction_details");
    startLocation = new Object();
    endLocation = new Object();

    summaryPanel.innerHTML = "";
    detailsPanel.innerHTML = '<ul>';

    // For each route, display summary information.
    for (var i = 0; i < route.legs.length; i++) {
      var routeSegment = i + 1;
      summaryPanel.innerHTML += "<b>Route Segment: " + routeSegment + "</b><br />";
      summaryPanel.innerHTML += route.legs[i].start_address + " to ";
      summaryPanel.innerHTML += route.legs[i].end_address + "<br />";
      summaryPanel.innerHTML += route.legs[i].distance.text + "<br /><br />";
    }
    var path = response.routes[0].overview_path;
    var legs = response.routes[0].legs;
    for (i = 0; i < legs.length; i++) {
      if (i == 0) {
        startLocation.latlng = legs[i].start_location;
        startLocation.address = legs[i].start_address;
        startLocation.marker = createMarker(legs[i].start_location, "start", legs[i].start_address, "green");
      }
      endLocation.latlng = legs[i].end_location;
      endLocation.address = legs[i].end_address;
      var steps = legs[i].steps;
      for (j = 0; j < steps.length; j++) {
        var nextSegment = steps[j].path;
        detailsPanel.innerHTML += "<li>" + steps[j].instructions;
        var dist_dur = "";
        if (steps[j].distance && steps[j].distance.text) dist_dur += "&nbsp;" + steps[j].distance.text;
        if (steps[j].duration && steps[j].duration.text) dist_dur += "&nbsp;" + steps[j].duration.text;
        if (dist_dur != "") {
          detailsPanel.innerHTML += "(" + dist_dur + ")<br /></li>";
        } else {
          detailsPanel.innerHTML += "</li>";

        }
        for (k = 0; k < nextSegment.length; k++) {
          polyline.getPath().push(nextSegment[k]);
          bounds.extend(nextSegment[k]);
        }
      }
    }

    detailsPanel.innerHTML += "</ul>"
    polyline.setMap(map);
    map.fitBounds(bounds);
    endLocation.marker = createMarker(endLocation.latlng, "end", endLocation.address, "red");
    // == create the initial sidebar ==
    makeSidebar();
  } else alert(status);
}

var icons = new Array();
icons["red"] = new google.maps.MarkerImage("http://www.geocodezip.com/mapIcons/marker_red.png",
  // This marker is 20 pixels wide by 34 pixels tall.
  new google.maps.Size(20, 34),
  // The origin for this image is 0,0.
  new google.maps.Point(0, 0),
  // The anchor for this image is at 9,34.
  new google.maps.Point(9, 34));

function getMarkerImage(iconColor) {
  if ((typeof(iconColor) == "undefined") || (iconColor == null)) {
    iconColor = "red";
  }
  if (!icons[iconColor]) {
    icons[iconColor] = new google.maps.MarkerImage("http://www.geocodezip.com/mapIcons/marker_" + iconColor + ".png",
      // This marker is 20 pixels wide by 34 pixels tall.
      new google.maps.Size(20, 34),
      // The origin for this image is 0,0.
      new google.maps.Point(0, 0),
      // The anchor for this image is at 6,20.
      new google.maps.Point(9, 34));
  }
  return icons[iconColor];

}
// Marker sizes are expressed as a Size of X,Y
// where the origin of the image (0,0) is located
// in the top left of the image.

// Origins, anchor positions and coordinates of the marker
// increase in the X direction to the right and in
// the Y direction down.

var iconImage = new google.maps.MarkerImage('mapIcons/marker_red.png',
  // This marker is 20 pixels wide by 34 pixels tall.
  new google.maps.Size(20, 34),
  // The origin for this image is 0,0.
  new google.maps.Point(0, 0),
  // The anchor for this image is at 9,34.
  new google.maps.Point(9, 34));
var iconShadow = new google.maps.MarkerImage('http://www.google.com/mapfiles/shadow50.png',
  // The shadow image is larger in the horizontal dimension
  // while the position and offset are the same as for the main image.
  new google.maps.Size(37, 34),
  new google.maps.Point(0, 0),
  new google.maps.Point(9, 34));
// Shapes define the clickable region of the icon.
// The type defines an HTML &lt;area&gt; element 'poly' which
// traces out a polygon as a series of X,Y points. The final
// coordinate closes the poly by connecting to the first
// coordinate.
var iconShape = {
  coord: [9, 0, 6, 1, 4, 2, 2, 4, 0, 8, 0, 12, 1, 14, 2, 16, 5, 19, 7, 23, 8, 26, 9, 30, 9, 34, 11, 34, 11, 30, 12, 26, 13, 24, 14, 21, 16, 18, 18, 16, 20, 12, 20, 8, 18, 4, 16, 2, 15, 1, 13, 0],
  type: 'poly'
};
var infowindow = new google.maps.InfoWindow({
  size: new google.maps.Size(150, 50)
});

function createMarker(latlng, label, html, color) {
  var contentString = '<b>' + label + '</b><br>' + html;
  var marker = new google.maps.Marker({
    position: latlng,
    draggable: true,
    map: map,
    shadow: iconShadow,
    icon: getMarkerImage(color),
    shape: iconShape,
    title: label,
    zIndex: Math.round(latlng.lat() * -100000) << 5
  });
  marker.myname = label;
  gmarkers.push(marker);

  google.maps.event.addListener(marker, 'click', function() {
    infowindow.setContent(contentString);
    infowindow.open(map, marker);
  });
  google.maps.event.addListener(marker, 'dragend', function() {
    var request = {
      origin: startLocation.marker.getPosition(),
      destination: endLocation.marker.getPosition(),
      travelMode: google.maps.DirectionsTravelMode.WALKING
    };
    startLocation.marker.setMap(null);
    endLocation.marker.setMap(null);

    gmarkers = [];
    polyline.setMap(null);
    polyline = new google.maps.Polyline({
      path: [],
      strokeColor: '#FF0000',
      strokeWeight: 3
    });
    directionsService.route(request, RenderCustomDirections);

  });

  return marker;
}

function myclick(i) {
  google.maps.event.trigger(gmarkers[i], "click");
}
// == rebuilds the sidebar to match the markers currently displayed ==
function makeSidebar() {
  var html = "";
  for (var i = 0; i < gmarkers.length; i++) {
    html += '<a href="javascript:myclick(' + i + ')">' + gmarkers[i].myname + '<\/a><br>';
  }
  document.getElementById("side_bar").innerHTML = html;
}
google.maps.event.addDomListener(window, 'load', initialize);
```

```
html,
body {
  height: 100%;
  margin: 0px;
  padding: 0px;
}

#map_canvas {
  height: 100%
}
```

```
<script src="https://maps.googleapis.com/maps/api/js?libraries=geometry,places,drawing&key=AIzaSyCkUOdZ5y7hMm0yrcCQoCvLwzdM6M8s5qk"></script>
<div id="map_canvas" style="float:left;width:70%;height:100%;"></div>
<div id="control_panel" style="float:right;width:30%;text-align:left;padding-top:20px">
  <table border="1">
    <tr>
      <td>
        <div id="directions_panel" style="margin:20px;background-color:#FFEE77;"></div>
      </td>
    </tr>
    <tr>
      <td>
        <div id="direction_details" style="margin:20px;"></div>
      </td>
    </tr>
    <tr>
      <td>
        <div id="side_bar" style="margin:20px;"></div>
      </td>
    </tr>
  </table>
</div>
```

# bash - 通过 ssh 调用交互式 bash 脚本

> ID：11372960
> 
> 赞同：5
> 
> 时间：2012-07-07T06:54:15.670
> 
> 标签：bash, scripting, ssh, scp, ssh-tunnel

我正在编写一个“工具”——几个 bash 脚本——它可以自动在集群中的每台服务器上进行安装和配置。

“工具”从主服务器运行。它解压缩并将其自身（通过 SCP）分发到所有其他服务器，并通过“批量”SSH 解压缩副本。

在设置期间，该工具会从主服务器发出远程命令，例如以下命令：`echo './run_audit.sh' | ssh host4 'bash -s'`. 该方法在许多情况下都有效，除非存在交互行为，因为标准输入已经在使用中。

有没有办法通过 SSH 以交互方式运行远程 bash 脚本？

作为起点，请考虑以下情况：`echo 'read -p "enter name:" name; echo "your name is $name"' | ssh host4 'bash -s'`

在上述提示永远不会发生的情况下，我该如何解决？

提前致谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-07T13:06:13.877

直接运行命令，如下所示：

```
ssh -t host4 bash ./run_audit.sh 
```

对于再演，修改 shell 脚本，使其从命令行或配置文件而不是从标准输入（或优先于标准输入）读取选项。

我同意 Dennis Williamson 的建议，改为研究 puppet/etc。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-07T06:56:15.233

听起来你可能想调查一下[`expect`](http://linux.die.net/man/1/expect)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-07T19:10:36.947

不要通过标准输入将命令通过管道传输到 ssh，而是将 shell 脚本复制到远程机器：

```
scp ./run_audit.sh host4: 
```

进而：

```
ssh host4 run_audit.sh 
```

对于集群部署，我使用的是 Fabric……它运行在 SSH 协议之上，不需要守护进程。就像编写 fabfile.py 一样简单：

```
from fabric.api import run

def host_type():
    run('uname -s') 
```

进而：

```
$ fab -H localhost,linuxbox host_type
[localhost] run: uname -s
[localhost] out: Darwin
[linuxbox] run: uname -s
[linuxbox] out: Linux

Done.
Disconnecting from localhost... done.
Disconnecting from linuxbox... done. 
```

当然它可以做更多...包括交互式命令，并中继 ~/.ssh 目录文件以用于 SSH。更多信息请访问[fabfile.org](http://fabfile.org)。你肯定会忘记 bash 来完成这些任务。;-)

# asp.net-3.5 - asp.net 3.5网站的chrome浏览器问题

> ID：11372962
> 
> 赞同：0
> 
> 时间：2012-07-07T06:54:49.447
> 
> 标签：asp.net-3.5

我在 asp.net 3.5 中开发了一个网站。它可以在所有浏览器中完美运行，但在 chrome 中闪烁。我无法找到原因。我正在做的是，我有 5 种横幅（页眉、页脚、银色、金色和菱形），每一种都在不同的时间刷新。我正在使用更新面板。该网站的 URL 是[http://www.allindiaeducationalhub.com](http://www.allindiaeducationalhub.com)。

如果有人帮助我，我将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T15:01:43.720

这是因为您在那里使用的 CSS 属性而发生的。您需要关注浏览器版本和 CSS 支持。

请通过下面的链接，我想你会得到解决方案。

[http://www.thewebseye.com/css-browser-compatibility.htm](http://www.thewebseye.com/css-browser-compatibility.htm)

**谢谢和问候，
Subhankar**

# c# - C# - 捕获网络摄像头并添加帧

> ID：11372964
> 
> 赞同：0
> 
> 时间：2012-07-07T06:55:06.277
> 
> 标签：c#, webcam

我经常寻找并没有找到我需要的任何示例。我需要的是捕获网络摄像头视频并通过使用 C# 添加我自己的帧（换句话说，覆盖图像）和它的帧来更改它。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T10:20:44.170

如果你想要一个免费的解决方案，你可以搜索诸如 ffmpeg-sharp 之类的开源库，但我自己找不到任何支持视频叠加图像的库。

有商业图书馆可以做到这一点，但它们不是免费的。从这些我尝试了leadtools，它有一个过滤器，可以在视频流上覆盖具有透明度的图像。此论坛帖子中有一个示例项目：http: [//support.leadtools.com/cs/forums/22836/ShowPost.aspx#22836](http://support.leadtools.com/cs/forums/22836/ShowPost.aspx#22836)

# asp.net - 使用响应对象生成 PDF 时的预加载器

> ID：11372965
> 
> 赞同：4
> 
> 时间：2012-07-07T06:55:08.163
> 
> 标签：asp.net, ajax, pdf-generation, response, preloader

我正在使用响应对象生成 PDF。该代码实际上将 HTML 呈现为 PDF。PDF 生成时间不固定，因此我想在此期间使用 Ajax 显示预加载器过程（处理/加载）。

当我单击按钮开始 PDF 生成过程时，它将启动预加载器过程，但是在 PDF 生成完成后，预加载器过程并没有停止。

另外，假设我想清除页面上文本框中的数据，那么它不会被清除。

我需要做些什么来解决这些问题。

这是代码：

```
Dim Response As System.Web.HttpResponse = System.Web.HttpContext.Current.Response
Response.Clear()
Response.ClearHeaders()
Response.ClearContent()
Response.ContentType = "application/pdf"
Response.AppendHeader("Content-Disposition", "attachment; filename=" + Me.txtReportSetPDFName.Text.Replace(" ", "_") + ".pdf")
Response.AppendHeader("Content-Length", FileLen(sFilePath).ToString)
Response.WriteFile(sFilePath) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T14:14:20.870

你正在用吗

```
response.End(); 
```

如果是，那么您需要在调用之前清除文本框并停止加载程序

```
response.End(); 
```

希望能帮助到你。如果它解决了您的问题，请不要忘记支持它。谢谢.. ：）

# c# - C# 文本框 keydown 在 Metro 应用程序中触发了两次

> ID：11372969
> 
> 赞同：1
> 
> 时间：2012-07-07T06:55:41.037
> 
> 标签：c#, xaml, microsoft-metro

我正在为 Metro 应用程序开发 C# 和 XAML。我有一个文本框，我希望一旦在该文本框中按下输入，就会出现一个新的文本框。但我得到的不是一个文本框，而是两个文本框。我做了调试也意识到它被触发了两次。无法弄清楚为什么它会被触发两次。这是我的应用程序的一些代码

```
private void TextBox_KeyDown_1(object sender, Windows.UI.Xaml.Input.KeyRoutedEventArgs e)
    {
        if (e.Key == Windows.System.VirtualKey.Enter)
        {
          //code for producing textbox
        }

    } 
```

即时调试时，一旦执行上述块，它将转到 LayoutAwarePage.cs 并将控件发送到该代码段

```
private void CoreDispatcher_AcceleratorKeyActivated(CoreDispatcher sender,
        AcceleratorKeyEventArgs args)
    {
        var virtualKey = args.VirtualKey;

       if ((args.EventType == CoreAcceleratorKeyEventType.SystemKeyDown ||
            args.EventType == CoreAcceleratorKeyEventType.KeyDown) &&
            (virtualKey == VirtualKey.Left || virtualKey == VirtualKey.Right ||
            (int)virtualKey == 166 || (int)virtualKey == 167))
        {
            var coreWindow = Window.Current.CoreWindow;
            var downState = CoreVirtualKeyStates.Down;
            bool menuKey = (coreWindow.GetKeyState(VirtualKey.Menu) & downState) == downState;
            bool controlKey = (coreWindow.GetKeyState(VirtualKey.Control) & downState) == downState;
            bool shiftKey = (coreWindow.GetKeyState(VirtualKey.Shift) & downState) == downState;
            bool noModifiers = !menuKey && !controlKey && !shiftKey;
            bool onlyAlt = menuKey && !controlKey && !shiftKey;

            if (((int)virtualKey == 166 && noModifiers) ||
                (virtualKey == VirtualKey.Left && onlyAlt))
            {
                // When the previous key or Alt+Left are pressed navigate back
                args.Handled = true;
                this.GoBack(this, new RoutedEventArgs());
            }
            else if (((int)virtualKey == 167 && noModifiers) ||
                (virtualKey == VirtualKey.Right && onlyAlt))
            {
                // When the next key or Alt+Right are pressed navigate forward
                args.Handled = true;
                this.GoForward(this, new RoutedEventArgs());
            }
        }
    } 
```

完成此代码块后，控件将发送回函数 TextBox_KeyDown_1。我无法理解为什么首先将控件发送到 layoutawarepage.cs。此代码是在我的项目中添加 SplitPage 时生成的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T22:17:54.427

[我遇到了同样的问题，并在MSDN](http://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/734d6c7a-8da2-48c6-9b3d-fa868b4dfb1d)上找到了以下文章，其中说 MS 知道该错误并将其归档在其内部数据库中。处理 KeyUp 而不是 KeyDown 的建议适用于我的情况。

# android - android xml：在多个地方引用一个菜单。

> ID：11372972
> 
> 赞同：0
> 
> 时间：2012-07-07T06:56:19.597
> 
> 标签：android, xml, contextmenu

我有：

```
<item
    android:id="@+id/fp_pitcher"
    android:title="Pitcher">
    <menu>
        <item
            android:id="@+id/caught"
            android:title="Caught">
        </item>
        <item
            android:id="@+id/not_caught"
            android:title="Not Caught">
        </item>
    </menu>
</item>
<item
    android:id="@+id/fp_catcher"
    android:title="Catcher">
    <menu>
        <item
            android:id="@id/caught"
            android:title="Caught">
        </item>
        <item
            android:id="@id/not_caught"
            android:title="Not Caught">
        </item>
    </menu>
</item>
<item
    android:id="@+id/fp_firstbaseman"
    android:title="First Baseman">
    <menu>
        <item
            android:id="@+id/caught"
            android:title="Caught">
        </item>
        <item
            android:id="@+id/not_caught"
            android:title="Not Caught">
        </item>
    </menu>
</item>
<!--SNIP, continues for every fielding position. --> 
```

所以你看到这个内部菜单对于每个外部项目都是相同的。有没有办法可以一遍又一遍地引用同一个菜单？如果我需要修改内部菜单，这将节省我以后的时间。

# android - 如何在 Android 上使用 addr2line？

> ID：11372977
> 
> 赞同：1
> 
> 时间：2012-07-07T06:57:42.983
> 
> 标签：android, crash, andengine, addr2line

我的代码（在 Android 上使用 AndEngine 和 PhysicsBox2DExtension 的游戏）崩溃了，有人建议我使用 addr2line，但我完全不知道该怎么做，而且我看过的许多“教程”都非常模糊。也许有人可以给我一步一步的指示？

我正在使用 Windows 7 和 Eclipse Indigo。我已经下载了 Android NDK r8 并将其保存到 C:\Program Files (x86)\Android NDK\android-ndk-r8。我的项目保存到 C:\Users\Reese\workspace\TestGFX5。

堆栈跟踪：

```
07-06 13:25:27.469: I/DEBUG(19582):          #00  pc 00011f74  /system/lib/libc.so
07-06 13:25:27.473: I/DEBUG(19582):          #01  pc 0001921e  /system/lib/libc.so
07-06 13:25:27.473: I/DEBUG(19582):          #02  pc 00026558  /data/data/com.prattia.webs.testgfx5/lib/libandenginephysicsbox2dextension.so
07-06 13:25:27.473: I/DEBUG(19582):          #03  pc 00013e7c  /data/data/com.prattia.webs.testgfx5/lib/libandenginephysicsbox2dextension.so
07-06 13:25:27.473: I/DEBUG(19582):          #04  pc 00016e34  /system/lib/libdvm.so 
```

除此之外，我迷路了。请帮忙？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-07T09:47:13.530

改为使用`ndk-stack`。将您的本机日志崩溃保存在一个文件中，例如 log.txt，然后使用

```
$NDK_HOME/ndk-stack -sym $PROJECT_HOME/obj/local/armeabi -dump log.txt 
```

当然，您的本机库必须使用调试符号进行编译。

从文档：

> 'ndk-stack' 是一个简单的工具，它允许您过滤出现在 'adb logcat' 输出中的堆栈跟踪，并将共享库中的任何地址替换为相应的“源文件：行号”值。

# reflection - MonoDroid 是否支持 java.lang.reflect 包方法？

> ID：11372981
> 
> 赞同：1
> 
> 时间：2012-07-07T06:58:11.100
> 
> 标签：reflection, xamarin.android

我需要使用`java.lang.reflect`MonoDroid 解决方案中的方法，但我在任何地方都找不到这个命名空间。有没有办法访问这些？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T15:00:24.973

java.lang.reflect 包未绑定在 Mono for Android 中。[这个错误](https://bugzilla.xamarin.com/show_bug.cgi?id=5111#c9)有更多的细节。如果您确实需要解决该限制，您可以用 Java 编写应用程序的该部分，然后通过 JNI 调用它。Xamarin 有一个很好的使用 JNI 的[指南](http://docs.xamarin.com/android/advanced_topics/Binding_Android_Types)。

# iphone - 平移手势导致子视图崩溃？

> ID：11372983
> 
> 赞同：2
> 
> 时间：2012-07-07T06:58:24.627
> 
> 标签：iphone, objective-c, ios, xcode, ipad

我使用初始 ViewController 创建了一个作为单视图应用程序的项目；将 subViewController 添加到项目中。在两个视图控制器中都添加了带有平移手势的 UIImageView。
它在 viewController.m 中工作，但是当它被添加到 subViewController 并且子视图作为子视图添加到视图控制器中时，程序会因“Exc_bad_access”而崩溃。

任何人都有一些解决方案？

这是我的代码：

视图控制器.m

```
#import "ViewController.h"
#import "SubViewController.h"

//#define SUB

@interface ViewController ()

@end

@implementation ViewController

- (void)viewDidLoad
{
    [super viewDidLoad];

#ifdef SUB
    SubViewController *sb = [[SubViewController alloc] init];
    [self.view addSubview:sb.view];
#else
    UIImageView* img_ = [[UIImageView alloc]initWithImage:[UIImage imageNamed:@"monkey_1.png"]];
    img_.userInteractionEnabled = YES;
    UIPanGestureRecognizer *stampPanGesture = [[UIPanGestureRecognizer alloc] initWithTarget:self action:@selector(handlePan:)];
    [stampPanGesture setMinimumNumberOfTouches:1];
    [stampPanGesture setMaximumNumberOfTouches:1];
    [img_ addGestureRecognizer:stampPanGesture];
    img_.center = self.view.center;
    [self.view addSubview:img_];
#endif
}

- (void)handlePan:(UIPanGestureRecognizer *)recognizer {
    CGPoint translation = [recognizer translationInView:self.view];
    recognizer.view.center = CGPointMake(recognizer.view.center.x + translation.x,
                                         recognizer.view.center.y + translation.y);
    [recognizer setTranslation:CGPointMake(0, 0) inView:self.view];

} 
```

子视图控制器.m

```
#import "SubViewController.h"
@interface SubViewController ()

@end

@implementation SubViewController

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];

    UIImageView* img_ = [[UIImageView alloc]initWithImage:[UIImage imageNamed:@"monkey_1.png"]];
    img_.userInteractionEnabled = YES;
    UIPanGestureRecognizer *stampPanGesture = [[UIPanGestureRecognizer alloc] initWithTarget:self action:@selector(handlePan:)];
    [stampPanGesture setMinimumNumberOfTouches:1];
    [stampPanGesture setMaximumNumberOfTouches:1];
    [img_ addGestureRecognizer:stampPanGesture];
    img_.center = self.view.center;
    [self.view addSubview:img_];
}

- (void)handlePan:(UIPanGestureRecognizer *)recognizer {
    CGPoint translation = [recognizer translationInView:self.view];
    recognizer.view.center = CGPointMake(recognizer.view.center.x + translation.x,
                                         recognizer.view.center.y + translation.y);
    [recognizer setTranslation:CGPointMake(0, 0) inView:self.view];

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T07:13:42.573

假设这是 ARC 代码，问题是您正在创建子视图的视图控制器，获取它的视图，然后让控制器本身超出范围并被释放。

直接的解决方法是创建`SubViewController *sb`主视图控制器类的实例变量，这样它就不会超出范围，也不会在你身后被释放。

问题是，虽然这可能会解决您的崩溃问题，但更大的问题是您真的不应该抓取视图控制器的视图并将其添加为子视图，而对控制器本身不做任何事情。例如，如果您这样做，各种事情可能无法正常工作（例如，旋转事件永远不会到达您的子视图；iOS 需要与视图控制器通信的任何内容可能不会被您的子视图控制器接收；我不知道在世界`didReceiveMemoryWarning`局势会做，等等）。简而言之，Apple 建议不要这样做，并鼓励您保持视图层次结构和视图控制器层次结构同步。

因此，如果您要转换到新视图，您真的应该通过`pushViewController`or来完成`presentViewController`。万一这真的是一个子视图（例如，先前视图的一部分将保留在屏幕上，而子视图将只占据屏幕的一部分），您可以使用[View Controller Containment](http://developer.apple.com/library/ios/documentation/uikit/reference/UIViewController_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40006926-CH3-SW81)。您可以查看[WWDC 2011 会议 102](https://developer.apple.com/videos/wwdc/2011/?id=102)了解有关遏制的更多信息。但这对于您正在尝试做的事情来说无疑是矫枉过正。推送/呈现子视图可能是合乎逻辑的解决方案。

# asp.net - 如何按需加载两个 ASP.NET 用户控件？

> ID：11372987
> 
> 赞同：2
> 
> 时间：2012-07-07T06:59:16.790
> 
> 标签：asp.net, c#-4.0, user-controls, web-user-controls, dynamic-usercontrols

我想按需加载两个用户控件。

```
 asp:UpdatePanel ID="UpdatePanel1" runat="server"
    ContentTemplate
        asp:Button ID="Button1" runat="server" Text="Button" UseSubmitBehavior="false"
         OnClick="Button1_Click" /
        div id='Div_UserControlPlace' enableviewstate="true" runat="server" 
        /div
    /ContentTemplate
    Triggers
        asp:PostBackTrigger ControlID="Button1" /
    /Triggers
/asp:UpdatePanel
asp:UpdatePanel ID="UpdatePanel2" runat="server"
    ContentTemplate
        asp:Button ID="Button2" runat="server" Text="Button" UseSubmitBehavior="false" 
        OnClick="Button2_Click" /
        div id='Div_UserControlPlace2' enableviewstate="true" runat="server" 
        /div
    /ContentTemplate 
```

aspx.cs

```
protected void Page_Load(object sender, EventArgs e)
{

}
protected void Button1_Click(object sender, EventArgs e)
{
    Control FeaturedProductUserControl = new Control();
    FeaturedProductUserControl = LoadControl("WebUserControl1.ascx");
    FeaturedProductUserControl.EnableViewState = true;
    Div_UserControlPlace.Controls.Add(FeaturedProductUserControl);
}

protected void Button2_Click(object sender, EventArgs e)
{
    Control FeaturedProductUserControl2 = new Control();
    FeaturedProductUserControl2 = LoadControl("WebUserControl2.ascx");
    FeaturedProductUserControl2.EnableViewState = true;
    Div_UserControlPlace2.Controls.Add(FeaturedProductUserControl2);

} 
```

我通过单击第一个按钮加载第一个用户控件-这可以正常工作，但是当我单击另一个按钮以加载第二个 UserControl 时，第一个 UserControl 消失并且第二个 UserControl 加载。

感谢 IFA_User

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-07T07:03:44.710

您应该使用[占位符控件](http://msdn.microsoft.com/en-us/library/tety77hf%28v=VS.71%29.aspx)将控件动态添加到表单中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-07T08:46:36.650

看看我对动态控件的最后回应：

[动态创建的 LinkBut​​tons 的 OnClick 事件不起作用](https://stackoverflow.com/questions/11167737/onclick-event-of-dynamically-created-linkbuttons-is-not-working/11167765#11167765)

[动态添加的下拉列表不会触发 SelectedIndexChanged 事件](https://stackoverflow.com/questions/11126029/dynamically-added-dropdownlists-are-not-firing-selectedindexchanged-event/11127064#11127064)

[动态创建一个 ImageButton](https://stackoverflow.com/questions/11061872/dynamically-create-an-imagebutton/11061945#11061945)

*现在我已经有一些代码用于演示目的，每个动态用户控件在回发中保持其状态*

## 这是输出：

![在此处输入图像描述](../Images/7bee1a59c95e16e1f4619fd54a379e7b.png)

## ASPX

```
 <asp:PlaceHolder runat="server" ID="addresses" /><br />
    <asp:Button Text="Add Address" runat="server" ID="addAddress" OnClick="addAddress_Click" /> 
```

## ASPX 代码背后

```
 protected void Page_PreLoad(object sender, EventArgs e)
    {
        for (int i = 0; i < this.DynamicControlsCount; i++)
        {
            var c = this.LoadControl("~/AddressControl.ascx");
            this.addresses.Controls.Add(c);
        }
    }

    protected void addAddress_Click(object sender, EventArgs e)
    {
        this.DynamicControlsCount++;
        var c = this.LoadControl("~/AddressControl.ascx");
        this.addresses.Controls.Add(c);
    }

    protected int DynamicControlsCount
    {
        get
        {
            if (this.ViewState["ac"] == null)
            {
                return 0;
            }
            return (int)this.ViewState["ac"];
        }
        set
        {
            this.ViewState["ac"] = value;
        }
    } 
```

## 澳交所

```
<%@ Control Language="C#" AutoEventWireup="true" CodeBehind="AddressControl.ascx.cs" Inherits="WebApplication1.AddressControl" %>

<asp:Panel ID="Panel1" runat="server" GroupingText="Address" DefaultButton="btnSave">
    Street: <asp:TextBox runat="server" ID="txtStreet" /><br />
    City: <asp:TextBox runat="server" ID="txtCity" /><br />
    <asp:Button Text="Save" runat="server" ID="btnSave" OnClick="btnSave_Click" />
</asp:Panel>

<asp:Panel runat="server" GroupingText="Address Summary" Visible="false" ID="summary">
    <asp:Label ID="lblStreet" runat="server" /><br />
    <asp:Label ID="lblCity" runat="server" />
</asp:Panel> 
```

## 背后的 ASCX 代码

```
 protected void btnSave_Click(object sender, EventArgs e)
    {
        this.summary.Visible = true;
        this.lblCity.Text = "Selected city: " + this.txtCity.Text;
        this.lblStreet.Text = "Selected street: " + this.txtStreet.Text;
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-07T08:32:11.863

有几种方法可以做到：

1.  你可以使用 Ajax 加载用户控件。使用 Ajax 的好处是，您的页面不会被回发，例如，在 Button1 的单击事件中，调用 ajax(traditional/Jquery) 来加载 UserControl1，以及在 Button2 用户控件2 的按钮单击时。

2.  将这两个按钮放在两个不同的更新面板中，这样做点击事件只会刷新你页面的一部分。

3.  您必须保存某处（ViewState/Session），单击哪些按钮，并在单击任何按钮时检查该变量的值，并显式加载控件。

注意事项 - 如果您想在您的页面进行完整回发时取回您的数据，那么您必须添加控件，同时牢记**页面加载事件周期**。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-07T07:06:22.103

当在 HTML 中创建用户控件时，asp.net 将在回发中持续存在，而无需任何用户交互。但是，如果您以编程方式（动态）加载它们，它们将不会在回发中持续存在。因此，如果您以编程方式加载它们，您还需要以编程方式持久化它们。使用`ViewState`（或者`Session`我想）来存储已加载的内容以及可能需要在回发之间加载的任何其他必要信息。每个回发都需要您重新加载每个控件，否则它们将消失。

# javascript - 在链接的鼠标悬停效果上加载 div 中的网页

> ID：11372988
> 
> 赞同：1
> 
> 时间：2012-07-07T06:59:38.773
> 
> 标签：javascript, html, mouseout, mousehover

我正在开发一个网站（使用 php、html 和 css）。我有一个包含 url 列表的“新闻和事件”页面。我想要做的是将鼠标悬停在链接上，相应网站的一个小缩影应该加载到一个 div 中，以便用户知道链接包含什么类型的新闻。

我已经尝试过将鼠标悬停在图像和视频上的代码，但无法对网页执行相同的操作。

对于图像：

```
<a href="Happy-Birthday-1.gif" rel="enlargeimage" rev="targetdiv:loadarea,link:dynamicdrive.com">Happy Birthday</a><br /> <div id="loadarea" style="width: 600px"></div> 
```

对于视频：

```
 <a onClick="document.getElementById('dynloadarea').innerHTML='<iframe src=\'osmosis.mpg\' width=\'300\' height=\'300\' scrolling=\'auto\' frameborder=\'0\'></iframe>'"> Osmosis</a> <div id="dynloadarea"></div> 
```

-提前致谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T15:53:08.197

```
$(document).ready(function(){
$('#a').mouseover(function(){
$('#page').css('visibility','visible');
       $('#ss').attr('src',"http://www.w3schools.com/css/default.asp");
});

$('#a').mouseout(function(){
$('#page').css('visibility','hidden');
});
});​

<a href="Happy-Birthday-1.gif" rel="enlargeimage" r id="a">Happy Birthday</a><br />
<div id="page">
<iframe width="300" height="300" scrolling="auto" id="ss">
</iframe>
</div>​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T07:06:41.643

使用 blockUI 的例子在这里：http: [//jquery.malsup.com/block/#demos](http://jquery.malsup.com/block/#demos)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-07T07:10:20.757

尝试这个：

```
$('a').hover(function(){
   var imgpath = $(this).attr('href');
   $('#loadarea').load(imgpath)
}, function(){
   $('#loadarea').empty()
}) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-07T07:23:02.230

您将需要 jQuery [.load()](http://api.jquery.com/load/)。

```
$('a').hover(function(){
   var path = $(this).attr('href');//Get the path
   $('#result').load(path);//Load contents into a div#result
   , function() {
     $('#result').show();
   }
});

$('a').mouseout(function(){
 $('#result').hide();
}); 
```

您将只能在同一台服务器上加载页面。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-01-31T06:10:21.457

尝试这个。

```
<p id="p3"><a href="http://apple.com">Apple</a></p>

<script src="http://ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>
<link href="http://codegena.com/assets/css/image-preview-for-link.css" rel="stylesheet">
<script src="http://codegena.com/assets/js/image-preview-for-link.js"></script>
<script type="text/javascript">
    $(function () {
        $('#p3 a').miniPreview({ prefetch: 'parenthover' });
        $('#p3 a').miniPreview({ prefetch: 'pageload' });
    });
</script> 
```

# apache - 安装 vTigercrm - 为什么找不到 URL？

> ID：11372991
> 
> 赞同：0
> 
> 时间：2012-07-07T07:00:12.233
> 
> 标签：apache, .htaccess, vtiger

我正在尝试通过 ftp 路径安装 vTigercrm-5.4.0.tar.gz 文件。我正在遵循以下[教程](http://www.tmdhosting.com/tutorials/vtiger/vtiger-installation.html)

我上传了源文件。将其提取到 http:///admin

现在，当我尝试访问

```
> http://mydomain.com/admin 
```

或者

> `http://mydomain/admin/install.php`

我收到以下错误，

> 在此服务器上找不到请求的 URL /admin/。
> 
> 此外，在尝试使用 ErrorDocument 处理请求时遇到 404 Not Found 错误。

我在谷歌上搜索了很多关于这个问题的信息，但我无法解决它，vtiger 论坛也没有帮助解决这个问题，有人能告诉我为什么会这样吗？

什么是可能的解决方案？

我是否必须介绍 .httaccess 或其他内容？

我在过去 10 个小时里一直在敲我的头，仍然失败，请有人帮助我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T00:32:35.783

说起来很糟糕，感觉很羞耻，我犯了一个非常基本的错误，该死的我......我将它安装在`admn`文件夹中并正在尝试`admin`

你会相信吗？？

对不起，真的很抱歉这个问题..我打了一天的头..当我知道这个问题时，我完全生自己的气了..让我承认这是我最愚蠢的..

# java - 创建基于命令的记录器程序

> ID：11372993
> 
> 赞同：0
> 
> 时间：2012-07-07T07:00:36.617
> 
> 标签：java, multithreading, sockets, logging, indexoutofboundsexception

我目前正在尝试制作一个创建和写入日志文件的 java 程序。

它有 2 个类（一个用于请求，一个用于工作代码）。一个类有一个文本字段，允许您输入命令。命令应该像“日志开始”或“日志停止”。

所以请求类将命令作为字符串发送，工作类获取命令，解析它并执行指令（开始记录，停止记录。

我的问题是：当用户输入“停止”命令时，应用程序不会停止记录。好吧，它不会在 3 个日志条目后停止（这就是问题所在。我想在用户输入命令时停止它）当您查看代码时，您会更好地理解问题。

我知道我在这里犯了一个非常基本的错误，但不知何故目前无法弄清楚并希望您对这个问题发表意见。（我在代码中显示了问题）谢谢。

错误：

```
Exception in thread "stoplogging" java.lang.ArrayIndexOutOfBoundsException: 1
    at Response$ClientProcess$1StopperThread.run(Response.java:109)
    at java.lang.Thread.run(Unknown Source) 
```

请求类：

```
public class Request extends JFrame {
private JTextArea consoleArea = new JTextArea();
private JTextField cmd_prompt = new JTextField();
private JLabel cmd_label = new JLabel("Enter command: ");

// ********IP PORT TEXTFIELDS & CONNECT BUTTON*******  !!!!

private DataOutputStream output; 
private DataInputStream input;

public static void main(String[] args) {
    new Request();
}

Socket socket = null;
String command;
public Request (){
    JPanel requestPanel = new JPanel();
    requestPanel.setLayout(new BorderLayout());
    setTitle("Project_3002_CLIENT");
    requestPanel.add(cmd_label, BorderLayout.WEST);
    requestPanel.add(cmd_prompt, BorderLayout.CENTER);
    setLayout(new BorderLayout());
    add(requestPanel, BorderLayout.NORTH);

    add(new JScrollPane(consoleArea), BorderLayout.CENTER);
    Font font = new Font("Courier New", Font.BOLD, 15);
    cmd_prompt.setFont(font);
    cmd_prompt.setAlignmentX(LEFT_ALIGNMENT);
    cmd_prompt.addActionListener(new TextFieldListener());
    setSize(600, 270);
    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    consoleArea.setFont(font);
    setVisible(true);

    String ip = "127.0.0.1"; // THIS WILL BE CHANGED (make custom) --extra jframe
    int port = 4588; // THIS WILL BE CHANGED (make custom) -- extra jframe
    try {
        socket = new Socket(ip, port);
        //IO connection stuff
        input = new DataInputStream(socket.getInputStream());
        output = new DataOutputStream(socket.getOutputStream());
    }
    catch (IOException ex) {
        consoleArea.append("Connection refused. Please check if the server is running.\n");
    }

}

class SenderThirty implements Runnable{

    Thread send30secs;
    public SenderThirty(){
    }

    public SenderThirty(String send30s){
        send30secs = new Thread(this, send30s);
        send30secs.start();
    }

    @Override
    public void run() {
        try {
            output.writeUTF(command);
        } catch (IOException e) {
            e.printStackTrace();
        }
    }

}

private class TextFieldListener implements ActionListener{
    public void actionPerformed(ActionEvent e) {
        try {
            command = cmd_prompt.getText();

            if (command.contains("start") == true){

                Thread sendstart = new Thread(new SenderThirty(), "send");
                sendstart.start();
                //continue
            }

            else if (command.contains("stop") == true){
                Thread sendstop = new Thread(new SenderThirty(), "send");
                sendstop.start();
                //continue
            }

            else {consoleArea.append("\nInvalid command\n");}

        } catch (Exception e1) {
            consoleArea.append("\nERR!\n");
        }
    }
}} 
```

工人阶级：

```
public class Response {
String path = "";

public static void main(String[] args) throws InterruptedException {
    new Response();
}

ServerSocket resp_sock;
public Response() throws InterruptedException {

    int port = 4588;
    try {
        resp_sock = new ServerSocket(port);

        int clientNo = 1;

        while (true) {
            Socket socket = resp_sock.accept();

            // client's IP address
            InetAddress client_addr = socket.getInetAddress();

            ClientProcess task = new ClientProcess(socket);
            new Thread(task).start();

            clientNo++;
        }

    } catch (IOException ex) {
        JOptionPane.showMessageDialog(null, ex);
    }

}

class ClientProcess implements Runnable {

    private Socket socket; 

    public ClientProcess(Socket socket) {
        this.socket = socket;
    }

    @Override
    public void run() {

        try {
            final DataInputStream input = new DataInputStream(socket.getInputStream());//from client
            //DataOutputStream output = new DataOutputStream(socket.getOutputStream());//to client

            while(true){
                String prompt = input.readUTF();
                String command[] = prompt.split(" ");
                final Logger logger = Logger.getLogger("MyLog"); 
                FileHandler fh;             
                fh = new FileHandler("C:\\..path..\\logfile.log");  
                logger.addHandler(fh);                      
                SimpleFormatter formatter = new SimpleFormatter();  
                fh.setFormatter(formatter);

                class StopperThread implements Runnable{
                    public StopperThread(){
                    }           
                    @Override
                    public void run() { 
                        try { ////////////////////////////////////////***PROBLEM IS IN THIS TRY BLOCK***
                            String next_prompt;
                            next_prompt = input.readUTF();
                            String nextCommand[] = next_prompt.split(" ");

                            if(nextCommand[1].equalsIgnoreCase("stop")){
                                logger.info("STOPPED   " + new Date() + "  \n");
                                System.exit(0);}

                        } catch (IOException e) {
                            e.printStackTrace();
                        }

                }}

                if(command[1].equalsIgnoreCase("start")){
                    try {

                        while(true){
                            logger.info("RUNNING   " + new Date() + "  \n");
                            Thread.sleep(5000);

                            Thread stoplogging = new Thread(new StopperThread(), "stoplogging");
                            stoplogging.start();

                        }

                    } catch (SecurityException e) {  
                        e.printStackTrace();  
                    } catch (InterruptedException e) {
                        e.printStackTrace();
                    }  
                }

                if(command[1].equalsIgnoreCase("stop")){
                    logger.info("STOPPED   " + new Date() + "  \n");  
                }

            }
        } catch (IOException ex) {
            JOptionPane.showMessageDialog(null, ex);
        }
    }

}} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T07:18:19.207

`if(nextCommand[1].equals...)`很可能是罪魁祸首。

如果您拆分的字符串中没有空格（“”），它将抛出 NPE，在这种情况下，nextCommand 的长度将为 1，而不是 2。

您应该事先检查长度。注意：与 . 相同的潜在错误`command[1]`。

# c# - 是否可以在 C# 中将队列数据添加到 DataTable？

> ID：11372997
> 
> 赞同：0
> 
> 时间：2012-07-07T07:02:15.827
> 
> 标签：c#, data-structures, datatable, queue

我正在将**Queue"<"string">"**中的项目异步添加到队列中。而不是使用 INSERT 查询为队列的每个数据*逐行*插入，我想在**if(evtLogQueue.Count==1000)**时将这些项目添加到 DataTableOnly . 这样 DataTable 可以进一步用于使用**BulkCopy**到 SQLServerDB 的批量插入。

我想知道有可能吗？如果是，那怎么办？或任何其他建议？

示例代码：

```
static Queue<string> evtLogQueue = new Queue<string>();

public static void AddItemsToQueue(string itm)
        {

            evtLogQueue.Enqueue(itm);
            Console.WriteLine("Length of Queue:" + evtLogQueue.Count);

        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T07:39:26.580

是的，这是可能的，您可以通过在您的`AddItemsToQueue(string itm)`方法中添加一些代码来做到这一点。

```
public static void AddItemsToQueue(string itm)
    {
        evtLogQueue.Enqueue(itm);
        // Add the following code
        if (evtLogQueue.Count == 1000)
        {
            DataTable dataTable = new DataTable();
            dataTable.Columns.Add("Log");
            foreach (var log in evtLogQueue)
            { 
                DataRow dr = dataTable.NewRow();
                dr["Log"] = log;
                dataTable.Rows.Add(dr);
            }
            evtLogQueue.Clear();     // Most probably you will also need to clear the queue.
            SendBulkData(dataTable); // Send the bulk data
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T07:25:28.767

这是可能的。

在 AddItemsToQueue(string itm) 内部检查队列中的元素数量。

一旦你得到数字是 1000，运行一个 for 循环并将数据插入数据表。

请检查下面提到的链接以进行批量复制

[http://www.codeproject.com/Articles/16922/SQL-Bulk-Copy-with-C-Net](http://www.codeproject.com/Articles/16922/SQL-Bulk-Copy-with-C-Net)

如果您仍然遇到任何问题，请告诉我。

# regex - 如何测试字符串是否是任何正则表达式实例的子字符串？

> ID：11372999
> 
> 赞同：3
> 
> 时间：2012-07-07T07:02:56.273
> 
> 标签：regex, substring, instance

在任何编程语言和库中，

如何测试字符串是否是正则表达式任何实例的子字符串？

例如，正则表达式的所有实例

```
RA = /^a{1,2}c{1,2}$/ 
```

是

```
'ac', 'acc', 'aac', 'aacc'. 
```

字符串 'cc' 不是正则表达式的一个实例，而是两个正则表达式实例的子字符串。你怎么能测试'c'有这样的属性？

等效地，您如何（通常）获得一个正则表达式，其实例都是另一个正则表达式的任何实例的子字符串。

对于上面的示例，正​​则表达式

```
RB = /^a{0,2}c{0,2}$/ 
```

有实例

```
'', 'c', 'cc', 'a', 'ac', 'acc', 'aa', 'aac', 'aacc' 
```

它们是 RA 实例的所有子串。

对于任何正则表达式 RA，您如何从 RA 计算这样的 RB？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T07:08:10.970

如果您的意思是计算机科学正则表达式，您可以通过形成所有标记子序列的交替来做到这一点：

```
/^a{1,2}c{1,2}$/ -> /^(a{1,2}|a{1,2}c{1,2}|c{1,2}|)$/ 
```

请注意，长度将增长为 O(n ² )，其中 n 是原始表达式中的数字标记。