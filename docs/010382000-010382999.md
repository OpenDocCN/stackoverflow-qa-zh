# StackOverflow 问答 10382000-10382999

# objective-c - Objective-C 中的约束网络

> ID：10382001
> 
> 赞同：1
> 
> 时间：2012-04-30T10:17:05.157
> 
> 标签：objective-c, macos, lisp, sicp, constraint-programming

我正在 Mac OS X 10.7 上编写一个 Objective C 应用程序，我需要解决一个算术约束问题。例如，我有两个矩形方程，a 和 b 是边长：

```
P=2(a+b) (perimeter)
A=ab     (area) 
```

我将此问题确定为约束满足问题。用户应该能够指定 a 和 A，并让求解器计算 b 和 P。我在[http://mitpress.mit.edu/sicp/full-text/book/book-ZH-中找到了一个实现22.html#%_idx_3516](http://mitpress.mit.edu/sicp/full-text/book/book-Z-H-22.html#%_idx_3516)，但我不确定是否有一种干净的方法可以从Objective C调用LISP程序。我正在寻找可以为求解器提供Objective C接口的东西，或者编译LISP编程到Objective C库中。否则，一个极简的开源约束求解器将满足我的需求。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T18:38:43.270

那本书的例子是用Lisp 的一种方言[Scheme](http://en.wikipedia.org/wiki/Scheme_%28programming_language%29)编写的（有很多）。这本书有点老了，但是今天的大多数 Scheme 实现都能够执行那本书中的代码示例。有几个在 OSX 上运行的 Scheme 实现，但是书中的示例也可以很容易地移植到 Common Lisp 中——实际上只有很小的区别。不仅如此，我认为用 C/Obj-C 编写它们不会花费太多时间。书中的示例是通用编程，它们使用的 Lisp 方言并没有什么特别之处。

*（Wiki 中的文章也有实现的链接，我不想宣传任何特定的实现不要听起来有偏见——此外，我在学术界之外没有太多使用它的经验）。*

可能，如果您正在寻找一种通用工具来证明数学定理，那么您可以研究[Coq——](http://coq.inria.fr/)这是专门用于该任务的语言。它还可以在任何 Unix 或类 Unix 操作系统上运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T12:12:18.050

实际上有人为 iOS 构建 lisp 系统。（免责声明 - 我一生中从未使用过 lisp）

这个 SO 问题[common-lisp-on-iphone-ios](https://stackoverflow.com/questions/4060353/common-lisp-on-iphone-ios)指向[funcall 博客](http://funcall.posterous.com/tag/iphone)，其作者在 github 上有[ecl-iphone-builder](https://github.com/kriyative/ecl-iphone-builder)

这个 SO 问题：[has-anyone-got-any-code-examples-of-ecl-lisp-for-iphone-development](https://stackoverflow.com/questions/5770020/has-anyone-got-any-code-examples-of-ecl-lisp-for-iphone-development)最终在同一个目的地。

希望这对你来说是一个好的开始。

**编辑**

我完全错过了这**不是**iOS 问题。

但是有人在 OSX 上运行 lisp。这个 SO 问题有一些解决方案：[what-is-the-best-scheme-or-lisp-implementation-for-os-x](https://stackoverflow.com/questions/459323/what-is-the-best-scheme-or-lisp-implementation-for-os-x)

这个博客：[common-lisp-on-mac-os-x](http://newartisans.com/2007/10/common-lisp-on-mac-os-x/)更加详细（对我来说是谷歌的顶级）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-01T01:17:55.497

nu 编程语言是一种 Lisp 方言，可以与 Objective-C 集成，包括嵌入到 Objective-C 应用程序中。 [http://programming.nu/index](http://programming.nu/index)

我听说过关于它的非常好的事情，但从未使用过它。

您也可以尝试将约束求解器应用程序转换为 Objective-C。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-30T10:31:15.900

如果这是您需要解决的唯一问题，那就更容易了。您可以`b`根据`A`和解决`a`：

```
b = A / a 
```

然后你可以`P`使用你发布的第一个方程找到。

# svg - 渲染样式属性（@style vs font-size）

> ID：10382003
> 
> 赞同：1
> 
> 时间：2012-04-30T10:17:18.260
> 
> 标签：svg, svg-font

我发现在 IE 和 Firefox 上，SVG @style 属性不呈现字体大小，但 @font-size 属性有效。（我不确定失败的显示器是否太小而无法看到，没有颜色或根本不显示）。

```
<text style=" stroke:green; fill:black; font-size:26.548;"  
       x="265.1651888" y="737.1567768" >o</text> 
<!-- fails to render -->

<text style=" stroke:blue; fill:black; "  x="265.1651888" y="737.1567768"
       font-size="16.548">o</text> 
<!-- renders OK --> 
```

该标准似乎暗示`@style`特定属性是替代品。它是否正确？如果是这样，这是浏览器的限制吗？什么是防御性编码（例如，为了安全起见，我应该始终使用这两者吗？）。我正在生成自己的 SVG，所以也许有全局属性会影响这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T11:05:39.980

[这是正确的，如果您根据http://www.w3.org/TR/CSS2/fonts.html#font-size-props](http://www.w3.org/TR/CSS2/fonts.html#font-size-props)通过 CSS 指定字体大小，则必须放入单位。

当指定为 SVG 属性时，字体大小的单位是可选的，尽管 SVG 规范涵盖了该用法和语法。

# vba - 验证与否？

> ID：10382004
> 
> 赞同：3
> 
> 时间：2012-04-30T10:17:42.877
> 
> 标签：vba, excel

我从用户那里获取输入，我给他选择。例如，在“导体”列中，他可以选择“Al 或 Cu”

同样，在“绝缘体”列中，他可以选择“XLPE 或 PVC”

现在以上两个是我提供给用户的列表的简单版本，但是我的一些列表依赖于以前的输入，为此我使用这样的数据验证：

```
=indirect($C5 & "_" & $D5) 
```

（命名范围，例如：al_xlpe）

假设 C 列和 D 列引用了一些输入（这将导致 2! 命名范围在前面定义）。

由于上述方法，我被迫使用大量命名范围（我的一些验证列表选择取决于超过 4 个或更多输入，它们如下所示：

```
=indirect("col6" & "_" & col7 & "_" & col8 & "_" & col9) 
```

（另一个命名范围，例如：al_xlpe_duct_3；可能有 4 个！其中）

我面临几个问题：

1.  由于数据库可以随时扩展，因此包含超过 4 个输入的验证列表将需要 4 个！命名范围更改。
2.  数据验证容易丢失（一大问题）
3.  我不能限制复制和粘贴，因为我的大多数用户将粘贴来自其他工作表的数据（不能使用导入，因为列永远不会被修复）
4.  我不能使用列表框，因为可以输入任意数量的数据行，并且我需要在每一行中进行选择
5.  无法使用 MS Access 进行数据库管理，因为我的工具适用于输入数据，而且我的大多数用户都不熟悉访问（而且它不允许轻松复制粘贴数据）

有没有更好的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T09:58:06.260

在这个答案中，我提供了一种在我 45 年开始作为程序员工作时非常流行的技术，但多年来我没有看到任何人在常规应用程序中使用过这种技术，除了我自己。我们从编译器开发中借用了该技术，但使用它的正式程度要低得多。

在成熟的技术中，将有五个步骤：

1.  设计一种以方便人类的方式对规范进行编码的方法。
2.  编码规范。
3.  设计一个或多个表以方便快速处理的方式保存规范。
4.  设计并实现将人类格式转换为快速处理格式的程序。
5.  设计和实现一个程序来解释快速处理格式并执行所需的操作。

并非每个问题都需要所有五个步骤。有时人工和快速处理格式可能是相同的。这听起来可能很复杂，但它使我们能够轻松有效地解决许多复杂的问题。

在下面的工作表中，我已经编码了我对您需要的验证类型的理解。

```
 |         A          |         B          |         C          |
--+--------------------+--------------------+--------------------+    
 1|Permitted           |Conditions -------------->               |
 2|C=V1|V2|V3|V4       |                    |                    |
 3|D=V5                |C=V1|V2             |                    |
 4|D=V6                |C=V3|V4             |                    |
 5|E=V7|V8             |D=V5                |C=V1                |
 6|E=V9|V10            |D=V5                |C=V2                |
 7|E=V11|V12           |D=V6                |C=V3                |
 8|E=V13|V14           |D=V6                |C=V4                | 
```

在第 2 行中，我声明 C 列中的一个单元格的值可以是 V1 或 V2 或 V3 或 V4。

在第 3 行中，我声明 D 列中的一个单元格的值可能为 V5，但前提是同一行的 C 列的值为 V1 或 V2。

在第 4 行中，我为 D 列中的一个单元格声明了一个替代值，它具有自己的一组条件。

在第 5 行中，我声明 E 列中的一个单元格的值可能为 V7 或 V8，但前提是同一行的 D 列的值为 V5，且该行的 C 列的值为 V1。

我对您的要求没有足够的了解，无法知道这是否是您验证要求的最佳或完整表示。但是，如果您喜欢这种技术，我希望您能理解并为您的需求开发一个方便的表示。

接下来我需要定义这个规范的快速处理形式。我设计了四个表格并实现了下面的代码，将人工工作表格式转换为快速处理格式，然后将这些表格的内容输出到准备放置在此答案中的即时窗口：

```
Rules per Column table 
C RR RR                = Column   First rule   Last rule
3  1  1
4  2  3
5  4  7 
```

工作表中有三列有验证规则，它们是列 3 (C)、列 4 (D) 和列 5 (E)。上表告诉我们，对于第 3 (C) 栏，适用规则 1 至 1，对于第 5 (E) 栏，适用规则 4 至 7。

```
Rule table              
I VV VV CC CC   = Index   First value   Last value   First condition   Last condition
1  1  4  1  0 
2  5  5  1  1 
3  8  8  2  2 
4 11 12  3  4 
5 15 16  5  6 
6 19 20  7  8 
7 23 24  9 10 
```

对于规则 1，条件 1 到 0 适用，即没有条件。允许的值是值表中的条目 1 到 4（V1、V2、V3 和 V4）。这对应于工作表中的第 2 行。

对于规则 4，允许的值是值表中的条目 11 和 12（V7 和 V8），提供条件 3 到 4 适用。条件 3 是列 4 (D) 必须等于值表中的条目 13 (V5)。条件 4 是列 3 (C) 必须等于值表中的条目 14 (V1)。这对应于工作表中的第 5 行。

```
Condition table
 I C VV VV          = Index   Column   First value   Last value
 1 3  6  7
 2 3  9 10
 3 4 13 13
 4 3 14 14
 5 4 17 17
 6 3 18 18
 7 4 21 21
 8 3 22 22
 9 4 25 25
10 3 26 26

Value table                 Entries 1 to 26
E 1=V1  E 2=V2  E 3=V3  E 4=V4  E 5=V5  E 6=V1  E 7=V2  E 8=V6  E 9=V3  E10=V4   
E11=V7  E12=V8  E13=V5  E14=V1  E15=V9  E16=V10 E17=V5  E18=V2  E19=V11 E20=V12  
E21=V6  E22=V3  E23=V13 E24=V14 E25=V6  E26=V4 
```

如果您不习惯考虑通过链接表控制代码，则可能需要一点时间才能完全理解。我遵循了一些规则的链接。多试几次，你就会明白了。请注意工作表是如何设计为易于人类维护的，而这些表是为计算机快速执行而设计的。

此编译过程可以在 Worksheet Open 例程中进行，或者您可以预编译表并将其存储在工作簿中。这些表已准备好由工作表更改例程执行，或者它们可用于计算公式并将其放置在适当的单元格中。

我希望我已经很好地解释了这一点，以便您了解这个想法并确定该技术是否适合您的问题。如有必要，可以提出问题，我将扩大解释。

以下代码将人类格式转换为快速处理格式，然后将快速处理格式输出到即时窗口。

```
Option Explicit

  Type typColRule      ' Definition of entry in Rules per Column table 
    InxRule1 As Long   ' Index of first rule for this column. ) InxRule1 > InxRuleL 
    InxRuleL As Long   ' Index of last rule for this column.  ) if no rules for column
  End Type
  Type typRule         ' Definition of Rule table 
    InxValue1 As Long  ' Index of first permitted value for this rule
    InxValueL As Long  ' Index of last permitted value for this rule
    InxCond1 As Long   ' Index of first condition for this column. ) InxCond1 > InxCondL 
    InxCondL As Long   ' Index of last rule for this column.       ) if no rules for column
  End Type
  Type typCond         ' Definition of Condition table
    Col As Long        ' Column to which this condition applies
    InxValue1 As Long  ' Index of first permitted value for this condition
    InxValueL As Long  ' Index of last permitted value for this condition
  End Type

  ' ColRule is sized to (Min to Max) where Min is the lowest column validated
  ' and Max is the highest column validated.  ColRule(N).InxRule1 identifies
  ' the first rule in Rule for column N.  ColRule(N).InsRuleL identifies the
  ' last rule in Rule for column N.
  Dim ColRule() As typColRule

  ' There is one entry in Rule per validation row in worksheet "Validate".
  Dim Rule() As typRule

  ' There is one entry in ValueCell per value referenced in a permitted or
  ' a condition.
  Dim ValueCell() As String

  ' There is one entry in Cond per condition in worksheet "Validate"
  Dim Cond() As typCond

Sub CompileValidation()

  Dim ColCodeCrnt As String
  Dim ColNumCrnt As String
  Dim ColValCrnt As Long
  Dim ColValidateCrnt As Long
  Dim ColValMin As Long
  Dim ColValMax As Long
  Dim ConditionCrnt As String
  Dim InxCondCrnt As Long
  Dim InxRuleCrnt As Long
  Dim InxValueCellCrnt As Long
  Dim InxValueListCrnt As Long
  Dim NumCond As Long
  Dim NumValue As Long
  Dim PermittedCrnt As String
  Dim PosEqual As Long
  Dim RowValidateCrnt As Long
  Dim ValueList() As String

  With Worksheets("Validate")

    ' Determine the size of the arrays to which information will be
    ' compiled.  Find
    '   * The minimum and maximum columns subject to validated
    '   * Number of conditions
    '   * Number of values references
    ' This routine does not allow for blank rows or columns in the
    ' middle of worksheet "Validate".
    ColValMin = -1
    ColValMax = -1
    NumCond = 0
    NumValue = 0
    RowValidateCrnt = 2
    Do While True
      PermittedCrnt = .Cells(RowValidateCrnt, 1).Value
      If PermittedCrnt = "" Then
        Exit Do
      End If
      PosEqual = InStr(1, PermittedCrnt, "=")
      Debug.Assert PosEqual > 1
      ' Determine range of columns validated
      ColCodeCrnt = Mid(PermittedCrnt, 1, PosEqual - 1)
      ColNumCrnt = Range(ColCodeCrnt & "1").Column
      If ColValMin = -1 Then
        ColValMin = ColNumCrnt
      ElseIf ColValMin > ColNumCrnt Then
        ColValMin = ColNumCrnt
      End If
      If ColValMax = -1 Then
        ColValMax = ColNumCrnt
      ElseIf ColValMax < ColNumCrnt Then
        ColValMax = ColNumCrnt
      End If
      ' Determine number of conditions and number of values
      ValueList = Split(Mid(PermittedCrnt, PosEqual + 1), "|")
      NumValue = NumValue + UBound(ValueList) - LBound(ValueList) + 1
      ColValidateCrnt = 2
      Do While True
        ConditionCrnt = .Cells(RowValidateCrnt, ColValidateCrnt).Value
        If ConditionCrnt = "" Then
          Exit Do
        End If
        PosEqual = InStr(1, ConditionCrnt, "=")
        Debug.Assert PosEqual > 1
        ValueList = Split(Mid(ConditionCrnt, PosEqual + 1), "|")
        NumValue = NumValue + UBound(ValueList) - LBound(ValueList) + 1
        ColValidateCrnt = ColValidateCrnt + 1
      Loop
      NumCond = NumCond + ColValidateCrnt - 2
      RowValidateCrnt = RowValidateCrnt + 1
    Loop

    ' Size arrays
    ReDim ColRule(ColValMin To ColValMax)
    ReDim Rule(1 To RowValidateCrnt - 2)
    ReDim ValueCell(1 To NumValue)
    ReDim Cond(1 To NumCond)

    InxRuleCrnt = 0
    InxValueCellCrnt = 0
    InxCondCrnt = 0

    ' Extract rules in column number order
    For ColValCrnt = ColValMin To ColValMax
      ' The first rule for this column, if any, will be the
      ' next entry in the Rule table
      ColRule(ColValCrnt).InxRule1 = InxRuleCrnt + 1
      ' If there are no rules for this column, the last rule index
      ' will be less than the first rule undex
      ColRule(ColValCrnt).InxRuleL = InxRuleCrnt
      RowValidateCrnt = 2
      Do While True
        PermittedCrnt = .Cells(RowValidateCrnt, 1).Value
        If PermittedCrnt = "" Then
          Exit Do
        End If
        PosEqual = InStr(1, PermittedCrnt, "=")
        ColCodeCrnt = Mid(PermittedCrnt, 1, PosEqual - 1)
        ColNumCrnt = Range(ColCodeCrnt & "1").Column
        If ColNumCrnt = ColValCrnt Then
          ' This rule is for the current column
          InxRuleCrnt = InxRuleCrnt + 1
          ' This could be the last rule for this column so
          ' store its index against the column
          ColRule(ColValCrnt).InxRuleL = InxRuleCrnt
          ' The first value for this rule will be the next
          ' entry in the Value table
          Rule(InxRuleCrnt).InxValue1 = InxValueCellCrnt + 1
          ValueList = Split(Mid(PermittedCrnt, PosEqual + 1), "|")
          ' Save each permitted value in the Value table
          For InxValueListCrnt = LBound(ValueList) To UBound(ValueList)
            InxValueCellCrnt = InxValueCellCrnt + 1
            ValueCell(InxValueCellCrnt) = ValueList(InxValueListCrnt)
          Next
          ' Record the index of the last permitted value for this rule
          Rule(InxRuleCrnt).InxValueL = InxValueCellCrnt
          ' The first condition for this rule, if any, will be the next
          ' entry in the Condition table
          Rule(InxRuleCrnt).InxCond1 = InxCondCrnt + 1
          ' If there are no conditions for this rule, the last condition
          ' index will be less than the first condition undex
          Rule(InxRuleCrnt).InxCondL = InxCondCrnt
          ColValidateCrnt = 2
          Do While True
            ConditionCrnt = .Cells(RowValidateCrnt, ColValidateCrnt).Value
            If ConditionCrnt = "" Then
              Exit Do
            End If
            InxCondCrnt = InxCondCrnt + 1
            PosEqual = InStr(1, ConditionCrnt, "=")
            ColCodeCrnt = Mid(ConditionCrnt, 1, PosEqual - 1)
            ColNumCrnt = Range(ColCodeCrnt & "1").Column
            ' Store the column for this condition
            Cond(InxCondCrnt).Col = ColNumCrnt
            ' The first value for this condition will be the next
            ' entry in the Value table
            Cond(InxCondCrnt).InxValue1 = InxValueCellCrnt + 1
            ValueList = Split(Mid(ConditionCrnt, PosEqual + 1), "|")
            For InxValueListCrnt = LBound(ValueList) To UBound(ValueList)
              InxValueCellCrnt = InxValueCellCrnt + 1
              ValueCell(InxValueCellCrnt) = ValueList(InxValueListCrnt)
            Next
            ' Record last value for this condition
            Cond(InxCondCrnt).InxValueL = InxValueCellCrnt
            ColValidateCrnt = ColValidateCrnt + 1
          Loop
          ' Record last condition for this rule
          Rule(InxRuleCrnt).InxCondL = InxCondCrnt
        End If
        RowValidateCrnt = RowValidateCrnt + 1
      Loop
    Next
  End With

  Debug.Print "    Rules per Column table"
  Debug.Print "    C RR RR"
  For ColValCrnt = ColValMin To ColValMax
    Debug.Print "    " & ColValCrnt & " " & _
                Right(" " & ColRule(ColValCrnt).InxRule1, 2) & " " & _
                Right(" " & ColRule(ColValCrnt).InxRuleL, 2)
  Next
  Debug.Print
  Debug.Print "    Rule table"
  Debug.Print "    I VV VV CC CC"
  For InxRuleCrnt = 1 To UBound(Rule)
    Debug.Print "    " & InxRuleCrnt & " " & _
                         Right(" " & Rule(InxRuleCrnt).InxValue1, 2) & " " & _
                         Right(" " & Rule(InxRuleCrnt).InxValueL, 2) & " " & _
                         Right(" " & Rule(InxRuleCrnt).InxCond1, 2) & " " & _
                         Right(" " & Rule(InxRuleCrnt).InxCondL, 2) & " "
  Next
  Debug.Print
  Debug.Print "    Condition table"
  Debug.Print "     I C VV VV"
  For InxCondCrnt = 1 To UBound(Cond)
    Debug.Print "    " & Right(" " & InxCondCrnt, 2) & " " & _
                         Cond(InxCondCrnt).Col & " " & _
                         Right(" " & Cond(InxCondCrnt).InxValue1, 2) & " " & _
                         Right(" " & Cond(InxCondCrnt).InxValueL, 2)
  Next
  Debug.Print
  Debug.Print "    Value table"
  Debug.Print "    ";
  For InxValueCellCrnt = 1 To UBound(ValueCell)
    Debug.Print "E" & Right(" " & InxValueCellCrnt, 2) & "=" & _
                Left(ValueCell(InxValueCellCrnt) & "    ", 5);
    If (InxValueCellCrnt Mod 10) = 0 Then
      Debug.Print
      Debug.Print "    ";
    End If
  Next 
```

结束子

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T19:29:58.043

如果您要坚持使用命名范围，则应使用 INDEX 和 COUNTA 公式使命名范围动态化。这样您就可以将记录添加到列表中，并且命名范围将自动调整。但接下来我会告诉你不要使用命名范围。

这种链接数据验证非常适合简单的链表。但是您的情况非常简单，我认为您需要从 DV 转向 ActiveX 控件，可能在用户窗体上。

您可以达到几个复杂程度。一方面是你现在所拥有的。另一方面，一切都存在于数据库中，而 Excel 是适当关系数据库的计算引擎/前端。您可能最终会处于这两者的中间。

我没有足够的信息给你一个真正相关、详细的答案，所以我会做出一堆假设，你必须认识到它何时不适合你的情况。我认为您需要创建一个用户表单来处理数据输入。用户窗体上的列表框/组合框将通过代码动态更新。用户表单将通过功能区、右键菜单或“编辑”超链接调用。用户窗体将填充当前选定的行。

然后你会有一个复制和粘贴选项。用户可以将单个项目复制并粘贴到用户表单中，您的代码将验证它们。或者他们可以复制代码将验证的完整信息记录。

不要回避 Access 作为后端。我的大部分项目都是由 Excel 控制的 Jet 数据库。Excel 是计算引擎、输入机制和报告机制。

# linux - 每 2 秒检查一次目录内容，如果 bash 中存在某个文件，则复制其内容

> ID：10382008
> 
> 赞同：0
> 
> 时间：2012-04-30T10:18:08.070
> 
> 标签：linux, bash, shell, daemon, infinite-loop

我想每 2 秒检查一次 linux bash 中的特定目录，如果存在任何文件，则在运行的守护进程劫持该文件之前将该文件复制到目录中（对该文件进行一些处理和修改并快速移动处理过的文件）文件到另一个目录）。

我试过这个：

```
while true; do
  cp * /home/a/*;
  sleep 1;
done 
```

但它不起作用：我想我的`cp`语法一定是错误的。我试过了`/home/a/*`，`/home/a`但`/home/a/`没有一个奏效。

有什么办法可以在 bash shell 中做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T11:18:15.880

您快到了，但您需要考虑该目录中没有文件的情况。

使用正确的选项`bash`，这相当容易：

```
#! /bin/bash

shopt -s nullglob # to get an empty list if no file is present

while true ; do
    for i in * ; do
        echo "Intercepted $i"
        cp "$i" /home/a/
    done
    sleep 1
done 
```

（请注意，这通常是非常不可靠的。您可以复制部分写入的文件，完全丢失文件等）

# php - log4php：如何在 XML 中动态更改数据库名称/数据库主机/用户名？

> ID：10382015
> 
> 赞同：0
> 
> 时间：2012-04-30T10:18:34.640
> 
> 标签：php, logging, log4php

我有一个案例，我可能有多个数据库，每个数据库都有自己的日志表。

由于我在 log4php.xml 中使用 DBAppender，我如何动态更改（在 rumtime 上）更改数据库名称和/或数据库主机。有没有可能这样做？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T10:27:52.923

您可以在运行时使用 PHP 数组而不是 XML 配置来配置 log4php，如 log4php doc 中所示：

[http://logging.apache.org/log4php/docs/configuration.html](http://logging.apache.org/log4php/docs/configuration.html)

# php - php中不支持的字符

> ID：10382016
> 
> 赞同：1
> 
> 时间：2012-04-30T10:18:34.787
> 
> 标签：php

我在 php 中插入数据时遇到问题。它有时会创建一个字符，例如带有问号的黑色菱形。 ![在此处输入图像描述](../Images/38ca72e5abb3d717d36e04e67b3757de.png)

你知道我该如何解决吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T10:23:50.177

您应该在任何地方都有相同的编码并定义它。

像这样定义字符集；

```
<meta charset="UTF-8" /> 
```

并在标题中；

```
header('Content-Type: text/html; charset=utf-8'); 
```

你也可以用[html characters](http://ascii.cl/htmlcodes.htm)写你的字符，但是定义字符集总是好的。

* * *

如果您的数据库中有`ISO-8859-1`( `latin1`) 数据，并且站点的其余部分在`UTF-8`. 然后如上所述定义字符集标签并使用函数[utf8_encode()](http://php.net/manual/en/function.utf8-encode.php)为字符串提供正确的编码。还有一个反向函数叫做[utf8_decode()](http://www.php.net/manual/en/function.utf8-decode.php)

# html-email - 如何禁用圆形立方体中的短信发送？

> ID：10382019
> 
> 赞同：0
> 
> 时间：2012-04-30T10:18:49.060
> 
> 标签：html-email, roundcube

我正在做一个圆形立方体项目，在我的项目中，不允许用户发送短信。他只能发送 HTML 电子邮件。谁能告诉我在哪里可以找到实现此功能的设置/插件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T12:22:32.173

登录 ROundcube 并转到设置 -> 撰写邮件。

您可以在此处选择 HTML 首选项

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-23T15:01:20.290

在roundcube config.inc.php 中，有一个名为“dont_override”的设置变量。您必须将一组设置传递给用户无法覆盖的此变量。要禁用纯文本消息设置，您只需将“htmleditor”配置设置作为数组元素传递给此变量，如下所示。

$rcmail_config['dont_override'] = array('htmleditor');

# android - 设置 RelativeLayout 子项以填充未使用的空间

> ID：10382023
> 
> 赞同：17
> 
> 时间：2012-04-30T10:19:13.740
> 
> 标签：android, android-layout, android-relativelayout

我有这个布局：

```
<RelativeLayout
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <ImageView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:src="@drawable/stat_brightness_off"
        android:layout_toLeftOf="@id/brightnessSeekBar" />

    <SeekBar
        android:id="@+id/brightnessSeekBar"
        android:layout_width="wrap_content"
        android:layout_centerHorizontal="true"
        android:layout_height="wrap_content" />

    <ImageView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_toRightOf="@id/brightnessSeekBar"
        android:src="@drawable/stat_brightness_on" />
</RelativeLayout> 
```

我需要`SeekBar`填充所有未使用的水平空间`ImageView`（它们大约为 64*64 像素）。我该怎么办？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-04-30T10:31:53.750

使用下面提供的代码：

```
<RelativeLayout 
    android:layout_width="match_parent"
    android:layout_height="match_parent">

    <ImageView
        android:id="@+id/img1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:src="@drawable/stat_brightness_on" />

    <SeekBar
        android:id="@+id/brightnessSeekBar"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:layout_toLeftOf="@id/img2"
        android:layout_toRightOf="@id/img1" />

    <ImageView
        android:id="@+id/img2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:src="@drawable/stat_brightness_on" />

</RelativeLayout> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-30T10:27:51.573

设置 SeekBar 布局：

ImageView1 的布局右侧，ImageView2 的左侧布局，然后设置宽度以填充父级。

我相信这就是你要问的。您可能还希望将 ImageView1 父级左对齐，ImageView2 父级右对齐。

# mysql-management - 如果数据不存在则复制数据

> ID：10382024
> 
> 赞同：0
> 
> 时间：2012-04-30T10:19:15.890
> 
> 标签：mysql-management

我有一个包含许多表的数据库。一个表有 2 列数据，第 1 列包含“电子邮件地址”，第 2 列包含值为 1 的“newsletterscubscriber”。

我有另一个表（最终表）具有相同的列，该表已经填充了数据。我想让数据库读取（最终表）然后检查第一个表是否有任何差异。然后，我希望它在包含两列数据的最终表格中添加任何差异。顺便说一句，这实际上来自 oscommerce 数据库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T11:15:44.277

```
SELECT `table1`.`col1tbl1`, `table1`.`col2tbl1`, `table2`.`col1tbl2`, `table2`.`col2tbl2` FROM `table1`, `table2` WHERE `col1tbl1` != `col1tbl2` AND `col2tbl1` != `col2tbl2`

table1 = final table
table2 = first table
col1tbl1 = name of first column for table1
col2tlb1 = name of second column for table1
col1tbl2 = name of first column for table2
col2tbl2 = name of second column for table2 
```

上面的 SQL 会将 table1 中的 2 列与 table2 中的 2 列进行比较。如果没有匹配，它应该显示 table1 中所有不匹配的记录。然后，您可以获取该数据，将其保存到一个数组中并使用递归脚本将数据插入到 table2 中。

注意：我整理了表格，因为您没有提及任何内容。另外，我显然无法测试它，但试一试。

# python-3.x - QComboBox 中的 QVariant（Python 2 与 Python 3）

> ID：10382025
> 
> 赞同：4
> 
> 时间：2012-04-30T10:19:22.803
> 
> 标签：python-3.x, pyqt4

我有一些代码（见下文）在 Python 2 下按预期工作，但是当我在 Python 3 下执行它时，它会引发异常：

```
Traceback (most recent call last):
File "./test3.py", line 23, in <module>
programsCombo­Box.addItem("Jan Novak",QtCore­.QVariant("661107/39­39"))
TypeError: PyQt4.QtCore.QVa­riant represents a mapped type and cannot be instantiated 
```

为什么会这样，有什么解决方法吗？

```
#!/usr/bin/env python
# -*- coding: utf-8 -*-
from PyQt4 import QtCore, QtGui
import sys

def activated(i):
    data=programsComboBox.itemData(i)
    label.setText("Rodne cislo: "+data.toString())

app = QtGui.QApplication(sys.argv)
mainWindow = QtGui.QMainWindow()
mainWindow.setWindowTitle("QVariant")
mainWidget=QtGui.QWidget(mainWindow)
mainWindow.setCentralWidget(mainWidget)
layout=QtGui.QVBoxLayout(mainWidget)

label=QtGui.QLabel("Rodne cislo: ",mainWidget)

programsComboBox=QtGui.QComboBox(mainWidget)
programsComboBox.addItem("Jan Novak",QtCore.QVariant("661107/3939"))
programsComboBox.addItem("Jakub Dvorak",QtCore.QVariant("750802/1278"))

layout.addWidget(programsComboBox)
layout.addWidget(label)

app.connect(programsComboBox,QtCore.SIGNAL("activated (int)"),activated)
mainWindow.show()
sys.exit(app.exec_()) 
```

**更新**：对于这个简单的代码，在第一个 PyQt4 导入之前添加这些就足够了

```
import sip
sip.setapi('QVariant', 1) 
```

但是在真正的代码中我不能这样做（在不同的地方`QVariant`需要api2）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T11:28:01.867

有什么理由必须使用 QVariant 吗？

如果您将项目添加为字符串：

```
programsComboBox.addItem("Jan Novak", "661107/3939") 
```

那么代码应该在 Python 2 和 3 中工作。

我自己不使用 Python 3，因此无法对此进行测试，但修改在 Python 2.7 上运行良好。

**编辑：**

我很好奇，所以我在使用 Python 3.2 的 VM 中对此进行了测试。在 Python 3 中，它似乎`.itemData()`会返回一个字符串对象而不是 QVariant。

除了在上面添加项目时使用字符串之外，您还可以将`activated`函数修改为：

```
def activated(i):
    data=programsComboBox.itemData(i)
    if not isinstance(data, str):
        data = data.toString()
    label.setText("Rodne cislo: " +data) 
```

以便它可以与 Python 2 和 3 一起使用。如果返回的`.itemData()`不是字符串，则该函数将使用`.toString()`.

我不确定这是否是正确的方法，但它对我有用。我仍然需要正确研究整个 2 到 3 移植的事情。

# android - 广播接收器问题，注册一个广播接收器

> ID：10382026
> 
> 赞同：1
> 
> 时间：2012-04-30T10:19:23.063
> 
> 标签：android, broadcastreceiver

我的广播接收器有问题

我想在 wifi 扫描后执行广播接收器，如果我在此等待中注册广播接收器，它可以工作，但仅在应用程序运行时：

```
registerReceiver(receiver, new IntentFilter(WifiManager.SCAN_RESULTS_AVAILABLE_ACTION)); 
```

我想在 Android Manifest 中注册 de Broadcast Receiver，如下所示：

```
<receiver android:name=".WiFiScanReceiver"  android:enabled="true">
        <intent-filter>
            <action android:name="android.net.wifi.WifiManager.SCAN_RESULTS_AVAILABLE_ACTION"/>
        </intent-filter> 
    </receiver> 
```

但是这种方式是行不通的，请帮帮我！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T11:24:10.783

is的字符串表示形式`SCAN_RESULTS_AVAILABLE`，`android.net.wifi.SCAN_RESULTS`如[文档](http://developer.android.com/reference/android/net/wifi/WifiManager.html#SCAN_RESULTS_AVAILABLE_ACTION)中所示。那不是你的`<action>`元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T12:21:00.093

```
<receiver android:name="com.madhu.wifitest.WiFiScanReceiver" android:enabled="true">
<intent-filter>
    <action android:name="android.net.wifi.SCAN_RESULTS"></action>
</intent-filter>

 /*add these permissions in the manifest*/
<uses-permission android:name="android.permission.ACCESS_WIFI_STATE" />
<uses-permission android:name="android.permission.CHANGE_WIFI_STATE" /> 
```

# android - 在不完成子活动的情况下将结果发送回父活动

> ID：10382034
> 
> 赞同：0
> 
> 时间：2012-04-30T10:20:11.497
> 
> 标签：android, android-intent, android-service, android-activity

我正在开发两个应用程序。第一个有一个按钮，当按下它时会启动一个带有一些数据的隐式意图。意图由`inten-filter`注册在其他应用程序的主要活动上捕获。

我需要的是子活动立即将一些数据发送回父（在后台）而不完成，并且必须留在前台。

我试图通过`startActtivityForResult()`and`OnActivityResult()`方式来实现这一点，但没有成功。实际上，此方法仅在子活动完成时才有效。

我正在寻找其他解决方案，例如服务……但我是新手，我至少需要走上正确的道路。

提前致谢。

我给你一些进一步的细节：

第一个活动（父）启动以下意图：

```
Intent intent = new Intent();           
intent.setAction("xx.xx.xxxxx");
intent.putExtra("Data1", data1);
intent.putExtra("Data2", data2);
...             
startActivityForResult(intent,MANAGE_CODE); 
```

并且 OnActivityResult() 方法是

```
public void onActivityResult(int requestCode, int resultCode, Intent data)
{                
    switch (requestCode) {
    case MANAGE_CODE:
        switch (resultCode) {
        case 0: 
                ...
                break;
        }
    break;
    }
} 
```

子活动执行此操作：

```
 Intent caller = getIntent();
    if ( caller.getAction().equals("xx.xx.xxxxx") ) {
              Intent intent = new Intent();
      intent.putExtra("data", "12345");
      // Set result 
          getParent().setResult(0, intent);
} 
```

我省略了实现细节...如果我不关闭子活动（例如使用 finish() 方法），我看不到 setResult() 调用有效

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T11:46:44.697

运行一个服务并让它广播一个带有你需要的额外内容的意图，然后在父级的 BroadcastReceiver onReceive 中检索它们。

例子：

```
public class serviceD extends Service{
    private Intent intent_broadcast;
static final String BROADCAST_ACTION = "com.example.ServicesAndBroadcastIntent";

    public void onCreate(){
        super.OnCreate();
        intent_broadcast = new Intent(BROADCAST_ACTION);
    }

    @Override
    public int onStartCommand(Intent intent,int flags,int startId){
        intent_broadcast.putExtra("EXTRA_MSG","data");
        sendBroadcast(intent_broadcast);
        stopSelf();
        return startId;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-07T05:17:35.257

据我了解，您希望在更改子活动时将更改反映在父活动中。对于该任务关联性可能会帮助您检查以下链接：查找任务关联性

1) [http://developer.android.com/guide/components/tasks-and-back-stack.html](http://developer.android.com/guide/components/tasks-and-back-stack.html) 2) [http://www.slideshare.net/RanNachmany/manipulating-android-tasks-and-back-stack](http://www.slideshare.net/RanNachmany/manipulating-android-tasks-and-back-stack)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-30T11:29:25.313

请参考以下代码并与它们进行比较...

int SECOND_ACTIVITY = 2;

一项活动

```
Intent intent = new Intent();

intent.setClassName(A.this , B.class);

intent.setClassName(A.this , B.class);

intent.setClassName(A.this, B.class);

startActivityForResult(intent, SECOND_ACTIVITY);
...

@Override
protected void onActivityResult(int requestCode, int resultCode, Intent intent) {
// TODO Auto-generated method stub
super.onActivityResult(requestCode, resultCode, intent);
Bundle extraBundle;
if(requestCode == SECOND_ACTIVITY){

Log.d("SECOND_ACTIVITY_LOG","THIS CLOSE !!");

if(resultCode == RESULT_OK){
extraBundle = intent.getExtras();
String str = extraBundle.getString("key1");
Toast.makeText(this, str, Toast.LENGTH_SHORT).show();
    }
  }
 }

}

B activity

intent = new Intent();
intent.putExtras(extraBundle);
this.setResult(RESULT_OK, intent);//if return RESULT_OK , then A can receive. 
```

# ajax - 行即使在被点击后仍然是可点击的

> ID：10382036
> 
> 赞同：0
> 
> 时间：2012-04-30T10:20:19.167
> 
> 标签：ajax, asp.net-mvc-3

我在 Jquery/Ajax 中创建了一个可点击的行，如下所示：

```
 <script type="text/javascript"> 
        $(function () { 
            $('tbody tr').live('hover', function () { 
                $(this).toggleClass('clickable'); 
            }).live('click', function () { 
                $.ajax( 
                            { 
                                type: "POST", 
                                url: "/Projects/AllProjectsHeaderSR", 
                                data:{ projectCode: $(this).find('td:eq(0)').text(), 
                                        l_frompage: "SearchProjectsHeaderResultSR" 
                                     }, 
                                success: function (data) { 
                                        $('#container').html(data);  
                                                  $(this).unbind('click');  

                                } 
                            }); 
            }); 
        }); 
    </script> 
```

当用户单击一行时，通过 Ajax 调用 HTTPPost 方法。然后，此方法调用 PartialView。

问题是这个显示数据表的 PartialView 页面仍然可以点击

渲染局部视图时，如何将其设置回不可点击？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T10:55:15.747

请注意，与 click 事件链接的悬停函数绑定到 html 中的任何 tr。`$('tbody tr').live('hover', function ()...`. 您可以将`id`or`class`放到您希望事件触发的特定位置，以便其他 tr 不会受到影响

这是一个[小提琴](http://jsfiddle.net/bYyVS/1/)示例

我希望您的带有`#container`id 的 PartialView 不在事件发生的表中。

# ruby-on-rails - 如何在不通过观察者加载模型的情况下启动生成器

> ID：10382039
> 
> 赞同：2
> 
> 时间：2012-04-30T10:20:25.080
> 
> 标签：ruby-on-rails, generator, rails-engines, observers

给定一个引擎和一个应用程序，我有一个引擎生成器，可以为我的应用程序创建 yaml 设置文件。这些设置的一部分用于定义一些模型验证。一切都很好，直到我在模型中添加（并注册）了一个观察者。

现在，当我在新应用程序上调用任何生成器时，我的模型由观察者加载。所以它给了我一个模型验证错误，因为它希望读取一个尚未创建的 yaml 文件。

我在启动生成器时寻找禁用观察者的解决方案，但我没有找到任何东西。

有没有办法解决这个问题？

# node.js - Mongoose：填充方法无法正常工作

> ID：10382041
> 
> 赞同：0
> 
> 时间：2012-04-30T10:20:30.863
> 
> 标签：node.js, mongodb, mongoose

我可以在这里使用一些帮助，我无法弄清楚为什么填充方法不能按预期工作。我想模拟一些里面有人的“房间”。

```
var PersonSchema = new Schema({
    _id   : Schema.ObjectId,
    name  : String,
});
var Person = mongoose.model('Person', PersonSchema, 'Person');

var RoomSchema = new Schema({
      _id    : Schema.ObjectId, 
      name : String,
      People : [{ type: Schema.ObjectId, ref: 'Person' }],
});
var Room = mongoose.model('Room', RoomSchema, 'Room'); 
```

所以，我有一个包含一个条目的 Person 集合：

```
{ 
"name" : "person1", 
"_id" : ObjectId("4f9e5bb68bcd69fb0c000002") 
} 
```

和一个包含一个条目的 Room 集合：

```
{ 
"_id" : ObjectId("4f9e5bb68bcd69fb0c000001"), 
"name" : "room1", 
"People" : [ ObjectId("4f9e5bb68bcd69fb0c000002") ] 
} 
```

当我尝试执行此查询时：

```
Room.findOne({ 'name': 'room1' }).populate('People').run(function (err, result) {
  if(err) console.log(err);
  console.log(result);
}); 
```

我得到输出：

```
{ _id: 4f9e5bb68bcd69fb0c000001,
  name: 'room1',
  People: []
} 
```

为什么猫鼬不填充人员字段？我只是不明白可能出了什么问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T15:23:49.960

这个问题是 2.x 版本的 mongoose 中的一个错误。已修复：[https ://github.com/LearnBoost/mongoose/issues/877](https://github.com/LearnBoost/mongoose/issues/877)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T12:05:15.563

因为猫鼬不会“加入”数据（我认为您正在尝试这样做）。

你想做的是这样的（注意这是评论和博文）

`Schema`

```
var Comments = new Schema({
    title     : String
  , body      : String
  , date      : Date
});

var BlogPost = new Schema({
    author    : ObjectId
  , title     : String
  , body      : String
  , buf       : Buffer
  , date      : Date
  , comments  : [Comments]
  , meta      : {
      votes : Number
    , favs  : Number
  }
}); 
```

然后创建一个博客模型并设置评论（在你的例子中是房间里的人）

```
// retrieve my model
var BlogPost = mongoose.model('BlogPost');

// create a blog post
var post = new BlogPost();

// create a comment
post.comments.push({ title: 'My comment' });

post.save(function (err) {
  if (!err) console.log('Success!');
}); 
```

如果您不想嵌入文档，则可以从该回调中进行搜索。例如，这是我从推文作者那里获取用户名的咖啡脚本示例：

```
ModelTweets.find {}, (err, tweetResults) ->
    if tweetResults.length == 0
      res.render 'tweets/index', tweets: 0
    else
      # Get the Author for each tweet
      tweetResults.forEach (tweetInfo) ->
        count++
        ModelUser.findOne {'_id': tweetInfo.author}, (err, userInfo) ->
          tweets.push {id: tweetInfo._id, tweet: tweetInfo.tweet, created_at: tweetInfo.created_at, author: userInfo.username}

        if count == tweetResults.length
          res.render 'tweets/index', {tweets: tweets || {}} 
```

这应该让你走上正确的轨道:)

# active-directory - 对大型数据库进行查询时的 ActiveDirectory 性能

> ID：10382056
> 
> 赞同：0
> 
> 时间：2012-04-30T10:21:50.373
> 
> 标签：active-directory

AD 服务器传递以下 LDAP 查询的搜索结果有多难？

```
(&(objectclass=user)(objectcategory=person)(msRTCSIP-UserEnabled=TRUE)) 
```

比方说 10 万次点击？25万？

另一种方法是对每个更新进行运行查询，使用具有大量通配符的查询，从每秒几个到每秒 500+ 不等。我认为通配符搜索对数据库查找的资源要求很高。

这个想法是，如果服务器最初进行上述搜索相对容易，当我们启动系统时，我们可以将其他查询减少到频率低得多的查询。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T22:24:52.997

上面的查询将使用许多索引。您必须检查该最终属性是否已编入索引。对于 Windows 2008 之前的 DC，您应该索引 objectClass。否则默认为索引。

您可以使用带有 -stats 标志的 adfind (www.joeware.net) 等工具来获取查询的性能数据。

# c# - 使用 Count 时出现空引用异常

> ID：10382062
> 
> 赞同：2
> 
> 时间：2012-04-30T10:22:07.097
> 
> 标签：c#, linq, linq-to-sql, count

我有一种方法来计算项目，但遇到了一个愚蠢的例外：

```
 internal static bool IsCompanyInList(int companyId, int favoritecompanyId)
        {
            var result = _context.FavouriteCompanies.Count(c => c.CompanyId == companyId && c.FavouriteCompanyId == favoritecompanyId); // getting exception here
            if ( result >0)
                return true;
            return false;
        } 
```

另外，还有一条线索，我的桌子是空的。根本没有行。如何处理这种情况。我也尝试过 Where 子句。见下文：

```
 var result = _context.FavouriteCompanies.Where(criteria_here); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T10:27:23.853

FavouriteCompanies 为空。你可以这样做：

```
internal static bool IsCompanyInList(int companyId, int favoritecompanyId)
            {
                var result = _context.FavouriteCompanies;
                if (result!=null)
                {
                    return result.Any(c => c.CompanyId == companyId && c.FavouriteCompanyId == favoritecompanyId);
                } 

                return false;
            } 
```

在那个解决方案`if (result>0)`中是多余的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T10:27:28.517

好吧，如果您可以包含堆栈，这会有所帮助，但我认为 FavouriteCompanies 集合中有一个 null （或者 _context 变量可能为 null - 如果您将许多方法与“。”链接在一起，您会遇到火车残骸很难说什么是空的）。您可以通过删除空值来防御性地解决这个问题：

```
var result = _context.FavouriteCompanies.Where( c => c != null ).Count(...) 
```

although to be honest it would be much better to find out where a null has been inserted into FavourieCompanies and stop it there.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-30T10:33:13.387

The error could be anywhere you attempt to access a member.

```
var result = _context.FavouriteCompanies.Count(c => c.CompanyId == companyId && c.FavouriteCompanyId == favoritecompanyId); 
```

is _context null? is _context.FavoriteCompanies null? does FavoriteCompanies contain a record in which CompanyId or FavouriteCompanyId is null?

Since this is Linq2Sql, you can ask c.FavouriteCompanyId.Isnull() within the count clause before accessing the member itself.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-11-19T07:46:55.090

For me, one of **string (or nullable column)** value was null.

```
 var result = _context.FavouriteCompanies.Count(c => c.CompanyId != null && c.CompanyId == companyId && c.FavouriteCompanyId != null && c.FavouriteCompanyId == favoritecompanyId); 
```

# xcode4.3 - 缺少文件的所有者项目

> ID：10382063
> 
> 赞同：1
> 
> 时间：2012-04-30T10:22:07.997
> 
> 标签：xcode4.3, file-ownership

我试图了解如何在键盘上显示我的文本字段并做一个教程。这是比我的 SDK 5.1 更旧的版本。现在我尝试这样做：“在 Interface Builder 中，右键单击每个 Text Field 视图并将委托插座连接到 File's Owner 项。” 我找不到文件的所有者项目。最好的问候约翰

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T21:46:11.917

可能需要更多信息 - 我可能会回答错误的问题......但假设您使用的是 Xcode 4.3 并注意到与我相同的问题：

*   内置界面生成器中的 NIB (.xib) 文件将具有文件的所有者
*   故事板 (.storyboard) 文件不会

下面是它如何查找带有标准 appDelegate.m UIApplication 对象的 .xib：http: [//imgur.com/NGAAu.png](https://imgur.com/NGAAu.png)

在 appDelegate.h 中定义了以下属性以允许连接 UIButton。

```
@property (weak, nonatomic) IBOutlet UIButton *Test; 
```

如果您还没有，您可能应该查看故事板。以下答案很好地说明了在使用情节提要时如何将插座和操作连接到 ViewController。

[文件所有者图标](https://stackoverflow.com/questions/9807492/files-owner-icon)

# objective-c - 触摸详细信息披露指示器时 Mapview 注释崩溃

> ID：10382064
> 
> 赞同：1
> 
> 时间：2012-04-30T10:22:08.713
> 
> 标签：objective-c, ios, mapkit, mkannotation

我有一个带有详细信息披露指示器的 mapView，当被触摸时需要将 MoreDetailViewController 放在堆栈上。目前，它因发送到实例错误的无法识别的选择器而崩溃。

我试图弄清楚如何`- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender`从披露指标新闻中调用此方法。

这是带有披露指示符的地图注释代码：

```
- (MKAnnotationView *)mapView:(MKMapView *)map viewForAnnotation:(id <MKAnnotation>)annotation
{
    MKPinAnnotationView *mapPin = nil;
    if(annotation != map.userLocation) 
    {
        static NSString *defaultPinID = @"defaultPin";
        mapPin = (MKPinAnnotationView *)[map dequeueReusableAnnotationViewWithIdentifier:defaultPinID];
        if (mapPin == nil )
        {
            mapPin = [[MKPinAnnotationView alloc] initWithAnnotation:annotation 
                                                      reuseIdentifier:defaultPinID];
            mapPin.canShowCallout = YES;

            UIButton *disclosureButton = [UIButton buttonWithType:UIButtonTypeDetailDisclosure];
            [disclosureButton addTarget:self action:@selector(prepareForSegue:) forControlEvents:UIControlEventTouchUpInside];

            mapPin.rightCalloutAccessoryView = disclosureButton;

        }
        else
            mapPin.annotation = annotation;

    }
    return mapPin;
} 
```

这是应该调用的方法：

```
// Do some customisation of our new view when a table item has been selected
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    // Make sure we're referring to the correct segue
    if ([[segue identifier] isEqualToString:@"ShowMoreInfo"]) {

        // Get reference to the destination view controller
        MoreDetailViewController *mdvc = [segue destinationViewController];

        [mdvc setSelectedItemName:[NSString stringWithFormat:@"%@", placeName.text]];
        [mdvc setSelectedItemAddress:[NSString stringWithFormat:@"%@", placeFormattedAddress.text]];

        [mdvc setSelectedItemWeb:[NSString stringWithFormat:@"%@", placeWebsite.text]];
        [mdvc setSelectedItemRating:[NSString stringWithFormat:@"%@", placeRating.text]];
  //      [mdvc setSelectedItemDistance:[NSString stringWithFormat:@"%@", placeDistance.text]];

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T16:26:51.417

prepareForSegue: 和 prepareForSegue:sender: 不是同一种方法。您的 prepareForSegue:sender: 方法中的 placeName 和朋友也是未知的（或者是 ivars）。

我会彻底改变 prepareForSegue:sender: 方法并将其更改为

```
- (void)showMoreInfo:(id)sender{
        // Get reference to the destination view controller
        MoreDetailViewController *mdvc = [segue destinationViewController];

//define and set the placename and other variables

        [mdvc setSelectedItemName:[NSString stringWithFormat:@"%@", placeName.text]];
        [mdvc setSelectedItemAddress:[NSString stringWithFormat:@"%@", placeFormattedAddress.text]];

        [mdvc setSelectedItemWeb:[NSString stringWithFormat:@"%@", placeWebsite.text]];
        [mdvc setSelectedItemRating:[NSString stringWithFormat:@"%@", placeRating.text]];
  //      [mdvc setSelectedItemDistance:[NSString stringWithFormat:@"%@", placeDistance.text]];

    }
} 
```

并以同样的方式调用它，只是将调用的选择器的名称更改为

```
[disclosureButton addTarget:self action:@selector(showMoreInfo:) forControlEvents:UIControlEventTouchUpInside]; 
```

如果你喜欢注释和地图，你不应该使用更适合简单导航的 segues。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T12:52:40.967

您在那里有两种详细视图控制器，一种`MoreDetailViewController`在您的代码中，一种`DetailViewController`在您的错误中。你有可能把它们混在一起吗？

# css - 在@font-face CSS 规则中，'local' 值（对于'src' 属性）不再起作用了吗？

> ID：10382069
> 
> 赞同：2
> 
> 时间：2012-04-30T10:22:29.110
> 
> 标签：css, font-face

**示例 CSS：**

```
@font-face {
  font-family: 'Droid Serif';
  font-weight: normal;
  font-style: italic;
  src: url('DroidSerif-Italic-webfont.eot');
  src: url('DroidSerif-Italic-webfont.eot?#iefix') format('embedded-opentype'),
       local('Droid Serif'), local('DroidSerifItalic'),
       url('DroidSerif-Italic-webfont.woff') format('woff'),
       url('DroidSerif-Italic-webfont.ttf') format('truetype'),
       url('DroidSerif-Italic-webfont.svg#DroidSerifItalic') format('svg');
}

h1 {
  font-family:  'Droid Serif';
  font-weight: normal;
  font-style: italic;
} 
```

**示例 HTML：**

```
<div id="content">
    <h1>This is a big, big title</h1>
</div> 
```

Droid Serif 是当今 Linux 系统上非常常见的字体（至少它在我使用的 Ubuntu 上可用）。

正如您在上面看到的，我已经明确定义`local('Droid Serif'), local('DroidSerifItalic')`了 ，但是浏览器（在我的例子中是 Chromium）只是下载字体文件（WOFF 格式），而不是简单地使用我电脑上可用的字体。

知道是什么原因造成的吗？我做错了什么，还是浏览器不再考虑“本地”值？

***编辑：**如果您想知道，`DroidSerifItalic`如果您是从 Font Squirrel 下载的 Droid Serif 字体的后脚本名称（至少我已经读过）。*

***EDIT-2：**以防万一还不够清楚，我在 Ubuntu (v12.04) 上使用 Chromium 网络浏览器。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T11:31:32.937

我查看了谷歌的实现，他们使用以下语法/名称：

```
src: local('Droid Serif Italic'), local('DroidSerif-Italic') 
```

我想如果你使用这个名字它会起作用的！看起来你只是把后记的名字弄错了。

来源： http://fonts.googleapis.com/css?family=Droid+Serif: [400italic](http://fonts.googleapis.com/css?family=Droid+Serif:400italic)

# javascript - 位置不能正常工作

> ID：10382073
> 
> 赞同：0
> 
> 时间：2012-04-30T10:22:40.147
> 
> 标签：javascript, jquery, html

我需要在桌子的左上角点 0:0。

现在鼠标的位置是从首页开始测量的

```
 <h2>
        TestPosition</h2>
    <table cellpadding="0" id="target" cellspacing="0" width="602" height="500" style="float: left;
        margin: 0px; padding: 0px; position: relative; background: url(/content/games/kamikaze2/back.jpg) no-repeat 0 0;">
    </table>
    <div id="log">
    </div>
    <script type="text/javascript">
        $("#target").mousemove(function (event) {
            var thisPosX = $(this).position().left;
            var thisPosY = $(this).position().top;

            var relX = (event.clientX - thisPosX);
            var relY = (event.clientY - thisPosY);

            var msg = "Handler for .mousemove() called at ";
            msg += relX + ", " + relY;
            $("#log").html("<div>" + msg + "</div>");
        });
    </script> 
```

![在此处输入图像描述](../Images/26c2bebc40ca278e3655fbb599bb8e2c.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T10:28:30.847

不。

```
function localMouse(event, element)
{
    var offset = $(element).offset();
    return [event.pageX - offset.left, event.pageY - offset.top];
} 
```

# php - Symfony2 - 使用表单类时如何设置和获取选项？

> ID：10382075
> 
> 赞同：7
> 
> 时间：2012-04-30T10:22:55.760
> 
> 标签：php, symfony

我正在使用表单类在我的项目中构建各种表单。

在 Entity Type 文件中，对于 buildForm 函数，有一个“array $options”的辅助参数（这在官方 Symfony 2 文档中显示，但从未提及过！）

我已经将一个数组输入到控制器中的 createForm 函数中，但现在我完全不知道如何检索存储的值？

```
$form = $this->createForm(new ProductType(array(), array('id' => '2')), $product); 
```

关于获取选项，我发现的唯一一件事是使用 getOption() 函数，但这在 Symfony 2 中不存在（我发现的帖子来自 2010 年）。

我尝试使用：

```
$id = $options['id']; 
```

但是当我尝试在任何地方使用 $id 时，我得到了错误：

> 注意：未定义索引：id

是什么赋予了？

如何从 $options 数组中检索我的值？我什至一开始就正确设置它们吗？

编辑 - 更多代码：

表单类

```
<?php

namespace DEMO\DemoBundle\Form\Product;

use Doctrine\ORM\EntityRepository;
use Symfony\Component\Form\AbstractType;
use Symfony\Component\Form\FormBuilder;

class ProductType extends AbstractType
{
    public function buildForm(FormBuilder $builder, array $options)
    {
        $builder
            ->add('name')
            ->add('slug')
            ->add('reference')
            ->add('description')
            ->add('active_from')
            ->add('active_till')
            ->add('is_active')
            ->add('category', 'entity', array(
                'class' => 'DEMO\DemoBundle\Entity\Product\ProductCategory',
                'query_builder' => function(EntityRepository $er) {
                    return $er->createQueryBuilder('u')
                        ->where('u.section = :id')
                        ->setParameter('id', ***ID VARIABLE NEEDS TO GO HERE***)
                        ->orderBy('u.root', 'ASC')
                        ->addOrderBy('u.lft', 'ASC');
                },
                'empty_value' => 'Choose an option',
                'property' => 'indentedName',
            ));
    }

    public function getDefaultOptions()
    {
        return array(
            'data_class' => 'DEMO\DemoBundle\Entity\Product\Product'
        );
    }

    public function getName()
    {
        return 'demo_demobundle_product_type';
    }
} 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-30T14:32:20.477

我认为您一开始就没有正确设置它们。你应该把它们作为第三个参数`createForm()`

编辑：这是您的表单类的外观：

```
<?php
namespace DEMO\DemoBundle\Form\Product;

use Doctrine\ORM\EntityRepository;
use Symfony\Component\Form\AbstractType;
use Symfony\Component\Form\FormBuilder;

class ProductType extends AbstractType
{
    public function buildForm(FormBuilder $builder, array $options)
    {
        $builder
            ->add('name')
            ->add('slug')
            ->add('reference')
            ->add('description')
            ->add('active_from')
            ->add('active_till')
            ->add('is_active')
            ->add('category', 'entity', array(
                'class' => 'DEMO\DemoBundle\Entity\Product\ProductCategory',
                'query_builder' => function(EntityRepository $er) use($options) {
                    return $er->createQueryBuilder('u')
                        ->where('u.section = :id')
                        ->setParameter('id', $options['id'])
                        ->orderBy('u.root', 'ASC')
                        ->addOrderBy('u.lft', 'ASC');
                },
                'empty_value' => 'Choose an option',
                'property' => 'indentedName',
            ));
    }

    public function getDefaultOptions()
    {
        return array(
            'data_class' => 'DEMO\DemoBundle\Entity\Product\Product',
            'id'         => null
        );
    }

    public function getName()
    {
        return 'demo_demobundle_product_type';
    }
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-12-10T18:58:24.190

让我告诉你什么对我有用

在控制器中：

```
$form = $this->createForm(new UsersType(), $entity, array(
    'attr' => array('locationId' => $currentLocationId))); 
```

在表单类型中：

```
->add('location', 'entity', array(
        'class' => 'Ro\RoinventBundle\Entity\Locations',
         'query_builder' => function (\Doctrine\ORM\EntityRepository $er) use ($options)
        {
            if (isset($options['attr']['locationId']) && ($options['attr']['locationId'] != NULL))
            {
                return $er->createQueryBuilder('Locations')
                    ->where('Locations.id = :param')
                    ->setParameter('param', $options['attr']['locationId']);
            }
            //else do what you want
},
)); 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-11-26T10:31:38.257

显然它不再是 with `getDefaultOptions()`，而是 with `setDefaultOptions()`。

否则它说

> 选项“my_custom_option”不存在。已知选项有：“action”、“attr”、“auto_initialize”、...

所以，对我来说，我必须像这样更新 setDefaultOptions ：

```
public function setDefaultOptions(OptionsResolverInterface $resolver)
{
    $resolver->setDefaults(array('my_custom_option' => false));
    // Others if needed, like in the documentation for : 'data_class' => 'VENDOR\Bundle\Entity\MyEntity', 'csrf_protection' => true
} 
```

然后你可以在`buildForm`方法中检索它

```
public function buildForm(FormBuilderInterface $builder, array $options)
{
    $myCustomOption = $options['my_custom_option'];
} 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-08-02T02:45:49.697

好吧，根据这个[Google Groups](https://groups.google.com/forum/?fromgroups#!topic/symfony2/z4RvxhuktyE)

“greg0ire”是对的，事实上我已经尝试过并且效果很好！！！。你说“我真的不想去“破解”任何核心结构”但你最终没有使用最好的方法。事实上，从我的角度来看，你最终做了你没有做的事情想要做。

所以最后你应该这样做：

在表单类型

```
public function buildForm(FormBuilder $builder, array $options)
{
    $builder
        ->add('name')
        ->add('slug')
        ->add('reference')
        ->add('description')
        ->add('active_from')
        ->add('active_till')
        ->add('is_active')
        ->add('category', 'entity', array(
            'class' => 'DEMO\DemoBundle\Entity\Product\ProductCategory',
            'query_builder' => function(EntityRepository $er) {
                return $er->createQueryBuilder('u')
                    ->where('u.section = :id')
                    ->setParameter('id', $options['id'])
                    ->orderBy('u.root', 'ASC')
                    ->addOrderBy('u.lft', 'ASC');
            },
            'empty_value' => 'Choose an option',
            'property' => 'indentedName',
        ));
}

public function getDefaultOptions()
{
    return array(
        'data_class' => 'DEMO\DemoBundle\Entity\Product\Product'
        'id' => null
    );
} 
```

并且在控制器中

```
$form = $this->createForm(new ProductType(), $product, array('id' => $id )); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-30T15:28:13.833

通过表单类`__construct`方法传递选项，如下所示：

```
use Doctrine\ORM\EntityRepository;
use Symfony\Component\Form\AbstractType;
use Symfony\Component\Form\FormBuilder;

class ProductType extends AbstractType
{

    private $options = array();
    public function buildForm(FormBuilder $builder, array $options)
    {
        $builder
            ->add('name')
            ->add('slug')
            ->add('reference')
            ->add('description')
            ->add('active_from')
            ->add('active_till')
            ->add('is_active')
            ->add('category', 'entity', array(
                'class' => 'DEMO\DemoBundle\Entity\Product\ProductCategory',
                'query_builder' => function(EntityRepository $er) {
                    return $er->createQueryBuilder('u')
                        ->where('u.section = :id')
                        ->setParameter('id', $this->options['id'])
                        ->orderBy('u.root', 'ASC')
                        ->addOrderBy('u.lft', 'ASC');
                },
                'empty_value' => 'Choose an option',
                'property' => 'indentedName',
            ));
    }

    public function getDefaultOptions()
    {
        return array(
            'data_class' => 'DEMO\DemoBundle\Entity\Product\Product'
        );
    }

    public function getName()
    {
        return 'demo_demobundle_product_type';
    }

    public function __construct(array $options)
    {
        $this->options = $options;
    }
} 
```

然后你可以这样做：

```
new ProductType(array('id'=>1)); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-01T13:06:16.587

好吧，事实证明，Gregoires 的答案非常接近，但是在尝试实际但将变量放入 createQueryBuilder 函数时却给了我和“未定义的变量”错误。

我花了一段时间试图找出原因并找到了问题所在。您必须在“query_builder”选项中为函数添加一个额外的参数，如下所示：

```
'query_builder' => function(EntityRepository $er) use ($options) {
                    return $er->createQueryBuilder('u')
                        ->where('u.section = :id')
                        ->setParameter('id', $options['id'])
                        ->orderBy('u.root', 'ASC')
                        ->addOrderBy('u.lft', 'ASC');
                }, 
```

神奇的设置是“使用（$options）”。这允许您在查询构建器中成功使用 $options['id']。

# javascript - 如何使图像层在 openlayers 中可见

> ID：10382081
> 
> 赞同：1
> 
> 时间：2012-04-30T10:23:38.957
> 
> 标签：javascript, visibility, openlayers, openstreetmap

我正在使用 OpenLayers 和 OpenStreetMaps 来开发一个小型 GIS 应用程序。当 isBaseLayer 设置为 false 时，图像叠加似乎不起作用，这是我的代码：

```
 map = new OpenLayers.Map('map',{
                    eventListeners: {
                        "moveend": mapEvent,
                        "zoomend": mapEvent
                    }
                });
  OpenLayers.Layer.OSM.Toolserver = OpenLayers.Class(OpenLayers.Layer.OSM, {
      initialize: function(name, options) {
          var url = [
              "http://a.www.toolserver.org/tiles/" + name + "/${z}/${x}/${y}.png", 
              "http://b.www.toolserver.org/tiles/" + name + "/${z}/${x}/${y}.png", 
              "http://c.www.toolserver.org/tiles/" + name + "/${z}/${x}/${y}.png",
              "http://d.www.toolserver.org/tiles/" + name + "/${z}/${x}/${y}.png",
              "http://e.www.toolserver.org/tiles/" + name + "/${z}/${x}/${y}.png",
              "http://f.www.toolserver.org/tiles/" + name + "/${z}/${x}/${y}.png"
          ];
          options = OpenLayers.Util.extend({numZoomLevels: 19}, options);
          OpenLayers.Layer.OSM.prototype.initialize.apply(this, [name, url, options]);
      },
      CLASS_NAME: "OpenLayers.Layer.OSM.Toolserver"
  });
  l1=new OpenLayers.Layer.OSM.Toolserver('osm-labels-de', {isBaseLayer: false, visibility: true});
  l2=new OpenLayers.Layer.OSM.Toolserver('osm-no-labels', {isBaseLayer: true, visibility: true});
  var pic = new OpenLayers.Layer.Image(
    'shot',
    'shot.jpg',
    new OpenLayers.Bounds(13.409460,52.5207532,13.469466,52.5407532),    new OpenLayers.Size(100, 100),
    {alwaysInRange:true,isBaseLayer: false,transparent: true, visibility: true,numZoomLevels : 3 }
  );
  map.addLayers([pic,l1,l2]);
  map.setCenter(new OpenLayers.LonLat(13.409460,52.5207532).transform(
          new OpenLayers.Projection("EPSG:4326"),
          map.getProjectionObject()
          ),10); 
```

层“pic”应该出现在层“l1”和“l2”之间（当用 KML-Layer 替换 pic 时，它工作得很好） - 但它无处出现 - 我不确定是坐标问题还是什么别的。

问题可以简化为只有一个基础层“l2”并在其上方覆盖“pic”——我也无法做到这一点。

[我在http://openlayers.org/dev/examples/image-layer.html](http://openlayers.org/dev/examples/image-layer.html)看到了这个例子，但是在那里，图像是基础层 - 当我将 isBaseLayer 设置为 false 时，图像就会消失。我真的不介意将图像设置为基础层，但如果我这样做，则只有图像可见，不再有地图。

在此先感谢您的任何建议！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T08:41:18.617

我很确定问题在于“pic”层的边界缺乏转换。在您的代码中，您使用该`transform`方法设置地图中心。您必须以确切的方式将它用于“图片”层的边界。

请查看我用来在地图上设置图像层的代码：

```
 // World Geodetic System 1984 projection (lon/lat)
    var projWGS84 = new OpenLayers.Projection("EPSG:4326");

    var options = {   
        opacity: 1.0, 
        isBaseLayer: false,
        numZoomLevels: 20 
    };

    var extent = new OpenLayers.Bounds(WEST,SOUTH,EAST,NORTH)
        .transform(projWGS84, map.getProjectionObject());

    var imageLayer = new OpenLayers.Layer.Image('Image Layer',  
        'http://i.i.com.com/cnwk.1d/i/tim/2012/04/19/20120419_Java_Duke_mascot_001_610x418.jpg', 
        extent,
        new OpenLayers.Size(1,1),
        options); 
```

# ruby-on-rails - 在子创建回调中访问父实例

> ID：10382082
> 
> 赞同：1
> 
> 时间：2012-04-30T10:23:41.087
> 
> 标签：ruby-on-rails, ruby-on-rails-3.1, has-many

如果我使用关联创建一个对象：

```
post.comments.create 'blah' 
```

有没有办法在对象创建期间访问父实例？

```
class Comment < ActiveRecord::Base

  def before_save
    # do something with @post
  end

end 
```

我发现父实例在保存之前为零，而在保存后不是同一个实例。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T10:27:25.613

您不能简单地访问 before_save 块中的“post_id”属性吗？或者，如果您在 comment.rb 模型中定义了 'belongs_to :post' 关联，您应该也可以在 before_save 方法中访问 'self.post'。请试一试

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-21T09:42:42.837

使用`post.comments.new`将确保在不保存新评论的情况下分配关联 ID。所以当你保存它时`before_save`应该能够访问父（ ）。`comment.post`即分两个阶段保存：

```
comment = posts.comments.new
...
comment.save! 
```

如果您想要单行创建，您当然可以将其包装在父级（帖子）上的单个创建函数中。

（也有可能最近的 Rails 实际上适用于问题中提出的场景，即只是一个简单的`post.comments.create`但我没有测试过。）

# java - 编写 SQL 查询

> ID：10382083
> 
> 赞同：-2
> 
> 时间：2012-04-30T10:23:44.580
> 
> 标签：java, sql, netbeans

我写了这个查询，但它没有执行

```
ResultSet rs6 = stmt.executeQuery(
    "UPDATE customer SET BALANCE = BALANCE + amount WHERE MOBILENUMBER = '"+phone+"' ");
rs6.next();
System.out.print("your account balance is  " +rs6.getString("BALANCE")); 
```

金额是`double`

它出什么问题了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T10:28:11.643

您应该[`executeUpdate`](http://docs.oracle.com/javase/6/docs/api/java/sql/Statement.html#executeUpdate%28java.lang.String%29)用于更新。其结果将返回更新的行数（不是一些任意更新的列的新值）。为了获得新的余额，您需要执行后续查询。

另外，使用[准备好的语句](http://docs.oracle.com/javase/6/docs/api/java/sql/PreparedStatement.html)，它们真的很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T10:28:13.450

您只是提交了更新命令，而不是选择命令，因此您无法获得余额

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T10:29:28.327

`UPDATE`语句（通常）不返回结果。如果你真的想更新数据，你应该`executeUpdate()`改用。它将返回受更新影响的行数。

如果您确实要检索由 where 条件指定的行，则应使用`SELECT`语句。这将返回一个您可以循环访问的 ResultSet。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-30T10:33:27.710

更新查询不返回结果。您将需要在一个语句中更新并在一秒钟内选择。另外，请使用参数化查询 - 这样会更好

```
PreparedStatement stmt = connection.prepareStatement("UPDATE customer SET BALANCE = BALANCE + ? WHERE MOBILENUMBER = ?");

stmt.setDouble(1, amount);
stmt.setString(2, phone);

stmt.execute();
stmt.close();

stmt = connection.prepareStatement("SELECT BALANCE from customer where MOBILENUMBER = ?");
stmt.setString(1, phone);

ResultSet rs6 = stmt.execute();
rs6.next();
System.out.print("your account balance is " +rs6.getString("BALANCE"));

rs6.close();
stmt.close(); 
```

# ruby-on-rails-3 - cscript.exe 使用双斜线时如何防止 cmd.exe 上网？

> ID：10382086
> 
> 赞同：1
> 
> 时间：2012-04-30T10:23:51.897
> 
> 标签：ruby-on-rails-3, cmd, coffeescript, wsh, execjs

一些背景知识：在我的 Rails 环境中，我使用的是**CoffeeScript**，它使用**ExecJS**，它使用**Windows 脚本主机**来执行 Javascript 文件。

不幸的是，当我的 CoffeeScript 文件被编译时，我遇到了巨大的延迟（> 30 秒）。

使用 Process Explorer 和 Process Monitor 我已经将命令行确定为原因之一。`cscript.exe`期望其参数带有双斜杠：

```
cscript //E:jscript //Nologo //U C:/path_to_coffeescript_compiler.js 
```

出于某种原因`cmd.exe`（不是`cscript.exe`！）将双斜杠视为双反斜杠，并尝试解析显然失败的每个参数的网络名称，但不是经过一段时间的延迟。

这是进程监视器日志的一小段摘录：

```
cmd.exe     CreateFile     \\E:jscript\\             OBJECT PATH INVALID
cmd.exe     CreateFile     \\E:jscript \Nologo\\     BAD NETWORK PATH
cmd.exe     CreateFile     \\E:jscript \Nologo \U\   BAD NETWORK PATH
cmd.exe     CreateFile     \\Nologo\\                OBJECT PATH INVALID
cmd.exe     CreateFile     \\Nologo \U\              BAD NETWORK PATH 
```

... 等等。

我能做些什么来防止这种情况发生？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T13:58:35.553

在我做了更多的黑客攻击之后，我终于找到了问题所在。罪魁祸首是 Comodo Internet Security，它将一个 DLL 注入到 cmd.exe 进程中，该进程进行了查找：

**Do heuristic command-line analysis for certain applications**选项的帮助文本：

> 选择此选项会指示 Comodo Internet Security 对能够执行代码（例如 Visual Basic 脚本和 Java 应用程序）的程序执行启发式分析。启用此选项影响的示例程序是 wscript.exe、cmd.exe、java.exe 和 javaw.exe。

感谢所有提供的解决方法。这些都不起作用的事实引导我找到原因:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T11:51:07.060

我不了解哪个过程有问题，但您可以尝试隐藏`//`上述过程。

**想法1）**将CSCRIPT命令放在一个批处理文件中，然后让ExecJS调用该批处理文件。

**想法 2)**延迟`//`使用 FOR 变量的出现

```
for %s in (/) do cscript %s%sE:jscript %s%sNologo %s%sU C:/path_to_coffeescript_compiler.js 
```

*注意 - 这并不能解释太多，但大多数 Windows 上下文将接受 a`/`代替`\`. 例如，`DIR "C:/"`等价于`DIR "C:\"`。*

# iphone - 隐藏轨道图像

> ID：10382091
> 
> 赞同：0
> 
> 时间：2012-04-30T10:24:15.727
> 
> 标签：iphone, ios

在我的项目中，我有三个轨道 Track1、Track2 和 Track3，并且在其中的 3（轨道）上，一个滑块图像（这是 UIImageView 但不是 UISlider））从左向右移动（通过使用计时器）。屏幕右上角有两个按钮来保存和分享。当我们点击分享按钮时，另一个视图（shareView）正在出现（这是 mainView 的 3/4 部分），上面有 Facebook、twitter .....目前的看法。但我的问题是当我们单击共享按钮时，滑块没有隐藏，它在 shareView 上也可见。我想隐藏那个滑块图像（UIImageView）。

任何人都可以帮助或建议提前谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T11:50:21.973

UIImageView 继承自 UIView 类，该类具有[隐藏属性。](https://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIView_Class/UIView/UIView.html#//apple_ref/occ/instp/UIView/hidden)我想还有其他方法可以做到这一点，但使用 hidden 属性应该可以。在 shareView 出现之前将 hidden 属性设置为 YES，然后在 shareView 关闭时将其设置回 NO。

```
imageView.hidden = YES; 
```

或者

```
imageView.hidden = NO; 
```

您可能还想尝试[removeFromSuperview 方法](https://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIView_Class/UIView/UIView.html#//apple_ref/occ/instm/UIView/removeFromSuperview)，尽管您还必须在关闭 shareView 时将其添加回同一位置。

# symfony - 在 Twig 路径中 添加多个参数

> ID：10382093
> 
> 赞同：116
> 
> 时间：2012-04-30T10:24:22.793
> 
> 标签：symfony, twig

如何在 Twig 路径中​​添加多个参数？
假设您有这条路线：

```
article_show:
    pattern:  /article/{slug}
    defaults: { _controller: AcmeArticleBundle:Article:show } 
```

您可以在树枝模板中执行此操作：

```
{{ path('article_show', { 'slug': article.slug }) }} 
```

但是如果你的路由文件中有这个怎么办：

```
_files_manage:
    pattern: /files/management/project={idproject}&user={iduser}
    defaults: { _controller: AcmeTestBundle:File:manage } 
```

看起来他们没有在他们的文档中介绍这一点。

* * *

## 回答 #1

> 赞同：196
> 
> 时间：2012-04-30T10:55:03.453

您可以传递任意数量的参数，用逗号分隔：

```
{{ path('_files_manage', {project: project.id, user: user.id}) }} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-17T11:39:07.517

考虑制定路线：

```
_files_manage:
    pattern: /files/management/{project}/{user}
    defaults: { _controller: AcmeTestBundle:File:manage } 
```

因为它们是必填字段。它将使您的网址更漂亮，并且更易于管理。

你的控制器看起来像

```
 public function projectAction($project, $user) 
```

# wix - 我能比 CompressionLevel="high" 做得更好吗？

> ID：10382096
> 
> 赞同：5
> 
> 时间：2012-04-30T10:24:31.537
> 
> 标签：wix, compression

我有一个非常简单的安装程序 - 它正在安装一个应用程序二进制文件，仅此而已。二进制文件的大小约为 2.7MB。我用 WiX 编译的 MSI 大约是 2.1MB。使用 InnoSetup 制作的等效安装程序大约为 1.2MB。

我有`CompressionLevel="high"`我的`Media`元素，有什么办法可以做得比这更好，或者以其他方式减小我的安装程序包的大小？我很担心 msi 安装程序的大小几乎是我们的 InnoSetup 安装程序的两倍。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T19:45:38.610

这是您可以为橱柜获得的最佳压缩水平。有些人所做的是创建一个未压缩的安装程序并使用使用 LZMA 进行压缩的自解压器或引导程序（就像 Inno Setup 使用的那样）。

# jquery - fancyBox 和 jQuery 删除工具冲突

> ID：10382098
> 
> 赞同：0
> 
> 时间：2012-04-30T10:24:37.620
> 
> 标签：jquery, fancybox

我想知道是否有人可以帮助我。

我已经编写了一个脚本来创建[这个](http://www.mapmyfinds.co.uk/development/testing.php)图片库页面。我正在使用“fancyBox”来创建幻灯片和一个源自[这里](http://jqueryui.com/demos/droppable/photo-manager.html)的 jquery 演示，我已经对其进行了调整以提供删除功能。

我遇到的问题在于我的代码的这些行：

```
<ul id="gallery" class="gallery ui-helper-reset ui-helper-clearfix">

      <?php for ($i = 0; $i < $descriptions->documentElement->childNodes->length; $i++) :  
                          $xmlFile = $descriptions->documentElement->childNodes->item($i);  
                          $name = htmlentities($xmlFile->getAttribute('originalname'), ENT_COMPAT, 'UTF-8');  
                          $description = htmlentities($xmlFile->getAttribute('description'), ENT_COMPAT, 'UTF-8');  
                          $source = $galleryPath . rawurlencode($xmlFile->getAttribute('source'));  
                          $thumbnail = $thumbnailsPath . rawurlencode($xmlFile->getAttribute('thumbnail'));  
                  ?>

                  <li class="ui-widget-content ui-corner-tr">
        <a class="fancybox" rel="allimages" title="<?php echo $name; ?>" href="<?php echo $source; ?>"><img src="<?php echo $thumbnail; ?>"alt="<?php echo $description; ?>" width="96" height="72"/>   </a><a href="link/to/trash/script/when/we/have/js/off" title="Delete this image" class="ui-icon ui-icon-trash">Delete image</a> 
      <?php endfor; ?>  
      </li>
      </ul> 
```

包含这些行`:<ul id="gallery" class="gallery ui-helper-reset ui-helper-clearfix">`及其`<li class="ui-widget-content ui-corner-tr">`各自的结束标记后，“fancyBox”功能将不起作用。没有它们，它工作正常。

我对 jQuery 比较陌生，我已经为此工作了几天，但似乎找不到解决方案。

我只是想知道是否有人可以看看这个，让我知道我哪里出错了。

对于其他信息，我在下面添加了“fancyBox”脚本。

```
 <script type="text/javascript">  

            $('.fancybox').fancybox({
                openEffect  :   'elastic',
                closeEffect :   'elastic',

                padding :   20,
                fitToView   :   true,

                prevEffect :    'none',
                nextEffect :    'none',

                closeBtn  : false,
                arrows : false,

                helpers : {
                    title : {
                        type : 'inside'
                    },
                    buttons : {}
                },

                afterLoad : function() {
                    this.title = 'Image ' + (this.index + 1) + ' of ' + this.group.length + (this.title ? ' - ' + this.title : '');
                }
            });

</script> 
```

非常感谢和亲切的问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T19:20:39.890

仅适用于将来遇到此问题的任何人：

画廊有一`display:none`组来自 Jquery-UI 示例。

只需修复此行：

```
 <ul id="gallery" class="gallery ui-helper-reset ui-helper-clearfix">

 <ul id="gallery" class="ui-helper-reset ui-helper-clearfix"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T10:35:12.487

也许你需要放在`<?php endfor; ?>` 之后`</li>`而不是之前。

展示你是如何编写 Fancybox 初始化脚本的

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T19:04:33.370

您的删除工具使用此功能

```
// resolve the icons behavior with event delegation
$( "ul.gallery > li" ).click(function( event ) {
 var $item = $( this ),
 $target = $( event.target );
 if ( $target.is( "a.ui-icon-trash" ) ) {
  deleteImage( $item );
 } else if ( $target.is( "a.ui-icon-zoomin" ) ) {
  viewLargerImage( $target );
 } else if ( $target.is( "a.ui-icon-refresh" ) ) {
  recycleImage( $item );
 }
 return false;
}); 
```

所以这阻止了对`<a class="fancybox">`绑定到 fancybox 的子元素的任何操作。

也许您可以添加另一个条件来绕过`return false`if，`$taget.is("a.fancybox")`例如：

```
// resolve the icons behavior with event delegation
$( "ul.gallery > li" ).click(function( event ) {
 var $item = $( this ),
 $target = $( event.target );
 if ( $target.is( "a.ui-icon-trash" ) ) {
  deleteImage( $item );
 } else if ( $target.is( "a.ui-icon-zoomin" ) ) {
  viewLargerImage( $target );
 } else if ( $target.is( "a.ui-icon-refresh" ) ) {
  recycleImage( $item );
 } else if ( $target.is( "a.fancybox" )) {
  // do nothing and let fancybox to play
 } else {
  return false;
 }
}); 
```

# java - 无法删除 InvocationTargetException

> ID：10382100
> 
> 赞同：0
> 
> 时间：2012-04-30T10:24:50.413
> 
> 标签：java, android

我知道当不同包中有两个具有相同名称的类时会引发此异常。

但是在这种情况下，我无法理解遇到此语句时如何引发此异常（如 LogCat 中所示）

`s=tv2.getText().toString();`其中 s 是字符串，当然。

所以，请帮我解决这个问题。

这些是我使用过的进口产品-

```
import android.app.Activity;
import android.content.Context;
import android.content.res.TypedArray;
import android.graphics.Typeface;
import android.os.Bundle;
import android.view.View;
import android.view.ViewGroup;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.AdapterView.OnItemSelectedListener;
import android.widget.ArrayAdapter;
import android.widget.BaseAdapter;
import android.widget.Button; 
import android.widget.Gallery;
import android.widget.ImageView;
import android.widget.Spinner;
import android.widget.TextView; 
```

感谢你在期待。

编辑：LogCat 详细信息

```
04-30 15:46:53.373: D/dalvikvm(608): GC_EXTERNAL_ALLOC freed 26 objects / 816 bytes in 48ms
04-30 15:47:01.871: D/AndroidRuntime(608): Shutting down VM
04-30 15:47:01.871: W/dalvikvm(608): threadid=1: thread exiting with uncaught exception (group=0x4001d800)
04-30 15:47:01.891: E/AndroidRuntime(608): FATAL EXCEPTION: main
04-30 15:47:01.891: E/AndroidRuntime(608): java.lang.IllegalStateException: Could not execute method of the activity
04-30 15:47:01.891: E/AndroidRuntime(608):  at android.view.View$1.onClick(View.java:2072)
04-30 15:47:01.891: E/AndroidRuntime(608):  at android.view.View.performClick(View.java:2408)
04-30 15:47:01.891: E/AndroidRuntime(608):  at android.view.View$PerformClick.run(View.java:8816)
04-30 15:47:01.891: E/AndroidRuntime(608):  at android.os.Handler.handleCallback(Handler.java:587)
04-30 15:47:01.891: E/AndroidRuntime(608):  at android.os.Handler.dispatchMessage(Handler.java:92)
04-30 15:47:01.891: E/AndroidRuntime(608):  at android.os.Looper.loop(Looper.java:123)
04-30 15:47:01.891: E/AndroidRuntime(608):  at android.app.ActivityThread.main(ActivityThread.java:4627)
04-30 15:47:01.891: E/AndroidRuntime(608):  at java.lang.reflect.Method.invokeNative(Native Method)
04-30 15:47:01.891: E/AndroidRuntime(608):  at java.lang.reflect.Method.invoke(Method.java:521)
04-30 15:47:01.891: E/AndroidRuntime(608):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
04-30 15:47:01.891: E/AndroidRuntime(608):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
04-30 15:47:01.891: E/AndroidRuntime(608):  at dalvik.system.NativeStart.main(Native Method)
04-30 15:47:01.891: E/AndroidRuntime(608): Caused by: java.lang.reflect.InvocationTargetException
04-30 15:47:01.891: E/AndroidRuntime(608):  at yadav.sanjay.conv.ConvActivity.click(ConvActivity.java:392)
04-30 15:47:01.891: E/AndroidRuntime(608):  at java.lang.reflect.Method.invokeNative(Native Method)
04-30 15:47:01.891: E/AndroidRuntime(608):  at java.lang.reflect.Method.invoke(Method.java:521)
04-30 15:47:01.891: E/AndroidRuntime(608):  at android.view.View$1.onClick(View.java:2067)
04-30 15:47:01.891: E/AndroidRuntime(608):  ... 11 more
04-30 15:47:01.891: E/AndroidRuntime(608): Caused by: java.lang.NullPointerException
04-30 15:47:01.891: E/AndroidRuntime(608):  ... 15 more 
```

很抱歉之前没有发布 logcat 详细信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T10:44:59.173

它不是 InvocationTargetException，我认为它是由 NullPointerException 引起的，如 logcat 所示。这可能是因为 tv2 为空或 tv2.getText() 为空。请检查非空值

```
if(tv2 != null)
 s=tv2.getText().toString();
else 
 s= ""; 
```

# wcf - 在 Windows XP 上通过 Kerberos 进行 WCF 身份验证

> ID：10382101
> 
> 赞同：1
> 
> 时间：2012-04-30T10:24:53.643
> 
> 标签：wcf, kerberos

我有一个 .NET WCF 客户端与 Java 服务器组件通信。服务器端身份验证是通过配置为反向代理的中间 Apache 服务器完成的。

.NET 客户端的配置如下：

```
<basicHttpBinding>
    <binding name="AdministrationServiceImplServiceSoapBinding">
          <security mode="TransportCredentialOnly">
            <transport clientCredentialType="Windows" proxyCredentialType="Windows" />
          </security>
    </binding>
</basicHttpBinding> 
```

Apache 配置为需要 Kerveros 身份验证：

```
<LocationMatch "^...$">
  AuthType Kerberos
  Krb5Keytab ...
  KrbServiceName HTTP/hostname
  KrbMethodNegotiate on
  KrbMethodK5Passwd off
  Require valid-user
  Satisfy All
</LocationMatch> 
```

如果我在 Windows 7 上启动我的应用程序，一切都按预期工作：.NET 客户端使用 Kerberos，Apache 对客户端进行身份验证，我可以使用 Spring 安全性访问客户端凭据。

如果我在 Windows XP 上启动我的应用程序，我会收到一条 HTTP 401 错误消息。在观看了使用 WireShark 的网络通信后，我看到了这种情况：

(1) 未经身份验证访问Web服务的初始尝试

```
POST <path> HTTP/1.1
Content-Type: text/xml; charset=utf-8
SOAPAction: ""
Host: <host>
Content-Length: 374
Expect: 100-continue
Connection: Keep-Alive 
```

(2) 100 来自服务器的继续回复

```
HTTP/1.1 100 Continue 
```

(3) 来自客户端的 SOAP 请求（仍然未经身份验证）

(4) 服务器给出401响应

```
HTTP/1.1 401 Authorization Required
Server: Apache
WWW-Authenticate: Negotiate 
```

(5) 客户端尝试使用 NTLM 进行身份验证

```
POST <path> HTTP/1.1
Content-Type: text/xml; charset=utf-8
SOAPAction: ""
Authorization: Negotiate TlRMTVNTUAABAAAAt4IY4gAAAAAAAAAAAAAAAAAAAAAFASgKAAAADw==
Host: <host>
Content-Length: 0 
```

(6) 来自服务器的 401 消息（我们这里不说 NTLM！）

```
HTTP/1.1 401 Authorization Required 
```

(7) 客户放弃

当我从客户端解码 Base64 协商标头时，它首先`NTLMSSP\x00`指示客户端想要进行 NTLM 身份验证，尽管配置文件为身份验证指定了“Windows”（又名 Kerberos）。

我可以在客户端做些什么来说服 .NET 使用 Kerberos？如果不是，我的 Apache 应该返回什么以便客户端知道它应该使用 Kerberos？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T07:56:27.027

Windows 没有为受 Kerberos 保护的服务使用正确的服务主体名称 (SPN)：使用 Kerberos 时，Windows 应`HTTP/$servername`在活动目录中查找 SPN。

错误的一个可能原因是服务的 SPN 不存在并且必须创建（参见[Kerberos 身份验证问题 - 服务主体名称 (SPN) 问题 - 第 3 部分](http://blogs.technet.com/b/askds/archive/2008/06/09/kerberos-authentication-problems-service-principal-name-spn-issues-part-3.aspx)）。然而，在我的设置中，SPN 确实存在，但不知何故 Windows 没有检索它们）。使用[KerbTray](http://www.microsoft.com/en-us/download/details.aspx?id=23018)我验证了 Windows 实际上不包含`HTTP/$servername`.

解决方案是在 WCF 客户端配置中显式定义 SPN。

```
<endpoint address="http://$servername/Service" /> 
```

变成了

```
<endpoint address="http://$servername/Service" />
  <identity>
    <servicePrincipalName value="HTTP/$servername" />
  </identity>
</endpoint> 
```

# grails - def user=User.findByUserIdAndPassword(params.userId,params.password) 为空？？在圣杯中

> ID：10382105
> 
> 赞同：-1
> 
> 时间：2012-04-30T10:25:08.387
> 
> 标签：grails, spring-security

`def user=User.findByUserIdAndPassword(params.userId,params.password)`即使在成功注册后也为空......我正在使用 Spring Security。

我的用户域类是

```
class User {

   transient springSecurityService

   Integer id 
   String userId
   String password
   byte[] photo
   String fullName
   String bio
   String email
   String address
   String username

   boolean enabled
   boolean accountExpired
   boolean accountLocked
   boolean passwordExpired

   static hasMany = [places: Place, badges: Badge, checkIns:CheckIn, friend:User]

   static belongsTo = Place

   String toString(){
      "$userId"
   }

   static constraints = {
      fullName(nullable: true,maxSize:20,matches:"[a-zA-Z\40-\176]+")
      bio(nullable: true, maxSize: 100,matches:"[a-zA-Z\40-\176]+")
      email(email: true, blank: false)
      photo(nullable: true,maxSize:1000000)
      address( nullable:true,maxSize:40,matches:"[a-zA-Z0-9\40-\176]+")
      userId(size:5..10,unique:true,nullable:false,matches:"[a-zA-Z][a-zA-Z0-9 ]+")
      password(size:5..10,password:true,nullable:false)
      username blank: false, unique: true
   }

   static mapping = {
      password column: '`password`'
   }

   Set<Authority> getAuthorities() {
      UserAuthority.findAllByUser(this).collect { it.authority } as Set
   }

   def beforeInsert() {
      encodePassword()
   }

   def beforeUpdate() {
      if (isDirty('password')) {
         encodePassword()
      }
   }

   protected void encodePassword() {
      password = springSecurityService.encodePassword(password)
   }
} 
```

如果我实施

```
System.out.println(" userid------------------->" + params.userId);
System.out.println(" password------------------->" + params.password);
System.out.println(" username------------------->" + params.username); 
```

我可以看到登录用户的用户 ID 和密码...但是为什么

`def user=User.findByUserIdAndPassword(params.userId,params.password)`无效的？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T11:15:24.137

密码以散列方式存储在数据库中。因此 params.password 与数据库中存储的值不匹配。

此外 - 你想达到什么目的？您可以通过访问服务手动访问用户：

springSecurityService.currentUser

出于登录目的，我建议使用 spring-security-ui 插件。

希望有帮助:)

# python - python IOError异常

> ID：10382106
> 
> 赞同：1
> 
> 时间：2012-04-30T10:25:12.410
> 
> 标签：python

我的 python 脚本中出现以下异常。脚本 24*7 运行，每两个小时抛出一次以下异常。任何关于何时发生此异常的想法都会很有用。

```
 Traceback (most recent call last):
    File "ApprovedLeadTracker.py", line 337, in ?
    processSendMailTo(sendMailTo,dedup_leads,icenet_leads,dedup_leads_tot)
    File "ApprovedLeadTracker.py", line 274, in processSendMailTo
    ue_db.processQuery(q=query)
    File "/public/gdp/trunk/src/ukl/python/database.py", line 63, in processQuery
    print traceback.format_exc()
    IOError: [Errno 5] Input/output error 
```

数据库.py

```
def processQuery(self, q, locals=None, returnLastRowId = False, opt=''):
        ret = None
        err = ''
        for i in range(2):
            try:
                cursor = self.getCursor(opt)
                cursor.execute(q,locals)
                if (returnLastRowId):
                    ret = cursor.lastrowid
                else:
                    ret = cursor.fetchall()
                cursor.close()
                #q = cursor._last_executed
                #self.log('SUCCESS',q)
                return ret
            except MySQLdb.OperationalError, e:
                print "Exception Query:", q
                print "Exception:", e
                err = e
                print traceback.format_exc()
                self.conn = self.connect()
            except Exception, e:
                print "Exception Query:", q
                print "Exception:", e
                err = e
                print traceback.format_exc()
                self.conn = self.connect()
                break
        #q = cursor._last_executed
        #self.log('FAILURE',q)
        raise RuntimeError, str(err) 
```

# gwt - SmartGWT 中 ListGrid 中的 setData

> ID：10382107
> 
> 赞同：2
> 
> 时间：2012-04-30T10:25:12.890
> 
> 标签：gwt, smartgwt, gwt2, listgrid

嗨，我正在尝试使用`SmartGWT`。

我有数组列表

```
ArrayList<FileDocument> documentsArrayList = new ArrayList<FileDocument>(); 
```

// 所有的值都在documentsArrayList中

和一张桌子

```
private ListGrid getDocumentTable() {
        if (documentTable == null) {
            documentTable = new ListGrid();
            documentTable.setSize("644px", "379px");
            documentTable.setCanResizeFields(true);

            documentTable.setFields(getStatus(),getIcon(),getName(),getSize(),getModifiedby(),getModifiedDate());
        }
        return documentTable;
    } 
```

网格的字段就像

```
public ListGridField getName() {
        if (name == null) {
            name = new ListGridField("name","Name");
        }
        return name;
    } 
```

我想将值放入数组列表值到表中。

documentTable.setData(一些列表网格记录);

如何转换`ArrayList`以便`ListGridRecord` 我可以设置数据。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T10:31:42.533

您需要创建一个方法，将您`ArrayList`作为输入并返回 ListGridRecord 数组，然后可以使用`listGrid.setData(ListGridRecord[] records);`

开场示例：

```
 listGrid.setData(getListridRecords(employees)); // set records here 

 private void getListGridRecords(ArrayList employees) {
      ListGridRecords records[]=null;
      if(employees!=null){
       records = new ListGridRecord[employees.size()];
       for(int cntr=;cntr<employees.size();cntr++){
        ListGridRecord record = new ListGridRecord();   
        Employee emp = employees.get(cntr);
        record.setAttribute("name",emp.getName()); //your ListGridField 's name
        record.setAttribute("status",emp.getStatus()); //your ListGridField 's name
        //.. more goes here
        records[cntr] = record;
      }

   }
   return records;
} 
```

另一种方式可能是[这样](http://www.java2s.com/Code/Java/GWT/GridDataBindingListGridFieldsSampleSmartGWT.htm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-26T21:10:13.197

你也可以使用类

可以将 Array 列表转换为可以添加到 ListGridField 的 setData 方法的 recordList。下面是实现的代码片段。

```
`RecordList recordList = new RecordList();
 for(DocumentsArrayList documentsArray: documentsArrayList)
 {
  Record record = new Record();
  record.setAttribute("Name", getName());
  record.setAttribute("size", getSize());
  record.setAttribute("user", getuser());
  recordList.add(record);
 }          
 documentTable.setData(recordList);
 } 
```

` 所有的属性名都应该和 POJO 中的值匹配，这样才能直接使用值对象。

# java - 查明组件是否在特定容器中

> ID：10382112
> 
> 赞同：6
> 
> 时间：2012-04-30T10:25:51.490
> 
> 标签：java, swing

我有一个包含很多摆动组件的应用程序，嵌套在几个容器中。我正在实现一个右键单击弹出菜单，根据组件所在的上下文显示信息。

举个例子：如果我右键单击 JTextField，如果文本字段在 JScrollPane 内，我想在弹出窗口中显示“foo”，如果不是，则显示“bar”。但是 JTextField 本身可能嵌套在其他几个 JPanel 中。

我可以做这样的事情：

```
public static boolean isInScrollPane(JComponent comp) {

    Container c = comp.getParent();

    while (c != null) {         
        if (c instanceof JScrollPane) {
            return true;
        } else {
            c = c.getParent();
        }
    }
    return false;
} 
```

但我敢打赌，已经有更好的解决方案可用，但我只是没有找到。

有人可以给我一个提示吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-30T10:31:01.973

您的代码基本上与该[`SwingUtilies.getAncestorOfClass()`](http://docs.oracle.com/javase/6/docs/api/javax/swing/SwingUtilities.html#getAncestorOfClass%28java.lang.Class,%20java.awt.Component%29)方法匹配。因此，您的代码可以简化为：

```
public static boolean isInScrollPane(JComponent comp)
{
  return SwingUtilities.getAncestorOfClass(JScrollPane.class, comp) != null;
} 
```

# c# - 我怎样才能拥有一个接受 C# 中的类型的 [Attribute]？

> ID：10382115
> 
> 赞同：0
> 
> 时间：2012-04-30T10:26:06.240
> 
> 标签：c#, generics, attributes

我创建了一个`EvaluateAttribute`，我希望它接受`IEvaluator`这样指定的各种 s：

```
[Evaluate(CatEvaluator, DogEvaluator)]
public void someMethod()
{
} 
```

因为`CatEvaluator`和`DogEvaluator`是类型，所以我像这样设置我的属性类：

```
 public class EvaluateAttribute<T> : Attribute where T:IAccessEvaluator 
```

和构造函数：

```
public EvaluateAttribute(params T [] accessEvaluators)
{
    _accessEvaluators = accessEvaluators;
} 
```

C# 似乎不喜欢泛型和属性。有针对这个的解决方法吗？

我希望我的属性`CreateInstance`用`IAccessEvaluator`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T10:29:57.120

如果您只想传递实现`IAccessEvaluator`. 只需将签名更改为

```
public EvaluateAttribute(params IAccessEvaluator [] accessEvaluators)
{
    _accessEvaluators = accessEvaluators;
} 
```

重读你的问题。您正在使用对象之类的类型，所以我的第一印象是写下上面的答案。如果您需要注释类型，您应该查看对您的问题的评论（由 MUG4N 提供）。

```
public EvaluateAttribute(params Type [] accessEvaluators)
{
    _accessEvaluators = accessEvaluators;
}

[Evaluate(typeof(CatEvaluator), typeof(DogEvaluator)]
public SomeClass{ } 
```

并更改`_accessEvaluators`为 `Type[]`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T10:37:27.603

没有什么可以阻止属性接受类型：

```
public class EvaluateAttribute : Attribute
{
    private readonly Type[] _accessEvaluators;

    public EvaluateAttribute(params Type[] accessEvaluators)
    {
        _accessEvaluators = accessEvaluators;
    }
} 
```

然后您可以像这样使用它：

```
[Evaluate(typeof(CatEvaluator), typeof(DogEvaluator)]
public void someMethod()
{

} 
```

不幸的是，你失去了类型安全——但你总是可以向属性的构造函数添加一些运行时检查。类似于以下内容：

```
public EvaluateAttribute(params Type[] accessEvaluators)
{
    foreach (var type in accessEvaluators)
    {
        if (!typeof(IAccessEvaluator).IsAssignableFrom(type))
        {
            throw new InvalidOperationException("Suppied type must be of type IAccessEvaluator");
        }
    }
    _accessEvaluators = accessEvaluators;
} 
```

# c# - 功能发送邮件

> ID：10382120
> 
> 赞同：0
> 
> 时间：2012-04-30T10:26:25.553
> 
> 标签：c#, asp.net, email

我想知道如何在重定向到另一个页面之前检查电子邮件是否已正确发送。因为如果它不快，它会在请求完成之前重定向..

```
while (reader.Read())
{

    Fct.SendEmail("test.test.com", "test.test.com", "Maxime", userEmail, "email@myemail.com", "Access to our portal / Your password", body);

}

Response.Redirect("Logon.aspx"); 
```

这是我的功能发送电子邮件：

```
 public void SendEmail(string smtpServer, string mailFrom, string mailFromDisplayName, string mailTo, string mailCc, string subject, string body)
    {
        try
        {
            using (SmtpClient client = new SmtpClient(smtpServer))
            {
                string to = mailTo != null ? string.Join(",", mailTo) : null;
                string cc = mailCc != null ? string.Join(",", mailCc) : null;

                System.Net.Mail.MailMessage mail = new System.Net.Mail.MailMessage();
                mail.From = new MailAddress(mailFrom, mailFromDisplayName);
                mail.To.Add(to);

                if (cc != null)
                {
                    mail.Bcc.Add(cc);
                }

                mail.Subject = subject;
                mail.Body = body.Replace(Environment.NewLine, "<BR>");
                mail.IsBodyHtml = true;

                client.Send(mail);
            }
        }

        catch (Exception ex)
        { ex.ToString(); }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T10:31:19.490

邮件在发送之前被放入队列中 - 通常位于 c:\inetpub\mailroot\

当轮询器收到邮件时，如果邮件发送失败，它会将其放入死信文件夹 - 因此请检查此文件夹是否有故障。

client.Send(msg) 仅在无法创建消息时才会出错 - 一旦创建了电子邮件以供 SMTP 服务器处理，它不会因错误的电子邮件地址或任何其他错误而出错。

# javascript - 什么是 JS 中的“>>>”运算符？

> ID：10382122
> 
> 赞同：30
> 
> 时间：2012-04-30T10:26:41.377
> 
> 标签：javascript, arrays, iterator, operators

> **可能重复：**
> [javascript >>> 运算符？](https://stackoverflow.com/questions/5716641/javascript-operator)
> [JavaScript 三倍大于](https://stackoverflow.com/questions/7718711/javascript-triple-greater-than)

在这样的代码行中找到了这个运算符：

```
var t = Object(this),
        len = t.length >>> 0; 
```

这个运算符是什么意思？

完整代码如下。这是JS`some`方法的代码：

```
if (!Array.prototype.some) {
  Array.prototype.some = function(fun /*, thisp */) {
    "use strict";

    if (this == null) throw new TypeError();

    var t = Object(this),
        len = t.length >>> 0;

    if (typeof fun != "function") throw new TypeError();

    var thisp = arguments[1];

    for (var i = 0; i < len; i++) {
      if (i in t && fun.call(thisp, t[i], i, t))
        return true;
    }

    return false;
  };
} 
```

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-04-30T10:28:12.050

`>>>`*是没有符号扩展*的右移

 *如果`>>`在负数上使用运算符，结果也将是负数，因为原始符号位被复制到所有新位中。使用`>>>`零将被复制。

在这种特殊情况下，它只是被用作将`length`字段限制为无符号 31 位整数的一种方式，或者换句话说，将 Javascript 的本机 IEEE754“双”数“转换”为整数。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-30T10:29:36.950

这是一个零填充右移。当您对数字进行位移时，您可以决定用零或符号位填充最左边的位。

在二进制补码表示中，负数以 1 作为前导位，而正数以 0正数。*

# mysql - 方法集成solr和mysql

> ID：10382127
> 
> 赞同：0
> 
> 时间：2012-04-30T10:27:23.480
> 
> 标签：mysql, import, solr, integration

我正在用 php 和 mysql 构建一个 web 应用程序。Web 应用程序将有 3-4 个大表（每个表有数百万条记录），其中非常重要的是必须可以对其执行全文搜索以在文本字段中搜索术语。我用 mysql 设计这个 Web 应用程序，因为它需要完整的酸支持和事务。现在我正在尝试了解如何以更快的方式通过术语（多个单词）在这 3-4 个大数据表中执行搜索结果查询。

我正在考虑将 Solr 用于存储旧数据，我认为我可以构建一个定期 cron 作业，将数据从 mysql 导入 solr，但我不明白：

*   如果用户搜索几秒钟前刚刚插入的文本，我如何使用 mysql 查询新结果，而不是用户搜索旧文本插入，例如 2 天前？

如果用户修改旧数据：

*   如何立即更新 salr 上的记录匹配，以便立即修改其他用户可见的数据。

还

*   如果用户在 mysql 上正确更新旧数据（在事务中）并立即下一个应用程序尝试更新 solr 中的数据以使用新数据值刷新但效果不佳，则用户已经可以看到旧数据，而不是新数据，因为solr 已经有旧数据，因为更新失败。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T11:43:30.383

Solr 有一个[XML 接口](http://wiki.apache.org/solr/UpdateXmlMessages#add.2BAC8-replace_documents)，用于提交要索引的文档。每次更新应用程序中的可搜索数据时，您都可以向 solr 提交添加/更新请求，然后它将“立即”索引该数据。

# iphone - 当我验证应用程序时如何解决此捆绑包无效的错误

> ID：10382130
> 
> 赞同：1
> 
> 时间：2012-04-30T10:27:25.717
> 
> 标签：iphone

验证应用程序时出现错误

此捆绑包无效。info.plist 中 CFBundleDocumentTypes 键的值必须是字典数组，每个字典至少包含 CFBundleTypeName 键

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-05-17T14:51:51.453

![在此处输入图像描述](../Images/cf2532e2aa87de43b207992477ac76c0.png)

我删除了 Info.plist 中的“文档类型”键。我在条目中什么都没有，不知道它来自哪里。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2016-02-16T09:13:43.970

在 Info.Plist CFBundleDocumentTypes 键中，您将有一行`<dict/>`。删除这一`<dict/>`行，错误就会消失。

所以以下内容：

```
<key>CFBundleDocumentTypes</key>
    <array>
        <dict/>
    </array> 
```

变成：

```
<key>CFBundleDocumentTypes</key>
    <array>
    </array> 
```

然后一切正常。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-29T16:27:23.510

我遇到了这个问题，问题出在 info.plist 文件中，当我删除这个标签时，我在文档类型选项卡中有一个空标签（错误添加），对我来说一切正常。

# jquery - jQuery ajax 实时提要

> ID：10382140
> 
> 赞同：1
> 
> 时间：2012-04-30T10:28:20.300
> 
> 标签：jquery

我已经尝试了几个月来断断续续地寻找解决方案，但甚至没有接近答案 - tbh 我什至不知道在搜索时使用什么关键字，我希望这里有人有答案或至少可以指出我应该寻找的方向。

在我的公司内，我建立了一个内部网页面，人们可以向该页面添加问题（很像帮助台票务系统）。用户可以在需要时向这些问题添加更新。因此我有两个数据库表（除其他外） - 一个有问题，另一个有这些问题的更新。

我已经建立了一个网站，它使用 jquery 的 ajax 请求来轮询数据库中所有当前未解决的用户桌面问题以及该问题的最新更新（如果有的话）。根据用户的偏好，这些会以更新或发布的顺序列出。

每隔 7 秒，整个 div 就会随着整个列表的刷新而更新。因此，如果我每次刷新浏览器页面的一半时突出显示某个问题中的某些文本，我就会失去该突出显示。这种刷新在我的服务器上也有很大的负载——如果每个人的浏览器每 7 秒不断刷新整个数据库的内容，那么数据库会占用很多时间。

我想做的是让浏览器只更新自上次刷新以来不同的项目。我已将其设置为在用户上次刷新视图时更新用户数据库，因此每 7 秒（如果他们正在查看首页）此字段会获得一个新的 unix 时间戳。我还有关于问题和更新的创建时间以及关于问题的更新时间戳（当为该问题创建新更新时，更新时间戳将使用新的 unix 时间进行更新）。

据我所知，这就是 Facebook 的新闻提要所做的。时不时地将新帖子添加到顶部，在旧帖子下添加对旧帖子的回复，更新新的喜欢和分享等等。如果我在我的 facebook 页面上突出显示某些文本，突出显示不会丢失，这意味着 facebook仅更新提要的部分内容，而不是整个提要本身。这就是我想要发生的事情。

你知道任何关于如何做这样的事情的教程吗？或如何搜索，因为当我搜索 facebook 类型的新闻提要系统时，我得到的只是如何与 facebook 的 API 交互！提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T21:04:57.430

您可以尝试研究推送技术：

[推送技术 - 长轮询](http://en.wikipedia.org/wiki/Push_technology)

推送技术，尤其是长轮询在这种情况下可能很有用。这是手机应用程序在向用户或订阅者传输新数据或更新时使用的概念。在这种情况下，与服务器的连接保持活动状态。用户的机器偶尔会轮询服务器以获取新信息。但是，如果有新信息要提供给用户，服务器只会回答响应。在这种情况下，您可以每 7 秒轮询一次服务器，但在有新信息之前，服务器不会响应或重新绘制 div。

就更新 div 而言，您可以尝试使用 jquery .clone 和 .append 选项在其自己的跨度中添加每个新项目。

例如：

```
HTML:
<span id="itemX"></span>

On Ajax Success:
var tile = $('#itemX').clone().attr('id','item1').text("Text returned from ajax call.");
$('#divName').append(tile); 
```

通过这种方式，您可以在 ajax 调用返回给您时修改每个新项目并将其附加到下方，而不会影响其上方的项目。

祝你好运。希望这可以帮助。

# bash - 临时更改 bash 中的当前工作目录以运行命令

> ID：10382141
> 
> 赞同：222
> 
> 时间：2012-04-30T10:28:21.550
> 
> 标签：bash, shell, terminal, working-directory

我知道我可以使用`cd`命令在 bash 中更改我的工作目录。

但是，如果我执行此命令：

```
cd SOME_PATH && run_some_command 
```

然后工作目录将永久更改。有没有办法像这样暂时改变工作目录？

```
PWD=SOME_PATH run_some_command 
```

* * *

## 回答 #1

> 赞同：405
> 
> 时间：2012-04-30T10:30:33.433

您可以`cd`通过将命令行括在一对括号中来在子 shell 中运行 和 可执行文件：

```
(cd SOME_PATH && exec_some_command) 
```

演示：

```
$ pwd
/home/abhijit
$ (cd /tmp && pwd)  # directory changed in the subshell
/tmp 
$ pwd               # parent shell's pwd is still the same
/home/abhijit 
```

* * *

## 回答 #2

> 赞同：155
> 
> 时间：2012-04-30T16:15:54.380

bash 有一个内置的

```
pushd SOME_PATH
run_stuff
...
...
popd 
```

* * *

## 回答 #3

> 赞同：37
> 
> 时间：2012-04-30T10:35:43.967

像这样的东西应该工作：

```
sh -c 'cd /tmp && exec pwd' 
```

# asp.net - SSRS 报告缓慢加载第一份报告

> ID：10382144
> 
> 赞同：2
> 
> 时间：2012-04-30T10:28:46.883
> 
> 标签：asp.net, vb.net, ssrs-2008

我有一个显示 ssrs 报告的网站（asp.net）。但是，每次我尝试从网站运行报告时，加载大约需要 2 分钟，但如果我再次单击报告，它将在几秒钟内加载。我试图运行报告使用的查询，我也得到了第二个结果。

是否需要更改任何配置或需要添加任何 tsql 代码？

我已经完成了 stackoverflow 上提供的解决方案，但仍然没有运气。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T10:35:17.690

这似乎是一个SSRS问题。你的报告没有任何问题。

长时间不活动后第一次访问 SSRS 需要更多时间来加载它是“正常的”。该问题是由 SSRS 的工作方式和 SSRS 在特定时间段后定期重新启动应用程序域的方式引起的。应用程序域重新启动后，第一次向 SSRS 请求时，它需要加载所有设置，并且需要相当长的时间。

[这个](http://www.pawlowski.cz/2011/07/solving-issue-long-starting-report-ssrs-2008/)博客节目是解决这种情况的方法

# java - web.xml 中的属性 不在 Eclipse 中工作

> ID：10382145
> 
> 赞同：5
> 
> 时间：2012-04-30T10:28:52.393
> 
> 标签：java, eclipse, maven, web.xml

我有一个多模块 Maven 项目。它在 NetBeans 中运行良好。但不是在 Eclipse (EE Helios SR 1) 中。在 web.xml 文件中，我有以下内容：

```
<web-app version="3.0" 
         xmlns="http://java.sun.com/xml/ns/javaee" 
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
         xsi:schemaLocation="http://java.sun.com/xml/ns/javaee 
             http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd"
             metadata-complete="true"> 
```

我收到 5 个 xml 错误。每个看起来都是这样的：

> 必须为元素类型“web-app”声明属性“version”

其他错误中的`"version"`部分更改为`"xmlns:xsi"`等等。我尝试将动态 Web 模块版本更改为 3.0，但没有帮助。

当迁移到 Eclipse 时，我`mvn eclipse:eclipse -Dwtpversion=2.0`在 war 模块和`mvn eclipse:eclipse`其他模块中做了。我也安装了`m2e`插件`m2e-wtp`。所以，我想这个项目应该可以正常工作。

为什么 Eclipse 不能处理在另一个 IDE 中工作的项目？我还不得不更改`<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>`为`<%@ taglib prefix="c" uri="http://java.sun.com/jstl/core" %>`其中一个 JSP，这也有点奇怪，因为这个 uri 的旧版本在 NetBeans 中工作。

希望有人能澄清其（出乎我意料的）行为的原因以及如何解决这个问题。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-30T10:32:41.653

请改用 2.4。

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<web-app version="2.4" xmlns="http://java.sun.com/xml/ns/j2ee"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/j2ee"> 
```

已编辑。

# javascript - 如何制作自定义平移控件

> ID：10382147
> 
> 赞同：0
> 
> 时间：2012-04-30T10:29:01.427
> 
> 标签：javascript, html, google-maps-api-3

我是学生，正在使用自己的应用程序来了解如何使用 Google 地图 API v3。我从我的应用程序中调用了一个名为“Up_pan”的 Java 脚本函数。

```
function Up_pan() {

    var center = map.getCenter();
    var New_center = { lat: center.lat() + 1,
        lng: center.lng() + 1
    };
    map.panto(New_center);
} 
```

但它没有用。

有人能帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T10:34:06.603

改变

```
map.panto(New_center); 
```

至

```
 map.panTo(New_center); 
```

如果这不能解决它，也许你可以尝试改变这个：

```
var New_center = { lat: center.lat() + 1,
    lng: center.lng() + 1
}; 
```

对此：

```
var New_center = new google.maps.LatLng(center.lat() + 1, center.lng() + 1); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T14:46:36.750

有了这个解决方案

```
new google.maps.LatLng(center.lat() + 1, center.lng() + 1); 
```

panControl 不尊重缩放，所以如果缩放太近，左键单击将我们发送到另一个大陆 rsrs

像这样的东西可能更合适

```
new google.maps.LatLng(center.lat() + (1 / map.getZoom()), center.lng() + (1 / map.getZoom())); 
```

# zend-framework - Zend 框架 - 没有错误 404

> ID：10382151
> 
> 赞同：0
> 
> 时间：2012-04-30T10:29:17.833
> 
> 标签：zend-framework, http-status-code-404, zend-auth

我正在使用 ZF 开发的网站撕裂我的头发。当它由离岸公司开发时，我必须尝试对其进行更改...

目前，如果我访问该网站：[http ://www.riads-marrakech.org/](http://www.riads-marrakech.org/)

如果我[http://www.riads-marrakech.org/sgfdgdfgdg](http://www.riads-marrakech.org/sgfdgdfgdg) => 没有错误，只是显示“auth”而不是 404 的主要内容布局

我已经无法为多语言内容生成不同的 url（参见：[Zend Framework Multilingual route](https://stackoverflow.com/questions/10336893/zend-framwork-multilingual-route)）

我猜这个错误是由 Zend_Auth 转发的。该站点使用配置文件 acl.ini：

```
[roles]
guest = null
planificateur = null
administrateur = null
webmaster = null
Standard = null

[ressources]
index = null
error = null
inscription = null
inscriptionnewsletter = null
utilisateur = null
search = null
apropos = null
ficheriad = null
admin_index = null
admin_users = null
admin_agendas = null
renseignement = null
agenda = null
loisir = null
admin_config = null
admin_usersprofile = null
admin_typemisenavant = null
admin_misenavant = null
admin_misenavantautres = null
admin_misenavantbonplan = null
admin_misenavantoffrespeciale = null
admin_etablissement = null
admin_prestation = null
admin_lieutouristique = null
admin_exclusivite = null
admin_chambre = null
admin_prixetablissement = null
admin_prixchambre = null
admin_pack = null
admin_compositionpack = null
admin_newsletter = null
admin_statistique = null
language = null

[planificateur]
allow.admin_index = deconnect
allow.error = null
allow.index = null
allow.inscription = null
allow.search = null
allow.admin_agendas = null
allow.language = null

[and the same for each role] 
```

我的 HTACCESS ：

```
ErrorDocument  404  /404.php
RewriteEngine On
RewriteCond %{HTTP_HOST} !^www\.
RewriteRule ^(.*)|$ http://www.%{HTTP_HOST}/$1 [R=301,L]
RewriteCond %{REQUEST_FILENAME} -s [OR]
RewriteCond %{REQUEST_FILENAME} -l [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^.*$ - [NC,L]
RewriteRule ^.*$ index.php [NC,L] 
```

任何人都可以帮助我，请T_T？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T08:30:39.353

我发现了问题。

有一个插件 Auth 可以测试和重定向......我只是改变了例程，这很好^^

# c# - 遍历 Where'd 集合

> ID：10382154
> 
> 赞同：1
> 
> 时间：2012-04-30T10:29:35.367
> 
> 标签：c#, lambda, iteration, deferred-execution

我认为这是一个延迟执行问题，但也许我有点错过了重点

因此我有一个循环

```
List<int> processed = new List<int>()
foreach(KeyValuePair<int,bool> tbl1 in tables.Where(z=>!processed.Contains(z.Key))){
   //do some stuff...etc 
   processed.Add(someInt);
} 
```

我觉得这很危险，但实际上延迟执行是否使这项工作有效？它实际上似乎在迭代我有点温和地说'如预期'但是..问题是我想这大概是一个坏主意，通常弄乱你正在迭代的集合是坏的..

想法？谢谢

确定清楚..问题是

说桌子是这样填充的

1,真 2,假 3,假 4,假 5,假 6,假

第一圈我在 tbl1 中得到 {1,true} 并在第二圈中将 2 添加到已处理列表中我将在 tbl1 中得到 {3,false} 然后将 3 和 4 添加到已处理的第 3 圈中我将得到 {5, tbl1 中的 false} 这是预期的吗？

如果我在第 4 圈将 6 添加到已处理，我会在下一次再次获得 {5,false} 吗？这又是预期的，我想我只是觉得这有点令人困惑并觉得它很危险，但可能这只是为了我 - 因为它并不完全有意义

n

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T10:32:26.837

当你迭代`tables`它时，它总是会查询...的*当前*内容，`processed`所以它会做你想做的事，但这不是我建议的方式:)

除了其他任何事情之外，您还可以使用它`HashSet<int>`来避免在每次迭代中进行 O(n) 包含检查。

但是，我怀疑您想要[MoreLINQ](http://morelinq.googlecode.com)[`DistinctBy`](http://code.google.com/p/morelinq/source/browse/trunk/MoreLinq/DistinctBy.cs)中的功能：

```
foreach (var item in tables.DistinctBy(x => x.Key))
{
    // Process the item
} 
```

诚然，这不会给您留下已处理密钥的列表……但也许这不是问题。

就我个人而言，我认为 LINQ 还没有等是一种耻辱`DistinctBy`，`MaxBy`但是我们开始了......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T10:36:59.753

将您的表格分组对您有帮助吗？

```
var groups = tables.GroupBy(x=> x.Key); 
```

根据您的计划，您可以在内部订购这些组。还是我做错了什么？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T10:37:17.707

我认为你的直觉认为它很糟糕是正确的:-)

它应该可以工作。

where 函数在比较结果时会产生结果，因此每次迭代都会运行 lambda 并检查键是否在列表中。

您还应该将该列表更改为 HashSet 以提高性能。

# objective-c - 音频缓冲区分配与否？

> ID：10382160
> 
> 赞同：1
> 
> 时间：2012-04-30T10:29:46.323
> 
> 标签：objective-c, xcode, core-audio

在这里发布了几次关于在 iphone 中读取缓冲区的内存问题后，我被告知不要在回调函数中 malloc 任何内容。

所以我把它拿出来，现在我不分配缓冲区，现在内存以每秒 1mb 的速度增长！

看来我在这里不懂一些基本的东西，我很乐意在这里做些什么。

其他答案对我来说不是太具体，所以我无法指出到底该做什么。

这是新的回调：

```
static OSStatus recordingCallback(void *inRefCon, 
                                  AudioUnitRenderActionFlags *ioActionFlags, 
                                  const AudioTimeStamp *inTimeStamp, 
                                  UInt32 inBusNumber, 
                                  UInt32 inNumberFrames, 
                                  AudioBufferList *ioData) 
{

    AudioBuffer buffer;
    buffer.mNumberChannels = 1;
    buffer.mDataByteSize = inNumberFrames * 2; //* sizeof(SInt16) ?
    buffer.mData = NULL;// **took out : malloc( inNumberFrames * 2 );**

    // Put buffer in a AudioBufferList
    AudioBufferList bufferList;
    bufferList.mNumberBuffers = 1;
    bufferList.mBuffers[0] = buffer;

    OSStatus status;

    status = AudioUnitRender(audioUnit, 
                              ioActionFlags, 
                             inTimeStamp, 
                              inBusNumber, 
                             inNumberFrames, 
                              &bufferList); 

   int16_t *q = (int16_t *)(&bufferList)->mBuffers[0].mData;
    for(int i=0; i < inNumberFrames; i++)
    {
        NSLog(@"%d",q[i]);
    }

    return noErr;

} 
```

# c# - 如何在树状结构中列出程序集（包括引用的程序集）中的所有属性？

> ID：10382161
> 
> 赞同：2
> 
> 时间：2012-04-30T10:29:55.377
> 
> 标签：c#

我想创建一个树视图，列出程序集中的所有属性。我可以使用以下代码生成根节点：

```
mainAssembly = Assembly.LoadFile(filename); //Global Variable
Type[] objTypes = mainAssembly.GetTypes().OrderBy(o=>o.Name).ToArray();
foreach (var type in objTypes)
{
    TreeViewItem item = new TreeViewItem();
    item.Header = type.Name;
    item.Foreground = Brushes.White;
    item.ToolTip = type.FullName;
    tvEntities.Items.Add(item);
} 
```

单击根节点 [类名] 时，我想列出该特定类中包含的属性。但是，如果它包含类型为**class1**的聚合属性，它位于另一个程序集中，它会给我**IOFileNotFound** Exception 错误。

```
private void ItemExpanded(object sender, RoutedEventArgs e)
{
    try
    {
        TreeViewItem item = e.OriginalSource as TreeViewItem;

        if (item.ToolTip != null)
        {
            Type assemblyType = mainAssembly.GetType(item.ToolTip.ToString());
            if (assemblyType != null)
            {

                foreach (var prop in assemblyType.GetProperties())
                {

                    PropertyInfo property = prop;
                    TreeViewItem childItem = new TreeViewItem();
                    childItem.Header = property.Name;
                    /*Following line gives IOFileNotFound exception, if property  is declared in some other assembly.*/
                    childItem.ToolTip = property.PropertyType.FullName;
                    item.Items.Add(childItem);
                }
            }
       }
   }
   catch (Exception ex)
    {
        throw ex;
    }
} 
```

如何加载这些引用的程序集并显示树状结构。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T11:01:18.743

确保所有引用的程序集都复制到应用程序的文件夹中。您收到异常的原因是 CLR 找不到引用的程序集之一。

# iphone - iPhone：如何根据图像的给定英寸大小计算像素大小？

> ID：10382162
> 
> 赞同：0
> 
> 时间：2012-04-30T10:29:57.100
> 
> 标签：iphone, uiimage, size, pixel

我的图像尺寸以英寸为单位，我必须计算该尺寸的像素等效值，我必须做什么？

假设图像的给定尺寸是：7X5 英寸，比图像的像素尺寸大。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T10:42:43.103

它基于您的**dpi（每英寸点数）**

我假设您使用 100dpi 从扫描仪扫描图像 7x5

因此，分辨率将为宽度 x dpi：高度 x dpi = 700 x 500

您还可以看到[英寸到像素转换器](http://www.louisedade.co.uk/apps/pixels-to-inches-converter)

# crystal-reports - Crystal 报表中的字符串数组中未显示值

> ID：10382175
> 
> 赞同：0
> 
> 时间：2012-04-30T10:31:00.050
> 
> 标签：crystal-reports

我在水晶报表中有一个公式字段，如下所示

```
global numberVar detailLine ;
global stringVar array SummaryArun ;
WhilePrintingRecords ;
Redim Preserve SummaryArun [3] ;  

SummaryArun[1] :="Litres Of Liquid";
SummaryArun[2] :="Litres Of Alcohol";
SummaryArun[3] := "Percentage Strength";
```

我将此公式字段的输出作为“百分比强度”，但是当我声明另一个公式字段时，如下所示

```
global stringVar array SummaryArun ;
Redim Preserve SummaryArun [3] ;
SummaryArun[3];
```

我对这个领域没有任何兴趣。

根据我已将其定义为 gloabl 数组，我们需要将第二个公式字段值的值作为“百分比强度”。

如何在另一个公式字段中获取数组值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T12:35:22.197

更改您的第一个公式：

```
//{@formula_one}

// unless you are using this formula in the second pass (i.e. with summary fields)
// whileprintingrecords is unnecessary; it should always be the first entry if you are going
// to use it
WhilePrintingRecords ;

global numberVar detailLine ;

global stringVar array SummaryArun ;
// you don't need to add the Preserve option unless you are trying to keep existing values
// this doesn't appear to be the case here
Redim SummaryArun [3] ;

SummaryArun[1] := "Litres Of Liquid"; 
SummaryArun[2] := "Litres Of Alcohol"; 
SummaryArun[3] := "Percentage Strength"; 
```

改变你的第二个公式：

```
//{@Percentage Strength}

// if you are declaring your array WhilePrintingRecords (as you have done in the other formula)
// then you will need to do so when you *use* the variable
WhilePrintingRecords;

global stringVar array SummaryArun;

// you aren't changing the size of the array, so this line isn't necessary
//Redim Preserve SummaryArun [3] ;

SummaryArun[3]; 
```

# wordpress - 在头部创建迷你循环以使用高级摘录 - 循环以使用当前帖子 ID

> ID：10382178
> 
> 赞同：0
> 
> 时间：2012-04-30T10:31:07.087
> 
> 标签：wordpress

我正在使用[高级摘录](http://wordpress.org/extend/plugins/advanced-excerpt/)插件，因为它的选项有更多的灵活性。

虽然如果发现插件有缺点，我必须使用`remove_all_filters('the_excerpt');`其他方式删除标准摘录功能，否则它会与高级摘录选项冲突。

**问题**

我想在 facebook 的开放图元中将 except 添加到我的脑海中。通常我会用一个简单的方法来做到这一点，`get_the_excerpt();`然后像这样将它编织到元标记中......

```
<meta property="og:description" content="<?php echo get_the_excerpt(); ?>" /> 
```

但这不起作用 - 因为我已经删除了摘录过滤器。

**怎么修？**

我在下面创建 WP 查询的尝试，该查询获取当前 ID 并创建一个迷你循环，我可以在其中放置高级专家调用。

但由于某种原因，这个循环破坏了我的网站，我似乎无法修复。谁能帮我解决这个循环。非常感谢。

```
<?php if ( is_single() || is_page() ) {

    $postID         = get_the_ID();
    $fbexcerpt      = new WP_Query(array( 'p' => $postID ));

    while ($fbexcerpt->have_posts()) :
    $fbexcerpt->the_post();

    echo '<meta property="og:description" content="' . the_advanced_excerpt('length=120&use_words=0') . '" />';

    unset($fbexcerpt);
    endif; wp_reset_query();

} ?> 
```

* * *

**更新**

如果有人有任何不需要“高级摘录”的替代想法 - 那么我将通过我的 functions.php 插入开放图元

```
function insert_fb_in_head() {
    global $post;
    if ( !is_singular()) 
        return;

        echo '<meta property="og:description" content=" . $MyExcerptHere . "/>';

    echo "\n";
}
add_action( 'wp_head', 'insert_fb_in_head', 5 ); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T11:52:40.713

为什么不简单地使用[get_post](http://codex.wordpress.org/Function_Reference/get_post)？

```
 $my_post = get_post($id);
 $excerpt = $my_post->post_excerpt; 
```

然后使用这样的函数来检索最多 x 个字符的单词：

```
 function extractText150char($text, $length = '150') {
    $textArr = explode(' ', $text);
    $text = '';

    // Loop through each word
    for ( $i=0; $i<count($textArr)-1; $i++ ) {
      $text .= $textArr[$i] . ' ';
      // Check string length
      if ( (strlen($text) + strlen($textArr[$i+1]) ) > $length )
        return $text;
    }
    return $text;
  } 
```

# c# - Linq to SQL：删除多对多关系时出错

> ID：10382184
> 
> 赞同：3
> 
> 时间：2012-04-30T10:31:23.657
> 
> 标签：c#, linq-to-sql

首先，让我们从我的错误开始：

> “试图删除 X 和 Y 之间的关系。但是，不能将关系的外键之一设置为空”

现在解释我正在尝试做的事情......

我有以下数据库表：样本、男性、女性、样本关系。男性永​​远是标本，女性永远是标本。所以一个样本有两个一对多的关系（但逻辑阻止一个样本同时设置）。此外，男性可以有一对多的女朋友，同样，女性也可以有一对多的男朋友（嘿，这毕竟是 21 世纪）。这已通过创建多对多表 (SpecimenRelationship) 解决。

SQL 中的关系已设置，以便样本删除级联到男性和女性。之后，所需的功能是删除男性/女性以级联到 SpecimenRelationship - 但由于 SQL 限制（多循环路径垃圾！），这没有完成。所以一个级联，另一个是 SetNull（假设 Male 是 SetNull）。

现在是所有出错的地方。当我从 Male 实体中删除 SpecimenRelationship 时，出现上述错误。但是为什么会这样呢？我什至没有看到我在哪里删除了 Male 实体，我不了解 Linq-to-Sql 的工作原理，为什么这不仅仅是直接删除 SpecimenRelationship 条目？

这是一些示例代码：

```
Male male = GetMaleFromDataContext();

SpecimenRelationship relationshipToRemove = male.SpecimenRelationships.Single(x => x.FemaleID == someFemaleID);

male.SpecimenRelationships.Remove(relationshipToRemove);

DB.SubmitChanges();//error thrown here 
```

为什么关系级联甚至在这里发挥作用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T19:39:54.523

在表上创建关系时，外键列的 NULL 约束会自动设置为 NOT NULL。

您需要将其设置为 NULL 并且您的级联规则将起作用（我认为）。

设计模式 (Management Studio) 中的属性名称是 Allow Nulls。

# ruby-on-rails - 如何将不同链接上的不同数据从同一操作传递到同一视图？

> ID：10382186
> 
> 赞同：2
> 
> 时间：2012-04-30T10:31:42.427
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1, controller

我有事件模型。我有 3 个链接作为过去事件、即将发生的事件和当前事件。

这 3 个链接被路由到 events_url 即索引操作和 den 到索引视图。

* * *

以下是事件控制器索引操作的代码...

```
def index

      @today = Event.find (:all, :conditions => ['(start_date  = current_date)'], :order => 'start_date ')

      @past  = Event.find (:all, :conditions => ['start_date < ?', current_date], :order => 'start_date')

      @events  = Event.find( :all, :conditions => ['start_date > ?', current_date], :order => 'start_date')

end 
```

**我想将@today 变量数据传递给 Currentevents 链接上的索引视图，Pastevent 链接上的@past 数据和即将到来的事件链接上的 @event 数据。但我无法在各个链接上传递不同的变量。我怎样才能实现 dis？**

* * *

以下是索引视图的代码：

```
- content_for :title do
   Listing Events
 - content_for :div do
   Listing Events
 - content_for :brand_img do
   %img{:src => "images/lifestyle.gif", :height => "35"}
 - @events.each do |event|
   %ol.hoverbox
     %li.increase
       = link_to image_tag(event.photo.url), event_path(event)
       .abc
         = event.name
       %br/
      .bca
         = event.start_date
         |
         = event.start_time
         /|
         /= link_to " ".html_safe, event_path(event), :method => :delete, :class => "del-16", :confirm=>"Are u sure?", :title => "Delete", :style => "text-decoration:none;" 
```

由于在 dis 视图中我指的是 ti @events 变量，它仅显示即将发生的事件...我如何更改不同链接上的 dis 变量...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-30T13:28:44.150

您可以使用查询参数来执行此操作：您只需将附加参数传递给 link_to 方法，例如：

```
<%= link_to "Past events", events_path(view: "past") %>
<%= link_to "Today's events", events_path(view: "today") %>
<%= link_to "All events", events_path %> 
```

然后在您的控制器中，您可以执行以下操作：

```
def index
  case params[:view]
  when 'past'
    @past  = Event.find (:all, :conditions => ['start_date < ?', current_date], :order => 'start_date')
  when 'today'
    @today = Event.find (:all, :conditions => ['(start_date  = current_date)'], :order => 'start_date ')
  else
    @events  = Event.find( :all, :conditions => ['start_date > ?', current_date], :order => 'start_date')
  end
end 
```

但是，您还应该考虑通过在控制器中添加相应的 RESTful 操作来遵循 RESTful 方法：

在 config/routes.rb 中：

```
resources :events do
  collection do
    get 'past'
    get 'today'
  end
end 
```

然后在您的控制器中，您必须定义不同的操作：

```
def index
  @events  = Event.find( :all, :conditions => ['start_date > ?', current_date], :order => 'start_date')
end

def past
  @events  = Event.find (:all, :conditions => ['start_date < ?', current_date], :order => 'start_date')
end

def today
  @events = Event.find (:all, :conditions => ['(start_date  = current_date)'], :order => 'start_date ')
end 
```

那么在你看来：

```
<%= link_to "Today's events", todays_event_path %>
<%= link_to "Past events", past_event_path %>
<%= link_to "All events", event_path %> 
```

无论您选择哪种方法，您都应该首先阅读本指南：http: [//guides.rubyonrails.org/routing.html](http://guides.rubyonrails.org/routing.html)

顺便说一句，您还应该考虑在模型中使用命名范围，而不是在控制器中查询它（这样您就可以保持瘦身）： http: [//guides.rubyonrails.org/active_record_querying.html#scopes](http://guides.rubyonrails.org/active_record_querying.html#scopes)

这是我在这里的第一个答案，所以我希望能有所帮助:)

# java - 为什么我在这里得到一个 NullPointerException

> ID：10382191
> 
> 赞同：0
> 
> 时间：2012-04-30T10:31:53.870
> 
> 标签：java, nullpointerexception

我正在阅读一个代表迷宫图案的文本文件。每一行都被读入一维字符数组，然后将一个一维数组插入到二维字符数组中。

在下面的方法中得到一个空指针异常

```
 line = (input.readLine()).toCharArray(); 
```

* * *

```
private void fillArrayFromFile() throws IOException 
{

    BufferedReader input = new BufferedReader(new FileReader("maze.txt"));

    //Read the first two lines of the text file and determine the x and y length of the 2d array
    mazeArray = new char[Integer.parseInt(input.readLine())][Integer.parseInt(input.readLine())];

    char [] line = new char[10];

    //Add each line of input to mazeArray
    for (int x = 0; x < mazeArray[0].length; x++) 
    {
        line = (input.readLine()).toCharArray();
        System.out.print(x + " : ");
        System.out.println(line);
        mazeArray[x] = line;
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-30T10:34:57.673

`BufferedReader.readLine()``null`当没有更多输入要读取时返回。有关更多信息，请参阅[Java 文档](http://docs.oracle.com/javase/7/docs/api/java/io/BufferedReader.html#readLine%28%29)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T10:49:47.043

显而易见的答案是`input.readLine()`正在返回`null`，并且由于您正在调用一个不指向任何对象的方法，因此您将得到一个`NullPointerException`.

然而，这个问题的根源在于您对行和列的感知与文本文件的感知之间的差异。此外，如果我正确阅读您的代码，您正在循环访问不正确的索引。

这是一个示例文本文件：

```
4
6
a b c d
b c d a
a d c a
b d b a
c d a a
b a b a 
```

考虑这一点的一个好方法是考虑您拥有的*行*数和*列*数。

例如，上面的文本文件说“我有 4 列和 6 行”。

这也意味着`x`range from `0`to`3`和`y`range from `0`to `5`。

用您的话来说，x-length 是列数，y-length 是行数。

当然，记住行**越过**，列**向下**，假设索引在增加。

这个非常重要。因为 x 和 y 本质上是网格中特定位置的*索引。*

虽然这可能是原因，但您也有一些语义错误，我将在下面修复。

```
BufferedReader input = new BufferedReader(new FileReader("maze.txt"));

//Read the first two lines of the text file and determine the x and y length of the 2d array
int mazeWidth = Integer.parseInt(input.readLine());  //A.K.A number of columns
int mazeHeight= Integer.parseInt(input.readLine());  //A.K.A number of rows

//          ranges: [0...3][0...5] in our example
mazeArray = new char[mazeWidth][mazeHeight];

char [] line;

//Add each line of input to mazeArray
for (int y = 0; y < mazeHeight; y++) 
{
    line = (input.readLine()).toCharArray();

    if ( line.length != mazeWidth )
    {
        System.err.println("Error for line " + y + ". Has incorrect number of characters (" + line.length + " should be " + mazeWidth + ").");
    }
    else {
        System.out.print(y + " : ");
        System.out.println(java.util.Arrays.toString(line));
        mazeArray[y] = line;
    }
} 
```

# php - MySQL日期转换

> ID：10382197
> 
> 赞同：0
> 
> 时间：2012-04-30T10:32:15.000
> 
> 标签：php, mysql, date-format

我继承了一个 MySQL 数据库，该数据库（出于历史原因）包含一个字段，该字段将日期存储为自**1900-01-01**以来的天数。我希望能够选择该日期的 date_format() 版本，但无法找到这样做的方法。
有没有办法操纵列的内容，以便我可以将操纵的值传递给 date_format() 以便将其识别为有效日期？
我意识到有一个解决方案涉及执行一个查询，然后操作字段（在 PHP 中）然后作为辅助查询传回 - 但我需要这是一个单一的查询解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T10:48:08.437

你能在数据库上创建视图和函数吗？如果是这样，我将使用您当前用于转换时间的查询创建一个函数，然后使用该函数创建一个视图以将时间显示为时间戳。这将提高您的效率并使您的 php 代码更干净:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T10:48:48.573

MySql FROM_DAYS() 函数是您正在寻找的 - 请参阅[此处](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_from-days)获取文档？

但是，根据您的数据库设计和用例，您可能会考虑添加一个带有日期的列（FROM_DAYS() 的结果），以便您可以对该列进行查询。当您必须将函数应用于列才能在查询中使用它时，它应该敲响警钟，这些查询的运行效率可能非常低。

# sql-server - SQL Server 2008 slqcmd 数据位置

> ID：10382198
> 
> 赞同：2
> 
> 时间：2012-04-30T10:32:16.320
> 
> 标签：sql-server, sql-server-2008, sqlcommand, sqlcmd

在 SQL Server 2008 R2 中，我通过在 SQL Server Management Studio 中右键单击服务器并设置它们来设置`Data`和`Log`位置。`F:\moved\`

但是，当我使用`sqlcmd`它还原数据库时，它会还原`E:\Program Files\Microsoft SQL Server\MSSQL10_50.MSSQLSERVER\MSSQL\DATA`似乎是默认 SQL Server 位置的数据库。

为了存储目的，我需要始终恢复数据库，`F:\moved\`但是当我在脚本中使用以下内容时，*有时*会出现错误：

```
RESTORE DATABASE $(database) FROM DISK = '$(root)\$(database).bak' WITH RECOVERY,
MOVE '$(database)' TO '$(datadir)$(database).mdf',
MOVE '$(database)_log' TO '$(datadir)$(database).ldf'
GO 
```

错误：

> 将数据库上下文更改为“主”。
> 消息 3234，级别 16，状态 2，服务器 SQL1，第 3 行
> 逻辑文件 'userdb1' 不是数据库 'userdb1' 的一部分。使用 RESTORE FILELISTONLY 列出逻辑文件名。
> 消息 3013，级别 16，状态 1，服务器 SQL1，第 3 行
> RESTORE DATABASE 异常终止。

默认情况下可以`sqlcmd`强制恢复`F:\moved\`，而不必像我上面那样手动指定它以避免错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T10:35:47.720

你不能在你的脚本中定义`datadir`变量吗？`sqlcmd`

像这样的东西：

```
:setvar datadir F:\moved\

RESTORE DATABASE $(database) FROM DISK = '$(root)\$(database).bak' WITH RECOVERY,
MOVE '$(database)' TO '$(datadir)$(database).mdf',
MOVE '$(database)_log' TO '$(datadir)$(database).ldf'
GO 
```

有了该行，`sqlcmd`应始终使用该目录（而不是 SQL Server 默认值）

或者您也可以在命令行调用时将该变量值设置为您想要的任何值`sqlcmd`：

```
C:\> sqlcmd -v datadir=F:\moved\ (script name) 
```

# javascript - 外部 javascript 文件中的 Twitter、Facebook、G+ 共享按钮

> ID：10382201
> 
> 赞同：0
> 
> 时间：2012-04-30T10:32:22.247
> 
> 标签：javascript, facebook, twitter, bookmarks, social

如果我需要将标准社交分享按钮放置在外部 javascript 中，然后在页面内填充，该怎么办？默认按钮基本上是容器和 javascript 代码。

将所有这些内容放入一个 javascript 文件的正确方法是什么？下面我以我看到的方式提供我当前的 JAVASCRIPT 版本，但是在这种情况下，我遇到了 google 的问题，而且在 IE 中没有显示，所以我想也许哪里有更好的方法来做到这一点：

**标准 HTML 版本：**

```
<!--social-->
<div id="social">

<!--twitter-->
<div>
<a href="https://twitter.com/share" class="twitter-share-button" data-via="user" data-lang="en" data-count="vertical">Tweet</a>
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
</div>
<!--/twitter-->

<!--gplus-->
<div>
<g:plusone size="tall"></g:plusone>
<script type="text/javascript">
  (function() {
    var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
    po.src = 'https://apis.google.com/js/plusone.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
  })();
</script>
</div>
<!--/gplus-->

<!--facebook-->
<div>
<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>
<div class="fb-like" data-layout="box_count" data-href="yourlink" data-width="42" data-show-faces="false"></div>
</div>
<!--/facebook-->

</div>
<!--/social--> 
```

**JAVASCRIPT 版本**

```
<script>

function socialBookmarks(){

//containers
var socialString = '<!--social--><div id="social"><!--gplus--><div><g:plusone size="tall"></g:plusone></div><!--/gplus--><!--twitter--><div><a href="https://twitter.com/share" class="twitter-share-button" data-via="user" data-lang="en" data-count="vertical">Tweet</a></div><!--/twitter--><!--facebook--><div><div id="fb-root"></div><div class="fb-like" data-layout="box_count" data-href="yourlink" data-width="42" data-show-faces="false"></div></div><!--/facebook--></div><!--/social-->';

//where to populate bookmars
var divContainer = document.getElementById('container');
divContainer.style.position = 'relative';
var divTag = document.createElement("div");
divTag.style.position = "absolute";
divTag.style.top = "0";
divTag.style.left = "-152px";           
divTag.innerHTML = socialString;    
document.getElementById('container').appendChild(divTag);

//Core social functions

//twitter
!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");

//gplus
  (function() {
    var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
    po.src = 'https://apis.google.com/js/plusone.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
  })();

//fb
(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));

}

//Lets wait for page get loaded
function addLoadEvent(func){
    var oldonload = window.onload;
    if (typeof window.onload != 'function') {
        window.onload = func;
    }
    else {
        window.onload = function(){
            if (oldonload) {
                oldonload();
            }
            func();
        }
    }
}

//pull socialbookmarks function
addLoadEvent(function(){
    socialBookmarks();
});

</script> 
```

# ruby-on-rails - In my controller I want to receive some params like params[:test][:test_page]

> ID：10382203
> 
> 赞同：3
> 
> 时间：2012-04-30T10:32:27.573
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1

In my controller I want to receive some params like

```
params[:test][:test_page] 
```

This code is in edit page like

```
<%= test.title%> 
```

I can not give this in collection or any other field because I am not allowing user to edit this its showing something like fixed

so how can I pass this to controller I have a general idea about one code so giving it as reference

```
<%= collection_select(:test,:test_page, @testplantemplates, :id, :title,:selected => @test_plan_template_id) %> 
```

How can we do this? I was trying hidden_field but its allow only 2 arguments. Can you give me some example or idea?

some of my code is

```
<% if @secu.test_plan  %>
  <%= @secu.test_plan.title %>
<% else %>
    <%= collection_select(:test_plan,:test_plan_template_id, @testplantemplates, :id, :title, :prompt => true, :selected => @test_plan_template_id) %>
<% end %> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T11:13:01.610

You can use a hidden field. Like this:

```
<%= hidden_field_tag "test[test_page]", @test_plan_template_id %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T17:24:36.407

Try adding an html name option like this:

```
<%= collection_select(:test_plan,:test_plan_template_id, @testplantemplates, 
:id, :title, :prompt => true, :selected => @test_plan_template_id), 
:name => "test[test_page]" %> 
```

# android - 无需注册的 SIP 演示

> ID：10382204
> 
> 赞同：1
> 
> 时间：2012-04-30T10:32:28.430
> 
> 标签：android, sip

我正在使用 SIPDemo，它没有向服务器注册。我可以拨打电话但无法接听电话。我认为问题是注册。我的问题：是否可以在没有注册的情况下使用 android API 进行点对点调用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T12:09:42.673

是的，您无需注册即可进行点对点呼叫。

但是您必须手动将用户注册到服务器。

# javascript - 内联 javascript 和 JSF 动态绑定

> ID：10382206
> 
> 赞同：0
> 
> 时间：2012-04-30T10:32:50.367
> 
> 标签：javascript, jsf

[在我上一个问题](https://stackoverflow.com/questions/10320004/jquery-not-applying-on-jsf-dynamic-ui-component)的类似方面，我还有一个问题：

我们使用的是纯 JSF，我尝试了一个选择列表，我认为纯 jsf 不会携带它，除非我使用richfaces。

因此，我们尝试使用带有 javascript 功能的多选列表和按钮自行实现选择列表。这是示例代码：

```
<td width="100">
    <h:selectManyListbox id="Groups" name="Groups" size="9" style="width: 125px"  >
       <f:selectItems value="#{notificationBean.groupsFromDB}"/>
    </h:selectManyListbox>
</td>
<td align="center" valign="middle" width="80"><input
type="button" value="Add " class="btn_empty"
onclick="SelectMoveRows(document.forms['searchform'].Groups,document.forms['searchform'].GroupCodes)" /><br />

<br /> <input type="button" value="Remove" class="btn_empty"
onclick="SelectMoveRows(document.forms['searchform'].GroupCodes,document.forms['searchform'].Groups)" />
</td>
<td width="100">
    <h:selectManyListbox id="GroupCodes" name="GroupCodes" size="9" style="width: 125px" value="#{notificationBean.selectedGroups}">
    </h:selectManyListbox>
</td> 
```

首先让我知道用法是正确的。在这里，我无法使用 document.forms 方法访问组或组代码。所以物品不会从一个盒子移动到另一个盒子。

请让我知道如何在 document.forms 中引用该多选框，我尝试了以下操作：

```
document.forms['searchform'].Groups

document.forms[0].searchform\\\\:Groups

document.searchform.Groups 
```

提前致谢，

迪帕克

* * *

回答麦克道尔的评论：

我尝试了该链接中的方法...它不起作用...

还有一件事，我不确定我是否可以直接在我的项目中使用这个命名空间......它是免费/开源的吗？这是一个公司项目，所以问...

有没有其他方法不使用这个命名空间...

我包括了它指定的 xmlns：

```
<ui:composition xmlns="w3.org/1999/xhtml"; xmlns:ui="java.sun.com/jsf/facelets"; xmlns:c="java.sun.com/jstl/core"; xmlns:h="java.sun.com/jsf/html"; xmlns:f="java.sun.com/jsf/core"; xmlns:id="illegalargumentexception.googlecode.com/clientId"; version="2.0" template="/xhtml/masterLayout.xhtml"> 
```

它说异常：

```
javax.el.ELException: Function 'id:cid' not found
at org.apache.el.lang.ExpressionBuilder.visit(ExpressionBuilder.java:210)
at org.apache.el.parser.SimpleNode.accept(SimpleNode.java:147)
at org.apache.el.lang.ExpressionBuilder.prepare(ExpressionBuilder.java:167)
at org.apache.el.lang.ExpressionBuilder.build(ExpressionBuilder.java:185) 
```

# java - BigInteger.and 在做什么

> ID：10382208
> 
> 赞同：1
> 
> 时间：2012-04-30T10:33:00.630
> 
> 标签：java, biginteger

我有一些代码在哪里使用 BigInteger.and 操作，我不确定这是在做什么。在 javadoc 中写的是 bigIng & bigInt 但这对我没有帮助。有人可以在这个例子中解释我吗？

```
512.and(113078212145816597093331040047546785012958969400039613319782796882727665664) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T10:35:59.880

该`and`操作返回对两个大整数的[*按位和二进制表示执行的结果。*](http://en.wikipedia.org/wiki/Bitwise_operation)在您的特定示例中，提取了第 10 位，因为 512 的二进制表示是`1000000000`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T10:36:38.397

`&`在 Java 中是按位和运算符。有关说明，请参见[http://docs.oracle.com/javase/tutorial/java/nutsandbolts/op3.html](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/op3.html)。

```
1 & 1 == 1
0 & 1 == 0
1 & 0 == 0
0 & 0 == 0 
```

# php - 在控制器中形成 post 变量

> ID：10382216
> 
> 赞同：0
> 
> 时间：2012-04-30T10:33:30.127
> 
> 标签：php, codeigniter, jquery, frameworks

这是我的 javascript 视图，控制器正在调用。javascript

```
$('#contact').submit(function(e){
e.preventDefault();
var name= $('input[name=contactname]').val();
var email= $('input[name=contactemail]').val();
var message= $('textarea[name=message]').val();
$.post("index.php/homepage/sendMail",{name:name, email:email, message:message},
function(){
   $('#contactUsMask').hide();
   $('#contactAckMask').show();
   });
}); 
```

控制器

```
$from = $_POST['email'];
$msg = $_POST['message'];
$name = $_POST['name'];

$config['protocol'] = 'sendmail';
$config['mailpath'] = '/usr/sbin/sendmail';
$config['mailtype'] = 'html';
$config['charset'] = 'iso-8859-1';
$config['wordwrap'] = TRUE;

$this->email->initialize($config);
$this->email->from($from, $name);
$this->email->to($to);
$this->email->subject($sub);
$this->email->message($msg);
if($this->email->send())
{
    return true;
}
else
{
    echo $this->email->print_debugger();
    return false;
} 
```

我无法阅读帖子变量，请帮忙。赞赏所有努力

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T10:49:40.477

尝试`$("#testform").serialize()`在您的帖子请求中使用，例如

```
$('#contact').submit(function(e){
e.preventDefault();
$.post("index.php/homepage/sendMail",$("#contact").serialize(),
function(){
   $('#contactUsMask').hide();
   $('#contactAckMask').show();
   });
}); 
```

在您的控制器中，您将不得不使用`$this->input->post('email');`来获取电子邮件值..正如他们所说的那样尝试做`var_dump($_POST)`

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-30T10:47:50.027

如果你在做这个跨站点，你会遇到跨站点问题，因为 .post 是 $.ajax 的包装器

# maven - 未找到 Maven 测试依赖项

> ID：10382220
> 
> 赞同：2
> 
> 时间：2012-04-30T10:33:54.340
> 
> 标签：maven, maven-2, build, dependencies, powermock

我声明了一个对 powermock 的测试依赖，其中包含了 easymock。

```
<dependency>
  <groupId>org.powermock</groupId>
  <artifactId>powermock-easymock-release-full</artifactId>
  <version>1.4.12</version>
  <type>pom</type>
  <scope>test</scope>
</dependency> 
```

当我运行`mvn test`时，测试 src 声称能够找到`org.powermock`但不能`org.easymock`，尽管它包含在上述依赖项中。

我想知道这是否是由于测试范围的传递性造成的问题，所以我也尝试了编译范围（因为文档`http://maven.apache.org/guides/introduction/introduction-to-dependency-mechanism.html`提到编译依赖项在测试时可用）没有任何运气。

我也尝试过使用捆绑的 jar 而不是 pom，但无济于事。我意识到我可以单独声明依赖项（即 powermock 和 easymock 的单独依赖项），但出于我的目的，我仅限于一个依赖项，包括所有必要的测试库。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T13:44:58.603

将其[追溯到 powermock 父 pom](http://search.maven.org/remotecontent?filepath=org/powermock/powermock/1.4.12/powermock-1.4.12.pom)，我看到 easymock 依赖项被标记为“已提供”。

```
<dependencyManagement>
  <dependencies>
    <dependency>
      <groupId>org.easymock</groupId>
      <artifactId>easymock</artifactId>
      <version>3.1</version>
      <scope>provided</scope>
    </dependency> 
```

看起来 powermock 期望它的客户（在这种情况下是你）提供 easymock 罐子。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T10:56:47.260

根据[powermock-easymock-release-full POM](http://search.maven.org/#artifactdetails%7Corg.powermock%7Cpowermock-easymock-release-full%7C1.4.12%7Cpom)，它不依赖easymock（即easymock没有出现在`powermock-easymock-release-full`依赖项中）。因此，您必须向 easymock 添加另一个依赖项，具体取决于您使用的测试引擎（JUnit 或 TestNG）：[http://search.maven.org/#search%7Cga%7C1%7Cg%3A%22org。 powermock%22%20AND%20%22easymock%22](http://search.maven.org/#search%7Cga%7C1%7Cg%3A%22org.powermock%22%20AND%20%22easymock%22)

# android - android创建一个弹出屏幕，用于在扩展视图的页面上显示帮助

> ID：10382228
> 
> 赞同：0
> 
> 时间：2012-04-30T10:34:41.063
> 
> 标签：android, android-layout, android-view, android-dialog

我正在创建一个使用自定义视图的应用程序，并且我使用扩展视图的类设计了布局。

现在我在该视图上有一个帮助图标，点击时必须弹出。我尝试过对话框窗口，但我需要一个没有标题和边框的窗口。

我检查了一些游戏，他们正在使用我所需要的。任何人都可以提出更好的解决方案？

这是我获取帮助按钮的示例代码

```
public boolean onTouchEvent(MotionEvent me) {
        int action = me.getAction();
        if(action == MotionEvent.ACTION_DOWN ){
            x = me.getX();
            y = me.getY();
if (x >= helpButtonX && x < (helpButtonX +help.getWidth())&&
 y >= helpButtonY && y <     helpButtonY + help.getHeight() ) 
  {
           // code toshow popup
   }
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T10:37:05.293

是的，您可以使用您设计的布局创建自定义对话框。

为此，只需创建一个对话框并使用`setContentView()`方法设置布局。

例如：

```
 Dialog dialog = new Dialog(myActivity.this);
 dialog.setContentView(R.layout.myDialogLayout);
 dialog.setTitle("");
 dialog.setCancelable(true);
 dialog.show(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T10:40:42.280

您可以在 layout.xml 中的其他元素上创建一个使用 relativeLayout 设置的隐藏视图。当用户单击帮助按钮时，可见性变为可见并显示视图。然后，您可以在 View 上设置一个 onclick 侦听器，当他们触摸它时，它将再次被隐藏。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-30T02:33:24.337

您可以只使用带有自定义布局的 PopupWindow。

将此代码添加到您的`{//Code to show popup}`

```
//Get a layout inflator
LayoutInflater li = (LayoutInflater) getBaseContext().getSystemService(LAYOUT_INFLATER_SERVICE);
//Initialize a popup window with custom xml view - R.layout.popup.xml
View popupView = li.inflate(R.layout.popup, null);
final PopupWindow pW = new PopupWindow(popupView,LayoutParams.WRAP_CONTENT,LayoutParams.WRAP_CONTENT); 
```

要解雇它，`pW.dismiss()`请在任何你想要的地方使用

试试这个：[http ://android-er.blogspot.jp/2012/03/example-of-using-popupwindow.html](http://android-er.blogspot.jp/2012/03/example-of-using-popupwindow.html)

# c# - 用 C# 以一定的概率触发事件

> ID：10382229
> 
> 赞同：6
> 
> 时间：2012-04-30T10:34:47.933
> 
> 标签：c#, random, simulation, probability

我正在尝试模拟一个逼真的按键事件。出于这个原因，我使用的是 SendInput() 方法，但为了获得更好的结果，我需要指定 keyDOWN 和 KeyUP 事件之间的延迟！下面的这些数字显示了 DOWN 和 UP 事件之间经过的时间（以毫秒为单位）（这些是真实/有效的）：

96 95 112 111 119 104 143 96 95 104 120 112 111 88 104 119 111 103 95 104 95 127 112 143 144 142 143 128 144 112 112 111111113111111135111411135111351C1114S11113111341C111134S1111111111111111 111 111 111 111 111 112 111 104 87 95

**我们可以简化输出：**

延迟 64 - 88 毫秒 -> 20% 的时间

延迟 89 - 135 毫秒 -> 60% 的时间

延迟 136 - 150 毫秒 -> 20 % 的时间

**如何根据上面的概率触发事件？**这是我现在正在使用的代码：

```
 private void button2_Click(object sender, EventArgs e)
        {
            textBox2.Focus();
            Random r = new Random();
            int rez = r.Next(0, 5); // 0,1,2,3,4 - five numbers total

            if (rez == 0) // if 20% (1/5)
            {
                Random r2 = new Random();
                textBox2.AppendText(" " + rez + " " + r2.Next(64, 88) + Environment.NewLine);
// do stuff
            }
            else if (rez == 4)//if 20% (1/5)
            {
                Random r3 = new Random();
                textBox2.AppendText(" " + rez + " " + r3.Next(89, 135) + Environment.NewLine);
// do stuff

            }
            else // if 1 or 2 or 3 (3/5) -> 60%
            {
                Random r4 = new Random();
                textBox2.AppendText(" " + rez + " " + r4.Next(136, 150) + Environment.NewLine);
// do stuff

            }

        } 
```

这段代码有一个很大的问题。理论上，经过数百万次迭代后 - 生成的图形将类似于以下内容：

![比较](../Images/4b6752aabb846e76262f2dad60ed15d6.png)

如何处理这个问题？

**编辑：**解决方案是按照人们的建议使用分发。

这是此类代码的java实现：

[http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Random.html#nextGaussian%28%29](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Random.html#nextGaussian%28%29)

这是 C# 实现：

[如何从整数范围生成正态分布随机数？](https://stackoverflow.com/questions/1303368/how-to-generate-normally-distributed-random-from-an-integer-range)

尽管我建议稍微降低“偏差”的值。

这是有趣的 msdn 文章

[http://blogs.msdn.com/b/ericlippert/archive/2012/02/21/generating-random-non-uniform-data-in-c.aspx](http://blogs.msdn.com/b/ericlippert/archive/2012/02/21/generating-random-non-uniform-data-in-c.aspx)

大家感谢帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T10:46:13.633

这是正确的想法，我只是认为您需要使用双精度而不是整数，这样您就可以在 0 和 1 之间划分概率空间。这将使您获得更精细的粒度，如下所示：

1.  通过将所有值除以最大值来规范化实际值
2.  将值划分为桶 - 桶越多，图形越接近连续情况
3.  现在，桶越大，引发事件的机会就越大。因此，根据每个桶中有多少元素来划分区间 [0,1]。所以，如果你有 20 个实数值，而一个桶里面有 5 个值，它会占用四分之一的区间。
4.  在每次测试中，使用 Random.NextDouble() 生成一个介于 0-1 之间的随机数，并且随机数落入哪个桶中，使用该参数引发一个事件。因此，对于您提供的数字，以下是 5 个 buckets buckets 的值：

![在此处输入图像描述](../Images/a8b95697b8e2d1bd9ca2480e8743e61e.png)

这在代码示例中有点多，但希望这能给出正确的想法

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-30T10:52:19.433

听起来您需要生成正态分布。内置的 .NET 类生成一个[Uniform Distribution](http://en.wikipedia.org/wiki/Uniform_distribution_%28continuous%29)。

[通过使用Box-Muller 变换](https://stackoverflow.com/questions/218060/random-gaussian-variables)，使用内置 Random 类可以实现高斯或正态分布随机数。

你应该得到一个像这样的漂亮概率曲线

![正态分布](../Images/c1d341010c05f12d66a7b3a6a7d1f6ad.png)

（取自[http://en.wikipedia.org/wiki/Normal_distribution](http://en.wikipedia.org/wiki/Normal_distribution)）

要将正态分布的随机数转换为整数范围，Box-Muller 变换可以再次帮助解决此问题。请参阅[前面的问题和答案](https://stackoverflow.com/a/1303406/303612)，其中描述了过程和数学证明的链接。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-02T03:48:40.010

一种可能的方法是将延迟建模为[指数分布](http://en.wikipedia.org/wiki/Exponential_distribution)。指数分布模拟以恒定平均速率连续且独立发生的事件之间的时间 - 考虑到您的问题，这听起来像是一个公平的假设。

您可以通过取实际观察到的延迟的平均值的倒数来估计参数 lambda，并使用[这种方法](http://en.wikipedia.org/wiki/Exponential_distribution#Generating_exponential_variates)模拟分布，即

延迟 = -Math.Log(random.NextDouble()) / lambda

但是，查看您的样本，数据看起来过于“集中”在均值周围，无法成为纯指数，因此以这种方式进行模拟会导致正确均值的延迟，但过于分散而无法匹配您的样本。

解决这个问题的一种方法是将过程建模为移位的指数；本质上，该过程移动了一个值，该值表示该值可以采用的最小值，而不是指数的 0。在代码中，将偏移作为样本中的最小观察值，可能如下所示：

```
var sample = new List<double>()
                  {
                     96,
                     95,
                     112,
                     111,
                     119,
                     104,
                     143,
                     96,
                     95,
                     104,
                     120,
                     112
                  };

var min = sample.Min();
sample = sample.Select(it => it - min).ToList();

var lambda = 1d / sample.Average();

var random = new Random();
var result = new List<double>();
for (var i = 0; i < 100; i++)
{
   var simulated = min - Math.Log(random.NextDouble()) / lambda;
   result.Add(simulated);
   Console.WriteLine(simulated);
} 
```

一个简单的替代方案，本质上类似于 Aidan 的方法，是重新采样：从原始样本中选择随机元素，结果将具有完全期望的分布：

```
var sample = new List<double>()
                  {
                     96,
                     95,
                     112,
                     111,
                     119,
                     104,
                     143,
                     96,
                     95,
                     104,
                     120,
                     112
                  };

var random = new Random();
var size = sample.Count();
for (var i = 0; i < 100; i++)
{
   Console.WriteLine(sample[random.Next(0, size)]);
} 
```

# actionscript-3 - 卸载外部 SWF 文件

> ID：10382230
> 
> 赞同：0
> 
> 时间：2012-04-30T10:34:50.923
> 
> 标签：actionscript-3

我正在从永远不会卸载的主菜单中加载多个 swf 文件。我已经用下面的代码完成了这个......唯一的问题是，我没有卸载到主菜单，而是看到一个白屏，好像没有加载任何内容。

```
function BackToMenu(i:MouseEvent):void
{
    var BaseMovie:MovieClip = parent.parent as MovieClip;
    BaseMovie.parent.removeChild(BaseMovie);
} 
```

编辑：我会从一开始就解释我有一个 MainMenu.swf。单击与游戏相关的按钮时，将从 MainMenu.swf 加载游戏。当在 MainMenu.swf 上单击游戏按钮时，游戏会加载。当玩家完成游戏时，他们会看到退出按钮，该按钮会卸载当前游戏并显示 MainMenu.swf，而无需重新加载它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T17:35:40.183

首先，您应该删除一个`parent`以确保您实际上只删除了游戏：

```
function BackToMenu(i:MouseEvent):void
{
    var BaseMovie:MovieClip = parent as MovieClip;
    BaseMovie.parent.removeChild(BaseMovie);
} 
```

这应该可以解决您最紧迫的问题，并允许您返回菜单。但是，您并没有真正卸载游戏，而只是将其从显示列表中删除。这通常意味着仍然有声音在运行、活动键和/或鼠标监听器等 - 这些都必须注意！

而且，就像我说的，这只会解决你眼前的问题。然而，这不是一个永久的解决方案，也不是一个好的解决方案：由于主 SWF 负责加载游戏，它也应该负责处理它们。您*应该*将清理代码放入您的游戏中，但它应该只关注停止任何正在运行的脚本、声音等 - 简单的规则：在游戏中*启动*的任何内容都应该在游戏中*停止*。但它不应尝试访问显示层次结构中更上层的对象，或尝试卸载自身。

更好的方法是替换上面的所有代码，让主 SWF 负责删除游戏，以及从内存中卸载它。为此，您必须做三件事：

1.  不要编写实际的`removeChild`调用等，而是让您的按钮调度一个自定义事件来通知主 SWF 现在应该将其删除：

    ```
    function onBackButtonClicked( event:MouseEvent ):void {
        destroyGame(); // this would be the function that stops all the scripts
        dispatchEvent( new Event( "FINISH_GAME", true ) ); 
    } 
    ```

    请注意，“FINISH_GAME”现在是“冒泡”事件，即它在显示层次结构中向下传播。我们现在可以在包含游戏的任何祖先显示对象中侦听此事件。

2.  在您的主 SWF 中，`Loader`在游戏成功加载时添加一个事件侦听器。这是在加载过程完成时调用的事件侦听器中完成的：

    ```
    function onLoadComplete( event:Event ):void {
        var loader:Loader = event.target.loader;
        loader.addEventListener( "FINISH_GAME", onFinishGame, true );
    } 
    ```

3.  使用相应的事件处理程序删除游戏剪辑：

    ```
    function onFinishGame( event:Event ):void {
        var loader:loader = event.currentTarget;
        loader.parent.removeChild( loader );
        loader.unloadAndStop();
    } 
    ```

还有一些需要考虑的事情：

*   ActionScript 中的命名约定建议我们对方法和变量使用小写名称，而仅对类型使用大写。

*   相同的命名约定建议我们使用“on”或“handle”作为事件侦听器的前缀，以及事件的名称。因此，它应该是`onBackToMenu`，或者更确切地说`onBackButtonClicked`，，等等。

*   由于我对您用于加载的代码一无所知，我只是假设您有一个完整的侦听器，并且您不保留对加载程序的引用。如果你使用一个成员变量，你可以使用它来代替`event.target`, resp。`event.currentTarget`.

# mysql - 如何在 INSERT IGNORE 语句中获取被忽略行的 PK

> ID：10382231
> 
> 赞同：0
> 
> 时间：2012-04-30T10:34:51.927
> 
> 标签：mysql, jdbc

我有一个`INSERT`带有`IGNORE`选项的语句，因为我在插入语句中有一个唯一字段，它不是主键。我`getGeneratedKeys()`在对象上使用命令`PreparedStatement`来获取新生成的行的键。是否可以以某种方式配置 JDBC，以便在`IGNORE`触发查询的情况下返回被忽略行的 id？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T10:41:49.237

答案[mysql - after insert ignore get primary key](https://stackoverflow.com/questions/6291405/mysql-after-insert-ignore-get-primary-key)似乎表明需要多步解决方法来检索被忽略行的详细信息。

`REPLACE INTO`如果您可以负担替换行而不是忽略它们的额外开销，则可以使用可选的替代方法。

# java - 如何更新持久化 Java 对象的结构？

> ID：10382239
> 
> 赞同：1
> 
> 时间：2012-04-30T10:35:50.237
> 
> 标签：java, serialization

我遇到了 Java 序列化的问题。假设我有一个对象持久化到文件系统。我们如何根据后一个版本中的对象结构修改来更新文件的结构？

例如，如果我保存了 Object

```
A{int a; String b} to file 
```

我改变了一个结构，`A{int a; String b, char c}`有什么办法可以根据 A 的后一版本更改以前保存的文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T10:42:29.770

这是可能的。您需要使下一个版本与以前的版本向后兼容。Java 序列化规范中解释了执行此操作的方法：http: [//docs.oracle.com/javase/1.3/docs/guide/serialization/spec/version.doc.html](http://docs.oracle.com/javase/1.3/docs/guide/serialization/spec/version.doc.html)。

然而，这个问题是一个很好的例子，说明为什么使用本机 Java 序列化来长时间持久化对象通常是一个坏主意。如果您使用了特定格式（XML、JSON 或其他格式），您可以轻松读取和转换文件本身，或者能够读取具有不同序列化程序实现的文件的任何版本，从而更轻松地从一个版本迁移给另一个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T10:41:39.690

是的（只要结构*不太*不同并[遵守某些规则](http://docs.oracle.com/javase/1.3/docs/guide/serialization/spec/version.doc5.html)）。假设您的文件包含以下内容的序列化表示：

```
class Foo
{
  int a;                        // value = 42
  String b;                     // value = "don't panic"
} 
```

但是，您现在已经更改了`Foo`对象，并且类定义现在是：

```
class Foo
{
   int a;
   String b;
   char c;
} 
```

当读入你的文件时，序列化机制会自动弹出一个实例`Foo`，并将 a 设置为 42，将 b 设置为“不要恐慌”。for 的值`c`不在流中，因此默认情况下，它被设置为 Java 默认值（在本例中，对于 char，0x0000）。

现在你有了你的对象，你可以设置值`c`：

```
foo.c = 'Z'; 
```

如果您现在序列化您的对象并将其写入文件，则该文件将具有以下序列化表示：

```
class Foo
{
  int a;                        // value = 42
  String b;                     // value = "don't panic"
  char c;                       // value = 'Z'
} 
```

正如我们在上面看到的，`c`当在对象流中找不到它时，它被赋予了一个默认值。您可能想要定义不同的默认值。序列化机制为您在序列化/反序列化时执行自定义代码提供了一种方式。[有关详细信息，请查看用于 Serializable](http://docs.oracle.com/javase/6/docs/api/java/io/Serializable.html)的Javadoc （参见 的描述`readObject()`）。

* * *

编辑：正如 JB Nizet 指出的那样，有一个特殊的序列化字段称为`serialVersionUID`. 您需要确保对象中的版本 ID 与对象流中的内容相匹配。您可以像这样在对象中显式设置它：

```
private static final long serialVersionUID = 1L; 
```

但是，如果您最初没有指定它，它会使用从字段和方法签名的哈希算法生成的值自动写出。如果你需要重新生成这个数字（这样你就可以在你的类中将它定义为一个常量，你需要使用[serialver](http://docs.oracle.com/javase/6/docs/technotes/tools/solaris/serialver.html)工具。

# mvvm - 创建详细视图模型的最佳实践（在 Xaml 中）

> ID：10382242
> 
> 赞同：0
> 
> 时间：2012-04-30T10:36:08.367
> 
> 标签：mvvm, windows-runtime

我正在创建一个 Windows 8 应用程序（但我怀疑任何使用 Xaml 的人都可以帮助我）。它基本上归结为：一个带有产品列表的页面，单击产品会打开一个详细信息页面。

在我的组合根中，我解析了第一页的视图模型，并适当地设置了数据上下文，但我不确定当用户选择产品时将视图模型传递到第 2 页的最佳做法是什么。

据我所知，我有以下选择：-

*   第一个视图模型需要一个能够使用 .create(product) 方法为第 2 页创建视图模型的抽象工厂，这将被传递给第一个视图模型构造函数
*   让第二个视图模型实现一个带有产品属性的接口，允许我使用属性注入，并将第二个视图模型作为参数传递给第一个视图模型。
*   创建一个我知道许多人认为是反模式的服务定位器。

我有点茫然，但我怀疑抽象工厂是正确的方法，我想正确地做到这一点，因为对象图实际上是这个（产品->步骤->指令），所以任何重新工作可能需要相当多的时间，但这基本上意味着如果我沿着抽象工厂路线走，我的视图模型将采用三个抽象工厂，以及用于获取初始产品列表的服务（然后这是给定的代码气味它有多少参数！）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T11:18:23.943

在您想在运行时（从代码）中解析视图模型的情况下，工厂是要走的路。

为了更容易，我还会考虑使用一些 DI 框架。我相信 WinRT 不会有很多，但[autofac](http://code.google.com/p/autofac/downloads/detail?name=Autofac-2.6.1.841-Portable.zip)应该可以与 Metro 一起使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T16:33:17.497

如果您正在构建大型项目，则依赖注入可能是实现此目的的方法。就我个人而言，我通常只是在 Navigate() 调用中传递参数，并在 OnNavigatedTo 处理程序中使用这些参数初始化视图模型。

# javascript - 使用 JavaScript 连接数据库服务器有几种方法？

> ID：10382243
> 
> 赞同：-1
> 
> 时间：2012-04-30T10:36:15.930
> 
> 标签：javascript, jquery, mysql, oracle, sqlite

我想知道有多少种方法可以使用 JavaScript 获取服务器数据库，例如使用 mongo db、SQLite 或任何其他连接服务器数据库的方法

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T10:39:59.250

如果您在谈论客户端 Javascript，那是不可能的¹。

您必须将消息（可能使用[AJAX](http://en.wikipedia.org/wiki/Ajax_%28programming%29)或[WebSockets](http://en.wikipedia.org/wiki/WebSocket)）发送到在服务器上运行的脚本，然后服务器将连接到数据库。

* * *

¹实际上，在 HTML5 规范中有用于访问本地 SQLite 引擎的 WebDB，但它已被*弃用* [。](http://dev.w3.org/html5/webdatabase/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T08:35:03.093

感谢大家的宝贵建议，我使用了基于浏览器支持的本地数据库，方法如下：

```
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>SQL Storage</title>
<body>
    <br />
    <br />
    <div align="center">
        <input type="hidden" id="id" /> First name:<input type="text"
            id="firstName" /><br /> Last name:<input type="text" id="lastName" /><br />
        Phone: <input type="text" id="phone" /><br />
        <button onClick="resetForm()">Reset Form</button>
        <button onClick="updateRecord()">Update</button>
        <button onClick="insertRecord()">Insert</button>
        <button onClick="dropTable()">Drop Table</button>
        <div id="results"></div>
    </div>
</body>

<script>
    var results = document.getElementById('results');
    var id = document.getElementById('id');
    var firstName = document.getElementById('firstName');
    var lastName = document.getElementById('lastName');
    var phone = document.getElementById('phone');

    var createStatement = "CREATE TABLE IF NOT EXISTS Contacts (id INTEGER PRIMARY KEY AUTOINCREMENT, firstName TEXT, lastName TEXT, phone TEXT)";
    var selectAllStatement = "SELECT * FROM Contacts";
    var insertStatement = "INSERT INTO Contacts (firstName, lastName, phone) VALUES (?, ?, ?)";
    var updateStatement = "UPDATE Contacts SET firstName = ?, lastName = ?, phone = ? WHERE id = ?";
    var deleteStatement = "DELETE FROM Contacts WHERE id=?";
    var dropStatement = "DROP TABLE Contacts";
    try {
        var db = openDatabase("AddressBook", "1.0", "Address Book", 200000);
    } catch (e) {
        alert(e)
    }
    var dataset;
    createTable();

    function onError(tx, error) {
        alert(error.message);
    }

    function showRecords() {
        results.innerHTML = '';
        db.transaction(function(tx) {
            tx.executeSql(selectAllStatement, [], function(tx, result) {
                dataset = result.rows;
                for ( var i = 0, item = null; i < dataset.length; i++) {
                    item = dataset.item(i);
                    results.innerHTML += '<li>' + item['lastName'] + ' , '
                    item['firstName'] + ' <a href="#"     onclick="loadRecord('
                            + i + ')">edit</a>  '
                            + '<a href="#" onclick="deleteRecord(' + item['id']
                            + ')">delete</a></li>';
                }
            });
        });
    }

    function createTable() {
        db.transaction(function(tx) {
            tx.executeSql(createStatement, [], showRecords, onError);
        });
    }

    function insertRecord() {
        db.transaction(function(tx) {
            tx.executeSql(insertStatement, [ firstName.value, lastName.value,
                    phone.value ], loadAndReset, onError);
        });
    }

    function loadRecord(i) {
        var item = dataset.item(i);
        firstName.value = item['firstName'];
        lastName.value = item['lastName'];
        phone.value = item['phone'];
        id.value = item['id'];
    }

    function updateRecord() {
        db.transaction(function(tx) {
            tx.executeSql(updateStatement, [ firstName.value, lastName.value,
                    phone.value, id.value ], loadAndReset, onError);
        });
    }

    function deleteRecord(id) {
        db.transaction(function(tx) {
            tx.executeSql(deleteStatement, [ id ], showRecords, onError);
        });
        resetForm();
    }

    function dropTable() {
        db.transaction(function(tx) {
            tx.executeSql(dropStatement, [], showRecords, onError);
        });
        resetForm();
    }

    function loadAndReset() {
        resetForm();
        showRecords();
    }

    function resetForm() {
        firstName.value = '';
        lastName.value = '';
        phone.value = '';
        id.value = '';
    }
</script>
</html> 
```

# php - Javascript 表单（进行了推荐的更改但仍无法正常工作）

> ID：10382247
> 
> 赞同：-1
> 
> 时间：2012-04-30T10:36:23.993
> 
> 标签：php, javascript, html, forms, validation

您好，阅读了上一篇文章中建议进行的更改，但我看不到 JS 工作，我没有错误，有人可以告诉我哪里出错了吗？谢谢
当用户没有输入足够的字符或太多的字符时，此示例场景会更改文本的颜色。我还想知道是否可以将文本框的颜色也更改为红色。

```
<script type="text/javascript">
                function checkForm()
                {
                    var username = document.getElementsById('username').value;
                    if(username.length<5)
                    {
                        alert("Username is to short");
                        return false;
                    }
                    else if (username.lenght<16)
                    {
                        alert("Username is to long");
                        return false;
                    }
                    else
                    {
                    return true;    
                    }

                }

                function checkUsername()
                {
                    var username = document.getElementsById('username').value;
                    var element = document.getElementsById('username1');
                    if(username.lenght<5)
                    {
                        element.innerHTML = "Username is to short";
                        element.style.color = "red";
                    }
                    else if (username.lenght>16)
                    {
                        element.innerHTML = "Username is to long";
                        element.style.color = "red";
                    }
                    else
                    {
                        element.innerHTML = "Valid Username";
                        element.style.color = "green";
                    }
                }

    </script>
        <p><b><h3>Welcome User Please Register</h3></b></p>
        <form action="registerUserProcess.php" id="registerUserForm" method="post" name="registerUserForm" onSubmit='return checkForm();'>

    <table> 
    <tr><td><label id="username1">Username</label></td><td><input id="username" type="text" size="16" onBlur='checkUsername();'/></td></tr> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T10:40:31.327

问题出在你的标签上。当您调用时`document.getElementById('username')`，js 会搜索文档`id == username`并找到一个标签，而不是文本字段。将您的标签 id 切换为 sth like`label_username`并添加`id='username'`到您的输入定义中。

# c - 使用 printf 的不一致

> ID：10382248
> 
> 赞同：5
> 
> 时间：2012-04-30T10:36:24.260
> 
> 标签：c, function, sqrt

我正在使用带有 GNU GCC 编译器的代码块。我正在尝试这段代码

```
int number,temp;

printf("Enter a number :");
scanf("%d",&number);
temp = sqrt(number);
printf("\n%d",sqrt(number)); //print 987388755 -- > wrong result
printf("\n%d",temp); //print 3 -- > write result

return 0; 
```

在这段代码中，输入值 10 的结果是

```
987388755  
3 
```

这段代码有什么问题？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-30T10:38:20.030

`sqrt`返回一个双精度：

```
double sqrt(double x); 
```

你需要：

```
printf("\n%g",sqrt(number)); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-30T10:39:45.383

`printf()`在调用中使用不正确的格式说明符`Undefined Behaviour`。`sqrt()`返回 double 但您使用`%d`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T10:39:33.200

改变：

```
printf("\n%d",sqrt(number)); 
```

到：

```
printf("\n%g",sqrt(number)); 
```

请注意，`sqrt()`返回 a `double`，而不是`int`- 您的编译器应该对此发出警告，只要您启用了警告。例如`gcc -Wall ...`（如果您没有启用警告，那么是时候开始养成它的习惯了）。

# c# - 如何动态删除动态创建的 DIV 控件

> ID：10382249
> 
> 赞同：0
> 
> 时间：2012-04-30T10:36:25.387
> 
> 标签：c#, dynamic, html

我使用 C# 动态创建了几个 div。现在我想使用动态创建的 div 的 ID 从显示的 div 中删除几个 div。我尝试了很多方法，但没有解决。所以请我提出解决方案。我使用下面的代码创建了大约 200 个节点。我想使用内容或 div id 删除。请建议我解决这个问题的最佳方法。

public void draw_node(int id, int top, int left, string content) { string topstr = Convert.ToString(top) + "px"; 字符串 leftstr = Convert.ToString(left) + "px";

```
 System.Web.UI.HtmlControls.HtmlGenericControl dynDiv =
    new System.Web.UI.HtmlControls.HtmlGenericControl("DIV");
    dynDiv.ID = "window" + Convert.ToString(id); // like window1, window2, window3
    dynDiv.Attributes["class"] = "component window";
    dynDiv.Style.Add(HtmlTextWriterStyle.Top, topstr);
    dynDiv.Style.Add(HtmlTextWriterStyle.Left, leftstr);
    dynDiv.InnerHtml = content; // some no. like 1, 2, 3, 4
    this.Controls.Add(dynDiv);

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T10:39:12.327

你可以使用 jquery （[文档](http://api.jquery.com/remove/)）：

```
<div class="container">
  <div class="hello">Hello</div>
      <div id="a" class="goodbye">Goodbye</div>
    </div>

<script>

    $('div').remove('.hello');

    or

    $('div').remove('#a');

</script> 
```

或作为动态功能：

```
 <script>
function removeDIVbyID(ID)
{
$('div').remove('#'+ID);
}       

    </script> 
```

# ruby-on-rails - 无法发送带有 html 内容的表单

> ID：10382250
> 
> 赞同：0
> 
> 时间：2012-04-30T10:36:26.197
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ckeditor

您好，我的 rails 3.0 表单有一个非常烦人的问题。我正在使用 CKEditor 让用户编辑其页面的 html 内容。在 rails 2 中一切正常，他制作了很多带有 html 内容的页面。但是后来我需要将 rails gem 更新到 3.0.1，因为这是需要的（服务器管理员更新到 rails 3 并删除了 2）。

在此更改之后，他想为新的季节（以旅游为导向的业务）编辑页面。某些页面无法更新我得到一个

```
403 Forbidden

Access to this resource on the server is denied!` 
```

它让我发疯，我尝试了所有可能相关的解决方案，但仍然没有运气。

我认为这可能与随表单提交的 html 内容有关，因为当我删除内容并放置一些简单的段落文本时，它可以正常工作。但我不知道会是什么。

这是一个示例表格

```
<form accept-charset="UTF-8" action="/pages/113" class="jNice" id="edit_page_113" method="post"><div style="margin:0;padding:0;display:inline"><input name="utf8" type="hidden" value="&#x2713;" /><input name="_method" type="hidden" value="put" /><input name="authenticity_token" type="hidden" value="w5ZUDHYHnFKHhLQc6UO/a3zwbN5p6JMgKYUWlVhbMiU=" /></div>
<fieldset>
<p>
<label for="page_category_id">Kategoria:</label>
<select id="page_category_id" name="page[category_id]"><option value=""></option>
<option value="13">School And Study Tours Groups</option>
<option value="23" selected="selected">Regular &amp; Group Tours To Poland </option>
<option value="14">Jewish History And Heritage Tours</option>
</select>
</p>
<p>
<label for="page_name">Nazwa podstrony:</label>
<input id="page_name" name="page[name]" size="30" type="text" value="Poland in a week - the Southern face" />
</p>
<p>
<label for="page_cities">Miasta imprezy:</label>
<input id="page_cities" name="page[cities]" size="30" type="text" value="Warsaw - Krakow - Wieliczka - Auschwitz - Czestochowa" />
</p>
<p>
<label for="page_keywords">Słowa kluczowe:</label>
<input id="page_keywords" name="page[keywords]" size="30" type="text" value="Poland tour,  tour of Warsaw, tours of Cracow, czestochowa Jasna gora tour" />
</p>
<p>
<label for="page_description">Skrócony opis:</label>
<input id="page_description" name="page[description]" size="30" type="text" value="2012 tour to Poland with visit to Wieliczka Salt Mine and Czestochowa " />
</p>
<p>
<label for="page_tour_of_the_month">Tour of the month na stronie głównej?:</label>
<input name="page[tour_of_the_month]" type="hidden" value="0" /><input id="page_tour_of_the_month" name="page[tour_of_the_month]" type="checkbox" value="1" />
</p>
<p>
<label for="page_html_body">Zawartość:</label>
<textarea class="ckeditor" cols="40" id="page_html_body" name="page[html_body]" rows="20">test</textarea>
</p>
<p>
<label for="page_published">Opublikowana?:</label>
<input name="page[published]" type="hidden" value="0" /><input checked="checked" id="page_published" name="page[published]" type="checkbox" value="1" />
</p>
<p>
<label for="page_show_request_link">Pokaż link rezerwacyjny?:</label>
<input name="page[show_request_link]" type="hidden" value="0" /><input checked="checked" id="page_show_request_link" name="page[show_request_link]" type="checkbox" value="1" />
</p>
</fieldset>

<p><input id="page_submit" name="commit" type="submit" value="edytuj" /></p>
</form> 
```

这是 routes.rb 文件的内容

```
Gfp3::Application.routes.draw do
  resources :newscasts do
    get :publish, :on => :member
  end

  resources :links
  resources :payments
  resources :fronts
  resources :categories do
    collection do
       :sort
    end
  end

  resources :pages do
    get :publish, :on => :member
  end
  resources :menus

  match 'login',:to=>'index#login'
  match 'logout', :to=>'index#logout'
  match 'images', :to=>'images#index'
  match 'images/upload', :to=>'images#upload'
  match 'front_page',:to=>'front_page#index'
  match 'search',:to=>'index#search'

  match ':controller(/:action(/:id(.:format)))'
  root :to => 'index#index'
    match ':id',:to=>"pages#show"
end 
```

这些是应用程序中使用的宝石

```
gem 'mongrel'
gem 'rails', '3.0.1'
gem 'haml'

gem "will_paginate", "3.0.pre2"
gem 'mysql',"2.8.1" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T11:05:28.303

看起来路由错误定义或未定义

# python - 什么是正则括号的非分组版本

> ID：10382251
> 
> 赞同：3
> 
> 时间：2012-04-30T10:36:33.187
> 
> 标签：python, regex

> **可能重复：**
> [非捕获组？](https://stackoverflow.com/questions/3512471/non-capturing-group)

从 python re 模块文档中，我看到：

```
(?:...)  Non-grouping version of regular parentheses. 
```

和

```
(...)    Matches the RE inside the parentheses.
         The contents can be retrieved or matched later in the string. 
```

有什么不同？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-30T10:38:12.903

很快：非分组意味着它不会被匹配到一个组中。也就是说，例如，您不能通过 \1 引用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T10:42:35.497

区别基本上就是肯特所说的。

它可能对非常复杂的正则表达式有用，或者在应用到性能至关重要的大量文本时很有用。

此外，如果你在你的正则表达式中使用了很多分组，但只有其中一些被引用（用于文本替换或任何原因），那么只有你*真正*需要的那些作为捕获组更简单，所以你可以然后从\1（或$1，取决于）到\n，而不是跳过数字。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T10:43:03.150

非分组允许您在匹配字符串中使用一系列字符，而不会将其作为实际匹配项之一返回。例如，假设您正在搜索收据，并且只想提取商品的价格。假设您的收据如下所示：

```
milk 1.25
bread 1.15
deli meat 5.25
total 7.65 
```

您可以使用非分组括号来排除价格为总计但捕获所有其他价格的行。

# python - 读取相当大的 JSON 文件

> ID：10382253
> 
> 赞同：106
> 
> 时间：2012-04-30T10:36:35.370
> 
> 标签：python, json

> **可能重复：**
> [是否有一种内存高效且快速的方式来加载大型 JSON 文件？](https://stackoverflow.com/questions/2400643/is-there-a-memory-efficient-and-fast-way-to-load-big-json-files)

所以我有一些相当大的 json 编码文件。最小的是 300MB，但这是迄今为止最小的。其余的是多 GB，从大约 2GB 到 10GB+ 不等。

因此，在尝试使用 Python 加载文件时，我似乎内存不足。我目前正在运行一些测试，以大致了解处理这些东西需要多长时间才能看到从这里开始的地方。这是我用来测试的代码：

```
from datetime import datetime
import json

print datetime.now()

f = open('file.json', 'r')
json.load(f)
f.close()

print datetime.now() 
```

毫不奇怪，Python 给了我一个 MemoryError。似乎 json.load() 调用了 json.loads(f.read())，它试图首先将整个文件转储到内存中，这显然是行不通的。

有什么办法可以干净地解决这个问题吗？

我知道这是旧的，但我不认为这是重复的。虽然答案是一样的，但问题是不同的。在“重复”中，问题是如何有效地读取大文件，而这个问题处理的文件甚至根本不适合内存。效率不是必需的。

* * *

## 回答 #1

> 赞同：108
> 
> 时间：2012-04-30T10:44:52.900

这里的问题是，JSON作为一种格式，一般都是先完整解析，然后在内存中处理，对于如此大量的数据，这显然是有问题的。

对此的解决方案是将数据作为流处理 - 读取文件的一部分，使用它，然后重复。

最好的选择似乎是使用[ijson](http://pypi.python.org/pypi/ijson/)之类的东西- 一个将 JSON 作为流而不是块文件使用的模块。

编辑：也值得一看 - [kashif 的评论](https://stackoverflow.com/questions/10382253/reading-rather-large-json-files-in-python/10382359#comment43555683_10382359)和[`json-streamer`](https://github.com/kashifrazzaqui/json-streamer)Henrik [Heino 的](https://stackoverflow.com/questions/10382253/reading-rather-large-json-files-in-python/10382359#comment64978638_10382359)评论[`bigjson`](https://github.com/henu/bigjson).

# ffmpeg - ffmpeg libz.so 依赖

> ID：10382256
> 
> 赞同：0
> 
> 时间：2012-04-30T10:36:55.963
> 
> 标签：ffmpeg, zlib, libz

我们正在尝试在我们的 RH linux 服务器上安装 ffmpeg。

麻烦的是它对一个不起作用，我们不知道为什么。工作服务器和非工作服务器具有相同的配置信息：

```
    ffmpeg 版本 0.10.2 版权所有 (c) 2000-2012 FFmpeg 开发者
    使用 gcc 4.1.2 20080704 (Red Hat 4.1.2-51) 于 2012 年 4 月 19 日 14:00:25 构建
    配置： --enable-gpl --enable-version3 --enable-shared --enable-nonfree --enable-postproc --enable-libfaac --enable-libmp3lame --enable-libopencore-amrnb --enable-libopencore- amrwb --enable-libtheora --enable-libvorbis --enable-libvpx --enable-libx264 --enable-libxvid --enable-x11grab --extra-cflags=-I/usr/local/include --extra-ldflags =-L/usr/local/lib
    libavutil 51\. 35.100 / 51\. 35.100
    libavcodec 53\. 61.100 / 53\. 61.100
    libavformat 53\. 32.100 / 53\. 32.100
    libav 设备 53\. 4.100 / 53\. 4.100
    libavfilter 2\. 61.100 / 2\. 61.100
    libswscale 2\. 1.100 / 2\. 1.100
    libswresample 0\. 6.100 / 0\. 6.100
    libpostproc 52\. 0.100 / 52\. 0.100
    超快速音频和视频编码器

```

我们得到的错误是：

```
    ffmpeg 版本 0.10.2 版权所有 (c) 2000-2012 FFmpeg 开发者
      使用 gcc 4.1.2 20080704 (Red Hat 4.1.2-51) 于 2012 年 4 月 19 日 14:00:25 构建
      配置： --enable-gpl --enable-version3 --enable-shared --enable-nonfree --enable-postproc --enable-libfaac --enable-libmp3lame --enable-libopencore-amrnb --enable-libopencore- amrwb --enable-libtheora --enable-libvorbis --enable-libvpx --enable-libx264 --enable-libxvid --enable-x11grab --extra-cflags=-I/usr/local/include --extra-ldflags =-L/usr/local/lib
    libavutil 51\. 35.100 / 51\. 35.100
    libavcodec 53\. 61.100 / 53\. 61.100
    libavformat 53\. 32.100 / 53\. 32.100
    libav 设备 53\. 4.100 / 53\. 4.100
    libavfilter 2\. 61.100 / 2\. 61.100
    libswscale 2\. 1.100 / 2\. 1.100
    libswresample 0\. 6.100 / 0\. 6.100
    libpostproc 52\. 0.100 / 52\. 0.100
    输入#0，mov，mp4，m4a，3gp，3g2，mj2，来自“4598_Testvideo_MP4-H264-6MBit_AAC-44KHz-192KBit_720p.mp4”：
      元数据：
        主要品牌：mp42
        次要版本：0
        兼容品牌：mp42mp41
        创建时间：2012-01-25 10:58:21
      时长：00:02:13.56，开始：0.000000，比特率：5472 kb/s
        流 #0:0（eng）：视频：h264（主要）（avc1 / 0x31637661）、yuv420p、1280x720 [SAR 1:1 DAR 16:9]、5280 kb/s、25 fps、25 tbr、25k tbn、50待定
        元数据：
          创建时间：2012-01-25 10:58:21
          handler_name : Mainconcept MP4 视频媒体处理程序
        流 #0:1(eng)：音频：aac (mp4a / 0x6134706D)，44100 Hz，立体声，s16，189 kb/s
        元数据：
          创建时间：2012-01-25 10:58:21
          handler_name : Mainconcept MP4 声音媒体处理程序
    [缓冲区@ 0x3160ea0] w:1280 h:720 pixfmt:yuv420p tb:1/1000000 sar:1/1 sws_param:
    [比例@ 0x31629a0] w:1280 h:720 fmt:yuv420p -> w:480 h:270 fmt:yuv420p 标志：0x4
    [libvpx@0x314ab40] v0.9.6
    [libvpx @ 0x314ab40] 无法初始化编码器：ABI 版本不匹配
    输出#0，webm，到“outputvideo.webm”：
      元数据：
        主要品牌：mp42
        次要版本：0
        兼容品牌：mp42mp41
        创建时间：2012-01-25 10:58:21
        流 #0:0(eng)：视频：vp8、yuv420p、480x270 [SAR 1:1 DAR 16:9]、q=-1--1、2500 kb/s、90k tbn、25 tbc
        元数据：
          创建时间：2012-01-25 10:58:21
          handler_name : Mainconcept MP4 视频媒体处理程序
        流 #0:1(eng)：音频：无，44100 Hz，立体声，s16，128 kb/s
        元数据：
          创建时间：2012-01-25 10:58:21
          handler_name : Mainconcept MP4 声音媒体处理程序
    流映射：
      流 #0:0 -> #0:0 (h264 -> libvpx)
      流 #0:1 -> #0:1 (aac -> libvorbis)
    为输出流 #0:0 打开编码器时出错 - 可能是不正确的参数，例如 bit_rate、rate、width 或 height

```

我查看了使用 ldd 的依赖库，确实发现了一个不同的库。库 libz.so 不是系统中不起作用的列表。IE

```
    /lib64/ld-linux-x86-64.so.2 (0x00000035a9000000)
    libavcodec.so.53 => /usr/local/lib/libavcodec.so.53 (0x00002ae5189a8000)
    libavdevice.so.53 => /usr/local/lib/libavdevice.so.53 (0x00002ae518204000)
    libavfilter.so.2 => /usr/local/lib/libavfilter.so.2 (0x00002ae51840e000)
    libavformat.so.53 => /usr/local/lib/libavformat.so.53 (0x00002ae51869c000)
    libavutil.so.51 => /usr/local/lib/libavutil.so.51 (0x00002ae519e17000)
    libc.so.6 => /lib64/libc.so.6 (0x00000035a9400000)
    libfaac.so.0 => /usr/lib64/libfaac.so.0 (0x0000003407800000)
    libgcc_s.so.1 => /lib64/libgcc_s.so.1 (0x00000035ac000000)
    libmp3lame.so.0 => /usr/lib64/libmp3lame.so.0 (0x0000003407000000)
    libm.so.6 => /lib64/libm.so.6 (0x00000035aa000000)
    libogg.so.0 => /usr/local/lib/libogg.so.0 (0x00002ae51b35b000)
    libopencore-amrnb.so.0 => /usr/lib64/libopencore-amrnb.so.0 (0x0000003409800000)
    libopencore-amrwb.so.0 => /usr/lib64/libopencore-amrwb.so.0 (0x0000003407c00000)
    libpostproc.so.52 => /usr/local/lib/libpostproc.so.52 (0x00002ae5197ba000)
    libpthread.so.0 => /lib64/libpthread.so.0 (0x00000035a9c00000)
    libstdc++.so.6 => /usr/lib64/libstdc++.so.6 (0x00000035aa400000)
    libswresample.so.0 => /usr/local/lib/libswresample.so.0 (0x00002ae5199c6000)
    libswscale.so.2 => /usr/local/lib/libswscale.so.2 (0x00002ae519bce000)
    libtheoradec.so.1 => /usr/local/lib/libtheoradec.so.1 (0x00002ae51b141000)
    libtheoraenc.so.1 => /usr/local/lib/libtheoraenc.so.1 (0x00002ae51af05000)
    libvorbisenc.so.2 => /usr/lib64/libvorbisenc.so.2 (0x00002ae51a8fe000)
    libvorbis.so.0 => /usr/lib64/libvorbis.so.0 (0x00002ae51acd9000)
    libvpx.so.0 => /usr/lib64/libvpx.so.0 (0x00002ae51a687000)
    libx264.so.120 => /usr/local/lib/libx264.so.120 (0x00002ae51a320000)
    libxvidcore.so.4 => /usr/lib64/libxvidcore.so.4 (0x00002ae51a03a000)
    linux-vdso.so.1 => (0x00007ffff63f6000)

```

与

```
    /lib64/ld-linux-x86-64.so.2 (0x0000003074c00000)
    libavcodec.so.53 => /usr/local/lib/libavcodec.so.53 (0x00002b2038eeb000)
    libavdevice.so.53 => /usr/local/lib/libavdevice.so.53 (0x00002b2038746000)
    libavfilter.so.2 => /usr/local/lib/libavfilter.so.2 (0x00002b2038950000)
    libavformat.so.53 => /usr/local/lib/libavformat.so.53 (0x00002b2038bdf000)
    libavutil.so.51 => /usr/local/lib/libavutil.so.51 (0x00002b203a368000)
    libc.so.6 => /lib64/libc.so.6 (0x0000003075000000)
    libfaac.so.0 => /usr/lib64/libfaac.so.0 (0x00002b203bcef000)
    libgcc_s.so.1 => /lib64/libgcc_s.so.1 (0x0000003003400000)
    libmp3lame.so.0 => /usr/lib64/libmp3lame.so.0 (0x000000310ae00000)
    libm.so.6 => /lib64/libm.so.6 (0x0000003075c00000)
    libogg.so.0 => /usr/lib64/libogg.so.0 (0x00002b203bf01000)
    libopencore-amrnb.so.0 => /usr/lib64/libopencore-amrnb.so.0 (0x00002b203bac1000)
    libopencore-amrwb.so.0 => /usr/lib64/libopencore-amrwb.so.0 (0x00002b203b8ab000)
    libpostproc.so.52 => /usr/local/lib/libpostproc.so.52 (0x00002b2039d0b000)
    libpthread.so.0 => /lib64/libpthread.so.0 (0x0000003075800000)
    libstdc++.so.6 => /usr/lib64/libstdc++.so.6 (0x000000360ea00000)
    libswresample.so.0 => /usr/local/lib/libswresample.so.0 (0x00002b2039f18000)
    libswscale.so.2 => /usr/local/lib/libswscale.so.2 (0x00002b203a11f000)
    libtheoradec.so.1 => /usr/local/lib/libtheoradec.so.1 (0x00002b203b693000)
    libtheoraenc.so.1 => /usr/local/lib/libtheoraenc.so.1 (0x00002b203b457000)
    libvorbisenc.so.2 => /usr/lib64/libvorbisenc.so.2 (0x00002b203ae50000)
    libvorbis.so.0 => /usr/lib64/libvorbis.so.0 (0x00002b203b22a000)
    libvpx.so.0 => /usr/lib64/libvpx.so.0 (0x00002b203abd9000)
    libx264.so.120 => /usr/local/lib/libx264.so.120 (0x00002b203a871000)`在此处输入代码`
    libxvidcore.so.4 => /usr/lib64/libxvidcore.so.4 (0x00002b203a58c000)
    libz.so.1 => /lib64/libz.so.1 (0x0000003076000000)
    linux-vdso.so.1 => (0x00007fff6adfd000)

```

我想问这是否与问题有关。在我试图弄清楚 libz.so 是如何出现在一个列表中而不是另一个列表中之前。

顺便说一句，ld.so.conf 文件是相同的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T02:35:26.390

一个版本没有引用 zlib 而另一个版本没有引用，这有点不寻常。但是，除非您使用依赖于 zlib 的格式（几个容器和编解码器可以），否则这不会导致问题。在这种情况下不是。

错误文本中详细说明了具体问题：

```
[libvpx @ 0x314ab40] v0.9.6
[libvpx @ 0x314ab40] Failed to initialize encoder: ABI version mismatch 
```

FFmpeg 和 libvpx 相处不融洽。

看起来你是从最新的源代码自己编译的 FFmpeg。libvpx 是从哪里来的？从 Red Hat RPM 安装？还是自己编译？您是否在其中一个 RH 机器上进行编译，然后将二进制文件移动到另一个？

# sql-server-2005 - SQL 服务器，更喜欢全文索引还是行长？

> ID：10382260
> 
> 赞同：1
> 
> 时间：2012-04-30T10:37:05.713
> 
> 标签：sql-server-2005, full-text-search, full-text-indexing

我需要在几列表上创建全文索引（使用 SQL Server 2005），其长度大于行大小（8KB）（每个记录有一个唯一键）。我应该简单地忽略行长，还是有任何解决方案？情况是这样的：

要（从全文索引）获取与整个记录相关的行 ID 和排名（例如，记录的所有文本列，文章），我需要创建包含该表中所有文本列的表。但我有几个大列，总和超过 8KB 行大小（由 sql server 定义）。

当前状态：所有语言的所有文本都在一个表中：

```
idParent | langId | textType | content
-------------------------------------------------
12       | en     | title    | 'Title of article' 
```

新状态：从全文索引中获得正确的排名：

```
id |  title  | contentA | contentB | contentC | contentD | contendE | content F ...
----------------------------------------------------------------------------------
12 | 'Title' | ... 
```

如果我想利用全文索引的语言属性，是否需要将不同语言的数据存储到其他表/列中（以便能够在列上设置语言）？或者其他解决方案是在一个带有语言标识符的表中包含数据（包含语言 ID 的列）？

谢谢你的答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T10:40:23.663

我没看懂你的第一个问题，你能说得清楚一点吗？

关于第二个，是的，如果您希望您的全文适用于不同的语言，您需要在目录中为每种语言提供列。全文高度依赖排序规则（不同的语言=不同的排序规则）

# java - 如何根据用户所属的国家/地区设置区域设置值

> ID：10382263
> 
> 赞同：0
> 
> 时间：2012-04-30T10:37:14.133
> 
> 标签：java, internationalization

目前我的 J2EE 应用程序支持以下国家

```
MessagesBundle_en_GB.properties (United Kingdom )
MessagesBundle_en_US.properties (United States )
MessagesBundle_it_IT.properties (Italy )
MessagesBundle_pt_BR.properties (Brazil )
MessagesBundle_sv_SE .properties (Sweden) 
```

所以我为上面所有这些国家制作了一个属性文件，并在其中定义了键值对。我正在为这个概念使用资源包。

我将访问密钥名称的方式是这种方式

```
bundle.getString("userName"));
bundle.getString("Mobile")); 
```

现在我的问题是，

我如何在 JSP 页面中设置 Locale 值，因为用户可能属于上述任何国家/地区

请告诉我，非常感谢

// 这个是硬编码的，如何动态设置？

```
ResourceBundle bundle = ResourceBundle.getBundle("MessagesBundle", Locale.UK); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T10:48:20.090

用于`ResourceBundle.getBundle(BUNDLE_NAME).getString(key);`访问字符串。

当更新默认语言环境时，例如通过`Locale.setDefault(<REQUIRED_LOCALE>);`清除 Resourcebundle 缓存：ResourceBundle.clearCache();

下一次调用`ResourceBundle.getBundle(BUNDLE_NAME).getString(key);`应该返回所选语言环境的本地化字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T09:33:25.673

首先要做的事情：您可以`ResourceBundle.getBundle(Locale)`在***后端***代码中使用。但是，您不应该***直接***在 JSP 页面中使用它。您应该[改用](http://docs.oracle.com/javaee/1.4/tutorial/doc/JSTL3.html) [JSTL](http://www.oracle.com/technetwork/java/jstl-137486.html)。现在，让我们进入细节。

没有必要直接使用 ResourceBundle 的好主意有两个原因。一个与此有关：

```
<% 
try {
  ResourceBundle rb = ResourceBundle.getBundle("messages", locale);
} catch (MissingResourceException mre) {
   // LOG THIS!
}
%> 
```

这看起来很丑陋，不是吗？那是因为如果没有您要查找的基本名称的捆绑包，您必须注意将抛出的[MissingResourceException 。](http://docs.oracle.com/javase/7/docs/api/java/util/MissingResourceException.html)更糟糕的是，如果给定场景中没有密钥，则可能会引发相同的异常：

```
rb.getString("key"); 
```

所以你还需要考虑到这一点：

```
<% 
try {
  rb.getString("key");
} catch (MissingResourceException mre) {
   // LOG THIS!
}
%> 
```

它看起来怎么样？
当然，您可以从 ResourceBundle 派生并覆盖这些方法，这样它们就不会抛出异常，但这比这要多得多：

```
<fmt:setLocale value="fr_CA" scope="session"/>
<fmt:bundle basename="com.taglib.weblog.Greeting">
<fmt:message key="com.taglib.weblog.Greeting.greeting"> 
```

这就是您应该将 JSTL 与 JSP 一起使用的原因。[在本文](http://www.ibm.com/developerworks/java/library/j-jstl0415/)中阅读有关如何将 JSTL 用于 i18n 的更多信息。

现在，您最初的问题是关于语言协商（W3C 术语）或区域设置检测（如果您愿意）。如何在 JSP 应用程序中做到这一点？
最简单和最典型的场景是读取 HTTP 的 Accept-Language 标头的内容。在 Java Servlet 世界中，这意味着调用[ServletRequest 的](http://www.ibm.com/developerworks/java/library/j-jstl0415/) [getLocale()](http://docs.oracle.com/javaee/6/api/javax/servlet/ServletRequest.html#getLocale%28%29)或[getLocales()](http://docs.oracle.com/javaee/6/api/javax/servlet/ServletRequest.html#getLocales%28%29)方法并分配给[HttpSession](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpSession.html)对象中的变量，该对象可从 JSP 页面访问。如果你想知道如何在 servlet 端访问 HttpSession，有一个[getSession()](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpServletRequest.html#getSession%28%29)方法。

如果您可以直接访问 Servlet，这将有效。如果您不需要创建（或分配现有的）区域设置过滤器，它将为您完成所有这些工作。正如您可能想象的那样，这是相当常见的情况。这就是人们已经（很久以前）编写必要课程的原因。你可以在几个框架中找到，让我特别提到[Spring Framework](https://stackoverflow.com/q/5244776/247221)。
我知道这听起来可能很奇怪，但是如果您正在寻找简单的解决方案，学习和使用通用 Web 框架（即 Spring MVC）比重新发明轮子更好。我知道学习曲线可能有点陡峭，但这是值得的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T10:44:58.283

最简单的方法是实现`HttpFilter`. 例如，在 web.xml 中调用它 LocaleHttpFilter `. It should be mapped to`/*`，因此每次请求到达您的应用程序时都会调用它。

过滤器将发现您的请求并决定当前的语言环境。它可以根据 URL 参数、HTTP 标头、GeoIP 查找等做出决定。一旦决定了它应该调用的语言环境：

`Locale.setDefault(locale)`

然后你可以使用

`ResourceBundle.getBundle("MessageBundle").getString("hello");`

在您的代码中的任何位置。此行将`"hello"`根据设置到过滤器中的当前语言环境返回字符串值。

# php - 基于字符串排序数组？

> ID：10382280
> 
> 赞同：0
> 
> 时间：2012-04-30T10:38:58.550
> 
> 标签：php, arrays

我有一个需要重新排序的数组。它是一系列国家/地区代码：

```
$countries = array('uk', 'fr', 'es', 'de', 'it'); 
```

我需要首先使用特定用户选择的国家/地区对数组进行排序，即。'fr' 和其余项目需要按字母顺序排列。

我不太确定如何做到这一点，任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T10:44:30.250

```
$countries = array('uk', 'fr', 'es', 'de', 'it');
// find and remove user value
$uservar = 'uk';
$userkey = array_search($uservar, $countries);
unset($countries[$userkey]);
// sort ascending
sort($countries,SORT_ASC);
// preappend user value
array_unshift($countries, $uservar); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-30T10:45:07.810

这有点长，但应该可以。

```
<?php
   $user_selected = 'fr';

   $countries = array('uk', 'fr', 'es', 'de', 'it');
   unset($countries[ array_search($user_selected, $countries) ]); // remove user selected from the list
   sort($countries); // sort the rest

   array_unshift($countries, $user_selected); // put the user selected at the beginning

   print_r($countries);
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T10:43:48.960

```
// The option the user selected
$userSelectedOption = 'fr';

// Remove the user selected option from the array
array_splice($countryCodes, array_search($userSelectedOption, $countryCodes), 1);

// Sort the remaining items
sort($countryCodes, SORT_ASC);

// Add the user selected option back to the beginning
array_unshift($countryCodes, $userSelectedOption); 
```

# c++ - iterator 和 const_iterator (STL) 效率不同

> ID：10382281
> 
> 赞同：6
> 
> 时间：2012-04-30T10:39:03.233
> 
> 标签：c++, stl, iterator

在 Qt 中有类似的类来列出地图。这些类提供了一个返回 const_iterator 的 begin_const() 方法。文档说这些 const_iterators 应该尽可能使用，因为它们更快。

如果实例本身是 const，STL 只会给你一个 const_iterator。只实现了一个 begin() 方法（为 const 重载）。

**使用 iterator 和 const_iterator 读取访问元素时有什么区别吗？**（我不知道为什么他们在 Qt 中有所不同）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-30T12:01:48.307

> 文档说这些 const_iterators 应该尽可能使用，因为它们更快。

确实如此。来自 http://qt-project.org/doc/qt-4.8/containers.html#stl-style-iterators：

> 对于每个容器类，有两种 STL 风格的迭代器类型：一种提供只读访问，另一种提供读写访问。应尽可能使用只读迭代器，因为它们比读写迭代器更快。

说什么傻话。

更安全？是的。快点？即使是这种情况（显然不是 gcc 和 clang），也很少有理由选择 const 迭代器而不是非 const 迭代器。这是过早的优化。相比非 const 迭代器更喜欢 const 迭代器的原因是安全性。如果您不需要修改指向的内容，请使用 const 迭代器。想想一些维护程序员会对你的代码做什么。

就`begin`vs.`cbegin`而言，这是 C++11 的新增功能。这允许`auto`关键字使用 const 迭代器，即使在非常量设置中也是如此。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-30T16:19:28.747

使用 const 的最佳理由是避免错误并使代码的意图更加清晰。

可以想象，在某些情况下，编译器可以执行一些非 const 迭代器无法实现的优化。别名（当多个变量和参数可能引用同一个对象时）通常是某些优化的抑制剂。如果编译器可以通过指出 const-iterator 永远不能更改值来排除某些形式的别名，那么它可能会启用一些优化。

另一方面，我希望编译器能够以这种方式使用 constness，从而能够通过流分析得出相同的结论。

# sql - 将标识列添加到 SQL Server 2008 中的视图

> ID：10382287
> 
> 赞同：15
> 
> 时间：2012-04-30T10:39:44.557
> 
> 标签：sql, sql-server, sql-server-2008, tsql, view

这是我的看法：

```
Create View [MyView] as
(
Select col1, col2, col3 From Table1
UnionAll
Select col1, col2, col3 From Table2
) 
```

我需要添加一个名为的新列`Id`，并且我需要此列是唯一的，所以我想添加新列作为标识。我必须提到这个视图返回了大量数据，所以我需要一种性能良好的方法，而且我使用两个选择查询和联合所有我认为这可能有些复杂所以你的建议是什么？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-04-30T10:42:19.423

使用`ROW_NUMBER()`SQL Server 2008 中的函数。

```
Create View [MyView] as

SELECT ROW_NUMBER() OVER( ORDER BY col1 ) AS id, col1, col2, col3
FROM(
    Select col1, col2, col3 From Table1
    Union All
    Select col1, col2, col3 From Table2 ) AS MyResults
GO 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-30T10:45:05.830

该视图只是一个不包含数据本身的存储查询，因此您可以添加一个稳定的 ID。如果您需要一个 id 用于其他目的，例如分页，您可以执行以下操作：

```
create view MyView as 
(
    select row_number() over ( order by col1) as ID, col1 from  (
        Select col1 From Table1
        Union All
        Select col1 From Table2
    ) a
) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-14T04:19:23.533

除非满足以下条件，否则无法保证使用 ROW_NUMBER() 的查询返回的行在每次执行时的顺序完全相同：

1.  分区列的值是唯一的。[分区是父子，好像一个老板有3个员工][忽略]
2.  ORDER BY 列的值是唯一的。[如果第 1 列是唯一的，row_number 应该是稳定的]
3.  分区列和 ORDER BY 列的值组合是唯一的。[如果您需要按顺序排列 10 列来获得唯一性...去使 row_number 稳定]"

这里有一个次要问题，这是一种观点。Order By 并不总是在视图中工作（长期的 sql 错误）。忽略 row_number() 一秒钟：

```
create view MyView as 
(
    select top 10000000 [or top 99.9999999 Percent] col1 
    from  (
        Select col1 From Table1
        Union All
        Select col1 From Table2
    ) a order by col1
) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-04-02T08:51:12.443

使用“row_number() over (order by col1) 作为 ID”非常昂贵。这种方式在成本上效率更高：

```
Create View [MyView] as
(
    Select ID = isnull(cast(newid() as varchar(40)), '')
           , col1
           , col2
           , col3 
    From Table1
    UnionAll
    Select ID = isnull(cast(newid() as varchar(40)), '')
           , col1
           , col2
           , col3 
    From Table2
) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-10-21T12:52:59.593

将 ROW_NUMBER() 与“order by (select null)”一起使用，这将更便宜，并且会得到你的结果。

```
Create View [MyView] as
SELECT ROW_NUMBER() over (order by (select null)) as id, *
FROM(
    Select col1, col2, col3 From Table1
    Union All
    Select col1, col2, col3 From Table2 ) R
GO 
```

# jquery - JQuery 以分离形式填写输入（隐藏填写但其他不填写）

> ID：10382293
> 
> 赞同：0
> 
> 时间：2012-04-30T10:40:19.600
> 
> 标签：jquery, forms

在我的页面上，我有一个像这样的虚拟表格：

```
<div id="form_container">
  <form id="new_form" action="...">
     <input type="hidden" id="hidden_field" name=...>
     <input type="text" id="text_field" name=...>
     <... submit button ...>
  </form>
</div> 
```

输入值最初为空白。

我需要不时在我的页面上使用字段中的不同值重新创建此表单。我做什么：首先我将表单容器从 DOM 中分离出来并将其存储在一个变量中：

```
var dummyForm = $('#form_container').detach(); 
```

然后，当我需要弹出表单时，我会执行一些功能：

```
var newForm = dummyForm .clone()
$('#hidden_field', newForm).val(dataForHidden);
$('#text_field', newForm).val(dataForText); 
```

然后`newForm`通过将其附加到页面上的某个元素来使其可见。

但是当我检查输入的结果 html（或者我只是`newForm.html()`在 JS 调试器中检查）时，它看起来像这样：

```
 <input type="hidden" id="hidden_field" name=... value="xxx">
     <input type="text" id="text_field" name=...> 
```

即设置了隐藏字段的值，但对于文本字段，它会丢失。

我的问题是：1）这是一个错误、已知问题、设计功能，还是我做错了什么？2）如何解决？

当表单已经附加到 DOM 时，我可以考虑填写字段值的解决方案，但在我的情况下，这可能是一个问题，因为它是由另一个库通过一些回调链附加到 DOM 的。

**PS**我能够通过这样做来解决这个问题，`$('#text_field', newForm).attr('value', dataForText);`但仍然想知道为什么`val()`适用于隐藏字段而不适用于其他类型。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T10:45:08.953

您可以尝试在 jQuery [http://api.jquery.com/attr/中使用 attr](http://api.jquery.com/attr/)

# bash - 如何在 Bash 中快速返回上一个工作目录？

> ID：10382299
> 
> 赞同：43
> 
> 时间：2012-04-30T10:40:37.083
> 
> 标签：bash, shell

当我使用命令切换到一个目录时`cd`，我会丢失以前的工作目录，除非我记得它在我的记忆中。有没有一些方便的方法可以快速返回？

演示：

```
$ cd ~/some_path
$ cd /another_path
$ command_to_go_back_to_some_path 
```

* * *

## 回答 #1

> 赞同：109
> 
> 时间：2012-04-30T10:42:22.870

你可以回到最后一个目录`cd -`

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2012-04-30T16:31:13.093

你也可以这样做

```
$ pushd ~/some_path
$ pushd /another_path
$ popd 
$ popd 
```

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2012-04-30T10:45:35.657

如前所述，您可以使用`cd -`. shell 在内部做一个`cd $OLDPWD`.

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2018-03-06T16:42:14.893

对于脚本中的使用，您可以使用`OLDPWD`shell 变量：它包含以前的工作目录。

```
$ pwd
/home/username
$ cd /usr/bin
$ pwd
/usr/bin
$ cd "$OLDPWD"
$ pwd
/home/username 
```

我更喜欢`cd -`在脚本中使用它，因为我不必抑制任何输出。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2017-06-16T19:27:04.130

如果要在脚本中使用它并禁止输出，请执行以下操作：

```
cd - > /dev/null 
```

# asp.net-mvc - asp.net webapi vs asp.net mvc restlike 动作

> ID：10382300
> 
> 赞同：0
> 
> 时间：2012-04-30T10:40:39.487
> 
> 标签：asp.net-mvc, asp.net-web-api

我一直在看asp.net webapi的东西，我很想知道使用它而不是使用支持rest like urls的普通mvc控制器使用它的临界点是什么。

我进行了一些搜索，但找不到任何专门讨论何时是最合适的使用时间的文章。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T10:59:00.243

现在的分离是：

如果您需要输出**动态视图**（即视图通常使用 Razor 在服务器上呈现），请使用 ASP.NET MVC。从历史上看，您可以提供数据，但 Web API 更丰富（它支持内容协商）。

如果需要提供**数据**，请使用 ASP.NET Web API。您可以适应视图支持，但这并不意味着它。

* * *

我可以看到这些将在未来版本（而不是即将发布的版本）中作为*ASP.NET Web 堆栈连接在一起。*

# c# - 访问表单变量

> ID：10382302
> 
> 赞同：0
> 
> 时间：2012-04-30T10:40:42.370
> 
> 标签：c#, forms, object, properties

在 C# 中使用基本表单应用程序时，我无法访问其中的变量。

所以在表单类中我有

```
public partial class pingerform : Form 
{
  ..
  ..

  private System.Windows.Forms.TextBox textBox2;

  public string textBox2Text
  {
      get { return textBox2.Text; }
      set { textBox2.Text = value; }
  } 
```

然后在我的主应用程序中

```
Application.Run(new pingerform());
...
...

pingerform.textBox2Text.text() = str; 
```

但我被告知没有对象引用。

> 错误 1
> ​​非静态字段、方法或属性“pingerform.textBox2Text.get”需要对象引用 C:\Users\aaron.street\Documents\Visual Studio 11\Projects\PingDrop\PingDrop\Program.cs 54 21 PingDrop

所以我想我会让 pinger 表单类静态，但它不会让我这样做？

> 错误 1
> ​​无法创建静态类“PingDrop.pingerform”的实例 C:\Users\aaron.street\Documents\Visual Studio 11\Projects\PingDrop\PingDrop\Program.cs 21 29 PingDrop

如何在不创建表单的特定实例的情况下访问表单属性，

我有一个后台线程正在运行，我想定期更新表单中的文本？

干杯

亚伦

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T10:46:29.483

如果不创建实例，就无法访​​问实例的属性，这是无稽之谈（或 VB 相同）。而且您已经创建了然后传递给的实例`Application.Run()`。无论如何，你不能对你的表单做任何事情，`Application.Run()`因为它只有在应用程序退出时才会返回。如果你想对表格做任何事情，你需要在其他地方做。当然，您不能将表单类设为静态，因为您需要创建实例。

如果您需要在另一个线程中对表单执行某些操作，则需要在创建表单实例时将其传递给线程。请注意，尽管从非 GUI 线程直接弄乱 GUI 元素是一个坏主意，但您应该使用`Control.BeginInvoke()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T10:55:04.657

您别无选择，只能创建新实例并将其作为参数传递给线程，或者将其存储为主 Program 类的成员。

第二个选项的示例：

```
private static pingerform myPingerform = null;
static void Main()
{
    Application.EnableVisualStyles();
    Application.SetCompatibleTextRenderingDefault(false);
    myPingerform = new pingerform();
    Thread thread = new Thread(new ThreadStart(UpdateTextBox));
    thread.Start();
    Application.Run(myPingerform);
}

private static void UpdateTextBox()
{
    while (true)
    {
        myPingerform.textBox2.Text = DateTime.Now.Ticks.ToString();
        Thread.Sleep(1000);
    }
} 
```

并且不要忘记将文本框更改为`public`.

**注意**：这是一个后台线程访问文本框的简单情况的简单工作解决方案。如果您有更多线程访问它，**这将中断**. 有关需要更多工作的最佳实践方法，请[阅读此内容](http://msdn.microsoft.com/en-us/library/ms171728.aspx)。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-30T10:47:18.967

请试试这个：

```
pingerform myForm = new pingerform();    
Application.Run(myForm);
myForm.textBox2Text = "this is text"; 
```

# jquery - 展开焦点 jquery 的下拉菜单

> ID：10382305
> 
> 赞同：0
> 
> 时间：2012-04-30T10:40:57.863
> 
> 标签：jquery, asp.net

我正在扩展焦点下拉列表，这与单击下拉列表并选择一个选项相同。

```
 <script type="text/javascript">
        $(document).ready(function () {
            $('#<%= ddlNature.ClientID %>').focus(function () {
                $('#<%= ddlNature.ClientID %>').attr('size', 6);
            });
            $('#<%= ddlNature.ClientID %>').focusout(function () {
            $('#<%= ddlNature.ClientID %>').attr('size', 1);
        });

          });
</script>

<asp:DropDownList ID="ddlNature" runat="server" class="text" TabIndex="5"> 
```

下拉菜单在焦点上展开，但从下拉菜单中选择的选项没有被选中，即。展开的下拉菜单不能用作下拉菜单。当我在萤火虫中检查时，我没有得到选择的值。

当我将下拉列表的 AutoPostBack 设置为 true 时，我得到了下拉值，但我不想刷新页面。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T10:49:47.450

代码很好..

Firebug 不显示选择更改..

如果您附加一个更改处理程序，您会看到它确实改变了它..

见演示[http://jsfiddle.net/gaby/vxDrE/](http://jsfiddle.net/gaby/vxDrE/)

# cucumber - 使用 Cucumber/Webdriver 的验收测试永远不会完成

> ID：10382307
> 
> 赞同：1
> 
> 时间：2012-04-30T10:41:03.240
> 
> 标签：cucumber, webdriver, gherkin, cucumber-jvm

我们使用 Gherkin、Cucumber-jvm 和 Webdriver 对标准 Java/Spring webapp 运行验收测试。问题是，当使用 Maven 作业运行测试时，测试完全成功，但作业没有完成。只有在关闭 Firefox 窗口时才能完成作业。

我们有一个在每个功能后显式关闭浏览器的解决方法，但由于时间滞后，这很快就会变得不可持续。

技术栈如下：

黄瓜-JVM 1.0.4

硒 2.12.0

火狐8.0

该应用程序在 Windows 7 机器上的 JBoss EAP 5.1 中运行。

当我们使用 Cucumber 的 JRuby 版本时，上述 selenium/firefox 组合不会出现这种行为，尽管当我们使用更高版本的任何一种时都会出现这种情况。

以前有没有人见过这种行为，有没有人有任何建议或解决方法？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T13:06:12.457

你关闭你的 WebDriver 吗？

```
@cucumber.annotation.After
public void afterScenarioRun() {
    driver.close();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T13:50:15.493

我在春季环境中使用 Cucumber 和 Selenium（带有 cucumber-spring）。当 WebDriver 由 Spring 管理时，您可以`destroy="close"`在 bean 定义中添加：

```
<bean id="webDriver" class="org.openqa.selenium.ie.InternetExplorerDriver" destroy-method="close"/> 
```

这会在所有测试完成后关闭浏览器。

# python - 连接gmail的文件夹（**标签名称）时Imaplib选择失败

> ID：10382308
> 
> 赞同：0
> 
> 时间：2012-04-30T10:41:03.887
> 
> 标签：python, gmail-imap, imaplib

我正在使用 imaplib 模块连接到 Gmail Imap，我收到了下面提到的错误。我正在使用选择命令进行连接

```
Labelname is  **LabelName 
```

我得到这个错误：

```
 resp, data = self._imap.select("**LabelName")
  File "/usr/lib/python2.6/imaplib.py", line 642, in select
    typ, dat = self._simple_command(name, mailbox)
  File "/usr/lib/python2.6/imaplib.py", line 1060, in _simple_command
    return self._command_complete(name, self._command(name, *args))
  File "/usr/lib/python2.6/imaplib.py", line 895, in _command_complete
    raise self.error('%s command error: %s %s' % (name, typ, data))
imaplib.error: SELECT command error: BAD ['Could not parse command'] 
```

而如果 Labelname 是

```
** LabelName 
```

它成功连接。

谁能告诉我这里发生了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T08:21:47.990

解决了这个问题，在使用 imaplib 连接时，我们需要像这样连接：

```
imapobj.select('"'+ '**Foldername' + '"') 
```

这导致像这样选择

```
"**Foldername" 
```

# php - 上传 .mov 文件

> ID：10382309
> 
> 赞同：0
> 
> 时间：2012-04-30T10:41:16.987
> 
> 标签：php

我正在使用 flash 上传器对象上传视频文件，然后通过 Zencoder 将其转换为 .mp4 格式。首先文件被上传到服务器文件夹。所有扩展名为 .wmv 、 .flv 等的文件都被移动到文件夹中，但是当我上传 .mov 文件时，它不会被上传到服务器文件夹中。是否需要更改任何服务器设置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T10:44:51.340

您应该异步执行此操作，上传文件，存储它（在此确保您的文件正确保存，然后启动编码过程）。

看来您可能会遇到一些超时问题，因为 php 或 apache 中的 .mov 文件不需要特殊处理。

# javascript - 如果 div 显示样式从无变为阻塞，如何执行 jQuery 代码？

> ID：10382310
> 
> 赞同：2
> 
> 时间：2012-04-30T10:41:18.657
> 
> 标签：javascript, jquery

`display: none;`当 div 的样式从 更改为时，我正在尝试执行 jQuery 代码`display: block;`

我正在使用标签，这就是为什么这个 div 的样式会发生这样的变化，并且这个 jQuery 代码应该只在查看这个标签时运行。

那么我该如何实现呢？

谢谢。

编辑：我试过`.is(':visible');`了，它只有在我们加载页面并且这个 div 可见时才有效，而不是这个 div 稍后可见。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T11:00:28.227

您正在寻找的是[DOM Mutation Events](http://www.w3.org/TR/DOM-Level-2-Events/events.html#Events-eventgroupings-mutationevents)，它可以在插入、删除或修改 DOM 元素时引发事件。

不幸的是，它们从未得到很好的支持，并且[在 DOM3 中已被弃用](https://stackoverflow.com/questions/6659662/why-is-the-domsubtreemodified-event-deprecated-in-dom-level-3)。

无论如何（没有双关语），在您的情况下，捕获导致选项卡显示的任何 UI 事件会更简单。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-30T10:46:14.803

```
if($("#myTab").is(':visible')){
    here is your code ...
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-30T10:46:25.133

尝试这样的事情：

```
if($(DIV).is(':visible')) {   // DIV => valid selector of your target
   // execute your code
} 
```

**或者：**

```
if($('body').on('EVENTNAME', 'DIV:visible')) {   // DIV => valid selector of your target
   // execute your code
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-04-30T10:46:19.717

```
$(document).ready(function(){
    $(your tab container).click(function(){
        //set none property to all of your id's
        var obj=$this;
        if(obj){
            $("your id").style.display="block"; // set block to your current item
        }
    });
}); 
```

或者

```
if($("you id").is('visible')){
    //do it
} 
```

# php - 是否可以在 IF 中使用全局变量？

> ID：10382312
> 
> 赞同：-1
> 
> 时间：2012-04-30T10:41:31.433
> 
> 标签：php, if-statement, global-variables, accessible

可以以某种方式在同一 IF 的另一部分中访问在 IF 的一部分中定义的变量吗？

前任：

```
if ($a == 1)
{
  $b = "ABC";
}
elseif ($a == 2)
{
 echo $b;
} 
```

在函数中我使用**全局 $variable**但在 IF 语句中我不知道。

我之所以问这个是因为我正在一步一步地制作注册页面。
这意味着我需要多次检查该 If 语句，并且在最后一步中，我需要从所有 IF 中收集所有变量。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T10:51:27.297

没有您理解它们的方式**的**“全局”变量。
所有 PHP 变量在执行后注定会随着所有 PHP 脚本而死。

您需要一些存储空间来保存请求之间的变量。
[PHP 会话](http://www.php.net/manual/en/session.examples.basic.php)是一个不错的选择。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T09:37:42.090

PHP 中的 IF 语句**不会**更改变量范围 - 与函数不同。因此，只要您保持在同一范围内，您在 IF 中所做的任何事情都将在 if 之外可见。您不需要使用 GLOBAL。实际上，应该尽可能少地使用全局范围。

global 语句只是拓宽了允许 PHP “看到”否则会被隐藏的东西的范围。您仍然需要了解变量作用域，因为作用域的交互并不总是显而易见的。我建议回去阅读优秀的 PHP 文档。在点击之前，您可能需要通读几次并进行一些试验。

您的代码的问题是，除非它在您未显示的循环内，否则您将永远不会看到 $b 的值，因为 if 语句是一个**分支**，并且您只会执行一个不超过 1 的分支.

您的示例的另一个问题是您正在使用链接的 if 语句，这会更好地写成：

```
switch ($a) {
    case 1:
        $b = "ABC";
        break;
    case 2:
        # $b will ALWAYS be empty unless you set it BEFORE the switch OR
        # you loop back to the switch AFTER $a=1
        echo $b;
        break;
    default:
        echo "i is not equal to 1 or 2";
} 
```

见： http: [//php.net/manual/en/control-structures.switch.php](http://php.net/manual/en/control-structures.switch.php)

随着案例数量的增加，这种形式更容易阅读，也更简单、更健壮。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T10:46:04.140

好吧，不看 $a 只有 1 个值，它可能是 1 或 2 或其他值，如果它 1 然后 $b = ABC 并且它永远不会出现在你的 elseif 条件下，如果 $a 是 2 那么它永远不会进入你的第一个条件但是是的你可以在条件之前定义 $b。

```
$b = "something";
if ($a == 1)
{
  $b = "ABC"; // $b is ABC if $a = 1
}
elseif ($a == 2)
{
 echo $b; // output : something, if $a  = 2
} 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-04-30T10:44:37.250

```
$b = Null
if ($a == 1)
{
  $b = "ABC";
}
elseif ($a == 2)
{
 echo $b;
} 
```

# ios - 将 xcode 版本从 4.2.1 降级到 4.2

> ID：10382313
> 
> 赞同：0
> 
> 时间：2012-04-30T10:41:33.573
> 
> 标签：ios, ios4, ios5, osx-lion

我正在使用 xcode 4.2.1 ，iOS 5 lion 10.7 版本。我想将当前版本的 xcode 从 4.2.1 降级到 4.2。请指导我这样做。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T11:59:42.790

您可以在不同的目录中同时安装多个版本。如果您想摆脱某个版本，则必须删除 /Developer 目录并在该目录中重新安装您的目标版本。

顺便说一句，4.2 和 4.2.1 没有太大区别。

# c# - 如何处理所有异常

> ID：10382316
> 
> 赞同：0
> 
> 时间：2012-04-30T10:41:48.083
> 
> 标签：c#, asp.net, .net, exception, handle

是否有任何**安全**的方法可以使用 c# 和 asp 处理 .net 网站中的所有异常？我从不同的网站上阅读了很多内容，我发现使用其中之一：

1.  AppDomain.CurrentDomain.UnhandledException 事件
2.  Application.ThreadException 事件

    但是很多人都在争论一起处理所有异常（内存不足、stackoverflow 异常等）有多安全。
    我将不胜感激任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T10:47:13.990

看看postsharp [http://www.sharpcrafters.com/solutions/exception](http://www.sharpcrafters.com/solutions/exception)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T10:48:32.883

本文可能会为您提供有关 asp.net 中全局错误处理的更多信息：

[http://www.developer.com/net/asp/article.php/961301/Global-Exception-Handling-with-ASPNET.htm](http://www.developer.com/net/asp/article.php/961301/Global-Exception-Handling-with-ASPNET.htm)

问候

# objective-c - 错误：“NSString”未声明（在此函数中首次使用）

> ID：10382320
> 
> 赞同：0
> 
> 时间：2012-04-30T10:42:19.207
> 
> 标签：objective-c, ios, cocoa-touch, cocoa

当我尝试在 cygwin Windows 7 中编译 Object-c 程序时出现此错误，但该程序在 Xcode 中执行。

main.m:5:3: error: 'NSString' undeclared (首先在这个函数中使用)

```
#include <stdio.h>    
int main (int argc, const char * argv[]) 

  {
        NSString *str1 = @"1st string";
        NSString *str2 = @"2nd string";         
        NSLog(@"Hello, World!");    
    return 0;
} 
```

在 cygwin 中使用以下 CMD 执行，

```
gcc -c -Wno-import main.m 
```

你能帮我解决这个编译错误吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T10:49:12.037

Windows 不附带 Foundation 库，因此`NSString`默认情况下不可用。您应该尝试使用[GNUstep ，或者您可以在 Mac 上使用](http://www.gnustep.org/)[Cocotron](http://www.cocotron.org/)从 Xcode 进行交叉编译。无论您选择哪种方式，请查看其文档以了解如何使用它（至少您需要`#import <Foundation/Foundation.h>`链接 Foundation 库）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T11:59:16.230

确保在 .h 或 .m 文件的顶部有以下代码：

```
#import <UIKit/UIKit.h>
#import <Foundation/Foundation.h> 
```

您也可以将代码放在 Prefix.pch 文件中。

# c# - 使用过多资源的 Socket 服务器

> ID：10382322
> 
> 赞同：0
> 
> 时间：2012-04-30T10:42:20.983
> 
> 标签：c#, sockets

我正在创建一个基于套接字的遥测应用程序，我使用两个无线电调制解调器来发送/接收数据，一个应用程序通过调制解调器 1 发送数据，另一个程序通过调制解调器 2 获取数据，我的发送间隔是一秒，似乎接收器应用程序（服务器）正在使用大部分 CPU 和 RAM 资源（99% 的 cpu 使用率！）并且它的内存使用量稳步增加！这样几分钟后我的程序几乎停止响应并且我的数据根本不正确，因此无法解析数据，似乎我的程序收到了发送数据的多个副本，我的原始数据包约为70字节，但经过一些秒它的大小增加，我认为我的接收缓冲区已满并且数据与以前的数据混合，我正在寻找一些建议，这是我在服务器程序中的接收处理程序：

```
private void DataReceive()
    {
        handler.ReceiveBufferSize = 100;

        try
        {
            byte[] bytes = new byte[100];
            int byteRec;
            while (true)
            {
                timer1.Enabled = true;
                while (true)
                {
                    byteRec = handler.Receive(bytes);
                    if (byteRec > 0)
                    {
                        data = System.Text.Encoding.UTF8.GetString(bytes, 0, byteRec);
                        break;
                    }
                }

                if (data.Length >= 30)
                {
                    if (data.Substring(0, 1) == "#")//pasrse data, correct!
                    {
                        label27.Text = data.Length.ToString();
                        textBox1.Text = data;
                        string a = data.Substring(1);

                        string[] b = a.Split('-');

                        SetControlPropertyThreadSafe(lblTotal, "Text", b[0]);
                        SetControlPropertyThreadSafe(lblFlow, "Text", b[1]);

                        float real_analog2 = (1 - (((20 - float.Parse(b[4])) / (20 - 4)))) * Analog2_Max;
                        if (real_analog2 < 0)
                            real_analog2 = 0;
                        SetControlPropertyThreadSafe(lblAnalog, "Text", real_analog2.ToString());

                        if (b[2] == "1")//off
                            SetControlPropertyThreadSafe(lblMotion, "Text", "off");
                        else if (b[2] == "0")//on
                            SetControlPropertyThreadSafe(lblMotion, "Text", "on");

                        if (b[3] == "1")//off
                            SetControlPropertyThreadSafe(lblMotion2, "Text", "off");
                        else if (b[3] == "0")//on
                            SetControlPropertyThreadSafe(lblMotion2, "Text", "on");

                        SetControlPropertyThreadSafe(lblV1, "Text", b[5]);
                        SetControlPropertyThreadSafe(lblV2, "Text", b[6]);
                        SetControlPropertyThreadSafe(lblV3, "Text", b[7]);
                        SetControlPropertyThreadSafe(lblI1, "Text", b[8]);
                        SetControlPropertyThreadSafe(lblI2, "Text", b[9]);
                        SetControlPropertyThreadSafe(lblI3, "Text", b[10]);
                        SetControlPropertyThreadSafe(lblLevelPercent, "Text", b[11]);
                        SetControlPropertyThreadSafe(lblLevelValue, "Text", b[12]);
                    }
                }
                FillLstMsg(data);
            }
        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.Message);
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T10:48:14.817

当你做一段时间（真）时，你应该总是`Thread.Sleep(x)`在那里添加一个。这样可以防止循环成为紧密循环并消耗您的 CPU。

你只需要睡几毫秒就够了。

至于内存消耗，我怀疑你可能在某个地方有泄漏。还要考虑当 CPU 非常繁忙时，.NET 框架将推迟垃圾收集，直到它不会对系统产生影响（即 CPU 使用率较低），或者系统内存不足。

可能是当您添加 Thread.Sleep 时，会发生垃圾收集并且内存使用会保持稳定。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-30T13:01:57.797

基本上我认为你的方法是错误的。

你怎么能说发送接收的数据大小？第一个数据包消息何时结束而另一个数据包消息何时开始？你知道你的完整信息包有多大吗？

这些是您在从另一端接收数据包时应该仔细验证的一些问题。

我在 TCP 实现中继承的一个常见做法是首先发送即将到来的数据包大小，然后根据该数据包大小处理消息。这将为您提供极大的灵活性来创建更健壮的 TCP 实现。如果你这样做，你就可以一个接一个地发送尽可能多的数据包而不会崩溃。

我还看到您将演示代码与接收数据代码搞砸了。您应该创建一个单独的类库来处理所有 TCP 通信操作，并将接收到的数据扔到消费者应用程序中。

Nito Async 库对我来说是一个很好的起点。你可以看到他在做什么，虽然太先进的技术和真正好的代码，你可以抓住基本的想法。

从他博客中这个漂亮的解释开始，然后在 codeplex 中捕获代码。我现在看到他更新了一些东西，所以你可以把他所有的精力都用在你的代码上，或者如果它适合你的话，甚至是他的 :)

[http://nitoprograms.blogspot.com/2009/04/tcpip-net-sockets-faq.html](http://nitoprograms.blogspot.com/2009/04/tcpip-net-sockets-faq.html)

快乐阅读！

# objective-c - 如何在我的 iphone 应用程序的一个表格单元格中容纳所有信息？

> ID：10382324
> 
> 赞同：0
> 
> 时间：2012-04-30T10:42:22.990
> 
> 标签：objective-c, ios, xcode

在我的表格单元格中，我有很长的信息行，因此我无法正确显示所有信息。我试图使表格单元格的高度变大，但这没有帮助。下面是表格单元格的图像，您看不到其余信息。 ![带有修剪信息的表格行](../Images/e8c42222e20a8ffc563d533bee0246cc.png)

谢谢

马尤尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T10:48:12.397

[您可以使用自定义单元格并在同一单元格内，使用Linebreakmode](https://developer.apple.com/library/ios/#documentation/UIKit/Reference/UILabel_Class/Reference/UILabel.html)将 UILabel 与自动换行属性一起使用。记住将 numberOfLines 设置为 0。希望对您有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T11:52:52.163

您可以创建一个`CustomCell`继承`UITableView`类并将单元格的大小设置为自定义单元格的大小，并获得多行，您还可以设置`linebreakmode`：

```
 lblName.lineBreakMode = UILineBreakModeWordWrap; 
    lblName.numberOfLines = 2; //Specify Number Of Lines 
```

# bash - 将一个文件的内容附加到另一个文件中

> ID：10382330
> 
> 赞同：1
> 
> 时间：2012-04-30T10:42:42.833
> 
> 标签：bash

```
> for filename in '*.sql'
> do
> echo "@some_string" >> $filename
> done
-bash: $filename: ambiguous redirect 
```

当我尝试将一个常量附加到所有文件时，我得到一个错误的模糊重定向。

知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T10:57:19.027

尝试：

```
for filename in *.sql
do
echo "@some_string" >> "$filename"
done 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T10:54:53.770

我会用

```
#!/bin/bash
for filename in *.sql
do
echo "@some_string" >> "$filename"
done 
```

您的代码的问题在于

```
cat "@some_string" 
```

因为`cat`需要一个文件名。

正如@c00kiemon5ter 所述，您还应该引用`$filename`，因为它可能包含空格。

# wpf - 如何删除图标并添加？wpf窗口中的按钮？

> ID：10382335
> 
> 赞同：1
> 
> 时间：2012-04-30T10:42:55.160
> 
> 标签：wpf

我有一个用于删除图标和一个用于添加“？”（帮助）按钮的单独代码。但任何人都可以帮我做这两件事。我的代码如下。

```
 [DllImport("user32.dll")]
    static extern uint GetWindowLong(IntPtr hwnd, int index);

    [DllImport("user32.dll")]
    static extern int SetWindowLong(IntPtr hwnd, int index, uint newStyle);

    [DllImport("user32.dll")]
    static extern bool SetWindowPos(IntPtr hwnd, IntPtr hwndInsertAfter,
               int x, int y, int width, int height, uint flags);

    [DllImport("user32.dll")]
    static extern IntPtr SendMessage(IntPtr hwnd, uint msg,
               IntPtr wParam, IntPtr lParam);

    const int GWL_EXSTYLE = -20;
    const int WS_EX_DLGMODALFRAME = 0x0001;
    const int WM_SETICON = 0x0080;

    private const uint WS_EX_CONTEXTHELP = 0x00000400;
    private const uint WS_MINIMIZEBOX = 0x00020000;
    private const uint WS_MAXIMIZEBOX = 0x00010000;
    private const int GWL_STYLE = -16;
    private const int SWP_NOSIZE = 0x0001;
    private const int SWP_NOMOVE = 0x0002;
    private const int SWP_NOZORDER = 0x0004;
    private const int SWP_FRAMECHANGED = 0x0020;
    private const int WM_SYSCOMMAND = 0x0112;
    private const int SC_CONTEXTHELP = 0xF180; 
```

下面的代码是删除图标。

```
 public static void RemoveIcon(Window window)
    {
        IntPtr hwnd = new WindowInteropHelper(window).Handle;

        // Change the extended window style to not show a window icon
        uint extendedStyle = GetWindowLong(hwnd, GWL_EXSTYLE);
        SetWindowLong(hwnd, GWL_EXSTYLE, extendedStyle | WS_EX_DLGMODALFRAME | WM_SETICON);

        // Update the window's non-client area to reflect the changes
        SetWindowPos(hwnd, IntPtr.Zero, 0, 0, 0, 0, SWP_NOMOVE |
              SWP_NOSIZE | SWP_NOZORDER | SWP_FRAMECHANGED);
    } 
```

此功能用于添加帮助图标

```
 public static void AddHelpIcon(Window window)
    {
        IntPtr hwnd = new System.Windows.Interop.WindowInteropHelper(window).Handle;
        uint styles = GetWindowLong(hwnd, GWL_STYLE);
        styles &= 0xFFFFFFFF ^ (WS_MINIMIZEBOX | WS_MAXIMIZEBOX);
        SetWindowLong(hwnd, GWL_STYLE, styles);
        styles = GetWindowLong(hwnd, GWL_EXSTYLE );
        styles |= WS_EX_CONTEXTHELP;
        SetWindowLong(hwnd, GWL_EXSTYLE, styles | WS_EX_DLGMODALFRAME | WM_SETICON);
        SetWindowPos(hwnd, IntPtr.Zero, 0, 0, 0, 0, SWP_NOMOVE | SWP_NOSIZE | SWP_NOZORDER | SWP_FRAMECHANGED);
        ((HwndSource)PresentationSource.FromVisual(window)).AddHook(HelpHook);
        }

        private static IntPtr HelpHook(IntPtr hwnd, int msg, IntPtr wParam, IntPtr lParam, ref bool handled)
        {
            if (msg == WM_SYSCOMMAND &&
                ((int)wParam & 0xFFF0) == SC_CONTEXTHELP)
            {
                MessageBox.Show("help");
                handled = true;
            }
            return IntPtr.Zero;
       } 
```

所以任何人都可以帮助我在一个窗口中做这两个。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-25T10:27:58.183

我正在使用`Telerik window`最适合的。请尝试一下。

# javascript - AngularJs 资源中的可选 url 参数

> ID：10382337
> 
> 赞同：11
> 
> 时间：2012-04-30T10:43:10.450
> 
> 标签：javascript, angularjs

我有这种资源：`var Products = $resource('companies/:companyId/products')` 问题是，我想通过 url 获取所有公司的产品`companies/products`，但是使用资源而不提供我得到的 companyId `companies//products`。可能我可以使用另一个 url，比如 just `/products`，但这是否意味着我必须拥有另一个资源来做同样的事情？

在这个简单的情况下，我可以将 url 更改为`companies/products/:companyId`，但这似乎是很一般的情况。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-30T12:10:33.530

是的，目前您需要定义另一个 $resource。

但是，如果需要，您可以将多个 $resource 实例包装到单个服务中...

```
app.factory('mergedRes', function($resource) {
  var r1 = $resource('/companies/:companyId/products');
      r2 = $resource('/companies/products');

  r1.getAll = r2.query.bind(r2);

  return r1;
}); 
```

# php - 图像未显示在 drupal 7 中

> ID：10382338
> 
> 赞同：1
> 
> 时间：2012-04-30T10:43:14.790
> 
> 标签：php, drupal, drupal-7, drupal-theming, drupal-themes

我从[http://template-help.com](http://template-help.com)下载了一个主题。我已经按照他们提供的说明手册安装了主题和演示站点。在 localhost 中，它一切正常，但是当我将它上传到服务器时，图像开始播放。可以看到里面的图片。我可以很好地看到它试图使用 firebug 查找图像的目录中的文件。我正在粘贴图像标签，例如图像的来源。它非常完美，但静止图像没有显示出来。

```
<img src="http://myoxygenmobile.co.uk/sites/default/files/slide1_0.jpg" width="463" height="383" alt=""/> 
```

我还附上了它的屏幕截图。请问有什么帮助吗？![在此处输入图像描述](../Images/5a83355b1d4a48576fb0fb535fb8ff3d.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T06:58:11.443

检查文件夹**站点/默认/文件**的权限，确保它设置为**777**（每个都可写）。

希望这会有所帮助……穆罕默德。

# c# - 为对象声明“var”有什么好处？

> ID：10382340
> 
> 赞同：-3
> 
> 时间：2012-04-30T10:43:31.590
> 
> 标签：c#, var

> **可能重复：**
> [在 C# 中使用 var 关键字](https://stackoverflow.com/questions/41479/use-of-var-keyword-in-c-sharp)

1.  `var`像下面代码的第一行那样用于初始化对象有什么好处，`var sp`用于 SerialPort。

2.  使用对象后处理它有什么好处？在下面的代码中，对象`SerialPort`在[SMS](http://en.wikipedia.org/wiki/SMS)发送给接收者之后被释放。

代码：

```
using (var sp = new SerialPort(cbcomport.Text))
{
    sp.Open();
    sp.WriteLine("AT" + Environment.NewLine);
    sp.WriteLine("AT+CMGF=1" + Environment.NewLine);
    sp.WriteLine("AT+CMGS=\"" + dt.Rows[i]["PhoneNo"] + "\"" + Environment.NewLine);
    sp.WriteLine(tbsms.Text + (char)26);
    Thread.Sleep(5000);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-30T10:48:21.200

1.  随着`var`你少打字。

2.  当 GC 认为合适时，它可以自由地收集已处置的对象。如果它是非托管资源，则调用`Dispose`将清理这些资源。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-30T10:46:27.580

1）有了`var`你不必写出`SerialPort`两次。

如果您调用的方法返回的对象可能具有非常复杂的签名，那么使用`var`肯定会有所帮助。最常见的情况是 linq 查询。

```
var q = from c in orders
        order by c.id
        select c; 
```

q 的类型是`IOrderedQueryAble<Order>`我不想写出来的。

2) 处理完串口后立即将其关闭并释放以供其他应用程序使用。如果你不处理它，端口将被锁定，直到 GC 收集到对象（这可能需要相当长的时间）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-30T10:49:18.633

在您的情况下， var 是一种不写 SerialPort 两次的选项

```
SerialPort sp = new SerialPort(cbcomport.Text) 
```

和

```
var sp = new SerialPort(cbcomport.Text) 
```

以上两种说法都是一样的

此外，在某些地方，如 LINQ，当我们不确定 LINQ 查询的结果是什么时，我们会编写 var 来存储获取的结果。

# c# - 将代码作为参数传递 C#

> ID：10382341
> 
> 赞同：1
> 
> 时间：2012-04-30T10:43:42.170
> 
> 标签：c#, function, parameters

我正在尝试将对函数的引用作为参数传递

很难解释

我将编写一些示例伪代码

```
(calling function)

function(hello());

function(pass)
{
   if this = 0 then pass
   else
}

hello()
{
   do something here
} 
```

对不起，如果它没有多大意义

但我正在尝试减少使用的代码，我认为这将是一个好主意。

我怎样才能在 C# 中做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-30T10:46:50.007

[您可以使用委托](http://msdn.microsoft.com/en-us/library/ms173171.aspx)将代码传递给方法，例如[Action 委托](http://msdn.microsoft.com/en-us/library/system.action.aspx)：

```
void MyFunction(Action action)
{
    if (something == 0)
    {
        action();
    }
}

void Hello()
{
    // do something here
} 
```

*用法：*

```
MyFunction(Hello); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-30T10:47:25.530

> 我正在尝试将对函数的引用作为参数传递
> 
> 很难解释

这可能很难解释，但很容易实现：下面的代码调用`MyFunction`将一段参数化的代码作为参数传递给它。

```
static void MyFunction(Action<string> doSomething) {
    doSomething("world");
}

static void Main(string[] args) {
    MyFunction((name) => {
        Console.WriteLine("Hello, {0}!", name);
    });
} 
```

您可以使用系统（`Action`和`Func`）提供的委托类型或[编写您自己](http://msdn.microsoft.com/en-us/library/ms173171%28v=vs.80%29.aspx)的委托类型。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T10:50:09.467

这是一个例子：

```
using System;

public class Example
{

    public void Method1(Action hello)
    {
        // Call passed action.
        hello();
    }

    public void Method2()
    {
        // Do something here
    }

    public void Method3()
    {
        Method1(Method2);
    }
} 
```

# .net - LINQ 到数据表

> ID：10382343
> 
> 赞同：5
> 
> 时间：2012-04-30T10:43:51.667
> 
> 标签：.net, linq

我有大数据表，我也想将这个数据表的子集表示为数据表。简要说明如何选择 DataTable 中的特定列。

我正在尝试这样的事情，但它不起作用......

```
DataTable dTable = new DataTable();
...
...
...
        DataTable dt = from field in dTable
                       where field.Field<string>("Manager")
                       where field.Field<string>("Phone")
                       select field; 
```

也许我的代码是错误的，我如何从一个 DataTable 到另一个 DataTable 获取“managers”和“Phone”列而不循环思考呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-30T10:52:53.113

参考 DataTableExtensions -

[http://msdn.microsoft.com/en-us/library/system.data.datatableextensions.asenumerable.aspx](http://msdn.microsoft.com/en-us/library/system.data.datatableextensions.asenumerable.aspx)

然后...

```
var whatever = dTable.AsEnumerable(); 
```

然后根据 MSDN 示例...

```
var productNames = from products in table.AsEnumerable() 
      select products.Field<string>("ProductName"); 
```

编辑/更新：不幸的是，我认为没有内置的直接转换回具有不同模式的 DataTable。您**必须**使用数据表吗？我相信它......因为重构和测试您的代码可能需要付出太多努力。祝你好运，让我们随时发布，因为使用强类型列表会更*有趣*。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-30T10:56:20.900

你可以写：

```
 var query = from row in dTable.AsEnumerable()
      select new
      {
         manager = row.Field<string>("Manager"),
         phone = row.Field<string>("Phone")                         
      }; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-11T10:38:55.460

您可以在 AsEnumerable 的帮助下对 DataTable 或 DataSet 上的特定表执行 LINQ 查询。

这是示例，这可能会有所帮助。

```
 DataSet ds = new DataSet();
    DataTable dt = new DataTable();
    DataColumn dc;
    DataRow dr;
    ds.DataSetName = "products";
    dt.TableName = "product";

    dc = new DataColumn("product_id",long.MaxValue.GetType());
    dt.Columns.Add(dc);

    dc = new DataColumn("product_name");
    dt.Columns.Add(dc);

    dr = dt.NewRow();
    dr["product_id"] = 1;
    dr["product_name"] = "Monitor";
    dt.Rows.Add(dr);

    dr = dt.NewRow();
    dr["product_id"] = 2;
    dr["product_name"] = "Mouse";
    dt.Rows.Add(dr);

    dr = dt.NewRow();
    dr["product_id"] = 3;
    dr["product_name"] = "KeyBoard";
    dt.Rows.Add(dr);

    dr = dt.NewRow();
    dr["product_id"] = 4;
    dr["product_name"] = "LCD";
    dt.Rows.Add(dr);

    ds.Tables.Add(dt);

    IEnumerable<DataRow> objResult1 = from tbl in dt.AsEnumerable()
                                   where tbl.Field<long>(0) <= 2
                                   select tbl;

    Response.Write("<b>Query Results 1</b>");
    foreach (DataRow row in objResult1)
    {
        Response.Write(string.Format("<br/>Product ID: {0} ,  Product Name: {1}", row.Field<long>(0), row.Field<string>(1)));
    }

    IEnumerable<DataRow> objResult2 = from tbl in ds.Tables[0].AsEnumerable()
                                   let product_name = tbl.Field<string>(1)
                                   where product_name.StartsWith("Key")
                                   || product_name.StartsWith("Mo")
                                   select tbl;

    Response.Write("<br/><br/><b>Query Results 2</b>");
    foreach (DataRow row in objResult2)
    {
        Response.Write(string.Format("<br/>Product ID: {0} ,  Product Name: {1}", row.Field<long>(0), row.Field<string>(1)));
    } 
```

# java - 在java中将一组对象从一个方法传递到另一个方法

> ID：10382345
> 
> 赞同：0
> 
> 时间：2012-04-30T10:44:11.270
> 
> 标签：java, arrays, object, loops, for-loop

我想以另一种方法将存储在一个 for 循环中的对象数组传递给第二个 for 循环以显示内容。例如：

```
public static Student[] add()
for(int i = 0; i < studentArray.length; i++)
        {
            System.out.print("Enter student name ");
            studentName = EasyIn.getString();
            System.out.print("Enter student Id ");
            studentId = EasyIn.getString();
            System.out.print("Enter mark ");
            studentMark = EasyIn.getInt();
            studentArray[i] = new Student(); //create object
            tempObject = new Student(studentName,studentId,studentMark);
            place = findPlace(studentArray,studentName, noOfElements);
            noOfElements = addOne(studentArray, place, tempObject, noOfElements);   
        } 
```

到这里

```
public static void displayAll()
{
Student[] anotherArray = add();
    for(int i = 0; i < anotherArray.length ; i++)
    {
        System.out.print(anotherArray[i].toString());
    }   
} 
```

在此处的菜单中调用它：

```
 case '3': System.out.println("List All");
                                  displayAll();
                                  EasyIn.pause(); 
```

当我在菜单上按 3 时，它只是再次调用 add 方法，但是当我再次将值添加到数组中时，它会显示数组。我只想显示数组

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T11:24:28.277

和其他人一样

```
public void displayAll(Student... students) {    
    for(Student student:students)
        System.out.print(student+" "); // so there is space between the toString
    System.out.println();
} 
```

或者

```
public void displayAll(Student... students) {    
    System.out.println(Arrays.asList(students));
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T10:49:33.257

您可以将 displayAll 方法定义更改为

```
public static void displayAll(Student[] anotherArray)
{    
    for(int i = 0; i < anotherArray.length ; i++)
    {
        System.out.print(anotherArray[i].toString());
    }   
} 
```

然后在 switch case 之前从要调用的任何位置调用 add 方法，并以 student[] 作为参数调用 displayAll 方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-30T10:47:52.227

更改 displayAll() 以将数组作为参数：

```
public void displayAll(Student[] students) {
  ...
} 
```

并按如下方式调用它：

```
Student [] students = add();

...

case '3': System.out.println("List All");
    displayAll(students);
    EasyIn.pause(); 
```

# mysql - 是否可以让 MySQL 使用 1 DESC、2 ASC 的 ORDER 索引？

> ID：10382346
> 
> 赞同：19
> 
> 时间：2012-04-30T10:44:14.040
> 
> 标签：mysql, indexing, materialized-path-pattern

我有一个物化的路径驱动公告板。它使用以下查询按顺序获取消息，

```
SELECT * FROM Board ORDER by root DESC, path ASC LIMIT 0,100 
```

where`root`是`id`线程的根消息，并且`path`是物化路径。

但是，我使这个查询使用索引的努力都没有成功。

```
mysql> explain extended select path from Board order by root desc, path asc limit 100;
+-------+---------------+----------+---------+------+-------+----------+----------------------------+
| type  | possible_keys | key      | key_len | ref  | rows  | filtered | Extra
+-------+---------------+----------+---------+------+-------+----------+-----------------------------
| index | NULL          | rootpath | 261     | NULL | 21998 |   100.00 | Using index; Using filesort 
```

目前它显示列下表中所有行的数量`rows`。我想知道，有没有办法减少这个数字或以其他方式优化查询？

```
CREATE TABLE `Board` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `path` varchar(255) NOT NULL DEFAULT '0',
  `root` int(11) NOT NULL DEFAULT '0',
  PRIMARY KEY (`id`),
  KEY `root` (`root`),
  KEY `path` (`path`),
  KEY `rootpath` (`root`,`path`)
) 
```

查询的主要问题是分页 - 我需要从上一页最后一个消息旁边的消息开始第二页。这就是为什么我想要它*直接*的方式 - 没有 sublelects 和东西。
当前的设置虽然不是很好，因为它从线程中间开始第二页，但至少它是非常合乎逻辑的。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-05-02T12:44:25.723

您面临的问题在[这篇文章](http://www.mysqlperformanceblog.com/2006/05/09/descending-indexing-and-loose-index-scan/)中得到了很好的解释。重要的部分是：

> 最典型的情况是当你想按两个不同方向的列排序时：… ORDER BY price ASC, date DESC LIMIT 10 如果你在 (price,date) 上按升序索引，你将无法很好地优化这个查询 –将需要外部排序（“filesort”）。如果您能够在价格 ASC 上建立索引，则日期 DESC 相同的查询可以按区域排序顺序检索数据。

该文章还提到了解决该问题的有效方法：将第二个“顺序”子句颠倒：

> 但是，您可以通过使用“reverse_date”列并将其用于排序来解决此问题。使用 MySQL 5.0，您甚至可以使用触发器将其更新为实际日期更新，因此它变得不那么难看。事实上，这就是为什么您会在 Wikipedia 表结构中看到“reverse_timestamp”字段的原因。

也来自官方[MySQL 文档](http://dev.mysql.com/doc/refman/5.0/en/order-by-optimization.html)：

> 在某些情况下，MySQL 不能使用索引来解析 ORDER BY，尽管它仍然使用索引来查找与 WHERE 子句匹配的行。这些情况包括：
> 
> .....
> 
> 你混合 ASC 和 DESC：
> 
> SELECT * FROM t1 ORDER BY key_part1 DESC, key_part2 ASC;

作为建议，您最好有一个`reversed_root`列并且`Integer.MAX_VALUE - root`在（reversed_root，路径）上有一个索引。然后你可以有一个查询：

```
SELECT * FROM Board ORDER by reversed_root ASC,path ASC LIMIT 0,100 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-05-02T16:46:48.810

您的原始查询

```
SELECT * FROM Board ORDER by root DESC, path ASC LIMIT 0,100; 
```

创建一个名为 BoardDisplayOrder 的表来保存 root 的负值，在其中添加名为 rootinv 的新列。

首先是示例数据和您的原始查询：

```
mysql> drop database if exists YourCommonSense;
Query OK, 2 rows affected (0.06 sec)

mysql> create database YourCommonSense;
Query OK, 1 row affected (0.00 sec)

mysql> use YourCommonSense
Database changed
mysql> CREATE TABLE `Board` (
    ->   `id` int(11) NOT NULL AUTO_INCREMENT,
    ->   `path` varchar(255) NOT NULL DEFAULT '0',
    ->   `root` int(11) NOT NULL DEFAULT '0',
    ->   PRIMARY KEY (`id`),
    ->   KEY `root` (`root`),
    ->   KEY `path` (`path`),
    ->   KEY `rootpath` (`root`,`path`)
    -> );
Query OK, 0 rows affected (0.11 sec)

mysql> INSERT INTO Board (path,root) VALUES
    -> ('Rolando Edwards',30),
    -> ('Daniel Edwards',30),
    -> ('Pamela Edwards',30),
    -> ('Dominiuqe Edwards',40),
    -> ('Diamond Edwards',40),
    -> ('Richard Washington',50),
    -> ('George Washington',50),
    -> ('Synora Washington',50);
Query OK, 8 rows affected (0.05 sec)
Records: 8  Duplicates: 0  Warnings: 0

mysql> SELECT * FROM Board;
+----+--------------------+------+
| id | path               | root |
+----+--------------------+------+
|  2 | Daniel Edwards     |   30 |
|  3 | Pamela Edwards     |   30 |
|  1 | Rolando Edwards    |   30 |
|  5 | Diamond Edwards    |   40 |
|  4 | Dominiuqe Edwards  |   40 |
|  7 | George Washington  |   50 |
|  6 | Richard Washington |   50 |
|  8 | Synora Washington  |   50 |
+----+--------------------+------+
8 rows in set (0.00 sec)

mysql> SELECT * FROM Board ORDER by root DESC, path ASC LIMIT 0,100;
+----+--------------------+------+
| id | path               | root |
+----+--------------------+------+
|  7 | George Washington  |   50 |
|  6 | Richard Washington |   50 |
|  8 | Synora Washington  |   50 |
|  5 | Diamond Edwards    |   40 |
|  4 | Dominiuqe Edwards  |   40 |
|  2 | Daniel Edwards     |   30 |
|  3 | Pamela Edwards     |   30 |
|  1 | Rolando Edwards    |   30 |
+----+--------------------+------+
8 rows in set (0.00 sec)

mysql> EXPLAIN SELECT * FROM Board ORDER by root DESC, path ASC LIMIT 0,100;
+----+-------------+-------+-------+---------------+----------+---------+------+------+-----------------------------+
| id | select_type | table | type  | possible_keys | key      | key_len | ref  | rows | Extra                       |
+----+-------------+-------+-------+---------------+----------+---------+------+------+-----------------------------+
|  1 | SIMPLE      | Board | index | NULL          | rootpath | 261     | NULL |    8 | Using index; Using filesort |
+----+-------------+-------+-------+---------------+----------+---------+------+------+-----------------------------+
1 row in set (0.00 sec)

mysql> 
```

接下来，使用 rootinv 和涉及 rootinv 的索引创建表 BoardDisplayOrder：

```
mysql> CREATE TABLE BoardDisplayOrder LIKE Board;
Query OK, 0 rows affected (0.09 sec)

mysql> ALTER TABLE BoardDisplayOrder DROP INDEX root;
Query OK, 0 rows affected (0.11 sec)
Records: 0  Duplicates: 0  Warnings: 0

mysql> ALTER TABLE BoardDisplayOrder DROP INDEX path;
Query OK, 0 rows affected (0.09 sec)
Records: 0  Duplicates: 0  Warnings: 0

mysql> ALTER TABLE BoardDisplayOrder DROP INDEX rootpath;
Query OK, 0 rows affected (0.08 sec)
Records: 0  Duplicates: 0  Warnings: 0

mysql> ALTER TABLE BoardDisplayOrder ADD COLUMN rootinv int(11) NOT NULL;
Query OK, 0 rows affected (0.17 sec)
Records: 0  Duplicates: 0  Warnings: 0

mysql> ALTER TABLE BoardDisplayOrder ADD INDEX rootpathid (rootinv,path,id,root);
Query OK, 0 rows affected (0.11 sec)
Records: 0  Duplicates: 0  Warnings: 0

mysql> SHOW CREATE TABLE BoardDisplayOrder \G
*************************** 1\. row ***************************
       Table: BoardDisplayOrder
Create Table: CREATE TABLE `boarddisplayorder` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `path` varchar(255) NOT NULL DEFAULT '0',
  `root` int(11) NOT NULL DEFAULT '0',
  `rootinv` int(11) NOT NULL,
  PRIMARY KEY (`id`),
  KEY `rootpathid` (`rootinv`,`path`,`id`,`root`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1
1 row in set (0.00 sec)

mysql> 
```

然后，填充 BoardDisplayOrder：

```
mysql> INSERT INTO BoardDisplayOrder (id,path,root,rootinv)
    -> SELECT id,path,root,-root FROM Board;
Query OK, 8 rows affected (0.06 sec)
Records: 8  Duplicates: 0  Warnings: 0

mysql> SELECT * FROM BoardDisplayOrder;
+----+--------------------+------+---------+
| id | path               | root | rootinv |
+----+--------------------+------+---------+
|  7 | George Washington  |   50 |     -50 |
|  6 | Richard Washington |   50 |     -50 |
|  8 | Synora Washington  |   50 |     -50 |
|  5 | Diamond Edwards    |   40 |     -40 |
|  4 | Dominiuqe Edwards  |   40 |     -40 |
|  2 | Daniel Edwards     |   30 |     -30 |
|  3 | Pamela Edwards     |   30 |     -30 |
|  1 | Rolando Edwards    |   30 |     -30 |
+----+--------------------+------+---------+
8 rows in set (0.00 sec)

mysql> 
```

现在，针对 BoardDisplayOrder 运行查询，但在 rootinv 上没有 DESC：

```
mysql> SELECT id,path,root FROM BoardDisplayOrder ORDER by rootinv, path LIMIT 0,100;
+----+--------------------+------+
| id | path               | root |
+----+--------------------+------+
|  7 | George Washington  |   50 |
|  6 | Richard Washington |   50 |
|  8 | Synora Washington  |   50 |
|  5 | Diamond Edwards    |   40 |
|  4 | Dominiuqe Edwards  |   40 |
|  2 | Daniel Edwards     |   30 |
|  3 | Pamela Edwards     |   30 |
|  1 | Rolando Edwards    |   30 |
+----+--------------------+------+
8 rows in set (0.00 sec)

mysql> EXPLAIN SELECT id,path,root FROM BoardDisplayOrder ORDER by rootinv, path LIMIT 0,100;
+----+-------------+-------------------+-------+---------------+------------+---------+------+------+-------------+
| id | select_type | table             | type  | possible_keys | key        | key_len | ref  | rows | Extra       |
+----+-------------+-------------------+-------+---------------+------------+---------+------+------+-------------+
|  1 | SIMPLE      | BoardDisplayOrder | index | NULL          | rootpathid | 269     | NULL |    8 | Using index |
+----+-------------+-------------------+-------+---------------+------------+---------+------+------+-------------+
1 row in set (0.00 sec)

mysql> 
```

试试看！！！

## 警告

这很容易做到，因为 root 是 INT。

如果 root 是 VARCHAR，则 rootinv 必须是字符触发器。换句话说，

*   `A`->`Z`
*   `B`->`Y`
*   ...
*   `M`->`N`
*   `N`->`M`
*   ...
*   `Y`->`B`
*   `Z`->`A`

这原则上适用于您需要执行 DESC 的任何字段。问题源于 MySQL 没有在索引中将键内部排序为 ASC 或 DESC。索引中的所有内容都在升序。这就是为什么当您在 中看到处理程序统计信息时`SHOW GLOBAL STATUS LIKE 'handler%';`，您会看到以下内容：

*   [handler_read_first](http://dev.mysql.com/doc/refman/5.5/en/server-status-variables.html#statvar_Handler_read_first)
*   [handler_read_next](http://dev.mysql.com/doc/refman/5.5/en/server-status-variables.html#statvar_Handler_read_next)
*   [handler_read_prev](http://dev.mysql.com/doc/refman/5.5/en/server-status-variables.html#statvar_Handler_read_prev)
*   [handler_read_last（仅限 MySQL 5.5）](http://dev.mysql.com/doc/refman/5.5/en/server-status-variables.html#statvar_Handler_read_last)

等等。

根据[**当前的 MySQL 文档**](http://dev.mysql.com/doc/refman/5.5/en/create-index.html)

> index_col_name 规范可以以 ASC 或 DESC 结尾。这些关键字被允许用于指定升序或降序索引值存储的未来扩展。目前，它们被解析但被忽略；索引值始终按升序存储。

试试看！！！

## **更新 2012-05-04 06:54 EDT**

@frail 对我的回答的评论

> ALTER TABLE BoardDisplayOrder ADD INDEX rootpathid (rootinv,path,id,root) 对我来说似乎没有必要，ALTER TABLE BoardDisplayOrder ADD INDEX rootpathid (rootinv,path) 就足够了

我的解决方案的原因`ALTER TABLE BoardDisplayOrder ADD INDEX rootpathid (rootinv,path,id,root)`是提供一个覆盖索引。在这种情况下，覆盖索引将：

*   总是有检索所需的列
*   将提高解释计划的质量，因为
    *   查询永远不会从表中读取数据以进行数据检索
    *   查询将只从索引中读取数据检索
    *   导致索引范围扫描

想想原来的查询，

```
SELECT * FROM Board ORDER by root DESC, path ASC LIMIT 0,100; 
```

这需要检索三列 path、id 和 root。因此，它们需要在索引中。当然，指数规模的增加将是一种权衡。如果 Board 表很大，如果可以更快地检索，有些人不会担心空间。如果根路径索引只是 (rootinv,path)，那么每次索引范围扫描都将伴随着对剩余列的表的 ref 查找。这就是我选择的原因`ALTER TABLE BoardDisplayOrder ADD INDEX rootpathid (rootinv,path,id,root);`

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-02T13:23:24.660

在这种情况下，数据本身不适合以您需要的方式进行检索，创建一个包含您需要的信息的附加列可能是合适的——这将允许您按所需的顺序进行检索。

在这种情况下尤其合适，因为数据本身似乎在您保存后并没有更新。一旦您的消息发布后，它们就不会更新（或者从我最初的阅读来看是这样）。

假设您走这条路，我建议的步骤是：

*   向表中添加一个新列`root_path`。
*   执行此更新语句`update Board set root_path = root + path`。（您可能必须根据现有列的数据类型进行调整。）
*   每当您向表中添加新行时，也要添加此新列。（这可以通过触发器来处理，尽管我会警惕触发器，因为当人们更改代码的其他部分时它们可能会被忽略。）

然后，您应该能够在该新列上设置索引并针对该列编写您的选择——如您所愿地点击您的索引。

我相信即使其中一个键必须以相反的顺序排序，这也会起作用。

```
CREATE TABLE foo
(
  id serial NOT NULL,
  int_field integer DEFAULT 0,
  varchar_field character varying(255),
  composite_field character varying(255),
  CONSTRAINT foo_pkey PRIMARY KEY (id )
);

CREATE INDEX composite_field_idx ON foo (composite_field);

INSERT INTO foo (int_field, varchar_field, composite_field) VALUES 
(1,'t','t1'),
(2,'z','z2'),
(2,'w','w2'),
(4,'u','u4'),
(5,'u','u5'),
(5,'x','x5'),
(7,'v','v7');

explain select * from foo order by composite_field desc; 
```

运行上面的代码，解释语句应该显示被引用的键composite_field_idx。

查询的结果是：

```
select * from foo order by composite_field desc;

 id | int_field | varchar_field | composite_field 
----+-----------+---------------+-----------------
  2 |         2 | z             | z2
  6 |         5 | x             | x5
  3 |         2 | w             | w2
  7 |         7 | v             | v7
  5 |         5 | u             | u5
  4 |         4 | u             | u4
  1 |         1 | t             | t1 
```

# android - 如何使用 RSS 源信息从操作栏按钮刷新片段列表？

> ID：10382348
> 
> 赞同：0
> 
> 时间：2012-04-30T10:44:32.160
> 
> 标签：android

我正在做我的第一个应用程序，一个 RSS Feed 应用程序，用于学习相关的多种技术，如 xml、解析、连接到 Internet、获取信息、处理它等。

我决定使用最新的 Android 元素，例如 Action Bar 和 Fragments。所以我做了一个带有几个选项的操作栏，比如 Refresh（刷新 RSS 列表）、Preferences、About 和 Exit。主要问题是刷新。

我正在按刷新，该选项将创建一个将获取 XML 的对象，该对象应返回 newsList 片段的信息。但是我无法将信息传递给片段，但我也无法将 xml 信息吐司到屏幕上，所以我无法测试我是否正确获取了所有内容。

我的编程背景不是Java，我习惯于Web开发（PHP）和脚本（Shell），所以我想我错过了一些基本的东西，我提前道歉。

谁能至少给我一些提示，以便我知道要搜索什么并回到正确的道路上？

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T10:57:10.990

因此，您拥有处理 RSS 提要下载/解析的类，但您不知道如何将处理后的提要信息传递回 ListFragment 对吧？

有多种方法可以解决这个问题。例如，您可以将[回调](http://sanjib-swain.blogspot.com/2009/05/implementing-callback-pattern-in-java.html)模式用于您的 rss 检索类。所以 Activity 异步启动这个 rss 检索对象，并将自己注册为这个对象的侦听器。当 rss-stuff 完成后，对象会通过侦听器接口通知您的 Activity。

作为响应，Activity 可以获取 ListFragment 的引用（使用 FragmentManager）并在其上调用刷新列表的方法，将解析的 RSS-info 作为参数传递。

# jquery - 检查是否所有子元素都被隐藏

> ID：10382353
> 
> 赞同：28
> 
> 时间：2012-04-30T10:44:44.473
> 
> 标签：jquery, visibility

我的脚本有点卡在这里：

它是一个过滤所有`.notme`图像并隐藏它的列表项的复选框。问题是现在我无法为`fadeToggle`. 它的行为应该是这样的：

> 如果所有的孩子`#list-team-single-container`都“没有显示” - 做点什么。

```
$('#show-only-my-teams').change(function(){
    $('.notme').each(function(){
        $(this).parent().parent().fadeToggle('fast', function(){
        });
    });
}); 
```

* * *

## 回答 #1

> 赞同：75
> 
> 时间：2012-04-30T10:50:00.980

```
if($('#list-team-single-container').children(':visible').length == 0) {
   // action when all are hidden
} 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-04-30T10:46:15.333

jQuery 选择器`:visible`可能是您正在寻找的...

从[描述](http://api.jquery.com/visible-selector/)

> 如果元素占用了文档中的空间，则元素被认为是可见的。可见元素的宽度或高度大于零。
> 
> 具有 visibility: hidden 或 opacity: 0 的元素被认为是可见的，因为它们仍然占用布局中的空间。在隐藏元素的动画期间，该元素被认为是可见的，直到动画结束。在显示元素的动画期间，该元素被认为在动画开始时可见。

[http://api.jquery.com/visible-selector/](http://api.jquery.com/visible-selector/)

* * *

```
$('#list-team-single-container').children(':visible'); 
```

那行代码将返回所有`#list-team-single-container`可见的子元素。

```
$('#list-team-single-container').children(':visible').length; 
```

该行代码将返回可见**的子元素**的数量。`#list-team-single-container`

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-04-30T10:52:18.463

没有看到你的标记很难具体，但我想做这样的事情：

```
var isVisible = 0;

$('.notme').each( function() {
    if( $(this).is(":visible") {
         isVisible++;
    }
});

if ( isVisible == 0 )
    // do something 
```

# symfony - Symfony2 实体注释中的可配置参数

> ID：10382355
> 
> 赞同：4
> 
> 时间：2012-04-30T10:44:49.063
> 
> 标签：symfony, annotations, doctrine-orm

[如Doctrine blog](http://www.doctrine-project.org/blog/cross-database-joins.html#id1)中所述，我正在尝试跨多个数据库（其中一个属于遗留应用程序）创建连接。但是，该示例建议将数据库名称直接硬编码到模式中，出于显而易见的原因，我想避免这种情况。

有没有办法读取定义的参数`parameters.ini`或`config.yml`将它们用作注释的值，像这样？

```
/**
 * @ORM\Table(name="%legacy_db_name%.%legacy_table_name%")
 */ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T10:37:54.927

不，这是不可能的。“%key%”表格仅在 DIC 中可用。为什么要将这些数据放在 yml 文件中？会有用吗？

# java - jaxws 网络服务。改变节点结构

> ID：10382357
> 
> 赞同：3
> 
> 时间：2012-04-30T10:44:51.777
> 
> 标签：java, maven, jax-ws

我的实体类中有下一个代码

```
class Role {  
private List<String> tubes;  
//...  
} 
```

接下来 Maven 生成请求-响应类，使用**jaxws-maven-plugin**

```
@XmlRootElement(name = "getRoleResponse", namespace = "http://ws.config.com/")
@XmlAccessorType(XmlAccessType.FIELD)
@XmlType(name = "getRoleResponse", namespace = "http://ws.config.com/")
public class GetRoleResponse {

    @XmlElement(name = "return", namespace = "")
    private Role _return;
//...

} 
```

我发送肥皂请求并得到响应

```
<tubes>1SO</tubes>
<tubes>2SO</tubes>
<tubes>3SO</tubes>
<tubes>4SO</tubes> 
```

但我想得到这样的请求：

```
<tubes> 
    <tube>1SO</tube>
    <tube>2SO</tube>
    <tube>3SO</tube>
    <tube>4SO</tube>  
</tubes> 
```

我能做些什么？

**编辑：**

生成的 WSDL 的一部分

```
<xs:complexType name="role">
    <xs:sequence>
      <xs:element name="tubes" type="xs:string" nillable="true" minOccurs="0" maxOccurs="unbounded"/>
    </xs:sequence>
  </xs:complexType> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-30T11:10:42.903

1.  方法：

    *   指定 XSD
    *   生成 JAXB 类
    *   在 Web 服务中使用生成的 JAXB 类
2.  方法：

    *   根据需要使用 JAXB 注释手动注释 Role 类，例如[http://docs.oracle.com/javase/7/docs/api/javax/xml/bind/annotation/XmlElementWrapper.html](http://docs.oracle.com/javase/7/docs/api/javax/xml/bind/annotation/XmlElementWrapper.html)可能会有所帮助（就个人而言，我很少注释 JAXB手动类。我通常从 XSD 文件生成它们）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T11:09:16.053

将您更改`List<String>`为 a并使用字符串元素`List<Tube>`创建类型`Tube`

# iphone - 无法更改 UIView 框架大小

> ID：10382358
> 
> 赞同：4
> 
> 时间：2012-04-30T10:44:52.210
> 
> 标签：iphone, xcode, uiview, frame, cgrect

我有一个自定义 uiview，我正在尝试更新帧大小。一旦点击它，我就会在一个方法中这样做。该方法被调用，并且帧值发生了变化，但是在屏幕上没有任何反应！

```
if (!touched) {

        GameBox *box = (GameBox *)[self.view viewWithTag:40];

        [box setFrame:CGRectMake(20, 20, 100, 73)];
        NSLog(@"%f", box.frame.origin.x);
        markButton.enabled = NO;
        guessButton.enabled = NO;
        [self.view reloadInputViews];

        NSLog(@"The action bar should now be hidden");
    }
    else if (touched) {
        guessButton.enabled = YES;
        markButton.enabled = YES;
        [self.view reloadInputViews];
        NSLog(@"The action bar should now be visible");
    } 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-07T10:36:22.283

我猜你已经将 self.view 连接到 UIView in `Interface Builder`.

为了改变 UIView 框架，在`Interface Builder`go to`File Inspector`和 uncheck`Use Autolayout`中，然后在代码中改变框架。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-12-13T04:41:07.733

您需要在 viewDidAppear（不是 viewDidLoad）中设置调整框架。

```
- (void) viewDidAppear:(BOOL)animated {
[super viewDidAppear:animated];

CGRect frame = self.tableView.frame;
frame.origin.y += 100.0;
frame.size.height -= 100.0;
self.tableView.frame = frame;
} 
```

显然这与导航控制器中的表视图有关。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-06-13T03:32:27.027

这是因为 Auto Layout，但是您可以在 Auto Layout 完成其工作或更改其约束后执行此操作。如果你想在自动布局后添加以下内容。

```
- (void)viewDidAppear:(BOOL)animated {
    dispatch_async(dispatch_get_main_queue(), ^{
        box.frame = CGRectMake(20, 20, 100, 73)];
}); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-04-30T12:16:42.483

`[self.view reloadInputViews]`一般用于FirstResponders。我对您的自定义视图不太了解，但我认为仅设置您可以使用的框架：

```
[UIView beginAnimations:nil context:nil];
[UIView setAnimationDuration:0.5];
[UIView setAnimationDelay:1.0];
[UIView setAnimationCurve:UIViewAnimationCurveEaseOut];

viewFrame.frame=frame;//Frame Defined by you 
[UIView commitAnimations]; 
```

如果我看看您的自定义视图，可以提供更好的解决方案。

# selenium - 当我可以在屏幕截图中看到文本时，selenium/phpunit 失败

> ID：10382362
> 
> 赞同：0
> 
> 时间：2012-04-30T10:44:59.873
> 
> 标签：selenium, phpunit

我正在使用 selenium 和 phpunit 来测试我的一些网络内容，但它似乎失败了，即使我可以在失败的屏幕截图中看到我正在测试的文本 - 我的测试在下面列出

```
<?php
include('setupclass.php');
class AddNewPicStationTest extends setupclass
{

    protected function setUp()
    {
        parent::setUp();
    }

    public function testMyTestCase()
    {
        $this->open($this->apppath);
        $this->click("css=a > img");
        $this->waitForPageToLoad("30000");
        $this->type("name=username", "");
        $this->type("name=password", "");
        $this->click("name=submit");
        $this->waitForPageToLoad("30000");
        $this->click("link=ADD LIKESTATION");
        $this->waitForPageToLoad("30000");
        $this->click("link=HOME");
        $this->waitForPageToLoad("30000");
        $this->click("link=ADD PICSTATION");
        $this->waitForPageToLoad("30000");
        $this->type("id=title", "Test title 2");
        $this->type("id=message", "test description 2");
        $this->click("id=tip5");
        $this->type("id=album_title", "test album title 2");
        $this->type("id=album_description", "test album description 2");
        $this->click("//input[@value='Login']");
        $this->click("xpath=(//input[@name='group1'])[2]");
        $this->type("name=station_pic_upload", "C:\\Users\\chris laptop\\Desktop\\Logo.png");
        $this->click("name=g");
        $this->waitForPageToLoad("30000");

        **$this->assertTrue($this->isTextPresent("Test title 2"),"object created");**
        $this->assertFalse($this->isTextPresent("Error"),"Error is present");
        $this->assertFalse($this->isTextPresent("Profiler"),"PRofiler is running");

        $this->click("link=LOGOUT");
        $this->waitForPageToLoad("30000");
    }
}
?> 
```

即使屏幕抓取中存在星号行，它也会失败..我是新手，任何帮助都将不胜感激

这是我下面的页面，测试正在寻找-STATION TITLE

```
<table width="620px" align="left" style="text-align:left;">
        <tr style="font-weight:bold;background-color:#f1f1f1">
            <td colspan="5" STYLE="text-align:center;font-weight:bold">FACEBOOK PIC STATIONS</td>
        </tr>
        <tr style="font-weight:bold;background-color:#f1f1f1">
            <td width="15%">STATION ID</td>
            <td width="50%">STATION TITLE</td>
            <td width="10%">STATION STATS</td>
            <td width="15%">LAST POST</td>
            <td width="10%"></td>

        </tr>
        <?foreach($picstations->result() as $row){?>
            <tr>
                <td><?=anchor('socialmedia/edit_picstation/'.$row->station_id,$row->station_id);?> </td>
                <td><?=anchor('socialmedia/edit_picstation/'.$row->station_id,$row->title);?> </td>
                <td><?=anchor('stats/home/station_stats/'.$row->station_id,'STATS');?> </td>
                <td><?=$this->upd8r_date->get_last_post_from_station_time($row->station_id)?></td>
                <td><?=anchor('socialmedia/delete/'.$row->station_id,'delete');?></td>
            </tr>
        <?}?>
    </table> 
```

这是我的phpunit输出-

```
1) AddNewPicStationTest::testMyTestCase
Current URL: http://localhost/upd8r_new/socialmedia/add_picstation
Screenshot: http://localhost/upd8r_new/tests/screenshots/692eb179f8146d2a8491442
68dd2a99a.png

object created
Failed asserting that false is true.

C:\xampplite\php\phpunit:46

FAILURES!
Tests: 1, Assertions: 1, Errors: 1. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T09:36:12.093

只是为了添加一些关闭-如果您查看这个问题并在同一个问题上苦苦挣扎-我在 Windows 7 上使用 selenium 和 phpunit。

更改`waitForPageToload(1)`没有做任何事情，所以我添加`sleep(1);`到代码中，这允许测试运行并正确通过

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T11:01:36.107

我不知道您使用哪些 PHP 绑定，但通常要做的事情是这样的（伪代码）：

```
// if element is NOT present, try to wait a little more until timeout
var targetTime = currentTime() + 5000; // 5 seconds from now
while(currentTime() < targetTime) {
    if (!isElementPresent("someLocator")) {
        wait(250);
    } else {
        break;
    }
} 
```

那是因为您的元素可能是异步加载的（通过 AJAX）并且`waitForPageToLoad()`不知道正在发生这种情况。它只是认为页面一直完全加载。查看您的绑定是否具有称为`waitForElementPresent()`或类似的方法。否则，执行上述方法。

顺便说一句，Selenium 2 (WebDriver) 具有[隐式等待](http://seleniumhq.org/docs/04_webdriver_advanced.html#implicit-waits)选项，可以自动为您执行此操作。如果没有找到任何元素，它将在抛出异常之前尝试查找指定时间。

* * *

可能出错的另一件事是查找的文本实际上隐藏在`<iframe>`元素中。如果是这种情况，您需要选择正确的框架。

# eclipse-plugin - eclipse插件代码在指定位置创建IProject

> ID：10382368
> 
> 赞同：3
> 
> 时间：2012-04-30T10:45:23.990
> 
> 标签：eclipse-plugin

```
IProgressMonitor progressMonitor = new NullProgressMonitor();

IWorkspaceRoot root = ResourcesPlugin.getWorkspace().getRoot();
IProject project = root.getProject(page1.getProjectName()); 
```

我正在使用此代码在工作区中创建一个项目。

现在我想在工作区以外的指定位置创建一个项目。

任何人都可以提供一些建议吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T07:23:52.463

最后我找到了指定要创建的项目的位置的代码。这可以通过使用 IProjectDescription 类的 setLocation() 方法来完成，如下所示：

```
IProgressMonitor progressMonitor = new NullProgressMonitor();
IWorkspaceRoot root = ResourcesPlugin.getWorkspace().getRoot();

IProject project = root.getProject(page1.getProjectName());
    IWorkspace w = ResourcesPlugin.getWorkspace();
    IProjectDescription desc=w.newProjectDescription(project.getName()); 
    String projectLocation=page1.getProjectLocation();
    IPath path1=new Path(projectLocation+"/"+page1.getProjectName());
    desc.setLocation(path1); 
    project.create(desc, progressMonitor); 
    project.open(progressMonitor); 
```

# android - 从 AsyncTask 访问值到 Map Activity 类时获取 NullPointerException

> ID：10382382
> 
> 赞同：0
> 
> 时间：2012-04-30T10:46:33.207
> 
> 标签：android, map, android-asynctask

在我的 android.Map 应用程序中，我使用`ShowTheatersTask`类在地图上显示附近的剧院，并且在该剧院的 Tap 上我必须显示方向。我正在 HelloItemizedOverlay 类中创建 WebViewDemo 的 Obj。而我正在访问`showDrections()` 修改后的全局变量在 ShowTheatersTask`doInBackground()`中显示空值。甚至`current_latitude`，`current_langitude`作为`0.0`，它们被初始化，`onCreate()`其中是全局变量。请帮助我为什么得到`NullPointerException`。这里是代码的主要部分。

注意：在`onTap(int index)`类中`HelloItemizedOverlay`我正在创建 obj

WebViewDemo.java

```
public class WebViewDemo extends MapActivity {
public double current_latitude, current_langitude;
public String lat = null, lng = null;
ShowTheatersTask showTheatersTask;
private LocationManager locationManager;

public void onCreate(Bundle savedInstanceState) {
.....
locationManager.requestLocationUpdates(
                LocationManager.NETWORK_PROVIDER, 0, 0, locationListener);

        Location location = locationManager
                .getLastKnownLocation(LocationManager.NETWORK_PROVIDER);

        if (location != null) {
            dialog = ProgressDialog.show(WebViewDemo.this, "Please wait",
                    "Theaters are loading...", true);
            dialog.show();

            current_latitude = location.getLatitude();
            current_langitude = location.getLongitude();
.......
showTheatersTask = new ShowTheatersTask();
            showTheatersTask.execute(current_latitude, current_langitude);
}

class ShowTheatersTask extends AsyncTask<Double, Void, Void> {

        @Override
        protected Void doInBackground(Double... params) {

            double latitude = params[0], langitude = params[1];

            try {
                httpClient = new DefaultHttpClient();// Client
                postRequest = new HttpPost(..web service call..);
                response = httpClient.execute(postRequest); 
                           //Sure getting responne as JSOn object 
                for (int i = 0; i < jsonArray.length(); i++) {

                    JSONObject jsonData = jsonArray.getJSONObject(i);
                    String name = jsonData.getString("name");
                    JSONObject locObject = jsonData.getJSONObject("geometry")
                            .getJSONObject("location");
                    lat = locObject.getString("lat");
                    lng = locObject.getString("lng");

                    point = new GeoPoint((int) (Double.parseDouble(lat) * 1E6),
                            (int) (Double.parseDouble(lng) * 1E6));

                    overlayitem = new MyOverLayItem(point, name,
                            jsonData.getString("vicinity"), null);
                    itemizedoverlay.addOverlay(overlayitem);
                    mapOverlays.add(itemizedoverlay);

                }
                mapController.animateTo(point);
                mapView.postInvalidate();

            } catch (Exception e) {
                e.printStackTrace();
            }

            return null;
        }
public void showDrections() {

        /*****************
         *Here values are coming null
         *****************/
        try {
            Log.d("current lat lng values", current_latitude+" "+current_langitude);
Log.d("lat lng values", lat+" "+lng);

} 
```

HelloItemizedOverlay.java

```
 public class HelloItemizedOverlay extends ItemizedOverlay<OverlayItem> {

       //some methods

        @Override
        protected boolean onTap(int index) {
             WebViewDemo.MyOverLayItem item = (WebViewDemo.MyOverLayItem) mOverlays
                    .get(index);
            AlertDialog.Builder dialog = new AlertDialog.Builder(mContext);
            dialog.setTitle(item.getTitle());
            dialog.setMessage(item.getSnippet());
            dialog.setPositiveButton("Get directions", new DialogInterface.OnClickListener() {

                public void onClick(DialogInterface dialog, int which) {
                    WebViewDemo demo=new WebViewDemo();
                    demo.showDrections();
                }
            });
            dialog.show();
            return true;
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T11:10:07.007

为什么要在 onClick() 中创建活动类的新对象，即在 HelloItemizedOverlay 类的 onTap() 中

```
WebViewDemo demo=new WebViewDemo();
demo.showDrections(); 
```

我知道 current_latitude 和 current_langitude 是原始数据类型，它不应该是空值，也不是 NullPointerException 的原因。您的 logcat 堆栈跟踪会有所帮助。

但这很明显，您不必创建 Activity 类的新实例，即 WebViewDemo demo=new WebViewDemo();

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T10:59:27.087

doInBackground 未在 UI 线程上运行，这就是您遇到异常的原因。您必须在 onProgressUpdate 和 onPostExecute 中更新您的地图。

# tsql - T-SQL：如何使用 MIN

> ID：10382384
> 
> 赞同：0
> 
> 时间：2012-04-30T10:46:37.953
> 
> 标签：tsql, min

我有以下简单的表，称为 TableA

```
ID  SomeVal
1   10
1   20
1   30
2   40
2   50
3   60 
```

我只想选择 SomeVal 是相同 ID 值的最小值的那些行。所以我的结果应该是这样的：

```
1   10
2   40
3   60 
```

我想我的 SQL 中需要 Group By，但不知道如何。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T10:49:35.647

```
SELECT ID, MIN(SomeVal)
FROM [TableName]
GROUP BY ID 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T10:50:14.797

Group by 将对分组依据的每个唯一值执行聚合函数 (MIN)，并返回结果。

我认为这将满足您的需求：

```
Select ID, Min(SomeVal)
From MyTable
Group By ID 
```

# php - 休息方法：用于在登录后实现后续的 api 调用

> ID：10382385
> 
> 赞同：0
> 
> 时间：2012-04-30T10:46:40.933
> 
> 标签：php, rest, restful-authentication, hmac

我正在尝试实施 Rest 方法来设计我的 Api。

请通过下面的工作流程并尝试消除我的疑虑并指出错误-

1.  客户端（Web 浏览器）来自客户端的 Rest 调用 ->/post /login 用户名/密码

2.  服务器 /login 服务与数据库检查用户名和密码是否正确响应 ok:200 + 发回数据-> X

3.  客户端收到用户已通过身份验证的确认 + 数据 -> X 现在使用数据 X 对服务器进行后续调用，以通过其他服务调用获取用户特定信息

/get/FirstName_of_User/X 或

/get/LastName_of_User/X

**现在我的疑问如下（执行以下操作的最佳做​​法是什么）**

1.  因为对于后续请求，我们需要告诉服务我们请求谁的数据，X 应该是什么？（创建的用户名或临时令牌（没有意义，因为 Rest 完全是关于无状态的）或其他什么？）

2.  一旦这个 X 被返回，它应该存储在客户端的哪里，以便可以为每个后续请求起诉它？（Cookie 或其他方式存在）？

3.  如果这是我进行后续调用的方式
    **/get/FirstName_of_User/X**

如果这个电话也是由其他人发出的，那么它会给出结果，我希望刚刚登录的人只得到结果..

注册疑问 3 - 我在 stackoverflow 上找到了这个链接 - [会话是否用于 REST 身份验证？](https://stackoverflow.com/questions/9439553/is-session-used-to-rest-authentication)

建议使用 HMAC 并找到此链接 - [http://www.thebuzzmedia.com/designing-a-secure-rest-api-without-oauth-authentication/](http://www.thebuzzmedia.com/designing-a-secure-rest-api-without-oauth-authentication/)它讨论了如何将 HMAC 用于 Rest（基本上讨论了客户端和服务器上的私钥并使用它来散列请求）..

我对这种方法的怀疑是 - 假设我使用密码作为客户端和服务器都知道的私钥..那么在客户端我们应该将密码保存在 cookie 中，然后散列每个后续请求吗？

感谢您对任何疑问的任何帮助表示赞赏

PS：我正在尝试使用 PHP + Mysql 实现系统

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T10:50:20.930

```
/user/id?access_token=42342342342423 
```

rest api 不需要 SEO，所以去掉 firstname_of_user，只使用 id，更简单，更干净，更少维护。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T17:25:03.320

不知何故，您的要求和我们在项目中实现的内容看起来是一样的，除了不同的平台，我们的是 .net。

使用用户名和密码对登录资源执行相同的过程。一旦你决定了你想要签署这个令牌的机制，它不是强制性的，它总是附加在 url 中。

1.  不要在 URL 中发送令牌，而是尝试使用 http 协议的授权标头。使用`Authorization = "Authorization" ":" credentials` [参考](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html)

这样，您可以保持您的 url 相同，但基于身份验证您可以提供资源。

1.  您可以将此令牌存储在 cookie 中以供后续请求使用。

2.  从 url 中删除令牌可以解决您的第三个疑问。

希望这能在一定程度上帮助你。

# javascript - JQuery：对话框不会触发自动完成

> ID：10382386
> 
> 赞同：1
> 
> 时间：2012-04-30T10:46:44.267
> 
> 标签：javascript, jquery, jquery-ui

我将[http://docs.jquery.com/UI/Dialog](http://docs.jquery.com/UI/Dialog)和[http://docs.jquery.com/UI/Autocomplete](http://docs.jquery.com/UI/Autocomplete)与 JQuery 1.7.2 和 JQuery-UI 1.8.18 一起使用。

有一个带有文本框的表单，当正常加载到页面中时，它将触发自动完成。很好很简单！

```
(function() {

  jQuery(function($) {
    return $("#type").autocomplete({
      source: "/auto-suggest/supplies",
      minLength: 2
    });
  });

}).call(this); 
```

但是，如果表单是通过对话框呈现的，则不会触发自动完成（没有 UI 更改，并且服务器显示无法访问源 URL）。我假设这是因为输入字段在文档加载时尚未呈现。因此，我尝试使用对话框的`create`事件来分配自动完成功能，方法是将函数作为回调传递给它。同样，自动完成不会触发。

我对如何让它发挥作用感到困惑。我很想创建对话框，然后在加载文档时隐藏，但在这种情况下，可能有多个对话框实例，因为它与表数据相关。

对此的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T11:02:15.607

尝试使用[`open`事件](http://jqueryui.com/demos/dialog/#event-open)- 这将确保 DOM 元素准备就绪

```
$( ".selector" ).bind( "dialogopen", function(event, ui) {
  $("#type").autocomplete({
      source: "/auto-suggest/supplies",
      minLength: 2
  });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T10:58:37.980

尝试委托

[委托自动完成](https://stackoverflow.com/questions/2650737/jquery-ui-autocomplete-with-delegate)

最佳解决方案作者：ManseUK

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-30T11:02:06.853

您甚至可以获取值，然后在成功调用对话框中

```
$.get('/auto-suggest/supplies', function(data) {
  //call dialog here
}); 
```

# scala - Scala 演员显然没有收到消息

> ID：10382387
> 
> 赞同：2
> 
> 时间：2012-04-30T10:46:47.157
> 
> 标签：scala, pattern-matching

您能否解释一下为什么以下代码无法按预期工作。

演员没有打印消息

谢谢。

```
class Base {
  def f() = { "This is Base" }
}

class Sub extends Base {
  override def f() = { "This is Sub" }
}

case class myCase(x: Base)

import scala.actors._

object myActor extends Actor {

  def act()
  {
    loop {
      react {
        case myCase(x) => x.f()
        case msg => "unknown"
      }
    }
  }

  def main(args: Array[String]): Unit = {
    this ! myCase(new Base)
    this ! myCase(new Sub)
  }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-30T10:53:46.687

## 回答问题

该问题与继承或案例类无关（我已重新命名该问题以反映这一点）。代码不打印任何内容有两个原因：

1.  因为*您的代码实际上并没有对`println`*! 代替：

    ```
    case myCase(x) => x.f() 
    ```

    和

    ```
    case myCase(x) => println( x.f() ) 
    ```

2.  因为*你没有开始你的演员*。我认为如果演员是内部阶级，你的程序会更有意义：

    ```
    object myActor extends App {

      class MyActor extends Actor {
        def act() {
          loop {
            react {
              ...             // <-- You need to print stuff
            }
          }
        }
      }

      val a = new MyActor
      a.start()             // <-- You need to start it
      a ! myCase(new Base)
      a ! myCase(new Sub)
    } 
    ```

* * *

## 建议：案例类和继承

但是，我建议在存在案例类的情况下使用继承是**一个坏主意**。我通常使用在特征中声明常见行为/状态的方法：

```
sealed trait Base {
  def f(): Unit
}

case class Sub() extends Base 
```

为什么这是个坏主意？好吧，案例类为您提供的合同之一是对*等价*的严格定义（即 an `equals`and`hashCode`实现）。在存在继承的情况下，这很可能会*产生误导*。也就是说，您的代码可能不会达到您的预期。考虑以下;

```
scala> abstract class Base { val x: Int }
defined class Base

scala> case class Sub(s: String) extends Base { val x = util.Random.nextInt(100) }
defined class Sub 
```

现在，如果我创建 2 个实例...

```
scala> Sub("Hey")
res2: Sub = Sub(Hey)

scala> Sub("Hey")
res3: Sub = Sub(Hey) 
```

它们是等价的

```
scala> res2 == res3
res4: Boolean = true 
```

但他们没有相同的状态

```
scala> res2.x
res5: Int = 28

scala> res3.x
res7: Int = 15 
```

请注意，我并不是说这是一个错误。我只是说这是一个您可能会发现您在代码中*引入*错误的区域，因为您已经假设案例类的任何状态都包含在其等效项中。

# c++ - 如何使用指针数组作为类的实例

> ID：10382389
> 
> 赞同：-1
> 
> 时间：2012-04-30T10:46:51.310
> 
> 标签：c++

我想使用数组指针作为类的实例。例如：

```
char *pArray[100];
pArray[1] = &class_name; //pArray[1] has the address of "class_name" class.

cout<<"Name Property: %s Age Property: %d"<<pArray[1].name<<pArray[1].age); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T10:48:10.820

您需要将元素转换为`class_name`指针：

```
(class_name*)pArray[1] 
```

`->`并通过运营商访问成员。

```
((class_name*)pArray[1])->name 
```

但仅供参考，这似乎是错误的。为什么不只是有一个数组`class_name*`，或者更好的是，一个`std::vector<class_name*>`？

# oracle - SQLPLUS 输出：如何自动获取每列的最小列宽？

> ID：10382390
> 
> 赞同：6
> 
> 时间：2012-04-30T10:46:55.207
> 
> 标签：oracle, sqlplus

我尝试设置线宽，但这不是我的意图，是否有将每列的宽度缩小到适合这些值的最小值？或自动对每一列进行子串化，以便它们都适合屏幕？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T15:12:54.990

您可以使用

```
COLUMN columnname FORMAT An 
```

对于 Char、VARCHAR2 (VARCHAR)、LONG 列

其中*n*是所需的显示宽度，*columnname*是表格的列

例如

```
COLUMN title FORMAT a40 
```

对于不同的数据类型，如数字和其他选项，您可以参考以下链接

[http://ss64.com/ora/syntax-sqlplus-fmt.html](http://ss64.com/ora/syntax-sqlplus-fmt.html)

最大的限制是您不能为所有 VARCHAR2 列设置固定宽度，只能为特定列设置。

# linux - 如何在 LAN Linux 中创建到另一台计算机的 tcp 重定向

> ID：10382391
> 
> 赞同：1
> 
> 时间：2012-04-30T10:46:55.300
> 
> 标签：linux, tcp, redirect

我想将 PC 上的所有 tcp 请求重定向到另一台计算机。我怎样才能做到这一点？

例如：我希望所有到 10.42.43.10:5000 的 tcp 请求都重定向到 10.42.43.25:6000。我可以用linux命令做到这一点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T10:56:00.587

使用 redir 命令

redir [--laddr=incoming.ip.address] [--bind_addr=my.other.ip.address]

# makefile - 由于未找到 .lo 文件而导致不必要的重建

> ID：10382392
> 
> 赞同：1
> 
> 时间：2012-04-30T10:46:55.597
> 
> 标签：makefile, autotools, libtool, buildroot

有没有人见过这样的东西：

在使用 autotools 的项目中运行 make 时，它​​总是重新构建一切。使用 make -d 运行，表明 make 会查找 foo.lo 文件，并且因为找不到它们，所以总是重新编译 foo.c。

它似乎与 builddir != srcdir 有关。.lo 文件当然在 builddir 中。但显然 make 或 libtool 正在其他地方期待它们：

调试输出看起来像这样：

先决条件`/path/to/srcdir/foo.h' is older than target`foo.lo'。/path/to/builddir/.deps/foo.Plo:1 必须重新制作目标“foo.lo”。

**更新**似乎问题是由 AC_PROG_LIBTOOL 引起的。根据文档，它希望将一个名为 top_builddir 的变量设置为构建目录。设置它的标准方法是什么？是否有用于此的 autoconf 宏？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T14:37:53.450

libtool 更新解决了这个问题

# php - 什么是 mysql_affected_rows 的 Oracle 等价物？

> ID：10382393
> 
> 赞同：2
> 
> 时间：2012-04-30T10:47:00.230
> 
> 标签：php, mysql, oracle, variables, rows-affected

在 Mysql 中，如果我们插入、删除或更新数据，那么通过使用`mysql_affected_rows(),` 我们将获得受影响的行数，我们可以使用 in`PHP`将其存储在`variable`.

那么什么是 mysql_affected_rows 的 Oracle 等价物？

**我们如何获得 Oracle 中受影响的行数？**

相同的 oracle db 是什么`function name`，以便我们可以使用相同的值，`PHP`或者我们可以将该值存储在 中`PHP variable`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T10:50:58.903

正如谷歌告诉我的：

[http://php.net/manual/en/function.oci-num-rows.php](http://php.net/manual/en/function.oci-num-rows.php)

`oci_num_rows()`应该做的伎俩。

# objective-c - 如果找不到 GPUImage 框架的 GPUImage.h 头文件，我该怎么办？

> ID：10382394
> 
> 赞同：14
> 
> 时间：2012-04-30T10:47:12.507
> 
> 标签：objective-c, ios, filter

我使用[GPUImage 框架](https://github.com/BradLarson/GPUImage)创建了一个示例应用程序来执行凹凸失真。我将此框架添加到我的应用程序中，但我看到以下错误

> 找不到词法或预处理器问题“GPUImage.h”文件。

我已将该`-ObjC`标志添加到其他链接器标志，但我仍然看到此错误。我怎样才能解决这个问题并让我的应用程序编译？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2014-02-20T01:27:32.837

将 GPUImage 框架添加到 XCode 项目可能会很棘手。因此，我添加了详细的分步说明，其中包含有关如何执行此操作的图像。

**静态编译方法（详细的解决方案，以免我们搞砸了）**

这是静态编译方法。在这基本上我们将使用 ./build.sh 文件编译框架。只需将它添加到我们的 XCode 项目中，然后配置 XCode 以正确使用它。

1.  从 Github 下载 GPUImage 并提取它（或者只是克隆它）。
2.  转到`GPUImage`终端中的文件夹
3.  运行**./build.sh**

    *注意：这将为您的 mac 上的所有 sdk 编译并创建即用型二进制文件。*

4.  build.sh 创建一个名为**build**的文件夹并生成已编译的二进制文件并将它们转储到以下文件夹：**Release-iPhone**、**Release-iPhoneOS**、**Release-iphonesimulator**等文件夹。 ![在此处输入图像描述](../Images/c1c978cad14af4524e36b7835c1c5feb.png)

5.  对于 iPhone 使用 **Release-iphone**（这也适用于模拟器）。
6.  **将Release-iphone**复制（而不是拖放）到您的 XCode 项目的根目录，以便我们拥有框架的本地副本。
7.  **现在将iPhone**拖放 到您的 XCode 项目中。确保选中“复制到..”选项。

    笔记：

    *   此**Release-iphone**文件夹包含两个子文件夹：**include**和**lib**
    *   **include**文件夹包含所有头**.h**文件
    *   **lib文件夹包含名为****libGPUImage.a**的已编译二进制版本文件
    ***   我们现在需要简单地配置 XCode 以使用 .h 和 .a 文件。****
***   在项目资源管理器中选择您的项目 >**目标**下的项目名称> 选择构建阶段 >**使用库展开链接二进制文件**

    *   将**libGPUImage.a**添加到 Link Binary With Libraries 部分。您可能需要右键单击**libGPUImage.a** ，然后**在 Finder 中打开**，最后将其拖放。

    *   在此过程中，还将以下 GPUImage 的依赖框架/库 **CoreMedia、CoreVideo、OpenGLES、AVFoundation、QuartzCore 添加** 到**Link Binary With Libraries**部分 ![在此处输入图像描述](../Images/844202df26b8bd10a41cdb05e1c407be.png)

    *   现在，让我们配置**.h**标头。

    *   在项目资源管理器中选择您的项目 >**目标**下的项目名称> 选择构建设置 > 并键入*搜索路径*以查看**搜索路径**部分。

    *   通过单击值字段打开**标题搜索路径。**

    *   **将lib**文件夹拖放到该弹出窗口。注意：如果它显示绝对路径，请将其更改为看起来**$(SRCROOT)/path/to/lib/**。（您应该拥有与您的 xcode 项目相关的框架，请参见步骤 6）。

    *   **对库搜索路径**也重复 11 和 12 。** 

 **![在此处输入图像描述](../Images/b9b1ff0cc9a99a532e498ec396f6c731.png) 附加提示：您可以将**.h**文件添加到**Library Search Paths**或**Headers Search Paths**，您可以使它们成为**Recursive**。**我有一个名为Dependencies**文件夹的主根文件夹，其中保存了所有依赖项，例如 MySDK 框架，包括 Release-iPhone。而且我在 Dependencies （根文件夹）只有一个搜索路径，并使其成为**recursive**。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-01T22:14:21.863

您是否按照[项目页面](https://github.com/BradLarson/GPUImage)上自述文件中的所有说明进行操作？从安装说明：

> 您还需要找到框架标头，因此在项目的构建设置中，将标头搜索路径设置为从应用程序到 GPUImage 源目录中 framework/ 子目录的相对路径。使此标头搜索路径递归。

如果您看到上述错误，这意味着您没有将 Header Search Paths 指向相对于您的项目安装 GPUImage 的正确目录，和/或没有单击左侧的复选框进行这些搜索路径递归。

[我在这个答案](https://stackoverflow.com/a/10261140/19679)中展示了一些你需要去哪里设置它的屏幕截图，它解释了 Core Plot 框架的类似内容。同样的原则也适用，只是你需要找到你安装 GPUImage 框架的位置。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-04-08T08:05:49.037

我将相对路径添加到“标题搜索路径”，但仍然存在“未找到”的错误。

然后，我将路径添加到“用户标题搜索路径”，它可以工作。

可以帮助你。

![在此处输入图像描述](../Images/bc946a0959e10d5a10a71bbc2a3210f5.png)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-02-04T06:07:51.960

最后，我意识到关键字是`relative`！我将GPUImage源文件放在我的项目根目录中： [![在此处输入图像描述](../Images/539502bd7009411a094ef3de402cf730.png)](https://i.stack.imgur.com/SZbQU.png)

在我解决问题之前，我添加标题搜索路径是：

`$(PROJECT_DIR)/GPUImage/framework`

`$(PROJECT_DIR)/GPUImage/framework/iOS`

并使它们递归，但错误仍然存​​在，所以我将路径更改为：

`GPUImage/framework`并使其递归，然后它可以工作。

希望能帮助到你。**

# .net - EF4 DB 首先在哪里获得它的关系名称？

> ID：10382400
> 
> 赞同：0
> 
> 时间：2012-04-30T10:47:34.970
> 
> 标签：.net, entity-framework, edmx, ef-database-first

我有一个名为“item”的数据库表，它有一个名为“itemParentID”的自引用字段。当我生成 EDMX 和模型时，我可以访问“item.item1”，它是当前项的父项和“item.items1”，它是子项的集合。我也有属性“item.itemParentID”，但我很少直接使用它。

如何选择这些名称“item1”和“items1”？我从数据库生成 EDMX，并希望名称自动为“topic.Parent”和“topic.Children”，这样我就不必触摸生成的代码或在部分中创建额外的代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T10:56:02.163

这就是硬编码到 EDMX 生成中的逻辑。该名称是从相关实体类型的名称中推断出来的，但在自引用关系或同一类型的多个关系的情况下效果不佳。在这种情况下，生成器会将这些数字添加到属性名称中。

修复它的唯一方法是在设计器中重命名属性，但请注意，这也是在从数据库更新模型时有时会丢失的唯一修改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T10:54:13.193

在模型 (edmx) 设计器中选择属性并打开属性窗口。

您可以在那里设置名称。

我不知道如何更改自动生成的名称。

# windows-mobile - Windows Mobile 设备中心.. 每次连接

> ID：10382403
> 
> 赞同：1
> 
> 时间：2012-04-30T10:47:52.417
> 
> 标签：windows-mobile, windows-mobile-6.5, activesync

有谁知道是否有可能，每次连接一个winodws移动设备时，不必单击“连接而不设置您的设备”设备会自动连接并能够运行？

因此，每次连接设备时都不会看到此屏幕。 [https://www.dropbox.com/s/7dwr0xgwx0dgybs/first.png](https://www.dropbox.com/s/7dwr0xgwx0dgybs/first.png)

改为显示此屏幕 [https://www.dropbox.com/s/x0l7qmy7nmk3qyu/second.png](https://www.dropbox.com/s/x0l7qmy7nmk3qyu/second.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T13:05:19.893

已经有一段时间了，所以我没有在 Win7（意思是 YMMV）下对此进行测试，但是您曾经能够将 ActiveSync 设置为 PC 的“仅限访客”模式，并且它总是会直接连接而无需询问合作伙伴关系。唯一的缺点是它不会自动同步联系人等 - 尽管在许多情况下你不需要或不想要它。

*只需在 PC 上*设置以下注册表项。

```
[HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows CE Services]
"GuestOnly"=dword:00000001 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-05-05T01:23:14.513

要绕过这一点并以访客帐户身份连接，请自动更改 PC 上的以下注册设置：

```
[HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\Run] from %windir%\WindowsMobile\wmdc.exe to %windir%\WindowsMobile\wmdcbase.exe 
```

这消除了每次同步设备时的弹出窗口。

这默认以访客身份连接：

```
[HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows CE Services] "GuestOnly"=dword:00000001 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-01T01:52:48.513

我不这样做，但我相信如果您将移动设备与 PC 绑定，您实际上会在插入设备时看到第二个屏幕。

我曾经这样做过，但我必须维护大约 20 种不同的设备。你会认为我每台设备只需要做一次，所以只需要 20 次，但是一些笨蛋员工会把一个设备从充电器上放一个月，然后把它带到我面前，完全没电了。在这种情况下，您很不走运，您必须再次将设备绑定到 PC。

# iphone - 制作 iPhone 4S ***ONLY*** 应用程序

> ID：10382404
> 
> 赞同：4
> 
> 时间：2012-04-30T10:48:03.367
> 
> 标签：iphone, ios, xcode, ios5, info.plist

我一直在为此苦苦挣扎，但是有没有办法通过 info.plist 或其他方式使该应用程序***仅***与iPhone 4S（或新 iPad + iPhone 4S）兼容，以便使用其他 iOS 设备型号的用户无法看到和下载他们设备上的应用程序？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-02T16:49:41.703

是的你可以。iPhone 4S 和新 iPad 是唯一支持蓝牙 4.0 低功耗通信的设备。正如我在[这个答案](https://stackoverflow.com/a/8040354/19679)中描述的那样，您可以将`bluetooth-le`密钥添加到您的密钥中，`UIRequiredDeviceCapabilities`以防止在除 iPhone 4S 和新 iPad 之外的所有设备上安装（未来的 iOS 设备除外）。

您可以在[iTunes Connect 开发人员指南](http://developer.apple.com/library/ios/#documentation/LanguagesUtilities/Conceptual/iTunesConnect_Guide/B_DeviceCompatibilityMatrix/DeviceCompatibilityMatrix.html#//apple_ref/doc/uid/TP40011225-CH17-SW1)的附录 C - 设备兼容性矩阵中查看各种设备的过滤器网格。

# android - 如何为 Android 上的任何 SMS 应用程序发送的 SMS 生成送达报告

> ID：10382405
> 
> 赞同：1
> 
> 时间：2012-04-30T10:48:03.430
> 
> 标签：android, sms, broadcastreceiver, messaging

我正在开发一个应用程序，该应用程序假设捕获手机中任何 SMS 应用程序发送的 SMS 的发送报告。

我曾在发送和收集交付报告的消息传递应用程序上工作过。这是通过设置待定意图来完成的：

```
PendingIntent deliveredPI = PendingIntent.getBroadcast(this, id, intent_delivery, 0); 
```

接着

```
registerReceiver(new BroadcastReceiver() {
            @Override
            public void onReceive(Context arg0, Intent arg1) {
                Bundle extras = new Bundle();
                extras = arg1.getExtras();
                switch (getResultCode()) {
                case Activity.RESULT_OK:
                    notifyMessage("SMS delivered", getBaseContext(), extras.getInt("id"));

                    break;
                case Activity.RESULT_CANCELED:
                    notifyMessage("SMS not delivered", getBaseContext(), extras.getInt("id"));

                    break;
                default :
                    notifyMessage("Unable to generate delivery Report", getBaseContext(), extras.getInt("id"));
                }
            }
        }, new IntentFilter(DELIVERED)); 
```

但现在我想知道如何能够收集手机上安装的任何短信应用程序发送的短信。

目前我只是有一个为此目的设置广播侦听器的想法，但我不知道如何设置以及设置哪种广播侦听器以及检查 wht 参数。我想我必须检查 PDU 以获取信息，但我不确定。我试图在网上搜索，但找不到与我需要相关的东西。

帮帮我谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-10T16:59:26.850

在您的活动类中，声明这些全局变量：

```
private BroadcastReceiver sendBroadcastReceiver;
private BroadcastReceiver deliveryBroadcastReceiver;
String SENT = "SMS_SENT";
String DELIVERED = "SMS_DELIVERED"; 
```

覆盖您的活动的 onCreate 并注册您的接收器：

```
@Override
protected void onCreate(Bundle savedInstanceState)
{
  super.onCreate(savedInstanceState);
  sendBroadcastReceiver = new BroadcastReceiver()
  {

    public void onReceive(Context arg0, Intent arg1)
    {
        switch (getResultCode())
        {
        case Activity.RESULT_OK:
            Toast.makeText(getBaseContext(), "SMS Sent", Toast.LENGTH_SHORT).show();
            break;
        case SmsManager.RESULT_ERROR_GENERIC_FAILURE:
            Toast.makeText(getBaseContext(), "Generic failure", Toast.LENGTH_SHORT).show();
            break;
        case SmsManager.RESULT_ERROR_NO_SERVICE:
            Toast.makeText(getBaseContext(), "No service", Toast.LENGTH_SHORT).show();
            break;
        case SmsManager.RESULT_ERROR_NULL_PDU:
            Toast.makeText(getBaseContext(), "Null PDU", Toast.LENGTH_SHORT).show();
            break;
        case SmsManager.RESULT_ERROR_RADIO_OFF:
            Toast.makeText(getBaseContext(), "Radio off", Toast.LENGTH_SHORT).show();
            break;
        }
    }
};

deliveryBroadcastReceiver = new BroadcastReceiver()
{
    public void onReceive(Context arg0, Intent arg1)
    {
        switch (getResultCode())
        {
        case Activity.RESULT_OK:
            Toast.makeText(getBaseContext(), "SMS Delivered", Toast.LENGTH_SHORT).show();
            break;
        case Activity.RESULT_CANCELED:
            Toast.makeText(getBaseContext(), "SMS not delivered", Toast.LENGTH_SHORT).show();
            break;
        }
    }
};
registerReceiver(deliveryBroadcastReceiver, new IntentFilter(DELIVERED));
registerReceiver(sendBroadcastReceiver , new IntentFilter(SENT));
} 
```

接下来，您的发送短信方法只剩下 6 行代码：

```
public void sendSMS(String phoneNumber, String message)
{
   String SENT = "SMS_SENT";
   String DELIVERED = "SMS_DELIVERED";
   PendingIntent sentPI = PendingIntent.getBroadcast(this, 0, new Intent(SENT), 0);
   PendingIntent deliveredPI = PendingIntent.getBroadcast(this, 0, new Intent(DELIVERED), 0);
   SmsManager sms = SmsManager.getDefault();
   sms.sendTextMessage(phoneNumber, null, message, sentPI, deliveredPI);
} 
```

最后，在您的活动停止时取消注册您的接收器：

```
@Override
protected void onStop()
{
  unregisterReceiver(sendBroadcastReceiver);
  unregisterReceiver(deliveryBroadcastReceiver);
  super.onStop();
} 
```

# objective-c - 如何从此 IBAction 调用以下方法？

> ID：10382412
> 
> 赞同：1
> 
> 时间：2012-04-30T10:48:21.430
> 
> 标签：objective-c, ios5, methods, ibaction

如何从此 IBAction 调用以下方法？我想调用 prepareForSegue: 方法而不是 NSLog(@"clicked");

这是IBAction：

```
- (IBAction) annotationViewClick:(id) sender {
    NSLog(@"clicked");
} 
```

这是方法：

```
// Do some customisation of our new view when a table item has been selected
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    // Make sure we're referring to the correct segue
    if ([[segue identifier] isEqualToString:@"ShowMoreInfo"]) {

        // Get reference to the destination view controller
        MoreDetailViewController *mdvc = [segue destinationViewController];

        [mdvc setSelectedItemName:[NSString stringWithFormat:@"%@", placeName.text]];
        [mdvc setSelectedItemAddress:[NSString stringWithFormat:@"%@", placeFormattedAddress.text]];

        [mdvc setSelectedItemWeb:[NSString stringWithFormat:@"%@", placeWebsite.text]];
        [mdvc setSelectedItemRating:[NSString stringWithFormat:@"%@", placeRating.text]];
  //      [mdvc setSelectedItemDistance:[NSString stringWithFormat:@"%@", placeDistance.text]];

    }
} 
```

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T11:08:41.723

`prepareForSegue:`执行 segue 时会自动调用方法。

要执行转场，您应该使用`performSegueWithIdentifier:`, 例如。`[self performSegueWithIdentifier:@"showGuide" sender:self];`,

在这种情况下，您需要在 Xcode Interface Builder 中为 segue 分配标识符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T10:51:50.303

我试试类似的东西

```
UIStoryBoardSegue *segue = ... setup the one you want
[self performSelector:@selector(prepareForSegue:) withObject:seque afterDelay:0]; 
```

我从未使用过故事板——但这就是你如何称呼选择器:)

# php - PHP preg_match：匹配除字符串以外的所有内容

> ID：10382421
> 
> 赞同：0
> 
> 时间：2012-04-30T10:48:49.057
> 
> 标签：php, regex, preg-match

我需要能够提取完整文件路径和名称的片段以插入数据库。为此，我在 PHP 中使用 preg_match。我还从模式中为每个段命名，以便匹配数组是关联的。这是一个例子：

```
 $subject = 'c:/files/uk/kent/ashford/12345_Joe_Blogs_20120202120000.pdf';
    $pattern = '/[\/\\\\](?<country>.*)[\/\\\\](?<county>.*)[\/\\\\](?<town>.*)[\/\\\\](?<id>.*)_(?<first_name>.*)_(?<last_name>.*)_(?<datetime>.*)\.(?<file_extension>pdf)/';
    preg_match($pattern, $subject, $matches);
    foreach($matches as $key => $match)
    {
        if(is_numeric($key))
            unset($matches[$key]);
    }
    print_r($matches); 
```

这创造了：

```
 Array
    (
        [country] => files/uk
        [county] => kent
        [town] => ashford
        [id] => 12345
        [first_name] => Joe
        [last_name] => Blogs
        [datetime] => 20120202120000
        [file_extension] => pdf
     ) 
```

我的问题是该国家/地区包括我想要的文件夹之前的所有文件夹。我只想要“英国”部分而不是“文件/英国”。所以我需要知道如何匹配除“/”或“\”之外的所有内容。'c:/files' 可以是配置中预先设置的任何内容，因此我不想在模式中包含该变量或任何其他 PHP 变量。

我已经在 Google 等中查找过这个，但我似乎无法找到我正在寻找的答案。

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T10:54:40.743

为了避免修改棘手的正则表达式，我建议保留现有代码并使用[basename](http://php.net/manual/en/function.basename.php)函数。

尝试这个：

```
echo basename($matches['country']);
//outputs "uk" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T10:54:49.290

将正则表达式更改为：

```
$pattern = '/[\/\\\\](?<folder>.*)[\/\\\\](?<country>.*)[\/\\\\](?<county>.*)[\/\\\\](?<town>.*)[\/\\\\](?<id>.*)_(?<first_name>.*)_(?<last_name>.*)_(?<datetime>.*)\.(?<file_extension>pdf)/'; 
```

然后您在数组中有文件夹*成员*，您可以稍后使用或丢弃。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T11:15:50.157

你可以试试这个：

```
$pattern = '/[\/\\\\](.*)[\/\\\\](?<country>.*)[\/\\\\](?<county>.*)[\/\\\\](?<town>.*)[\/\\\\](?<id>.*)_(?<first_name>.*)_(?<last_name>.*)_(?<datetime>.*)\.(?<file_extension>pdf)/'; 
```

它的工作亲爱的..！:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-30T20:21:04.763

尝试更具体地说明您的行为和不想匹配的内容：

```
'%(?x)
[/\\\\](?P<country>[^_./\\\\]+)
[/\\\\](?P<county>[^_./\\\\]+)
[/\\\\](?P<town>[^_/\\\\]+)
[/\\\\](?P<id>[^_./\\\\]+)
_(?P<first_name>[^_./\\\\]+)
_(?P<last_name>[^_./\\\\]+)
_(?P<datetime>[^_./\\\\]+)
\.(?P<file_extension>pdf)
%' 
```

我假设您永远不希望在任何组中出现多个目录，并且目录/文件名永远不会包含下划线或句点，除非您明确匹配。

# asp.net-mvc-3 - AutoComplete 控制错误：url.indexOf 不是函数

> ID：10382422
> 
> 赞同：2
> 
> 时间：2012-04-30T10:48:54.473
> 
> 标签：asp.net-mvc-3, c#-4.0, autocomplete

我正在用 ASP.NET MVC3 开发一个网站。

实际上，我正在尝试实现一个自动完成控件...实际上，当用户键入两个以上的字母时，我想显示这两个字母对应的用户列表。

两周前，我已经成功做到了，结果如下：

![在此处输入图像描述](../Images/0d7b2d68877f78926ccd342b4bb5ae9a.png)

**这是代码：**

*预订日历.cs*

```
//AutoComplete control that return the name and first name of the partner corresponding to "term"
    public ActionResult Name(string term)
    {
        int id = 0;
        var user = User.Identity.Name;
        int inter = int.Parse(user);
        var managers = from d in db.Managers
                       select d;
        managers = managers.Where(s => s.AffiliationNumber == inter);
        foreach (var manager in managers)
        {
            id = manager.TennisClubID;
        }

        var customers = (from c in db.Customers where (c.Name.Contains(term)) && c.TennisClub.ID == id select c.Name + ";" + c.FirstName).Distinct().Take(10);
        return Json(customers, JsonRequestBehavior.AllowGet);
    } 
```

***创建.cshtml***

```
@model TennisOnline.Models.Reservation

@{
ViewBag.Title = "Create";
Layout = "~/Views/Shared/_Layout.cshtml";
}

<script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"> </script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery-ui-1.8.11.js")" type="text/javascript"> </script>
<link href="@Url.Content("~/Content/themes/base/jquery.ui.all.css")" rel="stylesheet" type="text/css" />
<script src="@Url.Content("~/Scripts/EditorHookup.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.autocomplete.js")" type="text/javascript"></script>
<link href="@Url.Content("~/Content/jquery.autocomplete.css")" rel="stylesheet" type="text/css"/>

<script type="text/javascript">
$(document).ready(function () {
    $("#Partner").autocomplete({ source: '@Url.Action("Name", "ReservationCalendar")'  }, { minChars: 2 });
});
</script>

 @using (Html.BeginForm()) {
@Html.ValidationSummary(true)
<fieldset>
    <legend>Reservation</legend>

    <div class="editor-label">
        @Html.LabelFor(model => model.Date)
    </div>
    <div class="editor-field">
        @Html.DisplayFor(model => model.Date)
        @Html.ValidationMessageFor(model => model.Date)
    </div>

    <div class="editor-label">
        @Html.LabelFor(model => model.StartTime)
    </div>
    <div class="editor-field">
        @Html.DisplayFor(model => model.StartTime)
        @Html.ValidationMessageFor(model => model.StartTime)
    </div>

    <div class="editor-label">
        @Html.LabelFor(model => model.Double)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.Double)
        @Html.ValidationMessageFor(model => model.Double)
    </div>

    <div class="editor-label">
        @Html.LabelFor(model => model.Customer.Name)
    </div>
    <div class="editor-field">
        @Html.DisplayFor(model => model.Customer.Name)
    </div>

    <div class="editor-label">
        @Html.LabelFor(model => model.Partner)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.Partner)
        @Html.ValidationMessageFor(model => model.Partner)
    </div>

    <div class="editor-label">
        @Html.Label("Numéro du court")
    </div>
    <div class="editor-field">
        @Html.DisplayFor(model => model.TennisCourt.Number)
        @Html.ValidationMessageFor(model => model.TennisCourt.Number)
    </div>

    <p>
        <input type="submit" value="Créer" />
    </p>
</fieldset>
}

<div>
@Html.ActionLink("Retour à l'index", "Index", new { id = Model.TennisClub.ID })
</div> 
```

**jQuery.AutoComplete.js**

```
(function($) {
"use strict";

/**
* jQuery autocomplete plugin
* @param {object|string} options
* @returns (object} jQuery object
*/
$.fn.autocomplete = function(options) {
    var url;
    if (arguments.length > 1) {
        url = options;
        options = arguments[1];
        options.url = url;
    } else if (typeof options === 'string') {
        url = options;
        options = { url: url };
    }
    var opts = $.extend({ }, $.fn.autocomplete.defaults, options);
    return this.each(function() {
        var $this = $(this);
        $this.data('autocompleter', new $.Autocompleter(
            $this,
            $.meta ? $.extend({ }, opts, $this.data()) : opts
        ));
    });
};

/**
* Store default options
* @type {object}
*/
$.fn.autocomplete.defaults = {
    inputClass: 'acInput',
    loadingClass: 'acLoading',
    resultsClass: 'acResults',
    selectClass: 'acSelect',
    queryParamName: 'q',
    limitParamName: 'limit',
    extraParams: { },
    remoteDataType: false,
    lineSeparator: '\n',
    cellSeparator: '|',
    minChars: 2,
    maxItemsToShow: 10,
    delay: 400,
    useCache: true,
    maxCacheLength: 10,
    matchSubset: true,
    matchCase: false,
    matchInside: true,
    mustMatch: false,
    selectFirst: false,
    selectOnly: false,
    showResult: null,
    preventDefaultReturn: true,
    preventDefaultTab: false,
    autoFill: false,
    filterResults: true,
    sortResults: true,
    sortFunction: null,
    onItemSelect: null,
    onNoMatch: null,
    onFinish: null,
    matchStringConverter: null,
    beforeUseConverter: null,
    autoWidth: 'min-width',
    useDelimiter: false,
    delimiterChar: ',',
    delimiterKeyCode: 188,
    processData: null
};

/**
* Sanitize result
* @param {Object} result
* @returns {Object} object with members value (String) and data (Object)
* @private
*/
var sanitizeResult = function(result) {
    var value, data;
    var type = typeof result;
    if (type === 'string') {
        value = result;
        data = { };
    } else if ($.isArray(result)) {
        value = result[0];
        data = result.slice(1);
    } else if (type === 'object') {
        value = result.value;
        data = result.data;
    }
    value = String(value);
    if (typeof data !== 'object') {
        data = { };
    }
    return {
        value: value,
        data: data
    };
};

/**
* Sanitize integer
* @param {mixed} value
* @param {Object} options
* @returns {Number} integer
* @private
*/
var sanitizeInteger = function(value, stdValue, options) {
    var num = parseInt(value, 10);
    options = options || { };
    if (isNaN(num) || (options.min && num < options.min)) {
        num = stdValue;
    }
    return num;
};

/**
* Create partial url for a name/value pair
*/
var makeUrlParam = function(name, value) {
    return [name, encodeURIComponent(value)].join('=');
};

/**
* Build an url
* @param {string} url Base url
* @param {object} [params] Dictionary of parameters
*/
var makeUrl = function(url, params) {
    var urlAppend = [];
    $.each(params, function(index, value) {
        urlAppend.push(makeUrlParam(index, value));
    });
    if (urlAppend.length) {
        url += url.indexOf('?') === -1 ? '?' : '&'; // ERROR HERE !!!
        url += urlAppend.join('&');
    }
    return url;
};

   ....

})(jQuery); 
```

奇怪的是，当我尝试在“ReservationCalendar.cs”中使用几乎“相同”的代码时，我在 Firebug 中收到了这个 JS 错误：url.indexOf is not a function... **in my js.file so**

而且他从来没有达到我的控制器的方法“名称”......

你能帮我找出我做错了什么吗？提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-28T13:48:53.847

在某些浏览器中，没有 indexOf 功能（如 IE8），因此您需要在原型中添加它。像这样的东西：

```
if (!Array.prototype.indexOf) 
{ 
  Array.prototype.indexOf = function(elt /*, from*/) 
  { 
    var len = this.length >>> 0; 

    var from = Number(arguments[1]) || 0; 
    from = (from < 0) 
         ? Math.ceil(from) 
         : Math.floor(from); 
    if (from < 0) 
      from += len; 

    for (; from < len; from++) 
    { 
      if (from in this && 
          this[from] === elt) 
        return from; 
    } 
    return -1; 
  }; 
} 
```

# .net - 无法设置自定义 ValueType 的“值”

> ID：10382425
> 
> 赞同：1
> 
> 时间：2012-04-30T10:49:11.867
> 
> 标签：.net, vb.net, value-type

我创建了一个自定义 ValueType：

```
Private Structure MyValueType
    Private _integerValue As Integer

    Public Sub New(initValue As Integer)
        _integerValue = initValue
    End Sub

    Public Overrides Function ToString() As String
        Return _integerValue.ToString
    End Function
End Structure 
```

但我不知道如何测试这样的值：

```
 Dim v As New MyValueType(3)
    Dim x As New MyValueType(4)

    If v = x Then 'fails compile
        MessageBox.Show("The values are the same")
    End If 
```

错误：

```
Operator '='  is not defined for Types MyValueType and MyValueType 
```

那么如何为我的 ValueType 定义运算符（我知道这一定很简单，但我在任何地方都找不到示例！）？

注意我不想测试`If v.Equals(x)`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T12:25:25.947

类似于以下内容（您需要重载 the`=`和`<>`运算符）：

```
Sub Main
    Dim v As New MyValueType(3)
    Dim x As New MyValueType(4)

    If v <> x Then 'fails compile
        Console.WriteLine("The values are not the same")
    End If    
End Sub 
```

* * *

```
Private Structure MyValueType
    Private _integerValue As Integer

    Public Sub New(initValue As Integer)
        _integerValue = initValue
    End Sub

    Public Overrides Function ToString() As String
        Return _integerValue.ToString
    End Function

    Public Shared Operator =(
        ByVal left as MyValueType, 
        ByVal right as MyValueType) As Boolean

        If left.ToString() = right.ToString()
            Return True
        End If

        Return False   
    End Operator 

    Public Shared Operator <>(
        ByVal left as MyValueType, 
        ByVal right as MyValueType) As Boolean          

        Return Not (left = right)   
    End Operator     
End Structure 
```

> **注意：**您可能希望实施`IEquatable(Of MyValueType)`，因为这样做会获得一些好处，并且会被视为“最佳实践”。

# jquery - 用于单击背景+元素的Jquery选择器？

> ID：10382433
> 
> 赞同：0
> 
> 时间：2012-04-30T10:49:42.417
> 
> 标签：jquery, css, html, click, selector

我似乎找不到制作选择器的正确方法，它应该只在 DIV 的背景和主图像上触发点击 - 如果有，但如果我点击位于该 div 中的其他一些元素 -像 hrefs 等 - 它应该什么都不做。

我试过这个：

```
$('#SHOWCASE, #SHOWCASE > img') 
```

Showcase - 是 DIV 的 ID，img 是直接附加到它的图像。但是，如果我向它添加 .Click 函数，它仍然会触发该 div 中的任何元素，例如链接等，请注意这些链接也具有绝对位置。

那么有什么解决方案吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-30T10:54:56.110

以最简单的方式，只需测试单击的元素是否是您将处理程序绑定到的元素：

```
$('<selector>').click(function(event) {
    if(event.target === this) {
        // do something
    }
}); 
```

**参考**：[`event.target`](http://api.jquery.com/event.target/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-30T10:55:01.490

这是正常行为，因为事件会在 DOM 中冒泡。您应该检查[事件对象](http://api.jquery.com/category/events/event-object/)[`target`](http://api.jquery.com/event.target/)的内部以查看*最初*单击的是哪个元素：

 *```
$('#SHOWCASE').on('click', function (e) {
    if ($('#SHOWCASE, #SHOWCASE > img').is(e.target)) {
        // Only do something if it was those elements.
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T10:54:53.500

您需要阻止该 div 中的其他元素冒泡。像 jQuery 的 stopPropagation() 这样的东西应该可以解决问题。将其添加到#SHOWCASE 的所有子项中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-30T10:56:33.473

```
$('#hello, #hello > img').on('click', function(e) {
    if(e.target == this) {
        console.log(this);
    }
}); 
```*

# php - php curl_init（）不起作用

> ID：10382446
> 
> 赞同：-5
> 
> 时间：2012-04-30T10:50:23.940
> 
> 标签：php

我正在尝试使用 url 发送 SMS 但它不起作用结果为空这是我的代码

```
$ch = curl_init();
        curl_setopt($ch, CURLOPT_URL,$url);

        /**
        * Ask cURL to return the contents in a variable
        * instead of simply echoing them to the browser.
        */

        //Using Proxy
        // curl_setopt($ch, CURLOPT_PROXY, '212.138.39.84:8080');
        //

        curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);

        /**
        * Execute the cURL session
        */
$result = curl_exec ($ch);
                    /**
        * Close cURL session
        */
        curl_close ($ch);

         $result=explode("\n",$result);
         $result=$result[(count($result)-1)];
     $result; 
```

谁能帮我 ？？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T11:30:05.440

试试这个

```
<?php 

    $ch = curl_init ($url);

     /*
      * Send SMS
      */
      curl_setopt ($ch , CURLOPT_RETURNTRANSFER , TRUE);
      curl_setopt($ch , CURLOPT_TIMEOUT , 30);

     /*
      * Execute command and send sms
      */

     $result = curl_exec ($ch);
?> 
```

您可以在下面写下打印输出

```
<?php
      echo "<pre>";
      print_r($result); 
      echo "</pre>";
?> 
```

在解析或 expload 结果后查看输出。

# haskell - 如何处理来自标准输入的数据，逐行，最大次数并在Haskell中打印行数

> ID：10382448
> 
> 赞同：6
> 
> 时间：2012-04-30T10:50:26.090
> 
> 标签：haskell, monads

此代码从标准输入的第一行读取要处理的行数，然后循环 number_of_lines_to_process 次进行一些计算并打印结果。我希望它在“#”之后打印“Line #”中的行号，但我不知道如何获取它

```
import IO
import Control.Monad (replicateM)

main :: IO ()

main = do
    hSetBuffering stdin LineBuffering
    s <- getLine
    let number_of_lines_to_process = read s :: Integer
    lines <- replicateM (fromIntegral(number_of_lines_to_process)) $ do
        line <- getLine
        let number = read line :: Integer
            result = number*2 --example
        putStrLn ("Line #"++": "++(show result)) --I want to print the number of the iteration and the result
    return () 
```

我想这个问题的解决方案真的很简单，但我不熟悉 Haskell（第一次在里面编码），我没有找到任何方法。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-30T11:00:22.287

您可以使用[`forM_`](http://hackage.haskell.org/packages/archive/base/latest/doc/html/Control-Monad.html#v%3aforM-95-)而不是`replicateM`：

```
import IO
import Control.Monad

main :: IO ()
main = do
    hSetBuffering stdin LineBuffering
    s <- getLine
    let number_of_lines_to_process = read s :: Integer

    forM_ [1..number_of_lines_to_process] (\i -> do
        line <- getLine
        let number = read line :: Integer
            result = number * 2
        putStrLn $ "Line #" ++ show i ++ ": " ++ show result) 
```

请注意，因为您使用`forM_`（丢弃每次迭代的结果），所以最后不需要附加`return ()`-`do`块返回最后一条语句的值，在这种情况下，`()`它是由`forM_`.

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-04-30T10:57:15.267

诀窍是首先创建一个包含所有要打印的行号的列表，然后遍历该列表，依次打印每个数字。所以，像这样：

```
import Control.Monad

import System.IO

main :: IO ()
main = do
  hSetBuffering stdin LineBuffering
  s <- getLine
  let lineCount = read s :: Int
      -- Create a list of the line numbers
      lineNumbers = [1..lineCount]

  -- `forM_` is like a "for-loop"; it takes each element in a list and performs
  -- an action function that takes the element as a parameter
  forM_ lineNumbers $ \ lineNumber -> do
    line <- getLine
    let number = read line :: Integer
        result = number*2 --example
    putStrLn $ "Line #" ++ show lineNumber ++ ": " ++ show result
  return () 
```

阅读 的定义[`forM_`](http://hackage.haskell.org/packages/archive/base/latest/doc/html/Control-Monad.html#v:forM_)。

顺便说一句，我不推荐使用旧的 Haskell98 IO 库。改为使用`System.IO`。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-04-30T10:59:24.433

您可以计算结果，枚举它们，然后打印它们：

```
import IO
import Control.Monad (replicateM)

-- I'm assuming you start counting from zero
enumerate xs = zip [0..] xs

main :: IO ()

main = do
    hSetBuffering stdin LineBuffering
    s <- getLine
    let number_of_lines_to_process = read s :: Integer
    lines <- replicateM (fromIntegral(number_of_lines_to_process)) $ do
        line <- getLine
        let number = read line :: Integer
            result = number*2 --example
        return result
    mapM_ putStrLn [ "Line "++show i++": "++show l | (i,l) <- enumerate lines ] 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-30T15:30:23.263

我还是 Haskell 的新手，所以下面的程序可能存在问题（它确实有效）。该程序是尾递归实现。`doLine`辅助函数携带行号。处理步骤被考虑在内`process`，您可以根据遇到的问题进行更改。

```
import System.IO
import Text.Printf

main = do
  hSetBuffering stdin LineBuffering
  s <- getLine
  let number_of_lines_to_process = read s :: Integer
  processLines number_of_lines_to_process
  return ()

-- This reads "max" lines from stdin, processing each line and
-- printing the result.
processLines :: Integer -> IO ()
processLines max = doLine 0
    where doLine i
              | i == max = return ()
              | otherwise =
                  do
                    line <- getLine
                    let result = process line
                    Text.Printf.printf "Line #%d: %d\n" (i + 1) result
                    doLine (i + 1)

-- Just an example. (This doubles the input.)
process :: [Char] -> Integer
process line = let number = read line :: Integer
               in
                 number * 2 
```

我是一名haskell 菜鸟，因此欢迎对上述内容提出任何批评。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-03T21:37:50.260

作为替代方案，我认为您可能会喜欢一个带有最少的单子弄脏和没有**做**符号的答案。我们使用 enumerate 函数将用户数据的惰性列表与行号的无限列表压缩在一起，以提供我们想要的输出。

```
import System.IO
import Control.Monad (liftM)

--Here's the function that does what you really want with the data
example = (* 2)

--Enumerate takes a function, a line number, and a line of input and returns
--an ennumerated line number of the function performed on the data
enumerate :: (Show a, Show b, Read a) => (a->b) -> Integer -> String -> String
enumerate f i x = "Line #" ++ 
                  show i ++ 
                  ": " ++ 
                  (show . f . read $ x) -- show . f . read handles our string conversion

-- Runover takes a list of lines and runs 
-- an enumerated version of the sample over those lines.
-- The first line is the number of lines to process.
runOver :: [String] -> [String]
runOver (line:lines) = take (read line) $ --We only want to process the number of lines given in the first line
                       zipWith (enumerate example) [1..] lines -- run the enumerated example 
                                                               -- over the list of numbers and the list of lines

-- In our main, we'll use liftM to lift our functions into the IO Monad
main = liftM (runOver . lines) getContents 
```

# search - Grails 搜索控制器

> ID：10382450
> 
> 赞同：1
> 
> 时间：2012-04-30T10:50:54.507
> 
> 标签：search, grails

我有三门课程，顾问和工作实习。我想创建一个搜索框，我可以从中搜索课程、顾问和 workPlacement 类的字段。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T11:23:15.140

看看[这里](http://grails.org/plugin/searchable)的可搜索插件。它是为这样的事情而构建的，应该毫不费力地为您提供许多强大的功能。

# asp.net - 按钮单击事件未在 popupextender 内触发

> ID：10382451
> 
> 赞同：0
> 
> 时间：2012-04-30T10:50:58.183
> 
> 标签：asp.net, c#-4.0

我有弹出扩展器。当我单击 popupextender 中的按钮时，第一次不会触发。

例子：

```
<asp:Image ID="imgDown" ImageUrl="../Images/arrow_down1.gif" runat="server" />
<asp:Panel ID="pnlInboxResumes" runat="server" 
           Width="35px" 
           BorderColor="#99CCFF" 
           BorderStyle="Solid" 
           BorderWidth="1" 
           BackColor="White" 
           Style="display: none;">
    <table border="0" align="left" cellpadding="3" cellspacing="0">
        <tr>    
            <td>
                <asp:DataList 
                        ID="dlInboxResumes" 
                        runat="server" 
                        OnItemCommand="dlInboxResumes_ItemCommand" 
                        OnItemDataBound="dlInboxResumes_ItemDataBound" 
                        on RepeatDirection="Vertical" 
                        DataKeyField="Path">
                    <ItemTemplate>
                        <asp:ImageButton 
                                ID="imgbtnResume" 
                                runat="server" 
                                ImageUrl="~/Images/ParseResume_3.png" 
                                CausesValidation="false" 
                                CommandName="select" 
                                EnableViewState="true"/>
                    </ItemTemplate>
                </asp:DataList>
            </td>
        </tr>
    </table>
</asp:Panel>
<asp:PopupControlExtender 
        ID="InboxParseResumes" 
        runat="server" 
        TargetControlID="imgDown" 
        PopupControlID="pnlInboxResumes" 
        Position="Bottom" 
        CommitProperty="ImageUrl">
</asp:PopupControlExtender> 
```

# php - 如何编写自己的php模板引擎？

> ID：10382453
> 
> 赞同：0
> 
> 时间：2012-04-30T10:51:09.210
> 
> 标签：php, template-engine

我想在另一个类似于 smarty 的插件中编写自己的模板引擎。

```
<body>
<p><?php echo $paragraph; ?></p>
<i><?php echo date("l"); ?></i>
</body> 
```

但我想写如下

```
<body>
<p>{paragraph}</p>
<i>{day}</i>
</body> 
```

我怎样才能把引擎写成上层。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T10:58:02.207

据推测，您正在寻找以下内容：

```
php > $t = "Hello {name}";
php > $v = "name";
php > $name = "Test";
php > echo str_replace('{'. $v .'}', $$v, $t);
Hello Test 
```

# c - 为什么这个堆栈溢出这么快？

> ID：10382455
> 
> 赞同：1
> 
> 时间：2012-04-30T10:51:20.027
> 
> 标签：c, memory

所以我写了一个玩具 C 程序，它会故意导致堆栈溢出，只是为了玩弄我系统的限制：

```
#include <stdio.h>

int kefladhen(int i) {
    int j = i + 1;
    printf("j is %d\n",j);
    kefladhen(j);
}

int main() {
    printf("Hello!:D\n");
    kefladhen(0);
} 
```

我惊讶地发现在分段错误之前打印的最后一行是“j is 174651”。当然，每次运行它的确切数字都会有所不同，但总的来说，我很惊讶 174 万奇数的堆栈帧足以耗尽我的 4GB linux 笔记本电脑上的进程的内存。我认为 printf 可能会产生一些开销，但是 printf 在我递归调用 kefladhen() 之前返回，因此堆栈指针应该回到以前的位置。我每次调用只存储一个 int，所以每个堆栈帧总共应该只有 8 个字节，对吧？因此，其中 17.4 万个只是实际使用的内存的大约 1 兆字节半，这对我来说似乎太低了。我在这里有什么误解？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-30T10:54:56.467

> ...但总的来说，我很惊讶 174 万奇数堆栈帧足以耗尽我 4GB linux 笔记本电脑上进程的内存...

请注意，堆栈不是通用内存池。堆栈是为提供堆栈而预先分配的块。机器上的 4GB 内存可能只有 1MB。我的猜测是您的堆栈大小约为 1.3MB；这对于 174,651 个 8 字节帧（返回地址 4 字节， . 字节 4 字节`int`）已经足够了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-30T10:58:09.027

我认为这里的关键误解是堆栈本身不会动态增长。它被静态设置为一个相对较小的数字，但您可以在运行时更改它（这里是一个[答案的链接，解释了它是如何使用`setrlimit`call](https://stackoverflow.com/a/2284691/335858)完成的）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-30T13:56:47.767

其他人已经讨论过堆栈的大小和分配。“每次运行它的确切数字都会略有不同”的原因与多线程系统上的缓存性能有关。

通常，您可以期望为堆栈预分配的内存是页面对齐的。但是，起始堆栈指针会因线程到线程/进程到进程/任务到任务而异。这是为了帮助避免缓存行刷新、失效和加载。如果所有任务/线程/进程都具有相同的堆栈指针虚拟地址，则您会期望每当发生上下文切换时都会发生更多缓存冲突。为了减少这种可能性，许多操作系统将起始堆栈指针放在起始堆栈页面的某个位置，但不一定位于最顶部或相同位置。因此，当发生上下文切换并发生后续堆栈访问时，...

1.  变量已经在缓存中的机会更大
2.  不会发生缓存冲突的更好机会

希望这可以帮助。

# c# - c# 获取数组索引id

> ID：10382456
> 
> 赞同：-1
> 
> 时间：2012-04-30T10:51:22.240
> 
> 标签：c#, .net, visual-studio

不确定是否在正确的轨道上，但我想找到一个数组的索引 id 并检查它是否等于另一个 id 然后显示一条消息。由于某种原因它不起作用。

```
int  _findID = 1;       
using (StreamReader reader = new StreamReader("textfile.txt"))
    {
    string line = reader.ReadLine();
    while (line != null)
    {
        string[] array = {line};
        for (int i = 0; i < array.Length; i++)
        {
            if (array[i] == findID)
            {
                MesssageBox.show("Line found!!")
            }
        }
    }
} 
```

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T10:52:54.420

尝试

```
if(int.Parse(array[i]) == findID) 
```

代替

```
if (array[i] == findID) 
```

您必须将您`string`的数字表示转换为 a `int`，然后比较两者`int`。

这甚至比迭代总是有 1 个元素的数组还要短：

```
while (line != null) {
    if(int.Parse(array[i]) == findID)
        MesssageBox.Show("Line found!!")
} 
```

## 编辑

尝试

```
int  _findID = 1;
List<String> names = new List<string>()
using (StreamReader reader = new StreamReader("textfile.txt"))
{
    string line = reader.ReadLine();
    int lineCount = 0;
    while (line != null)
    {
        lineCount++;
        names.Add(line);
        if (lineCount == _findID)
            MessageBox.Show("Line found!!");           
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T10:56:40.243

@ user1285872：array.Length 在您检查 if (array[i] == findID) 时，如果 findID ==0 的值将显示 (0==findID)，则数组长度将为 1，然后将显示消息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T11:00:13.063

您的代码存在各种问题：

首先，如果文件不为空，则当您读取该行一次并始终检查同一行时，您将陷入无限循环：

```
string line = reader.ReadLine();
while (line != null) {} 
```

只要您在循环本身中创建该数组，它就始终是 1 项。

但是对于lineID的问题，这样一行的内容究竟是什么？

# macos - OS X，应用程序从标准用户启动时无法获得root权限

> ID：10382462
> 
> 赞同：0
> 
> 时间：2012-04-30T10:51:44.283
> 
> 标签：macos, installation, privilege

我正在尝试为 OS X 创建一个安装程序。为了能够写入 root 拥有的目录（/Applications、/Library...），我正在使用安全框架中的授权服务。以下代码适用于管理员用户，但适用于标准用户失败。权限的创建工作没有错误消息，但该过程仍然以较低的权限运行（没有文件写入提到的位置）。

当然，我使用管理员用户的登录名/密码进行身份验证。

```
 AuthorizationRef authRef;

    char rightName[] = "system.install.root.user";
    AuthorizationItem   kActionRight = { rightName, 0, 0, 0 };
    AuthorizationRights rights = {1, &kActionRight};
    AuthorizationFlags flags=kAuthorizationFlagExtendRights|kAuthorizationFlagInteractionAllowed;

    OSStatus err = AuthorizationCreate(&rights, 0, flags, &authRef);

    // [ write to a file in /Applications; doesn't work with standard users ]

    if (authRef != 0)
       AuthorizationFree(authRef, kAuthorizationFlagDestroyRights); 
```

我知道有使用 AuthorizationExecuteWithPrivileges() 的示例，但由于这在 OS X 10.7 中已被弃用，我宁愿避免使用它。知道我做错了什么或者我需要做什么才能获得root权限吗？

谢谢你的帮助，

克里斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T11:08:18.053

Maybe you need use PackageMaker instead of writing your own installer. This save your time... And dependent of your requirement you can use HelperTools that will be automatically copy binaries to the /Library...

# kernel - 我应该如何调用 BIOS 中断

> ID：10382469
> 
> 赞同：1
> 
> 时间：2012-04-30T10:52:08.763
> 
> 标签：kernel, bios

我开发了一个基于 x86 'Hello World' linux 的小型操作系统。我刚刚创建了文件 loader.s、linker.ld、main.c 并使用 grub 加载程序在 ubuntu 中使用 bochs 模拟器启动我的操作系统。

我刚刚访问了视频内存并将“hello world”字符串显示到屏幕上。我使用boches调试我的操作系统，cr0 PM值设置为1，所以我认为我的操作系统直接进入保护模式而不是进入实模式。

我的问题是我应该如何直接进入实模式而不进入保护模式？在此之后，我如何调用 bios 中断（http://en.wikipedia.org/wiki/BIOS_interrupt_call）来获取初始硬件详细信息，如 HDD、RAM、处理器等...

请任何人帮助我，非常感谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T13:00:01.117

我也没有太多关于这个主题的知识，但我有一段从可启动 CD/DVD 运行的代码。一开始程序以实模式启动，显示我的名字，然后切换到保护模式并再次显示我的名字。我给一个链接，以便它可以帮助你。你可以从[这里下载](http://s2.dosya.tc/server13/o0lob2/toyOs.zip.html)

# .net - 可以在构建之间持久保存 MPGO 数据吗？

> ID：10382471
> 
> 赞同：0
> 
> 时间：2012-04-30T10:52:09.980
> 
> 标签：.net, optimization, .net-4.5, ngen

我刚刚阅读了一篇[关于 MPGO](http://blogs.msdn.com/b/dotnet/archive/2012/03/20/improving-launch-performance-for-your-desktop-applications.aspx)（托管配置文件引导优化）的帖子，描述的过程是：

1.  获取一台装有 Visual Studio 11 Ultimate Beta 和您的应用程序的机器。
2.  使用必要的参数运行 MPGO 工具（以管理员身份）：在文件夹
    `MPGO -scenario MyLargeApp.exe -AssembyList *.* -OutDir C:\Optimized\` 中创建优化的 IL 程序集。`C:\Optimized`
3.  使用每个应用程序 DLL 的必要参数运行 NGen 工具（以管理员身份）： `NGEN.exe myLargeApp.exe`
4.  运行您的应用程序——它现在将使用优化的本机图像。

这似乎意味着您必须对进入您已发布产品的二进制文件执行指导方案。

在构建过程中需要手动干预对我来说没有意义。有没有办法执行一次指导场景，然后提交生成的数据，以便在将来的构建中自动插入到编译的程序集中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T04:57:03.073

几年前，我在 Microsoft 的一个构建实验室工作，负责处理大量托管代码。让我强调一下，这是很多年前的事了，在托管 MPGO 公开之前。但当时他们会使用旧的配置文件数据（通常来自前一天，但有时长达一周）来“部分优化”一组内部二进制文件。我不能说数字，但如果它没有一些好处，我们就不会这样做。那些“部分优化”的二进制文件只能用于自动冒烟测试，并且仅供内部使用。只有完全优化的二进制文件（其配置文件数据是从同一构建中收集的）才会被发布。

我不是专家，但据我了解，MPGO 指导数据使用方法签名（如调试符号使用的）和文件偏移量，它们在构建之间不稳定。那么问题就变成了：有多少百分比足够稳定以产生一些好处？

让我们说一个经常使用的方法的方法名称发生了变化。然后，当然，旧二进制文件中的“热”页面（由于该方法）不会在新二进制文件中找到，并且经常使用的页面可能会放在优化二进制文件的“末尾”使用从未使用过的代码。另一方面：有多少百分比的方法是从一个每日构建中重命名的？（或者甚至更频繁地使用 CI？）我猜不到 1%。

让我回到内部构建。当然，收集新的性能配置文件数据需要一段时间，因此时间敏感的内部函数（需要在构建之后立即运行）将使用部分优化的构建风格运行，因为该构建将在完全优化的构建风格之前完成数小时. 让我解释一下为什么花了这么长时间。IIRC 我们使用了配置文件“passes”，首先运行核心库场景，优化这些二进制文件，然后在以后的“端到端”场景中使用优化的核心（即服务器端 Web 服务或客户端 GUI情景）。因此，核心库将被多次分析和优化。您可以猜到，所有这些都需要时间，这就是“完全分析/优化”构建需要很长时间的原因。

我希望这可以帮到你。

PS 这个问题让我想起了[32-bit DLL rebase issues](http://www.drdobbs.com/184416272)。

# css - 下拉框选择大小

> ID：10382475
> 
> 赞同：0
> 
> 时间：2012-04-30T10:52:19.400
> 
> 标签：css, drop-down-menu

下拉框的列表（选择）中是否可以有固定的高度？

下拉框 --select 1 --select 2 --select 3 --select 4.. 等等。

在某些时候，滚动条会出现。我该怎么做才能防止它？

我想在下拉框中显示所有列表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T10:54:01.160

只用 jquery 表单插件，只用 CSS 是不可能的

# c++ - 使用递归进行硬币兑换的基本情况是什么？

> ID：10382477
> 
> 赞同：0
> 
> 时间：2012-04-30T10:52:26.033
> 
> 标签：c++, recursion, coin-change

我基本上是在尝试通过递归来解决硬币找零问题，这就是我到目前为止所拥有的-：

```
#include<iostream>
#include<conio.h>
using namespace std;

int a[]={1,2,5,10,20,50,100,200},count=0;

//i is the array index we are working at
//a[] contains the list of the denominations
//count keeps track of the number of possibilities

void s(int i,int sum) //the function that i wrote
{
    if (!( i>7 || sum<0 || (i==7 && sum!=0) )){

    if (sum==0) ++count; 

    s(i+1,sum);
    s(i,sum-a[i]);

    }
}

int c(int sum,int  i ){  //the function that I took from the algorithmist
    if (sum == 0)
        return 1;
    if (sum < 0)
        return 0;
    if (i <= 0 && sum > 0 )
        return 1;

    return (c( sum - a[i], i ) + c( sum, i - 1 ));
}
int main()
{
    int a;
    cin>>a;

    s(0,a);
    cout<<c(a,7)<<endl<<count;

    getch();
    return 0;
} 
```

第一个函数 s(i,sum) 由我编写，第二个函数 c(sum,i) 取自这里 - (www.algorithmist.com/index.php/Coin_Change)。

问题是 count 总是返回比预期更高的值。但是，算法专家的解决方案给出了正确的答案，但我无法理解这个基本情况

```
if (i <= 0 && sum > 0 ) return 1; 
```

如果索引 (i) 小于或等于零并且总和仍然不为零，那么函数不应该返回零而不是一吗？

我也知道算法专家的解决方案是正确的，因为在[Project Euler](https://projecteuler.net)上，这给了我正确的答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T12:18:16.973

我认为该算法偏向于面额的选择，并假设只有最小面额的硬币。考虑作为正确性的反例，没有 2 个硬币，只有 1,5，......并且返回的目标是 4：

```
 (4,1)
    (-1,1)  -> cut, sum<0 a[1]==5
    (4,0)   -> i==0 => 1 
```

要么是那个，要么是你错误地实现了算法（会不会有一个错误？可能是`i<0`，还是原始数组是基于 1 的？）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T12:42:54.687

我猜你的问题是“假设我有无限的硬币支持，我可以通过多少种方式更改给定的金额”？您给出的算法专家解决方案还假设最小面额是`1`. 否则它将无法正常工作。现在你的问题：

```
if (i <= 0 && sum > 0 ) return 1; 
```

请注意，唯一的可能性`i<0`是您使用此值调用它 - 不会使用负值进行递归调用`i`。这种情况 ( `i<0`) 是一个错误，因此没有正确的结果（也许断言或异常会更好）。现在，如果`i=0`，假设在指数`0`有价值硬币`1`意味着只有一种方式`sum`与这个面额交换 - 给`sum`价值硬币`1`。对？

经过片刻的思考，我发现了如何消除假设`a[0] == 1`。改变

```
if (i <= 0 && sum > 0 ) return 1; 
```

进入

```
if (i <= 0 && sum > 0 ) return sum % a[0] == 0 ? 1 : 0; 
```

# facebook - PHP 中的 Facebook 应用程序

> ID：10382478
> 
> 赞同：-1
> 
> 时间：2012-04-30T10:52:27.327
> 
> 标签：facebook, facebook-php-sdk

我想学习如何用 php 编写 facebook 应用程序，代码如下：

```
<?php
        require_once('facebook/src/facebook.php');
        $appapikey = 'xxxxxxxxxxxx';
        $appsecret = 'xxxxxxxxxxxx';
        $facebook = new Facebook($appapikey, $appsecret);
        $user=$facebook->getUser();

?>

<html>
        <head>
                <title>Test</title>
        </head>
        <body>
                <?php echo $user; ?>Test
        </body>
</html> 
```

你可以在这里看到应用程序，[https://apps.facebook.com/noorphp](https://apps.facebook.com/noorphp)，我想看`<userId>Test`，但我只看到`0Test`

所以，我没有得到用户ID

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T11:52:38.700

好吧，仍然显示 404 错误，请检查您是否对任何国家/地区有限制，但对我而言，此代码有效

```
$facebook = new Facebook(array(
        'appId' => $app_id,
        'secret' => $app_secret,
        'cookie' => true
));
$user=$facebook->getUser(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T10:56:16.093

在您获取用户 ID 之前，他需要与您的 App 连接。这意味着您必须征得他的许可才能访问他的基本个人资料信息（或者如果您的应用程序需要额外的权限）。

[https://developers.facebook.com/docs/reference/php/facebook-getUser/](https://developers.facebook.com/docs/reference/php/facebook-getUser/)

# django - 无法解析 django 中的提醒

> ID：10382483
> 
> 赞同：2
> 
> 时间：2012-04-30T10:53:04.017
> 
> 标签：django, django-templates, jquery-templates

我想在 jquery 模板中添加一个脚本标签。所以我指的是这个[链接](https://stackoverflow.com/questions/4788525/script-tag-inside-jquery-template)。它告诉以下列方式关闭内部脚本标签：

```
<script id="filaVideoTemplate" type="text/x-jQuery-tmpl">
    <!-- Some HTML here -->
    <script type="text/javascript">
    <!-- Some javascript here -->
    {{html "</sc"+"ript>"}}
</script> 
```

我试过了，但 django 显示此错误：无法解析剩余部分：'" < /sc"+"ript>"' from 'html "< /sc"+"ript>"'

.我该怎么做这个django。django 中对此有什么具体的解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T10:55:20.553

`{`和`}`是 Django 模板中的保留字符，因此您需要使用[`templatetag`](https://docs.djangoproject.com/en/dev/ref/templates/builtins/#templatetag).

代替：

```
{{html "</sc"+"ript>"}} 
```

和：

```
{% templatetag openbrace %}{% templatetag openbrace %}html "</sc"+"ript>"{% templatetag closebrace %}{% templatetag closebrace %} 
```

# spring - 使用 Struts、Springs、Hibernate 的应用程序的 Junit

> ID：10382485
> 
> 赞同：0
> 
> 时间：2012-04-30T10:53:57.593
> 
> 标签：spring, hibernate, junit, struts2, mocking

是否已经为使用 Struts、Springs、Hibernate 技术的单元测试应用程序定义或使用了任何特定方法？我们可以使用哪些不同的模拟 API？注意：我不希望任何解决方案单独对这些技术进行单元测试。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T10:59:30.540

您可以将模拟 Spring 外观注入到您的 Struts 操作中，并对 Struts 操作进行单元测试。您可以将模拟 Spring 存储库/DAO 注入您的 Spring 门面，并对这些门面进行单元测试。您可以在每次存储库测试之前使用 DBUnit（或其他类似工具）填充测试数据库。

选择您最喜欢的模拟 API。有几个：Mockito、EasyMock、JMock 等。

如果您想测试整个应用程序，那么您不再进行单元测试，而是进行集成测试。嘲笑会违背你的目标。如果这是您想要做的，您可以使用 Selenium 或 HtmlUnit 来测试应用程序。

# jquery - Facebook 登录连接状态

> ID：10382491
> 
> 赞同：0
> 
> 时间：2012-04-30T10:54:21.167
> 
> 标签：jquery, facebook

我在我的演示站点中使用 fb 登录连接：我使用了以下代码：

```
 window.fbAsyncInit = function() {
      try{
        FB.init({
            apiKey: '<MY APP KEY>',
            channelUrl : 'www.google.com'
        });

        FB.getLoginStatus(function(response){
            loginHandler(); 
        });
      }catch(error){}
  };  
    function loginHandler(success,fail)
    {

        try{
            if(success){
                alert('i am if');
                FB.api('/me', function(response,fail) {
                    alert("first name == " + response.first_name + "\n ln === " + response.last_name);
                });
            }
        }catch(error){}
    }

    $('#login').bind('click', function(response) {
        try{
            FB.login(loginHandler, {scope: 'email,user_likes'});
        }catch(error){}
    });

    $('#logout').bind('click', function() {
        try{
            FB.logout(function(response){});
        }catch(error){}
      }); 
```

现在我的问题是**alert('i am if');** 每次都显示我是否将**正确的凭据**传递给*facebook*和**alert("first name == " + response.first_name + "\n ln === " + response.last_name);** 当用户传递**错误凭据**时显示**未定义**，当用户返回传递**正确信息时显示正确信息**。

 ****一种可能的选择是检查，`if(response.first_name!=undefined){blah blah....}`但它是检查身份验证的正确方法吗？

请阐明一些光......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T11:20:55.583

[`FB.login`](http://developers.facebook.com/docs/reference/javascript/FB.login/)并且`FB.api`不会像您尝试实施它那样为您提供成功/失败报告。回调没有第二个参数......

`FB.login`回调得到一个也是唯一的参数：

> 来自[`FB.getLoginStatus`](http://developers.facebook.com/docs/reference/javascript/FB.getLoginStatus/)或[`FB.login`](http://developers.facebook.com/docs/reference/javascript/FB.login/)的回应 [`FB.logout`](http://developers.facebook.com/docs/reference/javascript/FB.logout)此响应对象包含：
> 
> **status**
> 用户的状态。已连接、未授权或未知之一。
> **authResponse**
> authResponse 对象。

`FB.api`回调获取一个也是唯一一个来自 Graph API 的响应的参数，通常（但不总是）包含`data`属性、对象字段、布尔值 false 或`error`对象（带有`message`、`type`和`code`属性）

* * *

您可以`loginHandler`通过更正响应回调来修改您的以处理正确的参数：

```
function loginHandler(loginResponse){
  try{
    if(loginResponse.authResponse){
      alert('i am if');
      FB.api('/me', function(response) {
        alert("first name == " + response.first_name +
              "\n ln === " + response.last_name);
      });
    }
  }catch(error){}
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T11:23:16.343

尝试这样的事情：

```
//用于登录
    $("#login").bind("点击", function(e) {     
        var fbScope = "email,user_likes";
        FB.登录（功能（响应）{          
           if(response.status == "已连接"){
               console.log("登录");
           }
        },{范围：fbScope});
    });
    //用于检查登录状态
    FB.getLoginStatus(函数(响应){
        如果（response.authResponse）{    
            var accessToken = response.authResponse.accessToken;
            FB.api('/me', function(response) {
                console.log('我还在登录');
            });         
        }
    });
    //用于注销
    $("#logout").live("点击", function(e) {        
        FB.getLoginStatus(函数(响应){           
            if(response.status == "已连接"){
                FB.注销（功能（响应）{
                    console.log("我现在登出");                  
                });
           } 别的 {
                console.log("未登录");
           }
        });
    });

```****

# eclipse - 知道为什么 F6 不起作用吗？

> ID：10382493
> 
> 赞同：5
> 
> 时间：2012-04-30T10:54:23.877
> 
> 标签：eclipse, pydev

我有一个相当直接的eclipse安装。从用于 Java EE 开发的 Eclipse 开始，我添加了 CDT 和 PyDev（我不记得`F6`在添加这些扩展之前是否正常工作）。

调试时，我试图按下`F6`键进行跨步，但没有任何动作发生。

F5 工作正常。此外，Debug 视图上的 step over 按钮工作正常。查看 Preferences -> General -> Keys，`F6`当按预期进行调试时，绑定是“Step Over”。

我可以从哪里开始解决此问题？

我在 Windows 上，Indigo SR 2。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-22T18:41:25.643

我只是遇到了同样的问题，并设法找到了另一种解决方法。

*窗口 > 首选项 > 常规 > 键*

找到您的调试命令（单步执行、单步执行等...或只需键入他们的热键），选择所需的命令并单击**“恢复命令”**。

注意：我在 Fedora 17 上使用 Eclipse Indigo。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T12:06:15.983

1.  尝试绑定键（只是为了确保`F6`键盘上的键确实有效）但取消

2.  使用选项在控制台中启动 Eclipse`-debug -console -consoleLog`也许您会看到一条错误消息

3.  尝试更新 PyDev。PyDev 过去有一些有问题的键绑定，似乎在 2.4 中已修复。

4.  检查错误日志

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-28T07:09:06.690

转到 Window -> Preferences -> General -> Keys 对于每个键 "F6"、"F7"、"F8" 和 "F5" ，我恢复了命令并将 When 条目从 "debugging" 更改为 "In Windows"。现在所有的快捷键都起作用了。

# perl - 在 Perl 中，如何将文件的内容读入数组？

> ID：10382501
> 
> 赞同：0
> 
> 时间：2012-04-30T10:54:59.073
> 
> 标签：perl

> **可能重复：**
> [使用 Perl 打开文本文件并将其读入数组的最简单方法](https://stackoverflow.com/questions/761392/easiest-way-to-open-a-text-file-and-read-it-into-an-array-with-perl)

我是 Perl 的新手，希望每个文件都将该文件的内容推送到一个单独的数组中，我设法通过以下方式做到了这一点，它使用了 if 语句。但是，我想为我的阵列提供 1 美元之类的东西。那可能吗？

```
#!/usr/bin/perl

use strict;
my @karray;
my @sarray;
my @testarr = (@sarray,@karray);
my $stemplate = "foo.txt";
my $ktemplate = "bar.txt";
sub pushf2a  {
  open(IN, "<$_[0]") || die;
  while (<IN>) {
    if ($_[0] eq $stemplate) {
      push (@sarray,$_);
    } else {
      push (@karray,$_);
    } 
  }
  close(IN) || die  $!;
}
&pushf2a($stemplate,@sarray);
&pushf2a($ktemplate,@karray);
print sort @sarray;
print sort @karray; 
```

我想要这样的东西：

```
#!/bin/sh
myfoo=(@s,@k)
barf() {
  pushtoarray $1
}
barf @s
barf @k 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-30T11:15:40.027

如果您要 slurp 文件，请使用[File::Slurp](http://search.cpan.org/perldoc/File%3a%3aSlurp)：

```
use File::Slurp;
my @lines = read_file 'filename'; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-30T11:06:18.517

首先，您不能`$1`在 Perl 中调用数组，因为它（以及所有其他以数字作为名称的标量）被正则表达式引擎使用，因此无论何时运行正则表达式匹配都可能被覆盖。

其次，您可以比这更容易将文件读入数组：只需在列表上下文中使用菱形运算符。

```
open my $file, '<', $filename or die $!;
my @array = <$file>;
close $file; 
```

然后，您将获得文件行的数组，由当前行分隔符分割，默认情况下，您可能期望它是您平台的换行符。

第三，你的`pushf2a`sub 很奇怪，特别是传入一个数组然后不使用它。您可以编写一个接受文件名并返回数组的子例程，从而避免内部 if 语句的问题：

```
sub f2a {
    open my $file, '<', $_[0] or die $!;
    <$file>;
    # $file closes here as it goes out of scope
}

my @sarray = f2a($stemplate);
my @karray = f2a($ktemplate); 
```

总的来说，我不确定最好的解决方案到底是什么，因为我不能完全弄清楚你想要做什么，但也许这会对你有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T11:10:05.773

不明白，你想要什么`$1`数组，但好的做法是这段代码：

我在 HoA 中包含文件及其内容 - 数组的哈希

```
 my $main_file = qq(container.txt);  #contains all names of your files. 
   my $fh;      #filehandler of main file
   open $fh, "<", $main_file or die "something wrong with your main file! check it!\n";
   my %hash;    # this hash for containing all files

   while(<$fh>){
        my $tmp_fh;  # will use it for files in main file
        #$_ contain next name of file you want to push into array
        open $tmp_fh, "<", $_ or next; #next? maybe die, don't bother about it
        $hash{$_}=[<$tmp_fh>]; 
        #close $tmp_fh; #it will close automatically
   }
   close $fh; 
```

# web-services - 实时网站上的跟踪/调试问题

> ID：10382511
> 
> 赞同：0
> 
> 时间：2012-04-30T10:55:30.243
> 
> 标签：web-services

我们为一个网站工作，经常在 LIVE 中遇到一些问题。因此，我们需要提出一个概念，即在 LIVE 中发生的问题很容易被通知，而不是在升级到服务器级别之后。

比如说，我们想要在 LIVE 中为流发生任何故障时得到通知/警报 - 那么我们如何跟踪这些？是否有一个框架可以做到这一点，或者有一个特定的机制来实现它？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T11:06:27.237

u can use some application development platforms like **visual basic**, **netbeans**, **eclipse** for development of application which will help you to debug the complete code by using method *breakpoints* in case it is nt running as expected.

# api - 如何在 Tridion 2009 中启用用户模拟？

> ID：10382521
> 
> 赞同：6
> 
> 时间：2012-04-30T10:56:10.743
> 
> 标签：api, impersonation, tridion, tridion2009

我正在尝试使用 Tridion 的 ContentManagment API 来检索分类类别和关键字，但我遇到了 Access denied 错误。

我有以下方法：

```
public Dictionary<string, string> GetKeywords(string tcmUri)
{
     var result = new Dictionary<string, string>();

     try 
     {
         // _settings.ImpersonationUser = "MYDOMAIN/myusername"
         using (var session = new Session(_settings.ImpersonationUser))
         {
             var category = new Category(new TcmUri(tcmUri), session);
             var keywords = category.GetKeywords(new Filter());

             if (keywords != null && keywords.Count > 0)
             {
                 foreach (var keyword in keywords)
                 {
                     result.Add(keyword.Id.ToString(), keyword.Title);
                 }
             }
         }
     }
     catch (Exception ex)
     {
         Logger.Log.Error(
             "Failed to retrieve keywords for '{0}'.".FormatWith(tcmUri), ex);
     }

     return result;
} 
```

我获得的用户`_settings.ImpersonationUser`有权访问 Tridion Content Manager，被配置为管理员，并已添加到“SDL Tridion Content Manager 配置”管理单元中的模拟用户。

我得到的错误如下：

```
System.Runtime.InteropServices.COMException (0x80040302):
<?xml version="1.0"?>
<tcm:Error xmlns:tcm="http://www.tridion.com/ContentManager/5.0" 
    ErrorCode="80040302" Category="16" Source="Kernel" Severity="2">
    <tcm:Line ErrorCode="80040302" Cause="true" MessageID="16226">
        <![CDATA[Access denied for the user MYDOMAIN\myuser.]]
        <tcm:Token>MYDOMAIN\myuser</tcm:Token>
    </tcm:Line>
    <tcm:Details>
        <tcm:CallStack>
            <tcm:Location>SystemBLST.GetUserContext</tcm:Location>
            <tcm:Location>SystemBLST.IBLSecurityST_GetUserContext</tcm:Location>
        </tcm:CallStack>
    </tcm:Details>
</tcm:Error> 
```

有没有人知道我做错了什么？提前致谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-30T11:33:14.280

当涉及到模拟和 Tridion 时，需要了解以下几点......

*   *执行*代码的用户不应有权访问 Tridion。
*   *执行*代码的用户应配置为有效的“模拟用户”
*   代码模拟的用户应该是有效的 Tridion 用户。

如果所有这 3 个条件都为真，则模拟将起作用。

通过*执行*代码，我的意思是执行代码的 Windows 帐户。如果此帐户有权访问 Tridion，则无需使用模拟。

希望这可以帮助。

# django - 无法访问管理媒体文件夹

> ID：10382525
> 
> 赞同：0
> 
> 时间：2012-04-30T10:56:23.283
> 
> 标签：django, apache, django-admin, apache2

我已经在 apache 2.2.21 上部署了我的应用程序

在我的 settings.py 文件中，我给出了这样的

```
MEDIA_ROOT = os.path.dirname(__file__)+'\\media'
MEDIA_URL = '/mymedia/'
STATIC_ROOT = ''
STATIC_URL = '/static/'
ADMIN_MEDIA_PREFIX = '/static/admin/' 
```

当我们运行 127.0.0.1:8000/admin(django server) 时，我得到了管理员风格

但在 apache 上运行时无法获得管理员风格

apache的http.conf我只提到如下

```
WSGIScriptAlias / C:/Python27/Lib/site-packages/django/bin/myapp/django.wsgi

<Directory C:/Python27/Lib/site-packages/django/bin/myapp>
Order deny,allow
Allow from all
</Directory> 
```

是否有任何更改或我在这里错过的任何其他内容，请告诉我，谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T11:02:56.417

我想你只是忘记了 MEDIA_ROOT 行中的 ' 。

好的，然后尝试将其添加到您的 apache conf 中：

```
<Location "/mymedia/">  
    SetHandler None
</Location>

<Location "/static/">  
    SetHandler None
</Location>

<LocationMatch "\.(jpg|gif|png)$">  
    SetHandler None
</LocationMatch> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T11:12:53.620

尝试使用 Apache 而不是 Django 来提供静态内容：

```
Alias /static/ /path/to/static/dir/ 
```

# c - ARM处理器会是要走的路吗？

> ID：10382526
> 
> 赞同：0
> 
> 时间：2012-04-30T10:56:25.137
> 
> 标签：c, operating-system, arm, hardware

我正在制作一个小设备，它有三个按钮（就像 radioshack 的按钮），每个按钮都有自己的动作。这些按钮和它们的动作将由我安装在这个设备上的一个**非常**小的实时操作系统来控制。

1.  我需要一个 ARM 处理器吗？
2.  如何在设备上安装实时操作系统？
3.  我必须在什么操作系统上编译它（例如 Ubuntu？Mac OS X？Windows 7？）？
4.  有没有人这样做的例子？

PS没有预建板（例如arduino）。我会自己建立董事会。

任何反馈将不胜感激！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-30T11:02:24.477

即使您不想在成品中使用预制板，我建议您在面包板上使用预制板（如 Arduino），构建您的产品、对其进行编程、测试等，然后只需使用与您一直使用的硬件相同的硬件，即可随心所欲地重建它。

这会帮助您，尤其是在您下次构建某些东西时，因为您已经准备好原型板和工具链。

可以在任何操作系统上编译文件。

* * *

枚举版本：

1.  不，我什至不建议使用 ARM 处理器。而是 Atmega328 或类似的。
2.  使用程序员。
3.  任何。
4.  可能有数百万，或至少数十万个例子，是的。

# java - for循环中的循环问题，同时避免重复条目

> ID：10382532
> 
> 赞同：0
> 
> 时间：2012-04-30T10:57:05.090
> 
> 标签：java, android, for-loop

在选定的联系人中，我有重复的值，因此我首先复制选定的联系人副本

```
 for(int q=0;q<selectedcontact.size();q++)
    {
        selectedcontactcopy.add(selectedcontact.get(q));
    } 
```

然后比较两个数组列表

```
 for(int r=0;r<selectedcontactcopy.size();r++)
        {
            for(int j=0;j<selectedcontact.size();j++)
            {
                if(r!=j && r<j)
                {

                    if(selectedcontactcopy.get(r).getLandLineNumber().toString().trim().equals(selectedcontact.get(j).getLandLineNumber().toString().trim()))
                    {
                    Log.i("hai",selectedcontact.get(j).getLandLineNumber().toString());
                    selectedcontact.remove(j);
                    j--;
                    }

                }
            }
        } 
```

但是情况是避免了第一次重复然后arraylist不会比较下一个连续值

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T11:00:23.843

这是进行唯一性检查的不好方法。更好的方法是利用以下功能`java.util.Set`- 确保您的联系人实现 Comparable 并比较固定电话号码，然后将它们添加到集合并迭代集合内容。

Set 保证您的唯一性，并提供比嵌套 for 循环更干净的接口。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T11:02:24.040

用于`HashSet`避免来自 的重复值`ArrayList`，

就像是，

```
ArrayList arrayList = new ArrayList(); // Your ArrayList which contains repeated values
HashSet hashSet = new HashSet();
hashSet.addAll(arrayList);
arrayList.clear();
arrayList.addAll(hashSet); 
```

删除重复元素的最简单方法是将内容添加到 Set（不允许重复），然后将 Set 添加回 ArrayList。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T11:18:50.137

无需为此创建 2 个列表。创建一个 HashMap，其中键作为固定电话号码，值作为整个联系人对象。

遍历列表'selectedContacts'并将所有元素放入哈希图中。最后，遍历创建的哈希映射并将哈希映射中的所有值存储到联系人列表中。

希望能帮助到你。

# c# - C# byte[] 到 String 显示在 '\0' 之后不剪切

> ID：10382533
> 
> 赞同：8
> 
> 时间：2012-04-30T10:57:05.137
> 
> 标签：c#, string, byte

我正在从内存中读取一些东西（在字节数组中），然后我想对其进行转换，但结果类似于“wanteddata\0\0\0\0\0\0\0\0...”。我怎样才能把它剪成“wanteddata”？我不确定wanteddata 的大小，所以我给出了最大大小：14。我从内存中读取并转换的方式：

```
 String w="";
        ReadProcessMemory(phandle, bAddr, buffer, 14, out bytesRW);
        w = ASCIIEncoding.ASCII.GetString(buffer); 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-30T11:01:41.223

大概，您想删除所有字符，包括第一个 '\0' 和之后的所有字符。`Trim`不会这样做。你需要做这样的事情：

```
int i = w.IndexOf( '\0' );
if ( i >= 0 ) w = w.Substring( 0, i ); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-30T12:08:53.640

如果数组确实是 ascii（每个字符一个字节），您可以通过在数组中搜索值 0 来找到 null

```
String w="";
ReadProcessMemory(phandle, bAddr, buffer, 14, out bytesRW);
int nullIdx = Array.IndexOf(buffer, (byte)0);
nullIdx = nullIdx >= 0 ? nullIdx : buffer.Length;
w = ASCIIEncoding.ASCII.GetString(buffer, 0, nullIndex); 
```

这种方法会在一定程度上优化代码，而不是创建包含多个 '/0' 的字符串

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-30T11:06:10.393

The value of bytesRW is the number of bytes that were copied to the buffer [as stated here](http://msdn.microsoft.com/en-us/library/windows/desktop/ms680553%28v=vs.85%29.aspx). The GetString method has an overload that takes a position and a length. If you pass zero as your position and bytesRW as the length it should create a string containing the value you wanted.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-05-14T03:02:10.170

您可以像下面的代码一样使用 LINQ。

```
Encoding.ASCII.GetString(buffer.TakeWhile(x => x != 0).ToArray()); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-04-10T15:32:23.560

根据 mortb 响应，我得到了：

```
public static class EncodingEx
{
    /// <summary>
    /// Convert a C char* to <see cref="string"/>.
    /// </summary>
    /// <param name="encoding">C char* encoding.</param>
    /// <param name="cString">C char* to convert.</param>
    /// <returns>The converted <see cref="string"/>.</returns>
    public static string ReadCString(this Encoding encoding, byte[] cString)
    {
        var nullIndex = Array.IndexOf(cString, (byte) 0);
        nullIndex = (nullIndex == -1) ? cString.Length : nullIndex;
        return encoding.GetString(cString, 0, nullIndex);
    }
}

...

// A call
Encoding.ASCII.ReadCString(buffer) 
```

但是，调用`Array.IndexOf`是不同的。第二个参数必须是 a `byte`，实际上`0`是 a`int`并且不能在`byte`数组中找到。

# backbone.js - Backbone.Model和Backbone.Collection中如何构造url属性？

> ID：10382539
> 
> 赞同：0
> 
> 时间：2012-04-30T10:57:31.710
> 
> 标签：backbone.js

目前我正在做一个本地的 Backbone 应用程序。我想知道如何保存数据，具体来说，如何构造`url`Collection和Model的属性。我创建了一个名为 data 的文件夹，用于保存数据。但是数据的结构是怎样的？它只是一个 json 文件来保存整个 Collection 数据吗？或者它有许多单独的 json 文件来单独保存每个模型的数据？如果是单个 json 文件，我应该如何`url`为 Collection 和 Model 创建属性？如果它们是许多单独的 json 文件，我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T11:10:38.827

它是由你决定 ：） 。Backbone.Js可以`models`工作并且可以与**通过 HTTP 和 URL 公开**`collections`的几乎任何类型的数据源一起工作。但它的设计目的是针对开箱即用的基于 REST 的服务。由于您有兴趣测试该库并学习它，我建议您坚持使用静态 JSON 文件甚至 Twitter 时间线服务。

 ***   由于所有集合都在单个 JSOn 文件中，因此您只需设置集合的 URl。

*   呈现集合的视图将实例化模型并从集合中呈现它们

### 应用

```
window["Application"] = {};

Application.Model = {};
Application.Collection = {};
Application.Views = {};
Application.Templates = {};
Application.Router = {}; 
```

### 从 url 收集

```
Application.Collection.TimeLine = Backbone.Collection.extend({
url:"data/collection.json"
}); 
```

当前网址是`http://localhost/timelineapp/index.html`

Collection.Fetch 将发出 GET 请求`http://localhost/timelineapp/data/collection.json`

这还不够清楚吗？我会添加更多细节**

# c++ - 欧拉计划 #19

> ID：10382540
> 
> 赞同：1
> 
> 时间：2012-04-30T10:57:41.710
> 
> 标签：c++

警告！前方剧透！

> 您将获得以下信息，但您可能更愿意自己做一些研究。
> 
> 1900 年 1 月 1 日是星期一。三十天有九月、四月、六月和十一月。其余的都有三十一个，仅保存二月，它有二十八，风雨无阻。在闰年，二十九。
> 
> 闰年出现在任何能被 4 整除的年份，但不会出现在一个世纪，除非它能被 400 整除。在 20 世纪（1901 年 1 月 1 日至 2000 年 12 月 31 日）有多少个星期日是一个月的第一天？

起初，这似乎是一个简单的问题。然而，当我编写解决方案时，我遇到了一个奇怪的问题 - 事实上，答案应该是 171，但无论我做什么，我都会得到 173。我一遍又一遍地查看我的代码，但仍然找不到错误。

```
#include <iostream>

using namespace std;

int main () {

    int count = 0, days_in_month, days_passed = 1;

    for (int i = 1900; i <= 2000; i++) {
        for (int j = 1; j <= 12; j++) {
            if (j == 4 || j == 6 || j == 9 || j == 11) {
                days_in_month = 30;
            } else if (j == 2) {
                if (i % 400 == 0 || (i % 4 == 0 && i % 100 != 0)) {
                    days_in_month = 29;
                } else {
                    days_in_month = 28;
                }
            } else {
                days_in_month = 31;
            }
            if (days_passed % 7 == 0) {
                count++;
            }
            days_passed += days_in_month;
        }
    }

    cout << count << endl;

    cin.ignore();
    return 0;

} 
```

有人能注意到我的代码有什么问题吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-30T11:02:15.517

你从 1900 开始`i = 1900`。问题是“1901 年 1 月 1 日”。

# mysql - 在 Doctrine2 的右表上结合 LEFT OUTER JOIN 和 WHERE 子句

> ID：10382542
> 
> 赞同：0
> 
> 时间：2012-04-30T10:57:54.080
> 
> 标签：mysql, symfony, doctrine-orm, createquery

我有以下查询。

```
$objEmployee = $this->getEntityManager()
                        ->createQuery(
                                "SELECT e FROM MyProjectEntityBundle:Employee e LEFT OUTER JOIN e.project p  where p.name like % abc %" 
                        )->getResult(); 
```

显示项目名称，如“abc”。当条件变为假时，如何显示拥有满足条件的项目以及其他没有项目的员工的所有员工详细信息？

例如。

```
Employee              Project
    a                     x
    b                     x
    c                     y
    d                     - 
```

员工“a”和“b”有项目“x”。员工 'c' 有项目 'y' d 没有任何项目。我已经能够检索到有项目的员工。

现在我如何检索拥有项目 x 的员工和没有使用任何项目的员工`doctrine2 , createQuery`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T15:21:33.593

想想如果没有 WHERE 子句，结果会是什么样子：员工和项目之间的左连接结果将导致左侧的所有员工记录，以及右侧的匹配项目。任何根本没有任何项目的员工仍会出现在左侧，但项目记录将为空。

所以为你的 DQL 试试这个：

```
$dql = "SELECT e FROM MyProjectEntityBundle:Employee e LEFT JOIN e.project p WHERE p.id IN :p_ids OR p.id IS NULL"
$query = $this->getEntityManager()->createQuery($dql);
$query->setParameter("p_id", "(" . implode(",", $p_ids) . ")");
$employees = $query->getResult() 
```

# android - 布局 Android webview 和按钮

> ID：10382550
> 
> 赞同：0
> 
> 时间：2012-04-30T10:58:39.860
> 
> 标签：android

我在某些移动设备上的 Android 布局有些问题。它是一个带有 web 视图的布局，下面有一个带有 3 个按钮的栏。布局运行良好，但在某些设备上，如 HTC One、三星 Galaxy S2（更大的屏幕），webview 的布局和它下方的栏在屏幕中间被压在一起。看布局：

```
 <?xml version="1.0" encoding="utf-8"?>
  <LinearLayout android:gravity="center" android:orientation="vertical" android:id="@id/linweb" android:layout_width="fill_parent" android:layout_height="fill_parent"
  xmlns:android="http://schemas.android.com/apk/res/android">
<WebView android:id="@id/mainWebView" android:layout_width="fill_parent" android:layout_height="410.0dip" />
<LinearLayout android:orientation="horizontal" android:id="@id/bottommenu" android:background="@drawable/bar" android:paddingLeft="0.0dip" android:paddingTop="0.0dip" android:paddingRight="0.0dip" android:paddingBottom="0.0dip" android:layout_width="fill_parent" android:layout_height="wrap_content" android:layout_below="@id/mainWebView">
    <Button android:textStyle="bold" android:textColor="@color/text" android:id="@id/one" android:background="@layout/custom_button" android:layout_width="fill_parent" android:layout_height="fill_parent" android:src="@drawable/buttonmenu" android:text="Citroen" android:layout_weight="2.0" />
    <Button android:textStyle="bold" android:textColor="@color/text" android:id="@id/two" android:background="@layout/custom_button" android:layout_width="fill_parent" android:layout_height="fill_parent" android:text="Mitshibitsu" android:layout_weight="2.0" />
    <Button android:textStyle="bold" android:textColor="@color/text" android:id="@id/three" android:background="@layout/custom_button" android:layout_width="fill_parent" android:layout_height="fill_parent" android:text="Suzuki" android:layout_weight="2.0" />
</LinearLayout>
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T11:04:42.563

这是因为您使用常量值指定了 WebView 的高度。您需要告诉它用按钮填充行上方的空间。

试试这个：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/linweb"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:gravity="center"
    android:orientation="vertical" >

    <WebView
        android:id="@+id/mainWebView"
        android:layout_width="fill_parent"
        android:layout_height="0dip"
        android:layout_weight="1" />

    <LinearLayout
        android:id="@+id/bottommenu"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal"
        android:paddingBottom="0.0dip"
        android:paddingLeft="0.0dip"
        android:paddingRight="0.0dip"
        android:paddingTop="0.0dip" >

        <Button
            android:id="@+id/one"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:layout_weight="2.0"
            android:text="Citroen"
            android:textStyle="bold" />

        <Button
            android:id="@+id/two"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:layout_weight="2.0"
            android:text="Mitshibitsu"
            android:textStyle="bold" />

        <Button
            android:id="@+id/three"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:layout_weight="2.0"
            android:text="Suzuki"
            android:textStyle="bold" />
    </LinearLayout>

</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T11:08:52.213

您正在硬编码 WebView 的高度。您还混合了来自 RelativeLayouts 的一些参数。

您应该使用 layout_weight 来填充 LinearLayout 中的任何空白空间。

以下是您可能想要实现的目标的示例。

```
 <?xml version="1.0" encoding="utf-8"?>
 <LinearLayout android:gravity="center" 
 android:orientation="vertical" 
 android:id="@id/linweb" 
 android:layout_width="fill_parent" 
 android:layout_height="fill_parent"
 xmlns:android="http://schemas.android.com/apk/res/android">

 <WebView android:id="@id/mainWebView" 
 android:layout_width="fill_parent"    
 android:layout_height="0dp" 
 android:layout_weight="1" />

 <LinearLayout android:orientation="horizontal" 
 android:id="@id/bottommenu" 
 android:background="@drawable/bar" 
 android:layout_width="fill_parent" 
 android:layout_height="wrap_content" >

<Button android:textStyle="bold" 
android:textColor="@color/text" 
android:id="@id/one"     
android:background="@layout/custom_button" 
android:layout_width="0dp" 
android:layout_height="wrap_content" 
android:src="@drawable/buttonmenu" 
android:text="Citroen" 
android:layout_weight="2" />

<Button android:textStyle="bold" 
android:textColor="@color/text" 
android:id="@id/two" 
android:background="@layout/custom_button" 
android:layout_width="0dp" 
android:layout_height="wrap_content" 
android:text="Mitshibitsu" 
android:layout_weight="2" />

<Button android:textStyle="bold" 
android:textColor="@color/text" 
android:id="@id/three" 
android:background="@layout/custom_button"
android:layout_width="0dp" 
android:layout_height="wrap_content" 
android:text="Suzuki" 
android:layout_weight="2" />

</LinearLayout>

</LinearLayout> 
```

# java - 如何使用 ImageJ-Plugin 水平翻转图像？

> ID：10382555
> 
> 赞同：2
> 
> 时间：2012-04-30T10:59:10.493
> 
> 标签：java, imagej

我想为 ImageJ 开发一个水平翻转图像的 Java 插件。但是我的代码只翻转了图片的一半。也许，图像副本的构造或输出有问题？

```
public class flipHorizontal implements PlugInFilter {

public int setup (String arg, ImagePlus imp)
{
    return DOES_ALL;
}

public void run (ImageProcessor ip)
{
    int height=ip.getHeight();
    int width=ip.getWidth();

    ImageProcessor copy = ip;

    for (int x=0; x<width; x++) {

        for (int y=0; y<height; y++) {
            int p=ip.getPixel(width-x-1,y);
            copy.putPixel(x,y,p);
        }
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T11:57:54.193

你的逻辑是错误的。你得到的是正常的：你不是在处理你的图像的一半，而是水平翻转你的图像的一半和另一半的两倍（如果我没记错的话）。

无论如何，如果您想通过自己直接操作像素来水平翻转，就像在您的代码示例中那样，那么您需要转到宽度的一半（*width/2*） ，而不是转到*width 。*

 *然后，您实际上需要从“左”和“右”反转两个像素

这是一个有效的水平翻转：

```
 for (int x = 0; x < w / 2; x++) {
        for (int y = 0; y < h; y++) {
            final int l = tmp.getRGB( w - (x + 1), y);
            final int r = tmp.getRGB( x, y);
            tmp.setRGB( x, y, l );
            tmp.setRGB( w - (x + 1), y, r );
        }
    } 
```

上面的代码中可能存在“一个错误”的错误，但您应该明白这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T14:15:14.657

[TacticalCoder](https://stackoverflow.com/users/988052/tacticalcoder)是正确的，您应该只迭代图像的一半，并且您需要在覆盖之前保存另一侧的值。

但是，还有两点可能值得一提 - 一个是[ImageProcessor 类](http://rsbweb.nih.gov/ij/developer/api/ij/process/ImageProcessor.html)已经有一个名为[flipHorizo​​ntal](http://rsbweb.nih.gov/ij/developer/api/ij/process/ImageProcessor.html#flipHorizontal%28%29)的方法，因此您可以将代码简化为：

```
public class flipHorizontal implements PlugInFilter {

    public int setup (String arg, ImagePlus imp) {
        return DOES_ALL;
    }

    public void run (ImageProcessor ip) {
        ip.flipHorizontal();
    }
} 
```

值得一提的另一点是，您似乎误解了这条线的含义：

```
ImageProcessor copy = ip; 
```

这只是创建另一个对与 相同的对象的引用`ip`，所以：

```
copy.putPixel(x,y,p); 
```

... 和：

```
ip.putPixel(x,y,p); 
```

...具有完全相同的效果。如果要创建一个表示相同像素数据的新 ImageProcessor，可以执行以下操作：

```
ImageProcessor copy = ip.duplicate(); 
```

但是，在这种情况下，这不是必需的。*

# r - 每个区间最大值的实际值

> ID：10382556
> 
> 赞同：0
> 
> 时间：2012-04-30T10:59:24.517
> 
> 标签：r

让我们假设

```
x = c(1, 2, 3.5, 4, 6, 7.5, 8, 9, 10, 11.5, 12) 
y = c(2.5, 6.5) 
I = split(x, findInterval(x, y))
f = function(I$'i', x) {
        d = pmax(outer(x, I$'i', "-"), 0)
        colSums(d - d^2/2)
} 
```

我想计算每个间隔的每个值中 f(I$'i', x) 的值，然后找到哪个 I$'i' 实际值具有 f(I$'i', x ) 的最大值每个间隔。例如，如果我们有三个区间，我的结果应该是 x 的三个值，其中 f(I$'i', x) 在每个区间中是最大值。我怎样才能找到这些值？另外，应该提到的是，在我的代码的每次迭代中，向量 y 的值都会发生变化。

我写了这段代码，但我找不到每个间隔中最大值的实际值：

```
for(i in 0:length(I)-1){
    max.value = I$'i'[which.max(f(I$'i', x))]
} 
```

我得到了这个错误： pmax(outer(x, I, "-"), 0) 中的错误：不能将 0 长度向量与其他向量混合

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T11:16:05.753

问题是试图索引`i`列表的第 th 个元素。正在`I$'i'`尝试获取与 string 对应的列表元素，该元素`'i'`不存在：

```
> i <- 1
> I$'i'
NULL 
```

要解决此问题，您应该使用`[[..]]`符号索引列表（按顺序索引它们，即`I[[1]]`= `I$'0'`）：

```
> i <- 1
> I[[i]]
[1] 1 2
> I$'0' # to illustrate the indexing
[1] 1 2 
```

假设这`f`只是为了获取一个向量（而不是一个索引`I`），它的定义应该是这样的：

```
f = function(vec, x) {
        d = pmax(outer(x, vec, "-"), 0)
        colSums(d - d^2/2)
} 
```

循环如下：

```
for (i in 1:length(i)) {
     max.value = I[[i]][which.max(f(I[[i]], x))]
} 
```

请注意，您可以直接遍历列表的元素，不需要单独索引每个元素，因此我们也可以这样做：

```
for (vec in I) {
     max.value = vec[which.max(f(vec, x))]
} 
```

（此外，您可能想要一些与您所拥有的略有不同的东西，因为在每个循环中都会`max.value`被覆盖。）

# c# - 模拟 System.Web.Caching.Cache - 模拟或检查空值？

> ID：10382560
> 
> 赞同：8
> 
> 时间：2012-04-30T10:59:30.973
> 
> 标签：c#, unit-testing, caching, design-patterns, moq

我正在编写一些单元测试，并且想知道模拟是否有利`Cache`，如果是，如何？

目前在我的测试中，我正在模拟`HttpContextBase`并将其包装在自定义中`HttpContextFactory`：

```
var mockedHttpContextBase = new Mock<HttpContextBase>();

IHttpContextFactory httpContextFactory = new HttpContextFactory 
{ 
     Current = mockedHttpContextBase.Object 
}; 
```

并且当我的代码使用时，我会`IHttpContextFactory`在对其进行任何操作之前检查缓存是否为空。

```
var cache = _httpContextFactory.Current.Cache;

Func<SomeReturnType> doSomeWork = () => _foo.someMethodIExecute(param1,param2);

return cache != null ? cache.GetOrStore("doSomeWorkCacheKey",doSomeWork, 900) 
                     : doSomeWork.Invoke(); 
```

每次我使用它时检查缓存是否为空是正确的，还是你会在测试中模拟缓存，以便在运行单元测试时它不为空？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-30T13:12:28.163

经过一番搜索，似乎我可以在编写单元测试时使用`HttpRuntime.Cache`而不是。`System.Web.Caching.Cache`

这样：

```
var mockedHttpContextBase = new Mock<HttpContextBase>();
mockedHttpContextBase.Setup(m => m.Cache).Returns(HttpRuntime.Cache); 
```

缓存不应该是`null`（如果是的话，这将是一个适当的例外），所以我可以从我的代码中删除空引用检查。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-30T11:38:11.877

如果您的代码假设缓存可以`null`并且在访问它之前执行检查（就像现在一样），您需要对每个*缓存访问*进行两个单元测试：

*   缓存存在并且项目被存储和检索（检查`GetOrStore`调用）
*   缓存为空，您只需断言委托调用

如果这是常见的模式（空检查），我建议不要在每次需要缓存依赖项时进行两次测试，而是将其包装到[空对象模式](http://en.wikipedia.org/wiki/Null_Object_pattern)中并对其进行一次测试，然后只需使用 NOP 作为可以模拟的依赖项。

**编辑**：缓存“模拟”示例

```
var cache = new Cache();
// Add takes more parameters; fill whatever is necessary to make it work
cache.Add("doSomeWorkCacheKey", doSomeWork, ...);
var mockedHttpContextBase = new Mock<HttpContextBase>();
// tell your mock to return pre-configured cache
mockedHttpContextBase.Setup(m => m.Cache).Returns(cache);

IHttpContextFactory httpContextFactory = new HttpContextFactory 
{ 
    Current = mockedHttpContextBase.Object 
}; 
```

# iphone - 如何在 iPhone 中更改 UITabBarItems 默认选择取消选择效果？

> ID：10382561
> 
> 赞同：0
> 
> 时间：2012-04-30T10:59:31.960
> 
> 标签：iphone, uitabbar, uitabbaritem

我想更改 TabBarItem 的默认效果，在选择和取消选择项目后获取。我使用这种方法解决了ios5及更高版本的这个问题

```
 [mySchedule setFinishedSelectedImage:[UIImage imageNamed:@"myschedule.png"] withFinishedUnselectedImage:[UIImage imageNamed:@"aboutus.png"]]; 
```

但对于版本 4 及以下版本，它会出现问题。请告诉我如何解决版本 4 及以下版本的这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T10:03:30.050

在这里，我创建了一个具有四个按钮的自定义标签栏。按钮由图像组成，我将其放入一个常量文件中。这里的 serivceImg、contactImg 等是在 .h 文件中声明的 UIImageView。另外，不要忘记将 UITabBarControllerDelegate 添加为 .h 文件中的委托。

```
-(void)setUpTabBar {

tabBar = [[UITabBarController alloc] init];

Services *firstViewController = [[Services alloc]init];
firstViewController.tabBarItem = [[UITabBarItem alloc]initWithTabBarSystemItem:UITabBarSystemItemFavorites tag:1];
UINavigationController *firstNavController = [[UINavigationController alloc]initWithRootViewController:firstViewController];

ContactUs *secondViewController = [[ContactUs alloc]init];
secondViewController.tabBarItem = [[UITabBarItem alloc]initWithTabBarSystemItem:UITabBarSystemItemFavorites tag:2];
UINavigationController *secondNavController = [[UINavigationController alloc]initWithRootViewController:secondViewController];

Bookings *thirdViewController = [[Bookings alloc]init];
thirdViewController.tabBarItem = [[UITabBarItem alloc]initWithTabBarSystemItem:UITabBarSystemItemFavorites tag:3];
UINavigationController *thirdNavController = [[UINavigationController alloc]initWithRootViewController:thirdViewController];

Reward *fourthViewController = [[Reward alloc]init];
fourthViewController.tabBarItem = [[UITabBarItem alloc]initWithTabBarSystemItem:UITabBarSystemItemRecents tag:4];
UINavigationController *fourthNavController = [[UINavigationController alloc]initWithRootViewController:fourthViewController];

tabBar.viewControllers = [[NSArray alloc] initWithObjects:firstNavController, secondNavController, thirdNavController, fourthNavController, nil];
tabBar.delegate=self;
tabBar.selectedIndex=0;

[firstNavController release];
[firstViewController release];

[secondNavController release];
[secondViewController release];

[thirdNavController release];
[thirdViewController release];

[fourthNavController release];
[fourthViewController release];

serivceImg=[[UIImageView alloc]initWithFrame:CGRectMake(0, 432, 80, 49)];
serivceImg.image=[UIImage imageNamed:serviceHover];

contactImg=[[UIImageView alloc]initWithFrame:CGRectMake(81, 432,80, 49)];
contactImg.image=[UIImage imageNamed:tabContact];

bookingImg=[[UIImageView alloc]initWithFrame:CGRectMake(162, 432,80, 49)];
bookingImg.image=[UIImage imageNamed:tabBooking];

rewardImg=[[UIImageView alloc]initWithFrame:CGRectMake(243, 432, 80, 49)];
rewardImg.image=[UIImage imageNamed:tabReward];

[tabBar.view addSubview:serivceImg];
[tabBar.view addSubview:contactImg];
[tabBar.view addSubview:bookingImg];
[tabBar.view addSubview:rewardImg];

[[[UIApplication sharedApplication]keyWindow]addSubview:tabBar.view];

[serivceImg release];
[contactImg release];
[bookingImg release];
[rewardImg release];

}

- (void)tabBarController:(UITabBarController *)tabBarController didSelectViewController:(UIViewController *)viewController1{

     if (viewController1 == [tabBar.viewControllers objectAtIndex:0])

 {

     serivceImg.image = [UIImage imageNamed:kserviceHover];
     contactImg.image=[UIImage imageNamed:ktabContact];
     bookingImg.image=[UIImage imageNamed:ktabBooking];
     rewardImg.image=[UIImage imageNamed:ktabReward];

 }

else if (viewController1 == [tabBar.viewControllers objectAtIndex:1])

{

    serivceImg.image = [UIImage imageNamed:ktabService];
    contactImg.image=[UIImage imageNamed:kcontactHover];
    bookingImg.image=[UIImage imageNamed:ktabBooking];
    rewardImg.image=[UIImage imageNamed:ktabReward];

}

else if (viewController1 == [tabBar.viewControllers objectAtIndex:2])

{

    serivceImg.image = [UIImage imageNamed:ktabService];
    contactImg.image=[UIImage imageNamed:ktabContact];
    bookingImg.image=[UIImage imageNamed:kbookingHover];
    rewardImg.image=[UIImage imageNamed:ktabReward];

}

else if (viewController1 == [tabBar.viewControllers objectAtIndex:3])

{

    serivceImg.image = [UIImage imageNamed:ktabService];
    contactImg.image=[UIImage imageNamed:ktabContact];
    bookingImg.image=[UIImage imageNamed:ktabBooking];
    rewardImg.image=[UIImage imageNamed:krewardHover];

}

} 
```

希望这能解决您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T11:02:28.683

从图像名称中删除 .png。

# android - 刷新倒数计时器的 UI

> ID：10382562
> 
> 赞同：0
> 
> 时间：2012-04-30T10:59:37.353
> 
> 标签：android, timer, countdown

我需要在 UI 上显示到期日期的倒计时。

我得到了一个新的 Runnable() 的倒计时但是我如何保持 TextView 的刷新？

还有其他建议来实施吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T11:05:43.397

我认为您必须实现所需的最佳方法之一是使用 AsyncTask （请参阅无痛线程：[http](http://android-developers.blogspot.com/2009/05/painless-threading.html) ://android-developers.blogspot.com/2009/05/painless-threading.html 。

然后，您可以使用 AsyncTask 中的 onProgressUpdate 方法来[更新](http://developer.android.com/reference/android/os/AsyncTask.html)[您](http://developer.android.com/reference/android/os/AsyncTask.html#onProgressUpdate%28Progress...%29)的 UI 线程。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-30T11:06:01.267

查看[从计时器更新 UI](http://developer.android.com/resources/articles/timed-ui-updates.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T11:43:40.220

当满足更新条件时，您还可以向主线程发送广播。

# linq - LINQ：如何使用多个动态输入值检查 CONTAINS

> ID：10382563
> 
> 赞同：0
> 
> 时间：2012-04-30T10:59:51.013
> 
> 标签：linq, linq-to-sql

我面临一个关于 LINQ 查询的问题。

我有多个输入值，它们存储在 List< 字符串 > 变量中。

我必须形成一个 LINQ 查询，它有一个 where 子句，它使用 CONTAINS 关键字检查相应的列。我面临的问题是 List< string > 可以包含任意数量的值。

所以我想知道如何形成一个可以从集合对象读取输入值的查询。并显示结果。

任何建议将不胜感激。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-04-17T04:22:28.533

Linq extension method:

```
public static bool ContainsAny<T>(this IEnumerable<T> Collection, IEnumerable<T> Values)
{
     return Collection.Any(x=> Values.Contains(x));
} 
```

Then you can use like:

```
List<string> List1 = getStringList1();
List<string> List2 = getStringList2();

bool List2ItemsInList1 = List1.ContainsAny(List2); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T11:45:32.430

你的问题不清楚。假设您有三个值 X、Y 和 Z。如果您想获取 Column 为 X、Y 或 Z 的结果，那么 habib-osu 的答案将执行此操作。

如果您正在查找特定列包含 X、Y 和 Z 的所有记录，那么以下应该有效

```
List<string> options = new List<string>();
options.Add("X");
options.Add("Y");
options.Add("Z");

var query = (from r in dc.Table select r); 
foreach(var option in options)
   query = (from r in query where r.Column.Contains(option) select r);

var list = query.ToList(); 
```

这将产生一个类似于以下的 sql 查询

```
select * from Table where Column like '%X%' and column like '%Y%' and column like '%Z%' 
```

# arrays - 如何在 Perl 中遍历对哈希数组的引用？

> ID：10382565
> 
> 赞同：4
> 
> 时间：2012-04-30T11:00:04.930
> 
> 标签：arrays, perl, perl-data-structures, hash

我有一个对我传递给我的 perl 脚本中的子例程的 hases 数组的引用

这是代码：

```
sub mySub {
    (my $resultref) = @_;
    my @list = @$resultref;
    print Dumper(@list);
    foreach my $result (@list) {
        print Dumper($result);
    }
} 
```

这是输出：

```
$VAR1 = [
          {
            'portName' => '1.1',
            'ips' => [
                       '192.168.1.242'
                     ],
            'switchIp' => '192.168.1.20',
            'macs' => [
                        '00:16:76:9e:63:47'
                      ]
          },
          {
            'portName' => '1.10',
            'ips' => [
                       '192.168.1.119',
                       '192.168.1.3'
                     ],
            'switchIp' => '192.168.1.20',
            'macs' => [
                        'd0:67:e5:f8:7e:7e',
                        'd0:67:e5:f8:7e:76'
                      ]
          },
        ];

$VAR1 = [
          {
            'portName' => '1.1',
            'ips' => [
                       '192.168.1.242'
                     ],
            'switchIp' => '192.168.1.20',
            'macs' => [
                        '00:16:76:9e:63:47'
                      ]
          },
          {
            'portName' => '1.10',
            'ips' => [
                       '192.168.1.119',
                       '192.168.1.3'
                     ],
            'switchIp' => '192.168.1.20',
            'macs' => [
                        'd0:67:e5:f8:7e:7e',
                        'd0:67:e5:f8:7e:76'
                      ]
          },
        ]; 
```

循环将整个数组放入 $result 变量中。我尝试将其取消引用为@$result[0]，但没有成功。

如何单独循环这些哈希？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-30T12:16:51.750

[Data::Dumper](http://search.cpan.org/perldoc?Data%3a%3aDumper)函数的参数`Dumper`应该是引用。例如：

```
use Data::Dumper;
my @array = ([1,2,3], [11,22,33]); # Two-dimensional array
print Dumper @array;               # print array
print Dumper \@array;              # print reference to array 
```

**输出：**

```
$VAR1 = [
          1,
          2,
          3
        ];
$VAR2 = [
          11,
          22,
          33
        ];

$VAR1 = [
          [
            1,
            2,
            3
          ],
          [
            11,
            22,
            33
          ]
        ]; 
```

第二次打印在一个变量中为我们提供了整个结构。当您直接打印数组时，它会扩展到其所有元素，所以......

```
print Dumper @array; 
```

相当于：

```
print Dumper $array[0], $array[1], ..., $array[$#array]; 
```

因此，就您而言，只需执行以下操作：

```
sub mySub {
    my ($resultref) = @_;
    print Dumper $resultref;
} 
```

**访问内部变量：**

看看`Data::Dumper`'s 的输出：

```
$VAR1 = [    # bracket denotes start of an array ref
          {  # curly brackets = hash ref
            'portName' => '1.1',
            'ips' => [
                       '192.168.1.242'
                     ],
            'switchIp' => '192.168.1.20',
            'macs' => [
                        '00:16:76:9e:63:47'
                      ]
          }, # hash ref ends, comma = new array element begins
          {  # new hash ref 
            'portName' => '1.10',
            'ips' => [
                       '192.168.1.119',
                       '192.168.1.3'
                     ],
            'switchIp' => '192.168.1.20',
            'macs' => [
                        'd0:67:e5:f8:7e:7e',
                        'd0:67:e5:f8:7e:76'
                      ]
          }, # end of hash
        ];   # end of array 
```

这里需要注意的重要一点是数组的所有元素和散列的所有值都是标量。因此，所有散列和数组都可以很容易地分解成一个标量列表。

```
for my $aref (@$resultref) {  # starting array ref
    for my $aref2 (@$aref) {  # second level array ref
        for my $href (@$aref2)  # here begins the hash
            local $\ = "\n";    # add newline to print for simplicity
            print $href->{portName};    # printing a scalar
            print for @{$href_>{ips}};  # printing an array ref w post-script loop
            print $href->{switchIp};
            print for @{$href->{macs}};
        }
    }
} 
```

请注意使用箭头运算符取消引用引用。如果你有一个散列或数组，你会做`$array[0]`or `$hash{$key}`，但是通过使用引用，你“指向”包含在引用中的地址：`$array->[0]`or `$hash->{$key}`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-30T11:13:31.267

传递给的参数`mySub`是对arrayrefs 数组的引用。要遍历嵌套数组，您可以执行以下操作：

```
sub mySub {
    my ($resultref) = @_;
    for my $result (@$resultref) {
        my @list = @$result; # array of hashrefs
        ...
    }        
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-30T11:10:10.407

> 我参考了一组hases

不，您已经传入了对哈希**数组的引用数组的引用**。

如果您删除该外部间接级别，那么您的代码将按需要工作。

# ios - 二进制过滤的阈值

> ID：10382571
> 
> 赞同：2
> 
> 时间：2012-04-30T11:00:23.283
> 
> 标签：ios, algorithm, ipad, image-processing, itk

如何确定二元滤波的两个阈值的好值？

我要过滤的图像是 MRI 或 CT 图像，例如[http://pubimage.hcuge.ch:8080/](http://pubimage.hcuge.ch:8080/)，这些图像也很可能是灰度图像。

我正在尝试使用 iPad 上的行进立方体算法和二进制过滤从一堆 2D 图像中提取表面模型。对于二进制过滤，我使用了一个上下阈值，如果 lowerThreshold <= pixelValue <= upperThreshold，则像素设置为内部值。

谢谢你的帮助，马努

**更新：**我现在已经向我的一位图像处理教授询问了这个问题。他说，如果图像的直方图是双峰的（这意味着直方图中有两个山丘），那么解决方案相对容易，我的图像就是这种情况

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T11:16:07.270

如果您的图像背景是黑色并且您感兴趣的对象是任何其他阴影，那么您可以尝试从图像的直方图中猜测一个阈值（但请注意，您可能必须努力找到适合所有人的合适百分比阈值你的图像）。

然而，这可能还不够。对于这项任务来说，一个有趣的工具显然是活动轮廓（又名蛇），但很难猜测你是否能负担得起使用它们所需的时间和精力（在 ITK 中有一个测地线活动轮廓的实现，但我没有不知道在使用前需要多少努力）。如果可以选择蛇，那么您可以使轮廓从图像的边界演变，直到它们遇到您的对象并适合其轮廓。

# heroku - Heroku db:push 在操作过程中抛出异常

> ID：10382574
> 
> 赞同：0
> 
> 时间：2012-04-30T11:00:40.973
> 
> 标签：heroku

我正在尝试在我的 Heroku 应用程序上执行以下命令：

```
heroku db:push postgres://username:password@localhost:5432/db_name 
```

在过去的三个月中，我成功地多次使用了相同的命令，但今天它停止了工作。似乎它在达到 5MB 大小时就停止工作了（现在它大约是 8MB 大）。问题是我现在开始为共享数据库付费，所以我应该被允许拥有 20GB 的空间。

这是命令输出：

```
> heroku db:push postgres://username:password@localhost:5432/db_name --account java
Loaded Taps v0.3.23
Warning: Data in the app 'my-test-app' will be overwritten and will not be recoverable.

 !    WARNING: Potentially Destructive Action
 !    This command will affect the app: my-test-app
 !    To proceed, type "my-test-app" or re-run this command with --confirm my-test-app

> my-test-app
Sending schema
Schema:        100% |==========================================| Time: 00:00:46
Sending indexes
test_gift_rec: 100% |==========================================| Time: 00:00:01
test_person:   100% |==========================================| Time: 00:00:01
Sending data
14 tables, 114 records
test_bonus_aw: 100% |==========================================| Time: 00:00:00
test_money_tr: 100% |==========================================| Time: 00:00:00
test_friendsh: 100% |==========================================| Time: 00:00:00
test_friendsh: 100% |==========================================| Time: 00:00:00
test_gift_rec: 100% |==========================================| Time: 00:00:00
test_group:    100% |==========================================| Time: 00:00:00
test_country:  100% |==========================================| Time: 00:00:00
test_user_is_: 100% |==========================================| Time: 00:00:00
test_gift:     100% |==========================================| Time: 00:00:00
test_user_has:   0% |                                          | ETA:  --:--:--
Saving session to push_201204301144.dat..
!!! Caught Server Exception
HTTP CODE: 500
Taps Server Error: undefined method `symbolize_keys' for nil:NilClass
["/app/lib/taps/data_stream.rb:183:in `parse_json'", "/app/lib/taps/server.rb:89:in `block in <class:Server>'","/app/.bundle/gems/ruby/1.9.1/gems/satra-1.0/lib/sinatra/base.rb:865:in `call'", "/app/.bundle/gems/ruby/1.9.1/gems/sinatra1.0/lib/sinatra/base.rb:865:in `block in route'", "/app/.bune/gems/ruby/1.9.1/gems/sinatra-1.0/lib/sinatra/base.rb:521:in `instance_eval'", "/app/.bundle/gems/ruby/1.9.1/gems/sinatra-1.0/lib/sinatra/base.rb:5:in `route_eval'", "/app/.bundle/gems/ruby/1.9.1/gems/sinatra-1.0/lib/sinatra/base.rb:500:in `block (2 levels) in route!'", "/app/.bundle/gems/ruby/9.1/gems/sinatra-1.0/lib/sinatra/base.rb:497:in `catch'", "/app/.bundle/gems/ruby/1.9.1/gems/sinatra-1.0/lib/sinatra/base.rb:497:in `block in route!, "/app/.bundle/gems/ruby/1.9.1/gems/sinatra-1.0/lib/sinatra/base.rb:476:in `each'", "/app/.bundle/gems/ruby/1.9.1/gems/sinatra-1.0/lib/sinatra/baseb:476:in `route!'", "/app/.bundle/gems/ruby/1.9.1/gems/sinatra-1.0/lib/sinatra/base.rb:601:in `dispatch!'", "/app/.bundle/gems/ruby/1.9.1/gems/sinat-1.0/lib/sinatra/base.rb:411:in `block in call!'", "/app/.bundle/gems/ruby/1.9.1/gems/sinatra-1.0/lib/sinatra/base.rb:566:in `instance_eval'", "/appbundle/gems/ruby/1.9.1/gems/sinatra-1.0/lib/sinatra/base.rb:566:in `block in invoke'", "/app/.bundle/gems/ruby/1.9.1/gems/sinatra-1.0/lib/sinatra/ba.rb:566:in `catch'", "/app/.bundle/gems/ruby/1.9.1/gems/sinatra-1.0/lib/sinatra/base.rb:566:in `invoke'", "/app/.bundle/gems/ruby/1.9.1/gems/sinatra.0/lib/sinatra/base.rb:411:in `call!'", "/app/.bundle/gems/ruby/1.9.1/gems/sinatra-1.0/lib/sinatra/base.rb:399:in `call'", "/app/.bundle/gems/ruby/1.1/gems/sinatra-1.0/lib/sinatra/base.rb:979:in `block in call'", "/app/.bundle/gems/ruby/1.9.1/gems/sinatra-1.0/lib/sinatra/base.rb:1005:in `synchroze'", "/app/.bundle/gems/ruby/1.9.1/gems/sinatra-1.0/lib/sinatra/base.rb:979:in `call'", "/home/heroku_rack/lib/static_assets.rb:9:in `call'", "/homheroku_rack/lib/last_access.rb:15:in `call'", "/app/.bundle/gems/ruby/1.9.1/gems/rack-1.2.1/lib/rack/urlmap.rb:47:in `block in call'", "/app/.bundleems/ruby/1.9.1/gems/rack-1.2.1/lib/rack/urlmap.rb:41:in `each'", "/app/.bundle/gems/ruby/1.9.1/gems/rack-1.2.1/lib/rack/urlmap.rb:41:in `call'", "/he/heroku_rack/lib/date_header.rb:14:in `call'", "/app/.bundle/gems/ruby/1.9.1/gems/rack-1.2.1/lib/rack/builder.rb:77:in `call'", "/app/.bundle/gems/by/1.9.1/gems/thin-1.2.7/lib/thin/connection.rb:76:in `block in pre_process'", "/app/.bundle/gems/ruby/1.9.1/gems/thin-1.2.7/lib/thin/connection.rb::in `catch'", "/app/.bundle/gems/ruby/1.9.1/gems/thin-1.2.7/lib/thin/connection.rb:74:in `pre_process'", "/app/.bundle/gems/ruby/1.9.1/gems/thin-1.2/lib/thin/connection.rb:57:in `process'", "/app/.bundle/gems/ruby/1.9.1/gems/thin-1.2.7/lib/thin/connection.rb:42:in `receive_data'","/app/.bundle/ms/ruby/1.9.1/gems/eventmachine0.12.10/lib/eventmachine.rb:256:in`run_machine'","/app/.bundle/gems/ruby/1.9.1/gems/eventmachine0.12.10/lib/eventchine.rb:256:in `run'", "/app/.bundle/gems/ruby/1.9.1/gems/thin-1.2.7/lib/thin/backends/base.rb:57:in `start'", "/app/.bundle/gems/ruby/1.9.1/gems/tn-1.2.7/lib/thin/server.rb:156:in `start'", "/app/.bundle/gems/ruby/1.9.1/gems/thin-1.2.7/lib/thin/controllers/controller.rb:80:in `start'", "/app/.ndle/gems/ruby/1.9.1/gems/thin-1.2.7/lib/thin/runner.rb:177:in `run_command'", "/app/.bundle/gems/ruby/1.9.1/gems/thin-1.2.7/lib/thin/runner.rb:143: `run!'", "/app/.bundle/gems/ruby/1.9.1/gems/thin-1.2.7/bin/thin:6:in `<top (required)>'", "/app/.bundle/gems/ruby/1.9.1/bin/thin:19:in `load'", "/a/.bundle/gems/ruby/1.9.1/bin/thin:19:in `<main>'"] 
```

在 Windows 7 上运行。

请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T12:10:46.870

如果您没有在本地和生产之间更改数据库，您可以尝试使用 pgbackups 插件。

它比 db:push/db:pull 更可靠且通常更快。

[https://devcenter.heroku.com/articles/pgbackups](https://devcenter.heroku.com/articles/pgbackups)

# ruby-on-rails - Ruby on Rails - 设计和活动管理单一模型 HABTM

> ID：10382575
> 
> 赞同：0
> 
> 时间：2012-04-30T11:00:45.730
> 
> 标签：ruby-on-rails, devise, has-and-belongs-to-many, activeadmin, single-user

我正在使用 rails 3.2，并且在使用单个模型和与角色模型的 HABTM 关系的活动管理员旁边使用预先创建的设计时遇到了问题。

我已经按照本教程[http://jaysonlane.net/2012/04/rails-devise-and-active-admin-single-user-model](http://jaysonlane.net/2012/04/rails-devise-and-active-admin-single-user-model)

并改变了一些东西，例如

```
unless current_user.admin? 
```

为了

```
unless current_user.roles.first.id==1 #checks if its an admin or not 
```

如果我使用普通用户登录并尝试通过 :300/admin 访问管理页面，我会收到“权限被拒绝”，这是一件好事。

但是，如果我使用管理员帐户登录（它成功地以管理员身份登录），然后转到：3000/admin，它会显示并出现错误：

```
NoMethodError in Admin/dashboard#index
undefined method for 'destroy_admin_user_session_path' 
```

将其更改为：

```
config.logout_link_path = :destroy_current_admin_user_session_path
or
config.logout_link_path = :destroy_current_user_session_path 
```

也无济于事。

提前感谢您的帮助

### **固定的：**

必须运行`rake routes`并更改我的路由的默认 active_admin 初始化程序路径和方法。

至于注销的错误，显然使用 Active admin 注销的默认方法是：get。因此，在活动管理员中单击“注销”时会发生错误。要解决此问题，请转到 config->initializers->active_admin.rb 并添加

```
config.logout_link_method= :delete 
```

希望这可以帮助某人。

再次感谢 @pjammer 和 @iain 帮助我朝着正确的方向前进。问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T11:49:51.077

必须运行 rake 路由并将默认的 active_admin 初始化程序路径和方法更改为我的路由。

至于注销的错误，显然使用 Active admin 注销的默认方法是：get。因此，在活动管理员中单击“注销”时会发生错误。要解决此问题，请转到 config->initializers->active_admin.rb 并添加

config.logout_link_method= :delete 希望这对某人有所帮助。

再次感谢 @pjammer 和 @iain 帮助我朝着正确的方向前进。问候

# arduino - Java RXTX 和 Arduino 之间串行通信的流控制设置

> ID：10382578
> 
> 赞同：1
> 
> 时间：2012-04-30T11:00:51.003
> 
> 标签：arduino, rxtx, flow-control

我在我的 Seeeduino Mega 1.22 上有一个简单的草图，它只在 LCD 显示器上显示串行输入。使用 lynx 术语和 arduino 串行监视器工作正常：正在显示发送的输入。当我想启动我的 Java 程序（在 Win7 x64 机器上的 Eclipse 中运行）和 Seeeduino 之间的串行通信时，问题就开始了。我正在使用 RXTX x64 构建。该程序旨在通过开放端口发送和接收一些 string.getBytes() 。在 Java 端接收有效，但在 Arduino 端接收失败。

似乎问题在于正确的流控制设置。我看到有些人有同样的问题，就像这里的[问题在 RXTX 中接收](https://stackoverflow.com/questions/1391402/problem-receving-in-rxtx)

但是这个解决方案对我不起作用。如果我将 FlowControl 设置为 None，那么我只会在显示屏上看到一个块图标，表明串行连接已经建立，但没有别的。如果我将 FlowControl 设置为 RCTS_IN | RCTS_OUT，然后当我关闭已建立的连接时，我只会在显示器上获得字符串字节。

为什么只有在我关闭连接时才发送数据（刷新输出流也没有帮助）？我在 Flow Controll 设置中做错了什么？

这是我正在使用的修改后的 connect() 方法。

```
void connect(String portName) throws Exception {
        CommPortIdentifier portIdentifier = CommPortIdentifier
                .getPortIdentifier(portName);
        if (portIdentifier.isCurrentlyOwned()) {
            System.out.println("Error: Port is currently in use");
        } else {
            CommPort commPort = portIdentifier.open(this.getClass().getName(),
                    2000);

            if (commPort instanceof SerialPort) {
                SerialPort serialPort = (SerialPort) commPort;
                serialPort.setSerialPortParams(115200, SerialPort.DATABITS_8,
                        SerialPort.STOPBITS_1, SerialPort.PARITY_NONE);

                try {
                  serialPort.setFlowControlMode(
                  //      SerialPort.FLOWCONTROL_NONE);
                  // OR
                  // If CTS/RTS is needed
                  //serialPort.setFlowControlMode(
                        SerialPort.FLOWCONTROL_RTSCTS_IN |
                        SerialPort.FLOWCONTROL_RTSCTS_OUT);
                } catch (UnsupportedCommOperationException ex) {
                  System.err.println(ex.getMessage());
                }

                serialPort.setRTS(true);

                in = serialPort.getInputStream();
                out = serialPort.getOutputStream();

                (new Thread(new SerialWriter(out))).start();

                serialPort.addEventListener(new SerialReader(in, this));
                serialPort.notifyOnDataAvailable(true);

            } else {
                System.out.println("Error: Only serial ports are to use!");
            }
        }
    } 
```

在此先感谢您的时间

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T14:37:57.587

解决了。正如许多人所建议的那样，它不是缓冲区。问题是，板上的 Seeeduinos RST 开关设置为自动。设置为手动，问题解决。不需要流量控制。

# performance - 使用 JMeter 监控 Web 服务器

> ID：10382579
> 
> 赞同：0
> 
> 时间：2012-04-30T11:00:52.880
> 
> 标签：performance, webserver, tomcat6, monitoring, jmeter

我正在尝试在 JMeter 的帮助下监控我的 Web 服务器的性能。[我按照这里](http://jmeter.apache.org/usermanual/build-monitor-test-plan.html)给出的配置 JMeter 的规则来测试 Web 服务器。

即使按照这些步骤操作，我也会收到 401 Unauthorized 错误： `You are not authorized to view this page. If you have not changed any configuration files, please examine the file conf/tomcat-users.xml in your installation. That file must contain the credentials to let you use this webapp`

我编辑了 tomcat-users.xml 以添加以下行：

```
<role rolename="manager-status"/>
<user username="tomcat" password="s3cret" roles="manager-status"/> 
```

请指教。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-30T11:15:06.177

您需要在您的 JMeter 脚本中包含一个“ [HTTP 授权管理器”。](http://jmeter.apache.org/usermanual/component_reference.html#HTTP_Authorization_Manager)在那里您指定您的凭据以访问该站点

# php - 具有多个 { } 块的表达式

> ID：10382580
> 
> 赞同：1
> 
> 时间：2012-04-30T11:00:58.790
> 
> 标签：php, regex

我正在尝试创建一个匹配任何这些文本的正则表达式（在 PHP 中）：

```
#{text}
#{text1}{text2}
#{text1}{numbers}{text2}
#{text1}{text with spaces}{numbers}{text2} 
```

所以。基本上第一个块只能容纳没有空格的文本，而其余的可以容纳任何东西。在那之后，得到匹配那些文本1...数字等。我一直在尝试一些正则表达式，但它没有成功。这是最后一个：

```
/#{(\w+)}({([\ a-zA-Z0-9*])})*/U 
```

提前致谢！

**编辑：**就像@stema 建议的那样，我将我的正则表达式更改为这个：

```
/#\{(\w+)\}(\{([^}]*)\})*/ 
```

我避免使用 Ungreedy 标志，因为它根本没有帮助表达:)。但是，结果并没有我需要的那么多：

```
array(4) {
  [0]=>
  string(42) "#{text1}{text with spaces}{numbers}{text2}"
  [1]=>
  string(5) "text1"
  [2]=>
  string(7) "{text2}"
  [3]=>
  string(5) "text2"
} 
```

似乎没有解析中间参数（这对我来说看起来很奇怪）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-30T11:10:10.470

我看到的主要问题是量词放错了位置

```
/#{(\w+)}({([\ a-zA-Z0-9*])})*/U
                        ^ 
```

应该在字符类之外

```
/#{(\w+)}({([\ a-zA-Z0-9]*)})*/U 
```

如果以下大括号中的内容可以是任何东西，那么您可以这样做

```
/#\{(\w+)\}(\{([^}]*)\})*/U 
```

`[^}]`是一个否定字符类，它匹配除了右大括号之外的任何内容。

我也避开了花括号，因为它们作为量词的一部分具有特殊含义。当某些语言没有形成这样的量词时，它们会从字面上匹配它们，但为了清楚起见，最好在应该匹配它们时始终将它们转义。

**更新：**

您可以将其中一个组设为非捕获组，因为您似乎不需要它

```
/#\{(\w+)\}(?:\{([^}]*)\})*/ 
```

这应该给你这个结果

```
array(4) {
  [0]=>
  string(42) "#{text1}{text with spaces}{numbers}{text2}"
  [1]=>
  string(5) "text1"
  [2]=>
  string(5) "text2"
} 
```

但是您将始终只获得结果数组中重复组的最后一个匹配项，因为每个匹配项都存储在`array[2]`. 第二场比赛将覆盖第一场比赛，第三场比赛将覆盖第二场......

您可以做的是使用正则表达式进行格式验证，然后进行拆分，例如像这样

```
$in = "#{text1}{text with spaces}{numbers}{text2}";
$result = preg_split('/}{|#{|}/', $in, -1, PREG_SPLIT_NO_EMPTY); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-30T12:05:56.153

按照stema的回答，我建议

1.  使用您的正则表达式验证字符串

2.  因为你不能为此目的使用捕获组，所以我会去掉前导`#{`和尾随`}`，然后`split`是这个正则表达式上的字符串`}{`

这应该为您提供所有匹配项的数组。

# php - 登录有时在cakephp中不起作用

> ID：10382585
> 
> 赞同：0
> 
> 时间：2012-04-30T11:01:33.427
> 
> 标签：php, session, cakephp, controller, session-variables

我在前端有customers_contoller.php

```
function login() {
 if(!empty($this->data)) {
  # Call function from Customer to insert Registration Data
  $loginData = ClassRegistry::init('Customer')->checkLogin($this->data['email'], $this->data['password']);
  if(isset($loginData) && !empty($loginData)) {
     $this->Session->write('Session.userid',$loginData['Customer']['id']);
     $this->Session->write('Session.email',$loginData['Customer']['email']);
     $this->redirect(HTTP_PATH."my-profile");
     exit;
  } else {
     $this->Session->setFlash('Please enter valid Username/Password','default',array('class'=>'flash_bad'));
 $this->redirect(HTTP_PATH."customer/login");
 exit;
  }
 }
} 
```

在模型 customer.php 中，

```
function checkLogin($email,$password) {
 $loginData = $this->find('first', array('conditions' => array('Customer.email' => $email, 'Customer.password' => sha1($password), 'Customer.is_active' => 'Yes')));
 return $loginData;
} 
```

**大多数时候登录工作正常，但有时登录不工作，也没有收到错误消息。每次登录时只刷新页面。**

我刚刚检查了所有这些事情，我发现当我当时无法登录我的网站时，浏览器的缓存显示**会话路径**的“/app/”，但我已经在**app_controller.php的****before_filter()**函数中设置了实际的会话路径，使用**`$this->Session->path = '/';`**

 **我只是删除了所有浏览器的缓存并尝试登录，现在它工作正常。

谁能解释我是什么问题？它是随机发生的，所以我找不到问题的根源。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T11:39:44.103

您的问题的可能原因是由于传输到浏览器的 Cookie 路径不正确而导致会话丢失。它可能是随机发生的，因为混合了 PHP 的 Session 绑定策略（如通过 GET 参数或通过 Cookies）。

你设置错了`$this->Session->path parameter`。它映射到PHP 的**session.cookie_path**选项。[在这篇](http://mbrisby.blogspot.com/2011/08/setting-sessioncookiepath-in-php.html)文章中看到非常相似的例子。

`session.cookie_path`应该排除协议、主机和最终端口，所以只留下你网站的根目录`'/'`：

```
$this->Session->path = '/'; 
```

另请参阅cookie的[域和路径选项的描述。](http://en.wikipedia.org/wiki/HTTP_cookie#Domain_and_Path)

**编辑**：为了进一步调查会话错误配置的原因，调试`SessionComponent`和传递给构造函数的参数`CakeSession`附近的类：`$base`

*   [/cake/libs/controller/components/session.php](https://github.com/cakephp/cakephp/blob/1.3/cake/libs/controller/components/session.php)
*   [/cake/libs/cake_session.php](https://github.com/cakephp/cakephp/blob/1.3/cake/libs/cake_session.php)

我猜它以某种方式错误地传递了，并且您`/app/`在浏览器中收到了 cookie 路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T11:23:55.697

对于其他可能感兴趣的人，我在新用户的机器上遇到了类似的问题。事实证明，这台机器没有与互联网时间正确同步，并且机器将日期设置为未来的某一天。没有显示任何错误，但身份验证会话在重定向时被破坏，我总是会被重定向到登录页面。更新计算机上的时间并重新启动 Chrome 有所帮助。（奇怪的是，这在 Firefox 中不是问题。）**

# c++ - 区分有向图和无向图

> ID：10382586
> 
> 赞同：0
> 
> 时间：2012-04-30T11:01:33.950
> 
> 标签：c++, algorithm, graph

我需要使用 C++ 编写一个图表，但我有一个小问题。我的图表应该是有向的或无向的，加权的或未加权的，基于矩阵或列出所有用户的选择。并且区分矩阵和列表图并不是什么大问题，因为它是两个不同的类，所以我在其他参数方面遇到了一些问题。区分它们最明显的方法是制作两个`bool`变量，并在每次添加和删除顶点时检查它们。这很明显也很容易理解，但我怀疑它的效率，因为每次我添加或删除顶点时，我都必须做额外`if`的 . 我也可以为它编写子类，但我严重怀疑它是否值得。

每个库都可以使用，如果它不代表图形本身。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T11:05:05.483

对于有向和无向的最佳情况是为您的图使用 bool 变量，但是您可以假设您的图是加权和有向的，但对于无向边，从 a→b 添加一条边，从 b→a 添加一条边。此外，如果没有权重函数将其权重设置为`1`.

但是，如果您正在寻找图形库，这取决于您的编程语言，但我建议完全用 c++ 实现的[图形增强库](http://www.boost.org/doc/libs/1_49_0/libs/graph/doc/index.html)，而太多其他人部分地用其他语言实现它。

# c# - C#用给定的宽度计算字符串的高度

> ID：10382602
> 
> 赞同：5
> 
> 时间：2012-04-30T11:02:37.667
> 
> 标签：c#, string, graphics, fonts, measure

我试图用 C# 编写文本，以便它跨越所需的宽度（大约）。

要编写文本，您需要指定高度。所以我需要知道什么高度可以使它写入所需的长度。

```
Font myFont = new Font(FontFamily.GenericSansSerif, unknown);   
gc.DrawString(LabelText, myFont, gBrush, 0, 0); 
```

我找到了以下内容，但它需要 FONT，它需要高度。哪个打败了整个观点？

```
gc.MeasureString(LabelText, new Font(FontFamily.GenericSansSerif, 12), length); 
```

我将如何确定所需的高度以使例如“我是字符串”拉伸 50 像素。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-30T11:11:18.737

[网站switchonthecode](https://web.archive.org/web/20090720050946/http://www.switchonthecode.com/tutorials/csharp-tutorial-font-scaling)上有一个示例（注意 - 存档版本）。它们提供了一种方法，该方法采用最小和最大字体大小以及您的区域大小。它会尝试最小尺寸，并从那里确定字体的比例，然后为您确定最佳尺寸。

# ruby-on-rails - 如何编写最有效的范围来仅询问具有某些子对象的父对象

> ID：10382604
> 
> 赞同：2
> 
> 时间：2012-04-30T11:02:42.603
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, activerecord, arel

我有：

```
class Evaluation < ActiveRecord::Base
  has_many :scores
end
class Score < ActiveRecord::Base
  scope :for_disability_and_score,
        lambda { |disability, score|
          where('total_score >= ? AND name = ?', score, disability)
        }
end 
```

该`scores`表有一个`total_score`字段和一个`name`字段。

我怎么能写一个`scope`只要求那些`evaluations`名称`Score`为“视觉”和`total_score`2 并且他们有另一个`Score`名称为“听力”和`total_score`3 的人。如何将所有这些概括为要求那些具有 n 分数的评估用我的参数？

在原始 sql 中，它会是这样的：

```
I managed to do it in raw sql:

sql = %q-SELECT "evaluations".*
FROM "evaluations"
INNER JOIN "scores" AS s1 ON "s1"."evaluation_id" = "evaluations"."id"
INNER JOIN "target_disabilities" AS t1 ON "t1"."id" = "s1"."target_disability_id"
INNER JOIN "scores" AS s2 ON "s2"."evaluation_id" = "evaluations"."id"
INNER JOIN "target_disabilities" AS t2 ON "t2"."id" = "s2"."target_disability_id"
WHERE "t1"."name" = 'vision' AND (s1.total_score >= 1)
      AND "t2"."name" = 'hearing' AND (s2.total_score >= 2)- 
```

这里的重点是重复这一点：

```
INNER JOIN "scores" AS s1 ON "s1"."evaluation_id" = "evaluations"."id" 
```

这（通过将 s1 替换为 s2 和 s3 等等）：

```
WHERE (s1.total_score >= 1) 
```

但它应该是这样做的一种轨道方式...... :) 希望

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T11:26:24.350

尝试这个：

```
scope :by_scores, lambda do |params|
    if params.is_a? Hash
      query = joins(:scores)
      params.each_pair do |name, score|
        query = query.where( 'scores.total_score >= ? AND scores.name = ?', score, name)
      end
      query
    end
 end 
```

然后像这样调用：

```
Evaluation.by_scores 'vision' => 2, 'hearing' => 3 
```

# php - 如何在zend lucene中搜索多个查询？

> ID：10382605
> 
> 赞同：1
> 
> 时间：2012-04-30T11:02:42.640
> 
> 标签：php, zend-framework

我有 3 个字段，其中两个是数组，一个是名称字段。如何从zend lucene 索引中搜索这些记录。

```
code:

$name = $_POST ['name'];

$emails = $_POST ['email']; // this is a array

$xId = $_POST ['xId']; // this also an array

$index = new Zend_Search_Lucene ( 'test-index' ); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T05:24:27.063

试试这个

```
$name = $_POST ['name'];

$emails = $_POST ['email']; // this is a array

$xIds = $_POST ['xId']; // this also an array

// Making array as string
$emailIds = '';
foreach($emails as $email) {
    $emailIds .= $email . " ";
}

// Making array as string
$xIdsString = '';
foreach ($xIds as $xId) {
    $xIdsString .= $xId . " ";
}

// Create a new index object
$index = new Zend_Search_Lucene ( 'test-index' );

// Here we are going to search over multiple fields. 
// we are just creating the string for right now
$name_query     = "name:($lastName)";
$emails_query   = "emails:($emailIds)";
$xIds_query     = "xIds:($xIdsString)";

// Parse the query
$query = Zend_Search_Lucene_Search_QueryParser::parse("$name_query $emails_query $xIds_query");

$hits  = $index->find($query);
print_r($hits); 
```

# php - odbc_connect 设置 DefaultSchema

> ID：10382606
> 
> 赞同：1
> 
> 时间：2012-04-30T11:02:55.487
> 
> 标签：php, odbc, ibm-midrange

我想尝试定义架构以设置库列表，我可以在其中搜索进行查询 sql 的表。

目前，我可以使用以下字符串连接将我的 DB2 连接到 IBMi：

```
 $user = 'USER';
 $password = 'PWD';
 $hostname = '192.168.1.100';
 $db = 'S6528B5A';
 $conn_string = "DRIVER={iSeries Access ODBC  Driver};
                 SYSTEM=$hostname;
                 PROTOCOL=TCPIP;
                 UID=$user;
                 PWD=$password;
                 DATABASE=$db;
                 DefaultSchema={LIB1,LIB2};"; 
```

连接成功建立我得到资源 id #3 但是当我尝试执行 sql 查询时：

```
$sql = 'SELECT * FROM FILE1';
$rows = odbc_exec($conn, $sql); 
```

我得到一个错误 SQL 状态 S0002 找不到文件（好像在错误的库中搜索文件，在打开连接的相同用户名的库中搜索）

如何在第一次连接时设置我的环境而不是执行查询？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T16:17:09.823

使用此连接字符串来启用系统命名并且不设置默认库：

```
$conn_string = "DRIVER={iSeries Access ODBC  Driver};
  SYSTEM=$hostname;
  PROTOCOL=TCPIP;
  UID=$user;
  PWD=$password;
  Naming=1;
  DefaultSchema=,LIB1,LIB2;"; 
```

* * *

[客户端访问 ODBC：默认库设置](http://www-912.ibm.com/s_dir/slkbase.NSF/0/2554db904e5a601b862565c2007cc4b8?OpenDocument)

[ODBC 连接字符串关键字](http://publib.boulder.ibm.com/infocenter/iseries/v7r1m0/topic/rzaik/connectkeywords.htm)

相关部分摘录如下：

*使用 SQL 命名约定，操作系统不会执行库列表搜索来定位不合格的对象。如果定义了默认集合，则默认集合用于解析不合格的 SQL 语句。*

...

*使用 SYS 命名约定，不合格的 SQL 语句将转到默认集合。如果没有默认集合，则使用当前库。如果未指定当前库，则使用库列表。*

...

*默认集合*

*由 ODBC 设置的作业属性，用于确定在处理包含非限定 SQL 名称的 SQL 语句时使用的库。设置默认集合时，除过程、函数和类型之外的所有非限定对象都必须驻留在默认集合中，而不管命名约定如何。*

...

**如何让 ODBC 搜索库列表？**

*如上所述，编辑 ODBC 数据源并将系统命名设置为 SYS。默认库必须为空，或者在早于 R510 的版本上，默认库设置必须以逗号开头，以便未定义默认集合（例如，“,MYLIB1,MYLIB2”）。*

* * *

[odbc连接字符串格式，找不到文件](https://stackoverflow.com/a/8173354/58061)

# drupal-6 - 在 Drupal 上上传文件时如何添加额外的提交处理程序

> ID：10382610
> 
> 赞同：0
> 
> 时间：2012-04-30T11:03:19.647
> 
> 标签：drupal-6

我目前正在使用 Drupal 6，并且一直在开发一个为站点执行特定功能的自定义模块。目前，我还有 1 个功能需要修复。当文件上传到节点时，我想做其他事情。我的问题是，我怎样才能捕捉到那个事件？就像是

```
when a file is uploaded {
   read the file
   print an additional info to the field (a cck field)
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T23:58:05.743

使用文件域的 hook_file_update()。见这里： [http ://www.wesjones.net/home/2011/03/drupal-6-how-to-change-filename-on-upload](http://www.wesjones.net/home/2011/03/drupal-6-how-to-change-filename-on-upload)

# c - 使用 microsoft visual c++ 2008 调试 C 程序

> ID：10382615
> 
> 赞同：0
> 
> 时间：2012-04-30T11:03:31.007
> 
> 标签：c, debugging, visual-c++

如何在 Microsoft Visual C++ 编辑器中为 ac 程序应用断点？我厌倦了这个 - 1）在我的代码中为特定行应用断点 2）打开 Visual Studio 命令提示符。3）使用 cl program.c 编译我的程序 4）program.exe

这是正确的程序吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T11:05:58.710

要触发断点，您必须在设置它们的 IDE（在您的情况下为 Visual C++ 编辑器）中运行程序，通常使用 F5。

如果您从命令提示符运行，则该进程没有附加调试器，因此没有任何东西可以检测到被命中的断点。您还可以将调试器附加到正在运行的进程并设置断点以*在事后*触发。

# php - 使用 SQL Server 2008 R2 安装 Drupal

> ID：10382622
> 
> 赞同：0
> 
> 时间：2012-04-30T11:04:22.453
> 
> 标签：php, sql-server-2008, drupal-6, sql-server-2008-r2

是否可以通过任何方式将 Drupal 6.x 连接到 SQL Server 2008 R2？我真的很难找到出路。

请告诉我。任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T12:12:57.097

不，默认情况下，Microsoft SQL Server 不在 Drupal 6 系统要求范围内。

此外，如果您需要该数据库服务器，强烈建议使用 Drupal 7，它支持 PDO 并且 PDO 支持（以某种方式）Microsoft SQL Server。

# c++ - 从轮廓OpenCV中提取矩形

> ID：10382624
> 
> 赞同：8
> 
> 时间：2012-04-30T11:04:50.427
> 
> 标签：c++, objective-c, c, opencv

在进行一些边缘和角落检测然后找到轮廓后，我得到了这个输出。

我如何使用openCV裁剪这个图像并只返回这个矩形

编辑：

我尝试了 cvBoundingRect 然后 setimageROI 但输出图像仍然有一些背景但我只想要矩形

谢谢你。

![图片链接](../Images/f030b280e3fde53bfb17806824b73f8b.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-30T12:55:18.673

我希望你需要你选择的矩形区域。

为此，您需要制作另一个灰度图像，我们称之为“蒙版”。然后画出上面得到的矩形轮廓，用白色（255,255,255）填充。您将获得这样的图像（所有图像在绘图程序中手工编辑）：

![在此处输入图像描述](../Images/e0b129c34074eac8ce5864d55ab74d72.png)

现在只需`bitwise_and`对两个图像进行操作。你会得到这样的结果：

![在此处输入图像描述](../Images/0a2e35a18627be5f35417175ab96230d.png)

**注意：**现在，如果它不是您想要的，而是您想要[这种选择，您可以在](https://stackoverflow.com/questions/10196198/how-to-remove-convexity-defects-in-sudoku-square)[这个 SOF 问题](https://stackoverflow.com/questions/7838487/executing-cvwarpperspective-for-a-fake-deskewing-on-a-set-of-cvpoint)中找到有关它的信息（感谢 karl philip 提供的链接）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T13:44:09.047

我猜穆斯塔法想自动拿到盒子？如果不是，请接受 Abid 的回答并忽略此问题。

否则：

因为我不知道它应该推广到什么程度，对于这个特定的图像，做霍夫变换，它会给你直线。然而，底部的线可能会变成误报。但是通过一些后期处理，例如模糊、扩张，您将能够摆脱它。或者您可以使用线条构建矩形的知识。

# java - java中的jpa一对多数据插入错误

> ID：10382628
> 
> 赞同：2
> 
> 时间：2012-04-30T11:05:07.360
> 
> 标签：java, spring, hibernate, jpa-2.0

论坛成员 我在使用 Hibernate JPA 框架插入数据时遇到了一个问题。

我在任务和资源之间建立了一对多的关系。

我的任务模型如下所示的代码。

```
@Entity
@Table(name = "task")
public class Task {

    private Integer id;
    private Set<Employee> employee = new HashSet<Employee>(0);

    @Id
    @GeneratedValue(strategy = IDENTITY)
    @Column(name = "id", unique = true, nullable = false)
    public Integer getId() {
        return id;
    }

    public void setId(Integer id) {
        this.id = id;
    }

    @OneToMany(cascade = CascadeType.ALL, fetch =FetchType.EAGER)
    @JoinTable(name = "task_employee", joinColumns = { @JoinColumn(name = "taskid") }, inverseJoinColumns = { @JoinColumn(name = "employeeid") })
    public Set<Employee> getEmployee() {
        return employee;
    }

    public void setEmployee(Set<Employee> employee) {
        this.employee = employee;
    }

} 
```

我的员工模型是

```
@Entity
@Table(name = "employee")
public class Employee {

    private Integer id;
    private String firstname;

    @Id
    @GeneratedValue(strategy = IDENTITY)
    @Column(name = "id", unique = true, nullable = false)
    public Integer getId() {
        return id;
    }
    public void setId(Integer id) {
        this.id = id;
    }

    @Column(name = "firstname")
    public String getFirstname() {
        return firstname;
    }
    public void setFirstname(String firstname) {
        this.firstname = firstname;
    }

} 
```

当

**1.task id为1，employeeid为1，**

**2\. Task id 为 1，employeeid 为 2，**

**3\. Task id 为 2，employeeid 为 3，**

但是当员工 id 像下面的插入一样重复时会发生错误。

**4.任务id为1，employeeid为1**

**它给了我错误**

```
79512 [http-8080-4] WARN org.hibernate.util.JDBCExceptionReporter - SQL Error: 1062, SQLState: 23000
79517 [http-8080-4] ERROR org.hibernate.util.JDBCExceptionReporter - Duplicate entry '2' for key 'employeeid'
79517 [http-8080-4] ERROR org.hibernate.event.def.AbstractFlushingEventListener - Could not synchronize database state with session
org.hibernate.exception.ConstraintViolationException: Could not execute JDBC batch update 
```

**我的代码有什么问题？请帮我！！！**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T15:15:11.963

你有一个 OneToMany 关系。这意味着一个任务可以有很多员工，但一个员工只能有一个任务！

> 员工 id 重复时发生错误

但是您违反（或试图违反）该约束的第二部分

所以你应该使用ManyToMany关系。

# google-maps - Google Maps API 不能使用撇号？

> ID：10382630
> 
> 赞同：0
> 
> 时间：2012-04-30T11:05:12.227
> 
> 标签：google-maps

我正在尝试使用 Google Maps API 来获取几个位置的纬度和经度。出于某种原因，每当我发送带有撇号的地名时，它都不会返回任何结果。

例如，如果我发送以下搜索**Berri's Pizza Cafe 的**请求，我会得到下面提到的结果

```
http://maps.googleapis.com/maps/api/geocode/json?address=berri%27s+pizza+cafe&sensor=false
{"results" : [],    "status" : "ZERO_RESULTS"} 
```

还有这个

```
http://maps.google.com/maps/geo?q=Berri%27s%20Pizza%20Cafe&output=json
{
  "name": "Berri's Pizza Cafe",
  "Status": {
    "code": 602,
    "request": "geocode"
  }
} 
```

我认为这是 Google Maps API 的问题（发现一个论坛帖子说这是 javascript API 中的一个问题，但据说已在那里修复，可能不在此）

有没有人有解决这种情况的方法？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T11:18:50.937

问题是您正在尝试对企业名称进行地理编码；地理编码器使用邮政地址。省略撇号也不会得到任何结果（因此证明问题不是撇号）。

请注意，地图地理编码器要复杂得多，它使用各种数据源来定位目标，包括地址地理定位和企业名称查找。

您可以使用[Places API](https://developers.google.com/maps/documentation/places/)找到您要查找的数据（但您需要指定当前省略的城市）。

# linux - awk - 如何“重新 awk”输出？

> ID：10382631
> 
> 赞同：2
> 
> 时间：2012-04-30T11:05:13.770
> 
> 标签：linux, unix, awk

我需要获取一个文件并计算 $7 的出现次数——我已经用 awk 完成了这个（因为我需要通过更多的 awk 来运行它）

我想要做的是将它组合成一个脚本 - 到目前为止我有

```
#! /usr/bin/awk -f
# get the filename, count the number of occurs
# <no occurs> <filename>
{ print $7 | "grep /datasheets/ | sort | uniq -c"} 
```

如何获取该输出并通过更多 awk 命令运行它 - 在同一个文件中

最终，我需要能够运行

```
./process.awk <filename> 
```

因此它可以替代以前的设置，这将花费太多时间/精力来改变 -

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T11:54:04.940

如果要将 awk 脚本的输出转发到另一个 awk 脚本，只需将其通过管道传输到 awk。

```
awk 'foobar...' file|awk 'new awkcmd' 
```

你的电流`awk|grep|sort|uniq`可以用 awk 本身来完成。保存您的 3 个过程。你想得到重复的计数，不是吗？

```
awk '$7~=/datasheets/{a[$7]++;} END{for(x in a)print x": "a[x]' file 
```

应该管用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-08T22:02:06.730

如果您使用 Gawk，您可以使用 2 路通信将数据推送到外部命令，然后将其读回：

```
#!/usr/bin/gawk -f

BEGIN {
  COMMAND = "sort | uniq -c"
  SEEN = 0
  PROCINFO[ COMMAND, "pty" ] = 1
}

/datasheets/ {
  print $7 |& COMMAND
  SEEN = 1
}

END {
  # Don't read sort output if no input was provided
  if ( SEEN == 1 ) {

    # Tell sort no more input data is available
    close( COMMAND, "to" )

    # Read the sorted data
    while( ( COMMAND |& getline SORTED ) > 0 ) {
      # Do whatever you want on the sorted data
      print SORTED
    }
    close( COMMAND, "from" )
  }
} 
```

见[https://www.gnu.org/software/gawk/manual/gawk.html#Two_002dway-I_002fO](https://www.gnu.org/software/gawk/manual/gawk.html#Two_002dway-I_002fO)

# asp.net - 将任何日期格式转换为 MM/DD/YYYY 格式

> ID：10382632
> 
> 赞同：0
> 
> 时间：2012-04-30T11:05:18.457
> 
> 标签：asp.net, c#-4.0, datetime

我在使用不同的日期格式时遇到了困难。我有一个使用`asp.net` `c#`. 我使用`JQuery`了日历控件，它显示日期和时间。

然后我使用`DateTime.Parse()`. 如果服务器设置为印度日期格式，则应用程序会生成转换错误***“字符串未被识别为有效日期时间”。***

有没有办法将任何日期格式`MM/DD/YYYY`与时间一起转换为格式？我知道我可以使用`DateTime.ParseExact()`，但它会再次使用特定的格式。

任何帮助是极大的赞赏。

谢谢分享你的智慧。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T11:06:48.520

```
Convert.ToDateTime(DateTime.Now, CultureInfo.GetCultureInfo("en-US")).ToString("MM/dd/yyyy hh:MM:ss"); 
```

您可以将 en-US 替换为 hi-IN 用于印地语日期或根据您的喜好。请点击链接。文化信息。

[http://msdn.microsoft.com/en-us/library/system.globalization.cultureinfo(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/system.globalization.cultureinfo%28v=vs.80%29.aspx)

如果您不确定文化，请使用下面的行。

```
Convert.ToDateTime(DateTime.Now, CultureInfo.CurrentCulture).ToString("MM/dd/yyyy hh:MM:ss"); 
```

参考这里[http://msdn.microsoft.com/en-us/library/system.globalization.cultureinfo.currentculture.aspx](http://msdn.microsoft.com/en-us/library/system.globalization.cultureinfo.currentculture.aspx)

您可以使用的其他方法是。

```
DateTime dt;
DateTime.TryParse(DateTime.Now.ToString(), out dt); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T11:11:39.643

您可以尝试 DateTime.Parse 或 DateTime.TryParse 方法

```
 DateTime.Parse(DateTime.Now).ToString("MM/dd/yyyy hh:mm tt"); 
```

另请参阅

[http://www.geekzilla.co.uk/View00FF7904-B510-468C-A2C8-F859AA20581F.htm](http://www.geekzilla.co.uk/View00FF7904-B510-468C-A2C8-F859AA20581F.htm)

[http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx)

谢谢

迪普

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T12:01:29.920

您可以使用此代码。

```
public static CultureInfo CreateCulture(string shortDateFormat)
{

        CultureInfo newCulture = CultureInfo.CreateSpecificCulture("en-US");
        newCulture.DateTimeFormat.ShortDatePattern = shortDateFormat;
        newCulture.DateTimeFormat.LongDatePattern = shortDateFormat;

        return newCulture;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-30T12:52:06.270

您可以为此创建一个扩展方法，您需要使用静态方法创建一个静态类。它将返回您在课堂上定义的日期格式

```
public static class DateExtension
    {
        public static string GetDateTime(this DateTime? date)
        {
            if (date.HasValue)
                return date.Value.ToString("dd-MMM-yyyy hh:mm tt");
            return string.Empty;
        }
    } 
```

现在在您的代码中，您可以将此扩展用于例如 DateTime.GetDateTime() 它将返回带有您在扩展库类中指定的格式的时间的日期

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-30T15:25:10.377

```
string s;  
 s = dt.ToString("MM-dd-yyyy");
Console.WriteLine(s);//Displays 04-30-2012 
```

# javascript - 按下后退按钮时如何防止Android关闭Web应用程序？

> ID：10382634
> 
> 赞同：4
> 
> 时间：2012-04-30T11:05:25.143
> 
> 标签：javascript, android, cordova, back-button

我正在开发一个 HTML5 网络应用程序并用 Cordova (phonegap) 1.7 编译它。

我想覆盖 Android 后退按钮，以便我可以调用 window.history.back() 而不是关闭应用程序（默认 Android）。如何防止 Android 在按下后退按钮时杀死默认活动？

我得到“按下后退按钮！！！” 在 logcat 中，因此该方法在应用程序关闭之前被触发。

这是我到目前为止所拥有的：

```
 // Wait for Cordova to load
        //
        document.addEventListener("deviceready", onDeviceReady, false);

        // Cordova is ready
        //
        function onDeviceReady() {

            document.addEventListener("backbutton", function(e) {

                console.log("Back button pressed!!!!");                 
                window.history.back();

            }, false);

        } 
```

编辑：如果可能的话，我愿意接受解释直接从 DefaultActivity.java android 类模拟 window.history.back() 的方法的答案！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-30T18:57:52.533

我通过将以下代码添加到文件中来解决我自己的问题`DefaultActivity.java`以防止默认的 android 行为，并保持问题中所述的 JavaScript 代码：

```
@Override
public void onBackPressed() {
   return;
} 
```

我希望这可以帮助将来遇到同样问题的人！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T20:14:04.353

我采用了这种方法。正如你所展示的，我钩住了后退按钮事件。我看看这是否是第一页，然后询问用户是否要退出程序。这取决于您希望程序根据其状态执行的操作。如您所示，我没有添加覆盖；我似乎不需要它。

```
if ($.mobile.activePage.attr('id') === 'firstpage') {
    // Prompt to confirm the exit
} else {
  window.history.back();
} 
```

如果他们想退出，您可以致电：

```
navigator.app.exitApp(); 
```

关闭你的程序。

我想您仍然希望允许用户退出您的应用程序。我不倾向于使用不允许某种退出的应用程序。

希望这可以帮助你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T13:36:37.727

从来没有这样做过，但是，你试过`return true`吗？

就像在 Java SDK 中一样，如果您 return `True`，系统将假定您已正确捕获该事件，并且不再将其传递给其他事件侦听器。

# android - 如何将 android 应用程序定位到特定国家/地区？

> ID：10382636
> 
> 赞同：0
> 
> 时间：2012-04-30T11:05:29.787
> 
> 标签：android

我开发了一个应用程序，该应用程序仅针对特定国家/地区。

在开发者控制台中选择国家/地区是否足以针对特定国家/地区，还是我必须进行任何其他设置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T11:10:01.863

开发者控制台选择基本上是游戏商店过滤器。它旨在从国家/地区过滤您的应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T11:15:08.423

商店过滤器足以限制国家，它不会让用户下载应用程序。

但是，如果您想要进一步的配置和实施，您可以寻找

`mcc`和`locale`设备[`android:configChanges`](http://developer.android.com/guide/topics/manifest/activity-element.html#config)

# objective-c - cocoa：为什么活动没有运行？

> ID：10382639
> 
> 赞同：0
> 
> 时间：2012-04-30T11:05:45.503
> 
> 标签：objective-c, macos, cocoa, xcode4.3

`NSLog(@"ss")`执行。为什么事件没有运行？

```
-(void)mouseUp:(NSEvent *)theEvent{
    switch (self.tag) {
        case 3:
            NSLog(@"ss");
            [self setAction:@selector(openurl:)];
            break;
        default:
            break;
    }
}

- (IBAction)openurl:(id)sender {
    [[NSWorkspace sharedWorkspace] openURL:[NSURL URLWithString:@"http://www.google.com/"]];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T11:16:02.867

您的代码正在设置操作，但不发送。设置动作只是告诉控件在发生某些事情时要发送什么动作。并且由于您似乎也在覆盖`-mouseUp:`，因此控件对鼠标向上的正常事件处理将不会发生，并且可能永远不会发送该操作。

# asp.net - SQL Server 和 ADO.NET 中的事务之间的区别？

> ID：10382640
> 
> 赞同：2
> 
> 时间：2012-04-30T11:05:48.327
> 
> 标签：asp.net, sql-server, ado.net

SQL Server 中的事务和在 ADO.NET 中使用事务有什么区别？

请用正确的逻辑回答。我只想知道性能方面。

我只想知道我是否正在使用事务（开始结束事务）并在 ado.net 中使用 SqlTransaction 类进行类似的查询集，那么哪个更好用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T11:14:16.130

就事务处理而言，ADO.Net 事务和 SQL Server 事务之间没有区别。就个人而言，我更喜欢在 ADO.NET 提供的更高级别上启动事务，因为它通常使我在设置事务范围方面具有更大的灵活性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T15:56:46.280

如果您在一个事务中对多个数据库进行更改并希望在出现错误时将所有这些数据库回滚，则 ADO.net 事务会更方便。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T11:40:56.760

只有当我需要更新多个表时，SQL Server 级别的事务，比如我有一个主表和一个详细表，我想同时更新主表和详细表。

ADO.Net（.Net 级别）事务仅用于一个项目，它是一个 SQL 2008 项目，有一些要求，例如，我需要在数据库中保存一些 DOC 文件，它使用 SQL 2008 功能，称为 FileStream。如果启用 FileStream 它将在服务器上创建一些共享文件夹，并将所有文件数据保存到该文件夹​​中，该文件夹只能由 SQL Server 读取。

# e-commerce - 单击查看订单时，OpenCart 会加载一个空白页面

> ID：10382642
> 
> 赞同：0
> 
> 时间：2012-04-30T11:05:55.590
> 
> 标签：e-commerce, opencart, orders

我正在将 opencart 用于我正在创建的在线商店。

当我查看最新订单部分时，我应该能够单击查看每个订单。

单击视图链接时，加载的所有内容都是空白页面。

我看不到任何错误。我可以提供您需要的任何代码，但是我不知道错误在哪里，因此非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T17:56:16.623

尝试将以下内容添加到 admin/index.php 文件的顶部。

```
error_reporting(E_ALL);
ini_set("display_errors" , 1); 
```

这应该为您提供有关该错误的更多信息。

# iphone - UIView 子类不会更新

> ID：10382644
> 
> 赞同：1
> 
> 时间：2012-04-30T11:05:59.190
> 
> 标签：iphone, uiview, frame, cgrect

我有一个自定义 uiview，我正在尝试更新帧大小。一旦点击它，我就会在一个方法中这样做。该方法被调用，并且帧值发生了变化，但是在屏幕上没有任何反应！我认为正在发生的是子类没有被重绘或更新

```
- (void)resizeWithTag:(int)tag wasTouched:(BOOL)touched
{
    if (!touched) {

        GameBox *box = (GameBox *)[self.view viewWithTag:40];
        CGRect frame = box.frame;
        frame.origin.x += 30;
        box.frame = frame;
        [[self.view viewWithTag:40] setFrame:CGRectMake(20, 20, 100, 73)];
        [box layoutSubviews];
        NSLog(@"%f", box.frame.origin.x);
        markButton.enabled = NO;
        guessButton.enabled = NO;
        [self.view reloadInputViews];

        NSLog(@"The action bar should now be hidden");
    }
    else if (touched) {
        guessButton.enabled = YES;
        markButton.enabled = YES;
        [self.view reloadInputViews];
        NSLog(@"The action bar should now be visible");
    }
} 
```

# javascript - Add validation method to "jquery validation plugin"

> ID：10382648
> 
> 赞同：0
> 
> 时间：2012-04-30T11:06:07.250
> 
> 标签：javascript, jquery

Hello im using jquery validation plugin to validate my form. I want to add one more rule to the validation, but cant get it to work. **Input value should be less or equal previous element value.**

It is possible to do it ?

Here is the code -

```
<input type='text' value='<?php echo $count; ?>' class='input_in_stock' readonly="readonly" />
<input type='text' name='amount[]' id='<?php echo rand(0,99).$id; ?>' size='1' value='<?php echo $count; ?>' class='required input_count' />

$(document).ready(function(){

    $.validator.addMethod('positiveint', function (value) { 
        return (value > 0) && (value != 0) && (value == parseInt(value, 10));
    }, 'Enter a positive integer value.');

    $.validator.addMethod('notmorethan', function (value) { 
        return (value <= $(this).prev().val());
    }, 'abc.');

    $("#cartform").validate({
        rules: {
            "amount[]": {
                required: true,
                positiveint: true,
                notmorethan: true
            }
        },
        errorPlacement: function(error, element) {
            error.appendTo(element.next());
        }
    });

}); 
```

p.s. I used this jquery validation plugin fix to make it work with names like this[] [http://www.codeboss.in/web-funda/2009/05/27/jquery-validation-for-array-of-input-elements](http://www.codeboss.in/web-funda/2009/05/27/jquery-validation-for-array-of-input-elements)

EDIT: found the solution

```
$.validator.addMethod('notmorethan', function (value, element) { 
    return (value <= $(element).prev().val() );
}, 'abc'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T12:13:05.630

看看这个小提琴是否有帮助 - [http://jsfiddle.net/alokswain/LSuMA/11/](http://jsfiddle.net/alokswain/LSuMA/11/)。我不确定您使用诸如 之类的名称进行的自定义`amount[]`，但我想这种方法应该很有效。

自定义验证方法只是函数，如果您`this`在函数体内使用，那么它将引用函数的所有者。现在假设您想从输入字段中获取先前有效的值，只要整个表单有效，您就可以将其存储在 DOM 中的某个位置，例如先前存储的值被称为`previousAmountVal`. 当字段中的值发生变化时，在函数中，`notmorethan`您可以使用参数访问当前值，使用 访问`value`先前存储的值和先前值`previousAmountVal`，从而确定当前值是否有效。此外，如果您这样做，请记住始终更新`previousAmountVal`表单何时有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T08:38:04.717

找到了解决方案

```
$.validator.addMethod('notmorethan', function (value, element) { 
    return (value <= $(element).prev().val() );
}, 'abc'); 
```

# javascript - 使用 jQuery 双击表格行时打开链接

> ID：10382650
> 
> 赞同：4
> 
> 时间：2012-04-30T11:06:14.660
> 
> 标签：javascript, jquery, html, double-click

我有一个`table`看起来像这样的：

```
<table id="table">
    <thead>
      <tr class='tablehead'>
        <th>Test</th>
      </tr>
    </thead>
    <tbody>
      <tr class='tablecell'>
        <td>
        </td>
      </tr>
    </tbody>
</table> 
```

1.  我希望能够双击一行然后触发一个链接。
2.  必须以某种方式传输 ID。我应该在哪里定义这个？这使我可以在之后编辑选定的行。

知道怎么做吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-30T11:09:54.493

你有*任何*你写过的jQuery吗？这是一个开头...

在行中定义您的 ID：

```
<tr id="something">...</tr> 
```

然后使用这样的东西：

```
$('tr').dblclick(function(){
  var id = $(this).attr('id');
  //do something with id
}) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-30T11:10:08.550

你的意思是这样的：

```
$(document).ready(function() {
    $('.tablecell').click(function() {
        return false;
    }).dblclick(function() {
        window.open("your_url");
        return false;
    });
}); 
```

并且您可以创建一个隐藏字段并在双击时使用 id 填充该字段。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-30T11:10:03.403

**工作演示： http:** [//jsfiddle.net/Xr7LC/](http://jsfiddle.net/Xr7LC/)（根据您提供的示例代码创建）

1.  使用`dblclick`api [http://api.jquery.com/dblclick/](http://api.jquery.com/dblclick/)

2.  您可以使用`$(this).attr('id')`来获取 id，显然您将在标签中定义 id。

**dblclick 的 jQuery 代码：**

```
$(document).ready(function() {
    $('#table >thead > tr').dblclick(function() {
    alert('Row dblclicked');
        alert($(this).attr('class'));
    });
});​ 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-04-30T11:10:54.210

这可能会帮助您：

```
jQuery(function($) {
    $('#table tr').click(function() {
        return false;
    }).dblclick(function() {
        window.location = url;
        return false;
    });
}); 
```

# ajax - How to know when page has been loaded with references completely after post in jquery ajax

> ID：10382651
> 
> 赞同：0
> 
> 时间：2012-04-30T11:06:16.383
> 
> 标签：ajax, jquery

I am using the below to get the whole page when I submit a form, now the page takes time to load as it calls its CSS and JavaScript.
I need to show that data is still being loaded in that page, before anybody uses it again. I would like to use a modal popup with loading and once the page is loaded completely I will close the popup How canI achieve that?

```
$.ajax({  
    type: "POST",
    url:  $url,
    data: "post=" +  post,
    //   data: form_data,
    success: function(data) {
        if(data!=""){
            $('body').html(data);
            ... 
```

additonal data:

I have two frames in a window. in the right side frame my page has links which when clicked will post certain data in hidden fields and get the whole right side page with the changed data. now my right side page has links such as

```
<link rel="Stylesheet" href="abc.css" type="text/css" />
<script src="jquery-1.6.3.min.js"></script>

<link href="jquery-ui.css" rel="stylesheet" type="text/css"/> 
```

These files take time to be retrieved form server once the page is loaded by $('body').html(data); I want these files to be loaded and then let the user do his work

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T11:10:39.053

由于您正在应用`load`到整个`body`元素，因此之前的任何模式弹出显示都将被删除，以便为新内容做好准备。

因此，我建议首先使用以下方法[将您的内容加载到变量](https://stackoverflow.com/questions/4260400/jquery-load-into-variable-or-hidden-element)`$.get()`中：

```
var content;
$.get($url, "post=" + post, function(data){
    content = data;
}); 
```

这意味着您可以在此过程中显示一个加载图标，然后将内容加载到`body`其中将删除加载图标：

```
//show modal popup here    
$.get($url, "post=" + post, function(data){
    var content;
    content = data;
    if (content!=null){
       $("body").html(content);
     }
}); 
```

我的语法可能不太正确，因为我无法对此进行测试，但它应该让您了解可行的逻辑。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T11:10:58.113

使用 ajaxStart 和 ajaxEnd 显示加载消息。

```
$("#myjaxloader").bind("ajaxStart", function(){
    $(this).show();
}).bind("ajaxStop", function(){
    $(this).hide();
}); 
```

在 myajaxloader 中添加消息和图像

如果您想要更多阻止功能，可以使用[blockUI 。](http://jquery.malsup.com/block/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T11:48:13.103

您需要使用加载帧的 onload 事件。如果您的两个框架都在同一个域上，您可以执行以下操作：

导航窗口：

```
$.post(url, data).then(
    function() { // success handler
        window.errorTimer = setTimeout(showErrorPopup, 10);
    }, function() { // error handler
        showErrorPopup();
    }
);
showLoadingPopup(); 
```

内容窗口：

```
$(function() { // runs after everything is loaded
    window.top.otherFrame.clearTimeout(window.top.otherFrame.errorTimer);
    window.top.otherFrame.hideLoadingPopup.call(window.top.otherFrame);
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-30T11:15:23.370

```
$(form).on('submit', function(e) {
    e.preventDefault();  // to stop the page from reloading
    $.ajax({  
        type: "POST",
        url:  $url,
        data: "post=" +  post,  //use form.serialize to send the whole form
        beforeSend: function () {
            $(modal).show();
        }
    }).done(function(data) {
        if(data!=""){ $('body').html(data); }
    )).always(function() {
        $(modal).hide();
    });
}); 
```

# php - Typo3 4.5.5 和 Typo3 4.6.8 后端登录不起作用？

> ID：10382653
> 
> 赞同：0
> 
> 时间：2012-04-30T11:06:24.200
> 
> 标签：php, typo3

最近我的 Typo3 4.5.5 无法访问后端。首先，我以为我忘记了密码，但因为我可以物理访问我的数据库，所以我可以验证这一点。我可以访问安装工具并为我创建一个新用户，但无济于事。我已将我的typo3 版本更新为 4.6.8 无济于事。我可以使用 Typo3 4.7.0，但我的一些扩展需要解决方法，因为它不适用于 4.7.0。我的用户无法访问后端的原因可能是什么？我在日志中没有任何 php 错误。对于开发，我使用的是带有 Suse 12.2 和 lighttpd + FastCGI、php 5.3.8、xdebug 2.2.0RC2 和 Komodo IDE 的虚拟机。Mysql 来自 suse 存储库，所以它是 5+。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T13:45:06.120

Perhpas 您激活了 rsaauth 扩展并且您的密码中有一些特殊字符？尝试将其更改为简单的仅 ANSI 密码以进行测试。

也许尝试删除相关的 cookie 或使用新的/不同的浏览器。

检查您在安装工具中的设置，也许您将会话锁定到错误的域/IP？

# ios - 与 iOS 上的预建 2.3 相比，opencv 2.4 真的很慢

> ID：10382656
> 
> 赞同：1
> 
> 时间：2012-04-30T11:06:35.620
> 
> 标签：ios, opencv

我正在使用以下脚本构建 openCV： https://github.com/BloodAxe/OpenCV-iOS-build-script或此脚本： [https :](https://github.com/BloodAxe/OpenCV-iOS-build-script) [//github.com/aptogo/OpenCVForiPhone](https://github.com/aptogo/OpenCVForiPhone)。

与他们之前已经构建的版本相比，我的速度真的很慢。我唯一能看到不同的是，在我的例子中，opencv 是用 -O0 编译的。

编辑：我已经用相位相关和 lk 对其进行了测试，它的速度是它的 5 倍。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T15:19:20.810

为什么不按照官方[文档的建议](http://opencv.itseez.com/doc/tutorials/introduction/ios_install/ios_install.html)使用 cmake呢？

**编辑：**确保你传递`-DCMAKE_BUILD_TYPE=RELEASE`给 cmake。

# powerbuilder - 等待 PDF 打印机完成，PowerBuilder

> ID：10382658
> 
> 赞同：1
> 
> 时间：2012-04-30T11:06:55.653
> 
> 标签：powerbuilder

我有一个 PowerBuilder 应用程序，它可以创建通知并使用 PDFCreator 保存为 PDF。之后，我想使用 SQL Server 2008 中的存储过程通过邮件发送这些文件。

例如，我有 50 个通知。我想： - 全部保存为 pdf（50 个 pdf 文件 - PowerBuilder 应用程序） - 通过邮件发送（存储过程 - SQL）

我使用 DataWindow（.saveAs 方法）保存每个通知：dw_1.saveAs(ls_path, PDF!, true)

如果我尝试运行应用程序，然后运行存储过程，保存到 PDF 的过程比应用程序的执行时间慢得多，所以我无法通过邮件发送文件，因为它们还没有被尚未创建... :(

我能做些什么？有任何想法吗？

多谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T13:46:46.293

*警告：我自己还没有尝试过。*

我希望如果您尝试使用 LockReadWrite! FileOpen() 创建的 PDF，如果 PDF 创建过程尚未完成，它将失败。所以，我会尝试一个带有 Sleep() 的循环，当 FileOpen() 成功时退出。（记住 FileClose() 成功！）循环退出后调用存储的过程。

祝你好运，

特里。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T15:38:10.137

我们使用 DataWindow saveas PDF (Ghostscript)，它在创建 PDF 之前不会返回。

# ios - Can you use CFUserNotification with IOS 5.1

> ID：10382659
> 
> 赞同：0
> 
> 时间：2012-04-30T11:06:56.053
> 
> 标签：ios, notifications

I am trying to get a notification to appear when the app is in the background or suspented, as the LocalNotification does not work, I seen mention the CFUserNotification as a potential solution, but when i include the corefoundation framework to my app the CFUserNotification is still no-where to be found, can someone show me how to include CFUserNotification in my project ?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T11:19:24.117

> 你可以在 IOS 5.1 中使用 CFUserNotification 吗？

不

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-09T21:06:15.650

**如果你不是为 App Store 制作这个**，你可以使用私有 API。我使用 CFUserNotifications 的方式是

1.  将 CoreFoundation.framework 添加到我链接的框架列表中（也许这个框架是自动包含的……我不确定……我只知道将它显式添加到您的项目中并没有什么坏处）。

2.  正如 Justin 所说，CoreFoundation 公共 API 在标头中仍然没有 CFUserNotification 函数。因此，您需要手动包含一个**完整**的CFUserNotification.h 标头。你可以[在这里找到一份副本](http://opensource.apple.com/source/CF/CF-550/CFUserNotification.h)。只需复制整个头文件，并将其包含在您的项目源目录中。然后`#import "CFUserNotification.h"`你想在哪里使用它。

然后，编译器将允许您访问这些`CFUserNotification`API。我已经成功地在 iOS 5.0 上完成了此操作（在设备上）。

# apache - htaccess issue in codeigniter

> ID：10382662
> 
> 赞同：1
> 
> 时间：2012-04-30T11:07:11.610
> 
> 标签：apache, .htaccess, codeigniter, subdomain, codeigniter-2

I've 2 servers say x.com and x.net
x.com has CodeIgniter 1.7 and x.net has CodeIgniter 2.1
I'm using a htaccess to handle subdomain for the two servers

when I enter y.x.com it will go to x.com/y and y.x.net to x.net/y
But htaccess on the x.net server isn't working

the htaccess for x.net::

```
DirectoryIndex index.php
RewriteEngine On

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !^index\.php
RewriteCond %{HTTP_HOST} ^(.*)\.x\.net
RewriteCond %{HTTP_HOST} !^www\.x\.net
RewriteCond %{HTTP_HOST} !^x\.net
RewriteRule ^(.*)$ %1/%{REQUEST_URI} 
```

the htaccess for x.com is the same just the site name is different
any idea, why is this happening?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T01:58:18.680

我知道 CI 应用程序文件夹是从系统文件夹中带出来的，比较 v2.0 和 v1.7

你的 .htaccess 是我使用 v1.7 时的样子，即：

```
RewriteRule ^(.*)$ /index.php?$1 [L] 
```

对于 v2.0+，我的 .htaccess 有几个附加指令。因此，您可以尝试将这些添加到您的 .htaccess for x.net**吗**？

```
RewriteCond %{REQUEST_URI} ^system.*
RewriteRule ^(.*)$ /index.php?/$1 [L]

RewriteCond %{REQUEST_URI} ^application.*
RewriteRule ^(.*)$ /index.php?/$1 [L] 
```

# c# - New window form in a c# program

> ID：10382664
> 
> 赞同：0
> 
> 时间：2012-04-30T11:07:25.487
> 
> 标签：c#, forms

I'm trying to open a new window form on a button click

In main program's constructor I've got:

```
form_targeting = new Targeting(); 
```

In button1_Click(...) there is:

```
form_targeting.Show(); 
```

and ofc in main program's fields there's

```
public static Targeting form_targeting; 
```

When opening first time, It works correctly. After closing 2nd window and pressing the button in a 1st window again, I get error:

> Cannot access a disposed object. Object name: 'Targeting'.

I've added that into Targeting class but it still doesn't work:

```
 private void Targeting_FormClosing(Object sender, FormClosingEventArgs e)
            {
                this.Hide();
                e.Cancel = true;
            } 
```

It works now, I had to write completely the same but using designer :p thanks guys :)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T11:10:31.263

将代码放入按钮单击事件中。

```
button1_Click(...)
{
   form_targeting = new Targeting();
   form_targeting.Show();
} 
```

结束关闭表格

```
form_targeting.Close(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T11:13:42.527

关闭表单调用`Dispose`它。您需要为[FormClosing](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.formclosing.aspx)事件编写一个处理程序。在该事件处理程序中调用`Hide`您的表单实例并设置`e.Cancel = true`为不关闭表单。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-30T11:16:09.797

下面的代码意味着，您正在初始化 Targeting 的实例。

```
 form_targeting = new Targeting(); 
```

一旦您使用以下代码显示表单`form_targeting.Show();`并通过单击十字按钮或以任何方式关闭表单。以第一种形式初始化为 form_targeting 变量的内存被释放。

所以第二次，您尝试打开相同的表单，它会引发错误。

# apache-flex - Captive Build Flash Builder 4.6 Problems

> ID：10382665
> 
> 赞同：0
> 
> 时间：2012-04-30T11:07:25.707
> 
> 标签：apache-flex, air, adobe, flash-builder

I have a weird problem with Flex and Flash Builder 4.6 captive build.

I'm doing an Windows AIR App, and it all works fine, both as an AIR app and form the IDE. However when I make it into a Captive build, its like anything that references Capabilities, just doesn't get compiled in.

No errors or anything. Thus all my window centre, docking functionality just doesn't exist.

Even this line, in an attempt to debug, doesn't fire

```
mx.controls.Alert.show(Capabilities.screenResolutionX.toString()); 
```

If I do an Alert.show('here') on the same line, which is in the init function called from creationComplete it shows.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T11:26:26.087

我弄清楚发生了什么，但我不明白。我会将其发布为答案，因为它是答案，但是如果有人想将答案发布为原因，我很乐意接受他们的答案。

这是 init 方法中的第一段代码

```
// Force Start Program on login.
if (!Capabilities.isDebugger)
{
    NativeApplication.nativeApplication.startAtLogin = true;
} 
```

执行此代码后没有其他内容，这让我认为它出现错误并退出该方法。如果我删除这段代码，一切都会好起来的。但为什么？

# jquery - How to prevent form submission when submit event is handled using .on() method

> ID：10382666
> 
> 赞同：2
> 
> 时间：2012-04-30T11:07:29.310
> 
> 标签：jquery, jquery-mobile

I have a form inside of a page that uses jQuery Mobile.

It's just a good ol' form, nothing fancy:

```
<form action="index.php" method="post">
    <input type="text" name="owner" id="owner" />
    <button type="submit">Add</button>
</form> 
```

If I add following to a script block (note: enclosing $(function(){}); is omitted for clarity):

```
$('form').submit(function(event){
    // event.preventDefault(); doesn't work here?!?
    return false;
}); 
```

...form will not be submitted, no matter what. However, this approach can not be used with jQuery Mobile, because after page is changed, event binding will not be applied when DOM is changed.

So, if I try this approach instead:

```
$(document).on('submit', 'form', function(event){
    // event.preventDefault(); doesn't work here as well...
    alert('submit!');
    return false;
}); 
```

...Form WILL be submitted, even though it returns false (and there is alert when button is clicked).

What's going on here, and how to get expected behavior?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-30T11:24:08.073

不要将处理程序附加到表单，而是为提交按钮执行此操作。

```
event.preventDefault() 
```

肯定会阻止表单提交，一旦您完成验证（或在表单提交之前您希望执行的任何操作），您可以使用触发表单提交

```
$('#target').submit(); 
```

# c# - Set Axis label to integer format. Devexpress chart

> ID：10382670
> 
> 赞同：1
> 
> 时间：2012-04-30T11:08:15.397
> 
> 标签：c#, wpf, charts, devexpress

I am using bar chart. I need to have labels in integer format.

I am using this code

```
<dxc:AxisY2D.NumericOptions>
      <dxc:NumericOptions Precision="0" Format="Number" />
</dxc:AxisY2D.NumericOptions> 
```

Then I get range values from 0 to 1 like 0 0 0 1 1 1\. When I set GridSpacing to 1\. It solves the problem. But for large amount of data the view with GridSpacing = 1 is ridiculous.

I need to have the label in integer format for small and large amount of data.

# html - expression engine's plugin expresso tag integration

> ID：10382675
> 
> 赞同：0
> 
> 时间：2012-04-30T11:08:45.100
> 
> 标签：html, plugins, expressionengine, expresso-store

I’m new to expression engine and also the expresso plugin, so excuse me if this question comes across naive…I’m trying to integrate a custom template using some of the exp:resso tags however, i’m am failing to get this to work correctly. Below is an example of the static version of what i’m trying to achieve. [http://iamnatesmithen.com/fluotics/products.html](http://iamnatesmithen.com/fluotics/products.html)

Thus far in my channel fields created a channel field titled “products” > within my groups i have created 4 group IDs’ {p_details} which is linked to the field type Store Product Details, presume this enables me to enter in all products details such as price, product ID etc, I also have created another field for images {p_productimage} which is linked to the filed type “matrix”.

At the moment when i go into the publish section on ee, exp:resson provides me with fileds for me to apply product sku, vol etc but i'm stuggling to seperate these fields into the classes i have above can someone guide me in the right direction.

```
{exp:channel:entries channel="products" limit="6" paginate="bottom"}
    {exp:store:product entry_id="" return="cart"}
    <ul class="inventory">
    <li class="item2">
        <a href="#"><img class="itemImg" src="{p_productimage}" alt=""/></a>
        <div class="product-fam1">
            <h3>item title here</h3>
            <div class="sku"><h4>Format: 3335</h4></div>
            <div class="vol"><h4>Working Volume: 30ul</h4></div>
             <a class="viewItem" href="#"></a>                  
            </div> 
    </li><!-- ITEM ENDS HERE -->
    </ul>
    {/exp:store:product}
{/exp:channel:entries} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T11:29:24.920

要限制显示的条目数，您需要 limit 参数。分页也是如此。另请注意，您的关闭频道条目标签不正确。

并且您的 store:product 标签应该放在您的频道条目标签内，而不是相反，因此它可以获取条目的 entry_id，例如：

```
{exp:channel:entries channel="products" limit="6" paginate="bottom"}

{exp:store:product entry_id="{entry_id}" return="cart"}
{/exp:store:product}

{/exp:channel:entries} 
```

# java - java - Remove noise from byte array wav file

> ID：10382677
> 
> 赞同：4
> 
> 时间：2012-04-30T11:08:49.180
> 
> 标签：java, android, audio, fft, lowpass-filter

Can anyone show me an algorithm of removing white noise from a `byte[]` sound? I work for a personal audio recording app for android and I use android API for recording. Below is the method used to write the recording to file (in wav format).

```
 private AudioRecord.OnRecordPositionUpdateListener updateListener = new AudioRecord.OnRecordPositionUpdateListener()
 {
    public void onPeriodicNotification(AudioRecord recorder)
    {
        aRecorder.read(buffer, 0, buffer.length);
        try
        { 
            fWriter.write(buffer); // Write buffer to file
            payloadSize += buffer.length;
            if (bSamples == 16)
            {
                for (int i=0; i<buffer.length/2; i++)
                { // 16bit sample size
                    short curSample = getShort(buffer[i*2], buffer[i*2+1]);
                    if (curSample > cAmplitude)
                    { // Check amplitude
                        cAmplitude = curSample;
                    }
                }
            }
            else
            { // 8bit sample size
                for (int i=0; i<buffer.length; i++)
                {
                    if (buffer[i] > cAmplitude)
                    { // Check amplitude
                        cAmplitude = buffer[i];
                    }
                }
            }
        }
        catch (IOException e)
        {
            Log.e(AudioRecorder2.class.getName(), "Error occured in updateListener, recording is aborted");
        }
    }

    public void onMarkerReached(AudioRecord recorder)
    {}
}; 
```

I want to apply some transformations to buffer to remove the white noise which can be heard during playback of the recording. If anybody know some algorithm/link to some low-pass filter (or anything else that might be helpful), please help.

Thanks.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-06T03:14:30.020

如果您知道，您可以平均采样：采样频率 (8,16,32,64,128) 和位深度 (8,16,32) 和记录的通道（单声道、立体声）。

.wav 音频以比特深度大小交替写入或交错排列在数组中。（我认为它从左声道开始）

16kHz 16 位是一个短 []，每秒有 16,000 个音频条目

64kHZ 32 位是一个 int[] 与 64,000 " "

您可以平均从立体声到单声道的 16 位通道 (short[even]+short[odd])/2

你可以平均 16 位频率 128kHz 到 16kHz（8 比 1）短 [0,2,4,6,8,10,12,14]/8

平均低于 16kHZ 的频率可能听起来更糟

根据音频的量化方式（模拟到数字线性或对数 a-law/u-law/linear），您可能需要尝试不同的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T11:19:48.237

实现低通的最简单方法是平均多个样本。因此，如果您有 n 个样本，则可以执行以下操作：

```
// your sample data array
int[] samples
//number of samples you want to average
int AVERAGE_SAMPLE_COUNT = 3;

for(int i=0; i<samples.length-AVERAGE_SAMPLE_COUNT; i++){
    //variable for storing the values of multiple samples
    int avgSample = 0;
    for(int a=0; a<AVERAGE_SAMPLE_COUNT; a++){
        //add up the current and the next n samples
        avgSample += samples[i+a]
    }
    //devide by the number of samples to average them
    avgSample /= AVERAGE_SAMPLE_COUNT;
    //replace first sample with the averaged value
    samples[i] = avgSample
} 
```

如您所见，唯一的缺陷可能是输出变短了`AVERAGE_SAMPLE_COUNT`. 您可以通过更改 AVERAGE_SAMPLE_COUNT 轻松尝试不同强度的算法。此外，它正在就地工作，这意味着它会更改您的初始输入数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-08T15:23:56.947

另一种方法是在您的预处理阶段进行以下操作，

```
recorder.read(data, 0, data.length);
if(isAudible(data)) {
    // TODO further processing can go here
}

public static boolean isAudible(short[] data) {
    double rms = getRootMeanSquared(data);
    return (rms > 198 && 5600 > rms);
}

public static double getRootMeanSquared(short[] data) {
    double ms = 0;
    for (int i = 0; i < data.length; i++) {
        ms += data[i] * data[i];
    }
    ms /= data.length;
    return Math.sqrt(ms);
} 
```

# asp.net - C# Razor 语法的 VB 转换 - MVC

> ID：10382680
> 
> 赞同：3
> 
> 时间：2012-04-30T11:08:55.680
> 
> 标签：asp.net, asp.net-mvc-3

谁能告诉我这个的VB等价物是什么：

```
@model DateTime

Using Date Template 

@Html.TextBox("", String.Format("{0:d}", Model.ToShortDateString()), 
  new { @class = "datefield", type = "date"  }) 
```

我试过了：

```
@model DateTime 
```

使用日期模板

```
@Html.TextBox("", String.Format("{0:d}", Model.ToShortDateString()), New With {Key .class = "datefield", Key .type = "date"}) 
```

...但错误是：NullReferenceException 未被用户代码对象变量处理或未设置块变量。

它来自教程：[使用 HTML5 和 jQuery UI Datepicker Popup Calendar with ASP.NET MVC - Part 4](http://www.asp.net/mvc/tutorials/javascript/using-the-html5-and-jquery-ui-datepicker-popup-calendar-with-aspnet-mvc/using-the-html5-and-jquery-ui-datepicker-popup-calendar-with-aspnet-mvc-part-4)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T11:30:46.887

你能确定，你是从控制器向视图发送 NOT NULL 的 Model 实例吗？休息对我来说一切都很好。前任：

```
Function Index() As ActionResult
        ViewData("Message") = "Welcome to ASP.NET MVC!"

        Return View(New Employee()) 'See the : New Employee()'
End Function 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T11:27:32.833

代替@model，您可以尝试如下所示的ModelType，

```
 @ModelType DateTime

 @Html.ActionLink("Edit", "Edit", New With {.id = item.ID}) 
```

谢谢

迪普

# javascript - 屏幕过渡：如何始终从左向右移动

> ID：10382682
> 
> 赞同：0
> 
> 时间：2012-04-30T11:09:03.353
> 
> 标签：javascript, jquery, html, jquery-mobile, transition

我正在开发一个电话应用程序，屏幕顶部有两个按钮：“返回”和“下一步”。每当我单击下一个按钮时，屏幕都会从右向左移动，而在大多数情况下，我单击后退按钮，它都会从左向右移动；但是，每隔一段时间，单击“返回”就会从右到左转换。

这是我为后退按钮提供的代码：

.html

```
<a href="#" data-rel="back"  data-role="button" data-inline="true" data-transition="myTransition" data-direction="reverse">Back</a> 
```

.js

```
(function( $, undefined ) {

$.mobile.page.prototype.options.backBtnText  = "Back";
$.mobile.page.prototype.options.addBackBtn   = false;
$.mobile.page.prototype.options.backBtnTheme = null;
$.mobile.page.prototype.options.headerTheme  = "a";
$.mobile.page.prototype.options.footerTheme  = "a";
$.mobile.page.prototype.options.contentTheme = null;

$( document ).delegate( ":jqmData(role='page'), :jqmData(role='dialog')", "pagecreate", function( e ) {

var $page = $( this ),
    o = $page.data( "page" ).options,
    pageRole = $page.jqmData( "role" ),
    pageTheme = o.theme;

$( ":jqmData(role='header'), :jqmData(role='footer'), :jqmData(role='content')", this ).each(function() {
    var $this = $( this ),
        role = $this.jqmData( "role" ),
        theme = $this.jqmData( "theme" ),
        contentTheme = theme || o.contentTheme || ( pageRole === "dialog" && pageTheme ),
        $headeranchors,
        leftbtn,
        rightbtn,
        backBtn;

    $this.addClass( "ui-" + role ); 

    //apply theming and markup modifications to page,header,content,footer
    if ( role === "header" || role === "footer" ) {

        var thisTheme = theme || ( role === "header" ? o.headerTheme : o.footerTheme ) || pageTheme;

        $this
            //add theme class
            .addClass( "ui-bar-" + thisTheme )
            // Add ARIA role
            .attr( "role", role === "header" ? "banner" : "contentinfo" );

        // Right,left buttons
        $headeranchors  = $this.children( "a" );
        leftbtn = $headeranchors.hasClass( "ui-btn-left" );
        rightbtn = $headeranchors.hasClass( "ui-btn-right" );

        leftbtn = leftbtn || $headeranchors.eq( 0 ).not( ".ui-btn-right" ).addClass( "ui-btn-left" ).length;

        rightbtn = rightbtn || $headeranchors.eq( 1 ).addClass( "ui-btn-right" ).length;

        // Auto-add back btn on pages beyond first view
        if ( o.addBackBtn && 
            role === "header" &&
            $( ".ui-page" ).length > 1 &&
            $this.jqmData( "url" ) !== $.mobile.path.stripHash( location.hash ) &&
            !leftbtn ) {

            backBtn = $( "<a href='#' class='ui-btn-left' data-"+ $.mobile.ns +"rel='back' data-"+ $.mobile.ns +"icon='arrow-l'>"+ o.backBtnText +"</a>" )
                // If theme is provided, override default inheritance
                .attr( "data-"+ $.mobile.ns +"theme", o.backBtnTheme || thisTheme )
                .prependTo( $this );                
        }

        // Page title
        $this.children( "h1, h2, h3, h4, h5, h6" )
            .addClass( "ui-title" )
            // Regardless of h element number in src, it becomes h1 for the enhanced page
            .attr({
                "tabindex": "0",
                "role": "heading",
                "aria-level": "1"
            });

    } else if ( role === "content" ) {
        if ( contentTheme ) {
            $this.addClass( "ui-body-" + ( contentTheme ) );
        }

        // Add ARIA role
        $this.attr( "role", "main" );
    }
});
});

})( jQuery ); 
```

编辑：

这是我创建的过渡

```
function myTransitionHandler( name, reverse, $to, $from ) {

var deferred = new $.Deferred(),
    reverseClass = reverse ? " reverse" : "",
    viewportClass = "ui-mobile-viewport-transitioning viewport-" + name,
    doneFunc = function() {

        $to.add( $from ).removeClass( "out in reverse " + name );

        if ( $from && $from[ 0 ] !== $to[ 0 ] ) {
            $from.removeClass( $.mobile.activePageClass );
        }

        $to.parent().removeClass( viewportClass );

        deferred.resolve( name, reverse, $to, $from );
    };

$to.animationComplete( doneFunc );

$to.parent().addClass( viewportClass );

if ( $from ) {
    $from.addClass( name + " out" + reverseClass );
}
$to.addClass( $.mobile.activePageClass + " " + name + " in" + reverseClass );

return deferred.promise();
}

// Make our transition handler public.
$.mobile.transitionHandlers["myTransition"] = myTransitionHandler; 
```

单击后退按钮时，我可以添加任何代码以使屏幕始终从左向右移动吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T12:35:39.493

jQuery mobile 似乎只允许您指定一个转换（[参见此处](http://jquerymobile.com/demos/1.1.0/docs/pages/page-transitions.html)`data-direction="reverse"`），然后在您指定属性时为其相反的方向编程。

我也遇到过这种行为，即后退按钮（甚至是浏览器的后退按钮）有时会触发“向前作用”转换。我不是如何去改变这个/强制一个按钮总是在同一个方向上转换。

[但是，设置您自己的转换](http://jquerymobile.com/demos/1.1.0/docs/pages/page-customtransitions.html)可能会有一些希望。如果您要这样做（我没有这样做），那么您可能能够应用一个只向一个方向移动的过渡，无论 jQuery mobile 认为它是正向还是反向，也不管`data-direction`属性如何。

```
.my.slide.out {
    -webkit-transform: translateX(-100%);
    -moz-transform: translateX(-100%);
    -webkit-animation-name: slideouttoleft;
    -moz-animation-name: slideouttoleft;
}
.my.slide.in {
    -webkit-transform: translateX(-100%);
    -moz-transform: translateX(-100%);
    -webkit-animation-name: slideouttoleft;
    -moz-animation-name: slideouttoleft;
} 
```

然后将这些过渡应用到您的后退按钮。

# javascript - 在 jquery 的 $.get 回调函数中使用文件名

> ID：10382684
> 
> 赞同：0
> 
> 时间：2012-04-30T11:09:16.123
> 
> 标签：javascript, jquery, ajax, get

我使用[$.get()](http://api.jquery.com/jQuery.get/)函数来处理很多文件，我需要从它的回调函数中找出我正在调用的文件名。有没有办法做到这一点？

```
while (allFilesToImport.length > 0) {
    var fileToOperate = allFilesToImport.shift();
    var jqxhr = $.get(path + '/' + fileToOperate,
        function(data, textStatus, jqXHR){ // here I need the fileToOperate variable!}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T11:23:11.887

你可以访问你`fileToOperate`的`mypathToTheFile`函数，这就是闭包很棒的原因之一。

这是一个带有循环的示例，以防万一：

```
var filenames = ['a', 'b', 'c'];
for(var i = 0; i < filenames.length; i++) {
    (function(filename) {
        $.get('whatever/'+filename, function(data) {
            // here you can use filename and it will point to the correct value
        });
    })(filenames[i]);
} 
```

您还可以使用`$.each()`迭代数组：

```
$.each(filenames, function(i, filename) {
    $.get('whatever/'+filename, function(data) {
        // here you can use filename and it will point to the correct value
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T11:23:47.827

有一个简单的解决方案。JAvaScript 支持闭包，这意味着您可以在作为回调传递给 $.get 的函数值内使用函数范围之外的变量（以及传递函数值的其他任何地方）

```
var mypathToTheFile = path + '/' + fileToOperate;
var jqxhr = $.get(mypathToTheFile, 
                  function(data, textStatus){ 
                      // here you simply use the mypathToTheFile variable!
                 }); 
```

使用闭包时需要注意一些奇怪的事情。对函数范围之外的变量所做的任何更改都将反映在函数内部。例如

```
var functionValues = [],i,j;
for(i=0;i<10;i+=1){
    j = new String(i);
    functionValues[i] = function(){alert(j);};
}

for(i=0;i<10;i+=1){
    functionValues[i](); //this will alert 9 every time
} 
```

将警告 9 10 次，而不是您预期的 0,1,2,3,4,5,6,7,8,9

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-30T11:24:14.823

只需在回调函数中使用此变量即可。它将从外部范围获取变量的值。

```
var mypathToTheFile = path + '/' + fileToOperate;
var jqxhr = $.get(mypathToTheFile, function(data, textStatus){ 
// here I need the mypathToTheFile variable!
     do_something(mypathToTheFile);
}); 
```

# db2 - DB2 将一个大的 CLOB (> 32KB) 转换为文本？

> ID：10382686
> 
> 赞同：7
> 
> 时间：2012-04-30T11:09:17.393
> 
> 标签：db2, varchar, clob

我有一个 DB2 (9.5.1) 表，定义如下：

```
CREATE TABLE MY_TABLE 
( 
   ID INTEGER DEFAULT 0 NOT NULL, 
   TEXT CLOB(104857600), 
   PRIMARY KEY (ID) 
); 
```

现在，如果我想查询存储在 CLOB 中的实际文本字符串，我会这样做：

```
select cast(t.TEXT as varchar(32000))
  from MY_TABLE t
  where t.ID = 1; 
```

现在的问题是我的文本被截断了，但是对于*varchar*，最大长度是 32KB，所以这个查询失败了：

```
select cast(t.TEXT as varchar(33000))
  from MY_TABLE t
 where t.ID = 1; 
```

还有另一种可能性，我可以将 CLOB 的全部内容检索为文本输出吗？

彼得

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-07-11T07:59:12.450

我在网上的其他地方发现了这个，并认为我会分享看到它在 32k 限制附近工作。

```
SELECT 
  XMLCAST (
    XMLPARSE (
      DOCUMENT CAST (
        MY_CLOB_DATA AS BLOB
      ) 
      PRESERVE WHITESPACE
    ) as XML
  ) 
FROM 
MY_TABLE
WHERE ID = 1 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-14T22:22:17.160

在类似的情况下，我必须检索 xml 数据，这对我有用

```
select my_id, cast(xmlserialize(my_column as clob(1m)) as varchar(20000)) from schema.my_table where my_id  =  463 
```

早些时候我可以在没有 CAST 的情况下在 squirrel sql 中做到这一点，但最新版本我必须使用演员表

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-25T18:29:32.193

据我所知，如果您像描述的那样在 SQL 选择中使用它，则无法绕过 32k 限制。

如果您使用 JDBC 来检索数据，而不是在结果集上使用 getString()，您将获得一个 CLOB 句柄，并且您可以从中获得一个流。

另一方面，真的是极限吗？您真的在 where 子句等中使用 CLOB 吗？RDBMS 针对较小的行大小进行了优化，以便在事务中有效地处理。

一般来说，流式传输数据。考虑重新设计您的数据模型，如果此 CLOB 包含可以拆分为多个列的数据，并且您的查询中需要它的一些数据（其中...，按...排序等）。

# iphone - 框架未在旋转中设置

> ID：10382693
> 
> 赞同：0
> 
> 时间：2012-04-30T11:10:00.700
> 
> 标签：iphone, cocoa-touch, ipad, uiview, uisplitviewcontroller

我创建了一个应用程序。在该应用程序中，我使用了 UIsplitDetailview 和简单的视图控制器。

我的问题是，如何在横向和纵向模式下设置 uiview 框架。UIsplitviewcontroller 仅在横向模式下。

问题是，当我改变 ipad 的方向时，uiview 设置为 null -

```
(void)willRotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration
{
[self.view setFrame:CGRectMake(0, 0, 768,1024)]; 
[formulaScrollView setFrame:CGRectMake(0, 0,700,700)]; 
[formulaView setFrame:CGRectMake(0, 0, 768,1024)]; 
self.view.bounds=CGRectMake(0, 0,768,1024);
} 
```

# google-docs-api - 谷歌文档上传文件时间戳

> ID：10382706
> 
> 赞同：2
> 
> 时间：2012-04-30T11:10:22.480
> 
> 标签：google-docs-api, google-drive-api

我使用 google docs api (Python) 并使用元数据描述字段来保留原始文件的日期和时间。我尝试了谷歌驱动客户端应用程序，发现它保留了上传文件的原始时间戳，然后谷歌文档 api 允许查看它。现在是否可以使用 google docs API 设置文件日期和时间？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T23:01:09.797

使用 Google Document List API 上传或修改文件时，应自动填写文件条目的`updated`和属性。`published`您只需要读取这些值即可。

# javascript - 谷歌地图圆圈覆盖 - 固定大小

> ID：10382708
> 
> 赞同：0
> 
> 时间：2012-04-30T11:10:32.073
> 
> 标签：javascript, google-maps-api-3

我正在尝试在我的 mvc 项目中的地图上添加一个圆圈叠加层，但如果用户放大或缩小地图，我希望圆圈保持相同的大小 - 有人知道这是否可能吗？目前，这就是我显示我的圈子的方式，为每个圈子赋予不同的颜色。

```
var mapCircle;
var count = 0;

var colours = [];
@foreach (string s in arrColours)
{
    <text>colours.push('@s');</text>;
}

for (var point in map) {   
    var circle = {
        strokeColor: '#777777',
        strokeOpacity: 0.8,
        strokeWeight: 1,
        fillColor: colours[count],
        fillOpacity: 0.8,
        map: map,
        center: pointMap[point].coords,
        radius: 70000
    };
    mapCircle = new google.maps.Circle(circle);
    count++;
} 
```

我有连接这些点的折线，当您在地图上放大时它们保持固定宽度，但是当您放大时圆圈会增加，这不符合它的目的。我知道我可以使用图像作为标记，但如果可以的话，我宁愿只使用一个圆圈。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T13:57:21.750

这是可能的，但可能不容易做到。您需要检查地图缩放变化并使用大圆距离公式以米为单位重置圆的半径。

```
 google.maps.event.addListener(map, 'zoom_changed', resetRadius); 
```

下面的问题和答案描述了如何为地图执行此操作，但应该适用于圆圈。Circle 有 getBounds() 和 setRadius() 方法。

[谷歌地图 v3 中“可见”区域的半径](https://stackoverflow.com/q/3525670/1211981)

[https://stackoverflow.com/a/3527136/1211981](https://stackoverflow.com/a/3527136/1211981)

# string - Matlab中的字符串startWith

> ID：10382713
> 
> 赞同：5
> 
> 时间：2012-04-30T11:10:48.093
> 
> 标签：string, matlab-deployment

我只想得到 string 的开头，是否有一个等效的 matlab 可以说：startsWith('It-is') 就像在 java 中一样？

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-01T12:20:26.070

您可以使用该[`strfind`](http://www.mathworks.com/help/techdoc/ref/strfind.html)函数来判断一个字符串是否以另一个字符串开头。该函数返回您要查找的字符串每次出现的起始索引，如果未找到该字符串，则返回一个空数组。

```
S = 'Find the starting indices of the pattern string';
strfind(S, 'It-is') 
```

如果字符串以 开头，`'It-is'`则返回的数组的第一个索引为`strfind`1（即第一个字符的索引）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-09-15T15:02:31.983

对于长字符串，这样做更快

```
s = (numel(a)>=numel(b)) && all(a(1:min(numel(a),numel(b)))==b(1:min(numel(a),numel(b)))); 
```

为了有等价于`a.startsWith(b)`。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-02-25T12:33:56.773

The option that works best for me is:

```
~isempty(regexp(s, '^It-is', 'once')) 
```

The ~isempty allows you to use the expression with logical ORs or ANDs like this:

```
if ~isempty(regexp(s, '^It-is', 'once')) || ~isempty(regexp(s, '^It-was', 'once')) 
```

The 'once' parameter is an optimization to ensure you don't keep scanning the string once you have found the match at the beginning.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-28T14:57:17.167

strfind 的问题在于它返回一个非标量结果，这限制了您可以使用它的位置。更直接的方法是像这样使用正则[表达式，](http://www.mathworks.com/help/matlab/ref/regexp.html)

```
s = 'It-is true.';
if regexp(s, '^It-is')
  disp('s starts with "It-is"')
end 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-06-20T12:13:27.150

我想补充一点，如果 s 是一个单元格，那么 regexp 和 strfind 返回一个[单元格数组](http://www.mathworks.com/help/matlab/cell-arrays.html)。
在这种情况下，您可以使用两种变体之一：

```
pos = strfind(s, 'It-iss');
if (~isempty(pos{1,1}))
    disp('s starts with "It-is"')
end 
```

或者

```
pos = regexp(s, '^It-is');
if (~isempty(pos{1,1}))
    disp('s starts with "It-is"')
end 
```

您不能直接将`regexp`or的返回值`strfind`转换为 bool，因为如果没有匹配项，它们会返回，`regexp`并`strfind`返回一个带有空单元格的[单元格数组](http://www.mathworks.com/help/matlab/cell-arrays.html)`{[]}`。要访问第一个单元格，您需要使用大括号运算符`pos{1,1}`。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-09-21T13:37:59.627

从Matlab2016b开始，有一个[startsWith](https://fr.mathworks.com/help/matlab/ref/startswith.html)函数：

```
startsWith(your_string, 'It-is') 
```

在以前的版本中，您可以使用[Bill the Lizard 的答案](https://stackoverflow.com/a/10397558/7456923)来制作自己的功能：

```
matches = strfind(your_string, 'It-is');
string_starts_with_pattern = ~isempty(matches) && matches(1) == 1; 
```

# ruby-on-rails - 如何处理 Rspec 中的 Mongoid::Errors::DocumentNotFound？

> ID：10382720
> 
> 赞同：2
> 
> 时间：2012-04-30T11:11:10.823
> 
> 标签：ruby-on-rails, mongodb, rspec, mongoid

我有一个带有以下代码的 ArticleController：

```
def edit
  @article = current_user.articles.find(params[:id])
end 
```

以及以下测试：

```
describe "GET 'edit'" do
  it "should fail when signed in and editing another user article" do
    sign_in @user
    get :edit, :id => @another_user_article.id
    response.should_not be_success
  end
end 
```

但是，当我开始测试时，我收到以下错误（这是正常的），但我想知道如何处理以便我的测试可以通过？

```
Failure/Error: get :edit, :id => @another_user_article.id
Mongoid::Errors::DocumentNotFound:
   Document not found for class Article with id(s) 4f9e71be4adfdcc02300001d. 
```

我想过用这个来改变我的控制器方法，但这对我来说似乎不合适：

```
def edit
  @article = Article.first(conditions: { _id: params[:id], user_id: current_user.id })
end 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-30T11:36:19.507

您可以决定在这种情况下您的代码要做的正确事情是引发异常，因此将您的规范更改为

```
expect { get :edit, :id => @another_user_article.id}.to raise_error(Mongoid::Errors::DocumentNotFound) 
```

或者您可以决定在这种情况下您的控制器应该做什么是显式地呈现 404: 在控制器级别救援异常（在操作中或通过`rescue_from`），在这种情况下，您的规范应该按原样通过。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T11:23:00.450

在这里，您没有创建对象@another_user_article。首先为 another_user_article 模型加载夹具，然后在部分场景之前创建此对象。

# ejb-3.0 - Spring-Data (JPA) with EJB3(javax) without Springframework JBOSS AS7

> ID：10382721
> 
> 赞同：0
> 
> 时间：2012-04-30T11:11:13.170
> 
> 标签：ejb-3.0, spring-data

以下情况。我想使用 spring-data 因为我喜欢 Domain JpaRepository(interface) 系统。

但是，我不想使用 Spring-Framework 本身。我想坚持 javax.* ejb3 规范

我正在尝试设置项目配置。

我有一个代表持久层的 spring-data-jpa 项目。我使用@Stateless 而不是弹簧@Service 和@Inject 而不是@autowired（因为我听说那里有同义词。持久层内的Accountservice 仅用于测试目的。

```
PersistanceModule(Eclipseproject)
|
|-com.ns.persistance
|   |-domain
|       |-Account
|   |-repository
|       |-AccountRepository (JpaRepositry interface)
|   |-test
|       |-AccountService (which contains a method do save a user in the database) 
```

帐户存储库

```
public interface AccountRepository extends JpaRepository<Account, Long> { 

    Account findByUsername(String username);

} 
```

用于测试目的的帐户服务。

```
@Stateless
public class AccountService {

    @Inject
    private AccountRepository ar;

    public void createTestAccount() {
        Account account = new Account();
        account.setUsername("testAccount");
        account.setPassword("sicheres passwort");
        account.setEmail("kks.cs@web.de");
        account.setCreationTime(new Date());
        account.setLastModificationDate(new Date());

        account = ar.save(account);

    }
} 
```

测试弹簧数据的工作

```
@Singleton
public class SSService {

    @EJB
    AccountService as;

    @Schedule(minute = "*/5", hour = "*", persistent = false)
    public void doWork() {

        System.out.println("WorkJob!!!!!!!");
        //as.createTestAccount();

    }

} 
```

我有一个 spring-data-config.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<beans 
   xmlns="http://www.springframework.org/schema/beans" 
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
   xmlns:jpa="http://www.springframework.org/schema/data/jpa"
   xsi:schemaLocation="
      http://www.springframework.org/schema/beans 
      http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
      http://www.springframework.org/schema/data/jpa 
      http://www.springframework.org/schema/data/jpa/spring-jpa.xsd">

    <jpa:repositories base-package="com.ns.persistence.repository" />

</beans> 
```

JBoss 一直告诉我 AccountService 为 NULL（Nullpointer）。我相信我忘了设置一些配置，但我无法掌握它，谷歌搜索不断让我得到简单的 Springframework 解决方案。我的问题：我错过了什么？spring 数据是否适用于 EJB(javax) 或者我是否需要使用 springframework。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T17:10:30.660

只是为了确保你做对了。要使用 Spring Data JPA，您需要使用 Spring 框架。您不一定需要使用容器（XML 配置、容器设置），但您需要应用程序类路径上的 Spring JAR。

从版本 1.1.0.RC1（已经发布）开始，Spring Data JPA 项目支持在 CDI 容器中运行，而 JBoss AS7 就是其中一个实例。因此，有了刚才提到的版本的 Spring Data JPA，这应该可以工作。然后不需要 Spring 配置文件，只需要`beans.xml`CDI 指定的空文件。

如果您使用的是早期版本，则必须编写一些代码来自己实例化存储库实例：

```
 @Stateless
 class YourService {

   @PersistenceContext
   private EntityManager em;

   private AccountRepository repository

   @PostConstruct
   public void init() {
      RepositoryFactorySupport factory = new JpaRepositoryFactory(em);
      this.repository = factory.getRepository(AccountRepository.class);
   }
} 
```

将该代码放入一个公共组件中并让该实例注入服务然后避免在每个服务实现中重写此设置代码可能是有意义的。正如我上面提到的：在即将到来的 1.1.0 版本中，这将是开箱即用的。

# c++ - SHBindToParent，获取父pidl

> ID：10382722
> 
> 赞同：0
> 
> 时间：2012-04-30T11:11:13.990
> 
> 标签：c++, winapi, windows-shell

我正在实施类似 Windows-Explorer-view 的方法。

首先，我通过获取桌面 pidl`SHGetSpecialFolderLocation(NULL, CSIDL_DESKTOP, &pidl)`并将其存储在类属性中。在我`IShellBrowser::BrowseObject`被调用后，我用 pidl 覆盖属性是通过这个方法传递的。如果我想上去，我调用 call `SHBindToParent`，将存储的 pidl 传递给它，但我得到了`E_INVALIDARG`或者桌面 pidl。我怀疑我在其中传递了错误的 PIDL。

我应该如何让父母 PIDL 正确？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T16:26:57.820

```
// C#
 [System.Runtime.InteropServices.DllImportAttribute("shell32.dll", EntryPoint="ILRemoveLastID")]
    [return: System.Runtime.InteropServices.MarshalAsAttribute(System.Runtime.InteropServices.UnmanagedType.Bool)]
public static extern  bool ILRemoveLastID(System.IntPtr pidl) ;

} 
```

# css - css 支持从右到左查看幻灯片

> ID：10382726
> 
> 赞同：0
> 
> 时间：2012-04-30T11:11:30.640
> 
> 标签：css, drupal, themes

我想在我的幻灯片中支持从右到左的图像转换。我在 style.css 中的 CSS 视图幻灯片代码：

```
$.block-slideshow .view-content {
position:relative;
background:red;
padding: 2px 5px 5px 7px;
}
.block-slideshow .views_slideshow_thumbnailhover_main img {
float: left;
}
.block-slideshow .views-slideshow-controls-bottom {
 position:absolute; 
 top:5px;
 right:5px; 
 list-style:none; 
 padding:0;
 margin:0; 
 width:310px;
z-index:100;
}
.block-slideshow .views_slideshow_thumbnailhover_div_breakout_teaser {
 padding:5px 10px 0 45px;
 margin:0;  
 background:#6A99AD url(../images/slideshow-nav-bullet.png) no-repeat scroll 0 0;
 height:41px;
 border-bottom: 1px dashed #fff;
}
.block-slideshow .views_slideshow_thumbnailhover_div_breakout_teaser:hover {
 cursor:pointer;
}
.block-slideshow .views-slideshow-controls-bottom .activeSlide {
 background:#024D76 url(../images/slideshow-nav-bullet.png) no-repeat scroll 0 0;
list-style: disc;
}
.block-slideshow .view-slideshow .views-field-title {
 color:#FFF;
font-size:120%;
font-weight:bold;
}
.block-slideshow .view-slideshow .views-field-body {
  color:#FFF;
  font-size:100%;
}
.block-slideshow .view-slideshow .views-field-body p {
 margin:0!important;
 } 
```

请访问此链接 [http://i.stack.imgur.com/sMdc1.jpg](http://i.stack.imgur.com/sMdc1.jpg)

请指导我我想在视图幻灯片中支持从右到左的转换。样式-rtl：？

请访问此链接

[http://i.stack.imgur.com/s23XY.jpg](http://i.stack.imgur.com/s23XY.jpg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T10:39:02.103

在 style-rtl.css 中添加此代码]

```
$.block-slideshow .views-slideshow-controls-bottom {
 position:absolute; 
 top:5px;
 right:605px; 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T11:17:22.497

更改浮动，将“left”替换为“right”，反之亦然

```
.block-slideshow .views_slideshow_thumbnailhover_main img {
float: right;
} 
```

# c# - LinearGradientBrush 颜色绑定（简单条形图ItemsControl）

> ID：10382727
> 
> 赞同：3
> 
> 时间：2012-04-30T11:11:32.340
> 
> 标签：c#, wpf, itemscontrol, lineargradientbrush

**编辑：** 我将十六进制值（字符串）转换为画笔，因此它没有采用我的颜色，如下所示：

```
(Color)ColorConverter.ConvertFromString(colorArray[0]) 
```

剩下的唯一问题是缩放（带有颜色）。

我的彩条似乎是透明的（再次），但现在每个条都附加了正确的颜色。*同样在我的程序启动时，所有 6 个条都显示（但它们不应该显示，因为它还没有任何价值）。* **代码：**

```
<Border Height="30" Margin="15" Grid.RowSpan="6" >
                <Border.Background>
                    <LinearGradientBrush StartPoint="0.0,0" EndPoint="1.0,0">
                        <GradientStopCollection>
                            <GradientStop Offset="0.0" Color="{Binding FillBar, UpdateSourceTrigger=PropertyChanged}" />

                            <GradientStop Offset="{Binding Value, UpdateSourceTrigger=PropertyChanged}" />

                        </GradientStopCollection>
                    </LinearGradientBrush>
                </Border.Background>
            </Border> 
```

![在此处输入图像描述](../Images/0fd134ec940e0bf6add7bc6a1b3a0337.png)

我究竟如何摆脱酒吧中间/末端的透明褪色？

当我尝试向第二个偏移添加相同的颜色时，我得到全长条（100％）并且缩放再次无效。

* * *

我有以下带有 DateTemplate 的 ItemsControl，它表示一个简单的条形图：

```
<ItemsControl x:Name="icGrafiek"  
            Margin="0,0,0,0" 
            ItemsSource="{Binding Source={StaticResource Grafiek}}"
            ItemTemplate="{DynamicResource GrafiekItemTemplate}" 
            RenderTransformOrigin="1,0.5" Grid.RowSpan="6" Grid.Column="1"/>

<DataTemplate x:Key="GrafiekItemTemplate">
            <Grid>
            <Border Height="30" Margin="15" Grid.RowSpan="6" >
                <Border.Background>

                    <LinearGradientBrush StartPoint="0.0,0" EndPoint="1.0,0">
                        <GradientStopCollection>
                            <GradientStop Offset="0.0" Color="#fff" />

                            <GradientStop Offset="{Binding Value, UpdateSourceTrigger=PropertyChanged}" 
                                          Color="{Binding Fill, UpdateSourceTrigger=PropertyChanged}" />

                            <GradientStop Offset="{Binding Value, UpdateSourceTrigger=PropertyChanged}" 
                                          Color="{Binding Fill, UpdateSourceTrigger=PropertyChanged}" />                                                          
                        </GradientStopCollection>
                    </LinearGradientBrush>                
                </Border.Background>
            </Border>
        </Grid>
    </DataTemplate> 
```

问题实际上是显示我的图表控件条的颜色。

将显示以下内容： ![渐变画笔](../Images/0994b8f0d6b18715f4ce923be11d753a.png)

在`GradientBrush`我使用 a`Rectangle`代替之前创建条形图。我使用了 GradientBrush，所以我可以**缩放**我的条形图（`Binding` **Value**返回一个值在 1.0 和 0 之间的列表，因此它们被缩放了）。*对于一个矩形，我被卡住了，无法根据返回的 1.0 - 0 值缩放我的条形图。*

*旧代码`Rectangle`：*

```
 <DataTemplate x:Key="GrafiekItemTemplate">
            <Grid>
                <Rectangle StrokeThickness="0" Height="30"  
                           Margin="15" 
                           HorizontalAlignment="Left" 
                           VerticalAlignment="Stretch"
                           Width="{Binding Value, UpdateSourceTrigger=PropertyChanged}" 
                           Fill="{Binding Fill, UpdateSourceTrigger=PropertyChanged}">
                    <Rectangle.LayoutTransform>
                        <ScaleTransform ScaleX="20" />
                    </Rectangle.LayoutTransform>
                </Rectangle>
            </Grid>
    </DataTemplate> 
```

* * *

当我使用带有填充绑定的矩形时，我的图表看起来像这样（就像它应该的那样）：**填充** `Binding`基本上返回一个包含十六进制值的列表来获取这些颜色。

![长方形](../Images/87835cbd753e6a4c0d902c657690a0a6.png)

* * *

如何`LinearGradientBrush`用上图中显示的颜色填充（保存颜色的十六进制值的数组）？颜色的顺序保持不变。

**或者，如果这是不可能的，我该如何用矩形把它拉下来？如果有其他矩形解决方案，我可以再次实现。**

最好的问候彼得P。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T17:30:04.663

彼得，

在矩形中，您使用数据的 Fill 属性绑定到矩形的 Fill 属性。它们都是Brush类型（或派生类型）

在渐变停止的情况下，它需要一个 Color 对象，而不是画笔，因此您可以创建另一个 Color 类型的数据属性。

# java - SQL 连接客户端信息

> ID：10382728
> 
> 赞同：0
> 
> 时间：2012-04-30T11:11:36.160
> 
> 标签：java, sql, database-connection

我正在编写一个 Java 应用程序，我在其中连接到一个 DB2 数据库，并且在获得连接后，我正在使用以下代码为该连接设置客户端信息：

```
String clientprogname = "MY PROGRAM";  //Progname
String clientname = "user1";  // The name of the End-User

con.setClientInfo("ApplicationName", clientprogname);
con.setClientInfo("ClientUser", clientname);

con.prepareStatement("SELECT * FROM SYSIBM.SYSDUMMY1 WHERE 0 = 1").executeQuery();
// Execute SQL to force extended client information to be sent to the server

LogFile.log("ApplicationName: " + con.getClientInfo("ApplicationName"));
LogFile.log("ClientUser: " + con.getClientInfo("ClientUser")); 
```

我知道我可以使用 获取客户信息`con.getClientInfo`，但是客户信息是否存储在数据库中？根据[Java 文档](http://docs.oracle.com/javase/6/docs/api/java/sql/Connection.html#setClientInfo%28java.lang.String,%20java.lang.String%29)，客户端信息存储在数据库中的适当位置（例如，在特殊寄存器、会话参数或系统表列中）。是否有可以执行的 SQL 语句来查看所有打开连接的列表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T11:39:46.363

对数据存储位置的支持`getClientInfo`和数据存储位置取决于数据库。您将需要检查驱动程序和数据库文档，以了解如何为您的数据库/驱动程序处理它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T17:54:35.007

据此，您可以从特殊寄存器中获取它，这是一个[引用](http://publib.boulder.ibm.com/infocenter/db2luw/v9/index.jsp?topic=/com.ibm.db2.udb.admin.doc/doc/r0005865.htm)相同内容的较旧[主题。](https://stackoverflow.com/questions/261512/how-to-find-all-open-active-connections-in-db2-8-x)

编辑：

这也是一个很好的链接，列出了许多有用的语句[dbForums](http://www.dbforums.com/db2/1642489-db-usage-statistics.html)

# javascript - 如何使用 GMAP3 jQuery 插件更改 Google Maps API 的最大缩放？

> ID：10382730
> 
> 赞同：1
> 
> 时间：2012-04-30T11:11:43.663
> 
> 标签：javascript, google-maps, jquery-gmap3

如何使用 GMAP3 jQuery 插件更改 Google Maps API 的最大缩放？

这个东西有 {} 设置吗？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T12:01:09.497

If it is not possible with GMAP3, you can still directly use the Google api:

```
map.setOptions({maxZoom: 10}); 
```

# php - 如何从 .NET 脚本接收 POST 数据

> ID：10382732
> 
> 赞同：4
> 
> 时间：2012-04-30T11:12:02.933
> 
> 标签：php, .net, post

我正在与一家公司合作，该公司制作了一个脚本以将 POST 数据发送到我的 PHP 脚本（所有设置和端口都正确转发等）。

问题是，他们说我的脚本没有设置为处理 POST 请求。

这是他们的脚本：

尝试

```
 strPost = strPost.Trim.Replace(" ", "%20")

        Dim objRequest As HttpWebRequest = WebRequest.Create(strPostURL)

        objRequest.Method = "POST"

        objRequest.ContentLength = strPost.Length

        objRequest.ContentType = "application/x-www-form-urlencoded"

        Try

            myWriter = New StreamWriter(objRequest.GetRequestStream())

            myWriter.Write(strPost)

        Catch eg As Exception

        Finally

            myWriter.Close()

        End Try

        Dim objResponse As HttpWebResponse = objRequest.GetResponse()

        Dim sr As StreamReader

        sr = New StreamReader(objResponse.GetResponseStream())

        success = sr.ReadToEnd()

        sr.Close()

        success = "Post Successful"

    Catch ex As Exception

        success = ex.ToString

    End Try 
```

这是我的：

```
<?PHP

$website = $_POST['web'] ;
$name = $_POST['name'] ;
$tel = $_POST['tel'] ;
$town = $_POST['town'] ;

foreach($_POST as $key => $thisOne){
$out .= $key . ': ' . $thisOne ;
}
if($out)
mail('test@test.com', 'Test', $out) ;
?> 
```

我不确定我的脚本没有设置为处理 POST 数据是什么意思，因为 $_POST 是正确的使用 no？

* * *

谢谢你的回复，我是这么想的，但他坚持认为我的剧本有问题。

这是他说他得到的错误：

![.NET 错误](../Images/2ba52963d02613870a99eea0851f866c.png)

* * *

他告诉我他仍然得到那个错误并且：

我们使用的代码适用于 Sales Force、Sage 和我们之前完成的 7 个其他自定义 CRM 集成。

:(

* * *

谢谢，我发现[http://apikitchen.com/](http://apikitchen.com/)可以让我正确地测试它并且它恢复正常。谢谢你的帮助！一定是你说的他。

* * *

他现在告诉我他遇到了一个新错误！

![在此处输入图像描述](../Images/e27852304a817d5e48553dc165f7c98d.png)

* * *

他刚刚给我发了以下内容，任何有 .NET 经验的人都可以看出代码有什么问题吗？：

```
Try
strPost = "name=lf&town=london&country=uk&web=www.lf.com&tel=0123456789&keywords=sales&pages=5&multivisit=multihitdt=2012/04/30%2014:31referrer=google&landing=home"

        strPost = strPost.Trim.Replace(" ", "%20")

        Dim objRequest As HttpWebRequest = WebRequest.Create("http://mysite.dyndns-remote.com/myscript.php")

        objRequest.Method = "POST"

        objRequest.ContentLength = strPost.Length

        objRequest.ContentType = "application/x-www-form-urlencoded"

        Try

            myWriter = New StreamWriter(objRequest.GetRequestStream())

            myWriter.Write("name=lf&town=london&country=uk&web=www.lf.com&tel=0123456789&keywords=sales&pages=5&multivisit=multihitdt=2012/04/30%2014:31referrer=google&landing=home")

        Catch eg As Exception

        Finally

            myWriter.Close()

        End Try

        Dim objResponse As HttpWebResponse = objRequest.GetResponse()

        Dim sr As StreamReader

        sr = New StreamReader(objResponse.GetResponseStream())

        success = sr.ReadToEnd()

        sr.Close()

        success = "Post Successful"

    Catch ex As Exception

        success = ex.ToString

    End Try 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T11:23:18.997

他传递给 Web 请求的 URI 似乎无效（异常表示它为空）。这是`strPostURL`您在此处显示的堆栈跟踪图像的最后一行中的参数。

告诉他打电话时使用正确的 URL `SalesForcePost.fncPost`，一切都会好起来的。

这绝不是你的错，与你没有正确处理 POST 没有任何关系。这是他的错。告诉他，如果他不相信你，把他送到这里给我们看一些代码。

**编辑**
至于新的错误：同样的事情。他没有传递有效的 URI 字符串。这可能是因为他传递了“htt://sometest.com”或“http:/sometest.com”之类的内容。`fncPost`除非您发布所有必要的代码以查看如何调用该方法以及该方法的大部分代码`fncPost`- 至少是他创建 Web 请求的部分，否则我们无法为您提供任何进一步的帮助。

您发布的代码不是他的真实代码，否则他不会得到“URI 方案无效”异常。

# eclipse-rcp - 基于活动工作台页面禁用 Eclipse 命令处理程序

> ID：10382735
> 
> 赞同：0
> 
> 时间：2012-04-30T11:12:35.950
> 
> 标签：eclipse-rcp, eclipse-plugin

我是 Eclipse 插件开发的新手，如果活动的工作台窗口不是`.js`或`.html`文件，我正在尝试禁用菜单项的命令处理程序。

我发现当它不是文本编辑器时禁用它的代码如下：

```
<activeWhen>
    <with variable="activeEditorId">
       <equals value="org.eclipse.ui.DefaultTextEditor"/>
    </with>
</activeWhen> 
```

我想要 javascript 和 html 编辑器的类似功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T10:20:26.097

这可以通过使用如下定义来完成：

```
<extension point="org.eclipse.core.expressions.definitions">
        <definition id="example.definitions.sampleDefinition">
          <adapt type="org.eclipse.core.resources.IResource">
            <or>
                <test property="org.eclipse.core.resources.name"
                         value="*.html"/>
                 <test property="org.eclipse.core.resources.name"
                         value="*.js"/>
            </or>
           </adapt>
        </definition>
   </extension> 
```

然后我们需要在对应的command handler的tag中使用这个定义id，如下：

```
<enabledWhen>
        <with variable="activeEditorInput">
    <reference definitionId="example.definitions.sampleDefinition"/>
  </with>
</enabledWhen> 
```

我正在使用此代码。它工作正常。

# php - 在处理时阻止 Drupal 文本字段 ahah 事件禁用字段的最佳方法是什么？

> ID：10382736
> 
> 赞同：0
> 
> 时间：2012-04-30T11:12:42.857
> 
> 标签：php, drupal, drupal-6, drupal-forms

我在自定义模块中有一个简单的 Drupal 表单，其中退出 a`textfield`应该检索有关输入文本的一些信息，`ahah`以填充`div`.

这很好用，除非用户在处理文本字段的 ahah 事件时快速提交表单。

看起来在处理 ahah 事件时，文本字段被禁用，这当然意味着它的值未提交。这意味着验证失败，因为文本字段是必填字段，因此用户将返回到表单并显示适当的错误。发生这种情况时，文本字段始终为空。

如果用户等待事件完成，则文本字段返回启用状态并按预期提交，在文本字段中使用回车键提交也是如此（事件不会触发，因此文本字段不会被禁用当它检索数据时）。

有没有办法在处理 ahah 事件时禁用文本字段的禁用，或者其他一些解决方法？

文本字段示例：

```
$form['id'] = array(
    '#type' => 'textfield',
    '#title' => t('Crop No.'),
    '#default_value' => $crop['id'] ? $crop['id'] : '',
    '#size' => 6,
    '#disabled' => $disabled,
    '#ahah' => array(
        'path' => 'spcs-myspuds/yields/js/crop/description/' . $crop_idx,
        'wrapper' => 'spcs-myspuds-yields-edit-crop-description-row-' . $crop_idx,
        'effect' => 'fade',
        'progress' => array(
            'type' => 'none',
        ),
    ),
); 
```

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T14:36:32.173

我找到了解决方法。

我不得不覆盖`Drupal.ahah.prototype.beforeSubmit`，在提交之前禁用输入的功能（嗯，呃！）。

我在我的模块中包含了以下 JavaScript（使用`drupal_add_js`）：

```
$(document).ready(function() {
  if (typeof beforeSubmitOverride == 'undefined' || beforeSubmitOverride == false) {
    Drupal.ahah.prototype.beforeSubmit = function (form_values, element, options) {
      // Disable the element that received the change.
      // IMiJ: Unless it's a text input, otherwise we could submit while element is diabled and loose data.
      if ($(this.element).attr('type') != 'text') {
        $(this.element).addClass('progress-disabled').attr('disabled', true);
      }

      // Insert progressbar or throbber.
      if (this.progress.type == 'bar') {
        var progressBar = new Drupal.progressBar('ahah-progress-' + this.element.id, eval(this.progress.update_callback), this.progress.method, eval(this.progress.error_callback));
        if (this.progress.message) {
          progressBar.setProgress(-1, this.progress.message);
        }
        if (this.progress.url) {
          progressBar.startMonitoring(this.progress.url, this.progress.interval || 1500);
        }
        this.progress.element = $(progressBar.element).addClass('ahah-progress ahah-progress-bar');
        this.progress.object = progressBar;
        $(this.element).after(this.progress.element);
      }
      else if (this.progress.type == 'throbber') {
        this.progress.element = $('<div class="ahah-progress ahah-progress-throbber"><div class="throbber">&nbsp;</div></div>');
        if (this.progress.message) {
          $('.throbber', this.progress.element).after('<div class="message">' + this.progress.message + '</div>');
        }
        $(this.element).after(this.progress.element);
      }
    };
  };
  beforeSubmitOverride = true;
}); 
```

这是`Drupal.ahah.prototype.beforeSubmit`misc/ahah.js 中定义的副本，有一个小的更改，使用 if 语句包装禁用输入以确保我们不会禁用文本字段。

这包含在几行代码中，以确保在 DOM 准备好后重新定义原型。

如果传递了诸如“禁用”=> false之类的设置，最好只停止禁用输入，但上述方法适用于我需要此修复的一个自定义模块的一页中的一种情况。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-01T04:31:39.607

您可以将文本字段的#required 属性设置为TRUE，使其成为必填字段。请将#disabled 属性设置为FALSE，以检查是否因此而未发生。请记住，#ahah 事件在发生时会调用验证函数正在处理。

# c# - System.IO.IOException：进程无法访问文件“文件/文件”

> ID：10382737
> 
> 赞同：0
> 
> 时间：2012-04-30T11:12:47.520
> 
> 标签：c#, exception, .net

当我尝试上传我的数据和图像时，我遇到了一个小问题。

问题是：

```
System.IO.IOException: The process cannot access the file 'C:\MyWebSites\Class\OriginalImages\IMG_9209.JPG' because it is being used by another process. at System.IO.__Error.WinIOError(Int32 errorCode, String maybeFullPath) at System.IO.FileStream.Init(String path, FileMode mode, FileAccess access, Int32 rights, Boolean useRights, FileShare share, Int32 bufferSize, FileOptions options, SECURITY_ATTRIBUTES secAttrs, String msgPath, Boolean bFromProxy, Boolean useLongPath, Boolean checkHost) at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, FileOptions options, String msgPath, Boolean bFromProxy) at System.IO.FileStream..ctor(String path, FileMode mode) at System.Web.HttpPostedFile.SaveAs(String filename) at Admin_InsertStudent.Button1_Click(Object sender, EventArgs e) 
```

**C＃：**

```
using System; using System.Collections.Generic; using System.Linq; using System.Web; using System.Web.UI; using System.Web.UI.WebControls; using System.IO; using System.Text;

public partial class Admin_InsertStudent : System.Web.UI.Page {
    protected void Page_Load(object sender, EventArgs e)
    {

    }
    protected void Button1_Click(object sender, EventArgs e)
    {
        try
        {
        if (FileUpload1.HasFile)
        {
            string tempPath = "OriginalImages";
            string imgPath = "StudentImages";
            string savePath = Path.Combine(Request.PhysicalApplicationPath, tempPath);
            string TempImagePath = Path.Combine(savePath, FileUpload1.FileName);

            string imgSavePath = Path.Combine(Request.PhysicalApplicationPath, imgPath);
            string StudentImageNormal = Path.Combine(imgSavePath, FileUpload1.FileName);
            string StudentImageThumbnail = Path.Combine(imgSavePath, "t__" + FileUpload1.FileName);
            string extension = Path.GetExtension(FileUpload1.FileName);

            switch (extension.ToLower())
            {
                case ".png":
                    goto case "Upload";
                case ".gif":
                    goto case "Upload";
                case ".jpg":
                    goto case "Upload";
                case "jpeg":
                    goto case "Upload";

                case "Upload":
                    FileUpload1.SaveAs(TempImagePath);

                    ImageTools.GenerateTumbnail(TempImagePath,StudentImageNormal, 400, 300, true, "High");

                    ImageTools.GenerateTumbnail(TempImagePath, StudentImageThumbnail, 120, 90, true, "medium");

                    lblMessage.Text = "Billedet" + FileUpload1 + "er nu uploadet";

                    string FirstName = Convert.ToString(txtFirstName.Text);
                    string MiddleName = Convert.ToString(txtMiddelName.Text);
                    string LastName = Convert.ToString(txtLastName.Text);
                    string BirthDay = Convert.ToString(txtBirthDay.Text);
                    string City = Convert.ToString(txtCity.Text);
                    string Pic = "OriginalImages/StudentImages/" + FileUpload1.FileName;
                    string WebSite = Convert.ToString(txtWebSite.Text);

                    break;

                default:
                    lblMessage.Text = "Denne Filetype er ikke tilladt";
                    return;
            }

        }
    }
    catch (Exception err)
    {
        lblMessage.Text = err.ToString();
    }
        } } 
```

希望可以有人帮帮我 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T11:29:12.257

**上传文件后，您必须释放它。**

```
yourFile.Dispose(); 
```

[MSDN](http://msdn.microsoft.com/en-us/library/system.idisposable.dispose%28v=vs.71%29.aspx)

> 使用此方法关闭或释放实现此接口的类的实例所持有的非托管资源，例如文件、流和句柄。按照惯例，此方法用于与释放对象持有的资源或准备对象以供重用相关的所有任务。

# security - 为什么要使用 ID 来为对象创建唯一的 URL？

> ID：10382739
> 
> 赞同：2
> 
> 时间：2012-04-30T11:12:54.090
> 
> 标签：security, twitter, uuid, uniqueidentifier, privacy

为什么开发人员会为他们的“用户”对象使用 ID，或者为什么 Twitter 使用[Snowflake](http://engineering.twitter.com/2010/06/announcing-snowflake.html)作为消息 ID……？换句话说：为什么顺序 ID 在浏览器中很明显是不好的？它代表安全漏洞还是只是隐私问题？如果是安全漏洞，顺序 ID 会暴露哪些漏洞？如果这是一个隐私问题，如果最终用户可以识别顺序 ID，那么如何侵犯隐私？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T12:55:02.570

创建唯一 ID 的三种常用方法是

*   使它们连续
*   选择一个相当大的随机数
*   选择 UUID，即尝试“个性化”数字，以便不会再次创建它

## 安全方面

如果您将会话之类的内容与 ID 相关联，这肯定是一个安全问题。在这种情况下，您不希望任何恶意用户能够预测这样的 ID。顺序 ID 可以轻松预测，UUID 需要更多努力但也不是一个好主意，它会留下随机数。即使对他们来说，您也必须确保使用加密安全的随机数生成器，否则仍有可预测的空间。

作为一个为什么这很严重的例子，请考虑 URL 中包含的旧的“jsessionid”或任何其他典型的会话 ID。攻击者将登录并像普通用户一样行事，记下分配给他的会话 ID，然后开始预测更多 ID，并通过在地址栏中输入它们，有效地劫持其他用户的会话。

## 并发/扩展问题

但从 Snowflake 在其描述中所说的来看，似乎没有与之相关的固有安全问题，该方法似乎属于第三类，即 UUID 类别。在文本中，它说他们正在从 MySQL 迁移到 Cassandra，并且他们过去使用的是 MySQL 顺序 ID。但是如果你仔细想想，当你尝试扩展你的系统时，这很快就会成为一个瓶颈：每个 ID 生成都需要同步以防止竞争条件。

如果您不同步此过程，则此类竞争条件的一个示例可能是两个独立实例同时增加 ID，因此实际上只将计数器增加了 1，而实际上它应该增加了 2。现在通常，如果您只有一个数据库实例，数据库将为您执行同步。但显然这并不能扩展，太多的客户端将处于空闲状态，而数据库处于重负载状态。多个数据库是一种选择，但复制 ID 可能会使您回到相同的情况。

## 无锁唯一 ID

因此，如果您希望在不需要同步（无锁）的情况下生成 ID，您要么学会使用非唯一 ID（这或多或少是矛盾的，而不是真正的解决方案），要么您必须想办法消除瓶颈。我们曾经做过的事情，以及对一些数据库实例效果很好的事情：

*   对于两个实例，一个 DB 只会生成奇数 ID，另一个只会生成偶数 ID。
*   对于 n 个实例，选择 n 个互质数，并将给定实例的 ID 与这些互质数之一相乘。在三个数据库的情况下，例如选择 2、3 和 5。基本数论确保不会有重复。

但在许多情况下，这将成为一个真正的数论问题，因此您必须寻求不同的解决方案。一种出路是走 UUID 路线，这通常是可以的，但缺点是完全取决于可能随时间变化的外部因素。从我所见，我猜这就是雪花的目标。

为了完整起见，我想提另一个解决方案，它可以很好地扩展并且本身就是 IMO 漂亮的。它也不受外部因素的影响，并且可以在任何地方工作，尽管一开始是违反直觉的。这个想法是选择足够大（比如说 20 个字节）的加密安全随机数。它必须是那些，非加密随机数生成器通常在生成一定数量的数字后重复，当然我们不希望这样。除此之外，这就是你所需要的。

起初，我认为这永远行不通，如果我们得到相同的数字怎么办？但是，如果您进行数学计算，您将意识到赔率是多少。生日悖论告诉我们，您会发现时间上的冲突大约为 O(2^(n/2))，其中 n 是您的随机数的位数。所以 20 字节 = 160 位，你应该在 2^80 时间内发现冲突。这与 SHA-1 的安全裕度相同，到目前为止，没有人在那里发现过碰撞。问题是，你运气好并在 2^30 中通过“机会”或类似的方式发现碰撞的可能性很小。概率对你不利。这与在同一天成为总统同时赢得多个彩票大致相同。

# java - 如何在java中刷新JTree的内容？

> ID：10382743
> 
> 赞同：0
> 
> 时间：2012-04-30T11:13:05.820
> 
> 标签：java, swing, jtree

我有一个显示特定目录内容的 JTree。当用 ftp 下载一些文件到这个目录时，我想让我的 JTree 知道它并刷新他的内容。在 JTree 的根目录中添加或删除某些文件后，如何刷新 JTree？

```
btnRefreshContents.addActionListener(new ActionListener() {
        public void actionPerformed(ActionEvent e) {
            tree.getModel().
        }
    }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T11:15:31.560

如果您使用的是 Java 7，则可以使用 new [`WatchService`](http://docs.oracle.com/javase/7/docs/api/java/nio/file/WatchService.html)( [`FileSystem.newWatchService()`](http://docs.oracle.com/javase/7/docs/api/java/nio/file/FileSystem.html#newWatchService%28%29)) 来检测文件系统的更改。这是[一篇关于它](http://e-blog-java.blogspot.com.au/2011/03/how-to-watch-file-system-for-changes-in.html)的文章。

至于更新 JTree 组件，请查看[Stack Overflow 页面](https://stackoverflow.com/questions/1913855/how-can-i-refresh-a-jtree-after-adding-some-nodes-to-the-underlying-model)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T15:55:42.847

您可以将目录侦听器添加到底层树模型。有很多解决方案。如上所述[，](https://stackoverflow.com/a/10382772/1048330)在 Java 7中`WatchService`可能很有用。但是由于您还没有使用 Java 7，您可以尝试其他方法：

[JNotify](http://jnotify.sourceforge.net/) - 允许 java 应用程序监听文件系统事件的 java 库。这是一个[示例](http://jnotify.sourceforge.net/sample.html)（确保将 dll/so 依赖项添加到路径中。）

来自 Apache Commons 的[VFS 。](http://commons.apache.org/vfs/)Commons VFS 提供了用于访问各种不同文件系统的单一 API。[DefaultFileMonitor](http://commons.apache.org/vfs/apidocs/org/apache/commons/vfs2/impl/DefaultFileMonitor.html)就是一个很好的例子。

# java - 即使我已采取措施防止这种情况发生，Eclipse 仍会继续包装我的线路

> ID：10382754
> 
> 赞同：7
> 
> 时间：2012-04-30T11:14:17.097
> 
> 标签：java, eclipse, word-wrap

我正在使用带有 32 位 JDK 1.7、Eclipse Indigo 的 Windows 7 64 位

我有一个宽屏幕，我认为很难从换行中快速读取功能。我希望 Eclipse 为我进行缩进校正，但我不喜欢包装功能并想将其关闭。

所以这就是我所做的：

窗口>首选项>Java>代码样式>格式化程序：

用我的名字创建了一个配置文件，然后单击“编辑...”按钮。

“换行”选项卡我有以下内容：

最大行宽：200 换行的默认缩进：2 数组初始值设定项的默认缩进：2 从不加入已换行：未选中 首选换行外部表达式（将嵌套表达式保留在一行上）：未选中

下面列表中的每项政策都设置为：不换行。

按 Ctrl+Shift+F 时，我的行被换行。我能找到的最长的一行有 109 个字符。

有人可以帮我找出我做错了什么吗？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-30T11:30:29.133

检查以下项目：

*   选择了正确的配置文件；
*   评论有自己的`Line Width`配置；
*   特定于项目的设置正在覆盖工作区设置。( `Project Properties`> `Java Code Style`> `Formatter`)

# javascript - ASPX - 如何从 Txt 文件中读取行然后将文本存储在字符串中

> ID：10382755
> 
> 赞同：2
> 
> 时间：2012-04-30T11:14:28.770
> 
> 标签：javascript, asp.net, html

我尝试使用 aspx 读取文本文件，然后将它读取的任何行存储在一个字符串中，我在网上查看过，似乎找不到简单的教程，有人可以帮我谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T11:21:08.987

一旦文件位于服务器上的已知位置，您只需执行以下操作：

```
string filePath = Server.MapPath(Url.Content("~/Content/upload/MyTextFile.txt"));
string allText = System.IO.File.ReadAllText(filepath); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T11:21:40.637

```
 StreamReader objReader = new StreamReader("c:\\test.txt");
            string sLine="";
            List<string> lstText = new List<string>();

            while (sLine != null)
            {
                // Line by line read and add it to your List
                sLine = objReader.ReadLine();
                if (sLine != null)
                    lstText.Add(sLine);
            }
                        objReader.Close();

            foreach (string sOutput in arrText)
                Console.WriteLine(sOutput);
            Console.ReadLine(); 
```

请按照以下链接

[http://support.microsoft.com/kb/306777](http://support.microsoft.com/kb/306777)

[http://msdn.microsoft.com/en-us/library/ezwyzy7b.aspx](http://msdn.microsoft.com/en-us/library/ezwyzy7b.aspx)

# ios - 为什么 NSDateFormatter 不适用于 ICT TimeZone

> ID：10382756
> 
> 赞同：0
> 
> 时间：2012-04-30T11:14:33.353
> 
> 标签：ios, timezone, nsdateformatter

在 iOS 5（模拟器和设备）上，当我尝试使用时区 ICT 解析日期字符串时，它只返回（null）。一件奇怪的事情是，这个时区在 iOS4.3 中可以正常工作。

```
NSString *inputDateStr = @"Fri, 06 Apr 2012 13:00:00 ICT";
NSDateFormatter *df = [[NSDateFormatter alloc] init];
[df setDateFormat:@"EEE, dd MMM yyyy HH:mm:ss zzz"];
NSDate *inputDate = [df dateFromString:inputDateStr];
NSLog(@"--- INPUT %@ -> %@ ---",inputDateStr, inputDate); 
```

`--- INPUT Fri, 06 Apr 2012 13:00:00 ICT -> (null) ---`

但是当我尝试其他时区时，比如 PST，它可以工作！？

```
NSString *inputDateStr = @"Fri, 06 Apr 2012 13:00:00 PST"; 
```

`--- INPUT Fri, 06 Apr 2012 13:00:00 PST -> 2012-04-06 21:00:00 +0000 ---`

我打印出 [NSTimeZone abbreviationDictionary] 并且仍然在那里看到 ICT。所以这个时区应该仍然有效。那么，为什么我会得到（null）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T11:35:59.803

时区名称是特定于语言环境的，并且可能在不同的语言中表示其他含义，或者根本不存在。

例如。

> ICT Îles Crozet 时间 +4
> ICT 印度支那时间 +7

使用 GMT+XX 以获得稳定的功能。

编辑：

有关时区的更多信息，请参阅此链接：http: [//unicode.org/repos/cldr/trunk/docs/web/tr35.html#Time_Zone_Fallback](http://unicode.org/repos/cldr/trunk/docs/web/tr35.html#Time_Zone_Fallback)

Note the section is called "Time Zone *Display* Names". These names were never intented to be used for parsing. They are meant to be displayed (e.g. as the result of the ZZZ pattern).

# c# - 在 ajax 中获取对控制器操作的请求不起作用？

> ID：10382759
> 
> 赞同：2
> 
> 时间：2012-04-30T11:14:42.560
> 
> 标签：c#, asp.net-mvc-3, jquery

我正在尝试在 asp.net mvc 3 中执行 ajax get 请求。它不起作用，即 GetSquareRoot 操作未命中？

索引.cshtml

```
 @{
    ViewBag.Title = "Home Page";
}
<h2>@ViewBag.Message</h2>
<p>
    To learn more about ASP.NET MVC visit <a href="http://asp.net/mvc" title="ASP.NET MVC Website">
        http://asp.net/mvc</a>.
</p>
<script type="text/javascript">
        function calculateSquareRoot(numberToCalculate) {
            $.ajax({
                type: 'Get',
                url: '/Home/GetSquareRoot',
                data: { number: numberToCalculate },
                success: function (data) { alert(data.result); }
            });
        }

</script>
<button onclick="calculateSquareRoot(9);">Calculate Square</button> 
```

在家庭控制器上：

```
public JsonResult GetSquareRoot(long number)
{
    var square = Math.Sqrt(number);
    return Json(new { result = square }, JsonRequestBehavior.AllowGet);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T11:30:21.283

不确定这是否有帮助，但文档声明类型参数应该读取`GET`......不是`Get`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T12:29:59.727

如果我在 localhost 上安装以下页面：

```
<!DOCTYPE html>
<html>
    <head>
        <script type="text/javascript" 
           src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.js">
        </script>
        <script type="text/javascript">
        //<![CDATA[
            function calculateSquareRoot(numberToCalculate) {
                $.ajax({
                    type: 'GET',
                    url: '/Home/GetSquareRoot',
                    data: { number: numberToCalculate },
                    success: function (data) { alert(data.result); }
                });
            }
        //]]>
        </script>
    </head>
    <body>
        <button onclick="calculateSquareRoot(9);">Calculate Square</button>
    </body>
</html> 
```

当我按下按钮时，我看到一个请求被发送到：

```
http://localhost/Home/GetSquareRoot?number=9 
```

你确定你已经告诉我们整个故事了吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T11:25:01.150

我认为你的 jQuery ajax 很好。但我发现你的按钮标签是错误的。

原样

```
<button onclick="calculateSquareRoot(9);">Calculate Square</button> 
```

成为

```
<button type="button" onclick="calculateSquareRoot(9);">Calculate Square</button> 
```

希望它会帮助你。

卢克。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-30T12:32:28.760

1.  在网络选项卡的开发人员工具（F12）中检查请求。看看会发生什么，如果它使用参数进入正确的控制器/动作
2.  将数字类型更改为 int 而不是 long（也许 ModelBinder 难以绑定到 long（不太可能）
3.  向 ajax 调用添加错误函数：

    ```
     $.ajax({
            type: 'GET',
            url: '/Home/GetSquareRoot',
            data: { number: numberToCalculate },
            success: function (data) { alert(data.result); },
            error: function (jqXHR, textStatus, errorThrown) { debugger;/*see what happened */ }
        }); 
    ```

# php - 使用 PHP 和 MySQL 写博客

> ID：10382760
> 
> 赞同：1
> 
> 时间：2012-04-30T11:14:58.143
> 
> 标签：php, mysql, .htaccess, blogs

我一直在学习用 PHP 和 MySQL 制作博客的教程。但在教程结束时，完成的博客允许任何访问网站的用户编辑类别和发布。将网站的某些部分限制为我自己的最佳方式是什么？我想到了一个只有我可以登录的登录系统，或者.htaccess 中可能有一种方法。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T11:38:01.627

构建您自己的 ACL 层，查看网络资源，但此链接应该是一个很好的起点

[在 PHP 中实现 ACL - 代码日志](https://stackoverflow.com/questions/4415663/implementing-acl-for-my-php-application)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T12:01:11.817

看看 PHP[会话](http://www.php.net/manual/en/book.session.php)。

您需要一些用户列表来进行身份验证。如果这是一个数据库，请创建一个包含用户名和密码列的用户表。

在您放置的每一页的开头`start_session()`。这保留了页面之间的会话。

创建登录页面和链接。在登录页面上，您根据您的用户列表验证传入的用户名和散列密码。如果用户通过身份验证，则添加一个会话变量来存储登录的用户。此外，登录后[重新生成会话 ID](http://php.net/manual/en/function.session-regenerate-id.php)以防止会话劫持。

在需要成员访问的每个页面上，检查以确保用户已登录。如果没有，则将他们重定向到登录页面。

如果您使用 .htaccess 来设置 HTTP 基本身份验证，您将只想阻止允许用户编辑博客的页面。

考虑在任何一种情况下添加 SSL (HTTPS)，否则，如果人们在开放网络上，登录凭据可能会被盗。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T11:16:48.980

你提到的两种方法都可以。

或者，您可以只安装一个强大、安全、功能齐全的博客。例如[http://wordpress.org](http://wordpress.org)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-30T12:19:00.190

Make a user login module and use session check for that place for example user logged in and his you store his user id or something in `$_SESSION['is_user']` then check for private content

```
if(isset($_SESSION['is_user'])){
//Show
} else {
//Redirect to login page
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-05-23T19:01:29.590

I think first alter the links to post editing page and use a login system .

sample code,

save file as : **login.php**

```
<form method="post">
name : <input name="name">
password : <input name="name">
<button> login </button>
</form>
<?php 
session_start();
define('name','your name');
define('password','your password');
if($_SERVER['REQUEST_METHOD'] == "post"){
if($_POST['name' == name && $_POST['password'] == password){
$_SESSION['logged_in'] = 'yes';
header('location:admin.php'); //you can change this
}
}
?> 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-04-30T11:30:09.447

如果你想要一个个人博客或类似的东西，最好使用社区支持的，你不需要重新发明，把你的时间花在更有成效的事情上。

您的选择是：

*   Wordpress，他有一个很大的社区和很棒的文档。[http://wordpress.com/](http://wordpress.com/)
*   Habari，habari 的重要之处在于它是使用 OOP 设计的。[http://habariproject.org/en/](http://habariproject.org/en/)

# c# - 解析 Resellerclub HTTP API 响应的最简单方法

> ID：10382761
> 
> 赞同：0
> 
> 时间：2012-04-30T11:15:01.870
> 
> 标签：c#, parsing, dns, deserialization

以下是 ResellerClub 的 HTTP API 检查域可用性的 http 请求：

```
https://test.httpapi.com/api/domains/available.json?auth-userid=166694&auth-password=span2012&domain-name=prasadvemala&domain-name=prasadvemala2&tlds=com&tlds=com 
```

以下是它的回应：

```
{"prasadvemala.com":{"status":"available","classkey":"domcno"},"prasadvemala2.com":{"status":"available","classkey":"domcno"}} 
```

在 C# 中解析此响应的最简单方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T11:24:48.027

IMO，[Json.net](http://json.codeplex.com/)最适合快速而肮脏的 Json 解析：

```
var jObj = JObject.Parse(responseString);
var val = jObj["prasadvemala.com"]["status"].Value<string>(); 
```

它也可以作为[nuget 包](http://nuget.org/packages/newtonsoft.json)使用。

编辑

如果要枚举整个响应：

```
var everythingDictionary = jObj
    .Properties()
    .Select(p => new{
        key=p.Name,
        value=new{
            status=p.Value["status"].Value<string>(),
            classkey=p.Value["classkey"].Value<string>()}})
    .ToDictionary(x => x.key,x => x.value);

foreach(var k in everythingDictionary.Keys)
{
    var name = k;
    var status = everythingDictionary[k].status;
    var classkey = everythingDictionary[k].classkey;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T19:47:23.177

我发现[本文](http://techblog.procurios.nl/k/n618/news/view/14605/14863/How-do-I-write-my-own-parser-for-JSON.html)中的 JSON 解析器非常适合 JSON 结构可能具有动态命名属性的场景。它返回所有属性和子对象的简单嵌套哈希表。

# java - 无需在 java gwt 中打开新选项卡即可在收件箱中下载文件

> ID：10382763
> 
> 赞同：1
> 
> 时间：2012-04-30T11:15:04.867
> 
> 标签：java, gwt, attachment

我已经用 java 开发了一个 gwt 项目，它类似于网络邮件。我想在邮件中下载附件，为此我创建了一个 url 并使用 com.google.gwt.user.client.Window.open(url ，“_空白的”， ””）; 运行此选项卡后，将打开一个选项卡并出现下载对话框并关闭选项卡，但我想显示保存下载对话框而不打开和关闭新选项卡。我想在下载附件时拥有类似 gamil 或 ymail 的功能。这是我的代码：

```
 `final String url= "fetchAttachment.service?index="
        + mailData.getId().trim()
        + "&&"
        + "mailboxUid="
        + URL.encodeComponent(mailData
        .getMailBoxUid())
        + "&&"
        + "attachmentIndex="
    + mailData.getAttachments().get(i)
        .getIndex();
      CutLabel tempLabel = new CutLabel(attachemnts
     .get(i).getFileName(), 100);
      Window.open(url, "_blank", "");` 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T11:29:31.367

尝试这个：

```
Window.open(url, "myWindow", ""); 
```

# mysql - 导出数据库 - 未知或不正确的时区

> ID：10382767
> 
> 赞同：6
> 
> 时间：2012-04-30T11:15:12.633
> 
> 标签：mysql, phpmyadmin, xampp

我正在尝试使用 phpMyAdmin 3.4.5 以与我多次相同的方式导出数据库。

但是，在 .sql 文件中是 html 标签。所以，我将 .sql 保存为 .html 并打开它。有一条消息：

```
Error

SQL query: Edit Edit
SET time_zone = "+00:00"

MySQL said: Documentation
#1298 - Unknown or incorrect time zone: '+00:00' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T11:18:16.177

[http://www.electrictoolbox.com/mysql-set-timezone-per-connection/](http://www.electrictoolbox.com/mysql-set-timezone-per-connection/)

您可能需要设置您的时区。

```
SET time_zone = 'America/Los_Angeles'; 
```

或者

```
SET time_zone = '00:00'; 
```

不是

```
SET time_zone = "+00:00"; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-19T08:07:38.080

我已经尝试了在网络上找到的所有解决方案，但没有任何效果。也许我无法应用它们！！！！但是，如果您遇到同样的问题并且您可以更改 phpMyAdmin 设置，您可以轻松解决在导出 sql 设置中删除导出 UTC 时间中的标志的问题。抱歉，我不能更详尽，因为我使用的是意大利版本的 XAMPP 和 phpMyAdmin。请原谅我的英语不好。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-11-08T02:15:21.800

1.  将导出方法设置为“自定义”
2.  取消选中页面最底部的“*在 UTC 中转储 TIMESTAMP 列（允许在不同时区的服务器之间转储和重新加载 TIMESTAMP 列） ”复选框*

在 XAMPP for Windows 5.6.19-0 上测试

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-10T07:08:29.387

我的 Mac 也有同样的问题。我知道如何解决这个问题。我通过此链接访问 phpmyadmin

```
http://longs-macbook-pro.local/phpmyadmin
```

（长是我的名字），
不是

```
http://localhost/phpmyadmin/
```

我希望你能解决这个问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-03-27T05:12:52.830

如果时区缺失，对于 Linux、BSD 和 Mac OS X，您需要将时区表加载到`mysql`数据库中以支持所有城市和时间：

```
mysql_tzinfo_to_sql /usr/share/zoneinfo | mysql -u root mysql 
```

这将支持所有这些时区：
[https ://en.wikipedia.org/wiki/List_of_tz_database_time_zones](https://en.wikipedia.org/wiki/List_of_tz_database_time_zones)

# sql - 如何根据列过滤器缩小不同的行？

> ID：10382768
> 
> 赞同：2
> 
> 时间：2012-04-30T11:15:20.267
> 
> 标签：sql, sql-server, sql-server-2008, greatest-n-per-group

我正在尝试搜索最近发生的一堆交易，但只希望每笔交易返回一次。我对代码问题的尝试比我能解释得更好。

```
SELECT 
DISTINCT    TransactionCode
    ,       IdKey 
FROM        TransTable 
WHERE       TransactionCode IN (<massive list of ids...>) 
AND         ActionDate      < GETDATE() 
ORDER BY    ActionDate DESC 
```

我想要每个事务代码的一个实例，按日期排序（*也就是该事务的最近发生*），并且还返回了 idKey。想法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-30T11:29:57.057

```
SELECT TransactionCode, 
       IdKey
FROM
  (
    SELECT TransactionCode, 
           IdKey,
           ROW_NUMBER() OVER(PARTITION BY TransactionCode 
                             ORDER BY ActionDate DESC) AS rn
    FROM TransTable 
    WHERE TransactionCode in (1,2,3) AND 
          ActionDate < GETDATE() 
  ) T
WHERE rn = 1 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-30T11:33:07.320

您需要通过在`TransactionCode`列上对它们进行分区来为表中的每一行分配行号，然后`ActionDate`按降序对它们进行排序，以便您在该部分的顶部获得最新的事务。根据此逻辑分配行号后，您可以仅从派生表输出中过滤掉`rownum`值为**1的行。**这将获取所有交易代码。您可以根据需要在以下查询中添加过滤条件。

[**单击此处查看 SQL Fiddle 中的演示**](http://sqlfiddle.com/#!6/59fa2/1)

*脚本*：

```
CREATE TABLE dbo.TransTable
(
        IdKey           INT         NOT NULL IDENTITY
    ,   TransactionCode VARCHAR(10) NOT NULL
    ,   ActionDate      DATETIME    NOT NULL
);

INSERT INTO dbo.TransTable (TransactionCode, ActionDate) VALUES
    ('code 1', '2012-04-27 01:04:12.467'),
    ('code 1', '2012-04-22 09:16:29.354'),
    ('code 2', '2012-04-12 11:04:27.751'),
    ('code 1', '2012-06-19 12:27:12.232'),
    ('code 2', '2012-04-04 05:22:17.467'),
    ('code 3', '2012-05-01 08:49:12.951'),
    ('code 3', '2012-05-13 06:12:12.234');

SELECT  IdKey
    ,   TransactionCode
    ,   ActionDate
FROM
(
    SELECT  IdKey
        ,   TransactionCode
        ,   ActionDate
        ,   ROW_NUMBER() OVER (
                        PARTITION  BY TransactionCode 
                        ORDER BY ActionDate DESC
            ) rownum
    FROM    dbo.TransTable
    WHERE   ActionDate < GETDATE()
) t1 WHERE rownum = 1; 
```

*输出*：

```
IdKey TransactionCode ActionDate
----- --------------- -----------------------
1     code 1          2012-04-27 01:04:12.467
3     code 2          2012-04-12 11:04:27.750 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-30T11:28:39.660

可能是这样，你可以找到它：

```
;WITH Cte AS (
SELECT 
    ROW_Number() over (partition by TransactionCode, IdKey  ORDER BY ActionDate DESC) RowID,
    TransactionCode, IdKey      
FROM TransTable 
WHERE TransactionCode in (Massive list of IDs) 
AND ActionDate < GETDATE() 
)
SELECT * FROM Cte WHERE RowID = 1 
```

# javascript - 记录 javascript 错误

> ID：10382770
> 
> 赞同：16
> 
> 时间：2012-04-30T11:15:23.683
> 
> 标签：javascript, jquery, logging, error-handling, stack-trace

我想在 beta 测试期间记录我项目中的所有 JS 错误。现在我按以下方式进行：

```
window.onerror = myErrHandler;

function myErrHandler(message, url, line)
{
    $.ajax({
        cache: false,
        type: "post",
        data: {error:message, url:url, line:line, brouser:navigator.userAgent},
        url: "/Home/LogJavaScript/",
        async: true
    });
    return true;
} 
```

但是这种方式无助于获取有关调用堆栈的任何信息。因此，有关 jQuery 或任何其他外部脚本内部错误的信息无济于事。

有什么方法可以改善这种日志记录吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-01T07:59:37.513

看看[stacktrace.js](http://stacktracejs.com)，这应该可以解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T15:20:05.010

[ExceptionHub](http://www.exceptionhub.com/)是另一个很好的插入式（付费）服务，它记录 JS 错误、堆栈跟踪、分组等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-29T06:43:19.657

您也可以尝试[https://www.atatus.com/](https://www.atatus.com/)。Atatus 连同堆栈跟踪一起在一张清晰的图片中捕获所有访问者的操作，这些操作会导致错误。除了 JavaScript 错误跟踪，Atatus 还提供真实用户监控、AJAX(XHR) 监控和事务监控。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-12-10T13:32:48.357

看看[JsLog.me](http://jslog.me)服务。它捕获错误并收集整个客户端日志，这有助于在 beta 测试时恢复错误再现。它也适用于混合（PhoneGap/Cordova）应用程序。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-02-22T18:53:27.517

您还可以查看我的名为 Muscula 的项目，该项目[记录您的 JavaScript 错误](http://muscula.com) 它很容易设置，只需添加一个脚本片段即可记录。免费 ：-）

# vb.net - 通过流阅读器读取文本文件

> ID：10382774
> 
> 赞同：2
> 
> 时间：2012-04-30T11:15:39.143
> 
> 标签：vb.net, filestream

我有一个文本文件名 list.txt ，其中包含如下数据；

```
AC-No.                 Name                Time        State    New State Exception

    100            ZULFIQUAR 09/04/2012 01:53 PM         C/In                Invalid
    100            ZULFIQUAR 10/04/2012 01:39 PM         C/In                Invalid
    100            ZULFIQUAR 11/04/2012 01:38 PM         C/In                Invalid
   1002                SAQIB 09/04/2012 10:42 PM         C/In        C/Out        OK
   1002                SAQIB 10/04/2012 08:01 AM         C/In                     OK
   1002                SAQIB 10/04/2012 10:28 PM         C/In        C/Out        OK
   1002                SAQIB 11/04/2012 09:25 AM         C/In                     OK
   1002                SAQIB 11/04/2012 10:40 PM         C/In        C/Out        OK
   1002                SAQIB 12/04/2012 07:15 AM         C/In                     OK
   1002                SAQIB 12/04/2012 11:12 PM         C/In        C/Out        OK
   1002                SAQIB 13/04/2012 07:23 AM         C/In                     OK
   1002                SAQIB 13/04/2012 10:53 PM OverTime Out                Invalid
   1002                SAQIB 14/04/2012 06:58 AM OverTime Out                Invalid
   1002                SAQIB 15/04/2012 10:50 PM         C/In                Invalid
   1002                SAQIB 16/04/2012 07:09 AM         C/In                     OK
   1002                SAQIB 17/04/2012 10:36 PM         C/In        C/Out        OK
   1002                SAQIB 18/04/2012 07:21 AM         C/In                     OK
   1002                SAQIB 18/04/2012 10:46 PM         C/In        C/Out        OK
   1002                SAQIB 19/04/2012 06:32 AM         C/In                     OK
   1002                SAQIB 19/04/2012 10:47 PM         C/In        C/Out        OK 
```

现在我必须选择整行的三列（AC-No，Name.Time），并为 datagridview 提供其数据源。现在我正在使用以下代码，但没有运气。

```
Dim tbl As New DataTable("mytable")
        tbl.Columns.Add("col1", GetType(String))
        'tbl.Columns.Add("col2", GetType(String))
        'tbl.Columns.Add("col3", GetType(Integer))
        Dim sFilename As String = TextBox1.Text
        Dim myStream As System.IO.StreamReader = New System.IO.StreamReader(sFilename)
        Dim line As String
        Dim aRow As DataRow
        Do
            line = myStream.ReadLine()
            If line Is Nothing Then
                Exit Do
            End If
            Dim sAry As String() = Split(line, "    ")
            aRow = tbl.NewRow
            aRow(0) = sAry(0)
            'aRow(1) = sAry(1)
            '  aRow(2) = sAry(2)
            tbl.Rows.Add(aRow)
        Loop
        myStream.Close()
        DataGridView1.DataSource = tbl 
```

请帮我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-30T11:23:29.800

```
Dim delimiter As String = ","
Dim fileName As String = "c:\file.txt"

Dim sr As New StreamReader(fileName)

Try
    While sr.Peek() >= 0
        Dim r As String = sr.ReadLine()
        Dim items As String() = r.Split(delimiter.ToCharArray())
    End While
Finally
    sr.Close()
End Try 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-30T20:21:00.997

假设 1）您显示了一个具有固定列宽的文件，2）您需要将时间作为 DateTime 而不是字符串，以及 3）AC-No. 真的是一个字符串而不是一个整数：

```
Imports System.Globalization
Sub GetData()
    Dim tbl As New DataTable("mytable")
    tbl.Columns.Add("col1", GetType(String))
    tbl.Columns.Add("col2", GetType(String))
    tbl.Columns.Add("col3", GetType(DateTime))

    Dim sFilename As String = "C:\temp\testdata.txt"

    Using myStream As System.IO.StreamReader = New System.IO.StreamReader(sFilename)
        Dim ac As String
        Dim username As String
        Dim clocktime As DateTime
        Dim culture As CultureInfo = CultureInfo.CreateSpecificCulture("en-GB")

        Dim line As String
        Dim aRow As DataRow
        While Not myStream.EndOfStream
            line = myStream.ReadLine().TrimEnd
            ' check line is long enough to be valid
            If line.Length >= 48 Then
                ' take the first 8 characters as AC-No.
                ac = line.Substring(0, 8).Trim
                ' a valid line does not start with "AC-No"
                If Not ac.StartsWith("AC-No") Then
                    ' extract the name and remove any extra spaces
                    username = line.Substring(9, 20).Trim
                    ' extract the time and convert it to a DateTime
                    clocktime = DateTime.Parse(line.Substring(29, 19), culture, DateTimeStyles.AllowWhiteSpaces)
                    aRow = tbl.NewRow
                    aRow(0) = ac
                    aRow(1) = username
                    aRow(2) = clocktime
                    tbl.Rows.Add(aRow)
                End If
            End If

        End While

    End Using

    DataGridView1.DataSource = tbl
    ' example of formatting the third column
    DataGridView1.Columns(2).DefaultCellStyle.Format = "dd-MMM-yyyy HH:mm"

End Sub 
```

（测试为在 VB2010 中使用您的数据，如图所示。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T19:21:01.017

只是一个建议，尝试 mystream.readtoend() ，然后在每个 vbnewline 处切片，之后每行都有一个单独的字符串，您可以在其中调试它并进行播放，直到获得正确的结果。

# ios - AdWhirlView：从未知的 AdWhirlConfig 对象获取 adWhirlConfigDidReceiveConfig 回调

> ID：10382787
> 
> 赞同：1
> 
> 时间：2012-04-30T11:16:20.530
> 
> 标签：ios, admob, iad, adwhirl

我的应用程序中有导航控制器。当我的应用启动时，firstViewController 中的广告会正确显示。当我在 firstViewController 上选择任何行时，我正在推动 secondViewController。加载 secondViewController 时，我可以在 secondViewController 上看到广告，但在我的控制台中我得到了

```
AdWhirlView: getting adWhirlConfigDidReceiveConfig callback from unknown AdWhirlConfig object 
```

为什么会发生这种情况我不知道。如果有人知道这件事，请告诉我。如果您需要查看我的代码，请告诉我，我将添加我的代码。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T07:19:27.330

可能，您首先要实现另一个对象。确保检查您的“自动释放”。自动释放与整个 adwhirl 无关的东西，我得到了奇怪的结果。

# jakarta-ee - 如何实现此功能，允许用户使用不同的站点凭据登录？

> ID：10382790
> 
> 赞同：0
> 
> 时间：2012-04-30T11:16:30.540
> 
> 标签：jakarta-ee, web

我需要与在 StackOverflow.com 中实现的功能类似的功能，允许用户使用 yahoo、Google、FaceBook 等方式登录。

请让我知道我们如何在我们的网站中实现这样的功能，允许用户使用不同的实现者登录？

提前致谢 。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T11:56:25.287

您需要实现 OpenId。请参阅此[概述](http://www.theserverside.com/news/1364125/Using-OpenID)以了解其工作原理，稍后再查看更实际的[示例](http://www.ibm.com/developerworks/java/library/j-openid/index.html?ca=drs-)。

# open-source - 简单的开源任务管理器

> ID：10382791
> 
> 赞同：0
> 
> 时间：2012-04-30T11:16:37.170
> 
> 标签：open-source, task, taskmanager

我想在我的公司里做一个任务管理器服务器。我希望它非常简单，只需将任务委派给其他人并通过电子邮件发送给他们。

我们已经使用项目管理器工具。所以我正在寻找的是一个非常简单的工具，具有非常简单的界面和单一目的：延迟任务并让参与其中的每个人在任务更新后通过电子邮件进行更新。

提前致谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T13:11:23.400

一段时间后，我发现了这个：[Taskfreak](http://www.taskfreak.com/)

# ms-access - ms access 获取从 FileDialog 中选择的文件名

> ID：10382792
> 
> 赞同：6
> 
> 时间：2012-04-30T11:16:44.617
> 
> 标签：ms-access, vba

这是我的代码，我想知道如何获取所选文件的名称

```
Dim f As Object
Set f = Application.FileDialog(3)
f.AllowMultiSelect = True
If f.Show Then
    For i = 1 To f.SelectedItems.Count
        MsgBox f.SelectedItems(i)
    Next
EndIf 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-30T11:19:51.510

你的意思是这样吗？

```
Sub Sample()
    Dim f As Object

    Set f = Application.FileDialog(3)

    f.AllowMultiSelect = True

    If f.Show Then
        For i = 1 To f.SelectedItems.Count
            MsgBox Filename(f.SelectedItems(i))
        Next
    End If
End Sub

Public Function Filename(ByVal strPath As String) As String
    If Right$(strPath, 1) <> "\" And Len(strPath) > 0 Then
        Filename = Filename(Left$(strPath, Len(strPath) - 1)) + Right$(strPath, 1)
    End If
End Function 
```

# linq - Ravendb / F# / Linq

> ID：10382795
> 
> 赞同：2
> 
> 时间：2012-04-30T11:17:04.867
> 
> 标签：linq, f#, ravendb

我是 ravendb 的新手，我有 2 个问题；

*   我在那里存储了大约 65k 个对象，但只返回了 128 个：为什么会这样？（使用 Robert P. OpenInitializedStore 扩展）

    ```
    let printStoreData() =
        use store = DocumentStore.OpenInitializedStore() 
        use session = store.OpenSession() 
        let qs = session.Query<DataModel.simplequote>()
        printfn "%A" (qs.ToList() |> Seq.length )

    printStoreData() 
    ```

*   我对 Linq 和 Fsharp、f# 查询表达式和 Linq、查询表达式和 Ravendb 之间的关系感到很困惑。我什至在电源组中看到了一些 Linq。谁能给我一个高层次的看法，什么适合什么地方，或者指向一个适合的文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T11:47:03.783

默认情况下，Raven DB 页面会阻止您意外返回过多数据和系统过载（这是基于 SQL 的系统中性能问题的常见来源）。您需要使用 Seq.skip 和 Seq.take 来获得其余的结果。（也可能是因为在 RavenDB 中，索引是异步处理的，因此结果在保存后无法立即获得，但在这种情况下，这似乎不太可能是问题的原因）。

回答问题的第二部分：C# 具有表达式树，其中 C# linq 表达式可以由编译器转换为语法树，而不是生成实际代码。RavenDB 利用这一点将表示为 linq 表达式的查询转换为可以针对 RavenDB 运行的查询。F# 具有与 C# 的表达式树类似的功能，称为引号。引用使用不同的 F# 特定类型来表示已引用的代码。在许多方面，引用比 C# 等效项更强大，但 RavenDB 像大多数工具一样，使用 C# 表达式树而不是 F# 的引用。为了解决这个问题，有一个库是 F# 电源包的一部分，可以将 F# 的引用转换为 C# 表达式树。

我使用电源包将引用转换为 C# 表达式树的成功有限。我发现使用 raven db 的“lucene api”，它不依赖于引号或表达式树。

# javascript - 如果它是最后一项，如何删除 kendo dropDownList 的项目？

> ID：10382799
> 
> 赞同：5
> 
> 时间：2012-04-30T11:17:25.350
> 
> 标签：javascript, jquery, html, kendo-ui

我可以从剑道下拉列表中删除除最后一项之外的所有项目。删除最后一个后，之前的项目会重新出现。

这是一个 jsFiddle：http: [//jsfiddle.net/lpoellabauer/Jw4Cz/](http://jsfiddle.net/lpoellabauer/Jw4Cz/)

```
var dropDown = $("select").data("kendoDropDownList");
var itemToRemove = dropDown.dataSource.at(0);
dropDown.dataSource.remove(itemToRemove);
dropDown.select(0); 
```

任何想法如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-01T13:40:07.113

HTML：

```
<select>
<option value="1">one</option>
<option value="2">two</option>
<option value="3">three</option>
<option id="none" value="none"></option>
</select>

<a href="#">remove first</a> 
```

JS：

```
$("select").kendoDropDownList();

$("a").click(function(){
    var dropDown = $("select").data("kendoDropDownList");
    var itemToRemove = dropDown.dataSource.at(0);
    dropDown.dataSource.remove(itemToRemove);
    dropDown.select(0);
});
$('none').css({display:none}); 
```

​</p>

# version-control - 文档版本控制

> ID：10382801
> 
> 赞同：5
> 
> 时间：2012-04-30T11:17:38.293
> 
> 标签：version-control

我会定期为我的自由职业项目创建文档并不断更新。到目前为止，我能够使用 Google Docs 管理文档，并手动更新修订历史记录。

但是，正在编辑的文档量正在增加。现在我想使用开源（或免费的）软件来管理文档的版本控制。如果这一切都可以在云上完成，那就太好了。

请建议我解决我正在经历的上述问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T11:28:59.760

Google Docs 本身似乎已经适应了您的需要，因为它[支持修订历史](http://support.google.com/docs/bin/answer.py?hl=en&answer=190843)。

![在此处输入图像描述](../Images/57fc8f341b0e1cdbacaa6b9a925749fb.png)

仅当您想要分支并在这些分支之间合并时才需要版本控制解决方案（如“[源代码控制与修订控制？](https://stackoverflow.com/questions/1056912/source-control-vs-revision-control/1056947#1056947) ”中所述）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T20:17:28.277

[Revisionator](http://revisionator.com)就像谷歌文档，但它内置了完整的版本控制。谷歌文档的问题是没有工作版本的概念。只要有人键入任何内容，即使它在概念上并不代表新版本，也会将内容添加到修订历史记录中。此外，由于每个人都在同时编辑文档，因此不同人的更改相互混淆。给你一团糟。

由于修订者使用工作版本，您可以暂存您的编辑，从而获得更易于理解的修订历史。

它还支持差异、分支和合并。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-23T22:45:21.490

另一种选择是称为 SavvyDox 的移动文档管理解决方案。它通过基于云的服务器控制版本，并在仍然使用 Word 的同时提供了一个有吸引力的 Word Track Changes 替代方案 - 我们都知道每个人都会喜欢 Track Changes 的替代方案。

版本控制功能确保您在桌面上始终拥有文档的当前副本，并以绿色复选标记突出显示它是最新的。您可以轻松地将当前版本与以前的版本进行比较，如有必要，您甚至可以提取以前的版本。

审阅者可以向文档添加建议的更改，但唯一可以实际更改文档的人是作者——作者喜欢这一点。

在[http://www.savvydox.com/project-management/](http://www.savvydox.com/project-management/)上查看并注册免费试用。

如果您有兴趣查看 OVUM 对 SavvyDox 的 SWOT 分析，请尝试此链接[http://www.savvydox.com/SavvyDoxSWOT.pdf](http://www.savvydox.com/SavvyDoxSWOT.pdf)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-10T12:36:40.083

试用适用于 Microsoft Office 的 MagnetSVN。该工具将 Subversion 集成到 MS Office 中。但是，它不是免费的，但有 30 天的试用期。如果您想尝试更多时间 - 没问题，请从[http://magnetsvn.com发送更长评估请求](http://magnetsvn.com)

# sql - 加入时的行号？

> ID：10382805
> 
> 赞同：0
> 
> 时间：2012-04-30T11:18:04.837
> 
> 标签：sql, db2

```
 TableBoxes                          TableItems
 BoxCode    BoxDesc                   ItemNo    BoxCode       ItemDesc
    X1        Freight1                   123       X1            Tomatoes
    X4        Freight2                   124       X1            Apples  
    X8        Freight3                   128       X4            Potatoes 
```

我只想要 BoxCode=X1 的结果行，输出按 ItemNo 排序

```
BoxNumber         ItemNo               ItemDesc
   1                1                     Tomatoes
   1                2                     Apples 
```

**我可以通过在 ItemNo 上使用row_number()**轻松获得“ItemNo”序列工作。如何从第一个表中找到盒子的序列号？我当前的查询

```
select 
    row_number() over(
          order by a.ItemNo
    )as ItemNo
    ,ItemDesc
from 
    TableItems a 
    inner join TableBoxes b 
        on a.BoxCode=b.BoxCode 
where
    a.BoxCode='X1' 
```

无法弄清楚如何为 BoxCode 选择序列号，Damien。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T11:28:19.293

这是你想要的吗？

```
WITH TableBoxesRanked AS (
  SELECT
    *,
    BoxNumber = ROW_NUMBER() OVER (ORDER BY BoxCode)
  FROM TableBoxes
)
SELECT
  b.BoxNumber,
  ItemNumber = ROW_NUMBER() OVER (ORDER BY i.ItemNo),
  i.ItemDesc
FROM TableItems i
  INNER JOIN TableBoxesRanked b ON i.BoxCode = b.BoxCode
WHERE a.BoxCode = 'X1' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-30T11:33:50.880

使用如下所示的 dense_rank()：

```
SELECT DENSE_RANK() OVER(order by a.BoxCode) , row_number() over(order by a.ItemNo)as ItemNo, ItemDesc 
from #TableItems a 
inner join #TableBoxes b on a.BoxCode=b.BoxCode where a.BoxCode in ('X1','X4') 
```

# oracle - Oracle 在生成多页报告时报告 11g 使用错误的字体

> ID：10382809
> 
> 赞同：1
> 
> 时间：2012-04-30T11:18:25.977
> 
> 标签：oracle, fonts, oraclereports

我们有一个非常奇怪的问题，我什至不确定这是问这个问题的正确地方，但是我们刚刚从 10g 迁移到 Oracle Reports 11g，当我们运行 PDF 格式的报告时，它会产生超过一页的错误字体在某些地方使用。

它仅在报告的某些字段中（例如在小计的一行中）而不是整个页面。

如果我们运行相同的报告来创建单个页面（返回单个记录），字体就可以了。

如果我们生成报告的 RTF 版本，我们会得到相同的效果，但它使用与 PDF 版本完全不同的字体（在我们运行的测试中，它实际上决定选择wingdings 作为其字体）。

如果报表是使用本地 PC 客户端运行的，那么问题就会消失，它只会在报表服务器本身上运行它时才会显现出来。

报告要求使用的唯一字体是标准 Arial。

有谁知道这可能是什么原因造成的？服务器上有什么我们可以检查的吗？

# python - 在每天为每个用户随机生成的日期时间上执行函数

> ID：10382810
> 
> 赞同：0
> 
> 时间：2012-04-30T11:18:36.270
> 
> 标签：python, ios, datetime, heroku, scheduled-tasks

一个有趣的难题。这是我想要做的：

我有一个在 Heroku 上运行的 Pyramid (python 2.7.2) 网站，它将通知推送给我的 iPhone 应用程序用户。每天，每个用户都需要在上午 10:00 到晚上 10:00 之间随机生成的时间向他们发送推送通知（显然还需要知道用户的时区）。

我目前的计划如下：使用持久的工作进程每 1 分钟触发一次函数。每分钟，它将调用一个函数（在不同的线程上以免中断计时器），该函数将做两件事：

1.  检查每个时区是否是晚上 11:00（每天发生 24 次，每个时区一次）。如果为真，它将调用一个函数，该函数遍历相应时区中的每个用户并生成他们第二天的随机时间，然后将其存储在 Mongo 数据库中。

2.  在每一分钟，工作人员还将循环访问用户并检查他们是否在那时收到通知。如果到期，则发送通知。

我的问题是：有没有更好的方法不需要每天预先生成大量随机日期时间列表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T11:34:00.283

这是一些伪代码：

```
Once per PERIOD (e.g. 1 minute) in the RANGE:
    Let NOTECOUNT be the number of users needing notification
    Let FRACTION be the length of the RANGE divided by the PERIOD
    Notify FRACTION of users (either first N or randomly chosen)
    Update notified user records with the notification time

At the end of each RANGE:
    Notify all users whose last notification time is at least 24 hours ago 
```

没有明确说明如何处理多个时区。您可以简单地考虑每个支持的时区都需要上述过程的一个“实例”，并且每个时区中的用户列表将是每个实例中的候选列表。两个潜在的问题是用户可能会更改时区，而时区很糟糕，因此有时可能会发生两次（例如，当 DST 更改时），因此您应该考虑这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T11:36:15.183

当然还有其他方法。他们是否更好是另一回事。例如：假设在给定用户一天结束前还有*n分钟，他们还没有收到通知。**然后现在以概率 1/ n*向他们发送通知。这样，您不需要大量的随机日期时间列表，但您仍需要每分钟遍历所有用户，查看他们是否已收到通知，并为他们计算随机数。总体而言，计算量要多一些（尽管我怀疑差异是否很大），这意味着您所有的数据库更新都很小。

或者：每次通知用户时，*都会*生成他们的下一次更新时间。这样，下一次更新时间会以增量方式计算，但仍是提前知道的。

（如果您的用户数量相对较少，因此在大多数分钟没有通知，您可以使调度更智能 - 但我不会多说，因为如果您的用户那么少，那么数量无论如何，您的软件需要做的工作将可以忽略不计，并且针对这种情况进行优化是没有意义的。）

# java - 如何在 Blackberry Java 中只运行一次方法？

> ID：10382812
> 
> 赞同：0
> 
> 时间：2012-04-30T11:18:39.997
> 
> 标签：java, android, blackberry, blackberry-jde

我正在黑莓中开发一个应用程序。我必须编写只运行一次的代码或方法。该方法在创建数据库时执行操作。类似于 Android 中的 Oncreate 方法。任何形式的帮助表示赞赏。

一个Y。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T11:24:12.537

创建一个单例类并从单例类私有构造函数调用该方法，或者维护一个全局标志并在方法调用时检查该标志。

还有许多其他方法，但调用方法取决于您，您可以为此做任何事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T11:24:30.070

如果您想在应用程序生命周期内运行该代码，那么，

使用持久存储并添加一个标志，成功运行该代码后更改标志值。

黑莓和安卓都提供持久存储。

# php - 卷曲重定向不起作用。我究竟做错了什么？

> ID：10382815
> 
> 赞同：0
> 
> 时间：2012-04-30T11:18:49.143
> 
> 标签：php, redirect, curl, http-referer

我想使用 curl 将特定页面从我的 .in 域重定向到我的 .com 域，同时将 HTTP Referer 更改为其他内容（空白）。

我正在使用以下代码：

```
<?php 

$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, 'http://www.example.com/random');
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_REFERER, '');
curl_exec($ch);
/*$html=curl_exec($ch); - tried this, but does not work.*/
curl_close($ch);

?> 
```

上述脚本的 URL 类似于：`http://www.example.in/random.php` 导航到脚本所在的上述 URL 后，我希望客户端被重定向到`http://www.example.com/random`. 我得到的只是一个空白页，没有任何错误或任何其他数据，也没有重定向。

在执行 Firefox、Chrome、Safari 或 Opera 的脚本时，它不起作用。基本上，脚本中的某些内容是错误的，我无法弄清楚是什么。我对 Curl 了解不多，这个脚本基本上是从网络上摘下来的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T11:21:42.900

我可能是错的，但不是`curl()`为了下载文件而不是重定向？我会使用 php 来设置标头来进行重定向。

`header("Location: www.mysite.com");`

# php - AJAX 加载页面中的 Javascript

> ID：10382821
> 
> 赞同：0
> 
> 时间：2012-04-30T11:19:41.747
> 
> 标签：php, javascript, jquery, ajax

我有一个主（索引）页面，它动态加载页面并将它们放在它的 div 中，但这些页面中的 Javascript 不执行。具体这部分

```
<script type="text/javascript">
    $(document).ready(function(){

        $('#regForm').submit(function(e) {
            register();
            e.preventDefault(); 
        }); 
    });
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T11:23:25.530

您将不得不[`getScript`](http://api.jquery.com/jQuery.getScript/)像这样使用：

```
$('#foo').load('bar.html', function(){
    $.getScript("js/fileName.js");
    // call a function from fileName.js
}); 
```

您必须将 JS 代码放在该文件中并通过调用它`getScript`，然后您可以从中调用函数，如上所示。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-30T11:25:04.877

在 index.php 中编写您的 javascript 或在没有 document.ready 的加载页面底部编写

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-30T11:25:46.047

这实际上是一个跨浏览器问题：当`<div>`s 被包含标签的 HTML 动态填充时`<script>`，这些脚本可能会运行也可能不会运行 - 这种行为不仅在浏览器之间有所不同，而且在浏览器版本之间也有所不同。

我知道的唯一解决方法是提取您的 JS，单独发送并在设置内容后执行它`<div>`。

# iphone - MWPhotoBrowser 从 plist 添加数据？

> ID：10382824
> 
> 赞同：0
> 
> 时间：2012-04-30T11:19:48.673
> 
> 标签：iphone, sdk, nsarray, plist

试图从 plist 中获取一些数据到[MWPhotoBrowser](http://michaelwaterfall.com/post/3621813945/mwphotobrowser-a-simple-ios-photo-browser)示例应用程序中。

任何想法如何做到这一点？

```
UIViewController *converterController = nil;
    NSMutableArray *photos = [[NSMutableArray alloc] init];

    converterController = [[MWPhotoBrowser alloc] initWithPhotos:photos];
    converterController.hidesBottomBarWhenPushed = YES;

//here individual images can be added. However need to add images from a plist.

    [photos addObject:[MWPhoto photoWithFilePath:[[NSBundle mainBundle] pathForResource:@"image1" ofType:@"jpg"]]];
    [photos addObject:[MWPhoto photoWithFilePath:[[NSBundle mainBundle] pathForResource:@"image2" ofType:@"jpg"]]];
    [photos addObject:[MWPhoto photoWithFilePath:[[NSBundle mainBundle] pathForResource:@"image3" ofType:@"jpg"]]];
    [photos addObject:[MWPhoto photoWithFilePath:[[NSBundle mainBundle] pathForResource:@"image4" ofType:@"jpg"]]];

    if (converterController) {
        [self.navigationController pushViewController:converterController animated:YES];

        [converterController release];

    }
    [photos release]; 
```

可以如上所示单独添加对象，但不能使用 plist 来完成。

任何人都可以分享一个想法吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T10:50:54.367

好吧，我明白了，但它不起作用。

```
SString *path = [[NSBundle mainBundle] pathForResource:
        @"ImageData" ofType:@"plist"];

    // Build the array from the plist  
  photos = [[NSMutableArray alloc] initWithContentsOfFile:path]; 
```

使应用程序崩溃。我必须使用 MWPhoto 属性。

帮助任何人？也许迈克尔瀑布想调查一下？

编辑：

好的，这是工作代码（到目前为止它工作正常）

```
 NSUInteger nimages = 0;
    for (; ; nimages++) {

        NSString *nameOfImage_ = @"imageSufix";

        NSString *imageName = [NSString stringWithFormat:@"%@%d.jpg", nameOfImage_, (nimages + 1)];
        //NSLog(@"Name is %@", imageName); log the names

        image = [UIImage imageNamed:imageName];
        if (image == nil) {
            break;
        }

    [photos addObject:[MWPhoto photoWithImage:image]]; 
```

# json - 体式 - 无效字段

> ID：10382825
> 
> 赞同：0
> 
> 时间：2012-04-30T11:19:50.513
> 
> 标签：json, api, post, asana

我正在将以下 JSON 发布到 asana 的“任务”端点。

```
{
    "data": {
        "options": {
            "fields": [
                "name",
                "notes"
            ]
        },
        "workspace": <valid number>,
        "assignee": <valid number>
    }
} 
```

它每次都给我一个“无效字段”错误。我已经通读了几次 API，这个 JOSN 看起来与 API 所说的完全一样。有任何想法吗？

Asana API 为那些想要提供帮助的人提供：[Asana API 文档](http://developer.asana.com/documentation)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T18:19:40.537

（我为 Asana 工作）

“选项”字段是“数据”字段的*兄弟*，而不是子字段。文档中提到了这一点，但也许我们没有提供澄清示例以使其更加明显。

如果您将请求更改为如下所示：

```
{
    "options": {
        "fields": [
            "name",
            "notes"
        ]
    },
    "data": {
        "workspace": <valid number>,
        "assignee": <valid number>
    }
} 
```

事情应该工作。

# android - 在面向 ArrayIndexOutOfBoundsException 的自定义列表视图中

> ID：10382827
> 
> 赞同：1
> 
> 时间：2012-04-30T11:20:07.297
> 
> 标签：android, arrays, listview

我想要带有 2 个文本框的自定义 ListView，首先我可以显示号码，在另一个我可以显示其未接来电号码，已接或拨出号码，日期我可以在 ListView 的第二行显示日期和通话类型，但是当我尝试显示数字它给出以下错误。

```
04-30 16:38:02.764: E/AndroidRuntime(7312): FATAL EXCEPTION: main
04-30 16:38:02.764: E/AndroidRuntime(7312): java.lang.ArrayIndexOutOfBoundsException
04-30 16:38:02.764: E/AndroidRuntime(7312): at com.custom.ListViewAdapter.getView  (ListViewAdapter.java:64)
04-30 16:38:02.764: E/AndroidRuntime(7312):     at android.widget.AbsListView.obtainView(AbsListView.java:2203)
04-30 16:38:02.764: E/AndroidRuntime(7312):     at android.widget.ListView.measureHeightOfChildren(ListView.java:1204)
04-30 16:38:02.764: E/AndroidRuntime(7312):     at android.widget.ListView.onMeasure(ListView.java:1115)
04-30 16:38:02.764: E/AndroidRuntime(7312):     at android.view.View.measure(View.java:8339)
04-30 16:38:02.764: E/AndroidRuntime(7312):     at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3132)
04-30 16:38:02.764: E/AndroidRuntime(7312):     at android.widget.LinearLayout.measureChildBeforeLayout(LinearLayout.java:1012)
04-30 16:38:02.764: E/AndroidRuntime(7312):     at android.widget.LinearLayout.measureVertical(LinearLayout.java:381)
04-30 16:38:02.764: E/AndroidRuntime(7312):     at android.widget.LinearLayout.onMeasure(LinearLayout.java:304)
04-30 16:38:02.764: E/AndroidRuntime(7312):     at android.view.View.measure(View.java:8339)
04-30 16:38:02.764: E/AndroidRuntime(7312):     at   android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3132)
04-30 16:38:02.764: E/AndroidRuntime(7312):     at android.widget.FrameLayout.onMeasure(FrameLayout.java:245)
04-30 16:38:02.764: E/AndroidRuntime(7312):     at android.view.View.measure(View.java:8339)
04-30 16:38:02.764: E/AndroidRuntime(7312):     at android.widget.LinearLayout.measureVertical(LinearLayout.java:526)
04-30 16:38:02.764: E/AndroidRuntime(7312):     at android.widget.LinearLayout.onMeasure(LinearLayout.java:304)
04-30 16:38:02.764: E/AndroidRuntime(7312):     at android.view.View.measure(View.java:8339)
04-30 16:38:02.764: E/AndroidRuntime(7312):     at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3132)
04-30 16:38:02.764: E/AndroidRuntime(7312):     at android.widget.FrameLayout.onMeasure(FrameLayout.java:245)
04-30 16:38:02.764: E/AndroidRuntime(7312):     at android.view.View.measure(View.java:8339)
04-30 16:38:02.764: E/AndroidRuntime(7312):     at android.view.ViewRoot.performTraversals(ViewRoot.java:801)
04-30 16:38:02.764: E/AndroidRuntime(7312):     at android.view.ViewRoot.handleMessage(ViewRoot.java:1727)
04-30 16:38:02.764: E/AndroidRuntime(7312):     at android.os.Handler.dispatchMessage(Handler.java:99)
04-30 16:38:02.764: E/AndroidRuntime(7312):     at android.os.Looper.loop(Looper.java:123)
04-30 16:38:02.764: E/AndroidRuntime(7312):     at android.app.ActivityThread.main(ActivityThread.java:4627)
04-30 16:38:02.764: E/AndroidRuntime(7312):     at java.lang.reflect.Method.invokeNative(Native Method)
04-30 16:38:02.764: E/AndroidRuntime(7312):     at java.lang.reflect.Method.invoke(Method.java:521)
04-30 16:38:02.764: E/AndroidRuntime(7312):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:870)
04-30 16:38:02.764: E/AndroidRuntime(7312):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:628)
04-30 16:38:02.764: E/AndroidRuntime(7312):     at dalvik.system.NativeStart.main(Native Method) 
```

在这里，我已将**List**转换为**String[]**但如果我写
`lviewAdapter = new ListViewAdapter(this, timeArray, timeArray);`其中两个打印都**调用 Type**和**date** 但是当我写
`lviewAdapter = new ListViewAdapter(this, timeArray, timeArray);` 它时我能够得到输出**ArrayIndexoutOfBoundException**

**ListView2Activity.java**

```
import java.sql.Date; 
```

导入 java.util.ArrayList；导入 java.util.List；

```
import android.app.Activity;
import android.database.Cursor;
import android.os.Bundle;
import android.provider.CallLog;
import android.util.Log;
import android.view.View;
import android.widget.AdapterView;
import android.widget.ArrayAdapter;
import android.widget.ListView;
import android.widget.Toast;
import android.widget.AdapterView.OnItemClickListener;

public class ListView2Activity extends Activity implements OnItemClickListener
{
 /** Called when the activity is first created. */

ListView lview;
ListViewAdapter lviewAdapter;
List<String> dir;
List<String> num;
String[] numArray ;
String[] timeArray;
@Override
public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main); 
    dir = new ArrayList<String>();
    num = new ArrayList<String>();
    Cursor managedCursor = managedQuery( CallLog.Calls.CONTENT_URI,null, null,null, null);
    int number = managedCursor.getColumnIndex( CallLog.Calls.NUMBER ); 
    int type = managedCursor.getColumnIndex( CallLog.Calls.TYPE );
    int date = managedCursor.getColumnIndex( CallLog.Calls.DATE);

    Log.d("tag","call details");
    while ( managedCursor.moveToNext() ) 
    {
    String phNumber = managedCursor.getString( number );
    num.add(phNumber);

    String callType = managedCursor.getString( type );
    String callDate = managedCursor.getString( date );
    Date callDayTime = new Date(Long.valueOf(callDate));

    int dircode = Integer.parseInt( callType );
    switch( dircode )
    {
    case CallLog.Calls.OUTGOING_TYPE:
        dir.add("OUTGOING" + " , "+ callDayTime);

        break;
    case CallLog.Calls.INCOMING_TYPE:
        dir.add("INCOMING"+ " , "+ callDayTime);

        break;
    case CallLog.Calls.MISSED_TYPE:
        dir.add("MISSED"+  " , "+ callDayTime); 
        break;
    }// switch end
    Log.d("tag",phNumber +"," + dir );

    } // while end

     numArray = new String[num.size()];
    for (int i = 0; i < num.size(); i++) 
    {
        numArray[i] = num.get(i);  
    //  Log.i("tag", "in array :" + num[i]);
    } // for end

     timeArray = new String[dir.size()];
    for (int j = 0; j < dir.size(); j++) {
        timeArray[j] = dir.get(j);  
    } // for end

    managedCursor.close();

    lview = (ListView) findViewById(R.id.listView2);
    lviewAdapter = new ListViewAdapter(this, numArray, timeArray);

    System.out.println("adapter => "+lviewAdapter.getCount());

    lview.setAdapter(lviewAdapter);

    lview.setOnItemClickListener(this);
} // create end

public void onItemClick(AdapterView<?> arg0, View arg1, int position, long id) 
{
    // TODO Auto-generated method stub
    Toast.makeText(this,"Title => "+numArray[position]+"=> n Description"+timeArray[position], Toast.LENGTH_SHORT).show();
}} 
```

**ListViewAdapter.java**

```
import android.app.Activity;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.BaseAdapter;
import android.widget.TextView;

public class ListViewAdapter extends BaseAdapter
{
Activity context;
String title[];
String description[];

public ListViewAdapter(Activity context, String[] title, String[] description) {
    super();
    this.context = context;
    this.title = title;
    this.description = description;
}

public int getCount() {
    // TODO Auto-generated method stub
    return title.length;
}

public Object getItem(int position) {
    // TODO Auto-generated method stub
    return null;
}

public long getItemId(int position) {
    // TODO Auto-generated method stub
    return 0;
}

private class ViewHolder {
    TextView txtViewTitle;
    TextView txtViewDescription;
}

public View getView(int position, View convertView, ViewGroup parent)
{
    // TODO Auto-generated method stub
    ViewHolder holder;
    LayoutInflater inflater =  context.getLayoutInflater();

    if (convertView == null)
    {
        convertView = inflater.inflate(R.layout.listitem_row, null);
        holder = new ViewHolder();
        holder.txtViewTitle = (TextView) convertView.findViewById(R.id.textView1);
        holder.txtViewDescription = (TextView) convertView.findViewById(R.id.textView2);
        convertView.setTag(holder);
    }
    else
    {
        holder = (ViewHolder) convertView.getTag();
    }

    holder.txtViewTitle.setText(title[position]);
    holder.txtViewDescription.setText(description[position]);

return convertView;
}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T11:39:47.863

The above code is working well i just copy and paste it and run this code and get the following result.

![enter image description here](../Images/ada7cafcf1597c0ad71375b8f33e2f78.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T11:30:03.017

ok this is just a random guess, but I am thinking that one of your arrays is a different size. This would cause the error you are seeing if return title.length > description.length.

Reasoning ok when getCount() is called that is going to return how many views exist. Lets assume that title.length = 5\. Now the ListView is going to want to generate the five views so will call getView for position =1...5\. If description.length = 3 for instance you would get an exception at getView() where position = 4 when calling

```
holder.txtViewDescription.setText(description[position]); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T11:31:25.763

```
lviewAdapter = new ListViewAdapter(this, numArray, timeArray);
System.out.println("adapter => "+lviewAdapter.getCount());
lview.setAdapter(lviewAdapter);
lview.setOnItemClickListener(this); 
```

replace above code

```
if(timeArray.length > 0 )
{
   lviewAdapter = new ListViewAdapter(this, numArray, timeArray);
   System.out.println("adapter => "+lviewAdapter.getCount());
   lview.setAdapter(lviewAdapter);
   lview.setOnItemClickListener(this);
} 
```

# javascript - Javascript命令连接问题

> ID：10382828
> 
> 赞同：0
> 
> 时间：2012-04-30T11:20:13.397
> 
> 标签：javascript, google-maps, concatenation

我正在使用谷歌地图。我有一个工作正常的简单示例。这是代码

```
function initialize() {
        if (GBrowserIsCompatible()) {

var map = new GMap2(document.getElementById('map_canvas'));
            map.setCenter(new GLatLng(1, 103.849), 5);
            map.addOverlay(new ELabel(new GLatLng(1, 103.849), 1, 'style11'));  
            map.addOverlay(new ELabel(new GLatLng(1, 103.980), 2, 'style11'));
            map.setUIToDefault();}} 
```

上面的这个函数运行良好。现在我想让它动态化。比如设置中心我想传递变量，就像我放置这个我想使用这个 var center="1, 103.849" 和我放置这一行map.addOverlay(new ELabel(new GLatLng(1, 103.849), 1, 'style11')); 我想在变量中使用这一行......这是我的代码不起作用。有人可以纠正我吗？

```
function initialize() {
        if (GBrowserIsCompatible()) {
            var center = "1, 103.849";
            var Locations = "map.addOverlay(new ELabel(new GLatLng(1, 103.849), 1, 'style11'));map.addOverlay(new ELabel(new GLatLng(1, 103.980), 2, 'style11'));";

            var map = new GMap2(document.getElementById('map_canvas'));
            map.setCenter(new GLatLng(center), 5);
             +Locations +

            map.setUIToDefault();
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T11:24:03.463

GLatLng 将两个数字作为参数，而不是字符串。你需要做

```
var centerlat = 1;
var centerlng = 103.849;
map.setCenter(new GLatLng(centerlat,centerlng), 5); 
```

我不确定`+Locations+`设计的目的是什么。这是一个语法错误。只需使用`map.addOverlay()`您之前的线路即可。

```
map.addOverlay(new ELabel(new GLatLng(centerlat,centerlng), 2, 'style11')); 
```

请注意，第 2 版已被弃用，并且寿命不长。使用 API 的第 3 版（相当不同）。

# javascript - 从随机字母创建有效单词

> ID：10382829
> 
> 赞同：0
> 
> 时间：2012-04-30T11:20:33.833
> 
> 标签：javascript, jquery

这有点令人困惑——我为我的孩子们创建了一个小游戏，与 Bookworm 和 Wordsworth 之类的游戏没有什么不同。从字母表中随机选择49个字母（存储在一个数组中），孩子们点击相邻的字母来造词。检查将单词与字典文件（也在数组中）匹配，如果单词有效，则在网格中将所选字母替换为更多随机字母。到目前为止一切都很好。

接下来我想做的是检查网格，看看是否有任何有效的单词留在其中，如果你愿意，一种游戏结束。问题是我不知道从哪里开始！

网格中的字母可以很容易地放入一个数组中，但我缺乏计算 jQuery 或 javascript 代码的技能，这些代码可以检查网格以查找有效单词（记住字母必须彼此相邻）。字母显示在 DIV 元素中，而不是表格。

到目前为止，我只是设法将浏览器锁定在多个循环中，问题只会加剧，因为每次正确找到一个单词并替换网格中的字母时，代码都需要运行。

我知道这更像是一个解决问题的实验，而不是一个编码问题，所以如果这篇文章违反了这里的任何规则，我深表歉意，但有人知道如何最好地解决这个问题吗？

干杯BS

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T11:35:33.487

首先获取一行的所有字母。然后将第一个字母复制到一个字符串中并与字典进行比较。接下来，你取前两个字母并做同样的事情。当您达到 7 个字符长度时，您将最后 6 个字母与字典进行比较。当您完成该行中的所有检查后，请转到下一行。当所有行都完成后，对列执行相同的操作。

伪代码：

```
for ($currentCollumn=1; $gridWidth > $currentCollumn; $currentCollumn++) {
    $collumn = get collumn as string
    for ($i=1;$i!=7;$i++) {
        get first $i characters of $collumn and compare to dictionary
        }
    for ($i=1;$i!=7;$i++) {
        get last $i characters of $collumn and compare to dictionary
        }
}

for ($currentRow=1; $gridHeight > $currentRow; $currentRow++) {
    $row = get row as string
    for ($i=1;$i!=7;$i++) {
        get first $i characters of $row and compare to dictionary
        }
    for ($i=1;$i!=7;$i++) {
        get last $i characters of $row and compare to dictionary
        }
} 
```

* * *

编辑：第 2 版，因为我没有意识到这些词不仅限于直线。

从每个可能的位置开始。

```
// define variables:
booleanArray path[x][y] = false;  
p = pointerlocation;  
stack[] = p;  
currentString = ""; 
```

p.up/.down/.left/.right 检查 path[][] where y+1, y-1, x+1, x-1 分别。如果超出范围，它将返回 false。

The stack[] works like an x86 stack. Last in, first out.
push() adds a new object onto the stack
pop() gets the last object added to the stack and removes it from the stack

```
function getAllTheStrings(p.x, p.y) {
    while (p) {
        path (p.x, p.y) = true;
        currentString += p.getCharacter();
        // check neighbors
        if (p.up) {
           stack.push(p.up, path, currentString);
        } 
        if (p.down) {
           stack.push(p.down, path, currentString);
        } 
        if (p.left) {
           stack.push(p.left, path, currentString);
        } 
        if (p.right) {
           stack.push(p.right, path, currentString);
        }
        // add current string to list possible words
        foundWords.push(currentString);

        // pop next item from stack
        overwrite variables with stored values of: p, path, currentString

        if (stack is empty) {
        p = false; // end loop
        }
    }
} 
```

And that would be called by:

```
function getWords() {
    for ($y=1; $gridHeight > $y; $y++) {
        for ($x=1; $gridWidth > $x; $x++) {
            getAllTheStrings(x,y);
        }
} 
```

This function scales very badly with grid size since it has to check every single combination of possible paths. A 1x1 grid would take one test. A 2x2 would take 28 tests. At 3x3 I lost count at about 270 tests.

After the loop is finished `foundWords` would be checked word for word against the whole dictionary. 5 found words and 100 words in the dictionary would give 500 comparisons. In reality the dictionary would have at least a thousand words.

# find - xargs 命令中的 {} 是什么意思？

> ID：10382831
> 
> 赞同：-2
> 
> 时间：2012-04-30T11:20:49.260
> 
> 标签：find, xargs

我想使用以下命令将 1000000 个文件从源文件夹移动到目标文件夹：

```
find /pacs/ccn15/ccn15_input/ccn1/(sources path) -name 'CDRCCN*' \
 | head -100 |xargs -I mv '{}' /pacs/ccn10/ccn10_input/ccn1/(destination path) 
```

它工作正常，但我无法在这里找到“{}”的含义。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T18:26:32.630

`{}`是我们从管道中的上一个命令获得的输出文本的一种占位符。请参阅解释它的[此页面。](http://tldp.org/LDP/abs/html/special-chars.html)

# java - 在 Windows 上使用 FFMPEG 安卓

> ID：10382832
> 
> 赞同：2
> 
> 时间：2012-04-30T11:20:50.403
> 
> 标签：java, android, android-ndk, ffmpeg

我知道这个问题可能与许多其他问题重复，但没有好的答案，也没有好的教程可用

我想在我的项目中使用 ffmpeg 我在 Windows 上使用 android ndk7 不知道要下载什么 ffmpeg 代码，可用的编译教程适用于 UBUNTU 对 Windows 来说没什么

我真的很感激一个非常好的答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T11:38:01.933

我从来没有能够在 Windows 下为 Android 构建 FFMPEG，但在 Ubuntu 下成功地做到了（虽然经历了一些困难）。

我使用 Oracle VM Virtual Box 免费软件在 Windows 下模拟 Ubuntu 机器。

然后我使用来自 bambuser [http://bambuser.com/opensource](http://bambuser.com/opensource)的脚本构建了 FFMPEG 。

然后，我将生成的目录移动到我项目的 jni 文件夹下的 windows 中，并从我的 Android.mk 中引用了这些库

```
FFMPEG_DIR := ffmpeg
ifeq ($(TARGET_ARCH_ABI), armeabi)
FFMPEG_DIR := $(FFMPEG_DIR)/armeabi
else 
ifeq ($(TARGET_ARCH_ABI), armeabi-v7a) 
FFMPEG_DIR := $(FFMPEG_DIR)/armeabi-v7a
endif 
endif 

include $(CLEAR_VARS) 
LOCAL_MODULE := libavcodec
LOCAL_SRC_FILES := $(FFMPEG_DIR)/lib/$(LOCAL_MODULE).a
LOCAL_EXPORT_C_INCLUDES := $(LOCAL_PATH)/include
include $(PREBUILT_STATIC_LIBRARY)

include $(CLEAR_VARS) 
LOCAL_MODULE := libavcore
LOCAL_SRC_FILES := $(FFMPEG_DIR)/lib/$(LOCAL_MODULE).a
LOCAL_EXPORT_C_INCLUDES := $(LOCAL_PATH)/include
include $(PREBUILT_STATIC_LIBRARY)

include $(CLEAR_VARS) 
LOCAL_MODULE := libavdevice
LOCAL_SRC_FILES := $(FFMPEG_DIR)/lib/$(LOCAL_MODULE).a
LOCAL_EXPORT_C_INCLUDES := $(LOCAL_PATH)/include
include $(PREBUILT_STATIC_LIBRARY)

include $(CLEAR_VARS) 
LOCAL_MODULE := libavfilter
LOCAL_SRC_FILES := $(FFMPEG_DIR)/lib/$(LOCAL_MODULE).a
LOCAL_EXPORT_C_INCLUDES := $(LOCAL_PATH)/include
include $(PREBUILT_STATIC_LIBRARY)

include $(CLEAR_VARS) 
LOCAL_MODULE := libavformat
LOCAL_SRC_FILES := $(FFMPEG_DIR)/lib/$(LOCAL_MODULE).a
LOCAL_EXPORT_C_INCLUDES := $(LOCAL_PATH)/include
include $(PREBUILT_STATIC_LIBRARY)

include $(CLEAR_VARS) 
LOCAL_MODULE := libavutil
LOCAL_SRC_FILES := $(FFMPEG_DIR)/lib/$(LOCAL_MODULE).a
LOCAL_EXPORT_C_INCLUDES := $(LOCAL_PATH)/include
include $(PREBUILT_STATIC_LIBRARY)

include $(CLEAR_VARS) 
LOCAL_MODULE := libswscale
LOCAL_SRC_FILES := $(FFMPEG_DIR)/lib/$(LOCAL_MODULE).a
LOCAL_EXPORT_C_INCLUDES := $(LOCAL_PATH)/include
include $(PREBUILT_STATIC_LIBRARY) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-23T11:13:31.460

您可以将其用作 build_android.sh 我对其进行了测试，并且对我有用

```
#!/bin/bash
NDK=D:/android/ndk/android-ndk-r10d
SYSROOT=$NDK/platforms/android-8/arch-arm/
TOOLCHAIN=$NDK/toolchains/arm-linux-androideabi-4.8/prebuilt/windows
function build_one
{
./configure \
--prefix=$PREFIX \
--disable-shared \
--enable-static \
--disable-doc \
--disable-ffmpeg \
--disable-ffplay \
--disable-ffprobe \
--disable-ffserver \
--disable-avdevice \
--disable-doc \
--disable-symver \
--cross-prefix=$TOOLCHAIN/bin/arm-linux-androideabi- \
--target-os=linux \
--arch=arm \
--enable-cross-compile \
--sysroot=$SYSROOT \
--extra-cflags="-Os -fpic $ADDI_CFLAGS" \
--extra-ldflags="$ADDI_LDFLAGS" \
$ADDITIONAL_CONFIGURE_FLAG
make clean
make
make install
}
CPU=arm
PREFIX=$(pwd)/android/$CPU
ADDI_CFLAGS="-marm"
build_one 
```

您还需要运行以下命令：

```
dos2unix build_android.sh
chmod +x build_android.sh
./build_android.sh 
```

使用[本教程](https://www.packtpub.com/sites/default/files/downloads/Developing_Multimedia_Applications_with_NDK.pdf)作为参考

# c# - 如何使用 SOAP ENV 调用远程 Web 服务并捕获 Soap 异常

> ID：10382835
> 
> 赞同：0
> 
> 时间：2012-04-30T11:21:07.033
> 
> 标签：c#, webclient, soapexception

我正在使用 C# 的 WebClient.UploadString 方法访问 Web 服务（远程），并且正在传递带有所需凭据和数据的 SOAPEnv。

它工作正常，但是，我无法捕获远程 Web 服务返回的 SoapException。我阅读了 WebClient.UploadString 方法，它返回 WebException 或通用异常。

我只是想知道如何使用 SoapEnv 调用 Web 服务并捕获 SOAPException。使用 WebClient 方法的原因是通过 SoapEnv，因为 Web 服务需要 WS-Security Authentication。

问候， 锯齿状

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T12:49:06.243

为什么不使用向项目添加服务引用并创建 WCF 客户端代理？它似乎适用于各种服务。

至少在我的场景中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T12:34:12.040

尝试捕获soap异常并相应地使用soap错误，也尝试使用请求/响应方法，以便您可以获得原始响应。

```
try
{
  //Do calling web service
}
catch (SoapException soapEx)
{
  // Get soap exception here
   //Try to read soap faults here
}
catch(WebException wex)
{
  //Read network errors here
} 
```

# python - 如何在 CreateView 中设置 ForeignKey？

> ID：10382838
> 
> 赞同：55
> 
> 时间：2012-04-30T11:21:16.973
> 
> 标签：python, django, django-class-based-views

我有一个模型：

```
class Article(models.Model):
    text = models.CharField()
    author = models.ForeignKey(User) 
```

如何编写创建新模型实例并将`author`外键设置为的基于类的视图`request.user`？

**更新：**

解决方案移至下面的单独[答案](https://stackoverflow.com/a/10565744/1061572)。

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-05-12T17:03:27.850

我通过覆盖`form_valid`方法解决了这个问题。这里是详细的风格来澄清事情：

```
class CreateArticle(CreateView):
    model = Article

    def form_valid(self, form):
        article = form.save(commit=False)
        article.author = self.request.user
        #article.save()  # This is redundant, see comments.
        return super(CreateArticle, self).form_valid(form) 
```

然而我们可以让它简短（感谢 dowjones123），这种情况[在 docs 中提到](https://docs.djangoproject.com/en/dev/topics/class-based-views/generic-editing/#models-and-request-user)：

```
class CreateArticle(CreateView):
    model = Article

    def form_valid(self, form):
        form.instance.author = self.request.user
        return super(CreateArticle, self).form_valid(form) 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2016-06-18T22:06:45.340

我只是偶然发现了这个问题，这个线程引导我朝着正确的方向前进（谢谢！）。基于[这个 Django 文档页面](https://docs.djangoproject.com/en/dev/topics/class-based-views/generic-editing/#models-and-request-user)，我们可以完全避免调用表单的`save()`方法：

```
class CreateArticle(LoginRequiredMixin, CreateView):
    model = Article

    def form_valid(self, form):
        form.instance.author = self.request.user
        return super(CreateArticle, self).form_valid(form) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-11T11:50:58.797

berislav 在views.py 中的代码对我不起作用。表单按预期呈现，用户值在隐藏输入中，但表单没有保存（我不知道为什么）。我尝试了一种稍微不同的方法，它对我有用：

### 视图.py

```
from django.views.generic import *
from myapp.forms import ArticleForm
from myapp.models import Article

class NewArticleView(CreateView):
    model = Article
    form_class = ArticleForm
    def get_initial(self):
        return {
            "user": self.request.user
        } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-01T04:32:47.010

您应该为该模型设置一个`CreateView`using a 。`ModelForm`在表单定义中，您将 设置`ForeignKey`为具有`HiddenInput`小部件，然后使用`get_form`视图上的方法来设置用户的值：

表格.py：

```
from django import forms

class ArticleForm(forms.ModelForm):
    class Meta:
        model = Article
        widgets = {"user": forms.HiddenInput()} 
```

视图.py：

```
from django.views.generic import *
from myapp.forms import ArticleForm
from myapp.models import Article

class NewArticleView(CreateView):
    model = Article
    form_class = ArticleForm
    def get_form(self, form_class):
        initials = {
            "user": self.request.user
        }
        form = form_class(initial=initials)
        return form 
```

# r - optim/constrOptim 中的错误“'vmmin' 中的初始值不是有限的”

> ID：10382842
> 
> 赞同：8
> 
> 时间：2012-04-30T11:21:56.440
> 
> 标签：r

我的问题（以及我认为可以帮助解决它的问题）在“FOR REPRODUCTION”行之前得到了解释。之后我刚刚发布了我的代码，以防万一复制可能有助于解决它。

我使用 optim 和 constrOptim.nl 来解决我编写的函数 g （见下文）内的约束优化问题。

我知道下面使用的初始值并不理想，但我选择它们是因为它们会导致我在较短的程序中遇到问题。我使用该程序将模型参数校准为数据，并且对于更好的初始值、更高的公差等也会出现此问题。

**错误**

我调用我编写的函数 get_par ：

```
v<-c(0.12504710,0.09329359,0.06778733, 0.04883216, 0.04187344,0.02886261,0.02332951,0.02178576,0.02282214,0.02956336,0.03478598)
Ti=1/12
x<-log(cbind(0.8,0.85,0.9,0.95,0.975,1,1.025,1.05,1.1,1.15,1.2))

g(par2=c(-5,5),v=v,Ti=Ti,x=x) 
```

然后我得到

```
Error in optim: inital value 'vmmin' is not finite. 
```

**到目前为止我所观察到的**

所以我开始调试我的代码来找出这个错误到底发生在哪里。错误发生在函数 g（见下文）中（值 sigma=5,m=-5,y=(xm)/sigma,vtilde=v/12）

```
#print(paste("vW: sigma: ",sigma,"mv:",mv))

argmin<-constrOptim.nl(par=c(3*sigma,sigma,mv/2),fn=f,hin.jac=hinv.jac,
hin=hinv,heq.jac=heqv.jac,heq=heqv,control.outerlist(trace=T),
control.optim=list(abstol=10^(-10)),y=y,vtilde=vtilde,sigma=sigma) 
```

函数 constrOptim.nl 的轨迹显示

```
Outer iteration:  18 
Min(hin):  1.026858e-19 Max(abs(heq)):  0 
par:  10 9.99998 1.02686e-19 
fval =   6399 
```

最后一次迭代。我猜想在最后一次迭代中出现 1.02686e-19 存在某种数值问题。

我查看了函数 constrOptim.nl 和 albama （使用 debug() ），并且错误恰好发生在该行中

```
theta.old <- theta
atemp <- optim(par = theta, fn = fun, gr = grad, control = control.optim, 
    method = "BFGS", hessian = TRUE, ...) 
```

其中 theta=theta.old 具有值

```
Browse[2]> theta.old
[1]  1.000002e+01  9.999985e+00 -3.349452e-20 
```

因此它有一个略低于零的条目（它的绝对值甚至小于机器精度，不是吗？）。

当您查看函数 fun 时，您会意识到它调用了函数

```
R:
function (theta, theta.old, ...) 
{
gi <- hin(theta, ...)
if (any(gi < 0)) 
    return(NaN)
gi.old <- hin(theta.old, ...)
hjac <- hin.jac(theta.old, ...)
bar <- sum(gi.old * log(gi) - hjac %*% theta)
if (!is.finite(bar)) 
    bar <- -Inf
fn(theta, ...) - mu * bar
} 
```

hin(theta,...)=hinv(theta,...) 返回一个带有负数的向量，因此该函数返回 NaN。我想这应该会导致错误消息：“优化错误：初始值'vmmin'不是有限的”。我现在的问题是：

我该如何解决？我想过在出现如此小的值时强制程序以某种方式终止，但我还没有设法做到这一点。你有什么建议？

提前谢谢了，

繁殖：

**这是我的程序：**

函数 hinv、hinv.jac、heq 和 heq.jac 仅用于约束。我优化的函数是g。

```
library(alabama)
library(dfoptim)

#function f, par = (c,d,atilde)
f<-function(par3,y,vtilde,sigma){
sum((par3[3]+par3[2]*y+par3[1]*sqrt(y^2+1)-vtilde)^2)
}

#Equality/Inequality constraints

heqv<-function(par3,y,vtilde,sigma){

J1<-matrix(1/2*cbind(sqrt(2),sqrt(2),-sqrt(2),sqrt(2)),nrow=2,ncol=2) 
J2<-matrix(0,nrow=3,ncol=3)
J2[1:2,1:2]<-J1
J2[3,3]<-1

j<-J2%*%par3
j[2]-2*sqrt(2)*sigma
}

#Jacobian-matrix
hinv.jac<-function(par3,y,vtilde,sigma){

#J1, J2: Drehungen für die constraints
J1<-matrix(1/2*cbind(sqrt(2),sqrt(2),-sqrt(2),sqrt(2)),nrow=2,ncol=2) 
J2<-matrix(0,nrow=3,ncol=3)
J2[1:2,1:2]<-J1
J2[3,3]<-1

hjac<-matrix(cbind(1,-1,0,0,0,0,0,0,0,0,1,-1),nrow=4)%*%J2
hjac
}

hinv<-function(par3,y,vtilde,sigma){

#J1, J2: Drehungen für die constraints
J1<-matrix(1/2*cbind(sqrt(2),sqrt(2),-sqrt(2),sqrt(2)),nrow=2,ncol=2) 
J2<-matrix(0,nrow=3,ncol=3)
J2[1:2,1:2]<-J1
J2[3,3]<-1

j<-J2%*%par3
h<-rep(NA,4)
h[1]<- j[1]
h[2]<- sqrt(2)*2*sigma-j[1]
h[3]<-j[3]
h[4]<-max(vtilde)-j[3]
h
}

#Jacobian-matrix
heqv.jac<-function(par3,y,vtilde,sigma){
#J1, J2: Drehungen für die constraints
J1<-matrix(1/2*cbind(sqrt(2),sqrt(2),-sqrt(2),sqrt(2)),nrow=2,ncol=2) 
J2<-matrix(0,nrow=3,ncol=3)
J2[1:2,1:2]<-J1
J2[3,3]<-1

cbind(J2[2,1],J2[2,2],0)
}

#function g input: par2= (m,sigma): optimization of function f

g<-function(par2,v,Ti,x){

#definition of parameters being used
m<-par2[1]
sigma<-par2[2]
y<-(x-m)/sigma #Transformation von x zu y gemäß paper
vtilde<-Ti*v
mv<-max(vtilde)

#print(paste("vW: sigma: ",sigma,"mv:",mv))
argmin<-constrOptim.nl(par=c(3*sigma,sigma,mv/2),fn=f,hin.jac=hinv.jac,hin=hinv,heq.jac=heqv.jac,heq=heqv,control.outer=list(trace=F),control.optim=list(abstol=10^(-10)),y=y,vtilde=vtilde,sigma=sigma)
argmin$par
} 
```

# android - 旋转设备两次时，片段会丢失其状态

> ID：10382844
> 
> 赞同：4
> 
> 时间：2012-04-30T11:22:03.477
> 
> 标签：android, android-fragments

我有一个显示两个片段的活动：

*   创建活动时，它会显示`Fragment1`.
*   当用户按下按钮时`Fragment1`，它会显示`Fragment2`，添加到后台堆栈。

片段很简单。`Fragment1`包含`CheckBox`和`EditText`。`Fragment2`包含简单的`TextView`. 我也调用`setRetainInstance(true)`了片段的`onCreate(...)`方法。

**问题**：如果显示 并且设备旋转**两次**`Fragment1`，则会丢失其状态。但是，如果设备只旋转**一次**，一切都会按预期工作。`Fragment2`

 ******重现步骤：**

1.  启动程序。
2.  检查`CheckBox`并输入一些文本`EditText`
3.  按下`Button`启动`Fragment2`
4.  旋转装置
5.  再次旋转设备
6.  按下`Back`设备（或`ESC`模拟器）上的按钮返回`Fragment1`

`Fragment1`失去其状态（复选框未选中且`EditText`为空）。但是，如果您返回`Fragment1`后`step#4`-`Fragment1`保持其状态符合预期。

哪里有问题？所有代码都在下面，包括布局。

**主.xml**：

```
<?xml version="1.0" encoding="utf-8"?>
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/placeholder"
    android:layout_width="match_parent"
    android:layout_height="match_parent" /> 
```

**片段1.xml**：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <CheckBox
        android:id="@+id/checkBox1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="CheckBox" />

    <EditText
        android:id="@+id/editText1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >
    </EditText>

    <Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Start Fragment2" />

</LinearLayout> 
```

**片段2.xml**：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Fragment #2" />

</LinearLayout> 
```

**片段测试活动.java**：

```
package fragmenttest.example.com;

import android.app.Activity;
import android.app.FragmentManager;
import android.os.Bundle;

public class FragmentTestActivity extends Activity implements FragmentListener {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        FragmentManager fm = getFragmentManager();
        if (fm.findFragmentByTag(Fragment1.TAG) == null) {
            fm.beginTransaction().replace(R.id.placeholder, new Fragment1(), Fragment1.TAG).commit();
        }
    }

    @Override
    public void onButtonClick() {
        FragmentManager fm = getFragmentManager();
        if (fm.findFragmentByTag(Fragment2.TAG) == null) {
            fm.beginTransaction().replace(R.id.placeholder, new Fragment2(), Fragment2.TAG).addToBackStack(Fragment2.TAG).commit();
        }
    }
} 
```

**片段1.java**：

```
package fragmenttest.example.com;

import android.app.Activity;
import android.app.Fragment;
import android.os.Bundle;
import android.view.LayoutInflater;
import android.view.View;
import android.view.View.OnClickListener;
import android.view.ViewGroup;
import android.widget.Button;

public class Fragment1 extends Fragment {
    public static final String TAG = Fragment1.class.getName();
    private FragmentListener mListener;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setRetainInstance(true);
    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        View root = inflater.inflate(R.layout.fragment1, container, false);

        Button button = (Button) root.findViewById(R.id.button1);
        button.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {
                mListener.onButtonClick();
            }
        });

        return root;
    }

    @Override
    public void onAttach(Activity activity) {
        super.onAttach(activity);

        mListener = (FragmentListener) activity;
    }
} 
```

**片段2.java**：

```
package fragmenttest.example.com;

import android.app.Fragment;
import android.os.Bundle;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;

public class Fragment2 extends Fragment {
    public static final String TAG = Fragment2.class.getName();

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setRetainInstance(true);
    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        View root = inflater.inflate(R.layout.fragment2, container, false);
        return root;
    }
} 
```

**片段监听器.java**：

```
package fragmenttest.example.com;

public interface FragmentListener {
    public void onButtonClick();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T20:12:34.460

这可能是因为在恢复片段时未调用 onCreate。请参阅：http: [//developer.android.com/reference/android/app/Fragment.html#setRetainInstance(boolean)](http://developer.android.com/reference/android/app/Fragment.html#setRetainInstance%28boolean%29)****

# java - 无法让 charAt(0) 工作

> ID：10382845
> 
> 赞同：0
> 
> 时间：2012-04-30T11:22:06.907
> 
> 标签：java, string, if-statement, java.util.scanner

好的，所以我似乎无法让它工作，尽管很多人告诉我语法和逻辑是正确的。谁能告诉我我可能做错了什么？

```
public Scanner in = new Scanner(System.in);

public void movePlayer() {
    System.out.print("move: ");
    String str = in.nextLine();

    in.nextLine();

    char c = str.charAt(0);

    if (c == 'l' || c == 'L') {
        player.moveLeft();
    }
 } 
```

程序被 char 捕获`c = str.charAt(0);`

我被退回这个错误：

**java.lang.StringIndexOutOfBoundsException：字符串索引超出范围：0（在 java.lang.String 中）**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-30T11:26:08.900

您没有通过控制台输入任何内容，因此`str`为空。这就是`chatAt(0)`抛出异常的原因

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-30T11:26:48.357

你不想使用`nextLine()`. 你想用`next()`.

```
String str = in.next(); 
```

这是 Javadoc[`nextLine()`](http://docs.oracle.com/javase/6/docs/api/java/util/Scanner.html#nextLine%28%29)

> 将此扫描器前进到当前行并返回被跳过的输入。此方法返回当前行的其余部分，不包括末尾的任何行分隔符。位置设置为下一行的开头。

你想要[`next()`](http://docs.oracle.com/javase/6/docs/api/java/util/Scanner.html#next%28%29)：

> 从此扫描器中查找并返回下一个完整的令牌。一个完整的标记前后是匹配分隔符模式的输入。此方法可能会在等待输入扫描时阻塞，即使先前调用 hasNext() 返回 true。

这将阻止您使用空行并引发异常。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T11:32:44.357

那是ryt ..因为当你尝试到达`char`第0个位置时，它会抛出一个异常，因为f数组的大小为0。

可能你读这个是为了[从命令行获取 I/O](http://docs.oracle.com/javase/tutorial/essential/io/cl.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-30T11:35:36.810

添加对 Empty String 和 Null 的检查。你会避免很多头痛。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-30T11:47:28.197

如果在控制台中按 Enter 键`Scanner`，无论是否输入文本，都将被视为完整行。

在行首按 Enter，将 String 返回`""`到方法[Scanner.nextLine()](http://docs.oracle.com/javase/6/docs/api/java/util/Scanner.html#nextLine%28%29)。

`str.lenght () > 0`使用before添加检查`str.charAt(0)`。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-30T11:26:40.637

这意味着它`str`是空的。您应该检查它是否`null`不是空的。

```
if (str != null && !str.isEmpty()) {
...
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-03-19T09:31:04.617

改为使用`in.next()`。无论出于何种原因，有时`nextLine()`都不起作用。`CharAt()`

# facebook - Facebook 应用程序中的 Facebook 点赞按钮

> ID：10382847
> 
> 赞同：1
> 
> 时间：2012-04-30T11:22:33.597
> 
> 标签：facebook, facebook-like, href, facebook-apps, facebook-social-plugins

如果你有一个 Facebook 应用程序，例如一个简单的页面推广某些东西，你仍然可以在应用程序/视图本身内安装一个 Facebook Like 按钮。

我问的原因是它对我有用*，*但是如果我尝试将 Like 按钮的 URL 指定为我的应用程序的 URL，那么该按钮根本不会显示。如果我输入不同的 URL，那么它可以正常工作。

例如，指向开发人员页面的链接可以正常工作：

```
data-href="http://www.facebook.com/pages/Uktv-developer-area/123456789000000" 
```

但是，如果我包含对应用程序的引用，它会中断：

```
data-href="http://www.facebook.com/pages/Uktv-developer-area/123456789000000?sk=app_123456789000000" 
```

谁能发现为什么会这样？

# django - Django 模型：覆盖字段返回值

> ID：10382849
> 
> 赞同：9
> 
> 时间：2012-04-30T11:22:57.590
> 
> 标签：django, model, overriding, field

我想知道是否可以在返回字段时覆盖该字段的默认值。假设我有一个模型：

```
class ModelA(models.Model)
    name = models.CharField(max_length=30) 
```

有什么方法可以调用

```
modela_instance.name 
```

可以返回修改后的值，例如 name +“ foo”，但默认情况下附加 foo 的代码在模型本身内运行，所以我需要做的就是调用 name 来获取附加值？

我应该详细说明并说我实际上希望做的是在模型中有一个方法：

```
def get_name(self):
     return self.name + " foo" 
```

或类似的，只是希望 get_name 方法覆盖对字段“name”的调用。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-30T11:46:48.947

是的，您可以使用[属性](http://docs.python.org/library/functions.html#property)来执行此操作

```
class ModelA(models.Model)
    _name = models.CharField(...)

    def set_name(self, val):
        self._name = "%s - foo" % val

    def get_name(self):
        return self._name

    name = property(get_name, set_name) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T11:48:11.157

你为什么想做这个？不确定，但我认为这不是一个好主意。但是，您可以使用例如 unicode 方法：

```
class ModelA(models.Model)
    name = models.CharField(max_length=30)

    def __unicode__(self):
        return "%s : foo" % self.name 
```

并在调用时使用：

模型实例

或者当 foo 必须是动态的时：

```
class ModelA(models.Model)
    name = models.CharField(max_length=30)

    def __unicode__(self):
        return "%s : %s" % (self.name, self.make_foo())

    def make_foo(self):
        return "foo" 
```

或定义自己的方法：

```
class ModelA(models.Model)
    name = models.CharField(max_length=30)

    def alt_name(self):
        return "%s : foo" % self.name 
```

# c# - 我的第一个 3 层 Winform 应用程序中关于 BLL 和 DAL 的几个问题

> ID：10382853
> 
> 赞同：2
> 
> 时间：2012-04-30T11:23:02.493
> 
> 标签：c#, .net, winforms, n-tier-architecture

我正在尝试创建 3 层 winform 应用程序。由于这是我第一次尝试 3 层设计，所以我被卡住了，几乎没有问题。

该应用程序将支持附加多个 sqlite db 文件。

所以我创建了这样的课程

```
public class Database
{
    public string Name { get; set; }
    public string FilePath { get; set; }
    public bool isAttached { get; private set; }
} 
```

现在我想收集这些对象。

**我应该在下面创建另一个像 DatabaseList 这样的类，还是仅仅创建一个 List 就足够了**

```
public class DatabaseList : List<Database>
{
... 
```

对比

```
List<Database> myDatabases; 
```

**Form1.cs 中应该创建什么？**

例如，我假设上面的集合应该在 BusinessLayer 而不是 Form1.cs 中创建，并且仅在 Form1.cs 中创建 BusinessLayer 类。这个对吗？

**在哪里放置附加方法？**

该方法将是这样的：

```
 public void AttachDB(Database db)
    {
        MySqliteHelper.Attach(db.Name, db.FilePath);
        this.Add(db);
    } 
```

我是将方法放在 DatabaseList 类中（如果这是创建集合的方法）还是应该放在 BusinessLayer 中？

**如何使 Attach 方法支持其他关系数据库，例如也驻留在单个文件中的 MS SQL Compact Edition**

我想用与 MySqliteHelper 相同的方法创建另一个通用数据库帮助程序类，而 AttachDB 方法会调用它。就像是

```
MyDBHelper.Attach(db.Name, db.FilePath); 
```

或者这`Dependency Injections`是`Ninject`有帮助的地方吗？我以前从未使用过它，我从 Ninject 中回忆起的只是一个拥有不同武器的武士，所以在我看来，这与我的问题有点相似，有不同的特定数据库类。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T19:04:54.897

我将部分解决这个问题，因为它涵盖了很多领域。

## 什么是 3 层架构？

3 层（或*n*层，*分层*）架构基本上是接口不直接与数据库通信的任何设计，无论实际层有多薄。您可以创建一个具有获取和保存数据功能的类，它仍然可以作为 3 层架构。话虽如此，我将在下面解释的可能是 3 层架构最常见的实现。

## 层与层：有什么区别？

要了解 3 层体系结构，首先要区分层和层，这一点很重要。一个应用程序可以有很多物理层，但仍然只包含三个逻辑层。如果一张图片真的值一百万字，下面的图表应该会为你清楚。

![在此处输入图像描述](../Images/a295b137bac0bc74af53cce6df77cf13.png)

在上图中，*业务/中间层*由业务逻辑、业务对象和数据访问对象组成。该层的目的是为用户界面和数据库之间的中间人服务。

## 数据访问层 (DAL)

数据访问层由一个数据访问组件（见下文）和一个或多个数据访问对象组成。根据需要，数据访问对象通常设置为以下两种方式之一：

1.  每个*业务对象*一个*数据访问对象*
**   *许多业务对象*共享一个*数据访问对象**

 **听起来您将要处理多个数据库，因此使用一对一选项可能很有意义。这样做，您将可以灵活地指定哪个数据库/连接对应于哪个业务对象。

![在此处输入图像描述](../Images/bf0c7e663f429df3ff603140717dbc46.png)

## 数据访问组件

您的数据访问组件应该是一个非常通用的类，只包含连接数据库并与之交互所需的基本方法。在上图中，该组件由`dbConnection`类表示。

## 问题和答案

### Form1.cs 中应该创建什么？

前端处理的唯一事情是业务对象和业务逻辑。有时它不是那么非黑即白，但这就是想法。

### 在哪里放置附加方法？

`Attach`将连接字符串传递给您的数据访问组件，而不是方法。连接字符串可用于附加和/或连接到几乎任何数据库。

### 如何使 Attach 方法支持其他关系数据库，例如也驻留在单个文件中的 MS SQL Compact Edition？

看上面。

### 我应该在下面创建另一个像 DatabaseList 这样的类还是仅仅创建一个列表就足够了？

老实说，这取决于您，并且不会影响 3 层架构的有效性。您知道要满足的特定要求，因此如果有意义就这样做。不过，请考虑您的*数据访问对象*将如何与此类交互，因为您需要公开在从列表中选择的任何数据库上执行查询和非查询的方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T11:56:40.240

你缺乏的是从对象及其责任的角度思考。

什么对象负责创建数据库描述的实例？应该是`Form1`吗？

OOP 告诉你，如果你有这样的疑问，你可以遵循*Pure Fabrication*原则，只需创建另一个类来负责。这同样简单。

所以你可以创建一个类，调用它`DatabaseManager`，把你的数据库列表和`Attach`方法放在那里。您可能还希望此管理器成为环境类（与其他类共享的同一实例），以便您可以从中构建*单例*（但这不是必需的）。

DI 容器可能可以帮助您组织服务并管理它们的生命周期，但我建议您在误用这个想法之前先从一本好书开始。Mark Seemann 的“.NET 中的依赖注入”很好。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-04T17:53:46.867

You need to think in terms of modularity and abstraction. See you have multiple entities to be passed across layers.

Following are the examples: 1\. Presentation will create an object of business layer or business facade. But it will expect the logical entity from business layer.

1.  Business layer will create the object of DataAccess and will expect the logical entity from DataAccess to perform business operations.

2.  DataAccess will do whatever it would like to do to get the information from database. So if you need to connect the oracle / sql /sqllite / files system whatever but it will convert or say initialize the Logical entity (entity is a Class only consisting of properties).

So every layer will have their own responsibility and perform the operation it is responsible for.

So I think your db related operations will go in DataAccess.**

# java - org.springframework.beans.factory.NoSuchBeanDefinitionException：没有定义名为“customerService”的bean

> ID：10382856
> 
> 赞同：14
> 
> 时间：2012-04-30T11:23:09.310
> 
> 标签：java, spring, hibernate, spring-mvc, javabeans

我需要帮助解决我在尝试将我的 Web 应用程序部署到 tomcat 时遇到的这个错误。为什么没有定义 customerService bean？我是否在 web.xml 中遗漏了某些内容，或者我是否必须以某种方式映射 customerService？我正在使用注释进行映射。任何帮助将非常感激。这是来自本地主机日志的错误日志条目：

错误：

```
SEVERE: Exception sending context initialized event to listener instance of class org.springframework.web.context.ContextLoaderListener
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'customerController': Injection of resource dependencies failed; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No bean named 'customerService' is defined
    at org.springframework.context.annotation.CommonAnnotationBeanPostProcessor.postProcessPropertyValues(CommonAnnotationBeanPostProcessor.java:306)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1106)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:517)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:585)
    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:913)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:464)
    at org.springframework.web.context.ContextLoader.configureAndRefreshWebApplicationContext(ContextLoader.java:384)
    at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:283)
    at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:111)
    at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4600)
    at org.apache.catalina.core.StandardContext$1.call(StandardContext.java:5097)
    at org.apache.catalina.core.StandardContext$1.call(StandardContext.java:5092)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)
    at java.util.concurrent.FutureTask.run(FutureTask.java:166)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722)
Caused by: org.springframework.beans.factory.NoSuchBeanDefinitionException: No bean named 'customerService' is defined
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.getBeanDefinition(DefaultListableBeanFactory.java:529)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getMergedLocalBeanDefinition(AbstractBeanFactory.java:1095)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:277)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:197)
    at org.springframework.context.annotation.CommonAnnotationBeanPostProcessor.autowireResource(CommonAnnotationBeanPostProcessor.java:442)
    at org.springframework.context.annotation.CommonAnnotationBeanPostProcessor.getResource(CommonAnnotationBeanPostProcessor.java:416)
    at org.springframework.context.annotation.CommonAnnotationBeanPostProcessor$ResourceElement.getResourceToInject(CommonAnnotationBeanPostProcessor.java:549)
    at org.springframework.beans.factory.annotation.InjectionMetadata$InjectedElement.inject(InjectionMetadata.java:150)
    at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:87)
    at org.springframework.context.annotation.CommonAnnotationBeanPostProcessor.postProcessPropertyValues(CommonAnnotationBeanPostProcessor.java:303)
    ... 21 more

Apr 30, 2012 11:17:09 AM org.apache.catalina.core.ApplicationContext log
INFO: Closing Spring root WebApplicationContext
Apr 30, 2012 11:23:19 AM org.apache.catalina.core.ApplicationContext log
INFO: SessionListener: contextDestroyed()
Apr 30, 2012 11:23:19 AM org.apache.catalina.core.ApplicationContext log
INFO: ContextListener: contextDestroyed()
Apr 30, 2012 11:23:20 AM org.apache.catalina.core.ApplicationContext log
INFO: Destroying Spring FrameworkServlet 'spring'
Apr 30, 2012 11:23:20 AM org.apache.catalina.core.ApplicationContext log
INFO: Closing Spring root WebApplicationContext
Apr 30, 2012 11:23:27 AM org.apache.catalina.core.ApplicationContext log
INFO: Initializing Spring root WebApplicationContext
Apr 30, 2012 11:23:33 AM org.apache.catalina.core.ApplicationContext log
INFO: Initializing Spring FrameworkServlet 'spring'
Apr 30, 2012 11:23:35 AM org.apache.catalina.core.ApplicationContext log
INFO: ContextListener: contextInitialized()
Apr 30, 2012 11:23:35 AM org.apache.catalina.core.ApplicationContext log
INFO: SessionListener: contextInitialized()
Apr 30, 2012 11:23:57 AM org.apache.catalina.core.ApplicationContext log
INFO: Initializing Spring root WebApplicationContext
Apr 30, 2012 11:23:58 AM org.apache.catalina.core.StandardContext listenerStart
SEVERE: Exception sending context initialized event to listener instance of class org.springframework.web.context.ContextLoaderListener
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'customerController': Injection of resource dependencies failed; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No bean named 'customerService' is defined
    at org.springframework.context.annotation.CommonAnnotationBeanPostProcessor.postProcessPropertyValues(CommonAnnotationBeanPostProcessor.java:306)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1106)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:517)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:585)
    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:913)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:464)
    at org.springframework.web.context.ContextLoader.configureAndRefreshWebApplicationContext(ContextLoader.java:384)
    at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:283)
    at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:111)
    at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4600)
    at org.apache.catalina.core.StandardContext$1.call(StandardContext.java:5097)
    at org.apache.catalina.core.StandardContext$1.call(StandardContext.java:5092)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)
    at java.util.concurrent.FutureTask.run(FutureTask.java:166)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722)
Caused by: org.springframework.beans.factory.NoSuchBeanDefinitionException: No bean named 'customerService' is defined
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.getBeanDefinition(DefaultListableBeanFactory.java:529)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getMergedLocalBeanDefinition(AbstractBeanFactory.java:1095)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:277)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:197)
    at org.springframework.context.annotation.CommonAnnotationBeanPostProcessor.autowireResource(CommonAnnotationBeanPostProcessor.java:442)
    at org.springframework.context.annotation.CommonAnnotationBeanPostProcessor.getResource(CommonAnnotationBeanPostProcessor.java:416)
    at org.springframework.context.annotation.CommonAnnotationBeanPostProcessor$ResourceElement.getResourceToInject(CommonAnnotationBeanPostProcessor.java:549)
    at org.springframework.beans.factory.annotation.InjectionMetadata$InjectedElement.inject(InjectionMetadata.java:150)
    at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:87)
    at org.springframework.context.annotation.CommonAnnotationBeanPostProcessor.postProcessPropertyValues(CommonAnnotationBeanPostProcessor.java:303)
    ... 21 more 
```

web.xml **(mistest/WebContent/WEB-INF)** **更新**

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app id="WebApp_ID" version="2.4" 
         xmlns="http://java.sun.com/xml/ns/j2ee" 
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
         xsi:schemaLocation="http://java.sun.com/xml/ns/j2ee 
         http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd">

   <servlet>
    <servlet-name>spring</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
  </servlet>

    <servlet-mapping>
    <servlet-name>spring</servlet-name>
    <url-pattern>/mistest/*</url-pattern>
    </servlet-mapping>

    <context-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>/WEB-INF/applicationContext.xml</param-value>
    </context-param>

    <listener>
            <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
    </listener>

 </web-app> 
```

客户服务

```
package testapp.mis.service;

import java.util.List;

import testapp.mis.domain.Customer;

public interface CustomerService {

    public List<Customer> retrieveAllCustomerNames();
    public List<Customer> retrieveAllCustomerCountries();
    public void createCustomer(Customer customer);
    public List<Customer> retrieveAllCustomers();

} 
```

感谢您的帮助，如果我需要放置任何其他文件，请告诉我。

**编辑：**这是 applicationContext.xml 和 customerService 实现文件：

applicationContext.xml **(mistest/WebContent/WEB-INF)** **更新**

```
<?xml  version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:aop="http://www.springframework.org/schema/aop"
    xmlns:context="http://www.springframework.org/schema/context"
    xmlns:jee="http://www.springframework.org/schema/jee"
    xmlns:lang="http://www.springframework.org/schema/lang"
    xmlns:p="http://www.springframework.org/schema/p"
    xmlns:tx="http://www.springframework.org/schema/tx"
    xmlns:util="http://www.springframework.org/schema/util"
    xmlns:mvc="http://www.springframework.org/schema/mvc"
    xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
        http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop.xsd
        http://www.springframework.org/schema/jee http://www.springframework.org/schema/jee/spring-jee.xsd
        http://www.springframework.org/schema/lang http://www.springframework.org/schema/lang/spring-lang.xsd
        http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx.xsd
        http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util.xsd
         http://www.springframework.org/schema/context
      http://www.springframework.org/schema/context/spring-context-3.0.xsd
   http://www.springframework.org/schema/mvc
   http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd">

    <context:annotation-config/>
    <context:component-scan base-package="testapp.mis"/>
    <!-- Configures the @Controller programming model -->
    <mvc:annotation-driven />

    <bean id="viewResolver" class="org.springframework.web.servlet.view.InternalResourceViewResolver" 
            p:prefix="/WEB-INF/jsp/" p:suffix=".jsp" p:order="0"/>

    <bean id="messageSource"
        class="org.springframework.context.support.ReloadableResourceBundleMessageSource">
        <property name="basename" value="classpath:messages"/>
        <property name="defaultEncoding" value="UTF-8"/>
    </bean>
</beans> 
```

客户服务实施：

```
package testapp.mis.service;

import java.util.List;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Service;
import org.springframework.transaction.annotation.Transactional;

import testapp.mis.dao.CustomerDao;
import testapp.mis.domain.Customer;

@Service
public class CustomerServiceImpl implements CustomerService {

    @Autowired(required=true)
    private CustomerDao customerDao;

    @Transactional
    public List<Customer> retrieveAllCustomerNames() {
        return this.customerDao.getAllCustomerNames();
    }

    @Transactional
    public List<Customer> retrieveAllCustomerCountries() {
        return this.customerDao.getAllCustomerCountries();
    }

    @Transactional
    public void createCustomer(Customer customer){
        this.customerDao.saveCustomer(customer);
    }

    @Transactional
    public List<Customer> retrieveAllCustomers(){
        return this.customerDao.getAllCustomers();
    }

} 
```

**编辑2：**

这是客户控制器。我按照建议添加了@Autowired。

```
package testapp.mis.controller;

//import javax.annotation.Resource;
import java.util.List;

import testapp.mis.service.CustomerService;
import testapp.mis.domain.Customer;

import org.springframework.stereotype.Controller;
import org.springframework.ui.Model;
import org.springframework.web.bind.annotation.ModelAttribute;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestMethod;
import org.springframework.beans.factory.annotation.Autowired;

@Controller
@RequestMapping("/customer")
public class CustomerController {

    /*@Resource(name="customerService")
    private CustomerService customerService;
    */
    @Autowired
    private CustomerService customerService;

    @RequestMapping(value="/list", method=RequestMethod.GET)
    public String getCustomerList(Model model) {
        List<Customer> customers = customerService.retrieveAllCustomers();
        System.out.println("test");
        model.addAttribute("customerList", customers);

        return "customer";
    }

    @RequestMapping(value="/add", method=RequestMethod.GET)
    public String getCustomer(Model model) {

        model.addAttribute("customerAttribute", new Customer());

        return "new-customer";
    }

    @RequestMapping(value="/add", method=RequestMethod.POST)
    public String postCustomer(@ModelAttribute("customerAttribute") Customer customer) {
        customerService.createCustomer(customer);

        return "redirect:/mis/customer/list";
    }
} 
```

**spring-servlet.xml** (mistest/WebContent/WEB-INF)

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:p="http://www.springframework.org/schema/p" 
    xsi:schemaLocation="http://www.springframework.org/schema/beans 
            http://www.springframework.org/schema/beans/spring-beans-3.0.xsd">

    <!-- Declare a view resolver -->
    <bean id="viewResolver" class="org.springframework.web.servlet.view.InternalResourceViewResolver" 
            p:prefix="/WEB-INF/jsp/" p:suffix=".jsp" />

</beans> 
```

**hibernate-context.xml** (mistest/WebContent/WEB-INF)

```
<?xml version="1.0" encoding="UTF-8"?>
<beans  xmlns="http://www.springframework.org/schema/beans"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xmlns:p="http://www.springframework.org/schema/p"
        xmlns:tx="http://www.springframework.org/schema/tx"
        xmlns:context="http://www.springframework.org/schema/context"
        xsi:schemaLocation="
           http://www.springframework.org/schema/beans
           http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
           http://www.springframework.org/schema/tx
           http://www.springframework.org/schema/tx/spring-tx-3.0.xsd
           http://www.springframework.org/schema/context
           http://www.springframework.org/schema/context/spring-context-3.0.xsd
      ">

 <context:property-placeholder location="/WEB-INF/spring.properties" />

    <!-- Enables annotations for transaction management -->
    <tx:annotation-driven transaction-manager="transactionManager" />

    <!-- Declare the Hibernate SessionFactory for retrieving Hibernate sessions -->
    <bean id="sessionFactory" class="org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean"
        p:dataSource-ref="dataSource"
        p:configLocation="${hibernate.config}"
        p:packagesToScan="testapp.mis"/>

 <!-- Declare a datasource that has pooling capabilities--> 
 <bean id="dataSource" class="com.mchange.v2.c3p0.ComboPooledDataSource"
    destroy-method="close"
    p:driverClass="${app.jdbc.driverClassName}"
    p:jdbcUrl="${app.jdbc.url}"
    p:user="${app.jdbc.username}"
    p:password="${app.jdbc.password}"
    p:acquireIncrement="5"
    p:idleConnectionTestPeriod="60"
    p:maxPoolSize="100"
    p:maxStatements="50"
    p:minPoolSize="10" />

 <!-- Declare a transaction manager-->
 <bean id="transactionManager" class="org.springframework.orm.hibernate3.HibernateTransactionManager"
          p:sessionFactory-ref="sessionFactory" />

</beans> 
```

**hibernate.cfg.xml** (mistest/WebContent/WEB-INF)

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE hibernate-configuration PUBLIC
  "-//Hibernate/Hibernate Configuration DTD 3.0//EN"
  "http://hibernate.sourceforge.net/hibernate-configuration-3.0.dtd">

<hibernate-configuration>
  <session-factory>

   <!-- We're using MySQL database so the dialect needs to MySQL as well-->
    <property name="hibernate.dialect">org.hibernate.dialect.MySQL5InnoDBDialect</property>
    <!-- Enable this to see the SQL statements in the logs-->
    <property name="show_sql">false</property>

    <!-- Remove after testing -->

    <!-- This will drop our existing database and re-create a new one.
      Existing data will be deleted! -->
    <property name="hbm2ddl.auto">create</property>
  </session-factory>
</hibernate-configuration> 
```

/D

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-30T11:50:34.677

通过阅读您的异常，可以确定您忘记了 autowire customerService

您应该自动连接您的客户服务。

在您的控制器类中进行以下更改

```
@Controller
public class CustomerController{

    @Autowired
    private Customerservice customerservice;
......other code......

} 
```

再次您的服务实现类

写

```
@Service
public class CustomerServiceImpl implements CustomerService {
    @Autowired
    private CustomerDAO customerDAO;
......other code......

.....add transactional methods
} 
```

如果您使用休眠，请在您的 applicationcontext xml 文件中进行必要的更改（需要配置会话工厂）。

你应该在你的 DAO 实现中自动装配 sessionFactory 设置方法

请找到示例应用程序上下文：

```
<?xml  version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:aop="http://www.springframework.org/schema/aop"
    xmlns:context="http://www.springframework.org/schema/context"
    xmlns:jee="http://www.springframework.org/schema/jee"
    xmlns:lang="http://www.springframework.org/schema/lang"
    xmlns:p="http://www.springframework.org/schema/p"
    xmlns:tx="http://www.springframework.org/schema/tx"
    xmlns:util="http://www.springframework.org/schema/util"
    xmlns:mvc="http://www.springframework.org/schema/mvc"
    xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
        http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop.xsd
        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd
        http://www.springframework.org/schema/jee http://www.springframework.org/schema/jee/spring-jee.xsd
        http://www.springframework.org/schema/lang http://www.springframework.org/schema/lang/spring-lang.xsd
        http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx.xsd
        http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util.xsd
        http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc.xsd">

    <context:annotation-config />
    <context:component-scan base-package="com.sparkle" />
    <!-- Configures the @Controller programming model -->
    <mvc:annotation-driven />

    <bean id="viewResolver" class="org.springframework.web.servlet.view.InternalResourceViewResolver" 
            p:prefix="/WEB-INF/jsp/" p:suffix=".jsp" p:order="0" />

    <bean id="messageSource"
        class="org.springframework.context.support.ReloadableResourceBundleMessageSource">
        <property name="basename" value="classpath:messages" />
        <property name="defaultEncoding" value="UTF-8" />
    </bean>
    <!-- <bean id="propertyConfigurer"
        class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer"
        p:location="/WEB-INF/jdbc.properties" /> -->

     <bean id="propertyConfigurer"
        class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
    <property name="locations">         
        <list>
            <value>/WEB-INF/jdbc.properties</value>          

        </list>    
    </property>     
    </bean>

    <bean id="dataSource"
        class="org.springframework.jdbc.datasource.DriverManagerDataSource"
        p:driverClassName="${jdbc.driverClassName}"
        p:url="${jdbc.databaseurl}" p:username="${jdbc.username}"
        p:password="${jdbc.password}" />

    <bean id="sessionFactory"
        class="org.springframework.orm.hibernate3.LocalSessionFactoryBean">
        <property name="dataSource" ref="dataSource" />
        <property name="configLocation">
            <value>classpath:hibernate.cfg.xml</value>
        </property>
        <property name="configurationClass">
            <value>org.hibernate.cfg.AnnotationConfiguration</value>
        </property>
        <property name="hibernateProperties">
            <props>
                <prop key="hibernate.dialect">${jdbc.dialect}</prop>
                <prop key="hibernate.show_sql">true</prop>
            </props>
        </property>
    </bean>

    <tx:annotation-driven />

   <bean id="transactionManager" class="org.springframework.orm.hibernate3.HibernateTransactionManager"
          p:sessionFactory-ref="sessionFactory"/>

</beans> 
```

请注意，我正在使用 jdbc.properties 文件作为 jdbc url 和驱动程序规范

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-30T11:29:30.477

`@Service`既然你说过，你将不得不注释你的服务`I am using annotations for mapping`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-30T11:54:31.927

请确保您的 applicationContext.xml 文件已通过在您的 web.xml 文件中指定来加载：

```
 <context-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>/WEB-INF/applicationContext.xml</param-value>
    </context-param> 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-08-26T07:50:40.040

只是另一种可能性：如果您没有使用名称定义 bean，则 Spring 按类型而不是按名称初始化 bean，如果您按其类型使用它，则可以：

制片人：

```
@Service
public void FooServiceImpl implements FooService{} 
```

消费者：

```
@Autowired
private FooService fooService; 
```

或者

```
@Autowired
private void setFooService(FooService fooService) {} 
```

但如果您按名称使用它就不行：

```
ApplicationContext ctx = new ClassPathXmlApplicationContext("applicationContext.xml");
ctx.getBean("fooService"); 
```

它会抱怨：`org.springframework.beans.factory.NoSuchBeanDefinitionException: No bean named 'fooService' is defined` 在这种情况下，将名称分配给`@Service("fooService")`它会使其工作。

# php - PHP OOP 多重调用

> ID：10382864
> 
> 赞同：3
> 
> 时间：2012-04-30T11:23:24.020
> 
> 标签：php, oop

我在一些图书馆看到过这样的事情：

```
$this->getResponse()->setRedirect($returnUrl); 
```

这个“多重调用”是如何完成的，或者，应该如何构建这个类来做这样的事情？

我认为 ：

```
class greeting
{
    public function hi()
    {
        public function howAreYou()
        {
            echo 'How are you?';
        }
    }
}
$greet = new greeting;
$greet->hi()->howAreYou(); 
```

但我认为它不太好，我最好使用类似扩展的东西，但我不知道。谢谢你的建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-30T11:26:40.993

如果这是一个调用自身的类实例，则称为“方法链接”。

在 PHP 中，可以使用`return $this`; 请注意，这是一种与类继承非常不同的机制——将它们视为可互换的并没有真正的意义。

另请参阅：[https ://stackoverflow.com/search?q=method+chaining+php](https://stackoverflow.com/search?q=method+chaining+php)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-30T11:26:27.187

`getResponse()`正在返回一个具有`setRedirect()`方法的类实例。

例子：

```
class Foo
{
    public function getResponse()
    {
        $redirect = new Bar();
        return $redirect;
    }
}

class Bar
{
    public function setRedirect($returnUrl)
    {
        // do something
    }
}

$foo = new Foo();

$foo->getResponse()->setRedirect("returnUrl"); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-30T11:27:03.237

不。

您所要做的就是在每个函数的最后返回 self 。

所以你的例子就像>

```
class greeting
{
    public function hi()
    {
        echo "Hi";

        return $this;
    }

    public function howAreYou()
    {
        echo 'How are you?';

        return $this;
    }
}

$greet = new greeting;
$greet->hi()->howAreYou(); 
```

甚至：

```
$greet->hi()->howAreYou()->hi()->howAreYou(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-30T11:31:21.630

链接方法与在方法中声明函数不同......实际上后者会报错（不是函数声明，而是你调用它的方式）。为了链接一个方法，只需让它返回对象本身：

```
Class chainableObject
{
    public $name=null;
    public function __construct($name='')
    {
        $this->name=$name;
        return $this;
    }

    public function setName($name)
    {
        $this->name = $name;
        return $this;//makes chainable
    }

    public function greet()
    {
        echo 'Hello, '.$this->name;
        return $this;
    }
}

$chain = new chainableObject('Frank')->greet();//outputs: Hello, frank 
```

解释：所有方法都返回实例本身，所以基本上，像这样阅读片段的最后一行 [create object with name:Frank]=>call method greet on the return value on this action。由于返回值是`$this`具有 greet 方法的对象，这就是将要发生的事情......简单，更多信息：只需 google *php 方法链接*

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-30T11:31:42.733

```
 class stutter{
      public function a(){
      echo 'h';
      return $this;
     }
      public function b(){
       echo 'hello world!';
     }
    } 
```

$var=新口吃（）；变量->a()->b();

输出是：

> h你好世界

# android - 如何在 android 3.x 上禁用或隐藏系统栏

> ID：10382871
> 
> 赞同：0
> 
> 时间：2012-04-30T11:23:42.053
> 
> 标签：android, android-widget, android-3.0-honeycomb, widget, root-access

我想知道是否可以删除/隐藏/禁用始终显示在 android 3.x 上的底部菜单栏。如果不是 - 至少如果可以隐藏小部件栏的打开或禁用核心小部件。是否以编程方式 - 当我的应用程序处于前台时，我必须拒绝访问底部菜单。

请帮忙。提前谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-30T11:26:32.170

> 我想知道是否可以删除/隐藏/禁用始终显示在 android 3.x 上的底部菜单栏。

不，您不能删除/隐藏/禁用系统栏。

> 如果不是 - 至少如果可以隐藏小部件栏的打开或禁用核心小部件

Android中没有“小部件栏”或“核心小​​部件”的概念，所以我不知道你在这里指的是什么。

> 当我的应用程序处于前台时，我必须拒绝访问底部菜单。

幸运的是，出于明显的安全原因，这是不可能的。

欢迎您构建您自己的自定义固件，并将其加载到您自己的包含此“功能”的自定义硬件上。

# java - 快速java输入\输出流

> ID：10382873
> 
> 赞同：0
> 
> 时间：2012-04-30T11:23:54.260
> 
> 标签：java, inputstream, outputstream, java-io

我有一个使用响应输出流将 pdf 文件复制到客户端的 servlet

```
private boolean copyStreamToStream(InputStream in, OutputStream target) {

    logger.info("start copy file to stream");
    try {

        byte[] buffer = new byte[1024 * 8];
        int len = in.read(buffer);
        while (len != -1) {
            target.write(buffer, 0, len);
            len = in.read(buffer);
        }
        in.close();
        target.flush();
        target.close();
        logger.info("end copy file to stream");

    } catch (Exception ex) {

        logger.error("Error: ", ex);
        return false;
    }
    return true;

} 
```

磁盘上 pdf 文件的 InputStream 和 response.getOutputStream() 的 OutputStream

问题是PDF文件是一个大文件，在客户端加载它需要很长时间。有什么办法可以加快速度？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T11:27:33.453

发送文件以供下载，而不是将其作为直接响应对象传回。

```
// Set the headers.
response.setContentType("application/x-download");
response.setHeader("Content-Disposition", "attachment; filename=" + filename);

// Send the file for download.
OutputStream out = response.getOutputStream(  ); 
```

已编辑。

# graphics2d - java - 如何从硬盘驱动器中获取图像到java中的Bufferdimage

> ID：10382880
> 
> 赞同：1
> 
> 时间：2012-04-30T11:24:13.740
> 
> 标签：graphics2d

目前我和我团队的其他一些人正在尝试为一个学生项目构建一个导航应用程序。我们正在使用 JXMapKit，并且想为地图上的航点设置另一个 renderer，因此需要一个使用 Graphics2D 显示图像的方法（我至少我相信该方法可以使用此对象）。所以这就是问题所在：我怎样才能从我的硬盘驱动器中获取一个正常的图像到这个 Graphics2D 对象中？我读了一些关于我需要 Bufferedimage 的内容，但这对我没有多大帮助。我有人明白我的意思，因为我的英语是，友好的口语不是最好的^^

无论如何，我希望有人可以帮助我解决这个问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T11:27:36.533

您可以像这样使用[ImageIO.read()](http://docs.oracle.com/javase/1.4.2/docs/api/javax/imageio/ImageIO.html#read%28java.io.File%29)：

```
String pathToMyFile = "C:\image.jpg";
BufferedImage image = ImageIO.read(new File(pathToMyImageFile)); 
```

> 返回一个 BufferedImage 作为使用从当前注册的那些中自动选择的 ImageReader 解码提供的文件的结果。该文件被包装在一个 ImageInputStream 中。如果没有注册的 ImageReader 声称能够读取结果流，则返回 null。

然后您可以使用Graphics2D 对象的[drawImage()函数：](http://docs.oracle.com/javase/1.4.2/docs/api/java/awt/Graphics.html#drawImage%28java.awt.Image,%20int,%20int,%20java.awt.image.ImageObserver%29)

```
int x,y = 10; //the coorinates where to draw the image
graphics2D.drawImage(image, x, y, null) 
```

# c++ - C++ 使用带有 boost::lexical_cast 的类

> ID：10382884
> 
> 赞同：9
> 
> 时间：2012-04-30T11:24:43.773
> 
> 标签：c++, boost, lexical-cast

我想将我的*测试*类与`boost::lexical_cast`. 我已经重载`operator<<`，`operator>>`但它给了我运行时错误。
这是我的代码：

```
#include <iostream>
#include <boost/lexical_cast.hpp>
using namespace std;

class Test {
    int a, b;
public:
    Test() { }
    Test(const Test &test) {
        a = test.a;
        b = test.b;
    }
    ~Test() { }

    void print() {
        cout << "A = " << a << endl;
        cout << "B = " << b << endl;
    }

    friend istream& operator>> (istream &input, Test &test) {
        input >> test.a >> test.b;
        return input;
    }

    friend ostream& operator<< (ostream &output, const Test &test) {
        output << test.a << test.b;
        return output;
    }
};

int main() {
    try {
        Test test = boost::lexical_cast<Test>("10 2");
    } catch(std::exception &e) {
        cout << e.what() << endl;
    }
    return 0;
} 
```

输出：

```
bad lexical cast: source type value could not be interpreted as target 
```

顺便说一句，我正在使用 Visual Studio 2010 但我已经尝试过使用 g++ 的 Fedora 16 并得到了相同的结果！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-30T12:02:37.953

Your problem comes from the fact that `boost::lexical_cast` does not ignore whitespaces in the input (it unsets the `skipws` flag of the input stream).

The solution is to either set the flag yourself in your extraction operator, or just skip one character. Indeed, the extraction operator should mirror the insertion operator: since you explicitely put a space when outputting a `Test` instance, you should explicitely read the space when extracting an instance.

[This thread](http://lists.boost.org/Archives/boost/2007/01/116013.php) discusses the subject, and the recommended solution is to do the following:

```
friend std::istream& operator>>(std::istream &input, Test &test)
{
    input >> test.a;
    if((input.flags() & std::ios_base::skipws) == 0)
    {
        char whitespace;
        input >> whitespace;
    }
    return input >> test.b;
} 
```

# iphone - NSArray 设置属性不起作用

> ID：10382890
> 
> 赞同：1
> 
> 时间：2012-04-30T11:25:14.883
> 
> 标签：iphone, objective-c, nsmutablearray, nsarray

基本上我要做的是进行网络刷新并获取对象，将其存储在我的应用程序委托中的 nsmutable 数组中。然后我有一个 listviewController 使用该可变数组来显示数据。

设置 nsarray 在这里不起作用是代码：

```
//Appdelegate code called after pulldown to refresh is done on listview:

     [ListView setArrayElements:(NSMutableArray*)sortedArray ];
      NSLog(@"sortedArray count:%d",sortedArray);  
     NSLog(@"ListView Array count:%d",[ListView.ArrayElements count]);

     Result i get in log : "sortedArray count:12" (which is perfect)&"ListView Array count:0" (this is not the right result) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T08:41:00.400

如果没有看到更多代码，很难假设，但是如何定义`ArrayElements`属性？它可能不会保留自己，并且您可能没有在`ListView`创建对象时对其进行初始化。

让我知道这个是否奏效;

确保`ArrayElements`在您`ListView.h`的创建如下：

```
@property (nonatomic, retain) NSMutableArray *ArrayElements; 
```

或在`-init`或`-viewDidLoad`您的`ListView`,

```
self.ArrayElements = [[NSMutableArray alloc] init]; 
```

不要忘记释放您保留的内容：

```
- (void)dealloc
{
     //.....
     [ArrayElements release];
     [super dealloc];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T11:37:30.127

```
 - (void)viewDidAppear:(BOOL)animated 
 {
    [super viewDidAppear:animated];
    [self.mTableView reloadData];
 } 
```

使用这个方法

* * *

## 回答 #3

> 赞同：-4
> 
> 时间：2012-04-30T11:29:54.637

不要将 UITableView 对象作为属性。只需使用 tableView 对象，删除“自我”。部分。告诉我它是否有帮助！

# mysql - mysql ini文件datadir文件夹名称问题

> ID：10382891
> 
> 赞同：0
> 
> 时间：2012-04-30T11:25:25.717
> 
> 标签：mysql, directory, ini

我对一个奇怪的问题感到震惊。在更改 mysql.ini 中的 datadir 后，我试图停止/启动 mysql。
我创建了一个文件夹**F:\testdirformysql\data**并且我在 mysql.ini 中将 datadir 参数指定为**F:\Testdirformysql\data**。
请注意，ini 文件中的第一个字母是大写字母。但在文件夹名称中，它是完整的小写字母。
现在我已经从 MySQL 的安装目录中复制了 mysql 文件夹。并从服务-> 启动服务启动 mysql。它的启动成功。

但是，当我将 mysql.ini 中的 datadir 参数指定为**F:\testdirformysql\data**时，它没有启动。现在ini文件中文件夹的第一个字母是小写字母。

我的环境是 - Windows 7 和 Windows XP 数据库版本 Mysql MySQL Server 5.0。

如果这是一个愚蠢的问题，请原谅我。

否则请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T04:06:29.940

我得到了解决方案。使用正斜杠 F:/path/to/file 或加倍反斜杠 F:\path\to\file

# c++ - 程序无法读取子数组 [0]

> ID：10382896
> 
> 赞同：-4
> 
> 时间：2012-04-30T11:25:44.447
> 
> 标签：c++, debugging, 2-3-4-tree

在这段代码中，我将 numitems 声明为静态变量，并初始化了类的超大尺寸。因为我认为这是错误的主要原因，`(return (numitems==order-1));`但这里也是与相关的问题`(childarrray[0]==NULL)`，完全这段代码取自 Java 并转换为 C++，所以我添加了指针而不是引用。请帮助修复我的代码中的错误。

```
 #include<iostream>
    #include<cstring>
    using namespace std;
    class data
    {
    public:
        long ddata;
        data(long dd)
        {
            ddata=dd;
        }
        void display()
        {
            cout<<ddata<<"  ";
        }
        };
    class Node
    {
    private:
    //public:
          static const  int order=4;
        static int numitems;
        Node *parent;
        Node *childarray[order];
        data *item[order-1];
    public:
        Node(){}
    public:
        void connect(int childnum,Node *child)
        {
            childarray[childnum]=child;
            if(child!=NULL)
                child->parent=(this);

        }
        //disconetc from this node,return it;

        Node *disconnectchild(int childnum)
        {
            Node *tempnode=childarray[childnum];
            childarray[childnum]=NULL;

         return  (tempnode);
        }
        Node *getchild(int childnum){
            return childarray[childnum];
    }
        Node *getparent()
        {

            return parent;
        }
        bool isleaf()
        {
            return ((childarray[0]==NULL)?true:false);

        }
        int getnumitems()
        {
            return numitems;
        }
        data *getitem(int index)
        {
            return item[index];

        }

        bool isfull()
        {

            return (numitems==(order-1));
        }
        int finditem(long key)
        {
            for(int j=0;j<order-1;j++)
            {
                if(item[j]==NULL)
                    break;
                else if(item[j]->ddata==key)
                     return j;

            }
            return -1;

        }
        int insertitem(data *newitem)
        {
            if(numitems==order-1)
                  return 0;
            numitems++;
            long newkey=newitem->ddata;
            for(int j=order-2;j>=0;j--)
            {
                if(item[j]==NULL)
                    continue;
                else
                {
                    long itskey=item[j]->ddata;
                    if(newkey<itskey)
                        item[j+1]=item[j];
                    else
                    {
                        item[j+1]=newitem;
                        return j+1;

                    }
                                }

            }
            item[0]=newitem;
            return 0;

        }
        data *removeitem()
        {
            data *temp=item[numitems-1];
            item[numitems-1]=NULL;
            numitems--;
            return temp;

        }
        void displayNode()
        {
            for(int j=0;j<numitems;j++)
                item[j]->display();
            cout<<endl;

        }

    };

    int Node::numitems=0;
    class tree234
    {

        Node *root;
    public:
        tree234() : root(NULL) {}
        void  displaytree()
        {

            recursivdisplay(root,0,0);

        }
         void recursivdisplay(Node *thisnode,int level,int childnum)
         {
             thisnode->displayNode();
             int numitems=thisnode->getnumitems();
             for(int j=0;j<numitems+1;j++)
             {
                 Node *nextnode=thisnode->getchild(j);
                 if(nextnode!=NULL)
                     recursivdisplay(nextnode,level+1,j);
                 else
                      return ;

             }

         }
        Node *getnextchild(Node *theNode,long thevalue)
        {
            int j;
            int numItems=theNode->getnumitems();
            for(j=0;j<numItems;j++)
            {

                if(thevalue<theNode->getitem(j)->ddata)
                    return theNode->getchild(j);

            }
            return theNode->getchild(j);

        }
          void split(Node * thisnode)
          {
              data *itemb,*itemc;
              Node *parent,*child2,*child3;
              int itemindex;
              itemc=thisnode->removeitem();
              itemb=thisnode->removeitem();
              child2=thisnode->disconnectchild(2);
              child3=thisnode->disconnectchild(3);
              Node *newright=new Node();
              if(thisnode==root)
              {
                  root=new Node();
                  parent=root;
                  root->connect(0,thisnode);

              }
              else
                  parent=thisnode->getparent();
              //deal with parent
              itemindex=parent->insertitem(itemb);
              int n=parent->getnumitems();
              for(int j=n-1;j>itemindex;j--)
              {
                  Node *temp=parent->disconnectchild(j);
                  parent->connect(j+1,temp);

              }

              parent->connect(itemindex+1,newright);
              //deal with newright
              newright->insertitem(itemc);
              newright->connect(0,child2);
              newright->connect(1,child3);

          }
    public:
         void insert(long dvalue)
         {
             Node *curnode=root;
             data *tempitem=new data(dvalue);
             while(true)
             {
                 if(curnode->isfull())
                 {

                     split(curnode);
                     curnode=curnode->getparent();

                     curnode=getnextchild(curnode,dvalue);

                 }
                 else if(curnode->isleaf())
                     break;
                 else
                     curnode=getnextchild(curnode,dvalue);

             }
             curnode->insertitem(tempitem);
                 }
    public:
        int find(long key)
        {
            Node *curnode=root;
    int childnum;
    while(true)
    {
        if((childnum=curnode->finditem(key))!=-1)
            return childnum;
        else if(curnode->isleaf())
            return -1;
        else
            curnode=getnextchild(curnode,key);
    }
        }
    };

    char Getchar()
    {
        char AB;
        cin>>AB;
        return  AB;
    }
    int main()
    {
        int found;
        long value;
        tree234 *thetree=new tree234();
        thetree->insert(50);
        thetree->insert(40);
        thetree->insert(60);
        thetree->insert(30);
        thetree->insert(70);
        while(true)
        {
    cout<<" enter   first letter "<<endl;
    cout<<" show ,insert or   find :  "<<endl;
    char choice=Getchar();
    switch(choice)
    {
    case 's':
        cout<<" display tree ";
        thetree->displaytree();
        break;

    case 'i':
        cout<<"  enter value to insert "<<endl;
        cin>>value;
        thetree->insert(value);
        break;
    case 'f' :
        cout<< "enter value to find ";
        cin>>value;
         found=thetree->find(value);
        if(found!=-1)
            cout<<" found  =  "<<value<<endl;

        else

            cout<< " not found " <<value <<endl;

        break;
    default:
        cout <<" invalid entry "<<endl;;
        }

        }
        delete thetree;

        return 0;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T11:45:30.107

问题可能是你没有初始化`childarray`，所以它充满了垃圾，任何比较`NULL`都会失败：

```
class Node
{
private:
    static const  int order=4;
    Node *childarray[order]; // this is full of, well, anything.
}; 
```

至少，您需要初始化该数组，使其充满`NULL`s。您可以通过添加构造函数并在初始化列表中进行初始化来做到这一点：

```
class Node {
public:
  Foo() : childarray() {}
private:
  // as before
}; 
```

# javascript - Dojo 拖放问题：对目标 DND 容器中的项目进行排序

> ID：10382901
> 
> 赞同：1
> 
> 时间：2012-04-30T11:26:17.053
> 
> 标签：javascript, dojo, drag-and-drop, dojo-dnd

我的 JavaScript 代码如下

//我有一个Json：

```
var jsonRoles = {"roles": [
                            {"roleId": "1", "roleName": "role1", "roleDesc": "This is role1"},
                            {"roleId": "2", "roleName": "role2", "roleDesc": "This is role2"},
                            {"roleId": "3", "roleName": "role3", "roleDesc": "This is role3"}
                        ]
                    }; 
```

//为了获取DND容器中列出的所有角色名称，我使用了for循环：

```
var results="";
                    for(var i=0;i<jsonRoles.roles.length;i++){
                        results += '<div class="dojoDndItem">' + jsonRoles.roles[i].roleName  + '</div>';
                    } 
```

//两个内容窗格如下，用于拖放两个块

```
var assignPermissionToUser1 = new dijit.layout.ContentPane({
                        //splitter:true,
                        region: "left",
                        style: "background-color: white;width: 200px; height: 500px",
                        content:'<div>' + '<label>Roles</label>' + '</div>' + '<div dojoType="dojo.dnd.Source" id="rolelistNode" class="container">' + 
                                '<div dojoType="dojo.dnd.Source" class="dojoDndItem movableContainer">' + '</div>' + results +
                                '</div>'       
                    });
                    var assignPermissionToUser2 = new dijit.layout.ContentPane({
                        //splitter:true,
                        region: "right",
                        style: "background-color: white;width: 200px; height: 500px",
                        content:'<div>' + '<label>Users</label>' + '</div>' +'<div dojoType="dojo.dnd.Source" class="container">' +
                                '<div dojoType="dojo.dnd.Source" class="dojoDndItem movableContainer">' + '</div>' +
                                '</div>'            
                    }); 
```

//边框容器

```
 innerBorderContainerAsAccordion = new dijit.layout.BorderContainer({
                id: "innerBorderContainerAsAccordion",
                region: "center",
                style: "background-color: white;width: 175px; height: 550px"
            }); 
```

//设置边框容器的内容

```
 innerBorderContainerAsAccordion.addChild(assignPermissionToUser1);
    innerBorderContainerAsAccordion.addChild(assignPermissionToUser2); 
```

**我的问题是，如果我将一个元素从 DND 容器拖到另一个，它如何按 ID 或字母等排列/排序项目？**

例如（下图）

**两个容器的初始状态** ![在此处输入图像描述](../Images/0e64c96366383bda32f6334e0937b2aa.png)

**将一些项目拖放到第二个 DND 容器后** ![在此处输入图像描述](../Images/75974f0849cba77564bcba7d63f5f6af.png)

**如何强制对第二个 DND 容器的项目进行完全排序，如下所示：** ![在此处输入图像描述](../Images/e3a6d1a7aed57f796a2864b39a1099cc.png)

任何人都可以帮忙吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T13:34:48.993

请尝试这段代码，这次是 javascript

```
 function sortList(listId) {
        // Get the ul object
        var oUl = document.getElementById(listId);
        /* Perform a Bubble Sort on the list items */
        for (var i in oUl.childNodes) {
            var x = oUl.childNodes[i];
            for (var j in oUl.childNodes) {
                var y = oUl.childNodes[j];
                if ((x.innerText != 'undefined' || y.innerText != 'undefined') && x.innerText > y.innerText) {
                    // Skip if x is already the first list item
                    if (oUl.firstChild != x)
                        oUl.insertBefore(y, x);
                }
            }
        }

    }

    /* Define innerText for Mozilla based browsers */
    if ((typeof HTMLElement != 'undefined') && (HTMLElement.prototype.__defineGetter__ != 'undefined')) {
        HTMLElement.prototype.__defineGetter__("innerText", function () {
            var r = this.ownerDocument.createRange();
            r.selectNodeContents(this);
            return r.toString();
        });

    }

    window.onload = function () {
        sortList("ID_of_Your_ul_tag");
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T14:12:39.760

首先，您的 dndContainer 有 className dojoDndItem，如果您不将唯一的 className 应用于“真实项目”以将其与父项区分开来，这将失败。

我不知道为什么，但是你创建了 4 个 dndSource（movableContainer？）

最佳做法是为您的 dndContainer 提供一个 ID，以下假设项目具有 class=='roleItem' 并且 dndContainer 具有 id=='targetContainer'

```
var dndC = dojo.byId('targetContainer', assignPermissionToUser2.domNode);
dojo.query( ".roleDndItem",  dndC )
  .sort(function( a,b ) {
      // can check for whatever property on the item here
      // for complete numerical sort you need a comperator (parseFloat works)
      return (a.innerHTML == b.innerHTML 
          ? 0 : (a.innerHTML > b.innerHTML ? 1 : -1));
  })
  .forEach(function(a, idx) {
      console.log(a.innerHTML);  // output should be alphanumerically 
      // sorted by lowest == (idx=0)
      // idx 0 inserts be childNode[0] (firstChild), 
      // idx 1 before (new) second child
      dndC.insertBefore(a, dndC.childNodes[idx]);
}); 
```

Dojo 分发了看似单线的东西，但它的功能远不止于此。但是，您只需要调整两行，sort-return 和 node-reference dndC。

```
dojo.query(".roleItem",  dndC ).sort(
    function( a,b ) {  
        return (a.innerHTML == b.innerHTML ? 0 : (a.innerHTML > b.innerHTML ? 1 : -1));
    }
).forEach(
    function(a, idx) { 
        dndC.insertBefore(a, dndC.childNodes[idx]);  
}); //^^ 
```

要连接做类似的事情

```
dojo.subscribe("dnd/drop", function() { /* */ }); 
```

或以编程方式创建的 dndSource；

```
dojo.connect(dndSourceObj, "onDrop", function() { /* */ }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T12:44:48.600

试试这个代码：

```
jQuery.fn.sortElements = (function(){
    var sort = [].sort;
    return function(comparator, getSortable) {
        getSortable = getSortable || function(){return this;};
        var placements = this.map(function(){     
            var sortElement = getSortable.call(this),
                parentNode = sortElement.parentNode,
                nextSibling = parentNode.insertBefore(
                    document.createTextNode(''),
                    sortElement.nextSibling
                );     
            return function() {
                if (parentNode === this) {
                    throw new Error(
                        "You can't sort elements if any one is a descendant of another."
                    );
                }     
                parentNode.insertBefore(this, nextSibling);
                parentNode.removeChild(nextSibling);
            };
        });
        return sort.call(this, comparator).each(function(i){
            placements[i].call(getSortable.call(this));
        });
    };
})(); 
```

假设以下标记：

```
<ul>
    <li>Banana</li>
    <li>Carrot</li>
    <li>Apple</li>
</ul> 
```

您可以像这样按字母顺序对项目进行排序：

```
$('li').sortElements(function(a, b){
    return $(a).text() > $(b).text() ? 1 : -1;
}); 
```

这将导致：

```
<ul>
    <li>Apple</li>
    <li>Banana</li>
    <li>Carrot</li>
</ul> 
```

# c++ - 如何在 C++ 中以微秒为单位获取系统时钟？

> ID：10382902
> 
> 赞同：1
> 
> 时间：2012-04-30T11:26:22.270
> 
> 标签：c++, visual-c++, time, system-clock

我正在开发一个在控制台模式下使用 Visual C++ /CLR 的项目。如何以微秒为单位获取系统时钟？我要显示`hours:minutes:seconds:microseconds`

以下程序运行良好，但与其他平台不兼容：

```
#include <stdio.h>
#include <sys/time.h>
int main()
{
     struct timeval tv;
     struct timezone tz;
     struct tm *tm;
     gettimeofday(&tv, &tz);
     tm=localtime(&tv.tv_sec);
     printf(" %d:%02d:%02d %ld \n", tm->tm_hour, tm->tm_min,tm->tm_sec, tv.tv_usec);
     return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T11:34:42.407

您可以`ptime microsec_clock::local_time()`从 Boost 中使用。

文档可[在此处](http://www.boost.org/doc/libs/1_49_0/doc/html/date_time/posix_time.html#date_time.posix_time.ptime_class)获得。

之后，您可以使用`std::string to_iso_extended_string(ptime)`将返回的时间显示为字符串，也可以`ptime`直接使用 的成员自行格式化输出。

无论如何，值得注意的是：

> Win32 系统通常无法通过此 API 实现微秒级分辨率。如果更高的分辨率对您的应用程序至关重要，请测试您的平台以查看达到的分辨率。

所以我想这取决于你要求你的“时钟”有多精确。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T21:13:04.870

谢谢ereOn先生

我按照您的指示编写了此代码 ==> 它 100 % 有效

```
#include <iostream>
#include "boost/date_time/posix_time/posix_time.hpp" 

typedef boost::posix_time::ptime Time;

int main (){

    int i;
    Time t1;

    for (int i=0;i<1000;i++)
    {

         t1=boost::posix_time::microsec_clock::local_time();
     std::cout << to_iso_extended_string(t1) << "\n";
    }

    return 0;
} 
```

# regex - 正则表达式：匹配数字或单词，而不是两者

> ID：10382907
> 
> 赞同：0
> 
> 时间：2012-04-30T11:26:33.327
> 
> 标签：regex, string, numeric

我需要剥离一个 URL 进行路由。为此，必须检查参数并相应地重定向。
需要一个正则表达式来检查参数是单词（允许空格）还是数字（整数 - 1-100 之间）。
我知道如何获取数字.. 和单词.. 我不知道如何检查它是否只是其中之一，示例如下。

谢谢

```
1            // a match
22           // a match
22a          // not a match
abc          // a match
abc def g    // a match
ab33         // not a match 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T11:29:27.590

```
^(\d+|[A-Za-z\s]+)$ 
```

您可以使用此模式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T11:30:13.533

```
"222a".match(/^\d+$|^[a-zA-z ]+$/);
null
"222".match(/^\d+$|^[a-zA-z ]+$/);
["222"]
"aaa".match(/^\d+$|^[a-zA-z ]+$/);
["aaa"] 
```

# drupal-6 - 如何在块 drupal 6 中将所有分类术语显示为树视图？

> ID：10382908
> 
> 赞同：1
> 
> 时间：2012-04-30T11:26:34.543
> 
> 标签：drupal-6, drupal-taxonomy

我想将所有分类术语显示为块中的树视图。

A
-A1
-A2
-A3
B
-B1
-B2

我如何显示这样。请回复

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T16:44:37.597

taxonomy_get_tree() 函数应该为您提供所需的原始数据。

# magento - 澳大利亚商店的 GST 问题

> ID：10382913
> 
> 赞同：-1
> 
> 时间：2012-04-30T11:26:47.993
> 
> 标签：magento, gstreamer

我的客户有一个特殊要求，即 gst 应该显示在前端和管理员上，但是这个 gst 不应该添加到总计中。我怎么能做到这一点。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T00:55:26.200

你是双重发帖，这已经在 Magento 论坛上得到了回答：http: [//www.magentocommerce.com/boards/viewthread/278928/#t385908](http://www.magentocommerce.com/boards/viewthread/278928/#t385908)

# sql-server-2008 - T-SQL：在地图网格上查找对象的最近位置

> ID：10382915
> 
> 赞同：2
> 
> 时间：2012-04-30T11:26:58.060
> 
> 标签：sql-server-2008, tsql, min

我在地图上显示了网格。我知道您的位置以及地图上 2 个对象的位置。对象出现在网格线交叉的地方。考虑一下世界是平的而不是圆的，因为地图上的区域只有很短的距离。出于性能原因，我想在不使用三角函数和乘法的情况下确定哪个对象离你最近。我不是在寻找准确性，而是仅仅获得一个球场指示。我应该能够确定我当前位置的纬度和经度差之间的最短距离。我的表 Locations 如下所示：

```
ID   Latitude   Longitude
1       50         70
2       30         40 
```

如果我的位置是纬度 = 40 和经度 = 60，那么 ID = 1 的位置会离我更近。

如果我的位置是纬度 = 30 和经度 = 60，可能两个位置的距离大致相同，所以只需选择一个。

如果我的位置是纬度 = 30 和经度 = 50，那么 ID = 2 的位置会更近。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-30T12:19:30.187

您确实需要使用一些三角函数来获得任何精度：

```
DECLARE @LocationTable TABLE(ID int, Latitude int, Longitude int)
INSERT INTO @LocationTable(ID, Latitude, Longitude)
VALUES
    (1,50,70),
    (2,30,40)

DECLARE
    @MyLatitude int = 90,
    @MyLongitude int = 40

WITH DistanceTable AS
(
    SELECT ID, Latitude, Longitude,
        SQRT(POWER(Latitude - @MyLatitude,2) + POWER(Longitude - @MyLongitude, 2)) AS Distance
    FROM @LocationTable
)
SELECT ODT.ID, ODT.Latitude, ODT.Longitude, ODT.Distance
FROM (SELECT ID, Latitude, Longitude, Distance, ROW_NUMBER() OVER(ORDER BY Distance) AS Position
    FROM DistanceTable) AS ODT
WHERE ODT.Position = 1; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-30T12:00:58.183

我只会对差异的总和做一分钟。我试过了，效果很好。

```
SELECT MIN(ABS(s.Latitude - 47) + ABS(s.Longitude - -122)), s.ID FROM Sites as s Group By ID; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-30T12:19:30.620

SELECT MIN(((s.Latitude - @lat) *(s.Latitude - @lat)) + ((s.Longitude - @lon)* (s.Longitude - @lon))), s.ID FROM Sites as s Group按身份证；

# r - 打印工作区中的所有对象

> ID：10382916
> 
> 赞同：25
> 
> 时间：2012-04-30T11:26:59.870
> 
> 标签：r, object, workspace

我不知道如何列出和打印工作区中的所有对象。我想看到他们所有人并了解发生了什么。例如，`ls()`给你 30 个对象。除了单独键入它们之外，如何将它们全部显示出来。看起来如此微不足道，解决方案可能会很尴尬。我最接近`ls.str()`的是循环对象的想法。

**编辑**：*这不适用于数据框。我有一个充满功能的工作区，没有数据，并且想了解哪些引用了哪些等。*

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-04-30T11:48:11.817

您的意思是“显示”，意思是“对于 中的每个对象`ls()`，我想看看如果我在提示中输入它会看到什么”？如果你有一些 1000x10000 的矩阵，你还想打印它怎么办？我个人喜欢`ls.str()`-我认为它对所有内容都提供了简洁的概述，并且很好地处理了我刚才提到的情况。

但是，如果您想基本上“显示”每个对象，即在提示符上键入每个对象，我建议使用一个循环：

```
for ( obj in ls() ) { print(get(obj)) } 
```

由于`ls()`返回变量名称的字符向量，我需要使用`get(obj)`which 获取名称在`obj`.

您可能希望对此进行变体以打印变量名称，例如

```
for ( obj in ls() ) { cat('---',obj,'---\n'); print(get(obj)) } 
```

举个例子：

```
> a <- 1
> b <- LETTERS[1:10]
> c <- data.frame(a=LETTERS[1:10],b=runif(10))
> for ( obj in ls() ) { cat('---',obj,'---\n'); print(get(obj)) }
--- a ---
[1] 1
--- b ---
 [1] "A" "B" "C" "D" "E" "F" "G" "H" "I" "J"
--- c ---
   a         b
1  A 0.1087306
2  B 0.9577797
3  C 0.8995034
4  D 0.1434574
5  E 0.3548047
6  F 0.1950219
7  G 0.1453959
8  H 0.4071727
9  I 0.3324218
10 J 0.4342141 
```

不过，这确实有一个缺点——下次你打电话时`ls()`，那里现在有一个`obj`。我敢肯定有一些解决方法。

无论如何，我认为我仍然更喜欢`ls.str()`它处理大对象的方式（但我使用很多巨大的（数百万个元素）矩阵，所以这是我的偏好）。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2018-04-02T19:30:53.650

如果您只想要使用的变量的名称：

```
ls() 
```

如果您还想打印变量以及内容，请使用以下命令：

```
mget(ls()) 
```

这应该做你需要的。

对于带有一些矩阵、向量和数据框的新打开的工作区，它对我来说效果很好。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-04-30T11:48:06.490

我发现使用[RStudio](http://rstudio.org/)可以让我查看环境中的所有对象并与每个对象直接交互。我确信一个好的 IDE 将允许您的问题似乎需要进行那种探索。这对于让您查看大量对象特别有用。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-04-30T11:44:56.187

相信我：你真的不想打印所有对象的所有内容。想象一下打印出来`matrix(1:1e5,100,1000)`:-( 。有一些有用的 R 工具，例如`summary`, `table`，`str`它们通常会告诉您有关数据对象的足够信息，让您知道它是什么以及您想用它做什么。如果您有更具体的问题，例如，“我的哪些数据帧具有 NA 值？”，您可以编写命令或迷你函数来进行查找。
我为自己编写了一些名称，例如`lstype(objtype='closure')`，其中列出了指定类型的所有对象。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-03-09T12:07:43.903

如果您的工作区中有一个或多个大型对象（例如向量、矩阵和/或列表），那么以下代码应该可以为您提供紧凑的输出。

```
for ( obj in ls() ) { 
  cat('---',obj,'---\n');
  if ( class(get(obj)) == 'matrix'  ){
    print( get(obj)[1:min(ncol(get(obj)),10),1:min(ncol(get(obj)),10)] ) 
  }else if ( class(get(obj)) == 'numeric' |  class(get(obj)) == 'integer'  ){
    print( get(obj)[1:min(length(get(obj)),10)] )
  }else if( class(get(obj)) == 'list'){
    for (i in 1:length(get(obj))){
      if ( class(get(obj)) == 'matrix'  ){
        print( get(obj)[[i]][1:min(ncol(get(obj)[[i]]),10),1:min(ncol(get(obj)[[i]]),10)] ) 
      }else if ( class(get(obj)[[i]]) == 'numeric' |  class(get(obj)[[i]]) == 'integer'  ){
        print( get(obj)[[i]][1:min(length(get(obj)[[i]]),10)] )
      }else{
        print( get(obj)[[i]] ) 
      } 
    }
  }else{
    print( get(obj) ) 
  }
} 
```

# memory - 为什么堆栈溢出？

> ID：10382922
> 
> 赞同：3
> 
> 时间：2012-04-30T11:27:55.967
> 
> 标签：memory, stack

行。因此，我对可执行文件在内存中的布局方式的理解是...图像一个方框，表示您的应用程序可访问的内存。

程序代码位于内存的底部，堆栈被分配到程序代码之外的位置并向上分配。堆从内存的顶部开始并向下分配。

如果是这种情况，为什么可以分配比堆栈内存更多的堆内存？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T11:30:29.353

因为即使在具有大量可用虚拟内存的现代系统上，调用堆栈的最大大小通常也被故意限制为 1MB。

这通常不是基本限制；可以对其进行修改（例如[`setrlimit()`](http://linux.die.net/man/2/setrlimit)在 Linux 中使用，或在Java 中使用[`-Xss`标志](http://docs.oracle.com/javase/1.5.0/docs/tooldocs/windows/java.html)）。但需要这样做通常表明程序异常；如果您有大型数据集，它们通常应该存储在堆上。

# javascript - 如何更改按空格键的文本框值？

> ID：10382926
> 
> 赞同：0
> 
> 时间：2012-04-30T11:28:10.163
> 
> 标签：javascript

每次我在文本框中按空格键时，我都想将英文单词更改为印地语，这是一个按键事件，但如何仅适用于空格键。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T11:33:07.133

```
 <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
    <script>
    $(document).ready(function(){
    $('#textboxid').keypress(function(e){    
        var code = (e.keyCode ? e.keyCode : e.which);
             if(code == 32) { //space keycode
               //Do language transilation here
             }
        });
     });
    </script>

    <form id="form1" name="form1">
      <input type="text" name="textfield" id="textboxid" />
    </form> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T11:31:08.553

空间是**32**。所以使用[jQuery keypress 事件](http://api.jquery.com/keypress/)你可以这样做：

```
$("textarea").on("keypress", function(e) {
    if (e.keyCode == 32) {
        // ...
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T11:53:27.467

对于香草js答案：

```
document.getElementById( 'textboxid' ).onkeypress = function( e ) {
    if ( e.keyCode === 32 ) {
        // Translate into Hindi
    }
} 
```

# python - 解码 self.request.body

> ID：10382927
> 
> 赞同：1
> 
> 时间：2012-04-30T11:28:13.093
> 
> 标签：python, google-app-engine, wsgi

在我的 post 处理程序中，消息的正文是 json。在 self.request.body 中，我收到一条 HTML 编码的消息：

```
%7B+%22name%22%3A+%22John+Dao%22%2C+%22Age%22%3A+42+%7D= 
```

看一下网络流量，payload其实是：

```
{ "name": "John Dao", "Age": 42 } 
```

所以，我很确定编码发生在服务器上。我如何解码这个字符串，或者以某种方式告诉 json.loads 接受编码的消息，或者更好 - 告诉 WSGI（它是 Google App Engine）不编码要使用的正文？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-01T03:32:25.947

```
>>> import urllib
>>> urllib.unquote_plus("%7B+%22name%22%3A+%22John+Dao%22%2C+%22Age%22%3A+42+%7D=")
'{ "name": "John Dao", "Age": 42 }=' 
```

看起来 WebOb 的 GAE 实现似乎正在尝试解析和重写 POST 正文，就好像它的内容类型是“application/x-www-urlencoded”——即使是 url 解码的字符串也附加了一个“=”。

如果是这种情况，并且您可以更改客户端行为，请尝试将其设置为“application/json”之类的内容。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-05-01T00:23:54.893

如果要获取键`name`和对应的值`Age`，可以简单的调用`self.request.get('name')`and `self.request.get('Age')`。如果未找到密钥，默认情况下将返回一个空字符串。

# java - 如何修复 java.lang.UnsupportedClassVersionError：不支持的 major.minor 版本

> ID：10382929
> 
> 赞同：1661
> 
> 时间：2012-04-30T11:28:24.877
> 
> 标签：java, jvm, incompatibility, unsupported-class-version

我正在尝试使用[Notepad++](http://en.wikipedia.org/wiki/Notepad%2B%2B)作为我的多合一工具编辑、运行、编译等。

我已经安装了[JRE](http://en.wikipedia.org/wiki/Java_Virtual_Machine#Execution_environment)，并且我已经将我的路径变量设置为`.../bin`目录。

当我在 Notepad++ 中运行“Hello world”时，我收到以下消息：

```
java.lang.UnsupportedClassVersionError: test_hello_world :
 Unsupported major.minor version 51.0
    at java.lang.ClassLoader.defineClass1(Native Method)
    at java.lang.ClassLoader.defineClassCond(Unknown Source)
       ......................................... 
```

我认为这里的问题在于版本；某些 Java 版本可能太旧或太新。

1.  我如何解决它？
2.  我应该安装 JDK，并将我的路径变量设置为 JDK 而不是 JRE？
3.  `PATH`JRE或JDK中的变量有什么区别？

* * *

## 回答 #1

> 赞同：2035
> 
> 时间：2012-07-11T11:59:50.970

显示的版本号描述了类文件兼容的 JRE 版本。

报告的主要数字是：

```
Java SE 17 = 61,
Java SE 16 = 60, 
Java SE 15 = 59,
Java SE 14 = 58,
Java SE 13 = 57,
Java SE 12 = 56,
Java SE 11 = 55,
Java SE 10 = 54,
Java SE 9 = 53,
Java SE 8 = 52,
Java SE 7 = 51,
Java SE 6.0 = 50,
Java SE 5.0 = 49,
JDK 1.4 = 48,
JDK 1.3 = 47,
JDK 1.2 = 46,
JDK 1.1 = 45 
```

（来源：[维基百科](https://en.wikipedia.org/wiki/Java_class_file#General_layout)）

要解决实际问题，您应该尝试使用较新版本的 Java JRE 运行 Java 代码，或者为 Java 编译器指定目标参数以指示编译器创建与早期 Java 版本兼容的代码。

例如，为了生成与 Java 1.4 兼容的类文件，请使用以下命令行：

```
javac -target 1.4 HelloWorld.java 
```

使用较新版本的 Java 编译器，您可能会收到有关未设置引导类路径的警告。有关此错误的更多信息，请参阅博客文章*[New javac warning for setting an old source without bootclasspath](https://blogs.oracle.com/darcy/entry/bootclasspath_older_source)*。

* * *

## 回答 #2

> 赞同：388
> 
> 时间：2012-06-28T06:48:56.227

`java.lang.UnsupportedClassVersionError`发生的原因是编译时 JDK 较高，而运行时 JDK 较低。

* * *

## 回答 #3

> 赞同：124
> 
> 时间：2013-05-02T18:58:41.617

在 Eclipse 中，我只是转到菜单命令*Window* -> *Preferences* -> *Java* -> *Compiler*，然后将“Compiler compliance level”设置为 1.6。

* * *

## 回答 #4

> 赞同：63
> 
> 时间：2012-05-04T06:23:28.597

别担心，我已经解决了。

这实际上很简单 - 您需要安装相同版本的 JRE / JDK。

JRE 6 -> JDK 6

JRE 7 -> JDK 7

等等。

* * *

## 回答 #5

> 赞同：45
> 
> 时间：2013-02-20T19:02:45.067

此错误意味着您正在尝试加载使用比您安装的 Java 版本更新的 Java 编译的 Java“类”文件。

例如，您的`.class`文件可能已经为 JDK 7 编译，而您正尝试使用 JDK 6 运行它。

所以解决方案是：

*   升级您的 Java 运行时或
*   如果您有源代码，请使用本地 Java 编译器（如果有的话）重新编译该类。

    javac 文件名.java

对于开发人员，如果另一个开发人员签入 .class 文件，并且他们的 java 版本比您的更新，就会发生这种情况！

* * *

## 回答 #6

> 赞同：25
> 
> 时间：2013-10-01T08:51:44.300

您正在尝试使用不支持编译代码的版本的 Java 版本运行您的程序。**所以基本上你必须用更高版本编译你的代码并尝试使用更低版本运行它。**

当你得到

```
Unsupported major.minor version 51.0 
```

并且版本**51.0**对应于**J2SE 7**，您很可能已经在 J​​ava 7 中编译了代码并尝试使用较低版本运行它。检查`java -version`显示的内容。它应该是 Java 7 版本。如果没有在 PATH/JAVA_HOME 中进行适当的更改。或者您可以使用您尝试运行代码的相同版本进行编译。如果配置令人困惑，您始终可以提供绝对路径`/home/user/jdk1.7.0_11/bin/javac`和`/home/user/jdk1.7.0_11/bin/java`.

* * *

## 回答 #7

> 赞同：21
> 
> 时间：2014-02-11T06:55:26.433

我在 Mac 上遇到过类似的情况，以下过程对我有用：

在终端中，键入

```
vi ~/.profile 
```

然后在文件中添加这一行，并保存

```
export JAVA_HOME=/Library/Java/JavaVirtualMachines/jdk<version>.jdk/Contents/Home 
```

其中 version 是您计算机上的版本，例如`1.7.0_25`.

退出编辑器，然后键入以下命令使其生效

```
source ~/.profile 
```

然后输入 java -version 查看结果

```
java -version 
```

什么是`.profile`文件？

> .profile 文件是一个隐藏文件。它是一个可选文件，它告诉系统在其配置文件的用户登录时运行哪些命令。例如，如果我的用户名是 bruno，并且 /Users/bruno/ 中有一个 .profile 文件，则它的所有内容将在登录过程中执行。

资料来源：[http ://computers.tutsplus.com/tutorials/speed-up-your-terminal-workflow-with-command-aliases-and-profile--mac-30515](http://computers.tutsplus.com/tutorials/speed-up-your-terminal-workflow-with-command-aliases-and-profile--mac-30515)

* * *

## 回答 #8

> 赞同：18
> 
> 时间：2013-08-06T10:24:19.643

在 Eclipse 的菜单*Window* -> *Preferences* -> *Java* -> *Compiler*检查“配置项目特定设置”。

如果您仍然遇到相同 Java 版本的错误：尝试手动删除项目的构建文件夹。然后重新启动 Eclipse。

* * *

## 回答 #9

> 赞同：14
> 
> 时间：2013-06-25T12:51:24.033

您可以在 Java 7 中编译一些 JAR 库，并且您只有 Java 6 作为 Java 运行时。一些新的库可能会发生这种情况。

* * *

## 回答 #10

> 赞同：14
> 
> 时间：2015-04-04T12:16:11.253

最常见的问题是您的`JAVA_HOME`变量配置错误，如果您安装了多个，它应该指向正确的 Java Development Kit 库。

要查找 SDK Java 文件夹所在的位置，请运行以下命令：

```
jrunscript -e 'java.lang.System.out.println(java.lang.System.getProperty("java.home"));' 
```

### Debian/Ubuntu

要检查您安装了哪个 java (openjdk)，请通过以下方式检查：

```
dpkg -l "openjdk*" | grep ^i 
```

或者：

```
update-java-alternatives -l 
```

要更改它，请使用：

```
update-alternatives --config java 
```

^(`sudo`如果需要，可以使用前缀。)

选择替代的 java 版本。

或检查哪些可安装：

```
apt-cache search ^openjdk 
```

^(`sudo`如果需要，可以使用前缀。)

然后就可以安装了，例如：

```
apt-get install openjdk-7-jre 
```

^(`sudo`如果需要，可以使用前缀。)

### Fedora、Oracle Linux、红帽

通过以下方式安装/升级适当的软件包：

```
yum install java-1.7.0-openjdk java-1.7.0-openjdk-devel 
```

> 该`java-1.7.0-openjdk`包仅包含 Java 运行时环境。如果您想开发 Java 程序，请安装该`java-1.7.0-openjdk-devel`软件包。

### BSD

在 FreeBSD Ports 集合中有一个名为[openjdk7](http://www.freshports.org/java/openjdk7/)的 OpenJDK 7 包，可能需要重新配置它。

请参阅：[OpenJDK wiki 页面](https://wiki.openjdk.java.net/display/BSDPort/Main)。

### 视窗

[只需从Oracle 站点](http://www.oracle.com/technetwork/java/javase/downloads/jdk7-downloads-1880260.html)安装适当的 Java SE Development Kit 库或安装

### 詹金斯

如果您在使用 Jenkins 时遇到此问题，请参阅：

*   [JENKINS-30561 - 无法使用 SSH 启动代理](https://issues.jenkins-ci.org/browse/JENKINS-30561)

但是，选择正确版本的 Java（较新）`update-alternatives`应该可以。

* * *

## 回答 #11

> 赞同：12
> 
> 时间：2013-10-14T03:32:11.013

[当我使用Ant](http://en.wikipedia.org/wiki/Apache_Ant)脚本构建我的应用程序时，我遇到了同样的问题。

我使用[Eclipse](http://en.wikipedia.org/wiki/Eclipse_%28software%29)进行应用程序开发，并在项目的构建属性中更改了编译器版本。但这对我不起作用。然后我发现我可以在 Ant 脚本中提供编译器版本。

我在它编译 Java 文件的部分修改了 Ant 脚本。

```
<target name="build-java" depends="prepare-build">
    <echo message="Compiling java files"/>
    <javac ....
           target="1.5"...
    </javac>
</target> 
```

这对我来说解决了不受支持的主要小问题。

* * *

## 回答 #12

> 赞同：12
> 
> 时间：2014-01-07T06:43:36.677

当我安装[JDK](http://en.wikipedia.org/wiki/Java_Development_Kit) 1.7 后，问题就解决了。

* * *

## 回答 #13

> 赞同：12
> 
> 时间：2014-09-01T08:02:28.310

我用 1.7 编写的项目遇到了同样的问题，并试图在 1.6 中执行。

我在 Eclipse 中的解决方案：

*   右键单击您的项目**属性-> Java 构建路径-> 库**

*   选择您的 JRE System Library 并单击右侧的**Edit ，然后选择目标 JRE。**

*   现在转到左侧的**Java Compiler ，并将****Compiler 合规级别**更改为您的目标。

这对我有用。

* * *

## 回答 #14

> 赞同：11
> 
> 时间：2013-09-16T18:25:12.003

正如几个人在其他地方回答的那样，Java 程序运行在比它编译它的版本更旧的 Java 版本上。为了向后兼容，它需要“交叉编译”。换句话说，源 Java 版本和目标 Java 版本不匹配。

更改 Eclipse 菜单中的选项并没有回答原始发帖人，他说他/她没有使用 Eclipse。在 OpenJDK javac 版本 1.7 上，如果您使用参数`-source`和`-target`，则可以交叉编译 1.6，并在编译时提供目标版本（即旧版本）的*rt.jar -file。*如果实际安装的是 1.6 JRE，可以指向它的安装（例如，Ubuntu 上的 /usr/lib/jvm/java-6-openjdk-i386/jre/lib/rt.jar，/usr/jdk/jdk1.jar） 6.0_60/jre/lib/rt.jar 显然在 SunOS 上。抱歉，我不知道它在 Windows 系统上的位置）。像这样：

```
javac -source 1.6 -target 1.6 -bootclasspath /usr/lib/jvm/java-6-openjdk-i386/jre/lib/rt.jar HelloWorld.java 
```

看起来你可以从 Internet 上下载 rt.jar，然后指向它。虽然这不是太优雅：

```
javac -source 1.6 -target 1.6 -bootclasspath ./rt.jar HelloWorld.java 
```

* * *

## 回答 #15

> 赞同：10
> 
> 时间：2014-03-10T11:01:51.030

如果您在使用[Maven](http://en.wikipedia.org/wiki/Apache_Maven)时遇到此问题，可以使用插件[Maven Compiler](http://maven.apache.org/plugins/maven-compiler-plugin/examples/set-compiler-source-and-target.html)编译您的代码。

```
 <build>
        <plugins>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-compiler-plugin</artifactId>
                <version>3.1</version>
                <configuration>
                    <source>1.6</source>
                    <target>1.6</target>
                </configuration>
            </plugin>
       ..... 
```

更新：如果您使用的是 JDK 8，请设置`source`和`target`to 。`1.8`

* * *

## 回答 #16

> 赞同：10
> 
> 时间：2014-05-28T09:10:14.300

基于此...

```
J2SE 8 = 52
J2SE 7 = 51
J2SE 6.0 = 50
J2SE 5.0 = 49
JDK 1.4 = 48
JDK 1.3 = 47
JDK 1.2 = 46
JDK 1.1 = 45 
```

在 Eclipse 中，右键单击包资源管理器中的项目：

**构建路径**->**配置构建路径**

在下面：

**Java Build Path** -> **Libraries** -> **Add Library** -> **JRE System Library** -> **Installed JREs** -> **Search**。

搜索完成后，通过在可用列表中选择库来添加所需的 JRE。

* * *

## 回答 #17

> 赞同：10
> 
> 时间：2015-11-03T08:03:53.377

*   如果您使用 Maven，请设置您的 Java 编译级别。打开命令行并`java -version`为您的编译级别编写：

    [![在此处输入图像描述](../Images/2ed33ca1c8d2619b624a4ee3dd3bdade.png)](https://i.stack.imgur.com/oyfMl.png)

*   如果您使用 IntelliJ IDEA，请选择项目 →*文件*→*设置*→*构建执行部署*→*编译器*→ *Java 编译器*。然后将字节码更改为 1.7，如下图所示：

    [![在此处输入图像描述](../Images/d706b5074749a25f826a7afc891aa855.png)](https://i.stack.imgur.com/GXStV.png)

* * *

## 回答 #18

> 赞同：8
> 
> 时间：2014-02-11T10:36:05.767

从 Eclipse 运行 Ant 时，我收到了同样的错误消息，但是这里提到的其他解决方案并没有解决我的问题。有趣的是，从 Windows 命令行运行 Ant 运行良好，因此它必须是 Eclipse 中的配置问题。

事实证明，在 Eclipse 下，您可以指定 Ant 应该运行的环境，并将其设置为 JRE 而不是 JDK。

*   转到：运行 -> 外部工具 -> 外部工具配置...
*   为您的项目选择 Ant build.xml（如果您有多个项目）
*   激活选项卡“JRE”
*   这里选择了“单独的 JRE：jre6”。当我将它从 1.6 或 1.7 系列更改为 JDK 时，错误消失了。

* * *

## 回答 #19

> 赞同：8
> 
> 时间：2014-09-24T01:27:35.497

您使用了较高版本的 JDK 编译并尝试从较低版本的 JDK/ [JRE](http://en.wikipedia.org/wiki/Java_Virtual_Machine#Execution_environment)运行。

要检查这一点，请参阅版本信息：

```
javac -version

java -version 
```

它们会有所不同，javac 会有更高的版本号。

要解决此问题，请使用 JDK 版本中的 java 运行，或者如果您有更新的 JRE/JDK 也可以运行。

`which javac`会告诉你位置，例如，`/usr/bin/javac`。直接使用`/usr/bin/java <program>`.

或者您可以将环境变量设置为永久解决方案。

* * *

## 回答 #20

> 赞同：8
> 
> 时间：2015-03-26T09:42:12.540

> 我如何解决它？

此错误意味着用于执行您的类代码的 JRE 无法识别所使用的 Java 版本。通常是因为生成类文件（即编译它）的 Java 版本较新。

要修复它，您可以

a) 使用与运行 Java 编译器相同或更旧版本的 Java 编译器编译您的 Java 源代码。即安装适当的JDK。

b) 使用较新版本的 Java 编译器但在兼容模式下编译您的 Java 源代码。即使用`-target`参数。

c) 在与用于编译类的 JDK 相同或更新版本的 JRE 中运行已编译的类。

您可以检查您当前使用 `javac -version`的编译器版本和`java -version`运行时版本。

> 我应该安装 JDK，并将我的 PATH 变量设置为 JDK 而不是 JRE？

对于编译，当然，安装和配置您想要的特定 JDK。

对于运行时，您可以使用 JDK 附带的版本或独立的 JRE，但无论如何，请确保您已安装正确的版本并已配置 PATH，以免出现意外。

> JRE 或 JDK 中的 PATH 变量有什么区别？

PATH 环境变量告诉命令外壳在哪里查找您键入的命令。当您键入`java`时，命令 shell 解释器将`PATH`从左到右查看变量中指定的所有位置，以找到`java`要运行的适当运行时可执行文件。如果您安装了多个 Java 版本 - 即您`java`在 PATH 变量中指定的多个位置都有可执行文件，那么从左到右遇到的第一个将是执行的那个。

编译器命令是`javac`并且仅随 JDK 一起提供。运行时命令`java`随 JDK 一起提供，并且位于 JRE 中。

您可能安装了一个版本（51.0 = Java 7）`javac`，并且您也安装了相同版本`java`，但另一个先前版本`java`出现在 PATH 中较早，因此被调用而不是您期望的版本.

* * *

## 回答 #21

> 赞同：6
> 
> 时间：2014-04-08T04:52:23.347

[今天，我们的Tomcat](http://en.wikipedia.org/wiki/Apache_Tomcat) 7 on [Ubuntu 12.04.2 LTS](http://en.wikipedia.org/wiki/List_of_Ubuntu_releases#Ubuntu_12.04_LTS_.28Precise_Pangolin.29)（Precise Pangolin）出现了这个错误信息：

> /var/log/tomcat7/localhost.2014-04-08.log：2014
> 年 4 月 8 日上午 9:00:55 org.apache.catalina.core.StandardContext filterStart
> 严重：异常启动过滤器 struts2
> java.lang.UnsupportedClassVersionError：控制器/ReqAccept : 不支持的 major.minor 版本 51.0（无法加载类 controller.ReqAccept）

[Struts](http://en.wikipedia.org/wiki/Apache_Struts)应用程序是用 Java 7 编译的。

原来，有人使用“service tomcat [stop/start]”重启Tomcat 7，

> $ ps -ef | grep java
> tomcat7 31783 1 32 20:13？00:00:03 /usr/lib/jvm/default-java/bin/java ...
> $ /usr/lib/jvm/default-java/bin/java -version
> java 版本“1.6.0_27”

这会导致“Unsupported major.minor version 51.0”错误。

当我们使用“/etc/init.d/tomcat7 [stop/start]”重启Tomcat 7时，问题就解决了。

> $ ps -ef | grep java
> tomcat7 31886 1 80 20:24？00:00:10 /usr/local/java/jdk1.7.0_15/bin/java
> $ /usr/local/java/jdk1.7.0_15/bin/java -version
> java 版本“1.7.0_15”

* * *

## 回答 #22

> 赞同：6
> 
> 时间：2014-04-15T03:09:37.623

当我恢复到 Java 6 并尝试运行以前用 Java 7 编译的类时遇到了这个问题。对我有用的是 Preferences > java > compiler --> 将合规级别设置为 1.6 并至关重要地“配置项目设置”..

* * *

## 回答 #23

> 赞同：6
> 
> 时间：2014-08-22T03:53:52.040

我解决了。我跑了：

```
JAVA_HOME=/usr/lib/jvm/java-7-openjdk-i386 
```

该错误具有误导性，`Unsupported major.minor version 51.0`. 这给人的印象是不支持版本 51 (Java 7)。我们应该使用 Java 6。

错误应该是：

> 当前的 Java 版本 50 不受支持。请改用 Java 版本 7（51:0 及更高版本）。`

* * *

## 回答 #24

> 赞同：6
> 
> 时间：2016-09-13T16:08:19.270

您的 Java 文件是使用与您尝试运行它的版本（较低的运行时版本）不同的版本（更高的编译器版本）编译的。

基本的理解是，用较低版本编译的类预计会在以后的较高版本中运行。但相反（使用更高的编译器版本编译并尝试使用更低的运行时版本运行它）有时是完全不可能的。

因此，当您尝试执行您的程序时，您会看到此错误。**不支持的major.minor 版本xx**

> **问：**我在 Java 7 中创建了一个应用程序，但是当我的用户尝试运行它时，他们收到 Unsupported major.minor version 51.0 错误。这是什么意思，我能做些什么呢？
> 
> **答：**如果您在 Java 7 中使用 javac 编译应用程序，生成的类文件将具有 51.0 版本号。7 之前的 Java 版本无法识别此数字，因此您的用户必须在运行您的应用程序之前升级到 Java 7。如果您没有使用任何 Java 7 API，您可以尝试使用 javac -target 1.6 编译您的应用程序，以创建与 1.6 兼容的类文件。如果您的应用程序是使用 webstart 部署的，您可以指定所需的最低版本。有关更多信息，请参阅此处的 Java Web Start 和 JNLP 文档。一旦我们为当前在其桌面上安装 Java 6 的最终用户触发自动更新到 Java 7，此问题就会消失。时间表尚未确定，我们希望让开发人员有时间首先解决他们的代码和 JDK 7 之间的任何问题。

（来源：[oracle.com](https://blogs.oracle.com/henrik/entry/java_7_questions_answers)。）

* * *

## 回答 #25

> 赞同：5
> 
> 时间：2015-04-09T09:10:19.553

哦，Mac OS XI 可以通过设置 JAVA_HOME 变量来解决这个问题：

```
export JAVA_HOME=/Library/Java/JavaVirtualMachines/jdk1.7.0_75.jdk/Contents/Home 
```

* * *

## 回答 #26

> 赞同：4
> 
> 时间：2014-03-19T17:49:01.473

首先让我们了解一些基础知识...

JRE 是[NetBeans](http://en.wikipedia.org/wiki/NetBeans) / [Eclipse](http://en.wikipedia.org/wiki/Eclipse_%28software%29) /standalone 中的一个组件，它将为您提供库、JVM、Java 插件和 Java Web 启动。请注意，它不提供编译器或调试器。

JDK 是 JRE 以及编译器和调试器的超集。

因此，当您将默认库作为 JRE 而不是 JDK 时，您将很高兴导入一些东西，但它不会编译。

相反，将路径设置为 JDK（我使用 NetBeans，并使用 netbeans/etc/netbeans.conf 中的 netbeans.conf 设置它们并更改路径）。

* * *

## 回答 #27

> 赞同：4
> 
> 时间：2018-03-06T12:29:48.443

就我而言，问题出在服务器运行时配置中：

[![服务器运行时环境](../Images/8f494ed04e576d178b8256ce8c5b565e.png)](https://i.stack.imgur.com/oUcdV.png)

检查 JRE 是您需要的版本：

[![在此处输入图像描述](../Images/1c1b2329febdb83aae554dda329bbabb.png)](https://i.stack.imgur.com/gDK6L.png)

该项目的版本为 1.7，服务器 JRE 设置为 1.6，更改为正确的 java 版本后，它可以正常启动。

* * *

## 回答 #28

> 赞同：3
> 
> 时间：2014-06-18T16:29:16.537

我遇到了一个问题，即我必须从命令行对我的项目运行 Maven 编译才能运行我的单元测试；如果我对测试类进行了更改并让 Eclipse 自动重新编译它，那么我会收到“Unsupported major.minor version 51.0”错误。

我确实安装了 JDK6 和 JDK7，但是我的所有 JRE 设置都指向 1.6，无论是在 pom 中还是在 Eclipse 的项目属性页面中。没有多少 Maven 更新项目和/或刷新解决了这个问题。

最后我尝试关闭项目并重新打开它，这似乎解决了它！高温高压

* * *

## 回答 #29

> 赞同：3
> 
> 时间：2014-06-26T07:40:13.380

您已经使用 JDK 7 编译了 Java 类，并且尝试在 JDK 6 上运行相同的类。

* * *

## 回答 #30

> 赞同：3
> 
> 时间：2014-08-04T10:21:55.963

*   安装 JDK 7.0.55 并将 Java for [Eclipse](http://en.wikipedia.org/wiki/Eclipse_%28software%29)设置为 JDK 7.0.55。
*   通过在构建路径 JDK 7.0.55 上配置，使用 JDK 7.0.55 构建项目。
*   通过菜单*Windows* -> *Preferences* -> *Java* -> *Compiler* - 选择 1.7 在 Eclipse 中为 JDK 7.0.55 设置编译器。

* * *

## 回答 #31

> 赞同：3
> 
> 时间：2018-11-10T01:47:15.173

问题的答案是：

**线程“主”java.lang.UnsupportedClassVersionError 中的异常：edu/stevens/cs549/dhts/main/LocalContext：不支持的major.minor 版本52.0**

我遇到了同样的问题。对于那些在 AWS ec2 实例中遇到这个问题并且不知何故被重定向到这个问题的人。我正在回答这些问题，并想分享我是如何做到的。我遇到了麻烦，因为 Amazon EC2 实例运行的是 java 1.7 版，也许我的项目与它不兼容，因为我使用的是 Maven，并且它是为 java 1.8 预配置的。所以我安装了新版本的java：

`sudo yum -y install java-1.8.0`

然后重要的一步是删除旧版本：

```
sudo yum remove java-1.7.0-openjdk 
```

请记住在安装新版本后将其删除，否则它将继续使用相同的旧版本，我希望它可以解决您的问题，在我的情况下就是这样。

* * *

## 回答 #32

> 赞同：3
> 
> 时间：2019-01-08T13:45:39.630

由于 java 9`-target`被替换为`--release`.

在 java 11 之前，可用的数字`--release`是`6` `7`, `8`, `9`, `10`, `11`.
您可以猜测未来的版本将是`12`, `13`, 并继续。

要为较旧的目标 jvm 编译，使用`javac --release 7 Tmp.java`// 这将生成可以在 jvm >= 7 上运行的 .class 文件，

然后您可以通过以下方式检查目标版本：

`javap -v Tmp | grep version`

在输出中，`major version`确定目标 jvm 版本。

*   55 -> 爪哇 11
*   54 -> 爪哇 10
*   53 -> 爪哇 9
*   52 -> 爪哇 8
*   51 -> 爪哇 7
*   50 -> 爪哇 6

**未来版本将删除更多旧版本：**

*   从 java 11 开始，不支持主要版本 <= 49 *(java version <= 5)*。
*   从 java 12 和 13 开始，不支持主要版本 <= 50 *(java version <=6)*。

您可以通过命令找出当前 javac 支持哪些目标版本：
`javac -help | grep releases`

* * *

## 回答 #33

> 赞同：1
> 
> 时间：2015-08-04T09:45:23.157

[在安装了Homebrew](https://en.wikipedia.org/wiki/Homebrew_%28package_management_software%29)的 Mac OS X 上解决此问题的另一种方法是：

```
brew install Caskroom/cask/java 
```

* * *

## 回答 #34

> 赞同：1
> 
> 时间：2017-03-18T17:43:53.127

我遇到了同样的问题，我在**Linux**中修复了它。

检查你的`$JAVA_HOME`

需要 JDK 1.8 来编译/构建 APK

安装 Java JDK 1.8 并更改`JAVA_HOME`

编辑`~/.bashrc`您的 JDK 1.8 路径并将其添加为`JAVA_HOME`.

`export JAVA_HOME=/usr/lib/jvm/java-8-oracle/jre/`

和`source ~/.bashrc`

关闭当前终端窗口/选项卡并运行`$JAVA_HOME`以检查路径。

* * *

## 回答 #35

> 赞同：0
> 
> 时间：2014-11-28T13:59:33.220

我有同样的情况，但上述任何提示都没有帮助:) 在我们的环境中，我们有 tomcat 在 Windows 上作为服务运行。我们安装了 Java 1.7 并在这个版本上设置了 JAVA_HOME。当然，源代码是基于 Java 1.7 构建的。尽管如此，tomcat 说它使用以前版本的 JVM。经过深入分析后发现，安装在 Windows 上的 Tomcat 服务仍然保持 JAVA_HOME 的旧值指向 Java 1.6。安装新的 Tomcat 服务后，一切都解决了。所以结论是：当你改变java版本和tomcat作为服务运行时，你必须重新安装tomcat服务。

* * *

## 回答 #36

> 赞同：0
> 
> 时间：2015-04-18T12:21:02.620

我在[Grails](http://en.wikipedia.org/wiki/Grails_%28framework%29)项目的 Spring Source Tool (STS) IDE 中遇到了同样的问题。我检查了安装的 Java 版本，项目 Java 版本是 1.7.*。后来我发现在**GGTS.ini**文件中Java版本设置为1.6：

**解决方案：**

-Dosgi.requiredJavaVersion=1.6 更改为
-Dosgi.requiredJavaVersion=1.7在 -vmargs -vm jdk1.7.0_21/jre/lib/amd64/server/libjvm.so
之前添加以下两行

问题解决了。快乐编码。

* * *

## 回答 #37

> 赞同：0
> 
> 时间：2015-09-01T08:34:44.910

将此添加到您的 pom.xml 文件中：

```
<project ....>
    <properties>
        <maven.compiler.source>1.7</maven.compiler.source>
        <maven.compiler.target>1.7</maven.compiler.target>
    </properties>
</project> 
```

其中 1.7 是您打算使用的 Java 版本。这会覆盖[Maven](http://en.wikipedia.org/wiki/Apache_Maven)编译器设置，因此最好从这里调试。

* * *

## 回答 #38

> 赞同：0
> 
> 时间：2015-11-01T00:35:58.327

我通过检查部署程序集中部署了 Maven 依赖项为我解决了这个问题。在我的情况下，他们不是。

添加它解决了这个问题。

* * *

## 回答 #39

> 赞同：0
> 
> 时间：2017-07-18T00:03:14.607

我什么都试过了。重新安装 Tomcat 终于奏效了。这是我在重新安装之前检查过的内容。

确保您的环境变量看起来像这样。

```
$ echo $JAVA_HOME
C:\Program Files\Java\jdk1.7.0_51\
$ echo $JRE_HOME
C:\Program Files\Java\jdk1.7.0_51\jre\bin 
```

确保 Eclipse 使用与您设置 JAVA_HOME 相同的 jre（如果未设置 JAVA_HOME，它将查看 JRE_HOME）。`Window > Prefrences > Java > Installed JREs`（选中的是默认的）

如果您对任何 tomcat 文件（尤其是 catalina.bat 或 startup.bat）进行了任何更改，那么您可能会告诉 tomcat 查看与您设置为 JAVA_HOME 的版本不同的 java 版本`C:\Program Files (x86)\Apache\apache-tomcat-7.0.26\bin`

* * *

## 回答 #40

> 赞同：0
> 
> 时间：2018-06-19T08:22:24.293

如果您使用的是 ant，您可以在 build.xml 文件中为编译器指定“目标”，如下所示：

```
 <target name="compile" depends="init">
    <javac executable="${JAVA_HOME}\bin\javac" srcdir="${src.dir}" target="1.6" destdir="${classes.dir}" debug="true"
        deprecation="true" classpathref="compile.classpath" encoding="utf8">
        <include name="**/*.java" />
    </javac>
</target> 
```

* * *

## 回答 #41

> 赞同：0
> 
> 时间：2020-02-23T17:27:47.743

许多答案是指 IDE 之类的 Eclipse。但是，这个问题与使用 Notepad++ 的本机开发有关。

命名错误的核心原因是使用的 Java 运行时环境和使用的类分别库不匹配。以下描述的目标是在不进行任何额外安装的情况下进行编译。

**1）** 检查`PATH`变量中的定义。如果有定义：

`C:\Program Files (x86)\Common Files\Oracle\Java\javapath`

和/或

`C:\ProgramData\Oracle\Java\javapath`

这些路径链接到具有固定 java 版本的 java/javac。您可以在此文件夹中使用`javac -version`. 结果可以是：

`java version "1.8.0_231"`

这意味着，Java 版本 8 正在使用中。将此条目替换为`%JAVA_HOME%\bin`。如果JDK是手动安装的，请检查`JAVA_HOME`环境中是否设置了。如果没有，请在此处添加它，例如：

`JAVA_HOME="C:\Program Files\Java\jdk1.7.0_80"`

**2）** 我已经用gradle在命令行上构建了项目。在`build.gradle`被定义：

```
android {
    buildToolsVersion "24.0.1"
    dependencies {
        compile 'com.android.support:design:23.0.1'
        compile 'com.android.support:support-v4:23.0.1'
        ...
    }
    ...
} 
```

使用的`build-tools`dx 文件比其他组件更新。因此需要修改：

`buildToolsVersion "23.0.1"`

* * *

## 回答 #42

> 赞同：0
> 
> 时间：2020-04-02T05:09:47.200

如果有人在使用 Gradle，则将其放入 build.gradle

`java { sourceCompatibility = JavaVersion.VERSION_1_7 targetCompatibility = JavaVersion.VERSION_1_7 }`

在上述情况下，我们告诉编译器使字节码与版本 java 7（我要运行该类的 java 版本）兼容。

* * *

## 回答 #43

> 赞同：-1
> 
> 时间：2014-09-04T11:35:38.757

我遇到了同样的问题，我在 Mac 上通过[这个解决方案解决了这个问题。](http://brianoneill.blogspot.in/2012/11/installing-jdk-7-on-mac-os-x.html)我希望它可以帮助某人。这是因为系统不知道JDK的较新版本，它仍然指向旧的JDK。

* * *

## 回答 #44

> 赞同：-1
> 
> 时间：2016-07-16T23:58:14.310

如果您在构建路径中添加了第二个项目，请确保它与您的第一个项目具有**相同的编译器版本**：属性 -> Java 编译器 -> 编译器合规级别

* * *

## 回答 #45

> 赞同：-1
> 
> 时间：2016-07-20T08:18:27.733

我正在使用 OS X v10.11.5 (El Capitan)，我尝试设置 JAVA_HOME 并通过 Maven 强制“正确”的 Java 版本。没有任何帮助。

问题发生在应用程序仍在运行时注销 OS X 帐户。再次登录后，OS X 打开了旧的终端会话，历史记录为灰色。我使用相同的终端会话来构建项目，但由于不支持的类版本错误而失败。

清理 Maven 项目根本没有帮助。

为了解决这个问题，我只需要关闭自动打开的终端窗口并使用一个新的。

* * *

## 回答 #46

> 赞同：-1
> 
> 时间：2016-10-12T21:54:43.810

1.  单击项目中的属性。
2.  转到 Java 构建路径。
3.  单击添加库。
4.  单击 JRE 系统库上的下一步。如果默认未选中，请选择您需要的那个。
5.  单击完成。

你完成了！

* * *

## 回答 #47

> 赞同：-1
> 
> 时间：2017-01-19T15:59:28.220

对我来说，我在`com/sun/javadoc/Doclet`课堂上遇到了这个错误。经过一番挖掘，我发现我不小心将`tools.jar`Java 8 中的文件复制到了我的 Java 7 文件夹中。

找到`tools.jar`for Java 7 并将其放回文件夹解决了我的问题。所以有什么可以尝试的。

* * *

## 回答 #48

> 赞同：-1
> 
> 时间：2019-01-13T18:08:05.753

确保检查 java 的环境变量版本，这可能只是`JAVA_HOME`(JDK path) 和`JRE_HOME`(JRE path) 的版本之间的差异，这会导致问题

* * *

## 回答 #49

> 赞同：-1
> 
> 时间：2019-04-08T11:56:05.367

如您所知，为 jdk（Java 开发工具包）bin 目录设置环境变量 Java_home 始终是一种好习惯。

在上面查看您的问题似乎 JRE-运行时环境正在寻找与 JDk 的 Superset 库不兼容的类。我建议直接从 Oracle 下载源获取完整的 JDK 和 JRE 或 Jboss（如果需要）包，以避免任何此类问题。

* * *

## 回答 #50

> 赞同：-1
> 
> 时间：2019-08-14T09:41:28.927

就我而言，问题是由于 $JAVA_HOME 和 $PATH 中的 Java 版本不同而发生的。

```
echo $JAVA_HOME
/usr/lib/jvm/java-7-openjdk-amd64/jre
echo $PATH
/opt/jdk/jdk1.8.0_151/bin:/usr/lib/jvm/java-7-openjdk-amd64/jre/bin:/usr/local/bin:/usr/bin:/bin 
```

一旦我将它们更新为相同版本的 Java，问题就消失了。

```
export JAVA_HOME=/opt/jdk/jdk1.8.0_151
export PATH=$JAVA_HOME/bin:$PATH 
```

# ios - 如何使用 NSTimeZone -timeZoneWithName: 与 Rails ActiveSupport 中的城市名称？

> ID：10382932
> 
> 赞同：19
> 
> 时间：2012-04-30T11:28:50.553
> 
> 标签：ios, timezone, nstimezone, activesupport

如果我只有*曼谷*或*东京*这样的城市名称，我该如何提供一个时区参数， `[NSTimeZone timeZoneWithName:@"Asia/Tokyo"]`其中它也有大陆并在城市前面有斜线？

我已经试过了`[NSTimeZone timeZoneWithName:@"Tokyo"]`，还是不行。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-05-02T10:42:51.807

感谢各位的回答，但看起来这些城市名称只是 Rails“ActiveSupport::TimeZone”使用的一种格式。所以我只需要把它映射回来。映射在这里-> [http://api.rubyonrails.org/classes/ActiveSupport/TimeZone.html](http://api.rubyonrails.org/classes/ActiveSupport/TimeZone.html)

它将时区从 Rails "ActiveSupport::TimeZone" 格式映射到 iOS 使用的另一种格式（例如 "International Date Line West" => "Pacific/Midway", "Midway Island" => "Pacific/Midway", "Samoa" => "Pacific/Pago_Pago", ... )。

我创建[了一个包含 NSDictionary 属性的 plist 文件](https://gist.github.com/hlung/4701173)，该属性可轻松用于映射。

编辑： Rails 3.2[的更新版本](https://gist.github.com/rjregenold/5243201)（带有使用示例）（感谢 RJ Regenold！）

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-09-19T11:13:24.830

您可以查看所有时区名称的列表。

```
NSLog(@"%@", [NSTimeZone knownTimeZoneNames]); 
```

希望这对您有所帮助。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-04-30T12:37:58.947

如果他们都在亚洲，为什么不使用类似的东西：

```
MYCITY=Tokyo
[NSTimeZone timeZoneWithName:@"Asia/$MYCITY"] 
```

如果您需要更多城市和时区，您可以根据 /usr/share/zoneinfo 中找到的所有时区创建一个静态文本列表文件。

使用以下文本创建文件“timezones.by.city.txt”。（此处截断。）

```
"Asia/Aden"
"Asia/Almaty"
"Asia/Amman"
"Asia/Anadyr"
"Asia/Aqtau"
"Asia/Aqtobe"
"Asia/Ashgabat"
"Asia/Ashkhabad"
"Asia/Baghdad"
"Asia/Bahrain"
"Asia/Baku"
"Asia/Bangkok"
"Asia/Beirut"
"Asia/Bishkek"
... etc.
"US/Alaska"
"US/Aleutian"
"US/Arizona"
"US/Central"
"US/Eastern"
"US/East-Indiana"
"US/Hawaii"
"US/Indiana-Starke"
"US/Michigan"
"US/Mountain"
"US/Pacific"
"US/Pacific-New"
"US/Samoa" 
```

然后：

```
MYCITY=Bangkok
MYTZ=`grep "$MYCITY" ./timezones.by.city.txt`
[df setTimeZone:[NSTimeZone timeZoneWithName:@"$MYTZ"]] 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-30T12:04:15.640

```
NSArray *zones = [NSTimeZone knownTimeZoneNames]; 
```

它返回系统支持的所有时区集。

您必须`setTime`像下面这样进行分区，您已经尝试过。

```
[NSTimeZone timeZoneWithName:@"Asia/Tokyo"]; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-30T11:59:22.787

[您可能会发现来自http://www.geonames.org/](http://www.geonames.org/)的数据集和/或 API对解决此类问题很有用。他们拥有适用于大量地点的正确 olsen 时区（也就是所谓的“亚洲/东京”），您可以自己下载和整理数据，或者使用他们的 API 来获取您需要的信息。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-07-21T13:10:54.603

```
NSString * TimeZoneName=[[NSTimeZone localTimeZone]name]; 
```

# java - 如何在java android中将ellipsize设置为两行或多行textview

> ID：10382933
> 
> 赞同：4
> 
> 时间：2012-04-30T11:28:52.110
> 
> 标签：java, android-layout, textview, android

我需要设置`ellipsize=end`为允许在两行上展开的 TextView。我试过这段代码：

```
<TextView
    android:id="@+id/carouselTitle"
    android:layout_width="228dp"
    android:layout_height="40dp"
    android:layout_marginBottom="0dp"
    android:layout_marginLeft="90dp"
    android:layout_marginRight="0dp"
    android:layout_marginTop="4.5dp"
    android:ellipsize="end"
    android:maxLines="2"
    android:textSize="24sp"
    android:textStyle="bold" >
</TextView> 
```

请举例回复。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-30T11:38:36.460

```
<TextView 
 android:layout_width="fill_parent" 
 android:layout_height="wrap_content" 
 android:ellipsize="marquee" 
 android:singleLine="false" 
 android:maxLines="2"   
 android:text="here is my text" /> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-07-05T13:41:05.827

这将是工作：

```
<TextView
    android:id="@+id/carouselTitle"
    android:layout_width="228dp"
    android:layout_height="40dp"
    android:layout_marginBottom="0dp"
    android:layout_marginLeft="90dp"
    android:layout_marginRight="0dp"
    android:layout_marginTop="4.5dp"
    android:ellipsize="end"
    android:maxLines="2"
    android:singleLine="false"
    android:textSize="24sp"
    android:textStyle="bold" >
</TextView> 
```

你唯一错过的是`android:singleLine="false"`。

我建议把`android:gravity="center_vertical"`更好的用户界面。如果文本仅在一行上，它将垂直居中。

# windows-phone-7 - WP7 地图控件的图钉大小

> ID：10382950
> 
> 赞同：1
> 
> 时间：2012-04-30T11:29:59.053
> 
> 标签：windows-phone-7, map, pushpin

在尝试实现显示当前用户位置的逻辑时，我遇到了一个问题。

```
<Maps:Pushpin Location="{Binding MyLocation}" Canvas.ZIndex="1000" PositionOrigin="Center"  >
            <Maps:Pushpin.Template>
                <ControlTemplate>
                    <Grid>
                        <Ellipse Width="{Binding MyAccuracyViewSize}" Height="{Binding MyAccuracyViewSize}"
                                 Fill="#60008000" Stroke="Green" StrokeThickness="3"/>
                        <Ellipse Width="18" Height="18" Fill="#A0FF4500" VerticalAlignment="Center" HorizontalAlignment="Center"  />
                    </Grid>
                </ControlTemplate>
            </Maps:Pushpin.Template>
        </Maps:Pushpin> 
```

较大的绿色圆圈显示准确区域。它的像素大小因缩放而异。如果缩放级别很大 - 它变得相当大（> 480 像素）。那时它会被屏幕分辨率裁剪。AFAIK WP7 的控件大小限制为 2000x2000 像素。

似乎这是一种地图控制限制。

任何想法如何消除此限制以显示最大为 2000x2000 像素的椭圆？

![此行为的屏幕截图](../Images/6cd433d96ec4a745ca98ec62d85e5d7c.png)

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T12:38:56.473

MapPolygon 怎么样？

```
void OnPositionChanged(object sender, GeoPositionChangedEventArgs<GeoCoordinate> e)
        {
            SecondsCounter = 0; //reset counter
            double accuracy = e.Position.Location.HorizontalAccuracy;
        if (accuracy < e.Position.Location.VerticalAccuracy)
        {
            accuracy = e.Position.Location.VerticalAccuracy;
        }

        if (PolyCircle == null)
        {
            PolyCircle = new MapPolygon();
            PolyCircle.Opacity = 0.7;
            //Set the polygon properties 

            PolyCircle.Fill = new SolidColorBrush(Colors.Orange);
            PolyCircle.Stroke = new SolidColorBrush(Colors.Purple);
            PolyCircle.StrokeThickness = 4;

            map1.Children.Add(PolyCircle);
        }

        PolyCircle.Locations = CreateCircle(e.Position.Location, accuracy);

        map1.Center = e.Position.Location;    

    }

    public static double ToRadian(double degrees)
    {
        return degrees * (Math.PI / 180);
    }

    public static double ToDegrees(double radians)
    {
        return radians * (180 / Math.PI);
    }

    public static LocationCollection CreateCircle(GeoCoordinate center, double radius)
    {
        var earthRadius = 6367000; // radius in meters
        var lat = ToRadian(center.Latitude); //radians
        var lng = ToRadian(center.Longitude); //radians
        var d = radius / earthRadius; // d = angular distance covered on earth's surface
        var locations = new LocationCollection();

        for (var x = 0; x <= 360; x++)
        {
            var brng = ToRadian(x);
            var latRadians = Math.Asin(Math.Sin(lat) * Math.Cos(d) + Math.Cos(lat) * Math.Sin(d) * Math.Cos(brng));
            var lngRadians = lng + Math.Atan2(Math.Sin(brng) * Math.Sin(d) * Math.Cos(lat), Math.Cos(d) - Math.Sin(lat) * Math.Sin(latRadians));

            locations.Add(new GeoCoordinate(ToDegrees(latRadians), ToDegrees(lngRadians)));
        }

        return locations;
    } 
```

更多[here](http://www.developer.nokia.com/Community/Wiki/Maps_Examples_for_Windows_phone)，在我的地图位置示例中。祝你好运！

# c# - 通过 linq 数据源修改 asp.net 网格

> ID：10382951
> 
> 赞同：2
> 
> 时间：2012-04-30T11:30:01.050
> 
> 标签：c#, asp.net, linq, linq-to-sql

问候，我正在使用从 linq 表达式获取其来源的网格。

以下是 linq 示例：

```
var data = from row in tempCity.AsEnumerable()
           group row by row.Field<string>("City") into city
           select new
           {
              City = city.Key, 
              Count = city.Count()
           }; 
```

将“数据”分配给网格的数据源后，我得到了我需要的结果。当我试图使我的应用程序支持多语言时，问题就出现了，我找不到将我的 Grid 的 City 和 Count 标题翻译成另一种语言的方法。

我尝试执行以下操作： 1.在 linq 表达式中写入 GetLocalResource("City") 而不是城市，而不是术语“城市”，它不起作用。

2.以编程方式更改网格的属性，但是，由于每个操作的 linq 表达式不同，这取决于我想要的客户，我的 aspx 页面上没有预制列，所以我无法访问 grid.Column 属性 - 始终标记为0。

3.把linq的所有数据放在一个DataTable里面，我知道这个应该可以，但是感觉不太对劲，看起来有点笨拙，我想要一个更干净的解决方案。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T12:01:42.307

I suppose solution 1 would be your favorite. But your LINQ query gets translated into an SQL-query and there is of course no SQL method like GetLocalResource.

Apparently your database stores only city codes and the culture dependent names are in the resources. I would try the following: use your existing LINQ statement to grab the data. Convert the city to a localized string within your view, e.g.

```
<asp:Literal Text='<%# GetLocalResource(Eval("City"))' runat="server" /> 
```

# java-me - 如何在 j2me 中制作网格视图

> ID：10382957
> 
> 赞同：0
> 
> 时间：2012-04-30T11:30:19.117
> 
> 标签：java-me, midp, lcdui

我是 j2me 的新手。我想设计以下类型布局和组件。

![在此处输入图像描述](../Images/e092eab08a313fddd56a709115b5482d.png)

意思是我想在gridview中安排我的项目。单击每个项目后，我将移至另一个表单。

我正在使用简单的`lcdui`. 请建议我该怎么做。意味着我如何在 gridview 中排列这些项目以及我应该在此处使用哪些项目按钮或其他东西。

你可以给我一些合适的链接。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T09:11:09.370

在 J2ME 中，您有两个 UI 选项：Form 和 Canvas。
表单是一种非常简单的显示信息的方式，无需处理事物的图形方面，其中 Canvas 是一个空白屏幕，您需要绘制对象及其行为。

还有第三种方法：Sun 的人创建了一个名为（[LWUIT](http://lwuit.java.net/)，代表 Light Weight UI Toolkit）的框架。这个工具包提供了 Forms 的简单性和 Canvas 的 UI 控件。

希望我有所帮助。

# asana - 查询 Asana 中的未完成任务

> ID：10382959
> 
> 赞同：0
> 
> 时间：2012-04-30T11:30:25.717
> 
> 标签：asana

我们正在考虑使用 Asana 在一家网络开发公司中结合 CRM、管理和问题跟踪。我们需要的关键功能是查看工作区中所有项目的“下一步行动”或“最重要的 [1|2|3] 优先级”，无论它们被分配给谁。似乎 Asana 没有提供开箱即用的功能（对吗？），所以我正在考虑编写 API 查询以将其拉出到我们自己的仪表板中。

我知道您不想让人们在一个工作区中提取所有任务，因为它可能会增长，但是有没有办法在每个项目中提取前几个未完成的任务，而无需指定受让人？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T18:12:21.647

（我为 Asana 工作）

目前，该 API 允许您获取项目中的所有任务，请参阅[https://asana.com/developers/api-reference/projects](https://asana.com/developers/api-reference/projects)。它将按排名顺序返回它们（与它们在 Asana UI 中显示的顺序相同），但不会将它们限制为某个数字；你必须得到他们所有。限制和分页在我们的路线图上，以使开发人员能够更有效地处理更大的项目和工作空间。

因此，您似乎想要获取所有项目，然后遍历它们并查询所有任务 - 默认情况下，这将为您提供它们的名称和 ID。如果您想了解要显示的任务的更多详细信息，那么我建议您单独查询每个任务的详细信息。

# emacs - 让 Newsticker.el 使用带有登录凭据的 rss 提要

> ID：10382960
> 
> 赞同：3
> 
> 时间：2012-04-30T11:30:26.040
> 
> 标签：emacs

我也在尝试在一些需要登录凭据的内部 rss 提要上使用 Newsticker.el。由于 newsticker 所做的只是让 wget 获取我认为的提要，因此可以在 newsticker.el 的 wget 配置部分中简单地定义用户名和密码

所以我在我的 init.el 中配置了以下内容

```
'(newsticker-url-list (quote (("RSS FEED" "https://to.feed.com/timeline?format=rss"
              nil nil ("--user=<username>" "--password=<password>" "-q" "-O" "-"))) 
```

将`--user` and`--password`选项直接提供给 wget 可以正常工作，但不能在 newsticker.el 设置中。以前有人尝试过类似的东西吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T14:31:52.077

Newsticker 确实可以使用 wget，但它也可以使用 Emacs 的 URL 库。所以你可能想检查一下`newsticker-retrieval-method`使用的是哪一个。

# ios - 在 iOS 的 CATextLayer 中显示西班牙语字母 Ñ 的问题

> ID：10382963
> 
> 赞同：1
> 
> 时间：2012-04-30T11:30:32.677
> 
> 标签：ios, catextlayer

我正在尝试显示带有西班牙语字母 Ñ 的单词，但该字母仅出现，没有变音波浪号作为大写 N。但是，小写字母 ñ 正在正确显示。知道如何在 iOS 中使用默认字体在 CATextLayer 中显示字母吗？

我在下面给出了示例代码。

```
 CATextLayer *tempLayerForTextWith = [CATextLayer layer];
    tempLayerForTextWith.frame = CGRectMake(10, 10, 100, 100);
    //tempLayerForTextWith.font = [[UIFont boldSystemFontOfSize:actualFontSize] fontName];
    //tempLayerForTextWith.fontSize = actualFontSize;
    tempLayerForTextWith.string = @"ñÑ";
    tempLayerForTextWith.backgroundColor = [[UIColor lightGrayColor] CGColor];
    wordLayer.foregroundColor = textColor;
    [contentView.layer addSublayer:tempLayerForTextWith]; 
```

我对德语字母 Ä、Ö、Ü 也有同样的问题。如果您知道，请告知如何解决。

布拉德的问题后更新。

我发现只有第一行有这个问题。如果我将文本设置为长文本以便使用下面的代码进行换行，那么我发现从第二行开始的变音符号被正确绘制。CATextLayer 中是否有办法指定文本的基线，因为似乎 iOS 设置的基线使得文本的头部被切断。

tempLayerForTextWith.string = @"ÑñÑÄÖÜÑñÑÄÖÜÑñÑÄÖÜÑñÑÄÖÜÑñÑÄÖÜ"; tempLayerForTextWith.wrapped = 是；

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T21:43:31.357

它是iOS中的一个错误。它已被记录并被 Apple 接受。您可以添加一个新行字符来引入一个新行，它会在第二行正确显示变音符号，或者您可以使用 CALAyer 中的 drawLayer 或其他选项来绘制自己。

# ajax - 在 selenium web 驱动程序中等待 AJAX 响应的 Perl 代码

> ID：10382965
> 
> 赞同：-2
> 
> 时间：2012-04-30T11:30:46.140
> 
> 标签：ajax, perl, selenium, webdriver

我正在使用[Selenium::Remote::Driver](http://search.cpan.org/~gchild/Selenium-Remote-Driver-0.11/lib/Selenium/Remote/Driver.pm)模块来测试网页，

谁能告诉我如何在这里等待ajax响应。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T16:33:47.113

对于 jQuery：

```
$driver->execute_script("return jQuery.active") 
```

对于原型：

```
$driver->execute_script("return ajax.activeRequestCount") 
```

对于道场：

```
$driver->execute_script("return dojo.io.XMLHTTPTransport.inFlight.length") 
```

返回一个整数，如果返回值为0，则AJAX请求完成。

```
$count = 0;
while ($count < 20) {
    if ($driver->execute_script("return jQuery.active") == 0) {
        last;
    }
    $count ++;
    sleep(1);
} 
```

不知道perl，所以可能会有一些错误。此代码将等待 20 秒以完成 ajax。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-05-03T14:22:18.410

## ***解决方案***

经过长时间的浏览，我得到了结果，但不是在 ajax 控制中......

我在代码中做一些逻辑，比如等待 ajax 元素出现在页面中，这解决了我的一些问题。以下是我提到的网址
[WaitForElementPresent](http://www.seleniumwiki.com/webdriver/using-selenium-waitforelementpresent-in-webdriver/)
[IsElementPresent](http://www.seleniumwiki.com/webdriver/using-selenium-iselementpresent-in-webdriver/)

这些链接不包含 perl 代码，但我可以使用[Selenium::Remote::Driver](http://search.cpan.org/~aivaturi/Selenium-Remote-Driver-0.15/lib/Selenium/Remote/Driver.pm)模块中的方法来做到这一点。

# android - 双卡安卓sdk

> ID：10382971
> 
> 赞同：6
> 
> 时间：2012-04-30T11:31:04.733
> 
> 标签：android, sim-card, dual-sim

sdk（默认）中有什么方法可以处理双模拟吗？市场上有许多双 sim 卡的 android 手机。我想要的是以编程方式更改默认 sim。是否可以？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-30T11:51:01.257

自 Android 5.1起， [Multiple-Sim 支持](https://developer.android.com/about/versions/android-5.1.html#multisim)已正式添加到 Android SDK！

[您可以通过SubscriptionManager](https://developer.android.com/reference/android/telephony/SubscriptionManager.html)类访问有关当前使用的 sim 的信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-07-15T08:49:07.970

是的，你可以使用`SubscriptionInfo`类来实现这一点，这是我的[答案](https://stackoverflow.com/a/62910979/5351055)

# wordpress - Facebook 喜欢按钮正确的缩略图在 wordpress 帖子列表页面中无法正常工作

> ID：10382980
> 
> 赞同：1
> 
> 时间：2012-04-30T11:31:49.273
> 
> 标签：wordpress, facebook, post, facebook-like, thumbnails

我正在使用[http://wordpress.org/extend/plugins/add-to-any/](http://wordpress.org/extend/plugins/add-to-any/)这个插件在 wordpress 的帖子列表页面上显示 facebook like 按钮。在我的帖子列表中，我也显示了帖子的缩略图。我希望当有人喜欢一个帖子时，它应该张贴在他/她的 Facebook 墙上。这是正常发生的，但 fb 墙上的缩略图显示不正确。

当我喜欢第二个帖子时，它会在该页面上随机发布一些其他帖子的图片。我想在用户喜欢的 fb 墙上显示特定帖子的图像。我认为这是因为我在同一页面上有多个图像，而 facebook 无法决定选择哪个图像，所以它从页面中选择一个随机图像。而在帖子详细信息页面上，只有 oine 图像在这种情况下工作正常并在 fb 墙上显示正确的图像。

有没有办法在 wordpress 列表页面中解决这个问题？

# android - 使用 SurfaceView 的画布布局

> ID：10382981
> 
> 赞同：0
> 
> 时间：2012-04-30T11:31:50.473
> 
> 标签：android, android-layout, surfaceview, android-canvas

我试图让图像移动。图像不动，有时会闪烁。我想让它可运行。它使用一个 Surface Holder，s 是位图。画布有时保持静止在 i=0 或闪烁。如何使其可运行

```
package com.smiley;

import android.content.Context;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.graphics.Canvas;
import android.graphics.Path;
import android.util.AttributeSet;
import android.util.Log;
import android.view.KeyEvent;
import android.view.SurfaceHolder;
import android.view.SurfaceView;

public class SmileyView extends SurfaceView implements SurfaceHolder.Callback {
    public SmileyView(Context context, AttributeSet attrs) {
        super(context, attrs);
        // TODO Auto-generated constructor stub
        holder = getHolder();
         s= BitmapFactory.decodeResource(context.getResources(),R.drawable.smiley);
         holder.addCallback(this);
    }

    @Override
public boolean onKeyUp(int keyCode, KeyEvent msg) {
    super.onKeyUp(keyCode, msg);

    rv.update();

    return true;
    }
private int i=0;
    private Bitmap s;private SurfaceHolder holder;private RenderView rv ;
     boolean grun=true;long t=0;
    public void resume()
    {
        rv=new RenderView();
    }

    @Override
    public void surfaceChanged(SurfaceHolder arg0, int arg1, int arg2, int arg3) {
        // TODO Auto-generated method stub

    }

    @Override
    public void surfaceCreated(SurfaceHolder arg0) {
        // TODO Auto-generated method stub
        grun=true;
        if(rv!=null)
        rv.start();
    }

    @Override
    public void surfaceDestroyed(SurfaceHolder arg0) {
        // TODO Auto-generated method stub
    try {
        grun =false;
        rv.join();
        rv=null;
    } catch (InterruptedException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    }

class RenderView extends Thread  {

    RenderView(){
    super();

    }
    @Override
    public void run()
    {
        SurfaceHolder h=holder;
        while(grun)
        {
            Canvas ca=null;
            try{ca = h.lockCanvas(null);
               synchronized (h) {
            update();   dodraw(ca);
               }
            }
            finally
            {
                if(ca!=null)
                h.unlockCanvasAndPost(ca);
            }
        }
    }
    public void dodraw(Canvas canvas)
    {   canvas.drawBitmap(s, i, i , null);

        canvas.restore();
    }
    public void update()
    {  
        if(i==0)
                  i=100;
    }
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T11:38:20.357

我为您在这里想要做的事情做了一个教程。你可以在[这里查看](http://androiddev101.com/2012/03/18/episode-4-how-to-make-an-android-game/)。如果我不得不猜测，那么可能是没有清理画布的问题。尝试将其更改为（假设您的背景是位图 backBG）

```
public void dodraw(Canvas canvas)
    {   
        canvas.drawBitmap(backBG, 0, 0, null);
        canvas.drawBitmap(s, i, i , null);

        canvas.restore();
    } 
```

# android - 布局，将视图添加到视图组中，并将它们显示在行上，因此不需要滚动

> ID：10382983
> 
> 赞同：2
> 
> 时间：2012-04-30T11:31:54.387
> 
> 标签：android, android-layout, viewgroup

我已经尝试过RelativeLayout 和LinearLayout，但没有弄清楚其中的任何一个。

我有许多视图（EditText）5-10，其中一些已启用，有些未启用。我想要的是让它们都显示出来。首先应该放在左上角，然后它们应该首先传播到右边，如果填满，然后在下一行。

有没有办法做到这一点，而无需自己编写整个布局？:-)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T11:39:47.183

你可以像这样 **row.xml进行布局**

```
<LinearLayout....>

    <EditText1....>
    <EditText2....>

</LinearLayout>
-------------------------------INFLATE ROW TO YOUR LAYOUT
LinearLayout featureLayout = (LinearLayout) View.inflate(BonusFilms.this, R.layout.row, null);

yourLayout.addView(featureLayout); // u can use this in for loop 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-30T15:04:31.983

您要查找的属性是 layout_weight，它将在 LinearLayout 中的 EditText 元素上设置。

布局权重告诉 UI 该容器中的元素应如何分配空间。更具体地说，它告诉 UI 每个元素有权使用多少空间。如果您曾经使用过 html，这就像为您的列指定百分比一样。

假设您有 2 个 EditText，并且您希望它们中的每一个都均匀地间隔线性布局，您可以这样做：

```
<LinearLayout...>
    <EditText
        android:layout_width="0dip"
        android:layout_weight="1">
    <EditText
        android:layout_width="0dip"
        android:layout_weight="1">
</Linearlayout> 
```

注意：我不是 100% 确定为什么，但是您需要为要按权重分配的属性（在本例中为：宽度）指定 0dip。

在上述情况下，每个文本框都有权使用线性布局中可用空间的 50%。为什么？因为 LinearLayout 内所有元素的总权重为 2，每个文本框的权重为 1（参见下面的公式）

```
([allocation for current element] / [sum of all the weights]) * 100 = % of space allocated

(1 / 2) * 100 = 50% 
```

如果您希望第一个文本框占 66%，第二个文本框占 33%，您可以这样做：

```
<LinearLayout...>
    <EditText
        android:layout_width="0dip"
        android:layout_weight="2">
    <EditText
        android:layout_width="0dip"
        android:layout_weight="1">
</Linearlayout> 
```

这就是布局重量对您的帮助，但是，我不认为它有能力环绕有两个原因。1）文本框对它们的大小没有任何限制，那么它们如何知道何时达到限制并需要换行？您也许可以指定 minimumWidth 以强制它在某个点换行。

2）我不认为LinearLayout的包装。它们是无休止的一排。似乎您可能需要编写自己的自定义布局类，其中涉及对类中包含的内容以及可用的屏幕空间进行测量。

[Android - LinearLayout Horizo​​ntal with wrapping children](https://stackoverflow.com/questions/2961777/android-linearlayout-horizontal-with-wrapping-children)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-01T07:33:10.363

虽然我得到了一些非常好的回答，但它并没有真正回答我的问题。除了编写我自己的繁重数学布局之外，最好的解决方案是： [Sherif's answer](https://stackoverflow.com/questions/6996837/android-multi-line-linear-layout)

# apache-flex - returnKeyLabel 在 Flex Mobile 上不起作用

> ID：10382984
> 
> 赞同：0
> 
> 时间：2012-04-30T11:32:08.603
> 
> 标签：apache-flex, air, flex4.5

我在 flex TextInpout 上使用 returnKeyLabel 但它不起作用。它没有显示我设置的内容。知道可能是什么问题吗？我需要为此设置任何特殊的皮肤等级吗？我正在 iOS 设备上进行测试并使用 TextInput 组件

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T22:24:47.907

好的，为您提供更好的研究答案。

你想将 returnKeyLabel 设置为什么？它的唯一有效值是 default、done、go、next 和 search。虽然您可以更改标签文本，但您无法更改标签值。

请参阅：[http ://help.adobe.com/en_US/flex/mobileapps/WS82181550ec4a666a39bafe0312d9a274c00-8000.html#WS19f279b149e7481c1946f5fc1331cccb58f-8000](http://help.adobe.com/en_US/flex/mobileapps/WS82181550ec4a666a39bafe0312d9a274c00-8000.html#WS19f279b149e7481c1946f5fc1331cccb58f-8000)

请注意“并非所有设备都支持设置返回键的标签”这一行。

# ruby - 对包含字符串和整数的字符串进行排序，使字符串按字母顺序排列，所有整数按数字顺序排列

> ID：10382987
> 
> 赞同：0
> 
> 时间：2012-04-30T11:32:23.873
> 
> 标签：ruby, algorithm, sorting

示例输入：“car truck 8 4 bus 6 1”

示例输出：“公共汽车 1 4 卡车 6 8”

如果字符串中的第 n 个元素是整数，则它必须保持为整数，如果它是单词，则它必须保持为单词

有没有更优雅和有效的方法来做到这一点？下面是我的红宝石代码。我正在寻找更有效的代码（不需要在 ruby​​ 中）。

```
puts "Enter Input:"
inp = gets

inp_ary=inp.split(" ")

a=inp_ary.group_by{|i| i=~ /\d/}

sort_words = a[nil].sort
sort_integer = a[0].sort

index_words=[]
index_integer=[]

inp_ary.each_with_index do |e,i|
  if e =~ /\d/
    index_integer << i
  else
    index_words << i
  end
end

final = []

sorted = sort_words + sort_integer

index_integer.each_with_index do |e,i|
  final[e] = sort_integer[i]
end

index_words.each_with_index do |e,i|
  final[e] = sort_words[i]
end

puts "Sorted Output: "
puts final.join(" ") 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-30T11:51:09.747

```
s = "car truck 8 4 bus 6 1"

tokens = s.split
numbers, words = tokens.partition{|t| t =~ /^\d+$/}
numbers.map!(&:to_i).sort!
words.sort!

result = tokens.map{|t| (t =~ /^\d+$/ ? numbers : words).shift}.join(' ')

p result
#=> "bus car 1 4 truck 6 8" 
```

# wpf - 如何将静态对象发送到“PropertyChanged”事件

> ID：10382991
> 
> 赞同：0
> 
> 时间：2012-04-30T11:33:06.403
> 
> 标签：wpf, mvvm, user-controls, static, dependency-properties

我有一个 MVVM 模式的项目。我也有一个用户控件。此用户控件具有静态 DependencyProperty

```
public partial class RadarView : INotifyPropertyChanged
{

public static DispatcherTimer Timer { get; set; }

        public static readonly DependencyProperty RequestTypeProperty = DependencyProperty.Register("RequestType", typeof(RadarRequestType), typeof(RadarView), new FrameworkPropertyMetadata(new RadarRequestType(), RequestTypeChanged));

        public RadarRequestType RequestType
        {
            get
            {
                return
                    (RadarRequestType)GetValue(RequestTypeProperty);
            }
            set { SetValue(RequestTypeProperty, value); }
        }

        public static void RequestTypeChanged(DependencyObject dobject, DependencyPropertyChangedEventArgs args)
        {
        var radar = (RadarView)dobject;

            if (Timer == null)
                Timer = new DispatcherTimer { Interval = new TimeSpan(0, 0, 1) };

            Timer.Tick += DispatcherTimerTick;

            Timer.Start();

        }

        private static void DispatcherTimerTick(object sender, EventArgs e)
        {
            StartText = DateTime.Now.Second.ToString();

            PropertyChanged(this, new PropertyChangedEventArgs("StartText"));
        }

        public static event PropertyChangedEventHandler PropertyChanged = delegate { };

} 
```

我的问题出在 DispatcherTimerTick 中，因为这与我的用户 Control 相同，而且它不是静态的。此构建错误的消息是：关键字“this”在静态属性、静态方法或静态字段初始值设定项中无效

事实上，我需要将 (RadarView)dobject 发送到 DispatcherTimerTick 事件。我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T09:40:07.733

我的问题解决了。我的使用`Timer`是错误的。我需要`radar.Timer`。

# python - 使用元类限制属性类型

> ID：10382995
> 
> 赞同：4
> 
> 时间：2012-04-30T11:33:14.230
> 
> 标签：python, metaclass

我正在尝试使用 Python 进行元类编程，我想知道如何使用元类限制属性类型。使用描述符很容易，但是元类呢？

这是一个简短的例子：

```
>>> class Image(Object):
    ...     height = 0
    ...     width = 0
    ...     path = '/tmp'
    ...     size = 0

    >>> img = Image()
    >>> img.height = 340
    >>> img.height
    340
    >>> img.path = '/tmp/x00.jpeg'
    >>> img.path
    '/tmp/x00.jpeg'
    >>> img.path = 320
    Traceback (most recent call last):
      ...
    TypeError 
```

Python版本是2.7

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-30T12:34:19.090

只需`__setattr__`在元类中覆盖并在初始化期间检查每个属性的默认类型：

```
>>> class Meta(type):
    def __new__(meta, name, bases, dict):
        def _check(self, attr, value):
            if attr in self.defaults:
                if not isinstance(value, self.defaults[attr]):
                    raise TypeError('%s cannot be %s' % (attr, type(value)))
            else:                        
                self.defaults[attr] = type(value)

        def _setattr(self, attr, value):
            _check(self, attr, value)
            object.__setattr__(self, attr, value)

        cls = type.__new__(meta, name, bases, dict)
        # Set up default type for every attribute
        cls.defaults = {name: type(value) for name, value in dict.items()}
        cls.__setattr__ = _setattr
        return cls

>>> class Image(object):
    __metaclass__ = Meta
    height = 0
    width = 0
    path = '/tmp'
    size = 0

>>> i = Image()
>>> i.height = 240
>>> i.height
240
>>> i.size
0
>>> i.size = 7
>>> i.size
7
>>> i.path = '/tmp/subdir'
>>> i.path
'/tmp/subdir'
>>> i.path = 23
TypeError: path cannot be <type 'int'> 
```

替代（也许更优雅）的方法：

```
class MetaBase(object):
    def _check(self, attr, value):
        if attr in self.defaults:
            if not isinstance(value, self.defaults[attr]):
                raise TypeError('%s cannot be %s' % (attr, type(value)))
        else:
            self.defaults[attr] = type(value)
    def __setattr__(self, attr, value):
        self._check(attr, value)
        super(MetaBase, self).__setattr__(attr, value)

class Meta(type):
    def __new__(meta, name, bases, dict):
        cls = type.__new__(meta, name, (MetaBase,) + bases, dict)
        cls.defaults = {name: type(value) for name, value in dict.items()}
        return cls

class Image(object):
    __metaclass__ = Meta
    height = 0
    width = 0
    path = '/tmp'
    size = 0 
```

行为与以前相同

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-30T12:09:39.893

在元类中覆盖[`__setattr__`](http://docs.python.org/reference/datamodel.html#object.__setattr__)。请注意，您必须分别检查初始值（`height=0, path = '/tmp'`在您的示例中）：

```
class RestrictAttrs(type):
    def __new__(mcs, name, bases, dct):
        def _checkattr(k, v):
            if k == 'path':
                if not isinstance(v, str):
                    raise TypeError('path must be a str!')

        def _setattr(self, k, v):
            _checkattr(k, v)
            self.__dict__[k] = v

        # Check of initial values (optional)
        for k,v in dct.items():
            _checkattr(k, v)

        res = type.__new__(mcs, name, bases, dct)
        res.__setattr__ = _setattr
        return res

class Image(object):
    __metaclass__ = RestrictAttrs
    path = '/tmp'

i = Image()
i.path = 32 
```

# java - 不同的构建配置并在代码中使用它

> ID：10382998
> 
> 赞同：1
> 
> 时间：2012-04-30T11:33:25.603
> 
> 标签：java, netbeans

我想知道是否可以在 Netbeans (Java) 中定义多个构建配置，并以某种方式*了解*您在代码中所处的构建配置！

很久以前，我使用 Visual Studio 和 C++ 做到了这一点，在那里我能够在构建配置中 #define 某些东西（例如 #define DEBUG_MODE）并使用 #ifdef 检查它（例如输出一些调试信息）。但我不知道这在 Java 中是否可行，尤其是在 Netbeans 中。

# jquery - 检测单个或多个文件拖动

> ID：10382999
> 
> 赞同：1
> 
> 时间：2012-04-30T11:33:31.517
> 
> 标签：jquery, html, drag-and-drop

我建立了一个允许拖放的文件上传。我可以检测到文件何时被拖动到可拖动元素上，我的问题是：一旦我检测到文件被拖动到元素上是否有可能 - 如果它的 1 个文件或多个文件？（我只想允许单个文件上传 - 不允许用户删除多个文件）。

非常感谢您的帮助，

再会。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T11:37:35.900

如果您使用 jQuery 注册`drop`处理程序，则详细信息在`ev.originalEvent`属性中：

```
function drop(ev) {
    int n = ev.originalEvent.dataTransfer.files.length;
} 
```

但是，在文件被实际删除之前，这将不可用 -`dragenter`事件不会填充该属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T11:38:03.187

试试这个

```
 for (var i = 0; i < dragItems.length; i++) {
  addEvent(dragItems[i], 'dragstart', function (event) {
    // store the ID of the element, and collect it on the drop later on
    event.dataTransfer.setData('Text', this.id);
  }); 
```