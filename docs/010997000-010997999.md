# StackOverflow 问答 10997000-10997999

# ruby-on-rails - Rails 中的 request.remote_ip 和 request.ip 有什么区别？

> ID：10997005
> 
> 赞同：84
> 
> 时间：2012-06-12T12:49:34.743
> 
> 标签：ruby-on-rails, ruby, rack

正如标题所示，您可以通过这两种方法获取客户端的 ip。我想知道是否有任何差异。谢谢你。

在源代码中有

“/usr/local/rvm/gems/ruby-1.9.3-p194/gems/actionpack-3.2.3/lib/action_dispatch/http/request.rb”257L，8741C

```
def ip
  @ip ||= super
end

# Originating IP address, usually set by the RemoteIp middleware.
def remote_ip
  @remote_ip ||= (@env["action_dispatch.remote_ip"] || ip).to_s
end 
```

但我真的不知道其中的含义。

* * *

## 回答 #1

> 赞同：90
> 
> 时间：2012-06-12T12:56:10.163

`request.ip``ip`即使该客户端是代理，也会返回该客户端。

`request.remote_ip`更聪明并获得实际的客户`ip`。只有沿途的所有代理都设置了[X-Forwarded-For](https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/X-Forwarded-For)标头，才能做到这一点。

* * *

## 回答 #2

> 赞同：70
> 
> 时间：2017-03-25T08:37:46.653

# 请求.ip

`request.ip`是`Rack::Request`开箱即用提供的基本ip检测。它的当前定义可以在[https://github.com/rack/rack/blob/master/lib/rack/request.rb](https://github.com/rack/rack/blob/master/lib/rack/request.rb)找到。

它遵循的算法是首先检查`REMOTE_ADDR`标头中是否有任何不受信任的 IP 地址，如果找到，则选择列出的**第一个。**在这种情况下，“受信任的”IP 地址是来自[保留的私有子网范围](https://en.wikipedia.org/wiki/Private_network)的 IP 地址，但请注意，它通过正则表达式匹配，这可能不是最好的方法。如果没有不受信任`REMOTE_ADDR`，那么它会查看`HTTP_X_FORWARDED_FOR`标题，并选择列出的**最后一个不受信任的。**如果这些都没有透露任何人，它会退回到`REMOTE_ADDR`可能是 127.0.0.1 的原始版本。

# request.remote_ip

`request.remote_ip`是由`ActionDispatch::Request`（继承自`Rack::Request`）提供的增强型 IP 检测。这是问题中显示的代码。如您所见，它回退到`request.ip`除非`action_dispatch.remote_ip`在`@env`. 这是由`RemoteIp`包含在默认 Rails 堆栈中的中间件完成的。[你可以在https://github.com/rails/rails/blob/4-2-stable/actionpack/lib/action_dispatch/middleware/remote_ip.rb](https://github.com/rails/rails/blob/4-2-stable/actionpack/lib/action_dispatch/middleware/remote_ip.rb)查看它的源代码。

如果启用，`RemoteIp`中间件会提供以下附加功能：

*   提供可选但默认的 IP 欺骗检测。
*   允许过滤配置代理地址，而不是仅依赖默认值。
*   使用`IPAddr`该类来正确测试 IP 范围，而不是依赖于脆弱的正则表达式。
*   用作`HTTP_CLIENT_IP`潜在 IP 的来源。

该算法类似于`request.ip`但略有不同。它使用`HTTP_X_FORWARDED_FOR`从最后一个到第一个，然后`HTTP_CLIENT_IP`从最后一个到第一个，最后是最后一个条目`REMOTE_ADDR`。它将所有这些都放在一个列表中并过滤代理，选择剩下的第一个。

### IP 欺骗检测

提供的 IP 欺骗检测`RemoteIp`并不是特别强大，它所做的只是在最后一个`HTTP_CLIENT_IP`不在`HTTP_X_FORWARDED_FOR`. 这不一定是攻击的症状，但它可能是错误配置或使用不同约定的代理混合的症状，这些约定不会产生一致的结果。

# 使用哪个

在一个简单的设置中，您的代理都在本地或私有子网上，您可能可以侥幸逃脱`request.ip`，但`request.remote_ip`通常应该被认为是更好的选择。如果您使用具有公共互联网路由的代理（例如许多 CDN），则`RemoteIp`可以配置为开箱即用地为您提供正确的客户端 IP，而`request.ip`只有在您可以正确设置上游代理时才会`REMOTE_ADDR`正确。

# 安全配置

现在来解决蒂姆库尔特关于欺骗的评论。他绝对是对​​的，你应该担心，但他错了，如果你默认使用 nginx 或 haproxy，你可能会被欺骗。 `RemoteIp`旨在通过选择链中的**最后一个IP 来防止欺骗。**[X-Forwarded-For](https://en.wikipedia.org/wiki/X-Forwarded-For)规范指定每个代理将请求者的 IP 附加到链的末尾。通过过滤掉列入白名单的代理，可以保证最后一个条目是您的第一个列入白名单的代理写入的客户端 IP。当然有一个警告，那就是您实际上必须运行始终设置/附加的代理`X-Forwarded-For`，因此 Tim 的建议实际上应该相反：仅**在**运行代理`request.remote_ip`时使用。

 **# 如何配置公共 IP 代理

这一切都很好，但`ActionDispatch::RemoteIp`已经在默认的中间件堆栈中。如何重新配置​​它以添加我的代理 CIDR？！

将此添加到您的`application.rb`：

```
check_spoofing = true
proxies = ["23.235.32.0/20", "203.57.145.0/24"]
proxies += ActionDispatch::RemoteIp::TRUSTED_PROXIES
config.middleware.swap ActionDispatch::RemoteIp,
                       ActionDispatch::RemoteIp,
                       true,
                       proxies 
```

* * *

## 回答 #3

> 赞同：45
> 
> 时间：2012-06-12T13:06:10.513

从来源：

```
module ActionDispatch
  class Request < Rack::Request

    # ...

    def ip
      @ip ||= super
    end

    def remote_ip
      @remote_ip ||= (@env["action_dispatch.remote_ip"] || ip).to_s
    end

    # ...

  end
end 
```

其中 Rack::Request 看起来像这样

```
module Rack
  class Request
     def ip
      remote_addrs = split_ip_addresses(@env['REMOTE_ADDR'])
      remote_addrs = reject_trusted_ip_addresses(remote_addrs)

      return remote_addrs.first if remote_addrs.any?

      forwarded_ips = split_ip_addresses(@env['HTTP_X_FORWARDED_FOR'])

      if client_ip = @env['HTTP_CLIENT_IP']
        # If forwarded_ips doesn't include the client_ip, it might be an
        # ip spoofing attempt, so we ignore HTTP_CLIENT_IP
        return client_ip if forwarded_ips.include?(client_ip)
      end

      return reject_trusted_ip_addresses(forwarded_ips).last || @env["REMOTE_ADDR"]
    end
  end
end 
```

所以`remote_ip`优先考虑`action_dispatch.remote_ip`。这是由`ActionDispatch::RemoteIp`中间件设置的。您可以在该中间件的源代码中看到它在被调用时正在检查欺骗攻击，因为它正在调用`GetIp.new`以设置该 env 变量。`remote_ip`正如 Clowerweb 解释的那样，这是必要的，因为即使通过本地代理也可以读取 IP 地址。**

# twitter - Twitter API 转推按钮实现（操纵原始推文）

> ID：10997006
> 
> 赞同：0
> 
> 时间：2012-06-12T12:49:38.190
> 
> 标签：twitter, twitter-oauth

我目前正在一个网站上工作，该网站显示来自 twitter API 的用户推文。

我想在我的网站上实现一个“转推”按钮，它转推原始推文并添加一个“通过@myTwitterAccount”。

我怎样才能做到这一点？我搜索了推特意图，但使用这种方法我无法在推文中添加字符串。

到目前为止，为了方便起见，已经使用 PHP/MySQL 和一些 jQuery 完成了编码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T22:52:19.337

我最终使用了@anywhere，如果您不想与 oauth 发生冲突，这是完美的选择。

[https://dev.twitter.com/docs/anywhere/welcome](https://dev.twitter.com/docs/anywhere/welcome)

# android - 如何使用首选项活动访问布局中设置的小部件

> ID：10997007
> 
> 赞同：2
> 
> 时间：2012-06-12T12:49:38.613
> 
> 标签：android, preferenceactivity

我正在创建首选项活动，因为我正在使用布局添加自定义首选项屏幕，并且我想动态更新值。

这是代码：

```
 <PreferenceCategory
    android:key="more_category"
    android:title="More Wallpapers " >
    <Preference
        android:key="more_apps"
        android:layout="@layout/more_apps" /> 
```

这是我的布局 more_apps.xml

```
 <?xml version="1.0" encoding="utf-8"?>

   <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:padding="5dp"
android:layout_height="match_parent"
 >

<TextView
    android:id="@+id/title_text"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_marginLeft="10dp"
    android:layout_marginTop="10dp"
    android:layout_toRightOf="@+id/image_one"
    android:text="Large Text"
    android:textAppearance="?android:attr/textAppearanceLarge" />

<TextView
    android:id="@+id/description_text"
    android:layout_width="wrap_content"
    android:layout_marginLeft="10dp"
    android:layout_marginTop="10dp"
    android:layout_height="wrap_content"
    android:layout_below="@+id/title_text"
    android:layout_toRightOf="@+id/image_one"
    android:text="Medium Text"
    android:textAppearance="?android:attr/textAppearanceMedium" />

<ImageView
    android:id="@+id/image_one"
    android:layout_width="75dp"
    android:layout_height="75dp"
    android:src="@drawable/launcher" /> 
```

我想在运行时更新我的​​文本视图和图像，如何在偏好活动中访问？

请帮忙

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-10T15:46:39.290

您需要在 xml 布局中使用您提到的偏好类，如下面的代码

```
<PreferenceCategory
   android:key="more_category"
   android:title="More Wallpapers " >

   <com.myapp.myclass  android:key="more_apps"/>

</PreferenceCategory> 
```

`com.myapp`是一个包名，`myclass`是所有编码都来自的 java 文件。

这是java代码和膨胀的xml`more_apps.xml`

```
 public class myclass extends Preference {

    public myclass(Context context) {
    super(context);
    // TODO Auto-generated constructor stub
    }

@Override
protected View onCreateView(ViewGroup parent) {
    // TODO Auto-generated method stub

    LayoutInflater inflater = (LayoutInflater) getContext()
            .getSystemService(Context.LAYOUT_INFLATER_SERVICE);

    View view = inflater.inflate(R.layout.more_apps, null);

    return view;
  }

 } 
```

这样你就可以创建你的自定义偏好活动并做任何事情..

# android - Android：当服务启动一个活动时，活动是否在不同的进程中启动？

> ID：10997008
> 
> 赞同：1
> 
> 时间：2012-06-12T12:49:44.617
> 
> 标签：android, service

问题的标题几乎解释了这个问题。当我使用 startActivity 从服务启动 Activity 时，这个新 Activity 是否在与服务不同的进程中启动？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T12:59:38.093

> 当我使用 startActivity 从服务启动 Activity 时，这个新 Activity 是否在与服务不同的进程中启动？

否。默认情况下，您的所有组件都共享一个进程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T13:27:46.233

好吧，我的猜测是，如果你从你的应用程序启动一个 Activity，那么它们就在同一个进程中，但通常系统可以为你启动一个不同进程的 Activity。您可以使用
android.os.Process.myPid() 检查您的进程 ID，并将其与 Eclipse 的“设备”窗口中显示的进程 ID 列表（DDMS 透视图）进行比较。

# linq - Linq 加入和组

> ID：10997013
> 
> 赞同：0
> 
> 时间：2012-06-12T12:50:23.307
> 
> 标签：linq, join, linq-group

继我之前的问题之后：[linq 中的简单内部连接](https://stackoverflow.com/questions/10994210/simple-inner-join-in-linq)

我将如何编写一些 linq 来做与下面完全相同的事情..

```
SELECT A.name, B.name
FROM A
INNER JOIN B ON A.id = B.AID 
INNER JOIN C ON B.id = C.BID
GROUP BY A.Name, B.Name
ORDER BY A.Name 
```

我已经尝试过了，但它会生成嵌套选择，因此会产生不同数量的行。

```
var r = from a in db.A
join b in db.B on a.Id equals b.AId
join c in db.C on b.Id equals c.BId
group c by c.B into g1
group b by g1.Key.A into g2
select g2.Key; 
```

我需要一组`A`'s，`B`其中包含 's 列表，其中包含`C`'s列表

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T13:24:06.147

呸，我的评论失去了格式

您可以在 linq 语句中使用 let 绑定来保存值。

```
from a in db.a
let g1 = a.GroupBy(x => x.Id)
from item in g1
let g2 = item.GroupdBy(x => x.Id)
from item2 in g2
select new {A = a, B = item, C = item2} 
```

或类似的东西，希望它能给你足够的解决方法

# sql - 在特定时间检索具有 TOP 10 最大 sessionId 的用户的 Name 、 Host 和 SessionId

> ID：10997019
> 
> 赞同：0
> 
> 时间：2012-06-12T12:50:40.220
> 
> 标签：sql, sql-server

![在此处输入图像描述](../Images/1c9e5093574db87b46ca17b8fa1e550b.png)

> 这是源表。我想在特定时间检索具有 TOP 10 最大 sessionIds 的用户的 Name 、 Host 和 SessionId
> 
> 例子
> 
> 主机名 SessionId NoOfSessionsOpen ( 10.42.64.79 , thidrat.xyz , tkj7j , 4 )

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T13:29:01.400

```
select top 10 Name, Host, SessionID, count(*)
from Table
where TimeLog between @a and @b
group by Name, Host, SessionID
order by count(*) desc, Name, Host, SessionID --define a total sort order for determinism 
```

# java - 单次调用更新java中不同类型的对象

> ID：10997020
> 
> 赞同：0
> 
> 时间：2012-06-12T12:50:42.637
> 
> 标签：java, reflection, annotations

我有一个用户和学校课程，

```
public class User {
 private Long id;

 @Property("complete_name")
 private String name;

 private List<School> schools;
 ....
 } 
```

* * *

```
public class School {

 private Long id;

 private Sting name;

 private String otherInfo;
} 
```

我想使用单个调用更新用户、学校和任何其他对象。因为我确实想让我的客户动态地处理东西。

我想了一个办法，我声明两个调用 1 将获取所有字段及其类型，其他将能够更新数据，

更新看起来像调用 1：

```
/update?method=editProfile 
```

身体

```
{data:[{id:1},{name:"XYZ"}]} 
```

呼叫 2：

```
/update?method=editBrand 
```

身体

```
{data:[{id:1},{otherInfo:"Some Info"}]} 
```

我使用带有方法名称和参数的更新调用该方法，并使用反射加载该方法并且还能够加载字段，

需要帮助
1) 如何根据带注释的字段值更新字段，例如完整名称/名称
2) 如何验证 JSON 正文中的数据
3) 复杂对象的最佳方式/json 是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T14:13:34.390

我认为您在这里有不止一个问题，总体而言，这有点难以回答，但是：

*   对于 JSON <--> Java 对象，请查看[Jackson](http://wiki.fasterxml.com/JacksonHome)
*   对于 REST 接口，您的应用服务器将为您提供一种响应 HTTP 请求的方法。使用 GET 方法向客户端返回数据，使用 PUT 或 POST 方法从客户端发送数据。

最简单的可能是让客户端每次发送一个完整的 json 化的用户结构，然后您可以使用它来构建一个 Java 对象（使用 Jackson），然后在更新服务器端的版本之前对其进行验证。请记住始终在服务器上进行验证，不要依赖客户端中的 Javascript！如果这效率太低，您可以考虑进行增量更新。

希望这可以让你开始。

# php - 计算对象的总和

> ID：10997021
> 
> 赞同：2
> 
> 时间：2012-06-12T12:50:42.887
> 
> 标签：php, object

我需要做这件事：我有一个像下面这样的对象，但我需要做对象1_（anything），object2_（anything）等对象数量的总和

```
stdClass Object
(
    [object1_2012_06_12] => 16
    [object2_2012_06_12] => 10
    [object1_2012_06_11] => 16
    [object2_2012_06_11] => 10
) 
```

例如：**object1_( *anything* )**的总和将是 (object1_2012_06_12 + object1_2012_06_11) = (16+16)=32

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-12T12:52:33.480

您可以将对象转换为数组：

```
$sum = 0;
foreach ((array)$myobj as $v) {
  $sum += intval($v);
} 
```

或者按照@MarkBaker 的建议：

```
$sum = array_sum((array)$myobj); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T13:12:21.927

此代码将获得您想要的值：

```
function sum_by_object_name ($data, $objName) {

  // Temporary array to hold values for a object name
  $objValues = array();

  // Convert input object to array and iterate over it
  foreach ((array) $data as $key => $val) {

    // Extract the object name portion of the key
    $keyName = implode('_', array_slice(explode('_', $key), 0, -3));

    // If object name is correct push this value onto the temp array
    if ($keyName == $objName) {
      $objValues[] = $val;
    }

  }

  // Return the sum of the temp array
  return array_sum($objValues);

}

// Calculate the total of $object
$total = sum_by_object_name($object, 'object1'); 
```

[看到它工作](http://codepad.org/n5ph1bCN)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T13:05:27.907

只需在第一个下划线使用之前检查对象属性并根据部分求和`strtok`：

```
$sums = array();
foreach ($my_object as $key => $value) {
    $key = strtok($key, '_');

    if (!isset($sums[$key])) {
            $sums[$key] = $value;
    } else {
            $sums[$key] += $value;
    }
}

print_r($sums); 
```

或者：

```
function sum_of_object_starting_with($my_object, $starts_with)
{
    $sum = 0; $prefix_len = strlen($starts_with);
    foreach ($my_object as $key => $value) {
        if (strncmp($key, $starts_with, $prefix_len)) {
            $sum += $value;
        }
    }
    return $sum;
}

print_r(sum_of_object_starting_with($my_object, 'object1_')); 
```

# emacs - 如何镜像 Emacs 包存储库服务器？

> ID：10997023
> 
> 赞同：4
> 
> 时间：2012-06-12T12:50:48.403
> 
> 标签：emacs, elisp

有没有办法从像[marmalade-repo](http://marmalade-repo.org/)这样的存储库中下载所有 Emacs 包以在本地网络中创建存储库服务器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T15:35:33.390

看看[stephanh/elpa-mirror 项目](https://github.com/stephanh/elpa-mirror)(github.com)。它是用 scala 编写的，通过快速扫描代码，它可以正确地进行镜像。

本质上，您需要做的是`archive-contents`从存储库下载文件，解析每个包描述符以找出相应包文件的名称，然后下载它。

存储库的镜像没什么特别的：只需将所有内容（`archive-contents`文件和所有下载的包）放在发布的 URL 中，就完成了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-28T07:59:23.667

发现非常有趣的[https://github.com/redguardtoo/elpa-mirror](https://github.com/redguardtoo/elpa-mirror)包。

“它将创建托管 ELPA 镜像站点所需的一切（Web 文件、包、存档内容）。仅包含本地安装的包。”

您甚至可以使用本地文件路径：

```
# Now elpa/marmalade/melpa site will be overrided
(setq package-archives '(("myelpa" . "~/myelpa"))) 
```

# javascript - 长度属性未被捕获

> ID：10997028
> 
> 赞同：2
> 
> 时间：2012-06-12T12:51:04.480
> 
> 标签：javascript

我知道我必须在这里做一些愚蠢的事情。只需要第二双眼睛。

验证我的单选框是否已被选中：

```
<input type="radio" name="cont_amt" id="cont_amt" value="1000">

  //alert(theForm.cont_amt.value);
  var con_optLength = theForm.cont_amt.length;
  var chkd="";

  for(var i = 0; i < con_optLength; i++) {
        if(theForm.cont_amt[i].checked) {
            chkd=theForm.cont_amt[i].value;
        }
  }

if ( chkd == "" ) {
      reason += "\t" + "Must select a contribution option" + "\n";
  } 
```

我总是保持警惕，因为我`length`的总是不确定的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T13:02:24.330

那是因为您只有一个名为“cont_amt”的单选按钮。至少再添加一个以使属性“length”可用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T12:55:41.213

这是因为它`theForm.cont_amt`是一个对象而不是一个数组。

[您可以在这里](http://jsfiddle.net/YavfP/)看到它的实际效果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T12:56:13.023

您应该使用[`document.getElementsByName`](https://developer.mozilla.org/en/DOM/document.getElementsByName).

```
 var con = document.getElementsByName('cont_amt');
  var chkd = null;

  for(var i = 0; i < con.length; i++) {
        if(con[i].checked) {
            chkd = con[i].value;
        }
  } 
```

这是一个[不错的 jsFiddle 演示](http://jsfiddle.net/y8SJy/)，可以看出我没有说谎。

**注意：**我怀疑你这样做是因为你有几个这样的单选按钮。如果是这种情况，您应该删除 ID 属性，因为它在文档中必须是唯一的。

# wordpress - 我想在wordpress（循环）中的“阅读更多链接”中添加清晰的浮动

> ID：10997029
> 
> 赞同：0
> 
> 时间：2012-06-12T12:51:05.880
> 
> 标签：wordpress

我想在 Wordpress（循环）中的“阅读更多链接”（它在我的网站上显示“Läs mer”，瑞典语）添加清晰的浮动。

这是我的循环，

```
<?php query_posts($query_string . '&cat=-3'); ?>
        <ul id="customStart" class="group">
             <?php query_posts('showposts=55&cat=5,');
                        if (have_posts()) : ?>
                    <?php while (have_posts()) : the_post(); ?>
                        <li>
                       <div class="blogPostInfo"><?php the_time('l, F jS, Y') ?><div class="fltLeft"> | <?php the_category(', ') ?></div></div>
                      <div id="startBg">
                       <?php the_post_thumbnail('start-pic'); ?>
                        </div>
                            <h2><?php the_title(); ?></h2>
                         <?php the_content( __( '<span class="meta-nav"> Läs mer</span>', 'twentyten' ) ); ?>
                        </li>
                        <?php endwhile; ?>
                     </ul>
                     <?php endif; wp_reset_query();?> 
```

[http://www.missbee.se/eliteRehab2/](http://www.missbee.se/eliteRehab2/)

* * *

查看网站的下部以找到我要清除的按钮；O)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T12:53:07.813

为什么不编辑 CSS 文件并添加

`clear:both`或`clear:left`或`clear:right`财产

上课`.meta-nav`？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T12:54:48.237

添加

```
.meta-nav
{clear:left | both | right;
} 
```

到您`style.css`的主题 css 表中。

# c - 仅在没有 valgrind 的情况下进行段错误

> ID：10997031
> 
> 赞同：6
> 
> 时间：2012-06-12T12:51:10.157
> 
> 标签：c, segmentation-fault, valgrind

我通过 valgrind 得到了最后的“完成”消息，并得到了这个退出报告：

```
==3434== HEAP SUMMARY:
==3434==     in use at exit: 8,432 bytes in 4 blocks
==3434==   total heap usage: 4,369 allocs, 8,037 frees, 377,356 bytes allocated
==3434== 
==3434== LEAK SUMMARY:
==3434==    definitely lost: 152 bytes in 1 blocks
==3434==    indirectly lost: 0 bytes in 0 blocks
==3434==      possibly lost: 0 bytes in 0 blocks
==3434==    still reachable: 8,192 bytes in 2 blocks
==3434==         suppressed: 88 bytes in 1 blocks
==3434== Rerun with --leak-check=full to see details of leaked memory
==3434== 
==3434== For counts of detected and suppressed errors, rerun with: -v
==3434== ERROR SUMMARY: 100190 errors from 140 contexts (suppressed: 0 from 0) 
```

但是当我在没有 valgrind 的情况下运行它时，它会立即出现段错误。valgrind 是否抑制了我应该寻找的某种错误？我在网上找不到有关此的任何信息

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-12T13:10:00.757

Valgrind 在与从 shell 运行程序不同的环境中运行程序。当与内存耗尽或数组出站相关时，这可以防止一些崩溃。

纠正你的 140 个错误上下文，你会没事的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-12T12:53:46.770

Memcheck 不执行完整的边界检查，并且因为它有自己的内存分配器，它可能会抑制您可能会遇到的错误。请改用调试器。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-01-28T09:49:40.037

Valgrind 有时无法捕获的错误的一个示例是当您释放内存然后通过另一个也指向同一位置的指针引用它时。

我不确定为什么会这样。也许 Valgrind 环境以不同的方式处理内存分配和释放。[正如埃瑞格里斯所说]

检查这一点的一种快速方法是暂时注释您的 free() 函数调用，看看它是否仍然存在段错误。[稍后取消注释，一旦你修复它们！]

# android - 如何在不进入 GPS 设置页面的情况下启用和禁用 GPS（单击按钮）

> ID：10997038
> 
> 赞同：2
> 
> 时间：2012-06-12T12:51:27.910
> 
> 标签：android, button, gps

通过单击按钮，我们如何以编程方式启用和禁用 GPS。

当我们第一次单击按钮时，我们应该启用 GPS，第二次单击同一个按钮时，我们应该禁用 GPS

我搜索了相关线程，但没有找到任何解决方案

请分享一些相关的链接/代码

任何帮助总是很感激，谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T12:58:50.807

> 通过单击按钮，我们如何以编程方式启用和禁用 GPS。

幸运的是，出于隐私原因，您不能再这样做了。

# ruby - Ruby：处理多次退货的最佳方式

> ID：10997041
> 
> 赞同：1
> 
> 时间：2012-06-12T12:51:44.570
> 
> 标签：ruby

我在 Ruby 中工作，发现需要在我的一些/大部分方法的末尾有条件返回语句。

这是我所拥有的：

```
 # <ident-list> -> [ident] <ident-A>
  def ident_list(keys)
    id = nil
    ident_a_node = nil

    ## method hidden

    return IdentifierListNode.new(id, ident_a_node) unless id.nil?
    return nil
  end 
```

有没有更好/更清洁的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-12T12:59:54.883

之前的最后一行`end`可以简单

```
IdentifierListNode.new(id, ident_a_node) unless id.nil? 
```

最后执行的语句是方法的返回值。如果`id`为 nil，则该语句将评估为 nil，如果不是，则将返回新的 IdentifierListNode 实例。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-12T13:02:46.353

使用双与号（AND 运算符）时，右手将返回，因此您可以缩短 Adrian 对此的回答：

```
return (id && IdentifierListNode.new(id, ident_a_node)) 
```

由于条件的第一部分检查是否存在 id，因此将返回 nil。如果这是最后一条语句，您可以完全删除“return”，因为它在 Ruby 中是隐含的，只留下：

```
id && IdentifierListNode.new(id, ident_a_node) 
```

经以下测试：

```
def check(input)
  input && input * 2
end

check(nil) # => nil
check(123) # => 246 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-12T15:44:05.383

虽然您可以将返回单线，但这是我认为更明确和可略读的情况之一是值得的。这当然值得商榷，但在与 ruby​​ists 合作过很多不同的团队之后，我认为如果你使用单行版本，那么你（或团队的其他成员）很有可能在查看时误解了潜在的退出状态后面的代码。

我建议：

```
def ident_list(keys)
  id = nil
  ident_a_node = nil

  ## method hidden

  return IdentifierListNode.new(id, ident_a_node) unless id.nil?
  nil
end 
```

或者，如果您不关心这种情况下 false/nil 之间的区别，那就更好了：

```
def ident_list(keys)
  id = nil
  ident_a_node = nil

  ## method hidden

  return IdentifierListNode.new(id, ident_a_node) if id
  nil
end 
```

几乎每个在 ruby​​ 中工作过一段时间的人都明白，方法中的最终值是隐式返回的（即，如果事先没有返回，这将返回 nil） - 你可以一目了然。我的经验是，许多长期使用 ruby​​ 的人仍然会被 && 的变化和不太明确的条件返回所困扰。

如果您决心使用单线，我会选择 Ryan 的回答，主要是因为它是一个相当常用且不太可能混淆的成语：

```
def ident_list(keys)
  id = nil
  ident_a_node = nil

  ## method hidden

  id && IdentifierListNode.new(id, ident_a_node)
end 
```

这种方法的一个警告是，您实际上最终得到了三种可能的返回状态而不是两种（其他选项只会返回 nil 或您的 new `IdentifierListNode`）：

*   当 id 为 nil 时，返回值为 nil
*   当 id 为 false 时，返回值为 false
*   当 id 是其他任何东西时，返回值将是您的`IdentifierListNode`对象

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-12T12:55:36.673

```
return (id.nil? ? nil : IdentifierListNode.new(id, ident_a_node)) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-12T13:00:17.973

就目前而言，您将在所有地方进行零检查。

我知道这可能无法直接回答您的问题，但您应该尝试采用其他编码模式。值得阅读：

[如何避免 Java 中的“！= null”语句？](https://stackoverflow.com/questions/271526/how-to-avoid-null-statements-in-java/271874#271874)

# ios - 具有动画效果的 UIView 上的上一个和下一个实现

> ID：10997042
> 
> 赞同：0
> 
> 时间：2012-06-12T12:51:46.943
> 
> 标签：ios, ipad, ios5.1

我正在开发一个 iPad 应用程序，`TableView`根据服务器返回的数据（Json 解析）显示列表。我想实现一个`DetailView`，它将显示被点击行的详细信息。为此，我`UIView`在同一个列表类中使用 a 。它使可见的 alpha 1.0 和隐藏的 alpha 0.0。这`UIView`是使用自定义类 nib（uiview 类型）加载的。

我想添加下一个/上一个功能来查看其他`TableView`列出的记录。

谁能建议这样做的最佳方法？现在我正在尝试使用滚动视图，但它不会创建很多页面（使用内容大小），我应该像滚动一样制作动画，但同一页面需要更新上一条或下一条记录。我拥有的所有数据记录都在数组中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T06:50:28.423

我实施解决方案。我只是将两个 SwipeGesture 添加到 detaileview（对于 LeftSwipe 和 rightSwipe）。最初，这个详细视图是隐藏的，但是当单元格被录制时，它会与来自 Arraydata 的数据一起出现在索引表行索引处。我管理的 RowIndex 值最初是从被记录的表行中获取的。当用户向左滑动或向右滑动时，RowIndex 会增加或减少 1，并相应地更新视图上显示的 aaray 中的数据。

谢谢

# sql - Postgres表：在两列中查找重复项，无论顺序如何

> ID：10997043
> 
> 赞同：3
> 
> 时间：2012-06-12T12:51:47.287
> 
> 标签：sql, postgresql, duplicates, aggregate-functions

我有一个 PostgreSQL 表，描述了两点之间的线。它包含两列，A 和 B，表示一个点的 id 的整数（在另一个表中描述）。

但是表格中的每一行都是重复的，因为从 A 到 B 的线与从 B 到 A 的线相同。

我想删除重复项，但我找不到在两列上工作的聚合函数，重新组合 AB 和 BA 行然后删除一个。

谢谢 ：）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-12T12:55:44.007

识别重复项：

```
select least(a,b), greatest(a,b), count(*)
from the_table
group by least(a,b), greatest(a,b)
having count(*) > 1 
```

我认为您应该能够使用以下方法删除其中一对：

```
delete from the_table
where (least(a,b), greatest(a,b)) in (
                select least(a,b), greatest(a,b)
                from the_table
                group by least(a,b), greatest(a,b)
                having count(*) > 1); 
```

（未经测试！）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T13:00:41.853

我留下了评论，但我现在假设两个*重复*记录之间的唯一区别是它们具有相同的 point_id 值，但顺序相反。

在这种情况下，它实际上很简单......

```
DELETE
  line
WHERE
  point_id_a > point_id_b
  AND EXISTS (SELECT *
                FROM line AS lookup
               WHERE lookup.point_id_a = line.point_id_b
                 AND lookup.point_id_b = line.point_id_a
             ) 
```

# jquery - 改进 jdashboard jquery 插件功能

> ID：10997045
> 
> 赞同：0
> 
> 时间：2012-06-12T12:51:52.963
> 
> 标签：jquery, jquery-plugins

我需要向[jdashboard 插件](http://veselov.sumy.ua/engine/go.php?url=aHR0cDovL3Zlc2Vsb3Yuc3VteS51YS91cGxvYWRzL2ZpbGVzL2RlbW8vMDMzL2pkYXNoYm9hcmQucmFy)添加一些功能，作为向区域（列）添加小部件。

在每列的底部显示一个带有一些文本的链接会很好：添加一个小部件。单击它将打开一个 ui.dialog，其中列出了名为 widgets 的文件夹中的小部件，它们可以存储在带有简单标记的 .html 文件中，例如：

```
 <div class="jdash-item">
    <h1 class="jdash-head">Widget title</h1>
    <div class="jdash-body">
     Some widget text
    </div>
  </div> 
```

我为此设置了一个[jsfiddle](http://jsfiddle.net/TXdFH/1/)。怎么可能实现这个功能？

提前非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T20:36:01.763

我已经使用这个插件大约一个月了。尝试通过 AJAX 动态添加新小部件时，我也遇到了问题。我可以让小部件显示，但不能拖放/保存。

但是要回答您问题的一部分：

您需要将链接添加到列底部：

```
 $(".jdash-column").append("<a href='#'>Add a Widget</a>"); 
```

另外，请查看[jsfiddle](http://jsfiddle.net/TXdFH/2/)

如果您在添加功能正常的小部件方面取得任何进展，请告诉我..

# linux - 找不到这个简单脚本的第二个和第三个 ZIP

> ID：10997051
> 
> 赞同：0
> 
> 时间：2012-06-12T12:52:19.220
> 
> 标签：linux, cron, zip

我无法理解为什么找不到下面脚本的第二个和第三个 ZIP。

该脚本已在具有相同文件结构的预生产环境中使用 crontab 进行了测试。我已经安排了昨晚晚上 9 点在生产环境中运行，但是我找不到第二个和第三个 ZIP。

如果查看生成的日志文件，我可以清楚地看到文件已被压缩，并且每个 ZIP 之间的经过时间是压缩这些文件夹内容的大致预期时间（总共 18-20 分钟）。

请注意，/sites/Share_Drive/ 是安装在多台机器上的共享驱动器，据我所知，可能无法物理安装在同一个盒子中，但最重要的是，它的配置方式与我们的预生产环境相同。

任何想法？

```
#!/bin/bash
LOG="/home/userX/script/run.log"

echo "Script Started - "`date` > $LOG

#Access the drive to make sure it is mounted. (If not it is mounted automatically when accessed)
echo "Opening Share Drive - "`date` >> $LOG
echo "--------------------------------------------" >> $LOG
cd /sites/Share_Drive/
ls -lrt  >> $LOG
cd /home/userX/script/
echo "--------------------------------------------" >> $LOG

echo "" >> $LOG

echo "Archiving /apps/AppNameWeb/ - "`date` >> $LOG
echo "--------------------------------------------" >> $LOG
zip -vr /sites/Share_Drive/snapshot/AppNameWeb.zip /apps/AppNameWeb/ >> $LOG
echo "--------------------------------------------" >> $LOG

echo "" >> $LOG

echo "Archiving /sites/Share_Drive/Content/ - "`date` >> $LOG
echo "--------------------------------------------" >> $LOG
zip -vr /sites/Share_Drive/snapshot/Content.zip /sites/Share_Drive/Content/ >> $LOG
echo "--------------------------------------------" >> $LOG

echo "" >> $LOG

echo "Archiving /sites/Share_Drive/AssettStore/ - "`date` >> $LOG
echo "--------------------------------------------" >> $LOG
zip -vr /sites/Share_Drive/snapshot/AssettStore.zip /sites/Share_Drive/AssettStore/ >> $LOG
echo "--------------------------------------------" >> $LOG

echo "Script Ended - "`date` >> $LOG 
```

# php - 使用 LDAP/PHP 通过 Linux 访问 Windows Server 文件

> ID：10997052
> 
> 赞同：1
> 
> 时间：2012-06-12T12:52:19.657
> 
> 标签：php, windows, linux, active-directory, ldap

我们正在运行一个带有 Windows Server 2008 的 Active Directory。
我们还有一个带有 Apache2 和 LDAP 的 Linux Ubuntu Server 12.04。

是否可以通过 PHP/Javascript 以当前登录网站的用户的权限访问 Windows Server 文件系统？

背景：我们在 Ubuntu 服务器上运行 Joomla 和 Mediawiki。一位用户写了一篇文章，并希望在 Windows Server 上添加一些指向文件和文件夹 (!) 的链接。恕我直言，除了提示链接之外，最好的方法是选择带有 PHP/Javascript 目录列表的文件/文件夹。但是用户应该只看到他有权访问的目录。
由于我需要文件/文件夹的完整路径，因此无法选择 HTML-“输入”字段。

有任何想法吗？谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T13:07:45.973

除非您可以使用 PHP 对 Active Directory 服务器进行身份验证（**这可能意味着使用明文形式的用户密码**），否则您将需要使用 PHP 来列出文件。

PHP有一个`scandir()`功能。由于 PHP 需要被授予对 Active Directory 服务器的完全**读取**权限，如果您使用 PHP 来确定用户可以看到哪些文件，那么您可以简单地显示他们需要的文件。

您可以使用此函数获取文件结构：

```
function listdir($folder) {
    if (!is_dir($folder)) {
        return array(); //empty if not a folder
    }
    $return = scandir($folder);
    $subfolders = array();
    array_shift($return); //first two values are always .. & .
    array_shift($return);
    foreach ($return as $key => $value) {
        if (is_dir($value)) {
            unset($return[$key]);
            $subfolders[$value] = listdir($value); //recursively analyse the subdirectory
        }
    }
    return array_merge(array_values($return), $subfolders);
} 
```

请注意，我没有对此进行测试，所以如果有问题，请告诉我。

[scandir() 函数参考](http://php.net/manual/en/function.scandir.php)

# java - 在 JodaDate 中单独更改偏移量而不更改日期和时间信息

> ID：10997056
> 
> 赞同：0
> 
> 时间：2012-06-12T12:52:31.263
> 
> 标签：java, datetime, date, jodatime, datetimeoffset

我得到一个像“2012-07-01T06:00 +02:00”这样的字符串作为输入。它在 CET 中。但是这个字符串应该是“2012-07-01T06:00 +01:00”。

我们无法更改原始来源的任何内容。

现在我想将该日期作为我的系统预期的“2012-07-01T06:00 +01:00”。

我正在使用乔达图书馆。我阅读了将 DateTimeZone 指定为德国的日期。

在此日期，一旦我将 Europe/London 指定为 DateTimeZone，日期将变为“2012-07-01T05:00 +01:00”（这不是我的系统的预期值，请参阅小时变化）。

有没有办法不使用字符串操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T13:10:30.367

因此，您已经损坏了输入，解析它的唯一方法是使用字符串操作函数修复它，然后使用具有指定时间偏移的日期解析器。

如果您知道字符串在 +01:00 偏移量中包含时间，则应`substring()`使用 DateTimeFormat 从字符串中删除偏移量，并使用明确指定`withZone(DateTimeZone.forOffsetHours(1))`的完全忽略输入的偏移量。

但只有当您 100% 确定问题出在输入字符串中时。

# python - 在文本中查找某个代码块

> ID：10997059
> 
> 赞同：0
> 
> 时间：2012-06-12T12:52:38.207
> 
> 标签：python, tkinter, readline

到目前为止，我有以下代码：

```
import sys
from Tkinter import *
import tkFileDialog
from tkFileDialog import askopenfile # Open dialog box

fen1 = Tk()                              # Create window
fen1.title("Optimisation")               # Window title

menu1 = Menu(fen1)

def open():
    filename = askopenfile(filetypes=[("Text files","*.txt")], mode='r')

filename.seek(0)
    numligne = 0
    line     = []
    ok       = 0
    k        = -1

    while (ok == 0)  &  (k == -1):
    line = filename.readline()
    k    = line.find( "*load" )
    if k == 0 :
        l = filename.readlines()

fen1.mainloop() 
```

我正在搜索的文本文件格式类似于以下：

```
*test
1 2 3 4

*load
2 7 200
3 7 150

*stiffness
2 9 8 7

etc.. 
```

到目前为止，我已经设法找到以“*load”开头的行，但我希望将“*load”和“*stiffness”之间的值分配给变量，例如 a、b、c。我的问题是，在这个加载部分，可能有几行，我需要每次检测每一行，拆分行中的值并给它们命名。如果有人可以帮助解释一个循环或类似的东西来解决这个问题，我将非常感激！谢谢！

更新：我有一个问题，我现在想在同一个文本文件中找到几个单独的部分。我如何创建一个循环来进一步查找“*geo”和“*house”之间的行，以及“*name”和“*surname”之间的行？我试图创建一个完全独立的定义，但想尽量减少我使用的代码行......谢谢！代码我一直在使用类似的结构（正如我原来的问题所提供的，感谢 mgilson！），因此想编辑这些类型的代码。

```
def parse_file(ff):     
    out=[]     
    append=False     
    for line in ff:         
        if(append and line.strip()):
            out.append(line)          
            if(line.startswith('*load')): 
                append=True
            elif(line.startswith('*stiffness')):  
                return [map(int,x.split()) for x in out[:-1] ] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T13:04:52.690

让我们假设您的代码“块”由标题（例如`*header`）分隔。将数据存储在每个块中的最直观的方法是在列表列表中。例如`[ row1, row2, ...]`（在哪里`row1=[elem1,elem2,elem3,...]`）。然后你可以将块存储在字典中，这样你就可以通过`block=dictionary['headername']`.

这将执行您想要的操作（*此版本未经测试*）。

```
import sys

def convert_type(ss):
    try:
        return int(ss)
    except ValueError:
        try:
            return float(ss)
        except ValueError:
            return ss

def parse_file(ff):
    out={}
    block=None
    for i,line in enumerate(ff):
        #Allow for comments to start with '#'.  We break off anything after a '#'
        #and ignore it.  After that, we 
        data=line.split('#',1)
        line=data[0]  #comments (if in line) are in data[1] ... ignore those.
        line=line.strip() #remove whitespace from front and back of line.
        if(line.startswith('*')):
            #python supports multiple assignment.  
            #e.g. out['header'] is the same object as block.  
            #     changing block also changes out['header']
            block=out[line.strip()[1:]]=[]
        elif (block is not None) and line: #checks to make sure there is an active block and the line wasn't empty.
            #If the file could also have floats, you should use float instead of int
            #We also put the parsing in a try/except block.  If parsing fails (e.g. a
            #element can't be converted to a float, you'll know it and you'll know the
            #line which caused the problem.)
            try:
                #block.append(map(int,line.split()))
                block.append(map(convert_type,line.split()))  
            except Exception:
                sys.stderr.write("Parsing datafile choked on line %d '%s'\n"%(i+1,line.rstrip()))
                raise
    return out

with open('textfile.txt','r') as f:
    data_dict=parse_file(f)

#get information from '*load' block:
info=data_dict['load']
for row in info:
    a,b,c=row
    ##same as:
    #a=row[0]
    #b=row[1]
    #c=row[2]
    ##as long as row only has 3 elements.

    #Do something with that particular row. 
    #(each row in the 'load' block will be visited once in this loop)

#get info from stiffness block:
info=data_dict['stiffness']
for row in info:
    pass #Do something with this particular row. 
```

请注意，如果您保证某个标题下的数据文件中的每一行具有相同数量的条目，您可以将变量`info`视为索引为的二维行`element=info[row_number][column_number]`- 但您也可以获得整行经过`row=info[row_number]`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T13:05:43.630

也许是这样的：

```
line = filename.readline()
if line.find("*load") == 0:
    line = filename.readline()
    while line != "\n" and line != "":
        vars = line.split(" ") 
```

`vars`只是存储`['2', '7', '200']`此代码运行后的值的示例（因此您需要将它们转换为浮点数或整数）。然后，您可以将它们附加到数组或根据需要重命名它们。

编辑：源自上述的工作程序。

```
filename = open("fff.txt", 'r')
values = {}

line = filename.readline()
while line:
    while line.find("*") != 0:
        line = filename.readline()

    sectionheader = line.strip()[1:]
    values[sectionheader] = []
    line = filename.readline()
    while line != "\n" and line != "":
        vals = [float(i) for i in line.split(" ")]
        values[sectionheader].append(vals)
        line = filename.readline()

print values 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T13:04:37.000

虽然我无法帮助您解决语法问题，但最好使用自调用。

编写一个函数来检测您需要的行并存储字节偏移量。接下来，使该函数调用自身以查找下一行（以结束操作），同时存储其偏移量并将其与先前保存的值进行比较。

现在您有足够的数据来确定需要更改哪些字节。

然而，自调用函数在正确使用时非常有效，它们可以提高性能并且易于重用。

在 php 中，我构建了一个类似于 .net 中的流写入器，它以这种方式工作。因此，我知道该理论有效，但是，这似乎是 python。

不幸的是，我对这种语言的了解还不够。祝你的项目好运！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-12T13:06:53.623

这就是我对您的代码所做的：

```
import sys
from Tkinter import *
import tkFileDialog
from tkFileDialog import askopenfile # Open dialog box

fen1 = Tk()                              # Create window
fen1.title("Optimisation")               # Window title

menu1 = Menu(fen1)

def do_open(interesting_parts=[]):
    thefile = askopenfile(filetypes=[("Text files","*.txt")], mode='r')

    data = {} # Create a dictionary to store all the data stored per part name
    part = None
    for line in thefile:
        if line.startswith("*"):
            # A * in the beginning signals a new "part"
            # And another one means the end.
            part = line[1:] # Remove the * in the beginning via slicing to get the name without it.
            if part in interesting_parts:
                data[part] = [] # Create a list inside the dictionary, so that you can add data to it later.
                # Only do this if we are interested in storing anything for this part
        elif part in interesting_parts:
            # Add an a condition to check if the part name is in the list of "parts" you are interested in having.
            line_data = get_something_from_this(part, line) # just a function that returns something based on the line and the part
            if line_data is not None: # Ignore it if it's None (just an option, as there might be newlines that you want to ignore)
                data[part].append(line_data)

    # Here, we return the dictionary to act on it.
    return data

def get_something_from_this(part, line):
    try:
        ints = [int(p) for p in line.split()]
    except ValueError:
        print "Ignoring Line", repr(line), "in", part
        return None # We don't care about this line!
    else:
        print "in", part, ints
        return ints # Store this line's data

data = do_open(["test", "egg"]) # Pass as an argument a list of the interesting "parts"

print data # this is a dictionary

# How do you access it?
print data["test"] # to get all the lines' data in a list
print data["egg"][0] # to get the first line of the data

for part, datalines in data.iterkeys():
    print part, datalines # datalines is the list of all the data, part is the dictionary's key which is the part name
    # Remember data[part] = ... <- Here part is the key.

fen1.mainloop() 
```

1.  当它不是“文件名”而是“文件”时，不要命名变量文件名。
2.  您可以使用 for 循环逐行循环。
3.  使用 split 拆分字符串
4.  使用startswith来判断一个字符串是否以另一个字符串开头
5.  跟踪您是否在变量的“*load”部分。

**更新**：不要使用 open 作为函数名，它已经在 python 的内置函数中。另外，为了避免解析`*load`and`*stiffness`行，我对代码进行了一些修改：每一行的解析都在一个`elif`语句中完成。

**更新 2**：

根据 OP 的需要更新了代码。用这个文件测试：

```
*test
1 2 3

*load
2 7 200
3 7 150

*stiffness
2 9 8

*egg
1 2 3
2 4 6

*plant
23 45 78 
```

**更新3**：大量评论:)

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-06-12T13:04:51.217

这样的事情应该做

```
data=[]
check=false
for i in fid:
    if line.find("*load"):
        check=true
    if check==true and not line.find("*stiffness"):
        line=split(i)
        data.append(map(lambda x: float(x), line))
    if line.find("*stiffness"):
        break

fid.close()
for i in data:
    a=i[0]
    b=i[1]
    c=i[2] 
```

将此作为粗略建议的代码...（我认为异常现在已修复，如果不是，我不在乎...）

# c# - 为什么GC无法收集到事件绑定的实例？

> ID：10997060
> 
> 赞同：0
> 
> 时间：2012-06-12T12:52:40.797
> 
> 标签：c#, events, garbage-collection

这个问题基于这个问题： [如何处理包含事件的局部变量](https://stackoverflow.com/questions/10992100/how-to-dispose-the-local-variable-that-contains-event)

有人说：一个事件处理一个实例，实例的引用计数会增加吗？为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T12:57:40.853

正如 Jon Skeet 所说，您的相关问题是倒退的。唯一保持`watcher`活动状态的可能是它自己的内部实现，它可能（或可能不）向负责反馈“滴答声”的较低级别对象注册一个事件。——但这只是猜想。

单击该按钮两次将产生两个**单独** `watcher`的实例，每个实例都有**一个**事件订阅者`PositionChanged`（恰好是同一实例上的相同方法）。

重要的是，在方法退出后保持活动状态**的不是**订阅者- 它是其他东西（我怀疑隐藏在实现中）。当方法退出时，对特定实例的引用被*正确地*从堆栈中弹出，但是由于*另一个*引用被持有在CLR 眼中的有效引用计数仍然大于零 ​​- 因此，***不***符合垃圾收集的条件.`PositionChanged``watcher``GeoCoordinateWatcher``watcher`**`watcher`**

 ***因此，它将继续触发该`PositionChanged`事件。由于事件中没有任何内容阻止观察者继续，我猜你可能有内存泄漏，因为每次按钮单击都会创建并**保留**一个观察者实例。

您要么只需要存储和使用一个`GeoCoordinateWatcher`类，要么在每次处理事件时关闭/处置/停止它。

* * *

事件和订阅的通常考虑是注意订阅长寿命对象的短寿命对象。

委托持有对类的特定实例中的特定方法的引用（或者如果它是静态方法，则只是类型本身）。订阅事件会导致事件发布者无意中通过订阅的委托持有对订阅者实例的引用。

显然，如果您将静态方法注册为事件处理程序，您将不会获得此引用计数，因为没有实例。

如果订阅者的生命周期很短，而事件发布者的生命周期很长（如果您不取消订阅），则可能会发生内存泄漏。假设订阅者想要获得 GC 的资格，因为它在某处有针对某个事件的活动订阅并且*该*对象仍然存在，所以在从该订阅列表中删除之前，它无法获得资格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T12:58:42.233

因为调用[GeoCoordinateWatcher.Start](http://msdn.microsoft.com/en-us/library/ee808853.aspx)你开始一个新*任务*。即使它在*您的*代码中声明为`local`变量，它也会在函数范围退出后继续存在。

您可以考虑这一点，就像您`process`从函数开始第三部分一样。函数的范围消失了，但过程仍然存在。

在提供的链接中，如果您单击按钮两次，这将导致**同一**事件处理程序`GeoCoordinateWatcher`处理2 个不同的实例。因此，将从 2 个不同的实例调用该事件处理程序两次。**`GeoCoordinateWatcher`**

 *** * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T12:59:01.133

创建委托对象时，它包含`Method`和`Target`属性。[Target](http://msdn.microsoft.com/en-us/library/system.delegate.target)属性指向将在其上下文中调用方法的对象（`Target`第一个参数，aka `this`）。

在某些情况下，对委托对象的引用将处于活动状态，从而防止`Target`实例被 GC。它通常发生在你有一个基于插件/插件的应用程序，或者其他一些后期绑定的情况，或者你正在使用委托做很多工作并且委托对象存储在某个集合中，或者你有一个静态字段使用委托对象，（因为从不收集静态字段）等。

请记住，垃圾收集不易受到“循环引用”问题的影响；要使一个对象被认为是“有用的”，它必须可以从当前堆栈中访问。*****

# android - 从 xml 加载 imageView

> ID：10997063
> 
> 赞同：5
> 
> 时间：2012-06-12T12:53:02.840
> 
> 标签：android, android-layout, android-imageview

我想使用这样的命令：

```
ImageView image = (ImageView) findViewById(R.id.x2); 
```

`main.xml`我应该将以下代码放在文件中的哪个位置？

```
<ImageView 
    android:id="@+id/x2"
    android:src="@drawable/book"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" /> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-12T13:11:35.473

Dheeresh Singh 没问题。主.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

   <ImageView 
          android:id="@+id/x2"
          android:src="@drawable/book"
          android:layout_width="wrap_content"
          android:layout_height="wrap_content" />
</LinearLayout> 
```

如果想把图片定位在不同的地方，可以修改不同的属性

```
 <ImageView 
              android:id="@+id/x2"
              android:src="@drawable/book"
              android:layout_width="wrap_content"
              android:layout_height="wrap_content"
              android:layout_marginBottom="42dp"  <!--for example  -->
              android:layout_marginLeft="25dp"
              android:layout_marginRight="25dp" 
              android:layout_marginTop="25dp"/> 
```

有关这方面的更多信息，请查看 android 教程

[http://developer.android.com/reference/android/widget/ImageView.html](http://developer.android.com/reference/android/widget/ImageView.html)（用于 ImageView 属性） [http://developer.android.com/resources/tutorials/views/index.html](http://developer.android.com/resources/tutorials/views/index.html)（用于查看信息）

对不起我的英语。祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T12:58:22.023

在您设置的活动的布局 xml 中设置`setContentView(r.layout.<id>)`

请参考教程设置`setContentView`

[Android 初学者指南](http://www.codeproject.com/Articles/102065/Android-A-beginner-s-guide)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T12:59:47.597

如[XML Layouts](http://developer.android.com/guide/topics/ui/declaring-layout.html)开发人员指南中所述，您应该`main.xml`在 /res/layout/ 下创建您的并放入如下[可用布局](http://developer.android.com/guide/topics/ui/layout-objects.html)`ImageView`之一：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
          android:layout_width="fill_parent" 
          android:layout_height="fill_parent" 
          android:orientation="vertical" >

<ImageView 
      android:id="@+id/x2"
      android:src="@drawable/book"
      android:layout_width="wrap_content"
      android:layout_height="wrap_content" />

</LinearLayout> 
```

# grails - Grails：createCriteria 错误结果

> ID：10997065
> 
> 赞同：0
> 
> 时间：2012-06-12T12:53:03.650
> 
> 标签：grails, createcriteria

我试图通过某些标准从我的数据库中获取一些数据，但我不会得到正确的结果。

我的方法：

```
public ArrayList getAllBudgetsByUserAndDateAndActive(ArrayList dates, uid){
    ArrayList BudgetList = new ArrayList()
    Date lastDate = dates.get(dates.size() - 1).date
    Date firstDate = dates.get(0).date
    println lastDate
    println firstDate
    def i

    def c = Budget.createCriteria()
    def results = c {
        employees { eq("id", uid) }
        and{
            le("validUntil",firstDate)
            ge("validFrom",lastDate)
        }
        project{ eq("active", true) }
    }
    println results.size
    for(i=0;i<results.size;i++){
        println "Budgets FROM:" + results.getAt(i).validFrom
        println "Budgets UNTIL:" + results.getAt(i).validUntil

}

return null
} 
```

该方法有 2 个参数，一个日期列表和一个用户 ID。

Worls 找到的所有内容和所有 println 都已打印，但 @results.size 始终为 0。

3个条目看起来像

```
 def budget1 = new Budget(billable:"true",
            numberOfPersonDays:15,
            project:project1,
            dailyRate:1.5,
            validFrom:new Date("11/11/2011"),
            validUntil:new Date("12/1/2011"),
            employees:[employee1, employee2]).save()

    def budget2 = new Budget(billable:"true",
            numberOfPersonDays:15,
            project:project1,
            dailyRate:1.5,
            validFrom:new Date("6/05/2012"),
            validUntil:new Date("6/12/2012"),
            employees:[employee1]).save()

    def budget3 = new Budget(billable:"true",
            numberOfPersonDays:15,
            project:project2,
            dailyRate:1.5,
            validFrom:new Date("6/1/2011"),
            validUntil:new Date("06/04/2011"),
            employees:[employee1]).save() 
```

所以应该有确切的 1 个结果，但我从控制台得到的只是：日期范围从今天开始（6 月 12 日 -2 周）

2012 年 6 月 12 日星期二 14:49:11 CEST

2012 年 5 月 30 日星期三 14:49:11 CEST

0

我认为我的标准做错了，但我现在几个小时都无法解决。其他线程也没有帮助我。

感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T07:29:44.773

好的，通过将标准更改为：

```
 def c = Budget.createCriteria()
    def results = c.list {
        employees { eq("id", uid) }
        project{ eq("active", true) }
        and { le("validFrom",lastDate)}
        and { ge("validUntil",firstDate)      }
    } 
```

# php - PHP变量声明有括号

> ID：10997072
> 
> 赞同：0
> 
> 时间：2012-06-12T12:53:28.690
> 
> 标签：php

以下代码似乎都有效：

```
$a = ('hello');
$b = 'world'; 
```

不过，我不熟悉这种括号符号。它是干什么用的？没有括号有什么不同？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T12:56:54.133

类似于所有基础数​​学。它有助于分开计算。例如。(2x2)+3=7 但 2x(2+3)=10。

它指示编译器按特定顺序处理每条指令。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-12T12:56:43.187

两者没有区别。使用括号仅告诉 PHP 在执行任何其他操作之前评估表达式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-12T12:59:56.843

括号允许您对所涉及的运算符强制执行某种评估顺序，例如，当您使用非交换运算符时，例如`-`：

```
$x = (2-2)-2; // = -2
$x = 2-(2-2); // =  2 
```

由于您不执行任何操作，因此您可以随意丢弃或添加括号。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-12T13:01:02.060

在这种情况下没有区别。

括号表示这是一个表达式，它的结果将存储在变量中。

在这种情况下，表达式根本“没有操作”：

```
$a = ('hello'); 
```

所以括号完全没用。在其他情况下，您只需将它们视为一个表达式，就像一个数学表达式。

# facebook - 如何在身份验证对话框的移动版本和 Web 版本之间切换

> ID：10997082
> 
> 赞同：0
> 
> 时间：2012-06-12T12:54:12.290
> 
> 标签：facebook, facebook-php-sdk

当我通过应用程序接受身份验证对话框传递我的用户时，他们可以是移动设备或网络，但当前使用 php sdk，他们似乎都指向网络接受对话框。

无论如何，我可以在 sdk 中指定我希望用户通过的站点，或者我将如何最好地处理 facebook 的这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T08:16:03.113

对于其他有问题的人 - 我使用[这个库](http://code.google.com/p/php-mobile-detect/wiki/Mobile_Detect)来检测用户是否在移动设备上，然后 str_replace'd www。与米。

```
//generate our url for the view
$data['loginUrl']   =   $this->facebook->getLoginUrl(array('scope' => 'read_stream,publish_stream,status_update',
                                                                           "redirect_uri" => base_url()."social/pre_network_select2/new_facebook_save/")

                                                                   );
//check if the user is on a mobile device
if($this->Mobile_Detect->isMobile()){

    $data['loginUrl'] = str_replace('www.','m.',$data['loginUrl']);

} 
```

# java - 在使用 new 关键字创建的 Spring bean (@Component) 中自动装配

> ID：10997092
> 
> 赞同：10
> 
> 时间：2012-06-12T12:54:32.170
> 
> 标签：java, spring, jakarta-ee, dependency-injection

我有两个春豆如下：

```
@Component("A")
@Scope("prototype")
public class A extends TimerTask {

    @Autowired
    private CampaignDao campaignDao;
    @Autowired
    private CampaignManager campManger;
    A(){
        init_A();
       }
    } 
```

由于遗留代码，我必须使用 new 关键字创建 A 的新对象

```
@Component("B")
@Scope("prototype")
public class B{
     public void test(){
       A a = new A();
     }
} 
```

当 Running -> A 类中的 spring bean 为 null 时，我可以创建 spring bean A 的新实例并仍然在其中使用自动装配吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-12T13:47:31.190

您的组件“A”不是由 Spring 容器创建的，因此不会注入依赖项。但是，如果您需要支持一些遗留代码（正如我从您的问题中了解到的那样），您可以使用`@Configurable`注释和构建/编译时编织：

```
@Configurable(autowire = Autowire.BY_TYPE)
public class A extends TimerTask {
  // (...)
} 
```

然后，Spring 将向组件 A 注入自动装配的依赖项，无论它是由容器本身实例化的，还是由`new`.

例如，要使用 maven 插件设置构建时编织，您必须：

1.  添加`<context:spring-configured/>`到 Spring 应用程序上下文
2.  配置[Maven AspectJ 插件](http://mojo.codehaus.org/aspectj-maven-plugin/)：

在构建插件部分：

```
<build>
  <plugins>
    <plugin>
      <groupId>org.codehaus.mojo</groupId>
      <artifactId>aspectj-maven-plugin</artifactId>
      <version>1.4</version>
      <configuration>
        <complianceLevel>1.6</complianceLevel>
        <encoding>UTF-8</encoding>
        <aspectLibraries>
          <aspectLibrary>
            <groupId>org.springframework</groupId>
            <artifactId>spring-aspects</artifactId>
          </aspectLibrary>
        </aspectLibraries>
        <!-- 
          Xlint set to warning alleviate some issues, such as SPR-6819\. 
          Please consider it as optional.
          https://jira.springsource.org/browse/SPR-6819
        -->
        <Xlint>warning</Xlint>
      </configuration>
      <executions>
        <execution>
          <goals>
            <goal>compile</goal>
            <goal>test-compile</goal>
          </goals>
        </execution>
      </executions>
    </plugin>
  </plugins>
</build> 
```

...和依赖项部分：

```
<dependency>
  <groupId>org.springframework</groupId>
  <artifactId>spring-aspects</artifactId>
  <version>3.1.1.RELEASE</version>
</dependency>
<dependency>
  <groupId>org.aspectj</groupId>
  <artifactId>aspectjrt</artifactId>
  <version>1.6.11</version>
</dependency> 
```

请参阅 Spring 参考以获取更多详细信息： [http ://static.springsource.org/spring/docs/current/spring-framework-reference/html/aop.html#aop-atconfigurable](http://static.springsource.org/spring/docs/current/spring-framework-reference/html/aop.html#aop-atconfigurable)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T13:06:30.413

因为您正在使用 new 运算符自己创建类 A 的对象，所以您不会在该对象中获取自动装配的字段并发现它们为空。尝试从弹簧容器中获取 bean。

希望这对您有所帮助。干杯。

# ruby-on-rails - spork 未改善 Rails 和 rspec 加载时间

> ID：10997093
> 
> 赞同：0
> 
> 时间：2012-06-12T12:54:33.760
> 
> 标签：ruby-on-rails, ruby, macos, rspec, spork

我已按照 spork-rails 的安装说明进行操作

我无法`bundle exec spork`运行并收到错误

```
/opt/local/bin/spork:23:in `load': cannot load such file -- /opt/local/lib/ruby1.9/gems/1.9.1/gems/spork-1.0.0rc3/bin/spork (LoadError)
from /opt/local/bin/spork:23:in `<main>' 
```

我在 /opt/local/lib/ruby1.9/gems/1.9.1/gems/spork-1.0.0rc3/bin/spork 的组中，它的权限是 711。

运行`sudo bundle exec spork`有效，但是当我运行`bundle exec rspec spec`时仍然需要 8 秒以上才能加载

我正在运行：
ruby​​ 1.9.3
rails 3.2.3
spork 1.0.0rc3
spork-rails 3.2.0
rspec 2.10.1
OSX 10.7.4
使用 macports 安装

**更新**我已经卸载了 macports ruby​​ 并重新安装了 rvm

这允许我`bundle exec sport`在没有 sudo 的情况下执行任务，但`bundle exec rspec spec`仍然需要 +8 秒才能运行

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T13:35:10.207

您还可以查看[spin](https://github.com/jstorimer/spin/)，它的作用相同，但设置起来**更**容易且干扰更少。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-12T16:36:26.977

当您运行 rspec 时，您需要传入参数“--drb” *rspec --drb spec/*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T07:02:16.803

除了 YaBoyQuy 的答案之外，您还可以`--drb`在您的选项中添加该选项`.rspec`并忘记它。这是我的`.rspec`文件的内容：

```
--drb
--colour
--order=random 
```

（请注意，我添加了`--order=rand`使 rspec 以随机顺序运行测试的选项，这是一件好事，因为您的测试不应相互依赖）

# javascript - Keydown 在第一次按键和后续按键后暂停

> ID：10997099
> 
> 赞同：6
> 
> 时间：2012-06-12T12:55:03.977
> 
> 标签：javascript, jquery

去[这里](http://jsfiddle.net/M7TKc/)

使用向上和向下键

当我按下一个键时，红色框向下移动，暂停，然后移动其余部分。

如何删除暂停？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-12T13:11:12.740

您应该跟随`keydown`并`keyup`使用间隔来更平稳地移动桨。

演示：http: [//jsfiddle.net/M7TKc/16/](http://jsfiddle.net/M7TKc/16/)

```
var paddle = $("#paddle");
paddle.css({backgroundColor: "red", height:"100px", width:"25px", position: "absolute"});

var paddle_y = 0,
    moving = 0;  /* added */

draw_paddle();

window.setInterval(function () {  /* added */
    if (moving != 0) {
        paddle_y += moving;
        draw_paddle();
    }}, 100);

function move_down(){
    moving = -10;
}
function move_up(){
    moving = 10;
}

function draw_paddle(){
    paddle.css({top: paddle_y+"px"});
}

$(document).keypress(function(e) {
    if(e.which == 13) {
        // stop on "ENTER"
        moving = 0;
    }
});
$(document).keydown(function(e){  /* changed */
    if (e.keyCode == 38)
        move_down();
    else if (e.keyCode == 40)
        move_up();

});

$(document).keyup(function(e){  /* added */
    if (e.keyCode == 38 || e.keyCode == 40)
        moving = 0;
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T12:57:37.407

你不能，因为它取决于操作系统的键盘设置，以防止在稍微长的按键压力下输入多个字母。

PS：不要为您要监视的每个键注册一个事件。改为这样做：

```
$(document).keydown(function(e){
    if (e.keyCode == 38) { 
        move_down();
        return true;
    } else if (e.keyCode == 40) { 
        move_up();
        return true;
    }
});​ 
```

而且`return true;`实际上并没有做任何有意义的事情...

您实际上应该做的是使用`keydown`and keyup`events`来做他们应该在游戏中做的事情（我认为是），即开始和停止运动。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-12T13:21:57.317

您应该使用 setInterval 更新函数来更新您的位置。您的 keyup 和 keydown 函数将设置向上或向下移动桨的标志。演示：http: [//jsfiddle.net/DH5qT/](http://jsfiddle.net/DH5qT/)

```
 var movedir = 0; // up if 1, down if -1, none if = 0.
    var interval = setInterval(function(){
        paddle_y = paddle_y + (5 * movedir);
        draw_paddle();
    } , 1);

    function move_down(){
        movedir = -1;
        draw_paddle();
    }
    function move_up(){
        movedir = 1;
        draw_paddle();
    } 
```

# magento - Magento getProductUrl() 没有返回正确的网址

> ID：10997108
> 
> 赞同：3
> 
> 时间：2012-06-12T12:55:35.863
> 
> 标签：magento

我被困在产品集合中获取产品网址。我有这段代码来获取设置的特色产品的产品集合。

```
 $_productCollection = Mage::getModel('catalog/product')
                  ->setStoreId(Mage::app()->getStore()->getId())
                  ->getCollection();

 $_productCollection->addAttributeToFilter('feat_enabled', 1);
 $_productCollection->setVisibility(array(2,3,4));
 $_productCollection->addUrlRewrite();
 $_productCollection->groupByAttribute('entity_id');
 $_productCollection->load();

foreach($_productCollection as $_product){  
       $_product->load($_product->getId());
   if($_product->getIsSalable()){
          $_name = ltrim(rtrim($_product->getName()));
          $_url =  $_product->getProductUrl();
       }
} 
```

我在这里做错了什么，如果在每个循环中都回显 $_url，则缺少返回的 url。它没有类别名称和子目录名称。正确的网址应该是：

> index.php/category/subcategory/itemname.html

但目前它只返回

```
 index.php/itemname.html 
```

它返回除 url 之外的正确数据。如果我将项目分配给一个类别和子类别，我会在管理员中仔细检查，我确认我分配了它。

```
Upon further research, I have found the code below that is very close to what i need.
$_categories = $_product->getCategoryIds();
$_category = Mage::getModel('catalog/category')->load($_categories[0]);
$_url = Mage::getUrl($_category->getUrlPath()).basename($_product->getProductUrl()); 
```

这里的问题，$_url 的值变成了这样

> index.php/category/subcategory.html/itemname.html

子类别名称中包含 .html。我的 url 中不需要 .html，因此单击该项目时会重定向到正确的页面。

有什么想法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-01-08T16:03:36.187

```
$_productCollection = Mage::getModel('catalog/product')->getCollection()
    ->addAttributeToSelect('*')
    ->addCategoryFilter( $_category )
    ->addAttributeToFilter('status', array('eq' => 1))
    ->addUrlRewrite()
    ->load();

    foreach ($_productCollection as $_product):

        $_product_url = $_product->getProductUrl();

    endforeach; 
```

> addUrlRewrite() // 变魔术

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-12T15:13:04.097

这样做的问题是产品可以出现在多个类别中。

因此，在某种程度上，无论您采用哪种方式，您都必须在某个地方涉及一个类别。

因此，最简洁的方法是使用该`addurlRewrite`方法并传递类别 ID。Magento 将检查与类别 id 和产品 id 匹配的重写 - 如果找到重写，您将在`getProductUr`l 调用中获得您正在寻找的漂亮 url。例如，使用 10 的类别 ID：

```
$collection = Mage::getResourceModel('catalog/product_collection')
                ->addUrlRewrite(10); 
```

如果您知道每个产品只会出现在一个类别中，那么您可以通过使用以下获取第一个类别 id 来使其更加灵活：

因此，使用此方法的完整示例将是：

```
$categoryId = array_shift($_product->getCategoryIds());
$collection = Mage::getResourceModel('catalog/product_collection')
                ->addUrlRewrite($categoryId); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-12T14:32:06.980

这是预期的行为，因为相同的产品可以存在于多个类别中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-27T07:23:24.533

感谢您的出色解决方案。但如果包含根类别和更多深度类别，它将不起作用。我在您的解决方案中添加了一些代码：

```
 $cat_count=count($_categories);

   if($cat_count>0){
       if($_categories[0]==2) // here 2 is root category id
       $cat_count=$cat_count-1;
       else
       $cat_count=$cat_count-2;
   }

    $_categories = $_product->getCategoryIds();

    $_category = Mage::getModel('catalog/category')->load($_categories[$cat_count]); 

    $caturl=explode('.html', $_category->getUrlPath());      

    $_url = Mage::getUrl($caturl[0]).basename($_product->getProductUrl()); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-06-12T14:54:54.980

为了那些和我有同样问题的人的利益。我已经通过这种方式解决了这个问题。

```
 foreach($_productCollection as $_product){ 
        $_categories = $_product->getCategoryIds();
        $_category = Mage::getModel('catalog/category')->load($_categories[0]);          
        $caturl=explode('.html', $_category->getUrlPath());            
        $_url = Mage::getUrl($caturl[0]).basename($_product->getProductUrl()); 
 } 
```

我只是在类别 url 路径中分解 .html，因为我希望我的类别 url 在其中包含 .html。

我不知道这是否很好解决，但这对我有用。

# css - 带有图像和文本的两个列块

> ID：10997113
> 
> 赞同：-2
> 
> 时间：2012-06-12T12:55:47.270
> 
> 标签：css, image, block, two-columns, two-column-layout

我正在寻找在[这张](http://i.stack.imgur.com/Aoxt5.png)图片中创建类似的东西。

每个块都有一个图像（方形图像）和文本。

任何人都知道如何设计它？我更喜欢 CSS 解决方案。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T13:23:43.367

正如其他人评论的那样，您的问题有点含糊。但是，我在[jdFiddle](http://jsfiddle.net/chin/YW6FN/1/)上做了一个快速的混搭。图案背景可以通过 CSS3 图案实现，尽管它们与旧版浏览器不完全兼容。我使用了border-radius CSS 在方框中创建圆角。看看它，希望能给你一个关于如何去做你赢了的想法。还建议查看上述评论中提交的 w3schools 链接。

# c# - 在列表 C# 中加入具有相同参数的条目

> ID：10997116
> 
> 赞同：2
> 
> 时间：2012-06-12T12:56:07.970
> 
> 标签：c#, .net

假设我有以下列表

```
List<Invoice> InvoiceList

[0]
   AdvertiserCustomerID = "Generic Brand"
   GrossAmount = 1452
[1]
   AdvertiserCustomerID = "Generic Brand"
   GrossAmount = 4325
[2]
   AdvertiserCustomerID = "Generic Brand"
   GrossAmount = 2
[3]
   AdvertiserCustomerID = "Generic Brand 2"
   GrossAmount = 9211 
```

将具有相同 AdvertiserCustomerID 的品牌组合到一个条目中并计算 GrossAmount 总和的最简单方法是什么？所以最终列表看起来像这样：

```
List<Invoice> InvoiceList

[0]
   AdvertiserCustomerID = "Generic Brand"
   GrossAmount = 5779
[1]
   AdvertiserCustomerID = "Generic Brand 2"
   GrossAmount = 9211 
```

我通过创建一个新列表并使用 FindIndex 检查 AdvertiserCustomerID 来完成此操作，但我想知道是否有更简单的方法来执行此操作。

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-12T12:59:34.693

```
var result = InvoiceList
     .GroupBy(m => m.AdvertiserCustomerId)
     .Select(group => new Invoice {
                AdvertiserCustomerID = group.Key,
                GrossAmount = group.Sum(g => g.GrossAmount)
                }
     ); 
```

（在您的示例中，您不要相乘，而是求和）

这会给你一个`IEnumerable<Invoice>`，你可以`.ToList()`在最后添加一个来枚举。

# jquery - JQuery 更改内容

> ID：10997118
> 
> 赞同：0
> 
> 时间：2012-06-12T12:56:11.920
> 
> 标签：jquery, html

我正在尝试让 JQuery 更改 div 标签的内容，使其看起来像用户正在浏览多个页面。我的方式是用户将点击一个按钮，一旦他们点击该按钮，脚本将运行并更改 div 的内容。我希望至少有三页这样完成，但是在第二页之后我遇到了问题。这是我在脚本中的内容：

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript">

$(document).ready(function() {

$("#1").click(function() {
$("#leftPart").html('<input type="text" id="blash" value="blash" name="blash" ><input type="text" id="hello" value="hello" name="hello" ><input type="text" id="world" value="world" name="world" ><input type="button" name="submit" id="2" value="Submit" />');
$("#rightPart").html('');
});

$("#2").click(function() {
$("#rightPart").html('<input type="text" id="meep" value="meep" name="meep" ><input type="text" id="glomp" value="glomp" name="glomp" >');
});
}); 
```

因此，一旦我单击第一页上的按钮，ID 为“1”，它就会将屏幕更改为第二页应显示的内容。第二页将显示一些内容并创建另一个 ID 为“2”的按钮。然后，当我尝试单击第二页中的按钮时，ID 为“2”，它什么也没做。有什么帮助吗？是因为按钮是用脚本创建的，而不是实际在 html 中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T12:59:58.077

那是因为id="2" 的按钮是绑定click事件后制作的，所以除非重新绑定click事件，否则不会检测到这个新按钮。更好的选择是使用 on() 而不是 click() 这将自动执行此操作。

```
$(document).ready(function() { 

    $("#1").on('click', function() { 
        $("#leftPart").html('<input type="text" id="blash" value="blash" name="blash" ><input type="text" id="hello" value="hello" name="hello" ><input type="text" id="world" value="world" name="world" ><input type="button" name="submit" id="2" value="Submit" />'); 
        $("#rightPart").html(''); 
    }); 

    $("#2").on('click', function() { 
        $("#rightPart").html('<input type="text" id="meep" value="meep" name="meep" ><input type="text" id="glomp" value="glomp" name="glomp" >'); 
    }); 

}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T13:01:08.497

这是因为您正在动态创建按钮。您需要使用`.on()`来委托单击事件。 `#2`dom 准备好时不会创建按钮，这就是它不起作用的原因。'body' 可以替换为所选按钮的任何父元素。此外，您不应该使用数字作为 ID，因为它们是无效的

```
$('body').on('click','#2',function(){ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-12T13:01:13.020

改变这个

```
$("#2").click(function() {
    $("#rightPart").html('<input type="text" id="meep" value="meep" name="meep" ><input type="text" id="glomp" value="glomp" name="glomp" >');
}); 
```

到

```
$(document).on('click',"#2",function() {
   $("#rightPart").html('<input type="text" id="meep" value="meep" name="meep" ><input type="text" id="glomp" value="glomp" name="glomp" >');
}); 
```

数值不是有效的 id，请使用有效的 id。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-12T12:59:36.673

是的。这是因为在将事件附加到网页时，DOM 中不存在按钮“2”。

尝试使用

*   [.live（事件，处理程序（事件对象））](http://api.jquery.com/live/)
*   [.on( 事件 [, 选择器] [, 数据] , 处理程序(eventObject) )](http://api.jquery.com/on/)
*   如果您使用的是旧版本的 jQuery，或者委托

您还可以参考'[动态创建元素的事件绑定？](https://stackoverflow.com/questions/203198/jquery-event-binding-on-dynamically-created-elements)'更多。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-12T12:59:38.497

你是对的，因为它是动态创建的。你可以`.on`用来避免这个问题

改变你的代码：

```
$("#2").click(function() {
$("#rightPart").html('<input type="text" id="meep" value="meep" name="meep" ><input type="text" id="glomp" value="glomp" name="glomp" >');
});
}); 
```

到

```
$("#leftPart").on("click","#2",function() {
  $("#rightPart").html('<input type="text" id="meep" value="meep" name="meep" ><input            type="text" id="glomp" value="glomp" name="glomp" >');
}); 
```

这将确保`leftPart`现在和将来具有 id 2 的任何元素都将具有上述事件处理程序

# iphone - 如何识别设备（唯一标识符、CFUUIDRef、设备令牌？）

> ID：10997120
> 
> 赞同：1
> 
> 时间：2012-06-12T12:56:16.387
> 
> 标签：iphone, objective-c, ios, xcode

我们的应用程序允许用户做一件事，而且只做一次。一些数据被发送到服务器，用户得到一些回报。但是，用户只需重新安装应用程序即可再次使用此功能。

你如何防止这种情况发生？由于“[[UIDevice currentDevice] uniqueIdentifier]”已被弃用并可能导致拒绝？？？，解决这个问题的最佳方法是什么？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T12:58:16.037

你可以使用

> 开放UDID

```
#include "OpenUDID.h"
NSString* openUDID = [OpenUDID value]; 
```

从这里获取 [链接到存储库](https://github.com/ylechelle/OpenUDID/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T12:58:04.510

试试这个

```
#include "OpenUDID.h"
NSString* openUDID = [OpenUDID value]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-08T12:50:14.420

通过使用 SecureUDID 也可以解决您的问题。SecureUDID 是一种机制，它以域名和密钥作为输入。它更安全且 100% 独一无二。通过使用此逻辑，如果用户重新启动设备或重新安装应用程序，UDID 也永远不会更改。

# redis - 未知命令“zremrangebyrank”

> ID：10997122
> 
> 赞同：0
> 
> 时间：2012-06-12T12:56:21.090
> 
> 标签：redis

在我的本地机器上，当我命令时，redis 可以完美运行

```
zremrangebyrank city 0 -1 
```

但是当我尝试在开发服务器上执行此操作时，我收到：

未知命令“zremrangebyrank”

知道为什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T13:03:01.047

此命令仅适用于 redis v2.0.0+

旧版本不支持它（您有 1.2.6）。

# jquery - jQuery UI 组合框、xml 和 optgroups

> ID：10997124
> 
> 赞同：1
> 
> 时间：2012-06-12T12:56:26.107
> 
> 标签：jquery, jquery-ui, combobox, option

我有以下代码：

```
$(document).ready(function () {

        $("#comboSubsidiary").combobox({

            selected: function (event, ui) {
                var subsidiary = $("#comboSubsidiary").select().val();

                switch (subsidiary) {

                    case (subsidiary = "GH"):
                        $.ajax({
                            type: "GET",
                            url: "GHworkerType.xml",
                            dataType: "xml",
                            success: function (xml) {
                                var select = $('#comboWorkerType');
                                $(xml).find('type').each(function () {
                                    var type = $(this).find('type').text();
                                    select.append("" + type + "");
                                    var id = $(this).attr('id');
                                    var name = $(this).find('name').text();
                                    var rate = $(this).find('rate').text();
                                    if (name == "Cust" || name == "Int") {
                                        $('<optgroup label="' + name + '"></optgroup>').html(name).appendTo('#comboWorkerType');
                                    }
                                    else {
                                        $('<option>' + name + '</option>').html(name).appendTo('#comboWorkerType');
                                    }

                                });

                                select.children(":first").text("Select worker type").attr("selected", true);

                            }
                        });
                        break;

                    case (subsidiary = "GT"):
                        alert('Alert');
                        break;

                }
            }
        });
}); 
```

HTML：

```
<div class="comboTravel">
     <select id="comboSubsidiary" >
       <optgroup label="Cust">
        <option>Select subsidiary</option>
       </optgroup>
     </select>
</div> 
```

这是 XML：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<worker>
    <type>
        <name>Cust</name>
        <rate>Cust</rate>
    </type>
    <type>
        <name>1</name>
        <rate>75</rate>
    </type>
    <type>
        <name>2</name>
        <rate>83</rate>
    </type>
    <type>
        <name>3</name>
        <rate>105</rate>
    </type>
    <type>
        <name>4</name>
        <rate>115</rate>
    </type>
    <type>
        <name>5</name>
        <rate>0</rate>
    </type>
    <type>
        <name>Int</name>
        <rate>Int</rate>
    </type>
    <type>
        <name>1</name>
        <rate>75</rate>
    </type>
    <type>
        <name>2</name>
        <rate>83</rate>
    </type>
    <type>
        <name>3</name>
        <rate>105</rate>
    </type>
    <type>
        <name>4</name>
        <rate>115</rate>
    </type>
    <type>
        <name>5</name>
        <rate>0</rate>
    </type>
</worker> 
```

我希望组合框将 Cust 和 Int 显示为 optgroup。我怎样才能让它工作？

目前，所有 xml 节点都正确显示在组合框中，但两个选项组未显示，并且选项组中包含的所有内容均未显示在组合框中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T10:15:43.113

抱歉，这不是一个完整的解决方案，但该标准`combobox`不允许远程加载数据，所以与其重新发明，这里有一些替代方案。

jQuery UI 自动完成（组合框）的答案[：如何用 AJAX 请求的结果填充它？](https://stackoverflow.com/questions/8309382/jquery-ui-autocomplete-combobox-how-to-fill-it-with-ajax-request)包含修改后`combobox`的代码，您可以在其中指定值数组或远程源。在我看来，jQueryUI 组合框确实是一个 hack，似乎并不被认为是一流的小部件。

[使用http://ivaynberg.github.com/select2/](http://ivaynberg.github.com/select2/)可能会有更好的运气（同样，在我看来）它具有更丰富的 API，看起来更干净，并且总体上是更好的 UX。您将需要提供一个`formatResult`函数来显示您的自定义数据，但上述链接中有很多示例。

但是，只有一个警告是`<optgroup>`最近才添加支持，因此您需要最新的[**Select2 3.0**](http://ivaynberg.github.com/select2/select2-latest.html)版本，它可能不稳定。

希望这可以帮助 ：-）

# windows-phone-7 - 将 windows phone 注册到 app-hub

> ID：10997126
> 
> 赞同：0
> 
> 时间：2012-06-12T12:56:27.767
> 
> 标签：windows-phone-7, windows-mobile-6.5

我以学生身份验证了我的帐户，并尝试注册我的设备错误是设备未在市场上注册实际上我想注册此错误的含义是什么？！我在此链接 [http://forums.create.msdn.com/forums/t/88883.aspx](http://forums.create.msdn.com/forums/t/88883.aspx)中找到了类似的解决方案，这 是解决方案：登录 App Hub 并验证您的开发人员帐户设置。

现在我想问这是什么？如何验证开发者帐户设置？谢谢他们告诉我 **在“我的仪表板”菜单下查看，** 但我不知道当我没有注册我的手机时我可以用我的仪表板做什么，顺便说一句，所以我也不会有任何应用程序..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T13:16:47.537

您将在开始 -> 程序菜单中找到“Windows Phone Developer Registration”工具，打开该工具并按照[说明](http://msdn.microsoft.com/en-us/library/ff769508%28v=vs.92%29.aspx)使用您的 Apphub 凭据注册您的手机。

为了检查您的 Apphub 凭据（用户名和密码）是否正确，请打开此[Apphub](http://windowsphone.create.msdn.com/app)链接并输入您的凭据。登录后，它应该带您到具有相同 URL 的页面（http://windowsphone.create.msdn.com/app）。如果它带您进入注册步骤，那么您的 apphub 帐户尚未完成。

确定以上流程后，建议您执行以下步骤（假设您的apphub注册成功）：

1.确保您能够将一些数据从 zune 软件同步到设备。

2.检查您是否可以从设备中的市场下载应用程序。

（这些是为了确保您的设备处于正常状态并且问题不在于设备）

# ios - NSDateFormatter 没有正确转换 NSString

> ID：10997127
> 
> 赞同：0
> 
> 时间：2012-06-12T12:56:34.867
> 
> 标签：ios, ios5, nsdate, nsdateformatter

试图证明我可以转换`NSString`为`NSDate`. 创建一个`NSDate`，把它变成一个`NSString`，然后再变成一个`NSDate`。日期作为字符串看起来不错，但是当我将其转换回来时，我总是会得到一些日期，例如 12/25/2011 .... 有人能发现我的错误吗？

```
 NSDateFormatter *df = [[NSDateFormatter alloc] init];
 [df setDateFormat:@"dd/MM/YY hh:mm a"];
 NSDate* b = [[NSDate alloc] init];
 NSString* f = [df stringFromDate:b]; // has the current date and time
 NSDate* dt =[df dateFromString:f];  // 12/25/2011 - where does it get this? 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T13:09:11.113

尝试使用以下内容：

```
[df setDateFormat:@"dd/MM/yyyy hh:mma"]; // or @"dd/MM/yy hh:mma" 
```

这是结果：

```
Printing description of b:
2012-06-12 13:06:16 +0000
Printing description of dt:
2012-06-12 13:06:00 +0000 
```

如果您需要更多信息，我建议您阅读[date-formatter-examples](http://mobiledevelopertips.com/cocoa/date-formatter-examples.html)。

如果您不使用 ARC，请注意内存泄漏。例如，使用`[NSDate date]`代替`[[NSDate alloc] init]`.

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T13:09:30.337

对我来说，您的系统似乎正在使用 Datestyle。

您是否应该将格式化程序设置为不使用样式：

`[df setDateStyle:NSDateFormatterNoStyle];`

为什么你一般不使用这种风格？看起来这`NSDateFormatterShortStyle` 就是你想要的。您只需要设置时间样式，并使用`setLocal:`以您想要的顺序显示日期。

# javascript - Javascript 中 ISO 639-1 代码中的语言名称

> ID：10997128
> 
> 赞同：12
> 
> 时间：2012-06-12T12:56:35.310
> 
> 标签：javascript, internationalization

我正在建立一个网站，人们可以在其中将语言信息与内容相关联。

该网站大量使用 Javascript，与各种元素相关的语言信息在内部被视为 ISO 639-1 代码。

如何以用户的语言显示语言名称列表？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-10T17:30:40.463

stackoverflow上有一些类似的问题。我需要一个 javascript 函数来获取不同语言的英文名称和本地名称。我在 stackoverflow （基于[wikipedia](http://en.wikipedia.org/wiki/List_of_ISO_639-1_codes) ）上找到了一个不错的[json 格式的 ISO 693-1 语言代码列表，](https://stackoverflow.com/questions/3217492/list-of-language-codes-in-yaml-or-json/4900304#4900304)并创建了一个[包含两个函数 getLanguageName 和 getLanguageNativeName 的要点](https://gist.github.com/mirontoli/4722797)。以下是如何使用它：

```
getLanguageNativeName("cv"); // --> "чӑваш чӗлхи"
getLanguageName("cv"); // --> "Chuvash"
getLanguageNativeName("cv-RU"); // --> "чӑваш чӗлхи"
getLanguageName("cv-RU"); // --> "Chuvash" 
```

我用它来回答另一个类似的问题：[生成带有谷歌翻译链接的本地化语言名称列表](https://stackoverflow.com/questions/3605495/generate-a-list-of-localized-language-names-with-links-to-google-translate/14800384#14800384)

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2020-10-28T11:59:46.010

[在 new(ish) Intl API](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Intl/DisplayNames)中有对此的本机支持：

```
let languageNames = new Intl.DisplayNames(['en'], {type: 'language'});
languageNames.of('fr');      // "French"
languageNames.of('de');      // "German"
languageNames.of('fr-CA');   // "Canadian French" 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2018-04-20T09:03:32.103

如果您想要任意语言中任意语言的名称（例如，如何用日语说“韩语”），您可以使用[Unicode CLDR](http://cldr.unicode.org/)数据。

要在 JavaScript 中使用它，您可以使用[cldr NPM 包](https://www.npmjs.com/package/cldr)，例如：

```
cldr.extractLanguageDisplayNames('it').en;
# => 'inglese' 
```

但不确定该包是仅支持 Node.js 还是还支持浏览器。如果没有，您可以搜索其他库或编写自己的代码来直接解析 CLDR。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-06-12T14:22:58.973

我认为您必须为您希望支持的每种语言维护自己的本地语言名称映射列表。但看起来 Wikipedia[正是您所需要](http://en.wikipedia.org/wiki/List_of_ISO_639-1_codes)的。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-04-17T12:56:16.110

另一种解决方案是使用[iso-639-1 包](https://www.npmjs.com/package/iso-639-1)。

安装：

```
npm install iso-639-1 
```

Node.js 中的用法：

```
const ISO6391 = require('iso-639-1')
console.log(ISO6391.getAllCodes())  // ['aa', 'ab', ...]
console.log(ISO6391.getName('cv'))  // 'Chuvash'
console.log(ISO6391.getNativeName('cv'))  // 'чӑваш чӗлхи' 
```

在浏览器中的用法：

```
<script type="text/javascript" src="./node_modules/iso-639-1/build/index.js"></script>
<script>
  console.log(ISO6391.getAllCodes())  // ['aa', 'ab', ...]
  console.log(ISO6391.getName('cv'))  // 'Chuvash'
  console.log(ISO6391.getNativeName('cv'))  // 'чӑваш чӗлхи'
</script> 
```

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2012-06-12T15:43:33.787

最好的办法：

```
 <script>
    var language = window.navigator.userLanguage || window.navigator.language; 
    alert(language);
    </script> 
```

# javascript - 隐藏/封装 JavaScript 逻辑

> ID：10997129
> 
> 赞同：2
> 
> 时间：2012-06-12T12:56:41.263
> 
> 标签：javascript, asp.net, ajax, actionscript-3, flash

我有一个带有 HTML、JavaScript 和 Flash 的客户端应用程序。UI 交互涉及 JS 使用 ExternalInterface API 与 Flash 通信。

将相同的应用程序转换为 asp.net 服务器端应用程序的最佳方法是什么，以便隐藏 JS 逻辑，即不下载到浏览器。在任何情况下，JS 应用程序都应该是 .net 应用程序的一部分。我知道这种方法会由于服务器往返而引入延迟，但是隐藏 JS 逻辑更为重要。我在 Google 上搜索了服务器端 javascript (SSJS)，但没有得到我想要的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T16:36:25.487

flash 应该能够做 javascript 可以做的所有事情，甚至更多，包括网络调用。为什么你需要javascript？为什么不让闪存本身完成所有这些逻辑呢？

当然，我确定它是否真的很重要，有人可以弄清楚如何对整个 Flash 应用程序进行逆向工程哈哈。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T13:44:28.430

你不能从浏览器中隐藏 JS，它是在客户端解析和执行的。混淆确实不值得，因为有些工具可以在几秒钟内将其反转。

只要确保您的服务器端逻辑是安全的，并且有人读取您的 JS 文件并不重要。如果逻辑对业务至关重要，那么我建议使用 JS 与您的服务器进行通信，该服务器将执行逻辑并提供响应。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T17:17:48.880

这不会直接回答您的问题，但您可能会查看[ActionScript 3.0](http://frontenddeveloper.net/wiki/index.php?title=JavaScript_and_VBScript_Injection_in_ActionScript_3)中使用[`ExternalInterface`](http://frontenddeveloper.net/wiki/index.php?title=JavaScript_and_VBScript_Injection_in_ActionScript_3). 正如其他海报所指出的那样，这将在一定程度上隐藏您的 JavaScript，但并不完全。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-12T13:27:05.787

不可能完全封装 javascript 逻辑，因为它在客户端计算机上运行，​​并且由于它是一种脚本语言，因此不会编译成可执行文件（本质上 - 尽管现代浏览器是为了提高性能）。你应该考虑混淆和缩小你的javascript，因为这会在某种程度上隐藏它——这有帮助吗？

大卫

# sql-server - 如何检查另一个连接 SQL Server 2008 的隔离级别

> ID：10997131
> 
> 赞同：9
> 
> 时间：2012-06-12T12:56:46.173
> 
> 标签：sql-server, sql-server-2008

我需要查看所有当前连接的隔离级别以找到一些锁定问题。

我试过`DBCC Useroptions`了，但它只为我的用户提供信息。

我试过`DBCC PSS(0)`或`DBCC PSS(1,57)` 但我得到以下错误：

DBCC 语句不正确。检查文档以获取正确的 DBCC 语法和选项。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-12T13:02:34.927

```
SELECT CASE transaction_isolation_level 
                        WHEN 0 THEN 'Unspecified' 
                        WHEN 1 THEN 'ReadUncomitted' 
                        WHEN 2 THEN 'Readcomitted' 
                        WHEN 3 THEN 'Repeatable' 
                        WHEN 4 THEN 'Serializable' 
                        WHEN 5 THEN 'Snapshot' 
                  END 
FROM sys.dm_exec_sessions 
WHERE session_id = <spid_of_other_session> 
```

# java - 为 JUnit Runner (Eclipse) 设置系统属性以测试 Spring Web App

> ID：10997136
> 
> 赞同：21
> 
> 时间：2012-06-12T12:56:56.970
> 
> 标签：java, eclipse, spring, junit, system-properties

我们的 Web 应用使用 SystemPropertyPlaceholder 根据系统属性的值加载属性文件（见下文）

在本地运行它的默认设置存储在`application.properties`. 在生产服务器上，我们目前只是在部署应用程序之前将“env”设置为“production”，它将加载`production.properties`.

现在为了测试应用程序，`test.properties`应该使用一个文件。

如果我运行我们的詹金斯构建中的所有测试，添加`-Denv=test`将按预期工作。但是，如果我只想在 Eclipse 中使用集成的 JUnit 运行器运行单个测试怎么办？

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(loader = WebContextLoader.class, locations = {"classpath:application-context.xml" })
public class SomeTest { 
```

有没有办法告诉我的测试它应该在加载 Spring 之前将系统属性“env”设置为“test”？因为 using`MethodInvokingFactoryBean`只会在之后出于某种原因设置它，即使我在加载我的属性文件之前设置它：

```
<bean id="systemPrereqs"
    class="org.springframework.beans.factory.config.MethodInvokingFactoryBean">
    <property name="targetObject" value="#{@systemProperties}" />
    <property name="targetMethod" value="putAll" />
    <property name="arguments">
        <!-- The new Properties -->
        <util:properties>
            <prop key="env">test</prop>
        </util:properties>
    </property>
</bean>

<bean
    class="org.springframework.web.context.support.ServletContextPropertyPlaceholderConfigurer">
    <property name="systemPropertiesModeName" value="SYSTEM_PROPERTIES_MODE_OVERRIDE" />
    <property name="searchContextAttributes" value="true" />
    <property name="contextOverride" value="true" />
    <property name="ignoreResourceNotFound" value="true" />
    <property name="locations">
        <list>
            <value>classpath:application.properties</value>
            <value>classpath:${env}.properties</value>
            <value>${config}</value>
        </list>
    </property>
</bean>

<bean id="managerDataSource"
    class="org.springframework.jdbc.datasource.DriverManagerDataSource">
    <property name="driverClassName" value="com.mysql.jdbc.Driver" />
    <property name="username">
        <value>${database.username}</value>
    </property>
    <property name="password">
        <value>${database.password}</value>
    </property>
    <property name="url">
        <value>${database.url}</value>
    </property>

</bean> 
```

使用在 application.properties、production.properties 和 test.properties 中定义的数据库属性。

重点是，当然，我想对所有环境使用相同的上下文文件，否则我可以告诉我的测试使用不同的上下文，我将 PropertyPlaceholder 属性“位置”设置为 test.properties ...但我想要我的测试也涵盖了我的上下文，以便尽早发现任何错误（我正在使用 spring-web-mvc 在我们的 web 应用程序上进行端到端测试，它加载了整个 web 应用程序，在那里提供了一些很好的反馈，并且我不想放弃它）。

到目前为止，我能看到的唯一方法可能是将 JUnit 运行器配置为包含一些系统属性设置参数，尽管我不知道该怎么做..

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-06-12T13:07:06.547

我现在正在解决完全相同的问题，并希望找到方法。您可以调用`System.setProperty()`测试用例的静态初始化程序。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-12-04T05:18:47.470

在 Eclipse 中，右键单击 JUnit 测试类，选择 Run As > Run Configurations...，然后转到 Arguments 选项卡，在 VM Arguments 下，添加系统属性条目，例如 -Dcatalina.base=C:\programs\ apache-tomcat-7.0.32

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-19T08:22:56.940

您可以尝试使用[`depends-on`](http://docs.spring.io/spring/docs/current/spring-framework-reference/html/beans.html#beans-factory-dependson)属性让调用 bean 的方法在其他人之前运行

# javascript - jsrender不在模板中显示函数返回

> ID：10997138
> 
> 赞同：0
> 
> 时间：2012-06-12T12:57:01.947
> 
> 标签：javascript, jquery, jsrender

我有两个返回简单字符串的函数。两者都已注册。

```
$.views.helpers({
    parseDate: function (jsonDate) {
        if (jsonDate != null) {
            var date = new Date(parseInt(jsonDate.substr(6)));
            var newDate = $.fullCalendar.formatDate(date, "MM/dd/yyyy");
            return newDate;
        }
    },
    renderPrimaryResource: function (PrimaryResource, LessonID) {
        debugger;
        $.ajax({
            url: "cl/lb",
            dataType: "json",
            data: { id: PrimaryResource.ResourceID },
            type: 'GET',
            async: false,
            success: function (data) {
                var thumbnailImage = data[1];
                return thumbnailImage;
            }
        });
    }

}); 
```

我的 jsrender 模板调用了这两个函数。解析日期函数被调用并按原样返回。第二个函数被调用并返回一些东西，但 jsrender 没有捡起它？不知道会发生什么，但它完全被忽略了。

```
<script id="LessonDetailTemplate" type="text/x-jsrender">
{{for lessons}}
    <div class="row lesson-block">
        <div class="span4">
            <h4>{{:LessonName}}</h4>
            <span><strong>Due on <span>{{:~parseDate(DueDate)}}</span>
            <br/>
            <p>{{:LessonDescription}}</p>
        </div>
        <div class="span4">
            <span">{{:~renderPrimaryResource(PrimaryResource, LessonID)}}</span>
        </div>
    </div>
{{/for}} 
```

任何人都知道为什么这不渲染？我唯一能想到的是 ajax 调用，但是在调试模板时，直到函数返回一些东西才会继续。所以我对正在发生的事情感到迷茫。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T13:34:42.350

回答以防有人偶然发现。问题实际上是ajax调用。不确定它到底是什么，但您不能从 ajax 调用的成功部分返回字符串。修改功能如下，工作正常。

```
renderPrimaryResource: function (PrimaryResource, LessonID) {
    debugger;
    $.ajax({
        url: "cl/lb",
        dataType: "json",
        data: { id: PrimaryResource.ResourceID },
        type: 'GET',
        async: false,
        success: function (data) {
            var thumbnailImage = data[1];
        }
    });
    if(thumbnailImage != null){
        return thumbnailImage;
    }
} 
```

# java - 如何从存储在列表中的对象中获取特定字段值的列表？

> ID：10997139
> 
> 赞同：53
> 
> 时间：2012-06-12T12:57:04.113
> 
> 标签：java, collections

假设我有一个包含两个字段的对象列表，`field1`并且`field2`都是 String 类型。

如果可能的话，我如何获得所有`field1`值的列表而不必遍历列表？

* * *

## 回答 #1

> 赞同：81
> 
> 时间：2017-02-07T14:41:35.147

幸运的是，您可以使用**[Java 8 - Streams做到这一点](https://www.tutorialspoint.com/java8/java8_streams.htm)**

假设您有一个名为**YourEntity的实体**

```
public class YourEntity {

    private String field1;
    private String field2;

    public YourEntity(String field1, String field2) {
        this.field1 = field1;
        this.field2 = field2;
    }

    public void setField1(String field1) {
        this.field1 = field1;
    }

    public void setField2(String field2) {
        this.field2 = field2;
    }

    public String getField1() {
        return field1;
    }

    public String getField2() {
        return field2;
    }
} 
```

使用以下命令声明您的**YourEntity**列表：

```
List<YourEntity> entities = Arrays.asList(new YourEntity("text1", "text2"), new YourEntity("text3", "text4")); 
```

您可以通过这种方式一次性提取**field1的列表：**

```
import java.util.stream.Collectors;

List<String> field1List = entities.stream().map(YourEntity::getField1).collect(Collectors.toList()); 
```

或者以这种方式

```
import java.util.stream.Collectors;

List<String> field1List = entities.stream().map(urEntity -> urEntity.getField1()).collect(Collectors.toList()); 
```

您也可以使用 java 8 打印所有项目 :)

```
field1List.forEach(System.out::println); 
```

输出

```
text1
text3 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-06-12T13:01:24.363

尝试这个：

```
List<Entity> entities = getEntities();
List<Integer> listIntegerEntities = Lambda.extract(entities, Lambda.on(Entity.class).getFielf1()); 
```

LambdaJ 允许在没有显式循环的情况下访问集合，因此您无需使用更多代码行来自己迭代列表，而是让 LambdaJ 来做。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-06-12T13:02:01.743

对象是对内存地址的引用。然后，此对象的字段是对其他内存地址的其他引用。因此，对象列表是引用列表。因此，列表不可能直接访问对象字段（引用给出的引用）。最简洁的答案是不。

注意：无论如何，您都会找到一个可以执行您想要的操作的 API，它仍然在内部循环。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-06-12T13:07:11.307

## 要看...

...您的问题是否涉及`avoiding iterating over the collection`：

*   *在呼叫点易于实施*
*   **或者** *就算法复杂度而言*。

具体来说，你的意思是：

*   *您不想自己输入迭代构造*（只需使用便利库），
*   *或者您实际上想要在 O(1) 中自动返回元素而无需处理它们*（并且具有完美访问权限）的东西？

有关解决方案和选项，请参见下文。

* * *

## 使用便利库

如果它是第一个，那么请查看 Google Guava、LambdaJ、FunctionalJava 或其他实现基本功能结构的库，并允许您在几个富有表现力的调用中做您想做的事情。但请记住，它们会按照罐头上的说明进行操作：它们将过滤、收集或转换集合，并将迭代其元素以执行此操作。

例如：

*   [谷歌番石榴](http://code.google.com/p/guava-libraries/)：

    ```
    Set<String> strings = buildSetStrings();  
    Collection<String> filteredStrings =
        Collections2.filter(strings, Predicates.containsPattern("^J")); 
    ```

*   [函数式Java](http://functionaljava.org/)：

    ```
    Array<Integer> a = array(97, 44, 67, 3, 22, 90, 1, 77, 98, 1078, 6, 64, 6, 79, 42);
    Array<Integer> b = a.filter(even); 
    ```

*   [拉姆达J](http://code.google.com/p/lambdaj/)：

    ```
    List<Integer> biggerThan3 = filter(greaterThan(3), asList(1, 2, 3, 4, 5)); 
    ```

* * *

# 完美访问

如果是第二个，**这是不可能的**，**除非**您从一开始就构建所有内容，以便**您的对象应由自定义集合类管理，该集合类将根据插入时的字段值索引您的对象**。

它会将它们保存在由所述值索引的存储桶中，以便您随时可以将它们作为列表检索或按需设置。

正如 dounyy 回答下面的评论中提到的那样，设计这样一个自定义集合可能会影响它接受的元素的 API（很可能是通过定义用于元素类型的超级接口），或者需要相当复杂的实现如果您希望此集合是通用的，则动态解析成员（很可能通过使用反射）。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-06-12T13:02:11.807

Java 作为一种语言和 JDK 库都不能满足您的需求。您可以使用[LambdaJ](http://code.google.com/p/lambdaj/)或等待预计包含 lambda 表达式的 Java 8。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2014-01-21T17:27:09.570

古老的问题，但我在寻找是否可以改进类似解决方案时遇到了它。

您可以在`List<String>`不创建充实的情况下实现接口`ArrayList<String>`，因此不会迭代父对象。

```
final List<Entity> entities = getEntities()
final List<String> field1 = new AbstractList() {
    public String get(int index) {
        return entities.get(index).getField1();
    }
    public int size() {
        return entities.size();
    }
} 
```

这为您提供了一个列表，而无需遍历父对象。

对派生`List<String>`的随机访问将与对底层的随机访问一样昂贵`List<Entity>`；如果您使用的`List<Entity>`是不提供快速随机访问的实现，您可能需要跳过几个环节（即实现更多的方法`List<String>`。但这应该适用于您需要轻量级的 99% 的情况适配器。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2018-10-29T11:45:10.703

让对象属于以下类。

```
public class Bike {

    String bikeModel;
    Int price;
} 
```

现在有一个名为bikeList的自行车列表，类型为List

所以现在我们想要上面列表中所有自行车的自行车型号列表。

```
bikeList.map{ Bike b -> b.bikeModel }.toCollection(arrayListOf()) 
```

返回bikeList中所有自行车对象的第一个字段的数组列表

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-04-05T12:50:49.197

是的！！这是可能的。但是你必须做一些歪曲的工作。

1.  创建一个包含所需变量的内部类。例如：这里将使用 2 个变量。（TNAME 和 TABTYPE）。

    ```
     public class storeTables {
            private String tablename = "";
            private String tabletype = "";
            public storeTables(String a, String b)
            {
                this.setTablename(a);
                this.setTabletype(b);
            }
            public void setTablename(String tablename) {
                this.tablename = tablename;
            }
            public String getTablename() {
                return tablename;
            }
            public void setTabletype(String tabletype) {
                this.tabletype = tabletype;
            }
            public String getTabletype() {
                return tabletype;
            }} 
    ```

2.  创建上面创建的内部类的List，不要忘记封装它。

    ```
    private List<storeTables> objlist= new ArrayList<storeTables>(); 
    ```

3.  获取作为内部类对象存储到列表中的值。

    ```
    String Query="SELECT * FROM TAB";
    while(rs.next())
    {
    String tname=rs.getString("TNAME");
    String tabtype=rs.getString("TABTYPE");
    getObjlist().add(new storeTables(tname,tabtype));
            } 
    ```

4.  创建一个 DATAMODEL 并将列表推送到数据模型

    ```
    private DataModel selectableItems= new ListDataModel(objlist); 
    ```

5.  将扭曲的数据放到另一个列表中。

    ```
    List<storeTables> items= (List<storeTables>)selectableItems.getWrappedData(); 
    ```

6.  最后！！！打印数据。

    ```
    for(storeTables item:items){
    System.out.println(item.getTablename());
        } 
    ```

田田！！！！它只会打印表名而不是标签类型；）相信在java中没有什么是不可能的任何疑问！

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-03-12T03:37:09.507

在不同的列表中添加记录的值，并使用一个或两个迭代器简单地打印单独的值。如下所示：

```
rs=st.executeQuery("select * from stu");
List data=new ArrayList();
List data1=new ArrayList();
while(rs.next())
{
   data.add(rs.getString(1));
   data1.add(rs.getString(2));
}
Iterator it=data.iterator();
Iterator it1=data1.iterator();
while(it1.hasNext())
{
   System.out.println(" "+it.next()+"  "+it1.next());
} 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-06-12T13:01:15.370

不，你不能。您必须遍历整个列表并从每个对象中获取每个“field1”值。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2012-06-12T13:06:58.820

没有迭代这是不可能的。你可以以某种方式减少迭代，但这是必须的。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2012-06-12T13:04:14.383

也许你可以用这种方式创建一个 hashmap：

```
HashMap<String, ArrayList<Object>> map; 
```

关键是字段。这样做，当您要求 HashMap 检索与您想要的字段对应的对象时，该映射将返回一个 ArrayList，其中包含具有该字段的所有元素。

# django - django ajax 和非 ajax 模板

> ID：10997143
> 
> 赞同：0
> 
> 时间：2012-06-12T12:57:16.590
> 
> 标签：django

我有一个 django 模板 - 通常通过标准获取请求加载的模板。但是，我也想将此模板用于 ajax 获取。

我知道我可以使用 request.is_ajax 来区分调用，从而确定我应该服务*哪个*页面 - 我不知道如何避免复制。

问题是，页面扩展了一个基本的 htm 文件——一个包含所有花里胡哨的文件（你知道，标题、菜单等）。我不希望它出现在 ajax 页面中！我希望页面出现，*而不是*扩展基本 htm

我只能认为也许我有两个文件 - 一个只有内容（ajax 版本），另一个扩展基本 htm，并以某种方式导入（不扩展）第一个文件......

任何想法我将如何做上述，或者我打算如何解决这个问题？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-12T13:09:08.017

除了@Daniel 响应，如果您有上下文处理器，您可以使用[yesno](https://docs.djangoproject.com/en/dev/ref/templates/builtins/#std%3atemplatefilter-yesno)模板过滤器，例如`request`

```
{% extends request.is_ajax|yesno:"base_ajax.html,base.html" %} 
```

此行应该在您用于页面和 ajax 内容的每个模板中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-12T13:03:15.943

的值`extends`可以是变量。因此，您只需定义一个`base_ajax`省略“花里胡哨”的 html，并在您的视图中发送`base`或发送`base_ajax`到模板上下文，具体取决于。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T13:04:51.583

**解决方案 1：**

**base.html：**

```
{% block menu %}
menu goes here
{% endblock menu %} 
```

**非ajax.html：**

```
{% extends base.html %} 
```

**ajax.html：**

```
{% extends base.html %}

{% block menu %}
{% end block %} 
```

**解决方案2：**

使用相同的 base.html

**ajax 和非 ajax.html：**

```
{% extends base.html %}
{% ifequal ajax %}
{% block menu %}
{% end block %}
{% endifequal %} 
```

# c# - 将按钮背景/图像设置为动画 gif

> ID：10997146
> 
> 赞同：-1
> 
> 时间：2012-06-12T12:57:25.413
> 
> 标签：c#, .net, button, controls, animated-gif

我有一个 .gif 文件，我希望将其用作按钮的背景图像。我想这样做的主要原因（我知道你们中的一些人会想知道我为什么要这样做）是因为，一个按钮与一个类的实例相关，我想监视这些类。当一个类（因此按钮）进入“警报”状态时，我希望我使用这些动画 gif。我试过了;

```
mainUI.Controls["btn" + device.deviceButtonNumber].BackgroundImage = (System.Drawing.Image)Properties.Resources.red_orange; 
```

但据我了解，.BackgroundImage 不支持动画 gif。我在整个 stackoverflow 中尝试了一些建议，但其中没有一个似乎对我有用，例如将 BackgroundImageLayout 设置为 center 等。

我想作为最后的手段，我可​​以让它手动循环浏览图像，就像它是一个 gif 一样，但这会产生更多的工作，我想让事情变得简单。有什么建议么？

编辑：对不起，忘了添加，这是在 Winforms 中。

编辑2：

例如。当我动态创建按钮时，像这样；

```
 Button btnAdd = new Button();
  btnAdd.Text = mDevices[i].deviceDescription;
  btnAdd.Location = new Point(mDevices[i].deviceXPos.Value, mDevices[i].deviceYPos.Value); 
```

我仍然可以访问：

```
 btnAdd.Image  <- note i can access image. 
```

然后当我稍后从另一个线程修改它们时，我发现它们是这样的；

```
 mainUI.Controls["btn" + device.deviceButtonNumber].text = blah blah
 mainUI.Controls["btn" + device.deviceButtonNumber].Location = blah blah 
```

但是我无法访问；

```
 mainUI.Controls["btn" + device.deviceButtonNumber].Image 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T13:12:54.653

```
/// <summary>
        /// Required method for Designer support - do not modify
        /// the contents of this method with the code editor.
        /// </summary>
        private void InitializeComponent()
        {
            System.ComponentModel.ComponentResourceManager resources = new System.ComponentModel.ComponentResourceManager(typeof(Form1));
            this.button1 = new System.Windows.Forms.Button();
            this.SuspendLayout();

            //  this.button1.Image = new Bitmap(@"C:\images\dance.gif");

            // if you import the local resource 
            this.button1.Image = ((System.Drawing.Image)(resources.GetObject("button1.Image")));
            this.button1.ImageAlign = System.Drawing.ContentAlignment.TopRight;
            this.button1.Location = new System.Drawing.Point(109, 73);
            this.button1.Name = "button1";
            this.button1.Size = new System.Drawing.Size(523, 437);
            this.button1.TabIndex = 1;
            this.button1.TextAlign = System.Drawing.ContentAlignment.MiddleLeft;
            this.button1.UseVisualStyleBackColor = true;
            // 
            // Form1
            // 
            this.AutoScaleDimensions = new System.Drawing.SizeF(8F, 17F);
            this.AutoScaleMode = System.Windows.Forms.AutoScaleMode.Font;
            this.ClientSize = new System.Drawing.Size(807, 640);
            this.Controls.Add(this.button1);
            this.Font = new System.Drawing.Font("Tahoma", 8.25F, System.Drawing.FontStyle.Regular, System.Drawing.GraphicsUnit.Point, ((byte)(0)));
            this.Name = "Form1";
            this.Text = "Image In Button Control";
            this.ResumeLayout(false);

        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T13:07:26.700

我建议使用 a`PictureBox`而不是`Button`，`PictureBox`支持`.gif`图像和`click`事件

# axapta - 从未授权的表创建视图 Dynamics AX 2012

> ID：10997147
> 
> 赞同：1
> 
> 时间：2012-06-12T12:57:26.367
> 
> 标签：axapta, x++, dynamics-ax-2012

我只是在关注一个非常简单的微软教程，主题**是从表中创建视图**：http : [//msdn.microsoft.com/EN-US/library/hh272116](http://msdn.microsoft.com/EN-US/library/hh272116)

我创建了名为**TITO_SomeView**的视图。我使用了**DirAddressBookParty**表，我无法打开视图并且收到以下消息：

**“您无权访问表 'Some view' (TITO_SomeView)。请联系您的系统管理员。”**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-13T08:39:55.613

是不是您没有在“字段”下分配任何字段。

**保存**并**编译**后，就可以打开了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T08:13:17.333

在我们完成从 AX 2009 到 AX 2012 的升级后，当我们尝试打开一些具有 PriceDisc 配置密钥的表时，它会提示错误“您无权访问表‘价格盘销售政策参数’”

发生这种情况是因为在升级期间禁用了配置密钥 (PriceDisc)。

解决方案是从以下位置重新启用它：`Administration > Setup > System > License Configuration`

然后它会同步相关的表。再次尝试打开表单/表格，在这种情况下它是`Price disc sales policy parameters`.

# ios - 通过从文件中拖动图像将图像添加到 xCode

> ID：10997148
> 
> 赞同：20
> 
> 时间：2012-06-12T12:57:29.013
> 
> 标签：ios, iphone, xcode, ios5, xcode4

我在 xCode 4.2 中添加图像时遇到问题。当我通过从桌面拖动它来将其插入时`UIimageview`，`ViewController`它不起作用。

有没有其他可能的方法来添加图像？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-06-12T13:03:05.580

通过单击文件->“将文件添加到...”将图像添加到您的项目。

然后在 ImageView 属性中选择图像（Utilities -> Attributes Inspector）。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-06-12T13:56:14.230

您不能将图像从桌面添加到`UIimageView`，您只能将图像（拖动）添加到项目文件夹中，然后选择名称图像到`UIimageView`属性（检查器）中。

如何做到这一点的教程：http: [//conecode.com/news/2011/06/ios-tutorial-creating-an-image-view-uiimageview/](http://conecode.com/news/2011/06/ios-tutorial-creating-an-image-view-uiimageview/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-08-07T15:26:18.273

对于 xCode 10，首先您需要在 assetsCatalogue 中添加图像，然后键入：

```
let imageView = UIImageView(image: #imageLiteral(resourceName: "type the name of your image here...")) 
```

对于初学者，是我们即将创建`let imageView`的对象的名称。`UIImageView`

将图像嵌入`viewControler`文件的示例如下所示：

```
import UIKit

class TutorialViewCotroller: UIViewController {
    override func viewDidLoad() {
        super.viewDidLoad()
        let imageView = UIImageView(image: #imageLiteral(resourceName: "intoImage"))
        view.addSubview(imageView)
    }
} 
```

请注意，我没有为图像文件名使用任何扩展名，因为在我的情况下它是一组图像。

# android - Android NDK #define 问题

> ID：10997153
> 
> 赞同：8
> 
> 时间：2012-06-12T12:57:38.140
> 
> 标签：android, android-ndk, c-preprocessor

当我将 #define 添加到 main.cpp 或从 main.cpp 调用的头文件之一时，它似乎没有在其他文件中定义。

例如，在 main.cpp 中，我可能会执行以下操作：

```
#define TEST_FOO 1 
```

然后在我的其他文件之一中，例如 secondfile.cpp，TEST_FOO 被忽略，就好像它从未定义过一样：

```
#if TEST_FOO
// do something <- this never gets reached
#endif 
```

即使在 Android.mk 文件中我将 secondfile.cpp 放在 main.cpp 之后：

```
LOCAL_SRC_FILES := main.cpp \
                   secondfile.cpp 
```

有没有办法在实际代码中 #define Android NDK 中的值？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-12T13:00:29.970

那是对的。编译器一次只知道一个源文件。当您编译`secondfile.cpp`时，它完全忘记了您在`main.cpp`.

如果您希望 a`#define`在所有源文件中可见，则需要将其放在所有文件包含的标头中。或者，在命令行上传递它；你可以通过在你的`Android.mk`：

```
LOCAL_CPPFLAGS := -DTEST_FOO=1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T13:00:52.873

将它放在头文件中，并将头文件包含在您希望定义它的每个 .c 文件中。

# mysql - 在 MySQL 中查找换行符和回车符 (\r\n)

> ID：10997159
> 
> 赞同：35
> 
> 时间：2012-06-12T12:58:01.330
> 
> 标签：mysql, regex, select, carriage-return, line-breaks

我似乎无法在互联网上找到任何有关此的信息（或者我只是没有寻找正确的方向）。

我的 MySQL 数据库中有一些字段包含回车和换行符 \r\n 。

有没有人可以告诉我如何使用查询找到它们？

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2012-06-12T13:00:42.077

```
SELECT * FROM mytable WHERE mycolumn REGEXP "\r\n"; 
```

查找`mytable`其中`mycolumn`包含`\r\n`序列的所有记录。

# javascript - 如何以编程方式单击从另一个页面加载的按钮？

> ID：10997163
> 
> 赞同：1
> 
> 时间：2012-06-12T12:58:06.740
> 
> 标签：javascript, html, vba, vbscript, hta

```
<html>
<head>
<title>My HTML application</title>
<HTA:APPLICATION 
    id="frames" 
    border="thin" 
    caption="yes" 
    icon="http://www.google.com/favicon.ico" 
    showintaskbar="yes" 
    singleinstance="yes" 
    sysmenu="yes" 
    navigable="yes" 
    contextmenu="no" 
    innerborder="no" 
    scroll="auto" 
    scrollflat="yes" 
    selection="yes" 
    windowstate="normal" />

    </head> 
    <frameset rows="60px, *"> 
        <frame src="topo.htm" name="topo" id="topo" application="yes" /> 
        <frame src="http://localhost/nph-psf.exe?HOSTID=AD&ALIAS=" name="conteudo" id="psyncLink" application="yes" /> 
    </frameset> 
</html> 
```

在我的框架集中，我有一个网页加载。我无法编辑显示的代码

```
http://localhost/nph-psf.exe?HOSTID=AD&ALIAS= 
```

该页面有一个按钮，需要单击才能继续。我想使用我的 HTA 应用程序自动执行此操作，以便在页面加载时为用户自动单击该按钮。

代码可以是 VBScript 或 JavaScript。关键是要以编程方式单击按钮，这样用户就不必这样做。

我要单击的按钮具有以下 HTML 代码行

```
<INPUT border=0 type=image alt="Use a password" name="SUBMIT-password.pss" src="docs/pics/en-us/useapassword_button.jpg"> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T14:07:34.393

单程;

```
<script type="text/javascript">
function doClick(fr) {
    var btn = fr.contentWindow.document.getElementsByName("SUBMIT-password.pss");
    if (btn.length === 0) {
        alert("no button!");
        return;
    } else {
        btn[0].click();
    }
}
</script>
<frameset rows="60px, *"> 
    <frame src="topo.htm" name="topo" id="topo" application="yes" /> 
    <frame src="http://localhost/nph-psf.exe?HOSTID=AD&ALIAS=" name="conteudo" id="psyncLink" application="yes" onload="doClick(this);"/> 
    </frameset> 
</html> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T13:45:26.760

你可以试试这个javascript。由于元素没有 ID，我们必须通过返回数组的 Name 来获取它。您也可以通过标记名获取，但我不确定其他页面上会有多少输入。

```
try{
     window.frames[1].document.getElementsByName('SUBMIT-password.pss')[0].click();
}catch(Exception){
    alert('hi');
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T13:23:58.690

如果您有权访问正在加载的页面，则可以模拟单击按钮。我认为最简单的方法是 jQuery click。检查这个：[http](http://api.jquery.com/click/) ://api.jquery.com/click/ 。

在页面末尾添加一个小脚本，单击它应该没问题。

如果您没有访问权限...如果页面加载到 iframe 中，您仍然可以操作 dom 以选择按钮并单击它，但会有点困难。

# ios5 - RestKit 超时被忽略

> ID：10997169
> 
> 赞同：7
> 
> 时间：2012-06-12T12:58:32.117
> 
> 标签：ios5, timeout, restkit

我正在从我的 iOS 应用程序调用 Web 服务，最多可能需要四分钟才能返回。我正在使用 RestKit 来调用和加载对象。我发现当请求需要很长时间时，我会在大约 60 秒后收到超时错误。我尝试将 timeoutInterval 设置为荒谬的数量，但它仍然在 ~60 之后超时。

```
RKObjectManager* objectManager = [RKObjectManager objectManagerWithBaseURL:HOSTNAME];

objectManager.client.requestQueue.showsNetworkActivityIndicatorWhenBusy = YES;
objectManager.client.disableCertificateValidation = YES;

//timeout
objectManager.client.timeoutInterval = 1000; 
```

这是对服务的调用：

```
- (void)loadData 
{

NSString *uid = [self retrieveFromUserDefaults:@"login_preference"];
NSString *pwd = [self retrieveFromUserDefaults:@"password_preference"];

if([uid isEqualToString:@""] || [pwd isEqualToString:@""]){
    [self stopSpinner];
    [self enableUserInterface:YES];
    UIAlertView* alert = [[UIAlertView alloc] initWithTitle:@"Missing Settings" 
                                                    message:@"Please enter your login information in the settings."
                                                   delegate:nil 
                                          cancelButtonTitle:@"OK" otherButtonTitles:nil];
    [alert show];
    return;

}

RKObjectManager* objectManager = [RKObjectManager sharedManager];
NSDictionary *params = [NSDictionary dictionaryWithObjects: 
                        [NSArray arrayWithObjects:uid, pwd, nil] 
                                                   forKeys:[NSArray arrayWithObjects:@"uid", @"pwd", nil]]; 

// Load the object model via RestKit    
[objectManager loadObjectsAtResourcePath:[@"/synchData" appendQueryParams:params] delegate:self]; 
```

}

我正在后台线程中调用 Web 服务 - 该设计中是否存在可能导致问题的东西？我无法想象什么，比如 iOS 不允许后台线程运行超过 60 秒？我只是不知道是什么问题。

超时是从服务器获得响应所需的时间，还是从服务器获得整个响应所需的时间？我正在返回一个可能非常大的 json 响应 - 我需要在超时限制内返回整个内容，还是只需要在限制内从服务器获取任何响应？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T21:18:33.933

如果我理解您的问题，解决方案将是：

```
- (void)request:(RKRequest *)request didFailLoadWithError:(NSError *)error 
```

因此，当您遇到超时间隔问题时，它将被此方法捕获。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T17:12:11.733

我有一个类似的问题，委托方法`requestDidTimeout:(RKRequest*)request`永远不会被调用。无论我是在 RKRequest 还是 RKClient 上设置超时。

警告：在请求上设置超时时，我看到请求不遵守设置的超时，除非我也调用`[requestObject createTimeOutTimer]`.

但是，我在您的实现中注意到的是，您使用 1000 表示 NSTimeInterval：您的意思是 1000 秒超时吗？如果您的意思是一秒 = 1000 毫秒，请更改为 1。

RestKit 的默认超时是 120 秒，所以很可能这是 NSURLConnection 超时。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-05-14T20:16:23.070

长期以来，Restkit 库（版本 ~= .4）只支持`timeoutInterval`在一个地方添加。

```
/**
An optional timeout interval within which the request should be cancelled.
This is passed along to RKRequest if set.  If it isn't set, it will default
to RKRequest's default timeoutInterval.
*Default*: Falls through to RKRequest's timeoutInterval
*/
@property (nonatomic, assign) NSTimeInterval timeoutInterval; 
```

在 RKResponseLoader.h

```
/**
The timeout interval, in seconds, to wait for a response to load.
The default value is 4 seconds.
@see [RKTestResponseLoader waitForResponse]
*/
@property (nonatomic, assign) NSTimeInterval timeout; 
```

# c# - 计算查询中的总行数

> ID：10997171
> 
> 赞同：1
> 
> 时间：2012-06-12T12:58:43.727
> 
> 标签：c#, asp.net, sql, sql-server-2008, ibatis

我有一个 SqlServer`SELECT`

```
DECLARE @offset INT;
DECLARE @limit INT;

WITH cte
     AS (SELECT t.*,
                Row_number() OVER (ORDER BY Id) AS RowNum
         FROM   (SELECT *
                 FROM   Table1
                 UNION
                 SELECT *
                 FROM   Table2) t)
SELECT *
FROM   cte
WHERE  RowNum BETWEEN @offset AND @offset + @limit 
```

如果没有 WHERE 条件，我如何知道限制的总行数`RowNum BETWEEN @offset AND @offset + @limit`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T13:03:46.190

使用逆行技巧

```
Row_number() OVER (ORDER BY Id asc) AS RowNum,
Row_number() OVER (ORDER BY Id desc) AS InverseRowNum, 
```

然后 (RowNum + InverseRowNum) - 1 = 总行数

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-12T13:02:03.130

您可以将 count(*) over() 添加到 cte：

```
WITH cte
     AS (SELECT t.*,
                Row_number() OVER (ORDER BY Id) AS RowNum,
                count(*) over() as Cnt
         FROM   (SELECT *
                 FROM   Table1
                 UNION
                 SELECT *
                 FROM   Table2) t)
SELECT *
FROM   cte
WHERE  RowNum BETWEEN @offset AND @offset + @limit 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-10-15T06:46:23.317

将结果的计数视为另一个 CTE，并将其与记录集单独返回。不完美，但应该符合你想要的。

```
DECLARE @offset INT;
DECLARE @limit INT;

;WITH cte
 AS (SELECT t.*,
            Row_number() OVER (ORDER BY Id) AS RowNum
     FROM   (SELECT *
             FROM   Table1
             UNION
             SELECT *
             FROM   Table2) t)
, total_cte as (
       select count(1) total_count from cte
)
SELECT cte.*, total_count
FROM   cte, total_cte
WHERE  RowNum BETWEEN @offset AND @offset + @limit 
```

# c# - 修饰符 async 对此项无效

> ID：10997174
> 
> 赞同：3
> 
> 时间：2012-06-12T12:58:47.123
> 
> 标签：c#, .net, io, windows-8, microsoft-metro

*这似乎与数百个具有相同错误的其他问题的重复。我查看了所有这些，发现它们是无关的。*

我正在制作一个小笔记应用程序，并试图从目录中读取文件。按照 MSDN 示例，我有以下代码，但它给了我一个错误：

* * *

> 错误 1 ​​修饰符 'async' 对此项无效 C:\Users\Jase\documents\visual studio 2012\Projects\AppNameHere\AppNameHere\DataModel\AppNameHereDataSource.cs 192 9 AppNameHere

* * *

我的代码是：

```
 async public NotesDataSource()
    {
        StorageFolder documentsFolder = KnownFolders.DocumentsLibrary;
        StringBuilder outputText = new StringBuilder();

        IReadOnlyList<StorageFile> fileList =
            await documentsFolder.GetFilesAsync();
        outputText.AppendLine("Files:");

        foreach (StorageFile file in fileList)
        {
            if (file.FileType == "txt")
            {
                outputText.Append(file.Name + "\n");
            }
        }
        // lots of irrelevant code removed.
    } 
```

* * *

我不明白这里发生了什么。我跟随一切到一个“T”。有人可以帮忙吗？

谢谢！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-12T13:04:54.087

您的方法签名不正确。看它：

```
async public NotesDataSource() 
```

首先，`async`必须*在*访问修饰符 IIRC 之后。

其次，要么你试图创建一个异步构造函数（你不能这样做），要么你试图编写一个没有返回类型的方法（这同样是无效的）。

试试这个：

```
public async Task NotesDataSource() 
```

那就是如果你的意思是它是一种方法。如果您想*有效地*创建一个异步构造函数（或接近它的东西），您必须使用异步静态方法：

```
public static async Task<NotesDataSource> CreateInstance()
{
    // Do async stuff here which fetches all the necessary data...

    return new NotesDataSource(...);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T13:03:27.513

我认为你需要放置`async` *在* `public`：

```
public async NotesDataSource() 
{
    //your code here
} 
```

# asp.net - 在 IISExpress 中将特定文件映射到 ASP.NET

> ID：10997175
> 
> 赞同：0
> 
> 时间：2012-06-12T12:58:49.793
> 
> 标签：asp.net, iis, iis-express

是否可以在 IISExpress 中将特定文件名和扩展名映射到 ASP.NET（通过 web.config）？

我需要 ASP.NET 来处理对 opensearch.xml 的请求。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T15:15:58.183

解决方案是创建一个处理程序来将所需的路径映射到 MvcHttpHandler：

```
<handlers>
  <add name="OpenSearchHandler" 
       path="opensearch.xml" 
       verb="GET" 
       type="System.Web.Mvc.MvcHttpHandler"/>
</handlers> 
```

# google-docs - 谷歌应用程序脚本新的符号服务因doPost而失败

> ID：10997176
> 
> 赞同：2
> 
> 时间：2012-06-12T12:58:50.390
> 
> 标签：google-docs, google-apps-script

我测试了简单的示例[https://developers.google.com/apps-script/class_fileupload?hl=es](https://developers.google.com/apps-script/class_fileupload?hl=es) 使用应用程序脚本上传文件。

我使用了两个不同的电子表格，但错误是相同的。我剪切并粘贴了示例。doGet 似乎运行正常，但是当按下提交按钮时，会出现错误消息“发生意外错误”。

好吧，我发现问题是...... url 调用：发布系统说现在你使用这种格式：https://docs.google.com/macros/s/[ID service]/exec 但是如果你改变通过旧格式 http://docs.google.com/macros/exec?service=[ID service] doGet 和 doPost 运行良好。

我不知道发生了什么事。为什么新的应用程序脚本发布系统以一种似乎无法正常工作的格式出现（https://docs.google.com/macros/s/[ID service]/exec）。

可能，这是个问题。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T00:14:44.420

旧的 URL 格式不适用于 Chrome 浏览器版本 24.0.1312.57。在 Firefox 12.0 中工作正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T20:47:07.277

我可以复制这个问题，并且我已经打开了一个[错误](http://code.google.com/p/google-apps-script-issues/issues/detail?id=1403)来跟踪它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T08:45:45.127

该错误已解决。

Google 已更改应用程序发布 (GAS) 系统和编辑器/调试器界面。

问候，

# ruby-on-rails - 在 AJAX 会话中将视图参数存储在哪里？

> ID：10997185
> 
> 赞同：1
> 
> 时间：2012-06-12T12:59:27.687
> 
> 标签：ruby-on-rails, ajax

在非 AJAX 网络应用程序中，URL 将包含我的视图参数（例如 mysite?page=2&sort=name）。在 AJAX 应用程序中，我在哪里存储相同的信息？在 Session 对象中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T14:07:57.593

我假设您想知道如何通过 AJAX 调用传递其他参数。这实际上取决于您如何制定 AJAX 调用。

如果你使用的是内置的 Rails 助手，你可以在`url_for`助手中传递额外的参数。例如，假设您有一条`products`路线，并且您想要 AJAX 加载所有产品的列表。`link_to`助手可能看起来像这样（Rails 3.2 ）

```
link_to "All Products", products_path(:page => 2, :sort => "name"), :remote => true 
```

另一方面，如果您使用的是[jQuery](http://jquery.com/)`data`之类的 JavaScript 框架，则可以使用该选项传递其他参数。例如

```
$.ajax({
    url: "/products",
    data: {
        page: 2,
        sort: "name"
    },
    success: function(data) {
        // handle success
    },
    failure: function(data) {
        // handle failure
    }
 }); 
```

存储这些数据（页面、排序等）也可以通过多种方式完成。最简单的方法是将这些数据存储在 JavaScript 变量中。

```
window.page = 2;
window.sort = "name"; 
```

另一种解决方案是将此信息存储`data`在页面上特定 DOM 元素的属性中。例如，如果您有一个`<div id='products'>`包含分页、排序产品的列表，您可以像这样存储信息（jQuery）

```
$("#products").data("page", 2);
$("#products").data("sort", "name"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T13:42:26.173

一般来说，您不会在 Rails 中构造您对 AJAX 的不同请求。您只需将`:remote => true`属性添加到您的链接或表单，然后使控制器操作 respond_to js

```
respond_to do |format|
  format.js
end 
```

然后将 your_action.js.erb 放入您的视图中并编写以适当方式更新 dom 的 javascript。

# doctrine - Zend Doctrine 查询内部连接

> ID：10997186
> 
> 赞同：0
> 
> 时间：2012-06-12T12:59:29.037
> 
> 标签：doctrine, doctrine-query

这是很棒的网站！很多优秀的程序员。但我什至无法让一个简单的学说加入工作：

```
$query = Doctrine_Query::create()
        ->from("StaffIndividualHasAddressAddress sa")
        ->innerJoin("sa.AddressAddress aa"); 
```

总是与：

消息：未知关系别名地址地址

我的“别名”不行吗？我的 yaml 似乎非常好......

如果查询没有问题，还有什么可能会弄乱这个过程？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T13:38:33.160

您可能需要指定连接属性。

```
 $query = Doctrine_Query::create()
        ->from("StaffIndividualHasAddressAddress sa")
        ->innerJoin("sa.AddressAddress aa WITH aa.AdressAdress != ? ",$where); 
```

# android - 在 Android 上使用 Phonegap ChildBrowser 插件在 App PDF 中查看

> ID：10997195
> 
> 赞同：2
> 
> 时间：2012-06-12T12:59:56.687
> 
> 标签：android, cordova, childbrowser

我已经安装了 childbrowser 插件并在我的 Phonegap 应用程序上工作。适用于网站，但我想查看已存储在我的资产文件中的 PDF。

我拥有的pdf链接目前是

```
<a href="#" onClick="window.plugins.childBrowser.showWebPage('file:///android_asset/pdf/Starting-Out_master.pdf');">Test</a> 
```

但是当我这样做时，它会尝试导航到

```
http://file://android_asset/pdf/Starting-Out_master.pdf 
```

如何更改链接以查看预打包的 PDF？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T15:35:26.787

您无法使用 ChildBrowser 打开 PDF。您将需要使用 PDF 查看器插件。这是一个链接，对不起，它是意大利语的，你必须使用谷歌翻译或类似的东西。

[http://www.giovesoft.com/2011/08/download-and-open-pdf-with-phonegap.html](http://www.giovesoft.com/2011/08/download-and-open-pdf-with-phonegap.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T20:35:08.533

使用[WebIntent 插件](https://github.com/phonegap/phonegap-plugins/tree/master/Android/WebIntent)也可以。大多数（但不是全部）Android 手机都内置了 PDF 查看器，因此让 Android 操作系统决定手机上安装的用于处理 PDF 文件的应用程序在大多数情况下应该可以工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T20:38:35.693

您可以获取 pdf 文件 URI 并使用 childBrowser 插件的 openExternal 打开它，并让本机浏览器处理 PDF。

# xslt - 如何按字段ID拆分文档？

> ID：10997199
> 
> 赞同：1
> 
> 时间：2012-06-12T13:00:01.320
> 
> 标签：xslt

请告诉我如何按字段 id 拆分文档。例如，文档编号保存在 line 中`[@id=0]/field[@id=1]`，`line[@id=0]/field[@id=2]`in`line[@id>0]`是保存的代码和值。

XML 示例：

```
<document>
    <sheet id="0" name="Sheet1">
        <line id="0">
            <field id="0"><![CDATA[Code]]></field>
            <field id="1"><![CDATA[01]]></field>
            <field id="2"><![CDATA[02]]></field>
        </line>
        <line id="1">
            <field id="0"><![CDATA[9772]]></field>
            <field id="1"><![CDATA[9.0]]></field>
            <field id="2"><![CDATA[5.0]]></field>
        </line>
        <line id="5">
            <field id="0"><![CDATA[9771]]></field>
            <field id="1"><![CDATA[1.0]]></field>
            <field id="2"/>
        </line>
        <line id="1">
            <field id="0"><![CDATA[9773]]></field>
            <field id="1"><![CDATA[8.0]]></field>
            <field id="2"><![CDATA[4.0]]></field>
        </line>
    </sheet>    
</document> 
```

如果需要结果：

```
<documents>
    <document>
        <header>
            <number>01</number>
        </heder>
        <line>
            <line-item>
                <lineNumber>1</lineNumber>
                <Code>9772</Code>
                <value>9.0</value>
            </line-item>
            <line-item>
                <lineNumber>2</lineNumber>
                <Code>9771</Code>
                <value>1.0</value>
            </line-item>
            <line-item>
                <lineNumber>3</lineNumber>
                <Code>9773</Code>
                <value>8.0</value>
            </line-item>
        </line>
    </document>
    <document>
        <header>
            <number>02</number>
        </heder>
        <line>
            <line-item>
                <lineNumber>1</lineNumber>
                <Code>9772</Code>
                <value>5.0</value>
            </line-item>
            <line-item>
                <lineNumber>2</lineNumber>
                <Code>9773</Code>
                <value>4.0</value>
            </line-item>
        </line>
    </document>
</documents> 
```

转换应该适用于 xsl:stylesheet version="1.0"

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T14:37:00.230

试试这个 ...

# 解决方案 1：程序

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output method="xml" indent="yes"/>

<xsl:template match="*" />

<xsl:template match="/">
 <documents>
   <xsl:apply-templates select="document/sheet/line[@id='0']/field[@id!='0']" />
 </documents>
</xsl:template>

<xsl:template match="field[@id!='0']">
 <document>
  <header>
    <number><xsl:value-of select="." /></number>
  </header>
  <line>
   <xsl:call-template name="line-item-template" >
    <xsl:with-param name="value-id"  select="@id" /> 
    <xsl:with-param name="lines"     select="../../line[@id!='0']"/> 
   </xsl:call-template>
  </line>
 </document>
</xsl:template>

<xsl:template name="line-item-template">
 <xsl:param name="value-id" /> 
 <xsl:param name="lines" /> 
 <xsl:for-each select="$lines[field[@id=$value-id]!='']" > 
  <line-item>
   <lineNumber><xsl:value-of select="format-number(position(),'00')" /></lineNumber>
   <Code><xsl:value-of select="field[@id='0']" /></Code>
   <value><xsl:value-of select="field[@id=$value-id]" /></value>
  </line-item>
  </xsl:for-each > 
</xsl:template>

</xsl:stylesheet> 
```

..或试试这个...

# 解决方案 2：Template-o-phile

此解决方案挂钩到与输出节点相关的节点。

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output method="xml" indent="yes"/>

<xsl:template match="*" />

<xsl:template match="/">
 <documents>
   <xsl:apply-templates select="document/sheet/line[@id='0']/field[@id!='0']" />
 </documents>
</xsl:template>

  <xsl:template match="field[parent::line[@id='0']][@id!='0']">
 <document>
  <header>
    <number><xsl:value-of select="." /></number>
  </header>
  <line>
    <xsl:variable name="value-index" select="@id" />
    <xsl:apply-templates select="../../line[@id!='0']/field[@id=$value-index]" />
  </line>
 </document>
</xsl:template>

<xsl:template match="field[parent::line[@id!='0']][.!='']">
  <xsl:variable name="current" select="." />
  <xsl:variable name="value-index" select="@id" />
  <line-item>
   <lineNumber><xsl:value-of select="format-number( count(
       preceding::line[field[@id=$value-index]!=''] 
                      [..=$current/../..]
       ),'00')" /></lineNumber>
   <Code><xsl:value-of select="../field[@id='0']" /></Code>
   <value><xsl:value-of select="." /></value>    
  </line-item>
</xsl:template>

</xsl:stylesheet> 
```

* * *

现在想象一下为 XSLT 2.0 解决这个问题。现在那会很有趣！:-)

# java - JFreechart 标签太小

> ID：10997203
> 
> 赞同：2
> 
> 时间：2012-06-12T13:00:12.900
> 
> 标签：java, eclipse-plugin, swt, eclipse-rcp, jfreechart

我正在为 eclipse rcp 插件创建一个新视图。在这个视图中，我想使用一个固定高度为 20 的 JFreeChart 水平（！）StackedBar。问题是，项目标签显示得太小，尽管有很多空间要显示得更大（见图）带有“setSeriesItemLabelFont()”的大小不会增加标签的高度，只会增加宽度

图片：

[![图片](../Images/3a74dfeab058537cbfe27846367ba75d.png)](https://i.stack.imgur.com/BO015.png)

这是我的代码： ViewPart：

```
@Override
public void createPartControl(Composite parent) {

    GridLayout gridLayout = new GridLayout(1, false);
    parent.setLayout(gridLayout);

    totalRenderingContent = new TotalRenderingContent(parent);
} 
```

和 TotalRenderingContent.java

```
public TotalRenderingContent(Composite parent) {

    chartComposite = new Composite(parent, SWT.EMBEDDED);
    GridData gridDataChart = new GridData(GridData.FILL, GridData.FILL, true, false);
    gridDataChart.heightHint = 20;
    chartComposite.setLayoutData(gridDataChart);
    chartFrame = SWT_AWT.new_Frame(chartComposite);
    createTotalRenderingContent();
}

private void createTotalRenderingContent() {
    Chart renderingChart = new TotalRenderingChart();
    JFreeChart chart = renderingChart.getChart();
    ChartPanel chartPanel = new ChartPanel(chart);
    chartFrame.add(chartPanel);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-23T11:36:10.980

您正在使用 SWT_AWT，也许这就是问题所在。有 org.jfree.experimental.chart.swt.ChartComposite，它有助于在 SWT 中显示图表。看例子：[http ://codeandme.blogspot.ru/2012/12/using-jfreechart-in-your-rcp.html](http://codeandme.blogspot.ru/2012/12/using-jfreechart-in-your-rcp.html)

# jakarta-ee - Google API 授权代码流

> ID：10997207
> 
> 赞同：2
> 
> 时间：2012-06-12T13:00:27.873
> 
> 标签：jakarta-ee, jboss, google-api, jboss7.x

我真的很难进行简单的 Google OAuth 交易。我正在使用 Java EE，并在 JBoss v7.1 上运行，并在 Eclipse Indigo 中对其进行编程。

这是代码。它所做的只是在您访问 /index 时运行 servlet，它应该建立一个 AuthorisationCodeFlow。它没有；代码挂起（上传到服务器时）在

```
 privateAuthorizationCodeFlow flow; 
```

.

```
 package com.pjm.servlets;

    import java.io.IOException;
    import javax.servlet.ServletException;
    import javax.servlet.annotation.WebServlet;
    import javax.servlet.http.HttpServlet;
    import javax.servlet.http.HttpServletRequest;
    import javax.servlet.http.HttpServletResponse;
    import com.google.api.client.auth.oauth2.AuthorizationCodeFlow;

    @WebServlet("/index")
    public class IndexController extends HttpServlet {          
        private static final String clientId = "1234.apps.googleusercontent.com";
        private static final String clientSecret = "12345abcde";
        private static final String callbackUrl = "http://localhost:8080/ProjectA/callback";
        private AuthorizationCodeFlow flow;

        protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {       
            String url =        flow.newAuthorizationUrl().setState("xyz").setRedirectUri("https://client.example.com/rd").build();
        } 
```

这是异常日志的简短版本：

```
 EXCEPTION

    javax.servlet.ServletException: Servlet execution threw an exception

    ROOT CAUSE

    java.lang.NoClassDefFoundError: com/google/api/client/auth/oauth2/AuthorizationCodeFlow
    com.pjm.servlets.IndexController.doGet(IndexController.java:30)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:734)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:847)

    ROOT CAUSE

    java.lang.ClassNotFoundException: com.google.api.client.auth.oauth2.AuthorizationCodeFlow from [Module "deployment.PmWebProjectB.war:main" from Service Module Loader]
    org.jboss.modules.ModuleClassLoader.findClass(ModuleClassLoader.java:190)
    org.jboss.modules.ConcurrentClassLoader.performLoadClassUnchecked(ConcurrentClassLoader.java:468)
    org.jboss.modules.ConcurrentClassLoader.performLoadClassChecked(ConcurrentClassLoader.java:456)
    org.jboss.modules.ConcurrentClassLoader.performLoadClassChecked(ConcurrentClassLoader.java:423)
    org.jboss.modules.ConcurrentClassLoader.performLoadClass(ConcurrentClassLoader.java:398)           org.jboss.modules.ConcurrentClassLoader.loadClass(ConcurrentClassLoader.java:120)
    com.pjm.servlets.IndexController.doGet(IndexController.java:30)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:734)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:847) 
```

看起来我还没有将正确的 jar 文件上传到正确的地方，但我已经照常完成并在 Eclipse 中上传了它们，这似乎很高兴。任何建议将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T05:21:19.467

您的 jar 在 jboss 上不可用。您如何通过 eclipse 将应用程序部署到 jboss 或将项目导出为 jar（如果是，那么您需要在创建战争时添加 jar）？

# python - 类工厂和抽象基类

> ID：10997211
> 
> 赞同：1
> 
> 时间：2012-06-12T13:00:35.523
> 
> 标签：python, abstract-class, class-factory

我正在尝试基于抽象基类定义许多类。这些类中的每一个基本上都为可视化包定义了一个单元格形状。单元由许多顶点（点）组成，每个子类将需要不同数量的点。每个类都可以被认为是固定数量的点坐标的容器。

例如，考虑基类`Shape`，它只是一个坐标列表的容器：

```
class Shape(object):
    """Cell shape base class."""
    def __init__(self, sequence):
        self.points = sequence

    @property
    def points(self):
        return self._points

    @points.setter
    def points(self, sequence):
        # Error checking goes here, e.g. check that `sequence` is a
        # sequence of numeric values.
        self._points = sequence 
```

理想情况下，我希望能够定义一个`Square`类，其中`points.setter`方法检查`sequence`的长度为 4。此外，我希望用户*无法*实例化`Shape`. 有没有办法可以定义`Shape`为抽象基类？我尝试将形状的定义更改为以下内容：

```
import abc

class Shape(object):
    """Cell shape base class."""

    __metaclass__ = abc.ABCMeta

    def __init__(self, sequence):
        self.points = sequence

    @abc.abstractproperty
    def npoints(self):
        pass

    @property
    def points(self):
        return self._points

    @points.setter
    def points(self, sequence):
        # Error checking goes here...
        if len(sequence) != self.npoints:
            raise TypeError('Some descriptive error message!')

        self._points = sequence 
```

这需要子类来定义属性`npoints`。然后我可以将一个类定义`Square`为

```
class Square(Shape):
    @property
    def npoints(self):
        return 4 
```

但是，对于大量子类（并且要实现多个属性），这将是相当乏味的。我希望定义一个类工厂来为我创建我的子类，类似于：

```
def Factory(name, npoints):
    return type(name, (Shape,), dict(npoints=npoints))

Triangle = Factory('Triangle', 3)    
Square = Factory('Square', 4)
# etc... 
```

这个类工厂函数是一种有效的方法，还是我破坏了这个`npoints`属性？将调用替换为`type`更详细的内容是否更好，例如：

```
def Factory(name, _npoints):
    class cls(Shape):
        @property
        def npoints(self):
            return _npoints
    cls.__name__ = name
    return cls 
```

另一种方法是定义一个类属性`_NPOINTS`并将`npoints` 属性更改`Shape`为

```
@property
def npoints(self):
    return _NPOINTS 
```

但是，我失去了使用抽象基类的好处，因为：

*   我看不到如何使用`type`, 和
*   我不知道如何定义抽象类属性。

有没有人对实现这个抽象基类和类工厂函数的最佳方式有任何想法，甚至是一个更好的设计？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T13:51:36.973

在不了解您的项目的情况下，我无法就总体设计提供具体建议。我将提供一些更一般的提示和想法。

1.  动态生成的类通常表明您根本不需要单独的类——只需编写一个*包含*所有功能的类即可。`Shape`在实例化时获取其属性的类有什么问题？（当然，使用动态生成的类*是有*`namedtuple()`原因的——工厂函数就是一个例子。但是，我在你的问题中找不到任何具体的原因。）

2.  您通常不使用抽象基类，而是简单地*记录*预期的接口，而不是编写符合该接口的类。由于 Python 的动态特性，您并不需要一个通用的基类。公共基类通常还有其他优点——例如共享功能。

3.  如果不这样做会导致不相关的地方出现奇怪的错误，则只检查应用程序代码错误。例如，如果您的函数需要一个可迭代的，只需假设您有一个可迭代的。如果用户传入了其他内容，那么当它尝试迭代传入的对象时，您的代码将失败，并且错误消息通常足以让应用程序开发人员理解错误。

# jakarta-ee - 如何捕获会话 bean 方法的异常

> ID：10997213
> 
> 赞同：0
> 
> 时间：2012-06-12T13:00:40.623
> 
> 标签：jakarta-ee, ejb

我有一个无状态会话 bean，它的方法会引发异常（从 Exception 扩展）。

```
@Stateless
@LocalBean
public class MyBean {
    ...
    public void myMethod() throws MyException {
        ...
    }
} 
```

但我无法捕捉到异常。

```
try {
    myBean.myMethod
} catch (MyException e) {
    ...
} 
```

这是堆栈： `WARNING: StandardWrapperValve[MyServlet]: PWC1406: Servlet.service() for servlet MyServlet threw exception java.lang.IllegalAccessError: example/MyException at $Proxy327.myMethod(Unknown Source) at example.**EJB31_Generated_*MyBean*_Intf_***Bean*_.myMethod(Unknown Source) at example.MyServlet.processRequest(MyServlet.java:36) at example.MyServlet.doGet(MyServlet.java:71) ...`

我认为，这是因为调用 bean 方法是通过代理。我怎样才能捕捉到异常？或者应该避免在会话 bean 中抛出异常的方法？- 我希望不是。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T17:08:15.660

正如堆栈跟踪所示，它实际上是一个抛出的 IllegalAccessError ......请参阅其 API 文档：[http ://docs.oracle.com/javase/6/docs/api/java/lang/IllegalAccessError.html](http://docs.oracle.com/javase/6/docs/api/java/lang/IllegalAccessError.html)

您将无法通过添加`catch (Exception e) {...}`...来捕获它，因为它是一个错误，它不是异常的子类。如果你真的想抓住它，你必须添加一个`catch (Throwable t) {...}`我非常不鼓励的。而是找到引发错误的原因。我认为我们需要查看更多您的代码...

正如 API 所说“通常，编译器会捕获此错误；如果类的定义发生了不兼容的更改，则此错误只会在运行时发生”...您是否在服务器和客户端上重新部署以确保使用相同接口定义？

# entity-framework - 实体框架查询返回一条记录，但它应该返回更多

> ID：10997219
> 
> 赞同：0
> 
> 时间：2012-06-12T13:00:54.887
> 
> 标签：entity-framework, entity-relationship, dbcontext

正如标题所说，我在 Asp.net mvc 3 EF 中的查询有问题。我得到了 2 个具有 1 对多关系的表。

table1 用户 int user_ID string 用户名

table2 Friends int FriendshipID int user_ID intfriend_ID

控制器：

// // 获取：/用户/详细信息/5

```
public ViewResult Details(int id)
    {
        User user = db.Users.Include("Friends").FirstOrDefault(u => u.user_ID == id);
        //Also for each friend get the User:
        foreach (var friend in user.Friends.ToList())
        {
            friend.User = db.Users.Find(friend.friend_ID);
        }
        return View(user);
    } 
```

视图“详细信息”：

```
@model Social2.Models.User

@{
    ViewBag.Title = "Details";
}

<h2>Details</h2>
    <div class="display-field">
        @foreach (var friend in @Model.Friends)
    {
           @friend.User.username;
    }   
    </div> 
```

语境：

```
public partial class ASPNETDBEntities : DbContext
{
    public ASPNETDBEntities()
        : base("name=ASPNETDBEntities")
    {
    }

    protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        throw new UnintentionalCodeFirstException();
    }

    public DbSet<aspnet_Users> aspnet_Users { get; set; }
    public DbSet<Friend> Friends { get; set; }
    public DbSet<User> Users { get; set; }
} 
```

用户模型：

```
public partial class User
{
    public User()
    {
        this.Friends = new HashSet<Friend>();
    }
    [Key]
    public int user_ID { get; set; }
    public System.Guid user_UniqueID { get; set; }
    public string username { get; set; }

    public virtual aspnet_Users aspnet_Users { get; set; }
    public virtual ICollection<Friend> Friends { get; set; }
} 
```

朋友模型

```
public partial class Friend
{
    public int friendship_ID { get; set; }
    public int user_fr_ID { get; set; }
    public int friend_ID { get; set; }

    public virtual User User { get; set; }
} 
```

问题是，当我转到 ~/user/details/1 时，视图只显示一个（最后一个）朋友。对于每个用户，它都会显示他们的最后一个朋友。如何全部展示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T13:10:06.333

我认为问题出在这里

```
User user = db.Users.Include("Friends").FirstOrDefault(u => u.user_ID == id); 
```

`FirstOrDefault`只给出一条记录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T13:26:54.100

我认为问题在于 Friend 类的映射。

尝试更改为：

```
public partial class Friend
{
    [Key]
    public int friendship_ID { get; set; }
    public int user_fr_ID { get; set; }
    public int friend_ID { get; set; }

    [ForeignKey("friend_ID")]
    public virtual User User { get; set; }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T14:42:51.943

你的数据库必须有*两个*这样定义的关系：

![数据库架构](../Images/cf22ea9acf1d36389e35a550896e710f.png)

如果您从此模式创建实体模型，您还将获得两个一对多关系。当您将 DBContext T4 模板应用于此模型时，您应该获得如下 POCO 类：

```
public partial class Users
{
    public Users()
    {
        this.Friends = new HashSet<Friends>();
        this.Friends1 = new HashSet<Friends>();
    }

    public int user_ID { get; set; }
    public string username { get; set; }

    public virtual ICollection<Friends> Friends { get; set; }
    public virtual ICollection<Friends> Friends1 { get; set; }
}

public partial class Friends
{
    public int friendship_ID { get; set; }
    public int user_fr_ID { get; set; }
    public int friend_ID { get; set; }

    public virtual Users Users { get; set; }
    public virtual Users Users1 { get; set; }
} 
```

`Users.Friends`和`Friends.Users`为第一个关系形成一对，`Users.Friends1`和`Friends.Users1`是第二个关系的一对。（您可以在模型设计器中重命名导航属性以使名称更有意义。）然后您的查询将如下所示（您可以包含“第二级”并且不需要像您在示例中所做的那样循环）：

```
public ViewResult Details(int id)
{
    // important to use User1 in Include, not User
    User user = db.Users.Include("Friends.User1")
        .FirstOrDefault(u => u.user_ID == id);
    return View(user);
} 
```

`DbContext`您还可以使用以下的强类型版本`Include`：

```
Include(u => u.Friends.Select(f => f.User1)) 
```

# objective-c - CTLineGetStringRange 和 CTLineGetGlyphCount 返回的行中字符数错误

> ID：10997220
> 
> 赞同：0
> 
> 时间：2012-06-12T13:00:55.257
> 
> 标签：objective-c, ios, cocoa-touch, core-text

我有一个应用程序，我使用 CoreText 来绘制文本突出显示。它工作得很好，除了当我尝试通过使用它来获取一行中的字符数时，`CTLineGetStringRange`它通常会给我一个比实际更大的数字。例如，在包含 156 个字符的行中，范围的长度为 164。`CTLineGetGlyphCount`返回相同的数字。

有人知道为什么会这样吗？我用来创建框架设置器的`NSAttributedString`字体与我的`UITextView`.

这是我的代码：

```
// Build the attributed string from our text data and string attribute data
NSAttributedString *attributedString = [[NSAttributedString alloc] initWithString:self.text attributes:self.attributes];    

// Create the Core Text framesetter using the attributed string
_framesetter = CTFramesetterCreateWithAttributedString((__bridge CFAttributedStringRef)attributedString);
// Create the Core Text frame using our current view rect bounds
UIBezierPath *path = [UIBezierPath bezierPathWithRect:self.bounds];
_frame =  CTFramesetterCreateFrame(_framesetter, CFRangeMake(0, 0), path.CGPath, NULL);

NSArray *lines = (__bridge NSArray *) CTFrameGetLines(_frame);
for (int i = 0; i < lines.count; i++) {
    CTLineRef line = (__bridge CTLineRef) [lines objectAtIndex:i];
    CFRange lineRange = CTLineGetStringRange(line);
    NSLog(@"lineRange: %ld, %ld", lineRange.location, lineRange.length);
    CFIndex glyphCount = CTLineGetGlyphCount(line);
    NSLog(@"glyphCount: %ld", glyphCount);
} 
```

我的类是一个子类，`UIView`它作为子视图添加到`UITextView`.

**编辑：** 这是我正在测试的示例字符串：

```
textView.text = @"Marvel's The Avengers is a 2012 American superhero film produced by Marvel Studios and distributed by Walt Disney Pictures, based on the Marvel Comics superhero team of the same name."; 
```

在这种情况下，第一行包含
“漫威的复仇者联盟是 2012 年由漫威工作室制作并由华特迪士尼影业发行的美国超级英雄电影，基于 137 个字符长。但它给了我一个长度为 144 的线的范围。

但是，当我尝试使用以下文本时，结果有所不同：

```
textView.text = @"Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat."; 
```

现在第一行包含
“Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim”，长度为 142。但这里它给了我正确的范围，长度为 142。

然后我尝试了更多的文本：

**文字：** “阿斯加德洛基遇到了另一个被称为 Chitauri 的外星种族的领袖。作为取回 Tesseract，一种潜力未知的强大能源的交换，Other 向 Loki 许诺一支 Chitauri 军队，他可以用它征服地球。”
**结果：** “阿斯加德洛基遇到了另一个被称为 Chitauri 的外星种族的领袖。作为取回 Tesseract 的交换，一个强大的”长度为 145。行距
**长度：** 145

**文本：** “斯塔克和罗杰斯意识到仅仅击败他们对洛基来说是不够的；他需要公开压制他们，以证明自己是地球的统治者。”
**结果：** “Stark 和 Rogers 意识到仅仅击败他们对 Loki 来说是不够的；他需要公开压制他们以证明自己是统治者”，长度为 146。行距
**长度：** 149

所以你可以看到有时它是正确的，有时它不是。我找不到解释。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T12:14:01.157

[我根据这个答案](https://stackoverflow.com/a/1111945/569507)中给出的提示解决了这个问题。

似乎因为`UITextView`从它继承`UIScrollView`的每个边缘都有一个 8 像素的插图。这意味着我的内部`UIView`文本空间比我的要宽 16 像素`UITextView`，有时这种差异意味着它可以在换行之前再容纳一个单词，这会导致该行中的字符数错误。

所以从视图的宽度中减去 16 个像素为我解决了这个问题。

但是，这只是我解决方案的一部分。另一部分是从核心文本中的属性字符串中删除字距调整和连字：

```
CFAttributedStringSetAttribute(string, textRange, kCTKernAttributeName, (__bridge CFTypeRef)([NSNumber numberWithFloat:0.0]));
CFAttributedStringSetAttribute(string, textRange, kCTLigatureAttributeName, (__bridge CFTypeRef)([NSNumber numberWithInt:0])); 
```

现在线条完美契合。

# windows - Windows 应用程序上的不规则套接字错误 (10054)

> ID：10997221
> 
> 赞同：6
> 
> 时间：2012-06-12T13:00:58.970
> 
> 标签：windows, sockets, visual-c++, tcp-ip

我正在开发一个 Windows (Microsoft Visual C++ 2005) 应用程序，该应用程序使用在 Intranet 的不同主机上运行的多个进程。

进程使用 TCP/IP 相互通信。不同的进程可以在同一台主机上，也可以在不同的主机上（即通信既可以在同一台主机内，也可以在不同主机之间）。

我们目前有一个不规则出现的错误。通信似乎工作了一段时间，然后停止工作。然后它再次工作一段时间。

当通信不起作用时，我们会收到一个错误（显然是在一个进程试图发送数据时）。调用如下所示：

```
send(socket, (char *) data, (int) data_size, 0); 
```

通过检查我们得到的错误代码

```
WSAGetLastError() 
```

我们看到这是一个错误 10054。这是我在 Microsoft 文档中找到的内容（请参阅[此处](http://msdn.microsoft.com/en-us/library/windows/desktop/ms740668%28v=vs.85%29.aspx)）：

```
WSAECONNRESET
10054

Connection reset by peer.

An existing connection was forcibly closed by the remote host. This normally
results if the peer application on the remote host is suddenly stopped, the
host is rebooted, the host or remote network interface is disabled, or the
remote host uses a hard close (see setsockopt for more information on the
SO_LINGER option on the remote socket). This error may also result if a
connection was broken due to keep-alive activity detecting a failure while
one or more operations are in progress. Operations that were in progress
fail with WSAENETRESET. Subsequent operations fail with WSAECONNRESET. 
```

因此，据我了解，连接被接收过程中断。在某些情况下，此错误（AFAIK）是正确的：一个进程已终止，因此无法访问。在其他情况下，发送方和接收方都在运行并记录活动，但由于上述错误（错误在日志中报告），它们无法通信。

我的问题。

*   SO_LINGER 选项是什么意思？
*   什么是保持活动，它如何断开连接？
*   如何避免这个问题或从中恢复？

关于最后一个问题。我们尝试的第一个解决方案（实际上，这是一种解决方法）是在发生错误时重新发送消息。不幸的是，同样的错误在一段时间（几分钟）内一遍又一遍地发生。所以这不是一个解决方案。

目前我们不明白是软件问题还是配置问题：也许我们应该在 Windows 注册表中检查一些东西？

一个假设是操作系统耗尽了临时端口（如果连接关闭但端口由于 TcpTimedWaitDelay 而未释放），但通过分析这个问题，我们认为应该有很多：即使没有消息也会出现问题进程之间发送过于频繁。但是，我们仍然不能 100% 确定我们可以排除这种情况：临时端口会以某种方式丢失（？？？）

另一个可能有帮助的细节是，发送和接收在每个进程中同时发生在不同的线程中：TCP/IP 库中是否存在可能损坏的共享数据结构？

同样很奇怪的是，问题出现的不规律：通讯正常几分钟，然后几分钟不通，然后又通了。

感谢您的任何想法和建议。

**编辑**

感谢您确认唯一可能的解释是连接关闭错误的提示。通过对问题的进一步分析，我们发现连接的服务器端进程已崩溃/已终止并已重新启动。所以有一个新的服务器进程正在运行并**在正确的端口上**侦听，但客户端没有检测到这一点，并且仍在尝试使用旧连接。我们现在有一种机制来检测这种情况并在客户端重置连接。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-12T13:08:57.200

该错误意味着连接已被远程站点关闭。所以你不能在你的程序上做任何事情，除非接受连接断开。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-03-14T19:02:37.630

我最近几天都面临这个问题，并发现 Adob​​e Acrobat Reader 更新是罪魁祸首。一旦您从系统中完全卸载 Adob​​e，一切都会恢复正常。

# javascript - 悬停时擦除我的图像

> ID：10997227
> 
> 赞同：0
> 
> 时间：2012-06-12T13:01:15.307
> 
> 标签：javascript, jquery, css, fade

我有[这里](http://jsfiddle.net/Rochefort/3TDF3/)显示的菜单结构。

所有项目都有背景图片。但是当鼠标悬停时，隐藏我的菜单项 img。因为，js 代码对这个 img 无效，但我不知道如何解决这个问题。

我想要，仍然是 javascript 淡入淡出效果，但不要隐藏我的 img。

一般：

![在此处输入图像描述](../Images/dd4567c033922fb7e2414010f0309a9c.png)

问题：（悬停和悬停）

![在此处输入图像描述](../Images/4078dce89fca2e8bd8af4db8584edc90.png)

![在此处输入图像描述](../Images/f789ef4505b6fef3ee367cec39b20e95.png)

我想：

![在此处输入图像描述](../Images/e96b7ad2f64d0cc0c32fa545041aceb0.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T13:13:37.493

如果您想要在悬停时淡化背景，并在悬停时将其恢复，则使用以下 js：

```
$(document).ready(function(){
var bg;
$("#right_menu a").mouseover(function() {
    bg = $(this).css('background-color');
     $(this).animate({ backgroundColor:'#002C6A'},500);
}).mouseout(function() {
    $(this).animate({ backgroundColor:bg},500);
});       
});​ 
```

如果要使用图像，则将背景颜色更改为背景。

在行动：http: [//jsfiddle.net/3TDF3/2/](http://jsfiddle.net/3TDF3/2/)

* * *

**更新：**刚刚重新访问了代码。大部分问题是 css 类是在**li**上设置的，而在 a 上进行了**修改**

您正在将 background-image 设置为 li，但为 a 设置动画。因此 li 的背景被 a 的新背景隐藏了。

更改`$("#right_menu a").mouseover`为`$("#right_menu li").mouseover`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T13:04:48.013

尝试使用背景颜色而不是图像。当鼠标悬停在链接之外时，将背景颜色设置为之前的值。使用背景颜色似乎足够的图像看起来是个坏主意。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T13:10:21.907

试试这个

```
$(document).ready(function(){
    var backgroundimage = $(this).css("background-image");//store it in a variable
    $("#right_menu a").mouseover(function() {
         $(this).animate({ backgroundColor:'#002C6A'},500);
        $(this).css("background-image","none");//remove it
    }).mouseout(function() {
        $(this).animate({ backgroundColor:'#fff'},500);
        $(this).css("background-image",backgroundimage );//bring it back
    });       
});​ 
```

# debugging - 是否可以使用控制台在 IE9 中搜索 cookie？

> ID：10997229
> 
> 赞同：0
> 
> 时间：2012-06-12T13:01:18.020
> 
> 标签：debugging, cookies, internet-explorer-9

不久前我看到有人使用 IE9，他们按 F12 并调出调试控制台。我可以发誓他们发出了某种命令来搜索一个名为“Foobar”的cookie

这可以做到吗？过程是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T13:02:32.543

`document.cookie`将返回所有未`HttpOnly`设置的 cookie。

您可以使用正则表达式对其进行解析。

# java - 原因：无法导入没有“ref”属性的 PMD 规则。看到'空'？

> ID：10997231
> 
> 赞同：0
> 
> 时间：2012-06-12T13:01:25.027
> 
> 标签：java, sonarqube, pmd

我正在尝试在 Sonar 3.0.1 中创建质量配置文件并指定我的 pmd 配置文件。但是当我提交它时，我收到以下错误：

```
A PMD rule without 'ref' attribute can't be imported. see 'null' 
```

这是我的扩展文件的内容（在 Sonar 网站上拍摄的样本）：

```
<rules>
  <rule key="AvoidIfWithoutBrace">
    <name>Avoid if without using brace</name>
    <configKey>rulesets/extensions.xml/AvoidIfWithoutBrace</configKey>
    <category name="Usability" />
    <description>éviter les if sans crochet.</description>
  </rule>
</rules> 
```

尽管我进行了搜索，但我没有找到此错误的原因。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T13:13:13.297

你在混合概念。

如果您从 Web UI 创建配置文件（[请参阅文档](http://docs.codehaus.org/display/SONAR/Quality+Profiles#QualityProfiles-CreatingProfile)），则需要指定 PMD 文件，即 PMD 格式的文件，如下所示：

```
<ruleset>
  <rule ref="rulesets/design.xml/SingularField">
    <priority>4</priority>
  </rule>
  ...
</ruleset> 
```

您当前提供给 Sonar 的是一个具有 Sonar 格式的文件（这是您可以用来备份/恢复完整质量配置文件的格式）。

# django - django floppyforms BaseGMapWidget - 默认缩放和纬度/经度

> ID：10997235
> 
> 赞同：1
> 
> 时间：2012-06-12T13:01:32.383
> 
> 标签：django, forms, gis

有人知道用*floppyforms.gis.BaseGMapWidget*设置默认缩放和纬度/经度的简单方法吗？此外，在创建条目时，将平移设置为默认工具。

以我定义的形式：

```
class PointWidget(floppyforms.gis.PointWidget, floppyforms.gis.BaseGMapWidget):
    map_width = 690
    map_height = 300

class EventForm(ModelForm):
    class Meta:
        model = Event
        widgets = {
            'coordinates': PointWidget(),
        } 
```

这完美地显示了地图小部件，我可以设置一个点。在为现有条目加载表单时，它还可以很好地居中和缩放该点。但是当显示表单以创建一个新条目时，它以非洲西部成本为中心。

有没有办法实现这一点（最好通过在表单/小部件类中定义而不使用额外的 javascript）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T13:37:51.883

首先，覆盖`get_context_data()`您的小部件类并将其指向自定义模板：

```
class PointWidget(floppyforms.gis.BaseGMapWidget, floppyforms.gis.PointWidget):
   template_name = 'custom_lonlat.html'
   default_lon = 'something'
   default_lat = 'something'

   def get_context_data(self):
       ctx = super(PointWidget, self).get_context_data()
       ctx.update({
           'lon': self.default_lon,
           'lat': self.default_lat,
       })
       return ctx 
```

然后创建`custom_lonlat.html`模板：

```
{% extends "floppyforms/gis/google.html" %}

{% block options %}{{ block.super }}
options['default_lon'] = {{ lon }};
options['default_lat'] = {{ lat }};
{% endblock %} 
```

如果你想使默认的 lon/lat 动态，你可以从你的视图代码中直接在表单实例上设置它们：

```
form = EventForm()
form.fields['coordinates'].widget.default_lon = 'something'
form.fields['coordinates'].widget.default_lat = 'something else' 
```

我是 floppyforms 的作者，我已经看过这个问题几次了……我很快就会把这个答案添加到官方文档中。

# c++ - C++11 lambdas 到函数指针

> ID：10997237
> 
> 赞同：10
> 
> 时间：2012-06-12T13:01:40.917
> 
> 标签：c++, c++11

我开始使用 C++11 lambda 开发应用程序，并且需要将某些类型转换为函数指针。这在 GCC 4.6.0 中完美运行：

```
void (* test)() = []()
{
    puts("Test!");
};

test(); 
```

我的问题是当我需要在 lambda 中使用函数或方法局部变量时：

```
const char * text = "test!";

void (* test)() = [&]()
{
    puts(text);
};

test(); 
```

G++ 4.6.0 给出了强制转换错误代码：

```
main.cpp: In function 'void init(int)':
main.cpp:10:2: error: cannot convert 'main(int argc, char ** argv)::<lambda()>' to 'void (*)()' in initialization 
```

如果使用**auto**，它可以正常工作：

```
const char * text = "Test!";

auto test = [&]()
{
    puts(text);
};

test(); 
```

我的问题是：如何使用**[&]**为 lambda 创建类型？就我而言，我不能使用 STL **std::function**（因为我的程序不使用 C++ RTTI 和 EXCEPTIONS 运行时），它有一个简单的函数实现来解决这个问题？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-12T14:14:38.573

> 我不能使用 STL std::function（因为我的程序不使用 C++ RTTI 和 EXCEPTIONS 运行时）

然后您可能需要编写自己的等价于`std::function`.

类型擦除的通常实现`std::function`不需要 RTTI 来实现其大部分功能；它通过常规的虚函数调用工作。所以编写自己的版本是可行的。

实际上，唯一`std::function`需要*RTTI*的是`target_type`and`target`函数，它们并不是世界上最有用的函数。`std::function`假设您正在使用的实现不需要 RTTI 来完成其日常业务，您也许可以在不调用这些函数的情况下直接使用。

`throw`通常，当您禁用异常处理时，程序会在遇到语句时简单地关闭并出错。而且由于 a`std::function`会发出的大多数异常不是您能够从中恢复的类型（调用 empty `function`、内存不足等），您可能可以`std::function`按原样使用。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-06-12T14:00:29.723

只有没有捕获的 lambda 可以转换为函数指针。这是仅针对这种特殊情况 [*] 的 lambdas 的扩展。通常，lambda 是函数对象，不能将函数对象转换为函数。

具有状态（捕获）的 lambda 的替代方法是使用`std::function`而不是普通函数指针。

* * *

[*]：如果保存状态的 lambda 可以转换为函数指针，那么状态将保存在哪里？（请注意，这个特定的 lambda 可能有多个实例，每个实例都有自己的状态，需要单独维护）

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-06-12T18:06:12.927

如前所述，只有不捕获任何内容的 lambda 才能转换为函数指针。

如果您不想使用或编写类似 std::function 的东西，那么另一种选择是将您本来要捕获的东西作为参数传递。你甚至可以创建一个结构来保存它们。

```
#include <iostream>

struct captures { int x; };
int (*func)(captures *c) = [](captures *c){ return c->x; };

int main() {
    captures c = {10};

    std::cout << func(&c) << '\n';
} 
```

另一种选择是使用不需要捕获的 global/static/thread_local/constexpr 变量。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-12T13:10:04.607

您可以使用`std::function`，它不需要任何“运行时”。否则，[请在此处查找如何实现`std::function`自己](https://stackoverflow.com/a/527983/51831)的草图。

# wicket - Wicket NonCachingImage 导致页面构造函数被调用两次

> ID：10997238
> 
> 赞同：0
> 
> 时间：2012-06-12T13:01:41.810
> 
> 标签：wicket

我`img`在检票口页面上有一个标签，并添加如下图像：

```
NonCachingImage banner = NonCachingImage(id, imageResource) 
```

现在我还添加了如下属性：`banner.add(new AttributeModifier("width",..`。

现在我的页面构造函数被调用了两次。如果为了测试我还添加

```
banner.add(new AttributeModifier("src", new Model<String>("test") 
```

构造函数只会被调用一次，但图像不会被渲染。请建议我如何渲染正确的图像`org.apache.wicket.Resource`并使构造函数只被调用一次。

如果你能指导我具体的例子，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T18:19:07.797

在某些浏览器中，使用 src=""（无 url）呈现的 <img> 标签，浏览器将向当前 url 提交请求以搜索图像。如果您的 imageResource 解析为空的 url 路径，则会发生这种情况。此外，如果在创建 NonCachingImage 之后添加了一个 AttributeModifier，它将覆盖生成的 src 属性，其值为“test”，则不会发生这种情况，因为该值将不再为空。

# python - 避免在 timeit.repeat() 基准测试中进行昂贵的设置

> ID：10997239
> 
> 赞同：2
> 
> 时间：2012-06-12T13:01:55.893
> 
> 标签：python, profiling, benchmarking, timing, timeit

我正在尝试测量我的一个小的 Python 代码片段的执行时间，我想知道这样做的最佳方法是什么。

理想情况下，我想运行某种设置（这需要很长时间），然后运行一些测试代码几次，并获得这些运行的最短时间。

`timeit()`似乎合适，但我不确定如何在不重新执行设置的情况下获得最短时间。演示问题的小代码片段：

```
import timeit

setup = 'a = 2.0'  # expensive
stmt = 'b = a**2'  # also takes significantly longer than timer resolution

# this executes setup and stmt 10 times and the minimum of these 10 
# runs is returned:
timings1 = timeit.repeat(stmt = stmt, setup = setup, repeat = 10, number = 1)

# this executes setup once and stmt 10 times but the overall time of
# these 10 runs is returned (and I would like to have the minimum 
# of the 10 runs):
timings2 = timeit.repeat(stmt = stmt, setup = setup, repeat = 1, number = 10) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T14:41:57.887

你有没有尝试过`datetime`为你做你的计时？

```
start = datetime.datetime.now()
print datetime.datetime.now() - start #prints a datetime.timedelta object` 
```

这将为您提供经过的时间，并且您可以以很小的开销控制它从哪里开始。

编辑：这是一个人的视频，他也用它来做一些计时，这似乎是获得运行时间的最简单方法。[http://www.youtube.com/watch?v=Iw9-GckD-gQ](http://www.youtube.com/watch?v=Iw9-GckD-gQ)

# mysql - 如何查找与第二个表具有多重关系的记录

> ID：10997242
> 
> 赞同：1
> 
> 时间：2012-06-12T13:01:58.093
> 
> 标签：mysql, database

我正在从表`tablea`中查找与`tableb`.
我使用 in 函数`IN (1)`来查找与记录 1`tablea`相关的记录。我使用该函数是因为括号中的值可能是逗号分隔的列表。`tableb``IN`

我现在必须做同样的事情，但`tablea`记录应该与所有`tableb`记录相关，而不仅仅是其中的任何记录，这就是所`IN`找到的。

我可以使用什么功能来代替`IN`执行此操作？

这是我的查询：

```
SELECT * 
FROM tablea 
    JOIN tablec ON tablea.id = tablec.id_local 
    JOIN tableb ON tablec.id_foreign = tableb.id 
WHERE 
    tablea.lang IN ( 0 ) 
AND tablea.page >=1 
AND tablea.page IN ( 8, 9, 10, 11 ) 
AND tableb.id = 5 
ORDER BY tablea.datetime DESC 
```

以上作品，

但`tableb.id`现在可能是多个，因为`tablea`记录可以与多个记录相关`tableb`。

```
SELECT *
FROM tablea
JOIN tablec ON tablea.id = tablec.id_local
JOIN tableb ON tablec.id_foreign = tableb.id
WHERE
    tablea.lang IN ( 0 )
AND tablea.page >=1
AND tablea.page
IN ( 8, 9, 10, 11 )
AND tableb.id IN (5,6,7)
ORDER BY tablea.datetime DESC 
```

这类作品。它会查找`tablea`与任何`tableb`记录（5、6、7）相关的记录，但是如何更改我的 SQL 以便它找到`tablea`与所有`tableb`记录（5、6 和 7）相关的记录？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T13:17:17.523

您没有提及任何字段名称，因此我将`relatedfield`其用作两个表之间相关的字段名称：

```
SELECT *  
FROM tablea 
    JOIN tableb ON (tablea.relatedfield = tableb.relatedfield) 
```

# php - Yii 单元测试

> ID：10997247
> 
> 赞同：1
> 
> 时间：2012-06-12T13:02:09.283
> 
> 标签：php, yii, phpunit

我正在阅读敏捷 Web 应用程序开发书，并且我已经完成了关于测试的部分。在这本书中他们推荐安装 Selenium 和 PHPUnit 我已经成功安装了 Selenium RC 和 PHPUnit

然后我运行了这个命令：

```
c:\wamp\www\yii\agile\protected\tests>phpunit functional/SiteTest.php 
```

但它不起作用。我收到了这个错误：

```
Warning: include(PHPUnit_Extensions_SeleniumTestCase_Driver.php): 
failed to open stream: No such file or directory in 
F:\xampp\htdocs\yii\framework\YiiBase.php on line 418

Warning: include(): Failed opening 'PHPUnit_Extensions_SeleniumTestCase_Driver.php' 
for inclusion (include_path='.;
    F:\xampp\htdocs\yii\app\protected\modules\user\components;
    F:\xampp\htdocs\yii\app\protected\modules\user\models;
    F:\xampp\htdocs\yii\app\protected\components;
    F:\xampp\htdocs\yii\app\protected\models;
    F:\xampp\php\PEAR') 
in F:\xampp\htdocs\yii\framework\YiiBase.php on line 418

Fatal error: Class 'PHPUnit_Extensions_SeleniumTestCase_Driver' not found in 
    F:\xampp\php\PEAR\PHPUnit\Extensions\SeleniumTestCase.php on line 602 
```

有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T13:12:01.797

您必须使用 PEAR 手动安装 PHPUnit Selenium 库：

```
pear install phpunit/PHPUnit_Selenium 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-24T07:29:28.343

或使用[作曲家](https://getcomposer.org/)。文件示例`composer.json`：

```
{
    "require-dev":{
        "phpunit/phpunit":">=4.5",
        "phpunit/phpunit-selenium":">=1.2",
        "phpunit/dbunit":">=1.2"
    },
    "config":{
        "bin-dir":"bin/"
    }
} 
```

# css - 来自richfaces的Ajax弄乱了我的css风格

> ID：10997251
> 
> 赞同：0
> 
> 时间：2012-06-12T13:02:20.467
> 
> 标签：css, jsf-2, richfaces

我正在使用richfaces 来获得一些不错的功能，但设计这些功能并不容易。我正在使用 JSF 验证器来突出显示无效字段，

问题是“style”参数不适用于richfaces标签，即使我添加了'！important'。

JSF 代码：

```
 <rich:calendar value="#{creerPersonne1.dateNaissance}"
                                locale="FR/fr" popup="true" datePattern="dd/MM/yyyy"
                                showApplyButton="true" cellWidth="24px" cellHeight="22px" required="true"
                                style="#{component.valid ? 'width:200px;' : 'border-color:red !important;border-width:2px !important;width:200px !important;'}"/> 
```

如您所见，CSS 在那里，但它必须被某些东西覆盖

![风格被忽略](../Images/f331a535db8c94c042f64054181a5575.png)

你们中有人遇到过这个问题吗？谢谢

# python - 将 Numpy 数组“转换”为 Matlab，反之亦然

> ID：10997254
> 
> 赞同：44
> 
> 时间：2012-06-12T13:02:26.610
> 
> 标签：python, matlab, numpy

我正在寻找一种将 NumPy 数组传递给 Matlab 的方法。

我已经设法通过使用将数组存储到图像中`scipy.misc.imsave`然后使用加载它来做到这一点`imread`，但这当然会导致矩阵包含0到256之间的值而不是“真实”值。

取这个矩阵除以 256 的乘积，原始 NumPy 数组中的最大值给了我正确的矩阵，但我觉得这有点乏味。

有没有更简单的方法？

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2012-06-12T13:07:06.980

当然，只需使用`scipy.io.savemat`

举个例子：

```
import numpy as np
import scipy.io

x = np.linspace(0, 2 * np.pi, 100)
y = np.cos(x)

scipy.io.savemat('test.mat', dict(x=x, y=y)) 
```

同样，还有`scipy.io.loadmat`.

然后，您将其加载到 matlab 中`load test`。

或者，正如@JAB 所建议的那样，您可以将内容保存到 ascii 制表符分隔的文件中（例如`numpy.savetxt`）。但是，如果你走这条路，你将被限制在二维。另一方面，ascii 是通用交换格式。几乎任何东西都会处理一个分隔的文本文件。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2015-05-27T19:35:50.617

**一个简单的解决方案，无需通过文件或外部库传递数据。**

Numpy 有一种将 ndarrays 转换为列表的方法，并且 matlab 数据类型可以从列表中定义。因此，何时可以转换为：

```
np_a = np.array([[1, 2, 3], [4, 5, 6], [7, 8, 9]])
mat_a = matlab.double(np_a.tolist()) 
```

从 matlab 到 python 需要更多的关注。没有将类型直接转换为列表的内置函数。但是我们可以访问原始数据，这些数据不是定型的，而是简单的。因此，我们使用`reshape`（正确格式化）和`transpose`（因为 MATLAB 和 numpy 存储数据的方式不同）。**强调这一点非常重要：在您的项目中进行测试，主要是在您使用超过 2 维的矩阵时。**它适用于 MATLAB 2015a 和 2 dims。

```
np_a = np.array(mat_a._data.tolist())
np_a = np_a.reshape(mat_a.size).transpose() 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2019-11-05T17:43:19.127

这是一个避免在 python 中迭代或使用文件 IO 的解决方案 - 以依赖（丑陋的）matlab 内部为代价：

```
import matlab
# This is actually `matlab._internal`, but matlab/__init__.py
# mangles the path making it appear as `_internal`.
# Importing it under a different name would be a bad idea.
from _internal.mlarray_utils import _get_strides, _get_mlsize

def _wrapper__init__(self, arr):
    assert arr.dtype == type(self)._numpy_type
    self._python_type = type(arr.dtype.type().item())
    self._is_complex = np.issubdtype(arr.dtype, np.complexfloating)
    self._size = _get_mlsize(arr.shape)
    self._strides = _get_strides(self._size)[:-1]
    self._start = 0

    if self._is_complex:
        self._real = arr.real.ravel(order='F')
        self._imag = arr.imag.ravel(order='F')
    else:
        self._data = arr.ravel(order='F')

_wrappers = {}
def _define_wrapper(matlab_type, numpy_type):
    t = type(matlab_type.__name__, (matlab_type,), dict(
        __init__=_wrapper__init__,
        _numpy_type=numpy_type
    ))
    # this tricks matlab into accepting our new type
    t.__module__ = matlab_type.__module__
    _wrappers[numpy_type] = t

_define_wrapper(matlab.double, np.double)
_define_wrapper(matlab.single, np.single)
_define_wrapper(matlab.uint8, np.uint8)
_define_wrapper(matlab.int8, np.int8)
_define_wrapper(matlab.uint16, np.uint16)
_define_wrapper(matlab.int16, np.int16)
_define_wrapper(matlab.uint32, np.uint32)
_define_wrapper(matlab.int32, np.int32)
_define_wrapper(matlab.uint64, np.uint64)
_define_wrapper(matlab.int64, np.int64)
_define_wrapper(matlab.logical, np.bool_)

def as_matlab(arr):
    try:
        cls = _wrappers[arr.dtype.type]
    except KeyError:
        raise TypeError("Unsupported data type")
    return cls(arr) 
```

到达这里所需的观察结果是：

*   Matlab 似乎只看`type(x).__name__`并`type(x).__module__`确定它是否理解类型
*   似乎任何可索引的对象都可以放在`._data`属性中

不幸的是，matlab 在`_data`内部没有有效地使用该属性，并且一次迭代一项而不是使用 python`memoryview`协议:(。因此，这种方法的速度增益是微不足道的。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-10-12T00:25:06.847

scipy.io.savemat 或 scipy.io.loadmat 不适用于 matlab 数组 --v7.3。但好的部分是 matlab --v7.3 文件是 hdf5 数据集。因此可以使用多种工具读取它们，包括 numpy。

对于 python，您将需要[h5py](http://www.h5py.org/docs/intro/build.html)扩展，这需要您系统上的[HDF5](http://www.hdfgroup.org/downloads/index.html)。

```
import numpy as np, h5py 
f = h5py.File('somefile.mat','r') 
data = f.get('data/variable1') 
data = np.array(data) # For converting to numpy array 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-06-13T11:28:00.707

前段时间，我遇到了同样的问题，并编写了以下脚本，以便在交互式会话中来回复制和粘贴数组。显然只适用于小型数组，但我发现它比每次都通过文件保存/加载更方便：

[Matlab -> Python](http://www.mathworks.com/matlabcentral/fileexchange/24087)

[Python -> Matlab](http://codepad.org/MVYCM0AJ)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2021-07-19T14:00:35.370

The python library [Darr](https://github.com/gbeckers/Darr) allows you to save your Python numpy arrays in a self-documenting and widely readable format, consisting of just binary and text files. When saving your array, it will include code to read that array in a variety of languages, including Matlab. So in essence, it is just one line to save your numpy array to disk in Python, and then copy-paste the code from the README.txt to load it into Matlab.

Disclosure: I wrote the library.

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2018-04-06T22:55:11.847

不确定它是否算作“更简单”，但我找到了一个解决方案，可以从一个由 matlab 快速调用的 python 脚本创建的 numpy 数组中移动数据：

dump_reader.py（python 源代码）：

```
import numpy

def matlab_test2():
    np_a    = numpy.random.uniform(low = 0.0, high = 30000.0, size = (1000,1000))
    return np_a 
```

dump_read.m（matlab 脚本）：

```
clear classes
mod = py.importlib.import_module('dump_reader');
py.importlib.reload(mod);

if count(py.sys.path,'') == 0
    insert(py.sys.path,int32(0),'');
end

tic
A = py.dump_reader.matlab_test2();
toc
shape = cellfun(@int64,cell(A.shape));
ls = py.array.array('d',A.flatten('F').tolist());
p = double(ls);
toc
C = reshape(p,shape);
toc 
```

它依赖于这样一个事实，即与单元格/矩阵相比，matlabs double 似乎在数组上有效地工作。第二个技巧是以有效的方式将数据传递给matlabs double（通过pythons native array.array）。

PS 很抱歉发布了 necroposting，但我为此付出了很多努力，这个话题是最热门的话题之一。也许它可以帮助某人缩短挣扎的时间。

PPS 使用 Matlab R2016b + python 3.5.4 (64bit) 测试

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-09-18T04:10:09.480

在最新的 R2021a 中，您可以将 python numpy ndarray 传递给 double()，它会转换为原生 matlab 矩阵，即使在控制台中调用 numpy 数组时，它也会在底部建议“使用 double 函数转换为 MATLAB 数组”

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-05-02T18:22:24.667

假设您有一个形状为 (365,10) 的 2D 每日数据，保存在 np 数组中五年，形状为`np3Darrat`(5,365,10)。在 python 中保存你的 np 数组：

```
import scipy.io as sio     #SciPy module to load and save mat-files
m['np3Darray']=np3Darray   #shape(5,365,10)
sio.savemat('file.mat',m)  #Save np 3D array 
```

然后在 MATLAB 中将 np 3D 数组转换为 MATLAB 3D matix：

```
load('file.mat','np3Darray')
M3D=permute(np3Darray, [2 3 1]);   %Convert numpy array with shape (5,365,10) to MATLAB matrix with shape (365,10,5) 
```

# c# - 当 IFrame XPAD 在页面上时，ModalPopup 单击两次

> ID：10997257
> 
> 赞同：3
> 
> 时间：2012-06-12T13:02:36.460
> 
> 标签：c#, asp.net, modal-dialog, modalpopupextender, xbap

我有一个带有 modalpopup 扩展器的 aspx 页面，它运行良好。但是我在页面末尾放置了一个 iframe，只有当我单击两次按钮时，modelpopup 才会起作用。我找不到这个问题的答案。

```
<asp:UpdatePanel ID="UpdatePanel4" runat="server">
                <ContentTemplate>
                    <div class="szamlabal14">
                        Csatlakozási pont:
                        <input type="hidden" id="hdnCsatlakozasiPontKod" runat="server" value="0" />
                        <asp:TextBox ID="txtCsatlakozasiPont" runat="server" Width="480" onkeydown="return false;"></asp:TextBox>
                        <asp:Button ID="btnCsatlakozasiPont" runat="server" Text="..." />
                        <cc1:ModalPopupExtender ID="mpeCsatlakozasiPont" runat="server" CancelControlID="btnCancel"
                            TargetControlID="btnCsatlakozasiPont" OkControlID="btnOk" PopupControlID="pnPopup"
                            PopupDragHandleControlID="PopupHeader" Drag="true" BackgroundCssClass="modalBackground">
                        </cc1:ModalPopupExtender>
                        <asp:Panel ID="pnPopup" Style="display: none" runat="server">
                            <div class="modalPopup">
                                <div style="position: relative; left: 670; margin: 3px;">
                                    <asp:Button ID="btnCancel" runat="server" Text="x" CausesValidation="false" OnClientClick="return false;" />
                                    <asp:Button ID="btnOk" runat="server" Text="Ok" Style="display: none" CausesValidation="false"
                                        OnClientClick="return false;" />
                                </div>
                                <iframe id="ifrCsatlakozasiPont" height="350px" width="700px" src="CsatlakozasiPont.aspx"
                                    frameborder="1"></iframe>
                            </div>
                        </asp:Panel>
                    </div>
                </ContentTemplate>
            </asp:UpdatePanel> 
```

当我删除以下部分时，modalpopup 再次运行良好。

```
<div style="margin-top: 10px; z-index: 10; border: 1px solid black; position: absolute;
            top: 130px;">
            <iframe src="http://ismts38105/viewer/ImageViewer.xbap?<%=Image%> width="1440"
                height="400" />
        </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T14:56:58.020

您需要在 Internet Explorer 上设置权限。XBAP 要求您将域/IP 添加到受信任的站点，否则您将无法对它们进行任何操作。

# javascript - 带有 jQ uery 的 HTML 文件选择器

> ID：10997263
> 
> 赞同：5
> 
> 时间：2012-06-12T13:03:00.527
> 
> 标签：javascript, jquery, html, filepicker

> **可能重复：**
> [使用 Javascript 读取客户端文本文件](https://stackoverflow.com/questions/4950567/reading-client-side-text-file-using-javascript)

我想在客户端打开一个 txt 文件，用 javascript 解析它，然后用 ajax 将解析后的数据发布到服务器页面。我有用于解析和发布的脚本。我现在需要的只是从客户端计算机中选择文件。

我需要的是这样的：

```
<div id="content">
     <button id="selectFile" onclick="return selectFileClick();" />
</div> 
```

当用户单击按钮时，会出现一个文件对话框并返回选定的文件。使用这个文件名，我将进行解析等其他操作。

```
function selectFileClick()
{
    var fileName = filedialog();
    // parsing file...
    return false;
} 
```

编辑：我不想上传文件，而且我有一个看起来不像的定制设计；

```
<input type="file" id="file"> 
```

我需要这样的东西：[jquery file dialog plugin](http://archive.plugins.jquery.com/plugin-tags/file-dialog)

编辑（2）：我通过这种方式解决了问题；

```
$(function () {
    $("#button1").click(function (event) {
        event.preventDefault();
        $('#file').trigger('click');
    });

    document.getElementById('file').addEventListener('change', readFile, false);
}); 
```

在 HTML 中；

```
<input id="button1" type="submit" value="add" />
<input type="file" id="file" style="display: none"> 
```

我希望这对其他人有帮助；）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-12T13:14:57.667

看看这个：[HTML 文件 API](https://developer.mozilla.org/en/Using_files_from_web_applications)

这可能是最简单的方法，例如

```
<input type="file" id="file"> 
```

然后只需将一个函数附加到元素的“onChange”函数。

编辑：刚刚注意到你正在使用 jQuery，所以你真的可以这样做：

```
$("#file").change(function() { selectFileClick(); }); 
```

# blackberry - 黑莓网络服务慢

> ID：10997268
> 
> 赞同：0
> 
> 时间：2012-06-12T13:03:09.770
> 
> 标签：blackberry

我在黑莓中开发了一个使用 .asmx Web 服务的应用程序，当互联网连接速度很慢时，来自 Web 服务的响应很慢。您认为使用 WCF Web 服务而不是 .asmx Web 服务可以在通信方面有所作为吗？我可以使数据传输快吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T13:08:08.233

如果只是“互联网连接速度慢”，那么除了减少正在传输的数据的占用空间之外，您无能为力。根据数据类型，您可以查看在客户端和服务器之间压缩内容。

显然，您需要进行自己的基准测试，以确保不会因额外的 CPU 处理而导致更多延迟。

# php - onchange 不工作 jquery.selectbox

> ID：10997269
> 
> 赞同：0
> 
> 时间：2012-06-12T13:03:09.853
> 
> 标签：php, jquery, jquery-plugins

在 onchange 事件在 jquery.selectbox-05 中不起作用，我使用两个下拉框，一个用于国家另一个州，如果我选择国家，该州将自动拾取它在正常的 php 下拉列表中工作，但我在 jquery.selectbox 中使用此代码它不起作用任何人都会帮助我

这是我的代码

```
<script type="text/javascript" src="scripts/jquery.selectbox-0.5.js"></script>
<script type= "text/javascript" src = "scripts/countries2.js"></script>
$(document).ready(function(){
    $('.selectBoxMedium').selectboxMedium();
    $('.selectBoxSmall').selectboxSmall();
    $('.selectBoxSmallest').selectboxSmallest();
    $('.selectBox').selectbox();
    $(document).pngFix(); 
});
<p class="formInput formSelectBox">
    <select onchange="print_state1('state',this.selectedIndex);" id="country" class= "selectBox data" name ="country"></select>
</p>

<p class="formInput formSelectBox">
    <select name ="state" id ="state" class="selectBox"></select>
    <script language="javascript">print_country1("country");</script>
</p> 
```

Javascript函数：

```
function print_country1(country_id) {
    // given the id of the <select> tag as function argument, it inserts <option> tags
    var option_str = document.getElementById(country_id);
    var x, i=0;
    for(x in country_arr){
        option_str.options[i++] = new Option(country_arr[x],country_arr[x]);
    }
}

function print_state1(state_id, state_index) {
    var option_str = document.getElementById(state_id);
    var x, i=0;
    state_index++;
    var state_arr = s_a[state_index].split("|");
    for(x in state_arr) {
        option_str.options[i++] = new Option(state_arr[x],state_arr[x]);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T14:13:22.397

这是你的问题......这个插件不处理动态选项。我的意思是，当您`$element.selectbox()`使用选择元素的实际选项执行插件时，如果您更改选项，则不会更新选择框。

因此，如果您有一个**没有选项**的选择元素并运行`selectbox`插件，它将创建一个没有选项元素的选择框。当您更改国家/地区并在选项中执行“重新加载”时，`select#states`所选国家/地区的所有州都将被加载并添加为`select#states`元素的选项，但插件`selectbox`在页面加载中执行并且不会重新加载其元素中的选项： (

如何解决？在您的情况下，您应该能够删除`select#state`（由选择框插件生成）的兄弟姐妹，使用新状态值更新选项，然后再次运行选择框插件:)

检查这个功能性[的jsfiddle](http://jsfiddle.net/uhQRZ/) :)

PS：这个小提琴适用于[countries-3.1.js](http://ufpr.dl.sourceforge.net/project/countries/Latest%20Version/countries-3.1.zip)，[jquery.selectbox-0.5](https://gist.github.com/1153573)并且没有 CSS

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-26T10:03:01.690

这个插件的问题是它不能处理 onchange() 事件，因为我们很生气。所以，这是解决方案..

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js" type="text/javascript" charset="utf-8"></script>
<script src="jquery.selectbox-0.5.js" type="text/javascript" charset="utf-8"></script>

<script type="text/javascript">
$(document).ready(function() {
    $('.items').selectbox();
                $('#country_input').blur(function(){
                   setTimeout(function(){
                       var e = document.getElementById("country");
                       var countryCode = e.options[e.selectedIndex].value;
                       getState('state',countryCode);
                   },500)                        

                });
});

</script>

<script type="text/javascript">
function getState(state_id, countryCode)
{
var option_str = document.getElementById(state_id);
option_str.length=0;
option_str.options[0] = new Option('Select State','');
option_str.selectedIndex = 0;
//write your code to get state list with the use of "countryCode"
var state_arr = stateListArray; //assume "stateListArray" is an array which is holding list of states
for (var i=0; i<state_arr.length; i++) {
    option_str.options[option_str.length] = new Option(state_arr[i],state_arr[i]);
}
$('#state').parent().children(':not(#state)').remove();
$('#state').selectbox();
}
</script>

<p>
<select id="country" class= "items" name ="country">
<option value="countryCode">Country Name</option>
</select> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T13:17:20.113

```
<script type="text/javascript" src="scripts/jquery.selectbox-0.5.js"></script>
<script type="text/javascript" src = "scripts/countries2.js"></script>
<script type="text/javascript">
$(document).ready(function(){
    $('.selectBoxMedium').selectboxMedium();
    $('.selectBoxSmall').selectboxSmall();
    $('.selectBoxSmallest').selectboxSmallest();
    $('.selectBox').selectbox();
    $(document).pngFix();

    $('.selectBoxMedium, .selectBoxSmall, .selectBoxSmallest, .selectBox').change(function() {
        alert($(this).attr('class') + ' has changed');
    });

    $('#country').change(function() {
        print_state1('state', $(this+':selected').index());
    });

    print_country1("country");
});
</script>
<p class="formInput formSelectBox">
    <select id="country" class="selectBox data" name="country"></select>
</p>

<p class="formInput formSelectBox">
    <select name="state" id="state" class="selectBox"></select>
</p> 
```

现在怎么办？

# java - 带有按钮的Android自定义对话框

> ID：10997273
> 
> 赞同：1
> 
> 时间：2012-06-12T13:03:17.410
> 
> 标签：java, android, xml, button

今天很简单的问题。当我尝试检索对对话框上按钮的引用时，我总是收到一个空值。

```
@Override
public void onRestart() {
    super.onRestart();

    //must prompt with modal dialog for pin
    Dialog dialog = new Dialog(this);
    dialog.setOwnerActivity(this);
    dialog.setCancelable(false);

    //check pin
    dialog.setCanceledOnTouchOutside(false);
    //set view to enterpin XML screen
    dialog.setContentView(R.layout.enterpin);
    //register button

    //show dialog
    dialog.show();
    //listen for button being clicked
    Button button = (Button) findViewById(R.id.pinlogin);
    button.setOnClickListener(new OnClickListener(){
        @Override
        public void onClick(View v){
            EditText editText = (EditText) findViewById(R.id.enterpin);
            int enteredPin = Integer.parseInt(editText.getText().toString());
            SharedPreferences sharedP = getPreferences(MODE_PRIVATE);
            int temp = sharedP.getInt("pin", 0);
            if(enteredPin==temp){
                pinCheck = true;
            }else{
                pinCheck = false;
            }
        }
    });
    if(pinCheck){
        dialog.dismiss();
    }

} 
```

是的，按钮存在，不，我没有拼错它的参考。是的，我已经清理了项目并重新启动了 Eclipse。当我清楚地调用 setContentView() 时，按钮如何不与视图关联？我敢肯定这很简单，我以前从未使用过对话框，一般来说是 GUI 新手。尤其是安卓

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-12T13:05:39.817

```
Button button = (Button)dialog.findViewById(R.id.pinlogin);
                        ^^^^^^ 
```

当你显示对话框时，你必须给予。`refrences of dialog`因为没有它，`Button refrences from main.xml`我的意思是从主视图`setContentView(R.layout.main);`。

# android - API中Google中所有街道和道路名称的列表

> ID：10997275
> 
> 赞同：13
> 
> 时间：2012-06-12T13:03:19.547
> 
> 标签：android, google-maps-api-3, gps

我正在做一个基于位置的应用程序。使用 GPS 时，它提供来自 Google API 的街道名称。当用户需要手动输入时，对于自动完成文本视图，我需要 Google API 中所有街道和道路的名称。使用 GPS 时，我在哪里可以获得 google API 提供的所有街道和道路名称？我到处搜索但徒劳无功:(提前致谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-12T15:49:40.553

据我所知，谷歌没有提供街道名称数据库供公众下载，但这个网站提供：[Open Street Map](http://www.openstreetmap.org/ "打开街道地图")

这些数据库可供免费下载。它们包含有关整个地球的地理信息。我希望你觉得它们有用。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-04-21T16:12:44.520

Google Places API 建议城市/街道名称等的搜索结果，您可以将其用于 AutoCompleteTextView。

这是一个正在运行的[JS 演示](https://developers.google.com/maps/documentation/javascript/examples/places-autocomplete?hl=de)，用于测试结果。

因为您使用 Maps API V3，所以这里是对[google.maps.places.Autocomplete的引用](https://developers.google.com/maps/documentation/javascript/reference?csw=1#Autocomplete)

[在这里](https://developers.google.com/places/training/autocomplete-android?hl=de)您可以找到适用于 Android 的 API。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-16T20:52:34.807

谢谢上面:)实际上我也找到了另一种方法.. google api返回的xml中街道和道路的名称被标记为“路线”..所以我解析了具有type =“route”的xml以仅获取道路和街名！！

# android - 使用 sed 操作 xml 文件

> ID：10997277
> 
> 赞同：1
> 
> 时间：2012-06-12T13:03:27.440
> 
> 标签：android, linux, bash, sed

我的 Strings.xml 文件包含以下代码：

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
<string name="hello">myurl</string>
<string name="app_name">MyApp</string>
</resources> 
```

我想使用命令行将 myurl 的值操作到用户给定的 URL。

我正在使用的命令是

```
sed s/myurl/http://192.168.1.1:8080/ strings.xml 
```

但它抛出了一个错误：sed: 1: "s/myurl/http://192.168\. ...": 替代命令中的错误标志：'/'

这是由两个斜杠 (//) 引起的。有什么方法可以将值传递给 sed 命令？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T13:05:16.920

您可以在 sed 中使用其他分隔符，例如`!`：

```
sed 's!myurl!http://192.168.1.1:8080/!' strings.xml 
```

（丑陋的）替代方法是逃避它们：

```
sed 's/myurl/http:\/\/192.168.1.1:8080\//' strings.xml 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T13:06:02.787

`\`在所有转义符号之前使用。

# php - 改进将字符串转换为可读 url

> ID：10997279
> 
> 赞同：3
> 
> 时间：2012-06-12T13:03:29.883
> 
> 标签：php, regex, url, url-rewriting, slug

以下函数重写包含各种字符的新闻和产品标题的 url。我希望创建的字符串仅包含字母数字值和“-”，但没有结尾“-”或空格，也没有重复的“-”。下面的函数工作正常，但我想知道是否有任何方法可以更简单或更高效地编写它？

```
function urlName($string) {
    $string = trim($string);                          // no open ends
    $string = strtolower($string);                    // all lowercase
    $string = strtr($string, 'äöåÄÖÅ', 'aoaaoa');     // substitute umlauts
    $string = preg_replace('/[\W]+/', '-', $string);  // substitute non-word characters with -
    $string = preg_replace('/^-*|-*$/', '', $string); // no beinging or ending -
    return $string;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T13:46:58.163

我认为您的代码可以压缩为：

```
function urlName($string) {
    $patterns = array('/^[\s-]+|[\s-]+$/', '/[\W]+/');
    $replacements = array('', '-');

    $string = strtr(strtolower($string), 'äöåÄÖÅ', 'aoaaoa');
    // or you can use:
    // $string = strtr(strtolower($string), $someTrMapping);

    return preg_replace($patterns, $replacements, $string);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T13:16:48.350

我经常使用这个：

```
function simpleText($s) {
    $rpl = array(
        "À" => 'A', "Á" => 'A', "Â" => 'A', "Ã" => 'A', "Ä" => 'A', "Å" => 'A',
        "à" => 'a', "á" => 'a', "â" => 'a', "ã" => 'a', "ä" => 'a', "å" => 'a',
        "Ò" => 'O', "Ó" => 'O', "Ô" => 'O', "Õ" => 'O', "Ö" => 'O', "Ø" => 'O',
        "ò" => 'o', "ó" => 'o', "ô" => 'o', "õ" => 'o', "ö" => 'o', "ø" => 'o',
        "È" => 'E', "É" => 'E', "Ê" => 'E', "Ë" => 'E',
        "è" => 'e', "é" => 'e', "ê" => 'e', "ë" => 'e',
        "Ç" => 'C',
        "ç" => 'c',
        "Ì" => 'I', "Í" => 'I', "Î" => 'I', "Ï" => 'I',
        "ì" => 'i', "í" => 'i', "î" => 'i', "ï" => 'i',
        "Ù" => 'U', "Ú" => 'U', "Û" => 'U', "Ü" => 'U',
        "ù" => 'u', "ú" => 'u', "û" => 'u', "ü" => 'u',
        "Ÿ" => 'Y',
        "ÿ" => 'y',
        "Ñ" => 'N',
        "ñ" => 'n'
    );

    $s = preg_replace('`\s+`', '_', strtr($s, $rpl));
    $s = strtolower(preg_replace('`_+`', '_', preg_replace('`[^-_A-Za-z0-9]`', '', $s)));
    return trim($s, '_');
} 
```

# tree - 刷新树查看器

> ID：10997281
> 
> 赞同：0
> 
> 时间：2012-06-12T13:03:32.827
> 
> 标签：tree, eclipse-rcp, rcp, viewer, cnf

我正在为我的项目浏览器视图使用通用导航器框架（CNF）。我已经为树查看器设置了内容提供者和标签提供者。当我的应用程序内部数据发生变化时，我还需要更新树视图（例如，就像添加节点、删除节点一样）。

对于这种情况，我尝试刷新树查看器。并且刷新操作成功。但是在刷新操作之后，树查看器选择会到达查看器中最顶层的父节点。但相反，我需要在新添加的节点或新添加的节点的父节点上进行选择。如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T21:39:34.100

Treeviewer 要求您在查看器中的对象上实现 hashCode() 和 equals()。同样，您应该向查看器提供一个 IElementComparer。

Eclipse 论坛的提示：http: [//www.eclipse.org/forums/index.php/t/166563/](http://www.eclipse.org/forums/index.php/t/166563/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T07:51:48.133

您可以手动设置选择并在树查看器中显示它：

```
//after the refresh operation
treeViewer.setSelection(new StructuredSelection(newlyAddedNode, true)); 
```

# android - 有时我的应用程序因 UnknownHostException 而崩溃

> ID：10997289
> 
> 赞同：1
> 
> 时间：2012-06-12T13:04:14.310
> 
> 标签：android, url, unknown-host

在我的应用程序中，我可以访问 Web 服务器。它在某些手机中运行良好，但在**三星 Galaxy 型号 - GT-S5830i Android 版本 - 2.3.6**中进行测试时， 它一直显示未知主机异常。我已经检查了浏览器中的 url 它工作正常。

```
private void submitUploadData(String url ,Map<String, String> param) throws IOException 
{  
    URL siteUrl;
    try {
        siteUrl = new URL(url); 
    HttpURLConnection conn = (HttpURLConnection) siteUrl.openConnection();
    conn.setRequestMethod("POST");
    conn.setDoOutput(true);
    conn.setDoInput(true);

    DataOutputStream out = new DataOutputStream(conn.getOutputStream());

    Set getkey = param.keySet();
    Iterator keyIter = getkey.iterator();
    String content = "";
    for(int i=0; keyIter.hasNext(); i++) {
        Object key = keyIter.next();
        if(i!=0) {
            content += "&";
        }
        content += key + "=" +  param.get(key);
    } 
    out.writeBytes(content.trim()); 
    out.flush();
    out.close();
    BufferedReader in = new BufferedReader(new InputStreamReader(conn.getInputStream())); 
    String line = "";
    while((line=in.readLine())!=null) {
        System.out.println(line);
    }
    in.close();  
    //Intent home = new Intent(SyncHttp.this,TimeAndExpensesSKActivity.class);
    //startActivity(home);
    db.updateTimeExported(1);
    db.updateExpensesExported(1);
    db.close();
    db.close(); 

    if(db.getLogCount()==0){ 
            db.insertSyncDateDetails(getDateandTime());}
            else{
            db.updateSyncDateDetails(1, getDateandTime());}  

    } catch (MalformedURLException e) { 
        e.printStackTrace();
    }
    this.setResult(FINISH_RESULT);
    db.close();
} 
```

我已经添加了权限

```
 <uses-permission android:name="android.permission.INTERNET" />
 <uses-permission android:name="android.permission.CAMERA" />
 <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>
 <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
 <uses-permission android:name="android.permission.READ_PHONE_STATE"/> 
```

我真的很困惑为什么会发生这种异常。

谢谢你们的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T13:23:24.563

我在三星 Galaxy TAB 上使用 URLConnections 尤其是 HTTPS 时也遇到了一些问题，但我想它也可能发生在其他型号上，因为有大量同名的设备是为不同的市场和移动提供商制造的。

到目前为止，我还没有找到解决办法，因为我倾向于避免使用 URLConnection 类，因为它有很多其他问题。

我建议使用 Apache HTTP 客户端与您的 API 进行通信。你可以在谷歌上搜索大量使用它的例子。

另外，在查看您的代码时，我建议您对 java 中的 try-catch-finally 块语句进行更多阅读。在最后或出现错误时正确关闭连接非常重要。

其他可能性是：

1.  没有任何活动的连接（移动或wifi）

2.  您缺少“http://www”。在您的网址中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T13:23:31.780

我的应用程序也这样做了。这通常是由于网络连接不稳定造成的。我所做的就是抓住这个`UnknownHostException`并修改代码，如果`UnknownHostException`发生这种情况，我会在几毫秒的睡眠后再次尝试重新获取 URL。

基本算法是这样的：

```
private void submitUploadData(String url ,Map<String, String> param) throws IOException 
{  
    URL siteUrl;
    boolean isDataSubmitted = false;
    while(!isDataSubmitted){
        try {
            //do your complicated http process
            isDataSubmitted = true;
        } catch(UnknownHostException uhe){
            e.printStackTrace();
        } catch (MalformedURLException e) { 
            e.printStackTrace();
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T13:24:33.817

我认为在收到输入之前在 DataOutputStream 上调用 close() 可能会关闭整个连接 - 尝试注释掉该行。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-12T13:21:38.207

您是否检查过手机浏览器中的 URL？请记录您传递给函数的 URL，然后在手机的浏览器中尝试。我会想到缺少/不正确的协议说明符和/或 URL 字符串形成问题，这个特定的电话是不可原谅的。

# javascript - 当数量未知时，有没有办法遍历所有 jwplayer 实例？

> ID：10997291
> 
> 赞同：2
> 
> 时间：2012-06-12T13:04:15.303
> 
> 标签：javascript, loops, jwplayer

看似简单的问题，但我在 jwplayer javascript API 中没有看到任何可以让我找到答案的东西。

我正在尝试遍历页面上 jwplayer 对象的所有实例，而不跟踪页面上可能存在的数字。

有谁知道这样做的方法？

我现在使用的解决方案是：

```
var maxPlayers = 20;
for(var i = 0; i < maxPlayers; i++) {           
    if(jwplayer(i)) {
        // execute code on jwplayer instance here
    }       
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-12T13:13:39.600

您可以继续循环直到`jwPlayer`返回 null：

```
var i = 0;
while (true) {
    var player = jwPlayer(i);
    if (!player)
        break;

    ...
    i++;
} 
```

或者，更简洁地说，

```
var i = 0;
while (player = jwPlayer(i++)) {
    ...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T13:18:16.887

您需要在插入它们时跟踪它们，如下所示：

```
var players = [];
function playerReady(obj) {
    players.push(document.getElementById(obj.id));
}; 
```

然后，做一些事情：

```
for (var player in players) {
    players[player].sendEvent("STOP");
} 
```

# ios - 学习最新的核心数据的最佳书籍是什么

> ID：10997293
> 
> 赞同：4
> 
> 时间：2012-06-12T13:04:31.880
> 
> 标签：ios, core-data

我正在寻找最新的东西，iOS5 和 Xcode 4.2。**我不是苹果文档的粉丝**，我正在寻找一本好书。我使用 Core Data 的目标是学习 CRUD 操作、如何建立关系、保存照片/视频以及在 Core Data 中存储对它们的引用等。

我遇到过几个：

1.  [http://amzn.to/LhAZIu](http://amzn.to/LhAZIu) Pro Core Data for iOS，第二版（似乎是最新的）
2.  [http://amzn.to/MGM6gi](http://amzn.to/MGM6gi)核心数据：Apple 在 Mac OS X 上用于持久化数据的 API（人们对此给予了很高的评价，但它是从 2009 年开始的，现在似乎已经绝版了）
3.  [http://amzn.to/LyHffu](http://amzn.to/LyHffu) iOS 核心数据：为 iPad、iPhone 和 iPod touch 开发数据驱动的应用程序（关于这一点的评论不多）

还有其他建议还是我应该选择其中之一？如果它们涵盖了我正在寻找的内容，我不反对查看一些好的教程。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T14:12:04.983

我建议你同时阅读 1 和 3。它们涵盖了 Core Data 中的很多内容，而且非常完整。它们没有更新到 iOS 5 API，但我认为它们提供了基本和中级概念来理解这个框架发生了什么。

**Marcus Zarra**的书 (2) 没有更新到新的 iOS 5 API，我也认为它不能再购买了。但仍然有效。

此外，您还可以在**Marcus Zarra**或[raywenderlich的](http://www.raywenderlich.com/)[Cocoa 是我的女朋友](http://www.cimgf.com/)博客上找到有价值的教程。

 **也看看[ideveloper.tv](http://ideveloper.tv/)。该网站销售有关 Core Data（以及更多）的视频。内容已更新以反映 iOS 5 API，并由**Marcus Zarra**解释。

最后，您还可以看到[https://stackoverflow.com/questions/1939/how-to-articles-for-iphone-development-and-objective-c](https://stackoverflow.com/questions/1939/how-to-articles-for-iphone-development-and-objective-c)。

希望有帮助。**

# java - 带有 onPostExecute 的 Android AsyncTask 错误

> ID：10997300
> 
> 赞同：0
> 
> 时间：2012-06-12T13:04:48.840
> 
> 标签：java, android, android-asynctask

我有一个关于 android 中的 AsyncTask 类的问题，以及为什么它给我一个错误。我在这里定义了一个内部类..

```
class MyTask extends AsyncTask<String,String,Integer>{

            Context context;
                ProgressDialog dialog;
                MyTask(Context c)
                {
                    this.context = c;
                }

                //@Override
                protected void onPreExecute()
                {
                     dialog = new ProgressDialog(context);
                dialog.setMessage("Scanning Ports!");
                    dialog.show();
                }
                @Override
                protected Integer doInBackground(String... params) {
                    // TODO Auto-generated method stub
                    for(intBeg =  intBeg; intBeg <= intEnd; intBeg++             
                    {
                        try
                        {
                        Socket s = new Socket(strMachine, intBeg);
                        isConnected += strMachine + " Is Listening On Port: " + intBeg + "\n";
                        Log.d("PORTSCAN", isConnected);
                        s.close();
                        }catch(Exception e){
                            notConnected += strMachine + " Is Not Listening On Port: " + intBeg + "\n";                         
                            //Toast.makeText(getBaseContext(), e.getMessage(), 3000).show();
                            Log.d("PORTSCAN", notConnected);

                        }
                    }

                    return 1;
                }

                protected void onPostExecute(Integer... params)
                {

                }
                protected void onProgressUpdate(String... params)
                {

                }

            } 
```

但是，当 doInBackground 完成时，它应该调用 onPostExecute()，而这永远不会发生。即使我尝试在 onPostExecute() 上使用“@Override”注释，它也会给我一个错误，说 onPostExecute 必须覆盖超类方法。我不明白发生了什么！有什么帮助吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T13:08:49.933

`onPostExcecute(Integer result)`接受一个参数（没有...）。

如果参数不匹配，它将不匹配超级方法，因此不会覆盖它（并被调用）。一般来说，如果`@Override`给你一个错误，你的方法名称/参数有问题（或者超类没有这样的方法）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T13:10:42.517

```
 protected void onPostExecute(Integer params)//its single Integer object, not array of Integer objects 
```

它的 java [Varargs](http://docs.oracle.com/javase/1.5.0/docs/guide/language/varargs.html)。`and you can't change parameter of overrided method`,你只需改变覆盖方法的行为。及其方法`AsyncTask Class.`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T13:16:08.023

只需使用这个 onPostExecuteMethod

```
@Override
protected void onPostExecute(Integer result) {
    super.onPostExecute(result);
    Log.e("LOG", " on Post");
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-12T13:17:34.980

检查此代码

```
private class DownloadingProgressTask extends
        AsyncTask<String, Void, Boolean> {

    private ProgressDialog dialog = new ProgressDialog(ShowDescription.this);

    /** progress dialog to show user that the backup is processing. */

    /** application context. */

    protected void onPreExecute() {
        this.dialog.setMessage("Please wait");
        this.dialog.show();
    }

    protected Boolean doInBackground(final String... args) {
        try {
            downloadFile(b.getString("URL"));
            return true;
        } catch (Exception e) {
            Log.e("tag", "error", e);
            return false;
        }
    }

    @Override
    protected void onPostExecute(final Boolean success) {

        if (dialog.isShowing()) {
            dialog.dismiss();
        }

        if (success) {
            Toast.makeText(ShowDescription.this,
                    "File successfully downloaded", Toast.LENGTH_LONG)
                    .show();
            imgDownload.setVisibility(8);
        } else {
            Toast.makeText(ShowDescription.this, "Error", Toast.LENGTH_LONG)
                    .show();
        }
    }

} 
```

# javascript - 如何自定义“ui-slider-handle”背景图像？

> ID：10997301
> 
> 赞同：0
> 
> 时间：2012-06-12T13:04:50.510
> 
> 标签：javascript, jquery-ui, jquery

我的页面中有两个范围滑块，我想为每个滑块实现不同的控制图像。我改变了`ui-slider-handle`，但这影响了两个滑块。有没有办法单独更改每个滑块？或者其他具有此功能的方式？

[到目前为止我的代码...]http://jsfiddle.net/hari034/EQ2zx/3/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T13:19:17.473

您的 jsfiddel 很混乱，也许我做对了：更改您的 css 规则

```
#time .ui-slider
{
    ...
}

#fare .ui-slider
{
    ...
} 
```

如果这不是答案，请更具体或更新您的小提琴。

# objective-c - 从 UIViewController 内部在 iOS Objective-C 中绘制 4.000 个点或线

> ID：10997315
> 
> 赞同：0
> 
> 时间：2012-06-12T13:05:52.167
> 
> 标签：objective-c, ios, nsarray, cgpoint

我有一个超过 4.000 CGPoints 的 NSArray

```
[NSArray arrayWithObjects:
                   [NSValue valueWithCGPoint:CGPointMake(213, 30)], ... 
```

并想从我的 UIViewController 中绘制它们之间的点或线。iOS设备的最佳方式是什么？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T13:33:02.430

听起来您正在尝试使用精灵或粒子生成？在不知道更多细节的情况下，我只能给出一个笼统的答案，但让我试一试。让我们假设这些点都是简单的 1 像素彩色物体。不需要渐变或路径，只需“将 x、y 处的像素设置为红色/绿色/蓝色”。

您应该能够轻松地`CALayer`同时操作 4,000 个对象：

```
CALayer *rootLayer = [[self view] layer]; // assumes self is a view controller
NSMutableArray *mSprites = [NSMutableArray array]; // to store references to the layers

for (int i = 0; i < 4000; i++) {
    CALayer *layer = [CALayer layer];
    NSAssert1(layer != nil, @"failed to create CALayer #%i", i);

    layer.backgroundColor = [UIColor colorWithRed:... green:... blue:... alpha:1.0].CGColor;
    layer.frame = CGRectMake(rand(), rand(), 1.0, 1.0);

    [mSprites addObject:layer];
    [rootLayer addSublayer:layer];
}

self.my4000SpritesProperty = mSprites; 
```

然后，当需要操作它们时，进入数组`self.my4000SpritesProperty`并更改图层的框架或其他属性。

对于 4,000 个元素，您应该会看到 Core Animation 的性能可以接受。

# java - 如何覆盖 FetchType.EAGER 在运行时变得懒惰

> ID：10997321
> 
> 赞同：14
> 
> 时间：2012-06-12T13:06:08.307
> 
> 标签：java, hibernate, jpa, persistence

使用 JPA EntityManager 和 JPA Query 对象，我如何覆盖具有注释 @OneToMany(fetch = FetchType.EAGER) 以在查询中延迟获取的内容？

如果我有休眠查询对象，我可以让它创建一个条件对象并使用它，将获取类型设置为惰性。但我必须使用 JPA Query 对象。这个问题有什么解决办法吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-12T13:58:05.637

即使使用本机 Hibernate API，也无法做到这一点。如果关联被定义为 EAGER，它将始终被急切地加载，并且无法使用查询来更改它。

反之则不然：您可以使用查询急切地加载惰性关联。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2017-09-26T15:55:40.320

查看 Hibernate Fetch 配置文件或 JPA 实体图。自从您在 2012 年提出该问题以来，此问题已得到解决。

# java - response.getOutputStream().write(buffer) 的 Servlet 类中的 XSS 漏洞问题

> ID：10997331
> 
> 赞同：2
> 
> 时间：2012-06-12T13:06:47.670
> 
> 标签：java, servlets, xss

我正在针对我的模块的代码审计报告修复问题。问题是 XSS 漏洞。它报告了语法 response.getOutputStream().write(buffer); 的问题。如何解决？我做了足够的功课，发现 OWASP 推荐的 ESAPI 可以帮助我修复它，但是如何实现呢？问题出在 servlet 类中？或任何其他api或其他任何东西可以帮助我修复它？请分享您的相关经验。

```
FileOutputStream fos = null;
        FileInputStream fileInuptStream =null;
        BufferedInputStream bufferedInputStream = null;
        ByteArrayOutputStream byteArrayOutputStream =null;
        try{
           ServletContext servletContext = request.getSession().getServletContext();
            File attachmentDir = new File(servletContext.getRealPath("")+File.separator+"Reports" );
            String uploadDir=attachmentDir.getPath();
            if (!attachmentDir.exists()) {
                attachmentDir.mkdirs();
            }

            HSSFWorkbook wb= new HSSFWorkbook();
             AAAA  aaa=new AAAA();          
            wb=aaa.getExportXLS(request, response, fileName, wb);
             if(request.getSession().getAttribute("SESSION_AAAAA")!=null){
                    request.getSession().removeAttribute("SESSION_AAAAA");
            }           
              fos=new FileOutputStream(uploadDir+File.separator+fileName);
            wb.write(fos);

            File fileXls=new File(uploadDir+File.separator+fileName);
              fileInuptStream = new FileInputStream(fileXls);
              bufferedInputStream = new BufferedInputStream(fileInuptStream);
              byteArrayOutputStream = new ByteArrayOutputStream();
            int start = INT_ZERO;
            int length = ONE_ZERO_TWO_FOUR;
            int offset = MINUS_ONE;
            byte [] buffer = new byte [length];
            while ((offset = bufferedInputStream.read(buffer, start, length)) != -1)
                byteArrayOutputStream.write(buffer, start, offset);

            buffer = byteArrayOutputStream.toByteArray();

            response.setHeader("Expires", "0");
            response.setHeader("Cache-Control", "must-revalidate, post-check=0, pre-check=0");
            response.setHeader("Pragma", "public");
            response.setContentType("application/xls");
            response.setHeader("Content-disposition","attachment; filename="+fileName );
            response.setContentLength((int ) fileXls.length());
            response.getOutputStream().write(buffer);  --- REPORTED AT THIS LINE
            response.getOutputStream().flush(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T09:40:15.220

Need to validate the input and output as request is directly taken as input in the method. use ESAPI to validate the buffer field using getValidatedFileContent() from ESAPI. validate the fileName field for the fileName Injection attack. Also any filed that is taken as output from the method having request as input should be validated strictly.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T14:12:42.647

这是一个错误的警告。此 servlet 返回由 Apache POI 创建的 XLS 文件，而不是 HTML 文档。不可能有 XSS 攻击的手段。

然而，此代码相当笨拙且效率低下。它在扩展的 WAR 文件夹中创建一个文件（当重新部署 WAR 时无论如何都会丢失），然后它将其全部内容完全复制到服务器的内存中，而不是直接写入响应。可能这种笨拙的方法混淆了审计工具。你应该只是传递`HttpServletResponse#getOutputStream()`给`Workbook#write()`。

这是基于迄今为止发布的代码的完整重写：

```
HSSFWorkbook wb = new HSSFWorkbook();
AAAA aaa = new AAAA();          
wb = aaa.getExportXLS(request, response, fileName, wb);
response.setHeader("Expires", "0");
response.setHeader("Cache-Control", "must-revalidate, post-check=0, pre-check=0");
response.setHeader("Pragma", "public");
response.setContentType("application/xls");
response.setHeader("Content-disposition", "attachment; filename=" + fileName);
wb.write(response.getOutputStream()); 
```

# vhdl - FIFO 控制信号和用于路由逻辑的位提取

> ID：10997340
> 
> 赞同：1
> 
> 时间：2012-06-12T13:07:18.790
> 
> 标签：vhdl, fpga

我目前正在用 VHDL 构建一个片上网络路由器，以便在 FPGA 上实现一个 64 核 2-D MESH 网络。每个核心都有自己的路由器，每个路由器有 5 个端口（北、南、西、东，与处理单元通信的本地端口）每个端口都有一个输入FIFO和一个OUTPUT FIFO。因此输入 FIFO 与下一个目的路由器的 outpuf fifo 通信，该端口的输出 fifo 与源路由器的输入 fifo 通信。

我的问题是我没有使用有限状态机来控制 FIFOS write/read_eneable 和 FIFO_FULL FIFO_EMPTY 信号，我不知道必须在哪里使用这些信号才能使路由器工作。

我的 FIFO 由 xilinx CORE Generator 生成，它是一个具有以下信号的同步 FIFO：输入：时钟、数据输入、read_enable、write_enable。输出：Data_out、fifo_full、fifo_empty、数据包的前 6 位。最后一个输出用于从FIFO中取出数据包的前6位，以便用于XY路由块的路由决策。

所以我的问题是我无法理解如何控制 FIFO 的 write/read_enable 和 fifo_full/empty，以及如何提取 6 位以便将它们发送到路由块。

先感谢您。

Ps 如果有什么不清楚的地方，请让我提供进一步的细节。

****__ *_* __ *_* __ *_* __ *_* ___***回答*****__ *_* __ *_* __ *_* __ *_* __ *_* ____******

 ****您好，西蒙！我非常感谢您花时间回答您的问题。

基本上我要处理 32 字节的数据包。所以我必须找到一种方法将数据包分成 flit，然后当 flit 进入 FIFO 时，前 6 位将用于路由。这样我可以模拟随机流量。

举个例子让你明白。一个 16 核的网状网络具有以下坐标： 30 31 32 33 20 21 22 23 10 11 12 13 00 01 02 03

所以想象一下，这 2 位数字中的每一个都代表一个路由器。在这种情况下，我们需要 4 位而不是 6。所以当 4 位进入 XY 路由块时。前 2 位与坐标的第一位进行比较，后 2 位与坐标的第二位进行比较。

因此，如果我们想从路由器 00 到路由器 22，进入路由器 00 的数据将必须定向到该路由器的正确输出。因此，如果目的地是 22，那么我们首先进行 X 轴路由，因此飞行物将离开东端口并移动，直到它们到达路由器 02，然后它们将成为 Y 轴的路由器以前往路由器 22。

我希望你能明白我在说什么！

如果没有，请告诉我！

带着敬意

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T14:57:13.200

*   控制一个**输入FIFO**：使用那个输入FIFO的满信号和对应的输出FIFO的空信号来产生写使能信号（条件：当输入FIFO未满且输出FIFO非空时写入，即新数据可用并且可以写）
*   控制**输出 FIFO**：使用相应输入 FIFO 的读使能信号作为写使能（如果数据被读取，则必须从输出 FIFO 中删除，以避免被输入 FIFO 多次读取）

我不明白你在用你提到的 6 位做什么。这是输出 FIFO 的数据项应该写入的输入 FIFO 的地址吗？如果您澄清，我可以更新我的回复。****

# ios - 对 iPod 库中的文件进行 iOS FFT

> ID：10997343
> 
> 赞同：0
> 
> 时间：2012-06-12T13:07:37.143
> 
> 标签：ios, xcode, core-audio, fft

我是核心音频的新手，一段时间以来我一直在努力解决如何做到这一点，我希望有人能指出我正确的方向。

我正在为分配创建一个应用程序，我希望用户从 iPod 库（MPMediaPickerontroller？）中选择一个文件，然后对所述文件执行 fft 以检测音高。

我有选择文件并将其位置保存为 NSURL 的代码工作，我有适用于 OSX 的代码，它将从 URL 播放文件！由于我无法理解的原因，我无法让这部分在 iOS 上工作。

我还看到了许多使用远程 i/o 来填充缓冲区来实现 FFT 的示例代码，但我无法从 iPod 库中弄清楚如何做到这一点。

任何人都可以帮忙吗？Idealluy 向我指出一些示例代码，它们将向我展示如何最好地完成其中一些任务？我查看了以前的线程，看不到任何我需要的东西。

提前谢谢了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T07:08:07.930

既然你的歌曲有一个 NSURL 链接，为什么不尝试使用`AVFoundation`FFT 部分。既然你有 url 它是完美的，因为播放器`AVFoundation`通过 URL 导入歌曲。

# sql - 获取更新/更改语句的两个 SQL 转储的区别？

> ID：10997349
> 
> 赞同：2
> 
> 时间：2012-06-12T13:07:46.137
> 
> 标签：sql, database

是否有专注于获取两个数据库导出、查找差异并为其创建更新/更改语句的库？基本上是从出口 A 到出口 B 的更新脚本。

例如这个：

```
-- Version 1
CREATE TABLE IF NOT EXISTS `mytable` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `title` varchar(255) NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=MyISAM  DEFAULT CHARSET=latin1 AUTO_INCREMENT=1 ;

-- Version 2
CREATE TABLE IF NOT EXISTS `mytable` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `title` varchar(255) NOT NULL,
  `description` text,
  PRIMARY KEY (`id`)
) ENGINE=MyISAM  DEFAULT CHARSET=latin1 AUTO_INCREMENT=1 ;

-- Would result in this:
ALTER TABLE `mytable`
  ADD `description` text; 
```

**编辑：**这个问题与 MySQL 的*库*有关，而不是工具。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T13:22:57.333

有一些*MySQL*比较工具。

*   [SQLyog](http://www.webyog.com/en/sqlyog_feature_matrix.php)
*   [Redgate MySQL 比较](http://mysql-compare.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T13:12:17.060

RedGate [http://www.red-gate.com/products/sql-development/sql-compare/index-b](http://www.red-gate.com/products/sql-development/sql-compare/index-b)提供了一个非常好的和稳定的解决方案。

我相信 Visual Studio 2010 的终极版也可以比较模式，但我不确定它是否会为您生成 ALTER 脚本。

**编辑：** 我也只记得这个[http://opendbiff.codeplex.com/](http://opendbiff.codeplex.com/)但是我上次看它时运气不太好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-09-21T13:04:33.403

这个节点模块可能很有用。它区分实时数据库，但是从 SQL 转储创建实时数据库应该很简单。

[https://github.com/contra/dbdiff](https://github.com/contra/dbdiff)

# actionscript-3 - AS3：如何使用GTween？

> ID：10997350
> 
> 赞同：0
> 
> 时间：2012-06-12T13:07:54.690
> 
> 标签：actionscript-3, animation, tween

我正在使用最新版本的 SDK 和 FlashDevelop。到目前为止，我的设置一切正常，包括外部库。但是当我使用[GTween](http://gskinner.com/libraries/gtween/)时，什么也没有发生。完全没有。我已经尝试了几个包含的示例和一些我自己的代码，我得到的只是一个空白窗口或没有任何移动。没有错误，也没有行动。

有人可以粘贴一些只加载 GTween 并让它移动精灵的最小代码吗？我想有一个已知的比较好，这样我就可以看看我是否遗漏了一些明显的东西，或者是否有一些奇怪的事情发生。

谢谢！:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T16:17:15.610

我刚刚下载了 GTween 并将 com 文件夹复制到我的源...

...这很好用：

```
package{
   import com.gskinner.motion.GTween;

   import flash.display.Sprite;

   public class GtTest extends Sprite{

     public function GtTest(){
           var ball:Sprite = new Sprite();
           ball.graphics.beginFill(0xFF0000);
           ball.graphics.drawCircle(300,300,10);
           addChild(ball);
           var myTween:GTween = new GTween(ball, 2, {x:100, y:100}, {swapValues:true});
      }
   }
} 
```

希望有帮助；）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T15:27:55.650

您确定要编译到您拥有的 flashplayer 版本吗？您的播放器可能需要更新。很难从这些信息中看出可能是什么问题。

GTween 也可以，我在一个项目中使用它并且最近使用它，但有更好的选择。（gtween 最后一次更新是在 2009 年）

我一直在使用[eaze](http://code.google.com/p/eaze-tween/)，但我知道大多数 as3-ers 都涌向 TweenLite（这是有充分理由的）。

# sparse-matrix - 使用二叉搜索树实现稀疏矩阵

> ID：10997355
> 
> 赞同：0
> 
> 时间：2012-06-12T13:08:33.907
> 
> 标签：sparse-matrix

我必须实现一个稀疏矩阵（一个以零为主的矩阵，所以你只记录不同于 0 的值），但我必须使用二叉搜索树来实现它。

**编辑：**

所以现在我正在考虑通过使用行/列作为键来实现它，但是我用什么作为那棵树的根呢？

**/编辑**

我希望一旦我研究了二叉搜索树，我就会明白这种实现会有什么好处，或者至少是可能的，但我这辈子都想不通。

我试过谷歌无济于事，我自己也无法想象如何尝试这样做。

我还没有决定用什么语言来实现它，所以我不需要代码示例，我的问题是逻辑。我需要看看这甚至会如何工作。

PS我不知道要使用什么标签，如果有人可以编辑一些，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T13:14:52.203

要使用二叉树，您需要有一个对矩阵中的每个（可能）条目都不同的键。因此，如果您想在矩阵 [100, 100] 中查找 (2, 4)，则键可能类似于“002004”。使用此键，您可以将值插入树中。

对于每个维度，键会更长，因此您还可以考虑使用散列函数来散列单元格的坐标，并且在树中，您有此散列键的条目列表。然后，树只是右列表的索引。然后，您需要在列表中执行顺序搜索。或者，如果您订购列表，您可以通过使用二进制搜索来改进。

# regex - 用于不忽略请求参数的 nginx 规则

> ID：10997356
> 
> 赞同：3
> 
> 时间：2012-06-12T13:08:40.987
> 
> 标签：regex, redirect, configuration, nginx

好的，我只想在`/search`调用时添加参数：

```
rewrite ^/search$ /search?foo=bar redirect; 
```

看似简单的逻辑，但它会导致无限循环，因为 nginx 单独获取参数，因此`$`不再工作。`/search?foo=bar`一次又一次地触发它，因为它愚蠢地匹配。

那么有没有任何可行的解决方案而不接触`$args`？

（我想使用正则表达式，因为匹配规则有点复杂，但基本上是我想要的）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T13:43:12.243

根据[nginx wiki](http://wiki.nginx.org/HttpRewriteModule#rewrite)，“重写只对路径进行操作，而不是参数。”

所以也许关键是只有在没有找到参数的情况下才重写。

```
 if ($args !~ "(^|&)foo=") {
        rewrite ^/search$ /search?foo=bar redirect;
    } 
```

# php - 如何获取 php_ESL.dll 并从 XAMPP 中的 php 加载它以将其与 Mod 事件套接字一起用于 freeswitch

> ID：10997361
> 
> 赞同：0
> 
> 时间：2012-06-12T13:08:55.217
> 
> 标签：php, freeswitch

我在 Centos 6 远程服务器上运行了 freeswitch，并且我在本地机器（windows 7 x64 PHP 版本 5.3.8）上安装了 XAMPP 进行测试。我正在尝试使用 Mod 事件套接字（[http://wiki.freeswitch.org/wiki/Event_Socket](http://wiki.freeswitch.org/wiki/Event_Socket)）从 php 脚本连接到 freeswitch，使用事件套接字库（[http://wiki.freeswitch.org/wiki/Event_Socket_Library](http://wiki.freeswitch.org/wiki/Event_Socket_Library)）。

我的php脚本是：

```
#!/usr/bin/php

<?php

require_once('ESL.php');

$command = "show channels";
$sock = new ESLconnection('xxx.xxx.xxx.xxx', '8021', 'fsAdmin');
$res = $sock->api($command);
printf("%s\n", $res->getBody());

?> 
```

其中 xxx.xxx.xxx.xxx 是 freeswitch 服务器的地址。

我有两个问题：

*   在 Windows 中，我似乎需要一个我在任何地方都找不到的**php_ESL.dll 。**我得到的唯一文件是：

    *   ESL.php
    *   esl_wrap.cpp
    *   生成文件
    *   php_ESL.h
*   我有 PHP 版本 5.3.8，在 ESL.php 中使用了 dl() 函数，我得到：**致命错误：调用 C:\xampp\htdocs\phpesl\ESL.php 中的未定义函数 dl()**

    +在 ESL.php 中调用了 dl() 函数：

    ```
     // Try to load our extension if it's not already loaded.
      if (!extension_loaded("ESL")) {
      if (strtolower(substr(PHP_OS, 0, 3)) === 'win') {
        if (!dl('php_ESL.dll')) return;
      } else {
        // PHP_SHLIB_SUFFIX is available as of PHP 4.3.0, for older PHP assume 'so'.
        // It gives 'dylib' on MacOS X which is for libraries, modules are 'so'.
        if (PHP_SHLIB_SUFFIX === 'PHP_SHLIB_SUFFIX' || PHP_SHLIB_SUFFIX === 'dylib') {
          if (!dl('ESL.so')) return;
        } else {
          if (!dl('ESL.'.PHP_SHLIB_SUFFIX)) return;
        }
      }
    } 
    ```

有人知道如何解决这个问题或遇到同样的问题吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T21:42:10.183

可能最少的努力就是在某个地方拥有一个 Linux 网络服务器 - 例如，在你的 Windows PC 上的虚拟机中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-27T12:30:23.053

在您的问题中，我认为`dl function`在 php.ini 文件中已禁用。

phpmotion 需要这些 PHP 设置：

```
Thread saftery= disabled
enable_dl = On
safe_mode = off 
```

# windows-phone-7 - WP7如何使用工具包TransitionFrame？

> ID：10997363
> 
> 赞同：4
> 
> 时间：2012-06-12T13:09:02.417
> 
> 标签：windows-phone-7, transitions

我已经下载了最新的 Windows.Phone.Controls.Toolkit 并在 app.xaml.cs 中更改了

```
RootFrame = new PhoneApplicationFrame(); 
```

到

```
RootFrame = new TransitionFrame(); 
```

我预计页面之间的过渡会发生一些变化，但什么也没发生。

我需要做更多的事情来实现更有趣的过渡吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-12T13:13:52.563

您必须添加参考`xmlns:toolkit="clr-namespace:Microsoft.Phone.Controls;assembly=Microsoft.Phone.Controls.Toolkit"`

并通过添加尝试旋转门效果：

```
<toolkit:TransitionService.NavigationInTransition>
    <toolkit:NavigationInTransition>
        <toolkit:NavigationInTransition.Backward>
            <toolkit:TurnstileTransition Mode="BackwardIn"/>                
        </toolkit:NavigationInTransition.Backward>
        <toolkit:NavigationInTransition.Forward>
            <toolkit:TurnstileTransition Mode="ForwardIn"/>
        </toolkit:NavigationInTransition.Forward>
    </toolkit:NavigationInTransition>
</toolkit:TransitionService.NavigationInTransition>
<toolkit:TransitionService.NavigationOutTransition>
    <toolkit:NavigationOutTransition>
        <toolkit:NavigationOutTransition.Backward>
            <toolkit:TurnstileTransition Mode="BackwardOut"/>
        </toolkit:NavigationOutTransition.Backward>
        <toolkit:NavigationOutTransition.Forward>
            <toolkit:TurnstileTransition Mode="ForwardOut"/>
        </toolkit:NavigationOutTransition.Forward>
    </toolkit:NavigationOutTransition>
</toolkit:TransitionService.NavigationOutTransition> 
```

到您想要具有过渡效果的每个页面。

或者您可以尝试其他效果，例如：滑动、旋转、旋转和滚动。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-27T05:33:54.113

为后代：

如果您不想为每个页面编写所有 XAML，请创建一个帮助程序类并在页面的构造函数中应用转换。

**过渡.cs**

```
public class Transitions {

    /// <summary>
    /// Set the Turnstile transition for this UIElement
    /// </summary>
    /// <param name="element"></param>
    public static void UseTurnstileTransition(UIElement element)
    {
        TransitionService.SetNavigationInTransition(element,
            new NavigationInTransition() {
                Backward = new TurnstileTransition() {
                    Mode = TurnstileTransitionMode.BackwardIn
                },
                Forward = new TurnstileTransition() {
                    Mode = TurnstileTransitionMode.ForwardIn
                }
            }
        );

        TransitionService.SetNavigationOutTransition(element,
            new NavigationOutTransition() {
                Backward = new TurnstileTransition() {
                    Mode = TurnstileTransitionMode.BackwardOut
                },
                Forward = new TurnstileTransition() {
                    Mode = TurnstileTransitionMode.ForwardOut
                }
            }
        );
    }
} 
```

**ExamplePage.xaml.cs**

```
public partial class ExamplePage : PhoneApplicationPage {
    public ExamplePage() {
        InitializeComponent();

        Transitions.UseTurnstileTransition(this);
    }
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-01-06T23:56:05.110

只是一个注释以扩展@subkamran 的答案。除了辅助类，您还可以使用样式：

```
<Style x:Key="TransitionPageStyle" TargetType="phone:PhoneApplicationPage">
    <Setter Property="toolkit:TransitionService.NavigationInTransition">
        <Setter.Value>
            <toolkit:NavigationInTransition>
                <toolkit:NavigationInTransition.Backward>
                    <toolkit:TurnstileTransition Mode="BackwardIn"/>
                </toolkit:NavigationInTransition.Backward>
                <toolkit:NavigationInTransition.Forward>
                    <toolkit:TurnstileTransition Mode="ForwardIn"/>
                </toolkit:NavigationInTransition.Forward>
            </toolkit:NavigationInTransition>
        </Setter.Value>
    </Setter>

    <Setter Property="toolkit:TransitionService.NavigationOutTransition">
        <Setter.Value>
            <toolkit:NavigationOutTransition>
                <toolkit:NavigationOutTransition.Backward>
                    <toolkit:SlideTransition Mode="BackwardOut"/>
                </toolkit:NavigationOutTransition.Backward>
                <toolkit:NavigationOutTransition.Forward>
                    <toolkit:TurnstileTransition Mode="ForwardOut"/>
                </toolkit:NavigationOutTransition.Forward>
            </toolkit:NavigationOutTransition>
        </Setter.Value>
    </Setter>
</Style> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-12T13:16:16.477

指定要使用 TransitionFrame 后，您需要告诉应用程序您希望进入和离开页面的转换类型，这是我使用的一些典型 XAML：

首先在页面头部注册命名空间：

```
xmlns:toolkit="clr-namespace:Microsoft.Phone.Controls;assembly=Microsoft.Phone.Controls.Toolkit" 
```

然后设置过渡

```
 <toolkit:TransitionService.NavigationInTransition>
        <toolkit:NavigationInTransition>
            <toolkit:NavigationInTransition.Backward>
                <toolkit:TurnstileTransition Mode="BackwardIn"/>
            </toolkit:NavigationInTransition.Backward>
            <toolkit:NavigationInTransition.Forward>
                <toolkit:SlideTransition Mode="SlideRightFadeIn" />
            </toolkit:NavigationInTransition.Forward>
        </toolkit:NavigationInTransition>
    </toolkit:TransitionService.NavigationInTransition> 
```

您可以尝试不同的转换类型，以找到最适合您的应用程序的一种。

HTH，鲁珀特。

# ios - 使用两个 tableview 创建 splitview 样式的视图

> ID：10997367
> 
> 赞同：1
> 
> 时间：2012-06-12T13:09:10.803
> 
> 标签：ios, uitableview

我想创建一个视图，例如附加的图片，它看起来像一个拆分视图。

在左侧视图中，这是一个目录列表，类似于内容。选择一行后，其子项将显示在右侧视图中。

[http://zwbaike.com/IMG_1746_meitu_1.jpg](http://zwbaike.com/IMG_1746_meitu_1.jpg)

[想要的视图，左栏列出目录，右栏显示左侧目录中包含的项目]

我用了两个tableview，左边一个窄tableview，右边一个宽tableview。两者都由一个 UITableViewController 通过标签控制。但是，我无法处理数据源。右 tableview 数据源应该依赖于左 tableview 选定的行，但它没有。我不知道该怎么做。

我想要一些带有示例代码的建议，非常感谢！

# c# - 正则表达式拆分包含句点的单词

> ID：10997374
> 
> 赞同：4
> 
> 时间：2012-06-12T13:09:31.427
> 
> 标签：c#, regex, string-split

有人能告诉我如何修改这个正则表达式以允许字符串中的句点吗？

`string[] parts = Regex.Split(s, @"\b|[^\.#_a-zA-Z0-9()=><!%]");`

如果我提供字符串：`"HELLO ABC.123"`

这个正则表达式正在返回`{"HELLO", "ABC", ".", "123"}`

我想回来`{"HELLO", "ABC.123"}`

请原谅我对正则表达式模式的无知。

编辑：我正在使用 C# 3.5

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T13:37:17.450

`\b`在 .期间的两边匹配`ABC.123`。你可以改变它来避免这种情况。例如：

```
(?<![\w.])(?=[\w.])|(?<=[\w.])(?![\w.]) 
```

给出完整的引用表达式：

```
@"(?<![\w.])(?=[\w.])|(?<=[\w.])(?![\w.])|[^\w.#()=><!%]+" 
```

您可能希望将`#()=><!%`字符添加到所有字符类中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T13:13:57.090

只需从中删除`\b`，`\b|[^\.#_a-zA-Z0-9()=><!%]`然后使用：

```
string[] parts = Regex.Split(s, @"[^#_a-zA-Z0-9()=><!%]"); 
```

# iphone - 任何人都能够在背景/退出上使用 [[UIScreen mainScreen] setBrightness] 吗？

> ID：10997375
> 
> 赞同：4
> 
> 时间：2012-06-12T13:09:36.137
> 
> 标签：iphone, objective-c, ios, ipad

iOS 中似乎有一个先前记录（和报告）的错误（它仍然存在于“最新的 iOS”中），这意味着虽然您可以在应用程序启动后使用 [[UIScreen mainScreen] setBrightness:x]您不能在后台事件期间随时调用它（这意味着您无法将亮度恢复到应用程序启动之前的水平）。

```
// Works as expected, screen dims
- (void)applicationDidBecomeActive:(UIApplication *)application
{
    NSLog(@"applicationDidBecomeActive");

    // Dim the screen (works)
    [[UIScreen mainScreen] setBrightness:0.2];
} 
```

但...

```
// Seems to fire if you double-tap the home key ('task manager' ;)
// Doesn't work
- (void)applicationWillResignActive:(UIApplication *)application
{
    NSLog(@"applicationWillResignActive");

    [[UIScreen mainScreen] setBrightness:1.0];
} 
```

背景是我将我成功的 Dock Clock 应用程序从 Android 移植到 iOS，现在发现我无法恢复屏幕亮度。这显然是一个错误，但我想知道是否有人发现了解决方法？

这是一个非常简单的原型测试应用程序，它证明了这个错误：

[https://github.com/philask/Dockclock-iOS](https://github.com/philask/Dockclock-iOS)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T13:20:06.603

当我的应用程序进入后台时，我没有尝试恢复它..但我注意到它会在您锁定和解锁设备时恢复。

# android - 在靠近特定位置时使手机静音

> ID：10997376
> 
> 赞同：2
> 
> 时间：2012-06-12T13:09:46.907
> 
> 标签：android

我正在制作一个 android 应用程序来显示用户在地图上的位置，以及用户当前的经度和纬度，我还使用反向地理编码来显示 android 设备的地址。现在我计划添加一个功能，如果用户靠近特定位置，手机会自动切换到静音模式，为此我制作了一个功能来检查手机是否已经静音。现在我想做另一个，在靠近特定位置时将手机置于静音模式。

我使手机在靠近特定位置时静音的方法是

```
public void changeToSilent(Location location){

    if(distanceTo(xxxx)<100)
    {
        if(mPhoneIsSilent==true){
        }
        else
        {
            mPhoneIsSilent = true;
            mAudioManager.setRingerMode(AudioManager.RINGER_MODE_SILENT);
        }
    }
} 
```

现在我在另一个函数中调用此方法，即....

public void onLocationChanged(Location location) { Log.d(TAG, "onLocationChanged with location" + location.toString()); Stringtext=String.format("Lat:\t%f\nLong:\t%f\nAlt:\t%f\nBearing:\t%f",location.getLatitude(),location.getLongitude(), location. getAltitude(), location.getBearing()); this.locationText.setText(文本);

```
 changeToSilent(location);

    try {
      List<Address> addresses = geocoder.getFromLocation(location.getLatitude(), location.getLongitude(), 10); 
      for (Address address : addresses) {
        this.locationText.append("\n" + address.getAddressLine(0));
      }

      int latitude = (int)(location.getLatitude() * 1000000);
      int longitude = (int)(location.getLongitude() * 1000000);

      GeoPoint point = new GeoPoint(latitude,longitude);
      mapController.animateTo(point); 

    } catch (IOException e) {
      Log.e("LocateMe", "Could not get Geocoder data", e);

    }
  } 
```

现在我在 oncreate 方法中调用上述函数。现在假设我知道手机应该静音的地方的纬度和经度。我想知道的是，在changetosilent方法中我必须写什么来代替xxxx？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T13:19:13.020

您可以使用[AudioManager](http://developer.android.com/reference/android/media/AudioManager.html)更改系统音量级别。

这是一个例子：

```
AudioManager am =  (AudioManager) getSystemService(AUDIO_SERVICE); 
//am.setStreamVolume(AudioManager.STREAM_MUSIC,6,0); //<-- use this one to set the volume
am.setRingerMode(AudioManager.RINGER_MODE_SILENT); //<-- to put on mute. 
```

**编辑：**获取一个[Location](http://developer.android.com/reference/android/location/Location.html)对象并使用[loc.distanceBetween()](http://developer.android.com/reference/android/location/Location.html#distanceBetween%28double,%20double,%20double,%20double,%20float%5B%5D%29)；

# opencv - OpenCV 在创建后更改关键点或描述符参数

> ID：10997377
> 
> 赞同：2
> 
> 时间：2012-06-12T13:09:48.057
> 
> 标签：opencv, parameters

在最近的版本中，OpenCV 允许使用 create 函数轻松创建关键点检测器、描述符或匹配器，例如

```
cv::Ptr<cv::FeatureDetector> featureDetector = cv::FeatureDetector::create("FAST") 
```

此调用不*支持*参数。例如 SURF、FAST 等都有很多参数。

我现在该如何更改它们？我已经弄清楚了其中的一部分，例如，我可以通过以下方式获取参数列表（字符串列表）

```
std::vector<std::string> parameters;
featureDetector->getParams(parameters); 
```

显然我需要以某种方式调用 cv::Algorithm* 对象`set(char*, bool/int/float/... value)`，但我不知道如何。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-16T15:04:39.817

实际上事实证明，`featureDetector`已经是一个`Algorithm`对象，即您可以直接在其上设置参数，例如

```
featureDetector->set("someParam", someValue) 
```

如果您想了解特征检测器的参数，可以使用此功能为您打印它们：

```
void ClassificationUtilities::printParams( cv::Algorithm* algorithm ) {
    std::vector<std::string> parameters;
    algorithm->getParams(parameters);

    for (int i = 0; i < (int) parameters.size(); i++) {
        std::string param = parameters[i];
        int type = algorithm->paramType(param);
        std::string helpText = algorithm->paramHelp(param);
        std::string typeText;

        switch (type) {
        case cv::Param::BOOLEAN:
            typeText = "bool";
            break;
        case cv::Param::INT:
            typeText = "int";
            break;
        case cv::Param::REAL:
            typeText = "real (double)";
            break;
        case cv::Param::STRING:
            typeText = "string";
            break;
        case cv::Param::MAT:
            typeText = "Mat";
            break;
        case cv::Param::ALGORITHM:
            typeText = "Algorithm";
            break;
        case cv::Param::MAT_VECTOR:
            typeText = "Mat vector";
            break;
        }
        std::cout << "Parameter '" << param << "' type=" << typeText << " help=" << helpText << std::endl;
    }
} 
```

# objective-c - iphone消息中心-如何获取消息到达时间

> ID：10997378
> 
> 赞同：0
> 
> 时间：2012-06-12T13:09:52.487
> 
> 标签：objective-c, xcode4

当我打开消息中心（通过从顶部向下滑动）时，我可以看到每条消息都与“它多久前到达”相关联。如何获得该信息？我也检查过，似乎当我使用repeatInterval 创建本地通知时，对于所有重复，fireDate 与原始通知中的相同。因此，我不知道如何区分每个本地通知的日期，因为弹出窗口是非模态的。有什么建议么？谢谢。问候，维克多

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T13:54:47.737

我不相信你能得到到达的时间。您可以使用通知的 JSON 发送其他详细信息，但您可以在 applicationDidLaunch:(NSNotification *) 方法中读取时间戳。

# javascript - soundcloud的sc-player播放的Javascript线程问题？

> ID：10997380
> 
> 赞同：0
> 
> 时间：2012-06-12T13:09:56.310
> 
> 标签：javascript, jquery, ajax, multithreading, soundcloud

这是一个有趣而奇怪的问题，我真的不确定这里发生了什么。也许有人可以给我一些见解。我有一个简单的表格，其中包含来自 youtube 和 soundcloud 的歌曲列表。当用户单击其中一个链接（歌曲）时，它会向包含自定义 html5 youtube 播放器（基于 Tubeplayer 插件）或自定义 html5 soundcloud 播放器（基于 soundcloud 的自定义 sc-player 插件）。

ajax 调用工作得很好。当用户单击列表中的曲目时，相应的插件会弹出到指定的 div 中并开始播放歌曲或视频。但是，我遇到了一个非常奇怪的问题。当我从 youtube 视频转到 soundcloud 歌曲时，效果很好。youtube 插件完全被 soundcloud 插件所取代。youtube 上的播放停止，soundcloud 上的播放开始。但是，当正在播放 soundcloud 歌曲并且我单击列表中的 youtube 曲目时，youtube 插件会显示并开始播放，但 soundcloud 曲目也会继续播放，即使 div 中的内容已完全替换为 youtube通过ajax插件。

我什至尝试调用 soundcloud 插件的 js 文件并将它们放入 ajax 调用的脚本中，这样即使在调用 youtube 插件时它们也会被替换，但我仍然遇到问题。关于这里可能发生什么的任何想法？我对jquery真的不是很了解。提前致谢！！

# sql - SQL：有没有一种巧妙的方法来显示透视列中的文本数据，而无需内部查询或聚合函数？

> ID：10997385
> 
> 赞同：2
> 
> 时间：2012-06-12T13:10:08.977
> 
> 标签：sql, pivot, aggregate, crosstab, unpivot

我有一堆数据（每个唯一引用的多行）需要在一行中包含多列。一些需要使用的列必须进一步拆分，因为它们包含多个值。这是使用 unpivot 完成的。我现在有 1 个原始列中的 7 个列，它现在需要针对新的 7 个列显示状态。但是，我不能使用枢轴，因为我需要查看 7 列中的各种状态，而不是最小值、最大值或计数。

![在此处输入图像描述](../Images/acf6275555af7ed9aa18300de0847c86.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T09:24:48.633

[您可以使用PIVOT](http://msdn.microsoft.com/en-us/library/ms177410%28v=sql.105%29.aspx)功能执行这种类型的班次。

静态数据透视（参见[SQL Fiddle 的演示](http://sqlfiddle.com/#!3/79213/2)）：

```
select *
from 
(
  select reference, jobtypesplit, status
  from t1
) x
pivot
(
  min(status)
  for jobtypesplit in ([DDS], [MBN], [LPN], [WEN], [LLP], [OPE], [SSE])
) p 
```

这也可以动态完成（参见[SQL Fiddle](http://sqlfiddle.com/#!3/79213/6)）

```
DECLARE @cols AS NVARCHAR(MAX),
    @query  AS NVARCHAR(MAX)

select @cols = STUFF((SELECT distinct ',' + QUOTENAME(jobtypesplit) 
                  FROM t1 
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

set @query = 'SELECT reference, ' + @cols + ' from 
             (
                select reference, jobtypesplit, status
                from t1
            ) x
            pivot 
            (
                min(status)
                for jobtypesplit in (' + @cols + ')
            ) p '

execute(@query) 
```

# c++ - 根据初始列的值更改表格颜色

> ID：10997387
> 
> 赞同：1
> 
> 时间：2012-06-12T13:10:23.307
> 
> 标签：c++, qt

我试图掌握如何将数据库中的数据显示到 Qt 表中。我想要做的是将布尔值上的显示值更改为“PASS”或“FAIL”，然后根据此更改行颜色。

我`QSqlQueryModel`为模型创建了一个派生类并覆盖了函数：

```
QVariant TestResultsViewModel::data(const QModelIndex &index, int role) const
{
    QVariant value = QSqlQueryModel::data(index, role);

    if (value.isValid() && role == Qt::DisplayRole){
        switch(index.column()){
        case 0:
            return value.toBool() ? "PASS" : "FAIL";
        }
    }

    if (role == Qt::TextColorRole){
        // Get column 0
        QVariant pass = index.sibling(index.row(), 0).data();
        if (pass.isValid()){
            if (pass.toBool()){
                return QVariant::fromValue(QColor(Qt::blue));
            }
            else{
                return QVariant::fromValue(QColor(Qt::red));
            }
        }
    }

    return value;
} 
```

但似乎发生的是第一部分首先完成，然后列的值是“PASS”或“FAIL”而不是 0、1，因此颜色不会改变。

那么我应该怎么做呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T14:09:24.483

QModelIndex::data() 的实现解释了这种行为：

```
inline QVariant QModelIndex::data(int arole) const
{ return m ? m->data(*this, arole) : QVariant(); } 
```

其中 m 是模型索引的模型。

这意味着您的电话

```
index.sibling(index.row(), 0).data(); 
```

ends up calling `TestResultsViewModel::data()` again, meaning you indeed get "PASS" or "FAIL" as a result.

In order to avoid this, you can do the following:

```
QModelIndex firstColumnIndex = index.sibling( index.row(), 0 );
QVariant pass = QSqlQueryModel::data( firstColumnIndex ); 
```

This will explicitly call `QSqlQueryModel::data()` instead of `TestResultsViewModel::data()` and skip your code

# c# - 名单上的所有接班人

> ID：10997389
> 
> 赞同：2
> 
> 时间：2012-06-12T13:10:31.347
> 
> 标签：c#, linq

我想创建一个这样的扩展方法

```
public static bool AllConsecutives(this IEnumerable<int> intValues ) 
```

如果列表中的所有项目都是连续的（没有间隙），此方法应返回 true

一些测试用例

```
(new List<int>() {2, 3, 4, 5, 6}).AllConsecutives() == true
(new List<int>() {3, 7, 4, 5, 6}).AllConsecutives() == true //as it is not sensitive to list order
(new List<int>() {2, 3, 4, 7, 6}).AllConsecutives() == false //as the five is missing 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T13:15:34.420

```
int expected = intValues.Min();
foreach(int actual in intValues.OrderBy(x => x))
{
    if (actual != expected++)
       return false;
}

return true; 
```

您还可以在执行之前验证该集合至少有一项`Min`。或者您可以在获取 min 之前对项目进行排序（在这种情况下，如果集合为空，它将是第一个，或者不会是任何项目）。同样在这种情况下，您将保存一次迭代以找到最小值：

```
var sortedValues = intValues.OrderBy(x => x);
int expected = sortedValues.FirstOrDefault();

foreach (int actual in sortedValues)
{
    if (actual != expected++)
        return false;
}

return true; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T13:22:05.867

如果列表不包含重复项和最大值之间的差异，则该列表是连续的。和分钟。values 等于列表中的项目数减一，因此：

```
public static bool AllConsecutives(this IEnumerable<int> intValues) 
{
   int minValue = Int32.MaxValue;
   int maxValue = Int32.MinValue;
   int count = 0;
   HashSet<int> values = new HashSet<int>();
   foreach (int intValue in intValues) {
     if (values.Contains(intValue))         
       return false;
     values.Add(intValue);
     if (intValue > maxValue)
       maxValue = intValue;
     if (intValue < minValue)
       minValue = intValue;
     count++;
   }
   return (count == 0) || (maxValue-minValue+1 == count);
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-12T13:22:48.440

尝试过并且似乎可以使用给定的示例

```
public static bool AllConsecutives(this IEnumerable<int> intValues ) 
{
    var ord = intValues.OrderBy(i => i);
    int curV = ord.Min();
    foreach(int x in ord)
    {
        if(x != curV)
           return false;
        curV++;
    }
    return true;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-12T13:27:45.423

错误检查和使用 Linq：

```
 public static class myExtension
{

   public static bool AllConsecutives(this IEnumerable<int> targetList)
   {
      bool result = false;

      if ((targetList != null) && (targetList.Any ()))
      {
         var ordered = targetList.OrderBy (l => l);

         int first = ordered.First ();

         result = ordered.All (item => item == first++);

      }

      return result;

   }

}

// tested with

void Main()
{
 Console.WriteLine ( (new List<int>() {2, 3, 4, 5, 6}).AllConsecutives() ); // true
 Console.WriteLine ( (new List<int>() {3, 7, 4, 5, 6}).AllConsecutives() ); // true //as it is not sensitive to list order
 Console.WriteLine ( (new List<int>() {2, 3, 4, 7, 6}).AllConsecutives() ); // false //as the five is missing
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-12T13:16:38.677

像这样的东西：

```
if (intValues.Count() <= 1)
                return true;

var ordered = intValues.OrderBy(i => i).ToList();

return (ordered.First() + ordered.Count() - 1) == ordered.Last(); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-12T15:06:12.103

另一种不需要排序的可能解决方案是使用哈希集，在构建哈希集时，您可以保存最小值。这样，运行时间将为 O(n)。这不会处理重复值，您可以在构建哈希集时添加检查并查看哈希集是否已经包含该值。

```
HashSet<int> hash = new HashSet<int>();
int minValue = int.MaxValue;
foreach(int i in list)
{
    if(minValue > i)
        minValue = i;
        hash.Add(i);
}

for(int count = 1; count < list.Count; ++count)
{
    if(!hash.Contains(++minValue))
        return false;

}
return true; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-12T13:38:37.440

```
list.Sort();
return !list.Skip(1).Where((i, j) => (i != (list[j] + 1))).Any(); 
```

# asp.net - Accept-Encoding 如何查找文件实际上是压缩的

> ID：10997395
> 
> 赞同：0
> 
> 时间：2012-06-12T13:10:51.287
> 
> 标签：asp.net, http, iis-7

我有点困惑`Accept-Encoding`。我有 Web 服务，它可以接受使用 POST 方法提交的压缩文件。我在下面添加了代码，用于查找`Accept-Encoding: gzip`和解压缩提交的文件。问题在于从 Internet 浏览器提交的文件。请求标头包含 gzip，但文件实际上并未压缩。也许有人可以帮助了解如何检测文件是否实际压缩？

```
var httpPostedFile = httpRequest.Files[0];
var contentLength = httpPostedFile.ContentLength;
var buffer = new byte[contentLength];
httpPostedFile.InputStream.Read(buffer, 0, contentLength);

const string acceptEncoding = "Accept-Encoding";
if (httpRequest.Headers[acceptEncoding] != null && httpRequest.Headers[acceptEncoding].Contains("gzip"))
{

  buffer = Decompress(buffer);
}

 static byte[] Decompress(byte[] gzip)
        {            
            using (var stream = new GZipStream(new MemoryStream(gzip), CompressionMode.Decompress))
            {
                const int size = 4096;
                var buffer = new byte[size];
                using (var memory = new MemoryStream())
                {
                    int count;
                    do
                    {
                        count = stream.Read(buffer, 0, size);
                        if (count > 0)
                        {
                            memory.Write(buffer, 0, count);
                        }
                    }
                    while (count > 0);
                    return memory.ToArray();
                }
            }
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T13:30:02.400

Accept-Encoding 表示客户端*接受*的编码。

给定请求的编码是使用 Transfer-Encoding 和 Content-Encoding 指定的，但请注意，这些将始终适用于整个请求正文，而不仅仅是多部分有效负载的一部分。

# javascript - 是否有使用 javascript 访问 Activex 对象的跨浏览器解决方案

> ID：10997396
> 
> 赞同：0
> 
> 时间：2012-06-12T13:10:53.017
> 
> 标签：javascript, cross-browser, activex

我们有一个经典的 ASP 应用程序，它使用 Activex 对象 (javascript) 与后端连接。这不适用于 Chrome、Safari 和 Firefox。有没有其他可用的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T13:33:26.907

无法在无 IE 浏览器中使用 ADODB，因为您正确地询问它是一个 ActiveX 控件，并且它是一个讨厌的 ActiveX 控件，您最好使用 jQuery 作为@emphaticsunshine 发布，而不提供任何指向您的问题的链接，

和一个服务器端文件，用于管理服务器环境中的数据并使用您的服务器来完成它，如果我没记错的话，MS 正在将 ActiveX 拉到下一个浏览器中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T13:14:05.467

试试这个库：

[http://jquery.com/](http://jquery.com/)

它有一个功能：

jQuery.ajax(设置);

文档：

[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-20T19:43:34.080

I had the same problem and we implemented the following solution using CORS, WCF, Windows Service, IE Process. Here's the brief:

You host a wcf service in a windows service in which you open a hidden IE process to open a html page which in turn calls the activeX and gets the data from it. If you can access the activeX object(dll) directly from C# then you dont need to use hidden IE approach. In my case this wasn't possible.

You call this wcf service from your website page (javascript) using CORS(cross origin), you can use different approaches for it CORS,JsonP etc. For me CORS worked best. You can also implement web socket for this and expose socket from your above window service.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-05-21T19:29:02.290

```
// Emulate the XMLHttpRequest() constructor in IE5 and IE6
if (window.XMLHttpRequest === undefined) {
window.XMLHttpRequest = function() {
try {
// Use the latest version of the ActiveX object if available
return new ActiveXObject("Msxml2.XMLHTTP.6.0");
}
catch (e1) {
try {
// Otherwise fall back on an older version
return new ActiveXObject("Msxml2.XMLHTTP.3.0");
}
catch(e2) {
// Otherwise, throw an error
throw new Error("XMLHttpRequest is not supported");
}
}
};
} 
```

// js的权威指南规定了这种方法。使用 XMLHttpRequest，如果客户端没有 window.XMLHttpRequest，找出它需要什么并提供给它。 - -祝你好运

# magento - Magento 自定义报告删除列

> ID：10997399
> 
> 赞同：1
> 
> 时间：2012-06-12T13:10:57.820
> 
> 标签：magento

如何从我的自定义报告中删除期间列？

我试过了， **`unset($this->_columns['period']);`** 但它不起作用。

我需要开始我的列，如订单号、订单日期、小计等。

![电流输出](../Images/a404335ecc67c4afe8df62705fd5e45a.png)

![需要输出](../Images/b473f45c591f726174e4c619b2062ae7.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T14:30:02.387

这是由 Magento 后端的自定义网格加载的，您需要识别它。要找到自定义块，您可以激活后端提示并查看本节中加载了哪些网格。

您可以使用下一个 Sql 激活后端提示：

```
UPDATE core_config_data SET scope_id = 0 WHERE path like 'dev/debug/template_hints%'; 
```

始终在开发环境中执行。从未在生产现场

您可以在此链接中查看如何激活后端提示，`http://www.damianculotta.com.ar/2009/07/11/mostrar-phtmls-y-bloques-usados-en-el-skin-de-backend-de-magento/`抱歉，这是西班牙语，我找不到英文信息 :(

有了这个，您还可以了解此网格中的块负载类型，这是重要的日期。接下来，您需要创建一个小模块来重写此块。

用这个方法你可以看到下一个日期

```
Template
adminhtml\default\default\template\widget/grid.phtml

Block
Mage_Adminhtml_Block_Report_Sales_Sales_Grid 
```

在块中，您可以看到构造中的下一个列

```
 $this->addColumn('period', array(
        'header'        => Mage::helper('sales')->__('Period'),
        'index'         => 'period',
        'width'         => 100,
        'sortable'      => false,
        'period_type'   => $this->getPeriodType(),
        'renderer'      => 'adminhtml/report_sales_grid_column_renderer_date',
        'totals_label'  => Mage::helper('sales')->__('Total'),
        'html_decorators' => array('nobr'),
    )); 
```

您需要在自定义块中删除此列，始终在单独的扩展中。如果你不知道如何重写一个块，只需要说我：P 希望能帮助你

# ios - 什么时候使用 NSSet 而不是 NSArray 更好？

> ID：10997404
> 
> 赞同：113
> 
> 时间：2012-06-12T13:11:04.470
> 
> 标签：ios, objective-c, arrays, cocoa, cocoa-touch

我在我的应用程序中多次使用 NSSet，但我自己从未创建过一个。

什么时候使用 an 比使用 an 更好[`NSSet`](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSSet_Class/)，[`NSArray`](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSArray_Class/index.html#//apple_ref/doc/c_ref/NSArray)为什么？

* * *

## 回答 #1

> 赞同：182
> 
> 时间：2012-06-12T13:17:01.160

[Apple 文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Collections/Collections.html)中的图像很好地描述了它：

![Objective-C 集合](../Images/b6180cb2022bff6d2d9c4936fc82cb3c.png)

`Array`是元素的**有序**（添加时保持顺序）序列

```
[array addObject:@1];
[array addObject:@2];
[array addObject:@3];
[array addObject:@4];
[array addObject:@6];
[array addObject:@4];
[array addObject:@1];
[array addObject:@2];

[1, 2, 3, 4, 6, 4, 1, 2] 
```

`Set`是一个**独特**（无重复）的**无**序列元素列表

```
[set addObject:@1];
[set addObject:@2];
[set addObject:@3];
[set addObject:@4];
[set addObject:@6];
[set addObject:@4];
[set addObject:@1];
[set addObject:@2];

[1, 2, 6, 4, 3] 
```

* * *

## 回答 #2

> 赞同：174
> 
> 时间：2012-06-12T13:14:39.960

当集合中项目的顺序不重要时，集合为在集合中查找项目提供了更好的性能。

原因是集合使用哈希值来查找项目（如字典），而数组必须遍历其全部内容才能找到特定对象。

* * *

## 回答 #3

> 赞同：67
> 
> 时间：2012-06-12T13:18:11.670

最好的答案是[Apple 自己的文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Collections/Collections.html)。

![在此处输入图像描述](../Images/639775ec663be53e887fa7627f0b0643.png)

主要区别在于`NSArray`有序集合和`NSSet`无序集合。

有几篇文章讨论了两者之间的速度差异，比如[这篇](http://cocoawithlove.com/2008/08/nsarray-or-nsset-nsdictionary-or.html)文章。如果您正在遍历无序集合，那就`NSSet`太好了。但是，在许多情况下，您需要做只有 an`NSArray`才能做的事情，因此您牺牲了这些能力的速度。

**NSSet**

*   主要通过比较访问项目
*   无序
*   不允许重复

**NSArray**

*   可以通过索引访问项目
*   已订购
*   允许重复

这就是它的全部内容！让我知道这是否有帮助。

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2013-02-08T14:26:54.753

NSOrderedSet 在 iOS 5+ 中可用，因此主要区别在于您是否想要数据结构中的重复对象。

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2015-12-08T08:28:50.120

**NSArray**：

1.  有序的数据收集
2.  允许重复
3.  它是集合类型对象

**NSSet**：

1.  无序的数据收集
2.  不允许重复
3.  它也是集合类型对象

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2012-06-12T13:25:37.000

数组用于通过索引访问项目。任何项目都可以多次插入到数组中。数组保持其元素的顺序。

集合基本上仅用于检查项目是否在集合中。这些项目没有顺序或索引的概念。你不能在一个集合中拥有一个项目两次。

如果一个数组想要检查它是否包含一个元素，它必须检查它的所有项目。集合旨在使用更快的算法。

你可以想象一个集合，比如没有值的字典。

请注意，数组和集合不是唯一的数据结构。还有其他的，例如队列、堆栈、堆、斐波那契堆。我建议阅读有关算法和数据结构的书。

有关更多信息，请参阅[维基百科](http://en.wikipedia.org/wiki/Set_%28computer_science%29)。

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2015-12-04T05:44:46.030

```
NSArray *Arr;
NSSet *Nset;

Arr=[NSArray arrayWithObjects:@"1",@"2",@"3",@"4",@"2",@"1", nil];
Nset=[NSSet setWithObjects:@"1",@"2",@"3",@"3",@"5",@"5", nil];

NSLog(@"%@",Arr);
NSLog(@"%@",Nset); 
```

数组

> 2015-12-04 11:05:40.935 [598:15730] (1, 2, 3, 4, 2, 1)

集合

> 2015-12-04 11:05:43.362 [598:15730] { ( 3, 1, 2, 5 )}

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2014-12-14T07:36:04.023

主要区别已经在其他答案中给出。

我只想指出，由于集合和字典的实现方式（即使用哈希），应该注意不要将可变对象用作键。

如果一个键发生了变异，那么哈希（可能）也会改变，指向哈希表中的不同索引/存储桶。原始值不会被删除，并且在枚举或询问结构的大小/计数时实际上会被考虑在内。

这可能会导致一些非常难以定位的错误。

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2016-02-10T13:52:15.913

[在这里](http://www.cocoawithlove.com/2008/08/nsarray-or-nsset-nsdictionary-or.html)`NSArray`，您可以找到数据结构和数据结构的非常彻底的比较`NSSet`。

简短的结论：

> 是的，NSArray 比 NSSet 简单地保持和迭代更快。构建速度快 50%，迭代速度快 500%。教训：如果您只需要迭代内容，请不要使用 NSSet。
> 
> 当然，如果您需要测试是否包含，请努力避免使用 NSArray。即使你需要迭代和包含测试，你可能仍然应该选择一个 NSSet。如果您需要保持集合有序并测试是否包含，那么您应该考虑保留两个集合（一个 NSArray 和一个 NSSet），每个集合都包含相同的对象。
> 
> NSDictionary 的构造比 NSMapTable 慢——因为它需要复制关键数据。它通过更快的查找来弥补这一点。当然，两者有不同的能力，所以大多数时候，这个决定应该是在其他因素上做出的。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2016-06-24T09:38:56.933

**当访问速度至关重要且顺序无关紧要**或由其他方式（通过谓词或排序描述符）确定时，您通常会使用Set 。例如，当通过一对多关系访问托管对象时，Core Data 使用集合

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2018-05-23T10:58:51.973

只是为了添加一点，我有时使用 set 来从数组中删除重复项，例如：-

```
NSMutableSet *set=[[NSMutableSet alloc]initWithArray:duplicateValueArray]; // will remove all the duplicate values 
```

# java - 小程序组件不可见

> ID：10997409
> 
> 赞同：2
> 
> 时间：2012-06-12T13:11:18.307
> 
> 标签：java, applet, awt, null-layout-manager

登录后我正在调用 Applet 类。表单可见，但组件不可见，这可能是问题所在；这是我的课：

```
/*
* To change this template, choose Tools | Templates
* and open the template in the editor.
*/
package stanacle;

import java.awt.*;
import javax.swing.*;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.io.*;
import java.util.Calendar;
import javax.swing.JOptionPane;
/**
*
* @author Stano
*/
public class MenuOption extends JApplet{
Label header, menu, error, user;
TextField option;
Button go;

/**
 * Initialization method that will be called after the applet is loaded
 * into the browser.
 */
public void init() {
    // TODO start asynchronous download of heavy 
    setSize(1024, 768);
    setLayout(null);
    setVisible(true);
    header = new Label();
        menu = new Label();
        error = new Label();
        user = new Label();
        option = new TextField();
        go = new Button("GO");
        header.setBounds(370, 10, 200, 20);
        menu.setBounds(10, 60, 200, 20);
        option.setBounds(150, 60, 200, 20);
        go.setBounds(750, 10, 150, 30);
        error.setBounds(370, 310, 500, 20);
        user.setBounds(10, 10, 200, 20);
        header.setText("MENU OPTION PAGE");
        menu.setText("Enter Menu Option");

        add(header);
        add(menu);
        add(option);
        add(go);
        add(error);
        add(user);
}
// TODO overwrite start(), stop() and destroy() methods
} 
```

表单正在显示，但包含 TextField、标签和按钮的组件未显示。我可能做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T13:22:03.713

1) 代码行

```
setSize(1024, 768);
setLayout(null);
setVisible(true); 
```

必须是最后一行代码进入`public void init() {`，因为你显示容器然后添加`J/Components`

2）如果没有真正的原因（OpenGL，CAD / CAM）然后使用

*   `Swing JApplet`而不是史前`AWT Applet`

*   [Swing JComponents](http://docs.oracle.com/javase/tutorial/uiswing/components/index.html)而不是 AWT 组件

3) 不要使用[NullLayout](http://docs.oracle.com/javase/tutorial/uiswing/layout/visual.html)

# xpages - 在 ssjs 中获取可排序列视图的句柄

> ID：10997411
> 
> 赞同：0
> 
> 时间：2012-06-12T13:11:28.807
> 
> 标签：xpages

我有一个视图，其中有一列可以使其可排序。单击列标题时，视图将按升序/降序排序。如何在 SSJS 中处理这种排序，我的意思是如何使用 SSJS 对其进行排序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T13:18:59.893

如果将视图定义为数据源，则有 2 个属性。

1.  sortColumn - 要排序的列
2.  sortOrder - 排序依据

您可以使用范围变量计算这些并刷新，应该这样做

# jquery - jquery循环插件用wordpress，jquery没有定义？

> ID：10997414
> 
> 赞同：2
> 
> 时间：2012-06-12T13:11:35.683
> 
> 标签：jquery, wordpress

我对wordpress很陌生，我很困惑。我正在尝试创建一个幻灯片放映，并按照我能找到的将 jquery 添加到 wordpress 的所有说明进行操作。
在我的`function.php`文件中，我添加了：

```
function my_scripts_method() {
    wp_deregister_script( 'jquery' );
    wp_register_script( 'jquery', 'http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js');
    wp_enqueue_script( 'jquery' );
}    

add_action('wp_enqueue_scripts', 'my_scripts_method'); 
```

在我的`header.php`我有：

```
<?php
    wp_enqueue_script('jquery.cycle.js', get_bloginfo("stylesheet_directory").'/js/jquery.cycle.js', array('jquery'));
    wp_enqueue_script('slideshow', get_bloginfo("stylesheet_directory") . '/js/slideshow.js');
    wp_head();
?> 
```

我`slideshow.js`的是：

```
jquery(document).ready(function($){
    jquery('#gallery').cycle('fade');
}); 
```

在我的*模板*中，我有：

```
<div id="gallery">
    <p>
        <a href="http://bdf.serverplanet.com/wp-content/uploads/2012/06/BD_Laurene1339467077747.jpg">
            <img src="http://bdf.serverplanet.com/wp-content/uploads/2012/06/BD_Lauren_s.jpg" alt="Caption" />
        </a>
        <em>Brad &amp; Lauren</em>
    </p>
    <p>
        <a href="http://bdf.serverplanet.com/wp-content/uploads/2012/06/BD_bike.jpg" target="_blank">
            <img src="http://bdf.serverplanet.com/wp-content/uploads/2012/06/BD_bike_s.jpg" alt="Caption" />
        </a>
        <em>Biking on the Vineyard</em>
    </p>
    <a href="http://bdf.serverplanet.com/wp-content/uploads/2012/06/bedcad.jpg" target="_blank"><img src="http://bdf.serverplanet.com/wp-content/uploads/2012/06/bedcad_s.jpg" alt="Caption" /></a>
    <em>Brad and Cass</em>
    <a href="http://bdf.serverplanet.com/wp-content/uploads/2012/06/brad11.jpg" target="_blank">
        <img src="http://bdf.serverplanet.com/wp-content/uploads/2012/06/brad11_s.jpg" alt="Caption" />
    </a>
    <em>At the S.A.S.S. show</em>
    <a href="http://bdf.serverplanet.com/wp-content/uploads/2012/06/Brad_and_Alexis.jpg" target="_blank">
        <img src="http://bdf.serverplanet.com/wp-content/uploads/2012/06/Brad_and_Alexis_s.jpg" alt="Caption" />
    </a>
    <em>With Alexis at a S.A.S.S. show</em>
</div> 
```

当我尝试运行幻灯片时，我的`slideshow.js`文件中出现“未定义 jquery”错误。如何修复此错误并让我的幻灯片正常工作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T13:13:36.247

使用`jQuery`而不是`jquery` `Q`必须大写，inisde`slideshow.js`

# php - 优化查询

> ID：10997415
> 
> 赞同：2
> 
> 时间：2012-06-12T13:11:37.793
> 
> 标签：php, mysql, sql, loops

我有大约 70 000 行的表。有 6000 行需要查找、更改和保存（我必须经常这样做，一周几次）。目前，我正在这样做，完成时间超过 2 分钟：（有什么建议吗？:()

```
 $query = mysql_query("SELECT meta_value FROM my_table WHERE meta_key = 'key' AND meta_value LIKE '%something%'")or die(mysql_error());

  $new = "soemthing something";

  while($row = mysql_fetch_array($query)){

    $old = unserialize($row['meta_value']);
    $new_meta_r = str_replace($old['color'],$new,$old);
    $new_meta = serialize($new_meta_r);

    $update_meta = mysql_query("UPDATE my_table SET meta_value = '$new_meta' WHERE meta_key = 'key' AND meta_value LIKE '%something%'")or die(mysql_error());
  } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T13:20:59.970

以下是一些有助于优化的方法：

*   尝试获取 meta_value 之外的 ID，并且在使用 update 时仅引用 ID。
*   检查您是否真的需要使用整个通配符，或者您可以将其发布或添加前缀。

意义 ：

```
#Full wildcard  

 SELECT * FROM TABLE WHERE COLUMN LIKE '%something%';  

#Postfix wildcard  

 SELECT * FROM TABLE WHERE COLUMN LIKE  'something%';  

 #Prefix wildcard  

SELECT * FROM TABLE WHERE COLUMN LIKE  '%something'; 
```

*   确保您使用正确的数据类型，varchars 的大小正确，使用 int 而不是 BigInt 等。
*   尝试将查询移动到存储过程，存储过程被编译（SQL 代码不是），使它们比 SQL 代码更快。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T13:17:03.873

尝试在 'meta_key' 上放置一个索引，并尝试解决必须使用 LIKE 进行这些操作的问题。为什么在这里需要 LIKE？具体要求是什么？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-12T13:18:29.680

除了存储第一个查询中的主键并在更新中使用它们之外，您还可以创建一个临时表，对该表执行批量插入，然后对主表进行连接更新。

这样，您就不必循环运行查询。

[创建临时表](http://www.tutorialspoint.com/mysql/mysql-temporary-tables.htm)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-12T13:18:30.237

我不是一个 php 人，但在 sql 方面我可以给你一些建议。有些事情你可以做，

你的 SQL 语句是，

SELECT meta_value FROM my_table WHERE meta_key = 'key' AND meta_value LIKE '%something%'

你能做的事情是，

1.  在密钥字段上添加索引。您的查询中有两个字段 meta_key、meta_value，请尝试为两者添加复合索引或单独索引。

2.  查询现在检查 where 块中的哪个子句返回更多行。把它放在另一个之前。

    Q1 : SELECT meta_value FROM my_table WHERE meta_value LIKE '%something%'

    Q2：从 my_table WHERE meta_key = 'key' 中选择 meta_value

    如果 Q1 返回的行数比 Q2 SQL 语句多，那么您的 SQL 应该如下所示，

    SELECT meta_value FROM my_table WHERE meta_value LIKE '%something%' AND meta_key = 'key'

# jsf - jsf 使用集合/地图

> ID：10997417
> 
> 赞同：6
> 
> 时间：2012-06-12T13:11:43.847
> 
> 标签：jsf, richdatatable

我可以将我的 h:dataTable/rich:dataTable 与一些 Map 绑定吗？我发现 h:dataTable 只能与 List 对象一起使用，并且在 List 中删除可能非常繁重。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-06-06T13:04:25.957

如果您希望在您的支持 bean 中只有一种方法提供映射，您可以执行以下操作：

```
class Bean {
  public Map<T,U> getMap() {
    return yourMap;
  }
} 
```

并在您的 JSF 视图中使用它

```
<h:dataTable value="#{bean.map.keySet().toArray()}" var="key"> 
   <h:outputText value="#{bean.map[key]}"/> 
</h:dataTable> 
```

这会将键集转换为数组，可以通过数据表进行迭代。使用“()”-表达式需要统一表达式语言 2 (Java EE 6)。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-12T13:14:00.380

是的，这是正确的。dataTable、ui:repeat 和朋友只适用于列表。

您可以添加一个托管 bean 方法，将 map.keySet() 或 map.values() 放入列表中，具体取决于您要迭代的内容。

通常，当我想从 JSF 视图中迭代地图时，我会执行类似的操作

```
<h:dataTable value="#{bean.mapKeys}" var="key"> 
   <h:outputText value="#{bean.map[key]}"/> 
</h:dataTable> 
```

具有托管 bean 属性

```
class Bean {
   public List<T> mapKeys() {
     return new ArrayList<T>(map.keySet());
   }
} 
```

或类似的东西。

当然，如果您使用类似`TreeMap`或`LinkedHashMap`保留顺序的东西，这是最有意义的。

# actionscript-3 - 1120：访问未定义的属性[实例化变量]？（柔性）

> ID：10997421
> 
> 赞同：0
> 
> 时间：2012-06-12T13:12:17.590
> 
> 标签：actionscript-3, apache-flex, compiler-errors, flex4.5, undefined-reference

我看过这样的问题[，这个，这个](https://stackoverflow.com/questions/10826822/error-1120access-of-undefined-property)和[这个](https://stackoverflow.com/questions/2309058/error-1120-access-of-undefined-property)，[但](https://stackoverflow.com/questions/9854327/1120-access-of-undefined-property-stop)这些[似乎](https://stackoverflow.com/questions/2484005/flex-1120-access-to-undefined-property)都没有描述我的问题？

我声明这些变量：

```
<fx:Script>
    <![CDATA[
        import assets.Page;
        public var oneTwo:Page = new Page("...");
        public var oneThree:Page = new Page("...");
        protected var oneFour:Page = new Page("...");
        protected var oneFive:Page = new Page("...");
        protected var oneSix:Page = new Page("..."); 
```

... 正在引用确实存在的对象，并且 Flex 可以使用每个项目的构造函数。接下来，我尝试设置这些对象的其他属性：

```
 oneThree.next = oneFour;
        oneThree.prev = oneTwo;
        oneFour.next = oneFive;
        oneFour.prev = oneThree;
        oneFive.next = oneSix;
        oneFive.prev = oneFour; 
```

等等。现在，当我单击其中的每一个时，Flex 会突出显示每个实例中的变量，并在编码期间将它们全部识别为有效。但编译给出：

```
-1120: Access of undefined property oneThree.
-1120: Access of undefined property oneFour.
-1120: Access of undefined property oneFour.
-1120: Access of undefined property oneFive. 
```

依此类推，每次使用每个变量时使用一次（这里的情况是十二次）。您可以看到我将一些公开和一些受保护，这似乎没有什么区别。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T13:36:25.440

[This][1] 问题使我找到了解决方案。

第二个代码块中的变量需要在它们自己的函数中进行编辑，得到：

```
<fx:Script>
    <![CDATA[
        import assets.Page;
        public var oneTwo:Page = new Page("...");
        public var oneThree:Page = new Page("...");
        protected var oneFour:Page = new Page("...");
        protected var oneFive:Page = new Page("...");
        protected var oneSix:Page = new Page("...");

        oneThree.next = oneFour;
        oneThree.prev = oneTwo;
        oneFour.next = oneFive;
        oneFour.prev = oneThree;
        oneFive.next = oneSix;
        oneFive.prev = oneFour;
    ]]>
</fx:Script> 
```

而不是这个：

```
<fx:Script>
    <![CDATA[
        import assets.Page;
        public var oneTwo:Page = new Page("...");
        public var oneThree:Page = new Page("...");
        protected var oneFour:Page = new Page("...");
        protected var oneFive:Page = new Page("...");
        protected var oneSix:Page = new Page("...");

        protected function _init():void
        {
            oneThree.next = oneFour;
            oneThree.prev = oneTwo;
            oneFour.next = oneFive;
            oneFour.prev = oneThree;
            oneFive.next = oneSix;
            oneFive.prev = oneFour;
        }
    ]]>
</fx:Script> 
```

这为我解决了错误。希望这对其他人有帮助！

# bash - BASH：在回显期间替换变量内的变量

> ID：10997430
> 
> 赞同：2
> 
> 时间：2012-06-12T13:13:10.660
> 
> 标签：bash

我在评论中解释了我的问题：

```
VAR=
INS="Installing $VAR"

echo $INS   
.           # In each echo command I want to dynamically substitute
.           # the $VAR variable in the $INS variable. I want to do
echo $INS   # the substitution of the variable on echo command. 
```

这可能吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-12T13:25:22.027

你需要一个函数来优雅地完成工作。

```
say() {
    echo "Installing $INS"
}

INS=hello
say

INS=world
say 
```

* * *

或者只是这样：

```
say() {
    echo "Installing $@"
}

say hello

say world 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-12T13:37:04.313

例如：

```
[ghoti@pc ~]$ cat varins
#!/bin/bash

msg='Installing "$VAR"'

for VAR in foo bar baz; do
  eval echo "$msg"
done

[ghoti@pc ~]$ ./varins
Installing foo
Installing bar
Installing baz
[ghoti@pc ~]$ 
```

这取决于 $VAR 不会在单引号内展开的事实。该`eval`命令将展开`$msg`变量，shell 将在其中找到`$VAR`要替换的变量。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-12T13:40:48.657

参数替换也可以：

```
ins='aaa $var aaa'
var='xxx'
echo "'${ins//\$var/$var}'" 
```

结果：

```
'aaa xxx aaa' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-12T13:20:50.087

```
INS='Installing $VAR'
result=`eval "echo $INS"`
echo $result 
```

您必须使用单引号在创建 INS 时不替换 $VAR
`eval`在运行时和 with 评估 $INS 并`echo`作为`backticks`替换字符串返回

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-06-12T13:34:08.030

正如 Hachi 所说，您需要单引号来防止 $VAR 过早评估。Graham 在评论中建议避免像这样的 subshel​​l 调用：

```
#!/bin/bash
VAR=17
INS='Installing $VAR'
eval "echo \"$INS\""
VAR=42
eval "echo \"$INS\"" 
```

如果你不这样做：

```
VAR=23
INS="Installing $VAR"
echo $(eval "echo $INS")
VAR=8
echo $(eval "echo $INS") 
```

23 立即绑定，并且没有注意到分配 VAR=8 。

结果：

```
Installing 17
Installing 42
Installing 23
Installing 23 
```

# c++ - 从非托管代码更新性能计数器

> ID：10997434
> 
> 赞同：2
> 
> 时间：2012-06-12T13:13:22.807
> 
> 标签：c++, unmanaged, performancecounter

我在使用 PerflibV2 预览自定义性能计数器时遇到问题。

性能监视器按 GUID 显示我的自定义性能计数器组，当我想扩展它时，会显示“无法加载计数器”。

我尝试将自己添加到“性能监视器用户”和“性能日志用户”组，但没有成功。

我用谷歌搜索了它，并阅读了很多 MSDN 文章，但没有成功。

有人熟悉这个问题吗？

以下是我如何创建和添加自定义性能计数器的详细过程：

我需要创建一个性能计数器，该计数器将从我未管理的应用程序中更新。

我发现有两种方法：

*   封装托管性能计数器 API，这不是一个选项，因为它会影响性能；

*   使用提供所需功能的 PerflibV2；

作为一个测试应用程序，我创建了以下描述自定义性能计数器的 schema.xml 架构：

```
<!-- <?xml version="1.0" encoding="UTF-16"?> -->
<instrumentationManifest     
xmlns="http://schemas.microsoft.com/win/2004/08/events" 
xmlns:win="http://manifests.microsoft.com/win/2004/08/windows/events"
xmlns:xs="http://www.w3.org/2001/XMLSchema"    
>
<instrumentation>
    <counters xmlns="http://schemas.microsoft.com/win/2005/12/counters">
        <provider callback = "custom"
          applicationIdentity = "PerfCounters.exe"
          providerType = "userMode"
          providerGuid = "{ab8e1320-965a-4cf9-9c07-fe25378c2a23}">
            <counterSet
              guid = "{ad36a036-c923-4794-b696-70577630b5cf}"
              uri = "Microsoft.Windows.System.PerfCounters.MyCounterSet1"
              name = "My LogicalDisk" 
              description = "This is a sample counter set with multiple instances." 
              instances = "multiple">
                <counter id = "1"
                  uri = "Microsoft.Windows.System.PerfCounters.MyCounterSet1.MyCounter1"
                  name = "My Free Megabytes"
                  description = "First sample counter."
                  type = "perf_counter_rawcount"
                  detailLevel = "standard"
                  defaultScale = "1"/>
            </counterSet>
        </provider>
    </counters>
    </instrumentation>
</instrumentationManifest> 
```

并执行：

```
ctrpp schema.xml 
```

我将创建的文件添加到我的测试应用程序中，在我的测试应用程序中，大致：

```
PerfAutoInitialize();

ULONG instanceId = 0;
wchar_t instanceName[] = {'t', 'e', 's', 't', 0};
PPERF_COUNTERSET_INSTANCE b = PerfCreateInstance(hDataSource_schema_1, &CtrSetGuid_schema_1_1, instanceName, instanceId); 
```

我安装了性能计数器：

```
lodctr /m:schema.xml 
```

我的 PerfCounters 应用程序在尝试从性能监视器读取计数器时启动并运行。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-01-08T12:25:05.107

注册 PerfCounter 提供程序失败的原因有几个：

*   检查清单文件的架构是否有效。[您可以根据 Microsoft 提供的 XSD 定义文件](http://msdn.microsoft.com/en-us/library/windows/desktop/aa373092%28v=vs.85%29.aspx)验证该文件。

*   如果您想检查，请使用该`lodctr`工具注册您的清单。确保`lodctr`以管理员身份运行该工具。如果您的权利不足，它将默默地失败。注册清单后，您应该能够在 PerfCounter 对话框中看到 CounterSet 的 GUID。（有关可以列出提供程序的工具，请参阅[浏览性能计数器](http://msdn.microsoft.com/en-us/library/windows/desktop/aa371886%28v=vs.85%29.aspx)。）

![在 PerfCounter 浏览器对话框中显示的 GUID](../Images/0efb9392c17e5bc65098caa4573590cc.png)

*   您必须同时生成头文件和资源文件（使用`-rc`和的`-o`选项`ctrpp`）。资源文件必须添加到您的解决方案中。

*   **构建您的应用程序，然后在当前目录中同时拥有清单文件和 .exe 的**同时重新运行该`lodctr`工具。确保清单文件指向提供程序属性中二进制文件的文件名：**`applicationIdentity`**

     **`<provider symbol="MyProvider" applicationIdentity="PerfCounterTest.exe" providerName="PerfCounterTest"`** 
***   运行应用程序。当应用程序运行时，您应该能够在浏览器对话框中看到您的提供商的名称：** 

 **![在此处输入图像描述](../Images/06d0c543104dbbd3a9c030153ac7dd94.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T10:46:09.000

我的示例到底有什么问题我不完全确定，但是有一个 Microsoft 示例，其中包含适用于 Windows 7 和 .NET Framework 3.5 SP1 的 Microsoft Windows SDK：

[http://www.microsoft.com/en-us/download/confirmation.aspx?id=3138](http://www.microsoft.com/en-us/download/confirmation.aspx?id=3138)

安装后 MS SDK 示例位于：

C:\Program Files\Microsoft SDKs\Windows\v7.0\Samples\winbase\PerfCounters\Basic\CPP

它应该适用于 Windows 7（ctrcpp 的参数较少，使用 PerfAutoInitialize() 和 PerfAutoCleanup() 代替 CounterInitialize() 和 CounterCleanup()）。

它应用程序在从 perfmon 添加计数器 [时崩溃，请参阅：Perflib 2 crash when added a counter (from Perfmon)](https://stackoverflow.com/questions/4431372/perflib-2-crashes-when-adding-a-counter-from-perfmon)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-26T17:53:23.330

我知道这个问题已经得到解答，但我遇到了同样的问题，这是因为我忘记将生成的 .RC 文件包含到可执行文件中。当我用 stringtable、`unlodctr`ed 和`lodctr`ed 模式文件重新编译包括 .RC 文件的可执行文件时，它开始工作。**

# proof - 基于函数的隐含证明引理

> ID：10997439
> 
> 赞同：0
> 
> 时间：2012-06-12T13:13:41.660
> 
> 标签：proof, coq

我想证明下面的引理。我正在尝试使用“破坏”策略，但我无法证明这一点。请任何人指导我如何证明这样的引理。我可以为 EmptyString 证明它，但不能为变量 s1 和 s2 证明。谢谢

```
Inductive nat : Set :=
  | O : nat
  | S : nat -> nat.

  Inductive string : Set :=
  | EmptyString : string
  | String : ascii -> string -> string.

  Fixpoint CompStrings (sa : string) (sb : string) {struct sb}: bool :=
  match sa with
  | EmptyString => match sb with
                  | EmptyString => true
                  | String b sb'=> false
                  end
  | String a sa' => match sb with
                   | EmptyString => false
                   | String b sb'=> CompStrings sa' sb'
                   end
 end.

 Lemma Eq_lenght : forall (s1 s2 : string), 
                 (CompStrings s1 s2) = true -> (Eq_nat (length s1) (length s2)) = true. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T22:47:38.877

首先，让我争论风格。您可以这样编写函数 CompStrings：

```
Fixpoint CompStrings' (sa : string) (sb : string) {struct sb}: bool :=
  match sa, sb with
  | EmptyString,  EmptyString => true
  | EmptyString,  _
  | _,            EmptyString => false
  | String a sa', String b sb'=> CompStrings sa' sb'
  end. 
```

我觉得更容易阅读。这是一个与您相同的证据，以防您怀疑：

```
Theorem CompStrings'ok: forall sa sb, CompStrings sa sb = CompStrings' sa sb.
Proof.
  intros. destruct sa, sb; simpl; reflexivity.
Qed. 
```

* * *

现在，这将是一个双重的答案。首先，我将向您提示证明的方向。然后，我会给你一个完整的证明，我鼓励你在自己尝试之前不要阅读。

首先，我假设了这个定义，`length`因为你没有提供它：

```
Fixpoint length (s: string): nat :=
  match s with
  | EmptyString => O
  | String _ rest => S (length rest)
  end. 
```

因为我也没有 Eq_nat，所以我继续证明长度在命题上是相等的。适应 Eq_nat 应该是相当简单的。

```
Lemma Eq_length' : forall (s1 s2 : string),
  CompStrings s1 s2 = true ->
  length s1 = length s2.
Proof.
  induction s1.
  (* TODO *)
Admitted. 
```

所以这里是开始！您想证明关于归纳数据类型字符串的属性。问题是，你会想通过案例分析来进行，但如果你只是用`destruct`s 来做，它永远不会结束。这就是我们继续前进的原因`induction`。也就是说，您需要证明`if s1 is the EmptyString, then the property holds`和`if the property holds for a substring, then it holds for the string with one character added`。这两种情况相当简单，在每种情况下，您都可以在 s2 上进行案例分析（即使用`destruct`）。

注意我之前没有`intros s1 s2 C.`做`induction s1.`。这是相当重要的一个原因：如果你这样做（尝试！），你的归纳假设将受到太多限制，因为它会谈论一个特定`s2`的，而不是被它量化。当您开始通过归纳进行证明时，这可能会很棘手。所以，一定要尝试继续这个证明：

```
Lemma Eq_length'_will_fail : forall (s1 s2 : string),
  CompStrings s1 s2 = true ->
  length s1 = length s2.
Proof.
  intros s1 s2 C. induction s1.
  (* TODO *)
Admitted. 
```

最终，你会发现你的归纳假设不能应用于你的目标，因为它是在谈论一个特定的`s2`.

* * *

我希望你已经尝试过这两个练习。

现在，如果您遇到困难，这是证明第一个目标的一种方法。

不要作弊！:)

```
Lemma Eq_length' : forall (s1 s2 : string),
  CompStrings s1 s2 = true ->
  length s1 = length s2.
Proof.
  induction s1.
  intros s2 C. destruct s2\. reflexivity. inversion C.
  intros s2 C. destruct s2\. inversion C. simpl in *. f_equal.
  exact (IHs1 _ C).
Qed. 
```

说得通俗一点：

*   让我们通过对 s1 的归纳来证明这个性质`forall s2, CompStrings s1 s2 = true -> length s1 = s2`：

    *   在 s1 是 的情况下`EmptyString`，让我们看看 s2 的形状：

        1.  s2 是`EmptyString`，那么两个长度都等于 0，所以`reflexivity.`;

        2.  s2 是 a `String _ _`，因此假设存在矛盾，由`inversion C.`;

    *   在 s1 是 a 的情况下`String char1 rest1`，让我们看看 s2 的形状，假设其余属性为 true：

        1.  s2 是`EmptyString`，所以假设存在矛盾，用 表示`inversion C.`；

        2.  s2 是 a `String char2 rest2`，那么`length s1 = S (length rest1)`和`length s2 = S (length rest2)`，因此我们需要证明`S (length rest1) = S (length rest2)`。此外，假设 C 简化为`C: CompStrings rest1 rest2 = true`。这是使用归纳假设证明`length rest1 = length rest2`，然后以某种方式使用该结果来证明目标的最佳时机。

请注意，对于最后一步，有很多方法可以继续证明`S (length rest1) = S (length rest2)`. 其中之一是 using `f_equal.`which 要求您证明构造函数的参数之间的成对相等。您也可以`rewrite (IHs1 _ C).`在该目标上使用 then use reflexivity。

希望这不仅可以帮助您解决这个特定的目标，还可以帮助您初步了解归纳证明！

* * *

为了结束这一点，这里有两个有趣的链接。

[这介绍了归纳的基础知识（参见“列表上的归纳”段落）。](http://www.cis.upenn.edu/~bcpierce/sf/Lists.html)

[这比我更好地解释了为什么以及如何概括你的归纳假设。](http://www.cis.upenn.edu/~bcpierce/sf/Gen.html)您将学习如何解决我所做的目标，方法是在开始归纳之前`intros s1 s2 C.`放回`s2`目标中，使用 tactic `generalize (dependent)`。

一般来说，我建议阅读[整本书](http://www.cis.upenn.edu/~bcpierce/sf/)。它节奏缓慢，非常具有指导意义。

# r - 如何在数据框中找到最高值？

> ID：10997444
> 
> 赞同：10
> 
> 时间：2012-06-12T13:13:59.957
> 
> 标签：r, dataframe

我有一个`x`具有以下值的数据框：

```
 x1  x2  x3
1  NA   4   1
2  NA   3  NA
3   4  NA   2
4  NA   1  11
5  NA   2  NA
6   5  NA   1
7   5   9  NA
8  NA   2  NA 
```

一个简单的问题：**如何获得最高价值？**(11)

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-06-12T13:16:33.043

`max()`与`na.rm`设置为 的参数一起使用`TRUE`：

```
dat <- read.table(text="
   x1  x2  x3
1  NA   4   1
2  NA   3  NA
3   4  NA   2
4  NA   1  11
5  NA   2  NA
6   5  NA   1
7   5   9  NA
8  NA   2  NA", header=TRUE) 
```

获得最大值：

```
max(dat, na.rm=TRUE)
[1] 11 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-12-02T03:11:07.327

要查找列的总和，您可能需要先将其取消列出；

```
max(unlist(myDataFrame$myColumn), na.rm = TRUE) 
```

[来源](http://r.789695.n4.nabble.com/max-number-from-a-list-of-numbers-td2225172.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-08-15T16:15:49.777

你可以写一个列最大值函数，`colMax`。

```
colMax <- function(data) sapply(data, max, na.rm = TRUE) 
```

对样本数据使用 colMax 函数：

```
colMax(x)
#    x1     x2     x3
#   5.0    9.0    11.0 
```

# c# - 查找 X 和 Y 位置

> ID：10997446
> 
> 赞同：0
> 
> 时间：2012-06-12T13:14:04.890
> 
> 标签：c#, xna

我正在尝试找到 X 和 Y 位置，以便可以在游戏窗口的某个部分绘制图像，但我不知道如何执行此操作，也找不到有关如何执行此操作的任何信息，如果有人可以的话帮助将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T13:18:41.860

您可以从 Microsoft.Xna.Framework.Input 中的鼠标类获取鼠标状态；

```
 MouseState mouseState = Mouse.GetState();

        var x = mouseState.X;
        var y = mouseState.Y; 
```

# eclipse - Eclipse 运行配置，将所选资源的完整包名称作为变量

> ID：10997448
> 
> 赞同：0
> 
> 时间：2012-06-12T13:14:06.747
> 
> 标签：eclipse, maven, m2e

我正在从 Eclipse 运行一个 Maven 项目，并且想要设置一个带有目标的运行配置`compile exec:java`，这需要一个`exec.mainClass`参数。因为我的项目中有不同的主类，所以我希望在运行时使用当前选择的资源的类和包名。作为参数值插入的正确运行变量是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T09:06:47.580

我使用下面的配置来快速运行当前选中的类的main方法。我知道您只是询问了参数，但我会为其他访问者提供更详细的步骤，因为我在网上没有找到任何解决方案。

先决条件：[m2e eclipse 插件](http://eclipse.org/m2e/)，[exec-maven-plugin](http://mojo.codehaus.org/exec-maven-plugin/)

1.  选择*运行方式 > Maven 构建…*
2.  使用目标`exec:java`
3.  *可选：*提供配置文件名称
4.  *可选：*选择*调试输出*
5.  单击*Add ...*创建参数
    *   姓名：`exec.mainClass`
    *   值：（`${java_type_name}`这提供了当前选定资源的完整 java 名称）

现在，每当您使用此运行配置时，它都会将当前类作为参数并执行其 main 方法。该`${java_type_name}`变量由 eclipse 提供，因此它也应该在不使用 m2e 的情况下以某种方式工作。

值得一提的是，当我在*pom.xml*`exec.mainClass`中提供目标和默认配置时，该参数对我不起作用。不确定这是否是错误，我做错了什么，或者根本不可能。我不得不删除任何目标，只包含插件而不在构建中配置它以使其工作：

 *```
<plugin>
    <groupId>org.codehaus.mojo</groupId>
    <artifactId>exec-maven-plugin</artifactId>
    <version>1.2.1</version>
</plugin> 
```*

# sql - 将 SQL 转换为 Doctrine DQL

> ID：10997449
> 
> 赞同：1
> 
> 时间：2012-06-12T13:14:08.190
> 
> 标签：sql, doctrine, doctrine-orm, dql

谁能帮我把这个 SQL 翻译成 Doctrine 2 DQL

据我了解：

> 尽管文档说了什么，Doctrine 不支持 FROM 子句中的子查询

但一定有办法...

```
SELECT * FROM 
(
  SELECT m.*,qf, y.name as annee 
  FROM pbs_members m
  LEFT JOIN pbs_qf qf ON m.id = qf.member_id
  LEFT JOIN pbs_years y ON qf.year_id=y.id
  ORDER BY y.name DESC
) AS m_temp
GROUP BY id 
```

**编辑：**

我有 3 张桌子：

```
pbs_members (id, member_type_id, uid, address, birth_date, email)
pbs_qf (id, member_id, year_id, qf)
pbs_years (id, name) 
```

我想要的是：所有拥有当年 QF 的用户，如果没有为当年定义 QF，则减少年份直到找到 QF，如果没有找到 QF，则返回 null/没有找到 QF

# sitecore - 为特定用户应用 Sitecore 工作流程

> ID：10997451
> 
> 赞同：0
> 
> 时间：2012-06-12T13:14:19.460
> 
> 标签：sitecore, sitecore6, sitecore-workflow

是否可以仅在 Sitecore 中为特定用户应用工作流？

我想在编辑器编辑任何项目时应用工作流程，但不想在该项目上应用工作流程以防管理员对其进行编辑。那可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T13:19:31.723

第一个问题：工作流应用于项目。但是，工作流确实具有安全性。这意味着您可以在用户（或角色）级别拥有不同的操作/流程。

第二个问题：在“编辑用户屏幕”上选中“用户是管理员”复选框的用户实际上会绕过工作流程。

# java - 当架构来自类路径时，Java XML 验证不起作用

> ID：10997453
> 
> 赞同：7
> 
> 时间：2012-06-12T13:14:20.413
> 
> 标签：java, xml, xsd, xml-validation

我正在根据模式验证 XML 文档。尝试使用此代码验证它们时，一些更复杂的文档/模式总是失败：

```
 DocumentBuilderFactory dbfac = DocumentBuilderFactory.newInstance();
    dbfac.setNamespaceAware(true);
    dbfac.setIgnoringElementContentWhitespace(true);
    DocumentBuilder docBuilder = dbfac.newDocumentBuilder();
    Document doc = docBuilder.parse("sampleResponse.xml");

    SchemaFactory schemaFactory = SchemaFactory.newInstance(XMLConstants.W3C_XML_SCHEMA_NS_URI);
    Source schemaSource = new StreamSource(getClass().getResourceAsStream("/" + "SampleResponse.xsd"));

    Schema schema = schemaFactory.newSchema(schemaSource);
    Validator validator = schema.newValidator();
    Source source = new DOMSource(doc);
    // Set a custom error handler that simple re-throws every exception
    validator.setErrorHandler(new ValidationErrorHandler());
    validator.validate(source); 
```

问题是这一行：

```
 Source schemaSource = new StreamSource(getClass().getResourceAsStream("/" + "SampleResponse.xsd")); 
```

如果我将架构作为文件读取，它可以工作：

```
 Source schemaSource = new StreamSource(new File("somepath/SampleResponse.xsd")); 
```

当我直接从类路径获取架构时，为什么验证不起作用？

（在 Windows 7 64 位上使用 Java 1.6）

失败时的异常消息： `Could not validate against schema SampleResponse.xsd. Nested exception: src-resolve: Cannot resolve the name 'oa:Attachments' to a(n) 'element declaration' component.`

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-12T13:41:48.697

当您将 File 传递给 StreamSource 时，InputStream 被设置为文件的内容，而且 systemId 被设置为文件的 URL。这允许解析架构中的相对 URI。如果您的架构有任何相对 URL，这绝对是您的问题。要在从类路径读取架构时使这些相对 URL 可解析，您需要实现[EntityResolver](http://docs.oracle.com/javase/1.5.0/docs/api/org/xml/sax/EntityResolver.html)。如果您不使用相对 URI，则 systemId 为 null 可能还会产生其他更微妙的影响。我建议使用构造函数

```
StreamSource(InputStream inputStream, String systemId) 
```

尝试将 systemId 设置为：null、包含架构的文件、其他文件、不存在的文件。这可能会给你一个关于 Validator 对 systemId 做了什么的提示。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-05-24T22:22:48.417

我发现我不需要实现 EntityResolver 来使相对 URL 可以从类路径中解析。

将系统 ID 设置为类路径资源的 URI 就足够了。

以下是一个使用 Spring从类路径上的 .xsd 文件构建*StreamSource列表的工作示例。*

## 设置验证源

```
import org.springframework.core.io.Resource;
import org.springframework.core.io.support.PathMatchingResourcePatternResolver;
import javax.xml.transform.Source;
import javax.xml.transform.stream.StreamSource;

PathMatchingResourcePatternResolver patternResolver = new PathMatchingResourcePatternResolver();
Resource[] theResources = patternResolver.getResources("classpath:schemas/**/*.xsd");
List<Source> sources = new ArrayList<>();
for (Resource resource: theResources) {
    StreamSource dtd = new StreamSource(resource.getInputStream());
    dtd.setSystemId(resource.getURI().toString());
    sources.add(dtd); 
```

*patternResolver*被赋予一个模式，该模式`classpath:schemas/**/*.xsd`允许它递归地在类路径上的*schemas*目录中查找所有 .xsd 文件。

.xsd 文件可以使用相对路径导入其他 .xsd 文件。例如，一个 .xsd 文件可以包含这样的导入：

```
<xsd:import namespace="urn:www.example.com/common" schemaLocation="./common.xsd"> 
```

这一行：

```
dtd.setSystemId(resource.getURI().toString()); 
```

是使架构验证器解析 .xsd 文件中的相对路径的关键。

## 执行验证

上面构建的*StreamSource*数组 ( *sources* ) 现在可用于设置 XML 验证的模式源：

```
import org.xmlunit.builder.Input;
import org.xmlunit.validation.Languages;
import org.xmlunit.validation.Validator;
import javax.xml.transform.Source;

Validator v = Validator.forLanguage(Languages.W3C_XML_SCHEMA_NS_URI);
v.setSchemaSources(sources.toArray(new Source[sources.size()]));
Source input = Input.fromByteArray(xmlBytes).build();
v.validateInstance(input); 
```

*validateInstance*方法调用验证由*xmlBytes*数组表示的XML。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-10-14T13:01:25.803

对于后代，这是我在 Scala 中所做的事情，灵感来自 Joman68 的答案[https://stackoverflow.com/a/50518995/434405](https://stackoverflow.com/a/50518995/434405)，它不使用弹簧库。

```
import javax.xml.XMLConstants
import javax.xml.transform.Source
import javax.xml.transform.stream.StreamSource
import javax.xml.validation.{Schema, SchemaFactory, Validator}

object SchemaCheck extends App {

  private val xsds = List("schema.xsd") // add more as required

  private val schemaDocuments: Array[Source] = xsds.map { xsd =>
    val res = getClass.getResource(s"/$xsd")
    val dtd = new StreamSource(res.toURI.toString)
    dtd.setSystemId(res.toURI.toString)
    dtd
  }.toArray

  private val sf           = SchemaFactory.newInstance(XMLConstants.W3C_XML_SCHEMA_NS_URI)
  private val s: Schema    = sf.newSchema(schemaDocuments)
  private val v: Validator = s.newValidator()

  private val instanceDocument: Source = new StreamSource(new java.io.File("test.xml"))
  v.validate(instanceDocument)
} 
```

# android - ListView如何维护ViewPager的状态？

> ID：10997456
> 
> 赞同：5
> 
> 时间：2012-06-12T13:14:30.297
> 
> 标签：android, android-listview, android-viewpager

我想实现一个 ViewPagers 列表。ListView 的每一项都是 ViewPager。到目前为止，这有效。我的问题是，我无法维护 ViewPager 的状态。例如：当我更改列表中第一个 ViewPager 的页面时，向下滚动直到第一个 ViewPager 不再可见，然后再次向上滚动，第一个 ViewPager 再次显示其第一页。

我写了两个适配器，一个用于 ListView，一个用于 ViewPager。我正在尝试从 ListAdapter 中 getView 方法的 convertView 参数中回收视图。不确定我是否做对了，也不知道如何在 ViewPagerAdapter 中做到这一点。

有任何想法吗？

到目前为止，这是我的代码：

从 MyListAdapter 获取视图：

```
@Override
public View getView(int position, View convertView, ViewGroup parent) {
    if(convertView == null){
        LayoutInflater inflater = (LayoutInflater) mContext.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        mRowView = inflater.inflate(R.layout.listitem, parent, false);

    }else{
        mRowView=convertView;
    }
    switch(position){
    case 0://Fussball
        ViewPagerAdapter fussballAdapter = new ViewPagerAdapter(mContext,"Fussball");
        ViewPager fussballPager = (ViewPager) mRowView.findViewById(R.id.viewpager1);
        fussballPager.setAdapter(fussballAdapter);
    break;
    case 1://Handball
    ViewPagerAdapter handballAdapter = new ViewPagerAdapter(mContext,"Handball");
        ViewPager handballPager = (ViewPager) mRowView.findViewById(R.id.viewpager1);
        handballPager.setAdapter(handballAdapter);
        break;
    //.../
    default:
        //Do nothing
    }
    return mRowView;
} 
```

从 ViewPagerAdapter 实例化项目：

```
@Override
public Object instantiateItem(View pager, int position) {
    inflater = (LayoutInflater) context
        .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    switch(position){
    case 0:
        oneLayout=inflater.inflate(R.layout.table_layout, null);
        break;
    case 1:
        oneLayout=inflater.inflate(R.layout.table_layout_second, null);
        break;
    default:
        oneLayout=inflater.inflate(R.layout.table_layout, null);
        break;
    }
    ((ViewPager)pager).addView( oneLayout, 0 );
    return oneLayout;
} 
```

谢谢！:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T14:08:10.723

实现 setOnPageChangeListener 并且您可以在此处获取当前位置 onpageselected

```
 pager = (ViewPager) findViewById(R.id.pager);
    pager.setAdapter(new ImagePagerAdapter(imageUrls));
    pager.setCurrentItem(position);

    pager.setOnPageChangeListener(new ViewPager.OnPageChangeListener() {

        public void onPageScrollStateChanged(int arg0) {
            // TODO Auto-generated method stub
            int i = 0;
            int newpos = arg0;

        }

        public void onPageScrolled(int arg0, float arg1, int arg2) {
            // TODO Auto-generated method stub
            int i = 0;
            int newpos = arg0;

        }

        public void onPageSelected(int arg0) {
            // TODO Auto-generated method stub
            int i = 0;
            position = arg0;
            //you can get Current position here             
        }
    }); 
```

希望这可以帮助！！！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T13:19:44.260

您可以感谢 ListView Recycling 作为此问题的原因。它有助于执行回收器回收您的行项目并重复使用它。

一个可以解决您的问题的简单解决方法是使用标签。在返回 rowView 之前设置标签。

```
view.setTag(currentPagerPosition); 
```

然后如果 convertView != null 你知道你必须已经设置了位置，所以你可以做

```
int pastPagerPosition = (int) view.getTag(); 
```

# c# - 只为在他/她的帐户中有信用的用户保护文件以供下载？

> ID：10997458
> 
> 赞同：0
> 
> 时间：2012-06-12T13:14:39.373
> 
> 标签：c#, asp.net

我想创建一个网站来下载一些文件（pdf、word、xls，例如这些文件），每个文件都有 pice，例如 a.pdf 是 10 美元，b.pdf id 是 20 美元。例如用户“x”有 12 美元，我怎样才能阻止这个用户下载文件 b.pdf ？请给我建议。您知道我知道我可以拥有可以访问文件夹的角色的会员系统，但是文件呢？或者你认为我不需要注册用户他们可以为每个文件支付在线价格，例如你选择一个.pdf，你将连接到贝宝或其他人，你会支付，如果你支付链接将显示但是怎么样如果用户复制链接并将其发送给他/她的朋友？谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-12T13:17:38.397

您应该将文件从 Web 根目录中删除（这样它们就不能通过 URL 访问）。

然后，您可以编写一个带有文件名的 ASHX 文件或 MVC 操作，检查是否允许登录用户访问它，如果允许，则通过调用`Response.TransmitFile`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T13:28:42.430

为此，我将使用通用处理程序，就像 SLaks 建议的那样：添加新 -> 通用处理程序 (.ashx) 文件。然后在处理程序类中：

```
public class CustomImageHandler : IHttpHandler
{
        public void ProcessRequest(HttpContext context)
        {
            //Get file name from query string and check balance for that file extension... read the file into aStream

            context.Response.Clear();
            context.Response.ContentType = "image/...";
            context.Response.AddHeader("Content-Disposition", string.Format("attachment; filename=\"{0}\"", GetTheFileName()));
            context.Response.BinaryWrite(aStream.ToArray());
        }
} 
```

然后图像超链接是：

[http://yourdomain.path/../CustomImageHandler.ashx?filename=file1.pdf](http://yourdomain.path/../CustomImageHandler.ashx?filename=file1.pdf)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-12T13:16:53.637

您可以有一个接受文件 id 作为 GET 参数的页面，并让后面的代码检查他们的余额。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-12T13:24:18.640

我想我在交易成功完成时得到了它，它将返回 true，我可以检查返回的值是否为 true，文件 cqn 将与当前用户一起下载。感谢您的帮助：x

# java - 如何使用 apache telnet 在远程服务器中打开进程

> ID：10997460
> 
> 赞同：0
> 
> 时间：2012-06-12T13:14:42.643
> 
> 标签：java, unix, process, telnet

我在使用 apache commons-net telnet api 时遇到了问题，希望您能帮我解决。

我正在通过 telnet 连接到远程 unix 服务器并运行一个脚本，该脚本有时会运行一个 .sh 文件。该文件打开一个需要继续运行的服务器，即使在与客户端的 telnet 连接关闭后也是如此。问题是当我关闭客户端连接时，进程停止。我认为当连接丢失时，没有对正在运行的进程的引用，操作系统正在杀死它，但我不确定。
如果是这种情况，我知道如果可以将服务器进程作为守护进程打开，问题将得到解决。
也许还有其他方法可以做到...

有人可以帮我解决这个问题吗？感谢
moshe ben 名词

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T13:25:04.613

`nohup`在后台使用该过程的组合和运行`&`应该可以满足您的需求。

[http://www.livefirelabs.com/unix_tip_trick_shell_script/june_2003/06022003.htm](http://www.livefirelabs.com/unix_tip_trick_shell_script/june_2003/06022003.htm)

# .net - 如何在 F#（或一般的 .Net）中生成标准正态随机变量？

> ID：10997462
> 
> 赞同：2
> 
> 时间：2012-06-12T13:14:52.157
> 
> 标签：.net, random, f#, gaussian

我的模拟需要标准正态（高斯）随机变量。生成它们的最简单方法是什么？与 java 不同，标准的[Random](http://msdn.microsoft.com/en-us/library/system.random.aspx)类似乎只适用于统一变量。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-12T13:24:13.103

MathNet.Numerics库可以很好地与 F#[配合](http://numerics.mathdotnet.com/)使用，并提供各种随机生成器以及具有随机抽样方法的不同概率分布。可以在[此处](http://numerics.mathdotnet.com/Probability.html)找到有关如何从概率分布中应用随机抽样的更多详细信息。

# python - 使用 python 比较和操作字符串

> ID：10997466
> 
> 赞同：2
> 
> 时间：2012-06-12T13:15:00.450
> 
> 标签：python

我已经用Python编写了一个[XML 解析器，并且刚刚](http://pastebin.com/D9DkQdEv)[添加](http://pastebin.com/Y0DjtwHu)了从不同目录读取更多脚本的功能。

我有两个参数，第一个是我解析 XML 的路径。第二个是另一个 XML 文件中的字符串，我想与第一个路径匹配；

`arg1 = \work\parser\main\tools\app\shared\xml\calculators\2012\example\calculator`
`path = calculators/2012/example/calculator`

如何比较这两个字符串以匹配确定它们都引用相同的东西，以及如何`calculator`从任何一个字符串中剥离，以便我可以存储并使用它？

*编辑*

刚刚有一个想法。`year = re.findall(r"\.(\d{4})\.", path)`在将路径转换为导入语句时，我已经使用正则表达式来解决 Python 在数字方面遇到的问题。

我显然可以拆分字符串并使用正则表达式将路径匹配为 arg1 中的模式，但这似乎还有很长的路要走。肯定有更好的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T13:47:51.190

*在这里，我假设您实际上是在谈论字符串，而不是文件路径-@mgilson 的建议更好*

> 如何比较两个字符串以匹配确定它们都引用相同的东西

那么首先你需要确定你所说的*“同一件事”是什么意思*

乍一看，如果第二个字符串以带有反斜杠的第一个字符串结尾，那么您就有了匹配项。

```
arg1 = r'\work\parser\main\tools\app\shared\xml\calculators\2012\example\calculator'
arg2 = r'calculators/2012/example/calculator'

>>> arg1.endswith(arg2.replace('/','\\'))
True 
```

> 而且，我怎样才能从任一字符串中删除计算器，以便我可以存储并使用它？

您还需要决定是否要删除第一个*计算器*、最后一个*计算器*或字符串中出现的任何*计算器*。

如果您只想删除分隔符后的最后一个字符串，那么它很简单：

```
>>> arg2.split('/')[-1]
'calculator' 
```

现在要取回原始字符串，没有最后一点：

```
>>> '/'.join(arg2.split('/')[:-1])
'calculators/2012/example' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T13:19:03.730

退房`os.path.samefile`：

[http://docs.python.org/library/os.path.html#os.path.samefile](http://docs.python.org/library/os.path.html#os.path.samefile)

和`os.path.dirname`：

[http://docs.python.org/library/os.path.html#os.path.dirname](http://docs.python.org/library/os.path.html#os.path.dirname)

或者也许`os.path.basename`（我不确定您要保留字符串的哪一部分）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-12T13:49:51.380

在这里，试试这个：

```
arg1 = "\work\parser\main\tools\app\shared\xml\calculators\2012\example\calculator"
path = "calculators/2012/example/calculator"

arg1=arg1.replace("/","\\")
path=path.replace("/","\\")
if str(arg1).endswith(str(path)) or str(path).endswith(str(arg1)):
    print "Match" 
```

这应该可以满足您的需求。干杯:)

# lotus-notes - 数据库构建/清理时间

> ID：10997467
> 
> 赞同：0
> 
> 时间：2012-06-12T13:15:04.950
> 
> 标签：lotus-notes, xpages

我注意到最近我们的 xpages 应用程序构建/编译时间急剧增加。清洁应用程序甚至可能需要整整一分钟。

这是一个非常复杂的应用程序，包含一些控件（自定义控件和 java 控件）和许多遗留代码（js、ls、java），但类似的应用程序构建在纯 ecplise 中，具有相同数量的 java 代码（这是唯一的一部分）这个改变的应用程序）在不到 3 秒内清理......

我用 rcp 调试控制台做了一些研究，发现在清理时有一些疯狂的流量，总计 15000 个事务（这个数据库只有大约 300 个包含代码的设计元素！）

日志看起来像这样一遍又一遍地重复：

... [1240:0007-03E0] (13586-124 [14561]) OPEN_NOTE(REPC12579BB:0033C2FE-NT00003052,00400000): 0 毫秒。[48+17446=17494]

[1240:0007-03E0] (13587-124 [14562]) OPEN_NOTE（REPC12579BB:0033C2FE-NT00006C12,00400000）：1 毫秒。[48+32118=32166]

所以我的问题是：

这是否意味着 xpages builder 写得真的很糟糕，或者我可能不知道什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T20:34:28.517

毕竟它似乎有一个构建时间问题的解决方案 - 它是新的 Domino Designer 9。升级到公共测试版后，构建时间急剧下降（只有几秒钟）！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T22:37:18.387

你是在做项目 - 构建还是项目 - 构建所有。如果后者并且您打开了多个 NSF，则构建将为所有应用程序运行。您可以在包资源管理器中关闭应用程序。

当您说有 300 个设计元素时，这就是您在 Applications Navigator 中看到的数字吗？请记住，这只是正在构建的实际文件的沧海一粟。包资源管理器将显示每个 XPage 和自定义控件都有额外的 Java 和 xsp-config 文件。这些是从您在 XPage 和自定义控件设计元素中看到的 XML 标记编译下来的 Java 类。但这还不是全部。服务器或本地数据库无法运行 .java 文件。它需要运行为相关平台编译的 .class 文件。此外，还有其他 .class 文件需要在编译时合并到应用程序中，可以通过在 Package Explorer 视图中选择 Project - Properties 来查看。如果您有本地化，对于每个 XPage/自定义控件，每种语言还有更多文件。

XPage 构建器可能看起来写得不好，因为需要创建这些文件。但它其实很聪明，因为我们不需要编写Java，也不需要定义应用程序所依赖的所有相关Java文件。我们不需要为各种控件创建新的 XSPInput 或任何 Java 类。我们可以拖放，从漂亮的面板设置属性，这些面板为我们提供下拉菜单或布尔选择器等。没有这些，每次保存后应用程序的构建时间会更快，但开发时间会更慢。

# java - 如何将用户的语言作为 ISO-639-2 代码获取？

> ID：10997468
> 
> 赞同：2
> 
> 时间：2012-06-12T13:15:07.550
> 
> 标签：java, locale

我想将此用户的操作系统语言作为 ISO-639-2（3 个字母语言代码）。如果我查询系统属性，我会得到一个两个字母的代码：

```
System.getProperty("user.language") 
```

Java 中是否有一个函数调用允许我在不创建单独的映射表的情况下获取 3 个字母的语言代码？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T13:17:02.387

我问得太快了。我的错。无论如何，这似乎做到了。

```
Locale.getDefault().getISO3Language() 
```

# javascript - ExtJS/JavaScript - 使用 replace() 函数时显示图像

> ID：10997471
> 
> 赞同：1
> 
> 时间：2012-06-12T13:15:14.633
> 
> 标签：javascript, extjs4

我不确定这个问题与 ExtJS 有多大关系，以及与纯 JavaScript 有多大关系。无论如何，我有一个逗号分隔值的字符串。我需要使用，`GUI`所以我尽量让它对用户友好。我做了大部分我想要的东西，但有一件事我还不能完成。我想用正确的图像替换字符串中的所有逗号，我认为这非常适合我正在做的事情，但现在 - 我尝试没有成功。

对于那些熟悉 ExtJS 的人 - 我正在为网格的某个列中的每个单元格执行此操作，并带有渲染功能。但我认为也许这个问题必须用纯 JavaScript 函数来解决。这是我现在所拥有的：

```
_cusomizeString: function(dates) {
        if (dates != null)
        {
            var date = dates.replace(/,/g,"|");
            var www = date.split('|');
            var xxx = www.length;
            for (var i = 2; i < xxx; i+=3)
                {
                    www[i] = www[i] + '<br />';
                }
            var ggg = www.toString();
            var hhh = ggg.replace(/,/g,'<img src =" ' + D:\dir1\dir2\dir3\dir4\dir5\img.png + ' "/>');
            return hhh;

        }
        return dates;
    } 
```

我尝试了一些变化，现在我没有收到错误，但也没有看到图像。

谢谢

勒龙

附言

随着功能的这种变化：

```
var finalString = tempString.replace(/,/g,'<img src ="http://www.finishingtouch.co.uk/assets/images/common/calendar_icon.png"/>'); 
```

我能够想象这一点：

![我的图像看起来如何](../Images/f3bbfb67e41c173f4ff0ae75939323b7.png)

现在的主要问题是如何在第一个元素之前添加图像，因为现在它丢失了（尤其是当只有一个日期时）以及我现在如何使它与本地文件一起使用？我试过在我的`replace`函数中使用它：

```
'<img src ="file:///D:\\symapac\\src\\public\\img\\icons\\draft.png"/>' 
```

但是控制台日志返回这个，我没有看到任何图像：

```
07-06-2012<img src ="file:///D:\dir1\dir2\dir3\dir4\dir5\img.png"/>16-06-2012 
```

好的，我几乎有最终的解决方案。这是它的样子：

![最终调整后](../Images/011fe3d036f1c261f581928906fe315d.png)

这是我的最终功能：

```
_checkDates: function(dates) {
        if (dates != null)
        {
            var date = dates.replace(/,/g,"|");
            var arrayOfDates = date.split('|');
            var stringLength = arrayOfDates.length;
            for (var i = 2; i < stringLength; i+=3)
                {
                    arrayOfDates[i] = arrayOfDates[i] + '<br />';
                }
            var tempString = arrayOfDates.toString();
            var finalString = tempString.replace(/,/g," ,");
                finalString = finalString.replace(/,/g,"<img src="+ "'" + pathToImage + "'" +"/>");
            var imgSrc = "<img src="+ "'" + pathToImage + "'" +"/>";
            var otuputString = imgSrc.concat(finalString); 

            return otuputString;

        }
        return dates;
    } 
```

有一个小问题，无论现在我在`var finalString = tempString.replace(/,/g," ,");`图标之间的空间中放置了多少标签，总是一样的，不知道为什么。但这是我最接近我想要的。

干杯

勒龙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T13:20:03.370

```
'<img src ="file:///D:/dir1/dir2/dir3/dir4/dir5/img.png"/>' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T13:19:17.403

你的文件名前有一个空格，你的文件名也不在引号中。

# c++ - 使用 Opencv 查找人脸的 Pose 变化

> ID：10997473
> 
> 赞同：3
> 
> 时间：2012-06-12T13:15:18.663
> 
> 标签：c++, opencv

在图像中有一张脸，它有点倾斜并且有轻微的姿势变化。使用 opencv 我检测到眼睛、鼻子和嘴巴的坐标。使用这 4 个点是否可以将这张脸重新对齐为理想的正面？我尝试了透视变换，它确实适用于一些图像，但对大多数照片都给出了可怕的结果。有没有其他方法可以在没有任何倾斜或姿势变化的情况下将图像重新对齐为理想的正面？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T13:37:26.253

我认为您可以参考[Procrustes 分析](http://en.wikipedia.org/wiki/Procrustes_superimposition)以获得更多帮助。想法是使用一组已知点找到从理想人脸到实际人脸的刚性变换矩阵。然后用这个变换矩阵的逆对实际人脸上的每个点取回理想的那个。

在这里，您有一组已知点（两只眼睛、鼻尖和嘴巴）。你可以为他们假设一个理想的位置。从使用 OpenCV 的图像检测中，您得到 4 个对应点。如果您可以假设只有旋转是可能的，您也可以参考[Kabsch 算法](http://en.wikipedia.org/wiki/Kabsch_algorithm)，我认为这在您的情况下可能是有意义的。这里有一个很好的问题[来](https://math.stackexchange.com/questions/77462/finding-transformation-matrix-between-two-2d-coordinate-frames-pixel-plane-to-w)解释上述主题。希望以上参考资料对您有所帮助。

# vba - 打开OFFICE CALC Macro's：如何获取单元格中更改后的旧数据？

> ID：10997479
> 
> 赞同：1
> 
> 时间：2012-06-12T13:15:51.983
> 
> 标签：vba, openoffice-calc

我做了一个宏并使用 ChartDataChangeEvent 在更改后获取单元格的值，但我也需要旧值才能转到另一张表中的特定列并根据已更改的单元格更改该值。

有没有办法获取旧数据（修改前）？（我不想复制所有表格，因为我的桌子很大，需要很长时间）。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T20:26:27.110

只是在这里大声思考，这是否是一条可行的路径：创建一个基于“数据更改”的脚本（每次用户修改数据时执行）。然后从活动单元格复制“新”数据，然后执行“撤消”，以取回旧数据，复制旧数据，然后将新数据放回原处。不知道您是否可以通过编程方式访问内部撤消堆栈，因为那样会更容易。

# jquery - 每次点击时都会加载jquery打印插件

> ID：10997481
> 
> 赞同：1
> 
> 时间：2012-06-12T13:15:58.863
> 
> 标签：jquery, html, jquery-plugins, plugins

我正在使用[jquery 打印插件](https://github.com/posabsolute/jQuery-printPage-plugin)

```
 $(document).ready(function() {

            $(".printButton").printPage({
                url: "pages/report.html",
                attr: "href",
                message:"Your document is being generated"
            });

        }); 
```

**带有上述脚本的 Jsp 页面**

```
<%@page contentType="text/html" pageEncoding="UTF-8"%>
<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>JSP Page</title>

   <script>

       $(document).ready(function() {

            $(".printButton").printPage({
                url: "pages/report.html",
                attr: "href",
                message:"Your document is being generated"
            });

        });
    </script>

</head>
<body>
    <h1>Press Yes to Print </h1>
    <p><a class="printButton" href='exception.jsp'>Yes</a></p>
</body>
</html> 
```

第一次打开页面，按yes，一次打印，第二次打开页面，按yes，单击打印2页，第三次单击打印3页。

它意味着每次点击时，[jquery 打印插件](https://github.com/posabsolute/jQuery-printPage-plugin)库都会一次又一次地加载。我们该如何控制呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T07:48:30.863

没有问题，在你身边。按以下方式编辑 jquery 插件库。

添加以下内容

```
this.die(); 
```

在以下语句之后

```
$.extend(pluginOptions, options); 
```

这会很好用！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T11:33:13.647

该插件没有问题，因为它使用实时，您需要将其添加到您的页面代码中，而不是在 ajax 调用中。

当然，也许我（我是作者）不应该为此使用事件委托，这是当时项目的要求，我可能会更改它，以便它使用 on() 将自身绑定到 dom。

至于其他评论，你们没有抓住重点。该插件用于 web 应用程序中的打印按钮，例如，您可以直接打印特殊的数据网格。它在 iframe 中加载 url 并打印它，所以你显然需要你的打印 css。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-12T14:14:24.827

不太确定要打印什么，exception.jsp 或 pages/report.html。可能发生的情况是您定义了太多参数。

通过检查插件，在我看来，您只需将 href 设置为`<a>`要打印的页面的 url 即可，其他参数只允许您指定 href 以外的其他内容（默认情况下使用） . 因此，尝试从 jquery 调用中删除`url`和，并将 href 更改为“pages/report.html”（如果这是您要打印的页面）。不确定 exception.jsp 应该做什么。`attr``<a>`

# php - PHP：比较 5.2 和 5.2.0 时，version_compare() 返回 -1？

> ID：10997482
> 
> 赞同：15
> 
> 时间：2012-06-12T13:16:03.603
> 
> 标签：php

```
version_compare('5.2', '5.2.0'); // returns -1, as if the second parameter is greater! 
```

5.2 和 5.2.0 不应该相等吗？（不是 5.2 和 5.2.0.0 也相等）？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-12T13:21:03.870

文档说它比较了“两个“PHP-standardized”版本号字符串。

您将一个 PHP 标准化版本号字符串与一个非 PHP 标准化版本号字符串进行比较。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2015-04-04T00:04:55.980

这是一个经过调整的比较函数，通过修剪零版本后缀组件，即`5.2.0`-> ，其行为符合预期`5.2`。

```
var_dump(my_version_compare('5.1', '5.1.0'));           //  0 - equal
var_dump(my_version_compare('5.1', '5.1.0.0'));         //  0 - equal
var_dump(my_version_compare('5.1.0', '5.1.0.0-alpha')); //  1 - 5.1.0.0-alpha is lower
var_dump(my_version_compare('5.1.0-beta', '5.1.0.0'));  // -1 - 5.1.0-beta is lower

function my_version_compare($ver1, $ver2, $operator = null)
{
    $p = '#(\.0+)+($|-)#';
    $ver1 = preg_replace($p, '', $ver1);
    $ver2 = preg_replace($p, '', $ver2);
    return isset($operator) ? 
        version_compare($ver1, $ver2, $operator) : 
        version_compare($ver1, $ver2);
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-20T14:27:34.947

5.2 和 5.2.0 都是 PHP 标准化的版本号字符串。AFAIU 5.2 代表 5.2.0、5.2.1 等。结果是合乎逻辑的，例如 5.2 不能等于 5.2.1 或 5.2.0，也不能大于 5.2.0。
所以只有预期的行为是 5.2 < 5.2.0, 5.2 < 5.2.1, ...

顺便说一句，甚至文档都指出：

> 这样不仅可以比较“4.1”和“4.1.2”等不同级别的版本，还可以比较...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-09-22T16:38:51.567

快速 PHP 函数来确定一个版本是否高于其他版本：

```
$v1 = "1.101.9999";
$v2 = "1.2";

if ( semver($v1, $v2) ) {
    echo "v1 is greater than v2";
}

function semver($v1, $v2, $version_separator = ".") {

    // DTSC
    $v1_sub = explode($version_separator, $v1);
    $v2_sub = explode($version_separator, $v2);

    for ($i=0; $i < sizeof($v1_sub); $i++) {

        if ( !isset($v2_sub[$i]) ) {
            $v2_sub[$i] = 0;
        }

        if ( intval($v1_sub[$i]) > intval($v2_sub[$i]) ) {
            return true;
        } else if ( intval($v1_sub[$i]) < intval($v2_sub[$i]) ) {
            return false;
        }

    }

    return false; // Versions are equal - Change this value if you need a specific return for equal versions
} 
```

# generics - How can I get the generic information of class using BCEL?

> ID：10997493
> 
> 赞同：0
> 
> 时间：2012-06-12T13:16:33.627
> 
> 标签：generics, bytecode, bcel

I would like to get the generic information (**Counter** class) of my CounterPersistence class using BCEL 6.0-SNAPSHOT. The signature is like this:

```
public interface CounterPersistence extends BasePersistence<Counter> {
....
} 
```

I'm using the following code to read the bytecode

```
JavaClass javaClass = ...;
Attribute[] attributes = javaClass.getAttributes();
for (Attribute attribute : attributes) {
    if (attribute instanceof Signature) {
        Signature signature = (Signature) attribute;
        //put the code here that get the Counter class from the signature
    }
} 
```

But I'm failing to write a code that parse the signature and allow me to get the type Counter. Thoughts?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T13:52:14.077

You can use BCEL utilities from FindBugs, e.g. [GenericUtilities.getTypeParameters(...)](http://findbugs.sourceforge.net/api/edu/umd/cs/findbugs/ba/generic/GenericUtilities.html#getTypeParameters%28java.lang.String%29) method or better switch to [ASM](http://asm.ow2.org/) framework.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-15T09:47:47.403

I found a solution:

```
Class.forName(org.apache.bcel.classfile.Utility.methodSignatureArgumentTypes("(" + signature + ")V")[0]); 
```

# java - 休眠错误：必须在调用 save() 之前手动分配此类的 id：

> ID：10997494
> 
> 赞同：87
> 
> 时间：2012-06-12T13:16:36.557
> 
> 标签：java, hibernate, identifier

```
引起：org.springframework.orm.hibernate3.HibernateSystemException：这个类的ids必须在调用save()之前手动分配：com.rfid.model.Role; 嵌套异常是 org.hibernate.id.IdentifierGenerationException：必须在调用 save() 之前手动分配此类的 id：com.rfid.model.Role
    在 org.springframework.orm.hibernate3.SessionFactoryUtils.convertHibernateAccessException(SessionFactoryUtils.java:676)
    在 org.springframework.orm.hibernate3.HibernateAccessor.convertHibernateAccessException（HibernateAccessor.java:412）
    在 org.springframework.orm.hibernate3.HibernateTemplate.doExecute(HibernateTemplate.java:424)
    在 org.springframework.orm.hibernate3.HibernateTemplate.executeWithNativeSession(HibernateTemplate.java:374)
    在 org.springframework.orm.hibernate3.HibernateTemplate.saveOrUpdate(HibernateTemplate.java:748)
    在 com.wfos.engine.wrapper.domain.impl.WrapperImpl.save（WrapperImpl.java:159）
    ... 47 更多
    原因：org.hibernate.id.IdentifierGenerationException：必须在调用 save() 之前手动分配此类的 id：com.rfid.model.Role
    在 org.hibernate.id.Assigned.generate(Assigned.java:53)
    在 org.hibernate.event.def.AbstractSaveEventListener.saveWithGeneratedId(AbstractSaveEventListener.java:121)
    在 org.hibernate.event.def.DefaultSaveOrUpdateEventListener.saveWithGeneratedOrRequestedId(DefaultSaveOrUpdateEventListener.java:210)
    在 org.hibernate.event.def.DefaultSaveOrUpdateEventListener.entityIsTransient（DefaultSaveOrUpdateEventListener.java:195）
    在 org.hibernate.event.def.DefaultSaveOrUpdateEventListener.performSaveOrUpdate(DefaultSaveOrUpdateEventListener.java:117)
    在 org.hibernate.event.def.DefaultSaveOrUpdateEventListener.onSaveOrUpdate(DefaultSaveOrUpdateEventListener.java:93)
    在 org.hibernate.impl.SessionImpl.fireSaveOrUpdate(SessionImpl.java:685)
    在 org.hibernate.impl.SessionImpl.saveOrUpdate(SessionImpl.java:677)
    在 org.hibernate.impl.SessionImpl.saveOrUpdate(SessionImpl.java:673)
    在 org.springframework.orm.hibernate3.HibernateTemplate$16.doInHibernate(HibernateTemplate.java:751)
    在 org.springframework.orm.hibernate3.HibernateTemplate.doExecute(HibernateTemplate.java:419)
    ... 50 更多
    警告 [21:14:21] (CommonsLoggingOutput.java:59): - --Erroring: batchId[1] message[java.lang.reflect.UndeclaredThrowableException]

```

我的课是这样的：

```
@Entity
@javax.persistence.Table(name="Role")
@Table(appliesTo = "Role")
public class Role {

@Id  
@Column(name="U_id")
public String U_id;

public String U_pwd;

public String U_account;

public String U_mode;

public String U_status;

public String getU_pwd() {
    return U_pwd;
}

public void setU_pwd(String u_pwd) {
    U_pwd = u_pwd;
}

public String getU_account() {
    return U_account;
}

public void setU_account(String u_account) {
    U_account = u_account;
}

public String getU_id() {
    return U_id;
}

public void setU_id(String u_id) {
    U_id = u_id;
}

public String getU_mode() {
    return U_mode;
}

public void setU_mode(String u_mode) {
    U_mode = u_mode;
}

public String getU_status() {
    return U_status;
}

public void setU_status(String u_status) {
    U_status = u_status;
}

} 
```

* * *

## 回答 #1

> 赞同：136
> 
> 时间：2012-06-12T13:36:54.673

您`@Entity`的类的字段具有`String`类型`@Id`，因此它无法为您生成 id。

如果将其更改为 DB 中的自动增量和`Long`java 中的 a，并添加`@GeneratedValue`注释：

```
@Id
@Column(name="U_id")
@GeneratedValue(strategy=GenerationType.IDENTITY)
private Long U_id; 
```

它将为您处理递增的 id 生成。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2017-04-05T20:26:41.580

使用 Oracle 数据库中定义的序列 ID 解决了这个问题。

`ORACLE_DB_SEQ_ID`被定义为表的序列。还要查看控制台以查看用于验证的 Hibernate SQL。

```
@Id
@Column(name = "MY_ID", unique = true, nullable = false)
@GeneratedValue(strategy=GenerationType.SEQUENCE, generator = "id_Sequence")
@SequenceGenerator(name = "id_Sequence", sequenceName = "ORACLE_DB_SEQ_ID")
Long myId; 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-21T09:44:19.040

对于休眠，重要的是要知道您的对象将有一个 id，当您想要持久/保存它时。因此，请确保

```
 private String U_id; 
```

将有一个值，当你要坚持你的对象。您可以使用`@GeneratedValue`注释或手动分配值来做到这一点。

如果您需要或想要手动分配您的 id（这就是上述错误的实际含义），我更愿意将字段的值传递给您的构造函数，至少对于`U_id`，例如

```
 public Role (String U_id) { ... } 
```

这可以确保您的对象在您实例化它时具有一个 id。我不知道您的用例是什么以及您的应用程序在并发情况下的行为方式，但是，在某些情况下不建议这样做。您需要确保您的 id 是唯一的。

进一步说明：Hibernate 仍然需要一个默认构造函数，如[hibernate 文档](http://docs.jboss.org/hibernate/core/3.5/reference/en/html/persistent-classes.html#persistent-classes-pojo-constructor)中所述。为了防止您（可能还有其他程序员，如果您正在设计一个 api）`Role`使用默认构造函数的实例化，只需将其声明为`private`.

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-02-28T08:46:30.323

这是我通过两种方式解决的问题：

1.  将 ID 列设为`int`类型

2.  如果您在 ID 中使用*自动生成*，请不要在 ID 的设置器中分配值。如果您的映射有时不承认自动生成的 ID。（我不知道为什么）

3.  `@GeneratedValue(strategy=GenerationType.SEQUENCE)`如果可能的话尝试使用

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-09-09T08:06:51.950

从 UI 你必须传递 ID（主键）然后观察者你正在保存或更新，如果你正在保存使用 save 方法或使用 saveOrUpdate 方法

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-08-20T19:15:46.173

如果您想像 JSON 或其他方式手动提供 id 的值，您可以在 U_id 变量之前添加 @JsonProperty(" U_id") 符号

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2022-02-23T23:30:31.837

将 entity.hbm.xml 中的类字段值更改为身份或序列

```
<hibernate-mapping>
<class name="models.Manager" table="Managers">
    <id name="id">
        <generator class="identity"></generator>
    </id>
    <property name="name"></property>
    <property name="surname"></property>
    <property name="department"></property>
    <property name="project_id"></property>
</class> 
```

如果您的实体 ID 仍然没有这些代码，请添加：

```
@Id
@Column(name = "id")
@GeneratedValue(strategy = GenerationType.IDENTITY) 
```

对我有用

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-06-08T04:14:21.147

当数字 id 值的类型不匹配时，H2 数据库出现此错误。通过多个 sql 语句生成和填充表，并将 id 设置为 INT。后来创建了 Entity Java 类并将 id 设置为 Long。调整 Java 类中的 id 类型后问题已解决。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2022-02-25T12:34:06.530

对于不同的场景，我得到了同样的错误。在我的情况下，我的表主键是一个 VARCHAR 值，所以在实体类（Entity1）中，ID 是一个字符串值，不能将其设置为自动生成。该实体也与另一个实体（Entity2）连接。

当我在更新 Entity2 并调用 save() 时将 Entity1 的值设置为空时，它会抛出此异常。为 id 设置空字符串不起作用。

```
Entity2 e2 = new Entity2();

Entity1 e1 = new Entity1();
e1.setId("");
e2.setEntity1(e1);

session.update(e2); 
```

为 id 设置 null 也不起作用。

```
Entity2 e2 = new Entity2();

Entity1 e1 = new Entity1();
e1.setId(null);
e2.setEntity1(e1);

session.update(e2); 
```

这样就可以了。

```
Entity2 e2 = new Entity2();
e2.setEntity1(null);
session.update(e2); 
```

# android - android中的httprequest失败并且异常为null

> ID：10997501
> 
> 赞同：3
> 
> 时间：2012-06-12T13:16:53.747
> 
> 标签：android, http-request

我有一个引发`null`异常的 HTTP 请求。

这是代码：

```
public String updateRounds() {
    // Create a new HttpClient and Post Header
    HttpClient httpclient = new DefaultHttpClient();
    HttpPost httppost = new HttpPost("https://technet.rapaport.com/HTTP/Prices/CSV2_Round.aspx");

    // Add your data
    List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(2);
    nameValuePairs.add(new BasicNameValuePair("Username", _user));
    nameValuePairs.add(new BasicNameValuePair("Password", _password));
    try {
        httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
    } catch (UnsupportedEncodingException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    ResponseHandler<String> responseHandler = new BasicResponseHandler();
    String response = "";
    // Execute HTTP Post Request
    try {
        response = httpclient.execute(httppost, responseHandler); // it gets
                                                                  // exception
                                                                  // here
    } catch (Exception e) {
        e.getMessage(); // e is null
    }

    return response;
} 
```

任何人都知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T10:10:41.990

感谢大家尝试提供帮助。我改变了

```
e.getMessage(); 
```

到

```
e.printStackTrace(); 
```

我看到例外是关于 ssl 证书。所以我处理了它，现在它可以工作了。谢谢你们。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T13:29:22.993

您在跟随时遇到问题。

```
String response = "";
    // Execute HTTP Post Request
    try {           
        response = httpclient.execute(httppost, responseHandler); //it gets exception here 
```

什么是响应处理器？

`httpclient.execute`返回`HttpResponse`并且您尝试将其返回`response`（即字符串）。

所以改变

```
 String response 
```

到

```
HttpResponse response 
```

如果您真的想返回字符串，请添加以下代码。

```
 bufferedReader = new BufferedReader(
               new InputStreamReader(response.getEntity().getContent()));
       StringBuffer stringBuffer = new StringBuffer("");
       String line = "";
       String LineSeparator = System.getProperty("line.separator");
       while ((line = bufferedReader.readLine()) != null) {
        stringBuffer.append(line + LineSeparator); 
       }

      bufferedReader.close();  
      return stringBuffer.toString(); 
```

# maven - 用于部署到 JBoss 的单独 Jenkins-Project

> ID：10997503
> 
> 赞同：2
> 
> 时间：2012-06-12T13:16:54.700
> 
> 标签：maven, jboss, jenkins

我有一个 Jenkins 构建，它使用`-PmyProfile clean package`. 这工作正常。现在我希望该项目是可部署的，但在一个单独的任务（JBoss 部署）中，因此它可以通过 jenkins GUI 显式触发。为此，我的 pom 中有以下内容：

```
<profiles>
    <profile>
        <id>myProfile</id>
        <properties>...</properties>
        <build>
            <plugins>
                <plugin>
                    <groupId>org.jboss.as.plugins</groupId>
                    <artifactId>jboss-as-maven-plugin</artifactId>
                    <version>7.0.0.Final</version>
                    <configuration>
                        <hostname>localhost</hostname>
                        <port>29999</port>
                        <username>admin</username>
                        <password>admin</password>
                        <filename>${project.build.finalName}.war</filename>
                        <name>my-webapp</name>
                    </configuration>
                </plugin>
            </plugins>
        </build>
    </profile>
</profiles> 
```

现在我只想分别调用那个单一的部署`mvn jboss-as:deploy`。但我该怎么做呢？如果我创建第二个 Jenkins 项目，一切都需要重新构建，所以这很愚蠢。构建为单独的模块也不起作用（“构建 maven 3 不支持的单个模块”出现一些错误）。

有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T13:25:00.120

它有点糟糕，但是您始终可以通过使用文件系统相对路径`../../SecondJob/workspace`（或使用符号链接）从另一个 Jenkins 工作区获取内容。我曾经为我所有的项目在同一个案例（作为单独的工作部署）上执行此操作，并且它可以工作，它并不优雅，但我相信 Jenkins 中没有内置的解决方案。

或者，似乎有[Jenkins 插件](http://wiki.hudson-ci.org/display/HUDSON/Clone+Workspace+SCM+Plugin)，但我没有使用它，也不能告诉任何关于它的信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T14:03:01.293

可能的技巧：

只有一个项目，但默认情况下将*DEPLOY*参数设置为*FALSE对其进行参数化。*该构建将包含您的主要构建以及*Invoke 顶级 Maven 目标*构建后步骤以进行部署。*仅当DEPLOY*为*TRUE*时才会调用部署步骤。为此，您使用[Conditional Build Step plugin](https://wiki.jenkins-ci.org/display/JENKINS/Conditional+BuildStep+Plugin)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-09T13:19:01.523

`deploy-only`7.5.Final 版本增加了一个新目标。[您可以使用Copy Artifact Plugin](https://wiki.jenkins-ci.org/display/JENKINS/Copy+Artifact+Plugin)从第一份工作中抢占先机。

参考：

*   [https://docs.jboss.org/jbossas/7/plugins/maven/latest/deploy-only-mojo.html](https://docs.jboss.org/jbossas/7/plugins/maven/latest/deploy-only-mojo.html)
*   [https://github.com/jbossas/jboss-as-maven-plugin/pull/56/commits](https://github.com/jbossas/jboss-as-maven-plugin/pull/56/commits)

# android - Android 中的 Splash 无法正常工作

> ID：10997510
> 
> 赞同：1
> 
> 时间：2012-06-12T13:17:17.117
> 
> 标签：android

我正在尝试在 android 中为我的应用程序创建启动画面，但它根本不会显示。我使用的代码是 4 个不同的文件。这里是：

飞溅.java

```
 package com.timchecklist;

import android.app.Activity;
import android.content.Intent;
import android.graphics.Color;
import android.os.Bundle;

public class Splash extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        Thread Timer = new Thread() {
            public void run() {

                try {
                    sleep(3000);
                    startActivity(new Intent("com.timchecklist.SPLASHNEW"));

                } catch (InterruptedException e) {
                    e.printStackTrace();
                } finally {
                    finish();
                }
            }
        };
        Timer.start();
    }

} 
```

SplashNew.java

```
 package com.timchecklist;

import android.app.Activity;
import android.os.Bundle;
import android.view.Window;

public class SplashNew extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        requestWindowFeature(Window.FEATURE_NO_TITLE);
        setContentView(R.layout.splash);

    }

} 
```

飞溅.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="center"
    android:background="@drawable/pic1"
    android:gravity="center"
    android:orientation="vertical" >

</LinearLayout> 
```

AndroidManifest.xml

```
 <?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.timchecklist"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="7" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
        <activity
            android:name=".TimCheckListActivity"
            android:label="@string/app_name"
            android:theme="@android:style/Theme.NoTitleBar" >
        </activity>
        <activity
            android:name=".SplashNew"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

请告诉我我在这里做错了什么。任何帮助，将不胜感激。多谢你们：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T13:20:00.970

我想`Splash should be launcher activity first`。以及您`SPLASHNEW`在 AndroidManifest 文件中声明的位置？

*   [请参阅启动画面示例](http://samir-mangroliya.blogspot.in/p/android-splash-screen-tutorial.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T15:14:30.493

有更好的方法来制作启动画面。像这样声明一个处理程序，它会在精确的时间后调用下一个要启动的活动：

```
private Handler splashHandler = new Handler() {

@Override
    public void handleMessage(Message msg) {
        switch (msg.what) {

            Intent intent = new Intent(Splash.this, OtherActivity.class);
            startActivity(intent);
            finish();

            break;
        }
        super.handleMessage(msg);
    }
}; 
```

然后在 onCreate 中像这样延迟一段时间后执行代码：

```
Message msg = new Message();
splashHandler.sendMessageDelayed(msg, SPLASHTIME); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T13:26:14.757

您应该在 Manifest 文件中添加 SplashNew。

试试下面的代码

```
 setContentView(R.layout.splash);

 new Thread(new Runnable() {

        public void run() {
                // TODO Auto-generated method stub      
                try {

                    Thread.sleep(2000);
                    startActivity(new Intent(getApplicationContext(),EquipmentCategory.class));
                    finish();

                } catch (InterruptedException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }

            }
        }).start(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-12T13:19:49.020

清单文件中没有SplashNew的条目......

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.timchecklist"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk android:minSdkVersion="7" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" >
    <activity
        android:name=".TimCheckListActivity"
        android:label="@string/app_name" >

    </activity>

     <activity
        android:name=".Splash"
        android:label="@string/app_name" >
        <intent-filter>
           <action android:name="android.intent.action.MAIN" />
           <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

</application>

</manifest> 
```

![在此处输入图像描述](../Images/59c231040706b24f285af154389769b6.png)

# php - 对我的数组中的值求和

> ID：10997514
> 
> 赞同：0
> 
> 时间：2012-06-12T13:17:21.797
> 
> 标签：php, arrays

我有一个像下面这样的数组，我想以一种特殊的方式计算值的总和，其中 val1_(.*) {正则表达式}的所有值，以及类似的其他值。我只有特定的 val，例如 val1、val2 和 val3。

我的数组是这样的：

```
$stats = Array
(
    [ADDED_NEW_2012_06_12] => 16
    [ADDED_OLD_2012_06_12] => 10
    [ADD_LATER_2012_06_12] => 12
    [ADDED_NEW_2012_06_11] => 16
    [ADDED_OLD_2012_06_11] => 10
    [ADD_LATER_2012_06_11] => 12
) 
```

你能告诉我如何获得我的结果。我不知道如何在 php 中使用正则表达式添加这些值。请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T13:24:44.050

如果您可以通过键的第一部分识别值，则不一定需要正则表达式。

遍历数组并创建一个新数组，每个数组都有一个元素`valX`：

```
$totals = array();

// iterate over the array
foreach($array as $key => $value) {
    $k = substr($key, 0, strpos($key, '_')); // get the first part (i.e. `valX`)
    if(!isset($totals[$k])) { // if $totals['valX'] does not exist, initialize
        $totals[$k] = 0;
    }
    $totals[$k] += $value; // sum
} 
```

**参考：** [`foreach`](http://php.net/manual/en/control-structures.foreach.php) , [`substr`](http://www.php.net/manual/en/function.substr.php), [`strpos`](http://www.php.net/manual/en/function.strpos.php),[`isset`](http://php.net/manual/en/function.isset.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T13:19:16.150

你是这个意思吗？

```
$array = array (
  'val1_2012_06_12' => 16,
  'val2_2012_06_12' => 10,
  'val3_2012_06_12' => 12,
  'val1_2012_06_11' => 16,
  'val2_2012_06_11' => 10,
  'val3_2012_06_11' => 12,
);

$sums = array();

foreach ($array as $key => $value) {
  $regex = '~(?P<prefix>val\d+)_\d{4}_\d{2}_\d{2}~';

  if (preg_match($regex, $key, $matches)) {
    $sums[$matches['prefix']] += $value;
  }
} 
```

它会产生类似这样的东西，它将按前缀对总和进行分组：

```
Array
(
    [val1] => 32
    [val2] => 20
    [val3] => 24
) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T13:28:04.130

如果您在数组中只有这种树类型的值，那么您可以使用它：

```
$stats = Array(
    'ADDED_NEW_2012_06_12' => 16,
    'ADDED_OLD_2012_06_12' => 10,
    'ADD_LATER_2012_06_12' => 12,
    'ADDED_NEW_2012_06_11' => 16,
    'ADDED_OLD_2012_06_11' => 10,
    'ADD_LATER_2012_06_11' => 12
);  

foreach($stats as $key => $value)
{
 $substring=substr($key, 0 , 9);
  if($substring=='ADDED_NEW')
    @$ADDED_NEW += $value;
  elseif($substring=='ADDED_OLD')
    @$ADDED_OLD += $value;
  else
    @$ADD_LATER += $value;
}
echo 'ADDED_NEW : ' . $ADDED_NEW .'<br>ADDED_OLD : ' . $ADDED_OLD .'<br>ADD_LATER : ' . $ADD_LATER ; 
```

输出 ：

```
ADDED_NEW : 32
ADDED_OLD : 20
ADD_LATER : 24 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-12T13:26:56.797

**编辑：更新为精致的问题**

您可以将密钥与代码相匹配，然后使用简单的 foreach 循环从那里创建一个总和。

```
$array = array(
    'ADDED_NEW_2012_06_12' => 16,
    'ADDED_OLD_2012_06_12' => 10,
    'ADD_LATER_2012_06_12' => 12,
    'ADDED_NEW_2012_06_11' => 16,
    'ADDED_OLD_2012_06_11' => 10,
    'ADD_LATER_2012_06_11' => 12,
);

$sumarray = array();
foreach ($array as $key => $value)
{
   $matches = array();
   preg_match("/^(\w+?_\w+?)_/i", $key, $matches);
   $key = $matches[1];
   if (!isset($sumarray[$key]))
   {
      $sumarray[$key] = $value;
   } else {
      $sumarray[$key] = $sumarray[$key] + $value;
   }
}

print_r($sumarray); 
```

* * *

## 回答 #5

> 赞同：-4
> 
> 时间：2012-06-12T13:19:45.177

$总和 = 0; Foreach($object as $key=>$value){ $sum += $value; }

# php - 如何隐藏实际的下载文件夹位置

> ID：10997516
> 
> 赞同：14
> 
> 时间：2012-06-12T13:17:29.457
> 
> 标签：php, .htaccess

我想隐藏下载文件夹的位置，以便用户下载文件时看不到该位置。我认为这可以使用 .htaccess 文件来完成，但我该怎么做呢？或者，如何用 PHP 来做到这一点？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-06-12T13:27:31.603

这就是我在 PHP 中的做法：

```
<?php
$fakeFileName= "fakeFileName.zip";
$realFileName = "realFileName.zip";

$file = "downloadFolder/".$realFileName;
$fp = fopen($file, 'rb');

header("Content-Type: application/octet-stream");
header("Content-Disposition: attachment; filename=$fakeFileName");
header("Content-Length: " . filesize($file));
fpassthru($fp);
?> 
```

此外，如果您不希望任何人访问文件位置，请将一个名为的文件`.htaccess`放入您的下载文件夹，其中仅包含以下内容：

```
deny from all 
```

我稍微更改了代码。首先，当我说假文件名和真实文件名时，假文件名是下载器下载文件的名称，其中真实文件名是您服务器上下载文件夹中实际文件的名称。

另外，我检查以确保用户已登录并且能够下载文件。如果他选择下载文件，则会在新选项卡中调用 PHP 文件（使用上面的下载代码），然后在文件末尾我有以下行：

```
exit; 
```

所以当他点击下载链接的时候，一个空白页面很快在一个新标签中弹出，然后快速退出，开始下载。

**编辑：**下载链接如下所示：

```
<a href="simpleDown.php?id=<?php echo $_GET['id']; ?>" target="_blank">Download!</a> 
```

`id`数据库中的下载文件在哪里`id`，在上面的下载脚本中我找到了那个条目`id`，然后得到它的真实文件名和假文件名。不过，您可以在没有数据库的情况下执行此操作。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-12T13:19:31.763

也许您想查看 Mod Rewrite，或者使用您的 PHP 脚本来访问文件，只需转到`file.php?f=someHash`然后使用八位字节流强制用户下载文件。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-12T13:22:19.953

您要做的是将用户定向到`fake_url.php`然后将该 URL 重写为不同的文件 - `real_url.php`. 这有效地将其呈现为隐藏，因为用户不知道您的文件`real_url.php`中发生的重定向。`.htaccess`

```
RewriteRule fake_url.php(.*)$ real_url.php?$1 [L,QSA] 
```

在您的`real_url.php`中，您可以读取通过重定向传递的参数，然后使用类似的东西`readFile()`从内部将适当的文件发送回用户`real_url.php`

所以用户只会看到 URL -
`https://my-secret-site/download.php?file=file_to_download`

通过检查参数，您`real_url.php`将知道请求了什么文件。`$_GET['file']`

用户正在下载的文件的实际位置不再重要。尽管所有下载都进行了，但`fake_url.php`只有该脚本需要知道下载文件夹的真实位置。

# cordova - （背景）推送通知，并建立在 phonegap 为 android/iphone 构建

> ID：10997517
> 
> 赞同：1
> 
> 时间：2012-06-12T13:17:34.247
> 
> 标签：cordova

是否有用于 phonegap (android/iphone) 的推送通知插件/方法，其中：

1.  该应用程序仍然可以使用 phonegap 构建来构建。
2.  即使应用程序未运行（在前台），也可以接收推送通知

我正在努力不去管理单独的 Android (Java) 和 iPhone (Xcode) 项目。

如果不是，那么为 android 和 iphone 实现此功能的最简单方法是什么？Urban Airship 看起来非常接近这样做（虽然不确定是否可以通过 phonegap 构建）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T15:58:36.493

目前，您在此处描述的内容还不适用于 phonegap 构建。为此，您需要使用 cordova (=phonegap) 插件，目前 phonegap 构建仅支持一个插件（请参阅[支持的插件](https://build.phonegap.com/docs/plugins)）。

如果您想要快速获得某些东西，则必须使用自己的自定义构建。看看[这个插件库](https://github.com/phonegap/phonegap-plugins)。您将看到两个 Push 插件：PushNotification 和 UAPushNotification，它们似乎都在使用 Urban Airship 集成。

要回答您的第二个问题，看起来推送通知仅在您的应用程序启动时可见，而不是在它停止时可见。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T18:57:28.430

我还在考虑在这条路上为 Android 和 iOS（可能还有 WP）实施解决方案。

到目前为止仅使用 Android 进行测试，似乎[Pushwoosh](http://www.pushwoosh.com/)似乎可以做我们正在寻找的事情。

我还没有在 iPhone 上测试过，但是在 Android 上，应用程序在后台，手机会收到推送通知，在手机的状态栏中给出通知。点击此通知会打开应用程序，此时您可以从通知中访问数据。

我遇到的一个限制是，在收到来自 PhoneGap 应用程序的通知后，无法访问推送通知数据。只有当通知被点击时（这意味着清除通知甚至接收同一应用程序的第二个通知意味着您永远丢失该数据）。从理论上讲，这应该是可能的，但其代码可能隐藏在 Pushwoosh.jar 文件中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-13T16:09:53.633

现在可以通过与 PhoneGap 构建兼容的插件接收和访问推送通知。

[https://github.com/phonegap-build/PushPlugin](https://github.com/phonegap-build/PushPlugin)

# java - 休眠！实体

> ID：10997522
> 
> 赞同：2
> 
> 时间：2012-06-12T13:17:45.490
> 
> 标签：java, hibernate

[此页面](http://docs.jboss.org/hibernate/orm/4.1/manual/en-US/html_single/#inheritance-tableperconcreate-polymorphism)建议！ENTITY：

> 如果要避免重复，请考虑使用 XML 实体（例如，DOCTYPE 声明中的 [ ] 和映射中的 %allproperties; ）。

问题是我在网络上的任何地方都找不到完整的工作示例。

到目前为止我得到的是：

```
<!DOCTYPE hibernate-mapping PUBLIC
        "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
        "http://www.hibernate.org/dtd/hibernate-mapping-3.0.dtd"
        [ <!ENTITY allproperties SYSTEM "allproperties.xml"> ]
        > 
```

..但是其余的呢？
1\. 我如何准确地定义`allproperties.xml`文件中的属性？
2.我如何/在哪里包含`%allproperties;`关键字（在我的`<class>`和中`<union-class>`）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T00:50:03.423

这是一个基本的 XML 构造，称为实体包含。您名为“allproperties.xml”的文件将包含实体的属性映射片段。例如：

```
<property name="name".../>
<property name="someOtherProperty".../>
<!-- rest of shared property definitions --> 
```

然后在映射文件中你会说：

```
<!DOCTYPE hibernate-mapping PUBLIC
    "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
    "http://www.hibernate.org/dtd/hibernate-mapping-3.0.dtd" [ 
    <!ENTITY allproperties SYSTEM "allproperties.xml"> ]>

<hibernate-mapping>
    <class name="Class1" ...>
        <id .../>
        &allproperties;
    </class>
    <class name="Class2" ...>
        <id .../>
        &allproperties;
    </class>
</hibernate-mapping> 
```

我`<id/>`在这里定义了每个类中的映射，但是如果信息都相同，您也可以将其移动到包含文件中。任何作为子级有效的内容`<class/>`都可以在包含文件中使用。

JAXP 期望 SYSTEM 引用是相对或绝对文件引用。所以上面意味着 allproperties.xml 文件将相对于包含文件的系统标识符进行解析。通常这可能效果不佳。为此，Hibernate 还理解以 classpath:// 为前缀的特殊类型的 SYSTEM 引用。正如您所料，这会触发对引用资源的类路径资源查找。

```
<!DOCTYPE hibernate-mapping PUBLIC
        "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
        "http://www.hibernate.org/dtd/hibernate-mapping-3.0.dtd" [ 
    <!ENTITY allproperties SYSTEM "classpath://com/acme/allproperties.xml"> ]> 
```

现在，allproperties.xml 将通过使用 com/acme/allproperties.xml 资源名称的类路径查找来解析。

# c# - C# 数据类型到 SQL Server 数据类型

> ID：10997526
> 
> 赞同：4
> 
> 时间：2012-06-12T13:18:03.653
> 
> 标签：c#, .net, sql-server

如何将 C# 数据类型“转换”为 SQL Server 数据类型（`SqlDbType`已知）

IE：

```
C# -> "String"
SQL Server -> N'String' 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-02-27T15:48:01.143

试试这个：它是一个扩展类，所以在你想要使用这些方法的文件上添加：

```
using Utility; 
```

这是代码：

```
using System;
using System.Data;
using Microsoft.SqlServer.Server;

namespace Utility
{
    public static class TypeExtension
    {
        public static SqlDbType ToSqlDbType(this Type clrType)
        {
            var s = new SqlMetaData("", SqlDbType.NVarChar, clrType);
            return s.SqlDbType;
        }

        public static Type ToClrType(SqlDbType sqlType)
        {
            switch (sqlType)
            {
                case SqlDbType.BigInt:
                    return typeof (long?);

                case SqlDbType.Binary:
                case SqlDbType.Image:
                case SqlDbType.Timestamp:
                case SqlDbType.VarBinary:
                    return typeof (byte[]);

                case SqlDbType.Bit:
                    return typeof (bool?);

                case SqlDbType.Char:
                case SqlDbType.NChar:
                case SqlDbType.NText:
                case SqlDbType.NVarChar:
                case SqlDbType.Text:
                case SqlDbType.VarChar:
                case SqlDbType.Xml:
                    return typeof (string);

                case SqlDbType.DateTime:
                case SqlDbType.SmallDateTime:
                case SqlDbType.Date:
                case SqlDbType.Time:
                case SqlDbType.DateTime2:
                    return typeof (DateTime?);

                case SqlDbType.Decimal:
                case SqlDbType.Money:
                case SqlDbType.SmallMoney:
                    return typeof (decimal?);

                case SqlDbType.Float:
                    return typeof (double?);

                case SqlDbType.Int:
                    return typeof (int?);

                case SqlDbType.Real:
                    return typeof (float?);

                case SqlDbType.UniqueIdentifier:
                    return typeof (Guid?);

                case SqlDbType.SmallInt:
                    return typeof (short?);

                case SqlDbType.TinyInt:
                    return typeof (byte?);

                case SqlDbType.Variant:
                case SqlDbType.Udt:
                    return typeof (object);

                case SqlDbType.Structured:
                    return typeof (DataTable);

                case SqlDbType.DateTimeOffset:
                    return typeof (DateTimeOffset?);

                default:
                    throw new ArgumentOutOfRangeException("sqlType");
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-12T13:35:35.883

首先，您可以从 MSDN 获取映射列表。他们可以在[这里](http://msdn.microsoft.com/en-us/library/cc716729.aspx)找到。

然后，只需创建一个哈希表（HashTable）来查找一种类型并将其转换为相关的SqlDbType。像这样的东西：

```
private static types = new HashTable<Type, SqlDbType>();
public static SqlDbType GetSqlDbType(Type type)
{
    if (types == null)
    {
        var types = new HashTable<Type, SqlDbType>();
        types.Add(int.GetType(), SqlDbType.Int);
        // And so forth...
    }

    return types[type];

} 
```

或大意的话。自然地，为了 StyleCop 的合规性和可维护性进行重构。（我在没有 IDE 的情况下，只喝了一杯咖啡就在脑海中写下了这个。）

**编辑**

请注意，在处理 .NET 字符串的解析时，这可能会变得模糊。它是 varchar、nvarchar、文本还是备忘录？在这些情况下，此方法无法获知，您可能必须在根据表和列名称（或过程和参数名称）调用该方法后做出更明智的决定。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T13:25:08.967

我不知道如何进行这样的转换，但可能有更好的方法：

我假设您想使用 C# 在 SQL 查询中插入一个值。

为什么不使用参数？

代替：

```
SqlCommand command = 
    new SqlCommand(String.Format(
       "SELECT * FROM MyTable WHERE mycolumn = {0}", 
       ConvertValueToSql(whateverobject))); 
// ConvertValueToSql is what you are asking basically 
```

尝试这样做：

```
// Conversion list of used types
Dictionary<Type, SqlDbType> typeConversion = new Dictionary<Type, SqlDbType>();
typeConversion.Add(typeof(String), SqlDbType.NVarChar);
typeConversion.Add(typeof(Int32), SqlDbType.Integer);
// you can even do this if you want
typeConversion.Add(typeof(MyCustomImageClass), SqlDbType.VarBinary);
typeConversion.Add(typeof(MyOtherNiceClass), SqlDbType.NVarChar);

// In the method
SqlCommand command = new SqlCommand("SELECT * FROM MyTable WHERE mycolumn = @Value");
command.Parameters.Add(new SqlParameter("@Value", typeConversion[whateverobject.GetType()]) { Value = whateverobject } ); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-03-08T17:37:33.350

这是一个古老但仍然有效的问题，所以这里有一种不同的方式。有人已经做了这个编码。如果您执行类似于此的查询...

```
select

    @@serverName  as [Varchar],
    GetDate()     as [DateTime],
    3.14159       as [Decimal],
    256           as [Int],
    :
    :
    -- And So On 
```

...您的数据库驱动程序将为您进行数据类型映射。您只需检索数据并访问生成的列定义。列名将是 DBMS 数据类型（名称），列数据类型将是您正在使用的任何语言的数据类型。您的查询可能仅限于您关心的特定 DBMS 数据类型。请注意，这不限于任何特定的数据库管理系统。需要注意的是，这并没有告诉您哪些数据类型需要长度参数。

# css - 使用 CSS3“背景尺寸”会加速页面渲染吗？

> ID：10997532
> 
> 赞同：0
> 
> 时间：2012-06-12T13:18:19.067
> 
> 标签：css, rendering

我想防止在 CSS3 中不必要地使用“背景尺寸”。
顺便说一句，我没有调整大小。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T13:22:18.143

不，`background-size`不会加快页面渲染，但是当您想要一个小图像覆盖整个页面时它会很有帮助`background`，它可以节省大图像的空间。

# jsf-2 - JSF 2 在 WebSphere 7 上不起作用 - 重定向到 JSP

> ID：10997534
> 
> 赞同：1
> 
> 时间：2012-06-12T13:18:27.943
> 
> 标签：jsf-2, classloader, websphere-7

我有一个使用 JSF 2 在 JBoss 上运行良好的应用程序。我看到了与 JSF 2、WebSphere 和类加载器相关的问题。此时，我看到消息“Initializing Mojarra 2.1.7 for the context '/medicao-web'”。然后，我认为类加载器正在加载正确的 JSF 类。

我有一个用于重定向到 index.jsf 的 index.jsp。当我尝试请求 index.jsf 时，它会产生无限循环和很多异常。在堆栈跟踪中，有一个“at javax.faces.webapp.FacesServlet.service(FacesServlet.java:266)”，然后我认为它有时会使用 FacesServlet。但我还在日志中看到与 JSF 相关的问题是它正在尝试读取 JSP。

我还尝试请求一个不同的页面，即没有同名的 JSP。请求 arquivo.jsf 后，我得到：

```
java.io.FileNotFoundException: JSPG0036E: Failed to find resource /arquivo.jsp
    at com.ibm.ws.jsp.webcontainerext.AbstractJSPExtensionProcessor.findWrapper(AbstractJSPExtensionProcessor.java:360)
    at com.ibm.ws.jsp.webcontainerext.AbstractJSPExtensionProcessor.handleRequest(AbstractJSPExtensionProcessor.java:331)
    at com.ibm.ws.webcontainer.webapp.WebAppRequestDispatcher.forward(WebAppRequestDispatcher.java:325)
    at com.sun.faces.context.ExternalContextImpl.dispatch(ExternalContextImpl.java:415)
    at com.sun.faces.application.ViewHandlerImpl.executePageToBuildView(ViewHandlerImpl.java:491)
    at com.sun.faces.application.ViewHandlerImpl.renderView(ViewHandlerImpl.java:159)
    at com.sun.faces.lifecycle.RenderResponsePhase.execute(RenderResponsePhase.java:110)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:100)
    at com.sun.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:139)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:266)
    at com.ibm.ws.webcontainer.servlet.ServletWrapper.service(ServletWrapper.java:1443)
    at com.ibm.ws.webcontainer.servlet.ServletWrapper.service(ServletWrapper.java:1384)
    at com.ibm.ws.webcontainer.filter.WebAppFilterChain.doFilter(WebAppFilterChain.java:131)
    at org.primefaces.webapp.filter.FileUploadFilter.doFilter(FileUploadFilter.java:79)
    at com.ibm.ws.webcontainer.filter.FilterInstanceWrapper.doFilter(FilterInstanceWrapper.java:188)
    at com.ibm.ws.webcontainer.filter.WebAppFilterChain.doFilter(WebAppFilterChain.java:116)
    at com.ibm.ws.webcontainer.filter.WebAppFilterChain._doFilter(WebAppFilterChain.java:77)
    at com.ibm.ws.webcontainer.filter.WebAppFilterManager.doFilter(WebAppFilterManager.java:852)
    at com.ibm.ws.webcontainer.servlet.ServletWrapper.handleRequest(ServletWrapper.java:785)
    at com.ibm.ws.webcontainer.servlet.ServletWrapper.handleRequest(ServletWrapper.java:443)
    at com.ibm.ws.webcontainer.servlet.ServletWrapperImpl.handleRequest(ServletWrapperImpl.java:175)
    at com.ibm.ws.webcontainer.webapp.WebApp.handleRequest(WebApp.java:3610)
    at com.ibm.ws.webcontainer.webapp.WebGroup.handleRequest(WebGroup.java:274)
    at com.ibm.ws.webcontainer.WebContainer.handleRequest(WebContainer.java:926)
    at com.ibm.ws.webcontainer.WSWebContainer.handleRequest(WSWebContainer.java:1557)
    at com.ibm.ws.webcontainer.channel.WCChannelLink.ready(WCChannelLink.java:173)
    at com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.handleDiscrimination(HttpInboundLink.java:455)
    at com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.handleNewInformation(HttpInboundLink.java:384)
    at com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.ready(HttpInboundLink.java:272)
    at com.ibm.ws.tcp.channel.impl.NewConnectionInitialReadCallback.sendToDiscriminators(NewConnectionInitialReadCallback.java:214)
    at com.ibm.ws.tcp.channel.impl.NewConnectionInitialReadCallback.complete(NewConnectionInitialReadCallback.java:113)
    at com.ibm.ws.tcp.channel.impl.AioReadCompletionListener.futureCompleted(AioReadCompletionListener.java:165)
    at com.ibm.io.async.AbstractAsyncFuture.invokeCallback(AbstractAsyncFuture.java:217)
    at com.ibm.io.async.AsyncChannelFuture.fireCompletionActions(AsyncChannelFuture.java:161)
    at com.ibm.io.async.AsyncFuture.completed(AsyncFuture.java:138)
    at com.ibm.io.async.ResultHandler.complete(ResultHandler.java:202)
    at com.ibm.io.async.ResultHandler.runEventProcessingLoop(ResultHandler.java:766)
    at com.ibm.io.async.ResultHandler$2.run(ResultHandler.java:896)
    at com.ibm.ws.util.ThreadPool$Worker.run(ThreadPool.java:1527) 
```

这是我的 web.xml：

```
<?xml version="1.0"?>
<web-app version="2.5" xmlns="http://java.sun.com/xml/ns/javaee"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd">
    <display-name>MedicaoCNI</display-name>
    <servlet>
        <servlet-name>Faces Servlet</servlet-name>
        <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>
    <servlet-mapping>
        <servlet-name>Faces Servlet</servlet-name>
        <url-pattern>*.jsf</url-pattern>
    </servlet-mapping>
    <context-param>
        <param-name>facelets.DEVELOPMENT</param-name>
        <param-value>true</param-value>
    </context-param>

    <context-param>
        <param-name>primefaces.THEME</param-name>
        <param-value>medicao</param-value>
    </context-param>

    <filter>
        <filter-name>PrimeFaces FileUpload Filter</filter-name>
        <filter-class>org.primefaces.webapp.filter.FileUploadFilter</filter-class>
    </filter>
    <filter-mapping>
        <filter-name>PrimeFaces FileUpload Filter</filter-name>
        <servlet-name>Faces Servlet</servlet-name>
    </filter-mapping>
</web-app> 
```

这是我的 faces-config.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<faces-config version="2.0" xmlns="http://java.sun.com/xml/ns/javaee"
    xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-facesconfig_2_0.xsd">
    <!-- <lifecycle>
        <phase-listener>org.cni.medicao.util.AuthenticationListener</phase-listener>
    </lifecycle> -->
    <navigation-rule>
        <from-view-id>/*</from-view-id>
        <navigation-case>
            <from-outcome>loginSucesso</from-outcome>
            <to-view-id>/usuario.jsf</to-view-id>
        </navigation-case>
        <navigation-case>
            <from-outcome>loginFail</from-outcome>
            <to-view-id>/index.jsf</to-view-id>
            <redirect />
        </navigation-case>
        <navigation-case>
            <from-outcome>logoutSucesso</from-outcome>
            <to-view-id>/index.jsf</to-view-id>
            <redirect />
        </navigation-case>
    </navigation-rule>

</faces-config> 
```

我所有的页面都是 XHTML 格式。我还在我的项目中添加了一个 facelets 依赖项。我正在使用Maven。

我做了一些配置来尝试让类加载器加载 PARENT_LAST。我不知道它是否正确，但是虽然日志说它正在加载 Mojarra 2.1.7，但我认为没关系。

我找到了一篇与我相关的帖子，但没有解决：[JSF 2 Mojarra and Primefaces in WebSphere 7+](https://stackoverflow.com/questions/6867382/jsf-2-mojarra-and-primefaces-in-websphere-7)

提前致谢。

更新：

我尝试将 javax.faces.DEFAULT_SUFFIX 上下文参数添加到 .xhtml。结果是，当我尝试打开 arquivo.jsf 时，我看到了 XHTML 的源代码。虽然日志说它正在初始化 Mojarra 2.1.7，但我觉得这里有一些冲突。

这是我耳朵的maven模块的耳朵插件配置：

```
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-ear-plugin</artifactId>
    <version>2.6</version>
    <configuration>
        <version>5</version>
        <defaultLibBundleDir>lib</defaultLibBundleDir>
        <earSourceDirectory>${basedir}\src\main\application\META-INF\ibmconfig</earSourceDirectory>
    </configuration>
</plugin> 
```

在\src\main\application\META-INF\ibmconfig，有deployment.xml：

```
<appdeployment:Deployment xmi:version="2.0" xmlns:xmi="http://www.omg.org/XMI" xmlns:appdeployment="http://www.ibm.com/websphere/appserver/schemas/5.0/appdeployment.xmi" xmi:id="Deployment_1241112964096">
  <deployedObject xmi:type="appdeployment:ApplicationDeployment" xmi:id="ApplicationDeployment_1241112964096" startingWeight="1" warClassLoaderPolicy="SINGLE">
    <classloader xmi:id="Classloader_1241112964096" mode="PARENT_LAST"/>
    <modules xmi:type="appdeployment:WebModuleDeployment" xmi:id="WebModuleDeployment_1241112964096" startingWeight="10000" uri="medicao-web.war">
      <classloader xmi:id="Classloader_1241112964097" mode="PARENT_LAST"/>
    </modules>
  </deployedObject>
</appdeployment:Deployment> 
```

在我的 web 的 maven 模块中，我有这个依赖项：

```
<dependency>
    <groupId>com.sun.faces</groupId>
    <artifactId>jsf-api</artifactId>
    <version>2.1.7</version>
</dependency>
<dependency>
    <groupId>com.sun.faces</groupId>
    <artifactId>jsf-impl</artifactId>
    <version>2.1.7</version>
</dependency>
<dependency>
    <groupId>com.sun.facelets</groupId>
    <artifactId>jsf-facelets</artifactId>
    <version>1.1.14</version>
</dependency>
<dependency>
    <groupId>jstl</groupId>
    <artifactId>jstl</artifactId>
    <version>1.2</version>
</dependency>
<dependency>
    <groupId>org.primefaces</groupId>
    <artifactId>primefaces</artifactId>
    <version>3.2</version>
    <scope>compile</scope>
</dependency> 
```

有什么不对？我是 WebSphere 新手，我需要将它与 JSF 2 一起使用。

更新：

我删除了 jsf-facelets 依赖项，但它还没有工作。我导出了一个 EAR 以查看 deployment.xml 是否存在，但它没有被打包在 EAR 中。有什么不对？

更新：

现在，我正在关注本教程：[http ://www.webspheretools.com/sites/webspheretools.nsf/docs/How%20to%20set%20the%20class%20loading%20policy%20to%20parent%20last%20using%20configuration %20 个文件%20 已发货%20%20 内%20EAR](http://www.webspheretools.com/sites/webspheretools.nsf/docs/How%20to%20set%20the%20class%20loading%20policy%20to%20parent%20last%20using%20configuration%20files%20shipped%20within%20the%20EAR)

我的deployment.xml在\META-INF\ibmconfig\cells\defaultCell\applications\defaultApp\deployments\defaultApp下，我的ear插件的配置是：

```
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-ear-plugin</artifactId>
    <version>2.6</version>
    <configuration>
        <version>5</version>
        <defaultLibBundleDir>lib</defaultLibBundleDir>
    </configuration>
</plugin> 
```

这样，当我导出 EAR 时，deployment.xml 就会被打包。我的 deployment.xml 与教程中显示的相同。

无论如何，当我在 WebSphere 上部署我的应用程序时，它会生成一个新的 deployment.xml，而忽略我的。然后，它仍然首先加载父级。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T13:42:49.700

好吧，我的所有配置都很好。我尝试使用 WebSphere 的控制台安装 EAR，它读取了我的 deployment.xml。我认为 IBM 开发的 WebSphere 7 插件有问题。它没有正确安装应用程序，然后忽略了deployment.xml。

现在我的问题与IDE有关，因为每次更改时手动安装应用程序都很糟糕，但这个问题与它无关。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T13:55:25.660

我认为 websphere 7 不支持没有桥接器的 JSF 2。

# php - 如何向 phil sturgeon's - codeigniter-restserver 发送 DELETE 请求

> ID：10997536
> 
> 赞同：12
> 
> 时间：2012-06-12T13:18:29.723
> 
> 标签：php, codeigniter, rest

正如标题所说，我正在使用 Codeigniter 和 phil sturgeon - codeigniter-restserver 框架。

我已经按照[Nettus](http://net.tutsplus.com/tutorials/php/working-with-restful-services-in-codeigniter-2/comment-page-3/#comments)上的教程进行操作，除了发送 DELETE 请求外，一切正常。

代码：

```
<?php
require(APPPATH.'libraries/REST_Controller.php');

class Client extends REST_Controller{

function user_get()
{
    $data = array('returned:'=> $this->get('id'));
    $this->response($data);
}

function user_post()
{
    $data = array('returned:'=> $this->post('id'));
    $this->response($data);
}

function user_put()
{
    $data = array('returned:'=> $this->put('id'));
    $this->response($data);
}

function user_delete()
{
    $data = array('returned from delete:'=> $this->delete('id'));
    $this->response($data);
}
} 
```

我正在使用一个名为 HTTP Resource test 的 FF 插件来发送请求，但是当我使用此 URL 发送 DELETE 请求时`http://localhost/api/client/user/id/1`，我得到 {"returned from delete:":false}

**作为旁注**：我找到了这篇[文章](https://stackoverflow.com/questions/1402229/web-server-that-does-not-allow-put-and-delete)并使用“X-HTTP-Method-Override”标头并将其作为发布请求发送，我能够获取 id，但我更喜欢客户端不必添加的方式这个标题。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-12T13:25:18.777

根据 HTTP 规范 DELETE 不能发送参数。它可以在 URL 中包含内容，因此您可以将其更改为：

```
public function user_delete($id)
{
    $this->response(array(
        'returned from delete:' => $id,
    ));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-24T22:07:37.480

我有同样的问题，这项工作对我来说

**1 -> 在 REST_Controller.php**中将默认的 _parse_delete() 函数替换为：

```
protected function _parse_delete()
{
    $this->_delete_args = $_DELETE;
    $this->request->format and $this->request->body = file_get_contents('php://input');
    // Set up out DELETE variables (which shouldn't really exist, but sssh!)
    parse_str(file_get_contents('php://input'), $this->_delete_args);
} 
```

就这样！不再需要“ *user_delete( **$id** )* ”

# ruby-on-rails - 包括来自gem的mixin，不起作用？

> ID：10997537
> 
> 赞同：0
> 
> 时间：2012-06-12T13:18:29.833
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, rubygems

尝试从 gem 文件中包含要通过控制台使用的 mixin 时遇到问题。

```
require "fertilizer/version"

module Fertilizer
  # <-- CONSOLE EXTENSION (CONSOLE ONLY)-->
  # Following part of code is active with the start of IRB console. 
  # Details about features can be seen in console_extensions module.

  if defined?(Rails::Console)
    require 'fertilizer/console_extensions'
    include ConsoleExtensions
  end

  # <-- OBJECT EXTENSIONS (CONSOLE ONLY)-->
  if defined?(Rails::Console)
    require 'fertilizer/object_extensions'
  end
end 
```

Gem 有ruby 文件**foil.rb**，它执行上面的代码，当我启动控制台时，我可以看到代码被触发。但是当我尝试使用 mixin 中的方法时，控制台找不到它们。

如果我采用完全相同的代码并将其放入*初始化程序*中， mixin 会被加载（如前所述），但这次我可以在控制台中使用 mixin 中的方法。

如何修复我的 gem 文件，以便在加载 gem 时，可以通过控制台使用 mixin 方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T13:57:06.213

更多讨论可以在这里找到：

[如何在路径中自动包含 Gem？](https://stackoverflow.com/questions/11011030/how-to-automatically-include-gem-in-the-path/)

解决方案是：

```
Object.send(:include, self) 
```

对解决方案不满意，但它有效。

# zooming - 我希望地图仅显示荷兰

> ID：10997544
> 
> 赞同：3
> 
> 时间：2012-06-12T13:18:45.867
> 
> 标签：zooming, openlayers, country, pan

这是我加载地图的初始化函数，我希望它只显示荷兰，放大应该是可能的，但缩小不应该。我到处搜索，但找不到有关如何执行此操作的正确解释。

```
var config = {
zoom: 14,
zoomStart: 8,
centerPoint: new OpenLayers.LonLat(622044.536098, 6797086.3022847),
strokeColor: "#941B80",
strokeColor_allloc: "#575757",
strokeOpacity: 0.8,
strokeOpacity_allloc: 0.9,
strokeWeight: 2,
trackWeight: 5,
fillColor: "#941B80",
fillColor_allloc: "#575757",
fillOpacity: 0.25,
fillOpacity_allloc: 0.40,
pointRadius: 5,
fontColor: "black",
fontSize: 10,
fontFamily: "Arial",
scaleFactor: 1000000,
extent: new OpenLayers.Bounds(-5037508, -5037508, 5037508, 5037508.34),
units: 'm',
resolution: 156543.0339,
displayProjection: new OpenLayers.Projection("EPSG:4326"),
projection: new OpenLayers.Projection("EPSG:900913"),
controls: [
new OpenLayers.Control.Navigation(), new OpenLayers.Control.PanZoomBar(), new OpenLayers.Control.Attribution()],
copyright: 'Map data &copy; 2010 <a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a><br /><a href="http://openstreetmap.org">OpenStreetMap.org</a> contributors',
numZoomLevels: 10,
numberPlateTail: new OpenLayers.Size(117.333, 42),
numberPlate: new OpenLayers.Size(117.333, 25),
iconSize: new OpenLayers.Size(32, 37)
};

var myLayers = {
base: new OpenLayers.Layer.OSM('', '', {
    attribution: config.copyright,
    transitionEffect: 'resize',
    layers: 'basic'
}, {
    isBaseLayer: true
}),
vector: new OpenLayers.Layer.Vector('Vormen aan/uit', {
    styleMap: my_style,
    renderers: ['Canvas', 'SVG', 'VML']
}),
allloc_vector: new OpenLayers.Layer.Vector('Vormen aan/uit', {
    styleMap: my_style,
    renderers: ['Canvas', 'SVG', 'VML']
}),
markers: new OpenLayers.Layer.Markers('Markers')
};
init: function (canvas) {
    this.canvas = canvas;
    $('#' + canvas).append('<input type="button" class="button" value="Volledig scherm" onclick="tbMap.toggleFs();" />');
    this.map = new OpenLayers.Map(this.canvas, {
        controls: config.controls,
        displayProjection: config.displayProjection,
        Projection: config.projection,
        maxExtent: config.extent,
        maxResolution: config.resolution,
        units: config.units,
        numZoomLevels: config.numZoomLevels,
        theme: null
    });
    tbMap.zoom();
    this.map.addLayers([myLayers.base, myLayers.vector]);
    this.map.setCenter(config.centerPoint, config.zoomStart);
},
zoom: function () {
    OpenLayers.Control.Navigation.prototype.counter = 0;
    //Inzoomgevoeligheid
    OpenLayers.Control.Navigation.prototype.wheelUp = function (evt) {
        this.counter++;
        if (this.counter > 2) {
            this.counter = 0;
            this.wheelChange(evt, 1);
        }
    };
    //Uitzoomgevoeligheid
    OpenLayers.Control.Navigation.prototype.wheelDown = function (evt) {
        this.counter--;
        if (this.counter < -2) {
            this.counter = 0;
            this.wheelChange(evt, -1);
        }
    };
}, 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T13:30:09.700

您可以设置配置属性[maxExtent](http://dev.openlayers.org/apidocs/files/OpenLayers/Map-js.html#OpenLayers.Map.maxExtent)。在您的配置中使用您现有的界限，它看起来像这样，

```
maxExtent : new OpenLayers.Bounds(-5037508, -5037508, 5037508, 5037508.34) 
```

您可以在初始化时将其添加到地图配置中。

您可能还想查看[restrictedExtent](http://dev.openlayers.org/apidocs/files/OpenLayers/Map-js.html#OpenLayers.Map.restrictedExtent)

希望这可以帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T14:13:01.103

也许可以帮助你：

```
/**
 * 
 * @type {int}
 * @constant
 */
var MAX_ZOOM_LEVEL = 6;

/**
 * The OpenLayers object that sets the map extent to the Europe scale
 * @type {OpenLayers.Bounds}
 * @var
 */
var europeGoogleExtent = new OpenLayers.Bounds(-4931105.5677773, 2641663.6973633, 8570731.1060977, 12425603.316113);

Zoom in?

//triggered after a zoom completes
mp.events.register('zoomend', this, checkZoom);

function checkZoom() {
    var zoom = mp.getZoom();

    if(MAX_ZOOM_LEVEL >= zoom ) {
        J('#dialog').html('You reached the maximum zoom level. <strong>The spatial accuracy is of the order of X km.</strong>');
        J('#dialog').attr('title', 'Warning message');
        J('#dialog').dialog({
            height: 140,
            modal: true
        });
    } else {
        return true;
    }   
}

//Loading the initial extent
if (!mp.getCenter()) {
    if (document.getElementById('userMapExtent').value != '') {
        var sExtent = document.getElementById('userMapExtent').value.split(',');
        mp.zoomToExtent(new OpenLayers.Bounds(sExtent[0], sExtent[1], sExtent[2], sExtent[3]), true);
    } else {
        mp.zoomToExtent(europeGoogleExtent);
    }
} 
```

# nhibernate - 详细实体字段上的休眠查询投影

> ID：10997547
> 
> 赞同：0
> 
> 时间：2012-06-12T13:18:47.163
> 
> 标签：nhibernate, projection, queryover

我想要做的是能够使用带有查询的投影。我仅使用 AliasToBean Transformer 在第一级使用投影成功地做到了这一点，但是当我对来自细节类 nhibenate 的属性进行投影时，会引发以下异常：

```
 Could not find a setter for property 'FirstContact' in class 'Model.Personnel.Entities.Employee'
 at NHibernate.Properties.ChainedPropertyAccessor.GetSetter(Type theClass, String propertyName)
 at NHibernate.Transform.AliasToBeanResultTransformer.TransformTuple(Object[] tuple, String[] aliases)
 at NHibernate.Loader.Criteria.CriteriaLoader.GetResultList(IList results, IResultTransformer customResultTransformer)
 at NHibernate.Loader.Loader.ListIgnoreQueryCache(ISessionImplementor session, QueryParameters queryParameters)
 at NHibernate.Loader.Loader.List(ISessionImplementor session, QueryParameters queryParameters, ISet`1 querySpaces, IType[] resultTypes)
 at NHibernate.Loader.Criteria.CriteriaLoader.List(ISessionImplementor session)
 at NHibernate.Impl.SessionImpl.List(CriteriaImpl criteria, IList results)
 at NHibernate.Impl.CriteriaImpl.List(IList results)
 at NHibernate.Impl.CriteriaImpl.List[T]()
 at NHibernate.Criterion.QueryOver`1.List[U]()
 at NHibernate.Criterion.QueryOver`1.NHibernate.IQueryOver<TRoot>.List[U]()
 at Tests.Entities.EmployeeFacts.QueryEmployees() 
```

这是我当前的代码：

```
Employee anEmployee = null;
Contact aContact = null;

session.QueryOver(() => anEmployee).Left
                .JoinAlias(() => anEmployee.Contact, () => aContact)
                .OrderBy(() => aGender.Name).Asc
                .ThenBy(() => aContact.FirstContact).Asc
                .SelectList(builder => builder.Select(() => aContact.FirstContact)
                                              .WithAlias(() => aContact.FirstContact)
                                              .Select(() => anEmployee.FirstName)
                                              .WithAlias(() => anEmployee.FirstName))
                .TransformUsing(Transformers.AliasToBean(typeof(Employee)))
                .List<Employee>(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T15:59:32.763

对于您的选择列表，所有`WithAlias`方法都应使用相同的 dto，并且也应与转换器中使用的类相同。另外，我不知道您为什么要投影到映射实体中？投影用于平面 dto。

您看到的错误是由于无效的`.WithAlias(() => aContact.FirstContact)`...NH 转换器现在需要 Employee 类中的 FirstContact 属性。解决方案是制作一个包含 FirstContact 和 FirstName 属性的 dto，并将其用于 WithAlias 和 AliasToBean 转换器。

# c - 如何在C中合并两个数组？

> ID：10997552
> 
> 赞同：1
> 
> 时间：2012-06-12T13:19:12.653
> 
> 标签：c

我正在编写一个程序来连接 C 中的两个数组。我正在为第三个数组分配内存并使用`memcpy`将字节从两个数组复制到第三个数组。测试输出为：

> 1 2 3 4 5 0 0 0 0 0

这种方法有什么问题吗？

```
#include <stdlib.h>
#include <stdio.h>
#include <string.h>

int *array_concat(const void *a, int an,
                   const void *b, int bn)
{
  int *p = malloc(sizeof(int) * (an + bn));
  memcpy(p, a, an*sizeof(int));
  memcpy(p + an*sizeof(int), b, bn*sizeof(int));
  return p;
}

// testing
const int a[] = { 1, 2, 3, 4, 5 };
const int b[] = { 6, 7, 8, 9, 0 };

int main(void)
{
  unsigned int i;

  int *c = array_concat(a, 5, b, 5);

  for(i = 0; i < 10; i++)
    printf("%d\n", c[i]);

  free(c);
  return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T13:23:00.827

```
memcpy(p + an*sizeof(int),... 
```

这第二个 memcpy，您正试图添加`5 * sizeof(int)`到一个 int 指针，`p`. 但是，当您添加到指针时，它已经知道它必须处理`sizeof(type)`，因此您不必告诉它。

```
memcpy(p + an,... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T13:20:52.777

`*sizeof(int)`从 memcpy 的第一个参数中删除乘法。将其保留在`malloc`memcpy 的参数和第三个参数中。

这是因为`p + an`指向s 右侧的an —— 即`int`s右侧的字节。`an` `int``p``int``an*sizeof(int)``p`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-12T13:31:32.987

p 是一个指向 int 的指针。当您将整数添加到指向 int 的指针时，编译器会将整数乘以整数的大小。最终结果是乘以整数的大小**两次**：您得到的是“p + an*sizeof(int)”是 p +（a 中的元素数）*（int 中的字节数）* （int 中的字节数）。

memcpy(p + an*sizeof(int), b, bn*sizeof(int));

应该：

memcpy(p + an, b, bn*sizeof(int));

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-12T13:34:35.080

您应该从使用指针算术 (+) 的第二个 memcpy 中删除 sizeof(int)。编译器根据指针的类型自行执行此操作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-12T13:45:28.867

您应该看到 memcpy 的定义，它将 n 个“字节”从 src 复制到 dst 区域。所以，你只需要对第三个参数乘以 sizeof(int) 。而对于“c”，它是一个int类型的指针，所以，它确实知道“+an”意味着将p向前移动到an+1 int位置。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-12-06T14:43:28.363

合并可以通过对要合并的元素的元素进行排序来完成合并两个数组的代码

```
#include<stdio.h>
void sort(int arr[],int size){  // sorting function
    int i,j,temp;
    for(i=0;i<size;i++){
        for(j=i;j<size;j++){
            if(arr[i]>arr[j]){
                temp = arr[i];
                arr[i] = arr[j];
                arr[j] =  temp;
            }
        }
    }
}
int main(){
    int a[10],b[10],c[10];
    int n,i,k=0,j=0;
    printf("Enter the size of the array:");
    scanf("%d",&n);
    for(i=0;i<n;i++){
        printf("Enter the element of array A at index %d:",i); //input array A
        scanf("%d",&a[i]);
    }
    sort(a,n);
    for(i=0;i<n;i++){
        printf("Enter the element of array B at index %d:",i);  //Input array B
        scanf("%d",&b[i]);
    }
    sort(b,n);
    for(i=0;i<(n+n);i++){   // merging the two arrays
        if(a[k]<b[j]){
            c[i] = a[k];
            k++;
        }
        else{
            c[i] = b[j];
            j++;
        }
    }
    printf("Merged Array :\n");
    for(i=0;i<(n+n);i++){
        printf("c -> %d ",c[i]);
    }
    return 0;
} 
```

参考[C 程序在排序后合并两个数组](http://www.psychocodes.in/c-program-to-merge-two-arrays-after-sorting.html)

# wordpress - 如何将 wordpress 自定义字段 rss 输入到 zend？

> ID：10997555
> 
> 赞同：0
> 
> 时间：2012-06-12T13:19:16.677
> 
> 标签：wordpress, zend-framework, rss

我的网站是基于 zend 框架的，它有 wordpress 博客。我想在网站上获取新的帖子详细信息。使用zend **Zend_Feed_Reader** [函数](http://framework.zend.com/manual/en/zend.feed.reader.html)，我可以获得标题、链接、描述……但是没有方法可以获取wordpress 自定义字段提要。有没有现有的方法或任何其他方法可以做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T18:49:22.000

尝试将其包含`wp-load.php`在您的 zend 站点中。这将使您可以访问 wordpress 中的所有内容（函数、帖子、元数据），并且您无需外出检索 RSS 提要即可获得它。

# php - JQuery 链式选择实现

> ID：10997561
> 
> 赞同：2
> 
> 时间：2012-06-12T13:19:35.790
> 
> 标签：php, jquery, mysql, ajax

就 JQuery、AJAX 和 PHP 而言，我是新手，我正在尝试构建一个带有链式选择的表单，该表单将为新的 mysql 记录提供初始数据。我已经下载了 JQuery 链式选择远程插件，对于我来说，我无法弄清楚如何获取第二个选择下拉列表返回的数据。第一个下拉列表使用另一个函数填充，当用户从此下拉列表中选择一个值时，我希望该值用作第二个下拉列表的搜索字符串。 **主窗体的代码片段是：**

```
<?php

<head>
    <script type="text/javascript" src="../js/jquery-1.7.2.min.js"></script>
        <script type="text/javascript" src="../js/jquery.chained.remote.js" charset="utf-8"></script>
    </script>
        <script type="text/javascript">
        $('#series').remoteChained("#series", "../models/json.php");
    </script>
</head>
<body>
<form action="" method="post">
<table border="1">
<tr> 
<th>Season:</th>
<td><select name="season" id="mark">
<option value="">Select Season...</option>
<?php
$i = 0;
while ($i < count($showseason)){  // obtain seasons from getseason() function
?>
<option value="<?php echo $showseason[$i]; ?>">
<?php echo $showseason[$i]; ?> </option>
<?php 
$i++;
} ?> 
</select></td>
<th>Competition:</th><td><select name="competition" id="series">
<option value="">Competition type...</option>
</select></td> 
```

以下是Mysql select(json.php)的代码

```
<?php

include_once $_SERVER['DOCUMENT_ROOT'] . '/includes/helpers.inc.php';
include_once $_SERVER['DOCUMENT_ROOT'] . '/includes/db_connect.php';

try
{
    $result = $pdo->prepare("SELECT sideid, competition FROM pennantsides");
    $result->execute();

    echo json_encode($result->fetchAll(PDO::FETCH_ASSOC));

    }
catch (PDOException $e)
{
    $output = 'Error selecting records - Please contact your Site Administrator';
    include $_SERVER['DOCUMENT_ROOT'] . '/views/output.html.php';
    exit();
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T09:46:27.467

不是 $('#mark').remoteChained("#series", "../models/json.php"); 你想做什么？

另外，当您在浏览器上（或通过您使用的任何 GET 方法）启动 json 文件时，它的内容是什么？

# c# - 从活动目录上的随机计算机更改本地管理员密码

> ID：10997562
> 
> 赞同：0
> 
> 时间：2012-06-12T13:19:36.613
> 
> 标签：c#, wmi

[我在此处](https://stackoverflow.com/questions/234845/change-local-administrator-password-in-c-sharp)应用了这些说明来更改我的活动目录中的本地管理员密码。如果我在域控制器上运行 wmi 脚本，它可以正常工作，但只有在这种情况下。

如何从我的活动目录中的随机计算机更改所有本地管理员密码？是否可以指定我的域控制器的一些凭据来验证进程。

提前致谢。

编辑：我尝试添加 DirectoryEntry 类的用户名和密码构造函数，但现在我得到“指定的本地组不存在”。例外。

# java - 如何获取有关单击第一个活动的按钮的信息并在第三个活动中使用它？- 安卓

> ID：10997571
> 
> 赞同：0
> 
> 时间：2012-06-12T13:20:13.433
> 
> 标签：java, android, xml, button, android-activity

好吧，有 3 个活动说**Act1**，**Act2**和**Act3**。

在**Act1**中有三个按钮，分别是**But1**、**But2**和**But3**。

如果我们单击 3 个三个按钮中的任何一个，它将最终显示**Act2**。

在**Act2**中只有一个按钮说**Done**。

我的问题是，当我单击 Act2 中的 Done 按钮时**，****我**应该获取有关在**Act1**中单击的按钮的信息，以在**Act3**的**TextView**中显示**Act2**。

 ******我想我已经说清楚了。。

我只需要知道如何将**Act1**中的*按钮点击*信息传递给**Act3**

 ****我应该使用捆绑包还是其他东西？请帮我解决逻辑，如果可能的话，请提供示例代码？:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T13:26:32.303

你有几个选择。

1) Hardcore 选项将是创建一个数据库并保存/查询信息。

2) 您也可以写入 sharedPreferences。 [共享首选项示例](http://saigeethamn.blogspot.com/2009/10/shared-preferences-android-developer.html)

3）正如评论中提到的，如果你只是从一个活动到另一个活动，你可以仅仅 intent.putExtra("key", value)

4）最后你可以扩展[应用程序](http://developer.android.com/reference/android/app/Application.html) 这是一个处理全局变量的好帖子。[如何在Android中声明全局变量？](https://stackoverflow.com/questions/708012/android-how-to-declare-global-variables)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T14:01:05.963

尝试使用意图

```
 public void onClick(View arg0) {
                Bundle bundle = new Bundle();
                bundle.putInt("BtnAID", ID);
                Intent It = new Intent();
                It.setClass(A.this, B.class);
                It.putExtras(bundle);
                startActivity(It);
               } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-12T13:32:19.277

您可以使用`SharedPreferences`来存储按下了哪个按钮。

```
 SharedPreferences appSharedPrefs = PreferenceManager.getDefaultSharedPreferences(this.getApplicationContext());
                Editor prefsEditor = appSharedPrefs.edit();

    Button b1 = (Button) findViewById(R.id.button1);
    b1.setOnClickListener(new View.OnClickListener() {
                @Override
                public void onClick(View v) {
                    // TODO Auto-generated method stub
                prefsEditor.putString("buttonPressed", "Button1");
                prefsEditor.commit();

                }
            });

    Button b2 = (Button) findViewById(R.id.button2);
    b2.setOnClickListener(new View.OnClickListener() {
                @Override
                public void onClick(View v) {
                    // TODO Auto-generated method stub
                prefsEditor.putString("buttonPressed", "Button2");
                prefsEditor.commit();

                }
            });

    Button b3 = (Button) findViewById(R.id.button3);
    b3.setOnClickListener(new View.OnClickListener() {
                @Override
                public void onClick(View v) {
                    // TODO Auto-generated method stub
                prefsEditor.putString("buttonPressed", "Button3");
                prefsEditor.commit();

                }
            }); 
```

在`Activity`您想要获取按下哪个按钮的位置：

```
SharedPreferences appSharedPrefs = PreferenceManager.getDefaultSharedPreferences(this.getApplicationContext());
String whichButton = appSharedPrefs.getString("buttonPressed", "");
if(whichButton.equals("Button1")
 //do something
if(whichButton.equals("Button2")
 //do something
if(whichButton.equals("Button3")
 //do something 
```**********

# python - Python时区转换

> ID：10997577
> 
> 赞同：105
> 
> 时间：2012-06-12T13:20:38.457
> 
> 标签：python, timezone

我正在寻找一种快速输入时间的方法，然后 python 将其转换为其他时区（可能多达 10 个不同的时区）

对不起。我根本不熟悉python中的时间，如果有人能把我引向正确的方向，我将不胜感激。

* * *

## 回答 #1

> 赞同：119
> 
> 时间：2013-09-05T22:13:24.873

我发现最好的方法是将感兴趣的“时刻”转换为支持 utc-timezone 的 datetime 对象（在 python 中，[datetime](https://docs.python.org/3/library/datetime.html#module-datetime)对象不需要 timezone 组件）。

然后您可以使用[astimezone](https://docs.python.org/3/library/datetime.html#datetime.datetime.astimezone)转换为感兴趣的时区（[参考](https://stackoverflow.com/a/2090122/2697658)）。

```
from datetime import datetime
import pytz

utcmoment_naive = datetime.utcnow()
utcmoment = utcmoment_naive.replace(tzinfo=pytz.utc)

# print "utcmoment_naive: {0}".format(utcmoment_naive) # python 2
print("utcmoment_naive: {0}".format(utcmoment_naive))
print("utcmoment:       {0}".format(utcmoment))

localFormat = "%Y-%m-%d %H:%M:%S"

timezones = ['America/Los_Angeles', 'Europe/Madrid', 'America/Puerto_Rico']

for tz in timezones:
    localDatetime = utcmoment.astimezone(pytz.timezone(tz))
    print(localDatetime.strftime(localFormat))

# utcmoment_naive: 2017-05-11 17:43:30.802644
# utcmoment:       2017-05-11 17:43:30.802644+00:00
# 2017-05-11 10:43:30
# 2017-05-11 19:43:30
# 2017-05-11 13:43:30 
```

因此，在本地时区感兴趣的时刻（[存在](https://stackoverflow.com/questions/10997577/python-timezone-conversion/18646797#comment40107516_18646797)的时间），您可以像这样将其转换为 utc（[参考](https://stackoverflow.com/a/7065242/2697658)）。

```
localmoment_naive = datetime.strptime('2013-09-06 14:05:10', localFormat)

localtimezone = pytz.timezone('Australia/Adelaide')

try:
    localmoment = localtimezone.localize(localmoment_naive, is_dst=None)
    print("Time exists")

    utcmoment = localmoment.astimezone(pytz.utc)

except pytz.exceptions.NonExistentTimeError as e:
    print("NonExistentTimeError") 
```

* * *

## 回答 #2

> 赞同：59
> 
> 时间：2012-06-12T13:28:32.993

使用[pytz](http://pytz.sourceforge.net/)

```
from datetime import datetime
from pytz import timezone

fmt = "%Y-%m-%d %H:%M:%S %Z%z"
timezonelist = ['UTC','US/Pacific','Europe/Berlin']
for zone in timezonelist:

    now_time = datetime.now(timezone(zone))
    print now_time.strftime(fmt) 
```

* * *

## 回答 #3

> 赞同：30
> 
> 时间：2017-05-26T09:05:24.193

```
import datetime
import pytz

def convert_datetime_timezone(dt, tz1, tz2):
    tz1 = pytz.timezone(tz1)
    tz2 = pytz.timezone(tz2)

    dt = datetime.datetime.strptime(dt,"%Y-%m-%d %H:%M:%S")
    dt = tz1.localize(dt)
    dt = dt.astimezone(tz2)
    dt = dt.strftime("%Y-%m-%d %H:%M:%S")

    return dt 
```

-

*   `dt`: 日期时间字符串
*   `tz1`: 初始时区
*   `tz2`: 目标时区

-

```
> convert_datetime_timezone("2017-05-13 14:56:32", "Europe/Berlin", "PST8PDT")
'2017-05-13 05:56:32'

> convert_datetime_timezone("2017-05-13 14:56:32", "Europe/Berlin", "UTC")
'2017-05-13 12:56:32' 
```

-

```
> pytz.all_timezones[0:10]
['Africa/Abidjan',
 'Africa/Accra',
 'Africa/Addis_Ababa',
 'Africa/Algiers',
 'Africa/Asmara',
 'Africa/Asmera',
 'Africa/Bamako',
 'Africa/Bangui',
 'Africa/Banjul',
 'Africa/Bissau'] 
```

* * *

## 回答 #4

> 赞同：18
> 
> 时间：2020-06-01T22:51:16.200

**Python 3.9 添加了[`zoneinfo`](https://docs.python.org/3.9/library/zoneinfo.html)模块**，所以现在只需要标准库！

```
>>> from zoneinfo import ZoneInfo
>>> from datetime import datetime

>>> d = datetime(2020, 10, 31, 12, tzinfo=ZoneInfo('America/Los_Angeles'))
>>> d.astimezone(ZoneInfo('Europe/Berlin'))  # 12:00 in Cali will be 20:00 in Berlin
datetime.datetime(2020, 10, 31, 20, 0, tzinfo=zoneinfo.ZoneInfo(key='Europe/Berlin')) 
```

[可用时区的维基百科列表](https://en.wikipedia.org/wiki/List_of_tz_database_time_zones)

* * *

一些函数，例如`now()`和`utcnow()`返回时区不敏感的日期时间，这意味着它们**不包含时区信息**。我建议只使用关键字从他们那里请求时区感知值`tz=ZoneInfo('localtime')`。

如果`astimezone`得到一个不知道时区的输入，它将**假定它是本地时间**，这可能会导致错误：

```
>>> datetime.utcnow()  # UTC -- NOT timezone-aware!!
datetime.datetime(2020, 6, 1, 22, 39, 57, 376479)
>>> datetime.now()     # Local time -- NOT timezone-aware!!
datetime.datetime(2020, 6, 2, 0, 39, 57, 376675)

>>> datetime.now(tz=ZoneInfo('localtime'))  # timezone-aware
datetime.datetime(2020, 6, 2, 0, 39, 57, 376806, tzinfo=zoneinfo.ZoneInfo(key='localtime'))
>>> datetime.now(tz=ZoneInfo('Europe/Berlin'))  # timezone-aware
datetime.datetime(2020, 6, 2, 0, 39, 57, 376937, tzinfo=zoneinfo.ZoneInfo(key='Europe/Berlin'))
>>> datetime.utcnow().astimezone(ZoneInfo('Europe/Berlin'))  # WRONG!!
datetime.datetime(2020, 6, 1, 22, 39, 57, 377562, tzinfo=zoneinfo.ZoneInfo(key='Europe/Berlin')) 
```

* * *

**Windows** [没有](https://docs.python.org/3.9/library/zoneinfo.html#data-sources)系统时区数据库，所以这里需要一个额外的包：

```
pip install tzdata 
```

* * *

有一个 backport 允许在**Python 3.6 到 3.8**中使用：

```
sudo pip install backports.zoneinfo 
```

然后：

```
from backports.zoneinfo import ZoneInfo 
```

* * *

## 回答 #5

> 赞同：12
> 
> 时间：2020-07-17T05:51:50.987

# 时间换算

要在 Python 中将一个时区的时间转换为另一个时区，可以使用**datetime.astimezone()：**

所以，下面的代码是将本地时间转换为其他时区。

*   **datetime.datetime.today()** - 返回当前本地时间
*   **datetime.astimezone()** - 转换时区，但我们必须通过时区。
*   **pytz.timezone('Asia/Kolkata')** - 将时区传递给 pytz 模块
*   **Strftime** - 将日期时间转换为字符串

```
# Time conversion from local time
import datetime
import pytz
dt_today = datetime.datetime.today()   # Local time
dt_India = dt_today.astimezone(pytz.timezone('Asia/Kolkata')) 
dt_London = dt_today.astimezone(pytz.timezone('Europe/London'))
India = (dt_India.strftime('%m/%d/%Y %H:%M'))
London = (dt_London.strftime('%m/%d/%Y %H:%M'))
print("Indian standard time: "+India+" IST")
print("British Summer Time: "+London+" BST") 
```

## 列出所有时区

```
import pytz
for tz in pytz.all_timezones:
    print(tz) 
```

* * *

## 回答 #6

> 赞同：10
> 
> 时间：2016-11-18T18:41:17.227

要将一个时区中的时间转换为 Python 中的另一个时区，您可以[使用`datetime.astimezone()`](https://docs.python.org/3/library/datetime.html#datetime.datetime.astimezone)：

```
time_in_new_timezone = time_in_old_timezone.astimezone(new_timezone) 
```

给定`aware_dt`（`datetime`某个时区的对象），将其转换为其他时区并以给定的时间格式打印时间：

```
#!/usr/bin/env python3
import pytz  # $ pip install pytz

time_format = "%Y-%m-%d %H:%M:%S%z"
tzids = ['Asia/Shanghai', 'Europe/London', 'America/New_York']
for tz in map(pytz.timezone, tzids):
    time_in_tz = aware_dt.astimezone(tz)
    print(f"{time_in_tz:{time_format}}") 
```

^(如果`f""`语法不可用，您可以将其替换为`"".format(**vars())`)

您可以`aware_dt`从本地时区的当前时间设置：

```
from datetime import datetime
import tzlocal  # $ pip install tzlocal

local_timezone = tzlocal.get_localzone()
aware_dt = datetime.now(local_timezone) # the current time 
```

或者从本地时区的输入时间字符串：

```
naive_dt = datetime.strptime(time_string, time_format)
aware_dt = local_timezone.localize(naive_dt, is_dst=None) 
```

哪里`time_string`可能看起来像：`'2016-11-19 02:21:42'`。它对应于`time_format = '%Y-%m-%d %H:%M:%S'`。

`is_dst=None`如果输入时间字符串对应于不存在或不明确的本地时间，例如在 DST 转换期间，则强制异常。你也可以通过`is_dst=False`, `is_dst=True`。在 Python 中查看更多详细信息的链接[：如何将日期时间/时间戳从一个时区转换为另一个时区？](https://stackoverflow.com/q/31977563/4279)

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2012-10-26T09:40:48.663

对于 Python 时区转换，我使用来自Taavi Burns的 PyCon 2012[演示文稿中的](https://us.pycon.org/2012/schedule/presentation/255/)[方便表。](http://taaviburns.ca/presentations/what_you_need_to_know_about_datetimes/)

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2017-09-08T15:30:47.237

请注意：此答案的第一部分是 pendulum 的 1.x 版本。有关 2.x 版本的答案，请参见下文。

我希望我不会太晚！

[pendulum](https://pendulum.eustace.io/docs/)库擅长这种和其他日期时间计算。

```
>>> import pendulum
>>> some_time_zones = ['Europe/Paris', 'Europe/Moscow', 'America/Toronto', 'UTC', 'Canada/Pacific', 'Asia/Macao']
>>> heres_a_time = '1996-03-25 12:03 -0400'
>>> pendulum_time = pendulum.datetime.strptime(heres_a_time, '%Y-%m-%d %H:%M %z')
>>> for tz in some_time_zones:
...     tz, pendulum_time.astimezone(tz)
...     
('Europe/Paris', <Pendulum [1996-03-25T17:03:00+01:00]>)
('Europe/Moscow', <Pendulum [1996-03-25T19:03:00+03:00]>)
('America/Toronto', <Pendulum [1996-03-25T11:03:00-05:00]>)
('UTC', <Pendulum [1996-03-25T16:03:00+00:00]>)
('Canada/Pacific', <Pendulum [1996-03-25T08:03:00-08:00]>)
('Asia/Macao', <Pendulum [1996-03-26T00:03:00+08:00]>) 
```

[Answer](https://stackoverflow.com/q/13866926/131187)列出了可以与 pendulum 一起使用的时区名称。（它们与 pytz 相同。）

对于版本 2：

*   `some_time_zones`是可能在程序中使用的时区名称列表
*   `heres_a_time`是一个采样时间，带有“-0400”形式的时区
*   我首先将时间转换为钟摆时间以进行后续处理
*   现在我可以显示每个时区的时间`show_time_zones`

...

```
>>> import pendulum
>>> some_time_zones = ['Europe/Paris', 'Europe/Moscow', 'America/Toronto', 'UTC', 'Canada/Pacific', 'Asia/Macao']
>>> heres_a_time = '1996-03-25 12:03 -0400'
>>> pendulum_time = pendulum.from_format('1996-03-25 12:03 -0400', 'YYYY-MM-DD hh:mm ZZ')
>>> for tz in some_time_zones:
...     tz, pendulum_time.in_tz(tz)
...     
('Europe/Paris', DateTime(1996, 3, 25, 17, 3, 0, tzinfo=Timezone('Europe/Paris')))
('Europe/Moscow', DateTime(1996, 3, 25, 19, 3, 0, tzinfo=Timezone('Europe/Moscow')))
('America/Toronto', DateTime(1996, 3, 25, 11, 3, 0, tzinfo=Timezone('America/Toronto')))
('UTC', DateTime(1996, 3, 25, 16, 3, 0, tzinfo=Timezone('UTC')))
('Canada/Pacific', DateTime(1996, 3, 25, 8, 3, 0, tzinfo=Timezone('Canada/Pacific')))
('Asia/Macao', DateTime(1996, 3, 26, 0, 3, 0, tzinfo=Timezone('Asia/Macao'))) 
```

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2013-09-05T23:21:06.943

对于 Python 3.2+ ， [simple-date](https://github.com/andrewcooke/simple-date)是 pytz 的一个包装器，它试图简化事情。

如果你有`time`那么

```
SimpleDate(time).convert(tz="...") 
```

可以做你想做的。但是时区是相当复杂的东西，所以它可能会变得更加复杂 - 请参阅[文档](https://github.com/andrewcooke/simple-date)。

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2020-08-14T11:35:44.540

```
# Program
import time
import os

os.environ['TZ'] = 'US/Eastern'
time.tzset()
print('US/Eastern in string form:',time.asctime()) 

os.environ['TZ'] = 'Australia/Melbourne'
time.tzset()
print('Australia/Melbourne in string form:',time.asctime())

os.environ['TZ'] = 'Asia/Kolkata'
time.tzset()
print('Asia/Kolkata in string form:',time.asctime()) 
```

# haskell - 在 Haskell 中使用递归打印出符号代码及其对应的符号

> ID：10997580
> 
> 赞同：1
> 
> 时间：2012-06-12T13:20:45.650
> 
> 标签：haskell, printing, recursion, char, symbols

就像标题说的那样，我在使用 Haskell 打印出符号代码及其相应的符号时遇到了一些麻烦……我现在拥有的是：

```
import Data.Char
import Debug.Trace

foo z | trace ("Symbolcode " ++ show z ++ " is " ++ (chr z)) False = undefined
foo z = if (z <= 128)
    then foo (z+1)
    else show "All done." 
```

...我收到这样的错误：

```
Couldn't match expected type `[Char]' with actual type `Char'
In the return type of a call of `chr'
In the second argument of `(++)', namely `(chr z)'
In the second argument of `(++)', namely `" is " ++ (chr z)' 
```

我做错了什么，有没有更简单的方法（例如不使用跟踪模块）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-12T13:23:13.883

您需要`Char`将由 生成的`chr z`转换为`String`（例如通过`[chr z]`或`return (chr z)`或`chr z : []`等）。否则，您不能在使用`++`.

```
foo z | trace ("Symbolcode " ++ show z ++ " is " ++ [chr z]) False = undefined 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-12T13:36:51.353

`trace`用于除调试以外的任何事情都是一个坏主意，因为[执行顺序是不可靠的](http://www.haskell.org/ghc/docs/latest/html/libraries/base-4.5.1.0/Debug-Trace.html)。

如果你想对一个范围内的所有整数做一些事情，首先要制作`[0 .. 127]`你想要处理的整数列表。要输出一些文本，您应该使用 IO 操作，例如`putStrLn`. 与`trace`,不同，`putStrLn`它总是会在它应该执行的时候执行。 将此 IO 操作[映射到您的列表以打印所有字符。](http://www.haskell.org/ghc/docs/latest/html/libraries/base-4.5.1.0/Control-Monad.html)

```
showCharCode n = putStrLn ("Symbol code " ++ show n ++ " is " ++ [chr n])
foo = mapM_ showCharCode [0 .. 127] 
```

# c# - 创建目录结构

> ID：10997585
> 
> 赞同：0
> 
> 时间：2012-06-12T13:21:01.637
> 
> 标签：c#

有什么方法可以创建一个包含目录中所有文件夹和文件的列表？我将指定路径并列出其所有子文件夹和文件，并将它们写入 txt 文件或 xml 文件以使其更易于阅读。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T13:26:04.507

[Directory.GetFiles](http://msdn.microsoft.com/en-us/library/wz42302f.aspx)方法应该为您提供所有文件的列表，以及它们的完整路径：

```
string[] filePaths = Directory.GetFiles(@"c:\MyDir\", "*.*", SearchOption.AllDirectories); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T13:23:47.077

`Directory.GetFiles`和`Directory.GetDirectories`方法应该有帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T13:29:01.213

这是获取所有文件的好链接： [http ://www.csharp-examples.net/get-files-from-directory/](http://www.csharp-examples.net/get-files-from-directory/)

并获取所有目录：使用 Directories.GetFolders() 代替。

然后你必须做一个 for 循环或其他东西来遍历它们。也许递归方法是一个不错的选择。类似 void PrintFilesAndFolders(string directory)...

# objective-c - 财产公共和私人但不受保护？

> ID：10997589
> 
> 赞同：1
> 
> 时间：2012-06-12T13:21:19.563
> 
> 标签：objective-c, properties, private, public

我正在学习客观的 C 语言，当我这样做时，我会问一个简单的问题：

```
// ParentClass.h
@interface ParentClass : NSObject
@property (read, strong) NSString *parentPublicStr;
@end

// ParentClass.m
@interface ParentClass ()
@property (readwrite, strong) NSString *parentPrivateStr;
@end

@implementation ParentClass
@synthesize parentPublicStr;
@synthesize parentPrivateStr;
@end

// Subclass SubClass.h
@interface SubClass : ParentClass
- (void) test;
@end

@implementation SubClass
- (void) test
{
 // Its not possible to do that : [self setParentPrivateStr:@"myStrin"]
 // And for parentPublicStr, it is public property so not protected, because i can change the value
 // in main.c, and it's so bad..
}
@end 
```

我想创建一个受保护的属性：x

谢谢你。（对不起我的英语不好）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T13:30:00.807

Objective-C 不提供受保护的方法/属性。看到[这个](https://stackoverflow.com/questions/1338434/what-is-the-objective-c-equivalent-of-a-public-get-protected-set-property-in-c-s)问题。

编辑：另请参阅[此](https://stackoverflow.com/questions/4264263/objective-c-properties-for-class-and-its-subclasses-only)答案。您仍然可以通过在类扩展中声明属性并将扩展包含在子类中来练习封装。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T15:00:43.527

只要您使用带有下划线前缀的相同名称，您就可以为该属性手动创建 ivar：

```
@interface ParentClass : NSObject
{
    @protected
    NSString* _parentPublicStr;
}
@property (read, strong) NSString *parentPublicStr;
@end 
```

这使得属性@protected（默认为@private）的合成ivar，然后子类可以直接使用超类的ivar。

# css - 带有填充0的div之间的差距？

> ID：10997591
> 
> 赞同：0
> 
> 时间：2012-06-12T13:21:22.450
> 
> 标签：css, html

我一直在寻找（寻找答案）没有成功，所以我想我做了“我的功课”......

所以基本上我在2个div之间有一个差距。 [在这里你可以看到它。](http://8ahonlap.net23.net/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T13:27:14.830

间隙是由`p`元素引起的。
您需要取消边距 - 浏览器的默认行为是在段落前后添加 1em。

如果您使用谷歌浏览器，您可以右键单击并转到**检查元素**。从那里您可以看到哪些默认行为已应用于页面上的某些元素。您甚至可以直观地看到边距创建了哪些空间。你的差距就是其中之一。=)

请参阅下面的屏幕截图 - 这显示了应用于另一个`p`元素的边距。 ![](../Images/6eb60cb50db12db0b46ae708571857fb.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T13:25:09.517

给`overflow:hidden`你的`.bigtext`，像这样：

```
.bigtext{
 overflow:hidden;
} 
```

这个问题被称为“折叠边距”。

检查这个[http://reference.sitepoint.com/css/collapsingmargins](http://reference.sitepoint.com/css/collapsingmargins)

[http://www.w3.org/TR/CSS2/box.html](http://www.w3.org/TR/CSS2/box.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-12T13:26:29.250

在你的内容课上

```
.content {
  background: url("panel.png");
  padding: 0;
  margin: 0;
  float: left; /*new style*/
  width: 100%; /*new style*/
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-12T13:25:23.573

`margin-top:-23px`你可以通过应用到`.content`div来破解它

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-12T13:22:37.427

试试`margin: 0;`那些 div。

# eclipse - 在eclipse插件中使用draw2d绘制垂直标签

> ID：10997603
> 
> 赞同：1
> 
> 时间：2012-06-12T13:22:05.837
> 
> 标签：eclipse, eclipse-plugin, eclipse-rcp, draw2d

我正在使用 gef 做一个 Eclipse 插件。有人知道如何绘制垂直标签吗？

亲切的问候， Kyriakos Georgiou

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T12:41:38.777

看看[这个](http://www.eclipse.org/forums/index.php/mv/msg/164346/726021/#msg_726021)线程，在线程的末尾。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T14:29:28.740

在链接的帖子中使用 ImageUtilities 效果很好。以下是如何在标签中使用它。

```
@Override
protected void paintFigure(Graphics graphics) {
    if (vertical) {
        Image image = ImageUtilities.createRotatedImageOfString(getSubStringText(), getFont(), getForegroundColor(), getBackgroundColor());
        graphics.drawImage(image, new Point(getTextLocation()).translate(getLocation()));
    image.dispose();
    } else {
        super.paintFigure(graphics);
    }
} 
```

# multithreading - vxworks 任务如何让所有其他优先级较低的任务在单个多任务循环中运行？

> ID：10997606
> 
> 赞同：3
> 
> 时间：2012-06-12T13:22:10.227
> 
> 标签：multithreading, vxworks

vxworks 任务如何在最短的时间内将 CPU 让给优先级较低的任务？

有没有一种方法可以让任务在不到 1ms 的时间内放弃 CPU？

我知道让其他低优先级任务运行的唯一方法是 taskDelay(n)，其中 n>=1。

我一直假设 taskDelay(0) 让所有其他具有相同或更高优先级的任务运行。

taskDelay(1) 让所有较低优先级的挂起任务最多运行 1 毫秒。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-10-25T10:05:25.950

更高优先级的任务将*始终*运行，如果它准备好了，***并且***如果你没有调用`taskLock()`或`intLock()`等等，所以你不需要`taskDelay()`让**更高**优先级的任务运行。

`taskDelay(0)`会将当前任务放在该*优先级*的就绪队列的后面。*如果它是该优先级的唯一任务，则无论是否存在较低优先级的任务*，都会**立即**重新安排它

 *`taskDelay(n>0)`将把当前任务放在就绪队列的后面，对于那个优先级，它不会被重新调度`n`。这将允许任何较低优先级的就绪任务运行。

The parameter to `taskDelay()` is ticks, not ms. The length of this can be determined based on the system clk rate (which you set by `sysClkRateSet()`, and read by `sysClkRateGet()` ). 1 tick **might** equal 1ms, but **only** if the system clk rate is 1000\. Which it probably wont be. The default rate is 60, which gives a 16ms tick, but this is normally overridden either statically in the kernel config, or dynamically by calling sysClkRateSet()

**NOTE:** This system clock is not the same as the CPU freq.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T12:20:06.130

VxWorks 中有某些事件会强制调度程序运行，例如，每个 semGive()、每个系统时钟滴答和 taskDelay()。taskDelay() 的参数是系统时钟的滴答声。sysClkRateGet() 将返回系统时钟的速率。

例如，如果 sysClkRateGet() 返回 10，则每个时钟节拍为 100 毫秒。因此，如果您调用 taskDelay(1)，那么这将告诉您的任务进入睡眠状态，直到下一个系统滴答声。但是，这并不能保证 100 毫秒的睡眠，而是最多 100 毫秒的睡眠，或者如果下一个时钟滴答即将到来，则可以短至 0 毫秒。如果您调用 taskDelay(2)，那么您的任务将休眠直到下一个时钟滴答（0 到 100 毫秒之间的某个时间）加上下一个时钟滴答（保证为 100 毫秒） - 导致总延迟介于 100 毫秒和200 毫秒。

VxWorks 中的时序有很多考虑因素，我希望这有助于解释一些细节。*

# java - 使用 TableLayout 执行类似可扩展列表视图

> ID：10997608
> 
> 赞同：0
> 
> 时间：2012-06-12T13:22:11.343
> 
> 标签：java, android, android-layout, expandablelistview

> 是否可以通过动态添加行（展开时）和删除行（隐藏时）来使用 TableLayout 来获得与 ExpandableListView 相同的功能？

# salesforce - 触发现有数据？

> ID：10997613
> 
> 赞同：2
> 
> 时间：2012-06-12T13:22:27.020
> 
> 标签：salesforce, apex-code

设置：

A--< B >-- C 。在 A 上，B 上有一个 RFS，然后有一个更新后触发器，当运行时填充 B 上的字段。然后 B 的一个字段被汇总到 C 上的一个字段中。

问题：

触发器有效，但我需要在数据库中的现有记录上运行它以使所有内容保持最新。我怎么做？我已经尝试在 A 和 C 上使用 RFS 运行“力质量重新计算”。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-11T08:19:45.500

您可以编写相当简单的[Batch Apex（请参阅文档）](http://www.salesforce.com/us/developer/docs/apexcode/Content/apex_batch_interface.htm)作业类来触摸您要重新计算的所有记录：

```
global class TouchRecords implements Database.Batchable<sObject>{
    private String query;

    global TouchRecords(String query) {
        this.query = query;
    }

    global Database.QueryLocator start(Database.BatchableContext BC){
        return Database.getQueryLocator(query);
    }

    global void execute(Database.BatchableContext BC, List<sObject> scope){
        update scope;
    }

    global void finish(Database.BatchableContext BC){
    }
} 
```

然后可以通过运行以下命令（例如通过匿名执行）来执行该作业：

```
Id batchInstanceId = Database.executeBatch(new TouchRecords('select id from A__c')); 
```

或者

```
Id batchInstanceId = Database.executeBatch(new TouchRecords('select id from Contact')); 
```

触摸所有联系人

这应该在所有被触摸的记录上运行触发器（最多支持 5000 万条记录）。与提议的数据加载器解决方案相同的想法，但保留在 SFDC 中以便于重用

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T13:54:54.087

找到了解决方法。

使用数据加载器 - 对 ID 和更新进行导出。这将更改上次修改日期，并导致更新后触发器触发。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T21:09:07.067

更好的方法是在对象上创建一个虚拟字段，然后对该字段进行批量更新。这可能还有其他问题，因此您可能希望将批量大小减少到一个数字，以便在执行任何 DML 时不受 SOQL 调控器限制。

# apache - 让 MediaWiki 在所有页面上要求 HTTPS 的最简单方法？

> ID：10997614
> 
> 赞同：10
> 
> 时间：2012-06-12T13:22:28.487
> 
> 标签：apache, https, mediawiki

我需要安装 MediaWiki 以要求使用 https（并拒绝正常的 http）。我花了2个小时寻找。设置`$wgServer`不起作用，关闭端口 80`httpd.conf`也不起作用。

我的 wiki 安装在 Apache 服务器上运行。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2015-02-05T16:38:22.927

我刚刚在 Ubuntu 14 上完成了这个（今天第一次，所以可能有更好的方法！）通过设置

```
$wgServer = "//myhostname.com/mediawiki"; 
```

这使得服务器名称“相对于协议”，因此它可以与 HTTP 或 HTTPS 一起使用。您可能可以将其设置为 https://... 不过。

然后配置 apache2 将所有 HTTP 流量重定向到 HTTPS：

编辑默认 SSL 配置（假设您只是使用默认站点）：

```
sudo vim /etc/apache2/sites-available/default-ssl.conf 
```

阅读类似：

```
# Redirect HTTP to HTTPS
<VirtualHost *:80>
     ServerAdmin admin@example.com
     ServerName example.com

     Redirect permanent / https://example.com/
</VirtualHost>

# Normal HTTPS config for default site
<VirtualHost *:443>
     SSLEngine On
     SSLCertificateFile /etc/apache2/ssl/apache.pem
     SSLCertificateKeyFile /etc/apache2/ssl/apache.key

     ServerAdmin admin@example.com
     ServerName example.com
     DocumentRoot /var/www/html/
     ErrorLog ${APACHE_LOG_DIR}/error.log
     CustomLog ${APACHE_LOG_DIR}/access.log combined
</VirtualHost> 
```

启用默认 SSL 站点（如果您尚未启用）（这会创建从站点启用到站点可用的链接）

```
sudo a2ensite default-ssl 
```

这假设您已经获得了一个 SSL 证书（我生成了一个自签名证书），该证书已放入`/etc/apache2/ssl/apache.pem`并`/etc/apache2/ssl/apache.key`在上面的配置中引用。

最后让 apache 使用新的配置：

```
sudo service apache2 restart 
```

（或者`reload`可能就足够了）

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-12T13:25:47.083

我的回答假设您已经让 Apache 在端口 443 上侦听 https 流量。如果不是这样，您需要先进行设置。该过程将根据您运行的操作系统而有所不同。

* * *

您想在 Apache 中执行此操作。在我的 Ubuntu 系统上，有一个文件`/etc/apache2/ports.conf`包含以下行：

```
Listen 80 
```

您将有一个包含该行的类似配置文件。删除它，不要忘记重新启动 Apache。

* * *

实现此目的的另一种方法是使用MediaWiki 目录中的[`.htaccess`文件](https://en.wikipedia.org/wiki/Htaccess)，它允许更复杂的 Apache 配置，允许 HTTP 访问站点的某些部分。尝试这个：

```
RewriteEngine On
RewriteCond %{HTTPS} off
RewriteRule (.*) https://%{HTTP_HOST}%{REQUEST_URI} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-07-05T20:02:13.043

鉴于您的 Web 服务器设置为`https`一般支持，请在您`LocalSettings.php`的 MediaWiki 配置文件中插入或更新以下行：

```
$wgForceHTTPS = true; 
```

`http`这使用to重定向所有查询，`https`并且是 Web 服务器配置中重定向规则的替代方法。

也可以看看：

*   [$wgForceHTTPS](https://www.mediawiki.org/wiki/Manual:$wgForceHTTPS)
*   [MediaWiki HTTPS 手册](https://www.mediawiki.org/wiki/Manual:HTTPS)

# typo3 - 从 Typo3 CMS 迁移所 有内容

> ID：10997615
> 
> 赞同：0
> 
> 时间：2012-06-12T13:22:33.867
> 
> 标签：typo3

有没有办法导出当前内容（页面和资产）？如果是这样，它导出到什么格式？我还不熟悉 Typo3，所以任何信息都会很棒。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T13:30:23.957

是的你可以。有一个关于如何将站点导出为 t3d 文件的[教程。](http://typo3tutorials.com/index.php?id=137)（在typo3后端选择模块“page”，右键单击要导出的页面树中的项目，然后从上下文菜单中选择“export to .t3d”。在您想要的进一步对话框中有很多选项已包含在您的导出文件中。那里也描述了导入过程。

# android - 在抽象类中获取应用程序上下文

> ID：10997626
> 
> 赞同：2
> 
> 时间：2012-06-12T13:23:24.070
> 
> 标签：android, class, abstract, android-context

我正在开发一个安卓应用程序。我的问题是我可以在抽象类中获取应用程序上下文吗？它给了我上下文变量的空指针异常，我认为这可能是因为我在抽象类中使用它。

注意：在我的代码中，我有一个抽象类（抽象类本身扩展了 Activity），用于实例化其他类 - Activites。在抽象类中，我创建了一个活动助手的实例，一个处理应用程序中一些常见活动相关功能的类。这是我的活动助手类：

```
public class ActivityHelper { 
protected Activity mActivity; 

public static ActivityHelper createInstance(Activity activity, Context context) { 
return UIUtils.isTablet(context) ? 
new ActivityHelperTablet(activity) : 
new ActivityHelper(activity); 
} 

protected ActivityHelper(Activity activity) { 
mActivity = activity; 
}  
     } 
```

函数 isTablet 接收我在抽象类中创建的上下文变量

```
 public static boolean isTablet(Context context) {
      // Can use static final constants like HONEYCOMB, declared in later versions 
      // of the OS since they are inlined at compile time. 
     return isHoneycomb() ||    
    ((context.getResources().getConfiguration().screenLayout    &        
    Configuration.SCREENLAYOUT_SIZE_MASK) >= Configuration.SCREENLAYOUT_SIZE_LARGE);
    } 
```

BaseActivity的重要部分：

```
public abstract class BaseActivity extends Activity { 

Context context = this.getApplicationContext(); 
final ActivityHelper mActivityHelper = ActivityHelper.createInstance(this, context);
    } 
```

但它给了我一个空指针异常。所以我认为这可能是因为抽象类。这是日志：

```
06-12 15:59:56.011: E/AndroidRuntime(1206): Caused by: java.lang.NullPointerException
06-12 15:59:56.011: E/AndroidRuntime(1206):     at   
android.content.ContextWrapper.getApplicationContext(ContextWrapper.java:101)
06-12 15:59:56.011: E/AndroidRuntime(1206):     at   
com.navayo.sec.voip.activities.BaseActivity.<init>(BaseActivity.java:35)
06-12 15:59:56.011: E/AndroidRuntime(1206):     at 
com.navayo.sec.voip.activities.MainActivity.<init>(MainActivity.java:43)
06-12 15:59:56.011: E/AndroidRuntime(1206):     at 
java.lang.Class.newInstanceImpl(Native Method)
06-12 15:59:56.011: E/AndroidRuntime(1206):     at   
java.lang.Class.newInstance(Class.java:1319)
06-12 15:59:56.011: E/AndroidRuntime(1206):     at 
android.app.Instrumentation.newActivity(Instrumentation.java:1023)
06-12 15:59:56.011: E/AndroidRuntime(1206):     at   
android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1870) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T13:47:53.213

有一个抽象类并不重要。

您有一个空指针，因为您的上下文为空，这意味着您的方法中的某处存在错误，如果没有要查看的代码，我无法为您提供更多帮助。

编辑：

```
public static ActivityHelper createInstance(Activity activity) { 
return UIUtils.isTablet(activity.getApplicationContext()); 
} 
```

这应该足够了。告诉我这是否有帮助。只是一个活动从上下文扩展，所以你甚至可以这样做：`UIUtils.isTablet(activity);`

现在另一个主题是您实际创建实例的方式，这无法从您的代码中分辨出来，活动以意图开始并具有生命周期，它们不能用构造函数构造。

编辑2：

您的问题出在以下代码中：

```
final ActivityHelper mActivityHelper = ActivityHelper.createInstance(this, context); 
```

此时活动尚未创建，因此您的上下文（“this”）为空。

您需要在 onCreate 中移动活动助手初始化。该活动的工作方式与其他类有点不同，最好也阅读更多关于活动生命周期的内容并查看更多示例（尝试 google :)）。

正确的情况是：

```
private ActivityHelper mActivityHelper;

protected void onCreate(Bundle savedInstanceState){
super(savedInstanceState);
// here do the initialization

mActivityHelper = ActivityHelper.createInstance(this);
.
.
.

} 
```

# synchronization - 对 pthread 互斥体所涉及的完整内存屏障的说明

> ID：10997636
> 
> 赞同：4
> 
> 时间：2012-06-12T13:23:48.967
> 
> 标签：synchronization, pthreads, mutex, memory-fences

我听说在处理互斥体时，必要的内存屏障由 pthread API 本身处理。我想了解更多关于这个问题的细节。

1.  这些说法是真的吗，至少在最常见的架构上是这样吗？
2.  编译器是否识别此隐式障碍，并在生成代码时避免重新排序操作/从本地寄存器读取？
3.  何时应用内存屏障：在成功获取互斥锁之后并在释放它之后？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T14:00:30.653

POSIX 规范列出了必须[“与其他线程同步内存”](http://pubs.opengroup.org/onlinepubs/9699919799/basedefs/V1_chap04.html#tag_04_11)的函数，其中包括 和 之类的`pthread_mutex_lock()`函数`pthread_mutex_unlock()`。

在[附录 A.4.11](http://pubs.opengroup.org/onlinepubs/9699919799/xrat/V4_xbd_chap04.html#tag_21_04_11)中详细说明了“同步内存”的功能：

*   ...必须被高级编译系统识别，以便内存操作和对这些函数的调用不会通过优化重新排序；和

*   ...可能必须添加内存同步指令，具体取决于特定的机器。

从来没有明确指定隐含什么样的内存同步指令 - 隐含的规范是，如果您使用一对“同步指令”来确保一个线程中的读取必须在另一个线程中的写入之后发生，那么您的程序将正确操作。这包括编译器和架构重新排序效果。

# java - java.net.UnknowHostException 与 ksoap2

> ID：10997640
> 
> 赞同：0
> 
> 时间：2012-06-12T13:24:05.457
> 
> 标签：java, android, web-services, ksoap

我正在 Android 上使用 KSoap 迈出第一步（我正在将 iOS 应用程序移植到 Android）

调用 WS 时出现异常

```
06-12 15:20:29.430: W/System.err(11912): java.net.UnknownHostException: www.mywebsite.com 
```

我很确定主机是可访问的，并且我在具有互联网功能的真实 android 设备上收到此错误。

任何想法为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T13:28:36.767

您还没有添加 INTERNET 权限：

```
<uses-permission android:name="android.permission.INTERNET" /> 
```

或者

您的网址没有主机段：应该像“http://www.mysite.com

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T13:25:33.247

签入您的清单文件以获得 Internet 权限

```
<uses-permission android:name="android.permission.INTERNET" /> 
```

如果它不可用，然后像这样添加它

```
<manifest
    xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.android.samplesync"
    android:versionCode="yourversion code"
    android:versionName="your version name">
     <uses-permission android:name="android.permission.INTERNET" />
     .

     .
     .
 </manifest> 
```

# wcf - 在 .Net 2 中使用 WCF 时，int 属性为 0

> ID：10997647
> 
> 赞同：6
> 
> 时间：2012-06-12T13:24:35.113
> 
> 标签：wcf

我在.Net 4 中有一个带有BasicHttpBinding 的WCF 服务的MVC 项目。

在 .Net 2 中使用此服务时，如果属性为 int，则到达的值为 0。

如果它是一个字符串，那就没问题了。

在 .Net 4 中构建一个新项目，使用相同的服务并使用确切的实现（如 .Net 2）==> int 值是正确的。

为什么？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-12T13:55:50.577

我打赌你有一个具有实际`int`属性的数据合同：

```
public int YourProperty ...... 
```

以及`YourPropertySpecified`旁边的一个属性：

```
public bool YourPropertySpecified ...... 
```

由于 an`int`不能为空，WCF 无法区分您是否定义了一个值 - 您需要告诉它。

因此，如果您使用一个`int`属性并为其设置一个值 - 您**还**需要将其随附`YourPropertySpecified`属性设置为 true：

```
yourData.YourProperty = 42;
yourData.YourPropertySpecified = true; 
```

通过这个额外的步骤，`int`值应该可以很好地到达服务器

# iphone - Xcode 添加一个 ViewController 到 Tap bar

> ID：10997650
> 
> 赞同：0
> 
> 时间：2012-06-12T13:24:44.337
> 
> 标签：iphone, xcode, ios5, xcode4, xcode4.2

我正在创建一个 Tapped 应用程序，目前我必须这样做，`ViewControllers`但我想要四个，但我不确定如何将一个添加`ViewController`到 Tapped 应用程序中，我在设计中添加了两个。它只是我如何连接到一个轻敲的酒吧`ViewControler`

非常感谢高级。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T13:33:01.853

![在此处输入图像描述](../Images/70691af23ba7b331270534109a3a0484.png)如果我没有被误解，那么您想在您的选项卡式应用程序中再添加两个视图控制器。如果您使用的是 nib。然后只需将两个选项卡栏项拖到 xib 中，并在类标签的自定义类部分下的属性中提供您要显示的视图控制器名称。

# python - 仅使用 python 制作的简单游戏

> ID：10997651
> 
> 赞同：1
> 
> 时间：2012-06-12T13:24:52.463
> 
> 标签：python, graphics

我最近才开始学习python。我仍然会被认为是初学者。有谁知道我可以只使用 python 或 python turtle 制作的任何简单游戏。我还没有使用 pygame 或 tkinter 的经验。游戏不需要使用图形。例如，我最近的一个游戏是试图猜测一个随机单词的字母。简单的游戏。有点像刽子手。我会考虑所有答案。谢谢 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T13:29:18.467

我想到的两个是井字游戏和更高或更低

# python - python - TKinter - 我可以将背景发送回吗？

> ID：10997654
> 
> 赞同：2
> 
> 时间：2012-06-12T13:24:57.933
> 
> 标签：python, tkinter

我是编程和 python 的新手，所以我提前感谢您的耐心等待。

我创建了一个类，它创建一个带有测试图像的新窗口作为它的背景（“test1.gif”）。

我还在同一类中创建了一个下拉菜单，可让您在 3 个国家/地区之间进行选择。

我可以注释掉制作背景的代码或制作菜单的代码，另一个将显示。但是我希望菜单出现在背景之上。当我运行完整的代码时，我只看到背景。

我很感激我可能在这里遗漏了一些非常明显的东西，如果有人可以指出那是什么。

谢谢你的时间。担

```
from Tkinter import *
import Tkinter as tk

class dropDown():

    def __init__(self, master):

        #background set_up
        image1 = tk.PhotoImage(file="test1.gif")
        w = image1.width()
        h = image1.height()
        root.geometry("%dx%d+0+0" % (w, h))
        panel1 = tk.Label(root, image=image1)
        panel1.pack(side='top', fill='both', expand='yes')

        # save the panel's image from 'garbage collection'
        panel1.image = image1

        #Drop down menu
        self.var = StringVar(master)
        self.var.set('Alaska') # initial value

        #Have not used countries list just pasted
        self.option = OptionMenu(master, self.var, 'Alberta', 'Australia')
        self.option.pack()

root = Tk()
root.title('drop down test')
dropDown(root)
mainloop() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T13:57:49.937

（我认为）您的问题是您将根窗口的大小限制为图像的大小（而不是 sizeof(image)+sizeof(menu)）。这解决了我在 OS-X 上的问题。

```
import Tkinter as tk

class dropDown():
    def __init__(self, master):

        #background set_up
        image1 = tk.PhotoImage(file="test.gif")
        w = image1.width()
        h = image1.height()
        panel1 = tk.Label(root, image=image1)
        panel1.pack(side='top', fill='both', expand='yes')

        # save the panel's image from 'garbage collection'
        panel1.image = image1

        #Drop down menu
        self.var = tk.StringVar(master)
        self.var.set('Alaska') # initial value

        #Have not used countries list just pasted
        self.option = tk.OptionMenu(master, self.var, 'Alaska','Alberta', 'Australia')
        self.option.pack()

        geomstr="%dx%d+0+0" % (w, panel1.winfo_reqheight()+self.option.winfo_reqheight())
        root.geometry(geomstr)

root = tk.Tk()
root.title('drop down test')
dropDown(root)
root.mainloop() 
```

附带说明，让您的 dropDown 从 Frame 继承然后调整 Frame 的大小非常容易（尽管可能没有必要）。然后，您可以将此小部件移动到 GUI 上任何您想要的位置。

**编辑**

子类框架：

```
import Tkinter as tk

class dropDown(tk.Frame):
    def __init__(self, master):
        tk.Frame.__init__(self,master)

        #background set_up
        image1 = tk.PhotoImage(file="test.gif")
        panel1 = tk.Label(root, image=image1)
        panel1.pack(side='top', fill='both', expand='yes')

        # save the panel's image from 'garbage collection'
        panel1.image = image1

        #Drop down menu
        self.var = tk.StringVar(master)
        self.var.set('Alaska') # initial value

        #Have not used countries list just pasted
        self.option = tk.OptionMenu(master, self.var, 'Alaska','Alberta', 'Australia')
        self.option.pack()

root = tk.Tk()
root.title('drop down test')
d=dropDown(root)
d.pack(side='top',fill='both',expand='yes')
root.mainloop() 
```

请注意，现在 Tkinter/TK 会为您处理所有帧大小调整。:)

# php - Wordpress youtube 插件 - 将提要从频道更改为收藏夹（需要 PHP Guru）

> ID：10997656
> 
> 赞同：1
> 
> 时间：2012-06-12T13:25:02.620
> 
> 标签：php, wordpress, api, youtube

我不是 Wordpress 的新手，而是 PHP 的新手。我已经设法让插件正常工作（缩略图等），但我似乎无法将默认提要从默认的 youtube 频道更改为我的最爱。我在 /core/parse.php 的第 268 行发现了一个帖子，其中开发人员说要编辑 url 提要，如下所示：

```
 'url' => 'http://gdata.youtube.com/feeds/api/users/'.$v.'/uploads?orderby=published&max-results='.$z.'&start-index='.$i, 
```

我搜索了谷歌高低，我发现了这个：

[https://gdata.youtube.com/feeds/api/users/default/favorites](https://gdata.youtube.com/feeds/api/users/default/favorites)

并尝试了它的不同变体。0 个视频已导入。

[http://wordpress.org/extend/plugins/automatic-youtube-video-posts/](http://wordpress.org/extend/plugins/automatic-youtube-video-posts/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T14:17:21.450

根据此网址：[https ://developers.google.com/youtube/2.0/developers_guide_protocol_favorites](https://developers.google.com/youtube/2.0/developers_guide_protocol_favorites)

正确的代码是

```
 'url' => 'http://gdata.youtube.com/feeds/api/users/'.$v.'/favorites?orderby=published&max-results='.$z.'&start-index='.$i, 
```

# java - 在新文本加载时重置 TextView 位置（可滚动）

> ID：10997669
> 
> 赞同：3
> 
> 时间：2012-06-12T13:25:45.943
> 
> 标签：java, android, scroll, textview

我的页面加载了一个可滚动的 TextView。不幸的是，当将新文本加载到视图中时，该位置似乎粘住了，因此文本出现在屏幕外或完全不可见。有没有办法将当前“查看”的文本重置为顶部？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-12T13:34:14.177

TextView 确实有一个从 View 继承的方法，您可以使用它，称为`scrollTo(x,y)`

所以简单地说：

```
myTextView.scrollTo(0,0) 
```

# c# - 反转 Open 方法中的保存方法

> ID：10997671
> 
> 赞同：0
> 
> 时间：2012-06-12T13:25:50.777
> 
> 标签：c#, arrays, serialization, dictionary, json.net

对编程相当陌生。我只是想不通如何让它反向工作。我有一个保存方法和一个打开方法。节省：

```
IDictionary<string, IDictionary<string, object>> pluginStates = new Dictionary<string, IDictionary<string, object>>();
signaller.RaiseSaveRequest(pluginStates); <--goes out and gets packed plugins

//loop through plugins to get values and types
//holds all of the plugin arrays
Dictionary<string, object> dictProjectState = new Dictionary<string, object>();

foreach (KeyValuePair<string,IDictionary<string,object>> plugin in pluginStates)
{ 
    //holds jsonRepresented values
    Dictionary<string, object> dictJsonRep = new Dictionary<string, object>(); 
    //holds object types
    Dictionary<string, object> dictObjRep = new Dictionary<string, object>(); 
    object[] arrayDictHolder = new object[2];  //holds all of the dictionaries
    string pluginKey = plugin.Key;
    IDictionary<string, object> pluginValue = new Dictionary<string, object>(); 
    pluginValue = plugin.Value;

    foreach (KeyValuePair<string, object> element in pluginValue)
    {
        string jsonRepresentation = JsonConvert.SerializeObject(element);
        object objType = element.Value.GetType().ToString();
        dictJsonRep.Add(element.Key, jsonRepresentation);
        dictObjRep.Add(element.Key, objType);
    }
    arrayDictHolder[0] = dictJsonRep;
    arrayDictHolder[1] = dictObjRep;
    dictProjectState.Add(pluginKey, arrayDictHolder);
}

JsonSerializer serializer = new JsonSerializer();
using (StreamWriter sw = new StreamWriter(strPathName))
using (JsonWriter writer = new JsonTextWriter(sw))
{
     serializer.Serialize(writer, dictProjectState);
} 
```

因此，当有人保存时，事件处理程序会发出并获取每个插件的 packedState，并将其添加到字典 pluginStates 中。然后，我遍历 pluginStates 中的每个插件，将值的键和 json 字符串版本添加到 1 个字典，将键、对象类型添加到另一个字典，将这两个字典添加到数组中，然后打包一个包含pluginKey 和每个插件的数组。推理：在反序列化时，我遇到了从 JArray 到类型 DataTable 以及字典中的其他类型的问题，这些类型在打开时被传递回插件以解压。我试图弄清楚如何扭转这一点，以便当用户打开项目时，我有 dictProjectState 并且需要通过代码将它一直带回以最终得到 1 个包含插件的字典。我如何在公开场合镜像这个保存？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T13:54:30.360

我相信当你在 open 函数中反序列化时，你应该得到一个可以转换为`Dictionary<string, object>`.

该字典的键将是您最终字典中插件的名称（yoru save 方法中的插件键）。值应该是`object[] arrayDictHolder`对象。您可以将它们转换为`object[]`然后获取内部的两个值（保存函数中的 dictJsonRep 和 dictObjRep）。

一旦这些值都转换为`Dictionary<string, object>()`，您可以遍历其中一个中的 KeyValuePairs，并使用这些对中的键来获取另一个字典中的值存储。

代码将类似于以下内容：

```
var pluginStates = new Dictionary<string, IDictionary<string, object>>();

var dictProjectState = jsonSerializer.Deserialize(reader) as Dictionary<string, object>;

foreach(var projectStatePair in dictProjectState)
{
    string pluginKey = projectStatePair.Key;
    var pluginValues = new Dictionary<string, object>();
    object[] arrayDictHolder = projectStatePair.Value as object[];
    var dictJsonRep = arrayDictHolder[0] as Dictionary<string, object>;
    var dictObjRep =  arrayDictHolder[1] as Dictionary<string, object>;
    foreach(var JsonRepPair in dictJsonRep)
    {
        string jsonRepresentation = JsonRepPair.Value;
        // We know both dictionaries have the same keys, so
        // get the objType for this JsonRepresentation
        object objType = dictObjRep[JsonRepPair.Key];
        // Since you're serializing objType to a string, you'll need
        // to get the actual Type before calling DeserializeObject.
        Type jsonType = System.Type.GetType(objType as string);
        object value = JsonConvert.DeserializeObject( jsonRepresentation, jsonType );
        pluginValues.Add( JsonRepPair.Key );
    }
    pluginStates.Add( pluginKey, pluginValues );
} 
```

**注意：**您当前`element.Value.GetType().ToString();`在保存函数中将 objType 设置为。`element.Value.GetType();`在尝试反序列化之前，您将需要更新 save() 以将其设置为或将类型字符串转换回实际类型。

**注意：**我对 Json 库不是很熟悉。上面的代码专注于从反序列化的结果中创建你的 pluginStates 字典。您将需要处理 JsonSerializer 的创建，并确保在反序列化它们后关闭所有流。您可能还需要调整实际的反序列化调用以获得所需的结果。

**更新：**添加了 objType 到实际 System.Type 对象的转换。

# mysql - 使用 BETWEEN 子句的 MySQL SELECT 语句的 Big-O 复杂度是多少？

> ID：10997672
> 
> 赞同：2
> 
> 时间：2012-06-12T13:25:52.493
> 
> 标签：mysql, select, innodb, big-o, between

我对以下 MySQL 查询的理论 Big-O 分析感兴趣：

```
SELECT id, value FROM MyTable WHERE lat BETWEEN %s AND %s AND lon BETWEEN %s AND %s; 
```

特别是，我想知道 BETWEEN 子句如何影响此查询的复杂性。

* * *

MySQL版本是5.1

MyTable 定义：

```
CREATE TABLE MyTable (
    id VARCHAR(255) NOT NULL UNIQUE, \
    value DECIMAL(12,9) NOT NULL, \
    lat DECIMAL(9,6), \
    lon DECIMAL(9,6), \
PRIMARY KEY(id(50)), \
INDEX(lat, lon)) ENGINE=InnoDB;

Describe MyTable;
+----------+---------------------+------+-----+---------+-------+
| Field    | Type                | Null | Key | Default | Extra |
+----------+---------------------+------+-----+---------+-------+
| id       | varchar(255)        | NO   | PRI | NULL    |       |
| value    | decimal(12,9)       | NO   |     | NULL    |       |
| lat      | decimal(9,6)        | YES  | MUL | NULL    |       |
| lon      | decimal(9,6)        | YES  |     | NULL    |       |
+----------+---------------------+------+-----+---------+-------+

EXPLAIN EXTENDED SELECT id, value FROM MyTable WHERE lat BETWEEN '40' AND '60' AND lon BETWEEN '-10' AND '10';
+----+-------------+------------+------+---------------+------+---------+------+------+----------+-------------+
| id | select_type | table      | type | possible_keys | key  | key_len | ref  | rows | filtered | Extra       |
+----+-------------+------------+------+---------------+------+---------+------+------+----------+-------------+
|  1 | SIMPLE      | MyTable    | ALL  | lat           | NULL | NULL    | NULL |    7 |    42.86 | Using where |
+----+-------------+------------+------+---------------+------+---------+------+------+----------+-------------+ 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T14:17:00.950

`type = ALL`表示此查询对表执行全盘扫描。`key = NULL`表示不使用索引。在这种情况下是`O(n)`，其中`n`是行数。

至于`BETWEEN`，它与执行两个比较操作（`>=`和`<=`）相同。如果这些是在索引上执行的（在 MySQL 中是[B-Trees](http://en.wikipedia.org/wiki/B-tree)），那么它`O(log n)`在平均情况和最坏情况下都是如此。因为 B-Tree 按顺序存储值，所以范围搜索之类的东西非常快。

正如我所知道的二级索引，InnoDB 将主 ID 与二级索引值一起存储，所以如果你这样做`SELECT id FROM MyTable WHERE lat ... AND lon ...`（仅选择`id`），它甚至不会查看实际行的内部。

在此处了解更多信息：

*   [http://dev.mysql.com/doc/refman/5.1/en/explain-output.html](http://dev.mysql.com/doc/refman/5.1/en/explain-output.html)
*   [http://dev.mysql.com/doc/refman/5.1/en/mysql-indexes.html](http://dev.mysql.com/doc/refman/5.1/en/mysql-indexes.html)

对于您的情况，我建议您（分别）在 lat 和 lon 字段上设置一些索引，并尝试最适合您的数据的索引。也许甚至值得添加额外的字段，这些字段将包含 roded lat 和 lon 值（作为 SMALL INT）以加快索引速度 - 在这种情况下，您可以在该字段上添加多列索引。

# android - 在 webview 内的 HTML 内分层

> ID：10997678
> 
> 赞同：6
> 
> 时间：2012-06-12T13:26:24.177
> 
> 标签：android, html, webview

我有一个 html 资产，这要归功于 android 中的 webview。使用当前浏览器显示良好，但使用较旧的浏览器（例如 Android 2.1）与您在图像中看到的一样。

![我的应用的第一张图片](../Images/2ba35aa4d98a53726ab38a130b20f740.png)![失败](../Images/41025f9ebf07bbf2624aca4ae329fabe.png)

我把代码放在以防有人想看。
**HTML**

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>Documento sin título</title>
    <script>
        function show(divactual,textactual) {
            if(document.getElementById(divactual).style.display == "block"){
                document.getElementById(divactual).style.display = "none";
                document.getElementById(textactual).innerHTML = "show details...";

                }
            else if(document.getElementById(divactual).style.display == "none"){
                document.getElementById(divactual).style.display = "block";
                document.getElementById(textactual).innerHTML = "hidden details...";
                }
        }
    </script>   
    <style type="text/css">
        body{
            background-color:transparent;
            font-family: Verdana, Geneva, sans-serif;
            font-size: 1.0em;
            font-style: normal;
            color:#999999;
            margin:10px;
        }
        body a{
            color:#0CF;
            text-decoration:none;
        }
        #bg {
            z-index: -14;
            width: 100%;
        }
        #letrapequena {
            font-family: Verdana, Geneva, sans-serif;
            font-size: 0.6em;
            color: #00537c;
        }
        #tituloseccion{
            font-family: Verdana, Geneva, sans-serif;
            font-size: 1.5em;
            font-style: normal;
            font-weight: bold;
            color:#7AB800;
        }
        #headtwo{
            font-family: Verdana, Geneva, sans-serif;
            font-size: 1.2em;
            font-style: normal;
            font-weight: bold;
            color:#7AB800;
        }
        #headthree{
            font-size: 1.1em;
            font-style: normal;
            font-weight:bold;
            color:#00537C;
        }
        #container{
            background-color:#D8F7FE;
            margin:10px 0;
            color:#00537c;
            font-weight:bold;
        }
    </style>
  </head>
  <body style="background-color:transparent;">
    <div id="tituloseccion">
        Titleone
    </div>
    <hr align="left" width="90%" size="0.1em" color="#999999">
    <div id="headtwo">titletwo</div>
    <div id="bigcontainer" style="display:block;">
        <div id="headthree">titlethree</div>
        <div id="generalcont" style="display:block;">
            <div id="container" style="display:block;">
                <div style="display:inline">parrone&nbsp;&nbsp;&nbsp;</div>
                <div style="display:inline;">
                    <a href="javascript:show('info1','text1');" id="text1">show datails...</a>
                </div>
            </div>
            <div  id="info1" style="display:none;" >
                text text text text text text text text 
            </div>
         </div>

        <div id="generalcont" style="display:block;">
            <div id="container" style="display:block;">
                <div style="display:inline">parrtwo&nbsp;&nbsp;&nbsp;&nbsp;</div>
                <div style="display:inline;">
                    <a href="javascript:show('info2','text2');" id="text2">show details...</a>
                </div>
            </div>
            <div  id="info2" style="display:none;" >
                text text text text text text text 
            </div>
        </div>
    </div>
    <div id="letrapequena" style="display:block;">
                text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text text 
            </div>
  </body>
</html> 
```

**JAVA**

```
 package es.ibys.prueba.webview;

import android.app.Activity;
import android.graphics.Color;
import android.os.Bundle;
import android.webkit.WebView;

public class PruebawebviewActivity extends Activity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        WebView myWview = (WebView) findViewById(R.id.webview);

        String miurl = "file:///android_asset/index2.htm";
        myWview.getSettings().setJavaScriptEnabled(true);
        myWview.setBackgroundColor(Color.TRANSPARENT);
        myWview.loadUrl(miurl);
    }
} 
```

我不知道如何解决它。我试过改变图层、css、div、样式……我想到的一切。有人发生了吗？你是怎么管理的？请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T14:06:26.583

你确定这不是你的JS的问题吗？

这是你的代码的小提琴：http: [//jsfiddle.net/8wsvu/](http://jsfiddle.net/8wsvu/)

纯JS中的`show()`函数是Android函数，还是应该是JS？我在 JS 中还不够好，无法知道它是否是，但是谷歌搜索它没有结果，因为它是一个 JS 函数。

我对它为什么分层错误的第二个猜测是因为`div`'s 绝对位于彼此之上。

如果您可以使用 jQuery 来显示和隐藏页面上的元素，这会简单得多。

# asp.net-mvc - 表单发布后如何保存 ViewBag 数据？

> ID：10997681
> 
> 赞同：8
> 
> 时间：2012-06-12T13:26:35.990
> 
> 标签：asp.net-mvc, asp.net-mvc-3, razor, viewbag

所以我有一个`ViewBag.Something`，这个数据是随机生成的。在我看来，我将它设置为这样的标签`@Html.LabelFor(m => m.Something, (string)ViewBag.Something)`。这很好，但是当我提交表单时可能会出现错误，如果有错误，我需要这个标签保持不变，我不再想要动态/随机数据，所以我不会调用生成的控制器方法这个 ViewBag。有没有办法在我的控制器中没有一些私有变量的情况下保留这个值？MVC/Razor 的一些好方法？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-12T13:47:51.450

选项1：

使用路由值将“ViewBag.Something”的值传递给控制器​​：

```
@Html.ActionLink("ButtonText", "ActionName", new { Something = @ViewBag.Something }) 
```

选项 2：您可以使用**TempData**。

```
public ActionResult Index()
{
 var Something = "YOURVALUE";
 TempData["Something"] = Something;
.......
}

public ActionResult OtherAction()
{
    var Something = TempData["Something "];
    ...........
} 
```

**在动作方法之间传递状态**

操作方法可能必须将数据传递给另一个操作，例如，如果在发布表单时发生错误，或者该方法必须重定向到其他方法，例如当用户被定向到登录视图然后返回到原来的动作方法。

动作方法可以在调用控制器的 RedirectToAction 方法调用下一个动作之前将数据存储在控制器的 TempDataDictionary 对象中。TempData 属性值存储在会话状态中。在设置 TempDataDictionary 值之后调用的任何操作方法都可以从对象中获取值，然后处理或显示它们。TempData 的值会一直存在，直到它被读取或会话超时。以这种方式持久化 TempData 可以实现重定向等场景，因为 TempData 中的值在单个请求之外可用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T18:18:08.320

在 get 中，设置一个模型，动态设置它，并在`return view()`执行时执行`return view(model)`. 然后在视图中，设置一个隐藏字段，可以继续传递所需的值。我选择走这条路是因为我不必担心任何服务器代码来使这项工作在帖子上运行，而且我不必担心任何会话。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2016-05-17T12:32:57.853

发布后在 viewbag 中显示消息（我使用此方法）

```
ActionResult SubmitUser(){

  ViewBag.Msg =TempData["Msg"];

  return view();
}

[HtttpPost]
ActionResult SubmitUser(){

 TempData["Msg"] ="Submitted Successfully"];

  return view();
} 
```

值是发送到获取方法..

# java - spring集成中的几个任务执行器

> ID：10997682
> 
> 赞同：1
> 
> 时间：2012-06-12T13:26:41.917
> 
> 标签：java, multithreading, spring, spring-aop, spring-integration

我目前正在从事一个涉及许多独立运行的异步任务的项目。我有一个弹簧配置文件。

```
<task:executor id="taskScheduler" pool-size="5-20">
<task:executor id="specificTaskScheduler" pool-size="5-50" queue-capacity="100">

<!-- integration beans and 
     several object pools, with a total number of 100 beans created 
     using CommonsPoolTargetSource --> 
```

我专门创建了两个执行器 - 一个用于 Spring 集成需求和自定义执行器，以便它仅运行我的任务，将其提供给具有显式引用的集成 bean。之后，我提供了一个需要处理的长时间运行的任务。我的 EAR 在 WebLogic 上运行，我转储了正在运行的线程的堆栈跟踪，并且非常失望地发现我的自定义执行程序中的 50 个线程中的大多数都在执行程序的队列中等待对象从池中可用。我不希望 CommonsPoolTargetSource 将我的执行程序用作管理其来源的平台。我可以在这里做什么？也许用 CommonsTargetSource bean 创建一个单独的 spring 文件可以解决它？谢谢你的任何想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T08:43:18.610

多谢你们。结果证明池不是问题，我只需要向它添加更多实例并稍微增加池大小，队列容量设置为零，拒绝策略设置为在调用者线程中执行调用。不过，我还没有在重负载下对其进行测试。

# vb.net - 无法将属性绑定到列

> ID：10997683
> 
> 赞同：1
> 
> 时间：2012-06-12T13:26:49.267
> 
> 标签：vb.net, datasource

我正在尝试在文本框中显示您选择的“收件人”的序列号，但出现此错误：

```
System.ArgumentException: Cannot bind to the property or column RecipientSNo on the DataSource. 
```

我用不同的查询（相同的代码，只是将列名从'recipient'更改为'issuer'）对另一个文本框执行此操作，只是为了调试并且它可以工作！我再次向“收件人”尝试了它，但它仍然不起作用；不起作用。我的代码：

```
 query("SELECT RecipientSNo FROM Recipient WHERE CONCAT(FirstName, ' ', MI, '. ', LastName) = '" & ReceiverName.Text & "';")
    Try
        adapter = New MySqlDataAdapter(CommandText, ServerString)
        table = New DataTable
        Dim ds As New DataSet
        Dim bs As BindingSource
        adapter.Fill(ds, "recipient")
        bs = New BindingSource(ds, "recipient")
        DataBindings.Clear()
        ReceiverSNo.DataBindings.Add("text", bs, "ReceipientSNo")
    Catch ex As Exception
        MsgBox(ex.ToString)
    End Try
    disconnect() 
```

* * *

这是来自“发行者”的代码，它正在工作：

```
 query("SELECT IssuerSNo FROM Issuer WHERE CONCAT(FirstName, ' ', MI, '. ', LastName) = '" & IssuerName.Text & "';")
    Try
        adapter = New MySqlDataAdapter(CommandText, ServerString)
        table = New DataTable
        Dim ds As New DataSet
        Dim bs As BindingSource
        adapter.Fill(ds, "armorer")
        bs = New BindingSource(ds, "armorer")
        IssuerSNo.DataBindings.Clear()
        IssuerSNo.DataBindings.Add("text", bs, "ArmorerSNo")
    Catch ex As Exception
        MsgBox(ex.ToString)
    End Try
    disconnect() 
```

我刚刚处理了这段代码并更改了文本框和列名，但它已经不起作用了.. 似乎是什么问题？我已经仔细检查了我的表名和列名。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T13:47:47.663

我认为你应该写

```
ReceiverSNo.DataBindings.Clear()         
ReceiverSNo.DataBindings.Add("text", bs, "RecipientSNo") 
```

`RecipientSNo`从您的查询返回的列称为
DataBindings.Add 使用`ReceipientSNo`

# jquery - 是否可以在自定义选择菜单上禁用默认的“弹出”过渡？(jQuery 移动)

> ID：10997688
> 
> 赞同：2
> 
> 时间：2012-06-12T13:26:57.783
> 
> 标签：jquery, jquery-mobile

如标题所示：是否可以在自定义选择菜单上禁用默认的“弹出”过渡？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T14:31:31.343

参考jQuery mobile 的[全局配置选项：](http://jquerymobile.com/demos/1.1.0/docs/api/globalconfig.html)

```
$(document).bind("mobileinit", function(){
    $.mobile.defaultPageTransition = "none"; // Or whichever transition you want
}); 
```

# c# - 为什么自动缩放/滚动不适用于我的图表？

> ID：10997701
> 
> 赞同：2
> 
> 时间：2012-06-12T13:27:23.600
> 
> 标签：c#, .net, winforms, mschart

简而言之，我检查了Microsoft 提供的**“WinFormsChartSamples” 。**我想知道的是如何为 Chartcontrols 启用缩放和滚动。那里显示的示例很短。

```
using System.Windows.Forms.DataVisualization.Charting;
...

// Set automatic zooming
chart1.ChartAreas["Default"].AxisX.ScaleView.Zoomable = true;
chart1.ChartAreas["Default"].AxisY.ScaleView.Zoomable = true;

// Set automatic scrolling 
chart1.ChartAreas["Default"].CursorX.AutoScroll = true;
chart1.ChartAreas["Default"].CursorY.AutoScroll = true;

... 
```

我试过了，什么也没发生，没有缩放也没有滚动。我尝试了两件事：

1.  在 Form1.Designer.cs 中，我将该信息添加到图表中。

    ```
     chartArea1.Name = "ChartArea1";
        chartArea1.CursorX.AutoScroll = true;
        chartArea1.CursorY.AutoScroll = true;

        chartArea1.AxisX.ScaleView.Zoomable = true;
        chartArea1.AxisY.ScaleView.Zoomable = true;

        this.chart1.ChartAreas.Add(chartArea1);
        this.chart1.Cursor = System.Windows.Forms.Cursors.Cross;
        legend1.Name = "Legend1";
        this.chart1.Legends.Add(legend1);
        this.chart1.Location = new System.Drawing.Point(297, 62);
        this.chart1.Name = "chart1";
        series1.ChartArea = "ChartArea1";
        series1.Legend = "Legend1";
        series1.Name = "Series1";
        this.chart1.Series.Add(series1);
        this.chart1.Size = new System.Drawing.Size(963, 668);
        this.chart1.TabIndex = 6;
        this.chart1.Text = "chart1"; 
    ```

2.  我尝试将其直接添加到 Form1.cs 中的构造函数中。

也许值得一提的是，我正在使用 OpenFileDialog 向系列中添加数据：

```
private void openToolStripMenuItem_Click(object sender, EventArgs e)
        {

            Stream fileStream = null;
            OpenFileDialog fDialog = new OpenFileDialog();
            fDialog.Title = "Open File..";
            //First the description of the file separated by "|"
            fDialog.Filter = "((ASC files)| *.asc";
            fDialog.InitialDirectory = @"C:\";

            //Show Messagebox if the file was loaded (Source: MSDN - FileDialog.FilterProperty)
            if (fDialog.ShowDialog() == DialogResult.OK)
            {
                MessageBox.Show("The File was loaded successfully.");

                try
                {
                    if ((fileStream = fDialog.OpenFile()) != null)
                    {
                        using (fileStream)
                        {
                            //Insert code for reading the stream here.
                            Spectrum newSpectrum = new Spectrum(chart1.Series.Count, fDialog.FileName,
                               fDialog.SafeFileName, DataHandler.readSpectrumFromFile(fileStream));

                            addSpectrumToView(newSpectrum);

                        }
                    }
                }
                catch (Exception ex)
                {
                    MessageBox.Show(ex.Message);
                }

            }
        } 
```

欢迎任何建议，提前谢谢，

BC++

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T20:29:09.770

我认为您实际上是在寻找这个：

```
chart1.ChartAreas["Default"].CursorX.IsUserSelectionEnabled = true;
chart1.ChartAreas["Default"].CursorY.IsUserSelectionEnabled = true; 
```

与您已经拥有的东西结合使用应该可以很好地工作，应该如下所示：

```
// Set automatic zooming
chart1.ChartAreas["Default"].AxisX.ScaleView.Zoomable = true;
chart1.ChartAreas["Default"].AxisY.ScaleView.Zoomable = true;

// Set automatic scrolling 
chart1.ChartAreas["Default"].CursorX.AutoScroll = true;
chart1.ChartAreas["Default"].CursorY.AutoScroll = true;

// Allow user selection for Zoom
chart1.ChartAreas["Default"].CursorX.IsUserSelectionEnabled = true;
chart1.ChartAreas["Default"].CursorY.IsUserSelectionEnabled = true; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T11:44:05.753

看看这里： http: [//archive.msdn.microsoft.com/mschart](http://archive.msdn.microsoft.com/mschart)那里有一个例子，它可以进行缩放/滚动等等！:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-13T15:09:25.373

要启用轻松缩放，请添加轨迹栏并使用它进行缩放：

```
 private void trackBar1_Scroll(object sender, EventArgs e)
    {
        chart1.ChartAreas[0].AxisX.ScaleView.Size = trackBar1.Maximum - trackBar1.Value;
        chart1.ChartAreas[1].AxisX.ScaleView.Size = trackBar1.Maximum - trackBar1.Value;
        (etc for however many chart areas you have)
    } 
```

“最大值 - 值”是为了使轨迹栏值越高，显示的点越少（放大缩小）

并确保在设计器中将“chart1->ChartAreas->Axes->（无论哪个轴）->scaleview->zoomable”设置为 true

当数据点超过轴的 scaleview 大小时，通常会出现滚动条，如果它已设置（如果保留在“自动”，滚动不会真正可靠地工作），如果没有，设置它，如果滚动条没有出现，可以再次使用轨迹栏：

```
 private void trackBar2_ValueChanged(object sender, EventArgs e)
    {
        chart1.ChartAreas[0].AxisX.ScaleView.Position = trackBar2.Value;
        chart1.ChartAreas[1].AxisX.ScaleView.Position = trackBar2.Value;
        (etc for however many chart areas you have)
    } 
```

确保将跟踪栏中的“最大值”设置为一个不错的高数字（例如 5000），并将“值”设置为您希望加载的值。

尚未注意到“trackBar_Scroll”和“trackBar_ValueChanged”之间有太多区别，除了“ValueChanged”在程序或用户鼠标单击移动轨迹栏时有效，而“Scoll”仅在用户鼠标单击移动时有效。

我错过了什么？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-18T07:02:29.933

我的用户不喜欢 mschart 缩放和滚动的标准行为。这就是为什么我实现了一个**基于鼠标的缩放/滚动，它在轴上使用拖动和鼠标滚轮**。

[源代码在这里：https://bitbucket.org/controlbreak/mschartfriend](https://bitbucket.org/controlbreak/mschartfriend)

它非常简单和简短，如果需要，您可以非常快速地更改它。

# c# - 即使cookie是在另一个应用程序中创建的，如何检查它是否存在？（使用 JS 或 C#）

> ID：10997715
> 
> 赞同：4
> 
> 时间：2012-06-12T13:28:15.410
> 
> 标签：c#, javascript, asp.net-mvc-3, cookies, httpcookie

我有几个应用程序，其中一个是管理身份验证的中央应用程序，其中一个`LogOn`页面作为一个导入`IFrame`到其他应用程序。

当`userName`and`password`正确时，我创建一个名为`userInfo`.

现在，在当前应用程序中，我想检查 cookie 是否`userInfo`存在。我想我应该检查它是否存在于浏览器中（在客户端）。

这一定是可能的，那我该怎么做呢？

提前致谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-12T14:54:47.333

Cookie 不能跨域共享。如果您的应用程序不是托管在同一个域上，您必须忘记这一点。它不起作用，因为浏览器（出于明显的安全原因）不会跨域发送 cookie。还有其他方法可以实现跨域单点登录（请参阅我的答案的第二部分）。

现在让我们假设您的应用程序位于同一个域中，并且您有多个应用程序分布在根域的不同子域中：

*   login.foo.com
*   app.foo.com
*   xxx.foo.com

并且您想在这些子域之间共享身份验证。您所要做的就是指定将`domain`web.config 中的属性设置为根域：

```
<authentication mode="Forms">
  <forms
    loginUrl="https://login.foo.com"
    requireSSL="true"
    protection="All"
    timeout="120"
    domain="foo.com"
    slidingExpiration="false"
    name="sso" />
</authentication> 
```

应将相同的配置应用于`web.config`所有应用程序。这几乎就是您需要做的所有事情。一旦用户在其中一个子域上通过身份验证，由于 cookie 可以跨子域共享这一事实，他将自动在其他子域上进行身份验证。

* * *

如果要实现跨域单点登录，则必须采用不同的方法。您可以在不同应用程序之间使用相同的[机器密钥来加密身份验证令牌。](http://msdn.microsoft.com/en-us/library/ff649308.aspx)以下是步骤：

1.  用户导航到`https://foo.com`并显示登录屏幕，因为他尚未在此域上进行身份验证。
2.  用户进行身份验证，并发出一个身份验证 cookie，该 cookie 对`foo.com`域有效。
3.  现在，用户需要转到`https://bar.com`此域并在此域上自动进行身份验证。在某些页面上，`https://foo.com`您可以创建一个包含要发布的身份验证 cookie 值的表单：

    ```
    <form action="https://bar.com" method="post">
        <input type="hidden" name="token" value="PUT THE VALUE OF THE AUTHENTICATION COOKIE HERE" />
        <button type="submit">Go to bar.com</button>
    </form> 
    ```

4.  用户将身份验证 cookie 提交给`bar.com`. 接收此表单提交的脚本读取已发布的身份验证令牌值，并使用该[`FormsAuthentication.Decrypt`](http://msdn.microsoft.com/en-us/library/system.web.security.formsauthentication.decrypt.aspx)方法解密身份验证票并读取用户名。由于两个应用程序都`foo.com`使用`bar.com`相同的机器密钥，因此在 foo.com 上加密的票证将被 bar.com 成功解密
5.  `bar.com`从令牌中提取经过身份验证的用户名的脚本，它发出一个表单身份验证cookie，在`bar.com`使用该[`FormsAuthentication.SetAuthCookie`](http://msdn.microsoft.com/en-us/library/system.web.security.formsauthentication.setauthcookie.aspx)方法时有效。
6.  用户现在已通过身份验证`bar.com`

该模型的整体安全性依赖于这样一个事实，即在将表单身份验证令牌从`foo.com`到发送时使用 SSL，因此[中间人](http://en.wikipedia.org/wiki/Man-in-the-middle_attack)`bar.com`无法捕获令牌，并且两个应用程序共享相同的机器密钥用于加密和解密那些令牌。

# c# - 遍历datagridview的最佳方法是什么

> ID：10997716
> 
> 赞同：0
> 
> 时间：2012-06-12T13:28:16.770
> 
> 标签：c#, datagridview

有人可以发布一些关于循环 dataGridView 的最佳方法的提示吗？我有一个包含大量行的datagridview，并且想要通过并获取单元格值。我使用约定的方式，它需要太长时间。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T13:31:58.640

要遍历的示例代码：

```
foreach (DataGridViewRow row in DataGridView1.Rows) {
    object[] obj = new object[row.Cells.Count];
    for (i = 0; i <= row.Cells.Count - 1; i++) {
        obj[i] = row.Cells(i).Value; //Place your code and do type conversion
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T13:32:09.687

我只是将您的数据绑定到`DataGridView`. 这样，您拥有的集合将是最新的，并且无需遍历`DataGridView`即可获取数据。请参阅[C# 教程 - 将 DataGridView 绑定到集合中的示例](http://www.switchonthecode.com/tutorials/csharp-tutorial-binding-a-datagridview-to-a-collection)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-12T13:33:10.540

如果您需要到达每个单元格，最快的可能是 O(n)：

```
DataGridView dgv = new DataGridView();
foreach (DataGridViewRow row in dgv.Rows)
{
    foreach (DataGridViewCell cell in row.Cells)
    {
        // 
    }
} 
```

然而，有更快的方法来更新数据，比如绑定。

# sql - 什么时候索引变得必要或值得？

> ID：10997719
> 
> 赞同：2
> 
> 时间：2012-06-12T13:28:35.643
> 
> 标签：sql, database, oracle, database-design, indexing

我正在学习数据库和 SQL。从我读过的内容来看，向表中添加索引可以将性能从大约 (log(n)) 提高到甚至恒定时间。

考虑到空间使用量的增加，在什么时候向表中添加索引才有意义？

例如，如果我在使用员工表时，在添加索引之前该表必须有多少条记录？

在这种特定情况下，聚集索引是否有意义？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T18:12:04.183

这里有两个例子可以帮助你思考这个问题。这些在技术上并不准确（例如，因为磁盘上连续读取的效果比随机寻道更有效），但它们只是一个说明。

第一个例子是想象一个有几个块大小的小桌子。要在表中查找特定行，数据库将读取这两个块并获取您需要的数据。

如果该表上有索引，则该索引可能小于该表。也许只有一个街区。如果优化器选择使用此索引，那么数据库将读取单块索引，然后读取包含所需行的表的单块。

如上所述，这只是一个示例，旨在模拟现实而不是准确的。实际上，Oracle 经常会对带有索引的表进行全表扫描，即使该索引只返回 5% 的行（或者现在使用 11G 时它会更少吗？）。

第二个示例涉及对表进行数据修改。每当对表中的行进行更改 ( `INSERT`, `UPDATE`, `DELETE`, `MERGE`) 时，表上的每个索引都需要更新。

因此，索引可能会使查询更快而更新更慢。索引占用空间。这就是你付出的代价。

您问“在添加索引之前，表必须有多少条记录”？我认为您以错误的方式看待它，因为这不应该让您担心。当表有零行时添加索引。优化器会找出正确的方法。如果使用索引更快，它将使用它。如果避免索引并对表进行完整扫描更快，那么它将执行此操作。

我通常会索引用于主键和外键的列以及任何经常用于访问的列。

一般来说，我不会太担心索引使用的空间，除非表非常大（在这种情况下，可能值得查看位图索引）。这是空间与时间的权衡，但索引将小于被索引的表。

如果您担心压缩索引的空间，另一种选择。这应该不会对性能产生太大影响，但会占用更少的空间。请注意，这与表压缩不同。

要给出汤姆·凯特的“这取决于”的答案，还有很长的路要走。您可能做的最好的事情就是对您的特定问题进行基准测试并从那里开始。您似乎正在尝试进行过早的优化，这绝不是一件好事。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T13:35:40.043

我的意见是在您经常访问的列上使用索引（例如主键（这应该是默认值），搜索条件中的列），您在`WHERE`子句中使用。它将加快检索速度。

您应该考虑该表将来可能会增长的事实，现在在其上放置索引为您做好准备。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-12T13:36:10.950

一般来说，每个表都应该被索引。特别是，每个表都应该有一个主键，它会自动创建一个索引（很可能是一个聚集索引）。

但是，即使您没有创建主键，即使是非常小的表也会从索引中受益。

# javascript - 连续 ajax 调用冻结 chrome 和 IE

> ID：10997721
> 
> 赞同：1
> 
> 时间：2012-06-12T13:28:39.200
> 
> 标签：javascript, jquery, ajax, browser

我有一个奇怪的。我必须进行几次连续的 ajax 调用，当调用完成时，我会更新进度条。这在 FF 上完美运行，但在其他浏览器上发生的情况是屏幕冻结，直到所有调用完成。

我不是在循环中执行调用，而是通过使用某种递归导致需要进行大量检查并且循环不方便。

当我使用循环尝试相同的事情时，结果或多或少是相同的。Chrome 或 IE 直到所有 ajax 请求完成后才更新屏幕。

我注意到它在 FF 和 opera 上运行良好，但是 chrome（我想也是 safari）和 IE9 的行为很奇怪。同样在 Chrome 上，在这些请求期间，前一个请求的响应正文是空的，并且会保持这种状态，直到所有请求都完成。

有任何想法吗？

代码很广泛，但在这里。ajax 有一个包装器，$(db).bind 是成功的回调。db.records 是 Json 结果。模型是一个拥有多个控制器功能的对象

```
$(db).bind('tokenComplete',function(){
var x = db.records;
if (!x.success) { model.callRollBack(); return false; }
var next = parseInt(x.get.num)+ 1;
if (typeof x.post.tokens[next] != 'undefined') {
    model.executeToken(next,x.post);
}
else { 
    model.progressCurrent.find('div.report').html('all done!!');
} 
```

});

```
model = {
drawProgressBarsTotal : function(el,i,v) {
    var p = Math.floor(100 * i / versions.total);
    el.find('span').html(p);
    el.find('div.report').html('updating to : ' + v.version);
    el.find('.changeLog').html(v.changeLog);
    el.find('.changeLog').parents('div').show();
    el.find('img').css({'background-position': 100 - p + '% 100%'});
},
executeToken : function(i,x) {
    if (this.fail == true) { return; }
    this.drawProgressBarsCurrent(this.progressCurrent,i+1,x);
    db.trigger = 'tokenComplete';
    db.data = x;
    db.url = dbDefaults.url + '?num='+i+'&action='+x.tokens[i];//bring the first
    $(db).loadStore(db);
} 
```

}

加载存储：

```
$.dataStore = function( ds ) {

    $.fn.loadStore = function(ds){
        $.ajax({
            type: ds.method,
            url: ds.url,
            data: ds.data,
            dataType: ds.dataType,
            cache:false,
            async:true,
            timeout:ds.timeout?ds.timeout:10000,                
            queue: "autocomplete",

            contentType:'application/x-www-form-urlencoded;charset=utf-8',
            accepts: {
                xml: "application/xml, text/xml",
                json: "application/json, text/json",
                _default: "*/*"
            },
            beforeSend:function(){
                loadStatus = true;
            },
            success: function(data) {
                loadStatus = false;

                if(data)
                {ds.records=data;}
                $(ds).trigger(ds.trigger);
            },              
            error: function()
            {                   
                loadStatus = false;         
                $(ds).trigger('loadError');

            }
        });//END AJAX
    };//END LOADSTORE

    try {
        return ds;
    } finally {
        ds = null;
    }

} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T18:58:45.323

没有遵循您的整个代码，但听起来您的问题可能与连续代码执行有关。通常，在连续代码执行期间 UI 不会更新。要解决此问题，任何对 setTimeout() 的调用或任何 ajax 调用都应允许浏览器有时间更新 UI。基本上，您必须暂时停止代码，然后重新启动它。

```
function updateUI () {
   // change ui state
   document.setTimeout( updateUI, 1 );
} 
```

如果我不在基地，请告诉我。

# wcf - 是否可以从 WCF 向您的 ISAPI 扩展发送消息？

> ID：10997727
> 
> 赞同：1
> 
> 时间：2012-06-12T13:28:56.690
> 
> 标签：wcf, web-services, iis, isapi, isapi-extension

感谢您抽时间阅读。我是 IIS/WCF 的新手，对它的功能有疑问。

我们想在我们的 IIS 中放置一个 ISAPI 扩展，以根据一些静态数据将请求路由到不同的服务器/服务。当 IIS 启动并运行 ISAPI 扩展时，它会访问 WCF 以检索有关哪些服务器处于活动状态以将各种请求路由到的信息。我的问题是，如果更改了这些数据，并且重新启动了 WCF……有没有办法可以将更新的数据从 WCF 发送到 IIS 以更新我的 ISAPI 扩展中的数据？

任何有关这方面的帮助或信息将不胜感激。

谢谢！

# merge - SQL Server 2000 合并复制 – 撤消重新初始化所有订阅

> ID：10997731
> 
> 赞同：0
> 
> 时间：2012-06-12T13:29:03.727
> 
> 标签：merge, sql-server-2000, replication

我们目前有一个发布者和四个订阅者使用合并复制。由于架构中的更改，有人执行了“重新初始化所有订阅”操作，而没有选中“重新初始化之前在订阅者处上传更改”选项。当第一台服务器的复制代理启动时，数据库被清除。（所有表都被删除并重新创建）并且自上次成功同步以来的所有更改都丢失了。此时我们决定完全禁用复制计划。我的问题是，有没有办法撤消“重新初始化所有订阅”操作？优选地，以这种方式，订阅者处的所有改变都不会丢失。

提前致谢，

大卫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T08:36:16.743

我们能够在重新初始化操作之前恢复发布者数据库的备份。（这是在为当前发布者数据库创建单独的备份之后完成的。）在此之后，我们手动将自重新初始化操作以来所做的更改从数据库中重新应用到恢复的备份中。（我们使用 Redgate sql 数据比较）。此时，我们能够开始复制过程，并且一切正常。显然，快照信息完全存储在它所应用的数据库中。

特别感谢 Hilary Cotter 指出这一点。

# css - nth-last-child 选择器不准确

> ID：10997732
> 
> 赞同：3
> 
> 时间：2012-06-12T13:29:07.470
> 
> 标签：css, css-selectors

难以理解。

使用以下 css ：

```
.bloc .field:nth-last-child(2){ ...some values... } 
```

以及以下 html（嗯，haml）：

```
.bloc
    .field
    .field
    .field
    .field
    .clearfix 
```

.clearfix div 被计算在选择器中，因此我无法获得好的 .field 的 div 来专门设置样式。

这对我来说似乎是一个错误，但我可能是错的。同样的问题也适用于第 n 个孩子。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T13:55:35.947

这里最大的误解是过滤使用的`:nth-child()`工作原理。

`.bloc .field:nth-last-child(2)`意思是：
“选择所有倒数第二个元素*，*其`.field`类在一个`.bloc`”内。

这并不意味着：
“选择所有倒数第二个`.field`元素`.bloc`”。

有了这种理解，您只需将选择器更改为`.bloc :nth-last-child(3)`.

但是，bažmegakapa 的回答的第二段很有意义。您应该只删除`.clearfix`元素并使用不同的浮动包含技术。“ [micro clearfix”](http://nicolasgallagher.com/micro-clearfix-hack/)是一个不错的选择。另一种选择是添加`overflow: hidden`到`.bloc`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-12T13:46:03.157

**只需删除 clearfix div。**`:nth-last-child()`和`:nth-last-of-type()`选择器不会按您期望的方式工作。他们不会区分类名（第一个不区分，只从倒数开始，第二个只区分元素类型）。

有数以千计的[清算技术](http://robertnyman.com/2007/04/12/how-to-clear-css-floats-without-extra-markup-different-techniques-explained/)，其中只有一些需要添加标记。简单地`overflow: hidden`或`overflow: auto`在容器上。如果您可以使用`:nth-last-child`，您也可以使用采用`::after`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-12T13:36:21.990

您正在选择具有该类的元素，如果它是`:nth-last-child(2)`.

`.field`如果你对and`.clearfix`元素使用不同的类型，你可以实现你真正想要的，使用[`:nth-last-of-type()`](http://reference.sitepoint.com/css/pseudoclass-nthlastoftype).

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-12T13:43:56.267

试试这个，对我来说似乎是 .clear 之前的那个：

```
.bloc .field:nth-last-child(2) { color: #CC0000; }​ 
```

[http://jsfiddle.net/clowerweb/Dp3yW/](http://jsfiddle.net/clowerweb/Dp3yW/)

# node.js - Node.js 异步 setInterval 游戏循环？

> ID：10997733
> 
> 赞同：0
> 
> 时间：2012-06-12T13:29:12.913
> 
> 标签：node.js

我有一个多人游戏大厅，用户可以在其中创建私人聊天室并开始私人游戏。每个用户在游戏中都有一个生命条，假设每秒缓慢地再生 x 点。

我想我需要在每个游戏开始时启动服务器端游戏循环，就像这样：

```
setInterval(update('gameID'),1000); 
```

其中 update('gameID') 增加特定游戏中所有玩家的健康变量，其中 1000 毫秒 = 1 秒。

问题：我是否可以假设这是异步的？我可能有 50 个单独的游戏正在进行，其中 50 个正在运行。主进程不会被阻塞吧？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T14:06:26.313

它是异步的，但在您描述的情况下，您不需要 50 个计时器。

1.  您可以使用单个计时器来重新生成活跃游戏中的玩家。如果您还推送健康数据，这将是非常低效的。
2.  您可以执行类似的操作`player.attackedTime = (new Date).getTime()`并计算每次攻击的再生，例如`player.health += x_points * ((new Date).getTime() - player.attackedTime) / 1000`，但您必须在客户端上进行预测再生。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T13:31:39.123

`setInterval`当然是异步的。大多数接受回调的函数都是异步的。如果您有任何疑问，可以查看文档或源代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T13:35:20.103

它是异步的。但是这样做可能会杀死您的服务器。

我建议让这些间隔被动，即在内存中保存游戏的开始并让客户端 ping 数据。当客户端 ping 服务器检查当前日期并将其与存储的日期进行比较（并在请求结束时更新存储的日期）。它可以从中评估当前的健康状况。

该解决方案应该可以更好地扩展。

# dotnetnuke - DotNetNuke 4.8.X 中的 ReportViewer 10.0.0.0：PageLoadException

> ID：10997737
> 
> 赞同：1
> 
> 时间：2012-06-12T13:29:20.573
> 
> 标签：dotnetnuke, report-viewer2010

我们在（旧版）4.8.2 版本中的自定义 DotNetNuke 模块上有一个 MS ReportViewer 9.0.0.0 控件。在尝试升级到 10.0.0.0 时，我们遇到以下错误：

> PageLoadException：页面不能为空。请确保在 ASP.NET 请求的上下文中执行此操作。

以下是 DotNetNuke 模块中主视图控件的相关 ASCX 代码：

```
<%@ Register assembly="Microsoft.ReportViewer.WebForms, Version=10.0.0.0, 
    Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a" 
    namespace="Microsoft.Reporting.WebForms" tagprefix="rsweb" %>

<rsweb:ReportViewer ID="report" runat="server" ProcessingMode="Remote" /> 
```

此外，还有一些设置 的代码`IReportServerCredentials`，我已经省略了那部分代码，因为问题发生在报告甚至呈现之前。

堆栈跟踪非常大，但这里有一些相关位：

> DotNetNuke.Services.Exceptions.PageLoadException
> System.InvalidOperationException：页面不能
> 在 System.Web.UI.ScriptManager.get_IPage()
> ...
> 在 Microsoft.Reporting.WebForms.ReportViewer.Render(HtmlTextWriter writer)
> ...
> 在 DotNetNuke。 Framework.PageBase.Render（HtmlTextWriter 编写器）

我的 Google-fu 根本没有帮助我。我试过摆弄`ScriptManager`DotnetNuke 的 Default.aspx.vb 文件，玩弄 ReportViewer 控件的属性，并阅读各种相关的 MSDN 文章。没有骰子。

**问题**：如何让 ReportViewer 10.0.0.0 在 DotNetNuke 4.8.x 中工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T13:29:21.930

这是我最近遇到的少数几个问题之一，在 SO 上搜索无法回答。经过更多的摆弄之后，我已经解决了这个问题，并认为我会给新的[Answer your own question](https://blog.stackoverflow.com/2011/07/its-ok-to-ask-and-answer-your-own-questions/)功能一个旋转。所以这就是为我解决问题的方法。

* * *

这个问题可以通过启用 DotNetNuke AJAX 实现来解决您的模块中包含 ReportViewer 的特定控件。学分转到[这个旧帖子](http://www.datasprings.com/resources/articles-information/ajax-w-dotnetnuke)，详细说明了使它工作的步骤。另请参阅[有关此功能的 2007 DotNetNuke 博客文章](http://www.dotnetnuke.com/Resources/Blogs/EntryId/1410/DotNetNuke-4-5-and-ASP-NET-AJAX.aspx)。实质如下：

1.  以 DNN 主机身份登录
2.  转到模块的模块定义
3.  编辑模块的设置
4.  使用 ReportViewer 查找控件
5.  单击以编辑控件的设置
6.  点击**Supports Partial Rendering**设置复选框
7.  保存设置

ReportViewer 控件现在应该可以工作了。

# ios - 如何为地方搜索请求捆绑谷歌 API 调用？

> ID：10997738
> 
> 赞同：0
> 
> 时间：2012-06-12T13:29:20.823
> 
> 标签：ios, google-maps-api-3

嗨，我正在使用来自谷歌的“地方搜索请求”：

地点搜索请求是以下形式的 HTTP URL：

[https://maps.googleapis.com/maps/api/place/search/output?parameters](https://maps.googleapis.com/maps/api/place/search/output?parameters)

但问题是我必须对谷歌进行数百次查询，这使得 APP 非常非常慢。

我可以以某种方式一次捆绑请求吗？例如，我可以将所有地点的名称发送到 google 并连续获取结果？

问候，雅舒

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T07:50:16.533

**您只能按照文档中的说明进行操作。**

*旁注：*条款禁止批量下载数据。您为什么需要进行数百次查询，以及您的用例是否被允许，这是值得商榷的。

# javascript - Navigate parent.window with a relative url from iframe across domains

> ID：10997749
> 
> 赞同：1
> 
> 时间：2012-06-12T13:29:52.073
> 
> 标签：javascript, html

So there is a parent page on one domain that includes an iframe from a different domain.

I am trying to navigate parent page from the iframe using a relative path that would take base url from the parent.

I tried with

```
<script type="text/javascript">
     function navigateParent(targetPage) {
        var url = window.parent.location.href;
        if (url.indexOf('.') > -1) {
             url = url.substring(0, url.lastIndexOf('/') + 1);
        }
        window.parent.location = url + targetPage;
     }
</script> 
```

but this produces an error:

Unsafe JavaScript attempt to access frame with URL ...my parent url... with URL ...my iframe url... . Domains, protocols and ports must match.

Is there any way to do this? Ie specifiying some cross-domain permission or something.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T13:31:58.747

Cross domain protections are now serverly enforced browser-side to protect the user (following some cross domain injections).

To call a function or change a property in a frame/window served by another domain you can

*   specify [CORS headers](https://developer.mozilla.org/en/http_access_control) on the server (this tells the browser that cross domain communication is fine)

*   preferred : use [postMessage](https://developer.mozilla.org/en/DOM/window.postMessage) to communicate between windows and frames

# sql - SQL 表组织

> ID：10997755
> 
> 赞同：0
> 
> 时间：2012-06-12T13:30:15.157
> 
> 标签：sql, database-design

我有很多需要跟踪的帐户。这些帐户都非常相似，具有以下字段：

```
account_number, date_opened, current_expenditure etc. 
```

现在，这些帐户分为三种类型（我们将它们称为 A、B、C 类型），这些帐户类型中的每一种都需要至少一个其他字段，对其类型是唯一的。例如：

```
Type A: account_number, date_opened, current_expenditure, owner
Type B: account_number, date_opened, current_expenditure, location
Type C: account_number, date_opened, current_expenditure, currency 
```

我的问题是我是否应该将这些组合到一个大表中，并用一列表示帐户类型（将不相关的字段留空）：

```
Table 1: accounts
Table 2: accts_emp_maps

Account Columns: 
account_number, type, date_opened, current_expenditure, owner, location, currency 
```

或者，我应该为每种帐户类型创建一个单独的表格吗？请记住，还有其他表将员工映射到这些帐户。如果我将帐户拆分为不同的类型，我也需要拆分地图。IE：

```
Table 1: A_accounts
Table 2: A_accts_emp_maps
Table 3: B_accounts
Table 4: B_accts_emp_maps
Table 5: C_accounts
Table 6: C_accts_emp_maps 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T13:33:44.207

我会选择一张表的方法，带有`owner, location, currency`额外的列。它会让你的生活更轻松。

如果它变得太大，您可以按类型对其进行分区。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T13:36:53.990

经典地，您可能会为此使用超级键/子类型模式来确保只有所有者、位置、货币之一

*   一个包含公共列和类型列的表
*   PK + 类型（A、B 或 C）列上的唯一超级键
*   三个带有 PK + 类型键的子表。这是您添加特定列的地方
*   检查子类型约束的约束以限制子表中的 A、B 或 C

现在，在这种情况下，为了简单起见，我会考虑使用冗余列

例子：

*   [仅允许两个表之一引用基表的约束](https://stackoverflow.com/questions/6323932/a-constraint-that-only-allows-one-of-two-tables-to-reference-a-base-table/6323980#6323980)
*   (DBA.SE) [https://dba.stackexchange.com/questions/4105/database-schema-with-a-shared-identity-field/4110#4110](https://dba.stackexchange.com/questions/4105/database-schema-with-a-shared-identity-field/4110#4110)
*   [数据库设计 - 文章、博客文章、照片、故事](https://stackoverflow.com/questions/4969133/database-design-problem/4970646#4970646)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-12T13:34:45.923

在您列出的两个选项中，我肯定会选择第一个。这对大多数应用程序来说都很好，并且手动查询表会更简单。（第二个提议的设计在三组帐户表中重复了很多信息）。

但是，根据您的需要，可能更好的[更规范化](https://en.wikipedia.org/wiki/Database_normalization)的数据库设计是这样的：

```
Table: accounts
===============
number, type, date_opened, current_expenditure

Table: account_owners
=====================
account_number, owner

Table: account_currencies
=========================
account_number, currency

Table: account_locations
========================
account_number, location 
```

# android - 活动内的通知栏（或类似的）

> ID：10997761
> 
> 赞同：2
> 
> 时间：2012-06-12T13:30:36.750
> 
> 标签：android, view, android-notification-bar

有没有办法在活动内部创建一个布局，如通知栏（可以从 Android 工作区域顶部拖放的滑动条，它包含一般通知）？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T13:33:07.230

您可以从滑动抽屉开始，然后从那里开始。这是一篇不错的文章，其中包含[Android 中的示例代码自定义通知栏](https://stackoverflow.com/questions/7952015/custom-notification-bar-in-android)

# jquery - jquery在页面加载时自动打开幻灯片菜单

> ID：10997762
> 
> 赞同：0
> 
> 时间：2012-06-12T13:30:42.040
> 
> 标签：jquery, css

我有一个 wordpress 网站，那里有菜单。我想要的是，当一些身体悬停在 SITE 徽标上时，它会显示下拉菜单....我想要做的是始终打开，不仅在我点击时。它必须在页面刷新时加载，

任何机构都可以告诉如何做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T13:40:13.760

用于`$(document).ready(function() {}`在页面加载后运行代码。然后，您可以使用 JQuery delay() 函数等待 3 秒，然后再调用菜单对象上的 slideDown。像这样的东西会起作用：

```
$(document).ready(function() {
    $('#yourMenuID').delay(3000).slideDown(300);
} 
```

[http://api.jquery.com/delay/](http://api.jquery.com/delay/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T13:37:12.507

### .ready() - 使用它来确保被引用的对象处于就绪状态。

文档 - [http://api.jquery.com/ready/](http://api.jquery.com/ready/)

### css() - 使用它来修改属性的 CSS 值

文档：[http ://api.jquery.com/css/](http://api.jquery.com/css/)

### 代码示例

```
//only execute when the document returns ready
//this can be trivial if your putting the code at the footer
//you may wish to use a self invoking function in that case
$(document).ready(function(){
  setTimeout(function(){
    //do something
    $('#somethingcool').css('background-color', 'red');

  //3 seconds = 3000ms
  }, 3000);
}); 
```

* * *

# asp.net - Telerik RadGrid 虚拟项目计数对齐

> ID：10997765
> 
> 赞同：0
> 
> 时间：2012-06-12T13:30:48.000
> 
> 标签：asp.net, telerik

我有一个telerik radgrid，它的VirtualItemCount 向右对齐。我想把它对齐到左边。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T17:16:17.210

我没有找到解决问题的简单方法，所以我在 jQuery 中实现了一个 hack：

```
 $(".rgInfoPart").each(function(){
                var obj = $($(this).parent().find(".rgPagerButton")[1]);
                $(this).css("left", (obj.position().left + obj.width() + 10) + "px");
                $(this).css("position", "absolute");
            }); 
```

# android - “安装”的 Google Play 含义

> ID：10997767
> 
> 赞同：9
> 
> 时间：2012-06-12T13:30:54.117
> 
> 标签：android, google-play

有人可以告诉我安装数是什么意思：100-500。什么 Google Play 很重要？每日安装？每月安装？应用程序的总安装量。

我正在尝试查看人们的应用程序并查看他们安装了多少。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-12T13:39:09.727

这是应用程序/游戏的安装总量。但是 google play 并没有显示目前安装了应用程序的设备数量。很遗憾，因为一个应用程序可以安装 5000 次，但由于 4500 次卸载，只能安装 500 次

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-12T13:34:12.680

它是页面上显示的安装总数，在它下方您会找到过去 30 天的图表，您可以将其用作指示它是否仍在大量增长或相反。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-12T13:33:15.563

这意味着总共有 100-500 人安装了它

# reporting-services - 报告服务：连接数据集上的所有字段

> ID：10997770
> 
> 赞同：7
> 
> 时间：2012-06-12T13:31:20.450
> 
> 标签：reporting-services, report, ssrs-2008, reporting

在报告中，我有一个带有过滤器的数据集（基于 MultiValue 参数）。

该数据集包含两个字段：Id 和 Name。

我需要在某处显示所有名称的串联：

```
Name1 / Name2 / Name3 
```

问题是该`join`方法仅适用于数组，然后我无法将数据集指定为值。

我也查看了自定义代码，但没有发现任何工作。

我该怎么做？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-22T07:28:27.970

我可能有点晚了，但对于任何对此感兴趣的人，在 SSRS 中有一种相当简单的方法可以做到这一点：

```
=Join(LookupSet(1,1,Fields!Name.Value, "DatasetName")," / ") 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-15T20:12:56.073

# SSRS-2008 *R2*及更高版本...

**1.使用`LookupSet`**
如果你超过了2008版本的OP，有一个很好的解决方案：

```
=Join(LookupSet(1, 1, Fields!Name.Value, "DatasetName"), " / ") 
```

**使用[该`LookupSet`解决方案](https://msdn.microsoft.com/en-us/library/ee240819.aspx)的答案完全[归功于@urbanhusky 的答案](https://stackoverflow.com/a/15565002/419956)。**

* * *

# SSRS-2008 及以下...

不过，我保留了这个答案，因为它将@urbanhusky 的解决方案与被困在 OP 的 SSRS 及以下版本的可怜的灵魂可用的解决方案相结合。

据我所知，在 SSRS 2008 中只有三个“选项”，每个选项都有自己的缺点。第一个可能是最不黑客的。

**2.额外参数**
创建一个内部参数（例如“NameParameter”，参见[这个SO答案](https://stackoverflow.com/a/9844518/419956)或[MSDN](http://msdn.microsoft.com/en-us/library/dd220464.aspx)），*允许多个值*。将参数的默认值设置为`Name`数据集中的字段。然后使用该函数`=Join(Parameters!NameParameter.Value, " / ")`在文本框中显示连接的名称。

这可能是您最好的选择，但如果有很多值，则该参数可能无法很好地工作。

**3\. 使用列表**
创建一个列表并将名称字段拖放到其中。如有必要，也可以对名称进行分组。

这里的缺点是（AFAIK）列表不能水平显示。

**4\. 使用矩阵**
哦，男孩，这个真的很丑。尽管如此，这里是：创建一个矩阵，将名称字段拖到列标题，并隐藏第一列以及第二行（用于显示数据）。

主要缺点是它是一种 hack（而且相当过分），而且您必须使用表达式手动修剪最后一个分隔符。

# c# - 子 ContentControl 中未触发 MouseLeftButtonDown 事件

> ID：10997777
> 
> 赞同：1
> 
> 时间：2012-06-12T13:31:46.830
> 
> 标签：c#, wpf, contentcontrol, mouseleftbuttondown

我有`PortItem`哪个衍生自`ContentControl`，`TextedStackPanel`衍生自`StackPanel`哪个包含`PortItems`。在`MainWindow`我有 2 个`StackPanels`包含`TextedStackPanels`. 在`PortItem`我有覆盖的 `MouseLeftButtonDown`方法。但是当我在这个方法上这样做时不会被解雇。我在论坛里搜索了这里，发现必须将`Background`属性`Grid/StackPanel`设置为透明。我应用了这个，但没有任何变化。该怎么办 ？

**编辑 1** 我使用部分类。我有 2 个课程：`PortItem.cs`和`PortItem.cs.xaml`. 我修改此 XAML 文件中的任何视觉更改。

**编辑 2** 也不会触发任何鼠标事件。当我保持鼠标打开时，我使用 IsMouseOver 的触发器也不起作用`PortItem`

**XAML**

```
<ContentControl x:Class="**.PortItem"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
     xmlns:UI="clr-namespace:**.UIData" Width="17" Height="17" Margin="3" SnapsToDevicePixels="True" >
<Grid Background="Transparent" Name="mainGrid">
    <!-- transparent extra space makes connector easier to hit -->
    <Rectangle Fill="Transparent" Margin="-2"/>
    <Border BorderBrush="Green" x:Name="border" BorderThickness="2">
        <Border.Style>
            <Style>
                <Style.Triggers>
                    <DataTrigger Binding="{Binding RelativeSource={RelativeSource Mode=FindAncestor, AncestorType=Grid}, Path=IsMouseOver}" Value="True">
                        <Setter  Property="Border.BorderBrush" Value="Blue"/>
                    </DataTrigger>
                    <DataTrigger Binding="{Binding IsSelected}" Value="True">
                        <Setter  Property="Border.BorderBrush" Value="Blue"/>
                    </DataTrigger>
                    <!--<DataTrigger Binding="{Binding ContactPort}" Value="{x:Null}">
            <Setter TargetName="border" Property="Border.BorderBrush" Value="Green"/>
        </DataTrigger>-->
                </Style.Triggers>
            </Style>
        </Border.Style>
            <Image  Source="/**;component/Resources/1337238611_port.png">
        </Image>
    </Border>
</Grid> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T13:47:02.060

确保您没有在 PortItem 上将“IsHitTestVisible”设置为 false。此外，请确保没有其他控件位于其之上。如果是，请将它们的“IsHitTestVisible”属性设置为 false，然后您的 PortItem 控件将获得鼠标右键单击事件。为确保没有任何内容位于顶部，请将您的 PortItem 声明为添加到 TextedStackPanel 的最后一件事。要仔细检查顶部是否没有其他内容，请将其他控件的背景颜色更改为非常明显的颜色（仅用于测试），以查看是否有任何东西覆盖了您的 PortItem 控件。此外，更改 PortItem 控件上的颜色以验证它是否确实在您认为的位置。然后，一旦一切正常，将颜色改回原来的颜色。

如果您可以向我们提供您的 XAML 的代码示例，那可能会有所帮助。如果您在后面的代码中动态添加 PortItem，请也提供该代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T13:43:45.700

编辑：根据您对代码所做的更改，尝试将 ClipToBounds="False" 添加到用户控件声明的顶部。

```
<ContentControl x:Class="**.PortItem" ClipToBounds="False"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
     xmlns:UI="clr-namespace:**.UIData" Width="17" Height="17" Margin="3" SnapsToDevicePixels="True" > 
```

您是否为 PortItem 创建了模板？我创建了跟随类来复制您的 PortItem 和 base.OnMouseButtonDown 行上的断点并触发它，我认为您的方法未执行的原因是因为鼠标没有实际交互的视觉元素，请尝试添加样式在您的应用程序下方，您应该会看到该方法正确触发。

```
 public class PortItem: ContentControl
    {
        protected override void OnMouseLeftButtonDown(MouseButtonEventArgs e)
        {

            base.OnMouseLeftButtonDown(e);
        }
    } 
```

然后在 XAML 中我创建了一个样式来给它一些渲染的东西。

```
 <local:PortItem Margin="44,36,156,95">
        <local:PortItem.Style>
            <Style TargetType="{x:Type local:PortItem}">
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="{x:Type local:PortItem}">
                            <Border Background="Transparent">
                                <ContentPresenter Content="{TemplateBinding Content}"/>
                            </Border>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </Style>
        </local:PortItem.Style>
    </local:PortItem> 
```

您提到的背景是透明的，您可以在边框控件中看到，如果您将背景排除在外，您是正确的，该事件永远不会触发。

# forms - yii中的form和chtml有什么区别

> ID：10997781
> 
> 赞同：-1
> 
> 时间：2012-06-12T13:31:59.477
> 
> 标签：forms, yii

表单和chtml之间的混淆

我曾经用表单编写表单并提交到数据库工作正常，但是对于某些特定的地方，根据谷歌搜索使用 CHTML 而不是表单。但是当我将该表格提交到数据库时

CHTML 文本字段值未提交到数据库

这是我的代码

**_Form.php**

```
 <script language="javascript">

function firstlang(flang,slang,tlang,math,scien,soci)
{

var sflang=parseInt(flang)+parseInt(slang)+parseInt(tlang)+parseInt(math)+parseInt(scien)+parseInt(soci);
document.getElementById('totalmarks').value=sflang;
if(sflang>=300 && sflang<400)
{
var flang='C';
document.getElementById('grade').value=flang;
}
else if(sflang>=400 && sflang<500)
{
var flang='B';
document.getElementById('grade').value=flang;   
}
else if(sflang>=550 && sflang<=600)
{
var flang='A';
document.getElementById('grade').value=flang;   
}
}

</script>

<div class="form">

<?php $form=$this->beginWidget('CActiveForm', array(
    'id'=>'marks-form',
    'enableAjaxValidation'=>true,
     'enableClientValidation'=>true,
      'focus'=>array($model,'class'),
)); ?>
    <p class="note">Fields with <span class="required">*</span> are required.</p>

    <?php echo $form->errorSummary($model); ?>
<table width="200" border="1">
  <tr>
    <td><span class="row"><?php echo $form->labelEx($model,'class'); ?></span></td>
    <td><span class="row">

   <?php echo CHtml::dropDownList('class','',CHtml::listData(class1::model()->findAll(),'class','class'),array('empty'=>'Choose one',

'ajax' => array(

'type'=>'POST', //request type
'url'=>CController::createUrl('Marks/dynamicstates'), //url to call.
//Style: CController::createUrl('currentController/methodToCall')
'update'=>'#studentid', //selector to update
//'data'=>'js:javascript statement'
//leave out the data key to pass all form values through
)));

//empty since it will be filled by the other dropdown
?></span></td>
    <td><span class="row"><?php echo $form->error($model,'class'); ?></span></td>
  </tr>
  <tr>
    <td><span class="row"><?php echo $form->labelEx($model,'studentid'); ?></span></td>
    <td><span class="row"><?php echo CHtml::dropdownlist('studentid','',array()); ?></span></td>
    <td><span class="row"><?php echo $form->error($model,'studentid'); ?></span></td>
  </tr>
  <tr>
    <td><span class="row"><?php echo $form->labelEx($model,'examtype'); ?></span></td>
    <td><span class="row"><?php echo $form->textField($model,'examtype',array('size'=>30,'maxlength'=>30)); ?></span></td>
    <td><span class="row"><?php echo $form->error($model,'examtype'); ?></span></td>
  </tr>
  <tr>
    <td><span class="row"><?php echo $form->labelEx($model,'firsttlanguage'); ?></span></td>
    <td><span class="row"><?php echo $form->textField($model,'firsttlanguage',array('id'=>'firsttlanguage','value'=>'0','onkeyup'=>'firstlang(this.value,secondlanguage.value,thirdlanguage.value,mathematics.value,science.value,social.value)')); ?></span></td>
    <td><span class="row"><?php echo $form->error($model,'firsttlanguage'); ?></span></td>
  </tr>
  <tr>
    <td><span class="row"><?php echo $form->labelEx($model,'secondlanguage'); ?></span></td>
    <td><span class="row"><?php echo $form->textField($model,'secondlanguage',array('id'=>'secondlanguage','value'=>'0','onkeyup'=>'firstlang(this.value,firsttlanguage.value,thirdlanguage.value,mathematics.value,science.value,social.value)')); ?></span></td>
    <td><span class="row"><?php echo $form->error($model,'secondlanguage'); ?></span></td>
  </tr>
  <tr>
    <td><span class="row"><?php echo $form->labelEx($model,'thirdlanguage'); ?></span></td>
    <td><span class="row"><?php echo $form->textField($model,'thirdlanguage',array('id'=>'thirdlanguage','value'=>'0','onkeyup'=>'firstlang(this.value,firsttlanguage.value,secondlanguage.value,mathematics.value,science.value,social.value)')); ?></span></td>
    <td><span class="row"><?php echo $form->error($model,'thirdlanguage'); ?></span></td>
  </tr>
  <tr>
    <td><span class="row"><?php echo $form->labelEx($model,'mathematics'); ?></span></td>
    <td><span class="row"><?php echo $form->textField($model,'mathematics',array('id'=>'mathematics','value'=>'0','onkeyup'=>'firstlang(this.value,firsttlanguage.value,secondlanguage.value,thirdlanguage.value,science.value,social.value)')); ?></span></td>
    <td><span class="row"><?php echo $form->error($model,'mathematics'); ?></span></td>
  </tr>
  <tr>
    <td><span class="row"><?php echo $form->labelEx($model,'science'); ?></span></td>
    <td><span class="row"><?php echo $form->textField($model,'science',array('id'=>'science','value'=>'0','onkeyup'=>'firstlang(this.value,firsttlanguage.value,secondlanguage.value,thirdlanguage.value,mathematics.value,social.value)')); ?></span></td>
    <td><span class="row"><?php echo $form->error($model,'science'); ?></span></td>
  </tr>
  <tr>
    <td><span class="row"><?php echo $form->labelEx($model,'social'); ?></span></td>
    <td><span class="row"><?php echo $form->textField($model,'social',array('id'=>'social','value'=>'0','onkeyup'=>'firstlang(this.value,firsttlanguage.value,secondlanguage.value,thirdlanguage.value,mathematics.value,science.value)')); ?></span></td>
    <td><span class="row"><?php echo $form->error($model,'social'); ?></span></td>
  </tr>
  <tr>
    <td><span class="row"><?php echo $form->labelEx($model,'totalmarks'); ?></span></td>
    <td><span class="row"><?php echo $form->textField($model,'totalmarks',array('id'=>'totalmarks','size'=>5,'maxlength'=>5)); ?></span></td>
    <td><span class="row"><?php echo $form->error($model,'totalmarks'); ?></span></td>
  </tr>
  <tr>
    <td><span class="row"><?php echo $form->labelEx($model,'grade'); ?></span></td>
    <td><span class="row"><?php echo $form->textField($model,'grade',array('id'=>'grade','size'=>5,'maxlength'=>5)); ?></span></td>
    <td><span class="row"><?php echo $form->error($model,'grade'); ?></span></td>
  </tr>
  <tr>
    <td>&nbsp;</td>
    <td><span class="row buttons"><?php echo CHtml::submitButton($model->isNewRecord ? 'Create' : 'Save'); ?></span></td>
    <td>&nbsp;</td>
  </tr>
</table>

<?php $this->endWidget(); ?>

</div><!-- form --> 
```

**MarksController.php**

```
<?php

class MarksController extends Controller
{
    /**
     * @var string the default layout for the views. Defaults to '//layouts/column2', meaning
     * using two-column layout. See 'protected/views/layouts/column2.php'.
     */
    public $layout='//layouts/column2';

    /**
     * @return array action filters
     */
    public function filters()
    {
        return array(
            'accessControl', // perform access control for CRUD operations
        );
    }

    /**
     * Specifies the access control rules.
     * This method is used by the 'accessControl' filter.
     * @return array access control rules
     */
    public function accessRules()
    {
        return array(
            array('allow',  // allow all users to perform 'index' and 'view' actions
                'actions'=>array('index','view'),
                'users'=>array('*'),
            ),
            array('allow', // allow authenticated user to perform 'create' and 'update' actions
                'actions'=>array('create','update'),
                'users'=>array('@'),
            ),
            array('allow', // allow admin user to perform 'admin' and 'delete' actions
                'actions'=>array('admin','delete'),
                'users'=>array('admin'),
            ),
            array('allow', // allow admin user to perform 'admin' and 'delete' actions
                'actions'=>array('admin','dynamicstates'),
                'users'=>array('admin'),
            ),
            array('deny',  // deny all users
                'users'=>array('*'),
            ),
        );
    }

    /**
     * Displays a particular model.
     * @param integer $id the ID of the model to be displayed
     */
    public function actionView($id)
    {
        $this->render('view',array(
            'model'=>$this->loadModel($id),
        ));
    }

    /**
     * Creates a new model.
     * If creation is successful, the browser will be redirected to the 'view' page.
     */
    public function actionCreate()
    {
        $model=new Marks;

        // Uncomment the following line if AJAX validation is needed
        // $this->performAjaxValidation($model);

        if(isset($_POST['Marks']))
        {
            $model->attributes=$_POST['Marks'];
            if($model->save())
                $this->redirect(array('view','id'=>$model->id));
        }

        $this->render('create',array(
            'model'=>$model,
        ));
    }

    /**
     * Updates a particular model.
     * If update is successful, the browser will be redirected to the 'view' page.
     * @param integer $id the ID of the model to be updated
     */
    public function actionUpdate($id)
    {
        $model=$this->loadModel($id);

        // Uncomment the following line if AJAX validation is needed
        // $this->performAjaxValidation($model);

        if(isset($_POST['Marks']))
        {
            $model->attributes=$_POST['Marks'];
            if($model->save())
                $this->redirect(array('view','id'=>$model->id));
        }

        $this->render('update',array(
            'model'=>$model,
        ));
    }

    /**
     * Deletes a particular model.
     * If deletion is successful, the browser will be redirected to the 'admin' page.
     * @param integer $id the ID of the model to be deleted
     */
    public function actionDelete($id)
    {
        if(Yii::app()->request->isPostRequest)
        {
            // we only allow deletion via POST request
            $this->loadModel($id)->delete();

            // if AJAX request (triggered by deletion via admin grid view), we should not redirect the browser
            if(!isset($_GET['ajax']))
                $this->redirect(isset($_POST['returnUrl']) ? $_POST['returnUrl'] : array('admin'));
        }
        else
            throw new CHttpException(400,'Invalid request. Please do not repeat this request again.');
    }

    /**
     * Lists all models.
     */
    public function actionIndex()
    {
        $dataProvider=new CActiveDataProvider('Marks');
        $this->render('index',array(
            'dataProvider'=>$dataProvider,
        ));
    }

    /**
     * Manages all models.
     */
    public function actionAdmin()
    {
        $model=new Marks('search');
        $model->unsetAttributes();  // clear any default values
        if(isset($_GET['Marks']))
            $model->attributes=$_GET['Marks'];

        $this->render('admin',array(
            'model'=>$model,
        ));
    }

    /**
     * Returns the data model based on the primary key given in the GET variable.
     * If the data model is not found, an HTTP exception will be raised.
     * @param integer the ID of the model to be loaded
     */
    public function loadModel($id)
    {
        $model=Marks::model()->findByPk($id);
        if($model===null)
            throw new CHttpException(404,'The requested page does not exist.');
        return $model;
    }

    /**
     * Performs the AJAX validation.
     * @param CModel the model to be validated
     */
    protected function performAjaxValidation($model)
    {
        if(isset($_POST['ajax']) && $_POST['ajax']==='marks-form')
        {
            echo CActiveForm::validate($model);
            Yii::app()->end();
        }
    }
public function actiondynamicstates()
{

      // $model1=new Examresults;
        /*$exam_type=(int)$_POST['exam_type'];

        if ($exam_type==0)
                $data=array(0=>'States:');
        else if ($exam_type==1)
                $data=array(1=>'Alaska', 2=>'California');    
        else if ($exam_type==2)
                $data=array(1=>'Orleans', 2=>'Bordeaux');
        else if ($exam_type==3)
                $data=array(1=>'Hokkaido', 2=>'Okinawa');*/
//$schoolfee = feesettings::model()->find("feetype='schoolfee' and class='".$_REQUEST['class']."'");

 $data=admission::model()->findAll('class=:class',
                  array(':class'=>$_POST['class']));

   $data=CHtml::listData($data,'studentid','studentfname');

        foreach($data as $value=>$name)
                echo CHtml::tag('option', array('value'=>$value), CHtml::encode($name), true);

}

} 
```

**标记.php**

```
<?php

/**
 * This is the model class for table "marks".
 *
 * The followings are the available columns in table 'marks':
 * @property integer $id
 * @property string $class
 * @property string $studentid
 * @property string $examtype
 * @property integer $firsttlanguage
 * @property integer $secondlanguage
 * @property integer $thirdlanguage
 * @property integer $mathematics
 * @property integer $science
 * @property integer $social
 * @property integer $totalmarks
 * @property string $grade
 */
class Marks extends CActiveRecord
{
    /**
     * Returns the static model of the specified AR class.
     * @param string $className active record class name.
     * @return Marks the static model class
     */
    public static function model($className=__CLASS__)
    {
        return parent::model($className);
    }

    /**
     * @return string the associated database table name
     */
    public function tableName()
    {
        return 'marks';
    }

    /**
     * @return array validation rules for model attributes.
     */
    public function rules()
    {
        // NOTE: you should only define rules for those attributes that
        // will receive user inputs.
        return array(
            array('class, studentid', 'required'),
            array('firsttlanguage, secondlanguage, thirdlanguage, mathematics, science, social, totalmarks', 'numerical', 'integerOnly'=>true),
            array('class, studentid, examtype', 'length', 'max'=>30),
            array('grade', 'length', 'max'=>5),
            // The following rule is used by search().
            // Please remove those attributes that should not be searched.
            array('id, class, studentid, examtype, firsttlanguage, secondlanguage, thirdlanguage, mathematics, science, social, totalmarks, grade', 'safe', 'on'=>'search'),
        );
    }

    /**
     * @return array relational rules.
     */
    public function relations()
    {
        // NOTE: you may need to adjust the relation name and the related
        // class name for the relations automatically generated below.
        return array(
        );
    }

    /**
     * @return array customized attribute labels (name=>label)
     */
    public function attributeLabels()
    {
        return array(
            'id' => 'ID',
            'class' => 'Class',
            'studentid' => 'Studentid',
            'examtype' => 'Examtype',
            'firsttlanguage' => 'Firsttlanguage',
            'secondlanguage' => 'Secondlanguage',
            'thirdlanguage' => 'Thirdlanguage',
            'mathematics' => 'Mathematics',
            'science' => 'Science',
            'social' => 'Social',
            'totalmarks' => 'Totalmarks',
            'grade' => 'Grade',
        );
    }

    /**
     * Retrieves a list of models based on the current search/filter conditions.
     * @return CActiveDataProvider the data provider that can return the models based on the search/filter conditions.
     */
    public function search()
    {
        // Warning: Please modify the following code to remove attributes that
        // should not be searched.

        $criteria=new CDbCriteria;

        $criteria->compare('id',$this->id);
        $criteria->compare('class',$this->class,true);
        $criteria->compare('studentid',$this->studentid,true);
        $criteria->compare('examtype',$this->examtype,true);
        $criteria->compare('firsttlanguage',$this->firsttlanguage);
        $criteria->compare('secondlanguage',$this->secondlanguage);
        $criteria->compare('thirdlanguage',$this->thirdlanguage);
        $criteria->compare('mathematics',$this->mathematics);
        $criteria->compare('science',$this->science);
        $criteria->compare('social',$this->social);
        $criteria->compare('totalmarks',$this->totalmarks);
        $criteria->compare('grade',$this->grade,true);

        return new CActiveDataProvider($this, array(
            'criteria'=>$criteria,
        ));
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T13:41:03.283

看看这里[创建表单](http://www.yiiframework.com/doc/guide/1.1/en/form.view)。从 Yii 1.1.1 开始，有一个名为[CActiveForm](http://www.yiiframework.com/doc/api/1.1/CActiveForm) 的小部件，因此当您使用此小部件时，您可以使用`$form->textField($model,'username')`而不是使用创建表单输入，`CHtml::activeTextField($model,'username')`但两者的工作方式相同。

因此，如果该字段未保存在数据库中，可能是因为您尚未将其添加到模型的规则中。

```
public function rules() {
    return array(
        array('username', 'safe'),
    );
) 
```

# mysql - 如何在网站中实现消息功能

> ID：10997785
> 
> 赞同：1
> 
> 时间：2012-06-12T13:32:09.060
> 
> 标签：mysql, sql, message

我有一张桌子

```
____________________________________________________________
|                         Message                           |
|___________________________________________________________|
| Sender  |  Message    |    Receiver       |   message_id  |   
| John    | How Are You?|      Will         |       1       |
|_________|_____________|___________________|_______________| 
```

在 Will 计算机中，我显示如下

```
Message By:John
Message:How Are You? 
```

现在假设 John 删除了这条消息但我无法删除记录，因为 Will 尚未删除。因此我正在运行更新查询

```
Update Message Set Sender='' where message_id=1; 
```

但是在这样做之后，计算机消息将更改如下

```
 Message By:                    //Because i have changed sender to null
    Message:How Are You? 
```

现在我该如何克服这个没有得到想要的输出的错误

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T13:42:33.580

其他答案的替代方案（两者肯定都可以）是有一个单独的“收件箱”表。只是将哪些邮件仍然在谁的收件箱中联系起来的东西，例如：

```
__________________________
|        INBOX           |
|________________________|
| User    |  Message_id  |  
| John    |       1      | 
| Will    |       1      | 
|_________|______________| 
```

然后，当 John 删除邮件时，您会从收件箱表中删除该行：

```
__________________________
|        INBOX           |
|________________________|
| User    |  Message_id  |  
| Will    |      1       | 
|_________|______________| 
```

这种方式也很好，因为它将构成消息的元数据与有关其存储位置、人们采取的行动等信息分开。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T13:45:01.777

只需再维护两列`boolean is_deleted(true/false) and deleted_by(S/R)`来维护消息状态已删除（*true 或 false*）和 deleted_by （*Sender 或 Receiver*）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T13:34:45.613

只需包含另外两个（枚举）列来指示，谁已经删除了该消息。

然后为了显示消息，请确保在您的`WHERE`子句中尚未设置相应的值。

无论如何保留`Sender`和`Receiver`列，以便您可以输出所有消息信息并将消息附加给正确的用户。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-12T13:34:21.120

添加单独的布尔 ReadBySender 和 ReadByReciever 列并更新这些而不是实际的发送者/接收者

# android - 移动 SDK（IAP、通知、原生 UI）

> ID：10997788
> 
> 赞同：0
> 
> 时间：2012-06-12T13:32:16.800
> 
> 标签：android, ios, blackberry, mobile, sdk

我正在寻找具有以下适用于 iOS 和 Android 的移动 SDK（BB 和 Win Phone 是奖金）：

-In-App Purchases -Notifications -Native UI -Camera -HTTP（需要从不同的网站获取信息）

最好只写一次所有这些，它可以在所有平台上运行（我认为是乐观的）......

支持这一点的框架是什么？我已经看过我计划使用的 RhoStudio，但我会喜欢替代品，因为我对 Ruby 并不太熟悉（但如果它是最佳选择，我会学习它）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T13:37:08.363

煎茶触摸怎么样？我不知道这是否是您正在寻找的东西，所以只是一个建议。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T13:42:49.717

您可以使用[NSBasic App Studio](http://www.nsbasic.com/app/)和 Phonegap Build。它似乎可以做你想做的事，并且可以在 Windows 上运行。使用 Phonegap Build，您可以为 iOS（需要开发者帐户）以及 Android、Windows Phone、Blackberry、WebOS 和 Symbian 进行构建。我个人以前用过，还不错。您可以获得免费试用版，完整版售价 99 美元。

# wsdl - WSO2 ESB 代理服务 WSDL

> ID：10997790
> 
> 赞同：1
> 
> 时间：2012-06-12T13:32:20.403
> 
> 标签：wsdl, wso2, wso2esb, esb

我是 wso2 的新手，我创建了一个由 Insequence 和端点组成的代理服务。

> 代理服务 -> insequence -> 端点（axis2 中的服务地址）。

当我尝试从soap UI（使用从管理控制台获得的wsdl）测试代理服务时，请求格式不正确。

以下是我在肥皂 UI 中看到的请求消息

> ```
> <soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
>        <soapenv:Header/>
>        <soapenv:Body/>
>     </soapenv:Envelope> 
> ```

请让我知道如何为 WSO2 ESB 的代理服务获取正确的 WSDL。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T05:33:46.253

在创建/编辑代理服务时，您可以选择发布 WSDL 选项并将 WSDL 作为内联文本、URL 或注册表资源提供。在这种情况下，您可以在 Axis2 服务中提供可用的 WSDL。

# php - 当文件大于 post_max_size 时 Symfony2 验证器不工作

> ID：10997791
> 
> 赞同：6
> 
> 时间：2012-06-12T13:32:20.433
> 
> 标签：php, symfony

我已在 php.ini 中将**upload_max_filesize**和**post_max_size**设置为 32Mb。

我正在使用 Symfony2。我创建了一个包含文件变量的实体，以便人们可以上传文件：

```
/**
 * @Assert\File(maxSize="3M")
 */
public $file; 
```

*   当文件小于 3Mb 时，文件被正确上传。
*   当 3Mb 验证器工作正常时，显示正常错误消息“文件太大”
*   但是，当文件 > 32Mb (post_max_size) 时：

> 致命错误：第 177 行 /Applications/MAMP/htdocs/Symfony/vendor/symfony/src/Symfony/Component/HttpKernel/Profiler/Profiler.php 中允许的内存大小为 150994944 字节（试图分配 62353390 字节）

当上传的文件高于**post_max_size**时，有没有办法让验证器工作？Symfony 如何处理大于**post_max_size**的文件上传？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-12T13:47:07.703

这是关于 PHP 的问题，而不是 Symfony。当您限制 POST 参数大小时，您的提交请求甚至不会“到达”控制器。

由于 post_max_size 限制所有 POST 参数，包括文件，**您应该将 post_max_size 定义为高于 upload_max_filesize**。

所以现在，您的问题似乎与这个问题有关：[如何优雅地处理超过 PHP 的 `post_max_size` 的文件？](https://stackoverflow.com/questions/2133652/how-to-gracefully-handle-files-that-exceed-phps-post-max-size)

# c# - 问题继承表单属性和方法

> ID：10997794
> 
> 赞同：1
> 
> 时间：2012-06-12T13:32:48.967
> 
> 标签：c#, inheritance

我正在尝试构建一个基本自定义表单，然后让我的应用程序继承基本表单中的属性和方法。我确实相信我已经正确设置了表单，但是每次我打开继承了 VS 2010 基本表单的新表单时，VS 都会崩溃，我必须重新启动 IDE。这是两种形式的代码；

基础自定义表格；

```
namespace TGBSoftware
{
public partial class BaseForm : Form
{
    public int gnTaxYear { get; set; }
    public string gsTableName { get; set; }
    public string gsUserId { get; set; }

    public BaseForm()
    {
        InitializeComponent();
    }
}
} 
```

继承基本形式的形式；

```
namespace TGBSoftware.CompuTax.Forms
{
public partial class RealEstate : BaseForm
{
    public RealEstate()
    {
        InitializeComponent();
    }
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T13:48:15.383

我不认为你可以`InitializeComponent();` 用这两种形式打电话。仅以顶级形式尝试或使用`base.InitializeComponent();`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T13:35:39.750

感谢大家的帮助，但疯狂的解决方案是删除项目并开始一个新项目。从安全模式开始并使用日志记录确实没有提供任何洞察力。

jrb - 我尝试同时使用和不使用 InitializeComponent()，但都没有帮助。在新项目中，两种形式都有此设置，并且工作正常。我会看到当我创建一个带有导航按钮和东西的表单时会发生什么。

再次感谢。有一个伟大的一周。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T13:38:17.157

您可以做的一件事是在启用日志记录的情况下运行 Visual Studio：

[http://msdn.microsoft.com/en-us/library/ms241272.aspx](http://msdn.microsoft.com/en-us/library/ms241272.aspx)

然后查看错误的堆栈跟踪。很可能缺少 dll 引用，或者有一段代码需要用以下形式包围：if (!DesignMode)...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-12T13:39:36.080

你说“我相信我已经正确设置了表格”。

为什么你不只是重新安装它？？

# visual-studio - 让 msbuild 从源文件名生成目标文件名

> ID：10997802
> 
> 赞同：1
> 
> 时间：2012-06-12T13:33:15.293
> 
> 标签：visual-studio, msbuild, msbuild-task

我试图弄清楚如何使用 MSBuild 从一组配置文件中创建一组 dll。也就是说，我有一些配置文件

```
Policy.1.1.mylib.config
Policy.1.2.mylib.config
...
Policy.1.x.mylib.config 
```

在 msbuild 目标中，我想使用这些文件的列表调用 AL（程序集链接器）任务，并从相应的配置文件参数动态生成Outputfile 参数值（`Policy.1.i.mylib.dll`对于每个）。`i = 1, ..., x`（所有其他参数我都明确知道，所以我可以直接输入它们）。

我对 MSBuild 没有太多经验。我想出了如何在一个文件的后期构建目标中运行 AL 任务，以及如何将配置文件名列表放入列表中，并且确实认为我可以使用批处理循环该列表，但我m 在从源文件名生成目标文件名时卡住了。

（注意：这是 msbuild 3.5，所以似乎没有字符串操作，因为它似乎在 4.0 中。另外，从网上安装额外的库对我来说不是一个选项。）

有什么建议么？也许这种方法不太适合 MSBuild，我只是看不到这样做的正确方法。配置文件是以编程方式生成的，也许除了这些文件之外，我还应该创建一组要处理的文件，每个文件都包含 al 的输入和输出名称，并让 MSBuild 读取这些文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T18:48:58.763

如果您只想创建程序集文件名列表，请通过批处理配置文件名在项目组中创建它们：

```
<ItemGroup>
    <ConfigFiles Include="Path\to\Policy.*.config" />
    <Assemblies Include="%(ConfigFiles.Filename).dll" />
</ItemGroup> 
```

项目`Assemblies`组将包含

```
Policy.1.1.mylib.dll
Policy.1.2.mylib.dll
...
Policy.1.x.mylib.dll 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T17:07:37.560

您可以使用[ItemGroup](http://msdn.microsoft.com/en-us/library/646dk05y.aspx)对配置进行分组，这样您就可以访问[元数据](http://msdn.microsoft.com/en-us/library/ms164313.aspx) 以进行类似 foreach 的循环和重新创建 dll 名称，例如`<Task Input="%(Configs.FullName)" Output="%(Configs.RelativeDir)\%(Configs.Filename).dll" />`

# facebook - 使用 facebook javascript sdk 处理 fql 查询

> ID：10997805
> 
> 赞同：1
> 
> 时间：2012-06-12T13:33:17.483
> 
> 标签：facebook, facebook-graph-api, facebook-javascript-sdk

我刚刚使用 JavaScript SDK 在我的网站上实现了 Facebook 连接。现在我想处理一个 fql 查询。

所以我有两个问题：

1.  是否可以仅使用 JavaScript fql 作为 " `SELECT id, name FROM user WHERE uid IN (SELECT uid1 FROM friends WHERE uid2=me())`" ？

2.  因为当我使用 facebook doc 尝试一些 PHP SDK 代码时

PHP：

```
$app_id = 'MY_ID';
$app_secret = 'MY_APP_SECRET';
$my_url = 'POST_AUTH_URL';
$code = $_REQUEST["code"]; 
```

`$_REQUEST["code"]`通常无法识别，我不知道“ `'POST_AUTH_URL'`”是什么，因为我没有使用 PHP SDK 来处理 Facebook 连接。有人有想法吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-12T14:09:32.227

Using`method: 'fql.query'`是**已弃用**的REST API 的一部分。

恕我直言，一种更好的、面向未来的方式是针对 Graph API 发送查询：

```
FB.api("/fql?q={your urlencoded query}", callback() { … } ); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-06-12T13:35:49.883

使用 JavaScript SDK，您可以轻松执行 FQL 查询 -

```
FB.api(
  {
    method: 'fql.query',
    query: 'SELECT name FROM user WHERE uid=me()'
  },
  function(response) {
    alert('Your name is ' + response[0].name);
  }
); 
```

不要忘记在执行任何查询之前请求您需要的所有权限......

* * *

参考 - [https://developers.facebook.com/docs/reference/javascript/](https://developers.facebook.com/docs/reference/javascript/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-01T18:32:30.167

抱歉，我还不能发表评论，但要澄清[这个有用的答案](https://stackoverflow.com/a/10998422/2133820)；对我有用的是格式化 FQL API 调用，就像我使用 {fields: "ex1,ex2"} 进行 Graph API 调用一样：

```
var fqlRequest = "SELECT name FROM user WHERE uid = me()";
FB.api("/fql",{q:fqlRequest}, function(response){
    // do cool stuff with response here
}); 
```

请注意，我不必对字符串进行 URL 编码，它对我来说工作得很好（我以前使用 `encodeURI(fqlRequest)`过，它返回了一个`unexpected %`错误）。

如果你使用它们，还记得引用文字：

```
var id = "1234567890";
var fqlRequest = "SELECT name FROM user WHERE uid = ' " + id + " ' "; 
```

# java - 翻译画布和偏移操作栏

> ID：10997812
> 
> 赞同：0
> 
> 时间：2012-06-12T13:33:48.450
> 
> 标签：java, android, android-layout

如果不清楚，请多多包涵，这是我第一次在这里发帖。

我在画布上画了几条线，并试图将画布转换为屏幕上的线条居中。问题是，我有一个操作栏（使用 actionbarsherlock），我想从翻译中排除它，即我希望视图的顶部位于操作栏下方。

实际上，数据在整个屏幕高度上垂直居中，但我希望它仅在操作栏下方画布的可见部分垂直居中。

关于实现这一目标的最佳方法的任何想法？

```
@Override
protected void onDraw(Canvas canvas) {
    Paint paint = mPaint;

    paint.setAntiAlias(true);
    paint.setColor(Color.WHITE);
    paint.setStyle(Paint.Style.FILL);

    int centrew = canvas.getWidth()/2;
    int centreh = canvas.getHeight()/2;

    canvas.translate(centrew, centreh);
    canvas.drawLine(0, -5, 0, 5, mPaint);
    canvas.drawLine(5, 0, -5, 0, mPaint);

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T13:38:40.490

如果您知道条的确切大小，则可以将其应用于整个画布高度以增加偏移：

```
int maxV = canvas.getHeight() + barHeight;
int centreh = maxV/2; 
```

我假设，栏在顶部，覆盖了画布的一部分，因此（从左上角开始）的偏移必须更大。如果条形图位于底部，则应减少移位：

```
int maxV = canvas.getHeight() - barHeight;
int centreh = maxV/2; 
```

编辑：如果条在不同设备上的像素大小不同，您必须稍微修改一下才能使其工作。您可以安全地对酒吧做出假设，并在它们不成立的情况下对其进行修改。您可以假设为条形保留了某个比率并相应地调整绝对像素数（单线只是为了说明）：

```
int maxV = Math.round(canvas.getHeight()*(1f + barRatio)); 
```

您可以根据屏幕的纵横比进一步调整比例，以使其更好地工作。

不幸的是，没有真正干净的解决方案，因为您无法读取当前布局和提取大小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T12:25:12.053

我使用的解决方案如下所述：

[http://developer.android.com/resources/samples/HoneycombGallery/src/com/example/android/hcgallery/TitlesFragment.html](http://developer.android.com/resources/samples/HoneycombGallery/src/com/example/android/hcgallery/TitlesFragment.html)

基本上我的活动定义了以下布局侦听器：

```
ViewTreeObserver.OnGlobalLayoutListener layoutListener = new ViewTreeObserver.OnGlobalLayoutListener() {
    @Override
    public void onGlobalLayout() {
        mmv.setAbShift(MunroBag.this.actionBar.getHeight());
    }
}; 
```

然后视图类定义了以下方法：

```
 public void setAbShift(int shift)
    {
        abShift = shift;
        this.invalidate();
    } 
```

因此 onDraw 被调用，并根据 actionBar 的高度将移位应用于视图。

# abap - APPEND wa TO itab 中的语法错误“字段 ITAB 未知”

> ID：10997814
> 
> 赞同：0
> 
> 时间：2012-06-12T13:33:54.503
> 
> 标签：abap, internal-tables

我正在尝试向我的内部表中添加一条新记录，并且此代码给了我一个错误，但我正在做与我的 SAP 书中完全相同的事情。我究竟做错了什么？

```
TYPES : BEGIN OF personel_bilgileri,
  Ad TYPE c LENGTH 20,
  Soyad TYPE c LENGTH 20,
  Telefon_no Type n LENGTH 12,
  END OF personel_bilgileri.

TYPES personel_bilgi_tablo_tipi TYPE STANDARD TABLE OF
personel_bilgileri WITH NON-UNIQUE KEY ad soyad.

DATA : personel_bilgi_kaydi TYPE personel_bilgileri,
       personel_bilgi_tablosu TYPE personel_bilgi_tablo_tipi.

personel_bilgi_kaydi-ad = 'Murat'.
personel_bilgi_kaydi-soyad = 'Sahin'.
personel_bilgi_kaydi-telefon_no = '5556677'.

APPEND personel_bilgi_kaydi TO personel_bilgileri.

personel_bilgi_kaydi-ad  = 'Ayse'.
personel_bilgi_kaydi-soyad = 'Bil'.
personel_bilgi_kaydi-telefon_no = '5556611'.

APPEND personel_bilgi_kaydi TO personel_bilgileri.

personel_bilgi_kaydi-ad = 'Mehmet'.
personel_bilgi_kaydi-soyad = 'Kalan'.
personel_bilgi_kaydi-telefon_no = '5556622'.

APPEND personel_bilgi_kaydi TO personel_bilgileri. 
```

实际上，我不知道应该使用哪种添加记录方法。我的意思是有太多的方法来做这个操作。哪种方法才是真正的方法？

我收到此错误：

```
The field Personel_bilgileri is unknown, but there are following fields similar names... 
```

此外，我可以用 LOOP AT 做到这一点，但我不明白 LOOP AT 的用法。它有什么作用？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T14:09:18.387

在您的代码示例中，您首先定义`PERSONEL_BILGILERI`为`TYPE`，然后定义为的`PERSONEL_BILGI_TABLO_TIPI`内部表`TYPE`。`PERSONEL_BILGILERI`

到目前为止，还没有声明任何变量。只有数据类型。

然后：

*   `PERSONEL_BILGI_KAYDI`被定义为类型`PERSONEL_BILGILERI`。这是您用作工作区的结构（很好）。
*   `PERSONEL_BILGI_TABLOSU`被定义为类型`PERSONEL_BILGI_TABLO_TIPI`。你`PERSONEL_BILGI_TABLOSU`的内部表也是如此。

当您追加工作区时，您必须追加到内部表，而不是数据类型。尝试使用`PERSONEL_BILGI_TABLOSU`而不是您的类型`PERSONEL_BILGI`：

```
APPEND personel_bilgi_kaydi TO personel_bilgileri_tablosu. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T14:11:17.387

您需要将您的 WA(workarea, personel_bilgi_kaydi) 附加到您的表 (personel_bilgi_tablosu) 中。您不能将 WA 附加到定义的类型。

所以它应该是这样的：

```
APPEND personel_bilgi_kaydi TO personel_bilgi_tablosu. 
```

您也可以使用此代码在页面上显示它们。

```
 LOOP AT personel_bilgi_tablosu into personel_bilgi_kaydi.

       write: / 'İSİM: ' ,personel_bilgi_kaydi-ad,
             'SOYİSİM: ',personel_bilgi_kaydi-soyad,
              'TEL NO: ', personel_bilgi_kaydi-telefon_no.

    ENDLOOP. 
```

您可以使用其他方法在页面上显示您的表格，例如 REUSE_ALV_GRID_DISPLAY。您可以在 scn.sap.com 中获得更多信息

希望对您有所帮助。

可莱凝胶素。

塔尔哈

# nuget - 尝试安装 nuget 包时出错

> ID：10997827
> 
> 赞同：6
> 
> 时间：2012-06-12T13:34:34.130
> 
> 标签：nuget

这两天一直报错：

`PM> install-package routedebugger`

`Install-Package : The underlying connection was closed: An unexpected error occurred on a send. At line:1 char:16 + install-package <<<< routedebugger + CategoryInfo : NotSpecified: (:) [Install-Package], WebException + FullyQualifiedErrorId : NuGetCmdletUnhandledException,NuGet.PowerShell.Commands.InstallPackageCommand`

我在很多软件包（modernizr）上都遇到了这个错误，但有些安装得很好，比如 Dapper。我找到了这篇[文章](https://stackoverflow.com/questions/8972497/visual-studio-2010-nuget-error-the-underlying-connection-was-closed-could-not)并尝试更改我的 nuget 提要，但同样的事情仍然发生。我有 nuget 1.8.30524.9000。有任何想法吗？

更新：我决定尝试在几台不同的机器上，以确保我的 Visual Studio 2010 安装不会出现问题。他们都失败了。这让我相信也许是互联网。我们最近升级了 websense。我给了网络管理员 nuget feed url，他说它们没有被阻止。所以我去了我自己的个人实验室，我可以通过我的 Ipad 连接它，一切都很完美。我尝试使用 fiddler 来尝试监视 nuget，但显然即使提要是 http 也不起作用。知道如何诊断发生了什么吗？奇怪的是一些软件包安装得很好。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T16:24:31.973

我能够使用wireshark弄清楚它。不知道为什么我无法看到 fiddler 的流量（所有进程都有 https 代理设置），但无论如何它试图从以下位置下载包： [https ://nugetgallery.blob.core.windows.net/packages /Modernizr.2.5.3.nupkg](https://nugetgallery.blob.core.windows.net/packages/Modernizr.2.5.3.nupkg)

这被websense阻止了。管理员打开它，现在一切正常。我假设某些包的 URL 不同（如 dapper），它们能够成功下载。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-16T05:49:17.477

我遇到了同样的问题，重新安装 nuget 是我的解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-02-22T20:34:15.047

我在命令窗口中收到此错误

`nuget update -self`

错误：

> 底层连接已关闭：发送时发生意外错误。

[我只是从https://www.nuget.org/downloads](https://www.nuget.org/downloads)下载并替换了 nuget.exe

（使用这个版本：nuget.exe v5.7.0）它解决了。

# matlab - 从向量 MATLAB 中删除连续重复项

> ID：10997829
> 
> 赞同：2
> 
> 时间：2012-06-12T13:34:37.173
> 
> 标签：matlab, vector, duplicates

这是我的 MATLAB 代码：

```
[numeric, pics] = xlsread('matrix.xls');
[r,c] = size(pics);
done = r*c;

randvecall = randsample(done, done, true);
randvec = randvecall([1,diff(randvecall)]~=0);
currk = randvec(k); 
```

本质上，它的作用是从 Microsoft Excel 电子表格中构建一组值。我想在数组中有重复，但不是连续重复，所以我添加了一行代码来删除它们。当我手动将值输入 randvecall 并运行上述代码时，它可以完美运行。但是，当我运行如上所示的代码时，出现以下错误：

```
??? Error using ==> horzcat
CAT arguments dimensions are not consistent.

Error in ==> testAS_randsample at 76
randvec = randvecall([1,diff(randvecall)]~=0); 
```

为什么会这样？例如，这有效：

```
randvecall=[1 2 3 4 5 5 5 5 8 7 8 8];
randvec = randvecall([1,diff(randvecall)]~=0);
disp(randvec)

randvec = [1 2 3 4 5 8 7 8] 
```

这正是我想要我的代码做的事情。但是为什么我的实际代码会给我 horzcat 错误消息？有人可以帮我吗？它一定与 randsample 构建 randvecall 数组的方式有关，但我不明白为什么这会给我那个错误信息？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T13:44:07.853

这似乎是如何`randsample(n,k,true)`工作的问题：它返回一个`1xk`向量，而您需要一个`kx1`向量。转`randvecall`置应该可以解决问题。

**编辑：**

让我为普通读者改写代码：

```
randvec = randvecall([1,diff(randvecall')]~=0); 
```

# joomla - Joomla K2 - 如何按额外字段日期订购商品

> ID：10997836
> 
> 赞同：0
> 
> 时间：2012-06-12T13:35:06.110
> 
> 标签：joomla, field, joomla-k2, extra

我和一个同事正在使用 joomla 开发一个网站，我们已经放弃了 joomla 文章组件并用 K2 替换它。

网站内容的一部分，正在发布（使用 K2 项目）即将举行的现场活动，例如即将举行的音乐会，其中包含有关该活动的信息、图像等。

我们想知道是否可以按事件日期订购这些物品，或者换句话说，如何通过物品的额外字段：日期订购这些物品。K2 核心只让我们按发布日期或创建日期对这些项目进行排序，这不是我们需要的。

如果有人知道克服这个障碍的简单方法，将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T14:11:40.913

我们一直在研究完全相同的事件问题。K2 不允许这样做，但我们在 k2 中找到了这样做的方法。解决方案是覆盖模板，但只添加了一行。我们的活动部分在这里[vida latina events](http://www.vidalatinaweb.com/it/eventi/congressi-ed-eventi)，有 1 个额外的字段“日期”。我们想按此字段排序（此解决方案也适用于任何其他额外字段）。

**解决方案** 创建一个链接到空文章的菜单项。创建一个从您的 k2 类别中选择的模块 k2 内容，该内容显示在您的新空白页面上 对于“排序方式”，选择“按字母顺序排列的标题”——我们将使用它，因为我们要破解它——所以它需要是你的订单不会用于任何其他模块 打开第 195 行的文件 modules/mod_k2_content/helper.php 找到代码

case 'alpha' : $orderby = 'i.title DESC'; 休息;

并替换为：

case 'alpha' : $orderby = 'i.extra_fields DESC'; 休息;

如果您只有一个额外的字段，这将起作用。如果您有多个额外的字段，则必须修改解决方案，但我认为您了解了总体思路。

希望这可以帮助 Jeyjoo

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T01:08:25.823

我正在做一个类似的项目——使用 K2 制作活动日历。我有同样的问题。我要做的是 - 对于 2012 年 9 月 22 日的活动，我将创建日期设置为 2011 年 9 月 22 日（一年前）。然后我将 K2 设置为按“创建日期”排序，并将创建日期设置为隐藏。这似乎是一个完美的解决方案......唯一的问题是闰年日期（2 月 29 日）但您可以将创建日期设置为前一年的 2 月 28 日，并使用小时和分钟来获得正确的订单。我希望这是有道理的。

# c - 使用 cvSaveImage 保存 IplImage（不是 IplImage*）

> ID：10997838
> 
> 赞同：0
> 
> 时间：2012-06-12T13:35:15.137
> 
> 标签：c, opencv

我想使用下面的代码保存 IplImage（不是 IplImage*）

```
IplImage ipl_from_mat((IplImage)imgDisparity8U); 
cvNamedWindow("window", CV_WINDOW_AUTOSIZE); 
variable when you need it as IplImage* 
cvShowImage("window", &ipl_from_mat);  
cvSaveImage("disparity.jpg",ipl_from_mat);//Problem with this line 
```

但似乎不可能。请帮我。

感谢和问候索姆

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-12T13:42:48.780

你不可能像这样传递一个指针：

```
cvSaveImage("disparity.jpg", &ipl_from_mat); 
```

# java - 当.Net服务不可用时如何在java中测试.net webservice

> ID：10997848
> 
> 赞同：0
> 
> 时间：2012-06-12T13:36:05.407
> 
> 标签：java, .net, web-services, testing, reverse-engineering

我只有一个 .net wsdl 文件，我想使用 java 连接到它来测试一些功能。

但问题是我只能在生产环境中访问 .Net 服务器！我无法在工作中连接到它！！！！

我正在考虑一种对wsdl文件进行逆向工程并从中生成java类的方法，然后我可以在java中创建另一个与.Net web服务完全相同的web服务并运行我的程序并使用java对其进行测试。

您知道将 .net Web 服务反向工程为 java 类的任何工具或命令吗？我听说过SOAPUI，它有这样的功能吗？

**编辑 ：**

顺便说一句，我使用的是 jax-ws（java webservice 的参考实现）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T13:43:10.340

好吧，你可以做的是：

1）创建一个Maven项目

2) 将[cxf-codegen-plugin](http://cxf.apache.org/docs/maven-cxf-codegen-plugin-wsdl-to-java.html)添加到 pom.xml 文件中

3) 插件生成一个 Java 接口，以及 SOAP 通信所需的类

4）创建一个实现接口的类（前提是你知道每个方法背后的逻辑）

5) 你现在有一个 Java 中的 web 服务，它与 .net 对应物做同样的事情

6) 部署到 Glassfish/Tomcat/etc 等应用服务器

5）？？？

6) 利润

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T13:55:57.583

一个适当编写的 Web 服务不应该关心客户端或服务器是用什么语言编写来执行其功能的。只需将[wscompile](http://docs.oracle.com/cd/E17802_01/webservices/webservices/docs/1.5/jaxrpc/jaxrpc-tools.html)等实用程序指向wsdl 并给出正确的参数组合，它就会为您生成类存根。

# string - 如何从 Oracle 中的 PL/SQL 表类型返回 CSV 字符串

> ID：10997854
> 
> 赞同：1
> 
> 时间：2012-06-12T13:36:24.613
> 
> 标签：string, oracle, types, plsql, collect

我已经定义了一个表类型 PL/SQL 变量并在那里添加了一些数据。

```
create or replace type varTableType as table of varchar2(32767);
my_table varTableType := varTableType()
...
my_table := some_function(); 
```

现在我有了这个`my_table`包含数千条记录的表类型变量。我必须只选择那些以特定字符结尾的记录，比如**“a”**并以逗号分隔的字符串获得结果。我认为 COLLECT 函数可以做到这一点，但我不明白究竟如何。我正在使用 Oracle 10g。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T14:11:43.560

无需进入问题 - 为什么使用表类型而不是表（或临时表），您可以这样做：

```
declare
  my_table varTableType;
  i varchar2(32767);
begin
  my_table := new
              varTableType('bbbb', 'ccca', 'ddda', 'eee', 'fffa', 'gggg');

  select trim(xmlagg(xmlelement(e, column_value || ','))
              .extract('//text()'))
    into i
    from table(my_table)
   where column_value like '%a';

  dbms_output.put_line(i);

end; 
```

有更多的方法来连接行 - [WM_CONCAT](http://psoug.org/definition/WM_CONCAT.htm)（如果启用）或[LISTAGG](http://docs.oracle.com/cd/E14072_01/server.112/e10592/functions087.htm)（自 11g R2 起），但基本思想

```
select column_value 
from table(my_table) 
where column_value like '%a'; 
```

停留

* * *

还有另一种不用sql的方法：

```
declare
  my_table varTableType;
  i varchar2(32767);
begin
  my_table := new
              varTableType('bbbb', 'ccca', 'ddda', 'eee', 'fffa', 'gggg');

  FOR j IN my_table.first .. my_table.last LOOP

     IF my_table(j) like '%a' THEN
        i := i || my_table(j);
     END IF;

  END LOOP;

  dbms_output.put_line(i);

end; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T14:22:40.657

有关执行此操作的多种方法，请参阅 Tim Hall 的这篇[博客文章](http://www.oracle-base.com/articles/misc/string-aggregation-techniques.php)，具体取决于 Oracle 版本。

# iphone - 保存和显示 textfield.text

> ID：10997861
> 
> 赞同：1
> 
> 时间：2012-06-12T13:36:43.850
> 
> 标签：iphone, ios, xcode, uitableview, plist

我有一个带有类别列表的表格视图。我有一个添加按钮，它会弹出一个带有文本字段的警报视图。在该字段中输入的文本应该出现在表格视图中。直到这里一切都很好。但它没有被保存。我想我需要以编程方式将它添加到 plist 中。有人可以帮我吗？

```
//Reading data from plist.
NSString *categoryFile = [[NSBundle mainBundle]pathForResource:@"Categories" ofType:@"plist"];
self.categoryList = [[NSMutableArray alloc]initWithContentsOfFile:categoryFile];

//adding to the tableView
-(void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex
{
if(buttonIndex == 1)
{
    UITextField *newCategoryName = [alertView textFieldAtIndex:0];
    NSInteger section = 0;
    NSInteger row = 0;
    NSIndexPath *indexPath = [NSIndexPath indexPathForRow:row inSection:section];
    NSString *extraContent = newCategoryName.text;
    [[self categoryList]insertObject:extraContent atIndex:row];
    NSArray *indexPathsToInsert = [NSArray arrayWithObject:indexPath];
    [[self tableOfCategories]insertRowsAtIndexPaths:indexPathsToInsert withRowAnimation:UITableViewRowAnimationRight];
    NSLog(@"%@",newCategoryName.text);
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T14:09:26.890

由于该文件位于您的应用程序包中，因此您将无法保存到它

因此，您需要将新数组保存在 Documents Directory 中

将以下内容添加到您的代码中

```
//First change your load code to the following
//try to load the file from the document directory
NSString *categoryFile = [NSHomeDirectory() stringByAppendingPathComponent:@"Documents/Categories"];

//if no file there, load from bundle
if(![[NSFileManager defaultManager] fileExistsAtPath:categoryFile])
{
    categoryFile = [[NSBundle mainBundle]pathForResource:@"Categories" ofType:@"plist"];
}
//Load the array
self.categoryList = [[NSMutableArray alloc]initWithContentsOfFile:categoryFile];

... after adding a new category

[[self categoryList]insertObject:extraContent atIndex:row];
//After adding the new element, save array
[self.categoryList writeToFile: categoryFile atomically:YES]; 
```

这会将新类别保存到原始文件中

# java - 带有绝对外部 URL 的检票测试页面

> ID：10997863
> 
> 赞同：0
> 
> 时间：2012-06-12T13:36:46.437
> 
> 标签：java, servlets, wicket

我有一个 servlet，它执行一些业务登录，然后通过绝对 url 重定向到检票口页面，因为该页面是使用 QueryStringUrlCodingStrategy 定义的。

现在我需要测试调用它重定向到正确呈现的检票口页面的 servlet url。

所以我需要做类似的事情：

```
MockHttpServletRequest servletRequest = tester.getServletRequest();
String url = "http://localhost" + servletRequest.getServletPath() + "" + servletRequest.getContextPath()    + "/myservlet?param1=value1&param2=value2&param3=value3";
tester.getServletRequest().setURL(url);
tester.processRequestCycle();
tester.assertRenderedPage(ExpectedPage.class); 
```

但是测试人员无法识别绝对网址。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T13:31:50.120

问题是 servlet 在测试中不可用，因为它在 web.xml 中定义并且仅使用 servlet 容器部署。

我解决了实例化 Servlet 并手动调用 onGet 方法获取重定向 url 以使用然后呈现我的 Wicket 页面的问题。

# mongodb - MongoDB 共享内存使用情况

> ID：10997870
> 
> 赞同：1
> 
> 时间：2012-06-12T13:36:57.187
> 
> 标签：mongodb, memory

我正在查看具有 16gb ram 的专用 mongo 机器上的最高输出，我注意到 mongod 进程消耗的内存分为 7.5gb RES 和 7.5gb SHR。7.5gb 在 SHR 内存中有什么用？这是否意味着 mongodb 实际上只有 7.5gb 可用于内存映射数据？

# jquery-plugins - Ariel Flesler 的 scrollTo/serialScroll 的任何现代、更新、更好的替代品？

> ID：10997873
> 
> 赞同：0
> 
> 时间：2012-06-12T13:37:02.727
> 
> 标签：jquery-plugins, scroll, slideshow, scrollto, serialscroll

我经常使用 scrollTo 和 "child"-plugin serialScroll，并且喜欢它们，因为它们

1.  实际上是滚动的东西，而不是动画css属性（边距/位置等）
2.  很灵活，可以在许多不同的情况下使用，这与许多其他滚动条/滑块不同，它们添加了一堆你并不真正需要的花里胡哨。

问题是，这些插件自 2009 年以来就没有更新过，尽管它们仍然可以正常工作，但无论 jquery 版本如何，都有一些需要改进的地方（比如在初始化后更改设置的能力），总的来说它没有使用 3 年前的插件是最佳选择，它既坚固又稳定。

有没有人建议其他可能做同样事情的插件，也许更好？

[http://flesler.blogspot.se/2007/10/jqueryscrollto.html](http://flesler.blogspot.se/2007/10/jqueryscrollto.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-08-16T02:59:26.473

这是一个老问题，但作为记录，正如 Shauna 所说，插件并没有过时，OP 可能一直在寻找确实过时的 Google 代码托管。

该插件现在托管在[Github](https://github.com/flesler/jquery.scrollTo)上。鉴于它已经非常稳定，没有太多需要经常更新它，但我确实会在需要时时不时地进行一些提交。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T19:43:57.897

我没有更好的建议（甚至 Google 也提出了 Flesler 的插件或使用基础 JavaScript 或 jQuery 手写），但 Flesler 仍在更新插件。您可以[在 GitHub 中找到最新版本](https://github.com/flesler/jquery.scrollTo)。

# iphone - 从 URL 下载文件并将其转换为 NSString

> ID：10997881
> 
> 赞同：-4
> 
> 时间：2012-06-12T13:37:20.823
> 
> 标签：iphone, objective-c, xcode, url, nsstring

我需要从此 URL 获取内容

> [http://google.fr/ok](http://google.fr/ok)

在 NSString 中，任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T13:40:21.230

如果你不需要担心阻塞主线程，你可以使用：

```
NSString *string = [NSString stringWithContentsOfURL:myURL usedEncoding:nil error:nil]; 
```

如果同步是一个问题，您将不得不使用类似的库`AFNetworking`，或者`RestKit`在后台线程上连接到您的服务器，然后在主线程上通知您。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T13:44:10.187

```
NSError *err = nil;
NSString *urldata = [NSString stringWithContentsOfURL:[NSURL URLWithString:@"http://google.fr/ok"] encoding:NSASCIIStringEncoding error:err]

if (!err){
    NSLog (@"DATA; %@", urldata);
} 
```

# cakephp - 在 Cakephp 中，我可以在模型中使用 afterSave() 来根据刚刚保存的内容执行其他任务吗？

> ID：10997887
> 
> 赞同：2
> 
> 时间：2012-06-12T13:38:03.197
> 
> 标签：cakephp

我有两个模型：绘图有很多面板，面板属于绘图。每次保存面板时，我都想检查它是否是要添加到绘图中的第三个面板。如果是，我想将三个面板合并为一个新的 png 文件，并将 png 的文件名和路径保存到绘图表。

```
class Drawing extends AppModel {
  public $name = 'Drawing';
  public $hasMany = array(
    'Panel' => array(
        'className' => 'Panel',
        'dependent' => true,
        'fields' => array('id', 'filepath', 'filename', 'placement')
        )
  );
}

class Panel extends AppModel {
  public $name = 'Panel';
  public $belongsTo = array(
    'Drawing'=>array(
        'className'=>'Drawing',
        'foreignKey'=>'drawing_id',
        'counterCache' => true
        )
    );
} 
```

由于我在 Panel 模型中将 counterCache 设置为 true，因此我在绘图表中使用 panel_count 跟踪面板——并且我可以检查何时有 3 个面板。我认为最好的方法是使用 afterSave() 回调。这样，我可以检查现在是否有三个面板，如果有，我可以更新我想要的任何内容。（一旦有三个面板，我的控制器会阻止用户添加新面板）。但是，我认为下面的代码不起作用——它会阻止我的应用程序的其他部分运行，如果我删除 afterSave() 函数，一切都会再次运行。如何从我的绘图模型中检查 panel_count？有一个更好的方法吗？

```
// Inside of the Drawing model... 
public function afterSave($created){
  if ($this->data[panel_count] == 3){
    // create a new image by merging the three panel images together
    // add the filename and path of the new image to the database
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T10:03:04.050

创建一个新的模型方法来执行该功能并使用控制器中的该方法进行保存。原因是 Drawing.panel_count 属性的更改（您必须更新绘图记录，这会创建一个 afterSave 循环）。

我通常避免任何数据修改的回调（尤其是在同一模型中），因为它们每次都运行，有时我只是想保存而不需要额外的修改。将一段代码从方法移动到 afterSave 回调也比其他方式更容易。

# excel - 拆分大型 Excel 程序

> ID：10997890
> 
> 赞同：1
> 
> 时间：2012-06-12T13:38:17.063
> 
> 标签：excel, vba

由于我在 Excel 中的数据集超过了非常庞大的数量，我有两个程序都耗尽了内存。

```
Sub format()
Dim x, Y(), i&, j&, k&, s

x = Range("A1", Cells(1, Columns.count).End(xlToLeft)).Value
With CreateObject("Scripting.Dictionary")
.CompareMode = 1
For i = 1 To UBound(x, 2)
    .Item(x(1, i)) = i
Next i

x = Application.Trim(Range("BL3", Cells(Rows.count, "BL").End(xlUp)).Value)
ReDim Y(1 To UBound(x), 1 To .count): j = 1

For i = 1 To UBound(x)
    If InStr(x(i, 1), "==") = 0 Then
        s = Split(x(i, 1))

        If .Exists(s(0)) Then
        k = .Item(s(0)): Y(j, k) = mid(x(i, 1), Len(s(0)) + 2)
        End If
    Else
        j = j + 1
    End If
Next i
End With

[a2].Resize(j, UBound(Y, 2)).Value = Y()

End Sub 
```

以上是我用来将一列数据拆分/修剪成多行/多列的过程。

我已将数据放入两列，每列由 60k 行组成，我需要做的是一旦通过 BL 读取，通过 BO 读取并继续从第一行开始将第二行数据放在新行下方完成的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T20:32:30.700

像这样的东西（未经测试）可能对你有用。它通过使用较小尺寸的块来避免创建巨大的二维数组。

```
Sub format()

Const BLOCK_SIZE As Long = 10000
Dim x, Y(), i&, j&, k&, s
Dim d As Object
Dim rOffset As Long
Dim xCount As Long

    Set d = CreateObject("Scripting.Dictionary")
    d.CompareMode = 1

    x = Range("A1", Cells(1, Columns.Count).End(xlToLeft)).Value
    For i = 1 To UBound(x, 2)
          'using Add: you probably want this to error if duplicates exist...
          d.Add x(1, i), i         
    Next i

    x = Application.Trim(Range("BL3", Cells(Rows.Count, "BL").End(xlUp)).Value)
    xCount = UBound(x)
    rOffset = 0

    ReDim Y(1 To BLOCK_SIZE, 1 To d.Count)
    j = 1

    For i = 1 To xCount
        If InStr(x(i, 1), "==") = 0 Then
            s = Split(x(i, 1))

            If d.Exists(s(0)) Then
                k = d(s(0))
                Y(j, k) = Mid(x(i, 1), Len(s(0)) + 2)
            End If
        Else
            j = j + 1
            If j > BLOCK_SIZE Then
                [a2].Offset(rOffset, 0).Resize(BLOCK_SIZE, d.Count).Value = Y()
                ReDim Y(1 To BLOCK_SIZE, 1 To d.Count)
                j = 1
                rOffset = rOffset + BLOCK_SIZE
            End If
        End If
    Next i

    [a2].Offset(rOffset, 0).Resize(BLOCK_SIZE, d.Count).Value = Y()

End Sub 
```

# http - 客户端对 http 管道中的多个请求进行长轮询。

> ID：10997893
> 
> 赞同：0
> 
> 时间：2012-06-12T13:38:17.777
> 
> 标签：http, unix, pipeline

我正在寻找可以在 Unix 系统上运行的客户端软件，以便在单个 http 管道中对多个请求进行长轮询。

基本上我们需要向服务器发出几个长轮询 GET 请求。所有请求都需要在单个 HTTP 管道中完成。

客户端需要在任何给定时间打开 N 个请求，其中`N > 1`.

服务器将使用`200 OK`或响应`204 No Content`。

在 a 的情况下`200 OK`，需要将响应传送到新进程中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T13:44:52.860

这可以使用 PHP 轻松实现。[HttpRequestPool](http://ch2.php.net/manual/en/httprequestpool.construct.php)可用于构建自定义客户端来执行此操作。另请参阅[如何使用 HTTP 1.1 持久连接和 PHP 流水线？](https://stackoverflow.com/questions/7335058/how-can-i-make-use-of-http-1-1-persistent-connections-and-pipelining-from-php)

使用 Go 也相当容易，如果您自己创建连接，您只需发送所有请求，然后您可以按顺序读取响应，它会通过一个 http 管道连接发送所有请求。

```
conn, _ := net.Dial("tcp", "127.0.0.1:80")
client := httputil.NewClientConn(conn, nil)

req, _ := http.NewRequest("GET", "/", nil)
client.Write(req)

resp, _ := client.Read(req) 
```

你应该做更多的错误检查。

# php - 如果当前页面 URL 等于 X OR X？

> ID：10997897
> 
> 赞同：3
> 
> 时间：2012-06-12T13:38:21.757
> 
> 标签：php, wildcard

我在 internetz 上找到了这段代码，它检查当前页面的 url；

```
function curPageURL() {
$pageURL = 'http';
if ($_SERVER["HTTPS"] == "on") {$pageURL .= "s";}
$pageURL .= "://";
if ($_SERVER["SERVER_PORT"] != "80") {
$pageURL .= $_SERVER["SERVER_NAME"].":".$_SERVER["SERVER_PORT"].$_SERVER["REQUEST_URI"];
} else {
$pageURL .= $_SERVER["SERVER_NAME"].$_SERVER["REQUEST_URI"];
}
return $pageURL;
} 
```

所以现在我可以做这样的事情；

```
elseif (curPageURL() == "http://www.example.com/pageexample") {
<meta tags here>
} 
```

伟大的。但我也想将它用于分页页面。这些 URL 如下所示：

```
http://www.example.com/pageexample?start=30&groep=0
http://www.example.com/pageexample?start=60&groep=0
http://www.example.com/pageexample?start=90&groep=0
[....]
http://www.example.com/pageexample?start=270&groep=0 
```

我可以为这些链接中的每一个使用 if 语句.. 但我更愿意使用一个。是否可以添加通配符或其他内容？像这样我猜（注意`*`）

```
elseif (curPageURL() == "http://www.example.com/pageexample" OR curPageURL() == "http://www.example.com/pageexample?start=*&groep=0") { 
```

**编辑**： 我想对所有这些 URL 执行此操作，因为我想给它们相同的`meta description`,`<title>`和`<link rel="canonical"`. 我可以通过为每个页面（10+ atm）执行一个 if 语句来手动执行此操作，但我认为有更好的方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T13:41:24.290

为什么不直接使用[`parse_url()`](http://us2.php.net/manual/en/function.parse-url.php)函数？从手册页：

```
<?php

$url = 'http://username:password@hostname/path?arg=value#anchor';
print_r(parse_url($url));

?>

// The above would print
Array
(
    [scheme] => http
    [host] => hostname
    [user] => username
    [pass] => password
    [path] => /path
    [query] => arg=value
    [fragment] => anchor
) 
```

对于您的特定情况，您可以只检查`host`and`path`变量。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T13:44:13.430

听起来很像正则表达式问题：

```
if (preg_match("#^http://www.example.com/pageexample(\?start=[^&]*&groep=0)?#", curPageURL())) {
    // it matches
} 
```

该表达式的`[^&]*`作用类似于您的`*`. `; to match non-empty items, use`[^&]+`。它匹配这些：

```
http://www.example.com/pageexample
http://www.example.com/pageexample?start=30&groep=0 
```

**更新**

不完全清楚为什么需要与完整的规范 URL 进行比较，除非您有多个域指向相同的代码库。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-12T13:43:47.120

您应该使用字符串比较函数

```
if (strstr(curPageURL(), 'http://www.example.com/')) !== FALSE) {
  // curPageURL() contains http://www.example.com/
} 
```

或者

```
if (preg_match('/^http\:\/\/www\.example\.com\//', curPageURL()) { 
  // curPageURL() starts with http://www.example.com/
} 
```

有很多方法可以做到

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-12T13:43:52.090

你可以把这个包起来

```
elseif (curPageURL() == "http://www.example.com/pageexample" OR curPageURL() == "http://www.example.com/pageexample?start=*&groep=0") { 
```

在一个 while 循环中，将 30 添加到每次迭代中都有通配符的变量中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-12T13:44:20.663

你试过正则表达式吗？

```
if (preg_match('/http:\/\/www\.example\.com\/pageexample\?start=[0-9]+&groep\=0/i', "http://www.example.com/pageexample?start=34&groep=0")) {
   echo "A match was found.";
else {
   echo "A match was not found.";
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-12T13:45:43.523

如果您不使用 $_SERVER 数组中的 query_string 元素，所有分页 URL 都将返回相同的 URL：[http://www.example.com/pageexample](http://www.example.com/pageexample)，您可以使用

```
echo $_SERVER["SERVER_NAME"].$_SERVER["REQUEST_URI"] ; 
```

对比

```
echo $_SERVER["SERVER_NAME"].$_SERVER["REQUEST_URI"].'?'.$_SERVER["QUERY_STRING"] ; 
```

您会看到在第一种情况下您没有收到 GET 参数

# web-services - 浏览器无法在我的黑莓模拟器中运行

> ID：10997902
> 
> 赞同：0
> 
> 时间：2012-06-12T13:38:36.253
> 
> 标签：web-services, cordova, phonegap-plugins

我正在使用 PhoneGap 框架开发黑莓应用程序。我已经使用下面的链接执行了示例应用程序

[http://wiki.phonegap.com/w/page/31930982/Getting%20Started%20with%20PhoneGap%20BlackBerry%20WebWorks](http://wiki.phonegap.com/w/page/31930982/Getting%20Started%20with%20PhoneGap%20BlackBerry%20WebWorks)

但是浏览器在我的模拟器中无法运行。我的意思是，如果我尝试访问 Google 网站，我会遇到以下错误

![在此处输入图像描述](../Images/0ecc29e7478770c8d44e5bbc8f3b1a6a.png)

我也尝试了以下步骤 1）我已经安装了“BlackBerry Email and MDS Services Simulators 4.1.2” 2）运行 MDS 并运行我的应用程序

即使我遇到问题。请指教！

设备详细信息：Windows 操作系统、PhoneGap、BlackBerry 电子邮件和 MDS 服务模拟器 4.1.2、模拟器：9550、BlackBerry WebWorks SDK 2.3.1.5

配置文件

```
<?xml version="1.0" encoding="UTF-8"?>

<!--
  Widget Configuration Reference:
    http://docs.blackberry.com/en/developers/deliverables/15274/
-->

<widget xmlns="http://www.w3.org/ns/widgets"
        xmlns:rim="http://www.blackberry.com/ns/widgets"
    version="1.0.0.0">

  <name>Corperate Directory</name>
<access subdomains="false" uri="http://www.google.com"/>

  <description>
      A sample application written with Cordova.
  </description>

  <license href="http://opensource.org/licenses/alphabetical">
  </license>

  <!-- Cordova API -->
  <feature id="blackberry.system" required="true" version="1.0.0.0" />
  <feature id="org.apache.cordova" required="true" version="1.0.0" />
  <feature id="blackberry.find" required="true" version="1.0.0.0" />
  <feature id="blackberry.identity" required="true" version="1.0.0.0" />
  <feature id="blackberry.pim.Address" required="true" version="1.0.0.0" />
  <feature id="blackberry.pim.Contact" required="true" version="1.0.0.0" />
  <feature id="blackberry.io.file" required="true" version="1.0.0.0" />
  <feature id="blackberry.utils" required="true" version="1.0.0.0" />
  <feature id="blackberry.io.dir" required="true" version="1.0.0.0" />
  <feature id="blackberry.app" required="true" version="1.0.0.0" />
  <feature id="blackberry.app.event" required="true" version="1.0.0.0" />
  <feature id="blackberry.system.event" required="true" version="1.0.0.0"/>
  <feature id="blackberry.widgetcache" required="true" version="1.0.0.0"/>
  <feature id="blackberry.media.camera" />
  <feature id="blackberry.ui.dialog" />

  <!-- Cordova API -->
  <access subdomains="true" uri="file:///store/home" />
  <access subdomains="true" uri="file:///SDCard" />

  <!-- Expose access to all URIs, including the file and http protocols -->
  <access subdomains="true" uri="*" />

  <icon rim:hover="false" src="resources/icon.png" />
  <icon rim:hover="true" src="resources/icon.png" />

  <rim:loadingScreen backgroundColor="#CFCFCF"
                     foregroundImage="resources/loading_foreground.png"
             onFirstLaunch="true">
    <rim:transitionEffect type="fadeOut" />
  </rim:loadingScreen>

  <content src="index.html" />

  <rim:permissions>
    <rim:permit>use_camera</rim:permit>
    <rim:permit>read_device_identifying_information</rim:permit>
    <rim:permit>access_shared</rim:permit>
    <rim:permit>read_geolocation</rim:permit>
  </rim:permissions>

</widget> 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-12T22:01:00.523

您可能需要在 config.xml 中将 google.com 列入白名单：

```
<?xml version="1.0" encoding="UTF-8"?>
<widget xmlns="http://www.w3.org/ns/widgets" 
    xmlns:rim="http://www.blackberry.com/ns/widgets" 
    version="1.0.0.0">
<name>commonPitfalls</name>

    <access subdomains="false" uri="http://www.google.com"/>

</widget> 
```

来自： http: [//supportforums.blackberry.com/t5/Web-and-WebWorks-Development/Common-BlackBerry-WebWorks-development-pitfalls-that-c​​an-be /ta-p/624712](http://supportforums.blackberry.com/t5/Web-and-WebWorks-Development/Common-BlackBerry-WebWorks-development-pitfalls-that-can-be/ta-p/624712)

或者，您可以使用 PhoneGap 提供的连接 API，而不是检查 [google.com：http://docs.phonegap.com/en/1.8.0/cordova_connection_connection.md.html#Connection](http://docs.phonegap.com/en/1.8.0/cordova_connection_connection.md.html#Connection)

或者使用 google.com 的 xhr（在您的 config.xml 中使用适当的白名单）来查看您是否以这种方式获得响应，而不是在页面中加载。

# magento - Magento 1.3.2.4 - 价格排序的高级搜索结果错误

> ID：10997905
> 
> 赞同：1
> 
> 时间：2012-06-12T13:38:54.063
> 
> 标签：magento, search, sorting

我有一个小问题，我不知道如何解决。

首先，我无法将 magento 更新为修复它的真实版本。所以，我正在寻找一种替代方法来修复这个错误，我不知道他们是如何在 magento 版本中修复它的，这就是我在这里问的原因。

第二件事，我正在使用 Magento 1.3.2.4

当我使用高级搜索系统进行搜索并尝试按价格对结果进行排序时，我收到以下消息：

```
You cannot define a correlation name '_price_order_table' more than once 
```

我已经在 Stackoverflow 和其他一些网站上找到了一些潜在的答案，比如这个：[Magento - using the catalog/product_list block more than once](https://stackoverflow.com/questions/5791656/magento-using-the-catalog-product-list-block-more-than-once)

但这不是我的情况。我的布局 xml 文件中没有重复块。

你们中有人知道我为什么会收到此错误消息吗？这似乎是在具有相同别名的同一张表上重复使用“左连接”，但我怎样才能找到哪里？

非常感谢所有读到最后的人，尤其是那些试图帮助我并回答我的人！:-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T14:56:49.737

无论如何......我在这个问题上花了太多时间来搜索完美的解决方案并调试 magento。

最后，我在第 760 行注释 /lib/Zend/db/Select.php 时抛出了异常。即使抛出异常，排序仍然有效。

此文件的示例并带有注释的行。

```
 if (!empty($correlationName)) {
            if (array_key_exists($correlationName, $this->_parts[self::FROM])) {
                /**
                 * @see Zend_Db_Select_Exception
                 */
                #require_once 'Zend/Db/Select/Exception.php';
                //throw new Zend_Db_Select_Exception("You cannot define a correlation name '$correlationName' more than once");
            } 
```

几个小时前我开始搜索这个问题时，我在网上的某个地方看到了这个建议。无论如何，它总是一样的：当我寻求帮助时，我放弃了很好的修复并最终接受了一个解决方法。

希望有一天这对某人有所帮助，如果有人想出任何其他解决方案，请分享！;-)

# c# - FormClosing 看不到 DataGridView 行和列

> ID：10997913
> 
> 赞同：0
> 
> 时间：2012-06-12T13:39:36.987
> 
> 标签：c#, winforms, datagridview

请问，这有什么问题：
Form2_Closing：

```
Form1.DataGridView1.Rows[0].Cells[1].Value = "323"; 
```

> 错误：索引超出范围。必须是非负数且小于集合的大小。参数名称：索引

Form1 上的 DGV 有 10 行和 14 列

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T14:02:19.107

从您的评论看来，您正在尝试创建一个自定义对话框，该对话框将`DataGridView`在调用表单上操作 a 中的特定值。我建议查看创建自定义消息框[的](http://www.techlicity.com/blog/dotnet-creating-a-custom-messagebox.html)示例。

您将能够返回您想要`DataGridViewCell`更新的值，然后将其设置在您的`Form1`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T14:07:52.550

创建一个新的 Winforms 项目并添加一个按钮及其单击处理程序和一个 TextBox *[使其可访问，以便孩子可以设置值。我现在也已经在设计器中公开了]*。然后在此表单上添加以下代码。此外，在项目中添加一个新窗体 (Form2)。

```
private void button1_Click(object sender, EventArgs e)
        {
            var child = new Form2();
            child.FormClosing += new FormClosingEventHandler(ChildFormClosing);
            this.Enabled = false;
            child.Show(this);
        }

        void ChildFormClosing(object sender, FormClosingEventArgs e)
        {
            var child = sender as Form2;
            if (child != null)
            {
                if (child.DialogResult == DialogResult.None)
                {
                    // do data grid view manipulation here 
                    // for ex:
                   (child.Owner as Form1).textBox1.Text = "Hi";
                }
            }
            Enabled = true;
        } 
```

# jquery - jquery ui 可选择和可排序组合

> ID：10997914
> 
> 赞同：12
> 
> 时间：2012-06-12T13:39:43.300
> 
> 标签：jquery, jquery-ui, jquery-ui-sortable, selectable

这就是我得到的：http:
[//jsfiddle.net/hashie5/vk6rZ/](http://jsfiddle.net/hashie5/vk6rZ/)
（不介意布局）

第一个表是第二个和第三个表的组合，需要完成的就是这个。

秒表是可排序的（带有箭头）。

第三个表可选择（不要单击箭头）。

目标是：当您选择多个项目时，您应该能够同时对它们进行排序。

如果因为表格而很难，那么带有列表的示例也会很棒。

在辅助函数中，我尝试克隆所有选定的（ui-selected 类）项目，但这太麻烦了

编辑：
我创建了一个新小提琴： http: [//jsfiddle.net/hashie5/AZr9Z/](http://jsfiddle.net/hashie5/AZr9Z/)
这很好用，但还没有 100% 完成

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-22T08:59:20.600

> *   **演示** [http://so.lucafilosofi.com/jquery-ui-selectable-and-sortable-combined/](http://so.lucafilosofi.com/jquery-ui-selectable-and-sortable-combined/)

主要代码如下所示。

```
sort : function(event, ui) {
    var $helper = $('.ui-sortable-helper'), hTop = $helper.offset().top, hStyle = $helper.attr('style'), hId = $helper.attr('id');
    if (first_rows.length > 1) {
        $.each(first_rows, function(i, item) {
            if (hId != item.id) {
                var _top = hTop + (26 * i);
                $('#' + item.id).addClass('ui-sortable-helper').attr('style', hStyle).css('top', _top);
            }
        });
    }
},
start : function(event, ui) {
    if (ui.item.hasClass('ui-selected') && $('.ui-selected').length > 1) {
        first_rows = $('.ui-selected').map(function(i, e) {
            var $tr = $(e);
            return {
                tr : $tr.clone(true),
                id : $tr.attr('id')
            };
        }).get();
        $('.ui-selected').addClass('cloned');
    }
    ui.placeholder.html('<td colspan="99">&nbsp;</td>');
},
stop : function(event, ui) {
    if (first_rows.length > 1) {
        $.each(first_rows, function(i, item) {
            $(item.tr).removeAttr('style').insertBefore(ui.item);
        });
        $('.cloned').remove();
        first_rows = {};
    }
    $("#uber tr:even").removeClass("odd even").addClass("even");
    $("#uber tr:odd").removeClass("odd even").addClass("odd");
} 
```

​我不确定我是否理解你想要的，无论如何代码实际做的是：

1.  从第一个表中，选择多个项目；
2.  通过将鼠标悬停在选定项目之一上；
3.  您可以将选择的那些移动到列表中任何您想要的位置；
4.  维护所有选定项目的排序顺序；

希望这就是你要找的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-21T05:00:41.330

AFAICT 你的“jsfiddle”工作得很好......但是每当我对 jquery-ui 烦人地坚持选择文本而不是它应该做的任何其他事情感到沮丧时，我都会参考这个片段..

```
// disables text selection on sortable, draggable items 
$( ".sortable" ).sortable();
$( ".sortable" ).disableSelection(); 
```

不确定您是否可以将“禁用”翻转为“启用”，但这是我的 0.02 美元。此外，这是一个好主意，以防有人有一个蹩脚的浏览器/设备可能在同一个“组”元素中定义一个“非活动部分”，为拖动操作提供一个“句柄”......（就像你的小提琴箭头-type-things) 否则这些点击可能会被无情地误认为是选择/编辑的意图……</p>

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-04-09T10:15:53.713

Matthew Andersen 创建的 Gist 完美运行：[https ://gist.github.com/mattandersen/9777423](https://gist.github.com/mattandersen/9777423)

```
<!DOCTYPE html>
<html>
<head>
    <script src="http://code.jquery.com/jquery-1.11.0.min.js"></script>
    <script src="http://code.jquery.com/ui/1.10.4/jquery-ui.min.js"></script>

    <link rel="stylesheet" type="text/css" href="http://code.jquery.com/ui/1.9.2/themes/cupertino/jquery-ui.css" />

    <style>
        #list {
            list-style: none;
            padding-left: 0;
        }

        #list .sort-handle {
            display: none;
        }

        #list .ui-selected .sort-handle
         {
            display: inline;
            padding: 0 0.5em;
            cursor: pointer;
        }

        li.ui-selected {
            background-color: #8888cc;
            color: white;
            font-weight: bold;
            background-image: none;
        }
        li.ui-selecting {
            background-color: #ccccff;
            color: white;
            background-image: none;
        }

    </style>
</head>
<body>
    <ul id="list">
        <li class="ui-widget-content"><span class="sort-handle">&#8225;</span>Item 1</li>
        <li class="ui-widget-content"><span class="sort-handle">&#8225;</span>Item 2</li>
        <li class="ui-widget-content"><span class="sort-handle">&#8225;</span>Item 3</li>
        <li class="ui-widget-content"><span class="sort-handle">&#8225;</span>Item 4</li>
        <li class="ui-widget-content"><span class="sort-handle">&#8225;</span>Item 5</li>
        <li class="ui-widget-content"><span class="sort-handle">&#8225;</span>Item 6</li>
        <li class="ui-widget-content"><span class="sort-handle">&#8225;</span>Item 7</li>
        <li class="ui-widget-content"><span class="sort-handle">&#8225;</span>Item 8</li>
        <li class="ui-widget-content"><span class="sort-handle">&#8225;</span>Item 9</li>
        <li class="ui-widget-content"><span class="sort-handle">&#8225;</span>Item 10</li>
    </ul>

    <script>
        $(function() {
            $('#list').selectable({
                cancel: '.sort-handle'
            }).sortable({
                items: "> li",
                handle: '.sort-handle',
                helper: function(e, item) {
                    if ( ! item.hasClass('ui-selected') ) {
                        item.parent().children('.ui-selected').removeClass('ui-selected');
                        item.addClass('ui-selected');
                    }

                    var selected = item.parent().children('.ui-selected').clone();
                    item.data('multidrag', selected).siblings('.ui-selected').remove();
                    return $('<li/>').append(selected);
                },
                stop: function(e, ui) {
                    var selected = ui.item.data('multidrag');
                    ui.item.after(selected);
                    ui.item.remove();
                }
            });
        });
    </script>
</body> 
```

**演示：http:** [//jsfiddle.net/ghaq69b3/](http://jsfiddle.net/ghaq69b3/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-16T11:41:34.333

我没有对此进行测试，但这是一个想法：

Have the first list selectable (but not sortable) - then when a selection is finished, wrap the selection in a div and then make that div sortable - this way the selection should then drag as one.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-07-15T14:12:24.043

```
$( "#list" )
  .sortable({ handle: ".handle" })
  .selectable()
  .find( "li" )
  .addClass( "ui-corner-all" )
  .prepend( "<div class='handle'><span class='ui-icon ui-icon-carat-2-n-s'></span></div>" ); 
```

# c# - 使用 System.Diagnostics.Process 启动 Jar 文件

> ID：10997915
> 
> 赞同：3
> 
> 时间：2012-06-12T13:40:09.683
> 
> 标签：c#, java, system.diagnostics

我有一个 jar 文件，我想在 C# 中运行它。

这是我到目前为止所拥有的：

```
clientProcess.StartInfo.FileName = @"java -jar C:\Users\Owner\Desktop\myJarFile.jar";
            clientProcess.StartInfo.Arguments = "[Something]";

            clientProcess.Start();
            clientProcess.WaitForExit();

            int exitCode = clientProcess.ExitCode; 
```

不幸的是，我得到“系统找不到指定的文件”，这是有道理的，因为它不是文件而是命令。

我在网上看到代码告诉你使用：

```
System.Diagnostics.Process.Start("java -jar myprog.jar"); 
```

但是我需要返回码并且我需要等待它退出。

谢谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-14T10:13:12.310

终于解决了。文件名必须是 java 并且参数必须包含 jar 文件的位置（以及您想要传递的任何参数）

```
System.Diagnostics.Process clientProcess = new Process();
clientProcess.StartInfo.FileName = "java";
clientProcess.StartInfo.Arguments = @"-jar "+ jarPath +" " + argumentsFortheJarFile;
clientProcess.Start();
clientProcess.WaitForExit();   
int code = clientProcess.ExitCode; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T13:52:44.977

您需要设置可执行文件的环境变量`Path`或`java.exe`指定`java.exe`.

```
 ProcessStartInfo ps = new ProcessStartInfo(@"c:\Program Files\java\jdk1.7.0\bin\java.exe",@"-jar C:\Users\Owner\Desktop\myJarFile.jar");
 Process.Start(ps); 
```

# user-interface - Applescript中的未命名窗口

> ID：10997916
> 
> 赞同：0
> 
> 时间：2012-06-12T13:40:09.757
> 
> 标签：user-interface, scripting, window, applescript, itunes

我正在使用 UI 脚本编写带有 applescript 的 iTunes 脚本。根据我在做什么，会出现一个 iTunes 通知，此时我需要处理它。窗口的名称是 AXWindow:""，我无法让 applescript 处理它。我尝试使用文字“”，尝试将变量定义为“”，尝试使用转义字符的两种情况，并尝试获取最前面进程的名称。

```
tell application "System Events"
     set processName to name of front window
end tell
tell button "whatever" of window processName
     click
end tell 
```

但这会出现“错误“系统事件出现错误：无法获取窗口 1。无效索引。”任何对此的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T15:19:06.493

你可以这样做：

```
tell application "iTunes" to activate
tell application "System Events"
    tell process "iTunes"
        set xxx to first UI element whose role description is "dialog"
    end tell
end tell 
```

或者找到它们：

```
tell application "iTunes" to activate
tell application "System Events"
    tell process "iTunes"
        set xxx to every UI element
    end tell
end tell 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T15:08:07.113

好吧，通常通知或用户对话框将显示为最前面的窗口，并保持在同一应用程序的其他窗口的顶部，直到用户（或脚本）单击某些内容。

因此，对话窗口（如果有的话）应该可以通过说明符访问`window 1`。然后，您可以通过阅读其属性进一步检查这是否真的是您感兴趣的窗口：

```
tell application "System Events" to tell application process "iTunes"
  properties of window 1
end tell 
```

# sql - Oracle 的提示“restrict_all_ref_cons”是什么意思？

> ID：10997919
> 
> 赞同：4
> 
> 时间：2012-06-12T13:40:17.027
> 
> 标签：sql, oracle

我在这样的声明中找到了它：

```
delete /*+ restrict_all_ref_cons  */ from table_1 where ... 
```

任何人都可以提供一些关于提示正在做什么的信息吗？

该数据库是 Oracle 数据库 10.2.0.3.0。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T13:48:59.360

该提示禁用级联删除，因此从父表中删除时不会从子表中删除子行。

请参见此处的示例；

[http://www.oracle-goldengate.info/archives/ogg-replication-for-delete-parent-table-with-fk-delete-cascade-option.html](http://www.oracle-goldengate.info/archives/ogg-replication-for-delete-parent-table-with-fk-delete-cascade-option.html)

```
create table s11 ( x int primary key );
create table s12 ( y int primary key, x references s11 on delete cascade );
insert into s11 values (1);
insert into s12 values (1, 1);
commit;
SQL> delete from s11;
1 row deleted.
SQL> select * from s12;
no rows selected <=========== when deleting parent row in s11, the child row in s12 is also deleted.

SQL> rollback;
Rollback complete.

SQL> delete /*+ RESTRICT_ALL_REF_CONS */ from s11;
1 row deleted.
SQL> select * from s12; <=========== with RESTRICT_ALL_REF_CONS hint, the child row will not be deleted.
Y X
---------- ----------
1 1 
```

# css - 创建由三个元素（顶部、中间、底部）组成的自定义弹出背景（动态高度 - 可调整大小）

> ID：10997921
> 
> 赞同：2
> 
> 时间：2012-06-12T13:40:33.867
> 
> 标签：css, background

我想从三个元素（顶部、中间、底部）构建 CSS 弹出窗口（或块）。我一直以简单的方式进行操作，但顶部/底部上方没有文本区域。现在我必须建立一个自定义背景，但不知道如何。弹出（块）的高度应该取决于内容。没有任何 JS 黑客可以做到吗？

![弹出背景](../Images/cc81872526cdd4d7fcf1f326243474f0.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T16:10:15.677

将其切成嵌套框等
。我尝试的是首先创建一个容器，`div`箭头的 a ，然后是内容（带有背景渐变）和内容的包装器（带有红色背景）和里面的内容.

**HTML**

```
<div class="popup">
    <div class="arrow"></div>
    <div class="content">
        <div class="wrapper">
            <div class="top">Content top</div>
            <div class="red-area">Your main content</div>
            <div class="bottom">Bottom</div>
        </div>
    </div>
</div>​ 
```

现在你有了一个很好的 html 基础，你可以使用它来处理浮动、填充、边距、背景颜色和圆角，如下所示：

**CSS**

```
* { margin: 0; padding: 0 }
body { background: #eee; padding: 50px; }

/* .popup { width: 250px; } */ /* If you wanto to manually set a width for the whole popup */

.arrow {
    float: left;
    width: 25px;
    height: 50px;
    margin-top: 10px;
    background: white; /* your arrow image here */
    position: relative;
}

.content {
    margin-left: 25px;
    background: white;
    background: white url("your/gradient-image.jpg") repeat-x center bottom;
    padding: 10px;
    border-radius: 10px;
    box-shadow: 0 0 15px rgba(0,0,0,0.25);
}

.wrapper {
    padding: 15px;
    background: #ff7f7f;
}
​ 
```

我将箭头向左浮动，内容的左边距和包装器的填充。

它取决于较新的浏览器支持的边界半径和框阴影。如果您喜欢支持较旧的浏览器，那么我建议您使用更多图像来获得视觉效果。

希望这可以帮助。**[jsFiddle 示例](http://jsfiddle.net/5zdmT/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T16:31:20.777

看看[ColorBox](http://www.jacklmoore.com/colorbox)，它很容易使用，你可以自定义它的 css 来做任何你想做的事情。

您还可以将弹出内容定义为来自另一个页面的内容，如下所示：

```
$.colorbox({href:"simplepage.html"}); 
```

现在弹出窗口的宽度将适合您页面的任何内容......

这是一个强大的工具，试试吧。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T15:43:00.507

我找到了简单的方法来做到这一点！

首先创建相关块、内部内容和三个绝对块。每种颜色都不重叠！看例子：

HTML：

```
<div class="popup-container">
    <div class="content">
        test 1<br />
         test 2<br />
         test 3<br />
         test 4<br />
         test 5<br />
         test 6<br />
    </div>
    <div class="top"></div>
    <div class="middle"></div>
    <div class="bottom"></div>
</div> 
```

CSS：

```
.popup-container {
    position: relative;
}

.content {
    z-index: 9999;
}

.top {
    position: absolute;
    width: 100%;
    height: 20px;
    background-color: red;
    top: 0;
    z-index: -1;
    opacity: 0.5;
}

.middle {
    position: absolute;
    width: 100%;
    background-color: yellow;
    bottom: 40px;
    top: 20px; /* height of top */
    z-index: -1;
    opacity: 0.5;
}

.bottom {
    position: absolute;
    width: 100%;
    height: 40px;
    background-color: blue;
    bottom: 0;
    z-index: -1;
    opacity: 0.5;
} 
```

[http://jsfiddle.net/bhnuh/5/](http://jsfiddle.net/bhnuh/5/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-12T15:16:59.363

尝试这个：

- 将布局分为3个div：顶部/底部，高度固定，顶部/底部图像作为背景；和中间，使用中间图像并重复背景。就像是：

```
<!--Container-->
<div class="popup-container">

  <!--Top part-->
  <div class="top" style="height: 20px; background-image: url(top.jpg);"></div>

  <!--Now the middle div with the background repeating only vertically-->
  <div class="middle" style="height: auto; background-image: url(middle.jpg);
   background-repeat: repeat-y;"></div>

  <!--Bottom part-->
  <div class="bottom" style="height: 20px; background-image: url(bottom.jpg);"></div>

</div> 
```

# java - java中的三边测量示例

> ID：10997922
> 
> 赞同：2
> 
> 时间：2012-06-12T13:40:35.360
> 
> 标签：java, geolocation, trilateration

我目前正在开发一个利用 RSSI 根据信号强度确定位置的程序。有人知道三边测量的有效 java 示例在哪里吗？我在网上找不到任何东西。

该程序基本上需要采用 3 个距离，即从 RSSI 得出的距离，然后是三个点的纬度和经度，然后使用二维三边测量确定用户的位置（我忽略了每个信标的高度现在）。

我在这里看到了一个 Python，但我对 Python 的了解还不够，无法理解它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T14:23:09.103

供有相同问题的任何人将来参考。

我刚刚使用了 Girish 提供的链接。 [http://code.google.com/p/talking-points-3/source/browse/trunk/WifiPosition/src/TalkingPoint/thejoo/Trilateration.java?r=109](http://code.google.com/p/talking-points-3/source/browse/trunk/WifiPosition/src/TalkingPoint/thejoo/Trilateration.java?r=109)

但请注意，您必须考虑坐标何时共面，因为代码中没有考虑到这一点。

# clojure - 两个函数的参数有什么区别？

> ID：10997931
> 
> 赞同：1
> 
> 时间：2012-06-12T13:41:08.243
> 
> 标签：clojure

我想知道以下两个函数的参数向量中的差异（如果有的话）。我相信我直觉地理解发生了什么，但第一个让我措手不及。谢谢你。

来自 Clojure 中的 Stackoverflow[递归](https://stackoverflow.com/questions/10995396/recursion-in-clojure/10995576#10995576)

```
(defn foo
  ([x] (foo x []))
  ([x current]
     (if (= x 0)
       (apply vector (sort < current))
       (recur (dec x) (conj current x))))) 
```

和我自己的功能之一

```
(defn strip-csv-header
    "Pulls out first row from csv data. If column definitions, those will
     be removed; else first row of data will be removed."

    [csv-data-all]
    (let [csv-data (rest csv-data-all)]
        csv-data)) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T16:55:10.983

只是对 Jani Hartikainen 回答的补充：

第三种类型的函数参数是可变参数函数：

```
(def bar [ &any-number-of-args ] (map baz any-number-of-args)) 
```

这实际上不是原始问题的一部分，只是为了完整性而做的说明。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-12T13:45:44.283

`foo`使用一个或两个参数，其中`strip-csv-header`仅使用一个参数。

```
(defn foo
  ([x] (foo x [])) ; one arg path

  ([x current]     ; two args path
     (if (= x 0)
       (apply vector (sort < current))
       (recur (dec x) (conj current x))))) 
```

# mysql - MySQL：如何在 NULL 时左连接（user1 阻止 user2 或倒置）？

> ID：10997935
> 
> 赞同：2
> 
> 时间：2012-06-12T13:41:12.270
> 
> 标签：mysql, database, left-join

我有一张桌子`user`，此外`INNER JOIN`还有桌子`cities`和其他一些桌子。现在我也有下表：

```
blocked_user
--------------------------------------------------------
id | user1_id | user2_id | timestamp 
```

我该如何使用`LEFT JOIN WHERE IS NULL`，所以两个用户组合（用户 1 被阻止的用户 2 或用户 2 被阻止的用户 1）都被排除在搜索结果之外？

```
user
--------------------------------------------------------
id | username | ... 
```

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T13:46:39.473

在这种情况下，我猜关键字 NOT EXISTS 至少在语义上是合适的。

```
SELECT * FROM user u
WHERE NOT EXISTS (
    SELECT * FROM blocked_user b 
    WHERE 
        b.user1_id = u.id 
    OR  b.user2_id = u.id
) 
```

确实也可以选择使用：

```
SELECT * FROM user u LEFT JOIN blocked_user b ON b.user1_id = u.id 
                                              OR b.user2_id = u.id
WHERE b.id IS NULL 
```

但关于表演我不知道哪一个更有效率。

rgds。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T13:50:37.477

我猜你有一个当前用户（执行请求的用户），你想隐藏他们阻止的所有用户或阻止他们的所有用户。我还假设`user1_id`是进行阻止的用户，并且`user2_id`是他们阻止的用户。您应该编辑您的问题以使这些观点更清楚。

如果这是正确的，这就是我会做的：

```
SELECT id, username

FROM user

LEFT JOIN (
    SELECT DISTINCT user2_id AS blockee_id
    FROM blocked_user
    WHERE user1_id = :current_user_id
) this_user_blocked
ON user.id = this_user_blocked.blockee_id

LEFT JOIN (
    SELECT DISTINCT user1_id AS blocker_id
    FROM blocked_user
    WHERE user2_id = :current_user_id
) blocked_this_user
ON user.id = blocked_this_user.blocker_id

WHERE this_user_blocked.blockee_id IS NULL
AND blocked_this_user.blocker_id IS NULL 
```

我认为使用两个单独的结构是有意义的，`LEFT JOIN ... WHERE ... IS NULL`因为您实际上是在检查两种不同的情况。

# facebook - 如何刷新 Facebook Like Image（清除缓存）

> ID：10997938
> 
> 赞同：1
> 
> 时间：2012-06-12T13:41:41.380
> 
> 标签：facebook, image, facebook-graph-api, facebook-like

> **可能重复：**
> [如何清除 Facebook Sharer 缓存？](https://stackoverflow.com/questions/5256114/how-to-clear-facebook-sharer-cache)

我最近更改了我的 facebook like 图像的图像 url。但是，facebook 仍在使用以前的图像。似乎图像已被缓存。我用谷歌搜索了这个问题，人们建议通过 facebook 调试器运行该页面。我已经这样做了好几次了，但新图像仍然没有显示，尽管再次单击“赞”按钮。

这是我的 iFrame 代码：

```
<iframe src="//www.facebook.com/plugins/like.php?href=https%3A%2F%2Fmysite.org&amp;send=false&amp;layout=box_count&amp;width=450&amp;show_faces=false&amp;action=recommend&amp;colorscheme=light&amp;font&amp;height=90&amp;appId=1234" 
width="320" height="60"></iframe> 
```

这是我的OG标签：

```
<meta content="123456879" property="fb:app_id"> 
<meta content="sch_donations:donate" property="og:type"> 
<meta content="https://mysite.org/?utm_source=internal&amp;utm_medium=social&amp;utm_content=recommend-on-facebook&amp;utm_campaign=WTH-FB" property="og:url"> 
<meta content="Title text" property="og:title"> 
<meta content="Description text" property="og:description"> 
<meta content="https://mysite.org/image.jpg" property="og:image"> 
<meta content="https://mysite.org/?utm_source=internal&amp;utm_medium=social&amp;utm_content=recommend-on-facebook&amp;utm_campaign=WTH-FB" property="sch_donations:link"> 
```

关于如何强制 Facebook 清除缓存的任何想法？

# css - 在页面上放置按钮的问题

> ID：10997939
> 
> 赞同：0
> 
> 时间：2012-06-12T13:41:41.660
> 
> 标签：css, button

我对下面的代码有几个问题。

1) 我去 Twitter 网站获取嵌入“推文”按钮的代码，但有两个问题 - a) 按钮仅显示为链接，b) 我预先加载到推文框中的文本没有出现

2）我希望两个黄色按钮位于页面中央，彼此相邻。有人可以帮忙定位吗？

3）我可以去掉按钮内文本上的超链接吗？现在，该链接仅在您单击文本时才有效（如果您单击按钮上的任意位置，我希望它能够工作）。

非常感谢您的帮助。谢谢。

```
<!-- doc type declaration lets browser know which xhtml doc type declaration we are using -->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html>

<head>
<title>SAMPLE TEXT</title>
</head>

<style type="text/css">

#wtf_title {font-family: "Garamond"; font-weight: bold; font-size: 200%; padding-top:50px}

#intro_text {font-family: "Helvetica", serif; color: black; padding-top:10px; 
font-style: italic;}

#reason {font-family: "Helvetica", serif; color: white; padding-top:50px; padding-bottom:50px;}

#credit 
{
    font-family: "helvetica"; 
    font-size: 20%; 
    color: black; 
    }

#button1 {padding-left:20px;}

button{
color:#08233e;
font:2.4em Futura, ‘Century Gothic’, AppleGothic, sans-serif;
font-size:70%;
padding:14px;
background:url(overlay.png) repeat-x center #ffcc00;background-color:rgba(255,204,0,1);
border:1px solid #ffcc00;
-moz-border-radius:10px;-webkit-border-radius:10px;border-radius:10px;
border-bottom:1px solid #9f9f9f;
-moz-box-shadow:inset 0 1px 0 rgba(255,255,255,0.5);-webkit-box-shadow:inset 0 1px 0      rgba(255,255,255,0.5);box-shadow:inset 0 1px 0 rgba(255,255,255,0.5);
cursor:pointer;
}

button:hover{background-color:rgba(255,204,0,0.8);}

button:active{position:absolute;top:100px; left:50px}

</style>

<body>

<div id="wtf_title" >
<center>sample text<br/>
</div>

<hr noshade size=8 width="53%">

<div id="intro_text" >
<center>Sample text
</div>

<button>
<center><a href="" class="button1">sample text</a>
</button>

<button>
<a target="_blank" href="http://www.americanbar.org" class="button2">sample text</a>    
</button>

<div id="twitter-share-button"; style="position: absolute; top: 2px;" >
<a href="https://twitter.com/share" class="twitter-share-button" data- url="http://www.whatthefuckhaslebronjamesdone.com" data-text="Check this out:" data- count="none" data-hashtags="WTFLBJ">Tweet</a>
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s) [0];if(!d.getElementById(id)) {js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.in sertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
</div>

<div id="fb_share"; style="position: absolute; top: 2px; left: 90px;" >
<a name="fb_share"></a> 
<script src="http://static.ak.fbcdn.net/connect.php/js/FB.Share" 
    type="text/javascript">
</script>
</div>

<div id="credit"; style="position: absolute; bottom: 5px; left: 32%;" >
This site was created by <a href="http://www.twitter.com/varunsshetty">Varun Shetty</a> and    <a href="http://www.twitter.com/bcfromblo">Bobby Corp</a>. Inspired by LBJ and <a href="http://www.whatthefuckhasobamadonesofar.com">WTF Obama</a>. Bobby loves Lebron; Varun loves the idea of Lebron.
</div>

</body>

</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T14:37:55.080

您的 HTML 在许多地方都无效，您确实需要在发布之前将您的 HTML 通过 WC3 验证器，这将为您节省大量时间和精力。

这是一个 jsfiddle 让你开始：http: [//jsfiddle.net/RPc95/](http://jsfiddle.net/RPc95/)

为了使整个按钮可点击，您要么需要创建正确的提交/按钮元素，要么将 href 设置为看起来像按钮。

# openlayers - kaMapCache 与 Openlayers

> ID：10997942
> 
> 赞同：3
> 
> 时间：2012-06-12T13:41:54.187
> 
> 标签：openlayers

我正在尝试使用 kaMapCache 图层来提高我的 web 地图的性能。kaMapCache 层生成特定比例的图像，但我不能让 openlayers 使用这些图像来使地图更快。

非常感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T14:27:42.073

我已经尝试了很多，但我从来没有找到任何方法来做到这一点......

搜索了一下我发现了这个：

[http://osgeo-org.1560.n6.nabble.com/Precaching-ka-map-layers-td3964678.html](http://osgeo-org.1560.n6.nabble.com/Precaching-ka-map-layers-td3964678.html)

你应该试试看...

# testing - 是否可以使用 MonkeyTalk 测试 PhoneGap 应用程序？

> ID：10997946
> 
> 赞同：0
> 
> 时间：2012-06-12T13:42:10.223
> 
> 标签：testing, cordova

从[http://www.gorillalogic.com/testing-tools/monkeytalk/documentation/monkeytalk-faq](http://www.gorillalogic.com/testing-tools/monkeytalk/documentation/monkeytalk-faq)阅读 monkeytalk 常见问题解答后：

**它是怎么运行的？**

MonkeyTalk 是一个完整的移动应用功能测试平台。目前，它支持测试原生 iOS 和 Android 应用程序。

**我可以测试 HTML5 网络应用吗？**

不会。我们最初发布的 MonkeyTalk 带有一个 iOS 代理和一个 Android 代理。话虽如此，我们了解 HTML5 应用程序的重要性，尤其是在移动领域。因此，如果您在未来某个时间看到 HTML5 代理，请不要感到惊讶。

**我可以测试桌面应用程序吗？视窗电话 7？黑莓？灵活移动？**

不会。我们的 MonkeyTalk 初始版本带有原生 iOS 代理和原生 Android 代理。话虽如此，我们希望在未来增加更多的代理。

...我不太确定我可以使用monkeytalk 来测试phonegap 应用程序。有没有人有经验？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T15:30:42.217

我在上一届 AnDevCon 上与 Gorilla Logic 人员进行了交谈，他们刚刚破解了在本机应用程序中测试 WebView 的能力。遗憾的是，他们无法录制测试脚本，但可以回放手动创建的脚本。您可能想直接与 Gorilla Logic 交谈。

# mysql - Symfony2，JOINS 与学说2 或 sql

> ID：10997949
> 
> 赞同：1
> 
> 时间：2012-06-12T13:42:13.547
> 
> 标签：mysql, symfony, doctrine-orm

我有一个关于 symfony2 的问题。

我有一个项目，我正在使用数据库。我主要使用 Doctrine2 和实体类。我喜欢实体类对象数据库的东西，非常方便等。

我的问题是，有没有办法在 symfony 中执行正常的 SQL？当我尝试使用标准 SQL 时，我总是遇到异常。我在教义2中的连接有问题，所以我宁愿使用普通的SQL。

我的联接在 SQL 中看起来像这样：

```
SELECT DISTINCT Document . * 
FROM Document
INNER JOIN DocumentGruppe ON Document.id = DocumentGruppe.dokId
INNER JOIN UserGruppe ON DocumentGruppe.gruppenId = UserGruppe.gruppenId
WHERE UserGruppe.userId =9 
```

最后的 where 子句仅用于测试。如果我将教义与它的 DQL 一起使用，它总是说有一个例外：`The Variable DocumentGruppe was not defined before`.

这是我的 DQL 查询：

```
 $test = $em->createQuery(
        'SELECT DISTINCT d
        FROM AcmeDocumentBundle:Document d
        INNER JOIN DocumentGruppe dg ON d.id = dg.dokId
        INNER JOIN UserGruppe ug ON dg.gruppenId = ug.gruppenId
        WHERE ug.userId =9
        '
    ); 
```

有谁知道一种解决方法或一种方法来使用这个学说2的东西来处理连接？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T13:50:24.147

每个JOINED表都必须在映射中声明为关联...您的实体是如何定义的？向我们展示您的映射文件（如果是注释，则为 Document.php，如果是 XMl 或 YAML，则为 Resources/config/doctrine/document;xml 或 yml）。

您的请求将是这样的：

```
$test = $em->createQuery(
    'SELECT DISTINCT d
    FROM AcmeDocumentBundle:Document d
    INNER JOIN d.documentGruppen dg
    INNER JOIN d.userGruppen ug
    WHERE ug.userId =9
    '
); 
```

# c# - 使用父引用

> ID：10997955
> 
> 赞同：1
> 
> 时间：2012-06-12T13:42:40.460
> 
> 标签：c#, git, libgit2, libgit2sharp

我正在使用 libgit2sharp，我想获得一个`Commit`代表类似`HEAD~10`. 我试过`repo.Lookup("HEAD~10")`了，但这不起作用：

> LibGit2Sharp.LibGit2Exception：libgit2 引发错误。类 = GITERR_REFERENCE (-1)。
> 给定的参考名称   在 LibGit2Sharp.Repository.Lookup(String shaOrReferenceName, GitObjectType type, LookUpOptions lookUpOptions   的 LibGit2Sharp.ReferenceCollection.Resolve[T](String name)的
>   LibGit2Sharp.Core.Ensure.Success(Int32 result, Boolean allowPositiveResult) )   在 libgit2Sharp.Repository.Lookup(String shaOrReferenceName, GitObjectType type)   在 libgit_tmp.Program.Main(String[] args)

我意识到我可以通过类似下面的代码来做同样的事情，但如果我能以这种方式指定引用，我仍然更喜欢它。有什么办法吗？如果不是，是 libgit2sharp 还是 libgit2 的限制？

```
var commit = repo.Head.Tip;
for (int i = 0; i < 10; i++)
    commit = commit.Parents.First(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T15:44:51.820

不幸的是，LibGit2Sharp 无法接受遵循**[rev-parse revision-specification syntax 的](http://git-scm.com/docs/git-rev-parse)**参数。

建议的解决方法是目前最好的实现。它完全符合说明的文档

> 修订参数的后缀 ~<n> 表示作为指定提交对象的第 <n> 代祖先的提交对象，仅在第一个父代之后。

但是，最近在 libgit2 的开发分支中**[合并了一项功能，该功能可能涵盖“检索父引用”的需求及其他需求。](https://github.com/libgit2/libgit2/pull/684)**

现在**[可以使用](https://github.com/libgit2/libgit2/blob/development/include/git2/revparse.h#L23-32)**一个不错的 API ，并且可以从 revparse 文本规范中检索具体的 git 对象。为了快速了解其用法，可**[在此处](https://github.com/libgit2/libgit2/blob/development/tests-clar/refs/revparse.c)**获得测试。

绑定这个 API 并使其对 LibGit2Sharp 广泛可用还有待完成。

# solr - 用于分面搜索的 Solr Schema.xml

> ID：10997956
> 
> 赞同：0
> 
> 时间：2012-06-12T13:42:43.500
> 
> 标签：solr, e-commerce, solrnet, faceted-search

我们正在使用电子商务应用程序实现 solr。主要目标是更快的搜索和更好的多面目录导航。

然而问题是，我们无法弄清楚如何将动态方面映射到 Solr。当我说动态方面时，我的意思是...

三星Galaxy S3

*   类别：智能手机
*   品牌：三星
*   操作系统：安卓
*   内存：1 GB
*   处理器：1 Ghz
*   相机：8MP
*   显示屏：4.7 英寸
*   和喜欢..

过滤标准，如操作系统、RAM、处理器、相机等，对每个产品都是动态的，有些有，有些则有完全不同的方面过滤标准集。因此，当有人点击 Android 时，将使用所选类别中的所有 android 手机过滤结果。

我们面临一个问题，即我们无法确定 solr schema.xml 将是什么样子来支持这种用于分面搜索的数据字典。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T07:07:06.233

动态字段是您所需要的。

你甚至可以这样做：

```
product_name : samsung nexus
android_version_t : 4.0
partner_store_price_i : 19800 
```

如果您以这种方式设置架构，则 and 后缀将被理解为文本和整数类型`_t`。`_i`

```
<dynamicField name="*_i"  type="int"    indexed="true"  stored="true"/>
<dynamicField name="*_s"  type="string"  indexed="true"  stored="true"/>
<dynamicField name="*_l"  type="long"   indexed="true"  stored="true"/>
<dynamicField name="*_t"  type="text"    indexed="true"  stored="true"/> 
```

[http://www.tnrglobal.com/blog/2010/07/dynamic-fields-in-apache-solr/](http://www.tnrglobal.com/blog/2010/07/dynamic-fields-in-apache-solr/)

[http://wiki.apache.org/solr/SchemaXml#Dynamic_fields](http://wiki.apache.org/solr/SchemaXml#Dynamic_fields)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T01:21:22.217

扩展上面的答案。

您可以拥有诸如 isSpecial、布尔值、specialCategoryType 等字段。在上述情况下，它们被设置为 true 和 android.

选择此项目 (isSpecial) 后，您可以优化查询并添加到谓词 specialCategoryType:android。

编辑：

假设有两种产品，一款安卓手机和一款安卓笔记本电脑。手机 1- 操作系统：安卓；类型：电话；摄像头：8MP；specCatFacet：操作系统，类型，相机；specCatRefine:os，输入笔记本电脑- os:android；类型：笔记本电脑；屏幕尺寸：13；specCatFacet：操作系统，类型，屏幕；specCatRefine:os, 输入电话 2 - os:android; 类型：电话；摄像头：4MP；specCatFacet：操作系统，类型，相机；specCatRefine：操作系统，类型

当人们搜索android时，这三个都会出现。显示的分面可以是两组分面的并集。

单击电话 1 或 2 时，您将查看 specCatRefine 字段，并使用 os 优化搜索条件，键入并使用 specCatFacet 随后对它们进行分面。

当点击笔记本电脑时，搜索会在 os、type 上进行细化，并在 os、type、screen 上进行分面。

本质上，第二个搜索词细化和分面是基于每个文档中的一个字段。您的搜索词精炼将有很多关于如何创建标准的逻辑。

希望这可以帮助...

# javascript - jQuery ajax 提交表单并将数据发送到备用域

> ID：10997960
> 
> 赞同：0
> 
> 时间：2012-06-12T13:43:05.347
> 
> 标签：javascript, jquery, ajax, forms, xss

我目前正在研究我正在构建的微型网站的几种可能性。微型站点与主站点位于不同的域上，我们希望使用主站点中的一些表单。但是，我们不会让用户看到主要网站的感谢页面以提交表单。

我的问题是，是否可以将微型站点上的表单提交给主站点表单的操作，所以基本上我想提交一个在[http://domain1.com](http://domain1.com)上设置的表单到[http://domain2。 com](http://domain2.com)。

由于跨站点脚本等，我能做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T13:47:35.187

使用普通的 AJAX 这是不可能的，不。

您需要使用某种本地代理来实现这一点。表单应将其数据提交到同一域上的服务器端脚本。该脚本应将数据（使用 cURL 等）提交到远程位置，并将任何响应返回给表单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T13:50:50.743

您正在与[http://en.wikipedia.org/wiki/Same_origin_policy](http://en.wikipedia.org/wiki/Same_origin_policy)战斗。
可能的解决方案是使用本地代理，例如[http://developer.yahoo.com/javascript/howto-proxy.html](http://developer.yahoo.com/javascript/howto-proxy.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T13:28:24.677

您尝试做的事情是可能的，但有一些限制。较新的浏览器使用 x-access-control-allow-origin 等标头支持跨域 ajax。您还可以使用跨域消息传递（请参阅 CORS）。为了向后兼容旧版浏览器，easyXDM 是一种选择。

另一种选择是构建一个隐藏的 iframe，创建一个表单，然后使用指向另一个域的普通 for 将数据发送到那里。

请记住，跨站点请求伪造可能是一个问题。您如何阻止其他网站发布到同一网址。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-12T13:49:17.803

您应该能够通过将指向主站点操作的链接放在微型站点表单中来做到这一点。您也可以通过 ajax 来实现它，方法是向主站点的 url 发送调用并获取结果。

# php - 使用 PHP 在一个页面上设置多个重定向

> ID：10997961
> 
> 赞同：0
> 
> 时间：2012-06-12T13:43:07.110
> 
> 标签：php, redirect

我正在尝试在一个页面上设置多个重定向，我在网上找到了一个关于如何完成此操作的示例。但是，我需要一些帮助才能在我的服务器上进行设置。在线示例的链接在这里：[http ://www.phpfreaks.com/forums/index.php?topic=208962.0](http://www.phpfreaks.com/forums/index.php?topic=208962.0)

在示例中，OP 要求有一个通用链接页面，例如 www.mysite.com/links/index.php，这是所有重定向都会发生的地方。

因此，如果我要访问以下链接：www.mysite.com/links/affiliate1，那么我将被重定向到affiliate1.com。如果我输入 www.mysite.com/links/affiliate2，那么我将被重定向到其各自的页面，affiliate2.com，等等。

我的问题是：在我的服务器上，我该如何设置？在我的根目录中，比如 www.mysite.com，我在“links”子目录下有一个 index.php 页面，其中包含以下代码：

```
 <?php
                $affiliates = array('affiliate1' => 'http://www.example.com',
                                          'affiliate2' => 'http://www.something.com',
                                          'affiliate3' => 'http://www.bored.com');
                foreach ($affiliates as $affiliate => $link) {
                    if ($affiliate == $_GET['link']) {
                            header("Location: $link");
                    }
                }
                ?> 
```

但是如果我现在输入[http://mysite.com/links/affiliate1](http://mysite.com/links/affiliate1)，我将不会被定向到affiliate1.com。相反，我将得到一个“未找到”页面（在此服务器上未找到请求的 URL /links/affiliate1）。如何正确设置？

# jquery - jquery选择菜单并取消选择其他菜单

> ID：10997964
> 
> 赞同：1
> 
> 时间：2012-06-12T13:43:12.627
> 
> 标签：jquery, html

嗨，我有两个下拉菜单：priceMaximum 和mortgageMaximum

我想要它，所以如果用户选择 priceMaximum，那么“No Maximum”值会显示在mortgageMaximum 下拉菜单中，反之亦然。

我已经用下面的代码完成了它，但它似乎只在 Firefox 中有效，所以 Safari、IE9 和 Opera 它不起作用，任何人都可以提出替代方案吗？

```
$('#priceMaximum option:not(:first-child)').click(
    function()
    {
        $('#mortgageMaximum option:not(:first-child)').hide();
    }
);

$('#priceMaximum option:first-child').click(
    function()
    {
        $('#mortgageMaximum option').show();
    }
);

$('#mortgageMaximum option:not(:first-child)').click
(
    function()
    {
        $('#priceMaximum option:not(:first-child)').hide();
    }
);

$('#mortgageMaximum option:first-child').click
(
    function()
    {
        $('#priceMaximum option').show();
    }
); 
```

我的html如下：

```
<select name="priceMaximum" id="priceMaximum" class="thin">
    <option value="999999999" selected="selected">No Maximum</option>
    <option value="200000">200.000</option>
    <option value="400000">400.000</option>
    <option value="800000">800.000</option>
    <option value="1200000">1.200.000</option>
    <option value="2400000">2.400.000</option>
    <option value="5000000">5.000.000</option>
    <option value="10000000">10.000.000</option>
</select>

<select name="mortgageMaximum" id="mortgageMaximum" class="thin">
    <option value="999999999" selected="selected">No Maximum</option>
    <option value="300">300</option>
    <option value="500">500</option>
    <option value="750">750</option>
    <option value="1000">1000</option>
    <option value="2000">2000</option>
</select> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T13:44:53.563

我以前在`select`盒子上遇到过类似的问题，诀窍是将事件从更改`click`为`change`

```
$('#priceMaximum').change(function () { /* do something here */ }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T13:45:37.760

```
$(document).ready(function () {

    // put all that stuff here

}); 
```

[http://api.jquery.com/ready/](http://api.jquery.com/ready/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T13:46:55.323

浏览器不支持尝试禁用/隐藏选项。

您最好删除选项并在需要时重新添加它们。

使用`.remove()`和`.append()`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-12T13:51:11.327

也许这可以帮助你：

```
$('#priceMaximum').change(function(){

   if($(this).val()!='999999999'){
     $('#mortgageMaximum').val('999999999');
   }

}); 
```

其他菜单反之亦然

```
$('#mortgageMaximum').change(function(){

   if($(this).val()!='999999999'){
     $('#priceMaximum').val('999999999');
   }

}); 
```

# android - 减少多线程应用程序中线程上下文切换的开销

> ID：10997967
> 
> 赞同：1
> 
> 时间：2012-06-12T13:43:22.540
> 
> 标签：android, arm

我在多线程应用程序中大致观察到以下趋势

```
No. of threads:  2
Application time: 5s 

No. of threads: 4 
Application time: 10s 

No. of threads: 8 
Application time: 20s 

No. of threads: 16 
Application time: 40s 
```

1-应用程序时间增加的原因可能是什么（假设我没有任何其他应用程序正在运行，并且我有足够的资源）？

2-我猜增加的应用程序时间是由于增加了线程上下文切换开销。如果我是正确的，有什么方法可以减少这种上下文切换开销？

Profiler 没有给我任何线程级别的见解。

**平台信息**

Android，在 ARM Cortex-A8 上运行

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T13:52:17.333

您没有在这些线程中显示您在做什么。容易假设的答案是，当您添加新线程时，这些新线程并没有减轻其他线程的执行负担，它们正在执行原本不会执行的新工作。

在 40 秒的运行时间内，有 16 个线程，您不会注意到上下文切换的影响，除非您还计算实际执行的工作单元并且这些工作单元需要少量时间。

# javascript - 根据滚动逐步淡入/淡出

> ID：10997968
> 
> 赞同：2
> 
> 时间：2012-06-12T13:43:25.023
> 
> 标签：javascript, css, scroll, fade

我有这个 HTML/CSS [http://jsfiddle.net/thekillerdev/sB49B/2/](http://jsfiddle.net/thekillerdev/sB49B/2/)

我想做的是几乎像视差卷轴的东西（我认为）。根据用户滚动的位置，.items 会淡出并淡入下一个。

就像是..

*   如果该人向下滚动 (scrollTop) 200px，.item02 将处于 opacity:1，其余处于 opacity:0。
*   如果此人向下滚动 (scrollTop) 300px，.item02 将在 opacity:0.5 上，.item03 在 opacity:0.5 上，其余的在 opacity:0 上。

我怎样才能实现这种动画？对此有任何注意吗？

```
Edit:
jQuery, JS, anykind of language that works in a browser is accepted =] 
```

需要更多信息，我随时提供。

谢谢你的时间

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T14:30:28.277

像这样的东西？

[http://jsfiddle.net/sB49B/18/](http://jsfiddle.net/sB49B/18/)

# version-control - 运行自己的版本控制服务器的优缺点

> ID：10997969
> 
> 赞同：2
> 
> 时间：2012-06-12T13:43:25.253
> 
> 标签：version-control

作为我在大学研究的一部分，我主要做一些小项目，并且一直在使用我们的 SVN 服务器，并且还使用 Mercurial 与 SourceForge 相关联。

我想知道在我的家庭服务器上运行 Mercurial 或任何其他类型的版本控制是否有意义。我在工作中使用的 SVN 服务器位于大学防火墙后面，在大楼的 IT 部门和我们部门的 IT 负责人之间，我认为在服务器上启动新项目和编码时很麻烦家。我在家里有一台 Drobo FS (NAS)，我可以想象用它来运行版本控制服务器，这样无论我身在何处，我都可以轻松访问我的代码，而无需将我的代码放在第 3 方服务器上。

与在项目托管站点获得一个支持私人项目的帐户相比，这种方法的优点/缺点是什么？可行吗？如果是这样，这是否意味着大量的维护工作量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T13:46:22.953

当然，一旦你有不想在 github 等服务器上打开的项目，你就应该这样做。

大多数小型私人团队都有源服务器，没有理由不拥有。例如 gitolite 易于安装和使用（我不知道 Mercurial 但我认为也有一个易于安装的解决方案，可能更容易）。

副作用是您可以使用比 svn 更现代的东西，例如您可以在家中使用并与服务器同步的分散式 vcs（使用 mercurial 和 git 时无需为每次操作都使用服务器：只需设置本地存储库并不时推送到您的服务器）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T16:24:08.667

每当您进行**分布式**开发时（无论是因为团队跨越不同的地理站点，还是因为您从不同的站点进行开发），DVCS 都是有意义的。

不要忘记，在一个站点上，如果您的团队成员可以访问 git/mercurial 存储库*文件系统*（即存储库的共享路径），您甚至根本不需要服务器。那些 DVCS 支持文件系统协议访问（尽管[没有身份验证或授权](https://stackoverflow.com/questions/5683253/distributed-version-control-systems-and-the-enterprise-a-good-mix/5685757#5685757)），也就是**[本地协议](http://git-scm.com/book/ch4-1.html#Local-Protocol)**。

您还可以使用 BitBucket 等外部服务跨站点共享您的项目（支持公共和私有项目，用于 Git 或 Mercurial）

如果您对大学网络有写访问权（例如通过 USB 密钥），您甚至不需要访问该外部服务（BitBucket 可能被阻止，没关系）。**[git bundle](https://stackoverflow.com/questions/2545765/how-can-i-email-someone-a-git-repository/2545784#2545784)**
允许您 将git repo 导出为一个文件，您可以从中提取它，因为它是一个 repo。

因此，您有多种选择来访问/管理来自不同站点的存储库，而无需将自己注册到您无法从任何站点（例如在家）访问的集中式服务器（例如您的 SVN）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-12T13:51:21.377

优点是您可以完全控制您的服务器：

*   你可以设置任何你想要的方式
*   没有其他人可以访问您的源/项目

缺点是你是唯一负责的人：你必须

*   确保正确设置
*   做维护
*   执行升级
*   确保防止停电
*   确保足够的安全措施
*   确保定期备份
*   等等

# mule - Mule 子流和流量参考

> ID：10997976
> 
> 赞同：0
> 
> 时间：2012-06-12T13:43:48.977
> 
> 标签：mule

我正在使用 mule 3.2.1 并且有四个主要流程和一个子流程。在每个主要流程中，我都使用流程引用调用子流程。在子流中，当我调用四次子流时，将创建多少个实例？这种方法会出现任何性能问题或任何错误？请就这种方法向我提出建议。

**四大流。**

```
<flow name="DetailsFlow1" doc:name="DetailsFlow1">
    <inbound-endpoint address="${fd.address}" exchange-pattern="request-response" doc:name="Generic Point"/>
    <logger message="PAYLOAD #[payload]" level="INFO" doc:name="Logger"/>
    <cxf:jaxws-service port="80" serviceClass="com.integration.IFixedDepositDetails" mtomEnabled="true" enableMuleSoapHeaders="false" doc:name="SOAP"/>
    <choice doc:name="Choice">
        <when expression="oprationService == 'fd-con'" evaluator="ognl">
            <processor-chain>
                <component class="com.integration.impl.FixedDepositDetailsImpl" doc:name="Java"/>
                <flow-ref name="fdcasterflows1Flow1" doc:name="Flow Reference"/>                    
            </processor-chain>
        </when>
    </choice>        
</flow>

<flow name="DetailsFlow2" doc:name="DetailsFlow2">
<flow-ref name="fdcasterflows1Flow1" doc:name="Flow Reference"/>              
</flow>

<flow name="DetailsFlow3" doc:name="DetailsFlow3">
<flow-ref name="fdcasterflows1Flow1" doc:name="Flow Reference"/>              
</flow>

<flow name="DetailsFlow4" doc:name="DetailsFlow4">
<flow-ref name="fdcasterflows1Flow1" doc:name="Flow Reference"/>              
</flow> 
```

**一个子流**

```
 <sub-flow name="fdcasterflows1Flow1" doc:name="fdcasterflows1Flow1">
    <component class="com.GetDetails" doc:name="Java"/>
</sub-flow> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-11T05:50:38.783

正如@user1760178 所说，将创建组件的四个实例，并且更好地使用池化组件配置。但是如果您的 Java 组件是无状态组件，那么将`singleton`范围与您的组件相关联比池化组件更好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T18:37:40.530

根据我对您上面提到的问题的理解，该组件是在原型范围内创建的。因此，将为组件的每个请求创建一个实例。

因此，在上述情况下，它是四个实例，因为子流被调用了四次。

如果对使用组件的子流的请求过多，那么肯定会影响性能。因此，在这种情况下，您可以选择被轮询的组件。

更多关于这在骡子网站。 [http://www.mulesoft.org/documentation/display/MULE3USER/Object+Scopes](http://www.mulesoft.org/documentation/display/MULE3USER/Object+Scopes)

希望这可以帮助..... ：）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-30T08:51:28.543

根据我对您上面提到的问题的理解，该组件是在原型范围内创建的。因此，将为组件的每个请求创建一个实例。

因此，在上述情况下，它是四个实例，因为子流被调用了四次。

如果对使用组件的子流的请求过多，那么肯定会影响性能。因此，在这种情况下，您可以选择被轮询的组件。

# c# - 如何在 C# 中更改 Windows 窗体上 Groupbox 的边框粗细？

> ID：10997977
> 
> 赞同：5
> 
> 时间：2012-06-12T13:43:50.573
> 
> 标签：c#, winforms, groupbox

我没有找到任何可以帮助我解决关于 SO 的旧问题的解决方案...是否可以通过更改颜色使它们更厚或更明显？如果是的话，一些代码会很棒......或者只是提示如何去做......

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-12T13:51:44.643

您需要制作一个自定义控件`GroupBox`。请参阅[Grouper - 自定义 Groupbox 控件](http://www.codeproject.com/Articles/12421/The-Grouper-A-Custom-Groupbox-Control)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T13:49:12.257

GroupBox 是一个自定义绘制的.Net 控件。您将需要挂钩 Paint 事件，或从 GroupBox 派生并覆盖 OnPaint 方法，确定绘制现有线条的位置，然后用更宽的线条在它们上方绘制以实现更厚的边框。或者您可以创建一个自定义控件并自己绘制所有内容。

# c# - Winform类到主程序

> ID：10997980
> 
> 赞同：0
> 
> 时间：2012-06-12T13:43:56.870
> 
> 标签：c#, winforms, class

我如何让主程序认识到我有一个需要参考的外部课程？

我创建了一个“Hello”类，我需要引用该类的一个实例

`private Hello hello1 = new Hello();`

但是当我写出这段代码时，它一开始就无法识别“Hello”。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T13:48:48.443

如果 Hello 类与您的 Form 不在同一个项目中，则必须添加对“Hello 类”项目的引用。

但首先，只需检查它们是否在同一个命名空间中。如果没有，请添加一个

`using <namespace of your HelloClass>;`在你的 WinForm 类中。

或者将您的 Hello 类的命名空间更改为与 Winform 的相同。

（命名空间的名称出现在“使用”声明之后`namespace <name of the namespace> {`：）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T13:52:48.740

如果您的 hello 类与主程序在同一个项目中，您可以通过添加 raphael 提到的 using 语句来完成。如果它们不在同一个项目上，则应首先添加包含 hello 类的项目的引用。假设你有 2 个项目。1 main（包括你的主程序）第二个是hello项目（包括你的hello类）。在 Visual Studio 扩展主项目中，右键单击引用并选择“添加引用”，然后选择 hello 项目。

希望它足够清楚。

# objective-c - JSON解析与£符号返回null

> ID：10997981
> 
> 赞同：0
> 
> 时间：2012-06-12T13:43:59.303
> 
> 标签：objective-c, xcode

我正在尝试从我的服务器解析一个 JSON 脚本，其中包含一个 £（英镑），但是这将返回 null。之前我遇到了问题，所以暂时只是改用美元或欧元符号，但我需要能够解析英镑符号。但是我不确定如何纠正这个问题。我创建了一个测试项目，暂时只使用带有内容方法的字符串，所有其他 json 都可以正常工作，但是带有井号的那个返回 null。

```
NSString *get5 = [NSString stringWithContentsOfURL:url5 encoding:NSUTF8StringEncoding error:nil]; 
```

我尝试了其他编码 NSUTF 编码，但它们似乎也不起作用。有的返回null，有的返回汉字，所以不太好。

任何帮助将非常感激！！

编辑：

使用 NSError 对象并返回此消息

> “操作无法完成。（Cocoa 错误 261。）” UserInfo=0x68294b0 {NSURL=http://myserver.com/test.jsp, NSStringEncoding=4}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T14:00:12.120

Cocoa Error 261 是一个编码错误。返回 JSON 的服务显然没有使用 UTF-8 编码返回它。如果可以的话，要么让服务返回 UTF-8，要么找出它返回的编码并使用它。

有关更多信息，请参阅此问题：

[编码问题：Cocoa 错误 261？](https://stackoverflow.com/questions/1931113/encoding-issue-cocoa-error-261)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T13:53:38.880

你能检查一下 json 没有编码 1) CRLF (windows)encoding 2) Western 等。确保编码是 UTF-8

# lotus-notes - Lotus Notes：找出谁创建了数据库/副本？

> ID：10997987
> 
> 赞同：0
> 
> 时间：2012-06-12T13:44:25.480
> 
> 标签：lotus-notes, lotus, lotus-domino

Lotus Notes 中有没有办法找到谁创建了数据库或副本。创建它的用户或服务器的名称。

我检查了数据库属性，找不到类似的东西。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T14:46:22.207

这是一种可能的方法： [http ://www-10.lotus.com/ldd/nd6forum.nsf/d6091795dfaa5b1185256a7a0048a2d0/bd985fb1c9ef61f68525799500596ab9?OpenDocument](http://www-10.lotus.com/ldd/nd6forum.nsf/d6091795dfaa5b1185256a7a0048a2d0/bd985fb1c9ef61f68525799500596ab9?OpenDocument)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T23:00:19.543

创建副本时，您是否能够访问日志（可能来自备份）？应该记录下创建数据库副本的 ID。

# ruby-on-rails-3 - 更新父对象时，活动记录 update_attribute 对对象（父对象）的关联对象（子对象）执行 DELETE 查询

> ID：10997990
> 
> 赞同：3
> 
> 时间：2012-06-12T13:44:43.373
> 
> 标签：ruby-on-rails-3, activerecord

**导轨：3.0.11**

**红宝石：1.9.3**

*当我更新父对象时，为什么活动记录 update_attribute 会对对象（父对象）的关联对象（子对象）执行 DELETE 查询？*

以下是我的课程：

```
class User < ActiveRecord::Base

  has_many :user_keywords, :dependent => :destroy  
  has_many :keywords, :through => :user_keywords

end

class UserKeyword < ActiveRecord::Base
  belongs_to :user
  belongs_to :keyword
end

class Keyword < ActiveRecord::Base
  has_many :user_keywords
  has_many :users, :through => :user_keywords
end 
```

在前端，每​​个关键字都有一个复选框。

*   复选框：关键字 1
*   复选框：关键字 2
*   复选框：关键字 3
*   复选框：关键字 4

第一次我检查了“关键字 1”和“关键字 2”复选框来更新用户的关键字。

我再次编辑用户以通过选中“关键字 1”和“关键字 3”复选框来更新相关关键字并更新了用户。第二个更新删除了我的 USER_KEYWORDS 表中以前的记录。

以下是我的控制台输出，显示正在执行的 DELETE 语句：

```
 User Load (55.5ms)  SELECT "users".* FROM "users" WHERE "users"."id" = 5 LIMIT 1
  Keyword Load (0.2ms)  SELECT "keywords".* FROM "keywords" WHERE "keywords"."id" IN (1, 3)
  Keyword Load (0.2ms)  SELECT "keywords".* FROM "keywords" INNER JOIN "user_keywords" ON "keywords".id = "user_keywords".keyword_id WHERE (("user_keywords".user_id = 5))
  AREL (0.2ms)  DELETE FROM "user_keywords" WHERE "user_keywords"."user_id" = 5 AND "user_keywords"."keyword_id" = 2
  AREL (0.1ms)  INSERT INTO "user_keywords" ("keyword_id", "user_id", "status", "created_at", "updated_at") VALUES (3, 5, 'f', '2012-06-12 13:15:43.912236', '2012-06-12 13:15:43.912236') 
```

has_many 方法的 :dependent 选项说（[http://guides.rubyonrails.org/association_basics.html#has_many-association-reference](http://guides.rubyonrails.org/association_basics.html#has_many-association-reference)）：

## 4.3.2.6：依赖

如果将 :dependent 选项设置为 :destroy，则删除此对象将调用关联对象的 destroy 方法以删除这些对象。如果将 :dependent 选项设置为 :delete_all，则删除此对象将删除关联的对象，而无需调用它们的 destroy 方法。如果将 :dependent 选项设置为 :nullify，则删除此对象会将关联对象中的外键设置为 NULL。

当您对关联使用 :through 选项时，将忽略此选项。##

我无法理解这种行为。有人可以详细说明或澄清吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T14:39:47.733

删除语句只删除了关键字 2 的关联。当您提交带有两个复选框的表单时，系统假定您希望关联这两个项目，但没有选中其他项目。因此，当它加载当前`user_keyword`关联时，它看到有一条您没有选择保留的现有记录，因此将其删除。然后它看到有一个新的，所以它创建了一个新的。

If you want to only add relationships, and not remove relationships, then I would not recommend checkboxes, as checking a checkbox implies adding, but removing a check implies destroying the relationship (which is what rails did in this case). A button with AJAX functionality might make more sense. If you do want to keep checkboxes, but not allow rails to destroy relationships that weren't selected, then you would have to build the relationships yourself based on the parameters, and not rely on the rails magic to do the job for you.

Note that this is not related to the `:dependent` option, this is simply due to the relationship you have set up in the models and in the form.

# objective-c - Objective-C：获取默认网关信息

> ID：10997994
> 
> 赞同：1
> 
> 时间：2012-06-12T13:44:57.407
> 
> 标签：objective-c, c, mac-address, gateway, inet

如何在 Objective-C 中获取我的默认网关 IP 和 MAC 地址？

现在，我能够制作一个函数来获取使用`arpa/inet.h`它的 IP 工作正常，但我不知道如何获取默认网关 IP 和 MAC 地址。

```
NSString* GetMyIP(NSString* inf) {
    NSString *address = @"error";
    struct ifaddrs *interfaces = NULL;
    struct ifaddrs *temp_addr = NULL;
    int success = 0;

    // retrieve the current interfaces - returns 0 on success
    success = getifaddrs(&interfaces);
    if (success == 0)
    {
        // Loop through linked list of interfaces
        temp_addr = interfaces;
        while(temp_addr != NULL)
        {
            if(temp_addr->ifa_addr->sa_family == AF_INET)
            {
                // Check if interface!
                if([[NSString stringWithUTF8String:temp_addr->ifa_name] isEqualToString:inf])
                {
                    // Get NSString from C String
                    address = [NSString stringWithUTF8String:inet_ntoa(((struct sockaddr_in *)temp_addr->ifa_addr)->sin_addr)];
                }
            }
            temp_addr = temp_addr->ifa_next;
        }
    }

    freeifaddrs(interfaces);
    return address;
} 
```

我使用`arp`了`netstat`一段时间，但它们并不总是按预期工作，而且您可能会理解这是有风险的解决方案......

是否有另一种“Apple 方式”来获取此类信息？不使用`arpa/inet.h`? 例子？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T17:23:14.383

[这个答案](https://stackoverflow.com/a/10593782/48660)解释了如何在 OSX 上获取接口的 MAC 地址。

默认网关在路由表中注册 - 不直接与网络接口相关联。请注意，*默认*网关（即 0.0.0.0 的网关）可能不是您需要关心的唯一网关，可能会为更受限制的地址范围设置路由器。（此外，可能有多个网关，默认或其他，具有不同的优先级）

路由表记录在[`route(4)`手册页](http://developer.apple.com/library/mac/#documentation/darwin/reference/manpages/man4/route.4.html)中- 希望它可以为您提供足够的信息来检索应用程序中的路由表。

# java - 为什么在访问活动之间的变量时不首选 getter？

> ID：10997996
> 
> 赞同：12
> 
> 时间：2012-06-12T13:44:59.237
> 
> 标签：java, android

每天都有很多关于SO的以下[类型的问题：](https://stackoverflow.com/questions/10978788/how-to-share-variables-between-classes-in-java#comment14339055_10978788)

> 如何从另一个获取变量`Activity`？

答案通常建议使用`SharedPreferences`or `Intent.putExtra()`。

对我来说，`getter`方法是从另一个类访问变量的方法。毕竟，`Activity`正在考虑的是一个类，它的变量是类成员。

**为什么 getter 方法不优于 SharedPreferences 或 Intent extras 之类的方法？**

我说的是需要在活动之间访问变量的简单情况，例如这个：

```
class OneClass extends Activity {
    int a;

    ..
    // some changes to a
    ..
} 
```

然后在另一个类（`Activity`）中：

```
class SomeOtherClass extends Activity {
    ..
    // trying to access a here
    ..
} 
```

一种`getter`方法在这里是正确的方法吗？

再说一遍 - 我不是在谈论这些事情实际上是正确的方法的场景。`SharedPreferences`用于持久存储少量数据，`extras`如文档所述：*这可用于为组件提供扩展信息。例如，如果我们有一个发送电子邮件消息的操作，我们还可以在此处包含额外的数据以提供主题、正文等。*

* * *

由于某些答案可能表明存在某些情况，例如无法保证另一个`Activity`人还活着，我想人们为什么建议追求意图和共享偏好有更多可能和正确的原因。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-12T13:52:57.000

你的问题的答案有两个：

*   对于无论如何都属于 meta SO 的 meta 方面，许多新手程序员看到了 Android，想要编写应用程序，并且对 Java 感到厌烦。
*   对于另一个问题，通常使用 getter 和 setter 是行不通的，因为您不能以直接的方式在活动之间传递对象。虽然您可以在技术上使用 Parcelable 执行此操作，但不建议这样做，更好的方法是使用意图在应用程序组件之间传递数据。
*   这里强调的另一点是，Android 应用程序应该在组件内部保持最少的状态。我认为这是Android的巨大成功。如果您查看那里的应用程序，平均而言，全局状态比用 java 编写的典型程序要少得多。这些程序也更小，这是意料之中的，但是原子活动可以代表单个屏幕的状态，以及任何单个屏幕通常不会在整个应用程序中保持那么多状态的事实，导致应用程序组件之间的良好逻辑分离。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-12T13:49:05.557

简单的答案是因为`Activity`生命周期由 Android 操作系统控制。活动与由用户代码实例化的普通类不同，并且在不再引用它们之前保证可用。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-12T13:49:45.217

我认为活动没有 getter 和 setter 的原因与 Activity 的生命周期有关。你真的不应该保证其他活动是活着的，因为如果它们不在屏幕上，系统可以随时清理它们。

但是，要遵循您的模式，您可以扩展 Application 并为此使用 getter 和 setter。[如何在Android中声明全局变量？](https://stackoverflow.com/questions/708012/android-how-to-declare-global-variables)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-06-12T14:02:15.277

主要是因为发送意图的整个过程并不是那么简单。意图可以通过系统，在进程之间等...简而言之，您创建的对象与最后收到的对象不同（如果尝试扩展意图类，将其发送到另一个活动并尝试将其转换回另一端的扩展类，它根本不是同一个对象）。

现在我也很讨厌这个，这就是为什么我创建了一些基类来帮助我处理意图（我称之为 BundleWrappers），它们可以像这样工作：

您使用 getter/setter 创建一个 POJO，填充该对象并随心所欲地使用它，

然后当时机成熟时，只需将其序列化为一个包并将其反序列化为另一端的同一对象。

那么您将在其他活动中拥有与 getter 和 setter 相同的对象。

意图糟糕的主要原因是您必须找到一种方法来跟踪附加组件的所有键，以及序列化捆绑包的附加实现。

即使使用我的方法，它也不容易使用意图，但它是迄今为止我在性能和对象组织方面发现的最好的。

```
public abstract class BundleWrapper implements Parcelable {

    protected static final String KEY_PARCELABLE = "key_parcelable";

    public static final String TAG = BundleWrapper.class.getSimpleName();

    public BundleWrapper() {
        super();
    }

    abstract Parcelable getParcelable();

    public Bundle toBundle(){
        final Bundle bundle = new Bundle();
        Parcelable parcelable = getParcelable();
        if (parcelable != null) {
            bundle.setClassLoader(parcelable.getClass().getClassLoader());
            bundle.putParcelable(KEY_PARCELABLE, parcelable);
        }
        return bundle;
    }

    public static Object fromBundle(final Intent intent) {
        return fromBundle(intent.getExtras());
    }

    public static Object fromBundle(final Bundle bundle) {
        if (bundle != null && bundle.containsKey(KEY_PARCELABLE)) {
            bundle.setClassLoader(BundleWrapper.class.getClassLoader());
            return bundle.getParcelable(KEY_PARCELABLE);
        }
        return null;
    }

} 
```

这是我的基类，要使用它，您只需扩展它并实现 parcelable（过程的延迟部分 :)：

```
public class WebViewFragmentBundle extends BundleWrapper implements Parcelable {

    public static final String TAG = WebViewFragmentBundle.class.getSimpleName();

    private String url;
    public WebViewFragmentBundle() {
        super();
    }

    public WebViewFragmentBundle(Parcel source) {
        this.url = source.readString();
    }

    public String getUrl() {
        return url;
    }

    public void setUrl(String url) {
        this.url = url;
    }

    @Override
    Parcelable getParcelable() {
        return this;
    }

    @Override
    public int describeContents() {
        return 0;
    }

    @Override
    public void writeToParcel(Parcel dest, int flags) {
        dest.writeString(url);
    }

    public static final Parcelable.Creator<WebViewFragmentBundle> CREATOR = new Parcelable.Creator<WebViewFragmentBundle>() {
        @Override
        public WebViewFragmentBundle createFromParcel(Parcel source) {
            return new WebViewFragmentBundle(source);
        }

        @Override
        public WebViewFragmentBundle[] newArray(int size) {
            return new WebViewFragmentBundle[size];
        }
    };

} 
```

对于一个用例：

```
public static void launchAugmentedRealityActivityForResult(final Activity context, WebViewFragmentBundle wrapper) {
        final Intent intent = new Intent(context, Augmented.class);
        intent.putExtras(wrapper.toBundle());
        intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP | Intent.FLAG_ACTIVITY_SINGLE_TOP);
        context.startActivityForResult(intent, AUGMENTED_RESULT_CODE);
    } 
```

并将其投射到另一端，例如：

```
(WebViewFragmentBundle)BundleWrapper.fromBundle(getIntent()); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-06-12T13:49:54.793

当谈到基本的类结构时，你是对的。但是，如果您认为活动生命周期和内存管理使整个活动保持活动状态以访问少量数据是不合逻辑的。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-06-12T13:54:22.077

情况比你建议的要复杂一些。如果您只是编写存在于活动生命周期中的类，并且希望它们访问活动的某些成员，那么您可以轻松使用 getter 和典型的 java 范例。

话虽如此，Android 并不包含一些自然机制来访问另一个 Activity 的实例。这可能是非常故意的。活动旨在以独特的方式运作。最接近的比较是每个活动都意味着就像网站上的一个页面（因此引用另一个页面实例没有多大意义）。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-06-12T13:54:43.030

我不认为这在某种程度上是 Android 独有的。任何相对复杂的基于 Java 的框架都有像这样的更高级别的“规则”。

*   Java 的 Swing 或 AWT 限制您从某些线程调用某些方法。
*   在这方面，Java ME 的工作方式与 Android 非常相似。
*   在 Java EE 中——忘记尝试跨 Servlet 或 EJB 与`static`成员共享任何内容。也许他们甚至不在同一台机器上。

直接回答你的问题：你不能像在一个简单的 Java 程序中那样简单地“自由地”访问对象，因为一些依赖于分解的假设，即这些对象甚至在同一个`ClassLoader`.

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2012-06-12T13:55:26.443

如果程序可以控制何时创建和销毁活动，这将完美地工作。但问题是它们是由操作系统管理的。

您可以存储对另一个活动的引用。只有当它被破坏或重建时会发生什么？您将获得对不再相关的类实例的引用，而没有可靠的方法来检测这种情况。

在这些情况下使用共享的偏好和意图，因为它们是*独立于状态的*。无论任何活动发生什么，偏好都将始终保持其原来的状态。Intent 也是一个独立存在且不会过时的对象。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2012-06-12T15:37:41.017

要使用您的示例，您遇到的第一个问题是如何传递对 to 实例的`OneClass`引用`SomeOtherClass`。`SomeOtherClass`需要引用 的实例`OneClass`才能调用`oneClass.getVariable()`. 没有简单的方法可以做到这一点，因为当一个 Activity 启动另一个 Activity 时，它通过调用`startActivity()`和传递一个 Intent 来完成它。这就是您在启动 Activity 时可以随时将参数传递给它的机制，这就是您应该使用它的原因。

按照您的示例，另一种选择是使用静态（类）变量来保存要在活动之间传递的数据。所以你可以做这样的事情：

```
class OneClass extends Activity {
    private static int a;

    public static int getA() {
        return a;
    }

    ..
    // some changes to a
    ..
}

class SomeOtherClass extends Activity {
    ..
    // trying to access a here
    int myA = OneClass.getA();
} 
```

然而，这几乎是假设只有一个实例，`OneClass`这就是它在恕我直言的地方。在 Android 中，活动在各处被创建和销毁。在任何给定时间可能有多个活动实例，您永远不知道您有多少个或哪个是当前活动的。这使得 Activity 类中的静态变量很难正确处理。为了在 Activity 之间传递数据，我会使用 Intent 中的 Extras，因为很明显，您在启动 Activity 时正在传递数据。它是自我记录的。

另一方面，如果您的数据对于整个应用程序来说确实是全局的，那么我只会在某个类中使用静态（类）变量，这些类可以直接从所有类访问。有些人子类`Application`来执行此操作，但文档表明您不必这样做，而且通常您不必这样做。你可以这样做：

```
public class Globals {
    public static int a; // Publicly available, don't need getter
} 
```

然后，任何类都可以存储`Globals.a`或访问它。您不需要为此进行子类化`Application`。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2014-12-18T09:43:22.777

解决方案：Activity 是一个应用程序组件，与类不同，它有自己的生命周期和回栈。虽然我们可以通过 parceable 和 serialization 传递对象，但不推荐这样做。我们可以通过意图对象中的捆绑传递对象或使用共享首选项来访问对象。使用 getter 不是一个好主意。或者您可以创建一个单独的常量类并在那里定义静态变量，然后可以访问它。

# c# - 最大在 linq 到 NHibernate 数据库中不存在的数据

> ID：10997998
> 
> 赞同：9
> 
> 时间：2012-06-12T13:45:02.587
> 
> 标签：c#, linq, nhibernate, max, linq-to-nhibernate

我通过 linq 向 NHibernate 查询。

```
var q = SessionInstance.Query<Request>().Max(e => e.Code); 
```

如果`Request`表没有行，则执行此查询会引发 GenericADOException 并显示以下消息：

`{"Could not execute query[SQL: SQL not available]"}`

`{"Value cannot be null.\r\nParameter name: item"}`

我应该怎么办？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-12T14:00:50.467

尝试这个

```
SessionInstance.Query<Request>().Max(x => (int?)x.Code); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T14:18:23.923

我认为这应该适用于 Linq-to-Nhibernate：

```
var q = SessionInstance.Query<Request>().Select(e => e.Code)
    .DefaultIfEmpty().Max(); 
```

或者也许`DefaultIfEmpty(<some value>)`。