# StackOverflow 问答 12324000-12324999

# ios - 在 Xcode 构建阶段推荐文件夹？

> ID：12324001
> 
> 赞同：2
> 
> 时间：2012-09-07T19:07:42.523
> 
> 标签：ios, build

谁能推荐在 Xcode Build Phases 中应该使用哪些文件夹来进行 iOS 部署以复制一 (1) 个用户数据文件和一 (1) 个系统数据文件？部署目标是 iOS v.5.1。我在 Apple Developer Library 中读到，用户数据文件应位于 Application_Home/Documents 中，系统数据文件应位于 Application_Home/Library 中？对我来说似乎很奇怪，这些不在“目的地”下拉菜单中，或者它们被称为资源之类的其他东西？我不希望在 AppStore 更新期间覆盖用户数据文件。谢谢...

1.  复制文件（1 项） 目的地：绝对路径 子路径：Application_Home/Documents 仅在安装时复制

2.  复制文件（1 项） 目的地：绝对路径 子路径：Application_Home/Library 仅在安装时复制

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T19:59:24.373

据我了解，您想确认在应用程序更新后，您不希望文件被覆盖。为此，请参阅[此](http://www.iphonedevsdk.com/forum/iphone-sdk-development/82693-fix-for-app-deleting-users-files-on-update.html)

> 应用程序更新期间保存的文件 当用户下载应用程序更新时，iTunes 会将更新安装在新的应用程序目录中。然后它将用户的数据文件从旧安装移动到新的应用程序目录，然后再删除旧安装。以下目录中的文件保证在更新过程中被保留：
> 
> ```
> <Application_Home>/Documents
> <Application_Home>/Library 
> ```
> 
> 尽管其他用户目录中的文件也可能被移动，但您不应依赖它们在更新后存在。

对于文档目录路径

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *docsPath = [paths objectAtIndex:0]; 
```

对于库目录路径

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSLibraryDirectory, NSUserDomainMask, YES);
NSString *docsPath = [paths objectAtIndex:0]; 
```

有关更多路径，请参阅[Apple 应用程序编程指南](http://developer.apple.com/library/ios/#DOCUMENTATION/Cocoa/Reference/Foundation/Miscellaneous/Foundation_Constants/Reference/reference.html#//apple_ref/doc/c_ref/NSSearchPathDirectory)

# jquery - jquery 循环浏览图片

> ID：12324007
> 
> 赞同：1
> 
> 时间：2012-09-07T19:08:34.143
> 
> 标签：jquery

我有一个页面，我使用以下代码循环浏览页面上的图像：

```
$('#summaryContainer img:gt(0)').hide();
    setInterval(function(){
        $('#summaryContainer :first-child').fadeOut(summary.speed)
            .next('img').fadeIn(summary.speed)
            .end().appendTo('#summaryContainer');}, 
      summary.pause); 
```

工作正常...直到您离开页面并返回。然后在循环开始之前它会闪烁最后一个图像，然后转到第一个。知道是什么原因造成的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T19:15:36.773

尝试设置 css 显示属性：

```
#summaryContainer img {
    display: none;
} 
```

然后，而不是您的第一行（我们在 css 中处理），淡入您的第一张图片：

```
$('#summaryContainer img:gt(0)').fadeIn(); 
```

这应该使所有图像隐藏，然后平滑地淡入第一张图像。

所以，我想整个事情会是这样的：

```
 $('#summaryContainer img:gt(0)').fadeIn();
 setInterval(function(){
    $('#summaryContainer :first-child')
         .fadeOut(summary.speed)
         .next('img').fadeIn(summary.speed)
         .end().appendTo('#summaryContainer');}, 
 summary.pause); 
```

加上那个css规则。类似的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T19:38:41.113

## *[jsBin 演示](http://jsbin.com/ezajoq/2/edit)*

使用`.stop()`and是`.fadeTo()`关键`img:first`

```
$('#summaryContainer img:gt(0)').hide();
setInterval(function(){
    $('#summaryContainer img:first').stop().fadeTo(summary.speed, 0)
        .next('img').fadeTo(summary.speed, 1)
        .end().appendTo('#summaryContainer');
},summary.pause); 
```

# sql - sql server 加入两组数据

> ID：12324010
> 
> 赞同：0
> 
> 时间：2012-09-07T19:08:38.063
> 
> 标签：sql, sql-server

我有以下简单（我认为）的要求：

有一个值可以说'1'，然后我有一个表，其中一列有不止一行。

需要什么 SQL 才能返回两列，第一列的所有值都是“1”，第二列是表中的值。

谢谢，布鲁斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T19:09:42.467

```
select 1 as yourValue, yourField from yourTable 
```

那 ？

编辑：

更重要的是，如果它是作为参数（在变量中）出现的值，您也可以这样做

```
select @yourVariable as yourValue, yourField from yourTable 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T19:24:59.193

您只需要将`SELECT`值作为一列，如下所示：

```
SELECT '1', col1, ... FROM tbl 
```

# knowledge-management - 务实的程序员：知识管理

> ID：12324011
> 
> 赞同：1
> 
> 时间：2012-09-07T19:08:40.830
> 
> 标签：knowledge-management

我不确定要在下面标记什么，但我想这是一个与大多数开发人员相关的问题。

在我的整个工作日中，我经常会遇到一些有用的信息和知识片段。这些可能是通用编码示例，或者是特定于环境的命令等。

通常，我只是将它们存储在不同的文本文件中，然后在需要时参考这些文本文件。但是，这很尴尬且难以搜索

我考虑过的一种替代方法是创建自己的本地 Wiki 并在常用标签下标记此类片段，以便我可以轻松搜索。

我很想知道其他开发人员如何以“务实”的方式管理这些知识。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T23:38:42.420

如上所述，TiddlyWiki 似乎是这里的最佳选择

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T19:17:30.017

我将笔记保存在 Evernote 和 Microsoft OneNote 的组合中。

Evernote 负责我在网上阅读时的大部分笔记。如果您以有条理的方式设置笔记本，并且在创建笔记时努力标记笔记，则内置搜索使该信息随时随地可用。好处：

*   可以按我想要的多种方式进行分组、排序和标记
*   在我的所有设备上可用
*   使用附加组件在 Chrome 上剪辑文章和片段是一件轻而易举的事
*   简单的界面

当我在 PC 上工作时，OneNote 非常棒；它比 Evernote 功能更丰富，自由格式文本和粘贴到任何其他文档的能力非常棒。希望它具有 Evernote 的可用性范围；我不需要其他任何东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T19:20:58.937

我在6 或 7 年前使用[TreePad ，它很棒。](http://www.treepad.com/)唯一的问题是我的电脑崩溃了，而且我没有按应有的方式进行备份。所以现在我使用谷歌文档。数据的组织方式不像 TreePad 那样好，但我不必担心备份，它具有搜索功能（尽管在没有找到我的东西之前，我注意到搜索中有一些小故障知道在那里）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-07T19:23:51.050

有一个非常好的知识管理系统，可以练习在 google 中输入正确的关键字（如果您愿意，也可以使用 bing）。

我一天做很多次，从来没有保存任何东西的冲动，甚至没有收藏它的冲动，因为如果需要的话，很容易找到它，如果不是通过你的网络浏览器的历史记录，在谷歌中输入一个类似的查询。

对于编程问题，您最好使用 stackoverflow.com 进行搜索，但 stackoverflow.com 的结果通常位于搜索结果列表的顶部。

# asp.net - 从 asp.net 访问 sql server 临时表

> ID：12324014
> 
> 赞同：0
> 
> 时间：2012-09-07T19:09:07.157
> 
> 标签：asp.net, vb.net, sql-server-2008-r2

我缺少从临时表中获取数据的方法。这显示错误，例如 Invalid object name #emp。请帮助我，我正在使用 Asp.net。

```
 Dim sqlcmd = New SqlCommand("select * into #emp from employees", conn)
 sqlcmd.ExecuteNonQuery()

 sqlcmd = New SqlCommand("select * from  #emp", conn)
 Dim dr As SqlDataReader = sqlcmd.ExecuteReader 
```

请参阅上面的查询工作正常，数据正在进入临时表。但它没有通过第二个查询再次选择。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T20:18:50.923

尝试使用全局临时表而不是本地临时表，如.. ##emp

或者

你可以只使用一个存储过程，它包含你想要执行的所有 SQL 语句并返回你想要的记录集。

# c# - 无法将派生类型隐式转换为其基本泛型类型

> ID：12324020
> 
> 赞同：29
> 
> 时间：2012-09-07T19:09:27.623
> 
> 标签：c#, .net, generics

我有以下类和接口：

```
public interface IThing
{
    string Name { get; }
}

public class Thing : IThing
{
    public string Name { get; set; }
}

public abstract class ThingConsumer<T> where T : IThing
{
    public string Name { get; set; }
} 
```

现在，我有一个工厂，它将返回从 ThingConsumer 派生的对象，例如：

```
public class MyThingConsumer : ThingConsumer<Thing>
{
} 
```

我的工厂目前看起来像这样：

```
public static class ThingConsumerFactory<T> where T : IThing
{
    public static ThingConsumer<T> GetThingConsumer(){
        if (typeof(T) == typeof(Thing))
        {
            return new MyThingConsumer();
        }
        else
        {
            return null;
        }
    }
} 
```

我被这个错误绊倒了：`Error 1 Cannot implicitly convert type 'ConsoleApplication1.MyThingConsumer' to 'ConsoleApplication1.ThingConsumer<T>'`

任何人都知道如何完成我在这里尝试的事情？

谢谢！

克里斯

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-07T19:29:54.410

如果您创建`ThingConsumer<T>`一个接口而不是抽象类，那么您的代码将按原样工作。

```
public interface IThingConsumer<T> where T : IThing
{
    string Name { get; set; }
} 
```

**编辑**

还需要进行一项更改。在`ThingConsumerFactory`中，转换回返回类型`IThingConsumer<T>`：

```
return (IThingConsumer<T>)new MyThingConsumer(); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-07T20:06:17.633

编译器在从`MyThingConsumer`to的转换中遇到了困难，`ThingConsumer<T>`即使`T:IThing`and`MyThingConsumer:Thingconsumer<Thing>`和`Thing:IThing`. 它要跳过很多圈！

`return new MyThingConsumer() as ThingConsumer<T>;`如果您使用而不是直接强制转换，则该代码有效。您知道结果永远不会是`null`，并且编译器很高兴，因为它保证在运行时返回正确类型的值。

**编辑：** 这是我用于测试的完整代码（在[Snippy](http://www.csharpindepth.com/Downloads.aspx)中）：

```
public interface IThing
{
    string Name { get; }
}

public class Thing : IThing
{
    public string Name { get; set; }
}

public abstract class ThingConsumer<T> where T : IThing
{
    public string Name { get; set; }
}

public class MyThingConsumer : ThingConsumer<Thing>
{
}

public static class ThingConsumerFactory<T> where T : IThing
{
    public static ThingConsumer<T> GetThingConsumer()
    {
        if (typeof(T) == typeof(Thing))
        {
            return new MyThingConsumer() as ThingConsumer<T>;
        }
        else
        {
            return null;
        }
    }
}

...

var thing = ThingConsumerFactory<Thing>.GetThingConsumer();
Console.WriteLine(thing); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-07T19:12:41.887

你需要像这样定义你的类，我相信：

```
public class MyThingConsumer<Thing> : ThingConsumer 
```

原因是`ThingConsumer`已经在它的定义中输入了这个：`where T : IThing`

现在，您可以拨打电话了`return new MyThingConsumer<T>();`。

这应该反过来匹配预期的返回类型`ThingConsumer<T>`

**编辑**

很抱歉造成混乱，这应该是可行的：

```
public class MyThingConsumer<T> : ThingConsumer<T> where T : IThing 
```

和

```
return new MyThingConsumer<T>(); 
```

# java - 在 Ubuntu 上播放 1.2.3

> ID：12324024
> 
> 赞同：1
> 
> 时间：2012-09-07T19:09:40.430
> 
> 标签：java, ubuntu, playframework-1.x

我正在尝试在 Ubuntu 上运行 play-1.2.3。它给了我以下错误：

```
@6bie96pcn
Internal Server Error (500) for request GET /favicon.ico

Oops: RuntimeException
An unexpected error occured caused by exception RuntimeException: java.io.FileNotFoundException: /usr/lib/play-1.2.3/play-1.2.3/samples-and-tests/forum/tmp/bytecode/DEV/DocViewerPlugin (No such file or directory)

play.exceptions.UnexpectedException: Unexpected Error
    at play.Play.start(Play.java:525)
    at play.Play.detectChanges(Play.java:599)
    at play.Invoker$Invocation.init(Invoker.java:186)
    at Invocation.HTTP Request(Play!)
Caused by: java.lang.RuntimeException: java.io.FileNotFoundException: /usr/lib/play-1.2.3/play-1.2.3/samples-and-tests/forum/tmp/bytecode/DEV/DocViewerPlugin (No such file or directory)
    at play.classloading.BytecodeCache.cacheBytecode(BytecodeCache.java:103)
    at play.classloading.ApplicationClassloader.loadApplicationClass(ApplicationClassloader.java:159)
    at play.classloading.ApplicationClassloader.loadClass(ApplicationClassloader.java:84)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:356)
    at play.plugins.PluginCollection.reloadApplicationPlugins(PluginCollection.java:141)
    at play.Play.start(Play.java:440)
    ... 3 more
Caused by: java.io.FileNotFoundException: /usr/lib/play-1.2.3/play-1.2.3/samples-and-tests/forum/tmp/bytecode/DEV/DocViewerPlugin (No such file or directory)
    at java.io.FileOutputStream.open(Native Method)
    at java.io.FileOutputStream.<init>(FileOutputStream.java:212)
    at java.io.FileOutputStream.<init>(FileOutputStream.java:165)
    at play.classloading.BytecodeCache.cacheBytecode(BytecodeCache.java:84)
    ... 8 more
14:42:40,419 ERROR ~ 
```

任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T15:10:58.930

我将确立以下两点。

文件和目录*/usr/lib/play-1.2.3/play-1.2.3/samples-and-tests/forum/tmp/bytecode/DEV/DocViewerPlugin*是否存在？

用户 play 是否在有权访问 /usr/lib/play-1.2.3/play-1.2.3/samples-and-tests/forum/tmp/bytecode/DEV/DocViewerPlugin 的情况下运行？

# java - Java应用程序测试和调试的一组问题

> ID：12324026
> 
> 赞同：-7
> 
> 时间：2012-09-07T19:09:49.857
> 
> 标签：java, debugging, testing, load-testing, stress-testing

1）是否可以跟踪应用程序抛出的异常数量？我可以编写一个能打印出这样一个数字的测试吗？未捕获的异常会停止执行，所以很容易，但是捕获的异常呢？

2）我如何编写一个测试来告诉我在一秒钟内完成的活动数量？例如，代码在一秒钟内抛出的平均异常数、每秒保存的平均实体数、每秒登录到该站点的平均用户数等。例如，我想在我的 web 应用程序上加载一些负载并找出有多少它可以在这样的负载下每秒保存的实体，其中限制等

3）我想知道某行执行了多少次。我可以在不更改代码的情况下做到这一点吗？

4）我想在代码执行过程中看到表达式的值而不改变代码（*）

5) 我想不在断点处停止我的应用程序的执行，但只有在某个表达式或变量等于某个值时（例如，如果此变量为空，则停止应用程序）。当然，无需更改代码。

(*) 也许我可以为此使用手表。Idea调试器有这个功能，我可以在执行过程中看到一些表达式的值。但是当执行第二次到达该行时，旧值被清除。如何以动态方式查看表达式值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T07:32:42.183

> 是否可以跟踪应用程序抛出的异常数量？

当你抓住它们时，数一数。

> 我可以编写一个能打印出这样一个数字的测试吗？

数完后打印出来。在单元测试中打印数字并不是很有用，因为它们通常被忽略。它必须是自动化的。

> 未捕获的异常会停止执行，所以很容易，但是捕获的异常呢？

你是捕捉异常的人，所以你必须检查你的代码来记录这一点。如果它不是您的代码，则无需担心对其进行测试。

> 我如何编写一个测试来告诉我在一秒钟内完成的活动数量？

重复执行一项任务一秒钟，然后打印它在一秒钟内完成了多少次。对于长时间运行的测试，最好运行几秒钟并取平均值。同样，仅打印此数字并不总是很有用。

> 我想知道某行执行了多少次。我可以在不更改代码的情况下做到这一点吗？

我们在谈论单元测试还是其他方式？

对于单元测试，您可以使用字节码操作，但这比更改代码复杂 100 倍。

您可以使用为您提供此信息和报告的代码覆盖率工具。例如，Emma 报告或 Idea 内置。注意：这不是内置在免费版本中的。

> 我想在不更改代码的情况下在代码执行期间查看表达式的值

您可以使用 beanshell 为表达式和调试接口执行此操作。这再次比在代码中添加一行复杂 1000 倍。

通常，您会为此使用调试器。

> 我想不在断点中停止我的应用程序的执行，但只有在某个表达式或变量等于某个值时（例如，如果此变量为空，则停止应用程序）。当然，无需更改代码。

您不能在不更改代码的情况下停止。

大多数调试器都支持这一点，但它们通过在停止代码后执行检查并在不满足条件时自动继续来实现。

> 但是当执行第二次到达该行时，旧值被清除。如何以动态方式查看表达式值？

使用 Watch 而不是 Evaluate 表达式。

# jquery - 使用 jquery 在 URL 中插入搜索参数

> ID：12324032
> 
> 赞同：0
> 
> 时间：2012-09-07T19:10:03.910
> 
> 标签：jquery, parameters, search-engine

我有一些不同的搜索参数，它们在不同的类别中可以是动态的。我的问题是，我需要使用 jquery 检查是否单击了复选框，然后更改 URL 以便插入参数。

我的一个搜索参数框的 HTML 是：

```
<h3>{heading}</h3>
<div class="{class} {parameter} searchParam" name="class">
    <ul>
        <li><input type="checkbox" name="{name}" value="{value}" />{value}</li>
    </ul>
</div> 
```

每个参数都有“searchParam”作为类 - 其他参数是动态的。

我需要为每个 .searchParam 创建一个 URL 部分，以便如果例如 3 个搜索参数已检查值（li 中的输入），则 URL 将如下所示：

[http://domain.com/param1=value1,value2,value3.param2=value1,value2.param2=value1](http://domain.com/param1=value1,value2,value3.param2=value1,value2.param2=value1)

这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T20:06:01.117

我是这样解决的：

```
$(document).ready( function() {
        var params = [];

        $(".searchParam").click(function(){
            params = [];
            $(".searchParam").each(function(index){
                var name = $(this).attr('name');
                var values = $('.'+ name +' input:checkbox:checked').map(function (){ return this.value }).get();

                if(values.length > 0){
                    params.push({'name': name, 'values': values }); 
                }           
            });

            var curUrl = $(location).attr('href');
            var newUrl = curUrl.split('/');
            var urlNumPar = newUrl.length - 1;

            var redirectURL = '';

            $(newUrl).each(function(index, val){
                if( index == urlNumPar)
                {
                } else {
                    redirectURL += val+"/";
                }
            });

            $(params).each(function(index, val){
                if(params.length > 1 && index > 0)
                {
                    redirectURL += ".";
                }
                redirectURL += val['name'] + "=" + val['values'];
            });

            window.location.href = redirectURL;
        });
    }); 
```

# bash - 导出在后台进程中不起作用

> ID：12324033
> 
> 赞同：1
> 
> 时间：2012-09-07T19:10:05.507
> 
> 标签：bash, shell

**管道.sh**

```
 export START=100
 . ./other.sh &
 wait 
```

**其他.sh**

```
sleep 5
export END=200 
```

但我没有看到变量**END**在`export -p`. 如果我在前台**获取 other.sh**它虽然有效。

```
 export START=100
 . ./other.sh 
```

如何从后台进程中导出变量？有什么解决办法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T19:20:44.803

子进程无法更改父环境，您需要以某种方式从父进程声明变量。例如使用文件：

管道.sh：

```
export START=100
. ./other.sh > tmp &
wait
source tmp
rm tmp 
echo $END 
```

其他.sh：

```
sleep 5
echo "export END=200" 
```

[另请参阅此答案](https://stackoverflow.com/a/6537624/390913)。

# c# - 位转换试图写入流

> ID：12324035
> 
> 赞同：0
> 
> 时间：2012-09-07T19:10:14.777
> 
> 标签：c#, .net, formatting, binary-data

我有一个代表二进制数的字符串：“1010”，它代表十进制的 10（十）。

我需要将此字符串写入 Stream 但保持二进制格式。当您通常要编写一个字符串时，.Net 会将其保存，将当前字符串转换为字节数组，然后将这些字节放入字符串中，我不希望这样，因为我想要包含我的流的字节是我以字符串“1010”为例。

我该怎么做？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T19:14:12.783

如果“1010”是字符串，您仍然可以将其写入流并保留格式，前提是接收端使用正确的编码。当然，您可以使用 a`StreamWriter`并将字符串写为字符串。

**更新**

好的，所以您的评论似乎稍微澄清了您的问题。因此，您似乎想将 base-2 字符串转换为一个字节，这样您就不会存储多个字节以在文本中表示您可以在单个字节中表示的内容。这公平吗？如果是这样，请使用`Convert.ToByte(String, Int32)`并指定`2`基数。然后你有一个对应于你的字符串的字节，你可以把它写出来。

# java - 如何在 Paypal 中查找最近的付款

> ID：12324037
> 
> 赞同：0
> 
> 时间：2012-09-07T19:10:18.323
> 
> 标签：java, api, paypal

我正在尝试为应用程序添加支付选项，以允许用户捐赠/支付某些功能。为此，我想让应用程序定期检查 PayPal 是否有最近的付款，最好使用 PayPal API。

我查看了 PayPal IPN，这似乎要求您拥有一个 PayPal 可以向其发送 HTTP 请求的 Web 服务器。但是，我试图避免将应用程序与网络服务器链接。据我所知，我查看过的其他 PayPal API（我只查看官方 API）并没有达到我所寻求的目的。

我正在寻求的用户体验是用户将向应用程序提供他们的 PayPal 电子邮件地址，在 Paypal 网站上向我的帐户（或任何人的帐户）捐款/付款。然后，我的应用程序将检查 PayPal 是否有过去的 X 次捐款，如果在其中找到用户的电子邮件地址并且该付款尚未获得奖励，则相应地奖励用户。我想这样做的原因是为了安全。我可能会将我的工作作为开源发布，我不希望有人修改它并保留用户的 PayPal 凭据。

那么，回顾一下，**我将使用哪个（如果有）PayPal API 来检查给定帐户最近是否有任何捐款？**理想情况下，用户将在 PayPal 网站上向帐户**捐款/付款，应用程序将识别该交易并适当地奖励用户。**我打算在 Java 中执行此操作，因此我可以使用随后可以通过 HTTP 请求调用的任何 Java API 或 Web API。

如果我以错误的方式进行此操作，或者如果不可能，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T23:26:21.910

您可以使用此处引用的 TransactionSearch API 端点： [https](https://cms.paypal.com/us/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_api_nvp_r_TransactionSearch) ://cms.paypal.com/us/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_api_nvp_r_TransactionSearch 来查找特定日期范围内的交易。

如果您需要有关其中一位捐助者的更多信息，可以使用从搜索请求中获得的 transactionID 在此处查询 TransactionDetails 端点： [https ://cms.paypal.com/us/cgi-bin/?cmd=_render -content&content_ID=开发者/e_howto_api_nvp_r_GetTransactionDetails](https://cms.paypal.com/us/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_api_nvp_r_GetTransactionDetails)

# c# - 对 Crystal Reports 参数使用逻辑 OR

> ID：12324039
> 
> 赞同：1
> 
> 时间：2012-09-07T19:10:45.150
> 
> 标签：c#, crystal-reports

我正在使用 Visual Studio 2010 中的 Crystal Reports，我有各种不同的参数和提示，供用户过滤掉他们想要的特定数据。例如，我有一个帐户参数和一个动态填充的产品名称参数。默认情况下，如果用户为这些参数中的每一个（例如账户 A 和产品 B）选择一个过滤器，则会执行逻辑与。仅返回包含帐户 A 和产品 B 的行。

有没有办法让它表现为 OR 或 AND（用户指定？）所以我可以返回帐户 A 或产品 B 的所有行

我知道很容易更改我的公式以将其视为 OR，但我真正希望用户能够以某种方式指定参数是否应视为 AND 或 OR。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T19:51:08.353

如果我对您的理解正确，您可以传入第三个字符串参数，调用它`{?Logic}`，其中包含“AND”或“OR”，然后您可以执行以下操作：

```
IF {?Logic} = "AND"
' Do your AND code here
ELSE
' Do your OR code here 
```

我意识到您基本上是在重复查询，一次使用`AND`和一次使用`OR`，但只要查询不太麻烦，这可能是最干净的方法。

# xslt-2.0 - XSL：用一个替换两个同级元素

> ID：12324040
> 
> 赞同：2
> 
> 时间：2012-09-07T19:10:46.983
> 
> 标签：xslt-2.0, xpath-2.0

我正在尝试替换此 XML：

```
<name type="personal" authority="local">
  <namePart>Gertrude</namePart>
  <namePart type="termsOfAddress">Aunt</namePart>
  <role>
     <roleTerm authority="marcrelator" type="text">Correspondent</roleTerm>
     <roleTerm authority="marcrelator" type="code">crp</roleTerm>
  </role>
</name> 
```

使用此 XML：

```
<name type="personal" authority="local">
  <namePart>Aunt Gertrude</namePart>
  <role>
     <roleTerm authority="marcrelator" type="text">Correspondent</roleTerm>
     <roleTerm authority="marcrelator" type="code">crp</roleTerm>
  </role>
</name> 
```

同时仍保留文档的其余部分。我尝试了两种方法：一种有效，但看起来很愚蠢，另一种无效，而且看起来同样愚蠢。

第一种方法

```
<xsl:template match="* | processing-instruction() | comment()">
    <xsl:copy>
        <xsl:copy-of select="@*" copy-namespaces="no"/>
        <xsl:apply-templates/>
    </xsl:copy>
</xsl:template>
<xsl:template match="//name/namePart[matches(., 'Gertrude')
                    and following-sibling::namePart[@type='termsOfAddress'
                        and matches(., 'Aunt')]]">
    <namePart>Aunt Gertrude</namePart>
</xsl:template>
<xsl:template match="//name/namePart[@type='termsOfAddress'
                       and matches(., 'Aunt')
                       and preceding-sibling::namePart[matches(., 'Gertrude')]]"/> 
```

方法

```
 <xsl:template match="* | processing-instruction() | comment()">
    <xsl:copy>
        <xsl:copy-of select="@*" copy-namespaces="no"/>
        <xsl:apply-templates/>
    </xsl:copy>
</xsl:template>
<xsl:template match="//name[descendant::namePart[matches(., 'Gertrude')]
                         and descendant::namePart[@type='termsOfAddress' 
                         and matches(., 'Aunt')]]/namePart">
    <namePart>Aunt Gertrude</namePart>
</xsl:template> 
```

所以，就像我说的，第一个有效，但是有两个单独的模板来处理这两个元素似乎有些多余。所以我尝试了第二种方法，它给了我这个：

```
<name type="personal" authority="local">
   <namePart>Aunt Gertrude</namePart>
   <namePart>Aunt Gertrude</namePart>
   <role>
      <roleTerm authority="marcrelator" type="text">Correspondent</roleTerm>
      <roleTerm authority="marcrelator" type="code">crp</roleTerm>
   </role>
</name> 
```

这不是我想要的。

有没有办法选择两个 namePart 元素并用一个替换它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T02:30:06.237

**这种转变**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="node()|@*">
     <xsl:copy>
       <xsl:apply-templates select="node()|@*"/>
     </xsl:copy>
 </xsl:template>

 <xsl:template match="/*">
  <xsl:copy>
    <xsl:apply-templates select="@*"/>

    <namePart>
      <xsl:apply-templates select="namePart">
        <xsl:sort select="count(@*)"/>
      </xsl:apply-templates>
    </namePart>
    <xsl:apply-templates select="*[not(self::namePart)]"/>
  </xsl:copy>
 </xsl:template>

 <xsl:template match="namePart">
   <xsl:if test="not(position()=1)"><xsl:text> </xsl:text></xsl:if>
   <xsl:value-of select="."/>
 </xsl:template>
</xsl:stylesheet> 
```

**应用于提供的 XML 文档时：**

```
<name type="personal" authority="local">
  <namePart>Gertrude</namePart>
  <namePart type="termsOfAddress">Aunt</namePart>
  <role>
     <roleTerm authority="marcrelator" type="text">Correspondent</roleTerm>
     <roleTerm authority="marcrelator" type="code">crp</roleTerm>
  </role>
</name> 
```

**产生想要的正确结果**：

```
<name type="personal" authority="local">
   <namePart>Gertrude Aunt</namePart>
   <role>
      <roleTerm authority="marcrelator" type="text">Correspondent</roleTerm>
      <roleTerm authority="marcrelator" type="code">crp</roleTerm>
   </role>
</name> 
```

# javascript - 将整数转换为字节串

> ID：12324042
> 
> 赞同：5
> 
> 时间：2012-09-07T19:10:53.897
> 
> 标签：javascript, string, int

我有一个变量，我们称之为它`myNum`，包含一个 32 位值。我想把它变成一个 4 字节的字符串，其中字符串的每个字节对应于`myNum`.

我正在尝试执行以下操作（不起作用）：

```
var myNum = someFunctionReturningAnInteger();
var str = "";

str += String.charCodeFrom((myNum >>> 24) & 0xff);
str += String.charCodeFrom((myNum >>> 16) & 0xff);
str += String.charCodeFrom((myNum >>> 8) & 0xff);
str += String.charCodeFrom(myNum & 0xff); 
```

例如，如果`myNum`等于 350，那么当我在 Wireshark 中检查它时，它看起来`str`像`0x00`, `0x00`, 。`0x01``0x5e`

`charCodeFrom()`仅当每个单独的字节具有值 <= 0x7f 时才执行我想要的操作。有没有一种独立于浏览器的方式来做我想做的事情？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T19:14:29.687

简而言之：你不能。

更长的时间：发生这种情况是因为字符串中具有值 >= 的任何字符`0x80`都将使用浏览器的默认编码（可能是 UTF-8，但有时您会发现浏览器选择“随机”）编码为 un​​icode。例如，如果您发送一个带有 value 的“字节” `\x80`，您可能会`\xC2\x80`在线上看到 (`"\xC2\x80".decode("utf-8") == u"\u0080")。

您可以将页面编码设置为 8 位编码，例如 CP1252，这*可以*（在*某些*浏览器中，当星星正确对齐时）诱使浏览器在对 JavaScript 字符串进行编码时使用相同的编码......但这不会保证跨浏览器兼容。

一些更可靠的选择可能是：

*   设置端点以将来自 JS 的字符串解码为 un​​icode，然后将它们重新编码为字节（在 Python 中，它类似于`"".join(chr(ord(ub)) for ub in your_unicode_string)`）
*   将“字节”作为整数数组发送：`var bytes = [ (myNum >> 24) & 0xFF, … ];`

# apache-flex - Flex RadioButton 标签不会截断

> ID：12324043
> 
> 赞同：0
> 
> 时间：2012-09-07T19:11:08.477
> 
> 标签：apache-flex, radio-button, label, truncate, flex-spark

我有 RadioButton，只有一个单数 RadioButton 不属于 Group 或类似的东西。我将它的宽度设置为 100。然后我给它一个比 100 像素长得多的标签。此外，在此 RadioButton 的外观中，Label 只是 Spark Label 的一个子类，在其中我将 TextBase 的 showTruncationTip 设置为 true，因为这是我正在寻找的行为。

所以标签应该截断，不是吗？相反，我的标签显示未截断为 100 的整个内容。

但是，如果我用 CheckBox 做同样的事情，它就可以正常工作。

这是我的 RadioButton 的 MXML：

```
<myNameSpace:RadioButton  width="100" id="radBtn1" value="1" label="Yooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooo o" /> 
```

这是皮肤中的相关部分：

```
<s:HGroup width="100%" left="18" gap="5" y="{ icon.height === 0 ? 2 : -4}" verticalAlign="middle">
                <myNameSpace:Icon id="icon"/>
                <myNameSpace:Label id="labelDisplay"
                                     textAlign="start"
                                     verticalAlign="middle"
                                     maxDisplayedLines="1"/>
      </s:HGroup> 
```

只是为了向您展示它基本上是相同的，这是我的 CheckBox 代码：

```
<myNameSpace:CheckBox id="checkBox" width="100" label="Click here to turn this On"/> 
```

和皮肤：

```
<s:HGroup left="18" right="0" top="3" bottom="3" verticalCenter="0" verticalAlign="middle" width="100%">
    <myNameSpace:Label id="labelDisplay"
             textAlign="start"
             maxDisplayedLines="{getStyle('wrapLabel') ?  -1 : 1}"
             width="100%" />
    <myNameSpace:Label id="readOnlyLabel" includeIn="readOnly"/>
</s:HGroup> 
```

发生什么了？我什至尝试使用普通的 Spark RadioButton 执行此操作，但即使这样也不会截断。

**编辑：**

好吧，从我从反复试验中发现的情况来看，似乎 mx RadioButton 会正确截断，但 Spark 不会。我的 RadioButton 从 Spark 扩展，因此它也不会截断。

所以现在的问题是：如何使 Spark RadioButton 的标签截断？正如您在原始帖子中的皮肤中看到的那样，我确实将 maxDisplayedLines 设置为 1，但它仍然不会显示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T19:19:05.750

如果你给`Label`一个宽度，它会截断文本。请注意，在您的复选框案例中，标签有`width="100%"`，但单选按钮案例中没有宽度。

# spotify - Spotify Apps API - 获取协作播放列表用户的 ID

> ID：12324044
> 
> 赞同：1
> 
> 时间：2012-09-07T19:11:10.773
> 
> 标签：spotify

是否可以在 Spotify Apps API 中获取将曲目添加到协作播放列表的人的用户 ID？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T20:19:21.487

In short — no. The Apps API exposes no usernames at all at this time.

# windows - 如何在 Windows 上可视化 GitHub 分支历史？

> ID：12324050
> 
> 赞同：14
> 
> 时间：2012-09-07T19:11:48.267
> 
> 标签：windows, git, version-control, github, github-for-windows

每次我考虑将我们小团队的所有项目都切换到 git / github 时，让我痛苦的是似乎没有一个工具可以可视化所有这些社交编码的优点。

当我们都开始疯狂地分支、分叉和合并时，我觉得我们将**需要**一个工具，让我们能够**以图形方式查看**我们的存储库及其众多分支的全貌，以便提出合并它的计划一切都回到了一个唯一的真理（众所周知的*起源/大师*）。

我曾多次尝试在谷歌上搜索这样的可视化工具，但空手而归。希望[GitHub for Windows](http://windows.github.com/)能一劳永逸地解决这个问题，但它所显示的只是特定签出分支的线性历史记录。

我正在寻找类似于[TortoiseHg](http://tortoisehg.bitbucket.io/screenshots.html#history)的东西- 一个显示所有分支和提交的图表。你知道任何这样的工具吗？（我们在 Windows 上。）

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2014-01-02T20:16:17.107

[SourceTree](http://www.sourcetreeapp.com/)在图表方面似乎比 TortoiseGit 更友好，您也可以与图表进行交互。

![源树](../Images/2302f491bb8c652e10690bbda445021f.png)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-09-07T20:11:59.763

坚持使用 msysgit

```
gitk --all 
```

是你想要的。从那里你甚至可以检查分支、重置它们、查看差异等。

对于更快的东西，我建议

```
git log --all --decorate --oneline --graph 
```

`less`默认情况下，这会通过管道传输，从而为您提供包括搜索在内的良好导航。

另一种选择是在虚拟机中安装 linux（虚拟机是免费的）并使用`tig`. 您可以通过 ssh 连接到虚拟机，这样您就不必在使用 linux 时处理虚拟机本身。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-09-07T20:35:29.820

[GitExtensions](https://code.google.com/p/gitextensions/)是您最好的选择。

![在此处输入图像描述](../Images/87afb5d80182d826d5b42f8c379cccd7.png)

[TortoiseGit](https://code.google.com/p/tortoisegit/)没问题，虽然它试图“保护我们免受自己的伤害”，但它们隐藏了 Git 的一些原生功能。失败。

[SeeGit](http://haacked.com/archive/2012/03/15/visualize-git-with-seegit.aspx)是 Phil Haack 的一个有趣的项目，它帮助可视化事物。

![在此处输入图像描述](../Images/ad8e8e7e5ed668effba9ba0fb1252975.png)

最好的工具是命令行，像这样的快速命令可能是最简单和最强大的：

```
git log --oneline --graph --decorate --all 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-07T20:17:58.200

这几乎必须是[TortoiseGit](http://code.google.com/p/tortoisegit/)，因为您已经熟悉 TortoiseHg。（检查`All Branches`）

![在此处输入图像描述](../Images/bc38abc3a2488c1a65d7d23fad7a04b4.png)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-04-27T11:49:58.210

现在 VScode 有一个名为[git-graph 的](https://marketplace.visualstudio.com/items?itemName=mhutchie.git-graph)扩展，它最适合我的需要。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-07T19:30:51.060

根据您的`push \fetch \ pull`习惯，您可以使用`gitk`查看器查看您在本地了解的内容（包括您获取的遥控器），或者您可以使用`Network`Github 上的功能查看它有什么。

只需选择一个多分叉项目（没有太多分叉；-）并单击网络选项卡以查看所有其他分叉与它的关系。

有时你确实需要切换 fork 以获得你想要的观点，但这并不太麻烦，对于一个小团队来说看起来还可以。

我最近向 Github 提出了关于分叉选择性的建议（当有很多分叉要显示时向下选择）。

# sql - 如何比较Oracle中的复杂集合？

> ID：12324053
> 
> 赞同：2
> 
> 时间：2012-09-07T19:12:22.380
> 
> 标签：sql, database, oracle, plsql

假设我有两个表类型（对象类型表），我想比较它们是否相等......

对象类型具有多个字段，例如 an `integer`、`varchar2`和`date`。

我已经看到人们`MULTISET EXCEPT`为了有效地`MINUS`在`INTEGER`.

但这不适用于两个复杂对象类型的表。

我还看到在`MAP MEMBER FUNCTION`使用运算符时提到了使用，以便使复杂的集合工作`SET`，但没有提到`MULTISET`功能。

我目前比较相等的方法是采用表类型 1 (TT1) 和表类型 2 (TT2) 并说它们相等 if `TT1 MINUS TT2 = 0 AND TT2 MINUS TT1 = 0`。但在这里我只是从两个表中为 MINUS 选择 PK，我还希望能够比较多个字段。

我希望`MULTISET`更快？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T20:46:34.497

是的，您可以使用 a`MAP MEMBER FUNCTION`来支持比较类型的嵌套表。

```
--#1: Create object
create or replace type type1 is object
(
    a integer,
    b varchar2(100),
    c date,
    map member function compare return raw
);
/

--#2: Create map function for comparisons.
--Returns the concatenated RAW of all attributes.
--Note that this will consider NULLs to be equal!
create or replace type body type1 as
    map member function compare return raw is
    begin
        return
            utl_raw.cast_to_raw(to_char(a))||
            utl_raw.cast_to_raw(b)||
            utl_raw.cast_to_raw(to_char(c, 'DD-MON-YYYY HH24:MI:SS'));

    end;
end;
/

--#3: Create nested table of the types
create or replace type type1_nt is table of type1;
/

--#4: Compare.
--You could use MULTISET, but it's easier to use regular operators like "<>" "and =".
declare
    tt1 type1_nt := type1_nt(type1(0, 'A', date '2000-01-01'),
                             type1(0, 'A', date '2000-01-01'));
    tt2 type1_nt := type1_nt(type1(0, 'B', date '2000-01-01'),
                             type1(0, 'B', date '2000-01-01'));
    tt3 type1_nt := type1_nt(type1(0, 'B', date '2000-01-01'),
                             type1(0, 'B', date '2000-01-01'));
begin
    if tt1 <> tt2 and tt2 = tt3 then
        dbms_output.put_line('Pass');
    else
        dbms_output.put_line('Fail');
    end if;
end;
/ 
```

我不知道这是否比手动比较每个属性更快。但我想差异不会很大。

# debugging - 将 OCaml 转换为 F#：有没有一种简单的方法可以在 F# 中模拟 OCaml 顶级 #trace

> ID：12324054
> 
> 赞同：5
> 
> 时间：2012-09-07T19:12:27.177
> 
> 标签：debugging, f#, ocaml, trace

我正在将几个基于 OCaml 的模块转换为 F#。我已将代码转换并在 F# 中运行，但是 F# 中的最终函数的结果与 OCaml 中的最终函数的结果不同。所以很明显我必须按照函数调用来找出哪个函数返回了错误的结果。

OCaml 有一个很好的顶级指令来跟踪函数的输入和输出，即[#trace](http://caml.inria.fr/resources/doc/guides/debug.en.html#trace)。

我搜索了 F# 的[调试](http://msdn.microsoft.com/en-us/library/system.diagnostics.debug)和[跟踪](http://msdn.microsoft.com/en-us/library/system.diagnostics.trace)方法，我得到的最接近的是使用 Trace.Write 方法检测代码，但每个方法需要几行。

例如

原来的

```
let fun001 parm001 =
  parm001 * 10 
```

仪表化

```
let fun001 parm001 =
  // For VS 2010, this trace output will be sent to Output window.
  System.Diagnostics.Trace.WriteLine("function001 <--");      
  System.Diagnostics.Trace.WriteLine(sprintf "%A" parm001);      
  let result = parm001 * 10
  System.Diagnostics.Trace.WriteLine("function001 -->");
  System.Diagnostics.Trace.WriteLine(sprintf "%A" result);
  result 
```

F# 是否具有与我在搜索时错过的 OCaml #trace 相同的功能？

如果你确定答案是否定的，那就是我所需要的。我知道人们不喜欢简短的回答，但如果答案是否定的，这就是我所需要的。

编辑

对于更复杂的方法，在这些方法中，捕获结果会对代码进行大量修改

原来的

```
let func001 parm001 parm002 =
    match parm001 with
    | pattern001 -> func002 parm002
    | head :: tail -> 
        func003 head
        func001 tail
    | [] -> failwith "failed" 
```

仪表化

```
let func001org parm001 parm002 =
    match parm001 with
    | pattern001 -> func002 parm002
    | head :: tail -> 
        func003 head
        func001 tail
    | [] -> failwith "failed"
and fun001 parm001 parm002 =
  // For VS 2010, this trace output will be sent to Output window.
  System.Diagnostics.Trace.WriteLine("function001 <--");      
  System.Diagnostics.Trace.WriteLine(sprintf "%A, %A" parm001 parm002 );      
  let result = func001org parm001 parm002 
  System.Diagnostics.Trace.WriteLine("function001 -->");
  System.Diagnostics.Trace.WriteLine(sprintf "%A" result);
  result 
```

编辑

PostSharp 不支持 F#。请参阅：[将 PostSharp 与 F# 一起使用 - 需要带有工作示例的文档](https://stackoverflow.com/a/14653693/1243762)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-07T23:17:40.950

F# 中没有内置功能，但我相信您可以使用第三方工具来实现。

一种方法可能是使用[PostSharp](http://www.sharpcrafters.com/)。这是面向方面编程的工具（这是一种将一些附加操作附加到某些方法的样式）。它被实现为一个后处理器，它接受一个已编译的程序集并向每个方法添加一些操作。我不确定它是否已经用 F# 测试过，但我相信它应该可以工作。

使用 PostSharp，您可以实现记录有关方法调用的信息的*方面*（就像`#trace`OCaml 中的命令），然后使用全局配置将其附加到所有方法。他们网站上的文章[Non-Invasive Tracing & Logging](http://www.sharpcrafters.com/solutions/logging)正是实现了这一点（并且以更加灵活和强大的方式）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-07T19:19:27.430

不（尽管我很想在 F# 中拥有这样的功能）。

# scala - 正确终止 scala 中的 akka 演员

> ID：12324055
> 
> 赞同：5
> 
> 时间：2012-09-07T19:12:31.413
> 
> 标签：scala, actor, akka

我已经编写了启动一个actor、杀死它并完成执行的示例代码。

```
object PureAkka {
  def main(argv : Array[String]) = {
    val actorSystem : ActorSystem = ActorSystem("main")
    val actor : ActorRef = actorSystem.actorOf(Props( new Actor {
      override def receive = {
        case x => println(x)
      }
      override def preStart() = println("prestart")
      override def postStop() = println("poststop")
    } ) )
    Thread.sleep(15000)
    actor ! PoisonPill
  }
} 
```

此代码打印：

```
[info] prestart
[info] poststop 
```

但它拒绝停止，直到我用 Ctrl-C 终止进程

应用程序在等待什么？我怎样才能以适当的方式阻止它？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-07T19:32:30.467

也许调用 ActorSystem.shutdown() 就可以了。

根据[akka 文档](http://doc.akka.io/api/akka/2.0.3/#akka.actor.ActorSystem)：

> 抽象定义 **`shutdown(): Unit`**
> 
> 停止这个演员系统。这将停止监护actor，后者将递归停止其所有子actor，然后是系统监护人（记录actor驻留在其下方）并执行所有已注册的终止处理程序（请参阅ActorSystem.registerOnTermination）。

# ruby - 如何使用 Padrino 在 run 方法中设置 WEBRick 选项参数

> ID：12324056
> 
> 赞同：1
> 
> 时间：2012-09-07T19:12:32.887
> 
> 标签：ruby, ssl, sinatra, webrick, padrino

我不想修补帕德里诺。

我仍然希望能够从命令行使用命令 padrino start -d。

我想在 padrino 中启动并运行 SSL。在 Sinatra 中，我只是这样做：

```
Rack::Handler::WEBrick.run MyServer, MyServerOptionsWithAppropriateSSLStuffEtc 
```

我在处理设置这些选项的 Padrino 核心深处找到了该文件，但我真的不想对应用程序进行修补。

理想情况下，我希望有某种方法可以在我的 Padrino::Application 子类中设置选项。

到目前为止，我还没有找到任何关于如何做到这一点的文档，或者这是否可能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T21:41:17.547

嗯，你应该能够做到这一点。

在您的项目文件夹中，您应该看到 config.ru

尝试编辑它删除最后一行：

```
Rack::Handler::WEBrick.run Padrino.application, MyServerOptionsWithAppropriateSSLStuff 
```

然后从命令行：

```
$ rackup 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-17T15:56:34.223

I know this is old, but in case anybody is trying to do this cleanly, here is what I use:

```
class MyApplication < ::Sinatra::Base
  # ...

  def self.server_settings
    { key: value, ... }
  end

  # ...
end 
```

You can also inject settings prior to runtime:

```
MyApplication.class_exec(server_settings) do |server_params|
  def self.server_settings
    server_params
  end
end 
```

I frequently use the second example for injecting a custom logger into my application for specs.

For example:

```
module CustomLogger
  def logger
    settings.try(:server_settings)[:Logger] || request.logger
  end
end

MyApplication.class_exec(CustomLogger) do |logger_module|
  helpers logger_module
  def self.server_settings
    # global specified in guard/spec helper
    { Logger: $LOGGER }
  end
end

class MyApplication < ::Sinatra::Base
  enable :logging

  get '/' do
    logger.info "FOO"
  end
end

MyApplication.run! 
```

See [this source link](https://github.com/sinatra/sinatra/blob/master/lib/sinatra/base.rb#L1434) for more info about `server_settings` usage in `Application::self.run!`.

# css - 使用百分比宽度在 Firefox 中效果很好，而在 Chrome 中效果不佳，为什么？

> ID：12324058
> 
> 赞同：0
> 
> 时间：2012-09-07T19:12:43.660
> 
> 标签：css

我将对象的宽度设置为 705%。这在 Firefox 中运行良好，但 chrome 似乎忽略了 5 部分并将其渲染为 700%。

火狐

![火狐](../Images/dba4d49e965852e7b66de547fbb824f7.png)

铬合金

![铬合金](../Images/5a77d285d771ba3132a0c1f44310a67a.png)

所有条形的百分比宽度都为 705%、603.8%，但 Chrome 似乎忽略了“小数字”

任何人都可以提出解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T19:33:40.437

要么忍受不一致，尽可能四舍五入你的小数，或者使用不同的单位大小（ems适用于小数）。百分比的问题已经存在了很长一段时间。

[http://www.sitepoint.com/forums/showthread.php?547308-CSS-percentage-width-roundoff](http://www.sitepoint.com/forums/showthread.php?547308-CSS-percentage-width-roundoff)

# c++ - 使用数组实现堆栈以支持不同数据类型的项目

> ID：12324060
> 
> 赞同：1
> 
> 时间：2012-09-07T19:13:02.533
> 
> 标签：c++, c, stack

如何使用支持不同类型项目的数组来实现堆栈。例如，它应该对字符、整数、浮点数和双精度数进行操作。

我已经使用`void`指针实现了它。下面是`C`实现：

```
void push( void** stack, int* top, void* data, size_t size )
{
    unsigned i;
    ++*top;

    stack[*top] = malloc( size );

    for( i = 0; i < size; ++i )
            ( (char*)stack[*top] )[i] = ( (char*)data )[i];

}

int main()
{
    void* stack[10];
    int top = -1, data = 10;
    char ch = 'a';

    push( stack, &top, (void*)&data, sizeof( int ) );

    push( stack, &top, (void*)&ch, sizeof( char ) );        

    printf( "%d ", *(int*)stack[0] );
    printf( "%c ", *(char*)stack[1] );

    return 0;
} 
```

该代码对我来说[很好](http://ideone.com/7ysFB)。

上述实现的问题是必须事先知道数据的类型。

是否存在一种在不知道要操作的数据类型的先验信息的情况下实现它的方法[我知道这在 C 中是不可能的，我们可以在 C++ 中做到这一点，如果是，如何？]？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T19:23:49.580

它可以在 C 中完成。首先，您需要一个描述包含类型的枚举

```
typedef enum {TYPE_INT, TYPE_CHAR, TYPE_STRING, ... } contained_type_t; 
```

然后把所有东西放在一个结构中

```
typedef struct {
  contained_type_t contained_type;
  union {
    int int_value;
    char char_value;
    void* pointer_value;
    ... and so on ...
  } data;
}; 
```

您可以查看[GObject](http://developer.gnome.org/gobject/stable/)模型及其在[GLib](http://developer.gnome.org/glib/2.32/)中的用途，可以混合*类型的**通用*列表的实现很有趣。

 ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T21:44:20.623

如果我了解您的要求，您可以使用`boost::any`C++ 来实现此目的。

```
#include <boost/any.hpp>
#include <vector>

class AnyStack {
    std::vector<boost::any> vec;
public:
    template <class T> void push (const T &e) {
        boost::any v = e;
        vec.push_back(v);
    }
    class Proxy {
        friend class AnyStack;
        std::vector<boost::any> &vec;
        Proxy(std::vector<boost::any> &v) : vec(v) {}
    public:
        template <typename T> operator T () {
            boost::any v = vec.back();
            vec.pop_back();
            return boost::any_cast<T>(v);
        }
    };
    Proxy pop () { return Proxy(vec); }
    boost::any top () { return vec.back(); }
}; 
```

正如其他人所建议的，您可以使用 RTTI 来确定堆栈中项目的类型。下面的示例演示了执行此操作的输出例程。

```
#include <iostream>
#include <string>

std::ostream & operator << (std::ostream &os, const boost::any &a) {
    if (a.type() == typeid(char)) {
        return os << boost::any_cast<char>(a);
    }
    if (a.type() == typeid(int)) {
        return os << boost::any_cast<int>(a);
    }
    if (a.type() == typeid(float)) {
        return os << boost::any_cast<float>(a);
    }
    if (a.type() == typeid(double)) {
        return os << boost::any_cast<double>(a);
    }
    if (a.type() == typeid(std::string)) {
        return os << boost::any_cast<std::string>(a);
    }
}

int main () {
    AnyStack a;
    a.push(3);
    std::cout << a.top() << std::endl;
    a.push(std::string("hello"));
    std::cout << a.top() << std::endl;
    return 0;
} 
```*

# regex - 使用 grep 在多个文件中查找字符串

> ID：12324063
> 
> 赞同：17
> 
> 时间：2012-09-07T19:13:18.463
> 
> 标签：regex, windows, grep

我有一个文件夹，里面有子文件夹，都有很多类型的文件。`.css`我想在-files中搜索一个单词。我正在使用 Windows 7，我有`grep`.

我如何使用`grep`：

1.  找到图案并打印
2.  如果找到模式，请提供文件名（和路径）

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-09-07T19:32:05.007

其实你不需要`find`。只需使用：

```
grep -R --include=*.css -H pattern . 
```

这将递归并在子目录中查找所有 *.css，而 -H 将显示文件名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T19:16:58.723

```
查找文件夹/ -name "*.css" |xargs grep "your-pattern"
```

您将需要安装 cygwin 来执行此操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-14T05:01:12.647

如果我们要查找的文件有模式，那么我们可以使用它。考虑我在命名的文件中寻找模式“cardlayout”`chap1.lst chap2.lst`等等。然后命令

```
grep -e 'cardlayout' ` find . -name "chap??.lst"` 
```

希望这会有所帮助

# entity-framework - EF删除订单

> ID：12324064
> 
> 赞同：0
> 
> 时间：2012-09-07T19:13:21.463
> 
> 标签：entity-framework, entity

我有以下实体结构- ParameterDefinition-->ParameterGroup-->Parameter ParameterDefinition-->ParameterOperations

还有一个带有 2 个 FK-Parameter & ParameterOperation（多对多实体）的映射表。问题是，当我尝试删除 ParameterDefinition 时，它首先尝试删除无法完成的 ParameterGroup，因为 FK 约束到 Parameter。

我所有的关联都设置在删除-级联上。

我该如何解决这个问题，首先它将从地图实体开始，而不是根据 FK 的其他实体？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T19:17:39.957

从我读过的所有内容中，您都必须将数据库中的 FK 设置为在删除时级联。更新时 EDMX 文件不会选择它，因此您还必须在 EDMX 文件中的 FK 上设置删除时的级联。您是否在数据库级别和 EDMX 级别都设置了删除时的级联选项？我正在阅读它，因为您只在 EDMX 级别完成了此操作，但我可能是错的。

我不喜欢在删除时将所有 FK 设置为级联，所以我只需要以正确的顺序删除内容即可。

# xml - XSLT ...我找不到（工作）在 XML 中找到最小值并设置变量

> ID：12324065
> 
> 赞同：1
> 
> 时间：2012-09-07T19:13:33.200
> 
> 标签：xml, xslt

我已经搜索了几个小时，但没有找到一个允许第一个位置最低的示例。我得到'False'而不是返回的值......

示例 XML：

```
<?xml version="1.0"?>
<GetLowestOfferListingsForASINResponse xmlns="http://mws.amazonservices.com/schema/Products/2011-10-01">
  <GetLowestOfferListingsForASINResult ASIN="0470067802" status="Success">
    <AllOfferListingsConsidered>false</AllOfferListingsConsidered>
    <Product xmlns="http://mws.amazonservices.com/schema/Products/2011-10-01" xmlns:ns2="http://mws.amazonservices.com/schema/Products/2011-10-01/default.xsd">
      <LowestOfferListings>
        <LowestOfferListing>
          <Qualifiers>
            <ItemCondition>Used</ItemCondition>
            <ItemSubcondition>Good</ItemSubcondition>
          </Qualifiers>
          <Price>
            <LandedPrice>
              <Amount>15.71</Amount>
            </LandedPrice>
          </Price>
        </LowestOfferListing>
        <LowestOfferListing>
          <Qualifiers>
            <ItemCondition>Used</ItemCondition>
            <ItemSubcondition>Good</ItemSubcondition>
          </Qualifiers>
          <Price>
            <LandedPrice>
              <Amount>16.71</Amount>
            </LandedPrice>
          </Price>
        </LowestOfferListing>
        <LowestOfferListing>
          <Qualifiers>
            <ItemCondition>Used</ItemCondition>
            <ItemSubcondition>Good</ItemSubcondition>
          </Qualifiers>
          <Price>
            <LandedPrice>
              <Amount>18.71</Amount>
            </LandedPrice>
          </Price>
        </LowestOfferListing>
      </LowestOfferListings>
    </Product>
  </GetLowestOfferListingsForASINResult>
</GetLowestOfferListingsForASINResponse> 
```

无法正常工作的示例 XSLT：

```
 <?xml version="1.0" encoding="utf-8"?>
 <xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0" xmlns:amz="http://mws.amazonservices.com/schema/Products/2011-10-01" exclude-result-prefixes="amz">
 <xsl:output method="xml" version="1.0" encoding="utf-8" indent="yes"/>
 <xsl:template match="/">
  <xsl:variable name="MIN_Landed">
   <xsl:for-each select="//Amount">
    <xsl:sort data-type="number" order="ascending"/>
    <xsl:if test="position()=1"><xsl:value-of select="."/></xsl:if>
   </xsl:for-each>
  </xsl:variable>
 <FMPXMLRESULT xmlns="http://www.filemaker.com/fmpxmlresult">
   <ERRORCODE>0</ERRORCODE>
   <PRODUCT BUILD="" NAME="" VERSION=""/>
   <DATABASE DATEFORMAT="M/d/yyyy" LAYOUT="" NAME="" RECORDS="1" TIMEFORMAT="h:mm:ss a"/>
   <METADATA>
      <FIELD EMPTYOK="YES" MAXREPEAT="1" NAME="DATA" TYPE="TEXT"/>
      <FIELD EMPTYOK="YES" MAXREPEAT="1" NAME="Min_Landed" TYPE="TEXT"/>
   </METADATA>
   <RESULTSET>
      <xsl:attribute name="FOUND">1</xsl:attribute>
      <xsl:for-each select="amz:GetLowestOfferListingsForASINResponse/amz:GetLowestOfferListingsForASINResult/amz:Product/amz:LowestOfferListings/amz:LowestOfferListing">
           <ROW>
                <xsl:attribute name="MODID">0</xsl:attribute>
                <xsl:attribute name="RECORDID">1</xsl:attribute>
                <COL>
                     <DATA>
                          <xsl:value-of select="amz:Qualifiers/amz:ItemCondition"/>
                     </DATA>
                </COL>
                <COL>
                     <DATA>
                          <xsl:value-of select="$MIN_Landed"/>
                     </DATA>
                </COL>
           </ROW>
      </xsl:for-each>
    </RESULTSET>
   </FMPXMLRESULT>
  </xsl:template>
</xsl:stylesheet> 
```

请帮忙！

我真的不想发布这么多亚马逊代码，但在这里它被简化为一个简单的响应

显然顺序很重要......

可以工作的示例 XSLT：

```
 <?xml version="1.0" encoding="utf-8"?>
 <xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0" xmlns:amz="http://mws.amazonservices.com/schema/Products/2011-10-01" exclude-result-prefixes="amz">
 <xsl:output method="xml" version="1.0" encoding="utf-8" indent="yes"/>
 <xsl:template match="/">
  <xsl:variable name="MIN_Landed">
   <xsl:for-each select="//Amount">
    <xsl:sort data-type="number" order="ascending"/>
    <xsl:if test="position()=1"><xsl:value-of select="."/></xsl:if>
   </xsl:for-each>
  </xsl:variable>
 <FMPXMLRESULT xmlns="http://www.filemaker.com/fmpxmlresult">
   <ERRORCODE>0</ERRORCODE>
   <PRODUCT BUILD="" NAME="" VERSION=""/>
   <DATABASE DATEFORMAT="M/d/yyyy" LAYOUT="" NAME="" RECORDS="1" TIMEFORMAT="h:mm:ss a"/>
   <METADATA>
      <FIELD EMPTYOK="YES" MAXREPEAT="1" NAME="DATA" TYPE="TEXT"/>
      <FIELD EMPTYOK="YES" MAXREPEAT="1" NAME="Min_Landed" TYPE="TEXT"/>
   </METADATA>
   <RESULTSET>
      <xsl:attribute name="FOUND">1</xsl:attribute>
      <xsl:for-each select="amz:GetLowestOfferListingsForASINResponse/amz:GetLowestOfferListingsForASINResult/amz:Product/amz:LowestOfferListings/amz:LowestOfferListing">
           <ROW>
                <xsl:attribute name="MODID">0</xsl:attribute>
                <xsl:attribute name="RECORDID">1</xsl:attribute>
                <COL>
                     <DATA>
                          <xsl:value-of select="$MIN_Landed"/>
                     </DATA>
                </COL>
                <COL>
                     <DATA>
                          <xsl:value-of select="amz:Qualifiers/amz:ItemCondition"/>
                     </DATA>
                </COL>
           </ROW>
      </xsl:for-each>
    </RESULTSET>
   </FMPXMLRESULT>
  </xsl:template>
</xsl:stylesheet> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T20:15:33.007

展示你实际使用的代码，或者至少是一个呈现所有可能因素的传真，比如命名空间，这是值得的。交换这个：

```
<xsl:for-each select="//amz:Amount"> 
```

如果这不能解决问题，则您的 xsl 外部存在问题。这不利于您提供的来源。

* * *

档案

您的示例未显示您的代码在 XSL 中的位置，也不清楚源文档中的每个 Amount 是否始终位于 a、b、c、d、e、f、Price 元素中的每个元素之下，或者是否存在是一个根元素，如果是，那是什么。您的代码也不会关闭变量标记，也不会显示变量的输出方式。

假设上述任何一项都没有问题，您的“订单”属性应该是升序的，因为使用`position() = '1'`，您正在寻找排序后位于顶部位置的节点。升序将最低值放在首位。

无论源文档结构如何，以下代码本身都会输出源文档中的最小值：

```
<xsl:template match="/">
    <xsl:variable name="MIN_Landed">
        <xsl:for-each select="//Amount">
            <xsl:sort data-type="number" order="ascending"/>
            <xsl:if test="position()=1">
                <xsl:value-of select="."/>
            </xsl:if>
        </xsl:for-each>
    </xsl:variable>
    <xsl:value-of select = "$MIN_Landed" />
</xsl:template> 
```

# c# - 将 Windows 7 64 位机器上的 C# 项目转换为 Windows xp 32 位？

> ID：12324070
> 
> 赞同：1
> 
> 时间：2012-09-07T19:13:56.250
> 
> 标签：c#, sql-server, crystal-reports-2010

如何将 Windows 7 64 位计算机上的 C# 项目转换为在 Windows xp 32 位上运行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T19:29:57.613

在项目中将平台目标设置为 x86。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-07T19:31:11.310

您还可以将平台目标设置为 AnyCPU，然后项目将在两台机器上本地运行。在这篇文章中有一个很好的解释：[How to add x64 (or Any CPU) as a build option in Visual Studio 2010 (from console application to class library)](https://stackoverflow.com/questions/8333468/how-to-add-x64-or-any-cpu-as-a-build-option-in-visual-studio-2010-from-consol)

# python - Python urllib2：如何消除 urllib2 添加它自己的标头

> ID：12324072
> 
> 赞同：3
> 
> 时间：2012-09-07T19:14:02.540
> 
> 标签：python, urllib2

我正在测试一些应用程序，我在其中发送一些 POST 请求，想要在请求中缺少某些标头时测试应用程序的行为，以验证它是否生成了正确的错误代码。

为此，我的代码如下。

```
 header = {'Content-type': 'application/json'}
    data = "hello world"
    request = urllib2.Request(url, data, header)
    f = urllib2.urlopen(request)
    response = f.read() 
```

问题是 urllib2 在发送 POST 请求时添加了它自己的标头，例如 Content-Length、Accept-Encoding，但我不希望 urllib2 添加比我在上面的标头字典中指定的标头更多的标头，有没有办法为此，我尝试将其他我不想要的标头设置为无，但它们仍然将这些空值作为我不想要的请求的一部分。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T10:58:42.100

标头采用字典类型，下面的示例使用 chrome 用户代理。对于所有标准和一些非搁置的标头字段，请查看[此处](http://en.wikipedia.org/wiki/List_of_HTTP_header_fields)。您还需要使用 urllib 而不是 urllib2 对数据进行编码。[这在此处](http://docs.python.org/howto/urllib2.html)的 python 文档中都有提及

```
import urllib
import urllib2

url = 'http://www.someserver.com/cgi-bin/register.cgi'
user_agent = 'Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.1 (KHTML, like Gecko) Chrome/22.0.1207.1 Safari/537.1'
values = {'name' : 'Michael Foord',
          'location' : 'Northampton',
          'language' : 'Python' }
headers = { 'User-Agent' : user_agent }

data = urllib.urlencode(values)
req = urllib2.Request(url, data, headers)
response = urllib2.urlopen(req)
the_page = response.read() 
```

# c++ - 这个 bitset::count() 的实现是如何工作的？

> ID：12324081
> 
> 赞同：5
> 
> 时间：2012-09-07T19:14:32.417
> 
> 标签：c++, c, stl

下面是`std::bitset::count`使用 MSVC 2010 的实现：

```
size_t count() const
    {   // count number of set bits
    static char _Bitsperhex[] = "\0\1\1\2\1\2\2\3\1\2\2\3\2\3\3\4";
    size_t _Val = 0;
    for (int _Wpos = _Words; 0 <= _Wpos; --_Wpos)
        for (_Ty _Wordval = _Array[_Wpos]; _Wordval != 0; _Wordval >>= 4)
            _Val += _Bitsperhex[_Wordval & 0xF];
    return (_Val);
    } 
```

有人可以向我解释这是如何工作的吗？有什么诀窍`_Bitsperhex`？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-07T19:19:33.693

`_Bitsperhex`包含十六进制数字中设置的位数，由该数字索引。

```
digit: 0000 0001 0010 0011 0100 0101 0110 0111 1000 1001 1010 1011 1100 1101 1110 1111
value: 0    1    1    2    1    2    2    3    1    2    2    3    2    3    3    4
index: 0    1    2    3    4    5    6    7    8    9    A    B    C    D    E    F 
```

该函数通过与 0xF（二进制 1111）进行与运算，一次从它正在使用的值中检索一个数字，查找该数字中设置的位数，并将它们相加。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-07T19:19:58.983

`_Bitsperhex`是一个 16 元素整数数组，它将`[0..15]`范围内的数字映射到该数字`1`的二进制表示中的位数。例如，`_Bitsperhex[3]`等于`2`，它是 的`1`二进制表示中的位数`3`。

其余的很简单：内部数组中的每个多位字都`_Array`被解释为一系列 4 位值。每个 4 位值通过上`_Bitsperhex`表馈送以对位进行计数。

这是此处描述的基于查找表的方法的略微不同的实现：http: [//graphics.stanford.edu/~seander/bithacks.html#CountBitsSetTable](http://graphics.stanford.edu/~seander/bithacks.html#CountBitsSetTable)。在链接中，他们使用包含 256 个元素的表，并将 32 位字拆分为四个 8 位值。

# spring - Spring 中的 util:map 获取 map 类型的每个 bean

> ID：12324082
> 
> 赞同：19
> 
> 时间：2012-09-07T19:14:34.227
> 
> 标签：spring, map

我有一个让我流泪的 Spring 地图问题。

我的春天是这样的：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans
    xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:util="http://www.springframework.org/schema/util"
    xsi:schemaLocation="
        http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
        http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util-3.0.xsd
    ">

   <util:map id="mockMap">
        <entry key="userTest1" value="test1"/>
        <entry key="userTest2" value="test2"/>
        <entry key="userTest3" value="test6"/>
    </util:map>
</beans> 
```

然后我自动装配的代码如下（不相关部分省略）：

```
@Autowired
@Resource(name="mockMap")
Map<String, String> testMap;

@Test
public void testGetGearListActivityOK() {
    for (String key : testMap.keySet()) {
        System.out.println("key = " + key);
    }
} 
```

令人惊讶的是，这实际上会给我一个自动装配步骤的错误，说没有匹配类型 String 的 bean。但是，如果我将单元测试中的地图更改为地图，那么我会得到以下输出：

> ```
> [junit] key = mockMap
> [junit] key = org.springframework.context.annotation.internalConfigurationAnnotationProcessor
> [junit] key = org.springframework.context.annotation.internalAutowiredAnnotationProcessor
> [junit] key = org.springframework.context.annotation.internalRequiredAnnotationProcessor
> [junit] key = org.springframework.context.annotation.internalCommonAnnotationProcessor
> [junit] key = systemProperties
> [junit] key = systemEnvironment
> [junit] key = messageSource
> [junit] key = applicationEventMulticaster
> [junit] key = lifecycleProcessor 
> ```

我还不能让条目的关键部分实际显示为关键。如果我将地图改回 Map 并将一些添加到我的 spring 中，那么地图会使用它们的 id 作为键填充这些内容。

我在这里很困惑，过去使用过相当数量的弹簧。如果有人知道这里到底发生了什么，我将不胜感激。

提前致谢。

另外，我看到了这个问题：[Auto-wiring a List using util schema give NoSuchBeanDefinitionException](https://stackoverflow.com/questions/1363310/auto-wiring-a-list-using-util-schema-gives-nosuchbeandefinitionexception)

但是那里的解决方案是使用@Resource，我已经在这样做了..

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-09-07T19:22:38.680

删除 @Autowired 并仅使用 @Resource(name="mockMap")

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-09-07T05:28:37.187

你不能自动装配这样的集合。

但是，您可以尝试以下方法：

```
@Resource(name="mockMap")
private Map<String, String> testMap; 
```

甚至：

```
@Value("#{mockMap}")
private Map<String, String> testMap; 
```

检查[spring 文档](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/beans.html#beans-autowired-annotation-qualifiers)，提示部分：

> 本身定义为集合或映射类型的 bean 不能通过 @Autowired 注入，因为类型匹配不适用于它们。对此类 bean 使用 @Resource

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-26T07:17:50.147

仅使用 @Resource 并将配置中的“testMap”更改为“mockMap”

# visual-studio-2010 - 搜索类实例化的项目

> ID：12324083
> 
> 赞同：1
> 
> 时间：2012-09-07T19:14:46.130
> 
> 标签：visual-studio-2010

Visual Studio 2010 中是否有工具可以扫描项目并找出特定类的实例化位置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T19:16:57.693

[Shift + F12](http://weblogs.asp.net/scottgu/archive/2010/08/24/search-and-navigation-tips-tricks-with-visual-studio.aspx)将找到所有用法。

只需选择或将光标移动到一个类型上，然后按“Shift + F12”：

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-06-07T09:15:45.083

我意识到这是很久以前问过的，但我添加了这个，以防有人在看起来类似的搜索引擎中偶然发现这个。

如果您有 ReSharper，您可以使用 Find Usages（默认为 Shift-F12），然后您可以在结果中按使用类型进行过滤。新实例创建就是这样一种过滤器，它可能会找到所有实例化情况（反射除外）。

# joomla - J Factory::getUser() 在 joomla 中返回 0 id

> ID：12324085
> 
> 赞同：1
> 
> 时间：2012-09-07T19:14:52.133
> 
> 标签：joomla, joomla1.5, joomla2.5

我在模块中使用 ajax 页面来保存数据。在我使用的时候，`JFactory::getUser()`我得到的结果是

```
JUser Object
(
    [isRoot:protected] => 
    [id] => 0
    [name] => 
    [username] => 
    [email] => 
    [password] => 
    [password_clear] => 
    [usertype] => 
    [block] => 
    [sendEmail] => 0
    [registerDate] => 
    [lastvisitDate] => 
    [activation] => 
    [params] => 
    [groups] => Array()

[guest] => 1
[lastResetTime] => 
[resetCount] => 
[_params:protected] => JRegistry Object
    (
        [data:protected] => stdClass Object ()

    )

[_authGroups:protected] => 
[_authLevels:protected] => 
[_authActions:protected] => 
[_errorMsg:protected] => 
[_errors:protected] => Array()

[aid] => 0 
```

在运行此代码之前已登录，为什么这仍然返回 0 用户 ID。谁可以帮我这个事....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T15:14:06.287

您得到的响应`JFactory::getUser()`是当前的 JUser 对象（与您的会话相关）或来宾的空 JUser 对象。因此，在您的情况下，您要么没有登录，要么没有正确加载 Joomla。

您应该使用的唯一 php 文件是`index.php`and `administrator/index.php`，它们正在加载所有必要的文件并执行您想要的操作。（如果您使用某些 CLI 脚本，您可能还有其他选项）

[您可以在Joomla 文档](http://docs.joomla.org/Adding_AJAX_to_your_component)中找到有关 Ajax 的更多信息

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-01T10:23:42.307

我有一个类似的问题，原来是 cookie 域的问题，我使用域 example.com 登录到该站点，但使用 www.example.com 访问 AJAX URL。只需更改域以使其匹配即可解决问题。

在我的经验中

```
$user = JFactory::getUser();
$id = $user->id; 
```

如果用户已登录，无论他们是否是管理员用户，都将始终返回一个积极的用户 ID，如果他们未登录，则返回 0。因此，如果您在认为自己已登录时得到 0，它必须是某种 cookie 问题，或者 Joomla 会话未正确启动，例如未通过 index.php 访问该站点。

# sql-server - 内部连接和分组依据

> ID：12324086
> 
> 赞同：4
> 
> 时间：2012-09-07T19:14:55.453
> 
> 标签：sql-server, group-by, inner-join

我有两个具有相同定义的表。

```
T1:
Name VARCHAR(50)
Qty  INT

T2:
Name VARCHAR(50)
Qty  INT 
```

这是每个表的数据：

```
T1:
Name   Qty
a   1
b   2
c   3
d   4

T2:
Name   Qty
a   1
b   3
e   5
f   10 
```

我希望得到可以根据名称对两个表中的数量求和的结果。

预期结果集：

```
Name    TotalQty
a             2
b             5
c             3
d             4
e             5
f            10 
```

如果我做左连接或右连接，它不会从任何一个表中返回我的名称。

我在想的是创建一个临时表并添加这些记录，然后在 Qty 列上进行 SUM 聚合，但我认为应该有更好的方法来做到这一点。

这就是我的查询不返回预期结果集的样子：

```
SELECT t1.Name, ISNULL(SUM(t1.Qty + t2.Qty),0) TotalQty
FROM t1
LEFT JOIN t2
ON t1.Name = T2.Name
GROUP BY t1.Name 
```

有人可以告诉我在这里创建临时表是否可以，或者有更好的方法吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-07T19:18:20.277

您可以使用完整的外部联接：

```
SELECT
    ISNULL(t1.Name, t2.Name) AS Name,
    ISNULL(t1.Qty, 0) + ISNULL(t2.Qty, 0) AS TotalQty
FROM t1
FULL JOIN t2 ON t1.Name = T2.Name 
```

在线查看它：[sqlfiddle](http://sqlfiddle.com/#!3/46c5b/2)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-07T19:16:46.663

您可以使用 a`UNION ALL`来选择两个表作为一个，因为它们具有相同的定义。从那里，您可以将它们嵌套为派生表，然后`SUM`在此之上：

```
SELECT [Name], SUM(Qty) AS TotalQty
FROM (
    SELECT [Name], Qty
    FROM t1
    UNION ALL
    SELECT [Name], Qty
    FROM t2
) YourDerivedTable
GROUP BY [Name] 
```

# c# - ListBox SelectValue 为 null 且 selectindex = -1

> ID：12324088
> 
> 赞同：0
> 
> 时间：2012-09-07T19:15:04.493
> 
> 标签：c#, webforms, wizard

列表框填充但找不到所选值。它是 null 或默认值（第一项）。每当我选择另一个项目时，它都会变为 null。我做了 !ispostback 但仍然没有。在 asp.net/c#/sql 中使用向导。任何帮助表示赞赏。

```
 protected void Page_Load(object sender, EventArgs e)
    {
        ListBox lstService = (ListBox)Wizard1.FindControl("lstService");
        string s = lstService.SelectedValue.ToString();
        int s1 = lstService.SelectedIndex;

        if (s == "MarketTrack Toys")
        {
            Wizard2.Visible = true;
        }

        if (!Page.IsPostBack)
        {
            BindGrid();
        }

        if ((Wizard1.ActiveStepIndex <= 5) && (Wizard1.ActiveStepIndex != 0))
        {
            Wizard1.DisplaySideBar = true;
            Wizard2.DisplaySideBar = false;
        }
        else
        {
            Wizard1.DisplaySideBar = false;
            Wizard2.DisplaySideBar = true;
        }

    }

    private void BindGrid()
    {

        dAS = new DataAccessClass();
        DataSet ds = new DataSet();
        DataTable dt = new DataTable();

        ds = dAS.func_FillDataset("select servicename from dbo.Services", "Services");
        ListBox lstService = (ListBox)Wizard1.FindControl("lstService");
        lstService.DataSource = ds;
        lstService.DataTextField = "ServiceName";
        lstService.DataValueField = "ServiceName";
        lstService.DataBind();

        if (lstService.Items.Count > 0)
        {
            lstService.SelectedIndex = 0;
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T20:47:21.663

在调试器中遍历它。

放置在 ListBox 中的任何对象都不知道将自己转换为您要查找的字符串`ToString()`

ListBox 正确填充，因为您指定了如何获取名称`lstService.DataTextField = "ServiceName";`

您可能需要重新处理您放入 ListBox 中的对象，或者只是覆盖该对象的 ToString。

# android - 相同尺寸的图像由 ImageView 大小不同

> ID：12324095
> 
> 赞同：0
> 
> 时间：2012-09-07T19:15:37.473
> 
> 标签：android, android-layout, android-imageview

我有一个包含图像视图的框架布局，当用户按下下一个按钮（想想幻灯片）时，它应该更新它显示的图像。因此，我想放入此图像视图中的所有图像都具有相同的尺寸。imageview 在活动开始时显示的初始图像位于 res/drawable-hdpi 目录中，而其他图像位于 assets 目录中。问题是我交换到 imageview 的图像看起来比第一个图像小，尽管所有这些图像的大小相同。

关于布局参数，我的框架布局的 layout_width 和 layout_height 设置为 wrap_content，imageview 也是如此，我尝试将 scaleType 参数设置为每个可能的值，但我仍然看到相同的结果。因此，除非存储在 res/drawable-hdpi 和资产中的图像以某种方式缩放，否则这种行为不应发生。

那么，当用户循环浏览这些图像时，保留图像视图尺寸的最佳方法是什么？

这是我的框架布局和我的图像视图的 XML

```
<FrameLayout
  android:id="@+id/coverLayout"
  android:layout_width="wrap_content"
  android:layout_height="wrap_content"
  android:layout_centerInParent="true" >

  <ImageView
    android:id="@+id/coverImageView"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:adjustViewBounds="false"
    android:scaleType="fitCenter"
    android:src="@drawable/coverImage" />
</FrameLayout> 
```

这是我将新图像加载到我的图像视图中的代码

```
_coverImageView = (ImageView) findViewById(R.id.coverImageView);
...
...
if (loadNewImage) {
        AssetManager assetMgr = getAssets();
        InputStream stream;
        try {
            stream = assetMgr.open("covers/" + _coverImageName);
            Drawable coverDrawable = Drawable.createFromStream(stream, _coverImageName);
            _coverImageView.setImageDrawable(coverDrawable);
        }
        catch (IOException ex) {                        
            System.out.println(ex);
        }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T19:22:48.527

> 因此，除非存储在 res/drawable-hdpi 和资产中的图像以某种方式缩放，否则这种行为不应发生。

这正是问题所在。Android 根据几个规则缩放位图，包括屏幕的密度（类别）以及位图来自哪个资源文件夹。请参阅此[相关问题/答案](https://stackoverflow.com/questions/8198291/bitmap-getwidth-returns-wrong-value/8198316#8198316)。如果您希望资产和资源具有相同的行为，则可以将初始封面图像放入`drawable-nodpi`而不是`drawable-hdpi`.

# python - 试图将 yield 理解为表达式

> ID：12324096
> 
> 赞同：5
> 
> 时间：2012-09-07T19:15:40.703
> 
> 标签：python, generator

我正在玩生成器和生成器表达式，但我不完全确定我理解它们是如何工作的（[一些参考资料](http://docs.python.org/reference/expressions.html#yield-expressions)）：

```
>>> a = (x for x in range(10))
>>> next(a)
0
>>> next(a)
1
>>> a.send(-1)
2
>>> next(a)
3 
```

所以看起来`generator.send`被忽略了。这是有道理的（我猜），因为没有明确`yield`的表达式来捕获发送的信息......

然而，

```
>>> a = ((yield x) for x in range(10))
>>> next(a)
0
>>> print next(a)
None
>>> print next(a)
1
>>> print next(a)
None
>>> a.send(-1)  #this send is ignored, Why? ... there's a yield to catch it...
2
>>> print next(a)
None
>>> print next(a)
3
>>> a.send(-1)  #this send isn't ignored
-1 
```

我知道这还很遥远，而且我（目前）想不出一个用例（所以不要问；）

我主要是在探索试图弄清楚这些不同的生成器方法是如何工作的（以及生成器表达式一般是如何工作的）。为什么我的第二个示例在产生合理值和 之间交替`None`？另外，谁能解释为什么我`generator.send`的一个被忽略而另一个没有？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T19:25:57.320

您有点困惑，因为您实际上是从两个来源生成的：生成器表达式`(... for x in range(10))`是一个生成器，但您使用`yield`. 你可以看到，如果`list(a)`你会得到`[0, None, 1, None, 2, None, 3, None, 4, None, 5, None, 6, None, 7, None, 8, None, 9, None]`。

您的代码等效于：

```
>>> def gen():
...     for x in range(10):
...         yield (yield x) 
```

只有内部产量（“产量 x”）在生成器中被“使用”——它被用作外部产量的值。所以这个生成器在范围的产生值和产生任何“发送”到这些产生的值之间来回迭代。如果你向内部 yield 发送一些东西，你会得到它，但如果你碰巧在偶数迭代中发送，发送将被发送到外部 yield 并被忽略。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-07T19:24:20.413

这里的困惑是生成器表达式正在执行隐藏`yield`。这是函数形式：

```
def foo():
    for x in range(10):
        yield (yield x) 
```

当您执行 a`.send()`时，会发生内部`yield x`执行，这会产生`x`. 然后表达式计算为 的值`.send`，并且下一个 yield 产生该值。这是更清晰的形式：

```
def foo():
    for x in range(10):
        sent_value = (yield x)
        yield sent_value 
```

因此输出是非常可预测的：

```
>>> a = foo()
#start it off
>>> a.next() 
0
#execution has now paused at "sent_value = ?"
#now we fill in the "?". whatever we send here will be immediately yielded.
>>> a.send("yieldnow") 
'yieldnow'
#execution is now paused at the 'yield sent_value' expression
#as this is not assigned to anything, whatever is sent now will be lost
>>> a.send("this is lost") 
1
#now we're back where we were at the 'yieldnow' point of the code
>>> a.send("yieldnow") 
'yieldnow'
#etc, the loop continues
>>> a.send("this is lost")
2
>>> a.send("yieldnow")
'yieldnow'
>>> a.send("this is lost")
3
>>> a.send("yieldnow")
'yieldnow' 
```

编辑：示例用法。到目前为止，我见过的最酷的功能是扭曲的`inlineCallbacks`功能。[请参阅此处](http://hackedbellini.org/development/writing-asynchronous-python-code-with-twisted-using-inlinecallbacks/)以获取解释它的文章。它的核心是它允许您生成要在线程中运行的函数，一旦函数完成，twisted 会将函数的结果发送回您的代码。因此，您可以以非常线性和直观的方式编写严重依赖线程的代码，而不必到处编写大量的小函数。

有关使用潜在用例的基本原理的更多信息，请参阅[PEP 342](http://www.python.org/dev/peps/pep-0342/)`.send`（我提供的扭曲示例是此更改提供的异步 I/O 的一个示例）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-07T19:24:41.693

该生成器转换为：

```
for i in xrange(10):
    x = (yield i)
    yield x 
```

第二次调用 send()/next() 的结果将被忽略，因为您对 yield 之一的结果什么也不做。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-07T19:38:17.937

您编写的生成器相当于更详细的：

```
def testing():
    for x in range(10):
            x = (yield x)
            yield x 
```

正如您在此处看到的，`yield`生成器表达式中隐含的 second 不会保存您传递的值，因此取决于生成器执行被阻止的位置，`send`可能会或可能不会起作用。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-09-07T19:33:16.520

确实 - 该`send`方法旨在与生成器对象一起使用，该生成器对象是您明确编写的协同程序的结果。在生成器表达式中很难理解它的含义——尽管它有效。

**-- 编辑 --** 我以前写过这个，但它是不正确的，因为生成器表达式中的 yield 在实现中是可预测的——尽管在任何 PEP 中都没有提到。

> 生成器表达式并不意味着具有`yield`关键字 - 我不知道在这种情况下甚至定义了行为。我们可以稍微思考一下，了解您的表情中正在发生的事情，以了解那些“无”的来源。但是，假设作为在 Python 中如何实现 yield 的副作用（并且可能它甚至依赖于实现），而不是应该如此。

生成器表达式的正确形式，以简化的方式是：

```
(<expr> for <variable> in <sequence> [if <expr>]) 
```

因此，对 -`<expr>` 中的每个值进行评估，`<sequence:`不仅`yield`不需要，因为您不应该使用它。

两者`yield`和`send`方法都旨在用于完整的协同程序，例如：

```
def doubler():
   value = 0
   while value < 100:
       value = 2 * (yield value) 
```

你可以像这样使用它：

```
>>> a = doubler()
>>> # Next have to be called once, so the code will run up to the first "yield"
... 
>>> a.next()
0
>>> a.send(10)
20
>>> a.send(20)
40
>>> a.send(23)
46
>>> a.send(51)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
StopIteration
>>> 
```

# django - 使用模型表单的验证将数据导入 django？

> ID：12324097
> 
> 赞同：1
> 
> 时间：2012-09-07T19:15:43.060
> 
> 标签：django

我有一个 django 应用程序，我需要将现有数据从文本文件导入到新数据库中。通常我会做这样的事情：

```
for i in lines():
    a = Mymodel()
    a.field1 = i[0]
    a.field2 = i[0]
    a.save() 
```

这工作正常，但不进行数据验证（字段的匹配数据类型除外）。

为了通过网络界面输入数据，我编写了一些`ModelForm`表单，它们为我完成了所有的数据验证（在`clean()`方法中）。我确实知道如何使用`request.POST`作为输入来填充和验证表单，但是是否也可以在 python shell 上做同样的事情？我可以以某种方式将我的原始数据输入字典并用这些数据填充表单吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T19:22:01.407

是的，

在forms.py中

```
class FormA(forms.ModelForm):
   class Meta:
      model = Mymodel
   def clean_field1(self):
      #logic here
      #return cleaned field1 
```

在views.py中

```
 def populate_dict(line):
     dict = {'field1': line[0], 'field2': line[2], ... }
     return dict

 def populate(request):
    for line in lines():
       initial = populate_dict(line)
       form = FormA(initial=initial)
       if form.is_valid():
         form.save() 
```

# kohana - 在ORM中按多次OR操作数搜索字段？

> ID：12324103
> 
> 赞同：0
> 
> 时间：2012-09-07T19:16:05.783
> 
> 标签：kohana, kohana-3, kohana-orm

我需要找到某个字段的值不同的记录，看起来`IN`，最好说`FIND ALL WHERE field=1 OR field=2... OR field=9` 这些 OR 可能很多。是否可以在 Kohana 上的 ORM 中使用此功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T19:20:00.493

```
ORM::factory('Model')->where('field1', '=', 'value')->or_where('field2', '=', 'value')... 
```

# labview - LabVIEW 与 mccdaq 的 WEB-TC

> ID：12324104
> 
> 赞同：0
> 
> 时间：2012-09-07T19:16:23.857
> 
> 标签：labview

我正在使用 LabVIEW 来编写一个通过 mccdaq(web tc) 接口的系统。我想知道如何（通过代码）通过按一下按钮来打开和关闭 LED。我可以使用 DoutBit VI 通过按一下按钮使 LED 闪烁，但不能一直亮着。我曾尝试使用 Dout 而不是 DoutBit，但有人告诉我我的端口已配置为警报。（事实并非如此）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T18:42:57.540

我能够自己解决这个问题。我需要在 LabVIEW 中配置通道并将输出端口发送到我的 Dout。然后我能够将数字信号发送到我的 LED 并使其保持点亮一段时间。我可以通过简单地为我想要启用/禁用的端口发送一个十六进制数字（二进制​​转换）来打开和关闭它。（例如，如果我想启用端口一和二，十六进制答案是 3（二进制中的“11”）。

# apache-flex - 弹性时间线任务

> ID：12324105
> 
> 赞同：0
> 
> 时间：2012-09-07T19:16:34.167
> 
> 标签：apache-flex, flash-builder, flex4.5

我已经投入到 Flex 中，需要一个时间表。我想要一个组件，其中在 y 轴上有卡车路线列表，在 x 轴上有时间列表。现在我只想要一个组件（卡车）放置在时间线上的正确行中，由路线编号指定，组件宽度将是动态的，从它离开仓库到它回来的时间跨度。最终，我希望能够将事件插入到时间线中，比如可能是“爆胎”事件，但那是在路上。

我希望对最好的方法有一些意见。（我的第一个想法是自定义一个底部带有 DateTimeAxis 的绘图图表，但我不确定这是否合理......）提前感谢您的意见和想法！

# macos - 在 Mac 上安装 mysql2 - 错误：安装 mysql2 时出错：错误：无法构建 gem 原生扩展

> ID：12324111
> 
> 赞同：1
> 
> 时间：2012-09-07T19:17:17.880
> 
> 标签：macos

我怎样才能绕过这个错误？

```
$ gem install mysql2  --platform=ruby -v '0.3.11'                                                                                 
Building native extensions.  This could take a while...
ERROR:  Error installing mysql2:
        ERROR: Failed to build gem native extension.

        /Users/durrantm/.rvm/rubies/ruby-1.9.3-p125/bin/ruby extconf.rb
checking for rb_thread_blocking_region()... yes
checking for rb_wait_for_single_fd()... yes
checking for mysql_query() in -lmysqlclient... no
checking for main() in -lm... yes
checking for mysql_query() in -lmysqlclient... no
checking for main() in -lz... yes
checking for mysql_query() in -lmysqlclient... no
checking for main() in -lsocket... no
checking for mysql_query() in -lmysqlclient... no
checking for main() in -lnsl... no
checking for mysql_query() in -lmysqlclient... no
checking for main() in -lmygcc... no
checking for mysql_query() in -lmysqlclient... no
*** extconf.rb failed ***
Could not create Makefile due to some reason, probably lack of
necessary libraries and/or headers.  Check the mkmf.log file for more
details.  You may need configuration options.

Provided configuration options:
        --with-opt-dir
        --with-opt-include
        --without-opt-include=${opt-dir}/include 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T19:18:14.727

使用`brew install mysql`固定这个。

# html - CSS 选择器 a:link:hover

> ID：12324117
> 
> 赞同：5
> 
> 时间：2012-09-07T19:17:51.383
> 
> 标签：html, css, css-selectors, pseudo-class

我正在尝试创建我的网站，这样你就可以通过每个 div 中元素的颜色来判断你在哪里。该网站只有一页，当您单击打开该部分时，我使用 jQuery 滑出网站的部分（而不是单独的 .html）。

为了向他们展示他们打开了哪个部分，我将每个部分中的所有链接都设置为与打开该部分的文本相同的颜色。但是，我还希望拥有`<a> </a>`不是链接的标签，以便为网站添加一点色彩并吸引观众了解关键信息。出于这个原因，我只想将链接效果应用于`<a> </a>`实际上是链接的标签......所以我试过这个：

```
#box1 a{
    color: #68cff2;
}

#box1 a:link:hover{
    color: #ffffff;
    background-color: #68cff2;
} 
```

这适用于背景颜色，因为它只会更改`<a> </a>`具有 href="..." 的背景颜色，但不会更改此类链接的字体颜色...有什么办法可以排序这个？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-07T19:36:26.240

`:link`伪类仅适用于*未访问*的链接，而不是*所有*链接。请记住，您也访问了要考虑的链接。您可能需要为访问的链接重复选择器，因为我注意到您还没有这样做：

```
#box1 a:link:hover, #box1 a:visited:hover {
    color: #ffffff;
    background-color: #68cff2;
} 
```

（或者只是使用`#box1 a[href]:hover`，[更多信息](https://stackoverflow.com/questions/10587245/is-there-a-reason-to-use-a-instead-of-alink-or-avisited-in-my-stylesheet/10589840#10589840)）

不过，我应该补充一点，您不应该使用`<a>`标签来标记不是链接也不能用作锚点的东西，只是为了“为网站添加一点色彩并吸引观众关注关键位的信息”。这不是他们的设计目的。更语义化的替代方案是`<em>`or `<strong>`，当然如果你不想要它，你必须删除斜体或粗体样式：

```
#box1 a, #box1 em {
    font-style: normal;
    color: #68cff2;
}

#box1 a:hover{
    color: #ffffff;
    background-color: #68cff2;
} 
```

然后你不需要指定`:link`和`:visited`伪类，因为你基本上可以保证所有剩余的`<a>`元素都是链接。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-07T19:40:17.920

有需要`a:link:hover{}`吗？尝试使用 `a:hover {}`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-07-09T12:20:12.810

`a:hover`也会影响锚标签，如果它们的行为方式与链接相同，最终用户可能会感到困惑。

# python - Python - 如何使用 lxml.objectify 多次附加相同的 XML 元素

> ID：12324128
> 
> 赞同：0
> 
> 时间：2012-09-07T19:18:46.570
> 
> 标签：python, lxml

我尝试使用 lxml.objectify[包重新创建以下 XML](http://lxml.de/objectify.html)

```
<file>
  <customers>
    <customer>
        <phone>
            <type>home</type>
            <number>555-555-5555</number>
        </phone>
        <phone>
            <type>cell</type>
            <number>999-999-9999</number>
        </phone>
        <phone>
            <type>home</type>
            <number>111-111-1111</number>
        </phone>
    </customer>
   </customers>
</file> 
```

我不知道如何多次创建电话元素。基本上，我有以下非工作代码：

```
 # create phone element 1
    root.customers.customer.phone = ""
    root.customers.customer.phone.type = data_dict['PRIMARY PHONE1']
    root.customers.customer.phone.number = data_dict['PRIMARY PHONE TYPE 1']

    # create phone element 2
    root.customers.customer.phone = ""
    root.customers.customer.phone.type = data_dict['PRIMARY PHONE2']
    root.customers.customer.phone.number = data_dict['PRIMARY PHONE TYPE 2']

    # create phone element 3
    root.customers.customer.phone = ""
    root.customers.customer.phone.type = data_dict['PRIMARY PHONE3']
    root.customers.customer.phone.number = data_dict['PRIMARY PHONE TYPE 3'] 
```

当然，这只会在生成的 XML 中输出一段电话信息​​。有没有人有任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T20:15:46.807

您应该创建`objectify.Element`对象，并将它们添加为`root.customers`.

例如，插入两个电话号码可以这样完成：

```
phone = objectify.Element('phone')
phone.type = data_dict['PRIMARY PHONE1']
phone.number = data_dict['PRIMARY PHONE TYPE 1']
root.customers.customer.append(phone)

phone = objectify.Element('phone')
phone.type = data_dict['PRIMARY PHONE2']
phone.number = data_dict['PRIMARY PHONE TYPE 2']
root.customers.customer.append(phone) 
```

如果在将 xml 转换回字符串时在这些元素上获得了不必要的属性，请使用`objectify.deannotate(root, xsi_nil=True, cleanup_namespaces=True)`. 有关. [_](http://lxml.de/objectify.html) _`objectify.deannotate`

（如果您使用的是旧版本的 lxml，它不包含`cleanup_namespaces`关键字参数，请改为执行以下操作：

```
from lxml import etree
# ...
objectify.deannotate(root, xsi_nil=True)
etree.cleanup_namespaces(root) 
```

)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T20:21:42.437

[下面是一些使用objectify E-Factory](http://lxml.de/objectify.html#tree-generation-with-the-e-factory)构造 XML 的示例代码：

```
from lxml import etree
from lxml import objectify

E = objectify.E

fileElem = E.file(
    E.customers(
        E.customer(
            E.phone(
                E.type('home'),
                E.number('555-555-5555')
            ),
            E.phone(
                E.type('cell'),
                E.number('999-999-9999')
            ),
            E.phone(
                E.type('home'),
                E.number('111-111-1111')
            )
        )
    )
)

print(etree.tostring(fileElem, pretty_print=True)) 
```

我在这里对其进行了硬编码，但您可以将其转换为数据循环。这对您的目的有用吗？

# ruby-on-rails - 无法通过 = 更新属性并保存

> ID：12324131
> 
> 赞同：0
> 
> 时间：2012-09-07T19:19:06.147
> 
> 标签：ruby-on-rails

以下是困扰我的问题：

我有一个模型 Word，它有一个属性 article_count

但是，如果我使用：

```
w = Word.first    
w.article_count = 1
w.save 
```

第一个词的article_count不会改变，日志显示：

```
Word Exists (0.4ms) ... 
```

但我可以使用

```
w.update_attributes :article_count => 1 
```

也许我误解了保存的功能，谁能给我解释一下？

=======================更新=======================

这是我的文章模型：

```
class Article < ActiveRecord::Base   
  attr_accessible :content, :title, :source, :url

  has_many :article_wordships, :dependent => :destroy
  has_many :words, :through => :article_wordships
  has_many :paragraphs, :dependent => :destroy

  alias_attribute :word_count, :article_wordships_count

  validates_uniqueness_of :title
end 
```

这是我的代码：

```
Article.select(:title).all.each do |a|
  a.title = a.title.gsub(/\A.+?;\s(.+)/, '\1')
  a.save
end 
```

运行代码后，文章没有任何变化。

这是控制台信息：

```
 1.9.3p194 :003 > a.save
   (0.2ms)  BEGIN
  Article Exists (0.6ms)  SELECT 1 AS one FROM `articles` WHERE (`articles`.`title` = BINARY 'A Shared State of Defeat' AND `articles`.`id` != 178) LIMIT 1
   (0.9ms)  UPDATE `articles` SET `title` = 'A Shared State of Defeat', `updated_at` = '2012-09-08 02:58:33' WHERE `articles`.`id` = 178
   (2.2ms)  COMMIT
 => true 
```

既省又省！返回真。

奇怪的是，有时它工作，有时它不工作！

我要生气了...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T19:26:48.053

我不确定您的意思是“有时它有效，有时它不起作用！” 它似乎在您给出的示例中有效。如果不工作是指它并不总是发布更新，则可能是该行不会更改标题。ActiveRecord 进行脏检查，如果 title 的值没有改变，它不会发出更新。

```
a.title = a.title.gsub(/\A.+?;\s(.+)/, '\1') 
```

# javascript - drawImage() 不工作 - Firebug 显示：NS_ERROR_XPC_BAD_CONVERT_JS

> ID：12324134
> 
> 赞同：1
> 
> 时间：2012-09-07T19:19:16.697
> 
> 标签：javascript, canvas, drawimage

为什么这个小脚本不起作用？

```
<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
</head>
<body>

<canvas id="can" height="500" width="500"></canvas>

<script type="text/javascript">

    var image = new Image().src="1.jpg";

    context = document.getElementById("can").getContext("2d");

    context.drawImage(image,10,10,480,480);

</script>

</body>
</html> 
```

Firefox（最新版本）中的 Firebug 显示：

```
NS_ERROR_XPC_BAD_CONVERT_JS: Could not convert JavaScript argument arg 0 [nsIDOMCanvasRenderingContext2D.drawImage]
[Bei diesem Fehler anhalten]    

context.drawImage(image,10,10,480,480); 
```

Chrome 也无法显示图像，他们只是说`ERROR`。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-07T19:25:31.063

image.src 是异步的，你需要用回调来绘制它。

```
var image = new Image;
image.onload = function() { context.drawImage(image, 10, 10, 400, 400); }
image.src = ..... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-27T07:47:06.967

你需要做的就是改变：

```
 ctx.drawImage(i, 0, 0, arg.width, arg.height); 
```

到：

```
 ctx.drawImage(arg.img, 0, 0, arg.width, arg.height); 
```

# c++ - gdb：重置变量时中断

> ID：12324135
> 
> 赞同：1
> 
> 时间：2012-09-07T19:19:19.160
> 
> 标签：c++, debugging, gdb, breakpoints

我正在尝试调试一个似乎在指针传递方面存在问题的程序。我有一个定义如下的类：

```
class data{
public:
    data(int x, int y){
        a=x;
        b=y;
        md = new metadata();
    }
    ~data(){
        delete md;
    }

    int a;
    int b;

    metadata* md; //metadata is another class
}; 
```

以及几个带有指向数据对象的指针的函数：

```
void function1(data* d){
    //do stuff
}

void function2(data* d){
    //do stuff
    function1(d);
}

void function3(data* d){
    //do stuff
    function2(d);
}

int main(){
    //stuff
    data* data = new data(1,2);
    function3(d);
    //other stuff
} 
```

我设置了一个断点`function1`，一个在`function3`. 在这两个断点之间的某个位置，`md`被重新分配以指向不同的元数据对象（`d`尽管，仍然指向相同的内存地址）。两个断点之间执行了数千行，因此单步执行是不可行的，所以我想在`md`指针更改时观察并中断。但是，`watch d->md`对于断点`function1`不起作用，因为我收到一条消息说

```
Watchpoint 1 deleted because the program has left the block in which its expression is valid 
```

这可能是因为 in`d`是函数上下文的局部变量。有没有办法查看存储`md`指针的内存地址以查看它何时更改（即何时`md`重新分配）并在那里中断？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T19:26:31.893

获取`d->md`使用的地址`print d->md`并观察表达式`*((metadata *)0x....)`而不是使用名称`d`。

# pdfbox - PDFBox UTF16 字母

> ID：12324142
> 
> 赞同：3
> 
> 时间：2012-09-07T19:19:48.247
> 
> 标签：pdfbox, letters

有没有人可以帮助我解决 PDFBox 中的字母问题我正在尝试打印字母“ń”（波兰字母）并且我得到了类似**þÿ J 的东西。Dı BROW 2S0 :K0 3I**。

请帮忙！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T18:53:31.480

我在保加利亚语中遇到了同样的问题。简而言之，我认为没有一个简单的解决方案。基本上你需要一个 utf 字体。如果您使用标准的 14 种 type1 字体之一（如 Helvetica 或 Courier）——它们只支持基本的拉丁字母，所以它们无法完成这项工作。您可以加载一个 truetype utf 字体，但 pdfbox 对所有 truetype（以及 type1）字体都有硬编码的 WinAsciiEncoding，这是错误的。据我所知，您可以做 Open office 所做的事情 - 创建字体的子集，这样您就不会将整个字体文件嵌入 pdf 中。不幸的是，pdfbox 中缺少此功能，但有一个 Jira 和更多信息： [https](https://issues.apache.org/jira/browse/PDFBOX-922) ://issues.apache.org/jira/browse/PDFBOX-922 如果您找到一个好的解决方案，请分享！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-09-05T11:29:22.587

您可以将其更改为 unicode 字符到 LegacyPDFStream Engine java 类

# ios - removeObjectsAtIndexes 导致崩溃

> ID：12324143
> 
> 赞同：1
> 
> 时间：2012-09-07T19:19:50.150
> 
> 标签：ios, nsmutablearray, nsarray, nsindexset

无法弄清楚是什么导致了这里的崩溃。我枚举 a`NSMutableArray`并将某些对象的索引放入可变索引集中，然后尝试从数组中删除相应的对象。这是我的代码

```
 NSMutableIndexSet *itemsToRemove;

UIBarButtonItem *item;
NSUInteger index;

for (item in self.rightView.toolbarItems)
{
    if (item.tag == MLPAD_RIGHT_VC_BACK_TO_CENTRAL_ITEM_TAG){
        [itemsToRemove addIndex:index];
        index ++;
    }
}

[self.rightView.toolbarItems removeObjectsAtIndexes:itemsToRemove]; 
```

最后一行崩溃了，给了我一个`EX_BAD_ACCESS`.

任何想法为什么？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T19:22:32.553

您没有分配/初始化`itemsToRemove`- 如果您使用的是 ARC，它会被初始化 `nil`为

你也没有初始化`index`为零......

（为什么我怀疑您来自托管语言？...）

与崩溃无关，但它仍然是语义错误：`index`即使不满足条件，您也必须递增：

```
for (item in self.rightView.toolbarItems)
{
    if (item.tag == MLPAD_RIGHT_VC_BACK_TO_CENTRAL_ITEM_TAG) {
        [itemsToRemove addIndex:index];
    }
    index ++;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T19:24:38.413

您的主要问题是`itemsToRemove`永远不会被初始化。您不能将对象添加到实际上不是 NSMutableIndexSet 的 NSMutableIndexSet - 尝试设置`itemsToRemove = [[NSMutableIndexSet alloc] init]`或类似。

我还认为您的声明`index++`可能会丢掉一些东西-如果您仅在找到要删除的项目时增加索引，则实际上是在删除第一个`itemsToRemove.count`项目，而不是要删除的实际项目的。考虑无条件地增加索引。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T19:32:06.763

你有几个问题。不分配`itemsToRemove`，不初始化`index`（内置堆栈变量不会自动初始化）并且不会`index`在每次循环迭代时递增。

```
NSMutableIndexSet *itemsToRemove = [NSMutableIndexSet new];
NSUInteger index = 0;

for (UIBarButtonItem *item in self.rightView.toolbarItems)
{
    if (item.tag == MLPAD_RIGHT_VC_BACK_TO_CENTRAL_ITEM_TAG){
       [itemsToRemove addIndex:index];
    }
    ++index;
}

[self.rightView.toolbarItems removeObjectsAtIndexes:itemsToRemove]; 
```

错误的`index`类型可以通过使用块枚举方法来最小化，该方法传入当前索引。

# ruby-on-rails - 红宝石机械化

> ID：12324144
> 
> 赞同：0
> 
> 时间：2012-09-07T19:19:55.893
> 
> 标签：ruby-on-rails, ruby, screen-scraping, render, mechanize

是否可以使用控制器的渲染方法来渲染 Mechanize 对象的内容？我试过：

```
def new
  a = Mechanize.new
  a.get('http://flickr.com/')

  render :html => a.current_page
end 
```

这会引发错误，以及`render :text => a`,`a.page`和`a.current_page`.

我知道该`render`函数不希望有一个 Mechanize 对象，我只是不知道它想要什么以及如何到达那里。

我正处于开发和研究所有 Ruby 网络抓取框架的开始阶段，如果有任何帮助，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T19:49:49.357

试试`body`方法：

```
page = agent.get('http://www.example.net')
puts page.body[0..100]
=> "<!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Transitional//EN\" \"http://www.w3.org/TR/xhtml1/DTD/xhtml" 
```

您还可以使用 Nokogiri 的功能更深入地研究文档。Mechanize 是围绕[Nokogiri 构建](http://nokogiri.org/)的，因此您可以访问 Nokogiri 创建的已解析文档，然后使用 CSS 或 XPath 访问器来定位文档的子部分。一旦你找到了你想要的，你可以使用这个`to_html`方法让 Nokogiri 为节点或节点集发出 HTML。有关信息，请参阅“[使用 ruby​​/mechanize（和 nokogiri）从 html 中提取单个字符串](https://stackoverflow.com/a/2114744/128421)”。

现在，虽然这可行，但您可能需要考虑直接在页面上重复使用内容是否违反了服务条款或版权。

# android - BroadcastReceiver SharedPreferences 只是不可靠

> ID：12324148
> 
> 赞同：1
> 
> 时间：2012-09-07T19:20:01.563
> 
> 标签：android, broadcastreceiver, android-service

我有一个 Android 广播接收器（如果重要，则使用 E​​clipse），它由一个服务启动，该服务假设检查在线数据版本是否已更新。如果是这样，我想在通知栏中触发通知。

一切似乎都正常，但是，它从 SharedPreferences 获得的结果并不可靠。假设广播接收器获取存储在 SharedPreferences 中的当前值，并将其与从 Web url 获取的值进行比较。如果它比较该值并看到已进行更新（即 url 中的值大于存储的值），它会触发通知并更新存储在 SharedPreferences 中的值。广播接收器每天检查一次此更新，这只是为了通知用户，仅此而已。

我用来执行此操作的代码似乎有效。但是在这里和那里，它从 SharedPreferences 中提取一个默认值并触发更新通知，即使没有任何改变。

我意识到我可能试图在广播接收器的 onReceive 中做太多事情，但是我对如何触发一个活动来完成广播接收器的工作感到非常困惑。

有没有人有任何实现这一点的最佳方法的代码示例？我进行了搜索和搜索，但无论哪种方式，我似乎都找不到明确的步骤。这是我所拥有的：

```
public class AlarmReceiver extends BroadcastReceiver {

    public static JSONArray myJArray2;
    public static InputStream is = null;
    public static final String URL_DatabaseVersion = "http://www.mysite.com/mobile/version.php";
    public static NotificationManager nm;
    public static Boolean updated = false;
    public static int latestVersion = 0;
    public static int internalVersion = 2;

    public static final String PREFS_NAME = "MyPrefsFile";

    @Override
    public void onReceive(Context context, Intent intent) {

        updated = false;
        SharedPreferences settings = context.getSharedPreferences(PREFS_NAME, 0);
        internalVersion = settings.getInt("dataversion", 1); 

        InputStream is = null;
        String result = "";
        ArrayList<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();
        nameValuePairs.add(new BasicNameValuePair("",""));

        try{
            HttpClient httpclient = new DefaultHttpClient();
            HttpPost httppost = new HttpPost(URL_DatabaseVersion);
            httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs)); 
            HttpResponse response = httpclient.execute(httppost);
            HttpEntity entity = response.getEntity();
            is = entity.getContent();
        }catch(Exception e){
        }

        try{
            BufferedReader reader = new BufferedReader(new InputStreamReader(is,"iso-8859-1"),8);
            StringBuilder sb = new StringBuilder();
            String line = null;
            while ((line = reader.readLine()) != null) 
            {
                sb.append(line + "\n");
            }
            is.close();
            result=sb.toString();
        }catch(Exception e){
        }

        try{
            JSONArray myJArray = new JSONArray(result);
            myJArray2 = myJArray;
        }catch(JSONException e){
        }     

        int mode = Activity.MODE_PRIVATE;
        SharedPreferences mySharedPreferences = context.getSharedPreferences("MyPrefsFile",mode);           
        SharedPreferences.Editor editor = mySharedPreferences.edit();
        editor.putInt ("dataversion", latestVersion);
        editor.commit();

        if (!Arrays.asList(myJArray2).contains(null))   
        {
            try{
                for(int i=0;i<myJArray2.length();i++)
                {
                    JSONObject json_data = myJArray2.getJSONObject(i);
                    latestVersion = json_data.getInt("title");

                    if (internalVersion < latestVersion)
                    {
                        updated = true;
                    } 
                    else
                    {
                        updated = false;
                    }
                }
            }
            catch(Exception e)
            {}
            finally
            {}
        }
        else
        {
            updated = false;
        }

        if (updated)
        {
            nm = (NotificationManager) context.getSystemService(Context.NOTIFICATION_SERVICE);
            CharSequence from = "Database Updated";
            CharSequence message = "I: " + internalVersion + " L: " + latestVersion + "Click to open.";
            PendingIntent contentIntent = PendingIntent.getActivity(context, 0, new Intent(), 0);
            Notification notif = new Notification(R.drawable.icon, "Database Updated", System.currentTimeMillis());
            notif.setLatestEventInfo(context, from, message, contentIntent);
            nm.notify(1, notif);
        }
    }
} 
```

是的，我可能试图在 BroadcastReceiver 中做太多事情，这可能会导致问题，但是我无法弄清楚如何以其他方式做到这一点。当我记录这段代码的结果时，第一次通过它就很好。第二次通过 internalVersion 出现 0。它从 URL 获得的值总是正确的，它是 internalVersion，它从 SharedPreferences 中提取的那个是错误的很多次。

有什么想法吗？抱歉这么久。谢谢。

科里

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T21:57:23.377

`SharedPreference.Editor.commit()`是阻塞调用。这需要时间，并可能导致 ANR。

在 API 9 及更高版本上使用`apply()`并在之前将其线程化，同时在较旧的 API 版本上本地存储预期值，将此代码移动到服务，并记录您的异常，以便您可以针对此类竞争条件进行适当的调试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T07:44:29.573

尝试使用：

```
 int mode = Context.MODE_PRIVATE; 
```

代替

```
 int mode = Activity.MODE_PRIVATE; 
```

它将开始在**SharedPreferences**中保存值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T22:18:51.273

只有当您意识到某些事情发生了变化时，您才应该编写/提交您的更改——即在“if (updated)”分支中。而且您不应该使用静态成员，而是提交您从服务器读取的值。

假设您的接收器已重新启动（在**新**进程中）。在这种情况下，静态值从它们的初始值开始，所以最新版本是“0”。你提交这个值。

下一次运行你会读到“0”。现在 internalversion 低于服务器版本 - 即使没有发生任何变化。

# android - 如何使用 AndroidBillingLibrary 禁用广告？

> ID：12324151
> 
> 赞同：0
> 
> 时间：2012-09-07T19:20:26.557
> 
> 标签：android, in-app-purchase, admob

我正在使用[AndroidBillingLibrary](https://github.com/robotmedia/AndroidBillingLibrary)来实现应用内计费。购买项目应禁用所有活动中的广告。但是当我测试我的应用程序时（第一个项目是“android.test.purchase”，然后是真正的项目）发生以下情况：购买广告被禁用后，但重新启动应用程序后广告再次出现。

项目发布在开发者控制台中，当我使用测试帐户 Google Play 购买项目时说一切正常。

购买按钮位于我的应用程序的设置中。以下是部分代码：

```
public class PreferencesActivity extends SherlockPreferenceActivity { 
    public final static String PUBLIC_KEY = "my public key";
    public final static String ANDROID_ADS_ITEM = "ads.buy"; 
    private AbstractBillingObserver billingObserver;

    ...

    @Override protected void onDestroy(){   
        BillingController.unregisterObserver(billingObserver);  
        super.onDestroy(); 
    }

    private void adsDisable(){  
        final Preference adsDisable = (Preference) findPreference("disableAds");
        billingObserver = new AbstractBillingObserver(this){    
            public void onRequestPurchaseResponse(String itemId, ResponseCode response){ 
            }

            public void onPurchaseStateChanged(String itemId, PurchaseState state){
            }

            public void onBillingChecked(boolean supported){
                if(!supported)
                    adsDisable.setEnabled(false);
                else if(!billingObserver.isTransactionsRestored())
                    BillingController.restoreTransactions(PreferencesActivity.this); 
            }

            public void onSubscriptionChecked(boolean supported) {
                // TODO Auto-generated method stub
            }       
        };

        BillingController.setConfiguration(new IConfiguration(){

            public String getPublicKey(){
                return PUBLIC_KEY;          
            }

            public byte[] getObfuscationSalt(){
                return new byte[]{ 41, -90, -116, -41, 66, -53, 122, -110, -127, -96, -88, 77, 127, 115, 1, 73, 57, 110, 48, -116 }; 
            }

        }); 

        BillingController.registerObserver(billingObserver);        
        BillingController.checkBillingSupported(this);

        adsDisable.setOnPreferenceClickListener(new OnPreferenceClickListener(){ 
            public boolean onPreferenceClick(Preference preference){
                BillingController.requestPurchase(PreferencesActivity.this, ANDROID_ADS_ITEM, true, null);
                return false;
            }
        });

        boolean purchased = BillingController.isPurchased(this, ANDROID_ADS_ITEM);
        if(purchased){ 
            adsDisable.setTitle(R.string.disableAdsYes_prefs);          adsDisable.setEnabled(false);
        }
    } 
```

这就是我尝试禁用广告的方式：

```
public class FirstActivity extends SherlockActivity {
    public final static String ANDROID_ADS_ITEM = "ads.buy";
    private AdView adView;
    LinearLayout layout;

    @Override
    public void onCreate(Bundle savedInstanceState) {
       ...
        String adId = "my ad id";

        boolean purchased = BillingController.isPurchased(this, ANDROID_ADS_ITEM);
        if(purchased){
             layout = (LinearLayout) findViewById(R.id.ads);
            layout.removeView(layout);
        } else {
        adView = new AdView(this, AdSize.BANNER, adId);
        layout = (LinearLayout) findViewById(R.id.ads);
        layout.addView(adView);
        AdRequest adRequest = new AdRequest();
        adView.loadAd(adRequest);
       }
    }
  ....
} 
```

请帮忙。对不起我的英语。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T07:09:56.340

最有可能的问题是您在偏好活动中初始化库配置（公钥和盐）。这意味着在您打开首选项之前，不会正确配置库。引用自述文件：

> 此外，BillingController 需要一个 BillingController.IConfiguration 实例，从中获取验证签名消息所需的公钥和用于混淆交易的盐。提供配置的好地方是在 Application 子类中。

在这种情况下，当您`isPurcharsed`在*FirstActivity*中调用时，计费控制器没有用于对数据库进行模糊处理的盐。

查看[DungeonsRedux](https://github.com/robotmedia/AndroidBillingLibrary/tree/master/DungeonsRedux)以获取在 Application 子类中设置配置的示例。

# ember.js - 在多个文件之间拆分 Ember 状态图时出现转换错误

> ID：12324152
> 
> 赞同：0
> 
> 时间：2012-09-07T19:20:33.930
> 
> 标签：ember.js, statechart

我正在尝试找出如何最好地将 Ember.js 状态图拆分为多个文件。

使用 SproutCore，我们需要使用 SC.State.plugin('statename') 将我们在另一个文件中定义的状态与我们的主状态图相关联。

我在 Ember 中没有看到这样的功能，所以我只是简单地向我的 statemanager 的状态哈希添加了一个新状态。（另见我的[jsFiddle](http://jsfiddle.net/a6wHt/1/)）

```
App.statemanager = Ember.StateManager.create({
   stateOne: Ember.State.create(....)
})

// new file:
App.statemanager.states.stateTwo = Ember.State.create(....) 
```

起初这似乎可行——我能够转换到我定义的新状态。然而，我发现我无法使用一个动作从这个状态转换*出来*：

```
App.statemanager.states.stateTwo = Ember.State.create({
   doSomething: (manager) {
      manager.transitionTo("stateOne");
   }
)}

App.statemanager.send("doSomething");   // throws error when trying to transition 
```

我在本地得到的错误是

```
Uncaught Error: assertion failed: You need to provide an object and key to `get`. 
  Ember.StateManager.Ember.State.extend.findStatesByRoute 
```

我在[jsFiddle](http://jsfiddle.net/a6wHt/1/)中遇到的错误是

```
Uncaught TypeError: Cannot read property 'length' of undefined
  Ember.StateManager.Ember.State.extend.contextFreeTransition
  Ember.StateManager.Ember.State.extend.transitionTo 
```

有谁知道为什么会发生这种情况，以及分解状态图的正确方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T01:56:40.657

与其尝试编辑或添加到已创建的状态管理器，不如构建单独的状态，然后在构建状态图时将它们全部组合起来。

例如：http: [//jsfiddle.net/a6wHt/5/](http://jsfiddle.net/a6wHt/5/)

```
App.Statemanager = Ember.StateManager.extend({
    initialState: 'stateOne',

    stateOne: App.StateOne,
    stateTwo: App.StateTwo,
    stateThree: App.StateThree,
    stateFour: App.StateFour
}); 
```

此外，我使用扩展来构建“类”，然后在最后用创建实例化。我认为养成这样做的习惯是个好主意，即使您将状态图视为单身人士。它使您的代码在以后更容易测试。

# c# - 如何为实现不同属性的子类提供验证？

> ID：12324154
> 
> 赞同：0
> 
> 时间：2012-09-07T19:20:36.370
> 
> 标签：c#, validation, inotifypropertychanged, idataerrorinfo

我有一个实现 INotifyPropertyChanged 的​​父类，并且父类有多个子类。子项具有不同的属性，它们都调用 PropertyChanged。我想添加验证，但我真的不想为每个子类编写验证。验证规则是从数据库中提供的，所以我最终必须为每个孩子提取验证规则，然后根据规则检查值。如果我这样做，我认为它会有太多冗余代码，我希望将它放在父级别，因为 PropertyChanged 触发值本身的字符串值。

是否可以在父类上使用验证方法，这样我就不必为每个子类编写验证方法？请注意，每个子类中的属性都不同。

以下是我目前拥有的，在子类中进行了验证。

```
public Parent : INotifyChanged {
    /// <summary>
    /// Occurs when a property is changed
    /// </summary>
    public event PropertyChangedEventHandler PropertyChanged;

    /// <summary>
    /// Raises the <see cref="PropertyChanged"/> for a given 
    /// property.
    /// </summary>
    /// <param name="propertyName"></param>
    protected void OnPropertyChanged(String propertyName) {
        // Get the hanlder
        PropertyChangedEventHandler handler = this.PropertyChanged;

        // Check that the event handler is not null
        if(null != handler) {
            // Fire the event
            handler(this, new PropertyChangedEventArgs(propertyName));
        }
    }
} 
```

儿童1类：

```
public Child1 : Parent, IDataErrorInfo {
private Dictionary<string, string> m_validationErrors = new Dictionary<string, string>();

    private void Validate() {
        this.RemoveError("Child1Description");
        if(!Regex.IsMatch(Child1Description, "^([a-zA-Z '-]+)$") && !String.IsNullOrWhiteSpace(Description)) {
            this.AddError("Child1Description", "Only non-numerics allowed.");
        }
    }

    private void AddError(string columnName, string msg) {
        if(!m_validationErrors.ContainsKey(columnName)) {
            m_validationErrors.Add(columnName, msg);
        }
    }

    private void RemoveError(string columnName) {
        if(m_validationErrors.ContainsKey(columnName)) {
            m_validationErrors.Remove(columnName);
        }
    }

    public string Error {
        get {
            if(m_validationErrors.Count > 0) {
                return "Field data is invalid.";
            }
            else return null;
        }
    }

    public string this[string columnName] {
        get {
            if(m_validationErrors.ContainsKey(columnName)) {
                return m_validationErrors[columnName];
            }
            else {
                return null;
            }
        }
    }
    /// <summary>
    /// Description of the air entity
    /// </summary>
    public string Child1Description {
        get {
            return Child1description;
        }
        set {
            description = value;
            Validate();
            OnPropertyChanged("Child1Description");
        }
    }
} 
```

Child2 类：

```
public Child2 : Parent, IDataErrorInfo {
private Dictionary<string, string> m_validationErrors = new Dictionary<string, string>();

    private void Validate() {
        this.RemoveError("Child2Description");
        if(!Regex.IsMatch(Child2Description, "^([a-zA-Z '-]+)$") && !String.IsNullOrWhiteSpace(Description)) {
            this.AddError("Child2Description", "Only non-numerics allowed.");
        }
    }

    private void AddError(string columnName, string msg) {
        if(!m_validationErrors.ContainsKey(columnName)) {
            m_validationErrors.Add(columnName, msg);
        }
    }

    private void RemoveError(string columnName) {
        if(m_validationErrors.ContainsKey(columnName)) {
            m_validationErrors.Remove(columnName);
        }
    }

    public string Error {
        get {
            if(m_validationErrors.Count > 0) {
                return "Field data is invalid.";
            }
            else return null;
        }
    }

    public string this[string columnName] {
        get {
            if(m_validationErrors.ContainsKey(columnName)) {
                return m_validationErrors[columnName];
            }
            else {
                return null;
            }
        }
    }
    /// <summary>
    /// Description of the air entity
    /// </summary>
    public string Child2Description {
        get {
            return Child2description;
        }
        set {
            description = value;
            Validate();
            OnPropertyChanged("Child2Description");
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T20:18:57.217

我不相信你能做你想做的事。

在微不足道的情况下，您也许可以使其工作。一旦您进入更复杂的类型，我不知道您是否通过在父项而不是子项中进行验证来为自己节省很多精力。

最简单的情况是多个孩子具有相似类型的属性。您可以强制以相同的方式调用属性，然后您可以在父级中编写一个根据属性名称触发的验证规则。但是，您可以争辩说这些属性应该是父级的一部分并由子级继承。

更复杂的情况是每个孩子的个人属性与其他孩子的属性几乎没有相似之处。无论您将验证码放在孩子还是父母身上都没有区别。您必须为要验证的每个单独的属性编写验证代码。

鉴于您的验证规则将存储在数据库中，您可以在父级中编写一个方法，允许子级检索其属性的验证规则。孩子仍然会验证自己的属性，但您将拥有访问规则的通用代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T19:22:15.690

实际上它是可以做到的，只是不是你认为你希望它发生的方式。以下将是我将遵循的步骤来做类似的事情。

1.  获取 Microsoft 初学者企业库，因为您将使用该`Microsoft.Practices.EnterpriseLibrary.Validation`参考。
2.  创建一个继承自的验证类`Validator<T>`（这是企业库的一部分）。
3.  覆盖该方法`DoValidate(T objectToValidate, object currentTarget, string key, ValidationResults validationResults)`，currentTarget 是正在验证的对象。您可以从当前目标中提取验证规则。
4.  然后，您为该验证创建属性，使其继承自`ValueValidatorAttribute`.
5.  您覆盖`DoCreateValidator(Type targetType, Type ownerType, MemberValueAccessBuilder memberValueAccessBuilder, ValidatorFactory validatorFactory)`属性类中的方法。

完成前 5 个步骤后，这意味着您可以为要验证的属性赋予属性，并让验证器从类中选择要使用的验证规则（规则列表或字典或要对属性执行的规则完全由您选择）。

下一步是将接口移动`IDataErrorinfo`到父类，创建一个`Validate()`从调用中获取结果的方法，如果`Microsoft.Practices.EnterpriseLibrary.Validation.Validation.Validate(this);`发生错误，则返回验证错误。

由您决定如何放置方法调用。测试时最简单的方法是将其放在`OnPropertyChanged`您拥有的方法中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T14:38:20.513

我最终传递了属性名称、属性值和我想用来验证的规则列表。将 Validate 方法存储在父级中，因此无论哪个子级使用它都会运行，它将使用自己的规则，但保持相同的验证错误消息字典。

```
 protected void Validate(string propertyName, string propertyValue, List<ValidRule> validRules) {
      string temp = propertyValue.ToString();
      this.RemoveError(propertyName);
      if(propertyName.Equals("Description")) {
           foreach(ValidRule validRule in validRules) {
                if(!Regex.IsMatch(propertyValue, validRule.Rule) && !String.IsNullOrWhiteSpace(propertyValue)) {
                     this.AddError(propertyName, validRule.ErrorMessage);
                     break;
                }
           }
      }
 } 
```

# stream - BouncyCastle PGP 加密/解密：原因：java.io.EOFException：PartialInputStream 中的流过早结束

> ID：12324160
> 
> 赞同：0
> 
> 时间：2012-09-07T19:20:56.637
> 
> 标签：stream, inputstream, filestream, bouncycastle, pgp

在尝试加密然后解密文件时，我遇到以下异常：

```
com.example.common.crypto.CipherException: org.bouncycastle.openpgp.PGPException: Exception starting decryption
    at com.example.common.crypto.PGPFileCipher.decrypt(PGPFileCipher.java:151)
    at com.example.common.crypto.PGPFileCipherTest.testEncryptDecryptFile(PGPFileCipherTest.java:41)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:44)
    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
    at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:41)
    at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:20)
    at org.junit.rules.ExternalResource$1.evaluate(ExternalResource.java:43)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:76)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:50)
    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:193)
    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:52)
    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:191)
    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:42)
    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:184)
    at org.junit.runners.ParentRunner.run(ParentRunner.java:236)
    at org.apache.maven.surefire.junit4.JUnit4TestSet.execute(JUnit4TestSet.java:62)
    at org.apache.maven.surefire.suite.AbstractDirectoryTestSuite.executeTestSet(AbstractDirectoryTestSuite.java:140)
    at org.apache.maven.surefire.suite.AbstractDirectoryTestSuite.execute(AbstractDirectoryTestSuite.java:127)
    at org.apache.maven.surefire.Surefire.run(Surefire.java:177)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.apache.maven.surefire.booter.SurefireBooter.runSuitesInProcess(SurefireBooter.java:345)
    at org.apache.maven.surefire.booter.SurefireBooter.main(SurefireBooter.java:1009)
Caused by: org.bouncycastle.openpgp.PGPException: Exception starting decryption
    at org.bouncycastle.openpgp.PGPPublicKeyEncryptedData.getDataStream(Unknown Source)
    at org.bouncycastle.openpgp.PGPPublicKeyEncryptedData.getDataStream(Unknown Source)
    at com.example.common.crypto.PGPFileCipher.decrypt(PGPFileCipher.java:128)
    ... 28 more
Caused by: java.io.EOFException: premature end of stream in PartialInputStream
    at org.bouncycastle.bcpg.BCPGInputStream$PartialInputStream.read(Unknown Source)
    at org.bouncycastle.bcpg.BCPGInputStream.read(Unknown Source)
    at java.io.InputStream.read(InputStream.java:82)
    at javax.crypto.CipherInputStream.a(DashoA13*..)
    at javax.crypto.CipherInputStream.read(DashoA13*..)
    at org.bouncycastle.bcpg.BCPGInputStream.read(Unknown Source)
    ... 31 more 
```

我的 PGPFileCipher 类是：

```
package com.example.common.crypto;

public class PGPFileCipher implements FileCipher {

    private static final Logger logger = LoggerFactory.getLogger(PGPFileCipher.class);

    public File encryptFile(File inputFile, String encryptedFilePath, String publicKeyPath) throws CipherException {
        FileInputStream publicKeyStream = null;
        FileOutputStream encryptedFileOutputStream = null;
        try {
            publicKeyStream = new FileInputStream(new File(publicKeyPath));
            File encryptedFile = new File(encryptedFilePath);
            encryptedFileOutputStream = new FileOutputStream(encryptedFile);
            encryptedFileOutputStream.write(encrypt(getBytesFromFile(inputFile), publicKeyStream, ""));
            encryptedFileOutputStream.flush();
            return encryptedFile;
        } catch (Exception e) {
            throw new CipherException(e);
        } finally {
            IOUtils.closeQuietly(encryptedFileOutputStream);
            IOUtils.closeQuietly(publicKeyStream);
        }
    }

    private PGPPrivateKey findSecretKey(PGPSecretKeyRingCollection pgpSec, long keyID, char[] pass) throws CipherException {
        try {
            PGPSecretKey pgpSecKey = pgpSec.getSecretKey(keyID);
            if (pgpSecKey == null) {
                return null;
            }
            return pgpSecKey.extractPrivateKey(pass, new BouncyCastleProvider());
        } catch (Exception e) {
            throw new CipherException(e);
        }
    }

    /**
     * decrypt the passed in message stream
     *
     * @param encrypted
     *            The message to be decrypted.
     * @param keyIn
     *            InputStream of the key
     *
     * @return Clear text as a byte array. I18N considerations are not handled
     *         by this routine
     * @exception CipherException
     */
    public byte[] decrypt(byte[] encrypted, InputStream keyIn, char[] password) throws CipherException {
        ByteArrayOutputStream out = null;
        InputStream clear = null;
        InputStream in = null;
        InputStream unc = null;
        try {
            in = new ByteArrayInputStream(encrypted);

            in = PGPUtil.getDecoderStream(in);

            PGPObjectFactory pgpF = new PGPObjectFactory(in);
            PGPEncryptedDataList enc = null;
            Object o = pgpF.nextObject();

            //
            // the first object might be a PGP marker packet.
            //
            if (o instanceof PGPEncryptedDataList) {
                enc = (PGPEncryptedDataList) o;
            } else {
                enc = (PGPEncryptedDataList) pgpF.nextObject();
            }

            //
            // find the secret key
            //
            Iterator it = enc.getEncryptedDataObjects();
            PGPPrivateKey sKey = null;
            PGPPublicKeyEncryptedData pbe = null;
            PGPSecretKeyRingCollection pgpSec = new PGPSecretKeyRingCollection(
                    PGPUtil.getDecoderStream(keyIn));

            while (sKey == null && it.hasNext()) {
                pbe = (PGPPublicKeyEncryptedData) it.next();

                sKey = findSecretKey(pgpSec, pbe.getKeyID(), password);
            }

            if (sKey == null) {
                throw new IllegalArgumentException(
                        "secret key for message not found.");
            }

            clear = pbe.getDataStream(sKey, new BouncyCastleProvider());

            PGPObjectFactory pgpFact = new PGPObjectFactory(clear);

            PGPCompressedData cData = (PGPCompressedData) pgpFact.nextObject();

            pgpFact = new PGPObjectFactory(cData.getDataStream());

            PGPLiteralData ld = (PGPLiteralData) pgpFact.nextObject();

            unc = ld.getInputStream();

            out = new ByteArrayOutputStream();
            int ch;

            while ((ch = unc.read()) >= 0) {
                out.write(ch);

            }
            out.flush();
            byte[] returnBytes = out.toByteArray();
            return returnBytes;
        } catch (Exception e) {
            e.printStackTrace();
            throw new CipherException(e);
        } finally {
            IOUtils.closeQuietly(out);
            IOUtils.closeQuietly(in);
            IOUtils.closeQuietly(clear);
            IOUtils.closeQuietly(unc);
        }
    }

    /**
     * Simple PGP encryptor between byte[].
     *
     * @param clearData
     *            The test to be encrypted
     * @param keyInputStream
     *            Input stream of the key
     * @param fileName
     *            File name. This is used in the Literal Data Packet (tag 11)
     *            which is really inly important if the data is to be related to
     *            a file to be recovered later. Because this routine does not
     *            know the source of the information, the caller can set
     *            something here for file name use that will be carried. If this
     *            routine is being used to encrypt SOAP MIME bodies, for
     *            example, use the file name from the MIME type, if applicable.
     *            Or anything else appropriate.
     *
     * @return encrypted data.
     * @exception CipherException
     */
    public byte[] encrypt(byte[] clearData, InputStream keyInputStream, String fileName)
            throws CipherException {
        OutputStream out = null;
        OutputStream cOut = null;
        PGPCompressedDataGenerator comData = null;
        PGPLiteralDataGenerator lData = null;
        ByteArrayOutputStream encOut = null;
        ByteArrayOutputStream bOut = null;
        OutputStream cos = null;
        OutputStream pOut = null;
        try {
            PGPPublicKey encKey = readPublicKey(keyInputStream);
            if (fileName == null || fileName.trim().length() < 1) {
                fileName = PGPLiteralData.CONSOLE;
            }

            encOut = new ByteArrayOutputStream();

            out = encOut;

            bOut = new ByteArrayOutputStream();

            comData = new PGPCompressedDataGenerator(
                    PGPCompressedDataGenerator.ZIP);
            cos = comData.open(bOut); // open it with the final
            // destination
            lData = new PGPLiteralDataGenerator();

            // we want to generate compressed data. This might be a user option
            // later,
            // in which case we would pass in bOut.
            pOut = lData.open(cos, // the compressed output stream
                    PGPLiteralData.BINARY, fileName, // "filename" to store
                    clearData.length, // length of clear data
                    new Date() // current time
            );
            pOut.write(clearData);
            pOut.flush();
            PGPEncryptedDataGenerator cPk = new PGPEncryptedDataGenerator(
                    PGPEncryptedData.CAST5, false, new SecureRandom(),
                    new BouncyCastleProvider());

            cPk.addMethod(encKey);

            byte[] bytes = bOut.toByteArray();

            cOut = cPk.open(out, bytes.length);

            cOut.write(bytes); // obtain the actual bytes from the compressed stream
            cOut.flush();
            encOut.flush();
            return encOut.toByteArray();
        } catch (Exception e) {
            throw new CipherException(e);
        } finally {
            IOUtils.closeQuietly(out);
            IOUtils.closeQuietly(cOut);
            IOUtils.closeQuietly(encOut);
            IOUtils.closeQuietly(bOut);
            IOUtils.closeQuietly(cos);
            IOUtils.closeQuietly(pOut);
            try {
                if (lData != null) {
                    lData.close();
                }
                if (comData != null) {
                    comData.close();
                }
            } catch (IOException ignored) {}
        }
    }

    private PGPPublicKey readPublicKey(InputStream in)
            throws CipherException {
        try {
            in = PGPUtil.getDecoderStream(in);

            PGPPublicKeyRingCollection pgpPub = new PGPPublicKeyRingCollection(in);

            //
            // we just loop through the collection till we find a key suitable for
            // encryption, in the real
            // world you would probably want to be a bit smarter about this.
            //

            //
            // iterate through the key rings.
            //
            Iterator rIt = pgpPub.getKeyRings();

            while (rIt.hasNext()) {
                PGPPublicKeyRing kRing = (PGPPublicKeyRing) rIt.next();
                Iterator kIt = kRing.getPublicKeys();

                while (kIt.hasNext()) {
                    PGPPublicKey k = (PGPPublicKey) kIt.next();

                    if (k.isEncryptionKey()) {
                        return k;
                    }
                }
            }
            throw new IllegalArgumentException("Can't find encryption key in key ring.");
        } catch (Exception e) {
            throw new CipherException(e);
        }
    }

    private byte[] getBytesFromFile(File file) throws CipherException {
        InputStream is = null;
        try {
            is = new FileInputStream(file);
            // Get the size of the file
            long length = file.length();

            if (length > Integer.MAX_VALUE) {
                throw new CipherException("File is too large: " + file.getName());
            }

            return IOUtils.toByteArray(is);
        } catch (IOException e) {
            throw new CipherException(e);
        } finally {
            IOUtils.closeQuietly(is);
        }
    }
} 
```

我试图运行的测试是：

```
package com.example.common.crypto;

public class PGPFileCipherTest {

    private static final Logger logger = LoggerFactory.getLogger(PGPFileCipherTest.class);

    @Rule
    public TemporaryFolder folder = new TemporaryFolder();

    @Test
    public void testEncryptDecryptFile() throws IOException, CipherException {
        FileOutputStream decryptedFileOutputStream = null;
        InputStream privateKeyStream = null;
        try {
            PGPFileCipher fileCipher = new PGPFileCipher();
            Resource inputFile = new ClassPathResource("testInputFile.txt");
            Resource publicKey = new ClassPathResource("PUBLIC.asc");
            Resource privateKey = new ClassPathResource("PRIVATE.asc");
            // Encrypt file
            File encryptedFile = fileCipher.encryptFile(inputFile.getFile(), folder.newFile("testInputFile_enc.txt").getPath(), publicKey.getFile().getPath());
            // Now decrypt the file
            File decryptedFile = folder.newFile("testInputFile_dec.txt");
            decryptedFileOutputStream = new FileOutputStream(decryptedFile);
            privateKeyStream = new FileInputStream(privateKey.getFile());
            decryptedFileOutputStream.write(fileCipher.decrypt(FileUtils.readFileToByteArray(encryptedFile), privateKeyStream, "".toCharArray()));
            decryptedFileOutputStream.flush();
        } finally {
            IOUtils.closeQuietly(decryptedFileOutputStream);
            IOUtils.closeQuietly(privateKeyStream);
        }
    }
} 
```

不幸的是，我对 BouncyCastle 并不是很熟悉，而且似乎没有正确关闭/刷新流，但我似乎无法追踪它。这是 BouncyCastle 示例之一的修改版本，仅供参考。在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T06:03:33.880

检查jdk版本..我们在jdk1.5中都面临着运行加密的问题。但是 jdk 1.6 它工作正常。是的，bc pro jars“bcpg-jdk16”和“bcprov-ext-jdk16”版本应该是1.46

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-04T17:19:49.353

使用 new BouncyCastleProvider() 时要小心，因为它会导致每次实例化时在 JceSecurity 中注册提供程序。这将导致内存泄漏。

考虑做这样的事情

```
private Provider getProvider() {
    Provider provider = Security.getProvider("BC");
    if (provider==null){
        provider = new BouncyCastleProvider();
        Security.addProvider(provider);
    }
    return provider;
} 
```

# python - 从逐笔报价数据到砖形图

> ID：12324162
> 
> 赞同：3
> 
> 时间：2012-09-07T19:21:24.597
> 
> 标签：python, numpy, scipy, finance, pandas

我已经逐笔勾勒了外汇对的数据

这是一个示例`EURUSD/EURUSD-2012-06.csv`

```
EUR/USD,20120601 00:00:00.207,1.23618,1.2363
EUR/USD,20120601 00:00:00.209,1.23618,1.23631
EUR/USD,20120601 00:00:00.210,1.23618,1.23631
EUR/USD,20120601 00:00:00.211,1.23623,1.23631
EUR/USD,20120601 00:00:00.240,1.23623,1.23627
EUR/USD,20120601 00:00:00.423,1.23622,1.23627
EUR/USD,20120601 00:00:00.457,1.2362,1.23626
EUR/USD,20120601 00:00:01.537,1.2362,1.23625
EUR/USD,20120601 00:00:03.010,1.2362,1.23624
EUR/USD,20120601 00:00:03.012,1.2362,1.23625 
```

完整的刻度数据可以在这里下载 [http://dl.free.fr/k4vVF7aOD](http://dl.free.fr/k4vVF7aOD)

列是：

```
Symbol,Datetime,Bid,Ask 
```

我想通过刻度数据将此刻度转换为 Renko 图表 [http://www.investopedia.com/terms/r/renkochart.asp](http://www.investopedia.com/terms/r/renkochart.asp)

图表的一个参数是蜡烛高度（收盘价）：我们称之为烛台高度

我想使用 Python 和 Pandas 库来完成这个任务。

我已经完成了一小部分工作...逐个读取刻度数据文件

我想获得类似的数据

```
Id,Symbol,open_price,close_price 
```

能够画出Renko

id是蜡烛的编号

蜡烛价格将基于出价栏。

这是代码

```
#!/usr/bin/env python

import pandas as pd
import matplotlib.pyplot as plt
import numpy as np
from matplotlib.finance import candlestick

def candle_price_ref(price, candle_height):
  #return(int(price/candle_height)*candle_height)
  return(round(price/candle_height)*candle_height)

print("Reading CSV (please wait)")
df = pd.read_csv('test_EURUSD/EURUSD-2012-07.csv', names=['Symbol', 'Date_Time', 'Bid', 'Ask'], index_col=1)
print("End of reading")

df['Bid'] = df['Bid']
#candle_height = 0.0015
#candle_height = 0.0010
#candle_height = 0.0005
candle_height = 0.0001
#candle_height = 0.000001

price = df.ix[0]['Bid']
price_ref = candle_price_ref(price, candle_height)

ID = 0
#print("ID={0} price_ref={1}".format(ID, price_ref))

candle_price_open = []
candle_price_close = []

candle_price_open.append(price) # price ou price_ref
candle_price_close.append(price)

for i in range(len(df)):
  price = df.ix[i]['Bid']
  candle_price_close[ID] = price

  new_price_ref = candle_price_ref(price, candle_height)

  if new_price_ref!=price_ref:
    candle_price_close[ID]=new_price_ref
    price_ref = new_price_ref
    ID += 1
    candle_price_open.append(price_ref)
    candle_price_close.append(price_ref)

IDs=range(ID+1)
volume=np.zeros(ID+1)

a_price_open=np.array(candle_price_open)
a_price_close=np.array(candle_price_close)
b_green_candle = a_price_open < a_price_close
candle_price_low = np.where(b_green_candle, a_price_open, a_price_close)
candle_price_high = np.where(b_green_candle, a_price_close, a_price_open)

DOCHLV=zip(IDs, candle_price_open, candle_price_close, candle_price_high, candle_price_low, volume)

#print(DOCHLV)

fig = plt.figure()
fig.subplots_adjust(bottom=0.1)
ax = fig.add_subplot(211)
df['Bid'].plot()
plt.title("Price graph")
ax = fig.add_subplot(212)
plt.title("Renko chart")
candlestick(ax, DOCHLV, width=0.6, colorup='g', colordown='r', alpha=1.0)
plt.show() 
```

我的问题是我在这里所做的不是真正的 Renko 图，原因有两个：

1.  在 Renko 图表中，您不能拥有具有相同开盘价和收盘价的绿色蜡烛和红色蜡烛（在我的代码中不是这种情况）...
2.  每根蜡烛必须有一个固定的高度（在我的代码中，一些蜡烛的高度是蜡烛高度的 2 或 3 倍……这是个问题！）

我正在寻找一种非常快的算法，如果可能的话，一个矢量化算法（如果可能的话），因为刻度数据可能非常大。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T21:00:12.580

```
 for i,row in enumerate(df.values):
     ID = i
     sym,timestamp,open_price,close_price = row
     print ID,sym,open_price,close_price 
```

但我认为我不太了解您要做什么...

# shell - 同时直接输出到标准输出和输出文件

> ID：12324164
> 
> 赞同：1
> 
> 时间：2012-09-07T19:21:37.800
> 
> 标签：shell, unix, file-io

我知道

```
./executable &>outputfile 
```

将标准输出和标准错误重定向到一个文件。这就是我想要的，但我也希望输出继续在终端中打印。做这个的最好方式是什么？

好的，这是我的确切命令：我试过了

```
./damp2Plan 10 | tee log.txt 
```

和

```
./damp2Plan 10 2>&1 | tee log.txt 
```

其中 10 只是传递给 main 的参数。两者都不能正常工作。结果是代码中的第一个 printf 语句确实进入了终端和 log.txt，但其余的都没有。我在[Ubuntu 12.04](https://en.wikipedia.org/wiki/Ubuntu_version_history#Ubuntu_12.04_LTS_.28Precise_Pangolin.29)（精确穿山甲）上。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T19:26:12.530

使用`tee`：

`./executable 2>&1 | tee outputfile`

`tee`分块输出，在看到任何输出之前可能会有一些延迟。如果你想更接近实时输出，你可以像现在一样重定向到一个文件，并`tail -f`在不同的 shell 中监视它：

`./executable 2>&1 > outputfile`

`tail -f outputfile`

# php - If next item in looping array exists

> ID：12324165
> 
> 赞同：0
> 
> 时间：2012-09-07T19:21:46.643
> 
> 标签：php, arrays, next

I want to check to see if within the current position of an array loop there is a further 1 or more elements left (without shifting the elements and counting):

```
public function build() {
    $_string = 'CREATE TABLE IF NOT EXISTS `' . dbbuilder::$prefix . $this->name . '` (';
    foreach( $this->rows as $key => $row ) {
        if( $__string = $row->get_string() ) {
            $_string .= $__string . ( next( $this->rows[$key] ) ? ', ' : '' );
        }
    }
    $_string .= ') ENGINE=InnoDB  DEFAULT CHARSET=utf8;';
    $this->string = $_string;
} 
```

Output:

```
[string:private] => CREATE TABLE IF NOT EXISTS `ecom_accounts` (`id` init(11) NOT NULL  AUTO_INCREMENT`name` varchar(55) NOT NULL `email_address` varchar(255) NOT NULL `password` varchar(32) NOT NULL `multisite` varchar(5) NOT NULL `roll` int(4) NOT NULL DEFAULT '0') ENGINE=InnoDB  DEFAULT CHARSET=utf8; 
```

I thought next() would work but it doesnt, also the `key` is a string not number.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T19:26:54.043

You can e.g. use the [CachingIterator](http://docs.php.net/manual/en/class.cachingiterator.php)

```
<?php
$source = array(1,2,3,4,5,6);
$cit = new CachingIterator(new ArrayIterator($source));

foreach($cit as $e) {
    if ( !$cit->hasNext() ) {
        echo 'last element: ';
    }
    echo $e, "\n";
} 
```

prints

```
1
2
3
4
5
last element: 6 
```

* * *

...or in this case a simple `join(', ', $this->rows)`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-07T19:29:50.077

What about the easy one?

```
$_string = 'CREATE TABLE IF NOT EXISTS `' . dbbuilder::$prefix . $this->name . '` (';
$tmp=array();
foreach( $this->rows as $key => $row )
   if( $__string = $row->get_string() )
      $tmp[]=$__string;
$_string .= implode(',',$tmp);
$_string .= ') ENGINE=InnoDB  DEFAULT CHARSET=utf8;';
$this->string = $_string; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-07T19:28:41.500

This could do the job. Only problem: what to do when you are at the last position and there is no next key?

```
public function build() {
    $_string = 'CREATE TABLE IF NOT EXISTS `' . dbbuilder::$prefix . $this->name . '` (';
    $keys = array_keys($this->rows);
    $i = 1;
    foreach( $this->rows as $key => $row ) {
        if( $__string = $row->get_string() ) {
            $_string .= $__string . $this->rows[$keys[$i]] ) ? ', ' : '' );
        }
        $i++;
    }
    $_string .= ') ENGINE=InnoDB  DEFAULT CHARSET=utf8;';
    $this->string = $_string;
} 
```

# .net - VisualBrush 未以样式呈现

> ID：12324170
> 
> 赞同：0
> 
> 时间：2012-09-07T19:22:08.457
> 
> 标签：.net, wpf, silverlight, xaml

为什么我要`VisualBrush`使用以下代码在我的按钮中渲染一个可爱的图像：

```
<Button>
    <Rectangle Width="28" Height="28">
        <Rectangle.Fill>
            <VisualBrush Stretch="Fill" Visual="{StaticResource lovely_image}" />
        </Rectangle.Fill>
    </Rectangle>
</Button> 
```

但是这段代码什么也不渲染？：

```
<Button>
    <Rectangle Width="28" Height="28">
        <Rectangle.Style>
            <Style TargetType="{x:Type Rectangle}">
               <Setter Property="Fill">
                    <Setter.Value>
                        <VisualBrush Stretch="Fill" Visual="{StaticResource lovely_image}" />                               
                    </Setter.Value>
                </Setter>
            </Style>
        </Rectangle.Style>
    </Rectangle>
</Button> 
```

有趣的是，如果我用 a 替换`VisualBrush`第二个示例中的`SolidColorBrush`，则`SolidColorBrush`渲染。

（我为什么要这样做？我正在尝试使用 DataTriggers 根据我的 ViewModel 中的值交换图标。）

**更新**

所以看起来这段代码工作得很好。我的问题实际上是我的资源定义我的视觉效果的方式有些奇怪。视觉对象使用了从引用程序集加载的画笔动态资源。这适用于上面的第一个示例，但由于某种原因不适用于第二个示例。我刚刚将画笔复制到我的项目程序集和中提琴中的资源中！，我`lovely_image`的被渲染了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T19:28:26.873

A`SolidColorBrush`是抽象的，可以在多个地方使用。视觉不是，它只能有一个父级。

您可以尝试[`x:Shared="false"`](http://msdn.microsoft.com/en-us/library/aa970778.aspx)资源中的视觉效果。或使用`Button.ContentTemplate`使按钮创建多个`Rectangles`（内联视觉和`Content`需要设置为应用它的东西）。

此外，如果这不是关于多个实例，因为您的问题中的代码很好： Mind [dependency property value priority](https://msdn.microsoft.com/en-us/library/ms743230%28v=vs.100%29.aspx)。

# entity-framework - SQL Anywhere、Entity Framework 4 和事务

> ID：12324175
> 
> 赞同：0
> 
> 时间：2012-09-07T19:22:45.950
> 
> 标签：entity-framework, entity-framework-4, transactions, sqlanywhere

我的程序中有一个使用 Entity Framework 4 EDM 的进程。实体上下文对象包含用于调用存储过程的函数导入。

该进程从远程服务器接收一批数据。批处理可以包含我们任何表/数据类型的数据（每种数据类型都存储在自己的表中）。该批次还可以多次包含同一行的数据。它必须将其作为单个插入（对于第一次出现）和一个或多个更新（对于每个后续出现）来处理。`INSERT ... ON EXISTING UPDATE`因此，存储过程使用该命令实现了 upsert 操作。

我们的代码基本上确定要调用哪个存储过程，然后使用该存储过程的实体上下文对象的方法调用它。然后整个批处理必须在单个事务中完成，因此我们`context.Connection.BeginTransaction()`在批处理开始时调用。

有一种数据类型有数百万行。我们需要尽快加载这些数据。我正在实现使用`SABulkCopy`该类导入该数据类型的逻辑。这也需要是已经开始的单个事务的一部分。问题是我需要将 an 传递`SATransaction`给`SABulkCopy`类的构造函数（无法使用属性对其进行设置）并且我没有`SATransaction`. `context.Connection.BeginTransaction()`返回一个`DBTransaction`。我试图把它变成一个`SATransaction`没有成功的东西。

让`SABulkCopy`对象加入事务的正确方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T16:32:03.863

我们放弃了这`SABulkCopy`门课。事实证明，它不会进行批量加载。它创建一个`SACommand`执行`INSERT`语句并一次插入一行的对象。而且它的启动效率很低。

我仍然需要获取`SATransaction`与`DBTransaction`返回的相关联的信息，`context.Connection.BeginTransaction().` 我得到了一些反射代码，以响应我发布的另一个问题：

```
SATransaction saTransaction = (SATransaction) dbTransaction.GetType() 
                                                           .InvokeMember( "StoreTransaction", 
                                                                          BindingFlags.FlattenHierarchy | BindingFlags.NonPublic   | BindingFlags.InvokeMethod |
                                                                          BindingFlags.Instance         | BindingFlags.GetProperty | BindingFlags.NonPublic, 
                                                                          null, dbTransaction, new object[ 0 ] ); 
```

该程序做它需要做的事情。不幸的是，微软没有公开该类的`StoreTransaction`财产。`EntityTransaction`

# python - Matplotlib imshow 偏移以匹配轴？

> ID：12324176
> 
> 赞同：19
> 
> 时间：2012-09-07T19:22:47.280
> 
> 标签：python, numpy, matplotlib, gis, coordinate-systems

我正在使用 matplotlib.pyplot.scatter 绘制一堆 UTM 坐标。我还有一张背景空气照片，我知道它与图形的范围完全匹配。当我绘制数据并设置轴时，我可以正确显示散点图。如果我使用 imshow 绘制空中照片，它将使用像素数作为轴位置。我需要将图像（numpy 数组）移动到正确的 UTM 位置。有任何想法吗？我对 matplotlib 和 numpy 还很陌生。

例如：我知道图像的左上角（imshow 坐标：0,0）有 UTM 坐标（269658.4, 538318.2）。我如何告诉 imshow 同样的事情？

我还应该说我调查了 Basemap，但它似乎还没有完全支持 UTM。我的学习区域很小。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-09-07T19:40:21.027

您需要对`extent`imshow 使用关键字参数。

举个简单的例子：

```
import numpy as np
import matplotlib.pyplot as plt

# Random points between 50000 and 51000
x, y = 1000 * np.random.random((2, 10)) + 50000

# A 10x10 "image"...
image = np.arange(100).reshape((10,10))

# In a lot of cases, image data will be "flipped" vertically, so you may need 
# use the `origin` kwarg, as well (or just swap the ymin and ymax ordering).
plt.imshow(image, extent=[x.min(), x.max(), y.min(), y.max()])
plt.plot(x, y, 'ro')

plt.show() 
```

![在此处输入图像描述](../Images/899fb722d78987d0968d0702d2d8faee.png)

# c++ - 寻找最短的字符串类型转换C++

> ID：12324180
> 
> 赞同：0
> 
> 时间：2012-09-07T19:23:22.683
> 
> 标签：c++, string, pointers, com, bstr

我正在制作一个使用 C# 托管 DLL 的非托管 C++ DLL。我正在编写 C++ 库，因为我需要使用在软件中定义的函数和头文件，C++ 库可以作为插件添加。但是我想做的事情太复杂了，以至于我对 C++ 的了解会减慢我的速度，所以我决定用我最喜欢的 C# 做事情，并通过 COM 连接 DLL，我成功了。

我在使代码工作方面取得了某种成功，但在保持代码简洁方面不太成功，因为我显然不是专业的 C++ 程序员。

问题在于转换各种字符串类型。特别是 BSTR 和 const char *。

以下代码将 const char * 转换为 BSTR：

```
BSTR bstrt;
const char * someChar;

csharpInterfacedClassPointer->get_PropertyForSomeChars(&bstrt);
strcpy_s(nstring, (char *)bstrt);
someChar = nstring; 
```

问题是，我有很多离散的 someChars 和相应的离散接口方法......属性方法是从 C# 接口生成的，所以我无法更改它。每个“someChar”都需要以下三行代码，因此对于 30 个离散变量，我需要编写 90 行代码。

```
csharpInterfacedClassPointer->get_PropertyForSomeCharX(&bstrt);
strcpy_s(nstring, (char *)bstrt);
someCharX = nstring; 
```

**问题是**：如何为此编写一些快捷方式以便它只适合一行？

我用“getter”函数指针和 someChar 指针尝试了某种函数。

```
typedef HRESULT (__stdcall *get_string_func)(BSTR * str); //getter function pointer

//the converting function
void ConvertAndAssign(get_string_func bstr_get_fx, const char * constCharString) 
{
const size_t nsize = 1000;
char nstring[nsize];

BSTR bstrt;
bstrt = bstr_t(constCharString);
bstr_get_fx(&bstrt);
strcpy_s(nstring, (char *)bstrt);
constCharString = nstring;
}

//calling the function...as I thought that would work
ConvertAndAssign(sPtr->get_DataFile, someChar); 
```

但是随后编译器说了一些关于绑定函数的奇怪事情，以及它们如何不允许作为指针......我用谷歌搜索了它的含义以及更改函数定义所需的解决方案，但我不能这样做，因为定义是生成的来自 C# 代码（通过 regasm.exe）。

**重要说明：**最后我需要获取 const char * 类型，因为它是我正在为其制作 C++ DLL 的程序的函数所需的输入类型。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T20:36:03.220

```
Disclaimer: it was a long time (7 years to be more precise) since I have touched C++/COM code for the last time. 
```

关于将实例方法绑定到函数指针检查这个[SO](https://stackoverflow.com/questions/1485983/calling-c-class-methods-via-a-function-pointer) question。

另一种选择是使用[IDispatch](http://msdn.microsoft.com/en-us/library/windows/desktop/dd318520%28v=vs.85%29.aspx)接口（如果您的 COM 组件实现它）

关于 ConvertAndAssign() 实现，IMO 它有一些问题。为了便于解释，我将其复制如下：

```
void ConvertAndAssign(get_string_func bstr_get_fx, const char * constCharString) 
{
    const size_t nsize = 1000;
    char nstring[nsize];

    BSTR bstrt;
    bstrt = bstr_t(constCharString); // issue 1
    bstr_get_fx(&bstrt);
    strcpy_s(nstring, (char *)bstrt); // issue 2
    constCharString = nstring; // issues  3 & 4
} 
```

1.  如果您的 COM 方法返回 BSTR（即，它具有 BSTR 类型的 out 参数），则不应传递预分配的字符串，否则最终会导致内存泄漏。

2.  将 bstr**转换**为 char * 将不起作用。BSTR 是 Unicode 字符串。它们也被编码，使其长度在实际字符之前。如果您使用 ATL/MFC，您可以使用[字符串转换宏](http://msdn.microsoft.com/en-us/library/87zae4a3%28v=vs.80%29.aspx)之一。如果您不使用 ATL/MFC，您可以使用[WideCharToMultiByte()](http://msdn.microsoft.com/en-us/library/windows/desktop/dd374130%28v=vs.85%29.aspx)函数或“智能”BSTR 类之一（ATL 中的 CComBSTR、bstr_t 等）

3.  **将nstring**分配给**constCharString对****外部**字符串没有影响。如果您正在调用 ConvertAndAssign 如下

    ```
    char *outsideStr = NULL;              
    ConvertAndAssign(whatever, outsideStr); 
    ```

    ConvertAndAssign() 函数内部*consCharString*将在开始时指向 NULL。在赋值之后*constCharString*确实指向*nstring*但 *outsideStr*仍然指向 NULL（请记住，当您调用 ConvertAndAssign() 函数时，指针值的副本被传递给它）。

    为了得到你想要的，你可以传递一个引用或一个指向指针的指针：

    ```
     void ConvertAndAssign(get_string_func bstr_get_fx, const char * &constCharString) 
     {
          constCharString = nstring; // Assignment
     } 
    ```

    或指向指针的指针：

    ```
     char *outsideStr = NULL;
     ConvertAndAssign(whatever, &outsideStr);

     void ConvertAndAssign(get_string_func bstr_get_fx, const char **constCharString) 
     {
          .
          .
          .
          *constCharString = nstring; // Assignment
     } 
    ```

4.  解决上一个问题后，您将遇到另一个问题：您不能返回局部变量的地址！当您的代码在 ConvertAndAssign() 返回后恢复时，不再为您分配此地址（它是堆栈的一部分，因此它甚至可能看起来正在工作，但我向您保证，它不是；您的代码中最轻微的变化可能打破它）

    要解决此问题，您需要传递一个预先分配的字符串：

    ```
    char outsideStr[1000];
    ConvertAndAssign(whatever, outsideStr);

    void ConvertAndAssign(get_string_func bstr_get_fx, const char * constCharString) 
    {
        strcpy_s(constCharString, /* result str here */ );
    } 
    ```

    或在堆中分配一个字符串。

鉴于以上所有情况，ConvertAndAssign() 的一种可能实现及其用法如下：

```
char outsideStr[1000];
ConvertAndAssign(whatever, outsideStr);

void ConvertAndAssign(get_string_func bstr_get_fx, const char * constCharString) 
{
    BSTR bstrt;
    if(SUCCEEDED(bstr_get_fx(&bstrt)))
    {
         // Assumes constCharString points to a buffer large enough to hold the converted string.
        strcpy_s(constCharString, CW2A(bstr)); // not completely correct since bstr may contain the byte 0 but I guess thats not your scenario.
        SysFreeString(bstr);
    }
    else
    {
         // error handling.
         constCharString[0] = 0;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T15:25:01.480

如果有任何模组要阅读此问题，则可以删除此问题。我意识到我有一个完全不同的问题。感谢 Vagaus 的努力。

# excel - 将特定列的日期格式设置为“yyyy-mm-dd”的 VBA 代码

> ID：12324190
> 
> 赞同：21
> 
> 时间：2012-09-07T19:24:24.997
> 
> 标签：excel, vba

我有一个宏，我在文本框中指定日期（以 mm/dd/yyyy 为单位），我想以 yyyy-mm-dd 格式为 A 列设置此值。我有以下代码：

```
Sheets("Sheet1").Range("A2", "A50000").Value = TextBox3.Value
Sheet1.Range("A2", "A50000") = Format(Date, "yyyy-mm-dd") 
```

...当我运行宏时，日期仍然是 mm/dd/yyyy 格式。

我怎样才能改变它，使它成为我想要的格式？我一直在尝试通过谷歌研究的多种代码，没有任何东西可以按照我想要的方式设置格式。

任何帮助将不胜感激...

编辑：来自 OP 评论的完整代码如下：

```
 Workbooks.Add
 Range("A1") = "Acctdate"
 Range("B1") = "Ledger"
 Range("C1") = "CY"
 Range("D1") = "BusinessUnit"
 Range("E1") = "OperatingUnit"
 Range("F1") = "LOB"
 Range("G1") = "Account"
 Range("H1") = "TreatyCode"
 Range("I1") = "Amount"
 Range("J1") = "TransactionCurrency"
 Range("K1") = "USDEquivalentAmount"
 Range("L1") = "KeyCol"
 Sheets("Sheet1").Range("A2", "A50000").Value = TextBox3.Value
 Sheet1.Range("A2", "A50000").NumberFormat = "yyyy-mm-dd" 
```

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-09-07T19:39:30.993

使用范围的`NumberFormat`属性来强制范围的格式是这样的：

```
Sheet1.Range("A2", "A50000").NumberFormat = "yyyy-mm-dd" 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-09-07T22:25:53.507

您正在将格式应用于具有代码的工作簿，而不是添加的工作簿。您需要养成完全限定工作表和范围引用的习惯。下面的代码可以做到这一点，并在 Excel 2010 中为我工作：

```
Sub test()
Dim wb As Excel.Workbook
Set wb = Workbooks.Add
With wb.Sheets(1)
    .Range("A1") = "Acctdate"
    .Range("B1") = "Ledger"
    .Range("C1") = "CY"
    .Range("D1") = "BusinessUnit"
    .Range("E1") = "OperatingUnit"
    .Range("F1") = "LOB"
    .Range("G1") = "Account"
    .Range("H1") = "TreatyCode"
    .Range("I1") = "Amount"
    .Range("J1") = "TransactionCurrency"
    .Range("K1") = "USDEquivalentAmount"
    .Range("L1") = "KeyCol"
    .Range("A2", "A50000").Value = Me.TextBox3.Value
    .Range("A2", "A50000").NumberFormat = "yyyy-mm-dd"
End With
End Sub 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-03-05T07:50:24.557

当您使用两条线时，它可以工作：

```
Application.ActiveWorkbook.Worksheets("data").Range("C1", "C20000") = Format(Date, "yyyy-mm-dd")
Application.ActiveWorkbook.Worksheets("data").Range("C1", "C20000").NumberFormat = "yyyy-mm-dd" 
```

# c++ - 按值传递的 C++ 函数参数

> ID：12324195
> 
> 赞同：2
> 
> 时间：2012-09-07T19:24:54.143
> 
> 标签：c++, copy-constructor

我知道当您以这种方式调用函数时：

```
foo(MyClass a) 
```

该对象`a`是按值传递的，这意味着它正在被复制。

我的问题是它是如何被复制的？说我的类没有复制构造函数，所以如果它是使用浅拷贝传递的，那么对象可能会在函数内部发生变化？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-07T19:26:15.197

编译器自动生成复制构造函数的代码并执行成员明智的复制。编译器调用的复制构造函数执行成员明智的复制，这确实是浅复制。

如果类中存在指针，则不建议按值传递对象。即使一个指针不存在，但存在十几个其他数据成员，它们也需要很长时间才能被复制。通过引用传递它，`const`如果你不希望它的值被改变，就让它。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-07T19:29:34.580

有两种可能性。

### 首先：您没有*指定*复制构造函数。

在这种情况下，`MyClass::MyClass(MyClass const&)`将使用默认的复制构造函数。这将尝试复制构造所有`MyClass`的成员（递归地，因为它们本身可能有成员）。如果这些成员中的任何一个不是可复制构造的，那么您的默认复制构造函数也会因此失败（请参阅下一点）。

### 第二：您将复制构造函数声明为私有或实际上将`delete`其声明为 d（在 C++11 中）。

在这种情况下，您将无法向此函数传递任何内容，因为编译器将需要访问复制构造函数，而您拒绝了它。这将导致编译时错误。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-07T19:25:42.593

编译器创建一个默认的复制构造函数。

# javascript - 删除 prevAll ：使用 jQuery 的第一项

> ID：12324200
> 
> 赞同：0
> 
> 时间：2012-09-07T19:25:15.823
> 
> 标签：javascript, jquery, client-side

我在我的代码中做错了什么：

```
 $.each($("input[value='"+id+"']"), function(index, value) {
            alert($(this).val());
            $("input[value='"+$(this).val()+"']").prevAll('.t-item:first').remove();
        }); 
```

html架构：

![Html 架构](../Images/8ba647a74531004a52ff45fc2978c130.png)

ps 我在做“每个”，因为我在页面的其他地方有相同的 html，所以我想从这两个地方删除

在这个 html 示例中，我的 id 是 249 或 293

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T19:31:01.343

从标记看起来您正在尝试删除`<li class="t-item">`输入的祖先，在这种情况下使用[`.closest()`](http://api.jquery.com/closest/)

```
 $.each($("input[value='"+id+"']"), function(index, value) {
        alert($(this).val());
        $(this).closest('.t-item').remove();
    }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T19:32:09.733

尝试：

```
$(this).closest('.t-item').remove(); 
```

代替：`$("input[value='"+$(this).val()+"']").prevAll('.t-item:first').remove();`

[http://api.jquery.com/closest](http://api.jquery.com/closest)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-07T19:32:13.237

你可以试试：

```
 $.each($("input[value='"+id+"']"), function(index, value) {
            alert($(this).val());
            $(this).closest('.t-item').remove();
        }); 
```

[http://api.jquery.com/closest/](http://api.jquery.com/closest/)

`Get the first element that matches the selector, beginning at the current element and progressing up through the DOM tree.`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-07T20:11:57.397

```
$("input[value="+id+"]").closest('.t-item').remove(); 
```

# eclipse - Eclipse Juno JSP 语法高亮不起作用

> ID：12324201
> 
> 赞同：16
> 
> 时间：2012-09-07T19:25:22.983
> 
> 标签：eclipse, eclipse-juno

我安装了 Java EE 版本的 Juno 并打开了我正在处理的现有项目。我注意到的第一件事是我的 JSP 上没有语法高亮显示。我检查了我的安装，我确实安装了 WTP。

任何想法为什么这不起作用？它在我使用过的所有其他版本的 Eclipse 上开箱即用。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-02-27T15:26:05.367

同样的问题发生在我身上。我试过这个解决方案，它对我有用。

1.  检查您的`JDK`必须`1.6`或更高版本。如果不安装`JDK 1.7`

2.  如果问题仍然存在，在*Eclipse*中转到`Help -> Install New Software -> WorkWith (Select Juno - http://download.eclipse.org/releases/juno)`-> Expand `Web, XML, Java EE and OSGi Enterprise Development -> Web Page Editor`(Check it) 并安装它。

    安装后重启eclipse。现在用 . 打开一个现有的 jsp 文件`Web Page Editor`。为此，请右键单击 jsp 文件`open with -> Web Page Editor`。如果`Web Page Editor`不存在，则转到`Other -> Internal Editors -> Web Page Editor` **或** 转到使用 .jsp 扩展名创建新文件并使用网页编辑器打开

    现在在*Eclipse* Goto中`Window -> Preferences -> General -> Editors -> File Associations` 选择 *.jsp 并将网页编辑器设置为默认编辑器

3.  在桌面上为 *Eclipse * 创建一个快照，然后右键单击快捷方式转到`properties->shortcut tab -> target`

    在目标中将这些行添加到大括号中（`-vm "path`对于您的 jdk 7" 的 bin 文件夹）例如目标应该看起来像 `"C:\eclipse\eclipse.exe" -vm "C:\Program Files\java\jdk1.7.0_06\bin"`

# c# - 线程接收错误的参数

> ID：12324204
> 
> 赞同：9
> 
> 时间：2012-09-07T19:25:56.413
> 
> 标签：c#, multithreading, .net-3.5

我需要在线程中运行具有给定参数的方法。我注意到当我运行它时，参数是错误的。对于给出的示例，我有一个数字为 1-7 的数组`int[] output`。对于每个数字，我使用方法创建一个线程`WriteInt(i)`。我希望输出以任何顺序为 1-7，但我始终看到一些数字丢失，而另一些数字重复。发生了什么以及启动这些线程的正确方法是什么？

（该列表仅用于之后加入线程）

```
class Program
{
    static void Main(string[] args)
    {
        int[] output = { 1, 2, 3, 4, 5, 6, 7 };

        List<Thread> runningThreads = new List<Thread>();

        foreach (int i in output)
        {
            Thread thread = new Thread(() => WriteInt(i));
            thread.Start();
            runningThreads.Add(thread);
        }
        foreach(Thread t in runningThreads)
        {
            t.Join();
        }
    }

    private static void WriteInt(int i)
    {
        Console.WriteLine(i);
    }
} 
```

示例输出：

```
3
3
4
5
6
7 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-07T19:26:59.893

由 lambda ( `() => WriteInt(i)`) 创建的闭包正在关闭*变量* `i`，而不是`i`每次迭代中设置的值。当线程运行时，它使用在该时间点内设置的值，由于循环处理`i`，该值可能已经更改。`foreach`

你需要一个临时的：

```
foreach (int i in output)
{
        int temp = i;
        Thread thread = new Thread(() => WriteInt(temp));
        thread.Start();
        runningThreads.Add(thread);
} 
```

有关正在发生的事情的详细信息，请参阅 Eric Lippert 的帖子，标题为[Closing over the loop variable considered dangerous](http://blogs.msdn.com/b/ericlippert/archive/2009/11/12/closing-over-the-loop-variable-considered-harmful.aspx)。

此外，在 C# 5 (VS2012) 中，这不再是`foreach`循环的问题。但是，它仍然会在 for 循环中发生。

# oracle - OracleXE 的 APEX 能否访问同一服务器上的另一个 Oracle 数据库（10g），还是仅限于 XE 数据库中的那些用户/表空间？

> ID：12324213
> 
> 赞同：2
> 
> 时间：2012-09-07T19:26:17.150
> 
> 标签：oracle, express, oracle-apex, oracle-xe

我的工作使用 Oracle 10G 并计划安装 Apex。同时，我下载了 Oracle XE 并自学了 APEX；但是，我只能访问我在 XE 数据库中创建的用户/表空间。我想做的是使用 XE 的 Apex 来访问我工作的生产数据库中的用户/表空间。

我的同事说这应该是可能的，因为我的工作站已连接到服务器，并且应该有一种方法可以配置从我的 XE 的 Apex 到 10g 的数据库的访问，例如通过设置适当的 DAD。

我在 Apex 用户界面中看不到任何允许这样做的内容。我已经阅读了 Apex 文档的每一个字，但没有注册任何内容。

XE 使用嵌入式 PL/SQL 网关，而 10/11G 使用 Apex 侦听器或带有 mod_plsql 插件的 HTTP 服务器。

谢谢，

马修·莫伊森

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T21:27:57.890

在我们无法访问托管要处理的数据的实际数据库之前，我已经这样做了，除了标准端口 1521 侦听器访问。当时的 Apex 对组织来说还很新，以至于 DBA 也有一个关于将他们的数据库服务器用作 Web 服务器网关的巫术禁忌。您可以使用安装了 APEX 作为“中间层”或应用服务器的数据库实例，步骤如下：

1.  在您的 10g 数据库上设置一个可通过 dblink 远程访问的帐户。
2.  在安装了 XE 的工作站上设置 dblinks 到 10g 数据库表，使用 (1) 中设置的 10g 数据库的帐户和连接信息。请注意，您可能必须更新 TNS 名称文件或在 dblink 本身中明确指出您的主机/网络设置。
3.  为了在编码您的 apex 项目时简单明了，请为您的所有 dblinked 对象设置同义词（即 table1 为 table1@dblink），这样您就不会直接在您的 apex 代码中引用 dblinks。如果您坚持这一点，以后进行更改会更容易。

就是这样。一个附带条件是，您需要知道 LOB 在使用 dblink 时无法与 APEX 驱动的 DML 操作的开箱即用功能一起使用。这可能随着最新版本而改变。您可能考虑的一种解决方法是尝试使用存储过程，该过程将您的 LOB 数据作为输入参数传递，该参数将为您执行 DML 操作。

否则，这种方法效果很好。我实现这个模型的地方有几个生产级应用程序、一个测试层和一个开发层，它们都使用与实际数据源分开托管 APEX 的服务器。我们使用 Oracle Standard Edition One（用于支持），但 Oracle XE 应该也能正常工作，因为 APEX 是两个 Oracle 版本之间的共同平台。

# jquery - ajax后的幻灯片功能

> ID：12324217
> 
> 赞同：0
> 
> 时间：2012-09-07T19:26:32.170
> 
> 标签：jquery, ajax, slide

我的主页有以下滑块

```
function slider() {
    $('.slideshow li:gt(0)').hide();
    setInterval(function(){
        $('.slideshow li:first-child').fadeOut(2000).next('li').fadeIn(2000).end().appendTo('.slideshow');
        }, 4000);

} 
```

导航栏通过 ajax 加载方法加载页面。

```
$("#menu li").click(function(e) {
    e.preventDefault();
    var url = $("a", this).attr("href");
    $(".info_box").slideUp("slow", function(){
        $(".info_box").load(url, function(){
            $(".info_box").slideDown("slow");
            if(url == "index.php") {
              slider();
            }
        }); 
    }); 
```

功能滑块在第一次访问时工作正常，但是在我返回滑块页面（index.php）时加载ajax后它不起作用所以我记得解决问题的功能，但滑块不能顺利工作它的滑动图像非常ajax调用后快速。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T19:28:56.273

两个 setInterval 可能同时运行。你应该把函数放在想要在 $(document).ready 里面运行

# c# - Does having old commented code and a lot of whitespaces in code slow down performance?

> ID：12324223
> 
> 赞同：13
> 
> 时间：2012-09-07T19:27:13.810
> 
> 标签：c#, c++, vb.net, visual-studio-2010, performance

Does having a lot of white space between chunks of code and empty lines in code slow down the performance of the application?

I have a tendency to space apart my code quite a bit, and I am wondering if it affects it negatively. Also, I have a lot of commented code that I commented out when I made changes, although I keep it around in case I ever have to go back to the old way. What are some other tips that could speed up performance?

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-09-07T19:28:56.763

No performance degradation at all. Comments are not parsed by the compiler, they are usually removed in the lexical analysis.

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-09-07T19:29:23.263

Comments and whitespace have absolutely no effect.

Commented-**out** code should be removed however because it's "messy".

Keep your code in source control so you have version history, and never lose any historical changes.

Don't worry about optimization and speed until you notice your code being slow. Then you profile code, measure, compare, time, etc to determine where bottlenecks are, and what the cause is.

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-09-07T21:16:24.677

However its worth mentioning, in web envirnoment when you are NOT using a complied version of project then it matters, say you have 10,000 lines of comments/code in HTML/Css/Javascript then your browser will still download the chunk of data from webserver to your browser.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-08-25T20:12:32.680

Comments and whitespaces are not not compiled by any compiler and are ignored, so these two have no effect on performance. But in web technologies like HTML, CSS and JS, it can have effect on the file download because comments and whitespaces increases file size, and hence the webpage loading speed may degrade.

So it is best practice to keep your code as much clean as possible, and use a source control system like git to manage your code. Also, before the final production of your code, it is best practice to remove all unnecessary comments and whitespaces and old unused chunks of code.

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2022-01-25T17:43:19.117

> No performance drops at all as its never compiled so no bit of that whitespace is compiled in to machine code and stufff

# apache - 如何保护图片不被盗链？

> ID：12324226
> 
> 赞同：0
> 
> 时间：2012-09-07T19:27:26.540
> 
> 标签：apache, .htaccess, hotlinking

我已经在 htaccess 中尝试了以下代码来阻止我的图像被热链接，但它不起作用。

```
SetEnvIfNoCase Referer "^http://www.example.com/" locally_linked=1
SetEnvIfNoCase Referer "^http://www.example.comm$" locally_linked=1
SetEnvIfNoCase Referer "^http://example.com/" locally_linked=1
SetEnvIfNoCase Referer "^http://example.com$" locally_linked=1
SetEnvIfNoCase Referer "^$" locally_linked=1
<FilesMatch "\.(gif|png|jpe?g|css|js)$">
  Order Allow,Deny
  Allow from env=locally_linked=1
</FilesMatch> 
```

谁能帮助我如何防止盗链？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T20:30:49.197

这将在其热链接时显示固定图像。（该图像可能有一条消息，不允许进行盗链...）

```
RewriteCond %{HTTP_REFERER} !^$
RewriteCond %{HTTP_REFERER} !^http://(www\.)?mydomain\.com [NC]
RewriteRule .*\.(jpe?g|gif|bmp|png)$ /images/nohotlink.jpg [L] 
```

它检查 Refererr 不是什么都没有，并且 referer 与 mydomain 不匹配，然后它以 image 响应`nohotlink.jpg`。

要更好地了解防盗链，请参阅这些 SO 线程：
[Apache .htaccess hotlinking redirect](https://stackoverflow.com/questions/1126552/apache-htaccess-hotlinking-redirect?rq=1)
[Apache Hotlink Protection for Download Folder](https://stackoverflow.com/questions/1775582/apache-hotlink-protection-for-download-folder?rq=1)
A Basic tutorial [http://altlab.com/htaccess_tutorial.html](http://altlab.com/htaccess_tutorial.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-01T04:00:13.220

除非引用者来自`example.com`.

```
SetEnvIf Referer example\.com localreferer
<FilesMatch \.(jpg|png|gif|css|js|pdf|doc|xls|txt)$>
    Order deny,allow
    Deny from all
    Allow from env=localreferer
</FilesMatch> 
```

# perl - perl：捕获 STDOUT- 日志文件以二进制结尾

> ID：12324228
> 
> 赞同：2
> 
> 时间：2012-09-07T19:27:46.433
> 
> 标签：perl, encoding, stdout

我编写了一个脚本，将数据输入到一个名为 ctffind 的 exe 程序中。exe 程序将一堆数据输出到我试图在日志文件中捕获的屏幕。

这是我现在正在使用的

```
my $logout = logfile 
open STDOUT, '>>', "$logout";
open my $PIPE1, '|-', '/opt/ctf/ctffind3_mp.exe' or die $!; 
```

它可以将屏幕上出现的所有内容输出到日志文件中。

如果我`more $logfile`按预期显示文件，它大约有 5000 行长，并且大约有 50 行包含字符串“最终值”。在我的下一步中，我`grep "final values" logfile`认为日志文件是一个二进制文件并且不起作用，而是返回：

```
Binary file logfile matches 
```

如何设置它以便正确编码日志文件？ctffind.exe 在运行时也会生成二进制文件，这是问题的一部分吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-08T01:43:59.693

感谢评论者的建议，我找到了两种不同的方法来解决问题：

1.  一个可以更改`grep logfile`为`grep -a logfile`.

2.  可以`strings logfile logfile2`用来制作可用版本的日志文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T19:55:11.900

文件第一个块中的 Ascii NUL (\000) 足以让 Perl 将文件称为“二进制”文件。

```
echo "hello world\000" > myfile
perl -E '$f=shift;open $fh,"<",$f or die;say -e $f && -B $f ? "binary":"text"' myfile 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-07T21:26:55.920

可能`ctffind3_mp.exe`有代码在其中进行屏幕格式化，例如更改颜色、加粗、清除屏幕等。有几种方法可以消除这些：

*   您可以通过管道`cat -v`将所有不可打印的内容转换为 ASCII 表示形式（例如 NUL 变为`^@`）。
*   可能有用于从文本中去除 ANSI 或 VT100 序列的特定实用程序——尝试询问超级用户。
*   您可以尝试设置`$TERM`（或在 perl 中`$ENV{'TERM'}`）以`unknown`希望程序不再发出任何特殊的颜色、粗体等序列。

# hadoop - hadoop 创建了找不到的目录

> ID：12324229
> 
> 赞同：0
> 
> 时间：2012-09-07T19:27:53.127
> 
> 标签：hadoop, mkdir

我使用以下 hadoop 命令创建目录

```
 hdfs dfs -mkdir /tmp/testing/morehere1 
```

我收到以下消息：

```
 log4j:WARN No appenders could be found for logger (org.apache.hadoop.metrics2.lib.MutableMetricsFactory). 
```

log4j:WARN 请正确初始化 log4j 系统。

不理解错误，我再次运行命令，返回此消息：

```
 log4j:WARN No appenders could be found for logger (org.apache.hadoop.metrics2.lib.MutableMetricsFactory).
 log4j:WARN Please initialize the log4j system properly.
 mkdir: `/tmp/testing/morehere2': File exists 
```

然后当我尝试转到刚刚创建的目录时，它不存在。

```
cd /tmp/testing/morehere2
 -bash: cd: /tmp/testing/morehere2: No such file or directory 
```

任何想法我做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-08T06:04:12.797

```
 hdfs dfs -mkdir /tmp/testing/morehere1 
```

此命令在 hdfs 中创建了一个目录。不要担心 log4j 警告。该命令成功地创建了目录。这就是你得到错误 mkdir:`/tmp/testing/morehere2': File exists`你第二次尝试命令的原因。

以下命令将不起作用，因为该目录不是在本地文件系统中创建的，而是在 hdfs 中创建的。

```
cd /tmp/testing/morehere2 
```

使用以下命令检查 hdfs 中创建的目录：

```
hdfs dfs -ls /tmp/testing 
```

您应该可以在那里看到新目录。

关于 log4j 警告：您可以忽略它，因为它不会导致您的 hadoop 命令失败。但是如果你想更正它，你可以添加一个 File appender 到 log4j.properties。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T20:24:31.567

请记住，HDFS 和本地文件系统之间存在差异。您发布的第一行在 HDFS 中创建了一个目录，而不是在您的本地系统上。所以你不能直接 cd 到它或 ls 它或任何东西；如果你想访问它，你必须通过hadoop。记录到 HDFS 也非常罕见，因为文件附加从未得到很好的支持。我怀疑您实际上想在本地创建该目录，这可能是您的问题的一部分。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-10T03:47:00.543

如果您的 MR 代码之前运行良好并且现在显示此 log4j 错误，则重新启动所有 hadoop 守护程序。它可以解决您的问题，因为它可以解决我的问题:)

# c++ - 从附属 DLL 加载“特殊”MFC 控件

> ID：12324231
> 
> 赞同：0
> 
> 时间：2012-09-07T19:28:11.937
> 
> 标签：c++, visual-studio-2010, mfc

我有一个使用卫星 DLL 的 MFC 应用程序以支持多语言。我正在使用 Visual Studio 2010。

我能够毫无问题地更改应用程序核心部分的语言。当我尝试加载包含“特殊”MFC 控件（、、等）的无模式对话框时，出现`CMFCColorButton`问题`CVSListBox`。

问题出现在以下语句中：

```
m_dlg->Create(SOME_IID, this); // returns false 
```

我应该如何从附属 DLL 加载“特殊”MFC 控件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T18:58:07.153

您必须在到达之前注册他们的课程`OnCreate()`。对于自定义控件，这通常在构造函数中完成：

```
CMyClass::CMyClass()
{
    // Pseudo code
    m_mfcColorButton.RegisterWindowClass(AfxGetResourceHandle());
} 
```

对于 MFC 控件，我敢打赌有一个需要调用的初始化函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-22T10:41:10.007

我遇到了同样的问题：如果我使用本地化资源 dll，我的 CDialog - 派生类在 DoModal 中失败。它包含资源模板上的 CMFCColorButton。

我的解决方案是调用**资源 dll** AfxRegisterMFCCtrlClasses();

```
class CMyApp: public CWinApp
{
    BOOL InitInstance()
    {
        AfxRegisterMFCCtrlClasses();
        return CWinApp::InitInstance();
    }
}; 
```

# wordpress - Wordpress 查询以计算特定类别中每天的更新帖子

> ID：12324232
> 
> 赞同：0
> 
> 时间：2012-09-07T19:28:16.297
> 
> 标签：wordpress, categories

任何人都知道如何使用 wordpress 查询在特定类别中计算每天的更新帖子（例如：在这一天/日期）？

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T17:20:01.213

我不知道我是否完全理解您的问题，您是否想要统计在特定日期/日期发布的特定类别的帖子？

在这种情况下，您只需创建一个[WP_Query](http://codex.wordpress.org/Class_Reference/WP_Query)实例并传入您想要查看的[时间参数](http://codex.wordpress.org/Class_Reference/WP_Query#Time_Parameters)和[类别。](http://codex.wordpress.org/Class_Reference/WP_Query#Category_Parameters)

就像是，

```
<?php
$today = getdate();
$args = array('year' => $today["year"], 'monthnum' => $today["mon"], 'day' => $today["mday"], 'category_name' => 'Uncategorized');
$search = new WP_Query($args);
$count = $search->found_posts;
?> 
```

如果您想根据修改日期返回帖子（您声明每天更新帖子，我不明白），那么您需要添加一个“posts_where”过滤器而不是 args 的时间参数。

有关示例代码和使用说明，请参见上面的时间参数链接 - 但在稍微修改其中一个示例时，您可以创建类似这样的内容。

```
// Create a new filtering function that will add our where clause to the query
function filter_where( $where = '' ) {
$where .= " AND post_modified >= '2010-03-01' AND post_modified < '2010-03-16'";
return $where;
}

add_filter( 'posts_where', 'filter_where' );
$query = new WP_Query( $query_string );
remove_filter( 'posts_where', 'filter_where' ); 
```

# sql - 更改基于列表的分区的分区键

> ID：12324247
> 
> 赞同：0
> 
> 时间：2012-09-07T19:29:29.573
> 
> 标签：sql, oracle, oracle11g

我很好奇这是否可能。

如果我当前的分区有一个基于的列表分区，`col1`并且想将我的分区结构移动到基于的分区`col2`，我是否需要重新创建表，删除旧表并重命名新表？

或者有没有更简单的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T08:13:34.840

您确实需要物理移动这些行，因为关于分区的全部要点是这些行位于同一位置。但是，有一种更简单的方法可以实现这一点。我认为在线重新定义是解决这个问题的方法。它不仅需要您提供较少的保姆服务，它还维护了表格的临时版本，允许用户继续使用表格。

简而言之，过程是：使用新的分区方案创建表的空版本，并让 DBMS_REDEFINITION 发挥它的魔力。 [了解更多](http://docs.oracle.com/cd/B28359_01/server.111/b28310/tables007.htm#i1006821)。

（注意：我从未真正使用过这种方法来更改分区键：但我已经用它来将非分区表转换为分区表，我不明白为什么它不应该也适用于您的场景） .

# java - 获取一个字符串在另一个字符串中出现的次数

> ID：12324249
> 
> 赞同：5
> 
> 时间：2012-09-07T19:29:43.863
> 
> 标签：java, string, indexof

我需要输入两个字符串，第一个是任何单词，第二个字符串是前一个字符串的一部分，我需要输出第二个字符串出现的次数。例如：字符串 1 = CATSATONTHEMAT 字符串 2 = AT。输出将是 3，因为 AT 在 CATSATONTHEMAT 中出现了 3 次。这是我的代码：

```
public static void main(String[] args) {
    Scanner sc = new Scanner(System.in);

    String word8 = sc.next();
    String word9 = sc.next();
    int occurences = word8.indexOf(word9);
    System.out.println(occurences);
} 
```

`1`当我使用此代码时它会输出。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-07T19:32:06.690

有趣的解决方案：

```
public static int countOccurrences(String main, String sub) {
    return (main.length() - main.replace(sub, "").length()) / sub.length();
} 
```

基本上我们在这里所做的是`main`从删除所有 in 实例所产生的字符串长度`sub`中减去长度`main`- 然后我们将此数字除以长度`sub`以确定删除了多少次出现`sub`，从而得到我们的答案。

所以最后你会得到这样的东西：

```
public static void main(String[] args) {
    Scanner sc = new Scanner(System.in);

    String word8 = sc.next();
    String word9 = sc.next();
    int occurrences = countOccurrences(word8, word9);
    System.out.println(occurrences);

    sc.close();
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-07T19:35:53.003

你也可以试试：

```
public static void main(String[] args) {
    Scanner sc = new Scanner(System.in);

    String word8 = sc.nextLine();
    String word9 = sc.nextLine();
    int index = word8.indexOf(word9);
    sc.close();
    int occurrences = 0;
    while (index != -1) {
        occurrences++;
        word8 = word8.substring(index + 1);
        index = word8.indexOf(word9);
    }
    System.out.println("No of " + word9 + " in the input is : " + occurrences);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-11-27T19:44:25.673

为什么没有人发布最明显和最快速的解决方案？

```
int occurrences(String str, String substr) {
    int occurrences = 0;
    int index = str.indexOf(substr);
    while (index != -1) {
        occurrences++;
        index = str.indexOf(substr, index + 1);
    }
    return occurrences;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-24T15:15:50.443

另外一个选项：

```
public static void main(String[] args) {
    Scanner sc = new Scanner(System.in);

    String word8 = sc.next();
    String word9 = sc.next();
    int occurences = word8.split(word9).length;
    if (word8.startsWith(word9)) occurences++;
    if (word8.endsWith(word9)) occurences++;
    System.out.println(occurences);

    sc.close();
} 
```

`startsWith`and`endsWith`是必需的，因为`split()`省略了尾随的空字符串。

# php - mysql 检索用户的出生日期并填充选项标签

> ID：12324254
> 
> 赞同：0
> 
> 时间：2012-09-07T19:29:59.237
> 
> 标签：php, mysql, date

在用户输入出生日期后，我可以从数据库中检索出生日期并将其填充到选项标签中。但是，如果用户更新表单中的任何其他内容，则选项值开始使用错误的出生日期更新数据库。由于某种原因，它似乎在倒数。我该如何解决这个问题？

```
if($_POST){
$dob = date('Y-m-d',strtotime($_POST['year']."-". $_POST['month']."-".$_POST['day'])); 

$retur = $userObj->updateProfile($dob);
}

public function updateProfile($dob){
$db = db_mysql::getInstance();
$qr = $db->query("UPDATE ".USERS." SET dob = $dob WHERE id = '".$udata."'") or die(mysql_error()); 

    return $udata;
 }
<label>Date of Birth:</label>
<select style="background-color: #D6CFD4;" name="month">
 <option value="{date('F',strtotime($udata.dob))}">{date('F',strtotime($udata.dob))}</option>
 <option value="01">January</option>
 <option value="02">Febuary</option>
<select style="background-color: #D6CFD4;" name="day">
 <option value="{date('d',strtotime($udata.dob))}">{date('d',strtotime($udata.dob))}</option>
 <option value="01">01</option>
 <option value="02">02</option>
<select style="background-color: #D6CFD4;" name="year">
 <option value="{date('Y',strtotime($udata.dob))}">{date('Y',strtotime($udata.dob))}</option>
 <option value="2012">2012</option>
 <option value="2011">2011</option> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T19:59:28.113

您提供的数据对您的查询不是很清楚，但这里是：

$dob 是我理解的字符串，格式为 YYYY-MM-DD。updateProfile 似乎没问题，但我不知道 $udata 来自哪里。如果您发布的是完整功能，则 $udata 始终为空并且您返回空。

至于模板，我不知道您如何为选项按钮生成 HTML。但是，您似乎确实可以覆盖现有选项，即如果该月份选择用户在二月出生怎么办。第一行将与第三行重复：

```
<option value="{date('F',strtotime($udata.dob))}">{date('F',strtotime($udata.dob))}</option>
<option value="01">January</option>
<option value="02">Febuary</option> 
```

几个建议：

您似乎没有在检查输入。无论您认为您的应用程序有多安全，总有人可能会找到干扰它的方法。使用 $_POST['year'] 等而不清理它们甚至将它们转换为整数并不理想。

您没有使用绑定参数，这是确保您不会受到 SQL 注入攻击的必要条件。这可能有点牵强，但如果 updateProfile 以 $dob 的形式接收到它：

```
$dob = "1;DROP users; --" 
```

那么你就有麻烦了。

最后的建议是检查您的选择语句。我会这样做：

```
<select style="background-color: #D6CFD4;" name="day">
    <?php 
        for ($i = 1; $i < 32; $i++) {
            $dob_day  = (int) date('d', strtotime($udata.dob));
            $selected = ($i == $dob_day) ? " selected='selected'" : '';

            echo "<option value='{$i}'{$selected}>{$i}</option>";
        }
    ?>
</select> 
```

您可以针对月份和年份重复该过程。这个过程虽然不一定会创建一个有效的日期。例如，如果有人选择 31 作为当天，02 作为月份，即二月。

最后的建议是（如果可能的话）使用可以有效地为您完成所有艰苦工作的日期时间控件。您所要做的就是将 dob 字符串传递给它，当用户更新他们的 dob 时，它会发回您的应用可以轻松解析的数据，更重要的是日期将始终有效，即不可能在 2 月 31 日至少来自用户界面。[例子](https://stackoverflow.com/questions/1328025/jquery-ui-datepicker-change-date-format)

HTH。

# ruby-on-rails - 如何以嵌套形式获取子索引？

> ID：12324265
> 
> 赞同：1
> 
> 时间：2012-09-07T19:30:58.200
> 
> 标签：ruby-on-rails, ruby

我有一个表单（我正在使用 twitter bootstrap 和 formtastic），其中 Member 是父模型，而 Caregiver 是子模型。

所以我在`new`MembersController 的操作中有这个...

```
@member = Member.new
3.times {@member.caregivers.build} 
```

然后，在表格中，我有这个......

```
<%= f.fields_for :caregivers do |builder| %>
  <%= render 'caregiver_fields', f: builder %>
<% end %> 
```

**如何访问 _caregiver_fields.html.erb 部分中的子索引？**

我需要它，因为在表单中，我想添加嵌套模型的编号，例如...

```
Member Name: _________

1\. Caregiver Name: ______
   Additional fields...

2\. Caregiver Name: ______
   Additional fields...

3\. Caregiver Name: ______
   Additional fields... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T19:52:25.230

您可以通过使用`index`方法 from`Array`和局部变量来完成此任务：

```
<%= render 'caregiver_fields', 
  :locals => { f: builder, index: @member.caregivers.index[builder] } %> 
```

在部分情况下，它将是这样的：

```
<h><%= index %></h> 
```

# ruby-on-rails-3 - ActiveRecord“选择”模型方法的结果

> ID：12324269
> 
> 赞同：0
> 
> 时间：2012-09-07T19:31:18.417
> 
> 标签：ruby-on-rails-3, activerecord

我有一个从 Soundcloud 中提取音乐的 Rails 应用程序。此数据包含一个标题，我将其另存为，`mix.sc_title`但它的格式并不总是正确的。我在我的 Mix 模型上添加了一个附加属性，我称之为`mix.override_title`

为了在我的网站上显示，我想在可用的情况下使用覆盖标题，并在所有其他情况下使用 sc_title。

我有一个混合模型方法可以为我做这件事

```
def display_title
    override_title.blank? sc_title : override_title
end 
```

Mixes#index 抓取`@mixes = Mix.where(:active => true)`和 mixes/index.html.erb 看起来像这样：

```
<ul>
<% @mixes.each do |mix| %>
    <li><%= link_to mix.display_title, mix %></li>
<% end %>
</ul> 
```

正如你所看到的，我没有直接使用任何混合属性，所以当我去数据库时我受到了巨大的打击，我实际上并没有从中受益。

有没有更精简的方法来获取我需要的信息？( `mix.display_title`)

我试过`Mix.select("display_title").where(:active => true)`但失败了，因为 display_title 不是真正的数据库列

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T19:36:55.520

您可以这样做`Mix.select("sc_title, override_title").where(:active => true)`并且它会起作用，因为这些是该方法使用的实际字段。我真的不认为获得额外的属性会给你带来那么*多*的数据库命中，但有时只选择你需要的东西可能是有益的。

当您开始链接更多`Arel`命令时，请考虑将 select 放入模型方法中：

```
def select_active_titles
  select("sc_title, override_title").where(:active => true)
end 
```

编辑：您的`link_to`助手还秘密调用`mix.id`链接到正确的组合，因此请确保它正在工作，如果没有，请将 id 添加到所选属性列表中。

# ios - 如何使用多个变换为 CATransform3D 设置动画？

> ID：12324270
> 
> 赞同：4
> 
> 时间：2012-09-07T19:31:18.987
> 
> 标签：ios, core-animation, core-graphics, uiviewanimation

基本上，我正在围绕一个点旋转一层：

```
CATransform3D transform = CATransform3DIdentity;
transform.m34 = 1.0 / -500;
transform = CATransform3DTranslate(transform, rotationPoint.x-center.x, rotationPoint.y-center.y, 0.0);
transform = CATransform3DRotate(transform, (rotationAngleFor) * M_PI / 180.0f, 0.0, 1.0, 0);
transform = CATransform3DTranslate(transform, center.x-rotationPoint.x, center.y-rotationPoint.y, 0.0); 
```

我还创建了一个图层，将其添加到更大的图层，然后对其应用变换：

```
[self.layer addSublayer:myLayer];
myLayer.transform = transform; 
```

如何动画化这个？

**注意 -**把它放在`UIView`动画块中是行不通的。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-07T20:53:40.210

**编辑：**正如@DuncanC 指出的，我的描述与实际代码不符。

您可以`CABasicAnimation`按如下方式使用添加到图层的 。

```
CABasicAnimation *transformAnimation = [CABasicAnimation animationWithKeyPath: @"transform"];

    <here goes your definition of transform>

transformAnimation.toValue = [NSValue valueWithCATransform3D:newTransform];
transformAnimation.duration = 10;
[self.layer addAnimation:transformAnimation forKey:@"transform"]; 
```

这个动画执行了`transform`图层属性从图层属性的原始值`transform`到`newTransform`变换的连续变化。更改需要 10 秒。

# php - PHP jQuery Chat - 用户正在输入功能

> ID：12324271
> 
> 赞同：0
> 
> 时间：2012-09-07T19:31:40.093
> 
> 标签：php, jquery, mysql, memcached, chat

> **可能重复：**
> [如何在聊天中向所有人发出实时“用户正在输入”通知](https://stackoverflow.com/questions/10568619/how-to-make-a-real-time-user-is-typing-notice-to-all-in-chat)

我正在开发 PHP MySQL jQuery/Ajax 聊天，并试图用一些花哨的功能来增强它，比如用户正在输入...消息

我发现很多主题用户描述了如何发出请求以通知服务器用户正在输入消息，但这不是问题。我在下一步需要帮助:) 如何使用服务器将 isTyping 变量从客户端“移交”到客户端？我想尽量避免存储它，因为它可能会用不必要的数据压倒数据库引擎。有没有办法只使用服务器RAM？这些数据并不重要，因此丢失它的可能性并不大。Memcached 也是一种选择，但最好不要。

提前 Tnx

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-07T19:39:46.737

在我看来，PHP/MySQL 不是开发聊天的正确堆栈。

这是因为这样的堆栈是**无状态**的，并且无法跟踪用户事件：它实际上可以使用会话和数据库，但这意味着继续从客户端**轮询**以检索状态的更改，这意味着：

*   有新消息给我吗？
*   嘿，有新消息给我吗？
*   好心，告诉我是否有任何消息给我。

最好的方法是使用[socket.io](http://socket.io/)而不是[node.js](http://nodejs.org/)：长话短说，您在客户端和服务器之间有一个持久连接[使用 WebSockets，长轮询和此类技术]，它成为所有事件侦听器的简单设置应用程序的侧面。

[你可以在这里找到一个活生生的例子](http://chat.nodejs.org/)。

# python - 为什么使用属性而不是方法可以显着提高 Python 速度

> ID：12324272
> 
> 赞同：7
> 
> 时间：2012-09-07T19:31:50.337
> 
> 标签：python, regex, performance

我一直在试验一个进行模式匹配的类。我的班级看起来像这样：

```
class Matcher(object):
  def __init__(self, pattern):
    self._re = re.compile(pattern)

  def match(self, value):
    return self._re.match(value) 
```

总而言之，我的脚本运行大约需要 45 秒。作为实验，我将代码更改为：

```
class Matcher(object):
  def __init__(self, pattern):
    self._re = re.compile(pattern)
    self.match = self._re.match 
```

运行此脚本需要 37 秒。无论我重复这个过程多少次，我都看到了同样显着的性能提升。通过 cProfile 运行它会显示如下内容：

```
 ncalls  tottime  percall  cumtime  percall filename:lineno(function)
 46100979   14.356    0.000   14.356    0.000 {method 'match' of '_sre.SRE_Pattern' objects}
 44839409    9.287    0.000   20.031    0.000 matcher.py:266(match) 
```

为什么 match 方法在运行时间上增加了 9.2 秒？~~最令人沮丧的部分是我试图重新创建一个简单的案例并且无法做到。我在这里想念什么？~~我的简单测试用例有一个错误！现在它模仿了我看到的行为：

```
import re
import sys
import time

class X(object):
  def __init__(self):
    self._re = re.compile('.*a')

  def match(self, value):
    return self._re.match(value)

class Y(object):
  def __init__(self):
    self._re = re.compile('ba')
    self.match = self._re.match

inp = 'ba'
x = X()
y = Y()

sys.stdout.write("Testing with a method...")
sys.stdout.flush()
start = time.time()
for i in range(100000000):
  m = x.match(inp)
end = time.time()
sys.stdout.write("Done: "+str(end-start)+"\n")

sys.stdout.write("Testing with an attribute...")
sys.stdout.flush()
start = time.time()
for i in range(100000000):
  m = y.match(inp)
end = time.time()
sys.stdout.write("Done: "+str(end-start)+"\n") 
```

输出：

```
$ python speedtest.py 
Testing with a method...Done: 50.6646981239
Testing with an attribute...Done: 35.5526258945 
```

作为参考，使用 pyp 两者都快得多，但在使用属性而不是方法运行时仍然显示出显着的收益*：*

```
$ pypy speedtest.py 
Testing with a method...Done: 6.15996003151
Testing with an attribute...Done: 3.57215714455 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-07T19:35:18.140

这可能主要是附加函数调用的开销。调用 Python 函数在性能方面相对昂贵，因为需要设置额外的堆栈框架等。这是一个展示类似性能的简单示例：

```
>>> timeit.timeit("f()", "g = (lambda: 1); f = lambda: g()")
0.2858083918486847
>>> timeit.timeit("f()", "f = lambda: 1")
0.13749289364989004 
```

在您的方法中执行两个额外的属性查找还有额外的成本：查找`_re`，`self`然后查找`match`该`_re`对象。但是，这可能是一个较小的组件，因为在 Python 中字典查找非常快。（我`timeit`上面的例子显示了相当糟糕的性能，即使在双重调用版本中只有一个额外的名称查找。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T19:33:58.767

第一个版本每次都是额外的函数调用。这会产生一些开销。

# jquery - 如何将数据从我的 JQGrid 发送到我的查询以删除一行？

> ID：12324279
> 
> 赞同：1
> 
> 时间：2012-09-07T19:32:16.030
> 
> 标签：jquery, jqgrid, coldfusion

我无法从我的 JQGrid 中删除一行，因为我不知道如何将我需要的数据发送到保存 MySQL 的文件。我正在使用 ColdFusion。

在我的 JQGrid 文件中，我的 editurl 参数设置如下：

```
editurl: url+"process_delete.cfc?method=process_delete&region="+region, 
```

在包含我的 MySQL 查询的 process_delete.cfc 文件中，我有这个：

```
DELETE FROM awesome_table
WHERE region = '#region#' AND Field1 = '??????' AND Field2 = '???????' 
```

我知道 MySQL 正在被访问——那里没有问题。此外，该区域也可以从 URL 中很好地填充。那里没有问题。问题是我无法弄清楚如何访问我试图删除的行中的数据以填充 Field1 和 Field2，从而有效地完成查询。任何人都可以帮忙吗？谢谢。

对于删除，我有以下代码：

```
jQuery.jgrid.del = {
            caption: "Delete Item",
            msg: "Delete record?",
            bSubmit: "Delete",
            bCancel: "Cancel",
            beforeSubmit: function(postdata, formid) { 
                var rowid = $("#mygrid").getGridParam('selrow');
                $("#mygrid").jqGrid('saveRow',rowid,false,'clientArray');
                var rowvalues = $("#mygrid").getRowData(rowid);
                return [true, ""]
            } 
```

当我`rowid`在警报消息框中显示时，我得到“null”，所以也许这就是我的问题所在。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-08T12:49:36.330

您可以使用`delData`与属性`field1`并`field2`定义为函数或使用`onclickSubmit`或`beforeSubmit`在其中您可以动态修改`URL`DELETE 操作中使用的或使用`serializeDelData`回调。最好的方法可能取决于您使用的其他选项（例如取决于`mtype`用于删除操作）。在[答案](https://stackoverflow.com/a/6275312/315935)中，我包括了对其他答案的引用，这些答案详细显示了所有方法。

例如，您可以使用

```
onclickSubmit: function (options, rowid) {
    // we suppose that use don't use multiselect: true option
    // in the case rowid parameter if the string with the id of the
    // deleted row

    // we can get the data about the deleted row with respect of
    // getCell, getLocalRow or getRowData methods
    var rowData = $(this).jqGrid("getRowData", rowid);

    // now we can modify the URL used in the Delete operation
    options.url += "?" + $.param({
        field1: rowData.field1,
        field2: rowData.field2
    });

    return {}; // you can return additional data which will be sent to the server
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T04:07:30.927

如果没有看到从 CFC 返回以填充网格的代码，则真的无济于事。但是，一种方法是访问行的 id 并将其放入一些 HTML 元素中，例如锚标记，例如：

如果您正在创建一个循环来准备数据

```
//Some loop
<cfset dataRows[i]['id'] = #yourqueryId# />
<cfset dataRows[i]['cell'] = "<a href="##" class="delete" id="#yourqueryId#">Delete</a>" /> 
```

然后将 JSON 对象传递给 CFM 文件

```
 <cfset JSONReturn = {total=#totalPages#,page=#page#,records=#recordcount#,rows=dataRows} /> 
```

然后在显示网格的页面中添加一个处理锚标记点击的事件

```
$('a.delete').on('click', function(){
    var id = $(this).attr('id');
    //do something with the id
}) 
```

希望有帮助！

# mysql - MySQL 从多列中选择和计算值

> ID：12324280
> 
> 赞同：7
> 
> 时间：2012-09-07T19:32:19.047
> 
> 标签：mysql, select

我正在尝试创建一个 mysql 选择查询，该查询根据其他两个字段计算一个值。

这是我的查询，

```
SELECT request_id, (
unit_cost * quantity
) AS claim_value
FROM  `xx_non_part_usage` 
WHERE request_id = request_id
GROUP BY request_id 
```

上面的查询只带回其中一行的 total_value。

例如 - 这是一些示例数据，

```
ID      REQUEST_ID      QUANTITY        UNIT_VALUE
1       10001           2.0             3.00
2       10001           1.0             19.00
3       10003           0.5             18.00
4       10001           10.0            12.00
5       10003           0.75            6.76
6       10002           9.0             3.20
7       10001           0.10            13.80
8       10001           1.0             90.99
9       10004           6.75            3.00
10      10009           3.23            87.00 
```

如您所见，有几行 REQUEST_ID '10001'。查询需要做的是 REQUEST_ID * QUANTITY 然后对它们进行分组，以便它只返回最终值价格（将乘法和 (REQUEST_ID * QUANTITY) 的所有结果相加。

这是我希望得到的预期结果（REQUEST_ID 10003 上的不同示例，

```
REQUEST_ID      TOTAL_VALUE
10003           14.07
10004           20.75
...
... 
```

先感谢您。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-07T19:37:18.573

为什么使用“where”子句？

```
mysql> select * from test;
+------------+------------+----------+
| request_id | unit_value | quantity |
+------------+------------+----------+
|          1 |          3 |        2 |
|          1 |         19 |        1 |
|          2 |       6.76 |     0.75 |
|          2 |         18 |      0.5 |
+------------+------------+----------+
4 rows in set (0.00 sec)

mysql> SELECT request_id, sum(unit_value * quantity) as x from test group by request_id;
+------------+--------------------+
| request_id | x                  |
+------------+--------------------+
|          1 |                 25 |
|          2 | 14.070000171661377 |
+------------+--------------------+
2 rows in set (0.00 sec) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-07T19:38:51.117

```
ID REQUEST_ID CLAIM_VALUE
3 10003 9.00
5 10003 5.07
```

你想用`SUM`

```
SELECT 
  request_id,
  SUM(unit_cost * quantity) AS claim_value
FROM  `xx_non_part_usage` 
WHERE request_id = request_id
GROUP BY request_id 
```

`GROUP BY`除非您使用聚合函数，否则不应使用。

# shopify - 如何检查shopify会话是否已过期？

> ID：12324281
> 
> 赞同：0
> 
> 时间：2012-09-07T19:32:20.093
> 
> 标签：shopify

说我的代码中有这个调用：

```
`products = shopify.Product.find()` 
```

`如果我刚刚登录，它可以工作，但一段时间后它开始失败并显示错误消息`AttributeError: 'NoneType' object has no attribute 'find'`。我认为这是因为会话过期而我的代码没有检查。

有没有办法检查shopify会话是否已过期？我将商店 URL 和身份验证令牌存储在我的 webapp2 会话中，因此：

```
`self.session['shopify'] = {
    'shop_url': shopify_session.url,
    'access_token': shopify_session.token
    }` 
```

`是否有任何其他属性需要存储在我的 Web 会话中，可用于检查 shopify 会话是否已过期？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-18T06:53:04.890

**Shopify** `access_token`永不过期，过期或被重置的是**您的**会话。

如果您使用的是共享主机，那么重置会话的可能性要高得多，因为它们非常频繁地重置应用程序池。

如果是这种情况，那么您应该考虑使用持久会话而不是内存会话。如果您使用的是 .NET，那么您可以阅读[ASP.NET State Management](http://msdn.microsoft.com/en-us/library/z1hkazw7.aspx)和[Configure SQL Server for ASP.NET SQL Server Session State](http://support.microsoft.com/kb/317604)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-01-12T10:05:57.337

这取决于你的访问模式，如果你想要一个永久的访问令牌，你应该使用**离线访问**模式，在线访问模式在用户会话过期后过期。

[https://shopify.dev/concepts/about-apis/authentication#api-access-modes](https://shopify.dev/concepts/about-apis/authentication#api-access-modes)``

# asp.net - textbox.text 更改后仍保留旧值

> ID：12324287
> 
> 赞同：5
> 
> 时间：2012-09-07T19:32:50.477
> 
> 标签：asp.net, vb.net

我有一个带有表单的 asp.net 网页，其中包含一系列文本框和复选框，这些文本框和复选框在页面加载时填充了来自数据库的数据。我打算让用户可以自由更改文本或检查框的值，然后按下按钮。按下按钮后，将从他们编辑的框中提取信息，然后数据库将根据所做的更改进行更新。问题是， textbox.text 和 checkbox.checked 仍然包含最初在页面加载子中加载到其中的值，即使复选框 val 的文本已更改。

到目前为止，这是我的代码：

```
 Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load
        Dim lq2 As New lqDFDataContext
        Dim var = lq2.admin_GetFeatured().ToList()
        Dim i As Integer = 1

        For Each f In var
            If i = 1 Then
                isChanged.featuredID1 = f.featuredID
                title1.Text = f.title
                text1.Text = f.text
                imageURL1.Text = f.imageURL
                login1.Checked = f.loginPage
                index1.Checked = f.indexPage
                mobile1.Checked = f.mobilePage
                priority1.Text = Str(f.priority)
            End If

            If i = 2 Then
                isChanged.featuredID2 = f.featuredID
                title2.Text = f.title
                text2.Text = f.text
                imageURL2.Text = f.imageURL
                login2.Checked = f.loginPage
                index2.Checked = f.indexPage
                mobile2.Checked = f.mobilePage
                priority2.Text = Str(f.priority)
            End If

            If i = 3 Then
                isChanged.featuredID3 = f.featuredID
                title3.Text = f.title
                text3.Text = f.text
                imageURL3.Text = f.imageURL
                login3.Checked = f.loginPage
                index3.Checked = f.indexPage
                mobile3.Checked = f.mobilePage
                priority3.Text = Str(f.priority)
            End If

            If i = 4 Then
                isChanged.featuredID4 = f.featuredID
                title4.Text = f.title
                text4.Text = f.text
                imageURL4.Text = f.imageURL
                login4.Checked = f.loginPage
                index4.Checked = f.indexPage
                mobile4.Checked = f.mobilePage
                priority4.Text = Str(f.priority)
            End If

            If i = 5 Then
                isChanged.featuredID5 = f.featuredID
                title5.Text = f.title
                text5.Text = f.text
                imageURL5.Text = f.imageURL
                login5.Checked = f.loginPage
                index5.Checked = f.indexPage
                mobile5.Checked = f.mobilePage
                priority5.Text = Str(f.priority)
            End If

            If i = 6 Then
                isChanged.featuredID6 = f.featuredID
                title6.Text = f.title
                text6.Text = f.text
                imageURL6.Text = f.imageURL
                login6.Checked = f.loginPage
                index6.Checked = f.indexPage
                mobile6.Checked = f.mobilePage
                priority6.Text = Str(f.priority)
            End If

            i = i + 1

        Next
    End Sub

    Protected Sub featuredSubmit_Click(ByVal sender As Object, ByVal e As System.EventArgs) Handles featuredSubmit.Click
        Dim lq As New lqDFDataContext

        If isChanged1.Checked Then
            lq.admin_RemoveFeatured(isChanged.featuredID1)
            lq.admin_AddFeatured(title1.Text, text1.Text, imageURL1.Text, login1.Checked, index1.Checked, mobile1.Checked, Integer.Parse(priority1.Text))

        End If

        If isChanged2.Checked Then
            lq.admin_RemoveFeatured(isChanged.featuredID2)
            lq.admin_AddFeatured(title2.Text, text2.Text, imageURL2.Text, login2.Checked, index2.Checked, mobile2.Checked, Integer.Parse(priority2.Text))

        End If

        If isChanged3.Checked Then
            lq.admin_RemoveFeatured(isChanged.featuredID3)
            lq.admin_AddFeatured(title3.Text, text3.Text, imageURL3.Text, login3.Checked, index3.Checked, mobile3.Checked, Integer.Parse(priority3.Text))

        End If

        If isChanged4.Checked Then
            lq.admin_RemoveFeatured(isChanged.featuredID4)
            lq.admin_AddFeatured(title4.Text, text4.Text, imageURL4.Text, login4.Checked, index4.Checked, mobile4.Checked, Integer.Parse(priority4.Text))

        End If

        If isChanged5.Checked Then
            lq.admin_RemoveFeatured(isChanged.featuredID5)
            lq.admin_AddFeatured(title5.Text, text5.Text, imageURL5.Text, login5.Checked, index5.Checked, mobile5.Checked, Integer.Parse(priority5.Text))

        End If

        If isChanged6.Checked Then
            lq.admin_RemoveFeatured(isChanged.featuredID6)
            lq.admin_AddFeatured(title6.Text, text6.Text, imageURL6.Text, login6.Checked, index6.Checked, mobile6.Checked, Integer.Parse(priority6.Text))

        End If

    End Sub

End Class

Public Module isChanged
    Public featuredID1 As Integer
    Public featuredID2 As Integer
    Public featuredID3 As Integer
    Public featuredID4 As Integer
    Public featuredID5 As Integer
    Public featuredID6 As Integer
End Module 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-07T19:34:55.240

您的 load 语句在每个页面回发时设置表单的值，它可能会覆盖原始值；您需要将 foreach 代码包装在一个`If (Not Page.IsPostBack) Then .. End If`语句中。

高温高压

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-07T19:34:53.630

将页面加载代码放入 if (!Page.IsPostback)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-07T19:37:57.730

您必须尝试进入您的页面加载，

```
If (Not Page.IsPostBack) Then 
.. 
End 
```

为了在您发布数据时不刷新

# wordpress - 根据类别限制在 WordPress 中显示的帖子数量

> ID：12324288
> 
> 赞同：0
> 
> 时间：2012-09-07T19:32:50.710
> 
> 标签：wordpress

我有一个显示最新帖子的 WordPress 网站。它们以类似于以下的设计输出：

[http://tienvooracht.nl/themes/elevate/](http://tienvooracht.nl/themes/elevate/)

三列四行内容。这是我无法弄清楚的部分 - 无论类别如何，我如何拉出最新的帖子，但限制每行显示多少？

> 示例：我有类别、摄影、网页设计和 UI 设计。我碰巧连续写了 5 篇关于摄影的帖子，但我不希望我最近的所有帖子都是关于摄影的。

**有没有办法限制显示单个类别的帖子数量，并在达到该限制后显示来自不同类别的其他帖子？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T06:05:53.647

要限制特定类别的帖子，请使用此代码。

```
<?php
global $post;
$args = array( 'numberposts' => 5, 'category' => 3 );

$myposts = get_posts( $args );
foreach( $myposts as $post ) :
setup_postdata($post); ?>

<?php the_title(); ?>
<?php the_content(); ?>

<?php endforeach; ?> 
```

更改类别 ID 和帖子数量限制...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T01:31:33.033

这个限制是静态的吗？一如既往。如果是这样，您可以在 WordPress 的阅读设置中进行设置。在主循环之前添加一个变量 $x=0; 然后在循环中添加 $x++; 然后像这样添加第二个查询。

```
<?php

$defaultPostsPerPage = 12;

$sndary = $defaultPostsPerPage - $x;

if($sndary > 0){
$y=0;
$args = array('post_type'=>'post','post_per_page'=>12);

$showcase = new WP_Query( $args );

if ( $showcase->have_posts() ) { while ( $showcase->have_posts() ) { $showcase->the_post(); ?>
<!-- post html css goes here as you would any other loop -->
<?php 
    if($y%4==0){ 
        //add some sort of css line break, clear fix or last class on the element. to break to the new line. 
    }
} ?>
<!-- post navigation -->
<?php }else{ ?>
<!-- no posts found -->
<?php }

} 
```

在这里，我们正在检查主查询中有多少帖子，如果它们低于每页的最大值，我们可以添加我们的辅助查询。这里唯一要注意的是我们没有考虑分页，但这不是问题的一部分。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-15T19:29:32.607

```
<?php
/* create categories array  and pass id of categories from which we want to show the       posts*/
$categories=array(4,5,3);
foreach($categories as $cat){
    global $post;
    /* limit numberposts, here  specified 2  and pass the categories   dynamically in args array*/
    $args=array('numberposts' =>2, 'category' =>$cat);
    $myposts=get_posts($args);
    foreach($myposts as $mypost){
            echo "<h1>".$mypost->post_title."</h1>   ".$mypost-   >post_content."   ".$mypost->post_modified;
            echo "<br />";
    }
} 
```

?>

# java - 计算机代数系统的图形用户界面

> ID：12324290
> 
> 赞同：1
> 
> 时间：2012-09-07T19:32:54.990
> 
> 标签：java, scripting, groovy, ide, computer-algebra-systems

再会。我们正在研究基于 Java 的计算机代数框架。此时它只能以编程方式使用（例如，您需要在 java 或 groovy 上编写一些代码才能使用它），但它对用户不太友好。搭建一个完整的开发环境，用Java语法来解决一些简单的问题，太复杂了。

我们现在正在寻找一些相对简单的方法来为其创建用户界面和语法。我们的想法是使用一些现有的 Java 兼容语言以及简单而强大的语法（我们正在考虑 groovy）来编写与我们的库的绑定，它将使用一些更自然的语法隐藏底层复杂的基础设施。

例如：

爪哇：

```
Tensor t1 = Tensors.parse(“T_mn”);
Tensor t2 = Tensors.parse(“2*T_mn”);
Tensor sum = Tensors.sum(t1,t2);
System.out.println(sum.toString(ToStringMode.LaTeX)); 
```

时髦的：

```
def t1 = parse ‘T_mn’
def t2 = parse ‘2*T_mn’
def sum = t1+t2
latexOut(sum) 
```

我们需要一种具有良好 IDE（至少具有自动完成功能）的语言，它可以根据我们的需要进行调整（嵌入）。

对于这项任务，您有什么建议（IDE-语言组合）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T19:40:32.370

我建议您查看[Xtext](http://www.eclipse.org/Xtext/)（用于在 Eclipse 中构建源代码编辑器的框架）和[Xtend](http://www.eclipse.org/xtend/)（您可以按原样使用或根据自己的需要进行扩展的简单语言）。

# visual-studio-2010 - 无法连接到 SQL Server 2008R2 的命名实例

> ID：12324292
> 
> 赞同：1
> 
> 时间：2012-09-07T19:33:06.983
> 
> 标签：visual-studio-2010, connection, sql-server-2008-r2, database-project

我正在尝试通过新项目向导和这篇文章在 VS2010 中创建一个新的数据库项目：http: [//msdn.microsoft.com/en-us/library/aa833432 (v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/aa833432(v=vs.100).aspx)

我正在执行“配置构建/部署”步骤，并且正在尝试连接到我刚刚安装的名为 DEVELOPMENT 的 SQL Server 2008R2 的命名实例。假设服务器名称是 DB-01，我在下面的屏幕截图中的对话框中使用 DB-01\DEVELOPMENT 作为服务器名称。我也在使用对话框中的其余设置，但它一直给我以下错误：

> 与 SQL Server 建立连接时发生与网络相关或特定于实例的错误。服务器未找到或无法访问。验证实例名称是否正确以及 SQL Server 是否配置为允许远程连接。（提供者：TCP Provider，错误：0 - 连接尝试失败，因为连接方在一段时间后没有正确响应，或者连接失败，因为连接的主机没有响应。）

DEV 是我在 DEVELOPMENT 实例上创建的数据库的名称。如果我使用 DB-01 作为默认实例的服务器名称，它会连接。过去，我们一直在从默认实例上的数据库进行开发，没有任何问题，但我正在尝试迁移到本地、源代码控制的数据库。这个没有连接我错过了什么？

编辑：作为更多的上下文，它不是用户名/密码组合，也不是实例上存在 DEV 数据库，因为如果其中任何一个不正确，我会收到不同的错误。一旦我给它命名实例，它就无法连接。

![在此处输入图像描述](../Images/785b7679ea71d32a0d2ebf391bba8de4.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T00:15:12.463

弄清楚了：

SQL Server 的默认实例（在某些地方称为 MSSQLSERVER）默认使用端口 1433 进行传入连接，该端口在 Windows 防火墙中打开。这就是我能够连接到默认实例 (DB-01) 的原因。如果您创建了 SQL Server 的命名实例，则默认情况下，这些实例使用端口 1434 进行传入连接。这些是每种情况的 TCP 端口。好吧，我不得不承认我在 Windows 防火墙中打开了 TCP 端口 1434，但仍然无法远程连接到命名实例，并且仍然不确定为什么会这样。因此，我在 Windows 防火墙中打开了一个随机端口 (6969)，并将 DEVELOPMENT（命名）实例配置为仅接受通过该端口的传入连接。有关如何配置特定 SQL Server 实例以使用非默认端口的说明，请参阅本文：

[将服务器配置为侦听特定 TCP 端口](http://msdn.microsoft.com/en-us/library/ms177440.aspx)

一旦我将实例配置为使用端口 6969，我就可以毫无问题地连接。希望这可以帮助其他遇到类似/相同问题的人。

# java - 我在哪里可以找到 Javx.comm 或 RxTx 以及如何将它们放入 Eclipse？

> ID：12324293
> 
> 赞同：0
> 
> 时间：2012-09-07T19:33:15.327
> 
> 标签：java, eclipse

我正在尝试将 COM 端口访问添加到我在 Eclipse 中拥有的应用程序。

```
import javax.comm.*; 
```

说导入无法解决。当我搜索 javax.comm 时，我也被定向到 RxTX。我想要哪个以及如何将它们放入 IDE 以便导入工作？

# eclipse - 选择不包含来自 Eclipse 的小程序

> ID：12324295
> 
> 赞同：3
> 
> 时间：2012-09-07T19:33:17.700
> 
> 标签：eclipse, debugging

当我尝试运行/调试此代码时：

```
package ca.kianyarand.game;

import java.awt.BorderLayout;
import java.awt.Canvas;
import java.awt.Dimension;

import javax.swing.JFrame;

public class Game extends Canvas implements Runnable {

private static final long serialVersionUID = 1L;

public static final int WIDTH = 160;
public static final int HEIGHT = WIDTH / 12*9;
public static final int SCALE =3;
public static final String NAME = "Game";

private JFrame frame;

public boolean running = false;

public Game(){
    setMinimumSize(new Dimension(WIDTH*SCALE, HEIGHT*SCALE));
    setMaximumSize(new Dimension(WIDTH*SCALE, HEIGHT*SCALE));
    setPreferredSize(new Dimension(WIDTH*SCALE, HEIGHT*SCALE));

    frame = new JFrame(NAME);

    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frame.setLayout(new BorderLayout());

    frame.add(this, BorderLayout.CENTER);
    frame.pack();

    frame.setResizable(false);
    frame.setLocationRelativeTo(null);
    frame.setVisible(true);     
}

public synchronized void start() {
    running = true;
    new Thread(this).start();   
}

public synchronized void stop() {
    running = false;
}

public void run(){
    while(running){
    }
}

public static void name(String []args){
    new Game().start();
}       
} 
```

当尝试在 Java Applet 上运行/调试它时，它会出现“选择不包含小程序”，并且在与 Java 应用程序一起运行时也会出现“选择不包含主类型”。

# c++ - 可以将标准的纯 C 标头 #include 指令放在命名空间中吗？

> ID：12324302
> 
> 赞同：13
> 
> 时间：2012-09-07T19:33:55.907
> 
> 标签：c++, namespaces, include

> **可能重复：**
> [将#include 包装在命名空间块中是个好主意吗？](https://stackoverflow.com/questions/6670738/is-it-a-good-idea-to-wrap-an-include-in-a-namespace-block)

我有一个项目，`log`在全局命名空间 ( `::log`) 中有一个类。

所以，很自然地，`#include <cmath>`每次我尝试实例化我的日志类的对象时，编译器都会给出一条错误消息，因为`<cmath>`使用许多三字母方法污染了全局命名空间，其中一个是对数函数`log()`。

所以有三种可能的解决方案，每一种都有其独特的丑陋副作用。

*   将日志类移动到它自己的命名空间，并始终使用它的完全限定名称访问它。我真的想避免这种情况，因为记录器应该尽可能方便使用。
*   编写一个`mathwrapper.cpp`文件，该文件是项目中唯一包含 . 的文件`<cmath>`，并`<cmath>`通过`namespace math`. 我不想使用这种方法，因为我必须为每个必需的数学函数编写一个包装器，并且它会增加额外的调用惩罚（由`-flto`编译器标志部分取消）
*   我目前正在考虑的解决方案：

代替

```
#include <cmath> 
```

经过

```
namespace math {
#include "math.h"
} 
```

然后通过 计算对数函数`math::log()`。

我已经尝试过了，它确实可以按预期编译、链接和运行。但是，它确实有多个缺点：

*   它（显然）不可能使用`<cmath>`，因为`<cmath>`代码通过它们的完全限定名称访问函数，并且不推荐在 C++ 中使用它。
*   我有一种非常非常糟糕的感觉，就像我[会被猛禽攻击并活活吃掉一样。](http://xkcd.com/292/)

所以我的问题是：

*   是否有任何建议/约定/等禁止在命名空间中放置包含指令？
*   有什么问题吗

    *   不同的 C 标准库实现（我使用 glibc），
    *   不同的编译器（我使用 g++ 4.7，-std=c++11），
    *   链接？
*   你有没有试过这样做？
*   有没有其他方法可以从全局命名空间中消除数学函数？

我在 stackoverflow 上发现了几个类似的问题，但大多数都是关于包含其他 C++ 头文件，这显然是一个坏主意，而且那些没有对 C 库的链接行为做出矛盾陈述的问题。`#include <math.h>`另外，另外放里面有好处`extern "C" {}`吗？

**编辑**

所以我决定做可能其他人都在做的事情，并将我所有的代码放在项目命名空间中，并在包含`<cmath>`.

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-09-07T19:37:35.750

不，您正在考虑的解决方案是不允许的。实际上，这意味着您正在更改头文件的含义。您正在更改其所有声明以声明不同命名的函数。

这些更改后的声明与标准库函数的实际名称不匹配，因此，在链接时，任何标准库函数都不会解析对更改后声明所声明的函数的调用，除非它们碰巧被声明`extern "C"`为允许的 - 但是不推荐 - 对于来自 C 标准库的名称。

ISO/IEC 14882:2011 17.6.2.2/3 [using.headers] 适用于 C 标准库头文件，因为它们是 C++ 标准库的一部分：

> 翻译单元应仅在任何外部声明或定义 [*] 之外包含标头，并且应在该翻译单元中对在该标头中声明的任何实体的第一次引用之前在词法上包含标头。

[*] 将包括命名空间定义。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-07T19:51:45.270

为什么不将日志类放在它自己的命名空间中，并`typedef namespace::log logger;`以更方便的方式使用以避免名称冲突？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-07T21:08:16.727

[更改班级名称。没什么大不了的。](http://news.softpedia.com/news/Steve-Jobs-to-Dev-We-ll-Get-Off-Your-Back-Just-Rename-Your-App-127559.shtml);-)

不过说真的，将名称放在与*任何*标准标头中的名称冲突的全局名称空间中并不是一个好主意。C++03 没有明确允许`<cmath>`定义`::log`. `<cmath>`但是由于在现有`<math.h>`（可能还有一些头文件的现有静态链接库，包括数学）之上定义的实用性，实现长期不符合这一点。因此 C++11 认可了现有的做法，并允许`<cmath>`将所有内容转储到全局命名空间中。C++11 还保留所有用于外部“C”链接的名称，以及所有用于 C++ 链接的函数签名，即使您不包含标头。但稍后会详细介绍。

因为在 C++ 中，任何标准头文件都可以定义来自任何其他标准头文件的名称（即，它们可以相互包含），这意味着任何标准头文件都可以定义`::log`. 所以不要使用它。

关于不同实现的问题的答案是，即使您的方案开始工作（不能保证），在其他一些实现中也可能有您使用的标头（或希望将来在同一个 TU 中使用）您的日志类），其中包括`<cmath>`，并且您没有对其进行`namespace math`处理。在我`<random>`看来，在我看来是一个候选人。它提供了一大堆连续的随机数分布，这些分布似乎可以通过数学函数实现。

我建议`Log`，但我喜欢大写的类名。部分原因是它们总是与标准类型和函数不同。

另一种可能性是像以前一样定义您的类并使用`struct log`. `log`这不会与函数冲突，原因只有在您花费太多时间在 C 和 C++ 标准上时才会变得清楚（您仅用`log`作*类*名，而不是函数，也不是带有“C”的名称）链接，所以你不会侵犯保留名称。尽管看起来相反，C++ 中的类名仍然与其他名称处于平行宇宙中，就像`struct`C 中的标签一样）。

不幸`struct log`的是，它不是简单类型标识符，因此例如您不能使用`struct log(VERY_VERBOSE, TO_FILE)`. 要定义简单类型标识符：

```
typedef struct log Log;
Log(VERY_VERBOSE, TO_FILE); // unused temporary object 
```

我在下面的评论中所说的一个例子，基于一个陈述的示例用法。我*认为*这是有效的，但我不确定：

```
#include <iostream>
#include <cmath>
using std::log; // to enforce roughly what the compiler does anyway

enum Foo {
    foo, bar
};

std::ostream &log(Foo f) { return std::cout; }

int main() {
    log(foo) << log(10) << "\n";
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-07T21:08:58.067

它也很丑陋，但我相信不会导致任何链接器问题。只需重新定义日志名称`<math.h>`

```
 #define log math_log
 #include <math.h>
 #undef log 
```

使用此日志可能会导致数学内联函数出现问题，但也许你会很幸运......

数学 log() 仍然可以访问，但这并不容易。在要使用它的函数中，只需重复其真实声明：

```
 int somefunc() {
        double log(double); // not sure if correct
        return log(1.1);
    } 
```

# php - 不使用变量重写 PHP 代码

> ID：12324306
> 
> 赞同：-2
> 
> 时间：2012-09-07T19:34:36.160
> 
> 标签：php, variables

**示例 PHP 代码：**

```
<?php 
    $image_attributes = wp_get_attachment_image_src( '8' );
?> 

<img src="<?php echo $image_attributes[0]; ?>" width="<?php echo $image_attributes[1]; ?>" height="<?php echo $image_attributes[2]; ?>"> 
```

现在，可以说，我根本不想使用该`$image_attributes`变量，而是直接使用`wp_get_attachment_image_src( '8' );`而不是`$image_attributes[0];`，`$image_attributes[1];`然后`$image_attributes[2];`使用 img 标签。

在这种情况下，我应该如何修改代码？

## 为什么？

让我通过例子来解释（我的真实用例）。

```
<?php 
    $attachment_attributes = wp_get_attachment_image_src( '8' ); // returns an array
?> 

<media:content url="<?php echo $attachment_attributes[0]; ?>" width="<?php echo $attachment_attributes[1]; ?>" height="<?php echo $attachment_attributes[2]; ?>" type="image/jpeg"> 
```

我该如何做同样的事情，就像我这样编码时一样？

```
foreach ( $attachments as $att_id => $attachment ) {
    $attachment_attributes = wp_get_attachment_image_src( '8' );

    // Should it be done like this? If not, how do I do it?
    $output .= '<media:content height="' . $attachment_attributes[0]; . '" type="image/jpeg">';

    if ( $captiontag && trim($attachment->post_excerpt) ) {
        $output .= "
            <{$captiontag}>" . wptexturize($attachment->post_excerpt) . "</{$captiontag}>";
    }
    $output .= '
        </media:content>';
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-07T19:38:26.500

不知道为什么你试图避免变量，但你可能能够逃脱类似的事情：

```
<?php

vprintf(
    '<img src="%s" width="%d" height="%d">',
    wp_get_attachment_image_src( '8' )
); 
```

或者，从“为什么”的代码中

```
<?php

foreach ( $attachments as $att_id => $attachment ) {
    $attachment_attributes = wp_get_attachment_image_src( '8' );

    $output .= '
        <media:content
          url="' . $attachment_attributes[0] . '"
          width="' . $attachment_attributes[1] . '"
          height="' . $attachment_attributes[2] . '"
          type="image/jpeg">';

    if ( $captiontag && trim($attachment->post_excerpt) ) {
        $output .= "
            <{$captiontag}>" . wptexturize($attachment->post_excerpt) . "</{$captiontag}>";
    }
    $output .= '
        </media:content>';
} 
```

# ruby-on-rails-3 - Resque + 被杀死的工人：不离开失败的工作

> ID：12324308
> 
> 赞同：1
> 
> 时间：2012-09-07T19:34:45.487
> 
> 标签：ruby-on-rails-3, resque

我注意到，当我杀死一个 resque 工人并且它正在处理某些东西时，它不会留下一个失败的工作。它会消失的。

因此，工作永远不会完成，工作在我的申请中扮演着重要的角色。

这只发生在我杀死一名工人时。如果我的工作引发异常，我可以稍后重试。

是否可以避免这种行为？

谢谢。

# java - 我作为服务运行的 Java 应用程序在 Windows 2008 上导致磁盘已满错误。无法从资源管理器中看到任何内容

> ID：12324319
> 
> 赞同：0
> 
> 时间：2012-09-07T19:35:38.480
> 
> 标签：java, windows, disk

我有一个我自己编写的作为服务运行的 Java 服务器。现在看起来该应用程序以某种方式以每小时 1GB 的速度占用了我所有的驱动器空间。

服务停止后，磁盘空间自行变为可用（我没有删除任何内容）。从应用程序中，除了日志或数据库之外，我没有创建任何文件或写入磁盘，但这些文件的增长速度并没有那么快。

最大的问题是我找不到任何占用我所有驱动器的文件或文件夹。我不知道它是我无法从资源管理器访问的系统文件，还是病毒或 JVM 错误。我正在使用来自 JDK 7 update 7 的 Oracle JVM 64 位。

我非常感谢您能为我提供的任何帮助。我以前从未见过这样的事情。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T19:49:21.463

以下是可能的指针：

1.  检查您的磁盘是否因其他应用程序（可能是恶意软件）而已满
2.  检查您的应用程序是否有任何 IO 操作
3.  检查您的本地存储库（如 .m2、.gradle/caches）是否在构建期间使用传递依赖项填充它
4.  如果可能，添加几个记录器以显示您的硬盘大小`new File("/").getTotalSpace();`以及 RAM 详细信息，并观察它们如何变化
5.  最后，如果没有任何效果，请在另一台机器上尝试您的应用程序

# actionscript-3 - AS3 - 从图像中提取文本

> ID：12324321
> 
> 赞同：0
> 
> 时间：2012-09-07T19:35:42.867
> 
> 标签：actionscript-3, text, text-extraction

是否可以从这样的图像中提取文本？![在此处输入图像描述](../Images/6daf7c25be5ee622af4cc9fc9e9b32a4.png)

（之后我想在文本字段中显示它）谢谢。乌里

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T19:40:28.700

您正在寻找的是光学字符识别。这是一个类似的问题：

[OCR 动作脚本](https://stackoverflow.com/questions/5299258/ocr-actionscript)

虽然遗憾的是它没有明确的答案。在 AS3 中没有用于执行此操作的本机类/框架，但我确信这是可能的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T00:25:17.897

这是您将使用 Web 服务的任务。我知道 Google Docs 可以为您 OCR 图像。ABBYY 的 FineReader 是业内最好的软件之一，它还提供 OCR 网络服务。谷歌已经开源了他们的 OCR 软件。您可以想象将其设置在您自己的服务器上。

# google-app-engine - Go 的运行时库文档过时了？

> ID：12324329
> 
> 赞同：0
> 
> 时间：2012-09-07T19:36:13.643
> 
> 标签：google-app-engine, go

因此，我正在使用 GO 解析 POST。我想要的是帖子的正文，所以我尝试以下内容（在这种情况下`r`属于类型`*http.Request`）：

```
var body io.Reader
var d []byte
body = r.Body.Reader
body.Read( d) 
```

但是，这会导致编译错误：

```
Compile error: <file>:44: 
    r.Body.Reader undefined (type io.ReadCloser has no field or method Reader) 
```

奇怪的。我可以发誓它是在文档中定义的......啊！[在这里](http://golang.org/pkg/io/#ReadCloser)。

现在，我对 Go 很陌生，但这闻起来有点奇怪——我搞砸了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-07T19:46:34.813

从您的链接中， a 的文档`ReadCloser`是：

```
type ReadCloser interface {
    Reader
    Closer
} 
```

这告诉您的是，ReadCloser 接口由 a`Reader`和 a`Closer`功能组成。两者都是。这意味着`ReadCloser`对这些接口定义的接受。它们实际上不是成员，您访问它们的方式。

一个`Reader`是：

```
type Reader interface {
    Read(p []byte) (n int, err error)
} 
```

这意味着您应该`Read`像这样访问：

```
body = r.Body
body.Read(d) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T19:47:18.683

在 Go 文档中定义接口的方式，看起来像是一种“具有”关系。它实际上是一个“is-a”关系，所以下面的代码做我想要的：

```
var d []byte
r.Body.Read(d) 
```

# syntax - 构造函数调用的 QTP/VBScript 语法

> ID：12324337
> 
> 赞同：2
> 
> 时间：2012-09-07T19:36:59.807
> 
> 标签：syntax, vbscript, qtp

我自己没有使用 QTP，但试图回答这个[问题](https://stackoverflow.com/q/12302039/603855)，我迫切需要知道，这是否有效的 VBScript：

```
Class C
  Function init(x, y)
    Set init = Me
  End Function
 End Class

 Dim o : Set o = New C.init(0, 1) 
```

将导致 QTP 中的语法错误 - 或更一般地说：QTP 是否实现了自己的 VBScript 方言？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-09T11:47:38.417

这在 QTP 中也有效。

QTP 使用 VBScript 作为运行测试的引擎，语言上有一些扩展允许使用测试对象，但其中大部分看起来像全局函数和对象。据我所知，VBScript没有*删除任何内容。*

QTP 关于类类型的限制是关于智能感知，而不是测试/脚本的执行。

# jquery - jQuery 可放置渲染位置。好像向左移动了

> ID：12324347
> 
> 赞同：1
> 
> 时间：2012-09-07T19:37:37.357
> 
> 标签：jquery, css, jquery-ui-sortable, jquery-ui-droppable

我有一组 jqueryUI 可排序项目和一个内部带有“x”的可放置框。可放置框位于屏幕右侧的侧栏中。问题是当我将可排序项目拖到框外时，可放置的悬停效果和事件会执行，向左一点像素。这似乎是可放置对象的定位问题。图形在一个地方，感觉在另一个地方。

这是示例代码：http: [//jsfiddle.net/G3rCN/3/](http://jsfiddle.net/G3rCN/3/)

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T19:41:47.630

可排序段落的宽度为 100%，如果您将它们设置为 200px 宽，则它们不会干扰可放置的 X

[http://jsfiddle.net/G3rCN/7/](http://jsfiddle.net/G3rCN/7/)

# asp.net - 获取用户控件上数据绑定列表控件的选定索引

> ID：12324352
> 
> 赞同：-1
> 
> 时间：2012-09-07T19:38:18.337
> 
> 标签：asp.net, user-controls

我有一个`radiobuttonlist`住在用户控件上的。此用户控件位于父用户控件上的转发器中，并且该用户控件位于带有提交按钮的页面上。

所以是这样的：

```
<page>
<UserControl1>
  <Repeater>
    <UserControl2>
      <radiobuttonlist>
    </UserControl2>
  </Repeater>
</UserControl1>
<Submit button />
</page> 
```

动态填充在的`radiobuttonlist`代码隐藏中`UserControl2`。问题是，当我提交表单时，我需要访问 的`SelectedValue`，`radiobuttonlist`并且该值始终为空。即使我首先触发填充 的方法，`radiobuttonlist`RBL`selectedvalue`的 也是空的。我`SelectedIndexChanged`在 RBL 上有一个事件处理程序，但它从不触发。

当我导致父页面回`SelectedValue`发时，我需要做什么才能获得？`radiobuttonlist`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T13:35:09.503

我让它工作了。我猜这是操作顺序问题。解决方法是在 UserControl2 的 OnInit() 中动态声明单选按钮列表的事件处理程序。

```
protected override void OnInit(EventArgs e) 
{ 
    base.OnInit(e);
    rblOptions.SelectedIndexChanged += new EventHandler(ctrlOptions_SelectedIndexChanged);
} 
```

一旦我这样做了，事件就会开始触发，即使我在回发时重新实例化了 UserControl。由于事件被触发，我无需将其保存在 ViewState 中即可获得选定索引。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T19:53:26.540

当您发布您的数据时，您会重新绑定您的数据，以便删除您选择的事件或值。

在您的 Page_Load （您的用户控件）中尝试使用此代码

```
If(! IsPostBack)
{
   //You build RadioButtonList

} 
```

并使用 ViewState 持久化您的数据，`EnableViewState="true"`

# postgresql - assign_vertex_id 错误

> ID：12324353
> 
> 赞同：0
> 
> 时间：2012-09-07T19:38:23.923
> 
> 标签：postgresql, postgis, pgrouting

我正在尝试测试 pgrouting 是否正常工作。为此，我创建了一个包含以下属性的表。

```
  列：
 吉德 |
 长度 |
 the_geom |
 来源 |
 目标

```

现在我的问题是，当我尝试执行 assign_vertex_id 函数时，它给了我以下错误；

```
EXECUTE 语句中的 PL/pgSQL 函数“assign_vertex_id”第 15 行
错误：EXECUTE 的查询字符串参数为空
上下文：执行语句中的 PL/pgSQL 函数“assign_vertex_id”第 32 行

********** 错误 **********

错误：EXECUTE 的查询字符串参数为空
SQL 状态：22004

上下文：执行语句中的 PL/pgSQL 函数“assign_vertex_id”第 32 行

```

任何建议这是什么意思？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T20:45:34.613

[assign_vertex_id() 在routing_topology.sql](https://github.com/pgRouting/pgrouting/blob/master/core/sql/routing_topology.sql#L56)中定义为 PGrouting 的一部分。（运行`\df+ assign_vertex_id`也会给你当前的来源。）第 32 行的 EXECUTE 语句是：

```
EXECUTE 'update ' || quote_ident(geom_table) || 
    ' SET source = ' || source_id || 
    ', target = ' || target_id || 
    ' WHERE ' || quote_ident(gid_cname) || ' =  ' || _r.id; 
```

错误是使用 NULL 参数调用 EXECUTE。如何？好吧，SQL`||`运算符表示连接，将 NULL 连接到字符串会导致 NULL：

```
=> select ('string' || null) is null;
 ?column? 
----------
 t
(1 row) 
```

我的猜测是`gid`基础表的列（`_r.id`此处）包含 NULL，尽管我想它也可能是 source/target_id。修复它，然后添加一个约束以防止这种情况继续发生：

```
ALTER TABLE whatever ALTER COLUMN gid SET NOT NULL; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T13:15:39.380

您是否使用 Postgis 2.0 并且有一张带有多行字符串的表格？

在 Postgis 2.0 中，函数 ST_StartPoint() 和 ST_EndPoint() 不再适用于多线串（[http://postgis.refractions.net/docs/ST_StartPoint.html](http://postgis.refractions.net/docs/ST_StartPoint.html)）。所以它很可能会在那里失败。

您需要将 Multilinestrings 转换为 Linestrings。关于这里的更多信息：

# java - 对象查询语言引用

> ID：12324356
> 
> 赞同：0
> 
> 时间：2012-09-07T19:38:31.113
> 
> 标签：java, oql

我正在尝试分析堆转储以确定我的休眠缓存设置是否是原因。

相关对象的许多实例由“org.hibernate.internal.util.collections.IdentityMap”引用。如何构造一个 OQL 查询来返回我的对象​​实例的确切数量，这些实例被 hibernate 引用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T18:18:40.243

如果你很幸运，你也许可以让`dominatorof()`函数工作，试试这样的：

```
SELECT * FROM ".*" o WHERE classof(dominatorof(o)).@displayName.contains("class org.hibernate.internal.util.collections.IdentityMap") 
```

但这会使 MAT 遍历堆中的每个对象，因此返回结果需要很长时间（假设您有一个相当大的堆）。然而真正的问题是我发现`dominatorof()`函数不一致，所以你可能找不到每个对象。如果您有一个类列表，那么您可以加快查询速度并确认您获得了正确的支配者。例如，如果 X 和 Y 是类名，您可以使用 "X|Y" 作为正则表达式而不是 ".*" 并运行此查询以查看您得到的结果：

```
SELECT dominatorof(o) FROM "X|Y" o 
```

# facebook - 当用户作为页面登录时，Facebook 插件无法正确显示

> ID：12324357
> 
> 赞同：2
> 
> 时间：2012-09-07T19:38:36.753
> 
> 标签：facebook, plugins, login

我注意到当用户作为页面登录时，Facebook 插件无法正确显示。该插件显示一条消息，听起来像“返回用户以使用此插件”。

只有当我的访问者是用户（不是页面或应用程序）时，我才想显示插件。

我根据 facebook 的规范实现了代码，但我找不到允许我创建此过滤器的 php 或 javascript 片段。

有人能帮我吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T11:52:15.150

我找到了解决方法：

`FB.getLoginStatus(function(response) { **DO_SOMETHING** })`

如果用户以用户身份登录或用户根本没有登录，则只有**DO_SOMETHING才能过滤您的操作。**

最初的建议不起作用。上下文是简单的网页浏览：用户从不连接到 FB 应用程序。FB 信息（我认为）来自浏览器 cookie。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T02:24:48.937

```
FB.api({ 
    method: 'fql.query',
    query: 'SELECT type FROM profile WHERE username IN (SELECT username FROM user WHERE uid=me())'
    }, 
    function(response) {
        (response.type == 'user') ? $('#fb_elem_id_here').css('display', 'inline-block') : $('#fb_elem_id_here').css('display', 'none');
    }); 
```

[facebook](/questions/tagged/facebook "显示标记为“脸书”的问题") [fql](/questions/tagged/fql "显示标记为“fql”的问题") [jquery](/questions/tagged/jquery "显示标记为“jquery”的问题") [fb.api](/questions/tagged/fb.api "显示标记为“fb.api”的问题") [fql.query](/questions/tagged/fql.query "显示标记为“fql.query”的问题")

# c# - 用于 For Each 循环的 Visual Basic 中 var 的等效项

> ID：12324361
> 
> 赞同：4
> 
> 时间：2012-09-07T19:38:53.407
> 
> 标签：c#, vb.net

我需要在 Visual Basic 中运行一些与 C# 中等效的代码：

```
for(var item in removeRows)
{
   two.ImportRow(item);
} 
```

我知道在 VB 中最接近声明“var”的方法基本上是

```
Dim something = 
```

但是，您将如何在 foreach 循环中执行此操作？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-07T19:41:13.943

您只需使用：

```
For Each item In removeRows
    two.ImportRow(item)
Next 
```

VB 中的`As datatype`规范是可选的。有关详细信息，请参阅[For Each](http://msdn.microsoft.com/en-us/library/5ebk1751.aspx)文档。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-07T20:25:41.433

使用 Option Infer On，您可以去掉“As ...”，然后推断类型。使用 Option Infer Off 时，如果您不使用该类型，则将假定为“对象”类型。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-07T20:11:07.330

正如其他人提到的那样，如果您有选项推断，则 As Type 是选项。我怀疑您的项目关闭了选项推断（这是导入在 .Net 2.0 中启动的现有项目时的默认设置）。在项目文件的顶部或项目的编译设置中打开 Option Infer On。

```
Option Infer On
'' This works:
For Each item In removeRows
   two.ImportRow(item)
Next

Option Infer Off
'' Requires:
For Each item As DataRow In removeRows
   '' I'm assuming the strong type here. Object will work with Option Strict Off
   two.ImportRow(item)
Next 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-07T19:42:02.117

```
 For Each item As Object in removerows
       two.ImportRow(item)
    Next 
```

在 VB.NET (VB9) 中省略类型将隐式键入变量。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-07T19:41:56.577

在 For Each 文档中写到[As Type 是 optional](http://msdn.microsoft.com/en-us/library/5ebk1751.aspx)。

所以

```
For Each row in removeRows
...
Next 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-07T19:43:03.387

你可以试试 (With `Object`), type 是可选的

```
For Each item As Object In removeRows
    two.ImportRow(item)
Next 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-07T19:43:17.200

像这样的东西：

```
 Dim siteName As String
   Dim singleChar As Char
   siteName = "HTTP://NET-INFORMATIONS.COM"
   For Each singlechar In siteName
        two.ImportRow(singleChar);
   Next 
```

*   [http://vb.net-informations.com/programflow/vb.vb.net_for_each_loop.htm](http://vb.net-informations.com/programflow/vb.vb.net_for_each_loop.htm)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-09-07T19:43:17.733

您不需要 vb 中的“as”：

```
For Each p  In Process.GetProcesses()
    Debug.WriteLine(p.ProcessName)
Next 
```

# python - 如何停止无限while循环python emacs

> ID：12324362
> 
> 赞同：4
> 
> 时间：2012-09-07T19:39:08.963
> 
> 标签：python, emacs

我写了这段代码：

```
x = 0
while x == 0:
      print 'd' 
```

当我键入抄送！和 Cc Cc 代码运行。

现在的问题是：我如何停止执行该代码？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-08T21:04:40.877

非常感谢我们的回答。最后我得到了解决方案。这是我一步一步的操作方法。

归功于**Omri Barel、Pavel Repin、jmdeldin**

起点是：pythontests.py 文件中的无限 while 循环，

1.  抄送！（打开python shell）（你会看到两个窗口“缓冲区”，光标在python shell中）
2.  Cx o（切换到其他窗口“缓冲区”）（现在是 pythontests.py 文件突出显示）
3.  Cc CC（执行代码）（行开始移动和计数:)）
4.  Cx o（切换到其他窗口“缓冲区”）（现在是突出显示的python shell）
5.  Cc Cc （停止运行进程）（现在您看到 Trackback 消息）

就我而言，我收到了这条消息：

```
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/tmp/python-4684wEr.py", line 3, in <module>
    print 'd'
KeyboardInterrupt 
```

这是截屏视频它是如何工作的：http: [//youtu.be/1MbfCHusF9c](http://youtu.be/1MbfCHusF9c)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-07T23:17:37.103

切换到`*Python*`缓冲区并键入`C-q C-c`以中断脚本。`C-q`( `quoted-insert`) 用于插入控制字符，因为`C-c`会被 Emacs 截获。它也可以在 shell 模式下工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T19:42:17.420

我认为您想要 Cg 它将停止运行当前命令。

# fullcalendar - 周视图，缺少 fc 事件标题

> ID：12324365
> 
> 赞同：1
> 
> 时间：2012-09-07T19:39:15.937
> 
> 标签：fullcalendar

在周视图中，仅占用一个槽的事件会生成，例如

```
<div class="fc-event-time">13:20 - EventTitle</div> 
```

（而不是时间范围），和

```
<div class="fc-event-content"></div> 
```

因此，内容中没有插入 <fc-event-title>。

这可以在 eventRender 中进行修补，但我想知道这是错误还是功能。

肿瘤坏死因子。

# matlab - matlab可以从文件链接中读取数据吗？

> ID：12324373
> 
> 赞同：1
> 
> 时间：2012-09-07T19:39:36.697
> 
> 标签：matlab

问题说明了一切：在 Windows 操作系统中，有没有办法制作 Matlab `csvread`或`importdata` 识别它需要遵循`myfile.csv.lnk`源文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T23:42:30.200

Matlab 无法处理 Windows 快捷方式样式的符号链接，但它对在 Vista 周围添加并且对应用程序透明的[ntfs 符号链接没有问题。](http://en.wikipedia.org/wiki/NTFS_symbolic_link)我已经测试了这些符号和硬链接变体，并且都可以通过 Matlab 正常工作。

您使用`mklink`命令制作它们，类似于此

```
mklink test.lnk test.txt 
```

# javascript - 2012 年 12 月迁移在应用程序仪表板中不可用

> ID：12324375
> 
> 赞同：2
> 
> 时间：2012-09-07T19:39:38.747
> 
> 标签：javascript, facebook, facebook-graph-api

我最近接手了一个使用带有 Javascript 的 Facebook Graph API 的移动网站的开发。在 9 月 6 日星期三更新后，该应用程序停止让人们重新授权 Facebook。初始授权有效，但请求另一个身份验证会引发一些通用的“用户拒绝您的请求”异常。然后重定向到甚至不存在的 FB 上的错误页面。

*我认为这个问题可能与2012 年 12 月宣布重大变更（90 天通知）*的 oAuth 变更有关。我想禁用此迁移，但在我的 Facebook 应用程序仪表板中看不到它。

有人有想法么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T19:54:37.913

在应用程序设置中启用/禁用 2012 年 12 月重大更改的功能将在宣布后的几天内提供。

因此，重大更改尚未生效，这意味着您的错误与 2012 年 12 月的重大更改无关。

# html - 从 iframe 重定向

> ID：12324378
> 
> 赞同：2
> 
> 时间：2012-09-07T19:39:53.067
> 
> 标签：html, forms, redirect, iframe

我使用以下 HTML 代码通过 Email-Me 表单构建了一个联系表单：

```
 <link rel="stylesheet" type="text/css" href="contact_us.css" />
<link rel="stylesheet" type="text/css" href="http://www.emailmeform.com/builder/theme_css/VaHUixmgcX0Qd0BO1a4ho" />
<script type="text/javascript">
if (typeof jQuery == 'undefined'){
    document.write(unescape("%3Cscript src='http://www.emailmeform.com/builder/js/jquery-1.7.1.min.js' type='text/javascript'%3E%3C/script%3E"));
}
</script>
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.7.2/jquery-ui.min.js"></script>
<script type="text/javascript">
if (typeof $.ui == 'undefined'){
    document.write(unescape("%3Cscript src='http://www.emailmeform.com/builder/js/jquery-ui-1.7.2.custom.min.js' type='text/javascript'%3E%3C/script%3E"));
}
</script>
<script type="text/javascript" src=http://www.emailmeform.com/builder/js/dynamic.php?t=post&t2=0&use_CDN=true"></script>
    <script type="text/javascript" src="contact_us.js"></script>
<div id="emf-container-outer" >
  <div id="emf-container"style="background-color: #FBF8EF">
    <div id="emf-logo">
      <a>EmailMeForm</a>
    </div>
 <form target="_top" id="emf-form" class="centerLabel" enctype="multipart/form-data" method="post" action="http://www.emailmeform.com/builder/form/VaHUixmgcX0Qd0BO1a4ho" name="emf-form">
<form id="emf-form" class="centerLabel" enctype="multipart/form-data" method="post" action="http://www.emailmeform.com/builder/form/VaHUixmgcX0Qd0BO1a4ho" name="emf-form" target="_top">

      <div id="emf-form-instruction" class="emf-head-widget" style="left:10px; width" >
        <div id="emf-form-title" class="emf-bold" align="right"style="left:10px; font-family:sans-serif ">
          צרו קשר
        </div>
        <div id="emf-form-description" align="right"style="left:10px; font-family: sans-serif; top:10px">

contacr

        </div>
      </div>
      <ul>
        <font size="2pt" face="arial">
        <li id="emf-li-0" class="emf-li-field emf-field-text data_container" style="text-align:right">
          <label class="emf-label-desc" for="element_0">name <span>*</span></label>
          <div class="emf-div-field">
            <input id="element_0" name="element_0" value="" size="22" type="text" class="validate[required]" style="z-index:" />
          </div>

          <div class="emf-clear"></div>
        </li>
        <li id="emf-li-1" class="emf-li-field emf-field-number data_container" style="text-align:right">
          <label class="emf-label-desc" for="element_1">phone number <span>*</span></label>
          <div class="emf-div-field">
            <input id="element_1" name="element_1" class="validate[required,length[9 ,10],custom[extNumber]]" value="" size="22" type="text" />
          </div>
         <div class="emf-clear"></div>
        </li>
        <li id="emf-li-2" class="emf-li-field emf-field-email data_container" style="text-align:right">
          <label class="emf-label-desc" for="element_2">Email <span>*</span></label>
          <div class="emf-div-field">
            <input id="element_2" name="element_2" class="validate[required,custom[email]]" value="" size="22" type="text" />
          </div>
          <div class="emf-clear"></div>
        </li>
        <li id="emf-li-3" class="emf-li-field emf-field-textarea data_container" style="text-align:right">
          <label class="emf-label-desc" for="element_3">title <font color="red">*</font>    </label>
          <div class="emf-div-field">
            <textarea id="element_3" name="element_3" cols="18" rows="5" class="validate[required]">
</textarea>
          </div>
          <div class="emf-clear"></div>
        </li>
        <li id="emf-li-post-button" class="middle">
          <input value="שלח טופס" type="submit" onmouseover="return true;" />
        </li>
      </ul><input name="element_counts" value="4" type="hidden" /> <input name="embed" value="forms" type="hidden" />
    </form> </font>
</div>
<!-- end emf-container div -->              
</div>
<!-- end emf-container-outer div -->
</div> 
```

这是在线表格：http: [//nave.net23.net/HTMLPage.html](http://nave.net23.net/HTMLPage.html) 我想将此表格作为 iframe 放入我的 html 页面中。iframe 代码：`<iframe src="http://nave.net23.net/HTMLPage.html" width="645px" height="500px;" frameBorder="0" scrolling="no" ></iframe></div>`

如您所见，当我发送表单时，它会自动将我重定向到我之前设置的网站。问题是，当我将代码放入 iframe 标记时，只有 iframe 内的内容在重定向，而不是父页面！我该怎么做才能使父页面刷新？

您可以在此处查看带有 iframe 标记的表单[http://nave.net23.net/](http://nave.net23.net/) 谢谢您的回答...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-07T19:47:18.780

把它放在你的感谢页面中（http://lawb.co.il/thankyou.html）：

```
<script type='text/javascript'>
if (top !== self) top.location.href = self.location.href;
</script> 
```

或者如果你可以修改表单的 HTML，你可以添加一个`target="_top"`属性（更好的方法）。像这样：

```
<form target="_top" id="emf-form" class="centerLabel" enctype="multipart/form-data" method="post" action="http://www.emailmeform.com/builder/form/VaHUixmgcX0Qd0BO1a4ho" name="emf-form"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T19:45:05.580

我认为您正在寻找的是`target="_top"`属性。

代替：

```
<form id="emf-form" class="centerLabel" enctype="multipart/form-data" method="post" action="http://www.emailmeform.com/builder/form/VaHUixmgcX0Qd0BO1a4ho" name="emf-form"> 
```

和：

```
<form id="emf-form" class="centerLabel" enctype="multipart/form-data" method="post" action="http://www.emailmeform.com/builder/form/VaHUixmgcX0Qd0BO1a4ho" name="emf-form" target="_top"> 
```

这将告诉表单重定向父页面而不是 iframe。

# asp.net-mvc - 向 MVC 应用程序添加参数

> ID：12324379
> 
> 赞同：1
> 
> 时间：2012-09-07T19:39:57.127
> 
> 标签：asp.net-mvc, iframe

我有一个基本视图的 MVC 应用程序：

myapp.com/category

并切换到第二个：

myapp.com/category/list

应用程序用作独立的应用程序，也可以在其他应用程序中使用到 iframe 中，其中 src 是：myapp.com/category。我想在 iframe 中使用时不显示页眉，我该如何实现？我试图添加查询字符串 myapp.com/category?show=false，并将其设置为 iframe src，但是当我切换到第二个视图时，参数未传递。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T19:44:17.200

将主视图分成两个部分视图。

然后，在调用主/外部应用程序时，调用仅包含内容的局部视图。

调用常规原生应用程序时，调用包含部分视图（标题和内容）的 VIEW。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T20:45:49.893

您可以创建一个辅助方法来构建将*show*参数保持在适当位置的 URL。例如：

```
public static string GetModifiedUrl(this UrlHelper helper, string url)
{
    string qstring = helper.RequestContext.HttpContext.Request.QueryString["show"];
    if (!string.IsNullOrEmpty(qstring)) url += "?show=" + qstring;
    return url;
} 
```

然后在视图中，例如：

```
<a href='@Url.GetModifiedUrl(Url.Action("Index", "Home"))'>Home</a> 
```

* * *

另一种选择是在第一个请求时为会话添加一个值，然后使用它。即，在控制器中放置一些逻辑，如下所示：

```
var qs = Request.QueryString["show"];
if (!string.IsNullOrEmpty(qs)) 
{
    Session["show"] = qs;
} 
```

然后在视图中，使用`@Session["show"]`代替`@Request.QueryString["show"]`来决定是否显示标题。

# c# - 当应用程序不活动时，Windows Phone 在一段时间内获取 gps 坐标

> ID：12324381
> 
> 赞同：1
> 
> 时间：2012-09-07T19:40:08.383
> 
> 标签：c#, windows-phone-7, windows-phone-7.1

如何在没有用户界面的情况下每 15 分钟获取一次 GPS 线，就像没有用户界面的后处理一样，当用户在应用程序上执行某些任务时我已经有了纬度和经度线，但我试图每 15 分钟记录一次 GPS 位置以制作地图路线所以用户可以看到他当天去的所有地方以及他所走的路线。

我知道如何获取电源线，我不知道当应用程序未激活时如何自动执行此操作有什么方法可以做到这一点？还是有其他方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T19:51:03.820

听起来你需要的是后台代理。[在此处](http://msdn.microsoft.com/en-us/library/windowsphone/develop/hh202961%28v=vs.92%29)查看文档。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T20:01:17.390

应用程序未运行时每 15 分钟可能不会飞行。您可能需要稍微更改一下规格。 [定期代理](http://msdn.microsoft.com/en-us/library/windowsphone/develop/hh202942%28v=vs.92%29)被限制为每 30 分钟运行一次，前后运行大约 10 分钟。此外，由于[Microsoft.Devices.Sensors](http://msdn.microsoft.com/en-us/library/windowsphone/develop/microsoft.devices.sensors%28v=vs.92%29) API 受到[限制，您](http://msdn.microsoft.com/en-us/library/windowsphone/develop/hh202962%28v=vs.92%29)*现在*将无法获取该位置。但是，您仍然可以使用[GeoCoordinateWatcher](http://msdn.microsoft.com/en-us/library/windowsphone/develop/system.device.location.geocoordinatewatcher%28v=vs.92%29)来访问手机位置的缓存版本。

这样做是因为一直使用 GPS 会很快耗尽电池电量。操作系统不会一直在 GPS 硬件上敲打一堆应用程序，而是尝试每 15 分钟获取一次位置，然后将信息分发给需要它的应用程序。

# c# - 寻求在 C# 中理解这种语法 [global::System.Data.Linq.Mapping.DatabaseAttribute(Name="AdventureWorks2008R2")]

> ID：12324390
> 
> 赞同：0
> 
> 时间：2012-09-07T19:40:55.830
> 
> 标签：c#, syntax, custom-attributes

我在我的项目中添加了一个 Linq to SQL 数据访问类，并将一个表拖到设计图面上，并查看了 .cs 文件中生成的代码。我试图理解这个片段：

```
[global::System.Data.Linq.Mapping.DatabaseAttribute(Name="AdventureWorks2008R2")]
public partial class AdventureWorksDataContext : System.Data.Linq.DataContext
{
    private static System.Data.Linq.Mapping.MappingSource mappingSource = new AttributeMappingSource(); 
```

我认为我以一般方式理解属性，甚至在这种特定情况下，但我真正的问题是“双冒号语法是什么意思？” 上述属性是在别处讨论的“全局属性”吗（例如，在 [http://www.switchonthecode.com/tutorials/creating-and-reading-global-attributes-in-csharp](http://www.switchonthecode.com/tutorials/creating-and-reading-global-attributes-in-csharp) [1](http://www.switchonthecode.com/tutorials/creating-and-reading-global-attributes-in-csharp)）

一个必然的问题是如何在 Google 和/或 StackOverflow 中搜索 :: 语法的含义？我试过把它放在引号内，最后发布了这个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T19:50:41.910

命名空间别名限定符 (::) 用于查找标识符。它始终位于两个标识符之间，如下例所示：

```
global::System.Console.WriteLine("Hello World"); 
```

命名空间别名限定符可以是`global`. 这会调用全局命名空间中的查找，而不是别名命名空间。

[http://msdn.microsoft.com/en-us/library/htccxtad.aspx](http://msdn.microsoft.com/en-us/library/htccxtad.aspx)
[http://msdn.microsoft.com/en-us/library/c3ay4x3d.aspx](http://msdn.microsoft.com/en-us/library/c3ay4x3d.aspx)

# java - 使用 NamedParameterJdbcTemplate 时如何转换枚举？

> ID：12324391
> 
> 赞同：0
> 
> 时间：2012-09-07T19:40:55.333
> 
> 标签：java, spring, jdbc, jdbctemplate

> **可能重复：**
> [在 BeanPropertyRowMapper 中为属性注册转换器](https://stackoverflow.com/questions/4884439/registering-converter-for-property-in-beanpropertyrowmapper)

使用 NamedParameterJdbcTemplate 调用 DB2 时，我收到以下异常：

例外：

```
org.springframework.beans.ConversionNotSupportedException: Failed to convert property value of type 'java.lang.String' to required type 'Gender' for property 'gender'; nested exception is java.lang.IllegalStateException: Cannot convert value of type [java.lang.String] to required type [Gender] for property 'gender': no matching editors or conversion strategy found 
```

话虽如此，我试图注册一个性别格式化程序，以及 GenderToString 和 StringToGender 转换器。Formatter 和 Converters 似乎都不起作用。

顺便说一句，我使用带有注释的 java 配置，而不是 XML 配置。所以，我使用一个带有 @Configuration 注释的自定义类来注册这些，它扩展了 WebMvcConfigurerAdapter。此外，在往返 JSP 和 Controller 时，这两种方法都可以正常工作。不知何故，当 Spring 处理我的 DB2 查询时，我觉得我遗漏了一些东西。

网络配置：

```
@Configuration
@EnableWebMvc // This replaces <mvc:annotation-driven />
@NoTrace
public class WebConfig extends WebMvcConfigurerAdapter {

    @Autowired
    private GenderFormatter genderFormatter;

    @Autowired
    private GenderToStringConverter genderToStringConverter;

    @Autowired
    private StringToGenderConverter stringToGenderConverter;

    @Override
    public void addFormatters(final FormatterRegistry registry) {

        registry.addFormatter(this.genderFormatter);
        registry.addConverter(this.genderToStringConverter);
        registry.addConverter(this.stringToGenderConverter);
    }
} 
```

道：

```
@Repository
public class PersonDAO {

    public Person retrieve(final int id) {

        final MapSqlParameterSource paramSource = new MapSqlParameterSource();

        paramSource.addValue("id", id);

        try {
            return this.namedParameterJdbcTemplate.queryForObject(
                RETRIEVE_PRIMARY_INSURED,
                paramSource,
                new BeanPropertyRowMapper<Person>(Person.class));
        } catch (final RuntimeException e) {
                    LOGGER.error("RuntimeException: ", e);
                    throw e;
        }
    }
}

public class Person {

private int id;
private Name name = new PersonName();
private Age age;
private Gender gender;

// getters and setters
} 
```

# git - Git 和处理资产文件

> ID：12324393
> 
> 赞同：1
> 
> 时间：2012-09-07T19:41:02.740
> 
> 标签：git, assets

我一直在尝试了解 git 和资产管理。我正在与一位正在创建资产并使用 Dropbox 同步它们的设计师合作。我会编写由 Dropbox 同步的源代码，并将资产和源代码一起提交。我很快意识到这是一个巨大的错误，例如设计师会更新资产，我将在 git 中乱搞，并且会丢失新资产。感谢上帝，它在 Dropbox 上。我现在将在本地机器上提交更改并让 Dropbox 持有中央存储库。当我这样做时，我不想在 Dropbox 端复制资产，我想知道对资产进行版本控制的最佳方法是什么。

*更新：*我正在使用的资产类型主要是图像文件，但它们会随大小而变化。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T20:23:13.727

您没有指定您在谈论哪种资产，但我认为它们是大型二进制文件。

Git 不是为此类文件设计的。当您尝试在 Git 下管理它们时，您不会获得太多收益，但会损失很多性能，因为它们巨大且压缩不良的增量会在 git 内部产生大量垃圾。

我建议您将源代码的版本控制和资产的版本控制分开。这样你就可以确保不会再发生事故，因为你们中的一个人不明白另一个人在做什么。Dropbox 可能不是资产方面最糟糕的工具。它还具有版本控制功能，并且易于使用。也许有更好的工具，但这是设计师的话题，而不是程序员的话题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-23T15:50:08.443

> 版本控制资产的最佳方法。

[git-annex](http://git-annex.branchable.com/)可以帮忙吗？它“允许使用 git 管理文件，而无需将文件内容检查到 git 中。”

# windows - 在 Windows 上编译 Vala 源代码

> ID：12324397
> 
> 赞同：7
> 
> 时间：2012-09-07T19:41:14.890
> 
> 标签：windows, vala

我使用以下命令编译了一个 vala 程序：

```
valac test.vala 
```

我当然可以在我的计算机上运行该程序，但是当我尝试在另一台计算机上运行 .exe 文件时，出现以下错误：

```
libglib-***.dll is missing on this computer 
```

这就是我的源代码的样子：

```
using GLib;
int main(string[] args)
{
    bool running = true;
    while(running)
    {
        print("Hello World\n");
    }
    return 0;
} 
```

错误很明显，但我能做些什么呢？提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-07T19:45:29.403

除了你的 exe 文件，你还需要安装你使用的所有库（glib、gio 等）和它们自己的依赖项（Gtk 需要 gdk、cairo、pango 等等）。

编辑：看看这个[关于 SO](https://stackoverflow.com/questions/5332402/vala-reducing-the-size-of-dependencies)的问题，列出了最小的依赖项。

# google-fusion-tables - 试图在表格中点击电话号码

> ID：12324399
> 
> 赞同：0
> 
> 时间：2012-09-07T19:41:17.170
> 
> 标签：google-fusion-tables

我在谷歌融合表中有我的客户列表。我需要让它在 iphone 上可以点击，无论是在表格中还是在卡片视图中（我可以在其中添加内联 css）

到目前为止没有任何工作..帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T21:57:35.987

您到底添加了哪些类型的链接？我们清理显示的数据以避免安全问题，并且我们可能过于热心。

# bash - 为什么这个 sed 命令不匹配空格？

> ID：12324403
> 
> 赞同：2
> 
> 时间：2012-09-07T19:41:31.447
> 
> 标签：bash, sed, grep, whitespace

这个 bash 脚本应该从 grep 结果中删除前导空格：

```
#!/bin/bash
grep --color=always $@ | sed -r -e's/:[[:space:]]*/:/' 
```

但它与空格不匹配。如果我将替换文本更改为“-”，则会显示在输出中，但它仍然不会删除空格。我试过没有“*”，转义“*”，使用“+”等，但没有任何效果。有谁知道为什么不？

（我在 Ubuntu 12.04 上使用 sed 版本 4.2.1。）

* * *

谢谢大家，这是我修改后的脚本，它显示 grep 颜色并修剪前导空白：

```
#!/bin/bash
grep --color=always $@ | sed -r -e's/[[:space:]]+//' 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-07T19:50:31.117

您需要删除 --color 选项才能使其正常工作。颜色代码混淆了 sed：

```
grep  $@ | sed -r -e's/:[[:space:]]*/:/' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-07T19:55:47.897

输出的颜色信息`grep`采用特殊字符序列的形式（请参阅[此 StackOverflow 问题](https://stackoverflow.com/q/9943187/978917)的答案），因此如果冒号是彩色的而空格不是彩色的，反之亦然，那么这意味着这些字符序列之一将介于它们，因此`sed`不会将它们视为相邻字符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T19:48:47.297

字符类 \s 将匹配空白字符和

例如：

```
$ sed -e "s/\s\{3,\}/  /g" inputFile 
```

将用两个空格替换至少 3 个空格的每个序列。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-07T19:52:01.487

```
grep --color=always $@ |sed 's/^ //g' 
```

删除前导空格。

# actionscript-3 - Flex 条件编译错误

> ID：12324407
> 
> 赞同：3
> 
> 时间：2012-09-07T19:41:52.303
> 
> 标签：actionscript-3, mxmlc

我正在执行以下操作：

```
CONFIG::TEST{
    rootURL = "myTestURL";
}

CONFIG::PROD{
    rootURL = "myProdURL";
} 
```

在编译器参数中，我有这个：

```
-locale en_US -define+=CONFIG::AIR,true -define+=CONFIG::WEB,false 
-show-unused-type-selector-warnings=false 
-define+=CONFIG::PROD,false  -define+=CONFIG::TEST,true 
```

但我对他们俩都有错误：

```
 Access of undefined property PROD.
 Access of undefined property TEST. 
```

非常奇怪的是，这段代码可以在我的 windows 机器上运行，但不能在我的 mac 上运行。我尝试了各种方法——干净地检查代码、清理项目、重新安装 Flash Builder。我还尝试更改参数的顺序，将最后两个放在选择器警告的前面。那也没有帮助。

有没有人见过这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T09:25:10.857

尝试先设置`-define=CONFIG::AIR,true`不`+=`使用或使用`-load-config+=configs.xml`

```
<?xml version="1.0" encoding="utf-8"?>
<flex-config>
  <compiler>
    <define append="true">
      <name>CONFIG::AIR</name>
      <value>true</value>
    </define>
     ...
  </compiler>
</flex-config> 
```

# c++ - 在 DLL 客户端中使用 dllimport 时出错

> ID：12324410
> 
> 赞同：3
> 
> 时间：2012-09-07T19:41:55.593
> 
> 标签：c++, visual-studio, visual-c++, dll

我目前正在使用互联网上很多地方提到的存储过程创建一个 DLL 和与之配套的客户端。基本上，创建一个在 Project.h 文件中实际定义 PROJECT_EXPORTS 的 DLL 项目。

像这样的东西：

```
// Assume the name of the project is SanProj and the header file is SanProj.h
#ifdef SANPROJ_EXPORTS
    #define SANPROJ_API __declspec(dllexport)
#else
    #define SANPROJ_API __declspec(dllimport)
#endif 
```

现在使用此标头的常规方法是将其包含在 API 类的所有标头中，并在 DLL 中使用 SANPROJ_EXPORTS 进行“导出”声明，并在用作客户端时使用“导入”声明。例如，假设我们有一个带有货币类的头文件：

```
// currency.hpp
#include "SanProj.h"
#include <ostream>
#include <string>

namespace SanProj {

    class SANPROJ_API Currency {

    public:
        Currency();
        const std::string& name();
        const std::string& code();
        bool empty() const;

    protected:
        std::string name_;
        std::string code_;
    };

    SANPROJ_API bool operator==(const Currency&,
                    const Currency&);

    SANPROJ_API bool operator!=(const Currency&,
                    const Currency&);

    SANPROJ_API std::ostream& operator<<(std::ostream& out, Currency& c);
} 
```

另一个带有特定货币的头文件：

```
// allccy.hpp
namespace SanProj {

    class SANPROJ_API USDCurrency : public Currency {
    public:
        USDCurrency() {
            name_ = "American Dollar";
            code_ = "USD";
        }
    };

    class SANPROJ_API CADCurrency : public Currency {
    public:
        CADCurrency() {
            name_ = "Canadian Dollar";
            code_ = "CAD";
        }
    };

} 
```

上述类构成了 DLL 项目的契约。现在让我们看一下客户端项目文件，它是一个具有功能的单个类`main`：

```
#include "currency.hpp"
#include "allccy.hpp"

#include <iostream>

using namespace SanProj;

int main(int argc, char* argv[])
{
    USDCurrency uccy;
    std::cout << uccy;
} 
```

假设所有引用/设置都已在 Visual Studio 项目中完成，我在尝试编译客户端时收到以下错误：

```
1>testdll.obj : error LNK2001: unresolved external symbol "__declspec(dllimport) public: __thiscall SanProj::USDCurrency::~USDCurrency(void)" (__imp_??1USDCurrency@SanProj@@QAE@XZ)
1>testdll.obj : error LNK2001: unresolved external symbol "__declspec(dllimport) public: __thiscall SanProj::USDCurrency::USDCurrency(void)" (__imp_??0USDCurrency@SanProj@@QAE@XZ) 
```

`dllimport`毫不奇怪，当我从文件中删除该部分`SanProj.h`并创建可执行文件时，此错误就会消失。

我的问题是，`dllimport`如果我们不能针对标头编译客户端，那么生成的 IDE 有什么意义？有没有办法我可以继续使用标头`dllimport`并`dllexports`删除链接器错误？另外，为什么要尝试解析`dllimport`LIB 文件中的符号？

TIA
/佐助

**编辑：** VisualStudio 使用的链接器命令；如您所见，它具有 LIB 文件。

> /OUT:"E:\vsprojects\SomeSln\Release\testdll.exe" /INCREMENTAL:NO /NOLOGO "E:\vsprojects\SomeSln\Release\SanProj.lib" "kernel32.lib" "user32.lib" "gdi32\. lib”“winspool.lib”“comdlg32.lib”“advapi32.lib”“shell32.lib”“ole32.lib”“oleaut32.lib”“uuid.lib”“odbc32.lib”“odbccp32.lib”/MANIFEST/ ManifestFile:"Release\testdll.exe.intermediate.manifest" /ALLOWISOLATION /MANIFESTUAC:"level='asInvoker' uiAccess='false'" /DEBUG /PDB:"E:\vsprojects\SomeSln\Release\testdll.pdb" / SUBSYSTEM:CONSOLE /OPT:REF /OPT:ICF /PGD:"E:\vsprojects\SomeSln\Release\testdll.pgd" /LTCG /TLBID:1 /DYNAMICBASE /NXCOMPAT /MACHINE:X86 /ERRORREPORT:QUEUE

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-07T22:30:55.940

**编辑：**当然我错了，因为*jcopenha*的答案就是答案。链接器抱怨缺少您未在 DLL 中导出的构造函数和析构函数。但是其余的仍然有效。

[...]

您应该有两个构建目标（或项目，取决于您使用的环境）。

第一个目标将构建 DLL。根据您报告的内容，此目标需要构建的文件是：

```
currency.hpp
allccy.hpp 
```

并且可能是基类“货币”的实现。您必须在预处理器定义中定义 SANPROJ_EXPORTS 才能使用 currency.hpp 文件作为 DLL 导出的函数的定义。该目标将生成一个 .DLL 文件，并且可能（取决于配置）一个 .lib 文件。它还可以生成其他文件，例如库导出的文本表示（.DEF 文件）。

然后，您需要构建您的应用程序（第二个目标/项目）：您需要的头文件与#include 部分的库完全相同。请务必不要定义 SANPROJ_EXPORTS 否则编译器将尝试再次导出符号而不是导入它们。然后您需要将以下设置添加到编译器和链接器：

*   将包含 .hpp 标头的目录添加到包含路径。

*   将包含 .lib 文件的目录添加到链接器 (lib) 的库路径。

*   告诉链接器也链接到您刚刚创建的 .lib（添加 lib 文件的全名，假设 DLL 被命名为“currency”，它可能是“currency.lib”。

添加此设置的位置和方式取决于您使用的工具链/环境和编译器。

最后，请确保编译后的可执行文件能够在项目文件夹或系统目录（在 PATH 中）中找到 DLL，否则将无法启动。如果可执行文件位于与用于构建 DLL 的文件夹不同的文件夹中，只需使用构建后步骤复制 DLL。

删除 _dllimport 部分将构建项目的事实可能是由于编译器找到了头文件和您要导出的函数的实现，并将它们全部静态构建到可执行文件中。

假设您不在 .NET “托管世界”中，并且我们正在谈论 Windows，如果您想分发您的库，还有一些要点需要考虑，但这是另一个答案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-07T20:52:44.990

它特别抱怨`USDCurrency`类的构造函数和析构函数，但您的代码并未将这些方法显示为装饰有`SANPROJ_API`.

而且由于您`USDCurrency`在标头中定义了构造函数，因此当您`dllimport`从类中删除时，`USDCurrency`您将获得当前项目中定义的实现，而不是对 DLL 中定义的实现的引用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-07T21:05:19.240

其他人都打败了这个，我也会。

重新编译器添加库，编译器就是这样做的：编译。链接器链接 (doh)。您的似乎是链接器配置问题，有多种方法可以解决此问题。

如果您有一个包含 DLL 项目和 EXE 项目的多项目解决方案文件 (.sln)，则可以通过将 DLL 项目设置为 EXE 项目中的 EXE 项目“引用”来建立显式依赖关系。在此，确保“链接库依赖项”标记为“真”。

References 配置实际上是从 VS2005 开始的 .NET 添加，尽管它仍然适用于标准 C/C++ 项目。您可以跳过它并将导入库配置为在 EXE 项目的链接器/输入设置上隐式链接。一个名为“链接库依赖项”的设置也可以在那里标记为 true。这还需要您配置解决方案项目依赖项（Build/Project Dependencies...）。在您的情况下，您选择您的 EXE 项目作为“取决于..”并检查 DLL 项目。这样可以确保在重建 DLL 项目并创建新的导入库时重新链接您的 EXE。

如果需要，可以提供所有这些的屏幕截图。经过几次复飞后设置它已成为旧习惯。在这一点上，我相当确定我可以蒙住眼睛。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-16T09:25:24.340

似乎没有解决这个问题的办法。我最终放弃了在`dllimport`客户端代码中使用并受到性能影响。:(

# android - 在 android 中执行 120k 查询

> ID：12324413
> 
> 赞同：0
> 
> 时间：2012-09-07T19:42:11.827
> 
> 标签：android, sqlite

我正在为 sqlite android 做某种基准测试。如果我在执行前预加载 120k，大多数设备会有足够的内存吗？在执行查询时，还有其他线程正在运行，因此内存可能是问题所在。如何使用 onLowMemory() 方法？似乎没有太多使用该方法的示例。感谢您的任何建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T20:08:34.297

使用该方法就像在 Activity 中覆盖它一样简单。

但是，请仔细阅读[文档：](http://developer.android.com/reference/android/app/Activity.html#onLowMemory%28%29)

> 这在整个系统内存不足时调用，并且希望主动运行的进程试图勒紧裤腰带。虽然***没有定义*****调用它的确切时间，但***通常它会**在所有后台进程*都被*杀死**的时候发生，即***在*达到**我们希望避免杀死的托管服务和前台 UI 的进程终止点之前。*
> 
>  *想要变得更好的应用程序可以**实现此方法来释放它们可能持有的任何缓存或其他不必要的资源。**从这个方法返回后，系统会为你执行一次 gc。*

 *我不确定（并且文档没有定义）*“后台进程”*是否包括`AsyncTask`实例和服务，或者只是后台应用程序，但我猜是这样。

所以，当这个方法被调用时（如果它被调用过），系统已经杀死了它可能的一切（优先级低于你的活动），现在要求你释放内存中任何不必要的资源。

所以，如果你想对低内存做出反应，这可能已经太晚了。

* * *

至于*大多数*Android设备是否会耗尽内存的一般问题，我不知道。问题是，设备变化很大。

我还发现很难想象任何*真实的实时*情况，在这种情况下，您需要在执行之前预加载（或堆叠）120k 个查询。您可以轻松堆叠 200 并提交这些，而不是再堆叠 200 等等。

* * *

我不确定您为什么需要对此进行基准测试，但请不要对应用程序数据库中的默认条目执行 120k 查询。

您可以使用已填充的数据库交付您的应用程序，然后从`assets/`-folder 复制它。见[android-sqlite-asset-helper](https://github.com/jgilfelt/android-sqlite-asset-helper)*

# django - Django urls.py 没有更新以包含 heroku url？

> ID：12324421
> 
> 赞同：0
> 
> 时间：2012-09-07T19:42:46.640
> 
> 标签：django, heroku, django-urls

我正在尝试在 Heroku 上部署我的 Django 应用程序，我正在按照教程进行操作，但是当我去尝试打开网站时：

```
heroku open 
```

我收到错误：

```
Request URL:    http://nameless-dawn-7713.herokuapp.com/
Using the URLconf defined in crunchWeb.urls, Django tried these URL patterns, in this order:

^crunchApp/results$
^crunchApp/contact$
^admin/

The current URL, , didn't match any of these. 
```

即使在运行“heroku open”之前，我的 URLs.py 文件看起来像这样（已保存）：

```
from django.conf.urls import patterns, include, url

from django.contrib import admin
admin.autodiscover()

urlpatterns = patterns('crunchApp.views',

url(r'^crunchApp/results$', 'results'),
url(r'^http://nameless-dawn-7713.herokuapp.com/$', 'contact'),
url(r'^crunchApp/contact$', 'contact'),
url(r'^admin/', include(admin.site.urls)), 
```

)

我想我可能必须在命令之前更改 urls.py：

```
git commit -m "my django app" 
```

但在命令之前我不知道它需要的 URL：

```
heroku create 
```

有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T20:53:45.233

为什么你`url(r'^http://nameless-dawn-7713.herokuapp.com/$', 'contact')`的 urls 文件中有？事实上，这些 URL 应该是相对于您的应用程序的，并且您不应该在上传到 Heroku 之前更新此文件（如果它在本地工作，它应该在 Heroku 上工作而无需对此文件进行任何更改）。

如果您想将联系人视图连接到您的基本 URL (http://nameless-dawn-7713.herokuapp.com/)，您应该使用如下内容：

```
url(r'^$', 'contact') 
```

希望这可以帮助 ！

# java - 当您将鼠标悬停在链接另一个 div 上时，显示 div 中的图像会发生变化

> ID：12324426
> 
> 赞同：1
> 
> 时间：2012-09-07T19:43:17.360
> 
> 标签：java, javascript, jquery, html, css

我有两个`DIV`元素。
在里面`DIV_1`我希望在被调用时显示某些图像，`DIV_2`我会有很多`LINKS`。

当每个人`LINK`悬停**时**`DIV 2`，我希望与**链接相关的图像**出现在 中，如果另一个人**悬停**，则更改为另一张图片，但当鼠标箭头未悬停在特定的.****`DIV 1``LINK`**`LINK`******

 ********Javascript**

```
function showIt(imgsrc) 
{
    document.getElementById('bottle').src=imgsrc;
    document.getElementById('bottle').style.display='block';
}

function hideIt()
{
    document.getElementById('bottle').style.display='none';
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T19:52:35.887

将此代码添加到您的链接：

```
<a href="#" onmouseover="showIt('some_image.jpg')" onmouseout="hideIt()" >...</a> 
```

然而它看起来不会很漂亮。考虑使用 jQuery。

**编辑：**

使用 jQuery 你可以这样做：

HTML：

```
<a href="#" data-src="some.jpg" class="changeImage" >...</a>
<a href="#" data-src="another.jpg" class="changeImage" >...</a>
...
<img class="bottle" /> 
```

JavaScript

```
$(function(){
  $('.changeImage').hover(function(){
         $('.bottle').attr('src',$(this).attr('data-src'));
         $('.bottle').show();
     },
     function(){
         $('.bottle').hide();
     });

}) 
```

您可以通过将动画时间作为参数提供给 show() 和 hide() 来调整动画速度。放置在标签的 data-src 属性中的图像的 URL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T19:59:06.590

您可能考虑的另一种方法是`background-image`在 CSS 中设置属性，然后添加`:hover`伪类以更改为新图像，从而使您完全不必处理 Javascript。

使用该`transition`属性，您甚至可以在两个图像之间添加淡入淡出，而无需您做任何额外的工作，或者需要包含另一个库，如 jQuery。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T20:00:49.220

这里有一些你可以使用的简单 jQuery：

```
$('#DIV1').delegate('a', 'mouseenter mouseleave', function (e) {
    if (e.type === "mouseenter") {
        switch ($(this).attr('href')) {
            case "#link1":   
                $('#DIV2').html('<img src="image1.jpg" />');
                break;
            case "#link2":   
                $('#DIV2').html('<img src="image2.jpg" />');
                break;
        }
    } else if (e.type === "mouseleave") {
        $('#DIV2 img').fadeOut();
    }
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-07T20:01:27.000

## *[jsBin 演示](http://jsbin.com/opefik/4/edit)*

如果你有这样的事情：

```
 <div id="images">
    <img src="img1.jpg" alt="" />
    <img src="img2.jpg" alt="" />
    <img src="img3.jpg" alt="" />  
  </div>

  <ul id="links">
    <li><a href="#">Link1</a></li>
    <li><a href="#">Link2</a></li>
    <li><a href="#">Link3</a></li>
  </ul> 
```

CSS：

```
#images img{position:absolute;display:none;} 
```

比你只需要这个：

```
$('#links li').on('mouseenter mouseleave',function(e){
    $('#images img').stop().fadeTo(300,0);    // do on mouseenter and mouseleave
    if(e.type=='mouseenter'){                 // do just on mouseenter
        $('#images img').eq( $(this).index() ).stop().fadeTo(300,1);
    }
}); 
```******

# c# - 如何拥有一个通用存储库来使用 EF 异步加载数据？

> ID：12324427
> 
> 赞同：0
> 
> 时间：2012-09-07T19:43:18.497
> 
> 标签：c#, silverlight, entity-framework, wcf-ria-services, silverlight-5.0

我在具有 RIA 服务的 Silverlight 5.0 应用程序中使用实体框架。

我意识到要从客户端获取数据，您必须在异步过程完成时从事件中获取该数据。

我在想是否可以创建一个通用存储库，其中包含 DatabaseContext 并获取数据。

有人可以指导如何开始这部分。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T19:49:45.520

Joel 在这里有一个很棒的教程：http: [//joel.net/generic-iqueryable-repository-for-ado.net](http://joel.net/generic-iqueryable-repository-for-ado.net)，它解释了通用存储库以及如何实现一个。

编辑：异步部分：我不确定（现在仍然不确定）您是否希望客户端和服务器之间的异步部分或实际存储库是异步的。我认为是后者，所以我将首先解决它。最简单的方法是给存储库一个委托，存储库将在执行完查询后立即调用该委托。

```
public class MyRepository:IMyrepository
{
    public IEnumerable<MyReturnedObject> GetThoseObjects(Delegate ToCallWenDone,rest of parameters)
    {
         //get the data
         //invoke the delegate
    }
} 
```

如果您希望来自客户端的调用是异步的，请查看这篇文章：[http ://forums.silverlight.net/p/168335/385493.aspx](http://forums.silverlight.net/p/168335/385493.aspx)

希望这可以帮助。

# html - 如何将 2 个或更多 C++ MFC OCX 的控件组合到 1 个 OCX？

> ID：12324429
> 
> 赞同：1
> 
> 时间：2012-09-07T19:43:29.890
> 
> 标签：html, mfc, ocx

我们已经下令将几个（C++）OCX（所有这些都使用 MFC 作为静态库）合并到 1 个 OCX 中，以节省多个 C 运行时副本的下载开销。管理层担心共享 DLL 设置可能会在某些版本的 windows 上导致安装问题。我不愿意玩“你打赌你的工作”他们错了。

我已经合并了 2，将 1 转换为静态库并将其链接到另一个并将链接类型库添加为资源。我正在尝试通过其 guid 将链接的控件加载到 ASPX 中。IE 找到合并的 OCX（因为我修改了注册表）。组合的 OCX 加载，但链接的控件不加载。

为了强制它加载，我在 OCX“应用程序”代码中手动创建了一个新实例。现在，它不会接收来自 IE 的命令或发送事件。创建链接控件的框架失败，但 LastError 为 0。

我尝试过其他方法来合并控件；这是第一个构建和注册的。

如何将 2 个或更多 OCXen 的控件组合为 1 个？如何获得有关我的链接控件未能创建其框架的一些诊断信息？我错过了什么？

# wordpress - localhost/wordpress/wp-content/themes/mysitename 上的空白页

> ID：12324435
> 
> 赞同：0
> 
> 时间：2012-09-07T19:44:05.733
> 
> 标签：wordpress, screen, localhost, mamp

我正在创建自己的 WordPress 主题，并使用 MAMP 在本地进行设置。一切正常，当我在浏览器中输入 localhost/wordpress 时，主题就会出现。但是当我输入 localhost/wordpress/wp-content/themes/mysitename 时，它​​只是一个白色的空白页。

在主题下的 WordPress 仪表板中，我的主题旁边的图像允许您激活它也是空白的。

我怎样才能让它出现？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T19:52:49.420

WordPress 使用前端控制器系统，其中所有站点流量都通过站点根目录中的 index.php 文件。

将浏览器定向到“localhost/wordpress/wp-content/themes/mysitename”会绕过主控制器，这意味着您完全绕过 WordPress 并尝试直接访问服务器上的文件。该目录需要在其中包含一个 index.html 或 index.php 文件才能产生某种输出。

为了在管理中的自定义主题旁边有一个图像，您需要创建主题的屏幕截图并将其命名为“屏幕截图”（可以是 jpg 或 png）并将其放在主题的根文件夹中。在其他 WP 主题文件夹中查看我正在谈论的示例。

# node.js - 使用 nodejs 管理第三方库（不是节点模块）？

> ID：12324439
> 
> 赞同：5
> 
> 时间：2012-09-07T19:44:35.967
> 
> 标签：node.js, twitter-bootstrap, dependencies

我正在使用`package.json`file 来定义 nodejs 要求，`npm update`当然也可以正常工作。

如何使用节点管理（更新简单的方法）其他第三方库？例如：

```
https://github.com/documentcloud/backbone.git
https://github.com/twitter/bootstrap.git 
```

在`vendor`文件夹中。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-11T18:17:57.127

**总结：**我想你想用[http://twitter.github.com/bower/](http://twitter.github.com/bower/)

**详细信息：** 有两种方法可以理解您的问题：

*   如何管理/更新非`npm`代码？
*   如何管理/更新客户端 javascript 资产？

这个问题的措辞是前者，但从你所包含的例子中，我认为你想问后者。

在**服务器端代码**的情况下，只要坚持所有代码都随`npm`-style `package.json`manifest 一起提供。如果代码的作者没有响应，请分叉并添加清单。没有任何借口。

对于**客户端代码**，情况就不同了。包管理没有既定的标准，但是它是一个被广泛认可的问题并且是非常活跃的开发领域**。**最近有几个挑战者崛起，试图抢占主导地位：[BPM](http://getbpm.org)、[Jam](http://jamjs.org/)或[Ender](http://ender.no.de/)。这是您的选择，它们在这里得到了很好的总结：[Web assets 的包管理器](https://stackoverflow.com/questions/7346716/a-package-manager-for-web-assets)

但是，以上所有内容都解决了一个有点**过于雄心勃勃的问题**——他们试图整理这些模块到浏览器的传输（通过延迟加载、require-js 样式、依赖解析、连接/缩小等）。这也使它们更加难以使用。

该领域的新进入者是来自 Twitter的[Bower 。](http://twitter.github.com/bower/)它只关注文件夹中**的**下载/更新生命周期，`vendor`而忽略浏览器交付。我喜欢这种方法。你应该检查一下。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-11T11:04:37.417

你可以去 git 子模块：

[http://git-scm.com/book/en/Git-Tools-Submodules](http://git-scm.com/book/en/Git-Tools-Submodules)

[使用别人的 repo 作为 GitHub 上的 Git 子模块](https://stackoverflow.com/questions/5252450/using-someone-elses-repo-as-a-git-submodule-on-github)

[**更新 1** ] 在存储库的根目录执行此操作：

```
git submodule add git://github.com/documentcloud/backbone.git vendors/backbone
git submodule add git://github.com/twitter/bootstrap.git vendors/bootstrap 
```

检查更多信息：[http ://skyl.org/log/post/skyl/2009/11/nested-git-repositories-with-github-using-submodule-in-three-minutes/](http://skyl.org/log/post/skyl/2009/11/nested-git-repositories-with-github-using-submodule-in-three-minutes/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-14T17:47:44.103

虽然这可能不是 nodejs 的方式，并且一些纯粹主义者可能会抱怨，但[Composer](http://getcomposer.org/download/)会做你想做的。即使 Composer 与 PHP 项目一起使用，它也没有理由不能用于管理nodejs 项目的 3rd 方**非 npm存储库。**显然，第 3 方库最好包含一个 package.json，但这不会发生。我在我当前的 nodejs 应用程序上尝试了这个，它对我来说非常有效。

优点：

*   一个 json 文件指定没有 package.json 文件的自定义外部依赖项
*   自定义包在项目文件夹中的存储位置
*   适用于私有存储库和最初不用于 nodejs 的存储库

缺点：

*   需要 php cli
*   更新依赖的额外步骤
*   依赖项的额外 json 文件

这里怎么做（你需要能够从 cli 运行 php）：

**1\. 下载 Composer**（直接进入你的根 nodejs 项目文件夹）

```
curl -s https://getcomposer.org/composer.phar > composer.phar 
```

**2.创建composer.json文件**（在项目的根目录下）

```
{
    "repositories": [
        {
            "type": "package",
            "package": {
                "name": "twitter/bootstrap",
                "version": "2.0.0",
                "dist": {
                    "url": "https://github.com/twitter/bootstrap/zipball/master",
                    "type": "zip"
                },
                "source": {
                    "url": "https://github.com/twitter/bootstrap.git",
                    "type": "git",
                    "reference": "master"
                }
            }
        }
    ],
    "require": {
        "twitter/bootstrap": "2.0.0"
    }
} 
```

**3.运行作曲家更新**

```
php composer.phar update 
```

`vendor`这将按照您的要求将包下载到文件夹中：

```
├── vendor
│   ├── ...
│   ├── composer
│   │   └── installed.json
│   └── twitter
│       └── bootstrap
│           ├── LICENSE
│           ├── Makefile
│           ├── README.md
│           ├── docs
│           │   ├── assets
│           │   └── ...
│           ├── img
│           │   ├── glyphicons-halflings-white.png
│           │   └── glyphicons-halflings.png
│           ├── js
│           │   ├── bootstrap-affix.js
│           │   └── ...
│           ├── less
│           │   ├── accordion.less
│           │   └── ...
│           └── ... 
```

# jquery - 无法在 ajax jquery 上为 release() 获取 jcrop 对象

> ID：12324442
> 
> 赞同：0
> 
> 时间：2012-09-07T19:45:17.417
> 
> 标签：jquery, ajax, jcrop

大家，早安，

我与这个问题作斗争了 3 个小时，但我找不到赢得 XD 的方法拇指基于选择。

这很好用......真正的麻烦是我需要在模式中发布选择，这是我遵循 jcrop 网站上的说明但我无法退出的问题。

现在我已经解释了问题，是时候写一些代码了：D

```
var FileUploader_img_frontale = new qq.FileUploader({
    'element':document.getElementById("img_frontale"),
    'debug':false,
    'multiple':false,
    'action':'http://url.com/upload',
    'allowedExtensions':['jpg','png','jpeg','gif'],'sizeLimit':10485760,
    'onComplete':function(id, fileName, responseJSON){ 
          $('#pbar_img_frontale').css('display','none');
      $('#img-front-body').html('<img id="cropbox1" src="url.com/images/tmp/b444ac06613fc8d63795be9ad0beaf55011936ac/'+responseJSON.filename+'" style="max-width:400px;max-height:400px;"/>');

          function showCoordsFront(c){       $('#_opera_img_frontale').val(responseJSON.filename+'|'+c.x+'|'+c.y+'|'+c.x2+'|'+c.y2+'|0'); }
            $('#cropbox1').Jcrop({
                boxHeight: 400,
                boxWidth:400,
                trueSize: [responseJSON.width,responseJSON.height],
                allowResize: true,
                aspectRatio: 4/3,
                onChange: showCoordsFront,
                onSelect: showCoordsFront,
            },function(){ jcrop1 = this; });
            $('#_opera_img_frontale').val(responseJSON.filename);
            front_uploaded=1;
            $('#modal_img_front').modal('toggle');
         },'onProgress':function(id, fileName, loaded, total){ $('#pbar_img_frontale').css('display','block'); $('#bar_img_frontale').css('width',((loaded*100)/total)+'%'); },'params':{'PHPSESSID':'400659255ef857e043b5ab1651406f50','YII_CSRF_TOKEN':'c8248bc34b5371edf162292691dbcf23dc1e697a'}}); 
```

这是上传文件的jquery ajax，你可以看到我已经放了

```
 function(){ jcrop1 = this; } 
```

需要抓取 obj，但是当我不通过 ajax 上传图像时它可以工作，但我不明白如何处理它导致释放按钮在 jquery 准备好时将 jcrop1 设置为未定义

```
var jcrop1;
$("#jcrop1-release").click(function(){
   jcrop1.setSelect([0,0,0,0]);
   jcrop1.release();
}); 
```

任何人都可以帮助我吗？

提前致谢

法比奥

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T21:09:36.367

好的，伙计们，我已经解决了这个问题……问题出在脚本的框架管理中……它将放置多个 $(document).ready() 实例，因此一个var在一个中，而ajax在另一个中……所以解决方案是绕过document.ready并将全局变量放在外面，它完成了它的工作！！！

法比奥

# java - servlet 和代理 servlet 之间的区别

> ID：12324450
> 
> 赞同：0
> 
> 时间：2012-09-07T19:45:38.933
> 
> 标签：java, javascript, servlets, proxy-server

servlet 和代理 servlet 之间有什么区别（或者简而言之，代理在这种情况下意味着什么）？如何/为什么在 AJAX/Javascript 中通过代理 servlet 而不是 http 调用路由后端调用有助于解决跨域问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T19:55:28.233

据我所知，ProxyServlet 本身并不为请求提供服务，而是寻求另一种资源（可能在同一战争/不同战争/甚至不同机器中）。但是，调用客户端不知道此委托。

[HTTP Proxy Servet](http://www.servletsuite.com/servlets/httpproxy.htm) 是 ProxyServlet 的一个很好的例子

# visual-studio - 如何在 Visual Studio 中使自动换行尊重缩进？

> ID：12324453
> 
> 赞同：6
> 
> 时间：2012-09-07T19:45:55.453
> 
> 标签：visual-studio, visual-studio-2012, word-wrap

Visual Studio 具有自动换行功能，但令人沮丧的是，它忽略了行缩进，使文本难以阅读。其他文本编辑器（Notepad++、Sublime Text）模拟换行的缩进，让代码更易阅读

如何使 Visual Studio 2012 智能换行？聪明？

在 Notepad++ 中看到，'of beer' 被包装，与 Console 一致

![记事本++](../Images/9ad167481fc996f328bac7329c594164.png)

在 Visual Studio 中，“啤酒瓶”突出到缩进中，使代码形状难以阅读。

![对比](../Images/6bad4b529fe66e243324691ab96a61e4.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T13:20:46.470

好消息：在 Visual Studio 2013 中，自动换行正确地尊重缩进！

但是，它还存在许多问题（例如，围绕 Home/End 键）。[请在https://visualstudio.uservoice.com/forums/121579-visual-studio/suggestions/5574507-fix-behaviour-of-home-end-keys-when-word-wrap-is-e](https://visualstudio.uservoice.com/forums/121579-visual-studio/suggestions/5574507-fix-behaviour-of-home-end-keys-when-word-wrap-is-e)投票

* * *

唉，这是不可能的。[在http://visualstudio.uservoice.com/forums/121579-visual-studio/suggestions/3285423-wrap-lines-intelligently-simulating-indents-](http://visualstudio.uservoice.com/forums/121579-visual-studio/suggestions/3285423-wrap-lines-intelligently-simulating-indents-)给 Visual Studio 开发人员的错误。请为它投票！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T19:07:08.813

这个扩展做我想要的，但只适用于 Visual Studio **2010**：/

[http://visualstudiogallery.msdn.microsoft.com/ac95f80f-6cfd-4b67-b0fd-e9c5c8fb27de](http://visualstudiogallery.msdn.microsoft.com/ac95f80f-6cfd-4b67-b0fd-e9c5c8fb27de)

注意。我尝试破解扩展清单以使其在 2012 年安装，但行为出现了问题。扩展需要真正的更新

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-23T14:54:32.743

对于 VS2012，有一个扩展 [http://visualstudiogallery.msdn.microsoft.com/a5b5001e-fe7a-4c08-9cf5-96ae5892088a](http://visualstudiogallery.msdn.microsoft.com/a5b5001e-fe7a-4c08-9cf5-96ae5892088a)

它做同样的事情......

# python - 如何在创建列表时保持列表的排序

> ID：12324456
> 
> 赞同：13
> 
> 时间：2012-09-07T19:46:23.240
> 
> 标签：python, data-structures, multidimensional-array, sorting

我正在读取一个文件并在 Python 中提取包含一些字符串和一些数字的数据。我将此信息存储为列表列表，如下所示：

```
dataList = [

['blah', 2, 3, 4],

['blahs', 6, 7, 8],

['blaher', 10, 11, 12],

] 
```

我想保持 dataList 按子列表的第二个元素排序：dataList[][1]

我想当我想添加它们时我可以使用 insort 或 bisect ，但我不知道如何让它查看子列表的第二个元素。

这里有什么想法吗？我只是将数据附加到末尾，然后进行线性排序以稍后再查找内容。但是，在这里放入几十个数千个子列表，然后搜索 100k 个项目，这需要一段时间。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-07T19:51:55.020

```
dataList.sort(key=lambda x: x[1]) 
```

*这会按每个项目中的第二个元素对列表进行适当的排序。*

正如评论中所指出的，只排序一次（最后）效率更高。Python 的内置排序方法已经过**大量优化，可以快速运行**。经过测试，在各种大小的列表中，内置排序似乎始终比使用另一个答案中建议的[堆方法](https://stackoverflow.com/a/12324545/1240268)快 3.7 倍左右（我测试了高达 600000 的大小）。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-07T19:53:35.300

取决于几件事，但首先想到的是使用 heapq 模块：

```
import heapq
heap = []
for row in rows:
    heapq.heappush(heap, (row[1], row)) 
```

这将创建一个充满元组的堆，其中第一个元素是您要排序的元素，第二个元素是行。

从堆中读取它们的最简单方法是复制它然后弹出项目：

```
new_heap = list(heap)
while new_heap:
    _, row = heapq.heappop(new_heap)
    print row 
```

将每个项目插入堆的运行时间是`O(lg N)`，因此创建堆需要`O(N lg N)`时间，从堆中弹出项目也需要`O(lg N)`时间，因此需要时间`O(N lg N)`来遍历它。

如果这些权衡不理想，您可以使用二叉搜索树（标准库中不存在，但[它们很容易找到](http://pypi.python.org/pypi/bintrees/1.0.0)），或者像其他评论者建议的那样，在阅读后对行进行排序：`rows.sort(key=lambda row: row[1])`.

现在，在实践中，除非您要处理大量行，否则在加载列表后对列表进行就地排序（即使用该`.sort()`方法）几乎肯定会更快......所以尝试一些事情看看什么效果最好。

最后，`bisect`这是一个糟糕的主意，因为插入 Python 列表需要`O(N)`时间，因此使用 bisect 插入项目将需要*每个项目*`O(N lg N)`的时间，因此需要总时间。*`O((N lg N) * N) = O(N**2)`*

# php - 如何在注销时完全销毁会话变量

> ID：12324460
> 
> 赞同：0
> 
> 时间：2012-09-07T19:47:00.557
> 
> 标签：php, session-variables

当我将用户从我正在构建的应用程序中注销时，我使用`session_destroy();`

但是当我回到页面时，仍然设置了所有会话变量。

如何完全销毁所有会话变量并最终要求用户重新登录？

这是我的代码：

```
session_unset(); // clears all session variables
$_SESSION = array();
session_destroy(); // deletes session id 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T19:48:57.387

使用 session_destroy() 后，会话 cookie 被删除，会话不再存储在服务器上。$_SESSION 中的值可能仍然可用，但它们不会在下一页加载时出现。

如果您需要清除 $_SESSION 的值，请将数组设置为空数组：

当然，一旦你调用 session_destroy，你就不能在另一个页面上访问 $_SESSION 的值，所以没关系。如果你担心的话。

尝试以下操作：

```
session_destroy();
$_SESSION = array(); // Clears the $_SESSION variable 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T19:50:19.133

您肯定没有调用 session_destroy()，您的代码可能无法访问它。

发布更多代码，以便我们为您提供帮助

# android - 创建带有更新的新闻应用程序 android

> ID：12324462
> 
> 赞同：1
> 
> 时间：2012-09-07T19:47:02.647
> 
> 标签：android, sqlite, updates, feed

我正在尝试制作一个显示我网站上的最新消息的 android 应用程序，我对这两件事特别感到困惑？

1.每次手机自动联网时，我如何才能从我的网站获取新闻？

2.我将如何存储这些信息并随后将其用于设备上的更新？

我从谷歌找到了这段代码，我是否朝着正确的方向前进？：

```
 public abstract class BaseFeedParser implements FeedParser {

    // names of the XML tags
    static final String PUB_DATE = "pubDate";
    static final  String DESCRIPTION = "description";
    static final  String LINK = "link";
    static final  String TITLE = "title";
    static final  String ITEM = "item";

    final URL feedUrl;

    protected BaseFeedParser(String feedUrl){
        try {
            this.feedUrl = new URL(feedUrl);
        } catch (MalformedURLException e) {
            throw new RuntimeException(e);
        }
    }

    protected InputStream getInputStream() {
        try {
            return feedUrl.openConnection().getInputStream();
        } catch (IOException e) {
            throw new RuntimeException(e);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T22:21:52.290

您找到的这段代码是一种类似于 XML 解析器的方法。基本上，它应该做的是从您的网站接收和解析信息。可以在[此处](http://developer.android.com/training/basics/network-ops/xml.html)找到有关在 Android 中解析 XML 的更多信息。

回答您的问题：

1.  您可以通过其 RSS 提要从您的网站获取新闻。

    这不是一项微不足道的任务。你应该：

    *   使用指向您网站的 RSS 链接发出`HTTP`请求，以获取 XML 提要作为输入流。`HttpURLConnection`你可以通过课堂来实现这一点。更多细节[在这里](http://developer.android.com/reference/java/net/HttpURLConnection.html)。确保将`<uses-permission android:name="android.permission.INTERNET" />`权限添加到`AndroidManifest.xml`

    *   获得 XML 后，使用提要解析器对其进行解析并获取`RssItems`. 一个`RssItem`可能看起来像这样：

        ```
        public class RSSItem {

            private String title;
            private String description;
            private String category;
            private String pubdate;
            private String link;

           //Getters and setters here
        } 
        ```

    *   现在您应该有 a`List<RssItem>`并显示 a 中的项目`ListView`。
2.  您可以将一堆存储`RSSItem`在`SQLite Database`. 您的数据库可能只有一个表，其中包含 5 个项目属性（标题、描述等）作为列 + 一列作为 id。更多关于数据库的信息[在这里](http://developer.android.com/guide/topics/data/data-storage.html#db)。

关于`every time the phone is connected to internet automatically`：

从用户的角度来看，我不希望 RSS 新闻应用程序在每次手机连接到 Internet 时都不断地获取提要。这是因为性能问题（电池消耗、数据流量）。如果手机始终连接到 Internet，在此期间它不会获取任何内容怎么办？

相反，我希望这种应用程序具有刷新机制，以便在我想要的时候获取新闻（也许实现一个按钮）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T20:22:18.720

You could use a BroadcastReceiver that get's notified whenever a connectivity change occurs. See more about this here:

[http://www.grokkingandroid.com/android-getting-notified-of-connectivity-changes/](http://www.grokkingandroid.com/android-getting-notified-of-connectivity-changes/)

[http://www.grokkingandroid.com/android-tutorial-broadcastreceiver/](http://www.grokkingandroid.com/android-tutorial-broadcastreceiver/)

But you probably end up making too many requests - because the user will use your app only occasionally, while the BroadcastReceiver gets notified of *every* change.

Since you are displaying a feed why not load the data when the user actually uses your app and until they the newest feed items are available present the existing news items.

*I* would prefer an app that loads data at startup over an app that drains the battery of my device any time - unless I use the app and the up-to-date data constantly (like email).

As another possibility you might want to have a look at Google Cloud Messaging. In this case changes are pushed in a battery-friendly way.

For your second question: For a feed I probably would use the SQLite database available on all Android devices.

# tableview - javafx如何隐藏tableview的背景标题？

> ID：12324464
> 
> 赞同：5
> 
> 时间：2012-09-07T19:47:12.337
> 
> 标签：tableview, javafx

我正在尝试开发自动完成文本，它在 tableview 弹出窗口中显示建议的下拉列表，我遇到了一个问题，即如何在 javafx 2.1 中隐藏 tableview 的整个标题列

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-07T20:15:06.497

将自定义样式表应用于表格：

```
table.getStylesheets().addAll(getClass().getResource("hidden-tableview-headers.css").toExternalForm()); 
```

文件`hidden-tableview-headers.css`放置在与加载 css 资源的类相同的位置并包含以下行：

```
.column-header-background { visibility: hidden; -fx-padding: -1em; } 
```

该`visibility: hidden`属性告诉 JavaFX 不要绘制节点，但仍会在标题所在的位置留出空间。由于标题是 1 行文本高度，您可以通过设置来告诉不可见标题不占用任何空间`-fx-padding: -1em;`。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-17T18:31:44.800

解决方法很简单；在 tableview 渲染后，我们可以获取 table header 并使其不可见，因此 table view 布局更改时 table header 不必重新布局。为了捕捉表格渲染完成，我们可以使用宽度属性更改，并隐藏表格标题

这是代码：

```
tableView.widthProperty().addListener(new ChangeListener<Number>() {
        @Override
        public void changed(ObservableValue<? extends Number> ov, Number t, Number t1) {
            // Get the table header
            Pane header = (Pane)tableView.lookup("TableHeaderRow");
            if(header!=null && header.isVisible()) {
              header.setMaxHeight(0);
              header.setMinHeight(0);
              header.setPrefHeight(0);
              header.setVisible(false);
              header.setManaged(false);
            }
        }
    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-07T14:36:17.840

如果您不想添加额外的 .css 文件，您可以使用现有的 css：

```
.hide-header .column-header-background { 
    visibility: hidden; -fx-padding: -1em;
} 
```

`.hide-header`您应该添加到 java 代码中的随机名称在哪里：

```
table.getStyleClass().add("hide-header"); 
```

# jsf - 查找用户ip地址

> ID：12324466
> 
> 赞同：29
> 
> 时间：2012-09-07T19:47:15.567
> 
> 标签：jsf, jsf-2, ip-address

我已经使用 JSF 2.0 创建了 Web 应用程序。我已将其托管在托管站点上，并且托管站点的服务器位于美国。

我的客户想要所有访问该站点的用户的详细信息。如何在 JSF 中找到用户的 IP 地址？

我试过了

```
 try {
        InetAddress thisIp = InetAddress.getLocalHost();
        System.out.println("My IP is  " + thisIp.getLocalHost().getHostAddress());
    } catch (Exception e) {
        System.out.println("exception in up addresss");
    } 
```

但是，这仅给了我站点的 IP 地址，即服务器 IP 地址。

有人可以告诉我如何获取使用 Java 访问该网站的 IP 地址吗？

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2012-09-08T07:21:53.733

我继续前进

```
HttpServletRequest request = (HttpServletRequest) FacesContext.getCurrentInstance().getExternalContext().getRequest();
String ipAddress = request.getHeader("X-FORWARDED-FOR");
if (ipAddress == null) {
    ipAddress = request.getRemoteAddr();
}
System.out.println("ipAddress:" + ipAddress); 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2016-07-19T20:36:23.603

# 更通用的解决方案

即使标头中有*多个*IP 地址，也可以使用已接受答案的改进版本[`X-Forwarded-For`](https://en.wikipedia.org/wiki/X-Forwarded-For)：

```
/**
 * Gets the remote address from a HttpServletRequest object. It prefers the 
 * `X-Forwarded-For` header, as this is the recommended way to do it (user 
 * may be behind one or more proxies).
 *
 * Taken from https://stackoverflow.com/a/38468051/778272
 *
 * @param request - the request object where to get the remote address from
 * @return a string corresponding to the IP address of the remote machine
 */
public static String getRemoteAddress(HttpServletRequest request) {
    String ipAddress = request.getHeader("X-FORWARDED-FOR");
    if (ipAddress != null) {
        // cares only about the first IP if there is a list
        ipAddress = ipAddress.replaceFirst(",.*", "");
    } else {
        ipAddress = request.getRemoteAddr();
    }
    return ipAddress;
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-07T19:55:45.297

尝试这个...

```
HttpServletRequest httpServletRequest = (HttpServletRequest) FacesContext.getCurrentInstance().getExternalContext().getRequest();  
String ip = httpServletRequest.getRemoteAddr(); 
```

# asp.net-mvc-4 - 在我的 mvc 4.0 项目中集成 jsTree

> ID：12324468
> 
> 赞同：1
> 
> 时间：2012-09-07T19:47:18.323
> 
> 标签：asp.net-mvc-4, jstree

我有这样定义的 Category 对象：

```
public class Category
{
    public int Id { get; set; }
    public string Name { get; set; }
    public string Description { get; set; }
    public int ParentCategoryId { get; set; }
} 
```

然后我虚构地创建如下数据：

```
public ICollection<Category> GetCategories()
{
    List<Category> lst = new List<Category>();
    //Top
    lst.Add(new Category { Id = 1, Name = "Car", Description = "Car", ParentCategoryId = 0 });
    lst.Add(new Category { Id = 2, Name = "Boats", Description = "Boats", ParentCategoryId = 0 });

    //Catalogs
    lst.Add(new Category { Id = 3, Name = "Winter2012", Description = "Parts & Accessories", ParentCategoryId = 1 });
    lst.Add(new Category { Id = 4, Name = "Gear2012", Description = "Gear", ParentCategoryId = 1 });

    //Categories
    lst.Add(new Category { Id = 5, Name = "NewItems", Description = "New Stuff", ParentCategoryId = 3 });
    lst.Add(new Category { Id = 6, Name = "Promo1", Description = "Promo1", ParentCategoryId = 3 });
    lst.Add(new Category { Id = 7, Name = "Promo2", Description = "Promo2", ParentCategoryId = 3 });

    //Sub-Categories (if any)
    lst.Add(new Category { Id = 8, Name = "Men", Description = "Men", ParentCategoryId = 5 });
    lst.Add(new Category { Id = 9, Name = "Women", Description = "Women", ParentCategoryId = 5 });
    lst.Add(new Category { Id = 10, Name = "Kids", Description = "Kids", ParentCategoryId = 5 });

    return lst;
} 
```

我正在尝试构建一个复选框 TreeView，目前正在查看 jsTree 插件。最后，树视图看起来有点像：Top-->Catalogs-->Categories-->Sub-Categories

* * *

在我的 Controller 中，我填充了一个 ViewModel (HomeModel)，然后调用 View。

```
public ActionResult Index()
{
    Data.Data d = new Data.Data();
    var customerGroups = d.GetCustomerGroups();

    var model = new HomeModel();
    model.CategoryStructure = d.GetCategories();

    return View(model);
} 
```

HomeModel 的定义如下：

```
public class HomeModel
{
    //The checkbox hierarchy structure.
    public IEnumerable<Category> CategoryStructure { get; set; }

    //The selected category Id's once submitted.
    public IEnumerable<int> CategorySelectList { get; set; }        
} 
```

当然，View 是 HomeModel 的强类型，看起来有点像这样：

```
…some html…
<div id="tree">
    <ul id="treeview">
    @CategoryTree(Model.CategoryStructure, 0)
    </ul>
</div>
…some html…

@helper CategoryTree(IEnumerable<Category> nodes, int? parentId)
{
    if (nodes.Any(n => n.ParentCategoryId == parentId)) 
    { 
    <ul>
        @foreach (var node in nodes.Where(n => n.ParentCategoryId == parentId)) 
        {
            <li>
                <input type="checkbox" name="CategorySelectList" id="@node.Id" value="@node.Id" /> <label for="@node.Id">@node.Description</label>
                @CategoryTree(nodes, node.Id)
            </li>
        }
    </ul>
    }
} 
```

一切都很好！我有这个`<ul>’s and <li>’s`格式精美的漂亮列表。设置所有必要的 jsTree 文件后，我执行以下操作：

```
<script type="text/javascript">
    //<![CDATA[
    $(document).ready(function () {
        $("#treeview").jstree();
    });
    //]]>
</script> 
```

jsTree 插件似乎很好地适用于我手动构建的树视图，但基本的“单击父节点不会检查/选择所有子节点”。

我怎样才能做到这一点？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T09:13:59.513

您必须添加`jstree`脚本才能使复选框正常工作：

```
$("#tree").jstree({
    checkbox: {
        real_checkboxes: true,
        real_checkboxes_names: function (n) { 
            return [("check_" + (n[0].id || Math.ceil(Math.random() * 10000))), n[0].id] 
        }
    },
    plugins: ["html_data", "types", "themes", "ui", "checkbox"]
}); 
```

您的复选框将具有`li`语句的 ID，因此您不必手动添加它们。选中后，ID 将在`FormCollection`.

# android - 如何正确处理 Facebook 回复？

> ID：12324470
> 
> 赞同：1
> 
> 时间：2012-09-07T19:47:21.927
> 
> 标签：android, facebook

我正在使用 Facebook 提供的标准 API。对于不成功的交易，响应类似于以下内容

```
{
  "error": {
    "message": "Error validating access token: Session has expired at unix 
                time SOME_TIME. The current unix time is SOME_TIME.", 
    "type": "OAuthException", 
    "code": 190
    "error_subcode": 463
} 
```

和一个成功的东西

```
{"id":"100054544144330556_25940175479504"} 
```

如何检测成功的交易？我必须解析并查看它是否包含“错误”一词还是有更好的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T19:53:48.163

如果在结果中发现“错误”，Facebook SDK 将抛出错误。如果您使用的是标准 API，那么您也必须这样做。

例如，在 Facebook PHP SDK 中，您可以看到以下内容（以易于阅读的方式，这不是 100% PHP）：

```
if (isset('error')) {
    throwAPIException();
} 
```

做同样的事情。但是不要忘记之前解析 JSON 对象，不要搜索为字符串，如果有一个“错误”键，则搜索为 key->value 对。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T19:58:58.240

有很多库可以帮助您对 FaceBook API 进行 REST 调用。你看过[RestFB](http://restfb.com/)吗？我认为这对你来说是有价值的，因为你正在为 Android 开发。

使用这个框架，您可以将自己从各个响应元素中抽象出来，并处理真正重要的事情……对象本身（用户、评论等）。

利用此框架，您可以执行以下操作：

```
FacebookEngine faceBookEngine = new DefaultFacebookClient(authToken);
User facebookUser = facebookClient.fetchObject("me", User.class);

if (facebookUser == null)
    {
        throw new FacebookOAuthException("Bad user data",
                        "user is null!");
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T19:59:36.830

在Android中，最直接最简单的方法是检查“id”：

```
...
JSONObject jason = new JSONObject(jsonString);
...

try{
    String id = jason.getString("id");
} catch(JSONException je) {
    //ID was not found
    ....
} 
```

# java - 用作锁的瞬态最终字段为空

> ID：12324472
> 
> 赞同：6
> 
> 时间：2012-09-07T19:47:57.387
> 
> 标签：java, serialization, nullpointerexception, final, transient

下面的代码抛出一个`NullPointerException`.

```
import java.io.*;

public class NullFinalTest {
    public static void main(String[] args) throws IOException, ClassNotFoundException {
        Foo foo = new Foo();
        foo.useLock();
        ByteArrayOutputStream buffer = new ByteArrayOutputStream();
        new ObjectOutputStream(buffer).writeObject(foo);
        foo = (Foo) new ObjectInputStream(new ByteArrayInputStream(buffer.toByteArray())).readObject();
        foo.useLock();
    }

    public static class Foo implements Serializable {
        private final String lockUsed = "lock used";
        private transient final Object lock = new Object();
        public void useLock() {
            System.out.println("About to synchronize");
            synchronized (lock) { // <- NullPointerException here on 2nd call
                System.out.println(lockUsed);
            }
        }
    }
} 
```

这是输出：

```
About to synchronize
lock used
About to synchronize
Exception in thread "main" java.lang.NullPointerException
    at NullFinalTest$Foo.useLock(NullFinalTest.java:18)
    at NullFinalTest.main(NullFinalTest.java:10) 
```

怎么`lock`可能是空的？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-07T20:03:38.630

`A transient final field used as a lock is null`

**以下是有关瞬态变量的一些事实：**

**-**在实例变量上使用瞬态关键字时，将**阻止该实例变量被序列化。**

**-**在反序列化时，瞬态变量得到它们的**默认值**.....

**例如：**

*   对象引用变量`null`
*   到`0`
*   布尔值`false,`等......

所以这就是你`NullPointerException`在反序列化它时得到一个的原因......

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-07T19:47:57.387

声明的任何字段`transient`都不会序列化。此外，根据[这篇博客文章](http://www.xyzws.com/Javafaq/can-transient-variables-be-declared-as-final-or-static/0)，字段值甚至没有初始化为默认构造函数设置的值。当一个`transient`字段是`final`.

根据[Serializable javadoc](http://docs.oracle.com/javase/6/docs/api/java/io/Serializable.html)，可以通过实现以下方法来控制反序列化：

```
private void readObject(java.io.ObjectInputStream in)
    throws IOException, ClassNotFoundException; 
```

基于[这个出色的 StackOverflow 答案](https://stackoverflow.com/a/3301720/1237044)，我提出了以下解决方案：

```
import java.io.*;
import java.lang.reflect.*;

public class NullFinalTestFixed {
    public static void main(String[] args) throws IOException, ClassNotFoundException {
        Foo foo = new Foo();
        foo.useLock();
        ByteArrayOutputStream buffer = new ByteArrayOutputStream();
        new ObjectOutputStream(buffer).writeObject(foo);
        foo = (Foo) new ObjectInputStream(new ByteArrayInputStream(buffer.toByteArray())).readObject();
        foo.useLock();
    }

    public static class Foo implements Serializable {
        private final String lockUsed = "lock used";
        private transient final Object lock = new Object();
        public void useLock() {
            System.out.println("About to synchronize");
            synchronized (lock) {
                System.out.println(lockUsed);
            }
        }

        private void readObject(ObjectInputStream in) throws IOException, ClassNotFoundException {
            in.defaultReadObject();
            initLocks(this, "lock");
        }
    }

    public static void initLocks(Object obj, String... lockFields) {
        for (String lockField: lockFields) {
            try {
                Field lock = obj.getClass().getDeclaredField(lockField);
                setFinalFieldValue(obj, lock, new Object());
            } catch (NoSuchFieldException e) {
                throw new RuntimeException(e);
            }
        }
    }

    public static void setFinalFieldValue(Object obj, Field field, Object value) {
        Exception ex;
        try {
            field.setAccessible(true);
            Field modifiers = Field.class.getDeclaredField("modifiers");
            modifiers.setAccessible(true);
            modifiers.setInt(field, field.getModifiers() & ~Modifier.FINAL);
            field.set(obj, value);
            return;
        } catch (IllegalAccessException e) {
            ex = e;
        } catch (NoSuchFieldException e) {
            ex = e;
        }
        throw new RuntimeException(ex);
    }
} 
```

运行它会产生以下输出（否`NullPointerException`）：

```
About to synchronize
lock used
About to synchronize
lock used 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-06-12T15:54:44.027

如前所述，下面的声明并不像人们预期的那样工作：

```
transient final Object foo = new Object() 
```

该`transient`关键字将阻止成员被序列化。**反序列化期间不支持使用默认值初始化，**因此`foo`将`null`在反序列化之后进行。

该`final`关键字将阻止您在设置成员后对其进行修改。这意味着您将`null`永远停留在反序列化的实例上。

在任何情况下，您都需要删除`final`关键字。这将牺牲不变性，但通常不应该成为`private`成员的问题。

然后你有两个选择：

## 选项 1：覆盖`readObject()`

```
transient Object foo = new Object();

@Override
private void readObject(ObjectInputStream in) throws IOException, ClassNotFoundException {
    in.defaultReadObject();
    foo = new Object();
} 
```

在创建新实例时，`foo`会初始化为其默认值。反序列化时，您的自定义`readObject()`方法将处理该问题。

这将适用于 JRE，但不适用于 Android，因为 Android 的实现`Serializable`缺少该`readObject()`方法。

## 选项 2：延迟初始化

宣言：

```
transient Object foo; 
```

访问时：

```
if (foo == null)
    foo = new Object();
doStuff(foo); 
```

您必须在您访问的代码中的任何位置执行此操作`foo`，这可能比第一个选项工作更多且更容易出错，但它适用于 JRE 和 Android。

# jenkins - 我应该如何为 deb 包设置我的 CI (jenkins)？

> ID：12324475
> 
> 赞同：5
> 
> 时间：2012-09-07T19:48:09.337
> 
> 标签：jenkins, package-managers, deb

我有一个带有 Jenkins 和 Artifactory for Java 的 CI 设置。我还想构建和部署 deb 包。为了构建 deb 包，我可能会使用 Maven 插件（从 Gradle 调用），例如[http://mojo.codehaus.org/deb-maven-plugin/](http://mojo.codehaus.org/deb-maven-plugin/)。

我现在正在调查 Debian 存储库的实现。我想部署一个私有 Debian 存储库来托管我的软件包（[http://wiki.debian.org/HowToSetupADebianRepository](http://wiki.debian.org/HowToSetupADebianRepository)）。

Jenkins 中是否有任何插件可以更轻松地部署 deb 包？我应该使用哪个 debian 存储库实现？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-12-10T12:32:40.883

只需将我的 2 美分加到这篇文章中。

在内部，我们使用 Freight ( [https://github.com/rcrowley/freight#readme](https://github.com/rcrowley/freight#readme) ) 作为我们的 Debian/Ubuntu 存储库。

我们中的很多人倾向于使用Jordan Sissel 的fpm（ [https://github.com/jordansissel/fpm#readme ）来创建供内部使用的 deb。](https://github.com/jordansissel/fpm#readme)这可以像我在这里一样在您的源存储库中轻松编写脚本： [https ://github.com/stuart-warren/logit/blob/master/make-deb](https://github.com/stuart-warren/logit/blob/master/make-deb)

```
#!/bin/bash

# SET SOME VARS
installdir='/usr/lib/logit'
NAME='logit-java'
VERSION='0.5.8'
ITERATION='1'
WEBSITE='https://github.com/stuart-warren/logit'
REPO='http://nexus.stuartwarren.com/nexus'

# REMOVE PREVIOUS BUILD IF PRESENT
echo "Delete ${installdir}"
rm -rf .${installdir}

# CREATE FOLDER STRUCTURE
echo "create base dir ${installdir}"
mkdir -p .${installdir}

# PUT FILES IN THE CORRECT LOCATIONS
wget ${REPO}/content/repositories/releases/com/stuartwarren/logit/${VERSION}/logit-${VERSION}-tomcatvalve.jar -O .${installdir}/logit-${VERSION}-tomcatvalve.jar
wget ${REPO}/content/repositories/releases/com/stuartwarren/logit/${VERSION}/logit-${VERSION}-jar-with-dependencies.jar -O .${installdir}/logit-${VERSION}-jar-with-dependencies.jar
wget https://raw.github.com/stuart-warren/logit/master/LICENSE -O .${installdir}/LICENCE
wget https://raw.github.com/stuart-warren/logit/master/README.md -O .${installdir}/README.md
pushd .${installdir}
ln -sf logit-${VERSION}-tomcatvalve.jar logit-tomcatvalve.jar
ln -sf logit-${VERSION}-jar-with-dependencies.jar logit-jar-with-dependencies.jar
popd

# REMOVE OLD PACKAGES
echo "Delete old packages"
rm ${NAME}_*_all.deb

# CREATE THE DEB
echo "Build new package"
fpm \
        -n $NAME \
        -v $VERSION \
        --iteration ${ITERATION} \
        -a all \
        -m "Stuart Warren <stuart@stuartwarren.com>" \
        --description "Library to extend Log4J 1.2 (plus now Logback 1.0, 
Java.util.logging and Tomcat AccessLog Valve) by providing 
json layouts (for logstash/greylog) and a zeromq appender" \
        --url $WEBSITE \
        --license 'Apache License, Version 2.0' \
        --vendor 'stuartwarren.com' \
        -t deb \
        -s dir \
        ${installdir:1}

echo "Delete ${installdir}"
rm -rf .${installdir}
echo "Done!" 
```

显然，您可以直接复制任何已编译的文件，而不是从服务器下载，在我的例子中是 maven repo。然后，您可以将 deb SCP 到存储库服务器上的某个“传入”目录。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-18T12:45:22.110

我不知道 Jenkins 的 Debian 软件包插件，并且我没有找到适合我需要的 maven-deb-plugin（请参阅您链接到的页面上的“什么不起作用”）。在 Jenkins 中有一个 maven 构建作业的地方，我添加了一个后步骤 shell 脚本，它增加 debian/changelog 中的版本并运行 dpkg-buildpackage -b -nc。

-nc 禁止在构建之前进行清理，这是必要的，因为我的 debian/rules 文件将尝试运行 maven 目标来构建 jar，Jenkins 已经这样做了。来自我的 debian/rules 的片段：

```
pre-built-stamp
        mvn package
        touch pre-built-stamp

override_dh_auto_build: pre-built-stamp 
```

因此，在詹金斯的 Maven 步骤之后，它运行以下

```
touch pre-built-stamp
dpkg-buildpackage -b -nc 
```

这部分是个人喜好，但我没有让 Jenkins 将构建的 deb 直接推送到我的存储库。相反，它将 .deb 和 .changes 文件保存为构建工件，因此我可以使用[Promoted Builds Plugin](https://wiki.jenkins-ci.org/display/JENKINS/Promoted+Builds+Plugin)对.changes 文件进行签名并将其复制到存储库（rsync）。这让我的开发人员在批准将它推送到我们的暂存存储库之前下载并测试 deb。然后可以使用第二次促销将包推送到实时存储库。

我选择 reprepro 作为我们的存储库管理器。它的一个主要缺点是它不能同时处理一个发行版中的多个版本的包，这使得回滚更加痛苦。除此之外，发现它可靠且可用，现在使用它来完全镜像主要的 Debian 存储库以及使用它来托管我的私人存储库。

Reprepro 使用 inoticoming 来发现新的传入包并验证更改文件上的签名，确保只有 Jenkins 可以添加新包。

我发现在线缺少一些 reprepro 文档，但我建议安装它并阅读 reprepro 和 inoticoming 手册页。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-05T13:11:51.097

用于 Jenkins 的 Debian 包生成器插件

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-27T14:06:56.107

是的，有一个插件可以帮助将 Debian 软件包部署到软件包存储库中。[Debian Package Builder Plugin](https://wiki.jenkins-ci.org/display/JENKINS/Debian+Package+Builder+Plugin)有两个功能：构建步骤（您似乎不需要）和**构建后发布步骤**。您的目标存储库是在系统配置中配置的。只需在作业配置中选择其中之一。该插件在“幕后”使用[dupload(1)](http://manpages.ubuntu.com/manpages/trusty/man1/dupload.1.html)。

作为 Debian 软件包的存储库管理器，我推荐[Aptly](http://www.aptly.info/)。它功能强大、易于使用、文档齐全且开发积极。

# c# - Visual Studio 2012 - 编码的 UI 测试无法运行

> ID：12324476
> 
> 赞同：3
> 
> 时间：2012-09-07T19:48:12.067
> 
> 标签：c#, visual-studio-2012, coded-ui-tests

我正在尝试在 Visual Studio 2012 中创建编码的 UI 测试。当我添加新的测试时，VS 将自动启动记录器。然后，我在要测试的 WinForms 应用程序中进行一些基本的单击操作。我结束录制并生成一个脚本。当我尝试运行该脚本时，它可以正常运行，但出现运行时错误

> “消息：单元测试适配器抛出异常：找不到方法：'Void Microsoft.VisualStudio.TestTools.Diagnostics.NonVSSqmClient..ctor(UInt32)'..”

如何让我的脚本运行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T15:11:24.807

支持编码 UI 测试的唯一 Visual Studio 2012 版本是 Premium 和 Ultimate。

[http://www.microsoft.com/visualstudio/eng/products/compare](http://www.microsoft.com/visualstudio/eng/products/compare)

这些版本应该能够运行您的脚本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T06:54:39.200

录制后，当您为录制提供方法名称时，您必须在另一个 CS 文件中调用该方法。接下来转到测试列表编辑器并选择调用测试方法的 CS 文件，然后右键单击该方法并运行应用程序。

我想这会对你有所帮助。

# python - Python，更改字符串变量的字体大小

> ID：12324478
> 
> 赞同：-3
> 
> 时间：2012-09-07T19:48:29.283
> 
> 标签：python, fonts, font-size

我有一个变量作为文本发送到电子邮件，但文本几乎都是标准大小，所有内容都相同。如果可能的话，我想对其进行一些强调，并使其更大并使其大胆。这是我要编辑的代码。

```
 final_name = "Changes by" + str(name)+" ***" 
```

我知道这并不多，但我想知道是否可以将变量字符串设为粗体并使用稍大的字体大小。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-07T19:51:28.540

字符串没有字体大小。字符串存储字符序列（unicode 字符串）或要解释为字符的字节（字节字符串）。

字体大小是表示的一个元素，是您使用的任何表示和渲染系统的函数。

当您提到电子邮件时，您可以创建包含 HTML 部分的多部分电子邮件，并在该 HTML 文档中相应地对其进行格式化。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-07T21:04:30.353

如果 python 通过您的 SMTP 服务器发送电子邮件；您需要通过将内容类型设置为来将电子邮件类型更改为 html 格式`text/html`

```
# Build the email message
sender_name = "My script"
sender_email = "someEmail@company.com"
reciver_emails = ['receive1@company.com', 'receive2@company.com']
subject = "MY email subject"
message = "HTML <b>bolded</b> text"

email = ("From: %s <%s>\r\n"
         "To: %s\r\n" % (sender_name, sender_email, receiver_emails))

email = email + "CC: %s\r\n" % (cc_emails)
email = email + ("MIME-Version: 1.0\r\n"
                 "Content-type: text/html\r\n"
                 "Subject: %s\r\n\r\n"""
                 "<html>\r\n"
                 "%s\r\n"
                 "</html>" %  (subject, message)) 
```

然后，您可以按照某些答案所述添加 html 类型标签。

# javascript - 为什么会出现此警报 5？

> ID：12324479
> 
> 赞同：5
> 
> 时间：2012-09-07T19:48:44.390
> 
> 标签：javascript

这里有一些奇怪的代码......

```
var x = 5;

function fn() {
    x = 10;
    return;
    function x() {}
}
fn();
alert(x); 
```

这是[jsFiddle](http://jsfiddle.net/f7tRR/)

到底是`function x() {}`叫`return`什么？为什么不提醒10？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-07T19:56:53.463

`function x() {}`被[提升](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Scope_Cheatsheet)到`fn`'s 范围的开头，这有效地使`x`局部变量在`x = 10;`被评估之前。

~~该功能*未*设置为`10`。~~

**更新：**上面的句子是错误的。`x`实际上设置为`10`。`var`不用于声明它，但即使是，下面引用中的最后一句仅指 name 的*声明*部分，而`x`不是它对. 的*赋值*`10`。

来自 MDN（重点是我的）：

> **功能**
> 
> 具有不同作用域行为的三种形式：
> 
> *   **声明**：作为父函数顶层的声明
>     *   表现得像一个 var 绑定，它被初始化为该函数
>     *   初始化“提升”到父函数的最顶部，**在 vars 之上**
> 
> **变量**
> 
> *   函数范围
> *   提升到其功能的顶部
> *   **在同一范围内重新声明同名是无操作的**

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-07T19:51:38.197

函数 x 浮动到顶部，因此您将函数分配给 10

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-07T19:55:02.470

您在 fn 中声明函数 x；因此，您正在使用 x 的本地范围版本。在什么时候声明函数 x 并不重要。当您将 x 设置为 10 时，您实际上在做的是将 x 的函数设置为 10。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-07T19:56:16.980

[此代码](http://jsfiddle.net/jmVNX/)还警告 5：

```
var x = 5;

function fn() {
    x = 10;
    return;
    var x;
}
fn();
alert(x);​ 
```

重要的一点是您要声明一个**局部变量** `x`。*在 return 语句之后*声明一个变量也无关紧要——它仍然是一个局部变量。

删除声明，你会得到 10，因为`x`不再是局部变量。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-07T19:57:54.210

这是由 JavaScript 中变量提升的工作方式引起的。变量声明被提升，但不是它们的赋值。函数声明也与函数体一起提升（尽管函数表达式不是）。

所以你的代码有效地做到了这一点：

```
 var x = 5;

 function fn() {
     var x;
     x = function () {}
     x = 10;
     return;
 }
 fn();
 alert(x); 
```

因此`x`，函数内的声明仅具有本地范围，并且不影响`x`主代码中的贴花。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-07T19:57:36.727

fn() 中的 X 是一个函数，但全局范围内的 x 是一个 var

删除函数 x() {} 部分，x 将被警告 10

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-07T19:52:54.843

这是因为`fn`是一个对象，并且`x`是该对象的一个​​属性。局部范围总是比全局更精确。

# ruby-on-rails - Rails 中的 TDD：失败/错误：访问 login_url 未定义的局部变量或方法“login_url”

> ID：12324483
> 
> 赞同：0
> 
> 时间：2012-09-07T19:48:58.260
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rspec, tdd, factory-bot

对于 TDD，我正在关注 Ryan Bate 的 Railscast (http://railscasts.com/episodes/275-how-i-test?view=asciicast)。

我从另一个视频中实现了他的密码恢复，现在我要回去学习测试了。

运行 rspec 时，我一直遇到此故障：

```
 Failure/Error: visit login_url
 NameError:
   undefined local variable or method `login_url' for #<RSpec::Core::ExampleGroup::Nested_1:0xa7689f0> 
```

我已尝试搜索此错误，并检查了我的路线以确保存在 login_url 或 login_path。我很难过，任何提示将不胜感激

**如何修复未定义的局部变量或方法“login_url”错误？**

如果您需要任何其他文件，请告诉我。

/spec/requests/password_resets_spec.rb

需要'spec_helper'

```
describe "PasswordResets" do
  it "emails user when requesting password reset" do
    user = FactoryGirl.create(:user)
    visit login_url
    click_link "password"
    fill_in "Email", :with => user.email
    click_button "Reset Password"
  end
end 
```

/spec/factories.rb

```
FactoryGirl.define do
  factory :user do
    sequence :email do |n|
      "foo#{n}@example.com"
    end
  name "huy"
  password "secret"
  end
end 
```

路线.rb

```
match '/login', :to => 'sessions#new' 
```

# html - 制作链接，不带“a href”且不带 JS

> ID：12324488
> 
> 赞同：-1
> 
> 时间：2012-09-07T19:49:23.027
> 
> 标签：html, css

我想让我的整个`div`链接像`a`标签一样。当然这对于 js 来说可能是可能的，但我有兴趣看看这是否可能只与 css 相关。

我有这个：

```
#my_div {
  width: 200px;
  background-color: #090;
}

#my_div:hover {
  background-color: #0f0;
} 
```

页面结构在哪里：

```
<div id="my_div"><a href="http://google.com">link</a></div> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-07T19:52:17.610

您可以通过将内联元素的`display`属性设置为`block`：

```
/* Make all a tags that are decedents of the
   element with an id of `my_div` be displayed as block level elements */
#my_div a {
    display: block;
    width: 200px;
    height: 100px;
    text-align: center;
    background-color: #090;
}
/* Handle the color change on hover */
#my_div a:hover { background-color: #0f0; } 
```

您实际上并不需要包装-如果您给它一个类或 id，`div`您可以直接定位特定标签。`a`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-07T19:52:15.667

试试这个：

```
#my_div a {
    display: block;
    width: 100%;
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-07T19:54:08.153

你不能用 CSS 制作元素，但你可以`div`用`a`标签来包装你的元素。它看起来像这样：

```
<a href="http://google.com"><div id="my_div"></div></a> 
```

这使得整个 div 链接到您的任何`href`内容。

CSS3`content`现在确实具有该属性，但我认为您不能将原始 HTML 放入其中。如果有人可以访问您的`.css`文件，那将是非常糟糕的安全性...

无论如何，我认为上述解决方案是实现您所要求的最简单的方法。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-07T19:54:52.110

您需要将您的伪类设置为 a 标签而不是 div：

```
#my_div a:hover { 
    background-color: #0f0; 
} 
```

那应该做它的工作:-)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-07T19:53:53.290

我认为您应该查看发布到堆栈溢出的这个问题。 [将 div 设为链接](https://stackoverflow.com/questions/796087/make-a-div-into-a-link) 这是 Google 上关于如何将 div 设为链接的第一个结果。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-07T19:54:57.930

请：

*   HTML 为内容添加结构（例如书的章节，强调的内容......）
*   CSS 为这些项目添加了哪些颜色/字体/位置
*   Javascript 添加使其具有交互性。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-09-07T05:40:31.963

您不清楚您的意思是没有“a href”还是没有使用“<a”标签。

如果你的意思是后者，我能想到的唯一另一种方法是让它成为一个表单提交按钮。

# ruby-on-rails - 创建通用样式 gem

> ID：12324490
> 
> 赞同：0
> 
> 时间：2012-09-07T19:49:39.730
> 
> 标签：ruby-on-rails, rubygems, twitter-bootstrap, gem

我们正在公司创建多个应用程序（新开发）。为了尝试在这些应用程序之间建立共同的外观和感觉，我想创建一个 gem：

*   包含特定版本的 gems，如 bootstrap-sass
*   声明几种常见的 CSS 样式，在适当的地方使用 bootstrap 中的 mixin
*   还提供其他资产。

我希望我们开发的应用程序只需要包含我的 common-ui gem，它们不应该直接包含 bootstrap 之类的东西。

从 gem 中暴露 scss 的模式非常简单（看看 bootstrap-sass 项目）；当我的 scss 需要访问引导程序时，事情变得有趣。当应用程序包含我的 scss 时，管道抱怨它无法找到引导程序并且一切都停止了。

创建符合我描述的 gem 的最佳方法是什么？

==================================================== ===========================

为了更好地遵循 SO 的格式，我将用我的想法（以及为什么我认为它有效）来回答我的问题。我对rails有点陌生，所以我的回答绝不是权威的。随意评论或提出更好的做事方式。

==================================================== ===========================

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T19:49:39.730

**请参阅问题中的警告，这可能是解决此问题的一种非常糟糕的方法**

这是到目前为止的工作。对于将资产公开给应用程序的资产管道的 gem，它必须初始化为引擎。一个 gem 使用另一个 gem 的问题是另一个 gem 的引擎可能尚未初始化，因此管道不知道其他 gem 资产。

To work around this, just require the root file from the other gem in your root file. So in lib/company-common-ui.rb, I have the following:

```
require "company-common-ui/version"

module Company
  module Common
    module Ui
      # We don't really need anything here
    end
  end
end

require "company-common-ui/engine"
require "bootstrap-sass" 
```

# iphone - 以编程方式打开/关闭 GPS，无需在 iphone 中提示用户

> ID：12324495
> 
> 赞同：0
> 
> 时间：2012-09-07T19:50:12.907
> 
> 标签：iphone, objective-c, ios

我打算为某人的 iphone 丢失或被盗时编写一个应用程序。所以它需要通过 GPS 告诉手机的位置，但万一被偷了，让小偷打开 GPS 也不是什么好主意。所以我想知道是否有可能在不提示用户的情况下打开/关闭 GPS。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-07T19:53:22.010

我不确定你是否看过这个：[Apple 的“查找我的 iPhone”](http://www.apple.com/iphone/built-in-apps/find-my-iphone.html)

无论哪种方式，应用程序都必须在启用 GPS 的情况下运行，才能使服务正常工作。任何愚蠢的小偷都会知道退出这样的应用程序

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T22:48:14.633

您无法完全绕过提示。但如果用户允许应用使用位置数据，它不会永远显示。一旦用户两次允许此访问，应用程序将不再提示。对于您描述的应用程序，用户必须先执行此操作，然后才能在没有提示的情况下继续访问。

当定位服务处于活动状态时，屏幕顶部仍有指针图标。不过，这是没有办法的。

# c++ - 我可以使用转换构造函数来处理模板参数中的继承链吗？

> ID：12324504
> 
> 赞同：1
> 
> 时间：2012-09-07T19:50:57.153
> 
> 标签：c++, templates, inheritance

假设我有`class D`which 继承自`class B`. 我有一个模板类`template <class T> C`。然后我有一个函数签名`void foo(C<B> c);`。为了使用`C`带有派生类的模板实例，`B`我需要提供转换构造函数吗？像`template <class DERIVED> C(const C<DERIVED>& c) {}`什么？这对于发生的任何其他事情是否足够，`C`因为 any`D`是 a `B`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T19:57:42.103

`C<D>`并且`C<B>`根本不是相关类型，所以是的，您必须提供一个允许`C<B>`从 a 构造a 的转换`C<D>`。

这可能不会使类型完全兼容。例如，函数`void foo(C<B> &c)`将无法使用该转换。

是否可以使这些不相关的类型足够兼容以供您使用，取决于您如何定义这些类型以及您在兼容性方面需要什么。

* * *

```
struct B {};
struct D : B {};

template<typename T>
struct C {};

int main() {
    C<B> c = C<D>();
} 
```

* * *

```
test1.cpp:9:10: error: no viable conversion from 'C<struct D>' to 'C<struct B>'
    C<B> c = C<D>();
         ^   ~~~~~~ 
```

考虑以下示例，了解为什么模板的不同专业化之间不应存在任何关系：

```
struct B {};
struct D : B {};

template<typename T> struct C;

template<> struct C<B> { int i; }; // different specializations
template<> struct C<D> { double a, b, c; }; // can have different definitions 
```

在通过继承相关的类型之间进行转换是可行的，因为派生类型始终具有基类型的子对象。即便如此，使用继承的类型必须仔细设计才能正常工作。

* * *

用户定义的转换通过非显式构造函数和类型运算符进行操作：

```
struct T {};

struct S {
    S() {}
    S(T const &) {}
    operator T () { return T(); }
};

void foo(T t) {}
void bar(S s) {}

int main() {
    foo(S()); // uses S::operator T ()
    bar(T()); // uses S::S(T const &)
} 
```

您可以在标准*12.3.2 转换函数 [class.conv.fct]*中阅读更多内容，以及它们如何在重载决议*13.3 重载决议 [over.match]*中使用。

# javascript - 我正在尝试将 onsubmit 事件添加到表单，但无权访问表单元素

> ID：12324510
> 
> 赞同：0
> 
> 时间：2012-09-07T19:51:22.727
> 
> 标签：javascript, google-analytics

我正在尝试将 onsubmit 事件添加到我无法直接访问表单标记但可以向页面添加代码的表单。我想通过将 onsubmit 事件附加到表单来跟踪 Google Analytics 的虚拟页面浏览量。但是该事件没有触发，因为该页面没有出现在 GA 中。这是我添加到页面中的代码，位于表单下方：

```
<script>
    document.getElementsByTagName("form").onsubmit = pageTracker._trackPageview('/virtual/form-submit/quote.html');
</script> 
```

任何建议都非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T20:17:24.043

我认为您的代码的问题在于您分配给提交事件的“函数”是`pageTracker._trackPageview('/virtual/form-submit/quote.html');`

也许您打算`onsubmit`在脚本加载时而不是立即着火？如果是这样，您应该将其包装在匿名函数中

```
document.getElementsByTagName("form").onsubmit = function () { 
    pageTracker._trackPageview('/virtual/form-submit/quote.html');
}; 
```

# c - 为什么这个 ioctl 的 access_ok 失败

> ID：12324522
> 
> 赞同：1
> 
> 时间：2012-09-07T19:52:11.713
> 
> 标签：c, linux, macros, ioctl, uclinux

**编辑：**关于为什么我在这里失败了，我还没有一个好的答案......所以让我重新表述一下。我什至需要 verify_area() 检查吗？那有什么意义呢？我已经测试了我的结构成功传递给这个 ioctl 的事实，我正在考虑只是删除失败的检查，但我不是 100% 它在那里做的事情。想法？ **结束编辑**

我正在努力更新一些较旧的 linux 内核驱动程序，在测试一个时我遇到了一个失败，这对我来说似乎很奇怪。开始了：

我在用户空间有一个简单的 ioctl 调用：

```
Config_par_t    cfg;
int ret;
cfg.target = CONF_TIMING;
cfg.val1   = nBaud;
ret = ioctl(fd, CAN_CONFIG, &cfg); 
```

Config_par_t 定义在 can4linux.h 文件中（这是 uCLinux 自带的 CAN 驱动）：

```
typedef struct Command_par {
  int cmd;          /**< special driver command */
  int target;           /**< special configuration target */
  unsigned long val1;       /**< 1\. parameter for the target */
  unsigned long val2;       /**< 2\. parameter for the target */
  int error;            /**< return value */
  unsigned long retval; /**< return value */
} Command_par_t ; 
```

在内核方面，ioctl 函数调用 verify_area，这是失败的过程：

```
long can_ioctl(struct file *file, unsigned int cmd, unsigned long arg)
{
    void *argp;
    long retval = -EIO;
    Message_par_t Message;
    Command_par_t Command;
    struct inode *inode = file->f_path.dentry->d_inode;
    argp = &Message;

    Can_errno = 0;

    switch(cmd) {
      case CONFIG:
        if( verify_area(VERIFY_READ, (void *) arg, sizeof(Command_par_t))) {
          return(retval); 
        } 
```

现在我知道 verify_area() 不再使用了，所以我在头文件中用这个宏将它更新为 access_ok：

```
#if LINUX_VERSION_CODE > KERNEL_VERSION(2, 6, 0)
#define verify_area(type, addr, size) access_ok(type, addr, size)
#endif 
```

我在 x86 平台上，所以我很确定实际调用的 access_ok() 宏是 /usr/src/linux/arch/x86/include/asm/uaccess.h 中定义的宏：

```
#define access_ok(type, addr, size) (likely(__range_not_ok(addr, size) == 0))

#define __range_not_ok(addr, size)                  \
({                                  \
    unsigned long flag, roksum;                 \
    __chk_user_ptr(addr);                       \
    asm("add %3,%1 ; sbb %0,%0 ; cmp %1,%4 ; sbb $0,%0"     \
      : "=&r" (flag), "=r" (roksum)             \
      : "1" (addr), "g" ((long)(size)),             \
        "rm" (current_thread_info()->addr_limit.seg));      \
   flag;                                \
}) 
```

我想对我来说这看起来应该可以工作。如果检查，为什么我从这个 verify_area 得到 1 回报的任何想法？或者关于如何缩小问题范围的任何想法？

```
if( verify_area(VERIFY_READ, (void *) arg, sizeof(Command_par_t))) { 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-07T19:57:03.407

**如果块无效**，则宏`access_ok`返回 0 ，如果可能有效，则返回非零。因此，在您的测试中，如果该块有效，您将立即返回. 事情的样子，你可能想否定 的结果，比如：**`-EIO``access_ok`**

 **```
if (!access_ok(...)) 
```**

# jquery - 当我尝试拖放其中一个 与它的父级一起到另一个位置 它从显示屏上消失

> ID：12324524
> 
> 赞同：1
> 
> 时间：2012-09-07T19:52:15.870
> 
> 标签：jquery, jquery-ui, jquery-ui-draggable

我试图让拖放正常工作，因为我为所有`<li>`标签分配了以下内容：

```
$('li').draggable( {
    containment: $selMemContainer,
    cursor: 'move',
    snap: $selMemContainer
  } ); 
```

`<li>`当我尝试将其中一个'拖放到另一个位置时，它`<ul>`会从显示中消失，但在 firebug 中查看时仍占据原始位置，但现在在样式定义中具有 left 和 top 值（见下文）。你可以看到我试图移动`<li>`项目 1,2 和 4，如果我去掉了 firebug 中的 left 和 top 值，那么它们会`<li>`重新出现在浏览器中。我怎样才能让拖放正常工作。

```
<div id="selMembersContainerDiverFieldAdmin2Photographs" class="membersContainer selMembersContainer" style="height: 351px;">
    <ul>
        <li class="ui-draggable" style="position: relative; left: -1237px; top: -309px;">
        <li class="ui-draggable" style="position: relative; left: -1237px; top: -353px;">
        <li class="ui-draggable" style="position: relative;">
        <li class="ui-draggable" style="position: relative; left: -1237px; top: -441px;">
        <li class="ui-draggable" style="position: relative;">
        <li class="ui-draggable" style="position: relative;">
    </ul>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T20:28:47.150

看来您需要使用[可排序](http://jqueryui.com/demos/sortable/)而不是可拖动。Sortable 使元素拖动并将它们包含到列表中。您还可以在列表之间拖动。

[例子](http://jsfiddle.net/sEJTR/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T20:31:01.093

您没有关闭`li`标签，但这可能根本不是问题，但应该是

```
<li class="ui-draggable" style="position: relative; left: -1237px; top: -309px;"></li> 
```

每个都`<li>`需要一个结束标签，即

```
<li>Something</li> 
```

您正在使用`snap: $selMemContainer`这看起来像一个问题，以帮助您找出问题这里是一个工作示例

**HTML**

```
<div id="selMembersContainerDiverFieldAdmin2Photographs" class="membersContainer selMembersContainer">
    <ul id="myUl">
        <li>Something</li>
        <li>Something Else</li>
        <li>Something More</li>
    </ul>
</div> 
```

**JS**

```
$(function(){
    var $selMemContainer=$('#selMembersContainerDiverFieldAdmin2Photographs');
    $('li').draggable( {
        containment: $selMemContainer,
        cursor: 'move',
        snap:true
    });
});​ 
```

[**演示**](http://jsfiddle.net/HnErn/2/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T20:40:26.093

> 我正在尝试让拖放正常工作

这并不能告诉我们您的确切期望。

仅使用 draggable 使您的项目可拖动。这可以通过默认使用简单地实现：

```
var $selMemContainer = $(".selMembersContainer");    
$('li').draggable();​ 
```

这允许您现在在屏幕上移动项目。

但是，如果您试图实现在`ul`您需要可排序的范围内移动项目。

基本的可排序功能如下所示（将可排序的 id 分配给 ul）：

```
$("#sortable").sortable({
    revert: true
}); 
```

### [DEMO](http://jsfiddle.net/FranWahl/vCsPM/) - 基本的可拖动项目和基本的可排序列表

如上所述，目前还不是很清楚你到底想要达到什么目标。以上应该可以帮助您入门，如果您有任何问题，请随时详细说明。

### 其他资源

*   [**可拖动的示例和文档**](http://jqueryui.com/demos/draggable/)
*   [**可排序的示例和文档**](http://jqueryui.com/demos/draggable/#sortable)

# css - 具有固定边距内容容器的流体模板

> ID：12324525
> 
> 赞同：0
> 
> 时间：2012-09-07T19:52:17.040
> 
> 标签：css, html

我想构建一个流畅的模板，其中在网页的所有 4 侧都有一个具有固定边距的内容容器。如果调整浏览器的大小，内容框也会在所有方面发生变化，同时保持相同的边距，但会改变高度和宽度。由于高度 100% 的问题，如果内容太长，我无法正确完成下边距。在我的情况下，内容只是在没有停止和添加滚动条的情况下延伸。

参见示例：

[http://jsfiddle.net/QzgHm/1/](http://jsfiddle.net/QzgHm/1/)（节元素需要保留下边距）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T20:03:20.953

尝试`position: absolute;`然后定义`top`、`bottom`、`left`和的像素值`right`。这基本上会给你你设定的边距。我无法在您的示例中说出`div`您`section`希望设置哪些边距，因此请务必`position: relative`在父元素上使用

# java - 读取行并拆分为 char 数组

> ID：12324528
> 
> 赞同：3
> 
> 时间：2012-09-07T19:52:18.077
> 
> 标签：java, file-io, bufferedreader

我不明白为什么我的程序无法运行。它编译但没有打印。我在文件中有一个 5 个字符的单词。我需要从该文件中读取行，然后将其拆分为 char 数组，然后我想将其打印出来。谢谢！

```
import java.io.FileReader;
import java.io.IOException;
import java.io.BufferedReader;

public class test {
    public static void main(String[] args)
    {

        BufferedReader line = null;
        char[] array = new char[7];

        try{

            line = new BufferedReader(new FileReader(args[0]));

            String currentLine;
            while((currentLine = line.readLine()) != null)
            {
                array = currentLine.toCharArray();
            }

            for(int i = 0; i < array.length; i++)
            {
                System.out.print(array[i]);
            }

        }//try

        catch(IOException exception)
        {
            System.err.println(exception);
        }//catch

        finally
        {
            try 
            {
                if(line != null) 
                    line.close();
            }//try

            catch(IOException exception)
            { 
                System.err.println("error!" + exception);
            }//catch

        }//finally
    } // main
} // test 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T20:00:06.823

您的 while 循环会跳过除最后一行之外的每一行，因此您的最后一行可能为空。要显示您可能拥有的每一行：

```
while ((currentLine = line.readLine()) != null) {
    array = currentLine.toCharArray();
    for (int i = 0; i < array.length; i++) {
        System.out.print(array[i]);
    }
    System.out.println();
} 
```

或者，如果您只有 1 行，您可以简单地使用：

```
String currentLine = line.readLine(); 
... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T20:06:39.033

你的程序只打印最后一行

您必须循环打印。

```
while (....!=null)
{
 array = currentLine.toCharArray();

for(int i = 0; i < array.length; i++)
   {
      System.out.print(array[i]);
   }

} 
```

如果上述不是问题，请检查您的文件权限。

检查您的系统可能是由于文件权限，程序无法从文件中读取。

# r - 使用 setwd() 指定目录

> ID：12324539
> 
> 赞同：3
> 
> 时间：2012-09-07T19:53:15.847
> 
> 标签：r, working-directory

我知道在 R 中设置我的工作目录我可以这样做：

```
setwd("~/dir1/dir2/mydir") 
```

如果 mydir 是唯一的目录名称，有没有办法在不说明 dir1/dir2 的情况下指定工作目录？

谢谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-07T20:01:33.233

`Sys.glob`做你想做的事：

```
setwd(Sys.glob("~/*/*/mydir")) 
```

如果您不知道嵌套的深度，可以使用`list.files`or `dir`：

```
list.files(path="~", pattern="mydir", all.files=TRUE, full.names=TRUE,
  recursive=TRUE, ignore.case=FALSE, include.dirs=TRUE) 
```

# java - 线程和异常处理

> ID：12324544
> 
> 赞同：2
> 
> 时间：2012-09-07T19:53:30.907
> 
> 标签：java, multithreading, exception-handling, ibatis

我有两台linux机器。在一台机器上，我正在使用一个启动可执行文件的线程，另一个内部线程从可执行文件中读取数据并使用可执行文件中的值填充数据库，我正在使用 myBatis 来持久化数据。稍后它会不断检查进程和内部线程是否启动并运行。在另一台机器上，我远程连接了数据库，该数据库每晚持续部署，因此数据库被删除并重新创建。因此，由于在此构建期间数据库表不可用，因此出现异常：

```
org.apache.ibatis.exceptions.PersistenceException 
### Error updating database.  Cause: com.mysql.jdbc.exceptions.jdbc4.MySQLSyntaxErrorException:
Table 'updates_table' doesn't exist 
```

被抛出。然后不断检查进程和内部线程的线程被杀死并停止检查。

谁能帮助我如何处理线程不被杀死，一旦数据库可用并运行它应该尝试重新填充表。当数据库不可用时，它应该一直尝试直到数据库可用。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T20:27:48.600

考虑切换到一个系统，在该系统中，您将作业提交给`Executor`从线程中提取内容的线程：

```
public class MyThread extends Thread {
    private final InputStream processStream;
    private final Executor executor = Executors.newSingleThreadExecutor();

    public MyThread(InputStream processStream) {
        this.processStream = processStream;
    }

    @Override
    public void run() {
        while ([processStream has stuff]) {
            final Object obj = // Get your object from the stream
            executor.execute(new Runnable() {
                @Override
                public void run() {
                    // Do database stuff with obj
                }
            });
        }
    }

    private static Object getSomethingFromStream(InputStream stream) {
        // return something off the stream
    }
} 
```

如果您的 抛出异常`Runnable`，它将被记录，但不会停止，它只会继续队列中的下一个作业。另请注意，这是使用单线程执行程序，因此提交的所有内容将一次执行一个，并按照提交的顺序执行。如果您想要并发执行，请使用`Executors.newFixedThreadPool(int)`or `Executors.newCachedThreadPool()`。请注意，这回答了如何让您的线程保持活力。如果要在作业失败时重新提交可运行以重新执行，请将其`run`方法更改为：

```
@Override
public void run() {
    try {
        // Do database stuff with obj
    } catch (PeristenceException ex) {
        // Try again
        executor.execute(this);
    }
} 
```

您可以为此添加逻辑以定制何时再次尝试异常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T20:24:46.933

在高层次上，您可以使用 Observable 模式（内置于 JDK），以便在维护期间通知您的代码。您可以通过产生一个新线程来重新建立连接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T20:38:18.217

使用这个构造：

`try{ // code to update db
} catch(MySQLSyntaxErrorException exception){ // handle db exception }`

在运行以与数据库一起使用的线程内部。

# asp.net - 有没有办法以编程方式更改/创建/添加/删除 MVC3 中操作和控制器的身份验证角色

> ID：12324546
> 
> 赞同：1
> 
> 时间：2012-09-07T19:53:39.093
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3, forms-authentication

> **可能重复：**
> [ASP.NET MVC3 角色和权限管理 -> 使用运行时权限分配](https://stackoverflow.com/questions/7286379/asp-net-mvc3-role-and-permission-management-with-runtime-permission-assignmen)

假设我有`ActionResult Members`一个控制器，它应该只允许成员访问它。通常我只会`[Authorize(Roles = "Members")]`在操作上添加一个属性，只允许`Members`角色中经过身份验证的用户访问它。

有没有一种方法可以让管理员（或其他）在未来更改它以让我们说`[Authorize(Roles = "Members, PotentialMembers ")]`（这将允许角色中的用户`Members`并`PotentialMembers`访问此操作？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T20:02:59.680

不，您不能使用 AuthorizeAttribute 执行此操作。您传递给它的角色被硬编译到应用程序中。

不过，还有其他方法可以解决这个问题。您可以编写自己的授权过滤器。或者您可以创建一个覆盖 OnAuthorization 或类似的基类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T20:05:16.263

不幸的是，您不能使用默认属性执行此操作。但是，您可以通过从 Authorize 继承来编写自己的属性（或者您可以很容易地在 Web 上获取 Authorize 的源代码）。

从那里开始，您必须设计一种机制来 a) 通过某种接口存储每个控制器允许的角色，以及 b) 在自定义过滤器属性中使用这些映射来允许/拒绝访问。

如果您要这样做，我建议在应用程序启动时加载映射并使用内存管理器来发出配置更改的信号。

# sql - 部署使用 SQLite 的 Windows 8 Metro 应用程序

> ID：12324557
> 
> 赞同：16
> 
> 时间：2012-09-07T19:54:30.960
> 
> 标签：sql, sqlite, windows-8, microsoft-metro, winjs

**背景**

我们正在使用 System Center 2012 在运行 Windows 8 Enterprise x64 的现场将 Windows 8 Metro 风格的应用程序部署到三星平板电脑。平板已加入域，并与域建立持久的 DirectAccess 连接，从而允许 System Center 将应用程序和更新推送到设备。

我们必须将我们的应用程序部署到现场可能有数百台设备，这就是我们采用 System Center 路线的原因。代码签名证书使用组策略安装在每台设备上。要部署应用程序，您只需提供包输出并指定要安装它的设备集合。该应用程序会在几分钟后出现在设备上。

我们遇到的问题是，当 System Center 部署我们的应用程序时，SQLite 依赖项丢失了，我们的数据访问都不起作用。

**关于我们的项目**

我们的应用程序是一个使用 SQLite 作为后端的 WinJS 应用程序。但是，我们所有的数据访问代码都在 WinJS 项目引用的 C# WinMD 项目中。我们正在使用[sqlite-net](https://nuget.org/packages/sqlite-net)库与 SQLite 对话——我们在 C# 项目中包含了它的源代码。

在 Visual Studio 中，我们安装了**用于 Windows 运行时扩展的 SQLite，**如[Tim Heuer 的文章中所述](http://timheuer.com/blog/archive/2012/08/07/updated-how-to-using-sqlite-from-windows-store-apps.aspx)。Metro 应用程序引用了这一点。

**使用其他部署方法进行测试**

当您在本地调试或运行它时，来自应用程序的 SQLite 数据访问工作正常 - 在调试/发布和 x86/x64 中。

应用程序打包过程提供了一个 PowerShell 脚本，您可以使用它来安装应用程序，并在必要时提供开发人员许可证。使用 PowerShell 脚本安装我们的应用程序时，SQLite 数据访问也可以正常工作。通过打包和安装应用程序的 Debug/Release 和 x86/x64 版本来验证这一点。

**故障排除**

当应用程序第一次尝试使用 SQLite 时，我们看到一个关于它无法找到 sqlite3.dll 的异常。

我们已经尝试/验证了以下内容：

*   确认我们正在部署 Release/x64 构建
*   检查 WinRAR 中的 appx 并验证它是否包含 sqlite3.dll
*   从 C# 项目而不是 WinJS 项目中引用“SQLite for Windows Runtime”扩展
*   还要引用 C++ 运行时，这会导致 System Center 在部署应用程序时失败。不知道为什么，但正在调查它。

**更新** 问题是 System Center 在部署 SQLite 库所需的 Visual C++ 运行时库依赖项时遇到问题。所以不幸的是，这不再是一个编程问题。我们正在为此获得一些帮助，我将发布修复程序。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T01:27:40.877

我想发布我们要进行的临时修复的详细信息。我们也更接近问题的根源，所以我也想提供这些细节。

**问题回顾**

从我们的 Metro 项目中引用 Visual C++ 运行时包时，System Center 无法将应用程序部署到设备，因为在为适当的体系结构和构建风格部署适当版本的依赖项时出现问题。

我们运行 Visual Studio 2012（并将项目打包以进行部署）的开发机器使用的 Visual C++ 运行时 (50727) 版本比全新安装的 Windows 8 (50712) 中的版本更新。

与 System Center 团队合作，确认这是我们正在使用的版本中的一个错误，并且已在未来的版本中得到解决。我们将努力升级环境，但这需要几周时间。

**解决方法**

我确认并测试了以下解决方法：

*   从 Metro 项目中删除对 Microsoft Visual C++ 运行时包的引用
*   为 Visual Studio 2012 安装 x64 版本的 Visual C++ Redistributable - [http://www.microsoft.com/en-us/download/details.aspx?id=3](http://www.microsoft.com/en-us/download/details.aspx?id=3)
*   部署应用程序

像魅力一样工作，因为已经存在正确版本的依赖项。如果我们选择同时针对 x86 和 ARM，显然不是一个长期的解决方案，但会让我们克服这个难题。

# oracle - Oracle 和 TOAD（和我）在要绑定的变量数量上存在分歧

> ID：12324563
> 
> 赞同：0
> 
> 时间：2012-09-07T19:55:03.453
> 
> 标签：oracle, variables, parameters, toad

在运行时，我得到“ *ORA-01008 - not all variables bound* ” 的 SQL 语句在 TOAD 中运行良好，并且 TOAD（和我）只找到一个参数。

如下所示，查询中只有一个参数。为什么 Oracle 会认为有多个参数/变量并导致抛出异常？

我无法显示真正的 sql，但这是它的传真（列/表名称已更改）：

```
SELECT DECODE(POSTWHEELTYPE,'0','NONE','D','NUMERIC','D','RESTRICTED NEEDLE','X','TRANSFER TO WINTER','A','ACCESS CODE') HALTYPE,      
    DECODE(VALIDATIONTYPE,'0','NONE','A','FOXPRO CODE','P','PERSONAL CODE','S','RESTRICTED') JBJTYPE,
    LAZYNUMBER,
    DISPLAYTEXT,
    MINLENGTH || '-' || MAXLENGTH LENGTH,
    NVL(INSTRUCTIONS, '<NONE>') INSTRUCTIONS
FROM
    ABC.CODELAZYS
WHERE
    BQSERVERABCID = :ABCID
    AND VALIDATIONTYPE <> '0'
ORDER BY
    LAZYNUMBER DESC 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T20:10:56.213

如果甲骨文返回此错误代码，我敢打赌我最后一美元的更好部分是该变量未绑定。仅仅因为 TOAD 为变量提供了一个值并不意味着它绑定在其他客户端中。

你是 100% 肯定你的一个变量确实是绑定的吗？您在哪里运行失败的查询？你能告诉我们它是怎么称呼的吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T14:50:34.563

问题是我绑定变量太晚了；一旦我将它移到对 ExecuteReader() 的调用之上，它就起作用了。

# c# - Revit API 获取 OST_Viewers 和 OST_Level 类型的坐标

> ID：12324567
> 
> 赞同：1
> 
> 时间：2012-09-07T19:55:27.513
> 
> 标签：c#, revit, revit-api

我需要找到坐标`OST_Viewers`和`OST_Level`类型。我用这段代码得到它们：

```
var vieversCollection = 
  new FilteredElementCollector(uiDoc.Document)
    .OfCategory(BuiltInCategory.OST_Viewers);

var levelsCollection = 
  new FilteredElementCollector(uiDoc.Document,)
    .OfCategory(BuiltInCategory.OST_Levels); 
```

我试图`Location`为他们使用该属性，并将其转换为`LocationPoint`，但它总是返回`null`。我应该使用什么方法进行坐标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T03:20:27.437

中的元素`BuiltInCategory.OST_Viewers`不能有位置或任何其他坐标，因为它只是一个视图。它就像一个无限的 3D 立方体。您确定要检索精确坐标吗？

`Level`不能有`Location`。`Level`只有一个坐标 - `Elevation`。您可以通过该`Level.Elevation`属性获得它。

# java - 编辑 .class 文件

> ID：12324572
> 
> 赞同：0
> 
> 时间：2012-09-07T19:55:45.930
> 
> 标签：java, jar, decompiler

> **可能重复：**
> [java字节码编辑器？](https://stackoverflow.com/questions/2395574/java-bytecode-editor)

我正在寻找一种直接编辑打包在 .jar 中的 .class 文件的方法。我已经提取了 .jar 文件，并且有一系列 .class 文件（确切地说。GUImain.class 是我希望编辑的文件）并且需要更改一些字符串并从显示中删除一些值。我无法在简单的十六进制编辑器中执行此操作，因为字符串长度将变为当前长度的 3/4与复制的原件位于同一文件夹中。有人可以帮帮我吗？

# iis - IIS 7.5 应用程序和应用程序池

> ID：12324577
> 
> 赞同：-1
> 
> 时间：2012-09-07T19:56:22.310
> 
> 标签：iis

这是我的场景。我有一个在“AppPool1”下运行的网站，并且运行良好。我在该站点中创建了一个新应用程序（“测试”）并将其设置为使用“AppPool2”。

问题是[http://mysite.com](http://mysite.com)有效，但[http://mysite.com/test](http://mysite.com/test)无效。我收到 500.19 错误。如果我将它切换回使用“AppPool1”，它工作正常。

我是否误解了应用程序池的目的？我以为你可以做我想要完成的事情？应用程序池是否应该只分配给单独的站点，而不是站点内的应用程序？

我尝试重新创建应用程序池并将权限分配给应用程序的目录，但没有成功。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T20:55:32.407

问题解决了。确保您的根文件夹也具有 IIS AppPool\apppoolname 权限。即使应用程序位于不同的目录中

# trading - 具有手数的彭博实时数据

> ID：12324583
> 
> 赞同：-1
> 
> 时间：2012-09-07T19:57:05.733
> 
> 标签：trading, bloomberg, stockquotes

我正在尝试使用 api 从彭博下载实时交易数据。

到目前为止，我可以成功地获得出价/要价/最后价格，但在某些交易所（如加拿大），报价大小很多。

我当然可以使用参考数据 api 查询手数大小，并为数据库中的每个证券或类似的东西编写它们，但是为每个报价单转换大小是非常“昂贵”的转换，因为它们每秒都会出现，而且可能更频繁。

那么还有其他方法可以实现这一目标吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T20:57:45.887

为什么需要将每个值乘以手数？只要手数不变，每个报价都是可比较的，并且任何计算都可以使用交换值来实现。如有必要，在表示层中缩放任何结果。

# flash - jsfl 将 .jpg .png 移动到不同的文件夹

> ID：12324586
> 
> 赞同：1
> 
> 时间：2012-09-07T19:57:25.653
> 
> 标签：flash, png, jpeg, jsfl

我想知道是否可以根据扩展名移动库项目。

我知道可以使用以下代码移动位图：

```
if(myItemType == "bitmap"){
mylibrary.moveToFolder("Bitmaps", myItemName, true); 
```

来源：[http ://www.flashperfection.com/tutorials/Organizing-Library-using-JSFL-36522.html](http://www.flashperfection.com/tutorials/Organizing-Library-using-JSFL-36522.html)

* * *

但是：我的问题是天气可以移动包含例如“.jpg”和“.png”的项目，并将这些项目移动到名为“JPGs”和“PNGs”的两个不同文件夹中。

对于我正在做的这项工作，客户端要求 PNG 和 JPG 文件位于 Flash 库中的不同文件夹中。

提前感谢所有帮助！

-拍

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T21:37:56.570

根据您上面的代码，应该使用[substr()](http://www.w3schools.com/jsref/jsref_substr.asp)`.`之类的方法从字符串中找到的最后一个字符到字符串末尾提取子字符串的扩展名：

```
var extension = myItemName.substr(myItemName.lastIndexOf("."));//grab the extension from the name
if(extension.toLowerCase() == ".jpg") mylibrary.moveToFolder("JPGs", myItemName, true);//move to folder based on extension
if(extension.toLowerCase() == ".png") mylibrary.moveToFolder("PNGs", myItemName, true);
//...etc. 
```

如果您愿意，可以使用[switch](http://www.w3schools.com/js/js_switch.asp)语句而不是`if`条件语句：

```
switch(extension)
{
    case ".jpg":
    case ".JPG":
      mylibrary.moveToFolder("JPGs", myItemName, true);
      break;
    case ".png":
    case ".PNG":
      mylibrary.moveToFolder("PNGs", myItemName, true);
      break;
    //...etc.
} 
```

# javascript - 文件路径不起作用

> ID：12324592
> 
> 赞同：0
> 
> 时间：2012-09-07T19:57:40.013
> 
> 标签：javascript, asp.net, html

我目前正在尝试获取文件的路径来工作，但它不会让我。我正在处理一个虚拟目录，因此路径将是动态的。

这就是我的目录的设置方式：

WebServices -> LiveScanServ.asmx（这是我想要的文件）

LiveScan -> ScanFolders.aspx

我的浏览器网址看起来像：http://localhost:43234/dynamicPart/Home.aspx#

在我的 ScanFolders.aspx 中，我正在调用文件 LivescanServ.asmx 但它就是找不到它。这是我到目前为止所拥有的：

```
<Services><asp:ServiceReference Path="~/WebServices/LiveScanService.asmx" /></Services> 
```

但是当我运行它时，它给了我一个 404 错误（未找到）。

有任何想法吗？

编辑：这是我调用 ScanFolders.aspx 的 javascript：

```
function loadLiveScanSync() {
$('#centreMenu').slideUp('slow', function () {
    $('#centreMenu').children('div').css('display', 'none');
    $('#loadedContentHolder').load('LiveScan/ScanFolders.aspx');
    $('#loadedContentHolder').css('display', 'block'); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T20:10:13.047

您需要的文件是 LiveScanServ.asmx。您在服务参考中的文件是 LiveScanService.asmx。确保您可以在浏览器中手动解析您的 asmx 文件，并且该 url 与您的配置中的路径匹配。

> WebService -> **LiveScanServ.asmx**（这是我想要的文件）

```
<Services><asp:ServiceReference Path="~/WebServices/LiveScanService.asmx" /></Services> 
```

# git - 如何将已部署的 git 修订版写入 Capistrano 中的文件

> ID：12324594
> 
> 赞同：2
> 
> 时间：2012-09-07T19:57:47.180
> 
> 标签：git, capistrano

我使用 Capistrano 来部署我的 rails 应用程序。如何写出部署到 public_html/revision.txt 的 git 修订版？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-07T20:38:50.513

如果其他人必须这样做：

```
 namespace :deploy do
      # ...

      desc "Write the current version to public_html/revision.txt"
      task :write_revision, :except => { :no_release => true } do
        run "cd #{latest_release}; git rev-parse HEAD > #{latest_release}/public/revision.txt"
      end

      # ...
    end

    after "deploy:update_code", "deploy:write_revision" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-07-01T22:47:45.003

我将此添加到我的 deploy.rb 中：

```
execute "git rev-parse --abbrev-ref HEAD > public/revision.txt"
execute `"git log --oneline -1 >> public/revision.txt"` 
```

然后在我的内部管理页面中，我有：

```
File.read("#{Rails.root}/public/revision.txt") 
```

如果需要，您可以放入 Rails.root 而不是 public。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-09-20T14:19:44.273

这可能是自提出原始问题以来添加的一项新功能，但 Capistrano 已经`REVISION`在应用程序根目录中创建了一个文件。你可以把这个复制过来。这是我所拥有的：

```
 desc "Write the current version to public/revision.txt"
      task :write_revision do
        on roles(:app, :api) do
          execute :cp, "#{fetch(:release_path)}/REVISION #{fetch(:release_path)}/public/revision.txt"
        end
      end
      after "deploy:finished", "deploy:write_revision" 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-07T20:02:13.000

您可以使用 log 命令获取最新的提交 ID，然后将其重定向到您的文件：

```
git --no-pager log -1 --pretty=format:%H > public_html/revision.txt 
```

# windows - 定期运行英特尔的 VTune

> ID：12324595
> 
> 赞同：1
> 
> 时间：2012-09-07T19:57:51.530
> 
> 标签：windows, intel, performancecounter, intel-vtune

在先前版本的 VTune 中，有一个名为 dsep.exe 的程序，可用于定期从 VTune 轮询硬件计数器（特别是与 DRAM 读/写相关）。这使我能够及时收集有关每个实例的计数器数据，而不是最后的一个摘要。

不幸的是，该工具已在 64 位操作系统中被弃用。有谁知道定期（例如，每 1 秒）从 VTune（或 Windows 中的其他程序）获取硬件计数器数据的方法？

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T16:06:55.447

好吧，我无法完全解决这个问题，但我已经很接近了。

最新版本的 VTune 将所有硬件计数器数据保存在 SQLite 数据库 (projectfolder/sqlite-db/dicer.db) 中。由于您无法直接从 GUI 导出所有硬件计数器数据，因此您可以使用 SQLite 浏览器数据来获取您需要的数据。

大多数硬件数据都存储在 pmu-data 表中，并带有一些古怪版本的 rdtsc 调用的时间戳。

# jquery - BlockPage：BlockPage 高度等于 BlockOverlay 高度

> ID：12324596
> 
> 赞同：1
> 
> 时间：2012-09-07T19:57:51.403
> 
> 标签：jquery, blockui

我正在使用 blockui 在页面上显示某些文本。文本的长度因页面而异。在某些页面上，它比页面的高度短得多，在这些情况下，如果我滚动到可见页面高度以下，我可以看到透明背景而不是黑色背景，如上一节所示。我检查了它，发现 blockOverlay 的高度是 100%，blockPage 的高度也是如此。

前者一直覆盖到页面末尾，但前者仅覆盖浏览器上的可见高度，之后如果您滚动到下方，您会看到一个透明层。

相关代码片段：

```
<script>
    $(document).ready(function() {
        $('#reader').click(function() {
            $.blockUI({
                message: $('#fs-reader'),
                css: {
                    top: 0,
                    left: 0,
                    height: '100%',
                    width: '100%',
                    background: '#000000'
                }
            });
            $('.blockUI.blockPage').css('position', 'absolute');
            $('.close').click(function() {
                $.unblockUI();
                return false;
            }); 
        });
    });
</script>

<span id="reader">view in reader</span>
<div id="fs-reader" style="display: none;">
    <button class="close">Close</button>
    <div id="reader-content">
        <!-- The text goes in here -->
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T07:05:00.600

我叫错了树。解决方案很简单，它在 blockUI 文档中。

我所做的是，从 css 中删除 height: 100% 并添加 overlayCSS { opacity: 1 }。所以，代码现在看起来像

```
<script>

    $(document).ready(function() {
        $('#reader').click(function() {
            $.blockUI({
                message: $('#fs-reader'),
                css: {
                    top: 0,
                    left: 0,
                    height: '100%',
                    background: '#000000'
                },
                overlayCSS: {
                    opacity: 1
                }
            });
            $('.blockUI.blockPage').css('position', 'absolute');
            $('.close').click(function() {
                $.unblockUI();
                return false;
            }); 
        });
    });
</script>

<span id="reader">view in reader</span>
<div id="fs-reader" style="display: none;">
    <button class="close">Close</button>
    <div id="reader-content">
        <!-- The text goes in here -->
    </div>
</div> 
```

# javascript - 为什么我不能用 ajax 显示我的数据？

> ID：12324599
> 
> 赞同：0
> 
> 时间：2012-09-07T19:58:06.830
> 
> 标签：javascript, jquery, ajax

这是我的代码：

```
 var xml=new String("");     
 //function to send data every 5 seconds
        window.setInterval(function() { 
        //code to obtain xml file
            alert(xml);// when I try alert my variable xml contain data
            ajax_post(xml);
            }
        }, 5000); 

  //the function ajax_post

   function ajax_post(xml){
   // Create our XMLHttpRequest object
   var hr = new XMLHttpRequest();
   // Create some variables we need to send to our PHP file
    var url = "my_file.php";
    var vars = "xml="+xml;
    hr.open("POST", url, true);
    // Set content type header information for sending url encoded variables in the request
    hr.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
    // Access the onreadystatechange event for the XMLHttpRequest object
    hr.onreadystatechange = function() {
    if(hr.readyState == 4 && hr.status == 200) {
        var return_data = hr.responseText;
        document.getElementById("status").innerHTML = return_data;
    }
}
hr.send(vars);
document.getElementById("status").innerHTML = "processing...";
} 
```

问题是当我尝试在 div 中显示我的数据时，我得到一个空输出，就好像他让变量初始化为空一样，但有了警报我可以显示我的数据。为什么 ？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T20:00:32.060

我相信你有一个额外的 } 它不应该是：

```
window.setInterval(function() { 
        //code to obtain xml file
            alert(xml);// when I try alert my variable xml contain data
            ajax_post(xml);
            }
        , 5000); 
```

# python - 如何在 Windows 中通过 setup.py 安装 Python 模块？

> ID：12324601
> 
> 赞同：64
> 
> 时间：2012-09-07T19:58:22.340
> 
> 标签：python

我下载了带有 setup.py 文件的 dateutil，但是当我尝试打开它时会引发错误。安装此模块的正确方法是什么？

这是错误：

```
 error: no commands supplied 
```

* * *

## 回答 #1

> 赞同：137
> 
> 时间：2012-09-07T20:04:56.340

setup.py 旨在从命令行运行。您需要打开命令提示符（在 Windows 7 中，按住 shift 并右键单击包含 setup.py 文件的目录。您应该能够选择“在此处打开命令窗口”）。

从命令行，您可以键入

```
python setup.py --help 
```

...获取命令列表。你要做的是...

```
python setup.py install 
```

# relational - 具有不同“所有者”原则的 OneToMany（但不仅如此）

> ID：12324603
> 
> 赞同：1
> 
> 时间：2012-06-08T14:30:04.583
> 
> 标签：relational, orm

我有一个附件实体，我在其中存储用户可以在各种内容类型实体中附加的文件。

现在我遇到了每个“内容类型”实体和附件实体之间的关系的麻烦。

我正在尝试与 JoinTable 建立 OneToMany 关联，但它为每种关系类型创建了一个 JoinTable。例如。如果我有一个博客和一个可以托管附件的邮件实体，Doctrine 将创建两个表：blogs_attachments 和 mail_attachments。

但是，如果我需要知道具体附件记录的“所有者”怎么办？

有人可以帮我吗？

谢谢你！

# javascript - 如何查看页面加载进度？

> ID：12324606
> 
> 赞同：5
> 
> 时间：2012-09-07T19:59:00.583
> 
> 标签：javascript, jquery, html, css

如何检查窗口加载进度？我知道页面完全加载时有一个 jquery 事件，但我也希望能够跟踪其加载进度的百分比。

类似的东西（只是伪代码）

```
$(window).load_change(function(){
    set_progress_bar(window.load_percentage);
}); 
```

这将获得页面加载的进度并相应地更改进度条。

这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T20:06:35.577

要查看加载了多少 DOM，您可以策略性地检查页面上存在的元素。以下帖子是这样做的一个很好的参考，但只需拥有一个您想要检查的元素的 ID 数组，然后使用`setTimeout()`它每 200 毫秒调用一次更新函数或其他东西应该可以让您查看已加载的内容并更新您的相应的进度条。

[如何检查可见DOM中是否存在元素？](https://stackoverflow.com/questions/5629684/javascript-check-if-element-exists-in-the-dom)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-03T14:15:32.360

正如 Hanlet 所提到的，有一些常见的场景可以使用：

1.  你有一个网站，你的页面有很多图片；
2.  您有一个 Web 应用程序，并且您的页面有很多进程或 ajax 请求；或者
3.  两个都。

对于第一点，我看到人们使用图像预加载器有两个主要好处，首先是当页面加载时，所有图像都会**在**那里，其次是图像通常是页面加载的较重部分，所以对这些的基本百分比计算几乎可以说明这一点。一个简单的 javascript 图像预加载器算法将遍历`img`文档上的每个标签并创建一个`Image`对象，在将其`src`插入页面之前设置其属性。

对于数字 2，我将制作一个*类似观察者的*Progress 对象，如下所示：

```
var Progress = {
    processes:{},
    // Adds a process to keep track on
    addProcess:function(name){
        this.processes[name] = false; // false for non-completed
    },
    // Sets a process as completed, calls redrawProgress
    setCompleted:function(name){
        this.processes[name] = true;
        this.redrawProgress();
    },
    redrawProgress:function(){ /* Updates the progress bar */ }
}; 
```

然后，在每个进程中，您应该在进度条中注册它，并在它完成时`Progress.addProcess('myprocessname');`调用。`Progress.setCompleted('myprocessname');`

对于数字 3，我会尝试某种方式来了解所有页面的请求（包括图像、ajax 数据请求、外部 javascript 调用和其他进程），并将其与`Progress`数字 2 中的对象解决方案混合，但我从未尝试过这个.

# intellij-idea - 如何在 IntelliJ IDEA 中更改语言？

> ID：12324614
> 
> 赞同：4
> 
> 时间：2012-09-07T19:59:35.670
> 
> 标签：intellij-idea

这似乎是个愚蠢的问题，但我在设置中的任何地方都找不到它。怎么改语言？？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-08T00:17:29.547

你的意思是IDE语言？好像[你不能](http://devnet.jetbrains.net/message/5307040#5307040)，除非你[自己本地化它](http://www.jetbrains.org/intellij/sdk/docs/reference_guide/localization_guide.html)......

# numpy - 为什么 octave 的 prctile 和 numpy 的百分位数之间存在差异？

> ID：12324615
> 
> 赞同：3
> 
> 时间：2012-09-07T19:59:50.497
> 
> 标签：numpy, octave

我一直在将 matlab/octave 程序重写为 numpy 并遇到了一些结果值的差异。百分位数/百分比和标准偏差函数都会发生这种情况。

在 Numpy 中：

```
import matplotlib.mlab as ml
import numpy

>>> t = numpy.linspace(0,100, 100)
>>> numpy.percentile(t,95)
95.0
>>> numpy.std(t)
29.157646512850626
>>> ml.prctile(t,95)
95.000000000000014 
```

在八度：

```
octave:1> t = linspace(0,100,100)';
octave:2> prctile(t,95)
ans =  95.454545
octave:3> std(t)
ans =  29.304537 
```

尽管 't' 的数组值相同，但结果比我想象的要大得多。

在 numpy help(numpy.std) 他们特别提到该算法是：

```
std = sqrt(mean(abs(x - x.mean())**2)) 
```

所以我在 octave 中实现了它并得到了 numpy 给出的确切答案。所以看起来标准偏差函数不同。
但是为什么/如何？哪个是正确的？（如果有这样的事情）

甚至是分位数/百分位数？

以防万一，因为我在 Linux aptosid 中​​......

GNU Octave，版本 3.6.2

麻木的。**版本**“1.6.2rc1”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T20:11:03.653

当百分位数位于两个数据点之间时，Numpy 只是使用不同的算法。Octave，Matlab 和 R 总是在需要时将它精确地居中在两点之间（我相信），numpy 做得更多...如果你检查[http://en.wikipedia.org/wiki/Percentile](http://en.wikipedia.org/wiki/Percentile)你会看到有几种计算百分位数的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T00:34:22.927

似乎 Octave 至少默认情况下假设 ddof=1，而 numpy 默认使用 0：

```
>>> numpy.std(t, ddof=0)
29.157646512850633
>>> numpy.std(t, ddof=1)
29.304537349375785 
```

# javascript - 将谷歌地图标记信息存储在数据库中

> ID：12324616
> 
> 赞同：0
> 
> 时间：2012-09-07T20:00:00.707
> 
> 标签：javascript, google-maps-api-3, google-maps-markers

我正在使用 Python 为后端创建一个带有 Google App Engine 的网站，并且我正在尝试为该网站提供一些谷歌地图功能。

我想拥有它，以便用户可以将标记提交到地图上，然后该标记的 GPS 坐标将与其他一些文本信息一起存储在数据库中，我能够完成所有这些，但我不知道如何将所有这些标记及其各自的信息窗口放回地图上。我想我可以做某种 for 循环，但我找不到 javascript 应该是什么来放置它们。它将有超过 1000 个标记，并且每隔几天就会添加更多标记，因此仅将它们一个一个放在地图上并不是一个真正的选择。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T21:42:21.087

请参阅[文档的文章部分](https://developers.google.com/maps/articles/)，有许多关于使用 PHP/mySQL 的文章，其中的概念应该适用于您的系统。

这一篇可能涵盖了您需要的内容： [Using PHP/MySQL with Google Maps](https://developers.google.com/maps/articles/phpsqlajax_v3)

展示如何使用 PHP/MySQL 和 Google Maps API v3 创建一个从数据库轮询数据并显示为标记的地图。

# jquery-mobile - 为什么我的主干路由器重定向到应用程序根目录？

> ID：12324621
> 
> 赞同：0
> 
> 时间：2012-09-07T20:00:17.743
> 
> 标签：jquery-mobile, backbone.js, backbone-routing

我在我的应用程序中使用以下路由器：

```
app.Router = Backbone.Router.extend({
    // define the route and function maps for this router
    routes : {
        "" : "showLogin",
        // Sample usage: http://ServerManager/
        "login" : "login",
        // Sample usage: http://ServerManager/#login
        "logout" : "logout",
        // Sample usage: http://ServerManager/#logout
        "folders" : "listFolders",
        // Sample usage: http://ServerManager/#folders
        "folders/:name" : "showFolder",
        // Sample usage: http://ServerManager/#folders/System
        "*other" : "defaultRoute"
        // Sample usage: http://ServerManager/#badHash
    },
    showLogin : function() {
        console.log("Home page loaded. Redirecting to #login page.");
        this.navigate("login", {trigger: true, replace: true});
    },
    login : function() {
        //console.log("login route fired");
        // delete sessionStorage items and load a new loginview
        this.changePage(new app.LoginView()); 
    },
    logout : function() {
        //console.log("logout route fired");
        // Clear the token and other session items from sessionStorage
        sessionStorage.clear();
        this.navigate("login", {trigger: true, replace: true});
    },
    listFolders : function() {
        //console.log("listFolders route fired.")
        if (app.folderView === undefined) {
            console.log("creating new app.folderView");
            app.folderView = new app.FolderView();
        }
        else {
            console.log("using existing app.folderView");
        }
        this.changePage(app.folderView);
    },
    showFolder : function(name) {
        console.log( app.router.routes[Backbone.history.fragment] );
        //console.log("showFolder route fired.")
        this.changePage(new app.ServiceView({folder : name}));
        console.log( app.router.routes[Backbone.history.fragment] );
        //app.router.navigate("folder/" + name, {trigger: false});
    },
    defaultRoute : function() {
        alert("Error. Page doesn\'t exist.");
    },
    changePage : function(page) {
        $(page.el).attr("data-role", "page");
        page.render();
        $("body").append($(page.el));
        var transition = $.mobile.defaultPageTransition;
        $.mobile.changePage($(page.el), {changeHash : true, transition : transition});
    }
}); 
```

如果我使用

```
app.router.navigate("folders", {trigger: true, replace: true}); 
```

它成功地将应用程序发送到服务器/#folders，但是当我通过

```
app.router.navigate("folders/" + id, {trigger: true, replace: true}); 
```

它触发应用程序的根目录并加载我的登录页面。在重定向发生之前，我可以看到正确的 URL（例如 server/folders/folder1）暂时闪烁。关于这里发生了什么的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T20:03:34.030

骨干路由器最后期望更通用的路由。

设置`folders/:id`路线后跟`folders`路线。

**更新**

其实仔细想想，也未必是这样的。你可以发布控制台输出吗？它调用了正确的函数吗？

也许`$.mobile ... changeHash: true`是矛盾的。您可能应该只让其中一个框架为您更改 url 哈希。

# .net - 共享主机上的 System.OutOfMemoryException

> ID：12324622
> 
> 赞同：0
> 
> 时间：2012-09-07T20:00:21.757
> 
> 标签：.net, asp.net-mvc-3, shared-hosting

我有一个共享的托管网站，在上面我托管了 3 个网站。2个域和1个子域。

我的子域 1 有问题。每次我去它，我得到

```
'System.OutOfMemoryException' 

Server Error in '/' Application.
Exception of type 'System.OutOfMemoryException' was thrown.
Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code.

Exception Details: System.OutOfMemoryException: Exception of type 'System.OutOfMemoryException' was thrown.

Source Error:

An unhandled exception was generated during the execution of the current web request. Information regarding the origin and location of the exception can be identified using the exception stack trace below.

Stack Trace:

[OutOfMemoryException: Exception of type 'System.OutOfMemoryException' was thrown.]
   System.Reflection.RuntimeAssembly._nLoad(AssemblyName fileName, String codeBase, Evidence assemblySecurity, RuntimeAssembly locationHint, StackCrawlMark& stackMark, Boolean throwOnFileNotFound, Boolean forIntrospection, Boolean suppressSecurityChecks) +0
   System.Reflection.RuntimeAssembly.nLoad(AssemblyName fileName, String codeBase, Evidence assemblySecurity, RuntimeAssembly locationHint, StackCrawlMark& stackMark, Boolean throwOnFileNotFound, Boolean forIntrospection, Boolean suppressSecurityChecks) +39
   System.Reflection.RuntimeAssembly.InternalLoadAssemblyName(AssemblyName assemblyRef, Evidence assemblySecurity, StackCrawlMark& stackMark, Boolean forIntrospection, Boolean suppressSecurityChecks) +132
   System.Reflection.RuntimeAssembly.InternalLoad(String assemblyString, Evidence assemblySecurity, StackCrawlMark& stackMark, Boolean forIntrospection) +144
   System.Reflection.Assembly.Load(String assemblyString) +28
   System.Web.Configuration.CompilationSection.LoadAssemblyHelper(String assemblyName, Boolean starDirective) +46

[ConfigurationErrorsException: Exception of type 'System.OutOfMemoryException' was thrown.]
   System.Web.Configuration.CompilationSection.LoadAssemblyHelper(String assemblyName, Boolean starDirective) +618
   System.Web.Configuration.CompilationSection.LoadAllAssembliesFromAppDomainBinDirectory() +209
   System.Web.Configuration.CompilationSection.LoadAssembly(AssemblyInfo ai) +130
   System.Web.Compilation.BuildManager.GetReferencedAssemblies(CompilationSection compConfig) +178
   System.Web.Compilation.BuildManager.GetPreStartInitMethodsFromReferencedAssemblies() +94
   System.Web.Compilation.BuildManager.CallPreStartInitMethods() +332
   System.Web.Hosting.HostingEnvironment.Initialize(ApplicationManager appManager, IApplicationHost appHost, IConfigMapPathFactory configMapPathFactory, HostingEnvironmentParameters hostingParameters, PolicyLevel policyLevel, Exception appDomainCreationException) +677

[HttpException (0x80004005): Exception of type 'System.OutOfMemoryException' was thrown.]
   System.Web.HttpRuntime.FirstRequestInit(HttpContext context) +9090876
   System.Web.HttpRuntime.EnsureFirstRequestInit(HttpContext context) +97
   System.Web.HttpRuntime.ProcessRequestNotificationPrivate(IIS7WorkerRequest wr, HttpContext context) +256 
```

这些站点已经部署了几个星期，现在我是唯一使用它的用户。自几周前发布以来，没有对代码进行任何新的更改，当我上周使用该网站时，它运行良好。

我试图重新上传所有代码，但仍然是同样的问题。代码的本地副本工作正常，没有问题。

我的其他 2 个站点运行正常

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T20:02:34.297

您的其他站点可能已将其使用量增加到您的总内存需求大于托管公司分配的内存的程度。联系他们以获取更多内存添加到您的帐户。

# android - 在 ListFragment 中无法识别 findViewById

> ID：12324623
> 
> 赞同：0
> 
> 时间：2012-09-07T20:00:26.093
> 
> 标签：android, android-fragments, android-listfragment

> **可能重复：**
> [片段android中的findViewById](https://stackoverflow.com/questions/6495898/findviewbyid-in-fragment-android)

我目前正在研究 android 项目并试图让片段工作。片段部分正在工作，但我正在尝试控制 UI 组件，在标准活动上我可以使用类似的东西

```
TextView txtMyTextBox = (TextView)findViewById(R.id.my_text_box) 
```

我正在通过 ListFragment 扩展类，但是当我尝试与上面相同的代码时，我收到以下错误

> findViewById(int) 方法未定义

为什么这不起作用。感谢您的任何帮助，您可以提供。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-07T20:03:19.647

该方法未在 Fragment 类中定义，我假设您正在调用它。您必须在片段显示的视图上使用它。这与您返回的视图相同，`onCreateView()`您可以通过 检索它`getView()`。因此，`TextView txtMyTextBox = (TextView)getView().findViewById(R.id.my_text_box)`应该工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T20:02:32.023

当你使用片段时，你应该重写 onCreateView 方法。

这是一个例子：

```
 @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) 
    {
        View v = inflater.inflate(R.layout.YOUR_FRAGMENT_LAYOUT, null);

        TextView txtMyTextBox = (TextView)v.findViewById(R.id.my_text_box)

        return v;
    } 
```

# c - Yacc 找不到 YY_CURRENT_BUFFER

> ID：12324624
> 
> 赞同：3
> 
> 时间：2012-09-07T20:00:27.000
> 
> 标签：c, bison, lex, flex-lexer

我正在关注本网站上有关如何使用 flex 解析字符串的其他示例：

```
yy_scan_string(string);
yylex();
yyparse(); 
yy_delete_buffer( YY_CURRENT_BUFFER ); 
```

第 4 行给出了它所说的问题

```
 error: ‘YY_CURRENT_BUFFER’ undeclared (first use in this function) 
```

我也没有得到 YY_BUFFER_STATE，顺便说一下，我是从野牛文件 (.y) 中调用它们的，所以它们应该可用。我不确定为什么它没有找到 typedef。我没有在谷歌的前十几个链接上想出任何东西任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-08T04:17:18.080

`YY_CURRENT_BUFFER`并且`YY_BUFFER_STATE`由 flex 定义，而不是 bison，因此它们在`lex.yy.c`flex 生成的文件中定义（和使用）。因此，您只能从文件中访问它们`.l`，而不能从`.y`文件中访问它们。

如果您想以野牛语法访问它们，最简单的方法是将它们的使用封装在您在`.l`文件第 3 部分中定义的小函数中。`.y`然后从文件或任何其他源文件中调用该函数。

# wpf - 列标题样式

> ID：12324625
> 
> 赞同：2
> 
> 时间：2012-09-07T20:00:28.597
> 
> 标签：wpf

您好我在尝试创建样式并将其应用于 DataGrid Header 时遇到以下问题得到以下错误

> DependencyProperty.UnsetValue} '不是属性'ColumnHeaderStyle'的有效值。"

他没有看到事实如此，如果有人能给我一个想法，我将不胜感激离开网格代码和样式。-

```
 <!-- ************** DATAGRID ************ -->
<Style x:Key="DataGridFloatingWindow" TargetType="{x:Type DataGrid}">
    <Setter Property="AutoGenerateColumns" Value="False" />
    <Setter Property="CanUserAddRows" Value="False" />
    <Setter Property="CanUserReorderColumns" Value="False" />
    <Setter Property="CanUserResizeColumns" Value="False" />
    <Setter Property="CanUserResizeRows" Value="False" />
    <Setter Property="CanUserSortColumns" Value="False" />
    <Setter Property="IsReadOnly" Value="True" />
    <Setter Property="SelectionUnit" Value="FullRow" />
    <Setter Property="SelectionMode" Value="Extended" />
    <Setter Property="BorderThickness" Value="0" />
    <Setter Property="Background" Value="#fcfcfc" />
    <Setter Property="GridLinesVisibility" Value="Horizontal" />
    <Setter Property="VerticalGridLinesBrush" Value="Transparent" />
    <!--<Setter Property="HorizontalGridLinesBrush"/>-->
    <Setter Property="ColumnHeaderStyle" Value="{StaticResource DataGridHeaderFloatingWindow}" >

        <!--<Setter.Value>
            <LinearGradientBrush StartPoint="0,0" EndPoint="3,0" MappingMode="Absolute" SpreadMethod="Repeat">
                <GradientStop Offset="0" Color="#dedede"/>
                <GradientStop Offset="0.5" Color="#dedede"/>
                <GradientStop Offset="0.5" Color="Transparent"/>
                <GradientStop Offset="1" Color="Transparent"/>
            </LinearGradientBrush>
        </Setter.Value>-->
    </Setter>

    <Setter Property="RowStyle">
        <Setter.Value>
            <Style TargetType="{x:Type DataGridRow}">
                <Style.Triggers>
                    <Trigger Property="IsSelected" Value="true">
                        <Setter Property="Background" Value="#dcdcdc" />
                        <Setter Property="BorderThickness" Value="0.50"></Setter>
                        <Setter Property="BorderBrush" Value="#787676"></Setter>
                        <Setter Property="Foreground" Value="#6e6e6e"></Setter>
                    </Trigger>
                </Style.Triggers>
            </Style>
        </Setter.Value>
    </Setter>

    <Setter Property="CellStyle">
        <Setter.Value>
            <Style TargetType="{x:Type DataGridCell}">
                <Setter Property="FontFamily" Value="{DynamicResource KozukaGothicPro}" />
                <Setter Property="FontSize" Value="10" />
                <Setter Property="Foreground" Value="#6e6e6e" />
                <Setter Property="FontWeight" Value="Medium" />
                <Setter Property="Padding" Value="10 5 10 7" />

                <Style.Triggers>
                    <Trigger Property="IsSelected" Value="true">
                        <Setter Property="BorderThickness" Value="0"></Setter>
                        <Setter Property="Background" Value="#dcdcdc" />
                        <Setter Property="Foreground" Value="#040404"></Setter>
                    </Trigger>
                </Style.Triggers>
            </Style>
        </Setter.Value>
    </Setter>
</Style>

<Style x:Key="DataGridHeaderFloatingWindow" 
       TargetType="{x:Type DataGridColumnHeader}">
    <Setter Property="SnapsToDevicePixels" Value="True" />
    <Setter Property="MinWidth" Value="0" />
    <Setter Property="MinHeight" Value="28" />
    <Setter Property="Foreground" Value="White" />
    <Setter Property="Cursor" Value="Hand" />
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="{x:Type DataGridColumnHeader}">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*" />
                        <ColumnDefinition Width="Auto" />
                    </Grid.ColumnDefinitions>
                    <ContentPresenter Margin="6,3,6,3" VerticalAlignment="Center" />
                    <Path x:Name="SortArrow" Visibility="Collapsed" Data="M0,0 L1,0 0.5,1 z" Stretch="Fill" 
                          Grid.Column="1" Width="8" Height="6" Fill="Red" Margin="0,0,8,0" 
                          VerticalAlignment="Center" RenderTransformOrigin="0.5,0.4" />
                </Grid>
                <ControlTemplate.Triggers>
                    <MultiTrigger>
                        <MultiTrigger.Conditions>
                            <Condition Property="IsMouseOver" Value="True" />
                            <Condition Property="SortDirection" Value="{x:Null}" />
                        </MultiTrigger.Conditions>
                    </MultiTrigger>
                    <MultiTrigger>
                        <MultiTrigger.Conditions>
                            <Condition Property="IsMouseOver" Value="true" />
                            <Condition Property="SortDirection" Value="{x:Null}" />
                        </MultiTrigger.Conditions>
                    </MultiTrigger>

                    <Trigger Property="SortDirection" Value="Ascending">
                        <Setter TargetName="SortArrow" Property="Visibility" Value="Visible" />
                        <Setter TargetName="SortArrow" Property="RenderTransform">
                            <Setter.Value>
                                <RotateTransform Angle="180" />
                            </Setter.Value>
                        </Setter>
                    </Trigger>
                    <Trigger Property="SortDirection" Value="Descending">
                        <Setter TargetName="SortArrow" Property="Visibility" Value="Visible" />
                    </Trigger>
                </ControlTemplate.Triggers>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style>

 <DataGrid x:Name="GeographicZones" Style="{DynamicResource DataGridFloatingWindow}" >
                    <DataGrid.Columns>
                        <DataGridTemplateColumn >
                            <DataGridTemplateColumn.Header>
                                <CheckBox x:Name="CheckBoxSelectAll"></CheckBox>
                            </DataGridTemplateColumn.Header>
                            <DataGridTemplateColumn.CellTemplate>
                                <DataTemplate>
                                    <CheckBox HorizontalAlignment="Center" VerticalAlignment="Center" IsChecked="{Binding Source={x:Reference CheckBoxSelectAll}, Path=IsChecked, Mode=OneWay}"></CheckBox>
                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>
                        </DataGridTemplateColumn>
                        <DataGridTemplateColumn>
                            <DataGridTemplateColumn.CellTemplate>
                                <DataTemplate>
                                    <Grid>
                                        <Button Style="{StaticResource GridEditButtonStyle}" Content="{StaticResource GridEditDetailNormal}"></Button>
                                        <Button Style="{StaticResource GridViewButtonStyle}" Content="{StaticResource GridViewDetailNormal}"></Button>
                                    </Grid>
                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>
                        </DataGridTemplateColumn>
                        <DataGridTextColumn Header="{DynamicResource FW_General_Name}" Binding="{Binding Path=Name}" />
                        <DataGridTextColumn Header="{DynamicResource FW_General_Code}" Binding="{Binding Path=Code}" />
                        <DataGridTemplateColumn Header="{DynamicResource FW_General_Enabled}">
                            <DataGridTemplateColumn.CellTemplate>
                                <DataTemplate>
                                    <Grid>
                                        <ContentPresenter Content="{StaticResource GridViewEnabled}" Style="{StaticResource DataGridIconOnEnabled}" />
                                        <ContentPresenter Content="{StaticResource GridViewDisabled}" Style="{StaticResource DataGridIconOnDisabled}" />
                                    </Grid>
                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>
                        </DataGridTemplateColumn>
                    </DataGrid.Columns>
                </DataGrid> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T09:00:54.440

`StaticResource`将此行替换为`DynamicResource`-

```
<Setter Property="ColumnHeaderStyle"
        Value="{StaticResource DataGridHeaderFloatingWindow}" > 
```

到

```
<Setter Property="ColumnHeaderStyle"
        Value="{DynamicResource DataGridHeaderFloatingWindow}" > 
```

`DataGridHeaderFloatingWindow`或者，在您的 xaml 中移动上述样式`DataGridFloatingWindow`以解析引用。

当`DynamicResource`加载数据网格时，引用将在运行时解析。然而，为了`StaticResource`参考需要在加载 xaml 时解决，所以任何`StaticResource used in the xaml should be defined above its usage`.

# asp.net-mvc - 在强类型视图中分配模型变量

> ID：12324636
> 
> 赞同：1
> 
> 时间：2012-09-07T20:01:32.100
> 
> 标签：asp.net-mvc, razor, model-binding

我有一个`ModelA`模型和一个强类型视图`ViewA`，类型为`ModelA`. 如您所知，如果您声明一个带有这样签名的动作说“ActionAPost”：

```
[HttpPost]
public ActionResult ActionAPost(ModelA mod) {
  // code
} 
```

在这种情况下，它将表单上设置的值绑定到 ModelA 实例`mod`。我想做这样的事情：

视图A：

```
@ModelAInstance.SomeAttr = ViewBag.SomeAttr; 
```

将一些值静态分配给将由 post 操作处理的模型属性。

编辑：

该值是`ViewBang`先前设置的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-07T20:06:54.337

所以在视图中有一个隐藏元素，其中 name 属性反映了模型和属性的对象路径。这样，它将以您想要的方式绑定回您的 POST 操作

例子：

```
<input type="hidden" name="SomeAttr" value="@ViewBag.SomeAttr" /> 
```

用 Razor 和`ViewBag`价值

在您的请求中设置模型中的值，`GET`然后使用剃刀：

```
@Html.Hidden("SomeAttr", (object)ViewBag.SomeAttr); 
```

~~`@Html.HiddenFor(m => m.SomeAttr, new { value = ViewBag.SomeAttr });`~~

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T20:13:25.610

在表单中创建一个隐藏变量，名称与 ViewModel 的属性名称**相同**

```
<input type="hidden" name="SomeAttr" value="@ViewBag.SomeAttr" /> 
```

现在在您的 post 操作中，您可以通过访问 SomeAttr 属性来获得它

```
public ActionResult Add(ModelA model)
{
  //check for model.SomeAttr here

} 
```

假设您的 Model ，`ModelA`有一个`SomeAttr`属性。MVC Modelbinding 将在发布时将您的输入绑定到模型对象。

# azure-table-storage - Azure 表存储错误：PropertyValueTooLarge

> ID：12324638
> 
> 赞同：4
> 
> 时间：2012-09-07T20:01:48.893
> 
> 标签：azure-table-storage

文档说实体上所有属性的组合大小必须小于 1MB。我有一个属性，它是一个 .Length 为 128410 的字符串，它给了我这个错误。任何人都可以帮忙吗？我期望能够存储多达 1 MB。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T21:42:35.603

一个字符串值的大小可能最大为 64 KB。有关 Azure 存储表的详细信息，请查看[了解表服务数据模型](http://msdn.microsoft.com/en-us/library/windowsazure/dd179338.aspx)

# wcf - WCF 中的并行化

> ID：12324639
> 
> 赞同：1
> 
> 时间：2012-09-07T20:01:56.567
> 
> 标签：wcf, parallel-processing, task-parallel-library, spring.net

我使用 Spring.NET 框架创建 WCF 服务。该服务是数学服务，为客户端应用程序提供一些计算。

我对多核服务器上的 WCF 服务并行化有疑问。举个简单的例子，我有 20 个内核的服务器。

首先是一个简化的代码。

```
//WS interface
public interface IMatlabService
{
    List<ResultData> Calculate(byte [] data);
}

//WS class definition
[ServiceBehavior(Namespace = "http://server.com/MatlabService")]
public class MatlabService: IMatlabService
{
    public IMatlabManager MatlabManager{get;set:}

    //web metod for math computations
    public List<ResultData> Calculate(byte [] data)
    {
        var result = new List<ResultData>();

        //do math work in another thread
        Task<List<ResultData>> task = Task.Factory.StartNew<List<ResultData>>(() =>
                                                           {
                                                               return MatlabManager.CalculateWithFiniteElementMethod(data);
                                                           });

        result.AddRange(task.Result)

        return result;

    }
}

public interface IMatlabManager 
{
    List<ResultData> CalculateWithFiniteElementMethod(byte [] data);
}

public class MatlabManager : IMatlabManager 
{
    public List<ResultData> CalculateWithFiniteElementMethod(byte [] data)
    {
        // do some math work
    }
} 
```

使用 Spring.NET，我将 Web 服务和管理器类配置为非单例。

**Spring.NET XML 配置在这里。**

Matlab 管理器配置：

```
 <object name="matlabManager"
          type="MatlabManager"
          singleton="false"/> 
```

MatlabService 配置：

```
 <object name="matlabService"
          type="MatlabService"
          singleton="false">
       <property name="MatlabManager" ref="matlabManager"/>
  </object> 
```

**来自 web.config 的 WCF 服务配置**

```
 <behavior name="Behavior1">
     <serviceMetadata httpGetEnabled="true"/>
     <serviceDebug includeExceptionDetailInFaults="true"/>
  </behavior>

<services>
  <service name="matlabService" 
            behaviorConfiguration="Behavior1">
    <endpoint address="" 
            binding="basicHttpBinding" 
            contract="IMatlabService" 
            bindingNamespace="http://server.com/MatlabService"/>
    <endpoint contract="IMetadataExchange" 
            binding="mexHttpBinding" 
            address="mex"/>
  </service>
</services> 
```

**SVC 文件。**

```
<%@ ServiceHost Language="C#" Debug="true" Service="MatlabServiceService" Factory="Spring.ServiceModel.Activation.ServiceHostFactory" %> 
```

1.  我相信对于每个客户端 Web 方法调用都会创建 MatlabService 的新实例，并且 WCF 服务工作是在新线程（WCF 服务线程）上完成的，并且操作系统将此线程分配给 CPU 核心。

    或者我错了，行为每次调用都会创建新的服务对象，我必须在 ServiceBehavior 属性 InstanceContextMode 中定义？

    **[服务行为（InstanceContextMode=InstanceContextMode.PerCall）]**

2.  在 MatlabService 的 Web 方法计算中，我使用 System.Threading.Tasks 进行并行化，因此数学工作在另一个线程（数学线程）中完成。

    为每个调用创建 WCF 服务线程，并在 WCF 服务线程中创建数学线程。

    我不确定这是否属实。

    也许需要在 ConcurrencyMode 中允许 WCF 服务中的多线程？

    **[ServiceBehavior(InstanceContextMode=InstanceContextMode.PerCall,ConcurrencyMode = ConcurrencyMode.Multiple)]**

我想听听如何并行化多核 CPU 的 web 方法调用。我用谷歌搜索，但没有找到任何清晰有用的东西，因为我使用 Spring.NET 框架来创建 WCF 服务。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T20:16:17.447

1.  默认实例上下文模式是 PerCall，因此显式设置是多余的。

2.  是的，您正在创建一个额外的线程来执行数学运算，但是您没有获得任何东西，因为您在任务完成之前一直处于阻塞状态。事实上，它的效率较低，因为您有创建和管理额外线程的开销。

每个 Web 调用都已在其自己的线程中提供服务。

我可以看到添加额外并行计算的唯一地方是在以下实现中：

```
MatlabManager.CalculateWithFiniteElementMethod(data) 
```

但是，这看起来像是对 Matlab 的调用。如果您可以使用并行代码重新实现该方法，您可能会获得一些性能提升。

无论您做什么，分析都是了解您是否真的在加快速度的关键。请记住 - 并行并不总是意味着更快。同步这些操作并为它们创建线程是有开销的。

# php - PHP 添加 1 个月至今

> ID：12324640
> 
> 赞同：4
> 
> 时间：2012-09-07T20:02:00.107
> 
> 标签：php, date

我有一个返回 1 个月前 url 的函数。

我想显示当前选定的月份，但我不能使用简单的当前月份，因为当用户单击指向 1 个月前选定月份的链接时，选定月份会改变并且不会是最新的。

因此，函数返回 2012 年 8 月

如何制作增加 1 个月的小 php 脚本？

到目前为止，我已经：

```
<?php echo strip_tags(tribe_get_previous_month_text()); ?> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-07T20:04:30.483

简单的方法：

```
$next_month = strtotime('august 2012 next month'); 
```

更好的方法：

```
$d = new Date('August 2012');
$next_month = $d->add(new DateInterval('P1M')); 
```

相关文档：[strtotime](http://php.net/strtotime) [date](http://php.net/date) [dateinterval](http://php.net/dateinterval)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2016-02-29T05:39:53.517

有3个选项/答案

```
 $givendate is the given date (ex. 2016-01-20)

option 1:
        $date1 = date('Y-m-d', strtotime($givendate. ' + 1 month'));

option 2:
        $date2 = date('Y-m-d', strtotime($givendate. ' + 30 days'));

option 3:
        $number = cal_days_in_month(CAL_GREGORIAN, date('m', strtotime($givendate)), date('Y', strtotime($givendate)));
        $date3 = date('Y-m-d', strtotime($date2\. ' + '.$number.' days')); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-07T20:03:23.667

您可以使用 DateTime 类和 DateTime::add() 方法：

[文档](http://fr2.php.net/manual/en/datetime.add.php)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-02-29T05:56:34.857

`strtotime`您可以在 2012 年 4 月必须到达的任何输入上简单地使用该函数，然后应用`date`and`strtotime`增量周期为“+1 个月”。

```
$x = strtotime($t);
$n = date("M Y",strtotime("+1 month",$x));
echo $n; 
```

以下是 PHP 手册中的相关部分：

[http://www.php.net/manual/en/function.date.php](http://www.php.net/manual/en/function.date.php)

[https://secure.php.net/manual/en/function.strtotime.php](https://secure.php.net/manual/en/function.strtotime.php)

此解决方案解决了将*任意*时间量增加到时间值的附加问题。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-08-31T06:13:52.120

嗨除了他们的回答。我认为，如果您只想根据当前日期获得下个月，这就是我的解决方案。

```
$today = date("Y-m-01");

$sNextMonth = (int)date("m",strtotime($today." +1 months") ); 
```

请注意，我不断将日期定义为 01，以便我们可以安全地获得下个月。如果那是日期（“Ymd”）；而当天是 31 它将失败。

希望这可以帮助。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-02-07T07:19:39.893

日期差异

```
$date1 = '2017-01-20';
$date2 = '2019-01-20';

$ts1 = strtotime($date1);
$ts2 = strtotime($date2);

$year1 = date('Y', $ts1);
$year2 = date('Y', $ts2);

$month1 = date('m', $ts1);
$month2 = date('m', $ts2);

echo $joining_months = (($year2 - $year1) * 12) + ($month2 - $month1); 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2021-04-29T15:45:59.493

由于我们知道 strtotime(+1 月) 总是增加 30 天，如果日期以 31、30 或 29 天结束，并且如果您仍想留在下个月的最后一天，则可能会出现一些问题。

所以我写了这个复杂的脚本来解决这个问题并进行调整，以便您可以增加所有类型的格式，如年、月、日、小时、分钟和秒。

```
 function seetime($datetime, $p = '+', $i, $m = 'M', $f = 'Y-m-d H:i:s')
{

    /* 
    $datetime needs to be in format of YYYY-MM-DD HH:II:SS but hours, minutes and seconds are not required
    $p can only be "+" to increse or "-" to decrese
    $i is the amount you want to change
    $m is the type you want to change

    Allowed types:
    Y = Year
    M = Months
    D = Days
    W = Weeks
    H = Hours
    I = Minutes
    S = Seconds

    $f is the datetime format you want the result to be returned in

    */
    $validator_y = substr($datetime,0,4);
    $validator_m = substr($datetime,5,2);
    $validator_d = substr($datetime,8,2);

    if(checkdate($validator_m, $validator_d, $validator_y))
    {
        $datetime = date('Y-m-d H:i:s', strtotime($datetime));
        #$p = either "+" to add or "-" to subtract
        if($p == '+' || $p == '-')
        {
            if(is_int($i))
            {
                if($m == 'Y')
                {
                    $year = date('Y', strtotime($datetime));
                    $rest = date('m-d H:i:s', strtotime($datetime));

                    if($p == '+')
                    {
                        $ret = $year + $i;
                    }
                    else
                    {
                        $ret = $year - $i;
                    }

                    $str = $ret.'-'.$rest;

                    return(date($f, strtotime($str)));
                }
                elseif($m == 'M')
                {
                    $year = date('Y', strtotime($datetime));
                    $month = date('n', strtotime($datetime));
                    $rest = date('d H:i:s', strtotime($datetime));
                    $his = date('H:i:s', strtotime($datetime));
                    if($p == '+')
                    {
                        $ret = $month + $i;
                        $ret = sprintf("%02d",$ret);

                    }
                    else
                    {
                        $ret = $month - $i;
                        $ret = sprintf("%02d",$ret);

                    }

                    if($ret < 1)
                    {
                        $ret = $ret - $ret - $ret;
                        $years_back = floor(($ret + 12) / 12);
                        $monts_back = $ret % 12;
                        $year = $year - $years_back;
                        $month = 12 - $monts_back;
                        $month = sprintf("%02d",$month);
                        $new_date = $year.'-'.$month.'-'.$rest;
                        $ym = $year.'-'.$month;

                        $validator_y = substr($new_date,0,4);
                        $validator_m = substr($new_date,5,2);
                        $validator_d = substr($new_date,8,2);
                        if(checkdate($validator_m, $validator_d, $validator_y))
                        {
                            return (date($f, strtotime($new_date)));
                        }
                        else
                        {
                            $days = date('t',strtotime($ym));
                            $new_date = $ym.'-'.$days.' '.$his;
                            return (date($f, strtotime($new_date)));
                        }
                    }
                    if($ret > 12)
                    {

                        $years_forw = floor($ret / 12);
                        $monts_forw = $ret % 12;
                        $year = $year + $years_forw;
                        $month = sprintf("%02d",$monts_forw);
                        $new_date = $year.'-'.$month.'-'.$rest;
                        $ym = $year.'-'.$month;

                        $validator_y = substr($new_date,0,4);
                        $validator_m = substr($new_date,5,2);
                        $validator_d = substr($new_date,8,2);
                        if(checkdate($validator_m, $validator_d, $validator_y))
                        {
                            return (date($f, strtotime($new_date)));
                        }
                        else
                        {
                            $days = date('t',strtotime($ym));
                            $new_date = $ym.'-'.$days.' '.$his;
                            return (date($f, strtotime($new_date)));
                        }
                    }
                    else
                    {
                        $ym = $year.'-'.$month;
                        $new_date = $year.'-'.$ret.'-'.$rest;

                        $validator_y = substr($new_date,0,4);
                        $validator_m = substr($new_date,5,2);
                        $validator_d = substr($new_date,8,2);
                        if(checkdate($validator_m, $validator_d, $validator_y))
                        {
                            return (date($f, strtotime($new_date)));
                        }
                        else
                        {
                            $ym = $validator_y . '-'.$validator_m;
                            $days = date('t',strtotime($ym));
                            $new_date = $ym.'-'.$days.' '.$his;
                            return (date($f, strtotime($new_date)));
                        }

                    }
                }
                elseif($m == 'D')
                {
                    return (date($f, strtotime($datetime.' '.$p.$i.' days')));
                }
                elseif($m == 'W')
                {
                    return (date($f, strtotime($datetime.' '.$p.$i.' weeks')));
                }
                elseif($m == 'H')
                {
                    return (date($f, strtotime($datetime.' '.$p.$i.' hours')));
                }
                elseif($m == 'I')
                {

                    return (date($f, strtotime($datetime.' '.$p.$i.' minutes')));
                }
                elseif($m == 'S')
                {
                    return (date($f, strtotime($datetime.' '.$p.$i.' seconds')));
                }
                else
                {
                    return 'Fourth parameter can only be any of following: Valid Time Parameters Are: Y M D Q H I S';
                }
            }
            else
            {
                return 'Third parameter can only be a number (whole number)';
            }           
        }
        else
        {
            return 'Second parameter can only be + to add or - to subtract';
        }
    }
    else    
    {
        return 'Date is not a valid date';
    }   

} 
```

# database - 将magento数据库从开发同步到生产

> ID：12324641
> 
> 赞同：4
> 
> 时间：2012-09-07T20:02:02.987
> 
> 标签：database, git, magento, synchronization, staging

我使用 git 进行版本控制。我有一个开发、登台和生产环境。当我完成开发时，我会推动分期以供客户审查。获得批准后，我会将更改从暂存阶段推送到生产阶段。只要没有数据库更改，它就可以正常工作。如果我在本地开发中通过 Magento connect 安装模块并进行数据库修改，会发生什么情况。

由于生产服务器一直在变化，我如何将这些更改推送到生产服务器？

**编辑：**

我写了两个shell脚本。一种将生产数据库下拉到我的开发服务器，用开发 url 替换基本 url 并相应地更新我的开发数据库。它还留下了生产 sql 转储以添加到我的 git 存储库中。我不确定将原始转储保留在源代码控制中是否有益，但我会尝试一下。第二个脚本将开发数据库移至暂存状态，并基本上执行与第一个脚本相同的操作。

现在，当需要转移到生产环境时，我将更新的生产 repo 拉入生产服务器并允许 magento 执行此操作。我最近也开始使用 SQLYog，它有一个数据库比较向导，可以让我了解我的开发和生产数据库的差异，并允许我有选择地合并更改。它总是会创建一个迁移脚本，我也将它添加到源代码管理中。如果出现任何问题，我可以运行比较以查看是否遗漏了任何内容。

对你们来说，这听起来像是一个不错的工作流程吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-09T11:14:18.190

这是开发人员的常见情况。修改代码和模式要容易得多，并且当有一个被彻底理解并且对 UI 没有太多灵活性的小代码库时，可以确保一切都很好。当然，Magento 并非如此，它可能很难用于自动化测试和持续集成方案。也就是说，您可以依赖一些已知的、可测试的行为。

**概述**

在处理与生产合并的本地开发时，必须确保在更新文件系统时也会应用与新功能或更改功能相关的架构和数据更改。这实际上是 Magento 本身的工作方式。模块配置文件可以提供版本号并且可以配置设置资源。此信息用于输入模式和数据修改工作流程，从而将版本信息添加到数据库中。正是文件指定的版本号和数据库注册的版本号之间的一致性，一个人/系统可以在给定文件的情况下*推断*数据库处于适当的状态。

这意味着当新的/更新的模块文件合并到生产中并且满足必要的条件（例如配置缓存无效等）时，应该进行数据库升级。您（适当的）担心的是，此过程可能会因远程服务器级别差异、远程数据差异等而中断。如果没有严格监管的集成测试过程，就会产生一些开销。

**攻击计划：选择正确的策略**

该领域的基本活动是评估模块对数据库的影响领域。对于任何值得安装的模块，这应该很简单；检查以下任何一项：

1.  一个*system.xml*文件
2.  *sql*或*数据*文件夹中存在安装/升级脚本
3.  存在自定义设置资源类（在`global/resources`xpath 下配置）
4.  适当的配置 XML（模块配置节点中的版本号和`global/resources`xpath 下的设置资源）

对于 1，只需查看结构并知道它对数据库的影响将仅限于`core_config_data`表，并且通常只有在管理员通过 GUI 保存值后（注意下面的 1\. 也适用）。

对于 2 和 3，查看设置为运行的脚本。这些可以分为三个一般区域： 1\. 配置设置 - 查找`setConfigData()`和`deleteConfigData()`调用 2\. 表格添加和编辑（新表格、添加列等） 3\. EAV 相关的更改和添加；寻找 EAV 设置资源 4\. 非 EAV 数据更改：安装新数据或修改现有数据

这是感觉和直觉的问题，但衡量对数据库的影响程度将使您能够确定是否应该将生产数据克隆到本地开发并在本地测试设置工作流程，验证它是否正常工作，然后推送到生产并重新-检查（总是备份！）。如果更改范围很广，最好使站点脱机，这样可以确保在升级失败后需要恢复时不会丢失订单或客户数据。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-30T14:13:51.747

您通常不想从 dev > prod 推送数据库中包含的数据。您的架构定义应该包含在 Magento sql 安装脚本中。如果您确实有想要推送到 prod 的实际新数据，则必须根据具体情况进行操作。在 prod 上运行实际案例之前，您很可能会从 prod > dev 下拉以测试数据和配置。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-09-08T11:34:11.913

**情况1：**

如果您的生产服务器具有与本地相同的数据 (DB)，则只需将数据库和文件复制到生产服务器并执行以下操作：

1）删除文件夹/var的内容

2) 更改文件/app/etc/local.xml 的值在那里您可以找到您的连接字符串数据（数据库用户、主机和名称）。

3) 上传数据库后，您需要进行一些更改。

运行此查询：

```
SELECT * FROM core_config_data WHERE path = 'web/unsecure/base_url' OR path = 'web/secure/base_url'; 
```

你会得到 2 行。通过运行此查询更新这些行

```
UPDATE core_config_data SET value = 'YOUR_NEW_LIVE_URL' WHERE path LIKE 'web/%/base_url'; 
```

就这样。

**案例 - 2：**

如果您不想在生产中更改数据库数据，则需要通过 megento 安装模块直接连接到生产服务器。您可以更新您在本地更改的文件。

# c++ - 将字符串转换为 GUID 的算法

> ID：12324649
> 
> 赞同：1
> 
> 时间：2012-09-07T20:02:35.837
> 
> 标签：c++, algorithm, guid

我正在尝试创建一个将任意字符串作为输入并基于该字符串创建 GUID 的函数。理想情况下，GUID 的格式应该是`GUID`struct from `objbase.h`，但这并不重要。重要的是该函数是确定性的，但始终（或足够接近以始终）为不同的字符串创建不同的 GUID。

我可以使用什么样的算法来做到这一点？我已经考虑过对字符串内容的位操作，但我会很感激一些方向。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T20:15:39.767

计算字符串的 MD5 哈希并将其视为 GUID 怎么样？GUID 和 MD5 哈希都是 128 位值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T20:12:34.223

您可以散列字符串，然后使用散列的前 16 个字节创建 GUID (http://msdn.microsoft.com/en-us/library/90ck37x3.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-07T20:13:23.177

检查 UUID 版本 3 和 5 的规范：

1.  [http://en.wikipedia.org/wiki/Uuid#Version_3_.28MD5_hash.29](http://en.wikipedia.org/wiki/Uuid#Version_3_.28MD5_hash.29)
2.  [http://en.wikipedia.org/wiki/Uuid#Version_5_.28SHA-1_hash.29](http://en.wikipedia.org/wiki/Uuid#Version_5_.28SHA-1_hash.29)

本质上，您计算字符串的 MD5（或 SHA-1）并将结果逐字存储在 128 位 UUID 中。对于 SHA-1，您需要截断结果，因为 SHA-1 返回 160 位。

# sql - 如何在列的 sql select 语句中插入新的 guid

> ID：12324650
> 
> 赞同：1
> 
> 时间：2012-09-07T20:02:37.183
> 
> 标签：sql, c#-4.0

我有以下选择语句：

```
string query = @"Select Sudent, " + Guid.NewGuid() + " as  Id, Name, DOB from Student where Name = Ken"; 
```

然后我在 bulkcopy 命令中使用此语句在表中插入。但问题是它只为所有 5 行生成 1 个 guid 并引发错误。如何为列 ID 的所有 5 行（或任意数量的行选择获取）获取不同的 guid。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-07T20:05:07.783

```
string query = @"Select Student, newid() as  Id, Name, DOB from Student where Name = Ken"; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-07T20:06:03.213

对于 SQL Server：

```
SELECT Student, NEWID() AS Id, Name, DOB
    FROM Student
    WHERE Name = 'Ken' 
```

对于 MySQL：

```
SELECT Student, UUID() AS Id, Name, DOB
    FROM Student
    WHERE Name = 'Ken' 
```

对于甲骨文：

```
SELECT Student, SYS_GUID() AS Id, Name, DOB
    FROM Student
    WHERE Name = 'Ken' 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-07T20:04:36.270

由于您使用的是 C#，我将假设 SQL Server。

SQL Server 有一个内置函数——[`NEWID`](http://msdn.microsoft.com/en-us/library/ms190348.aspx)它将创建一个 GUID。

```
string query = @"Select Sudent, NEWID() as  Id, Name, DOB 
                 from Student where Name = Ken"; 
```

# php - PHP PDO 我如何包含 fetch assoc 和 numrows

> ID：12324653
> 
> 赞同：3
> 
> 时间：2012-09-07T20:03:11.553
> 
> 标签：php, mysql, database, pdo

试图将我所有的旧`mysql_*`操作转换为新的，并且据我所知，改进了 PDO，但是这个查询似乎不会成功运行，我试图从用户名 = $username 的表 PEOPLE 中选择所有（以前被宣布`$username = $_SESSION['username'];`）

```
$query = "SELECT  * FROM people WHERE username=?";
$stmt = $conn->prepare($query);
$stmt->bindParam(1, $username);   
$stmt->execute();
$num_rows = $stmt->fetchColumn();

if ($num_rows == 1) {
    // ...
} 
```

工作代码是：

```
$query = "SELECT  * FROM people 
             WHERE username=?";
$stmt = $conn->prepare($query);
$stmt->bindParam(1, $username);   
$stmt->execute();
$num_rows = $stmt->fetchColumn();
$user = $stmt->fetchObject();

if ($user) {

//do something

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T20:08:04.990

```
$query = "SELECT * FROM people WHERE username = :username";
$stmt = $conn->prepare($query);
$stmt->bindParam(':username', $username);   
$stmt->execute();

while ($row = $stmt->fetchObject()) {
    // do stuff
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-07T20:09:19.863

使用[PDOStatement::rowCount](http://php.net/manual/en/pdostatement.rowcount.php)作为 num_rows 和[PDOStatement::fetch(PDO::FETCH_ASSOC)](http://www.php.net/manual/en/pdostatement.fetch.php)作为 fetch_assoc 等效项。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-07T20:06:20.053

`$stmt->fetchColumn`不获取行数；在这种情况下，它将从结果集的第一行中获取第一列。因为这不等于`1`通常你的测试会失败。

在这种情况下，实际上也不需要计算返回的行数，因为您期望的是 1 或 0（如果用户名不存在）。所以你可以简单地做：

```
$stmt->execute();
$user = $stmt->fetchObject();
if (!$user) {
    // not found
}
else {
    echo "User $user->username found!";
} 
```

该`if(!$user)`测试有效，因为如果没有要获取的`$user`行将是`false`（请参阅文档[`fetchObject`](http://www.php.net/manual/en/pdostatement.fetchobject.php)）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-07T20:08:46.830

你要

```
if ($stmt->num_rows == 1) { 
```

反而。

# ruby-on-rails - Ruby on Rails：/bin/sh：rspec：找不到命令

> ID：12324657
> 
> 赞同：13
> 
> 时间：2012-09-07T20:03:23.270
> 
> 标签：ruby-on-rails, ruby, sublimetext2

我目前正在阅读 Michael Hartl 的 RoR 教程，在尝试运行 Spork 和 Guard 时卡在第 3 章。尝试运行测试时，我得到：

`/bin/sh: rspec: command not found`

是的，我确实四处寻找答案，但我没有看到 RubyTest.sublime.settings 文件在哪里，所以我不知道如何编辑它。谁能帮我解决我的错误？

这是我的用户文件夹中的 Rubytest.sublime.settings 文件

```
{
  "erb_verify_command": "bundle exec erb -xT - {file_name} | ruby -c",
  "ruby_verify_command": "bundle exec ruby -c {file_name}",

  "run_ruby_unit_command": "bundle exec ruby -Itest {relative_path}",
  "run_single_ruby_unit_command": "bundle exec ruby -Itest {relative_path} -n     '{test_name}'",

  "run_cucumber_command": "bundle exec cucumber {relative_path}",
  "run_single_cucumber_command": "bundle exec cucumber {relative_path} -l{line_number}",

  "run_rspec_command": "bundle exec rspec {relative_path}",
  "run_single_rspec_command": "bundle exec rspec {relative_path} -l{line_number}",

  "ruby_unit_folder": "test",
  "ruby_cucumber_folder": "features",
  "ruby_rspec_folder": "spec",

  "ruby_use_scratch" : false,
  "save_on_run": false,
  "ignored_directories": [".git", "vendor", "tmp"],

  "hide_panel": false,

  "before_callback": "",
  "after_callback": ""
} 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-16T12:28:52.477

现在 RubyTest 包有一个名为“check_for_rvm”的配置选项，默认情况下是禁用的。

您可以编辑`~/.config/sublime-text-2/Packages/RubyTest/RubyTest.sublime-settings`文件并将其设置为`true`. 这对我有用，而无需做任何其他事情。

**更新：**如果你使用 PackageControl，你可能需要重新安装 RubyTest 包，而不是仅仅更新它。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-11-26T05:29:30.140

sublime 插件正在尝试`rspec`使用 shell运行命令`/bin/sh`。但是，找不到该命令，因为 RVM 未在 shell 环境中加载。

因此，`rspec`可执行文件所在的文件夹不在 shell 的搜索路径（`PATH`环境变量）中。RVM 将 gem 附带的任何可执行命令安装到某个地方，例如：“ `/home/your-user/.rvm/gems/ruby-1.9.3-p194@myproject/bin/`”（*实际路径取决于您的 gemset、ruby 版本以及您的操作系统存储用户主目录的位置*）

# 简单的解决方案

正如[这里](https://stackoverflow.com/a/11695721/645491)提到的......你可能会发现简单地从包含 RVM 的 shell 环境（即：你的项目目录）执行 sublime 可能会解决`PATH`问题。但是，这要求您每次都从命令行执行文本编辑器，并且保留 shell 的环境。

```
cd ~/src/my-ruby-project
subl . 
```

经过大量实验后，我找到了一种方法来强制 RubyTest 插件`rspec`在正确的 RVM 控制环境下执行（**支持捆绑**程序）。

# 捆绑器支持

这是我的`~/.config/sublime-text-2/Packages/RubyTest/RubyTest.sublime-settings`文件的内容：

```
{
  "erb_verify_command": "~/.rvm/bin/rvm-auto-ruby $(~/.rvm/bin/rvm gemdir | sed -e 's/@.*//' -e 's/$/@global/' )/bin/bundle exec erb -xT - {file_name} | ~/.rvm/bin/rvm-auto-ruby -c",
  "ruby_verify_command": "~/.rvm/bin/rvm-auto-ruby -c {file_name}",

  "run_ruby_unit_command": "~/.rvm/bin/rvm-auto-ruby -Itest {relative_path}",
  "run_single_ruby_unit_command": "~/.rvm/bin/rvm-auto-ruby -Itest {relative_path} -n '{test_name}'",

  "run_cucumber_command": "~/.rvm/bin/rvm-auto-ruby $(~/.rvm/bin/rvm gemdir | sed -e 's/@.*//' -e 's/$/@global/' )/bin/bundle exec cucumber {relative_path}",
  "run_single_cucumber_command": "~/.rvm/bin/rvm-auto-ruby $(~/.rvm/bin/rvm gemdir | sed -e 's/@.*//' -e 's/$/@global/' )/bin/bundle exec cucumber {relative_path} -l{line_number}",

  "run_rspec_command": "~/.rvm/bin/rvm-auto-ruby $(~/.rvm/bin/rvm gemdir | sed -e 's/@.*//' -e 's/$/@global/' )/bin/bundle exec rspec {relative_path}",
  "run_single_rspec_command": "~/.rvm/bin/rvm-auto-ruby $(~/.rvm/bin/rvm gemdir | sed -e 's/@.*//' -e 's/$/@global/' )/bin/bundle exec rspec {relative_path} -l{line_number}",

  "ruby_unit_folder": "test",
  "ruby_cucumber_folder": "features",
  "ruby_rspec_folder": "spec",

  "ruby_use_scratch" : false,
  "save_on_run": false,
  "ignored_directories": [".git", "vendor", "tmp"],

  "hide_panel": false,

  "before_callback": "",
  "after_callback": ""
} 
```

只要您在全局 gemset 中有捆绑程序，并且将 RVM 安装到您的主目录，这应该可以工作（如果*评估不正确，或者如果**或**位于其他地方，则**根据需要调整路径`~/.rvm``bundler``rvm-auto-ruby`*）。

如果您使用 gemsets，您还应该在项目`.rvmrc`文件中添加如下行：

```
rvm use ruby-1.9.3-p327@your_project_gemset_name 
```

# 没有捆绑器支持

这假设您已经安装到`cucumber`当前**ruby**​​ 的**@global** gemset ：`rspec`

 ****```
{
  "erb_verify_command": "~/.rvm/bin/rvm-exec $(~/.rvm/bin/rvm current) 1>/dev/null erb -xT - {file_name} | ~/.rvm/bin/rvm-auto-ruby -c",
  "ruby_verify_command": "~/.rvm/bin/rvm-auto-ruby -c {file_name}",

  "run_ruby_unit_command": "~/.rvm/bin/rvm-auto-ruby -Itest {relative_path}",
  "run_single_ruby_unit_command": "~/.rvm/bin/rvm-auto-ruby -Itest {relative_path} -n '{test_name}'",

  "run_cucumber_command": "~/.rvm/bin/rvm-auto-ruby $(~/.rvm/bin/rvm gemdir | sed -e 's/@.*//' -e 's/$/@global/' )/bin/cucumber {relative_path}",
  "run_single_cucumber_command": "~/.rvm/bin/rvm-auto-ruby $(~/.rvm/bin/rvm gemdir | sed -e 's/@.*//' -e 's/$/@global/' )/bin/cucumber {relative_path} -l{line_number}",

  "run_rspec_command": "~/.rvm/bin/rvm-auto-ruby $(~/.rvm/bin/rvm gemdir | sed -e 's/@.*//' -e 's/$/@global/' )/bin/rspec {relative_path}",
  "run_single_rspec_command": "~/.rvm/bin/rvm-auto-ruby $(~/.rvm/bin/rvm gemdir | sed -e 's/@.*//' -e 's/$/@global/' )/bin/rspec {relative_path} -l{line_number}",

  "ruby_unit_folder": "test",
  "ruby_cucumber_folder": "features",
  "ruby_rspec_folder": "spec",

  "ruby_use_scratch" : false,
  "save_on_run": false,
  "ignored_directories": [".git", "vendor", "tmp"],

  "hide_panel": false,

  "before_callback": "",
  "after_callback": ""
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-03-15T18:35:22.373

我花了很多时间来解决同样的问题！使用 Michael Hartl “Ruby on Rails 教程”，我无法让 rspec 在 Sublime Text 2 中运行。它一直在说

```
/bin/sh: rspec: command not found 
```

我终于意识到[RubyTest 包](https://github.com/maltize/sublime-text-2-ruby-tests)正在为我的 RVM 寻找错误的地方！

在我的 Mac 上，RubyTest 的路径是`/Library/Application Support/Sublime Text 2/Packages/Ruby Test`

首先，为了让 RubyTest 寻找 RVM，我将参数`RubyTest.sublime-settings`从

`"check_for_rvm": false,`到 `"check_for_rvm": true,`

然后我深入[研究了`run_ruby_test.py`](https://github.com/maltize/sublime-text-2-ruby-tests/blob/master/run_ruby_test.py).

在第 151 行，在 BaseRubyTask 类中，我的 RVM 的路径错误：

```
rvm_cmd = os.path.expanduser('~/.rvm/bin/rvm-auto-ruby') 
```

我将其更改为完整的正确路径：

```
rvm_cmd = os.path.expanduser('/usr/local/rvm/bin/rvm-auto-ruby') 
```

如果这不是您的路径，请通过键入`which rvm-auto-ruby`并替换它来找到正确的路径。

保存后`run_ruby_test.py`，我转到终端，`cd`到我的 Rails 应用程序目录，然后运行`spork`

最后，我`static_pages_spec.rb`在 Sublime Text 2 中打开。现在所有的测试都在它上面工作！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-07T20:33:55.590

从终端尝试“gem list -d rspec”。那应该打印出您在名称中带有 rspec 的所有 gem。如果没有，请尝试“gem install rspec”。

假设您确实从终端安装了 rspec（您可以使用“which rspec”等进行验证），在这种情况下，您的问题很可能与 Sublime 的配置方式有关。请注意安装 rspec 的路径，并检查您的编辑器是否在其路径中包含该路径。

（对不起，我特别不熟悉 Sublime。）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-07T20:38:05.380

参考 Bundler 设置：[https ://github.com/maltize/sublime-text-2-ruby-tests](https://github.com/maltize/sublime-text-2-ruby-tests)

关于`RubyTest.sublime-settings`，它应该在您的主文件夹下 sublime-test2/Packages/RubyTest 文件夹中的某个位置。对于 Ubuntu，它将是：

```
~/.config/sublime-text-2/Packages/RubyTest 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-25T04:54:06.640

您需要从工作目录中的终端启动 sublime：示例 - （转到终端中的工作目录，然后从终端启动 sublime）

cd rails/my_app_dir
subl 。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-09-24T17:12:43.770

对于任何使用 rbenv 的人，也有这个设置`rubyTest.sublime-settings`可以解决问题：

```
"check_for_rbenv": true 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-04-28T10:37:46.450

如果您在 Mac 中安装 Ruby 期间使用[了 rbenv](https://github.com/rbenv/rbenv)，并且在安装“rspec gem”后运行“rspec”时遇到问题，例如：“-bash: rspec: command not found”，只需键入命令刷新它：

```
rbenv rehash 
```****

# c#-4.0 - 如何在 MVC3 的对话框/弹出窗口中从子域加载视图？

> ID：12324660
> 
> 赞同：0
> 
> 时间：2012-09-07T20:03:25.997
> 
> 标签：c#-4.0, jquery, asp.net-mvc-4

我有一个带有登录按钮的主屏幕。当用户单击登录按钮时，登录视图必须在对话框（弹出窗口）中打开。这里的扭曲是主屏幕和登录屏幕是两个子域中的两个不同的应用程序。所以我必须在 my.sample.com 应用程序的对话框（弹出窗口）中打开 auth.sample.com 的登录视图。对不起英语不好。请看下面的代码：

```
<p>
  <button type="submit" name="PopupLoginbutton" id = "PopupLoginbutton" value="Popbutton">Login</button> 
</p>
<div id="dialog" title="Login" style="overflow: hidden;"> 
<script type="text/javascript">
$(function () {
    $('#dialog').dialog({
        autoOpen: false,
        width: 400,
        resizable: false,
        title: 'hi there',
        modal: true,
        open: function (event, ui) {
                           $(this).load("http://auth.sample.com/");
        },
        buttons: {
            "Close": function () {
                $(this).dialog("close");
            }
        }
    });

    $('#PopupLoginbutton').click(function () {
                  $('#dialog').dialog('open');
    });
}); 
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T20:19:47.517

If I understand your position correctly, you want to provide access to content or an area of your site, but only if users are logged in. Are you looking to provide log in capabilities to your new site through the existing auth of your subdomain?

Unfortunately this won't work as you describe, if you're using common methods for authentication and authorization. Logging into a different sub domain isn't going to get you where you're trying to go. I can't log into my bank and then check my email.

You can POST wherever you like or even use JS to load content from other sites/domains (if the end-users permissions/config allow), but your token in the browser to represent a logged in user won't carry over from one domain to the next.

There are several approaches, here are a couple of common ones:

1.  Create a custom MembershipProvider and RoleProvider. These would allow you to use the server-side logic you already have to your access your authentication service.
2.  Configure your new site to use the same membership provider (and database) that the subdomain is using.
3.  Build a web service and tokenization strategy to expose identity from your existing subdomain, and incorporate that into your site.

Number 2 is the easiest, if you own the subdomain. Number 1 isn't too hard if you can wrap the calls to the membership service. If your subdomain is third party, however, and it locks up the user database then you won't have much luck here, unless they provide a means to wrap their login services.

Hope this helps some.

Cheers.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T20:16:27.760

只有在当前 MVC3 项目中才能访问视图。如果您只想显示登录屏幕，您应该使用完整的 URL (http://my.sample.com/login) 显示弹出窗口。

如果您想将信息传递给登录应用程序，则必须使用表单和 POST/GET 到完整 URL。

# java - 到日期的字符串格式不正确

> ID：12324663
> 
> 赞同：2
> 
> 时间：2012-09-07T20:03:45.743
> 
> 标签：java, date

我正在尝试在 Java 中进行简单的字符串到日期转换。我正在从一些日志中浏览日期，需要将其转换为日期以进行一些处理。通过的日期将如下所示：

```
2012-09-07 19:53:33 
```

在我的代码中，当我尝试将其转换为 Date 对象时，我得到一个完全不同的日期。我的代码如下所示：

```
String taskStart = "2012-09-07 19:53:33";  
String dateFormat = "yyyy-MM-dd hh:MM:ss";
SimpleDateFormat dateFormat=new SimpleDateFormat(format);
Date taskStartDate = dateFormat.parse(taskStart); 
```

我得到的输出是这样的：

```
Sat May 07 19:00:27 PDT 2016 
```

我怎样才能简单地将我的原始日期转换为正确的格式？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-07T20:07:34.897

1.  您已指定`MM`（一年中的月份）两次。“分钟”的 m 必须小写。
2.  如果您采用基于 24 小时的时间，则需要指定以`HH`捕获在时间字符串的一部分）`0-23``hh``1-12`
3.  最后，您的示例代码没有定义`format`您传递给`SimpleDateFormat`对象的构造函数的变量。事实上，您使用了`dateFormat`两次变量名，根本没有定义`format`变量 - 至少不是根据您在问题中包含的代码。

所以，我相信你正确的格式字符串应该是......

```
"yyyy-MM-dd HH:mm:ss" 
```

...完整，正确的代码示例将是：

```
String taskStart = "2012-09-07 19:53:33";  
String format = "yyyy-MM-dd HH:mm:ss";
SimpleDateFormat dateFormat=new SimpleDateFormat(format);
Date taskStartDate = dateFormat.parse(taskStart); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-07T20:06:03.200

根据[SimpleDateFormat](http://docs.oracle.com/javase/6/docs/api/java/text/SimpleDateFormat.html)的文档，您应该使用大写的“H”来表示 0-23 格式的小时。此外，分钟用小写的“m”表示。

```
String dateFormat = "yyyy-MM-dd HH:mm:ss"; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-20T11:28:25.617

我认为您应该使用日期函数再次将日期输出转换为`String`格式：`formatter.format`

```
Date formatter=new SimpleDateFormatter("yy-MM-dd HH mm ss")

String s=formatter.format(taskStartDate) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-07T20:09:44.567

尝试将您的 dateFormat 定义更改为：

```
String dateFormat = "yyyy-MM-dd HH:mm:ss"; 
```

请注意，在您的时间里，0-23 的 HH 应该大写，分钟的 mm 应该小写。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-07T20:10:16.877

`"yyyy-MM-dd hh:MM:ss";`

`MM``mm`分别代表**月份和分钟**......

 **所以应该是...

`"yyyy-MM-dd hh:mm:ss";`**

# canvas - HTML5 Canvas 运动模糊效果？

> ID：12324666
> 
> 赞同：4
> 
> 时间：2012-09-07T20:03:51.523
> 
> 标签：canvas, html5-canvas, blur, motion

我正在尝试使用 HTML5 画布制作类似运动模糊效果的东西，但没有成功。

基本上我想做的是拍一张照片，让它看起来像“快进”，就像当你拍照并且人移动时一样。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-08T03:47:09.163

有几个画布库已经实现了各种模糊算法。[EaselJS已独立实现 x 轴和 y 轴模糊，如您](http://www.createjs.com/#!/EaselJS)[在此示例](http://www.createjs.com/#!/EaselJS/demos/filters)中所见。

您可能想要的只是他们库中的 x 轴模糊。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T20:51:52.213

我遇到了相反的问题。缩放图像时，我试图消除模糊。幸运的是，我的问题为您的问题提供了一个简单的解决方案。此外，繁重的工作由 API 执行，因此效率很高。

如果您将图像绘制到较小分辨率的画布上，然后将其放大，您将获得模糊的图像。我已经在许多浏览器中尝试过这个，它似乎工作得差不多。 如果您担心这种技术在浏览器和未来版本中的一致性，这个[问题将探讨浏览器何时以及为什么会使用这种模糊行为。](https://stackoverflow.com/questions/7615009/disable-interpolation-when-scaling-a-canvas)

canvas.drawImage 的 image 参数接受另一个画布。当您将图像绘制到中间画布上时，您可以尝试沿一个轴使用小分辨率。然后，将其缩放回原始大小，模糊效果应主要沿一个轴。

我不是图像专家，所以我不知道如何最佳地使用运动模糊（它是否应该沿着一个轴等），但是通过一些摆弄和研究，你可以使用这种技术来获得你想要的效果想。

希望这可以帮助

# ruby-on-rails - 由于 json 1.7.5 无法运行包更新

> ID：12324668
> 
> 赞同：1
> 
> 时间：2012-09-07T20:04:16.637
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.1, rubygems

我似乎无法在装有 Ruby 1.9.3p194 的 Windows 7 机器上运行捆绑更新。我也安装了最新的 DevKit。bundle抱怨缺少make命令，我在硬盘上找不到make（我搜索过）。我怎样才能让它工作？

```
C:\website>bundle update
Fetching gem metadata from http://rubygems.org/.........
Using rake (0.9.2.2)
Using i18n (0.6.1)
Using multi_json (1.3.6)
Using activesupport (3.2.8)
Using builder (3.0.2)
Using activemodel (3.2.8)
Using erubis (2.7.0)
Using journey (1.0.4)
Using rack (1.4.1)
Using rack-cache (1.2)
Using rack-test (0.6.1)
Using hike (1.2.1)
Using tilt (1.3.3)
Using sprockets (2.1.3)
Using actionpack (3.2.8)
Using mime-types (1.19)
Using polyglot (0.3.3)
Using treetop (1.4.10)
Using mail (2.4.4)
Using actionmailer (3.2.8)
Using arel (3.0.2)
Using tzinfo (0.3.33)
Using activerecord (3.2.8)
Using activeresource (3.2.8)
Using bundler (1.1.5)
Using coffee-script-source (1.3.3)
Using execjs (1.4.0)
Using coffee-script (2.2.0)
Using rack-ssl (1.3.2)
Installing json (1.7.5) with native extensions
Gem::Installer::ExtensionBuildError: ERROR: Failed to build gem native extension.

        C:/Ruby193/bin/ruby.exe extconf.rb
creating Makefile

make
'make' is not recognized as an internal or external command,
operable program or batch file.

Gem files will remain installed in C:/Ruby193/lib/ruby/gems/1.9.1/gems/json-1.7.5 for inspection.
Results logged to C:/Ruby193/lib/ruby/gems/1.9.1/gems/json-1.7.5/ext/json/ext/generator/gem_make.out
An error occured while installing json (1.7.5), and Bundler cannot continue.
Make sure that `gem install json -v '1.7.5'` succeeds before bundling. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T22:06:36.857

`ruby dk.rb install --force`在 DevKit 目录中成功了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T20:25:57.447

有些gem需要编译，`json`gem就是这种情况。

您可以通过安装 RubyInstaller 的 DevKit 来解决大多数 gem 的编译问题，可从[下载页面获得](http://rubyinstaller.org/downloads)

下载后，请按照RubyInstaller wiki 页面上的[安装说明进行操作。](https://github.com/oneclick/rubyinstaller/wiki/Development-Kit)

安装后，打开一个新的命令提示符并尝试再次安装有问题的 gem：

```
gem install json 
```

它应该成功。

那是考虑正确安装了 DevKit。正如 RubyInstaller 邮件列表中所讨论的，您可以强制安装 DevKit：

```
ruby dk.rb install --force 
```

在 DevKit 目录中。

# ios - iOS uiview 和 uiviewcontroller

> ID：12324681
> 
> 赞同：0
> 
> 时间：2012-09-07T20:05:16.427
> 
> 标签：ios, uiview, uiviewcontroller

海

我有两个类 uiviewcontroller 和 uiview。我有一个视图控制器。里面我有uiview。在 uiview 我有文本字段，当我写一个文本并单击完成时，我需要刷新 uiviewcontroller。

我在 uiview 类中尝试了这个：

```
 -(IBAction)textFieldReturn:(id)sender
{

      ViewController *vc = [[ViewController alloc] init];
        [vc viewDidLoad];
} 
```

我需要刷新，就像您单击按钮并打开视图控制器一样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T20:18:51.910

I am guessing you mean that you want to "refresh" the view, not the view controller. To do that simply call [self setNeedsDisplay] from the view, or [self.view setNeedsDisplay] from the view controller. Also make sure that the textfield is a subview of the uiview. Either do that in the nib file or in code by calling [self addSubview: (textfield here)].

Also, if you want to access the view controller from the view you will need to create an IBOutlet, simply allocating a new ViewController object within the view does not mean that the created view controller controls the view. Hopefully that makes sense. I'd recommend going through some ios starter tutorials as well. Just google that there are a lot.

# sql - 如果更新失败则插入

> ID：12324686
> 
> 赞同：1
> 
> 时间：2012-09-07T20:06:03.317
> 
> 标签：sql, h2

使用 H2，我想尝试更新一行。如果它不存在，我想插入它。 **如果可能的话，我想在一个 SQL 语句中完成所有操作**，以避免并发问题。

到目前为止，我有更新：

```
UPDATE RATING 
SET NUM_RATINGS = (SELECT NUM_RATINGS + 1 FROM RATING WHERE EVENT_UID = :eventUid)
, SUM_RATINGS = (SELECT SUM_RATINGS + :newRating FROM RATING WHERE EVENT_UID = :eventUid)
WHERE EVENT_UID = :eventUid AND EXISTS ( SELECT * FROM RATING WHERE EVENT_UID = :eventUid) 
```

表定义为：

```
CREATE TABLE RATING (
ID BIGINT NOT NULL,
EVENT_UID VARCHAR(255) NOT NULL, 
SUM_RATINGS BIGINT NOT NULL, 
NUM_RATINGS INT NOT NULL, 
PRIMARY KEY (ID),
FOREIGN KEY (EVENT_UID) REFERENCES EVENT(UID)
) 
```

任何人都可以改进更新声明吗？

如果该行不存在，我如何在同一个 SQL 语句中添加如下所示的插入？

```
INSERT INTO RATING ( ID , EVENT_UID , NUM_RATINGS , SUM_RATINGS ) 
VALUES (2, 'BWEIY-A4', 1, 4) 
```

# vim - BufWriteCmd 处理程序

> ID：12324696
> 
> 赞同：1
> 
> 时间：2012-09-07T20:06:45.717
> 
> 标签：vim

在这种情况下，我必须使用哪些关键部分才能让`foo()`函数将缓冲区写入磁盘（默认行为）？尤其是 vim 部分，无论是 via`vim.eval()`还是`vim.command()`其他。

```
au  BufWriteCmd * exec :python foo() 
```

`foo()`：

```
def foo():
    abuf = vim.eval("expand('<abuf>')" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-08T12:12:14.947

```
au  BufWriteCmd * :python foo()

python << EOF
import vim, os
def foo():
    abuf=int(vim.eval('expand("<abuf>")'))-1
    amatch=vim.eval('expand("<amatch>")')
    abang=bool(int(vim.eval('v:cmdbang')))
    cmdarg=vim.eval('v:cmdarg')

    if os.path.isdir(amatch):
        raise ValueError('Cannot write to directory {0}'.format(amatch))
    if not os.path.isdir(os.path.dirname(amatch)):
        raise ValueError('Directory {0} does not exist'.format(amatch))

    encoding=vim.eval('&encoding')

    opts={l[0] : l[1] if len(l)>1 else True
          for l in [s[2:].split('=')
                    for s in cmdarg.split()]}
    if 'ff' not in opts:
        opts['ff']=vim.eval('getbufvar({0}, "&fileformat")'.format(abuf))
        if not opts['ff']:
            opts['ff']='unix'
    if 'enc' not in opts:
        opts['enc']=vim.eval('getbufvar({0}, "&fileencoding")'.format(abuf))
        if not opts['enc']:
            opts['enc']=encoding
    if 'nobin' in opts:
        opts['bin']=False
    elif 'bin' not in opts:
        opts['bin']=vim.eval('getbufvar({0}, "&binary")'.format(abuf))

    if opts['bin']:
        opts['ff']='unix'
        eol=bool(int(vim.eval('getbufvar({0}, "&endofline")'.format(abuf))))
    else:
        eol=True

    eolbytes={'unix': '\n', 'dos': '\r\n', 'mac': '\r'}[opts['ff']]

    buf=vim.buffers[abuf]
    f=open(amatch, 'wb')
    first=True
    for line in buf:
        if opts['enc']!=encoding:
            # Does not handle invalid bytes.
            line=line.decode(encoding).encode(opts['enc'])
        if not first:
            f.write(eolbytes)
        else:
            first=False
        f.write(line)
    if eol:
        f.write(eolbytes)
    f.close()
EOF 
```

使用上面的代码，您将几乎完全模拟标准`:w smth`行为。

# list - 避免报告以允许修改 Filemaker Pro 11 中的记录

> ID：12324697
> 
> 赞同：1
> 
> 时间：2012-09-07T20:06:50.283
> 
> 标签：list, report, filemaker

我正在构建一个需要将表格显示为列表并允许用户将此类列表导出为 Excel 电子表格的数据库。创建报告，将它们显示为列表并提供导出为 Excel 的按钮不是问题，但是我注意到当我显示这些列表时，用户仍然可以编辑它们，因此添加/删除记录并修改现有记录的内容。我想找到一种在可视化列表时避免此类修改的方法，以确保用户不会意外更改数据。

关于如何做到这一点的任何想法？我正在使用 Filemaker pro 11

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T20:01:21.273

根据您的需要，有几种不同的方法可能是合适的：

1.  **在布局模式下，单击字段，进入检查器的数据选项卡，然后在“浏览”模式下**关闭字段输入。（您还可以选择在“查找”模式下关闭字段输入。您可以一次选择多个字段以对所有字段进行选择。）如果您的用户可以定期在这些字段中输入数据但您不希望他们*为此特定布局*输入数据。
2.  在管理数据库中，在字段选项下，在自动输入选项卡中打开**数据输入期间禁止修改值。**如果您只在导入期间或使用脚本更改字段的值，这是合适的。
3.  在管理安全性中，为该表（或那些字段）创建一个仅供查看的新权限集。这适用于某些用户*应该*能够修改数据而其他用户*不*应该能够修改数据的情况。

还有其他方法，但这是限制用户访问数据的三种最常见的方法。

# jsf-2 - 使用 Primefaces 日历清除日期选择

> ID：12324698
> 
> 赞同：5
> 
> 时间：2012-09-07T20:06:50.967
> 
> 标签：jsf-2, primefaces

有什么方法可以使用素面日历清除日期选择？

```
<p:calendar pattern="MM/dd/yyyy" navigator="true" id="endDate" for="endDate"
readonlyInput="true" mindate="#{manageMarketingProgramsBean.currentDate}" showOn="button">
<f:convertDateTime pattern="MM/dd/yyyy" timeZone="America/New_York" />
</p:calendar> 
```

我有 readonlyInput="true" 因为我不希望用户输入日期。我强迫他们从日历中选择日期，需要有另一种方式让用户能够清除所选日期。请让我知道如何实现这一目标？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-07T21:28:27.293

我想到的第一个方法是：

```
<p:calendar readonlyInput="true" widgetVar="calendarWidget"/>     
<p:commandButton value="Reset" onclick="calendarWidget.setDate(null)"/> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-12-05T13:25:18.550

这对我有用

```
<p:calendar widgetVar="calendarWidget" pattern="MM/dd/yyyy" />     
<p:commandButton value="Reset" onclick="PF('calendarWidget').setDate(null)" 
type="button" /> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-01-31T21:34:45.610

日历组件的 Primefaces 具有以下属性：showButtonBar。

如果您像这样将其设置为 true：

```
 <p-calendar
            appendTo="body"
            formControlName="someControl"
            id="someID"
            [maxDate]="someMaxDate"
            [showButtonBar]="true"
            [showIcon]="true"
          ></p-calendar> 
```

然后它将在日历组件上显示两个按钮。今天和清除。

希望它可以帮助某人。

[![在此处输入图像描述](../Images/b0372b2bc77972f39c0bad26f0877138.png)](https://i.stack.imgur.com/VHXUG.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-07-15T16:19:38.807

```
<p:calendar
    widgetVar="calendarWidgetStart"
/>

<p:calendar
    widgetVar="calendarWidgetEnd"
/>

<p:commandLink
    value="Action"
    action="#{entity.action}"
    onclick="setTimeout('remoteCommand();', 100);"
/>

<p:remoteCommand
    name="remoteCommand"
    update="@form"
    onstart="clearCalendarWidget();"
/>

<script>
    function clearCalendarWidget() { 
        $( PF('calendarWidgetEnd').setDate(null) ); 
        $( PF('calendarWidgetStart').setDate(null) );
    } 
</script> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-12-27T11:15:36.307

> HTML

```
<p:calendar 
    yearRange="c-100:c+100" 
    readonlyInput="true" 
    pattern="dd/MM/yyyy" 
    id="identity" 
    navigator="true" 
    mindate="today" 
    widgetVar="dateWidget" 
    value="#{bean.fieldname}" 
/> 
```

> JS

```
function name() {
    var mainID = prefix + collpaseID;
    -
      -
        -
          -
    clearCalendar(mainID,event);
}

function clearCalendar(collapseId) {
    try {
            allElements = 
 document.getElementById(collapseId).getElementsByClassName('hasDatepicker');

        for (i = 0, n = allElements.length; i < n; ++i) {
            allElements[i].setAttribute('onkeyup', 
'clearDate("'+allElements[i].id+'", event)');
        }
    }
    catch(e) {}
}

function clearDate(fieldID, e) {
    try{
        // 8 - backspace key, 46 - delete key
        if(e.keyCode == 8 || e.keyCode == 46) {
            //PF(getWidgetVarById(collapseId)).setDate(null);
            document.getElementById(fieldID).value="";
        }
    }
    catch(e){}
} 
```

# sql - JasperReports 中的条件 Where 子句

> ID：12324706
> 
> 赞同：7
> 
> 时间：2012-09-07T20:08:10.627
> 
> 标签：sql, jasper-reports, where-clause

假设我想要一个 JasperReport，让用户可以根据需要过滤日期。SQL如下：

```
select * from foo where bar = $P{bar} and some_date > $P{some.date} 
```

现在，如果他们没有传递日期，我不想按某个日期进行过滤。我发现人们使用以下内容：

```
select * from foo where bar = $P{bar} $P!{some.date.fragment} 
```

并且该`some.date.fragment`参数使用以下默认值定义：

```
($P{some.date} == null || $P{some.date}.equals("")) ? "" : "AND some_date >'" + new java.sql.Date($P{some.date}.getTime()).toString() + "'" 
```

这不起作用，因为`toString`它不会以我的 SQL 服务器理解的格式输出日期。我想让条件仍然使用带有 jdbc 驱动程序的准备好的语句并将参数折腾进去，我只希望准备好的语句依赖于参数是否为空。这可以做到吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-10T17:20:51.873

在您使用`$P!{}`表达式之前，JDBC-Driver 会为您完成所有格式化。

但是如果你使用`$P!{}`表达式，你必须自己格式化。

像这样的东西应该工作：

```
(
$P{some.date} == null 
? 
"" 
: 
"AND some_date >'" + (new SimpleDateFormat("dd.MM.yyyy HH:mm:ss.SSS")).format($P{some.date}) + "'"
) 
```

根据您的数据类型，您必须自定义`dd.MM.yyyy HH:mm:ss.SSS`.

如果您不想使用该`$P!{}`表达式，则可以使用以下解决方案来避免它。

*我个人不喜欢这种方式。它还可能导致错误的执行计划。*

`$P!{}`如果因为担心 sql 注入而不想使用。只要您的参数`$P{some.date}`包含像`java.lang.Date`.

* * *

创建一个参数。让我们调用它`${is_null_pram}`并使用 param class 添加一个默认表达式`Integer`：

```
($P{some.date} == null ? 1 : 0) 
```

现在可以查询：

```
SELECT 
    * 
FROM foo 
WHERE
    bar = $P{bar}
    AND
        (
            some_date > $P{some.date}
            OR 1 = $P{is_null_pram}
        ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T16:51:30.667

我认为您可以使用以下功能：

`$X{EQUAL, <column_name>, <parameter_name>}`

[如您在此](http://jasperreports.sourceforge.net/sample.reference/query/index.html)帮助页面中所见，它优化了查询。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-31T09:31:18.027

您可以使用此条件语句

```
 select * 
    from foo 
    where bar = $P{bar} and some_date > $P{some.date} or $P{some.date}  is null 
```

# c# - 具有一定数量项目的 MemoryCache

> ID：12324710
> 
> 赞同：4
> 
> 时间：2012-09-07T20:08:29.960
> 
> 标签：c#, caching

MemoryCache 是否具有缓存固定数量项目的功能？

例如，我们只对从数据库中缓存 2000 个项目感兴趣。在不断向缓存中添加项目的同时，如果超过指定的项目数量，可以删除最旧的项目。

如果没有，我们是否必须使用另一个线程来定期做家务？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-07T20:13:22.297

它没有任何内置的东西会限制对象的数量。相反，它会检查正在使用多少内存，并将其与[`CacheMemoryLimit`](http://msdn.microsoft.com/en-us/library/system.runtime.caching.memorycache.cachememorylimit.aspx). 如果`CacheMemoryLimit`超过，它将丢弃较旧的项目。您还可以通过[`CacheItemPolicy`](http://msdn.microsoft.com/en-us/library/system.runtime.caching.cacheitempolicy.aspx).

如果您真的将它用作内存缓存，这些方法都更有意义。换句话说，如果您担心内存限制和获取数据的成本之间的权衡，这些是确定何时从缓存中逐出项目的好方法。所以问问自己：

> 我真的想把它用作 MemoryCache 吗？为什么我什至关心从数据库中只加载 2000 个项目？

如果您担心内存开销，或者如果您担心项目过时，还有其他（更好的）方法来管理缓存，而不是指定多个对象。如果您有一些自定义理由在数据结构中保留特定数量的对象，请考虑使用不同的类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T21:10:08.273

另一种选择是创建一个新的 MemoryCache 提供程序，它为您执行对象限制管理。这将覆盖一些 MemoryCache 方法，例如添加和删除，并在达到任意限制（例如 2000 个对象）后自动滚降项目。

一种这样的实现可能如下所示：

```
public class ObjectLimitMemoryCache : MemoryCache
{
private const int ObjectLimit = 2000;
private const string IndexKey = "ObjectLimitIndexKey";

public ObjectLimitMemoryCache(string name, NameValueCollection config) 
: base (name, config)
{
}

new public static ObjectLimitMemoryCache Default { get { return new ObjectLimitMemoryCache(Guid.NewGuid().ToString(), new NameValueCollection());}}

public override bool Add(string key, Object value, DateTimeOffset absoluteExpiration, string region = null)
{
    try
    {
        var indexedKeys = (List<string>)(base.Get(IndexKey) ?? new List<string>());
        if (base.Add(key, value, absoluteExpiration))
        {
            string existingKey;
            if (string.IsNullOrEmpty(existingKey = indexedKeys.FirstOrDefault(x=>x == key)))
            {
                indexedKeys.Add(key);
            }
            if (base.GetCount() > ObjectLimit)
            {
                base.Remove(indexedKeys.First());
                indexedKeys.RemoveAt(0);
            }
            base.Add(IndexKey, indexedKeys, new DateTimeOffset(DateTime.Now.AddHours(2))); 
            return true;
        }
        return false;
    }
    catch
    {
//Log something and other fancy stuff
        throw;
    }
}
} 
```

这是未经测试的代码，仅用于说明 MemoryCache 的示例实现。祝你好运！

# jquery - JQueryUI 拖放 - 无法切换“级别”的嵌套列表

> ID：12324713
> 
> 赞同：1
> 
> 时间：2012-09-07T20:08:36.947
> 
> 标签：jquery, jquery-ui, drag-and-drop, nested, jquery-ui-sortable

我正在尝试使用 JQuery UI 来建立一个嵌套的、可排序的列表系统，但我不希望孩子成为父母，反之亦然。我的基本代码来自演示：http: [//jsfiddle.net/HT8QB/1/](http://jsfiddle.net/HT8QB/1/)

边框使它有点难以看清，但是在小提琴中，您可以将子级拖动到父级，然后无法将它们移回。您也不能将孩子从第一个父母移动到第二个父母。

根据文档，我认为我可以使用连接列表功能解决第二个问题，但我不确定如何解决第一个问题（[防止项目从一个级别移动到另一个级别）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T16:11:06.433

好吧，我没有尝试重新发明轮子，而是决定使用 nestedSortable 插件：[http](http://mjsarfatti.com/sandbox/nestedSortable/) ://mjsarfatti.com/sandbox/nestedSortable/ 。看起来它开箱即用地完成了我们需要的一切，因此不再随机摆动。

无论如何谢谢。

# java - 带有集合查询的 JPA 多实体

> ID：12324716
> 
> 赞同：0
> 
> 时间：2012-09-07T20:08:56.503
> 
> 标签：java, hibernate, jpa

我在 SQL 中有以下内容：

```
SELECT * FROM table2 t2, table1 t1 WHERE t1.id=1 AND t2.t1_id IN(1, 2); 
```

我将如何在 JPA 中做到这一点？

我试过：

```
SELECT t2 FROM Table2 t2, Table1 t1 WHERE t1.id = :t1_id AND t2.t1 IN (t1.t1Collection) 
```

使用伪类：

```
Table1
  private int id;
  private Collection<Table1> t1Collection;

Table2
  private int t2;
  private Table1 t1_id; 
```

但我得到：

```
org.hibernate.exception.SQLGrammarException: could not execute query; nested exception is javax.persistence.PersistenceException: org.hibernate.exception.SQLGrammarException: could not execute query 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T20:17:20.503

试试[`elements`](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/queryhql.html#queryhql-expressions)关键字：

```
SELECT t2 FROM Table2 t2, Table1 t1 WHERE t1.id = :t1_id AND t2.t1 IN elements(t1.t1Collection) 
```

# javascript - 从 ajax 成功调用 rerenderEvents 的 JQuery FullCalendar 问题

> ID：12324717
> 
> 赞同：2
> 
> 时间：2012-09-07T20:08:56.627
> 
> 标签：javascript, jquery, ajax, fullcalendar

出于某种原因，我无法在 POST 之后重新渲染日历。到目前为止一切顺利：

```
$('#calendar').fullCalendar({
    ...
    select: function (startDate, endDate) {
        $.ajax({
            url: 'data.php',
            type: "POST",
            data: {
                'start':startDate,
                'end':endDate,
                }
            success: $('#calendar').fullCalendar('rerenderEvents')
            }
     ...
    }); 
```

数据发布成功，我的 php 脚本将新事件添加到数据库中就好了。唯一的问题是日历没有被数据库中的新数据重新渲染。

如果我刷新页面（Firefox 中的 F5），则会呈现新事件。显然，我需要在事件提交到数据库后立即显示该事件。我不能指望我的用户刷新页面。

我对这个成功声明做了很多排列，例如：

```
function () {
    $('#calendar').fullCalendar('rerenderEvents');
} 
```

和（我的 php 返回“成功”），

```
function (data) {
    if (data === 'success') $('#calendar').fullCalendar('renderEvents');
} 
```

但是，无论如何，添加到数据库的新事件只有在我刷新屏幕时才会显示。谁能建议我可能做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-07T23:44:34.340

尝试：

```
$('#calendar').fullCalendar("refetchEvents"); 
```

* * *

Update 2013-01-31.

That works because you are forcing FC to reread the event source and render the calendar again.

However, if that is sometimes a brute force solution, another way to achieve the same (when possible) is to do this, say in `dayClick` when creating a new event:

*   update event-DB using `$.ajax`
*   create the corresponding new event: `yourcal.fullCalendar('renderEvent', {id:x,start:timest,end:timend,title:txt}, true);`

# matlab - 如何在 Matlab 上制作特殊的滑块或 jslider？

> ID：12324719
> 
> 赞同：0
> 
> 时间：2012-09-07T20:09:20.247
> 
> 标签：matlab, slider, jslider

如何在 Matlab 上制作具有最小和最大范围之后的区域的特殊滑块（或 jslider）？请看插图： ![在此处输入图像描述](../Images/17a9146706cd6c416a6ab2c43765e8c5.png) 谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T07:14:10.063

您需要使用自定义paint() 方法的自定义Java 控件。我建议您将您的问题重新发布为 Java Swing 问题（标签 Java、Swing、JSlider）——这应该会给您一些回应。然后像往常一样使用Matlab中的控件。

# c# - LINQ to SQL where 子句验证字符串包含列表元素

> ID：12324720
> 
> 赞同：2
> 
> 时间：2012-09-07T20:09:34.863
> 
> 标签：c#, linq, linq-to-sql, predicates

我正在使用根据 id 返回域的视图。域列可以是“地理”，也可以是填充域“地理、历史”。（无论如何，返回的数据都是一个VARCHAR）

在我的 C# 代码中，我有一个包含主要域的列表：

```
private static List<string> _mainDomains = new List<string>()
{
    "Geography",
    "Mathematics",
    "English"
}; 
```

我想过滤我的[LINQ](http://en.wikipedia.org/wiki/Language_Integrated_Query)查询，以便仅返回与一个或多个主域相关的数据：

```
expression = i => _mainDomains.Any(s => i.Domains.Contains(s));
var results = (from v_lq in context.my_view
                select v_lq).Where(expression) 
```

问题是我不能使用关键字`Any`，也不能使用`Exists`关键字，因为它们在 SQL 中不可用。我见过很多使用`Contains`关键字的解决方案，但它不适合我的问题。

我该怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T20:15:52.830

您可以使用包含：

```
where i.Domains.Any(s => _mainDomains.Contains<string>(s.xxx)) 
```

请注意，通用参数是必需的（即使 Resharper 可能会告诉您它们不是）。他们需要选择`Enumerable.Contains`，而不是`List.Contains`。后者不可翻译（我认为这是 L2S 产品设计中的一个错误）。

（我可能没有得到完全适合您的数据模型的查询。请根据您的需要进行调整）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T20:46:53.303

我想到了。由于我不能使用`Any`关键字，所以我使用了这个函数：

```
 public static bool ContainsAny(this string databaseString, List<string> stringList)
    {
        if (databaseString == null)
        {
            return false;
        }
        foreach (string s in stringList)
        {
            if (databaseString.Contains(s))
            {
                return true;
            }
        }
        return false;
    } 
```

那么我可以在我的`Where`子句中使用这个表达式：

```
expression = i => i.Domains.ContainsAny(_mainDomains); 
```

更新：根据 usr，查询将返回所有值并在服务器端执行 where 子句。更好的解决方案是使用不同的方法（而不是使用填充/逗号分隔的值）

# javascript - 在 javascript 中创建元素 - 只是想知道

> ID：12324721
> 
> 赞同：0
> 
> 时间：2012-09-07T20:09:35.740
> 
> 标签：javascript, dom, element

我正在编写一些代码，然后遇到了这个问题。这是我的代码的一部分，只是创建一个 div，附加它，然后 funcion 可能能够删除它

```
var mainCont=document.createElement('div');
mainCont.innerHTML="<div style='display: block; height: 20px;'></div>";
mainCont.innerHTML=mainCont.innerHTML+"<div style='display: block; height: 40px; width: 100%; text-align: right;'></div>";

document.body.appendChild(mainCont);

var delete=function()
{
    document.body.removeChild(mainCont);
} 
```

当我使用删除功能时出现错误。但是当我这样做时，不会出现错误：

```
someVariable=mainCont; 
var delete=function()
{
    document.body.removeChild(someVariable);
} 
```

为什么第一个代码不起作用？为什么第二个呢？我想更多地了解这个问题，但很难在谷歌中找到更多“复杂”的东西。提前感谢任何来源和答案

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T20:59:26.510

看起来您可能在与删除函数不同的范围内定义 var mainCont。

```
someVariable=mainCont; 
```

在没有 var 的情况下调用上述代码会将 someVariable 放入全局范围，从而使删除函数可以访问该变量。如果这不是问题，请尝试为我们制作一个 jsFiddle，以便我们对其进行调试。

# ios - 使 GoogleDrive 文件与本地文件保持同步

> ID：12324724
> 
> 赞同：0
> 
> 时间：2012-09-07T20:10:03.740
> 
> 标签：ios, google-drive-api

我正在使用 SDK 将 Google Drive 集成到 iOS 应用程序中（效果很好，谢谢），我希望 Google Drive 上的一组文件与设备上的文件保持同步。我的意思是：当用户在他们的设备上重命名或移动文件时，我希望它在服务器上重命名/移动。如果用户重命名文件夹，我想在服务器上重命名该文件夹。

对于使用路径来识别文件的其他云服务，我可以在需要时生成路径以重命名或移动服务器上的文件。使用 Google Drive，情况并非如此——我需要一个文件 ID 来重命名或移动某些东西。有没有一种方便的方法可以从路径中获取文件 ID？我是否必须将来自 Google Drive 的信息存储在我的应用程序中？对于这种情况，是否有推荐的最佳实践？谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T07:15:01.873

据我所知，最初将文件插入 Google Drive 时，您可以保留文件 ID 列表。当您将文件插入 Google Drive 时，它​​会返回一个包含插入文件 ID 的文件资源，除非您删除它，否则它不会更改。

# hash - 散列函数是增量的意味着什么？

> ID：12324725
> 
> 赞同：14
> 
> 时间：2012-09-07T20:10:11.417
> 
> 标签：hash, hashtable

例如，我听说 MurmurHash2 不是“增量的”，但 MurmurHash3 是增量的。这是什么意思？为什么它有用？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-07T20:15:03.513

> 增量散列函数适用于如果先前散列的消息 M 稍微更新为新消息 M* 的情况，那么计算更新消息 M* 的散列值应该相当快。这是通过从旧散列值 m 计算新散列 m* 来完成的，而传统散列函数必须从头开始重新计算新散列 m*，这需要更长的时间。

[http://www.cs.berkeley.edu/~daw/papers/inchash-cs06.pdf](http://www.cs.berkeley.edu/~daw/papers/inchash-cs06.pdf)

它们之所以有用，是因为它们更容易计算，因此在计算能力和时间方面成本更低。

然而，它们并不适合所有情况。伯克利的那篇论文有一些很好的例子，说明它们何时可以在引言部分有用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-03-31T22:51:01.803

我不是这方面的专家，但我认为 MurmurHash3 在 tommarshall 所描述的意义上并不是增量的。

当人们将其描述为增量时，他们可能意味着您可以在 O(1) 内存中计算流的哈希值，即您可以拥有一个 API 让您执行以下操作（在伪代码中）：

```
x = Hasher()
x.add("hello ")
x.add("world!")
x.get_hash() 
```

这将产生字符串“hello world”的散列，而不会在任何时间点将整个字符串保存在内存中。

特别是，[imurmurhash-js](https://github.com/jensyt/imurmurhash-js) javascript 包似乎在这个含义中使用了“增量”这个词。

[MetroHash](https://github.com/jandrewrogers/MetroHash)文档中似乎使用了相同的含义。

# asp.net - 在 VB.NET 中向动态创建的 GridView 控件添加事件

> ID：12324726
> 
> 赞同：1
> 
> 时间：2012-09-07T20:10:12.353
> 
> 标签：asp.net, vb.net-2010

我想要的是将事件添加到我在 VB.NET 中动态创建的 GridView 控件。这是我的代码。

```
Dim dgData as New GridView()
dgData.RowDataBound += New GridViewRowEvendHandler(dgData_RowDataBound) 
```

每次我纠正上面的代码时，我都会在 dgData.RowDataBound 下得到蓝色的波浪线，原因如下：

`"Public Event RowDataBound(etc...)`是一个事件，不能直接调用。使用`'RaiseEvent'`语句引发事件”

如何摆脱蓝色的波浪线，以便将新的事件处理程序添加到此 RowDataBound？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T20:22:20.447

Could this be what your looking for? [https://stackoverflow.com/a/687293/614263](https://stackoverflow.com/a/687293/614263)

You need to review Events in VB. It looks like your trying to use C# syntax there.

# websocket - 用于低级数据通信的 WebRTC 和 WebSockets 有什么区别

> ID：12324730
> 
> 赞同：47
> 
> 时间：2012-09-07T20:10:25.870
> 
> 标签：websocket, webrtc

我试图了解 WebRTC 和 WebSockets 之间的区别，以便我可以更好地了解哪种情况需要什么。我对两方（主要基于 Web，但可能是专用服务器应用程序）相互交谈的广泛概念感到好奇。

假设：

*   显然，在 ad-hoc 网络方面，WebRTC 获胜，因为它本身支持 ICE 协议/方法。

问题：

*   关于浏览器中两个已知方之间的直接通信，如果我不依赖于发送多媒体数据，而我只对发送整数数据感兴趣，那么除了数据加密之外，WebRTC 是否比 webSockets 有任何优势？
*   关于与基于浏览器的客户端通信的专用服务器，哪个平台给了我优势？我需要编写一个 WebRTC 服务器（这可能在浏览器之外吗？），或者我需要编写一个 WebSocket 服务器（一个快速的谷歌搜索让我认为这是可能的）。

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2013-09-27T10:22:52.840

有一个显着的区别：WebSockets 通过 TCP 工作，WebRTC 通过 UDP 工作。实际上，WebRTC 是 SRTP 协议，具有一些附加功能，例如 STUN、ICE、DTLS 等，以及内部 VoIP 功能，例如 Adaptive Jitter Buffer、AEC、AGC 等。

因此，WebSockets 是为可靠通信而设计的。如果您想发送任何必须可靠发送的数据，这是一个不错的选择。

使用 WebRTC 时，传输的流是不可靠的。一些数据包可能会在网络中丢失。如果您发送关键数据（例如用于财务处理）则很糟糕，同样的问题非常适合您发送音频或视频流时，其中一些帧可能会丢失而没有任何明显的质量问题。

如果你想通过WebRTC发送数据通道，你应该有一些前向纠错算法来在网络中丢失数据帧时恢复数据。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-09-09T17:44:49.427

WebRTC 指定 RTP 上的媒体传输 .. 在某些情况下可以工作 P2P。在任何情况下，要建立 webRTC 会话，您还需要一个信令协议 .. 并且 WebSocket 是一个可能的选择。换句话说：除非您想流式传输实时媒体，否则 WebSocket 可能更合适。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-01-08T00:34:05.650

**问题1：** 是的。WebRTC 的 DataChannel 部分在这种情况下为您提供了优势，因为它允许您在浏览器之间创建一个对等通道来发送和接收您想要的任何原始数据。Websockets 强制您使用服务器来连接双方。

**问题 2** 就像我在之前的回复中所说，如果您想要服务器-客户端通信，Websockets 会更好，并且有很多实现可以做到这一点（即[jWebSocket](http://jwebsocket.org/)）。要在服务器中添加支持以建立与 WebRTC 数据通道的连接，您可能需要几天的生命和健康。:)

# javascript - 在 js 中访问元素但在 css 中定义时未定义不透明度和样式

> ID：12324733
> 
> 赞同：4
> 
> 时间：2012-09-07T20:10:37.313
> 
> 标签：javascript, html, css

有了这个小提琴[http://jsfiddle.net/mungbeans/f2ne6/2/](http://jsfiddle.net/mungbeans/f2ne6/2/)

为什么在css中定义时在js中访问时不透明度未定义？

我认为答案是因为样式也未定义，为什么会这样，样式是否需要在定义不透明度之前显式添加？

编辑缺少 [] 是我从源代码复制到小提琴时创建的错字。样式/不透明度问题仍然存在于原始代码中，这在这方面是正确的。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-07T20:18:02.890

`title.style.opacity`

应该：

`title[0].style.opacity`

因为 getElementsByTagName 返回一个节点列表。

编辑：

这仍然没有得到价值。您需要执行以下操作：

`window.getComputedStyle(title[0]).opacity`

[https://developer.mozilla.org/en-US/docs/DOM/window.getComputedStyle?redirectlocale=en-US&redirectslug=DOM%3Awindow.getComputedStyle](https://developer.mozilla.org/en-US/docs/DOM/window.getComputedStyle?redirectlocale=en-US&redirectslug=DOM%3Awindow.getComputedStyle)

演示：http: [//jsfiddle.net/f2ne6/12/](http://jsfiddle.net/f2ne6/12/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-07T20:26:39.647

有两个原因：

1.  [`getElementsByTagName()`](https://developer.mozilla.org/pt-PT/docs/DOM/element.getElementsByTagName)返回元素列表，而不是单个元素`getElementById()`。因此，您需要对结果进行下标`NodeList`以获得所需的 DOM 元素；
2.  最重要的是，当您通过`style`元素的属性访问样式时，您只会获得***内联***样式，***而不是*****您通过CSS 类**指定的样式。

要获取*计算*的样式，您可以使用**[`window.getComputedStyle()`](https://developer.mozilla.org/en-US/docs/DOM/window.getComputedStyle)**，它将为您提供元素*所有*CSS 属性的最终使用值：

```
alert(window.getComputedStyle(title).opacity); 
```

**[演示](http://jsfiddle.net/upB7y/)**。

不幸的是，在 IE < 9`getComputedStyle`中不可[用](http://caniuse.com/getcomputedstyle)，但您可以轻松找到一个 polyfill，例如[这个](http://snipplr.com/view/13523/)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-07T20:27:19.863

这是因为 HTML 元素（在 DOM 中）的 style 属性不包含计算的样式，它包含元素的立即定义的样式。考虑以下 HTML：

```
<div id="one" style="width: 50px;"></div> 
```

如果你打电话`document.getElementById("one").style.width`，你会`"50px"`回来的。但是，如果您删除该`style`属性并改用 CSS 将 div 设置为宽度为 50 像素，它将返回`""`. 你可以在这里看到这个：

[http://jsfiddle.net/aAbJY/](http://jsfiddle.net/aAbJY/)

您可能正在寻找计算样式，可以在大多数浏览器中使用`getComputedStyle()`. 在 IE9 之前它在 IE 中不起作用，尽管在 IE<9 中可能有办法做到这一点。无论在何处定义，计算的样式都将返回不透明度。请参阅此处的更新示例`getComputedStyle()`：

[http://jsfiddle.net/aAbJY/1/](http://jsfiddle.net/aAbJY/1/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-07T20:26:42.463

Chase 是正确的，但是您的代码中还有另一个问题。该`style`属性仅包含使用`style`元素属性设置的样式，因此 Chase 的解决方案只能解决您的问题的一半。您要做的是使用该`getComputedStyle()`函数来获取元素的运行时样式：

```
 function test(id) {
     var listElement = document.getElementById(id);
     var titles = listElement.getElementsByTagName("div");
     var style = getComputedStyle(titles[0]);
     alert( "Opacity: " + style.opacity );
 } 
```

在这里查看我更新的 jsfiddle：http: [//jsfiddle.net/7vQ4A/1/](http://jsfiddle.net/7vQ4A/1/)

# html - 更改 AOL 邮件的 HTML 电子邮件中的字体颜色

> ID：12324734
> 
> 赞同：3
> 
> 时间：2012-09-07T20:10:39.317
> 
> 标签：html, css, html-email, aol

编辑：我应该提到布局是用表格完成的。我什至尝试为父`<td>`元素设置样式以获得所需的外观。不过，没有香蕉。

如何在 AOL 的客户端中更改 HTML 电子邮件中文本的字体颜色？

我试过以下代码：

```
<td>
<span style="color:#FFFFFF;">My Text</span>
</td> 
```

在社区提出一些建议后，我也尝试了以下方法：

```
<td>
<font color="white">My Text</font>
</td> 
```

不幸的是，文本颜色根本没有改变。事实上，在 Firebug 中查看计算的样式时，它不会显示*任何*颜色应用于元素。

我希望这会起作用，因为所有其他内联样式都可以正常工作，并且电子邮件在其他所有主要客户中都可以很好地呈现。

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T20:15:36.200

尝试使用`<font>`标签。此[网站](http://www.enewsletterpro.com/support/aol.asp)未`<span>`列为受支持的标签。

```
<font color='#FFFFFF'>My Text</font> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T20:18:58.907

`font`tag 是一种选择，但如果可能在您的布局中，您可能希望将文本分解为 a`td` 并调用类似`<td style="color:#FFFFFF;">My Text</td>`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-11-12T03:39:56.560

AOL 提供了一个格式图标。单击它并使用格式横幅上的吸管为文本选择颜色。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-14T14:04:39.103

尝试`<td><span style="color:#990011;">Text</span></td>`（例如，使用一些红色来突出）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-10-19T07:51:31.007

`<a style="text-decoration: none;" href="{$shareWithFriendsLink}"> <span style="text-decoration: none; color: #ffffff;"> htt<span></span>{$shareWithFriendsLink|substr:3} </span></a>`

空`<span></span>`防止邮件客户端将字符串识别为链接。|substr:3 用于 Smartys 变量，用于截断之前手动添加的前 3 个符号 (htt)。

# c# - 在 context.Request 中解码查询字符串

> ID：12324735
> 
> 赞同：5
> 
> 时间：2012-09-07T20:10:46.417
> 
> 标签：c#, asp.net, .net, windows-server-2008

我有一个 ashx 文件，它需要一些查询字符串值来提供适当的图像。

问题是一些搜索引擎 urlencode 然后 htmlencode 在他们的缓存中或当他们索引这些 url 时。

所以例如而不是得到

```
/preview.ashx?file=abcd.jpg&root=small 
```

我明白了

```
/preview.ashx?file=abcd.jpg&amp;root=small 
```

这基本上会抛出，`context.Request.QueryString["root"]`所以它认为没有变量**根**

我猜查询字符串中的第二个键是**amp;root** 即 & 符号之后的部分。

我想知道是否有一种方法可以在服务器端自动对查询字符串进行 html 和 urldecode，这样程序就不会混淆。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-07T20:17:31.337

`HttpUtility.HtmlDecode`打电话或`HttpUtility.UrlDecode`不止一次打电话没有害处。

```
string queryString = "/preview.ashx?file=abcd.jpg&amp;root=small";
var parsedString = HttpUtility.HtmlDecode(queryString);
var root = HttpUtility.ParseQueryString(parsedString)["root"]; 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-09-07T20:13:51.120

要进行 URL 编码和解码，您可以使用以下方法：

```
string encoded = System.Web.HttpUtility.UrlEncode(url);

string decoded = System.Web.HttpUtility.UrlDecode(url); 
```

过去我见过查询字符串被双重编码的实例。在这种情况下，您需要双重解码 - 这可能是您的问题......

# android - Eclipse 看不到我的触摸板 CM9 设备

> ID：12324744
> 
> 赞同：0
> 
> 时间：2012-09-07T20:11:08.483
> 
> 标签：android, eclipse, debugging, usb

我已打开 MTP 设置并更新指向 android_winusb.inf 目录的驱动程序软件，但我的 eclipse 仍然无法看到该设备。需要一些帮助！谢谢。

我在 android_winusb.inf 中添加的代码

```
; HP TouchPad
%SingleAdbInterface%        = USB_Install, USB\VID_0BB4&PID_6860&REV_0227&MI_01
%CompositeAdbInterface%     = USB_Install, USB\VID_0BB4&PID_6860&MI_01 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T20:34:50.007

1.  在您的设备上转到设置 > 开发人员选项 > 启用 USB 调试（不知道你是否已经这样做了）
2.  设置 > 存储 > USB 计算机连接 > 更改为相机 (PTP)
3.  打开 Eclipse，Window > Preferences > Android > DDMS > CHange ADB connection time to 90000+
4.  在同一页面上，将复选框放入 Use ADBHHOST
5.  再次在同一页面上，将基本本地调试器端口更改为 8601。
6.  打开 CMD 然后输入`adb kill-server`adb`start-server`
7.  拔掉你的设备，重启电脑，打开eclipse并插入设备。
8.  尝试将其添加到 android_winusb.inf 文件中，就像在重新启动 adb 之前所做的那样。

    ;惠普触摸板 CM9

    %SingleAdbInterface% = USB_Install, USB\VID_0BB4&PID_6860

    %CompositeAdbInterface% = USB_Install, USB\VID_0BB4&PID_6860&MI_01

如果这不起作用，我可能会搜索 RootzWiki，这是一个可能会提供更多帮助的 android 特定网站。

# ios - Flex 移动复制到剪贴板不适用于 iOS，但适用于模拟器

> ID：12324745
> 
> 赞同：2
> 
> 时间：2012-09-07T20:11:19.957
> 
> 标签：ios, apache-flex, clipboard, flex-mobile

我在 ipad 的 Flex 4.6 移动项目中使用此代码。它可以在模拟器中运行，但在 ipad 设备上，什么都没有设置。有什么建议么？您可以将文本复制到 iO 上的剪贴板吗？

System.setClipboard('一些文字');

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T23:56:03.170

如果您为 TextInput 使用 StageTextInputSkin 皮肤，您将获得本机复制和粘贴行为，如果您需要类似标签的东西，您可以使用相同的文本输入，仅需要扩展 StageTextInputSkin 类以删除边框并更改文本输入不可编辑，希望有所帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T13:30:37.030

您应该使用 flash.desktop.Clipboard。例如[flexspaces AirClipboardUICommand 类](http://code.google.com/p/flexspaces/source/browse/trunk/flexspacesair-lib/src/org/integratedsemantics/flexspacesair/control/command/AirClipboardUICommand.as?spec=svn218&r=216)

# jquery-ui - 如何创建/处理更新模型的 jQuery UI 对话框

> ID：12324746
> 
> 赞同：0
> 
> 时间：2012-09-07T20:11:31.690
> 
> 标签：jquery-ui, asp.net-mvc-4, jquery-ui-dialog

当我的 MVC 4 视图上发生某种情况时，我需要提出一个问题。

当这种情况属实时，我只想以模态方式弹出一个 jQuery UI 对话框。该对话框将只有两个用于“WidgetType”（紫色或蓝色）的单选按钮。

viewModel 具有 SelectedWidgetType 的属性（具有默认值）。

我只是在寻找使用用户在对话框中选择的选项来处理更新底层模型的最佳方法。

提前感谢您的任何回复。

注意：我使用这个过于简单的示例作为其他对话框的基础，这些对话框将包含更多字段，这些字段也会更新基础模型。

创建对话框并不是困难的部分，但我正在努力获取这些值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T20:53:25.287

用户 jQuery 的 AJAX 发布方法。

在前端创建一个视图模型 JavaScript 对象，该对象映射到数据模型的参数。每次用户通过每个表单元素的更改事件句柄调用更新方法来更改他选择的选项时，都可以触发此视图模型对象进行更新。

通过使用 json2.js 将其打包到 JSON 对象中，将其传递回服务器控制器

如果您想要一个完整的框架/优雅的解决方案，请考虑使用为您模拟大部分内容的 knockout.js...！

# algorithm - 不一致数据集的记录匹配算法

> ID：12324747
> 
> 赞同：6
> 
> 时间：2012-09-07T20:11:36.247
> 
> 标签：algorithm, pattern-matching, string-matching

我正在使用大量的产品数据集（约 100 万）。这些产品来自许多不同的来源，因此它们列出数据的方式不一致。最大的问题之一是差异产品品牌名称（约 17,000 个独特品牌）。有些品牌有多达 10 个差异需要关联在一起。

**问题：**

* * *

1.  **间距不一致**：Jet Boil VS Jetboil
2.  **标点符号：**格兰杰VS格兰杰
3.  **噪音词：** The North Face VS North Face
4.  **分类法：** Armada VS Armada Skis
5.  **符号：** Phil and Teds VS Phil&Teds
6.  **拼写错误：**巴塔哥尼亚 VS 巴塔哥尼亚
7.  **其他怪事：**贝尔体育 VS 贝尔体育 #81037

**示例数据集**

* * *

```
Black Diamond
Black Diamond (Uda)
Black Diamond Co
Black Diamond Eq Ltd
Black Diamond Eqp #76800
Black Diamond Equipment
Black Dog Machine Llc
Black Dome Press
Black Dot
Black Dragon
Black Fire
Black Flys
Black Forest Girl
Black Gold
Black Hawk Inc.
Black Hills
Black Knight
Black Label
Black Magic
Black Marine
Black Market Bikes
Black Max
Black Opal
Black Ops
Black Rain Ordance Inc.
Black Rain Ordnance
Black Rapid
Black Ribbon
Black Rifle Disease Engineerin
Black River Bucks
Black Seal
Black Seed
Black Swan
Black Tower
Black Widow
Black's 
```

* * *

**后果（如评论中所建议）**

*   不正确的关联会导致在产品搜索中显示不相关的品牌，从而削弱表示层的可用性
*   缺少关联会导致同一品牌在过滤列表中显示多个，从而削弱表示层的可用性

我意识到这是一个很大的问题，可能超出了堆栈溢出文章可以解决的范围，但我正在寻找有关如何解决此问题的灵感。

欢迎任何可能有帮助的算法、软件模式或过程。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T20:25:38.430

好吧，我解决这个问题的方法是使用一些距离度量来量化短语之间的相似性，然后根据它们的距离对术语进行聚类。

你可以从一个经典的文本度量开始，比如 Levenshtein 距离（你会很容易找到许多实现），它基本上是编辑距离，或者你需要从一个字符串到另一个字符串的操作数，其中一个操作可以是一个替换，插入或删除。

从你给出的例子来看，Levenshtein 似乎是合理的。

对于聚类，有大量的算法，这很容易谷歌搜索并找到大量的实现。聚类基本上是找到在一定距离度量下彼此接近的对象组（集群）。在您的情况下，这些将是彼此相似的术语组。

看到结果后，您可以尝试通过使用您对数据的了解进行手动调整来稍微调整距离度量（例如指定“&”接近“and”等）。

祝你好运！

# sql - 嵌套查询可能

> ID：12324750
> 
> 赞同：0
> 
> 时间：2012-09-07T20:11:57.133
> 
> 标签：sql, postgresql

我有以下东西，就像一个魅力。

```
SELECT d.decisionName, c.firstname, c.lastname, o.name AS organization_name, s.parent_session_id
    FROM tblDecisions d
        INNER JOIN tblSessions s ON s.decision_id = d.decisionid
        INNER JOIN tblCounselors c ON s.counselor_ck = c.campusid
        INNER JOIN tblCounselor_to_organization co ON co.counselor_id = c.counselorid
        INNER JOIN tblOrganizations o ON o.organizationid = co.organization_id
    AND s.start_time >= '2011-01-01 00:00:00'
    AND s.is_complete = TRUE
    ORDER BY s.start_time, s.last_name, s.first_name 
```

该字段`parent_session_id`（整数）可以存储先前记录的主ID，否则默认为0。如果可能的话，我想做的是使用嵌套或子查询进行以下操作：

1.  检索上述所有内容，但如果它的主 ID 正在被 parent_session_id 字段中的另一个人使用，则删除任何记录。

2.  如果多条记录在 parent_session_id 字段中引用同一条记录（`> 0`），则仅通过时间戳（`s.start_time DESC LIMIT 1`）获取最新的一条

我有一种感觉，如果不使查询变得异常复杂，这是不可能的，但是我的查询技能并没有比我上面所掌握的更深入。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T20:28:59.240

> 1.) 检索上述所有内容，但如果它的主 ID 正在被 parent_session_id 字段中的另一个人使用，则删除任何记录。

假设您的主 ID 是`tblSessions.session_id`：

```
SELECT d.decisionName, c.firstname, c.lastname, o.name AS organization_name
                                              , s.parent_session_id
FROM   tblDecisions                 d
JOIN   tblSessions                  s ON s.decision_id = d.decisionid
JOIN   tblCounselors                c ON c.campusid = s.counselor_ck
JOIN   tblCounselor_to_organization co ON co.counselor_id = c.counselorid
JOIN   tblOrganizations             o ON o.organizationid = co.organization_id
AND    s.start_time >= '2011-01-01 00:00:00'
AND    s.is_complete
**AND    NOT EXISTS (
    SELECT 1
    FROM   tblSessions s1
    WHERE  s1.parent_session_id = s.session_id
    )**
ORDER  BY s.start_time, s.last_name, s.first_name;
```

您的第二个问题与第一个问题*相矛盾*。所以，我将把它留在那里：

> 2.) 如果多条记录在 parent_session_id 字段中引用同一条记录 (> 0)，则只获取最新的一条时间戳 ( `s.start_time DESC > LIMIT 1`)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T06:22:24.633

我认为第二个问题与第一个问题并不矛盾。首先是说，本质上，如果此会话是任何其他会话的父级，则不要将其包含在结果中。第二个问题是说，如果多个会话具有相同的父级，则仅包括最新的子级。

这是我包含两个子问题的解决方案：

```
SELECT d.decisionName, c.firstname, c.lastname, o.name AS organization_name,  s.parent_session_id
, s.start_time, (SELECT max(start_time)
                      FROM tblSessions s2
                      WHERE s2.parent_session_id = s.parent_session_id)
FROM tblDecisions d
    INNER JOIN tblSessions s ON s.decision_id = d.decisionid
    INNER JOIN tblCounselors c ON s.counselor_ck = c.campusid
    INNER JOIN tblCounselor_to_organization co ON co.counselor_id = c.counselorid
    INNER JOIN tblOrganizations o ON o.organizationid = co.organization_id
AND s.start_time >= '2011-01-01 00:00:00'
AND s.is_complete = 1
AND NOT EXISTS (
  SELECT 1
  FROM   tblSessions s1
  WHERE  s1.parent_session_id = s.sessionid
  )
AND (
     (s.parent_session_id IS NULL)
  OR (s.start_time = (SELECT max(start_time)
                      FROM tblSessions s2
                      WHERE s2.parent_session_id = s.parent_session_id))) 

ORDER BY s.start_time, s.last_name, s.first_name 
```

### [这是一个演示它的 SQLFiddle。](http://sqlfiddle.com/#!3/68247/12)

请注意，我使用的是 SQL Server，而不是 MySQL。但我相信解决方案很容易转换；我认为只有**is_complete = 1**需要更改为**is_complete = true**。

# android - 纹理仅在某些设备上显示

> ID：12324752
> 
> 赞同：5
> 
> 时间：2012-09-07T20:12:03.153
> 
> 标签：android, opengl-es, textures

我目前正在编写一个适用于 OpenGL ES 1.1 的 Android 应用程序。它在我开发它的 HTC Desire (Android 2.3.7) 上运行良好。现在我想在 Nexus 7 上测试它，但它只显示黑屏。我发现所有纹理都被简单地渲染为黑色。在没有渲染对象和纹理的部分上，我得到（几乎）黑色背景颜色。

所以我的问题是为什么纹理在某些设备上渲染得很好，而在其他设备上却不行？

纹理都是二次方的，大小为 2（即 512x512、1024x1024）。这些是创建纹理时使用的设置：

```
gl.glBindTexture(GL10.GL_TEXTURE_2D, getTextureId());   

// Create Nearest Filtered Texture
gl.glTexParameterf(GL10.GL_TEXTURE_2D, GL10.GL_TEXTURE_MIN_FILTER,
        GL10.GL_LINEAR);
gl.glTexParameterf(GL10.GL_TEXTURE_2D, GL10.GL_TEXTURE_MAG_FILTER,
        GL10.GL_LINEAR);

// Different possible texture parameters, e.g. GL10.GL_CLAMP_TO_EDGE
gl.glTexParameterf(GL10.GL_TEXTURE_2D, GL10.GL_TEXTURE_WRAP_S,
        GL10.GL_CLAMP_TO_EDGE);
gl.glTexParameterf(GL10.GL_TEXTURE_2D, GL10.GL_TEXTURE_WRAP_T,
        GL10.GL_REPEAT);

gl.glTexEnvf(GL10.GL_TEXTURE_ENV, GL10.GL_TEXTURE_ENV_MODE, /*GL10.GL_REPLACE*/ GL10.GL_MODULATE);

// Use the Android GLUtils to specify a two-dimensional texture image
// from our bitmap
GLUtils.texImage2D(GL10.GL_TEXTURE_2D, 0, bitmap, 0); 
```

我可以尝试在两个设备上渲染纹理吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-07T20:33:38.893

如果您从可绘制对象中获取位图，请确保它们都在 drawable-nodpi 文件夹中。

`drawable`否则，在不同的 android 密度（文件夹中的 1024x1024 图像在 HDPI 设备上变为 1536x1536）后，您的两个图像的幂可能不是两个图像的幂。

# java - 课堂最佳实践

> ID：12324753
> 
> 赞同：21
> 
> 时间：2012-09-07T20:12:03.850
> 
> 标签：java

如果我有一个带有重载构造函数的客户类（默认和一个带有参数），那么在 Overloaded 构造函数中设置类成员的正确方法是什么？使用“this”引用还是使用 setter 方法？

只是不确定正确的方法是什么。

```
public class Customer {

private String firstName;
private String lastName;
private int age;

public Customer() {}

//This Way
public Customer(String firstName, String lastName, int age)
{
    this.firstName = firstName;
    this.lastName = lastName;
    this.age = age;
}

// Or this way?
  public Customer(String firstName, String lastName, int age)
{
    setFirstName(firstName); 
    setLastName(lastName);
    setAge(age);
}

/**
 * @return the firstName
 */
public String getFirstName() {
    return firstName;
}

/**
 * @param firstName the firstName to set
 */
public void setFirstName(String firstName) {
    this.firstName = firstName;
}

/**
 * @return the lastName
 */
public String getLastName() {
    return lastName;
}

/**
 * @param lastName the lastName to set
 */
public void setLastName(String lastName) {
    this.lastName = lastName;
}

/**
 * @return the age
 */
public int getAge() {
    return age;
}

/**
 * @param age the age to set
 */
public void setAge(int age) {
    this.age = age;
} 
```

}

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-09-07T20:16:36.593

第一个（使用`this.`）可能更安全、更直接。考虑未来的子类是否会覆盖 setter 方法——这可能会导致非常意外的行为。

如果您的课程是最终课程，那么这无关紧要，而且是洗礼。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-07T20:25:57.907

它不是关于哪个是更好的方法，而是你想从中得到什么......

**-**如果你想让你的班级成为`mutable`，那就去吧`setters`。

**-**如果您希望您的班级成为，`Immutable`那么我认为使用`this`, 是一个更好的选择。

我认为使用`this`, 很适合您从网络服务器或某些来源接收一些数据，然后以自定义类的实例形式将它们存储到集合中.....

**例如：**

*   创建班级学生，

*   当您向某些 Web 服务发出请求时，您会得到响应，**例如：** `JSON` ...

*   解析它，然后创建一个学生实例并将其存储在一个集合中。

    **例如：**

    `ArrayList<Student> arList = new ArrayList<Student>();`

    `arList.add(new Student(name,rollNos,class,marks));`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-07T20:18:34.887

最好的答案是“取决于”。通常，您不需要使用 setter，除非 setter 在设置值之前执行更像计算的操作。但是，如果您的设置器仅直接设置值，那么`this`可能最适合您。相反，setter 用于验证和其他东西，如果你使用`this`，你会错过它们。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-07T21:16:35.107

如前所述，在构造函数中调用可覆盖的方法是非常危险的。但是，如果您需要在 setter 中执行某种验证，您仍然有一些明智的方法来实现它。

1.  制作二传手**最终**。最快的解决方案。这已经说明了，但它不是唯一的选择。
2.  利用**setter 的私有副本**。
3.  使用**工厂方法**而不是构造函数。我通常坚持这个。因为如果验证失败并且它比（2）更好地传达意图，这样您就有更多的自由来处理这种情况

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-07T20:16:00.163

基本上，除了验证之外没有任何区别。

一方面，如果您的 setter 仅基于新值验证新值（它们不依赖于对象状态），则调用 setter 可避免重复验证逻辑。

另一方面，如果一个 setter 的验证检查了其他属性，那么您必须确保在调用该 setter 之前已经设置了所需的属性，或者直接分配属性。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-07T20:17:39.303

直接访问方式更快（如果记忆正确，则速度快 7 倍），但第二种方式“更安全”，以防有一些特殊规则来分配这些值或分配链（您从另一个设置器中分配第二个字段）在访问器中实现的地方，除非您当然想在从构造函数完成分配时明确绕过这些规则/链接。

简而言之，这取决于您的需求，但这些是我能想到的主要问题。

# url - Arduino以太网客户端仅使用IP地址不工作

> ID：12324754
> 
> 赞同：2
> 
> 时间：2012-09-07T20:12:12.930
> 
> 标签：url, arduino, ethernet

我正在尝试使用 Arduino Ethernet [shield](http://www.arduino.cc/en/Main/ArduinoShields)与我的托管服务器通信。

现在问题是这样的：

使用网络浏览器，我可以看到调用 URL 工作正常，但调用 IP 地址却不行。我假设托管服务提供商使用相同的 IP 地址托管多个不同的 URL。

如何从 Arduino 库中进行依赖于 URL 的调用？标准的 Arduino 库只需要我主机的 IP 地址，而不需要 URL。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T01:07:00.103

您需要确保 http GET/POST 请求具有正确的`Host`字段。[这是来自http://www.w3.org/Protocols/rfc2616/rfc2616-sec5.html](http://www.w3.org/Protocols/rfc2616/rfc2616-sec5.html)的示例获取请求

这个网站上有很多很好的技术信息。

## 示例 HTTP 获取请求：

```
 GET /pub/WWW/TheProject.html HTTP/1.1
 Host: www.w3.org 
```

这可能需要对您的代码进行一些自定义，但应该可以解决问题！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T23:11:04.847

其他选项：

*   [https://github.com/interactive-matter/HTTPClient](https://github.com/interactive-matter/HTTPClient)或
*   [https://github.com/amcewen/HttpClient](https://github.com/amcewen/HttpClient)

# scala - 将代码更改为 Scala 文件后“重新启动”Akka 的最佳方法是什么？

> ID：12324756
> 
> 赞同：2
> 
> 时间：2012-09-07T20:12:34.047
> 
> 标签：scala, akka, spray

我正在学习 Scala 和 Spray 来提供 API，每次我对 Scala 代码进行更改时，我都必须重新启动 Akka 服务器（目前刚刚爆发然后做一个`container:start`. 我做错了吗？

来自脚本语言，我习惯于看到我的更改立即反映出来——但由于这是编译的，我想这是生活中的事实？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-07T23:58:59.737

很长一段时间没有这样的方法，但现在我们有了[JRebel](http://en.wikipedia.org/wiki/JRebel)，我认为这就是你要找的。SBT已经有插件（[revolver](https://github.com/spray/sbt-revolver)和辅助[jrebel-plugin](https://github.com/Gekkio/sbt-jrebel-plugin)），但一般来说，JRebel 与工具无关。scala 开发人员可以免费获得许可证。

# wpf - Caliburn.Micro Action 不起作用

> ID：12324761
> 
> 赞同：3
> 
> 时间：2012-09-07T20:13:12.553
> 
> 标签：wpf, slider, caliburn.micro

我有一个带有 Caliburn.Micro 的 WPF 应用程序。

我想处理滑块的移动，即 MouseUp 事件。

```
<Slider cal:Message.Attach="[Event MouseUp] = [Action OnSliderMouseUp($this)]"  
        Value="{Binding  PlayerPosition, Mode=OneWay}" MinWidth="200" 
        VerticalAlignment="Center" Minimum="0" 
        Maximum="{Binding Player.NaturalDuration.TimeSpan.TotalMilliseconds}"/> 
```

在视图模型中：

```
public void OnSliderMouseUp(Slider slider)
{
    int blah = 9;
} 
```

`OnSliderMouseUp()`永远不会被调用。你能告诉我我错过了什么吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-10T13:05:15.450

其实你有两个问题：

1.  `Slider`控件不会触发事件`MouseUp`。如果您对用户停止拖动滑块时触发的事件感兴趣，您正在寻找[Thumb.DragCompleted](http://msdn.microsoft.com/en-us/library/system.windows.controls.primitives.thumb.dragcompleted.aspx)。您可以在此处找到更多信息：[WPF：带有在用户拖动后触发的事件的滑块](https://stackoverflow.com/questions/723502/wpf-slider-with-an-event-that-triggers-after-a-user-drags)

2.  但是如果你写

    ```
    <Slider cal:Message.Attach="[Event Thumb.DragCompleted] = [Action OnSliderMouseUp($this)]"  /> 
    ```

    它仍然无法正常工作。因为 Caliburn.Micro（准确地说`System.Windows.Interactiviy.EventTrigger`是 Calibrun.Micro 使用的）不支持附加事件。有关更多信息和解决方法，请参阅：[使用带有 caliburn micro Message.Attach 的附加事件](https://stackoverflow.com/questions/8402339/using-attached-events-with-caliburn-micro-message-attach)

所以一个工作灵魂（通过`RoutedEventTrigger`上述问题的实现）：

```
<Slider Value="{Binding  PlayerPosition, Mode=OneWay}" MinWidth="200" ...>
    <i:Interaction.Triggers>                
        <local:RoutedEventTrigger RoutedEvent="Thumb.DragCompleted">
            <cal:ActionMessage MethodName="OnSliderMouseUp">
                <cal:Parameter Value="$source" />
            </cal:ActionMessage>
        </local:RoutedEventTrigger>
    </i:Interaction.Triggers>
</Slider> 
```

请注意，因为`Thumb.DragCompleted`附加事件`$this`不起作用，您需要改用**$source**。

# ios - 当用户平移地图时，iOS 6 中的地图注释不会保持旋转

> ID：12324765
> 
> 赞同：6
> 
> 时间：2012-09-07T20:13:29.010
> 
> 标签：ios, iphone

真的很想回答这个问题[https://devforums.apple.com/message/723468](https://devforums.apple.com/message/723468)。我无法发布详细信息，因为它是关于 iOS 6 的，并且是 Apple 的机密信息。

请将答案/评论发布到 Apple Dev 论坛帖子，并在此处让我知道。

**编辑：由于 iOS6 正式发布：**

在我的 ios6 之前的代码中，我这样做是为了在用户位置移动时旋转地图：

```
//this is in my MKMapViewDelegate
-(void) rotateMap:(MKMapView *)mapViewTmp forLocation:(MKUserLocation *) userLocation {
     ...
     //calculate needed rotation
     ...
     [mapViewTmp setTransform:CGAffineTransformMakeRotation(lastRotation)]; //rotate the MKMapView

     for (id<MKAnnotation> annotation in mapViewTmp.annotations) {
           MKAnnotationView* annotationView =[mapViewTmp viewForAnnotation:annotation];

                    [annotationView setTransform:CGAffineTransformMakeRotation(-lastRotation)];      //counter rotate the Annotation Views

                    [annotationView setNeedsDisplay];  //ios6
     }

} 
```

这很好用（1000 名用户）。

然而，在 ios6 中（我在 2012 年 9 月 4 日更新了 Xcode/sdk），注释视图不保持这种旋转（例如，如果地图被平移）。它们翻转回未旋转的状态（由于我的地图已旋转，这意味着它们以一定角度而不是水平显示文本）。

该代码确实会暂时旋转注释，使其文本显示为水平，但如果地图被平移（并且它们似乎也是其他原因），那么注释将翻转到它们的非旋转状态，并且我的注释文本以相对于旋转地图。

旋转 MKAnnotationView 以使其在 IOS6 中保持旋转的正确方法是什么？MKMapView 发生了什么变化导致了这种变化？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-17T12:42:50.063

解决方法是在 viewForAnnotation 方法中执行以下操作：

```
// iOS6 BUG WORKAROUND !!!!!!!
if (is6orMore) {
     [annotationView setTransform:CGAffineTransformMakeRotation(.001)]; //any small positive rotation
} 
```

这是我在原始问题中作为评论发布的，然后由 cristis 作为答案发布（参考我的评论），但我发布并接受我自己的答案，因为是我提出的。这有意义吗？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T06:46:19.857

这是作为评论发布的，我将其重新发布为答案，以便任何人都可以轻松看到它（并且浪费更少的时间试图弄清楚）。

> 修复方法是===>在 viewForAnnotation 方法中：
> 
> ```
> // iOS6 BUG WORKAROUND !!!!!!!
> if (is6orMore) {
>      [annotationView setTransform:CGAffineTransformMakeRotation(.001)]; 
> } 
> ```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T14:24:05.153

我看到了同样的事情。这是修复：

在 MKAnnotationView 的孩子上设置您的转换，所以在伪代码中：

```
view.child.transform = CGAffineTransformMakeRotation(0.3); 
```

让他们控制注释视图并控制您的视图子树。转换连接，您将继承它们在位置上所做的任何事情。在 iOS 6 上为我工作。

# asp.net-mvc - LINQ To Entities 无法生成字符串 MVC Razor

> ID：12324771
> 
> 赞同：0
> 
> 时间：2012-09-07T20:14:01.477
> 
> 标签：asp.net-mvc, asp.net-mvc-3, linq, razor, linq-to-entities

使用 LINQ 获取信息时，我使用以下方法

```
var salt_water_disposals = _SaltWaterDisposals.SaltWaterDisposals.Select(sw => new SaltWaterModel
            {

                saltwater_ID = sw.SaltWaterDisposalID,
                lease = sw.Lease.LeaseName,
                field = sw.Lease.Field.Name.ToLower(),
                permitter_fluid = sw.PermittedFluids.Count == 0 ? "None" : sw.PermittedFluids.Aggregate("", (current, c) => current+c.Fluid.Name),
                max_gas_pressure = sw.MaxGasInjectionPressure,

            }); 
```

但是，当我运行代码时，由于 PermittedFluids，我收到以下错误：

> LINQ to Entities 无法识别方法“System.String Aggregate[PermittedFluid,String](System.Collections.Generic.IEnumerable `1[FieldPro.Domain.Entities.PermittedFluid], System.String, System.Func`3[System.String,FieldPro.Domain.Entities.PermittedFluid,System.String])”方法，而这个方法不能翻译成存储表达式。

我也尝试将它用作 ToString() 但我得到了同样的错误。

有任何想法吗？

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T20:19:22.343

您可能知道，LINQ 将您的代码转换为 SQL 语句。它不能翻译所有代码，这就是其中一种情况。

System.Data.Objects.SqlClient.SqlFunctions 是一个具有许多在 LINQ 上下文中有效的静态方法的类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T20:54:08.667

我通过取出 Aggregate 调用并在我的视图中调用它并更改数据类型或 permitter_fluid 来解决此问题。

所以我的模型有：

```
public System.Data.Objects.DataClasses.EntityCollection<FieldPro.Domain.Entities.PermittedFluid> permitter_fluid { get; set; } 
```

我的控制器有：

```
permitter_fluid = sw.PermittedFluids, 
```

我的观点有（使用来自 MvCContrib 的 Html.Grid）：

```
column.For(m => m.permitter_fluid.Aggregate("", (current, c) => current + c.Fluid.Name)).Named("Permitted Fluid"); 
```

这解决了我的问题

# solr - 如何查询分析int值

> ID：12324774
> 
> 赞同：2
> 
> 时间：2012-09-07T20:14:36.780
> 
> 标签：solr, lucene, schema

我在 SOLR/Lucen 中有一个整数值。
当我在其中搜索值时，人们可能会在查询中添加一个前缀：该字段是一个 ID。因此对于 id=900 的项目，人们可能会搜索“900”或“it900”或“it-900”，因为这是我们表示项目的方式（类别 +'-'+id）。

现在，我在我的代码中去除所有非数字字符。在我看来，从逻辑上讲，SOLR 模式中应该有一种简单的方法来实现这一点。

我尝试为整数字段定义查询分析器。但是，Lucen 不喜欢 INT 字段错误消息的分析器：

```
FieldType: TrieIntField (int) does not support specifying an analyzer 
```

该字段是（分析仪不工作，如上所述）

```
 <fieldType name="int" class="solr.TrieIntField" precisionStep="0" omitNorms="true" positionIncrementGap="0">
            <analyzer type="query">
                <tokenizer class="solr.WhitespaceTokenizerFactory"/>
                <filter class="solr.PatternReplaceFilterFactory" pattern="(\d+)" replacement="$1" />
            </analyzer> 
        </fieldType> 
```

知道我如何定义这个吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T15:42:04.477

您能否改为在（例如）文本字段上指定过滤器，然后将该字符串字段的内容复制到 int 字段？这似乎是处理它的最简单方法。

# haskell - 这是什么意思？来自 Haskell 维基

> ID：12324781
> 
> 赞同：1
> 
> 时间：2012-09-07T20:15:17.043
> 
> 标签：haskell

```
data Exp  
  = Let String Exp Exp
  | Exp1 Exp1
  deriving Show 
```

[文档页面](http://www.haskell.org/happy/doc/html/sec-using.html)示例中的 Let 关键字是什么意思？（我知道let的正常含义）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-07T20:20:20.917

这不是关键字。它只是该`Exp`类型的第一个构造函数的名称。`Exp1`第二行的第一个是第二个构造函数的名称。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T20:34:31.623

在这种情况下`Let`是一个数据构造函数，不应与`let`关键字混淆。
在示例中，语法接受`let`类似于 Haskell 使用的表达式。
即字符串`let foo = 5 in foo + foo`稍后将表示为：
`Let "foo" (Term (Factor (Int 5))) (Plus (Term (Factor (Var "foo"))) (Factor (Var "foo")))`

如您所见，构造函数的第一个参数是 substition，第二个参数是 substition 适用的表达式。

# vba - 如何导入带有图像的工作表？

> ID：12324786
> 
> 赞同：3
> 
> 时间：2012-09-07T20:15:43.890
> 
> 标签：vba, excel, excel-2010

```
Workbooks.Open fileName:=ThisWorkbook.path & "\Sea.xlsx"
Workbooks("Sea.xlsx").Sheets.Copy before:=ThisWorkbook.Sheets("Sky")
Workbooks("Sea.xlsx").Close False 
```

这可行，但在 Sea.xlsx 上有一张带有图像的表格。
图纸被复制，但图像没有。
相反，我有带有文本的框：

```
This image cannot be currently displayed. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-07T14:56:13.540

我也遇到了这个问题，我想我已经找到了解决方案。对我来说，问题是我想要复制的工作表被隐藏了。所以我在我的代码中插入了行 sheet(x).visible = true"。我必须更改的另一个是我之前使用的行“Application.Screenupdating = False”必须被忽略。在这些更改之后，图片对于我希望这会有所帮助。

# asp.net-mvc - MVC4 中的默认操作

> ID：12324791
> 
> 赞同：1
> 
> 时间：2012-09-07T20:16:00.487
> 
> 标签：asp.net-mvc, asp.net-mvc-4, asp.net-mvc-routing

我有一个名为的控制器`Entry`，它具有三个 ActionResult：`View`、`New`和`Edit`。

该`View`操作接受表示特定条目对象的字符串参数。

我试图弄清楚如何不在 URL 中显示“查看”一词。换句话说，我希望它像默认操作一样。

理想情况下，我希望 URL 读取为：

> *   **给定条目的 **/entry/2DxyJR****
> ***   **/entry/new**创建一个新条目*   **/entry/edit/2DxyJR**编辑给定条目**

 **我相信这可以通过自定义路线来完成，但我不确定如何实际做到这一点。这条路线适用于隐藏“视图”，但是`/new`不起作用`/edit`。

```
routes.MapRoute(
    name: "Entry",
    url: "entry/{id}",
    defaults: new { controller = "Entry", action = "View", id = UrlParameter.Optional }
); 
```

抱歉，这非常愚蠢，但我仍在努力了解路由的工作原理。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T20:24:41.597

您需要确保将更具体的放在顶部，因此条目/id 必须放在最后，因为您似乎有基于字符串的 id。

这将首先匹配最明确的（新），然后如果 url 中有编辑，则如果没有则进入查看操作。

```
routes.MapRoute(
    name: "Entry",
    url: "entry/new",
    defaults: new { controller = "Entry", action = "New" }
);

routes.MapRoute(
    name: "Entry",
    url: "entry/edit/{id}",
    defaults: new { controller = "Entry", action = "Edit", id = UrlParameter.Optional }
);

routes.MapRoute(
    name: "Entry",
    url: "entry/{id}",
    defaults: new { controller = "Entry", action = "View", id = UrlParameter.Optional }
); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T21:58:18.257

我认为路由约束实现在“entry/”后面传递所有字符串，但除了 view、edit 和 new 之类的词，因此“默认”路由可以处理。就像是：

```
public static void RegisterRoutes(RouteCollection routes)
        {
            routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

            routes.MapRoute(
                "EntryView",
                "Entry/{identifier}",
                new { controller = "Entry", action = "View" },
                new { identifier = new NotEqual(new string[]{"View", "Edit" , "New"}) }

            );
            routes.MapRoute(
                            "Default", // Route name
                            "{controller}/{action}/{id}", // URL with parameters
                            new { controller = "Home", action = "Index", id = UrlParameter.Optional } // Parameter defaults
                        );
        } 
```

这是 NotEqual 类：

```
public class NotEqual : IRouteConstraint
    {
        private string[] _match;

        public NotEqual(string[] match)
        {
            _match = match;
        }

        public bool Match(HttpContextBase httpContext, Route route, string parameterName, RouteValueDictionary values, RouteDirection routeDirection)
        {
            for (int i = 0; i < _match.Length; i++)
            {
                if (String.Compare(values[parameterName].ToString(), _match[i], true) == 0)
                {
                    return false;
                }
            }
            return true;
        }
    } 
```

我对其进行了测试并且它有效，我在[http://stephenwalther.com/archive/2008/08/07/asp-net-mvc-tip-30-create-custom-route-constraints.aspx上找到了它，因为我需要它](http://stephenwalther.com/archive/2008/08/07/asp-net-mvc-tip-30-create-custom-route-constraints.aspx)**

# wolfram-mathematica - 通过提供可变范围协助“解决 []”

> ID：12324797
> 
> 赞同：1
> 
> 时间：2012-09-07T20:16:28.397
> 
> 标签：wolfram-mathematica

我正在尝试求解一个方程组（5 个未知变量，5 个方程），但`Solve[]`函数只是挂起，我不得不中止评估。我可以理解，因为有些方程很混乱——至少在我看来（我不是数学家）。

我通过代入“已知/真实”模拟值检查了使用的方程`Solve[]`，它们都有效。

所以，我的问题是：是否有可能`Solve[]`通过说“帮助”，例如......

```
Solve[{eq1, eq2, eq3, eq4, eq5},{var1, var2, var3, var4, var5}, (*code here along the lines of { 0 < var1 < 10, var2 < 25, ...}*)] 
```

如果有帮助，我可以提供更多信息。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-26T12:31:25.760

*Mathematica*程序在函数内部提供了非常简单的解决方案`Solve[]`。您可以将各种所需条件添加为不等式`ConditionOnVar1, ConditionOnVar1`：

```
Solve[{Eq1, Eq2, ConditionOnVar1, ConditionOnVar2},{Var1, Var2}] 
```

## 简单的一维示例

```
Solve[Cos[theta]==1 && theta >= 0 && theta < 2\[Pi], theta] 
```

# java - JavaFX 2.0 + FXML - 奇怪的查找行为

> ID：12324799
> 
> 赞同：5
> 
> 时间：2012-09-07T20:16:43.123
> 
> 标签：java, javafx-2, fxml

我想在加载的场景中找到一个 VBox 节点，`FXMLoader`但`Node#lookup()`出现以下异常：

`java.lang.ClassCastException: com.sun.javafx.scene.control.skin.SplitPaneSkin$Content cannot be cast to javafx.scene.layout.VBox`

**编码 ：**

```
public class Main extends Application {  
    public static void main(String[] args) {
        Application.launch(Main.class, (java.lang.String[]) null);
    }
    @Override
    public void start(Stage stage) throws Exception {
        AnchorPane page = (AnchorPane) FXMLLoader.load(Main.class.getResource("test.fxml"));
        Scene scene = new Scene(page);
        stage.setScene(scene);
        stage.show();

        VBox myvbox = (VBox) page.lookup("#myvbox");
        myvbox.getChildren().add(new Button("Hello world !!!"));
    }
} 
```

**fxml 文件：**

```
<AnchorPane id="AnchorPane" maxHeight="-Infinity" maxWidth="-Infinity" minHeight="-Infinity" minWidth="-Infinity" prefHeight="400.0" prefWidth="600.0" xmlns:fx="http://javafx.com/fxml" >
  <children>
    <SplitPane dividerPositions="0.5" focusTraversable="true" prefHeight="400.0" prefWidth="600.0" AnchorPane.bottomAnchor="0.0" AnchorPane.leftAnchor="0.0" AnchorPane.rightAnchor="0.0" AnchorPane.topAnchor="0.0">
      <items>
        <AnchorPane minHeight="0.0" minWidth="0.0" prefHeight="160.0" prefWidth="100.0" />
        <VBox fx:id="myvbox" prefHeight="398.0" prefWidth="421.0" />
      </items>
    </SplitPane>
  </children>
</AnchorPane> 
```

我想知道：
1\. 为什么查找方法返回 a`SplitPaneSkin$Content`而不是 a `VBox`？
2.我怎样才能`VBox`以另一种方式获得？

提前致谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-08T11:52:29.433

获取对 VBox 的引用的最简单方法是调用 FXMLLoader#getNamespace()。例如：

```
VBox myvbox = (VBox)fxmlLoader.getNamespace().get("myvbox"); 
```

请注意，您需要创建一个 FXMLLoader 实例并调用 load() 的非静态版本才能使其工作：

```
FXMLLoader fxmlLoader = new FXMLLoader(getClass().getResource("test.fxml"));
AnchorPane page = (AnchorPane) fxmlLoader.load(); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-07T21:16:57.567

1.  SplitPane 将所有项目放在单独的堆栈窗格中（想象为`SplitPaneSkin$Content`）。由于未知原因，FXMLLoader 为它们分配了与根子节点相同的 id。您可以通过下一个实用方法获得所需的 VBox：

    ```
    public <T> T lookup(Node parent, String id, Class<T> clazz) {
        for (Node node : parent.lookupAll(id)) {
            if (node.getClass().isAssignableFrom(clazz)) {
                return (T)node;
            }
        }
        throw new IllegalArgumentException("Parent " + parent + " doesn't contain node with id " + id);
    } 
    ```

    并在下一个方式使用它：

    ```
    VBox myvbox = lookup(page, "#myvbox", VBox.class);
    myvbox.getChildren().add(new Button("Hello world !!!")); 
    ```

2.  您可以使用[控制器](http://docs.oracle.com/javafx/2/api/javafx/fxml/doc-files/introduction_to_fxml.html#controllers)并添加自动填充字段：

    ```
    @FXML
    VBox myvbox; 
    ```

# jquery - 为什么我的 jquery 输入掩码不起作用？

> ID：12324800
> 
> 赞同：3
> 
> 时间：2012-09-07T20:16:44.170
> 
> 标签：jquery, forms, input, mask

我正在尝试使用 jQuery 输入掩码插件（jquery.maskedinput-1.3.min.js），我已经搜索了几个示例/解决方案，我的代码与其他工作示例完全相同，但它根本不会为我工作。请记住，我的代码现在只是测试这个插件（试图让它工作，这将解释为什么我试图将日期输入掩码应用于名称字段）我的代码如下：

**HTML**

```
<!DOCTYPE html>

<html lang="en">
<head>
    <meta charset="utf-8" />
    <title>Persons of Interest</title>
    <link rel="stylesheet" type="text/css" href="/Default_Styler.css" />
    <link rel="shortcut icon" href="/person.ico" type="image/x-icon" />
    <script src="/Scripts/jquery.1.7.2.js" type="text/javascript"></script>
    <script src="/Scripts/jquery.maskedinput-1.3.min.js" type="text/javascript"></script>
    <script src="/Scripts/FormHandler.js" type="text/javascript"></script>
</head>
<body>
    <div id="WrapperDiv">
        <div id="TitleBar">    <!--Beginning of Title Bar-->
            <div style="padding-top: 30px; text-align: center;">Persons of Interest</div>
        </div>                 <!--End of Title Bar-->
        <div id="FormHolder">
            <form action="">
                <p><label>POI Name: </label><input type="text" id="POI Name" name="POI Name" value=""/></p>
            </form>
        </div>
    </div>
</body>
</html> 
```

**JavaScript**

```
jQuery(function ($) {
    $("#POI Name").mask("99/99/9999");
}); 
```

除此之外，我可以向您保证，引用的 jQuery 库确实在适当的目录中。（/脚本/...）

当我单击输入字段或任何内容时，我没有收到错误，它只是什么都不做。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-07T20:18:31.370

jQuery 选择器遵循标准的 CSS 语法，因此 ID 中间的空格实际上被视为后代选择器。让您的生活更轻松：在处理 jQuery 时，将您的 ID 和类限制为字母数字、连字符，仅此而已。

澄清一下：jQuery中有一个引用/转义语法，但恕我直言，处理起来太烦人了，因此我什至没有给出它的例子。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-07T20:21:23.170

remove the space from the ID and then try this

```
jQuery(function ($) {
    $("#POIName").mask("99/99/9999");
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-07T20:18:43.067

ID 属性中的空格无效。您也应该将您的 id 更改为`$("#POIName")`并更新您的 html。

[Jquery-ids-with-spaces](https://stackoverflow.com/questions/596314/jquery-ids-with-spaces)是一个类似的问题，您可能会觉得很有趣。

# javascript - 如何将 MySQL 查询的 ResultSet 转换为整数？

> ID：12324801
> 
> 赞同：1
> 
> 时间：2012-09-07T20:17:03.343
> 
> 标签：javascript

我不精通 Java 和 JavaScript。

我正在做的是使用一个 java 插件，它允许我将 javaScript 添加到一个文本文件中，以便在某些事件上调用。文本文件中的 JS 还可以调用 Java 插件本身内部的东西，使其能够访问我没有文档的 API。

我需要对我的 JS 做的是查询 MySQL 数据库并从表中获取用户 ID。这是我的代码：

```
var host = "localhost"
var port = "3306"
var database = "dev"
var user = "root"
var pass = ""
// var username = name of the user used to vote. Part of internal API

function connect(){
  var url = "jdbc:mysql://" + host + ":" + port + "/" + database
  return java.sql.DriverManager.getConnection(url, user, pass)
}
function getUserId(){
  var connection = connect()
  var statement = connection.createStatement()
  var userId = statement.executeQuery("SELECT user_id FROM xf_user_field_value WHERE field_value = '" + username + "'")
  return userId
} 
```

这返回的是一个结果集。我需要它返回的是字段的整数值..而不是结果集。

如何从 JavaScript 中的 ResultSet 获取整数值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T20:27:30.477

我不熟悉这个 Java/Javascript 插件，但它似乎遵循标准的 Java 方法。它应该是：

```
var statement = connection.createStatement()
statement.executeQuery("SELECT user_id FROM xf_user_field_value WHERE field_value = '" + username + "'")
var rs = s.getResultSet ();

if (rs.next()) {
    var userId = rs.getInt("user_id");
} 
```

**编辑**

在您的情况下，它似乎`ResultSet`已经返回 a ，所以也许：

```
var rs = statement.executeQuery("SELECT user_id FROM xf_user_field_value WHERE field_value = '" + username + "'") 
```

# javascript - Javascript 到 jQuery 转换代码

> ID：12324805
> 
> 赞同：0
> 
> 时间：2012-09-07T20:17:30.880
> 
> 标签：javascript, jquery

我很难将以下代码更改为使用 jQuery。谁能指出我正确的方向？

```
function addListItem() {
    var listItem, container, dataList = document.getElementById('dataList');

    // Create our list item
    listItem = document.createElement('div');
    listItem.setAttribute('data-bb-type', 'item');
    listItem.setAttribute('data-bb-img', 'images/icons/icon11.png');
    listItem.setAttribute('data-bb-title', 'Title ');
    listItem.innerHTML = 'My description';

    // Create a dummy container
    container = document.createElement('div');
    container.appendChild(listItem);

    // Apply the styling
    bb.imageList.apply([container]);

    // Append the item
    dataList.appendChild(container.firstChild);

    // re-compute the scrolling area
    if (bb.scroller) {
        bb.scroller.refresh();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T20:38:04.870

首先，让我告诉您，您的代码看起来非常好。

现在，要使用 jQuery 通过其 ID 选择一个元素，请使用[**ID 选择器 (“#id”)**](http://api.jquery.com/id-selector/)。因此，`document.getElementById("dataList")`您可以使用：

```
$("#dataList") 
```

要动态创建 DOM 元素，请使用[`jQuery( html, props )`](http://api.jquery.com/jQuery/#jQuery2). 例如，要创建列表项，您可以使用：

```
listItem = $("<div />", {
  data-bb-type: 'item',
  data-bb-img: 'images/icon/icon11.png',
  data-bb-title: 'Title'
}).html("My description"); 
```

最后，要将元素附加到另一个元素，请使用[`.append()`](http://api.jquery.com/append/). 使用此功能，您可以使用以下方法创建虚拟元素：

```
container = $("<div />").append(listItem); 
```

# c++ - 如何避免重复对/在多图中找到一对？

> ID：12324807
> 
> 赞同：7
> 
> 时间：2012-09-07T20:17:34.047
> 
> 标签：c++, multimap

我有一些（工作）代码使用`multimap<string,string>`. 我想将其更改为不允许同一键上的重复值（显然同一键上的不同值很好，否则我不会使用多映射）。

令人惊讶的是，该类型似乎没有[内置](http://www.cplusplus.com/reference/stl/multimap/)方法来避免重复，也没有找到键值对（仅查找键）。但我认为 SO 上的某个人必须有现成的解决方法。任何人？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-07T21:13:39.593

这是我想出的：

```
template<class K, class V>
typename multimap<K, V>::const_iterator find_pair(const multimap<K, V>& map, const pair<K, V>& pair)
{
    typedef multimap<K, V>::const_iterator it;
    std::pair<it,it> range = map.equal_range(pair.first);
    for (it p = range.first; p != range.second; ++p)
        if (p->second == pair.second)
            return p;
    return map.end();
}
template<class K, class V>
bool insert_if_not_present(multimap<K, V>& map, const pair<K, V>& pair)
{
    if (find_pair(map, pair) == map.end()) {
        map.insert(pair);
        return true;
    }
    return false;
} 
```

（当单个键上附加大量值时，这效率不高，但在我的情况下，每个键上的值很少。）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-07T20:41:41.343

`std::map<std::string, std::set<std::string>>`似乎具有您正在寻找的属性exactamondo（尽管复杂性不如`unordered_map`and `unordered_set`）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-07T20:40:33.023

看起来

```
 std::set<std::pair<std::string,std::string>>> 
```

将具有您正在寻找的属性。

然而，它既不是地图也不是多地图。您可以保留多图和一组键、值对，或者创建此组仅用于检查一致性。

我会使用这个集合并在它上面创建一个适配器到多映射接口。也许它不是最容易实现的解决方案，但具有最佳的性能效率。

请参阅“适配器设计模式”问题以获取参考。

* * *

**[更新]**

请参阅我的[工作示例](http://ideone.com/tTFEX)作为起点。

例如，如何遍历键的所有值 - 请参阅：

```
typedef  std::set<std::pair<std::string, std::string> > ssset;

ssset::iterator get_key(ssset& s, std::string key)
{
  ssset::iterator it = s.lower_bound(std::make_pair(key, ""));
  if (it != s.end() && it->first == key) return it;
  return s.end();   
}

for (ssset::iterator it = get_key(s, "abc"); it != s.end() && it->first == "abc"; ++it)
   std::cout << it->first << "->" << it->second << std::endl; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-07T20:29:00.933

我对您的建议是将您的多图包装在一个类中，并简单地在您将某些内容添加到地图中的方法中进行验证。其余的函数将简单地传递给多图的方法。它制作了很多样板代码，但如果您需要进行其他类型的验证，这种方式会更容易。

# r - 从 Optim 返回多个输出参数

> ID：12324813
> 
> 赞同：1
> 
> 时间：2012-09-07T20:18:10.177
> 
> 标签：r

我在 R 中使用 optim 运行优化例程，并告诉程序我想要返回什么。例如，如果我 put `return(op1$par)`，它将返回我的所有 4 个变量值。很好，如果我运行`return(op1)`，我显然会从优化例程中获得所有信息（par、value、convergence 等）。但是，在这种格式中，par 值无法在输出中访问，它只是详细说明有 4 个值。

现在我需要的是同时获取参数值和收敛信息。R 不会让我 `return(op1$par, op1$convergence)`这么称呼它，所以我正在寻找一次运行这两个实体的最佳方法？

我应该指定我将它写入一个文件进行 1000 次迭代，而不仅仅是在屏幕上调用它一次。

干杯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T20:25:23.860

尝试这样的事情：

```
return(c(Parameters=op1$par, Convergence=op1$convergence)) 
```

名称`Parameters`和`Convergence`仅用于识别什么是参数以及什么是收敛，因为这个结果将是一个向量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T20:47:54.463

按照设计，一个函数只能返回一个对象（否则赋值之类的`a <- fn(b)`会让人感到困惑；你分配的是哪一个？）。但是那个对象可以是一个向量，也可以是一个列表（就是`optim`这样）。所以把你的论点包装成类似的东西

```
return(c(par=op1$par, convergence=op1$convergence)) 
```

或更一般地（对于不同类型的对象），

```
return(list(par=op1$par, convergence=op1$convergence)) 
```

# javascript - $.getJSON 与 Spring 不执行回调

> ID：12324815
> 
> 赞同：1
> 
> 时间：2012-09-07T20:18:24.140
> 
> 标签：javascript, ajax, json, spring

我已经环顾了一段时间，看到了许多类似的问题，但没有任何帮助。我有一个 getJSON 调用，它调用我的 Spring 控制器并以 JSON 文本响应（已验证确实返回了 JSON 文本），但从未执行回调（基于回调函数中没有执行任何操作，并且我没有收到错误的错误JavaScript）。

在我的jsp文件中：

```
function getUserText(str)
{
    $.getJSON("selectUser.htm", { id: str }, function(user)
    {
        //Doesn't matter what's here
    });
} 
```

在我的控制器中：

```
@RequestMapping(value="/selectUser.htm")
public @ResponseBody String SelectUser(@RequestParam String id)
{
    Users user = userMap.get(id);

    if (user == null)
        return null;

    return createUserJSON(user);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T20:20:07.320

I'm not sure about this, but my guess is the function you provide is the success function that gets called when ajax returns. It is possible that the request is not returning successfully.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T20:24:23.780

这意味着 JSON 无效。可能是内容无效或内容类型设置不正确......

```
$.getJSON has no error callback

http://api.jquery.com/jQuery.getJSON/ 
```

看看你需要使用什么问题

```
$.ajax({
  url: "myurl",
  type: "GET",
  dataType: "json",
  success: function() {
    //called when successful
  },
  error: function(e) {
    //called when there is an error
  },
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T20:29:23.967

找到了答案。结果证明 JSON 必须是有效的。我犯了一个错误，所以 JSON 格式不正确。我什至在回调函数之前都不知道格式是否重要。

# php - 幻影未知记录属性名称导致 500 错误

> ID：12324819
> 
> 赞同：0
> 
> 时间：2012-09-07T20:18:37.340
> 
> 标签：php, doctrine, symfony-1.4, symfony-forms

我在表单加载时收到此错误：

> “Flipbook”上的未知记录属性/相关组件“标题”

问题是......我不知道“标题”来自哪里。我已将其设置为`career_title`架构和数据库。模型已构建，基类正确。

这是我的行动：

```
 public function executeEdit(sfWebRequest $request)
  {
      if (get_class($this->getRoute()) == 'sfDoctrineRoute') {
        /* edit action */
        $flipbook = $this->getRoute()->getObject();     
      }
      else {
        /* add action */
        $flipbook = new Flipbook();
      }

      $this->form = new FlipbookForm($flipbook);

      if ($request->isMethod('post')) {
        $this->form->bind($request->getParameter('flipbook'));
        if ($this->form->isValid()) {           
            $this->form->save();
            $this->getUser()->setFlash('message_success', 'Flipbook saved');
            return $this->redirect('@flipbook_edit?id=' . 
                    $this->form->getObject()->get('id') . 
                    ($request->getParameter('preview') ? '&preview=1' : ''));       
                }
              }
          } 
```

如果我从中删除`$flipbook`变量 `$this->form = new FlipbookForm($flipbook);`，我会得到一个成功呈现的表单，但我需要对象数据来重新填充输入字段。

我只是不知道为什么它会在对象上找到“标题”。我没有在任何地方引用它（我不认为）。有任何想法吗？错别字？建议？

让我知道是否需要提供更多代码。

这是添加的类的**yml 模式：**

```
 Generic:
          actAs: [ Timestampable ]
          columns:
            updated_by: { type: integer }
            created_by: { type: integer }
            published: { type: boolean, default: 0 }
          relations:
            creator:
              class: sfGuardUser
              foreignAlias: created_users
              local: created_by
              onDelete: "SET NULL"
            last_updater:
              class: sfGuardUser
              foreignAlias: updated_users
              local: updated_by
              onDelete: "SET NULL"

            flipbook:
              url:  /flipbook
              param: { module:

    Flipbook:
      tableName: flipbook
      inheritance:
        extends: Generic
        type: concrete
      columns:
        career_title: { type: string(255) }
        career_associations: { type: clob }
        skills: { type: string(255) }
        skills_associations: { type: clob }
        program: { type: string(255) }
        program_associations: { type: clob }
        draft_id: { type: integer(10) } 
```

最后是**模板**，如果你需要的话：

```
<?php echo $form->renderFormTag(url_for($form->getObject()->isNew() ? '@flipbook_add' : ('@flipbook_edit?id=' . $form->getObject()->get('id'))), array('method' => 'post', 'id' => 'edit_form', 'name' => 'edit_form', 'class' => 'generic_form job_form')) ?>
  <?php echo $form['id'] ?>
  <div class="content-box">
    <div class="box-body">
      <div class="box-header clear">
        <h2>Flipbook</h2>
      </div>
      <div class="box-wrap clear"  style="display: block;">
        <?php echo $form ?>
      </div><!-- end of box-wrap -->
    </div> <!-- end of box-body -->
  </div>

  <div class="buttons_row right main_actions">
    <?php include_partial('global/apply_changes_button', array('form' => $form)) ?>
    <?php include_partial('global/publish_button', array('form' => $form)) ?>
  </div>
</form>

<?php include_partial('global/preview', array('form' => $form)) ?> 
```

**路由**：

```
 flipbook, action: index }
    flipbook_add:
      url:   /flipbook/add
      param: { module: flipbook, action: edit }
    flipbook_edit:
      url:   /flipbook/edit/:id
      param: { module: flipbook, action: edit }
      param: { module: flipbook, action: edit }
      class: sfDoctrineRoute
      options: { model: Flipbook, type: object }
      requirements:
        id: \d+
        sf_method: [get, post] 
```

**堆栈跟踪：**

```
stack trace at () in SF_ROOT_DIR/lib/vendor/symfony/lib/plugins/sfDoctrinePlugin/lib/vendor/doctrine/Doctrine/Record/Filter/Standard.php line 55 ...

    public function filterGet(Doctrine_Record $record, $name)
    {
      throw new Doctrine_Record_UnknownPropertyException(sprintf('Unknown record property
       / related component "%s" on "%s"', $name, get_class($record)));
    }
} 
```

**更新：**

这仍然没有真正解决，所以我想保持开放一段时间，看看是否有人可以诊断问题。我解决它的方法是在架构中更改`career_title`为。`title`我重建了模型和表格，一切正常。关于为什么会发生这种情况的任何进一步说明都将有益于事业。

# c++ - c++ 11中的睡眠排序

> ID：12324822
> 
> 赞同：3
> 
> 时间：2012-09-07T20:18:45.840
> 
> 标签：c++, multithreading, c++11

伙计们，我正在考虑一种排序方法，它称为睡眠排序

```
#include <stdlib.h>
#include <unistd.h>
#include <sys/types.h>
#include <sys/wait.h>

int main(int c, char **v)
{
    while (--c > 1 && !fork());
    sleep(c = atoi(v[c]));
    printf("%d\n", c);
    wait(0);
    return 0;
} 
```

我不明白一件事，c ++ 11中的fork等价物是什么？我的意思是新版本的c ++？我可以写这样的等待函数

```
void wait ( int seconds ){
    clock_t endwait;
    endwait = clock () + seconds * CLOCKS_PER_SEC ;
    while (clock() < endwait) {}
} 
```

但是 fork() 呢？我尝试了以下代码

```
#include<iostream>
#include<time.h>
using namespace std;;

void wait ( int seconds ){
    clock_t endwait;
    endwait = clock () + seconds * CLOCKS_PER_SEC ;
    while (clock() < endwait) {}
}

void Sort(int c,int a[])
{
    while(--c>1)
    {
        wait(c=a[c]);
        cout<<c<<"  ";
    }
 }

int main()
{
    int a[]={1, 3, 2, 11, 6, 4};
    int c=5;
    Sort(c,a);
    wait(0);

    return 0;
} 
```

但它没有给我排序的输出，它输出像 6 4 1 并完成，所以请告诉我如何纠正它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T20:32:58.427

你不能像你的`wait()`职能那样简单地拖延；这是通过为每个参数创建一个新进程（通过`fork()`）并让每个参数并行睡眠来实现的；您的建议将使每个元素串联睡眠，因此不会给人一种错觉。

至于`what is fork equivalent in c++ 11?`-- fork() 不是特定于 C 或 C++ 的；它是操作系统提供的功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T20:33:26.570

你没有理解重点。等待必须*并行*运行（由 fork 触发，它为每个项目创建一个新线程）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-07T20:50:22.943

虽然有更多的事情要谈，但我只会回答你的主要问题。

`c=5`虽然你有 6 个数字，但你已经设置`while(--c>1)`了，如果你计算，它只运行循环 3 次，因为如果你`--`在运算符之前添加它，它会先减去 1，然后比较。

*   `c=5`
*   `while(--c>1)`[减去 1 of 5=4 并检查是否大于 1] //运行它
*   `while(--c>1)`[减去 1 of 4=3 并检查是否大于 1] //运行它
*   `while(--c>1)`[减去 1 of 3=2 并检查是否大于 1] //运行它
*   `while(--c>1)`[减去 1 of 2=1 并检查是否大于 1] //不运行它

您必须更改您拥有`c`的数字数量：`c=6`，然后像这样更改`while`循环：`while(c-->0)`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-07T21:47:52.930

这是使用 Win32 在 C++ 中的工作实现：

```
#include <windows.h>
#include <iostream>

using namespace std;

DWORD threadFunc(LPVOID param)
{
    long val = (long)param;
    Sleep((int)val * 1000);
    cout << val << " ";
    return 0;
}

int main()
{
    HANDLE handles[6];
    int arr[] = {1, 3, 2, 11, 6, 4};

    for(int i = 0; i < 6; i++)
    {
        handles[i] = CreateThread(NULL, 0, (LPTHREAD_START_ROUTINE)&threadFunc, 
                                  (LPVOID)arr[i], 0, NULL);
    }

    WaitForMultipleObjects(6, handles, 1, INFINITE);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-11-21T10:17:59.870

跨平台版本。支持负数！

```
#include <iostream>
#include <vector>
#include <thread>
#include <chrono>
#include <algorithm>

template< typename It >
void sleepSort( const It& begin, const It& end )
{
    if ( begin == end )
        return;
    const auto [min, max] = std::minmax_element( begin, end );
    for ( auto it = begin; it != end; ++it )
    {
        std::thread( [min = *min, i = *it]
            {
                std::this_thread::sleep_for( std::chrono::milliseconds( i - min ) );
                std::cout << i << std::endl;
            } ).detach();
    }
    std::this_thread::sleep_for( std::chrono::milliseconds( *max - *min + 1 ) );
}

int main( int argc, char *argv[] )
{
    std::vector<int> v = { 20, 5, 15, 10, -5, };
    sleepSort( v.begin(), v.end() );

    return 0;
} 
```

输出：

> -5 5 10 15 20

# iphone - IOS在钥匙串中存储多个密码

> ID：12324831
> 
> 赞同：0
> 
> 时间：2012-09-07T20:19:14.163
> 
> 标签：iphone, ios, password-protection, keychain

在我的应用程序中，我可以使用此代码将读取好的 1 密码存储在钥匙串中

```
// save password
[keychainItem setObject:textFieldPassword.text forKey:(__bridge id)(kSecValueData)];

//get pasword from keychain
NSString *_password = [keychainItem objectForKey:(__bridge id)(kSecValueData)]; 
```

我的问题是：如何在钥匙串中一次存储多个密码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T20:22:50.737

钥匙串编程很难。我使用了一个名为 SFHFKeychainUtils 的包装类。它具有用于存储和检索密码的非常简单的类方法。

看看：[https ://github.com/ldandersen/scifihifi-iphone/tree/master/security](https://github.com/ldandersen/scifihifi-iphone/tree/master/security)

您使用自己制作的钥匙存储物品。所以你可以有@"WiFiPasswordKey"、@"LoginPasswordKey"等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T17:41:17.807

谢谢大家的答案。

这是我使用的解决方案：

将文件 KeychainItemWrapper.h/m 添加到我的项目中

分配 2 个钥匙串项目：

```
//aloc for user password
keychainItem = [[KeychainItemWrapper alloc] initWithIdentifier:@"passowrdKey1" accessGroup:nil];
//aloc for user password2
keychainItem2 = [[KeychainItemWrapper alloc] initWithIdentifier:@"passowrdKey1" accessGroup:nil]; 
```

然后就用它来读/写

```
//WRITE    
// save password
[keychainItem setObject:@"password1" forKey:(__bridge id)(kSecValueData)];
// save password2
[keychainItem2 setObject:@"password2" forKey:(__bridge id)(kSecValueData)];

//READ        
//get pasword from keychain
NSString *_pass = [keychainItem objectForKey:(__bridge id)(kSecValueData)];

//get pasword from keychain
NSString *_pass2 = [keychainItem2 objectForKey:(__bridge id)(kSecValueData)]; 
```

# solr - Apache Cassandra 与 Apache Solr 的集成

> ID：12324837
> 
> 赞同：8
> 
> 时间：2012-09-07T20:19:44.887
> 
> 标签：solr, cassandra

我熟悉 MSSQL 数据库上的 Apache Solr，但现在我正在研究如何将 Apache Solr 与 Apache Cassandra 集成，而不是我的 MSSQL 数据库。

我正在寻找设置此集成的教程和第一步，但找不到任何有用的东西。

使用 MSSQLDB，我的数据配置将如下所示：

```
<dataConfig>
<dataSource driver="com.microsoft.sqlserver.jdbc.SQLServerDriver" url="jdbc:sqlserver://localhost:1433;databaseName=test" user="sa" password="74667fghbjj3" />
<document name="cameras">
    <entity name="camera" query="select * from cameras WHERE isapproved='true'"
    deltaImportQuery="select * from cameras WHERE updatedate &lt; getdate() AND isapproved='true' AND id='${dataimporter.delta.id}'"
    deltaQuery="select id from cameras where isapproved='true' AND updatedate &gt; '${dataimporter.last_index_time}'">              
        <field name="id" column="ID" />
        <field name="title" column="TITLE" />
        <field name="friendlyurl" column="FRIENDLYURL" />           

        <entity name="camera_country" query="select countryid from cameras where id=${camera.id}">
            <entity name="countries" query="select title_nl as country_nl,title_en as country_en from countries where id = ${camera_country.countryid}">
            </entity>
        </entity>
    </entity>
</document>
</dataConfig> 
```

但是我将如何使用 Cassandra 作为我的 NOSQL DB 来解决这个问题？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-08T20:07:36.327

Solandra 是 Jake Luciani 的一个开源爱好项目。他讲述了 Solandra 的历史，并领导了下一代 Solandra 的 DSE Search 的开发。[他在这篇博文](http://www.datastax.com/dev/blog/cassandra-with-solr-integration-details)中谈到了这一点。这是我所知道的使用 Cassandra 的常规 Solr 4 接口来复制数据并提供诸如容错之类的东西的最佳方式。您可以下载它以免费试用，DataStax 确实为初创公司提供特别定价，物有所值。只是 DataStax 必须证明在其中投入资源是合理的。有关它的更多详细信息，请参阅[文档](http://www.datastax.com/docs/datastax_enterprise2.1/search/index)。免责声明，我确实为 DataStax 工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T22:41:51.183

我认为您无法进行替换，但看看[Solandra](https://github.com/tjake/Solandra)它可能会满足您的需求。Datastax 还有一个名为企业搜索的 solr+cassandra 产品；它看起来不错，但您必须为此付费。

# ruby-on-rails - 如何使用 FactoryGirl 初始化名为“序列”的列

> ID：12324842
> 
> 赞同：3
> 
> 时间：2012-09-07T20:20:10.147
> 
> 标签：ruby-on-rails, factory-bot

我有一个表，其中包含一个名为“sequence”的整数类型列，它不允许空值。如果我尝试正常定义工厂，FactoryGirl 认为我正在尝试设置序列而不是定义列名。

```
factory :my_table do
    sequence 1
end

# NoMethodError: undefined method `to_sym' for 1:Fixnum 
```

如何设置它以便 FactoryGirl 将其识别为普通列，而不是 FactoryGirl 序列？如果我想使用一个实际的序列来填充具有唯一递增整数值的列怎么办？我可以看到名为“特征”或“关联”的列可能存在相同的问题。顺便说一句，我使用的是 factory_girl 3.3.0 和 rails 3.2.8。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-07T20:39:15.057

谷歌搜索找到了这个解决方案：

```
factory :luggage do
  add_attribute :sequence, "12345"
end 
```

[https://groups.google.com/forum/?fromgroups=#!topic/factory_girl/OriR9gXlMZI](https://groups.google.com/forum/?fromgroups=#!topic/factory_girl/OriR9gXlMZI)

如果您随后需要创建一个序列并使用它，请参阅此备忘单：

> 序列：

```
# Defines a new sequence
Factory.sequence :email do |n|
  "person#{n}@example.com" 
end

#Uses the sequence
Factory.next :email
# => "person1@example.com"

# can also be defined inline:
Factory.define :user do |u|
  u.sequence(:email) { |n| "persion#{n}@example.com" }
end 
```

[http://cheat.errtheblog.com/s/factory_girl](http://cheat.errtheblog.com/s/factory_girl)

# ruby-on-rails - Vim Ruby and Rails autocomplete

> ID：12324844
> 
> 赞同：2
> 
> 时间：2012-09-07T20:20:19.193
> 
> 标签：ruby-on-rails, ruby, vim, autocomplete

I am using Tim Popes rail.vim and the ruby-vim. No matter what I have tried on the net I can't get code completion to work sensibly. The nearest I have got is

```
 <c-x><c-o>  -  auto completing ruby eg pu.. <c-x><c-o> shows "puts"
 <c-x><c-u>  -  auto completing rails e.g  ren.. <c-x><c-u> shows "render" 
```

.vimrc (section mostly found on github)

```
.....

set omnifunc=rubycomplete#Complete
let g:rubycomplete_buffer_loading = 1
let g:rubycomplete_classes_in_global=1
let g:rubycomplete_rails = 1

......

"perform all your insert completion using the "Tab" key.
"let SuperTab decide which completion mode to use and should play with OmniCompletion
"let g:SuperTabMappingTabLiteral = '<c-tab>' " insert true TAB
let g:SuperTabDefaultCompletionType = "context"
let g:SuperTabContextDefaultCompletionType = "<c-x><c-u>"
 let g:SuperTabCompletionContexts = ['s:ContextText', 's:ContextDiscover']
 let g:SuperTabCompletionContexts = ['s:ContextDiscover']
 let g:SuperTabContextTextOmniPrecedence = ['&omnifunc', '&completefunc']
let g:SuperTabContextDiscoverDiscovery =  ["&completefunc:<c-x><c-u>", "&omnifunc:<c-x><c-o>"]
" let g:SuperTabMappingForword = '<c-space>' " replace default <Tab>
let g:SuperTabLongestEnhanced = 1 " when you have 'longest' in completeopt, enhanced longest.
let g:SuperTabLongestHighlight = 0 " highlight first one in popup menu let you hit <enter>. 
```

I really would like the results of the two menus merged and under the one shortcut.

Thats is, both ruby and rails completion together.

Is this possible? perhaps using subertab chaining? which I couldn't get working either.

Other notes

```
Rails 3.2.8 
Ruby 1.9.2p320 and tried 1.8.7
Vim 7.3.429 (ubuntu vim-nox package) complied with ruby 1.8.7
Rbenv, Rbenv-build, Rbenv-bundle 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T01:15:24.950

我使用 rails.vim 而我的 .vimrc 只有

```
let g:rubycomplete_buffer_loading = 1
let g:rubycomplete_rails = 1 
```

代码完成与“选项卡”一起工作正常

# vimeo - Using Froogaloop to pause Vimeo on click

> ID：12324850
> 
> 赞同：2
> 
> 时间：2012-09-07T20:20:45.640
> 
> 标签：vimeo, froogaloop

I have a video player on my site that has multiple videos all in a slider-type layout. There are thumbnails of each video underneath, and I need any playing video to pause if any of the thumbnails are clicked. I have the froogaloop.js in my head, and this code in my scripts.js file : (function(){

```
 // Listen for the ready event for any vimeo video players on the page
            var vimeoPlayers = document.querySelectorAll('iframe'),
                player;

            for (var i = 0, length = vimeoPlayers.length; i < length; i++) {
                player = vimeoPlayers[i];
                $f(player).addEvent('ready', ready);
            }

            /**
             * Utility function for adding an event. Handles the inconsistencies
             * between the W3C method for adding events (addEventListener) and
             * IE's (attachEvent).
             */
            function addEvent(element, eventName, callback) {
                if (element.addEventListener) {
                    element.addEventListener(eventName, callback, false);
                }
                else {
                    element.attachEvent(eventName, callback, false);
                }
            }

            /**
             * Called once a vimeo player is loaded and ready to receive
             * commands. You can add events and make api calls only after this
             * function has been called.
             */
            function ready(player_id) {
                // Keep a reference to Froogaloop for this player
                var container = document.getElementById(player_id).parentNode.parentNode,
                    froogaloop = $f(player_id),
                    apiConsole = container.querySelector('.console .output');

                /**
                 * Prepends log messages to the example console for you to see.
                 */
                function apiLog(message) {
                    apiConsole.innerHTML = message + '\n' + apiConsole.innerHTML;
                }

                // Setup clear console button
                var clearBtn = container.querySelector('.console button');
                addEvent(clearBtn, 'click', function(e) {
                    apiConsole.innerHTML = '';
                }, false);

                apiLog(player_id + ' ready!');
            }
        })(); 
```

Then I have this for my thumbnails:

```
jQuery("a.switch-foto").click(function(){
    jQuery(".fotos").fadeOut();
    jQuery(".fotos").removeClass("first");
    jQuery('#see_'+this.id).delay(600).fadeIn();
    froogaloop.api('pause');
}); 
```

But when I test it on my site - it doesn't work - I get this error: Uncaught ReferenceError: froogaloop is not defined

can anyone help? Sorry I dont really understand Froogaloop.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T16:05:03.330

乍一看，在 click 事件中没有定义 froogaloop.api 调用。为了暂停视频，您应该将播放器传递给 Froogaloop 以暂停。像这样的东西：

```
Froogaloop( jQuery('iframe')[0] ).api('pause'); 
```

请注意，Froogaloop 有大写字母。我也和 Froogaloop 有关系。我希望这可以帮助你。

# jquery - 将 CSS z-index 属性添加到 JQuery 中的 css 变量

> ID：12324853
> 
> 赞同：1
> 
> 时间：2012-09-07T20:21:01.700
> 
> 标签：jquery

我正在尝试将 css 属性添加到 Jquery 中的 css 变量中。

```
var cssProp = {
    'position': 'absolute',
    'top': topPos,
    'left': leftPos
}

//this codes works
cssProp.top += 10;

//this is not..
cssProp.z - index = 10; 
```

如何解决这个问题？非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T20:22:59.257

使用点表示法时，属性中不允许出现破折号

```
cssProp['z-index'] = 10; 
```

请注意，在讨论`element.style`CSS 中的所有虚线元素时，css 属性在 JavaScript 中都是驼峰式大小写的，因此它可能实际上是`cssProp.zIndex = 10;`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T20:23:10.397

可能是因为 z-index 没有在 cssProp 中定义

尝试

```
var cssProp = {'position':'absolute',
                 'top': topPos,
                 'left': leftPos,
                 'z-index': 0
            } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T20:23:29.587

以您的方式执行此操作正在创建一个名为“z-index”的新变量，该变量在 javascript 中无效，因此无法正常工作。

尝试将其称为“zIndex”，这是一个有效的 JavaScript 变量名。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-07T20:26:05.343

使用`-`（破折号）作为变量名/对象键在 javascript 中无效。尝试使用 camelCase 表示法作为 zIndex。

**阅读更多：**

[javascript变量名称中是否允许使用破折号？](https://stackoverflow.com/questions/5516106/are-dashes-allowed-in-javascript-variable-names)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-07T20:27:39.457

像这样

```
var cssProp = {
    'position':'absolute',
    'top': topPos,
    'left': leftPos,
    'zIndex': '0'
}; 
```

jQuery always removes the '-' and then concatenates the word using the camelcase style type. I believe jQuery then has a regular expression that accomplishes this...

# ruby - 用net http解析html页面

> ID：12324857
> 
> 赞同：1
> 
> 时间：2012-09-07T20:21:28.170
> 
> 标签：ruby

在上一个问题中，我找到了一个被黑但有效的方法来解析页面标题的答案

```
 url = %x(curl http://google.com)
 simian = curl.match(/<title>(.*)<\/title>/)[1]
 puts simian 
```

现在我想知道是否有更好的方法通过使用像 net/http 这样的 ruby​​ 标准库来获取 url（代替 curl）。

另一个问题是，如果页面在标题中有一些非标准字符，它不会解析它并且 curl.match 无法完成。我试过了

```
 simian = s.encode('UTF-8') and then
 simian = curl.match(/<title>(.*)<\/title>/)[1] 
```

但它会显示奇怪的字符，例如 1# 在此先感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T20:29:33.310

使用 nokogiri 可能是最简单的解决方案：

```
require 'nokogiri'
require 'open-uri'

doc = Nokogiri::HTML(open('http://www.google.com'))
elt = doc.xpath('//title').first
puts elt.text() if !elt.nil? 
```

# jquery - jQuery Isotope 插件不会将所选元素排序到左上角

> ID：12324858
> 
> 赞同：2
> 
> 时间：2012-09-07T20:21:40.550
> 
> 标签：jquery, sorting, jquery-isotope

我正在尝试使用 jQuery [Isotope](http://isotope.metafizzy.co/)插件对这些元素进行排序。我无法让我选择的选项与左上角对齐，它只是移动到网格的底部。我查看了 sortAscending 选项，但它破坏了我放置内容的顺序。有什么我遗漏的吗？这是我的工作演示：http: [//jsfiddle.net/Yvk9q/3/](http://jsfiddle.net/Yvk9q/3/)

任何帮助将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T20:58:08.963

这太简单了，但是他们的`getSortData`选项工作方式只是向后做所有事情，所以我在 isMilk?、isBacon?、 和 isEggs? 之前添加了 3 个感叹号。现在看起来不错：

[http://jsfiddle.net/Yvk9q/9/](http://jsfiddle.net/Yvk9q/9/)

# wordpress - Start and end date for posts

> ID：12324860
> 
> 赞同：1
> 
> 时间：2012-09-07T20:22:09.197
> 
> 标签：wordpress

I'm trying to create simple events list from posts and for event date I'm using default publish date, but there is a problem when I need to insert event with the start and end date.

If I use custom field for the end date, I can display date, but I can't sort them and that's most important thing on this site. I also need to display the end date in 3 ways: "l, j. m.", "j. m." and "D, j. m.".

Is there any plugin for date range in default posts page (I didn't find anything) or do you have any idea what to do?

Thanks,

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T01:18:16.203

wp_query 中的日期范围目前不支持开箱即用。您可以使用 $wpdb 完成此操作，并使用 compare BETWEEN 格式编写选择语句。那是一个MYSQL问题。

这里有一个很好的 BETWEEN 日期/时间范围示例： [MySQL: Compare BETWEEN time](https://stackoverflow.com/questions/4714899/mysql-compare-between-time)

如果您的日期/时间是标准格式，您可以使用 strftime 输出时间，如下所示：http: [//strfti.me/](http://strfti.me/)

# javascript - Javascript / JSON警报返回未定义

> ID：12324861
> 
> 赞同：0
> 
> 时间：2012-09-07T20:22:17.093
> 
> 标签：javascript, json

我在尝试提醒 json 数据时遇到问题。

这是代码部分：

```
$.getJSON("http://myurl/api/get_data", function(data){
    var output = '';
    $.each(data, function(index, value){
    alert(data); // returns object
    alert(value.myurl) //Here is the problem - returns undefined
}); 
```

这是它正在读取的 json 数据：

```
{"myurl":"http://somedomain.com/"} 
```

如何获得警报以返回值？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-07T20:23:56.853

您的 JSON 文本由一个普通对象组成。没有数组。没有嵌套的数据结构。摆脱所有的`each`东西。

```
$.getJSON("http://myurl/api/get_data", function(data){
    alert(data.myurl);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T20:31:06.010

你想得太复杂了。JSON 代表 JavaScript 对象表示法。它基本上是它包含的对象的 javascript 语法表示。

传递给 getJSON 的成功处理程序的值已经是解压缩的对象。所以你可以这样做：

```
$.getJSON("http://myurl/api/get_data", function(data){
    alert(data.myurl);
}); 
```

# infragistics - QTP Object doesn't support this property or method error for Infragistics objects

> ID：12324864
> 
> 赞同：0
> 
> 时间：2012-09-07T20:22:30.120
> 
> 标签：infragistics, qtp

I have created my QTP scripts in QTP 11 with NetAdvantage 2010 v3 and TestAdvantage 2010 v3\. I am running these scripts on QTP 11 with the patch QTP_00709\. If I am running the scripts from QTP they run fine. But If I use QC 11/Test Lab and run them as a test set, they would start running and after couple of test scripts will start to fail due to the following error.

```
Object doesn't support this property or method: 'SwfWindow(...).SwfObject(...).SelectItem'
Line (49): "SwfWindow("Home Page_2").SwfObject("MenuUltraWinExplorerBar").SelectItem "Resources","People"". 
```

Are there any patches that I am missing for QTP 11?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T22:03:00.010

听起来好像在顺序运行脚本时，QTP 无法加载为其中一种类型配置的重播服务器。这是您应该联系 HP 支持的事情。

在联系支持人员之前，您应该收集的一些重要信息是是否有模式来判断何时失败。例如，是否只有在运行特定脚本后才会失败，在运行 n 个脚本后是否总是失败。您看到的任何模式都应该有助于确定问题的原因。

# html - How to submit single form element with submit button?

> ID：12324867
> 
> 赞同：0
> 
> 时间：2012-09-07T20:22:48.057
> 
> 标签：html, input

I have form in which there is two submit button with one button i have to post one form element value or with another submit i have to submit another form elements values.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T20:38:03.100

如果不使用 JavaScript 进行大规模禁用练习，您就做不到。

只有单击的提交按钮才是成功的控件（因此会出现在提交的数据中……确保它具有名称和值）。使用它来确定（在服务器上）单击了哪个按钮。

然后忽略与该提交按钮无关的所有输入。

* * *

也就是说，您的问题意味着没有任何输入与两个按钮相关联；所以你最好把它们分成两种不同的形式。

# assembly - How many assembly languages are there

> ID：12324868
> 
> 赞同：7
> 
> 时间：2012-09-07T20:22:48.057
> 
> 标签：assembly, x86

I was reading this article on wikipedia about list of assmeblies

[http://en.wikipedia.org/wiki/List_of_assemblers](http://en.wikipedia.org/wiki/List_of_assemblers)

turns out there are alot of assembly languages out there.. so for example if u learn the Yasm assembly language, would be hard to read the TCCASM code? is it like completely different than all the other asem.. languages? I wana learn this language but i dont know which one to choose.. if u could recommend some good books for novice programers that covers assembly x86 in general i would be more than grateful

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-07T20:48:28.083

您不应混淆以下内容：

*   汇编语言（具有不同实现的抽象思想）
*   assembler（一个程序，一种编译器（如果你愿意的话），它实现了语言）
*   语法（又一个特定于实现的细节；比较 x86 平台的 AT&T 和 Intel 语法）
*   指令集（不同CPU不同）

汇编语言的一般思想就是其中之一。但是它的实施例很多且不同（例如，MASM、TASM、NASM、(G)AS等）。它们的不同之处在于它们支持什么 CPU 和什么指令（子）集、它们支持什么特性（例如表达式、宏、对结构化编程的支持、对象/二进制文件格式）以及它们的外观（语法、助记符、指令、注释） ）。

如果您知道如何将一个汇编程序用于特定平台，那么学习另一个汇编程序应该不会很难。同样，如果您知道如何为一个平台编写汇编代码，那么学习为另一个平台编写 asm 代码应该没什么大不了的。当然，如果您对至少一个汇编程序和一个指令集有很好的理解，那么所有这些都是正确的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-01-21T12:10:03.617

我将从 Z80 开始，了解寄存器、程序计数器、堆栈、标志、助记符等的概念。它非常干净实用，而且不太复杂，但拥有编写处理器所需的一切。这当然是有偏见的，因为这是我第一次接触处理器 :) 但大多数其他的只是更复杂，当然有更多的可能性和力量，但它可能只会在开始时让你感到困惑。

# sql - WCF Sync with out a primary identity column

> ID：12324872
> 
> 赞同：0
> 
> 时间：2012-09-07T20:23:06.193
> 
> 标签：sql, wcf, windows-mobile, sync

I am doing an application in which I have some Windows Mobile devices which will synchronize with main database (Server) once a day using WCF Sync. For most of the tables in the client, the data is coming from the server, and later on only updates on those rows will be synchronized with the server.

Now the problem I'm facing is that I have a table in which data will be added throughout the day on each client database. But with those new rows on each client databases I have not been able to synchronize, because the primary key identity fields are going to be same on each client table. When they are synchronizing it will be fine for the first client, but what about the second device? Can anyone please help me to sort out this issue?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T13:13:14.980

仅当您的身份是连续整数时才适用。

如果您将 ID 字段设置为 GUID，那么您将不会遇到此问题。

# objective-c - uitable reloadData doesnt represent updated database

> ID：12324873
> 
> 赞同：0
> 
> 时间：2012-09-07T20:23:06.443
> 
> 标签：objective-c, ios, uitableview

I have a testviewcontroller which contains a UItableview based somewhat on the uitable sqlite tutorial on the net. Question that i have is when i create a new object via the appdelegate which is inserted into the database with no issues the table rows do not get updated. They will only update after the application is restarted.

This is the addNewMessageViewController which displays the form to add new items to the database - its here i would expect that after it adds the item it updates TestViewController's tabledata. Im sure it is being updated but some reason unknown to me it only refreshes the data when the app is started

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T20:36:21.963

好吧，我不知道它是否在您的代码中，但是`appDelegate.messageArray`当您添加消息或编辑它时，我看不到您在哪里更新。如果您不这样做，那么显然这就是问题所在。

# python - 在 matplot lib 中创建插图

> ID：12324877
> 
> 赞同：5
> 
> 时间：2012-09-07T20:23:25.590
> 
> 标签：python, matplotlib, insets

我在 matplot lib 中创建了一个图，我希望在该图中添加一个插图。我希望绘制的数据保存在我在其他图中使用的字典中。我在一个循环中找到了这个数据，然后我再次为子图运行这个循环。以下是相关部分：

```
leg = []     
colors=['red','blue']
count = 0                     
for key in Xpr: #Xpr holds my data
    #skipping over what I don't want to plot
    if not key[0] == '5': continue 
    if key[1] == '0': continue
    if key[1] == 'a': continue
    leg.append(key)
    x = Xpr[key]
    y = Ypr[key] #Ypr holds the Y axis and is created when Xpr is created
    plt.scatter(x,y,color=colors[count],marker='.')
    count += 1

plt.xlabel(r'$z/\mu$')
plt.ylabel(r'$\rho(z)$')
plt.legend(leg)
plt.xlim(0,10)
#Now I wish to create the inset
a=plt.axes([0.7,0.7,0.8,0.8])
count = 0
for key in Xpr:
    break
    if not key[0] == '5': continue
    if key[1] == '0': continue
    if key[1] == 'a': continue
    leg.append(key)
    x = Xpr[key]
    y = Ypr[key]
    a.plot(x,y,color=colors[count])
    count += 1
plt.savefig('ion density 5per Un.pdf',format='pdf')

plt.cla() 
```

奇怪的是，当我尝试移动插入位置时，我仍然得到以前的插入（来自上一次运行代码的那些）。`a=axes([])`我什至试图在没有任何明显的情况下注释掉该行。我附上示例文件。为什么会这样？![歪输出图](../Images/e95e64df327fe79a5f88f2172fabd303.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-08T17:08:53.393

简单的答案是您应该使用`plt.clf()`它来清除图形，而不是当前轴。插入循环中还有一个`break`，这意味着这些代码都不会运行。

当您开始做比使用单轴更复杂的事情时，值得切换到使用 OO 接口来`matplotlib`. 一开始可能看起来更复杂，但您不再需要担心`pyplot`. 您的代码可以重写为

```
fig = plt.figure()
ax = fig.add_axes([.1,.1,.8,.8]) # main axes
colors=['red','blue']
for key  in Xpr: #Xpr holds my data
    #skipping over what I don't want to plot
    if not key[0] == '5': continue 
    if key[1] == '0': continue
    if key[1] == 'a': continue
    x = Xpr[key]
    y = Ypr[key] #Ypr holds the Y axis and is created when Xpr is created
    ax.scatter(x,y,color=colors[count],marker='.',label=key)
    count += 1

ax.set_xlabel(r'$z/\mu$')
ax.set_ylabel(r'$\rho(z)$')
ax.set_xlim(0,10)
leg = ax.legend()

#Now I wish to create the inset
ax_inset=fig.add_axes([0.7,0.7,0.3,0.3])
count =0
for key  in Xpr: #Xpr holds my data
    if not key[0] == '5': continue
    if key[1] == '0': continue
    if key[1] == 'a': continue
    x = Xpr[key]
    y = Ypr[key]
    ax_inset.plot(x,y,color=colors[count],label=key)
    count +=1

ax_inset.legend() 
```

# mysql - Mysql根据select -option标签检索数据

> ID：12324879
> 
> 赞同：0
> 
> 时间：2012-09-07T20:23:35.687
> 
> 标签：mysql, select, option

我正在尝试制作一个房地产网站，但我在搜索表单方面遇到了一些困难。

该表单有 5 个字段：price_from；price_to; number_rooms、位置和 numb_square_meters。数据库有 5 列：id、price、location、numb_square_meters、number_rooms。

对于价格字段，我使用输入类型字段。对于 numb_rooms，我使用带有选项的选择类型字段，例如（维拉、公寓、4 卧室公寓......类似的东西和所有选项选项）。对于 location 和 square_meters 与 numb_rooms 的方法相同。

问题是这实际上不止一个：

1.  当我在表单的位置字段中选择选项“所有选项”时，如果不检索其他选项之一，我希望它从 SQL 数据库中检索每个位置

2.  如果假设用户填写了价格字段，但其他字段仍然选择了 ALL OPTIONS 选项，我希望它只检索该价格范围内的行，无论房间的位置数还是平方米

这是我的代码的一部分......

```
 <form method="post" action="index.php" enctype="multipart/form-data">
 <input type="hidden" name="id">
 Price <input type="text" name="price">
 Price2 <input type="text" name="price2" />

 Square_meters<input type="text" name="Square_meters">

  Location<select name="Location">
 <option>All options</option>
 <option>Bucuresti</option>
 <option>Iasi</option>
 <option>Brasov</option>
 <option>Focsani</option>     
  </select>
    Numb_rooms<select name="Numb_rooms">
 <option>All options</option>
 <option>Garsoniera</option>
 <option>2 Camere</option>
 <option>3 Camere</option>
  <option>4 Camere</option>
 <option>Vila</option>     
 </select>
   <input type="submit" name="send" value="Search">
  </form>
<?php
 header("content-type: image.jpg");

  if(isset($_POST['send']))
  {
   require_once("conexiune.php"); (this is my conect to sql database script)
  $id = $_POST['id'];
  $price = $_POST['price'];
  $price2 = $_POST['price2'];
  $square_m = $_POST['Square_meters'];
  $location = $_POST['location'];
  $numb_rooms = $_POST['Numb_rooms'];
   $selectie = mysql_query("SELECT * FROM apartamente WHERE id = '$id' && Pret>='$price'&& Pret<='$price2' && Location = '$location' &&     Square_meters='$Square_meters' && Numb_rooms = '$Numb_rooms ' ");

  while($row = mysql_fetch_array($selectie,MYSQL_ASSOC))
      {

      print"<tr><td>"; 
      print $row['id']; 
      print"</td><td>"; 
      print $row['Pret'];
      print"</td><td>";
      print $row['Nr_camere'];
      print"</td><td>";
      print $row['Suprafata'];
      print"</td><td>";
      print $row['Locatie'];
      print"</td><td>";
      print $row['Descriere'];
      print"</td><td>"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T20:33:04.010

忽略您为 SQL 注入攻击留下广泛选择的事实，您可以执行以下操作：

```
$selectie = mysql_query("SELECT * FROM apartamente WHERE id = '$id' 
       && Pret>='$price'&& Pret<='$price2'" . ($location == "ALL OPTIONS" ? "" : " 
       && Location = '$location'") . ($Square_meters == "ALL OPTIONS" ? "" : " 
       && Square_meters='$Square_meters'") . ($Numb_rooms == "ALL OPTIONS" ? "" : " 
       && Numb_rooms = '$Numb_rooms '")); 
```

# c++ - 在 Ada95 中跨共享库/对象共享数据

> ID：12324880
> 
> 赞同：3
> 
> 时间：2012-09-07T20:23:39.147
> 
> 标签：c++, shared-libraries, ada, gnat

好的，这会很长，我提前为此道歉。=)

**我需要指出的是，这里使用的代码很遗憾与实际生产代码不完全匹配，出于保密原因，而是为了说明问题、一些经过测试的解决方案以及方便讨论而构建的。在概念层面上，它已经足够相似了，尽管一切都被剥离和简化了。数据保护虽然在现实中是必要的，但在这里却被忽略了。**

## 问题

我们有一个共享对象“data_provider”，它是从 Ada 代码生成的。Data_provider 有一个内部数据记录，我们需要从许多共享对象“data_user”1 到 n 访问它，这些共享对象也是从（不同的）Ada 代码生成的。这些共享包含类型定义的 Ada 规范，但本质上，出于（有效；估计和基准）性能原因，数据需要跨共享对象边界共享，最好没有不必要的复制。

这些共享对象在编译时或运行时通过 libdl 链接到 c++ 主程序（此处称为“包装器”）（这还不是一成不变的），因此解决方案需要以任何一种方式工作。我应该补充一点，如果数据也可以从 c++ 端检查，这将是有益的，即使我们在那里没有完整的类型 def 可用。

代码可能需要通过 Ada95 编译，尽管 -05*可能会*在紧要关头工作。-12 不在讨论范围内。平台是 RHEL5 上的 GNAT。

## 我试过的东西

目前，一个“可行”的解决方案是简单地获取数据记录的地址，将其传递给包装器，将其传递给 data_user 对象，在那里转换地址->访问，并将指针数据复制到内部对象中。这是下面示例代码中实现的方法。不过，额外的副本可能是性能方面的问题。

另一种“有效”的测试方法是简单地让 data_provider 导出变量，而 data_users 导入相同的变量，但这要求它们都在编译时链接，并且它还全局公开数据，这让我感觉比较脏，更别提脆了。

我相信`for data'address use addr`条款需要在制定时知道地址，因此不起作用..？

其他一些事情已经尝试并被丢弃，但我现在将它们从桌面上搁置一旁。

我希望，结合下面的代码足以得到一些建议；我全是耳朵。如果有什么需要澄清的，请询问。=)

实际上，我宁愿希望我只是愚蠢并在这里遗漏了一些明显的东西。而且我确实意识到这整个混乱并不完全符合良好的编码实践，在 Ada 或其他方面，但我仍然有点坚持它。

### 包装器.cpp

```
extern "C"  {
    void update_data( int fa, int fb );
    int get_address( void );
    void set_address( int addr );
    void handle_new_data( void );
}

int main( int argc, char** argv ) {
    int addr;
    addr = get_address();
    set_address( addr );
    for (int i = 0; i < 42; i++) {
        update_data( i, -i );
        handle_new_data();
    }
} 
```

### data_types.ads

```
package data_types is

    -- dummy data type
    -- SIMPLIFIED from actual use case
    type data_t is
        record
            field_a : integer := 16#c0ffee#;
            field_b : integer := 16#c0ffee#;
        end record;

    for data_t use
        record
            field_a at 0 range 0..31;
            field_b at 4 range 0..31;
        end record;

    type data_t_ptr is access data_t;

end data_types; 
```

### data_provider.ads

```
with    system,
        data_types;
use     system,
        data_types;

package data_provider is
    -- update internal data structure
    -- SIMPLIFIED from actual use case
    procedure update_data
        (   fa : in integer;
            fb : in integer );
    pragma export_procedure
    (   internal => update_data,
        external => "update_data" );

    -- return address to record containing data
    function get_address return system.address;
    pragma export_function
    (   internal => get_address,
        external => "get_address" );

    -- 'dummy' data; this needs to be passed to data_user
    data : data_t;

end data_provider; 
```

### data_provider.adb

```
with    system;
use     system;

package body data_provider
is
    procedure update_data
        (   fa : in integer;
            fb : in integer )
    is
    begin
        data.field_a := fa;
        data.field_b := fb;
    end ;

    function get_address return system.address
    is
    begin
        return data'address;
    end;

end data_provider; 
```

### data_user.ads

```
with    system,
        data_types;
use     system,
        data_types;

package data_user
is
    -- set address for the data record
    procedure set_address
        (   addr : system.address );
    pragma export_procedure
        (   internal => set_address,
            external => "set_address" );

    -- use the new data in internal data structure
    -- SIMPLIFIED from actual use case
    procedure handle_new_data;
    pragma export_procedure
        (   internal => handle_new_data,
            external => "handle_new_data" );

    -- 'dummy' data; this needs to be passed from data_provider
    data : data_t;

end data_user; 
```

### 数据用户.adb

```
with    system,
        unchecked_conversion,
        data_types;
use     system,
        data_types;

package body data_user
is

    function to_ptr is new unchecked_conversion
        (   source => system.address,
            target => data_t_ptr );

    -- set address for the data record
    procedure set_address
        (   addr : system.address )
    is
        ptr : data_t_ptr;
    begin
        ptr := to_ptr( addr );
        data := ptr.all;
    end;

    -- use the new data in internal data structure
    -- SIMPLIFIED from actual use case
    procedure handle_new_data
    is
    begin
        null;
    end;

end data_user; 
```

## TLDR

用 Ada 编写并从 C++ 外部调用的多个共享库需要访问存储在 Ada 记录中的相同数据，最好不进行复制。我怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-07T22:03:29.300

数据被复制给用户的唯一地方是`Data_User.Set_Address`. 调用`Data_Provider.Update_Data`更改副本`Data_Provider`但对任何用户都没有影响。

为什么不`Set_Address`存储指针然后`Handle_New_Data`读取它？

```
package data_user
is

   --  as before

   data_ptr : data_t_ptr;

end data_user;

.......
package body data_user
is

   .....

   -- set address for the data record
   procedure set_address
     (   addr : system.address )
   is
   begin
      data_ptr := to_ptr( addr );
   end;

   procedure handle_new_data
   is
   begin
      -- work with data_ptr.all
   end;

end data_user; 
```

顺便说一句，您应该使用`System.Address_To_Access_Conversions`而不是`Unchecked_Conversion`用于这项工作。

# c# - 为什么 Enum.Parse() 返回对象？

> ID：12324883
> 
> 赞同：15
> 
> 时间：2012-09-07T20:23:54.377
> 
> 标签：c#, enums

这里有很多关于将字符串转换为枚举值的问题。一般来说，答案看起来像[这个问题](https://stackoverflow.com/q/16100/298754)的答案：

```
StatusEnum MyStatus = (StatusEnum) Enum.Parse( typeof(StatusEnum), "Active", true ); 
```

虽然这是一个完全合理的答案，并且您可以编写一个方法来简化调用，但它不能回答**为什么**Enum.Parse() 返回 an`object`而不是适当的枚举值的问题。为什么我必须将其转换为`StatusEnum`？

* * *

**编辑：**

基本上，问题是为什么像这样的函数不是 Enum 类的一部分？

```
 public static T Parse<T>(string value) where T: struct 
    {
        return (T)Enum.Parse(typeof (T), value);
    } 
```

此功能运行良好，完全符合您的预期。 `StatusEnum e = Enum.Parse<StatusEnum>("Active");`.

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-07T20:25:25.527

它这样做是因为

1.  它早于泛型并且（即使它没有:)
2.  泛型约束不能是枚举（在主流 .NET 语言中）

因此，`Object`它是唯一一种始终适用于任何类型的`enum`.

通过返回对象，API 至少可以正常工作，即使需要强制转换。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-07T21:09:17.597

但是 TryParse 确实支持类型参数：

`Enum.TryParse<FooEnum>(name, true, out ret);`

因此，如果您将输出值 ret 指定为`FooEnum ret;`，则无需在`FooEnum`之后将其转换为 a ；它将立即成为正确的类型。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-07T20:25:37.417

对象的实际类型确实是`StatusEnum`. 编译器和代码在编写时`Enum.Parse`不知道在编写方法时该运行时对象将是什么。在实际调用该方法之前不会知道它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-02-04T10:15:40.107

.NET Core 2.0-3.1 和 .NET 5 都支持 Enum.Parse，如你所愿

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-12-07T17:55:59.407

一种解决方案可能是使用静态扩展方法。

```
public static class StringExtensions
{
    public static T ParseEnum<T>(this string t) where T: struct 
    {
        return (T)Enum.Parse(typeof (T), t);
    }
}

...

var EnumValue = "StringValue".ParseEnum<MyEnum>(); 
```

# java - 是否可以在通知窗口（Android）上制作动画图标

> ID：12324885
> 
> 赞同：3
> 
> 时间：2012-09-07T20:24:04.093
> 
> 标签：java, android, statusbar, android-notifications

我做了一些研究，发现扩展状态栏区域可以有一个进度条，但我仍然不确定动画图标是否可能。我已经尝试过这个问题的答案：[通知栏自定义视图中的动画](https://stackoverflow.com/questions/4688052/animation-in-notification-bar-cutsom-view)。但是，该图标不是动画的。如果不可能，您能否指出任何证实这一点的文件？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T21:50:56.843

您引用的问题中的视频（我承认我没有看到与我提供的链接之一相同）清楚地显示了一个动画图标。大约在 0 点 35 分。 [http://www.youtube.com/watch?v=yNcs-sS2nFU&t=0m32s](http://www.youtube.com/watch?v=yNcs-sS2nFU&t=0m32s)（此链接跳转到该部分）。箭头有一条小黑线反复向下移动。对我来说似乎是动画。那是你要的吗？

无论如何，那是什么Android版本？也许这是 T-Mobile 定制的东西，我不知道，它只是 YouTube 上的一些视频。

您可以为通知创建自定义视图，例如：[http](http://www.roman10.net/android-custom-notification-with-progress-bar/) ://www.roman10.net/android-custom-notification-with-progress-bar/ 您也许可以对[动画可绘制](https://stackoverflow.com/questions/4688052/animation-in-notification-bar-cutsom-view)使用类似的想法（相同再次提问）Roman10 的默认 android 图像在哪里。

```
RemoteViews contentView = new RemoteViews(getPackageName(), R.layout.noti);
contentView.setImageViewResource(... your animated resource ...); 
```

**编辑**

因此，据我所知，最终 RemoteViews 不支持图像资源中的动画。但我想出了一种解决方法，它可能很昂贵，但我还没有分析它来查看 CPU 的使用情况。

我从 roman10 的代码开始（上面的链接）并进行了一些修改。

yinyangAnim.xml + 动画帧 .png 文件

```
<?xml version="1.0" encoding="utf-8"?>
<animation-list xmlns:android="http://schemas.android.com/apk/res/android" android:oneshot="false">
    <item android:drawable="@drawable/yinyang0" android:duration="150" />
    <item android:drawable="@drawable/yinyang1" android:duration="150" />
    <item android:drawable="@drawable/yinyang2" android:duration="150" />
    <item android:drawable="@drawable/yinyang3" android:duration="150" />
    <item android:drawable="@drawable/yinyang4" android:duration="150" />
    <item android:drawable="@drawable/yinyang5" android:duration="150" />    
</animation-list> 
```

将另一个线程创建添加到开始按钮单击：

```
 new Thread(new Runnable() {
                    public void run() {
                        int frameIndex = 0;
                        mRun = true;
                        while (mRun) {
                            ++frameIndex;
                            SystemClock.sleep(100);
                            BitmapDrawable frame = (BitmapDrawable) yinyangAnimation.getFrame(frameIndex);
                            noti.contentView.setImageViewBitmap(R.id.status_icon, frame.getBitmap());
                            nm.notify(STATUS_BAR_NOTIFICATION, noti);
                            if (frameIndex >= yinyangAnimation.getNumberOfFrames()-1) {
                                frameIndex = 0;
                            }
                        }

                    }
                  }).start(); 
```

添加到 ProgressBarNotificationActivity.onCreate()

```
 ImageView yinyang = new ImageView(this);
     yinyang.setBackgroundResource(R.drawable.yinyang_anim);
     yinyangAnimation = (AnimationDrawable) yinyang.getBackground(); 
```

当然还有私有变量：`private AnimationDrawable yinyangAnimation;`

按下应用程序中的开始按钮并查看通知会为我显示旋转的阴阳。我在 loadinfo.net 获得了 yin-yang 并使用 ImageMagick 命令行 (ubuntu) 将其拆分。

# c# - C#，FormBorderStyle：无恢复问题

> ID：12324887
> 
> 赞同：4
> 
> 时间：2012-09-07T20:24:11.457
> 
> 标签：c#, windows, winforms, minimize

我有一个应用程序使用 FormBorderStyle 设置为“无”的表单。

这样做的问题是，如果用户点击“显示桌面”按钮（有效地最小化所有打开的窗口），然后从任务栏中恢复其中一个表单，则所有无边框表单都将恢复。

注意：如果在单击“显示桌面”按钮之前将表单显式最小化（即 WindowState = FormWindowState.Minimized），则会导致该特定表单的预期行为。

另请注意，常规表单甚至没有边框的 WPF 窗口都不是这种情况。

Form.Designer.cs：

```
this.FormBorderStyle = System.Windows.Forms.FormBorderStyle.None; 
```

表格.cs：

```
private void MinimizeButton_Click(object sender, EventArgs e)
{
    // If minimized explicitly, form behaves appropriately
    WindowState = FormWindowState.Minimized;
} 
```

关于为什么会这样/如何解决它的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T05:11:08.670

我相信这只是默认行为，因为不应该最小化无边框形式。

看看[这篇](https://stackoverflow.com/questions/5180609/how-to-minimize-form-from-taskbar)文章。希望它能帮助您更改此默认行为。

从帖子（添加到表格）：

> ```
> const int WS_MINIMIZEBOX = 0x20000;
> const int CS_DBLCLKS = 0x8;
> protected override CreateParams CreateParams
> {
>     get
>     {
>         CreateParams cp = base.CreateParams;
>         cp.Style |= WS_MINIMIZEBOX;
>         cp.ClassStyle |= CS_DBLCLKS;
>         return cp;
>     }
> } 
> ```

# python - 简单的 Python HTTP Post 不接受参数……是服务器端阻止了我吗？

> ID：12324894
> 
> 赞同：0
> 
> 时间：2012-09-07T20:24:35.637
> 
> 标签：python, web-scraping, httplib

我在尝试为 Minecraft 服务器站点编写基本的网络爬虫时遇到了一些麻烦。我对 python 很陌生（但精通 C/java/.net），似乎无法让这该死的东西正常工作。

我试图达到

```
amishsmp.net/player.php?playerName=Leth 
```

以下代码在成功到达和从站点抓取的范围内起作用。但是返回的页面是一个错误，指出没有提供 playerName。所以参数没有正确附加一定有问题吗？

我已经尽可能多地尝试修复它。有什么建议么？

```
import httplib, urllib

params = urllib.urlencode({'playerName':'Leth'})
headers = {"Content-type": "application/x-www-form-urlencoded","Accept": "text/plain"}
conn = httplib.HTTPConnection("amishsmp.net")
conn.request("GET", "/player.php", params, headers)
response = conn.getresponse()

print response.status, response.reason
print "####################"
data = response.read()
print data
conn.close() 
```

编辑：在不使用参数的情况下这样做确实有效......但我不觉得应该这样做：

```
conn.request("GET", "/player.php?playerName=Leth") 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T21:05:56.257

看起来我会接受我所做的编辑。事实证明，这个站点经过了极大的优化，将服务器上的每个用户都引入了单个用户页面的源代码（1.5mb html 文件）

# jquery - 使用 jQuery 验证引擎定位

> ID：12324895
> 
> 赞同：1
> 
> 时间：2012-09-07T20:24:37.213
> 
> 标签：jquery, jquery-validation-engine

我正在使用一个名为 jQuery Validation Engine 的插件，但我很难找到任何支持我的问题。

当字段留空时，引擎基本上会在我的表单上创建一个工具提示。我一切正常，我只是想正确定位它。

[JS fiddle](http://jsfiddle.net/KtyyQ/3/)显示表单代码和内联脚本，完整的 JS 文件和 CSS 链接在 JSFiddle

该插件可以在[这里找到。](http://www.position-absolute.com/articles/jquery-form-validator-because-form-validation-is-a-mess/)[可以在此处](http://www.jamesperrett.co.uk/testsite/js/jquery.validationEngine.js)（通过我正在使用它的网站） 找到 jQuery，也可以在[此处](http://www.jamesperrett.co.uk/testsite/js/jquery.validationEngine-en.js)找到 jQuery 。CSS 文件可以在[这里](http://www.jamesperrett.co.uk/testsite/css/validationEngine.jquery.css)找到。

文档指出您可以使用一些预设值（右上角、右下角、左上角等）进行定位。我正在使用右上角。

基本上我需要弄清楚如何稍微移动定位。定位工作正常，但由于我的图形更改为使箭头位于中心，它看起来不正确。

我正在努力找出 topRight 属性是如何设置的，以及如何将它微调几个像素以使其到达我需要的位置。

任何有更好眼睛的人都可以看看他们是否可以为我指明正确的方向吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T21:26:36.600

看起来工具提示 div 由 css 中的此类控制：

（位于：[http](http://www.position-relative.net/creation/formValidator/css/validationEngine.jquery.css) ://www.position-relative.net/creation/formValidator/css/validationEngine.jquery.css 或您当地的同等机构。）

```
.formError .formErrorContent {
    width: 100%;
    background: #ee0101;
    position:relative;
    color: #fff;
    width: 150px;
    font-size: 11px;
    border: 2px solid #ddd;
    box-shadow: 0 0 6px #000;
    -moz-box-shadow: 0 0 6px #000;
    -webkit-box-shadow: 0 0 6px #000;
    padding: 4px 10px 4px 10px;
    border-radius: 6px;
    -moz-border-radius: 6px;
    -webkit-border-radius: 6px;
} 
```

用你自己的覆盖这个 css 类中的值应该可以让你用工具提示做几乎任何你想做的事情：颜色、定位等。例如：解决定位问题可以通过在覆盖中添加边距来完成（如果不适合您的需要，可以更改过度选择器）：

```
 fieldset .formError .formErrorContent {
    margin-bottom: 10px;
} 
```

这会将整个工具提示向上移动 10 个像素。

我希望这对您的问题有帮助！

# php - Php 静态类在每次使用时都会不断重新初始化

> ID：12324900
> 
> 赞同：1
> 
> 时间：2012-09-07T20:24:59.600
> 
> 标签：php

我对 PHP 很陌生，所以这可能是一个愚蠢的问题。我目前正在尝试为我的应用程序构建日志记录功能，并且我希望我使用的记录器只被实例化一次以使整个事情更快（即，而不是为我进行的每个日志调用实例化一个新的记录器） . 我已经阅读了 Php 中的 Singletons 是如何糟糕的，并且由于静态的东西更容易使用并获得更好的基准，我基本上可以将类设为静态。这是我当前的代码：

```
use Fluent\Logger\FluentLogger;

class Logger
{
    private static $_fluentLogger;
    private static $_initialized;

    public static function getLogger()
    {
        if (!isset(self::$_initialized)) 
        {
            Fluent\Autoloader::register();
            self::$_fluentLogger = new FluentLogger("localhost","34567");
            self::$_initialized = true;
            self::$_fluentLogger->post("debug.test",array("initializing"=>"true"));
        }
        return self::$_fluentLogger;
    }
} 
```

然后调用这个东西，我这样做：

```
$logger = Logger::getLogger();
self::$_fluentLogger->post("debug.test",array("real_post"=>"true")); 
```

我的问题是，每次我通过执行上述操作调用要发布的内容时，我都可以看到它还写出“initializing”=>“true”消息（即每次都重新初始化记录器）。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T20:48:15.817

PHP 不会在会话之间保持状态。如果您想拥有该功能，请使用**[SESSION 变量](http://il.php.net/manual/en/book.session.php)**。

# javascript - IE7 preventDefault() 不适用于跳过链接

> ID：12324913
> 
> 赞同：0
> 
> 时间：2012-09-07T20:26:21.053
> 
> 标签：javascript, jquery, internet-explorer-8, internet-explorer-7

我目前有跳转到 div id 的跳过链接，并且在跳转到元素时使用 e.preventDefault() 来阻止 url 更改，但在 IE7 和 IE8 中，使用 e.preventDefault() 并且如果我把锚标记包含引用的 div 的 url 更改取出来。他们有什么解决方法或解决方法吗？

这是代码

```
$('body').delegate('a.skiplink-accessible-text', 'click', function (e) {
    //e.preventDefault();
    if (!$.browser.msie) {
        e.preventDefault();
    }
    var jumpTo = $(this).attr('href');
    $('body').find(jumpTo).attr('tabindex', - 1).focus();

}); 
```

编辑：这是一个用于测试目的的小 jsbin 示例 [http://jsbin.com/welcome/20846/edit](http://jsbin.com/welcome/20846/edit)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T21:05:29.520

使用`delegate`. 我把它切换到`On`它现在似乎正在工作。代表在 IE 8 中抛出脚本错误，这可能是一个 jquery 错误。

```
$(document).ready(function(){
  $('a').on('click', function(e){
    e.preventDefault();
    var jumpTo = $(this).attr('href');
    $(jumpTo).attr('tabindex', '-1').focus();
  });
}); 
```

[http://jsbin.com/epabac/6/edit](http://jsbin.com/epabac/6/edit)

编辑：委托引发错误，因为您错误地使用了委托。 `On`仍然是 Jquery 1.7+ 的首选方式。delgate 的正确用法应该是：

```
$('body').delegate('a', 'click', function(e){ // ...  
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T20:42:00.140

如果您的事件对象是 jquery 事件对象，e.preventDefault() 将在 IE 中工作。jquery 中用于防止默认值的下划线代码使用此代码片段中所见的特征检测为您处理此问题（取自 jQuery）

```
preventDefault: function() {
    this.isDefaultPrevented = returnTrue;

    var e = this.originalEvent;
    if ( !e ) {
        return;
    }

    // if preventDefault exists run it on the original event
    if ( e.preventDefault ) {
        e.preventDefault();

    // otherwise set the returnValue property of the original event to false (IE)
    } else {
        e.returnValue = false;
    }
}, 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T20:31:04.937

在 IE 中尝试`e.returnValue = false;`

```
$('body').delegate('a.skiplink-accessible-text', 'click', function (e) {

    if (!$.browser.msie) {
        e.preventDefault();
    } else {
        e.returnValue = false;
    }

    var jumpTo = $(this).attr('href');
    $('body').find(jumpTo).attr('tabindex', - 1).focus();

}); 
```

# iphone - 我应该如何在 Iphone 设计多步注册表单的视图

> ID：12324914
> 
> 赞同：4
> 
> 时间：2012-09-07T20:26:24.553
> 
> 标签：iphone, view

我正在 iphone 设计注册表，但我对最佳方法感到困惑。

我不确定我应该如何设计视图以获得最佳方法？

我的想法， - 设计每一步新的视图控制器并在用户单击下一步时推送下一个视图控制器。- 设计每一步的新视图，并在用户单击下一步时设置 hidden=NO 下一个视图，并为当前视图设置 hidden=YES。

最后，第二种方法似乎更有效，但 Interface Builder 在设计时似乎没有太大帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T21:05:02.333

同意你的问题，这是一个很难决定的问题。我将替代方案总结为与一个 vc 内的注册步骤相对应的多个视图，或者一个容器 vc 呈现许多 vcs，其中每个 vc 都执行一个 reg 步骤。

第一种（1 vc，许多视图）的另一种选择是将许多视图放在启用分页的大型 uiscrollview 中。

我不认为有一个硬性和快速的答案，但我对 reg 交互的偏好是单个 vc。用户可能将 reg 理解为包含子步骤的单个步骤，而不是应用程序的不同部分（这是 vc 推送转换，imo 所暗示的）。

不过你是对的，IB 让设计变得很尴尬。我已经通过两种方式处理了这个挑战：1）只是处理它，包括重新排序 ib 中的视图，以便您可以处理最上面的一个 2）为每个视图构建 nib。将它们全部加载到单个 vc 的 viewDidLoad 上。用代码框住它们

对于这些观点，我推荐想法二。祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T20:42:17.017

我认为最好的方法是使用 UINavigationController。在故事板中设置非常简单，并且可以让您轻松地在多个视图控制器之间来回导航。

> 导航控制器>>FirstView>>SecondView>>ETC,ETC

用户可以在表单的不同部分之间自由移动，最后，为您处理后退操作，您所要做的就是使用：

```
UIViewController *myController = [self.storyboard instantiateViewControllerWithIdentifier:@"someID"];
[self.navigationController pushViewController:myController animated:YES]; 
```

![在此处输入图像描述](../Images/39bcf68ddcb534deee539c9378265545.png)

# html - 列出具有相同高度的项目

> ID：12324917
> 
> 赞同：12
> 
> 时间：2012-09-07T20:26:47.307
> 
> 标签：html, css

我创建了一个小提琴：http: [//jsfiddle.net/pQZ8f/](http://jsfiddle.net/pQZ8f/)

我想让两个列表项的高度相同，而无需手动设置高度。我希望它自动增长。我不想使用 javascript。可以通过css完成吗？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-09-07T20:38:16.843

看来您正在寻找表格布局，所以最好的选择可能是使用 a`<table>`而不是浮动`<li>`元素。

也就是说，您还可以在元素上指定表格样式：

```
ul {
    display: table-row;
}

li {
    width: 100px;
    border: 1px solid black;
    display: table-cell;
} 
```

这应该适用于大多数现代浏览器。[你会在这里](http://jsfiddle.net/pQZ8f/2/)找到一个更新的小提琴。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-09-07T20:47:26.103

啊，老相同高度的柱子问题。

一种解决方案是用底部边距/填充放屁。

在 IE7+ 中工作（甚至可以使用 ie6，我没有安装它）

```
ul {
    overflow: hidden;
    border: 1px solid black;
    float: left;
}
li {
    float:left;
    width:100px;
    background: red;
    padding-bottom: 10000px;
    margin-bottom: -10000px;
}
li + li {
    border-left: 1px solid black;
} 
```

**[JSfiddle 演示](http://jsfiddle.net/isherwood/pQZ8f/593/)**

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2018-01-20T11:03:57.463

现在是 2018 年，我们有 display: flex，支持 97.66% 的浏览器 ( [https://caniuse.com/#feat=flexbox](https://caniuse.com/#feat=flexbox) )

使用 flexbox，您需要做的就是：

```
ul {
  display: flex;
}

li{
 width:100px;
 border: 1px solid black;   
} 
```

这是小提琴：http: [//jsfiddle.net/pQZ8f/1076/](http://jsfiddle.net/pQZ8f/1076/)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-08-05T01:12:26.260

您可以在 LI 元素上使用： **display: inline-table**

```
li {
    width:100px;
    background: red;
    display: inline-table
} 
```

这是[JSFiddle](http://jsfiddle.net/pQZ8f/823/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-07T20:55:02.323

这取决于您*为什么*希望它们具有相同的高度：您要达到什么样的整体效果？

一种选择：如果您只是想匹配背景或其他东西，您可以将背景放在's 上`<ul>`而不是`<li>`'s 上，并且`<ul>`将自动扩展到其子元素的最大高度。

此外，如果您试图使它们具有相同的高度以便对齐文本的*底部*，则可以组合`display: inline-block`而不是`float`, 和`horizontal-align: bottom;`. 这个[Fiddle](http://jsfiddle.net/pQZ8f/15/)中的结果让你得到的东西至少*看起来*像`<li>`'s 的高度相同，但不适用于边框。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-03-13T13:27:11.320

```
ul 
{
  display: table;
}

li
{
  display:table-cell;   
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-01-20T10:56:06.213

列表设置为表格，它将包含表格属性。对于列表项，当您设置表格单元格时，它们将获得表格单元格属性，默认情况下，所有表格单元格都将获得相同的高度。

```
<!--SCSS-->
.list {
     display: table;

    .list-item {
       display: table-cell;
    }
}

<!--html-->
<ul class="list">
    <li class="list-iteam">
        <h1>Heading</h1>
        <p>Details in text</p>
    </li>
    <li class="list-iteam">
        <h1>Heading 2</h1>
    </li>
    <li class="list-iteam">
        <h1>Heading 2</h1>
        <p>this is text this is text this is text this is text this is text this is text this is text this is text this is text this is text this is text this is text this is text this is text this is text this is text this is text this is text this is text this is text </p>
    </li> 
</ul> 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-03-14T10:36:27.933

为此，我使用 jquery.matchHeight.js 库。为所有**li**元素添加**class ="frame-height"**，使所有**li元素与最高****li**元素的高度相同。

# php - php变量obj转js

> ID：12324918
> 
> 赞同：0
> 
> 时间：2012-09-07T20:26:57.990
> 
> 标签：php, javascript, arrays, object

我正在使用代码点火器。这是我在 obj 数组中查询结果的 php 代码，那么我如何将它们传递给 js。我想在谷歌地图中使用它

```
 <?php
    foreach ($query->result() as $row)
    {
        $lat = $row->geo_lat;
        $lng = $row->geo_lng;
        $pic = $row->picture;
        echo $lat;
        echo $lng;
        echo "<img src=\"" . base_url() . $pic . "\"/><br />";
        //echo json_encode($row);
        //echo "<pre>";
        //echo print_r($row);
    }
?> 
```

js代码

```
var locations = ?????????;
var marker, i;
  for (i = 0; i < locations.length; i++) { 
    marker = new google.maps.Marker({
      position: new google.maps.LatLng(locations[i][0], locations[i][1]),
      map: map,
      draggable: true
    });
  } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T20:38:42.290

您可以在有或没有 ajax 的情况下使用它。

您可以使用 json_encode() 简单地将整体`result`以 json 格式添加到 js 变量中，例如：

```
<script>
    var js_obj=<?php echo  json_encode($result); ?>
  /* now you can access this json object that is in js_obj variable and acccess any thing you want using dot operator.*/
</script> 
```

你的问题不是很清楚，所以如果你在某种不同的意义上问，那么请清楚，以便我可以专注于实际问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T20:31:29.587

您需要使用*AJAX*让您的 JS 代码请求 PHP 页面。PHP 页面将处理请求，并以 JSON 格式返回适当的数据（`json_encode()`在结果对象上使用）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T20:41:01.233

您可以使用 PHP 发出 Javascript...为什么不直接对所有结果进行 JSON 编码并将它们存储在您的`locations`变量中，如下所示：

```
<?php 
    echo( "<script>" );
    echo( "  var locations = " + json_encode($query->result()) + ";" );
    echo( "</script>" );
?> 
```

# iphone - 在标签栏的更多标签中使用自定义背景颜色和/或图像

> ID：12324919
> 
> 赞同：1
> 
> 时间：2012-09-07T20:27:11.493
> 
> 标签：iphone, view, colors, uinavigationcontroller, tabbar

我在导航栏中使用自定义图像（虽然纯色也可以）。我已经使用 setBackgroundImage 将图像添加到我的所有视图中，但是现在当加载更多视图时，它是蓝色的，并且看起来与其他视图不同。如何设置更多视图和相应配置视图的图像或颜色？我应该制作某种控制器吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T20:45:27.437

如果您的意思是如何将相同的图像应用于每个导航栏，则将以下内容放入您的应用程序委托`didFinishLaunchingWithOptions`方法中。

```
[[UINavigationBar appearance] setBackgroundImage:[UIImage imageNamed:@"MyImageName"] forBarMetrics:UIBarMetricsDefault]; 
```

**编辑：**将其放在第一个视图控制器的 viewDidLoad 方法中：

```
[[[self.tabBarController moreNavigationController] navigationBar] setBackgroundImage:[UIImage imageNamed:@"myImage"] forBarMetrics:UIBarMetricsDefault]; 
```

# jquery - jQuery表单验证：验证失败时返回默认输入字段标签

> ID：12324920
> 
> 赞同：0
> 
> 时间：2012-09-07T20:27:15.963
> 
> 标签：jquery, validation

我在每个输入中都有一个带有默认值的表单（例如名称、电子邮件...），当单击提交时，它成功地验证了内联，这要感谢你们迄今为止的大力帮助（这里是 jQuery 表单的新手）。

最后一个问题是，在这个表单中，如果我输入了错误的值然后点击提交，它会在每个错误输入旁边显示一个错误图标，但错误的文本仍然保留在表单中，我希望清除所有被拒绝的信息单击提交时退出（因此提醒用户在输入中键入什么信息）。

以下 jQuery 旨在解决此问题，但什么也不做。我至少在正确的道路上吗？表单中的无效字段`.incomplete`应用了类。

```
$('.incomplete').submit(function() {
        var default_value = '';
        if ($(this).text() ==  !'') {
            $(this).text = '';
            }
    }); 
```

完整表格代码： http: [//pastie.org/4681942](http://pastie.org/4681942)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T21:59:55.503

更新：

下面的这个 jquery 完成了我想要完成的工作，但它仅在第二次单击“提交”时才有效。在第一次点击时，会发生验证，第二次下面的代码将清除无效字段的值。

```
 $('#button').click(function(){
            var e = $('.incomplete').length;
            if (e) {
                $('.incomplete').val('');
            };
        }); 
```

我怎样才能让它在第一次点击时做到这两点？还更新了馅饼。

# security - 保护数据免受萤火虫改变值的特定能力

> ID：12324921
> 
> 赞同：-1
> 
> 时间：2012-09-07T20:27:16.857
> 
> 标签：security, session

我的问题是我们如何保护像 user_id 或 ordered_post_id 这样的数据？想象一下，我们有一个带有一些参数的 url，例如 user_id 等。我们可以通过读取 html 元素（< tag id="user_id" > User ID Here </tag >）使用 Dom 生成 url，但这里有一个问题！不良黑客可以使用 firebug 更改“此处的用户 ID”。

一种解决方案是使用会话存储数据，但是当一个用户单击特定按钮以生成负责处理某些逻辑任务的 URL 时，无法访问我们的数据。

如何保护数据并按需访问数据？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T20:30:56.670

您不应该相信客户发送给您的任何东西。

您应该将用户 ID 存储在您的服务器会话中，客户端只能告诉您他的会话是 #client_session （并且不要使它们相关联）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T20:40:12.940

使用`HTTPS`connection 而不是 plain `HTTP`。该 URL 将被加密，因此黑客将无法访问您的“特殊” URL 来提取数据

# java - URLConnection.getInputStream：指定字节范围开始但没有结束

> ID：12324924
> 
> 赞同：0
> 
> 时间：2012-09-07T20:27:30.617
> 
> 标签：java

我的目标是从远程服务器上的文件中仅读取从文件中特定字节位置开始的字节，而无需进行不必要的数据传输。我担心的是，在没有指定结束字节的情况下，从开始字节开始的整个文件都会在任何读取发生之前放入缓冲区。

当以这种方式指定字节范围时：

```
urlConn.setRequestProperty("Range","bytes="+byteRangeStart+"-") 
```

然后随后获得一个InputStream，该InputStream是否包含文件从byteRangeStart到文件末尾的所有字节，这意味着在获得InputStream时传输所有数据还是仅在读取InputStream时传输字节？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T20:45:50.657

要求服务器从特定位置开始不会影响 URLConnection 在客户端中的工作方式。

当您读取 URLConnection 上的 InputStream 时，数据只会在您读取时传输。当然，两端的网络缓冲区中都会有一些数据，等等，但我假设我们在这里谈论的是一个相当大的文件。

# mysql - Gwt Image Upload 和 mysql blob 存储

> ID：12324925
> 
> 赞同：0
> 
> 时间：2012-09-07T20:27:32.847
> 
> 标签：mysql, gwt, gwt-rpc, gwtupload

我已经用谷歌搜索了一段时间，但我仍然没有找到我要找的东西。

我想要做的是在我的 GWT 应用程序中设置提交表单并接收图像。将此图像发送到服务器端以将其作为 blob 存储在我的 mysql 数据库中，以便我可以访问它并稍后显示它。我一直在尝试使用 GWTUpload，它看起来非常好，但我无法更改代码以使其与 mysql 一起使用。

我是 GWT 的真正初学者，我知道这是一个很大的问题，但我会非常感谢一些正确方式的指针。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T15:44:53.867

您可以将图像存储在服务器的文件夹中，并将链接保存到 MYSQL 数据库中的文件。这也将使替换图像更容易。此外，处理文件而不是 blob 更简单。

# jquery - jquery 表行行总计和总计

> ID：12324928
> 
> 赞同：1
> 
> 时间：2012-09-07T20:27:42.720
> 
> 标签：jquery

我目前正在为计算机维修技术人员编写一个小插件，现在我正在尝试对发票部分进行编码，但运气不佳！

我已经从数据库中填充了字段，但我正在尝试使用 jquery 来更新行总计和发票总额。

这是我正在尝试做的快速图像！

![在此处输入图像描述](../Images/38b87a19b67218965e0696d9cd8f76dd.png) 我试图让它更新页面加载的总数以及单位成本和数量文本字段中的值发生变化时。

```
$(document).ready(function() {
    $("#invoiceitems tbody tr").each(function() {
        $(this).change(function() {
            updateTotal();
        });
    });
});

function updateTotal() {

    //Calculate Subtotal for each item
    var quantity = $('.quantity').val();
    var price = $('.price').val();
    var subtotal = parseInt(quantity) * parseFloat(price);
    $('.subtotal').text(subtotal);
    //Calculate Grand Total
    var sum = 0;
    $('.linetotal').each(function() {
        sum += parseFloat($(this).text());
    });
    $('#grandTotal').html(parseFloat(sum));
}​ 
```

在这里找到了这段代码，但我真的不知道，也无法让它工作！

一些指导/帮助将不胜感激！

非常感谢杰斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T20:59:14.160

以这个简单的 HTML 为例：

```
<table>
<tr>
<td>
<input type="text" name="unitCost[]" id="unitCost_1" value="15.99" class="editable"/>
</td>
<td>
<input type="text" name="quantity[]" id="quantity_1" value="1" class="editable"/>
</td>
</tr>
<tr>
<td>
<input type="text" name="unitCost[]" id="unitCost_2" value="2.50" class="editable"/>
</td>
<td>
<input type="text" name="quantity[]" id="quantity_2" value="1" class="editable"/>
</td>
</tr>
</table> 
```

我想你会想要改变你的 jQuery 看起来像这样：

```
$(document).ready(function() {
    updateTotal();

    $(".editable").live("change", function() {
        updateTotal();
    });
}); 
```

`updateTotal()`如果没有看到您的实际 HTML，很难说您的功能是否有问题

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T21:10:49.897

看起来你是一个完全的 jQuery 新手.. !! 好的开始虽然..不难拿起它..

这里 .price 、 .quantity 和 .lineTotal 对应于他们正在讨论的列的类名。grandTotal 是表中 Total 的 id。

我已经 为您尝试处理的案例提供了一个[更新的工作示例..应该是一个好的开始..](http://jsfiddle.net/sushanth009/HMsfG/2/)

但请注意我没有添加任何条件来检查用户输入是否有效......尝试在推出时添加这些条件......如果您在解码时遇到任何困难，请告诉我。

# html - 在表格中使用 div 的 html/css

> ID：12324930
> 
> 赞同：0
> 
> 时间：2012-09-07T20:28:02.173
> 
> 标签：html, css, html-table

我有一个表格单元格，我希望在单元格顶部显示一些内容，在底部显示其他内容。

我正在尝试在单元格中使用 div 来完成此操作，但它不起作用。

使用 CSS 来完成这个有限的任务也很好，但是，在 css 中重做整个页面不是一种选择，因为整个站点都以表格形式布局。

这里 jsfiddle 说明了问题：

[JSFiddle](http://jsfiddle.net/SRtXD/)

这是与 jsfiddle 相同的代码：

```
<table border="1">
    <tr>
        <td rowspan="2" valign="top">cell 1<div style="align-vertical: bottom">
            want at bottom</div>
        </td>
        <td>cell 2<br>
        <br>
        <br>
        </td>
    </tr>
    <tr>
        <td>cell 3</td>
    </tr>
</table> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T20:34:54.570

使用[this](https://stackoverflow.com/questions/311990/how-do-i-get-a-div-to-float-to-the-bottom-of-its-container)的答案，您可以了解如何将 div 放置在包含元素的底部。

你的小提琴看起来像这样：

```
<table border=1><tr><td rowspan=2 style="position:relative" valign="top">cell 1<div style="position:absolute; bottom:0">bottom</div></td><td>cell 2<br><br><br></td></tr><tr><td>cell 3</td></tr></table> 
```

请记住，您可能需要对向下浮动的 div 进行样式设置以使其看起来不错，但此解决方案将满足您声明的需求。

希望这可以帮助！

# mysql - 在mysql中用null替换0

> ID：12324931
> 
> 赞同：16
> 
> 时间：2012-09-07T20:28:08.047
> 
> 标签：mysql, sql, null

我想用'NULL'替换mysql表中的0。我已阅读以下方式查询将用 0 替换 'NULL'

```
SELECT COALESCE(null_column, 0) AS null_column FROM whatever; 
```

但是如何换一种方式呢？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-09-07T20:31:23.823

您可以使用，如果第一个参数中的值与第二个参数中的值匹配`NULLIF`，它将返回。`NULL`

```
SELECT NULLIF(null_column, 0) AS null_column FROM whatever 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-09-07T20:31:47.790

```
update `whatever` set `null_column` = null where null_column = 0; 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-09-07T20:31:13.827

只需使用`UPDATE`查询，它会更快：`UPDATE table SET value=NULL WHERE value=0`.

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-06-25T10:48:57.997

我用了

> UPDATE userDetails 设置成名 = 0 其中成名是 NULL；

如果它工作。因为`=`没有为我工作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-03-24T05:06:54.603

我一直在使用这种方法来清理各个列，但我想看看是否可以使用相同的方法更新整个表

更新表 SET 值 = NULL WHERE 值 = 0。

# javascript - 默认谷歌日历为“任务”

> ID：12324937
> 
> 赞同：0
> 
> 时间：2012-09-07T20:28:31.313
> 
> 标签：javascript, jquery, google-calendar-api

是否可以将 Google 日历上的默认点击操作更改为“任务”？当前的默认设置是设置一个我很少使用的“全天事件”。

似乎没有启用此功能的选项，所以我想知道是否可以使用 jQuery 脚本或类似的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T20:31:13.373

您可以从这里开始：[5 个用于 Google 日历的有用 Greasmonkey 脚本](http://www.makeuseof.com/tag/5-greasemonkey-scripts-enhance-google-calendar/)

在那里你可以看到 Greasemonkey 是如何工作的，以及如何从示例脚本中弄乱谷歌日历。

它需要您使用带有 Greasemonkey 插件的 Firefox，但这绝对是在您不拥有的页面上自定义 javascript 的最直接方法。

# java - 画出不断变化的画面

> ID：12324938
> 
> 赞同：0
> 
> 时间：2012-09-07T20:28:40.990
> 
> 标签：java, paintcomponent

我正在尝试对老虎机进行编程。所以，我做了一个`JPanel`，在其中我覆盖了该`paintComponent()`方法。

```
public void paintComponent(Graphics g)
{
    Graphics2D g2 = (Graphics2D)g;

    g2.drawImage(backImage, 0, 0, this.getWidth(), this.getHeight(),null); // Background
    if(slot1On) //Slot Machine
    {
        g2.drawImage(getSlot1(masterCount), 26, 50,slotSizeW,slotSizeH, null);
    }
    else
    {
        g2.drawImage(getSlot1(slot1Pos), 26, 50,slotSizeW,slotSizeH, null);
    }
    g2.setColor(Color.WHITE); // Text
    g2.setFont(new Font(lblAction.getFont().getName(),Font.BOLD,16));
    g2.drawString("Press Space to stop the wheel!", 32, 25);
    int i,j;
    for(i=0;i<3;i++) // Lines on the slot machine
    {
        g2.setColor(new Color(0,0,0,0.9f));
        g2.fillRect(27+ 12 * i + slotSizeW * i, 50 + slotSizeH/2-1, slotSizeW, 3);
        g2.fillRect(28+ 12 * i + slotSizeW * i, 50 +slotSizeH/2-4, 3,9);
        g2.fillRect(22+ 12 * i + slotSizeW * (i +1) , 50 +slotSizeH/2-4, 3, 9);
        for(j=0;j<8;j++)
        {
            if(j < 4)
            {
                g2.setColor(new Color(0,0,0,0.9f - j * 0.1f));
                g2.fillRect(26 + 12 * i + slotSizeW * i, 50 + j * 4, slotSizeW, 4); 
            }
            else
            {
                g2.setColor(new Color(0,0,0,0.9f - (8 - j) * 0.1f));
                g2.fillRect(26+ 12 * i + slotSizeW * i, 50 + slotSizeH - (8 - j) * 4,    slotSizeW, 4); 
            }
        }
    }  
} 
```

但是，只要老虎机轮子移动，我在老虎机后尝试绘制的所有内容都不会显示，如图所示：

![在此处输入图像描述](../Images/753fc8a300f97086d94ba2c8064ed99e.png)

那么，为什么它们不能正确显示呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T20:43:33.897

试试这个：

```
public void paintComponent(Graphics g)
{
super.paintComponent(g);
//the rest of your painting here
} 
```

# r - 关于两个向量的差、交和并

> ID：12324942
> 
> 赞同：3
> 
> 时间：2012-09-07T20:28:55.357
> 
> 标签：r

我有一个 csv 文件，它有两行，每一行对应一个单词列表。我将此 csv 文件读入 2*2000 矩阵，如下所示：

```
termlist = as.matrix(read.csv("termlist.csv",sep=",",header=FALSE)) 
```

现在，我想知道这两行的以下信息，第一行和第二行的交集列表；从第二行中减去此交集列表后的剩余列表。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-07T20:35:46.040

您正在寻找`intersect`和`setdiff`：

```
term.intersect <- intersect(termlist[1,], termlist[2,])
term2.diff.term1 <- setdiff(termlist[2, ], termlist[1, ]) 
```

# c++ - Boost绑定和boost函数，将带参数的函数存储在向量中，然后执行它们

> ID：12324945
> 
> 赞同：4
> 
> 时间：2012-09-07T20:28:59.567
> 
> 标签：c++, boost, boost-bind, boost-function

对不起，措辞不好的标题。

我一直在查看文档，但我找不到任何可以解决我遇到的这个问题的东西。

基本上我想`function1<void, void*>`在一个向量中存储几个，并提供参数，然后在稍后阶段执行它们。

这就是我想要完成的：

```
typedef boost::function1<void, void*> Task;

Vector<Task> mScheduledTasks;
int MyArg = 5;

void SomeTask(void* arg)
{
    // ....
}

void AddSomeTasks()
{
    // nevermind that MyArg is globally accessible
    for (int i = 0; i<5; i++)
        mScheduledTasks.push_back(boost::bind(&SomeTask, _1), (void*)&MyArg);
}

void ExecuteTask()
{
    Task task = mScheduledTasks.front();
    task();
} 
```

现在执行 task() 它希望我传递一个参数，但我在 AddSomeTasks 中传递了它？为什么不使用它？或者我误解了 boost::bind 的用法？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-07T20:44:24.600

你的`Task`类型需要一个参数，它应该是`boost::function0<void>`. 绑定参数时，返回的（绑定的）可调用对象的数量为 0，而不是 1。

此外，要绑定一个参数，您将其提供给对 的调用`boost::bind`，`_1`等是用于*未绑定*的参数，而不是您想要的。

类似（未经测试）：

```
typedef boost::function0<void> Task;

Vector<Task> mScheduledTasks;
int MyArg = 5;

void SomeTask(void* arg)
{
    // ....
}

void AddSomeTasks()
{
    // nevermind that MyArg is globally accessible
    for (int i = 0; i<5; i++)
        mScheduledTasks.push_back(boost::bind(&SomeTask, (void*)&MyArg));
}

void ExecuteTask()
{
    Task task = mScheduledTasks.front();
    task();
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-07T20:53:36.707

这取决于您何时要传递参数。该`push_back`电话混合了两种不同的概念。从消息中不清楚您是否要`MyArgs`在调用时传递`bind`，在这种情况下，您将返回一个不带参数并返回 void 的函数对象，以及是否要`MyArgs`在执行任务时传递。对于前者，正如@ForEveR 所说，正确的调用是

```
mScheduledTasks.push_back(boost::bind(&SomeTask, (void*)&MyArg)); 
```

并且您需要更改您的 typedef`Task`以便它不需要参数。如果您想在调用时将参数传递给`task`对象，那么`push_back`调用将如下所示：

```
mScheduledTasks.push_back(boost::bind(&SomeTask, _1)); 
```

这将创建一个带有函数调用运算符的函数对象，该运算符接受一个参数并返回 void。然后，您将调用更改为`task()`in`ExecuteTask`以传递您拥有的任何参数。

# opencv - 手势识别 OpenCV（用于媒体播放器）

> ID：12324947
> 
> 赞同：5
> 
> 时间：2012-09-07T20:29:01.627
> 
> 标签：opencv, media-player, tracking, emgucv, gesture-recognition

有人可以帮助我了解如何从头开始使用 OpenCV 进行手势识别吗？我们基本上是在创建一个可以通过手势运行的媒体播放器（简单的功能，如播放、暂停、音量增大/减小等）。

在访问问题中提到的链接之一后，我已经安装了 OpenCV 和 EmguCV，但我需要知道如何让网络摄像头检测我的手和手势。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T10:05:14.737

有很多关于使用 OpenCV 和 EmguCV 进行跟踪和手势识别的在线教程。我建议你在谷歌上搜索一些关于这个主题的研究论文。这些将帮助您开始使用可以使用和改进的各种解决方案。

一种方法是使用皮肤检测来分割手部，然后找到轮廓，然后是凸包。有一个名为[cvBlob](http://code.google.com/p/cvblob/)的库可以帮助您进行跟踪。要将其与媒体播放器连接，您可以使用 VLC 远程接口。

[OpenCV 文档](http://docs.opencv.org/)也是查找可能对您有所帮助的各种功能的好地方

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T04:09:36.100

我不认为 OpenCV 有一个多合一的功能可以为你“只做手部识别”。[该线程](https://stackoverflow.com/questions/4094602/current-state-of-opencv-hand-gesture-recognition)将为您提供更多信息。

如果您认真考虑使用 OpenCV 库调用构建手部跟踪系统，那么[此文档](http://opencv.willowgarage.com/documentation/structural_analysis_and_shape_descriptors.html)（尤其是[cvConvexityDefects](http://opencv.willowgarage.com/documentation/structural_analysis_and_shape_descriptors.html#cvConvexityDefects)）可能是一个不错的起点。

# ios - iOS EXC_BAD_ACCESS 错误

> ID：12324950
> 
> 赞同：1
> 
> 时间：2012-09-07T20:29:09.880
> 
> 标签：ios, exc-bad-access

我的应用程序运行良好，几分钟后，在编辑了应用程序的另一部分后，它开始从我什至没有处理的视图控制器中抛出 EXC_BAD_ACCESS 错误。我认为可能影响它的唯一一件事是，我编辑->折射->转换为 Obj-C ARC...我也只为指定的文件做了它，而不是我的整个项目令人困惑。当我相信错误开始发生时，我正在关注本教程...... [http://sonnyparlin.com/2011/12/pulltorefresh-ios-5-and-arc-tutorial/](http://sonnyparlin.com/2011/12/pulltorefresh-ios-5-and-arc-tutorial/) 此外，应用程序启动正常，它只是在崩溃时崩溃在表格视图中单击了一个单元格。任何帮助将不胜感激！

**此行发生错误：**

```
self.releaselink = [[sortedArray objectAtIndex:indexPath.row] objectForKey:@"link"]; 
```

**这是我的错误源自的代码：**

```
@implementation PressReleaseViewController

@synthesize releaselink;

UILabel *departmentNamesLabel;
CGRect *departmentNamesFrame;

- (void)viewDidLoad {

// Load path to plist and sort based on "name"

NSString *path = [[NSBundle mainBundle] pathForResource:
                  @"departments" ofType:@"plist"];
array = [[NSMutableArray alloc] initWithContentsOfFile:path];
NSSortDescriptor *descriptor = [[NSSortDescriptor alloc] initWithKey:@"name" ascending:YES];
sortedArray = [array sortedArrayUsingDescriptors:[NSArray arrayWithObject:descriptor]];
}

// How many sections are in the table

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
return 1;
}

// Set how many rows of cells are in the table

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
return [sortedArray count];
}

// Set up table view and format for cells

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
UITableViewCell* cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:nil];

// Set text for each cell

cell.textLabel.text = [[sortedArray objectAtIndex:indexPath.row] objectForKey:@"name"];

return cell;
}

// Set how tall each cell is

- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
{
return 40;
}

// Set push to new view controller

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{

self.releaselink = [[sortedArray objectAtIndex:indexPath.row] objectForKey:@"link"];

UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"MainStoryboard_iPhone" bundle: nil];
MainViewController *vc = [storyboard instantiateViewControllerWithIdentifier:@"main"];
[vc setReleaseLink:self.releaselink];
[self.navigationController pushViewController:vc animated:YES];

}

- (void)viewDidUnload {
pressReleases = nil;
[super viewDidUnload];
}
@end 
```

头文件”

```
@interface PressReleaseViewController : UITableViewController {

IBOutlet UITableView *pressReleases;
NSArray *array;
NSArray *sortedArray;
NSString *releaselink;

}

@property (nonatomic, retain) NSString *releaselink;

@end 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-07T20:42:19.660

`EXC_BAD_ACCESS`当您的应用程序尝试访问已释放的对象时会发生错误。如果问题是在您将项目转换为 ARC 之后发生的，那么某个地方会发出 Zealous 发布调用（代表 ARC）。尝试为你的类创建`sortedArray`一个**强大**的属性，并将变量设置为：

```
self.sortedArray = [array sortUsingDescriptor:...]; 
```

那一定是它，因为`sortUsingDescriptor:`可能返回一个自动释放的对象。在非弧项目中，您必须使用保留调用封装该调用：

```
[[array sortUsingDescriptor:...]retain]; 
```

# c - C Socket 程序创建 Hive Query Authentication 服务

> ID：12324954
> 
> 赞同：-1
> 
> 时间：2012-09-07T20:30:00.533
> 
> 标签：c

我是 C Socket 编程的新手，并试图在已知服务器中建立客户端用户名和密码身份验证服务。此处的客户端是具有用户名的用户身份验证服务将与生成的 Hive 服务器（Hadoop 中的 HIVE）保持线程保持状态，以在不使用、出错或终止授权服务时终止服务器。我可以得到它的任何代码片段吗？:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T21:30:03.703

C 套接字编程取决于您正在开发的平台。是窗户吗？UNIX？在实现任何高级代码（例如身份验证过程）之前，您应该使用简单的套接字程序进行训练。对于 UNIX（特别是 Linux）系统，您可以[在此处](http://www.linuxhowtos.org/C_C++/socket.htm)找到一些套接字理论和示例。

# vb.net - 不再显示表单复选框

> ID：12324956
> 
> 赞同：3
> 
> 时间：2012-09-07T20:30:13.793
> 
> 标签：vb.net, visual-studio-2010, dialog

我想知道如何实现我将实现“不再次显示”复选框，当检查并关闭表单时，它不会在启动上再次显示。我需要将其存储在注册表中吗？或者一个配置文件可能在应用程序启动时检查布尔值？我只是想知道最好的方法。我正在使用 vb.net。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T21:11:18.330

我为此使用了 MS Access 数据库，我使用 exe 部署了 mdf 文件，但是是的，您也可以使用注册表，当您使用 VB 中的“设置”部分保存值时，它会在注册表中创建一个条目。

# ios - UITableView 不显示数据

> ID：12324958
> 
> 赞同：0
> 
> 时间：2012-09-07T20:30:17.853
> 
> 标签：ios, xcode, uitableview

我正在实现一个动态表视图。这个表视图控制器是通过另一个视图控制器上的按钮触摸推入的。但是，即使日志表明单元格行设置正确，屏幕上也不会显示任何内容。可能是什么原因？我已经实现了部分的数量为 1。这是表格视图控制器中的代码：

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
// Return the number of sections.
return 1; 
```

}

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
// Return the number of rows in the section.

NSLog(@"Row count :%d",self.playerNames.count + 1);
return self.playerNames.count + 1; 
```

}

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
static NSString *CellIdentifier = @"PlayerName";
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell == nil) {
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
}

if (indexPath.row < self.playerNames.count) {
    cell.textLabel.text = [self.playerNames objectAtIndex:indexPath.row];
}

NSLog(@"Cell Text :%@",cell.textLabel.text);
return cell; 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T20:36:54.590

将 tableView 推送到屏幕后，尝试调用 [tableInstanceName reloadData];

# css - 所有表单和按钮都以 11px 字体大小神秘呈现

> ID：12324959
> 
> 赞同：1
> 
> 时间：2012-09-07T20:30:21.533
> 
> 标签：css, wordpress, debugging

使用开发工具和不同的浏览器检查我的网站。`font-size`我所有表格的计算结果到处都是：

*   Chrome 和 Safari OS X：`11px`
*   FF OS X：`11px`除了一些在`14px`.
*   Windows 上的 Opera：`13px`
*   jennyfofenny 甚至`13.3333px`在 Windows 7 Chrome 上报告了奇怪的字体大小。

这些都不是我设置的标准 14px`<body>` **或**100% 浏览器默认值 16。这是怎么回事？

所有的按钮和输入都表现出这种奇怪的行为：搜索表单、按钮、我的评论部分。

我到处寻找，尝试禁用插件，尝试禁用Javascript，但我根本找不到这个错误的来源

[**有问题的网站**](http://clusterfoo.com)

## 可能的解决方案：

将`input`属性添加到从 开始的重置表可以`line 30`解决问题。

### 然而：

考虑到任何 AFAIK 都没有或不是浏览器默认值，我仍然会*永远*困扰我这种奇怪的行为是如何产生的。（jennyfofenny 在某些浏览器上甚至会出现奇怪的 13.3333 字体大小！）`11px``13px`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T20:46:02.780

我认为是字体“profontwindows”使您的文本在这些元素中如此之小。

改变它，它肯定会变得更大。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T20:54:26.783

我看到你那里有多个 CSS 文件。例如：

[http://public.oneallcdn.com/css/api/socialize/login/frame.css](http://public.oneallcdn.com/css/api/socialize/login/frame.css)

[http://clusterfoo.com/wp-content/themes/Cf/style.css](http://clusterfoo.com/wp-content/themes/Cf/style.css)

11px 字体大小在 frame.css 中定义：

```
.plugin #providers .provider .name {
  color: #555;
  text-align: center;
  font-size: 11px;
  font-family: Tahoma, Kalimati, Verdana, "Bitstream Vera Sans", "DejaVu Sans", Geneva, Arial, Helvetica, Sans-serif;
  line-height: 14px;
  margin: 1px 0 2px;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-07T20:58:43.390

我同意opanitech。当我查看您的网站时，似乎一切都在检查，我在 Firefox、Chrome 和 Safari 中仔细检查了它。正文显示为 14 像素，h1 显示为 22 像素。如果可能，请在其他浏览器中查看您的网站。`!important`以防万一，您可以随时添加字体大小。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-07T20:39:19.120

我不明白你在说什么。[http://imgur.com/ovWLm](http://imgur.com/ovWLm)

将 WhatFont 书签添加到您的工具栏并以这种方式查看。按 ctrl+0 确保您的缩放设置为 100%。还要确保您没有包含会更改所有标签的默认字体大小的 CSS 重置样式表。

# properties - IntelliJ 没有看到资源文件夹

> ID：12324960
> 
> 赞同：15
> 
> 时间：2012-09-07T20:30:34.857
> 
> 标签：properties, maven-2, intellij-idea, file-not-found

我在 IntelliJ 中使用`Maven Module`. 我没有选择任何特定的原型，我点击完成。该项目创建得很好，并且我在 src/main 下拥有`java`和文件夹，正如预期的那样。`resources`

不幸的是，我的应用程序在文件夹中找不到任何属性文件，`resources`因为它在项目基础文件夹中查找。

我仔细检查了资源文件夹在项目结构中是否标记为“源文件夹”，并且我还尝试将以下内容添加到 pom.xml 中，但没有成功：

```
<resources>
  <resource>
    <directory>src/main/resources</directory>
  </resource>
</resources> 
```

我正在使用 Maven 2.2.1 和 IntelliJ 11.1，有什么想法吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-08-09T13:14:52.540

Intellij 12 中有一个错误，请转到 Settings->Compiler 并取消选中“Use external build”复选框 - 其背后的想法是假设编译器在单独的进程中运行时运行速度更快，但实际上存在是一个错误，使用 maven 时它不会复制资源。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-08-22T13:51:59.820

右键单击目录->“将目录标记为”->“资源根”

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-10T22:50:12.490

尝试

```
<resources>
  <resource>
    <directory>src/main/resources</directory>
    <includes>
      <include>**/*</include>
    </includes>
  </resource>
</resources> 
```

或在设置 -> 编译器 -> 资源模式下，添加资源模式（即 ?*.prefs）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-08-19T11:58:30.900

那么答案很简单..！
只需在源代码中引用文件路径，如下所示：

`src\\main\\resources\\FileName`

＆它应该按预期工作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-01-09T07:39:40.873

有类似的问题。对我有用的解决方案：

```
ClassLoader classLoader = getClass().getClassLoader();
File file = new File(classLoader.getResource("path").getFile()); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-07-19T10:53:49.633

我有一个类似的问题并解决了它。
我的问题不是 Intellij 问题，这是我的 pom.xml 中的错误，我错误地
包含了这个：

```
<packaging>pom</packaging> 
```

删除这个（或纠正它）解决了我的问题。

# sql - 多行sql查询出错

> ID：12324961
> 
> 赞同：3
> 
> 时间：2012-09-07T20:30:44.090
> 
> 标签：sql, oracle, oracle-sqldeveloper

有人可以解释这里发生了什么吗？

![在此处输入图像描述](../Images/f8ed82e76f89a373d690c7eb8600c279.png)

两者都是同一个查询，在 SQL Developer 中只有多行和单行的区别。

查询-

```
SELECT (TO_TIMESTAMP('10/08/2012','DD/MM/YYYY') -NUMTODSINTERVAL(1/(24*25*60*1000),'HOUR')) a FROM dual; 
```

上面的工作，但下面不会 -

```
SELECT (TO_TIMESTAMP('10/08/2012','DD/MM/YYYY') -
              NUMTODSINTERVAL(1/(24*25*60*1000),'HOUR')) a FROM dual; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T20:49:41.850

根据[这个](http://www.kuzbass.ru/docs/rdb702/oraclerdb/sqlrm7/sql_pro_008.html)网站，

> “您可以通过以连字符 (-) 结束交互式 SQL 来显式地继续该行。”

您可以在屏幕截图中看到`EXECUTING`：`SELECT (TO_TIMESTAMP('10/08/2012','DD/MM/YYYY') NUMTO`...

缺少减号。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-07T20:44:51.327

看起来 SQL Developer 的解析器要求其`-`运算符后面的参数位于同一行。...所以这有效：

```
SELECT (TO_TIMESTAMP('10/08/2012','DD/MM/YYYY') 
- NUMTODSINTERVAL(1/(24*25*60*1000),'HOUR')) a 
FROM dual; 
```

所以问题不在于多行本身，而是需要将运算符 ( `-`) 与其操作数放在同一行。为什么？我会说一个错误，或者只是一个次优的实现。

[编辑：正如其他人所指出的，连字符是默认的[续行字符](https://forums.oracle.com/forums/thread.jspa?threadID=652359)，这就是为什么这样工作的原因]

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-07T20:49:42.450

在 sqlplus 中，行尾的连字符充当行继续符。请参阅此处[继续长线部分](http://docs.oracle.com/cd/B12037_01/server.101/b12170/ch5.htm#i1039736)。可能 SQLDeveloper 正在做同样的事情。所以不要在行尾加连字符。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-07T20:51:03.037

您还可以运行最后一个查询，而无需将减号放在新行上，只需在第一行末尾添加连字符即可。似乎 SQL Developer 具有解释长命令的 SQl*plus 方式
试试这个

```
SELECT (TO_TIMESTAMP('10/08/2012','DD/MM/YYYY') - -
       NUMTODSINTERVAL(1/(24*25*60*1000),'HOUR')) a FROM dual 
```

# c# - 验证保存到数据库时数据字段不会太大？

> ID：12324962
> 
> 赞同：2
> 
> 时间：2012-09-07T20:30:44.120
> 
> 标签：c#

我有一个应用程序作为 Windows 服务运行并读取文本数据文件，然后将文件内容映射到数据库。该应用程序使用批量提交并定期数据大于数据库字段。

在尝试将数据字段保存到数据库之前验证数据字段不是太大的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T20:56:36.350

如果你愿意使用[System.ComponentModel.DataAnnotations](http://msdn.microsoft.com/en-us/library/cc490428%28v=vs.100%29)你可以做这样的事情。

```
public class Customer
{
    [StringLength(5)]
    public string Name { get; set; }

    [StringLength(20)]
    public string Phone { get; set; }

    [StringLength(30)]
    public string Email { get; set; }

    [StringLength(30)]
    public string Address { get; set; }
}

class Program
{
    static void Main(string[] args)
    {
        Customer c = new Customer 
        {
            Name = "FooBarX",
            Phone = "555-5555-33 ext 234",
            Email = "foobar@foobar.com",
            Address = "1334 foobar ave, foobar CA"
        };

        var ctx = new ValidationContext(c, null, null);
        Validator.ValidateObject(c, ctx,true);

        Console.Read();
    }
} 
```

在这种情况下， [Validator.ValidateObject](http://msdn.microsoft.com/en-us/library/system.componentmodel.dataannotations.validator_methods%28v=vs.100%29)将抛出异常，因为 Name 字段太大，这是由`StringLength`属性强制执行的。

您还可以使用[Validator.TryValidateObject](http://msdn.microsoft.com/en-us/library/dd411772%28v=vs.100%29)它将返回错误列表而不是引发异常。

验证框架非常强大。您可以对字符串使用正则表达式验证。数字字段的范围验证，甚至自定义验证。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T20:42:33.827

要验证您可以使用数据表来读取数据库字段的最大长度。

（VB.NET 代码）

```
 DataTable[] myDataTable; 
                oleDbDataAdapter1.Fill(dataSet11); 
                myDataTable = oleDbDataAdapter1.FillSchema(dataSet11, System.Data.SchemaType.Source); 
                TextBox1.Text = myDataTable[0].Columns[0].MaxLength.ToString() 
```

也许这个链接会有所帮助......

[http://forums.asp.net/t/306971.aspx/1](http://forums.asp.net/t/306971.aspx/1)

# javascript - Apache Thrift 是否能够在 JavaScript 或其他语言中简单地编码和解码数据？

> ID：12324964
> 
> 赞同：1
> 
> 时间：2012-09-07T20:30:51.330
> 
> 标签：javascript, websocket, thrift

我对两个特定用例感兴趣。

1) C++ 服务器通过 WebSockets 与浏览器内的 javascript 客户端来回通信。
2) 两个浏览器内 javascript 客户端通过 WebSockets 相互通信。

忽略示例 1 中 C++ 服务器的复杂性，Thrift 是否可以简单地用于数据流的编码/解码，而不是用于处理通信通道的一体化包？

使用 Thrift 作为传输机制还有什么主要优势吗？

谢谢

# magento - Magento 基本网址在数据库中更改，未反映在前端

> ID：12324969
> 
> 赞同：2
> 
> 时间：2012-09-07T20:31:03.903
> 
> 标签：magento

我的 magento 网站有问题。我将 core_config_data 表中的安全和不安全的基本 url 更改为新值，当我访问该站点时，未使用新值。就像它甚至不注意数据库所说的那样。

我也清除了缓存。有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-30T21:22:27.500

另一种解决方案是将 /app/etc/local.xml 重命名为 /app/etc/local.xml.old 并重新启动安装过程。

我的问题是我为 javascript 输入了错误的基本 url（忘记在末尾添加 /js/），所以 javascript 在前端或后端不起作用。更改基本 js url 并清除缓存后，仍然没有 js。只有在重命名 local.xml 并完成安装过程之后，正确的 js url（带有 /js/）才会启动。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-20T19:33:37.057

如果您在手动更改 core_config_data 表以表示正确的 URL 时遇到问题，尤其是在本地工作时，请将 /app/etc/local.xml 重命名为 local.xmlcopy（或 wtv）。

这一直是我的故障保险；我总是手动做，但是当所有其他方法都失败时，这几乎总是有效的。

完成安装过程（不要担心：它不会删除您的数据；它会知道表已创建）。

而已。转到前端，它应该可以工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-09-17T19:24:19.737

在我的情况下是 memcache 前缀，与同一服务器中的另一个存储相同。

# visual-studio-2010 - Web Api 路由返回 404

> ID：12324972
> 
> 赞同：1
> 
> 时间：2012-09-07T20:31:07.420
> 
> 标签：visual-studio-2010, asp.net-web-api, visual-studio-2012

鉴于 uri...

```
http://localhost:5613/api/user/1/HasCompletedInitialScreen 
```

我配置了以下路线...

```
public static class WebApiConfig
{
    public static void Register(HttpConfiguration config)
    {
        config.Routes.MapHttpRoute(
            name: "ApiUserHasCompletedInitialScreen",
            routeTemplate: "api/user/{id}/{hascompletedinitialscreen}");

        config.Routes.MapHttpRoute(
            name: "DefaultApi",
            routeTemplate: "api/{controller}/{id}",
            defaults: new { id = RouteParameter.Optional }
        );
    }
} 
```

和控制器动作...

```
[HttpGet]
[ActionName("HasCompletedInitialScreen")]
public HttpResponseMessage HasCompletedInitialScreen(int id)
{
    var response = Request.CreateResponse<bool>(HttpStatusCode.Created, true);
    response.Headers.Location = GetLocation(id);
    return response;
} 
```

但是，我收到 404。如何修复我的路由配置和/或控制器操作以使其正常工作？

非常感谢！！

**更新**

根据接受的答案，我将我的 api 路由定义修改为以下内容。希望这对其他人有帮助...

```
 config.Routes.MapHttpRoute(
            name: "QueryApi",
            routeTemplate: "api/{controller}/{id}/{action}"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T21:24:34.493

我不确定您要做什么，但是，如果您想打电话

```
http://localhost:5613/api/user/1/HasCompletedInitialScreen 
```

您的路线需要是这样的：

```
config.Routes.MapHttpRoute(
                name: "ApiUserHasCompletedInitialScreen",
                routeTemplate: "api/user/{id}/{action}",
                defaults: new { controller = "Something" }
            ); 
```

`SomethingController`您的控制器在哪里包含该`HasCompletedInitialScreen`操作。

`ActionName`附带说明一下，如果属性的名称与您的操作方法名称相同，则不需要声明属性。

# php - 修改 Datetime 函数以显示正确的间隔

> ID：12324973
> 
> 赞同：2
> 
> 时间：2012-09-07T20:31:07.700
> 
> 标签：php, date, datetime

我查了一下，这不是重复的。我有这个功能

```
$since = date('Y-m-d H:i:s', strtotime($since));        
        $date = new DateTime($since);
        $interval = $date->diff(new DateTime('now'));
        return $interval->format('%y years, %m months, %d days, %h hours and %i minutos ago %s seconds ago'); 
```

但是，当然，我得到的日期是“5 年，2 个月，5 天......”

我想要得到的只是区间的一部分。意思是，我不想得到“0年，0个月，0天”，但可以说“3分钟”或“5天”等......

我是 DateTime 的新手，但在 php.net 站点中没有找到执行此操作的函数。是有一个还是我必须自己创建一个？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T20:37:23.573

`DateTime::diff`返回一个[`DateInterval`](http://php.net/manual/en/class.dateinterval.php)实例，其字段包括：

```
public integer $y ;
public integer $m ;
public integer $d ;
public integer $h ;
public integer $i ;
public integer $s ; 
```

只需选择您需要的，例如`$interval -> h`几个小时。

在这里编辑你有一个包装：

```
function formatInterval(DateInterval $interval)
{

    static $values = array(
        'y' => 'years',
        'm' => 'months',
        'd' => 'days',
        'h' => 'hours',
        'i' => 'minutes',
        's' => 'seconds',                                   
    );

    $formatString = "";

    foreach($values as $key => $label)
    {

        if(($value = $interval -> {$key}) === 0)
            continue;

        $formatString .= sprintf('%s %s ', $value, $label);

    }

    return  $formatString;

}

$date = new DateTime;
$interval = $date -> diff( new DateTime('2012-09-7'));

echo formatInterval($interval); 
```

打印出来：

```
20 hours 47 minutes 13 seconds 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T20:45:13.193

这就是我想出的：

```
<?php

/**
 * Return formatted interval where only the largest unit gets displayes.
 * @param DateInterval $interval
 *
 * @return string
 */
function format_properly(DateInterval $interval) {
    if ($interval->y !== 0) {
        return $interval->format("%y years");
    }
    if ($interval->m !== 0) {
        return $interval->format("%m months");
    }
    if ($interval->d !== 0) {
        return $interval->format("%d days");
    }
    if ($interval->h !== 0) {
        return $interval->format("%h hours");
    }
    if ($interval->i !== 0) {
        return $interval->format("%i minutes");
    }
    if ($interval->s !== 0) {
        return $interval->format("%s seconds");
    }
    return "0 seconds";
}

$date = new DateTime("now");
$date->sub(new DateInterval("PT2H5M")); //Now - 2 hours and 5 minutes

$now = new DateTime("now");

$interval = $date->diff($now);

echo format_properly($interval);
var_dump($interval); 
```

# php - mysqli 连接问题

> ID：12324977
> 
> 赞同：0
> 
> 时间：2012-09-07T20:31:15.417
> 
> 标签：php, mysql, mysqli

我正在尝试连接到我的数据库并遇到问题。

我的 while 语句出现此错误`while($row = mysqli_fetch_array($result))`

> 警告：mysqli_fetch_array() 期望参数 1 为 mysqli_result，布尔值

我该如何解决？

这个错误在第 56 行

> 致命错误：在非对象 $result->close() 上调用成员函数 close();

```
<?php     
$mysqli = new mysqli("hostedresource.com", "UserName", "pass", "database");

if ($mysqli->connect_errno) {
printf("Connect failed: %s\n", $mysqli->connect_error);
exit();
}
 if ($result = $mysqli->query("SELECT * FROM AllGallerys order by RAND() limit 200'")) {
}

echo '<table align="center" width="70%"><tr>';  
$count = 0;  
$rowCount = 0; 
while($row = mysqli_fetch_array($result))  
{  
$count++; 
$rowCount++; 

echo "<td><a href='http://" . $row['GALLERYURL'] . "'><img src='" . $row['THUMBURL'] . "'   width='120' height='160'/></a></td>";  
if($count%8===0) 
{ 
    echo '</tr>'; 

    if($rowCount%5===0) 
    { 
        echo '</table><br/><br/>Adds Here<br/><br/><table align="center" width="70%"><tr>'; 
        $rowCount = 0; 
    } 
   } 
} 
echo ' </tr></table>';  

 $result->close();
 $mysqli->close();

 ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T20:32:49.020

您的 sql 语句中有错字：

```
"SELECT * FROM AllGallerys order by RAND() limit 200'"
                                                    ^ here 
```

除了结构有点奇怪之外，您至少应该添加一个`else`部分以防查询失败。

# java - 设置 Java 退出代码而不退出

> ID：12324980
> 
> 赞同：10
> 
> 时间：2012-09-07T20:31:26.617
> 
> 标签：java, shutdown, exit-code

在具有大量关闭操作的高并发程序中，想知道如何设置退出代码而不提前调用 System.exit()？可以设置“在完成其他所有操作后执行此代码”方法吗？但我真的只是想过早地设置退出代码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T20:35:47.597

如果我理解正确，您想要以某种方式保留退出代码，运行一些方法，然后`System.exit`使用预先确定的退出代码调用。
IMO 你应该做的是使用[Shutdown 挂钩](http://docs.oracle.com/javase/7/docs/api/java/lang/Runtime.html)。即您的代码将在 JVM 关闭之前运行，并且（如果我正确地满足了您的要求）将通过简单的编码实现获得相同的结果（即，而不是使用状态变量和不寻常的编码逻辑来实现您想要做的事情等)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T20:35:26.043

让一个主线程产生所有其他线程，以便它仅在所有其他线程完成时关闭。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T20:40:56.573

只需将结果存储在某处并使用任何合适的同步工具来告诉您已完成。完成后，只需读取存储的结果并使用 System.exit(result) 退出。

我很好奇，如果多个线程设置结果，你应该使用哪个？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-07T20:36:13.853

> 在具有大量关闭操作的高度并发程序中

这对我来说是一种代码味道。

我可以理解多个线程可能*想要*关闭，但不应允许它们这样做。

相反，我会创建一个名为`initiateShutdown(int code)`. 此方法将包含确定何时适合实际关闭的逻辑。由于您可能不希望从该方法返回的线程，您可以实现某种永不返回的锁，并委托线程等待该锁。

# macos - 用户级别的 Haskell

> ID：12324982
> 
> 赞同：4
> 
> 时间：2012-09-07T20:31:30.413
> 
> 标签：macos, haskell, compiler-construction, interpreter

我喜欢在 Haskell 中编码，但经常在我无法安装软件的计算机上使用，并且它对您可以运行的内容有一些限制。我想在这台计算机上编写 Haskell 代码并对其进行测试。有谁知道 Haskell 的版本，解释或编译，用 Java、JavaScript、Ruby、Python 或 Mac 上默认安装中可用的其他解释语言编写的？可以在用户级别安装的独立版本的 Haskell 也可以，但不能自己编译 Haskell。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-07T20:50:30.577

GHC 二进制发行版（以 tarball 形式提供的，而不是安装程序）都可以轻松地在本地安装。

```
./configure --prefix=$HOME/ghc
make install 
```

然后更新您的路径以包含 $HOME/ghc/bin

如果您想要 cabal，请从[hackage](http://hackage.haskell.org/package/cabal-install)获取 tarball ，然后解压缩并运行 bootstrap.sh。

GHC 非常适合本地安装。事实上，我从不将它用作系统安装。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-07T20:58:21.063

我也在我的工作站上这样做，这样我所在的发行版（在我的情况下是 Debian）不会突然开始升级东西，而我没有注意到一个简单的`apt-get upgrade`.

该解决方案安装了一个完整的`ghc`和前缀。`haskell-platform``~/.cabal`

首先，我有一个`~/local`目录，用于将自定义编译的程序放在我的主目录中。我通常不喜欢这个`sudo make install`步骤，因为我给了`Makefile`我系统的一些随机 root 访问权限，这让我感到恶心。

[然后我从ghc 站点](http://www.haskell.org/ghc/download_ghc_7_4_2)下载 ghc 二进制发行版。请注意，我将您链接到 7.4.2。我听说 Mac OS X 上有一些段错误，但我不知道细节。您应该检查一下或获取[更新的 ghc](http://www.haskell.org/ghc/download_ghc_7_6_1)，但请注意，有许多关于 hackage 的软件包尚未修复以与 7.6 一起使用。另外，请忽略“停止！” 警告，你是真正想要非发行版 GHC 二进制文件的 1%。

您可以 cd 进入 ghc 目录，然后这样做`./configure --prefix=$HOME/local/haskell`，然后`make install`（无需编译，它只是要安装，而不是编译。）

此时，您应该添加`~/local/haskell/bin`到您的路径。[这](https://github.com/adimit/config/blob/master/zshrc#L9)是我放在 my 中的代码，`~/.zshrc`它将所有`~/local/*/bin`目录添加到您的路径中。

然后，您可以获得 Haskell 平台，并做同样的`./configure --prefix=$HOME/local/haskell && make && make install`舞蹈。这一步*需要*编译。这意味着您将需要安装一些头文件库。我发现必要的随机 openGL 标头特别烦人。

当然你也可以跳过haskell-platform，直接下载[cabal-install](http://hackage.haskell.org/package/cabal-install)，然后安装你需要的。在任何情况下，您都应该不要忘记添加`~/.cabal/bin`到您的`$PATH`!

做一个`cabal update`，你应该很高兴。

注意：GHC 的二进制发行版需要一个重要的部分，它有时可能是旧 Linux 系统上的一个 pita：libgmp。它与它动态链接，如果您也遇到有关在 OS X 上找不到共享 libgmp 的错误，您可以……好吧，在评论中提出这个问题，我将解释如何到达那里。基本上，您必须自己编译 libgmp + deps。

但我不认为这应该是 OS X 上的问题。这只是我尝试过的几个旧的 debian 机器上的问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-07T21:02:16.073

对于单个文件，您可以使用[codepad](http://codepad.org/)。

# zend-framework - Zend_Acl_Exception: 找不到资源

> ID：12324985
> 
> 赞同：1
> 
> 时间：2012-09-07T20:31:56.897
> 
> 标签：zend-framework, zend-acl

您好，我已经开始研究在 zend 框架中开发的已经开发的系统。实际上，我正在将简单的 zend 转换为模块化方法。我已经创建了模块文件夹，为此设置了设置。现在我创建了一个模块`affiliate`并将其设置为`application.ini`. 现在当我访问我的项目时，默认模块中的控制器运行。现在我创建了一个新模块`f8admin`，当我尝试访问它时，`project/module/controller/action`它会生成一个看起来像的异常

```
 Zend_Acl_Exception: Resource 'login' not found

 thrown in /zend_medaffiliate/library/Zend/Acl.php on line 365 
```

调用堆栈

```
Zend_Acl->get()
in /zend_medaffiliate/library/Zend/Acl.php on line 846
Zend_Acl->isAllowed()
in /zend_medaffiliate/library/Svit/Controller/Plugin/Acl.php on line 46
Svit_Controller_Plugin_Acl->preDispatch()
in /zend_medaffiliate/library/Zend/Controller/Plugin/Broker.php on line 309
Zend_Controller_Plugin_Broker->preDispatch()
in /zend_medaffiliate/library/Zend/Controller/Front.php on line 941
Zend_Controller_Front->dispatch()
in /zend_medaffiliate/library/Zend/Application/Bootstrap/Bootstrap.php on line 97
Zend_Application_Bootstrap_Bootstrap->run()
in /zend_medaffiliate/library/Zend/Application.php on line 366
Zend_Application->run()
in /zend_medaffiliate/abc.com/index.php on line 26 
```

现在任何人都可以告诉我问题出在哪里以及我需要在哪里工作吗？我到底需要在哪里改变才能摆脱这个问题？该系统已经由另一个开发人员开发，现在无法访问。

问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T02:39:52.540

显然你改变了你的应用程序，现在你的`acl`（访问控制列表）插件已经精神崩溃了。

现在我无法确定`/zend_medaffiliate/library/Svit/Controller/Plugin/Acl.php`导致问题的 acl 插件（位于

该插件将在您的*application.ini*或*Bootstrap.php*中注册，并且您正在寻找地址为**"Svit_Controller_Plugin_Acl"**的行。

在您的 application.ini 中，该行可能类似于： `resources.frontController.plugins.acl = "Svit_Controller_Plugin_Acl"`

# windows - 如何知道它是否是 Windows 控制台？

> ID：12324993
> 
> 赞同：0
> 
> 时间：2012-09-07T20:33:01.140
> 
> 标签：windows, console

有什么安全的方法可以知道实际窗口是否是 Windows 控制台？

GetConsoleTitle 不起作用，因为可以更改标题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T20:40:46.487

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Diagnostics;

namespace ConsoleApplication1
{
    class Program
    {
        static void Main(string[] args)
        {
            Process[] processes = Process.GetProcessesByName("cmd");
            foreach (Process p in processes)
            {
                var window = p.MainWindowHandle;
                // Do something 
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T02:13:34.677

当您通过或函数从程序运行*CMD*（或任何基于控制台的程序）时，您将获得其进程 ID。使用它来查找它的控制台窗口。`CreateProcess``ShellExecuteEx``EnumWindows``GetWindowThreadProcessId`

# java - 我如何从这个 jogl 程序中获得更多的每秒帧数？

> ID：12324994
> 
> 赞同：0
> 
> 时间：2012-09-07T20:33:01.623
> 
> 标签：java, opengl, jogl, vbo, frame-rate

试图从这个 jogl 程序中获得更多的 fps。理论fps很高，但实际fps很低。jvisualvm 说大部分（超过 90%）的时间都花在了 AWTAnimatorImpl.display() 和 GLDrawableHelper.displayImpl() 上。

```
package stanalone;
import static java.awt.Color.cyan;
import static java.awt.Color.magenta;
import static java.awt.Color.white;
import static java.awt.Color.yellow;
import static java.awt.Color.red;
import static java.lang.Math.PI;
import static java.lang.Math.cos;
import static java.lang.Math.min;
import static java.lang.Math.signum;
import static java.lang.Math.sin;
import static javax.media.opengl.GL.GL_ARRAY_BUFFER;
import static javax.media.opengl.GL.GL_COLOR_BUFFER_BIT;
import static javax.media.opengl.GL.GL_DEPTH_BUFFER_BIT;
import static javax.media.opengl.GL.GL_DEPTH_TEST;
import static javax.media.opengl.GL.GL_FLOAT;
import static javax.media.opengl.GL.GL_FRONT;
import static javax.media.opengl.GL.GL_FRONT_AND_BACK;
import static javax.media.opengl.GL.GL_LEQUAL;
import static javax.media.opengl.GL.GL_MAX_TEXTURE_SIZE;
import static javax.media.opengl.GL.GL_NICEST;
import static javax.media.opengl.GL.GL_POINTS;
import static javax.media.opengl.GL.GL_WRITE_ONLY;
import static javax.media.opengl.GL2ES1.GL_PERSPECTIVE_CORRECTION_HINT;
import static javax.media.opengl.GL2GL3.GL_FILL;
import static javax.media.opengl.fixedfunc.GLLightingFunc.GL_SMOOTH;
import static javax.media.opengl.fixedfunc.GLMatrixFunc.GL_MODELVIEW;
import static javax.media.opengl.fixedfunc.GLMatrixFunc.GL_PROJECTION;

import java.awt.Color;
import java.awt.Component;
import java.awt.Dimension;
import java.awt.Point;
import java.awt.event.WindowAdapter;
import java.awt.event.WindowEvent;
import java.awt.geom.Point2D;
import java.nio.ByteBuffer;
import java.nio.ByteOrder;
import java.nio.FloatBuffer;
import java.util.LinkedList;
import java.util.List;
import java.util.Random;
import java.util.concurrent.ScheduledThreadPoolExecutor;
import java.util.concurrent.TimeUnit;

import javax.media.opengl.GL;
import javax.media.opengl.GL2;
import javax.media.opengl.GLAutoDrawable;
import javax.media.opengl.GLCapabilities;
import javax.media.opengl.GLEventListener;
import javax.media.opengl.GLProfile;
import javax.media.opengl.awt.GLJPanel;
import javax.media.opengl.fixedfunc.GLLightingFunc;
import javax.media.opengl.fixedfunc.GLPointerFunc;
import javax.media.opengl.glu.GLU;
import javax.swing.JFrame;
import javax.swing.SwingUtilities;

import com.jogamp.common.nio.Buffers;
import com.jogamp.opengl.util.FPSAnimator;
import com.jogamp.opengl.util.gl2.GLUT;
class Histogram {
    public Histogram() {
        this(10,0,1);
    }
    public Histogram(int bins,double low,double high) {
        this.bins=bins;
        bin=new int[bins];
        this.low=low;
        this.high=high;
        range=high-low;
    }
    public void add(double[] x) {
        for(int i=0;i<x.length;i++)
            add(x[i]);
    }
    public void add(double x) {
        n++;
        sum+=x;
        final double x2=x*x;
        sum2+=x2;
        min=Math.min(min,x);
        max=Math.max(max,x);
        if(x>=high)
            overflows++;
        else if(x<low)
            underflows++;
        else {
            double val=x-low;
            int index=(int)(bins*(val/range));
            bin[index]++;
        }
    }
    public void clear() {
        for(int i=0;i<bins;i++)
            bin[i]=0;
        overflows=0;
        underflows=0;
        min=Double.MAX_VALUE;
        max=Double.MIN_VALUE;
    }
    public int n() {
        return n;
    }
    public double low() {
        return low;
    }
    public double high() {
        return high;
    }
    public double range() {
        return high()-low();
    }
    public int bins() {
        return bins;
    }
    public double min() {
        return n==0?Double.NaN:min;
    }
    public double max() {
        return n==0?Double.NaN:max;
    }
    public double sum() {
        return n==0?Double.NaN:sum;
    }
    public double mean() {
        return n==0?Double.NaN:sum/n;
    }
    public double variance() {
        return n==0?Double.NaN:sum2/n-mean()*mean();
    }
    public int bin(int index) {
        if(index<0)
            return underflows;
        else if(index>=bins)
            return overflows;
        else return bin[index];
    }
    public double maxDifference() {
        double max=0;
        for(int i=0;i<bins();i++)
            max=Math.max(max,Math.abs(bin(i)-n()/(double)bins())/(n()/(double)bins()));
        return max;
    }
    public String toString() {
        final StringBuffer sb=new StringBuffer();
        sb.append((float)min()).append("<=").append((float)mean()).append("<=").append((float)max()).append(" ");
        sb.append(bin(-1)).append(",[");
        for(int i=0;i<bins;i++)
            sb.append(i>0?",":"").append(bin(i));
        sb.append("],").append(bin(bins));
        return sb.toString();
    }
    private int[] bin;
    private int n,bins,underflows,overflows;
    private final double low,high,range;
    private double min=Double.MAX_VALUE,max=Double.MIN_VALUE,sum,sum2;
}
class MyDataObject {
    MyDataObject(Point2D[] points) {
        this(points,white);
    }
    MyDataObject(Point2D[] points,Color color) {
        this.points=points;
        this.color=color;
    }
    Point2D[] points;
    Color color;
    static Point2D[] randomPoints(Random random,Point2D offset) {
        List<Point2D> l=new LinkedList<Point2D>();
        int n=nPoints/pieces.length;
        for(int j=0;j<n;j++)
            l.add(new Point2D.Double(offset.getX()+random.nextFloat(),offset.getY()+random.nextFloat()));
        return l.toArray(new Point2D[0]);
    }
    static MyDataObject[] pieces;
    static Color[] colors=new Color[]{cyan,magenta,yellow,white};
    static int nPoints=1000000;
}
class StandAlone implements GLEventListener {
    StandAlone(GLAutoDrawable drawable) {
        this.drawable=drawable;
        drawable.addGLEventListener(this);
        init();
    }
    void init() {
        nVbos=4;
        vertexBufferIndices=new int[nVbos];
        for(int i=0;i<vertexBufferIndices.length;i++)
            vertexBufferIndices[i]=-1;
        numberOFVertices=new int[nVbos];
        // drawAxes=true;
        MyDataObject.pieces=new MyDataObject[nVbos];
        for(int i=0;i<nVbos;i++) {
            Point2D offset=new Point.Double(min(0,signum(cos(PI/4+i*PI/2))),min(0,signum(sin(PI/4+i*PI/2))));
            MyDataObject.pieces[i]=new MyDataObject(MyDataObject.randomPoints(random,offset),MyDataObject.colors[i%MyDataObject.colors.length]);
        }
    }
    static void setupFrame(Component component) {
        setupFrame(component,defaultFps);
    }
    static void setupFrame(Component component,int fps) {
        component.setPreferredSize(new Dimension(displayWidth,displayHeight));
        final FPSAnimator animator=new FPSAnimator((GLAutoDrawable)component,fps,true);
        final JFrame frame=new JFrame();
        frame.getContentPane().add(component);
        frame.addWindowListener(new WindowAdapter() {
            @Override public void windowClosing(WindowEvent e) {
                new Thread() {
                    @Override public void run() {
                        if(animator.isStarted())
                            animator.stop();
                        System.exit(0);
                    }
                }.start();
            }
        });
        frame.setTitle(TITLE);
        frame.pack();
        frame.setVisible(true);
        animator.start();
    }
    static void setup() {
        GLProfile glprofile=GLProfile.getDefault();
        GLCapabilities glcapabilities=new GLCapabilities(glprofile);
        GLJPanel panel=new GLJPanel(glcapabilities);
        new StandAlone(panel);
        setupFrame(panel,200);
    }
    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override public void run() {
                setup();
            }
        });
    }
    private void createVbo(GL2 gl2,int[] n,int index) {
        if(!gl2.isFunctionAvailable("glGenBuffers")||!gl2.isFunctionAvailable("glBindBuffer")||!gl2.isFunctionAvailable("glBufferData")||!gl2.isFunctionAvailable("glDeleteBuffers")) { throw new RuntimeException("Vertex buffer objects not supported."); }
        gl2.glGenBuffers(1,vertexBufferIndices,index);
        // create vertex buffer data store without initial copy
        gl2.glBindBuffer(GL_ARRAY_BUFFER,vertexBufferIndices[index]);
        gl2.glBufferData(GL_ARRAY_BUFFER,n[0]*3*Buffers.SIZEOF_FLOAT*2,null,GL.GL_DYNAMIC_DRAW);
    }
    private static void storeVerticesAndColors(FloatBuffer floatbuffer,MyDataObject w) {
        for(Point2D p:w.points) {
            floatbuffer.put((float)p.getX()).put((float)p.getY()).put(0);
            floatbuffer.put((float)(w.color.getRed()/255.));
            floatbuffer.put((float)(w.color.getGreen()/255.));
            floatbuffer.put((float)(w.color.getBlue()/255.));
        }
        floatbuffer.rewind();
    }
    private void fillVertexBuffer(GL2 gl2,MyDataObject piece,int index) {
        // map the buffer and write vertex and color data directly into it
        gl2.glBindBuffer(GL_ARRAY_BUFFER,vertexBufferIndices[index]);
        ByteBuffer bytebuffer=gl2.glMapBuffer(GL_ARRAY_BUFFER,GL_WRITE_ONLY);
        FloatBuffer floatbuffer=bytebuffer.order(ByteOrder.nativeOrder()).asFloatBuffer();
        storeVerticesAndColors(floatbuffer,piece);
        gl2.glUnmapBuffer(GL_ARRAY_BUFFER);
    }
    protected int createAndFillVertexBuffer(GL2 gl2,MyDataObject piece,int index) {
        int[] n=new int[]{piece.points.length};
        if(vertexBufferIndices[index]==-1)
            createVbo(gl2,n,index);
        fillVertexBuffer(gl2,piece,index);
        return n[0];
    }
    private void renderPiece(GLAutoDrawable drawable,int index) {
        final GL2 gl2=drawable.getGL().getGL2();
        gl2.glColorMaterial(GL_FRONT_AND_BACK,GLLightingFunc.GL_AMBIENT_AND_DIFFUSE);
        gl2.glEnable(GLLightingFunc.GL_COLOR_MATERIAL);
        // draw all objects in vertex buffer
        gl2.glBindBuffer(GL_ARRAY_BUFFER,vertexBufferIndices[index]);
        gl2.glEnableClientState(GLPointerFunc.GL_VERTEX_ARRAY);
        gl2.glEnableClientState(GLPointerFunc.GL_COLOR_ARRAY);
        gl2.glVertexPointer(3,GL_FLOAT,6*Buffers.SIZEOF_FLOAT,0);
        gl2.glColorPointer(3,GL_FLOAT,6*Buffers.SIZEOF_FLOAT,3*Buffers.SIZEOF_FLOAT);
        gl2.glPolygonMode(GL_FRONT,GL_FILL);
        gl2.glDrawArrays(GL_POINTS,0,1*numberOFVertices[index]);
        // disable arrays once we're done
        gl2.glBindBuffer(GL_ARRAY_BUFFER,0);
        gl2.glDisableClientState(GLPointerFunc.GL_VERTEX_ARRAY);
        gl2.glDisableClientState(GLPointerFunc.GL_COLOR_ARRAY);
        gl2.glDisable(GLLightingFunc.GL_COLOR_MATERIAL);
    }
    private void startTimeReporting() {
        t0=System.nanoTime();
        if(frame%reportPeriod==0)
            t0Frame=t0;
        if(frame>1) {
            double dt=(System.nanoTime()-t0Display);
            double millis=dt/1000000.;
            hDisplay.add(millis);
        }
    }
    void endTimeReporting() {
        double dt=(System.nanoTime()-t0);
        double millis=dt/1000000.;
        hRender.add(millis);
        if(++frame%reportPeriod==0) {
            System.out.println("average render time: "+hRender.mean()+" ms., max fps="+1000./hRender.mean());
            double dtFrames=System.nanoTime()-t0Frame;
            System.out.println("average time between calls to display: "+hDisplay.mean()+" ms., actual fps="+reportPeriod/(dtFrames/1000000.)*1000.);
            hRender.clear();
        }
        t0Display=System.nanoTime();
    }
    void update() {
        angle+=1;
    }
    @Override public void reshape(GLAutoDrawable drawable,int x,int y,int width,int height) {
        System.out.println("super.reshape "+drawable);
        GL2 gl=drawable.getGL().getGL2();
        if(height==0)
            height=1;
        float aspect=(float)width/height;
        gl.glViewport(0,0,width,height);
        gl.glMatrixMode(GL_PROJECTION);
        gl.glLoadIdentity();
        // glu.gluPerspective(45.0,aspect,0.1,100.0);
        gl.glMatrixMode(GL_MODELVIEW);
        gl.glLoadIdentity();
    }
    @Override public void init(final GLAutoDrawable drawable) {
        GL2 gl=drawable.getGL().getGL2();
        glu=new GLU();
        glut=new GLUT();
        gl.glClearColor(0.0f,0.0f,0.0f,0.0f);
        gl.glClearDepth(1.0f);
        gl.glEnable(GL_DEPTH_TEST);
        gl.glDepthFunc(GL_LEQUAL);
        gl.glHint(GL_PERSPECTIVE_CORRECTION_HINT,GL_NICEST);
        gl.glShadeModel(GL_SMOOTH);
        for(int i=0;i<nVbos;i++)
            numberOFVertices[i]=createAndFillVertexBuffer(drawable.getGL().getGL2(),MyDataObject.pieces[i],i);
    }
    @Override public void display(GLAutoDrawable drawable) {
        update();
        if(doTimeReporting)
            startTimeReporting();
        GL2 gl=drawable.getGL().getGL2();
        gl.glClear(GL_COLOR_BUFFER_BIT|GL_DEPTH_BUFFER_BIT);
        gl.glLoadIdentity();
        gl.glRotated(angle,0,1,0);
        gl.glColor3d(1,1,1);
        for(int i=0;i<nVbos;i++)
            renderPiece(drawable,i);
        if(doTimeReporting)
            endTimeReporting();
    }
    @Override public void dispose(GLAutoDrawable drawable) {}
    final GLAutoDrawable drawable;
    double angle;
    int nVbos;
    int[] vertexBufferIndices;
    int[] numberOFVertices;
    Random random=new Random();
    final int reportPeriod=100;
    boolean doTimeReporting=true;
    long t0,t0Frame,t0Display;
    int frame;
    Histogram hRender=new Histogram(10,0,10),hDisplay=new Histogram(10,0,100);
    int fps=defaultFps;
    protected GLU glu;
    protected GLUT glut;
    protected static String TITLE="JOGL 2.0 Setup (GLJPanel)";
    protected static final int displayWidth=1024;
    protected static final int displayHeight=1024;
    protected static final int defaultFps=60;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T21:01:26.767

您似乎误解了 OpenGL 的工作原理。正如您目前所做的那样，测量包装 OpenGL 调用所花费的时间几乎是没有用的。

当您调用 opengl 命令时，它只是将命令放入处理队列并返回。*绘制*对象所需的实际时间并不是您发出所有绘制调用所需的时间。

如果调用显示之间的时间是 37 毫秒，那么这就是 GPU 处理您排队的所有命令所需的时间。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-07T20:47:23.743

如果在显示代码中使用了大部分处理能力，则可能是您使用了太多顶点或复杂的纹理计算。纹理方面，最好在可能的情况下在初始化时将纹理设置为对象，这样您的程序只需加载一次即可完成。对于顶点，请确保您不会意外复制任何内容，并尝试限制粒子效果，因为处理起来可能非常昂贵。

# google-maps - 自定义标记图标未显示 Google 静态地图 v2

> ID：12324996
> 
> 赞同：5
> 
> 时间：2012-09-07T20:33:15.493
> 
> 标签：google-maps, httprequest, google-static-maps

我正在使用 Static Google Maps API v2 下载地图视图的静态图像，其中单个标记仅显示一个图像。但是，添加到`marker`url 参数中的图像似乎没有任何区别，只是在该位置显示了一个红色标记。

请你能告诉我哪里出错了吗？

```
http://maps.googleapis.com/maps/api/staticmap
?center=37.446754,-77.572746
&size=70x61
&maptype=roadmap
&sensor=true
&scale=2
&zoom=15
&key=some_key
&markers=icon:https://foursquare.com/img/categories_v2/shops/financial_bg_64.png|37.446754,-77.572746 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-09-07T20:52:26.007

您的图像 URL 必须删除字母 S HTTPS 安全站点，因此请工作，例如这样：

```
http://foursquare.com/img/categories_v2/shops/financial_bg_64.png 
```

完整代码：

```
http://maps.googleapis.com/maps/api/staticmap?
center=37.446754,-77.572746&size=70x61&maptype=roadmap&sensor=false
&scale=2&zoom=15
&markers=icon:http://foursquare.com/img/categories_v2/shops/financial_bg_64.png|37.446754,-77.572746 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2018-01-24T12:41:23.200

以我的经验，http 或 https 没有这样的要求，只关心图标大小。图标大小不应超过 64X64 像素大小，静态地图会愉快地显示自定义图标。如果发现正确则接受@max_

```
http://maps.googleapis.com/maps/api/staticmap?
center=37.446754,-77.572746&size=70x61&maptype=roadmap&sensor=false
&scale=2&zoom=15
&markers=icon:http://foursquare.com/img/categories_v2/shops/financial_64X64.png|37.446754,-77.572746 
```

当然，请使用尺寸低于 64X64 的图像，而不是

```
http://foursquare.com/img/categories_v2/shops/financial_64X64.png 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-12-17T06:13:24.137

你实际上并没有做错什么，这应该归咎于谷歌：

“Google 静态地图 API 不支持使用 HTTPS 的自定义图标 URL”